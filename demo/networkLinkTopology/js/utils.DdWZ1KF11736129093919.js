import"./@fesjs.C11Gf8kF1736129093919.js";import{_ as t}from"./jszip.D3pW6UC-1736129093919.js";import{F as n}from"./file-saver.B55xMSa_1736129093919.js";import{_ as e,aN as s}from"./three.ES53pcRR1736129093919.js";const o=a;!function(t,n){const e=a,s=p();for(;;)try{if(662896===-parseInt(e(180))/1*(parseInt(e(173))/2)+parseInt(e(147))/3+parseInt(e(142))/4*(parseInt(e(175))/5)+-parseInt(e(150))/6*(-parseInt(e(168))/7)+-parseInt(e(216))/8+-parseInt(e(192))/9+parseInt(e(133))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[a(196)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function a(t,n){const e=p();return(a=function(t,n){return e[t-=126]})(t,n)}!function(){r(this,(function(){const t=a,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(134),"i"),s=h("init");n.test(s+"chain")&&e[t(136)](s+t(207))?h():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[a(196)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function c(t){const n=new s;return new Promise(((e,s)=>{const o=a;n[o(148)](t,(t=>e(JSON[o(130)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=o,s=new(e[n(154)]);return new Promise(((e,r)=>{const a=n;s.setResponseType(a(190)),s[a(148)](t,(n=>{const s=a,i=new FileReader;i[s(199)]=()=>{const n=s,r=function(t){const n=o,e=t.split(".").pop()[n(165)]();return{jpg:n(158),jpeg:"image/jpeg",png:n(193),gif:n(161),bmp:"image/bmp",webp:n(197)}[e]||n(184)}(t),a=i[n(185)][n(210)](",")[1];e(n(215)+r+n(202)+a)},i[s(132)]=t=>{r(t)},i.readAsDataURL(n)}),void 0,(t=>r(t)))}))}function p(){const t=["image/png","info","endsWith","apply","image/webp","data:image/GIF;base64,","onloadend","data:image/PNG;base64,","get",";base64,","then","name","folder","toString","input","data:image/gif;base64,","call","split",'{}.constructor("return this")( )',"WEBP","uuid","base64","data:","5432712rHeTId","return (function() ","push",".json","stringify","scene","while (true) {}","Cache","parse","setResponseType","onerror","14351550WhFRfU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","type","test","PNG","file","string","startsWith","debu","312KjvIOH","warn","Unknown","async","action","351345JBDodz","load","constructor","4116daJcbq","console","trace","log","FileLoader","error","catch","stateObject","image/jpeg","prototype","gger","image/gif","url:","message","data:image/png;base64,","toLowerCase","slice","files","1771nqCqVH","app.json","pop","data:image/WEBP;base64,","enabled","862BzescD","images","5015kyTnFC","GIF","geometries","bind","readAsDataURL","1011hxqgSu","length","data","config.zip","application/octet-stream","result","url","url:images/","loadAsync","url:geometries/","blob","forEach","237024LAOJhf"];return(p=function(){return t})()}i(void 0,(function(){const t=a;let n;try{n=Function(t(217)+t(211)+");")()}catch(o){n=window}const e=n[t(151)]=n.console||{},s=[t(153),t(143),t(194),t(155),"exception","table",t(152)];for(let r=0;r<s[t(181)];r++){const n=i[t(149)][t(159)].bind(i),o=s[r],a=e[o]||n;n.__proto__=i.bind(i),n[t(206)]=a.toString[t(178)](a),e[o]=n}}))(),e[o(129)][o(172)]=!0;const f=n=>{const s=o,r=new(e[s(154)]);return r[s(131)](s(190)),new Promise(((e,o)=>{r[s(148)](n,(async n=>{e(await t.loadAsync(n))}),void 0,(t=>o(t)))}))},l=t=>{const n=o,e=t.substring(0,15),s=n(164),r=n(200),a=n(208),i=n(198),c=n(171);return"data:image/jpeg;base64,"[n(140)](e)||"data:image/JPEG;base64,"[n(140)](e)?"JPEG":s[n(140)](e)||r.startsWith(e)?n(137):a.startsWith(e)||i[n(140)](e)?n(176):"data:image/webp;base64,"[n(140)](e||c[n(140)](e))?n(212):n(144)},g=e=>{const s=o,r=[];e[s(127)][s(177)]&&e[s(127)][s(177)][s(191)]((t=>{const n=s;"BufferGeometry"===t[n(135)]&&(r.push({uuid:t[n(213)],data:t[n(182)]}),t[n(182)]=n(189)+t[n(213)]+n(219))}));const a=[];e[s(127)].images&&e[s(127)][s(174)].forEach((t=>{const n=s;t[n(186)]&&(a[n(218)]({uuid:t[n(213)],url:t.url}),t.url[n(135)]?t[n(186)]=n(187)+t[n(213)]+"."+t[n(186)][n(135)]+".json":t[n(186)]=n(187)+t[n(213)]+"."+l(t[n(186)]))}));const i=new t;if(r[s(181)]){const t=i.folder("geometries");r.forEach((n=>{const e=s;t[e(138)](n.uuid+e(219),JSON[e(126)](n[e(182)]))}))}if(a.length){const t=i[s(205)]("images");a.forEach((n=>{const e=s;n[e(186)].type?t[e(138)](n[e(213)]+"."+n[e(186)].type+e(219),JSON[e(126)](n[e(186)])):t[e(138)](n.uuid+"."+l(n[e(186)]),n[e(186)].split(e(202))[e(170)](),{base64:!0})}))}const c=JSON[s(126)](e);return i[s(138)](s(169),c),i.generateAsync({type:s(190)}).then((t=>{const e=s;n.saveAs(t,e(183))}))},d=(t,n,e)=>{const s=o;t[s(177)]<=0&&t[s(174)]<=0&&e(n)},m=(n,e)=>{const s=o;let r=null;return t[s(188)](n).then((t=>{const n=s;t.files[n(169)]?t.files[n(169)][n(145)](n(139))[n(203)]((s=>{var a,i;const c=n;r=JSON[c(130)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(127)][s(177)])||n[s(191)]((t=>{const n=s;t.data[n(140)](n(162))&&r.geometries++})),null==(e=t[s(127)][s(174)])||e[s(191)]((t=>{const n=s;t[n(186)][n(140)]("url:")&&r[n(174)]++})),r})(r);d(u,r,e),null==(a=r[c(127)][c(177)])||a[c(191)]((n=>{const s=c;n[s(182)][s(140)](s(162))&&t[s(167)][n[s(182)][s(166)](4)].async("string")[s(203)]((t=>{const o=s;n[o(182)]=JSON[o(130)](t),u.geometries--,d(u,r,e)}))})),null==(i=r.scene[c(174)])||i[c(191)]((n=>{const s=c;if(n[s(186)].startsWith("url:")){const o=n[s(186)][s(166)](4);o[s(195)](s(219))?t[s(167)][o][s(145)](s(139))[s(203)]((t=>{const o=s;n[o(186)]=JSON[o(130)](t),u[o(174)]--,d(u,r,e)})):t[s(167)][o][s(145)](s(214))[s(203)]((t=>{const a=s,i=o[a(210)]("."),c=i[i[a(181)]-1].toUpperCase();n[a(186)]="data:image/"+c+a(202)+t,u[a(174)]--,d(u,r,e)}))}}))})):console[n(155)]("非标准文件：不存在 app.json")}),(t=>{const e=s;console[e(155)](n[e(204)]+": "+t[e(163)])})),r};function h(t){function n(t){const e=a;if("string"==typeof t)return function(t){}[e(149)](e(128))[e(196)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(149)]("debu"+e(160))[e(209)](e(146)):function(){return!1}.constructor(e(141)+e(160))[e(196)](e(157)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{f as a,u as b,g as e,l as g,m as i,c as l};

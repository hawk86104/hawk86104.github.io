import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.BCCAmrnj1736129093919.js";import{B as i,V as s,cE as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.ES53pcRR1736129093919.js";import{e as l,j as m,F as d}from"./@tresjs.C4A766dl1736129093919.js";import{a as p}from"./simplex-noise.BHW9v8OL1736129093919.js";import{d as f,a3 as g,o as y,D as b,u as S,r as x,j as v,g as w,m as I,F as P}from"./@vue.uQKhJ3x71736129093919.js";import{g as R}from"./index.B-rh8DoX1736129093919.js";import"./three-custom-shader-material.LMK2zh-z1736129093919.js";import"./buildingsCustomShaderMaterial.DlgvFSb71736129093919.js";import"./@vueuse.CaPKQ7tQ1736129093919.js";import"./@fesjs.C11Gf8kF1736129093919.js";import"./vue-router.Pr1g0CvG1736129093919.js";import"./lodash-es.Dw4PEFNU1736129093919.js";import"./@qlin.BIlp8Yi21736129093919.js";import"./pinia.CtRHBYHM1736129093919.js";import"./vue-demi.Dq6ymT-81736129093919.js";import"./@babel.BBWsvBIa1736129093919.js";import"./@floating-ui.B75jtkXD1736129093919.js";import"./@juggle.BnTvdTVm1736129093919.js";import"./chalk.B3MNILV41736129093919.js";/* empty css                                 */import"./iconify-icon.DK1S_nhj1736129093919.js";import"./@iconify.CkmZGMLx1736129093919.js";import"./dompurify.MwRjsY0L1736129093919.js";import"./oimophysics.B0i2NtyE1736129093919.js";import"./three-stdlib.hbqaGo6K1736129093919.js";import"./@pmndrs.CFxMGwGw1736129093919.js";import"./object-hash.CvGuPWVa1736129093919.js";import"./@amap.DhOO2qTl1736129093919.js";import"./crypto-js.ChIcq6Eo1736129093919.js";import"./three.quarks.Bd0L6lmU1736129093919.js";import"./quarks.core.C7CDonSm1736129093919.js";import"./tweakpane.BCjFYDHx1736129093919.js";const T=A;!function(t,i){const s=A,n=_();for(;;)try{if(692588===parseInt(s(336))/1*(-parseInt(s(319))/2)+parseInt(s(195))/3*(-parseInt(s(266))/4)+parseInt(s(213))/5*(-parseInt(s(249))/6)+-parseInt(s(255))/7+-parseInt(s(207))/8+-parseInt(s(269))/9*(parseInt(s(247))/10)+parseInt(s(258))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const M=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(228)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){M(this,(function(){const t=A,i=new RegExp(t(205)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=C("init");i.test(n+t(302))&&s[t(289)](n+t(252))?C():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(228)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function _(){const t=["exception","sin","vanishingTimeFactor","numSubrays","currentSegmentCallback","maxSubrayRecursion","recursion","2pfkThI","currentVertex","randomGenerator","linPos1","simplexX","sub","onSubrayCreation","recursionProbability","createMesh",'{}.constructor("return this")( )',"noiseSeed","normalize","floor","bind","pos0","radius0","fraction0","231769ARpaFG","needsUpdate","pow","createPrism","isInitialSegment","initSubray","__proto__","updateMesh","straightness","copyParameters","currentCoordinate","birthTime","radius0Factor","positionVariationFactor","isStatic","return (function() ","newPos","roughness","middlePos","iteration","deathTime","warn","fillMesh","drawRange","currentSegmentIndex","maxSubrays","propagationTimeFactor","currentSeed","currentUVCoordinate","timeFraction","isEternal","createSubray","lerp","LightningStrike","2657139AWkXlf","createRandomGenerator","RAY_STEADY","middleLinPos","set","usage","indices","gger","length","toString","function *\\( *\\)","forwardsFill","7352856sPuJss","state","action","createTriangleVerticesWithoutUVs","index","forwards","1515FJAyhs","RAY_INITIALIZED","pos1","setAttribute","RAY_VANISHING","simplexZ","raySegments","RAY_PROPAGATING","string","trace","isLightningStrike","subrayCylinderPosition","prototype","up0","rayParameters","apply","up1","createTriangleVerticesWithUVs","console","onDecideSubrayCreation","push","debu","cos","subrays","createDefaultSubrayCreationCallbacks","COS30DEG","seedGenerator","random","subrayDutyCycle","uvsAttribute","destOffset","ramification","linPos0","down","1210xntpwQ","getNewSegment","6288QrJvPc","while (true) {}","min","input","cross1","generateUVs","1270045hEphSv","crossVectors","call","39993855CkuXsD","visible","constructor","position","lerpVectors","array","multiplyScalar","fractalRayRecursive","4NNJouR","subVectors","addNewSubray","30321gCoRqh","table","SIN30DEG","currentCreateTriangleVertices","radius1","timeScale","getSeed","fractalRay","type","uvs","endPropagationTime","clone","max","subrayProbability","add","simplexY","positionAttribute","maxIterations","side","count","test","vertices","copy","RAY_EXTINGUISHED","subrayConePosition","stateObject","currentSubray","vPos","setIndex","createPrismFaces","time","fraction1","setSeed","chain","init","info","subrayPeriod","seed","minRadius","sourceOffset","radius1Factor","beginVanishingTime","currentIndex"];return(_=function(){return t})()}function A(t,i){const s=_();return(A=function(t,i){return s[t-=194]})(t,i)}j(void 0,(function(){const t=A,i=function(){const t=A;let i;try{i=Function(t(351)+t(328)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(231)]||{},n=["log",t(357),t(304),"error",t(312),t(270),t(222)];for(let e=0;e<n[t(203)];e++){const i=j.constructor[t(225)][t(332)](j),r=n[e],o=s[r]||i;i[t(342)]=j.bind(j),i[t(204)]=o[t(204)][t(332)](o),s[r]=i}}))();class F extends i{constructor(t={}){const i=A;super(),this[i(223)]=!0,this[i(277)]=i(194),this[i(303)](F[i(345)](t,t)),this[i(327)]()}static createRandomGenerator(){const t=A,i=2053,s=[];for(let e=0;e<i;e++)s[t(233)](Math[t(240)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(363)]];return n.currentSeed=(n[e(363)]+1)%i,r},getSeed:function(){return n[t(363)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(331)](s*i)%i}};return n}static[T(345)](t={},i={}){const n=T,e=function(s){return i===t?s:s[A(280)]()};return t.sourceOffset=void 0!==i[n(308)]?e(i[n(308)]):new s(0,100,0),t[n(243)]=void 0!==i[n(243)]?e(i[n(243)]):new s(0,0,0),t.timeScale=void 0!==i[n(274)]?i[n(274)]:1,t[n(353)]=void 0!==i[n(353)]?i[n(353)]:.9,t[n(344)]=void 0!==i[n(344)]?i[n(344)]:.7,t[n(226)]=void 0!==i[n(226)]?e(i[n(226)]):new s(0,0,1),t[n(229)]=void 0!==i[n(229)]?e(i[n(229)]):new s(0,0,1),t[n(334)]=void 0!==i[n(334)]?i[n(334)]:1,t.radius1=void 0!==i.radius1?i[n(273)]:1,t[n(348)]=void 0!==i[n(348)]?i[n(348)]:.5,t[n(309)]=void 0!==i.radius1Factor?i[n(309)]:.2,t[n(307)]=void 0!==i[n(307)]?i.minRadius:.2,t[n(366)]=void 0!==i[n(366)]?i[n(366)]:void 0===i[n(347)]||void 0===i[n(356)],t.birthTime=i.birthTime,t[n(356)]=i[n(356)],t[n(362)]=void 0!==i[n(362)]?i[n(362)]:.1,t[n(314)]=void 0!==i.vanishingTimeFactor?i.vanishingTimeFactor:.9,t[n(305)]=void 0!==i[n(305)]?i[n(305)]:4,t[n(241)]=void 0!==i[n(241)]?i[n(241)]:.6,t.maxIterations=void 0!==i.maxIterations?i[n(286)]:9,t.isStatic=void 0!==i[n(350)]&&i[n(350)],t[n(244)]=void 0!==i[n(244)]?i.ramification:5,t.maxSubrayRecursion=void 0!==i[n(317)]?i.maxSubrayRecursion:3,t.recursionProbability=void 0!==i[n(326)]?i.recursionProbability:.6,t.generateUVs=void 0!==i[n(254)]&&i[n(254)],t[n(321)]=i[n(321)],t.noiseSeed=i[n(329)],t.onDecideSubrayCreation=i[n(232)],t.onSubrayCreation=i[n(325)],t}update(t){const i=T;this[i(350)]||(this.rayParameters[i(366)]||this[i(227)][i(347)]<=t&&t<=this.rayParameters[i(356)]?(this[i(343)](t),t<this.subrays[0][i(279)]?this[i(208)]=F.RAY_PROPAGATING:t>this[i(236)][0][i(310)]?this[i(208)]=F[i(217)]:this[i(208)]=F.RAY_STEADY,this[i(259)]=!0):(this[i(259)]=!1,t<this.rayParameters[i(347)]?this.state=F.RAY_UNBORN:this[i(208)]=F[i(292)]))}init(t){const i=T;this[i(227)]=t,this[i(286)]=void 0!==t[i(286)]?Math[i(331)](t.maxIterations):9,t[i(286)]=this[i(286)],this[i(350)]=void 0!==t[i(350)]&&t[i(350)],t[i(350)]=this[i(350)],this.ramification=void 0!==t.ramification?Math[i(331)](t[i(244)]):5,t.ramification=this[i(244)],this[i(317)]=void 0!==t[i(317)]?Math[i(331)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this[i(317)],this.recursionProbability=void 0!==t[i(326)]?t[i(326)]:.6,t.recursionProbability=this[i(326)],this[i(254)]=void 0!==t[i(254)]&&t.generateUVs,t.generateUVs=this[i(254)],void 0!==t[i(321)]?(this[i(321)]=t[i(321)],this[i(239)]=t.randomGenerator,void 0!==t[i(329)]&&this[i(239)][i(301)](t[i(329)])):(this[i(321)]=F[i(196)](),this[i(239)]=Math),void 0!==t[i(232)]?this[i(232)]=t[i(232)]:(this[i(237)](),void 0!==t.onSubrayCreation&&(this[i(325)]=t.onSubrayCreation)),this[i(208)]=F[i(214)],this.maxSubrays=Math.ceil(1+Math[i(338)](this.ramification,Math.max(0,this.maxSubrayRecursion-1))),t[i(361)]=this[i(361)],this.maxRaySegments=2*(1<<this.maxIterations),this[i(236)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(236)][i(233)](this[i(367)]());this[i(219)]=[];for(let s=0;s<this.maxRaySegments;s++)this.raySegments.push(this.createSegment());this[i(299)]=0,this[i(365)]=0,this[i(316)]=null,this[i(272)]=this[i(254)]?this[i(230)]:this[i(210)],this.numSubrays=0,this[i(295)]=null,this[i(360)]=0,this[i(340)]=!1,this.subrayProbability=0,this[i(320)]=0,this[i(311)]=0,this[i(346)]=0,this[i(364)]=0,this[i(290)]=null,this.uvs=null,this.indices=null,this[i(285)]=null,this.uvsAttribute=null,this[i(323)]=p(this[i(239)][i(240)]),this.simplexY=p(this[i(239)].random),this.simplexZ=p(this[i(239)].random),this[i(212)]=new s,this[i(206)]=new s,this[i(287)]=new s,this[i(246)]=new s,this[i(354)]=new s,this.middleLinPos=new s,this[i(352)]=new s,this[i(296)]=new s,this[i(253)]=new s}[T(327)](){const t=T,i=1<<this[t(286)],s=3*(i+1)*this[t(361)],o=18*i*this.maxSubrays;this.vertices=new Float32Array(3*s),this[t(201)]=new Uint32Array(o),this[t(254)]&&(this.uvs=new Float32Array(2*s)),this[t(358)](0),this[t(297)](new n(this[t(201)],1)),this.positionAttribute=new e(this[t(290)],3),this[t(216)](t(261),this[t(285)]),this.generateUVs&&(this.uvsAttribute=new e(new Float32Array(this[t(278)]),2),this[t(216)]("uv",this[t(242)])),!this.isStatic&&(this[t(211)][t(200)]=r,this[t(285)][t(200)]=r,this[t(254)]&&(this.uvsAttribute[t(200)]=r)),this[t(290)]=this[t(285)][t(263)],this[t(201)]=this[t(211)].array,this[t(254)]&&(this.uvs=this[t(242)].array)}[T(343)](t){const i=T;this[i(358)](t),this[i(359)][i(288)]=this[i(311)],this[i(211)][i(337)]=!0,this[i(285)][i(337)]=!0,this.generateUVs&&(this[i(242)].needsUpdate=!0)}[T(358)](t){const i=T,s=this;this[i(320)]=0,this[i(311)]=0,this.currentCoordinate=0,this[i(364)]=0,this[i(276)](t,(function(n){const e=i,r=s[e(295)];t<r.birthTime||(this[e(227)].isEternal&&0==s[e(295)].recursion?(s[e(339)](n),s[e(232)](n,s)):t<r[e(279)]?s.timeFraction>=n.fraction0*r.propagationTimeFactor&&(s[e(339)](n),s[e(232)](n,s)):t<r[e(310)]?(s.createPrism(n),s.onDecideSubrayCreation(n,s)):(s.timeFraction<=r.vanishingTimeFactor+n[e(300)]*(1-r[e(314)])&&s.createPrism(n),s[e(232)](n,s)))}))}[T(268)](){return this.subrays[this.numSubrays++]}[T(341)](t,i){const s=T;t[s(333)][s(291)](i[s(308)]),t[s(215)][s(291)](i.destOffset),t[s(226)][s(291)](i[s(226)]),t[s(229)][s(291)](i[s(229)]),t[s(334)]=i.radius0,t[s(273)]=i[s(273)],t[s(347)]=i.birthTime,t[s(356)]=i.deathTime,t[s(274)]=i[s(274)],t[s(353)]=i[s(353)],t[s(344)]=i[s(344)],t[s(362)]=i.propagationTimeFactor,t.vanishingTimeFactor=i[s(314)],t[s(286)]=this[s(286)],t[s(306)]=void 0!==i[s(329)]?i[s(329)]:0,t[s(318)]=0}fractalRay(t,i){const s=T;this[s(299)]=t,this.currentSegmentCallback=i,this[s(315)]=0,this[s(341)](this[s(268)](),this[s(227)]);for(let n=0;n<this[s(315)];n++){const i=this[s(236)][n];this[s(295)]=i,this[s(321)][s(301)](i[s(306)]),i[s(279)]=o[s(368)](i.birthTime,i[s(356)],i.propagationTimeFactor),i.beginVanishingTime=o[s(368)](i.deathTime,i[s(347)],1-i[s(314)]);const e=this[s(321)][s(240)];i[s(245)].set(e(),e(),e())[s(264)](1e3),i[s(322)].set(e(),e(),e()).multiplyScalar(1e3),this[s(365)]=(t-i[s(347)])/(i[s(356)]-i[s(347)]),this[s(360)]=0,this[s(340)]=!0;const r=this[s(248)]();r[s(355)]=0,r.pos0[s(291)](i[s(333)]),r[s(215)][s(291)](i[s(215)]),r[s(245)][s(291)](i.linPos0),r[s(322)][s(291)](i.linPos1),r[s(226)][s(291)](i[s(226)]),r[s(229)].copy(i[s(229)]),r.radius0=i[s(334)],r[s(273)]=i[s(273)],r.fraction0=0,r[s(300)]=1,r.positionVariationFactor=1-i[s(344)],this[s(282)]=this[s(244)]*Math[s(338)](this[s(326)],i[s(318)])/(1<<i[s(286)]),this[s(265)](r)}this[s(316)]=null,this[s(295)]=null}fractalRayRecursive(t){const i=T;if(t.iteration>=this[i(295)][i(286)])return void this[i(316)](t);this[i(212)][i(267)](t[i(215)],t[i(333)]);let s=this[i(212)][i(203)]();s<1e-6&&(this[i(212)][i(199)](0,0,.01),s=this[i(212)][i(203)]());const n=.5*(t[i(334)]+t.radius1),e=.5*(t[i(335)]+t[i(300)]),r=this[i(299)]*this[i(295)].timeScale*Math[i(338)](2,t[i(355)]);this[i(354)].lerpVectors(t[i(333)],t[i(215)],.5),this[i(198)][i(262)](t.linPos0,t.linPos1,.5);const o=this.middleLinPos;this[i(352)][i(199)](this[i(323)](o.x,o.y,o.z,r),this[i(284)](o.x,o.y,o.z,r),this[i(218)](o.x,o.y,o.z,r)),this[i(352)][i(264)](t[i(349)]*s),this[i(352)][i(283)](this[i(354)]);const a=this[i(248)]();a[i(333)].copy(t.pos0),a[i(215)][i(291)](this.newPos),a[i(245)][i(291)](t[i(245)]),a[i(322)][i(291)](this.middleLinPos),a[i(226)][i(291)](t.up0),a[i(229)][i(291)](t[i(229)]),a.radius0=t.radius0,a[i(273)]=n,a[i(335)]=t[i(335)],a[i(300)]=e,a[i(349)]=t.positionVariationFactor*this[i(295)][i(353)],a.iteration=t[i(355)]+1;const h=this[i(248)]();h[i(333)][i(291)](this[i(352)]),h.pos1.copy(t.pos1),h[i(245)][i(291)](this[i(198)]),h[i(322)][i(291)](t.linPos1),this[i(253)][i(256)](t[i(226)],this.forwards[i(330)]()),h[i(226)][i(256)](this.forwards,this[i(253)])[i(330)](),h[i(229)][i(291)](t[i(229)]),h[i(334)]=n,h[i(273)]=t[i(273)],h[i(335)]=e,h[i(300)]=t.fraction1,h[i(349)]=t.positionVariationFactor*this.currentSubray[i(353)],h[i(355)]=t[i(355)]+1,this.fractalRayRecursive(a),this[i(265)](h)}[T(339)](t){const i=T;this.forwardsFill.subVectors(t.pos1,t.pos0)[i(330)](),this[i(340)]&&(this[i(272)](t[i(333)],t[i(226)],this[i(206)],t[i(334)],0),this.isInitialSegment=!1),this[i(272)](t[i(215)],t[i(226)],this.forwardsFill,t[i(273)],t[i(300)]),this[i(298)]()}[T(210)](t,i,s,n){const e=T;this.side[e(256)](i,s)[e(264)](n*F.COS30DEG),this[e(246)][e(291)](i)[e(264)](-n*F[e(271)]);const r=this.vPos,o=this[e(290)];r[e(291)](t)[e(324)](this[e(287)])[e(283)](this[e(246)]),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(346)]++]=r.z,r[e(291)](t).add(this[e(287)])[e(283)](this[e(246)]),o[this.currentCoordinate++]=r.x,o[this[e(346)]++]=r.y,o[this[e(346)]++]=r.z,r.copy(i)[e(264)](n)[e(283)](t),o[this[e(346)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(346)]++]=r.z,this.currentVertex+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=T;this[r(287)][r(256)](i,s)[r(264)](n*F.COS30DEG),this[r(246)][r(291)](i)[r(264)](-n*F[r(271)]);const o=this[r(296)],a=this[r(290)],h=this[r(278)];o[r(291)](t).sub(this[r(287)]).add(this[r(246)]),a[this[r(346)]++]=o.x,a[this[r(346)]++]=o.y,a[this[r(346)]++]=o.z,h[this[r(364)]++]=e,h[this[r(364)]++]=0,o.copy(t)[r(283)](this[r(287)])[r(283)](this.down),a[this[r(346)]++]=o.x,a[this[r(346)]++]=o.y,a[this[r(346)]++]=o.z,h[this[r(364)]++]=e,h[this[r(364)]++]=.5,o[r(291)](i)[r(264)](n).add(t),a[this[r(346)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(346)]++]=o.z,h[this[r(364)]++]=e,h[this[r(364)]++]=1,this[r(320)]+=3}[T(298)](t){const i=T,s=this.indices;t=this[i(320)]-6,s[this[i(311)]++]=t+1,s[this[i(311)]++]=t+2,s[this[i(311)]++]=t+5,s[this[i(311)]++]=t+1,s[this[i(311)]++]=t+5,s[this[i(311)]++]=t+4,s[this[i(311)]++]=t+0,s[this[i(311)]++]=t+1,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+0,s[this[i(311)]++]=t+4,s[this[i(311)]++]=t+3,s[this[i(311)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(311)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(311)]++]=t+3,s[this.currentIndex++]=t+5}[T(237)](){const t=T,i=this.randomGenerator[t(240)];this[t(232)]=function(s,n){const e=t,r=n[e(295)],a=n[e(227)][e(305)],h=n[e(227)][e(241)],c=n[e(227)][e(366)]&&0==r[e(318)]?-i()*a:o[e(368)](r[e(347)],r[e(279)],s.fraction0)-i()*a,u=n[e(299)]-c,l=Math[e(331)](u/a),m=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r[e(318)]<n[e(317)]&&n[e(315)]<n[e(361)]&&i()<d){const t=n.addNewSubray(),o=n.randomGenerator[e(275)]();t[e(306)]=m,n[e(321)][e(301)](m),t[e(318)]=r[e(318)]+1,t[e(286)]=Math.max(1,r[e(286)]-1),t[e(245)][e(199)](i(),i(),i()).multiplyScalar(1e3),t[e(322)][e(199)](i(),i(),i()).multiplyScalar(1e3),t[e(226)][e(291)](r[e(226)]),t[e(229)].copy(r[e(229)]),t[e(334)]=s[e(334)]*n[e(227)][e(348)],t[e(273)]=Math.min(n[e(227)][e(307)],s[e(273)]*n[e(227)][e(309)]),t[e(347)]=c+l*a,t[e(356)]=t[e(347)]+a*h,!n[e(227)][e(366)]&&0==r.recursion&&(t[e(347)]=Math[e(281)](t[e(347)],r.birthTime),t[e(356)]=Math[e(251)](t[e(356)],r[e(356)])),t[e(274)]=2*r.timeScale,t[e(353)]=r[e(353)],t[e(344)]=r.straightness,t[e(362)]=r.propagationTimeFactor,t.vanishingTimeFactor=r[e(314)],n[e(325)](s,r,t,n),n[e(321)].setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(325)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(293)]=function(s,o,h,c,u,l){const m=t;h[m(333)].copy(s[m(333)]),n[m(267)](o[m(215)],o[m(333)]),e[m(291)](n)[m(330)](),n[m(264)](s.fraction0+(1-s.fraction0)*(i()*c));const d=n[m(203)]();r[m(256)](o[m(226)],e);const p=2*Math.PI*i();r[m(264)](Math[m(235)](p)),a[m(291)](o[m(226)])[m(264)](Math[m(313)](p)),h[m(215)][m(291)](r)[m(283)](a).multiplyScalar(d*u*(l+i()*(1-l)))[m(283)](n)[m(283)](o.pos0)},this[t(224)]=function(s,o,h,c,u,l){const m=t;h[m(333)][m(291)](s[m(333)]),n[m(267)](o[m(215)],o[m(333)]),e.copy(n)[m(330)](),n[m(264)](s[m(335)]+(1-s[m(335)])*((2*i()-1)*c));const d=n[m(203)]();r[m(256)](o.up0,e);const p=2*Math.PI*i();r[m(264)](Math[m(235)](p)),a[m(291)](o.up0).multiplyScalar(Math.sin(p)),h[m(215)][m(291)](r).add(a)[m(264)](d*u*(l+i()*(1-l)))[m(283)](n)[m(283)](o[m(333)])}}[T(367)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(248)](){return this[T(219)][this.currentSegmentIndex++]}[T(291)](t){const i=T;return super[i(291)](t),this[i(303)](F[i(345)]({},t[i(227)])),this}[T(280)](){const t=T;return new(this[t(260)])(F[t(345)]({},this[t(227)]))}}function C(t){function i(t){const s=A;if(typeof t===s(221))return function(t){}[s(260)](s(250))[s(228)]("counter");1!==(""+t/t)[s(203)]||t%20==0?function(){return!0}[s(260)](s(234)+s(202))[s(257)](s(209)):function(){return!1}[s(260)]("debu"+s(202))[s(228)](s(294)),i(++t)}try{if(t)return i;i(0)}catch(s){}}F[T(214)]=0,F.RAY_UNBORN=1,F[T(220)]=2,F[T(197)]=3,F[T(217)]=4,F.RAY_EXTINGUISHED=5,F[T(238)]=Math.cos(30*Math.PI/180),F[T(271)]=Math[T(313)](30*Math.PI/180);const V=D;function H(){const t=["counter","maxHeight","1FKspge","pop","stateObject","remove","1254996GSkEWc","RAY_EXTINGUISHED","geometry","rayParameters","onRayPosition","exception","lightningMaxPeriod","update","8206163TnvKtS","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","lightningMinPeriod","log","trace",'{}.constructor("return this")( )',"minHeight","size","test","table","isLightningStorm","maxLightnings","destOffset","length","function *\\( *\\)","73884bseINL","action","copyParameters","prototype","lightningMinDuration","maxSlope","random","noiseSeed","constructor","add","bind","set","nextLightningTime","copy","775706ZQEfnn","push","birthTime","lightningMaterial","info","console","clone","stormParams","getNextLightningTime","lightningParameters","sourceOffset","splice","deadLightningsMeshes","debu","147UkoHEq","error","warn","call","208KcqxSz","gger","8241740gYxdzB","multiplyScalar","inited","state","22adfkiG","onLightningDown","input","while (true) {}","indexOf","277803JhjgLY","init","isEternal","lightningsMeshes","6082840ZGLmfI","lightningMaxDuration","toString"];return(H=function(){return t})()}!function(t,i){const s=D,n=H();for(;;)try{if(700551===-parseInt(s(168))/1*(-parseInt(s(210))/2)+parseInt(s(144))/3*(parseInt(s(196))/4)+parseInt(s(163))/5+parseInt(s(172))/6+-parseInt(s(180))/7+-parseInt(s(148))/8*(-parseInt(s(159))/9)+parseInt(s(150))/10*(-parseInt(s(154))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(181)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=D,i=new RegExp(t(195)),s=new RegExp(t(182),"i"),n=k(t(160));i[t(189)](n+"chain")&&s.test(n+t(156))?k():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(t,i){const s=H();return(D=function(t,i){return s[t-=132]})(t,i)}E(void 0,(function(){const t=D;let i;try{i=Function("return (function() "+t(186)+");")()}catch(e){i=window}const s=i[t(135)]=i[t(135)]||{},n=[t(184),t(146),t(134),t(145),t(177),t(190),t(185)];for(let r=0;r<n.length;r++){const i=E[t(204)][t(199)][t(206)](E),e=n[r],o=s[e]||i;i.__proto__=E[t(206)](E),i[t(165)]=o[t(165)][t(206)](o),s[e]=i}}))();class G extends a{constructor(t={}){const i=D;super(),this[i(191)]=!0,this.stormParams=t,t[i(188)]=void 0!==t[i(188)]?t[i(188)]:1e3,t.minHeight=void 0!==t[i(187)]?t[i(187)]:80,t[i(167)]=void 0!==t[i(167)]?t.maxHeight:100,t.maxSlope=void 0!==t.maxSlope?t[i(201)]:1.1,t[i(192)]=void 0!==t[i(192)]?t[i(192)]:3,t[i(183)]=void 0!==t.lightningMinPeriod?t.lightningMinPeriod:3,t[i(178)]=void 0!==t[i(178)]?t[i(178)]:7,t[i(200)]=void 0!==t[i(200)]?t[i(200)]:1,t[i(164)]=void 0!==t[i(164)]?t[i(164)]:2.5,this[i(139)]=F[i(198)](t[i(139)],t[i(139)]),this.lightningParameters[i(161)]=!1,this[i(133)]=void 0!==t[i(133)]?t[i(133)]:new h({color:11599871}),void 0!==t[i(176)]?this[i(176)]=t.onRayPosition:this.onRayPosition=function(s,n){const e=i;n[e(207)]((Math[e(202)]()-.5)*t.size,0,(Math[e(202)]()-.5)*t[e(188)]);const r=o.lerp(t.minHeight,t[e(167)],Math[e(202)]());s[e(207)](t.maxSlope*(2*Math[e(202)]()-1),1,t.maxSlope*(2*Math.random()-1))[e(151)](r)[e(205)](n)},this.onLightningDown=t.onLightningDown,this[i(152)]=!1,this[i(208)]=0,this[i(162)]=[],this[i(142)]=[];for(let s=0;s<this[i(137)][i(192)];s++){const t=new F(F[i(198)]({},this.lightningParameters)),s=new c(t,this[i(133)]);this[i(142)][i(211)](s)}}[V(179)](t){const i=V;if(!this.inited&&(this[i(208)]=this[i(138)](t)*Math[i(202)](),this.inited=!0),t>=this[i(208)]){const s=this[i(142)][i(169)]();if(s){const n=F[i(198)](s[i(174)][i(175)],this[i(139)]);n[i(132)]=t,n.deathTime=t+o.lerp(this[i(137)].lightningMinDuration,this[i(137)][i(164)],Math[i(202)]()),this[i(176)](n[i(140)],n[i(193)]),n[i(203)]=Math[i(202)](),this.add(s),this[i(162)][i(211)](s)}this.nextLightningTime=this[i(138)](t)}let s=0,n=this[i(162)][i(194)];for(;s<n;){const e=this[i(162)][s],r=e[i(174)],o=r[i(153)];r[i(179)](t),o===F.RAY_PROPAGATING&&r[i(153)]>o&&this[i(155)]&&this[i(155)](r),r.state===F[i(173)]?(this[i(162)][i(141)](this[i(162)][i(158)](e),1),this[i(142)][i(211)](e),this[i(171)](e),n--):s++}}[V(138)](t){const i=V;return t+o.lerp(this[i(137)].lightningMinPeriod,this.stormParams[i(178)],Math[i(202)]())/(this[i(137)].maxLightnings+1)}[V(209)](t,i){const s=V;return super[s(209)](t,i),this[s(137)].size=t[s(137)][s(188)],this[s(137)][s(187)]=t[s(137)][s(187)],this[s(137)][s(167)]=t.stormParams.maxHeight,this[s(137)][s(201)]=t[s(137)][s(201)],this[s(137)][s(192)]=t[s(137)][s(192)],this.stormParams[s(183)]=t[s(137)][s(183)],this[s(137)].lightningMaxPeriod=t[s(137)][s(178)],this.stormParams[s(200)]=t[s(137)][s(200)],this[s(137)][s(164)]=t[s(137)][s(164)],this[s(139)]=F[s(198)]({},t[s(139)]),this[s(133)]=t[s(137)].lightningMaterial,this[s(155)]=t[s(155)],this}[V(136)](){const t=V;return new(this[t(204)])(this.stormParams)[t(209)](this)}}function k(t){function i(t){const s=D;if("string"==typeof t)return function(t){}[s(204)](s(157))[s(181)](s(166));1!==(""+t/t)[s(194)]||t%20==0?function(){return!0}[s(204)](s(143)+s(149))[s(147)](s(197)):function(){return!1}[s(204)](s(143)+"gger")[s(181)](s(170)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const L=O;function O(t,i){const s=U();return(O=function(t,i){return s[t-=279]})(t,i)}!function(t,i){const s=O,n=U();for(;;)try{if(525902===parseInt(s(292))/1+-parseInt(s(285))/2*(parseInt(s(286))/3)+-parseInt(s(309))/4+parseInt(s(330))/5*(parseInt(s(343))/6)+parseInt(s(280))/7*(-parseInt(s(340))/8)+-parseInt(s(300))/9+parseInt(s(295))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(319)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=O,i=new RegExp(t(303)),s=new RegExp(t(322),"i"),n=W("init");i[t(337)](n+"chain")&&s[t(337)](n+t(316))?W():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function U(){const t=["color","81536juRxIj","9AouuCp","update","radius0","toString","#b0ffff","copy","383680dfpCrk","gger","subrayDutyCycle","18745010RbvkMi","prototype","error","add","table","6783498onFYfa","length","bind","function *\\( *\\)","trace","straightness","Color","sub","exception","2239232btvqWj","stateObject",'{}.constructor("return this")( )',"dot","primitive","subrayConePosition","call","input","size","roughness","apply","lightStorm","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","timeScale","console","counter","sourceOffset","Vector3","minHeight","pos1","258370dJiPan","action","object","maxHeight","string","debu","warn","test","multiplyScalar","__proto__","478664sSYdso","log","rayParameters","42PLgITt","constructor","maxLightnings","77gJWYDw","radius1","set","subVectors"];return(U=function(){return t})()}Y(void 0,(function(){const t=O,i=function(){const t=O;let i;try{i=Function(t(321)+t(311)+");")()}catch(s){i=window}return i}(),s=i[t(324)]=i[t(324)]||{},n=[t(341),t(336),"info",t(297),t(308),t(299),t(304)];for(let e=0;e<n[t(301)];e++){const i=Y[t(344)][t(296)][t(302)](Y),r=n[e],o=s[r]||i;i[t(339)]=Y[t(302)](Y),i.toString=o[t(289)].bind(o),s[r]=i}}))();const Z=[L(332)],J=f({__name:L(320),props:{color:{default:L(290)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=L,s=t,n=new(u[i(306)])(s[i(284)]),e=new h({color:n}),r=new(u[i(327)])(0,-1,0);let o=0;const a=new(u[i(327)]),c=new(u[i(327)]),m={roughness:s[i(318)],straightness:s[i(305)],radius0:s[i(288)],radius1:s[i(281)],timeScale:s[i(323)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(294)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(314)](t,s,n,.6,.6,.5),o=e[h(342)].sourceOffset.y,a[h(283)](n[h(329)],e[h(342)][h(326)]);const u=r[h(312)](a);c[h(291)](r)[h(338)](u),a[h(307)](c);const l=u/o>.5?o/u:1;c[h(338)](l),a[h(298)](c),n[h(329)].addVectors(a,e[h(342)][h(326)])}},d=new G({size:s[i(317)],minHeight:s.minHeight,maxHeight:s[i(333)],maxSlope:.6,maxLightnings:s[i(279)],lightningParameters:m,lightningMaterial:e});g((()=>{const t=i,n=d.stormParams;n[t(317)]=s.size,n.minHeight=s[t(328)],n.maxHeight=s[t(333)],e.color[t(282)](s[t(284)]),m[t(318)]=s[t(318)],m[t(305)]=s.straightness,m[t(288)]=s.radius0,m[t(281)]=s[t(281)],m[t(323)]=s[t(323)]}));const{onLoop:p}=l();return p((({elapsed:t})=>{d[i(287)](t)})),(t,s)=>{const n=i;return y(),b(n(313),{object:S(d),renderOrder:9999},null,8,Z)}}});function W(t){function i(t){const s=O;if(typeof t===s(334))return function(t){}[s(344)]("while (true) {}")[s(319)](s(325));1!==(""+t/t).length||t%20==0?function(){return!0}[s(344)](s(335)+s(293))[s(315)](s(331)):function(){return!1}[s(344)](s(335)+s(293))[s(319)](s(310)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=B;!function(t,i){const s=B,n=K();for(;;)try{if(640597===parseInt(s(462))/1+-parseInt(s(434))/2*(-parseInt(s(461))/3)+-parseInt(s(447))/4*(parseInt(s(442))/5)+-parseInt(s(459))/6+parseInt(s(455))/7+parseInt(s(460))/8*(parseInt(s(429))/9)+-parseInt(s(464))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[B(443)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){X(this,(function(){const t=B,i=new RegExp(t(430)),s=new RegExp(t(426),"i"),n=tt(t(432));i[t(440)](n+"chain")&&s[t(440)](n+t(435))?tt():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[B(443)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function B(t,i){const s=K();return(B=function(t,i){return s[t-=425]})(t,i)}function K(){const t=["timeScale","直度度","minHeight","时间缩放","4326448IvDonJ","__proto__","warn","gger","1350552CpuxOo","6504GgEHaZ","89358bTPmXa","549549Ahszju","debu","13876200aeyLvO","value","console",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","lightningStorm","11097dHGnWE","function *\\( *\\)","roughness","init","maxHeight","12WtAFzm","input","length","radius0","trace","return (function() ","test","log","15395xJRdxJ","apply","bind","#ffbde7","#6f6f6f","124Iruykb","info","exception","constructor"];return(K=function(){return t})()}q(void 0,(function(){const t=B,i=function(){const t=B;let i;try{i=Function(t(439)+t(425)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(466)]||{},n=[t(441),t(457),t(448),"error",t(449),"table",t(438)];for(let e=0;e<n[t(436)];e++){const i=q[t(450)].prototype[t(444)](q),r=n[e],o=s[r]||i;i[t(456)]=q[t(444)](q),i.toString=o.toString.bind(o),s[r]=i}}))();const Q=f({__name:$(428),setup(i){const s=$,n=x({cellSize:60,cellThickness:1,cellColor:s(446),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=m({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(445),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(452),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(454),value:.15,min:.01,max:1,step:.01}});return(i,m)=>{const p=s;return y(),b(P,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[v(J,{minHeight:S(e)[p(465)],maxHeight:S(r)[p(465)],color:S(o).value,roughness:S(a)[p(465)],straightness:S(h)[p(465)],radius0:S(c)[p(465)],radius1:S(u)[p(465)],timeScale:S(l)[p(465)]},null,8,[p(453),p(433),"color",p(431),"straightness",p(437),"radius1",p(451)]),v(S(R),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(S(d))],64)}}});function tt(t){function i(t){const s=B;if("string"==typeof t)return function(t){}[s(450)]("while (true) {}")[s(443)]("counter");1!==(""+t/t)[s(436)]||t%20==0?function(){return!0}[s(450)](s(463)+s(458)).call("action"):function(){return!1}[s(450)](s(463)+s(458))[s(443)](s(427)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

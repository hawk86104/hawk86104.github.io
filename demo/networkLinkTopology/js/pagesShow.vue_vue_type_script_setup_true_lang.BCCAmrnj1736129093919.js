import{_ as t,C as n,cq as e,cr as o,cs as r,ct as i,m as s,c9 as c,ak as u,am as a}from"./three.ES53pcRR1736129093919.js";import{h as l,e as f,U as p}from"./@tresjs.C4A766dl1736129093919.js";import{z as d}from"./three-custom-shader-material.LMK2zh-z1736129093919.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.DlgvFSb71736129093919.js";import{d as m,b as y,a3 as w,w as b,o as I,D as v,u as _,r as x,a6 as C,e as S,f as j,g as R,J as M,j as A,aj as B,ak as T,F as E,I as F,G,m as L}from"./@vue.uQKhJ3x71736129093919.js";!function(t,n){const e=H,o=J();for(;;)try{if(224290===parseInt(e(134))/1+parseInt(e(136))/2*(parseInt(e(152))/3)+parseInt(e(139))/4*(parseInt(e(138))/5)+parseInt(e(161))/6*(-parseInt(e(140))/7)+-parseInt(e(145))/8*(-parseInt(e(162))/9)+-parseInt(e(169))/10*(parseInt(e(142))/11)+parseInt(e(165))/12*(-parseInt(e(141))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const O=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(163)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){O(this,(function(){const t=H,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(135),"i"),o=z("init");n[t(148)](o+t(146))&&e.test(o+"input")?z():o("0")}))()}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();k(void 0,(function(){const t=H;let n;try{n=Function(t(172)+t(164)+");")()}catch(r){n=window}const e=n[t(158)]=n[t(158)]||{},o=[t(170),t(166),t(144),t(154),t(168),"table","trace"];for(let i=0;i<o[t(143)];i++){const n=k[t(173)][t(167)][t(153)](k),r=o[i],s=e[r]||n;n[t(147)]=k[t(153)](k),n.toString=s[t(151)][t(153)](s),e[r]=n}}))();const Z=async()=>{const t=await l("./plugins/digitalCity/model/shanghai.FBX");let n=null,e=null,o=null;return t.traverse((t=>{const r=H;t[r(155)]===r(149)&&(n=t),"LANDMASS"===t[r(155)]&&(e=t),t[r(155)]===r(137)&&(o=t)})),{model:t,city:n,land:e,roads:o}};function H(t,n){const e=J();return(H=function(t,n){return e[t-=134]})(t,n)}function z(t){function n(t){const e=H;if("string"==typeof t)return function(t){}[e(173)](e(171))[e(163)](e(150));1!==(""+t/t)[e(143)]||t%20==0?function(){return!0}[e(173)]("debu"+e(157))[e(156)](e(160)):function(){return!1}[e(173)]("debu"+e(157))[e(163)](e(159)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function J(){const t=["11FlybMT","length","info","2056EJxxJv","chain","__proto__","test","CITY_UNTRIANGULATED","counter","toString","1150359vYXELm","bind","error","name","call","gger","console","stateObject","action","1167486sFUMjc","4842AtPVEQ","apply",'{}.constructor("return this")( )',"6597924NWBlwF","warn","prototype","exception","1544150bGwTfl","log","while (true) {}","return (function() ","constructor","378442Hojrmk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2QNdyEC","ROADS","20pLGrtl","222952GYvyKs","7gVFVRG","13MBiYKG"];return(J=function(){return t})()}function W(){const t=["model","1584095lRLrJl","6404748eAIPst","setStyle","buildingsModelCustomShader","primitive","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","landColor","string","log","372285LTWMoi","prototype","toString","dispose","opacity","6622uPMbQt","length","city","table","#ffffff","clone","counter","color","warn","48rgljeL","material","input","119886McQmGn","189iapuED","bulidingsColor","constructor","#ffff00",'{}.constructor("return this")( )',"gger","isArray","test","value","uOpacity","DoubleSide","80nTMYpa","__proto__","boundingBox","renderOrder","2068671oJJcuj","topColor","call","apply","Color","object","447IndlbR","chain","console","uniforms","__csm","bind","gradient","action","uGradient","debu","return (function() ","449216ZbxgEQ","land","exception"];return(W=function(){return t})()}const D=Q;!function(t,n){const e=Q,o=W();for(;;)try{if(806921===parseInt(e(182))/1+parseInt(e(133))/2*(-parseInt(e(167))/3)+-parseInt(e(142))/4*(parseInt(e(128))/5)+parseInt(e(145))/6+parseInt(e(183))/7+parseInt(e(178))/8*(parseInt(e(146))/9)+-parseInt(e(157))/10*(parseInt(e(161))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(164)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=Q,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(124),"i"),o=Y("init");n[t(153)](o+t(168))&&e[t(153)](o+t(144))?Y():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(164)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Q(t,n){const e=W();return(Q=function(t,n){return e[t-=122]})(t,n)}$(void 0,(function(){const t=Q;let n;try{n=Function(t(177)+t(150)+");")()}catch(r){n=window}const e=n.console=n[t(169)]||{},o=[t(127),t(141),"info","error",t(180),t(136),"trace"];for(let i=0;i<o.length;i++){const n=$.constructor[t(129)].bind($),r=o[i],s=e[r]||n;n[t(158)]=$[t(172)]($),n[t(130)]=s[t(130)][t(172)](s),e[r]=n}}))();const q=[D(166)],X=m({__name:D(122),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:"#112233"},topColor:{default:D(149)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=D,r=e,i=y(0),s=r.model[o(135)];s[o(160)]=1001;const c=r[o(181)][o(179)];(()=>{const e=o,{geometry:c}=s;c.computeBoundingBox(),c.computeBoundingSphere();const{max:u,min:a}=c[e(159)];if(s[e(143)][e(171)])return;const l=new d({baseMaterial:s.material,vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(165)])(r.bulidingsColor)},uOpacity:{value:r[e(132)]},uLightColor:{value:new n(e(137))},uTopColor:{value:new(t[e(165)])(r[e(162)])},uTime:i,uGradient:{value:r[e(173)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(156)]});s.material[e(131)](),s[e(143)]=l})();const{onLoop:u}=f();u((({delta:t})=>{i[o(154)]+=t})),w((()=>{const n=o;r[n(147)]&&s.material.uniforms.uColor.value.setStyle(r[n(147)]),r[n(125)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(179)&&(s=Array[i(152)](c[i(143)])?c.material:[c.material],s.forEach((n=>{const o=i;n[e][o(184)](r[o(125)]),n.side=t[o(156)]})))})(n(179),n(140)),r[n(132)]&&(s[n(143)][n(170)][n(155)][n(154)]=r[n(132)])})),b(r,((t,n)=>{const e=o;s[e(143)][e(170)][e(175)][e(154)]=t.gradient}));const a=r[o(181)].model[o(138)]();return(t,n)=>{const e=o;return I(),v(e(123),{object:_(a)},null,8,q)}}});function Y(t){function n(t){const e=Q;if(typeof t===e(126))return function(t){}[e(148)]("while (true) {}")[e(164)](e(139));1!==(""+t/t)[e(134)]||t%20==0?function(){return!0}.constructor(e(176)+e(151))[e(163)](e(174)):function(){return!1}[e(148)]("debugger")[e(164)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function N(t,n){const e=nt();return(N=function(t,n){return e[t-=441]})(t,n)}const U=N;!function(t,n){const e=N,o=nt();for(;;)try{if(480598===-parseInt(e(481))/1*(-parseInt(e(459))/2)+parseInt(e(444))/3+parseInt(e(462))/4+parseInt(e(448))/5*(parseInt(e(494))/6)+-parseInt(e(482))/7*(parseInt(e(457))/8)+parseInt(e(489))/9*(parseInt(e(467))/10)+-parseInt(e(477))/11*(parseInt(e(441))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(497)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=N,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot(t(445));n[t(473)](o+"chain")&&e.test(o+t(484))?ot():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();K(void 0,(function(){const t=N,n=function(){const t=N;let n;try{n=Function(t(476)+t(487)+");")()}catch(e){n=window}return n}(),e=n[t(464)]=n[t(464)]||{},o=[t(483),t(496),t(470),t(490),t(488),"table",t(443)];for(let r=0;r<o[t(474)];r++){const n=K[t(493)][t(485)][t(451)](K),i=o[r],s=e[i]||n;n[t(447)]=K[t(451)](K),n[t(452)]=s[t(452)][t(451)](s),e[i]=n}}))();const tt=[U(449)];function nt(){const t=["value","3806436sewgoH","buildingsLines","console","width","debu","230660vZgeJU","linewidth","renderOrder","info","set","material","test","length","uOpacity","return (function() ","11qtPSGf","opacity","call","while (true) {}","476dBXquL","1659rBWvPV","log","input","prototype","gger",'{}.constructor("return this")( )',"exception","9PPmRcg","error","clone","style","constructor","2421012tmcRtm","builds","warn","apply","stateObject","17551524IQWXOM","matrix","trace","1873884HcyKpG","init","uniforms","__proto__","10wZzbKn","object","string","bind","toString","Wireframe","#FFF","innerHeight","applyMatrix4","15760QOSzlB","color","16OJlhQN"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "];return(nt=function(){return t})()}const et=m({__name:U(463),props:{builds:{},width:{default:1},color:{default:U(454)},opacity:{default:1},style:{default:U(453)}},setup(t){const c=U,u=t;let a=null,l=null;if("Wireframe"===u.style){const t=new e(u[c(495)].geometry);let n=(new o).fromEdgesGeometry(t),s=new r({color:u[c(458)],linewidth:u[c(465)],opacity:u.opacity,transparent:!0,depthWrite:!0,depthTest:!0});s.resolution[c(471)](window.innerWidth,window[c(455)]),a=new i(n,s),a[c(456)](u.builds[c(442)][c(491)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(u[c(458)])},uOpacity:{value:u.opacity}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:c(460)};const t=new e(u[c(495)].geometry),o=new s(l);a=new LineSegments(t,o),a[c(456)](u.builds[c(442)][c(491)]()),a[c(472)][c(468)]=u.width,a[c(469)]=1e3}return w((()=>{const t=c;"Shader"===u[t(492)]&&(u.color&&(l.uniforms.uColor[t(461)]=new n(u.color)),u[t(478)]&&(l[t(446)][t(475)][t(461)]=u[t(478)])),u[t(492)]===t(453)&&(u.color&&(a.material[t(458)]=new n(u[t(458)])),u[t(478)]&&(a[t(472)][t(478)]=u[t(478)])),u.width&&(a.material[t(468)]=u[t(465)])})),(t,n)=>(I(),v("primitive",{object:_(a)},null,8,tt))}});function ot(t){function n(t){const e=N;if(typeof t===e(450))return function(t){}[e(493)](e(480))[e(497)]("counter");1!==(""+t/t)[e(474)]||t%20==0?function(){return!0}[e(493)](e(466)+"gger")[e(479)]("action"):function(){return!1}.constructor(e(466)+e(486))[e(497)](e(498)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=ct;!function(t,n){const e=ct,o=ut();for(;;)try{if(273275===parseInt(e(232))/1*(-parseInt(e(225))/2)+parseInt(e(246))/3*(-parseInt(e(211))/4)+-parseInt(e(219))/5+parseInt(e(251))/6*(-parseInt(e(237))/7)+-parseInt(e(218))/8+parseInt(e(223))/9*(-parseInt(e(234))/10)+parseInt(e(226))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ct,n=new RegExp(t(220)),e=new RegExp(t(260),"i"),o=pt(t(229));n[t(258)](o+t(235))&&e[t(258)](o+t(227))?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(222)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=ut();return(ct=function(t,n){return e[t-=210]})(t,n)}function ut(){const t=["warn","init","#ffffff","showBuildings","1021dcZacm","__proto__","10Hfuvir","chain","model","7UjZSOc","action","string","trace","perspectiveCameraRef","builds","return (function() ","disableRender","pagesShow","51gBhJVe","console","#000",'{}.constructor("return this")( )',"constructor","1119318jqYKvf","#000000","debu","TresDirectionalLight","toString","TresAmbientLight","autoRotate","test","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","67148XtRJdM","call","tcRef","table","$slots","log","bind","3264776kqMkDa","182340FEqrId","function *\\( *\\)","counter","apply","3066309GTXJqF","while (true) {}","298HLZFby","18508622YBpMXb","input"];return(ut=function(){return t})()}st(void 0,(function(){const t=ct,n=function(){const t=ct;let n;try{n=Function(t(243)+t(249)+");")()}catch(e){n=window}return n}(),e=n[t(247)]=n[t(247)]||{},o=[t(216),t(228),"info","error","exception",t(214),t(240)];for(let r=0;r<o[t(210)];r++){const n=st[t(250)].prototype[t(217)](st),i=o[r],s=e[i]||n;n[t(233)]=st[t(217)](st),n[t(255)]=s[t(255)][t(217)](s),e[i]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=m({__name:rt(245),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=x({clearColor:n(252),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:u,toneMapping:a,disableRender:r[n(244)]}),s=x({autoRotate:r[n(257)],enableDamping:!0});let l=null;r[n(231)]&&([e,o]=C((()=>Z())),e=await e,o(),l=e);const f=y(),d=y();return(t,e)=>{const o=n,c=S("TresCanvas");return I(),j(c,L({ref_key:o(213),ref:d},i,{"window-size":""}),{default:R((()=>[M("TresPerspectiveCamera",{ref_key:o(241),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),A(_(p),B(T(s)),null,16),e[0]||(e[0]=M(o(256),{color:o(230)},null,-1)),e[1]||(e[1]=M(o(254),{position:[100,100,0],intensity:.5,color:o(230)},null,-1)),r[o(231)]&&_(l)?(I(),v(E,{key:0},[A(X,{model:_(l)},null,8,[o(236)]),A(et,{builds:_(l).city,color:o(248)},null,8,[o(242)])],64)):F("",!0),G(t[o(215)],"ability"),r.showAxesHelper?(I(),v("TresAxesHelper",at)):F("",!0),r.showGridHelper?(I(),v("TresGridHelper",lt)):F("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=ct;if(typeof t===e(239))return function(t){}[e(250)](e(224))[e(222)](e(221));1!==(""+t/t)[e(210)]||t%20==0?function(){return!0}[e(250)](e(253)+e(259))[e(212)](e(238)):function(){return!1}.constructor(e(253)+"gger")[e(222)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{X as _,et as a,ft as b,Z as l};

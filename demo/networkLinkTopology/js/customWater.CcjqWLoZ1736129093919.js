import{a6 as t,C as n,_ as e}from"./three.ES53pcRR1736129093919.js";import{e as r,W as a,U as o,H as s}from"./@tresjs.C4A766dl1736129093919.js";import{g as i,c as l}from"./index.B-rh8DoX1736129093919.js";import{z as c}from"./three-custom-shader-material.LMK2zh-z1736129093919.js";import{p as u}from"./gl-noise.DGdRrr5z1736129093919.js";import{d as p,b as f,a3 as g,w as h,o as m,D as d,J as v,j as b,u as j,r as w,f as y,g as M,aj as x,ak as _,m as T,al as z}from"./@vue.uQKhJ3x71736129093919.js";import{P as C}from"./tweakpane.BCjFYDHx1736129093919.js";import"./@vueuse.CaPKQ7tQ1736129093919.js";import"./@fesjs.C11Gf8kF1736129093919.js";import"./vue-router.Pr1g0CvG1736129093919.js";import"./lodash-es.Dw4PEFNU1736129093919.js";import"./@qlin.BIlp8Yi21736129093919.js";import"./pinia.CtRHBYHM1736129093919.js";import"./vue-demi.Dq6ymT-81736129093919.js";import"./@babel.BBWsvBIa1736129093919.js";import"./@floating-ui.B75jtkXD1736129093919.js";import"./@juggle.BnTvdTVm1736129093919.js";import"./chalk.B3MNILV41736129093919.js";/* empty css                                 */import"./iconify-icon.DK1S_nhj1736129093919.js";import"./@iconify.CkmZGMLx1736129093919.js";import"./dompurify.MwRjsY0L1736129093919.js";import"./oimophysics.B0i2NtyE1736129093919.js";import"./three-stdlib.hbqaGo6K1736129093919.js";import"./@pmndrs.CFxMGwGw1736129093919.js";import"./object-hash.CvGuPWVa1736129093919.js";import"./@amap.DhOO2qTl1736129093919.js";import"./crypto-js.ChIcq6Eo1736129093919.js";import"./three.quarks.Bd0L6lmU1736129093919.js";import"./quarks.core.C7CDonSm1736129093919.js";const I=G;!function(t,n){const e=G,r=H();for(;;)try{if(231792===-parseInt(e(284))/1*(parseInt(e(298))/2)+-parseInt(e(286))/3*(-parseInt(e(324))/4)+parseInt(e(292))/5*(-parseInt(e(278))/6)+-parseInt(e(329))/7*(-parseInt(e(316))/8)+-parseInt(e(300))/9*(parseInt(e(281))/10)+parseInt(e(307))/11+-parseInt(e(305))/12*(parseInt(e(296))/13))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){S(this,(function(){const t=G,n=new RegExp(t(318)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=F("init");n[t(330)](r+t(327))&&e.test(r+t(276))?F():r("0")}))()}();const B=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function G(t,n){const e=H();return(G=function(t,n){return e[t-=276]})(t,n)}function H(){const t=["4347132FQwiwl","string","4041829vsjhlJ","uHeight","waterHighlight","exception","height","__proto__","waterColor","flatShading","warn","2076344CZqXOG","dispose","function *\\( *\\)","trace","action","material","stateObject","MeshPhysicalMaterial","1337236oPoifa","debu","length","chain","counter","7FsBHQb","test","side","DoubleSide","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","fragment","vertex","needsUpdate","table","return (function() ","vertexShader","#b3ffff","info","gger","input","Flatshading","7734TLpvNV","uTime","baseMaterial","517720QjUJaJ","TresBoxGeometry","args","3weLiac","error","3fvSQgr","log",'{}.constructor("return this")( )',"toString","prototype","rotation-x","595hxDrmz","convertLinearToSRGB","constructor","call","13zFZpSD","brightness","4506VxxYAN","Color","36txBsYY","apply","value","bind","#52a7f7"];return(H=function(){return t})()}B(void 0,(function(){const t=G;let n;try{n=Function(t(338)+t(288)+");")()}catch(a){n=window}const e=n.console=n.console||{},r=[t(287),t(315),t(341),t(285),t(310),t(337),t(319)];for(let o=0;o<r[t(326)];o++){const n=B[t(294)][t(290)][t(303)](B),a=r[o],s=e[a]||n;n[t(312)]=B[t(303)](B),n[t(289)]=s[t(289)].bind(s),e[a]=n}}))();const O=[I(291)],k=[I(283)],W=p({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(304)},waterHighlight:{default:I(340)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const o=I,s=t,i=f(null),l={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:o(333)},p={uTime:{value:0},waterColor:{value:new n(s[o(313)])[o(293)]()},waterHighlight:{value:new(e[o(299)])(s[o(309)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s[o(311)]}},{onLoop:w}=r();return w((({elapsed:t})=>{const n=o;p[n(279)][n(302)]=-t/5})),g((()=>{const t=o;s[t(311)]&&(p[t(308)].value=s.height),s[t(313)]&&(p[t(313)][t(302)]=new n(s[t(313)]).convertLinearToSRGB()),s[t(309)]&&(p[t(309)].value=new n(s[t(309)])[t(293)]()),s.brightness&&(p[t(297)][t(302)]=s[t(297)])})),h((()=>s[o(277)]),(t=>{const n=o;i.value[n(321)][n(336)]=!0})),h((()=>s[o(280)]),(t=>{const n=o,r=new c({baseMaterial:e[t],vertexShader:u(l[n(335)]),fragmentShader:l.fragment,uniforms:p,flatShading:s[n(277)],side:e[n(332)],roughness:.2,metalness:.1,silent:!0});i[n(302)][n(321)][n(317)](),i[n(302)][n(321)]=r})),(t,n)=>{const r=o;return m(),d("TresMesh",{ref_key:"tmRef",ref:i,"rotation-x":-Math.PI/2},[v(r(282),{args:[5,5,t[r(311)],64,64,1]},null,8,k),b(j(a),{baseMaterial:e[r(323)],vertexShader:j(u)(l[r(335)]),fragmentShader:l[r(334)],uniforms:p,side:e[r(332)],roughness:.2,metalness:.1,flatShading:t[r(277)],silent:""},null,8,["baseMaterial",r(339),"fragmentShader",r(331),r(314)])],8,O)}}});function F(t){function n(t){const e=G;if(typeof t===e(306))return function(t){}[e(294)]("while (true) {}")[e(301)](e(328));1!==(""+t/t)[e(326)]||t%20==0?function(){return!0}[e(294)](e(325)+"gger")[e(295)](e(320)):function(){return!1}.constructor("debu"+e(342)).apply(e(322)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=N;!function(t,n){const e=N,r=L();for(;;)try{if(586174===-parseInt(e(236))/1*(-parseInt(e(251))/2)+parseInt(e(197))/3+parseInt(e(196))/4*(-parseInt(e(215))/5)+parseInt(e(244))/6*(-parseInt(e(207))/7)+-parseInt(e(230))/8+-parseInt(e(247))/9+parseInt(e(254))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function L(){const t=['{}.constructor("return this")( )',"MeshDepthMaterial","__proto__","TresAmbientLight","403545hjlDXM","addBinding","warn","init","MeshLambertMaterial","pos-x.jpg","#627179","pos-z.jpg","gger","trace","table","while (true) {}","MeshNormalMaterial","length","counter","4631000uSQCKX","test","TresDirectionalLight","MeshBasicMaterial","function *\\( *\\)","console","1iduSIM","input","prototype","#52a7f7","waterColor","bind","info","brightness","1356fcXTzK","stateObject","MeshPhongMaterial","1838484aLwRss","#b3ffff","call","MeshPhysicalMaterial","751438wLXKHf","constructor","list","9701340eqFkTv","neg-y.jpg","toString","label","Flatshading","#3a78a2","error","addBlade","height","neg-z.jpg","action","8jyRcga","1874058oXCsaf","MeshToonMaterial","neg-x.jpg","debu","浪头颜色","MeshStandardMaterial","waterHighlight","change","customWater","chain","13622ObMhpw","exception","ACESFilmicToneMapping","apply"];return(L=function(){return t})()}!function(){D(this,(function(){const t=N,n=new RegExp(t(234)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=q(t(218));n[t(231)](r+t(206))&&e[t(231)](r+t(237))?q():r("0")}))()}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[N(210)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function N(t,n){const e=L();return(N=function(t,n){return e[t-=188]})(t,n)}R(void 0,(function(){const t=N;let n;try{n=Function("return (function() "+t(211)+");")()}catch(a){n=window}const e=n[t(235)]=n[t(235)]||{},r=["log",t(217),t(242),t(191),t(208),t(225),t(224)];for(let o=0;o<r.length;o++){const n=R.constructor[t(238)][t(241)](R),a=r[o],s=e[a]||n;n[t(213)]=R[t(241)](R),n[t(256)]=s[t(256)][t(241)](s),e[a]=n}}))();const A=p({__name:P(205),setup(t){const n=P,r=w({alpha:!0,toneMapping:e[n(209)],windowSize:!0,clearColor:10066329}),a=w({enableDamping:!0,autoRotate:!1}),c=w({cellSize:.6,cellThickness:1.1,cellColor:n(221),sectionColor:n(190),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:n(239),waterHighlight:n(248),brightness:1,baseMaterial:n(250)}),p=new C;return p.addBinding(u,n(193),{label:"高度",min:.1,max:5,step:.1}),p.addBinding(u,n(240),{label:"水体颜色"}),p[n(216)](u,n(203),{label:n(201)}),p.addBinding(u,n(243),{label:"亮度",min:0,max:1,step:.01}),p[n(216)](u,n(189),{label:n(189)}),p[n(192)]({view:n(253),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(250)},{text:n(233),value:n(233)},{text:n(227),value:n(227)},{text:n(202),value:n(202)},{text:n(246),value:"MeshPhongMaterial"},{text:n(198),value:"MeshToonMaterial"},{text:n(219),value:n(219)},{text:n(212),value:n(212)}],value:u.baseMaterial}),p.on(n(204),(t=>{const e=n;"材质"===t.target[e(188)]&&(u.baseMaterial=t.value)})),(t,e)=>{const p=n;return m(),y(j(s),T(r,{"window-size":""}),{default:M((()=>[e[0]||(e[0]=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),b(j(o),x(_(a)),null,16),e[1]||(e[1]=v(p(214),{intensity:.5},null,-1)),e[2]||(e[2]=v(p(232),{position:[15,15,15],intensity:1},null,-1)),b(W,x(_(u)),null,16),b(j(i),T({args:[3,3]},c,{position:[0,-.5,0]}),null,16),(m(),y(z,null,{default:M((()=>[b(j(l),{files:[p(220),p(199),"pos-y.jpg",p(255),p(222),p(194)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function q(t){function n(t){const e=N;if("string"==typeof t)return function(t){}[e(252)](e(226))[e(210)](e(229));1!==(""+t/t)[e(228)]||t%20==0?function(){return!0}[e(252)](e(200)+e(223))[e(249)](e(195)):function(){return!1}[e(252)](e(200)+e(223))[e(210)](e(245)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

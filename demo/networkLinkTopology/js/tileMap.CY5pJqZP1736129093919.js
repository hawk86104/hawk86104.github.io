import{C as t,_ as n,cQ as e}from"./three.ES53pcRR1736129093919.js";import{P as o}from"./tweakpane.BCjFYDHx1736129093919.js";import{m as r,e as a}from"./@tresjs.C4A766dl1736129093919.js";import{P as s,b as i,c,M as u,T as p,a as l,d as f}from"./index.DDln0pNB1736129093919.js";import{d as m,a3 as h,w as g,o as d,D as b,u as w,X as j,r as y,e as x,j as I,g as v,f as M,al as C,m as _,F as z}from"./@vue.uQKhJ3x71736129093919.js";import{_ as B}from"./raycasterEvent.D0cSc_jo1736129093919.js";import{a as S}from"./utils.DnVXwVkk1736129093919.js";import"./@vueuse.CaPKQ7tQ1736129093919.js";import"./@mapbox.BGwdYk6H1736129093919.js";import"./@amap.DhOO2qTl1736129093919.js";import"./three-mesh-bvh.DE7kZA-N1736129093919.js";import"./three-custom-shader-material.LMK2zh-z1736129093919.js";import"./@fesjs.C11Gf8kF1736129093919.js";import"./vue-router.Pr1g0CvG1736129093919.js";import"./lodash-es.Dw4PEFNU1736129093919.js";import"./@qlin.BIlp8Yi21736129093919.js";import"./pinia.CtRHBYHM1736129093919.js";import"./vue-demi.Dq6ymT-81736129093919.js";import"./@babel.BBWsvBIa1736129093919.js";import"./@floating-ui.B75jtkXD1736129093919.js";import"./@juggle.BnTvdTVm1736129093919.js";import"./@tweenjs.Cs6ZPLyv1736129093919.js";import"./utils.BvjrwQBJ1736129093919.js";import"./d3-geo.YS2XtpFX1736129093919.js";import"./d3-array.CKz3hFNy1736129093919.js";const k=R;function R(t,n){const e=Z();return(R=function(t,n){return e[t-=187]})(t,n)}!function(t,n){const e=R,o=Z();for(;;)try{if(508464===-parseInt(e(194))/1*(-parseInt(e(246))/2)+-parseInt(e(196))/3+-parseInt(e(189))/4+-parseInt(e(234))/5+parseInt(e(232))/6*(parseInt(e(206))/7)+-parseInt(e(197))/8*(parseInt(e(207))/9)+parseInt(e(195))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[R(226)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=R,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A(t(225));n[t(217)](o+t(251))&&e.test(o+t(188))?A():o("0")}))()}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[R(226)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();P(void 0,(function(){const t=R,n=function(){const t=R;let n;try{n=Function(t(223)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(201)]||{},o=[t(210),t(253),t(214),t(248),t(198),"table",t(257)];for(let r=0;r<o.length;r++){const n=P[t(193)][t(228)][t(192)](P),a=o[r],s=e[a]||n;n[t(191)]=P[t(192)](P),n.toString=s[t(229)][t(192)](s),e[a]=n}}))();const T=[k(256),"rotation"];function Z(){const t=["dampingFactor","primitive","genBright","1050458tQbJZm","while (true) {}","error","PerspectiveCamera","position","chain","showTileNo","warn","value","tweenInstance","object","trace","genContrast","input","599740ywRBIF","counter","__proto__","bind","constructor","1dJycIz","8110370LyQuZC","1104864TaiYQx","88xAoVGb","exception","coordType","camera","console","filter","isMonochrome","maxZoom","gger","223643nvkEMF","564903wsEuaB","Color","wireframe","log","bbox","set","genSaturation","info","monochrome","innerWidth","test","abs","enableDamping","render","string","useWorker","return (function() ","update","init","apply","source","prototype","toString","Vector3","showBoundingBox","84ljayPG","updateProjectionMatrix","332140HbjdPz","action","far","opposite","debu","domElement","minDistance","mapCenter","#fff"];return(Z=function(){return t})()}const Q=m({__name:"tileMapMesh",props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},opposite:{type:Boolean,default:!1},genBright:{default:1},genContrast:{default:1},genSaturation:{default:1},monochrome:{default:k(242)},isMonochrome:{type:Boolean,default:!1},mapCenter:{},tweenInstance:{default:null}},setup(o,{expose:f}){const m=k,j=o,{renderer:y,scene:x}=r();(new s)[m(199)]=i;const I=new c;I[m(227)]="https://api.maptiler.com/tiles/terrain-rgb-v2/[z]/[x]/[y].webp?key=L55MtSxL94Yb4hQeWewp",I.coordType=i;const v=new u;v[m(227)]="https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}",v[m(252)]=!1,v[m(222)]=!0;const M=new p(I,v);if(M[m(231)]=!1,M[m(209)]=!1,M.flatShading=!1,M.useStandardMaterial=!1,M[m(202)]={opposite:j[m(237)],monochrome:j.isMonochrome?{r:.299,g:.587,b:.114}:null,genBright:j[m(245)],genContrast:j[m(187)],genSaturation:j[m(213)]},j[m(215)]){let n=new t(j[m(215)]);M[m(202)]&&(M.filter[m(215)]={r:n.r,g:n.g,b:n.b})}const C=new l;C.provider=M,C[m(211)]=j[m(211)],C.maxZoom=j[m(204)];const _=new(n[m(249)])(60,window[m(216)]/window.innerHeight,1,1e8);_.up=new(n[m(230)])(0,1,0),_[m(250)].set(j[m(241)][0],j[m(241)][2],-j.mapCenter[1]),_.lookAt(new(n[m(230)])(_[m(250)].x,0,_[m(250)].z-2e3)),C[m(200)]=_;let z=null;h((()=>{const t=m;y[t(254)]&&!z&&(z=new e(_,y.value[t(239)]),z[t(219)]=!0,z[t(243)]=.05,z[t(240)]=600,z.position0[t(212)](_[t(250)].x,_[t(250)].y,_[t(250)].z),z.target[t(212)](_[t(250)].x,0,_[t(250)].z-2e3))})),g((()=>[j[m(237)],j[m(203)],j[m(215)]]),(([t,e,o])=>{const r=m;if(M[r(202)]){let a=new(n[r(208)])(o);M[r(202)].opposite=t,M[r(202)][r(215)]=e?{r:a.r,g:a.g,b:a.b}:null}})),g((()=>[j[m(245)],j[m(187)],j[m(213)]]),(([t,n,e])=>{const o=m;M[o(202)]&&(M[o(202)][o(245)]=t,M[o(202)][o(187)]=n,M[o(202)][o(213)]=e)}));const{onLoop:B}=a();return B((()=>{var t;const n=m;if(y[n(254)]){null==(t=j[n(255)])||t.update(),z&&z[n(224)](),C[n(224)]();const e=50*Math[n(218)](_.position.y);_[n(236)]=e+5e3,_[n(233)](),y[n(254)][n(220)](x[n(254)],_)}})),f({camera:_,map:C,orbitControl:z}),(t,n)=>{const e=m;return d(),b(e(244),{object:w(C),rotation:[-Math.PI/2,0,0]},null,8,T)}}});function A(t){function n(t){const e=R;if(typeof t===e(221))return function(t){}[e(193)](e(247))[e(226)](e(190));1!==(""+t/t).length||t%20==0?function(){return!0}[e(193)](e(238)+e(205)).call(e(235)):function(){return!1}[e(193)]("debu"+e(205))[e(226)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=D,o=L();for(;;)try{if(396141===parseInt(e(142))/1+parseInt(e(137))/2*(-parseInt(e(178))/3)+parseInt(e(120))/4*(-parseInt(e(135))/5)+parseInt(e(168))/6+parseInt(e(129))/7*(-parseInt(e(136))/8)+parseInt(e(177))/9*(-parseInt(e(157))/10)+-parseInt(e(171))/11*(-parseInt(e(147))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){F(this,(function(){const t=D,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(164),"i"),o=G(t(122));n[t(176)](o+t(139))&&e.test(o+t(159))?G():o("0")}))()}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[D(119)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function D(t,n){const e=L();return(D=function(t,n){return e[t-=118]})(t,n)}function L(){const t=["tileMapRef","tweenInstance","10QgpCSq","20304MlqCKu","26nhceqB",'{}.constructor("return this")( )',"chain","#201919","prototype","231545yvjWhq","action","return (function() ","SRGBColorSpace","stateObject","12kzQpNV","奥体中心","genBright","trace","log","__proto__","monochrome","牛首山","#4688b5","Vector3","270KnyvTK","TresCanvas","input","orbitControl","饱和度","string","addBlade","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isMonochrome","addBinding","manual","4597188FjBMYu","counter","list","4803832VCyPwg","error","constructor","length","exception","test","124524QDEOqR","41736fGNXvz","debu","gger","value","apply","231752eXtyiK","genContrast","init","opposite","console","info","genSaturation","toString","NoToneMapping","1015trgLnP","call","tileMapMeshRef","camera"];return(L=function(){return t})()}q(void 0,(function(){const t=D,n=function(){const t=D;let n;try{n=Function(t(144)+t(138)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(124)]||{},o=[t(151),"warn",t(125),t(172),t(175),"table",t(150)];for(let r=0;r<o[t(174)];r++){const n=q[t(173)][t(141)].bind(q),a=o[r],s=e[a]||n;n[t(152)]=q.bind(q),n[t(127)]=s[t(127)].bind(s),e[a]=n}}))();const V=m({__name:"tileMap",setup(t){const e=D,r=f(118.779958,32.017136),a=[r[0],r[1],5e3],s=j(),i=y({opposite:!0,genBright:1.3,genContrast:1,genSaturation:1,isMonochrome:!0,monochrome:e(155),mapCenter:a,tweenInstance:null}),c=new o({title:"参数"});c[e(166)](i,e(123),{label:"反色"}),c[e(166)](i,e(149),{label:"高亮",min:.1,max:3,step:.1}),c[e(166)](i,e(121),{label:"对比度",min:.1,max:3,step:.1}),c[e(166)](i,e(126),{label:e(161),min:.1,max:3,step:.1}),c[e(166)](i,e(165),{label:"单色滤镜"}),c[e(166)](i,e(153),{label:"滤镜颜色"});const u={at:f(118.7425,31.9998),xjk:f(118.7842,32.0418),nss:f(118.7503,31.9082)};c[e(163)]({view:e(170),label:"飞去",options:[{text:e(148),value:"at"},{text:"新街口",value:"xjk"},{text:e(154),value:"nss"}],value:"at"}).on("change",(t=>{const o=e,r=new(n[o(156)])(u[t[o(118)]][0],2e3,-u[t[o(118)]][1]);i[o(134)]=S(s.value.camera,r,s[o(118)].orbitControl,[0,-300],4e3)}));const p=y({clearColor:e(140),antialias:!0,logarithmicDepthBuffer:!0,renderMode:e(167),outputColorSpace:n[e(145)],toneMapping:n[e(128)]});return setTimeout((()=>{const t=e,o=u.at,r=new(n[t(156)])(o[0],1600,-o[1]);i.tweenInstance=S(s[t(118)][t(132)],r,s[t(118)][t(160)],[-2e3,-2e3],2e3)}),1e3),(t,n)=>{const o=e,r=x(o(158));return d(),b(z,null,[I(r,_(p,{"window-size":""}),{default:v((()=>[(d(),M(C,null,{default:v((()=>[I(Q,_(i,{ref_key:o(131),ref:s,bbox:[80,16,128,50]}),null,16)])),_:1}))])),_:1},16),I(B,{tileMapRef:s[o(118)]},null,8,[o(133)])],64)}}});function G(t){function n(t){const e=D;if(typeof t===e(162))return function(t){}[e(173)]("while (true) {}").apply(e(169));1!==(""+t/t)[e(174)]||t%20==0?function(){return!0}[e(173)](e(179)+e(180))[e(130)](e(143)):function(){return!1}[e(173)](e(179)+e(180))[e(119)](e(146)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as default};

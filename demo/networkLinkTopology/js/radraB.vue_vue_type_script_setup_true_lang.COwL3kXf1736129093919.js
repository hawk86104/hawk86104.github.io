import{a as n,e as t}from"./@tresjs.C4A766dl1736129093919.js";import{d as o,a6 as e,r,X as i,a3 as a,o as s,D as c,J as u,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.uQKhJ3x71736129093919.js";import{aB as m,a0 as v,C as y,M as x,cu as w,V as _}from"./three.ES53pcRR1736129093919.js";const M=R;!function(n,t){const o=R,e=S();for(;;)try{if(365022===-parseInt(o(129))/1*(parseInt(o(122))/2)+-parseInt(o(160))/3+-parseInt(o(162))/4+-parseInt(o(127))/5+parseInt(o(130))/6+-parseInt(o(157))/7+parseInt(o(138))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){I(this,(function(){const n=R,t=new RegExp(n(131)),o=new RegExp(n(146),"i"),e=P(n(155));t[n(151)](e+"chain")&&o[n(151)](e+"input")?P():e("0")}))()}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();b(void 0,(function(){const n=R,t=function(){const n=R;let t;try{t=Function(n(124)+n(149)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(116)]||{},e=["log",n(145),n(153),n(147),n(156),n(119),n(117)];for(let r=0;r<e[n(142)];r++){const t=b[n(136)][n(126)][n(137)](b),i=e[r],a=o[i]||t;t[n(161)]=b[n(137)](b),t[n(115)]=a.toString.bind(a),o[i]=t}}))();const A=["position",M(154)],T=["map"];function R(n,t){const o=S();return(R=function(n,t){return o[n-=113]})(n,t)}const j=o({__name:M(114),props:{color:{default:"#fff"},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(159)]}))),p=await p,d(),p),m=r({color:g[o(134)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(152)],toneMapped:!1,depthTest:!g[o(135)]}),v=i(null);return a((()=>{const n=o;v.value&&(v[n(143)].geometry=v[n(143)][n(140)][n(128)](),v.value.geometry[n(123)](g[n(133)][0],g[n(133)][1],0))})),(n,t)=>{const e=o;return s(),c(e(113),{ref_key:e(150),ref:v,position:g[e(144)],scale:g[e(154)],renderOrder:e(125)},[u(e(121),l(m,{map:f(h)}),null,16,T)],8,A)}}});function P(n){function t(n){const o=R;if(typeof n===o(158))return function(n){}.constructor("while (true) {}").apply(o(132));1!==(""+n/n)[o(142)]||n%20==0?function(){return!0}[o(136)]("debu"+o(141))[o(118)]("action"):function(){return!1}[o(136)](o(148)+o(141))[o(139)](o(120)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function S(){const n=["99999","prototype","2476075UExkUr","clone","113217KSbEeZ","1363494sbqBjH","function *\\( *\\)","counter","offset","color","foremost","constructor","bind","21674344hgfkoC","apply","geometry","gger","length","value","position","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","debu",'{}.constructor("return this")( )',"tsRef","test","sizeAttenuation","info","scale","init","exception","4901883soaPSO","string","img","1874652qcGTOX","__proto__","2098872fOMNej","TresSprite","buildingsMarkA","toString","console","trace","call","table","stateObject","TresSpriteMaterial","4ypDwAI","translate","return (function() "];return(S=function(){return n})()}const F=W;function z(){const n=["return (function() ","ncolor","apply","length","value","followWidth","gger","color","toString","1995078mHzDTw","test","makeRotationX","22syxgLj","applyMatrix4","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","position","stateObject","error","info","30UaHrHw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","54alvusz","radius","TresCircleGeometry","init","1148342LWClAz","uniforms","input","MeshRef","constructor","log","call","1906534MKzRAr","1264968XjCITr","9997290vMGIpn","206124MTCZxW","console","exception","TresCircleGeometryRef","prototype","debu","1876091UbZHJB","chain","while (true) {}","20hgLKyr","__proto__","bind"];return(z=function(){return n})()}!function(n,t){const o=W,e=z();for(;;)try{if(748090===-parseInt(o(267))/1+-parseInt(o(274))/2+parseInt(o(298))/3+-parseInt(o(277))/4*(parseInt(o(286))/5)+parseInt(o(308))/6*(parseInt(o(283))/7)+-parseInt(o(275))/8*(parseInt(o(263))/9)+-parseInt(o(276))/10*(-parseInt(o(301))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[W(291)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){C(this,(function(){const n=W,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(309),"i"),e=G(n(266));t[n(299)](e+n(284))&&o[n(299)](e+n(269))?G():e("0")}))()}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[W(291)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function W(n,t){const o=z();return(W=function(n,t){return o[n-=263]})(n,t)}k(void 0,(function(){const n=W;let t;try{t=Function(n(289)+'{}.constructor("return this")( ));')()}catch(r){t=window}const o=t[n(278)]=t[n(278)]||{},e=[n(272),"warn",n(307),n(306),n(279),"table","trace"];for(let i=0;i<e.length;i++){const t=k[n(271)][n(281)].bind(k),r=e[i],a=o[r]||t;t[n(287)]=k[n(288)](k),t[n(297)]=a.toString[n(288)](a),o[r]=t}}))();const E=[F(304)],Z=["args"],B=o({__name:"radraA",props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:"#ffff00"},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=F,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[W(293)]+=n}));const w={transparent:!0,blending:m,depthWrite:!1,side:v,depthTest:!0,vertexShader:e(303),fragmentShader:"\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ",uniforms:{uSpeed:{value:r.speed},uRadius:{value:r[e(264)]},uTime:l,uFollowWidth:{value:r[e(294)]},ncolor:{value:new y(r[e(296)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(300)](-Math.PI/180*90);f[o(293)][o(302)](n)}}));const _=p();return a((()=>{const n=e;r[n(296)]&&(w[n(268)][n(290)][n(293)]=new y(r[n(296)])),r[n(264)]&&(w.uniforms.uRadius[n(293)]=r.radius)})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),c("TresMesh",{ref_key:o(270),ref:_,position:r.position},[u(o(265),{ref_key:o(280),ref:f,args:[r.size,1e3]},null,8,Z),u("TresShaderMaterial",g(h(w)),null,16)],8,E)}}});function G(n){function t(n){const o=W;if("string"==typeof n)return function(n){}.constructor(o(285))[o(291)]("counter");1!==(""+n/n)[o(292)]||n%20==0?function(){return!0}[o(271)](o(282)+o(295))[o(273)]("action"):function(){return!1}.constructor(o(282)+o(295))[o(291)](o(305)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const O=H;!function(n,t){const o=H,e=K();for(;;)try{if(503016===-parseInt(o(307))/1+-parseInt(o(333))/2+-parseInt(o(329))/3*(-parseInt(o(340))/4)+-parseInt(o(352))/5*(-parseInt(o(293))/6)+-parseInt(o(296))/7*(-parseInt(o(331))/8)+parseInt(o(338))/9+parseInt(o(339))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const L=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[H(323)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function H(n,t){const o=K();return(H=function(n,t){return o[n-=292]})(n,t)}!function(){L(this,(function(){const n=H,t=new RegExp(n(330)),o=new RegExp(n(332),"i"),e=D(n(347));t[n(326)](e+n(313))&&o.test(e+n(336))?D():e("0")}))()}();const $=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[H(323)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();$(void 0,(function(){const n=H,t=function(){const n=H;let t;try{t=Function(n(315)+n(299)+");")()}catch(o){t=window}return t}(),o=t[n(337)]=t[n(337)]||{},e=[n(310),n(294),"info",n(321),n(308),"table",n(348)];for(let r=0;r<e.length;r++){const t=$[n(357)][n(334)][n(303)]($),i=e[r],a=o[i]||t;t[n(314)]=$[n(303)]($),t[n(356)]=a[n(356)][n(303)](a),o[i]=t}}))();const U=["position"],X=[O(300)];function K(){const n=["TresShaderMaterial",'{}.constructor("return this")( )',"args","color","counter","bind","applyMatrix4","scale","updateMatrix","943605FwnQmR","exception","radius","log","uColor","gger","chain","__proto__","return (function() ","radraB","stateObject","max","makeScale","period","error","debu","apply","boundingBox","call","test","copy","TresTubeGeometry","202479iXpLjT","function *\\( *\\)","12216IELElT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1446996dVAEQs","prototype","MeshRef","input","console","8235666KvGeMR","725630GyHOse","36aarjbY","position","computeBoundingBox","uniforms","maxRadius","while (true) {}","value","init","trace","length","opacity","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","10VZGSTs","clone","TresTubeGeometryRef","min","toString","constructor","TresMesh","1051728fmWehm","warn","#ffff00","1029CZiisU","height"];return(K=function(){return n})()}const V=o({__name:O(316),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:O(295)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=O,r=n,i=p(),l=p(1),f=p(.1),m={color:r[e(301)],opacity:r[e(350)],transparent:!0,depthWrite:!1,depthTest:!0,side:v,vertexShader:e(351),fragmentShader:"\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ",uniforms:{uMax:l,uMin:f,uColor:{value:new y(r.color)}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(346)][o(342)](),l[o(346)]=M[o(346)][o(324)][o(318)],f[o(346)]=M[o(346)][o(324)][o(355)],I=i[o(346)][o(305)].clone())}));const b=p(new w(new _(0,0,0),new _(0,r[e(297)],0)));a((()=>{const n=e;r[n(301)]&&(m[n(343)][n(311)][n(346)]=new y(r.color))}));const{onLoop:A}=t(),T={value:0};return A((({delta:n})=>{const t=e;T[t(346)]+=n;const o=(T[t(346)]%r[t(320)]/r.period*(r[t(344)]-r[t(309)])+r[t(309)])/r[t(309)],a=(new x)[t(319)](o,1,o);I&&(i[t(346)][t(305)][t(327)](I[t(353)]()[t(304)](a)),i[t(346)][t(306)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),c(o(292),{ref_key:o(335),ref:i,position:r[o(341)],renderOrder:2e3},[u(o(328),{ref_key:o(354),ref:M,args:[b[o(346)],20,r[o(309)],100,!1]},null,8,X),u(o(298),g(h(m)),null,16)],8,U)}}});function D(n){function t(n){const o=H;if("string"==typeof n)return function(n){}[o(357)](o(345)).apply(o(302));1!==(""+n/n)[o(349)]||n%20==0?function(){return!0}[o(357)](o(322)+"gger")[o(325)]("action"):function(){return!1}[o(357)](o(322)+o(312))[o(323)](o(317)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{j as _,B as a,V as b};

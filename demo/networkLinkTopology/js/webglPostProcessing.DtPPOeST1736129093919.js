import{i as n}from"./ice-utils.CIYFm2Br1736129093919.js";import{_ as t,m as e}from"./gl-matrix.i00UOAwP1736129093919.js";import{P as o}from"./tweakpane.BCjFYDHx1736129093919.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.uQKhJ3x71736129093919.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=E;function E(n,t){const e=T();return(E=function(n,t){return e[n-=264]})(n,t)}!function(n,t){const e=E,o=T();for(;;)try{if(650052===-parseInt(e(330))/1*(parseInt(e(347))/2)+parseInt(e(344))/3+-parseInt(e(364))/4*(parseInt(e(270))/5)+parseInt(e(317))/6+-parseInt(e(332))/7*(-parseInt(e(296))/8)+parseInt(e(361))/9+-parseInt(e(352))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=E,t=new RegExp(n(302)),e=new RegExp(n(297),"i"),o=R(n(292));t[n(346)](o+n(326))&&e[n(346)](o+n(288))?R():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[E(282)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=E,t=function(){const n=E;let t;try{t=Function(n(340)+n(328)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(301)]||{},o=[n(312),n(287),"info",n(331),"exception","table",n(281)];for(let r=0;r<o.length;r++){const t=x[n(327)][n(321)][n(316)](x),i=o[r],a=e[i]||t;t[n(269)]=x[n(316)](x),t[n(285)]=a.toString[n(316)](a),e[i]=t}}))();const g={id:"canvaswebgl"},p=["src"];function T(){const n=["toString","getContext","warn","input","change","TEXTURE_MAG_FILTER","BYTES_PER_ELEMENT","init","uProjection","bindTexture","COLOR_BUFFER_BIT","8RyVZrD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","create","while (true) {}","uniformMatrix4fv","console","function *\\( *\\)","innerWidth","ELEMENT_ARRAY_BUFFER","createBuffer","uniform1f","addBinding","uView","bufferData","TEXTURE_MIN_FILTER","none","log","querySelector","gger","TEXTURE_WRAP_S","bind","1986384PYxBdN","vertexAttribPointer","bindBuffer","RGBA","prototype","webgl","string","STATIC_DRAW","offset_left_bottom","chain","constructor",'{}.constructor("return this")( )',"clear","342977dQoppU","error","9082073xiqimN","ONE_MINUS_SRC_ALPHA","FRAMEBUFFER","lookAt","length","stateObject","height","debu","return (function() ","createFramebuffer","addBlade","createTexture","3264948JKCIkB","getUniformLocation","test","4cTjTyJ","TRIANGLES","uModel","bindFramebuffer","inline","16061110nFYZpa","SRC_ALPHA","offset_right_bottom","clearColor","logo-texture","drawElements","scale","color","ARRAY_BUFFER","6330303RnQoEZ","useProgram","TEXTURE_2D","4HWfgGe","offset_left_top","ortho","innerHeight","blendFunc","hidden","__proto__","2390345AzJcqC","call","width","CLAMP_TO_EDGE","mat4","NEAREST","offset_right_top","enableVertexAttribArray","TEXTURE_WRAP_T","webglPostProcessing","texImage2D","trace","apply","BLEND","texParameteri"];return(T=function(){return n})()}const A=r({__name:d(279),setup(r){const E=d;let _,x,T,A,R,b,y,F,h,v,w,B,P;const C=1,U=.71,I=.76,N=new o({title:"参数"}),D=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});N[E(342)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(E(289),(n=>{const t=E;j(),x[t(306)](B,n.value)}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);N.addBinding(D,"hidden",{label:"是否后处理"}),N.addBinding(D,E(276),{picker:E(351),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=E;S[0]=D[t(276)].x,S[1]=D[t(276)].y,j()})),N[E(307)](D,E(354),{picker:E(351),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=E;S[5]=D[t(354)].x,S[6]=D.offset_right_bottom.y,j()})),N.addBinding(D,E(325),{picker:E(351),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(289),(n=>{const t=E;S[10]=D[t(325)].x,S[11]=D[t(325)].y,j()})),N.addBinding(D,"offset_left_top",{picker:E(351),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(289),(n=>{const t=E;S[15]=D[t(264)].x,S[16]=D[t(264)].y,j()})),a((()=>{L()}));const L=function(){const t=E;_=document[t(313)]("#canvaswebgl"),_.width=window[t(303)],_.height=window[t(266)],x=_[t(286)](t(322)),x&&(function(){const t=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=O(e,o),T=n(x,l,m),h=x[t(345)](T,t(293)),v=x[t(345)](T,t(308)),w=x[t(345)](T,t(349)),P=G(document.getElementById(t(356)))}(),j(),x.enable(x[t(283)]),x[t(267)](x[t(353)],x[t(333)]),M())};function M(){const n=E;x.bindFramebuffer(x.FRAMEBUFFER,y),x.clearColor(C,U,I,1),x[n(329)](x[n(295)]),function(){const n=E;x[n(362)](T),x[n(319)](x.ARRAY_BUFFER,A);const o=t[n(274)][n(298)]();t[n(274)][n(265)](o,0,_.width,_[n(338)],0,.1,100),x[n(300)](h,!1,o);const r=t[n(274)][n(298)]();e[n(335)](r,[0,0,1],[0,0,0],[0,1,0]),x[n(300)](v,!1,r),Y(P,600,600),Y(P,400,400)}(),x[n(350)](x[n(334)],null),D[n(268)]&&(x[n(329)](x[n(295)]),x[n(355)](0,0,1,1),x[n(319)](x[n(360)],R),x.useProgram(b),x[n(294)](x[n(363)],F)),x.drawElements(x[n(348)],6,x.UNSIGNED_BYTE,0),requestAnimationFrame(M)}function Y(n,e,o){const r=E;let i=t[r(274)][r(298)]();t[r(274)].translate(i,i,[e,o,0]),t[r(274)][r(358)](i,i,[250,250,0]),x.uniformMatrix4fv(w,!1,i),x[r(294)](x.TEXTURE_2D,n),x[r(357)](x[r(348)],6,x.UNSIGNED_BYTE,0)}function j(){const t=E,e=new Uint8Array([0,1,2,0,2,3]);R=O(S,e),b=n(x,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),B=x[t(345)](b,"mixParam"),x.getUniformLocation(b,t(359)),function(){const n=E;F=G(_),y=x[n(341)](),x[n(350)](x[n(334)],y),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x[n(363)],F,0),x[n(350)](x[n(334)],null)}()}function G(n){const t=E,e=x[t(343)]();return x[t(294)](x[t(363)],e),n instanceof HTMLImageElement?x[t(280)](x.TEXTURE_2D,0,x[t(320)],x[t(320)],x.UNSIGNED_BYTE,n):x[t(280)](x[t(363)],0,x[t(320)],n[t(272)],n[t(338)],0,x[t(320)],x.UNSIGNED_BYTE,null),x[t(284)](x.TEXTURE_2D,x[t(310)],x[t(275)]),x[t(284)](x.TEXTURE_2D,x[t(290)],x.NEAREST),x[t(284)](x[t(363)],x[t(315)],x[t(273)]),x[t(284)](x[t(363)],x[t(278)],x[t(273)]),e}function O(n,t){const e=E,o=x.createBuffer();x[e(319)](x[e(360)],o),x[e(309)](x[e(360)],n,x[e(324)]);const r=3*Float32Array[e(291)]+2*Float32Array[e(291)];x.vertexAttribPointer(0,3,x.FLOAT,!1,r,0),x.enableVertexAttribArray(0),x[e(318)](1,2,x.FLOAT,!1,r,3*Float32Array.BYTES_PER_ELEMENT),x[e(277)](1);const i=x[e(305)]();return x[e(319)](x[e(304)],i),x[e(309)](x.ELEMENT_ARRAY_BUFFER,t,x[e(324)]),x[e(319)](x[e(360)],null),o}return(n,t)=>{const e=E;return c(),s("canvas",g,[u("img",{id:e(356),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(311)}},null,8,p)])}}});function R(n){function t(n){const e=E;if(typeof n===e(323))return function(n){}.constructor(e(299))[e(282)]("counter");1!==(""+n/n)[e(336)]||n%20==0?function(){return!0}[e(327)](e(339)+e(314))[e(271)]("action"):function(){return!1}[e(327)](e(339)+"gger")[e(282)](e(337)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{A as default};

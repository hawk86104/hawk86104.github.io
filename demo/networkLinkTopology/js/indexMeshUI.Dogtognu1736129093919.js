import{e,l as t}from"./@tresjs.C4A766dl1736129093919.js";import{_ as n,a0 as o,cx as r}from"./three.ES53pcRR1736129093919.js";import{Resource as s}from"./index.Ch9Ol1mh1736129093919.js";import{g as a}from"./gsap.BMhr3K_w1736129093919.js";import{i,m as l,a as p,b as c,c as u,u as f,d,f as m}from"./mapShow.Pkk7Bq6b1736129093919.js";import"./index.DGr6k2KB1736129093919.js";import{d as h,w as y,b as g,q as x,o as v,D as S,J as b,F as z,V as I,u as C,I as T,f as w}from"./@vue.uQKhJ3x71736129093919.js";import{c as j,a as A}from"./three-mesh-ui.module.C5LsgWvs1736129093919.js";import{m as N}from"./d3-geo.YS2XtpFX1736129093919.js";function _(e,t){const n=G();return(_=function(e,t){return n[e-=209]})(e,t)}const k=_;!function(e,t){const n=_,o=G();for(;;)try{if(485358===parseInt(n(252))/1*(-parseInt(n(211))/2)+-parseInt(n(216))/3*(-parseInt(n(239))/4)+-parseInt(n(253))/5+-parseInt(n(222))/6*(parseInt(n(228))/7)+parseInt(n(248))/8*(-parseInt(n(212))/9)+-parseInt(n(249))/10+parseInt(n(215))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const M=function(){let e=!0;return function(t,n){const o=e?function(){if(n){const e=n[_(217)](t,arguments);return n=null,e}}:function(){};return e=!1,o}}();!function(){M(this,(function(){const e=_,t=new RegExp(e(219)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=P(e(242));t[e(227)](o+e(210))&&n.test(o+e(218))?P():o("0")}))()}();const B=function(){let e=!0;return function(t,n){const o=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,o}}();function G(){const e=["3954900IbgTcI","call","info","2AAYyqd","1499725fDVglx","provinceName","return (function() ","chain","870262oWacnA","8624367McEnps","prototype","string","30036380wGXaHy","3MBbypH","apply","input","function *\\( *\\)","#fff","error","1470BSiefS","fontSize","bind","fontColor","log","test","1687BJHPwe","Color","toString","while (true) {}","console","debu","invertAlpha","add","length","__proto__","textContent","1351132VovJxF","stateObject","counter","init","trace","action","gger","parent","constructor","8zztPQo"];return(G=function(){return e})()}B(void 0,(function(){const e=_,t=function(){const e=_;let t;try{t=Function(e(209)+'{}.constructor("return this")( ));')()}catch(n){t=window}return t}(),n=t[e(232)]=t[e(232)]||{},o=[e(226),"warn",e(251),e(221),"exception","table",e(243)];for(let r=0;r<o[e(236)];r++){const t=B.constructor[e(213)][e(224)](B),s=o[r],a=n[s]||t;t[e(237)]=B[e(224)](B),t[e(230)]=a[e(230)][e(224)](a),n[s]=t}}))();const O=h({__name:k(254),props:{parent:{},textContent:{},fontColor:{default:k(220)},fontSize:{default:6},invertAlpha:{type:Boolean,default:!1},zIndex:{default:0},threeMeshUIUpdate:{type:Boolean,default:!1}},setup(t){const r=k,s=t,a=new j({width:s[r(223)]/10,textContent:s[r(238)],color:new(n[r(229)])(s[r(225)]),fontSide:o,fontSize:s.fontSize/50,fontFamily:"./plugins/digitalMapBlock/font/province-msdf.json",fontTexture:"./plugins/digitalMapBlock/font/province.png",textAlign:"center",invertAlpha:s[r(234)]});a.position.set(0,0,.001*s.zIndex),s[r(246)][r(235)](a);const{onLoop:i}=e();return i((()=>{s.threeMeshUIUpdate&&A()})),y((()=>[s[r(225)],s[r(234)],s.fontSize]),(([e,t,o])=>{const s=r;a.set({fontSize:o/50,color:new(n[s(229)])(e),width:o/10,invertAlpha:t})}),{immediate:!0}),(e,t)=>null}});function P(e){function t(e){const n=_;if(typeof e===n(214))return function(e){}[n(247)](n(231))[n(217)](n(241));1!==(""+e/e).length||e%20==0?function(){return!0}[n(247)]("debu"+n(245))[n(250)](n(244)):function(){return!1}[n(247)](n(233)+n(245))[n(217)](n(240)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const E=["properties","pName"],L=["args"],U=["pName","position"],J=["position-z","scale","renderOrder"],R=["color","blending","map"],F={__name:"indexMeshUI",props:{lineColor:"#2bc4dc",topColor:"#f5f5f5",sideColor:"#00407c",iconColor:"#2bc4dc",fontColor:"#fff",fontSize:8,iconSize:.3,invertAlpha:!1,moveRoom:1.5,roughness:.8,metalness:.5,normalScale:6,geoJsonUrl:"",areaScale:{type:Number,default:10},centerCoordinates:{type:Array,default:[104,37.5]},showTextIcons:{type:Boolean,default:!0},lineWidth:{type:Number,default:1}},setup(n){const o=n,h=g(null);i();const j=N().center(o.centerCoordinates).scale(o.areaScale).translate([0,0]),A=g({depth:.66,bevelEnabled:!0,bevelSegments:1,bevelThickness:.1}),_=A.value.depth+.11,k=JSON.parse(s.getItem("map.json")).features,{areaList:M,linesList:B,textList:G}=l(k,j),P=[p(o.roughness,o.metalness,o.normalScale),c(o.sideColor)],{onLoop:F}=e();F((()=>{P[1].map.offset.y+=.002}));const W=g(null);x((()=>{const{boxSize:e,box3:t}=u(W.value.children[0]);W.value.children[0].children.map(((n,o)=>{"Mesh"===n.type&&(n.geometry.computeBoundsTree(),f(n.geometry,e.x,e.y,t.min.x,t.min.y))})),W.value.rotation.x=-Math.PI/2}));const H=(e,t)=>{let n=o.moveRoom,r=e.object;t||(r=e.eventObject,n=1);m(W.value,r.pName).map((e=>{"block"===e.pType&&a.to(e.scale,{duration:.3,z:n}),"line"===e.pType&&a.to(e.position,{duration:.3,z:_*n}),"text"===e.pType&&a.to(e.position,{duration:.3,z:_*n})}))},V=e=>{H(e,!0),document.body.style.cursor="pointer",e.stopPropagation()},q=e=>{H(e,!1),document.body.style.cursor="default"};y((()=>[o.topColor,o.sideColor,o.roughness,o.metalness,o.normalScale]),(([e,t,n,o,r])=>{P[0].color.set(e),P[1].color.set(t),P[0].roughness=n,P[0].metalness=o,P[0].normalScale.set(r,r)}),{immediate:!0});const D=s.getItem("icon.png");return(e,s)=>(v(),S("TresGroup",{ref_key:"groupRef",ref:W},[b("TresGroup",null,[(v(!0),S(z,null,I(C(M),((e,t)=>(v(),S("TresMesh",{key:"".concat(t),properties:e.properties,renderOrder:1,material:P,pName:e.pName,pType:"block",onPointerEnter:V,onPointerLeave:q},[b("TresExtrudeGeometry",{args:[e.shape,A.value]},null,8,L)],40,E)))),128))]),b("TresGroup",null,[(v(!0),S(z,null,I(C(B),((e,o)=>(v(),w(C(t),{key:"".concat(o),renderOrder:o+1e4,pName:e.pName,"position-z":_,pType:"line",points:C(d)(e.points),"line-width":n.lineWidth,color:n.lineColor},null,8,["renderOrder","pName","points","line-width","color"])))),128))]),n.showTextIcons?(v(),S("TresGroup",{key:0,ref_key:"tGroupText",ref:h},[(v(!0),S(z,null,I(C(G),((e,t)=>(v(),S("TresGroup",{key:"".concat(t),pName:e.pName,pType:"text",position:[e.position[0],e.position[1],_]},[h.value&&0!==h.value.children.length?(v(),w(O,{key:0,parent:h.value.children[t],textContent:e.pName,fontColor:o.fontColor,invertAlpha:o.invertAlpha,fontSize:o.fontSize,zIndex:t},null,8,["parent","textContent","fontColor","invertAlpha","fontSize","zIndex"])):T("",!0),b("TresSprite",{"position-z":n.iconSize,scale:n.iconSize,renderOrder:t+11e3},[b("TresSpriteMaterial",{color:n.iconColor,blending:r,map:C(D),transparent:"",depthWrite:!1,depthTest:""},null,8,R)],8,J)],8,U)))),128))],512)):T("",!0)],512))}};export{F as _};

import{_ as n,a as t,cI as o}from"./three.ES53pcRR1736129093919.js";import{c as r,a as e,e as a,U as s}from"./@tresjs.C4A766dl1736129093919.js";import{P as i}from"./tweakpane.BCjFYDHx1736129093919.js";import{d as c,a6 as u,r as l,b as f,w as p,o as m,D as v,J as g,aj as x,ak as d,u as y,e as b,f as w,g as h,j as C,al as _}from"./@vue.uQKhJ3x71736129093919.js";import"./@vueuse.CaPKQ7tQ1736129093919.js";const P=A;!function(n,t){const o=A,r=D();for(;;)try{if(214580===-parseInt(o(447))/1+-parseInt(o(400))/2+-parseInt(o(436))/3*(-parseInt(o(382))/4)+-parseInt(o(446))/5*(parseInt(o(396))/6)+parseInt(o(380))/7+parseInt(o(393))/8+parseInt(o(388))/9*(parseInt(o(404))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[A(416)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=A,t=new RegExp(n(411)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=R(n(407));t[n(426)](r+n(383))&&o[n(426)](r+n(428))?R():r("0")}))()}();const I=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[A(416)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();I(void 0,(function(){const n=A,t=function(){const n=A;let t;try{t=Function(n(384)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(378)]=t[n(378)]||{},r=["log",n(397),n(435),n(454),n(395),n(387),"trace"];for(let e=0;e<r[n(440)];e++){const t=I[n(421)][n(451)][n(452)](I),a=r[e],s=o[a]||t;t[n(448)]=I.bind(I),t[n(443)]=s[n(443)][n(452)](s),o[a]=t}}))();const M=[P(390)];function A(n,t){const o=D();return(A=function(n,t){return o[n-=377]})(n,t)}function D(){const n=["#ffc0fa","deleteAttribute","translate","test","debu","input","clone","while (true) {}","颜色2rd","fragmentModelCom","aRandom","u_progress","info","3PmKDlv","TresShaderMaterial","log","TresMesh","length","Vector3","push","toString","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","toPosition","50UUNkHM","383074HLKKYC","__proto__","scene","m2Color","prototype","bind","BufferAttribute","error","Color","toNormal","console","counter","309904gExUeJ","attributes","21220ebCazo","chain","return (function() ","tangent","Mesh","table","8128908RxOVBW","#bcd4ff","geometry","sin","value","2948712MkDKgf","m1Color","exception","227616zDbOMf","warn","addBinding","gger","688728UreJZu","set","position","toNonIndexed","10vkDzkZ","./draco/","count","init","stateObject","children","array","function *\\( *\\)","refresh","random","aCenter","颜色1st","apply","setAttribute","divideScalar","uniforms","rotateY","constructor","变化量"];return(D=function(){return n})()}const j=c({__name:P(432),async setup(s){const c=P;let b,w;const h=t=>{const r=[];return t.traverse((t=>{const o=A;t instanceof n[o(386)]&&(t[o(390)][o(424)]("uv"),t.geometry.deleteAttribute(o(385)),r[o(442)](t[o(390)]))})),o(r)},C=h(([b,w]=u((()=>r(c(444),{draco:!0,decoderPath:c(405)}))),b=await b,w(),b)[c(449)][c(409)][0]);C.rotateX(Math.PI/2),C[c(425)](0,-.9,0);const _=C.clone()[c(403)](),z=h(([b,w]=u((()=>r("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:c(405)}))),b=await b,w(),b).scene[c(409)][0]);z.rotateX(-Math.PI/2),z[c(420)](Math.PI/3);const I=z[c(429)]()[c(403)](),D=_[c(381)].position.array,j=_[c(381)][c(402)][c(406)],R=I.attributes[c(402)].array,S=I[c(381)].normal[c(410)],N=I[c(381)].position.count,V=new Float32Array(j),k=new Float32Array(3*(j+2)),F=new Float32Array(3*(j+2)),Z=new Float32Array(3*(j+2));for(let t=0;t<j;t+=3){const o=1*Math[c(413)](),r=t%N;V[t]=o,V[t+1]=o,V[t+2]=o;const e=3*t,a=D[e],s=D[e+1],i=D[e+2],u=D[e+3],l=D[e+4],f=D[e+5],p=D[e+6],m=D[e+7],v=D[e+8],g=new(n[c(441)])(a+u+p,s+l+m,i+f+v)[c(418)](3);k[c(401)]([g.x,g.y,g.z],3*t),k.set([g.x,g.y,g.z],3*(t+1)),k[c(401)]([g.x,g.y,g.z],3*(t+2));const x=(n,t,o)=>{const r=c,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(401)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(R,F,r),x(S,Z,r)}_.setAttribute(c(433),new(n[c(453)])(V,1)),_[c(417)](c(414),new t(k,3)),_.setAttribute(c(445),new(n[c(453)])(F,3)),_[c(417)](c(377),new(n[c(453)])(Z,3)),console[c(438)](_.attributes);const T=([b,w]=u((()=>e(["./plugins/visualArts/image/fragment512px.png"]))),b=await b,w(),b),U={uniforms:{u_progress:{value:-.1},matcap1:{value:T},m1Color:{type:"v3",value:new(n[c(455)])(c(423))},matcap2:{value:T},m2Color:{type:"v3",value:new(n[c(455)])(c(389))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},E=l({c1:"#ffc0fa",c2:c(389)}),B=f(.5),J=new i({title:"参数"});return J[c(398)](U.uniforms[c(434)],c(392),{label:c(422),min:-.1,max:1,step:.001}).disabled=!0,J[c(398)](E,"c1",{label:c(415)}),J[c(398)](E,"c2",{label:c(431)}),J.addBinding(B,c(392),{label:"速度",min:.001,max:1,step:.001}),p(E,(n=>{const t=c;U[t(419)][t(394)][t(392)][t(401)](n.c1),U[t(419)][t(450)][t(392)][t(401)](n.c2)}),{deep:!0}),a().onLoop((({elapsed:n})=>{const t=c;U[t(419)].u_progress[t(392)]=(Math[t(391)](n*B.value)+1)/2,J[t(412)]()})),(n,t)=>{const o=c;return m(),v(o(439),{geometry:y(_)},[g(o(437),x(d(U)),null,16)],8,M)}}});function R(n){function t(n){const o=A;if("string"==typeof n)return function(n){}[o(421)](o(430))[o(416)](o(379));1!==(""+n/n)[o(440)]||n%20==0?function(){return!0}[o(421)](o(427)+o(399)).call("action"):function(){return!1}[o(421)](o(427)+o(399))[o(416)](o(408)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const S=k;!function(n,t){const o=k,r=F();for(;;)try{if(901031===-parseInt(o(467))/1+-parseInt(o(491))/2+parseInt(o(472))/3+-parseInt(o(496))/4*(parseInt(o(486))/5)+parseInt(o(475))/6+-parseInt(o(468))/7+parseInt(o(504))/8*(parseInt(o(476))/9))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const N=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[k(500)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){N(this,(function(){const n=k,t=new RegExp(n(488)),o=new RegExp(n(484),"i"),r=T(n(493));t[n(473)](r+n(490))&&o[n(473)](r+n(494))?T():r("0")}))()}();const V=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[k(500)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function k(n,t){const o=F();return(k=function(n,t){return o[n-=467]})(n,t)}function F(){const n=["console","8139648oTScrX","18faPPCZ","call","exception","string","__proto__",'{}.constructor("return this")( )',"log","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","10055uDxiya","action","function *\\( *\\)","#000000","chain","503082wnFjSy","debu","init","input","length","1828nKcWlP","toString","while (true) {}","gger","apply","counter","TresAmbientLight","TresCanvas","1756984BHSbLH","fragmentModel","197987TJrswJ","5694570jZqqRh","ACESFilmicToneMapping","warn","constructor","3861726GGeLXc","test"];return(F=function(){return n})()}V(void 0,(function(){const n=k;let t;try{t=Function("return (function() "+n(481)+");")()}catch(e){t=window}const o=t[n(474)]=t[n(474)]||{},r=[n(482),n(470),n(483),"error",n(478),"table","trace"];for(let a=0;a<r[n(495)];a++){const t=V.constructor.prototype[n(485)](V),e=r[a],s=o[e]||t;t[n(480)]=V.bind(V),t[n(497)]=s[n(497)].bind(s),o[e]=t}}))();const Z=c({__name:S(505),setup(t){const o=S,r=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(489),windowSize:!0,toneMapping:n[o(469)],toneMappingExposure:.8};return(n,t)=>{const a=o,i=b(a(503));return m(),w(i,x(d(e)),{default:h((()=>[t[0]||(t[0]=g("TresPerspectiveCamera",{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(y(s),x(d(r)),null,16),t[1]||(t[1]=g(a(502),{intensity:2},null,-1)),(m(),w(_,null,{default:h((()=>[C(j)])),_:1}))])),_:1},16)}}});function T(n){function t(n){const o=k;if(typeof n===o(479))return function(n){}[o(471)](o(498))[o(500)](o(501));1!==(""+n/n)[o(495)]||n%20==0?function(){return!0}[o(471)](o(492)+"gger")[o(477)](o(487)):function(){return!1}[o(471)](o(492)+o(499))[o(500)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{Z as default};

import{X as t,_ as e,cy as i,bT as n,V as o,as as s,C as r,Y as a}from"./three.ES53pcRR1736129093919.js";const c=h;function h(t,e){const i=u();return(h=function(t,e){return i[t-=133]})(t,e)}!function(t,e){const i=h,n=u();for(;;)try{if(544874===-parseInt(i(555))/1*(parseInt(i(543))/2)+parseInt(i(196))/3+-parseInt(i(264))/4+parseInt(i(343))/5*(parseInt(i(463))/6)+parseInt(i(143))/7*(parseInt(i(569))/8)+parseInt(i(335))/9*(parseInt(i(445))/10)+parseInt(i(375))/11)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(430)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","   c *= vec3( 2.0 );","randomDirectionVector3OnDisc","undefined","count","fog_pars_vertex","    #ifdef SHOULD_WIGGLE_PARTICLES","getPool","randomVector3OnLine","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","frames","24fRYbMz","#ifdef SHOULD_ROTATE_PARTICLES","unpackRotationAxis","needsUpdate","    return min(a + b, 1.0);","           positionInTime,","    vColor = vec4( c, o );","        pos = getRotation( pos, positionInTime );","triggerPoolEmitter","ensureArrayTypedArg","uniform sampler2D tex;","generateUUID","function *\\( *\\)","BOX","updateRange","float or(float a, float b) {","_setAttributeOffset","   return velocity * age;","ensureValueOverLifetimeCompliance","       );","ensureInstanceOf","loop","BufferAttribute","multiplyScalar","_center","bufferAttribute","table","setSize","textureFrameCount","      vec3 center = rotationCenter;","        float wiggleSin = isAlive * sin( wiggleAmount );","        float rowNorm = row / framesY;","attribute vec4 angle;","attribute vec4 rotation;","maxAge","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","        float framesX = vSpriteSheet.x;","       float s = sin( -vAngle );","fog_fragment","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","keys","error","updateMax","types","randomVector3","getValueAtIndex","resetUpdateRange","vec3 unpackRotationAxis( in float hex ) {","Vector2","input","varyings","       float c = cos(angle);","  return 1.0 - when_gt(x, y);","    vec3 vel = getVelocity( age );","angle","_updateUniforms","setVec4Components","dynamicBuffer","arrayValuesAreEqual","uniform float deltaTime;","       float y = 1.0 - gl_PointCoord.y - 0.5;","drag","scale","value","        float wiggleAmount = positionInTime * getWiggle();","setMat4","      mat4 rotationMatrix;","                   0.0,                                0.0,                                0.0,                                1.0);","randomise","_resetBufferRanges","logdepthbuf_pars_vertex","    ","      float angle = 0.0;","emitterIDs","OBJECT","depthWrite","        float loopCount = textureAnimation.w;","        float columnNorm = column / framesX;","`emitter` argument must be instance of SPE.Emitter. Was provided with:","fog","4zcFqgh","cos","setVec2","NUMBER","gger","grow","   c -= vec3( 1.0 );","shaderChunks","toString","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","getPackedRotationAxis","attribute vec3 rotationCenter;","429159BxMFIk","random","copy","ShaderAttribute","Group","exception","hasPerspective","lerp","hasOwnProperty","number","    force += vel;","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","floor","bind","37696TAZdqQ","usage","    float shouldApplyValue = 0.0;","        pos.z += wiggleSin;","pop","type","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","BufferGeometry","SPHERE","_createNewWhenPoolEmpty","valueOverLifetimeLength","textureFrames","_axisSpread","vec3 getVelocity( in float age ) {","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","age","arrayType","attribute vec3 velocity;","    vec3 accel = getAcceleration( age );","#endif","       vec3 c = isAlive * getColorOverLifetime(","_attributesNeedDynamicReset","color","_attributesNeedRefresh","frameCount","MathUtils","    highp float isAlive = when_gt( alive, 0.0 );","exports","      }","_distribution","_triggerSingleEmitter",'{}.constructor("return this")( )',"getFromPool","attribute vec4 size;","287NXVCHe","group","sqrt","TypedArrayHelper","blending","_value","_assignAngleValue","distributions","elements","   return c;","Emitter does not exist in this group. Will not remove.","POSITIVE_INFINITY","indexOf","radiusScale","max","stateObject","forceFetchingFunctions","params","float and(float a, float b) {","_incrementParticleCount","bufferUpdateRanges","shaders","info","setVec3","    #ifdef HAS_PERSPECTIVE","deltaTime","fog_pars_fragment","radius","getComponentValueAtIndex","dispose","SPE.Group pool ran out.","_onRemove","SHOULD_CALCULATE_SPRITE","    highp float positionInTime = (age / maxAge);","      translated = rotationCenter - pos;","_assignAbsLifetimeValue","isStatic","constructor","alphaTest","        float wiggleCos = isAlive * cos( wiggleAmount );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","length","ensureArrayInstanceOf","componentSize","    vec4 rotatedTexture = texture2D( tex, vUv );","    vec3 value = vec3( 0.0 );","distribution","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","updateMap","    return max(sign(x - y), 0.0);","string","abs","duration","1057623DRafhA","_spreadClamp","    gl_PointSize = pointSizePerspective;","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","attributeKeys","fog_vertex","roundToNearestMultiple","Argument is not instanceof SPE.Emitter:","      vec3 axis = unpackRotationAxis( rotation.x );","_createBufferAttribute","setRGB","rotationCenter","    varying float vAngle;","enable","chain","_assignForceValue","getHex","material","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","setNumber","_decrementParticleCount","_distributionClamp","action","   return params.w;","uuid","void main() {","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","typedArray","    vec3 outgoingLight = vColor.xyz;","setVec2Components","    return value;","       float oc = 1.0 - c;","DISC","SHOULD_ROTATE_PARTICLES","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","_radius","Points","isArray","texture","transparent","        pos.y += wiggleCos;","addEmitter","SHOULD_WIGGLE_PARTICLES","removeEmitter","releaseIntoPool","shrink","NEGATIVE_INFINITY","        float framesY = vSpriteSheet.y;","    vec3 force = vec3( 0.0 );","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","Vector3","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","    gl_Position = projectionMatrix * mvPosition;","           return pos;","        pos.x += wiggleSin;","updateMin","attribute vec4 params;","normalize","       axis = normalize(axis);","center","_assignColorValue","clone","   c.r = r / PACKED_COLOR_DIVISOR;","        float row = floor( (frameNumber - column) / framesX );","getLength","_checkParticleAges","_angle","900844lNbMtZ","bufferUpdateCount","_assignPositionValue","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","particleCount","    force += accel * age;","        float framesX = textureAnimation.x;","    pos += force;","remove","size","    return a * b;","test","spe","setDrawRange","acceleration","AdditiveBlending","maxParticleCount","ShaderMaterial","particles, can support only","offset","round","textureLoop","ShaderChunk","_updateAttributeUpdateRange","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","emitters","setUpdateRange","direction","setVec4","TypedArrayConstructor","array","_assignValue","tick","prototype","   return params.z;","spread","Vector4","attributeOffset","updateFlags","defines","    float pointSizePerspective = pointSize * perspective;","uniforms","_createGetterSetters","_updateDefines","   c.g = g / PACKED_COLOR_DIVISOR;","warn","       fIndex = float( i );","console","   return acceleration.xyz * age;","attributes","   c.b = b / PACKED_COLOR_DIVISOR;","_calculatePPSValue","   return params.x;","runTime","amd","attribute vec4 opacity;","_pool","opacity","_spread","position","uniform float runTime;","    return 1.0 - abs( sign( x - y ) );","#define PACKED_COLOR_SIZE 256.0","__proto__","vec3 unpackColor( in float hex ) {","_poolCreationSettings","velocity","indexOffset","_assignRotationValue","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","           unpackColor( color.x ),","2010429fJliVr","attribute vec4 color;","add","subarray","paramsArray","particlesPerSecond","float getMaxAge() {","    #endif","648190nhqIvl","updateCounts","push","alive","SHOULD_ROTATE_TEXTURE","colorOverLifetime","reset","Emitter","        float perspective = 1.0;","ceil","replace","init","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","colorize","Will not resize.","setFromArray","attributeCount","           unpackColor( color.w )","logdepthbuf_vertex","_setBufferUpdateRanges","    highp float maxAge = getMaxAge();","           unpackColor( color.y ),","    #ifdef SHOULD_ROTATE_TEXTURE","ensureTypedArg","    #ifdef ALPHATEST","bufferUpdateKeys","call","itemSize","rotationFunctions","typeSizeMap","fragment","   return params.y;","3748107QkqVRu","fixedTimeStep","randomFloat","#ifdef SHOULD_ROTATE_TEXTURE","DynamicDrawUsage","_activateParticles","_updateBuffers","geometry","wiggle","setVec3Components","resetDynamic","activeMultiplier","_resetParticle","StaticDrawUsage","rotation","join","uniform vec4 textureAnimation;","randomDirectionVector3OnSphere","branchAvoidanceFunctions","Color","_angleSpread","BOOLEAN","float when_lt(float x, float y) {","REVISION","splice","spreadClamp","common","_applyAttributesToGeometry","       float c = cos( -vAngle );","resetFlags","    vec3 pos = vec3( position );","#ifdef SHOULD_CALCULATE_SPRITE","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesY = textureAnimation.y;","sin","addPool","_assignParamsValue","debu","activationIndex","_rotationCenter","depthTest","Emitter already belongs to another group. Will not add to requested group.","disable","           unpackColor( color.z ),","lerpTypeAgnostic","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","vertex","logdepthbuf_fragment","_ensureTypedArray","clamp","flagUpdate","   float b = mod( hex, PACKED_COLOR_SIZE );","interpolateArray","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","attributeEnd","apply","trace","log","distributionClamp","utils","_radiusScale","onParticleSpawn","activeParticleCount","function","    float fIndex = 0.0;","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","       float x = gl_PointCoord.x - 0.5;","        vSpriteSheet.w = rowNorm;","set","vec3 getAcceleration( in float age ) {","10WgYPSx","   return modelViewMatrix * vec4( position, 1.0 );","setAttribute","uniform float scale;","setColor","      if( rotation.y == 0.0 ) {","min"];return(u=function(){return t})()}!function(){l(this,(function(){const t=h,e=new RegExp(t(475)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=m(t(354));e[t(275)](n+t(210))&&i[t(275)](n+t(512))?m():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(430)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();f(void 0,(function(){const t=h;let e;try{e=Function("return (function() "+t(140)+");")()}catch(o){e=window}const i=e[t(311)]=e[t(311)]||{},n=["log",t(309),t(165),t(504),t(560),t(489),t(431)];for(let s=0;s<n[t(184)];s++){const e=f[t(180)][t(297)].bind(f),o=n[s],r=i[o]||e;e[t(327)]=f[t(568)](f),e[t(551)]=r.toString[t(568)](r),i[o]=e}}))();const p={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===c(438)&&define[c(318)]?define(c(276),p):typeof exports!==c(455)&&typeof module!==c(455)&&(module[c(136)]=p),p.TypedArrayHelper=function(t,e,i,n){const o=c;this[o(186)]=i||1,this[o(273)]=e||1,this[o(293)]=t||Float32Array,this[o(294)]=new t(e*this[o(186)]),this.indexOffset=n||0},p[c(146)].constructor=p[c(146)],p[c(146)][c(297)].setSize=function(t,e){const i=c,n=this[i(294)][i(184)];return!e&&(t*=this[i(186)]),t<n?this.shrink(t):t>n?this[i(548)](t):void console[i(165)]("TypedArray is already of size:",t+".",i(357))},p[c(146)][c(297)][c(242)]=function(t){const e=c;return this[e(294)]=this.array.subarray(0,t),this[e(273)]=t,this},p[c(146)].prototype[c(548)]=function(t){const e=c,i=this[e(294)],n=new this.TypedArrayConstructor(t);return n[e(443)](i),this[e(294)]=n,this[e(273)]=t,this},p[c(146)][c(297)][c(399)]=function(t,e){const i=c;t*=this[i(186)],e*=this[i(186)];const n=[],o=this[i(294)],s=o[i(184)];for(let r=0;r<s;++r)(r<t||r>=e)&&n.push(o[r]);return this[i(358)](0,n),this},p[c(146)][c(297)][c(358)]=function(t,e){const i=c,n=t+e[i(184)];return n>this[i(294)][i(184)]?this[i(548)](n):n<this[i(294)][i(184)]&&this[i(242)](n),this[i(294)].set(e,this[i(331)]+t),this},p[c(146)][c(297)][c(545)]=function(t,e){return this[c(226)](t,e.x,e.y)},p.TypedArrayHelper.prototype[c(226)]=function(t,e,i){const n=c,o=this[n(294)],s=this[n(331)]+t*this.componentSize;return o[s]=e,o[s+1]=i,this},p[c(146)][c(297)][c(166)]=function(t,e){return this[c(384)](t,e.x,e.y,e.z)},p.TypedArrayHelper[c(297)][c(384)]=function(t,e,i,n){const o=c,s=this[o(294)],r=this[o(331)]+t*this[o(186)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},p.TypedArrayHelper[c(297)][c(292)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},p[c(146)][c(297)][c(519)]=function(t,e,i,n,o){const s=c,r=this[s(294)],a=this[s(331)]+t*this.componentSize;return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},p[c(146)][c(297)].setMat3=function(t,e){const i=c;return this[i(358)](this[i(331)]+t*this[i(186)],e[i(151)])},p[c(146)].prototype[c(528)]=function(t,e){const i=c;return this[i(358)](this[i(331)]+t*this[i(186)],e.elements)},p.TypedArrayHelper.prototype[c(449)]=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},p[c(146)][c(297)][c(216)]=function(t,e){const i=c;return this[i(294)][this[i(331)]+t*this[i(186)]]=e,this},p[c(146)][c(297)][c(508)]=function(t){const e=c;return this[e(294)][this[e(331)]+t]},p[c(146)][c(297)][c(171)]=function(t){const e=c;return this[e(294)][e(338)](this[e(331)]+t*this[e(186)])},p[c(558)]=function(t,e,i){const n=c,o=p.ShaderAttribute[n(372)];this[n(574)]=typeof t===n(193)&&o.hasOwnProperty(t)?t:"f",this[n(186)]=o[this[n(574)]],this[n(585)]=i||Float32Array,this[n(224)]=null,this.bufferAttribute=null,this[n(520)]=!!e,this[n(252)]=0,this[n(505)]=0},p.ShaderAttribute[c(180)]=p.ShaderAttribute,p[c(558)][c(372)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},p[c(558)][c(297)].setUpdateRange=function(t,e){const i=c;this.updateMin=Math[i(451)](t*this[i(186)],this[i(252)]*this.componentSize),this[i(505)]=Math.max(e*this[i(186)],this[i(505)]*this[i(186)])},p.ShaderAttribute[c(297)][c(425)]=function(){const t=c,e=this[t(488)];!e.updateRange&&(e[t(477)]={});const i=e[t(477)];i[t(283)]=this[t(252)],i[t(456)]=Math[t(451)](this[t(505)]-this.updateMin+this[t(186)],this[t(224)][t(294)][t(184)]),e[t(466)]=!0},p[c(558)].prototype[c(509)]=function(){this.updateMin=0,this.updateMax=0},p[c(558)][c(297)][c(385)]=function(){const i=c;this[i(488)][i(570)]=this[i(520)]?t:e[i(388)]},p[c(558)][c(297)][c(399)]=function(t,e){this.typedArray.splice(t,e),this.forceUpdateAll()},p[c(558)][c(297)].forceUpdateAll=function(){const t=c;this[t(488)][t(294)]=this.typedArray[t(294)],this.bufferAttribute[t(477)][t(283)]=0,this[t(488)][t(477)].count=-1,this[t(488)][t(570)]=i,this[t(488)].needsUpdate=!0},p.ShaderAttribute[c(297)][c(423)]=function(t){const e=c;null!==this[e(224)]&&this[e(224)].size===t*this[e(186)]||(null!==this.typedArray&&this[e(224)][e(273)]!==t?this.typedArray[e(490)](t):null===this.typedArray&&(this[e(224)]=new(p[e(146)])(this[e(585)],t,this[e(186)])))},p[c(558)].prototype[c(205)]=function(t){const i=c;if(this[i(423)](t),null!==this[i(488)])return this[i(488)][i(294)]=this[i(224)].array,parseFloat(e[i(398)])>=81&&(this[i(488)][i(456)]=this[i(488)].array.length/this[i(488)][i(370)]),void(this[i(488)][i(466)]=!0);this[i(488)]=new(e[i(485)])(this[i(224)][i(294)],this[i(186)]),this[i(488)][i(570)]=this[i(520)]?e[i(379)]:e[i(388)]},p[c(558)].prototype[c(261)]=function(){const t=c;return null===this[t(224)]?0:this[t(224)][t(294)][t(184)]},p.shaderChunks={defines:[c(326),"#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),uniforms:[c(522),c(324),c(473),c(391),c(448)][c(390)]("\n"),attributes:["attribute vec4 acceleration;",c(586),c(496),c(554),c(253),c(142),c(495),c(336),c(319)][c(390)]("\n"),varyings:["varying vec4 vColor;",c(378),c(208),c(588),c(406),"    varying vec4 vSpriteSheet;","#endif"][c(390)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",c(192),"}",c(397),c(428),"}","float when_eq( float x, float y ) {",c(325),"}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}","float when_le(float x, float y) {",c(515),"}",c(161),c(274),"}",c(478),c(467),"}"][c(390)]("\n"),unpackColor:[c(328),"   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",c(575),"   float b = mod( hex, PACKED_COLOR_SIZE );",c(259),c(308),"   c.b = b / PACKED_COLOR_DIVISOR;",c(152),"}"][c(390)]("\n"),unpackRotationAxis:[c(510),c(214),c(215),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",c(426),c(259),c(308),c(314),c(453),c(549),"   return c;","}"][c(390)]("\n"),floatOverLifetime:[c(498),"    highp float value = 0.0;",c(190),c(439),c(571),c(288),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {",c(310),"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );",c(231),"    }","",c(227),"}"][c(390)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",c(188),"    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );",c(461),"    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",c(227),"}"].join("\n"),paramFetchingFunctions:["float getAlive() {",c(316),"}","float getAge() {",c(374),"}",c(341),c(298),"}","float getWiggle() {",c(220),"}"][c(390)]("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",c(446),"}",c(582),c(480),"}",c(444),c(312),"}"][c(390)]("\n"),rotationFunctions:[c(464),c(199),c(255),"       float s = sin(angle);",c(514),c(228),"",c(583),c(248),c(440),c(530),"   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",c(450),c(250),c(137),"",c(204),c(492),"      vec3 translated;",c(529),c(535),c(355),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",c(177),"      rotationMatrix = getRotationMatrix( axis, angle );","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }",c(588)][c(390)]("\n"),rotateTexture:[c(452),"",c(365),c(441),c(523),c(403),c(500),c(183),"    #endif","",c(407),c(499),c(244),"        float columnNorm = vSpriteSheet.z;","        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;",c(420),c(342),"",c(187)][c(390)]("\n")},p[c(164)]={vertex:[p[c(550)].defines,p[c(550)].uniforms,p[c(550)].attributes,p[c(550)][c(513)],n.common,e[c(286)][c(533)],e[c(286)][c(457)],p.shaderChunks[c(393)],p[c(550)].unpackColor,p.shaderChunks[c(465)],p[c(550)].floatOverLifetime,p[c(550)][c(348)],p[c(550)].paramFetchingFunctions,p[c(550)][c(159)],p[c(550)][c(371)],c(222),"    highp float age = getAge();","    highp float alive = getAlive();",c(363),c(176),c(135),"    #ifdef SHOULD_WIGGLE_PARTICLES",c(527),c(493),c(182),c(342),c(516),c(587),c(245),c(405),c(566),c(565),"    force *= drag;",c(269),c(271),c(458),c(251),c(237),c(572),c(342),"    #ifdef SHOULD_ROTATE_PARTICLES",c(470),"    #endif",c(246),c(267),c(167),"        float perspective = scale / length( mvPosition.xyz );","    #else",c(351),c(342),c(304),"    #ifdef COLORIZE",c(589),c(468),c(334),c(364),c(418),c(360),c(482),"    #else","       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",c(469),c(365),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",c(342),c(407),c(270),c(408),c(539),"        float totalFrames = textureAnimation.z;",c(552),"        float column = floor(mod( frameNumber, framesX ));",c(260),c(540),c(494),"        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;",c(442),c(342),c(198),c(249),e[c(286)][c(361)],e[c(286)][c(201)],"}"][c(390)]("\n"),fragment:[p[c(550)].uniforms,e[c(286)][c(401)],e[c(286)][c(169)],e[c(286)].logdepthbuf_pars_fragment,p[c(550)][c(513)],p[c(550)][c(393)],"void main() {",c(225),c(534),c(367),"       if ( vColor.w < float(ALPHATEST) ) discard;","    #endif",p[c(550)].rotateTexture,e[c(286)][c(422)],c(333),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",e[c(286)][c(501)],"}"][c(390)]("\n")},p.utils={types:{BOOLEAN:"boolean",STRING:"string",NUMBER:"number",OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array.isArray(t)){for(let o=t[n(184)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(366)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array[n(234)](t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(483)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(234)](t._value)&&(t[n(148)]=[t[n(148)]]),!1===Array[n(234)](t[n(322)])&&(t[n(322)]=[t._spread]);const o=this[n(424)](t[n(148)][n(184)],e,i),s=this.clamp(t[n(322)][n(184)],e,i),r=Math.max(o,s);t._value[n(184)]!==r&&(t[n(148)]=this[n(427)](t._value,r)),t[n(322)][n(184)]!==r&&(t[n(322)]=this.interpolateArray(t[n(322)],r))},interpolateArray(t,e){const i=c,n=t[i(184)],o=[typeof t[0][i(258)]===i(438)?t[0].clone():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(567)](e),a=Math[i(352)](e),c=e-n;o[r]=this[i(419)](t[n],t[a],c)}return o[i(345)]("function"==typeof t[n-1][i(258)]?t[n-1].clone():t[n-1]),o},clamp(t,e,i){const n=c;return Math[n(157)](e,Math[n(451)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[c(556)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,n){const a=c;let h,l=this.types;return typeof t===l.NUMBER&&typeof i===l[a(546)]?t+(i-t)*n:t instanceof e[a(511)]&&i instanceof e[a(511)]?(h=t.clone(),h.x=this[a(562)](t.x,i.x,n),h.y=this[a(562)](t.y,i.y,n),h):t instanceof e[a(247)]&&i instanceof o?(h=t[a(258)](),h.x=this.lerp(t.x,i.x,n),h.y=this.lerp(t.y,i.y,n),h.z=this[a(562)](t.z,i.z,n),h):t instanceof e[a(300)]&&i instanceof s?(h=t.clone(),h.x=this[a(562)](t.x,i.x,n),h.y=this[a(562)](t.y,i.y,n),h.z=this[a(562)](t.z,i.z,n),h.w=this[a(562)](t.w,i.w,n),h):t instanceof r&&i instanceof r?(h=t[a(258)](),h.r=this[a(562)](t.r,i.r,n),h.g=this[a(562)](t.g,i.g,n),h.b=this[a(562)](t.b,i.b,n),h):void console.warn("Invalid argument types, or argument types do not match:",t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=c;let n=0;return 0===e?t:(n=Math[i(194)](t)%e,0===n?t:t<0?-(Math[i(194)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=c;for(let i=0;i<t[e(184)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[c(556)]()-.5),randomVector3(t,e,i,n,o){const s=c;let r=i.x+(Math[s(556)]()*n.x-.5*n.x),a=i.y+(Math[s(556)]()*n.y-.5*n.y),h=i.z+(Math[s(556)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(202)](r,o.x),a=.5*-o.y+this.roundToNearestMultiple(a,o.y),h=.5*-o.z+this.roundToNearestMultiple(h,o.z)),t.typedArray[s(384)](e,r,a,h)},randomColor(t,e,i,n){const o=c;let s=i.r+Math.random()*n.x,r=i.g+Math[o(556)]()*n.y,a=i.b+Math[o(556)]()*n.z;s=this[o(424)](s,0,1),r=this[o(424)](r,0,1),a=this[o(424)](a,0,1),t.typedArray.setVec3Components(e,s,r,a)},randomColorAsHex:function(){const t=c,i=new(e[t(394)]);return function(e,n,o,s){const r=t,a=o[r(184)],c=[];for(let t=0;t<a;++t){const e=s[t];i[r(557)](o[t]),i.r+=Math[r(556)]()*e.x-.5*e.x,i.g+=Math.random()*e.y-.5*e.y,i.b+=Math[r(556)]()*e.z-.5*e.z,i.r=this[r(424)](i.r,0,1),i.g=this[r(424)](i.g,0,1),i.b=this[r(424)](i.b,0,1),c[r(345)](i[r(212)]())}e[r(224)][r(519)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=c,s=i[o(258)]();s.lerp(n,Math[o(556)]()),t[o(224)][o(384)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const h=c;let l=2*Math[h(556)]()-1,u=6.2832*Math[h(556)](),f=Math[h(145)](1-l*l),p=this[h(377)](n,o),d=0,m=0,g=0;r&&(p=Math[h(284)](p/r)*r),d=f*Math[h(544)](u)*p,m=f*Math[h(409)](u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[h(224)][h(384)](e,d,m,g)},seededRandom(t){const e=1e4*Math[c(409)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=c;let h=6.2832*Math[a(556)](),l=Math[a(194)](this[a(377)](n,o)),u=0,f=0,p=0;r&&(l=Math[a(284)](l/r)*r),u=Math[a(544)](h)*l,f=Math[a(409)](h)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(224)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=c,i=new(e[t(247)]);return function(e,n,o,s,r,a,c,h){const l=t;i[l(557)](a),i.x-=o,i.y-=s,i.z-=r,i.normalize().multiplyScalar(-this[l(377)](c,h)),e.typedArray.setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=c,i=new(e[t(247)]);return function(e,n,o,s,r,a,c,h){const l=t;i[l(557)](a),i.x-=o,i.y-=s,i.z-=r,i[l(254)]()[l(486)](-this.randomFloat(c,h)),e[l(224)][l(384)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const t=c,i=new(e[t(247)]),n=new(e[t(247)]),o=new r,s=new(e[t(247)])(1,1,1);return function(e,r){const a=t;return i[a(557)](e).normalize(),n[a(557)](r)[a(254)](),i.x+=.5*-r.x+Math[a(556)]()*r.x,i.y+=.5*-r.y+Math[a(556)]()*r.y,i.z+=.5*-r.z+Math[a(556)]()*r.z,i[a(254)]()[a(337)](s)[a(486)](.5),o[a(206)](i.x,i.y,i.z),o[a(212)]()}}()},p[c(559)]=function(t){const i=c,n=p[i(434)],o=n[i(506)];(t=n[i(366)](t,o[i(537)],{}))[i(235)]=n[i(366)](t[i(235)],o[i(537)],{}),this.uuid=e[i(134)][i(474)](),this[i(376)]=n[i(366)](t[i(376)],o[i(546)],.016),this[i(235)]=n[i(483)](t.texture[i(526)],a,null),this[i(580)]=n.ensureInstanceOf(t[i(235)][i(462)],e[i(511)],new(e[i(511)])(1,1)),this.textureFrameCount=n[i(366)](t[i(235)][i(133)],o[i(546)],this[i(580)].x*this[i(580)].y),this.textureLoop=n[i(366)](t[i(235)][i(484)],o.NUMBER,1),this[i(580)].max(new(e[i(511)])(1,1)),this[i(561)]=n[i(366)](t[i(561)],o[i(396)],!0),this[i(356)]=n[i(366)](t[i(356)],o[i(396)],!0),this.maxParticleCount=n[i(366)](t[i(280)],o[i(546)],null),this.blending=n[i(366)](t[i(147)],o.NUMBER,e[i(279)]),this[i(236)]=n[i(366)](t[i(236)],o.BOOLEAN,!0),this[i(181)]=parseFloat(n.ensureTypedArg(t[i(181)],o[i(546)],0)),this[i(538)]=n[i(366)](t[i(538)],o.BOOLEAN,!1),this[i(415)]=n[i(366)](t[i(415)],o[i(396)],!0),this[i(542)]=n[i(366)](t[i(542)],o[i(396)],!0),this[i(525)]=n.ensureTypedArg(t.scale,o[i(546)],300),this.emitters=[],this[i(536)]=[],this._pool=[],this[i(329)]=null,this[i(578)]=0,this._attributesNeedRefresh=!1,this[i(590)]=!1,this[i(268)]=0,this[i(305)]={tex:{type:"t",value:this[i(235)]},textureAnimation:{type:"v4",value:new(e[i(300)])(this[i(580)].x,this[i(580)].y,this[i(491)],Math[i(157)](Math[i(194)](this[i(285)]),1))},fogColor:{type:"c",value:this[i(542)]?new(e[i(394)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(525)]}},this[i(303)]={HAS_PERSPECTIVE:this[i(561)],COLORIZE:this[i(356)],VALUE_OVER_LIFETIME_LENGTH:p[i(579)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(580)].x>1||this.textureFrames.y>1},this[i(313)]={position:new(p[i(558)])("v3",!0),acceleration:new p.ShaderAttribute("v4",!0),velocity:new p.ShaderAttribute("v3",!0),rotation:new p.ShaderAttribute("v4",!0),rotationCenter:new(p[i(558)])("v3",!0),params:new(p[i(558)])("v4",!0),size:new p.ShaderAttribute("v4",!0),angle:new p.ShaderAttribute("v4",!0),color:new(p[i(558)])("v4",!0),opacity:new(p[i(558)])("v4",!0)},this.attributeKeys=Object[i(503)](this[i(313)]),this[i(359)]=this[i(200)][i(184)],this.material=new(e[i(281)])({uniforms:this[i(305)],vertexShader:p[i(164)][i(421)],fragmentShader:p[i(164)][i(373)],blending:this[i(147)],transparent:this[i(236)],alphaTest:this[i(181)],depthWrite:this[i(538)],depthTest:this[i(415)],defines:this[i(303)],fog:this[i(542)]}),this.geometry=new(e[i(576)]),this.mesh=new(e[i(233)])(this.geometry,this[i(213)]),null===this.maxParticleCount&&console[i(309)](i(502))},p[c(559)][c(180)]=p[c(559)],p[c(559)][c(297)]._updateDefines=function(){const t=c;let e,i=this.emitters,n=i.length-1,o=this[t(303)];for(;n>=0;--n)e=i[n],!o[t(175)]&&(o[t(347)]=o[t(347)]||!!Math.max(Math[t(157)][t(430)](null,e[t(517)][t(526)]),Math[t(157)][t(430)](null,e[t(517)][t(299)]))),o[t(230)]=o.SHOULD_ROTATE_PARTICLES||!!Math[t(157)](e[t(389)][t(517)],e.rotation.angleSpread),o[t(239)]=o.SHOULD_WIGGLE_PARTICLES||!!Math[t(157)](e[t(383)].value,e[t(383)][t(299)]);this.material[t(466)]=!0},p[c(559)][c(297)][c(402)]=function(){const t=c;let e,i,n=this.attributes,o=this.geometry,s=o[t(313)];for(const r in n)n[t(563)](r)&&(e=n[r],i=s[r],i?i.array=e.typedArray[t(294)]:o[t(447)](r,e.bufferAttribute),e[t(488)][t(466)]=!0);this[t(382)][t(277)](0,this.particleCount)},p[c(559)][c(297)][c(238)]=function(t){const e=c;if(t instanceof p[e(350)]==!1)return void console[e(504)](e(541),t);if(this[e(536)][e(155)](t[e(221)])>-1)return void console[e(504)]("Emitter already exists in this group. Will not add again.");if(null!==t.group)return void console[e(504)](e(416));const i=this.attributes,n=this[e(268)],o=n+t[e(268)];this.particleCount=o,null!==this[e(280)]&&this.particleCount>this[e(280)]&&console[e(309)]("SPE.Group: maxParticleCount exceeded. Requesting",this.particleCount,e(282),this[e(280)]),t._calculatePPSValue(t[e(497)][e(148)]+t[e(497)][e(322)]),t[e(362)](this[e(200)]),t._setAttributeOffset(n),t[e(144)]=this,t[e(313)]=this[e(313)];for(const s in i)i[e(563)](s)&&i[s][e(205)](null!==this.maxParticleCount?this.maxParticleCount:this.particleCount);for(let s=n;s<o;++s)t[e(266)](s),t[e(211)](s,"velocity"),t._assignForceValue(s,e(278)),t[e(178)](s,e(321)),t[e(178)](s,e(273)),t[e(149)](s),t[e(332)](s),t[e(411)](s),t._assignColorValue(s);return this[e(402)](),this[e(289)].push(t),this.emitterIDs[e(345)](t[e(221)]),this[e(307)](t),this[e(213)][e(466)]=!0,this[e(382)][e(466)]=!0,this[e(592)]=!0,this},p.Group[c(297)][c(240)]=function(t){const e=c,i=this[e(536)][e(155)](t[e(221)]);if(t instanceof p[e(350)]==!1)return void console[e(504)](e(541),t);if(-1===i)return void console[e(504)](e(153));const n=t[e(301)],o=n+t.particleCount,s=this[e(313)][e(160)][e(224)];for(let r=n;r<o;++r)s[e(294)][4*r]=0,s[e(294)][4*r+1]=0;this.emitters[e(399)](i,1),this[e(536)].splice(i,1);for(const r in this[e(313)])this[e(313)][e(563)](r)&&this[e(313)][r][e(399)](n,o);this[e(268)]-=t[e(268)],t[e(174)](),this[e(592)]=!0},p.Group[c(297)][c(141)]=function(){const t=c,e=this[t(320)],i=this[t(578)];if(e[t(184)])return e[t(573)]();if(i){const e=new(p[t(350)])(this[t(329)]);return this.addEmitter(e),e}return null},p[c(559)][c(297)][c(241)]=function(t){const e=c;if(t instanceof p[e(350)]!=!1)return t[e(349)](),this[e(320)].unshift(t),this;console[e(504)](e(203),t)},p[c(559)][c(297)][c(459)]=function(){return this[c(320)]},p.Group[c(297)][c(410)]=function(t,e,i){const n=c;let o;this._poolCreationSettings=e,this._createNewWhenPoolEmpty=!!i;for(let s=0;s<t;++s)o=Array[n(234)](e)?new(p[n(350)])(e[s]):new(p[n(350)])(e),this.addEmitter(o),this[n(241)](o);return this},p[c(559)][c(297)][c(139)]=function(t){const i=c,n=this[i(141)](),o=this;if(null!==n)return t instanceof e[i(247)]&&(n.position[i(526)][i(557)](t),n[i(323)][i(526)]=n[i(323)][i(526)]),n.enable(),setTimeout((()=>{const t=i;n.disable(),o[t(241)](n)}),1e3*Math[i(157)](n.duration,n[i(497)][i(526)]+n[i(497)][i(299)])),this;console[i(432)](i(173))},p[c(559)][c(297)][c(471)]=function(t,e){const i=c;if(typeof t===i(564)&&t>1)for(let n=0;n<t;++n)this[i(139)](e);else this[i(139)](e);return this},p[c(559)][c(297)][c(518)]=function(t){const e=c;this[e(305)][e(317)][e(526)]+=t,this[e(305)][e(168)][e(526)]=t},p.Group[c(297)][c(532)]=function(){const t=c;let e=this[t(200)],i=this[t(359)]-1,n=this[t(313)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},p[c(559)][c(297)][c(381)]=function(t){const e=c;let i,n,o,s=this[e(200)],r=this.attributeCount-1,a=this[e(313)],h=t[e(163)];for(;r>=0;--r)i=s[r],n=h[i],o=a[i],o[e(290)](n.min,n[e(157)]),o.flagUpdate()},p[c(559)][c(297)][c(296)]=function(t){const e=c;var i=this.emitters,n=i[e(184)],o=t||this.fixedTimeStep,s=this.attributeKeys,r=this[e(313)];if(this[e(518)](o),this[e(532)](),0!==n||!1!==this[e(592)]||!1!==this[e(590)]){for(var a,h=0;h<n;++h)(a=i[h])[e(296)](o),this[e(381)](a);if(!0===this[e(590)]){for(h=this.attributeCount-1;h>=0;--h)r[s[h]][e(385)]();this[e(590)]=!1}if(!0===this[e(592)]){for(h=this[e(359)]-1;h>=0;--h)r[s[h]].forceUpdateAll();this._attributesNeedRefresh=!1,this[e(590)]=!0}}},p[c(559)][c(297)][c(172)]=function(){const t=c;return this[t(382)].dispose(),this[t(213)].dispose(),this},p[c(350)]=function(t){const i=c,n=p[i(434)],s=n[i(506)],r=p[i(579)];(t=n[i(366)](t,s[i(537)],{}))[i(323)]=n[i(366)](t[i(323)],s[i(537)],{}),t[i(330)]=n[i(366)](t[i(330)],s[i(537)],{}),t[i(278)]=n.ensureTypedArg(t.acceleration,s.OBJECT,{}),t.radius=n[i(366)](t.radius,s.OBJECT,{}),t[i(524)]=n[i(366)](t[i(524)],s[i(537)],{}),t.rotation=n.ensureTypedArg(t.rotation,s[i(537)],{}),t[i(591)]=n[i(366)](t[i(591)],s[i(537)],{}),t[i(321)]=n.ensureTypedArg(t.opacity,s[i(537)],{}),t[i(273)]=n.ensureTypedArg(t[i(273)],s[i(537)],{}),t[i(517)]=n[i(366)](t[i(517)],s[i(537)],{}),t[i(383)]=n.ensureTypedArg(t[i(383)],s[i(537)],{}),t.maxAge=n[i(366)](t[i(497)],s[i(537)],{}),t[i(436)]&&console.warn(i(223)),this.uuid=e[i(134)][i(474)](),this[i(574)]=n.ensureTypedArg(t[i(574)],s[i(546)],p[i(150)][i(476)]),this[i(323)]={_value:n[i(483)](t[i(323)][i(526)],e[i(247)],new(e[i(247)])),_spread:n[i(483)](t[i(323)][i(299)],e[i(247)],new(e[i(247)])),_spreadClamp:n[i(483)](t[i(323)][i(400)],e[i(247)],new(e[i(247)])),_distribution:n[i(366)](t[i(323)][i(189)],s[i(546)],this[i(574)]),_randomise:n[i(366)](t.position[i(531)],s[i(396)],!1),_radius:n[i(366)](t[i(323)][i(170)],s[i(546)],10),_radiusScale:n.ensureInstanceOf(t[i(323)][i(156)],e[i(247)],new(e[i(247)])(1,1,1)),_distributionClamp:n[i(366)](t.position[i(433)],s.NUMBER,0)},this[i(330)]={_value:n[i(483)](t[i(330)][i(526)],e[i(247)],new o),_spread:n.ensureInstanceOf(t.velocity[i(299)],e[i(247)],new(e[i(247)])),_distribution:n[i(366)](t.velocity[i(189)],s.NUMBER,this[i(574)]),_randomise:n[i(366)](t[i(323)][i(531)],s[i(396)],!1)},this[i(278)]={_value:n[i(483)](t[i(278)][i(526)],o,new o),_spread:n[i(483)](t[i(278)][i(299)],e[i(247)],new(e[i(247)])),_distribution:n[i(366)](t[i(278)][i(189)],s.NUMBER,this[i(574)]),_randomise:n[i(366)](t.position[i(531)],s[i(396)],!1)},this[i(524)]={_value:n[i(366)](t[i(524)][i(526)],s[i(546)],0),_spread:n[i(366)](t[i(524)][i(299)],s[i(546)],0),_randomise:n.ensureTypedArg(t[i(323)][i(531)],s[i(396)],!1)},this[i(383)]={_value:n[i(366)](t[i(383)][i(526)],s[i(546)],0),_spread:n[i(366)](t[i(383)][i(299)],s[i(546)],0)},this[i(389)]={_axis:n[i(483)](t[i(389)].axis,e[i(247)],new(e[i(247)])(0,1,0)),_axisSpread:n[i(483)](t[i(389)].axisSpread,e[i(247)],new(e[i(247)])),_angle:n[i(366)](t[i(389)][i(517)],s[i(546)],0),_angleSpread:n.ensureTypedArg(t[i(389)].angleSpread,s[i(546)],0),_static:n[i(366)](t[i(389)].static,s.BOOLEAN,!1),_center:n[i(483)](t[i(389)][i(256)],e[i(247)],this.position[i(148)][i(258)]()),_randomise:n[i(366)](t[i(323)].randomise,s.BOOLEAN,!1)},this[i(497)]={_value:n[i(366)](t[i(497)][i(526)],s[i(546)],2),_spread:n[i(366)](t[i(497)].spread,s.NUMBER,0)},this.color={_value:n[i(185)](t.color.value,e[i(394)],new(e[i(394)])),_spread:n.ensureArrayInstanceOf(t.color.spread,e[i(247)],new o),_randomise:n[i(366)](t.position[i(531)],s[i(396)],!1)},this[i(321)]={_value:n[i(472)](t[i(321)][i(526)],s[i(546)],1),_spread:n[i(472)](t[i(321)][i(299)],s[i(546)],0),_randomise:n[i(366)](t[i(323)][i(531)],s.BOOLEAN,!1)},this.size={_value:n.ensureArrayTypedArg(t[i(273)][i(526)],s[i(546)],1),_spread:n[i(472)](t[i(273)][i(299)],s[i(546)],0),_randomise:n.ensureTypedArg(t[i(323)][i(531)],s.BOOLEAN,!1)},this[i(517)]={_value:n[i(472)](t[i(517)][i(526)],s[i(546)],0),_spread:n[i(472)](t[i(517)][i(299)],s[i(546)],0),_randomise:n[i(366)](t[i(323)][i(531)],s.BOOLEAN,!1)},this[i(268)]=n[i(366)](t.particleCount,s[i(546)],100),this[i(195)]=n[i(366)](t[i(195)],s[i(546)],null),this[i(179)]=n[i(366)](t.isStatic,s[i(396)],!1),this[i(386)]=n[i(366)](t[i(386)],s[i(546)],1),this.direction=n[i(366)](t[i(291)],s.NUMBER,1),this[i(346)]=n[i(366)](t[i(346)],s[i(396)],!0),this[i(340)]=0,this[i(413)]=0,this[i(301)]=0,this[i(429)]=0,this[i(584)]=0,this[i(437)]=0,this.group=null,this[i(313)]=null,this[i(339)]=null,this.resetFlags={position:n.ensureTypedArg(t[i(323)][i(531)],s[i(396)],!1)||n.ensureTypedArg(t[i(170)][i(531)],s[i(396)],!1),velocity:n[i(366)](t[i(330)].randomise,s[i(396)],!1),acceleration:n[i(366)](t[i(278)][i(531)],s.BOOLEAN,!1)||n.ensureTypedArg(t[i(524)][i(531)],s[i(396)],!1),rotation:n[i(366)](t.rotation.randomise,s[i(396)],!1),rotationCenter:n[i(366)](t[i(389)][i(531)],s.BOOLEAN,!1),size:n[i(366)](t.size.randomise,s[i(396)],!1),color:n[i(366)](t[i(591)][i(531)],s[i(396)],!1),opacity:n[i(366)](t[i(321)][i(531)],s[i(396)],!1),angle:n[i(366)](t[i(517)][i(531)],s[i(396)],!1)},this[i(302)]={},this[i(344)]={},this[i(191)]={maxAge:i(160),position:i(323),velocity:i(330),acceleration:"acceleration",drag:i(278),wiggle:i(160),rotation:i(389),size:i(273),color:i(591),opacity:i(321),angle:i(517)};for(const e in this.updateMap)this[i(191)][i(563)](e)&&(this.updateCounts[this[i(191)][e]]=0,this[i(302)][this[i(191)][e]]=!1,this[i(306)](this[e],e));this[i(163)]={},this.attributeKeys=null,this.attributeCount=0,n[i(481)](this[i(591)],r,r),n[i(481)](this[i(321)],r,r),n[i(481)](this.size,r,r),n[i(481)](this.angle,r,r)},p[c(350)][c(180)]=p[c(350)],p.Emitter[c(297)]._createGetterSetters=function(t,e){const i=c,n=this;for(const o in t)if(t.hasOwnProperty(o)){const s=o[i(353)]("_","");Object.defineProperty(t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=h,s=n[o(191)][e],r=this[t],a=p[o(579)];t===o(414)?(n.updateFlags.rotationCenter=!0,n[o(344)][o(207)]=0):"_randomise"===t?n[o(404)][s]=i:(n[o(302)][s]=!0,n.updateCounts[s]=0),n[o(144)][o(307)](),this[t]=i,Array[o(234)](r)&&p[o(434)][o(481)](n[e],a,a)}}(o)})}},p[c(350)][c(297)][c(362)]=function(t){const e=c;this.attributeKeys=t,this.attributeCount=t[e(184)];for(let i=this.attributeCount-1;i>=0;--i)this[e(163)][t[i]]={min:Number[e(154)],max:Number[e(243)]}},p.Emitter[c(297)][c(315)]=function(t){const e=c,i=this.particleCount;this[e(195)]?this.particlesPerSecond=i/(t<this.duration?t:this[e(195)]):this.particlesPerSecond=i/t},p[c(350)].prototype[c(479)]=function(t){const e=c;this[e(301)]=t,this.activationIndex=t,this.activationEnd=t+this[e(268)]},p[c(350)][c(297)][c(295)]=function(t,e){const i=c;switch(t){case i(323):this[i(266)](e);break;case i(330):case"acceleration":this._assignForceValue(e,t);break;case i(273):case"opacity":this[i(178)](e,t);break;case i(517):this[i(149)](e);break;case i(160):this[i(411)](e);break;case"rotation":this[i(332)](e);break;case i(591):this[i(257)](e)}},p[c(350)].prototype[c(266)]=function(t){const e=c,i=p[e(150)],n=p[e(434)],o=this[e(323)],s=this[e(313)].position,r=o[e(148)],a=o[e(322)];switch(o._distribution){case i[e(476)]:n.randomVector3(s,t,r,a,o._spreadClamp);break;case i[e(577)]:n.randomVector3OnSphere(s,t,r,o[e(232)],o[e(322)].x,o[e(435)],o[e(197)].x,o[e(218)]||this[e(268)]);break;case i[e(229)]:n.randomVector3OnDisc(s,t,r,o[e(232)],o[e(322)].x,o._radiusScale,o[e(197)].x);break;case i.LINE:n[e(460)](s,t,r,a)}},p[c(350)][c(297)][c(211)]=function(t,e){const i=c;let n,o,s,r,a,h=p[i(150)],l=p[i(434)],u=this[e],f=u._value,d=u._spread;switch(u[i(138)]){case h[i(476)]:l[i(507)](this[i(313)][e],t,f,d);break;case h[i(577)]:n=this[i(313)][i(323)][i(224)][i(294)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(392)](this[i(313)][e],t,o,s,r,this[i(323)][i(148)],u._value.x,u._spread.x);break;case h.DISC:n=this[i(313)][i(323)].typedArray[i(294)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(454)](this.attributes[e],t,o,s,r,this.position[i(148)],u[i(148)].x,u[i(322)].x);break;case h.LINE:l.randomVector3OnLine(this[i(313)][e],t,f,d)}if("acceleration"===e){const e=l.clamp(l[i(377)](this[i(524)][i(148)],this[i(524)][i(322)]),0,1);this[i(313)][i(278)][i(224)][i(294)][4*t+3]=e}},p[c(350)][c(297)][c(178)]=function(t,e){const i=c;let n,o=this[i(313)][e][i(224)],s=this[e],r=p.utils;r[i(521)](s[i(148)])&&r[i(521)](s[i(322)])?(n=Math[i(194)](r[i(377)](s[i(148)][0],s[i(322)][0])),o.setVec4Components(t,n,n,n,n)):o[i(519)](t,Math[i(194)](r[i(377)](s[i(148)][0],s[i(322)][0])),Math.abs(r[i(377)](s._value[1],s[i(322)][1])),Math[i(194)](r[i(377)](s[i(148)][2],s[i(322)][2])),Math.abs(r[i(377)](s[i(148)][3],s[i(322)][3])))},p[c(350)][c(297)][c(149)]=function(t){const e=c;let i,n=this[e(313)].angle[e(224)],o=this[e(517)],s=p.utils;s.arrayValuesAreEqual(o[e(148)])&&s.arrayValuesAreEqual(o._spread)?(i=s[e(377)](o[e(148)][0],o[e(322)][0]),n[e(519)](t,i,i,i,i)):n[e(519)](t,s[e(377)](o[e(148)][0],o[e(322)][0]),s[e(377)](o[e(148)][1],o[e(322)][1]),s.randomFloat(o[e(148)][2],o._spread[2]),s[e(377)](o[e(148)][3],o[e(322)][3]))},p[c(350)].prototype[c(411)]=function(t){const e=c;this[e(313)][e(160)][e(224)][e(519)](t,this.isStatic?1:0,0,Math[e(194)](p.utils[e(377)](this.maxAge[e(148)],this[e(497)]._spread)),p.utils.randomFloat(this[e(383)][e(148)],this[e(383)][e(322)]))},p[c(350)][c(297)][c(332)]=function(t){const e=c;this[e(313)].rotation[e(224)][e(384)](t,p[e(434)][e(553)](this.rotation._axis,this[e(389)][e(581)]),p[e(434)][e(377)](this[e(389)][e(263)],this.rotation[e(395)]),this[e(389)]._static?0:1),this.attributes[e(207)].typedArray[e(166)](t,this[e(389)][e(487)])},p[c(350)].prototype[c(257)]=function(t){const e=c;p[e(434)].randomColorAsHex(this.attributes[e(591)],t,this.color[e(148)],this[e(591)][e(322)])},p[c(350)].prototype[c(387)]=function(t){const e=c;let i,n,o=this[e(404)],s=this[e(302)],r=this[e(344)],a=this[e(200)];for(let c=this[e(359)]-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this[e(295)](i,t),this[e(287)](i,t),!0===n&&r[i]===this.particleCount?(s[i]=!1,r[i]=0):1==n&&++r[i])},p.Emitter.prototype[c(287)]=function(t,e){const i=c,n=this[i(163)][t];n.min=Math[i(451)](e,n[i(451)]),n[i(157)]=Math[i(157)](e,n.max)},p[c(350)][c(297)][c(532)]=function(){const t=c;let e,i=this[t(163)],n=this[t(368)],o=this[t(265)]-1;for(;o>=0;--o)e=n[o],i[e][t(451)]=Number.POSITIVE_INFINITY,i[e].max=Number.NEGATIVE_INFINITY},p[c(350)][c(297)][c(174)]=function(){const t=c;this[t(340)]=0,this[t(301)]=0,this[t(413)]=0,this.activeParticleCount=0,this[t(144)]=null,this[t(313)]=null,this.paramsArray=null,this[t(584)]=0},p.Emitter[c(297)]._decrementParticleCount=function(){--this[c(437)]},p[c(350)][c(297)][c(162)]=function(){++this[c(437)]},p[c(350)].prototype._checkParticleAges=function(t,e,i,n){const o=c;for(var s,r,a,h,l=e-1;l>=t;--l)0!==(h=i[s=4*l])&&(a=i[s+1],r=i[s+2],1===this.direction?(a+=n)>=r&&(a=0,h=0,this[o(217)]()):(a-=n)<=0&&(a=r,h=0,this._decrementParticleCount()),i[s]=h,i[s+1]=a,this[o(287)]("params",l))},p[c(350)][c(297)][c(380)]=function(t,e,i,n){const o=c,s=this[o(291)];for(var r,a,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[o(268)]||(this[o(162)](),i[r]=1,this[o(387)](h),a=n*(h-t),i[r+1]=-1===s?i[r+2]-a:a,this[o(287)](o(160),h))},p[c(350)][c(297)][c(296)]=function(t){const e=c;if(this.isStatic)return;null===this[e(339)]&&(this[e(339)]=this[e(313)][e(160)][e(224)][e(294)]);const i=this[e(301)],n=i+this.particleCount,o=this[e(339)],s=this[e(340)]*this[e(386)]*t,r=this[e(413)];if(this[e(532)](),this[e(262)](i,n,o,t),!1===this[e(346)])return void(this[e(584)]=0);if(null!==this[e(195)]&&this.age>this[e(195)])return this[e(346)]=!1,void(this.age=0);const a=1===this[e(268)]?r:0|r,h=Math.min(a+s,this.activationEnd),l=h-this.activationIndex|0,u=l>0?t/l:0;this[e(380)](a,h,o,u),this[e(413)]+=s,this[e(413)]>n&&(this[e(413)]=i),this.age+=t},p[c(350)][c(297)][c(349)]=function(t){const e=c;if(this[e(584)]=0,this[e(346)]=!1,!0===t){const t=this.attributeOffset,o=t+this.particleCount,s=this[e(339)],r=this[e(313)][e(160)][e(488)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(477)].offset=0,r[e(477)][e(456)]=-1,r.needsUpdate=!0}return this},p[c(350)][c(297)][c(209)]=function(){return this[c(346)]=!0,this},p[c(350)][c(297)][c(417)]=function(){return this[c(346)]=!1,this},p[c(350)].prototype[c(272)]=function(){const t=c;return null!==this[t(144)]?this[t(144)][t(240)](this):console[t(504)]("Emitter does not belong to a group, cannot remove."),this};const d=p;function m(t){function e(t){const i=h;if("string"==typeof t)return function(t){}[i(180)]("while (true) {}")[i(430)]("counter");1!==(""+t/t)[i(184)]||t%20==0?function(){return!0}.constructor(i(412)+"gger")[i(369)](i(219)):function(){return!1}[i(180)](i(412)+i(547))[i(430)](i(158)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{d as _};

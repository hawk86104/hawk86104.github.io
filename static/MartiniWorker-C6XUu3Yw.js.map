{"version":3,"file":"MartiniWorker-C6XUu3Yw.js","sources":["../src/plugins/simpleGIS/lib/threeSatelliteMap/Utils/Fetch.ts","../src/plugins/simpleGIS/lib/threeSatelliteMap/Providers/MartiniTerrainProvider/Martini.ts","../node_modules/@mapbox/tilebelt/dist/esm/index.js","../src/plugins/simpleGIS/lib/threeSatelliteMap/Utils/CoordUtil.ts","../src/plugins/simpleGIS/lib/threeSatelliteMap/Utils/TerrainUtil.ts","../src/plugins/simpleGIS/lib/threeSatelliteMap/Providers/MartiniTerrainProvider/MartiniTileUtil.ts","../src/plugins/simpleGIS/lib/threeSatelliteMap/Providers/MartiniTerrainProvider/MartiniWorker.ts"],"sourcesContent":["// TODO 需要一个数据转换器\nclass AbortableFetch {\n    static pendings = new Map<string, AbortableFetch>();\n\n    private _controller = new AbortController();\n    listeners = new Set<Fetch>();\n\n    fetch(url: string, init: RequestInit = {}) {\n        if (AbortableFetch.pendings.has(url)) {\n            return;\n        }\n\n        AbortableFetch.pendings.set(url, this);\n\n        fetch(url, {\n            ...init,\n            signal: this._controller.signal\n        }).then(res => {\n            this.listeners.forEach(item => item.resolve(res.clone()));\n        }).catch(e => {\n            this.listeners.forEach(item => item.reject(e));\n        }).finally(() => {\n            AbortableFetch.pendings.delete(url);\n        });\n    }\n\n    abort() {\n        this._controller.abort();\n    }\n}\n\nclass Fetch {\n    resolve: (value: Response | PromiseLike<Response>) => void;\n    reject: (reason?: any) => void;\n    promise: Promise<Response>;\n\n    constructor(public url: string, public init?: RequestInit) {\n        this.promise = new Promise<Response>((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n\n    ready() {\n        let abFetch = AbortableFetch.pendings.get(this.url);\n        if (!abFetch) {\n            abFetch = new AbortableFetch();\n            abFetch.fetch(this.url, this.init);\n        }\n        abFetch.listeners.add(this);\n        return this.promise;\n    }\n\n    abort() {\n        this.reject('User abort.');\n        const abFetch = AbortableFetch.pendings.get(this.url);\n        if (!abFetch) {\n            return;\n        }\n        abFetch.listeners.delete(this);\n        if (abFetch.listeners.size === 0) {\n            abFetch.abort();\n        }\n    }\n}\n\nexport { Fetch };","// https://github.com/mapbox/martini\nexport class Martini {\n    gridSize: number;\n    numTriangles: number;\n    numParentTriangles: number;\n    indices: Uint32Array;\n    coords: Uint16Array;\n\n    constructor(gridSize = 257) {\n        this.gridSize = gridSize;\n        const tileSize = gridSize - 1;\n        if (tileSize & (tileSize - 1)) throw new Error(\n            `Expected grid size to be 2^n+1, got ${gridSize}.`);\n\n        this.numTriangles = tileSize * tileSize * 2 - 2;\n        this.numParentTriangles = this.numTriangles - tileSize * tileSize;\n\n        this.indices = new Uint32Array(this.gridSize * this.gridSize);\n\n        // coordinates for all possible triangles in an RTIN tile\n        // 为锡瓦上的所有可能的三角形坐标\n        this.coords = new Uint16Array(this.numTriangles * 4);\n\n        // get triangle coordinates from its index in an implicit binary tree\n        // 从隐式二叉树的索引中获取三角形坐标\n        for (let i = 0; i < this.numTriangles; i++) {\n            let id = i + 2;\n            let ax = 0, ay = 0, bx = 0, by = 0, cx = 0, cy = 0;\n            if (id & 1) {\n                bx = by = cx = tileSize; // bottom-left triangle\n            } else {\n                ax = ay = cy = tileSize; // top-right triangle\n            }\n            while ((id >>= 1) > 1) {\n                const mx = (ax + bx) >> 1;\n                const my = (ay + by) >> 1;\n\n                if (id & 1) { // left half\n                    bx = ax; by = ay;\n                    ax = cx; ay = cy;\n                } else { // right half\n                    ax = bx; ay = by;\n                    bx = cx; by = cy;\n                }\n                cx = mx; cy = my;\n            }\n            const k = i * 4;\n            this.coords[k + 0] = ax;\n            this.coords[k + 1] = ay;\n            this.coords[k + 2] = bx;\n            this.coords[k + 3] = by;\n        }\n    }\n\n    createTile(terrain: Float32Array) {\n        return new MartiniTile(terrain, this);\n    }\n}\n\nexport class MartiniTile {\n    terrain: Float32Array;\n    martini: Martini;\n    errors: Float32Array;\n\n    constructor(terrain: Float32Array, martini: Martini) {\n        const size = martini.gridSize;\n        if (terrain.length !== size * size) throw new Error(\n            `Expected terrain data of length ${size * size} (${size} x ${size}), got ${terrain.length}.`);\n\n        this.terrain = terrain;\n        this.martini = martini;\n        this.errors = new Float32Array(terrain.length);\n        this.update();\n    }\n\n    update() {\n        const { numTriangles, numParentTriangles, coords, gridSize: size } = this.martini;\n        const { terrain, errors } = this;\n\n        // iterate over all possible triangles, starting from the smallest level\n        // 从最小级别开始迭代所有可能的三角形\n        for (let i = numTriangles - 1; i >= 0; i--) {\n            const k = i * 4;\n            const ax = coords[k + 0];\n            const ay = coords[k + 1];\n            const bx = coords[k + 2];\n            const by = coords[k + 3];\n            const mx = (ax + bx) >> 1;\n            const my = (ay + by) >> 1;\n            const cx = mx + my - ay;\n            const cy = my + ax - mx;\n\n            // calculate error in the middle of the long edge of the triangle\n            // 计算三角形长边的中间的误差\n            const interpolatedHeight = (terrain[ay * size + ax] + terrain[by * size + bx]) / 2;\n            const middleIndex = my * size + mx;\n            const middleError = Math.abs(interpolatedHeight - terrain[middleIndex]);\n\n            errors[middleIndex] = Math.max(errors[middleIndex], middleError);\n\n            if (i < numParentTriangles) { // bigger triangles; accumulate error with children 较大的三角形;用孩子累积错误\n                const leftChildIndex = ((ay + cy) >> 1) * size + ((ax + cx) >> 1);\n                const rightChildIndex = ((by + cy) >> 1) * size + ((bx + cx) >> 1);\n                errors[middleIndex] = Math.max(errors[middleIndex], errors[leftChildIndex], errors[rightChildIndex]);\n            }\n        }\n    }\n\n    getMesh(maxError = 0) {\n        const { gridSize: size, indices } = this.martini;\n        const { errors } = this;\n        let numVertices = 0;\n        let numTriangles = 0;\n        const max = size - 1;\n\n        // use an index grid to keep track of vertices that were already used to avoid duplication\n        // 使用索引网格来跟踪已用于避免重复的顶点\n        indices.fill(0);\n\n        // retrieve mesh in two stages that both traverse the error map:\n        // 在两个阶段检索网格，两阶段都遍历错误映射：\n        // - countElements: find used vertices (and assign each an index), and count triangles (for minimum allocation)\n        // - countElements: 查找使用的顶点（并分配每个索引），并计算三角形（用于最小分配）\n        // - processTriangle: fill the allocated vertices & triangles typed arrays\n        // - processTriangle: 填充分配的顶点和三角形类型阵列\n\n        function countElements(ax: number, ay: number, bx: number, by: number, cx: number, cy: number) {\n            const mx = (ax + bx) >> 1;\n            const my = (ay + by) >> 1;\n\n            if (Math.abs(ax - cx) + Math.abs(ay - cy) > 1 && errors[my * size + mx] > maxError) {\n                countElements(cx, cy, ax, ay, mx, my);\n                countElements(bx, by, cx, cy, mx, my);\n            } else {\n                indices[ay * size + ax] = indices[ay * size + ax] || ++numVertices;\n                indices[by * size + bx] = indices[by * size + bx] || ++numVertices;\n                indices[cy * size + cx] = indices[cy * size + cx] || ++numVertices;\n                numTriangles++;\n            }\n        }\n        countElements(0, 0, max, max, max, 0);\n        countElements(max, max, 0, 0, 0, max);\n\n        const vertices = new Uint16Array(numVertices * 2);\n        const triangles = new Uint32Array(numTriangles * 3);\n        let triIndex = 0;\n\n        function processTriangle(ax: number, ay: number, bx: number, by: number, cx: number, cy: number) {\n            const mx = (ax + bx) >> 1;\n            const my = (ay + by) >> 1;\n\n            if (Math.abs(ax - cx) + Math.abs(ay - cy) > 1 && errors[my * size + mx] > maxError) {\n                // triangle doesn't approximate the surface well enough; drill down further\n                processTriangle(cx, cy, ax, ay, mx, my);\n                processTriangle(bx, by, cx, cy, mx, my);\n\n            } else {\n                // add a triangle\n                const a = indices[ay * size + ax] - 1;\n                const b = indices[by * size + bx] - 1;\n                const c = indices[cy * size + cx] - 1;\n\n                vertices[2 * a] = ax;\n                vertices[2 * a + 1] = ay;\n\n                vertices[2 * b] = bx;\n                vertices[2 * b + 1] = by;\n\n                vertices[2 * c] = cx;\n                vertices[2 * c + 1] = cy;\n\n                triangles[triIndex++] = a;\n                triangles[triIndex++] = b;\n                triangles[triIndex++] = c;\n            }\n        }\n        processTriangle(0, 0, max, max, max, 0);\n        processTriangle(max, max, 0, 0, 0, max);\n\n        return { vertices, triangles };\n    }\n\n    // https://github.com/mapbox/martini/pull/12/commits/4677d0c5cfe446ccc96d3982ff4f442cddba5063\n    getMeshWithSkirts(maxError = 0) {\n        const { gridSize: size, indices } = this.martini;\n        const { errors } = this;\n        let numVertices = 0;\n        let numTriangles = 0;\n        const max = size - 1;\n        let aIndex, bIndex, cIndex = 0;\n        // Skirt indices\n        let leftSkirtIndices: number[] = [];\n        let rightSkirtIndices: number[] = [];\n        let bottomSkirtIndices: number[] = [];\n        let topSkirtIndices: number[] = [];\n        // use an index grid to keep track of vertices that were already used to avoid duplication\n        indices.fill(0);\n\n        // retrieve mesh in two stages that both traverse the error map:\n        // - countElements: find used vertices (and assign each an index), and count triangles (for minimum allocation)\n        // - processTriangle: fill the allocated vertices & triangles typed arrays\n        function countElements(ax: number, ay: number, bx: number, by: number, cx: number, cy: number) {\n            const mx = (ax + bx) >> 1;\n            const my = (ay + by) >> 1;\n\n            if (Math.abs(ax - cx) + Math.abs(ay - cy) > 1 && errors[my * size + mx] > maxError) {\n                countElements(cx, cy, ax, ay, mx, my);\n                countElements(bx, by, cx, cy, mx, my);\n            } else {\n                aIndex = ay * size + ax;\n                bIndex = by * size + bx;\n                cIndex = cy * size + cx;\n\n                if (indices[aIndex] === 0) {\n                    if (ax === 0)\n                        leftSkirtIndices.push(numVertices);\n                    else if (ax === max) {\n                        rightSkirtIndices.push(numVertices);\n                    }\n                    if (ay === 0)\n                        bottomSkirtIndices.push(numVertices);\n                    else if (ay === max)\n                        topSkirtIndices.push(numVertices);\n                    indices[aIndex] = ++numVertices;\n                }\n                if (indices[bIndex] === 0) {\n                    if (bx === 0)\n                        leftSkirtIndices.push(numVertices);\n                    else if (bx === max)\n                        rightSkirtIndices.push(numVertices);\n                    if (by === 0)\n                        bottomSkirtIndices.push(numVertices);\n                    else if (by === max)\n                        topSkirtIndices.push(numVertices);\n                    indices[bIndex] = ++numVertices;\n                }\n                if (indices[cIndex] === 0) {\n                    if (cx === 0)\n                        leftSkirtIndices.push(numVertices);\n                    else if (cx === max)\n                        rightSkirtIndices.push(numVertices);\n                    if (cy === 0)\n                        bottomSkirtIndices.push(numVertices);\n                    else if (cy === max)\n                        topSkirtIndices.push(numVertices);\n                    indices[cIndex] = ++numVertices;\n\n                }\n                numTriangles++;\n            }\n        }\n        countElements(0, 0, max, max, max, 0);\n        countElements(max, max, 0, 0, 0, max);\n\n        const numTotalVertices = (\n            numVertices\n            + leftSkirtIndices.length\n            + rightSkirtIndices.length\n            + bottomSkirtIndices.length\n            + topSkirtIndices.length) * 2;\n        const numTotalTriangles = (\n            numTriangles\n            + ((leftSkirtIndices.length - 1) * 2)\n            + ((rightSkirtIndices.length - 1) * 2)\n            + ((bottomSkirtIndices.length - 1) * 2)\n            + ((topSkirtIndices.length - 1) * 2)) * 3;\n\n        const vertices = new Uint16Array(numTotalVertices);\n        const triangles = new Uint32Array(numTotalTriangles);\n\n        let triIndex = 0;\n        function processTriangle(ax: number, ay: number, bx: number, by: number, cx: number, cy: number) {\n            const mx = (ax + bx) >> 1;\n            const my = (ay + by) >> 1;\n\n            if (Math.abs(ax - cx) + Math.abs(ay - cy) > 1 && errors[my * size + mx] > maxError) {\n                // triangle doesn't approximate the surface well enough; drill down further\n                processTriangle(cx, cy, ax, ay, mx, my);\n                processTriangle(bx, by, cx, cy, mx, my);\n\n            } else {\n                // add a triangle\n                const a = indices[ay * size + ax] - 1;\n                const b = indices[by * size + bx] - 1;\n                const c = indices[cy * size + cx] - 1;\n\n                vertices[2 * a] = ax;\n                vertices[2 * a + 1] = ay;\n\n                vertices[2 * b] = bx;\n                vertices[2 * b + 1] = by;\n\n                vertices[2 * c] = cx;\n                vertices[2 * c + 1] = cy;\n                triangles[triIndex++] = a;\n                triangles[triIndex++] = b;\n                triangles[triIndex++] = c;\n            }\n        }\n        processTriangle(0, 0, max, max, max, 0);\n        processTriangle(max, max, 0, 0, 0, max);\n\n        // Sort skirt indices to create adjacent triangles\n        leftSkirtIndices.sort((a, b) => {\n            return vertices[2 * a + 1] - vertices[2 * b + 1];\n        });\n\n        rightSkirtIndices.sort((a, b) => {\n            // Reverse (b - a) to match triangle winding\n            return vertices[2 * b + 1] - vertices[2 * a + 1];\n        });\n\n        bottomSkirtIndices.sort((a, b) => {\n            return vertices[2 * b] - vertices[2 * a];\n        });\n\n        topSkirtIndices.sort((a, b) => {\n            // Reverse (b - a) to match triangle winding\n            return vertices[2 * a] - vertices[2 * b];\n        });\n\n        let skirtIndex = numVertices * 2;\n        let currIndex, nextIndex, currentSkirt, nextSkirt, skirtLength = 0;\n\n        // Add skirt vertices from index of last mesh vertex\n        function constructSkirt(skirt: number[]) {\n            skirtLength = skirt.length;\n            // Loop through indices in groups of two to generate triangles\n            for (var i = 0; i < skirtLength - 1; i++) {\n                currIndex = skirt[i];\n                nextIndex = skirt[i + 1];\n                currentSkirt = skirtIndex / 2;\n                nextSkirt = (skirtIndex + 2) / 2;\n                vertices[skirtIndex++] = vertices[2 * currIndex];\n                vertices[skirtIndex++] = vertices[2 * currIndex + 1];\n\n                triangles[triIndex++] = currIndex;\n                triangles[triIndex++] = currentSkirt;\n                triangles[triIndex++] = nextIndex;\n\n                triangles[triIndex++] = currentSkirt;\n                triangles[triIndex++] = nextSkirt;\n                triangles[triIndex++] = nextIndex;\n            }\n            // Add vertices of last skirt not added above (i < skirtLength - 1)\n            vertices[skirtIndex++] = vertices[2 * skirt[skirtLength - 1]];\n            vertices[skirtIndex++] = vertices[2 * skirt[skirtLength - 1] + 1];\n        }\n\n        constructSkirt(leftSkirtIndices);\n        constructSkirt(rightSkirtIndices);\n        constructSkirt(bottomSkirtIndices);\n        constructSkirt(topSkirtIndices);\n\n        // Return vertices and triangles and index into vertices array where skirts start\n        return { vertices, triangles, numVerticesWithoutSkirts: numVertices };\n    }\n}","const d2r = Math.PI / 180;\nconst r2d = 180 / Math.PI;\nfunction tile2lon(x, z) {\n    return (x / Math.pow(2, z)) * 360 - 180;\n}\nfunction tile2lat(y, z) {\n    const n = Math.PI - (2 * Math.PI * y) / Math.pow(2, z);\n    return r2d * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n/**\n * Get the bbox of a tile\n *\n * const bbox = tileToBBOX([5, 10, 10])\n * //=bbox\n */\nexport function tileToBBOX(tile) {\n    const e = tile2lon(tile[0] + 1, tile[2]);\n    const w = tile2lon(tile[0], tile[2]);\n    const s = tile2lat(tile[1] + 1, tile[2]);\n    const n = tile2lat(tile[1], tile[2]);\n    return [w, s, e, n];\n}\n/**\n * Get a geojson representation of a tile\n *\n * const poly = tileToGeoJSON([5, 10, 10])\n * //=poly\n */\nexport function tileToGeoJSON(tile) {\n    const bbox = tileToBBOX(tile);\n    return {\n        type: 'Polygon',\n        coordinates: [\n            [\n                [bbox[0], bbox[3]],\n                [bbox[0], bbox[1]],\n                [bbox[2], bbox[1]],\n                [bbox[2], bbox[3]],\n                [bbox[0], bbox[3]],\n            ],\n        ],\n    };\n}\n/**\n * Get the tile for a point at a specified zoom level\n *\n * const tile = pointToTile(1, 1, 20)\n * //=tile\n */\nexport function pointToTile(lon, lat, z) {\n    const tile = pointToTileFraction(lon, lat, z);\n    tile[0] = Math.floor(tile[0]);\n    tile[1] = Math.floor(tile[1]);\n    return tile;\n}\n/**\n * Get the precise fractional tile location for a point at a zoom level\n *\n * const tile = pointToTileFraction(30.5, 50.5, 15)\n * //=tile\n */\nexport function pointToTileFraction(lon, lat, z) {\n    const sin = Math.sin(lat * d2r);\n    const z2 = Math.pow(2, z);\n    let x = z2 * (lon / 360 + 0.5);\n    const y = z2 * (0.5 - (0.25 * Math.log((1 + sin) / (1 - sin))) / Math.PI);\n    // Wrap Tile X\n    x = x % z2;\n    if (x < 0)\n        x = x + z2;\n    return [x, y, z];\n}\n/**\n * Get the 4 tiles one zoom level higher\n *\n * const tiles = getChildren([5, 10, 10])\n * //=tiles\n */\nexport function getChildren(tile) {\n    return [\n        [tile[0] * 2, tile[1] * 2, tile[2] + 1],\n        [tile[0] * 2 + 1, tile[1] * 2, tile[2] + 1],\n        [tile[0] * 2 + 1, tile[1] * 2 + 1, tile[2] + 1],\n        [tile[0] * 2, tile[1] * 2 + 1, tile[2] + 1],\n    ];\n}\n/**\n * Get the tile one zoom level lower\n *\n * const tile = getParent([5, 10, 10])\n * //=tile\n */\nexport function getParent(tile) {\n    return [tile[0] >> 1, tile[1] >> 1, tile[2] - 1];\n}\nexport function getSiblings(tile) {\n    return getChildren(getParent(tile));\n}\n/**\n * Get the 3 sibling tiles for a tile\n *\n * const tiles = getSiblings([5, 10, 10])\n * //=boolean\n */\nexport function hasSiblings(tile, tiles) {\n    const siblings = getSiblings(tile);\n    for (let i = 0; i < siblings.length; i++) {\n        if (!hasTile(tiles, siblings[i]))\n            return false;\n    }\n    return true;\n}\n/**\n * Check to see if an array of tiles contains a particular tile\n *\n * const tiles = [\n *     [0, 0, 5],\n *     [0, 1, 5],\n *     [1, 1, 5],\n *     [1, 0, 5]\n * ]\n * hasTile(tiles, [0, 0, 5])\n * //=boolean\n */\nexport function hasTile(tiles, tile) {\n    for (let i = 0; i < tiles.length; i++) {\n        if (tilesEqual(tiles[i], tile))\n            return true;\n    }\n    return false;\n}\n/**\n * Check to see if two tiles are the same\n *\n * tilesEqual([0, 1, 5], [0, 0, 5])\n * //=boolean\n */\nexport function tilesEqual(tile1, tile2) {\n    return (tile1[0] === tile2[0] && tile1[1] === tile2[1] && tile1[2] === tile2[2]);\n}\n/**\n * Get the quadkey for a tile\n *\n * const quadkey = tileToQuadkey([0, 1, 5])\n * //=quadkey\n */\nexport function tileToQuadkey(tile) {\n    let index = '';\n    for (let z = tile[2]; z > 0; z--) {\n        let b = 0;\n        const mask = 1 << (z - 1);\n        if ((tile[0] & mask) !== 0)\n            b++;\n        if ((tile[1] & mask) !== 0)\n            b += 2;\n        index += b.toString();\n    }\n    return index;\n}\n/**\n * Get the tile for a quadkey\n *\n * const tile = quadkeyToTile('00001033')\n * //=tile\n */\nexport function quadkeyToTile(quadkey) {\n    let x = 0;\n    let y = 0;\n    const z = quadkey.length;\n    for (let i = z; i > 0; i--) {\n        const mask = 1 << (i - 1);\n        const q = +quadkey[z - i];\n        if (q === 1)\n            x |= mask;\n        if (q === 2)\n            y |= mask;\n        if (q === 3) {\n            x |= mask;\n            y |= mask;\n        }\n    }\n    return [x, y, z];\n}\nfunction getBboxZoom(bbox) {\n    const MAX_ZOOM = 28;\n    for (let z = 0; z < MAX_ZOOM; z++) {\n        const mask = 1 << (32 - (z + 1));\n        if ((bbox[0] & mask) !== (bbox[2] & mask) ||\n            (bbox[1] & mask) !== (bbox[3] & mask)) {\n            return z;\n        }\n    }\n    return MAX_ZOOM;\n}\n/**\n * Get the smallest tile to cover a bbox\n *\n * const tile = bboxToTile([ -178, 84, -177, 85 ])\n * //=tile\n */\nexport function bboxToTile(bboxCoords) {\n    const min = pointToTile(bboxCoords[0], bboxCoords[1], 32);\n    const max = pointToTile(bboxCoords[2], bboxCoords[3], 32);\n    const bbox = [min[0], min[1], max[0], max[1]];\n    const z = getBboxZoom(bbox);\n    if (z === 0)\n        return [0, 0, 0];\n    const x = bbox[0] >>> (32 - z);\n    const y = bbox[1] >>> (32 - z);\n    return [x, y, z];\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUM7QUFDMUIsTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7QUFJMUIsU0FBUyxRQUFRLENBQUMsQ0FBUyxFQUFFLENBQVM7SUFDcEMsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDMUMsQ0FBQztBQUVELFNBQVMsUUFBUSxDQUFDLENBQVMsRUFBRSxDQUFTO0lBQ3BDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN2RCxPQUFPLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxDQUFDO0FBRUQ7Ozs7O0dBS0c7QUFDSCxNQUFNLFVBQVUsVUFBVSxDQUFDLElBQVU7SUFDbkMsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekMsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNy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QUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDM0MsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQy9DLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQzVDLENBQUM7QUFDSixDQUFDO0FBRUQ7Ozs7O0dBS0c7QUFDSCxNQUFNLFVBQVUsU0FBUyxDQUFDLElBQVU7SUFDbEMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDbkQsQ0FBQztBQUVELE1BQU0sVUFBVSxXQUFXLENBQUMsSUFBVTtJQUNwQyxPQUFPLFdBQVcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN0QyxDQUFDO0FBRUQ7Ozs7O0dBS0c7QUFDSCxNQUFNLFVBQVUsV0FBVyxDQUFDLElBQVUsRUFBRSxLQUFhO0lBQ25ELE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFB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RSxDQUFDLENBQUMsQ0FBQztJQUM5QixNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDL0IsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQy9CLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ25CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJCb3gsIEdlb21ldHJ5IH0gZnJvbSAnZ2VvanNvbic7XG5cbmNvbnN0IGQyciA9IE1hdGguUEkgLyAxODA7XG5jb25zdCByMmQgPSAxODAgLyBNYXRoLlBJO1xuXG5leHBvcnQgdHlwZSBUaWxlID0gW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuXG5mdW5jdGlvbiB0aWxlMmxvbih4OiBudW1iZXIsIHo6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiAoeCAvIE1hdGgucG93KDIsIHopKSAqIDM2MCAtIDE4MDtcbn1cblxuZnVuY3Rpb24gdGlsZTJsYXQoeTogbnVtYmVyLCB6OiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBuID0gTWF0aC5QSSAtICgyICogTWF0aC5QSSAqIHkpIC8gTWF0aC5wb3coMiwgeik7XG4gIHJldHVybiByMmQgKiBNYXRoLmF0YW4oMC41ICogKE1hdGguZXhwKG4pIC0gTWF0aC5leHAoLW4pKSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBiYm94IG9mIGEgdGlsZVxuICpcbiAqIGNvbnN0IGJib3ggPSB0aWxlVG9CQk9YKFs1LCAxMCwgMTBdKVxuICogLy89YmJveFxuICovXG5leHBvcnQgZnVuY3Rpb24gdGlsZVRvQkJPWCh0aWxlOiBUaWxlKTogQkJveCB7XG4gIGNvbnN0IGUgPSB0aWxlMmxvbih0aWxlWzBdICsgMSwgdGlsZVsyXSk7XG4gIGNvbnN0IHcgPSB0aWxlMmxvbih0aWxlWzBdLCB0aWxlWzJdKTtcbiAgY29uc3QgcyA9IHRpbGUybGF0KHRpbGVbMV0gKyAxLCB0aWxlWzJdKTtcbiAgY29uc3QgbiA9IHRpbGUybGF0KHRpbGVbMV0sIHRpbGVbMl0pO1xuICByZXR1cm4gW3csIHMsIGUsIG5dO1xufVxuXG4vKipcbiAqIEdldCBhIGdlb2pzb24gcmVwcmVzZW50YXRpb24gb2YgYSB0aWxlXG4gKlxuICogY29uc3QgcG9seSA9IHRpbGVUb0dlb0pTT04oWzUsIDEwLCAxMF0pXG4gKiAvLz1wb2x5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aWxlVG9HZW9KU09OKHRpbGU6IFRpbGUpOiBHZW9tZXRyeSB7XG4gIGNvbnN0IGJib3ggPSB0aWxlVG9CQk9YKHRpbGUpO1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICBjb29yZGluYXRlczogW1xuICAgICAgW1xuICAgICAgICBbYmJveFswXSwgYmJveFszXV0sXG4gICAgICAgIFtiYm94WzBdLCBiYm94WzFdXSxcbiAgICAgICAgW2Jib3hbMl0sIGJib3hbMV1dLFxuICAgICAgICBbYmJveFsyXSwgYmJveFszXV0sXG4gICAgICAgIFtiYm94WzBdLCBiYm94WzNdXSxcbiAgICAgIF0sXG4gICAgXSxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHRpbGUgZm9yIGEgcG9pbnQgYXQgYSBzcGVjaWZpZWQgem9vbSBsZXZlbFxuICpcbiAqIGNvbnN0IHRpbGUgPSBwb2ludFRvVGlsZSgxLCAxLCAyMClcbiAqIC8vPXRpbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBvaW50VG9UaWxlKGxvbjogbnVtYmVyLCBsYXQ6IG51bWJlciwgejogbnVtYmVyKTogVGlsZSB7XG4gIGNvbnN0IHRpbGUgPSBwb2ludFRvVGlsZUZyYWN0aW9uKGxvbiwgbGF0LCB6KTtcbiAgdGlsZVswXSA9IE1hdGguZmxvb3IodGlsZVswXSk7XG4gIHRpbGVbMV0gPSBNYXRoLmZsb29yKHRpbGVbMV0pO1xuICByZXR1cm4gdGlsZTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHByZWNpc2UgZnJhY3Rpb25hbCB0aWxlIGxvY2F0aW9uIGZvciBhIHBvaW50IGF0IGEgem9vbSBsZXZlbFxuICpcbiAqIGNvbnN0IHRpbGUgPSBwb2ludFRvVGlsZUZyYWN0aW9uKDMwLjUsIDUwLjUsIDE1KVxuICogLy89dGlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcG9pbnRUb1RpbGVGcmFjdGlvbihsb246IG51bWJlciwgbGF0OiBudW1iZXIsIHo6IG51bWJlcik6IFRpbGUge1xuICBjb25zdCBzaW4gPSBNYXRoLnNpbihsYXQgKiBkMnIpO1xuICBjb25zdCB6MiA9IE1hdGgucG93KDIsIHopO1xuICBsZXQgeCA9IHoyICogKGxvbiAvIDM2MCArIDAuNSk7XG4gIGNvbnN0IHkgPSB6MiAqICgwLjUgLSAoMC4yNSAqIE1hdGgubG9nKCgxICsgc2luKSAvICgxIC0gc2luKSkpIC8gTWF0aC5QSSk7XG5cbiAgLy8gV3JhcCBUaWxlIFhcbiAgeCA9IHggJSB6MjtcbiAgaWYgKHggPCAwKSB4ID0geCArIHoyO1xuICByZXR1cm4gW3gsIHksIHpdO1xufVxuXG4vKipcbiAqIEdldCB0aGUgNCB0aWxlcyBvbmUgem9vbSBsZXZlbCBoaWdoZXJcbiAqXG4gKiBjb25zdCB0aWxlcyA9IGdldENoaWxkcmVuKFs1LCAxMCwgMTBdKVxuICogLy89dGlsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENoaWxkcmVuKHRpbGU6IFRpbGUpOiBUaWxlW10ge1xuICByZXR1cm4gW1xuICAgIFt0aWxlWzBdICogMiwgdGlsZVsxXSAqIDIsIHRpbGVbMl0gKyAxXSxcbiAgICBbdGlsZVswXSAqIDIgKyAxLCB0aWxlWzFdICogMiwgdGlsZVsyXSArIDFdLFxuICAgIFt0aWxlWzBdICogMiArIDEsIHRpbGVbMV0gKiAyICsgMSwgdGlsZVsyXSArIDFdLFxuICAgIFt0aWxlWzBdICogMiwgdGlsZVsxXSAqIDIgKyAxLCB0aWxlWzJdICsgMV0sXG4gIF07XG59XG5cbi8qKlxuICogR2V0IHRoZSB0aWxlIG9uZSB6b29tIGxldmVsIGxvd2VyXG4gKlxuICogY29uc3QgdGlsZSA9IGdldFBhcmVudChbNSwgMTAsIDEwXSlcbiAqIC8vPXRpbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmVudCh0aWxlOiBUaWxlKTogVGlsZSB7XG4gIHJldHVybiBbdGlsZVswXSA+PiAxLCB0aWxlWzFdID4+IDEsIHRpbGVbMl0gLSAxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpYmxpbmdzKHRpbGU6IFRpbGUpOiBUaWxlW10ge1xuICByZXR1cm4gZ2V0Q2hpbGRyZW4oZ2V0UGFyZW50KHRpbGUpKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIDMgc2libGluZyB0aWxlcyBmb3IgYSB0aWxlXG4gKlxuICogY29uc3QgdGlsZXMgPSBnZXRTaWJsaW5ncyhbNSwgMTAsIDEwXSlcbiAqIC8vPWJvb2xlYW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1NpYmxpbmdzKHRpbGU6IFRpbGUsIHRpbGVzOiBUaWxlW10pOiBib29sZWFuIHtcbiAgY29uc3Qgc2libGluZ3MgPSBnZXRTaWJsaW5ncyh0aWxlKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWJsaW5ncy5sZW5ndGg7IGkrKykge1xuICAgIGlmICghaGFzVGlsZSh0aWxlcywgc2libGluZ3NbaV0pKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQ2hlY2sgdG8gc2VlIGlmIGFuIGFycmF5IG9mIHRpbGVzIGNvbnRhaW5zIGEgcGFydGljdWxhciB0aWxlXG4gKlxuICogY29uc3QgdGlsZXMgPSBbXG4gKiAgICAgWzAsIDAsIDVdLFxuICogICAgIFswLCAxLCA1XSxcbiAqICAgICBbMSwgMSwgNV0sXG4gKiAgICAgWzEsIDAsIDVdXG4gKiBdXG4gKiBoYXNUaWxlKHRpbGVzLCBbMCwgMCwgNV0pXG4gKiAvLz1ib29sZWFuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNUaWxlKHRpbGVzOiBUaWxlW10sIHRpbGU6IFRpbGUpOiBib29sZWFuIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aWxlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0aWxlc0VxdWFsKHRpbGVzW2ldLCB0aWxlKSkgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENoZWNrIHRvIHNlZSBpZiB0d28gdGlsZXMgYXJlIHRoZSBzYW1lXG4gKlxuICogdGlsZXNFcXVhbChbMCwgMSwgNV0sIFswLCAwLCA1XSlcbiAqIC8vPWJvb2xlYW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbGVzRXF1YWwodGlsZTE6IFRpbGUsIHRpbGUyOiBUaWxlKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgdGlsZTFbMF0gPT09IHRpbGUyWzBdICYmIHRpbGUxWzFdID09PSB0aWxlMlsxXSAmJiB0aWxlMVsyXSA9PT0gdGlsZTJbMl1cbiAgKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHF1YWRrZXkgZm9yIGEgdGlsZVxuICpcbiAqIGNvbnN0IHF1YWRrZXkgPSB0aWxlVG9RdWFka2V5KFswLCAxLCA1XSlcbiAqIC8vPXF1YWRrZXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbGVUb1F1YWRrZXkodGlsZTogVGlsZSk6IHN0cmluZyB7XG4gIGxldCBpbmRleCA9ICcnO1xuICBmb3IgKGxldCB6ID0gdGlsZVsyXTsgeiA+IDA7IHotLSkge1xuICAgIGxldCBiID0gMDtcbiAgICBjb25zdCBtYXNrID0gMSA8PCAoeiAtIDEpO1xuICAgIGlmICgodGlsZVswXSAmIG1hc2spICE9PSAwKSBiKys7XG4gICAgaWYgKCh0aWxlWzFdICYgbWFzaykgIT09IDApIGIgKz0gMjtcbiAgICBpbmRleCArPSBiLnRvU3RyaW5nKCk7XG4gIH1cbiAgcmV0dXJuIGluZGV4O1xufVxuXG4vKipcbiAqIEdldCB0aGUgdGlsZSBmb3IgYSBxdWFka2V5XG4gKlxuICogY29uc3QgdGlsZSA9IHF1YWRrZXlUb1RpbGUoJzAwMDAxMDMzJylcbiAqIC8vPXRpbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YWRrZXlUb1RpbGUocXVhZGtleTogc3RyaW5nKTogVGlsZSB7XG4gIGxldCB4ID0gMDtcbiAgbGV0IHkgPSAwO1xuICBjb25zdCB6ID0gcXVhZGtleS5sZW5ndGg7XG5cbiAgZm9yIChsZXQgaSA9IHo7IGkgPiAwOyBpLS0pIHtcbiAgICBjb25zdCBtYXNrID0gMSA8PCAoaSAtIDEpO1xuICAgIGNvbnN0IHEgPSArcXVhZGtleVt6IC0gaV07XG4gICAgaWYgKHEgPT09IDEpIHggfD0gbWFzaztcbiAgICBpZiAocSA9PT0gMikgeSB8PSBtYXNrO1xuICAgIGlmIChxID09PSAzKSB7XG4gICAgICB4IHw9IG1hc2s7XG4gICAgICB5IHw9IG1hc2s7XG4gICAgfVxuICB9XG4gIHJldHVybiBbeCwgeSwgel07XG59XG5cbmZ1bmN0aW9uIGdldEJib3hab29tKGJib3g6IEJCb3gpOiBudW1iZXIge1xuICBjb25zdCBNQVhfWk9PTSA9IDI4O1xuICBmb3IgKGxldCB6ID0gMDsgeiA8IE1BWF9aT09NOyB6KyspIHtcbiAgICBjb25zdCBtYXNrID0gMSA8PCAoMzIgLSAoeiArIDEpKTtcbiAgICBpZiAoXG4gICAgICAoYmJveFswXSAmIG1hc2spICE9PSAoYmJveFsyXSAmIG1hc2spIHx8XG4gICAgICAoYmJveFsxXSAmIG1hc2spICE9PSAoYmJveFszXSAmIG1hc2spXG4gICAgKSB7XG4gICAgICByZXR1cm4gejtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gTUFYX1pPT007XG59XG5cbi8qKlxuICogR2V0IHRoZSBzbWFsbGVzdCB0aWxlIHRvIGNvdmVyIGEgYmJveFxuICpcbiAqIGNvbnN0IHRpbGUgPSBiYm94VG9UaWxlKFsgLTE3OCwgODQsIC0xNzcsIDg1IF0pXG4gKiAvLz10aWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYm94VG9UaWxlKGJib3hDb29yZHM6IEJCb3gpOiBUaWxlIHtcbiAgY29uc3QgbWluID0gcG9pbnRUb1RpbGUoYmJveENvb3Jkc1swXSwgYmJveENvb3Jkc1sxXSwgMzIpO1xuICBjb25zdCBtYXggPSBwb2ludFRvVGlsZShiYm94Q29vcmRzWzJdLCBiYm94Q29vcmRzWzNdLCAzMik7XG4gIGNvbnN0IGJib3g6IEJCb3ggPSBbbWluWzBdLCBtaW5bMV0sIG1heFswXSwgbWF4WzFdXTtcblxuICBjb25zdCB6ID0gZ2V0QmJveFpvb20oYmJveCk7XG4gIGlmICh6ID09PSAwKSByZXR1cm4gWzAsIDAsIDBdO1xuICBjb25zdCB4ID0gYmJveFswXSA+Pj4gKDMyIC0geik7XG4gIGNvbnN0IHkgPSBiYm94WzFdID4+PiAoMzIgLSB6KTtcbiAgcmV0dXJuIFt4LCB5LCB6XTtcbn1cbiJdfQ==","/*\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2024-02-26 18:58:32\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2024-03-15 11:49:37\n */\nexport const UTM = 'utm';\nexport const MERC = 'merc';\n\nconst R = 6378137;\nconst D2R = Math.PI / 180;\nexport function lonLatToWebMerctor(lon: number, lat: number) {\n    const x = R * lon * D2R;\n    const y = R * Math.log(Math.tan(Math.PI * 0.25 + lat * D2R * 0.5));\n    return [x, y];\n}\nexport function webMercatorToLonLat(x: number, y: number): [number, number] {\n    let lon = x / (R * Math.PI) * 180;\n    let lat = y / (R * Math.PI) * 180;\n\n    lat = 180 / Math.PI * (2 * Math.atan(Math.exp(lat * Math.PI / 180)) - Math.PI / 2);\n\n    return [lon, lat];\n}\n\nexport function toRadians(n: number) { return n * Math.PI / 180; }\nexport function toDegrees(n: number) { return n * 180 / Math.PI; };\n\nconst ellipsoidsWgs84 = { a: 6378137, b: 6356752.314245, f: 1 / 298.257223563 };\nconst mgrsLatBands = 'CDEFGHJKLMNPQRSTUVWXX'; // X is repeated for 80-84°N\nconst falseEasting = 500e3;\nconst falseNorthing = 10000e3;\n// from https://github.com/chrisveness/geodesy/blob/761587cd748bd9f7c9825195eba4a9fc5891b859/utm.js#L272\nexport function lonLatToUtm(lon: number, lat: number, zoneOverride?: number) {\n    if (!(-80 <= lat && lat <= 84)) throw new RangeError(`latitude ‘${lat}’ outside UTM limits`);\n\n    let zone = zoneOverride || Math.floor((lon + 180) / 6) + 1; // longitudinal zone\n    let λ0 = toRadians((zone - 1) * 6 - 180 + 3); // longitude of central meridian\n\n    // ---- handle Norway/Svalbard exceptions\n    // grid zones are 8° tall; 0°N is offset 10 into latitude bands array\n    const latBand = mgrsLatBands.charAt(Math.floor(lat / 8 + 10));\n    // adjust zone & central meridian for Norway\n    if (zone === 31 && latBand === 'V' && lon >= 3) { zone++; λ0 += toRadians(6); }\n    // adjust zone & central meridian for Svalbard\n    else if (zone === 32 && latBand === 'X' && lon < 9) { zone--; λ0 -= toRadians(6); }\n    else if (zone === 32 && latBand === 'X' && lon >= 9) { zone++; λ0 += toRadians(6); }\n    else if (zone === 34 && latBand === 'X' && lon < 21) { zone--; λ0 -= toRadians(6); }\n    else if (zone === 34 && latBand === 'X' && lon >= 21) { zone++; λ0 += toRadians(6); }\n    else if (zone === 36 && latBand === 'X' && lon < 33) { zone--; λ0 -= toRadians(6); }\n    else if (zone === 36 && latBand === 'X' && lon >= 33) { zone++; λ0 += toRadians(6); }\n\n    const φ = toRadians(lat);      // latitude ± from equator\n    const λ = toRadians(lon) - λ0; // longitude ± from central meridian\n\n    // allow alternative ellipsoid to be specified\n    // const ellipsoid = this.datum ? this.datum.ellipsoid : ELLIPSOIDS_WGS84;\n    const { a, f } = ellipsoidsWgs84; // WGS-84: a = 6378137, f = 1/298.257223563;\n\n    const k0 = 0.9996; // UTM scale on the central meridian\n\n    // ---- easting, northing: Karney 2011 Eq 7-14, 29, 35:\n\n    const e = Math.sqrt(f * (2 - f)); // eccentricity\n    const n = f / (2 - f);        // 3rd flattening\n    const n2 = n * n, n3 = n * n2, n4 = n * n3, n5 = n * n4, n6 = n * n5;\n\n    const cosλ = Math.cos(λ), sinλ = Math.sin(λ); // , tanλ = Math.tan(λ)\n\n    const τ = Math.tan(φ); // τ ≡ tanφ, τʹ ≡ tanφʹ; prime (ʹ) indicates angles on the conformal sphere\n    const σ = Math.sinh(e * Math.atanh(e * τ / Math.sqrt(1 + τ * τ)));\n\n    const τʹ = τ * Math.sqrt(1 + σ * σ) - σ * Math.sqrt(1 + τ * τ);\n\n    const ξʹ = Math.atan2(τʹ, cosλ);\n    const ηʹ = Math.asinh(sinλ / Math.sqrt(τʹ * τʹ + cosλ * cosλ));\n\n    const A = a / (1 + n) * (1 + 1 / 4 * n2 + 1 / 64 * n4 + 1 / 256 * n6); // 2πA is the circumference of a meridian\n\n    const α = [null, // note α is one-based array (6th order Krüger expressions)\n        1 / 2 * n - 2 / 3 * n2 + 5 / 16 * n3 + 41 / 180 * n4 - 127 / 288 * n5 + 7891 / 37800 * n6,\n        13 / 48 * n2 - 3 / 5 * n3 + 557 / 1440 * n4 + 281 / 630 * n5 - 1983433 / 1935360 * n6,\n        61 / 240 * n3 - 103 / 140 * n4 + 15061 / 26880 * n5 + 167603 / 181440 * n6,\n        49561 / 161280 * n4 - 179 / 168 * n5 + 6601661 / 7257600 * n6,\n        34729 / 80640 * n5 - 3418889 / 1995840 * n6,\n        212378941 / 319334400 * n6];\n\n    let ξ = ξʹ;\n    for (let j = 1; j <= 6; j++) ξ += α[j]! * Math.sin(2 * j * ξʹ) * Math.cosh(2 * j * ηʹ);\n\n    let η = ηʹ;\n    for (let j = 1; j <= 6; j++) η += α[j]! * Math.cos(2 * j * ξʹ) * Math.sinh(2 * j * ηʹ);\n\n    let x = k0 * A * η;\n    let y = k0 * A * ξ;\n\n    // shift x/y to false origins\n    x = x + falseEasting;             // make x relative to false easting\n    if (y < 0) y = y + falseNorthing; // make y in southern hemisphere relative to false northing\n\n    return [x, y];\n}\n\nexport function utmToLonLat(easting: number, northing: number, zoneOverride?: number): [number, number] {\n    const hemisphere = 'N'\n    const zone = zoneOverride || 50\n    const z = zone\n    const h = hemisphere\n\n    const falseEasting = 500e3, falseNorthing = 10000e3;\n\n    const { a, f } = ellipsoidsWgs84 // WGS-84: a = 6378137, f = 1/298.257223563;\n\n    const k0 = 0.9996; // UTM scale on the central meridian\n\n    const x = easting - falseEasting;                           // make x ± relative to central meridian\n    const y = h == 'S' ? northing - falseNorthing : northing; // make y ± relative to equator\n\n    // ---- from Karney 2011 Eq 15-22, 36:\n\n    const e = Math.sqrt(f * (2 - f)); // eccentricity\n    const n = f / (2 - f);        // 3rd flattening\n    const n2 = n * n, n3 = n * n2, n4 = n * n3, n5 = n * n4, n6 = n * n5;\n\n    const A = a / (1 + n) * (1 + 1 / 4 * n2 + 1 / 64 * n4 + 1 / 256 * n6); // 2πA is the circumference of a meridian\n\n    const η = x / (k0 * A);\n    const ξ = y / (k0 * A);\n\n    const β = [null, // note β is one-based array (6th order Krüger expressions)\n        1 / 2 * n - 2 / 3 * n2 + 37 / 96 * n3 - 1 / 360 * n4 - 81 / 512 * n5 + 96199 / 604800 * n6,\n        1 / 48 * n2 + 1 / 15 * n3 - 437 / 1440 * n4 + 46 / 105 * n5 - 1118711 / 3870720 * n6,\n        17 / 480 * n3 - 37 / 840 * n4 - 209 / 4480 * n5 + 5569 / 90720 * n6,\n        4397 / 161280 * n4 - 11 / 504 * n5 - 830251 / 7257600 * n6,\n        4583 / 161280 * n5 - 108847 / 3991680 * n6,\n        20648693 / 638668800 * n6];\n\n    let ξʹ = ξ;\n    for (let j = 1; j <= 6; j++) ξʹ -= β[j] * Math.sin(2 * j * ξ) * Math.cosh(2 * j * η);\n\n    let ηʹ = η;\n    for (let j = 1; j <= 6; j++) ηʹ -= β[j] * Math.cos(2 * j * ξ) * Math.sinh(2 * j * η);\n\n    const sinhηʹ = Math.sinh(ηʹ);\n    const sinξʹ = Math.sin(ξʹ), cosξʹ = Math.cos(ξʹ);\n\n    const τʹ = sinξʹ / Math.sqrt(sinhηʹ * sinhηʹ + cosξʹ * cosξʹ);\n\n    let δτi = null;\n    let τi = τʹ;\n    do {\n        const σi = Math.sinh(e * Math.atanh(e * τi / Math.sqrt(1 + τi * τi)));\n        const τiʹ = τi * Math.sqrt(1 + σi * σi) - σi * Math.sqrt(1 + τi * τi);\n        δτi = (τʹ - τiʹ) / Math.sqrt(1 + τiʹ * τiʹ)\n            * (1 + (1 - e * e) * τi * τi) / ((1 - e * e) * Math.sqrt(1 + τi * τi));\n        τi += δτi;\n    } while (Math.abs(δτi) > 1e-12); // using IEEE 754 δτi -> 0 after 2-3 iterations\n    // note relatively large convergence test as δτi toggles on ±1.12e-16 for eg 31 N 400000 5000000\n    const τ = τi;\n\n    const φ = Math.atan(τ);\n\n    let λ = Math.atan2(sinhηʹ, cosξʹ);\n\n    // ---- convergence: Karney 2011 Eq 26, 27\n\n    let p = 1;\n    for (let j = 1; j <= 6; j++) p -= 2 * j * β[j] * Math.cos(2 * j * ξ) * Math.cosh(2 * j * η);\n    let q = 0;\n    for (let j = 1; j <= 6; j++) q += 2 * j * β[j] * Math.sin(2 * j * ξ) * Math.sinh(2 * j * η);\n\n    const γʹ = Math.atan(Math.tan(ξʹ) * Math.tanh(ηʹ));\n    const γʺ = Math.atan2(q, p);\n\n    const γ = γʹ + γʺ;\n\n    // ---- scale: Karney 2011 Eq 28\n\n    const sinφ = Math.sin(φ);\n    const kʹ = Math.sqrt(1 - e * e * sinφ * sinφ) * Math.sqrt(1 + τ * τ) * Math.sqrt(sinhηʹ * sinhηʹ + cosξʹ * cosξʹ);\n    const kʺ = A / a / Math.sqrt(p * p + q * q);\n\n    const k = k0 * kʹ * kʺ;\n\n    // ------------\n\n    const λ0 = toRadians((z - 1) * 6 - 180 + 3); // longitude of central meridian\n    λ += λ0; // move λ from zonal to global coordinates\n\n    // round to reasonable precision\n    const lat = Number(toDegrees(φ).toFixed(14)); // nm precision (1nm = 10^-14°)\n    const lon = Number(toDegrees(λ).toFixed(14)); // (strictly lat rounding should be φ⋅cosφ!)\n\n    return [lon, lat];\n}\n","import { tileToBBOX } from '@mapbox/tilebelt';\n\nexport class TerrainUtil {\n    private static offscreencanvas: OffscreenCanvas;\n    /**\n     * 从图片中解码地形数据\n     * @param bitmap 图像数据\n     * @param size 瓦片大小\n     * @returns 地形数据\n     */\n    static getFromBitmap(bitmap: ImageBitmap, size = 256) {\n        if (!this.offscreencanvas) {\n            this.offscreencanvas = new OffscreenCanvas(512, 512);\n        }\n        const ctx = this.offscreencanvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Get context 2d error.');\n        }\n        ctx.drawImage(bitmap, 0, 0, size, size);\n        const data = ctx.getImageData(0, 0, size, size).data;\n\n        const gridSize = size + 1;\n        const terrain = new Float32Array(gridSize * gridSize);\n        for (let y = 0; y < size; y++) {\n            for (let x = 0; x < size; x++) {\n                const k = (y * size + x) * 4;\n                const r = data[k + 0];\n                const g = data[k + 1];\n                const b = data[k + 2];\n                terrain[y * gridSize + x] = (r * 256 * 256 + g * 256 + b) / 10 - 10000;\n            }\n        }\n        for (let x = 0; x < gridSize - 1; x++) {\n            terrain[gridSize * (gridSize - 1) + x] = terrain[gridSize * (gridSize - 2) + x];\n        }\n        for (let y = 0; y < gridSize; y++) {\n            terrain[gridSize * y + gridSize - 1] = terrain[gridSize * y + gridSize - 2];\n        }\n        return terrain;\n    }\n\n    /**\n     * 从源地形数据中裁切出一部分\n     * @param sourceTerrain 源地形数据\n     * @param sourceSize 源地形大小\n     * @param x 裁切开始位置 x 坐标\n     * @param y 裁切开始位置 y 坐标\n     * @param size 裁切大小\n     * @returns 裁切后的地形数据\n     */\n    static clip(sourceTerrain: Float32Array, sourceSize: number, x: number, y: number, size: number) {\n        \n        if (x + size > sourceSize + 1 || y + size > sourceSize + 1) {\n            console.log('clip: ', x, y, size);\n            throw new RangeError('Clip terrain error');\n        }\n        const gridSize = size + 1;\n        const sourceGridSize = sourceSize + 1;\n        const terrain = new Float32Array(gridSize * gridSize);\n        for (let row = 0; row < gridSize; row++) {\n            for (let col = 0; col < gridSize; col++) {\n                terrain[row * gridSize + col] = sourceTerrain[(row + y) * sourceGridSize + (col + x)];\n            }\n        }\n        return terrain;\n    }\n \n    static getChildPosition(bigTileNo: number[], bigTileSize: number, smallTileNo: number[]) {\n        const bigBbox = tileToBBOX(bigTileNo);\n        const smallBbox = tileToBBOX(smallTileNo);\n        const bigWidth = bigBbox[2] - bigBbox[0];\n        const bigHeight = bigBbox[3] - bigBbox[1];\n        const left = (smallBbox[0] - bigBbox[0]) / bigWidth;\n        const top = (bigBbox[3] - smallBbox[3]) / bigHeight;\n        const x = Math.round(left * bigTileSize);\n        const y = Math.round(top * bigTileSize);\n        // console.log(left * bigTileSize, top * bigTileSize);\n        return {x, y, bigBbox, smallBbox};\n    }\n}","import { Fetch } from '../../Utils/Fetch';\nimport { Martini } from './Martini';\nimport { tileToBBOX } from '@mapbox/tilebelt';\nimport { lonLatToUtm, lonLatToWebMerctor, MERC } from '../../Utils/CoordUtil';\nimport { TerrainUtil } from '../../Utils/TerrainUtil';\nimport { getParent } from '@mapbox/tilebelt';\n\n\nexport class MartiniTileUtil {\n    static terrainDataMap = new Map<string, Float32Array>();\n    static fetchingMap = new Map<string, Fetch>();\n    static martiniMap = new Map<number, Martini>();\n    static baseSize = 512;\n\n    static getMartini(size: number) {\n        let martini = this.martiniMap.get(size);\n        if (!martini) {\n            martini = new Martini(size + 1);\n            this.martiniMap.set(size, martini);\n        }\n        return martini;\n    }\n\n    /**\n     * 从缓存的地形里找到指定瓦片编号的祖先地形数据及其编号\n     * @param tileNo 瓦片编号\n     * @param maxZ 瓦片数据源所能提供的最大层级\n     * @returns 地形数据，及地形所对应的瓦片编号\n     */\n    static findAncestorTerrainData(tileNo: number[], maxZ: number) {\n        const z = tileNo[2];\n        let terrain: Float32Array | undefined = undefined;\n        let parentTileNo = tileNo;\n        const maxClip = z >= maxZ ? z - maxZ : 5;\n        for (let i = 0; i < maxClip; i++) {\n            parentTileNo = getParent(parentTileNo);\n            const _terrain = this.terrainDataMap.get(parentTileNo.join('-'));\n            if (_terrain) {\n                terrain = _terrain;\n                break;\n            }\n        }\n        return { terrain, tileNo: parentTileNo };\n    }\n\n    /**\n     * 获取地形数据，根据情况从缓存读取祖先地形并切割，或直接从url获取地形图片并解码\n     * @param tileNo 瓦片编号\n     * @param url 瓦片下载地址\n     * @param maxZ 瓦片数据源所能提供的最大层级，大于此层级将从缓存切割瓦片而非下载\n     * @returns 地形数据，地形大小，及地形对应的bbox\n     */\n    static async getTerrainData(tileNo: number[], url: string, maxZ: number) {\n        const id = tileNo.join('-');\n        const { baseSize } = this;\n\n        const { terrain, tileNo: parentTileNo } = this.findAncestorTerrainData(tileNo, maxZ);\n        if (terrain) {\n            let clipTimes = tileNo[2] - parentTileNo[2];\n            let size = this.baseSize;\n            while(clipTimes > 0) {\n                size = size / 2;\n                clipTimes--;\n            }\n            const { x, y, smallBbox } = TerrainUtil.getChildPosition(parentTileNo, baseSize, tileNo);\n            const _terrain = TerrainUtil.clip(terrain, baseSize, x, y, size);\n            return { terrain: _terrain, size, bbox: smallBbox };\n        }\n\n        const fetch = new Fetch(url, { cache: 'force-cache', mode: 'cors' });\n        this.fetchingMap.set(id, fetch);\n        try {\n            const res = await fetch.ready();\n            const blob = await res.blob();\n            const bitmap = await createImageBitmap(blob);\n            const _terrain = TerrainUtil.getFromBitmap(bitmap, baseSize);\n            this.terrainDataMap.set(id, _terrain);\n            return { terrain: _terrain, size: baseSize, bbox: tileToBBOX(tileNo) };\n        } finally {\n            this.fetchingMap.delete(id);\n        }\n    }\n\n    /**\n     * 根据瓦片编号获取模型数据\n     * @param tileNo 瓦片编号\n     * @param url 瓦片下载地址\n     * @param maxZ 瓦片数据源所能提供的最大层级\n     * @param coordType 坐标类型，默认 MERC\n     * @param utmZone 当坐标类型为utm时的区号。\n     * @returns 几何体顶点、UV、顶点索引\n     */\n    static async getTileGeometryAttributes(tileNo: number[], url: string, maxZ: number, coordType = MERC, utmZone?: number) {\n        const { terrain, size, bbox } = await this.getTerrainData(tileNo, url, maxZ);\n        const martini = this.getMartini(size);\n        const martiniTile = martini.createTile(terrain);\n        const { vertices, triangles, numVerticesWithoutSkirts } = martiniTile.getMeshWithSkirts(10);\n\n        const numOfVertices = vertices.length / 2;\n        const positions = new Float32Array(numOfVertices * 3);\n        const uv = new Float32Array(numOfVertices * 2);\n\n        const z = tileNo[2];\n        const gridSize = size + 1;\n\n        const coordConvertMethod = coordType === MERC ? lonLatToWebMerctor : lonLatToUtm;\n        for (let i = 0; i < numOfVertices; i++) {\n            const x = vertices[2 * i];\n            const y = vertices[2 * i + 1];\n            const pixelIdx = y * gridSize + x;\n            const lon = (bbox[2] - bbox[0]) * x / size + bbox[0];\n            const lat = (bbox[3] - bbox[1]) * (size - y) / size + bbox[1];\n\n            const [vx, vy] = coordConvertMethod(lon, lat, utmZone);\n            const vz = terrain[pixelIdx];\n\n            const skirtsHeight = (21 - z) * 10;\n\n            positions[3 * i] = vx;\n            positions[3 * i + 1] = vy;\n            positions[3 * i + 2] = i >= numVerticesWithoutSkirts ? vz - skirtsHeight : vz;\n\n            uv[2 * i + 0] = x / size;\n            uv[2 * i + 1] = (size - y) / size;\n        }\n\n        return { positions, uv, triangles };\n    }\n\n}\n","import { MartiniTileUtil } from './MartiniTileUtil';\n\ntype MessageType = MessageEvent<{\n    id: string;\n    tileNo: number[];\n    maxZ: number; // RGB 图片最大层级\n    url: string;\n    coordType?: string;\n    utmZone?: number;\n    abort?: boolean;\n    dispose?: boolean;\n}>;\n\nself.onmessage = async (e: MessageType) => {\n    const { id, tileNo, maxZ, url, coordType, utmZone, abort, dispose } = e.data;\n\n    if (abort) {\n        MartiniTileUtil.fetchingMap.get(id)?.abort();\n        MartiniTileUtil.fetchingMap.delete(id);\n        self.postMessage({ id, error: true });\n        return;\n    }\n    if (dispose) {\n        MartiniTileUtil.terrainDataMap.delete(id);\n        return;\n    }\n\n    try {\n        const { positions, uv, triangles } = await MartiniTileUtil.getTileGeometryAttributes(tileNo, url, maxZ, coordType, utmZone);\n        const transferableObjects = [\n            positions.buffer,\n            uv.buffer,\n            triangles.buffer,\n        ];\n        // @ts-ignore\n        self.postMessage({ id, positions, uv, triangles }, transferableObjects);\n    } finally {\n        MartiniTileUtil.fetchingMap.delete(id);\n    }\n};"],"names":[],"mappings":"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","x_google_ignoreList":[2]}
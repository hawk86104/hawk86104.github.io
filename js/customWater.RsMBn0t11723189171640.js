import{a6 as t,C as e,Z as n}from"./three.5MXJ6W7w1723189171640.js";import{$ as r,T as o,d as s,x as a}from"./@tresjs.LTwFwASm1723189171640.js";import{a as i}from"./index.rLlA0tSY1723189171640.js";import"./index.5mibPnzO1723189171640.js";import{C as l}from"./three-custom-shader-material.XueWmqLp1723189171640.js";import"./object-hash.jMAsrj6h1723189171640.js";import"./@amap.Lu-L8G0q1723189171640.js";import"./glsl-tokenizer.lazMVlew1723189171640.js";import{p as u}from"./gl-noise.BrVtymbx1723189171640.js";import{d as c,b as p,a1 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as x,ak as M,m as j,al as C}from"./@vue.Q1VpS3901723189171640.js";import{P as z}from"./tweakpane.yHWGBmom1723189171640.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.1x62BBwZ1723189171640.js";import"./@vueuse.oQlm8k6P1723189171640.js";import"./three-stdlib.9krDtkM91723189171640.js";import"./@pmndrs.wQrKJZQf1723189171640.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.TuQ8OEcu1723189171640.js";import"./all.three.U3GkRXeB1723189171640.js";import"./oimophysics.x0jH7fze1723189171640.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.YCw_xomP1723189171640.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.mGxt35YM1723189171640.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.sI1IVpOm1723189171640.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.QmLWHEXL1723189171640.js";import"./glsl-token-string.HJw4RHIk1723189171640.js";import"./glsl-token-functions.95Du-VYb1723189171640.js";import"./jszip.WwTqi4J91723189171640.js";function T(){const t=["__proto__","MeshPhysicalMaterial","convertLinearToSRGB","2PYxuXC","function *\\( *\\)","58015DfepzZ","constructor","table","material","while (true) {}","bind","TresBoxGeometry","Color","rotation-x","4052682vDaetw","1253449aZLbqg","vertex","10196180QNLsFS","apply","13366188Hqnity","DoubleSide","error","warn","action","console","brightness","height","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","waterColor","debu","5927634BTOZnA","vertexShader","call","364456DnXJnH","9GssBvs","value","customWaterMesh","counter","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","toString","return (function() ","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","prototype","trace","string","args","210oEhyAL","flatShading","fragment","dispose","stateObject","uHeight","baseMaterial","chain","Flatshading","#52a7f7","tmRef","test","length","info","waterHighlight","436VqIeyb","side"];return(T=function(){return t})()}const S=B;!function(t,e){const n=B,r=T();for(;;)try{if(787911===parseInt(n(383))/1*(-parseInt(n(371))/2)+parseInt(n(382))/3+parseInt(n(366))/4*(parseInt(n(373))/5)+parseInt(n(335))/6+-parseInt(n(351))/7*(parseInt(n(338))/8)+parseInt(n(339))/9*(parseInt(n(385))/10)+-parseInt(n(387))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(386)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=T();return(B=function(t,e){return n[t-=326]})(t,e)}!function(){H(this,(function(){const t=B,e=new RegExp(t(372)),n=new RegExp(t(331),"i"),r=P("init");e[t(362)](r+t(358))&&n[t(362)](r+"input")?P():r("0")}))()}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(386)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();O(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function(t(345)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(328)]=e[t(328)]||{},r=["log",t(326),t(364),t(389),"exception",t(375),t(348)];for(let o=0;o<r[t(363)];o++){const e=O[t(374)][t(347)][t(378)](O),s=r[o],a=n[s]||e;e[t(368)]=O.bind(O),e[t(344)]=a[t(344)][t(378)](a),n[s]=e}}))();const G=[S(381)],D=[S(350)],k=c({__name:S(341),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(360)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[S(369)]}},setup(s){const a=S,i=s,c=p(null),b={vertex:a(343),fragment:a(346)},w={uTime:{value:0},waterColor:{value:new(t[a(380)])(i[a(333)])[a(370)]()},waterHighlight:{value:new(t[a(380)])(i[a(365)])[a(370)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[a(329)]},uHeight:{value:i.height}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=a;w.uTime[e(340)]=-t/5})),f((()=>{const n=a;i[n(330)]&&(w[n(356)][n(340)]=i.height),i[n(333)]&&(w[n(333)][n(340)]=new e(i.waterColor)[n(370)]()),i.waterHighlight&&(w[n(365)][n(340)]=new(t[n(380)])(i[n(365)])[n(370)]()),i[n(329)]&&(w[n(329)][n(340)]=i.brightness)})),g((()=>i[a(359)]),(t=>{const e=a;c[e(340)][e(376)].needsUpdate=!0})),g((()=>i.baseMaterial),(e=>{const n=a,r=new l({baseMaterial:t[e],vertexShader:u(b[n(384)]),fragmentShader:b[n(353)],uniforms:w,flatShading:i[n(359)],side:t[n(388)],roughness:.2,metalness:.1,silent:!0});c[n(340)][n(376)][n(354)](),c[n(340)][n(376)]=r})),(e,r)=>{const s=a;return h(),m("TresMesh",{ref_key:s(361),ref:c,"rotation-x":-Math.PI/2},[v(s(379),{args:[5,5,e[s(330)],64,64,1]},null,8,D),d(_(o),{baseMaterial:t[s(369)],vertexShader:_(u)(b.vertex),fragmentShader:b[s(353)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:e[s(359)],silent:""},null,8,[s(357),s(336),"fragmentShader",s(367),s(352)])],8,G)}}});function P(t){function e(t){const n=B;if(typeof t===n(349))return function(t){}.constructor(n(377))[n(386)](n(342));1!==(""+t/t)[n(363)]||t%20==0?function(){return!0}[n(374)](n(334)+n(332))[n(337)](n(327)):function(){return!1}[n(374)](n(334)+n(332))[n(386)](n(355)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=V;!function(t,e){const n=V,r=L();for(;;)try{if(392919===parseInt(n(184))/1*(parseInt(n(220))/2)+parseInt(n(170))/3*(-parseInt(n(169))/4)+parseInt(n(181))/5*(parseInt(n(188))/6)+-parseInt(n(164))/7+-parseInt(n(196))/8*(-parseInt(n(214))/9)+parseInt(n(197))/10+-parseInt(n(203))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[V(189)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=V,e=new RegExp(t(180)),n=new RegExp(t(185),"i"),r=q(t(163));e.test(r+t(208))&&n[t(212)](r+t(165))?q():r("0")}))()}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[V(189)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();A(void 0,(function(){const t=V,e=function(){const t=V;let e;try{e=Function(t(218)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e.console=e.console||{},r=[t(179),"warn",t(200),t(190),"exception",t(221),t(209)];for(let o=0;o<r[t(187)];o++){const e=A[t(175)][t(223)][t(167)](A),s=r[o],a=n[s]||e;e[t(192)]=A[t(167)](A),e.toString=a[t(193)].bind(a),n[s]=e}}))();const R=v(W(202),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),N=v("TresAmbientLight",{intensity:.5},null,-1),Z=v(W(216),{position:[15,15,15],intensity:1},null,-1);function L(){const t=["TresDirectionalLight","addBinding","return (function() ","浪头颜色","2HmuMdV","table","baseMaterial","prototype","ACESFilmicToneMapping","neg-z.jpg","counter","list","MeshStandardMaterial","call","label","MeshNormalMaterial","水体颜色","init","3013661QDQkpy","input","MeshDepthMaterial","bind","MeshLambertMaterial","16pYmvFV","250611pImVQR","change","brightness","MeshPhongMaterial","string","constructor","pos-z.jpg","pos-y.jpg","MeshPhysicalMaterial","log","function *\\( *\\)","16130sZJqRV","stateObject","MeshToonMaterial","201029PuqvIG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#b3ffff","length","1104AhngTB","apply","error","action","__proto__","toString","MeshBasicMaterial","gger","8672bQJulO","7270560xvtUif","while (true) {}","customWater","info","Flatshading","TresPerspectiveCamera","12077417WEQHOO","neg-y.jpg","target","#3a78a2","waterColor","chain","trace","debu","#52a7f7","test","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","6093UfBBuV","waterHighlight"];return(L=function(){return t})()}function V(t,e){const n=L();return(V=function(t,e){return n[t-=162]})(t,e)}const E=c({__name:W(199),setup(e){const n=W,r=b({alpha:!0,toneMapping:t[n(224)],windowSize:!0,clearColor:10066329}),o=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:n(206),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(211),waterHighlight:n(186),brightness:1,baseMaterial:n(178)}),c=new z;return c[n(217)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(217)](u,n(207),{label:n(162)}),c[n(217)](u,n(215),{label:n(219)}),c[n(217)](u,n(172),{label:"亮度",min:0,max:1,step:.01}),c[n(217)](u,n(201),{label:n(201)}),c.addBlade({view:n(227),label:"材质",options:[{text:n(178),value:n(178)},{text:n(194),value:n(194)},{text:n(231),value:"MeshNormalMaterial"},{text:n(228),value:n(228)},{text:"MeshPhongMaterial",value:n(173)},{text:"MeshToonMaterial",value:n(183)},{text:n(168),value:n(168)},{text:n(166),value:n(166)}],value:u[n(222)]}),c.on(n(171),(t=>{const e=n;"材质"===t[e(205)][e(230)]&&(u.baseMaterial=t.value)})),(t,e)=>{const c=n;return h(),w(_(a),j(r,{"window-size":""}),{default:y((()=>[R,d(_(s),x(M(o)),null,16),N,Z,d(k,x(M(u)),null,16),d(_(I),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:["pos-x.jpg","neg-x.jpg",c(177),c(204),c(176),c(225)],path:c(213)})])),_:1}))])),_:1},16)}}});function q(t){function e(t){const n=V;if(typeof t===n(174))return function(t){}[n(175)](n(198))[n(189)](n(226));1!==(""+t/t)[n(187)]||t%20==0?function(){return!0}[n(175)](n(210)+n(195))[n(229)](n(191)):function(){return!1}[n(175)]("debu"+n(195)).apply(n(182)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

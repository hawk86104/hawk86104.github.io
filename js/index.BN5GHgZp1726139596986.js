var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as S,c3 as w,c4 as M,K as R,f as E,V as A,g as T,_ as D,m as P,bm as z,k as C,bz as O,d as F,aj as B,B as k,a as j,aP as U,e as N,M as L,at as H,a9 as Z,h as G}from"./three.ewwqFbMB1726139596986.js";import{p as W,N as V,U as $}from"./@tresjs.ml1V726H1726139596986.js";import{R as Y}from"./three-stdlib.XegO5T8a1726139596986.js";import{x as q,b as K,w as X,a as Q,u as J,d as nn,V as tn,a4 as en,a0 as rn,o as on,E as an,H as cn,J as sn,a7 as un,a3 as ln,q as fn,f as pn,L as dn,a8 as hn,r as vn,N as mn,Y as gn,t as _n,F as yn,a6 as xn,m as In}from"./@vue.JNsx1iN61726139596986.js";import{M as bn,a as Sn,C as wn}from"./@pmndrs.i3ABMTfO1726139596986.js";import{o as Mn}from"./object-hash.FoPRLmFN1726139596986.js";function Rn(n,t){var e=Tn();return(Rn=function(n,t){return e[n-=411]})(n,t)}var En=Rn;!function(n,t){for(var e=Rn,r=Tn();;)try{if(494030===-parseInt(e(443))/1+-parseInt(e(420))/2*(parseInt(e(444))/3)+-parseInt(e(442))/4*(-parseInt(e(429))/5)+parseInt(e(421))/6+parseInt(e(435))/7+-parseInt(e(427))/8+parseInt(e(422))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Rn(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(){var n=["45456fWkKqR","table","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","exception","map","chain","while (true) {}","debu","counter","input","constructor","destructor","console","material","action","22QBakZn","4226988kpzmbS","697680IzIOWo","__proto__","gger","init","dispose","268344eXiPtg","info","5iAdSsu","call",'{}.constructor("return this")( )',"toString","bind","remove","2792048rKOFQg","log","virtualScene","apply","test","geometry","add","1310308JDfLSH","814214gdhEIn"];return(Tn=function(){return n})()}!function(){An(this,(function(){var n=Rn,t=new RegExp(n(448)),e=new RegExp(n(447),"i"),r=Cn(n(425));t[n(439)](r+n(451))&&e[n(439)](r+n(414))?Cn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){var n,t=Rn;try{n=Function("return (function() "+t(431)+");")()}catch(s){n=window}for(var e=n[t(417)]=n.console||{},r=[t(436),"warn",t(428),t(446),t(449),t(445),"trace"],o=0;o<r.length;o++){var i=Dn[t(415)].prototype[t(433)](Dn),a=r[o],c=e[a]||i;i[t(423)]=Dn[t(433)](Dn),i[t(432)]=c[t(432)][t(433)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=Rn;super(),this[n(437)]=null,this[n(437)]=new u}[En(441)](...n){var t=En;return this[t(437)][t(441)](...n),this}[En(416)](){var n=En;this[n(437)].traverse((t=>{var e=n;t instanceof l&&(t[e(440)][e(426)](),t.material.dispose(),t[e(418)][e(450)]&&t[e(418)][e(450)][e(426)](),this[e(437)][e(434)](t))})),this[n(437)]=null}}const zn=Pn;function Cn(n){function t(n){var e=Rn;if("string"==typeof n)return function(n){}[e(415)](e(411))[e(438)](e(413));1!==(""+n/n).length||n%20==0?function(){return!0}[e(415)](e(412)+e(424))[e(430)](e(419)):function(){return!1}.constructor(e(412)+e(424))[e(438)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function On(n,t){const e=Un();return(On=function(n,t){return e[n-=102]})(n,t)}const Fn=On;!function(n,t){const e=On,r=Un();for(;;)try{if(796239===-parseInt(e(110))/1*(parseInt(e(144))/2)+-parseInt(e(126))/3+-parseInt(e(138))/4+-parseInt(e(132))/5*(parseInt(e(104))/6)+-parseInt(e(142))/7*(parseInt(e(121))/8)+parseInt(e(145))/9+-parseInt(e(134))/10*(-parseInt(e(112))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bn(this,(function(){const n=On,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(103),"i"),r=Nn(n(136));t[n(108)](r+n(129))&&e[n(108)](r+n(143))?Nn():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[On(123)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=On;let t;try{t=Function(n(105)+n(114)+");")()}catch(o){t=window}const e=t.console=t[n(125)]||{},r=[n(119),n(141),n(127),n(140),n(130),"table",n(124)];for(let i=0;i<r[n(102)];i++){const t=kn[n(106)][n(113)].bind(kn),o=r[i],a=e[o]||t;t[n(117)]=kn.bind(kn),t[n(111)]=a[n(111)][n(118)](a),e[o]=t}}))();const jn={sunset:Fn(139),studio:"studio/poly_haven_studio_1k.hdr",city:"city/canary_wharf_1k.hdr",umbrellas:Fn(120),night:Fn(107),forest:Fn(109),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Fn(116),hangar:Fn(131),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Fn(133),shangai:"city/shanghai_bund_1k.hdr"};function Un(){const n=["while (true) {}","chain","exception","indoor/small_hangar_01_1k.hdr","5017525JHLaLj","city/modern_buildings_2_1k.hdr","10JWgiLV","action","init","string","4855908PitDVJ","venice/venice_sunset_1k.hdr","error","warn","166803CBTSMY","input","36214TrGIuC","4318641oqhyuD","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6TnGnNL","return (function() ","constructor","outdoor/satara_night_1k.hdr","test","outood/mossy_forest_1k.hdr","83joLFQh","toString","56038675EOqMaC","prototype",'{}.constructor("return this")( )',"counter","kiara/kiara_1_dawn_1k.hdr","__proto__","bind","log","outdoor/outdoor_umbrellas_1k.hdr","16DhwfBt","gger","apply","trace","console","3030042TrqsLO","info"];return(Un=function(){return n})()}function Nn(n){function t(n){const e=On;if(typeof n===e(137))return function(n){}[e(106)](e(128))[e(123)](e(115));1!==(""+n/n)[e(102)]||n%20==0?function(){return!0}[e(106)]("debu"+e(122)).call(e(135)):function(){return!1}[e(106)]("debu"+e(122))[e(123)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Hn;function Hn(n,t){const e=$n();return(Hn=function(n,t){return e[n-=261]})(n,t)}!function(n,t){const e=Hn,r=$n();for(;;)try{if(625040===-parseInt(e(289))/1*(-parseInt(e(299))/2)+parseInt(e(269))/3+-parseInt(e(271))/4+parseInt(e(278))/5*(-parseInt(e(291))/6)+parseInt(e(267))/7*(parseInt(e(265))/8)+parseInt(e(296))/9*(-parseInt(e(301))/10)+-parseInt(e(261))/11*(-parseInt(e(293))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hn(292)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Hn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Vn(n(274));t[n(297)](r+"chain")&&e[n(297)](r+"input")?Vn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hn(292)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gn(void 0,(function(){const n=Hn;let t;try{t=Function(n(286)+n(266)+");")()}catch(o){t=window}const e=t[n(275)]=t.console||{},r=[n(284),"warn","info",n(295),n(300),"table",n(264)];for(let i=0;i<r.length;i++){const t=Gn[n(281)][n(285)][n(294)](Gn),o=r[i],a=e[o]||t;t[n(276)]=Gn[n(294)](Gn),t.toString=a[n(262)][n(294)](a),e[o]=t}}))();const Wn=Ln(268);function Vn(n){function t(n){const e=Hn;if(typeof n===e(270))return function(n){}[e(281)]("while (true) {}")[e(292)](e(263));1!==(""+n/n)[e(280)]||n%20==0?function(){return!0}.constructor(e(304)+e(272))[e(277)](e(298)):function(){return!1}[e(281)](e(304)+e(272))[e(292)](e(288)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $n(){const n=["error","4822722WQBvoQ","test","action","39850SYveRl","exception","10bgtcyT","setPath","mapping","debu","1129843JhNMXL","toString","counter","trace","56fZKjag",'{}.constructor("return this")( )',"89411smFcGz","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","3275277iAopWm","string","310068HfkRKl","gger","background","init","console","__proto__","call","5vupBrB","value","length","constructor","Failed to load environment map: ","isColor","log","prototype","return (function() ","Preset must be one of: ","stateObject","45KeeTKI","isArray","6268836TtGgMb","apply","24cAFzya","bind"];return($n=function(){return n})()}const Yn=Kn;function qn(){const n=["gger","call","minFilter","string","stateObject","exception","counter","2308oWHHKa","3170wpnpAt","environment","error","trace","$slots","apply","generateMipmaps","near","log","update","console","type","test","constructor","length","1380Slziwx","210726aiFCVs","360941gzfFga","186rdketU","background","component","30RYXXlh","texture","table","frames","debu","value","warn","action","default","1353150avLvWi","useDefaultScene","182292YpyCSR","815736lVKIJb","toString","magFilter","virtualScene","140EFQGTx","bind","__proto__","info","envSence","init","dispose","destructor","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(qn=function(){return n})()}function Kn(n,t){const e=qn();return(Kn=function(n,t){return e[n-=313]})(n,t)}!function(n,t){const e=Kn,r=qn();for(;;)try{if(146958===parseInt(e(315))/1+-parseInt(e(353))/2*(parseInt(e(317))/3)+parseInt(e(314))/4*(-parseInt(e(354))/5)+parseInt(e(320))/6*(-parseInt(e(316))/7)+parseInt(e(332))/8+parseInt(e(329))/9+-parseInt(e(336))/10*(-parseInt(e(331))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Kn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(345),"i"),r=nt(n(341));t.test(r+"chain")&&e[n(366)](r+"input")?nt():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Qn(void 0,(function(){const n=Kn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(364)]=t[n(364)]||{},r=[n(362),n(326),n(339),n(356),n(351),n(322),n(357)];for(let o=0;o<r.length;o++){const t=Qn[n(367)].prototype[n(337)](Qn),i=r[o],a=e[i]||t;t[n(338)]=Qn.bind(Qn),t[n(333)]=a[n(333)][n(337)](a),e[i]=t}}))();const Jn=nn({__name:Yn(319),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=K(null),x=null;const I=K(null);tn((()=>{var n,t;const e=Kn;null==(n=I.value)||n[e(343)](),null==(t=y[e(325)])||t[e(342)]()}));const{onBeforeLoop:b}=$();let S=1;b((()=>{const n=Kn;x&&I[n(325)]&&y[n(325)]&&(i.frames===1/0||S<i[n(323)])&&(i[n(330)]?x[n(363)](s[n(325)],u.value):x[n(363)](s[n(325)],un(I[n(325)][n(335)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=K([]),path:s=K(""),background:u}=q(n);X(n,(()=>{o()}));const l=K(null),h=Q((()=>Array[e(290)](c[e(279)]))),v=Q((()=>h[e(279)]?f:Y));return X([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(279)])){try{l[r(279)]=await V(v[r(279)],h[r(279)]?[...J(n)]:J(n),(n=>{t&&n.setPath(J(t))}))}catch(o){throw new Error(r(282)+o)}l.value&&(l[r(279)].mapping=h[r(279)]?p:d)}}),{immediate:!0}),X(l,(n=>{r[e(279)]&&n&&(r.value.environment=n)}),{immediate:!0}),X([u,l],(([n,o])=>{const i=e;if(r[i(279)]){let e=(null==t?void 0:t[i(279)])?t.value.texture:o,a=r.value[i(273)];!(null==a?void 0:a[i(283)])&&(a=void 0),r[i(279)][i(273)]=n?e:a}}),{immediate:!0}),X((()=>null==a?void 0:a[e(279)]),(n=>{r[e(279)]&&n&&(r.value.backgroundBlurriness=n)}),{immediate:!0}),X((()=>null==i?void 0:i[e(279)]),(async n=>{const t=e;if(n&&n in jn){const e=Wn,i=jn[n];try{l[t(279)]=await V(Y,i,(n=>{e&&n[t(302)](e)}))}catch(r){throw new Error(t(282)+r)}l[t(279)]&&l[t(279)]&&(l[t(279)][t(303)]=d),o()}else if(n&&!(n in jn))throw new Error(t(287)+Object.keys(jn).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(325)][t(355)]=n.texture,i[t(318)]&&(u[t(325)].background=n[t(321)])):(u[t(325)][t(355)]=w[t(325)],i[t(318)]&&(u[t(325)][t(318)]=w.value))};X(w,(n=>{const t=Kn;y.value&&M(y[t(325)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Kn;null==(n=y[t(325)])||n[t(342)](),y[t(325)]=new v(i.resolution),x=new m(i[t(361)],i.far,y.value),i[t(330)]?(y.value[t(321)][t(365)]=g,y[t(325)][t(321)][t(360)]=!1,y[t(325)].texture[t(348)]=_,y[t(325)][t(321)][t(334)]=_):y[t(325)][t(321)][t(365)]=h,M(y.value)};return X((()=>rn()[e(328)]),(n=>{var t,r;const o=e;n&&(!y[o(325)]||y[o(325)][o(321)][o(365)]!==h)&&(l=n(),Array.isArray(l)&&l.length>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(365)]))?R():(null==(r=y[o(325)])||r[o(342)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(325)]=w,X((()=>i[e(330)]),(n=>{y[e(325)]&&R()})),(n,t)=>{const r=e;return J(y)?(on(),an("TresEnvSence",{key:0,ref_key:r(340),ref:I},[cn(n[r(358)],r(328))],512)):sn("",!0)}}});function nt(n){function t(n){const e=Kn;if(typeof n===e(349))return function(n){}.constructor(e(344))[e(359)](e(352));1!==(""+n/n)[e(313)]||n%20==0?function(){return!0}[e(367)](e(324)+e(346))[e(347)](e(327)):function(){return!1}[e(367)](e(324)+e(346)).apply(e(350)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=et;function et(n,t){const e=ut();return(et=function(n,t){return e[n-=126]})(n,t)}!function(n,t){const e=et,r=ut();for(;;)try{if(184695===parseInt(e(136))/1+parseInt(e(160))/2*(-parseInt(e(130))/3)+-parseInt(e(172))/4+parseInt(e(155))/5*(parseInt(e(128))/6)+parseInt(e(146))/7*(parseInt(e(176))/8)+-parseInt(e(169))/9+parseInt(e(145))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=et,t=new RegExp(n(126)),e=new RegExp(n(173),"i"),r=ft(n(139));t[n(174)](r+n(137))&&e.test(r+n(170))?ft():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ot(void 0,(function(){const n=et,t=function(){const n=et;let t;try{t=Function(n(150)+n(148)+");")()}catch(e){t=window}return t}(),e=t[n(131)]=t[n(131)]||{},r=["log",n(127),"info",n(138),n(163),n(171),"trace"];for(let o=0;o<r[n(177)];o++){const t=ot[n(157)][n(142)][n(147)](ot),i=r[o],a=e[i]||t;t[n(144)]=ot[n(147)](ot),t[n(159)]=a[n(159)].bind(a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[tt(133),"map",tt(151),tt(132)];function ut(){const n=["bind",'{}.constructor("return this")( )',"map","return (function() ","side","TresPlaneGeometry","circle","apply","10LbhDQa","TresMesh","constructor","multiplyScalar","toString","22HSfYjw","from","material","exception","gger","stateObject","action","ring","TresMeshBasicMaterial","200556YvIroZ","input","table","841076uVogSW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","string","8fvTiBh","length","value","function *\\( *\\)","warn","92100DlwJJJ","call","71643mCGrEO","console","color","toneMapped","debu","set","322499wFtnvx","chain","error","init","TresRingGeometry","intensity","prototype","index","__proto__","471000ilwoYU","1957480CXnGim"];return(ut=function(){return n})()}const lt=nn({__name:tt(143),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=K();return ln((()=>{const n=et;r[n(178)]&&(r.value[n(132)][n(158)](e[n(141)]),r[n(178)].needsUpdate=!0)})),X((()=>e[t(132)]),(n=>{const o=t;r[o(178)]&&(r[o(178)][o(132)][o(135)](n),r[o(178)][o(132)][o(158)](e[o(141)]),r[o(178)].needsUpdate=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(156),null,[e[i(161)]===i(153)?(on(),an(i(140),it)):e.from===i(167)?(on(),an(i(140),at)):"rect"===e[i(161)]?(on(),an(i(152),ct)):(on(),pn(e[i(161)],{key:3,args:e})),dn(i(168),{ref_key:i(162),ref:r,toneMapped:n[i(133)],map:n[i(149)],side:J(x),color:n[i(132)]},null,8,st)])}}});function ft(n){function t(n){const e=et;if(typeof n===e(175))return function(n){}[e(157)]("while (true) {}").apply("counter");1!==(""+n/n)[e(177)]||n%20==0?function(){return!0}[e(157)](e(134)+e(164))[e(129)](e(166)):function(){return!1}[e(157)]("debu"+e(164))[e(154)](e(165)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=dt();for(;;)try{if(343281===parseInt(e(163))/1*(parseInt(e(135))/2)+parseInt(e(123))/3+parseInt(e(127))/4+parseInt(e(157))/5*(-parseInt(e(120))/6)+parseInt(e(162))/7+-parseInt(e(164))/8*(-parseInt(e(150))/9)+parseInt(e(136))/10*(-parseInt(e(140))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(){const n=["exception","dispose","2060109QEANlA","type","clear","log","console","input","call","60gLGemW","value","format","height","apply","4716712KGyqDs","771fgdrLB","8WIQePs","init","debu","while (true) {}","227604EIiluD","toString","gger","1374678kzBvWL","chain","width","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","870792dCDuin","length","action","__proto__","counter",'{}.constructor("return this")( )',"bind","render","1714doctCX","3730Wjziqp","constructor","stateObject","info","42493CBlCfv","function *\\( *\\)","return (function() ","depthTexture","setRenderTarget","test","prototype","table"];return(dt=function(){return n})()}!function(){pt(this,(function(){const n=vt,t=new RegExp(n(141)),e=new RegExp(n(126),"i"),r=gt(n(117));t[n(145)](r+n(124))&&e[n(145)](r+n(155))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(161)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=dt();return(vt=function(n,t){return e[n-=117]})(n,t)}function mt(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?q(n):q(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=vt;null==(n=t[a(158)])||n[a(149)](),t[a(158)]=new I((null==r?void 0:r.value)||p[a(125)][a(158)],(null==e?void 0:e[a(158)])||p[a(160)][a(158)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i.value)&&(t[a(158)][a(143)]=new S((null==r?void 0:r[a(158)])||p[a(125)].value,(null==e?void 0:e[a(158)])||p[a(160)].value),t.value[a(143)][a(159)]=w,t[a(158)][a(143)][a(151)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(158)])&&(l[n(158)][n(144)](un(t[n(158)])),l.value[n(152)](),l[n(158)][n(134)](un(f[n(158)]),un(u[n(158)])),l[n(158)].setRenderTarget(null))})),mn((()=>{var n;null==(n=t.value)||n.dispose()})),t}function gt(n){function t(n){const e=vt;if("string"==typeof n)return function(n){}.constructor(e(119)).apply(e(131));1!==(""+n/n)[e(128)]||n%20==0?function(){return!0}[e(137)](e(118)+e(122))[e(156)](e(129)):function(){return!1}[e(137)](e(118)+e(122)).apply(e(138)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=vt;let t;try{t=Function(n(142)+n(132)+");")()}catch(o){t=window}const e=t[n(154)]=t[n(154)]||{},r=[n(153),"warn",n(139),"error",n(148),n(147),"trace"];for(let i=0;i<r[n(128)];i++){const t=ht[n(137)][n(146)][n(133)](ht),o=r[i],a=e[o]||t;t[n(130)]=ht[n(133)](ht),t.toString=a[n(121)][n(133)](a),e[o]=t}}))();const _t=bt;!function(n,t){const e=bt,r=Mt();for(;;)try{if(429158===parseInt(e(399))/1+-parseInt(e(436))/2+-parseInt(e(406))/3*(-parseInt(e(409))/4)+parseInt(e(395))/5+-parseInt(e(414))/6*(parseInt(e(441))/7)+parseInt(e(413))/8*(parseInt(e(405))/9)+-parseInt(e(415))/10*(parseInt(e(401))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=bt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(442),"i"),r=wt(n(418));t[n(433)](r+"chain")&&e[n(433)](r+n(422))?wt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function(n(402)+n(431)+");")()}catch(e){t=window}return t}(),e=t[n(416)]=t[n(416)]||{},r=[n(426),n(410),n(396),n(448),n(445),n(423),n(412)];for(let o=0;o<r[n(438)];o++){const t=xt[n(430)][n(411)][n(420)](xt),i=r[o],a=e[i]||t;t[n(429)]=xt[n(420)](xt),t[n(443)]=a[n(443)][n(420)](a),e[i]=t}}))();const It=["buffer",_t(407)];function bt(n,t){const e=Mt();return(bt=function(n,t){return e[n-=393]})(n,t)}const St=nn({__name:_t(408),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new Sn,{onBeforeLoop:f}=$(),p=mt({width:u[e(394)],height:u[e(394)],isLoop:!1}),d=mt({width:u[e(394)],height:u[e(394)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(398)]=function(n,t){let e;return n.traverse((n=>{const r=bt;n.isMesh&&n.material&&n[r(434)][r(397)]===t&&(e=n)})),e}(i[n(398)],r[n(398)].uuid)})),f((({elapsed:n})=>{const t=e;r.value[t(439)]=n,r[t(398)][t(404)]===d[t(398)].texture&&s[t(398)]&&(m=a[t(398)].toneMapping,h=i[t(398)].background,v=r[t(398)][t(447)],g=s[t(398)][t(434)][t(407)],s[t(398)].material=l,u[t(393)]&&(a[t(398)][t(425)](p[t(398)]),a.value.render(i.value,c[t(398)]),s.value.material=r.value,s[t(398)].material[t(427)]=u[t(440)],s.value.material[t(404)]=p.value[t(400)],s[t(398)].material[t(407)]=R,s.value.material[t(447)]=0),a.value[t(425)](d.value),a[t(398)].render(i.value,c[t(398)]),s[t(398)][t(434)].buffer=d[t(398)][t(400)],s[t(398)][t(434)]=r.value,s[t(398)][t(434)][t(427)]=u[t(427)],s[t(398)].material.side=g,s.value[t(434)].envMapIntensity=v,i[t(398)][t(428)]=h,a[t(398)].setRenderTarget(null),a.value.toneMapping=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return on(),an(o(444),{ref_key:o(437),ref:r,buffer:J(d)[o(400)],side:J(x)},null,8,It)}}});function wt(n){function t(n){const e=bt;if(typeof n===e(403))return function(n){}.constructor(e(417))[e(421)](e(419));1!==(""+n/n)[e(438)]||n%20==0?function(){return!0}[e(430)](e(435)+e(446))[e(432)]("action"):function(){return!1}[e(430)](e(435)+"gger")[e(421)](e(424)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Mt(){const n=["MeshTransmissionMaterialClass","length","time","backsideThickness","13181QKdbNr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","TresMeshTransmissionMaterial","exception","gger","envMapIntensity","error","backside","fboResolution","2015605ncnOtP","info","uuid","value","730532tSxIef","texture","9262ZMKsjl","return (function() ","string","buffer","5274KYMlLd","14229ZzXfFL","side","index","404kPOgUw","warn","prototype","trace","7400Zszmtv","354tQsidW","12410vXDGze","console","while (true) {}","init","counter","bind","apply","input","table","stateObject","setRenderTarget","log","thickness","background","__proto__","constructor",'{}.constructor("return this")( )',"call","test","material","debu","1139138ZUwcRe"];return(Mt=function(){return n})()}!function(n,t){const e=Tt,r=Et();for(;;)try{if(580034===parseInt(e(467))/1+-parseInt(e(462))/2*(-parseInt(e(493))/3)+-parseInt(e(504))/4+-parseInt(e(497))/5*(-parseInt(e(507))/6)+parseInt(e(505))/7*(parseInt(e(513))/8)+-parseInt(e(461))/9*(parseInt(e(484))/10)+-parseInt(e(509))/11*(parseInt(e(495))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(){const n=["matrixWorld","call","125968fPLyhv","constructor","value","length","setFromObject","disable","967230OmqBEm","838766jbShdJ","right","apply","gger","__proto__","503225MLJyXq","while (true) {}","precise","bind","debu","test","min","set","return (function() ","getBoundingSphere","stateObject","table","max","top","$slots","init","trace","20porVJz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","default","inner","bottom","function *\\( *\\)","getCenter","TresGroup","3unBPCV","chain","1212ddlWCK","front","35GshbQE","console","disableY","action","back","disableZ","warn","1002844fVwOxT","203eYuOTU",'{}.constructor("return this")( )',"905490PBDoWk","identity","151382DkPIKK","string"];return(Et=function(){return n})()}!function(){Rt(this,(function(){const n=Tt,t=new RegExp(n(490)),e=new RegExp(n(485),"i"),r=Pt(n(482));t.test(r+n(494))&&e[n(472)](r+"input")?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(464)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=Et();return(Tt=function(n,t){return e[n-=457]})(n,t)}At(void 0,(function(){const n=Tt,t=function(){const n=Tt;let t;try{t=Function(n(475)+n(506)+");")()}catch(e){t=window}return t}(),e=t[n(498)]=t[n(498)]||{},r=["log",n(503),n(486),"error","exception",n(478),n(483)];for(let o=0;o<r[n(458)];o++){const t=At.constructor.prototype[n(470)](At),i=r[o],a=e[i]||t;t[n(466)]=At[n(470)](At),t.toString=a.toString[n(470)](a),e[i]=t}}))();const Dt=nn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return fn((()=>{const n=Tt;if(!r.value)return;if(!o[n(457)])return;r[n(457)][n(511)][n(508)]();const e=(new E)[n(459)](o.value,t[n(469)]),i=new A,a=new T,c=e.max.x-e[n(473)].x,s=e[n(479)].y-e[n(473)].y,u=e[n(479)].z-e[n(473)].z;e[n(491)](i),e[n(476)](a);const l=t[n(480)]?s/2:t[n(489)]?-s/2:0,f=t.left?-c/2:t[n(463)]?c/2:0,p=t[n(496)]?u/2:t[n(501)]?-u/2:0;r[n(457)].position[n(474)](t.disable||t.disableX?0:-i.x+f,t.disable||t[n(499)]?0:-i.y+l,t[n(460)]||t[n(502)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return on(),an(i(492),{ref_key:"gref",ref:e},[dn(i(492),{ref_key:"outer",ref:r},[dn("TresGroup",{ref_key:i(488),ref:o},[cn(n[i(481)],i(487))],512)],512)],512)}}});function Pt(n){function t(n){const e=Tt;if(typeof n===e(510))return function(n){}.constructor(e(468)).apply("counter");1!==(""+n/n)[e(458)]||n%20==0?function(){return!0}[e(514)](e(471)+"gger")[e(512)](e(500)):function(){return!1}[e(514)]("debu"+e(465))[e(464)](e(477)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=Ot;!function(n,t){const e=Ot,r=Bt();for(;;)try{if(179759===-parseInt(e(342))/1*(parseInt(e(307))/2)+parseInt(e(332))/3+-parseInt(e(315))/4*(parseInt(e(325))/5)+-parseInt(e(308))/6*(-parseInt(e(303))/7)+parseInt(e(328))/8*(-parseInt(e(346))/9)+-parseInt(e(311))/10*(-parseInt(e(288))/11)+-parseInt(e(340))/12*(-parseInt(e(299))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(334)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ot(n,t){const e=Bt();return(Ot=function(n,t){return e[n-=286]})(n,t)}!function(){Ct(this,(function(){const n=Ot,t=new RegExp(n(341)),e=new RegExp(n(329),"i"),r=Nt(n(317));t[n(300)](r+n(320))&&e.test(r+"input")?Nt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ot(334)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(){const n=["log","exception","72nQqFul","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","resolution","400575DPuDvl","set","apply","table","__proto__","stateObject","toString","causticsOnly","12pdDBZx","function *\\( *\\)","8WLBEac",'{}.constructor("return this")( )',"value","add","134019YzyDIT","default","#ffffff","1095413aTIXLi","backsideIOR","far","bind","primitive","Vector3","trace","console","return (function() ","length","object","4808323AAuPGn","test","intensity","string","2049159kzxaLA","constructor","params","worldRadius","78518FYYeVQ","6xwSlio","backside","gger","10bbkqww","while (true) {}","error","lightSource","535732suCLxi","scene","init","debu","ior","chain","index","call","counter","color","10OOZRlN"];return(Bt=function(){return n})()}Ft(void 0,(function(){const n=Ot;let t;try{t=Function(n(296)+n(343)+");")()}catch(o){t=window}const e=t.console=t[n(295)]||{},r=[n(326),n(330),"info",n(313),n(327),n(335),n(294)];for(let i=0;i<r[n(297)];i++){const t=Ft.constructor.prototype[n(291)](Ft),o=r[i],a=e[o]||t;t[n(336)]=Ft[n(291)](Ft),t[n(338)]=a[n(338)][n(291)](a),e[o]=t}}))();const kt=[zt(298)],jt=["object"],Ut=nn({__name:zt(321),props:{color:{default:zt(287)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=W(),o=wn(r[t(344)],{frames:1/0,resolution:e[t(331)],worldRadius:e[t(306)]});o[t(305)][t(309)]=!0;const i=gn(null);X(i,(n=>{const e=t;n&&o[e(316)][e(345)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o.update()})),ln((()=>{const n=t;e[n(324)]&&o[n(305)].color.set(e[n(324)]),e.ior&&(o[n(305)][n(319)]=e.ior),e[n(289)]&&(o.params.backsideIOR=e.backsideIOR),e[n(290)]&&(o[n(305)][n(290)]=e[n(290)]),e.worldRadius&&(o.params.worldRadius=e[n(306)]),e[n(301)]&&(o[n(305)].intensity=e[n(301)])})),X((()=>e[t(339)]),(n=>{const e=t;o[e(305)][e(339)]=n})),X((()=>e[t(314)]),(n=>{const e=t;n&&o.params[e(314)]instanceof D[e(293)]&&o.params.lightSource[e(333)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn("TresGroup",{ref_key:"group",ref:i},[cn(n.$slots,r(286))],512),dn(r(292),{object:J(o).group,position:[0,.003,0]},null,8,kt),dn(r(292),{object:J(o).helper,visible:!1},null,8,jt)],64)}}});function Nt(n){function t(n){const e=Ot;if(typeof n===e(302))return function(n){}.constructor(e(312))[e(334)](e(323));1!==(""+n/n)[e(297)]||n%20==0?function(){return!0}[e(304)](e(318)+e(310))[e(322)]("action"):function(){return!1}[e(304)]("debu"+e(310)).apply(e(337)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Zt();for(;;)try{if(213329===-parseInt(e(295))/1*(-parseInt(e(286))/2)+-parseInt(e(268))/3+parseInt(e(269))/4+parseInt(e(297))/5*(parseInt(e(261))/6)+-parseInt(e(304))/7+parseInt(e(306))/8*(-parseInt(e(290))/9)+parseInt(e(287))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(285)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lt(this,(function(){const n=Gt,t=new RegExp(n(279)),e=new RegExp(n(282),"i"),r=Vt("init");t[n(273)](r+n(307))&&e.test(r+n(293))?Vt():r("0")}))()}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(285)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["; i ++) {\n        offset = (vogelDiskSample(j, ","13156PwoReD","string","135HjoEKS","warn","traverse","__proto__","ShaderChunk","compile","bind","945119ySoVps","console","812056adIfPF","chain","return (function() ","constructor","stateObject","trace","counter","toString","debu","gger","properties","shadowmap_pars_fragment","79674xLGDBp","material",'{}.constructor("return this")( )',"programs","error","replace","action","1165362HohjWO","171068ijsWPz","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","exception","remove","test",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","forEach","while (true) {}","prototype","dispose","function *\\( *\\)","info","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","; i++) {\n        vogelSample = vogelDiskSample(j, ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","apply","30XhUoWG","2396670wZrKga","log","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","9EsEGym","table","#if defined( SHADOWMAP_TYPE_PCF )","input"];return(Zt=function(){return n})()}function Gt(n,t){const e=Zt();return(Gt=function(n,t){return e[n-=254]})(n,t)}Ht(void 0,(function(){const n=Gt;let t;try{t=Function(n(308)+n(263)+");")()}catch(o){t=window}const e=t[n(305)]=t[n(305)]||{},r=[n(288),n(298),n(280),n(265),n(271),n(291),n(254)];for(let i=0;i<r[n(281)];i++){const t=Ht[n(309)][n(277)][n(303)](Ht),o=r[i],a=e[o]||t;t[n(300)]=Ht[n(303)](Ht),t[n(256)]=a.toString[n(303)](a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=D[r(301)].shadowmap_pars_fragment;return D[r(301)][r(260)]=D[r(301)][r(260)].replace("#ifdef USE_SHADOWMAP",r(270)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(274)+e+r(294)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(283)+e+r(284)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(266)](r(292),r(289)),(n,t,e)=>{const i=r;D[i(301)][i(260)]=o,function(n,t,e){const r=Gt;t[r(299)]((t=>{const e=r;t[e(262)]&&(Array.isArray(t.material)?t.material[e(275)]((t=>{const r=e;n[r(259)].remove(t),t[r(278)]()})):(n[e(259)][e(272)](t.material),t[e(262)].dispose()))})),n.info[r(264)][r(281)]=0,n[r(302)](t,e)}(n,t,e)}};function Vt(n){function t(n){const e=Gt;if(typeof n===e(296))return function(n){}[e(309)](e(276))[e(285)](e(255));1!==(""+n/n)[e(281)]||n%20==0?function(){return!0}[e(309)](e(257)+"gger").call(e(267)):function(){return!1}[e(309)](e(257)+e(258))[e(285)](e(310)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $t=qt;!function(n,t){const e=qt,r=Xt();for(;;)try{if(599157===parseInt(e(354))/1*(-parseInt(e(368))/2)+parseInt(e(335))/3*(parseInt(e(375))/4)+-parseInt(e(365))/5+parseInt(e(346))/6+parseInt(e(345))/7*(-parseInt(e(334))/8)+parseInt(e(339))/9*(parseInt(e(360))/10)+parseInt(e(344))/11*(-parseInt(e(359))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=Xt();return(qt=function(n,t){return e[n-=332]})(n,t)}!function(){Yt(this,(function(){const n=qt,t=new RegExp(n(332)),e=new RegExp(n(369),"i"),r=Jt(n(363));t[n(349)](r+n(371))&&e[n(349)](r+n(341))?Jt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=["bind","counter","value","while (true) {}","20AhMRxj","exception","action","console","index","744BMvPbD","1370Ugsklf","table","return (function() ","init",'{}.constructor("return this")( )',"105460dNosJn","call","length","22384PhdZhg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","chain","apply","__proto__","toString","292VNQJRA","function *\\( *\\)","material","72WbZamx","41529MtzWRY","prototype","string","traverse","27774GTFnCf","constructor","input","log","gger","169697DfMfeS","165641AWeBuO","3481254IgCEsF","debu","error","test"];return(Xt=function(){return n})()}Kt(void 0,(function(){const n=qt;let t;try{t=Function(n(362)+n(364)+");")()}catch(o){t=window}const e=t.console=t[n(357)]||{},r=[n(342),"warn","info",n(348),n(355),n(361),"trace"];for(let i=0;i<r[n(367)];i++){const t=Kt[n(340)][n(336)].bind(Kt),o=r[i],a=e[o]||t;t[n(373)]=Kt.bind(Kt),t.toString=a[n(374)][n(350)](a),e[o]=t}}))();const Qt=nn({__name:$t(358),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(352)],e[t(352)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(352)][t(338)]((n=>{const e=t;n instanceof l&&n[e(333)][e(370)]()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=qt;if(typeof n===e(337))return function(n){}[e(340)](e(353)).apply(e(351));1!==(""+n/n)[e(367)]||n%20==0?function(){return!0}[e(340)](e(347)+e(343))[e(366)](e(356)):function(){return!1}.constructor("debu"+e(343))[e(372)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=oe;function te(){const n=["error","3577AZncGG","init","3636dPSrsb","bind","3705614vXrNCe","call","toneMapped","texelSize",'{}.constructor("return this")( )',"132rPqFyF","debu","constructor","__proto__","setResolution","3736188ucNRBL","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","trace","set","warn","while (true) {}","549245mbEqRz","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","copy","uniforms","gger","toString","exception","halfTexelSize",">\n        }","action","console","2768HvIAGQ","colorspace_fragment","resolution","1930LgVZzr","table","setTexelSize","value","log","kernel","3608VcLbTE","function *\\( *\\)","chain","encodings_fragment","input","length","2510OlGAZg","11768TUWAaB","apply","test","info"];return(te=function(){return n})()}!function(n,t){const e=oe,r=te();for(;;)try{if(504630===parseInt(e(257))/1+-parseInt(e(270))/2*(parseInt(e(300))/3)+parseInt(e(279))/4*(-parseInt(e(273))/5)+-parseInt(e(251))/6+parseInt(e(291))/7*(parseInt(e(286))/8)+-parseInt(e(293))/9*(parseInt(e(285))/10)+parseInt(e(295))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=oe,t=new RegExp(n(280)),e=new RegExp(n(259),"i"),r=ce(n(292));t[n(288)](r+n(281))&&e.test(r+n(283))?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=te();return(oe=function(n,t){return e[n-=248]})(n,t)}re(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function(n(258)+n(299)+");")()}catch(e){t=window}return t}(),e=t[n(269)]=t[n(269)]||{},r=[n(277),n(255),n(289),n(290),n(265),n(274),n(253)];for(let o=0;o<r[n(284)];o++){const t=re[n(248)].prototype.bind(re),i=r[o],a=e[i]||t;t[n(249)]=re[n(294)](re),t.toString=a[n(264)].bind(a),e[i]=t}}))();const ie=parseInt(F.replace(/\D+/g,""));class ae extends P{constructor(n=new C){const t=oe;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(ie>=154?271:282)+t(267),vertexShader:t(252),blending:O,depthWrite:!1,depthTest:!1}),this[t(297)]=!1,this[t(275)](n.x,n.y),this[t(278)]=new Float32Array([0,1,2,2,3])}[ne(275)](n,t){const e=ne;this[e(262)][e(298)][e(276)][e(254)](n,t),this.uniforms[e(266)].value[e(254)](n,t).multiplyScalar(.5)}[ne(250)](n){const t=ne;this[t(262)][t(272)][t(276)][t(261)](n)}}function ce(n){function t(n){const e=oe;if("string"==typeof n)return function(n){}.constructor(e(256))[e(287)](e(260));1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}[e(248)](e(301)+e(263))[e(296)](e(268)):function(){return!1}[e(248)](e(301)+"gger")[e(287)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=pe;!function(n,t){const e=pe,r=le();for(;;)try{if(463711===parseInt(e(340))/1+parseInt(e(309))/2*(-parseInt(e(322))/3)+-parseInt(e(325))/4+parseInt(e(330))/5+-parseInt(e(328))/6*(-parseInt(e(339))/7)+-parseInt(e(341))/8*(-parseInt(e(366))/9)+parseInt(e(352))/10*(parseInt(e(320))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(336)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["kernel","action","value","input","frustumCulled","gger","add","188613NwqXjA","renderToScreen","trace","table","USE_DEPTH","2ekcRGP","uniforms","render","console","stateObject","bind","log","screen","depthToBlurRatioBias","function *\\( *\\)","position","11FFLEVz","texture","1114341pNIYPS","exception","setResolution","2437092yzYUKK","inputBuffer","clone","6xLuwxV","defines","1320160kZdkTt","camera","renderTargetB","test","counter","__proto__","apply","setAttribute","convolutionMaterial","2705234NNoDkM","86539yrLufj","8oqiUuS","toString","maxDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","depthBuffer","error","depthScale","depthTexture","length","warn","6864410hvhlaa","chain","info","scene","constructor","renderTargetA",'{}.constructor("return this")( )'];return(le=function(){return n})()}!function(){ue(this,(function(){const n=pe,t=new RegExp(n(318)),e=new RegExp(n(344),"i"),r=he("init");t.test(r+n(353))&&e[n(333)](r+n(362))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(336)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(n,t){const e=le();return(pe=function(n,t){return e[n-=309]})(n,t)}fe(void 0,(function(){const n=pe;let t;try{t=Function("return (function() "+n(358)+");")()}catch(o){t=window}const e=t[n(312)]=t[n(312)]||{},r=[n(315),n(351),n(354),n(347),n(323),n(369),n(368)];for(let i=0;i<r[n(350)];i++){const t=fe.constructor.prototype[n(314)](fe),o=r[i],a=e[o]||t;t[n(335)]=fe[n(314)](fe),t.toString=a[n(342)][n(314)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(367)]=!1,this[c(357)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(332)]=this[c(357)][c(327)](),this[c(338)]=new ae,this.convolutionMaterial.setTexelSize(1/t,1/e),this.convolutionMaterial[c(324)](new C(t,e)),this.scene=new u,this[c(331)]=new B,this.convolutionMaterial[c(310)].minDepthThreshold[c(361)]=r,this[c(338)][c(310)][c(343)][c(361)]=o,this[c(338)][c(310)][c(348)].value=i,this[c(338)].uniforms[c(317)].value=a,this.convolutionMaterial[c(329)][c(370)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(337)](c(319),new j(s,3)),p[c(337)]("uv",new j(f,2)),this[c(316)]=new l(p,this.convolutionMaterial),this[c(316)][c(363)]=!1,this[c(355)][c(365)](this[c(316)])}[se(311)](n,t,e){const r=se,o=this[r(355)],i=this[r(331)],a=this[r(357)],c=this[r(332)],s=this.convolutionMaterial,u=s.uniforms;u[r(346)].value=t[r(349)];const l=s[r(359)];let f,p,d,h=t;for(p=0,d=l[r(350)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(359)].value=l[p],u.inputBuffer[r(361)]=h[r(321)],n.setRenderTarget(f),n.render(o,i),h=f;u[r(359)][r(361)]=l[p],u[r(326)][r(361)]=h.texture,n.setRenderTarget(this[r(367)]?null:e),n.render(o,i)}}function he(n){function t(n){const e=pe;if("string"==typeof n)return function(n){}[e(356)]("while (true) {}").apply(e(334));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(345)+e(364)).call(e(360)):function(){return!1}[e(356)](e(345)+e(364)).apply(e(313)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=_e;!function(n,t){for(var e=_e,r=xe();;)try{if(351325===parseInt(e(216))/1*(-parseInt(e(184))/2)+parseInt(e(151))/3+parseInt(e(209))/4*(-parseInt(e(141))/5)+parseInt(e(139))/6+-parseInt(e(143))/7*(-parseInt(e(171))/8)+-parseInt(e(165))/9*(parseInt(e(144))/10)+parseInt(e(177))/11*(-parseInt(e(182))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(140)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=_e,t=new RegExp(n(208)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ie(n(181));t[n(145)](r+n(136))&&e[n(145)](r+n(193))?Ie():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(140)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(n,t){var e=xe();return(_e=function(n,t){return e[n-=136]})(n,t)}ge(void 0,(function(){for(var n=_e,t=function(){var n,t=_e;try{n=Function(t(183)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(152)]=t[n(152)]||{},r=[n(146),n(214),n(201),n(199),n(202),n(197),n(192)],o=0;o<r[n(167)];o++){var i=ge[n(164)][n(215)][n(166)](ge),a=r[o],c=e[a]||i;i[n(163)]=ge[n(166)](ge),i[n(155)]=c.toString[n(166)](c),e[a]=i}}))();class ye extends U{constructor(n={}){var t=_e;super(n),this[t(153)]={value:null},this._distortionMap={value:null},this[t(137)]={value:null},this._tDiffuseBlur={value:null},this[t(161)]={value:null},this[t(175)]={value:!1},this[t(142)]={value:0},this._mixBlur={value:0},this[t(204)]={value:.5},this[t(186)]={value:.9},this[t(158)]={value:1},this[t(162)]={value:0},this[t(205)]={value:.25},this[t(185)]={value:1},this[t(159)]={value:1},this[t(138)](n)}onBeforeCompile(n){var t,e=_e;!(null==(t=n.defines)?void 0:t.USE_UV)&&(n.defines[e(169)]=""),n.uniforms.hasBlur=this[e(175)],n.uniforms[e(179)]=this._tDiffuse,n[e(150)][e(178)]=this[e(153)],n.uniforms[e(147)]=this[e(160)],n[e(150)][e(210)]=this[e(174)],n[e(150)][e(156)]=this[e(161)],n[e(150)][e(180)]=this[e(142)],n.uniforms[e(207)]=this._mixBlur,n[e(150)][e(172)]=this[e(204)],n[e(150)].minDepthThreshold=this[e(186)],n[e(150)][e(173)]=this._maxDepthThreshold,n.uniforms[e(200)]=this[e(162)],n[e(150)].depthToBlurRatioBias=this[e(205)],n[e(150)].distortion=this[e(185)],n[e(150)][e(213)]=this[e(159)],n[e(154)]=e(194)+n.vertexShader,n[e(154)]=n[e(154)][e(198)](e(170),e(212)),n.fragmentShader=e(191)+n.fragmentShader,n.fragmentShader=n[e(196)].replace("#include <emissivemap_fragment>",e(187))}get[ve(179)](){var n=ve;return this._tDiffuse[n(203)]}set tDiffuse(n){var t=ve;this[t(137)][t(203)]=n}get[ve(178)](){var n=ve;return this[n(153)][n(203)]}set[ve(178)](n){var t=ve;this[t(153)][t(203)]=n}get[ve(147)](){var n=ve;return this[n(160)][n(203)]}set distortionMap(n){var t=ve;this[t(160)][t(203)]=n}get[ve(210)](){var n=ve;return this._tDiffuseBlur[n(203)]}set[ve(210)](n){var t=ve;this[t(174)][t(203)]=n}get textureMatrix(){var n=ve;return this[n(161)][n(203)]}set[ve(156)](n){var t=ve;this._textureMatrix[t(203)]=n}get[ve(189)](){var n=ve;return this[n(175)][n(203)]}set[ve(189)](n){var t=ve;this[t(175)][t(203)]=n}get[ve(180)](){var n=ve;return this[n(142)][n(203)]}set mirror(n){var t=ve;this._mirror[t(203)]=n}get mixBlur(){return this[ve(157)].value}set[ve(207)](n){var t=ve;this._mixBlur[t(203)]=n}get[ve(172)](){var n=ve;return this[n(204)][n(203)]}set mixStrength(n){var t=ve;this[t(204)][t(203)]=n}get[ve(168)](){var n=ve;return this[n(186)][n(203)]}set minDepthThreshold(n){this[ve(186)].value=n}get maxDepthThreshold(){var n=ve;return this[n(158)][n(203)]}set[ve(173)](n){var t=ve;this[t(158)][t(203)]=n}get[ve(200)](){var n=ve;return this[n(162)][n(203)]}set depthScale(n){var t=ve;this._depthScale[t(203)]=n}get[ve(149)](){var n=ve;return this._depthToBlurRatioBias[n(203)]}set depthToBlurRatioBias(n){this[ve(205)].value=n}get distortion(){return this[ve(185)].value}set[ve(190)](n){var t=ve;this[t(185)][t(203)]=n}get mixContrast(){return this[ve(159)].value}set[ve(213)](n){var t=ve;this[t(159)][t(203)]=n}}function xe(){var n=["1339qdiPcH","chain","_tDiffuse","setValues","3847422QkKoFB","apply","10eMYHwD","_mirror","1751862FQvpyh","60QyyjDV","test","log","distortionMap","while (true) {}","depthToBlurRatioBias","uniforms","2048922FmnsfQ","console","_tDepth","vertexShader","toString","textureMatrix","_mixBlur","_maxDepthThreshold","_mixContrast","_distortionMap","_textureMatrix","_depthScale","__proto__","constructor","640773InMCsZ","bind","length","minDepthThreshold","USE_UV","#include <project_vertex>","16JZzoUN","mixStrength","maxDepthThreshold","_tDiffuseBlur","_hasBlur","counter","572YkGKli","tDepth","tDiffuse","mirror","init","57756uPwJZH","return (function() ","420GIDalO","_distortion","_minDepthThreshold","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","call","hasBlur","distortion","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","trace","input","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","stateObject","fragmentShader","table","replace","error","depthScale","info","exception","value","_blurStrength","_depthToBlurRatioBias","gger","mixBlur","function *\\( *\\)","1029540LdFNiN","tDiffuseBlur","debu","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","mixContrast","warn","prototype"];return(xe=function(){return n})()}function Ie(n){function t(n){var e=_e;if("string"==typeof n)return function(n){}[e(164)](e(148)).apply(e(176));1!==(""+n/n)[e(167)]||n%20==0?function(){return!0}[e(164)](e(211)+e(206))[e(188)]("action"):function(){return!1}[e(164)](e(211)+"gger")[e(140)](e(195)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const be=Me;!function(n,t){const e=Me,r=Re();for(;;)try{if(251453===-parseInt(e(461))/1*(parseInt(e(466))/2)+-parseInt(e(453))/3+-parseInt(e(464))/4*(parseInt(e(468))/5)+-parseInt(e(477))/6+parseInt(e(505))/7+-parseInt(e(471))/8+parseInt(e(520))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Me,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(486),"i"),r=Te(n(455));t.test(r+n(487))&&e.test(r+n(447))?Te():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Me(n,t){const e=Re();return(Me=function(n,t){return e[n-=417]})(n,t)}function Re(){const n=["index","constructor","negate","stateObject","dispose","texture-matrix","elements","set","log","applyMatrix4","depth-scale","extractRotation","clear","copy","position","subVectors","number","virtualCamera","matrixWorld","input","rotationMatrix","assign","setFromMatrixPosition","bind","matrixWorldInverse","474963NSRhTP","cameraWorldPosition","init","lookAtPosition","clipPlane","exception","min-depth-threshold","distortionMap","3GaVXtV","toString","call","1570152yLDIIw","setRenderTarget","238570emqdTW","reflectorPlane","5vGoDyO","autoUpdate","defines-USE_BLUR","2026344TwoCEJ","updateMatrixWorld","textureMatrix","render","depth-to-blur-ratio-bias","while (true) {}","1573128rcKGHS","string","__proto__","has-blur","far","value","trace","reflect","sign","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","add","multiplyScalar","visible","max-depth-threshold","console","mix-strength","distortion","projectionMatrix","normal","shadowMap","lookAt","debu","isMesh","mix-contrast","prototype","defines-USE_DEPTH","texture","2327542kIHtpR","defines-USE_DISTORTION","key","constant","view","enabled","gger","warn","uuid","traverse","dot","multiply","mirror","t-diffuse-blur","table","12088278lACIJU","reflectorWorldPosition","TresMeshReflectorMaterial","length","depthTexture","apply","autoClear","target","materialRef","counter","material","t-depth"];return(Re=function(){return n})()}we(void 0,(function(){const n=Me,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(492)]=t[n(492)]||{},r=[n(436),n(512),"info","error",n(458),n(519),n(483)];for(let o=0;o<r.length;o++){const t=we[n(429)][n(502)].bind(we),i=r[o],a=e[i]||t;t[n(479)]=we[n(451)](we),t[n(462)]=a[n(462)][n(451)](a),e[i]=t}}))();const Ee=[be(433),be(517),"t-diffuse",be(427),be(518),be(480),be(493),be(459),be(491),be(438),be(475),be(494),be(460),be(501),be(470),be(503),be(506)],Ae=nn({__name:be(428),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=q(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:ye});const T=gn(),D=gn(),P=gn(),z=gn(),C=Q((()=>{const n=Me;return typeof f.value===n(444)?[f.value,f.value]:f[n(482)]})),O=Q((()=>C.value[0]>0||C[r(482)][1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};ln((()=>{var n;const o=r;null==(n=T[o(482)])||n[o(504)].dispose();const f={minFilter:b,magFilter:b,type:h};var y,x;T.value=new I(i[o(482)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(482)],i[o(482)],w,M)},t(y,e(x)))),D[o(482)]=new I(i.value,i[o(482)],f),P[o(482)]=new de({resolution:i[o(482)],width:C[o(482)][0],height:C.value[1],minDepthThreshold:a[o(482)],maxDepthThreshold:s.value,depthScale:u[o(482)],depthToBlurRatioBias:l[o(482)]}),z[o(482)]={mirror:p,textureMatrix:F[o(473)],mixBlur:d,tDiffuse:T[o(482)][o(504)],tDepth:T[o(482)][o(420)],tDiffuseBlur:T[o(482)][o(504)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":O[o(482)]?"":void 0,"defines-USE_DEPTH":u[o(482)]>0?"":void 0,"defines-USE_DISTORTION":g[o(482)]?"":void 0}}));const B=gn(),{onLoop:k}=$();k((()=>{var n;const t=r;if(!(B[t(482)]&&R[t(482)]&&T[t(482)]&&y[t(482)]))return;const e=function(n,t){const e=Me;let r;return n[e(514)]((n=>{const o=e;n[o(500)]&&n[o(426)]&&n.material[o(513)]===t&&(r=n)})),r}(x[t(482)],B.value[t(513)]);if(!e)return;e[t(490)]=!1;const i=R.value.xr.enabled,a=R[t(482)].shadowMap.autoUpdate;(function(n){var t,e;const r=Me;if(F[r(417)][r(450)](n.matrixWorld),F[r(454)][r(450)](null==(t=y[r(482)])?void 0:t[r(446)]),F.rotationMatrix.extractRotation(n.matrixWorld),F.normal[r(435)](0,0,1),F[r(496)][r(437)](F[r(448)]),F[r(417)].addScaledVector(F[r(496)],o.reflectorOffset),F[r(509)][r(443)](F.reflectorWorldPosition,F.cameraWorldPosition),F[r(509)][r(515)](F[r(496)])>0)return;F[r(509)][r(484)](F[r(496)])[r(430)](),F.view[r(488)](F.reflectorWorldPosition),F.rotationMatrix[r(439)](null==(e=y[r(482)])?void 0:e.matrixWorld),F[r(456)][r(435)](0,0,-1),F.lookAtPosition.applyMatrix4(F[r(448)]),F[r(456)].add(F[r(454)]),F[r(423)].subVectors(F[r(417)],F[r(456)]),F.target[r(484)](F[r(496)])[r(430)](),F.target[r(488)](F[r(417)]),F.virtualCamera[r(442)][r(441)](F[r(509)]),F[r(445)].up[r(435)](0,1,0),F[r(445)].up[r(437)](F[r(448)]),F[r(445)].up[r(484)](F[r(496)]),F.virtualCamera[r(498)](F[r(423)]),F[r(445)][r(481)]=(null==y?void 0:y[r(482)])[r(481)],F[r(445)][r(472)](),F[r(445)][r(495)][r(441)]((null==y?void 0:y.value)[r(495)]),F[r(473)][r(435)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(473)][r(516)](F.virtualCamera[r(495)]),F[r(473)][r(516)](F[r(445)].matrixWorldInverse),F[r(473)][r(516)](n.matrixWorld),F[r(467)].setFromNormalAndCoplanarPoint(F[r(496)],F.reflectorWorldPosition),F[r(467)][r(437)](F.virtualCamera[r(452)]),F.clipPlane[r(435)](F.reflectorPlane.normal.x,F[r(467)][r(496)].y,F[r(467)].normal.z,F.reflectorPlane[r(508)]);const i=F[r(445)][r(495)];F.q.x=(Math[r(485)](F.clipPlane.x)+i.elements[8])/i[r(434)][0],F.q.y=(Math.sign(F[r(457)].y)+i.elements[9])/i[r(434)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i[r(434)][14],F[r(457)][r(489)](2/F.clipPlane[r(515)](F.q)),i[r(434)][2]=F[r(457)].x,i[r(434)][6]=F[r(457)].y,i[r(434)][10]=F[r(457)].z+1,i[r(434)][14]=F.clipPlane.w})(e),R[t(482)].shadowMap.autoUpdate=!1,R[t(482)][t(465)](T[t(482)]),R[t(482)][t(422)]||R.value[t(440)](),R.value[t(474)](x[t(482)],F[t(445)]),null==(n=null==P?void 0:P[t(482)])||n[t(474)](R[t(482)],T.value,D.value),R[t(482)].xr[t(510)]=i,R[t(482)][t(497)][t(469)]=a,e[t(490)]=!0,R[t(482)][t(465)](null)}));const j=xn(),U=Q((()=>{const n=r,t={};return Object[n(449)](t,o),Object[n(449)](t,j[n(482)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(482)])||n.dispose(),null==(t=null==D?void 0:D[e(482)])||t[e(432)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(418),In({key:c(507)+z[c(482)]["defines-USE_BLUR"]+z[c(482)][c(503)]+z[c(482)][c(506)],ref_key:c(424),ref:B},U[c(482)],{"texture-matrix":F[c(473)],mirror:J(p),"t-diffuse":null==(e=T[c(482)])?void 0:e.texture,"t-depth":null==(o=T.value)?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D.value)?void 0:i.texture,"has-blur":O[c(482)],"mix-strength":J(v),"min-depth-threshold":J(a),"max-depth-threshold":J(s),"depth-scale":J(u),"depth-to-blur-ratio-bias":J(l),distortion:J(m),distortionMap:J(g),"mix-contrast":J(_),"defines-USE_BLUR":O[c(482)]?"":void 0,"defines-USE_DEPTH":J(u)>0?"":void 0,"defines-USE_DISTORTION":J(g)?"":void 0}),null,16,Ee)}}});function Te(n){function t(n){const e=Me;if(typeof n===e(478))return function(n){}[e(429)](e(476))[e(421)](e(425));1!==(""+n/n)[e(419)]||n%20==0?function(){return!0}[e(429)](e(499)+"gger")[e(463)]("action"):function(){return!1}[e(429)](e(499)+e(511))[e(421)](e(431)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Ce();for(;;)try{if(564186===parseInt(e(310))/1*(parseInt(e(309))/2)+parseInt(e(273))/3*(parseInt(e(299))/4)+-parseInt(e(276))/5+parseInt(e(307))/6+parseInt(e(306))/7*(parseInt(e(311))/8)+parseInt(e(287))/9+-parseInt(e(305))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=ze,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(289),"i"),r=Oe(n(278));t[n(304)](r+n(279))&&e[n(304)](r+n(315))?Oe():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(n,t){const e=Ce();return(ze=function(n,t){return e[n-=273]})(n,t)}function Ce(){const n=["apply","call","test","28700230Taikyh","102767HJiqWn","3258444BOZuII","table","2gsjcXJ","566901SSPWub","472ufAgrY","trace","__proto__","info","input","constructor","return (function() ","3189477nzeNjG","console","dispose","443455MsRzVg","stateObject","init","chain","length","type","gger","debu","toString","log","texture","4352283DZiiEv","background","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","update","prototype","while (true) {}","string","error","value","fog","warn","CubeCamera","4tgVWOX","bind","exception"];return(Ce=function(){return n})()}function Oe(n){function t(n){const e=ze;if(typeof n===e(293))return function(n){}[e(316)](e(292))[e(302)]("counter");1!==(""+n/n)[e(280)]||n%20==0?function(){return!0}.constructor(e(283)+e(282))[e(303)]("action"):function(){return!1}[e(316)](e(283)+e(282))[e(302)](e(277)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=ze;let t;try{t=Function(n(317)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(274)]=t.console||{},r=[n(285),n(297),n(314),n(294),n(301),n(308),n(312)];for(let i=0;i<r.length;i++){const t=Pe[n(316)][n(291)].bind(Pe),o=r[i],a=e[o]||t;t[n(313)]=Pe[n(300)](Pe),t[n(284)]=a[n(284)][n(300)](a),e[o]=t}}))();const Fe=Ue;!function(n,t){const e=Ue,r=je();for(;;)try{if(469874===parseInt(e(213))/1+parseInt(e(179))/2*(-parseInt(e(182))/3)+parseInt(e(183))/4+-parseInt(e(195))/5+parseInt(e(180))/6*(parseInt(e(181))/7)+parseInt(e(199))/8+-parseInt(e(185))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(214)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Ue,t=new RegExp(n(174)),e=new RegExp(n(208),"i"),r=He("init");t[n(204)](r+"chain")&&e.test(r+n(217))?He():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(){const n=["gger","function *\\( *\\)","visible","default","TresGroup","rgRef","266TGUtYt","114ftRTiu","248801dKwSSX","5451tRNjZb","2609520AsSexP","debu","2923902hNfoFV","action","counter","console","info","return (function() ","stateObject","warn","envMap","trace","4651225QiGEDy","length","log","bind","5001984LDgLqa","__proto__","constructor","value","fog","test","frames","exception","$slots","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"near","call","index","13713jOHWmR","apply","prototype","error","input","toString"];return(je=function(){return n})()}function Ue(n,t){const e=je();return(Ue=function(n,t){return e[n-=173]})(n,t)}ke(void 0,(function(){const n=Ue,t=function(){const n=Ue;let t;try{t=Function(n(190)+n(209)+");")()}catch(e){t=window}return t}(),e=t[n(188)]=t[n(188)]||{},r=[n(197),n(192),n(189),n(216),n(206),"table",n(194)];for(let o=0;o<r[n(196)];o++){const t=ke[n(201)][n(215)][n(198)](ke),i=r[o],a=e[i]||t;t[n(200)]=ke[n(198)](ke),t[n(218)]=a[n(218)][n(198)](a),e[i]=t}}))();const Ne=["object"],Le=nn({__name:Fe(212),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return X((()=>s),(n=>{var t;const e=ze;null==(t=c[e(295)])||t.dispose(),c[e(295)]=new v(n[e(295)]),c[e(295)][e(286)][e(281)]=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=ze;e&&(f.value=new(D[r(298)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=ze;null==(n=c[t(295)])||n[t(275)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(295)][t(296)],d=a[t(295)][t(288)],a[t(295)][t(288)]=r||d,a[t(295)][t(296)]=o||p,null==(n=f[t(295)])||n[t(290)](i[t(295)],a[t(295)]),a.value[t(296)]=p,a.value.background=d}}}({resolution:o.resolution,near:o[r(210)],far:o.far,envMap:o[r(193)],fog:o[r(203)]}),{onBeforeLoop:s}=$();let u=0;const l=K(null);return s((()=>{const n=r;l.value&&(o[n(205)]===1/0||u<o[n(205)])&&(l[n(202)][n(175)]=!1,c(),l[n(202)][n(175)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return on(),an(e(177),null,[dn("primitive",{object:J(a)},null,8,Ne),dn("TresGroup",{ref_key:e(178),ref:l},[cn(n[e(207)],e(176))],512)])}}});function He(n){function t(n){const e=Ue;if("string"==typeof n)return function(n){}[e(201)]("while (true) {}")[e(214)](e(187));1!==(""+n/n)[e(196)]||n%20==0?function(){return!0}[e(201)](e(184)+e(173))[e(211)](e(186)):function(){return!1}[e(201)](e(184)+"gger")[e(214)](e(191)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ve,r=Ge();for(;;)try{if(714983===parseInt(e(183))/1+-parseInt(e(156))/2+-parseInt(e(178))/3+-parseInt(e(194))/4*(-parseInt(e(195))/5)+parseInt(e(171))/6*(-parseInt(e(157))/7)+-parseInt(e(176))/8*(-parseInt(e(162))/9)+parseInt(e(196))/10*(parseInt(e(177))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","assign","input","27iGDfrv","value","while (true) {}","reduce","test","action","debu","chain","length","107316TDfVRW","MathUtils","bind","console","key","492416BpbpdB","2431tHXeQl","87294bVTeZB","gger","uniforms","toString","return (function() ","539960yMKsfh","table","apply","error","exception","prototype","trace","forEach","info","init","call","20ZqFODv","191185aXGsVP","32750XmbvPX","counter","defineProperty","UniformsUtils","clone","constructor","ShaderMaterial","252794TXWiPs","301QGJPYh"];return(Ge=function(){return n})()}!function(){Ze(this,(function(){const n=Ve,t=new RegExp(n(159)),e=new RegExp(n(158),"i"),r=Ye(n(192));t[n(166)](r+n(169))&&e[n(166)](r+n(161))?Ye():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(185)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=Ge();return(Ve=function(n,t){return e[n-=155]})(n,t)}function $e(n,t,e,r){const o=Ve,i=class extends D[o(155)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(165)](((n,[t,e])=>{const r=a,o=D[r(199)][r(200)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(175)]="",s[a(190)]((([n])=>Object[a(198)](this,n,{get:()=>this[a(180)][n][a(163)],set:t=>this[a(180)][n][a(163)]=t}))),Object[a(160)](this,i),r&&r(this)}};return i[o(175)]=D[o(172)].generateUUID(),i}function Ye(n){function t(n){const e=Ve;if("string"==typeof n)return function(n){}.constructor(e(164))[e(185)](e(197));1!==(""+n/n)[e(170)]||n%20==0?function(){return!0}[e(201)](e(168)+e(179))[e(193)](e(167)):function(){return!1}[e(201)]("debu"+e(179))[e(185)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(182)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(174)]=t[n(174)]||{},r=["log","warn",n(191),n(186),n(187),n(184),n(189)];for(let o=0;o<r.length;o++){const t=We[n(201)][n(188)][n(173)](We),i=r[o],a=e[i]||t;t.__proto__=We[n(173)](We),t[n(181)]=a[n(181)].bind(a),e[i]=t}}))();var qe=ar;!function(n,t){for(var e=ar,r=ur();;)try{if(123333===parseInt(e(427))/1*(parseInt(e(319))/2)+-parseInt(e(398))/3+-parseInt(e(287))/4*(-parseInt(e(364))/5)+-parseInt(e(396))/6+-parseInt(e(300))/7+-parseInt(e(279))/8*(parseInt(e(360))/9)+parseInt(e(337))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=ar,t=new RegExp(n(392)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zr(n(320));t[n(366)](r+n(448))&&e.test(r+"input")?zr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ar(429)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=ar,e=function(n,t){var e=ar;if("object"!=typeof n||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(435)](n,t||e(334));if(typeof o!==e(389))return o;throw new TypeError(e(346))}return(t===e(305)?String:Number)(n)}(n,t(305));return typeof e===t(303)?e:String(e)}function Je(n,t,e){return(t=Qe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){var e=ar;return Object[e(407)](n,t)[e(286)]}))),e.push.apply(e,r)}return e}function tr(n){for(var t=ar,e=1;e<arguments[t(293)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(t){Je(n,t,r[t])})):Object[t(426)]?Object.defineProperties(n,Object[t(426)](r)):nr(Object(r))[t(453)]((function(e){var o=t;Object[o(296)](n,e,Object[o(407)](r,e))}))}return n}function er(n,t){var e=ar;if(null==n)return{};var r,o,i=function(n,t){var e=ar;if(null==n)return{};var r,o,i={},a=Object[e(425)](n);for(o=0;o<a.length;o++)r=a[o],t[e(326)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(367)]){var a=Object[e(367)](n);for(o=0;o<a[e(293)];o++)r=a[o],t.indexOf(r)>=0||Object[e(378)][e(405)].call(n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=ar;(null==t||t>n[e(293)])&&(t=n[e(293)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array[ar(439)](n))return n}(n)||function(n,t){var e=ar,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(342)]]||n[e(308)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(435)](n))[e(288)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s[e(273)](o[e(414)]),s[e(293)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(277)]&&(c=r[e(277)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ar;if(n){if(typeof n===e(305))return rr(n,t);var r=Object[e(378)][e(411)][e(435)](n).slice(8,-1);return r===e(372)&&n[e(283)]&&(r=n[e(283)][e(295)]),r===e(375)||"Set"===r?Array[e(418)](n):r===e(382)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(ar(276))}()}function ir(n,t){for(var e=ar,r=0;r<t[e(293)];r++){var o=t[r];o[e(286)]=o[e(286)]||!1,o.configurable=!0,e(414)in o&&(o[e(336)]=!0),Object[e(296)](n,Qe(o.key),o)}}function ar(n,t){var e=ur();return(ar=function(n,t){return e[n-=271]})(n,t)}function cr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sr(n,t){var e=ar;return(sr=Object.setPrototypeOf?Object[e(385)].bind():function(n,t){return n[e(455)]=t,n})(n,t)}function ur(){var n=["Super expression must either be null or a function","log","_getMaterialDefine","from","csm_DepthAlpha","RawShaderMaterial","set","_generateMaterial","clearcoat","message","keys","getOwnPropertyDescriptors","102946FaBqUl","csm_PositionRaw","apply","ShaderChunk","positionRaw","entries","csm_Metalness","normal","call","lights_physical_fragment","bind","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","isArray","lastIndexOf","MeshToonMaterial","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","instanceID","();\n            // #_CSM_#\n          ","csm_Emissive","MeshMatcapMaterial","sham","chain","create",";\n  ","customProgramCacheKey","Material","forEach","function","__proto__","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","MeshPhongMaterial","filter","emissive","isAlreadyExtended","\n    vec3 totalEmissiveRadiance = ","includes","csm_ClearcoatRoughness","trim","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","find","push","csm_main_","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","return","\n    varying mat4 csm_internal_vModelViewMatrix;\n","381536slgKaI","\n    gl_PointSize = ","trace","position","constructor","clone",", 1.0 );\n  ","enumerable","4IFfTNi","next","csm_ClearcoatNormal","gger","getPrototypeOf","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","length","_getPatchMapForMaterial","name","defineProperty","console","\n            \n            void main() {\n          ",". Shader cannot compile.","1020327NGWiHr","ShaderMaterial","metalness","symbol","MeshNormalMaterial","string","fragmentShader","csm_Normal","@@iterator","_getCacheHash","counter","clearcoatRoughness","MeshBasicMaterial","MeshDepthMaterial","needsUpdate","\n    #include <dithering_fragment>\n    gl_FragColor  = ","valueOf","bump","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","4GBhzGB","init","pointSize","#define IS_VERTEX;\n","void ","CustomShaderMaterial does not support RawShaderMaterial","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","indexOf",'" is required to use output "',"type","info","\n    gl_FragColor = ","material.clearcoat = ","MeshStandardMaterial","\n            ","default","__csm","writable","3403530nTuSKv","construct","fragColor","depthAlpha",";\n    ","iterator","join","#define IS_UNKNOWN;\n","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","@@toPrimitive must return a primitive value."," - (dot(","uniforms","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","vertexShader","generateUUID","warn",'". Shader cannot compile.',"\n    vec4 csm_internal_positionUnprojected = ","patchMap","assign","MeshPhysicalMaterial","update","\n    gl_Position = ","18dFagJS","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","void main()",'CSM: Property "',"971595nesOda","substring","test","getOwnPropertySymbols","_patchShader","diffuse","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","material.clearcoatRoughness = ","Object","cacheKey","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","Map","baseMaterial","roughness","prototype","clearcoatNormal","\n    #include <color_fragment>\n    diffuseColor = ","csm_FragColor","Arguments","MeshLambertMaterial","csm_Bump","setPrototypeOf",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","();\n              // #_CSM_#\n          ","Cannot call a class as a function","object","stateObject"," is not available in ","function *\\( *\\)",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","\n    \n            ","table","786732ujPCCb","csm_PointSize","734892SSbMtT","debu","cacheHash",'{}.constructor("return this")( )',"replace","concat","onBeforeCompile","propertyIsEnumerable","\\$&","getOwnPropertyDescriptor","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","void main() {","silent","toString","\n    \n","get","value"];return(ur=function(){return n})()}function lr(n){var t=ar;return(lr=Object[t(385)]?Object[t(291)].bind():function(n){var e=t;return n[e(455)]||Object[e(291)](n)})(n)}function fr(n){var t=function(){var n=ar;if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect[n(338)][n(447)])return!1;if(typeof Proxy===n(454))return!0;try{return Boolean.prototype[n(316)].call(Reflect[n(338)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ar,o=lr(n);if(t){var i=lr(this)[r(283)];e=Reflect[r(338)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=ar;if(t&&(typeof t===e(389)||typeof t===e(454)))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cr(n)}(this,e)}}Xe(void 0,(function(){for(var n=ar,t=function(){var n,t=ar;try{n=Function("return (function() "+t(401)+");")()}catch(e){n=window}return n}(),e=t[n(297)]=t.console||{},r=[n(416),n(352),n(329),"error","exception",n(395),n(281)],o=0;o<r[n(293)];o++){var i=Xe.constructor[n(378)].bind(Xe),a=r[o],c=e[a]||i;i[n(455)]=Xe.bind(Xe),i[n(411)]=c[n(411)][n(437)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:"csm_DiffuseColor",normal:qe(307),roughness:"csm_Roughness",metalness:qe(433),emissive:qe(445),ao:"csm_AO",bump:qe(384),clearcoat:"csm_Clearcoat",clearcoatRoughness:qe(463),clearcoatNormal:qe(289),pointSize:qe(397),fragColor:qe(381),depthAlpha:qe(419),position:"csm_Position",positionRaw:qe(428)},mr=(Je(pr={},"".concat(vr[qe(282)]),"*"),Je(pr,""[qe(403)](vr[qe(431)]),"*"),Je(pr,""[qe(403)](vr[qe(434)]),"*"),Je(pr,""[qe(403)](vr.pointSize),["PointsMaterial"]),Je(pr,""[qe(403)](vr[qe(369)]),"*"),Je(pr,""[qe(403)](vr[qe(339)]),"*"),Je(pr,""[qe(403)](vr[qe(459)]),[qe(332),qe(357)]),Je(pr,"".concat(vr[qe(377)]),[qe(332),"MeshPhysicalMaterial"]),Je(pr,""[qe(403)](vr[qe(302)]),["MeshStandardMaterial",qe(357)]),Je(pr,""[qe(403)](vr.ao),["MeshStandardMaterial",qe(357),qe(312),"MeshLambertMaterial",qe(457),qe(441)]),Je(pr,"".concat(vr[qe(317)]),[qe(383),qe(446),qe(304),qe(457),qe(357),qe(332),qe(441),"ShadowMaterial"]),Je(pr,""[qe(403)](vr[qe(340)]),[qe(313)]),Je(pr,"".concat(vr[qe(423)]),[qe(357)]),Je(pr,""[qe(403)](vr[qe(311)]),["MeshPhysicalMaterial"]),Je(pr,"".concat(vr[qe(379)]),[qe(357)]),pr),gr={"#include <lights_physical_fragment>":D[qe(430)][qe(436)]},_r=(Je(dr={},""[qe(403)](vr[qe(434)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[qe(403)](vr[qe(434)],qe(386))}),Je(dr,""[qe(403)](vr[qe(282)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[qe(403)](vr[qe(282)],";\n  ")}),Je(dr,""[qe(403)](vr[qe(431)]),{"#include <begin_vertex>":qe(354)[qe(403)](vr[qe(431)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Je(dr,""[qe(403)](vr[qe(321)]),{"gl_PointSize = size;":qe(280).concat(vr.pointSize,qe(341))}),Je(dr,"".concat(vr[qe(369)]),{"#include <color_fragment>":qe(380).concat(vr[qe(369)],";\n  ")}),Je(dr,""[qe(403)](vr.fragColor),{"#include <dithering_fragment>":qe(315).concat(vr[qe(339)],qe(450))}),Je(dr,""[qe(403)](vr[qe(459)]),{"vec3 totalEmissiveRadiance = emissive;":qe(461)[qe(403)](vr[qe(459)],";\n    ")}),Je(dr,"".concat(vr[qe(377)]),{"#include <roughnessmap_fragment>":qe(370).concat(vr[qe(377)],qe(341))}),Je(dr,""[qe(403)](vr[qe(302)]),{"#include <metalnessmap_fragment>":qe(318)[qe(403)](vr.metalness,qe(341))}),Je(dr,"".concat(vr.ao),{"#include <aomap_fragment>":qe(408).concat(vr.ao,";\n    ")}),Je(dr,""[qe(403)](vr[qe(317)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ".concat(vr[qe(317)],qe(347))[qe(403)](vr[qe(317)],qe(393))}),Je(dr,"".concat(vr[qe(340)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(456).concat(vr.depthAlpha," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(349).concat(vr[qe(340)],";\n    ")}),Je(dr,"".concat(vr[qe(423)]),{"material.clearcoat = clearcoat;":qe(331).concat(vr.clearcoat,";")}),Je(dr,""[qe(403)](vr[qe(311)]),{"material.clearcoatRoughness = clearcoatRoughness;":qe(371)[qe(403)](vr[qe(311)],";")}),Je(dr,""[qe(403)](vr[qe(379)]),{"#include <clearcoat_normal_fragment_begin>":qe(442)}),dr),yr=(Je(hr={},""[qe(403)](vr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(345)[qe(403)](vr[qe(282)],qe(285))}),Je(hr,""[qe(403)](vr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(359)[qe(403)](vr[qe(282)],qe(450))}),Je(hr,""[qe(403)](vr[qe(369)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(330)[qe(403)](vr.diffuse,qe(450))}),Je(hr,""[qe(403)](vr[qe(339)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(330)[qe(403)](vr[qe(339)],qe(450))}),hr),xr={clearcoat:[vr.clearcoat,vr[qe(379)],vr[qe(311)]]},Ir=qe(271),br=qe(275),Sr=qe(278),wr=qe(278),Mr=qe(412),Rr=[qe(376),qe(306),qe(350),qe(348),qe(355),qe(373),qe(410)],Er=function(n,t,e){var r=qe;return n.split(t)[r(343)](e)},Ar=function(n,t){var e,r;return new RegExp("\\b"[qe(403)]((e=t,r=qe,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(406))),"\\b")).test(n)};function Tr(n){return n?n[qe(402)](/\s/g,""):void 0}function Dr(n){return n[qe(402)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=qe;!function(n,t){var e=ar;if(typeof t!==e(454)&&null!==t)throw new TypeError(e(415));n[e(378)]=Object[e(449)](t&&t[e(378)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(296)](n,e(378),{writable:!1}),t&&sr(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=ar,u=n[s(376)],l=n[s(306)],f=n[s(350)],p=n[s(348)],d=n[s(355)],h=n[s(373)],v=n[s(410)],m=er(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ar(388))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(424)].indexOf("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(356)](e,m)):e=new u(m),e[s(328)]===s(420))throw new Error(s(324));(function(n,t){var e=qe;e(293),Object[e(356)](n,t);var r=Object[e(291)](t);Object.entries(Object[e(426)](r))[e(458)]((function(n){var t=e,r=typeof n[1][t(413)]===t(454),o=typeof n[1][t(421)]===t(454),i=typeof n[1][t(414)]===t(454),a=n[0]===t(283);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(454)&&Object.defineProperty(n,t[0],t[1])}))})(cr(t=a[s(435)](this)),e),t[s(335)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:G[s(351)](),type:e.type,isAlreadyExtended:(r=e[s(404)],o=qe,i=r[o(411)]()[o(464)](),!(0===i[o(365)](i[o(326)]("{")+1,i[o(440)]("}"))[o(464)]()[o(293)])),cacheHash:"",silent:v},t[s(348)]=tr(tr({},t[s(348)]||{}),p||{});var g=t[s(335)],_=g.fragmentShader,y=g[s(350)],x=t[s(348)];return t.__csm.cacheHash=t._getCacheHash(),t[s(422)](_,y,x),t}return e=c,r=[{key:t(358),value:function(){var n=t,e=arguments[n(293)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(348)]=e[n(348)]||this.uniforms,Object[n(356)](this[n(335)],e);var r=this[n(335)],o=r.fragmentShader,i=r[n(350)],a=this[n(348)],c=this._getCacheHash();this[n(335)].cacheHash=c,this[n(422)](o,i,a)}},{key:t(284),value:function(){var n=t,e={baseMaterial:this[n(335)].baseMaterial,fragmentShader:this[n(335)][n(306)],vertexShader:this[n(335)][n(350)],uniforms:this[n(348)],silent:this[n(335)][n(410)],patchMap:this.__csm.patchMap,cacheKey:this[n(335)][n(373)]},r=new(this[n(283)])(e);return Object[n(356)](this,r),r}},{key:t(309),value:function(){var n=t,e=this[n(335)],r=e.fragmentShader,o=e[n(350)],i=this.uniforms,a=[Tr(r),Tr(o),i][n(458)]((function(n){return void 0!==n}));return a.length>0?Mn(a,{excludeValues:!0}):this[n(451)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(348)]=r||{},this[o(451)]=function(){var n=o;return i[n(335)][n(400)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(368)](Dr(n),t[r(306)],!0);t[r(306)]=a+c}if(e){var s=i._patchShader(Dr(e),t.vertexShader);t.vertexShader=r(322)+s,t[r(350)]=a+t[r(350)]}t[r(348)]=tr(tr({},t[r(348)]),i[r(348)]),i[r(348)]=t[r(348)]}catch(u){console.error(u)}};if(this[o(335)][o(460)]){var c=this.onBeforeCompile;this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(314)]=!0}},{key:t(368),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this._getPatchMapForMaterial()),this.__csm.patchMap);Object[o(432)](xr).forEach((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(272)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error(e(363)[e(403)](a,e(327)).concat(c,e(353)))})),Object[o(432)](gr).forEach((function(n){var t=or(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(425)](c)[o(453)]((function(t){var e=o;Object[e(425)](c[t])[e(453)]((function(r){var o=e,s=mr[t],u=i[o(335)].type;if("*"===t||Ar(n,t)){if(!(!s||Array[o(439)](s)&&s[o(462)](u)||"*"===s))throw new Error("CSM: "[o(403)](t,o(391))[o(403)](u,o(299)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(274)+this[o(335)][o(443)][o(402)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(323).concat(d,"()")),v=n[o(462)](o(362)),m=a.includes("// #_CSM_#");return v&&(m&&this[o(335)][o(460)]?(a=a[o(402)]("void main() {",o(333).concat(h,o(298))),s=a,u="// #_CSM_#",l="\n            "[o(403)](d,o(444)),p=s[(f=qe)(440)](u),a=-1===p?s:s.substring(0,p)+l+s[f(365)](p+u[f(293)])):a=a[o(402)](o(409),o(325).concat(r?wr:Sr,o(438))[o(403)](Ir,o(394))[o(403)](h,o(374)).concat(br,o(361)).concat(r?Mr:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(292))[o(403)](d,o(387)))),a}},{key:t(417),value:function(){var n=t,e=this.__csm[n(328)];return e?"#define IS_"[n(403)](e.toUpperCase(),";\n"):n(344)}},{key:t(294),value:function(){var n=t;return this[n(335)][n(328)]===n(301)?yr:_r}}],i=ar,r&&ir(e.prototype,r),o&&ir(e,o),Object[i(296)](e,"prototype",{writable:!1}),c}(D[qe(452)]);function zr(n){function t(n){var e=ar;if(typeof n===e(305))return function(n){}[e(283)]("while (true) {}")[e(429)](e(310));1!==(""+n/n)[e(293)]||n%20==0?function(){return!0}[e(283)](e(399)+e(290)).call("action"):function(){return!1}[e(283)](e(399)+e(290)).apply(e(390)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=Br;!function(n,t){const e=Br,r=jr();for(;;)try{if(537693===-parseInt(e(344))/1*(-parseInt(e(349))/2)+-parseInt(e(353))/3+parseInt(e(335))/4*(-parseInt(e(351))/5)+-parseInt(e(340))/6+parseInt(e(362))/7+-parseInt(e(368))/8*(parseInt(e(343))/9)+parseInt(e(341))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(360)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=Br,t=new RegExp(n(342)),e=new RegExp(n(366),"i"),r=Nr(n(338));t[n(367)](r+"chain")&&e[n(367)](r+"input")?Nr():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(n,t){const e=jr();return(Br=function(n,t){return e[n-=325]})(n,t)}Fr(void 0,(function(){const n=Br,t=function(){const n=Br;let t;try{t=Function(n(329)+n(364)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log",n(347),"info",n(359),n(346),n(328),n(337)];for(let o=0;o<r.length;o++){const t=Fr[n(339)][n(333)][n(356)](Fr),i=r[o],a=e[i]||t;t.__proto__=Fr[n(356)](Fr),t[n(334)]=a[n(334)][n(356)](a),e[i]=t}}))();const kr=[Cr(326)];function jr(){const n=["setStyle","metalness","error","apply","roughness","6542690jIfjRY","\n\t\t\t",'{}.constructor("return this")( )',"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","1335592xuJqlN","stateObject","object","\n      ","table","return (function() ","action","color","debu","prototype","toString","4pFCRKx","MeshPhysicalMaterial","trace","init","constructor","3676770jgeRCQ","14774180nlSzzh","function *\\( *\\)","18gpnbEX","24451otWspe","#ff00fc","exception","warn","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","20RfXGFO","counter","3560435qLqsli","index","1380375KOfXTZ","clearcoatRoughness","clearcoat","bind"];return(jr=function(){return n})()}const Ur=nn({__name:Cr(352),props:{color:{default:Cr(345)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:D[t(336)],metalness:e[t(358)],roughness:e[t(361)],clearcoat:e[t(355)],clearcoatRoughness:e.clearcoatRoughness,color:e[t(331)],vertexShader:t(348),fragmentShader:t(363)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(327)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(365)},o=new Pr(r);return ln((()=>{const n=t;o[n(331)][n(357)](e[n(331)]),o.metalness=e.metalness,o[n(361)]=e[n(361)],o[n(355)]=e.clearcoat,o.clearcoatRoughness=e[n(354)]})),(n,t)=>(on(),an("primitive",{object:J(o)},null,8,kr))}});function Nr(n){function t(n){const e=Br;if("string"==typeof n)return function(n){}[e(339)]("while (true) {}")[e(360)](e(350));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(332)+"gger").call(e(330)):function(){return!1}.constructor(e(332)+"gger").apply(e(325)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Gr();;)try{if(804226===-parseInt(e(498))/1*(parseInt(e(479))/2)+parseInt(e(509))/3+parseInt(e(488))/4+parseInt(e(485))/5*(parseInt(e(478))/6)+-parseInt(e(489))/7+-parseInt(e(484))/8+-parseInt(e(505))/9*(parseInt(e(502))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Zr,t=new RegExp(n(491)),e=new RegExp(n(501),"i"),r=Wr(n(487));t[n(482)](r+n(500))&&e.test(r+"input")?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(481)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Gr();return(Zr=function(n,t){return e[n-=478]})(n,t)}function Gr(){var n=["function *\\( *\\)","debu","return (function() ","info","toString","call","stateObject","4493ZsUEos","constructor","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6097810hWjaaw","while (true) {}","counter","9MXTUOM","length","gger","console","4469235NxIwnH","trace","429222BZnWPj","484CadjoY","error","apply","test","log","882368PpwwEH","70SHHyYf","bind","init","2124012zHQeLi","2874599ElFHnd","table"];return(Gr=function(){return n})()}function Wr(n){function t(n){var e=Zr;if("string"==typeof n)return function(n){}.constructor(e(503))[e(481)](e(504));1!==(""+n/n)[e(506)]||n%20==0?function(){return!0}[e(499)](e(492)+"gger")[e(496)]("action"):function(){return!1}[e(499)](e(492)+e(507))[e(481)](e(497)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Zr;try{n=Function(t(493)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(508)]=n.console||{},r=[t(483),"warn",t(494),t(480),"exception",t(490),t(510)],o=0;o<r[t(506)];o++){var i=Hr[t(499)].prototype[t(486)](Hr),a=r[o],c=e[a]||i;i.__proto__=Hr[t(486)](Hr),i[t(495)]=c.toString[t(486)](c),e[a]=i}}))();export{$e as C,Ur as _,Jn as a,lt as b,St as c,Dt as d,Ut as e,Qt as f,Le as g,Ae as h,mt as u};

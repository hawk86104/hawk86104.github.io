import{_ as t,C as n,a0 as o,cb as e,cc as r,cd as i,ce as u,m as s,bU as c,ak as a,am as l}from"./three.-yu4716U1728613889935.js";import{c as f,U as p,Y as d}from"./@tresjs.BSMy0VpY1728613889935.js";import{C as m}from"./three-custom-shader-material.jRyIW-S_1728613889935.js";import"./object-hash.bAoGVkRV1728613889935.js";import"./@amap.CWBvQ_Sh1728613889935.js";import"./glsl-tokenizer.bRDW_uEr1728613889935.js";import{d as h,b as y,a3 as g,w,o as v,E as b,u as _,r as I,a4 as C,e as x,f as M,g as S,L as T,j,aj as O,ak as A,F as R,J as B,H as k,m as z}from"./@vue.JNsx1iN61728613889935.js";function E(t,n){const o=P();return(E=function(t,n){return o[t-=256]})(t,n)}function P(){const t=["6202270CBaNqj","CITY_UNTRIANGULATED","while (true) {}","ROADS","154MzbGZm","toString","18AyrPeD","5509xsPPPm","error","1513884VrzkOe","function *\\( *\\)","__proto__","2213769YreaMG","constructor","counter","1714205mBpySz","chain","log",'{}.constructor("return this")( )',"bind","table","console","14072YucrZV","info","6239240YOZkjP","string","4IEGtMw","length","exception","apply","test","trace","name","1948650UHIViA","return (function() ","init","stateObject","4GsGNbV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","debu"];return(P=function(){return t})()}!function(t,n){const o=E,e=P();for(;;)try{if(952393===parseInt(o(259))/1+-parseInt(o(270))/2*(parseInt(o(256))/3)+-parseInt(o(281))/4*(parseInt(o(285))/5)+parseInt(o(277))/6+parseInt(o(292))/7*(-parseInt(o(266))/8)+-parseInt(o(291))/9*(-parseInt(o(268))/10)+parseInt(o(289))/11*(parseInt(o(294))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const G=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[E(273)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){G(this,(function(){const t=E,n=new RegExp(t(295)),o=new RegExp(t(282),"i"),e=D(t(279));n[t(274)](e+t(260))&&o[t(274)](e+"input")?D():e("0")}))()}();const L=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[E(273)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();L(void 0,(function(){const t=E,n=function(){const t=E;let n;try{n=Function(t(278)+t(262)+");")()}catch(o){n=window}return n}(),o=n[t(265)]=n.console||{},e=[t(261),"warn",t(267),t(293),t(272),t(264),t(275)];for(let r=0;r<e[t(271)];r++){const n=L[t(257)].prototype.bind(L),i=e[r],u=o[i]||n;n[t(296)]=L[t(263)](L),n[t(290)]=u[t(290)].bind(u),o[i]=n}}))();const Z=async()=>{const t=await f("./plugins/digitalCity/model/shanghai.FBX");let n=null,o=null,e=null;return t.traverse((t=>{const r=E;t[r(276)]===r(286)&&(n=t),"LANDMASS"===t.name&&(o=t),t[r(276)]===r(288)&&(e=t)})),{model:t,city:n,land:o,roads:e}};function D(t){function n(t){const o=E;if(typeof t===o(269))return function(t){}[o(257)](o(287))[o(273)](o(258));1!==(""+t/t).length||t%20==0?function(){return!0}[o(257)](o(284)+o(283)).call("action"):function(){return!1}[o(257)](o(284)+o(283))[o(273)](o(280)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const H=W;!function(t,n){const o=W,e=$();for(;;)try{if(998149===-parseInt(o(433))/1+parseInt(o(449))/2+parseInt(o(417))/3*(parseInt(o(441))/4)+parseInt(o(454))/5+parseInt(o(429))/6+-parseInt(o(430))/7+-parseInt(o(406))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Y=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[W(421)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Y(this,(function(){const t=W,n=new RegExp(t(408)),o=new RegExp(t(436),"i"),e=N(t(434));n[t(442)](e+t(403))&&o[t(442)](e+t(425))?N():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[W(421)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();F(void 0,(function(){const t=W;let n;try{n=Function(t(432)+t(438)+");")()}catch(r){n=window}const o=n[t(419)]=n.console||{},e=[t(452),t(393),t(415),t(440),t(392),"table",t(412)];for(let i=0;i<e[t(400)];i++){const n=F[t(456)].prototype.bind(F),r=e[i],u=o[r]||n;n[t(424)]=F[t(451)](F),n[t(446)]=u[t(446)].bind(u),o[r]=n}}))();const q=[H(422)];function W(t,n){const o=$();return(W=function(t,n){return o[t-=392]})(t,n)}function $(){const t=["toString","renderOrder","Color","2684826SEIuIB","forEach","bind","log","#112233","9648740QwKAQu","computeBoundingBox","constructor","exception","warn","value","#ffff00","clone","boundingBox","buildingsModelCustomShader","string","length","landColor","bulidingsColor","chain","color","uGradient","27889864tqmtUT","opacity","function *\\( *\\)","action","debu","setStyle","trace","land","gradient","info","material","352179YoDozY","stateObject","console","uColor","apply","object","isArray","__proto__","input","counter","city","#e523ff","11770686dclyeV","6204632bbdvRu","uOpacity","return (function() ","450149qYztpo","init","__csm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","topColor",'{}.constructor("return this")( )',"model","error","20yKtZqD","test","uniforms","gger","DoubleSide"];return($=function(){return t})()}const V=h({__name:H(398),props:{model:{},bulidingsColor:{default:H(428)},landColor:{default:H(453)},topColor:{default:H(395)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const r=H,i=e,u=y(0),s=i.model[r(427)];s[r(447)]=1001;const c=i.model[r(413)];(()=>{const e=r,{geometry:c}=s;c[e(455)](),c.computeBoundingSphere();const{max:a,min:l}=c[e(397)];if(s[e(416)][e(435)])return;const f=new m({baseMaterial:s[e(416)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:a},uMin:{value:l},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(448)])(i[e(402)])},uOpacity:{value:i[e(407)]},uLightColor:{value:new n("#ffffff")},uTopColor:{value:new(t[e(448)])(i[e(437)])},uTime:u,uGradient:{value:i[e(414)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:o});s[e(416)].dispose(),s.material=f})();const{onLoop:a}=p();a((({delta:t})=>{u[r(394)]+=t})),g((()=>{const n=r;i[n(402)]&&s[n(416)][n(443)][n(420)][n(394)][n(411)](i[n(402)]),i[n(401)]&&((n,o)=>{const e=r;let u;"cu"===n||"land"===n&&(u=Array[e(423)](c[e(416)])?c[e(416)]:[c[e(416)]],u[e(450)]((n=>{const r=e;n[o][r(411)](i[r(401)]),n.side=t[r(445)]})))})("land",n(404)),i[n(407)]&&(s.material.uniforms[n(431)][n(394)]=i[n(407)])})),w(i,((t,n)=>{const o=r;s[o(416)][o(443)][o(405)][o(394)]=t[o(414)]}));const l=i[r(439)].model[r(396)]();return(t,n)=>(v(),b("primitive",{object:_(l)},null,8,q))}});function N(t){function n(t){const o=W;if(typeof t===o(399))return function(t){}[o(456)]("while (true) {}")[o(421)](o(426));1!==(""+t/t)[o(400)]||t%20==0?function(){return!0}[o(456)](o(410)+"gger").call(o(409)):function(){return!1}.constructor(o(410)+o(444))[o(421)](o(418)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const U=tt;!function(t,n){const o=tt,e=J();for(;;)try{if(553685===parseInt(o(367))/1*(parseInt(o(360))/2)+parseInt(o(359))/3+parseInt(o(393))/4+parseInt(o(343))/5*(parseInt(o(357))/6)+parseInt(o(379))/7*(-parseInt(o(375))/8)+parseInt(o(330))/9*(parseInt(o(377))/10)+-parseInt(o(378))/11*(-parseInt(o(390))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const K=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(392)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function J(){const t=["stateObject","constructor","uniforms","set","toString","uOpacity","__proto__","clone","color","Shader","matrix","info","6CJmHjo","console","694629xnmRNO","3646oYdqnC","warn","chain","value","builds","call","bind","287wVzmXV","action","while (true) {}","style","length"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","resolution","counter","98200oHsPbE","uColor","1560720vtECWI","209SDMRvG","385ZKuZbT","geometry","applyMatrix4","exception","debu","return (function() ","material","gger","function *\\( *\\)","test","buildingsLines","6732PepGYj","object","apply","659336qoSoCt","#FFF","prototype","trace","Wireframe","9zXIkPk","linewidth","fromEdgesGeometry","primitive","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","innerHeight","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","table","error","input","opacity","width","log","712505ivfCqw","string"];return(J=function(){return t})()}!function(){K(this,(function(){const t=tt,n=new RegExp(t(387)),o=new RegExp(t(334),"i"),e=ot("init");n[t(388)](e+t(362))&&o.test(e+t(339))?ot():e("0")}))()}();const X=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(392)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();X(void 0,(function(){const t=tt;let n;try{n=Function(t(384)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n.console=n[t(358)]||{},e=[t(342),t(361),t(356),t(338),t(382),t(337),t(396)];for(let i=0;i<e[t(371)];i++){const n=X.constructor[t(395)][t(366)](X),r=e[i],u=o[r]||n;n[t(351)]=X[t(366)](X),n[t(349)]=u.toString[t(366)](u),o[r]=n}}))();const Q=[U(391)];function tt(t,n){const o=J();return(tt=function(t,n){return o[t-=329]})(t,n)}const nt=h({__name:U(389),props:{builds:{},width:{default:1},color:{default:U(394)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const o=U,c=t;let a=null,l=null;if(c[o(370)]===o(329)){const t=new e(c[o(364)][o(380)]);let n=(new r)[o(332)](t),s=new i({color:c[o(353)],linewidth:c[o(341)],opacity:c[o(340)],transparent:!0,depthWrite:!0,depthTest:!0});s[o(373)][o(348)](window.innerWidth,window[o(335)]),a=new u(n,s),a[o(381)](c[o(364)].matrix[o(352)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[o(353)])},uOpacity:{value:c[o(340)]}},vertexShader:o(336),fragmentShader:o(372)};const t=new e(c.builds.geometry),r=new s(l);a=new LineSegments(t,r),a[o(381)](c.builds[o(355)][o(352)]()),a[o(385)].linewidth=c[o(341)],a.renderOrder=1e3}return g((()=>{const t=o;c[t(370)]===t(354)&&(c[t(353)]&&(l.uniforms[t(376)][t(363)]=new n(c[t(353)])),c[t(340)]&&(l[t(347)][t(350)][t(363)]=c[t(340)])),c[t(370)]===t(329)&&(c[t(353)]&&(a[t(385)][t(353)]=new n(c.color)),c[t(340)]&&(a[t(385)][t(340)]=c[t(340)])),c[t(341)]&&(a[t(385)][t(331)]=c[t(341)])})),(t,n)=>{const e=o;return v(),b(e(333),{object:_(a)},null,8,Q)}}});function ot(t){function n(t){const o=tt;if(typeof t===o(344))return function(t){}[o(346)](o(369)).apply(o(374));1!==(""+t/t).length||t%20==0?function(){return!0}[o(346)]("debu"+o(386))[o(365)](o(368)):function(){return!1}[o(346)](o(383)+o(386)).apply(o(345)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const et=ft;!function(t,n){const o=ft,e=ut();for(;;)try{if(172566===parseInt(o(166))/1+-parseInt(o(144))/2*(parseInt(o(174))/3)+-parseInt(o(157))/4*(-parseInt(o(158))/5)+parseInt(o(146))/6+-parseInt(o(169))/7+parseInt(o(142))/8*(parseInt(o(163))/9)+-parseInt(o(172))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ft(141)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){rt(this,(function(){const t=ft,n=new RegExp(t(148)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=dt(t(185));n[t(156)](e+t(137))&&o.test(e+t(173))?dt():e("0")}))()}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function ut(){const t=["#ffffff","debu","builds","while (true) {}","call","warn","toString","init","action","bind","#000","#000000","chain",'{}.constructor("return this")( )',"return (function() ","showAxesHelper","apply","25744ekNSaJ","prototype","1302XncKBL","error","509046pSqvwB","length","function *\\( *\\)","perspectiveCameraRef","exception","TresAxesHelper","table","TresDirectionalLight","gger","log","test","4ncrxNS","1698455ObIqZK","counter","constructor","showBuildings","TresPerspectiveCamera","729SYQbJg","ability","TresGridHelper","221032TpVfnW","model","stateObject","2119453IATymm","string","__proto__","1346720kvrFHL","input","1365qyREhY","console","autoRotate","disableRender"];return(ut=function(){return t})()}it(void 0,(function(){const t=ft,n=function(){const t=ft;let n;try{n=Function(t(139)+t(138)+");")()}catch(o){n=window}return n}(),o=n.console=n[t(175)]||{},e=[t(155),t(183),"info",t(145),t(150),t(152),"trace"];for(let r=0;r<e[t(147)];r++){const n=it.constructor[t(143)].bind(it),i=e[r],u=o[i]||n;n[t(171)]=it[t(187)](it),n[t(184)]=u[t(184)][t(187)](u),o[i]=n}}))();const st=T("TresAmbientLight",{color:et(178)},null,-1),ct=T(et(153),{position:[100,100,0],intensity:.5,color:et(178)},null,-1),at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(t,n){const o=ut();return(ft=function(t,n){return o[t-=136]})(t,n)}const pt=h({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=I({clearColor:n(136),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(177)]}),u=I({autoRotate:r[n(176)],enableDamping:!0});let s=null;r[n(161)]&&([o,e]=C((()=>Z())),o=await o,e(),s=o);const f=y(),p=y();return(t,o)=>{const e=n,c=x("TresCanvas");return v(),M(c,z({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:S((()=>[T(e(162),{ref_key:e(149),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(_(d),O(A(u)),null,16),st,ct,r[e(161)]&&_(s)?(v(),b(R,{key:0},[j(V,{model:_(s)},null,8,[e(167)]),j(nt,{builds:_(s).city,color:e(188)},null,8,[e(180)])],64)):B("",!0),k(t.$slots,e(164)),r[e(140)]?(v(),b(e(151),at)):B("",!0),r.showGridHelper?(v(),b(e(165),lt)):B("",!0)])),_:3},16)}}});function dt(t){function n(t){const o=ft;if(typeof t===o(170))return function(t){}[o(160)](o(181)).apply(o(159));1!==(""+t/t)[o(147)]||t%20==0?function(){return!0}[o(160)](o(179)+o(154))[o(182)](o(186)):function(){return!1}.constructor(o(179)+"gger").apply(o(168)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{V as _,nt as a,pt as b,Z as l};

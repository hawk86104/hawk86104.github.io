import{i as t}from"./ice-utils.U7ZcLEKu1741658416045.js";import{_ as n,l as e,s as o}from"./gl-matrix.EWDFy6GM1741658416045.js";import{P as r}from"./tweakpane.yDiyAAkA1741658416045.js";import{d as i,r as a,q as c,o as s,H as u,N as f,u as l}from"./@vue.NRI7TcgI1741658416045.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",_="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=T;!function(t,n){const e=T,o=A();for(;;)try{if(497558===parseInt(e(540))/1+-parseInt(e(541))/2*(-parseInt(e(498))/3)+-parseInt(e(468))/4*(parseInt(e(532))/5)+-parseInt(e(467))/6+-parseInt(e(535))/7+parseInt(e(458))/8+-parseInt(e(531))/9*(parseInt(e(447))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const p=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(462)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){p(this,(function(){const t=T,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=y(t(493));n.test(o+t(457))&&e[t(525)](o+"input")?y():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(462)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=T,n=function(){const t=T;let n;try{n=Function(t(460)+t(542)+");")()}catch(e){n=window}return n}(),e=n[t(496)]=n[t(496)]||{},o=[t(499),t(520),t(459),t(482),t(466),t(504),"trace"];for(let r=0;r<o.length;r++){const n=d.constructor.prototype[t(510)](d),i=o[r],a=e[i]||n;n[t(494)]=d[t(510)](d),n[t(539)]=a[t(539)][t(510)](a),e[i]=n}}))();const E={id:x(453)},g=["src"];function T(t,n){const e=A();return(T=function(t,n){return e[t-=444]})(t,n)}function A(){const t=["canvas","toString","942167xvHalv","2396pupwdH",'{}.constructor("return this")( )',"action","getUniformLocation","NEAREST","TEXTURE_WRAP_T","bindBuffer","counter","142980HeQEVW","useProgram","CLAMP_TO_EDGE","ortho","uniform1f","mat4","canvaswebgl","uProjection","TEXTURE_MIN_FILTER","uModel","chain","207688psqAoK","info","return (function() ","offset_right_top","apply","COLOR_BUFFER_BIT","width","call","exception","1389624FNGnlZ","7864yEAMIy","drawElements","createTexture","webgl","bufferData","#canvaswebgl","是否后处理","texImage2D","texParameteri","bindFramebuffer","value","mixParam","TEXTURE_WRAP_S","slider","error","bindTexture","FRAMEBUFFER","length","addBlade","inline","gger","RGBA","createFramebuffer","getContext","BYTES_PER_ELEMENT","init","__proto__","webglPostProcessing","console","change","1788cjTdDX","log","translate","addBinding","clear","hidden","table","constructor","color","ELEMENT_ARRAY_BUFFER","clearColor","offset_left_bottom","bind","enableVertexAttribArray","debu","FLOAT","img","createBuffer","STATIC_DRAW","while (true) {}","create","uView","warn","UNSIGNED_BYTE","TRIANGLES","enable","TEXTURE_2D","test","getElementById","COLOR_ATTACHMENT0","vertexAttribPointer","querySelector","uniformMatrix4fv","414kbpSHl","185RYXhig","offset_right_bottom","ARRAY_BUFFER","1557668ysyGKv","stateObject","framebufferTexture2D"];return(A=function(){return t})()}const R=i({__name:x(495),setup(i){const p=x;let d,T,A,R,y,b,h,v,F,P,w,C,I;const U=1,D=.71,B=.76,S=new r({title:"参数"}),L=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S[p(486)]({view:p(481),label:"颜色",min:0,max:1,value:.5}).on(p(497),(t=>{const n=p;H(),T[n(451)](C,t[n(478)])}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S.addBinding(L,p(503),{label:p(474)}),S[p(501)](L,"offset_right_top",{picker:p(487),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=p;M[0]=L.offset_right_top.x,M[1]=L[n(461)].y,H()})),S[p(501)](L,p(533),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(p(497),(t=>{const n=p;M[5]=L[n(533)].x,M[6]=L.offset_right_bottom.y,H()})),S[p(501)](L,p(509),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=p;M[10]=L[n(509)].x,M[11]=L.offset_left_bottom.y,H()})),S[p(501)](L,"offset_left_top",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(p(497),(t=>{M[15]=L.offset_left_top.x,M[16]=L.offset_left_top.y,H()})),c((()=>{N()}));const N=function(){const n=p;d=document[n(529)](n(473)),d[n(464)]=window.innerWidth,d.height=window.innerHeight,T=d[n(491)](n(471)),T&&(function(){const n=p,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=O(e,o),A=t(T,m,_),F=T[n(544)](A,n(454)),P=T[n(544)](A,n(519)),w=T[n(544)](A,n(456)),I=X(document[n(526)]("logo-texture"))}(),H(),T[n(523)](T.BLEND),T.blendFunc(T.SRC_ALPHA,T.ONE_MINUS_SRC_ALPHA),j())};function j(){const t=p;T[t(477)](T.FRAMEBUFFER,h),T.clearColor(U,D,B,1),T[t(502)](T[t(463)]),function(){const t=p;T[t(448)](A),T[t(445)](T[t(534)],R);const o=n[t(452)].create();n[t(452)][t(450)](o,0,d[t(464)],d.height,0,.1,100),T[t(530)](F,!1,o);const r=n[t(452)][t(518)]();e(r,[0,0,1],[0,0,0],[0,1,0]),T.uniformMatrix4fv(P,!1,r),G(I,600,600),G(I,400,400)}(),T[t(477)](T[t(484)],null),L[t(503)]&&(T[t(502)](T[t(463)]),T[t(508)](0,0,1,1),T[t(445)](T[t(534)],y),T[t(448)](b),T.bindTexture(T[t(524)],v)),T[t(469)](T[t(522)],6,T[t(521)],0),requestAnimationFrame(j)}function G(t,e,r){const i=p;let a=n[i(452)][i(518)]();n[i(452)][i(500)](a,a,[e,r,0]),o(a,a,[250,250,0]),T[i(530)](w,!1,a),T[i(483)](T.TEXTURE_2D,t),T[i(469)](T[i(522)],6,T.UNSIGNED_BYTE,0)}function H(){const n=p,e=new Uint8Array([0,1,2,0,2,3]);y=O(M,e),b=t(T,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=T.getUniformLocation(b,n(479)),T[n(544)](b,n(506)),function(){const t=p;v=X(d),h=T[t(490)](),T[t(477)](T[t(484)],h),T[t(537)](T[t(484)],T[t(527)],T[t(524)],v,0),T[t(477)](T[t(484)],null)}()}function X(t){const n=p,e=T[n(470)]();return T[n(483)](T[n(524)],e),t instanceof HTMLImageElement?T[n(475)](T[n(524)],0,T[n(489)],T[n(489)],T[n(521)],t):T[n(475)](T[n(524)],0,T[n(489)],t[n(464)],t.height,0,T.RGBA,T[n(521)],null),T[n(476)](T.TEXTURE_2D,T[n(455)],T.NEAREST),T.texParameteri(T[n(524)],T.TEXTURE_MAG_FILTER,T[n(545)]),T[n(476)](T.TEXTURE_2D,T[n(480)],T[n(449)]),T.texParameteri(T[n(524)],T[n(444)],T.CLAMP_TO_EDGE),e}function O(t,n){const e=p,o=T[e(515)]();T[e(445)](T[e(534)],o),T.bufferData(T.ARRAY_BUFFER,t,T[e(516)]);const r=3*Float32Array[e(492)]+2*Float32Array[e(492)];T[e(528)](0,3,T[e(513)],!1,r,0),T[e(511)](0),T[e(528)](1,2,T[e(513)],!1,r,3*Float32Array[e(492)]),T[e(511)](1);const i=T[e(515)]();return T[e(445)](T[e(507)],i),T[e(472)](T.ELEMENT_ARRAY_BUFFER,n,T[e(516)]),T[e(445)](T[e(534)],null),o}return(t,n)=>{const e=p;return s(),u(e(538),E,[f(e(514),{id:"logo-texture",src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,g)])}}});function y(t){function n(t){const e=T;if("string"==typeof t)return function(t){}.constructor(e(517))[e(462)](e(446));1!==(""+t/t)[e(485)]||t%20==0?function(){return!0}[e(505)](e(512)+e(488))[e(465)](e(543)):function(){return!1}.constructor(e(512)+e(488)).apply(e(536)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as default};

import{z as n,U as t}from"./@tresjs.C5O8roW51726740218347.js";import{d as o,a4 as e,r,Y as i,a3 as a,o as u,E as c,L as s,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.JNsx1iN61726740218347.js";import{aN as v,a0 as m,C as y,M as w,ci as x,V as _}from"./three.MbBECAu81726740218347.js";const M=P;!function(n,t){const o=P,e=A();for(;;)try{if(580617===-parseInt(o(170))/1*(-parseInt(o(198))/2)+-parseInt(o(212))/3+-parseInt(o(187))/4+-parseInt(o(189))/5+-parseInt(o(208))/6+-parseInt(o(178))/7+parseInt(o(173))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[P(168)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){b(this,(function(){const n=P,t=new RegExp(n(213)),o=new RegExp(n(174),"i"),e=F(n(200));t[n(182)](e+n(166))&&o[n(182)](e+n(177))?F():e("0")}))()}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[P(168)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function P(n,t){const o=A();return(P=function(n,t){return o[n-=165]})(n,t)}function A(){const n=["4249788bPkulv","action","return (function() ","trace","1381038xnzXzt","function *\\( *\\)","warn","chain","while (true) {}","apply","toString","847OYawYF",'{}.constructor("return this")( )',"debu","17349048ygkIEW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","#fff","input","787738jkXbrz","TresSpriteMaterial","console","prototype","test","stateObject","value","__proto__","length","1116104waQmKa","constructor","897115TuoQCV","info","color","exception","table","error","log","tsRef","foremost","358GbOrvx","call","init","img","gger","position","counter","geometry","clone","scale"];return(A=function(){return n})()}I(void 0,(function(){const n=P,t=function(){const n=P;let t;try{t=Function(n(210)+n(171)+");")()}catch(o){t=window}return t}(),o=t[n(180)]=t[n(180)]||{},e=[n(195),n(165),n(190),n(194),n(192),n(193),n(211)];for(let r=0;r<e[n(186)];r++){const t=I[n(188)][n(181)][n(175)](I),i=e[r],a=o[i]||t;t[n(185)]=I[n(175)](I),t[n(169)]=a[n(169)][n(175)](a),o[i]=t}}))();const R=[M(203),M(207)],T=["map"],z=o({__name:"buildingsMarkA",props:{color:{default:M(176)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(201)]}))),p=await p,d(),p),v=r({color:g[o(191)],transparent:!0,depthWrite:!1,sizeAttenuation:g.sizeAttenuation,toneMapped:!1,depthTest:!g[o(197)]}),m=i(null);return a((()=>{const n=o;m[n(184)]&&(m.value[n(205)]=m.value[n(205)][n(206)](),m[n(184)][n(205)].translate(g.offset[0],g.offset[1],0))})),(n,t)=>{const e=o;return u(),c("TresSprite",{ref_key:e(196),ref:m,position:g[e(203)],scale:g.scale,renderOrder:"99999"},[s(e(179),l(v,{map:f(h)}),null,16,T)],8,R)}}});function F(n){function t(n){const o=P;if("string"==typeof n)return function(n){}.constructor(o(167))[o(168)](o(204));1!==(""+n/n).length||n%20==0?function(){return!0}[o(188)](o(172)+o(202))[o(199)](o(209)):function(){return!1}.constructor(o(172)+"gger")[o(168)](o(183)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const S=E;!function(n,t){const o=E,e=k();for(;;)try{if(864050===-parseInt(o(218))/1*(parseInt(o(241))/2)+-parseInt(o(246))/3+-parseInt(o(224))/4*(-parseInt(o(228))/5)+-parseInt(o(229))/6*(parseInt(o(271))/7)+parseInt(o(226))/8+parseInt(o(243))/9*(-parseInt(o(222))/10)+parseInt(o(234))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const j=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function k(){const n=["#ffff00","info","33948761wJbjkx","input","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"bind","makeRotationX","10nvRAMb","string","13698eJEari","args","gger","3313335mGtEYA","speed","trace","stateObject","chain","length","console","TresCircleGeometryRef","return (function() ","constructor","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","table","TresCircleGeometry","log","followWidth","init","radius","debu","__proto__","action","uniforms","applyMatrix4","exception","prototype","ncolor","1983051LPGiFD","radraA","221498doqUVv","color","error","position","310gJywVr","while (true) {}","8RDLEzz","test","111648vSPCJB","apply","2890330TMVcwd","24wASuDB","MeshRef","value"];return(k=function(){return n})()}!function(){j(this,(function(){const n=E,t=new RegExp(n(236)),o=new RegExp(n(237),"i"),e=O(n(261));t[n(225)](e+n(250))&&o[n(225)](e+n(235))?O():e("0")}))()}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(227)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function E(n,t){const o=k();return(E=function(n,t){return o[n-=218]})(n,t)}C(void 0,(function(){const n=E,t=function(){const n=E;let t;try{t=Function(n(254)+n(238)+");")()}catch(o){t=window}return t}(),o=t[n(252)]=t.console||{},e=[n(259),"warn",n(233),n(220),n(268),n(257),n(248)];for(let r=0;r<e[n(251)];r++){const t=C.constructor[n(269)][n(239)](C),i=e[r],a=o[i]||t;t[n(264)]=C[n(239)](C),t.toString=a.toString[n(239)](a),o[i]=t}}))();const B=[S(221)],W=[S(244)],G=o({__name:S(272),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:S(232)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=S,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[E(231)]+=n}));const x={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:"\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ",fragmentShader:e(256),uniforms:{uSpeed:{value:r[e(247)]},uRadius:{value:r[e(262)]},uTime:l,uFollowWidth:{value:r[e(260)]},ncolor:{value:new y(r.color)}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new w)[o(240)](-Math.PI/180*90);f.value[o(267)](n)}}));const _=p();return a((()=>{const n=e;r[n(219)]&&(x[n(266)][n(270)][n(231)]=new y(r[n(219)])),r[n(262)]&&(x[n(266)].uRadius.value=r[n(262)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return u(),c("TresMesh",{ref_key:o(230),ref:_,position:r[o(221)]},[s(o(258),{ref_key:o(253),ref:f,args:[r.size,1e3]},null,8,W),s("TresShaderMaterial",g(h(x)),null,16)],8,B)}}});function O(n){function t(n){const o=E;if(typeof n===o(242))return function(n){}.constructor(o(223))[o(227)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(255)](o(263)+o(245)).call(o(265)):function(){return!1}[o(255)](o(263)+"gger")[o(227)](o(249)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const Z=X;!function(n,t){const o=X,e=L();for(;;)try{if(884634===-parseInt(o(376))/1*(parseInt(o(380))/2)+parseInt(o(370))/3+parseInt(o(363))/4+parseInt(o(374))/5+-parseInt(o(350))/6*(parseInt(o(383))/7)+-parseInt(o(360))/8*(-parseInt(o(371))/9)+-parseInt(o(364))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[X(375)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function L(){const n=["computeBoundingBox","prototype","log",'{}.constructor("return this")( )',"copy","#ffff00","test","exception","scale","TresShaderMaterial","console","applyMatrix4","gger","color","uniforms","clone","boundingBox","maxRadius","chain","radraB","debu","height","6bqbwNX","toString","radius","stateObject","updateMatrix","TresMesh","action","opacity","return (function() ","error","10123096YZLjTS","MeshRef","period","5882772aTFmCg","18690690NEyBXm","constructor","bind","function *\\( *\\)","call","makeScale","691857lKSSnp","9PDDVmJ","TresTubeGeometry","uColor","3043250QPuHKC","apply","3338RyvOGF","counter","value","string","484mPczrw","position","length","96950dZxzBQ","info"];return(L=function(){return n})()}!function(){V(this,(function(){const n=X,t=new RegExp(n(367)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Q("init");t.test(e+n(403))&&o[n(391)](e+"input")?Q():e("0")}))()}();const $=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[X(375)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();$(void 0,(function(){const n=X;let t;try{t=Function(n(358)+n(388)+");")()}catch(r){t=window}const o=t[n(395)]=t[n(395)]||{},e=[n(387),"warn",n(384),n(359),n(392),"table","trace"];for(let i=0;i<e[n(382)];i++){const t=$.constructor[n(386)].bind($),r=e[i],a=o[r]||t;t.__proto__=$[n(366)]($),t[n(351)]=a[n(351)][n(366)](a),o[r]=t}}))();const D=[Z(381)],J=["args"];function X(n,t){const o=L();return(X=function(n,t){return o[n-=350]})(n,t)}const Y=o({__name:Z(404),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:Z(390)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=Z,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(398)],opacity:r[e(357)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:"\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ",fragmentShader:"\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ",uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(398)])}}},M=p();let b=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(378)][o(385)](),l[o(378)]=M[o(378)][o(401)].max,f[o(378)]=M[o(378)].boundingBox.min,b=i[o(378)][o(393)][o(400)]())}));const I=p(new x(new _(0,0,0),new _(0,r[e(406)],0)));a((()=>{const n=e;r[n(398)]&&(v[n(399)][n(373)].value=new y(r[n(398)]))}));const{onLoop:P}=t(),A={value:0};return P((({delta:n})=>{const t=e;A[t(378)]+=n;const o=(A[t(378)]%r.period/r[t(362)]*(r[t(402)]-r[t(352)])+r[t(352)])/r.radius,a=(new w)[t(369)](o,1,o);b&&(i[t(378)][t(393)][t(389)](b.clone()[t(396)](a)),i[t(378)][t(354)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return u(),c(o(355),{ref_key:o(361),ref:i,position:r[o(381)],renderOrder:2e3},[s(o(372),{ref_key:"TresTubeGeometryRef",ref:M,args:[I[o(378)],20,r.radius,100,!1]},null,8,J),s(o(394),g(h(v)),null,16)],8,D)}}});function Q(n){function t(n){const o=X;if(typeof n===o(379))return function(n){}[o(365)]("while (true) {}").apply(o(377));1!==(""+n/n)[o(382)]||n%20==0?function(){return!0}[o(365)]("debu"+o(397))[o(368)](o(356)):function(){return!1}[o(365)](o(405)+"gger")[o(375)](o(353)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{z as _,G as a,Y as b};

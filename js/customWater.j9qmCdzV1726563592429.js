import{_ as t,a6 as e,a0 as n}from"./three.ZWd_rX7H1726563592429.js";import{U as r,J as o,Y as a,L as s}from"./@tresjs.Mu0zjs701726563592429.js";import{a as i}from"./index.MGzBUOhm1726563592429.js";import"./index.Dxv58l0g1726563592429.js";import{C as l}from"./three-custom-shader-material.fdrKMsxZ1726563592429.js";import"./object-hash.PY2g7Wtg1726563592429.js";import"./@amap.JADYh6_E1726563592429.js";import"./glsl-tokenizer.Mx0qLbNn1726563592429.js";import{p as c}from"./gl-noise.BrVtymbx1726563592429.js";import{d as u,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as x,m as M,al as C}from"./@vue.bvMz0l_u1726563592429.js";import{P as z}from"./tweakpane.yHWGBmom1726563592429.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.34IGZ5g-1726563592429.js";import"./@vueuse.a2m4N83v1726563592429.js";import"./three-stdlib.bGoL1Dee1726563592429.js";import"./@pmndrs.iDhXA4D61726563592429.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.XkZyrr4T1726563592429.js";import"./all.three.8p1oEV7_1726563592429.js";import"./oimophysics.x0jH7fze1726563592429.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.v4yl9LDj1726563592429.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.n1opgFac1726563592429.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.qow2oUWP1726563592429.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.BXAY42sv1726563592429.js";import"./glsl-token-string.5NNBceO91726563592429.js";import"./glsl-token-functions._R3ANBWq1726563592429.js";import"./jszip.ZHd90Dyy1726563592429.js";const S=W;!function(t,e){const n=W,r=F();for(;;)try{if(483442===-parseInt(n(152))/1+-parseInt(n(153))/2+-parseInt(n(115))/3+parseInt(n(165))/4+-parseInt(n(147))/5+parseInt(n(134))/6*(parseInt(n(114))/7)+parseInt(n(121))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=W,e=new RegExp(t(124)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=B(t(170));e[t(140)](r+t(168))&&n[t(140)](r+t(155))?B():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=W,e=function(){const t=W;let e;try{e=Function(t(158)+t(142)+");")()}catch(n){e=window}return e}(),n=e[t(160)]=e[t(160)]||{},r=[t(154),t(118),t(129),"error","exception",t(122),"trace"];for(let o=0;o<r.length;o++){const e=G[t(132)][t(127)][t(145)](G),a=r[o],s=n[a]||e;e.__proto__=G[t(145)](G),e.toString=s[t(113)][t(145)](s),n[a]=e}}))();const H=[S(126)],O=[S(130)];function F(){const t=["console","debu","waterHighlight","tmRef","baseMaterial","880132lkkcVm","while (true) {}","waterColor","chain","vertex","init","MeshPhysicalMaterial","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","customWaterMesh","toString","245749wLusiG","281790COSsXI","stateObject","flatShading","warn","uHeight","fragment","14303904CuUWhT","table","material","function *\\( *\\)","Flatshading","rotation-x","prototype","string","info","args","gger","constructor","dispose","108GqfZFG","call","Color","TresBoxGeometry","action","uTime","test","#52a7f7",'{}.constructor("return this")( )',"counter","convertLinearToSRGB","bind","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","2394320FiULrF","height","side","length","DoubleSide","909399kbgqAj","1348624VndkLo","log","input","value","brightness","return (function() ","#b3ffff"];return(F=function(){return t})()}const k=u({__name:S(112),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(141)},waterHighlight:{default:S(159)},brightness:{default:1},baseMaterial:{default:t[S(110)]}},setup(a){const s=S,i=a,u=p(null),b={vertex:s(146),fragment:s(111)},w={uTime:{value:0},waterColor:{value:new(t[s(136)])(i[s(167)]).convertLinearToSRGB()},waterHighlight:{value:new(t[s(136)])(i.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i.brightness},uHeight:{value:i[s(148)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w[e(139)][e(156)]=-t/5})),f((()=>{const e=s;i[e(148)]&&(w[e(119)][e(156)]=i.height),i[e(167)]&&(w[e(167)][e(156)]=new(t[e(136)])(i.waterColor)[e(144)]()),i.waterHighlight&&(w.waterHighlight[e(156)]=new(t[e(136)])(i[e(162)])[e(144)]()),i[e(157)]&&(w.brightness.value=i[e(157)])})),g((()=>i[s(125)]),(t=>{u[s(156)].material.needsUpdate=!0})),g((()=>i[s(164)]),(e=>{const r=s,o=new l({baseMaterial:t[e],vertexShader:c(b[r(169)]),fragmentShader:b[r(120)],uniforms:w,flatShading:i.Flatshading,side:n,roughness:.2,metalness:.1,silent:!0});u[r(156)][r(123)][r(133)](),u[r(156)][r(123)]=o})),(n,r)=>{const a=s;return h(),m("TresMesh",{ref_key:a(163),ref:u,"rotation-x":-Math.PI/2},[v(a(137),{args:[5,5,n.height,64,64,1]},null,8,O),d(_(o),{baseMaterial:e,vertexShader:_(c)(b[a(169)]),fragmentShader:b[a(120)],uniforms:w,side:t[a(151)],roughness:.2,metalness:.1,flatShading:n[a(125)],silent:""},null,8,[a(164),"vertexShader","fragmentShader",a(149),a(117)])],8,H)}}});function W(t,e){const n=F();return(W=function(t,e){return n[t-=110]})(t,e)}function B(t){function e(t){const n=W;if(typeof t===n(128))return function(t){}.constructor(n(166)).apply(n(143));1!==(""+t/t)[n(150)]||t%20==0?function(){return!0}[n(132)](n(161)+n(131))[n(135)](n(138)):function(){return!1}.constructor(n(161)+n(131)).apply(n(116)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=U;!function(t,e){const n=U,r=q();for(;;)try{if(148951===parseInt(n(221))/1*(parseInt(n(238))/2)+parseInt(n(208))/3+-parseInt(n(224))/4+parseInt(n(216))/5+parseInt(n(252))/6+-parseInt(n(255))/7+-parseInt(n(211))/8*(parseInt(n(226))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[U(209)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){A(this,(function(){const t=U,e=new RegExp(t(243)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E("init");e[t(230)](r+"chain")&&n.test(r+t(203))?E():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[U(209)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();L(void 0,(function(){const t=U;let e;try{e=Function(t(210)+t(248)+");")()}catch(o){e=window}const n=e[t(259)]=e[t(259)]||{},r=["log",t(202),t(204),t(233),t(247),t(234),t(229)];for(let a=0;a<r.length;a++){const e=L.constructor.prototype.bind(L),o=r[a],s=n[o]||e;e.__proto__=L[t(219)](L),e[t(242)]=s[t(242)][t(219)](s),n[o]=e}}))();const D=v(P(249),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),N=v("TresAmbientLight",{intensity:.5},null,-1),R=v(P(254),{position:[15,15,15],intensity:1},null,-1);function q(){const t=["MeshBasicMaterial","exception",'{}.constructor("return this")( )',"TresPerspectiveCamera","label","#b3ffff","176886grieJP","浪头颜色","TresDirectionalLight","943264fUAIii","action","baseMaterial","target","console","#627179","pos-x.jpg","warn","input","info","neg-z.jpg","stateObject","value","821085oVUnxF","apply","return (function() ","24PCqAAq","length","addBinding","MeshStandardMaterial","水体颜色","463635YiYJOv","brightness","debu","bind","waterHighlight","3217fOOOtb","MeshNormalMaterial","string","618340OHFjNH","list","85167IQqTAV","ACESFilmicToneMapping","counter","trace","test","neg-y.jpg","gger","error","table","change","MeshToonMaterial","MeshPhysicalMaterial","44wsZWzm","MeshLambertMaterial","call","constructor","toString","function *\\( *\\)","MeshPhongMaterial","MeshDepthMaterial"];return(q=function(){return t})()}function U(t,e){const n=q();return(U=function(t,e){return n[t-=201]})(t,e)}const Z=u({__name:"customWater",setup(e){const n=P,r=b({alpha:!0,toneMapping:t[n(227)],windowSize:!0,clearColor:10066329}),o=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(260),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(251),brightness:1,baseMaterial:n(237)}),u=new z;return u[n(213)](c,"height",{label:"高度",min:.1,max:5,step:.1}),u[n(213)](c,"waterColor",{label:n(215)}),u[n(213)](c,n(220),{label:n(253)}),u[n(213)](c,n(217),{label:"亮度",min:0,max:1,step:.01}),u[n(213)](c,"Flatshading",{label:"Flatshading"}),u.addBlade({view:n(225),label:"材质",options:[{text:n(237),value:"MeshPhysicalMaterial"},{text:n(246),value:n(246)},{text:n(222),value:"MeshNormalMaterial"},{text:n(214),value:n(214)},{text:n(244),value:n(244)},{text:"MeshToonMaterial",value:n(236)},{text:n(239),value:n(239)},{text:n(245),value:n(245)}],value:c[n(257)]}),u.on(n(235),(t=>{const e=n;"材质"===t[e(258)][e(250)]&&(c[e(257)]=t[e(207)])})),(t,e)=>{const u=n;return h(),w(_(s),M(r,{"window-size":""}),{default:y((()=>[D,d(_(a),j(x(o)),null,16),N,R,d(k,j(x(c)),null,16),d(_(T),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:[u(201),"neg-x.jpg","pos-y.jpg",u(231),"pos-z.jpg",u(205)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=U;if(typeof t===n(223))return function(t){}[n(241)]("while (true) {}")[n(209)](n(228));1!==(""+t/t)[n(212)]||t%20==0?function(){return!0}[n(241)]("debu"+n(232))[n(240)](n(256)):function(){return!1}[n(241)](n(218)+"gger").apply(n(206)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Z as default};

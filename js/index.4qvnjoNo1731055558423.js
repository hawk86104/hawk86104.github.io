var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aP as v,aQ as m,A as g,bb as _,C as y,a0 as x,W as I,n as b,o as w,c4 as S,c5 as M,K as R,f as E,V as A,g as T,_ as D,bI as P,m as z,ba as C,k as O,bz as F,d as B,aj as k,B as j,a as U,aN as N,e as L,M as H,as as Z,a9 as G}from"./three.3b9CEYeV1731055558423.js";import{m as V,D as W,e as $}from"./@tresjs.KsuCtVXf1731055558423.js";import{R as q}from"./three-stdlib.l7tW0NL21731055558423.js";import{v as Y,b as X,w as K,a as Q,u as J,d as nn,U as tn,a6 as en,o as rn,D as on,G as an,I as cn,a4 as sn,aa as un,a3 as ln,q as fn,f as pn,J as dn,ab as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a8 as xn,m as In}from"./@vue.u2cBPEWn1731055558423.js";import{M as bn,a as wn,C as Sn}from"./@pmndrs.3lOkADtW1731055558423.js";import{h as Mn}from"./object-hash.Aye5eUi-1731055558423.js";var Rn=An;!function(n,t){for(var e=An,r=Dn();;)try{if(533539===parseInt(e(366))/1*(-parseInt(e(363))/2)+parseInt(e(358))/3*(parseInt(e(370))/4)+-parseInt(e(375))/5+-parseInt(e(371))/6*(-parseInt(e(383))/7)+parseInt(e(367))/8*(-parseInt(e(384))/9)+parseInt(e(378))/10*(-parseInt(e(373))/11)+parseInt(e(379))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(387)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function An(n,t){var e=Dn();return(An=function(n,t){return e[n-=343]})(n,t)}!function(){En(this,(function(){var n=An,t=new RegExp(n(365)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Cn(n(344));t.test(r+n(345))&&e[n(349)](r+"input")?Cn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(387)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(){var n=["add","init","chain","dispose","exception","action","test","constructor","return (function() ","traverse","counter","__proto__","map","error","length","687rkPDxD","toString","debu","console","log","179796jkUrSI","table","function *\\( *\\)","2lzpvTQ","48iuBpUN","destructor","geometry","13504FiDsME","6MiVKqC",'{}.constructor("return this")( )',"594dZnpnx","virtualScene","3564210lQPQxk","bind","material","139070ypiHpL","15384876MwJBwY","prototype","warn","call","5089252LHILzx","907587HZWnfB","info","stateObject","apply","gger"];return(Dn=function(){return n})()}Tn(void 0,(function(){for(var n=An,t=function(){var n,t=An;try{n=Function(t(351)+t(372)+");")()}catch(e){n=window}return n}(),e=t[n(361)]=t[n(361)]||{},r=[n(362),n(381),n(385),n(356),n(347),n(364),"trace"],o=0;o<r[n(357)];o++){var i=Tn[n(350)][n(380)][n(376)](Tn),a=r[o],c=e[a]||i;i[n(354)]=Tn[n(376)](Tn),i[n(359)]=c[n(359)].bind(c),e[a]=i}}))();class Pn extends s{constructor(){var n=An;super(),this[n(374)]=null,this.virtualScene=new u}[Rn(343)](...n){var t=Rn;return this[t(374)][t(343)](...n),this}[Rn(368)](){var n=Rn;this[n(374)][n(352)]((t=>{var e=n;t instanceof l&&(t[e(369)].dispose(),t[e(377)][e(346)](),t.material[e(355)]&&t[e(377)][e(355)][e(346)](),this[e(374)].remove(t))})),this[n(374)]=null}}const zn=Pn;function Cn(n){function t(n){var e=An;if("string"==typeof n)return function(n){}[e(350)]("while (true) {}")[e(387)](e(353));1!==(""+n/n)[e(357)]||n%20==0?function(){return!0}[e(350)](e(360)+"gger")[e(382)](e(348)):function(){return!1}[e(350)]("debu"+e(388))[e(387)](e(386)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=kn;function Fn(){const n=['{}.constructor("return this")( )',"1560360hPzUNv","stateObject","1165738prywHG","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","function *\\( *\\)","2050218pzktZY","debu","city/canary_wharf_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","24zoCBrs","error","exception","return (function() ","trace","action","1219756DtPxXW","829407tjGied","__proto__","venice/venice_sunset_1k.hdr","test","while (true) {}","toString","20867103PstRbf","table","outdoor/satara_night_1k.hdr","kiara/kiara_1_dawn_1k.hdr","bind","gger","input","indoor/small_hangar_01_1k.hdr","18ktzVtP","call","apply","city/shanghai_bund_1k.hdr","init","164644jXmWes","outdoor/outdoor_umbrellas_1k.hdr","10aMXhLY","length","constructor","chain","prototype","indoor/abandoned_games_room_02_1k.hdr","log"];return(Fn=function(){return n})()}!function(n,t){const e=kn,r=Fn();for(;;)try{if(478143===-parseInt(e(463))/1+-parseInt(e(462))/2+parseInt(e(477))/3*(-parseInt(e(482))/4)+-parseInt(e(492))/5+-parseInt(e(499))/6+-parseInt(e(494))/7*(-parseInt(e(456))/8)+-parseInt(e(469))/9*(-parseInt(e(484))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(n,t){const e=Fn();return(kn=function(n,t){return e[n-=456]})(n,t)}!function(){Bn(this,(function(){const n=kn,t=new RegExp(n(498)),e=new RegExp(n(496),"i"),r=Nn(n(481));t.test(r+n(487))&&e[n(466)](r+n(475))?Nn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=kn,t=function(){const n=kn;let t;try{t=Function(n(459)+n(491)+");")()}catch(e){t=window}return t}(),e=t[n(495)]=t[n(495)]||{},r=[n(490),"warn","info",n(457),n(458),n(470),n(460)];for(let o=0;o<r.length;o++){const t=jn[n(486)][n(488)][n(473)](jn),i=r[o],a=e[i]||t;t[n(464)]=jn[n(473)](jn),t[n(468)]=a[n(468)][n(473)](a),e[i]=t}}))();const Un={sunset:On(465),studio:"studio/poly_haven_studio_1k.hdr",city:On(501),umbrellas:On(483),night:On(471),forest:"outood/mossy_forest_1k.hdr",snow:On(502),dawn:On(472),hangar:On(476),urban:On(489),modern:"city/modern_buildings_2_1k.hdr",shangai:On(480)};function Nn(n){function t(n){const e=kn;if("string"==typeof n)return function(n){}[e(486)](e(467)).apply(e(497));1!==(""+n/n)[e(485)]||n%20==0?function(){return!0}[e(486)](e(500)+"gger")[e(478)](e(461)):function(){return!1}.constructor(e(500)+e(474)).apply(e(493)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Wn;!function(n,t){const e=Wn,r=Vn();for(;;)try{if(768974===parseInt(e(450))/1+-parseInt(e(451))/2+-parseInt(e(443))/3+-parseInt(e(429))/4*(parseInt(e(424))/5)+parseInt(e(444))/6*(parseInt(e(448))/7)+parseInt(e(423))/8*(parseInt(e(454))/9)+parseInt(e(439))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Wn,t=new RegExp(n(460)),e=new RegExp(n(436),"i"),r=$n(n(435));t.test(r+n(433))&&e.test(r+n(452))?$n():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zn(void 0,(function(){const n=Wn;let t;try{t=Function(n(440)+n(446)+");")()}catch(o){t=window}const e=t.console=t[n(426)]||{},r=[n(459),n(432),"info",n(431),"exception",n(442),"trace"];for(let i=0;i<r[n(445)];i++){const t=Zn[n(466)][n(430)][n(453)](Zn),o=r[i],a=e[o]||t;t[n(465)]=Zn[n(453)](Zn),t.toString=a[n(462)][n(453)](a),e[o]=t}}))();const Gn=Ln(458);function Vn(){const n=["value","Preset must be one of: ","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","log","function *\\( *\\)","counter","toString","mapping","while (true) {}","__proto__","constructor","call","gger","setPath","8854776bunUtB","5zgcTed","string","console","isColor","debu","2081396grkbuj","prototype","error","warn","chain","background","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","join","isArray","1968200HUayuv","return (function() ","Failed to load environment map: ","table","4525011CXsNLv","1629150LAOTji","length",'{}.constructor("return this")( )',"apply","7ynXeEq","action","1502307RJfdMf","559678ZfscEp","input","bind","9AvYZAg","stateObject"];return(Vn=function(){return n})()}function Wn(n,t){const e=Vn();return(Wn=function(n,t){return e[n-=420]})(n,t)}function $n(n){function t(n){const e=Wn;if(typeof n===e(425))return function(n){}[e(466)](e(464))[e(447)](e(461));1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}[e(466)](e(428)+"gger")[e(420)](e(449)):function(){return!1}.constructor(e(428)+e(421)).apply(e(455)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=Kn;!function(n,t){const e=Kn,r=Qn();for(;;)try{if(324968===-parseInt(e(155))/1+-parseInt(e(173))/2*(-parseInt(e(168))/3)+-parseInt(e(167))/4*(parseInt(e(189))/5)+-parseInt(e(146))/6+parseInt(e(187))/7+parseInt(e(169))/8*(parseInt(e(163))/9)+parseInt(e(160))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(143)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Kn,t=new RegExp(n(148)),e=new RegExp(n(153),"i"),r=nt(n(162));t[n(175)](r+n(178))&&e[n(175)](r+n(152))?nt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(143)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(n,t){const e=Qn();return(Kn=function(n,t){return e[n-=143]})(n,t)}function Qn(){const n=["type","1134511bjCqVO","useDefaultScene","2065lAaewv","update","default","call","$slots","generateMipmaps","action","destructor","frames","console","apply","prototype","constructor","3284592MmrRex","far","function *\\( *\\)","value","envSence","magFilter","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","near","209441pDpkwY","texture","virtualScene","log","toString","12036440GiTPZL","isArray","init","36hDmygs","info","symbol","string","6236aLduaF","3eFYAmg","473104GiXIPL","background","length","while (true) {}","246878GpUVRw","table","test","resolution","bind","chain","__proto__","component","stateObject","minFilter","debu","TresEnvSence","return (function() "];return(Qn=function(){return n})()}Xn(void 0,(function(){const n=Kn,t=function(){const n=Kn;let t;try{t=Function(n(185)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(198)]=t[n(198)]||{},r=[n(158),"warn",n(164),"error","exception",n(174),"trace"];for(let o=0;o<r.length;o++){const t=Xn.constructor[n(144)][n(177)](Xn),i=r[o],a=e[i]||t;t[n(179)]=Xn[n(177)](Xn),t[n(159)]=a[n(159)][n(177)](a),e[i]=t}}))();const Jn=nn({__name:qn(180),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=X(null),x=null;const I=X(null);tn((()=>{var n,t;const e=Kn;null==(n=I.value)||n[e(196)](),null==(t=y[e(149)])||t.dispose()}));const{onBeforeLoop:b}=$();let w=1;b((()=>{const n=Kn;x&&I[n(149)]&&y[n(149)]&&(i[n(197)]===1/0||w<i.frames)&&(i.useDefaultScene?x[n(190)](s.value,u[n(149)]):x[n(190)](s[n(149)],un(I[n(149)][n(157)])),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=Y(n);K(n,(()=>{o()}));const l=X(null),h=Q((()=>Array[e(438)](c[e(456)]))),v=Q((()=>h[e(456)]?f:q));return K([c,s],(async([n,t])=>{const r=e;if(n&&n[r(445)]>0&&!(null==i?void 0:i[r(456)])){try{l[r(456)]=await W(v[r(456)],h[r(456)]?[...J(n)]:J(n),(n=>{t&&n[r(422)](J(t))}))}catch(o){throw new Error(r(441)+o)}l[r(456)]&&(l[r(456)].mapping=h[r(456)]?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r[t(456)]&&n&&(r[t(456)].environment=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(456)])?t.value.texture:o,a=r.value[i(434)];!(null==a?void 0:a[i(427)])&&(a=void 0),r[i(456)][i(434)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(456)]&&n&&(r[t(456)].backgroundBlurriness=n)}),{immediate:!0}),K((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Un){const e=Gn,i=Un[n];try{l[t(456)]=await W(q,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(441)+r)}l[t(456)]&&l.value&&(l[t(456)][t(463)]=d),o()}else if(n&&!(n in Un))throw new Error(t(457)+Object.keys(Un)[t(437)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(149)].environment=n.texture,i[t(170)]&&(u[t(149)][t(170)]=n.texture)):(u[t(149)].environment=S.value,i[t(170)]&&(u.value[t(170)]=S[t(149)]))};K(S,(n=>{const t=Kn;y[t(149)]&&M(y[t(149)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Kn;null==(n=y[t(149)])||n.dispose(),y[t(149)]=new v(i[t(176)]),x=new m(i[t(154)],i[t(147)],y[t(149)]),i[t(188)]?(y[t(149)].texture[t(186)]=g,y[t(149)][t(156)][t(194)]=!1,y.value[t(156)][t(182)]=_,y[t(149)][t(156)][t(151)]=_):y.value[t(156)][t(186)]=h,M(y[t(149)])};return K((()=>sn().default),(n=>{var t,e;const r=Kn;n&&(!y[r(149)]||y[r(149)].texture[r(186)]!==h)&&(l=n(),Array[r(161)](l)&&l[r(171)]>0&&typeof(null==(t=l[0])?void 0:t[r(186)])!==r(165))?R():(null==(e=y.value)||e.dispose(),y.value=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,K((()=>i[e(188)]),(n=>{y[e(149)]&&R()})),(n,t)=>{const r=e;return J(y)?(rn(),on(r(184),{key:0,ref_key:r(150),ref:I},[an(n[r(193)],r(191))],512)):cn("",!0)}}});function nt(n){function t(n){const e=Kn;if(typeof n===e(166))return function(n){}[e(145)](e(172))[e(143)]("counter");1!==(""+n/n)[e(171)]||n%20==0?function(){return!0}.constructor(e(183)+"gger")[e(192)](e(195)):function(){return!1}[e(145)](e(183)+"gger")[e(143)](e(181)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=it;!function(n,t){const e=it,r=ot();for(;;)try{if(800818===parseInt(e(481))/1*(-parseInt(e(467))/2)+parseInt(e(472))/3*(-parseInt(e(486))/4)+-parseInt(e(475))/5+-parseInt(e(490))/6+parseInt(e(473))/7*(parseInt(e(445))/8)+parseInt(e(491))/9+parseInt(e(448))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=it,t=new RegExp(n(487)),e=new RegExp(n(489),"i"),r=ft("init");t[n(460)](r+"chain")&&e[n(460)](r+n(443))?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["68nryvHB","function *\\( *\\)","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9589488JqGPVw","2976516Ruepga","counter",'{}.constructor("return this")( )',"TresPlaneGeometry","value","color","input","trace","8yLeinm","side","call","24509960pUpsjm","intensity","debu","length","ring","info","map","TresRingGeometry","action","material","__proto__","table","test","while (true) {}","toString","console","return (function() ","warn","from","117424axNmrC","toneMapped","error","log","exception","24345mklVbP","10727885kRaeNI","multiplyScalar","1547270LUBefH","circle","string","needsUpdate","set","bind","25sUUQRG","TresMesh","rect","constructor","gger"];return(ot=function(){return n})()}function it(n,t){const e=ot();return(it=function(n,t){return e[n-=438]})(n,t)}rt(void 0,(function(){const n=it,t=function(){const n=it;let t;try{t=Function(n(464)+n(439)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(463)]||{},r=[n(470),n(465),n(453),n(469),n(471),n(459),n(444)];for(let o=0;o<r[n(451)];o++){const t=rt[n(484)].prototype.bind(rt),i=r[o],a=e[i]||t;t[n(458)]=rt[n(480)](rt),t[n(462)]=a.toString[n(480)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[tt(468),tt(454),tt(446),tt(442)],lt=nn({__name:"index",props:{args:{default:null},from:{default:tt(483)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=X();return ln((()=>{const n=it;r[n(441)]&&(r[n(441)][n(442)][n(474)](e[n(449)]),r.value[n(478)]=!0)})),K((()=>e[t(442)]),(n=>{const o=t;r[o(441)]&&(r[o(441)][o(442)][o(479)](n),r[o(441)][o(442)][o(474)](e[o(449)]),r[o(441)][o(478)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return rn(),on(i(482),null,[e.from===i(476)?(rn(),on(i(455),at)):e[i(466)]===i(452)?(rn(),on("TresRingGeometry",ct)):e.from===i(483)?(rn(),on(i(440),st)):(rn(),pn(e[i(466)],{key:3,args:e})),dn("TresMeshBasicMaterial",{ref_key:i(457),ref:r,toneMapped:n[i(468)],map:n[i(454)],side:J(x),color:n[i(442)]},null,8,ut)])}}});function ft(n){function t(n){const e=it;if(typeof n===e(477))return function(n){}[e(484)](e(461)).apply(e(438));1!==(""+n/n)[e(451)]||n%20==0?function(){return!0}.constructor(e(450)+e(485))[e(447)](e(456)):function(){return!1}[e(484)](e(450)+e(485)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=dt();for(;;)try{if(750132===-parseInt(e(391))/1*(-parseInt(e(389))/2)+-parseInt(e(395))/3*(-parseInt(e(425))/4)+parseInt(e(421))/5*(-parseInt(e(388))/6)+-parseInt(e(399))/7+parseInt(e(432))/8*(parseInt(e(429))/9)+-parseInt(e(392))/10+parseInt(e(411))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(){const n=["19310830ICMNOS","console","return (function() ","debu","constructor","__proto__","test","error","clear","format","5YHRqdP","toString","warn","height","632796zIuxpi","prototype","gger","depthTexture","215262kxEmUf","value","counter","248iFzltv","exception","7091034IFLnwN","507428mtxAcP","bind","1rowrus","10615720yhsEfh","width","dispose","9ibwyrO","while (true) {}","log","stateObject","1622292NnPULf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","trace","setRenderTarget","length","type","render","call","chain","function *\\( *\\)","apply"];return(dt=function(){return n})()}!function(){pt(this,(function(){const n=vt,t=new RegExp(n(409)),e=new RegExp(n(400),"i"),r=gt("init");t[n(417)](r+n(408))&&e[n(417)](r+n(401))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=dt();return(vt=function(n,t){return e[n-=388]})(n,t)}function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=V();return ln((()=>{var n;const a=vt;null==(n=t[a(430)])||n[a(394)](),t.value=new I((null==r?void 0:r[a(430)])||p[a(393)][a(430)],(null==e?void 0:e[a(430)])||p.height.value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(430)])&&(t[a(430)][a(428)]=new w((null==r?void 0:r[a(430)])||p.width[a(430)],(null==e?void 0:e.value)||p[a(424)][a(430)]),t[a(430)][a(428)][a(420)]=S,t[a(430)][a(428)][a(405)]=M)})),s((()=>{const n=vt;(null==a?void 0:a.value)&&(l[n(430)].setRenderTarget(un(t[n(430)])),l.value[n(419)](),l.value[n(406)](un(f.value),un(u[n(430)])),l[n(430)][n(403)](null))})),mn((()=>{var n;const e=vt;null==(n=t[e(430)])||n[e(394)]()})),t}function gt(n){function t(n){const e=vt;if("string"==typeof n)return function(n){}[e(415)](e(396)).apply(e(431));1!==(""+n/n)[e(404)]||n%20==0?function(){return!0}[e(415)](e(414)+e(427))[e(407)]("action"):function(){return!1}.constructor(e(414)+"gger")[e(410)](e(398)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=vt;let t;try{t=Function(n(413)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(412)]=t[n(412)]||{},r=[n(397),n(423),"info",n(418),n(433),"table",n(402)];for(let i=0;i<r[n(404)];i++){const t=ht.constructor[n(426)][n(390)](ht),o=r[i],a=e[o]||t;t[n(416)]=ht.bind(ht),t[n(422)]=a.toString.bind(a),e[o]=t}}))();const _t=It;!function(n,t){const e=It,r=wt();for(;;)try{if(878260===-parseInt(e(481))/1*(parseInt(e(495))/2)+-parseInt(e(491))/3*(parseInt(e(490))/4)+parseInt(e(482))/5*(parseInt(e(534))/6)+-parseInt(e(501))/7*(parseInt(e(531))/8)+parseInt(e(504))/9+parseInt(e(521))/10*(parseInt(e(484))/11)+-parseInt(e(525))/12*(parseInt(e(502))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=It,t=new RegExp(n(493)),e=new RegExp(n(508),"i"),r=Mt(n(516));t.test(r+n(535))&&e[n(529)](r+n(536))?Mt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(n,t){const e=wt();return(It=function(n,t){return e[n-=477]})(n,t)}xt(void 0,(function(){const n=It;let t;try{t=Function(n(512)+n(530)+");")()}catch(o){t=window}const e=t[n(517)]=t[n(517)]||{},r=["log",n(494),n(518),n(523),n(498),n(489),n(527)];for(let i=0;i<r.length;i++){const t=xt[n(480)][n(509)][n(511)](xt),o=r[i],a=e[o]||t;t[n(506)]=xt[n(511)](xt),t[n(513)]=a[n(513)].bind(a),e[o]=t}}))();const bt=[_t(477),"side"];function wt(){const n=["material","uuid","call","table","1434820MXSbtg","3trIGCd","fboResolution","function *\\( *\\)","warn","4402HaKjyA","traverse","MeshTransmissionMaterialClass","exception","index","apply","3899zrLFGq","247lncOJf","thickness","8095122cqQAlD","time","__proto__","texture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","toneMapping","bind","return (function() ","toString","background","envMapIntensity","init","console","info","string","debu","259430imdLxH","render","error","gger","491388VaOaOl","stateObject","trace","action","test",'{}.constructor("return this")( )',"21440ayWLUj","side","backsideThickness","2072586HjnlXg","chain","input","buffer","isMesh","backside","constructor","91pkhWGI","20FlrPdU","value","605LSJtUN","setRenderTarget"];return(wt=function(){return n})()}const St=nn({__name:_t(499),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new wn,{onBeforeLoop:f}=$(),p=mt({width:u[e(492)],height:u[e(492)],isLoop:!1}),d=mt({width:u[e(492)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s.value=function(n,t){const e=It;let r;return n[e(496)]((n=>{const o=e;n[o(478)]&&n.material&&n[o(486)][o(487)]===t&&(r=n)})),r}(i[n(483)],r[n(483)][n(487)])})),f((({elapsed:n})=>{const t=e;r[t(483)][t(505)]=n,r.value[t(477)]===d[t(483)][t(507)]&&s[t(483)]&&(m=a[t(483)][t(510)],h=i[t(483)][t(514)],v=r.value.envMapIntensity,g=s[t(483)][t(486)][t(532)],s[t(483)][t(486)]=l,u[t(479)]&&(a[t(483)][t(485)](p.value),a.value[t(522)](i[t(483)],c[t(483)]),s[t(483)][t(486)]=r[t(483)],s[t(483)][t(486)][t(503)]=u[t(533)],s[t(483)][t(486)].buffer=p[t(483)][t(507)],s[t(483)][t(486)][t(532)]=R,s[t(483)][t(486)][t(515)]=0),a[t(483)].setRenderTarget(d.value),a[t(483)][t(522)](i[t(483)],c[t(483)]),s.value[t(486)][t(477)]=d[t(483)][t(507)],s[t(483)][t(486)]=r[t(483)],s[t(483)][t(486)][t(503)]=u.thickness,s.value[t(486)].side=g,s.value[t(486)].envMapIntensity=v,i.value[t(514)]=h,a[t(483)][t(485)](null),a[t(483)][t(510)]=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return rn(),on("TresMeshTransmissionMaterial",{ref_key:o(497),ref:r,buffer:J(d)[o(507)],side:J(x)},null,8,bt)}}});function Mt(n){function t(n){const e=It;if(typeof n===e(519))return function(n){}[e(480)]("while (true) {}").apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(480)](e(520)+"gger")[e(488)](e(528)):function(){return!1}.constructor(e(520)+e(524))[e(500)](e(526)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=At;!function(n,t){const e=At,r=Tt();for(;;)try{if(137337===parseInt(e(409))/1+parseInt(e(440))/2*(-parseInt(e(396))/3)+parseInt(e(426))/4*(parseInt(e(387))/5)+parseInt(e(397))/6*(parseInt(e(435))/7)+-parseInt(e(413))/8+parseInt(e(402))/9*(parseInt(e(441))/10)+-parseInt(e(420))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=Tt();return(At=function(n,t){return e[n-=382]})(n,t)}function Tt(){const n=["test","constructor","gger","4sVbCzF","disableX","action","exception","while (true) {}","matrixWorld","disable","init","inner","372085YKQPkQ","toString","length","setFromObject","apply","10348kglgft","11490LRspyG","max","prototype","trace","log","back","1060055PrCcnz","gref","precise","$slots","left","error","call","console","TresGroup","141ycFsWT","6PnaTvR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","counter","getCenter","1521PstWGA","value","top","bottom","index","front","bind","190795cSoquV","min","debu","set","665264RhIgog","table","outer","identity",'{}.constructor("return this")( )',"default","return (function() ","2051159aXvKpj","string","info"];return(Tt=function(){return n})()}!function(){Et(this,(function(){const n=At,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(398),"i"),r=zt(n(433));t[n(423)](r+"chain")&&e[n(423)](r+"input")?zt():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dt(void 0,(function(){const n=At,t=function(){const n=At;let t;try{t=Function(n(419)+n(417)+");")()}catch(e){t=window}return t}(),e=t[n(394)]=t[n(394)]||{},r=[n(385),n(399),n(422),n(392),n(429),n(414),n(384)];for(let o=0;o<r[n(437)];o++){const t=Dt[n(424)][n(383)][n(408)](Dt),i=r[o],a=e[i]||t;t.__proto__=Dt[n(408)](Dt),t[n(436)]=a.toString[n(408)](a),e[i]=t}}))();const Pt=nn({__name:Rt(406),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return fn((()=>{const n=At;if(!r[n(403)])return;if(!o[n(403)])return;r[n(403)][n(431)][n(416)]();const e=(new E)[n(438)](o[n(403)],t[n(389)]),i=new A,a=new T,c=e.max.x-e[n(410)].x,s=e[n(382)].y-e[n(410)].y,u=e[n(382)].z-e[n(410)].z;e[n(401)](i),e.getBoundingSphere(a);const l=t[n(404)]?s/2:t[n(405)]?-s/2:0,f=t[n(391)]?-c/2:t.right?c/2:0,p=t[n(407)]?u/2:t[n(386)]?-u/2:0;r[n(403)].position[n(412)](t[n(432)]||t[n(427)]?0:-i.x+f,t[n(432)]||t.disableY?0:-i.y+l,t[n(432)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=At;return rn(),on(i(395),{ref_key:i(388),ref:e},[dn("TresGroup",{ref_key:i(415),ref:r},[dn(i(395),{ref_key:i(434),ref:o},[an(n[i(390)],i(418))],512)],512)],512)}}});function zt(n){function t(n){const e=At;if(typeof n===e(421))return function(n){}.constructor(e(430)).apply(e(400));1!==(""+n/n)[e(437)]||n%20==0?function(){return!0}.constructor("debu"+e(425))[e(393)](e(428)):function(){return!1}[e(424)](e(411)+"gger")[e(439)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ct(n,t){const e=kt();return(Ct=function(n,t){return e[n-=450]})(n,t)}const Ot=Ct;!function(n,t){const e=Ct,r=kt();for(;;)try{if(665570===-parseInt(e(491))/1*(-parseInt(e(488))/2)+-parseInt(e(461))/3*(-parseInt(e(487))/4)+parseInt(e(507))/5+-parseInt(e(483))/6*(-parseInt(e(450))/7)+parseInt(e(478))/8+parseInt(e(484))/9+-parseInt(e(464))/10*(parseInt(e(462))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Ct,t=new RegExp(n(466)),e=new RegExp(n(452),"i"),r=Lt(n(454));t[n(465)](r+n(469))&&e.test(r+n(471))?Lt():r("0")}))()}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kt(){const n=["stateObject","backsideIOR","1tfKmlE","TresGroup","debu","counter","far","worldRadius","ior","group","#ffffff",'{}.constructor("return this")( )',"value","action","params","set","log","console","879980HGVPob","11851QvYvrI","helper","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","init","scene","primitive","causticsOnly","lightSource","bind","color","75ceBnue","11EsnjgZ","length","28737490WCkkvF","test","function *\\( *\\)","update","__proto__","chain","info","input","resolution","trace","constructor","gger","Vector3","apply","6645120VIsoCS","index","intensity","while (true) {}","warn","1074KhvfoK","11023416iQlzdZ","$slots","exception","120788ASpuxC","499774kzVbUC"];return(kt=function(){return n})()}Bt(void 0,(function(){const n=Ct;let t;try{t=Function("return (function() "+n(500)+");")()}catch(o){t=window}const e=t[n(506)]=t[n(506)]||{},r=[n(505),n(482),n(470),"error",n(486),"table",n(473)];for(let i=0;i<r[n(463)];i++){const t=Bt.constructor.prototype[n(459)](Bt),o=r[i],a=e[o]||t;t[n(468)]=Bt[n(459)](Bt),t.toString=a.toString[n(459)](a),e[o]=t}}))();const jt=["object"],Ut=["object"],Nt=nn({__name:Ot(479),props:{color:{default:Ot(499)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=Sn(r[t(501)],{frames:1/0,resolution:e[t(472)],worldRadius:e[t(496)]});o[t(503)].backside=!0;const i=gn(null);K(i,(n=>{n&&o[t(455)].add(n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(467)]()})),ln((()=>{const n=t;e[n(460)]&&o[n(503)][n(460)][n(504)](e[n(460)]),e[n(497)]&&(o[n(503)][n(497)]=e[n(497)]),e.backsideIOR&&(o.params.backsideIOR=e[n(490)]),e.far&&(o[n(503)].far=e[n(495)]),e.worldRadius&&(o[n(503)][n(496)]=e.worldRadius),e[n(480)]&&(o[n(503)][n(480)]=e[n(480)])})),K((()=>e[t(457)]),(n=>{const e=t;o.params[e(457)]=n})),K((()=>e.lightSource),(n=>{const e=t;n&&o[e(503)][e(458)]instanceof D[e(476)]&&o.params[e(458)][e(504)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return rn(),on(yn,null,[dn(r(492),{ref_key:"group",ref:i},[an(n[r(485)],"default")],512),dn(r(456),{object:J(o)[r(498)],position:[0,.003,0]},null,8,jt),dn(r(456),{object:J(o)[r(451)],visible:!1},null,8,Ut)],64)}}});function Lt(n){function t(n){const e=Ct;if("string"==typeof n)return function(n){}.constructor(e(481))[e(477)](e(494));1!==(""+n/n)[e(463)]||n%20==0?function(){return!0}[e(474)](e(493)+e(475))[e(453)](e(502)):function(){return!1}[e(474)](e(493)+e(475))[e(477)](e(489)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Zt();for(;;)try{if(713435===parseInt(e(502))/1*(parseInt(e(522))/2)+parseInt(e(530))/3+parseInt(e(513))/4+-parseInt(e(515))/5*(parseInt(e(492))/6)+parseInt(e(490))/7+-parseInt(e(482))/8+parseInt(e(528))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["length","info","apply","gger","__proto__","action","7752696cPBmDT","#ifdef USE_SHADOWMAP","3712956cBBhHs","table","; i ++) {\n        offset = (vogelDiskSample(j, ","remove","dispose","toString",'{}.constructor("return this")( )',"; i++) {\n        vogelSample = vogelDiskSample(j, ","#if defined( SHADOWMAP_TYPE_PCF )","console","1cAFniB","properties","function *\\( *\\)",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","ShaderChunk","forEach","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","chain","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","shadowmap_pars_fragment","40880dtbMLp","exception","5pvmixy",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","test","compile","traverse",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","1158298KTDmnr","debu",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","material","while (true) {}","330030Qnqaru","constructor","1370094AAVsxy","return (function() ","prototype","replace","isArray","bind","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","error","6864032sEAhyU","input"];return(Zt=function(){return n})()}function Gt(n,t){const e=Zt();return(Gt=function(n,t){return e[n-=478]})(n,t)}!function(){Ht(this,(function(){const n=Gt,t=new RegExp(n(504)),e=new RegExp(n(508),"i"),r=$t("init");t[n(517)](r+n(510))&&e.test(r+n(483))?$t():r("0")}))()}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Vt(void 0,(function(){const n=Gt;let t;try{t=Function(n(531)+n(498)+");")()}catch(o){t=window}const e=t.console=t[n(501)]||{},r=["log","warn","info",n(481),n(514),n(493),"trace"];for(let i=0;i<r[n(484)];i++){const t=Vt[n(529)][n(532)][n(479)](Vt),o=r[i],a=e[o]||t;t[n(488)]=Vt[n(479)](Vt),t[n(497)]=a[n(497)][n(479)](a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=D[r(506)][r(512)];return D[r(506)][r(512)]=P.shadowmap_pars_fragment[r(533)](r(491),r(521)+t+r(525)+n+r(524)+e+r(494)+e+r(516)+e+r(499)+e+r(505)+t+r(480)+e+r(520))[r(533)](r(500),r(511)),(n,t,e)=>{P[r(512)]=o,function(n,t,e){const r=Gt;t[r(519)]((t=>{const e=r;t[e(526)]&&(Array[e(478)](t[e(526)])?t.material[e(507)]((t=>{const r=e;n[r(503)][r(495)](t),t[r(496)]()})):(n[e(503)].remove(t.material),t[e(526)][e(496)]()))})),n[r(485)].programs[r(484)]=0,n[r(518)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Gt;if(typeof n===e(509))return function(n){}[e(529)](e(527))[e(486)]("counter");1!==(""+n/n)[e(484)]||n%20==0?function(){return!0}[e(529)](e(523)+e(487)).call(e(489)):function(){return!1}[e(529)](e(523)+"gger")[e(486)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Yt;function Yt(n,t){const e=Qt();return(Yt=function(n,t){return e[n-=301]})(n,t)}!function(n,t){const e=Yt,r=Qt();for(;;)try{if(548580===-parseInt(e(343))/1*(-parseInt(e(320))/2)+-parseInt(e(326))/3+-parseInt(e(304))/4*(parseInt(e(323))/5)+-parseInt(e(313))/6*(parseInt(e(336))/7)+parseInt(e(305))/8*(parseInt(e(337))/9)+parseInt(e(307))/10*(parseInt(e(301))/11)+-parseInt(e(303))/12*(parseInt(e(324))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yt(340)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=Yt,t=new RegExp(n(302)),e=new RegExp(n(342),"i"),r=ne(n(330));t[n(331)](r+n(318))&&e[n(331)](r+n(328))?ne():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yt(340)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(){const n=["console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","50893uXDtyL","exception","stateObject","__proto__","7997341acUjhh","function *\\( *\\)","2763912ogaSwF","1516yWtBtL","27368WLDMQk","table","10pgRPrI","dispose","warn","gger","toString","debu","6KJelMq","index","call","info","counter","chain","prototype","40uUhGFT","bind","traverse","7435GdUtFD","52GpYPuh","log","796134VOpxBU","constructor","input","length","init","test","error","trace","string","value","887845jtrpTH","1791lVWmEj",'{}.constructor("return this")( )',"action","apply"];return(Qt=function(){return n})()}Kt(void 0,(function(){const n=Yt,t=function(){const n=Yt;let t;try{t=Function("return (function() "+n(338)+");")()}catch(e){t=window}return t}(),e=t[n(341)]=t[n(341)]||{},r=[n(325),n(309),n(316),n(332),n(344),n(306),n(333)];for(let o=0;o<r[n(329)];o++){const t=Kt[n(327)][n(319)][n(321)](Kt),i=r[o],a=e[i]||t;t[n(346)]=Kt.bind(Kt),t[n(311)]=a.toString[n(321)](a),e[i]=t}}))();const Jt=nn({__name:qt(314),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Yt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(335)],o[t(335)],e.value),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(335)][t(322)]((n=>{const e=t;n instanceof l&&n.material[e(308)]()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Yt;if(typeof n===e(334))return function(n){}[e(327)]("while (true) {}")[e(340)](e(317));1!==(""+n/n)[e(329)]||n%20==0?function(){return!0}[e(327)](e(312)+e(310))[e(315)](e(339)):function(){return!1}[e(327)](e(312)+e(310)).apply(e(345)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=oe;!function(n,t){const e=oe,r=ie();for(;;)try{if(183207===parseInt(e(144))/1+parseInt(e(149))/2*(parseInt(e(176))/3)+-parseInt(e(146))/4*(parseInt(e(178))/5)+-parseInt(e(138))/6+parseInt(e(168))/7*(-parseInt(e(165))/8)+parseInt(e(185))/9+parseInt(e(161))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=oe,t=new RegExp(n(153)),e=new RegExp(n(167),"i"),r=se(n(139));t[n(154)](r+n(160))&&e.test(r+n(172))?se():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(155)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=ie();return(oe=function(n,t){return e[n-=138]})(n,t)}function ie(){const n=["test","apply",">\n        }","kernel","uniforms","string","chain","2127790kzdhml","encodings_fragment","table","constructor","8RCpSMS","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2276596QeFwdf","return (function() ",'{}.constructor("return this")( )',"call","input","set","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","info","15wlxtWm","toneMapped","176635CzPdnA","bind","__proto__","colorspace_fragment","while (true) {}","value","trace","2159082uDSrZt","1620864SbDeQf","init","multiplyScalar","setTexelSize","log","toString","326994VOdqJE","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","4bsAVry","setResolution","replace","13694IcGqfd","resolution","length","debu","function *\\( *\\)"];return(ie=function(){return n})()}re(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function(n(169)+n(170)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(142),"warn",n(175),"error","exception",n(163),n(184)];for(let o=0;o<r[n(151)];o++){const t=re[n(164)].prototype[n(179)](re),i=r[o],a=e[i]||t;t[n(180)]=re[n(179)](re),t[n(143)]=a[n(143)][n(179)](a),e[i]=t}}))();const ae=parseInt(B[te(148)](/\D+/g,""));class ce extends z{constructor(n=new O){const t=te;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(174)+t(ae>=154?181:162)+t(156),vertexShader:t(145),blending:F,depthWrite:!1,depthTest:!1}),this[t(177)]=!1,this.setTexelSize(n.x,n.y),this[t(157)]=new Float32Array([0,1,2,2,3])}[te(141)](n,t){const e=te;this[e(158)].texelSize[e(183)][e(173)](n,t),this.uniforms.halfTexelSize[e(183)][e(173)](n,t)[e(140)](.5)}[te(147)](n){const t=te;this[t(158)][t(150)].value.copy(n)}}function se(n){function t(n){const e=oe;if(typeof n===e(159))return function(n){}[e(164)](e(182)).apply("counter");1!==(""+n/n)[e(151)]||n%20==0?function(){return!0}[e(164)](e(152)+"gger")[e(171)]("action"):function(){return!1}.constructor(e(152)+"gger")[e(155)](e(166)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=he;!function(n,t){const e=he,r=pe();for(;;)try{if(608253===-parseInt(e(230))/1+parseInt(e(226))/2*(-parseInt(e(196))/3)+-parseInt(e(225))/4+parseInt(e(202))/5+-parseInt(e(190))/6+-parseInt(e(245))/7*(parseInt(e(209))/8)+parseInt(e(246))/9*(parseInt(e(237))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=he,t=new RegExp(n(223)),e=new RegExp(n(206),"i"),r=ve(n(197));t[n(238)](r+"chain")&&e[n(238)](r+n(207))?ve():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["frustumCulled","USE_DEPTH","23804910LmdRaM","test","depthToBlurRatioBias","string","constructor","scene","setRenderTarget","counter","322pkOFTw","9ShahlA","call","kernel","length","convolutionMaterial","render","791004QqZWFZ","setAttribute","defines","screen","prototype","renderTargetB","2133XOWdcV","init","toString","bind","while (true) {}","return (function() ","2675225wRjFqs","value","renderToScreen","setResolution","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","gger","115176qrMbtR","apply","console","inputBuffer","stateObject","exception","debu","__proto__","error","camera","info","minDepthThreshold","depthTexture","action","function *\\( *\\)","renderTargetA","2565040uTCQjC","1398qJWHGk","setTexelSize","position","uniforms","374938dXhSnI","texture","clone","depthBuffer","maxDepthThreshold"];return(pe=function(){return n})()}fe(void 0,(function(){const n=he;let t;try{t=Function(n(201)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(211)]||{},r=["log","warn",n(219),n(217),n(214),"table","trace"];for(let i=0;i<r[n(249)];i++){const t=fe.constructor[n(194)][n(199)](fe),o=r[i],a=e[o]||t;t[n(216)]=fe[n(199)](fe),t[n(198)]=a.toString.bind(a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this.renderToScreen=!1,this[c(224)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(195)]=this.renderTargetA[c(232)](),this[c(188)]=new ce,this[c(188)][c(227)](1/t,1/e),this[c(188)][c(205)](new O(t,e)),this[c(242)]=new u,this[c(218)]=new k,this[c(188)][c(229)][c(220)][c(203)]=r,this.convolutionMaterial[c(229)][c(234)][c(203)]=o,this[c(188)].uniforms.depthScale[c(203)]=i,this[c(188)][c(229)][c(239)][c(203)]=a,this[c(188)][c(192)][c(236)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(191)](c(228),new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(193)]=new l(p,this[c(188)]),this.screen[c(235)]=!1,this.scene.add(this[c(193)])}[ue(189)](n,t,e){const r=ue,o=this.scene,i=this.camera,a=this[r(224)],c=this[r(195)],s=this[r(188)],u=s[r(229)];u[r(233)][r(203)]=t[r(221)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(249)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(248)][r(203)]=l[p],u[r(212)].value=h[r(231)],n[r(243)](f),n[r(189)](o,i),h=f;u[r(248)][r(203)]=l[p],u.inputBuffer[r(203)]=h.texture,n[r(243)](this[r(204)]?null:e),n[r(189)](o,i)}}function he(n,t){const e=pe();return(he=function(n,t){return e[n-=188]})(n,t)}function ve(n){function t(n){const e=he;if(typeof n===e(240))return function(n){}.constructor(e(200))[e(210)](e(244));1!==(""+n/n)[e(249)]||n%20==0?function(){return!0}[e(241)](e(215)+"gger")[e(247)](e(222)):function(){return!1}[e(241)]("debu"+e(208))[e(210)](e(213)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=xe;!function(n,t){for(var e=xe,r=_e();;)try{if(245913===-parseInt(e(183))/1+-parseInt(e(216))/2*(-parseInt(e(185))/3)+parseInt(e(233))/4+-parseInt(e(224))/5*(-parseInt(e(221))/6)+-parseInt(e(252))/7*(parseInt(e(186))/8)+-parseInt(e(213))/9+-parseInt(e(194))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(){var n=["fragmentShader","_tDiffuse","_minDepthThreshold","exception","mixBlur","replace","setValues","_distortion","constructor","_mixContrast","prototype","vertexShader","2645352aBMLIP","string","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","68042clVZrS","_blurStrength","_depthScale","distortion","_mixBlur","958722UsZlIx","stateObject","apply","15xBstrp","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_tDiffuseBlur","#include <emissivemap_fragment>","uniforms","minDepthThreshold","error","_hasBlur","_textureMatrix","1519536qcVZwQ","mixContrast","info","_mirror","log",'{}.constructor("return this")( )',"test","warn","while (true) {}","textureMatrix","return (function() ","maxDepthThreshold","USE_UV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","_depthToBlurRatioBias","gger","function *\\( *\\)","depthToBlurRatioBias","7dxfJtl","_maxDepthThreshold","#include <project_vertex>","_distortionMap","table","distortionMap","mixStrength","chain","306214qvhfyM","hasBlur","39doRdqb","2543344OGsTVn","tDepth","value","length","mirror","debu","_tDepth","tDiffuseBlur","1375450hSkcDL","defines","depthScale","bind","action","tDiffuse","call"];return(_e=function(){return n})()}!function(){ge(this,(function(){var n=xe,t=new RegExp(n(250)),e=new RegExp(n(246),"i"),r=be("init");t[n(239)](r+n(259))&&e.test(r+"input")?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xe(n,t){var e=_e();return(xe=function(n,t){return e[n-=183]})(n,t)}ye(void 0,(function(){var n,t=xe;try{n=Function(t(243)+t(238)+");")()}catch(s){n=window}for(var e=n.console=n.console||{},r=[t(237),t(240),t(235),t(230),t(204),t(256),t(247)],o=0;o<r[t(189)];o++){var i=ye[t(209)][t(211)][t(197)](ye),a=r[o],c=e[a]||i;i.__proto__=ye[t(197)](ye),i.toString=c.toString.bind(c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=xe;super(n),this[t(192)]={value:null},this._distortionMap={value:null},this[t(202)]={value:null},this._tDiffuseBlur={value:null},this[t(232)]={value:null},this[t(231)]={value:!1},this[t(236)]={value:0},this[t(220)]={value:0},this[t(217)]={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this[t(210)]={value:1},this[t(207)](n)}onBeforeCompile(n){var t,e=xe;!(null==(t=n[e(195)])?void 0:t[e(245)])&&(n.defines[e(245)]=""),n[e(228)][e(184)]=this[e(231)],n.uniforms.tDiffuse=this._tDiffuse,n[e(228)][e(187)]=this._tDepth,n[e(228)][e(257)]=this[e(255)],n[e(228)][e(193)]=this[e(226)],n[e(228)][e(242)]=this[e(232)],n[e(228)].mirror=this._mirror,n[e(228)].mixBlur=this[e(220)],n.uniforms[e(258)]=this._blurStrength,n[e(228)].minDepthThreshold=this._minDepthThreshold,n.uniforms[e(244)]=this[e(253)],n.uniforms.depthScale=this._depthScale,n[e(228)][e(251)]=this[e(248)],n[e(228)][e(219)]=this[e(208)],n[e(228)][e(234)]=this._mixContrast,n.vertexShader="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(212)],n[e(212)]=n[e(212)][e(206)](e(254),e(215)),n.fragmentShader="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(201)],n[e(201)]=n[e(201)].replace(e(227),e(225))}get tDiffuse(){var n=xe;return this[n(202)][n(188)]}set[me(199)](n){var t=me;this._tDiffuse[t(188)]=n}get tDepth(){var n=me;return this[n(192)][n(188)]}set[me(187)](n){var t=me;this[t(192)][t(188)]=n}get distortionMap(){var n=me;return this[n(255)][n(188)]}set[me(257)](n){var t=me;this[t(255)][t(188)]=n}get[me(193)](){var n=me;return this[n(226)][n(188)]}set[me(193)](n){var t=me;this[t(226)][t(188)]=n}get[me(242)](){var n=me;return this[n(232)][n(188)]}set[me(242)](n){var t=me;this[t(232)][t(188)]=n}get hasBlur(){var n=me;return this[n(231)][n(188)]}set hasBlur(n){var t=me;this[t(231)][t(188)]=n}get[me(190)](){return this[me(236)].value}set[me(190)](n){this[me(236)].value=n}get[me(205)](){return this[me(220)].value}set[me(205)](n){var t=me;this._mixBlur[t(188)]=n}get[me(258)](){return this[me(217)].value}set[me(258)](n){var t=me;this[t(217)][t(188)]=n}get minDepthThreshold(){return this[me(203)].value}set[me(229)](n){var t=me;this[t(203)][t(188)]=n}get[me(244)](){var n=me;return this._maxDepthThreshold[n(188)]}set[me(244)](n){var t=me;this[t(253)][t(188)]=n}get[me(196)](){var n=me;return this[n(218)][n(188)]}set depthScale(n){var t=me;this._depthScale[t(188)]=n}get[me(251)](){var n=me;return this[n(248)][n(188)]}set[me(251)](n){this[me(248)].value=n}get[me(219)](){var n=me;return this[n(208)][n(188)]}set[me(219)](n){this[me(208)].value=n}get[me(234)](){return this[me(210)].value}set[me(234)](n){var t=me;this._mixContrast[t(188)]=n}}function be(n){function t(n){var e=xe;if(typeof n===e(214))return function(n){}.constructor(e(241)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(209)](e(191)+e(249))[e(200)](e(198)):function(){return!1}.constructor(e(191)+e(249))[e(223)](e(222)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Ee;!function(n,t){const e=Ee,r=Re();for(;;)try{if(687895===parseInt(e(427))/1+-parseInt(e(373))/2*(parseInt(e(451))/3)+parseInt(e(384))/4+parseInt(e(385))/5+parseInt(e(426))/6*(-parseInt(e(460))/7)+parseInt(e(369))/8*(-parseInt(e(380))/9)+parseInt(e(442))/10*(parseInt(e(389))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Ee,t=new RegExp(n(462)),e=new RegExp(n(459),"i"),r=De(n(397));t[n(408)](r+n(393))&&e[n(408)](r+"input")?De():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(){const n=["addScaledVector","t-diffuse-blur","updateMatrixWorld","setFromMatrixPosition","toString","shadowMap","setRenderTarget","test","call","dot","applyMatrix4","autoClear","enabled","material","clipPlane","rotationMatrix","action","key","isMesh","autoUpdate","gger","max-depth-threshold","reflectorOffset","copy","depth-to-blur-ratio-bias","20196JHyWyy","49893UgUYPE","render","bind","prototype","clear","elements","subVectors","textureMatrix","multiplyScalar","defines-USE_DEPTH","min-depth-threshold","virtualCamera","exception","TresMeshReflectorMaterial","lookAt","10GYyDaj","matrixWorld","reflectorPlane","mix-strength","distortionMap","console","far","projectionMatrix","negate","49362eBlEqd","add","while (true) {}","constant",'{}.constructor("return this")( )',"multiply","distortion","view","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1897jdxRRT","lookAtPosition","function *\\( *\\)","__proto__","mix-contrast","defines-USE_DISTORTION","materialRef","cameraWorldPosition","length","matrixWorldInverse","depth-scale","reflect","depthTexture","8LszCmi","texture","apply","constructor","134xPQDCK","target","set","info","texture-matrix","value","table","1142127MGdIiI","mirror","dispose","normal","1664896dYjiVQ","5278335kfdeot","log","assign","defines-USE_BLUR","14383798WlwEnk","traverse","setFromNormalAndCoplanarPoint","extractRotation","chain","position","trace","error","init","sign","return (function() ","reflectorWorldPosition"];return(Re=function(){return n})()}function Ee(n,t){const e=Re();return(Ee=function(n,t){return e[n-=367]})(n,t)}Me(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(399)+n(455)+");")()}catch(e){t=window}return t}(),e=t[n(447)]=t[n(447)]||{},r=[n(386),"warn",n(376),n(396),n(439),n(379),n(395)];for(let o=0;o<r[n(468)];o++){const t=Me[n(372)][n(430)][n(429)](Me),i=r[o],a=e[i]||t;t[n(463)]=Me.bind(Me),t[n(405)]=a[n(405)][n(429)](a),e[i]=t}}))();const Ae=[we(377),we(381),"t-diffuse","t-depth",we(402),"has-blur",we(445),we(437),we(422),we(470),we(425),we(457),we(446),we(464),we(388),we(436),"defines-USE_DISTORTION"],Te=nn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:R,extend:E}=V();E({MeshReflectorMaterial:Ie});const T=gn(),D=gn(),P=gn(),z=gn(),C=Q((()=>{const n=Ee;return"number"==typeof f.value?[f.value,f[n(378)]]:f.value})),O=Q((()=>C[r(378)][0]>0||C[r(378)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T[o(378)])||n[o(370)][o(382)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(378)]=new I(i.value,i[o(378)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i[o(378)],S,M)},t(y,e(x)))),D[o(378)]=new I(i[o(378)],i[o(378)],f),P[o(378)]=new de({resolution:i[o(378)],width:C[o(378)][0],height:C[o(378)][1],minDepthThreshold:a[o(378)],maxDepthThreshold:s.value,depthScale:u[o(378)],depthToBlurRatioBias:l[o(378)]}),z.value={mirror:p,textureMatrix:F[o(434)],mixBlur:d,tDiffuse:T[o(378)][o(370)],tDepth:T[o(378)][o(368)],tDiffuseBlur:T.value[o(370)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(378)],mixContrast:_,"defines-USE_BLUR":O[o(378)]?"":void 0,"defines-USE_DEPTH":u[o(378)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const B=gn(),{onLoop:k}=$();k((()=>{var n;const t=r;if(!(B[t(378)]&&R[t(378)]&&T.value&&y[t(378)]))return;const e=function(n,t){const e=Ee;let r;return n[e(390)]((n=>{const o=e;n[o(419)]&&n[o(414)]&&n[o(414)].uuid===t&&(r=n)})),r}(x.value,B[t(378)].uuid);if(!e)return;e.visible=!1;const i=R.value.xr[t(413)],a=R[t(378)][t(406)][t(420)];(function(n){var t,e;const r=Ee;if(F[r(400)][r(404)](n[r(443)]),F[r(467)][r(404)](null==(t=y[r(378)])?void 0:t.matrixWorld),F[r(416)][r(392)](n.matrixWorld),F[r(383)].set(0,0,1),F.normal[r(411)](F[r(416)]),F.reflectorWorldPosition[r(401)](F[r(383)],o[r(423)]),F[r(458)][r(433)](F[r(400)],F[r(467)]),F[r(458)].dot(F.normal)>0)return;F[r(458)][r(367)](F[r(383)])[r(450)](),F[r(458)][r(452)](F[r(400)]),F[r(416)][r(392)](null==(e=y[r(378)])?void 0:e[r(443)]),F[r(461)][r(375)](0,0,-1),F[r(461)][r(411)](F[r(416)]),F[r(461)][r(452)](F.cameraWorldPosition),F.target[r(433)](F[r(400)],F[r(461)]),F[r(374)][r(367)](F[r(383)])[r(450)](),F[r(374)].add(F[r(400)]),F.virtualCamera[r(394)][r(424)](F.view),F[r(438)].up[r(375)](0,1,0),F[r(438)].up.applyMatrix4(F.rotationMatrix),F[r(438)].up[r(367)](F[r(383)]),F.virtualCamera[r(441)](F[r(374)]),F[r(438)].far=(null==y?void 0:y[r(378)])[r(448)],F.virtualCamera[r(403)](),F.virtualCamera[r(449)][r(424)]((null==y?void 0:y[r(378)])[r(449)]),F[r(434)][r(375)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(434)][r(456)](F[r(438)].projectionMatrix),F[r(434)][r(456)](F.virtualCamera[r(469)]),F.textureMatrix[r(456)](n[r(443)]),F[r(444)][r(391)](F[r(383)],F[r(400)]),F[r(444)][r(411)](F[r(438)].matrixWorldInverse),F.clipPlane[r(375)](F[r(444)].normal.x,F.reflectorPlane[r(383)].y,F[r(444)][r(383)].z,F[r(444)][r(454)]);const i=F[r(438)][r(449)];F.q.x=(Math[r(398)](F[r(415)].x)+i[r(432)][8])/i.elements[0],F.q.y=(Math.sign(F[r(415)].y)+i.elements[9])/i[r(432)][5],F.q.z=-1,F.q.w=(1+i[r(432)][10])/i[r(432)][14],F[r(415)][r(435)](2/F[r(415)][r(410)](F.q)),i[r(432)][2]=F.clipPlane.x,i[r(432)][6]=F[r(415)].y,i[r(432)][10]=F.clipPlane.z+1,i[r(432)][14]=F[r(415)].w})(e),R[t(378)][t(406)].autoUpdate=!1,R[t(378)][t(407)](T.value),R[t(378)][t(412)]||R.value[t(431)](),R.value.render(x[t(378)],F.virtualCamera),null==(n=null==P?void 0:P[t(378)])||n[t(428)](R[t(378)],T[t(378)],D[t(378)]),R.value.xr.enabled=i,R[t(378)][t(406)][t(420)]=a,e.visible=!0,R[t(378)][t(407)](null)}));const j=xn(),U=Q((()=>{const n=r,t={};return Object[n(387)](t,o),Object[n(387)](t,j[n(378)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(378)])||n[e(382)](),null==(t=null==D?void 0:D[e(378)])||t[e(382)]()})),(n,t)=>{var e,o,i;const c=r;return rn(),on(c(440),In({key:c(418)+z[c(378)]["defines-USE_BLUR"]+z[c(378)][c(436)]+z.value[c(465)],ref_key:c(466),ref:B},U[c(378)],{"texture-matrix":F.textureMatrix,mirror:J(p),"t-diffuse":null==(e=T[c(378)])?void 0:e[c(370)],"t-depth":null==(o=T[c(378)])?void 0:o[c(368)],"t-diffuse-blur":null==(i=D.value)?void 0:i[c(370)],"has-blur":O.value,"mix-strength":J(v),"min-depth-threshold":J(a),"max-depth-threshold":J(s),"depth-scale":J(u),"depth-to-blur-ratio-bias":J(l),distortion:J(m),distortionMap:J(g),"mix-contrast":J(_),"defines-USE_BLUR":O[c(378)]?"":void 0,"defines-USE_DEPTH":J(u)>0?"":void 0,"defines-USE_DISTORTION":J(g)?"":void 0}),null,16,Ae)}}});function De(n){function t(n){const e=Ee;if("string"==typeof n)return function(n){}.constructor(e(453)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(372)]("debu"+e(421))[e(409)](e(417)):function(){return!1}[e(372)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Oe,r=Ce();for(;;)try{if(136621===-parseInt(e(313))/1+parseInt(e(314))/2+-parseInt(e(320))/3+parseInt(e(327))/4*(-parseInt(e(336))/5)+parseInt(e(322))/6*(-parseInt(e(303))/7)+-parseInt(e(333))/8*(parseInt(e(312))/9)+parseInt(e(324))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(328)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=Oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(309),"i"),r=Fe(n(339));t.test(r+n(317))&&e[n(323)](r+"input")?Fe():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(328)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(){const n=["gger","warn","21igaBFt","value","constructor",'{}.constructor("return this")( )',"debu","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","trace","99lqqFkt","155942DDXDBr","374878ilHQKO","exception","action","chain","return (function() ","length","432588KNbeQH","table","446748JXXSwK","test","8551740SFVKsQ","while (true) {}","stateObject","4mgUGZJ","apply","toString","info","log","string","82352TNCYVL","background","__proto__","1346230UbnFBF","CubeCamera","fog","init","update","bind","type","console"];return(Ce=function(){return n})()}function Oe(n,t){const e=Ce();return(Oe=function(n,t){return e[n-=297]})(n,t)}function Fe(n){function t(n){const e=Oe;if(typeof n===e(332))return function(n){}[e(305)](e(325))[e(328)]("counter");1!==(""+n/n)[e(319)]||n%20==0?function(){return!0}.constructor(e(307)+e(301)).call(e(316)):function(){return!1}[e(305)](e(307)+e(301))[e(328)](e(326)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Oe;let t;try{t=Function(n(318)+n(306)+");")()}catch(o){t=window}const e=t[n(300)]=t[n(300)]||{},r=[n(331),n(302),n(330),n(310),n(315),n(321),n(311)];for(let i=0;i<r[n(319)];i++){const t=ze[n(305)].prototype[n(298)](ze),o=r[i],a=e[o]||t;t[n(335)]=ze.bind(ze),t[n(329)]=a[n(329)][n(298)](a),e[o]=t}}))();const Be=Le;!function(n,t){const e=Le,r=Ne();for(;;)try{if(264493===-parseInt(e(416))/1*(-parseInt(e(425))/2)+-parseInt(e(411))/3*(parseInt(e(412))/4)+parseInt(e(407))/5*(parseInt(e(446))/6)+-parseInt(e(410))/7+parseInt(e(423))/8+-parseInt(e(426))/9+-parseInt(e(414))/10*(-parseInt(e(435))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Le,t=new RegExp(n(447)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ze("init");t[n(413)](r+n(431))&&e[n(413)](r+"input")?Ze():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Le,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(406)]=t[n(406)]||{},r=[n(443),n(432),n(437),"error","exception",n(444),n(448)];for(let o=0;o<r[n(449)];o++){const t=je.constructor[n(405)][n(424)](je),i=r[o],a=e[i]||t;t[n(420)]=je.bind(je),t.toString=a[n(418)][n(424)](a),e[i]=t}}))();const Ue=["object"];function Ne(){const n=["chain","warn","TresGroup","value","253121qQquBi","debu","info","default","string","call","frames","fog","log","table","far","6hwBmws","function *\\( *\\)","trace","length","rgRef","prototype","console","117795BCrbCC","resolution","texture","3017854RLoMYu","1540353SmfGzb","4eIRCtY","test","570QrGVHT","while (true) {}","61986ivDKOc","action","toString","gger","__proto__","$slots","constructor","882408vCgUXv","bind","8Inovnm","4359285JXXojs","apply","index","visible","near"];return(Ne=function(){return n})()}function Le(n,t){const e=Ne();return(Le=function(n,t){return e[n-=405]})(n,t)}const He=nn({__name:Be(428),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return K((()=>s),(n=>{var t;const e=Oe;null==(t=c.value)||t[e(308)](),c[e(304)]=new v(n[e(304)]),c.value.texture[e(299)]=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(304)]=new(D[r(337)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;null==(n=c[Oe(304)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(304)][t(338)],d=a.value[t(334)],a[t(304)][t(334)]=r||d,a[t(304)][t(338)]=o||p,null==(n=f[t(304)])||n[t(297)](i.value,a.value),a[t(304)].fog=p,a[t(304)][t(334)]=d}}}({resolution:o[r(408)],near:o[r(430)],far:o[r(445)],envMap:o.envMap,fog:o[r(442)]}),{onBeforeLoop:s}=$();let u=0;const l=X(null);return s((()=>{const n=r;l[n(434)]&&(o[n(441)]===1/0||u<o[n(441)])&&(l[n(434)][n(429)]=!1,c(),l[n(434)][n(429)]=!0,u++)})),t({texture:null==(e=i[r(434)])?void 0:e[r(409)]}),(n,t)=>{const e=r;return rn(),on("TresGroup",null,[dn("primitive",{object:J(a)},null,8,Ue),dn(e(433),{ref_key:e(450),ref:l},[an(n[e(421)],e(438))],512)])}}});function Ze(n){function t(n){const e=Le;if(typeof n===e(439))return function(n){}[e(422)](e(415)).apply("counter");1!==(""+n/n)[e(449)]||n%20==0?function(){return!0}[e(422)]("debu"+e(419))[e(440)](e(417)):function(){return!1}[e(422)](e(436)+e(419))[e(427)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ge(n,t){const e=$e();return(Ge=function(n,t){return e[n-=423]})(n,t)}!function(n,t){const e=Ge,r=$e();for(;;)try{if(844812===-parseInt(e(435))/1+parseInt(e(462))/2*(parseInt(e(459))/3)+parseInt(e(426))/4*(parseInt(e(450))/5)+-parseInt(e(443))/6*(parseInt(e(447))/7)+-parseInt(e(436))/8*(parseInt(e(458))/9)+parseInt(e(463))/10*(-parseInt(e(438))/11)+parseInt(e(442))/12*(parseInt(e(431))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ve(this,(function(){const n=Ge,t=new RegExp(n(457)),e=new RegExp(n(449),"i"),r=Ye("init");t[n(455)](r+"chain")&&e[n(455)](r+n(454))?Ye():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(){const n=["generateUUID","key","28378xLrSsp","reduce","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","27895uheItA","bind","gger","return (function() ","input","test","stateObject","function *\\( *\\)","27lOwvYf","6sEgBoU","ShaderMaterial","error","126366FsHCZT","30MIHytX","uniforms","console","counter","value","exception",'{}.constructor("return this")( )',"__proto__","table","1124LcOLZh","length","call","constructor","info","3133oWMhcf","apply","trace","MathUtils","75962BMetft","1738472AhFwst","UniformsUtils","5290395OHrCgj","defineProperty","prototype","string","119292FGPBSn","1590TSGSED","debu"];return($e=function(){return n})()}function qe(n,t,e,r){const o=Ge,i=class extends D[o(460)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(448)](((n,[t,e])=>{const r=D[a(437)].clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(446)]="",s.forEach((([n])=>Object[a(439)](this,n,{get:()=>this[a(464)][n].value,set:t=>this[a(464)][n][a(467)]=t}))),Object.assign(this,i),r&&r(this)}};return i.key=D[o(434)][o(445)](),i}function Ye(n){function t(n){const e=Ge;if(typeof n===e(441))return function(n){}[e(429)]("while (true) {}")[e(432)](e(466));1!==(""+n/n)[e(427)]||n%20==0?function(){return!0}.constructor(e(444)+"gger")[e(428)]("action"):function(){return!1}[e(429)](e(444)+e(452))[e(432)](e(456)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ge,t=function(){const n=Ge;let t;try{t=Function(n(453)+n(423)+");")()}catch(e){t=window}return t}(),e=t[n(465)]=t[n(465)]||{},r=["log","warn",n(430),n(461),n(468),n(425),n(433)];for(let o=0;o<r[n(427)];o++){const t=We[n(429)][n(440)][n(451)](We),i=r[o],a=e[i]||t;t[n(424)]=We[n(451)](We),t.toString=a.toString[n(451)](a),e[i]=t}}))();var Xe=ur;!function(n,t){for(var e=ur,r=Ar();;)try{if(351375===parseInt(e(571))/1+-parseInt(e(580))/2+-parseInt(e(579))/3*(parseInt(e(586))/4)+-parseInt(e(510))/5*(parseInt(e(573))/6)+parseInt(e(544))/7*(parseInt(e(623))/8)+parseInt(e(533))/9+parseInt(e(601))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ur(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=ur,t=new RegExp(n(444)),e=new RegExp(n(562),"i"),r=zr(n(560));t[n(493)](r+n(516))&&e.test(r+n(482))?zr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ur(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=ur,e=function(n,t){var e=ur;if(typeof n!==e(461)||null===n)return n;var r=n[Symbol[e(463)]];if(void 0!==r){var o=r[e(447)](n,t||e(593));if("object"!=typeof o)return o;throw new TypeError(e(448))}return("string"===t?String:Number)(n)}(n,t(480));return typeof e===t(630)?e:String(e)}function nr(n,t,e){var r=ur;return(t=Je(t))in n?Object[r(632)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=ur,r=Object.keys(n);if(Object[e(625)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(460)]((function(t){var r=e;return Object[r(612)](n,t)[r(583)]}))),r.push[e(469)](r,o)}return r}function er(n){for(var t=ur,e=1;e<arguments[t(548)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(t){nr(n,t,r[t])})):Object[t(552)]?Object.defineProperties(n,Object[t(552)](r)):tr(Object(r))[t(498)]((function(e){var o=t;Object[o(632)](n,e,Object[o(612)](r,e))}))}return n}function rr(n,t){var e=ur;if(null==n)return{};var r,o,i=function(n,t){var e=ur;if(null==n)return{};var r,o,i={},a=Object[e(615)](n);for(o=0;o<a[e(548)];o++)r=a[o],t[e(551)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(625)](n);for(o=0;o<a[e(548)];o++)r=a[o],t[e(551)](r)>=0||Object[e(603)].propertyIsEnumerable[e(447)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=ur;(null==t||t>n[e(548)])&&(t=n[e(548)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=ur,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(554)]]||n[e(502)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(589)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(507)])&&(s[e(622)](o.value),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(474)]&&(c=r[e(474)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ur;if(n){if("string"==typeof n)return or(n,t);var r=Object[e(603)][e(525)][e(447)](n)[e(576)](8,-1);return"Object"===r&&n[e(481)]&&(r=n.constructor.name),r===e(443)||r===e(450)?Array[e(575)](n):r===e(509)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(493)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(n,t){for(var e=ur,r=0;r<t[e(548)];r++){var o=t[r];o[e(583)]=o[e(583)]||!1,o[e(454)]=!0,"value"in o&&(o[e(614)]=!0),Object[e(632)](n,Je(o[e(597)]),o)}}function cr(n){if(void 0===n)throw new ReferenceError(ur(555));return n}function sr(n,t){var e=ur;return(sr=Object[e(484)]?Object[e(484)][e(620)]():function(n,t){return n[e(619)]=t,n})(n,t)}function ur(n,t){var e=Ar();return(ur=function(n,t){return e[n-=442]})(n,t)}function lr(n){return(lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){var t=ur;return n.__proto__||Object[t(520)](n)})(n)}function fr(n){var t=function(){var n=ur;if(typeof Reflect===n(543)||!Reflect[n(611)])return!1;if(Reflect[n(611)][n(616)])return!1;if(typeof Proxy===n(488))return!0;try{return Boolean.prototype[n(471)][n(447)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ur,o=lr(n);if(t){var i=lr(this)[r(481)];e=Reflect[r(611)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=ur;if(t&&("object"==typeof t||typeof t===e(488)))return t;if(void 0!==t)throw new TypeError(e(609));return cr(n)}(this,e)}}Qe(void 0,(function(){for(var n=ur,t=function(){var n,t=ur;try{n=Function(t(527)+t(572)+");")()}catch(e){n=window}return n}(),e=t[n(581)]=t[n(581)]||{},r=[n(518),n(473),"info","error",n(535),"table","trace"],o=0;o<r.length;o++){var i=Qe[n(481)][n(603)][n(620)](Qe),a=r[o],c=e[a]||i;i.__proto__=Qe.bind(Qe),i[n(525)]=c[n(525)][n(620)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Xe(491),normal:"csm_Normal",roughness:Xe(569),metalness:Xe(486),emissive:"csm_Emissive",ao:Xe(539),bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:"csm_PointSize",fragColor:Xe(501),depthAlpha:Xe(624),position:Xe(526),positionRaw:Xe(587)},mr=(nr(pr={},""[Xe(467)](vr[Xe(529)]),"*"),nr(pr,"".concat(vr.positionRaw),"*"),nr(pr,""[Xe(467)](vr.normal),"*"),nr(pr,""[Xe(467)](vr[Xe(628)]),[Xe(613)]),nr(pr,""[Xe(467)](vr[Xe(599)]),"*"),nr(pr,""[Xe(467)](vr[Xe(574)]),"*"),nr(pr,""[Xe(467)](vr[Xe(530)]),[Xe(556),Xe(629)]),nr(pr,""[Xe(467)](vr[Xe(541)]),[Xe(556),Xe(629)]),nr(pr,""[Xe(467)](vr[Xe(465)]),[Xe(556),Xe(629)]),nr(pr,"".concat(vr.ao),[Xe(556),Xe(629),Xe(468),Xe(515),Xe(485),Xe(506)]),nr(pr,""[Xe(467)](vr[Xe(558)]),[Xe(515),Xe(451),"MeshNormalMaterial",Xe(485),Xe(629),"MeshStandardMaterial",Xe(506),Xe(497)]),nr(pr,""[Xe(467)](vr[Xe(561)]),[Xe(549)]),nr(pr,""[Xe(467)](vr[Xe(540)]),["MeshPhysicalMaterial"]),nr(pr,""[Xe(467)](vr[Xe(584)]),[Xe(629)]),nr(pr,"".concat(vr[Xe(517)]),[Xe(629)]),pr),gr={"#include <lights_physical_fragment>":D[Xe(577)].lights_physical_fragment},_r=(nr(dr={},"".concat(vr[Xe(545)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[Xe(467)](vr[Xe(545)],Xe(489))}),nr(dr,"".concat(vr[Xe(529)]),{"#include <begin_vertex>":Xe(456)[Xe(467)](vr[Xe(529)],Xe(566))}),nr(dr,"".concat(vr[Xe(508)]),{"#include <begin_vertex>":Xe(557)[Xe(467)](vr.positionRaw,Xe(608))}),nr(dr,""[Xe(467)](vr[Xe(628)]),{"gl_PointSize = size;":Xe(564).concat(vr[Xe(628)],Xe(449))}),nr(dr,""[Xe(467)](vr.diffuse),{"#include <color_fragment>":Xe(538).concat(vr[Xe(599)],Xe(566))}),nr(dr,""[Xe(467)](vr[Xe(574)]),{"#include <dithering_fragment>":Xe(532).concat(vr.fragColor,";\n  ")}),nr(dr,""[Xe(467)](vr[Xe(530)]),{"vec3 totalEmissiveRadiance = emissive;":Xe(631)[Xe(467)](vr[Xe(530)],";\n    ")}),nr(dr,""[Xe(467)](vr[Xe(541)]),{"#include <roughnessmap_fragment>":Xe(590).concat(vr[Xe(541)],Xe(449))}),nr(dr,""[Xe(467)](vr[Xe(465)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Xe(467)](vr[Xe(465)],Xe(449))}),nr(dr,""[Xe(467)](vr.ao),{"#include <aomap_fragment>":Xe(470)[Xe(467)](vr.ao,";\n    ")}),nr(dr,""[Xe(467)](vr[Xe(558)]),{"#include <normal_fragment_maps>":Xe(483)[Xe(467)](vr[Xe(558)],Xe(568)).concat(vr[Xe(558)],Xe(618))}),nr(dr,""[Xe(467)](vr[Xe(561)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[Xe(467)](vr[Xe(561)],Xe(626)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(446)[Xe(467)](vr.depthAlpha,Xe(449))}),nr(dr,"".concat(vr[Xe(540)]),{"material.clearcoat = clearcoat;":"material.clearcoat = ".concat(vr[Xe(540)],";")}),nr(dr,""[Xe(467)](vr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = ".concat(vr.clearcoatRoughness,";")}),nr(dr,""[Xe(467)](vr[Xe(517)]),{"#include <clearcoat_normal_fragment_begin>":Xe(478)}),dr),yr=(nr(hr={},""[Xe(467)](vr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Xe(467)](vr.position,Xe(563))}),nr(hr,""[Xe(467)](vr[Xe(508)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(522).concat(vr.position,Xe(566))}),nr(hr,""[Xe(467)](vr[Xe(599)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(523).concat(vr.diffuse,Xe(566))}),nr(hr,""[Xe(467)](vr[Xe(574)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(523)[Xe(467)](vr.fragColor,Xe(566))}),hr),xr={clearcoat:[vr[Xe(540)],vr[Xe(517)],vr[Xe(584)]]},Ir=Xe(455),br=Xe(594),wr=Xe(627),Sr=Xe(528),Mr=[Xe(588),Xe(617),Xe(503),Xe(466),Xe(537),Xe(565),"silent"],Rr=function(n,t,e){var r=Xe;return n[r(477)](t)[r(534)](e)},Er=function(n,t){var e,r,o=Xe;return new RegExp("\\b"[o(467)]((e=t,r=Xe,e[r(591)](/[-\/\\^$*+?.()|[\]{}]/g,r(596))),"\\b"))[o(493)](n)};function Ar(){var n=["csm_PositionRaw","baseMaterial","next","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","replace","// #_CSM_#","default","\n    varying mat4 csm_internal_vModelViewMatrix;\n","RawShaderMaterial","\\$&","key"," is not available in ","diffuse","#define IS_UNKNOWN;\n","10006700lIKFIY","is not a constructor","prototype","void main()","substring","silent","trim",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","Derived constructors may only return object or undefined","find","construct","getOwnPropertyDescriptor","PointsMaterial","writable","keys","sham","fragmentShader",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","__proto__","bind","_generateMaterial","push","153352IMuYMj","csm_DepthAlpha","getOwnPropertySymbols"," );\n    ","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","pointSize","MeshPhysicalMaterial","symbol","\n    vec3 totalEmissiveRadiance = ","defineProperty","ShaderMaterial","Map","function *\\( *\\)","clone","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","call","@@toPrimitive must return a primitive value.",";\n    ","Set","MeshMatcapMaterial","onBeforeCompile","_patchShader","configurable","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    vec3 transformed = ","Cannot call a class as a function","assign",'" is required to use output "',"filter","object","stateObject","toPrimitive","entries","metalness","uniforms","concat","MeshBasicMaterial","apply","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","valueOf","#define IS_","warn","return","csm_main_","Material","split","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","void main() {","string","constructor","input","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","setPrototypeOf","MeshPhongMaterial","csm_Metalness","customProgramCacheKey","function",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","_getMaterialDefine","csm_DiffuseColor","lastIndexOf","test","counter","isAlreadyExtended","Super expression must either be null or a function","ShadowMaterial","forEach","get","\n    \n            ","csm_FragColor","@@iterator","vertexShader","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","#define IS_VERTEX;\n","MeshToonMaterial","done","positionRaw","Arguments","955IPAqiH","instanceID","gger","\n            ","CustomShaderMaterial does not support RawShaderMaterial","MeshLambertMaterial","chain","clearcoatNormal","log","action","getPrototypeOf","includes","\n    gl_Position = ","\n    gl_FragColor = ","_getPatchMapForMaterial","toString","csm_Position","return (function() ","\n    \n","position","emissive","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","5958567riQFQJ","join","exception","cacheHash","patchMap","\n    #include <color_fragment>\n    diffuseColor = ","csm_AO","clearcoat","roughness","type","undefined","77dAaKVn","normal",'CSM: Property "',"MathUtils","length","MeshDepthMaterial",". Shader cannot compile.","indexOf","getOwnPropertyDescriptors","debu","iterator","this hasn't been initialised - super() hasn't been called","MeshStandardMaterial","\n    vec4 csm_internal_positionUnprojected = ","bump","while (true) {}","init","depthAlpha","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",", 1.0 );\n  ","\n    gl_PointSize = ","cacheKey",";\n  ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            "," - (dot(","csm_Roughness","update","67091hyHhCx",'{}.constructor("return this")( )',"11664hFUFOq","fragColor","from","slice","ShaderChunk","error","1587207ytYCON","1377870nTylca","console","__csm","enumerable","clearcoatRoughness","_getCacheHash","4LBEdhc"];return(Ar=function(){return n})()}function Tr(n){return n?n.replace(/\s/g,""):void 0}function Dr(n){return n[Xe(591)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=Xe;!function(n,t){var e=ur;if(typeof t!==e(488)&&null!==t)throw new TypeError(e(496));n[e(603)]=Object.create(t&&t[e(603)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(603),{writable:!1}),t&&sr(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=ur,u=n[s(588)],l=n[s(617)],f=n[s(503)],p=n[s(466)],d=n[s(537)],h=n.cacheKey,v=n[s(606)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ur(457))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e.message[t(551)](t(602))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(542)]===s(595))throw new Error(s(514));(function(n,t){var e=Xe;e(548),Object[e(458)](n,t);var r=Object[e(520)](t);Object[e(464)](Object.getOwnPropertyDescriptors(r)).filter((function(n){var t=e,r=typeof n[1][t(499)]===t(488),o=typeof n[1].set===t(488),i="function"==typeof n[1].value,a=n[0]===t(481);return(r||o||i)&&!a}))[e(498)]((function(t){var r=e;typeof n[t[0]]!==r(488)&&Object[r(632)](n,t[0],t[1])}))})(cr(t=a[s(447)](this)),e),t[s(582)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(547)].generateUUID(),type:e[s(542)],isAlreadyExtended:(r=e[s(452)],o=Xe,i=r[o(525)]().trim(),!(0===i.substring(i[o(551)]("{")+1,i.lastIndexOf("}"))[o(607)]()[o(548)])),cacheHash:"",silent:v},t[s(466)]=er(er({},t[s(466)]||{}),p||{});var g=t[s(582)],_=g[s(617)],y=g.vertexShader,x=t.uniforms;return t[s(582)].cacheHash=t._getCacheHash(),t[s(621)](_,y,x),t}return e=c,r=[{key:t(570),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(466)]=e.uniforms||this[n(466)],Object.assign(this[n(582)],e);var r=this[n(582)],o=r[n(617)],i=r[n(503)],a=this.uniforms,c=this[n(585)]();this[n(582)][n(536)]=c,this[n(621)](o,i,a)}},{key:t(445),value:function(){var n=t,e={baseMaterial:this[n(582)][n(588)],fragmentShader:this[n(582)][n(617)],vertexShader:this[n(582)][n(503)],uniforms:this[n(466)],silent:this[n(582)].silent,patchMap:this.__csm[n(537)],cacheKey:this[n(582)][n(565)]},r=new(this[n(481)])(e);return Object[n(458)](this,r),r}},{key:t(585),value:function(){var n=t,e=this[n(582)],r=e[n(617)],o=e[n(503)],i=this[n(466)],a=[Tr(r),Tr(o),i][n(460)]((function(n){return void 0!==n}));return a.length>0?Mn(a,{excludeValues:!0}):this[n(487)]()}},{key:t(621),value:function(n,e,r){var o=t,i=this;this[o(466)]=r||{},this[o(487)]=function(){return i[o(582)].cacheHash};var a=function(t){var r=o;try{var a=i[r(490)]();if(n){var c=i[r(453)](Dr(n),t[r(617)],!0);t[r(617)]=a+c}if(e){var s=i[r(453)](Dr(e),t[r(503)]);t[r(503)]=r(505)+s,t[r(503)]=a+t[r(503)]}t.uniforms=er(er({},t[r(466)]),i[r(466)]),i[r(466)]=t[r(466)]}catch(u){console[r(578)](u)}};if(this.__csm[o(495)]){var c=this[o(452)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(452)]=a;this.needsUpdate=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(524)]()),this[o(582)].patchMap);Object[o(464)](xr).forEach((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(610)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error(e(546)[e(467)](a,e(459))[e(467)](c,'". Shader cannot compile.'))})),Object[o(464)](gr).forEach((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(615)](c).forEach((function(t){var e=o;Object[e(615)](c[t]).forEach((function(r){var o=e,s=mr[t],u=i[o(582)][o(542)];if("*"===t||Er(n,t)){if(!(!s||Array.isArray(s)&&s[o(521)](u)||"*"===s))throw new Error("CSM: "[o(467)](t,o(598))[o(467)](u,o(550)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(475)+this[o(582)][o(511)][o(591)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,"void "[o(467)](d,"()")),v=n[o(521)](o(604)),m=a.includes(o(592));return v&&(m&&this[o(582)][o(495)]?(a=a[o(591)](o(479),o(513).concat(h,"\n            \n            void main() {\n          ")),s=a,u=o(592),l="\n            "[o(467)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Xe)(492)](u),a=-1===p?s:s[f(605)](0,p)+l+s.substring(p+u[f(548)])):a=a.replace(o(479),o(531)[o(467)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":br,o(567))[o(467)](Ir,o(500))[o(467)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ").concat("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(504))[o(467)](r?Sr:wr,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(467)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(490),value:function(){var n=t,e=this[n(582)][n(542)];return e?n(472).concat(e.toUpperCase(),";\n"):n(600)}},{key:t(524),value:function(){var n=t;return this[n(582)][n(542)]===n(442)?yr:_r}}],i=ur,r&&ar(e[i(603)],r),o&&ar(e,o),Object[i(632)](e,i(603),{writable:!1}),c}(D[Xe(476)]);function zr(n){function t(n){var e=ur;if(typeof n===e(480))return function(n){}[e(481)](e(559))[e(469)](e(494));1!==(""+n/n).length||n%20==0?function(){return!0}[e(481)](e(553)+e(512))[e(447)](e(519)):function(){return!1}[e(481)]("debu"+e(512)).apply(e(462)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=Fr;!function(n,t){const e=Fr,r=Ur();for(;;)try{if(201233===parseInt(e(229))/1*(-parseInt(e(250))/2)+-parseInt(e(231))/3*(parseInt(e(274))/4)+-parseInt(e(254))/5+-parseInt(e(247))/6+parseInt(e(264))/7*(-parseInt(e(277))/8)+parseInt(e(225))/9*(parseInt(e(268))/10)+parseInt(e(257))/11*(parseInt(e(245))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(235)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fr(n,t){const e=Ur();return(Fr=function(n,t){return e[n-=224]})(n,t)}!function(){Or(this,(function(){const n=Fr,t=new RegExp(n(241)),e=new RegExp(n(269),"i"),r=Nr(n(263));t[n(265)](r+n(246))&&e[n(265)](r+n(240))?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function(n(234)+n(230)+");")()}catch(e){t=window}return t}(),e=t[n(232)]=t[n(232)]||{},r=[n(233),"warn",n(275),"error",n(270),n(224),n(262)];for(let o=0;o<r.length;o++){const t=Br[n(256)][n(259)].bind(Br),i=r[o],a=e[i]||t;t[n(255)]=Br[n(243)](Br),t[n(261)]=a[n(261)][n(243)](a),e[i]=t}}))();const kr=[Cr(252)],jr=nn({__name:Cr(260),props:{color:{default:Cr(242)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:D[t(226)],metalness:e.metalness,roughness:e[t(248)],clearcoat:e[t(236)],clearcoatRoughness:e[t(271)],color:e.color,vertexShader:t(239),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(258)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Pr(r);return ln((()=>{const n=t;o[n(251)][n(272)](e[n(251)]),o[n(237)]=e[n(237)],o[n(248)]=e[n(248)],o[n(236)]=e.clearcoat,o[n(271)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return rn(),on(r(228),{object:J(o)},null,8,kr)}}});function Ur(){const n=["toString","trace","init","686IbDsdW","test","stateObject","while (true) {}","30yappqf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","clearcoatRoughness","setStyle","length","492wKUDBS","info","call","18384MRfVgn","table","834453MiCEfp","MeshPhysicalMaterial","string","primitive","11zXafIK",'{}.constructor("return this")( )',"7707QdKCRg","console","log","return (function() ","apply","clearcoat","metalness","action","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","input","function *\\( *\\)","#ff00fc","bind","gger","12xrsBcy","chain","1211304xpDtLE","roughness","counter","18404EjWSon","color","object","debu","1048060jTuxuk","__proto__","constructor","10746901vKidVD","\n      ","prototype","index"];return(Ur=function(){return n})()}function Nr(n){function t(n){const e=Fr;if(typeof n===e(227))return function(n){}.constructor(e(267))[e(235)](e(249));1!==(""+n/n)[e(273)]||n%20==0?function(){return!0}[e(256)]("debu"+e(244))[e(276)](e(238)):function(){return!1}[e(256)](e(253)+e(244))[e(235)](e(266)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Zr();;)try{if(576663===parseInt(e(437))/1*(parseInt(e(424))/2)+parseInt(e(431))/3+parseInt(e(429))/4*(-parseInt(e(423))/5)+parseInt(e(440))/6+-parseInt(e(430))/7+-parseInt(e(426))/8*(-parseInt(e(419))/9)+-parseInt(e(425))/10*(parseInt(e(406))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Gr,t=new RegExp(n(418)),e=new RegExp(n(420),"i"),r=Vr(n(416));t[n(405)](r+"chain")&&e[n(405)](r+n(433))?Vr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["gger","warn",'{}.constructor("return this")( )',"bind","table","log","init","apply","function *\\( *\\)","71388ibGXKH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","return (function() ","3451835yBrMwy","2iXaVXs","7270fDoxwm","728BcHEzb","string","debu","4UngzWB","1008203uDPEPF","1226760xokWBE","trace","input","length","console","while (true) {}","789830JPhfWh","exception","info","1265724XRXfnb","toString","call","test","10901QOOrOw","prototype","error","__proto__"];return(Zr=function(){return n})()}function Gr(n,t){var e=Zr();return(Gr=function(n,t){return e[n-=403]})(n,t)}function Vr(n){function t(n){var e=Gr;if(typeof n===e(427))return function(n){}.constructor(e(436))[e(417)]("counter");1!==(""+n/n)[e(434)]||n%20==0?function(){return!0}[e(421)](e(428)+"gger")[e(404)]("action"):function(){return!1}.constructor(e(428)+e(410)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Gr;try{n=Function(t(422)+t(412)+");")()}catch(s){n=window}for(var e=n[t(435)]=n.console||{},r=[t(415),t(411),t(439),t(408),t(438),t(414),t(432)],o=0;o<r[t(434)];o++){var i=Hr[t(421)][t(407)][t(413)](Hr),a=r[o],c=e[a]||i;i[t(409)]=Hr.bind(Hr),i.toString=c[t(403)].bind(c),e[a]=i}}))();export{qe as C,jr as _,Jn as a,lt as b,St as c,Pt as d,Nt as e,Jt as f,He as g,Te as h,mt as u};

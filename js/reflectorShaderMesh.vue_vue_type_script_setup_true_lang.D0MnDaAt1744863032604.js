import{ae as e,a as r,C as o,m as t,l as i,cg as a}from"./three.B0XaFSnH1744863032604.js";import{m as s,b as l}from"./@tresjs.DDZ0vesk1744863032604.js";import{R as n,a as f}from"./all.three.BWK6-XYU1744863032604.js";import{d as m,a5 as c,a3 as u,w as p,H as d,o as w,J as g,u as h}from"./@vue.DK6ok9LJ1744863032604.js";const v=["position","scale"],j=["object"],x=["object"],S=m({__name:"reflectorShaderMesh",props:{reflectivity:{default:.2},mirror:{default:.1},mixStrength:{default:9},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"},position:{default:[0,-1,0]},scale:{default:1}},async setup(m){let S,b;const y=m,{scene:_}=s(),M=([S,b]=c((()=>l(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/concrete_wet_floor_normal.jpg"]))),S=await S,b(),S);M[0].wrapS=e,M[0].wrapT=e,M[1].wrapS=e,M[1].wrapT=e;const G=new n,H=new f({reflectivity:y.reflectivity,mirror:y.mirror,mixStrength:y.mixStrength,color:new o(y.color),map:M[0],normalMap:M[1],normalScale:new r(5,5),fog:_.fog,dithering:!0});H.uniforms.tReflect=G.renderTargetUniform,H.uniforms.uMatrix=G.textureMatrixUniform;const R=new t(10,10),T=new i(R,H);T.name="reflectorShaderMesh",T.position.y=-.01,T.rotation.x=-Math.PI/2,T.add(G),T.onBeforeRender=(e,r,o)=>{T.visible=!1,G.update(e,r,o),T.visible=!0};const B=new a(9.5,10);return B.visible=y.showGridHelper,u((()=>{y.reflectivity&&(H.uniforms.uReflectivity.value=y.reflectivity),y.mirror&&(H.uniforms.uMirror.value=y.mirror),y.mixStrength&&(H.uniforms.uMixStrength.value=y.mixStrength),y.color&&(H.uniforms.uColor.value=new o(y.color))})),p((()=>y.showGridHelper),(e=>{B.visible=e})),(e,r)=>(w(),d("TresGroup",{position:y.position,scale:y.scale},[g("primitive",{object:h(T)},null,8,j),g("primitive",{object:h(B)},null,8,x)],8,v))}});export{S as _};

import{i as t}from"./ice-utils.13e64kDD1743149128717.js";import{_ as n,m as e}from"./gl-matrix.AFK4LjqA1743149128717.js";import{P as o}from"./tweakpane.ivGeiIdz1743149128717.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.L-brCdZe1743149128717.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=T;!function(t,n){const e=T,o=A();for(;;)try{if(944814===parseInt(e(150))/1+-parseInt(e(152))/2+-parseInt(e(135))/3*(parseInt(e(188))/4)+-parseInt(e(176))/5+-parseInt(e(171))/6*(-parseInt(e(200))/7)+parseInt(e(164))/8*(parseInt(e(228))/9)+parseInt(e(197))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(170)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){x(this,(function(){const t=T,n=new RegExp(t(206)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=b("init");n[t(222)](o+t(210))&&e.test(o+t(127))?b():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(170)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=T,n=function(){const t=T;let n;try{n=Function(t(144)+t(142)+");")()}catch(e){n=window}return n}(),e=n[t(201)]=n[t(201)]||{},o=[t(221),t(161),t(182),t(131),t(139),t(143),t(204)];for(let r=0;r<o[t(198)];r++){const n=d[t(199)][t(132)][t(138)](d),i=o[r],a=e[i]||n;n[t(183)]=d[t(138)](d),n[t(180)]=a.toString.bind(a),e[i]=n}}))();const E={id:_(129)},p=[_(216)],g=r({__name:_(146),setup(r){const x=_;let d,g,b,T,A,R,y,F,v,h,C,P,w;const I=1,S=.71,L=.76,U=new o({title:"参数"}),B=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[x(223)]({view:x(162),label:"颜色",min:0,max:1,value:.5}).on(x(156),(t=>{const n=x;j(),g[n(195)](P,t[n(186)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[x(229)](B,x(209),{label:"是否后处理"}),U[x(229)](B,"offset_right_top",{picker:x(202),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=x;D[0]=B.offset_right_top.x,D[1]=B[n(187)].y,j()})),U[x(229)](B,"offset_right_bottom",{picker:x(202),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(156),(t=>{const n=x;D[5]=B.offset_right_bottom.x,D[6]=B[n(219)].y,j()})),U[x(229)](B,x(172),{picker:x(202),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(156),(t=>{const n=x;D[10]=B.offset_left_bottom.x,D[11]=B[n(172)].y,j()})),U[x(229)](B,x(151),{picker:x(202),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(156),(t=>{D[15]=B.offset_left_top.x,D[16]=B.offset_left_top.y,j()})),a((()=>{N()}));const N=function(){const n=x;d=document.querySelector(n(160)),d[n(168)]=window[n(169)],d[n(166)]=window.innerHeight,g=d[n(181)](n(154)),g&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=k(e,o),b=t(g,l,m),v=g[n(148)](b,"uProjection"),h=g.getUniformLocation(b,"uView"),C=g[n(148)](b,n(149)),w=Y(document[n(175)](n(215)))}(),j(),g.enable(g[n(133)]),g.blendFunc(g.SRC_ALPHA,g[n(141)]),M())};function M(){const t=x;g[t(227)](g.FRAMEBUFFER,y),g.clearColor(I,S,L,1),g.clear(g[t(230)]),function(){const t=x;g[t(225)](b),g.bindBuffer(g[t(158)],T);const e=n[t(192)].create();n[t(192)][t(147)](e,0,d[t(168)],d.height,0,.1,100),g[t(208)](v,!1,e);const o=n[t(192)][t(203)]();n[t(192)].lookAt(o,[0,0,1],[0,0,0],[0,1,0]),g[t(208)](h,!1,o),O(w,600,600),O(w,400,400)}(),g.bindFramebuffer(g.FRAMEBUFFER,null),B[t(209)]&&(g.clear(g[t(230)]),g[t(155)](0,0,1,1),g[t(213)](g[t(158)],A),g[t(225)](R),g[t(163)](g[t(159)],F)),g[t(211)](g[t(205)],6,g[t(224)],0),requestAnimationFrame(M)}function O(t,o,r){const i=x;let a=n[i(192)].create();n[i(192)][i(178)](a,a,[o,r,0]),e[i(220)](a,a,[250,250,0]),g.uniformMatrix4fv(C,!1,a),g[i(163)](g[i(159)],t),g[i(211)](g.TRIANGLES,6,g.UNSIGNED_BYTE,0)}function j(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);A=k(D,e),R=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=g.getUniformLocation(R,n(179)),g[n(148)](R,n(174)),function(){const t=x;F=Y(d),y=g.createFramebuffer(),g.bindFramebuffer(g[t(130)],y),g[t(153)](g[t(130)],g[t(217)],g.TEXTURE_2D,F,0),g.bindFramebuffer(g[t(130)],null)}()}function Y(t){const n=x,e=g[n(173)]();return g.bindTexture(g[n(159)],e),t instanceof HTMLImageElement?g[n(191)](g[n(159)],0,g[n(128)],g[n(128)],g[n(224)],t):g[n(191)](g[n(159)],0,g[n(128)],t[n(168)],t.height,0,g[n(128)],g[n(224)],null),g[n(226)](g[n(159)],g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g[n(159)],g[n(196)],g.NEAREST),g[n(226)](g[n(159)],g[n(190)],g[n(165)]),g[n(226)](g[n(159)],g.TEXTURE_WRAP_T,g[n(165)]),e}function k(t,n){const e=x,o=g[e(218)]();g[e(213)](g[e(158)],o),g[e(184)](g[e(158)],t,g[e(137)]);const r=3*Float32Array[e(167)]+2*Float32Array[e(167)];g[e(140)](0,3,g[e(207)],!1,r,0),g[e(193)](0),g[e(140)](1,2,g[e(207)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),g[e(193)](1);const i=g[e(218)]();return g[e(213)](g.ELEMENT_ARRAY_BUFFER,i),g.bufferData(g[e(189)],n,g.STATIC_DRAW),g[e(213)](g[e(158)],null),o}return(t,n)=>{const e=x;return c(),s(e(157),E,[u("img",{id:e(215),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(185)}},null,8,p)])}}});function b(t){function n(t){const e=T;if(typeof t===e(177))return function(t){}[e(199)](e(136))[e(170)](e(126));1!==(""+t/t)[e(198)]||t%20==0?function(){return!0}[e(199)](e(194)+e(134))[e(145)](e(214)):function(){return!1}.constructor(e(194)+e(134)).apply(e(212)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function T(t,n){const e=A();return T=function(t,n){return e[t-=126]},T(t,n)}function A(){const t=["color","getElementById","385995vLCvea","string","translate","mixParam","toString","getContext","info","__proto__","bufferData","none","value","offset_right_top","80dSoNvO","ELEMENT_ARRAY_BUFFER","TEXTURE_WRAP_S","texImage2D","mat4","enableVertexAttribArray","debu","uniform1f","TEXTURE_MAG_FILTER","3785470BUtZcQ","length","constructor","4984DNceOk","console","inline","create","trace","TRIANGLES","function *\\( *\\)","FLOAT","uniformMatrix4fv","hidden","chain","drawElements","stateObject","bindBuffer","action","logo-texture","src","COLOR_ATTACHMENT0","createBuffer","offset_right_bottom","scale","log","test","addBlade","UNSIGNED_BYTE","useProgram","texParameteri","bindFramebuffer","122022eAAKKR","addBinding","COLOR_BUFFER_BIT","counter","input","RGBA","canvaswebgl","FRAMEBUFFER","error","prototype","BLEND","gger","64509LyDxuJ","while (true) {}","STATIC_DRAW","bind","exception","vertexAttribPointer","ONE_MINUS_SRC_ALPHA",'{}.constructor("return this")( )',"table","return (function() ","call","webglPostProcessing","ortho","getUniformLocation","uModel","654091JmOyfm","offset_left_top","3239126HCYgpF","framebufferTexture2D","webgl","clearColor","change","canvas","ARRAY_BUFFER","TEXTURE_2D","#canvaswebgl","warn","slider","bindTexture","904doFEDu","CLAMP_TO_EDGE","height","BYTES_PER_ELEMENT","width","innerWidth","apply","4272fCJYSR","offset_left_bottom","createTexture"];return(A=function(){return t})()}export{g as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aP as v,aQ as m,A as g,bb as _,C as y,a0 as x,W as I,n as b,o as w,c3 as S,c4 as M,K as E,f as R,V as A,g as T,_ as D,bI as z,m as P,ba as O,k as C,bz as k,d as F,aj as B,B as U,a as j,aN as N,e as L,M as H,as as G,a9 as Z}from"./three.HQIWXjA-1732680436779.js";import{m as W,D as V,e as $}from"./@tresjs.ozxSQdlw1732680436779.js";import{R as q}from"./three-stdlib.R2eB7x6e1732680436779.js";import{v as Y,b as X,w as K,a as J,u as Q,d as nn,U as tn,a6 as en,o as rn,D as on,G as an,I as cn,a4 as sn,aa as un,a3 as ln,q as fn,f as pn,J as dn,ab as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a8 as xn,m as In}from"./@vue.u2cBPEWn1732680436779.js";import{M as bn,a as wn,C as Sn}from"./@pmndrs.XoFR5LkZ1732680436779.js";import{h as Mn}from"./object-hash.JodcTOV91732680436779.js";var En=zn;function Rn(){var n=["call","action","prototype","table","console","2167400UfANnD","892640zTFmTC","87459JYvWVd","while (true) {}","apply","length","10438857cHbOTe","counter","__proto__","error","870YOJQVs",'{}.constructor("return this")( )',"debu","bind","38PlGWcC","1890304MFwpQF","test","toString","destructor","material","constructor","dispose","537367AXgUxq","return (function() ","string","map","gger","info","input","remove","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","stateObject","virtualScene","27111YXdyHP","add","traverse","function *\\( *\\)"];return(Rn=function(){return n})()}!function(n,t){for(var e=zn,r=Rn();;)try{if(301490===-parseInt(e(308))/1+parseInt(e(300))/2*(-parseInt(e(288))/3)+parseInt(e(301))/4+parseInt(e(286))/5+-parseInt(e(296))/6*(parseInt(e(320))/7)+-parseInt(e(287))/8+parseInt(e(292))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(290)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=zn,t=new RegExp(n(323)),e=new RegExp(n(316),"i"),r=On("init");t.test(r+"chain")&&e[n(302)](r+n(314))?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(290)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tn(void 0,(function(){var n,t=zn;try{n=Function(t(309)+t(297)+");")()}catch(s){n=window}for(var e=n.console=n[t(285)]||{},r=["log","warn",t(313),t(295),t(317),t(284),"trace"],o=0;o<r[t(291)];o++){var i=Tn[t(306)][t(283)][t(299)](Tn),a=r[o],c=e[a]||i;i[t(294)]=Tn.bind(Tn),i[t(303)]=c[t(303)][t(299)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=zn;super(),this[n(319)]=null,this[n(319)]=new u}[En(321)](...n){var t=En;return this[t(319)][t(321)](...n),this}[En(304)](){var n=En;this[n(319)][n(322)]((t=>{var e=n;t instanceof l&&(t.geometry.dispose(),t.material[e(307)](),t[e(305)].map&&t[e(305)][e(311)][e(307)](),this.virtualScene[e(315)](t))})),this[n(319)]=null}}function zn(n,t){var e=Rn();return(zn=function(n,t){return e[n-=281]})(n,t)}const Pn=Dn;function On(n){function t(n){var e=zn;if(typeof n===e(310))return function(n){}[e(306)](e(289)).apply(e(293));1!==(""+n/n).length||n%20==0?function(){return!0}[e(306)](e(298)+e(312))[e(281)](e(282)):function(){return!1}[e(306)](e(298)+e(312)).apply(e(318)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=Bn;!function(n,t){const e=Bn,r=Un();for(;;)try{if(809230===parseInt(e(525))/1*(parseInt(e(503))/2)+parseInt(e(495))/3+parseInt(e(516))/4*(-parseInt(e(499))/5)+parseInt(e(526))/6*(parseInt(e(529))/7)+-parseInt(e(523))/8+parseInt(e(514))/9*(parseInt(e(520))/10)+-parseInt(e(507))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Bn,t=new RegExp(n(527)),e=new RegExp(n(535),"i"),r=Nn(n(501));t[n(508)](r+n(534))&&e[n(508)](r+"input")?Nn():r("0")}))()}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(510)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(n,t){const e=Un();return(Bn=function(n,t){return e[n-=494]})(n,t)}function Un(){const n=["gger","stateObject","9nVOFcu","toString","4tJuObL","warn","__proto__",'{}.constructor("return this")( )',"3006620WUlllh","indoor/small_hangar_01_1k.hdr","counter","1687304XVbyYz","constructor","1107527TwJuKm","122334oXqCzt","function *\\( *\\)","return (function() ","427ohxetr","console","outood/mossy_forest_1k.hdr","kiara/kiara_1_dawn_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","action","3936063GOJxRf","call","while (true) {}","exception","5001365JQhlqG","debu","init","bind","2VJntXE","info","venice/venice_sunset_1k.hdr","table","21378753GfvqDQ","test","length","apply","trace"];return(Un=function(){return n})()}Fn(void 0,(function(){const n=Bn;let t;try{t=Function(n(528)+n(519)+");")()}catch(o){t=window}const e=t[n(530)]=t[n(530)]||{},r=["log",n(517),n(504),n(536),n(498),n(506),n(511)];for(let i=0;i<r[n(509)];i++){const t=Fn[n(524)].prototype[n(502)](Fn),o=r[i],a=e[o]||t;t[n(518)]=Fn.bind(Fn),t[n(515)]=a[n(515)][n(502)](a),e[o]=t}}))();const jn={sunset:Cn(505),studio:"studio/poly_haven_studio_1k.hdr",city:"city/canary_wharf_1k.hdr",umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:"outdoor/satara_night_1k.hdr",forest:Cn(531),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Cn(532),hangar:Cn(521),urban:Cn(533),modern:"city/modern_buildings_2_1k.hdr",shangai:"city/shanghai_bund_1k.hdr"};function Nn(n){function t(n){const e=Bn;if("string"==typeof n)return function(n){}[e(524)](e(497))[e(510)](e(522));1!==(""+n/n)[e(509)]||n%20==0?function(){return!0}[e(524)](e(500)+e(512))[e(496)](e(494)):function(){return!1}[e(524)](e(500)+e(512))[e(510)](e(513)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Gn;!function(n,t){const e=Gn,r=Wn();for(;;)try{if(243593===parseInt(e(222))/1*(parseInt(e(242))/2)+-parseInt(e(241))/3*(parseInt(e(245))/4)+-parseInt(e(230))/5*(-parseInt(e(226))/6)+parseInt(e(256))/7*(parseInt(e(225))/8)+-parseInt(e(253))/9*(parseInt(e(221))/10)+-parseInt(e(234))/11+parseInt(e(227))/12*(parseInt(e(237))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Wn();return(Gn=function(n,t){return e[n-=215]})(n,t)}!function(){Hn(this,(function(){const n=Gn,t=new RegExp(n(233)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n("init");t[n(238)](r+"chain")&&e[n(238)](r+n(249))?$n():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["1123885LzxGaG","error","value","function *\\( *\\)","393910ulDIKM","constructor","background","91xPcLpb","test","Preset must be one of: ","counter","194748semloo","3782IdlCAt","while (true) {}","exception","20ZQbqyK","trace","toString","warn","input","action","console","gger","135ubmZHW","table","backgroundBlurriness","81431HrJiOq","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","info","Failed to load environment map: ","call","isArray","length","bind","__proto__","join","log","68790ENvxOz","156xZyytf","setPath","keys","16kbbSNf","6UMmXcm","281364JdUtRl","texture","apply"];return(Wn=function(){return n})()}Zn(void 0,(function(){const n=Gn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(251)]=t.console||{},r=[n(220),n(248),n(258),n(231),n(244),n(254),n(246)];for(let i=0;i<r[n(216)];i++){const t=Zn[n(235)].prototype[n(217)](Zn),o=r[i],a=e[o]||t;t[n(218)]=Zn[n(217)](Zn),t[n(247)]=a.toString[n(217)](a),e[o]=t}}))();const Vn=Ln(257);function $n(n){function t(n){const e=Gn;if("string"==typeof n)return function(n){}[e(235)](e(243))[e(229)](e(240));1!==(""+n/n).length||n%20==0?function(){return!0}[e(235)]("debugger")[e(260)](e(250)):function(){return!1}[e(235)]("debu"+e(252))[e(229)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function qn(){const n=["305538qnFVDL","input","table","function *\\( *\\)","bind","while (true) {}","init","minFilter","string","apply","return (function() ","6522104vRlIcV","update","virtualScene","environment","frames","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","near","4mLuBfK","log","2099067ZdbxwY","default","18hCVoGj","console","type","error","magFilter","texture","constructor","call","test","dispose","isArray","3859508aGojHM","toString","resolution","959995aHqMih","chain","useDefaultScene","gger","2370710hLyOqB","background","envSence","413525dGRRXU","warn","symbol","counter","$slots","stateObject","prototype","90lZyfkO","value","debu","component","length"];return(qn=function(){return n})()}const Yn=Jn;!function(n,t){const e=Jn,r=qn();for(;;)try{if(574487===-parseInt(e(173))/1*(parseInt(e(191))/2)+-parseInt(e(193))/3+parseInt(e(151))/4+parseInt(e(154))/5*(-parseInt(e(195))/6)+-parseInt(e(161))/7+-parseInt(e(184))/8+-parseInt(e(168))/9*(-parseInt(e(158))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(182)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Jn,t=new RegExp(n(176)),e=new RegExp(n(189),"i"),r=nt(n(179));t[n(148)](r+n(155))&&e.test(r+n(174))?nt():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(182)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=qn();return(Jn=function(n,t){return e[n-=144]})(n,t)}Kn(void 0,(function(){const n=Jn;let t;try{t=Function(n(183)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(196)]||{},r=[n(192),n(162),"info",n(198),"exception",n(175),"trace"];for(let i=0;i<r.length;i++){const t=Kn[n(146)][n(167)][n(177)](Kn),o=r[i],a=e[o]||t;t.__proto__=Kn[n(177)](Kn),t[n(152)]=a.toString[n(177)](a),e[o]=t}}))();const Qn=nn({__name:Yn(171),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=X(null),x=null;const I=X(null);tn((()=>{var n,t;const e=Jn;null==(n=I.value)||n.destructor(),null==(t=y[e(169)])||t[e(149)]()}));const{onBeforeLoop:b}=$();let w=1;b((()=>{const n=Jn;x&&I.value&&y[n(169)]&&(i[n(188)]===1/0||w<i[n(188)])&&(i.useDefaultScene?x[n(185)](s[n(169)],u[n(169)]):x[n(185)](s[n(169)],un(I[n(169)][n(186)])),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=Y(n);K(n,(()=>{o()}));const l=X(null),h=J((()=>Array[e(215)](c[e(232)]))),v=J((()=>h[e(232)]?f:q));return K([c,s],(async([n,t])=>{const r=e;if(n&&n[r(216)]>0&&!(null==i?void 0:i[r(232)])){try{l[r(232)]=await V(v[r(232)],h[r(232)]?[...Q(n)]:Q(n),(n=>{t&&n[r(223)](Q(t))}))}catch(o){throw new Error(r(259)+o)}l.value&&(l.value.mapping=h[r(232)]?p:d)}}),{immediate:!0}),K(l,(n=>{const t=e;r[t(232)]&&n&&(r[t(232)].environment=n)}),{immediate:!0}),K([u,l],(([n,o])=>{const i=e;if(r[i(232)]){let e=(null==t?void 0:t[i(232)])?t[i(232)][i(228)]:o,a=r[i(232)][i(236)];!(null==a?void 0:a.isColor)&&(a=void 0),r.value[i(236)]=n?e:a}}),{immediate:!0}),K((()=>null==a?void 0:a.value),(n=>{const t=e;r.value&&n&&(r[t(232)][t(255)]=n)}),{immediate:!0}),K((()=>null==i?void 0:i[e(232)]),(async n=>{const t=e;if(n&&n in jn){const e=Vn,i=jn[n];try{l[t(232)]=await V(q,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(259)+r)}l[t(232)]&&l[t(232)]&&(l.value.mapping=d),o()}else if(n&&!(n in jn))throw new Error(t(239)+Object[t(224)](jn)[t(219)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(169)][t(187)]=n[t(145)],i.background&&(u[t(169)][t(159)]=n[t(145)])):(u.value[t(187)]=S[t(169)],i[t(159)]&&(u[t(169)].background=S[t(169)]))};K(S,(n=>{const t=Jn;y[t(169)]&&M(y[t(169)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const E=()=>{var n;const t=Jn;null==(n=y[t(169)])||n.dispose(),y[t(169)]=new v(i[t(153)]),x=new m(i[t(190)],i.far,y[t(169)]),i[t(156)]?(y[t(169)][t(145)].type=g,y[t(169)][t(145)].generateMipmaps=!1,y[t(169)][t(145)][t(180)]=_,y[t(169)][t(145)][t(144)]=_):y[t(169)][t(145)][t(197)]=h,M(y[t(169)])};return K((()=>sn()[e(194)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(169)][o(145)][o(197)]!==h)&&(l=n(),Array[o(150)](l)&&l[o(172)]>0&&typeof(null==(t=l[0])?void 0:t[o(197)])!==o(163))?E():(null==(r=y[o(169)])||r[o(149)](),y[o(169)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(169)]=S,K((()=>i[e(156)]),(n=>{y[e(169)]&&E()})),(n,t)=>{const r=e;return Q(y)?(rn(),on("TresEnvSence",{key:0,ref_key:r(160),ref:I},[an(n[r(165)],r(194))],512)):cn("",!0)}}});function nt(n){function t(n){const e=Jn;if(typeof n===e(181))return function(n){}[e(146)](e(178))[e(182)](e(164));1!==(""+n/n)[e(172)]||n%20==0?function(){return!0}[e(146)](e(170)+e(157))[e(147)]("action"):function(){return!1}.constructor(e(170)+e(157))[e(182)](e(166)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=it;function et(){const n=["TresMeshBasicMaterial","set","return (function() ","console","value","debu","chain","TresRingGeometry","prototype","gger",'{}.constructor("return this")( )',"warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","898571bYbnuV","info","3313375KYOneb","trace","from","string","map","rect","toneMapped","circle","stateObject","TresMesh","color","apply","1334370XTRvaH","276941PlCgcs","test","1731492netSAy","1050752WKtYUh","__proto__","3474630lscjly","index","while (true) {}","multiplyScalar","exception","intensity","needsUpdate","bind","material","toString","constructor","call","action","ring"];return(et=function(){return n})()}!function(n,t){const e=it,r=et();for(;;)try{if(541040===-parseInt(e(481))/1+parseInt(e(450))/2+-parseInt(e(447))/3+-parseInt(e(451))/4+parseInt(e(483))/5+parseInt(e(453))/6+parseInt(e(448))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=it,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(479),"i"),r=ft("init");t[n(449)](r+n(473))&&e[n(449)](r+"input")?ft():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function it(n,t){const e=et();return(it=function(n,t){return e[n-=440]})(n,t)}ot(void 0,(function(){const n=it;let t;try{t=Function(n(469)+n(477)+");")()}catch(o){t=window}const e=t[n(470)]=t[n(470)]||{},r=["log",n(478),n(482),"error",n(457),"table",n(484)];for(let i=0;i<r[n(480)];i++){const t=ot[n(463)][n(475)].bind(ot),o=r[i],a=e[o]||t;t[n(452)]=ot[n(460)](ot),t.toString=a[n(462)][n(460)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=["toneMapped",tt(487),"side","color"],lt=nn({__name:tt(454),props:{args:{default:null},from:{default:tt(440)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=X();return ln((()=>{const n=it;r[n(471)]&&(r[n(471)][n(445)][n(456)](e[n(458)]),r.value[n(459)]=!0)})),K((()=>e[t(445)]),(n=>{const o=t;r[o(471)]&&(r.value[o(445)][o(468)](n),r.value[o(445)][o(456)](e.intensity),r[o(471)][o(459)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return rn(),on(i(444),null,[e[i(485)]===i(442)?(rn(),on(i(474),at)):e.from===i(466)?(rn(),on(i(474),ct)):"rect"===e[i(485)]?(rn(),on("TresPlaneGeometry",st)):(rn(),pn(e[i(485)],{key:3,args:e})),dn(i(467),{ref_key:i(461),ref:r,toneMapped:n[i(441)],map:n[i(487)],side:Q(x),color:n[i(445)]},null,8,ut)])}}});function ft(n){function t(n){const e=it;if(typeof n===e(486))return function(n){}[e(463)](e(455))[e(446)]("counter");1!==(""+n/n)[e(480)]||n%20==0?function(){return!0}.constructor(e(472)+e(476))[e(464)](e(465)):function(){return!1}[e(463)]("debu"+e(476)).apply(e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(n,t){const e=vt();return(pt=function(n,t){return e[n-=465]})(n,t)}!function(n,t){const e=pt,r=vt();for(;;)try{if(238951===parseInt(e(468))/1*(parseInt(e(489))/2)+parseInt(e(506))/3*(-parseInt(e(473))/4)+parseInt(e(469))/5+parseInt(e(497))/6+parseInt(e(470))/7+-parseInt(e(479))/8*(-parseInt(e(471))/9)+-parseInt(e(477))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(505)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=pt,t=new RegExp(n(466)),e=new RegExp(n(501),"i"),r=gt(n(504));t[n(488)](r+n(485))&&e[n(488)](r+n(503))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(505)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(){const n=["1854095UNunpn","2196425cioXZH","36xkFnkD","dispose","436tJTKKL","console","setRenderTarget","height","13953890QpvMCP","length","779456UMUqMy","table","__proto__","toString","action","type","chain","while (true) {}","value","test","36986TLDMyz","info","return (function() ","prototype","constructor","width","depthTexture","exception","2232252jUegJa","error","gger","clear","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","input","init","apply","4497YnojIw","stateObject","function *\\( *\\)","bind","19nObdGM"];return(vt=function(){return n})()}function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=pt;null==(n=t[a(487)])||n[a(472)](),t[a(487)]=new I((null==r?void 0:r[a(487)])||p.width[a(487)],(null==e?void 0:e[a(487)])||p.height[a(487)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(487)])),(null==i?void 0:i[a(487)])&&(t[a(487)][a(495)]=new w((null==r?void 0:r[a(487)])||p[a(494)].value,(null==e?void 0:e[a(487)])||p[a(476)].value),t[a(487)][a(495)].format=S,t[a(487)][a(495)][a(484)]=M)})),s((()=>{const n=pt;(null==a?void 0:a.value)&&(l.value[n(475)](un(t[n(487)])),l[n(487)][n(500)](),l.value.render(un(f[n(487)]),un(u.value)),l[n(487)][n(475)](null))})),mn((()=>{var n;const e=pt;null==(n=t[e(487)])||n[e(472)]()})),t}function gt(n){function t(n){const e=pt;if("string"==typeof n)return function(n){}[e(493)](e(486))[e(505)]("counter");1!==(""+n/n)[e(478)]||n%20==0?function(){return!0}.constructor("debugger").call(e(483)):function(){return!1}.constructor(e(502)+e(499))[e(505)](e(465)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function _t(){const n=["index","10EdGbjK","return (function() ","toneMapping","envMapIntensity","info","length","setRenderTarget","thickness","toString","1318965DsNvsm",'{}.constructor("return this")( )',"while (true) {}","string","exception","266610nQssGC","201691fikSLp","background","backside","bind","apply","traverse","debu","2313344LhpLqM","side","6JadMlQ","console","warn","1OkPIKl","buffer","trace","value","stateObject","gger","call","constructor","render","5406786bbncKW","8ReTQHa","test","time","fboResolution","error","424002PomsWd","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","material","texture","log","421443JYbLKd","backsideThickness","uuid","isMesh"];return(_t=function(){return n})()}ht(void 0,(function(){const n=pt,t=function(){const n=pt;let t;try{t=Function(n(491)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(474)]||{},r=["log","warn",n(490),n(498),n(496),n(480),"trace"];for(let o=0;o<r[n(478)];o++){const t=ht[n(493)][n(492)].bind(ht),i=r[o],a=e[i]||t;t[n(481)]=ht[n(467)](ht),t[n(482)]=a[n(482)].bind(a),e[i]=t}}))();const yt=wt;!function(n,t){const e=wt,r=_t();for(;;)try{if(145174===-parseInt(e(272))/1*(parseInt(e(287))/2)+parseInt(e(313))/3*(-parseInt(e(282))/4)+-parseInt(e(308))/5+-parseInt(e(323))/6*(parseInt(e(314))/7)+parseInt(e(321))/8+parseInt(e(294))/9*(parseInt(e(299))/10)+parseInt(e(281))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=wt,t=new RegExp(n(290)),e=new RegExp(n(289),"i"),r=Mt("init");t[n(283)](r+"chain")&&e[n(283)](r+n(288))?Mt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[wt(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=wt;let t;try{t=Function(n(300)+n(309)+");")()}catch(o){t=window}const e=t.console=t[n(270)]||{},r=[n(293),n(271),n(303),n(286),n(312),"table",n(274)];for(let i=0;i<r.length;i++){const t=It[n(279)].prototype[n(317)](It),o=r[i],a=e[o]||t;t.__proto__=It[n(317)](It),t.toString=a[n(307)][n(317)](a),e[o]=t}}))();const bt=[yt(273),yt(322)];function wt(n,t){const e=_t();return(wt=function(n,t){return e[n-=270]})(n,t)}const St=nn({__name:yt(298),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new wn,{onBeforeLoop:f}=$(),p=mt({width:u[e(285)],height:u.fboResolution,isLoop:!1}),d=mt({width:u[e(285)],height:u[e(285)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(275)]=function(n,t){const e=wt;let r;return n[e(319)]((n=>{n[e(297)]&&n.material&&n.material.uuid===t&&(r=n)})),r}(i[n(275)],r[n(275)][n(296)])})),f((({elapsed:n})=>{const t=e;r.value[t(284)]=n,r[t(275)][t(273)]===d[t(275)].texture&&s[t(275)]&&(m=a[t(275)][t(301)],h=i[t(275)][t(315)],v=r[t(275)][t(302)],g=s.value.material[t(322)],s[t(275)][t(291)]=l,u[t(316)]&&(a[t(275)].setRenderTarget(p.value),a[t(275)][t(280)](i[t(275)],c[t(275)]),s[t(275)][t(291)]=r.value,s[t(275)][t(291)][t(306)]=u[t(295)],s[t(275)].material[t(273)]=p[t(275)].texture,s[t(275)][t(291)][t(322)]=E,s.value.material[t(302)]=0),a[t(275)].setRenderTarget(d[t(275)]),a[t(275)].render(i.value,c[t(275)]),s[t(275)][t(291)][t(273)]=d[t(275)][t(292)],s[t(275)][t(291)]=r[t(275)],s[t(275)][t(291)].thickness=u[t(306)],s[t(275)].material[t(322)]=g,s[t(275)][t(291)].envMapIntensity=v,i.value.background=h,a.value[t(305)](null),a[t(275)][t(301)]=m)})),t({root:r,constructor:bn}),(n,t)=>(rn(),on("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:Q(d).texture,side:Q(x)},null,8,bt))}});function Mt(n){function t(n){const e=wt;if(typeof n===e(311))return function(n){}[e(279)](e(310))[e(318)]("counter");1!==(""+n/n)[e(304)]||n%20==0?function(){return!0}[e(279)](e(320)+e(277))[e(278)]("action"):function(){return!1}[e(279)]("debugger").apply(e(276)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=Tt;!function(n,t){const e=Tt,r=Dt();for(;;)try{if(328630===parseInt(e(315))/1+parseInt(e(345))/2+parseInt(e(324))/3*(-parseInt(e(303))/4)+-parseInt(e(341))/5*(parseInt(e(293))/6)+-parseInt(e(319))/7*(parseInt(e(301))/8)+-parseInt(e(300))/9+parseInt(e(317))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(288)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rt(this,(function(){const n=Tt,t=new RegExp(n(311)),e=new RegExp(n(290),"i"),r=Pt(n(289));t[n(313)](r+n(336))&&e[n(313)](r+n(320))?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(288)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=Dt();return(Tt=function(n,t){return e[n-=287]})(n,t)}function Dt(){const n=["3905628VCHAGR","matrixWorld","identity","console","back","toString","inner","1658700sGwjQq","1700752OzNikI","constructor","4BXDvsR","gger","$slots","front","bind","position","index","trace","function *\\( *\\)","precise","test","stateObject","248654rZEcof","prototype","11611940gAEYNF","set","14gRmnTI","input","TresGroup","min","value","916440xlHomb","debu","getBoundingSphere","table","setFromObject","disableX","warn","__proto__","getCenter","disable","max","call","chain","default","action","info","length","5MrGgJy","return (function() ","right","left","969376pxfHwT","gref","apply","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bottom","error"];return(Dt=function(){return n})()}At(void 0,(function(){const n=Tt,t=function(){const n=Tt;let t;try{t=Function(n(342)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(296)]=t[n(296)]||{},r=["log",n(330),n(339),n(292),"exception",n(327),n(310)];for(let o=0;o<r[n(340)];o++){const t=At[n(302)][n(316)][n(307)](At),i=r[o],a=e[i]||t;t[n(331)]=At.bind(At),t[n(298)]=a[n(298)].bind(a),e[i]=t}}))();const zt=nn({__name:Et(309),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return fn((()=>{const n=Tt;if(!r.value)return;if(!o[n(323)])return;r[n(323)][n(294)][n(295)]();const e=(new R)[n(328)](o.value,t[n(312)]),i=new A,a=new T,c=e.max.x-e.min.x,s=e[n(334)].y-e[n(322)].y,u=e[n(334)].z-e[n(322)].z;e[n(332)](i),e[n(326)](a);const l=t.top?s/2:t[n(291)]?-s/2:0,f=t[n(344)]?-c/2:t[n(343)]?c/2:0,p=t[n(306)]?u/2:t[n(297)]?-u/2:0;r.value[n(308)][n(318)](t.disable||t[n(329)]?0:-i.x+f,t[n(333)]||t.disableY?0:-i.y+l,t[n(333)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Tt;return rn(),on(i(321),{ref_key:i(287),ref:e},[dn(i(321),{ref_key:"outer",ref:r},[dn(i(321),{ref_key:i(299),ref:o},[an(n[i(305)],i(337))],512)],512)],512)}}});function Pt(n){function t(n){const e=Tt;if("string"==typeof n)return function(n){}[e(302)]("while (true) {}")[e(288)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(302)]("debu"+e(304))[e(335)](e(338)):function(){return!1}[e(302)](e(325)+e(304))[e(288)](e(314)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Ct;function Ct(n,t){const e=jt();return(Ct=function(n,t){return e[n-=389]})(n,t)}!function(n,t){const e=Ct,r=jt();for(;;)try{if(582383===parseInt(e(439))/1*(-parseInt(e(423))/2)+-parseInt(e(426))/3*(-parseInt(e(445))/4)+-parseInt(e(442))/5*(-parseInt(e(415))/6)+parseInt(e(417))/7+parseInt(e(433))/8+parseInt(e(441))/9*(parseInt(e(443))/10)+-parseInt(e(407))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(435)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=Ct,t=new RegExp(n(428)),e=new RegExp(n(419),"i"),r=Lt(n(410));t.test(r+n(405))&&e[n(401)](r+n(422))?Lt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(435)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ft(void 0,(function(){const n=Ct,t=function(){const n=Ct;let t;try{t=Function(n(408)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(404)]=t[n(404)]||{},r=[n(398),n(414),n(390),n(402),"exception","table","trace"];for(let o=0;o<r[n(432)];o++){const t=Ft[n(400)][n(429)][n(420)](Ft),i=r[o],a=e[i]||t;t[n(397)]=Ft[n(420)](Ft),t[n(424)]=a[n(424)].bind(a),e[i]=t}}))();const Bt=[Ot(391)],Ut=[Ot(391)];function jt(){const n=["set","function *\\( *\\)","prototype","call","color","length","7278000ZxEvQI","params","apply","intensity","#ffffff","while (true) {}","3118vElOny","action","7090821sSsfXB","20qMaDws","10CqisvM","value","9076JrtPHv","far","info","object","group","ior","index","gger","debu","__proto__","log","string","constructor","test","error","lightSource","console","chain","stateObject","20996657fwQWoA","return (function() ","backsideIOR","init","primitive","scene","causticsOnly","warn","894210hGGpbt","counter","2626596DwEjFU","Vector3","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","resolution","input","622pfwJBk","toString","worldRadius","1047SKvIaB"];return(jt=function(){return n})()}const Nt=nn({__name:Ot(394),props:{color:{default:Ot(437)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=W(),o=Sn(r[t(444)],{frames:1/0,resolution:e[t(421)],worldRadius:e.worldRadius});o.params.backside=!0;const i=gn(null);K(i,(n=>{n&&o[t(412)].add(n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o.update()})),ln((()=>{const n=t;e[n(431)]&&o[n(434)].color[n(427)](e.color),e.ior&&(o[n(434)][n(393)]=e[n(393)]),e.backsideIOR&&(o[n(434)][n(409)]=e[n(409)]),e[n(389)]&&(o.params[n(389)]=e[n(389)]),e[n(425)]&&(o[n(434)][n(425)]=e.worldRadius),e[n(436)]&&(o[n(434)][n(436)]=e[n(436)])})),K((()=>e[t(413)]),(n=>{const e=t;o.params[e(413)]=n})),K((()=>e[t(403)]),(n=>{const e=t;n&&o[e(434)][e(403)]instanceof D[e(418)]&&o[e(434)][e(403)][e(427)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return rn(),on(yn,null,[dn("TresGroup",{ref_key:r(392),ref:i},[an(n.$slots,"default")],512),dn(r(411),{object:Q(o)[r(392)],position:[0,.003,0]},null,8,Bt),dn(r(411),{object:Q(o).helper,visible:!1},null,8,Ut)],64)}}});function Lt(n){function t(n){const e=Ct;if(typeof n===e(399))return function(n){}[e(400)](e(438))[e(435)](e(416));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(395))[e(430)](e(440)):function(){return!1}[e(400)](e(396)+"gger")[e(435)](e(406)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Zt,r=Gt();for(;;)try{if(270642===parseInt(e(274))/1+parseInt(e(237))/2+-parseInt(e(283))/3*(-parseInt(e(259))/4)+parseInt(e(245))/5+-parseInt(e(265))/6*(-parseInt(e(248))/7)+parseInt(e(276))/8+parseInt(e(240))/9*(-parseInt(e(235))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(269)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["properties","2291778kRzvbb","debu","constructor",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","2085340JgvwJI","exception","console","234276hGVWxy","counter",'{}.constructor("return this")( )',"string","material","warn","replace","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","prototype","; i++) {\n        vogelSample = vogelDiskSample(j, ","function *\\( *\\)","28kxQBtx",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","trace","remove","__proto__","test","48gqJXpy","shadowmap_pars_fragment","isArray","traverse","apply","#ifdef USE_SHADOWMAP","input","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","12517irLrEE","length","2963480LXTSPn","log","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","init","error","bind","158385bFoxQB","call","action","table","dispose","toString","stateObject","compile","50MwIPMg","ShaderChunk","213046nEMJxW","return (function() "];return(Gt=function(){return n})()}function Zt(n,t){const e=Gt();return(Zt=function(n,t){return e[n-=228]})(n,t)}!function(){Ht(this,(function(){const n=Zt,t=new RegExp(n(258)),e=new RegExp(n(273),"i"),r=$t(n(280));t[n(264)](r+"chain")&&e.test(r+n(271))?$t():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(269)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wt(void 0,(function(){const n=Zt;let t;try{t=Function(n(238)+n(250)+");")()}catch(o){t=window}const e=t[n(247)]=t[n(247)]||{},r=[n(277),n(253),n(272),n(281),n(246),n(230),n(261)];for(let i=0;i<r[n(275)];i++){const t=Wt[n(242)][n(256)].bind(Wt),o=r[i],a=e[o]||t;t[n(263)]=Wt[n(282)](Wt),t[n(232)]=a[n(232)][n(282)](a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=z[r(266)];return z[r(266)]=z[r(266)][r(254)](r(270),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(260)+n+r(279)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(257)+e+r(244)+t+r(278)+e+r(243))[r(254)]("#if defined( SHADOWMAP_TYPE_PCF )",r(255)),(n,t,e)=>{D[r(236)].shadowmap_pars_fragment=o,function(n,t,e){const r=Zt;t[r(268)]((t=>{const e=r;t.material&&(Array[e(267)](t[e(252)])?t[e(252)].forEach((t=>{const r=e;n[r(239)].remove(t),t[r(231)]()})):(n[e(239)][e(262)](t[e(252)]),t[e(252)][e(231)]()))})),n[r(272)].programs.length=0,n[r(234)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Zt;if(typeof n===e(251))return function(n){}[e(242)]("while (true) {}").apply(e(249));1!==(""+n/n)[e(275)]||n%20==0?function(){return!0}.constructor(e(241)+"gger")[e(228)](e(229)):function(){return!1}[e(242)](e(241)+"gger").apply(e(233)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Jt;function Yt(){const n=["init","6398CWGxHv","counter","constructor","1337TkuuHI","8143600qiBJzt","442zzKety","bind","console","6039210iumUnx","33DjaJVF","error","exception","toString","traverse","while (true) {}",'{}.constructor("return this")( )',"test","244324PENmCw","chain","length","20814iDAAIX","value","50HyQpWe","5376624gSaJMd","301761dpGNvM","log","__proto__","apply","index","string","function *\\( *\\)","debu","gger","input"];return(Yt=function(){return n})()}!function(n,t){const e=Jt,r=Yt();for(;;)try{if(766833===-parseInt(e(251))/1*(parseInt(e(246))/2)+parseInt(e(255))/3*(parseInt(e(263))/4)+parseInt(e(254))/5+-parseInt(e(266))/6*(-parseInt(e(249))/7)+-parseInt(e(250))/8+parseInt(e(270))/9*(parseInt(e(268))/10)+parseInt(e(269))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=Jt,t=new RegExp(n(241)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ne(n(245));t[n(262)](r+n(264))&&e[n(262)](r+n(244))?ne():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(n,t){const e=Yt();return(Jt=function(n,t){return e[n-=240]})(n,t)}Kt(void 0,(function(){const n=Jt,t=function(){const n=Jt;let t;try{t=Function("return (function() "+n(261)+");")()}catch(e){t=window}return t}(),e=t[n(253)]=t[n(253)]||{},r=[n(271),"warn","info",n(256),n(257),"table","trace"];for(let o=0;o<r[n(265)];o++){const t=Kt[n(248)].prototype.bind(Kt),i=r[o],a=e[i]||t;t[n(272)]=Kt[n(252)](Kt),t[n(258)]=a[n(258)][n(252)](a),e[i]=t}}))();const Qt=nn({__name:qt(274),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(267)],o[t(267)],e[t(267)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(267)][t(259)]((n=>{n instanceof l&&n.material.dispose()})))};return a(t),K(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Jt;if(typeof n===e(240))return function(n){}[e(248)](e(260))[e(273)](e(247));1!==(""+n/n)[e(265)]||n%20==0?function(){return!0}.constructor(e(242)+e(243)).call("action"):function(){return!1}[e(248)](e(242)+e(243))[e(273)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=re;!function(n,t){const e=re,r=ie();for(;;)try{if(809843===parseInt(e(162))/1*(parseInt(e(161))/2)+parseInt(e(166))/3*(parseInt(e(194))/4)+-parseInt(e(191))/5*(parseInt(e(188))/6)+parseInt(e(170))/7*(-parseInt(e(187))/8)+-parseInt(e(186))/9+-parseInt(e(180))/10+parseInt(e(189))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(n,t){const e=ie();return(re=function(n,t){return e[n-=153]})(n,t)}!function(){ee(this,(function(){const n=re,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=se("init");t[n(203)](r+n(182))&&e[n(203)](r+"input")?se():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(193)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(){const n=["table","action","2083564DNZXLj","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","prototype","setResolution",'{}.constructor("return this")( )',"length","error","set","toString","colorspace_fragment","11819220eCWFQc","bind","chain","replace","uniforms","__proto__","11102454QAMSbO","8nowGXS","6GKMDDq","34778249dHdRVA",">\n        }","3241885nRwobG","copy","apply","1016172utiOYv","gger","constructor","encodings_fragment","value","setTexelSize","console","call","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","test","resolution","halfTexelSize","warn","log","return (function() ","debu","multiplyScalar","while (true) {}","22IiVdpP","45605ghbZhi","exception","kernel","toneMapped","6TzXrzT","counter"];return(ie=function(){return n})()}oe(void 0,(function(){const n=re,t=function(){const n=re;let t;try{t=Function(n(157)+n(174)+");")()}catch(e){t=window}return t}(),e=t[n(200)]=t[n(200)]||{},r=[n(156),n(155),"info",n(176),n(163),n(168),"trace"];for(let o=0;o<r[n(175)];o++){const t=oe[n(196)][n(172)][n(181)](oe),i=r[o],a=e[i]||t;t[n(185)]=oe[n(181)](oe),t[n(178)]=a[n(178)][n(181)](a),e[i]=t}}))();const ae=parseInt(F[te(183)](/\D+/g,""));class ce extends P{constructor(n=new C){const t=te;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(202)+t(ae>=154?179:197)+t(190),vertexShader:t(171),blending:k,depthWrite:!1,depthTest:!1}),this[t(165)]=!1,this[t(199)](n.x,n.y),this[t(164)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=te;this[e(184)].texelSize[e(198)][e(177)](n,t),this.uniforms[e(154)][e(198)][e(177)](n,t)[e(159)](.5)}[te(173)](n){const t=te;this[t(184)][t(153)][t(198)][t(192)](n)}}function se(n){function t(n){const e=re;if("string"==typeof n)return function(n){}[e(196)](e(160))[e(193)](e(167));1!==(""+n/n)[e(175)]||n%20==0?function(){return!0}[e(196)](e(158)+"gger")[e(201)](e(169)):function(){return!1}[e(196)](e(158)+e(195))[e(193)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=le,r=fe();for(;;)try{if(637418===parseInt(e(477))/1*(-parseInt(e(440))/2)+parseInt(e(489))/3*(parseInt(e(488))/4)+parseInt(e(480))/5*(-parseInt(e(426))/6)+parseInt(e(459))/7*(-parseInt(e(484))/8)+parseInt(e(427))/9*(parseInt(e(453))/10)+-parseInt(e(485))/11*(-parseInt(e(461))/12)+parseInt(e(469))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(435)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=fe();return(le=function(n,t){return e[n-=426]})(n,t)}function fe(){const n=["gger","debu","test","length","depthTexture","257kapuQE","screen",'{}.constructor("return this")( )',"1015nVkxGS","depthToBlurRatioBias","constructor","uniforms","9736Zhtqbk","55jushLV","chain","stateObject","67272sdqcPg","63jvpNmH","32826AXJaZO","5068773TMRDwL","setTexelSize","call","console","defines","USE_DEPTH","renderTargetB","value","apply","convolutionMaterial","log","depthBuffer","exception","9258zwcaCH","table","action","toString","counter","while (true) {}","info","string","setResolution","texture","renderToScreen","function *\\( *\\)","return (function() ","20rWWrEF","bind","setAttribute","trace","error","__proto__","2331fBlyJM","init","1957332HrMnYV","scene","clone","depthScale","render","add","renderTargetA","position","13621634UzCXYT","setRenderTarget","kernel"];return(fe=function(){return n})()}!function(){ue(this,(function(){const n=le,t=new RegExp(n(451)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=he(n(460));t[n(474)](r+n(486))&&e[n(474)](r+"input")?he():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(435)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();pe(void 0,(function(){const n=le;let t;try{t=Function(n(452)+n(479)+");")()}catch(o){t=window}const e=t[n(430)]=t[n(430)]||{},r=[n(437),"warn",n(446),n(457),n(439),n(441),n(456)];for(let i=0;i<r.length;i++){const t=pe.constructor.prototype[n(454)](pe),o=r[i],a=e[o]||t;t[n(458)]=pe[n(454)](pe),t[n(443)]=a.toString[n(454)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this.renderToScreen=!1,this[c(467)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(433)]=this[c(467)][c(463)](),this[c(436)]=new ce,this.convolutionMaterial[c(428)](1/t,1/e),this.convolutionMaterial[c(448)](new C(t,e)),this[c(462)]=new u,this.camera=new B,this[c(436)][c(483)].minDepthThreshold[c(434)]=r,this[c(436)].uniforms.maxDepthThreshold[c(434)]=o,this[c(436)].uniforms[c(464)][c(434)]=i,this.convolutionMaterial.uniforms[c(481)][c(434)]=a,this[c(436)][c(431)][c(432)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new U;p.setAttribute(c(468),new j(s,3)),p[c(455)]("uv",new j(f,2)),this[c(478)]=new l(p,this[c(436)]),this.screen.frustumCulled=!1,this.scene[c(466)](this[c(478)])}render(n,t,e){const r=le,o=this.scene,i=this.camera,a=this[r(467)],c=this[r(433)],s=this[r(436)],u=s.uniforms;u[r(438)][r(434)]=t[r(476)];const l=s[r(471)];let f,p,d,h=t;for(p=0,d=l[r(475)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(471)][r(434)]=l[p],u.inputBuffer[r(434)]=h[r(449)],n[r(470)](f),n[r(465)](o,i),h=f;u[r(471)][r(434)]=l[p],u.inputBuffer[r(434)]=h[r(449)],n[r(470)](this[r(450)]?null:e),n[r(465)](o,i)}}function he(n){function t(n){const e=le;if(typeof n===e(447))return function(n){}[e(482)](e(445))[e(435)](e(444));1!==(""+n/n)[e(475)]||n%20==0?function(){return!0}.constructor("debu"+e(472))[e(429)](e(442)):function(){return!1}.constructor(e(473)+"gger")[e(435)](e(487)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=xe;function me(){var n=["_distortionMap","USE_UV","minDepthThreshold","log","1139828hjQxVJ","textureMatrix","_tDiffuse","trace","replace","_depthScale","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","depthScale","__proto__","6636063HwRnBq","hasBlur","apply","mixBlur","_tDiffuseBlur","counter","stateObject","_tDepth","_minDepthThreshold","_mirror","_textureMatrix","tDiffuseBlur","while (true) {}","distortionMap","string","_hasBlur","8051675gDYuQx","2jGokUu","vertexShader","tDiffuse","#include <project_vertex>","mixContrast","10308912nlGTFZ","error","defines","_mixContrast","setValues","depthToBlurRatioBias","console",'{}.constructor("return this")( )',"#include <emissivemap_fragment>","info","value","6343728rGTclW","constructor","940CgRStT","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","_maxDepthThreshold","fragmentShader","chain","action","bind","init","debu","mixStrength","tDepth","uniforms","mirror","return (function() ","_distortion","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","length","187362GpzYBV","6MBukmA","call","onBeforeCompile","toString","maxDepthThreshold","1533834rNcxwi","_depthToBlurRatioBias","distortion","_blurStrength","gger","test"];return(me=function(){return n})()}!function(n,t){for(var e=xe,r=me();;)try{if(932684===parseInt(e(198))/1*(parseInt(e(224))/2)+-parseInt(e(188))/3+-parseInt(e(240))/4+parseInt(e(223))/5*(parseInt(e(183))/6)+parseInt(e(207))/7+parseInt(e(229))/8+parseInt(e(182))/9*(-parseInt(e(242))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=xe,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ie(n(249));t[n(193)](r+n(246))&&e.test(r+"input")?Ie():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){for(var n=xe,t=function(){var n,t=xe;try{n=Function(t(255)+t(236)+");")()}catch(e){n=window}return n}(),e=t[n(235)]=t[n(235)]||{},r=[n(197),"warn",n(238),n(230),"exception","table",n(201)],o=0;o<r[n(181)];o++){var i=_e[n(241)].prototype[n(248)](_e),a=r[o],c=e[a]||i;i[n(206)]=_e[n(248)](_e),i[n(186)]=c[n(186)][n(248)](c),e[a]=i}}))();class ye extends N{constructor(n={}){var t=xe;super(n),this[t(214)]={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this[t(211)]={value:null},this._textureMatrix={value:null},this[t(222)]={value:!1},this[t(216)]={value:0},this._mixBlur={value:0},this[t(191)]={value:.5},this._minDepthThreshold={value:.9},this[t(244)]={value:1},this[t(203)]={value:0},this[t(189)]={value:.25},this._distortion={value:1},this._mixContrast={value:1},this[t(233)](n)}[ve(185)](n){var t,e=ve;!(null==(t=n.defines)?void 0:t.USE_UV)&&(n[e(231)][e(195)]=""),n[e(253)][e(208)]=this[e(222)],n[e(253)].tDiffuse=this[e(200)],n[e(253)].tDepth=this._tDepth,n[e(253)][e(220)]=this[e(194)],n[e(253)].tDiffuseBlur=this[e(211)],n[e(253)][e(199)]=this[e(217)],n[e(253)][e(254)]=this._mirror,n[e(253)][e(210)]=this._mixBlur,n.uniforms.mixStrength=this._blurStrength,n[e(253)][e(196)]=this[e(215)],n[e(253)].maxDepthThreshold=this._maxDepthThreshold,n[e(253)].depthScale=this._depthScale,n[e(253)][e(234)]=this[e(189)],n[e(253)][e(190)]=this[e(256)],n[e(253)].mixContrast=this._mixContrast,n.vertexShader=e(204)+n[e(225)],n[e(225)]=n[e(225)].replace(e(227),e(257)),n[e(245)]=e(243)+n[e(245)],n[e(245)]=n.fragmentShader[e(202)](e(237),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[ve(226)](){var n=ve;return this[n(200)][n(239)]}set[ve(226)](n){var t=ve;this[t(200)][t(239)]=n}get[ve(252)](){return this._tDepth.value}set tDepth(n){var t=ve;this[t(214)][t(239)]=n}get[ve(220)](){var n=ve;return this._distortionMap[n(239)]}set[ve(220)](n){var t=ve;this[t(194)][t(239)]=n}get[ve(218)](){var n=ve;return this[n(211)][n(239)]}set[ve(218)](n){var t=ve;this[t(211)][t(239)]=n}get[ve(199)](){var n=ve;return this[n(217)][n(239)]}set[ve(199)](n){var t=ve;this[t(217)][t(239)]=n}get[ve(208)](){var n=ve;return this[n(222)][n(239)]}set[ve(208)](n){var t=ve;this[t(222)][t(239)]=n}get[ve(254)](){var n=ve;return this[n(216)][n(239)]}set[ve(254)](n){var t=ve;this[t(216)][t(239)]=n}get[ve(210)](){var n=ve;return this._mixBlur[n(239)]}set[ve(210)](n){var t=ve;this._mixBlur[t(239)]=n}get[ve(251)](){var n=ve;return this[n(191)][n(239)]}set[ve(251)](n){var t=ve;this[t(191)][t(239)]=n}get minDepthThreshold(){var n=ve;return this._minDepthThreshold[n(239)]}set[ve(196)](n){var t=ve;this._minDepthThreshold[t(239)]=n}get[ve(187)](){var n=ve;return this[n(244)][n(239)]}set[ve(187)](n){var t=ve;this[t(244)][t(239)]=n}get[ve(205)](){return this[ve(203)].value}set depthScale(n){var t=ve;this[t(203)][t(239)]=n}get[ve(234)](){return this[ve(189)].value}set[ve(234)](n){var t=ve;this[t(189)][t(239)]=n}get[ve(190)](){var n=ve;return this[n(256)][n(239)]}set[ve(190)](n){this[ve(256)].value=n}get[ve(228)](){var n=ve;return this[n(232)][n(239)]}set[ve(228)](n){var t=ve;this[t(232)][t(239)]=n}}function xe(n,t){var e=me();return(xe=function(n,t){return e[n-=181]})(n,t)}function Ie(n){function t(n){var e=xe;if(typeof n===e(221))return function(n){}[e(241)](e(219)).apply(e(212));1!==(""+n/n)[e(181)]||n%20==0?function(){return!0}[e(241)]("debu"+e(192))[e(184)](e(247)):function(){return!1}.constructor(e(250)+e(192))[e(209)](e(213)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const be=Me;!function(n,t){const e=Me,r=Re();for(;;)try{if(983447===parseInt(e(176))/1*(parseInt(e(137))/2)+-parseInt(e(160))/3*(-parseInt(e(184))/4)+parseInt(e(211))/5*(parseInt(e(163))/6)+-parseInt(e(209))/7+parseInt(e(149))/8+parseInt(e(156))/9+parseInt(e(165))/10*(-parseInt(e(119))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(152)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Me,t=new RegExp(n(139)),e=new RegExp(n(179),"i"),r=Te(n(140));t[n(210)](r+n(142))&&e[n(210)](r+n(186))?Te():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Me(n,t){const e=Re();return(Me=function(n,t){return e[n-=114]})(n,t)}Se(void 0,(function(){const n=Me,t=function(){const n=Me;let t;try{t=Function(n(191)+n(121)+");")()}catch(e){t=window}return t}(),e=t[n(185)]=t[n(185)]||{},r=[n(207),n(136),"info","error","exception",n(123),"trace"];for(let o=0;o<r[n(153)];o++){const t=Se[n(138)][n(134)].bind(Se),i=r[o],a=e[i]||t;t[n(189)]=Se[n(122)](Se),t[n(158)]=a[n(158)][n(122)](a),e[i]=t}}))();const Ee=[be(132),be(159),be(157),be(124),"t-diffuse-blur",be(116),be(174),be(213),be(190),"depth-scale",be(173),be(198),be(172),"mix-contrast",be(145),be(155),be(196)];function Re(){const n=["assign","log","extractRotation","7520310OSUziv","test","5knEAqa","value","min-depth-threshold","material","normal","has-blur","traverse","visible","16103912ToIMSx","rotationMatrix",'{}.constructor("return this")( )',"bind","table","t-depth","while (true) {}","autoUpdate","updateMatrixWorld","multiplyScalar","dot","constant","subVectors","texture-matrix","enabled","prototype","textureMatrix","warn","2llYMIr","constructor","function *\\( *\\)","init","reflect","chain","reflectorPlane","dispose","defines-USE_BLUR","depthTexture","target","reflectorOffset","8808624KRtTNA","set","gger","apply","length","uuid","defines-USE_DEPTH","13392495XuppeE","t-diffuse","toString","mirror","21552zNMHRH","projectionMatrix","lookAt","6045906ZpTDXz","position","20XEUTUa","texture","sign","setFromNormalAndCoplanarPoint","lookAtPosition","shadowMap","setFromMatrixPosition","distortionMap","depth-to-blur-ratio-bias","mix-strength","stateObject","1238113zSstxf","cameraWorldPosition","clipPlane","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","negate","index","copy","reflectorWorldPosition","84cDKWgr","console","input","multiply","setRenderTarget","__proto__","max-depth-threshold","return (function() ","applyMatrix4","clear","key","view","defines-USE_DISTORTION","isMesh","distortion","virtualCamera","debu","elements","add","matrixWorld","materialRef","render"];return(Re=function(){return n})()}const Ae=nn({__name:be(181),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:E,extend:R}=W();R({MeshReflectorMaterial:ye});const T=gn(),D=gn(),z=gn(),P=gn(),O=J((()=>{const n=Me;return"number"==typeof f[n(212)]?[f[n(212)],f[n(212)]]:f[n(212)]})),C=J((()=>O[r(212)][0]>0||O[r(212)][1]>0)),k={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new G,view:new A,target:new A,q:new G,virtualCamera:new Z,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T[o(212)])||n[o(166)][o(144)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(212)]=new I(i[o(212)],i[o(212)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i[o(212)],S,M)},t(y,e(x)))),D[o(212)]=new I(i[o(212)],i[o(212)],f),z[o(212)]=new de({resolution:i[o(212)],width:O[o(212)][0],height:O[o(212)][1],minDepthThreshold:a[o(212)],maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l[o(212)]}),P.value={mirror:p,textureMatrix:k[o(135)],mixBlur:d,tDiffuse:T[o(212)][o(166)],tDepth:T[o(212)].depthTexture,tDiffuseBlur:T[o(212)][o(166)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(212)],mixContrast:_,"defines-USE_BLUR":C[o(212)]?"":void 0,"defines-USE_DEPTH":u[o(212)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const F=gn(),{onLoop:B}=$();B((()=>{var n;const t=r;if(!(F.value&&E[t(212)]&&T.value&&y[t(212)]))return;const e=function(n,t){const e=Me;let r;return n[e(117)]((n=>{const o=e;n[o(197)]&&n.material&&n[o(114)].uuid===t&&(r=n)})),r}(x[t(212)],F[t(212)][t(154)]);if(!e)return;e[t(118)]=!1;const i=E.value.xr.enabled,a=E[t(212)][t(170)][t(126)];(function(n){var t,e;const r=Me;if(k[r(183)][r(171)](n[r(203)]),k.cameraWorldPosition[r(171)](null==(t=y[r(212)])?void 0:t[r(203)]),k.rotationMatrix[r(208)](n[r(203)]),k.normal[r(150)](0,0,1),k[r(115)][r(192)](k[r(120)]),k[r(183)].addScaledVector(k[r(115)],o[r(148)]),k[r(195)][r(131)](k[r(183)],k[r(177)]),k.view[r(129)](k[r(115)])>0)return;k[r(195)][r(141)](k[r(115)])[r(180)](),k[r(195)].add(k[r(183)]),k[r(120)][r(208)](null==(e=y.value)?void 0:e[r(203)]),k.lookAtPosition.set(0,0,-1),k[r(169)].applyMatrix4(k[r(120)]),k[r(169)].add(k[r(177)]),k.target.subVectors(k[r(183)],k[r(169)]),k[r(147)][r(141)](k[r(115)])[r(180)](),k[r(147)][r(202)](k.reflectorWorldPosition),k[r(199)][r(164)][r(182)](k[r(195)]),k[r(199)].up[r(150)](0,1,0),k[r(199)].up[r(192)](k[r(120)]),k[r(199)].up[r(141)](k[r(115)]),k[r(199)][r(162)](k.target),k[r(199)].far=(null==y?void 0:y[r(212)]).far,k[r(199)][r(127)](),k.virtualCamera[r(161)].copy((null==y?void 0:y[r(212)])[r(161)]),k.textureMatrix[r(150)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k[r(135)][r(187)](k[r(199)][r(161)]),k.textureMatrix[r(187)](k[r(199)].matrixWorldInverse),k[r(135)].multiply(n.matrixWorld),k[r(143)][r(168)](k[r(115)],k[r(183)]),k[r(143)].applyMatrix4(k[r(199)].matrixWorldInverse),k[r(178)].set(k[r(143)].normal.x,k[r(143)].normal.y,k.reflectorPlane.normal.z,k[r(143)][r(130)]);const i=k[r(199)].projectionMatrix;k.q.x=(Math[r(167)](k.clipPlane.x)+i.elements[8])/i[r(201)][0],k.q.y=(Math.sign(k[r(178)].y)+i[r(201)][9])/i[r(201)][5],k.q.z=-1,k.q.w=(1+i.elements[10])/i[r(201)][14],k.clipPlane[r(128)](2/k[r(178)][r(129)](k.q)),i[r(201)][2]=k.clipPlane.x,i[r(201)][6]=k[r(178)].y,i[r(201)][10]=k[r(178)].z+1,i[r(201)][14]=k[r(178)].w})(e),E.value[t(170)].autoUpdate=!1,E[t(212)][t(188)](T[t(212)]),E[t(212)].autoClear||E[t(212)][t(193)](),E[t(212)][t(205)](x[t(212)],k[t(199)]),null==(n=null==z?void 0:z.value)||n.render(E[t(212)],T[t(212)],D[t(212)]),E.value.xr[t(133)]=i,E[t(212)].shadowMap[t(126)]=a,e[t(118)]=!0,E[t(212)][t(188)](null)}));const U=xn(),j=J((()=>{const n={};return Object[r(206)](n,o),Object.assign(n,U.value),n}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(212)])||n[e(144)](),null==(t=null==D?void 0:D[e(212)])||t[e(144)]()})),(n,t)=>{var e,o,i;const c=r;return rn(),on("TresMeshReflectorMaterial",In({key:c(194)+P[c(212)][c(145)]+P.value["defines-USE_DEPTH"]+P[c(212)][c(196)],ref_key:c(204),ref:F},j[c(212)],{"texture-matrix":k[c(135)],mirror:Q(p),"t-diffuse":null==(e=T[c(212)])?void 0:e[c(166)],"t-depth":null==(o=T[c(212)])?void 0:o[c(146)],"t-diffuse-blur":null==(i=D[c(212)])?void 0:i.texture,"has-blur":C[c(212)],"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":C[c(212)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Ee)}}});function Te(n){function t(n){const e=Me;if("string"==typeof n)return function(n){}.constructor(e(125))[e(152)]("counter");1!==(""+n/n)[e(153)]||n%20==0?function(){return!0}.constructor(e(200)+e(151)).call("action"):function(){return!1}[e(138)](e(200)+e(151))[e(152)](e(175)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Oe,r=Pe();for(;;)try{if(351177===-parseInt(e(239))/1+parseInt(e(247))/2+-parseInt(e(212))/3*(parseInt(e(223))/4)+parseInt(e(222))/5*(-parseInt(e(225))/6)+-parseInt(e(209))/7*(parseInt(e(226))/8)+-parseInt(e(217))/9+parseInt(e(218))/10*(parseInt(e(211))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(236),"i"),r=Ce(n(224));t[n(243)](r+"chain")&&e[n(243)](r+"input")?Ce():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["while (true) {}","1213182zIcuFT","fog",'{}.constructor("return this")( )',"error","112546CNlIWU","bind","86856gJayzT","21UDkCBl","warn","type","exception","dispose","1357605TdaBDn","590DKlWZx","string","length","counter","1795YDVbZQ","58324YEEMwG","init","6690IwznUu","8xKSsZP","apply","texture","console","table","log","return (function() ","info","background","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","CubeCamera","52003bnvDYg","value","toString","prototype","test","debu","trace"];return(Pe=function(){return n})()}function Oe(n,t){const e=Pe();return(Oe=function(n,t){return e[n-=208]})(n,t)}function Ce(n){function t(n){const e=Oe;if(typeof n===e(219))return function(n){}[e(237)](e(246)).apply(e(221));1!==(""+n/n)[e(220)]||n%20==0?function(){return!0}.constructor(e(244)+e(235)).call("action"):function(){return!1}[e(237)](e(244)+e(235))[e(227)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Oe;let t;try{t=Function(n(232)+n(249)+");")()}catch(o){t=window}const e=t.console=t[n(229)]||{},r=[n(231),n(213),n(233),n(208),n(215),n(230),n(245)];for(let i=0;i<r[n(220)];i++){const t=ze[n(237)][n(242)][n(210)](ze),o=r[i],a=e[o]||t;t.__proto__=ze[n(210)](ze),t.toString=a[n(241)][n(210)](a),e[o]=t}}))();const ke=Ne;!function(n,t){const e=Ne,r=Be();for(;;)try{if(231927===-parseInt(e(249))/1+-parseInt(e(227))/2*(-parseInt(e(243))/3)+parseInt(e(215))/4*(-parseInt(e(236))/5)+-parseInt(e(205))/6+parseInt(e(222))/7+parseInt(e(248))/8+-parseInt(e(251))/9*(-parseInt(e(217))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(){const n=["69304FkUUlP","427200gbpixI","index","9YOoTfD","value","2544090iTAKnR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","stateObject","log","function *\\( *\\)","default","visible","chain","while (true) {}","52LhujUu","info","6680990brqAXA","__proto__","length","primitive","console","2763628gnjfPB","input","fog","resolution","init","1312zxILIw","debu","constructor","frames","exception","toString","counter","apply","prototype","153240FKrIqk","texture","$slots","gger","TresGroup","warn",'{}.constructor("return this")( )',"1875SSycOq","near","bind","error","rgRef"];return(Be=function(){return n})()}!function(){Fe(this,(function(){const n=Ne,t=new RegExp(n(210)),e=new RegExp(n(206),"i"),r=He(n(226));t.test(r+n(213))&&e.test(r+n(223))?He():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(234)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ue(void 0,(function(){const n=Ne,t=function(){const n=Ne;let t;try{t=Function("return (function() "+n(242)+");")()}catch(e){t=window}return t}(),e=t[n(221)]=t[n(221)]||{},r=[n(209),n(241),n(216),n(246),n(231),n(207),"trace"];for(let o=0;o<r[n(219)];o++){const t=Ue[n(229)][n(235)][n(245)](Ue),i=r[o],a=e[i]||t;t[n(218)]=Ue[n(245)](Ue),t[n(232)]=a[n(232)][n(245)](a),e[i]=t}}))();const je=["object"];function Ne(n,t){const e=Be();return(Ne=function(n,t){return e[n-=204]})(n,t)}const Le=nn({__name:ke(250),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return K((()=>s),(n=>{var t;const e=Oe;null==(t=c[e(240)])||t[e(216)](),c.value=new v(n[e(240)]),c[e(240)][e(228)][e(214)]=h}),{immediate:!0}),K([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(240)]=new(D[r(238)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;null==(n=c[Oe(240)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a.value[t(248)],d=a.value[t(234)],a[t(240)][t(234)]=r||d,a[t(240)][t(248)]=o||p,null==(n=f[t(240)])||n.update(i.value,a[t(240)]),a[t(240)][t(248)]=p,a[t(240)][t(234)]=d}}}({resolution:o[r(225)],near:o[r(244)],far:o.far,envMap:o.envMap,fog:o[r(224)]}),{onBeforeLoop:s}=$();let u=0;const l=X(null);return s((()=>{const n=r;l[n(204)]&&(o[n(230)]===1/0||u<o[n(230)])&&(l[n(204)].visible=!1,c(),l[n(204)][n(212)]=!0,u++)})),t({texture:null==(e=i[r(204)])?void 0:e[r(237)]}),(n,t)=>{const e=r;return rn(),on("TresGroup",null,[dn(e(220),{object:Q(a)},null,8,je),dn(e(240),{ref_key:e(247),ref:l},[an(n[e(238)],e(211))],512)])}}});function He(n){function t(n){const e=Ne;if("string"==typeof n)return function(n){}[e(229)](e(214))[e(234)](e(233));1!==(""+n/n)[e(219)]||n%20==0?function(){return!0}.constructor(e(228)+e(239)).call("action"):function(){return!1}[e(229)](e(228)+e(239))[e(234)](e(208)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=Ve();for(;;)try{if(220396===parseInt(e(174))/1*(parseInt(e(175))/2)+-parseInt(e(170))/3*(parseInt(e(197))/4)+-parseInt(e(185))/5+parseInt(e(165))/6*(-parseInt(e(187))/7)+-parseInt(e(161))/8+parseInt(e(164))/9*(parseInt(e(159))/10)+parseInt(e(181))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(157)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=We,t=new RegExp(n(179)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qe(n(183));t[n(166)](r+n(180))&&e.test(r+n(198))?qe():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(157)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=Ve();return(We=function(n,t){return e[n-=156]})(n,t)}function Ve(){const n=["call","debu","uniforms","while (true) {}","forEach","table","prototype","value","bind","125372GGnLIO","input","length","gger","apply","console","10tUthPf","string","1928232XRcbIw","stateObject","entries","1974636OUaHju","6jTsvnE","test","constructor","clone","toString","33ZjVuMc","MathUtils","return (function() ","action","1hBRVqr","322898GtRoQr","trace","defineProperty","info","function *\\( *\\)","chain","9009583YuIJdm","UniformsUtils","init","key","1744925uXjGLl","counter","313061OfHLQh"];return(Ve=function(){return n})()}function $e(n,t,e,r){const o=We,i=class extends P{constructor(o={}){const i=We,a=Object[i(163)](n);super({uniforms:a.reduce(((n,[t,e])=>{const r=i,o=D[r(182)][r(168)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[i(184)]="",a[i(192)]((([n])=>Object[i(177)](this,n,{get:()=>this[i(190)][n][i(195)],set:t=>this[i(190)][n][i(195)]=t}))),Object.assign(this,o),r&&r(this)}};return i.key=D[o(171)].generateUUID(),i}function qe(n){function t(n){const e=We;if(typeof n===e(160))return function(n){}[e(167)](e(191))[e(157)](e(186));1!==(""+n/n)[e(199)]||n%20==0?function(){return!0}.constructor(e(189)+e(156))[e(188)](e(173)):function(){return!1}[e(167)](e(189)+"gger").apply(e(162)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ye(n,t){var e=Ke();return(Ye=function(n,t){return e[n-=381]})(n,t)}Ze(void 0,(function(){const n=We,t=function(){const n=We;let t;try{t=Function(n(172)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(158)]=t.console||{},r=["log","warn",n(178),"error","exception",n(193),n(176)];for(let o=0;o<r[n(199)];o++){const t=Ze[n(167)][n(194)][n(196)](Ze),i=r[o],a=e[i]||t;t.__proto__=Ze[n(196)](Ze),t[n(169)]=a.toString[n(196)](a),e[i]=t}}))();var Xe=Ye;function Ke(){var n=["iterator","table","generateUUID"," );\n    ",". Shader cannot compile.","done",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","needsUpdate","3390EryGHA","\n    gl_FragColor = ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","error","name","depthAlpha","MathUtils","split","Arguments","54171Hivpog","\\$&","void main() {","clearcoatNormal","type",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","roughness","\n    \n","\n    \n            ","csm_Bump","construct","clearcoatRoughness","metalness","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","sham","\n            \n            void main() {\n          ","is not a constructor",";\n  ","clone","toString","get","return (function() ","string","defineProperty","keys","defineProperties","slice","substring","object","replace","getPrototypeOf","console","configurable","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","includes","assign","customProgramCacheKey","cacheHash","MeshLambertMaterial","MeshPhongMaterial","gger","entries","void ","Cannot call a class as a function","12888tmfNYp","function","warn","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","update","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","lastIndexOf","_generateMaterial","diffuse","trim"," is not available in ","MeshNormalMaterial","csm_FragColor","length","__csm","_getMaterialDefine","MeshStandardMaterial","undefined","\n    vec3 transformed = ","MeshDepthMaterial","csm_Roughness","positionRaw","csm_AO","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","2766456XMSqcu","Super expression must either be null or a function","from","Derived constructors may only return object or undefined","// #_CSM_#","Material","csm_Emissive","Map","silent","\n            ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","emissive","position","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","next","getOwnPropertySymbols","lights_physical_fragment","Set","\n    #include <color_fragment>\n    diffuseColor = ","test","cacheKey","3930078bJdNci","material.clearcoat = ",'" is required to use output "',"set","Object",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","CSM: ","#define IS_UNKNOWN;\n","push","normal","propertyIsEnumerable","642161bqWHTj","\n    varying mat4 csm_internal_vModelViewMatrix;\n","csm_Clearcoat","baseMaterial","\n    vec4 csm_internal_positionUnprojected = ","valueOf","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","clearcoat","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","5140AegQLG","function *\\( *\\)","3879VZICFy","setPrototypeOf","_getCacheHash","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","@@iterator","message","call","csm_ClearcoatNormal","constructor","isArray","find","toPrimitive","();\n              // #_CSM_#\n          ","pointSize","csm_PointSize","#define IS_VERTEX;\n","isAlreadyExtended",'{}.constructor("return this")( )',"patchMap",", 1.0 );\n  ","counter","while (true) {}","ShaderChunk","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","_patchShader","trace","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","material.clearcoatRoughness = ","\n    vec3 totalEmissiveRadiance = ","23567030BXVqSo","fragColor","prototype","exception","vertexShader","csm_DepthAlpha","concat","_getPatchMapForMaterial","bump","value","onBeforeCompile","enumerable","MeshBasicMaterial","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","MeshPhysicalMaterial","debu","66OKCaEu","fragmentShader","apply","chain","default","log","indexOf","uniforms","getOwnPropertyDescriptors","@@toPrimitive must return a primitive value.","create","symbol",";\n    ","csm_Metalness","forEach","\n    vec3 objectNormal = ","instanceID","csm_PositionRaw","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ",'CSM: Property "',"filter"];return(Ke=function(){return n})()}!function(n,t){for(var e=Ye,r=Ke();;)try{if(577607===parseInt(e(521))/1+-parseInt(e(578))/2*(parseInt(e(418))/3)+-parseInt(e(531))/4*(parseInt(e(409))/5)+-parseInt(e(510))/6+parseInt(e(488))/7+-parseInt(e(464))/8*(parseInt(e(533))/9)+parseInt(e(562))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Je(this,(function(){var n=Ye,t=new RegExp(n(532)),e=new RegExp(n(451),"i"),r=Or("init");t[n(508)](r+n(383))&&e[n(508)](r+"input")?Or():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ye(382)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=Ye,e=function(n,t){var e=Ye;if(typeof n!==e(446)||null===n)return n;var r=n[Symbol[e(544)]];if(void 0!==r){var o=r[e(539)](n,t||e(384));if(typeof o!==e(446))return o;throw new TypeError(e(389))}return(t===e(440)?String:Number)(n)}(n,"string");return typeof e===t(391)?e:String(e)}function tr(n,t,e){var r=Ye;return(t=nr(t))in n?Object[r(441)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=Ye,r=Object[e(442)](n);if(Object[e(504)]){var o=Object[e(504)](n);t&&(o=o[e(400)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(573)]}))),r[e(518)][e(382)](r,o)}return r}function rr(n){for(var t=Ye,e=1;e<arguments[t(477)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(394)]((function(t){tr(n,t,r[t])})):Object[t(388)]?Object[t(443)](n,Object[t(388)](r)):er(Object(r)).forEach((function(e){Object[t(441)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function or(n,t){var e=Ye;if(null==n)return{};var r,o,i=function(n,t){var e=Ye;if(null==n)return{};var r,o,i={},a=Object[e(442)](n);for(o=0;o<a[e(477)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(504)]){var a=Object[e(504)](n);for(o=0;o<a[e(477)];o++)r=a[o],t.indexOf(r)>=0||Object[e(564)][e(520)][e(539)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=Ye;(null==t||t>n[e(477)])&&(t=n[e(477)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array[Ye(542)](n))return n}(n)||function(n,t){var e=Ye,r=null==n?null:e(481)!=typeof Symbol&&n[Symbol[e(401)]]||n[e(537)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(539)](n))[e(503)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(539)](r))[e(406)])&&(s[e(518)](o[e(571)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Ye;if(n){if(typeof n===e(440))return ir(n,t);var r=Object[e(564)].toString[e(539)](n)[e(444)](8,-1);return r===e(514)&&n[e(541)]&&(r=n[e(541)][e(413)]),r===e(495)||r===e(506)?Array[e(490)](n):r===e(417)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(508)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(Ye(536))}()}function cr(n,t){for(var e=Ye,r=0;r<t[e(477)];r++){var o=t[r];o[e(573)]=o[e(573)]||!1,o[e(450)]=!0,"value"in o&&(o.writable=!0),Object[e(441)](n,nr(o.key),o)}}function sr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ur(n,t){var e=Ye;return(ur=Object.setPrototypeOf?Object[e(534)][e(452)]():function(n,t){return n.__proto__=t,n})(n,t)}function lr(n){var t=Ye;return(lr=Object.setPrototypeOf?Object[t(448)][t(452)]():function(n){var e=t;return n.__proto__||Object[e(448)](n)})(n)}function fr(n){var t=function(){var n=Ye;if(typeof Reflect===n(481)||!Reflect.construct)return!1;if(Reflect.construct[n(432)])return!1;if(typeof Proxy===n(465))return!0;try{return Boolean[n(564)][n(526)].call(Reflect[n(428)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Ye,o=lr(n);if(t){var i=lr(this)[r(541)];e=Reflect[r(428)](o,arguments,i)}else e=o[r(382)](this,arguments);return function(n,t){var e=Ye;if(t&&(typeof t===e(446)||typeof t===e(465)))return t;if(void 0!==t)throw new TypeError(e(491));return sr(n)}(this,e)}}Qe(void 0,(function(){for(var n=Ye,t=function(){var n,t=Ye;try{n=Function(t(439)+t(550)+");")()}catch(e){n=window}return n}(),e=t[n(449)]=t[n(449)]||{},r=[n(385),n(466),"info",n(412),n(565),n(402),n(558)],o=0;o<r[n(477)];o++){var i=Qe.constructor[n(564)].bind(Qe),a=r[o],c=e[a]||i;i.__proto__=Qe.bind(Qe),i[n(437)]=c[n(437)].bind(c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:"csm_DiffuseColor",normal:"csm_Normal",roughness:Xe(484),metalness:Xe(393),emissive:Xe(494),ao:Xe(486),bump:Xe(427),clearcoat:Xe(523),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Xe(540),pointSize:Xe(547),fragColor:Xe(476),depthAlpha:Xe(567),position:"csm_Position",positionRaw:Xe(397)},mr=(tr(pr={},""[Xe(568)](vr[Xe(500)]),"*"),tr(pr,""[Xe(568)](vr[Xe(485)]),"*"),tr(pr,"".concat(vr[Xe(519)]),"*"),tr(pr,""[Xe(568)](vr[Xe(546)]),["PointsMaterial"]),tr(pr,"".concat(vr.diffuse),"*"),tr(pr,"".concat(vr.fragColor),"*"),tr(pr,"".concat(vr[Xe(499)]),[Xe(480),Xe(576)]),tr(pr,"".concat(vr[Xe(424)]),[Xe(480),Xe(576)]),tr(pr,""[Xe(568)](vr[Xe(430)]),[Xe(480),"MeshPhysicalMaterial"]),tr(pr,""[Xe(568)](vr.ao),[Xe(480),"MeshPhysicalMaterial",Xe(574),Xe(458),"MeshPhongMaterial","MeshToonMaterial"]),tr(pr,""[Xe(568)](vr[Xe(570)]),[Xe(458),"MeshMatcapMaterial",Xe(475),Xe(459),Xe(576),Xe(480),"MeshToonMaterial","ShadowMaterial"]),tr(pr,""[Xe(568)](vr[Xe(414)]),[Xe(483)]),tr(pr,""[Xe(568)](vr.clearcoat),[Xe(576)]),tr(pr,"".concat(vr[Xe(429)]),["MeshPhysicalMaterial"]),tr(pr,""[Xe(568)](vr.clearcoatNormal),[Xe(576)]),pr),gr={"#include <lights_physical_fragment>":D[Xe(555)][Xe(505)]},_r=(tr(dr={},"".concat(vr.normal),{"#include <beginnormal_vertex>":Xe(395)[Xe(568)](vr[Xe(519)],Xe(423))}),tr(dr,""[Xe(568)](vr.position),{"#include <begin_vertex>":Xe(482).concat(vr[Xe(500)],";\n  ")}),tr(dr,""[Xe(568)](vr[Xe(485)]),{"#include <begin_vertex>":Xe(525).concat(vr.positionRaw,Xe(515))}),tr(dr,""[Xe(568)](vr[Xe(546)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Xe(568)](vr.pointSize,";\n    ")}),tr(dr,"".concat(vr.diffuse),{"#include <color_fragment>":Xe(507)[Xe(568)](vr[Xe(472)],Xe(435))}),tr(dr,"".concat(vr[Xe(563)]),{"#include <dithering_fragment>":Xe(498)[Xe(568)](vr[Xe(563)],";\n  ")}),tr(dr,""[Xe(568)](vr[Xe(499)]),{"vec3 totalEmissiveRadiance = emissive;":Xe(561)[Xe(568)](vr.emissive,Xe(392))}),tr(dr,""[Xe(568)](vr.roughness),{"#include <roughnessmap_fragment>":Xe(530).concat(vr.roughness,";\n    ")}),tr(dr,""[Xe(568)](vr.metalness),{"#include <metalnessmap_fragment>":Xe(559)[Xe(568)](vr[Xe(430)],Xe(392))}),tr(dr,""[Xe(568)](vr.ao),{"#include <aomap_fragment>":Xe(502)[Xe(568)](vr.ao,Xe(392))}),tr(dr,""[Xe(568)](vr[Xe(570)]),{"#include <normal_fragment_maps>":Xe(556)[Xe(568)](vr[Xe(570)]," - (dot(").concat(vr[Xe(570)],Xe(407))}),tr(dr,""[Xe(568)](vr[Xe(414)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(453).concat(vr[Xe(414)],Xe(404)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(431)[Xe(568)](vr[Xe(414)],";\n    ")}),tr(dr,""[Xe(568)](vr.clearcoat),{"material.clearcoat = clearcoat;":Xe(511)[Xe(568)](vr[Xe(529)],";")}),tr(dr,""[Xe(568)](vr[Xe(429)]),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(560)[Xe(568)](vr[Xe(429)],";")}),tr(dr,"".concat(vr[Xe(421)]),{"#include <clearcoat_normal_fragment_begin>":Xe(528)}),dr),yr=(tr(hr={},""[Xe(568)](vr[Xe(500)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Xe(568)](vr[Xe(500)],Xe(552))}),tr(hr,""[Xe(568)](vr[Xe(485)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Xe(568)](vr.position,";\n  ")}),tr(hr,""[Xe(568)](vr[Xe(472)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(410)[Xe(568)](vr.diffuse,Xe(435))}),tr(hr,""[Xe(568)](vr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(410).concat(vr[Xe(563)],Xe(435))}),hr),xr={clearcoat:[vr[Xe(529)],vr.clearcoatNormal,vr[Xe(429)]]},Ir=Xe(527),br=Xe(411),wr=Xe(522),Sr=Xe(467),Mr=Xe(522),Er=Xe(425),Rr=[Xe(524),"fragmentShader","vertexShader",Xe(387),Xe(551),Xe(509),"silent"],Ar=function(n,t,e){return n[Xe(416)](t).join(e)},Tr=function(n,t){var e,r,o=Xe;return new RegExp("\\b"[o(568)]((e=t,r=Xe,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(419))),"\\b"))[o(508)](n)};function Dr(n){return n?n[Xe(447)](/\s/g,""):void 0}function zr(n){return n[Xe(447)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=Xe;!function(n,t){var e=Ye;if(typeof t!==e(465)&&null!==t)throw new TypeError(e(489));n[e(564)]=Object[e(390)](t&&t[e(564)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(441)](n,"prototype",{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=Ye,u=n[s(524)],l=n.fragmentShader,f=n[s(566)],p=n[s(387)],d=n.patchMap,h=n[s(509)],v=n[s(496)],m=or(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Ye(463))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(538)][t(386)](t(434))>=0)return!1}return!0}(u)?(e=u,Object[s(455)](e,m)):e=new u(m),"RawShaderMaterial"===e[s(422)])throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Xe;e(477),Object.assign(n,t);var r=Object.getPrototypeOf(t);Object[e(461)](Object.getOwnPropertyDescriptors(r))[e(400)]((function(n){var t=e,r=typeof n[1][t(438)]===t(465),o=typeof n[1][t(513)]===t(465),i=typeof n[1].value===t(465),a="constructor"===n[0];return(r||o||i)&&!a})).forEach((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(441)](n,t[0],t[1])}))})(sr(t=a[s(539)](this)),e),t[s(478)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(415)][s(403)](),type:e.type,isAlreadyExtended:(r=e.onBeforeCompile,o=Xe,i=r.toString().trim(),!(0===i[o(445)](i[o(386)]("{")+1,i.lastIndexOf("}"))[o(473)]()[o(477)])),cacheHash:"",silent:v},t[s(387)]=rr(rr({},t.uniforms||{}),p||{});var g=t.__csm,_=g[s(381)],y=g[s(566)],x=t[s(387)];return t[s(478)][s(457)]=t[s(535)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(468),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(387)]||this[n(387)],Object[n(455)](this.__csm,e);var r=this[n(478)],o=r[n(381)],i=r[n(566)],a=this.uniforms,c=this[n(535)]();this[n(478)][n(457)]=c,this[n(471)](o,i,a)}},{key:t(436),value:function(){var n=t,e={baseMaterial:this[n(478)][n(524)],fragmentShader:this[n(478)][n(381)],vertexShader:this[n(478)][n(566)],uniforms:this.uniforms,silent:this[n(478)][n(496)],patchMap:this[n(478)][n(551)],cacheKey:this.__csm[n(509)]},r=new(this[n(541)])(e);return Object[n(455)](this,r),r}},{key:t(535),value:function(){var n=t,e=this.__csm,r=e.fragmentShader,o=e[n(566)],i=this[n(387)],a=[Dr(r),Dr(o),i][n(400)]((function(n){return void 0!==n}));return a[n(477)]>0?Mn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(471),value:function(n,e,r){var o=t,i=this;this[o(387)]=r||{},this[o(456)]=function(){var n=o;return i[n(478)][n(457)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(557)](zr(n),t[r(381)],!0);t[r(381)]=a+c}if(e){var s=i[r(557)](zr(e),t[r(566)]);t[r(566)]=r(548)+s,t[r(566)]=a+t[r(566)]}t[r(387)]=rr(rr({},t.uniforms),i[r(387)]),i[r(387)]=t[r(387)]}catch(u){console.error(u)}};if(this.__csm[o(549)]){var c=this.onBeforeCompile;this[o(572)]=function(n,t){c(n,t),a(n)}}else this[o(572)]=a;this[o(408)]=!0}},{key:t(557),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(569)]()),this[o(478)][o(551)]);Object.entries(xr)[o(394)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(543)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error(e(399)[e(568)](a,e(512))[e(568)](c,'". Shader cannot compile.'))})),Object[o(461)](gr)[o(394)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object.keys(c).forEach((function(t){var e=o;Object[e(442)](c[t])[e(394)]((function(r){var o=e,s=mr[t],u=i.__csm[o(422)];if("*"===t||Tr(n,t)){if(!(!s||Array[o(542)](s)&&s[o(454)](u)||"*"===s))throw new Error(o(516)[o(568)](t,o(474))[o(568)](u,o(405)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(478)][o(396)][o(447)](/-/g,"_"),h=n[o(447)](/void\s+main\s*\(\s*\)/g,o(462)[o(568)](d,"()")),v=n[o(454)]("void main()"),m=a[o(454)](o(492));return v&&(m&&this[o(478)][o(549)]?(a=a[o(447)](o(420),o(497)[o(568)](h,o(433))),s=a,u="// #_CSM_#",l="\n            "[o(568)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Xe)(470)](u),a=-1===p?s:s[f(445)](0,p)+l+s[f(445)](p+u[f(477)])):a=a[o(447)](o(420),o(398).concat(r?Mr:wr,o(469)).concat(Ir,o(426)).concat(h,o(575))[o(568)](br,o(487)).concat(r?Er:Sr,o(501))[o(568)](d,o(545)))),a}},{key:t(479),value:function(){var n=t,e=this[n(478)].type;return e?"#define IS_".concat(e.toUpperCase(),";\n"):n(517)}},{key:t(569),value:function(){var n=t;return"ShaderMaterial"===this[n(478)][n(422)]?yr:_r}}],i=Ye,r&&cr(e[i(564)],r),o&&cr(e,o),Object[i(441)](e,i(564),{writable:!1}),c}(D[Xe(493)]);function Or(n){function t(n){var e=Ye;if(typeof n===e(440))return function(n){}[e(541)](e(554))[e(382)](e(553));1!==(""+n/n)[e(477)]||n%20==0?function(){return!0}.constructor(e(577)+e(460))[e(539)]("action"):function(){return!1}[e(541)](e(577)+e(460))[e(382)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=jr;!function(n,t){const e=jr,r=Ur();for(;;)try{if(815583===parseInt(e(192))/1+parseInt(e(191))/2*(parseInt(e(214))/3)+parseInt(e(196))/4+-parseInt(e(230))/5+parseInt(e(228))/6+parseInt(e(197))/7*(parseInt(e(208))/8)+-parseInt(e(238))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(195)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){const n=jr,t=new RegExp(n(237)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Lr("init");t[n(202)](r+n(220))&&e[n(202)](r+n(231))?Lr():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(195)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fr(void 0,(function(){const n=jr,t=function(){const n=jr;let t;try{t=Function(n(221)+n(227)+");")()}catch(e){t=window}return t}(),e=t[n(199)]=t[n(199)]||{},r=[n(229),"warn",n(219),n(224),n(201),n(217),"trace"];for(let o=0;o<r[n(240)];o++){const t=Fr[n(200)][n(203)].bind(Fr),i=r[o],a=e[i]||t;t[n(207)]=Fr[n(206)](Fr),t[n(213)]=a[n(213)][n(206)](a),e[i]=t}}))();const Br=[Cr(205)];function Ur(){const n=["4645280VrQSuY","1533qTbHNY","counter","console","constructor","exception","test","prototype","\n\t\t\t","object","bind","__proto__","2048RTlSRS","setStyle","call","color","debu","toString","12zYSzvL","action","\n      ","table","metalness","info","chain","return (function() ","clearcoat","MeshPhysicalMaterial","error","primitive","roughness",'{}.constructor("return this")( )',"426042eyxKiT","log","4227830ZOKOau","input","clearcoatRoughness","string","index","#ff00fc","gger","function *\\( *\\)","22483557PQcvGf","while (true) {}","length","806062iGNlTC","1258807oUdGlW","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","apply"];return(Ur=function(){return n})()}function jr(n,t){const e=Ur();return(jr=function(n,t){return e[n-=191]})(n,t)}const Nr=nn({__name:Cr(234),props:{color:{default:Cr(235)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:D[t(223)],metalness:e[t(218)],roughness:e[t(226)],clearcoat:e[t(222)],clearcoatRoughness:e[t(232)],color:e[t(211)],vertexShader:t(193),fragmentShader:t(204)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(216)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(194)},o=new Pr(r);return ln((()=>{const n=t;o[n(211)][n(209)](e[n(211)]),o[n(218)]=e[n(218)],o[n(226)]=e[n(226)],o[n(222)]=e.clearcoat,o[n(232)]=e[n(232)]})),(n,e)=>{const r=t;return rn(),on(r(225),{object:Q(o)},null,8,Br)}}});function Lr(n){function t(n){const e=jr;if(typeof n===e(233))return function(n){}[e(200)](e(239))[e(195)](e(198));1!==(""+n/n)[e(240)]||n%20==0?function(){return!0}[e(200)](e(212)+e(236))[e(210)](e(215)):function(){return!1}[e(200)](e(212)+e(236))[e(195)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Wr();;)try{if(742924===parseInt(e(459))/1*(-parseInt(e(465))/2)+-parseInt(e(474))/3+parseInt(e(492))/4*(parseInt(e(475))/5)+-parseInt(e(481))/6+-parseInt(e(469))/7+-parseInt(e(461))/8*(parseInt(e(456))/9)+parseInt(e(483))/10*(parseInt(e(486))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(460)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hr(this,(function(){var n=Zr,t=new RegExp(n(467)),e=new RegExp(n(457),"i"),r=Vr(n(468));t.test(r+n(491))&&e[n(477)](r+"input")?Vr():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(460)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Wr();return(Zr=function(n,t){return e[n-=456]})(n,t)}function Wr(){var n=["310952PBqgAW","exception","9CYdZGn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","2339aesWMx","apply","3926024AQIBMt","warn","length","string","418QsRLUx","bind","function *\\( *\\)","init","7748167vmJBks","table","prototype","action","stateObject","3843339XMpZAM","5nzEfqK","console","test","gger","return (function() ","error","1631304CBaslm",'{}.constructor("return this")( )',"20fHOgfy","debu","toString","23675674ewDkzN","trace","counter","log","constructor","chain"];return(Wr=function(){return n})()}function Vr(n){function t(n){var e=Zr;if(typeof n===e(464))return function(n){}[e(490)](e(458))[e(460)](e(488));1!==(""+n/n)[e(463)]||n%20==0?function(){return!0}[e(490)](e(484)+e(478)).call(e(472)):function(){return!1}[e(490)](e(484)+e(478)).apply(e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){var n,t=Zr;try{n=Function(t(479)+t(482)+");")()}catch(s){n=window}for(var e=n.console=n[t(476)]||{},r=[t(489),t(462),"info",t(480),t(493),t(470),t(487)],o=0;o<r.length;o++){var i=Gr.constructor[t(471)][t(466)](Gr),a=r[o],c=e[a]||i;i.__proto__=Gr[t(466)](Gr),i[t(485)]=c[t(485)][t(466)](c),e[a]=i}}))();export{$e as C,Nr as _,Qn as a,lt as b,St as c,zt as d,Nt as e,Qt as f,Le as g,Ae as h,mt as u};

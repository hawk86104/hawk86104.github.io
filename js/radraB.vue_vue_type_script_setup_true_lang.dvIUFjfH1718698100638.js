import{N as n,r as t}from"./@tresjs.aawOCoPx1718698100638.js";import{d as o,a3 as e,r,X as i,a2 as a,o as u,D as s,J as c,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.CpOXM7bB1718698100638.js";import{aM as v,Z as m,C as y,M as x,ce as w,V as _}from"./three.erXpfL-r1718698100638.js";const M=b;!function(n,t){const o=b,e=A();for(;;)try{if(794518===-parseInt(o(171))/1+-parseInt(o(161))/2+-parseInt(o(182))/3*(parseInt(o(203))/4)+parseInt(o(175))/5+parseInt(o(204))/6*(parseInt(o(178))/7)+parseInt(o(210))/8*(-parseInt(o(185))/9)+-parseInt(o(170))/10*(-parseInt(o(193))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function b(n,t){const o=A();return(b=function(n,t){return o[n-=160]})(n,t)}!function(){I(this,(function(){const n=b,t=new RegExp(n(208)),o=new RegExp(n(177),"i"),e=F(n(183));t[n(192)](e+n(188))&&o[n(192)](e+n(166))?F():e("0")}))()}();const R=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[b(163)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function A(){const n=["clone","776120alLHGV","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4972289OyBdpj","toString","__proto__","action","15djQQnP","init","while (true) {}","9UxeFUz","offset","bind","chain","translate","scale","counter","test","22SxIohR","error","foremost","sizeAttenuation","call","constructor","exception",'{}.constructor("return this")( )',"console","debu","187884hwfVLf","6MTKRtR","tsRef","img","gger","function *\\( *\\)","length","8145928uzGGuF","table","info","2212346RDGwcr","position","apply","TresSprite","99999","input","log","return (function() ","geometry","16253390eZuTLi","962442HkfNRp","value","stateObject"];return(A=function(){return n})()}R(void 0,(function(){const n=b;let t;try{t=Function(n(168)+n(200)+");")()}catch(r){t=window}const o=t[n(201)]=t[n(201)]||{},e=[n(167),"warn",n(160),n(194),n(199),n(211),"trace"];for(let i=0;i<e[n(209)];i++){const t=R[n(198)].prototype[n(187)](R),r=e[i],a=o[r]||t;t[n(180)]=R[n(187)](R),t[n(179)]=a[n(179)][n(187)](a),o[r]=t}}))();const T=[M(162),"scale"],P=["map"],S=o({__name:"buildingsMarkA",props:{color:{default:"#fff"},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(206)]}))),p=await p,d(),p),v=r({color:g.color,transparent:!0,depthWrite:!1,sizeAttenuation:g[o(196)],toneMapped:!1,depthTest:!g[o(195)]}),m=i(null);return a((()=>{const n=o;m.value&&(m[n(172)][n(169)]=m[n(172)][n(169)][n(174)](),m[n(172)][n(169)][n(189)](g[n(186)][0],g[n(186)][1],0))})),(n,t)=>{const e=o;return u(),s(e(164),{ref_key:e(205),ref:m,position:g[e(162)],scale:g[e(190)],renderOrder:e(165)},[c("TresSpriteMaterial",l(v,{map:f(h)}),null,16,P)],8,T)}}});function F(n){function t(n){const o=b;if(typeof n===o(176))return function(n){}[o(198)](o(184)).apply(o(191));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(o(202)+o(207))[o(197)](o(181)):function(){return!1}.constructor(o(202)+o(207)).apply(o(173)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const j=O;!function(n,t){const o=O,e=E();for(;;)try{if(745047===parseInt(o(365))/1*(parseInt(o(364))/2)+parseInt(o(361))/3+parseInt(o(351))/4*(parseInt(o(345))/5)+parseInt(o(350))/6+parseInt(o(363))/7*(parseInt(o(362))/8)+-parseInt(o(337))/9*(parseInt(o(344))/10)+-parseInt(o(355))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){z(this,(function(){const n=O,t=new RegExp(n(370)),o=new RegExp(n(379),"i"),e=W("init");t[n(347)](e+"chain")&&o[n(347)](e+n(367))?W():e("0")}))()}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[O(349)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();k(void 0,(function(){const n=O;let t;try{t=Function(n(384)+'{}.constructor("return this")( ));')()}catch(r){t=window}const o=t[n(358)]=t[n(358)]||{},e=[n(381),n(374),n(348),n(352),n(376),n(339),n(343)];for(let i=0;i<e[n(354)];i++){const t=k[n(353)][n(335)].bind(k),r=e[i],a=o[r]||t;t.__proto__=k[n(360)](k),t[n(342)]=a.toString[n(360)](a),o[r]=t}}))();const C=[j(338)],B=[j(357)];function E(){const n=["9ABBPWT","position","table","uniforms","gger","toString","trace","6278230FJNpAy","25cISmFj","uRadius","test","info","apply","3028524VBPyOS","464996vKbXGr","error","constructor","length","25168649UCiisv","debu","args","console","followWidth","bind","936381eRunTA","5815608PaBoqk","14bhzeCo","1617802hUnSST","1fpGOpL","stateObject","input","MeshRef","value","function *\\( *\\)","call","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","ncolor","warn","radius","exception","color","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresMesh","log","counter","TresShaderMaterial","return (function() ","prototype","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  "];return(E=function(){return n})()}function O(n,t){const o=E();return(O=function(n,t){return o[n-=335]})(n,t)}const G=o({__name:"radraA",props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:"#ffff00"},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=j,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l.value+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(372),fragmentShader:e(336),uniforms:{uSpeed:{value:r.speed},uRadius:{value:r[e(375)]},uTime:l,uFollowWidth:{value:r[e(359)]},ncolor:{value:new y(r[e(377)])}}};d(f,((n,t)=>{if(n&&void 0===t){const n=(new x).makeRotationX(-Math.PI/180*90);f.value.applyMatrix4(n)}}));const _=p();return a((()=>{const n=e;r[n(377)]&&(w.uniforms[n(373)][n(369)]=new y(r[n(377)])),r[n(375)]&&(w[n(340)][n(346)][n(369)]=r[n(375)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return u(),s(o(380),{ref_key:o(368),ref:_,position:r[o(338)]},[c("TresCircleGeometry",{ref_key:"TresCircleGeometryRef",ref:f,args:[r.size,1e3]},null,8,B),c(o(383),g(h(w)),null,16)],8,C)}}});function W(n){function t(n){const o=O;if("string"==typeof n)return function(n){}[o(353)](o(378))[o(349)](o(382));1!==(""+n/n).length||n%20==0?function(){return!0}[o(353)](o(356)+o(341))[o(371)]("action"):function(){return!1}.constructor("debugger").apply(o(366)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const Z=U;!function(n,t){const o=U,e=X();for(;;)try{if(489233===-parseInt(o(197))/1+parseInt(o(237))/2+-parseInt(o(184))/3*(-parseInt(o(194))/4)+-parseInt(o(210))/5*(-parseInt(o(240))/6)+-parseInt(o(212))/7*(parseInt(o(191))/8)+-parseInt(o(211))/9+parseInt(o(198))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const L=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){L(this,(function(){const n=U,t=new RegExp(n(204)),o=new RegExp(n(188),"i"),e=J(n(207));t[n(221)](e+n(220))&&o[n(221)](e+"input")?J():e("0")}))()}();const N=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[U(214)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();N(void 0,(function(){const n=U,t=function(){const n=U;let t;try{t=Function(n(235)+n(232)+");")()}catch(o){t=window}return t}(),o=t[n(233)]=t.console||{},e=["log",n(186),"info",n(199),"exception","table","trace"];for(let r=0;r<e.length;r++){const t=N[n(205)][n(228)].bind(N),i=e[r],a=o[i]||t;t[n(222)]=N.bind(N),t[n(187)]=a[n(187)][n(203)](a),o[i]=t}}))();const V=["position"],$=[Z(225)];function U(n,t){const o=X();return(U=function(n,t){return o[n-=184]})(n,t)}function X(){const n=["applyMatrix4","727136jgZHps","scale","counter","6LaTEMf","height","9573jiOSXt","uColor","warn","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","boundingBox","232lQIOxi","TresTubeGeometry","computeBoundingBox","292MXxEKN","uniforms","color","44304NuoEnR","4516430OjCJVU","error","debu","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","radius","bind","function *\\( *\\)","constructor","updateMatrix","init","stateObject","value","3059580oHuEpB","6916752NbmyJn","86415yREnMk","maxRadius","apply","min","while (true) {}","radraB","period","clone","chain","test","__proto__","gger","TresMesh","args","position","MeshRef","prototype","string","copy","makeScale",'{}.constructor("return this")( )',"console","max","return (function() "];return(X=function(){return n})()}const H=o({__name:Z(217),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:"#ffff00"},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=Z,r=n,i=p(),l=p(1),f=p(.1),v={color:r.color,opacity:r.opacity,transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(201),fragmentShader:"\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ",uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(196)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(209)][o(193)](),l[o(209)]=M[o(209)].boundingBox[o(234)],f[o(209)]=M[o(209)][o(190)][o(215)],I=i.value[o(238)][o(219)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(241)],0)));a((()=>{const n=e;r[n(196)]&&(v[n(195)][n(185)][n(209)]=new y(r[n(196)]))}));const{onLoop:R}=t(),A={value:0};return R((({delta:n})=>{const t=e;A.value+=n;const o=(A[t(209)]%r[t(218)]/r[t(218)]*(r[t(213)]-r.radius)+r[t(202)])/r[t(202)],a=(new x)[t(231)](o,1,o);I&&(i[t(209)][t(238)][t(230)](I[t(219)]()[t(236)](a)),i[t(209)][t(206)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return u(),s(o(224),{ref_key:o(227),ref:i,position:r[o(226)],renderOrder:2e3},[c(o(192),{ref_key:"TresTubeGeometryRef",ref:M,args:[b[o(209)],20,r[o(202)],100,!1]},null,8,$),c("TresShaderMaterial",g(h(v)),null,16)],8,V)}}});function J(n){function t(n){const o=U;if(typeof n===o(229))return function(n){}[o(205)](o(216))[o(214)](o(239));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+o(223))[o(189)]("action"):function(){return!1}[o(205)](o(200)+"gger")[o(214)](o(208)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{S as _,G as a,H as b};

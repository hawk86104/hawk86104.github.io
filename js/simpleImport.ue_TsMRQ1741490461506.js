var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;import{_ as r,bX as o,c1 as s,ak as i,am as c}from"./three.Vxh8Czkt1741490461506.js";import{m as a,e as u,o as l,f as p}from"./@tresjs.rE98Wm941741490461506.js";import{g as f,i as d,e as m}from"./utils.M8-WyV6w1741490461506.js";import{_ as h}from"./jszip.6x-WYzg11741490461506.js";import{F as g}from"./file-saver.awWaueMB1741490461506.js";import{P as v}from"./tweakpane.yDiyAAkA1741490461506.js";import{d as y,q as w,r as b,v as j,a2 as I,o as E,H as O,j as S,g as L,N as x,u as P,aj as k,ak as _,f as R,al as T,m as M,F as N}from"./@vue.NRI7TcgI1741490461506.js";import{v as J}from"./@fesjs.IWF3W7Eu1741490461506.js";import"./postprocessing.wUw4_rsV1741490461506.js";import"./@vueuse.9Z-Ayxy41741490461506.js";import"./@amap.TO4JQn7s1741490461506.js";import"./vue-router.5pMX5YFH1741490461506.js";import"./lodash-es.pklfUAS51741490461506.js";import"./@qlin.yHhFDldE1741490461506.js";import"./pinia.RD4r5tit1741490461506.js";import"./@floating-ui.BPbuo5Gx1741490461506.js";import"./@juggle.7yjBMqoW1741490461506.js";const z=$;!function(t,n){const e=$,r=F();for(;;)try{if(727329===parseInt(e(307))/1+parseInt(e(314))/2*(-parseInt(e(263))/3)+parseInt(e(300))/4+-parseInt(e(322))/5*(parseInt(e(311))/6)+parseInt(e(273))/7+-parseInt(e(320))/8*(-parseInt(e(313))/9)+-parseInt(e(317))/10*(parseInt(e(310))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[$(262)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=$,n=new RegExp(t(285)),e=new RegExp(t(296),"i"),r=q(t(266));n[t(284)](r+t(291))&&e[t(284)](r+t(267))?q():r("0")}))()}();const A=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[$(262)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function F(){const t=["6rbcMtN","pointerdown","72KrkQfK","2286546HsxhIJ","keyup","scene","22990IImMTZ","width","constructor","1350304MgdmAO","pointermove","6083345bMaWvg","removeEventListener","addEventListener","value","update","apply","3dffxtn","warn","bind","init","input","height","THREE","table","log","stateObject","7600719yGJjeJ","replace","exception","object","info","start","stop","keydown","gger","scripts","APP.Player: Script without object.","test","function *\\( *\\)","pointerup","debu","uuid","error","return (function() ","chain","length","call","action","getObjectByProperty","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","source","\nreturn ","toString","4774172fILBNj","__proto__","player,renderer,scene,camera","while (true) {}","console","APP.Player: Event type not supported (",'{}.constructor("return this")( )',"807120vxNhTq","stringify","counter","6457lPqUOj"];return(F=function(){return t})()}function H(t,n){for(let e=0,r=t[z(292)];e<r;e++)t[e](n)}A(void 0,(function(){const t=$,n=function(){const t=$;let n;try{n=Function(t(290)+t(306)+");")()}catch(e){n=window}return n}(),e=n[t(304)]=n[t(304)]||{},r=[t(271),t(264),t(277),t(289),t(275),t(270),"trace"];for(let o=0;o<r.length;o++){const n=A.constructor.prototype.bind(A),s=r[o],i=e[s]||n;n[t(301)]=A[t(265)](A),n[t(299)]=i.toString[t(265)](i),e[s]=n}}))(),window[z(269)]=r;const G={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]},W=()=>{};function U(t){H(G[z(280)],t)}function B(t){H(G[z(315)],t)}function K(t){H(G[z(312)],t)}function Z(t){H(G.pointerup,t)}function $(t,n){const e=F();return($=function(t,n){return e[t-=258]})(t,n)}function D(t){H(G.pointermove,t)}function q(t){function n(t){const e=$;if("string"==typeof t)return function(t){}[e(319)](e(303))[e(262)](e(309));1!==(""+t/t).length||t%20==0?function(){return!0}[e(319)](e(287)+e(281))[e(293)](e(294)):function(){return!1}[e(319)](e(287)+e(281))[e(262)](e(272)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=Y,r=V();for(;;)try{if(368360===-parseInt(e(302))/1+parseInt(e(325))/2*(parseInt(e(304))/3)+parseInt(e(324))/4+-parseInt(e(299))/5*(-parseInt(e(307))/6)+parseInt(e(322))/7*(parseInt(e(301))/8)+parseInt(e(313))/9*(parseInt(e(310))/10)+-parseInt(e(303))/11*(parseInt(e(317))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const X=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[Y(321)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){X(this,(function(){const t=Y,n=new RegExp(t(305)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=tt(t(323));n[t(320)](r+t(287))&&e[t(320)](r+"input")?tt():r("0")}))()}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function V(){const t=["trace","error","console","debu","341300XonEgb","length","4670776pbjEOD","376995votgnp","209pAzWUI","3243UjLgNA","function *\\( *\\)","__proto__","18eclhvN","call","table","33870lWFeVE","gger","/* eslint-disable prefer-rest-params */\n/* eslint-disable no-undefined */\n/* eslint-disable guard-for-in */\nimport * as THREE from 'three'\n\nwindow.THREE = THREE // Used by APP Scripts.\nconst Grscwh = { scene: null, renderer: null, camera: null, sizes: null }\nconst player = {\n\tget renderer() {\n\t\treturn Grscwh.renderer?.value\n\t},\n\tloader: new THREE.TextureLoader(),\n\tget scene() {\n\t\t\treturn Grscwh.scene?.value\n\t},\n\tget camera() {\n\t\t\treturn Grscwh.camera?.value\n\t},\n\tget width() {\n\t\t\treturn Grscwh.sizes?.width?.value\n\t},\n\tget height() {\n\t\t\treturn Grscwh.sizes?.height?.value\n\t},\n\tget dom() {\n\t\t\treturn Grscwh.renderer?.value.domElement.parentElement\n\t},\n\tget canvas() {\n\t\t\treturn Grscwh.renderer?.value.domElement\n\t},\n\tevents: {},\n\tinit(scene, renderer, camera, sizes) {\n\t\t\tGrscwh.scene = scene\n\t\t\tGrscwh.renderer = renderer\n\t\t\tGrscwh.camera = camera\n\t\t\tGrscwh.sizes = sizes\n\t},\n\tload(sceneObject) {\n\t\t","810WGrnHE","bind","constructor","warn","671028Gyeeis",'{}.constructor("return this")( )',"const scriptsJson = \n","test","apply","7BzRMUm","init","1568884lBRGsc","596ZwMojQ","chain","string","counter","\n\t\tthis.events = {\n\t\t\t\tinit: [],\n\t\t\t\tstart: [],\n\t\t\t\tstop: [],\n\t\t\t\tkeydown: [],\n\t\t\t\tkeyup: [],\n\t\t\t\tpointerdown: [],\n\t\t\t\tpointerup: [],\n\t\t\t\tpointermove: [],\n\t\t\t\tupdate: [],\n\t\t}\n\t\tlet scriptWrapParams = 'player,renderer,scene,camera'\n\t\tconst scriptWrapResultObj = {}\n\n\t\tfor (const eventKey in this.events) {\n\t\t\t\tscriptWrapParams += `,${eventKey}`\n\t\t\t\tscriptWrapResultObj[eventKey] = eventKey\n\t\t}\n\t\tconst scriptWrapResult = JSON.stringify(scriptWrapResultObj).replace(/\\\"/g, '')\n\t\tfor (const uuid in scriptsJson) {\n\t\t\t\tlet curUuid = uuid\n\t\t\t\t//这里解决一个问题 目前并没有把 主场景scene直接替换而是通过group 加进入的，所以 如果事件是基于主场景scene 那么替换这个uuid为现在tres主场景的uuid\n\t\t\t\tif (uuid === sceneObject.uuid) {\n\t\t\t\t\t\tcurUuid = this.scene.uuid\n\t\t\t\t}\n\t\t\t\tconst object = this.scene.getObjectByProperty('uuid', curUuid, true)\n\t\t\t\tif (object === undefined) {\n\t\t\t\t\t\tconsole.warn('player: Script without object.', curUuid)\n\t\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tconst scripts = scriptsJson[uuid]\n\t\t\t\tfor (let i = 0; i < scripts.length; i++) {\n\t\t\t\t\t\tconst script = scripts[i]\n\t\t\t\t\t\t// eslint-disable-next-line no-new-func\n\t\t\t\t\t\tconst functions = new Function(scriptWrapParams, `${script.source}\nreturn ${scriptWrapResult};`).bind(object)(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\tthis.renderer,\n\t\t\t\t\t\t\t\tthis.scene,\n\t\t\t\t\t\t\t\tthis.camera,\n\t\t\t\t\t\t)\n\t\t\t\t\t\tfor (const name in functions) {\n\t\t\t\t\t\t\t\tif (functions[name] === undefined) continue\n\t\t\t\t\t\t\t\tif (this.events[name] === undefined) {\n\t\t\t\t\t\t\t\t\t\tconsole.warn('player: Event type not supported (', name, ')')\n\t\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.events[name].push(functions[name].bind(object))\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.dispatch(this.events.init, arguments)\n\t\t}\n\t},\n\tdispatch(array, event) {\n\t\tfor (let i = 0, l = array.length; i < l; i++) {\n\t\t\t\tarray[i](event)\n\t\t}\n\t},\n\tsetCamera(value) {\n\t\t\tconsole.warn('暂时不考虑摄像机的设置函数', value)\n\t\t\t// camera = value\n\t\t\t// camera.aspect = this.width / this.height\n\t\t\t// camera.updateProjectionMatrix()\n\t},\n\tsetScene(value) {\n\t\t\tconsole.warn('暂时不考虑场景的设置函数', value)\n\t\t\t// scene = value\n\t},\n\tsetPixelRatio(value) {\n\t\t\tconsole.warn('暂时不考虑像素比的设置函数', value)\n\t},\n\tsetSize(value) {\n\t\t\tconsole.warn('暂时不考虑尺寸的设置函数', value)\n\t},\n\tdispose() {\n\t\t\t// renderer.dispose();\n\t\t\t// camera = undefined;\n\t\t\t// scene = undefined;\n\t\t\tconsole.warn('暂时不考虑释放资源的函数')\n\t},\n\tonKeyDown(event) {\n\t\tplayer.dispatch(player.events.keydown, event)\n\t},\n\tonKeyUp(event) {\n\t\t\tplayer.dispatch(player.events.keyup, event)\n\t},\n\tonPointerDown(event) {\n\t\t\tplayer.dispatch(player.events.pointerdown, event)\n\t},\n\tonPointerUp(event) {\n\t\t\tplayer.dispatch(player.events.pointerup, event)\n\t},\n\tonPointerMove(event) {\n\t\t\tplayer.dispatch(player.events.pointermove, event)\n\t},\n\tplay() {\n\t\t\tdocument.addEventListener('keydown', this.onKeyDown)\n\t\t\tdocument.addEventListener('keyup', this.onKeyUp)\n\t\t\tdocument.addEventListener('pointerdown', this.onPointerDown)\n\t\t\tdocument.addEventListener('pointerup', this.onPointerUp)\n\t\t\tdocument.addEventListener('pointermove', this.onPointerMove)\n\t\t\tthis.dispatch(this.events.start, null)\n\t\t\t//renderer.setAnimationLoop( animate ); 播放是自动的\n\t},\n\tstop() {\n\t\t\tdocument.removeEventListener('keydown', this.onKeyDown)\n\t\t\tdocument.removeEventListener('keyup', this.onKeyUp)\n\t\t\tdocument.removeEventListener('pointerdown', this.onPointerDown)\n\t\t\tdocument.removeEventListener('pointerup', this.onPointerUp)\n\t\t\tdocument.removeEventListener('pointermove', this.onPointerMove)\n\t\t\tthis.dispatch(this.events.stop, arguments)\n\t\t\t// renderer.setAnimationLoop( null );播放是自动的\n\t},\n\trender(elapsed, delta) {\n\t\t\tthis.dispatch(this.events.update, { time: elapsed, delta })\n\t},\n}\nexport default player\n","action","return (function() ","stateObject","toString"];return(V=function(){return t})()}Q(void 0,(function(){const t=Y;let n;try{n=Function(t(292)+t(318)+");")()}catch(o){n=window}const e=n[t(297)]=n[t(297)]||{},r=["log",t(316),"info",t(296),"exception",t(309),t(295)];for(let s=0;s<r.length;s++){const n=Q[t(315)].prototype[t(314)](Q),o=r[s],i=e[o]||n;n[t(306)]=Q.bind(Q),n.toString=i[t(294)][t(314)](i),e[o]=n}}))();function Y(t,n){const e=V();return(Y=function(t,n){return e[t-=287]})(t,n)}function tt(t){function n(t){const e=Y;if(typeof t===e(288))return function(t){}[e(315)]("while (true) {}")[e(321)](e(289));1!==(""+t/t)[e(300)]||t%20==0?function(){return!0}.constructor("debugger")[e(308)](e(291)):function(){return!1}[e(315)](e(298)+e(311))[e(321)](e(293)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=rt,r=ut();for(;;)try{if(545067===parseInt(e(180))/1+parseInt(e(227))/2*(-parseInt(e(260))/3)+-parseInt(e(191))/4+-parseInt(e(271))/5*(parseInt(e(183))/6)+parseInt(e(192))/7*(parseInt(e(248))/8)+-parseInt(e(278))/9+parseInt(e(199))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const nt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[rt(211)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){nt(this,(function(){const t=rt,n=new RegExp(t(252)),e=new RegExp(t(275),"i"),r=lt("init");n[t(291)](r+t(200))&&e[t(291)](r+t(185))?lt():r("0")}))()}();const et=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function rt(t,n){const e=ut();return(rt=function(t,n){return e[t-=178]})(t,n)}et(void 0,(function(){const t=rt,n=function(){const t=rt;let n;try{n=Function("return (function() "+t(187)+");")()}catch(e){n=window}return n}(),e=n[t(269)]=n[t(269)]||{},r=[t(257),"warn",t(279),t(262),t(273),t(188),t(300)];for(let o=0;o<r[t(244)];o++){const n=et.constructor[t(233)][t(259)](et),s=r[o],i=e[s]||n;n.__proto__=et.bind(et),n[t(184)]=i.toString[t(259)](i),e[s]=n}}))();let ot=[];const st=(r,o,s,i)=>{const c=rt,a=s[c(292)],{uuid:u}=a,l=((r,o)=>{var s={};for(var i in r)n.call(r,i)&&o.indexOf(i)<0&&(s[i]=r[i]);if(null!=r&&t)for(var i of t(r))o.indexOf(i)<0&&e.call(r,i)&&(s[i]=r[i]);return s})(a,["uuid"]),p=JSON[c(268)](JSON.stringify(s));return p[c(292)]=l,c(289)+(i[c(276)]?c(272):"")+c(290)+(s?c(296)+s.object[c(202)]+c(225)+s[c(292)].uuid+c(265)+s[c(292)][c(220)]+c(285):"")+c(290)+r+c(290)+(i[c(239)]?c(196):"")+c(286)+(o[c(255)]?c(297):c(210))+c(181)+(o[c(283)]?o[c(283)]:"THREE.PCFShadowMap")+",\n\ttoneMapping: "+(o[c(293)]?o[c(293)]:c(216))+c(190)+(o.toneMappingExposure?o[c(236)]:"1")+c(198)+(p?""+JSON[c(250)](p):"{}")+c(266)},it=(t,n,e,r,o)=>{const s=rt;n.childLevel;let i=s(295)+r+s(240)+e[s(220)]+'" uuid="'+e.uuid+s(238)+e[s(202)]+'">\n    ';if(e[s(213)]&&e[s(213)].length){const n=((t,n)=>{const e=rt,r=t-1,o=["firstLevel",e(178),e(277)],s=n[e(258)]("-")[e(182)]();return{fileName:o[r]+"-"+s+e(284),comName:""+o[r]+s}})(o,e.uuid);i+="<"+n.comName+s(218)+r+s(270),((t,n,e)=>{const r=rt;let o="";e[r(237)](((t,n)=>{const e=r;o+=e(215)+n+']" name="'+t[e(220)]+e(189)+t[e(288)]+e(238)+t[e(202)]+e(299)}));const s=r(264)+o+r(253);t[r(208)](""+n[r(221)],s),ot[r(263)](n)})(t,n,e[s(213)])}return i+="\n    </primitive>\n",i},ct=(t,n,e)=>{const r=rt;let o="";const s=t.folder("components/childComponent");return e.object&&e.object.children&&e[r(292)][r(213)][r(244)]&&e[r(292)].children[r(237)](((t,e)=>{const i=r;n[i(204)]>0&&t.children&&t.children.length?o+=it(s,n,t,e,1):o+=i(219)+e+']" name="'+t[i(220)]+i(189)+t[i(288)]+i(238)+t.type+i(224)})),t.file("components/scene.vue",r(280)+o+r(251)+(()=>{const t=rt;let n="";return ot[t(237)]((e=>{const r=t;n+=r(256)+e[r(226)]+r(223)+e[r(221)]+"'\n"})),n})()+r(230)+n[r(281)]+r(228)+n[r(281)]+r(254)+n[r(281)]+r(267)),r(234)};function at(t,n){const e=rt;ot=[];const r=n[e(281)],o=new h;((t,n)=>{const e=rt,r=[];n.geometries&&n[e(243)][e(237)]((t=>{const n=e;t[n(202)]===n(212)&&(r.push({uuid:t[n(288)],data:t.data}),t[n(206)]=n(245)+t.uuid+n(274))}));const o=[];if(n.images&&n[e(261)][e(237)]((t=>{const n=e;t[n(294)]&&(o[n(263)]({uuid:t[n(288)],url:t.url}),t.url[n(202)]?t[n(294)]=n(235)+t[n(288)]+"."+t[n(294)][n(202)]+n(274):t.url=n(235)+t[n(288)]+"."+f(t[n(294)]))})),r[e(244)]){const n=t.folder(e(243));r.forEach((t=>{const r=e;n[r(208)](t[r(288)]+r(274),JSON[r(250)](t[r(206)]))}))}if(o[e(244)]){const n=t[e(193)](e(261));o.forEach((t=>{const r=e;t[r(294)].type?n[r(208)](t[r(288)]+"."+t.url[r(202)]+".json",JSON.stringify(t[r(294)])):n.file(t[r(288)]+"."+f(t[r(294)]),t[r(294)][r(258)](r(298))[r(182)](),{base64:!0})}))}t[e(208)]("json/scene.json",JSON[e(250)](n))})(o[e(193)](e(231)+r),t[e(242)]);const s=o[e(193)](e(287)+r);s[e(208)]("config.js",(t=>{const n=rt,e=new Date,r=e.getFullYear()+"-"+String(e[n(207)]()+1).padStart(2,"0")+"-"+String(e[n(229)]()).padStart(2,"0");return n(179)+t+n(241)+r+n(214)+r+n(222)})(r));const i=st(ct(s,n,t[e(242)]),t.project,t[e(247)],n);return s.file("pages/index.vue",i),s.file(e(203),(t=>{const n=Y,e=n(319)+JSON.stringify(t)+"\n";return n(312)+e+n(290)})(t[e(217)])),o[e(209)]({type:e(205)})[e(186)]((t=>{g.saveAs(t,r+".zip")}))}function ut(){const t=["input","then",'{}.constructor("return this")( )',"table",'" uuid="',",\n\ttoneMappingExposure:","3955196vvNYfk","329eygmOm","folder","while (true) {}","call","<TresGridHelper />","counter",",\n})\n\nconst cameraConfig = ","9999050eokvaf","chain","debu","type","common/eventScript.js","childLevel","blob","data","getMonth","file","generateAsync","false","apply","BufferGeometry","children",'",\n\t\t"updateTime": "','\n        <primitive :object="object[',"THREE.NoToneMapping","scripts",' :object="sceneObject.children[','    \n    <primitive :object="sceneObject.children[',"name","fileName",'",\n\t\t"require": [],\n        "tvtstore": \'LOCAL\',\n\t\t"preview": [\n\t\t\t{ "src": "plugins/basic/base/preview/theBasic.png", "type": "img", "name": "index", "title": "实例" ,"disableFPSGraph": false, "disableSrcBtn": false},\n\t\t]\n\t}'," from './childComponent/",'"/>\n    ','  ref="cameraRef" uuid="',"comName","90brbhDk","/json/scene.json')\n\nif (scene.geometries) {\n    for (const geometry of scene.geometries) {\n        if (geometry.data && geometry.data.startsWith('url:')) {\n            let url = geometry.data.slice(4)\n            if (url.startsWith('geometries/')) {\n                url = `./plugins/","getDate","\n\nconst { scene: tresScene, renderer, camera, sizes } = useTresContext()\nplayer.init(tresScene, renderer, camera, sizes)\n\nconst loader = new THREE.ObjectLoader()\nconst scene = await loadJsonFile('./plugins/","public/plugins/","string","prototype","<Suspense>\n\t\t\t<sceneCom />\n\t\t</Suspense>","url:images/","toneMappingExposure","forEach",'" type="',"gridHelper",']" name="','",\n\t\t"title": "编辑器导出的插件",\n\t\t"intro": "描述",\n\t\t"version": "0.0.1",\n\t\t"author": "作者名",\n\t\t"website": "站点地址",\n\t\t"state": "active",\n\t\t"creatTime": "',"scene","geometries","length","url:geometries/","action","camera","112136XAuJIQ","constructor","stringify","</template>\n<script setup lang=\"ts\">\nimport { onMounted } from 'vue'\nimport * as THREE from 'three'\nimport { loadImageToBase64, loadJsonFile } from 'PLS/tresEditor'\nimport { useTresContext, useRenderLoop } from '@tresjs/core'\nimport player from '../common/eventScript'\n","function *\\( *\\)",'\n</template>\n\n<script setup lang="ts">\nconst props = withDefaults(\n    defineProps<{\n        object: any\n    }>(),\n    {},\n)\n<\/script>\n',"/${url}`\n            }\n            geometry.data = await loadJsonFile(url)\n        }\n    }\n}\nif (scene.images) {\n    for (const image of scene.images) {\n        if (image.url && image.url.startsWith('url:')) {\n            let url = image.url.slice(4)\n            if (url.startsWith('images/')) {\n                url = `./plugins/","shadows","import ","log","split","bind","23745cLLhLw","images","error","push","<template>\n    ",'" name="',"\nconst loader = new THREE.ObjectLoader()\nconst cameraObject = loader.parse(cameraConfig)\nconst cameraRef = ref(null)\nwatch(\n\t() => cameraRef.value,\n\t(val) => {\n\t\t\tval.copy(cameraObject)\n\t},\n)\n<\/script>\n\t",'/${url}`\n            }\n            if (url.endsWith(".json")) {\n                image.url = await loadJsonFile(url)\n            } else {\n                image.url = await loadImageToBase64(url)\n            }\n        }\n    }\n}\n\nconst sceneObject = loader.parse(scene) as any\nonMounted(() => {\n    tresScene.value.background = sceneObject.background\n    tresScene.value.environment = sceneObject.environment\n    tresScene.value.fog = sceneObject.fog\n    player.load(sceneObject)\n    player.play()\n})\nconst { onLoop } = useRenderLoop()\nonLoop(({ delta, elapsed }) => {\n    if (player.renderer) {\n        player.render(elapsed * 1000, delta * 1000)\n    }\n})\n<\/script>',"parse","console",'].children" />',"6155HQHnnW","<OrbitControls />","exception",".json","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","orbitControls","thirdLevel","5142006ssBUsx","info","<template>\n        ","pluginName","gger","shadowType",".vue",'" />',"\n\t</TresCanvas>\n</template>\n<script setup lang=\"ts\">\nimport * as THREE from 'three'\nimport { reactive, watch, ref } from 'vue'\nimport { TresCanvas } from '@tresjs/core'\nimport { OrbitControls } from '@tresjs/cientos'\nimport sceneCom from '../components/scene.vue'\nimport { loading2 as loading } from 'PLS/UIdemo'\n\nconst state = reactive({\n\tclearColor: '#201919',\n\twindowSize:true,\n\tantialias: true,\n\tshadows: ","src/plugins/","uuid",'\n<template>\n    <loading />\n\t<TresCanvas v-bind="state">\n\t\t',"\n\t\t","test","object","toneMapping","url",'\n    <primitive :object="sceneObject.children[',"<Tres","true",";base64,",'"/>\n        ',"trace","secondLevel",'\n\texport default {\n\t\t"name": "',"812519cfVwKV",",\n\tshadowMapType: ","pop","48rjuqag","toString"];return(ut=function(){return t})()}function lt(t){function n(t){const e=rt;if(typeof t===e(232))return function(t){}[e(249)](e(194)).apply(e(197));1!==(""+t/t).length||t%20==0?function(){return!0}[e(249)](e(201)+"gger")[e(195)](e(246)):function(){return!1}[e(249)]("debu"+e(282)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=ft,r=mt();for(;;)try{if(902355===parseInt(e(514))/1*(parseInt(e(529))/2)+parseInt(e(504))/3*(-parseInt(e(565))/4)+parseInt(e(522))/5*(-parseInt(e(499))/6)+parseInt(e(531))/7+-parseInt(e(561))/8*(parseInt(e(520))/9)+-parseInt(e(535))/10+parseInt(e(567))/11*(parseInt(e(519))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ft(530)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function ft(t,n){const e=mt();return(ft=function(t,n){return e[t-=485]})(t,n)}!function(){pt(this,(function(){const t=ft,n=new RegExp(t(498)),e=new RegExp(t(518),"i"),r=gt("init");n[t(500)](r+t(554))&&e[t(500)](r+t(559))?gt():r("0")}))()}();const dt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ft(530)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function mt(){const t=["children","function *\\( *\\)","6LwjWLR","test","files","while (true) {}","value","51wLcxeX","scene","fog","Group","addButton","location","fileInput","Zip2Json","srcJson","getElementById","48UDuwgX","parse",".zip","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5537052zmMtfD","2309697cEhMbL","插件名称","4757270cMbBrX","call","action","默认网格","reload","target","forEach","23528DYHAWA","apply","8890238dAPEdq","dispose",'{}.constructor("return this")( )',"toString","5162460JFtmUk","addBinding","MakePlugin","testEditor","清空场景",".json","info","__proto__","warn","background","filter","environment","onload","constructor","exception","accept","生成分解场景Zip","gger","导入分解场景Zip","chain","导入原生场景Json","material","console","table","input","场景内无物体","48PNjNPL","生成插件包","确定要执行操作吗？","onchange","163148NIKLcq","addFolder","66KdFKmP","add","orbitControls","先清空场景","请正确填写插件名称","error","bind","stateObject","pluginName","readAsText","length","result","默认控制器","warning","clear","click","TvT插件包"];return(mt=function(){return t})()}dt(void 0,(function(){const t=ft,n=function(){const t=ft;let n;try{n=Function("return (function() "+t(533)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(557)]||{},r=["log",t(543),t(541),t(485),t(549),t(558),"trace"];for(let o=0;o<r[t(490)];o++){const n=dt.constructor[t(517)].bind(dt),s=r[o],i=e[s]||n;n[t(542)]=dt.bind(dt),n[t(534)]=i[t(534)][t(486)](i),e[s]=n}}))();const ht=y({__name:"importJson",setup(t){const n=ft;let e,s=null;var i=new o;let c=null;const{scene:l,renderer:p,camera:f,sizes:h}=a(),g=()=>{if(!c)return;const t=n=>{const e=ft;let r=n[e(497)][e(545)]((t=>!!t));r[e(528)]((n=>{const r=e;n[r(497)][r(490)]?t(n):((t=>{var n,e;const r=ft;null==(n=t.geometry)||n[r(532)](),null==(e=t[r(556)])||e[r(532)]()})(n),n[r(494)]())})),n.clear(),r=null};t(c),c=null},y=t=>{const n=ft;g(),(()=>{const t=z;document[t(258)](t(280),U),document[t(258)]("keyup",B),document[t(258)](t(312),K),document[t(258)](t(286),Z),document[t(258)]("pointermove",D),H(G.stop,null),G[t(266)]=[],G[t(278)]=[],G[t(279)]=[],G[t(280)]=[],G[t(315)]=[],G[t(312)]=[],G[t(286)]=[],G[t(321)]=[],G[t(261)]=[]})(),c=new(r[n(507)]),t[n(497)]&&(c[n(497)]=t[n(497)],l[n(503)][n(568)](c),l[n(503)][n(544)]=t.background,l[n(503)][n(546)]=t[n(546)],l[n(503)][n(506)]=t[n(506)])},b=new v;b[n(508)]({title:n(539),label:n(494)}).on(n(495),(()=>{const t=n;confirm(t(563))&&window[t(509)][t(526)]()}));b[n(508)]({title:n(555),label:n(512)}).on("click",(()=>{var t,r;const o=n;s?null==(r=(t=J).warning)||r.call(t,{content:o(570),colorful:!0}):e&&(e[o(550)]=".json",e[o(503)]=null,e.click())}));const j=b[n(566)]({title:"分解场景[中间件 测试用]",expanded:!1});j[n(508)]({title:n(551),label:"Json2Zip"}).on(n(495),(()=>{var t,e;const r=n;s?m(s):null==(e=(t=J)[r(493)])||e.call(t,{content:r(560),colorful:!0})}));j[n(508)]({title:n(553),label:n(511)}).on(n(495),(()=>{var t,r;const o=n;s?null==(r=(t=J).warning)||r.call(t,{content:o(570),colorful:!0}):e&&(e[o(550)]=o(516),e[o(503)]=null,e[o(495)]())}));const I={orbitControls:!0,gridHelper:!0,pluginName:n(538),childLevel:1},E=b[n(566)]({title:n(496)});E[n(536)](I,"pluginName",{label:n(521)}),E[n(536)](I,n(569),{label:n(492)}),E[n(536)](I,"gridHelper",{label:n(525)});E[n(508)]({title:n(562),label:n(537)}).on("click",(()=>{var t,e,r,o;const i=n;s?I[i(488)]?at(s,I):null==(e=(t=J).warning)||e.call(t,{content:i(571),colorful:!0}):null==(o=(r=J)[i(493)])||o.call(r,{content:i(560),colorful:!0})}));const O=t=>{const e=n;s=t,y(i[e(515)](s[e(505)])),((t,n,e,r,o)=>{const s=z,i=o[s(282)]||{};let c=s(302);const a={};for(const l in G)c+=","+l,a[l]=l;const u=JSON[s(308)](a)[s(274)](/\"/g,"");for(const l in i){let a=l;l===o[s(316)][s(276)][s(288)]&&(a=n[s(288)]);const p=n[s(295)](s(288),a,!0);if(void 0===p){console[s(264)](s(283),a);continue}const f=i[l];for(let o=0;o<f[s(292)];o++){const i=f[o],a=new Function(c,i[s(297)]+s(298)+u+";")[s(265)](p)({width:r[s(318)].value,height:r[s(268)][s(260)],setCamera:W},t,n,e);for(const t in a)void 0!==a[t]&&(void 0!==G[t]?G[t].push(a[t][s(265)](p)):console[s(264)](s(305),t,")"))}}H(G[s(266)],null)})(p[e(503)],l[e(503)],f.value,h,s),(()=>{const t=z;document[t(259)]("keydown",U),document.addEventListener(t(315),B),document[t(259)](t(312),K),document[t(259)](t(286),Z),document[t(259)](t(321),D),H(G[t(278)],null)})()};w((()=>{const t=n;e=document[t(513)](t(510)),e&&(e[t(564)]=n=>{const r=t,o=n[r(527)][r(501)][0];if(e[r(550)]===r(540)){const t=new FileReader;t[r(547)]=t=>{const n=r,e=t[n(527)][n(491)];O(JSON[n(515)](e))},t[r(489)](o)}e.accept===r(516)&&d(o,O)})}));const{onLoop:S}=u();return S((({delta:t,elapsed:n})=>{var e,r;e=1e3*n,r=1e3*t,H(G[z(261)],{time:e,delta:r})})),(t,n)=>null}});function gt(t){function n(t){const e=ft;if("string"==typeof t)return function(t){}[e(548)](e(502))[e(530)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(548)]("debu"+e(552))[e(523)](e(524)):function(){return!1}.constructor("debugger")[e(530)](e(487)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const vt=jt;!function(t,n){const e=jt,r=bt();for(;;)try{if(833764===-parseInt(e(500))/1*(-parseInt(e(519))/2)+parseInt(e(509))/3+-parseInt(e(538))/4*(parseInt(e(497))/5)+-parseInt(e(535))/6*(parseInt(e(507))/7)+-parseInt(e(531))/8+-parseInt(e(511))/9*(parseInt(e(496))/10)+parseInt(e(515))/11*(parseInt(e(528))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){yt(this,(function(){const t=jt,n=new RegExp(t(529)),e=new RegExp(t(530),"i"),r=Et("init");n[t(524)](r+t(522))&&e.test(r+"input")?Et():r("0")}))()}();const wt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function bt(){const t=["50974EhSoEw","#201919","constructor","call","4txJnCw","while (true) {}","console","chain","bind","test","fileInput","table","length","10812afCPOe","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","17912IhHobg","toString","string","warn","8585130FHmEBx","return (function() ","none","1468txFVay","gger","151630Sttcdf","18715MuNFft","apply","TresPerspectiveCamera","67607bCfJMd","trace",".zip","stateObject","simpleImport","debu","value","7QPBGgW","error","2948574wujMJi","info","981HMGFlv","TresGridHelper","__proto__","prototype"];return(bt=function(){return t})()}function jt(t,n){const e=bt();return(jt=function(t,n){return e[t-=495]})(t,n)}wt(void 0,(function(){const t=jt,n=function(){const t=jt;let n;try{n=Function(t(536)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(521)]=n[t(521)]||{},r=["log",t(534),t(510),t(508),"exception",t(526),t(501)];for(let o=0;o<r[t(527)];o++){const n=wt[t(517)][t(514)][t(523)](wt),s=r[o],i=e[s]||n;n[t(513)]=wt[t(523)](wt),n[t(532)]=i[t(532)][t(523)](i),e[s]=n}}))();const It=y({__name:vt(504),setup(t){const n=vt,e=b({clearColor:n(516),shadows:!0,alpha:!1,shadowMapType:s,outputColorSpace:i,toneMapping:c}),r=b({enableDamping:!0,dampingFactor:.05}),o=j(null);return I((()=>{o[n(506)]})),(t,o)=>{const s=n;return E(),O(N,null,[S(P(p),M(e,{"window-size":""}),{default:L((()=>[o[0]||(o[0]=x(s(499),{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),S(P(l),k(_(r)),null,16),(E(),R(T,null,{default:L((()=>[S(ht)])),_:1})),o[1]||(o[1]=x(s(512),null,null,-1))])),_:1},16),o[2]||(o[2]=x("input",{id:s(525),type:"file",accept:s(502),style:{display:s(537)}},null,-1))],64)}}});function Et(t){function n(t){const e=jt;if(typeof t===e(533))return function(t){}[e(517)](e(520))[e(498)]("counter");1!==(""+t/t)[e(527)]||t%20==0?function(){return!0}[e(517)](e(505)+"gger")[e(518)]("action"):function(){return!1}.constructor(e(505)+e(495))[e(498)](e(503)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{It as default};

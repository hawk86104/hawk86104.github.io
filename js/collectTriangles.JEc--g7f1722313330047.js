import{p as t,$ as n,W as e,d as o}from"./@tresjs.Q03Md-En1722313330047.js";import{_ as r}from"./index.sAQOsoU_1722313330047.js";import{a as s}from"./index._gvjf93K1722313330047.js";import{a5 as i,a6 as c,N as u,j as a,g as l,B as p,cA as f}from"./three.0L1oP_mX1722313330047.js";import{P as g}from"./tweakpane.yHWGBmom1722313330047.js";import{I as h,C as d,N as m,c as y,d as w,a as j}from"./three-mesh-bvh.Q4SF0_jl1722313330047.js";import{d as b,a4 as _,b as I,a1 as v,o as x,D as M,J as A,u as T,F as R,r as k,e as z,j as F,g as B,m as O,f as C,al as X}from"./@vue.Q1VpS3901722313330047.js";import"./@vueuse.UFv615y21722313330047.js";import"./default.vue_vue_type_script_setup_true_lang.slu8pFc01722313330047.js";import"./@fesjs.Tyv7j4eO1722313330047.js";import"./vue-router.jRikjQi41722313330047.js";import"./lodash-es.nFpJXAf-1722313330047.js";import"./@qlin.yHhFDldE1722313330047.js";import"./pinia.YMTINUAO1722313330047.js";import"./@floating-ui.BPbuo5Gx1722313330047.js";import"./@juggle.7yjBMqoW1722313330047.js";import"./three-stdlib.-J90B2tF1722313330047.js";import"./@pmndrs.B3pPHFpB1722313330047.js";import"./object-hash.aoN2vIR61722313330047.js";import"./@amap.cDim55ZW1722313330047.js";import"./jszip.49pgsWkw1722313330047.js";function Z(){const t=["4dEXkKK","bind","clientX","info","error","setFromCamera","button","warn","apply","exception","console","2474843ogMLTf","stateObject","pointerType","length","debu","21294vwuCig","clientY","innerHeight","return (function() ","counter","constructor","innerWidth","259143GGDmTo","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","input","9691560MLhPqe","addEventListener","2022pQepyw","enabled","3590LvZKBW","touch","test","string","263364fNMePA","toString","table","trace","while (true) {}","51793yDrGRl","value","pointermove","336xFuXPX","pointerup"];return(Z=function(){return t})()}!function(t,n){const e=G,o=Z();for(;;)try{if(177175===-parseInt(e(378))/1+-parseInt(e(373))/2+parseInt(e(360))/3*(parseInt(e(383))/4)+parseInt(e(369))/5*(-parseInt(e(367))/6)+-parseInt(e(348))/7+parseInt(e(381))/8*(-parseInt(e(353))/9)+parseInt(e(365))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(345)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=G,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(362),"i"),o=L("init");n.test(o+t(363))&&e[t(371)](o+t(364))?L():o("0")}))()}();const S=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function G(t,n){const e=Z();return(G=function(t,n){return e[t-=338]})(t,n)}S(void 0,(function(){const t=G;let n;try{n=Function(t(356)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(347)]=n[t(347)]||{},o=["log",t(344),t(340),t(341),t(346),t(375),t(376)];for(let s=0;s<o.length;s++){const n=S.constructor.prototype[t(338)](S),r=o[s],i=e[r]||n;n.__proto__=S[t(338)](S),n[t(374)]=i.toString[t(338)](i),e[r]=n}}))();function L(t){function n(t){const e=G;if(typeof t===e(372))return function(t){}[e(358)](e(377))[e(345)](e(357));1!==(""+t/t)[e(351)]||t%20==0?function(){return!0}[e(358)]("debu"+e(361)).call("action"):function(){return!1}[e(358)](e(352)+e(361)).apply(e(349)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=U;!function(t,n){const e=U,o=$();for(;;)try{if(928376===parseInt(e(304))/1+-parseInt(e(296))/2+-parseInt(e(253))/3+parseInt(e(280))/4+-parseInt(e(283))/5+-parseInt(e(282))/6+parseInt(e(270))/7*(parseInt(e(274))/8))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(298)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(t,n){const e=$();return(U=function(t,n){return e[t-=239]})(t,n)}!function(){N(this,(function(){const t=U,n=new RegExp(t(279)),e=new RegExp(t(242),"i"),o=Y(t(286));n[t(322)](o+t(310))&&e[t(322)](o+t(317))?Y():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(298)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function $(){const t=["log","center","setUsage","invert","Matrix4","warn","push","getX","exception","28uVURmy","gger","intersectsBox","setX","6267536qAeVFl","bind","trace","length","info","function *\\( *\\)","6581540rMFggM","setZ","3228762xGGRWx","7948930deHINQ","controls","counter","init","getZ","action","setFromCamera","BufferAttribute","#023249","normal","生成模型","targetMesh","index","3588280pJeBOm","click","apply","setScalar","color","radius","call","geometry","1121826MIpxjj","value","点击按钮","firstHitOnly","TresSphereGeometry","fill","chain","attributes","__proto__","console","visible","count","TresMesh","input","setAttribute","setY","containsPoint","material","test","table","intersectObject","point","Vector3","getY","copy","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","stateObject","error","return (function() ","computeBoundsTree","MeshStandardMaterial","position","Mesh","TresMeshStandardMaterial","targetMesh.value init","3151650QtoPdk","string","disposeBoundsTree","toString","constructor","active",'{}.constructor("return this")( )',"boundsTree"];return($=function(){return t})()}W(void 0,(function(){const t=U,n=function(){const t=U;let n;try{n=Function(t(246)+t(259)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(313)]||{},o=[t(261),t(266),t(278),t(245),t(269),t(323),t(276)];for(let r=0;r<o.length;r++){const n=W[t(257)].prototype[t(275)](W),s=o[r],i=e[s]||n;n[t(312)]=W[t(275)](W),n[t(256)]=i[t(256)][t(275)](i),e[s]=n}}))();const D=[P(303),P(321)],q=[A(P(308),{args:[1,40,40]},null,-1),A(P(251),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)],H=[P(303)],K=[A(P(251),{color:P(291),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)],Q=b({__name:"model",props:{controls:{}},async setup(o){const r=P;let s,b;const k=o;(()=>{const t=U;p[t(241)][t(247)]=y,p[t(241)][t(255)]=w,c[t(250)].prototype.raycast=j})();const z=([s,b]=_((()=>e(f,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,b(),s),F=new(c[r(248)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),B=new Uint8Array(3*z[r(311)][r(249)].count);B[r(309)](255);const O=new(c[r(290)])(B,3,!0);O[r(263)](u),z[r(318)](r(300),O);const C=I(null),X=I(null),Z=I(!1),E=I(-1),S=I(.2),L=new a,{camera:N,raycaster:W}=t(),$=15/255,Q=78/255,Y=85/255;let J=null;v((()=>{const t=r;C[t(305)]&&(console[t(261)](t(252),C[t(305)]),C[t(305)][t(303)][t(247)](),J=z[t(260)],((t,n,e,o,r,s)=>{const c=G;window[c(366)](c(380),(e=>{const o=c;t.x=e.clientX/window[o(359)]*2-1,t.y=-e.clientY/window.innerHeight*2+1,n[o(379)]=!0})),window[c(366)]("pointerdown",(u=>{const a=c;t.x=u[a(339)]/window.innerWidth*2-1,t.y=-u[a(354)]/window[a(355)]*2+1,o[a(379)]=u[a(343)];const l=new i;l[a(342)](t,e[a(379)]),l.firstHitOnly=!0;const p=l.intersectObject(r[a(379)],!0);n[a(379)]=!0,s[a(368)]=0===p[a(351)]}),!0),window[c(366)](c(382),(t=>{const e=c;o.value=-1,t[e(350)]===e(370)&&(n[e(379)]=!1)}),!0)})(L,Z,N,E,C,k[t(284)].value))}));const{onLoop:V}=n();V((()=>{const t=r,n=z[t(295)];if(X[t(305)])if(k[t(284)].value[t(258)]||!Z[t(305)])X[t(305)][t(314)]=!1;else{X[t(305)].scale[t(299)](S[t(305)]),W[t(305)][t(289)](L,N[t(305)]),W[t(305)][t(307)]=!0;const e=W[t(305)][t(324)](C[t(305)],!0);if(e[t(277)]){X[t(305)].position.copy(e[0][t(325)]),k.controls[t(305)].enabled=!1,X[t(305)][t(314)]=!0;const o=new(c[t(265)]);o[t(240)](C[t(305)].matrixWorld)[t(264)]();const r=new l;r[t(262)].copy(X[t(305)].position).applyMatrix4(o),r[t(301)]=100*S.value;const s=[],i=new(c[t(326)]);if(null==J||J.shapecast({intersectsBounds:n=>{const e=t,o=r[e(272)](n),{min:s,max:c}=n;if(o){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let o=0;o<=1;o++)if(i.set(0===t?s.x:c.x,0===n?s.y:c.y,0===o?s.z:c.z),!r[e(320)](i))return h;return d}return o?h:m},intersectsTriangle:(t,n,e)=>{if(e||t.intersectsSphere(r)){const t=3*n;s.push(t,t+1,t+2)}return!1}}),0===E[t(305)]||2===E.value){let e=1,o=1,r=1;0===E[t(305)]&&(e=$,o=Q,r=Y);for(let i=0,c=s.length;i<c;i++){const c=n[t(268)](s[i]);O[t(273)](c,e),O[t(319)](c,o),O[t(281)](c,r)}O.needsUpdate=!0}}else X[t(305)][t(314)]=!1,k[t(284)][t(305)].enabled=!0}}));const tt=(new g).addButton({title:r(306),label:r(293)}),nt=new p;return tt.on(r(297),(()=>{const t=r,n=[],e=[];for(let r=0;r<O[t(315)];r++)O[t(268)](r)===$&&O[t(239)](r)===Q&&O[t(287)](r)===Y&&(n.push(z[t(311)][t(249)].getX(r),z[t(311)][t(249)].getY(r),z.attributes[t(249)][t(287)](r)),e[t(267)](z[t(311)][t(292)].getX(r),z[t(311)][t(292)][t(239)](r),z[t(311)][t(292)][t(287)](r)));const o=new Float32Array(n);nt[t(318)](t(249),new(c[t(290)])(o,3)),nt[t(318)](t(292),new(c[t(290)])(o,3))})),(t,n)=>{const e=r;return x(),M(R,null,[A(e(316),{ref_key:e(294),ref:C,geometry:T(z),scale:.005,material:T(F)},null,8,D),A("TresMesh",{ref_key:"brushMesh",ref:X,visible:!1},q,512),A(e(316),{geometry:T(nt),position:[-2,-2,2],scale:.005},K,8,H)],64)}}});function Y(t){function n(t){const e=U;if(typeof t===e(254))return function(t){}[e(257)]("while (true) {}")[e(298)](e(285));1!==(""+t/t)[e(277)]||t%20==0?function(){return!0}[e(257)](e(243)+e(271))[e(302)](e(288)):function(){return!1}[e(257)]("debu"+e(271))[e(298)](e(244)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const J=nt;!function(t,n){const e=nt,o=rt();for(;;)try{if(803625===-parseInt(e(337))/1+parseInt(e(304))/2+parseInt(e(342))/3*(-parseInt(e(336))/4)+parseInt(e(298))/5*(parseInt(e(322))/6)+parseInt(e(339))/7*(-parseInt(e(331))/8)+parseInt(e(294))/9*(-parseInt(e(328))/10)+parseInt(e(300))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=nt,n=new RegExp(t(343)),e=new RegExp(t(297),"i"),o=it(t(312));n.test(o+t(308))&&e.test(o+t(311))?it():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(302)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function nt(t,n){const e=rt();return(nt=function(t,n){return e[t-=294]})(t,n)}tt(void 0,(function(){const t=nt,n=function(){const t=nt;let n;try{n=Function(t(332)+t(341)+");")()}catch(e){n=window}return n}(),e=n[t(338)]=n.console||{},o=[t(324),t(340),t(344),"error",t(305),t(321),t(306)];for(let r=0;r<o[t(303)];r++){const n=tt.constructor[t(296)][t(318)](tt),s=o[r],i=e[s]||n;n[t(345)]=tt[t(318)](tt),n[t(307)]=i[t(307)].bind(i),e[s]=n}}))();const et=A(J(319),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1),ot=A(J(330),{intensity:1},null,-1);function rt(){const t=["debu","bind","TresPerspectiveCamera","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","table","642ZLeNmt","string","log","while (true) {}","collectTriangles","constructor","4990DptNVi","neg-x.jpg","TresAmbientLight","158216DLaqly","return (function() ","counter","gger","pos-x.jpg","4Jgmhpi","1224090KgXEdl","console","553RFMjUa","warn",'{}.constructor("return this")( )',"3146151cUMjUB","function *\\( *\\)","info","__proto__","18765QFgutN","action","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","41505FoaOGA","controlsRef","42887163iTzADR","value","apply","length","1784380PQMGKm","exception","trace","toString","chain","pos-y.jpg","pos-z.jpg","input","init","stateObject","TresCanvas","controls","neg-y.jpg"];return(rt=function(){return t})()}const st=b({__name:J(326),setup(t){const n=k({clearColor:"#999999",antialias:!0}),e=k({autoRotate:!1}),i=I(null);return(t,c)=>{const u=nt,a=z(u(314));return x(),M(R,null,[F(T(r)),F(a,O(n,{"window-size":""}),{default:B((()=>[et,F(T(o),O({ref_key:u(299),ref:i},e),null,16),ot,(x(),C(X,null,{default:B((()=>[F(Q,{controls:i[u(301)]},null,8,[u(315)])])),_:1})),(x(),C(X,null,{default:B((()=>[F(T(s),{background:!1,files:[u(335),u(329),u(309),u(316),u(310),"neg-z.jpg"],path:u(320)})])),_:1}))])),_:1},16)],64)}}});function it(t){function n(t){const e=nt;if(typeof t===e(323))return function(t){}[e(327)](e(325))[e(302)](e(333));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(317)+e(334)).call(e(295)):function(){return!1}[e(327)](e(317)+e(334)).apply(e(313)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{st as default};

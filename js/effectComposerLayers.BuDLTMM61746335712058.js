import{m as e,e as s,S as a,a as r}from"./@tresjs.CIKSfeCC1746335712058.js";import{c9 as l,ca as n,a as t,cb as o}from"./three.Bj3hPI0l1746335712058.js";import{d as u,b as i,a3 as v,H as c,o as m,j as f,J as p,u as d,F as y,h,e as T,f as _}from"./@vue.DK6ok9LJ1746335712058.js";import"./postprocessing.Dxg1zmor1746335712058.js";import"./@vueuse.BtSShokC1746335712058.js";const g=u({__name:"ecLayers",setup(r){const{camera:u,renderer:h,scene:T,sizes:_}=e(),g=i(),j=i(),w=i();let x=null;const M=0,k=.972,B=.21;v((()=>{g.value&&g.value.instance.layers.set(0),j.value&&j.value.layers.set(1),w.value&&w.value.layers.set(2),_.width.value&&((e,s,a,r,u)=>{const i=new l(e,s),v=new n(new t(r,u),k,B,M);x=new o(a),x.addPass(i),x.addPass(v)})(T.value,u.value,h.value,_.width.value,_.height.value)}));const{onLoop:C}=s();return C((()=>{x&&u.value&&(h.value.clear(),u.value.layers.set(1),x.render(),h.value.clearDepth(),u.value.layers.set(0),h.value.render(T.value,u.value))})),(e,s)=>(m(),c(y,null,[f(d(a),{ref_key:"normalBox",ref:g,args:[1,1,1],color:"orange",position:[3,2,1]},null,512),p("TresMesh",{ref_key:"shineBox",ref:j,position:[0,2,-4]},s[0]||(s[0]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)]),512),p("TresMesh",{ref_key:"filmBox",ref:w,position:[1,2,3]},s[1]||(s[1]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)]),512)],64))}}),j=u({__name:"effectComposerLayers",setup(e){const s=i();return v((()=>{if(s.value){s.value.context.renderer.value.autoClear=!1}})),(e,a)=>{const l=h("TresCanvas");return m(),T(l,{ref_key:"tcRef",ref:s,renderMode:"manual","window-size":""},{default:_((()=>[a[0]||(a[0]=p("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),a[1]||(a[1]=p("TresAmbientLight",{intensity:1},null,-1)),f(d(r)),a[2]||(a[2]=p("TresGridHelper",{args:[10,10]},null,-1)),f(g)])),_:1},512)}}});export{j as default};

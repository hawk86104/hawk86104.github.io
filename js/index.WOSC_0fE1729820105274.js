var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aO as v,aP as m,A as g,bb as _,C as y,a0 as x,W as b,n as I,o as S,c3 as w,c4 as M,K as E,f as R,V as A,g as T,_ as D,m as z,ba as P,k as C,bz as O,d as F,aj as k,B,a as j,aN as U,e as N,M as L,at as H,a9 as Z,U as G,h as W,a6 as V}from"./three.0W5n8UBO1729820105274.js";import{p as $,N as q,U as Y}from"./@tresjs.S6PXiQcG1729820105274.js";import{R as K}from"./three-stdlib.ilpWY7x61729820105274.js";import{x as J,b as Q,w as X,a as nn,u as tn,d as en,V as rn,a4 as on,o as an,E as cn,H as sn,J as un,a0 as ln,a7 as fn,a3 as pn,q as dn,f as hn,L as vn,a8 as mn,r as gn,N as _n,Y as yn,t as xn,F as bn,a5 as In,m as Sn}from"./@vue.bvMz0l_u1729820105274.js";import{M as wn,a as Mn,C as En}from"./@pmndrs.4OReEEqc1729820105274.js";import{o as Rn}from"./object-hash.O5Web0p21729820105274.js";var An=Dn;!function(n,t){for(var e=Dn,r=Fn();;)try{if(920762===-parseInt(e(450))/1*(-parseInt(e(444))/2)+-parseInt(e(442))/3*(parseInt(e(415))/4)+-parseInt(e(436))/5+parseInt(e(425))/6+parseInt(e(423))/7*(parseInt(e(431))/8)+-parseInt(e(419))/9*(-parseInt(e(447))/10)+-parseInt(e(429))/11*(-parseInt(e(435))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(451)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){var e=Fn();return(Dn=function(n,t){return e[n-=413]})(n,t)}!function(){Tn(this,(function(){var n=Dn,t=new RegExp(n(449)),e=new RegExp(n(437),"i"),r=On(n(454));t[n(417)](r+n(455))&&e[n(417)](r+n(448))?On():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(451)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zn(void 0,(function(){var n,t=Dn;try{n=Function(t(424)+t(428)+");")()}catch(s){n=window}for(var e=n[t(421)]=n[t(421)]||{},r=[t(443),"warn",t(445),"error",t(434),"table",t(440)],o=0;o<r[t(441)];o++){var i=zn[t(427)][t(422)][t(426)](zn),a=r[o],c=e[a]||i;i.__proto__=zn[t(426)](zn),i[t(439)]=c[t(439)][t(426)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=Dn;super(),this[n(418)]=null,this.virtualScene=new u}[An(413)](...n){var t=An;return this[t(418)][t(413)](...n),this}destructor(){var n=An;this[n(418)].traverse((t=>{var e=n;t instanceof l&&(t[e(430)][e(438)](),t[e(446)][e(438)](),t[e(446)][e(453)]&&t[e(446)][e(453)].dispose(),this[e(418)][e(416)](t))})),this[n(418)]=null}}const Cn=Pn;function On(n){function t(n){var e=Dn;if("string"==typeof n)return function(n){}[e(427)](e(433))[e(451)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(427)]("debu"+e(420))[e(452)](e(414)):function(){return!1}.constructor(e(432)+e(420))[e(451)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Fn(){var n=["action","52pRTbed","remove","test","virtualScene","1611yGkgCt","gger","console","prototype","523110QOLwbS","return (function() ","1353600ppFTfp","bind","constructor",'{}.constructor("return this")( )',"11oDumOS","geometry","48NsEOXV","debu","while (true) {}","exception","39320772YclveM","7312415DDotEf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","toString","trace","length","393999feaMbm","log","992LhiHys","info","material","7010WTXdQN","input","function *\\( *\\)","29RaLQwz","apply","call","map","init","chain","add"];return(Fn=function(){return n})()}function kn(){const n=["console","toString","venice/venice_sunset_1k.hdr","2565532IwXxpo","outdoor/outdoor_umbrellas_1k.hdr","stateObject","chain","23140700FfNmac","indoor/abandoned_games_room_02_1k.hdr","studio/poly_haven_studio_1k.hdr",'{}.constructor("return this")( )',"log","length","debu","917298Wxpury","function *\\( *\\)","constructor","1044130FnNHNF","outdoor/snowy_forest_path_01_1k.hdr","while (true) {}","outood/mossy_forest_1k.hdr","action","189yKFjpL","test","5sdAlEs","city/canary_wharf_1k.hdr","__proto__","info","indoor/small_hangar_01_1k.hdr","apply","6927udSgVo","bind","input","error","kiara/kiara_1_dawn_1k.hdr","table","174JXIfKA","return (function() ","4150846xVzpKo","279608QItdto","prototype","outdoor/satara_night_1k.hdr","gger"];return(kn=function(){return n})()}function Bn(n,t){const e=kn();return(Bn=function(n,t){return e[n-=255]})(n,t)}const jn=Bn;!function(n,t){const e=Bn,r=kn();for(;;)try{if(746392===parseInt(e(283))/1+-parseInt(e(259))/2*(-parseInt(e(296))/3)+-parseInt(e(269))/4*(-parseInt(e(290))/5)+-parseInt(e(280))/6+parseInt(e(261))/7+parseInt(e(262))/8*(parseInt(e(288))/9)+-parseInt(e(273))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(295)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=Bn,t=new RegExp(n(281)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Hn("init");t[n(289)](r+n(272))&&e[n(289)](r+n(255))?Hn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(295)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nn(void 0,(function(){const n=Bn;let t;try{t=Function(n(260)+n(276)+");")()}catch(o){t=window}const e=t[n(266)]=t[n(266)]||{},r=[n(277),"warn",n(293),n(256),"exception",n(258),"trace"];for(let i=0;i<r[n(278)];i++){const t=Nn[n(282)][n(263)][n(297)](Nn),o=r[i],a=e[o]||t;t[n(292)]=Nn[n(297)](Nn),t[n(267)]=a[n(267)].bind(a),e[o]=t}}))();const Ln={sunset:jn(268),studio:jn(275),city:jn(291),umbrellas:jn(270),night:jn(264),forest:jn(286),snow:jn(284),dawn:jn(257),hangar:jn(294),urban:jn(274),modern:"city/modern_buildings_2_1k.hdr",shangai:"city/shanghai_bund_1k.hdr"};function Hn(n){function t(n){const e=Bn;if("string"==typeof n)return function(n){}[e(282)](e(285))[e(295)]("counter");1!==(""+n/n)[e(278)]||n%20==0?function(){return!0}.constructor(e(279)+e(265)).call(e(287)):function(){return!1}[e(282)]("debugger")[e(295)](e(271)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Zn=$n;!function(n,t){const e=$n,r=Vn();for(;;)try{if(198355===parseInt(e(471))/1+parseInt(e(433))/2+-parseInt(e(435))/3*(parseInt(e(445))/4)+parseInt(e(454))/5+-parseInt(e(444))/6*(-parseInt(e(436))/7)+parseInt(e(451))/8*(parseInt(e(443))/9)+-parseInt(e(470))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=$n,t=new RegExp(n(434)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Yn(n(462));t[n(446)](r+"chain")&&e[n(446)](r+n(473))?Yn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(){const n=["387569VRZkns","__proto__","input","toString","backgroundBlurriness","80596lmMwdX","function *\\( *\\)","228wXqEif","1533637Xcvfqp","mapping","stateObject","gger","string","warn","action","2700VHwFTX","6lTPkfx","10952ZnZDqZ","test","Preset must be one of: ","log","Failed to load environment map: ","error","8312SjVDEy","call","setPath","467855aMFWAh","isArray","isColor","environment","value","table","debu","bind","init","length","while (true) {}","background","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","counter","constructor","apply","6457860FQUvkB"];return(Vn=function(){return n})()}function $n(n,t){const e=Vn();return($n=function(n,t){return e[n-=432]})(n,t)}Wn(void 0,(function(){const n=$n;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(448),n(441),"info",n(450),"exception",n(459),"trace"];for(let i=0;i<r[n(463)];i++){const t=Wn[n(468)].prototype.bind(Wn),o=r[i],a=e[o]||t;t[n(472)]=Wn[n(461)](Wn),t[n(474)]=a[n(474)][n(461)](a),e[o]=t}}))();const qn=Zn(466);function Yn(n){function t(n){const e=$n;if(typeof n===e(440))return function(n){}[e(468)](e(464))[e(469)](e(467));1!==(""+n/n).length||n%20==0?function(){return!0}[e(468)](e(460)+"gger")[e(452)](e(442)):function(){return!1}[e(468)](e(460)+e(439))[e(469)](e(438)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Qn,r=Xn();for(;;)try{if(790862===-parseInt(e(489))/1+-parseInt(e(471))/2*(-parseInt(e(505))/3)+-parseInt(e(496))/4+parseInt(e(508))/5+-parseInt(e(467))/6+-parseInt(e(503))/7*(parseInt(e(478))/8)+parseInt(e(502))/9*(parseInt(e(494))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Qn,t=new RegExp(n(497)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=tt(n(482));t[n(485)](r+n(495))&&e[n(485)](r+n(513))?tt():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=Xn();return(Qn=function(n,t){return e[n-=467]})(n,t)}function Xn(){const n=["prototype","toString","info","string","background","946568SCxsij","update","symbol","constructor","init","type","dispose","test","log","default","value","1388759rsYQdc","warn","exception","gger","bind","10ipsBkn","chain","4941024JRXWse","function *\\( *\\)","environment","return (function() ","frames","magFilter","32380146WmeIMP","63qeDFIK","near","3DAsZuH","stateObject","while (true) {}","4174720srxCOw","action","useDefaultScene","debu","$slots","input","minFilter","texture","trace","envSence","console","2400144gcdEPV","apply","destructor","TresEnvSence","894104RgsdtO",'{}.constructor("return this")( )'];return(Xn=function(){return n})()}Jn(void 0,(function(){const n=Qn,t=function(){const n=Qn;let t;try{t=Function(n(499)+n(472)+");")()}catch(e){t=window}return t}(),e=t[n(518)]=t[n(518)]||{},r=[n(486),n(490),n(475),"error",n(491),"table",n(516)];for(let o=0;o<r.length;o++){const t=Jn[n(481)][n(473)].bind(Jn),i=r[o],a=e[i]||t;t.__proto__=Jn[n(493)](Jn),t[n(474)]=a[n(474)].bind(a),e[i]=t}}))();const nt=en({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Qn;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=Q(null),x=null;const b=Q(null);rn((()=>{var n,t;const e=Qn;null==(n=b[e(488)])||n[e(469)](),null==(t=y[e(488)])||t[e(484)]()}));const{onBeforeLoop:I}=Y();let S=1;I((()=>{const n=Qn;x&&b.value&&y[n(488)]&&(i[n(500)]===1/0||S<i.frames)&&(i[n(510)]?x[n(479)](s[n(488)],u[n(488)]):x[n(479)](s[n(488)],fn(b[n(488)].virtualScene)),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Zn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=Q([]),path:s=Q(""),background:u}=J(n);X(n,(()=>{o()}));const l=Q(null),h=nn((()=>Array[e(455)](c.value))),v=nn((()=>h.value?f:K));return X([c,s],(async([n,t])=>{const r=e;if(n&&n[r(463)]>0&&!(null==i?void 0:i[r(458)])){try{l.value=await q(v.value,h[r(458)]?[...tn(n)]:tn(n),(n=>{t&&n.setPath(tn(t))}))}catch(o){throw new Error(r(449)+o)}l[r(458)]&&(l[r(458)][r(437)]=h[r(458)]?p:d)}}),{immediate:!0}),X(l,(n=>{const t=e;r.value&&n&&(r[t(458)][t(457)]=n)}),{immediate:!0}),X([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t.value)?t[i(458)].texture:o,a=r[i(458)].background;!(null==a?void 0:a[i(456)])&&(a=void 0),r[i(458)][i(465)]=n?e:a}}),{immediate:!0}),X((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(458)]&&n&&(r.value[t(432)]=n)}),{immediate:!0}),X((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Ln){const e=qn,i=Ln[n];try{l[t(458)]=await q(K,i,(n=>{e&&n[t(453)](e)}))}catch(r){throw new Error(t(449)+r)}l[t(458)]&&l[t(458)]&&(l[t(458)][t(437)]=d),o()}else if(n&&!(n in Ln))throw new Error(t(447)+Object.keys(Ln).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u[t(488)][t(498)]=n[t(515)],i[t(477)]&&(u[t(488)][t(477)]=n[t(515)])):(u[t(488)].environment=w.value,i[t(477)]&&(u[t(488)][t(477)]=w.value))};X(w,(n=>{const t=Qn;y[t(488)]&&M(y[t(488)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const E=()=>{var n;const t=Qn;null==(n=y[t(488)])||n[t(484)](),y[t(488)]=new v(i.resolution),x=new m(i[t(504)],i.far,y[t(488)]),i[t(510)]?(y[t(488)].texture.type=g,y[t(488)][t(515)].generateMipmaps=!1,y[t(488)][t(515)][t(514)]=_,y[t(488)][t(515)][t(501)]=_):y[t(488)][t(515)][t(483)]=h,M(y[t(488)])};return X((()=>ln()[e(487)]),(n=>{var t,r;const o=e;n&&(!y[o(488)]||y[o(488)].texture[o(483)]!==h)&&(l=n(),Array.isArray(l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(483)])!==o(480))?E():(null==(r=y.value)||r[o(484)](),y[o(488)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(488)]=w,X((()=>i[e(510)]),(n=>{y[e(488)]&&E()})),(n,t)=>{const r=e;return tn(y)?(an(),cn(r(470),{key:0,ref_key:r(517),ref:b},[sn(n[r(512)],r(487))],512)):un("",!0)}}});function tt(n){function t(n){const e=Qn;if(typeof n===e(476))return function(n){}[e(481)](e(507)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(511)+e(492)).call(e(509)):function(){return!1}[e(481)](e(511)+e(492))[e(468)](e(506)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=lt;!function(n,t){const e=lt,r=it();for(;;)try{if(708980===parseInt(e(293))/1+parseInt(e(256))/2+-parseInt(e(250))/3+-parseInt(e(257))/4+parseInt(e(266))/5+parseInt(e(284))/6+-parseInt(e(254))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=lt,t=new RegExp(n(248)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=pt(n(280));t[n(270)](r+"chain")&&e.test(r+n(261))?pt():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function it(){const n=["gger","TresPlaneGeometry","needsUpdate","color","toString","action","stateObject","init",'{}.constructor("return this")( )',"map","from","5734416IYFIsh","intensity","__proto__","trace","TresRingGeometry","console","index","debu","constructor","932142slsNjO","warn","function *\\( *\\)","apply","3122865mLvgLf","multiplyScalar","return (function() ","while (true) {}","2919798KTQUzu","prototype","1814714IqtStt","5110268JYmKxk","bind","set","side","input","circle","rect","ring","material","3246905jvGjaN","string","length","error","test","value","toneMapped"];return(it=function(){return n})()}ot(void 0,(function(){const n=lt;let t;try{t=Function(n(252)+n(281)+");")()}catch(o){t=window}const e=t[n(289)]=t.console||{},r=["log",n(294),"info",n(269),"exception","table",n(287)];for(let i=0;i<r[n(268)];i++){const t=ot.constructor[n(255)][n(258)](ot),o=r[i],a=e[o]||t;t[n(286)]=ot[n(258)](ot),t[n(277)]=a[n(277)][n(258)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=["toneMapped",et(282),et(260),et(276)];function lt(n,t){const e=it();return(lt=function(n,t){return e[n-=248]})(n,t)}const ft=en({__name:et(290),props:{args:{default:null},from:{default:et(263)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=Q();return pn((()=>{const n=lt;r[n(271)]&&(r[n(271)][n(276)].multiplyScalar(e[n(285)]),r[n(271)][n(275)]=!0)})),X((()=>e[t(276)]),(n=>{const o=t;r[o(271)]&&(r[o(271)][o(276)][o(259)](n),r.value[o(276)][o(251)](e[o(285)]),r[o(271)][o(275)]=!0)})),dn((()=>{})),(n,o)=>{const i=t;return an(),cn("TresMesh",null,[e[i(283)]===i(262)?(an(),cn(i(288),at)):e[i(283)]===i(264)?(an(),cn(i(288),ct)):"rect"===e.from?(an(),cn(i(274),st)):(an(),hn(e[i(283)],{key:3,args:e})),vn("TresMeshBasicMaterial",{ref_key:i(265),ref:r,toneMapped:n[i(272)],map:n[i(282)],side:tn(x),color:n[i(276)]},null,8,ut)])}}});function pt(n){function t(n){const e=lt;if(typeof n===e(267))return function(n){}[e(292)](e(253))[e(249)]("counter");1!==(""+n/n)[e(268)]||n%20==0?function(){return!0}[e(292)]("debugger").call(e(278)):function(){return!1}[e(292)](e(291)+e(273))[e(249)](e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function dt(){const n=["exception","8NsZaGk","bind","dispose","prototype","error","612027CRqyRu","height","apply","clear","counter","toString","table","type","trace","action","test","call","while (true) {}","86094kYsknY","value","181604bAtOPa","warn","init","240EGzPZn","function *\\( *\\)","constructor","6192430IoTnJb","log","1981790CBWaLz","length","783243rhqBbe","2203019mtzgCi","depthTexture","gger","setRenderTarget","console","24lSThEI","info",'{}.constructor("return this")( )',"string","return (function() ","width","stateObject","__proto__","input"];return(dt=function(){return n})()}!function(n,t){const e=mt,r=dt();for(;;)try{if(974120===parseInt(e(272))/1+parseInt(e(262))/2+-parseInt(e(260))/3*(parseInt(e(265))/4)+-parseInt(e(270))/5*(-parseInt(e(278))/6)+-parseInt(e(273))/7+-parseInt(e(288))/8*(parseInt(e(293))/9)+parseInt(e(268))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(295)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=mt,t=new RegExp(n(266)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_t(n(264));t[n(303)](r+"chain")&&e[n(303)](r+n(286))?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(295)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n,t){const e=dt();return(mt=function(n,t){return e[n-=259]})(n,t)}function gt(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?J(n):J(gn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=mt;null==(n=t.value)||n[a(290)](),t[a(261)]=new b((null==r?void 0:r[a(261)])||p[a(283)][a(261)],(null==e?void 0:e[a(261)])||p[a(294)][a(261)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(261)])),(null==i?void 0:i[a(261)])&&(t[a(261)][a(274)]=new S((null==r?void 0:r[a(261)])||p[a(283)][a(261)],(null==e?void 0:e[a(261)])||p[a(294)][a(261)]),t[a(261)][a(274)].format=w,t.value.depthTexture[a(300)]=M)})),s((()=>{const n=mt;(null==a?void 0:a[n(261)])&&(l.value[n(276)](fn(t[n(261)])),l.value[n(296)](),l[n(261)].render(fn(f.value),fn(u[n(261)])),l[n(261)][n(276)](null))})),_n((()=>{var n;const e=mt;null==(n=t.value)||n[e(290)]()})),t}function _t(n){function t(n){const e=mt;if(typeof n===e(281))return function(n){}.constructor(e(259)).apply(e(297));1!==(""+n/n)[e(271)]||n%20==0?function(){return!0}[e(267)]("debu"+e(275))[e(304)](e(302)):function(){return!1}[e(267)]("debu"+e(275))[e(295)](e(284)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function yt(){const n=["value","toString","229220zUAlgW","table","counter","side","material","debu","texture","setRenderTarget","action","toneMapping","1194284JAkLbF","time","info","backsideThickness","buffer","apply","1545732KhKOos","string","1749165WyQPyJ","6wblmvU","envMapIntensity","36Uydtcd","input","while (true) {}","warn","background","test","2987472PKgEkO","trace","length","thickness","fboResolution","stateObject","function *\\( *\\)","766uayqkm","prototype","uuid","549DciBwk","isMesh","1210048IAXaUh","init","gger",'{}.constructor("return this")( )',"exception","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","console","__proto__","render","bind","backside"];return(yt=function(){return n})()}vt(void 0,(function(){const n=mt,t=function(){const n=mt;let t;try{t=Function(n(282)+n(280)+");")()}catch(e){t=window}return t}(),e=t[n(277)]=t[n(277)]||{},r=[n(269),n(263),n(279),n(292),n(287),n(299),n(301)];for(let o=0;o<r.length;o++){const t=vt[n(267)][n(291)].bind(vt),i=r[o],a=e[i]||t;t[n(285)]=vt[n(289)](vt),t.toString=a[n(298)][n(289)](a),e[i]=t}}))();const xt=Mt;!function(n,t){const e=Mt,r=yt();for(;;)try{if(281747===parseInt(e(208))/1*(parseInt(e(205))/2)+-parseInt(e(187))/3+parseInt(e(181))/4+-parseInt(e(189))/5*(parseInt(e(190))/6)+parseInt(e(210))/7+parseInt(e(198))/8+parseInt(e(192))/9*(parseInt(e(171))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(186)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=Mt,t=new RegExp(n(204)),e=new RegExp(n(216),"i"),r=Et(n(211));t.test(r+"chain")&&e[n(197)](r+n(193))?Et():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(186)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=Mt,t=function(){const n=Mt;let t;try{t=Function("return (function() "+n(213)+");")()}catch(e){t=window}return t}(),e=t[n(218)]=t[n(218)]||{},r=[n(217),n(195),n(183),"error",n(214),n(172),n(199)];for(let o=0;o<r[n(200)];o++){const t=It[n(215)][n(206)][n(167)](It),i=r[o],a=e[i]||t;t[n(219)]=It[n(167)](It),t[n(170)]=a.toString[n(167)](a),e[i]=t}}))();const St=["buffer",xt(174)],wt=en({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=Y(),p=gt({width:u.fboResolution,height:u[e(202)],isLoop:!1}),d=gt({width:u.fboResolution,height:u[e(202)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(169)]=function(n,t){let e;return n.traverse((n=>{const r=Mt;n[r(209)]&&n[r(175)]&&n[r(175)][r(207)]===t&&(e=n)})),e}(i[n(169)],r[n(169)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(169)][t(182)]=n,r.value.buffer===d[t(169)].texture&&s[t(169)]&&(m=a[t(169)][t(180)],h=i[t(169)][t(196)],v=r[t(169)][t(191)],g=s.value[t(175)].side,s[t(169)].material=l,u[t(168)]&&(a.value[t(178)](p[t(169)]),a[t(169)][t(166)](i[t(169)],c[t(169)]),s[t(169)].material=r.value,s.value[t(175)][t(201)]=u[t(184)],s[t(169)][t(175)][t(185)]=p[t(169)][t(177)],s[t(169)][t(175)].side=E,s[t(169)][t(175)].envMapIntensity=0),a[t(169)][t(178)](d[t(169)]),a[t(169)][t(166)](i[t(169)],c[t(169)]),s[t(169)][t(175)][t(185)]=d[t(169)][t(177)],s[t(169)][t(175)]=r[t(169)],s[t(169)][t(175)].thickness=u[t(201)],s[t(169)][t(175)][t(174)]=g,s.value[t(175)][t(191)]=v,i[t(169)].background=h,a[t(169)][t(178)](null),a[t(169)][t(180)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:tn(d)[o(177)],side:tn(x)},null,8,St)}}});function Mt(n,t){const e=yt();return(Mt=function(n,t){return e[n-=166]})(n,t)}function Et(n){function t(n){const e=Mt;if(typeof n===e(188))return function(n){}.constructor(e(194))[e(186)](e(173));1!==(""+n/n)[e(200)]||n%20==0?function(){return!0}[e(215)]("debu"+e(212)).call(e(179)):function(){return!1}[e(215)](e(176)+"gger")[e(186)](e(203)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=zt,r=Tt();for(;;)try{if(770440===parseInt(e(284))/1+parseInt(e(317))/2*(-parseInt(e(288))/3)+parseInt(e(315))/4+-parseInt(e(276))/5*(-parseInt(e(321))/6)+parseInt(e(318))/7+-parseInt(e(290))/8+-parseInt(e(283))/9*(parseInt(e(296))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rt(this,(function(){const n=zt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(309),"i"),r=Pt(n(278));t[n(266)](r+n(282))&&e[n(266)](r+n(319))?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["set","action","__proto__","disableY","3237748IPFDKE","warn","300KgpMan","8859375isDWoj","input","apply","3039210snltOS","test","back",'{}.constructor("return this")( )',"info","error","getCenter","counter","default","constructor","toString","15VGDDGb","stateObject","init","debu","call","gref","chain","47259GAgjlj","427418MDnofI","TresGroup","log","$slots","6861kUtXKk","max","2180744WbIbRu","outer","disableX","left","trace","length","5020nHMSVd","matrixWorld","console","min","while (true) {}","disable","disableZ","top","value","gger","bind","position","right","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","inner"];return(Tt=function(){return n})()}At(void 0,(function(){const n=zt;let t;try{t=Function("return (function() "+n(268)+");")()}catch(o){t=window}const e=t.console=t[n(298)]||{},r=[n(286),n(316),n(269),n(270),"exception","table",n(294)];for(let i=0;i<r.length;i++){const t=At[n(274)].prototype[n(306)](At),o=r[i],a=e[o]||t;t[n(313)]=At[n(306)](At),t[n(275)]=a[n(275)][n(306)](a),e[o]=t}}))();const Dt=en({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return dn((()=>{const n=zt;if(!r[n(304)])return;if(!o[n(304)])return;r.value[n(297)].identity();const e=(new R).setFromObject(o.value,t.precise),i=new A,a=new T,c=e.max.x-e[n(299)].x,s=e[n(289)].y-e[n(299)].y,u=e[n(289)].z-e[n(299)].z;e[n(271)](i),e.getBoundingSphere(a);const l=t[n(303)]?s/2:t.bottom?-s/2:0,f=t[n(293)]?-c/2:t[n(308)]?c/2:0,p=t.front?u/2:t[n(267)]?-u/2:0;r[n(304)][n(307)][n(311)](t.disable||t[n(292)]?0:-i.x+f,t[n(301)]||t[n(314)]?0:-i.y+l,t[n(301)]||t[n(302)]?0:-i.z+p)})),(n,t)=>{const i=zt;return an(),cn(i(285),{ref_key:i(281),ref:e},[vn("TresGroup",{ref_key:i(291),ref:r},[vn(i(285),{ref_key:i(310),ref:o},[sn(n[i(287)],i(273))],512)],512)],512)}}});function zt(n,t){const e=Tt();return(zt=function(n,t){return e[n-=266]})(n,t)}function Pt(n){function t(n){const e=zt;if("string"==typeof n)return function(n){}.constructor(e(300))[e(320)](e(272));1!==(""+n/n)[e(295)]||n%20==0?function(){return!0}[e(274)](e(279)+e(305))[e(280)](e(312)):function(){return!1}[e(274)]("debugger")[e(320)](e(277)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=jt;!function(n,t){const e=jt,r=Nt();for(;;)try{if(428891===parseInt(e(177))/1+-parseInt(e(171))/2+parseInt(e(143))/3+-parseInt(e(185))/4*(parseInt(e(153))/5)+-parseInt(e(141))/6+-parseInt(e(182))/7+parseInt(e(144))/8*(parseInt(e(159))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(168)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=jt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(151),"i"),r=Lt(n(146));t[n(135)](r+"chain")&&e.test(r+n(155))?Lt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(168)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ft(void 0,(function(){const n=jt;let t;try{t=Function(n(139)+n(147)+");")()}catch(o){t=window}const e=t.console=t[n(167)]||{},r=[n(150),"warn",n(136),n(176),"exception",n(178),n(162)];for(let i=0;i<r[n(156)];i++){const t=Ft[n(157)].prototype.bind(Ft),o=r[i],a=e[o]||t;t.__proto__=Ft[n(161)](Ft),t.toString=a[n(181)][n(161)](a),e[o]=t}}))();const kt=[Ct(174)],Bt=[Ct(174)];function jt(n,t){const e=Nt();return(jt=function(n,t){return e[n-=134]})(n,t)}const Ut=en({__name:Ct(154),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=$(),o=En(r.value,{frames:1/0,resolution:e.resolution,worldRadius:e[t(158)]});o[t(184)][t(164)]=!0;const i=yn(null);X(i,(n=>{const e=t;n&&o[e(148)][e(175)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o.update()})),pn((()=>{const n=t;e[n(166)]&&o[n(184)][n(166)][n(145)](e[n(166)]),e[n(149)]&&(o[n(184)][n(149)]=e[n(149)]),e[n(137)]&&(o[n(184)].backsideIOR=e.backsideIOR),e[n(138)]&&(o[n(184)][n(138)]=e.far),e[n(158)]&&(o[n(184)].worldRadius=e.worldRadius),e[n(180)]&&(o[n(184)][n(180)]=e[n(180)])})),X((()=>e[t(140)]),(n=>{o[t(184)].causticsOnly=n})),X((()=>e.lightSource),(n=>{const e=t;n&&o.params.lightSource instanceof D[e(152)]&&o[e(184)][e(160)][e(145)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(bn,null,[vn("TresGroup",{ref_key:r(134),ref:i},[sn(n.$slots,r(165))],512),vn(r(172),{object:tn(o)[r(134)],position:[0,.003,0]},null,8,kt),vn(r(172),{object:tn(o)[r(142)],visible:!1},null,8,Bt)],64)}}});function Nt(){const n=["2344ZQmChX","set","init",'{}.constructor("return this")( )',"scene","ior","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Vector3","406880SmIlaa","index","input","length","constructor","worldRadius","50850yaKMFw","lightSource","bind","trace","gger","backside","default","color","console","apply","string","stateObject","1356864qQqLrM","primitive","action","object","add","error","702563ivWdxG","table","counter","intensity","toString","5008248cBLglf","call","params","8zgtnpC","group","test","info","backsideIOR","far","return (function() ","causticsOnly","3369450lVbPnq","helper","567303LEWnIJ"];return(Nt=function(){return n})()}function Lt(n){function t(n){const e=jt;if(typeof n===e(169))return function(n){}[e(157)]("while (true) {}")[e(168)](e(179));1!==(""+n/n).length||n%20==0?function(){return!0}[e(157)]("debu"+e(163))[e(183)](e(173)):function(){return!1}[e(157)]("debu"+e(163))[e(168)](e(170)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=358]})(n,t)}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(355683===parseInt(e(378))/1*(-parseInt(e(377))/2)+parseInt(e(397))/3+parseInt(e(394))/4*(-parseInt(e(406))/5)+-parseInt(e(364))/6*(parseInt(e(388))/7)+parseInt(e(412))/8*(parseInt(e(372))/9)+parseInt(e(402))/10+-parseInt(e(362))/11*(parseInt(e(387))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["function *\\( *\\)","; i ++) {\n        offset = (vogelDiskSample(j, ","log","bind","prototype","error","1849463bRASvK","chain","42WtYUMd","programs","properties","ShaderChunk",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","trace","isArray",'{}.constructor("return this")( )',"103950mJzBuo","material","replace","info","input","356228cVtSgV","1HupGpW","toString","return (function() ","apply","length","#if defined( SHADOWMAP_TYPE_PCF )","; i++) {\n        vogelSample = vogelDiskSample(j, ","constructor","compile","12rUwDTY","309883knVbhJ","console","warn","while (true) {}","table","test","24328MnHRyW",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","2033625pEJmuR","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","1718560FZCBXp","shadowmap_pars_fragment","debu","call","370pIyGXM","#ifdef USE_SHADOWMAP","gger","forEach","action","remove","424dGHigR","stateObject","traverse"];return(Gt=function(){return n})()}!function(){Zt(this,(function(){const n=Ht,t=new RegExp(n(415)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$t("init");t[n(393)](r+n(363))&&e[n(393)](r+n(376))?$t():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wt(void 0,(function(){const n=Ht;let t;try{t=Function(n(380)+n(371)+");")()}catch(o){t=window}const e=t[n(389)]=t[n(389)]||{},r=[n(358),n(390),n(375),n(361),"exception",n(392),n(369)];for(let i=0;i<r[n(382)];i++){const t=Wt[n(385)][n(360)][n(359)](Wt),o=r[i],a=e[o]||t;t.__proto__=Wt[n(359)](Wt),t[n(379)]=a[n(379)][n(359)](a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=D[r(367)].shadowmap_pars_fragment;return D[r(367)][r(403)]=D[r(367)][r(403)].replace(r(407),r(400)+t+r(368)+n+r(395)+e+r(416)+e+r(396)+e+r(384)+e+r(401)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(399))[r(374)](r(383),r(398)),(n,t,e)=>{const i=r;D[i(367)][i(403)]=o,function(n,t,e){const r=Ht;t[r(414)]((t=>{const e=r;t[e(373)]&&(Array[e(370)](t.material)?t[e(373)][e(409)]((t=>{const r=e;n[r(366)][r(411)](t),t.dispose()})):(n[e(366)][e(411)](t.material),t.material.dispose()))})),n[r(375)][r(365)][r(382)]=0,n[r(386)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Ht;if("string"==typeof n)return function(n){}[e(385)](e(391))[e(381)]("counter");1!==(""+n/n)[e(382)]||n%20==0?function(){return!0}.constructor(e(404)+e(408))[e(405)](e(410)):function(){return!1}[e(385)](e(404)+"gger")[e(381)](e(413)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Yt;function Yt(n,t){const e=Qt();return(Yt=function(n,t){return e[n-=348]})(n,t)}!function(n,t){const e=Yt,r=Qt();for(;;)try{if(613880===parseInt(e(367))/1*(parseInt(e(353))/2)+-parseInt(e(348))/3+parseInt(e(363))/4+-parseInt(e(369))/5+parseInt(e(352))/6+parseInt(e(374))/7+parseInt(e(379))/8*(parseInt(e(359))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yt(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=Yt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ne("init");t.test(r+"chain")&&e[n(366)](r+"input")?ne():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(){const n=["console","string","8qBCvSM","3503991IbyPxv","apply","toString","error","7131660RCCCfK","78EuiRBj","traverse","trace","table","debu","bind","346779lSTOzr","length","constructor","index","1330272JnJEBi","warn","value","test","12266jXQBAa","dispose","2602030bQEiOL","prototype","material","return (function() ","gger","1849400CEKBnE","info","exception"];return(Qt=function(){return n})()}Jt(void 0,(function(){const n=Yt;let t;try{t=Function(n(372)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(377)]=t[n(377)]||{},r=["log",n(364),n(375),n(351),n(376),n(356),n(355)];for(let i=0;i<r[n(360)];i++){const t=Jt[n(361)][n(370)][n(358)](Jt),o=r[i],a=e[o]||t;t.__proto__=Jt[n(358)](Jt),t.toString=a[n(350)][n(358)](a),e[o]=t}}))();const Xt=en({__name:qt(362),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Yt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(365)],o[t(365)],e[t(365)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(365)][t(354)]((n=>{const e=t;n instanceof l&&n[e(371)][e(368)]()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Yt;if(typeof n===e(378))return function(n){}[e(361)]("while (true) {}").apply("counter");1!==(""+n/n)[e(360)]||n%20==0?function(){return!0}[e(361)](e(357)+e(373)).call("action"):function(){return!1}[e(361)](e(357)+e(373))[e(349)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=oe;!function(n,t){const e=oe,r=ie();for(;;)try{if(171525===parseInt(e(245))/1+-parseInt(e(258))/2+-parseInt(e(277))/3*(-parseInt(e(255))/4)+-parseInt(e(248))/5*(parseInt(e(247))/6)+parseInt(e(240))/7+parseInt(e(273))/8+-parseInt(e(270))/9*(-parseInt(e(281))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(280)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=oe,t=new RegExp(n(278)),e=new RegExp(n(237),"i"),r=se(n(235));t.test(r+"chain")&&e[n(251)](r+n(238))?se():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=ie();return(oe=function(n,t){return e[n-=235]})(n,t)}function ie(){const n=["while (true) {}","table","length","error","halfTexelSize","3357tVPYWS","colorspace_fragment","call","79840mJJtGe",'{}.constructor("return this")( )',"console","copy","6VLWPbT","function *\\( *\\)","constructor","apply","8090MTuihG","log","__proto__","init","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","gger","1078427cSThHv","multiplyScalar","texelSize",">\n        }","bind","32139kGdxmI","encodings_fragment","609498oigJjm","15tdKSrR","counter","setTexelSize","test","set","action","value","279616ocVVzp","replace","return (function() ","322942NfqqMC","warn","debu","kernel","uniforms","trace","stateObject"];return(ie=function(){return n})()}re(void 0,(function(){const n=oe;let t;try{t=Function(n(257)+n(274)+");")()}catch(o){t=window}const e=t[n(275)]=t[n(275)]||{},r=[n(282),n(259),"info",n(268),"exception",n(266),n(263)];for(let i=0;i<r[n(267)];i++){const t=re[n(279)][n(236)][n(244)](re),o=r[i],a=e[o]||t;t[n(283)]=re.bind(re),t.toString=a.toString[n(244)](a),e[o]=t}}))();const ae=parseInt(F[te(256)](/\D+/g,""));class ce extends z{constructor(n=new C){const t=te;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new C),texelSize:new P(new C),halfTexelSize:new P(new C),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(ae>=154?271:246)+t(243),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:O,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this[t(261)]=new Float32Array([0,1,2,2,3])}[te(250)](n,t){const e=te;this.uniforms[e(242)][e(254)][e(252)](n,t),this.uniforms[e(269)][e(254)][e(252)](n,t)[e(241)](.5)}setResolution(n){const t=te;this[t(262)].resolution[t(254)][t(276)](n)}}function se(n){function t(n){const e=oe;if("string"==typeof n)return function(n){}.constructor(e(265))[e(280)](e(249));1!==(""+n/n)[e(267)]||n%20==0?function(){return!0}[e(279)]("debugger")[e(272)](e(253)):function(){return!1}[e(279)](e(260)+e(239))[e(280)](e(264)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=pe;!function(n,t){const e=pe,r=de();for(;;)try{if(450194===parseInt(e(189))/1*(-parseInt(e(182))/2)+-parseInt(e(218))/3*(parseInt(e(239))/4)+parseInt(e(217))/5*(-parseInt(e(240))/6)+parseInt(e(241))/7+-parseInt(e(220))/8+parseInt(e(206))/9*(-parseInt(e(229))/10)+parseInt(e(205))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=pe,t=new RegExp(n(202)),e=new RegExp(n(233),"i"),r=ve("init");t[n(216)](r+n(197))&&e.test(r+"input")?ve():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(232)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(n,t){const e=de();return(pe=function(n,t){return e[n-=178]})(n,t)}function de(){const n=["counter","exception","console","renderTargetB","trace","minDepthThreshold","10goanzp","table","setTexelSize","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","defines","camera","string","setRenderTarget","setAttribute","65276VHzeRC","4947762VFZQhx","5227152RKNEyc","render","kernel","renderToScreen","frustumCulled","40898SrqUnr","uniforms","action","stateObject","inputBuffer","gger","clone","25RRcMAh","length","convolutionMaterial","toString","log","depthScale","depthToBlurRatioBias","error","chain","info","while (true) {}","maxDepthThreshold","add","function *\\( *\\)","__proto__","depthTexture","32748078FraTqo","3396465SrbkAH","texture","constructor","renderTargetA","debu","position","bind","depthBuffer","scene",'{}.constructor("return this")( )',"test","5RbDqZx","123xfBoKY","setResolution","7130592RMMJGC","value","screen"];return(de=function(){return n})()}fe(void 0,(function(){const n=pe;let t;try{t=Function("return (function() "+n(215)+");")()}catch(o){t=window}const e=t[n(225)]=t[n(225)]||{},r=[n(193),"warn",n(198),n(196),n(224),n(230),n(227)];for(let i=0;i<r[n(190)];i++){const t=fe.constructor.prototype.bind(fe),o=r[i],a=e[o]||t;t[n(203)]=fe[n(212)](fe),t[n(192)]=a[n(192)][n(212)](a),e[o]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(180)]=!1,this[c(209)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(226)]=this[c(209)][c(188)](),this.convolutionMaterial=new ce,this[c(191)][c(231)](1/t,1/e),this[c(191)][c(219)](new C(t,e)),this.scene=new u,this[c(235)]=new k,this.convolutionMaterial[c(183)][c(228)][c(221)]=r,this[c(191)][c(183)][c(200)][c(221)]=o,this.convolutionMaterial.uniforms[c(194)].value=i,this[c(191)].uniforms[c(195)].value=a,this.convolutionMaterial[c(234)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p.setAttribute(c(211),new j(s,3)),p[c(238)]("uv",new j(f,2)),this[c(222)]=new l(p,this[c(191)]),this[c(222)][c(181)]=!1,this[c(214)][c(201)](this.screen)}[ue(178)](n,t,e){const r=ue,o=this[r(214)],i=this[r(235)],a=this[r(209)],c=this[r(226)],s=this[r(191)],u=s.uniforms;u[r(213)][r(221)]=t[r(204)];const l=s[r(179)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(179)][r(221)]=l[p],u[r(186)][r(221)]=h[r(207)],n.setRenderTarget(f),n.render(o,i),h=f;u[r(179)][r(221)]=l[p],u[r(186)].value=h[r(207)],n[r(237)](this.renderToScreen?null:e),n.render(o,i)}}function ve(n){function t(n){const e=pe;if(typeof n===e(236))return function(n){}[e(208)](e(199)).apply(e(223));1!==(""+n/n)[e(190)]||n%20==0?function(){return!0}[e(208)](e(210)+e(187)).call(e(184)):function(){return!1}[e(208)](e(210)+e(187))[e(232)](e(185)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=ge;function ge(n,t){var e=be();return(ge=function(n,t){return e[n-=482]})(n,t)}!function(n,t){for(var e=ge,r=be();;)try{if(627205===parseInt(e(516))/1+-parseInt(e(550))/2+parseInt(e(532))/3*(parseInt(e(491))/4)+-parseInt(e(544))/5*(parseInt(e(549))/6)+-parseInt(e(529))/7+parseInt(e(547))/8+-parseInt(e(489))/9*(-parseInt(e(483))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=ge,t=new RegExp(n(505)),e=new RegExp(n(488),"i"),r=Ie(n(554));t[n(502)](r+n(485))&&e.test(r+"input")?Ie():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(546)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){var n,t=ge;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n.console||{},r=[t(552),t(510),t(494),t(534),t(512),t(528),t(519)],o=0;o<r[t(518)];o++){var i=ye[t(541)][t(531)][t(557)](ye),a=r[o],c=e[a]||i;i[t(504)]=ye.bind(ye),i[t(524)]=c[t(524)][t(557)](c),e[a]=i}}))();class xe extends U{constructor(n={}){var t=ge;super(n),this[t(525)]={value:null},this[t(514)]={value:null},this[t(558)]={value:null},this[t(535)]={value:null},this[t(551)]={value:null},this._hasBlur={value:!1},this[t(545)]={value:0},this[t(501)]={value:0},this[t(498)]={value:.5},this[t(555)]={value:.9},this._maxDepthThreshold={value:1},this[t(517)]={value:0},this[t(497)]={value:.25},this[t(539)]={value:1},this[t(509)]={value:1},this[t(560)](n)}[me(536)](n){var t,e=me;!(null==(t=n[e(538)])?void 0:t[e(490)])&&(n[e(538)][e(490)]=""),n[e(484)][e(492)]=this[e(543)],n[e(484)].tDiffuse=this[e(558)],n[e(484)][e(487)]=this[e(525)],n[e(484)].distortionMap=this._distortionMap,n[e(484)].tDiffuseBlur=this[e(535)],n[e(484)][e(515)]=this[e(551)],n.uniforms[e(482)]=this[e(545)],n.uniforms.mixBlur=this._mixBlur,n[e(484)][e(520)]=this[e(498)],n[e(484)][e(508)]=this[e(555)],n.uniforms[e(530)]=this._maxDepthThreshold,n[e(484)][e(548)]=this[e(517)],n[e(484)][e(499)]=this[e(497)],n[e(484)][e(522)]=this._distortion,n[e(484)][e(540)]=this[e(509)],n[e(526)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(526)],n.vertexShader=n[e(526)][e(542)]("#include <project_vertex>",e(506)),n[e(527)]=e(537)+n[e(527)],n[e(527)]=n[e(527)][e(542)](e(507),e(556))}get tDiffuse(){return this[me(558)].value}set[me(486)](n){var t=me;this[t(558)][t(553)]=n}get[me(487)](){var n=me;return this._tDepth[n(553)]}set tDepth(n){var t=me;this[t(525)][t(553)]=n}get[me(496)](){var n=me;return this[n(514)][n(553)]}set[me(496)](n){var t=me;this[t(514)][t(553)]=n}get[me(533)](){return this[me(535)].value}set[me(533)](n){var t=me;this[t(535)][t(553)]=n}get[me(515)](){return this[me(551)].value}set textureMatrix(n){var t=me;this[t(551)][t(553)]=n}get[me(492)](){var n=me;return this[n(543)][n(553)]}set hasBlur(n){this[me(543)].value=n}get mirror(){var n=me;return this[n(545)][n(553)]}set[me(482)](n){var t=me;this[t(545)][t(553)]=n}get[me(503)](){return this[me(501)].value}set[me(503)](n){var t=me;this[t(501)][t(553)]=n}get[me(520)](){var n=me;return this[n(498)][n(553)]}set[me(520)](n){var t=me;this[t(498)][t(553)]=n}get[me(508)](){var n=me;return this[n(555)][n(553)]}set[me(508)](n){this[me(555)].value=n}get maxDepthThreshold(){var n=me;return this[n(559)][n(553)]}set[me(530)](n){var t=me;this[t(559)][t(553)]=n}get[me(548)](){return this._depthScale.value}set[me(548)](n){var t=me;this._depthScale[t(553)]=n}get[me(499)](){var n=me;return this[n(497)][n(553)]}set[me(499)](n){var t=me;this[t(497)][t(553)]=n}get[me(522)](){var n=me;return this[n(539)][n(553)]}set distortion(n){this[me(539)].value=n}get[me(540)](){return this[me(509)].value}set[me(540)](n){var t=me;this[t(509)][t(553)]=n}}function be(){var n=["tDepth","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","11961uHDMYh","USE_UV","4ZPaYoC","hasBlur","debu","info","stateObject","distortionMap","_depthToBlurRatioBias","_blurStrength","depthToBlurRatioBias","counter","_mixBlur","test","mixBlur","__proto__","function *\\( *\\)","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","#include <emissivemap_fragment>","minDepthThreshold","_mixContrast","warn","call","exception","string","_distortionMap","textureMatrix","937341UBAEJV","_depthScale","length","trace","mixStrength","action","distortion","while (true) {}","toString","_tDepth","vertexShader","fragmentShader","table","3513020Hfwpqp","maxDepthThreshold","prototype","404475ZnWxhw","tDiffuseBlur","error","_tDiffuseBlur","onBeforeCompile","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","defines","_distortion","mixContrast","constructor","replace","_hasBlur","8885VrNLdw","_mirror","apply","733320JvuxKt","depthScale","2328TlrgOH","537890EMTHKg","_textureMatrix","log","value","init","_minDepthThreshold","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","bind","_tDiffuse","_maxDepthThreshold","setValues","mirror","6950nuYaaF","uniforms","chain","tDiffuse"];return(be=function(){return n})()}function Ie(n){function t(n){var e=ge;if(typeof n===e(513))return function(n){}.constructor(e(523))[e(546)](e(500));1!==(""+n/n)[e(518)]||n%20==0?function(){return!0}.constructor(e(493)+"gger")[e(511)](e(521)):function(){return!1}[e(541)]("debugger")[e(546)](e(495)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Re;!function(n,t){const e=Re,r=Ae();for(;;)try{if(216107===-parseInt(e(283))/1*(parseInt(e(252))/2)+parseInt(e(267))/3+parseInt(e(297))/4*(-parseInt(e(271))/5)+parseInt(e(255))/6*(parseInt(e(229))/7)+parseInt(e(228))/8*(parseInt(e(234))/9)+-parseInt(e(288))/10+parseInt(e(230))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Re,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(300),"i"),r=De("init");t[n(321)](r+n(307))&&e[n(321)](r+"input")?De():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=Re;let t;try{t=Function(n(295)+n(238)+");")()}catch(o){t=window}const e=t[n(291)]=t.console||{},r=[n(263),n(258),n(249),n(241),n(236),"table",n(286)];for(let i=0;i<r[n(268)];i++){const t=Me[n(294)].prototype[n(309)](Me),o=r[i],a=e[o]||t;t[n(313)]=Me[n(309)](Me),t[n(262)]=a[n(262)][n(309)](a),e[o]=t}}))();const Ee=[Se(246),"mirror",Se(245),Se(284),"t-diffuse-blur",Se(280),Se(243),"min-depth-threshold",Se(326),Se(235),Se(233),"distortion",Se(269),Se(244),"defines-USE_BLUR","defines-USE_DEPTH","defines-USE_DISTORTION"];function Re(n,t){const e=Ae();return(Re=function(n,t){return e[n-=228]})(n,t)}function Ae(){const n=["render","error","shadowMap","mix-strength","mix-contrast","t-diffuse","texture-matrix","assign","setFromNormalAndCoplanarPoint","info","set","setRenderTarget","2SuQSKg","projectionMatrix","defines-USE_DISTORTION","43656uMOWtU","reflectorWorldPosition","TresMeshReflectorMaterial","warn","normal","index","extractRotation","toString","log","dot","clipPlane","number","691488WAsjqo","length","distortionMap","position","10sIPoFm","reflect","setFromMatrixPosition","matrixWorldInverse","uuid","negate","value","counter","while (true) {}","has-blur","stateObject","textureMatrix","216562ybdDWA","t-depth","depthTexture","trace","copy","213000UkKEjC","rotationMatrix","defines-USE_DEPTH","console","constant","visible","constructor","return (function() ","key","325096pvTvHo","material","view","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","matrixWorld","target","apply","gger","texture","enabled","chain","reflectorPlane","bind","applyMatrix4","materialRef","addScaledVector","__proto__","isMesh","elements","sign","lookAtPosition","debu","subVectors","traverse","test","dispose","add","virtualCamera","cameraWorldPosition","max-depth-threshold","lookAt","autoUpdate","43208UrKaul","28DssUBz","64372qFzhyU","autoClear","multiplyScalar","depth-to-blur-ratio-bias","585NDKdiz","depth-scale","exception","far",'{}.constructor("return this")( )',"multiply"];return(Ae=function(){return n})()}const Te=en({__name:Se(260),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=J(o),{camera:y,scene:x,renderer:E,extend:R}=$();R({MeshReflectorMaterial:xe});const T=yn(),D=yn(),z=yn(),P=yn(),C=nn((()=>{const n=Re;return typeof f[n(277)]===n(266)?[f[n(277)],f[n(277)]]:f[n(277)]})),O=nn((()=>C[r(277)][0]>0||C.value[1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=T[o(277)])||n[o(305)][o(322)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T.value=new b(i[o(277)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(277)],i.value,w,M)},t(y,e(x)))),D.value=new b(i.value,i[o(277)],f),z[o(277)]=new he({resolution:i[o(277)],width:C[o(277)][0],height:C[o(277)][1],minDepthThreshold:a[o(277)],maxDepthThreshold:s[o(277)],depthScale:u[o(277)],depthToBlurRatioBias:l[o(277)]}),P.value={mirror:p,textureMatrix:F[o(282)],mixBlur:d,tDiffuse:T[o(277)][o(305)],tDepth:T[o(277)][o(285)],tDiffuseBlur:T.value[o(305)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(277)],mixContrast:_,"defines-USE_BLUR":O[o(277)]?"":void 0,"defines-USE_DEPTH":u[o(277)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const k=yn(),{onLoop:B}=Y();B((()=>{var n;const t=r;if(!(k[t(277)]&&E[t(277)]&&T[t(277)]&&y.value))return;const e=function(n,t){const e=Re;let r;return n[e(320)]((n=>{const o=e;n[o(314)]&&n[o(298)]&&n[o(298)][o(275)]===t&&(r=n)})),r}(x[t(277)],k[t(277)].uuid);if(!e)return;e[t(293)]=!1;const i=E[t(277)].xr[t(306)],a=E[t(277)][t(242)].autoUpdate;(function(n){var t,e;const r=Re;if(F.reflectorWorldPosition[r(273)](n[r(301)]),F.cameraWorldPosition[r(273)](null==(t=y[r(277)])?void 0:t[r(301)]),F[r(289)][r(261)](n[r(301)]),F[r(259)][r(250)](0,0,1),F[r(259)][r(310)](F[r(289)]),F[r(256)][r(312)](F[r(259)],o.reflectorOffset),F[r(299)][r(319)](F[r(256)],F[r(325)]),F.view[r(264)](F[r(259)])>0)return;F[r(299)][r(272)](F.normal)[r(276)](),F[r(299)][r(323)](F[r(256)]),F.rotationMatrix[r(261)](null==(e=y.value)?void 0:e.matrixWorld),F.lookAtPosition[r(250)](0,0,-1),F[r(317)][r(310)](F[r(289)]),F[r(317)].add(F[r(325)]),F[r(302)][r(319)](F[r(256)],F[r(317)]),F[r(302)].reflect(F[r(259)]).negate(),F.target.add(F[r(256)]),F.virtualCamera[r(270)][r(287)](F[r(299)]),F[r(324)].up[r(250)](0,1,0),F[r(324)].up[r(310)](F[r(289)]),F.virtualCamera.up[r(272)](F.normal),F[r(324)][r(327)](F[r(302)]),F[r(324)][r(237)]=(null==y?void 0:y[r(277)])[r(237)],F[r(324)].updateMatrixWorld(),F[r(324)][r(253)][r(287)]((null==y?void 0:y.value)[r(253)]),F[r(282)][r(250)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(282)][r(239)](F.virtualCamera[r(253)]),F.textureMatrix.multiply(F[r(324)][r(274)]),F[r(282)].multiply(n[r(301)]),F[r(308)][r(248)](F[r(259)],F[r(256)]),F[r(308)].applyMatrix4(F[r(324)][r(274)]),F.clipPlane.set(F[r(308)][r(259)].x,F[r(308)][r(259)].y,F[r(308)][r(259)].z,F[r(308)][r(292)]);const i=F.virtualCamera[r(253)];F.q.x=(Math[r(316)](F[r(265)].x)+i.elements[8])/i.elements[0],F.q.y=(Math[r(316)](F[r(265)].y)+i.elements[9])/i[r(315)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i[r(315)][14],F.clipPlane[r(232)](2/F[r(265)][r(264)](F.q)),i.elements[2]=F[r(265)].x,i[r(315)][6]=F[r(265)].y,i[r(315)][10]=F[r(265)].z+1,i[r(315)][14]=F[r(265)].w})(e),E[t(277)][t(242)][t(328)]=!1,E.value[t(251)](T[t(277)]),E.value[t(231)]||E[t(277)].clear(),E[t(277)][t(240)](x[t(277)],F.virtualCamera),null==(n=null==z?void 0:z[t(277)])||n[t(240)](E.value,T[t(277)],D.value),E[t(277)].xr[t(306)]=i,E[t(277)][t(242)].autoUpdate=a,e.visible=!0,E[t(277)][t(251)](null)}));const j=In(),U=nn((()=>{const n=r,t={};return Object.assign(t,o),Object[n(247)](t,j[n(277)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==T?void 0:T.value)||n[e(322)](),null==(t=null==D?void 0:D[e(277)])||t[e(322)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(257),Sn({key:c(296)+P[c(277)]["defines-USE_BLUR"]+P[c(277)][c(290)]+P[c(277)][c(254)],ref_key:c(311),ref:k},U[c(277)],{"texture-matrix":F.textureMatrix,mirror:tn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(305)],"t-depth":null==(o=T[c(277)])?void 0:o[c(285)],"t-diffuse-blur":null==(i=D[c(277)])?void 0:i[c(305)],"has-blur":O[c(277)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":O[c(277)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Ee)}}});function De(n){function t(n){const e=Re;if("string"==typeof n)return function(n){}.constructor(e(279))[e(303)](e(278));1!==(""+n/n)[e(268)]||n%20==0?function(){return!0}.constructor(e(318)+e(304)).call("action"):function(){return!1}[e(294)](e(318)+e(304)).apply(e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ze(n,t){const e=Pe();return(ze=function(n,t){return e[n-=455]})(n,t)}function Pe(){const n=["test","background","2xAZBvb","3141270HFHNmu","gger","apply","debu","185655orHEzM","call","fog","input","counter","texture","length","580tVCzhj","223836YKVOGy","constructor","trace","8OsUCtA","function *\\( *\\)","while (true) {}","toString","3841327LcprPZ","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","__proto__","return (function() ","log","chain","init","console","52JBYBQk","string","98791YdQMGj","12MpCBJJ","24PxqsJd","95463ypqYYl","value",'{}.constructor("return this")( )',"dispose","CubeCamera","bind","error","3889587ganoHw"];return(Pe=function(){return n})()}!function(n,t){const e=ze,r=Pe();for(;;)try{if(282005===parseInt(e(481))/1*(parseInt(e(494))/2)+-parseInt(e(471))/3*(parseInt(e(466))/4)+-parseInt(e(486))/5*(parseInt(e(470))/6)+-parseInt(e(456))/7*(parseInt(e(497))/8)+parseInt(e(482))/9+parseInt(e(493))/10*(parseInt(e(468))/11)+parseInt(e(469))/12*(parseInt(e(478))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ce(this,(function(){const n=ze,t=new RegExp(n(498)),e=new RegExp(n(458),"i"),r=Fe(n(464));t[n(479)](r+n(463))&&e[n(479)](r+n(489))?Fe():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(n){function t(n){const e=ze;if(typeof n===e(467))return function(n){}[e(495)](e(499))[e(484)](e(490));1!==(""+n/n)[e(492)]||n%20==0?function(){return!0}[e(495)](e(485)+"gger")[e(487)](e(459)):function(){return!1}[e(495)](e(485)+e(483))[e(484)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=ze,t=function(){const n=ze;let t;try{t=Function(n(461)+n(473)+");")()}catch(e){t=window}return t}(),e=t[n(465)]=t[n(465)]||{},r=[n(462),n(457),"info",n(477),"exception","table",n(496)];for(let o=0;o<r[n(492)];o++){const t=Oe[n(495)].prototype.bind(Oe),i=r[o],a=e[i]||t;t[n(460)]=Oe[n(476)](Oe),t[n(455)]=a[n(455)].bind(a),e[i]=t}}))();const ke=Ue;!function(n,t){const e=Ue,r=Le();for(;;)try{if(168568===-parseInt(e(455))/1*(-parseInt(e(475))/2)+parseInt(e(434))/3*(-parseInt(e(432))/4)+parseInt(e(449))/5*(-parseInt(e(428))/6)+parseInt(e(431))/7*(-parseInt(e(451))/8)+-parseInt(e(430))/9+-parseInt(e(456))/10*(parseInt(e(459))/11)+parseInt(e(448))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(437)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Ue,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ze(n(436));t.test(r+n(457))&&e[n(444)](r+n(461))?Ze():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ue(n,t){const e=Le();return(Ue=function(n,t){return e[n-=427]})(n,t)}je(void 0,(function(){const n=Ue;let t;try{t=Function("return (function() "+n(479)+");")()}catch(o){t=window}const e=t[n(480)]=t[n(480)]||{},r=[n(453),n(467),n(474),n(462),n(477),n(454),n(463)];for(let i=0;i<r.length;i++){const t=je[n(445)][n(450)][n(439)](je),o=r[i],a=e[o]||t;t[n(476)]=je[n(439)](je),t[n(473)]=a.toString[n(439)](a),e[o]=t}}))();const Ne=[ke(469)];function Le(){const n=["init","apply","envMap","bind","resolution","rgRef","action","near","test","constructor","stateObject","TresGroup","11007528CPzfeK","5JNtRwE","prototype","17456CaBLDc","while (true) {}","log","table","85091tnwcHs","28370OTizcH","chain","fog","1089EcUUjQ","texture","input","error","trace","counter","length","visible","warn","gger","object","value","index","$slots","toString","info","4EcHmDN","__proto__","exception","debu",'{}.constructor("return this")( )',"console","string","1027428JKnEAh","far","2257398vCCIYs","301cqGpig","604WzuIuq","default","2427EYFWtN","frames"];return(Le=function(){return n})()}const He=en({__name:ke(471),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return X((()=>s),(n=>{var t;const e=ze;null==(t=c.value)||t[e(474)](),c[e(472)]=new v(n[e(472)]),c[e(472)][e(491)].type=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=ze;e&&(f[r(472)]=new(D[r(475)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;const t=ze;null==(n=c.value)||n[t(474)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(472)][t(488)],d=a[t(472)][t(480)],a.value.background=r||d,a.value[t(488)]=o||p,null==(n=f[t(472)])||n.update(i[t(472)],a[t(472)]),a[t(472)].fog=p,a[t(472)][t(480)]=d}}}({resolution:o[r(440)],near:o[r(443)],far:o[r(429)],envMap:o[r(438)],fog:o[r(458)]}),{onBeforeLoop:s}=Y();let u=0;const l=Q(null);return s((()=>{const n=r;l[n(470)]&&(o[n(435)]===1/0||u<o[n(435)])&&(l[n(470)][n(466)]=!1,c(),l[n(470)].visible=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(460)]}),(n,t)=>{const e=r;return an(),cn(e(447),null,[vn("primitive",{object:tn(a)},null,8,Ne),vn(e(447),{ref_key:e(441),ref:l},[sn(n[e(472)],e(433))],512)])}}});function Ze(n){function t(n){const e=Ue;if(typeof n===e(427))return function(n){}[e(445)](e(452)).apply(e(464));1!==(""+n/n)[e(465)]||n%20==0?function(){return!0}[e(445)](e(478)+e(468)).call(e(442)):function(){return!1}[e(445)](e(478)+"gger").apply(e(446)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ve,r=qe();for(;;)try{if(917453===-parseInt(e(181))/1+-parseInt(e(142))/2*(parseInt(e(152))/3)+-parseInt(e(141))/4+parseInt(e(174))/5*(-parseInt(e(166))/6)+-parseInt(e(161))/7*(-parseInt(e(151))/8)+parseInt(e(163))/9*(parseInt(e(144))/10)+parseInt(e(140))/11*(parseInt(e(157))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=Ve,t=new RegExp(n(150)),e=new RegExp(n(165),"i"),r=Ye("init");t[n(154)](r+n(170))&&e.test(r+n(162))?Ye():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(158)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=qe();return(Ve=function(n,t){return e[n-=135]})(n,t)}function $e(n,t,e,r){const o=Ve,i=class extends D[o(149)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(148)](((n,[t,e])=>{const r=G[a(168)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(139)]="",s[a(153)]((([n])=>Object[a(147)](this,n,{get:()=>this.uniforms[n][a(167)],set:t=>this[a(180)][n][a(167)]=t}))),Object[a(159)](this,i),r&&r(this)}};return i[o(139)]=W[o(169)](),i}function qe(){const n=["generateUUID","chain","string","table","length","4925285ydOqCI","warn",'{}.constructor("return this")( )',"trace","gger","stateObject","uniforms","357830JLMRvh","return (function() ","prototype","info","toString","constructor","key","44GEvuxi","6233956AEbrTX","41874TjUuGl","counter","206410qTQiPW","debu","action","defineProperty","reduce","ShaderMaterial","function *\\( *\\)","1454096pQrbFv","57cWSmrA","forEach","test","bind","__proto__","5936352eeKPGn","apply","assign","console","21HilTwJ","input","738lNxxak","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6SROVWc","value","clone"];return(qe=function(){return n})()}function Ye(n){function t(n){const e=Ve;if(typeof n===e(171))return function(n){}[e(138)](e(164)).apply(e(143));1!==(""+n/n)[e(173)]||n%20==0?function(){return!0}.constructor(e(145)+e(178)).call(e(146)):function(){return!1}[e(138)]("debu"+e(178))[e(158)](e(179)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(182)+n(176)+");")()}catch(e){t=window}return t}(),e=t[n(160)]=t[n(160)]||{},r=["log",n(175),n(136),"error","exception",n(172),n(177)];for(let o=0;o<r.length;o++){const t=We[n(138)][n(135)][n(155)](We),i=r[o],a=e[i]||t;t[n(156)]=We[n(155)](We),t[n(137)]=a[n(137)].bind(a),e[i]=t}}))();var Ke=Xe;!function(n,t){for(var e=Xe,r=pr();;)try{if(906420===-parseInt(e(483))/1+parseInt(e(455))/2*(parseInt(e(352))/3)+parseInt(e(471))/4+-parseInt(e(449))/5+-parseInt(e(361))/6*(-parseInt(e(418))/7)+parseInt(e(435))/8+-parseInt(e(311))/9*(parseInt(e(406))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Je(this,(function(){var n=Xe,t=new RegExp(n(332)),e=new RegExp(n(323),"i"),r=Tr("init");t[n(373)](r+"chain")&&e.test(r+n(461))?Tr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Xe(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n,t){var e=pr();return(Xe=function(n,t){return e[n-=304]})(n,t)}function nr(n){var t=Xe,e=function(n,t){var e=Xe;if(typeof n!==e(319)||null===n)return n;var r=n[Symbol[e(368)]];if(void 0!==r){var o=r[e(328)](n,t||e(340));if(typeof o!==e(319))return o;throw new TypeError(e(407))}return(t===e(477)?String:Number)(n)}(n,t(477));return typeof e===t(450)?e:String(e)}function tr(n,t,e){var r=Xe;return(t=nr(t))in n?Object[r(400)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=Xe,r=Object.keys(n);if(Object[e(389)]){var o=Object[e(389)](n);t&&(o=o[e(390)]((function(t){var r=e;return Object[r(359)](n,t)[r(383)]}))),r[e(372)][e(479)](r,o)}return r}function rr(n){for(var t=Xe,e=1;e<arguments[t(360)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0).forEach((function(t){tr(n,t,r[t])})):Object[t(355)]?Object.defineProperties(n,Object[t(355)](r)):er(Object(r))[t(465)]((function(e){var o=t;Object[o(400)](n,e,Object[o(359)](r,e))}))}return n}function or(n,t){var e=Xe;if(null==n)return{};var r,o,i=function(n,t){var e=Xe;if(null==n)return{};var r,o,i={},a=Object[e(415)](n);for(o=0;o<a[e(360)];o++)r=a[o],t[e(404)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(389)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(360)];o++)r=a[o],t[e(404)](r)>=0||Object[e(380)][e(310)][e(328)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=Xe;(null==t||t>n[e(360)])&&(t=n[e(360)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array[Xe(452)](n))return n}(n)||function(n,t){var e=Xe,r=null==n?null:e(354)!=typeof Symbol&&n[Symbol[e(318)]]||n[e(316)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(328)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s[e(372)](o.value),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(388)]&&(c=r[e(388)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Xe;if(n){if("string"==typeof n)return ir(n,t);var r=Object.prototype[e(453)][e(328)](n)[e(357)](8,-1);return r===e(376)&&n.constructor&&(r=n.constructor[e(424)]),"Map"===r||r===e(325)?Array[e(412)](n):r===e(369)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(373)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(Xe(364))}()}function cr(n,t){for(var e=Xe,r=0;r<t[e(360)];r++){var o=t[r];o[e(383)]=o.enumerable||!1,o.configurable=!0,e(351)in o&&(o[e(326)]=!0),Object[e(400)](n,nr(o[e(378)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(Xe(433));return n}function ur(n,t){var e=Xe;return(ur=Object.setPrototypeOf?Object[e(347)][e(386)]():function(n,t){return n[e(481)]=t,n})(n,t)}function lr(n){var t=Xe;return(lr=Object[t(347)]?Object.getPrototypeOf[t(386)]():function(n){var e=t;return n.__proto__||Object[e(443)](n)})(n)}function fr(n){var t=function(){var n=Xe;if("undefined"==typeof Reflect||!Reflect[n(466)])return!1;if(Reflect[n(466)][n(448)])return!1;if(typeof Proxy===n(472))return!0;try{return Boolean.prototype[n(384)][n(328)](Reflect[n(466)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Xe,o=lr(n);if(t){var i=lr(this)[r(324)];e=Reflect[r(466)](o,arguments,i)}else e=o[r(479)](this,arguments);return function(n,t){var e=Xe;if(t&&("object"==typeof t||typeof t===e(472)))return t;if(void 0!==t)throw new TypeError(e(399));return sr(n)}(this,e)}}function pr(){var n=["\n    vec3 objectNormal = ","csm_AO","ShaderMaterial","lastIndexOf","csm_Emissive",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","this hasn't been initialised - super() hasn't been called","pointSize","10557728GaQDSQ","roughness","clearcoatNormal","cacheHash","clone","clearcoat","lights_physical_fragment","warn","getPrototypeOf","\n    gl_FragColor = ","error","\n    vec3 totalEmissiveRadiance = ","RawShaderMaterial","sham","3585340yRDmNA","symbol","toUpperCase","isArray","toString","positionRaw","2GQsaZc","instanceID","\n    gl_Position = ","emissive","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","Cannot call a class as a function","input",";\n    ","cacheKey","while (true) {}","forEach","construct","table","__csm","stateObject","return (function() ","3601908eVGlIm","function","log","create","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","_getCacheHash","string","needsUpdate","apply","fragmentShader","__proto__","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","1185181OkmYXi","patchMap","MeshMatcapMaterial","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","uniforms","material.clearcoat = ","MeshStandardMaterial","#define IS_","csm_Roughness","void ","Material","();\n            // #_CSM_#\n          ","includes","propertyIsEnumerable","31194POQzCG","\n    gl_PointSize = ","find",'". Shader cannot compile.',"// #_CSM_#","@@iterator","\n    vec3 transformed = ","iterator","object","depthAlpha","\n    #include <dithering_fragment>\n    gl_FragColor  = ",";\n  ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","Set","writable","position","call",'CSM: Property "',"\\$&","generateUUID","function *\\( *\\)",'" is required to use output "',"csm_ClearcoatNormal","_patchShader","baseMaterial","split","isAlreadyExtended","#define IS_UNKNOWN;\n","default","trim","gger","MeshToonMaterial","\n            \n            void main() {\n          ","message","console","setPrototypeOf","PointsMaterial","_getMaterialDefine","type","value","3573321WZBPBO","metalness","undefined","getOwnPropertyDescriptors","material.clearcoatRoughness = ","slice","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","getOwnPropertyDescriptor","length","66GLfVWt","bump","diffuse","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","onBeforeCompile","fragColor","ShaderChunk","toPrimitive","Arguments","vertexShader","csm_FragColor","push","test","info","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","Object",", 1.0 );\n  ","key",'{}.constructor("return this")( )',"prototype","csm_Normal","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","enumerable","valueOf","void main()","bind","\n            ","return","getOwnPropertySymbols","filter","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","\n    vec4 csm_internal_positionUnprojected = ","clearcoatRoughness","CustomShaderMaterial does not support RawShaderMaterial","entries","_generateMaterial","\n    \n            ","Derived constructors may only return object or undefined","defineProperty","replace","csm_Bump","csm_Clearcoat","indexOf","action","3590LCYixV","@@toPrimitive must return a primitive value.","_getPatchMapForMaterial","trace","customProgramCacheKey",". Shader cannot compile.","from","silent","concat","keys","CSM: ","normal","408331vwhdFH","MeshPhysicalMaterial","assign","exception","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","MeshLambertMaterial","name","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "," - (dot("];return(pr=function(){return n})()}Qe(void 0,(function(){var n,t=Xe;try{n=Function(t(470)+t(379)+");")()}catch(s){n=window}for(var e=n[t(346)]=n[t(346)]||{},r=[t(473),t(442),t(374),t(445),t(421),t(467),t(409)],o=0;o<r[t(360)];o++){var i=Qe[t(324)][t(380)][t(386)](Qe),a=r[o],c=e[a]||i;i[t(481)]=Qe.bind(Qe),i[t(453)]=c.toString[t(386)](c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:"csm_DiffuseColor",normal:Ke(381),roughness:Ke(305),metalness:"csm_Metalness",emissive:Ke(431),ao:Ke(428),bump:Ke(402),clearcoat:Ke(403),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Ke(334),pointSize:"csm_PointSize",fragColor:Ke(371),depthAlpha:"csm_DepthAlpha",position:"csm_Position",positionRaw:"csm_PositionRaw"},gr=(tr(dr={},""[Ke(414)](mr.position),"*"),tr(dr,""[Ke(414)](mr[Ke(454)]),"*"),tr(dr,""[Ke(414)](mr[Ke(417)]),"*"),tr(dr,"".concat(mr[Ke(434)]),[Ke(348)]),tr(dr,""[Ke(414)](mr[Ke(363)]),"*"),tr(dr,""[Ke(414)](mr.fragColor),"*"),tr(dr,"".concat(mr[Ke(458)]),[Ke(489),Ke(419)]),tr(dr,""[Ke(414)](mr[Ke(436)]),[Ke(489),Ke(419)]),tr(dr,""[Ke(414)](mr[Ke(353)]),["MeshStandardMaterial",Ke(419)]),tr(dr,"".concat(mr.ao),[Ke(489),"MeshPhysicalMaterial","MeshBasicMaterial",Ke(423),"MeshPhongMaterial",Ke(343)]),tr(dr,"".concat(mr[Ke(362)]),[Ke(423),Ke(485),"MeshNormalMaterial","MeshPhongMaterial",Ke(419),Ke(489),"MeshToonMaterial","ShadowMaterial"]),tr(dr,""[Ke(414)](mr[Ke(320)]),["MeshDepthMaterial"]),tr(dr,""[Ke(414)](mr[Ke(440)]),[Ke(419)]),tr(dr,""[Ke(414)](mr[Ke(394)]),[Ke(419)]),tr(dr,""[Ke(414)](mr[Ke(437)]),["MeshPhysicalMaterial"]),dr),_r={"#include <lights_physical_fragment>":D[Ke(367)][Ke(441)]},yr=(tr(hr={},""[Ke(414)](mr[Ke(417)]),{"#include <beginnormal_vertex>":Ke(427)[Ke(414)](mr[Ke(417)],Ke(432))}),tr(hr,""[Ke(414)](mr.position),{"#include <begin_vertex>":Ke(317)[Ke(414)](mr[Ke(327)],Ke(322))}),tr(hr,""[Ke(414)](mr[Ke(454)]),{"#include <begin_vertex>":Ke(393)[Ke(414)](mr[Ke(454)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),tr(hr,""[Ke(414)](mr[Ke(434)]),{"gl_PointSize = size;":Ke(312)[Ke(414)](mr.pointSize,Ke(462))}),tr(hr,""[Ke(414)](mr[Ke(363)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Ke(414)](mr.diffuse,";\n  ")}),tr(hr,""[Ke(414)](mr[Ke(366)]),{"#include <dithering_fragment>":Ke(321)[Ke(414)](mr[Ke(366)],Ke(322))}),tr(hr,""[Ke(414)](mr[Ke(458)]),{"vec3 totalEmissiveRadiance = emissive;":Ke(446).concat(mr[Ke(458)],Ke(462))}),tr(hr,""[Ke(414)](mr[Ke(436)]),{"#include <roughnessmap_fragment>":Ke(391).concat(mr[Ke(436)],Ke(462))}),tr(hr,""[Ke(414)](mr[Ke(353)]),{"#include <metalnessmap_fragment>":Ke(375)[Ke(414)](mr[Ke(353)],";\n    ")}),tr(hr,""[Ke(414)](mr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[Ke(414)](mr.ao,";\n    ")}),tr(hr,"".concat(mr.bump),{"#include <normal_fragment_maps>":Ke(475).concat(mr.bump,Ke(426))[Ke(414)](mr[Ke(362)],Ke(392))}),tr(hr,""[Ke(414)](mr[Ke(320)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[Ke(414)](mr[Ke(320)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ke(382).concat(mr[Ke(320)],Ke(462))}),tr(hr,""[Ke(414)](mr[Ke(440)]),{"material.clearcoat = clearcoat;":Ke(488)[Ke(414)](mr[Ke(440)],";")}),tr(hr,""[Ke(414)](mr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":Ke(356)[Ke(414)](mr[Ke(394)],";")}),tr(hr,""[Ke(414)](mr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),hr),xr=(tr(vr={},""[Ke(414)](mr[Ke(327)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(422)[Ke(414)](mr.position,Ke(377))}),tr(vr,""[Ke(414)](mr[Ke(454)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(457)[Ke(414)](mr[Ke(327)],Ke(322))}),tr(vr,""[Ke(414)](mr[Ke(363)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ke(414)](mr[Ke(363)],Ke(322))}),tr(vr,""[Ke(414)](mr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(444)[Ke(414)](mr[Ke(366)],Ke(322))}),vr),br={clearcoat:[mr.clearcoat,mr[Ke(437)],mr[Ke(394)]]},Ir=Ke(482),Sr=["baseMaterial","fragmentShader",Ke(370),"uniforms",Ke(484),Ke(463),Ke(413)],wr=function(n,t,e){return n[Ke(337)](t).join(e)},Mr=function(n,t){var e,r,o=Ke;return new RegExp("\\b".concat((e=t,r=Ke,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(330))),"\\b"))[o(373)](n)};function Er(n){return n?n.replace(/\s/g,""):void 0}function Rr(n){return n[Ke(401)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Ar=function(n){var t=Ke;!function(n,t){var e=Xe;if(typeof t!==e(472)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(380)]=Object[e(474)](t&&t[e(380)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(400)](n,e(380),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=Xe,u=n[s(336)],l=n[s(480)],f=n[s(370)],p=n[s(487)],d=n[s(484)],h=n[s(463)],v=n[s(413)],m=or(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Xe(460))}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e[t(345)][t(404)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e.type===s(447))throw new Error(s(395));(function(n,t){var e=Ke;e(360),Object[e(420)](n,t);var r=Object[e(443)](t);Object[e(396)](Object[e(355)](r))[e(390)]((function(n){var t=e,r=typeof n[1].get===t(472),o=typeof n[1].set===t(472),i=typeof n[1][t(351)]===t(472),a=n[0]===t(324);return(r||o||i)&&!a}))[e(465)]((function(t){var r=e;typeof n[t[0]]!==r(472)&&Object[r(400)](n,t[0],t[1])}))})(sr(t=a[s(328)](this)),e),t[s(468)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W[s(331)](),type:e[s(350)],isAlreadyExtended:(r=e[s(365)],o=Ke,i=r[o(453)]()[o(341)](),!(0===i.substring(i.indexOf("{")+1,i[o(430)]("}"))[o(341)]()[o(360)])),cacheHash:"",silent:v},t[s(487)]=rr(rr({},t.uniforms||{}),p||{});var g=t[s(468)],_=g.fragmentShader,y=g[s(370)],x=t[s(487)];return t[s(468)][s(438)]=t._getCacheHash(),t[s(397)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=Xe,t=arguments[n(360)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(487)]=t[n(487)]||this.uniforms,Object[n(420)](this.__csm,t);var e=this.__csm,r=e[n(480)],o=e[n(370)],i=this.uniforms,a=this[n(476)]();this[n(468)][n(438)]=a,this[n(397)](r,o,i)}},{key:t(439),value:function(){var n=t,e={baseMaterial:this.__csm[n(336)],fragmentShader:this[n(468)][n(480)],vertexShader:this[n(468)][n(370)],uniforms:this[n(487)],silent:this[n(468)][n(413)],patchMap:this[n(468)][n(484)],cacheKey:this.__csm.cacheKey},r=new(this[n(324)])(e);return Object[n(420)](this,r),r}},{key:t(476),value:function(){var n=t,e=this[n(468)],r=e[n(480)],o=e.vertexShader,i=this.uniforms,a=[Er(r),Er(o),i][n(390)]((function(n){return void 0!==n}));return a[n(360)]>0?Rn(a,{excludeValues:!0}):this[n(410)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(487)]=r||{},this[o(410)]=function(){var n=o;return i[n(468)][n(438)]};var a=function(t){var r=o;try{var a=i[r(349)]();if(n){var c=i[r(335)](Rr(n),t.fragmentShader,!0);t.fragmentShader=a+c}if(e){var s=i._patchShader(Rr(e),t[r(370)]);t.vertexShader="#define IS_VERTEX;\n"+s,t.vertexShader=a+t[r(370)]}t[r(487)]=rr(rr({},t[r(487)]),i[r(487)]),i.uniforms=t.uniforms}catch(u){console[r(445)](u)}};if(this[o(468)].isAlreadyExtended){var c=this[o(365)];this[o(365)]=function(n,t){c(n,t),a(n)}}else this[o(365)]=a;this[o(478)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(408)]()),this[o(468)][o(484)]);Object[o(396)](br)[o(465)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(313)]((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error(e(329)[e(414)](a,e(333))[e(414)](c,e(314)))})),Object.entries(_r)[o(465)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=wr(a,e,r)})),Object[o(415)](c)[o(465)]((function(t){var e=o;Object[e(415)](c[t])[e(465)]((function(r){var o=e,s=gr[t],u=i[o(468)][o(350)];if("*"===t||Mr(n,t)){if(!(!s||Array[o(452)](s)&&s[o(309)](u)||"*"===s))throw new Error(o(416)[o(414)](t," is not available in ").concat(u,o(411)));a=wr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(468)][o(456)][o(401)](/-/g,"_"),h=n[o(401)](/void\s+main\s*\(\s*\)/g,o(306).concat(d,"()")),v=n[o(309)](o(385)),m=a[o(309)]("// #_CSM_#");return v&&(m&&this.__csm[o(338)]?(a=a.replace("void main() {",o(387).concat(h,o(344))),s=a,u=o(315),l="\n            "[o(414)](d,o(308)),p=s[(f=Ke)(430)](u),a=-1===p?s:s.substring(0,p)+l+s.substring(p+u[f(360)])):a=a.replace("void main() {",o(425)[o(414)]("\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(459))[o(414)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(398)).concat(h,o(486))[o(414)](Ir,o(358))[o(414)](r?"\n    \n":"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ").concat(d,"();\n              // #_CSM_#\n          "))),a}},{key:t(349),value:function(){var n=t,e=this[n(468)][n(350)];return e?n(304)[n(414)](e[n(451)](),";\n"):n(339)}},{key:t(408),value:function(){var n=t;return this.__csm.type===n(429)?xr:yr}}],i=Xe,r&&cr(e[i(380)],r),o&&cr(e,o),Object[i(400)](e,"prototype",{writable:!1}),c}(D[Ke(307)]);function Tr(n){function t(n){var e=Xe;if(typeof n===e(477))return function(n){}[e(324)](e(464))[e(479)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(342))[e(328)](e(405)):function(){return!1}[e(324)]("debugger")[e(479)](e(469)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dr=Or;function zr(){const n=["warn","color","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","test","table","2921607yYZmrM","clearcoat","__proto__","7AnOUQO","error","84418FMJTvG","debu","call","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","counter","9159EOATQj","clearcoatRoughness","init","3081000mUpavJ","input","#ff00fc","index",'{}.constructor("return this")( )',"constructor","toString","string","action","\n\t\t\t","apply","console","metalness","1183845tUWxBk","setStyle","prototype","gger","1389816wQAfLB","chain","roughness","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1877706zCIIgj","info","124Akmvwb","bind","log","return (function() "];return(zr=function(){return n})()}!function(n,t){const e=Or,r=zr();for(;;)try{if(226906===parseInt(e(141))/1+-parseInt(e(127))/2*(parseInt(e(146))/3)+parseInt(e(166))/4+parseInt(e(162))/5+-parseInt(e(125))/6*(parseInt(e(139))/7)+parseInt(e(149))/8+-parseInt(e(136))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(159)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pr(this,(function(){const n=Or,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(124),"i"),r=Br(n(148));t[n(134)](r+n(167))&&e.test(r+n(150))?Br():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(159)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(n,t){const e=zr();return(Or=function(n,t){return e[n-=124]})(n,t)}Cr(void 0,(function(){const n=Or,t=function(){const n=Or;let t;try{t=Function(n(130)+n(153)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(160)]||{},r=[n(129),n(131),n(126),n(140),n(169),n(135),"trace"];for(let o=0;o<r.length;o++){const t=Cr.constructor[n(164)][n(128)](Cr),i=r[o],a=e[i]||t;t[n(138)]=Cr[n(128)](Cr),t[n(155)]=a[n(155)][n(128)](a),e[i]=t}}))();const Fr=["object"],kr=en({__name:Dr(152),props:{color:{default:Dr(151)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Dr,e=n,r={baseMaterial:V,metalness:e[t(161)],roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e[t(147)],color:e[t(132)],vertexShader:t(144),fragmentShader:t(158)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(133)},o=new Ar(r);return pn((()=>{const n=t;o[n(132)][n(163)](e[n(132)]),o[n(161)]=e[n(161)],o[n(168)]=e[n(168)],o.clearcoat=e[n(137)],o.clearcoatRoughness=e[n(147)]})),(n,t)=>(an(),cn("primitive",{object:tn(o)},null,8,Fr))}});function Br(n){function t(n){const e=Or;if(typeof n===e(156))return function(n){}[e(154)]("while (true) {}")[e(159)](e(145));1!==(""+n/n).length||n%20==0?function(){return!0}[e(154)](e(142)+e(165))[e(143)](e(157)):function(){return!1}[e(154)](e(142)+e(165))[e(159)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Nr,r=Lr();;)try{if(568180===parseInt(e(410))/1*(-parseInt(e(409))/2)+-parseInt(e(432))/3+parseInt(e(407))/4*(-parseInt(e(417))/5)+parseInt(e(428))/6*(parseInt(e(419))/7)+parseInt(e(429))/8+parseInt(e(436))/9*(-parseInt(e(437))/10)+-parseInt(e(426))/11*(-parseInt(e(434))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var jr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(411)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jr(this,(function(){var n=Nr,t=new RegExp(n(404)),e=new RegExp(n(416),"i"),r=Hr("init");t[n(438)](r+n(414))&&e[n(438)](r+n(406))?Hr():r("0")}))()}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(n,t){var e=Lr();return(Nr=function(n,t){return e[n-=404]})(n,t)}function Lr(){var n=["1271392lIDOBo","bind","console","583380bBNeTB","error","156GWlnAy","counter","49554pyGxUK","1370fhvutD","test","function *\\( *\\)","gger","input","109124AbtupN","debu","508zSvMud","1042uKFgHU","apply","table","trace","chain","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","175rxSszJ","toString","3346qVHRpg","warn","constructor","action","return (function() ","length","prototype","1841653sSLRGA","exception","5034YyfIYU"];return(Lr=function(){return n})()}function Hr(n){function t(n){var e=Nr;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply(e(435));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}[e(421)]("debu"+e(405))[e(415)](e(422)):function(){return!1}.constructor(e(408)+e(405))[e(411)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ur(void 0,(function(){var n,t=Nr;try{n=Function(t(423)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(431)]=n[t(431)]||{},r=["log",t(420),"info",t(433),t(427),t(412),t(413)],o=0;o<r[t(424)];o++){var i=Ur[t(421)][t(425)][t(430)](Ur),a=r[o],c=e[a]||i;i.__proto__=Ur.bind(Ur),i[t(418)]=c[t(418)][t(430)](c),e[a]=i}}))();export{$e as C,kr as _,nt as a,ft as b,wt as c,Dt as d,Ut as e,Xt as f,He as g,Te as h,gt as u};

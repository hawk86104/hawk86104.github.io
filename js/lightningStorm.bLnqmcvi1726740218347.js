import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.sWTY8Kgg1726740218347.js";import{B as i,V as s,cp as n,ab as e,X as r,h as o,an as a,$ as c,s as h,C as u,_ as l}from"./three.MbBECAu81726740218347.js";import{U as d,e as p,F as f}from"./@tresjs.C5O8roW51726740218347.js";import{c as m}from"./simplex-noise.P9JMzoHY1726740218347.js";import{d as g,a3 as y,o as b,E as x,u as v,r as S,j as w,g as I,m as _,F as P}from"./@vue.JNsx1iN61726740218347.js";import"./index.qigBQEwZ1726740218347.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.9SmWhN-b1726740218347.js";import"./three-custom-shader-material.hw4Mip3d1726740218347.js";import"./object-hash.rW_XvzOw1726740218347.js";import"./@amap.bfr68PX11726740218347.js";import"./jszip.Axb7QGa61726740218347.js";import"./glsl-tokenizer.37TL9LuE1726740218347.js";import"./glsl-token-string.AVYfh4t_1726740218347.js";import"./glsl-token-functions.cO5bFsqa1726740218347.js";import"./@vueuse.18lbrd2F1726740218347.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.L9jqS59i1726740218347.js";import"./all.three.YUIovSpZ1726740218347.js";import"./oimophysics.x0jH7fze1726740218347.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.R40ficSl1726740218347.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.SwnHBoWx1726740218347.js";import"./index.qxajnOUQ1726740218347.js";import"./three-stdlib.vORGfiSP1726740218347.js";import"./@pmndrs.WMHo6lO61726740218347.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.Yj7VJo9j1726740218347.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.T5Jbf9k01726740218347.js";const R=V;!function(t,i){const s=V,n=A();for(;;)try{if(817547===parseInt(s(337))/1*(parseInt(s(393))/2)+parseInt(s(322))/3*(parseInt(s(283))/4)+-parseInt(s(295))/5+-parseInt(s(317))/6+-parseInt(s(281))/7*(-parseInt(s(284))/8)+parseInt(s(398))/9+parseInt(s(293))/10*(-parseInt(s(368))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(309)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=V,i=new RegExp(t(409)),s=new RegExp(t(324),"i"),n=F(t(401));i.test(n+t(367))&&s[t(316)](n+t(255))?F():n("0")}))()}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(309)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(){const t=["RAY_INITIALIZED","timeFraction","indices","SIN30DEG","subrayProbability","middlePos","chain","12738605DNJRtW","maxIterations","down","currentSubray","fraction0","linPos0","setIndex","position","noiseSeed","trace","fractalRayRecursive","getNewSegment","RAY_EXTINGUISHED","RAY_PROPAGATING","createTriangleVerticesWithUVs","length","multiplyScalar","time","state","currentCoordinate","radius0","generateUVs","vanishingTimeFactor","setAttribute","vertices","862RpOyyP","addNewSubray","exception","fillMesh","__proto__","10236843ujVRwN","maxRaySegments","subrays","init","copy","simplexX","currentSegmentIndex","propagationTimeFactor","subrayDutyCycle","onDecideSubrayCreation","normalize","function *\\( *\\)","maxSubrays","set","destOffset","ramification","isEternal","random","createPrismFaces","recursionProbability","roughness","simplexY","createSubray","stateObject","newPos","raySegments","error","createMesh","COS30DEG","subrayConePosition","isStatic","input","currentUVCoordinate","usage","subVectors","lerpVectors","uvs","needsUpdate","simplexZ","side","max","sub","push","pow","array","seed","updateMesh","visible","radius1","straightness","deathTime","getSeed","isInitialSegment","uvsAttribute","beginVanishingTime","initSubray","minRadius","134267tpeNCH","type","500zGPsIs","248uCfqBq","while (true) {}","update","positionVariationFactor","pos1","count","linPos1","positionAttribute","drawRange","10ALXwaI","onSubrayCreation","5787435JRBbKb","ceil","debu","isLightningStrike","createTriangleVerticesWithoutUVs","sin","RAY_VANISHING","index","add","table","middleLinPos","up0","cos","birthTime","apply","warn","currentSeed","maxSubrayRecursion","up1","subrayPeriod","vPos","test","496338BtRXzk","iteration","currentCreateTriangleVertices","randomGenerator","floor","27294clSeui","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","numSubrays","pos0","recursion","min","currentIndex","gger","cross1","endPropagationTime","crossVectors","sourceOffset","LightningStrike","console","804JzUYqG","currentVertex","subrayCylinderPosition","constructor","forwards","createDefaultSubrayCreationCallbacks","seedGenerator","currentSegmentCallback","log","createPrism","rayParameters","fraction1","timeScale","forwardsFill","lerp","radius0Factor","clone","bind","setSeed","counter","copyParameters","createSegment","radius1Factor","toString"];return(A=function(){return t})()}T(void 0,(function(){const t=V,i=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(i){t=window}return t}(),s=i.console=i[t(336)]||{},n=[t(345),t(310),t(323),t(250),t(395),t(304),t(377)];for(let e=0;e<n[t(383)];e++){const i=T[t(340)].prototype[t(354)](T),r=n[e],o=s[r]||i;i[t(397)]=T[t(354)](T),i[t(360)]=o[t(360)].bind(o),s[r]=i}}))();class j extends i{constructor(t={}){const i=V;super(),this[i(298)]=!0,this[i(282)]=i(335),this[i(401)](j[i(357)](t,t)),this[i(251)]()}static createRandomGenerator(){const t=V,i=2053,s=[];for(let e=0;e<i;e++)s[t(266)](Math[t(241)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(311)]];return n[e(311)]=(n.currentSeed+1)%i,r},getSeed:function(){return n[t(311)]/i},setSeed:function(s){const e=t;n[e(311)]=Math[e(321)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=V,e=function(s){return i===t?s:s[V(353)]()};return t[n(334)]=void 0!==i.sourceOffset?e(i[n(334)]):new s(0,100,0),t[n(412)]=void 0!==i[n(412)]?e(i[n(412)]):new s(0,0,0),t[n(349)]=void 0!==i.timeScale?i[n(349)]:1,t[n(244)]=void 0!==i[n(244)]?i[n(244)]:.9,t.straightness=void 0!==i[n(273)]?i[n(273)]:.7,t[n(306)]=void 0!==i[n(306)]?e(i[n(306)]):new s(0,0,1),t[n(313)]=void 0!==i[n(313)]?e(i[n(313)]):new s(0,0,1),t[n(388)]=void 0!==i[n(388)]?i[n(388)]:1,t[n(272)]=void 0!==i[n(272)]?i[n(272)]:1,t[n(352)]=void 0!==i.radius0Factor?i[n(352)]:.5,t.radius1Factor=void 0!==i.radius1Factor?i.radius1Factor:.2,t[n(280)]=void 0!==i[n(280)]?i[n(280)]:.2,t.isEternal=void 0!==i[n(240)]?i[n(240)]:void 0===i[n(308)]||void 0===i[n(274)],t[n(308)]=i[n(308)],t[n(274)]=i.deathTime,t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i[n(405)]:.1,t[n(390)]=void 0!==i.vanishingTimeFactor?i[n(390)]:.9,t[n(314)]=void 0!==i[n(314)]?i.subrayPeriod:4,t[n(406)]=void 0!==i[n(406)]?i[n(406)]:.6,t[n(369)]=void 0!==i.maxIterations?i[n(369)]:9,t[n(254)]=void 0!==i[n(254)]&&i.isStatic,t[n(239)]=void 0!==i.ramification?i[n(239)]:5,t[n(312)]=void 0!==i.maxSubrayRecursion?i[n(312)]:3,t[n(243)]=void 0!==i[n(243)]?i[n(243)]:.6,t.generateUVs=void 0!==i[n(389)]&&i[n(389)],t[n(320)]=i[n(320)],t[n(376)]=i[n(376)],t[n(407)]=i[n(407)],t.onSubrayCreation=i[n(294)],t}[R(286)](t){const i=R;this[i(254)]||(this[i(347)].isEternal||this[i(347)][i(308)]<=t&&t<=this.rayParameters[i(274)]?(this[i(270)](t),t<this[i(400)][0][i(332)]?this[i(386)]=j.RAY_PROPAGATING:t>this[i(400)][0][i(278)]?this[i(386)]=j[i(301)]:this[i(386)]=j.RAY_STEADY,this[i(271)]=!0):(this.visible=!1,t<this[i(347)][i(308)]?this[i(386)]=j.RAY_UNBORN:this[i(386)]=j[i(380)]))}[R(401)](t){const i=R;this[i(347)]=t,this[i(369)]=void 0!==t[i(369)]?Math[i(321)](t[i(369)]):9,t.maxIterations=this[i(369)],this[i(254)]=void 0!==t[i(254)]&&t[i(254)],t[i(254)]=this.isStatic,this[i(239)]=void 0!==t.ramification?Math[i(321)](t[i(239)]):5,t.ramification=this[i(239)],this[i(312)]=void 0!==t[i(312)]?Math.floor(t.maxSubrayRecursion):3,t[i(312)]=this[i(312)],this[i(243)]=void 0!==t.recursionProbability?t[i(243)]:.6,t[i(243)]=this.recursionProbability,this[i(389)]=void 0!==t.generateUVs&&t[i(389)],t.generateUVs=this[i(389)],void 0!==t[i(320)]?(this[i(320)]=t[i(320)],this[i(343)]=t[i(320)],void 0!==t[i(376)]&&this.seedGenerator[i(355)](t[i(376)])):(this.randomGenerator=j.createRandomGenerator(),this[i(343)]=Math),void 0!==t[i(407)]?this[i(407)]=t[i(407)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(294)]&&(this.onSubrayCreation=t[i(294)])),this[i(386)]=j.RAY_INITIALIZED,this[i(410)]=Math[i(296)](1+Math[i(267)](this[i(239)],Math[i(264)](0,this.maxSubrayRecursion-1))),t.maxSubrays=this[i(410)],this.maxRaySegments=2*(1<<this.maxIterations),this[i(400)]=[];for(let s=0;s<this[i(410)];s++)this[i(400)][i(266)](this[i(246)]());this[i(249)]=[];for(let s=0;s<this[i(399)];s++)this[i(249)][i(266)](this.createSegment());this[i(385)]=0,this[i(362)]=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this[i(389)]?this[i(382)]:this[i(299)],this.numSubrays=0,this[i(371)]=null,this[i(404)]=0,this.isInitialSegment=!1,this[i(365)]=0,this[i(338)]=0,this[i(329)]=0,this.currentCoordinate=0,this[i(256)]=0,this.vertices=null,this[i(260)]=null,this.indices=null,this[i(291)]=null,this[i(277)]=null,this.simplexX=m(this.seedGenerator[i(241)]),this[i(245)]=m(this[i(343)][i(241)]),this.simplexZ=m(this.seedGenerator.random),this[i(341)]=new s,this[i(350)]=new s,this[i(263)]=new s,this[i(370)]=new s,this[i(366)]=new s,this[i(305)]=new s,this[i(248)]=new s,this[i(315)]=new s,this[i(331)]=new s}[R(251)](){const t=R,i=1<<this.maxIterations,s=3*(i+1)*this[t(410)],o=18*i*this[t(410)];this[t(392)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this.generateUVs&&(this[t(260)]=new Float32Array(2*s)),this.fillMesh(0),this[t(374)](new n(this[t(363)],1)),this.positionAttribute=new e(this[t(392)],3),this[t(391)](t(375),this[t(291)]),this[t(389)]&&(this.uvsAttribute=new e(new Float32Array(this[t(260)]),2),this[t(391)]("uv",this.uvsAttribute)),!this[t(254)]&&(this.index[t(257)]=r,this[t(291)][t(257)]=r,this.generateUVs&&(this[t(277)][t(257)]=r)),this[t(392)]=this[t(291)][t(268)],this[t(363)]=this[t(302)][t(268)],this[t(389)]&&(this[t(260)]=this[t(277)][t(268)])}updateMesh(t){const i=R;this[i(396)](t),this[i(292)][i(289)]=this[i(329)],this[i(302)][i(261)]=!0,this[i(291)][i(261)]=!0,this.generateUVs&&(this.uvsAttribute[i(261)]=!0)}fillMesh(t){const i=R,s=this;this[i(338)]=0,this[i(329)]=0,this[i(387)]=0,this[i(256)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(371)];t<r[e(308)]||(this.rayParameters[e(240)]&&0==s.currentSubray[e(327)]?(s.createPrism(n),s[e(407)](n,s)):t<r[e(332)]?s.timeFraction>=n[e(372)]*r.propagationTimeFactor&&(s[e(346)](n),s.onDecideSubrayCreation(n,s)):t<r[e(278)]?(s[e(346)](n),s.onDecideSubrayCreation(n,s)):(s[e(362)]<=r[e(390)]+n[e(348)]*(1-r[e(390)])&&s[e(346)](n),s[e(407)](n,s)))}))}[R(394)](){const t=R;return this.subrays[this[t(325)]++]}[R(279)](t,i){const s=R;t[s(326)][s(402)](i[s(334)]),t.pos1[s(402)](i[s(412)]),t[s(306)][s(402)](i[s(306)]),t[s(313)][s(402)](i[s(313)]),t[s(388)]=i[s(388)],t[s(272)]=i.radius1,t[s(308)]=i[s(308)],t[s(274)]=i[s(274)],t[s(349)]=i[s(349)],t[s(244)]=i.roughness,t[s(273)]=i[s(273)],t[s(405)]=i[s(405)],t[s(390)]=i[s(390)],t[s(369)]=this[s(369)],t[s(269)]=void 0!==i[s(376)]?i.noiseSeed:0,t[s(327)]=0}fractalRay(t,i){const s=R;this[s(385)]=t,this[s(344)]=i,this[s(325)]=0,this[s(279)](this[s(394)](),this[s(347)]);for(let n=0;n<this[s(325)];n++){const i=this[s(400)][n];this[s(371)]=i,this.randomGenerator[s(355)](i[s(269)]),i[s(332)]=o[s(351)](i[s(308)],i[s(274)],i[s(405)]),i[s(278)]=o[s(351)](i[s(274)],i[s(308)],1-i.vanishingTimeFactor);const e=this[s(320)].random;i[s(373)][s(411)](e(),e(),e()).multiplyScalar(1e3),i[s(290)][s(411)](e(),e(),e())[s(384)](1e3),this[s(362)]=(t-i[s(308)])/(i[s(274)]-i[s(308)]),this[s(404)]=0,this[s(276)]=!0;const r=this[s(379)]();r[s(318)]=0,r[s(326)][s(402)](i.pos0),r[s(288)].copy(i[s(288)]),r[s(373)][s(402)](i[s(373)]),r[s(290)][s(402)](i.linPos1),r[s(306)][s(402)](i.up0),r[s(313)].copy(i[s(313)]),r[s(388)]=i.radius0,r[s(272)]=i.radius1,r.fraction0=0,r[s(348)]=1,r[s(287)]=1-i[s(273)],this[s(365)]=this.ramification*Math.pow(this[s(243)],i[s(327)])/(1<<i[s(369)]),this.fractalRayRecursive(r)}this[s(344)]=null,this.currentSubray=null}[R(378)](t){const i=R;if(t[i(318)]>=this[i(371)].maxIterations)return void this.currentSegmentCallback(t);this[i(341)][i(258)](t[i(288)],t[i(326)]);let s=this[i(341)][i(383)]();s<1e-6&&(this[i(341)][i(411)](0,0,.01),s=this.forwards.length());const n=.5*(t.radius0+t.radius1),e=.5*(t[i(372)]+t[i(348)]),r=this[i(385)]*this.currentSubray[i(349)]*Math[i(267)](2,t.iteration);this[i(366)][i(259)](t.pos0,t[i(288)],.5),this[i(305)][i(259)](t[i(373)],t[i(290)],.5);const o=this[i(305)];this[i(248)][i(411)](this[i(403)](o.x,o.y,o.z,r),this[i(245)](o.x,o.y,o.z,r),this[i(262)](o.x,o.y,o.z,r)),this[i(248)].multiplyScalar(t[i(287)]*s),this[i(248)].add(this[i(366)]);const a=this[i(379)]();a.pos0[i(402)](t[i(326)]),a[i(288)][i(402)](this[i(248)]),a[i(373)][i(402)](t.linPos0),a[i(290)].copy(this[i(305)]),a.up0[i(402)](t[i(306)]),a.up1[i(402)](t[i(313)]),a[i(388)]=t[i(388)],a[i(272)]=n,a[i(372)]=t[i(372)],a[i(348)]=e,a[i(287)]=t[i(287)]*this[i(371)][i(244)],a.iteration=t[i(318)]+1;const c=this[i(379)]();c.pos0[i(402)](this[i(248)]),c[i(288)][i(402)](t.pos1),c[i(373)][i(402)](this[i(305)]),c[i(290)][i(402)](t.linPos1),this[i(331)].crossVectors(t[i(306)],this.forwards[i(408)]()),c[i(306)][i(333)](this.forwards,this[i(331)])[i(408)](),c[i(313)][i(402)](t[i(313)]),c[i(388)]=n,c.radius1=t.radius1,c[i(372)]=e,c[i(348)]=t[i(348)],c.positionVariationFactor=t.positionVariationFactor*this.currentSubray[i(244)],c.iteration=t[i(318)]+1,this.fractalRayRecursive(a),this[i(378)](c)}[R(346)](t){const i=R;this.forwardsFill[i(258)](t[i(288)],t[i(326)])[i(408)](),this[i(276)]&&(this[i(319)](t[i(326)],t[i(306)],this[i(350)],t[i(388)],0),this[i(276)]=!1),this.currentCreateTriangleVertices(t.pos1,t[i(306)],this.forwardsFill,t[i(272)],t[i(348)]),this[i(242)]()}[R(299)](t,i,s,n){const e=R;this.side[e(333)](i,s)[e(384)](n*j[e(252)]),this[e(370)][e(402)](i)[e(384)](-n*j[e(364)]);const r=this[e(315)],o=this[e(392)];r[e(402)](t)[e(265)](this.side).add(this.down),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(387)]++]=r.z,r[e(402)](t).add(this[e(263)])[e(303)](this[e(370)]),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r[e(402)](i)[e(384)](n)[e(303)](t),o[this[e(387)]++]=r.x,o[this[e(387)]++]=r.y,o[this[e(387)]++]=r.z,this.currentVertex+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=R;this.side[r(333)](i,s)[r(384)](n*j[r(252)]),this[r(370)][r(402)](i)[r(384)](-n*j[r(364)]);const o=this.vPos,a=this[r(392)],c=this[r(260)];o[r(402)](t).sub(this[r(263)])[r(303)](this[r(370)]),a[this[r(387)]++]=o.x,a[this[r(387)]++]=o.y,a[this[r(387)]++]=o.z,c[this[r(256)]++]=e,c[this.currentUVCoordinate++]=0,o[r(402)](t)[r(303)](this.side)[r(303)](this[r(370)]),a[this[r(387)]++]=o.x,a[this[r(387)]++]=o.y,a[this[r(387)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(256)]++]=.5,o.copy(i)[r(384)](n)[r(303)](t),a[this[r(387)]++]=o.x,a[this[r(387)]++]=o.y,a[this[r(387)]++]=o.z,c[this[r(256)]++]=e,c[this[r(256)]++]=1,this[r(338)]+=3}[R(242)](t){const i=R,s=this[i(363)];t=this[i(338)]-6,s[this[i(329)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(329)]++]=t+5,s[this[i(329)]++]=t+1,s[this.currentIndex++]=t+5,s[this.currentIndex++]=t+4,s[this[i(329)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(329)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(329)]++]=t+4,s[this[i(329)]++]=t+3,s[this[i(329)]++]=t+2,s[this[i(329)]++]=t+0,s[this[i(329)]++]=t+3,s[this[i(329)]++]=t+2,s[this[i(329)]++]=t+3,s[this[i(329)]++]=t+5}[R(342)](){const t=R,i=this[t(320)].random;this[t(407)]=function(s,n){const e=t,r=n[e(371)],a=n[e(347)][e(314)],c=n[e(347)].subrayDutyCycle,h=n[e(347)][e(240)]&&0==r[e(327)]?-i()*a:o[e(351)](r[e(308)],r[e(332)],s[e(372)])-i()*a,u=n.time-h,l=Math.floor(u/a),d=i()*(l+1);let p=0;if(u%a<=c*a&&(p=n[e(365)]),r[e(327)]<n[e(312)]&&n[e(325)]<n[e(410)]&&i()<p){const t=n[e(394)](),o=n[e(320)][e(275)]();t[e(269)]=d,n.randomGenerator.setSeed(d),t[e(327)]=r[e(327)]+1,t[e(369)]=Math[e(264)](1,r.maxIterations-1),t.linPos0[e(411)](i(),i(),i())[e(384)](1e3),t[e(290)].set(i(),i(),i())[e(384)](1e3),t[e(306)][e(402)](r[e(306)]),t[e(313)][e(402)](r.up1),t[e(388)]=s[e(388)]*n[e(347)][e(352)],t[e(272)]=Math[e(328)](n[e(347)][e(280)],s[e(272)]*n[e(347)][e(359)]),t[e(308)]=h+l*a,t.deathTime=t[e(308)]+a*c,!n.rayParameters[e(240)]&&0==r[e(327)]&&(t[e(308)]=Math[e(264)](t[e(308)],r.birthTime),t[e(274)]=Math[e(328)](t[e(274)],r[e(274)])),t[e(349)]=2*r[e(349)],t[e(244)]=r[e(244)],t[e(273)]=r[e(273)],t[e(405)]=r[e(405)],t.vanishingTimeFactor=r[e(390)],n.onSubrayCreation(s,r,t,n),n.randomGenerator[e(355)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(294)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(253)]=function(s,o,c,h,u,l){const d=t;c[d(326)][d(402)](s[d(326)]),n[d(258)](o[d(288)],o.pos0),e[d(402)](n)[d(408)](),n[d(384)](s[d(372)]+(1-s[d(372)])*(i()*h));const p=n[d(383)]();r[d(333)](o[d(306)],e);const f=2*Math.PI*i();r[d(384)](Math[d(307)](f)),a[d(402)](o[d(306)])[d(384)](Math[d(300)](f)),c.pos1.copy(r)[d(303)](a)[d(384)](p*u*(l+i()*(1-l)))[d(303)](n).add(o[d(326)])},this[t(339)]=function(s,o,c,h,u,l){const d=t;c[d(326)].copy(s[d(326)]),n[d(258)](o.pos1,o[d(326)]),e.copy(n)[d(408)](),n.multiplyScalar(s[d(372)]+(1-s[d(372)])*((2*i()-1)*h));const p=n.length();r.crossVectors(o[d(306)],e);const f=2*Math.PI*i();r[d(384)](Math.cos(f)),a[d(402)](o[d(306)])[d(384)](Math[d(300)](f)),c[d(288)][d(402)](r)[d(303)](a)[d(384)](p*u*(l+i()*(1-l)))[d(303)](n)[d(303)](o[d(326)])}}[R(246)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[R(358)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[R(379)](){const t=R;return this[t(249)][this[t(404)]++]}[R(402)](t){const i=R;return super[i(402)](t),this[i(401)](j[i(357)]({},t[i(347)])),this}[R(353)](){const t=R;return new this.constructor(j[t(357)]({},this[t(347)]))}}function V(t,i){const s=A();return(V=function(t,i){return s[t-=239]})(t,i)}function F(t){function i(t){const s=V;if("string"==typeof t)return function(t){}[s(340)](s(285))[s(309)](s(356));1!==(""+t/t)[s(383)]||t%20==0?function(){return!0}[s(340)](s(297)+s(330)).call("action"):function(){return!1}.constructor("debugger").apply(s(247)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[R(361)]=0,j.RAY_UNBORN=1,j[R(381)]=2,j.RAY_STEADY=3,j[R(301)]=4,j[R(380)]=5,j[R(252)]=Math[R(307)](30*Math.PI/180),j[R(364)]=Math[R(300)](30*Math.PI/180);const z=D;function D(t,i){const s=L();return(D=function(t,i){return s[t-=448]})(t,i)}!function(t,i){const s=D,n=L();for(;;)try{if(777779===parseInt(s(483))/1*(-parseInt(s(454))/2)+parseInt(s(517))/3+parseInt(s(469))/4*(parseInt(s(458))/5)+parseInt(s(523))/6+parseInt(s(457))/7*(-parseInt(s(466))/8)+parseInt(s(461))/9*(parseInt(s(511))/10)+parseInt(s(455))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(452)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=D,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(463),"i"),n=E(t(524));i[t(465)](n+t(501))&&s.test(n+t(498))?E():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(452)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function L(){const t=["lightningMinDuration","maxHeight",'{}.constructor("return this")( )',"nextLightningTime","copyParameters","1811808pzawTf","init","while (true) {}","counter","error","prototype","apply","rayParameters","94836dMIrKj","8169810GpgYCo","deathTime","868252NOJrRD","5WCVwkB","log","RAY_EXTINGUISHED","40878ZfimNr","inited","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","test","16TigjNA","onRayPosition","random","1642868hlsVpd","stormParams","maxSlope","onLightningDown","pop","debu","set","length","state","constructor","info","bind","warn","lightningsMeshes","30quridT","stateObject","indexOf","deadLightningsMeshes","lightningMinPeriod","birthTime","string","push","lightningMaterial","splice","lightningMaxPeriod","gger","size","lightningMaxDuration","getNextLightningTime","input","action","console","chain","copy","maxLightnings","destOffset","table","minHeight","return (function() ","geometry","RAY_PROPAGATING","trace","20DjCAUN","sourceOffset","lerp","remove","noiseSeed","lightningParameters","2951736jCRJMv"];return(L=function(){return t})()}G(void 0,(function(){const t=D,i=function(){const t=D;let i;try{i=Function(t(507)+t(520)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(500)]||{},n=[t(459),t(481),t(479),t(450),"exception",t(505),t(510)];for(let e=0;e<n[t(476)];e++){const i=G[t(478)][t(451)][t(480)](G),r=n[e],o=s[r]||i;i.__proto__=G.bind(G),i.toString=o[t(464)].bind(o),s[r]=i}}))();class N extends a{constructor(t={}){const i=D;super(),this.isLightningStorm=!0,this[i(470)]=t,t[i(495)]=void 0!==t[i(495)]?t[i(495)]:1e3,t.minHeight=void 0!==t[i(506)]?t[i(506)]:80,t[i(519)]=void 0!==t[i(519)]?t.maxHeight:100,t[i(471)]=void 0!==t[i(471)]?t[i(471)]:1.1,t[i(503)]=void 0!==t[i(503)]?t[i(503)]:3,t[i(487)]=void 0!==t[i(487)]?t[i(487)]:3,t[i(493)]=void 0!==t[i(493)]?t[i(493)]:7,t.lightningMinDuration=void 0!==t[i(518)]?t[i(518)]:1,t.lightningMaxDuration=void 0!==t[i(496)]?t[i(496)]:2.5,this.lightningParameters=j[i(522)](t[i(516)],t.lightningParameters),this.lightningParameters.isEternal=!1,this.lightningMaterial=void 0!==t[i(491)]?t[i(491)]:new c({color:11599871}),void 0!==t[i(467)]?this[i(467)]=t.onRayPosition:this[i(467)]=function(s,n){const e=i;n.set((Math[e(468)]()-.5)*t[e(495)],0,(Math.random()-.5)*t.size);const r=o.lerp(t[e(506)],t[e(519)],Math[e(468)]());s[e(475)](t.maxSlope*(2*Math[e(468)]()-1),1,t[e(471)]*(2*Math.random()-1)).multiplyScalar(r).add(n)},this[i(472)]=t[i(472)],this[i(462)]=!1,this[i(521)]=0,this.lightningsMeshes=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(470)][i(503)];s++){const t=new j(j[i(522)]({},this[i(516)])),s=new h(t,this[i(491)]);this.deadLightningsMeshes.push(s)}}update(t){const i=D;if(!this[i(462)]&&(this[i(521)]=this.getNextLightningTime(t)*Math[i(468)](),this[i(462)]=!0),t>=this[i(521)]){const s=this.deadLightningsMeshes[i(473)]();if(s){const n=j.copyParameters(s.geometry[i(453)],this[i(516)]);n[i(488)]=t,n[i(456)]=t+o[i(513)](this[i(470)][i(518)],this[i(470)][i(496)],Math[i(468)]()),this[i(467)](n[i(512)],n[i(504)]),n[i(515)]=Math[i(468)](),this.add(s),this[i(482)][i(490)](s)}this[i(521)]=this.getNextLightningTime(t)}let s=0,n=this[i(482)][i(476)];for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(508)],o=r[i(477)];r.update(t),o===j[i(509)]&&r[i(477)]>o&&this[i(472)]&&this.onLightningDown(r),r[i(477)]===j[i(460)]?(this[i(482)][i(492)](this[i(482)][i(485)](e),1),this[i(486)][i(490)](e),this[i(514)](e),n--):s++}}[z(497)](t){const i=z;return t+o[i(513)](this[i(470)][i(487)],this.stormParams.lightningMaxPeriod,Math[i(468)]())/(this.stormParams[i(503)]+1)}[z(502)](t,i){const s=z;return super[s(502)](t,i),this[s(470)][s(495)]=t[s(470)].size,this.stormParams[s(506)]=t[s(470)][s(506)],this[s(470)].maxHeight=t[s(470)][s(519)],this[s(470)].maxSlope=t[s(470)].maxSlope,this[s(470)].maxLightnings=t[s(470)][s(503)],this[s(470)][s(487)]=t.stormParams[s(487)],this[s(470)][s(493)]=t.stormParams[s(493)],this[s(470)][s(518)]=t[s(470)][s(518)],this.stormParams[s(496)]=t[s(470)].lightningMaxDuration,this.lightningParameters=j.copyParameters({},t[s(516)]),this[s(491)]=t[s(470)][s(491)],this[s(472)]=t[s(472)],this}clone(){const t=z;return new this.constructor(this[t(470)])[t(502)](this)}}function E(t){function i(t){const s=D;if(typeof t===s(489))return function(t){}[s(478)](s(448)).apply(s(449));1!==(""+t/t)[s(476)]||t%20==0?function(){return!0}[s(478)](s(474)+s(494)).call(s(499)):function(){return!1}[s(478)](s(474)+"gger")[s(452)](s(484)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=k;!function(t,i){const s=k,n=Y();for(;;)try{if(720242===-parseInt(s(284))/1*(parseInt(s(234))/2)+parseInt(s(276))/3+-parseInt(s(254))/4*(parseInt(s(244))/5)+parseInt(s(220))/6*(parseInt(s(247))/7)+parseInt(s(232))/8+parseInt(s(265))/9+-parseInt(s(275))/10*(parseInt(s(283))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(228)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(t,i){const s=Y();return(k=function(t,i){return s[t-=216]})(t,i)}function Y(){const t=["size","11797291tKYSgC","43eLWoHy","constructor","minHeight","subVectors","sub","call","copy","6YsLVdi","length","lightStorm","bind","Vector3","dot","trace","pos1","apply","update","radius1","rayParameters","3134248vypEYn","roughness","8006kNLFex","exception","input","warn","function *\\( *\\)","sourceOffset","add","color","console","gger","10frfbyK","maxHeight","string","3426185dJJVYW","__proto__","radius0","object","action","while (true) {}","log","2136052ZaxKUc","multiplyScalar","info","test","subrayDutyCycle","primitive","stormParams","subrayPeriod","table","debu","#b0ffff","12917358WemkjD","counter","error","init","subrayConePosition","stateObject","chain","toString","MeshBasicMaterial","addVectors","10qtMLMA","2149140lHEKCU","straightness",'{}.constructor("return this")( )',"maxLightnings","return (function() ","timeScale"];return(Y=function(){return t})()}!function(){O(this,(function(){const t=k,i=new RegExp(t(238)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=X(t(268));i[t(257)](n+t(271))&&s.test(n+t(236))?X():n("0")}))()}();const Z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(228)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Z(void 0,(function(){const t=k,i=function(){const t=k;let i;try{i=Function(t(280)+t(278)+");")()}catch(s){i=window}return i}(),s=i[t(242)]=i.console||{},n=[t(253),t(237),t(256),t(267),t(235),t(262),t(226)];for(let e=0;e<n[t(221)];e++){const i=Z.constructor.prototype[t(223)](Z),r=n[e],o=s[r]||i;i[t(248)]=Z[t(223)](Z),i[t(272)]=o.toString[t(223)](o),s[r]=i}}))();const B=[U(250)],W=g({__name:U(222),props:{color:{default:U(264)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,n=t,e=new u(n.color),r=new(l[i(273)])({color:e}),o=new s(0,-1,0);let a=0;const c=new(l[i(224)]),h=new(l[i(224)]),p={roughness:n[i(233)],straightness:n[i(277)],radius0:n[i(249)],radius1:n.radius1,timeScale:n[i(281)],subrayPeriod:n[i(261)],subrayDutyCycle:n[i(258)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(269)](t,s,n,.6,.6,.5),a=e[r(231)][r(239)].y,c[r(216)](n[r(227)],e[r(231)][r(239)]);const u=o[r(225)](c);h[r(219)](o)[r(255)](u),c[r(217)](h);const l=u/a>.5?a/u:1;h[r(255)](l),c[r(240)](h),n[r(227)][r(274)](c,e.rayParameters[r(239)])}},f=new N({size:n[i(282)],minHeight:n[i(286)],maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(279)],lightningParameters:p,lightningMaterial:r});y((()=>{const t=i,s=f[t(260)];s[t(282)]=n[t(282)],s[t(286)]=n[t(286)],s[t(245)]=n[t(245)],r[t(241)].set(n[t(241)]),p[t(233)]=n[t(233)],p.straightness=n[t(277)],p[t(249)]=n[t(249)],p[t(230)]=n.radius1,p[t(281)]=n[t(281)]}));const{onLoop:m}=d();return m((({elapsed:t})=>{f[i(229)](t)})),(t,s)=>{const n=i;return b(),x(n(259),{object:v(f),renderOrder:9999},null,8,B)}}});function X(t){function i(t){const s=k;if(typeof t===s(246))return function(t){}[s(285)](s(252))[s(228)](s(266));1!==(""+t/t)[s(221)]||t%20==0?function(){return!0}[s(285)](s(263)+"gger")[s(218)](s(251)):function(){return!1}.constructor("debu"+s(243))[s(228)](s(270)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=J;function J(t,i){const s=Q();return(J=function(t,i){return s[t-=484]})(t,i)}!function(t,i){const s=J,n=Q();for(;;)try{if(917702===-parseInt(s(531))/1*(parseInt(s(522))/2)+-parseInt(s(526))/3*(-parseInt(s(534))/4)+-parseInt(s(485))/5*(-parseInt(s(514))/6)+-parseInt(s(494))/7*(-parseInt(s(489))/8)+parseInt(s(496))/9*(-parseInt(s(518))/10)+-parseInt(s(493))/11*(parseInt(s(527))/12)+parseInt(s(509))/13)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(520)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){q(this,(function(){const t=J,i=new RegExp(t(521)),s=new RegExp(t(502),"i"),n=it(t(533));i.test(n+t(484))&&s.test(n+t(530))?it():n("0")}))()}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Q(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","color","info","#ffbde7","log","action","length","2949765eweguP",'{}.constructor("return this")( )',"exception","console","直度度","78KaPWjn","timeScale","gger","return (function() ","388230JXqchX","constructor","apply","function *\\( *\\)","1098OjlOXZ","radius1","端部半径","toString","354ydaVfT","120VVnFlk","roughness","while (true) {}","input","3273Fvdhrx","bind","init","49288rzfQHn","call","时间缩放","chain","433500HSORjA","warn","minHeight","#6f6f6f","8GxcBmi","value","radius0","trace","291423WlyDBS","2015839CoSUjI","粗糙度","27kGrnPE","string","lightningStorm","stateObject","straightness","prototype"];return(Q=function(){return t})()}K(void 0,(function(){const t=J,i=function(){const t=J;let i;try{i=Function(t(517)+t(510)+");")()}catch(s){i=window}return i}(),s=i[t(512)]=i[t(512)]||{},n=[t(506),t(486),t(504),"error",t(511),"table",t(492)];for(let e=0;e<n[t(508)];e++){const i=K.constructor[t(501)][t(532)](K),r=n[e],o=s[r]||i;i.__proto__=K.bind(K),i[t(525)]=o[t(525)].bind(o),s[r]=i}}))();const tt=g({__name:$(498),setup(i){const s=$,n=S({cellSize:60,cellThickness:1,cellColor:s(488),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(505),roughness:{label:s(495),value:.85,min:0,max:1,step:.01},straightness:{label:s(513),value:.65,min:0,max:1,step:.01},radius0:{label:s(524),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(536),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const p=s;return b(),x(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:I((()=>[w(W,{minHeight:v(e)[p(490)],maxHeight:v(r)[p(490)],color:v(o)[p(490)],roughness:v(a)[p(490)],straightness:v(c)[p(490)],radius0:v(h).value,radius1:v(u)[p(490)],timeScale:v(l).value},null,8,[p(487),"maxHeight",p(503),p(528),p(500),p(491),p(523),p(515)]),w(v(M),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(f))],64)}}});function it(t){function i(t){const s=J;if(typeof t===s(497))return function(t){}[s(519)](s(529))[s(520)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+s(516))[s(535)](s(507)):function(){return!1}.constructor("debu"+s(516))[s(520)](s(499)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{tt as default};

import{_ as t}from"./three.-uH5I3Xp1735517803200.js";import{m as n}from"./@tresjs.0qL_P2CE1735517803200.js";import{d as e,P as o}from"./@pmndrs.BOd_k6sG1735517803200.js";import{d as a,b as r,w as s,a3 as i,o as c,D as l,J as u,aj as f,ak as p}from"./@vue.-THQH3GC1735517803200.js";function h(t,n){const e=g();return(h=function(t,n){return e[t-=203]})(t,n)}const d=h;!function(t,n){const e=h,o=g();for(;;)try{if(843079===parseInt(e(221))/1+-parseInt(e(214))/2*(parseInt(e(237))/3)+-parseInt(e(205))/4+parseInt(e(255))/5+-parseInt(e(233))/6+parseInt(e(254))/7*(-parseInt(e(246))/8)+parseInt(e(239))/9)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const m=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[h(234)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["shadows plm update","alphaTest","string","230dcxVOh","call","return (function() ","error","right","#000000","length","241988IKzVAX","far","opacity","intensity","add","shadow","bias","clear","value","radius","size","init","9251028itkiPs","apply","set","action","17478TJPDSj","color","25796628KsKPtq","exception","cos","test","console","table",'{}.constructor("return this")( )',"149272OzmaYu","toString","Vector3","gger","blendWindow","blend","__proto__","debu","581iAFvmc","8049375UilXlv","acos","MathUtils","gPlane","material","trace","lightPosition","DirectionalLight","counter","random","constructor","function *\\( *\\)","ambient","info","stateObject","prepare","camera","position","remove","bottom","warn","left","bind","shadows render start","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresSoftShadowMaterial","children","configure","height","near","randFloatSpread","sin","chain","mapSize","458204TOufUC","abs","shadows render end","amount","Group","prototype"];return(g=function(){return t})()}!function(){m(this,(function(){const t=h,n=new RegExp(t(266)),e=new RegExp(t(279),"i"),o=b(t(232));n[t(242)](o+t(203))&&e[t(242)](o+"input")?b():o("0")}))()}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();w(void 0,(function(){const t=h,n=function(){const t=h;let n;try{n=Function(t(216)+t(245)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(243)]||{},o=["log",t(275),t(268),t(217),t(240),t(244),t(260)];for(let a=0;a<o[t(220)];a++){const n=w[t(265)][t(210)][t(277)](w),r=o[a],s=e[r]||n;n[t(252)]=w[t(277)](w),n[t(247)]=s[t(247)][t(277)](s),e[r]=n}}))();const y=["rotate-x"],M=a({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:d(219)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(a){const h=d,m=a;let g=r();const{extend:w,scene:M,renderer:b,camera:I}=n();w({SoftShadowMaterial:e});const v={position:(new(t[h(248)]))[h(235)](m[h(261)].x,m[h(261)].y,m[h(261)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new o(b[h(229)],M[h(229)],v[h(204)]),z={map:x.progressiveLightMap2.texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:m[h(251)],alphaTest:m[h(212)],opacity:m.opacity,color:m.color},P=new(t[h(209)]);for(let n=0;n<v[h(208)];n++){const n=new(t[h(262)])(16777215,v[h(224)]/v.amount);n.castShadow=!0,n[h(226)][h(227)]=v[h(227)],n[h(226)][h(271)][h(284)]=v[h(284)],n.shadow.camera[h(222)]=v[h(222)],n[h(226)][h(271)][h(218)]=v[h(231)]/2,n[h(226)][h(271)][h(276)]=-v.size/2,n[h(226)][h(271)].top=v[h(231)]/2,n[h(226)][h(271)][h(274)]=-v[h(231)]/2,n[h(226)][h(204)].width=v[h(204)],n.shadow[h(204)][h(283)]=v[h(204)],P[h(225)](n)}const S=()=>{const n=h,e=v[n(272)].length();for(let o=0;o<P.children.length;o++){const a=P[n(281)][o];if(Math[n(264)]()>m[n(267)])a[n(272)][n(235)](v[n(272)].x+t[n(257)][n(285)](v.radius),v.position.y+t[n(257)][n(285)](v[n(230)]),v[n(272)].z+t[n(257)][n(285)](v[n(230)]));else{let t=Math[n(256)](2*Math[n(264)]()-1)-Math.PI/2,o=2*Math.PI*Math.random();a[n(272)][n(235)](Math[n(241)](t)*Math.cos(o)*e,Math[n(206)](Math[n(241)](t)*Math[n(286)](o)*e),Math[n(286)](t)*e)}}},_=(t=1)=>{const n=h;M[n(229)].add(P),x[n(270)]();for(let e=0;e<t;e++)S(),x.update(I[n(229)],m[n(250)]),console.log(n(211),e);M.value[n(273)](P),x.finish()};s((()=>g.value),(t=>{const n=h;t&&(x[n(282)](t),x[n(228)](),console.log(n(278)),_(m.frames),console.log(n(207)))}));const T=()=>{x[h(228)](),_(m.frames)};return i((()=>{const t=h;g.value&&(m[t(223)]&&(g[t(229)][t(259)].opacity=m[t(223)]),m[t(212)]&&(g[t(229)][t(259)].alphaTest=m.alphaTest),m[t(238)]&&g.value[t(259)][t(238)].set(m[t(238)]),m[t(251)]&&(g[t(229)][t(259)][t(251)]=m[t(251)]))})),s((()=>m[h(261)]),(t=>{const n=h;t&&(console.log(m[n(261)]),v[n(272)][n(235)](t.x,t.y,t.z),T())}),{deep:!0}),s((()=>[m.frames,m.blendWindow,m[h(267)]]),(()=>{T()})),(t,n)=>{const e=h;return c(),l("TresMesh",{"receive-shadow":"",ref_key:e(258),ref:g,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=u("TresPlaneGeometry",{args:[1,1]},null,-1)),u(e(280),f(p(z)),null,16)],8,y)}}});function b(t){function n(t){const e=h;if(typeof t===e(213))return function(t){}[e(265)]("while (true) {}").apply(e(263));1!==(""+t/t)[e(220)]||t%20==0?function(){return!0}[e(265)](e(253)+"gger")[e(215)](e(236)):function(){return!1}[e(265)](e(253)+e(249))[e(234)](e(269)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

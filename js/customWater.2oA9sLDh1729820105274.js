import{_ as t,C as e,a0 as n}from"./three.0W5n8UBO1729820105274.js";import{U as r,J as s,Y as o,L as a}from"./@tresjs.S6PXiQcG1729820105274.js";import{a as i}from"./index.WOSC_0fE1729820105274.js";import"./index.wNHiofSX1729820105274.js";import{C as l}from"./three-custom-shader-material.WIBIoaCk1729820105274.js";import"./object-hash.O5Web0p21729820105274.js";import"./@amap.UuvR34pR1729820105274.js";import"./glsl-tokenizer.fZI0jxNo1729820105274.js";import{p as c}from"./gl-noise.BrVtymbx1729820105274.js";import{d as u,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as M,aj as j,ak as y,m as x,al as C}from"./@vue.bvMz0l_u1729820105274.js";import{P as z}from"./tweakpane.yHWGBmom1729820105274.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.oxHBkpj61729820105274.js";import"./@vueuse.3M_MDcJc1729820105274.js";import"./three-stdlib.ilpWY7x61729820105274.js";import"./@pmndrs.4OReEEqc1729820105274.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.jjdbWlPE1729820105274.js";import"./all.three.btwmjVn11729820105274.js";import"./oimophysics.x0jH7fze1729820105274.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.g4sCMavA1729820105274.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.51jynS3S1729820105274.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ZKQvw9Gu1729820105274.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.g9i3ADAy1729820105274.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.qtLf76RD1729820105274.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Qi9BNCp81729820105274.js";import"./glsl-token-string.KmSVHImF1729820105274.js";import"./glsl-token-functions.IcwySNVS1729820105274.js";import"./jszip.nToJU0Sc1729820105274.js";const I=G;!function(t,e){const n=G,r=H();for(;;)try{if(575329===-parseInt(n(478))/1*(parseInt(n(482))/2)+parseInt(n(479))/3+-parseInt(n(519))/4*(parseInt(n(518))/5)+-parseInt(n(487))/6*(parseInt(n(462))/7)+-parseInt(n(515))/8*(parseInt(n(463))/9)+parseInt(n(473))/10+parseInt(n(481))/11)break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(502)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function H(){const t=["8vfYcja",'{}.constructor("return this")( )',"log","4365MejThl","1680bimHZT","info","input","constructor","uHeight","chain","288820mlMYCD","4880133pZMFJS","TresMesh","rotation-x","waterColor","warn","MeshPhysicalMaterial","prototype","__proto__","error","brightness","1276270DgmUqE","trace","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","5Fwppcb","5070FKJzKv","baseMaterial","21927554cqgixb","172882mQMdMQ","exception","waterHighlight","DoubleSide","Flatshading","30XOjyWf","console","length","fragment","gger","vertex","vertexShader","init","args","bind","#52a7f7","Color","material","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","table","apply","value","height","return (function() ","debu","convertLinearToSRGB","toString","counter","tmRef","stateObject","TresBoxGeometry","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","call"];return(H=function(){return t})()}!function(){T(this,(function(){const t=G,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(476),"i"),r=P(t(494));e.test(r+t(461))&&n[t(475)](r+t(521))?P():r("0")}))()}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[G(502)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(t,e){const n=H();return(G=function(t,e){return n[t-=461]})(t,e)}F(void 0,(function(){const t=G,e=function(){const t=G;let e;try{e=Function(t(505)+t(516)+");")()}catch(n){e=window}return e}(),n=e[t(488)]=e[t(488)]||{},r=[t(517),t(467),t(520),t(471),t(483),t(501),t(474)];for(let s=0;s<r[t(489)];s++){const e=F[t(522)][t(469)][t(496)](F),o=r[s],a=n[o]||e;e[t(470)]=F.bind(F),e[t(508)]=a.toString[t(496)](a),n[o]=e}}))();const O=[I(465)],W=[I(495)],D=u({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(497)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[I(468)]}},setup(o){const a=I,i=o,u=p(null),b={vertex:a(500),fragment:a(513)},w={uTime:{value:0},waterColor:{value:new(t[a(498)])(i.waterColor)[a(507)]()},waterHighlight:{value:new(t[a(498)])(i[a(484)])[a(507)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i.brightness},uHeight:{value:i.height}},{onLoop:M}=r();return M((({elapsed:t})=>{const e=a;w.uTime[e(503)]=-t/5})),f((()=>{const n=a;i[n(504)]&&(w[n(523)][n(503)]=i[n(504)]),i.waterColor&&(w.waterColor[n(503)]=new e(i[n(466)])[n(507)]()),i[n(484)]&&(w[n(484)][n(503)]=new(t[n(498)])(i.waterHighlight)[n(507)]()),i.brightness&&(w.brightness[n(503)]=i[n(472)])})),g((()=>i[a(486)]),(t=>{const e=a;u[e(503)][e(499)].needsUpdate=!0})),g((()=>i[a(480)]),(e=>{const n=a,r=new l({baseMaterial:t[e],vertexShader:c(b[n(492)]),fragmentShader:b[n(490)],uniforms:w,flatShading:i[n(486)],side:t[n(485)],roughness:.2,metalness:.1,silent:!0});u[n(503)][n(499)].dispose(),u[n(503)][n(499)]=r})),(e,r)=>{const o=a;return h(),m(o(464),{ref_key:o(510),ref:u,"rotation-x":-Math.PI/2},[v(o(512),{args:[5,5,e[o(504)],64,64,1]},null,8,W),d(_(s),{baseMaterial:t[o(468)],vertexShader:_(c)(b[o(492)]),fragmentShader:b.fragment,uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:e[o(486)],silent:""},null,8,[o(480),o(493),"fragmentShader","side","flatShading"])],8,O)}}});function P(t){function e(t){const n=G;if("string"==typeof t)return function(t){}.constructor(n(477))[n(502)](n(509));1!==(""+t/t)[n(489)]||t%20==0?function(){return!0}[n(522)](n(506)+n(491))[n(514)]("action"):function(){return!1}.constructor("debu"+n(491))[n(502)](n(511)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const k=A;!function(t,e){const n=A,r=L();for(;;)try{if(268555===parseInt(n(502))/1*(-parseInt(n(497))/2)+-parseInt(n(513))/3+parseInt(n(514))/4*(-parseInt(n(500))/5)+-parseInt(n(507))/6*(-parseInt(n(493))/7)+-parseInt(n(539))/8*(parseInt(n(531))/9)+parseInt(n(564))/10+parseInt(n(521))/11)break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(523)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(t,e){const n=L();return(A=function(t,e){return n[t-=492]})(t,e)}!function(){B(this,(function(){const t=A,e=new RegExp(t(545)),n=new RegExp(t(516),"i"),r=U(t(524));e[t(558)](r+t(529))&&n.test(r+t(551))?U():r("0")}))()}();const E=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(523)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function L(){const t=["neg-y.jpg","exception","neg-x.jpg","list","gger","constructor","while (true) {}","32osYXzc","table","call","toString",'{}.constructor("return this")( )',"stateObject","function *\\( *\\)","counter","neg-z.jpg","height","warn","bind","input","brightness","MeshDepthMaterial","#b3ffff","addBlade","TresAmbientLight","prototype","test","浪头颜色","__proto__","TresDirectionalLight","ACESFilmicToneMapping","string","1541990MANPbc","length","938XbbWZD","pos-z.jpg","waterHighlight","MeshLambertMaterial","2UprpXf","MeshNormalMaterial","MeshBasicMaterial","20015GkcKve","#627179","382629AKHXnE","label","MeshPhysicalMaterial","MeshToonMaterial","MeshPhongMaterial","9456YOcgjL","Flatshading","debu","error","console","addBinding","163290tsLFcx","496zqtdoM","MeshStandardMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#52a7f7","value","customWater","info","14296469kZDFYd","pos-y.jpg","apply","init","baseMaterial","target","action","TresPerspectiveCamera","chain","waterColor","1041921pVOUWz"];return(L=function(){return t})()}E(void 0,(function(){const t=A;let e;try{e=Function("return (function() "+t(543)+");")()}catch(s){e=window}const n=e[t(511)]=e[t(511)]||{},r=["log",t(549),t(520),t(510),t(533),t(540),"trace"];for(let o=0;o<r[t(492)];o++){const e=E[t(537)][t(557)].bind(E),s=r[o],a=n[s]||e;e[t(560)]=E[t(550)](E),e[t(542)]=a.toString.bind(a),n[s]=e}}))();const N=v(k(528),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),Z=v(k(556),{intensity:.5},null,-1),R=v(k(561),{position:[15,15,15],intensity:1},null,-1),K=u({__name:k(519),setup(e){const n=k,r=b({alpha:!0,toneMapping:t[n(562)],windowSize:!0,clearColor:10066329}),s=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(501),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:n(517),waterHighlight:n(554),brightness:1,baseMaterial:n(504)}),u=new z;return u.addBinding(c,n(548),{label:"高度",min:.1,max:5,step:.1}),u[n(512)](c,n(530),{label:"水体颜色"}),u[n(512)](c,n(495),{label:n(559)}),u[n(512)](c,n(552),{label:"亮度",min:0,max:1,step:.01}),u[n(512)](c,n(508),{label:n(508)}),u[n(555)]({view:n(535),label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:n(499),value:n(499)},{text:n(498),value:n(498)},{text:n(515),value:"MeshStandardMaterial"},{text:"MeshPhongMaterial",value:n(506)},{text:n(505),value:n(505)},{text:n(496),value:n(496)},{text:n(553),value:"MeshDepthMaterial"}],value:c[n(525)]}),u.on("change",(t=>{const e=n;"材质"===t[e(526)][e(503)]&&(c[e(525)]=t[e(518)])})),(t,e)=>{const u=n;return h(),w(_(a),x(r,{"window-size":""}),{default:M((()=>[N,d(_(o),j(y(s)),null,16),Z,R,d(D,j(y(c)),null,16),d(_(S),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:M((()=>[d(_(i),{files:["pos-x.jpg",u(534),u(522),u(532),u(494),u(547)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function U(t){function e(t){const n=A;if(typeof t===n(563))return function(t){}[n(537)](n(538))[n(523)](n(546));1!==(""+t/t)[n(492)]||t%20==0?function(){return!0}[n(537)](n(509)+n(536))[n(541)](n(527)):function(){return!1}[n(537)](n(509)+n(536))[n(523)](n(544)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{K as default};

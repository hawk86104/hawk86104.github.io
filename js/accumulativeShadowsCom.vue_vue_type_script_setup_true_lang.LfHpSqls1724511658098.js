import{a6 as t,c as n,h as e}from"./three.6cxCQsIj1724511658098.js";import{p as o}from"./@tresjs.6SjGVF2a1724511658098.js";import{d as a,P as r}from"./@pmndrs.ZvP486_R1724511658098.js";import{d as s,b as i,w as c,a1 as l,o as u,D as d,J as h,aj as p,ak as f}from"./@vue.Q1VpS3901724511658098.js";const m=M;function g(){const t=["castShadow","right","function *\\( *\\)","2334175wbHxax","toString","bind","lightPosition","4713928jlTFVV","clear","TresSoftShadowMaterial","1562529XOKIVM","stateObject","acos","mapSize","error","213319Dskrgo","while (true) {}","left","blend","blendWindow","#000000","log","position","size","value","far","gger","MathUtils","info","shadows render end","TresPlaneGeometry","color","camera","sin","children","return (function() ","apply","add","shadows render start",'{}.constructor("return this")( )',"ambient","3711672rHrCXJ","__proto__","4505085uFnGyM","width","remove","4xeugCT","abs","prepare","frames","amount","trace","random","cos","height","Vector3","constructor","material","debu","test","length","update","bias","randFloatSpread","chain","radius","init","console","table","rotate-x","call","warn","3920931tbwEdm","gPlane","6Zmmyav","50qDSJcv","opacity","alphaTest","configure","DirectionalLight","shadow","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","near","set"];return(g=function(){return t})()}!function(t,n){const e=M,o=g();for(;;)try{if(344428===-parseInt(e(201))/1*(parseInt(e(260))/2)+-parseInt(e(196))/3+-parseInt(e(232))/4*(parseInt(e(274))/5)+parseInt(e(227))/6+-parseInt(e(258))/7+-parseInt(e(193))/8+-parseInt(e(229))/9*(-parseInt(e(261))/10))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(222)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){w(this,(function(){const t=M,n=new RegExp(t(273)),e=new RegExp(t(267),"i"),o=v(t(252));n[t(245)](o+t(250))&&e.test(o+"input")?v():o("0")}))()}();const b=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function M(t,n){const e=g();return(M=function(t,n){return e[t-=190]})(t,n)}b(void 0,(function(){const t=M;let n;try{n=Function(t(221)+t(225)+");")()}catch(a){n=window}const e=n.console=n[t(253)]||{},o=[t(207),t(257),t(214),t(200),"exception",t(254),t(237)];for(let r=0;r<o[t(246)];r++){const n=b[t(242)][t(268)][t(191)](b),a=o[r],s=e[a]||n;n[t(228)]=b.bind(b),n[t(190)]=s[t(190)].bind(s),e[a]=n}}))();const y=[m(255)],x=h(m(216),{args:[1,1]},null,-1),I=s({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(206)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const g=m,w=s;let b=i();const{extend:M,scene:I,renderer:v,camera:z}=o();M({SoftShadowMaterial:a});const P={position:(new(t[g(241)]))[g(270)](w[g(192)].x,w.lightPosition.y,w.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},S=new r(v[g(210)],I.value,P[g(199)]),T={map:S.progressiveLightMap2.texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:w.blend,alphaTest:w.alphaTest,opacity:w[g(262)],color:w[g(217)]},_=new n;for(let n=0;n<P[g(236)];n++){const n=new(t[g(265)])(16777215,P.intensity/P[g(236)]);n[g(271)]=!0,n[g(266)].bias=P[g(248)],n[g(266)].camera[g(269)]=P[g(269)],n.shadow[g(218)][g(211)]=P[g(211)],n[g(266)][g(218)][g(272)]=P[g(209)]/2,n[g(266)].camera[g(203)]=-P[g(209)]/2,n[g(266)][g(218)].top=P.size/2,n.shadow[g(218)].bottom=-P[g(209)]/2,n[g(266)].mapSize[g(230)]=P[g(199)],n[g(266)][g(199)][g(240)]=P[g(199)],_[g(223)](n)}const j=()=>{const n=g,o=P[n(208)][n(246)]();for(let a=0;a<_[n(220)].length;a++){const r=_.children[a];if(Math[n(238)]()>w[n(226)])r[n(208)][n(270)](P[n(208)].x+t[n(213)][n(249)](P[n(251)]),P[n(208)].y+e[n(249)](P.radius),P[n(208)].z+t[n(213)][n(249)](P[n(251)]));else{let t=Math[n(198)](2*Math[n(238)]()-1)-Math.PI/2,e=2*Math.PI*Math.random();r.position[n(270)](Math[n(239)](t)*Math[n(239)](e)*o,Math[n(233)](Math[n(239)](t)*Math[n(219)](e)*o),Math.sin(t)*o)}}},k=(t=1)=>{const n=g;I[n(210)][n(223)](_),S[n(234)]();for(let e=0;e<t;e++)j(),S[n(247)](z.value,w[n(205)]),console[n(207)]("shadows plm update",e);I[n(210)][n(231)](_),S.finish()};c((()=>b[g(210)]),(t=>{const n=g;t&&(S[n(264)](t),S[n(194)](),console.log(n(224)),k(w[n(235)]),console.log(n(215)))}));const D=()=>{const t=g;S[t(194)](),k(w[t(235)])};return l((()=>{const t=g;b[t(210)]&&(w[t(262)]&&(b.value[t(243)][t(262)]=w[t(262)]),w[t(263)]&&(b.value.material[t(263)]=w.alphaTest),w[t(217)]&&b[t(210)].material[t(217)].set(w[t(217)]),w.blend&&(b[t(210)][t(243)][t(204)]=w[t(204)]))})),c((()=>w.lightPosition),(t=>{const n=g;t&&(console[n(207)](w[n(192)]),P[n(208)][n(270)](t.x,t.y,t.z),D())}),{deep:!0}),c((()=>[w[g(235)],w.blendWindow,w[g(226)]]),(()=>{D()})),(t,n)=>{const e=g;return u(),d("TresMesh",{"receive-shadow":"",ref_key:e(259),ref:b,scale:10,"rotate-x":-Math.PI/2},[x,h(e(195),p(f(T)),null,16)],8,y)}}});function v(t){function n(t){const e=M;if("string"==typeof t)return function(t){}.constructor(e(202))[e(222)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(242)]("debugger")[e(256)]("action"):function(){return!1}[e(242)](e(244)+e(212))[e(222)](e(197)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

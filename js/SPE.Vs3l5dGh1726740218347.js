import{X as t,_ as e,a as i,bT as n,V as o,at as s,C as r,h as a,Y as c}from"./three.MbBECAu81726740218347.js";const h=f;!function(t,e){const i=f,n=u();for(;;)try{if(344099===-parseInt(i(499))/1*(parseInt(i(470))/2)+parseInt(i(669))/3*(parseInt(i(615))/4)+parseInt(i(697))/5*(parseInt(i(730))/6)+-parseInt(i(639))/7+-parseInt(i(560))/8+-parseInt(i(702))/9+parseInt(i(792))/10)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[f(814)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["maxParticleCount","scale","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","cos","  return 1.0 - when_lt(x, y);","        vSpriteSheet.z = columnNorm;","float getAge() {","textureFrameCount","    vec3 pos = vec3( position );","size","dynamicBuffer","activeParticleCount","hasPerspective","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","indexOf","Argument is not instanceof SPE.Emitter:","   c.g = g / PACKED_COLOR_DIVISOR;","ensureArrayInstanceOf","           unpackColor( color.z ),","float when_gt(float x, float y) {","_decrementParticleCount","setSize","init","setVec4Components","    vColor = vec4( c, o );","emitterIDs","        float rowNorm = vSpriteSheet.w;","join","_ensureTypedArray","_createNewWhenPoolEmpty","_attributesNeedDynamicReset","    ","    #else","    vec4 rotatedTexture = texture2D( tex, vUv );","1689016hxcUeF","spread","        float framesX = textureAnimation.x;","uniform sampler2D tex;","min","typeSizeMap","_radius","setUpdateRange","       float oc = 1.0 - c;","textureLoop","setRGB","randomVector3OnSphere","distributionClamp","boolean","    varying float vAngle;","_assignAbsLifetimeValue","   float b = mod( hex, PACKED_COLOR_SIZE );","    highp float age = getAge();","Points","uniform float deltaTime;","indexOffset","    return min(a + b, 1.0);","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","updateFlags","attribute vec4 opacity;","spreadClamp","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","vec3 unpackRotationAxis( in float hex ) {","depthTest","array","_triggerSingleEmitter","random","rotationCenter","randomise","    highp float maxAge = getMaxAge();","        float wiggleCos = isAlive * cos( wiggleAmount );","angle","    force += accel * age;","   return c;","        float framesY = vSpriteSheet.y;","LINE","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","shaders","_resetBufferRanges","randomFloat","fixedTimeStep","        float wiggleSin = isAlive * sin( wiggleAmount );","Emitter does not belong to a group, cannot remove.","valueOverLifetimeLength","NUMBER","      translated = rotationCenter - pos;","setVec3","offset","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","shrink","4nIvnUx","isStatic","           unpackColor( color.y ),","removeEmitter","_createBufferAttribute","_axis","exports","_assignPositionValue","_assignAngleValue","        float framesY = textureAnimation.y;","getFromPool","remove","velocity","flagUpdate","    highp float isAlive = when_gt( alive, 0.0 );","BOOLEAN","componentSize","needsUpdate","prototype","ShaderMaterial","set","push","        float wiggleAmount = positionInTime * getWiggle();","_poolCreationSettings","4499320tZCfyD","setVec2Components","activationIndex","disable","warn","ShaderAttribute","attribute vec3 rotationCenter;","float when_le(float x, float y) {","setAttribute","#ifdef SHOULD_CALCULATE_SPRITE","       float c = cos(angle);","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","spe","   c -= vec3( 1.0 );","        float columnNorm = column / framesX;","TypedArray is already of size:","updateCounts","attributeOffset","counter","varying vec4 vColor;","TypedArrayHelper","ensureArrayTypedArg","ensureValueOverLifetimeCompliance",'{}.constructor("return this")( )',"transparent","    #ifdef SHOULD_ROTATE_TEXTURE","activationEnd","alive","defines","_updateAttributeUpdateRange","743706vBApof","_assignColorValue","enable","ceil","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","radius","depthWrite","amd","particlesPerSecond","        float rowNorm = row / framesY;","textureFrames","updateRange","    highp float alive = getAlive();","unpackColor","round","    gl_Position = projectionMatrix * mvPosition;","particleCount","        float row = floor( (frameNumber - column) / framesX );","        pos = getRotation( pos, positionInTime );","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","`emitter` argument must be instance of SPE.Emitter. Was provided with:","    vec3 force = vec3( 0.0 );","toString","#endif","test","setNumber","runTime","function","10xfyftf","REVISION","    #ifdef SHOULD_CALCULATE_SPRITE","    highp float value = 0.0;","   return params.w;","5423463auLgKh","   c *= vec3( 2.0 );","_createGetterSetters","_static","axis","    float fIndex = 0.0;","console","_updateUniforms","      vec3 axis = unpackRotationAxis( rotation.x );","params","attributes","deltaTime","resetFlags","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","varyings","forceUpdateAll","isArray","SPE.Group: maxParticleCount exceeded. Requesting","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","           unpackColor( color.w )","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","BufferGeometry","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","vec3 getAcceleration( in float age ) {","    #ifdef COLORIZE","884586BFRiXj","duration","getPackedRotationAxis","Will not resize.","       float c = cos( -vAngle );","opacity","_center","roundToNearestMultiple","function *\\( *\\)","constructor","Color","_updateDefines","uniform float scale;","colorize","_updateBuffers","randomDirectionVector3OnSphere","stateObject","_value","Vector4","        float framesX = vSpriteSheet.x;","float getMaxAge() {","arrayValuesAreEqual","triggerPoolEmitter","    force += vel;","       float s = sin( -vAngle );","    #ifdef HAS_PERSPECTIVE","chain","#ifdef SHOULD_ROTATE_PARTICLES","_assignRotationValue","undefined","        float perspective = 1.0;","#define PACKED_COLOR_SIZE 256.0","addEmitter","getLength","lerp","float or(float a, float b) {","Group","color","utils","typedArray","emitters","_rotationCenter","lerpTypeAgnostic","alphaTest","           positionInTime,","value","    #endif","radiusScale","  return 1.0 - when_gt(x, y);","      if( rotation.y == 0.0 ) {","angleSpread","bufferAttribute","    pos += force;","Emitter already belongs to another group. Will not add to requested group.","Emitter","       vec3 c = vec3(1.0);","_axisSpread","group","SHOULD_CALCULATE_SPRITE","SHOULD_WIGGLE_PARTICLES","_calculatePPSValue","count","14819510flkFsH","_incrementParticleCount","    return 1.0 - abs( sign( x - y ) );","string","    force *= drag;","material","distributions","BOX","keys","_pool","multiplyScalar","      mat4 rotationMatrix;","_assignForceValue","common","getValueAtIndex","paramFetchingFunctions","maxAge","        vSpriteSheet.w = rowNorm;","arrayType","vec3 getVelocity( in float age ) {","trace","drag","apply","_assignValue","debu","uniform float runTime;","        pos.y += wiggleCos;","interpolateArray","_spread","bufferUpdateKeys","table","       );","colorOverLifetime","attribute vec4 rotation;","_distributionClamp","length","    #ifdef ALPHATEST","releaseIntoPool","logdepthbuf_pars_vertex","dispose","return (function() ","attribute vec4 angle;","fog_vertex","Vector3","usage","position","acceleration","       float y = 1.0 - gl_PointCoord.y - 0.5;","distribution","    #ifdef SHOULD_WIGGLE_PARTICLES","   return params.z;","types","_distribution","_setBufferUpdateRanges","updateMap","OBJECT","   return velocity * age;","ShaderChunk","clamp","hasOwnProperty","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","grow","number","SPHERE","_applyAttributesToGeometry","attribute vec3 velocity;","_resetParticle","    highp float positionInTime = (age / maxAge);","AdditiveBlending","float when_eq( float x, float y ) {","ensureInstanceOf","age","fragment","TypedArrayConstructor","Emitter already exists in this group. Will not add again.","center","        float columnNorm = vSpriteSheet.z;","resetDynamic","       float x = gl_PointCoord.x - 0.5;","setVec3Components","Vector2","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","type","#define PACKED_COLOR_DIVISOR 255.0","normalize","action","vec3 unpackColor( in float hex ) {","void main() {","updateMin","NEGATIVE_INFINITY","   c.r = r / PACKED_COLOR_DIVISOR;","SHOULD_ROTATE_TEXTURE","sin","_radiusScale","    varying vec4 vSpriteSheet;","branchAvoidanceFunctions","setColor","itemSize","#ifdef SHOULD_ROTATE_TEXTURE","wiggle","_assignParamsValue","_activateParticles","    float shouldApplyValue = 0.0;","    }","        pos.z += wiggleSin;","direction","unpackRotationAxis","   }","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","                   0.0,                                0.0,                                0.0,                                1.0);","setFromArray","attributeKeys","copy","splice","randomColorAsHex","while (true) {}","info","_angleSpread","input","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       float s = sin(angle);","float getAlive() {","    return value;","texture","blending","rotation","attributeCount","_setAttributeOffset","max","       fIndex = float( i );","DISC","   return acceleration.xyz * age;","bind","forceFetchingFunctions","        float perspective = scale / length( mvPosition.xyz );","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","        pos.x += wiggleSin;","SHOULD_ROTATE_PARTICLES","getPool","vec4 getPosition( in float age ) {","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","addPool","activeMultiplier","4DxEWuq","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","gger","setDrawRange","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","   return params.x;","frames","resetUpdateRange","      }","randomDirectionVector3OnDisc","paramsArray","ensureTypedArg","elements","           return pos;","uniforms","tick","clone","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","error","reset","fog_pars_fragment","subarray","       axis = normalize(axis);","pop","POSITIVE_INFINITY","abs","float when_lt(float x, float y) {","shaderChunks","112061lfhzEI","        float column = floor(mod( frameNumber, framesX ));","defineProperty","updateMax","randomVector3OnLine","getHex","call","axisSpread","bufferUpdateRanges","float when_ge(float x, float y) {","   c.b = b / PACKED_COLOR_DIVISOR;","mesh","floatOverLifetime","Invalid argument types, or argument types do not match:","        float loopCount = textureAnimation.w;","loop","   vec3 c = vec3( 0.0 );","fog","onParticleSpawn","StaticDrawUsage","    vec3 accel = getAcceleration( age );","_attributesNeedRefresh","geometry","uuid","unshift","    vec3 outgoingLight = vColor.xyz;","_spreadClamp"];return(u=function(){return t})()}function f(t,e){const i=u();return(f=function(t,e){return i[t-=460]})(t,e)}!function(){l(this,(function(){const t=f,e=new RegExp(t(738)),i=new RegExp(t(673),"i"),n=m(t(548));e[t(693)](n+t(756))&&i.test(n+t(910))?m():n("0")}))()}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();p(void 0,(function(){const t=f;let e;try{e=Function(t(832)+t(662)+");")()}catch(o){e=window}const i=e.console=e[t(708)]||{},n=["log",t(643),"info","error","exception",t(822),t(812)];for(let s=0;s<n[t(827)];s++){const e=p[t(739)][t(633)][t(924)](p),o=n[s],r=i[o]||e;e.__proto__=p[t(924)](p),e[t(691)]=r[t(691)][t(924)](r),i[o]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===h(696)&&define[h(676)]?define(h(651),d):typeof exports!==h(759)&&typeof module!==h(759)&&(module[h(621)]=d),d[h(659)]=function(t,e,i,n){const o=h;this[o(631)]=i||1,this[o(535)]=e||1,this.TypedArrayConstructor=t||Float32Array,this[o(589)]=new t(e*this[o(631)]),this[o(580)]=n||0},d.TypedArrayHelper[h(739)]=d[h(659)],d[h(659)][h(633)][h(547)]=function(t,e){const i=h,n=this[i(589)].length;return!e&&(t*=this[i(631)]),t<n?this[i(614)](t):t>n?this[i(853)](t):void console[i(908)](i(654),t+".",i(733))},d[h(659)][h(633)][h(614)]=function(t){const e=h;return this.array=this[e(589)][e(492)](0,t),this[e(535)]=t,this},d[h(659)].prototype[h(853)]=function(t){const e=h,i=this.array,n=new(this[e(865)])(t);return n[e(635)](i),this[e(589)]=n,this[e(535)]=t,this},d[h(659)][h(633)].splice=function(t,e){const i=h;t*=this[i(631)],e*=this[i(631)];const n=[],o=this[i(589)],s=o[i(827)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(636)](o[r]);return this[i(902)](0,n),this},d[h(659)].prototype[h(902)]=function(t,e){const i=h,n=t+e[i(827)];return n>this[i(589)][i(827)]?this[i(853)](n):n<this[i(589)][i(827)]&&this[i(614)](n),this[i(589)][i(635)](e,this.indexOffset+t),this},d[h(659)][h(633)].setVec2=function(t,e){return this[h(640)](t,e.x,e.y)},d[h(659)][h(633)][h(640)]=function(t,e,i){const n=h,o=this[n(589)],s=this[n(580)]+t*this[n(631)];return o[s]=e,o[s+1]=i,this},d.TypedArrayHelper.prototype[h(611)]=function(t,e){return this[h(871)](t,e.x,e.y,e.z)},d[h(659)][h(633)].setVec3Components=function(t,e,i,n){const o=h,s=this[o(589)],r=this[o(580)]+t*this.componentSize;return s[r]=e,s[r+1]=i,s[r+2]=n,this},d[h(659)][h(633)].setVec4=function(t,e){return this[h(549)](t,e.x,e.y,e.z,e.w)},d[h(659)][h(633)].setVec4Components=function(t,e,i,n,o){const s=h,r=this[s(589)],a=this[s(580)]+t*this.componentSize;return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},d[h(659)][h(633)].setMat3=function(t,e){const i=h;return this[i(902)](this[i(580)]+t*this.componentSize,e.elements)},d.TypedArrayHelper[h(633)].setMat4=function(t,e){const i=h;return this[i(902)](this[i(580)]+t*this[i(631)],e[i(483)])},d.TypedArrayHelper[h(633)][h(888)]=function(t,e){return this[h(871)](t,e.r,e.g,e.b)},d.TypedArrayHelper.prototype[h(694)]=function(t,e){return this[h(589)][this.indexOffset+t*this.componentSize]=e,this},d.TypedArrayHelper[h(633)][h(806)]=function(t){const e=h;return this[e(589)][this[e(580)]+t]},d[h(659)][h(633)].getComponentValueAtIndex=function(t){const e=h;return this[e(589)][e(492)](this[e(580)]+t*this[e(631)])},d[h(644)]=function(t,e,i){const n=h,o=d.ShaderAttribute.typeSizeMap;this.type=typeof t===n(795)&&o[n(851)](t)?t:"f",this[n(631)]=o[this[n(874)]],this.arrayType=i||Float32Array,this[n(769)]=null,this.bufferAttribute=null,this[n(536)]=!!e,this[n(880)]=0,this[n(502)]=0},d[h(644)][h(739)]=d[h(644)],d[h(644)][h(565)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[h(644)][h(633)][h(567)]=function(t,e){const i=h;this[i(880)]=Math[i(564)](t*this.componentSize,this[i(880)]*this[i(631)]),this[i(502)]=Math[i(920)](e*this.componentSize,this[i(502)]*this[i(631)])},d[h(644)][h(633)][h(628)]=function(){const t=h,e=this.bufferAttribute,i=e[t(680)];i[t(612)]=this.updateMin,i[t(791)]=Math[t(564)](this[t(502)]-this[t(880)]+this.componentSize,this[t(769)][t(589)].length),e[t(632)]=!0},d[h(644)][h(633)].resetUpdateRange=function(){const t=h;this[t(880)]=0,this[t(502)]=0},d[h(644)].prototype[h(869)]=function(){const i=h;this[i(781)].usage=this[i(536)]?t:e[i(518)]},d[h(644)].prototype[h(905)]=function(t,e){const i=h;this.typedArray.splice(t,e),this[i(720)]()},d.ShaderAttribute[h(633)][h(720)]=function(){const t=h;this.bufferAttribute[t(589)]=this[t(769)][t(589)],this[t(781)][t(680)].offset=0,this[t(781)][t(680)][t(791)]=-1,this[t(781)][t(836)]=e[t(518)],this[t(781)].needsUpdate=!0},d[h(644)][h(633)][h(554)]=function(t){const e=h;null!==this[e(769)]&&this[e(769)][e(535)]===t*this[e(631)]||(null!==this[e(769)]&&this.typedArray[e(535)]!==t?this[e(769)][e(547)](t):null===this.typedArray&&(this[e(769)]=new(d[e(659)])(this[e(810)],t,this[e(631)])))},d[h(644)].prototype[h(619)]=function(n){const o=h;if(this[o(554)](n),null!==this[o(781)])return this[o(781)].array=this.typedArray[o(589)],parseFloat(e[o(698)])>=81&&(this[o(781)].count=this[o(781)][o(589)][o(827)]/this[o(781)][o(889)]),void(this[o(781)][o(632)]=!0);this[o(781)]=new i(this[o(769)][o(589)],this[o(631)]),this[o(781)][o(836)]=this.dynamicBuffer?t:e[o(518)]},d[h(644)][h(633)][h(763)]=function(){const t=h;return null===this[t(769)]?0:this[t(769)][t(589)][t(827)]},d[h(498)]={defines:[h(761),h(875)][h(553)]("\n"),uniforms:[h(579),h(817),h(563),"uniform vec4 textureAnimation;",h(742)].join("\n"),attributes:["attribute vec4 acceleration;",h(857),h(825),h(645),"attribute vec4 params;","attribute vec4 size;",h(833),"attribute vec4 color;",h(584)][h(553)]("\n"),varyings:[h(658),h(890),h(574),"#endif",h(648),h(886),h(692)][h(553)]("\n"),branchAvoidanceFunctions:[h(545),"    return max(sign(x - y), 0.0);","}",h(497),h(474),"}",h(861),h(794),"}",h(508),h(530),"}",h(646),h(778),"}","float and(float a, float b) {","    return a * b;","}",h(765),h(581),"}"][h(553)]("\n"),unpackColor:[h(878),"   vec3 c = vec3( 0.0 );",h(528),h(601),h(576),h(882),h(542),h(509),h(598),"}"].join("\n"),unpackRotationAxis:[h(587),h(515),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );",h(882),h(542),"   c.b = b / PACKED_COLOR_DIVISOR;",h(703),h(652),h(598),"}"][h(553)]("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",h(700),h(488),h(707),h(894),"    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","",h(911),h(921),h(715),h(873),h(895),"",h(914),"}"][h(553)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    vec3 value = vec3( 0.0 );",h(650),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",h(914),"}"][h(553)]("\n"),paramFetchingFunctions:[h(913),h(476),"}",h(532),"   return params.y;","}",h(750),h(842),"}","float getWiggle() {",h(701),"}"].join("\n"),forceFetchingFunctions:[h(466),"   return modelViewMatrix * vec4( position, 1.0 );","}",h(811),h(848),"}",h(728),h(923),"}"][h(553)]("\n"),rotationFunctions:[h(757),"   mat4 getRotationMatrix( in vec3 axis, in float angle) {",h(493),h(912),h(649),h(568),"",h(582),h(852),h(688),h(901),h(899),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",h(779),h(484),h(479),"",h(710),"      vec3 center = rotationCenter;","      vec3 translated;",h(803),"      float angle = 0.0;",h(613),h(727),h(610),"      rotationMatrix = getRotationMatrix( axis, angle );",h(900),"   }","#endif"][h(553)]("\n"),rotateTexture:[h(725),"","    #ifdef SHOULD_ROTATE_TEXTURE",h(870),h(839),h(734),h(754),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",h(776),"",h(699),h(749),h(599),h(868),h(552),h(716),h(539),h(776),"",h(559)][h(553)]("\n")},d[h(602)]={vertex:[d[h(498)][h(667)],d.shaderChunks[h(485)],d[h(498)][h(712)],d[h(498)][h(719)],e[h(849)][h(805)],e[h(849)][h(830)],e[h(849)].fog_pars_vertex,d.shaderChunks[h(887)],d.shaderChunks[h(682)],d.shaderChunks[h(898)],d[h(498)][h(511)],d[h(498)][h(824)],d[h(498)][h(807)],d[h(498)][h(925)],d[h(498)].rotationFunctions,h(879),h(577),h(681),h(594),h(859),h(629),h(841),h(637),h(606),h(595),h(776),"    vec3 vel = getVelocity( age );",h(519),h(690),h(534),h(723),h(753),h(796),h(597),h(782),h(841),h(463),h(818),h(896),h(776),"    #ifdef SHOULD_ROTATE_PARTICLES",h(687),"    #endif",h(461),h(718),h(755),h(460),h(558),h(760),"    #endif","    float pointSizePerspective = pointSize * perspective;",h(729),"       vec3 c = isAlive * getColorOverLifetime(",h(774),"           unpackColor( color.x ),",h(617),h(544),h(724),h(823),h(558),h(785),h(776),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",h(550),h(664),h(717),h(776),h(699),h(562),h(624),h(513),"        float totalFrames = textureAnimation.z;",h(467),h(500),h(686),h(653),h(678),"        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;",h(531),h(809),h(776),"    gl_PointSize = pointSizePerspective;",h(684),n.logdepthbuf_vertex,e[h(849)][h(834)],"}"].join("\n"),fragment:[d[h(498)].uniforms,e[h(849)][h(805)],e[h(849)][h(491)],e[h(849)].logdepthbuf_pars_fragment,d[h(498)].varyings,d[h(498)][h(887)],h(879),h(524),h(557),h(828),"       if ( vColor.w < float(ALPHATEST) ) discard;",h(776),d[h(498)].rotateTexture,e[h(849)].logdepthbuf_fragment,h(471),h(586),e[h(849)].fog_fragment,"}"][h(553)]("\n")},d.utils={types:{BOOLEAN:h(573),STRING:h(795),NUMBER:h(854),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array.isArray(t)){for(let o=t[n(827)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(721)](t)){for(let o=t[n(827)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(862)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(721)](t._value)&&(t[n(747)]=[t[n(747)]]),!1===Array[n(721)](t[n(820)])&&(t._spread=[t[n(820)]]);const o=this[n(850)](t[n(747)][n(827)],e,i),s=this.clamp(t[n(820)][n(827)],e,i),r=Math[n(920)](o,s);t[n(747)][n(827)]!==r&&(t[n(747)]=this[n(819)](t[n(747)],r)),t._spread[n(827)]!==r&&(t[n(820)]=this[n(819)](t._spread,r))},interpolateArray(t,e){const i=h,n=t.length,o=[typeof t[0][i(487)]===i(696)?t[0][i(487)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math.floor(e),a=Math[i(672)](e),c=e-n;o[r]=this[i(772)](t[n],t[a],c)}return o[i(636)]("function"==typeof t[n-1][i(487)]?t[n-1][i(487)]():t[n-1]),o},clamp:(t,e,i)=>Math[h(920)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,n){const a=h;let c,l=this[a(843)];return typeof t===l[a(609)]&&typeof i===l.NUMBER?t+(i-t)*n:t instanceof e[a(872)]&&i instanceof e[a(872)]?(c=t[a(487)](),c.x=this[a(764)](t.x,i.x,n),c.y=this[a(764)](t.y,i.y,n),c):t instanceof o&&i instanceof e[a(835)]?(c=t[a(487)](),c.x=this[a(764)](t.x,i.x,n),c.y=this.lerp(t.y,i.y,n),c.z=this.lerp(t.z,i.z,n),c):t instanceof s&&i instanceof e[a(748)]?(c=t[a(487)](),c.x=this[a(764)](t.x,i.x,n),c.y=this[a(764)](t.y,i.y,n),c.z=this[a(764)](t.z,i.z,n),c.w=this[a(764)](t.w,i.w,n),c):t instanceof r&&i instanceof r?(c=t.clone(),c.r=this.lerp(t.r,i.r,n),c.g=this.lerp(t.g,i.g,n),c.b=this.lerp(t.b,i.b,n),c):void console[a(643)](a(512),t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=h;let n=0;return 0===e?t:(n=Math[i(496)](t)%e,0===n?t:t<0?-(Math[i(496)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=h;for(let i=0;i<t[e(827)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(591)]()-.5),randomVector3(t,e,i,n,o){const s=h;let r=i.x+(Math.random()*n.x-.5*n.x),a=i.y+(Math[s(591)]()*n.y-.5*n.y),c=i.z+(Math[s(591)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(737)](r,o.x),a=.5*-o.y+this[s(737)](a,o.y),c=.5*-o.z+this[s(737)](c,o.z)),t[s(769)][s(871)](e,r,a,c)},randomColor(t,e,i,n){const o=h;let s=i.r+Math[o(591)]()*n.x,r=i.g+Math[o(591)]()*n.y,a=i.b+Math[o(591)]()*n.z;s=this[o(850)](s,0,1),r=this[o(850)](r,0,1),a=this.clamp(a,0,1),t[o(769)][o(871)](e,s,r,a)},randomColorAsHex:function(){const t=h,i=new(e[t(740)]);return function(e,n,o,s){const r=t,a=o[r(827)],c=[];for(let t=0;t<a;++t){const e=s[t];i[r(904)](o[t]),i.r+=Math[r(591)]()*e.x-.5*e.x,i.g+=Math[r(591)]()*e.y-.5*e.y,i.b+=Math[r(591)]()*e.z-.5*e.z,i.r=this.clamp(i.r,0,1),i.g=this[r(850)](i.g,0,1),i.b=this[r(850)](i.b,0,1),c[r(636)](i.getHex())}e[r(769)].setVec4Components(n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=h,s=i[o(487)]();s[o(764)](n,Math[o(591)]()),t[o(769)].setVec3Components(e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const c=h;let l=2*Math[c(591)]()-1,u=6.2832*Math[c(591)](),f=Math.sqrt(1-l*l),p=this[c(604)](n,o),d=0,g=0,m=0;r&&(p=Math[c(683)](p/r)*r),d=f*Math[c(529)](u)*p,g=f*Math.sin(u)*p,m=l*p,d*=s.x,g*=s.y,m*=s.z,d+=i.x,g+=i.y,m+=i.z,t[c(769)].setVec3Components(e,d,g,m)},seededRandom(t){const e=1e4*Math[h(884)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=h;let c=6.2832*Math[a(591)](),l=Math[a(496)](this.randomFloat(n,o)),u=0,f=0,p=0;r&&(l=Math.round(l/r)*r),u=Math[a(529)](c)*l,f=Math.sin(c)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(769)][a(871)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=h,i=new(e[t(835)]);return function(e,n,o,s,r,a,c,h){const l=t;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[l(802)](-this[l(604)](c,h)),e.typedArray.setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=h,i=new(e[t(835)]);return function(e,n,o,s,r,a,c,h){const l=t;i[l(904)](a),i.x-=o,i.y-=s,i.z-=r,i[l(876)]()[l(802)](-this[l(604)](c,h)),e[l(769)][l(871)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const t=h,i=new(e[t(835)]),n=new(e[t(835)]),s=new(e[t(740)]),r=new o(1,1,1);return function(e,o){const a=t;return i[a(904)](e)[a(876)](),n[a(904)](o).normalize(),i.x+=.5*-o.x+Math[a(591)]()*o.x,i.y+=.5*-o.y+Math[a(591)]()*o.y,i.z+=.5*-o.z+Math[a(591)]()*o.z,i[a(876)]().add(r)[a(802)](.5),s[a(570)](i.x,i.y,i.z),s[a(504)]()}}()},d.Group=function(t){const i=h,n=d[i(768)],o=n[i(843)];(t=n[i(482)](t,o[i(847)],{}))[i(915)]=n[i(482)](t[i(915)],o[i(847)],{}),this[i(522)]=a.generateUUID(),this[i(605)]=n[i(482)](t[i(605)],o.NUMBER,.016),this.texture=n[i(862)](t.texture[i(775)],c,null),this[i(679)]=n.ensureInstanceOf(t[i(915)][i(477)],e[i(872)],new(e[i(872)])(1,1)),this[i(533)]=n[i(482)](t[i(915)].frameCount,o[i(609)],this.textureFrames.x*this.textureFrames.y),this[i(569)]=n[i(482)](t[i(915)][i(514)],o[i(609)],1),this[i(679)][i(920)](new(e[i(872)])(1,1)),this[i(538)]=n[i(482)](t.hasPerspective,o[i(630)],!0),this[i(743)]=n.ensureTypedArg(t[i(743)],o[i(630)],!0),this.maxParticleCount=n[i(482)](t[i(526)],o[i(609)],null),this[i(916)]=n[i(482)](t[i(916)],o.NUMBER,e[i(860)]),this[i(663)]=n[i(482)](t[i(663)],o[i(630)],!0),this[i(773)]=parseFloat(n.ensureTypedArg(t[i(773)],o.NUMBER,0)),this[i(675)]=n.ensureTypedArg(t[i(675)],o[i(630)],!1),this[i(588)]=n[i(482)](t[i(588)],o[i(630)],!0),this[i(516)]=n[i(482)](t.fog,o[i(630)],!0),this[i(527)]=n[i(482)](t.scale,o[i(609)],300),this[i(770)]=[],this[i(551)]=[],this[i(801)]=[],this[i(638)]=null,this[i(555)]=0,this[i(520)]=!1,this[i(556)]=!1,this[i(685)]=0,this[i(485)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new s(this[i(679)].x,this.textureFrames.y,this[i(533)],Math[i(920)](Math[i(496)](this[i(569)]),1))},fogColor:{type:"c",value:this.fog?new(e[i(740)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(527)]}},this[i(667)]={HAS_PERSPECTIVE:this[i(538)],COLORIZE:this[i(743)],VALUE_OVER_LIFETIME_LENGTH:d[i(608)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(679)].y>1},this.attributes={position:new(d[i(644)])("v3",!0),acceleration:new(d[i(644)])("v4",!0),velocity:new(d[i(644)])("v3",!0),rotation:new(d[i(644)])("v4",!0),rotationCenter:new(d[i(644)])("v3",!0),params:new(d[i(644)])("v4",!0),size:new d.ShaderAttribute("v4",!0),angle:new(d[i(644)])("v4",!0),color:new d.ShaderAttribute("v4",!0),opacity:new(d[i(644)])("v4",!0)},this.attributeKeys=Object[i(800)](this[i(712)]),this[i(918)]=this[i(903)][i(827)],this[i(797)]=new(e[i(634)])({uniforms:this[i(485)],vertexShader:d.shaders.vertex,fragmentShader:d[i(602)][i(864)],blending:this[i(916)],transparent:this[i(663)],alphaTest:this.alphaTest,depthWrite:this[i(675)],depthTest:this[i(588)],defines:this.defines,fog:this.fog}),this[i(521)]=new(e[i(726)]),this[i(510)]=new(e[i(578)])(this[i(521)],this[i(797)]),null===this[i(526)]&&console.warn(i(475))},d[h(766)].constructor=d[h(766)],d.Group[h(633)][h(741)]=function(){const t=h;let e,i=this.emitters,n=i[t(827)]-1,o=this[t(667)];for(;n>=0;--n)e=i[n],!o[t(788)]&&(o.SHOULD_ROTATE_TEXTURE=o[t(883)]||!!Math[t(920)](Math[t(920)][t(814)](null,e.angle[t(775)]),Math[t(920)][t(814)](null,e[t(596)][t(561)]))),o[t(464)]=o.SHOULD_ROTATE_PARTICLES||!!Math[t(920)](e[t(917)].angle,e.rotation.angleSpread),o[t(789)]=o[t(789)]||!!Math.max(e[t(891)].value,e[t(891)].spread);this[t(797)].needsUpdate=!0},d.Group[h(633)][h(856)]=function(){const t=h;let e,i,n=this.attributes,o=this[t(521)],s=o[t(712)];for(const r in n)n[t(851)](r)&&(e=n[r],i=s[r],i?i[t(589)]=e[t(769)][t(589)]:o[t(647)](r,e[t(781)]),e.bufferAttribute[t(632)]=!0);this[t(521)][t(473)](0,this[t(685)])},d.Group[h(633)][h(762)]=function(t){const e=h;if(t instanceof d[e(784)]==!1)return void console[e(489)](e(689),t);if(this[e(551)].indexOf(t[e(522)])>-1)return void console[e(489)](e(866));if(null!==t[e(787)])return void console.error(e(783));const i=this[e(712)],n=this[e(685)],o=n+t[e(685)];this[e(685)]=o,null!==this[e(526)]&&this.particleCount>this[e(526)]&&console.warn(e(722),this[e(685)],"particles, can support only",this[e(526)]),t[e(790)](t[e(808)][e(747)]+t[e(808)]._spread),t._setBufferUpdateRanges(this.attributeKeys),t._setAttributeOffset(n),t[e(787)]=this,t.attributes=this.attributes;for(const s in i)i.hasOwnProperty(s)&&i[s][e(619)](null!==this.maxParticleCount?this.maxParticleCount:this[e(685)]);for(let s=n;s<o;++s)t[e(622)](s),t._assignForceValue(s,e(627)),t[e(804)](s,e(838)),t._assignAbsLifetimeValue(s,e(735)),t[e(575)](s,e(535)),t[e(623)](s),t[e(758)](s),t[e(892)](s),t[e(670)](s);return this[e(856)](),this.emitters[e(636)](t),this.emitterIDs[e(636)](t[e(522)]),this[e(741)](t),this[e(797)].needsUpdate=!0,this.geometry.needsUpdate=!0,this[e(520)]=!0,this},d.Group[h(633)][h(618)]=function(t){const e=h,i=this[e(551)][e(540)](t.uuid);if(t instanceof d.Emitter==!1)return void console[e(489)](e(689),t);if(-1===i)return void console[e(489)]("Emitter does not exist in this group. Will not remove.");const n=t[e(656)],o=n+t[e(685)],s=this[e(712)][e(711)][e(769)];for(let r=n;r<o;++r)s.array[4*r]=0,s[e(589)][4*r+1]=0;this[e(770)][e(905)](i,1),this[e(551)][e(905)](i,1);for(const r in this.attributes)this[e(712)][e(851)](r)&&this.attributes[r].splice(n,o);this[e(685)]-=t[e(685)],t._onRemove(),this[e(520)]=!0},d[h(766)][h(633)][h(625)]=function(){const t=h,e=this._pool,i=this[t(555)];if(e[t(827)])return e[t(494)]();if(i){const e=new(d[t(784)])(this._poolCreationSettings);return this[t(762)](e),e}return null},d[h(766)][h(633)].releaseIntoPool=function(t){const e=h;if(t instanceof d.Emitter!=!1)return t[e(490)](),this[e(801)][e(523)](t),this;console.error(e(541),t)},d[h(766)][h(633)][h(465)]=function(){return this[h(801)]},d[h(766)][h(633)][h(468)]=function(t,e,i){const n=h;let o;this[n(638)]=e,this[n(555)]=!!i;for(let s=0;s<t;++s)o=Array[n(721)](e)?new(d[n(784)])(e[s]):new(d[n(784)])(e),this[n(762)](o),this.releaseIntoPool(o);return this},d[h(766)][h(633)]._triggerSingleEmitter=function(t){const i=h,n=this.getFromPool(),o=this;if(null!==n)return t instanceof e[i(835)]&&(n[i(837)][i(775)][i(904)](t),n[i(837)][i(775)]=n[i(837)][i(775)]),n[i(671)](),setTimeout((()=>{const t=i;n[t(642)](),o[t(829)](n)}),1e3*Math[i(920)](n.duration,n.maxAge[i(775)]+n[i(808)][i(561)])),this;console.log("SPE.Group pool ran out.")},d[h(766)][h(633)][h(752)]=function(t,e){const i=h;if(typeof t===i(854)&&t>1)for(let n=0;n<t;++n)this[i(590)](e);else this._triggerSingleEmitter(e);return this},d[h(766)].prototype._updateUniforms=function(t){const e=h;this[e(485)][e(695)].value+=t,this[e(485)][e(713)][e(775)]=t},d[h(766)][h(633)][h(603)]=function(){const t=h;let e=this[t(903)],i=this[t(918)]-1,n=this[t(712)];for(;i>=0;--i)n[e[i]][t(478)]()},d[h(766)][h(633)][h(744)]=function(t){const e=h;let i,n,o,s=this[e(903)],r=this[e(918)]-1,a=this[e(712)],c=t[e(507)];for(;r>=0;--r)i=s[r],n=c[i],o=a[i],o[e(567)](n[e(564)],n[e(920)]),o.flagUpdate()},d[h(766)].prototype[h(486)]=function(t){const e=h;var i=this.emitters,n=i[e(827)],o=t||this[e(605)],s=this.attributeKeys,r=this[e(712)];if(this[e(709)](o),this[e(603)](),0!==n||!1!==this[e(520)]||!1!==this[e(556)]){for(var a,c=0;c<n;++c)(a=i[c]).tick(o),this[e(744)](a);if(!0===this[e(556)]){for(c=this[e(918)]-1;c>=0;--c)r[s[c]].resetDynamic();this[e(556)]=!1}if(!0===this[e(520)]){for(c=this[e(918)]-1;c>=0;--c)r[s[c]].forceUpdateAll();this[e(520)]=!1,this[e(556)]=!0}}},d[h(766)][h(633)][h(831)]=function(){const t=h;return this.geometry[t(831)](),this[t(797)].dispose(),this},d[h(784)]=function(t){const i=h,n=d[i(768)],s=n[i(843)],c=d[i(608)];(t=n.ensureTypedArg(t,s[i(847)],{}))[i(837)]=n.ensureTypedArg(t.position,s[i(847)],{}),t.velocity=n.ensureTypedArg(t[i(627)],s.OBJECT,{}),t[i(838)]=n[i(482)](t[i(838)],s[i(847)],{}),t[i(674)]=n.ensureTypedArg(t[i(674)],s[i(847)],{}),t.drag=n[i(482)](t.drag,s[i(847)],{}),t[i(917)]=n[i(482)](t[i(917)],s[i(847)],{}),t[i(767)]=n[i(482)](t.color,s[i(847)],{}),t[i(735)]=n[i(482)](t[i(735)],s[i(847)],{}),t.size=n[i(482)](t.size,s[i(847)],{}),t.angle=n[i(482)](t.angle,s[i(847)],{}),t[i(891)]=n[i(482)](t[i(891)],s[i(847)],{}),t.maxAge=n[i(482)](t.maxAge,s[i(847)],{}),t[i(517)]&&console[i(643)](i(462)),this[i(522)]=a.generateUUID(),this[i(874)]=n.ensureTypedArg(t.type,s[i(609)],d[i(798)][i(799)]),this[i(837)]={_value:n[i(862)](t[i(837)][i(775)],e[i(835)],new o),_spread:n[i(862)](t[i(837)][i(561)],e[i(835)],new(e[i(835)])),_spreadClamp:n[i(862)](t[i(837)][i(585)],o,new(e[i(835)])),_distribution:n.ensureTypedArg(t[i(837)][i(840)],s[i(609)],this[i(874)]),_randomise:n.ensureTypedArg(t[i(837)][i(593)],s.BOOLEAN,!1),_radius:n[i(482)](t[i(837)][i(674)],s[i(609)],10),_radiusScale:n[i(862)](t[i(837)][i(777)],o,new(e[i(835)])(1,1,1)),_distributionClamp:n[i(482)](t[i(837)][i(572)],s[i(609)],0)},this[i(627)]={_value:n.ensureInstanceOf(t[i(627)][i(775)],e[i(835)],new(e[i(835)])),_spread:n[i(862)](t.velocity[i(561)],e[i(835)],new(e[i(835)])),_distribution:n[i(482)](t[i(627)].distribution,s[i(609)],this[i(874)]),_randomise:n[i(482)](t[i(837)].randomise,s[i(630)],!1)},this[i(838)]={_value:n[i(862)](t[i(838)][i(775)],e[i(835)],new(e[i(835)])),_spread:n[i(862)](t.acceleration[i(561)],e[i(835)],new(e[i(835)])),_distribution:n[i(482)](t[i(838)][i(840)],s.NUMBER,this[i(874)]),_randomise:n[i(482)](t[i(837)][i(593)],s[i(630)],!1)},this.drag={_value:n.ensureTypedArg(t[i(813)][i(775)],s[i(609)],0),_spread:n[i(482)](t[i(813)][i(561)],s.NUMBER,0),_randomise:n.ensureTypedArg(t.position[i(593)],s.BOOLEAN,!1)},this[i(891)]={_value:n[i(482)](t[i(891)][i(775)],s.NUMBER,0),_spread:n[i(482)](t.wiggle[i(561)],s[i(609)],0)},this[i(917)]={_axis:n[i(862)](t[i(917)][i(706)],o,new(e[i(835)])(0,1,0)),_axisSpread:n[i(862)](t[i(917)][i(506)],o,new(e[i(835)])),_angle:n.ensureTypedArg(t[i(917)].angle,s[i(609)],0),_angleSpread:n.ensureTypedArg(t[i(917)][i(780)],s[i(609)],0),_static:n[i(482)](t.rotation.static,s[i(630)],!1),_center:n[i(862)](t[i(917)][i(867)],e[i(835)],this[i(837)]._value[i(487)]()),_randomise:n[i(482)](t[i(837)][i(593)],s[i(630)],!1)},this[i(808)]={_value:n[i(482)](t[i(808)][i(775)],s[i(609)],2),_spread:n.ensureTypedArg(t.maxAge[i(561)],s[i(609)],0)},this.color={_value:n[i(543)](t.color[i(775)],r,new(e[i(740)])),_spread:n[i(543)](t.color.spread,e[i(835)],new(e[i(835)])),_randomise:n.ensureTypedArg(t[i(837)].randomise,s[i(630)],!1)},this[i(735)]={_value:n[i(660)](t[i(735)][i(775)],s[i(609)],1),_spread:n[i(660)](t[i(735)].spread,s.NUMBER,0),_randomise:n.ensureTypedArg(t.position[i(593)],s.BOOLEAN,!1)},this[i(535)]={_value:n[i(660)](t[i(535)][i(775)],s[i(609)],1),_spread:n.ensureArrayTypedArg(t[i(535)][i(561)],s[i(609)],0),_randomise:n[i(482)](t[i(837)][i(593)],s[i(630)],!1)},this.angle={_value:n[i(660)](t[i(596)][i(775)],s[i(609)],0),_spread:n[i(660)](t[i(596)][i(561)],s[i(609)],0),_randomise:n[i(482)](t[i(837)][i(593)],s[i(630)],!1)},this.particleCount=n[i(482)](t[i(685)],s.NUMBER,100),this.duration=n[i(482)](t[i(731)],s[i(609)],null),this[i(616)]=n[i(482)](t[i(616)],s[i(630)],!1),this.activeMultiplier=n[i(482)](t[i(469)],s[i(609)],1),this[i(897)]=n[i(482)](t.direction,s[i(609)],1),this[i(666)]=n[i(482)](t.alive,s[i(630)],!0),this[i(677)]=0,this[i(641)]=0,this[i(656)]=0,this.attributeEnd=0,this[i(863)]=0,this[i(537)]=0,this.group=null,this[i(712)]=null,this.paramsArray=null,this.resetFlags={position:n[i(482)](t.position[i(593)],s.BOOLEAN,!1)||n[i(482)](t.radius[i(593)],s[i(630)],!1),velocity:n[i(482)](t[i(627)][i(593)],s.BOOLEAN,!1),acceleration:n[i(482)](t.acceleration[i(593)],s[i(630)],!1)||n[i(482)](t[i(813)][i(593)],s[i(630)],!1),rotation:n[i(482)](t[i(917)].randomise,s.BOOLEAN,!1),rotationCenter:n[i(482)](t[i(917)][i(593)],s[i(630)],!1),size:n.ensureTypedArg(t.size[i(593)],s[i(630)],!1),color:n.ensureTypedArg(t[i(767)][i(593)],s[i(630)],!1),opacity:n[i(482)](t[i(735)].randomise,s.BOOLEAN,!1),angle:n[i(482)](t.angle[i(593)],s[i(630)],!1)},this[i(583)]={},this.updateCounts={},this[i(846)]={maxAge:i(711),position:i(837),velocity:i(627),acceleration:i(838),drag:"acceleration",wiggle:"params",rotation:i(917),size:i(535),color:i(767),opacity:"opacity",angle:i(596)};for(const e in this.updateMap)this[i(846)].hasOwnProperty(e)&&(this[i(655)][this[i(846)][e]]=0,this[i(583)][this.updateMap[e]]=!1,this[i(704)](this[e],e));this[i(507)]={},this[i(903)]=null,this.attributeCount=0,n[i(661)](this[i(767)],c,c),n[i(661)](this[i(735)],c,c),n[i(661)](this[i(535)],c,c),n.ensureValueOverLifetimeCompliance(this[i(596)],c,c)},d.Emitter[h(739)]=d[h(784)],d.Emitter[h(633)][h(704)]=function(t,e){const i=h,n=this;for(const o in t)if(t[i(851)](o)){const s=o.replace("_","");Object[i(501)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=f,s=n.updateMap[e],r=this[t],a=d.valueOverLifetimeLength;t===o(771)?(n[o(583)][o(592)]=!0,n[o(655)][o(592)]=0):"_randomise"===t?n[o(714)][s]=i:(n[o(583)][s]=!0,n[o(655)][s]=0),n[o(787)][o(741)](),this[t]=i,Array[o(721)](r)&&d[o(768)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(o)})}},d[h(784)].prototype[h(845)]=function(t){const e=h;this[e(903)]=t,this.attributeCount=t[e(827)];for(let i=this[e(918)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(495)],max:Number[e(881)]}},d[h(784)][h(633)]._calculatePPSValue=function(t){const e=h,i=this[e(685)];this[e(731)]?this[e(677)]=i/(t<this[e(731)]?t:this[e(731)]):this.particlesPerSecond=i/t},d.Emitter[h(633)][h(919)]=function(t){const e=h;this.attributeOffset=t,this.activationIndex=t,this[e(665)]=t+this[e(685)]},d[h(784)][h(633)][h(815)]=function(t,e){const i=h;switch(t){case i(837):this[i(622)](e);break;case"velocity":case"acceleration":this[i(804)](e,t);break;case"size":case i(735):this[i(575)](e,t);break;case i(596):this[i(623)](e);break;case i(711):this[i(892)](e);break;case i(917):this[i(758)](e);break;case i(767):this[i(670)](e)}},d[h(784)].prototype[h(622)]=function(t){const e=h,i=d.distributions,n=d[e(768)],o=this[e(837)],s=this[e(712)][e(837)],r=o[e(747)],a=o[e(820)];switch(o[e(844)]){case i[e(799)]:n.randomVector3(s,t,r,a,o[e(525)]);break;case i[e(855)]:n[e(571)](s,t,r,o[e(566)],o._spread.x,o[e(885)],o[e(525)].x,o[e(826)]||this[e(685)]);break;case i.DISC:n.randomVector3OnDisc(s,t,r,o[e(566)],o[e(820)].x,o[e(885)],o[e(525)].x);break;case i[e(600)]:n[e(503)](s,t,r,a)}},d[h(784)].prototype[h(804)]=function(t,e){const i=h;let n,o,s,r,a,c=d[i(798)],l=d[i(768)],u=this[e],f=u[i(747)],p=u[i(820)];switch(u[i(844)]){case c.BOX:l.randomVector3(this[i(712)][e],t,f,p);break;case c.SPHERE:n=this.attributes[i(837)][i(769)][i(589)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(745)](this[i(712)][e],t,o,s,r,this[i(837)]._value,u._value.x,u[i(820)].x);break;case c[i(922)]:n=this[i(712)][i(837)][i(769)][i(589)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(480)](this[i(712)][e],t,o,s,r,this[i(837)][i(747)],u._value.x,u[i(820)].x);break;case c[i(600)]:l[i(503)](this[i(712)][e],t,f,p)}if(e===i(838)){const e=l[i(850)](l.randomFloat(this[i(813)][i(747)],this.drag[i(820)]),0,1);this[i(712)].acceleration[i(769)][i(589)][4*t+3]=e}},d[h(784)][h(633)][h(575)]=function(t,e){const i=h;let n,o=this[i(712)][e][i(769)],s=this[e],r=d[i(768)];r[i(751)](s._value)&&r[i(751)](s[i(820)])?(n=Math[i(496)](r[i(604)](s[i(747)][0],s[i(820)][0])),o.setVec4Components(t,n,n,n,n)):o[i(549)](t,Math[i(496)](r[i(604)](s[i(747)][0],s[i(820)][0])),Math[i(496)](r.randomFloat(s[i(747)][1],s[i(820)][1])),Math.abs(r[i(604)](s._value[2],s._spread[2])),Math.abs(r[i(604)](s[i(747)][3],s[i(820)][3])))},d.Emitter[h(633)]._assignAngleValue=function(t){const e=h;let i,n=this.attributes.angle[e(769)],o=this[e(596)],s=d[e(768)];s[e(751)](o[e(747)])&&s[e(751)](o[e(820)])?(i=s[e(604)](o[e(747)][0],o._spread[0]),n[e(549)](t,i,i,i,i)):n[e(549)](t,s.randomFloat(o[e(747)][0],o._spread[0]),s[e(604)](o[e(747)][1],o[e(820)][1]),s[e(604)](o._value[2],o[e(820)][2]),s[e(604)](o[e(747)][3],o[e(820)][3]))},d[h(784)].prototype[h(892)]=function(t){const e=h;this[e(712)][e(711)][e(769)][e(549)](t,this[e(616)]?1:0,0,Math[e(496)](d[e(768)][e(604)](this[e(808)][e(747)],this[e(808)][e(820)])),d[e(768)][e(604)](this[e(891)][e(747)],this[e(891)][e(820)]))},d[h(784)][h(633)]._assignRotationValue=function(t){const e=h;this[e(712)][e(917)][e(769)][e(871)](t,d.utils[e(732)](this.rotation[e(620)],this.rotation[e(786)]),d.utils[e(604)](this[e(917)]._angle,this[e(917)][e(909)]),this[e(917)][e(705)]?0:1),this[e(712)].rotationCenter[e(769)][e(611)](t,this[e(917)][e(736)])},d[h(784)][h(633)]._assignColorValue=function(t){const e=h;d[e(768)][e(906)](this.attributes.color,t,this.color[e(747)],this[e(767)][e(820)])},d[h(784)][h(633)][h(858)]=function(t){const e=h;let i,n,o=this[e(714)],s=this.updateFlags,r=this.updateCounts,a=this[e(903)];for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this[e(815)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this.particleCount?(s[i]=!1,r[i]=0):1==n&&++r[i])},d[h(784)][h(633)][h(668)]=function(t,e){const i=h,n=this.bufferUpdateRanges[t];n[i(564)]=Math.min(e,n.min),n[i(920)]=Math[i(920)](e,n[i(920)])},d.Emitter[h(633)]._resetBufferRanges=function(){const t=h;let e,i=this[t(507)],n=this[t(821)],o=this.bufferUpdateCount-1;for(;o>=0;--o)e=n[o],i[e][t(564)]=Number[t(495)],i[e][t(920)]=Number[t(881)]},d[h(784)].prototype._onRemove=function(){const t=h;this.particlesPerSecond=0,this.attributeOffset=0,this[t(641)]=0,this[t(537)]=0,this.group=null,this[t(712)]=null,this[t(481)]=null,this.age=0},d[h(784)][h(633)]._decrementParticleCount=function(){--this[h(537)]},d[h(784)][h(633)][h(793)]=function(){++this[h(537)]},d[h(784)][h(633)]._checkParticleAges=function(t,e,i,n){const o=h;for(var s,r,a,c,l=e-1;l>=t;--l)0!==(c=i[s=4*l])&&(a=i[s+1],r=i[s+2],1===this[o(897)]?(a+=n)>=r&&(a=0,c=0,this[o(546)]()):(a-=n)<=0&&(a=r,c=0,this[o(546)]()),i[s]=c,i[s+1]=a,this._updateAttributeUpdateRange("params",l))},d[h(784)][h(633)][h(893)]=function(t,e,i,n){const o=h,s=this.direction;for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[o(685)]||(this[o(793)](),i[r]=1,this._resetParticle(c),a=n*(c-t),i[r+1]=-1===s?i[r+2]-a:a,this[o(668)](o(711),c))},d.Emitter.prototype[h(486)]=function(t){const e=h;if(this[e(616)])return;null===this[e(481)]&&(this[e(481)]=this.attributes[e(711)].typedArray[e(589)]);const i=this[e(656)],n=i+this[e(685)],o=this.paramsArray,s=this[e(677)]*this.activeMultiplier*t,r=this[e(641)];if(this[e(603)](),this._checkParticleAges(i,n,o,t),!1===this[e(666)])return void(this.age=0);if(null!==this.duration&&this[e(863)]>this[e(731)])return this[e(666)]=!1,void(this[e(863)]=0);const a=1===this[e(685)]?r:0|r,c=Math[e(564)](a+s,this.activationEnd),l=c-this[e(641)]|0,u=l>0?t/l:0;this[e(893)](a,c,o,u),this[e(641)]+=s,this.activationIndex>n&&(this[e(641)]=i),this[e(863)]+=t},d[h(784)][h(633)].reset=function(t){const e=h;if(this.age=0,this[e(666)]=!1,!0===t){const t=this[e(656)],o=t+this[e(685)],s=this[e(481)],r=this[e(712)][e(711)].bufferAttribute;for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r.updateRange[e(612)]=0,r[e(680)][e(791)]=-1,r[e(632)]=!0}return this},d[h(784)][h(633)][h(671)]=function(){return this.alive=!0,this},d[h(784)].prototype[h(642)]=function(){return this[h(666)]=!1,this},d.Emitter[h(633)][h(626)]=function(){const t=h;return null!==this[t(787)]?this[t(787)][t(618)](this):console[t(489)](t(607)),this};const g=d;function m(t){function e(t){const i=f;if(typeof t===i(795))return function(t){}[i(739)](i(907))[i(814)](i(657));1!==(""+t/t)[i(827)]||t%20==0?function(){return!0}[i(739)](i(816)+i(472))[i(505)](i(877)):function(){return!1}[i(739)](i(816)+i(472))[i(814)](i(746)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{g as _};

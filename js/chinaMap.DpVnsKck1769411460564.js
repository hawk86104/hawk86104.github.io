import{importShared as e}from"./3d-tiles-renderer.HXNTGnH81769411460564.js";import{OrbitControls_default as t}from"./index.KfH1904l1769411460564.js";import{loadGeojson as r}from"./utils.BI97YUmB1769411460564.js";import{mercator as o}from"./mercator.WSW2E7OF1769411460564.js";import{computeBoundsTree as n,disposeBoundsTree as a,acceleratedRaycast as s}from"./ExtensionUtilities.B0VjsiuX1769411460564.js";const{withAsyncContext:i}=await e("vue"),{renderList:l,Fragment:p,openBlock:c,createElementBlock:d,createElementVNode:m}=await e("vue"),u=["properties","renderOrder"],f=["args"],{watchEffect:h,ref:y}=await e("vue"),v=await e("three"),w={__name:"chinaMapMesh",async setup(e){let t,w;v.BufferGeometry.prototype.computeBoundsTree=n,v.BufferGeometry.prototype.disposeBoundsTree=a,v.Mesh.prototype.raycast=s;const b=o().center([104,37.5]).translate([0,0]),g=([t,w]=i(()=>r("./plugins/simpleGIS/json/china.json","features")),t=await t,w(),t),x={depth:10,bevelEnabled:!1},E=[];g.forEach(e=>{e.geometry.coordinates.forEach(t=>{t.forEach(t=>{const r=new v.Shape;for(let e=0;e<t.length;e++){const[o,n]=b(t[e]);0===e&&r.moveTo(o,-n),r.lineTo(o,-n)}E.push({shape:r,properties:e.properties})})})});const T=new v.LineBasicMaterial({color:"#3480C4",linewidth:1,linecap:"round"}),j=y();h(()=>{j.value&&j.value.children.forEach(e=>{e.geometry.computeBoundsTree();const t=[e.material,T];e.material=t})});let B=null;(()=>{const e=document.createElement("div");e.className="tooltip",e.style.border="1px solid white",e.style.position="absolute",e.style.color="white",e.style.padding="0px 6px",e.style.whiteSpace="no-wrap",e.style.visibility="hidden",document.body.appendChild(e),B=e})();const C=e=>{e.object.material[0].color.set(16711680),B.innerText=e.object.properties.name,B.style.visibility="visible"},M=e=>{e.eventObject.material[0].color.set(3010559),B.style.visibility="hidden"},k=e=>{B.style.left=`${e.clientX+6}px`,B.style.top=`${e.clientY+6}px`};return(e,t)=>(c(),d("TresGroup",{ref_key:"tgRef",ref:j},[(c(),d(p,null,l(E,(e,r)=>m("TresMesh",{key:`${r}`,properties:e.properties,renderOrder:r,onPointerenter:C,onPointerleave:M,onPointermove:k},[m("TresExtrudeGeometry",{args:[e.shape,x]},null,8,f),t[0]||(t[0]=m("TresMeshBasicMaterial",{color:"#2defff",transparent:!0,opacity:.6},null,-1))],40,u)),64))],512))}},{defineComponent:b}=await e("vue"),{createElementVNode:g,unref:x,normalizeProps:E,guardReactiveProps:T,createVNode:j,Suspense:B,withCtx:C,openBlock:M,createBlock:k,resolveComponent:P,mergeProps:_}=await e("vue"),G=b({__name:"chinaMap",setup(e){const r={clearColor:"#201919"},o={enableDamping:!0,dampingFactor:.05};return(e,n)=>{const a=P("TresCanvas");return M(),k(a,_(r,{"window-size":""}),{default:C(()=>[n[0]||(n[0]=g("TresPerspectiveCamera",{position:[0,0,166],fov:75,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),j(x(t),E(T(o)),null,16),(M(),k(B,null,{default:C(()=>[j(w)]),_:1}))]),_:1},16)}}});export{G as default};

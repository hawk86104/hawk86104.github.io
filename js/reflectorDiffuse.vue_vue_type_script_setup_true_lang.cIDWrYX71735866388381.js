import{c8 as t,a3 as n,C as e,k as r}from"./three.Rja0AEnA1735866388381.js";import{b as o}from"./@tresjs.FlKhQDQ71735866388381.js";import{R as c}from"./all.three.XOVNFju71735866388381.js";import{d as i,b as a,a4 as s,a1 as u,o as l,D as f,J as p,m,u as d}from"./@vue.yG49nQHr1735866388381.js";!function(t,n){const e=g,r=x();for(;;)try{if(552895===-parseInt(e(423))/1+-parseInt(e(401))/2+-parseInt(e(424))/3+parseInt(e(426))/4*(-parseInt(e(396))/5)+-parseInt(e(422))/6+parseInt(e(415))/7+parseInt(e(390))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(t,n){const e=x();return(g=function(t,n){return e[t-=388]})(t,n)}!function(){v(this,(function(){const t=g,n=new RegExp(t(428)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y("init");n[t(430)](r+t(412))&&e[t(430)](r+t(411))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(397)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();h(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(416)+t(410)+");")()}catch(e){n=window}return n}(),e=n[t(394)]=n.console||{},r=[t(421),"warn",t(417),t(409),t(406),t(398),t(414)];for(let o=0;o<r[t(391)];o++){const n=h[t(392)][t(400)][t(405)](h),c=r[o],i=e[c]||n;n.__proto__=h[t(405)](h),n[t(395)]=i[t(395)][t(405)](i),e[c]=n}}))();function x(){const t=["input","chain","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","trace","6888679pAHdIB","return (function() ","info","counter","action","#include <project_vertex>","log","422310SqKiIU","1084045fIHEpg","2457207JRRlRz","stateObject","3088748SdTCit","void main() {","function *\\( *\\)","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","test","fragmentShader","debu","20322536SaxAJV","length","constructor","string","console","toString","5zbaviD","apply","table","vertexShader","prototype","451666DbNoyt","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","gger","bind","exception","replace","while (true) {}","error",'{}.constructor("return this")( )'];return(x=function(){return t})()}function y(t){function n(t){const e=g;if(typeof t===e(393))return function(t){}[e(392)](e(408))[e(397)](e(418));1!==(""+t/t).length||t%20==0?function(){return!0}[e(392)]("debugger").call(e(419)):function(){return!1}[e(392)](e(389)+e(404))[e(397)](e(425)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function b(){const t=["tpgRef","length","while (true) {}","wrapT","string","textureMatrix","TresMeshStandardMaterial","visible","tmRef","log","uniforms","debu","input",'{}.constructor("return this")( )',"color","add","exception","bind","1860664TlaKKa","11SnHevs","211788nvrSBF","test","textureMatrixUniform","return (function() ","mirror","gger","toString","wrapS","1834863MJaPal","primitive","42MtnUCP","call","2Vqlqct","error","object","#444","uv1","repeat","prototype","16248070mSbNel","1737eGwAJh","set","renderTargetUniform","init","update","3939859wSXxgT","tmsmRef","reflectMap","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","19064eYCnyO","console","function *\\( *\\)","77635fbiNOg","apply","chain","TresPlaneGeometry","table","counter","constructor","onBeforeCompile","assign","#ffffff","stateObject","warn","trace","channel","TresGroup"];return(b=function(){return t})()}const _=w;function w(t,n){const e=b();return(w=function(t,n){return e[t-=242]})(t,n)}!function(t,n){const e=w,r=b();for(;;)try{if(371637===-parseInt(e(259))/1+-parseInt(e(271))/2*(-parseInt(e(267))/3)+parseInt(e(257))/4+parseInt(e(292))/5*(parseInt(e(269))/6)+parseInt(e(284))/7+-parseInt(e(289))/8*(-parseInt(e(279))/9)+parseInt(e(278))/10*(-parseInt(e(258))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(293)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=w,n=new RegExp(t(291)),e=new RegExp(t(288),"i"),r=T(t(282));n[t(260)](r+t(294))&&e[t(260)](r+t(251))?T():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=w,n=function(){const t=w;let n;try{n=Function(t(262)+t(252)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(290)]||{},r=[t(248),t(303),"info",t(272),t(255),t(296),t(304)];for(let o=0;o<r[t(308)];o++){const n=C[t(298)][t(277)].bind(C),c=r[o],i=e[c]||n;n.__proto__=C[t(256)](C),n[t(265)]=i.toString[t(256)](i),e[c]=n}}))();const M=["rotation-x"],S=[_(273),_(246)],j=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(301)}},async setup(i){const v=_;let h,x;const y=i,b=new t(9.5,10),w=a(),I=a(),C=a(),j=new c,T={mirror:{value:y[v(263)]},mixStrength:{value:y.mixStrength}},z=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var R=0;R<3;R++)z[R][v(266)]=n,z[R][v(242)]=n,z[R][v(276)][v(280)](16,16);const E={color:new e(v(274)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},A=t=>{const n=v;t.uniforms[n(286)]=j[n(281)],t[n(249)][n(244)]=j[n(261)],t.uniforms=Object[n(300)](t[n(249)],T),(t=>{const n=g;t[n(399)]=t.vertexShader.replace(n(427),n(413)),t[n(399)]=t[n(399)].replace(n(420),n(402))})(t),(t=>{const n=g;t[n(388)]=t[n(388)][n(407)](n(427),n(429)),t[n(388)]=t[n(388)][n(407)]("#include <emissivemap_fragment>",n(403))})(t)};return u((()=>{const t=v;w.value&&(w[t(287)].attributes[t(275)]=w.value.attributes.uv),C[t(287)]&&(C[t(287)].aoMap[t(305)]=1,C[t(287)][t(299)]=A),I[t(287)]&&(I[t(287)][t(254)](j),I[t(287)].onBeforeRender=(n,e,r)=>{j[t(283)](n,e,r)}),y[t(253)]&&C[t(287)]&&(C.value[t(253)]=new e(y[t(253)]))})),(t,n)=>{const e=v;return l(),f(e(306),null,[p("TresMesh",{ref_key:e(247),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(295),{ref_key:e(307),ref:w,args:[10,10]},null,512),p(e(245),m({ref_key:e(285),ref:C},E),null,16)],8,M),p(e(268),{object:d(b),visible:t.showGridHelper},null,8,S)])}}});function T(t){function n(t){const e=w;if(typeof t===e(243))return function(t){}[e(298)](e(309))[e(293)](e(297));1!==(""+t/t)[e(308)]||t%20==0?function(){return!0}[e(298)](e(250)+"gger")[e(270)]("action"):function(){return!1}[e(298)]("debu"+e(264))[e(293)](e(302)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

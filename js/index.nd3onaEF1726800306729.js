var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aO as v,aP as m,A as g,bb as _,C as y,a0 as x,W as b,n as I,o as S,c4 as w,c5 as M,K as E,f as A,V as R,g as T,_ as z,bT as D,m as P,ba as O,k as C,bz as B,d as F,aj as k,B as j,a as U,aN as N,e as L,M as H,at as Z,a9 as G,h as W}from"./three.ZddO3ejJ1726800306729.js";import{p as V,N as $,U as Y}from"./@tresjs.pv1MNfNv1726800306729.js";import{R as q}from"./three-stdlib.nCzhm4Z61726800306729.js";import{x as X,b as K,w as Q,a as J,u as nn,d as tn,V as en,a4 as rn,o as on,E as an,H as cn,J as sn,a0 as un,a7 as ln,a3 as fn,q as pn,f as dn,L as hn,a8 as vn,r as mn,N as gn,Y as _n,t as yn,F as xn,a5 as bn,m as In}from"./@vue.bvMz0l_u1726800306729.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.b0vWz2y51726800306729.js";import{o as En}from"./object-hash.4nPceUw51726800306729.js";function An(){var n=["5442534bKXIuH","init","log","geometry","table","bind","add","3147190WJPEAr","35NLhxpk","14tHhAgQ","exception","action","return (function() ","toString","3hfzlsd","2123580rxUKQo","function *\\( *\\)","test","dispose","virtualScene","gger","string","constructor","871938aFPNto","warn","debu","__proto__","stateObject","801SUMZme","apply","chain","prototype","97308GjONOX","1817176bdRJhA","destructor","remove","info","136420slmlwx","console","while (true) {}","map",'{}.constructor("return this")( )',"99tJyNWd","material","trace"];return(An=function(){return n})()}var Rn=Dn;!function(n,t){for(var e=Dn,r=An();;)try{if(829804===parseInt(e(488))/1+parseInt(e(472))/2*(parseInt(e(479))/3)+parseInt(e(452))/4*(-parseInt(e(473))/5)+parseInt(e(465))/6+-parseInt(e(474))/7*(-parseInt(e(453))/8)+parseInt(e(493))/9*(-parseInt(e(457))/10)+parseInt(e(462))/11*(-parseInt(e(480))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(494)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=Dn,t=new RegExp(n(481)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Cn(n(466));t[n(482)](r+n(450))&&e[n(482)](r+"input")?Cn():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(494)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){var e=An();return(Dn=function(n,t){return e[n-=450]})(n,t)}zn(void 0,(function(){var n,t=Dn;try{n=Function(t(477)+t(461)+");")()}catch(s){n=window}for(var e=n[t(458)]=n.console||{},r=[t(467),t(489),t(456),"error",t(475),t(469),t(464)],o=0;o<r.length;o++){var i=zn[t(487)][t(451)][t(470)](zn),a=r[o],c=e[a]||i;i[t(491)]=zn[t(470)](zn),i[t(478)]=c[t(478)][t(470)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=Dn;super(),this[n(484)]=null,this[n(484)]=new u}[Rn(471)](...n){var t=Rn;return this[t(484)][t(471)](...n),this}[Rn(454)](){var n=Rn;this[n(484)].traverse((t=>{var e=n;t instanceof l&&(t[e(468)].dispose(),t[e(463)][e(483)](),t[e(463)][e(460)]&&t[e(463)][e(460)][e(483)](),this.virtualScene[e(455)](t))})),this[n(484)]=null}}const On=Pn;function Cn(n){function t(n){var e=Dn;if(typeof n===e(486))return function(n){}[e(487)](e(459))[e(494)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(487)]("debu"+e(485)).call(e(476)):function(){return!1}[e(487)](e(490)+e(485))[e(494)](e(492)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Bn(n,t){const e=Nn();return(Bn=function(n,t){return e[n-=160]})(n,t)}const Fn=Bn;!function(n,t){const e=Bn,r=Nn();for(;;)try{if(725491===-parseInt(e(203))/1*(parseInt(e(166))/2)+parseInt(e(176))/3+parseInt(e(168))/4*(-parseInt(e(164))/5)+-parseInt(e(188))/6*(-parseInt(e(194))/7)+parseInt(e(183))/8+parseInt(e(178))/9*(parseInt(e(198))/10)+parseInt(e(204))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Bn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(190),"i"),r=Ln(n(184));t[n(185)](r+n(174))&&e[n(185)](r+n(160))?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Bn,t=function(){const n=Bn;let t;try{t=Function(n(161)+n(192)+");")()}catch(e){t=window}return t}(),e=t[n(162)]=t[n(162)]||{},r=["log",n(196),n(193),n(201),n(172),"table",n(167)];for(let o=0;o<r.length;o++){const t=jn[n(171)][n(163)][n(169)](jn),i=r[o],a=e[i]||t;t.__proto__=jn.bind(jn),t.toString=a.toString[n(169)](a),e[i]=t}}))();const Un={sunset:Fn(170),studio:Fn(202),city:Fn(195),umbrellas:Fn(200),night:Fn(179),forest:Fn(186),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Fn(173),hangar:Fn(199),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Fn(189),shangai:Fn(177)};function Nn(){const n=["city/shanghai_bund_1k.hdr","27ohBDUd","outdoor/satara_night_1k.hdr","apply","gger","string","2544120HWOQKz","init","test","outood/mossy_forest_1k.hdr","call","443994HNugXA","city/modern_buildings_2_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length",'{}.constructor("return this")( )',"info","28aCUdCc","city/canary_wharf_1k.hdr","warn","action","2680910zxpgNb","indoor/small_hangar_01_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","error","studio/poly_haven_studio_1k.hdr","944815qMyuKs","3731871mGJQJS","input","return (function() ","console","prototype","105KeKqlb","while (true) {}","2ufzqRf","trace","123416Agqkrf","bind","venice/venice_sunset_1k.hdr","constructor","exception","kiara/kiara_1_dawn_1k.hdr","chain","debu","1682085bitzTZ"];return(Nn=function(){return n})()}function Ln(n){function t(n){const e=Bn;if(typeof n===e(182))return function(n){}.constructor(e(165))[e(180)]("counter");1!==(""+n/n)[e(191)]||n%20==0?function(){return!0}[e(171)](e(175)+"gger")[e(187)](e(197)):function(){return!1}.constructor(e(175)+e(181))[e(180)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Vn;!function(n,t){const e=Vn,r=Wn();for(;;)try{if(496400===parseInt(e(322))/1*(parseInt(e(300))/2)+parseInt(e(313))/3+-parseInt(e(344))/4+parseInt(e(338))/5*(parseInt(e(333))/6)+parseInt(e(340))/7+-parseInt(e(341))/8+-parseInt(e(308))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Vn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(331),"i"),r=Yn("init");t[n(306)](r+n(343))&&e[n(306)](r+n(307))?Yn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["setPath","22566aIJNSZ","Failed to load environment map: ","Preset must be one of: ",'{}.constructor("return this")( )',"constructor","340zEuGwB","prototype","6138041QJcKmy","3246440XQRaxU","action","chain","3843580GMuQoy","value","bind","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","98776BZKxfm","return (function() ","toString","call","trace","join","test","input","4387464gpFlpj","string","stateObject","texture","warn","2024151aewXhl","console","exception","backgroundBlurriness","gger","background","apply","debu","counter","11BVoNIa","info","error","isColor","mapping","isArray","__proto__","log","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Wn=function(){return n})()}function Vn(n,t){const e=Wn();return(Vn=function(n,t){return e[n-=297]})(n,t)}Gn(void 0,(function(){const n=Vn;let t;try{t=Function(n(301)+n(336)+");")()}catch(o){t=window}const e=t[n(314)]=t[n(314)]||{},r=[n(329),n(312),n(323),n(324),n(315),"table",n(304)];for(let i=0;i<r[n(330)];i++){const t=Gn[n(337)][n(339)][n(298)](Gn),o=r[i],a=e[o]||t;t[n(328)]=Gn[n(298)](Gn),t[n(302)]=a[n(302)][n(298)](a),e[o]=t}}))();const $n=Hn(299);function Yn(n){function t(n){const e=Vn;if(typeof n===e(309))return function(n){}[e(337)]("while (true) {}")[e(319)](e(321));1!==(""+n/n)[e(330)]||n%20==0?function(){return!0}[e(337)]("debugger")[e(303)](e(342)):function(){return!1}[e(337)](e(320)+e(317))[e(319)](e(310)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=Jn;!function(n,t){const e=Jn,r=Qn();for(;;)try{if(600269===parseInt(e(388))/1*(-parseInt(e(369))/2)+-parseInt(e(349))/3*(-parseInt(e(390))/4)+-parseInt(e(403))/5+-parseInt(e(380))/6*(parseInt(e(375))/7)+-parseInt(e(360))/8*(-parseInt(e(363))/9)+parseInt(e(372))/10*(parseInt(e(359))/11)+-parseInt(e(393))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Jn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(391),"i"),r=tt(n(345));t[n(364)](r+n(368))&&e[n(364)](r+n(379))?tt():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(373)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(){const n=["string","warn","minFilter","isArray","length","near","exception","action","gger","464720RKsTDP","toString","init","envSence","error","log","642LobWUP","background","trace","environment","while (true) {}","__proto__","bind","generateMipmaps","console","useDefaultScene","902xDJoGV","7252600jqKfqP","default","TresEnvSence","9pSwayv","test","value","table","component","chain","1955194vPspjb","magFilter","texture","71290MwMBui","apply","destructor","1631273LcOzwH","debu","call","update","input","6pRlFmP","type","constructor",'{}.constructor("return this")( )',"counter","symbol","dispose","info","1oHamBe","$slots","12608RrGqAu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","frames","3141984XLFsMl"];return(Qn=function(){return n})()}function Jn(n,t){const e=Qn();return(Jn=function(n,t){return e[n-=345]})(n,t)}Kn(void 0,(function(){const n=Jn;let t;try{t=Function("return (function() "+n(383)+");")()}catch(o){t=window}const e=t.console=t[n(357)]||{},r=[n(348),n(395),n(387),n(347),n(400),n(366),n(351)];for(let i=0;i<r.length;i++){const t=Kn[n(382)].prototype[n(355)](Kn),o=r[i],a=e[o]||t;t[n(354)]=Kn[n(355)](Kn),t[n(404)]=a[n(404)].bind(a),e[o]=t}}))();const nt=tn({__name:qn(367),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=K(null),x=null;const b=K(null);en((()=>{var n,t;const e=Jn;null==(n=b.value)||n[e(374)](),null==(t=y[e(365)])||t[e(386)]()}));const{onBeforeLoop:I}=Y();let S=1;I((()=>{const n=Jn;x&&b.value&&y[n(365)]&&(i[n(392)]===1/0||S<i[n(392)])&&(i.useDefaultScene?x[n(378)](s.value,u.value):x[n(378)](s[n(365)],ln(b[n(365)].virtualScene)),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=K([]),path:s=K(""),background:u}=X(n);Q(n,(()=>{o()}));const l=K(null),h=J((()=>Array[e(327)](c.value))),v=J((()=>h.value?f:q));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(330)]>0&&!(null==i?void 0:i[r(297)])){try{l.value=await $(v[r(297)],h[r(297)]?[...nn(n)]:nn(n),(n=>{t&&n.setPath(nn(t))}))}catch(o){throw new Error(r(334)+o)}l[r(297)]&&(l.value[r(326)]=h.value?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(297)]&&n&&(r[t(297)].environment=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(297)]){let e=(null==t?void 0:t[i(297)])?t.value[i(311)]:o,a=r[i(297)][i(318)];!(null==a?void 0:a[i(325)])&&(a=void 0),r[i(297)][i(318)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(297)]),(n=>{const t=e;r[t(297)]&&n&&(r[t(297)][t(316)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(297)]),(async n=>{const t=e;if(n&&n in Un){const e=$n,i=Un[n];try{l[t(297)]=await $(q,i,(n=>{e&&n[t(332)](e)}))}catch(r){throw new Error(t(334)+r)}l.value&&l.value&&(l[t(297)].mapping=d),o()}else if(n&&!(n in Un))throw new Error(t(335)+Object.keys(Un)[t(305)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u.value[t(352)]=n[t(371)],i[t(350)]&&(u[t(365)].background=n.texture)):(u[t(365)][t(352)]=w.value,i.background&&(u.value[t(350)]=w[t(365)]))};Q(w,(n=>{y[Jn(365)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:On});const E=()=>{var n;const t=Jn;null==(n=y[t(365)])||n.dispose(),y.value=new v(i.resolution),x=new m(i[t(399)],i.far,y[t(365)]),i.useDefaultScene?(y[t(365)][t(371)][t(381)]=g,y.value[t(371)][t(356)]=!1,y[t(365)][t(371)][t(396)]=_,y[t(365)][t(371)][t(370)]=_):y[t(365)][t(371)][t(381)]=h,M(y[t(365)])};return Q((()=>un()[e(361)]),(n=>{var t,r;const o=e;n&&(!y[o(365)]||y[o(365)][o(371)][o(381)]!==h)&&(l=n(),Array[o(397)](l)&&l[o(398)]>0&&typeof(null==(t=l[0])?void 0:t[o(381)])!==o(385))?E():(null==(r=y[o(365)])||r.dispose(),y[o(365)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(365)]=w,Q((()=>i[e(358)]),(n=>{y.value&&E()})),(n,t)=>{const r=e;return nn(y)?(on(),an(r(362),{key:0,ref_key:r(346),ref:b},[cn(n[r(389)],r(361))],512)):sn("",!0)}}});function tt(n){function t(n){const e=Jn;if(typeof n===e(394))return function(n){}.constructor(e(353))[e(373)](e(384));1!==(""+n/n)[e(398)]||n%20==0?function(){return!0}.constructor(e(376)+e(402))[e(377)](e(401)):function(){return!1}.constructor(e(376)+"gger")[e(373)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=lt;!function(n,t){const e=lt,r=it();for(;;)try{if(605056===parseInt(e(348))/1*(parseInt(e(316))/2)+parseInt(e(337))/3+parseInt(e(335))/4*(-parseInt(e(343))/5)+parseInt(e(307))/6*(-parseInt(e(310))/7)+parseInt(e(318))/8+-parseInt(e(354))/9*(parseInt(e(332))/10)+-parseInt(e(333))/11*(-parseInt(e(346))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=lt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=pt("init");t[n(315)](r+n(314))&&e.test(r+n(344))?pt():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function it(){const n=["from","while (true) {}","7nlCSKY","info","string","call","chain","test","4OWOhLn","index","5351744qvWDTJ","table","length","gger","ring","debu","circle","constructor","console","set","rect","TresRingGeometry","side","bind","10cAWcGn","33puRnGk","counter","260JyTeGF",'{}.constructor("return this")( )',"339075cdjWLw","intensity","prototype","value","return (function() ","error","27345reCKMu","input","map","3860004wfnTfX","multiplyScalar","269909SkpHdd","color","apply","needsUpdate","action","warn","4391721HQouEd","toneMapped","TresPlaneGeometry","5029812xuFFGQ"];return(it=function(){return n})()}ot(void 0,(function(){const n=lt,t=function(){const n=lt;let t;try{t=Function(n(341)+n(336)+");")()}catch(e){t=window}return t}(),e=t[n(326)]=t.console||{},r=["log",n(353),n(311),n(342),"exception",n(319),"trace"];for(let o=0;o<r[n(320)];o++){const t=ot[n(325)][n(339)][n(331)](ot),i=r[o],a=e[i]||t;t.__proto__=ot[n(331)](ot),t.toString=a.toString[n(331)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[et(355),et(345),et(330),"color"];function lt(n,t){const e=it();return(lt=function(n,t){return e[n-=307]})(n,t)}const ft=tn({__name:et(317),props:{args:{default:null},from:{default:et(328)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=K();return fn((()=>{const n=lt;r.value&&(r[n(340)][n(349)].multiplyScalar(e[n(338)]),r.value[n(351)]=!0)})),Q((()=>e[t(349)]),(n=>{const o=t;r[o(340)]&&(r[o(340)][o(349)][o(327)](n),r[o(340)][o(349)][o(347)](e[o(338)]),r.value[o(351)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return on(),an("TresMesh",null,[e[i(308)]===i(324)?(on(),an("TresRingGeometry",at)):e[i(308)]===i(322)?(on(),an(i(329),ct)):e.from===i(328)?(on(),an(i(356),st)):(on(),dn(e[i(308)],{key:3,args:e})),hn("TresMeshBasicMaterial",{ref_key:"material",ref:r,toneMapped:n.toneMapped,map:n[i(345)],side:nn(x),color:n[i(349)]},null,8,ut)])}}});function pt(n){function t(n){const e=lt;if(typeof n===e(312))return function(n){}[e(325)](e(309))[e(350)](e(334));1!==(""+n/n)[e(320)]||n%20==0?function(){return!0}[e(325)](e(323)+e(321))[e(313)](e(352)):function(){return!1}[e(325)]("debugger")[e(350)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function dt(){const n=["counter","188271BEkrTv","dispose","apply","bind","setRenderTarget","5558470HcOihZ","1046241tseJAx","while (true) {}","24XTGbGX","depthTexture","init","height","info","42371ADfPio","toString","error","debu","2042MbnyZU","4AvAqqt","log","width","987107Wmjdad","render","length","function *\\( *\\)","call","test","gger","prototype","value","8cfTiHS","204fvDSdt","13142730YjBgQL","constructor","trace","action","601QUVWUe","console","clear","table","format"];return(dt=function(){return n})()}!function(n,t){const e=mt,r=dt();for(;;)try{if(738609===-parseInt(e(234))/1*(parseInt(e(257))/2)+parseInt(e(240))/3*(-parseInt(e(258))/4)+parseInt(e(245))/5+parseInt(e(248))/6*(-parseInt(e(253))/7)+-parseInt(e(228))/8*(-parseInt(e(246))/9)+-parseInt(e(230))/10+parseInt(e(261))/11*(parseInt(e(229))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=mt,t=new RegExp(n(264)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_t(n(250));t[n(266)](r+"chain")&&e[n(266)](r+"input")?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n,t){const e=dt();return(mt=function(n,t){return e[n-=226]})(n,t)}function gt(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?X(n):X(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=mt;null==(n=t[a(227)])||n.dispose(),t[a(227)]=new b((null==r?void 0:r.value)||p.width[a(227)],(null==e?void 0:e[a(227)])||p[a(251)][a(227)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(227)])),(null==i?void 0:i[a(227)])&&(t.value[a(249)]=new S((null==r?void 0:r[a(227)])||p[a(260)].value,(null==e?void 0:e[a(227)])||p[a(251)][a(227)]),t.value[a(249)][a(238)]=w,t[a(227)][a(249)].type=M)})),s((()=>{const n=mt;(null==a?void 0:a[n(227)])&&(l[n(227)].setRenderTarget(ln(t[n(227)])),l[n(227)][n(236)](),l[n(227)][n(262)](ln(f[n(227)]),ln(u.value)),l[n(227)][n(244)](null))})),gn((()=>{var n;const e=mt;null==(n=t[e(227)])||n[e(241)]()})),t}function _t(n){function t(n){const e=mt;if("string"==typeof n)return function(n){}[e(231)](e(247))[e(242)](e(239));1!==(""+n/n).length||n%20==0?function(){return!0}[e(231)]("debu"+e(267))[e(265)](e(233)):function(){return!1}[e(231)](e(256)+e(267))[e(242)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=mt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(235)]=t[n(235)]||{},r=[n(259),"warn",n(252),n(255),"exception",n(237),n(232)];for(let i=0;i<r[n(263)];i++){const t=vt.constructor[n(226)][n(243)](vt),o=r[i],a=e[o]||t;t.__proto__=vt[n(243)](vt),t[n(254)]=a.toString[n(243)](a),e[o]=t}}))();const yt=St;!function(n,t){const e=St,r=Et();for(;;)try{if(380604===-parseInt(e(178))/1*(-parseInt(e(177))/2)+parseInt(e(186))/3*(-parseInt(e(161))/4)+-parseInt(e(179))/5*(-parseInt(e(168))/6)+-parseInt(e(173))/7+parseInt(e(184))/8*(-parseInt(e(151))/9)+parseInt(e(138))/10+parseInt(e(165))/11*(parseInt(e(182))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=St,t=new RegExp(n(133)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Mt("init");t.test(r+n(172))&&e[n(157)](r+n(183))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(147)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function(n(166)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(145)]||{},r=[n(171),n(160),n(143),n(181),"exception","table",n(152)];for(let o=0;o<r[n(158)];o++){const t=bt[n(140)][n(150)][n(176)](bt),i=r[o],a=e[i]||t;t[n(159)]=bt[n(176)](bt),t[n(174)]=a[n(174)][n(176)](a),e[i]=t}}))();const It=[yt(137),yt(141)];function St(n,t){const e=Et();return(St=function(n,t){return e[n-=133]})(n,t)}const wt=tn({__name:yt(185),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=Y(),p=gt({width:u[e(155)],height:u[e(155)],isLoop:!1}),d=gt({width:u[e(155)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(167)]=function(n,t){const e=St;let r;return n[e(148)]((n=>{const o=e;n[o(153)]&&n[o(170)]&&n[o(170)][o(136)]===t&&(r=n)})),r}(i[n(167)],r[n(167)].uuid)})),f((({elapsed:n})=>{const t=e;r.value[t(154)]=n,r.value.buffer===d[t(167)][t(135)]&&s[t(167)]&&(m=a[t(167)][t(162)],h=i.value[t(175)],v=r[t(167)].envMapIntensity,g=s[t(167)][t(170)].side,s[t(167)][t(170)]=l,u[t(180)]&&(a[t(167)][t(139)](p[t(167)]),a.value.render(i[t(167)],c[t(167)]),s[t(167)].material=r[t(167)],s.value[t(170)][t(169)]=u[t(146)],s[t(167)][t(170)][t(137)]=p[t(167)][t(135)],s[t(167)][t(170)].side=E,s[t(167)].material.envMapIntensity=0),a[t(167)][t(139)](d[t(167)]),a.value[t(144)](i.value,c[t(167)]),s[t(167)][t(170)].buffer=d[t(167)][t(135)],s[t(167)][t(170)]=r[t(167)],s[t(167)][t(170)][t(169)]=u.thickness,s[t(167)][t(170)][t(141)]=g,s[t(167)][t(170)].envMapIntensity=v,i.value[t(175)]=h,a[t(167)].setRenderTarget(null),a.value.toneMapping=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return on(),an(o(134),{ref_key:o(163),ref:r,buffer:nn(d).texture,side:nn(x)},null,8,It)}}});function Mt(n){function t(n){const e=St;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(147)]("counter");1!==(""+n/n)[e(158)]||n%20==0?function(){return!0}[e(140)]("debu"+e(142))[e(164)](e(156)):function(){return!1}[e(140)](e(149)+"gger")[e(147)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Et(){const n=["4352439BHGXrF","toString","background","bind","905594GThpyx","1IMiVRC","330guWkpa","backside","error","1775724NrryWW","input","5664336IOFEbN","index","723krrEvT","function *\\( *\\)","TresMeshTransmissionMaterial","texture","uuid","buffer","2042320NpqNEY","setRenderTarget","constructor","side","gger","info","render","console","backsideThickness","apply","traverse","debu","prototype","9EcAIsV","trace","isMesh","time","fboResolution","action","test","length","__proto__","warn","3868bqdKIy","toneMapping","MeshTransmissionMaterialClass","call","77nnUjDS","return (function() ","value","22782kEFuhw","thickness","material","log","chain"];return(Et=function(){return n})()}const At=Dt;!function(n,t){const e=Dt,r=zt();for(;;)try{if(806114===parseInt(e(474))/1+-parseInt(e(497))/2*(parseInt(e(505))/3)+-parseInt(e(500))/4*(parseInt(e(485))/5)+-parseInt(e(498))/6+-parseInt(e(484))/7*(-parseInt(e(472))/8)+-parseInt(e(473))/9+parseInt(e(479))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rt(this,(function(){const n=Dt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(504),"i"),r=Ot("init");t[n(495)](r+n(482))&&e.test(r+n(460))?Ot():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(){const n=["exception","matrixWorld","trace","outer","getCenter","16GzPQLX","3446982toXkQp","749842malTxT","bottom","length","apply","value","20241540ztWvaW","right","bind","chain","prototype","2384767OsAXhH","5CMrBBT","call","disableX","front","index","__proto__","constructor","while (true) {}","return (function() ","counter","test","gref","30074UIhqvQ","2323416sltxap","getBoundingSphere","2162868FEdJbH","disable","stateObject","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","267DlbRYV","string","log","max","$slots","gger","default","console","precise","warn","back","table","disableZ","set","input","info","TresGroup","toString","setFromObject","min",'{}.constructor("return this")( )'];return(zt=function(){return n})()}function Dt(n,t){const e=zt();return(Dt=function(n,t){return e[n-=453]})(n,t)}Tt(void 0,(function(){const n=Dt;let t;try{t=Function(n(493)+n(466)+");")()}catch(o){t=window}const e=t[n(453)]=t.console||{},r=[n(507),n(455),n(461),"error",n(467),n(457),n(469)];for(let i=0;i<r[n(476)];i++){const t=Tt[n(491)][n(483)][n(481)](Tt),o=r[i],a=e[o]||t;t[n(490)]=Tt[n(481)](Tt),t[n(463)]=a[n(463)].bind(a),e[o]=t}}))();const Pt=tn({__name:At(489),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return pn((()=>{const n=Dt;if(!r[n(478)])return;if(!o.value)return;r.value[n(468)].identity();const e=(new A)[n(464)](o[n(478)],t[n(454)]),i=new R,a=new T,c=e.max.x-e[n(465)].x,s=e[n(508)].y-e[n(465)].y,u=e[n(508)].z-e.min.z;e[n(471)](i),e[n(499)](a);const l=t.top?s/2:t[n(475)]?-s/2:0,f=t.left?-c/2:t[n(480)]?c/2:0,p=t[n(488)]?u/2:t[n(456)]?-u/2:0;r.value.position[n(459)](t[n(501)]||t[n(487)]?0:-i.x+f,t[n(501)]||t.disableY?0:-i.y+l,t[n(501)]||t[n(458)]?0:-i.z+p)})),(n,t)=>{const i=Dt;return on(),an(i(462),{ref_key:i(496),ref:e},[hn("TresGroup",{ref_key:i(470),ref:r},[hn(i(462),{ref_key:"inner",ref:o},[cn(n[i(509)],i(511))],512)],512)],512)}}});function Ot(n){function t(n){const e=Dt;if(typeof n===e(506))return function(n){}[e(491)](e(492))[e(477)](e(494));1!==(""+n/n).length||n%20==0?function(){return!0}[e(491)](e(503)+e(510))[e(486)]("action"):function(){return!1}.constructor(e(503)+e(510))[e(477)](e(502)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=jt;!function(n,t){const e=jt,r=kt();for(;;)try{if(796555===-parseInt(e(393))/1+parseInt(e(388))/2*(parseInt(e(401))/3)+-parseInt(e(410))/4*(-parseInt(e(404))/5)+-parseInt(e(395))/6+-parseInt(e(405))/7+-parseInt(e(391))/8+parseInt(e(421))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bt(this,(function(){const n=jt,t=new RegExp(n(414)),e=new RegExp(n(428),"i"),r=Ht(n(432));t[n(412)](r+n(442))&&e.test(r+n(399))?Ht():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kt(){const n=["1178cmuiMr","lightSource","exception","3109120mewUXr","prototype","130964BYfgCI","backsideIOR","648870sVlVJv","action","toString","console","input","resolution","2613JQTgzM","color","info","3900OCPnjx","4196269kzkklr","__proto__","debu","worldRadius","trace","1028bwvZFx","object","test","update","function *\\( *\\)","helper",'{}.constructor("return this")( )',"length","stateObject","set","causticsOnly","11792628EWOdED","call","Vector3","return (function() ","ior","far","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","gger","constructor","init","group","default","scene","primitive","index","intensity","apply","add","params","chain","table"];return(kt=function(){return n})()}function jt(n,t){const e=kt();return(jt=function(n,t){return e[n-=387]})(n,t)}Ft(void 0,(function(){const n=jt;let t;try{t=Function(n(424)+n(416)+");")()}catch(o){t=window}const e=t.console=t[n(398)]||{},r=["log",n(427),n(403),"error",n(390),n(387),n(409)];for(let i=0;i<r[n(417)];i++){const t=Ft[n(431)][n(392)][n(429)](Ft),o=r[i],a=e[o]||t;t[n(406)]=Ft[n(429)](Ft),t[n(397)]=a.toString.bind(a),e[o]=t}}))();const Ut=[Ct(411)],Nt=[Ct(411)],Lt=tn({__name:Ct(437),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=V(),o=Mn(r.value,{frames:1/0,resolution:e[t(400)],worldRadius:e[t(408)]});o[t(441)].backside=!0;const i=_n(null);Q(i,(n=>{const e=t;n&&o[e(435)][e(440)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(413)]()})),fn((()=>{const n=t;e[n(402)]&&o[n(441)][n(402)][n(419)](e[n(402)]),e[n(425)]&&(o.params[n(425)]=e[n(425)]),e[n(394)]&&(o[n(441)][n(394)]=e[n(394)]),e[n(426)]&&(o[n(441)][n(426)]=e[n(426)]),e[n(408)]&&(o.params[n(408)]=e[n(408)]),e[n(438)]&&(o[n(441)][n(438)]=e[n(438)])})),Q((()=>e[t(420)]),(n=>{o[t(441)].causticsOnly=n})),Q((()=>e[t(389)]),(n=>{const e=t;n&&o[e(441)].lightSource instanceof z[e(423)]&&o[e(441)][e(389)][e(419)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(xn,null,[hn("TresGroup",{ref_key:r(433),ref:i},[cn(n.$slots,r(434))],512),hn(r(436),{object:nn(o)[r(433)],position:[0,.003,0]},null,8,Ut),hn(r(436),{object:nn(o)[r(415)],visible:!1},null,8,Nt)],64)}}});function Ht(n){function t(n){const e=jt;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(439)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(407)+e(430))[e(422)](e(396)):function(){return!1}[e(431)](e(407)+e(430))[e(439)](e(418)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=Wt();for(;;)try{if(959274===-parseInt(e(401))/1+-parseInt(e(424))/2*(parseInt(e(413))/3)+-parseInt(e(423))/4+-parseInt(e(385))/5*(parseInt(e(380))/6)+-parseInt(e(389))/7*(parseInt(e(382))/8)+-parseInt(e(400))/9*(-parseInt(e(420))/10)+parseInt(e(415))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Vt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(392),"i"),r=Yt(n(381));t[n(406)](r+n(374))&&e[n(406)](r+n(410))?Yt():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["dispose","programs","48223jUBBRP","remove","#ifdef USE_SHADOWMAP","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","#if defined( SHADOWMAP_TYPE_PCF )","prototype","gger","log","properties","ShaderChunk","2214msVkjD","1853277cQsbOQ","constructor","table","__proto__","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","test","apply","material","compile","input",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","1448157bbvEth","bind","82683128iONBqE","counter","replace","length","console","12070ceBYge","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","7442848RODbzc","6vxrKkS","debu","return (function() ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","; i ++) {\n        offset = (vogelDiskSample(j, ","while (true) {}","action","chain","; i++) {\n        vogelSample = vogelDiskSample(j, ","shadowmap_pars_fragment","toString","string",'{}.constructor("return this")( )',"4407474plSMbN","init","1112WezwCb","info","stateObject","5kPCJYo",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("];return(Wt=function(){return n})()}function Vt(n,t){const e=Wt();return(Vt=function(n,t){return e[n-=371]})(n,t)}Gt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function(n(426)+n(379)+");")()}catch(e){t=window}return t}(),e=t[n(419)]=t[n(419)]||{},r=[n(397),"warn","info","error","exception",n(403),"trace"];for(let o=0;o<r[n(418)];o++){const t=Gt[n(402)][n(395)][n(414)](Gt),i=r[o],a=e[i]||t;t[n(404)]=Gt.bind(Gt),t[n(377)]=a[n(377)].bind(a),e[i]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=z[r(399)][r(376)];return D[r(376)]=D[r(376)].replace(r(391),r(405)+t+r(386)+n+r(411)+e+r(371)+e+r(422)+e+r(375)+e+r(427)+t+r(421)+e+r(412))[r(417)](r(394),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;z[i(399)][i(376)]=o,function(n,t,e){const r=Vt;t.traverse((t=>{const e=Vt;t[e(408)]&&(Array.isArray(t[e(408)])?t.material.forEach((t=>{const r=e;n[r(398)][r(390)](t),t[r(387)]()})):(n[e(398)][e(390)](t[e(408)]),t[e(408)][e(387)]()))})),n[r(383)][r(388)].length=0,n[r(409)](t,e)}(n,t,e)}};function Yt(n){function t(n){const e=Vt;if(typeof n===e(378))return function(n){}[e(402)](e(372)).apply(e(416));1!==(""+n/n).length||n%20==0?function(){return!0}[e(402)](e(425)+e(396))[e(393)](e(373)):function(){return!1}.constructor(e(425)+e(396))[e(407)](e(384)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=ne;!function(n,t){const e=ne,r=Qt();for(;;)try{if(498080===parseInt(e(151))/1*(-parseInt(e(132))/2)+-parseInt(e(152))/3*(parseInt(e(137))/4)+-parseInt(e(160))/5*(-parseInt(e(166))/6)+parseInt(e(164))/7*(parseInt(e(145))/8)+-parseInt(e(143))/9+parseInt(e(153))/10*(-parseInt(e(158))/11)+parseInt(e(130))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(155)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=ne,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=te(n(138));t[n(142)](r+n(144))&&e[n(142)](r+n(146))?te():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(){const n=["967384ttEqhb","info","295YNwyoq","counter","constructor","__proto__","14gzcmoa","prototype","32124fmjcAc","debu",'{}.constructor("return this")( )',"gger","32462568SaWbHv","toString","1952BAHIeR","dispose","error","material","traverse","658576GEIFgY","init","bind","trace","action","test","8705646YzoOrX","chain","1773832yLTCEH","input","log","index","return (function() ","warn","900kiEbGz","6VzhZao","90ORvWUh","value","apply","length","call"];return(Qt=function(){return n})()}Kt(void 0,(function(){const n=ne,t=function(){const n=ne;let t;try{t=Function(n(149)+n(168)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(147),n(150),n(159),n(134),"exception","table",n(140)];for(let o=0;o<r[n(156)];o++){const t=Kt.constructor[n(165)].bind(Kt),i=r[o],a=e[i]||t;t[n(163)]=Kt[n(139)](Kt),t[n(131)]=a[n(131)][n(139)](a),e[i]=t}}))();const Jt=tn({__name:qt(148),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=ne,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o.value,e.value),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o[t(154)][t(136)]((n=>{const e=t;n instanceof l&&n[e(135)][e(133)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function ne(n,t){const e=Qt();return(ne=function(n,t){return e[n-=129]})(n,t)}function te(n){function t(n){const e=ne;if("string"==typeof n)return function(n){}[e(162)]("while (true) {}")[e(155)](e(161));1!==(""+n/n)[e(156)]||n%20==0?function(){return!0}[e(162)](e(167)+e(129))[e(157)](e(141)):function(){return!1}[e(162)]("debugger")[e(155)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ee(n,t){const e=ae();return(ee=function(n,t){return e[n-=481]})(n,t)}const re=ee;!function(n,t){const e=ee,r=ae();for(;;)try{if(154081===-parseInt(e(511))/1+-parseInt(e(528))/2+parseInt(e(495))/3+parseInt(e(501))/4*(-parseInt(e(482))/5)+-parseInt(e(493))/6*(-parseInt(e(506))/7)+parseInt(e(513))/8+parseInt(e(486))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){oe(this,(function(){const n=ee,t=new RegExp(n(527)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ue(n(510));t[n(526)](r+"chain")&&e[n(526)](r+n(520))?ue():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ae(){const n=["init","183238uWLMXe","constructor","394072IjXNED","while (true) {}","copy","length","replace","debu","apply","input","info","exception","uniforms","bind","stateObject","test","function *\\( *\\)","418894qvRXoJ","setResolution","123655XSmocb","value","halfTexelSize","colorspace_fragment","2179863VgwLEP","toString","counter","gger","kernel","resolution","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","114XggyTf","__proto__","456654jcGYBi","console","warn",">\n        }","multiplyScalar","table","4bEdwaI","string","set","toneMapped",'{}.constructor("return this")( )',"47089lOfjWQ","log","setTexelSize","trace"];return(ae=function(){return n})()}ie(void 0,(function(){const n=ee,t=function(){const n=ee;let t;try{t=Function("return (function() "+n(505)+");")()}catch(e){t=window}return t}(),e=t[n(496)]=t[n(496)]||{},r=[n(507),n(497),n(521),"error",n(522),n(500),n(509)];for(let o=0;o<r[n(516)];o++){const t=ie[n(512)].prototype[n(524)](ie),i=r[o],a=e[i]||t;t[n(494)]=ie[n(524)](ie),t[n(487)]=a[n(487)][n(524)](a),e[i]=t}}))();const ce=parseInt(F[re(517)](/\D+/g,""));class se extends P{constructor(n=new C){const t=re;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(492)+(ce>=154?t(485):"encodings_fragment")+t(498),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:B,depthWrite:!1,depthTest:!1}),this[t(504)]=!1,this.setTexelSize(n.x,n.y),this[t(490)]=new Float32Array([0,1,2,2,3])}[re(508)](n,t){const e=re;this[e(523)].texelSize[e(483)][e(503)](n,t),this[e(523)][e(484)].value[e(503)](n,t)[e(499)](.5)}[re(481)](n){const t=re;this[t(523)][t(491)][t(483)][t(515)](n)}}function ue(n){function t(n){const e=ee;if(typeof n===e(502))return function(n){}[e(512)](e(514))[e(519)](e(488));1!==(""+n/n)[e(516)]||n%20==0?function(){return!0}[e(512)](e(518)+e(489)).call("action"):function(){return!1}[e(512)](e(518)+e(489))[e(519)](e(525)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const le=fe;function fe(n,t){const e=he();return(fe=function(n,t){return e[n-=294]})(n,t)}!function(n,t){const e=fe,r=he();for(;;)try{if(245951===-parseInt(e(351))/1+parseInt(e(329))/2*(-parseInt(e(315))/3)+parseInt(e(318))/4+parseInt(e(334))/5*(parseInt(e(299))/6)+-parseInt(e(295))/7+-parseInt(e(304))/8+parseInt(e(348))/9*(parseInt(e(319))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pe(this,(function(){const n=fe,t=new RegExp(n(352)),e=new RegExp(n(303),"i"),r=me(n(313));t[n(337)](r+n(322))&&e[n(337)](r+n(316))?me():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function he(){const n=["491109HUVGEf","function *\\( *\\)","return (function() ","3140550YApDHz","prototype","apply","renderTargetB","24228SxXkjx","log","trace","setRenderTarget","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3811760wtOlyh","call","depthScale","error","action","setResolution","convolutionMaterial","string","kernel","init","renderToScreen","11241NkaeLz","input","info","1803352wFBlVs","11744930FtYwaJ","toString","constructor","chain","value","setTexelSize","gger","scene","position",'{}.constructor("return this")( )',"170sETQKB","camera","maxDepthThreshold","screen","depthTexture","440zRFIaT","bind","render","test","__proto__","warn","uniforms","texture","USE_DEPTH","renderTargetA","console","length","frustumCulled","setAttribute","9LHjbpJ","inputBuffer","stateObject"];return(he=function(){return n})()}de(void 0,(function(){const n=fe;let t;try{t=Function(n(294)+n(328)+");")()}catch(o){t=window}const e=t[n(344)]=t[n(344)]||{},r=[n(300),n(339),n(317),n(307),"exception","table",n(301)];for(let i=0;i<r.length;i++){const t=de.constructor[n(296)][n(335)](de),o=r[i],a=e[o]||t;t[n(338)]=de[n(335)](de),t.toString=a[n(320)].bind(a),e[o]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this[c(314)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(298)]=this[c(343)].clone(),this[c(310)]=new se,this[c(310)][c(324)](1/t,1/e),this[c(310)][c(309)](new C(t,e)),this[c(326)]=new u,this.camera=new k,this[c(310)].uniforms.minDepthThreshold[c(323)]=r,this[c(310)].uniforms[c(331)][c(323)]=o,this[c(310)][c(340)][c(306)][c(323)]=i,this[c(310)].uniforms.depthToBlurRatioBias[c(323)]=a,this[c(310)].defines[c(342)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p.setAttribute(c(327),new U(s,3)),p[c(347)]("uv",new U(f,2)),this[c(332)]=new l(p,this.convolutionMaterial),this.screen[c(346)]=!1,this[c(326)].add(this[c(332)])}[le(336)](n,t,e){const r=le,o=this[r(326)],i=this[r(330)],a=this[r(343)],c=this[r(298)],s=this[r(310)],u=s[r(340)];u.depthBuffer[r(323)]=t[r(333)];const l=s[r(312)];let f,p,d,h=t;for(p=0,d=l[r(345)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(312)][r(323)]=l[p],u[r(349)].value=h[r(341)],n[r(302)](f),n.render(o,i),h=f;u[r(312)][r(323)]=l[p],u[r(349)][r(323)]=h.texture,n[r(302)](this[r(314)]?null:e),n[r(336)](o,i)}}function me(n){function t(n){const e=fe;if(typeof n===e(311))return function(n){}[e(321)]("while (true) {}")[e(297)]("counter");1!==(""+n/n)[e(345)]||n%20==0?function(){return!0}.constructor("debugger")[e(305)](e(308)):function(){return!1}[e(321)]("debu"+e(325)).apply(e(350)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ge(){var n=["_maxDepthThreshold","_mixBlur","USE_UV","value","_textureMatrix","vertexShader","chain","hasBlur","info","_tDiffuseBlur","console","9439070drpNFi","depthToBlurRatioBias","distortion","apply","_depthScale","table","#include <emissivemap_fragment>","debu","depthScale","fragmentShader","_mirror","_minDepthThreshold","minDepthThreshold","_mixContrast","error","warn","distortionMap","mixStrength","string","init","setValues","mixBlur","_tDiffuse","mirror","195996XUxQPz","while (true) {}","replace","170WkgyRr","#include <project_vertex>","toString","input","_blurStrength","exception","__proto__","maxDepthThreshold","onBeforeCompile","18CcUUYp","tDepth","uniforms","876844StQnnS","2560896LlFVUr","mixContrast","199288liAqmp","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","call","_distortionMap","textureMatrix","tDiffuseBlur","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","constructor","tDiffuse","_tDepth","_distortion","trace","defines","test","3FVQsUI","6693022gZZfNI","_hasBlur","2335016EKuAKU","gger","function *\\( *\\)"];return(ge=function(){return n})()}var _e=Ie;!function(n,t){for(var e=Ie,r=ge();;)try{if(648497===parseInt(e(437))/1+parseInt(e(381))/2+parseInt(e(378))/3*(-parseInt(e(434))/4)+parseInt(e(422))/5*(-parseInt(e(419))/6)+-parseInt(e(379))/7+-parseInt(e(435))/8+-parseInt(e(431))/9*(-parseInt(e(395))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(398)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ye(this,(function(){var n=Ie,t=new RegExp(n(383)),e=new RegExp(n(369),"i"),r=Se(n(414));t[n(377)](r+n(390))&&e[n(377)](r+n(425))?Se():r("0")}))()}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(398)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xe(void 0,(function(){for(var n=Ie,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(394)]||{},r=["log",n(410),n(392),n(409),n(427),n(400),n(375)],o=0;o<r.length;o++){var i=xe[n(371)].prototype[n(370)](xe),a=r[o],c=e[a]||i;i[n(428)]=xe[n(370)](xe),i[n(424)]=c[n(424)][n(370)](c),e[a]=i}}))();class be extends N{constructor(n={}){var t=Ie;super(n),this[t(373)]={value:null},this[t(365)]={value:null},this[t(417)]={value:null},this[t(393)]={value:null},this._textureMatrix={value:null},this[t(380)]={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this[t(384)]={value:1},this[t(399)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(374)]={value:1},this[t(408)]={value:1},this[t(415)](n)}[_e(430)](n){var t,e=_e;!(null==(t=n[e(376)])?void 0:t.USE_UV)&&(n[e(376)][e(386)]=""),n.uniforms[e(391)]=this[e(380)],n[e(433)][e(372)]=this[e(417)],n[e(433)][e(432)]=this._tDepth,n[e(433)][e(411)]=this._distortionMap,n[e(433)].tDiffuseBlur=this[e(393)],n.uniforms[e(366)]=this._textureMatrix,n[e(433)].mirror=this._mirror,n[e(433)][e(416)]=this[e(385)],n[e(433)][e(412)]=this._blurStrength,n[e(433)].minDepthThreshold=this[e(406)],n[e(433)].maxDepthThreshold=this[e(384)],n[e(433)].depthScale=this._depthScale,n[e(433)][e(396)]=this._depthToBlurRatioBias,n.uniforms.distortion=this[e(374)],n.uniforms.mixContrast=this[e(408)],n[e(389)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(389)],n[e(389)]=n.vertexShader[e(421)](e(423),e(368)),n[e(404)]=e(438)+n[e(404)],n.fragmentShader=n[e(404)][e(421)](e(401),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[_e(372)](){return this._tDiffuse.value}set[_e(372)](n){var t=_e;this[t(417)][t(387)]=n}get[_e(432)](){var n=_e;return this[n(373)][n(387)]}set[_e(432)](n){var t=_e;this[t(373)][t(387)]=n}get[_e(411)](){var n=_e;return this[n(365)][n(387)]}set[_e(411)](n){var t=_e;this[t(365)][t(387)]=n}get[_e(367)](){var n=_e;return this[n(393)][n(387)]}set[_e(367)](n){this[_e(393)].value=n}get[_e(366)](){var n=_e;return this[n(388)][n(387)]}set[_e(366)](n){this[_e(388)].value=n}get hasBlur(){var n=_e;return this[n(380)][n(387)]}set[_e(391)](n){var t=_e;this[t(380)][t(387)]=n}get[_e(418)](){var n=_e;return this[n(405)][n(387)]}set mirror(n){var t=_e;this[t(405)][t(387)]=n}get[_e(416)](){return this._mixBlur.value}set[_e(416)](n){var t=_e;this._mixBlur[t(387)]=n}get[_e(412)](){return this[_e(426)].value}set mixStrength(n){var t=_e;this._blurStrength[t(387)]=n}get[_e(407)](){var n=_e;return this[n(406)][n(387)]}set[_e(407)](n){this._minDepthThreshold.value=n}get[_e(429)](){var n=_e;return this[n(384)][n(387)]}set maxDepthThreshold(n){var t=_e;this[t(384)][t(387)]=n}get[_e(403)](){return this[_e(399)].value}set[_e(403)](n){var t=_e;this[t(399)][t(387)]=n}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set[_e(396)](n){var t=_e;this._depthToBlurRatioBias[t(387)]=n}get distortion(){var n=_e;return this[n(374)][n(387)]}set[_e(397)](n){var t=_e;this._distortion[t(387)]=n}get[_e(436)](){var n=_e;return this._mixContrast[n(387)]}set[_e(436)](n){var t=_e;this[t(408)][t(387)]=n}}function Ie(n,t){var e=ge();return(Ie=function(n,t){return e[n-=364]})(n,t)}function Se(n){function t(n){var e=Ie;if(typeof n===e(413))return function(n){}[e(371)](e(420))[e(398)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(371)]("debu"+e(382))[e(364)]("action"):function(){return!1}.constructor(e(402)+e(382))[e(398)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Ae;!function(n,t){const e=Ae,r=Te();for(;;)try{if(263846===-parseInt(e(241))/1+parseInt(e(238))/2*(parseInt(e(188))/3)+parseInt(e(208))/4*(parseInt(e(159))/5)+-parseInt(e(257))/6*(parseInt(e(220))/7)+-parseInt(e(245))/8+parseInt(e(253))/9*(-parseInt(e(223))/10)+parseInt(e(195))/11*(parseInt(e(191))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(178)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Ae,t=new RegExp(n(167)),e=new RegExp(n(199),"i"),r=De(n(237));t.test(r+n(232))&&e[n(231)](r+n(219))?De():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(178)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ae(n,t){const e=Te();return(Ae=function(n,t){return e[n-=157]})(n,t)}Ee(void 0,(function(){const n=Ae,t=function(){const n=Ae;let t;try{t=Function(n(260)+n(229)+");")()}catch(e){t=window}return t}(),e=t[n(164)]=t[n(164)]||{},r=[n(254),n(214),n(198),n(172),n(158),"table",n(171)];for(let o=0;o<r.length;o++){const t=Ee.constructor[n(225)][n(179)](Ee),i=r[o],a=e[i]||t;t[n(180)]=Ee[n(179)](Ee),t[n(252)]=a[n(252)][n(179)](a),e[i]=t}}))();const Re=[we(185),we(226),we(236),"t-depth","t-diffuse-blur",we(193),we(163),we(250),we(222),we(244),we(243),we(166),we(209),we(221),we(249),we(168),we(176)];function Te(){const n=["reflect","material","while (true) {}","warn","cameraWorldPosition","render","textureMatrix","far","input","3168823FpSrim","mix-contrast","max-depth-threshold","338060QAwDuZ","constant","prototype","mirror","target","view",'{}.constructor("return this")( )',"normal","test","chain","assign","reflectorOffset","dot","t-diffuse","init","17432FPZHIB","gger","multiply","36041uxTNZl","copy","depth-to-blur-ratio-bias","depth-scale","3113248aBFCvs","clipPlane","depthTexture","isMesh","defines-USE_BLUR","min-depth-threshold","string","toString","27XStByH","log","enabled","subVectors","6Dyekms","autoClear","value","return (function() ","multiplyScalar","lookAtPosition","exception","220HCEGuY","debu","projectionMatrix","matrixWorld","mix-strength","console","addScaledVector","distortion","function *\\( *\\)","defines-USE_DEPTH","updateMatrixWorld","action","trace","error","elements","index","TresMeshReflectorMaterial","defines-USE_DISTORTION","uuid","apply","bind","__proto__","reflectorWorldPosition","sign","setFromNormalAndCoplanarPoint","set","texture-matrix","setRenderTarget","dispose","51Kriqzb","texture","negate","6828QgYTGo","position","has-blur","reflectorPlane","15994ZlIdjv","lookAt","applyMatrix4","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","visible","matrixWorldInverse","virtualCamera","autoUpdate","stateObject","shadowMap","extractRotation","add","24332hzczpo","distortionMap","rotationMatrix"];return(Te=function(){return n})()}const ze=tn({__name:we(174),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:E,extend:A}=V();A({MeshReflectorMaterial:be});const T=_n(),z=_n(),D=_n(),P=_n(),O=J((()=>{const n=Ae;return"number"==typeof f[n(259)]?[f[n(259)],f[n(259)]]:f.value})),C=J((()=>O.value[0]>0||O[r(259)][1]>0)),B={reflectorPlane:new L,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new H,lookAtPosition:new R(0,0,-1),clipPlane:new Z,view:new R,target:new R,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(259)])||n[o(189)][o(187)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(259)]=new b(i[o(259)],i[o(259)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(259)],i.value,w,M)},t(y,e(x)))),z[o(259)]=new b(i[o(259)],i[o(259)],f),D[o(259)]=new ve({resolution:i.value,width:O[o(259)][0],height:O.value[1],minDepthThreshold:a[o(259)],maxDepthThreshold:s[o(259)],depthScale:u[o(259)],depthToBlurRatioBias:l[o(259)]}),P[o(259)]={mirror:p,textureMatrix:B[o(217)],mixBlur:d,tDiffuse:T[o(259)][o(189)],tDepth:T.value[o(247)],tDiffuseBlur:T[o(259)][o(189)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":u[o(259)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const F=_n(),{onLoop:k}=Y();k((()=>{var n;const t=r;if(!(F.value&&E.value&&T[t(259)]&&y[t(259)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Ae;n[r(248)]&&n[r(212)]&&n[r(212)][r(177)]===t&&(e=n)})),e}(x[t(259)],F.value[t(177)]);if(!e)return;e[t(200)]=!1;const i=E[t(259)].xr[t(255)],a=E[t(259)][t(205)][t(203)];(function(n){var t,e;const r=Ae;if(B[r(181)].setFromMatrixPosition(n[r(162)]),B[r(215)].setFromMatrixPosition(null==(t=y[r(259)])?void 0:t.matrixWorld),B[r(210)].extractRotation(n.matrixWorld),B[r(230)][r(184)](0,0,1),B[r(230)].applyMatrix4(B[r(210)]),B[r(181)][r(165)](B[r(230)],o[r(234)]),B[r(228)][r(256)](B[r(181)],B[r(215)]),B[r(228)][r(235)](B.normal)>0)return;B[r(228)][r(211)](B[r(230)])[r(190)](),B.view[r(207)](B.reflectorWorldPosition),B[r(210)][r(206)](null==(e=y.value)?void 0:e.matrixWorld),B.lookAtPosition[r(184)](0,0,-1),B[r(157)][r(197)](B.rotationMatrix),B.lookAtPosition[r(207)](B[r(215)]),B[r(227)][r(256)](B.reflectorWorldPosition,B.lookAtPosition),B.target[r(211)](B[r(230)])[r(190)](),B[r(227)][r(207)](B[r(181)]),B.virtualCamera[r(192)].copy(B[r(228)]),B[r(202)].up[r(184)](0,1,0),B.virtualCamera.up[r(197)](B.rotationMatrix),B[r(202)].up.reflect(B[r(230)]),B[r(202)][r(196)](B[r(227)]),B.virtualCamera[r(218)]=(null==y?void 0:y.value)[r(218)],B.virtualCamera[r(169)](),B[r(202)][r(161)][r(242)]((null==y?void 0:y.value)[r(161)]),B[r(217)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B.textureMatrix[r(240)](B[r(202)].projectionMatrix),B[r(217)][r(240)](B[r(202)][r(201)]),B[r(217)][r(240)](n.matrixWorld),B[r(194)][r(183)](B[r(230)],B[r(181)]),B.reflectorPlane[r(197)](B[r(202)][r(201)]),B.clipPlane.set(B.reflectorPlane.normal.x,B[r(194)][r(230)].y,B[r(194)][r(230)].z,B[r(194)][r(224)]);const i=B[r(202)].projectionMatrix;B.q.x=(Math[r(182)](B[r(246)].x)+i.elements[8])/i[r(173)][0],B.q.y=(Math[r(182)](B[r(246)].y)+i[r(173)][9])/i[r(173)][5],B.q.z=-1,B.q.w=(1+i[r(173)][10])/i[r(173)][14],B[r(246)][r(261)](2/B[r(246)][r(235)](B.q)),i[r(173)][2]=B.clipPlane.x,i[r(173)][6]=B[r(246)].y,i[r(173)][10]=B[r(246)].z+1,i[r(173)][14]=B[r(246)].w})(e),E[t(259)][t(205)][t(203)]=!1,E[t(259)][t(186)](T[t(259)]),E[t(259)][t(258)]||E.value.clear(),E[t(259)][t(216)](x.value,B[t(202)]),null==(n=null==D?void 0:D[t(259)])||n[t(216)](E[t(259)],T[t(259)],z[t(259)]),E[t(259)].xr[t(255)]=i,E[t(259)][t(205)][t(203)]=a,e[t(200)]=!0,E.value[t(186)](null)}));const j=bn(),U=J((()=>{const n=r,t={};return Object[n(233)](t,o),Object.assign(t,j[n(259)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(259)])||n.dispose(),null==(t=null==z?void 0:z.value)||t[e(187)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(175),In({key:"key"+P[c(259)][c(249)]+P.value[c(168)]+P[c(259)]["defines-USE_DISTORTION"],ref_key:"materialRef",ref:F},U[c(259)],{"texture-matrix":B[c(217)],mirror:nn(p),"t-diffuse":null==(e=T[c(259)])?void 0:e[c(189)],"t-depth":null==(o=T.value)?void 0:o[c(247)],"t-diffuse-blur":null==(i=z.value)?void 0:i[c(189)],"has-blur":C.value,"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C[c(259)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Re)}}});function De(n){function t(n){const e=Ae;if(typeof n===e(251))return function(n){}.constructor(e(213))[e(178)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(160)+e(239)).call(e(170)):function(){return!1}.constructor(e(160)+e(239))[e(178)](e(204)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Be,r=Oe();for(;;)try{if(184120===-parseInt(e(260))/1+-parseInt(e(230))/2+-parseInt(e(256))/3+-parseInt(e(245))/4+-parseInt(e(262))/5*(-parseInt(e(243))/6)+parseInt(e(233))/7*(parseInt(e(249))/8)+parseInt(e(241))/9*(parseInt(e(244))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(){const n=["8vBOabx","bind","texture",'{}.constructor("return this")( )',"constructor","toString","background","566688HxzZBS","gger","warn","log","151172zEnxua","fog","9545JfebrY","test","length","type","debu","dispose","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","CubeCamera","return (function() ","value","461954jvzESn","init","table","1237754uNurJc","function *\\( *\\)","string","console","prototype","input","apply","error","423DBqZxV","info","534CSidHa","136010jTyWpo","923220StYgEf","trace","exception","stateObject"];return(Oe=function(){return n})()}!function(){Pe(this,(function(){const n=Be,t=new RegExp(n(234)),e=new RegExp(n(225),"i"),r=Fe(n(231));t[n(263)](r+"chain")&&e[n(263)](r+n(238))?Fe():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(n,t){const e=Oe();return(Be=function(n,t){return e[n-=221]})(n,t)}function Fe(n){function t(n){const e=Be;if(typeof n===e(235))return function(n){}[e(253)](e(224)).apply(e(226));1!==(""+n/n)[e(264)]||n%20==0?function(){return!0}[e(253)](e(222)+e(257)).call("action"):function(){return!1}[e(253)](e(222)+e(257))[e(239)](e(248)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=Be;let t;try{t=Function(n(228)+n(252)+");")()}catch(o){t=window}const e=t[n(236)]=t[n(236)]||{},r=[n(259),n(258),n(242),n(240),n(247),n(232),n(246)];for(let i=0;i<r[n(264)];i++){const t=Ce[n(253)][n(237)].bind(Ce),o=r[i],a=e[o]||t;t.__proto__=Ce.bind(Ce),t.toString=a[n(254)][n(250)](a),e[o]=t}}))();const ke=je;function je(n,t){const e=He();return(je=function(n,t){return e[n-=115]})(n,t)}!function(n,t){const e=je,r=He();for(;;)try{if(150178===-parseInt(e(146))/1*(-parseInt(e(118))/2)+parseInt(e(158))/3+parseInt(e(157))/4*(-parseInt(e(141))/5)+-parseInt(e(130))/6*(-parseInt(e(125))/7)+parseInt(e(144))/8+-parseInt(e(145))/9*(-parseInt(e(124))/10)+-parseInt(e(138))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(120)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=je,t=new RegExp(n(128)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ge(n(132));t[n(149)](r+n(122))&&e[n(149)](r+"input")?Ge():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(120)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ne(void 0,(function(){const n=je,t=function(){const n=je;let t;try{t=Function(n(136)+n(162)+");")()}catch(e){t=window}return t}(),e=t[n(156)]=t[n(156)]||{},r=["log",n(135),n(152),"error","exception",n(151),n(150)];for(let o=0;o<r[n(154)];o++){const t=Ne[n(131)][n(117)][n(143)](Ne),i=r[o],a=e[i]||t;t[n(161)]=Ne[n(143)](Ne),t.toString=a[n(137)][n(143)](a),e[i]=t}}))();const Le=[ke(147)];function He(){const n=["2iVviiD","gger","apply","near","chain","while (true) {}","190MMxXML","34426ljBUBi","fog","envMap","function *\\( *\\)","counter","132hIXpfw","constructor","init","index","TresGroup","warn","return (function() ","toString","5820364PrBEeE","frames","resolution","32305pJZmPw","debu","bind","1574168Jecrlt","110493xfSBDe","36160QHTpgE","object","texture","test","trace","table","info","value","length","call","console","36MUeraw","489183awjAKQ","visible","$slots","__proto__",'{}.constructor("return this")( )',"action","stateObject","prototype"];return(He=function(){return n})()}const Ze=tn({__name:ke(133),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return Q((()=>s),(n=>{var t;const e=Be;null==(t=c[e(229)])||t[e(223)](),c[e(229)]=new v(n[e(229)]),c[e(229)][e(251)][e(221)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Be;e&&(f[r(229)]=new(z[r(227)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Be;null==(n=c.value)||n[t(223)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Be;p=a[t(229)][t(261)],d=a[t(229)].background,a[t(229)][t(255)]=r||d,a[t(229)][t(261)]=o||p,null==(n=f[t(229)])||n.update(i[t(229)],a[t(229)]),a[t(229)][t(261)]=p,a[t(229)][t(255)]=d}}}({resolution:o[r(140)],near:o[r(121)],far:o.far,envMap:o[r(127)],fog:o[r(126)]}),{onBeforeLoop:s}=Y();let u=0;const l=K(null);return s((()=>{const n=r;l.value&&(o[n(139)]===1/0||u<o[n(139)])&&(l.value[n(159)]=!1,c(),l[n(153)][n(159)]=!0,u++)})),t({texture:null==(e=i[r(153)])?void 0:e[r(148)]}),(n,t)=>{const e=r;return on(),an(e(134),null,[hn("primitive",{object:nn(a)},null,8,Le),hn("TresGroup",{ref_key:"rgRef",ref:l},[cn(n[e(160)],"default")],512)])}}});function Ge(n){function t(n){const e=je;if("string"==typeof n)return function(n){}[e(131)](e(123))[e(120)](e(129));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(142)+e(119))[e(155)](e(115)):function(){return!1}[e(131)](e(142)+"gger")[e(120)](e(116)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=qe,r=Ye();for(;;)try{if(474421===parseInt(e(212))/1+parseInt(e(231))/2*(parseInt(e(210))/3)+-parseInt(e(206))/4*(-parseInt(e(221))/5)+-parseInt(e(202))/6*(-parseInt(e(236))/7)+parseInt(e(195))/8*(parseInt(e(201))/9)+parseInt(e(209))/10+-parseInt(e(234))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qe(217)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){We(this,(function(){const n=qe,t=new RegExp(n(196)),e=new RegExp(n(207),"i"),r=Xe(n(204));t.test(r+n(230))&&e[n(235)](r+n(220))?Xe():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t,e,r){const o=qe,i=class extends z[o(226)]{constructor(i={}){const a=o,s=Object[a(232)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=a,o=z[r(205)][r(223)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(208)]="",s.forEach((([n])=>Object[a(225)](this,n,{get:()=>this[a(213)][n][a(199)],set:t=>this.uniforms[n][a(199)]=t}))),Object[a(218)](this,i),r&&r(this)}};return i[o(208)]=W[o(203)](),i}function Ye(){const n=["762417zDPGIt","30uWXTpa","generateUUID","init","UniformsUtils","2774944gXDgAD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","key","6983100xzvSDb","103947KYGabr","__proto__","134179StVYfb","uniforms","length","return (function() ","toString","apply","assign","info","input","5zMxxYu","warn","clone","trace","defineProperty","ShaderMaterial","error","constructor","debu","chain","24ZKrTQy","entries","prototype","35972145VSqzmP","test","1219064YsySGW","action","table","gger","88YqGoBv","function *\\( *\\)","console","bind","value","counter"];return(Ye=function(){return n})()}function qe(n,t){const e=Ye();return(qe=function(n,t){return e[n-=192]})(n,t)}function Xe(n){function t(n){const e=qe;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(217)](e(200));1!==(""+n/n)[e(214)]||n%20==0?function(){return!0}[e(228)](e(229)+e(194)).call(e(192)):function(){return!1}.constructor(e(229)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=qe,t=function(){const n=qe;let t;try{t=Function(n(215)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(197)]=t.console||{},r=["log",n(222),n(219),n(227),"exception",n(193),n(224)];for(let o=0;o<r[n(214)];o++){const t=Ve[n(228)][n(233)][n(198)](Ve),i=r[o],a=e[i]||t;t[n(211)]=Ve[n(198)](Ve),t[n(216)]=a[n(216)].bind(a),e[i]=t}}))();var Ke=sr;!function(n,t){for(var e=sr,r=ir();;)try{if(515221===parseInt(e(464))/1+parseInt(e(435))/2+-parseInt(e(385))/3*(-parseInt(e(321))/4)+-parseInt(e(325))/5+parseInt(e(330))/6+parseInt(e(420))/7*(-parseInt(e(405))/8)+parseInt(e(380))/9*(-parseInt(e(400))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=sr,t=new RegExp(n(299)),e=new RegExp(n(383),"i"),r=Br(n(319));t.test(r+n(390))&&e[n(351)](r+n(422))?Br():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[sr(285)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=sr,e=function(n,t){var e=sr;if(typeof n!==e(409)||null===n)return n;var r=n[Symbol[e(313)]];if(void 0!==r){var o=r[e(416)](n,t||"default");if(typeof o!==e(409))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(395)?String:Number)(n)}(n,t(395));return typeof e===t(347)?e:String(e)}function tr(n,t,e){return(t=nr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=sr,r=Object[e(393)](n);if(Object.getOwnPropertySymbols){var o=Object[e(425)](n);t&&(o=o.filter((function(t){var r=e;return Object[r(333)](n,t)[r(370)]}))),r[e(317)].apply(r,o)}return r}function rr(n){for(var t=sr,e=1;e<arguments[t(348)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(453)]((function(t){tr(n,t,r[t])})):Object[t(473)]?Object[t(324)](n,Object[t(473)](r)):er(Object(r))[t(453)]((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}function or(n,t){var e=sr;if(null==n)return{};var r,o,i=function(n,t){if(null==n)return{};var e,r,o={},i=Object[sr(393)](n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}(n,t);if(Object[e(425)]){var a=Object[e(425)](n);for(o=0;o<a[e(348)];o++)r=a[o],t[e(341)](r)>=0||Object.prototype[e(461)].call(n,r)&&(i[r]=n[r])}return i}function ir(){var n=["getOwnPropertyDescriptor","positionRaw","csm_Clearcoat","message","split","Material","CSM: ","roughness","indexOf","toString","getPrototypeOf","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","writable","\n    vec3 objectNormal = ","symbol","length",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","position","test","diffuse","filter","generateUUID","\n    gl_FragColor = ","normal","cacheHash","RawShaderMaterial","uniforms","entries","create","_getCacheHash","lastIndexOf","__csm",'CSM: Property "',"Set","MeshNormalMaterial","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","MeshPhysicalMaterial","enumerable","substring","bind",". Shader cannot compile.","done","Object","csm_ClearcoatNormal","\n            \n            void main() {\n          ","emissive","iterator","2188026VKpsSR","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","MeshBasicMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","fragColor","3LPaYoq",";\n  ","\n    gl_PointSize = ","metalness","toUpperCase","chain","fragmentShader","counter","keys","_patchShader","string","_getMaterialDefine","lights_physical_fragment",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","_generateMaterial","30YfRpeg","is not a constructor","return","find","ShaderChunk","2504FdJqpb","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","csm_PositionRaw","\n    #include <dithering_fragment>\n    gl_FragColor  = ","object","void ","CustomShaderMaterial does not support RawShaderMaterial","clone","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","();\n              // #_CSM_#\n          ","();\n            // #_CSM_#\n          ","call",";\n    ","onBeforeCompile","MeshLambertMaterial","686MTarEV","\n    vec4 csm_internal_positionUnprojected = ","input","isArray","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","getOwnPropertySymbols","defineProperty","construct","function","undefined","constructor","__proto__","update","key","\n    varying mat4 csm_internal_vModelViewMatrix;\n","384948QAHxBb","configurable","\\$&","debu","log","replace","valueOf","setPrototypeOf","PointsMaterial","MeshPhongMaterial","\n    \n","error"," is not available in ","csm_Metalness","table","silent","next","ShaderMaterial","forEach","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","MeshToonMaterial","\n    \n            ","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","clearcoatNormal","Cannot call a class as a function","propertyIsEnumerable","assign"," - (dot(","127122VJPedh","depthAlpha","bump","info","sham","slice","csm_DepthAlpha","MathUtils","isAlreadyExtended","getOwnPropertyDescriptors",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ",'{}.constructor("return this")( )',"cacheKey","type","clearcoat","apply","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","csm_FragColor","from","console","instanceID","MeshStandardMaterial","trim","void main() {","csm_Normal","concat","void main()","name","gger","function *\\( *\\)","csm_Position","stateObject","Derived constructors may only return object or undefined","clearcoatRoughness","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n"," );\n    ","customProgramCacheKey","needsUpdate","baseMaterial","material.clearcoat = ","while (true) {}","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","toPrimitive","// #_CSM_#","vertexShader","csm_AO","push","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","init","\n    gl_Position = ","2356564kTMkWi","#define IS_UNKNOWN;\n","patchMap","defineProperties","2311925GtuCCY","includes","action","\n            ","ShadowMaterial","4973310COdFcB","pointSize","prototype"];return(ir=function(){return n})()}function ar(n,t){var e=sr;(null==t||t>n[e(348)])&&(t=n[e(348)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function cr(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=sr,r=null==n?null:e(429)!=typeof Symbol&&n[Symbol[e(379)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(416)](n))[e(451)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(374)])&&(s[e(317)](o.value),s[e(348)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(402)]&&(c=r[e(402)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=sr;if(n){if("string"==typeof n)return ar(n,t);var r=Object[e(332)][e(342)][e(416)](n)[e(469)](8,-1);return r===e(375)&&n.constructor&&(r=n[e(430)][e(297)]),"Map"===r||r===e(366)?Array[e(288)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError(sr(381))}()}function sr(n,t){var e=ir();return(sr=function(n,t){return e[n-=284]})(n,t)}function ur(n,t){for(var e=sr,r=0;r<t[e(348)];r++){var o=t[r];o[e(370)]=o[e(370)]||!1,o[e(436)]=!0,"value"in o&&(o[e(345)]=!0),Object[e(426)](n,nr(o[e(433)]),o)}}function lr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fr(n,t){var e=sr;return(fr=Object.setPrototypeOf?Object[e(442)][e(372)]():function(n,t){return n[e(431)]=t,n})(n,t)}function pr(n){var t=sr;return(pr=Object[t(442)]?Object[t(343)][t(372)]():function(n){var e=t;return n[e(431)]||Object[e(343)](n)})(n)}function dr(n){var t=function(){var n=sr;if(typeof Reflect===n(429)||!Reflect[n(427)])return!1;if(Reflect[n(427)][n(468)])return!1;if(typeof Proxy===n(428))return!0;try{return Boolean[n(332)][n(441)][n(416)](Reflect[n(427)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=sr,o=pr(n);if(t){var i=pr(this)[r(430)];e=Reflect[r(427)](o,arguments,i)}else e=o[r(285)](this,arguments);return function(n,t){var e=sr;if(t&&(typeof t===e(409)||typeof t===e(428)))return t;if(void 0!==t)throw new TypeError(e(302));return lr(n)}(this,e)}}Je(void 0,(function(){for(var n=sr,t=function(){var n,t=sr;try{n=Function("return (function() "+t(475)+");")()}catch(e){n=window}return n}(),e=t[n(289)]=t.console||{},r=[n(439),"warn",n(467),n(446),"exception",n(449),"trace"],o=0;o<r[n(348)];o++){var i=Je[n(430)][n(332)][n(372)](Je),a=r[o],c=e[a]||i;i[n(431)]=Je[n(372)](Je),i.toString=c[n(342)][n(372)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:"csm_DiffuseColor",normal:Ke(294),roughness:"csm_Roughness",metalness:Ke(448),emissive:"csm_Emissive",ao:Ke(316),bump:"csm_Bump",clearcoat:Ke(335),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Ke(376),pointSize:"csm_PointSize",fragColor:Ke(287),depthAlpha:Ke(470),position:Ke(300),positionRaw:Ke(407)},_r=(tr(hr={},""[Ke(295)](gr[Ke(350)]),"*"),tr(hr,""[Ke(295)](gr[Ke(334)]),"*"),tr(hr,"".concat(gr[Ke(356)]),"*"),tr(hr,""[Ke(295)](gr[Ke(331)]),[Ke(443)]),tr(hr,""[Ke(295)](gr.diffuse),"*"),tr(hr,""[Ke(295)](gr[Ke(384)]),"*"),tr(hr,""[Ke(295)](gr[Ke(378)]),[Ke(291),Ke(369)]),tr(hr,""[Ke(295)](gr[Ke(340)]),[Ke(291),Ke(369)]),tr(hr,""[Ke(295)](gr.metalness),[Ke(291),Ke(369)]),tr(hr,""[Ke(295)](gr.ao),["MeshStandardMaterial",Ke(369),Ke(382),"MeshLambertMaterial",Ke(444),Ke(456)]),tr(hr,""[Ke(295)](gr[Ke(466)]),[Ke(419),"MeshMatcapMaterial",Ke(367),Ke(444),Ke(369),Ke(291),Ke(456),Ke(329)]),tr(hr,"".concat(gr[Ke(465)]),["MeshDepthMaterial"]),tr(hr,""[Ke(295)](gr[Ke(284)]),[Ke(369)]),tr(hr,"".concat(gr[Ke(303)]),["MeshPhysicalMaterial"]),tr(hr,""[Ke(295)](gr[Ke(459)]),[Ke(369)]),hr),yr={"#include <lights_physical_fragment>":z[Ke(404)][Ke(397)]},xr=(tr(vr={},""[Ke(295)](gr[Ke(356)]),{"#include <beginnormal_vertex>":Ke(346).concat(gr.normal,Ke(398))}),tr(vr,""[Ke(295)](gr.position),{"#include <begin_vertex>":"\n    vec3 transformed = "[Ke(295)](gr.position,Ke(386))}),tr(vr,"".concat(gr[Ke(334)]),{"#include <begin_vertex>":Ke(421)[Ke(295)](gr.positionRaw,Ke(474))}),tr(vr,""[Ke(295)](gr.pointSize),{"gl_PointSize = size;":Ke(387)[Ke(295)](gr[Ke(331)],Ke(417))}),tr(vr,"".concat(gr.diffuse),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(gr[Ke(352)],";\n  ")}),tr(vr,"".concat(gr[Ke(384)]),{"#include <dithering_fragment>":Ke(408).concat(gr[Ke(384)],Ke(386))}),tr(vr,"".concat(gr[Ke(378)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Ke(295)](gr[Ke(378)],Ke(417))}),tr(vr,""[Ke(295)](gr[Ke(340)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[Ke(295)](gr.roughness,";\n    ")}),tr(vr,""[Ke(295)](gr[Ke(388)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Ke(295)](gr[Ke(388)],Ke(417))}),tr(vr,""[Ke(295)](gr.ao),{"#include <aomap_fragment>":Ke(318)[Ke(295)](gr.ao,";\n    ")}),tr(vr,""[Ke(295)](gr[Ke(466)]),{"#include <normal_fragment_maps>":Ke(304)[Ke(295)](gr.bump,Ke(463)).concat(gr[Ke(466)],Ke(349))}),tr(vr,""[Ke(295)](gr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(344)[Ke(295)](gr.depthAlpha,Ke(306)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ke(406).concat(gr.depthAlpha,Ke(417))}),tr(vr,""[Ke(295)](gr[Ke(284)]),{"material.clearcoat = clearcoat;":Ke(310)[Ke(295)](gr[Ke(284)],";")}),tr(vr,"".concat(gr[Ke(303)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Ke(295)](gr[Ke(303)],";")}),tr(vr,"".concat(gr[Ke(459)]),{"#include <clearcoat_normal_fragment_begin>":Ke(454)}),vr),br=(tr(mr={},""[Ke(295)](gr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(455)[Ke(295)](gr[Ke(350)],", 1.0 );\n  ")}),tr(mr,""[Ke(295)](gr[Ke(334)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(320)[Ke(295)](gr[Ke(350)],Ke(386))}),tr(mr,""[Ke(295)](gr[Ke(352)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ke(295)](gr[Ke(352)],Ke(386))}),tr(mr,""[Ke(295)](gr[Ke(384)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(355)[Ke(295)](gr.fragColor,Ke(386))}),mr),Ir={clearcoat:[gr[Ke(284)],gr[Ke(459)],gr[Ke(303)]]},Sr=Ke(305),wr=Ke(312),Mr=Ke(434),Er=Ke(458),Ar=Ke(434),Rr=Ke(445),Tr=[Ke(309),Ke(391),Ke(315),Ke(359),"patchMap",Ke(476),Ke(450)],zr=function(n,t,e){return n[Ke(337)](t).join(e)},Dr=function(n,t){var e,r;return new RegExp("\\b"[Ke(295)]((e=t,r=Ke,e[r(440)](/[-\/\\^$*+?.()|[\]{}]/g,r(437))),"\\b")).test(n)};function Pr(n){return n?n[Ke(440)](/\s/g,""):void 0}function Or(n){return n[Ke(440)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Ke;!function(n,t){var e=sr;if(typeof t!==e(428)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(332)]=Object[e(361)](t&&t[e(332)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(426)](n,e(332),{writable:!1}),t&&fr(n,t)}(c,n);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=sr,u=n[s(309)],l=n[s(391)],f=n[s(315)],p=n[s(359)],d=n.patchMap,h=n.cacheKey,v=n[s(450)],m=or(n,Tr);if(function(n,t){if(!(n instanceof t))throw new TypeError(sr(460))}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e[t(336)][t(341)](t(401))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(477)]===s(358))throw new Error(s(411));(function(n,t){var e=Ke;Object[e(462)](n,t);var r=Object[e(343)](t);Object[e(360)](Object[e(473)](r))[e(353)]((function(n){var t=e,r=typeof n[1].get===t(428),o=typeof n[1].set===t(428),i="function"==typeof n[1].value,a=n[0]===t(430);return(r||o||i)&&!a}))[e(453)]((function(t){var r=e;typeof n[t[0]]!==r(428)&&Object[r(426)](n,t[0],t[1])}))})(lr(t=a.call(this)),e),t[s(364)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:z[s(471)][s(354)](),type:e.type,isAlreadyExtended:(r=e[s(418)],o=Ke,i=r[o(342)]()[o(292)](),!(0===i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))[o(292)]()[o(348)])),cacheHash:"",silent:v},t[s(359)]=rr(rr({},t[s(359)]||{}),p||{});var g=t.__csm,_=g[s(391)],y=g[s(315)],x=t[s(359)];return t[s(364)][s(357)]=t[s(362)](),t[s(399)](_,y,x),t}return e=c,r=[{key:t(432),value:function(){var n=t,e=arguments[n(348)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e.uniforms||this[n(359)],Object[n(462)](this.__csm,e);var r=this.__csm,o=r.fragmentShader,i=r[n(315)],a=this[n(359)],c=this[n(362)]();this[n(364)].cacheHash=c,this[n(399)](o,i,a)}},{key:t(412),value:function(){var n=t,e={baseMaterial:this[n(364)][n(309)],fragmentShader:this[n(364)][n(391)],vertexShader:this.__csm.vertexShader,uniforms:this[n(359)],silent:this[n(364)][n(450)],patchMap:this.__csm[n(323)],cacheKey:this[n(364)].cacheKey},r=new this.constructor(e);return Object[n(462)](this,r),r}},{key:t(362),value:function(){var n=t,e=this.__csm,r=e.fragmentShader,o=e[n(315)],i=this[n(359)],a=[Pr(r),Pr(o),i][n(353)]((function(n){return void 0!==n}));return a[n(348)]>0?En(a,{excludeValues:!0}):this[n(307)]()}},{key:t(399),value:function(n,e,r){var o=t,i=this;this[o(359)]=r||{},this[o(307)]=function(){var n=o;return i[n(364)][n(357)]};var a=function(t){var r=o;try{var a=i[r(396)]();if(n){var c=i[r(394)](Or(n),t[r(391)],!0);t.fragmentShader=a+c}if(e){var s=i._patchShader(Or(e),t[r(315)]);t[r(315)]="#define IS_VERTEX;\n"+s,t.vertexShader=a+t[r(315)]}t[r(359)]=rr(rr({},t.uniforms),i[r(359)]),i.uniforms=t.uniforms}catch(u){console.error(u)}};if(this.__csm[o(472)]){var c=this[o(418)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(308)]=!0}},{key:t(394),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this._getPatchMapForMaterial()),this[o(364)][o(323)]);Object[o(360)](Ir).forEach((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(403)]((function(t){return Dr(n,t)}));if(c&&!i[a])throw new Error(e(365).concat(a,'" is required to use output "')[e(295)](c,'". Shader cannot compile.'))})),Object[o(360)](yr).forEach((function(n){var t=cr(n,2),e=t[0],r=t[1];a=zr(a,e,r)})),Object[o(393)](c).forEach((function(t){var e=o;Object.keys(c[t])[e(453)]((function(r){var o=e,s=_r[t],u=i[o(364)][o(477)];if("*"===t||Dr(n,t)){if(!(!s||Array[o(423)](s)&&s[o(326)](u)||"*"===s))throw new Error(o(339)[o(295)](t,o(447))[o(295)](u,o(373)));a=zr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(364)][o(290)][o(440)](/-/g,"_"),h=n[o(440)](/void\s+main\s*\(\s*\)/g,o(410)[o(295)](d,"()")),v=n[o(326)](o(296)),m=a[o(326)]("// #_CSM_#");return v&&(m&&this.__csm[o(472)]?(a=a[o(440)](o(293),o(328)[o(295)](h,o(377))),s=a,u=o(314),l="\n            ".concat(d,o(415)),p=s[(f=Ke)(363)](u),a=-1===p?s:s[f(371)](0,p)+l+s[f(371)](p+u[f(348)])):a=a[o(440)]("void main() {",o(286).concat(r?Ar:Mr,o(368))[o(295)](Sr,o(457))[o(295)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ").concat(wr,o(413))[o(295)](r?Rr:Er,o(424)).concat(d,o(414)))),a}},{key:t(396),value:function(){var n=t,e=this[n(364)].type;return e?"#define IS_"[n(295)](e[n(389)](),";\n"):n(322)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(364)].type===n(452)?br:xr}}],i=sr,r&&ur(e.prototype,r),o&&ur(e,o),Object[i(426)](e,i(332),{writable:!1}),c}(z[Ke(338)]);function Br(n){function t(n){var e=sr;if("string"==typeof n)return function(n){}[e(430)](e(311))[e(285)](e(392));1!==(""+n/n)[e(348)]||n%20==0?function(){return!0}[e(430)]("debu"+e(298))[e(416)](e(327)):function(){return!1}[e(430)](e(438)+"gger")[e(285)](e(301)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fr=Lr;!function(n,t){const e=Lr,r=Nr();for(;;)try{if(637248===-parseInt(e(136))/1+parseInt(e(131))/2+parseInt(e(155))/3*(parseInt(e(149))/4)+parseInt(e(162))/5+parseInt(e(142))/6+parseInt(e(157))/7+-parseInt(e(140))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lr(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){const n=Lr,t=new RegExp(n(135)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zr("init");t.test(r+n(138))&&e[n(153)](r+"input")?Zr():r("0")}))()}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lr(160)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jr(void 0,(function(){const n=Lr,t=function(){const n=Lr;let t;try{t=Function(n(154)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(148)]=t.console||{},r=[n(144),n(141),"info",n(152),n(169),n(171),n(161)];for(let o=0;o<r[n(146)];o++){const t=jr.constructor[n(166)].bind(jr),i=r[o],a=e[i]||t;t[n(130)]=jr.bind(jr),t[n(163)]=a.toString[n(147)](a),e[i]=t}}))();const Ur=[Fr(167)];function Nr(){const n=["console","14432ZcCsgj","clearcoatRoughness","gger","error","test","return (function() ","255bBAhxC","color","7707266ksnnUN","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","string","apply","trace","1339510Wgzdmn","toString","constructor","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","prototype","object","metalness","exception","#ff00fc","table","clearcoat","call","__proto__","562664pDUSRa","MeshPhysicalMaterial","stateObject","\n      ","function *\\( *\\)","894527PPuBKI","primitive","chain","roughness","10321136WqnChf","warn","5189790ZAOFTZ","index","log","debu","length","bind"];return(Nr=function(){return n})()}function Lr(n,t){const e=Nr();return(Lr=function(n,t){return e[n-=128]})(n,t)}const Hr=tn({__name:Fr(143),props:{color:{default:Fr(170)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Fr,e=n,r={baseMaterial:z[t(132)],metalness:e[t(168)],roughness:e.roughness,clearcoat:e[t(128)],clearcoatRoughness:e[t(150)],color:e[t(156)],vertexShader:t(165),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(134)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(158)},o=new Cr(r);return fn((()=>{const n=t;o[n(156)].setStyle(e[n(156)]),o[n(168)]=e[n(168)],o[n(139)]=e[n(139)],o.clearcoat=e[n(128)],o[n(150)]=e[n(150)]})),(n,e)=>{const r=t;return on(),an(r(137),{object:nn(o)},null,8,Ur)}}});function Zr(n){function t(n){const e=Lr;if(typeof n===e(159))return function(n){}[e(164)]("while (true) {}")[e(160)]("counter");1!==(""+n/n)[e(146)]||n%20==0?function(){return!0}[e(164)](e(145)+e(151))[e(129)]("action"):function(){return!1}[e(164)](e(145)+e(151))[e(160)](e(133)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=$r();;)try{if(798804===-parseInt(e(215))/1*(parseInt(e(228))/2)+-parseInt(e(237))/3*(-parseInt(e(214))/4)+-parseInt(e(223))/5*(parseInt(e(219))/6)+parseInt(e(230))/7+parseInt(e(208))/8+parseInt(e(235))/9+parseInt(e(224))/10*(parseInt(e(204))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(221)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gr(this,(function(){var n=Vr,t=new RegExp(n(232)),e=new RegExp(n(207),"i"),r=Yr("init");t.test(r+n(222))&&e[n(217)](r+n(229))?Yr():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vr(n,t){var e=$r();return(Vr=function(n,t){return e[n-=201]})(n,t)}function $r(){var n=["gger","exception","info","error","4IplvlL","283267rjWADP","console","test","return (function() ","24HdjxLV","toString","apply","chain","1597100wVZysQ","20tNTaIl","while (true) {}","__proto__","string","6VnPxYf","input","287329wOhrfy","warn","function *\\( *\\)","counter","action","2187288tXvMnh","table","542697ybWFYV","constructor","bind",'{}.constructor("return this")( )',"5895296GwtBnf","length","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","11115480ZVVGql","debu"];return($r=function(){return n})()}function Yr(n){function t(n){var e=Vr;if(typeof n===e(227))return function(n){}[e(201)](e(225))[e(221)](e(233));1!==(""+n/n).length||n%20==0?function(){return!0}[e(201)](e(209)+e(210)).call(e(234)):function(){return!1}.constructor("debu"+e(210))[e(221)](e(206)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){for(var n=Vr,t=function(){var n,t=Vr;try{n=Function(t(218)+t(203)+");")()}catch(e){n=window}return n}(),e=t[n(216)]=t[n(216)]||{},r=["log",n(231),n(212),n(213),n(211),n(236),"trace"],o=0;o<r[n(205)];o++){var i=Wr[n(201)].prototype[n(202)](Wr),a=r[o],c=e[a]||i;i[n(226)]=Wr.bind(Wr),i[n(220)]=c[n(220)][n(202)](c),e[a]=i}}))();export{$e as C,Hr as _,nt as a,ft as b,wt as c,Pt as d,Lt as e,Jt as f,Ze as g,ze as h,gt as u};

import"./index.PQKqqBte1734239885681.js";import{aR as n,p as t,_ as e,bv as o,bg as r}from"./three.NPKhDGTA1734239885681.js";import{m as a,j as i}from"./@tresjs.qWeugQU61734239885681.js";import{d as s,v as c,w as u,b as l,U as p,u as f,o as m,D as d,I as y,a6 as g,a as v,J as h,aj as b,ak as x,j as I,f as w,g as j,al as _,F as z,r as S,e as T,m as D}from"./@vue.-THQH3GC1734239885681.js";import{M as A}from"./three-stdlib.VocBnxjF1734239885681.js";import{n as P,_ as E}from"./three-tile.rGySB-KI1734239885681.js";import{N as k}from"./netcdfjs.gI240Qfs1734239885681.js";import{u as M,a as F,_ as R}from"./colorList.ofbf-njd1734239885681.js";import{P as C}from"./tweakpane.yHWGBmom1734239885681.js";import{c as B,a as L}from"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.THY-wPni1734239885681.js";import{a as N}from"./mapBoxShow.vue_vue_type_script_setup_true_lang.8-v6EVEj1734239885681.js";import{i as O}from"./informationDiv.3KUE0qG51734239885681.js";import"./three-custom-shader-material._Q1qyIV-1734239885681.js";import"./3d-tiles-renderer._RgVDLoS1734239885681.js";import"./index.e2fFC5B51734239885681.js";import"./@mapbox.0f2JxG4t1734239885681.js";import"./@amap.NYHfUxYe1734239885681.js";import"./three-mesh-bvh.VXqmm2ua1734239885681.js";import"./utils.QIztJSEs1734239885681.js";import"./@tweenjs.N-Wo2kDo1734239885681.js";import"./utils.eWGaZNtC1734239885681.js";import"./@fesjs.1fC4qdx91734239885681.js";import"./vue-router.KCZH8FnA1734239885681.js";import"./lodash-es.kYt-_xTG1734239885681.js";import"./@qlin.yHhFDldE1734239885681.js";import"./pinia.XvNnwauR1734239885681.js";import"./vue-demi.C4xddsk91734239885681.js";import"./@floating-ui.BPbuo5Gx1734239885681.js";import"./@juggle.7yjBMqoW1734239885681.js";import"./d3-geo.v9NH8zku1734239885681.js";import"./d3-array.AhNJy1f41734239885681.js";import"./http.W0V6AdDt1734239885681.js";import"./axios.Ng308AU61734239885681.js";import"./color.clMFjX5Q1734239885681.js";import"./color-string.7-iq8Mdi1734239885681.js";import"./color-name.8zCBv9xJ1734239885681.js";import"./simple-swizzle.akV_Jvo-1734239885681.js";import"./is-arrayish.RGDsHgD91734239885681.js";import"./color-convert.tGLWBpMr1734239885681.js";import"./lodash.HDWIiThE1734239885681.js";import"./naive-ui._SYzlyKO1734239885681.js";import"./date-fns.dsKIdits1734239885681.js";import"./@css-render.uUW6rhgi1734239885681.js";import"./seemly.SjiSeX2v1734239885681.js";import"./css-render.7_PNIyDU1734239885681.js";import"./@emotion.ZD_ZYAgY1734239885681.js";import"./vooks.TBPLKM-I1734239885681.js";import"./evtd.DtfwxtIl1734239885681.js";import"./vueuc.N01X7UVQ1734239885681.js";import"./vdirs.ixPnhd8r1734239885681.js";import"./treemate.dcEdf2le1734239885681.js";import"./date-fns-tz.Ech1RPbh1734239885681.js";import"./async-validator.-YBkpS4I1734239885681.js";import"./@vueuse.GyFlY0FM1734239885681.js";import"./iobuffer.X3Ykb-iF1734239885681.js";const Z=H;!function(n,t){const e=H,o=$();for(;;)try{if(652759===-parseInt(e(143))/1+-parseInt(e(177))/2*(parseInt(e(160))/3)+-parseInt(e(168))/4*(-parseInt(e(155))/5)+parseInt(e(154))/6+-parseInt(e(157))/7+parseInt(e(145))/8+parseInt(e(172))/9*(parseInt(e(140))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[H(173)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function H(n,t){const e=$();return(H=function(n,t){return e[n-=137]})(n,t)}!function(){V(this,(function(){const n=H,t=new RegExp(n(171)),e=new RegExp(n(170),"i"),o=G(n(152));t[n(150)](o+"chain")&&e[n(150)](o+n(139))?G():o("0")}))()}();const q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[H(173)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();q(void 0,(function(){const n=H,t=function(){const n=H;let t;try{t=Function(n(159)+n(137)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},o=[n(179),n(146),n(147),"error","exception",n(176),n(163)];for(let r=0;r<o[n(164)];r++){const t=q.constructor[n(138)][n(141)](q),a=o[r],i=e[a]||t;t[n(151)]=q[n(141)](q),t[n(148)]=i[n(148)].bind(i),e[a]=t}}))();const U=s({__name:Z(142),props:{texture:{}},setup(t){const e=Z,o=t,{scene:r}=a(),i=(new n)[e(175)](o[e(165)]).load(["pos-x.png","neg-x.png","pos-y.png",e(156),e(149),"neg-z.png"]);return r[e(158)][e(162)]=i,r[e(158)][e(169)]=i,(n,t)=>null}});function $(){const n=["setPath","table","312ddSqQj","gger","log",'{}.constructor("return this")( )',"prototype","input","1677650nBhPwO","bind","skyBoxMesh","1098983kNfDNO","action","7381856RqcbXt","warn","info","toString","pos-z.png","test","__proto__","init","debu","604356xTwNNJ","10rbKlLO","neg-y.png","2500904UTbxRR","value","return (function() ","25014MVVDzK","call","environment","trace","length","texture","counter","string","2088328OXAKzV","background","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","72MujcCf","apply","constructor"];return($=function(){return n})()}function G(n){function t(n){const e=H;if(typeof n===e(167))return function(n){}[e(174)]("while (true) {}")[e(173)](e(166));1!==(""+n/n)[e(164)]||n%20==0?function(){return!0}[e(174)](e(153)+"gger")[e(161)](e(144)):function(){return!1}[e(174)]("debu"+e(178))[e(173)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const W=J;!function(n,t){const e=J,o=Y();for(;;)try{if(882924===parseInt(e(244))/1+-parseInt(e(284))/2+parseInt(e(289))/3*(parseInt(e(250))/4)+parseInt(e(255))/5+-parseInt(e(279))/6*(-parseInt(e(248))/7)+-parseInt(e(261))/8+-parseInt(e(264))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function J(n,t){const e=Y();return(J=function(n,t){return e[n-=240]})(n,t)}!function(){X(this,(function(){const n=J,t=new RegExp(n(269)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=tn("init");t[n(271)](o+n(252))&&e[n(271)](o+"input")?tn():o("0")}))()}();const Q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[J(278)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function Y(){const n=["makeDefault","keys","gger","278950HlBsmR","error","28tYZJNq","args","chain","update",'{}.constructor("return this")( )',"6188785eMdQEx","min-zoom","start","max-polar-angle","min-azimuth-angle","exception","1384344FwvkVk","constructor","MapControls","20963088SONaha","max-zoom","camera","domElement","end","function *\\( *\\)","warn","test","max-azimuth-angle","POSITIVE_INFINITY","counter","enable-pan","call","auto-rotate","apply","156qKCskv","prototype","enable-zoom","key-pan-speed","trace","3236624SutHVW","debu","console","value","enable-damping","413958mJmukt","rotate-speed","min-distance","change","enable-rotate","max-distance","NEGATIVE_INFINITY","toString","zoom-speed","damping-factor","__proto__","log","dispose","bind","auto-rotate-speed","1763752yxWxco"];return(Y=function(){return n})()}Q(void 0,(function(){const n=J,t=function(){const n=J;let t;try{t=Function("return (function() "+n(254)+");")()}catch(e){t=window}return t}(),e=t[n(286)]=t[n(286)]||{},o=[n(240),n(270),"info",n(249),n(260),"table",n(283)];for(let r=0;r<o.length;r++){const t=Q[n(262)][n(280)][n(242)](Q),a=o[r],i=e[a]||t;t[n(299)]=Q[n(242)](Q),t[n(296)]=i[n(296)][n(242)](i),e[a]=t}}))();const K=[W(251),W(277),W(243),W(288),W(298),W(275),W(282),W(246),W(272),W(259),W(258),"min-polar-angle",W(291),W(294),W(256),W(265),W(281),W(297),W(293),W(290)],nn=s({__name:W(263),props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number.POSITIVE_INFINITY},minAzimuthAngle:{default:Number[W(295)]},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number[W(273)]},minZoom:{default:0},maxZoom:{default:Number[W(273)]},touches:{},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start",W(268)],setup(n,{expose:t,emit:e}){const o=n,{autoRotate:r,autoRotateSpeed:s,enableDamping:g,dampingFactor:v,enablePan:h,keyPanSpeed:b,maxAzimuthAngle:x,minAzimuthAngle:I,maxPolarAngle:w,minPolarAngle:j,minDistance:_,maxDistance:z,minZoom:S,maxZoom:T,enableZoom:D,zoomSpeed:P,enableRotate:E,rotateSpeed:k}=c(o),{camera:M,renderer:F,extend:R,controls:C,invalidate:B}=a();u(o,(()=>{B()}));const L=l(null);R({MapControls:A}),u(L,(n=>{const t=J;n&&o[t(245)]?C[t(287)]=n:C[t(287)]=null}));const{onBeforeRender:N}=i();return N((({invalidate:n})=>{const t=J;L[t(287)]&&(g[t(287)]||r[t(287)])&&(L[t(287)][t(253)](),n())})),p((()=>{const n=J;L[n(287)]&&L[n(287)][n(241)]()})),t({instance:L}),(n,t)=>{const e=J;return(n.camera||f(M))&&(n[e(267)]||f(F))?(m(),d("TresMapControls",{key:0,ref_key:"controlsRef",ref:L,args:[n[e(266)]||f(M),n[e(267)]||f(F).domElement],"auto-rotate":f(r),"auto-rotate-speed":f(s),"enable-damping":f(g),"damping-factor":f(v),"enable-pan":f(h),"key-pan-speed":f(b),keys:n.keys,"max-azimuth-angle":f(x),"min-azimuth-angle":f(I),"max-polar-angle":f(w),"min-polar-angle":f(j),"min-distance":f(_),"max-distance":f(z),"min-zoom":f(S),"max-zoom":f(T),"enable-zoom":f(D),"zoom-speed":f(P),"enable-rotate":f(E),"rotate-speed":f(k)},null,8,K)):y("",!0)}}});function tn(n){function t(n){const e=J;if("string"==typeof n)return function(n){}[e(262)]("while (true) {}")[e(278)](e(274));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(285)+e(247))[e(276)]("action"):function(){return!1}.constructor(e(285)+e(247))[e(278)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=sn,o=cn();for(;;)try{if(425064===parseInt(e(526))/1+parseInt(e(528))/2*(-parseInt(e(561))/3)+-parseInt(e(529))/4+parseInt(e(558))/5*(parseInt(e(519))/6)+-parseInt(e(517))/7+-parseInt(e(548))/8+-parseInt(e(532))/9*(-parseInt(e(502))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const en=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[sn(557)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){en(this,(function(){const n=sn,t=new RegExp(n(512)),e=new RegExp(n(568),"i"),o=ln(n(475));t[n(503)](o+n(542))&&e.test(o+n(507))?ln():o("0")}))()}();const on=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[sn(557)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();on(void 0,(function(){const n=sn;let t;try{t=Function(n(540)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(488)]=t.console||{},o=[n(536),n(545),n(481),"error",n(513),n(484),n(530)];for(let a=0;a<o[n(501)];a++){const t=on[n(500)][n(541)][n(515)](on),r=o[a],i=e[r]||t;t.__proto__=on[n(515)](on),t[n(554)]=i[n(554)][n(515)](i),e[r]=t}}))();function rn(n,t,e=0){const o=sn,r=function(n,t,e){const o=sn;switch(e){case"byte":return e=>n[o(508)](t+e,!1);case"short":return e=>n[o(510)](t+2*e,!1);case o(524):return e=>n[o(535)](t+4*e,!1);case o(533):return e=>n.getFloat32(t+4*e,!1);case o(491):return e=>n[o(479)](t+8*e,!1);default:return console[o(494)](o(544),e),()=>0}}(new DataView(n),e,t[o(543)]);t[o(562)]=function(n){const t=sn;switch(n[t(543)]){case t(476):return new Uint8Array(n[t(504)]);case t(487):return new Float32Array(n.size);case t(524):case t(533):case t(491):return new Float32Array(n[t(504)]);default:return console.error(t(544),n[t(543)]),()=>0}}(t),t[o(486)]=1/0,t[o(531)]=-1/0,t.record&&console[o(545)](o(489),t[o(496)]);for(let a=0;a<t[o(504)];a++){const n=r(a);t[o(562)][a]=n,t[o(486)]>n&&(t[o(486)]=n),t.max<n&&(t.max=n)}return t}function an(n,t,e){const o=sn;if(e>=t[o(566)][o(501)])return 1;const r=t[o(566)][e],a=n[o(551)];return r===a.id?a[o(501)]:n[o(566)][r][o(504)]}function sn(n,t){const e=cn();return(sn=function(n,t){return e[n-=473]})(n,t)}function cn(){const n=["test","size","debu","name","input","getInt8","headers","getInt16","subarray","function *\\( *\\)","exception","then","bind","resolve","1766856NZsCap","Content-Length","126fUbFsh","zLength","GET","body","bytesReceived","int","needsUpdate","113434nbXeJy","cancel","8mqAsHM","1933288yFqRJT","trace","max","16839dnrPPM","float","url","getInt32","log","buffer","variable","bytesTotal","return (function() ","prototype","chain","type","unsupported type : ","warn","offset","UnsignedByteType","5040152CMaHFx","LinearFilter","bytes=","recordDimension","yLength","Accept-Ranges","toString","FloatType","stateObject","apply","107650IwYcJq","read","acceptRanges","241551KoZjYX","data","unpackAlignment","byteLength","format","dimensions","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","gger","init","byte","variables","done","getFloat64","minFilter","info","arrayBuffer","xLength","table","call","min","short","console","decoding of record data is not fully supported yet","counter","double","while (true) {}","get","error","find","record","set","reader","magFilter","constructor","length","8270VWZRac"];return(cn=function(){return n})()}function un(n){const o=sn;if(function(n){const t=sn;switch(n){case t(476):return e[t(547)];case t(487):case"int":case"float":case t(491):return e[t(555)];default:return void console[t(494)](t(544),n)}}(n[o(543)])!==t)return n;for(let t=0;t<n.size;t++)n[o(562)][t]=Math[o(486)](1,Math[o(531)](0,(n[o(562)][t]-n[o(486)])/(n.max-n[o(486)])));return n}function ln(n){function t(n){const e=sn;if("string"==typeof n)return function(n){}[e(500)](e(492))[e(557)](e(490));1!==(""+n/n).length||n%20==0?function(){return!0}[e(500)](e(505)+e(474))[e(485)](e(473)):function(){return!1}[e(500)]("debu"+e(474))[e(557)](e(556)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const pn=hn;!function(n,t){const e=hn,o=vn();for(;;)try{if(672777===-parseInt(e(466))/1*(-parseInt(e(514))/2)+parseInt(e(446))/3+-parseInt(e(439))/4+-parseInt(e(456))/5+-parseInt(e(448))/6+parseInt(e(475))/7*(-parseInt(e(477))/8)+parseInt(e(503))/9*(parseInt(e(470))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const fn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[hn(457)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){fn(this,(function(){const n=hn,t=new RegExp(n(461)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=xn(n(485));t[n(490)](o+n(481))&&e.test(o+"input")?xn():o("0")}))()}();const mn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[hn(457)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();mn(void 0,(function(){const n=hn;let t;try{t=Function(n(516)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t.console=t.console||{},o=[n(474),n(437),"info","error","exception",n(447),n(502)];for(let a=0;a<o.length;a++){const t=mn.constructor[n(429)][n(462)](mn),r=o[a],i=e[r]||t;t[n(511)]=mn[n(462)](mn),t[n(480)]=i[n(480)].bind(i),e[r]=t}}))();const dn=[pn(465),pn(478)],yn=[pn(458),pn(444)],gn=["object"];function vn(){const n=["LineSegments","Vector3","prototype","change","debu","needsUpdate","addBlade","dataTexture","TresShaderMaterial","composeType","warn","zExtent","4584736CxcqFt","setDataTypeFromJSdata","是否反色","EdgesGeometry","string","visible","minFilter","2760606kMWkwU","table","3513330EbaPSg","Data3DTexture","threshold","colorsStops","xLength","constructor","filter","applyMatrix4","2862195RXrcsF","apply","scale","magFilter","yExtent","function *\\( *\\)","bind","clim1","体绘制的阈值","position","1dryYwB","map","maximumIntensity","invertColor","28329610mdCmsn","TresMesh","matrix","xExtent","log","7tnsPay","TresBoxGeometry","8283464iVfHHG","rotation","BackSide","toString","chain","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/ncFile/2003.nc","TresGroup","list","init","format","u_clim","variables","while (true) {}","test","ClampToEdgeWrapping","LineBasicMaterial","getThreeType","体积采样率","thresholding","stateObject","addBinding","wrapT","uniforms","value","type","trace","9joErdZ","updateTransferFunction","volumeMesh","data","BoxGeometry","透明度","gger","emissionAbsorption","__proto__","colorTexture","clim2","518450sdONrt","Vector2","return (function() ","LinearFilter","wrapS"];return(vn=function(){return n})()}function hn(n,t){const e=vn();return(hn=function(n,t){return e[n-=427]})(n,t)}const bn=s({__name:pn(505),props:{map:{}},async setup(n){const t=pn;let a,i;const s=n,c=s[t(467)].geo2pos(new(e[t(428)])(118.724419,32.010354,200.8));c[t(455)](s[t(467)][t(472)]);const p=l(1),I=l(1),w=l(1),j=M(),_=new(e[t(427)])(new(e[t(442)])(new(e[t(507)])(1,1,1)),new(e[t(492)])({color:10066329})),z=([a,i]=g((()=>(async n=>{const t=sn,e=await fetch(n,{method:t(521)});if(!e.ok)throw new Error("HTTP error! status: "+e.status);const o=e[t(522)].getReader();let r=0,a=null;return await o[t(559)]()[t(514)]((function n(i){const s=t,c=r+i.value.length;if(a){const n=a[s(511)](0,r);a=new Uint8Array(c),a[s(497)](n,0,r),a[s(497)](i[s(567)],r)}else a=i[s(567)];r=c;try{const n=new k(a);return n[s(534)]=e[s(534)],n.reader=o,n[s(539)]=e[s(509)].get(s(518)),n[s(560)]="bytes"===e[s(509)][s(493)](s(553)),n[s(523)]=r,n}catch(u){return i[s(478)]?void console[s(536)]("netcdf header头文件不合法!"):o.read().then(n)}}))})(t(482)))),a=await a,i(),a),S=z[t(488)][t(454)]((n=>3==n.dimensions.length)),T=l("THT"),D=F(),A=async()=>{const n=t,e=un(await function(n,t,e=!1){const o=sn;void 0===n[o(523)]&&(n[o(523)]=n[o(537)][o(564)]);const r=e||n[o(560)],a=n[o(477)][o(495)]((n=>n[o(506)]===t)),i={variable:t,xLength:an(n,a,0),yLength:an(n,a,1),zLength:an(n,a,2),type:a[o(543)]};a[o(496)]&&(i[o(496)]=n[o(551)]),i[o(504)]=i[o(483)]*i[o(552)]*i[o(520)];const s=a[o(546)],c=s+a[o(504)]-1;if(!r&&c>=n[o(523)])return fetch(n[o(534)])[o(514)]((n=>n[o(482)]()))[o(514)]((n=>rn(n,i,s)));if(n.reader&&(n[o(498)][o(527)](),n.reader=void 0),c<n[o(523)])return Promise[o(516)](rn(n[o(537)][o(537)],i,s));const u=new Headers({Range:o(550)+s+"-"+c});return fetch(n[o(534)],{headers:u})[o(514)]((n=>n[o(482)]()))[o(514)]((n=>rn(n,i)))}(z,T[n(500)]));console[n(474)](e),D[n(440)](e[n(506)]),D[n(473)]=e[n(452)],D[n(460)]=e.yLength,D[n(438)]=e.zLength,D.setArrayBuffer(e.data),p.value=400,I[n(500)]=D[n(460)]/D[n(473)]*400,w[n(500)]=D[n(438)]/D.xExtent*400};[a,i]=g((()=>A())),await a,i();const P=v((()=>{const n=t;return!(p[n(500)]<=.01&&p[n(500)]>=-.01)&&(!(I[n(500)]<=.01&&I[n(500)]>=-.01)&&!(w[n(500)]<=.01&&w.value>=-.01))})),E=()=>{const n=t,a=new(e[n(449)])(D.byteArray,D[n(473)],D[n(460)],D[n(438)]);return a[n(486)]=o,a[n(501)]=D[n(493)](),a[n(445)]=e[n(517)],a[n(459)]=e[n(517)],a[n(518)]=r,a[n(498)]=r,a.wrapR=e[n(491)],a[n(432)]=!0,a},R={uniforms:{dataTexture:{value:E()},colorTexture:{value:j[t(504)]()},samplingRate:{value:4},threshold:{value:.5},alphaScale:{value:1},invertColor:{value:!1},composeType:{value:1},u_clim:{value:new(e[t(515)])(.093,-.001)}},vertexShader:"out vec3 vOrigin; \nout vec3 vDirection;  \nvarying vec3 vPosition;\n\nvoid main() {\n  vPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  \n  \n  vOrigin = vec3(inverse(modelMatrix) * vec4(cameraPosition, 1.0)).xyz;\n  \n  vDirection = position - vOrigin;\n\n  \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"precision highp sampler3D; \nprecision highp float;     \n\nuniform sampler3D dataTexture;  \nuniform sampler2D colorTexture; \nuniform float samplingRate;     \nuniform float threshold;  \nuniform float alphaScale; \nuniform bool invertColor; \nuniform float composeType;\n\nin vec3 vOrigin;    \nin vec3 vDirection; \n\nuniform vec4 clipPlanesArray[3]; \nvarying vec3 vPosition;\nuniform vec2 u_clim;\n\nfloat sampleData(vec3 texcoords) {\n\t\treturn (texture(dataTexture, texcoords.xyz).r - u_clim[0]) / (u_clim[1] - u_clim[0]);\n}\n\nvec4 sampleColor(float value) {\n  \n  \n  float x = invertColor ? 1. - value : value;\n  return texture(colorTexture, vec2(x, .5));\n}\n\nvec2 intersectAABB(vec3 rayOrigin, vec3 rayDir, vec3 boxMin, vec3 boxMax) {\n  vec3 tMin = (boxMin - rayOrigin) / rayDir;\n  vec3 tMax = (boxMax - rayOrigin) / rayDir;\n  vec3 t1 = min(tMin, tMax);\n  vec3 t2 = max(tMin, tMax);\n  float tNear = max(max(t1.x, t1.y), t1.z);\n  float tFar = min(min(t2.x, t2.y), t2.z);\n\n  return vec2(tNear, tFar);\n}\n\nvec4 compose_maximumIntensity(vec4 color, vec3 entryPoint, vec3 rayDir,\n                              float samples, float tStart, float tEnd,\n                              float tIncr) {\n  \n  \n  float density = 0.;\n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value > density) {\n      \n      density = value;\n    }\n\n    \n    \n    if (density >= 1. || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  color.rgb = sampleColor(density).rgb;\n  \n  color.a = alphaScale * (invertColor ? 1. - density : density);\n\n  \n  return color;\n}\n\nvec4 compose_thresholding(vec4 color, vec3 entryPoint, vec3 rayDir,\n                          float samples, float tStart, float tEnd,\n                          float tIncr) {\n  \n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n\n    \n    if (value >= threshold || t > tEnd) {\n      \n      color.rgb = sampleColor(value).rgb;\n      \n      color.a = alphaScale;\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose_emissionAbsorption(vec4 color, vec3 entryPoint, vec3 rayDir,\n                                float samples, float tStart, float tEnd,\n                                float tIncr) {\n  \n\n  \n  \n  for (float i = 0.; i < samples; i += 1.) {\n    \n    float t = tStart + tIncr * i;     \n    vec3 p = entryPoint + rayDir * t; \n\n    \n    float value = sampleData(p);\n    \n    vec4 valueColor = sampleColor(value);\n\n    \n    valueColor.a *= value * alphaScale;\n    valueColor.rgb *= valueColor.a;\n\n    color.rgb += (1. - color.a) * valueColor.rgb;\n    color.a += (1. - color.a) * valueColor.a;\n\n    \n    \n    if (color.a >= .99 || t > tEnd) {\n      break;\n    }\n  }\n\n  \n  return color;\n}\nvec4 compose(vec4 color, vec3 entryPoint, vec3 rayDir, float samples,\n             float tStart, float tEnd, float tIncr) {\n  if (composeType == 1.) {\n    return compose_maximumIntensity(color, entryPoint, rayDir, samples, tStart,\n                                    tEnd, tIncr);\n  }\n  if (composeType == 2.) {\n    return compose_thresholding(color, entryPoint, rayDir, samples, tStart,\n                                tEnd, tIncr);\n  }\n  if (composeType == 3.) {\n    return compose_emissionAbsorption(color, entryPoint, rayDir, samples,\n                                      tStart, tEnd, tIncr);\n  }\n}\n\nvoid main() {\n  \n  vec3 rayDir = normalize(vDirection);\n  vec3 aabbmin = vec3(-.5);\n  vec3 aabbmax = vec3(.5);\n  vec2 intersection = intersectAABB(vOrigin, rayDir, aabbmin, aabbmax);\n\n  \n  vec4 color = vec4(0.);\n\n  \n  \n  if (intersection.x <= intersection.y) {\n    \n    \n    intersection.x = max(intersection.x, 0.);\n    \n    vec3 entryPoint = vOrigin + rayDir * intersection.x;\n    vec3 exitPoint = vOrigin + rayDir * intersection.y;\n\n    \n    \n    \n    vec3 dimensions = vec3(textureSize(dataTexture, 0));\n    vec3 entryToExit = exitPoint - entryPoint;\n    float samples =\n        ceil(samplingRate * length(entryToExit * (dimensions - vec3(1.))));\n    float tEnd = length(entryToExit);\n    float tIncr = tEnd / samples;\n    float tStart = .5 * tIncr;\n\n    \n    vec3 texEntry = (entryPoint - aabbmin) / (aabbmax - aabbmin);\n\n    \n    color = compose(color, texEntry, rayDir, samples, tStart, tEnd, tIncr);\n  }\n\n  \n  vec4 eeee = vec4(.0, .0, .0, 1.0);\n  eeee.x = dot(vPosition, clipPlanesArray[0].xyz)+clipPlanesArray[0].w;\n  if (eeee.x < 0.0)\n      discard; \n  eeee.y = dot(vPosition, clipPlanesArray[1].xyz)+clipPlanesArray[1].w;\n  if (eeee.y < 0.0)\n      discard; \n  eeee.z = dot(vPosition, clipPlanesArray[2].xyz)+clipPlanesArray[2].w;\n  if (eeee.z < 0.0)\n      discard; \n  \n  gl_FragColor = color;\n}",side:e[t(479)],transparent:!0},B=l(!0),L=new C;return L[t(433)]({view:t(484),label:"气象要素",options:S.map((n=>({text:n.name,value:n.name}))),value:T[t(500)]}).on(t(430),(async n=>{const e=t;T[e(500)]=n[e(500)],await A(),R[e(499)][e(434)].value=E()})),L[t(497)](R.uniforms[t(487)].value,"x",{label:t(463),min:.01,max:.6,step:.001}),L[t(497)](R[t(499)][t(487)][t(500)],"y",{label:t(513),min:-.1,max:.03,step:.001}),L[t(433)]({view:"list",label:"模式",options:[{text:t(468),value:1},{text:t(495),value:2},{text:t(510),value:3}],value:R.uniforms[t(436)][t(500)]}).on("change",(n=>{const e=t;R[e(499)][e(436)][e(500)]=n[e(500)]})),L[t(497)](R[t(499)].samplingRate,t(500),{label:t(494),min:0,max:5,step:.01}),L.addBinding(R.uniforms[t(450)],t(500),{label:t(464),min:0,max:1,step:.01}),L[t(497)](R.uniforms.alphaScale,t(500),{label:t(508),min:0,max:1,step:.01}),L[t(497)](R.uniforms[t(469)],t(500),{label:t(441)}),L[t(497)](B,t(500),{label:"显示边框"}),u((()=>j[t(451)]),(()=>{const n=t;R[n(499)][n(512)][n(500)]=j[n(504)]()}),{deep:!0,immediate:!0}),(n,e)=>{const o=t;return m(),d(o(483),{position:[...f(c)],rotation:[-Math.PI/2,0,0]},[h(o(471),{scale:[p[o(500)],I.value,w[o(500)]],visible:P[o(500)],renderOrder:99990},[e[0]||(e[0]=h(o(476),{args:[1,1,1]},null,-1)),h(o(435),b(x(R)),null,16),B.value?(m(),d("primitive",{key:0,object:f(_)},null,8,gn)):y("",!0)],8,yn)],8,dn)}}});function xn(n){function t(n){const e=hn;if(typeof n===e(443))return function(n){}.constructor(e(489)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(453)](e(431)+e(509)).call("action"):function(){return!1}[e(453)]("debu"+e(509))[e(457)](e(496)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const In=zn;!function(n,t){const e=zn,o=Dn();for(;;)try{if(651813===parseInt(e(150))/1+parseInt(e(146))/2+parseInt(e(113))/3*(-parseInt(e(157))/4)+-parseInt(e(119))/5+parseInt(e(145))/6+-parseInt(e(134))/7*(-parseInt(e(130))/8)+parseInt(e(105))/9*(parseInt(e(122))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const wn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){wn(this,(function(){const n=zn,t=new RegExp(n(152)),e=new RegExp(n(129),"i"),o=Tn(n(111));t[n(121)](o+"chain")&&e[n(121)](o+n(138))?Tn():o("0")}))()}();const jn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[zn(135)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();jn(void 0,(function(){const n=zn;let t;try{t=Function(n(141)+n(123)+");")()}catch(r){t=window}const e=t[n(127)]=t[n(127)]||{},o=[n(153),n(131),n(114),"error","exception",n(118),n(132)];for(let a=0;a<o[n(143)];a++){const t=jn[n(156)].prototype[n(155)](jn),r=o[a],i=e[r]||t;t[n(117)]=jn.bind(jn),t[n(120)]=i[n(120)][n(155)](i),e[r]=t}}))();const _n=[In(144)];function zn(n,t){const e=Dn();return(zn=function(n,t){return e[n-=105]})(n,t)}const Sn=s({__name:In(137),setup(n){const t=In,o=new(P[t(126)])({token:"pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",dataType:t(109),style:"mapbox.terrain-rgb",maxLevel:15}),r=new(E[t(158)])({imgSource:[new(E[t(159)][t(124)])({style:"6"}),new(P[t(124)])({style:"8"})],demSource:o,lon0:90,minLevel:2,maxLevel:20});r[t(149)](-Math.PI/2);const i=new(e[t(106)])(110,30,0),s=new(e[t(106)])(110,0,1e4),c=r[t(108)](r[t(147)](i)),p=r[t(108)](r.geo2pos(s)),y=l(),{camera:g,controls:v,scene:b,renderer:x}=a();g[t(112)]&&g[t(112)].position[t(107)](p),u((()=>v[t(112)]),(n=>{const e=t;n&&(n[e(142)][e(107)](c),B(n,g[e(112)],b.value))})),u((()=>y[t(112)]),(n=>{const e=t;n&&n.target[e(133)][e(107)](c)}));const S=l();return u((()=>S.value),(n=>{const o=t;if(n){const t=new(e[o(106)])(108.724419,30.510354,200),r=new(e[o(106)])(118.724419,32.010354,0);setTimeout((()=>{n[o(154)](t,r)}),500)}})),L(g.value,x[t(112)].domElement,r),(n,e)=>{const o=t;return m(),d(z,null,[h(o(139),{ref_key:"tdLight",ref:y,position:[0,2e3,1e3],intensity:1},null,512),h(o(151),{object:f(r)},null,8,_n),I(f(N),{map:f(r),ref_key:o(140),ref:S},null,8,["map"]),(m(),w(_,null,{default:j((()=>[I(bn,{map:f(r)},null,8,[o(137)])])),_:1}))],64)}}});function Tn(n){function t(n){const e=zn;if(typeof n===e(115))return function(n){}.constructor(e(125))[e(135)](e(116));1!==(""+n/n)[e(143)]||n%20==0?function(){return!0}[e(156)](e(160)+e(148))[e(128)](e(136)):function(){return!1}.constructor(e(160)+e(148))[e(135)](e(110)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Dn(){const n=["1234936fpZNKu","warn","trace","position","35mUKLTf","apply","action","map","input","TresDirectionalLight","flyToRef","return (function() ","target","length","object","831372BXELjQ","1682194WoSAaj","geo2pos","gger","rotateX","126171DOhlcQ","primitive","function *\\( *\\)","log","flyToGeo","bind","constructor","4228wmqimb","TileMap","plugin","debu","643239ePSbSt","Vector3","copy","localToWorld","terrain-rgb","stateObject","init","value","2145AHNQHd","info","string","counter","__proto__","table","2707840XXxHXS","toString","test","10DBSHlW",'{}.constructor("return this")( )',"GDSource","while (true) {}","MapBoxSource","console","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Dn=function(){return n})()}!function(n,t){const e=kn,o=En();for(;;)try{if(797871===parseInt(e(137))/1+parseInt(e(118))/2*(-parseInt(e(127))/3)+-parseInt(e(116))/4+parseInt(e(120))/5*(parseInt(e(141))/6)+-parseInt(e(140))/7*(parseInt(e(129))/8)+parseInt(e(132))/9*(parseInt(e(128))/10)+parseInt(e(144))/11*(parseInt(e(136))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const An=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[kn(110)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){An(this,(function(){const n=kn,t=new RegExp(n(112)),e=new RegExp(n(113),"i"),o=Fn(n(104));t[n(123)](o+n(105))&&e[n(123)](o+n(108))?Fn():o("0")}))()}();const Pn=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[kn(110)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function En(){const n=["11kFkIyd","error","rgba(242, 0, 0, 1)","TresCanvas","init","chain","exception",'{}.constructor("return this")( )',"input","TresAmbientLight","apply","length","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","prototype","4311060cHTQvZ","call","2tatoFO","log","315MChzSn","return (function() ","__proto__","test","bind","counter","toString","2023878IDQjip","30VCopjt","8856IgeFzV","constructor","string","4143798MLXcZa","gger","while (true) {}","debu","18303540MMkawG","296012fVUFRl","trace","rgba(255, 220, 0, 1)","9618htbvRw","82734FtJxDZ","highp","console"];return(En=function(){return n})()}function kn(n,t){const e=En();return(kn=function(n,t){return e[n-=103]})(n,t)}Pn(void 0,(function(){const n=kn;let t;try{t=Function(n(121)+n(107)+");")()}catch(r){t=window}const e=t[n(143)]=t[n(143)]||{},o=[n(119),n(114),"info",n(145),n(106),"table",n(138)];for(let a=0;a<o[n(111)];a++){const t=Pn[n(130)][n(115)][n(124)](Pn),r=o[a],i=e[r]||t;t[n(122)]=Pn.bind(Pn),t[n(126)]=i[n(126)][n(124)](i),e[r]=t}}))();const Mn=s({__name:"earthNcFile",setup(n){const t=kn,e=S({alpha:!0,precision:t(142)});return(n,o)=>{const r=t,a=T(r(103));return m(),d(z,null,[I(R,{showSetup:!0,curColorList:[["rgba(0, 130, 250, 1)",.6228070175438597],["rgba(0, 204, 146, 1)",.7105263157894737],["rgba(106, 204, 0, 1)",.8114035087719298],[r(139),.8947368421052632],[r(146),1]]}),I(a,D(e,{"window-size":""}),{default:j((()=>[o[0]||(o[0]=h("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),I(nn,{makeDefault:""}),o[1]||(o[1]=h(r(109),{intensity:1},null,-1)),I(Sn),(m(),w(_,null,{default:j((()=>[I(U,{texture:"./plugins/tvtVolumeRendering/images/skybox/"})])),_:1}))])),_:1},16),I(f(O))],64)}}});function Fn(n){function t(n){const e=kn;if(typeof n===e(131))return function(n){}[e(130)](e(134))[e(110)](e(125));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debugger")[e(117)]("action"):function(){return!1}[e(130)](e(135)+e(133))[e(110)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{Mn as default};

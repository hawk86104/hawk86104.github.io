var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;import{_ as r,f as o,c1 as s,ak as i,am as c}from"./three.FxqAALWt1741168315107.js";import{m as a,e as u,o as l,f as p}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{g as f,i as d,e as m}from"./utils.Pl-ZJUGJ1741168315107.js";import{_ as h}from"./jszip.it_63bJF1741168315107.js";import{F as g}from"./file-saver.EKv88UNt1741168315107.js";import{P as v}from"./tweakpane.yDiyAAkA1741168315107.js";import{d as y,q as w,r as b,v as j,a2 as I,o as E,H as O,j as S,g as P,N as L,u as x,aj as R,ak as T,f as _,al as k,m as z,F as J}from"./@vue.NRI7TcgI1741168315107.js";import{v as F}from"./@fesjs.vxeGrljA1741168315107.js";import"./postprocessing.hfy6Kqg11741168315107.js";import"./@vueuse.Z8xAfE_A1741168315107.js";import"./@amap.d8-LJgNK1741168315107.js";import"./vue-router.WwZ4Gmuc1741168315107.js";import"./lodash-es.pklfUAS51741168315107.js";import"./@qlin.yHhFDldE1741168315107.js";import"./pinia.54vgoDms1741168315107.js";import"./@floating-ui.BPbuo5Gx1741168315107.js";import"./@juggle.7yjBMqoW1741168315107.js";const N=B;!function(t,n){const e=B,r=$();for(;;)try{if(349945===parseInt(e(249))/1+-parseInt(e(213))/2*(parseInt(e(212))/3)+parseInt(e(223))/4+parseInt(e(230))/5+-parseInt(e(256))/6+parseInt(e(224))/7*(parseInt(e(259))/8)+parseInt(e(243))/9*(-parseInt(e(254))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[B(263)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Z(this,(function(){const t=B,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(228),"i"),r=V(t(221));n[t(216)](r+"chain")&&e.test(r+"input")?V():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[B(263)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function M(t,n){for(let e=0,r=t[N(244)];e<r;e++)t[e](n)}C(void 0,(function(){const t=B,n=function(){const t=B;let n;try{n=Function("return (function() "+t(252)+");")()}catch(e){n=window}return n}(),e=n[t(246)]=n.console||{},r=[t(240),t(232),t(241),t(248),t(258),t(214),"trace"];for(let o=0;o<r[t(244)];o++){const n=C[t(247)][t(219)][t(234)](C),s=r[o],i=e[s]||n;n.__proto__=C[t(234)](C),n[t(218)]=i.toString[t(234)](i),e[s]=n}}))(),window[N(211)]=r;const A={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]},W=()=>{};function B(t,n){const e=$();return(B=function(t,n){return e[t-=210]})(t,n)}function G(t){M(A.keydown,t)}function H(t){M(A[N(229)],t)}function D(t){M(A[N(237)],t)}function K(t){M(A[N(227)],t)}function U(t){M(A.pointermove,t)}function $(){const t=["1075508elppmk","table","removeEventListener","test","addEventListener","toString","prototype","object","init","uuid","1675576FcSQdN","151221tAZTay","\nreturn ","getObjectByProperty","pointerup","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","keyup","2808865bQvWer","value","warn","gger","bind","keydown","update","pointerdown","push","start","log","info","stateObject","11871bCjWWe","length","action","console","constructor","error","696308JUoKLr","debu","stringify",'{}.constructor("return this")( )',"source","7090icNEMf","stop","420810ZYIwYZ","replace","exception","80jwlZwi","call","width","pointermove","apply","scripts","THREE","3kdkWyg"];return($=function(){return t})()}function V(t){function n(t){const e=B;if("string"==typeof t)return function(t){}[e(247)]("while (true) {}")[e(263)]("counter");1!==(""+t/t)[e(244)]||t%20==0?function(){return!0}[e(247)](e(250)+e(233))[e(260)](e(245)):function(){return!1}[e(247)]("debugger")[e(263)](e(242)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function X(){const t=["warn","return (function() ","9JxODjQ","const scriptsJson = \n","/* eslint-disable prefer-rest-params */\n/* eslint-disable no-undefined */\n/* eslint-disable guard-for-in */\nimport * as THREE from 'three'\n\nwindow.THREE = THREE // Used by APP Scripts.\nconst Grscwh = { scene: null, renderer: null, camera: null, sizes: null }\nconst player = {\n\tget renderer() {\n\t\treturn Grscwh.renderer?.value\n\t},\n\tloader: new THREE.TextureLoader(),\n\tget scene() {\n\t\t\treturn Grscwh.scene?.value\n\t},\n\tget camera() {\n\t\t\treturn Grscwh.camera?.value\n\t},\n\tget width() {\n\t\t\treturn Grscwh.sizes?.width?.value\n\t},\n\tget height() {\n\t\t\treturn Grscwh.sizes?.height?.value\n\t},\n\tget dom() {\n\t\t\treturn Grscwh.renderer?.value.domElement.parentElement\n\t},\n\tget canvas() {\n\t\t\treturn Grscwh.renderer?.value.domElement\n\t},\n\tevents: {},\n\tinit(scene, renderer, camera, sizes) {\n\t\t\tGrscwh.scene = scene\n\t\t\tGrscwh.renderer = renderer\n\t\t\tGrscwh.camera = camera\n\t\t\tGrscwh.sizes = sizes\n\t},\n\tload(sceneObject) {\n\t\t","2420KNFfEs","toString","trace","call","error",'{}.constructor("return this")( )',"function *\\( *\\)","7501333MBoXzX","bind","constructor","info","7300616ndqawV","\n\t\tthis.events = {\n\t\t\t\tinit: [],\n\t\t\t\tstart: [],\n\t\t\t\tstop: [],\n\t\t\t\tkeydown: [],\n\t\t\t\tkeyup: [],\n\t\t\t\tpointerdown: [],\n\t\t\t\tpointerup: [],\n\t\t\t\tpointermove: [],\n\t\t\t\tupdate: [],\n\t\t}\n\t\tlet scriptWrapParams = 'player,renderer,scene,camera'\n\t\tconst scriptWrapResultObj = {}\n\n\t\tfor (const eventKey in this.events) {\n\t\t\t\tscriptWrapParams += `,${eventKey}`\n\t\t\t\tscriptWrapResultObj[eventKey] = eventKey\n\t\t}\n\t\tconst scriptWrapResult = JSON.stringify(scriptWrapResultObj).replace(/\\\"/g, '')\n\t\tfor (const uuid in scriptsJson) {\n\t\t\t\tlet curUuid = uuid\n\t\t\t\t//这里解决一个问题 目前并没有把 主场景scene直接替换而是通过group 加进入的，所以 如果事件是基于主场景scene 那么替换这个uuid为现在tres主场景的uuid\n\t\t\t\tif (uuid === sceneObject.uuid) {\n\t\t\t\t\t\tcurUuid = this.scene.uuid\n\t\t\t\t}\n\t\t\t\tconst object = this.scene.getObjectByProperty('uuid', curUuid, true)\n\t\t\t\tif (object === undefined) {\n\t\t\t\t\t\tconsole.warn('player: Script without object.', curUuid)\n\t\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tconst scripts = scriptsJson[uuid]\n\t\t\t\tfor (let i = 0; i < scripts.length; i++) {\n\t\t\t\t\t\tconst script = scripts[i]\n\t\t\t\t\t\t// eslint-disable-next-line no-new-func\n\t\t\t\t\t\tconst functions = new Function(scriptWrapParams, `${script.source}\nreturn ${scriptWrapResult};`).bind(object)(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\tthis.renderer,\n\t\t\t\t\t\t\t\tthis.scene,\n\t\t\t\t\t\t\t\tthis.camera,\n\t\t\t\t\t\t)\n\t\t\t\t\t\tfor (const name in functions) {\n\t\t\t\t\t\t\t\tif (functions[name] === undefined) continue\n\t\t\t\t\t\t\t\tif (this.events[name] === undefined) {\n\t\t\t\t\t\t\t\t\t\tconsole.warn('player: Event type not supported (', name, ')')\n\t\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.events[name].push(functions[name].bind(object))\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.dispatch(this.events.init, arguments)\n\t\t}\n\t},\n\tdispatch(array, event) {\n\t\tfor (let i = 0, l = array.length; i < l; i++) {\n\t\t\t\tarray[i](event)\n\t\t}\n\t},\n\tsetCamera(value) {\n\t\t\tconsole.warn('暂时不考虑摄像机的设置函数', value)\n\t\t\t// camera = value\n\t\t\t// camera.aspect = this.width / this.height\n\t\t\t// camera.updateProjectionMatrix()\n\t},\n\tsetScene(value) {\n\t\t\tconsole.warn('暂时不考虑场景的设置函数', value)\n\t\t\t// scene = value\n\t},\n\tsetPixelRatio(value) {\n\t\t\tconsole.warn('暂时不考虑像素比的设置函数', value)\n\t},\n\tsetSize(value) {\n\t\t\tconsole.warn('暂时不考虑尺寸的设置函数', value)\n\t},\n\tdispose() {\n\t\t\t// renderer.dispose();\n\t\t\t// camera = undefined;\n\t\t\t// scene = undefined;\n\t\t\tconsole.warn('暂时不考虑释放资源的函数')\n\t},\n\tonKeyDown(event) {\n\t\tplayer.dispatch(player.events.keydown, event)\n\t},\n\tonKeyUp(event) {\n\t\t\tplayer.dispatch(player.events.keyup, event)\n\t},\n\tonPointerDown(event) {\n\t\t\tplayer.dispatch(player.events.pointerdown, event)\n\t},\n\tonPointerUp(event) {\n\t\t\tplayer.dispatch(player.events.pointerup, event)\n\t},\n\tonPointerMove(event) {\n\t\t\tplayer.dispatch(player.events.pointermove, event)\n\t},\n\tplay() {\n\t\t\tdocument.addEventListener('keydown', this.onKeyDown)\n\t\t\tdocument.addEventListener('keyup', this.onKeyUp)\n\t\t\tdocument.addEventListener('pointerdown', this.onPointerDown)\n\t\t\tdocument.addEventListener('pointerup', this.onPointerUp)\n\t\t\tdocument.addEventListener('pointermove', this.onPointerMove)\n\t\t\tthis.dispatch(this.events.start, null)\n\t\t\t//renderer.setAnimationLoop( animate ); 播放是自动的\n\t},\n\tstop() {\n\t\t\tdocument.removeEventListener('keydown', this.onKeyDown)\n\t\t\tdocument.removeEventListener('keyup', this.onKeyUp)\n\t\t\tdocument.removeEventListener('pointerdown', this.onPointerDown)\n\t\t\tdocument.removeEventListener('pointerup', this.onPointerUp)\n\t\t\tdocument.removeEventListener('pointermove', this.onPointerMove)\n\t\t\tthis.dispatch(this.events.stop, arguments)\n\t\t\t// renderer.setAnimationLoop( null );播放是自动的\n\t},\n\trender(elapsed, delta) {\n\t\t\tthis.dispatch(this.events.update, { time: elapsed, delta })\n\t},\n}\nexport default player\n","24843890SWmtQi","apply","while (true) {}","log","1506110VGaGjo","test","781PLumlF","__proto__","gger","prototype","table","length","chain","1664gQMRkM","123RZGBkv","action","input","2247618jUoIVK","console","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(X=function(){return t})()}!function(t,n){const e=q,r=X();for(;;)try{if(551031===-parseInt(e(389))/1*(parseInt(e(396))/2)+parseInt(e(397))/3*(parseInt(e(370))/4)+parseInt(e(387))/5+parseInt(e(361))/6+-parseInt(e(377))/7+-parseInt(e(381))/8+parseInt(e(367))/9*(parseInt(e(383))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Y(this,(function(){const t=q,n=new RegExp(t(376)),e=new RegExp(t(364),"i"),r=tt("init");n.test(r+t(395))&&e[t(388)](r+t(360))?tt():r("0")}))()}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[q(384)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function q(t,n){const e=X();return(q=function(t,n){return e[t-=359]})(t,n)}Q(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function(t(366)+t(375)+");")()}catch(e){n=window}return n}(),e=n[t(362)]=n[t(362)]||{},r=[t(386),t(365),t(380),t(374),"exception",t(393),t(372)];for(let o=0;o<r[t(394)];o++){const n=Q.constructor[t(392)].bind(Q),s=r[o],i=e[s]||n;n[t(390)]=Q.bind(Q),n[t(371)]=i[t(371)][t(378)](i),e[s]=n}}))();function tt(t){function n(t){const e=q;if("string"==typeof t)return function(t){}.constructor(e(385))[e(384)]("counter");1!==(""+t/t)[e(394)]||t%20==0?function(){return!0}[e(379)](e(363)+"gger")[e(373)](e(359)):function(){return!1}[e(379)](e(363)+e(391))[e(384)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function nt(t,n){const e=ot();return(nt=function(t,n){return e[t-=457]})(t,n)}!function(t,n){const e=nt,r=ot();for(;;)try{if(376849===-parseInt(e(475))/1*(parseInt(e(527))/2)+parseInt(e(551))/3+parseInt(e(463))/4*(parseInt(e(480))/5)+parseInt(e(532))/6*(-parseInt(e(536))/7)+parseInt(e(561))/8+-parseInt(e(537))/9*(parseInt(e(473))/10)+parseInt(e(464))/11*(parseInt(e(569))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[nt(492)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){et(this,(function(){const t=nt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(560),"i"),r=lt(t(523));n.test(r+t(519))&&e.test(r+t(549))?lt():r("0")}))()}();const rt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function ot(){const t=["getMonth","src/plugins/",'" type="',"toString","return (function() ","children","public/plugins/","log","__proto__",".json",'" name="',"exception","stringify",'\n<template>\n    <loading />\n\t<TresCanvas v-bind="state">\n\t\t',"length",'" uuid="',"\n    </primitive>\n","components/scene.vue","false","shadowType","\n\t</TresCanvas>\n</template>\n<script setup lang=\"ts\">\nimport * as THREE from 'three'\nimport { reactive, watch, ref } from 'vue'\nimport { TresCanvas } from '@tresjs/core'\nimport { OrbitControls } from '@tresjs/cientos'\nimport sceneCom from '../components/scene.vue'\nimport { loading2 as loading } from 'PLS/UIdemo'\n\nconst state = reactive({\n\tclearColor: '#201919',\n\twindowSize:true,\n\tantialias: true,\n\tshadows: ",' :object="sceneObject.children[',"chain","scripts",";base64,","<template>\n        ","init","secondLevel","pluginName",'",\n\t\t"require": [],\n        "tvtstore": \'LOCAL\',\n\t\t"preview": [\n\t\t\t{ "src": "plugins/basic/base/preview/theBasic.png", "type": "img", "name": "index", "title": "实例" ,"disableFPSGraph": false, "disableSrcBtn": false},\n\t\t]\n\t}',"12TRYDtp","project",'">\n    ',"shadows","childLevel","3288084trzRnJ",",\n\tshadowMapType: ",'"/>\n        ',"json/scene.json","7ivtrjn","279sfucgQ","generateAsync","toneMapping","orbitControls",'" />',"stateObject",",\n\ttoneMappingExposure:","data","\n\nconst { scene: tresScene, renderer, camera, sizes } = useTresContext()\nplayer.init(tresScene, renderer, camera, sizes)\n\nconst loader = new THREE.ObjectLoader()\nconst scene = await loadJsonFile('./plugins/","\n\t\t","camera","file","input","pages/index.vue","613560UPoDhu","gger","getDate","fileName","constructor","geometries","type","push",']" name="',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","317872kxhgiV","split","<TresGridHelper />","uuid","import ","true"," from './childComponent/",'",\n\t\t"updateTime": "',"1734252cVWZMs",'].children" />',"info","<OrbitControls />","scene","object","padStart","\nconst loader = new THREE.ObjectLoader()\nconst cameraObject = loader.parse(cameraConfig)\nconst cameraRef = ref(null)\nwatch(\n\t() => cameraRef.value,\n\t(val) => {\n\t\t\tval.copy(cameraObject)\n\t},\n)\n<\/script>\n\t","comName","console","url:images/","warn","5540reYKcp","55ZHnoyx","images","toneMappingExposure",'"/>\n    ',"/json/scene.json')\n\nif (scene.geometries) {\n    for (const geometry of scene.geometries) {\n        if (geometry.data && geometry.data.startsWith('url:')) {\n            let url = geometry.data.slice(4)\n            if (url.startsWith('geometries/')) {\n                url = `./plugins/","name","folder","counter","getFullYear","68410zDizYL","url","16205OWJZHq",",\n\ttoneMapping: ","pop","common/eventScript.js","url:geometries/","965uZyath","<Suspense>\n\t\t\t<sceneCom />\n\t\t</Suspense>",'",\n\t\t"title": "编辑器导出的插件",\n\t\t"intro": "描述",\n\t\t"version": "0.0.1",\n\t\t"author": "作者名",\n\t\t"website": "站点地址",\n\t\t"state": "active",\n\t\t"creatTime": "',"BufferGeometry",'\n</template>\n\n<script setup lang="ts">\nconst props = withDefaults(\n    defineProps<{\n        object: any\n    }>(),\n    {},\n)\n<\/script>\n','\n    <primitive :object="sceneObject.children[',"then","debu","<template>\n    ","THREE.PCFShadowMap","trace","parse","apply","bind","forEach","components/childComponent","THREE.NoToneMapping"];return(ot=function(){return t})()}rt(void 0,(function(){const t=nt;let n;try{n=Function(t(501)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n[t(460)]||{},r=[t(504),t(462),t(571),"error",t(508),"table",t(490)];for(let s=0;s<r[t(511)];s++){const n=rt[t(555)].prototype.bind(rt),o=r[s],i=e[o]||n;n[t(505)]=rt[t(493)](rt),n[t(500)]=i.toString[t(493)](i),e[o]=n}}))();let st=[];const it=(r,o,s,i)=>{const c=nt,a=s.object,{uuid:u}=a,l=((r,o)=>{var s={};for(var i in r)n.call(r,i)&&o.indexOf(i)<0&&(s[i]=r[i]);if(null!=r&&t)for(var i of t(r))o.indexOf(i)<0&&e.call(r,i)&&(s[i]=r[i]);return s})(a,["uuid"]),p=JSON[c(491)](JSON.stringify(s));return p.object=l,c(510)+(i[c(540)]?c(572):"")+c(546)+(s?"<Tres"+s[c(574)][c(557)]+'  ref="cameraRef" uuid="'+s.object[c(564)]+c(507)+s[c(574)][c(469)]+c(541):"")+"\n\t\t"+r+"\n\t\t"+(i.gridHelper?c(563):"")+c(517)+(o[c(530)]?c(566):c(515))+c(533)+(o[c(516)]?o[c(516)]:c(489))+c(476)+(o[c(539)]?o.toneMapping:c(496))+c(543)+(o[c(466)]?o[c(466)]:"1")+",\n})\n\nconst cameraConfig = "+(p?""+JSON[c(509)](p):"{}")+c(458)},ct=(t,n,e,r,o)=>{const s=nt;n[s(531)];let i=s(485)+r+s(559)+e[s(469)]+s(512)+e[s(564)]+s(499)+e.type+s(529);if(e.children&&e[s(502)][s(511)]){const n=((t,n)=>{const e=nt,r=t-1,o=["firstLevel",e(524),"thirdLevel"],s=n[e(562)]("-")[e(477)]();return{fileName:o[r]+"-"+s+".vue",comName:""+o[r]+s}})(o,e[s(564)]);i+="<"+n[s(459)]+s(518)+r+s(570),((t,n,e)=>{const r=nt;let o="";e[r(494)](((t,n)=>{const e=r;o+='\n        <primitive :object="object['+n+e(559)+t.name+e(512)+t.uuid+'" type="'+t[e(557)]+e(534)}));const s=r(488)+o+r(484);t[r(548)](""+n[r(554)],s),st[r(558)](n)})(t,n,e[s(502)])}return i+=s(513),i},at=(t,n,e)=>{const r=nt;let o="";const s=t.folder(r(495));return e[r(574)]&&e[r(574)][r(502)]&&e[r(574)][r(502)][r(511)]&&e[r(574)][r(502)][r(494)](((t,e)=>{const i=r;n.childLevel>0&&t[i(502)]&&t.children.length?o+=ct(s,n,t,e,1):o+='    \n    <primitive :object="sceneObject.children['+e+i(559)+t[i(469)]+i(512)+t[i(564)]+i(499)+t.type+i(467)})),t[r(548)](r(514),r(522)+o+"</template>\n<script setup lang=\"ts\">\nimport { onMounted } from 'vue'\nimport * as THREE from 'three'\nimport { loadImageToBase64, loadJsonFile } from 'PLS/tresEditor'\nimport { useTresContext, useRenderLoop } from '@tresjs/core'\nimport player from '../common/eventScript'\n"+(()=>{let t="";return st.forEach((n=>{const e=nt;t+=e(565)+n[e(459)]+e(567)+n[e(554)]+"'\n"})),t})()+r(545)+n[r(525)]+r(468)+n[r(525)]+"/${url}`\n            }\n            geometry.data = await loadJsonFile(url)\n        }\n    }\n}\nif (scene.images) {\n    for (const image of scene.images) {\n        if (image.url && image.url.startsWith('url:')) {\n            let url = image.url.slice(4)\n            if (url.startsWith('images/')) {\n                url = `./plugins/"+n[r(525)]+'/${url}`\n            }\n            if (url.endsWith(".json")) {\n                image.url = await loadJsonFile(url)\n            } else {\n                image.url = await loadImageToBase64(url)\n            }\n        }\n    }\n}\n\nconst sceneObject = loader.parse(scene) as any\nonMounted(() => {\n    tresScene.value.background = sceneObject.background\n    tresScene.value.environment = sceneObject.environment\n    tresScene.value.fog = sceneObject.fog\n    player.load(sceneObject)\n    player.play()\n})\nconst { onLoop } = useRenderLoop()\nonLoop(({ delta, elapsed }) => {\n    if (player.renderer) {\n        player.render(elapsed * 1000, delta * 1000)\n    }\n})\n<\/script>'),r(481)};function ut(t,n){const e=nt;st=[];const r=n[e(525)],o=new h;((t,n)=>{const e=nt,r=[];n[e(556)]&&n[e(556)].forEach((t=>{const n=e;t.type===n(483)&&(r.push({uuid:t.uuid,data:t.data}),t[n(544)]=n(479)+t[n(564)]+n(506))}));const o=[];if(n[e(465)]&&n[e(465)][e(494)]((t=>{const n=e;t.url&&(o.push({uuid:t[n(564)],url:t[n(474)]}),t[n(474)].type?t.url=n(461)+t[n(564)]+"."+t.url[n(557)]+n(506):t[n(474)]=n(461)+t[n(564)]+"."+f(t[n(474)]))})),r[e(511)]){const n=t.folder(e(556));r[e(494)]((t=>{const r=e;n[r(548)](t[r(564)]+r(506),JSON[r(509)](t[r(544)]))}))}if(o.length){const n=t.folder("images");o[e(494)]((t=>{const r=e;t.url[r(557)]?n[r(548)](t[r(564)]+"."+t.url[r(557)]+r(506),JSON.stringify(t.url)):n[r(548)](t[r(564)]+"."+f(t[r(474)]),t[r(474)][r(562)](r(521)).pop(),{base64:!0})}))}t[e(548)](e(535),JSON[e(509)](n))})(o[e(470)](e(503)+r),t.scene);const s=o.folder(e(498)+r);s.file("config.js",(t=>{const n=nt,e=new Date,r=e[n(472)]()+"-"+String(e[n(497)]()+1)[n(457)](2,"0")+"-"+String(e[n(553)]()).padStart(2,"0");return'\n\texport default {\n\t\t"name": "'+t+n(482)+r+n(568)+r+n(526)})(r));const i=it(at(s,n,t[e(573)]),t[e(528)],t[e(547)],n);return s.file(e(550),i),s[e(548)](e(478),(t=>{const n=q,e=n(368)+JSON.stringify(t)+"\n";return n(369)+e+n(382)})(t[e(520)])),o[e(538)]({type:"blob"})[e(486)]((t=>{g.saveAs(t,r+".zip")}))}function lt(t){function n(t){const e=nt;if("string"==typeof t)return function(t){}[e(555)]("while (true) {}")[e(492)](e(471));1!==(""+t/t).length||t%20==0?function(){return!0}[e(555)](e(487)+e(552)).call("action"):function(){return!1}[e(555)]("debu"+e(552)).apply(e(542)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const pt=ht;!function(t,n){const e=ht,r=dt();for(;;)try{if(685565===parseInt(e(212))/1*(parseInt(e(190))/2)+parseInt(e(248))/3*(parseInt(e(243))/4)+-parseInt(e(174))/5+parseInt(e(189))/6*(-parseInt(e(222))/7)+parseInt(e(184))/8*(-parseInt(e(224))/9)+parseInt(e(186))/10*(-parseInt(e(233))/11)+parseInt(e(188))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ht(242)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function dt(){const t=["1022927PaxmrJ","场景内无物体","add","默认控制器","addButton","addFolder","value","test","toString","导入分解场景Zip","7OBeNsu","background","45yxzZEK","clear","插件名称","warn","forEach",".json","getElementById","onchange","orbitControls","1635403mDSOBR","accept","pluginName","清空场景","children","分解场景[中间件 测试用]","warning","function *\\( *\\)","string","apply","284eXAEDu","onload","debu","prototype","parse","32259FXImoI","table","TvT插件包","Json2Zip","fog","ObjectLoader","constructor","5079170hVoXvI","gger",'{}.constructor("return this")( )',"importJson","console","length","init","result","reload","dispose","2150536weNYab","gridHelper","10NKbaqT","environment","29965740NrXheJ","6536268hcZwwj","2VTlVIW","addBinding","先清空场景","srcJson","click","trace","Zip2Json","默认网格","files","导入原生场景Json","while (true) {}","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","确定要执行操作吗？","scene",".zip","请正确填写插件名称","action","__proto__","target","bind","filter"];return(dt=function(){return t})()}!function(){ft(this,(function(){const t=ht,n=new RegExp(t(240)),e=new RegExp(t(202),"i"),r=vt(t(180));n[t(219)](r+"chain")&&e[t(219)](r+"input")?vt():r("0")}))()}();const mt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ht(242)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function ht(t,n){const e=dt();return(ht=function(t,n){return e[t-=169]})(t,n)}mt(void 0,(function(){const t=ht,n=function(){const t=ht;let n;try{n=Function("return (function() "+t(176)+");")()}catch(e){n=window}return n}(),e=n[t(178)]=n.console||{},r=["log",t(227),"info","error","exception",t(249),t(195)];for(let o=0;o<r[t(179)];o++){const n=mt[t(173)][t(246)][t(210)](mt),s=r[o],i=e[s]||n;n[t(208)]=mt[t(210)](mt),n[t(220)]=i.toString[t(210)](i),e[s]=n}}))();const gt=y({__name:pt(177),setup(t){const n=pt;let e,s=null;var i=new(r[n(172)]);let c=null;const{scene:l,renderer:p,camera:f,sizes:h}=a(),g=()=>{if(!c)return;const t=n=>{const e=ht;let r=n.children[e(211)]((t=>!!t));r[e(228)]((n=>{const r=e;n[r(237)][r(179)]?t(n):((t=>{var n,e;const r=ht;null==(n=t.geometry)||n[r(183)](),null==(e=t[r(201)])||e[r(183)]()})(n),n[r(225)]())})),n[e(225)](),r=null};t(c),c=null},y=t=>{const e=n;g(),(()=>{const t=N;document[t(215)]("keydown",G),document[t(215)]("keyup",H),document[t(215)](t(237),D),document[t(215)](t(227),K),document[t(215)](t(262),U),M(A.stop,null),A[t(221)]=[],A[t(239)]=[],A[t(255)]=[],A[t(235)]=[],A[t(229)]=[],A[t(237)]=[],A[t(227)]=[],A[t(262)]=[],A.update=[]})(),c=new o,t.children&&(c.children=t.children,l.value[e(214)](c),l[e(218)].background=t[e(223)],l[e(218)][e(187)]=t.environment,l[e(218)][e(171)]=t[e(171)])},b=new v;b.addButton({title:n(236),label:n(225)}).on(n(194),(()=>{const t=n;confirm(t(203))&&window.location[t(182)]()}));b[n(216)]({title:n(199),label:n(193)}).on(n(194),(()=>{var t,r;const o=n;s?null==(r=(t=F)[o(239)])||r.call(t,{content:o(192),colorful:!0}):e&&(e.accept=".json",e[o(218)]=null,e[o(194)]())}));const j=b[n(217)]({title:n(238),expanded:!1});j[n(216)]({title:"生成分解场景Zip",label:n(170)}).on(n(194),(()=>{var t,e;const r=n;s?m(s):null==(e=(t=F)[r(239)])||e.call(t,{content:r(213),colorful:!0})}));j[n(216)]({title:n(221),label:n(196)}).on(n(194),(()=>{var t,r;const o=n;s?null==(r=(t=F)[o(239)])||r.call(t,{content:o(192),colorful:!0}):e&&(e[o(234)]=".zip",e[o(218)]=null,e[o(194)]())}));const I={orbitControls:!0,gridHelper:!0,pluginName:"testEditor",childLevel:1},E=b.addFolder({title:n(169)});E[n(191)](I,n(235),{label:n(226)}),E[n(191)](I,n(232),{label:n(215)}),E.addBinding(I,n(185),{label:n(197)});E.addButton({title:"生成插件包",label:"MakePlugin"}).on(n(194),(()=>{var t,e,r,o;const i=n;s?I.pluginName?ut(s,I):null==(e=(t=F)[i(239)])||e.call(t,{content:i(206),colorful:!0}):null==(o=(r=F)[i(239)])||o.call(r,{content:i(213),colorful:!0})}));const O=t=>{const e=n;s=t,y(i[e(247)](s[e(204)])),((t,n,e,r,o)=>{const s=N,i=o[s(210)]||{};let c="player,renderer,scene,camera";const a={};for(const l in A)c+=","+l,a[l]=l;const u=JSON[s(251)](a)[s(257)](/\"/g,"");for(const l in i){let a=l;l===o.scene[s(220)][s(222)]&&(a=n[s(222)]);const p=n[s(226)]("uuid",a,!0);if(void 0===p){console.warn("APP.Player: Script without object.",a);continue}const f=i[l];for(let o=0;o<f[s(244)];o++){const i=f[o],a=new Function(c,i[s(253)]+s(225)+u+";")[s(234)](p)({width:r[s(261)][s(231)],height:r.height[s(231)],setCamera:W},t,n,e);for(const t in a)void 0!==a[t]&&(void 0!==A[t]?A[t][s(238)](a[t].bind(p)):console[s(232)]("APP.Player: Event type not supported (",t,")"))}}M(A[s(221)],null)})(p[e(218)],l[e(218)],f.value,h,s),(()=>{const t=N;document[t(217)](t(235),G),document[t(217)](t(229),H),document[t(217)]("pointerdown",D),document.addEventListener(t(227),K),document[t(217)](t(262),U),M(A[t(239)],null)})()};w((()=>{const t=n;e=document[t(230)]("fileInput"),e&&(e[t(231)]=n=>{const r=t,o=n[r(209)][r(198)][0];if(e[r(234)]===r(229)){const t=new FileReader;t[r(244)]=t=>{const n=r,e=t.target[n(181)];O(JSON.parse(e))},t.readAsText(o)}e[r(234)]===r(205)&&d(o,O)})}));const{onLoop:S}=u();return S((({delta:t,elapsed:n})=>{var e,r;e=1e3*n,r=1e3*t,M(A[N(236)],{time:e,delta:r})})),(t,n)=>null}});function vt(t){function n(t){const e=ht;if(typeof t===e(241))return function(t){}[e(173)](e(200)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(173)](e(245)+e(175)).call(e(207)):function(){return!1}[e(173)](e(245)+e(175))[e(242)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=bt,r=Et();for(;;)try{if(743814===parseInt(e(438))/1+parseInt(e(442))/2*(parseInt(e(458))/3)+parseInt(e(418))/4*(parseInt(e(446))/5)+parseInt(e(433))/6*(-parseInt(e(429))/7)+parseInt(e(450))/8+parseInt(e(422))/9*(parseInt(e(454))/10)+-parseInt(e(435))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[bt(455)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){yt(this,(function(){const t=bt,n=new RegExp(t(444)),e=new RegExp(t(452),"i"),r=It(t(441));n[t(417)](r+t(424))&&e.test(r+t(420))?It():r("0")}))()}();const wt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[bt(455)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function bt(t,n){const e=Et();return(bt=function(t,n){return e[t-=417]})(t,n)}wt(void 0,(function(){const t=bt;let n;try{n=Function("return (function() "+t(457)+");")()}catch(o){n=window}const e=n.console=n[t(445)]||{},r=[t(436),"warn","info","error",t(449),t(456),t(440)];for(let s=0;s<r[t(432)];s++){const n=wt.constructor[t(443)].bind(wt),o=r[s],i=e[o]||n;n[t(421)]=wt[t(426)](wt),n[t(427)]=i[t(427)][t(426)](i),e[o]=n}}))();const jt=y({__name:"simpleImport",setup(t){const n=bt,e=b({clearColor:n(419),shadows:!0,alpha:!1,shadowMapType:s,outputColorSpace:i,toneMapping:c}),r=b({enableDamping:!0,dampingFactor:.05}),o=j(null);return I((()=>{o[n(425)]})),(t,o)=>{const s=n;return E(),O(J,null,[S(x(p),z(e,{"window-size":""}),{default:P((()=>[o[0]||(o[0]=L(s(451),{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),S(x(l),R(T(r)),null,16),(E(),_(k,null,{default:P((()=>[S(gt)])),_:1})),o[1]||(o[1]=L(s(453),null,null,-1))])),_:1},16),o[2]||(o[2]=L(s(420),{id:s(439),type:"file",accept:s(448),style:{display:"none"}},null,-1))],64)}}});function It(t){function n(t){const e=bt;if(typeof t===e(423))return function(t){}.constructor(e(459))[e(455)](e(434));1!==(""+t/t)[e(432)]||t%20==0?function(){return!0}.constructor(e(447)+e(430))[e(437)]("action"):function(){return!1}[e(431)](e(447)+"gger")[e(455)](e(428)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function Et(){const t=["console","15FUaSVa","debu",".zip","exception","3359176MhmOAi","TresPerspectiveCamera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresGridHelper","2612780BeTEWy","apply","table",'{}.constructor("return this")( )',"246aXufIg","while (true) {}","test","721516rBXPLg","#201919","input","__proto__","18gbDQIo","string","chain","value","bind","toString","stateObject","182TOtMzz","gger","constructor","length","366YBIjDm","counter","19790342FmmVPG","log","call","583610XPLFKt","fileInput","trace","init","11642eOpxZO","prototype","function *\\( *\\)"];return(Et=function(){return t})()}export{jt as default};

import{_ as n,c as t,c3 as o}from"./three.8tDGqmLF1741309500666.js";import{e as r,D as e,a,o as s}from"./@tresjs.yaBKiR-I1741309500666.js";import{P as i}from"./tweakpane.yDiyAAkA1741309500666.js";import{d as c,a3 as u,r as l,b as p,w as f,o as m,H as v,N as g,aj as d,ak as x,u as y,e as h,f as w,g as b,j as I,al as C}from"./@vue.NRI7TcgI1741309500666.js";import"./postprocessing.5pHDeDVF1741309500666.js";import"./@vueuse.7Aa9Vkmy1741309500666.js";function z(){const n=["trace","BufferAttribute","debu","Mesh","function *\\( *\\)","rotateY","init","7621397XpfDNt","bind","attributes","setAttribute","clone","700774ETzDyV","call","disabled","console","stateObject","constructor","onLoop","value","array","toString","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","m1Color","4429970ZrddoQ","error","aRandom","toPosition","log","toNonIndexed","return (function() ","Color","6386112uhqhIM","8608200sVOWSv","颜色2rd","u_progress","uniforms","warn","TresMesh","length","gger","fragmentModelCom","6dCzVCv","push","rotateX","table","__proto__","scene","10zXfJBt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tangent","3BFaZQW","info","addBinding","./draco/","apply","156RHBmhS","geometry","input","Vector3","deleteAttribute","string","action","m2Color","children","颜色1st","test","random","#bcd4ff","chain","position","30561OpUPHa","#ffc0fa","19836124xONsdV","refresh","set","traverse","count"];return(z=function(){return n})()}const _=M;!function(n,t){const o=M,r=z();for(;;)try{if(580182===parseInt(o(465))/1*(-parseInt(o(426))/2)+-parseInt(o(485))/3*(-parseInt(o(470))/4)+parseInt(o(438))/5*(parseInt(o(456))/6)+-parseInt(o(421))/7+-parseInt(o(447))/8+parseInt(o(446))/9+parseInt(o(462))/10*(parseInt(o(487))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(469)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function M(n,t){const o=z();return(M=function(n,t){return o[n-=420]})(n,t)}!function(){P(this,(function(){const n=M,t=new RegExp(n(496)),o=new RegExp(n(463),"i"),r=D(n(420));t[n(480)](r+n(483))&&o[n(480)](r+n(472))?D():r("0")}))()}();const j=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(469)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();j(void 0,(function(){const n=M,t=function(){const n=M;let t;try{t=Function(n(444)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(429)]=t.console||{},r=[n(442),n(451),n(466),n(439),"exception",n(459),n(492)];for(let e=0;e<r[n(453)];e++){const t=j.constructor.prototype[n(422)](j),a=r[e],s=o[a]||t;t[n(460)]=j[n(422)](j),t[n(435)]=s[n(435)][n(422)](s),o[a]=t}}))();const V=["geometry"],A=c({__name:_(455),async setup(s){const c=_;let h,w;const b=t=>{const r=M,e=[];return t[r(490)]((t=>{const o=r;t instanceof n[o(495)]&&(t.geometry[o(474)]("uv"),t[o(471)][o(474)](o(464)),e[o(457)](t[o(471)]))})),o(e)},I=b(([h,w]=u((()=>e(c(436),{draco:!0,decoderPath:c(468)}))),h=await h,w(),h).scene[c(478)][0]);I[c(458)](Math.PI/2),I.translate(0,-.9,0);const C=I[c(425)]().toNonIndexed(),z=b(([h,w]=u((()=>e("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:c(468)}))),h=await h,w(),h)[c(461)][c(478)][0]);z[c(458)](-Math.PI/2),z[c(497)](Math.PI/3);const P=z[c(425)]()[c(443)](),j=C[c(423)][c(484)][c(434)],A=C[c(423)][c(484)].count,D=P[c(423)][c(484)][c(434)],N=P[c(423)].normal.array,R=P[c(423)].position[c(491)],S=new Float32Array(A),T=new Float32Array(3*(A+2)),F=new Float32Array(3*(A+2)),U=new Float32Array(3*(A+2));for(let t=0;t<A;t+=3){const o=1*Math[c(481)](),r=t%R;S[t]=o,S[t+1]=o,S[t+2]=o;const e=3*t,a=j[e],s=j[e+1],i=j[e+2],u=j[e+3],l=j[e+4],p=j[e+5],f=j[e+6],m=j[e+7],v=j[e+8],g=new(n[c(473)])(a+u+f,s+l+m,i+p+v).divideScalar(3);T[c(489)]([g.x,g.y,g.z],3*t),T[c(489)]([g.x,g.y,g.z],3*(t+1)),T[c(489)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=c,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(489)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(D,F,r),d(N,U,r)}C[c(424)](c(440),new(n[c(493)])(S,1)),C[c(424)]("aCenter",new t(T,3)),C[c(424)](c(441),new t(F,3)),C[c(424)]("toNormal",new(n[c(493)])(U,3)),console[c(442)](C[c(423)]);const E=([h,w]=u((()=>a(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,w(),h),Z={uniforms:{u_progress:{value:-.1},matcap1:{value:E},m1Color:{type:"v3",value:new(n[c(445)])(c(486))},matcap2:{value:E},m2Color:{type:"v3",value:new(n[c(445)])(c(482))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},O=l({c1:c(486),c2:c(482)}),B=p(.5),k=new i({title:"参数"});return k[c(467)](Z[c(450)][c(449)],c(433),{label:"变化量",min:-.1,max:1,step:.001})[c(428)]=!0,k[c(467)](O,"c1",{label:c(479)}),k[c(467)](O,"c2",{label:c(448)}),k[c(467)](B,c(433),{label:"速度",min:.001,max:1,step:.001}),f(O,(n=>{const t=c;Z[t(450)][t(437)][t(433)].set(n.c1),Z[t(450)][t(477)].value[t(489)](n.c2)}),{deep:!0}),r()[c(432)]((({elapsed:n})=>{const t=c;Z[t(450)][t(449)][t(433)]=(Math.sin(n*B[t(433)])+1)/2,k[t(488)]()})),(n,t)=>{const o=c;return m(),v(o(452),{geometry:y(C)},[g("TresShaderMaterial",d(x(Z)),null,16)],8,V)}}});function D(n){function t(n){const o=M;if(typeof n===o(475))return function(n){}.constructor("while (true) {}").apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(431)](o(494)+o(454))[o(427)](o(476)):function(){return!1}.constructor("debu"+o(454))[o(469)](o(430)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const N=R;function R(n,t){const o=T();return(R=function(n,t){return o[n-=345]})(n,t)}!function(n,t){const o=R,r=T();for(;;)try{if(567905===parseInt(o(386))/1*(-parseInt(o(376))/2)+parseInt(o(348))/3+parseInt(o(347))/4*(-parseInt(o(354))/5)+-parseInt(o(382))/6*(parseInt(o(384))/7)+parseInt(o(361))/8*(parseInt(o(363))/9)+parseInt(o(355))/10*(-parseInt(o(385))/11)+parseInt(o(374))/12)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[R(383)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function T(){const n=["prototype","ACESFilmicToneMapping","6260328MSZzvf","test","2zMCeUo","__proto__","TresPerspectiveCamera","TresAmbientLight","input","string","6OjKidw","apply","5323003VbjXhG","11hQTdFh","866214OKITEc","chain","length","function *\\( *\\)","116LnXlTy","3320052UbYUIV","table","info","constructor","error","warn","13855aHVzuh","1444190wMEUsH","trace","#000000","exception","fragmentModel","console","3163792UjUBdp","counter","18CZTnrR","debu","toString","stateObject","while (true) {}","bind","return (function() ","gger","log"];return(T=function(){return n})()}!function(){S(this,(function(){const n=R,t=new RegExp(n(346)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E("init");t[n(375)](r+n(387))&&o[n(375)](r+n(380))?E():r("0")}))()}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();F(void 0,(function(){const n=R;let t;try{t=Function(n(369)+'{}.constructor("return this")( ));')()}catch(e){t=window}const o=t[n(360)]=t.console||{},r=[n(371),n(353),n(350),n(352),n(358),n(349),n(356)];for(let a=0;a<r[n(345)];a++){const t=F.constructor[n(372)][n(368)](F),e=r[a],s=o[e]||t;t[n(377)]=F.bind(F),t[n(365)]=s[n(365)][n(368)](s),o[e]=t}}))();const U=c({__name:N(359),setup(t){const o=N,r=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(357),windowSize:!0,toneMapping:n[o(373)],toneMappingExposure:.8};return(n,t)=>{const a=o,i=h("TresCanvas");return m(),w(i,d(x(e)),{default:b((()=>[t[0]||(t[0]=g(a(378),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(y(s),d(x(r)),null,16),t[1]||(t[1]=g(a(379),{intensity:2},null,-1)),(m(),w(C,null,{default:b((()=>[I(A)])),_:1}))])),_:1},16)}}});function E(n){function t(n){const o=R;if(typeof n===o(381))return function(n){}[o(351)](o(367)).apply(o(362));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(o(364)+o(370)).call("action"):function(){return!1}.constructor("debu"+o(370)).apply(o(366)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{U as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as w,ca as S,cb as M,K as R,h as E,b as A,e as T,_ as D,l as P,a_ as z,V as O,bp as C,z as B,aj as k,B as F,c as j,aK as N,g as U,M as L,ar as H,a9 as Z,U as G,a as W}from"./three.sQDbNBks1741583630766.js";import{m as V,l as $,e as q}from"./@tresjs.ZmhvXhx31741583630766.js";import{R as Y}from"./three-stdlib.apjMrEFM1741583630766.js";import{y as K,b as X,w as J,a as Q,u as nn,d as tn,W as en,a3 as rn,a0 as on,o as an,H as cn,J as sn,M as un,a7 as ln,a2 as fn,q as pn,f as dn,N as hn,a8 as vn,r as mn,B as gn,v as _n,s as yn,F as xn,a6 as In,m as bn}from"./@vue.NRI7TcgI1741583630766.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.tHVKIvRt1741583630766.js";import{h as Rn}from"./object-hash.0KhWAYO_1741583630766.js";var En=Dn;!function(n,t){for(var e=Dn,r=Cn();;)try{if(838674===-parseInt(e(408))/1*(parseInt(e(402))/2)+parseInt(e(401))/3+parseInt(e(399))/4*(-parseInt(e(388))/5)+parseInt(e(374))/6+-parseInt(e(416))/7*(parseInt(e(419))/8)+-parseInt(e(387))/9*(parseInt(e(418))/10)+parseInt(e(383))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(415)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=Dn,t=new RegExp(n(394)),e=new RegExp(n(400),"i"),r=On(n(379));t[n(405)](r+n(404))&&e.test(r+n(412))?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(415)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){var e=Cn();return(Dn=function(n,t){return e[n-=373]})(n,t)}Tn(void 0,(function(){var n,t=Dn;try{n=Function("return (function() "+t(396)+");")()}catch(s){n=window}for(var e=n[t(409)]=n[t(409)]||{},r=[t(381),"warn",t(385),t(413),t(395),t(392),t(398)],o=0;o<r[t(382)];o++){var i=Tn.constructor.prototype[t(376)](Tn),a=r[o],c=e[a]||i;i[t(373)]=Tn[t(376)](Tn),i.toString=c[t(397)][t(376)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=Dn;super(),this[n(384)]=null,this[n(384)]=new u}[En(375)](...n){var t=En;return this.virtualScene[t(375)](...n),this}[En(386)](){var n=En;this[n(384)][n(390)]((t=>{var e=n;t instanceof l&&(t[e(391)][e(411)](),t[e(380)].dispose(),t[e(380)][e(389)]&&t[e(380)][e(389)][e(411)](),this.virtualScene[e(407)](t))})),this.virtualScene=null}}const zn=Pn;function On(n){function t(n){var e=Dn;if("string"==typeof n)return function(n){}[e(403)](e(406)).apply(e(410));1!==(""+n/n)[e(382)]||n%20==0?function(){return!0}[e(403)]("debu"+e(378))[e(417)](e(377)):function(){return!1}[e(403)](e(414)+e(378))[e(415)](e(393)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Cn(){var n=["15784uneUOy","__proto__","4244772MmfCXl","add","bind","action","gger","init","material","log","length","19351354crxSnP","virtualScene","info","destructor","1539JNwjqm","155avuZTd","map","traverse","geometry","table","stateObject","function *\\( *\\)","exception",'{}.constructor("return this")( )',"toString","trace","61752BMmESq","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","44286UiRuDH","4486ztxqUF","constructor","chain","test","while (true) {}","remove","55PHhKBg","console","counter","dispose","input","error","debu","apply","308iVUday","call","55790kjoFoP"];return(Cn=function(){return n})()}const Bn=kn;function kn(n,t){const e=Nn();return(kn=function(n,t){return e[n-=409]})(n,t)}!function(n,t){const e=kn,r=Nn();for(;;)try{if(919998===-parseInt(e(435))/1*(-parseInt(e(422))/2)+parseInt(e(443))/3*(parseInt(e(425))/4)+parseInt(e(416))/5*(-parseInt(e(414))/6)+parseInt(e(440))/7*(-parseInt(e(410))/8)+-parseInt(e(454))/9*(-parseInt(e(447))/10)+parseInt(e(449))/11*(parseInt(e(433))/12)+-parseInt(e(419))/13*(-parseInt(e(428))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fn(this,(function(){const n=kn,t=new RegExp(n(450)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ln("init");t[n(424)](r+n(417))&&e[n(424)](r+n(441))?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(){const n=["city/canary_wharf_1k.hdr","824mbVoKD","indoor/abandoned_games_room_02_1k.hdr","venice/venice_sunset_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","6mFizCO","exception","4838735unVEXu","chain","constructor","4723771DSuxAY","prototype","length","40ZvGQCV","toString","test","20wZqaYR","log","string","14dXNORj","outdoor/snowy_forest_path_01_1k.hdr","table",'{}.constructor("return this")( )',"gger","12NBvqZX","return (function() ","60038gTfYwo","counter","indoor/small_hangar_01_1k.hdr","trace","apply","115535wryCSe","input","outdoor/satara_night_1k.hdr","245958QwkIDZ","debu","__proto__","bind","1787980bpNcjN","error","7916843BSvaWN","function *\\( *\\)","city/shanghai_bund_1k.hdr","while (true) {}","stateObject","45lxzPey","city/modern_buildings_2_1k.hdr","kiara/kiara_1_dawn_1k.hdr","warn","console","call"];return(Nn=function(){return n})()}jn(void 0,(function(){const n=kn;let t;try{t=Function(n(434)+n(431)+");")()}catch(o){t=window}const e=t[n(458)]=t[n(458)]||{},r=[n(426),n(457),"info",n(448),n(415),n(430),n(438)];for(let i=0;i<r[n(421)];i++){const t=jn[n(418)][n(420)][n(446)](jn),o=r[i],a=e[o]||t;t[n(445)]=jn[n(446)](jn),t[n(423)]=a[n(423)][n(446)](a),e[o]=t}}))();const Un={sunset:Bn(412),studio:"studio/poly_haven_studio_1k.hdr",city:Bn(409),umbrellas:Bn(413),night:Bn(442),forest:"outood/mossy_forest_1k.hdr",snow:Bn(429),dawn:Bn(456),hangar:Bn(437),urban:Bn(411),modern:Bn(455),shangai:Bn(451)};function Ln(n){function t(n){const e=kn;if(typeof n===e(427))return function(n){}[e(418)](e(452)).apply(e(436));1!==(""+n/n)[e(421)]||n%20==0?function(){return!0}[e(418)](e(444)+e(432))[e(459)]("action"):function(){return!1}[e(418)](e(444)+"gger")[e(439)](e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Wn;!function(n,t){const e=Wn,r=Vn();for(;;)try{if(260067===parseInt(e(460))/1*(parseInt(e(433))/2)+-parseInt(e(438))/3*(parseInt(e(434))/4)+-parseInt(e(422))/5+parseInt(e(418))/6+parseInt(e(424))/7+parseInt(e(427))/8+parseInt(e(435))/9*(parseInt(e(431))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(459)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Wn,t=new RegExp(n(432)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qn(n(451));t[n(455)](r+n(450))&&e.test(r+n(416))?qn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(459)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Vn();return(Wn=function(n,t){return e[n-=415]})(n,t)}function Vn(){const n=["mapping","call","test","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","keys","bind","apply","29jOGnIg","Failed to load environment map: ","while (true) {}","input","table","2574dcyYZb","warn","gger","exception","1686780qYIGKk","value","620193SSOWdQ","string","environment","2432168KujOdG","length",'{}.constructor("return this")( )',"log","30rtZhPB","function *\\( *\\)","18334SWEsaT","412rtAare","454914OZijKc","Preset must be one of: ","setPath","6207TmIJrZ","prototype","return (function() ","console","join","stateObject","debu","toString","info","action","constructor","counter","chain","init","isArray"];return(Vn=function(){return n})()}Gn(void 0,(function(){const n=Wn,t=function(){const n=Wn;let t;try{t=Function(n(440)+n(429)+");")()}catch(e){t=window}return t}(),e=t[n(441)]=t.console||{},r=[n(430),n(419),n(446),"error",n(421),n(417),"trace"];for(let o=0;o<r[n(428)];o++){const t=Gn.constructor[n(439)][n(458)](Gn),i=r[o],a=e[i]||t;t.__proto__=Gn[n(458)](Gn),t[n(445)]=a.toString[n(458)](a),e[i]=t}}))();const $n=Hn(456);function qn(n){function t(n){const e=Wn;if(typeof n===e(425))return function(n){}[e(448)](e(415))[e(459)](e(449));1!==(""+n/n)[e(428)]||n%20==0?function(){return!0}[e(448)](e(444)+e(420))[e(454)](e(447)):function(){return!1}[e(448)](e(444)+e(420))[e(459)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Yn(n,t){const e=Xn();return(Yn=function(n,t){return e[n-=489]})(n,t)}!function(n,t){const e=Yn,r=Xn();for(;;)try{if(314804===parseInt(e(510))/1*(parseInt(e(514))/2)+parseInt(e(506))/3*(parseInt(e(502))/4)+-parseInt(e(517))/5*(-parseInt(e(532))/6)+-parseInt(e(493))/7*(parseInt(e(534))/8)+-parseInt(e(524))/9*(parseInt(e(528))/10)+-parseInt(e(513))/11+-parseInt(e(515))/12*(-parseInt(e(539))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(511)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(){const n=["22LCAtvq","36aKflWS","texture","13345UKophi","symbol","generateMipmaps","dispose","value","default","console","9CxhzOi","envSence","resolution","constructor","5621530zJTsXq","type","background","gger","408mAdskx","far","8XfBwJB","error","test","update","input","3216707BnRemx","__proto__",'{}.constructor("return this")( )',"debu","while (true) {}","frames","chain","near","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","2485273CrZrHN","useDefaultScene","info","string","isArray","call","toString","warn","bind","44KhBOYm","environment","stateObject","return (function() ","30858mlRLON","length","table","TresEnvSence","41815sNDHfr","apply","$slots","2914164hFvcwM"];return(Xn=function(){return n})()}!function(){Kn(this,(function(){const n=Yn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(491),"i"),r=nt(n(492));t[n(536)](r+n(489))&&e[n(536)](r+n(538))?nt():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(511)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jn(void 0,(function(){const n=Yn,t=function(){const n=Yn;let t;try{t=Function(n(505)+n(541)+");")()}catch(e){t=window}return t}(),e=t[n(523)]=t[n(523)]||{},r=["log",n(500),n(495),n(535),"exception",n(508),"trace"];for(let o=0;o<r[n(507)];o++){const t=Jn[n(527)].prototype.bind(Jn),i=r[o],a=e[i]||t;t[n(540)]=Jn[n(501)](Jn),t[n(499)]=a[n(499)].bind(a),e[i]=t}}))();const Qn=tn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=X(null),x=null;const I=X(null);en((()=>{var n,t;const e=Yn;null==(n=I[e(521)])||n.destructor(),null==(t=y[e(521)])||t[e(520)]()}));const{onBeforeLoop:b}=q();let w=1;b((()=>{const n=Yn;x&&I[n(521)]&&y.value&&(i.frames===1/0||w<i[n(544)])&&(i[n(494)]?x[n(537)](s.value,u[n(521)]):x[n(537)](s[n(521)],ln(I[n(521)].virtualScene)),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=K(n);J(n,(()=>{o()}));const l=X(null),h=Q((()=>Array[e(452)](c.value))),v=Q((()=>h.value?f:Y));return J([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i.value)){try{l[r(423)]=await $(v.value,h[r(423)]?[...nn(n)]:nn(n),(n=>{t&&n[r(437)](nn(t))}))}catch(o){throw new Error(r(461)+o)}l[r(423)]&&(l.value[r(453)]=h[r(423)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r.value&&n&&(r[t(423)][t(426)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(423)])?t[i(423)].texture:o,a=r[i(423)].background;!(null==a?void 0:a.isColor)&&(a=void 0),r.value.background=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(423)]),(n=>{const t=e;r[t(423)]&&n&&(r[t(423)].backgroundBlurriness=n)}),{immediate:!0}),J((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Un){const e=$n,i=Un[n];try{l.value=await $(Y,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(461)+r)}l[t(423)]&&l.value&&(l[t(423)][t(453)]=d),o()}else if(n&&!(n in Un))throw new Error(t(436)+Object[t(457)](Un)[t(442)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(521)][t(503)]=n[t(516)],i[t(530)]&&(u[t(521)][t(530)]=n[t(516)])):(u[t(521)].environment=S[t(521)],i.background&&(u[t(521)][t(530)]=S.value))};J(S,(n=>{const t=Yn;y[t(521)]&&M(y[t(521)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Yn;null==(n=y[t(521)])||n[t(520)](),y.value=new v(i[t(526)]),x=new m(i[t(490)],i[t(533)],y.value),i.useDefaultScene?(y[t(521)][t(516)].type=g,y[t(521)][t(516)][t(519)]=!1,y[t(521)][t(516)].minFilter=_,y[t(521)][t(516)].magFilter=_):y[t(521)][t(516)].type=h,M(y[t(521)])};return J((()=>on()[e(522)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(521)][o(516)].type!==h)&&(l=n(),Array[o(497)](l)&&l[o(507)]>0&&typeof(null==(t=l[0])?void 0:t[o(529)])!==o(518))?R():(null==(r=y[o(521)])||r.dispose(),y[o(521)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,J((()=>i[e(494)]),(n=>{y[e(521)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(509),{key:0,ref_key:r(525),ref:I},[sn(n[r(512)],r(522))],512)):un("",!0)}}});function nt(n){function t(n){const e=Yn;if(typeof n===e(496))return function(n){}[e(527)](e(543)).apply("counter");1!==(""+n/n)[e(507)]||n%20==0?function(){return!0}.constructor(e(542)+e(531))[e(498)]("action"):function(){return!1}[e(527)](e(542)+e(531))[e(511)](e(504)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=it;function et(){const n=["bind","action","info","1265535OSfVUV",'{}.constructor("return this")( )',"4745610PrODQB","set","while (true) {}","4lQFQRO","material","3686641DWrFqt","apply","test","multiplyScalar","intensity","toString","stateObject","exception","index","call","1754792deqCcM","input","color","6309264utNgvD","counter","return (function() ","TresPlaneGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","gger","from","trace","debu","22468192usBxZn","prototype","2970579EouAYx","rect","TresRingGeometry","ring","circle","string","function *\\( *\\)","TresMesh","value","log","needsUpdate","error","chain","toneMapped"];return(et=function(){return n})()}!function(n,t){const e=it,r=et();for(;;)try{if(732467===parseInt(e(540))/1+-parseInt(e(508))/2+parseInt(e(523))/3*(-parseInt(e(496))/4)+-parseInt(e(493))/5+-parseInt(e(511))/6+parseInt(e(498))/7+parseInt(e(521))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(499)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=it,t=new RegExp(n(529)),e=new RegExp(n(515),"i"),r=ft("init");t.test(r+n(535))&&e[n(500)](r+n(509))?ft():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(499)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function it(n,t){const e=et();return(it=function(n,t){return e[n-=492]})(n,t)}ot(void 0,(function(){const n=it;let t;try{t=Function(n(513)+n(492)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(532),"warn",n(539),n(534),n(505),"table",n(519)];for(let i=0;i<r.length;i++){const t=ot[n(516)][n(522)][n(537)](ot),o=r[i],a=e[o]||t;t.__proto__=ot[n(537)](ot),t[n(503)]=a[n(503)][n(537)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=["toneMapped","map","side","color"],lt=tn({__name:tt(506),props:{args:{default:null},from:{default:tt(524)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=X();return fn((()=>{const n=it;e.value&&(e[n(531)][n(510)][n(501)](t[n(502)]),e[n(531)][n(533)]=!0)})),J((()=>t.color),(n=>{const r=it;e[r(531)]&&(e[r(531)][r(510)][r(494)](n),e[r(531)][r(510)][r(501)](t[r(502)]),e[r(531)].needsUpdate=!0)})),pn((()=>{})),(n,r)=>{const o=it;return an(),cn(o(530),null,[t[o(518)]===o(527)?(an(),cn(o(525),at)):t[o(518)]===o(526)?(an(),cn(o(525),ct)):t[o(518)]===o(524)?(an(),cn(o(514),st)):(an(),dn(t.from,{key:3,args:t})),hn("TresMeshBasicMaterial",{ref_key:o(497),ref:e,toneMapped:n[o(536)],map:n.map,side:nn(x),color:n[o(510)]},null,8,ut)])}}});function ft(n){function t(n){const e=it;if(typeof n===e(528))return function(n){}[e(516)](e(495))[e(499)](e(512));1!==(""+n/n).length||n%20==0?function(){return!0}[e(516)](e(520)+e(517))[e(507)](e(538)):function(){return!1}[e(516)](e(520)+e(517))[e(499)](e(504)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=ht();for(;;)try{if(805633===parseInt(e(382))/1+parseInt(e(387))/2+parseInt(e(376))/3+parseInt(e(371))/4*(-parseInt(e(389))/5)+-parseInt(e(368))/6*(-parseInt(e(366))/7)+parseInt(e(386))/8*(-parseInt(e(391))/9)+parseInt(e(380))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(363)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=vt,t=new RegExp(n(356)),e=new RegExp(n(357),"i"),r=gt(n(358));t[n(365)](r+n(375))&&e.test(r+n(390))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(363)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["return (function() ","gger","height","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","action","width","dispose","table","apply","constructor","test","59017cYovPC","debu","762yuZueb","warn","toString","4wWTQcY",'{}.constructor("return this")( )',"counter","bind","chain","3552588eltzqH","prototype","log","call","1481040QBUWKo","type","694438pzJrwA","setRenderTarget","depthTexture","stateObject","24HdvNMO","883026DeMEoB","while (true) {}","7470785wPHtvD","input","3717594mjBvwq","value","clear","length","exception","info"];return(ht=function(){return n})()}function vt(n,t){const e=ht();return(vt=function(n,t){return e[n-=354]})(n,t)}function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=vt;null==(n=t.value)||n[a(361)](),t[a(392)]=new I((null==r?void 0:r[a(392)])||p[a(360)][a(392)],(null==e?void 0:e.value)||p[a(355)][a(392)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(392)])),(null==i?void 0:i[a(392)])&&(t.value[a(384)]=new w((null==r?void 0:r[a(392)])||p[a(360)].value,(null==e?void 0:e[a(392)])||p.height[a(392)]),t[a(392)][a(384)].format=S,t[a(392)].depthTexture[a(381)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(392)])&&(l[n(392)].setRenderTarget(ln(t.value)),l[n(392)][n(393)](),l[n(392)].render(ln(f[n(392)]),ln(u.value)),l.value[n(383)](null))})),gn((()=>{var n;const e=vt;null==(n=t[e(392)])||n[e(361)]()})),t}function gt(n){function t(n){const e=vt;if("string"==typeof n)return function(n){}[e(364)](e(388))[e(363)](e(373));1!==(""+n/n)[e(394)]||n%20==0?function(){return!0}[e(364)](e(367)+e(354))[e(379)](e(359)):function(){return!1}[e(364)](e(367)+e(354))[e(363)](e(385)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(397)+n(372)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(378),n(369),n(396),"error",n(395),n(362),"trace"];for(let o=0;o<r[n(394)];o++){const t=dt[n(364)][n(377)][n(374)](dt),i=r[o],a=e[i]||t;t.__proto__=dt[n(374)](dt),t.toString=a[n(370)].bind(a),e[i]=t}}))();const _t=bt;!function(n,t){const e=bt,r=wt();for(;;)try{if(862496===parseInt(e(300))/1+parseInt(e(340))/2*(-parseInt(e(313))/3)+parseInt(e(330))/4+parseInt(e(294))/5+parseInt(e(339))/6+parseInt(e(316))/7*(parseInt(e(293))/8)+-parseInt(e(298))/9*(parseInt(e(306))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=bt,t=new RegExp(n(322)),e=new RegExp(n(312),"i"),r=Mt(n(292));t[n(310)](r+n(291))&&e[n(310)](r+n(317))?Mt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function("return (function() "+n(337)+");")()}catch(e){t=window}return t}(),e=t[n(331)]=t.console||{},r=[n(295),n(342),"info","error",n(309),n(307),n(301)];for(let o=0;o<r.length;o++){const t=xt[n(303)][n(344)][n(311)](xt),i=r[o],a=e[i]||t;t[n(323)]=xt[n(311)](xt),t.toString=a.toString[n(311)](a),e[i]=t}}))();const It=[_t(325),"side"];function bt(n,t){const e=wt();return(bt=function(n,t){return e[n-=290]})(n,t)}function wt(){const n=["string","8311373paCwTn","input","counter","side","isMesh","while (true) {}","function *\\( *\\)","__proto__","backsideThickness","buffer","render","apply","value","MeshTransmissionMaterialClass","5559424XVlzSh","console","setRenderTarget","toneMapping","texture","gger","fboResolution",'{}.constructor("return this")( )',"background","7304454wZuoJL","611788nAANJZ","action","warn","thickness","prototype","call","length","chain","init","8lLQCsP","3072120rtnVyt","log","time","envMapIntensity","9198ibBucK","backside","25916qKmsgf","trace","uuid","constructor","material","index","19990nLmtNt","table","traverse","exception","test","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","15rMLouj","debu"];return(wt=function(){return n})()}const St=tn({__name:_t(305),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=q(),p=mt({width:u[e(336)],height:u[e(336)],isLoop:!1}),d=mt({width:u[e(336)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(328)]=function(n,t){const e=bt;let r;return n[e(308)]((n=>{const o=e;n[o(320)]&&n[o(304)]&&n.material[o(302)]===t&&(r=n)})),r}(i.value,r[n(328)][n(302)])})),f((({elapsed:n})=>{const t=e;r[t(328)][t(296)]=n,r[t(328)][t(325)]===d[t(328)].texture&&s[t(328)]&&(m=a[t(328)][t(333)],h=i[t(328)][t(338)],v=r[t(328)].envMapIntensity,g=s.value[t(304)][t(319)],s.value[t(304)]=l,u[t(299)]&&(a[t(328)].setRenderTarget(p[t(328)]),a.value[t(326)](i[t(328)],c.value),s.value.material=r[t(328)],s[t(328)].material[t(343)]=u[t(324)],s[t(328)][t(304)][t(325)]=p[t(328)][t(334)],s[t(328)][t(304)].side=R,s[t(328)][t(304)][t(297)]=0),a.value[t(332)](d[t(328)]),a[t(328)][t(326)](i[t(328)],c.value),s.value[t(304)][t(325)]=d[t(328)][t(334)],s.value[t(304)]=r[t(328)],s[t(328)][t(304)][t(343)]=u.thickness,s[t(328)][t(304)][t(319)]=g,s[t(328)].material[t(297)]=v,i.value[t(338)]=h,a[t(328)].setRenderTarget(null),a[t(328)][t(333)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn("TresMeshTransmissionMaterial",{ref_key:o(329),ref:r,buffer:nn(d)[o(334)],side:nn(x)},null,8,It)}}});function Mt(n){function t(n){const e=bt;if(typeof n===e(315))return function(n){}.constructor(e(321))[e(327)](e(318));1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}[e(303)]("debu"+e(335))[e(345)](e(341)):function(){return!1}[e(303)](e(314)+e(335))[e(327)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Tt,r=Et();for(;;)try{if(799176===parseInt(e(398))/1*(parseInt(e(381))/2)+-parseInt(e(395))/3+parseInt(e(387))/4+-parseInt(e(417))/5*(parseInt(e(397))/6)+-parseInt(e(391))/7+parseInt(e(421))/8+parseInt(e(405))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(){const n=["precise","trace","position","apply","right","identity","debu","outer","test","front","41304oeIOPN","min",'{}.constructor("return this")( )',"return (function() ","default","counter","2746788sgSgHY","table","gref","left","2645657mmWVit","value","top","bottom","4617858wMkdZa","set","4677954pXcfRm","72nvTJXA","__proto__","max","bind","matrixWorld","function *\\( *\\)","disable","7073451xoFOYM","string","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","disableX","log","$slots","stateObject","TresGroup","back","setFromObject","5cwKKMQ","console","toString","inner","4291936HFUAUe","constructor","info","gger","chain","disableZ","getBoundingSphere"];return(Et=function(){return n})()}!function(){Rt(this,(function(){const n=Tt,t=new RegExp(n(403)),e=new RegExp(n(408),"i"),r=Pt("init");t[n(379)](r+n(425))&&e[n(379)](r+"input")?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=Et();return(Tt=function(n,t){return e[n-=377]})(n,t)}At(void 0,(function(){const n=Tt,t=function(){const n=Tt;let t;try{t=Function(n(384)+n(383)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(418)]||{},r=[n(411),"warn",n(423),"error","exception",n(388),n(429)];for(let o=0;o<r.length;o++){const t=At[n(422)].prototype[n(401)](At),i=r[o],a=e[i]||t;t[n(399)]=At[n(401)](At),t[n(419)]=a[n(419)].bind(a),e[i]=t}}))();const Dt=tn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=Tt;if(!r[n(392)])return;if(!o[n(392)])return;r[n(392)][n(402)][n(433)]();const e=(new E)[n(416)](o[n(392)],t[n(428)]),i=new A,a=new T,c=e.max.x-e[n(382)].x,s=e.max.y-e[n(382)].y,u=e[n(400)].z-e[n(382)].z;e.getCenter(i),e[n(427)](a);const l=t[n(393)]?s/2:t[n(394)]?-s/2:0,f=t[n(390)]?-c/2:t[n(432)]?c/2:0,p=t[n(380)]?u/2:t[n(415)]?-u/2:0;r.value[n(430)][n(396)](t.disable||t[n(410)]?0:-i.x+f,t.disable||t.disableY?0:-i.y+l,t[n(404)]||t[n(426)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return an(),cn(i(414),{ref_key:i(389),ref:e},[hn(i(414),{ref_key:i(378),ref:r},[hn(i(414),{ref_key:i(420),ref:o},[sn(n[i(412)],i(385))],512)],512)],512)}}});function Pt(n){function t(n){const e=Tt;if(typeof n===e(406))return function(n){}.constructor(e(409))[e(431)](e(386));1!==(""+n/n).length||n%20==0?function(){return!0}[e(422)]("debu"+e(424)).call(e(407)):function(){return!1}.constructor(e(377)+e(424))[e(431)](e(413)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=Bt;!function(n,t){const e=Bt,r=Ct();for(;;)try{if(671770===-parseInt(e(486))/1+-parseInt(e(475))/2*(parseInt(e(437))/3)+parseInt(e(476))/4*(parseInt(e(439))/5)+-parseInt(e(456))/6+parseInt(e(469))/7*(parseInt(e(481))/8)+parseInt(e(436))/9+parseInt(e(444))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(483)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(){const n=["action","test","backside","while (true) {}","3009290Nqtuux","intensity","counter","color","input","update","object","ior","exception","scene","string","$slots","1333170TiDDyp","#ffffff","index","set","log","worldRadius","causticsOnly","backsideIOR","error","warn","__proto__","init","call","180061xPyuLA","bind","function *\\( *\\)","params","constructor","gger","582QPCrkd","4PzIvqX","helper","console","add","primitive","32HlcOGo","lightSource","apply","table","default","544309BIBLrL","toString","trace","group","Vector3","2010924BsKErV","5232rkmMSL",'{}.constructor("return this")( )',"6592605onrtdA"];return(Ct=function(){return n})()}function Bt(n,t){const e=Ct();return(Bt=function(n,t){return e[n-=432]})(n,t)}!function(){Ot(this,(function(){const n=Bt,t=new RegExp(n(471)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ut(n(467));t[n(441)](r+"chain")&&e[n(441)](r+n(448))?Ut():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(483)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Bt;let t;try{t=Function("return (function() "+n(438)+");")()}catch(o){t=window}const e=t[n(478)]=t.console||{},r=[n(460),n(465),"info",n(464),n(452),n(484),n(433)];for(let i=0;i<r.length;i++){const t=kt[n(473)].prototype.bind(kt),o=r[i],a=e[o]||t;t[n(466)]=kt[n(470)](kt),t[n(432)]=a.toString.bind(a),e[o]=t}}))();const Ft=[zt(450)],jt=[zt(450)],Nt=tn({__name:zt(458),props:{color:{default:zt(457)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=V(),o=Mn(r.value,{frames:1/0,resolution:e.resolution,worldRadius:e.worldRadius});o[t(472)][t(442)]=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o[e(453)][e(479)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(449)]()})),fn((()=>{const n=t;e[n(447)]&&o.params[n(447)][n(459)](e[n(447)]),e[n(451)]&&(o[n(472)][n(451)]=e[n(451)]),e[n(463)]&&(o[n(472)][n(463)]=e[n(463)]),e.far&&(o.params.far=e.far),e.worldRadius&&(o[n(472)][n(461)]=e[n(461)]),e.intensity&&(o[n(472)][n(445)]=e[n(445)])})),J((()=>e[t(462)]),(n=>{const e=t;o[e(472)][e(462)]=n})),J((()=>e.lightSource),(n=>{const e=t;n&&o.params[e(482)]instanceof D[e(435)]&&o[e(472)][e(482)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn("TresGroup",{ref_key:"group",ref:i},[sn(n[r(455)],r(485))],512),hn(r(480),{object:nn(o)[r(434)],position:[0,.003,0]},null,8,Ft),hn(r(480),{object:nn(o)[r(477)],visible:!1},null,8,jt)],64)}}});function Ut(n){function t(n){const e=Bt;if(typeof n===e(454))return function(n){}[e(473)](e(443))[e(483)](e(446));1!==(""+n/n).length||n%20==0?function(){return!0}[e(473)]("debu"+e(474))[e(468)](e(440)):function(){return!1}[e(473)]("debu"+e(474))[e(483)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(583020===-parseInt(e(253))/1+parseInt(e(273))/2+-parseInt(e(272))/3*(-parseInt(e(267))/4)+parseInt(e(264))/5+-parseInt(e(234))/6*(-parseInt(e(251))/7)+-parseInt(e(238))/8*(-parseInt(e(257))/9)+-parseInt(e(254))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(243)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=227]})(n,t)}!function(){Lt(this,(function(){const n=Ht,t=new RegExp(n(241)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Vt(n(259));t[n(271)](r+"chain")&&e[n(271)](r+n(255))?Vt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["trace","toString","2216dIUbFS","ShaderChunk","#ifdef USE_SHADOWMAP","function *\\( *\\)","; i++) {\n        vogelSample = vogelDiskSample(j, ","apply","constructor","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","isArray",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","forEach","while (true) {}","bind","119dMxDnm","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","579423LlmIrZ","20671060JIjnGX","input","dispose","33174WygQSG","console","init",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","table","#if defined( SHADOWMAP_TYPE_PCF )","info","3165935dZVsUm","__proto__","gger","54296qHQgvt","call","replace","action","test","45IVofiz","1232738VDFaDD",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","error","debu","exception","programs","material","traverse","remove","compile","properties","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","length","; i ++) {\n        offset = (vogelDiskSample(j, ","warn","266598CMKEGN","shadowmap_pars_fragment"];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Ht,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(258)]=t[n(258)]||{},r=["log",n(233),"info",n(275),n(277),n(261),n(236)];for(let o=0;o<r[n(231)];o++){const t=Zt[n(244)].prototype.bind(Zt),i=r[o],a=e[i]||t;t[n(265)]=Zt[n(250)](Zt),t[n(237)]=a[n(237)].bind(a),e[i]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=D[r(239)][r(235)];return D[r(239)][r(235)]=D[r(239)][r(235)][r(269)](r(240),r(230)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(260)+e+r(232)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(242)+e+r(274)+t+r(252)+e+r(247))[r(269)](r(262),r(245)),(n,t,e)=>{const i=r;D[i(239)][i(235)]=o,function(n,t,e){const r=Ht;t[r(280)]((t=>{const e=r;t[e(279)]&&(Array[e(246)](t.material)?t[e(279)][e(248)]((t=>{const r=e;n[r(229)][r(227)](t),t[r(256)]()})):(n[e(229)][e(227)](t[e(279)]),t[e(279)][e(256)]()))})),n[r(263)][r(278)][r(231)]=0,n[r(228)](t,e)}(n,t,e)}};function Vt(n){function t(n){const e=Ht;if("string"==typeof n)return function(n){}[e(244)](e(249))[e(243)]("counter");1!==(""+n/n)[e(231)]||n%20==0?function(){return!0}[e(244)](e(276)+e(266))[e(268)](e(270)):function(){return!1}[e(244)](e(276)+e(266))[e(243)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $t=Xt;function qt(){const n=["init","585732bXDjGk","function *\\( *\\)","value","dispose","bind","__proto__","console","527752JjucxG","gger","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","14870ErRpZf","constructor","5039010apuJix","exception","input","length",'{}.constructor("return this")( )',"debu","test","45FEtRym","29670jhYsBr","call","toString","chain","2520505VMjUYA","string","prototype","stateObject","18uduEfb","index","952084OiKZqS","apply","336AWdAKc","while (true) {}","info"];return(qt=function(){return n})()}!function(n,t){const e=Xt,r=qt();for(;;)try{if(390398===parseInt(e(464))/1*(-parseInt(e(444))/2)+parseInt(e(452))/3+-parseInt(e(446))/4+-parseInt(e(440))/5+-parseInt(e(436))/6*(-parseInt(e(448))/7)+-parseInt(e(459))/8*(-parseInt(e(435))/9)+parseInt(e(466))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Xt,t=new RegExp(n(453)),e=new RegExp(n(462),"i"),r=Qt(n(451));t.test(r+n(439))&&e[n(434)](r+n(430))?Qt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(n,t){const e=qt();return(Xt=function(n,t){return e[n-=429]})(n,t)}Kt(void 0,(function(){const n=Xt;let t;try{t=Function("return (function() "+n(432)+");")()}catch(o){t=window}const e=t[n(458)]=t.console||{},r=[n(461),"warn",n(450),"error",n(429),"table",n(463)];for(let i=0;i<r[n(431)];i++){const t=Kt[n(465)][n(442)][n(456)](Kt),o=r[i],a=e[o]||t;t[n(457)]=Kt[n(456)](Kt),t[n(438)]=a.toString.bind(a),e[o]=t}}))();const Jt=tn({__name:$t(445),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(454)],e[t(454)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(454)].traverse((n=>{const e=t;n instanceof l&&n.material[e(455)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=Xt;if(typeof n===e(441))return function(n){}[e(465)](e(449)).apply("counter");1!==(""+n/n)[e(431)]||n%20==0?function(){return!0}[e(465)](e(433)+e(460))[e(437)]("action"):function(){return!1}[e(465)](e(433)+"gger")[e(447)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=te;function te(n,t){const e=re();return(te=function(n,t){return e[n-=242]})(n,t)}!function(n,t){const e=te,r=re();for(;;)try{if(595431===-parseInt(e(268))/1*(parseInt(e(273))/2)+parseInt(e(248))/3*(-parseInt(e(289))/4)+parseInt(e(275))/5*(-parseInt(e(277))/6)+parseInt(e(282))/7*(parseInt(e(258))/8)+parseInt(e(285))/9+parseInt(e(244))/10*(parseInt(e(280))/11)+parseInt(e(291))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(288)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(){const n=["test","copy","multiplyScalar","33HPRFUb","counter","error","while (true) {}","log","stateObject","debu","function *\\( *\\)","resolution","chain","520VwZkBO","constructor","length","input","uniforms","set","kernel","setTexelSize","string","replace","817339RlQzOW","prototype","action","gger","value","2hrAGsS","exception","202665ksnAJo","console","90bVDsvZ","table","call","904607cGrrOV","bind","63938VWnWrP",">\n        }","info","187110eREmwG","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","281156KflktM","halfTexelSize","20232264cTLFHG","warn","toString","60KyoaIa"];return(re=function(){return n})()}!function(){ee(this,(function(){const n=te,t=new RegExp(n(255)),e=new RegExp(n(287),"i"),r=ce("init");t[n(245)](r+n(257))&&e[n(245)](r+n(261))?ce():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(288)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=te;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(276)]||{},r=[n(252),n(242),n(284),n(250),n(274),n(278),"trace"];for(let i=0;i<r.length;i++){const t=oe[n(259)][n(269)].bind(oe),o=r[i],a=e[o]||t;t[n(286)]=oe[n(281)](oe),t[n(243)]=a[n(243)].bind(a),e[o]=t}}))();const ie=parseInt(B[ne(267)](/\D+/g,""));class ae extends P{constructor(n=new O){const t=ne;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+(ie>=154?"colorspace_fragment":"encodings_fragment")+t(283),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(265)](n.x,n.y),this[t(264)]=new Float32Array([0,1,2,2,3])}[ne(265)](n,t){const e=ne;this[e(262)].texelSize.value[e(263)](n,t),this[e(262)][e(290)][e(272)].set(n,t)[e(247)](.5)}setResolution(n){const t=ne;this[t(262)][t(256)].value[t(246)](n)}}function ce(n){function t(n){const e=te;if(typeof n===e(266))return function(n){}[e(259)](e(251)).apply(e(249));1!==(""+n/n)[e(260)]||n%20==0?function(){return!0}.constructor(e(254)+e(271))[e(279)](e(270)):function(){return!1}[e(259)](e(254)+e(271))[e(288)](e(253)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function se(){const n=["11506781deFSrN","test","counter","maxDepthThreshold","bind","value","log","stateObject","exception","string","chain","depthToBlurRatioBias","prototype","4IIENuG","54878fySbdt","USE_DEPTH","return (function() ","frustumCulled","console","function *\\( *\\)","renderTargetA","295229nWXWxv","init","6139269pMBwKM","3700270igHOTa","screen","uniforms","camera","while (true) {}","clone","setTexelSize","8EtrquX","renderTargetB","convolutionMaterial","246NaOUmd","depthScale","render","inputBuffer","input","3112555NEWKdr","minDepthThreshold","trace","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setAttribute","add","action","107401WpsiRU","table","error","setRenderTarget","position","renderToScreen","6fPHpsY","length","kernel","constructor","apply","scene","texture","__proto__","depthTexture","warn","toString"];return(se=function(){return n})()}!function(n,t){const e=fe,r=se();for(;;)try{if(350562===parseInt(e(258))/1+-parseInt(e(251))/2*(-parseInt(e(226))/3)+-parseInt(e(250))/4*(parseInt(e(212))/5)+parseInt(e(207))/6*(parseInt(e(220))/7)+-parseInt(e(268))/8*(parseInt(e(260))/9)+-parseInt(e(261))/10+parseInt(e(237))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(230)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ue(this,(function(){const n=fe,t=new RegExp(n(256)),e=new RegExp(n(216),"i"),r=de(n(259));t[n(238)](r+n(247))&&e[n(238)](r+n(211))?de():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(230)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(n,t){const e=se();return(fe=function(n,t){return e[n-=206]})(n,t)}le(void 0,(function(){const n=fe,t=function(){const n=fe;let t;try{t=Function(n(253)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(255)]=t.console||{},r=[n(243),n(235),n(215),n(222),n(245),n(221),n(214)];for(let o=0;o<r[n(227)];o++){const t=le[n(229)][n(249)][n(241)](le),i=r[o],a=e[i]||t;t[n(233)]=le.bind(le),t[n(236)]=a[n(236)][n(241)](a),e[i]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this.renderToScreen=!1,this[c(257)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(269)]=this[c(257)][c(266)](),this[c(206)]=new ae,this.convolutionMaterial[c(267)](1/t,1/e),this[c(206)].setResolution(new O(t,e)),this.scene=new u,this.camera=new k,this.convolutionMaterial[c(263)][c(213)][c(242)]=r,this[c(206)][c(263)][c(240)][c(242)]=o,this[c(206)][c(263)][c(208)].value=i,this.convolutionMaterial[c(263)][c(248)][c(242)]=a,this[c(206)].defines[c(252)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new F;p[c(217)](c(224),new j(s,3)),p[c(217)]("uv",new j(f,2)),this[c(262)]=new l(p,this.convolutionMaterial),this[c(262)][c(254)]=!1,this.scene[c(218)](this[c(262)])}render(n,t,e){const r=fe,o=this[r(231)],i=this[r(264)],a=this[r(257)],c=this[r(269)],s=this[r(206)],u=s[r(263)];u.depthBuffer[r(242)]=t[r(234)];const l=s[r(228)];let f,p,d,h=t;for(p=0,d=l[r(227)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(242)]=l[p],u[r(210)].value=h[r(232)],n.setRenderTarget(f),n.render(o,i),h=f;u.kernel[r(242)]=l[p],u[r(210)][r(242)]=h[r(232)],n[r(223)](this[r(225)]?null:e),n[r(209)](o,i)}}function de(n){function t(n){const e=fe;if(typeof n===e(246))return function(n){}[e(229)](e(265))[e(230)](e(239));1!==(""+n/n)[e(227)]||n%20==0?function(){return!0}[e(229)]("debugger").call(e(219)):function(){return!1}[e(229)]("debugger")[e(230)](e(244)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var he=ge;function ve(){var n=["chain","2182329pERKPU","USE_UV","_distortion","depthToBlurRatioBias","5344rTaOiK","table","6wLiXul","937iHGTty","_mixBlur","while (true) {}","distortionMap","_tDiffuseBlur","counter","tDepth","function *\\( *\\)","mirror","_mirror","length","mixContrast","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","1169615AOlzHE","debu","_blurStrength","defines","1756902hvouQq","_tDepth","mixStrength","vertexShader","#include <emissivemap_fragment>","apply","hasBlur","minDepthThreshold","input","info","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","distortion","7738430GgbUdS","error","string","_hasBlur","console","maxDepthThreshold","depthScale","value","action","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","setValues","gger","tDiffuse","_minDepthThreshold","toString","mixBlur","warn","trace","textureMatrix","_tDiffuse","140444AzabAR","_distortionMap","_maxDepthThreshold","1532Joxjxp","_depthScale","fragmentShader","bind","_mixContrast","test","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_textureMatrix","tDiffuseBlur","_depthToBlurRatioBias","5328XuZySZ","uniforms"];return(ve=function(){return n})()}!function(n,t){for(var e=ge,r=ve();;)try{if(406136===-parseInt(e(532))/1*(parseInt(e(512))/2)+parseInt(e(525))/3+parseInt(e(509))/4+parseInt(e(546))/5*(parseInt(e(531))/6)+-parseInt(e(550))/7+parseInt(e(529))/8*(-parseInt(e(522))/9)+parseInt(e(489))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(555)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(n,t){var e=ve();return(ge=function(n,t){return e[n-=486]})(n,t)}!function(){me(this,(function(){var n=ge,t=new RegExp(n(539)),e=new RegExp(n(544),"i"),r=xe("init");t.test(r+n(524))&&e[n(517)](r+n(558))?xe():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(555)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){for(var n=ge,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(493)]=t[n(493)]||{},r=["log",n(505),n(486),n(490),"exception",n(530),n(506)],o=0;o<r[n(542)];o++){var i=_e[n(545)].prototype.bind(_e),a=r[o],c=e[a]||i;i.__proto__=_e[n(515)](_e),i[n(503)]=c.toString.bind(c),e[a]=i}}))();class ye extends N{constructor(n={}){var t=ge;super(n),this._tDepth={value:null},this[t(510)]={value:null},this[t(508)]={value:null},this[t(536)]={value:null},this[t(519)]={value:null},this[t(492)]={value:!1},this[t(541)]={value:0},this._mixBlur={value:0},this[t(548)]={value:.5},this[t(502)]={value:.9},this[t(511)]={value:1},this[t(513)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(527)]={value:1},this._mixContrast={value:1},this[t(499)](n)}onBeforeCompile(n){var t,e=ge;!(null==(t=n[e(549)])?void 0:t.USE_UV)&&(n[e(549)][e(526)]=""),n[e(523)][e(556)]=this._hasBlur,n.uniforms[e(501)]=this._tDiffuse,n[e(523)][e(538)]=this[e(551)],n[e(523)].distortionMap=this[e(510)],n[e(523)][e(520)]=this[e(536)],n[e(523)].textureMatrix=this[e(519)],n[e(523)][e(540)]=this._mirror,n[e(523)][e(504)]=this[e(533)],n[e(523)][e(552)]=this[e(548)],n.uniforms[e(557)]=this[e(502)],n[e(523)][e(494)]=this[e(511)],n.uniforms[e(495)]=this[e(513)],n.uniforms[e(528)]=this[e(521)],n[e(523)][e(488)]=this[e(527)],n.uniforms.mixContrast=this[e(516)],n[e(553)]=e(498)+n[e(553)],n[e(553)]=n[e(553)].replace("#include <project_vertex>",e(487)),n[e(514)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n.fragmentShader,n[e(514)]=n[e(514)].replace(e(554),e(518))}get[he(501)](){return this[he(508)].value}set[he(501)](n){var t=he;this[t(508)][t(496)]=n}get tDepth(){var n=he;return this[n(551)][n(496)]}set[he(538)](n){this[he(551)].value=n}get distortionMap(){var n=he;return this[n(510)][n(496)]}set[he(535)](n){var t=he;this[t(510)][t(496)]=n}get tDiffuseBlur(){var n=he;return this._tDiffuseBlur[n(496)]}set[he(520)](n){this[he(536)].value=n}get[he(507)](){return this._textureMatrix.value}set textureMatrix(n){var t=he;this[t(519)][t(496)]=n}get[he(556)](){var n=he;return this[n(492)][n(496)]}set[he(556)](n){var t=he;this._hasBlur[t(496)]=n}get[he(540)](){var n=he;return this[n(541)][n(496)]}set mirror(n){var t=he;this._mirror[t(496)]=n}get mixBlur(){return this[he(533)].value}set[he(504)](n){var t=he;this[t(533)][t(496)]=n}get mixStrength(){var n=he;return this[n(548)][n(496)]}set[he(552)](n){var t=he;this[t(548)][t(496)]=n}get[he(557)](){var n=he;return this[n(502)][n(496)]}set[he(557)](n){this[he(502)].value=n}get[he(494)](){var n=he;return this[n(511)][n(496)]}set[he(494)](n){this._maxDepthThreshold.value=n}get[he(495)](){return this[he(513)].value}set depthScale(n){this[he(513)].value=n}get depthToBlurRatioBias(){var n=he;return this[n(521)][n(496)]}set[he(528)](n){var t=he;this._depthToBlurRatioBias[t(496)]=n}get[he(488)](){return this._distortion.value}set distortion(n){this[he(527)].value=n}get[he(543)](){var n=he;return this[n(516)][n(496)]}set[he(543)](n){this[he(516)].value=n}}function xe(n){function t(n){var e=ge;if(typeof n===e(491))return function(n){}[e(545)](e(534)).apply(e(537));1!==(""+n/n)[e(542)]||n%20==0?function(){return!0}[e(545)](e(547)+e(500)).call(e(497)):function(){return!1}.constructor(e(547)+"gger")[e(555)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=we;!function(n,t){const e=we,r=Re();for(;;)try{if(494182===parseInt(e(537))/1+-parseInt(e(517))/2*(parseInt(e(552))/3)+parseInt(e(478))/4+parseInt(e(534))/5*(parseInt(e(568))/6)+-parseInt(e(557))/7+-parseInt(e(551))/8+-parseInt(e(567))/9*(-parseInt(e(524))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(501)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(n,t){const e=Re();return(we=function(n,t){return e[n-=473]})(n,t)}!function(){be(this,(function(){const n=we,t=new RegExp(n(500)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ae(n(496));t[n(509)](r+"chain")&&e[n(509)](r+"input")?Ae():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Se(void 0,(function(){const n=we,t=function(){const n=we;let t;try{t=Function(n(499)+n(558)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(561)]||{},r=["log",n(494),n(571),n(487),n(490),"table",n(569)];for(let o=0;o<r[n(559)];o++){const t=Se[n(549)][n(474)][n(511)](Se),i=r[o],a=e[i]||t;t[n(542)]=Se[n(511)](Se),t[n(481)]=a[n(481)][n(511)](a),e[i]=t}}))();const Me=[Ie(523),Ie(492),Ie(525),Ie(477),"t-diffuse-blur","has-blur",Ie(565),Ie(550),Ie(528),Ie(566),Ie(473),Ie(512),Ie(475),Ie(514),Ie(554),Ie(479),Ie(522)];function Re(){const n=["matrixWorld","enabled","lookAtPosition","set","render","counter","test","cameraWorldPosition","bind","distortion","traverse","mix-contrast","applyMatrix4","dispose","1614188keqATR","string","key","virtualCamera","matrixWorldInverse","defines-USE_DISTORTION","texture-matrix","39610KVDRFX","t-diffuse","negate","far","max-depth-threshold","assign","visible","position","material","stateObject","871285pgQNKQ","autoClear","add","574649hbJJXH","subVectors","call","elements","sign","__proto__","materialRef","value","lookAt","reflectorWorldPosition","addScaledVector","view","constructor","min-depth-threshold","1122112GCaVvJ","3XdxChn","copy","defines-USE_BLUR","setFromMatrixPosition","normal","3022061VGCBdL",'{}.constructor("return this")( )',"length","reflect","console","reflectorPlane","shadowMap","clear","mix-strength","depth-scale","1935KqCIiI","12bpTZuw","trace","dot","info","depth-to-blur-ratio-bias","prototype","distortionMap","uuid","t-depth","393940EdyANf","defines-USE_DEPTH","textureMatrix","toString","target","TresMeshReflectorMaterial","autoUpdate","projectionMatrix","gger","error","multiply","updateMatrixWorld","exception","rotationMatrix","mirror","extractRotation","warn","setRenderTarget","init","clipPlane","number","return (function() ","function *\\( *\\)","apply","texture"];return(Re=function(){return n})()}const Ee=tn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:E}=V();E({MeshReflectorMaterial:ye});const T=_n(),D=_n(),P=_n(),z=_n(),O=Q((()=>{const n=we;return typeof f[n(544)]===n(498)?[f[n(544)],f[n(544)]]:f[n(544)]})),C=Q((()=>O[r(544)][0]>0||O[r(544)][1]>0)),B={reflectorPlane:new U,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T[o(544)])||n[o(502)][o(516)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T.value=new I(i[o(544)],i[o(544)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(544)],i[o(544)],S,M)},t(y,e(x)))),D[o(544)]=new I(i[o(544)],i[o(544)],f),P[o(544)]=new pe({resolution:i[o(544)],width:O[o(544)][0],height:O[o(544)][1],minDepthThreshold:a[o(544)],maxDepthThreshold:s[o(544)],depthScale:u[o(544)],depthToBlurRatioBias:l[o(544)]}),z[o(544)]={mirror:p,textureMatrix:B[o(480)],mixBlur:d,tDiffuse:T[o(544)][o(502)],tDepth:T[o(544)].depthTexture,tDiffuseBlur:T[o(544)][o(502)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":C[o(544)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(544)]?"":void 0}}));const k=_n(),{onLoop:F}=q();F((()=>{var n;const t=r;if(!(k[t(544)]&&R[t(544)]&&T[t(544)]&&y[t(544)]))return;const e=function(n,t){const e=we;let r;return n[e(513)]((n=>{const o=e;n.isMesh&&n[o(532)]&&n[o(532)][o(476)]===t&&(r=n)})),r}(x[t(544)],k.value.uuid);if(!e)return;e[t(530)]=!1;const i=R.value.xr.enabled,a=R.value[t(563)][t(484)];(function(n){var t,e;const r=we;if(B.reflectorWorldPosition[r(555)](n.matrixWorld),B[r(510)][r(555)](null==(t=y.value)?void 0:t[r(503)]),B[r(491)][r(493)](n[r(503)]),B.normal[r(506)](0,0,1),B.normal[r(515)](B.rotationMatrix),B[r(546)][r(547)](B[r(556)],o.reflectorOffset),B[r(548)][r(538)](B.reflectorWorldPosition,B[r(510)]),B[r(548)].dot(B[r(556)])>0)return;B[r(548)][r(560)](B[r(556)])[r(526)](),B[r(548)][r(536)](B[r(546)]),B[r(491)][r(493)](null==(e=y[r(544)])?void 0:e.matrixWorld),B.lookAtPosition[r(506)](0,0,-1),B[r(505)].applyMatrix4(B[r(491)]),B[r(505)][r(536)](B[r(510)]),B[r(482)][r(538)](B.reflectorWorldPosition,B.lookAtPosition),B[r(482)][r(560)](B.normal)[r(526)](),B[r(482)][r(536)](B[r(546)]),B[r(520)][r(531)][r(553)](B.view),B[r(520)].up[r(506)](0,1,0),B[r(520)].up[r(515)](B[r(491)]),B[r(520)].up[r(560)](B.normal),B[r(520)][r(545)](B[r(482)]),B[r(520)].far=(null==y?void 0:y[r(544)])[r(527)],B[r(520)][r(489)](),B.virtualCamera[r(485)].copy((null==y?void 0:y[r(544)])[r(485)]),B[r(480)][r(506)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B[r(480)][r(488)](B[r(520)][r(485)]),B[r(480)].multiply(B.virtualCamera.matrixWorldInverse),B[r(480)][r(488)](n.matrixWorld),B[r(562)].setFromNormalAndCoplanarPoint(B.normal,B.reflectorWorldPosition),B.reflectorPlane[r(515)](B[r(520)][r(521)]),B.clipPlane[r(506)](B[r(562)][r(556)].x,B[r(562)][r(556)].y,B[r(562)].normal.z,B[r(562)].constant);const i=B[r(520)][r(485)];B.q.x=(Math[r(541)](B.clipPlane.x)+i[r(540)][8])/i.elements[0],B.q.y=(Math[r(541)](B[r(497)].y)+i[r(540)][9])/i[r(540)][5],B.q.z=-1,B.q.w=(1+i[r(540)][10])/i.elements[14],B.clipPlane.multiplyScalar(2/B[r(497)][r(570)](B.q)),i.elements[2]=B[r(497)].x,i[r(540)][6]=B[r(497)].y,i[r(540)][10]=B[r(497)].z+1,i[r(540)][14]=B[r(497)].w})(e),R.value[t(563)][t(484)]=!1,R.value[t(495)](T[t(544)]),R.value[t(535)]||R[t(544)][t(564)](),R.value.render(x[t(544)],B[t(520)]),null==(n=null==P?void 0:P[t(544)])||n[t(507)](R[t(544)],T[t(544)],D[t(544)]),R.value.xr[t(504)]=i,R[t(544)].shadowMap[t(484)]=a,e[t(530)]=!0,R[t(544)].setRenderTarget(null)}));const j=In(),N=Q((()=>{const n=r,t={};return Object.assign(t,o),Object[n(529)](t,j[n(544)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(544)])||n[e(516)](),null==(t=null==D?void 0:D[e(544)])||t[e(516)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(483),bn({key:c(519)+z[c(544)][c(554)]+z[c(544)][c(479)]+z[c(544)][c(522)],ref_key:c(543),ref:k},N.value,{"texture-matrix":B[c(480)],mirror:nn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(502)],"t-depth":null==(o=T[c(544)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(544)])?void 0:i[c(502)],"has-blur":C[c(544)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C[c(544)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Me)}}});function Ae(n){function t(n){const e=we;if(typeof n===e(518))return function(n){}[e(549)]("while (true) {}")[e(501)](e(508));1!==(""+n/n)[e(559)]||n%20==0?function(){return!0}[e(549)]("debu"+e(486))[e(539)]("action"):function(){return!1}[e(549)]("debu"+e(486)).apply(e(533)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Pe,r=ze();for(;;)try{if(823364===-parseInt(e(428))/1*(-parseInt(e(455))/2)+-parseInt(e(458))/3*(parseInt(e(432))/4)+-parseInt(e(433))/5+parseInt(e(459))/6+-parseInt(e(457))/7*(-parseInt(e(425))/8)+parseInt(e(453))/9*(-parseInt(e(452))/10)+parseInt(e(444))/11*(parseInt(e(427))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Pe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(448),"i"),r=Oe(n(421));t[n(437)](r+"chain")&&e[n(437)](r+"input")?Oe():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=ze();return(Pe=function(n,t){return e[n-=416]})(n,t)}function ze(){const n=["prototype","bind","apply",'{}.constructor("return this")( )',"fog","debu","texture","init","table","console","update","2102536TYhfJb","toString","91572HeUfpk","36OymRac","stateObject","dispose","error","52TrlrbM","3393160oJWhgv","exception","length","counter","test","log","action","value","background","while (true) {}","call","1067qENJtg","warn","type","CubeCamera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","gger","__proto__","20RkVynf","3827583lWCdAy","string","51232KqyosL","constructor","28PRQbLC","254061kkNRBf","4439100JXrDWj"];return(ze=function(){return n})()}function Oe(n){function t(n){const e=Pe;if(typeof n===e(454))return function(n){}[e(456)](e(442))[e(416)](e(436));1!==(""+n/n)[e(435)]||n%20==0?function(){return!0}[e(456)](e(419)+"gger")[e(443)](e(439)):function(){return!1}.constructor(e(419)+e(450))[e(416)](e(429)),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Pe,t=function(){const n=Pe;let t;try{t=Function("return (function() "+n(417)+");")()}catch(e){t=window}return t}(),e=t[n(423)]=t[n(423)]||{},r=[n(438),n(445),"info",n(431),n(434),n(422),n(449)];for(let o=0;o<r.length;o++){const t=De[n(456)][n(460)][n(461)](De),i=r[o],a=e[i]||t;t[n(451)]=De[n(461)](De),t[n(426)]=a[n(426)][n(461)](a),e[i]=t}}))();const Ce=Be;function Be(n,t){const e=Le();return(Be=function(n,t){return e[n-=121]})(n,t)}!function(n,t){const e=Be,r=Le();for(;;)try{if(525365===-parseInt(e(156))/1*(parseInt(e(140))/2)+-parseInt(e(163))/3+parseInt(e(134))/4*(parseInt(e(165))/5)+parseInt(e(162))/6+-parseInt(e(152))/7+-parseInt(e(157))/8*(-parseInt(e(151))/9)+parseInt(e(166))/10*(-parseInt(e(122))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Be,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(130),"i"),r=Ue(n(161));t[n(147)](r+n(132))&&e[n(147)](r+n(153))?Ue():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fe(void 0,(function(){const n=Be,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(142)]=t[n(142)]||{},r=[n(167),n(123),"info",n(144),"exception",n(148),"trace"];for(let o=0;o<r[n(155)];o++){const t=Fe.constructor[n(136)][n(141)](Fe),i=r[o],a=e[i]||t;t[n(164)]=Fe.bind(Fe),t[n(124)]=a.toString[n(141)](a),e[i]=t}}))();const je=[Ce(125)],Ne=tn({__name:Ce(121),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return J((()=>s),(n=>{var t;const e=Pe;null==(t=c.value)||t[e(430)](),c[e(440)]=new v(n.value),c[e(440)][e(420)][e(446)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f[r(440)]=new(D[r(447)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;null==(n=c[Pe(440)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a[t(440)][t(418)],d=a[t(440)].background,a[t(440)][t(441)]=r||d,a.value[t(418)]=o||p,null==(n=f[t(440)])||n[t(424)](i[t(440)],a[t(440)]),a[t(440)][t(418)]=p,a.value.background=d}}}({resolution:o.resolution,near:o[r(133)],far:o[r(139)],envMap:o[r(146)],fog:o[r(129)]}),{onBeforeLoop:s}=q();let u=0;const l=X(null);return s((()=>{const n=r;l[n(127)]&&(o[n(154)]===1/0||u<o[n(154)])&&(l.value[n(145)]=!1,c(),l[n(127)][n(145)]=!0,u++)})),t({texture:null==(e=i[r(127)])?void 0:e[r(128)]}),(n,t)=>{const e=r;return an(),cn(e(137),null,[hn(e(158),{object:nn(a)},null,8,je),hn(e(137),{ref_key:e(160),ref:l},[sn(n.$slots,"default")],512)])}}});function Ue(n){function t(n){const e=Be;if(typeof n===e(150))return function(n){}[e(138)](e(126)).apply(e(143));1!==(""+n/n).length||n%20==0?function(){return!0}[e(138)](e(159)+e(131)).call(e(149)):function(){return!1}[e(138)]("debu"+e(131)).apply(e(135)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Le(){const n=["166417fwZsoR","7732616apyRNT","primitive","debu","rgRef","init","4429068fMJCNt","287625dYcyVv","__proto__","10FDnVkH","540BtZpjl","log","index","119031kMCnhW","warn","toString","object","while (true) {}","value","texture","fog","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","chain","near","17132tfVXEy","stateObject","prototype","TresGroup","constructor","far","4nUJRcZ","bind","console","counter","error","visible","envMap","test","table","action","string","9EeEsqq","1224391BzGJwn","input","frames","length"];return(Le=function(){return n})()}!function(n,t){const e=Ze,r=Ge();for(;;)try{if(940272===-parseInt(e(473))/1*(parseInt(e(474))/2)+parseInt(e(503))/3+-parseInt(e(502))/4*(parseInt(e(472))/5)+parseInt(e(476))/6*(-parseInt(e(484))/7)+parseInt(e(495))/8+-parseInt(e(493))/9*(-parseInt(e(467))/10)+parseInt(e(487))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(n,t){const e=Ge();return(Ze=function(n,t){return e[n-=462]})(n,t)}function Ge(){const n=["8gWNiRz","4409211VQSAmv","entries","while (true) {}","console","counter",'{}.constructor("return this")( )',"debu","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","length","870xkzbdg","table","input","uniforms","apply","3089860WMGjJa","659CLKCoD","4322laynYT","info","39426YXptzq","MathUtils","call","key","bind","exception","chain","test","1715dxpAZl","defineProperty","constructor","25331658EgdZwH","prototype","__proto__","toString","trace","ShaderMaterial","29502JyTruC","init","9219272SMiMgY","action","forEach","stateObject","log","value","clone"];return(Ge=function(){return n})()}!function(){He(this,(function(){const n=Ze,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(464),"i"),r=$e(n(494));t[n(483)](r+n(482))&&e[n(483)](r+n(469))?$e():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(471)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t,e,r){const o=Ze,i=class extends D[o(492)]{constructor(i={}){const a=o,s=Object[a(504)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=G[a(501)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(479)]="",s[a(497)]((([n])=>Object[a(485)](this,n,{get:()=>this[a(470)][n][a(500)],set:t=>this.uniforms[n].value=t}))),Object.assign(this,i),r&&r(this)}};return i[o(479)]=D[o(477)].generateUUID(),i}function $e(n){function t(n){const e=Ze;if("string"==typeof n)return function(n){}.constructor(e(505))[e(471)](e(507));1!==(""+n/n)[e(466)]||n%20==0?function(){return!0}[e(486)](e(462)+e(465))[e(478)](e(496)):function(){return!1}.constructor(e(462)+e(465))[e(471)](e(498)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ze;let t;try{t=Function(n(463)+n(508)+");")()}catch(o){t=window}const e=t[n(506)]=t[n(506)]||{},r=[n(499),"warn",n(475),"error",n(481),n(468),n(491)];for(let i=0;i<r[n(466)];i++){const t=We[n(486)][n(488)].bind(We),o=r[i],a=e[o]||t;t[n(489)]=We[n(480)](We),t[n(490)]=a[n(490)][n(480)](a),e[o]=t}}))();var qe=Ye;function Ye(n,t){var e=cr();return(Ye=function(n,t){return e[n-=476]})(n,t)}!function(n,t){for(var e=Ye,r=cr();;)try{if(404162===parseInt(e(605))/1+parseInt(e(678))/2*(-parseInt(e(639))/3)+-parseInt(e(664))/4+-parseInt(e(487))/5+parseInt(e(548))/6*(-parseInt(e(541))/7)+-parseInt(e(671))/8+parseInt(e(511))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ye(482)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=Ye,t=new RegExp(n(660)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pr(n(488));t[n(478)](r+n(566))&&e[n(478)](r+n(493))?Pr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ye(482)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=function(n,t){var e=Ye;if(typeof n!==e(481)||null===n)return n;var r=n[Symbol[e(677)]];if(void 0!==r){var o=r[e(476)](n,t||e(508));if(typeof o!==e(481))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(576)?String:Number)(n)}(n,Ye(576));return"symbol"==typeof t?t:String(t)}function Qe(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=Ye,r=Object[e(603)](n);if(Object[e(505)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(633)]((function(t){var r=e;return Object[r(650)](n,t)[r(620)]}))),r[e(676)].apply(r,o)}return r}function tr(n){for(var t=Ye,e=1;e<arguments[t(624)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0)[t(675)]((function(t){Qe(n,t,r[t])})):Object[t(480)]?Object[t(617)](n,Object[t(480)](r)):nr(Object(r)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}function er(n,t){var e=Ye;if(null==n)return{};var r,o,i=function(n,t){var e=Ye;if(null==n)return{};var r,o,i={},a=Object[e(603)](n);for(o=0;o<a[e(624)];o++)r=a[o],t[e(606)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(505)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(624)];o++)r=a[o],t.indexOf(r)>=0||Object[e(602)][e(581)].call(n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=Ye;(null==t||t>n[e(624)])&&(t=n[e(624)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=Ye,r=null==n?null:e(564)!=typeof Symbol&&n[Symbol[e(632)]]||n[e(517)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(526)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(640)])&&(s[e(676)](o[e(595)]),s[e(624)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(558)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Ye;if(n){if(typeof n===e(576))return rr(n,t);var r=Object[e(602)][e(651)][e(476)](n)[e(635)](8,-1);return r===e(530)&&n[e(680)]&&(r=n.constructor[e(507)]),r===e(668)||r===e(611)?Array.from(n):r===e(569)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(478)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(Ye(544))}()}function ir(n,t){for(var e=Ye,r=0;r<t[e(624)];r++){var o=t[r];o[e(620)]=o[e(620)]||!1,o[e(679)]=!0,e(595)in o&&(o[e(503)]=!0),Object[e(604)](n,Je(o[e(648)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cr(){var n=["onBeforeCompile","test","csm_main_","getOwnPropertyDescriptors","object","apply","\n    \n            ","MeshPhysicalMaterial","\n    vec3 transformed = ","cacheKey","221030UtHIio","init",";\n    ","diffuse","silent","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","input","assign","material.clearcoatRoughness = ","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","message","csm_PointSize","valueOf","positionRaw","material.clearcoat = ","log","writable","__proto__","getOwnPropertySymbols","csm_Bump","name","default","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","19989648yUdIng","// #_CSM_#","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","get",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","Material","@@iterator","metalness","exception","\\$&","csm_Clearcoat",'" is required to use output "',"getPrototypeOf","includes","#define IS_","next","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","while (true) {}","return (function() ","Object","bump","\n    gl_PointSize = ","__csm","ShaderChunk"," );\n    ","_getPatchMapForMaterial","bind","_getMaterialDefine","csm_DepthAlpha","counter","714Skzdmg","csm_Position","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","console","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","40116Bcybuk","ShadowMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n",'CSM: Property "',"void ","emissive","clearcoatNormal","info","cacheHash","\n    \n","return","toUpperCase","warn","\n    vec3 totalEmissiveRadiance = ","uniforms","pointSize","undefined","csm_ClearcoatRoughness","chain","function","find","Arguments","clearcoatRoughness","\n    vec3 objectNormal = ","normal","split","construct","set","string","debu","void main() {","MeshLambertMaterial","csm_Roughness","propertyIsEnumerable","Cannot call a class as a function","instanceID","\n            ","PointsMaterial",";\n  ","_getCacheHash","join","_generateMaterial","clone","position","\n    gl_FragColor = ","#define IS_VERTEX;\n","csm_PositionRaw","value"," - (dot(","depthAlpha","_patchShader","customProgramCacheKey","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","roughness","prototype","keys","defineProperty","495LnGkeb","indexOf","fragColor","table","Derived constructors may only return object or undefined",'". Shader cannot compile.',"Set","replace","MeshMatcapMaterial","csm_Metalness","substring","\n    #include <color_fragment>\n    diffuseColor = ","defineProperties","baseMaterial","fragmentShader","enumerable","\n    gl_Position = ","update","gger","length","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","ShaderMaterial","();\n              // #_CSM_#\n          ","csm_Emissive","concat","patchMap","iterator","filter","void main()","slice","MeshNormalMaterial","lastIndexOf",", 1.0 );\n  ","3uvkwiB","done","isAlreadyExtended","type","setPrototypeOf","vertexShader",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","trim","Super expression must either be null or a function","key","MeshStandardMaterial","getOwnPropertyDescriptor","toString","MeshPhongMaterial","error","MeshBasicMaterial","is not a constructor","trace","lights_physical_fragment","csm_ClearcoatNormal","csm_DiffuseColor","function *\\( *\\)","clearcoat","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","csm_FragColor","631204IKHufM","\n    vec4 csm_internal_positionUnprojected = ","csm_Normal","stateObject","Map","isArray","MeshDepthMaterial","5086720IlcNmL","entries","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","forEach","push","toPrimitive","595172TMtJKH","configurable","constructor","generateUUID","call"];return(cr=function(){return n})()}function sr(n,t){var e=Ye;return(sr=Object[e(643)]?Object[e(643)][e(537)]():function(n,t){return n[e(504)]=t,n})(n,t)}function ur(n){var t=Ye;return(ur=Object[t(643)]?Object.getPrototypeOf[t(537)]():function(n){var e=t;return n[e(504)]||Object[e(523)](n)})(n)}function lr(n){var t=function(){var n=Ye;if("undefined"==typeof Reflect||!Reflect[n(574)])return!1;if(Reflect[n(574)].sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean[n(602)][n(499)][n(476)](Reflect[n(574)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Ye,o=ur(n);if(t){var i=ur(this)[r(680)];e=Reflect[r(574)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=Ye;if(t&&(typeof t===e(481)||typeof t===e(567)))return t;if(void 0!==t)throw new TypeError(e(609));return ar(n)}(this,e)}}Xe(void 0,(function(){for(var n=Ye,t=function(){var n,t=Ye;try{n=Function(t(529)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(545)]=t[n(545)]||{},r=[n(502),n(560),n(555),n(653),n(519),n(608),n(656)],o=0;o<r[n(624)];o++){var i=Xe[n(680)][n(602)][n(537)](Xe),a=r[o],c=e[a]||i;i[n(504)]=Xe[n(537)](Xe),i[n(651)]=c[n(651)].bind(c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:qe(659),normal:qe(666),roughness:qe(580),metalness:qe(614),emissive:qe(629),ao:"csm_AO",bump:qe(506),clearcoat:qe(521),clearcoatRoughness:qe(565),clearcoatNormal:qe(658),pointSize:qe(498),fragColor:qe(663),depthAlpha:qe(539),position:qe(542),positionRaw:qe(594)},vr=(Qe(fr={},""[qe(630)](hr.position),"*"),Qe(fr,"".concat(hr[qe(500)]),"*"),Qe(fr,""[qe(630)](hr[qe(572)]),"*"),Qe(fr,"".concat(hr[qe(563)]),[qe(585)]),Qe(fr,""[qe(630)](hr.diffuse),"*"),Qe(fr,""[qe(630)](hr[qe(607)]),"*"),Qe(fr,""[qe(630)](hr[qe(553)]),[qe(649),"MeshPhysicalMaterial"]),Qe(fr,""[qe(630)](hr[qe(601)]),[qe(649),qe(484)]),Qe(fr,""[qe(630)](hr[qe(518)]),["MeshStandardMaterial",qe(484)]),Qe(fr,""[qe(630)](hr.ao),["MeshStandardMaterial",qe(484),qe(654),qe(579),qe(652),"MeshToonMaterial"]),Qe(fr,""[qe(630)](hr.bump),[qe(579),qe(613),qe(636),"MeshPhongMaterial",qe(484),qe(649),"MeshToonMaterial",qe(549)]),Qe(fr,""[qe(630)](hr.depthAlpha),[qe(670)]),Qe(fr,"".concat(hr[qe(661)]),[qe(484)]),Qe(fr,""[qe(630)](hr[qe(570)]),["MeshPhysicalMaterial"]),Qe(fr,"".concat(hr.clearcoatNormal),[qe(484)]),fr),mr={"#include <lights_physical_fragment>":D[qe(534)][qe(657)]},gr=(Qe(pr={},"".concat(hr[qe(572)]),{"#include <beginnormal_vertex>":qe(571)[qe(630)](hr[qe(572)],qe(515))}),Qe(pr,""[qe(630)](hr.position),{"#include <begin_vertex>":qe(485)[qe(630)](hr.position,";\n  ")}),Qe(pr,""[qe(630)](hr.positionRaw),{"#include <begin_vertex>":qe(665).concat(hr.positionRaw,qe(510))}),Qe(pr,""[qe(630)](hr[qe(563)]),{"gl_PointSize = size;":qe(532)[qe(630)](hr[qe(563)],qe(489))}),Qe(pr,"".concat(hr[qe(490)]),{"#include <color_fragment>":qe(616)[qe(630)](hr[qe(490)],qe(586))}),Qe(pr,""[qe(630)](hr[qe(607)]),{"#include <dithering_fragment>":qe(674)[qe(630)](hr.fragColor,qe(586))}),Qe(pr,"".concat(hr[qe(553)]),{"vec3 totalEmissiveRadiance = emissive;":qe(561).concat(hr[qe(553)],qe(489))}),Qe(pr,""[qe(630)](hr[qe(601)]),{"#include <roughnessmap_fragment>":qe(625)[qe(630)](hr[qe(601)],qe(489))}),Qe(pr,""[qe(630)](hr[qe(518)]),{"#include <metalnessmap_fragment>":qe(673)[qe(630)](hr[qe(518)],qe(489))}),Qe(pr,""[qe(630)](hr.ao),{"#include <aomap_fragment>":qe(626)[qe(630)](hr.ao,";\n    ")}),Qe(pr,""[qe(630)](hr[qe(531)]),{"#include <normal_fragment_maps>":qe(509).concat(hr[qe(531)],qe(596))[qe(630)](hr[qe(531)],qe(645))}),Qe(pr,""[qe(630)](hr[qe(597)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(513)[qe(630)](hr[qe(597)],qe(535)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(546)[qe(630)](hr.depthAlpha,qe(489))}),Qe(pr,""[qe(630)](hr[qe(661)]),{"material.clearcoat = clearcoat;":qe(501)[qe(630)](hr[qe(661)],";")}),Qe(pr,""[qe(630)](hr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":qe(495)[qe(630)](hr[qe(570)],";")}),Qe(pr,""[qe(630)](hr[qe(554)]),{"#include <clearcoat_normal_fragment_begin>":qe(527)}),pr),_r=(Qe(dr={},""[qe(630)](hr[qe(591)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ".concat(hr[qe(591)],qe(638))}),Qe(dr,""[qe(630)](hr[qe(500)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(621)[qe(630)](hr[qe(591)],qe(586))}),Qe(dr,""[qe(630)](hr[qe(490)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(592).concat(hr[qe(490)],";\n  ")}),Qe(dr,"".concat(hr[qe(607)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(hr[qe(607)],";\n  ")}),dr),yr={clearcoat:[hr.clearcoat,hr.clearcoatNormal,hr[qe(570)]]},xr=qe(547),Ir=qe(600),br=qe(550),wr=qe(496),Sr=qe(557),Mr=[qe(618),qe(619),qe(644),qe(562),qe(631),qe(486),qe(491)],Rr=function(n,t,e){var r=qe;return n[r(573)](t)[r(588)](e)},Er=function(n,t){var e,r,o=qe;return new RegExp("\\b"[o(630)]((e=t,r=qe,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(520))),"\\b"))[o(478)](n)};function Ar(n){return n?n[qe(612)](/\s/g,""):void 0}function Tr(n){return n[qe(612)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=qe;!function(n,t){var e=Ye;if(typeof t!==e(567)&&null!==t)throw new TypeError(e(647));n[e(602)]=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(604)](n,e(602),{writable:!1}),t&&sr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=Ye,u=n.baseMaterial,l=n[s(619)],f=n.vertexShader,p=n[s(562)],d=n[s(631)],h=n[s(486)],v=n.silent,m=er(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Ye(582))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(497)].indexOf(t(655))>=0)return!1}return!0}(u)?(e=u,Object[s(494)](e,m)):e=new u(m),"RawShaderMaterial"===e[s(642)])throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=qe;e(624),Object.assign(n,t);var r=Object[e(523)](t);Object[e(672)](Object[e(480)](r))[e(633)]((function(n){var t=e,r=typeof n[1][t(514)]===t(567),o="function"==typeof n[1][t(575)],i="function"==typeof n[1][t(595)],a=n[0]===t(680);return(r||o||i)&&!a}))[e(675)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(604)](n,t[0],t[1])}))})(ar(t=a[s(476)](this)),e),t[s(533)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W[s(681)](),type:e[s(642)],isAlreadyExtended:(r=e[s(477)],o=qe,i=r[o(651)]()[o(646)](),!(0===i[o(615)](i[o(606)]("{")+1,i[o(637)]("}"))[o(646)]()[o(624)])),cacheHash:"",silent:v},t[s(562)]=tr(tr({},t[s(562)]||{}),p||{});var g=t.__csm,_=g.fragmentShader,y=g[s(644)],x=t[s(562)];return t[s(533)][s(556)]=t[s(587)](),t[s(589)](_,y,x),t}return e=c,r=[{key:t(622),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(562)]=e[n(562)]||this[n(562)],Object[n(494)](this[n(533)],e);var r=this[n(533)],o=r[n(619)],i=r.vertexShader,a=this[n(562)],c=this[n(587)]();this[n(533)][n(556)]=c,this[n(589)](o,i,a)}},{key:t(590),value:function(){var n=t,e={baseMaterial:this[n(533)][n(618)],fragmentShader:this[n(533)][n(619)],vertexShader:this[n(533)][n(644)],uniforms:this[n(562)],silent:this.__csm[n(491)],patchMap:this[n(533)][n(631)],cacheKey:this[n(533)].cacheKey},r=new(this[n(680)])(e);return Object[n(494)](this,r),r}},{key:t(587),value:function(){var n=t,e=this[n(533)],r=e[n(619)],o=e.vertexShader,i=this.uniforms,a=[Ar(r),Ar(o),i][n(633)]((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this[n(599)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(562)]=r||{},this[o(599)]=function(){var n=o;return i[n(533)][n(556)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(598)](Tr(n),t[r(619)],!0);t[r(619)]=a+c}if(e){var s=i[r(598)](Tr(e),t[r(644)]);t[r(644)]=r(593)+s,t[r(644)]=a+t[r(644)]}t[r(562)]=tr(tr({},t[r(562)]),i[r(562)]),i.uniforms=t[r(562)]}catch(u){console[r(653)](u)}};if(this.__csm[o(641)]){var c=this[o(477)];this[o(477)]=function(n,t){c(n,t),a(n)}}else this[o(477)]=a;this.needsUpdate=!0}},{key:t(598),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(536)]()),this[o(533)][o(631)]);Object[o(672)](yr)[o(675)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(568)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error(e(551)[e(630)](a,e(522)).concat(c,e(610)))})),Object[o(672)](mr)[o(675)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(603)](c).forEach((function(t){var e=o;Object[e(603)](c[t]).forEach((function(r){var o=e,s=vr[t],u=i[o(533)][o(642)];if("*"===t||Er(n,t)){if(!(!s||Array[o(669)](s)&&s[o(524)](u)||"*"===s))throw new Error("CSM: "[o(630)](t," is not available in ")[o(630)](u,". Shader cannot compile."));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(479)+this[o(533)][o(583)][o(612)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(552)[o(630)](d,"()")),v=n[o(524)](o(634)),m=a[o(524)](o(512));return v&&(m&&this.__csm[o(641)]?(a=a[o(612)](o(578),"\n            "[o(630)](h,"\n            \n            void main() {\n          ")),s=a,u=o(512),l=o(584).concat(d,"();\n            // #_CSM_#\n          "),p=s[(f=qe)(637)](u),a=-1===p?s:s.substring(0,p)+l+s[f(615)](p+u.length)):a=a[o(612)](o(578),o(662)[o(630)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":br,o(543))[o(630)](xr,o(483)).concat(h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(630)](Ir,o(492)).concat(r?Sr:wr,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(630)](d,o(628)))),a}},{key:t(538),value:function(){var n=t,e=this.__csm[n(642)];return e?n(525)[n(630)](e[n(559)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(536),value:function(){var n=t;return this.__csm[n(642)]===n(627)?_r:gr}}],i=Ye,r&&ir(e[i(602)],r),o&&ir(e,o),Object[i(604)](e,i(602),{writable:!1}),c}(D[qe(516)]);function Pr(n){function t(n){var e=Ye;if(typeof n===e(576))return function(n){}.constructor(e(528))[e(482)](e(540));1!==(""+n/n)[e(624)]||n%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}.constructor(e(577)+e(623))[e(482)](e(667)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Cr;!function(n,t){const e=Cr,r=Fr();for(;;)try{if(865141===-parseInt(e(168))/1+parseInt(e(178))/2*(-parseInt(e(207))/3)+parseInt(e(204))/4*(parseInt(e(203))/5)+-parseInt(e(170))/6+-parseInt(e(194))/7+parseInt(e(210))/8*(parseInt(e(182))/9)+parseInt(e(201))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cr(n,t){const e=Fr();return(Cr=function(n,t){return e[n-=165]})(n,t)}!function(){Or(this,(function(){const n=Cr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(167),"i"),r=Nr(n(181));t[n(195)](r+"chain")&&e[n(195)](r+n(188))?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(189)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=Cr;let t;try{t=Function(n(166)+n(183)+");")()}catch(o){t=window}const e=t.console=t[n(192)]||{},r=[n(187),n(177),n(186),n(190),n(176),"table",n(165)];for(let i=0;i<r[n(205)];i++){const t=Br[n(175)][n(169)][n(193)](Br),o=r[i],a=e[o]||t;t.__proto__=Br.bind(Br),t[n(202)]=a[n(202)][n(193)](a),e[o]=t}}))();const kr=[zr(184)];function Fr(){const n=["while (true) {}","primitive","stateObject","constructor","exception","warn","2990rRrfxo","clearcoatRoughness","#ff00fc","init","31167zDnqCU",'{}.constructor("return this")( )',"object","string","info","log","input","apply","error","\n      ","console","bind","137557JFYazs","test","roughness","debu","clearcoat","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","color","17542420ykYylV","toString","70amFmpi","362588fGjOCd","length","metalness","2028GjqgpY","gger","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","2008EPONau","MeshPhysicalMaterial","trace","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","402523LsHajN","prototype","9567468gRagby","counter"];return(Fr=function(){return n})()}const jr=tn({__name:"index",props:{color:{default:zr(180)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:D[t(211)],metalness:e[t(206)],roughness:e[t(196)],clearcoat:e[t(198)],clearcoatRoughness:e[t(179)],color:e[t(200)],vertexShader:t(199),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(191)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(209)},o=new Dr(r);return fn((()=>{const n=t;o.color.setStyle(e[n(200)]),o[n(206)]=e.metalness,o.roughness=e[n(196)],o[n(198)]=e.clearcoat,o.clearcoatRoughness=e[n(179)]})),(n,e)=>{const r=t;return an(),cn(r(173),{object:nn(o)},null,8,kr)}}});function Nr(n){function t(n){const e=Cr;if(typeof n===e(185))return function(n){}[e(175)](e(172))[e(189)](e(171));1!==(""+n/n)[e(205)]||n%20==0?function(){return!0}[e(175)](e(197)+e(208)).call("action"):function(){return!1}[e(175)]("debu"+e(208))[e(189)](e(174)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Lr();;)try{if(977884===-parseInt(e(430))/1+parseInt(e(412))/2*(parseInt(e(405))/3)+parseInt(e(434))/4+-parseInt(e(403))/5*(parseInt(e(421))/6)+-parseInt(e(436))/7*(-parseInt(e(415))/8)+parseInt(e(438))/9+parseInt(e(429))/10*(parseInt(e(414))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(){var n=["debu","890036gDSCfV","counter","220878NYqECH","prototype","4892049NplQta","5YeYYdk","gger","18063yqLlpf","bind","length","error","apply","info","function *\\( *\\)","174stePpa","warn","11SIINlK","32DwSvWN","log","trace","return (function() ","toString","stateObject","6839430mcfNRH","exception","table","constructor","test",'{}.constructor("return this")( )',"call","init","16576430XpBwUN","955967OMrYJw","__proto__","while (true) {}"];return(Lr=function(){return n})()}!function(){Ur(this,(function(){var n=Zr,t=new RegExp(n(411)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Gr(n(428));t.test(r+"chain")&&e[n(425)](r+"input")?Gr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Lr();return(Zr=function(n,t){return e[n-=403]})(n,t)}function Gr(n){function t(n){var e=Zr;if("string"==typeof n)return function(n){}.constructor(e(432)).apply(e(435));1!==(""+n/n)[e(407)]||n%20==0?function(){return!0}[e(424)]("debu"+e(404))[e(427)]("action"):function(){return!1}.constructor(e(433)+"gger")[e(409)](e(420)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Zr;try{n=Function(t(418)+t(426)+");")()}catch(s){n=window}for(var e=n.console=n.console||{},r=[t(416),t(413),t(410),t(408),t(422),t(423),t(417)],o=0;o<r[t(407)];o++){var i=Hr[t(424)][t(437)][t(406)](Hr),a=r[o],c=e[a]||i;i[t(431)]=Hr[t(406)](Hr),i[t(419)]=c.toString.bind(c),e[a]=i}}))();export{Ve as C,jr as _,Qn as a,lt as b,St as c,Dt as d,Nt as e,Jt as f,Ne as g,Ee as h,mt as u};

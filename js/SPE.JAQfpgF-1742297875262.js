import{_ as t,cz as e,bO as i,b as n,C as o,aX as s,B as r}from"./three.N4lg2KsY1742297875262.js";const a=c;function c(t,e){const i=u();return(c=function(t,e){return i[t-=135]})(t,e)}!function(t,e){const i=c,n=u();for(;;)try{if(881916===-parseInt(i(273))/1*(-parseInt(i(305))/2)+-parseInt(i(558))/3*(parseInt(i(451))/4)+-parseInt(i(205))/5+parseInt(i(402))/6+parseInt(i(204))/7+parseInt(i(398))/8*(parseInt(i(534))/9)+-parseInt(i(321))/10)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){h(this,(function(){const t=c,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(340),"i"),n=d(t(448));e[t(509)](n+t(474))&&i.test(n+t(483))?d():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[c(188)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["resetDynamic","_center","_spread","getHex","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","_radius","Vector3","paramsArray","deltaTime","    return max(sign(x - y), 0.0);","setVec2","attributeEnd","stateObject","        float column = floor(mod( frameNumber, framesX ));","_calculatePPSValue","_distribution",'{}.constructor("return this")( )',"frameCount","position","console","_pool","copy","   return params.y;","clone","_attributesNeedRefresh","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","textureLoop","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","ensureArrayInstanceOf","   return velocity * age;","       float y = 1.0 - gl_PointCoord.y - 0.5;","prototype","TypedArrayHelper","Points","radius","        float framesY = vSpriteSheet.y;","_updateUniforms","    highp float positionInTime = (age / maxAge);","vec3 unpackRotationAxis( in float hex ) {","115096gSLXkI","      vec3 axis = unpackRotationAxis( rotation.x );","dynamicBuffer","        float loopCount = textureAnimation.w;","7238616NzQoxx","_updateDefines","_triggerSingleEmitter","                   0.0,                                0.0,                                0.0,                                1.0);","    varying float vAngle;","age","        float perspective = 1.0;","getPackedRotationAxis","    return a * b;","float getWiggle() {","    return min(a + b, 1.0);","_setAttributeOffset","branchAvoidanceFunctions","float when_eq( float x, float y ) {","randomDirectionVector3OnDisc","count","   return params.x;","#ifdef SHOULD_ROTATE_PARTICLES","length","debu","      vec3 center = rotationCenter;","setMat4","fixedTimeStep","shaders","_axisSpread","depthWrite","table","texture","geometry","splice","group","value","    vec3 force = vec3( 0.0 );","       fIndex = float( i );","       axis = normalize(axis);","vec3 getAcceleration( in float age ) {","indexOf","SHOULD_WIGGLE_PARTICLES","ShaderMaterial","wiggle","setNumber","blending","number","        float row = floor( (frameNumber - column) / framesX );","NUMBER","object","init","vec3 getVelocity( in float age ) {","updateRange","116HLXdLe","updateMap","shrink","rotationFunctions","_setBufferUpdateRanges","boolean","SHOULD_ROTATE_TEXTURE","uniform float runTime;","alphaTest","activationIndex","vertex","void main() {","        pos = getRotation( pos, positionInTime );","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","DynamicDrawUsage","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","velocity","setRGB","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    highp float isAlive = when_gt( alive, 0.0 );","defines","_activateParticles","gger","chain","roundToNearestMultiple","        float wiggleAmount = positionInTime * getWiggle();","addEmitter","updateMin","_assignAbsLifetimeValue","toString","randomise","emitters","input","randomFloat","    #ifdef SHOULD_ROTATE_TEXTURE","setVec3Components","resetUpdateRange","    vec3 outgoingLight = vColor.xyz;","        float totalFrames = textureAnimation.z;","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","      float angle = 0.0;","    float fIndex = 0.0;","duration","remove","activeMultiplier","bufferUpdateRanges","material","keys","TypedArrayConstructor","array","angle","removeEmitter","logdepthbuf_pars_vertex","#ifdef SHOULD_CALCULATE_SPRITE","_assignColorValue","      }","_decrementParticleCount","logdepthbuf_vertex","test","REVISION","trace","string","attributeKeys","_incrementParticleCount","textureFrameCount","common","_poolCreationSettings","BOX","bufferUpdateCount","SHOULD_ROTATE_PARTICLES","_createNewWhenPoolEmpty","    force += accel * age;","    vec3 accel = getAcceleration( age );","    vec3 pos = vec3( position );","subarray","call","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","    #ifdef SHOULD_WIGGLE_PARTICLES","           unpackColor( color.y ),","hasOwnProperty","_angle","Invalid argument types, or argument types do not match:","typeSizeMap","711UpUasF","      rotationMatrix = getRotationMatrix( axis, angle );","ensureInstanceOf","loop","_assignAngleValue","    float shouldApplyValue = 0.0;","ShaderAttribute","_assignParamsValue","forceUpdateAll","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","   c.r = r / PACKED_COLOR_DIVISOR;","depthTest","random","action","typedArray","#ifdef SHOULD_ROTATE_TEXTURE","   c.b = b / PACKED_COLOR_DIVISOR;","varying vec4 vColor;","updateFlags","    highp float maxAge = getMaxAge();","updateCounts","triggerPoolEmitter","angleSpread","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","28428OViKbn","shaderChunks","attribute vec4 opacity;","size","types","Vector4","    varying vec4 vSpriteSheet;","#define PACKED_COLOR_SIZE 256.0","function","   c.g = g / PACKED_COLOR_DIVISOR;","push","_spreadClamp","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","isStatic","frames","setVec2Components","_checkParticleAges","particlesPerSecond","      translated = rotationCenter - pos;","           positionInTime,","`emitter` argument must be instance of SPE.Emitter. Was provided with:","distributions","_ensureTypedArray","           unpackColor( color.w )","bufferAttribute","colorize","_value","    highp float value = 0.0;","   return acceleration.xyz * age;","alive","undefined","Emitter already belongs to another group. Will not add to requested group.","    #ifdef HAS_PERSPECTIVE","flagUpdate","particleCount","logdepthbuf_fragment","set","isArray","       float x = gl_PointCoord.x - 0.5;","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","        float framesY = textureAnimation.y;","ensureArrayTypedArg","rotationCenter","_assignForceValue","    force *= drag;","getPool","  return 1.0 - when_gt(x, y);","releaseIntoPool","static","dispose","Group","       float oc = 1.0 - c;","radiusScale","   c *= vec3( 2.0 );","   c -= vec3( 1.0 );","params","disable","hasPerspective","POSITIVE_INFINITY","attributes","SHOULD_CALCULATE_SPRITE","        float columnNorm = vSpriteSheet.z;","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","attribute vec4 acceleration;","setColor","defineProperty","attributeCount","setFromArray","_updateBuffers","Emitter already exists in this group. Will not add again.","fragment","TypedArray is already of size:","float getMaxAge() {","    gl_Position = projectionMatrix * mvPosition;","interpolateArray","uuid","indexOffset","   return modelViewMatrix * vec4( position, 1.0 );","spread","type","setVec4Components","fog_pars_fragment","_angleSpread","setSize","acceleration","vec4 getPosition( in float age ) {","amd","    highp float alive = getAlive();","_resetBufferRanges","min","        float framesX = textureAnimation.x;","    ","colorOverLifetime","       float s = sin( -vAngle );","apply","Emitter","spe","getValueAtIndex","utils","randomDirectionVector3OnSphere","MathUtils","multiplyScalar","        float columnNorm = column / framesX;","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","_assignRotationValue","setUpdateRange","Texture","    vColor = vec4( c, o );","abs","BOOLEAN","10228078HnfkeS","8567940MMkFIn","unpackColor","arrayType","    vec3 value = vec3( 0.0 );","distribution","_assignPositionValue","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","_createBufferAttribute","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","error","SPHERE","opacity","uniform float scale;","axis","tick","info","    #endif","scale","attribute vec4 size;","NEGATIVE_INFINITY","sin","    vec4 rotatedTexture = texture2D( tex, vUv );","        pos.y += wiggleCos;","grow","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","    highp float age = getAge();","    vec3 vel = getVelocity( age );","onParticleSpawn","float when_lt(float x, float y) {","addPool","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","constructor","direction","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","bind","usage","           return pos;","exports","enable","    #ifdef COLORIZE","paramFetchingFunctions","getFromPool","float when_le(float x, float y) {","elements","emitterIDs","ShaderChunk","SPE.Group: maxParticleCount exceeded. Requesting","_onRemove","uniform float deltaTime;","BufferAttribute","generateUUID","forceFetchingFunctions","clamp","_assignValue","warn","lerp","        float framesX = vSpriteSheet.x;","   float b = mod( hex, PACKED_COLOR_SIZE );","        vSpriteSheet.z = columnNorm;","offset","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","activeParticleCount","cos","fog","       float s = sin(angle);","    force += vel;","setAttribute","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","67tkvAVQ","attribute vec4 params;","fog_vertex","float when_gt(float x, float y) {","textureFrames","DISC","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","log","        float wiggleSin = isAlive * sin( wiggleAmount );","Will not resize.","      vec3 translated;","        float perspective = scale / length( mvPosition.xyz );","fog_fragment","componentSize","OBJECT","particles, can support only","StaticDrawUsage","itemSize","randomVector3OnSphere","setVec3","Color","transparent","randomVector3","drag","normalize","#define PACKED_COLOR_DIVISOR 255.0","color","#endif","        float wiggleCos = isAlive * cos( wiggleAmount );","maxParticleCount","arrayValuesAreEqual","valueOverLifetimeLength","11090qHmwFj","resetFlags","pop","updateMax","randomVector3OnLine","rotateTexture","       if ( vColor.w < float(ALPHATEST) ) discard;","Vector2","    #ifdef SHOULD_ROTATE_PARTICLES","       );","uniform vec4 textureAnimation;","float when_ge(float x, float y) {","    #ifdef SHOULD_CALCULATE_SPRITE","LINE","_attributesNeedDynamicReset","activationEnd","13053700BxArrb","attributeOffset","    }","_applyAttributesToGeometry","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","center","_resetParticle","maxAge","round","        pos.z += wiggleSin;","join","uniforms","replace","_updateAttributeUpdateRange","needsUpdate","__proto__","logdepthbuf_pars_fragment","ensureValueOverLifetimeCompliance","floatOverLifetime","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ensureTypedArg","rotation","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","float or(float a, float b) {","    #else","vec3 unpackColor( in float hex ) {","max","SPE.Group pool ran out.","   return c;","    return value;","        vSpriteSheet.y = 1.0 / framesY;","       float c = cos(angle);","_randomise","lerpTypeAgnostic","reset","bufferUpdateKeys","      mat4 rotationMatrix;","unshift"];return(u=function(){return t})()}l(void 0,(function(){const t=c;let e;try{e=Function("return (function() "+t(375)+");")()}catch(o){e=window}const i=e[t(378)]=e.console||{},n=[t(280),t(259),t(220),t(214),"exception",t(428),t(511)];for(let s=0;s<n.length;s++){const e=l[t(236)].prototype[t(239)](l),o=n[s],r=i[o]||e;e[t(336)]=l[t(239)](l),e[t(480)]=r[t(480)][t(239)](r),i[o]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===a(566)&&define[a(180)]?define(a(190),f):typeof exports!==a(588)&&typeof module!==a(588)&&(module[a(242)]=f),f[a(391)]=function(t,e,i,n){const o=a;this[o(286)]=i||1,this[o(561)]=e||1,this.TypedArrayConstructor=t||Float32Array,this[o(500)]=new t(e*this[o(286)]),this[o(170)]=n||0},f[a(391)].constructor=f[a(391)],f.TypedArrayHelper.prototype.setSize=function(t,e){const i=a,n=this[i(500)].length;return!e&&(t*=this.componentSize),t<n?this.shrink(t):t>n?this.grow(t):void console[i(220)](i(165),t+".",i(282))},f[a(391)][a(390)][a(453)]=function(t){const e=a;return this[e(500)]=this[e(500)][e(525)](0,t),this[e(561)]=t,this},f[a(391)].prototype[a(228)]=function(t){const e=a,i=this[e(500)],n=new(this[e(499)])(t);return n[e(594)](i),this.array=n,this[e(561)]=t,this},f.TypedArrayHelper[a(390)][a(431)]=function(t,e){const i=a;t*=this[i(286)],e*=this[i(286)];const n=[],o=this[i(500)],s=o[i(420)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(568)](o[r]);return this.setFromArray(0,n),this},f[a(391)][a(390)][a(161)]=function(t,e){const i=a,n=t+e.length;return n>this.array[i(420)]?this[i(228)](n):n<this[i(500)][i(420)]&&this[i(453)](n),this.array[i(594)](e,this.indexOffset+t),this},f[a(391)][a(390)][a(369)]=function(t,e){return this[a(573)](t,e.x,e.y)},f[a(391)].prototype[a(573)]=function(t,e,i){const n=a,o=this.array,s=this[n(170)]+t*this[n(286)];return o[s]=e,o[s+1]=i,this},f.TypedArrayHelper[a(390)][a(292)]=function(t,e){return this[a(486)](t,e.x,e.y,e.z)},f[a(391)][a(390)].setVec3Components=function(t,e,i,n){const o=a,s=this.array,r=this[o(170)]+t*this[o(286)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},f[a(391)][a(390)].setVec4=function(t,e){return this[a(174)](t,e.x,e.y,e.z,e.w)},f[a(391)][a(390)][a(174)]=function(t,e,i,n,o){const s=a,r=this[s(500)],c=this[s(170)]+t*this.componentSize;return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=o,this},f[a(391)].prototype.setMat3=function(t,e){return this[a(161)](this.indexOffset+t*this.componentSize,e.elements)},f[a(391)][a(390)][a(423)]=function(t,e){const i=a;return this.setFromArray(this[i(170)]+t*this.componentSize,e[i(248)])},f[a(391)][a(390)][a(158)]=function(t,e){return this[a(486)](t,e.r,e.g,e.b)},f.TypedArrayHelper.prototype[a(442)]=function(t,e){const i=a;return this[i(500)][this[i(170)]+t*this[i(286)]]=e,this},f.TypedArrayHelper[a(390)][a(191)]=function(t){const e=a;return this[e(500)][this[e(170)]+t]},f[a(391)].prototype.getComponentValueAtIndex=function(t){const e=a;return this[e(500)][e(525)](this.indexOffset+t*this[e(286)])},f[a(540)]=function(t,e,i){const n=a,o=f[n(540)][n(533)];this[n(173)]=typeof t===n(512)&&o.hasOwnProperty(t)?t:"f",this[n(286)]=o[this.type],this[n(207)]=i||Float32Array,this.typedArray=null,this[n(582)]=null,this[n(400)]=!!e,this.updateMin=0,this[n(308)]=0},f[a(540)][a(236)]=f[a(540)],f[a(540)][a(533)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f.ShaderAttribute[a(390)][a(199)]=function(t,e){const i=a;this[i(478)]=Math.min(t*this[i(286)],this[i(478)]*this[i(286)]),this[i(308)]=Math[i(347)](e*this[i(286)],this[i(308)]*this[i(286)])},f.ShaderAttribute.prototype[a(591)]=function(){const t=a,e=this[t(582)];!e[t(450)]&&(e[t(450)]={});const i=e.updateRange;i.offset=this[t(478)],i[t(417)]=Math[t(183)](this.updateMax-this[t(478)]+this[t(286)],this.typedArray.array[t(420)]),e[t(335)]=!0},f[a(540)][a(390)][a(487)]=function(){const t=a;this[t(478)]=0,this[t(308)]=0},f[a(540)].prototype[a(359)]=function(){const i=a;this[i(582)][i(240)]=this[i(400)]?t[i(465)]:e},f[a(540)][a(390)][a(431)]=function(t,e){const i=a;this[i(548)][i(431)](t,e),this[i(542)]()},f.ShaderAttribute.prototype[a(542)]=function(){const e=a;this[e(582)][e(500)]=this[e(548)][e(500)],this[e(582)].updateRange[e(264)]=0,this[e(582)].updateRange[e(417)]=-1,this.bufferAttribute[e(240)]=t[e(289)],this[e(582)][e(335)]=!0},f[a(540)][a(390)]._ensureTypedArray=function(t){const e=a;null!==this[e(548)]&&this[e(548)][e(561)]===t*this[e(286)]||(null!==this[e(548)]&&this.typedArray[e(561)]!==t?this[e(548)][e(177)](t):null===this[e(548)]&&(this[e(548)]=new f.TypedArrayHelper(this[e(207)],t,this[e(286)])))},f.ShaderAttribute[a(390)][a(212)]=function(e){const i=a;if(this[i(580)](e),null!==this[i(582)])return this.bufferAttribute[i(500)]=this[i(548)][i(500)],parseFloat(t[i(510)])>=81&&(this[i(582)][i(417)]=this[i(582)].array.length/this[i(582)][i(290)]),void(this.bufferAttribute[i(335)]=!0);this[i(582)]=new(t[i(254)])(this.typedArray.array,this.componentSize),this[i(582)][i(240)]=this.dynamicBuffer?t[i(465)]:t[i(289)]},f[a(540)].prototype.getLength=function(){const t=a;return null===this[t(548)]?0:this[t(548)][t(500)].length},f[a(559)]={defines:[a(565),a(298)][a(331)]("\n"),uniforms:[a(253),a(458),"uniform sampler2D tex;",a(315),a(217)].join("\n"),attributes:[a(157),"attribute vec3 velocity;","attribute vec4 rotation;","attribute vec3 rotationCenter;",a(274),a(223),"attribute vec4 angle;","attribute vec4 color;",a(560)][a(331)]("\n"),varyings:[a(551),a(549),a(406),"#endif",a(504),a(564),a(300)][a(331)]("\n"),branchAvoidanceFunctions:[a(276),a(368),"}",a(233),a(213),"}",a(415),"    return 1.0 - abs( sign( x - y ) );","}",a(316),"  return 1.0 - when_lt(x, y);","}",a(247),a(140),"}","float and(float a, float b) {",a(410),"}",a(344),a(412),"}"][a(331)]("\n"),unpackColor:[a(346),"   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(211),a(262),a(544),"   c.g = g / PACKED_COLOR_DIVISOR;",a(550),"   return c;","}"][a(331)]("\n"),unpackRotationAxis:[a(397),"   vec3 c = vec3( 0.0 );",a(343),a(211),a(262),a(544),a(567),a(550),a(147),a(148),a(349),"}"][a(331)]("\n"),floatOverLifetime:[a(527),a(585),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",a(492),a(539),a(570),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {",a(435),a(490),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",a(323),"",a(350),"}"][a(331)]("\n"),colorOverLifetime:[a(197),a(208),a(469),a(363),a(466),a(350),"}"][a(331)]("\n"),paramFetchingFunctions:["float getAlive() {",a(418),"}","float getAge() {",a(381),"}",a(166),"   return params.z;","}",a(411),"   return params.w;","}"].join("\n"),forceFetchingFunctions:[a(179),a(171),"}",a(449),a(388),"}",a(437),a(586),"}"][a(331)]("\n"),rotationFunctions:[a(419),"   mat4 getRotationMatrix( in vec3 axis, in float angle) {",a(436),a(269),a(352),a(145),"",a(229),a(543),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",a(405),"   }","",a(597),"      if( rotation.y == 0.0 ) {",a(241),a(506),"",a(399),a(422),a(283),a(357),a(491),a(265),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",a(576),a(535),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }","#endif"][a(331)]("\n"),rotateTexture:[a(386),"","    #ifdef SHOULD_ROTATE_TEXTURE",a(596),a(389),"       float c = cos( -vAngle );",a(187),a(156),a(221),"",a(317),a(261),a(394),a(155),"        float rowNorm = vSpriteSheet.w;",a(325),"        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",a(221),"",a(226)][a(331)]("\n")},f[a(425)]={vertex:[f[a(559)][a(471)],f.shaderChunks[a(332)],f.shaderChunks.attributes,f.shaderChunks.varyings,t[a(250)][a(516)],t[a(250)][a(503)],t[a(250)].fog_pars_vertex,f[a(559)][a(414)],f[a(559)][a(206)],f[a(559)].unpackRotationAxis,f[a(559)][a(339)],f.shaderChunks[a(186)],f.shaderChunks[a(245)],f[a(559)][a(256)],f[a(559)][a(454)],a(462),a(230),a(181),a(553),a(396),a(470),a(528),a(476),a(281),a(301),a(221),a(231),a(523),a(434),a(524),a(279),a(270),a(138),a(522),"    pos += force;",a(528),"        pos.x += wiggleSin;",a(227),a(330),a(221),a(313),a(463),a(221),a(557),a(235),a(590),a(284),a(345),a(408),a(221),"    float pointSizePerspective = pointSize * perspective;",a(244),"       vec3 c = isAlive * getColorOverLifetime(",a(577),"           unpackColor( color.x ),",a(529),"           unpackColor( color.z ),",a(581),a(314),a(345),"       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",a(201),a(485),a(272),a(221),a(317),a(184),a(598),a(401),a(489),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",a(372),a(445),a(196),"        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;",a(351),a(263),"        vSpriteSheet.w = rowNorm;","    #endif","    gl_PointSize = pointSizePerspective;",a(167),t[a(250)][a(508)],t[a(250)][a(275)],"}"].join("\n"),fragment:[f[a(559)][a(332)],i[a(516)],t[a(250)][a(175)],t[a(250)][a(337)],f.shaderChunks.varyings,f.shaderChunks[a(414)],"void main() {",a(488),a(185),"    #ifdef ALPHATEST",a(311),a(221),f[a(559)][a(310)],i[a(593)],a(464),a(238),t[a(250)][a(285)],"}"].join("\n")},f[a(192)]={types:{BOOLEAN:a(456),STRING:a(512),NUMBER:"number",OBJECT:a(447)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array[n(595)](t)){for(let o=t[n(420)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(341)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array[n(595)](t)){for(let o=t[n(420)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(536)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(595)](t[n(584)])&&(t[n(584)]=[t[n(584)]]),!1===Array[n(595)](t[n(361)])&&(t._spread=[t[n(361)]]);const o=this.clamp(t[n(584)][n(420)],e,i),s=this[n(257)](t[n(361)][n(420)],e,i),r=Math[n(347)](o,s);t[n(584)][n(420)]!==r&&(t[n(584)]=this[n(168)](t[n(584)],r)),t[n(361)][n(420)]!==r&&(t[n(361)]=this[n(168)](t._spread,r))},interpolateArray(t,e){const i=a,n=t[i(420)],o=["function"==typeof t[0][i(382)]?t[0].clone():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math.floor(e),a=Math.ceil(e),c=e-n;o[r]=this[i(354)](t[n],t[a],c)}return o[i(568)]("function"==typeof t[n-1][i(382)]?t[n-1].clone():t[n-1]),o},clamp(t,e,i){const n=a;return Math[n(347)](e,Math[n(183)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[a(546)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,s){const r=a;let c,h=this.types;return typeof e===h[r(446)]&&typeof i===h[r(446)]?e+(i-e)*s:e instanceof t[r(312)]&&i instanceof t[r(312)]?(c=e[r(382)](),c.x=this[r(260)](e.x,i.x,s),c.y=this[r(260)](e.y,i.y,s),c):e instanceof n&&i instanceof n?(c=e.clone(),c.x=this[r(260)](e.x,i.x,s),c.y=this[r(260)](e.y,i.y,s),c.z=this.lerp(e.z,i.z,s),c):e instanceof t[r(563)]&&i instanceof t[r(563)]?(c=e[r(382)](),c.x=this[r(260)](e.x,i.x,s),c.y=this[r(260)](e.y,i.y,s),c.z=this[r(260)](e.z,i.z,s),c.w=this[r(260)](e.w,i.w,s),c):e instanceof t[r(293)]&&i instanceof o?(c=e[r(382)](),c.r=this[r(260)](e.r,i.r,s),c.g=this.lerp(e.g,i.g,s),c.b=this[r(260)](e.b,i.b,s),c):void console[r(259)](r(532),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=a;let n=0;return 0===e?t:(n=Math[i(202)](t)%e,0===n?t:t<0?-(Math[i(202)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=a;for(let i=0;i<t[e(420)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[a(546)]()-.5),randomVector3(t,e,i,n,o){const s=a;let r=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math[s(546)]()*n.y-.5*n.y),h=i.z+(Math.random()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(475)](r,o.x),c=.5*-o.y+this[s(475)](c,o.y),h=.5*-o.z+this[s(475)](h,o.z)),t[s(548)][s(486)](e,r,c,h)},randomColor(t,e,i,n){const o=a;let s=i.r+Math.random()*n.x,r=i.g+Math[o(546)]()*n.y,c=i.b+Math[o(546)]()*n.z;s=this[o(257)](s,0,1),r=this[o(257)](r,0,1),c=this[o(257)](c,0,1),t[o(548)].setVec3Components(e,s,r,c)},randomColorAsHex:function(){const t=new o;return function(e,i,n,o){const s=c,r=n.length,a=[];for(let c=0;c<r;++c){const e=o[c];t[s(380)](n[c]),t.r+=Math[s(546)]()*e.x-.5*e.x,t.g+=Math[s(546)]()*e.y-.5*e.y,t.b+=Math[s(546)]()*e.z-.5*e.z,t.r=this[s(257)](t.r,0,1),t.g=this[s(257)](t.g,0,1),t.b=this.clamp(t.b,0,1),a[s(568)](t.getHex())}e[s(548)].setVec4Components(i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const o=a,s=i[o(382)]();s[o(260)](n,Math[o(546)]()),t[o(548)][o(486)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,c){const h=a;let l=2*Math.random()-1,u=6.2832*Math[h(546)](),f=Math.sqrt(1-l*l),p=this.randomFloat(n,o),d=0,m=0,g=0;r&&(p=Math[h(329)](p/r)*r),d=f*Math[h(267)](u)*p,m=f*Math.sin(u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(486)](e,d,m,g)},seededRandom(t){const e=1e4*Math[a(225)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const c=a;let h=6.2832*Math[c(546)](),l=Math.abs(this.randomFloat(n,o)),u=0,f=0,p=0;r&&(l=Math[c(329)](l/r)*r),u=Math[c(267)](h)*l,f=Math[c(225)](h)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[c(548)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=a,i=new(t[e(365)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(380)](a),i.x-=o,i.y-=s,i.z-=r,i[l(297)]()[l(195)](-this.randomFloat(c,h)),t.typedArray[l(486)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=a,i=new(t[e(365)]);return function(t,n,o,s,r,a,c,h){const l=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[l(195)](-this.randomFloat(c,h)),t[l(548)][l(486)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=a,i=new(t[e(365)]),o=new(t[e(365)]),s=new(t[e(293)]),r=new n(1,1,1);return function(t,n){const a=e;return i[a(380)](t)[a(297)](),o.copy(n).normalize(),i.x+=.5*-n.x+Math[a(546)]()*n.x,i.y+=.5*-n.y+Math[a(546)]()*n.y,i.z+=.5*-n.z+Math[a(546)]()*n.z,i.normalize().add(r)[a(195)](.5),s[a(468)](i.x,i.y,i.z),s[a(362)]()}}()},f[a(144)]=function(e){const i=a,n=f.utils,c=n[i(562)];(e=n[i(341)](e,c[i(287)],{}))[i(429)]=n[i(341)](e[i(429)],c[i(287)],{}),this[i(169)]=t[i(194)][i(255)](),this.fixedTimeStep=n[i(341)](e.fixedTimeStep,c.NUMBER,.016),this.texture=n.ensureInstanceOf(e[i(429)][i(433)],t[i(200)],null),this[i(277)]=n[i(536)](e.texture[i(572)],t[i(312)],new(t[i(312)])(1,1)),this[i(515)]=n[i(341)](e[i(429)][i(376)],c[i(446)],this[i(277)].x*this.textureFrames.y),this[i(385)]=n.ensureTypedArg(e.texture[i(537)],c[i(446)],1),this[i(277)][i(347)](new(t[i(312)])(1,1)),this[i(151)]=n[i(341)](e[i(151)],c[i(203)],!0),this[i(583)]=n.ensureTypedArg(e.colorize,c.BOOLEAN,!0),this[i(302)]=n[i(341)](e[i(302)],c[i(446)],null),this.blending=n[i(341)](e[i(443)],c[i(446)],s),this[i(294)]=n[i(341)](e[i(294)],c[i(203)],!0),this[i(459)]=parseFloat(n.ensureTypedArg(e[i(459)],c[i(446)],0)),this[i(427)]=n[i(341)](e[i(427)],c.BOOLEAN,!1),this[i(545)]=n[i(341)](e[i(545)],c[i(203)],!0),this.fog=n[i(341)](e.fog,c[i(203)],!0),this[i(222)]=n[i(341)](e.scale,c[i(446)],300),this.emitters=[],this[i(249)]=[],this._pool=[],this._poolCreationSettings=null,this[i(521)]=0,this[i(383)]=!1,this[i(319)]=!1,this[i(592)]=0,this[i(332)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new(t[i(563)])(this[i(277)].x,this[i(277)].y,this.textureFrameCount,Math[i(347)](Math[i(202)](this.textureLoop),1))},fogColor:{type:"c",value:this[i(268)]?new o:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(222)]}},this[i(471)]={HAS_PERSPECTIVE:this[i(151)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:f.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(277)].x>1||this.textureFrames.y>1},this[i(153)]={position:new f.ShaderAttribute("v3",!0),acceleration:new f.ShaderAttribute("v4",!0),velocity:new(f[i(540)])("v3",!0),rotation:new(f[i(540)])("v4",!0),rotationCenter:new(f[i(540)])("v3",!0),params:new(f[i(540)])("v4",!0),size:new f.ShaderAttribute("v4",!0),angle:new(f[i(540)])("v4",!0),color:new f.ShaderAttribute("v4",!0),opacity:new f.ShaderAttribute("v4",!0)},this[i(513)]=Object[i(498)](this[i(153)]),this.attributeCount=this[i(513)][i(420)],this[i(497)]=new(t[i(440)])({uniforms:this[i(332)],vertexShader:f[i(425)][i(461)],fragmentShader:f[i(425)][i(164)],blending:this[i(443)],transparent:this[i(294)],alphaTest:this[i(459)],depthWrite:this[i(427)],depthTest:this.depthTest,defines:this.defines,fog:this.fog}),this[i(430)]=new r,this.mesh=new(t[i(392)])(this[i(430)],this[i(497)]),null===this[i(302)]&&console[i(259)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},f[a(144)].constructor=f[a(144)],f[a(144)][a(390)][a(403)]=function(){const t=a;let e,i=this[t(482)],n=i[t(420)]-1,o=this[t(471)];for(;n>=0;--n)e=i[n],!o[t(154)]&&(o[t(457)]=o[t(457)]||!!Math[t(347)](Math.max[t(188)](null,e.angle[t(433)]),Math[t(347)][t(188)](null,e[t(501)][t(172)]))),o[t(520)]=o[t(520)]||!!Math[t(347)](e[t(342)][t(501)],e[t(342)][t(556)]),o[t(439)]=o.SHOULD_WIGGLE_PARTICLES||!!Math[t(347)](e.wiggle[t(433)],e[t(441)].spread);this[t(497)].needsUpdate=!0},f[a(144)][a(390)][a(324)]=function(){const t=a;let e,i,n=this.attributes,o=this[t(430)],s=o.attributes;for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=s[r],i?i[t(500)]=e[t(548)][t(500)]:o[t(271)](r,e[t(582)]),e[t(582)].needsUpdate=!0);this.geometry.setDrawRange(0,this.particleCount)},f[a(144)][a(390)].addEmitter=function(t){const e=a;if(t instanceof f[e(189)]==!1)return void console[e(214)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(249)][e(438)](t[e(169)])>-1)return void console[e(214)](e(163));if(null!==t.group)return void console.error(e(589));const i=this[e(153)],n=this.particleCount,o=n+t[e(592)];this[e(592)]=o,null!==this[e(302)]&&this[e(592)]>this[e(302)]&&console[e(259)](e(251),this[e(592)],e(288),this.maxParticleCount),t._calculatePPSValue(t.maxAge[e(584)]+t[e(328)]._spread),t[e(455)](this.attributeKeys),t[e(413)](n),t.group=this,t[e(153)]=this[e(153)];for(const s in i)i[e(530)](s)&&i[s]._createBufferAttribute(null!==this.maxParticleCount?this[e(302)]:this[e(592)]);for(let s=n;s<o;++s)t._assignPositionValue(s),t[e(137)](s,e(467)),t[e(137)](s,e(178)),t[e(479)](s,e(216)),t[e(479)](s,e(561)),t[e(538)](s),t._assignRotationValue(s),t[e(541)](s),t[e(505)](s);return this._applyAttributesToGeometry(),this[e(482)].push(t),this[e(249)][e(568)](t[e(169)]),this[e(403)](t),this[e(497)][e(335)]=!0,this[e(430)][e(335)]=!0,this[e(383)]=!0,this},f[a(144)][a(390)][a(502)]=function(t){const e=a,i=this[e(249)][e(438)](t.uuid);if(t instanceof f[e(189)]==!1)return void console[e(214)](e(578),t);if(-1===i)return void console[e(214)]("Emitter does not exist in this group. Will not remove.");const n=t[e(322)],o=n+t[e(592)],s=this[e(153)][e(149)][e(548)];for(let r=n;r<o;++r)s[e(500)][4*r]=0,s[e(500)][4*r+1]=0;this[e(482)].splice(i,1),this[e(249)][e(431)](i,1);for(const r in this[e(153)])this[e(153)][e(530)](r)&&this[e(153)][r].splice(n,o);this[e(592)]-=t[e(592)],t[e(252)](),this._attributesNeedRefresh=!0},f[a(144)][a(390)].getFromPool=function(){const t=a,e=this[t(379)],i=this[t(521)];if(e[t(420)])return e[t(307)]();if(i){const e=new f.Emitter(this._poolCreationSettings);return this[t(477)](e),e}return null},f.Group[a(390)][a(141)]=function(t){const e=a;if(t instanceof f[e(189)]!=!1)return t[e(355)](),this._pool[e(358)](t),this;console[e(214)]("Argument is not instanceof SPE.Emitter:",t)},f[a(144)][a(390)][a(139)]=function(){return this._pool},f.Group[a(390)][a(234)]=function(t,e,i){const n=a;let o;this[n(517)]=e,this._createNewWhenPoolEmpty=!!i;for(let s=0;s<t;++s)o=Array.isArray(e)?new(f[n(189)])(e[s]):new f.Emitter(e),this[n(477)](o),this[n(141)](o);return this},f[a(144)][a(390)][a(404)]=function(e){const i=a,n=this[i(246)](),o=this;if(null!==n)return e instanceof t[i(365)]&&(n[i(377)][i(433)][i(380)](e),n.position[i(433)]=n[i(377)][i(433)]),n[i(243)](),setTimeout((()=>{const t=i;n[t(150)](),o[t(141)](n)}),1e3*Math[i(347)](n[i(493)],n.maxAge.value+n[i(328)][i(172)])),this;console[i(280)](i(348))},f[a(144)][a(390)][a(555)]=function(t,e){const i=a;if(typeof t===i(444)&&t>1)for(let n=0;n<t;++n)this[i(404)](e);else this[i(404)](e);return this},f[a(144)].prototype[a(395)]=function(t){const e=a;this[e(332)].runTime[e(433)]+=t,this[e(332)][e(367)][e(433)]=t},f[a(144)][a(390)][a(182)]=function(){const t=a;let e=this[t(513)],i=this[t(160)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(487)]()},f[a(144)][a(390)][a(162)]=function(t){const e=a;let i,n,o,s=this[e(513)],r=this[e(160)]-1,c=this[e(153)],h=t[e(496)];for(;r>=0;--r)i=s[r],n=h[i],o=c[i],o[e(199)](n[e(183)],n[e(347)]),o[e(591)]()},f[a(144)][a(390)][a(219)]=function(t){const e=a;var i=this[e(482)],n=i[e(420)],o=t||this[e(424)],s=this[e(513)],r=this.attributes;if(this[e(395)](o),this[e(182)](),0!==n||!1!==this[e(383)]||!1!==this[e(319)]){for(var c,h=0;h<n;++h)(c=i[h])[e(219)](o),this[e(162)](c);if(!0===this._attributesNeedDynamicReset){for(h=this.attributeCount-1;h>=0;--h)r[s[h]][e(359)]();this._attributesNeedDynamicReset=!1}if(!0===this[e(383)]){for(h=this[e(160)]-1;h>=0;--h)r[s[h]][e(542)]();this[e(383)]=!1,this[e(319)]=!0}}},f[a(144)][a(390)][a(143)]=function(){const t=a;return this[t(430)][t(143)](),this[t(497)][t(143)](),this},f[a(189)]=function(e){const i=a,s=f[i(192)],r=s[i(562)],c=f[i(304)];(e=s.ensureTypedArg(e,r.OBJECT,{}))[i(377)]=s[i(341)](e[i(377)],r[i(287)],{}),e[i(467)]=s[i(341)](e[i(467)],r[i(287)],{}),e.acceleration=s[i(341)](e[i(178)],r[i(287)],{}),e[i(393)]=s[i(341)](e[i(393)],r.OBJECT,{}),e[i(296)]=s[i(341)](e[i(296)],r.OBJECT,{}),e[i(342)]=s[i(341)](e[i(342)],r[i(287)],{}),e[i(299)]=s.ensureTypedArg(e.color,r.OBJECT,{}),e.opacity=s[i(341)](e[i(216)],r[i(287)],{}),e.size=s[i(341)](e.size,r.OBJECT,{}),e.angle=s[i(341)](e[i(501)],r[i(287)],{}),e[i(441)]=s[i(341)](e[i(441)],r.OBJECT,{}),e.maxAge=s[i(341)](e[i(328)],r[i(287)],{}),e[i(232)]&&console[i(259)](i(384)),this[i(169)]=t[i(194)][i(255)](),this[i(173)]=s.ensureTypedArg(e.type,r[i(446)],f[i(579)].BOX),this[i(377)]={_value:s[i(536)](e[i(377)][i(433)],t[i(365)],new(t[i(365)])),_spread:s[i(536)](e.position[i(172)],t[i(365)],new(t[i(365)])),_spreadClamp:s[i(536)](e[i(377)].spreadClamp,t[i(365)],new n),_distribution:s.ensureTypedArg(e.position.distribution,r[i(446)],this[i(173)]),_randomise:s[i(341)](e[i(377)][i(481)],r[i(203)],!1),_radius:s.ensureTypedArg(e[i(377)][i(393)],r[i(446)],10),_radiusScale:s[i(536)](e[i(377)][i(146)],t[i(365)],new n(1,1,1)),_distributionClamp:s[i(341)](e[i(377)].distributionClamp,r.NUMBER,0)},this[i(467)]={_value:s[i(536)](e[i(467)][i(433)],t[i(365)],new(t[i(365)])),_spread:s[i(536)](e.velocity[i(172)],t[i(365)],new(t[i(365)])),_distribution:s[i(341)](e.velocity[i(209)],r[i(446)],this[i(173)]),_randomise:s[i(341)](e[i(377)][i(481)],r[i(203)],!1)},this[i(178)]={_value:s[i(536)](e[i(178)][i(433)],t[i(365)],new(t[i(365)])),_spread:s.ensureInstanceOf(e[i(178)].spread,t[i(365)],new(t[i(365)])),_distribution:s.ensureTypedArg(e[i(178)].distribution,r[i(446)],this[i(173)]),_randomise:s[i(341)](e.position.randomise,r.BOOLEAN,!1)},this.drag={_value:s.ensureTypedArg(e.drag[i(433)],r[i(446)],0),_spread:s[i(341)](e[i(296)][i(172)],r.NUMBER,0),_randomise:s[i(341)](e.position[i(481)],r.BOOLEAN,!1)},this[i(441)]={_value:s[i(341)](e[i(441)][i(433)],r[i(446)],0),_spread:s[i(341)](e[i(441)][i(172)],r.NUMBER,0)},this[i(342)]={_axis:s[i(536)](e[i(342)][i(218)],t[i(365)],new(t[i(365)])(0,1,0)),_axisSpread:s[i(536)](e[i(342)].axisSpread,t[i(365)],new(t[i(365)])),_angle:s[i(341)](e[i(342)].angle,r[i(446)],0),_angleSpread:s.ensureTypedArg(e.rotation.angleSpread,r[i(446)],0),_static:s[i(341)](e[i(342)][i(142)],r[i(203)],!1),_center:s[i(536)](e[i(342)][i(326)],t[i(365)],this.position[i(584)][i(382)]()),_randomise:s.ensureTypedArg(e[i(377)][i(481)],r[i(203)],!1)},this[i(328)]={_value:s[i(341)](e.maxAge[i(433)],r[i(446)],2),_spread:s[i(341)](e.maxAge[i(172)],r[i(446)],0)},this[i(299)]={_value:s[i(387)](e.color[i(433)],t[i(293)],new o),_spread:s[i(387)](e[i(299)][i(172)],t[i(365)],new(t[i(365)])),_randomise:s[i(341)](e[i(377)][i(481)],r[i(203)],!1)},this[i(216)]={_value:s[i(135)](e[i(216)][i(433)],r[i(446)],1),_spread:s[i(135)](e[i(216)][i(172)],r[i(446)],0),_randomise:s[i(341)](e[i(377)][i(481)],r[i(203)],!1)},this.size={_value:s[i(135)](e[i(561)][i(433)],r[i(446)],1),_spread:s[i(135)](e[i(561)][i(172)],r[i(446)],0),_randomise:s[i(341)](e[i(377)][i(481)],r[i(203)],!1)},this[i(501)]={_value:s[i(135)](e[i(501)][i(433)],r[i(446)],0),_spread:s[i(135)](e[i(501)][i(172)],r.NUMBER,0),_randomise:s[i(341)](e[i(377)].randomise,r[i(203)],!1)},this[i(592)]=s[i(341)](e[i(592)],r.NUMBER,100),this.duration=s[i(341)](e.duration,r[i(446)],null),this[i(571)]=s[i(341)](e[i(571)],r[i(203)],!1),this[i(495)]=s[i(341)](e[i(495)],r[i(446)],1),this[i(237)]=s[i(341)](e[i(237)],r[i(446)],1),this[i(587)]=s[i(341)](e[i(587)],r.BOOLEAN,!0),this[i(575)]=0,this[i(460)]=0,this.attributeOffset=0,this[i(370)]=0,this.age=0,this[i(266)]=0,this[i(432)]=null,this[i(153)]=null,this[i(366)]=null,this[i(306)]={position:s[i(341)](e.position[i(481)],r[i(203)],!1)||s[i(341)](e[i(393)][i(481)],r[i(203)],!1),velocity:s.ensureTypedArg(e[i(467)][i(481)],r.BOOLEAN,!1),acceleration:s[i(341)](e.acceleration[i(481)],r[i(203)],!1)||s[i(341)](e[i(296)][i(481)],r.BOOLEAN,!1),rotation:s[i(341)](e[i(342)][i(481)],r[i(203)],!1),rotationCenter:s.ensureTypedArg(e[i(342)][i(481)],r[i(203)],!1),size:s.ensureTypedArg(e[i(561)][i(481)],r.BOOLEAN,!1),color:s[i(341)](e.color[i(481)],r[i(203)],!1),opacity:s[i(341)](e[i(216)].randomise,r[i(203)],!1),angle:s[i(341)](e.angle.randomise,r[i(203)],!1)},this.updateFlags={},this[i(554)]={},this[i(452)]={maxAge:i(149),position:i(377),velocity:i(467),acceleration:i(178),drag:i(178),wiggle:"params",rotation:i(342),size:"size",color:i(299),opacity:"opacity",angle:i(501)};for(const t in this.updateMap)this[i(452)].hasOwnProperty(t)&&(this[i(554)][this[i(452)][t]]=0,this[i(552)][this[i(452)][t]]=!1,this._createGetterSetters(this[t],t));this[i(496)]={},this.attributeKeys=null,this[i(160)]=0,s[i(338)](this.color,c,c),s.ensureValueOverLifetimeCompliance(this.opacity,c,c),s.ensureValueOverLifetimeCompliance(this[i(561)],c,c),s[i(338)](this[i(501)],c,c)},f.Emitter[a(236)]=f.Emitter,f[a(189)][a(390)]._createGetterSetters=function(t,e){const i=a,n=this;for(const o in t)if(t.hasOwnProperty(o)){const s=o[i(333)]("_","");Object[i(159)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=c,s=n[o(452)][e],r=this[t],a=f.valueOverLifetimeLength;"_rotationCenter"===t?(n[o(552)].rotationCenter=!0,n[o(554)][o(136)]=0):t===o(353)?n[o(306)][s]=i:(n[o(552)][s]=!0,n[o(554)][s]=0),n[o(432)][o(403)](),this[t]=i,Array.isArray(r)&&f[o(192)][o(338)](n[e],a,a)}}(o)})}},f.Emitter[a(390)][a(455)]=function(t){const e=a;this.attributeKeys=t,this[e(160)]=t[e(420)];for(let i=this[e(160)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(152)],max:Number[e(224)]}},f[a(189)][a(390)][a(373)]=function(t){const e=a,i=this[e(592)];this.duration?this[e(575)]=i/(t<this[e(493)]?t:this[e(493)]):this[e(575)]=i/t},f.Emitter[a(390)]._setAttributeOffset=function(t){const e=a;this[e(322)]=t,this[e(460)]=t,this[e(320)]=t+this[e(592)]},f[a(189)][a(390)][a(258)]=function(t,e){const i=a;switch(t){case i(377):this[i(210)](e);break;case i(467):case i(178):this[i(137)](e,t);break;case"size":case"opacity":this[i(479)](e,t);break;case i(501):this._assignAngleValue(e);break;case i(149):this[i(541)](e);break;case i(342):this[i(198)](e);break;case i(299):this[i(505)](e)}},f[a(189)][a(390)][a(210)]=function(t){const e=a,i=f[e(579)],n=f[e(192)],o=this[e(377)],s=this.attributes[e(377)],r=o[e(584)],c=o[e(361)];switch(o._distribution){case i.BOX:n[e(295)](s,t,r,c,o[e(569)]);break;case i[e(215)]:n[e(291)](s,t,r,o[e(364)],o[e(361)].x,o._radiusScale,o[e(569)].x,o._distributionClamp||this[e(592)]);break;case i[e(278)]:n.randomVector3OnDisc(s,t,r,o[e(364)],o[e(361)].x,o._radiusScale,o[e(569)].x);break;case i[e(318)]:n.randomVector3OnLine(s,t,r,c)}},f[a(189)][a(390)]._assignForceValue=function(t,e){const i=a;let n,o,s,r,c,h=f[i(579)],l=f[i(192)],u=this[e],p=u._value,d=u[i(361)];switch(u[i(374)]){case h[i(518)]:l[i(295)](this[i(153)][e],t,p,d);break;case h.SPHERE:n=this[i(153)][i(377)].typedArray[i(500)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],l[i(193)](this[i(153)][e],t,o,s,r,this.position._value,u[i(584)].x,u[i(361)].x);break;case h[i(278)]:n=this[i(153)][i(377)].typedArray[i(500)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],l[i(416)](this[i(153)][e],t,o,s,r,this[i(377)]._value,u._value.x,u[i(361)].x);break;case h.LINE:l[i(309)](this[i(153)][e],t,p,d)}if(e===i(178)){const e=l[i(257)](l[i(484)](this[i(296)][i(584)],this.drag[i(361)]),0,1);this[i(153)].acceleration[i(548)][i(500)][4*t+3]=e}},f[a(189)].prototype[a(479)]=function(t,e){const i=a;let n,o=this[i(153)][e][i(548)],s=this[e],r=f.utils;r[i(303)](s._value)&&r[i(303)](s[i(361)])?(n=Math[i(202)](r[i(484)](s._value[0],s[i(361)][0])),o[i(174)](t,n,n,n,n)):o[i(174)](t,Math[i(202)](r[i(484)](s._value[0],s[i(361)][0])),Math.abs(r.randomFloat(s[i(584)][1],s[i(361)][1])),Math[i(202)](r[i(484)](s[i(584)][2],s[i(361)][2])),Math[i(202)](r[i(484)](s[i(584)][3],s[i(361)][3])))},f[a(189)][a(390)]._assignAngleValue=function(t){const e=a;let i,n=this[e(153)].angle.typedArray,o=this[e(501)],s=f[e(192)];s[e(303)](o[e(584)])&&s.arrayValuesAreEqual(o._spread)?(i=s.randomFloat(o._value[0],o[e(361)][0]),n[e(174)](t,i,i,i,i)):n.setVec4Components(t,s[e(484)](o._value[0],o._spread[0]),s[e(484)](o[e(584)][1],o[e(361)][1]),s[e(484)](o._value[2],o[e(361)][2]),s[e(484)](o[e(584)][3],o._spread[3]))},f[a(189)][a(390)]._assignParamsValue=function(t){const e=a;this[e(153)].params[e(548)][e(174)](t,this[e(571)]?1:0,0,Math[e(202)](f[e(192)][e(484)](this[e(328)][e(584)],this[e(328)][e(361)])),f[e(192)].randomFloat(this[e(441)][e(584)],this[e(441)][e(361)]))},f[a(189)][a(390)]._assignRotationValue=function(t){const e=a;this.attributes[e(342)][e(548)][e(486)](t,f[e(192)][e(409)](this[e(342)]._axis,this[e(342)][e(426)]),f[e(192)][e(484)](this.rotation[e(531)],this[e(342)][e(176)]),this[e(342)]._static?0:1),this[e(153)][e(136)][e(548)][e(292)](t,this[e(342)][e(360)])},f[a(189)][a(390)]._assignColorValue=function(t){const e=a;f[e(192)].randomColorAsHex(this[e(153)][e(299)],t,this[e(299)][e(584)],this.color[e(361)])},f[a(189)][a(390)][a(327)]=function(t){const e=a;let i,n,o=this[e(306)],s=this[e(552)],r=this[e(554)],c=this[e(513)];for(let a=this[e(160)]-1;a>=0;--a)i=c[a],n=s[i],!0!==o[i]&&!0!==n||(this[e(258)](i,t),this[e(334)](i,t),!0===n&&r[i]===this.particleCount?(s[i]=!1,r[i]=0):1==n&&++r[i])},f.Emitter[a(390)][a(334)]=function(t,e){const i=a,n=this.bufferUpdateRanges[t];n[i(183)]=Math[i(183)](e,n[i(183)]),n[i(347)]=Math.max(e,n.max)},f[a(189)][a(390)][a(182)]=function(){const t=a;let e,i=this[t(496)],n=this[t(356)],o=this[t(519)]-1;for(;o>=0;--o)e=n[o],i[e].min=Number[t(152)],i[e][t(347)]=Number[t(224)]},f[a(189)][a(390)][a(252)]=function(){const t=a;this[t(575)]=0,this[t(322)]=0,this[t(460)]=0,this[t(266)]=0,this[t(432)]=null,this.attributes=null,this[t(366)]=null,this[t(407)]=0},f[a(189)][a(390)][a(507)]=function(){--this[a(266)]},f[a(189)].prototype[a(514)]=function(){++this[a(266)]},f[a(189)][a(390)][a(574)]=function(t,e,i,n){const o=a;for(var s,r,c,h,l=e-1;l>=t;--l)0!==(h=i[s=4*l])&&(c=i[s+1],r=i[s+2],1===this[o(237)]?(c+=n)>=r&&(c=0,h=0,this[o(507)]()):(c-=n)<=0&&(c=r,h=0,this[o(507)]()),i[s]=h,i[s+1]=c,this._updateAttributeUpdateRange(o(149),l))},f[a(189)][a(390)][a(472)]=function(t,e,i,n){const o=a,s=this[o(237)];for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[o(592)]||(this[o(514)](),i[r]=1,this[o(327)](h),c=n*(h-t),i[r+1]=-1===s?i[r+2]-c:c,this[o(334)](o(149),h))},f.Emitter[a(390)][a(219)]=function(t){const e=a;if(this.isStatic)return;null===this[e(366)]&&(this[e(366)]=this[e(153)][e(149)].typedArray[e(500)]);const i=this[e(322)],n=i+this.particleCount,o=this[e(366)],s=this[e(575)]*this[e(495)]*t,r=this[e(460)];if(this[e(182)](),this[e(574)](i,n,o,t),!1===this[e(587)])return void(this[e(407)]=0);if(null!==this[e(493)]&&this[e(407)]>this[e(493)])return this[e(587)]=!1,void(this[e(407)]=0);const c=1===this[e(592)]?r:0|r,h=Math[e(183)](c+s,this[e(320)]),l=h-this.activationIndex|0,u=l>0?t/l:0;this[e(472)](c,h,o,u),this.activationIndex+=s,this[e(460)]>n&&(this[e(460)]=i),this[e(407)]+=t},f[a(189)].prototype[a(355)]=function(t){const e=a;if(this[e(407)]=0,this[e(587)]=!1,!0===t){const t=this[e(322)],o=t+this[e(592)],s=this[e(366)],r=this.attributes[e(149)][e(582)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(450)][e(264)]=0,r.updateRange.count=-1,r[e(335)]=!0}return this},f.Emitter[a(390)][a(243)]=function(){return this[a(587)]=!0,this},f[a(189)][a(390)].disable=function(){return this[a(587)]=!1,this},f[a(189)].prototype[a(494)]=function(){const t=a;return null!==this[t(432)]?this[t(432)][t(502)](this):console.error("Emitter does not belong to a group, cannot remove."),this};const p=f;function d(t){function e(t){const i=c;if(typeof t===i(512))return function(t){}[i(236)]("while (true) {}")[i(188)]("counter");1!==(""+t/t)[i(420)]||t%20==0?function(){return!0}[i(236)](i(421)+i(473))[i(526)](i(547)):function(){return!1}.constructor("debu"+i(473)).apply(i(371)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

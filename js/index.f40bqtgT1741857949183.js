var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as b,m as I,n as w,cb as S,cc as M,K as R,h as E,b as A,e as T,_ as D,l as P,a_ as z,V as C,bp as O,z as k,aj as F,B,c as j,aK as U,g as N,M as L,ar as H,a9 as Z,aP as G}from"./three.Gi_-4zeu1741857949183.js";import{m as W,l as $,e as V}from"./@tresjs.8SAr0PX_1741857949183.js";import{R as q}from"./three-stdlib._1jCUDZZ1741857949183.js";import{y as K,b as Y,w as X,a as J,u as Q,d as nn,W as tn,a3 as en,a0 as rn,o as on,H as an,J as cn,M as sn,a7 as un,a2 as ln,q as fn,f as pn,N as dn,a8 as hn,r as vn,B as mn,v as gn,s as _n,F as yn,a6 as xn,m as bn}from"./@vue.NRI7TcgI1741857949183.js";import{M as In,a as wn,C as Sn}from"./@pmndrs.3fVcA4nP1741857949183.js";import{h as Mn}from"./object-hash.LyZoNZuC1741857949183.js";var Rn=An;!function(n,t){for(var e=An,r=Pn();;)try{if(564592===-parseInt(e(182))/1+-parseInt(e(179))/2+parseInt(e(194))/3+parseInt(e(169))/4*(-parseInt(e(168))/5)+-parseInt(e(176))/6*(parseInt(e(166))/7)+parseInt(e(196))/8*(-parseInt(e(185))/9)+parseInt(e(163))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function An(n,t){var e=Pn();return(An=function(n,t){return e[n-=158]})(n,t)}!function(){En(this,(function(){var n=An,t=new RegExp(n(170)),e=new RegExp(n(181),"i"),r=Cn(n(183));t.test(r+n(164))&&e[n(177)](r+n(197))?Cn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tn(void 0,(function(){var n,t=An;try{n=Function(t(159)+t(202)+");")()}catch(s){n=window}for(var e=n[t(186)]=n.console||{},r=[t(201),t(167),t(198),"error",t(161),"table",t(187)],o=0;o<r.length;o++){var i=Tn[t(200)][t(203)][t(199)](Tn),a=r[o],c=e[a]||i;i[t(171)]=Tn.bind(Tn),i[t(180)]=c.toString[t(199)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=An;super(),this[n(184)]=null,this.virtualScene=new u}[Rn(160)](...n){var t=Rn;return this.virtualScene[t(160)](...n),this}destructor(){var n=Rn;this.virtualScene[n(189)]((t=>{var e=n;t instanceof l&&(t[e(190)][e(192)](),t[e(193)][e(192)](),t[e(193)][e(162)]&&t[e(193)][e(162)][e(192)](),this[e(184)][e(158)](t))})),this[n(184)]=null}}function Pn(){var n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","277100fHrfrZ","init","virtualScene","36XcDIcM","console","trace","apply","traverse","geometry","length","dispose","material","1905072lDTJKf","action","190104LIPlDe","input","info","bind","constructor","log",'{}.constructor("return this")( )',"prototype","remove","return (function() ","add","exception","map","26604010eKmTiN","chain","gger","259TSQRCY","warn","30TZKraJ","318988gEKTJP","function *\\( *\\)","__proto__","while (true) {}","debu","counter","call","163434OfajxP","test","string","1744712LQPQYt","toString"];return(Pn=function(){return n})()}const zn=Dn;function Cn(n){function t(n){var e=An;if(typeof n===e(178))return function(n){}[e(200)](e(172))[e(188)](e(174));1!==(""+n/n)[e(191)]||n%20==0?function(){return!0}.constructor(e(173)+"gger")[e(175)](e(195)):function(){return!1}[e(200)](e(173)+e(165))[e(188)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=kn;function kn(n,t){const e=Nn();return(kn=function(n,t){return e[n-=454]})(n,t)}!function(n,t){const e=kn,r=Nn();for(;;)try{if(304979===-parseInt(e(498))/1*(parseInt(e(475))/2)+-parseInt(e(491))/3+-parseInt(e(479))/4+parseInt(e(471))/5+-parseInt(e(477))/6*(parseInt(e(459))/7)+-parseInt(e(490))/8+-parseInt(e(489))/9*(-parseInt(e(472))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fn(this,(function(){const n=kn,t=new RegExp(n(462)),e=new RegExp(n(454),"i"),r=Un("init");t[n(473)](r+n(469))&&e[n(473)](r+n(468))?Un():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bn(void 0,(function(){const n=kn;let t;try{t=Function(n(465)+n(460)+");")()}catch(o){t=window}const e=t[n(497)]=t[n(497)]||{},r=[n(495),n(486),"info","error",n(485),n(492),n(484)];for(let i=0;i<r[n(455)];i++){const t=Bn[n(474)].prototype[n(480)](Bn),o=r[i],a=e[o]||t;t[n(487)]=Bn[n(480)](Bn),t[n(488)]=a.toString[n(480)](a),e[o]=t}}))();const jn={sunset:On(464),studio:On(457),city:On(458),umbrellas:On(478),night:On(483),forest:On(470),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:On(456),hangar:On(481),urban:On(463),modern:On(466),shangai:On(476)};function Un(n){function t(n){const e=kn;if(typeof n===e(493))return function(n){}[e(474)](e(494))[e(467)]("counter");1!==(""+n/n)[e(455)]||n%20==0?function(){return!0}[e(474)]("debu"+e(496))[e(482)](e(461)):function(){return!1}[e(474)]("debu"+e(496))[e(467)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nn(){const n=["constructor","290CXTmJQ","city/shanghai_bund_1k.hdr","870hYHpMw","outdoor/outdoor_umbrellas_1k.hdr","318580kazGwn","bind","indoor/small_hangar_01_1k.hdr","call","outdoor/satara_night_1k.hdr","trace","exception","warn","__proto__","toString","52191BPApEG","2604912DfjRbJ","702264pTYkdN","table","string","while (true) {}","log","gger","console","2878jVNwMW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","kiara/kiara_1_dawn_1k.hdr","studio/poly_haven_studio_1k.hdr","city/canary_wharf_1k.hdr","19488dIuDic",'{}.constructor("return this")( )',"action","function *\\( *\\)","indoor/abandoned_games_room_02_1k.hdr","venice/venice_sunset_1k.hdr","return (function() ","city/modern_buildings_2_1k.hdr","apply","input","chain","outood/mossy_forest_1k.hdr","2940595HznQNd","2030cjxjax","test"];return(Nn=function(){return n})()}!function(n,t){const e=Zn,r=Gn();for(;;)try{if(310678===-parseInt(e(486))/1*(parseInt(e(469))/2)+parseInt(e(460))/3+parseInt(e(473))/4+parseInt(e(490))/5+-parseInt(e(484))/6+-parseInt(e(464))/7*(-parseInt(e(472))/8)+-parseInt(e(456))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ln(this,(function(){const n=Zn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(492),"i"),r=Wn(n(466));t[n(482)](r+n(487))&&e[n(482)](r+n(478))?Wn():r("0")}))()}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zn(n,t){const e=Gn();return(Zn=function(n,t){return e[n-=456]})(n,t)}function Gn(){const n=["3106890qijtxl","return (function() ","82129myorfo","chain","bind","toString","1933750QVosDz","setPath","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","console","while (true) {}","stateObject","debu","4077792iIuxIk","isColor","backgroundBlurriness","isArray","1209891HXMPDP","warn",'{}.constructor("return this")( )',"length","231XZIWzl","error","init","gger","table","8wCPciA","trace","call","99592fpHDCs","1636932jHIXsj","background","mapping","exception","Failed to load environment map: ","input","constructor","apply","Preset must be one of: ","test","__proto__"];return(Gn=function(){return n})()}Hn(void 0,(function(){const n=Zn,t=function(){const n=Zn;let t;try{t=Function(n(485)+n(462)+");")()}catch(e){t=window}return t}(),e=t[n(494)]=t[n(494)]||{},r=["log",n(461),"info",n(465),n(476),n(468),n(470)];for(let o=0;o<r[n(463)];o++){const t=Hn[n(479)].prototype[n(488)](Hn),i=r[o],a=e[i]||t;t[n(483)]=Hn[n(488)](Hn),t.toString=a[n(489)].bind(a),e[i]=t}}))();function Wn(n){function t(n){const e=Zn;if("string"==typeof n)return function(n){}[e(479)](e(495))[e(480)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(479)](e(497)+e(467))[e(471)]("action"):function(){return!1}[e(479)](e(497)+e(467))[e(480)](e(496)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=Yn;!function(n,t){const e=Yn,r=Kn();for(;;)try{if(748912===parseInt(e(122))/1+-parseInt(e(119))/2+parseInt(e(117))/3+-parseInt(e(124))/4+parseInt(e(148))/5+parseInt(e(132))/6*(parseInt(e(158))/7)+-parseInt(e(162))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(170)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vn(this,(function(){const n=Yn,t=new RegExp(n(152)),e=new RegExp(n(159),"i"),r=Jn(n(137));t[n(121)](r+n(125))&&e.test(r+n(144))?Jn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(170)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["minFilter","constructor","__proto__","28763lnRFxw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","useDefaultScene","12008624kbVgvC","return (function() ","default","log","near","component","trace","stateObject","apply","texture","generateMipmaps",'{}.constructor("return this")( )',"length","2687274IwCpar","resolution","1943304frvwwu","warn","test","1472243yuuyNl","error","4075324lKYqZM","chain","magFilter","prototype","virtualScene","gger","string","exception","1302ywUseG","debu","action","toString","envSence","init","info","background","bind","$slots","while (true) {}","frames","input","far","update","dispose","4904095sdzMqq","TresEnvSence","table","counter","function *\\( *\\)","type","destructor"];return(Kn=function(){return n})()}function Yn(n,t){const e=Kn();return(Yn=function(n,t){return e[n-=114]})(n,t)}qn(void 0,(function(){const n=Yn,t=function(){const n=Yn;let t;try{t=Function(n(163)+n(115)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(165),n(120),n(138),n(123),n(131),n(150),n(168)];for(let o=0;o<r.length;o++){const t=qn[n(156)][n(127)].bind(qn),i=r[o],a=e[i]||t;t[n(157)]=qn[n(140)](qn),t.toString=a[n(135)][n(140)](a),e[i]=t}}))();const Xn=nn({__name:$n(167),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=Y(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=Y(null),x=null;const b=Y(null);tn((()=>{var n,t;const e=Yn;null==(n=b.value)||n[e(154)](),null==(t=y[e(160)])||t.dispose()}));const{onBeforeLoop:I}=V();let w=1;I((()=>{const n=Yn;x&&b.value&&y[n(160)]&&(i[n(143)]===1/0||w<i[n(143)])&&(i[n(161)]?x[n(146)](s[n(160)],u[n(160)]):x.update(s.value,un(b[n(160)][n(128)])),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Zn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=Y([]),path:s=Y(""),background:u}=K(n);X(n,(()=>{o()}));const l=Y(null),h=J((()=>Array[e(459)](c[e(493)]))),v=J((()=>h[e(493)]?f:q));return X([c,s],(async([n,t])=>{const r=e;if(n&&n[r(463)]>0&&!(null==i?void 0:i[r(493)])){try{l[r(493)]=await $(v[r(493)],h[r(493)]?[...Q(n)]:Q(n),(n=>{t&&n.setPath(Q(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l[r(493)]&&(l[r(493)][r(475)]=h[r(493)]?p:d)}}),{immediate:!0}),X(l,(n=>{const t=e;r[t(493)]&&n&&(r[t(493)].environment=n)}),{immediate:!0}),X([u,l],(([n,o])=>{const i=e;if(r[i(493)]){let e=(null==t?void 0:t[i(493)])?t.value.texture:o,a=r.value[i(474)];!(null==a?void 0:a[i(457)])&&(a=void 0),r[i(493)][i(474)]=n?e:a}}),{immediate:!0}),X((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(493)]&&n&&(r.value[t(458)]=n)}),{immediate:!0}),X((()=>null==i?void 0:i[e(493)]),(async n=>{const t=e;if(n&&n in jn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=jn[n];try{l[t(493)]=await $(q,i,(n=>{e&&n[t(491)](e)}))}catch(r){throw new Error(t(477)+r)}l.value&&l[t(493)]&&(l.value[t(475)]=d),o()}else if(n&&!(n in jn))throw new Error(t(481)+Object.keys(jn).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(160)].environment=n[t(171)],i.background&&(u[t(160)].background=n[t(171)])):(u.value.environment=S[t(160)],i[t(139)]&&(u.value[t(139)]=S[t(160)]))};X(S,(n=>{const t=Yn;y[t(160)]&&M(y[t(160)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Yn;null==(n=y.value)||n[t(147)](),y[t(160)]=new v(i[t(118)]),x=new m(i[t(166)],i[t(145)],y[t(160)]),i[t(161)]?(y[t(160)][t(171)][t(153)]=g,y[t(160)][t(171)][t(114)]=!1,y.value[t(171)][t(155)]=_,y[t(160)][t(171)][t(126)]=_):y.value[t(171)][t(153)]=h,M(y[t(160)])};return X((()=>rn()[e(164)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(160)][o(171)][o(153)]!==h)&&(l=n(),Array.isArray(l)&&l[o(116)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(153)]))?R():(null==(r=y[o(160)])||r.dispose(),y[o(160)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(160)]=S,X((()=>i[e(161)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return Q(y)?(on(),an(r(149),{key:0,ref_key:r(136),ref:b},[cn(n[r(141)],r(164))],512)):sn("",!0)}}});function Jn(n){function t(n){const e=Yn;if(typeof n===e(130))return function(n){}.constructor(e(142))[e(170)](e(151));1!==(""+n/n).length||n%20==0?function(){return!0}[e(156)](e(133)+e(129)).call(e(134)):function(){return!1}[e(156)](e(133)+"gger")[e(170)](e(169)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qn=et;!function(n,t){const e=et,r=ct();for(;;)try{if(215940===-parseInt(e(352))/1*(parseInt(e(323))/2)+parseInt(e(316))/3+-parseInt(e(351))/4*(parseInt(e(319))/5)+-parseInt(e(333))/6*(-parseInt(e(320))/7)+parseInt(e(340))/8+parseInt(e(355))/9+-parseInt(e(321))/10*(-parseInt(e(349))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(337)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){nt(this,(function(){const n=et,t=new RegExp(n(335)),e=new RegExp(n(332),"i"),r=ut(n(314));t.test(r+n(318))&&e[n(353)](r+n(327))?ut():r("0")}))()}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(337)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function et(n,t){const e=ct();return(et=function(n,t){return e[n-=309]})(n,t)}tt(void 0,(function(){const n=et;let t;try{t=Function(n(346)+n(358)+");")()}catch(o){t=window}const e=t.console=t[n(343)]||{},r=[n(359),n(312),n(331),n(309),n(341),"table",n(338)];for(let i=0;i<r.length;i++){const t=tt.constructor[n(315)][n(354)](tt),o=r[i],a=e[o]||t;t[n(322)]=tt[n(354)](tt),t.toString=a[n(324)][n(354)](a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[Qn(347),Qn(357),Qn(363),Qn(339)];function ct(){const n=["TresRingGeometry","stateObject","input","TresMeshBasicMaterial","value","needsUpdate","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6PTYLJC","TresPlaneGeometry","function *\\( *\\)","constructor","apply","trace","color","1742848vVPpzU","exception","multiplyScalar","console","index","set","return (function() ","toneMapped","debu","7810aWkYGu","rect","556ZQWIdY","350187uBqRjd","test","bind","1657431jrcjQf","ring","map",'{}.constructor("return this")( )',"log","from","length","string","side","TresMesh","circle","error","gger","counter","warn","while (true) {}","init","prototype","579138KMfxnn","intensity","chain","8755GxwvXr","512155niRKek","1990ndbrwK","__proto__","2CGEklX","toString"];return(ct=function(){return n})()}const st=nn({__name:Qn(344),props:{args:{default:null},from:{default:Qn(350)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=Y();return ln((()=>{const n=et;e.value&&(e[n(329)][n(339)][n(342)](t[n(317)]),e[n(329)][n(330)]=!0)})),X((()=>t.color),(n=>{const r=et;e.value&&(e[r(329)][r(339)][r(345)](n),e[r(329)][r(339)].multiplyScalar(t[r(317)]),e[r(329)].needsUpdate=!0)})),fn((()=>{})),(n,r)=>{const o=et;return on(),an(o(364),null,[t.from===o(365)?(on(),an("TresRingGeometry",rt)):t.from===o(356)?(on(),an(o(325),ot)):"rect"===t[o(360)]?(on(),an(o(334),it)):(on(),pn(t[o(360)],{key:3,args:t})),dn(o(328),{ref_key:"material",ref:e,toneMapped:n[o(347)],map:n[o(357)],side:Q(x),color:n[o(339)]},null,8,at)])}}});function ut(n){function t(n){const e=et;if(typeof n===e(362))return function(n){}[e(336)](e(313))[e(337)](e(311));1!==(""+n/n)[e(361)]||n%20==0?function(){return!0}[e(336)]("debu"+e(310)).call("action"):function(){return!1}[e(336)](e(348)+"gger")[e(337)](e(326)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=dt,r=pt();for(;;)try{if(744457===parseInt(e(265))/1+-parseInt(e(256))/2+parseInt(e(290))/3+parseInt(e(277))/4+parseInt(e(293))/5+parseInt(e(278))/6+-parseInt(e(282))/7*(parseInt(e(275))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(266)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){lt(this,(function(){const n=dt,t=new RegExp(n(280)),e=new RegExp(n(289),"i"),r=vt(n(286));t[n(283)](r+n(254))&&e[n(283)](r+n(269))?vt():r("0")}))()}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(266)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pt(){const n=["call","__proto__","render","width","return (function() ","32195880NszvOA","exception","4560564XVyBCK","6168558TGImqF","depthTexture","function *\\( *\\)","format","7MLIjne","test","gger","length","init","bind","height","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4048599sCoFLm","counter","constructor","2342440nQcWgT","value","toString","while (true) {}",'{}.constructor("return this")( )',"table","chain","debu","543196NyMjyl","type","setRenderTarget","trace","string","dispose","console","stateObject","info","1054285yPsrhO","apply","prototype","warn","input"];return(pt=function(){return n})()}function dt(n,t){const e=pt();return(dt=function(n,t){return e[n-=252]})(n,t)}function ht(n){const t=Y(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?K(n):K(vn(n)),{onLoop:s}=V(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=dt;null==(n=t[a(294)])||n.dispose(),t[a(294)]=new b((null==r?void 0:r[a(294)])||p[a(273)][a(294)],(null==e?void 0:e.value)||p[a(288)][a(294)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(294)])&&(t[a(294)][a(279)]=new w((null==r?void 0:r[a(294)])||p.width.value,(null==e?void 0:e[a(294)])||p.height[a(294)]),t[a(294)].depthTexture[a(281)]=S,t[a(294)][a(279)][a(257)]=M)})),s((()=>{const n=dt;(null==a?void 0:a[n(294)])&&(l[n(294)][n(258)](un(t.value)),l[n(294)].clear(),l[n(294)][n(272)](un(f[n(294)]),un(u[n(294)])),l.value.setRenderTarget(null))})),mn((()=>{var n;const e=dt;null==(n=t[e(294)])||n[e(261)]()})),t}function vt(n){function t(n){const e=dt;if(typeof n===e(260))return function(n){}[e(292)](e(296))[e(266)](e(291));1!==(""+n/n)[e(285)]||n%20==0?function(){return!0}.constructor(e(255)+e(284))[e(270)]("action"):function(){return!1}.constructor(e(255)+e(284))[e(266)](e(263)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ft(void 0,(function(){const n=dt,t=function(){const n=dt;let t;try{t=Function(n(274)+n(252)+");")()}catch(e){t=window}return t}(),e=t[n(262)]=t[n(262)]||{},r=["log",n(268),n(264),"error",n(276),n(253),n(259)];for(let o=0;o<r[n(285)];o++){const t=ft.constructor[n(267)].bind(ft),i=r[o],a=e[i]||t;t[n(271)]=ft.bind(ft),t.toString=a[n(295)][n(287)](a),e[i]=t}}))();const mt=bt;!function(n,t){const e=bt,r=_t();for(;;)try{if(783004===-parseInt(e(256))/1+-parseInt(e(293))/2*(parseInt(e(283))/3)+-parseInt(e(299))/4+parseInt(e(297))/5*(parseInt(e(278))/6)+parseInt(e(252))/7*(parseInt(e(258))/8)+-parseInt(e(260))/9+parseInt(e(263))/10*(parseInt(e(282))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _t(){const n=["traverse","5804832aSdXJf","render",'{}.constructor("return this")( )',"init","debu","table","MeshTransmissionMaterialClass","side","envMapIntensity","4786747kXaiso","string","TresMeshTransmissionMaterial","warn","670076bpEmpR","__proto__","8xULaYf","thickness","1963746eLxEjh","constructor","console","10pBbIUh","backsideThickness","isMesh","toString","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","background","function *\\( *\\)","counter","length","test","fboResolution","uuid","exception","474kktSPC","buffer","gger","return (function() ","19057313AeaLXa","2019KxNdja","toneMapping","call","index","stateObject","action","value","apply","chain","input","1426sgbwSJ","error","log","texture","75065gQKTKQ"];return(_t=function(){return n})()}!function(){gt(this,(function(){const n=bt,t=new RegExp(n(271)),e=new RegExp(n(268),"i"),r=wt(n(302));t[n(274)](r+n(291))&&e[n(274)](r+n(292))?wt():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function(n(281)+n(301)+");")()}catch(e){t=window}return t}(),e=t[n(262)]=t[n(262)]||{},r=[n(295),n(255),"info",n(294),n(277),n(304),"trace"];for(let o=0;o<r[n(273)];o++){const t=yt[n(261)].prototype[n(267)](yt),i=r[o],a=e[i]||t;t[n(257)]=yt[n(267)](yt),t.toString=a[n(266)][n(267)](a),e[i]=t}}))();const xt=[mt(279),mt(250)];function bt(n,t){const e=_t();return(bt=function(n,t){return e[n-=250]})(n,t)}const It=nn({__name:mt(286),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=mt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new wn,{onBeforeLoop:f}=V(),p=ht({width:u[e(275)],height:u.fboResolution,isLoop:!1}),d=ht({width:u.fboResolution,height:u[e(275)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s.value=function(n,t){const e=bt;let r;return n[e(298)]((n=>{const o=e;n[o(265)]&&n[o(269)]&&n[o(269)][o(276)]===t&&(r=n)})),r}(i[n(289)],r.value[n(276)])})),f((({elapsed:n})=>{const t=e;r[t(289)].time=n,r[t(289)][t(279)]===d[t(289)][t(296)]&&s[t(289)]&&(m=a[t(289)][t(284)],h=i.value[t(270)],v=r[t(289)][t(251)],g=s[t(289)][t(269)][t(250)],s[t(289)][t(269)]=l,u.backside&&(a.value.setRenderTarget(p[t(289)]),a[t(289)][t(300)](i.value,c.value),s[t(289)][t(269)]=r[t(289)],s[t(289)][t(269)][t(259)]=u[t(264)],s[t(289)].material[t(279)]=p[t(289)][t(296)],s.value[t(269)].side=R,s[t(289)][t(269)][t(251)]=0),a[t(289)].setRenderTarget(d[t(289)]),a.value[t(300)](i[t(289)],c[t(289)]),s.value[t(269)][t(279)]=d[t(289)][t(296)],s.value[t(269)]=r[t(289)],s[t(289)][t(269)][t(259)]=u.thickness,s[t(289)][t(269)][t(250)]=g,s[t(289)][t(269)][t(251)]=v,i[t(289)][t(270)]=h,a[t(289)].setRenderTarget(null),a.value[t(284)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an(o(254),{ref_key:o(305),ref:r,buffer:Q(d)[o(296)],side:Q(x)},null,8,xt)}}});function wt(n){function t(n){const e=bt;if(typeof n===e(253))return function(n){}[e(261)]("while (true) {}")[e(290)](e(272));1!==(""+n/n)[e(273)]||n%20==0?function(){return!0}.constructor(e(303)+e(280))[e(285)](e(288)):function(){return!1}[e(261)](e(303)+"gger")[e(290)](e(287)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function St(){const n=["log","458217fYsyuL","front","console","max","bind","disableX","setFromObject","while (true) {}","196305YWxsyf","disableZ","position","trace","toString","chain","533772DBfHlI","121ciIvbf","test","table","info","debu","4iIzSoj","834760iMeYoW","291565qLoxad","outer","7hrICoQ","prototype","action","default","gref","matrixWorld","back","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","disable","20PSqOEb","getBoundingSphere","$slots","warn",'{}.constructor("return this")( )',"counter","length","apply","value","min","2022JUueCe","bottom","input","identity","function *\\( *\\)","constructor","stateObject","return (function() ","gger","right","left","TresGroup","16159cXWyfg"];return(St=function(){return n})()}!function(n,t){const e=Et,r=St();for(;;)try{if(117157===parseInt(e(289))/1*(-parseInt(e(260))/2)+parseInt(e(282))/3+parseInt(e(294))/4*(parseInt(e(296))/5)+parseInt(e(288))/6*(-parseInt(e(298))/7)+parseInt(e(295))/8+-parseInt(e(274))/9*(-parseInt(e(250))/10)+-parseInt(e(272))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Mt(this,(function(){const n=Et,t=new RegExp(n(264)),e=new RegExp(n(247),"i"),r=Tt("init");t[n(290)](r+n(287))&&e.test(r+n(262))?Tt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=St();return(Et=function(n,t){return e[n-=242]})(n,t)}Rt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(267)+n(254)+");")()}catch(e){t=window}return t}(),e=t[n(276)]=t.console||{},r=[n(273),n(253),n(292),"error","exception",n(291),n(285)];for(let o=0;o<r[n(256)];o++){const t=Rt[n(265)][n(299)][n(278)](Rt),i=r[o],a=e[i]||t;t[n(248)]=Rt[n(278)](Rt),t[n(286)]=a[n(286)][n(278)](a),e[i]=t}}))();const At=nn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Y(null),r=Y(null),o=Y(null);return fn((()=>{const n=Et;if(!r[n(258)])return;if(!o.value)return;r.value[n(245)][n(263)]();const e=(new E)[n(280)](o[n(258)],t.precise),i=new A,a=new T,c=e.max.x-e[n(259)].x,s=e[n(277)].y-e[n(259)].y,u=e[n(277)].z-e.min.z;e.getCenter(i),e[n(251)](a);const l=t.top?s/2:t[n(261)]?-s/2:0,f=t[n(270)]?-c/2:t[n(269)]?c/2:0,p=t[n(275)]?u/2:t[n(246)]?-u/2:0;r.value[n(284)].set(t[n(249)]||t[n(279)]?0:-i.x+f,t[n(249)]||t.disableY?0:-i.y+l,t[n(249)]||t[n(283)]?0:-i.z+p)})),(n,t)=>{const i=Et;return on(),an(i(271),{ref_key:i(244),ref:e},[dn("TresGroup",{ref_key:i(297),ref:r},[dn(i(271),{ref_key:"inner",ref:o},[cn(n[i(252)],i(243))],512)],512)],512)}}});function Tt(n){function t(n){const e=Et;if("string"==typeof n)return function(n){}[e(265)](e(281)).apply(e(255));1!==(""+n/n).length||n%20==0?function(){return!0}[e(265)](e(293)+"gger").call(e(242)):function(){return!1}.constructor("debu"+e(268))[e(257)](e(266)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=Ft;!function(n,t){const e=Ft,r=Ct();for(;;)try{if(982774===-parseInt(e(529))/1*(parseInt(e(489))/2)+-parseInt(e(544))/3+parseInt(e(494))/4*(-parseInt(e(514))/5)+-parseInt(e(517))/6+parseInt(e(492))/7+parseInt(e(543))/8+parseInt(e(521))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(509)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pt(this,(function(){const n=Ft,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(510),"i"),r=jt(n(495));t[n(505)](r+n(501))&&e[n(505)](r+n(524))?jt():r("0")}))()}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(509)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(){const n=["backside","far","debu","10246095uafKUE","value",'{}.constructor("return this")( )',"input","helper","while (true) {}","set","object","4xtiKbL","index","counter","length","color","group","action","console","string","prototype","lightSource","exception","worldRadius","info","14070768WAIbjO","1407858gsucRq","intensity","951890BuOXiV","bind","constructor","11603816fQqkKG","Vector3","447012DHZbOF","init","update","return (function() ","gger","call","toString","chain","table","causticsOnly","ior","test","#ffffff","error","log","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","backsideIOR","params","add","20pZzldl","primitive","trace","4512822aMdXZu"];return(Ct=function(){return n})()}zt(void 0,(function(){const n=Ft,t=function(){const n=Ft;let t;try{t=Function(n(497)+n(523)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(536)]||{},r=[n(508),"warn",n(542),n(507),n(540),n(502),n(516)];for(let o=0;o<r[n(532)];o++){const t=zt[n(491)][n(538)][n(490)](zt),i=r[o],a=e[i]||t;t.__proto__=zt[n(490)](zt),t[n(500)]=a[n(500)][n(490)](a),e[i]=t}}))();const Ot=[Dt(528)],kt=["object"];function Ft(n,t){const e=Ct();return(Ft=function(n,t){return e[n-=488]})(n,t)}const Bt=nn({__name:Dt(530),props:{color:{default:Dt(506)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Dt,e=n,{renderer:r}=W(),o=Sn(r[t(522)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(541)]});o.params[t(518)]=!0;const i=gn(null);X(i,(n=>{const e=t;n&&o.scene[e(513)](n)}));const{onBeforeLoop:a}=V();return a((({elapsed:n})=>{o[t(496)]()})),ln((()=>{const n=t;e[n(533)]&&o[n(512)].color[n(527)](e[n(533)]),e[n(504)]&&(o[n(512)].ior=e.ior),e.backsideIOR&&(o[n(512)][n(511)]=e[n(511)]),e.far&&(o[n(512)].far=e[n(519)]),e[n(541)]&&(o[n(512)].worldRadius=e[n(541)]),e.intensity&&(o[n(512)][n(488)]=e[n(488)])})),X((()=>e[t(503)]),(n=>{const e=t;o[e(512)][e(503)]=n})),X((()=>e[t(539)]),(n=>{const e=t;n&&o[e(512)][e(539)]instanceof D[e(493)]&&o[e(512)][e(539)][e(527)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn("TresGroup",{ref_key:r(534),ref:i},[cn(n.$slots,"default")],512),dn(r(515),{object:Q(o)[r(534)],position:[0,.003,0]},null,8,Ot),dn(r(515),{object:Q(o)[r(525)],visible:!1},null,8,kt)],64)}}});function jt(n){function t(n){const e=Ft;if(typeof n===e(537))return function(n){}.constructor(e(526))[e(509)](e(531));1!==(""+n/n)[e(532)]||n%20==0?function(){return!0}[e(491)]("debu"+e(498))[e(499)](e(535)):function(){return!1}[e(491)](e(520)+e(498))[e(509)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ut(){const n=["call","info","properties","129KiEztS","shadowmap_pars_fragment","counter","test","length","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","function *\\( *\\)","warn","5551130kPKUpK","constructor","console","#if defined( SHADOWMAP_TYPE_PCF )","; i++) {\n        vogelSample = vogelDiskSample(j, ","input","2222118NziBLF","debu","material","forEach","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","30074tvWNPR","compile","dispose","prototype","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","20796381WPtCAM","; i ++) {\n        offset = (vogelDiskSample(j, ","programs","8300784AOdmYZ",'{}.constructor("return this")( )',"ShaderChunk","trace","apply","chain","#ifdef USE_SHADOWMAP",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","bind","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","remove","log","table","string","replace","4ZuwGkQ","1054099MSTiMg",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","toString","4012554BbzYMf","gger"];return(Ut=function(){return n})()}!function(n,t){const e=Ht,r=Ut();for(;;)try{if(885516===-parseInt(e(185))/1+parseInt(e(161))/2*(-parseInt(e(142))/3)+parseInt(e(184))/4*(parseInt(e(150))/5)+-parseInt(e(156))/6+parseInt(e(137))/7+-parseInt(e(169))/8+parseInt(e(166))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nt(this,(function(){const n=Ht,t=new RegExp(n(148)),e=new RegExp(n(160),"i"),r=Gt("init");t[n(145)](r+n(174))&&e.test(r+n(155))?Gt():r("0")}))()}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Ut();return(Ht=function(n,t){return e[n-=137]})(n,t)}Lt(void 0,(function(){const n=Ht;let t;try{t=Function("return (function() "+n(170)+");")()}catch(o){t=window}const e=t[n(152)]=t[n(152)]||{},r=[n(180),n(149),n(140),"error","exception",n(181),n(172)];for(let i=0;i<r[n(146)];i++){const t=Lt.constructor[n(164)][n(177)](Lt),o=r[i],a=e[o]||t;t.__proto__=Lt[n(177)](Lt),t[n(187)]=a[n(187)][n(177)](a),e[o]=t}}))();const Zt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=D[r(171)][r(143)];return D[r(171)][r(143)]=D[r(171)][r(143)][r(183)](r(175),r(178)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(167)+e+r(176)+e+r(154)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(147)+e+r(186))[r(183)](r(153),r(165)),(n,t,e)=>{D[r(171)].shadowmap_pars_fragment=o,function(n,t,e){const r=Ht;t.traverse((t=>{const e=Ht;t[e(158)]&&(Array.isArray(t.material)?t[e(158)][e(159)]((t=>{const r=e;n[r(141)][r(179)](t),t[r(163)]()})):(n.properties[e(179)](t[e(158)]),t[e(158)][e(163)]()))})),n.info[r(168)][r(146)]=0,n[r(162)](t,e)}(n,t,e)}};function Gt(n){function t(n){const e=Ht;if(typeof n===e(182))return function(n){}.constructor("while (true) {}").apply(e(144));1!==(""+n/n).length||n%20==0?function(){return!0}[e(151)](e(157)+e(138))[e(139)]("action"):function(){return!1}.constructor(e(157)+e(138))[e(173)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=qt,r=Vt();for(;;)try{if(409312===-parseInt(e(276))/1+parseInt(e(278))/2+parseInt(e(268))/3*(-parseInt(e(295))/4)+-parseInt(e(285))/5+parseInt(e(270))/6*(-parseInt(e(296))/7)+-parseInt(e(281))/8+parseInt(e(293))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(274)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wt(this,(function(){const n=qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(294),"i"),r=Yt(n(290));t[n(269)](r+n(273))&&e.test(r+"input")?Yt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(274)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(){const n=["init","dispose","bind","20149488RNFKuH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1310788ufYoex","7CirvTD","log","length","constructor","6PKqfTL","test","1525494eRmAvF","info",'{}.constructor("return this")( )',"chain","apply","table","718463CzBjFs","warn","1377620VTqDkD","counter","traverse","2677232MFpUqh","string","exception","material","2777850AqQzuS","while (true) {}","gger","value","toString"];return(Vt=function(){return n})()}function qt(n,t){const e=Vt();return(qt=function(n,t){return e[n-=266]})(n,t)}$t(void 0,(function(){const n=qt;let t;try{t=Function("return (function() "+n(272)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(297),n(277),n(271),"error",n(283),n(275),"trace"];for(let i=0;i<r.length;i++){const t=$t.constructor.prototype.bind($t),o=r[i],a=e[o]||t;t.__proto__=$t[n(292)]($t),t[n(289)]=a[n(289)].bind(a),e[o]=t}}))();const Kt=nn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(288)],o[t(288)],e[t(288)]),i=null),a&&(i=Zt({focus:s,size:c,samples:u}),o[t(288)][t(280)]((n=>{const e=t;n instanceof l&&n[e(284)][e(291)]()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function Yt(n){function t(n){const e=qt;if(typeof n===e(282))return function(n){}[e(267)](e(286))[e(274)](e(279));1!==(""+n/n)[e(266)]||n%20==0?function(){return!0}.constructor("debu"+e(287)).call("action"):function(){return!1}[e(267)]("debugger")[e(274)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xt=Qt;function Jt(){const n=["resolution","return (function() ","bind","toString","encodings_fragment","info","copy","texelSize","function *\\( *\\)","set","chain","uniforms",">\n        }","setResolution","colorspace_fragment","apply","constructor","input","8143731WZcgjp","action","3183360YpDJJs","55486MdaHTi","gger","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","563750LuJaBE","6034630gZNvrD","replace","length","console","value","multiplyScalar","24vlOnFG","call","string","toneMapped","debu","3821094hRDDZO","24dcMkio","while (true) {}","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","stateObject","init","setTexelSize","counter","table","test","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","halfTexelSize","__proto__","5838804jRyfvg"];return(Jt=function(){return n})()}function Qt(n,t){const e=Jt();return(Qt=function(n,t){return e[n-=444]})(n,t)}!function(n,t){const e=Qt,r=Jt();for(;;)try{if(752101===-parseInt(e(462))/1*(parseInt(e(472))/2)+parseInt(e(461))/3+parseInt(e(491))/4+parseInt(e(465))/5+parseInt(e(477))/6+parseInt(e(466))/7+-parseInt(e(478))/8*(parseInt(e(459))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ne(this,(function(){const n=Qt,t=new RegExp(n(449)),e=new RegExp(n(488),"i"),r=oe(n(482));t[n(486)](r+n(451))&&e[n(486)](r+n(458))?oe():r("0")}))()}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();te(void 0,(function(){const n=Qt,t=function(){const n=Qt;let t;try{t=Function(n(493)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(469)]=t.console||{},r=["log","warn",n(446),"error","exception",n(485),"trace"];for(let o=0;o<r.length;o++){const t=te.constructor[n(487)].bind(te),i=r[o],a=e[i]||t;t[n(490)]=te[n(494)](te),t[n(444)]=a.toString[n(494)](a),e[i]=t}}))();const ee=parseInt(k[Xt(467)](/\D+/g,""));class re extends P{constructor(n=new C){const t=Xt;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(480)+t(ee>=154?455:445)+t(453),vertexShader:t(464),blending:O,depthWrite:!1,depthTest:!1}),this[t(475)]=!1,this[t(483)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[Xt(483)](n,t){const e=Xt;this[e(452)][e(448)][e(470)][e(450)](n,t),this[e(452)][e(489)][e(470)].set(n,t)[e(471)](.5)}[Xt(454)](n){const t=Xt;this.uniforms[t(492)][t(470)][t(447)](n)}}function oe(n){function t(n){const e=Qt;if(typeof n===e(474))return function(n){}[e(457)](e(479))[e(456)](e(484));1!==(""+n/n)[e(468)]||n%20==0?function(){return!0}.constructor(e(476)+e(463))[e(473)](e(460)):function(){return!1}[e(457)]("debu"+e(463))[e(456)](e(481)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ie=ue;!function(n,t){const e=ue,r=ce();for(;;)try{if(263516===parseInt(e(325))/1+parseInt(e(327))/2+-parseInt(e(304))/3+parseInt(e(351))/4*(parseInt(e(332))/5)+parseInt(e(347))/6+-parseInt(e(341))/7+parseInt(e(340))/8*(-parseInt(e(323))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ue(308)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ce(){const n=["toString","render","2804344yMSrqk","1660841LwwaUk","setAttribute","error","camera","action","while (true) {}","1282578PhsywW","scene","log","minDepthThreshold","340136oDmcrj",'{}.constructor("return this")( )',"warn","info","value","position","string","convolutionMaterial","renderTargetA","setTexelSize","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthTexture","kernel","input","715770zxSZeK","uniforms","add","length","apply","exception","renderTargetB","defines","texture","test","maxDepthThreshold","constructor","inputBuffer","return (function() ","counter","chain","depthBuffer","setRenderTarget","bind","9BykdaD","function *\\( *\\)","121580PbFEqD","USE_DEPTH","488730VEoCzQ","screen","setResolution","table","renderToScreen","30OVTwMi","trace","__proto__","console","stateObject","init"];return(ce=function(){return n})()}!function(){ae(this,(function(){const n=ue,t=new RegExp(n(324)),e=new RegExp(n(361),"i"),r=fe(n(337));t.test(r+n(319))&&e[n(313)](r+n(303))?fe():r("0")}))()}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ue(308)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ue(n,t){const e=ce();return(ue=function(n,t){return e[n-=301]})(n,t)}se(void 0,(function(){const n=ue,t=function(){const n=ue;let t;try{t=Function(n(317)+n(352)+");")()}catch(e){t=window}return t}(),e=t[n(335)]=t.console||{},r=[n(349),n(353),n(354),n(343),n(309),n(330),n(333)];for(let o=0;o<r[n(307)];o++){const t=se[n(315)].prototype.bind(se),i=r[o],a=e[i]||t;t[n(334)]=se.bind(se),t[n(338)]=a[n(338)][n(322)](a),e[i]=t}}))();class le{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ue;this[c(331)]=!1,this[c(359)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(310)]=this.renderTargetA.clone(),this[c(358)]=new re,this[c(358)][c(360)](1/t,1/e),this[c(358)][c(329)](new C(t,e)),this[c(348)]=new u,this[c(344)]=new F,this[c(358)][c(305)][c(350)][c(355)]=r,this.convolutionMaterial[c(305)][c(314)][c(355)]=o,this.convolutionMaterial.uniforms.depthScale.value=i,this[c(358)][c(305)].depthToBlurRatioBias[c(355)]=a,this[c(358)][c(311)][c(326)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p.setAttribute(c(356),new j(s,3)),p[c(342)]("uv",new j(f,2)),this[c(328)]=new l(p,this[c(358)]),this[c(328)].frustumCulled=!1,this[c(348)][c(306)](this[c(328)])}[ie(339)](n,t,e){const r=ie,o=this[r(348)],i=this.camera,a=this[r(359)],c=this[r(310)],s=this[r(358)],u=s[r(305)];u[r(320)][r(355)]=t[r(301)];const l=s[r(302)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(355)]=l[p],u[r(316)].value=h[r(312)],n[r(321)](f),n[r(339)](o,i),h=f;u[r(302)][r(355)]=l[p],u[r(316)][r(355)]=h[r(312)],n.setRenderTarget(this[r(331)]?null:e),n[r(339)](o,i)}}function fe(n){function t(n){const e=ue;if(typeof n===e(357))return function(n){}[e(315)](e(346))[e(308)](e(318));1!==(""+n/n)[e(307)]||n%20==0?function(){return!0}[e(315)]("debugger").call(e(345)):function(){return!1}.constructor("debugger")[e(308)](e(336)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var pe=me;function de(){var n=["replace","error","tDepth","6448144PUpXtC","136540qDgvfb","8PBRSDX","#include <project_vertex>","1379340KpMMzg","_depthToBlurRatioBias","string","bind","init","_hasBlur","mixStrength",'{}.constructor("return this")( )',"3757746CfLaox","distortion","1098315iEXnEl","depthToBlurRatioBias","console","81220DFlfje","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","_mirror","33VWJLoC","396vRQgJW","textureMatrix","fragmentShader","distortionMap","7vVheki","__proto__","warn","tDiffuseBlur","length","_mixContrast","USE_UV","value","tDiffuse","_tDiffuse","info","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","return (function() ","gger","_tDepth","_blurStrength","debu","function *\\( *\\)","_distortion","stateObject","_tDiffuseBlur","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","prototype","_maxDepthThreshold","1492GgvOgl","toString","defines","_distortionMap","trace","test","mixBlur","exception","_depthScale","hasBlur","depthScale","mirror","uniforms","log","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","minDepthThreshold","#include <emissivemap_fragment>","_textureMatrix","apply","mixContrast","maxDepthThreshold","_mixBlur","vertexShader","call","constructor","1440XbYtnO","input","_minDepthThreshold","action"];return(de=function(){return n})()}!function(n,t){for(var e=me,r=de();;)try{if(512320===-parseInt(e(232))/1+-parseInt(e(280))/2*(-parseInt(e(305))/3)+-parseInt(e(233))/4*(parseInt(e(245))/5)+parseInt(e(243))/6*(parseInt(e(256))/7)+parseInt(e(312))/8+-parseInt(e(252))/9*(parseInt(e(248))/10)+-parseInt(e(251))/11*(parseInt(e(235))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var he=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[me(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){he(this,(function(){var n=me,t=new RegExp(n(273)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_e(n(239));t[n(285)](r+"chain")&&e.test(r+n(306))?_e():r("0")}))()}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[me(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function me(n,t){var e=de();return(me=function(n,t){return e[n-=232]})(n,t)}ve(void 0,(function(){var n,t=me;try{n=Function(t(268)+t(242)+");")()}catch(s){n=window}for(var e=n[t(247)]=n.console||{},r=[t(293),t(258),t(266),t(310),t(287),"table",t(284)],o=0;o<r[t(260)];o++){var i=ve[t(304)][t(278)][t(238)](ve),a=r[o],c=e[a]||i;i[t(257)]=ve[t(238)](ve),i[t(281)]=c[t(281)].bind(c),e[a]=i}}))();class ge extends U{constructor(n={}){var t=me;super(n),this._tDepth={value:null},this._distortionMap={value:null},this[t(265)]={value:null},this[t(276)]={value:null},this[t(297)]={value:null},this[t(240)]={value:!1},this[t(250)]={value:0},this[t(301)]={value:0},this._blurStrength={value:.5},this[t(307)]={value:.9},this[t(279)]={value:1},this[t(288)]={value:0},this[t(236)]={value:.25},this[t(274)]={value:1},this[t(261)]={value:1},this.setValues(n)}onBeforeCompile(n){var t,e=me;!(null==(t=n[e(282)])?void 0:t[e(262)])&&(n.defines.USE_UV=""),n.uniforms[e(289)]=this[e(240)],n[e(292)][e(264)]=this[e(265)],n.uniforms[e(311)]=this[e(270)],n[e(292)][e(255)]=this._distortionMap,n[e(292)].tDiffuseBlur=this[e(276)],n[e(292)].textureMatrix=this._textureMatrix,n[e(292)][e(291)]=this[e(250)],n[e(292)][e(286)]=this[e(301)],n[e(292)][e(241)]=this[e(271)],n[e(292)][e(295)]=this[e(307)],n[e(292)].maxDepthThreshold=this._maxDepthThreshold,n[e(292)][e(290)]=this[e(288)],n[e(292)].depthToBlurRatioBias=this._depthToBlurRatioBias,n[e(292)][e(244)]=this[e(274)],n.uniforms.mixContrast=this._mixContrast,n[e(302)]=e(267)+n[e(302)],n[e(302)]=n[e(302)].replace(e(234),e(294)),n[e(254)]=e(249)+n[e(254)],n[e(254)]=n.fragmentShader[e(309)](e(296),e(277))}get[pe(264)](){var n=pe;return this[n(265)][n(263)]}set[pe(264)](n){this[pe(265)].value=n}get[pe(311)](){var n=pe;return this[n(270)][n(263)]}set[pe(311)](n){var t=pe;this[t(270)][t(263)]=n}get[pe(255)](){return this[pe(283)].value}set[pe(255)](n){var t=pe;this._distortionMap[t(263)]=n}get[pe(259)](){return this[pe(276)].value}set[pe(259)](n){this[pe(276)].value=n}get textureMatrix(){return this[pe(297)].value}set[pe(253)](n){var t=pe;this._textureMatrix[t(263)]=n}get[pe(289)](){return this[pe(240)].value}set hasBlur(n){var t=pe;this._hasBlur[t(263)]=n}get[pe(291)](){return this._mirror.value}set[pe(291)](n){var t=pe;this[t(250)][t(263)]=n}get[pe(286)](){var n=pe;return this[n(301)][n(263)]}set[pe(286)](n){var t=pe;this[t(301)][t(263)]=n}get[pe(241)](){return this._blurStrength.value}set mixStrength(n){var t=pe;this._blurStrength[t(263)]=n}get minDepthThreshold(){return this[pe(307)].value}set minDepthThreshold(n){var t=pe;this._minDepthThreshold[t(263)]=n}get[pe(300)](){var n=pe;return this[n(279)][n(263)]}set[pe(300)](n){var t=pe;this._maxDepthThreshold[t(263)]=n}get depthScale(){var n=pe;return this._depthScale[n(263)]}set[pe(290)](n){var t=pe;this[t(288)][t(263)]=n}get[pe(246)](){var n=pe;return this[n(236)][n(263)]}set[pe(246)](n){this[pe(236)].value=n}get[pe(244)](){var n=pe;return this[n(274)][n(263)]}set[pe(244)](n){var t=pe;this[t(274)][t(263)]=n}get[pe(299)](){var n=pe;return this._mixContrast[n(263)]}set[pe(299)](n){var t=pe;this[t(261)][t(263)]=n}}function _e(n){function t(n){var e=me;if(typeof n===e(237))return function(n){}[e(304)]("while (true) {}")[e(298)]("counter");1!==(""+n/n)[e(260)]||n%20==0?function(){return!0}.constructor(e(272)+e(269))[e(303)](e(308)):function(){return!1}[e(304)]("debu"+e(269)).apply(e(275)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ye=Se;!function(n,t){const e=Se,r=Ie();for(;;)try{if(881470===parseInt(e(208))/1*(parseInt(e(136))/2)+parseInt(e(130))/3+parseInt(e(192))/4*(parseInt(e(129))/5)+-parseInt(e(154))/6+-parseInt(e(187))/7*(-parseInt(e(142))/8)+-parseInt(e(177))/9*(-parseInt(e(156))/10)+-parseInt(e(213))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(182)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){const n=Se,t=new RegExp(n(200)),e=new RegExp(n(149),"i"),r=Re(n(167));t[n(226)](r+n(191))&&e[n(226)](r+"input")?Re():r("0")}))()}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(){const n=["elements","shadowMap","depthTexture","target","3398206vkRose","reflect","mix-contrast","table","chain","4cPgZjA","traverse","t-depth","addScaledVector","index","multiplyScalar","updateMatrixWorld","setFromNormalAndCoplanarPoint","function *\\( *\\)","constant","subVectors","exception","dot","setFromMatrixPosition","position","extractRotation","168898nMZWev","normal","negate","applyMatrix4","reflectorPlane","32333180wGDhUk","rotationMatrix","uuid","TresMeshReflectorMaterial","string","mirror","t-diffuse","autoClear","reflectorOffset","clipPlane","debu","setRenderTarget","virtualCamera","test","textureMatrix","depth-to-blur-ratio-bias","visible","view","5852215NHQIKH","3279714HNIzWR","stateObject","copy","lookAt","projectionMatrix","sign","4zJoOFf","render","depth-scale","material","set","defines-USE_DEPTH","24lkPbTB",'{}.constructor("return this")( )',"t-diffuse-blur","constructor","console","warn","texture-matrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","assign","bind","multiply","reflectorWorldPosition","6640302JWZVoR","error","20tKeWsS","trace","min-depth-threshold","matrixWorldInverse","has-blur","gger","while (true) {}","action","defines-USE_DISTORTION","info","dispose","init","lookAtPosition","enabled","add","cameraWorldPosition","call","toString","matrixWorld","texture","value","3913722NODiVO","defines-USE_BLUR","length","max-depth-threshold","autoUpdate","apply"];return(Ie=function(){return n})()}be(void 0,(function(){const n=Se;let t;try{t=Function("return (function() "+n(143)+");")()}catch(o){t=window}const e=t[n(146)]=t[n(146)]||{},r=["log",n(147),n(165),n(155),n(203),n(190),n(157)];for(let i=0;i<r[n(179)];i++){const t=be[n(145)].prototype[n(151)](be),o=r[i],a=e[o]||t;t.__proto__=be.bind(be),t[n(173)]=a.toString[n(151)](a),e[o]=t}}))();const we=[ye(148),ye(218),ye(219),ye(194),ye(144),ye(160),"mix-strength",ye(158),ye(180),ye(138),ye(228),"distortion","distortionMap",ye(189),"defines-USE_BLUR",ye(141),ye(164)];function Se(n,t){const e=Ie();return(Se=function(n,t){return e[n-=127]})(n,t)}const Me=nn({__name:ye(196),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=ye,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:ge});const T=gn(),D=gn(),P=gn(),z=gn(),C=J((()=>{const n=Se;return"number"==typeof f[n(176)]?[f[n(176)],f[n(176)]]:f[n(176)]})),O=J((()=>C[r(176)][0]>0||C[r(176)][1]>0)),k={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};ln((()=>{var n;const o=r;null==(n=T[o(176)])||n[o(175)][o(166)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T.value=new b(i[o(176)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i[o(176)],S,M)},t(y,e(x)))),D[o(176)]=new b(i.value,i.value,f),P[o(176)]=new le({resolution:i[o(176)],width:C[o(176)][0],height:C.value[1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u[o(176)],depthToBlurRatioBias:l.value}),z[o(176)]={mirror:p,textureMatrix:k[o(227)],mixBlur:d,tDiffuse:T[o(176)].texture,tDepth:T[o(176)][o(185)],tDiffuseBlur:T.value[o(175)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":O[o(176)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(176)]?"":void 0}}));const F=gn(),{onLoop:B}=V();B((()=>{var n;const t=r;if(!(F[t(176)]&&R[t(176)]&&T.value&&y[t(176)]))return;const e=function(n,t){const e=Se;let r;return n[e(193)]((n=>{const o=e;n.isMesh&&n[o(139)]&&n[o(139)][o(215)]===t&&(r=n)})),r}(x.value,F[t(176)][t(215)]);if(!e)return;e.visible=!1;const i=R[t(176)].xr[t(169)],a=R[t(176)][t(184)][t(181)];(function(n){var t,e;const r=Se;if(k[r(153)][r(205)](n[r(174)]),k.cameraWorldPosition[r(205)](null==(t=y[r(176)])?void 0:t[r(174)]),k[r(214)][r(207)](n[r(174)]),k.normal[r(140)](0,0,1),k[r(209)].applyMatrix4(k[r(214)]),k.reflectorWorldPosition[r(195)](k[r(209)],o[r(221)]),k.view[r(202)](k[r(153)],k[r(171)]),k[r(128)][r(204)](k[r(209)])>0)return;k[r(128)][r(188)](k[r(209)])[r(210)](),k[r(128)][r(170)](k[r(153)]),k[r(214)][r(207)](null==(e=y[r(176)])?void 0:e[r(174)]),k[r(168)].set(0,0,-1),k[r(168)][r(211)](k[r(214)]),k.lookAtPosition[r(170)](k[r(171)]),k[r(186)][r(202)](k.reflectorWorldPosition,k[r(168)]),k[r(186)][r(188)](k[r(209)])[r(210)](),k[r(186)].add(k[r(153)]),k.virtualCamera[r(206)][r(132)](k[r(128)]),k.virtualCamera.up.set(0,1,0),k[r(225)].up[r(211)](k.rotationMatrix),k.virtualCamera.up[r(188)](k[r(209)]),k.virtualCamera[r(133)](k.target),k[r(225)].far=(null==y?void 0:y[r(176)]).far,k[r(225)][r(198)](),k[r(225)][r(134)][r(132)]((null==y?void 0:y[r(176)])[r(134)]),k[r(227)][r(140)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k[r(227)][r(152)](k[r(225)][r(134)]),k[r(227)].multiply(k.virtualCamera[r(159)]),k.textureMatrix.multiply(n[r(174)]),k.reflectorPlane[r(199)](k[r(209)],k[r(153)]),k[r(212)][r(211)](k[r(225)][r(159)]),k.clipPlane[r(140)](k[r(212)][r(209)].x,k[r(212)][r(209)].y,k.reflectorPlane[r(209)].z,k.reflectorPlane[r(201)]);const i=k.virtualCamera[r(134)];k.q.x=(Math[r(135)](k.clipPlane.x)+i[r(183)][8])/i.elements[0],k.q.y=(Math[r(135)](k[r(222)].y)+i.elements[9])/i[r(183)][5],k.q.z=-1,k.q.w=(1+i.elements[10])/i[r(183)][14],k[r(222)][r(197)](2/k[r(222)][r(204)](k.q)),i[r(183)][2]=k.clipPlane.x,i.elements[6]=k[r(222)].y,i[r(183)][10]=k.clipPlane.z+1,i[r(183)][14]=k.clipPlane.w})(e),R.value.shadowMap[t(181)]=!1,R[t(176)].setRenderTarget(T[t(176)]),R[t(176)][t(220)]||R[t(176)].clear(),R[t(176)][t(137)](x.value,k[t(225)]),null==(n=null==P?void 0:P[t(176)])||n[t(137)](R.value,T[t(176)],D[t(176)]),R[t(176)].xr[t(169)]=i,R[t(176)][t(184)][t(181)]=a,e[t(127)]=!0,R[t(176)][t(224)](null)}));const j=xn(),U=J((()=>{const n=r,t={};return Object[n(150)](t,o),Object.assign(t,j[n(176)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(176)])||n[e(166)](),null==(t=null==D?void 0:D[e(176)])||t[e(166)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(216),bn({key:"key"+z[c(176)][c(178)]+z[c(176)]["defines-USE_DEPTH"]+z.value[c(164)],ref_key:"materialRef",ref:F},U[c(176)],{"texture-matrix":k[c(227)],mirror:Q(p),"t-diffuse":null==(e=T[c(176)])?void 0:e.texture,"t-depth":null==(o=T.value)?void 0:o[c(185)],"t-diffuse-blur":null==(i=D.value)?void 0:i[c(175)],"has-blur":O.value,"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":O[c(176)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,we)}}});function Re(n){function t(n){const e=Se;if(typeof n===e(217))return function(n){}.constructor(e(162))[e(182)]("counter");1!==(""+n/n)[e(179)]||n%20==0?function(){return!0}.constructor(e(223)+e(161))[e(172)](e(163)):function(){return!1}[e(145)]("debu"+e(161))[e(182)](e(131)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=De,r=Pe();for(;;)try{if(511056===parseInt(e(375))/1*(-parseInt(e(372))/2)+parseInt(e(384))/3*(-parseInt(e(362))/4)+parseInt(e(376))/5*(parseInt(e(368))/6)+parseInt(e(373))/7+-parseInt(e(357))/8+-parseInt(e(367))/9+parseInt(e(377))/10*(parseInt(e(386))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ee(this,(function(){const n=De,t=new RegExp(n(359)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Te(n(369));t[n(385)](r+n(382))&&e.test(r+"input")?Te():r("0")}))()}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Te(n){function t(n){const e=De;if("string"==typeof n)return function(n){}[e(378)](e(379))[e(381)](e(361));1!==(""+n/n)[e(374)]||n%20==0?function(){return!0}.constructor(e(370)+e(355)).call(e(365)):function(){return!1}[e(378)](e(370)+e(355))[e(381)](e(364)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(n,t){const e=Pe();return(De=function(n,t){return e[n-=350]})(n,t)}function Pe(){const n=["345652qwAUjS","value","stateObject","action","return (function() ","5409531padmqg","186IgXkai","init","debu","update","2PrUHUq","2940294PZRRvq","length","363901zuErPm","58005EHpIph","207390kMGhbm","constructor","while (true) {}","bind","apply","chain","type","27mKEajX","test","1188WYXasE","toString","table","console","dispose","background",'{}.constructor("return this")( )',"warn","gger","fog","6126016KNXhSg","__proto__","function *\\( *\\)","CubeCamera","counter"];return(Pe=function(){return n})()}Ae(void 0,(function(){const n=De;let t;try{t=Function(n(366)+n(353)+");")()}catch(o){t=window}const e=t[n(350)]=t[n(350)]||{},r=["log",n(354),"info","error","exception",n(388),"trace"];for(let i=0;i<r[n(374)];i++){const t=Ae[n(378)].prototype.bind(Ae),o=r[i],a=e[o]||t;t[n(358)]=Ae[n(380)](Ae),t.toString=a[n(387)][n(380)](a),e[o]=t}}))();const ze=Be;!function(n,t){const e=Be,r=ke();for(;;)try{if(808803===parseInt(e(377))/1+parseInt(e(392))/2*(parseInt(e(396))/3)+parseInt(e(401))/4+-parseInt(e(395))/5*(parseInt(e(365))/6)+-parseInt(e(362))/7+-parseInt(e(390))/8+-parseInt(e(366))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ce(this,(function(){const n=Be,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(363),"i"),r=Ue("init");t.test(r+"chain")&&e.test(r+n(375))?Ue():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(){const n=["frames","debu","index","warn","primitive","constructor","default","near","apply","6809248EPmzzB","bind","2313970UxZDtr","counter","table","5fhoxQv","3zgBsDf","visible","call","while (true) {}","toString","4428144tvJNlC","action","rgRef","value","length","far","TresGroup","object","8159963dEMLWy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","1548606MFURwG","2787345YzkTIt","envMap","info","log","error","console","gger","fog","return (function() ","input",'{}.constructor("return this")( )',"1129453UnAvTB","exception","trace","prototype"];return(ke=function(){return n})()}Oe(void 0,(function(){const n=Be;let t;try{t=Function(n(374)+n(376)+");")()}catch(o){t=window}const e=t.console=t[n(371)]||{},r=[n(369),n(384),n(368),n(370),n(378),n(394),n(379)];for(let i=0;i<r.length;i++){const t=Oe.constructor[n(380)].bind(Oe),o=r[i],a=e[o]||t;t.__proto__=Oe[n(391)](Oe),t[n(400)]=a.toString[n(391)](a),e[o]=t}}))();const Fe=[ze(361)];function Be(n,t){const e=ke();return(Be=function(n,t){return e[n-=355]})(n,t)}const je=nn({__name:ze(383),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ze,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=Y(null),s=Y(n),u=Y(t),l=Y(e),f=Y(null);let p,d;return X((()=>s),(n=>{var t;const e=De;null==(t=c[e(363)])||t[e(351)](),c[e(363)]=new v(n[e(363)]),c.value.texture[e(383)]=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=De;e&&(f.value=new(D[r(360)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=De;null==(n=c[t(363)])||n[t(351)]()})),{fbo:c,camera:f,update:()=>{var n;const t=De;p=a[t(363)].fog,d=a[t(363)][t(352)],a.value[t(352)]=r||d,a[t(363)][t(356)]=o||p,null==(n=f[t(363)])||n[t(371)](i[t(363)],a[t(363)]),a[t(363)][t(356)]=p,a.value[t(352)]=d}}}({resolution:o.resolution,near:o[r(388)],far:o[r(359)],envMap:o[r(367)],fog:o[r(373)]}),{onBeforeLoop:s}=V();let u=0;const l=Y(null);return s((()=>{const n=r;l.value&&(o[n(381)]===1/0||u<o[n(381)])&&(l[n(357)].visible=!1,c(),l[n(357)][n(397)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return on(),an("TresGroup",null,[dn(e(385),{object:Q(a)},null,8,Fe),dn(e(360),{ref_key:e(356),ref:l},[cn(n.$slots,e(387))],512)])}}});function Ue(n){function t(n){const e=Be;if("string"==typeof n)return function(n){}[e(386)](e(399))[e(389)](e(393));1!==(""+n/n)[e(358)]||n%20==0?function(){return!0}[e(386)](e(382)+e(372))[e(398)](e(355)):function(){return!1}[e(386)](e(382)+e(372)).apply(e(364)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ne(n,t){const e=Le();return(Ne=function(n,t){return e[n-=313]})(n,t)}function Le(){const n=["exception","12nAoFIg","warn","chain","stateObject","entries","value","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","return (function() ","console","debu","apply","defineProperty","prototype","toString","UniformsUtils","trace","__proto__","48cYvvvS","generateUUID","ShaderMaterial","error",'{}.constructor("return this")( )',"7519884WbQtKv","forEach","11uDZOem","clone","3658170DnmTEJ","counter","constructor","init","168ywIvbc","uniforms","assign","MathUtils","3631MsAVVu","log","info","396785CLPNYi","21KJTqQz","call","action","11339130TWczsa","reduce","2409102WRHqYL","26142sQCDUv","bind","key"];return(Le=function(){return n})()}!function(n,t){const e=Ne,r=Le();for(;;)try{if(817746===-parseInt(e(340))/1*(parseInt(e(336))/2)+parseInt(e(332))/3+-parseInt(e(354))/4*(parseInt(e(343))/5)+parseInt(e(350))/6*(-parseInt(e(344))/7)+parseInt(e(323))/8*(-parseInt(e(349))/9)+parseInt(e(347))/10+-parseInt(e(330))/11*(-parseInt(e(328))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Ne,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(361),"i"),r=We(n(335));t.test(r+n(356))&&e.test(r+n(362))?We():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(316)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t,e,r){const o=Ne,i=class extends D[o(325)]{constructor(i={}){const a=o,s=Object[a(358)](n);super({uniforms:s[a(348)](((n,[t,e])=>{const r=a,o=D[r(320)][r(331)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(352)]="",s[a(329)]((([n])=>Object[a(317)](this,n,{get:()=>this.uniforms[n][a(359)],set:t=>this[a(337)][n][a(359)]=t}))),Object[a(338)](this,i),r&&r(this)}};return i.key=D[o(339)][o(324)](),i}function We(n){function t(n){const e=Ne;if("string"==typeof n)return function(n){}[e(334)]("while (true) {}").apply(e(333));1!==(""+n/n)[e(360)]||n%20==0?function(){return!0}.constructor(e(315)+"gger")[e(345)](e(346)):function(){return!1}[e(334)](e(315)+"gger").apply(e(357)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Ne,t=function(){const n=Ne;let t;try{t=Function(n(313)+n(327)+");")()}catch(e){t=window}return t}(),e=t[n(314)]=t[n(314)]||{},r=[n(341),n(355),n(342),n(326),n(353),"table",n(321)];for(let o=0;o<r[n(360)];o++){const t=Ze.constructor[n(318)][n(351)](Ze),i=r[o],a=e[i]||t;t[n(322)]=Ze[n(351)](Ze),t[n(319)]=a[n(319)][n(351)](a),e[i]=t}}))();var $e=cr;!function(n,t){for(var e=cr,r=Rr();;)try{if(971366===parseInt(e(352))/1+-parseInt(e(396))/2*(parseInt(e(359))/3)+parseInt(e(366))/4*(parseInt(e(332))/5)+parseInt(e(257))/6*(parseInt(e(427))/7)+-parseInt(e(417))/8+parseInt(e(351))/9+parseInt(e(432))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[cr(331)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ve(this,(function(){var n=cr,t=new RegExp(n(240)),e=new RegExp(n(283),"i"),r=Dr("init");t.test(r+n(305))&&e[n(357)](r+n(325))?Dr():r("0")}))()}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n){var t=function(n,t){var e=cr;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(434)]];if(void 0!==r){var o=r[e(290)](n,t||e(377));if("object"!=typeof o)return o;throw new TypeError(e(308))}return(t===e(358)?String:Number)(n)}(n,cr(358));return"symbol"==typeof t?t:String(t)}function Ye(n,t,e){var r=cr;return(t=Ke(t))in n?Object[r(235)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Xe(n,t){var e=cr,r=Object.keys(n);if(Object[e(428)]){var o=Object[e(428)](n);t&&(o=o[e(281)]((function(t){return Object[e(336)](n,t).enumerable}))),r[e(355)][e(331)](r,o)}return r}function Je(n){for(var t=cr,e=1;e<arguments[t(341)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(r),!0)[t(326)]((function(t){Ye(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object[t(267)](r)):Xe(Object(r)).forEach((function(e){var o=t;Object[o(235)](n,e,Object[o(336)](r,e))}))}return n}function Qe(n,t){var e=cr;if(null==n)return{};var r,o,i=function(n,t){var e=cr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(341)];o++)r=a[o],t[e(320)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(428)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(341)];o++)r=a[o],t[e(320)](r)>=0||Object.prototype.propertyIsEnumerable[e(290)](n,r)&&(i[r]=n[r])}return i}function nr(n,t){var e=cr;(null==t||t>n.length)&&(t=n[e(341)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function tr(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=cr,r=null==n?null:e(259)!=typeof Symbol&&n[Symbol[e(378)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(290)](r))[e(365)])&&(s.push(o[e(380)]),s[e(341)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(387)]&&(c=r[e(387)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=cr;if(n){if(typeof n===e(358))return nr(n,t);var r=Object.prototype[e(415)][e(290)](n).slice(8,-1);return r===e(286)&&n[e(278)]&&(r=n[e(278)][e(406)]),r===e(354)||"Set"===r?Array[e(243)](n):r===e(347)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nr(n,t):void 0}}(n,t)||function(){throw new TypeError(cr(402))}()}function er(n,t){for(var e=cr,r=0;r<t[e(341)];r++){var o=t[r];o.enumerable=o.enumerable||!1,o[e(385)]=!0,e(380)in o&&(o[e(333)]=!0),Object[e(235)](n,Ke(o[e(386)]),o)}}function rr(n){if(void 0===n)throw new ReferenceError(cr(369));return n}function or(n,t){var e=cr;return(or=Object[e(424)]?Object[e(424)][e(317)]():function(n,t){return n[e(398)]=t,n})(n,t)}function ir(n){var t=cr;return(ir=Object[t(424)]?Object.getPrototypeOf[t(317)]():function(n){var e=t;return n[e(398)]||Object[e(265)](n)})(n)}function ar(n){var t=function(){var n=cr;if(typeof Reflect===n(259)||!Reflect[n(334)])return!1;if(Reflect[n(334)].sham)return!1;if(typeof Proxy===n(256))return!0;try{return Boolean[n(373)][n(306)].call(Reflect[n(334)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=cr,o=ir(n);if(t){var i=ir(this)[r(278)];e=Reflect.construct(o,arguments,i)}else e=o[r(331)](this,arguments);return function(n,t){var e=cr;if(t&&(typeof t===e(360)||typeof t===e(256)))return t;if(void 0!==t)throw new TypeError(e(338));return rr(n)}(this,e)}}function cr(n,t){var e=Rr();return(cr=function(n,t){return e[n-=235]})(n,t)}qe(void 0,(function(){for(var n=cr,t=function(){var n,t=cr;try{n=Function(t(270)+t(391)+");")()}catch(e){n=window}return n}(),e=t[n(248)]=t.console||{},r=[n(401),n(403),n(303),n(258),n(273),n(275),"trace"],o=0;o<r[n(341)];o++){var i=qe[n(278)][n(373)][n(317)](qe),a=r[o],c=e[a]||i;i[n(398)]=qe[n(317)](qe),i[n(415)]=c[n(415)][n(317)](c),e[a]=i}}))();var sr,ur,lr,fr={diffuse:$e(400),normal:"csm_Normal",roughness:"csm_Roughness",metalness:$e(368),emissive:"csm_Emissive",ao:$e(300),bump:$e(408),clearcoat:$e(374),clearcoatRoughness:$e(343),clearcoatNormal:$e(335),pointSize:$e(384),fragColor:$e(407),depthAlpha:$e(349),position:$e(390),positionRaw:$e(310)},pr=(Ye(sr={},""[$e(340)](fr[$e(420)]),"*"),Ye(sr,""[$e(340)](fr.positionRaw),"*"),Ye(sr,"".concat(fr.normal),"*"),Ye(sr,""[$e(340)](fr.pointSize),[$e(422)]),Ye(sr,""[$e(340)](fr.diffuse),"*"),Ye(sr,""[$e(340)](fr[$e(245)]),"*"),Ye(sr,""[$e(340)](fr[$e(236)]),[$e(309),$e(416)]),Ye(sr,""[$e(340)](fr[$e(249)]),[$e(309),"MeshPhysicalMaterial"]),Ye(sr,""[$e(340)](fr[$e(311)]),[$e(309),$e(416)]),Ye(sr,"".concat(fr.ao),[$e(309),"MeshPhysicalMaterial",$e(304),$e(298),$e(254),$e(327)]),Ye(sr,"".concat(fr[$e(262)]),["MeshLambertMaterial",$e(253),"MeshNormalMaterial",$e(254),"MeshPhysicalMaterial",$e(309),$e(327),$e(315)]),Ye(sr,""[$e(340)](fr[$e(250)]),[$e(288)]),Ye(sr,""[$e(340)](fr[$e(363)]),["MeshPhysicalMaterial"]),Ye(sr,""[$e(340)](fr[$e(319)]),[$e(416)]),Ye(sr,""[$e(340)](fr[$e(367)]),[$e(416)]),sr),dr={"#include <lights_physical_fragment>":D[$e(350)][$e(299)]},hr=(Ye(ur={},""[$e(340)](fr[$e(348)]),{"#include <beginnormal_vertex>":$e(293)[$e(340)](fr[$e(348)],$e(292))}),Ye(ur,"".concat(fr[$e(420)]),{"#include <begin_vertex>":$e(264)[$e(340)](fr.position,$e(241))}),Ye(ur,""[$e(340)](fr[$e(421)]),{"#include <begin_vertex>":$e(242)[$e(340)](fr[$e(421)],$e(342))}),Ye(ur,"".concat(fr.pointSize),{"gl_PointSize = size;":$e(405)[$e(340)](fr[$e(291)],$e(238))}),Ye(ur,""[$e(340)](fr[$e(266)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(fr.diffuse,$e(241))}),Ye(ur,""[$e(340)](fr.fragColor),{"#include <dithering_fragment>":$e(361).concat(fr.fragColor,$e(241))}),Ye(ur,""[$e(340)](fr.emissive),{"vec3 totalEmissiveRadiance = emissive;":$e(251).concat(fr[$e(236)],$e(238))}),Ye(ur,""[$e(340)](fr[$e(249)]),{"#include <roughnessmap_fragment>":$e(261)[$e(340)](fr[$e(249)],$e(238))}),Ye(ur,""[$e(340)](fr[$e(311)]),{"#include <metalnessmap_fragment>":$e(297)[$e(340)](fr.metalness,$e(238))}),Ye(ur,""[$e(340)](fr.ao),{"#include <aomap_fragment>":$e(312)[$e(340)](fr.ao,$e(238))}),Ye(ur,""[$e(340)](fr[$e(262)]),{"#include <normal_fragment_maps>":$e(255)[$e(340)](fr.bump,$e(246))[$e(340)](fr.bump,$e(237))}),Ye(ur,""[$e(340)](fr[$e(250)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":$e(370)[$e(340)](fr[$e(250)],$e(425)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":$e(372)[$e(340)](fr[$e(250)],$e(238))}),Ye(ur,""[$e(340)](fr.clearcoat),{"material.clearcoat = clearcoat;":$e(239)[$e(340)](fr[$e(363)],";")}),Ye(ur,""[$e(340)](fr[$e(319)]),{"material.clearcoatRoughness = clearcoatRoughness;":$e(409)[$e(340)](fr.clearcoatRoughness,";")}),Ye(ur,""[$e(340)](fr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":$e(277)}),ur),vr=(Ye(lr={},"".concat(fr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[$e(340)](fr.position,$e(383))}),Ye(lr,""[$e(340)](fr[$e(421)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[$e(340)](fr[$e(420)],$e(241))}),Ye(lr,""[$e(340)](fr[$e(266)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(322).concat(fr[$e(266)],";\n  ")}),Ye(lr,""[$e(340)](fr[$e(245)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(322)[$e(340)](fr[$e(245)],$e(241))}),lr),mr={clearcoat:[fr[$e(363)],fr.clearcoatNormal,fr.clearcoatRoughness]},gr=$e(280),_r=$e(294),yr=$e(431),xr=$e(362),br=$e(431),Ir=$e(271),wr=[$e(344),"fragmentShader",$e(371),"uniforms",$e(295),$e(418),"silent"],Sr=function(n,t,e){var r=$e;return n[r(356)](t)[r(301)](e)},Mr=function(n,t){var e,r=$e;return new RegExp("\\b"[r(340)]((e=t,e[$e(379)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(357)](n)};function Rr(){var n=["lastIndexOf","call","pointSize",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","\n    vec3 objectNormal = ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","patchMap","action","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","MeshLambertMaterial","lights_physical_fragment","csm_AO","join","fragmentShader","info","MeshBasicMaterial","chain","valueOf","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","@@toPrimitive must return a primitive value.","MeshStandardMaterial","csm_PositionRaw","metalness","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","_patchShader","is not a constructor","ShadowMaterial","needsUpdate","bind","clone","clearcoatRoughness","indexOf","create","\n    gl_FragColor = ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","void main()","input","forEach","MeshToonMaterial","toUpperCase","_getCacheHash","void ","apply","37995GdJzsb","writable","construct","csm_ClearcoatNormal","getOwnPropertyDescriptor",'". Shader cannot compile.',"Derived constructors may only return object or undefined","__csm","concat","length",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","csm_ClearcoatRoughness","baseMaterial","type","debu","Arguments","normal","csm_DepthAlpha","ShaderChunk","3310236xIqHaO","58168AoiFLN",". Shader cannot compile.","Map","push","split","test","string","865752XorXbv","object","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","clearcoat","assign","done","36EOkCrj","clearcoatNormal","csm_Metalness","this hasn't been initialised - super() hasn't been called","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","vertexShader","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","prototype","csm_Clearcoat","generateUUID","customProgramCacheKey","default","iterator","replace","value","CSM: ","silent",", 1.0 );\n  ","csm_PointSize","configurable","key","return","#define IS_","\n            \n            void main() {\n          ","csm_Position",'{}.constructor("return this")( )',"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","RawShaderMaterial","isArray","_getMaterialDefine","4zeJmDz","substring","__proto__","includes","csm_DiffuseColor","log","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","warn","update","\n    gl_PointSize = ","name","csm_FragColor","csm_Bump","material.clearcoatRoughness = ","stateObject","MathUtils","cacheHash","_getPatchMapForMaterial","instanceID","toString","MeshPhysicalMaterial","837152XoNIgR","cacheKey","gger","position","positionRaw","PointsMaterial",'" is required to use output "',"setPrototypeOf"," );\n    ","Super expression must either be null or a function","371QyafKI","getOwnPropertySymbols",'CSM: Property "',"Cannot call a class as a function","\n    varying mat4 csm_internal_vModelViewMatrix;\n","7463160kRQrRz","find","toPrimitive","defineProperty","emissive",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ",";\n    ","material.clearcoat = ","function *\\( *\\)",";\n  ","\n    vec4 csm_internal_positionUnprojected = ","from","entries","fragColor"," - (dot(","set","console","roughness","depthAlpha","\n    vec3 totalEmissiveRadiance = ","trim","MeshMatcapMaterial","MeshPhongMaterial","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","function","46698sMhZZK","error","undefined","uniforms","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","bump","CustomShaderMaterial does not support RawShaderMaterial","\n    vec3 transformed = ","getPrototypeOf","diffuse","getOwnPropertyDescriptors","// #_CSM_#","onBeforeCompile","return (function() ","\n    \n"," is not available in ","exception","keys","table","csm_main_","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","constructor","get","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","filter","\n            ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isAlreadyExtended","void main() {","Object","_generateMaterial","MeshDepthMaterial"];return(Rr=function(){return n})()}function Er(n){return n?n.replace(/\s/g,""):void 0}function Ar(n){return n[$e(379)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=$e;!function(n,t){var e=cr;if(typeof t!==e(256)&&null!==t)throw new TypeError(e(426));n[e(373)]=Object[e(321)](t&&t[e(373)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(235)](n,"prototype",{writable:!1}),t&&or(n,t)}(c,G);var e,r,o,i,a=ar(c);function c(n){var t,e,r,o,i,s=cr,u=n[s(344)],l=n[s(302)],f=n[s(371)],p=n[s(260)],d=n.patchMap,h=n[s(418)],v=n[s(382)],m=Qe(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(cr(430))}(this,c),!function(n){var t=$e;try{new n}catch(e){if(e.message[t(320)](t(314))>=0)return!1}return!0}(u)?(e=u,Object[s(364)](e,m)):e=new u(m),e[s(345)]===s(393))throw new Error(s(263));(function(n,t){var e=$e;e(341),Object[e(364)](n,t);var r=Object[e(265)](t);Object[e(244)](Object[e(267)](r))[e(281)]((function(n){var t=e,r=typeof n[1][t(279)]===t(256),o="function"==typeof n[1][t(247)],i=typeof n[1][t(380)]===t(256),a=n[0]===t(278);return(r||o||i)&&!a}))[e(326)]((function(t){var r=e;typeof n[t[0]]!==r(256)&&Object[r(235)](n,t[0],t[1])}))})(rr(t=a[s(290)](this)),e),t[s(339)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(411)][s(375)](),type:e[s(345)],isAlreadyExtended:(r=e.onBeforeCompile,o=$e,i=r[o(415)]()[o(252)](),!(0===i[o(397)](i.indexOf("{")+1,i[o(289)]("}")).trim()[o(341)])),cacheHash:"",silent:v},t[s(260)]=Je(Je({},t[s(260)]||{}),p||{});var g=t[s(339)],_=g[s(302)],y=g[s(371)],x=t[s(260)];return t[s(339)].cacheHash=t[s(329)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(404),value:function(){var n=t,e=arguments[n(341)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(260)]=e[n(260)]||this[n(260)],Object[n(364)](this.__csm,e);var r=this.__csm,o=r[n(302)],i=r[n(371)],a=this[n(260)],c=this[n(329)]();this.__csm[n(412)]=c,this[n(287)](o,i,a)}},{key:t(318),value:function(){var n=t,e={baseMaterial:this.__csm[n(344)],fragmentShader:this[n(339)][n(302)],vertexShader:this[n(339)][n(371)],uniforms:this.uniforms,silent:this[n(339)][n(382)],patchMap:this[n(339)][n(295)],cacheKey:this[n(339)][n(418)]},r=new(this[n(278)])(e);return Object[n(364)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(339)],r=e[n(302)],o=e.vertexShader,i=this[n(260)],a=[Er(r),Er(o),i][n(281)]((function(n){return void 0!==n}));return a[n(341)]>0?Mn(a,{excludeValues:!0}):this[n(376)]()}},{key:t(287),value:function(n,e,r){var o=t,i=this;this[o(260)]=r||{},this[o(376)]=function(){var n=o;return i.__csm[n(412)]};var a=function(t){var r=o;try{var a=i[r(395)]();if(n){var c=i._patchShader(Ar(n),t[r(302)],!0);t[r(302)]=a+c}if(e){var s=i[r(313)](Ar(e),t[r(371)]);t[r(371)]="#define IS_VERTEX;\n"+s,t[r(371)]=a+t[r(371)]}t[r(260)]=Je(Je({},t[r(260)]),i.uniforms),i[r(260)]=t[r(260)]}catch(u){console[r(258)](u)}};if(this[o(339)][o(284)]){var c=this[o(269)];this[o(269)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(316)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=Je(Je({},this[o(413)]()),this[o(339)].patchMap);Object[o(244)](mr)[o(326)]((function(t){var e=o,r=tr(t,2),a=r[0],c=r[1][e(433)]((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error(e(429)[e(340)](a,e(423)).concat(c,e(337)))})),Object[o(244)](dr)[o(326)]((function(n){var t=tr(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object.keys(c)[o(326)]((function(t){var e=o;Object[e(274)](c[t])[e(326)]((function(r){var o=e,s=pr[t],u=i[o(339)].type;if("*"===t||Mr(n,t)){if(!(!s||Array[o(394)](s)&&s[o(399)](u)||"*"===s))throw new Error(o(381)[o(340)](t,o(272)).concat(u,o(353)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(276)+this[o(339)][o(414)][o(379)](/-/g,"_"),h=n[o(379)](/void\s+main\s*\(\s*\)/g,o(330)[o(340)](d,"()")),v=n[o(399)](o(324)),m=a[o(399)](o(268));return v&&(m&&this[o(339)].isAlreadyExtended?(a=a.replace(o(285),o(282)[o(340)](h,o(389))),s=a,u=o(268),l=o(282)[o(340)](d,"();\n            // #_CSM_#\n          "),p=s[(f=$e)(289)](u),a=-1===p?s:s[f(397)](0,p)+l+s.substring(p+u[f(341)])):a=a.replace(o(285),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?br:yr,o(323)).concat(gr,"\n    \n            ")[o(340)](h,o(392)).concat(_r,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ").concat(r?Ir:xr,o(307))[o(340)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(395),value:function(){var n=t,e=this[n(339)][n(345)];return e?n(388)[n(340)](e[n(328)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:"_getPatchMapForMaterial",value:function(){return"ShaderMaterial"===this[t(339)].type?vr:hr}}],i=cr,r&&er(e.prototype,r),o&&er(e,o),Object[i(235)](e,"prototype",{writable:!1}),c}();function Dr(n){function t(n){var e=cr;if(typeof n===e(358))return function(n){}[e(278)]("while (true) {}").apply("counter");1!==(""+n/n)[e(341)]||n%20==0?function(){return!0}.constructor(e(346)+e(419)).call(e(296)):function(){return!1}[e(278)](e(346)+"gger")[e(331)](e(410)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Fr;!function(n,t){const e=Fr,r=Or();for(;;)try{if(507420===-parseInt(e(145))/1+-parseInt(e(149))/2+-parseInt(e(152))/3+-parseInt(e(160))/4*(-parseInt(e(134))/5)+parseInt(e(162))/6*(-parseInt(e(156))/7)+parseInt(e(159))/8+parseInt(e(154))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(165)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zr(this,(function(){const n=Fr,t=new RegExp(n(133)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=jr(n(151));t[n(131)](r+n(121))&&e[n(131)](r+n(155))?jr():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(165)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(){const n=["2537364UPwwIg","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","21755295pPrOmm","input","28eIETFi","length","info","2355200DGzzjk","49308maCscF","roughness","1389684HmkNrH","warn","call","apply","chain","gger","object","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",'{}.constructor("return this")( )',"trace","while (true) {}","exception","counter","__proto__","test","toString","function *\\( *\\)","230TcqWZN","log","debu","prototype","MeshPhysicalMaterial","color","primitive","clearcoatRoughness","#ff00fc","\n\t\t\t","setStyle","105282GdjwOC","metalness","constructor","clearcoat","1787502BPrpuU","stateObject","init"];return(Or=function(){return n})()}Cr(void 0,(function(){const n=Fr;let t;try{t=Function("return (function() "+n(125)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(135),n(163),n(158),"error",n(128),"table",n(126)];for(let i=0;i<r[n(157)];i++){const t=Cr[n(147)][n(137)].bind(Cr),o=r[i],a=e[o]||t;t[n(130)]=Cr.bind(Cr),t[n(132)]=a[n(132)].bind(a),e[o]=t}}))();const kr=[Pr(123)];function Fr(n,t){const e=Or();return(Fr=function(n,t){return e[n-=121]})(n,t)}const Br=nn({__name:"index",props:{color:{default:Pr(142)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(138)],metalness:e[t(146)],roughness:e[t(161)],clearcoat:e[t(148)],clearcoatRoughness:e[t(141)],color:e[t(139)],vertexShader:t(124),fragmentShader:t(143)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(153)},o=new Tr(r);return ln((()=>{const n=t;o[n(139)][n(144)](e[n(139)]),o[n(146)]=e[n(146)],o[n(161)]=e[n(161)],o[n(148)]=e[n(148)],o.clearcoatRoughness=e[n(141)]})),(n,e)=>{const r=t;return on(),an(r(140),{object:Q(o)},null,8,kr)}}});function jr(n){function t(n){const e=Fr;if("string"==typeof n)return function(n){}[e(147)](e(127))[e(165)](e(129));1!==(""+n/n)[e(157)]||n%20==0?function(){return!0}[e(147)](e(136)+e(122))[e(164)]("action"):function(){return!1}[e(147)](e(136)+e(122))[e(165)](e(150)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Lr();;)try{if(348509===-parseInt(e(431))/1+parseInt(e(422))/2+parseInt(e(413))/3+parseInt(e(428))/4+-parseInt(e(425))/5+-parseInt(e(414))/6+parseInt(e(411))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Hr,t=new RegExp(n(408)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zr("init");t[n(418)](r+"chain")&&e[n(418)](r+n(437))?Zr():r("0")}))()}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lr(){var n=["gger","error","7280546lXXXFj","constructor","320832kEjUyy","1622952ZNDUka",'{}.constructor("return this")( )',"action","console","test","apply","return (function() ","call","294810JozaGi","log","info","3238925veVBJu","prototype","while (true) {}","118760mUCVcv","length","__proto__","57331rcyUYh","counter","exception","bind","debu","toString","input","function *\\( *\\)"];return(Lr=function(){return n})()}function Hr(n,t){var e=Lr();return(Hr=function(n,t){return e[n-=408]})(n,t)}function Zr(n){function t(n){var e=Hr;if("string"==typeof n)return function(n){}.constructor(e(427)).apply(e(432));1!==(""+n/n)[e(429)]||n%20==0?function(){return!0}[e(412)]("debu"+e(409))[e(421)](e(416)):function(){return!1}[e(412)](e(435)+e(409))[e(419)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Nr(void 0,(function(){for(var n=Hr,t=function(){var n,t=Hr;try{n=Function(t(420)+t(415)+");")()}catch(e){n=window}return n}(),e=t[n(417)]=t[n(417)]||{},r=[n(423),"warn",n(424),n(410),n(433),"table","trace"],o=0;o<r[n(429)];o++){var i=Nr[n(412)][n(426)][n(434)](Nr),a=r[o],c=e[a]||i;i[n(430)]=Nr.bind(Nr),i[n(436)]=c[n(436)].bind(c),e[a]=i}}))();export{Ge as C,Br as _,Xn as a,st as b,It as c,At as d,Bt as e,Kt as f,je as g,Me as h,ht as u};

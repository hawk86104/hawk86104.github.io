import{a3 as t,C as e,a6 as n}from"./three.0bBjBDi41721298764655.js";import{$ as r,T as o,d as a,x as s}from"./@tresjs.iXEJQd7J1721298764655.js";import{a as i}from"./index.2g5Dz76W1721298764655.js";import"./index.IAj8AJLd1721298764655.js";import{C as l}from"./three-custom-shader-material.wt6if9qU1721298764655.js";import"./object-hash.eR6rYsIK1721298764655.js";import"./@amap.x_Go35DX1721298764655.js";import"./glsl-tokenizer.ZFLos1PC1721298764655.js";import{p as c}from"./gl-noise.BrVtymbx1721298764655.js";import{d as u,b as p,a1 as f,w as g,o as h,D as v,J as m,j as d,u as _,r as b,f as w,g as y,aj as j,ak as x,m as M,al as z}from"./@vue.Q1VpS3901721298764655.js";import{P as C}from"./tweakpane.yHWGBmom1721298764655.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.KPSmufWe1721298764655.js";import"./@vueuse.hS-CVzal1721298764655.js";import"./three-stdlib.z4qNuiyK1721298764655.js";import"./@pmndrs.18kFuzzQ1721298764655.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.7qb621vO1721298764655.js";import"./all.three.mckUbRfL1721298764655.js";import"./oimophysics.x0jH7fze1721298764655.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2AxMW3Dx1721298764655.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.uVOfr_Yu1721298764655.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.XB6-BBD21721298764655.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.8y7I-Eu11721298764655.js";import"./glsl-token-string.BCXfLWyP1721298764655.js";import"./glsl-token-functions._ALfgfbj1721298764655.js";import"./jszip.-g-_Ii-P1721298764655.js";const I=k;!function(t,e){const n=k,r=G();for(;;)try{if(100957===-parseInt(n(453))/1+parseInt(n(417))/2*(-parseInt(n(451))/3)+parseInt(n(422))/4*(-parseInt(n(404))/5)+-parseInt(n(403))/6*(-parseInt(n(463))/7)+-parseInt(n(458))/8+parseInt(n(410))/9+-parseInt(n(420))/10*(-parseInt(n(413))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(456)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){S(this,(function(){const t=k,e=new RegExp(t(438)),n=new RegExp(t(434),"i"),r=D(t(460));e[t(447)](r+"chain")&&n[t(447)](r+t(423))?D():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(){const t=["2LsqIRa","fragmentShader","#b3ffff","22020ydVnJB","warn","4GFkIFf","input","value","gger","TresMesh","toString","height","string","__proto__","table","rotation-x","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","needsUpdate","waterColor","customWaterMesh","function *\\( *\\)","waterHighlight","baseMaterial","Flatshading","Color","bind","exception","debu","fragment","test","constructor","uTime","args","141708BlOOxP","side","128007wFvzNn","while (true) {}","counter","apply","tmRef","216456yBLKqV","convertLinearToSRGB","init","info","#52a7f7","17003DvzCkn","stateObject","366HHZjdU","28410TSHTsh","trace","MeshPhysicalMaterial","console","call","material","416394tpvybp","brightness","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","572ZtyNgD",'{}.constructor("return this")( )',"error","DoubleSide"];return(G=function(){return t})()}H(void 0,(function(){const t=k;let e;try{e=Function(t(433)+t(414)+");")()}catch(o){e=window}const n=e[t(407)]=e[t(407)]||{},r=["log",t(421),t(461),t(415),t(444),t(431),t(405)];for(let a=0;a<r.length;a++){const e=H[t(448)].prototype.bind(H),o=r[a],s=n[o]||e;e[t(430)]=H[t(443)](H),e[t(427)]=s[t(427)][t(443)](s),n[o]=e}}))();const O=[I(432)],B=[I(450)];function k(t,e){const n=G();return(k=function(t,e){return n[t-=403]})(t,e)}const F=u({__name:I(437),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(462)},waterHighlight:{default:I(419)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const a=I,s=t,i=p(null),u={vertex:a(412),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},b={uTime:{value:0},waterColor:{value:new e(s.waterColor).convertLinearToSRGB()},waterHighlight:{value:new(n[a(442)])(s[a(439)])[a(459)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[a(411)]},uHeight:{value:s[a(428)]}},{onLoop:w}=r();return w((({elapsed:t})=>{const e=a;b[e(449)][e(424)]=-t/5})),f((()=>{const t=a;s[t(428)]&&(b.uHeight[t(424)]=s.height),s[t(436)]&&(b.waterColor.value=new e(s.waterColor)[t(459)]()),s.waterHighlight&&(b[t(439)][t(424)]=new(n[t(442)])(s[t(439)])[t(459)]()),s[t(411)]&&(b[t(411)].value=s[t(411)])})),g((()=>s.Flatshading),(t=>{const e=a;i[e(424)].material[e(435)]=!0})),g((()=>s[a(440)]),(t=>{const e=a,r=new l({baseMaterial:n[t],vertexShader:c(u.vertex),fragmentShader:u.fragment,uniforms:b,flatShading:s[e(441)],side:n[e(416)],roughness:.2,metalness:.1,silent:!0});i[e(424)][e(409)].dispose(),i.value[e(409)]=r})),(t,e)=>{const r=a;return h(),v(r(426),{ref_key:r(457),ref:i,"rotation-x":-Math.PI/2},[m("TresBoxGeometry",{args:[5,5,t.height,64,64,1]},null,8,B),d(_(o),{baseMaterial:n[r(406)],vertexShader:_(c)(u.vertex),fragmentShader:u[r(446)],uniforms:b,side:n[r(416)],roughness:.2,metalness:.1,flatShading:t[r(441)],silent:""},null,8,[r(440),"vertexShader",r(418),r(452),"flatShading"])],8,O)}}});function D(t){function e(t){const n=k;if(typeof t===n(429))return function(t){}.constructor(n(454))[n(456)](n(455));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(445)+n(425))[n(408)]("action"):function(){return!1}[n(448)]("debugger")[n(456)](n(464)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=W;function W(t,e){const n=V();return(W=function(t,e){return n[t-=308]})(t,e)}!function(t,e){const n=W,r=V();for(;;)try{if(535591===parseInt(n(335))/1+parseInt(n(342))/2*(-parseInt(n(317))/3)+parseInt(n(345))/4*(parseInt(n(362))/5)+parseInt(n(320))/6+-parseInt(n(327))/7+-parseInt(n(336))/8*(-parseInt(n(348))/9)+-parseInt(n(350))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){N(this,(function(){const t=W,e=new RegExp(t(326)),n=new RegExp(t(374),"i"),r=U(t(356));e[t(316)](r+t(351))&&n.test(r+t(328))?U():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[W(329)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();L(void 0,(function(){const t=W;let e;try{e=Function(t(370)+t(313)+");")()}catch(o){e=window}const n=e[t(364)]=e.console||{},r=[t(354),t(367),"info",t(330),t(309),t(341),"trace"];for(let a=0;a<r.length;a++){const e=L.constructor.prototype[t(314)](L),o=r[a],s=n[o]||e;e[t(337)]=L[t(314)](L),e[t(353)]=s[t(353)][t(314)](s),n[o]=e}}))();const R=m(P(360),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),A=m(P(310),{intensity:.5},null,-1),Z=m("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1);function V(){const t=["addBinding","MeshStandardMaterial","3751004rzzhUs","浪头颜色","waterHighlight","1561734NjaEtV","gger","14674470hAdZxv","chain","value","toString","log","MeshLambertMaterial","init","MeshToonMaterial","label","MeshDepthMaterial","TresPerspectiveCamera","brightness","5ibVQeS","string","console","neg-y.jpg","debu","warn","height","call","return (function() ","MeshBasicMaterial","counter","ACESFilmicToneMapping","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshNormalMaterial","length","constructor","exception","TresAmbientLight","customWater","Flatshading",'{}.constructor("return this")( )',"bind","pos-y.jpg","test","962790LRcGXL","neg-x.jpg","change","1468806grNvdY","水体颜色","action","baseMaterial","#b3ffff","target","function *\\( *\\)","730422ntKOyQ","input","apply","error","list","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","while (true) {}","MeshPhysicalMaterial","725184UZNcKq","24vtVshI","__proto__","neg-z.jpg","waterColor","MeshPhongMaterial","table","2QwbFHy"];return(V=function(){return t})()}const E=u({__name:P(311),setup(t){const e=P,r=b({alpha:!0,toneMapping:n[e(373)],windowSize:!0,clearColor:10066329}),o=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:e(324),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),u=new C;return u[e(343)](c,e(368),{label:"高度",min:.1,max:5,step:.1}),u[e(343)](c,e(339),{label:e(321)}),u[e(343)](c,e(347),{label:e(346)}),u[e(343)](c,e(361),{label:"亮度",min:0,max:1,step:.01}),u[e(343)](c,e(312),{label:e(312)}),u.addBlade({view:e(331),label:"材质",options:[{text:e(334),value:e(334)},{text:e(371),value:e(371)},{text:e(375),value:e(375)},{text:e(344),value:e(344)},{text:"MeshPhongMaterial",value:e(340)},{text:"MeshToonMaterial",value:e(357)},{text:e(355),value:e(355)},{text:e(359),value:"MeshDepthMaterial"}],value:c[e(323)]}),u.on(e(319),(t=>{const n=e;"材质"===t[n(325)][n(358)]&&(c[n(323)]=t[n(352)])})),(t,n)=>{const u=e;return h(),w(_(s),M(r,{"window-size":""}),{default:y((()=>[R,d(_(a),j(x(o)),null,16),A,Z,d(F,j(x(c)),null,16),d(_(T),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:["pos-x.jpg",u(318),u(315),u(365),"pos-z.jpg",u(338)],path:u(332)})])),_:1}))])),_:1},16)}}});function U(t){function e(t){const n=W;if(typeof t===n(363))return function(t){}[n(308)](n(333)).apply(n(372));1!==(""+t/t)[n(376)]||t%20==0?function(){return!0}[n(308)](n(366)+n(349))[n(369)](n(322)):function(){return!1}[n(308)](n(366)+"gger")[n(329)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.t0fQ7WBC1726139596986.js";import{B as i,V as s,cp as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.ewwqFbMB1726139596986.js";import{U as l,e as d,F as p}from"./@tresjs.ml1V726H1726139596986.js";import{c as m}from"./simplex-noise.P9JMzoHY1726139596986.js";import{d as g,a3 as f,o as y,E as b,u as S,r as v,j as x,g as w,m as P,F as I}from"./@vue.JNsx1iN61726139596986.js";import"./index.mYRyS9ed1726139596986.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.FKFkxAmE1726139596986.js";import"./three-custom-shader-material.UXiDE7Tt1726139596986.js";import"./object-hash.FoPRLmFN1726139596986.js";import"./@amap.Fadeb9eG1726139596986.js";import"./jszip.fP2cdsII1726139596986.js";import"./glsl-tokenizer.AMiuccS21726139596986.js";import"./glsl-token-string.sQYJMTSX1726139596986.js";import"./glsl-token-functions.JTK3IqoC1726139596986.js";import"./@vueuse.leIfNolX1726139596986.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.gpQJLdF01726139596986.js";import"./all.three.OAsZWQFw1726139596986.js";import"./oimophysics.x0jH7fze1726139596986.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang._1nP8CbO1726139596986.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.c-SWEGDV1726139596986.js";import"./index.BN5GHgZp1726139596986.js";import"./three-stdlib.XegO5T8a1726139596986.js";import"./@pmndrs.i3ABMTfO1726139596986.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.mc6Ijmec1726139596986.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.vEvF-rlt1726139596986.js";const M=V;!function(t,i){const s=V,n=C();for(;;)try{if(580109===-parseInt(s(424))/1+parseInt(s(363))/2+parseInt(s(384))/3+parseInt(s(451))/4*(-parseInt(s(494))/5)+-parseInt(s(378))/6+parseInt(s(437))/7+parseInt(s(452))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(479)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=V,i=new RegExp(t(460)),s=new RegExp(t(403),"i"),n=j(t(433));i[t(503)](n+t(473))&&s[t(503)](n+t(483))?j():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(479)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=V,i=function(){const t=V;let i;try{i=Function(t(471)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(401)]=i[t(401)]||{},n=["log",t(417),"info","error",t(482),t(402),t(410)];for(let e=0;e<n.length;e++){const i=A[t(368)][t(400)][t(358)](A),r=n[e],o=s[r]||i;i[t(409)]=A[t(358)](A),i.toString=o[t(411)].bind(o),s[r]=i}}))();class R extends i{constructor(t={}){const i=V;super(),this[i(406)]=!0,this.type=i(448),this.init(R[i(369)](t,t)),this[i(445)]()}static[M(336)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(467)](Math.random());const n={currentSeed:0,random:function(){const e=s[n[t(421)]];return n.currentSeed=(n.currentSeed+1)%i,e},getSeed:function(){return n.currentSeed/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(439)](s*i)%i}};return n}static[M(369)](t={},i={}){const n=M,e=function(s){return i===t?s:s[V(367)]()};return t[n(490)]=void 0!==i[n(490)]?e(i[n(490)]):new s(0,100,0),t[n(423)]=void 0!==i[n(423)]?e(i.destOffset):new s(0,0,0),t.timeScale=void 0!==i[n(354)]?i[n(354)]:1,t[n(353)]=void 0!==i[n(353)]?i.roughness:.9,t.straightness=void 0!==i[n(387)]?i[n(387)]:.7,t.up0=void 0!==i[n(420)]?e(i.up0):new s(0,0,1),t[n(450)]=void 0!==i[n(450)]?e(i[n(450)]):new s(0,0,1),t[n(359)]=void 0!==i[n(359)]?i[n(359)]:1,t.radius1=void 0!==i[n(478)]?i[n(478)]:1,t[n(390)]=void 0!==i[n(390)]?i[n(390)]:.5,t[n(486)]=void 0!==i[n(486)]?i.radius1Factor:.2,t.minRadius=void 0!==i[n(364)]?i[n(364)]:.2,t[n(443)]=void 0!==i[n(443)]?i[n(443)]:void 0===i.birthTime||void 0===i[n(462)],t[n(484)]=i[n(484)],t[n(462)]=i.deathTime,t[n(457)]=void 0!==i.propagationTimeFactor?i[n(457)]:.1,t.vanishingTimeFactor=void 0!==i[n(444)]?i.vanishingTimeFactor:.9,t[n(395)]=void 0!==i[n(395)]?i[n(395)]:4,t.subrayDutyCycle=void 0!==i[n(499)]?i[n(499)]:.6,t[n(371)]=void 0!==i.maxIterations?i.maxIterations:9,t[n(431)]=void 0!==i[n(431)]&&i.isStatic,t.ramification=void 0!==i[n(497)]?i.ramification:5,t[n(352)]=void 0!==i.maxSubrayRecursion?i[n(352)]:3,t[n(505)]=void 0!==i[n(505)]?i[n(505)]:.6,t.generateUVs=void 0!==i[n(468)]&&i.generateUVs,t[n(415)]=i[n(415)],t[n(355)]=i.noiseSeed,t[n(335)]=i.onDecideSubrayCreation,t[n(434)]=i[n(434)],t}[M(375)](t){const i=M;this[i(431)]||(this[i(488)][i(443)]||this[i(488)][i(484)]<=t&&t<=this[i(488)].deathTime?(this.updateMesh(t),t<this[i(412)][0].endPropagationTime?this.state=R.RAY_PROPAGATING:t>this[i(412)][0][i(382)]?this.state=R[i(459)]:this[i(441)]=R[i(419)],this[i(388)]=!0):(this[i(388)]=!1,t<this[i(488)][i(484)]?this[i(441)]=R.RAY_UNBORN:this[i(441)]=R[i(501)]))}[M(433)](t){const i=M;this.rayParameters=t,this.maxIterations=void 0!==t[i(371)]?Math[i(439)](t[i(371)]):9,t.maxIterations=this.maxIterations,this.isStatic=void 0!==t.isStatic&&t[i(431)],t.isStatic=this[i(431)],this[i(497)]=void 0!==t[i(497)]?Math[i(439)](t.ramification):5,t[i(497)]=this.ramification,this[i(352)]=void 0!==t[i(352)]?Math[i(439)](t[i(352)]):3,t[i(352)]=this.maxSubrayRecursion,this.recursionProbability=void 0!==t[i(505)]?t[i(505)]:.6,t[i(505)]=this.recursionProbability,this[i(468)]=void 0!==t[i(468)]&&t[i(468)],t[i(468)]=this[i(468)],void 0!==t[i(415)]?(this[i(415)]=t[i(415)],this[i(438)]=t[i(415)],void 0!==t[i(355)]&&this[i(438)][i(414)](t[i(355)])):(this[i(415)]=R[i(336)](),this.seedGenerator=Math),void 0!==t[i(335)]?this[i(335)]=t[i(335)]:(this[i(356)](),void 0!==t[i(434)]&&(this[i(434)]=t[i(434)])),this[i(441)]=R.RAY_INITIALIZED,this[i(466)]=Math.ceil(1+Math[i(357)](this[i(497)],Math.max(0,this[i(352)]-1))),t[i(466)]=this[i(466)],this[i(427)]=2*(1<<this[i(371)]),this[i(412)]=[];for(let s=0;s<this[i(466)];s++)this.subrays[i(467)](this.createSubray());this.raySegments=[];for(let s=0;s<this[i(427)];s++)this[i(491)][i(467)](this.createSegment());this[i(339)]=0,this[i(349)]=0,this[i(380)]=null,this[i(340)]=this[i(468)]?this.createTriangleVerticesWithUVs:this[i(377)],this[i(407)]=0,this[i(465)]=null,this.currentSegmentIndex=0,this[i(422)]=!1,this[i(480)]=0,this.currentVertex=0,this.currentIndex=0,this[i(446)]=0,this.currentUVCoordinate=0,this.vertices=null,this.uvs=null,this.indices=null,this.positionAttribute=null,this[i(487)]=null,this[i(435)]=m(this[i(438)].random),this.simplexY=m(this[i(438)].random),this.simplexZ=m(this[i(438)].random),this[i(343)]=new s,this[i(470)]=new s,this[i(453)]=new s,this[i(389)]=new s,this.middlePos=new s,this.middleLinPos=new s,this[i(455)]=new s,this[i(405)]=new s,this[i(493)]=new s}createMesh(){const t=M,i=1<<this[t(371)],s=3*(i+1)*this[t(466)],o=18*i*this[t(466)];this[t(393)]=new Float32Array(3*s),this[t(502)]=new Uint32Array(o),this.generateUVs&&(this[t(485)]=new Float32Array(2*s)),this[t(383)](0),this[t(372)](new n(this.indices,1)),this[t(429)]=new e(this[t(393)],3),this[t(456)](t(370),this.positionAttribute),this.generateUVs&&(this[t(487)]=new e(new Float32Array(this.uvs),2),this[t(456)]("uv",this.uvsAttribute)),!this[t(431)]&&(this[t(454)][t(342)]=r,this[t(429)][t(342)]=r,this[t(468)]&&(this[t(487)][t(342)]=r)),this[t(393)]=this.positionAttribute[t(498)],this[t(502)]=this[t(454)][t(498)],this[t(468)]&&(this.uvs=this[t(487)].array)}[M(398)](t){const i=M;this[i(383)](t),this[i(489)][i(346)]=this[i(397)],this[i(454)][i(426)]=!0,this[i(429)][i(426)]=!0,this[i(468)]&&(this.uvsAttribute.needsUpdate=!0)}[M(383)](t){const i=M,s=this;this[i(362)]=0,this[i(397)]=0,this[i(446)]=0,this.currentUVCoordinate=0,this[i(360)](t,(function(n){const e=i,r=s[e(465)];t<r[e(484)]||(this[e(488)][e(443)]&&0==s[e(465)][e(430)]?(s[e(347)](n),s[e(335)](n,s)):t<r[e(413)]?s.timeFraction>=n[e(476)]*r[e(457)]&&(s[e(347)](n),s[e(335)](n,s)):t<r.beginVanishingTime?(s[e(347)](n),s[e(335)](n,s)):(s[e(349)]<=r[e(444)]+n[e(492)]*(1-r[e(444)])&&s[e(347)](n),s[e(335)](n,s)))}))}addNewSubray(){return this.subrays[this.numSubrays++]}[M(337)](t,i){const s=M;t[s(481)][s(366)](i[s(490)]),t[s(495)][s(366)](i[s(423)]),t[s(420)][s(366)](i.up0),t[s(450)][s(366)](i.up1),t[s(359)]=i[s(359)],t[s(478)]=i.radius1,t[s(484)]=i[s(484)],t.deathTime=i.deathTime,t[s(354)]=i[s(354)],t[s(353)]=i[s(353)],t[s(387)]=i.straightness,t[s(457)]=i[s(457)],t[s(444)]=i[s(444)],t.maxIterations=this[s(371)],t.seed=void 0!==i[s(355)]?i[s(355)]:0,t[s(430)]=0}[M(360)](t,i){const s=M;this[s(339)]=t,this[s(380)]=i,this[s(407)]=0,this.initSubray(this[s(425)](),this[s(488)]);for(let n=0;n<this[s(407)];n++){const i=this[s(412)][n];this.currentSubray=i,this.randomGenerator[s(414)](i[s(496)]),i[s(413)]=o[s(475)](i[s(484)],i[s(462)],i[s(457)]),i[s(382)]=o[s(475)](i[s(462)],i[s(484)],1-i.vanishingTimeFactor);const e=this[s(415)][s(333)];i[s(334)][s(394)](e(),e(),e())[s(374)](1e3),i[s(361)][s(394)](e(),e(),e()).multiplyScalar(1e3),this[s(349)]=(t-i[s(484)])/(i[s(462)]-i.birthTime),this[s(504)]=0,this.isInitialSegment=!0;const r=this[s(391)]();r[s(436)]=0,r.pos0.copy(i[s(481)]),r.pos1[s(366)](i.pos1),r.linPos0.copy(i[s(334)]),r[s(361)][s(366)](i[s(361)]),r[s(420)][s(366)](i[s(420)]),r[s(450)][s(366)](i[s(450)]),r[s(359)]=i[s(359)],r.radius1=i[s(478)],r[s(476)]=0,r[s(492)]=1,r.positionVariationFactor=1-i[s(387)],this[s(480)]=this[s(497)]*Math[s(357)](this.recursionProbability,i[s(430)])/(1<<i[s(371)]),this.fractalRayRecursive(r)}this.currentSegmentCallback=null,this[s(465)]=null}[M(344)](t){const i=M;if(t[i(436)]>=this.currentSubray.maxIterations)return void this.currentSegmentCallback(t);this[i(343)][i(392)](t[i(495)],t[i(481)]);let s=this[i(343)][i(472)]();s<1e-6&&(this.forwards[i(394)](0,0,.01),s=this[i(343)][i(472)]());const n=.5*(t.radius0+t[i(478)]),e=.5*(t.fraction0+t[i(492)]),r=this[i(339)]*this[i(465)][i(354)]*Math[i(357)](2,t.iteration);this[i(379)].lerpVectors(t[i(481)],t[i(495)],.5),this.middleLinPos[i(399)](t[i(334)],t[i(361)],.5);const o=this[i(469)];this.newPos[i(394)](this[i(435)](o.x,o.y,o.z,r),this[i(386)](o.x,o.y,o.z,r),this[i(418)](o.x,o.y,o.z,r)),this[i(455)][i(374)](t[i(345)]*s),this.newPos[i(464)](this[i(379)]);const a=this[i(391)]();a[i(481)][i(366)](t.pos0),a[i(495)][i(366)](this[i(455)]),a[i(334)][i(366)](t[i(334)]),a.linPos1[i(366)](this.middleLinPos),a[i(420)][i(366)](t.up0),a[i(450)][i(366)](t[i(450)]),a.radius0=t[i(359)],a[i(478)]=n,a[i(476)]=t[i(476)],a[i(492)]=e,a[i(345)]=t[i(345)]*this.currentSubray.roughness,a[i(436)]=t.iteration+1;const h=this[i(391)]();h[i(481)].copy(this.newPos),h[i(495)][i(366)](t[i(495)]),h[i(334)][i(366)](this.middleLinPos),h[i(361)][i(366)](t[i(361)]),this[i(493)][i(458)](t[i(420)],this[i(343)][i(348)]()),h.up0.crossVectors(this.forwards,this[i(493)])[i(348)](),h[i(450)].copy(t[i(450)]),h[i(359)]=n,h[i(478)]=t[i(478)],h[i(476)]=e,h[i(492)]=t[i(492)],h[i(345)]=t[i(345)]*this.currentSubray.roughness,h[i(436)]=t[i(436)]+1,this[i(344)](a),this[i(344)](h)}createPrism(t){const i=M;this.forwardsFill.subVectors(t[i(495)],t[i(481)]).normalize(),this.isInitialSegment&&(this[i(340)](t[i(481)],t.up0,this[i(470)],t[i(359)],0),this[i(422)]=!1),this.currentCreateTriangleVertices(t[i(495)],t[i(420)],this[i(470)],t[i(478)],t[i(492)]),this[i(351)]()}[M(377)](t,i,s,n){const e=M;this.side[e(458)](i,s).multiplyScalar(n*R[e(373)]),this[e(389)][e(366)](i).multiplyScalar(-n*R[e(376)]);const r=this[e(405)],o=this.vertices;r[e(366)](t).sub(this[e(453)])[e(464)](this[e(389)]),o[this[e(446)]++]=r.x,o[this[e(446)]++]=r.y,o[this[e(446)]++]=r.z,r[e(366)](t).add(this[e(453)])[e(464)](this[e(389)]),o[this[e(446)]++]=r.x,o[this[e(446)]++]=r.y,o[this[e(446)]++]=r.z,r[e(366)](i)[e(374)](n)[e(464)](t),o[this.currentCoordinate++]=r.x,o[this[e(446)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(362)]+=3}[M(416)](t,i,s,n,e){const r=M;this.side.crossVectors(i,s)[r(374)](n*R[r(373)]),this.down.copy(i)[r(374)](-n*R[r(376)]);const o=this[r(405)],a=this[r(393)],h=this.uvs;o[r(366)](t).sub(this[r(453)]).add(this[r(389)]),a[this[r(446)]++]=o.x,a[this[r(446)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(341)]++]=e,h[this[r(341)]++]=0,o[r(366)](t)[r(464)](this.side)[r(464)](this.down),a[this[r(446)]++]=o.x,a[this[r(446)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(341)]++]=e,h[this[r(341)]++]=.5,o[r(366)](i).multiplyScalar(n)[r(464)](t),a[this[r(446)]++]=o.x,a[this[r(446)]++]=o.y,a[this[r(446)]++]=o.z,h[this[r(341)]++]=e,h[this[r(341)]++]=1,this[r(362)]+=3}[M(351)](t){const i=M,s=this[i(502)];t=this[i(362)]-6,s[this[i(397)]++]=t+1,s[this[i(397)]++]=t+2,s[this[i(397)]++]=t+5,s[this[i(397)]++]=t+1,s[this[i(397)]++]=t+5,s[this[i(397)]++]=t+4,s[this[i(397)]++]=t+0,s[this[i(397)]++]=t+1,s[this[i(397)]++]=t+4,s[this[i(397)]++]=t+0,s[this[i(397)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(397)]++]=t+2,s[this[i(397)]++]=t+0,s[this[i(397)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(397)]++]=t+3,s[this.currentIndex++]=t+5}[M(356)](){const t=M,i=this[t(415)][t(333)];this[t(335)]=function(s,n){const e=t,r=n[e(465)],a=n.rayParameters[e(395)],h=n.rayParameters.subrayDutyCycle,c=n[e(488)].isEternal&&0==r[e(430)]?-i()*a:o[e(475)](r.birthTime,r[e(413)],s[e(476)])-i()*a,u=n.time-c,l=Math[e(439)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(480)]),r[e(430)]<n[e(352)]&&n[e(407)]<n[e(466)]&&i()<p){const t=n[e(425)](),o=n[e(415)][e(350)]();t[e(496)]=d,n[e(415)][e(414)](d),t[e(430)]=r[e(430)]+1,t[e(371)]=Math.max(1,r[e(371)]-1),t[e(334)][e(394)](i(),i(),i())[e(374)](1e3),t[e(361)].set(i(),i(),i()).multiplyScalar(1e3),t[e(420)][e(366)](r[e(420)]),t.up1[e(366)](r[e(450)]),t[e(359)]=s[e(359)]*n[e(488)][e(390)],t[e(478)]=Math[e(474)](n.rayParameters[e(364)],s[e(478)]*n[e(488)][e(486)]),t[e(484)]=c+l*a,t.deathTime=t[e(484)]+a*h,!n[e(488)][e(443)]&&0==r[e(430)]&&(t.birthTime=Math[e(432)](t[e(484)],r[e(484)]),t[e(462)]=Math[e(474)](t[e(462)],r[e(462)])),t[e(354)]=2*r[e(354)],t[e(353)]=r[e(353)],t[e(387)]=r[e(387)],t[e(457)]=r[e(457)],t[e(444)]=r[e(444)],n[e(434)](s,r,t,n),n.randomGenerator[e(414)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(434)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(396)]=function(s,o,h,c,u,l){const d=t;h.pos0[d(366)](s[d(481)]),n.subVectors(o[d(495)],o[d(481)]),e.copy(n).normalize(),n.multiplyScalar(s[d(476)]+(1-s[d(476)])*(i()*c));const p=n[d(472)]();r[d(458)](o[d(420)],e);const m=2*Math.PI*i();r[d(374)](Math[d(477)](m)),a[d(366)](o[d(420)])[d(374)](Math.sin(m)),h[d(495)][d(366)](r).add(a)[d(374)](p*u*(l+i()*(1-l)))[d(464)](n)[d(464)](o[d(481)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const d=t;h.pos0[d(366)](s[d(481)]),n[d(392)](o[d(495)],o.pos0),e[d(366)](n)[d(348)](),n[d(374)](s[d(476)]+(1-s[d(476)])*((2*i()-1)*c));const p=n[d(472)]();r[d(458)](o[d(420)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[d(477)](m)),a.copy(o[d(420)])[d(374)](Math[d(442)](m)),h[d(495)][d(366)](r).add(a)[d(374)](p*u*(l+i()*(1-l)))[d(464)](n).add(o.pos0)}}[M(463)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(385)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(391)](){const t=M;return this[t(491)][this[t(504)]++]}[M(366)](t){const i=M;return super[i(366)](t),this[i(433)](R.copyParameters({},t[i(488)])),this}[M(367)](){const t=M;return new(this[t(368)])(R[t(369)]({},this[t(488)]))}}function C(){const t=["console","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","vPos","isLightningStrike","numSubrays","action","__proto__","trace","toString","subrays","endPropagationTime","setSeed","randomGenerator","createTriangleVerticesWithUVs","warn","simplexZ","RAY_STEADY","up0","currentSeed","isInitialSegment","destOffset","746766CUIPhW","addNewSubray","needsUpdate","maxRaySegments","debu","positionAttribute","recursion","isStatic","max","init","onSubrayCreation","simplexX","iteration","6551538FWsugS","seedGenerator","floor","gger","state","sin","isEternal","vanishingTimeFactor","createMesh","currentCoordinate","RAY_PROPAGATING","LightningStrike","RAY_UNBORN","up1","931724ghWqcZ","11339864bjBWlg","side","index","newPos","setAttribute","propagationTimeFactor","crossVectors","RAY_VANISHING","function *\\( *\\)","counter","deathTime","createSubray","add","currentSubray","maxSubrays","push","generateUVs","middleLinPos","forwardsFill","return (function() ","length","chain","min","lerp","fraction0","cos","radius1","apply","subrayProbability","pos0","exception","input","birthTime","uvs","radius1Factor","uvsAttribute","rayParameters","drawRange","sourceOffset","raySegments","fraction1","cross1","15lWNfLW","pos1","seed","ramification","array","subrayDutyCycle","stateObject","RAY_EXTINGUISHED","indices","test","currentSegmentIndex","recursionProbability","random","linPos0","onDecideSubrayCreation","createRandomGenerator","initSubray","string","time","currentCreateTriangleVertices","currentUVCoordinate","usage","forwards","fractalRayRecursive","positionVariationFactor","count","createPrism","normalize","timeFraction","getSeed","createPrismFaces","maxSubrayRecursion","roughness","timeScale","noiseSeed","createDefaultSubrayCreationCallbacks","pow","bind","radius0","fractalRay","linPos1","currentVertex","563606hQtqMQ","minRadius","RAY_INITIALIZED","copy","clone","constructor","copyParameters","position","maxIterations","setIndex","COS30DEG","multiplyScalar","update","SIN30DEG","createTriangleVerticesWithoutUVs","5951550HtEFBm","middlePos","currentSegmentCallback","call","beginVanishingTime","fillMesh","1147119SjruUL","createSegment","simplexY","straightness","visible","down","radius0Factor","getNewSegment","subVectors","vertices","set","subrayPeriod","subrayConePosition","currentIndex","updateMesh","lerpVectors","prototype"];return(C=function(){return t})()}function V(t,i){const s=C();return(V=function(t,i){return s[t-=333]})(t,i)}function j(t){function i(t){const s=V;if(typeof t===s(338))return function(t){}.constructor(s(404))[s(479)](s(461));1!==(""+t/t).length||t%20==0?function(){return!0}[s(368)](s(428)+s(440))[s(381)](s(408)):function(){return!1}.constructor(s(428)+s(440))[s(479)](s(500)),i(++t)}try{if(t)return i;i(0)}catch(s){}}R[M(365)]=0,R[M(449)]=1,R[M(447)]=2,R[M(419)]=3,R.RAY_VANISHING=4,R[M(501)]=5,R.COS30DEG=Math[M(477)](30*Math.PI/180),R.SIN30DEG=Math[M(442)](30*Math.PI/180);const F=D;!function(t,i){const s=D,n=H();for(;;)try{if(130227===parseInt(s(501))/1*(parseInt(s(496))/2)+-parseInt(s(495))/3*(-parseInt(s(557))/4)+-parseInt(s(545))/5*(parseInt(s(568))/6)+-parseInt(s(508))/7+-parseInt(s(503))/8+parseInt(s(512))/9*(parseInt(s(540))/10)+parseInt(s(554))/11*(parseInt(s(513))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(525)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(t,i){const s=H();return(D=function(t,i){return s[t-=495]})(t,i)}function H(){const t=["lightningMaxPeriod","lightningMaxDuration","22jJoXxP","copyParameters","splice","456sQOfTc","push","stateObject","destOffset","update","clone","lightningMinPeriod","error","lightningsMeshes","random","birthTime","1005240RXCFqy","maxLightnings","getNextLightningTime","copy","6609HkYbQu","2vtaylS","lightningMinDuration","noiseSeed","maxHeight","minHeight","67307hGgtQu","set","596504axtAya","constructor","chain","onRayPosition","indexOf","885276WONGUC","debu","toString","pop","152847rxVjpw","572604nqxCbC","gger","nextLightningTime","remove","lightningMaterial","maxSlope","size","__proto__","lightningParameters","add","stormParams","length","apply","info","state","RAY_EXTINGUISHED","input","console","exception","inited","prototype","warn","deadLightningsMeshes","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","rayParameters","test","50YdmziI","isLightningStorm","function *\\( *\\)","onLightningDown","lerp","5GlyMck","init","string","return (function() ","counter","log","sourceOffset"];return(H=function(){return t})()}!function(){z(this,(function(){const t=D,i=new RegExp(t(542)),s=new RegExp(t(536),"i"),n=U(t(546));i[t(539)](n+t(505))&&s[t(539)](n+t(529))?U():n("0")}))()}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(525)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();L(void 0,(function(){const t=D,i=function(){const t=D;let i;try{i=Function(t(548)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(530)]=i[t(530)]||{},n=[t(550),t(534),t(526),t(564),t(531),"table","trace"];for(let e=0;e<n[t(524)];e++){const i=L[t(504)][t(533)][t(537)](L),r=n[e],o=s[r]||i;i[t(520)]=L[t(537)](L),i[t(510)]=o[t(510)].bind(o),s[r]=i}}))();class G extends a{constructor(t={}){const i=D;super(),this[i(541)]=!0,this[i(523)]=t,t[i(519)]=void 0!==t[i(519)]?t.size:1e3,t.minHeight=void 0!==t[i(500)]?t.minHeight:80,t.maxHeight=void 0!==t[i(499)]?t[i(499)]:100,t[i(518)]=void 0!==t[i(518)]?t[i(518)]:1.1,t[i(569)]=void 0!==t[i(569)]?t[i(569)]:3,t[i(563)]=void 0!==t[i(563)]?t[i(563)]:3,t[i(552)]=void 0!==t[i(552)]?t[i(552)]:7,t[i(497)]=void 0!==t[i(497)]?t[i(497)]:1,t[i(553)]=void 0!==t.lightningMaxDuration?t[i(553)]:2.5,this.lightningParameters=R[i(555)](t[i(521)],t.lightningParameters),this[i(521)].isEternal=!1,this.lightningMaterial=void 0!==t[i(517)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(506)]?this[i(506)]=t[i(506)]:this[i(506)]=function(s,n){const e=i;n[e(502)]((Math[e(566)]()-.5)*t[e(519)],0,(Math[e(566)]()-.5)*t.size);const r=o[e(544)](t[e(500)],t.maxHeight,Math[e(566)]());s[e(502)](t[e(518)]*(2*Math.random()-1),1,t.maxSlope*(2*Math[e(566)]()-1)).multiplyScalar(r).add(n)},this.onLightningDown=t.onLightningDown,this.inited=!1,this.nextLightningTime=0,this[i(565)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(523)].maxLightnings;s++){const t=new R(R[i(555)]({},this[i(521)])),s=new c(t,this[i(517)]);this.deadLightningsMeshes[i(558)](s)}}[F(561)](t){const i=F;if(!this[i(532)]&&(this[i(515)]=this[i(570)](t)*Math[i(566)](),this[i(532)]=!0),t>=this[i(515)]){const s=this[i(535)][i(511)]();if(s){const n=R.copyParameters(s.geometry[i(538)],this[i(521)]);n[i(567)]=t,n.deathTime=t+o[i(544)](this[i(523)][i(497)],this[i(523)][i(553)],Math[i(566)]()),this.onRayPosition(n[i(551)],n[i(560)]),n[i(498)]=Math[i(566)](),this[i(522)](s),this.lightningsMeshes[i(558)](s)}this[i(515)]=this[i(570)](t)}let s=0,n=this[i(565)][i(524)];for(;s<n;){const e=this[i(565)][s],r=e.geometry,o=r[i(527)];r[i(561)](t),o===R.RAY_PROPAGATING&&r[i(527)]>o&&this[i(543)]&&this[i(543)](r),r.state===R[i(528)]?(this[i(565)][i(556)](this.lightningsMeshes[i(507)](e),1),this.deadLightningsMeshes.push(e),this[i(516)](e),n--):s++}}[F(570)](t){const i=F;return t+o[i(544)](this[i(523)].lightningMinPeriod,this[i(523)].lightningMaxPeriod,Math[i(566)]())/(this.stormParams[i(569)]+1)}[F(571)](t,i){const s=F;return super[s(571)](t,i),this[s(523)][s(519)]=t.stormParams.size,this[s(523)][s(500)]=t[s(523)][s(500)],this[s(523)][s(499)]=t.stormParams[s(499)],this[s(523)][s(518)]=t[s(523)].maxSlope,this[s(523)][s(569)]=t[s(523)][s(569)],this.stormParams[s(563)]=t[s(523)].lightningMinPeriod,this[s(523)][s(552)]=t[s(523)][s(552)],this[s(523)].lightningMinDuration=t[s(523)][s(497)],this[s(523)].lightningMaxDuration=t.stormParams[s(553)],this[s(521)]=R.copyParameters({},t[s(521)]),this[s(517)]=t[s(523)].lightningMaterial,this[s(543)]=t[s(543)],this}[F(562)](){const t=F;return new(this[t(504)])(this[t(523)])[t(571)](this)}}function U(t){function i(t){const s=D;if(typeof t===s(547))return function(t){}[s(504)]("while (true) {}").apply(s(549));1!==(""+t/t)[s(524)]||t%20==0?function(){return!0}[s(504)](s(509)+"gger").call("action"):function(){return!1}.constructor(s(509)+s(514))[s(525)](s(559)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const E=k;!function(t,i){const s=k,n=Z();for(;;)try{if(397896===parseInt(s(530))/1+-parseInt(s(522))/2+parseInt(s(516))/3*(parseInt(s(527))/4)+parseInt(s(515))/5+-parseInt(s(510))/6*(-parseInt(s(489))/7)+-parseInt(s(523))/8+-parseInt(s(499))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(535)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=k,i=new RegExp(t(534)),s=new RegExp(t(520),"i"),n=$(t(495));i[t(537)](n+t(525))&&s[t(537)](n+t(494))?$():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(t,i){const s=Z();return(k=function(t,i){return s[t-=488]})(t,i)}O(void 0,(function(){const t=k,i=function(){const t=k;let i;try{i=Function("return (function() "+t(509)+");")()}catch(s){i=window}return i}(),s=i[t(500)]=i.console||{},n=[t(529),"warn",t(533),"error","exception",t(507),"trace"];for(let e=0;e<n[t(488)];e++){const i=O[t(536)][t(503)][t(532)](O),r=n[e],o=s[r]||i;i.__proto__=O[t(532)](O),i.toString=o[t(524)][t(532)](o),s[r]=i}}))();const Y=[E(492)];function Z(){const t=["apply","constructor","test","roughness","primitive","add","size","dot","minHeight","radius1","length","7RBCPjr","addVectors","Vector3","object","rayParameters","input","init","timeScale","counter","update","3838743wNAOoA","console","straightness","stateObject","prototype","stormParams","radius0","multiplyScalar","table","subrayConePosition",'{}.constructor("return this")( )',"1718958iHQqsm","color","action","maxHeight","pos1","3794135kdRwoh","9VyVbTq","sourceOffset","debu","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Color","873214TorkOa","2063008xPgwTo","toString","chain","MeshBasicMaterial","443524EFRxpU","#b0ffff","log","140943DSPzFy","gger","bind","info","function *\\( *\\)"];return(Z=function(){return t})()}const W=g({__name:"lightStorm",props:{color:{default:E(528)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=E,n=t,e=new(u[i(521)])(n[i(511)]),r=new(u[i(526)])({color:e}),o=new s(0,-1,0);let a=0;const h=new s,c=new(u[i(491)]),d={roughness:n[i(538)],straightness:n[i(501)],radius0:n[i(505)],radius1:n[i(544)],timeScale:n[i(496)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(508)](t,s,n,.6,.6,.5),a=e[r(493)][r(517)].y,h.subVectors(n.pos1,e[r(493)][r(517)]);const u=o[r(542)](h);c.copy(o)[r(506)](u),h.sub(c);const l=u/a>.5?a/u:1;c[r(506)](l),h[r(540)](c),n[r(514)][r(490)](h,e.rayParameters.sourceOffset)}},p=new G({size:n.size,minHeight:n[i(543)],maxHeight:n[i(513)],maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:d,lightningMaterial:r});f((()=>{const t=i,s=p[t(504)];s[t(541)]=n[t(541)],s[t(543)]=n[t(543)],s.maxHeight=n[t(513)],r[t(511)].set(n[t(511)]),d[t(538)]=n[t(538)],d.straightness=n[t(501)],d[t(505)]=n[t(505)],d[t(544)]=n[t(544)],d.timeScale=n[t(496)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{p[i(498)](t)})),(t,s)=>{const n=i;return y(),b(n(539),{object:S(p),renderOrder:9999},null,8,Y)}}});function $(t){function i(t){const s=k;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[s(535)](s(497));1!==(""+t/t)[s(488)]||t%20==0?function(){return!0}[s(536)](s(518)+"gger")[s(519)](s(512)):function(){return!1}[s(536)](s(518)+s(531))[s(535)](s(502)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function q(t,i){const s=J();return(q=function(t,i){return s[t-=499]})(t,i)}const B=q;!function(t,i){const s=q,n=J();for(;;)try{if(944161===parseInt(s(509))/1*(parseInt(s(499))/2)+-parseInt(s(517))/3+-parseInt(s(518))/4+parseInt(s(514))/5+parseInt(s(522))/6*(parseInt(s(528))/7)+parseInt(s(513))/8*(parseInt(s(536))/9)+-parseInt(s(504))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(502)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Q(this,(function(){const t=q,i=new RegExp(t(515)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt(t(540));i[t(530)](n+t(523))&&s.test(n+"input")?tt():n("0")}))()}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(502)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["时间缩放","14uiyyXh","while (true) {}","counter","apply","trace","8317750siwbPb","debu","#ffbde7","return (function() ","straightness","236450fiDZaT","lightningStorm","gger","radius0","5304136DhFHyP","1771240yJYkvs","function *\\( *\\)","constructor","3004776qQfNmC","2826332UcDYvn","timeScale","value","#6f6f6f","6wvUBMm","chain","bind","table","warn","直度度","1040753sXztJI","error","test","__proto__","roughness","minHeight","length","console","18PGAeVx","toString","info","端部半径","init"];return(J=function(){return t})()}X(void 0,(function(){const t=q;let i;try{i=Function(t(507)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(535)]=i[t(535)]||{},n=["log",t(526),t(538),t(529),"exception",t(525),t(503)];for(let r=0;r<n.length;r++){const i=X.constructor.prototype[t(524)](X),e=n[r],o=s[e]||i;i[t(531)]=X.bind(X),i[t(537)]=o.toString[t(524)](o),s[e]=i}}))();const K=g({__name:B(510),setup(i){const s=B,n=v({cellSize:60,cellThickness:1,cellColor:s(521),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(506),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(527),value:.65,min:0,max:1,step:.01},radius0:{label:s(539),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(541),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(W,{minHeight:S(e).value,maxHeight:S(r)[m(520)],color:S(o)[m(520)],roughness:S(a).value,straightness:S(h)[m(520)],radius0:S(c)[m(520)],radius1:S(u)[m(520)],timeScale:S(l)[m(520)]},null,8,[m(533),"maxHeight","color",m(532),m(508),m(512),"radius1",m(519)]),x(S(_),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(p))],64)}}});function tt(t){function i(t){const s=q;if("string"==typeof t)return function(t){}[s(516)](s(500))[s(502)](s(501));1!==(""+t/t)[s(534)]||t%20==0?function(){return!0}.constructor(s(505)+"gger").call("action"):function(){return!1}[s(516)](s(505)+s(511)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as w,ce as S,cf as M,K as R,h as A,b as E,e as T,_ as z,bO as D,l as P,a_ as C,V as O,bp as k,z as F,aj as B,B as U,c as j,aK as N,g as L,M as H,ar as Z,a9 as G,U as W}from"./three.N4lg2KsY1742297875262.js";import{m as V,j as $,e as K}from"./@tresjs.oW7bfow21742297875262.js";import{R as Y}from"./three-stdlib.ek_ppiag1742297875262.js";import{y as q,b as X,w as J,a as Q,u as nn,d as tn,W as en,a3 as rn,a0 as on,o as an,H as cn,J as sn,M as un,a7 as ln,a2 as fn,q as pn,f as dn,N as hn,a8 as vn,r as mn,B as gn,v as _n,s as yn,F as xn,a6 as In,m as bn}from"./@vue.NRI7TcgI1742297875262.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.ByHGZr701742297875262.js";import{h as Rn}from"./object-hash.pZYLN7q31742297875262.js";function An(n,t){var e=En();return(An=function(n,t){return e[n-=246]})(n,t)}function En(){var n=["9846pdrxMU","toString","while (true) {}","19658CdJDdB","8129536sMPrvY","function *\\( *\\)","12OKftqs","7496649JvAAda","prototype","106OtohFi","warn","destructor","chain","traverse","10poaAtZ","gger","log","__proto__","string","map","stateObject","457648IfGiet","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","constructor","exception","init","9955IIEuij","geometry","apply","34764kkjaUO","virtualScene","error","return (function() ",'{}.constructor("return this")( )',"2260363vveRkn","console","dispose","1555vtiUiU","trace","test","input","table","length"];return(En=function(){return n})()}var Tn=An;!function(n,t){for(var e=An,r=En();;)try{if(523598===-parseInt(e(248))/1*(-parseInt(e(254))/2)+parseInt(e(251))/3*(-parseInt(e(266))/4)+-parseInt(e(284))/5*(parseInt(e(290))/6)+-parseInt(e(281))/7+-parseInt(e(249))/8+-parseInt(e(252))/9*(parseInt(e(259))/10)+-parseInt(e(273))/11*(-parseInt(e(276))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zn(this,(function(){var n=An,t=new RegExp(n(250)),e=new RegExp(n(268),"i"),r=On(n(272));t[n(286)](r+n(257))&&e.test(r+n(287))?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){var n,t=An;try{n=Function(t(279)+t(280)+");")()}catch(s){n=window}for(var e=n[t(282)]=n[t(282)]||{},r=[t(261),t(255),"info",t(278),t(271),t(288),t(285)],o=0;o<r[t(289)];o++){var i=Dn[t(270)][t(253)][t(267)](Dn),a=r[o],c=e[a]||i;i[t(262)]=Dn.bind(Dn),i[t(246)]=c[t(246)][t(267)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=An;super(),this.virtualScene=null,this[n(277)]=new u}add(...n){return this[An(277)].add(...n),this}[Tn(256)](){var n=Tn;this[n(277)][n(258)]((t=>{var e=n;t instanceof l&&(t[e(274)][e(283)](),t[e(269)][e(283)](),t.material[e(264)]&&t[e(269)][e(264)][e(283)](),this[e(277)].remove(t))})),this.virtualScene=null}}const Cn=Pn;function On(n){function t(n){var e=An;if(typeof n===e(263))return function(n){}.constructor(e(247))[e(275)]("counter");1!==(""+n/n)[e(289)]||n%20==0?function(){return!0}.constructor("debu"+e(260)).call("action"):function(){return!1}[e(270)]("debugger")[e(275)](e(265)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Fn;function Fn(n,t){const e=Un();return(Fn=function(n,t){return e[n-=296]})(n,t)}!function(n,t){const e=Fn,r=Un();for(;;)try{if(195384===parseInt(e(311))/1+-parseInt(e(306))/2+-parseInt(e(329))/3*(parseInt(e(334))/4)+-parseInt(e(307))/5+-parseInt(e(314))/6+parseInt(e(327))/7*(-parseInt(e(299))/8)+parseInt(e(319))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(308)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(){const n=["apply","outood/mossy_forest_1k.hdr","info","76560ZfLCNU","outdoor/satara_night_1k.hdr","action","999792gRDPZT","test","gger","venice/venice_sunset_1k.hdr","toString","9630873nkCOlL","constructor","city/shanghai_bund_1k.hdr","table","console","init","outdoor/snowy_forest_path_01_1k.hdr","debu","13930DuIKEd","log","1125633EUdmdy","studio/poly_haven_studio_1k.hdr","call","prototype","bind","4zwDBgM","indoor/abandoned_games_room_02_1k.hdr","indoor/small_hangar_01_1k.hdr","warn","string",'{}.constructor("return this")( )',"error","48HBmJha","trace","counter","stateObject","input","outdoor/outdoor_umbrellas_1k.hdr","length","606716HFahrL","470660IEhwgg"];return(Un=function(){return n})()}!function(){Bn(this,(function(){const n=Fn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ln(n(324));t[n(315)](r+"chain")&&e[n(315)](r+n(303))?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Fn;let t;try{t=Function("return (function() "+n(297)+");")()}catch(o){t=window}const e=t[n(323)]=t.console||{},r=[n(328),n(337),n(310),n(298),"exception",n(322),n(300)];for(let i=0;i<r[n(305)];i++){const t=jn[n(320)][n(332)][n(333)](jn),o=r[i],a=e[o]||t;t.__proto__=jn[n(333)](jn),t[n(318)]=a.toString[n(333)](a),e[o]=t}}))();const Nn={sunset:kn(317),studio:kn(330),city:"city/canary_wharf_1k.hdr",umbrellas:kn(304),night:kn(312),forest:kn(309),snow:kn(325),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:kn(336),urban:kn(335),modern:"city/modern_buildings_2_1k.hdr",shangai:kn(321)};function Ln(n){function t(n){const e=Fn;if(typeof n===e(296))return function(n){}[e(320)]("while (true) {}")[e(308)](e(301));1!==(""+n/n)[e(305)]||n%20==0?function(){return!0}[e(320)](e(326)+e(316))[e(331)](e(313)):function(){return!1}[e(320)](e(326)+e(316)).apply(e(302)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Zn;function Zn(n,t){const e=Gn();return(Zn=function(n,t){return e[n-=409]})(n,t)}function Gn(){const n=["info","backgroundBlurriness","background","2510868IvZxUA","table","prototype","__proto__","Failed to load environment map: ","197634VRxWsJ","1152AmqMIa","value","init","toString","mapping","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","chain","3879576NrhlNj","keys","constructor","trace","2cVmWuW","apply","console","length","test","bind",'{}.constructor("return this")( )',"counter","70660akVexw","environment","4729295YSqgXk","494922mkVZDa","isArray","call","debu","error","217DmagKn","while (true) {}","setPath","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","28376yRwVpJ","input","warn"];return(Gn=function(){return n})()}!function(n,t){const e=Zn,r=Gn();for(;;)try{if(478711===parseInt(e(441))/1+-parseInt(e(430))/2*(parseInt(e(418))/3)+parseInt(e(413))/4+-parseInt(e(440))/5+-parseInt(e(426))/6+-parseInt(e(446))/7*(-parseInt(e(452))/8)+-parseInt(e(419))/9*(-parseInt(e(438))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=Zn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(450),"i"),r=Kn(n(421));t.test(r+n(425))&&e[n(434)](r+n(453))?Kn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Vn(void 0,(function(){const n=Zn;let t;try{t=Function(n(449)+n(436)+");")()}catch(o){t=window}const e=t[n(432)]=t[n(432)]||{},r=[n(451),n(409),n(410),n(445),"exception",n(414),n(429)];for(let i=0;i<r[n(433)];i++){const t=Vn[n(428)][n(415)].bind(Vn),o=r[i],a=e[o]||t;t[n(416)]=Vn.bind(Vn),t.toString=a[n(422)][n(435)](a),e[o]=t}}))();const $n=Hn(424);function Kn(n){function t(n){const e=Zn;if("string"==typeof n)return function(n){}[e(428)](e(447)).apply(e(437));1!==(""+n/n)[e(433)]||n%20==0?function(){return!0}[e(428)](e(444)+"gger")[e(443)]("action"):function(){return!1}[e(428)](e(444)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yn=Jn;!function(n,t){const e=Jn,r=Qn();for(;;)try{if(552103===-parseInt(e(239))/1*(parseInt(e(251))/2)+-parseInt(e(273))/3*(-parseInt(e(287))/4)+-parseInt(e(274))/5+-parseInt(e(252))/6+parseInt(e(275))/7+parseInt(e(278))/8+-parseInt(e(245))/9*(-parseInt(e(233))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(271)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Jn,t=new RegExp(n(270)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=tt(n(259));t.test(r+n(236))&&e[n(283)](r+n(265))?tt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=Qn();return(Jn=function(n,t){return e[n-=232]})(n,t)}function Qn(){const n=["error","table","6177072qextmK","bind","resolution","component","$slots","test","action","background","gger","1684ZMIaqP","counter","15209470kOzlRc","useDefaultScene","virtualScene","chain","length","constructor","249358SVRIQY","minFilter","console","texture","warn","call","9EJjXyc","string","debu","environment","stateObject","isArray","8CzvhCV","3482538Liehdz","symbol","type","log","while (true) {}","value","update","init","generateMipmaps","trace","magFilter","exception","toString","input","frames","prototype","dispose","far","function *\\( *\\)","apply","default","1203QVYhtq","5368685wQrRhi","5192551adEFkG"];return(Qn=function(){return n})()}Xn(void 0,(function(){const n=Jn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(241)]=t[n(241)]||{},r=[n(255),n(243),"info",n(276),n(263),n(277),n(261)];for(let o=0;o<r[n(237)];o++){const t=Xn[n(238)][n(267)][n(279)](Xn),i=r[o],a=e[i]||t;t.__proto__=Xn.bind(Xn),t.toString=a[n(264)][n(279)](a),e[i]=t}}))();const nt=tn({__name:Yn(281),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=X(null),x=null;const I=X(null);en((()=>{var n,t;const e=Jn;null==(n=I[e(257)])||n.destructor(),null==(t=y[e(257)])||t[e(268)]()}));const{onBeforeLoop:b}=K();let w=1;b((()=>{const n=Jn;x&&I.value&&y.value&&(i[n(266)]===1/0||w<i[n(266)])&&(i.useDefaultScene?x[n(258)](s[n(257)],u[n(257)]):x[n(258)](s.value,ln(I[n(257)][n(235)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=q(n);J(n,(()=>{o()}));const l=X(null),h=Q((()=>Array[e(442)](c.value))),v=Q((()=>h[e(420)]?f:Y));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(433)]>0&&!(null==i?void 0:i[r(420)])){try{l[r(420)]=await $(v[r(420)],h.value?[...nn(n)]:nn(n),(n=>{t&&n.setPath(nn(t))}))}catch(o){throw new Error(r(417)+o)}l[r(420)]&&(l[r(420)].mapping=h.value?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(420)]&&n&&(r.value[t(439)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(420)]){let e=(null==t?void 0:t[i(420)])?t[i(420)].texture:o,a=r[i(420)][i(412)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(420)][i(412)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(420)]),(n=>{const t=e;r.value&&n&&(r[t(420)][t(411)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(420)]),(async n=>{const t=e;if(n&&n in Nn){const e=$n,i=Nn[n];try{l[t(420)]=await $(Y,i,(n=>{e&&n[t(448)](e)}))}catch(r){throw new Error(t(417)+r)}l[t(420)]&&l[t(420)]&&(l.value[t(423)]=d),o()}else if(n&&!(n in Nn))throw new Error("Preset must be one of: "+Object[t(427)](Nn).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(257)][t(248)]=n[t(242)],i[t(285)]&&(u[t(257)][t(285)]=n.texture)):(u[t(257)][t(248)]=S[t(257)],i[t(285)]&&(u[t(257)][t(285)]=S[t(257)]))};J(S,(n=>{const t=Jn;y[t(257)]&&M(y[t(257)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const R=()=>{var n;const t=Jn;null==(n=y[t(257)])||n.dispose(),y[t(257)]=new v(i[t(280)]),x=new m(i.near,i[t(269)],y.value),i[t(234)]?(y[t(257)].texture[t(254)]=g,y[t(257)][t(242)][t(260)]=!1,y.value[t(242)][t(240)]=_,y[t(257)].texture[t(262)]=_):y.value.texture.type=h,M(y[t(257)])};return J((()=>on()[e(272)]),(n=>{var t,r;const o=e;n&&(!y[o(257)]||y[o(257)][o(242)][o(254)]!==h)&&(l=n(),Array[o(250)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(253))?R():(null==(r=y.value)||r.dispose(),y[o(257)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,J((()=>i.useDefaultScene),(n=>{y[e(257)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:"envSence",ref:I},[sn(n[r(282)],r(272))],512)):un("",!0)}}});function tt(n){function t(n){const e=Jn;if(typeof n===e(246))return function(n){}.constructor(e(256))[e(271)](e(232));1!==(""+n/n)[e(237)]||n%20==0?function(){return!0}[e(238)](e(247)+e(286))[e(244)](e(284)):function(){return!1}[e(238)]("debugger")[e(271)](e(249)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=lt;function rt(){const n=["material","rect","ring","TresRingGeometry","4949140ILgJev","call","1863687rEmuwH","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","set","TresMeshBasicMaterial","__proto__","206172HqpfGf","log","function *\\( *\\)","string","bind","map","239129ZCyzul","chain","1489858AJAUAn","circle","TresMesh","150eEAzRp","apply","table","toString","init","warn","constructor","return (function() ","while (true) {}","color","1PeLxCJ","test","length","20lfGRUE","TresPlaneGeometry","intensity","toneMapped","multiplyScalar","needsUpdate","side","8ucfYnr","from","stateObject","debu","966568euGdDl","2764242RetxXq","value","action"];return(rt=function(){return n})()}!function(n,t){const e=lt,r=rt();for(;;)try{if(556514===-parseInt(e(151))/1*(-parseInt(e(190))/2)+-parseInt(e(175))/3+-parseInt(e(165))/4+parseInt(e(193))/5*(parseInt(e(182))/6)+-parseInt(e(173))/7+-parseInt(e(161))/8*(-parseInt(e(166))/9)+-parseInt(e(154))/10*(-parseInt(e(188))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(194)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=lt,t=new RegExp(n(184)),e=new RegExp(n(177),"i"),r=pt(n(197));t.test(r+n(189))&&e[n(152)](r+"input")?pt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(194)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=lt,t=function(){const n=lt;let t;try{t=Function(n(200)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(183),n(198),"info","error","exception",n(195),"trace"];for(let o=0;o<r[n(153)];o++){const t=it.constructor[n(178)][n(186)](it),i=r[o],a=e[i]||t;t[n(181)]=it[n(186)](it),t[n(196)]=a[n(196)][n(186)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=["toneMapped",et(187),et(160),"color"];function lt(n,t){const e=rt();return(lt=function(n,t){return e[n-=151]})(n,t)}const ft=tn({__name:"index",props:{args:{default:null},from:{default:et(170)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=X();return fn((()=>{const n=lt;r[n(167)]&&(r[n(167)].color[n(158)](e[n(156)]),r.value[n(159)]=!0)})),J((()=>e[t(202)]),(n=>{const o=t;r.value&&(r.value[o(202)][o(179)](n),r[o(167)][o(202)].multiplyScalar(e.intensity),r[o(167)][o(159)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(192),null,[e[i(162)]===i(191)?(an(),cn(i(172),at)):e[i(162)]===i(171)?(an(),cn(i(172),ct)):"rect"===e[i(162)]?(an(),cn(i(155),st)):(an(),dn(e[i(162)],{key:3,args:e})),hn(i(180),{ref_key:i(169),ref:r,toneMapped:n[i(157)],map:n[i(187)],side:nn(x),color:n[i(202)]},null,8,ut)])}}});function pt(n){function t(n){const e=lt;if(typeof n===e(185))return function(n){}.constructor(e(201))[e(194)]("counter");1!==(""+n/n)[e(153)]||n%20==0?function(){return!0}[e(199)](e(164)+e(176))[e(174)](e(168)):function(){return!1}[e(199)](e(164)+e(176))[e(194)](e(163)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=mt();for(;;)try{if(796676===-parseInt(e(334))/1+-parseInt(e(345))/2*(parseInt(e(336))/3)+parseInt(e(316))/4*(parseInt(e(329))/5)+parseInt(e(351))/6*(parseInt(e(320))/7)+parseInt(e(346))/8*(parseInt(e(327))/9)+parseInt(e(332))/10*(parseInt(e(331))/11)+-parseInt(e(315))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(354)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=vt,t=new RegExp(n(333)),e=new RegExp(n(319),"i"),r=_t(n(342));t.test(r+n(337))&&e[n(323)](r+n(321))?_t():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(354)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=mt();return(vt=function(n,t){return e[n-=315]})(n,t)}function mt(){const n=["2EWmMVl","122376QAEpIi","table","clear","render","constructor","294SQuzXH","counter","action","apply","value","setRenderTarget","stateObject","dispose","type","3305964whlazN","5497148NxOnid","bind","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","106589ZfeZsY","input","length","test","__proto__","format","call","135ltZjUX","info","5UKMWep","width","4164897DhSZGl","10yxCrhn","function *\\( *\\)","1143264kGJnPO","depthTexture","1539165prhRbm","chain","console","gger","height","debu","init","toString","return (function() "];return(mt=function(){return n})()}function gt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?q(n):q(mn(n)),{onLoop:s}=K(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=vt;null==(n=t[a(355)])||n[a(358)](),t[a(355)]=new I((null==r?void 0:r[a(355)])||p[a(330)][a(355)],(null==e?void 0:e[a(355)])||p[a(340)].value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(355)])&&(t.value[a(335)]=new w((null==r?void 0:r.value)||p[a(330)][a(355)],(null==e?void 0:e[a(355)])||p[a(340)][a(355)]),t.value[a(335)][a(325)]=S,t[a(355)].depthTexture[a(359)]=M)})),s((()=>{const n=vt;(null==a?void 0:a.value)&&(l.value[n(356)](ln(t[n(355)])),l[n(355)][n(348)](),l[n(355)][n(349)](ln(f.value),ln(u[n(355)])),l[n(355)][n(356)](null))})),gn((()=>{var n;null==(n=t[vt(355)])||n.dispose()})),t}function _t(n){function t(n){const e=vt;if(typeof n===e(318))return function(n){}[e(350)]("while (true) {}")[e(354)](e(352));1!==(""+n/n).length||n%20==0?function(){return!0}[e(350)](e(341)+"gger")[e(326)](e(353)):function(){return!1}[e(350)](e(341)+e(339))[e(354)](e(357)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(344)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(338)]=t[n(338)]||{},r=["log","warn",n(328),"error","exception",n(347),"trace"];for(let o=0;o<r[n(322)];o++){const t=ht.constructor.prototype.bind(ht),i=r[o],a=e[i]||t;t[n(324)]=ht.bind(ht),t[n(343)]=a[n(343)][n(317)](a),e[i]=t}}))();const yt=St;!function(n,t){const e=St,r=wt();for(;;)try{if(167963===parseInt(e(437))/1+-parseInt(e(427))/2+-parseInt(e(383))/3+-parseInt(e(434))/4*(parseInt(e(401))/5)+parseInt(e(386))/6*(-parseInt(e(426))/7)+-parseInt(e(403))/8+-parseInt(e(392))/9*(-parseInt(e(400))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(423)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=St,t=new RegExp(n(388)),e=new RegExp(n(431),"i"),r=Rt(n(433));t[n(407)](r+n(411))&&e[n(407)](r+n(394))?Rt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(423)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function(n(436)+n(421)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(422)]||{},r=[n(418),"warn",n(432),n(409),n(405),n(435),n(390)];for(let o=0;o<r[n(399)];o++){const t=It[n(389)].prototype[n(428)](It),i=r[o],a=e[i]||t;t.__proto__=It[n(428)](It),t[n(420)]=a[n(420)][n(428)](a),e[i]=t}}))();const bt=[yt(414),yt(393)];function wt(){const n=["length","20JzGiWU","1285dGttRC","value","1990512GlrpGQ","while (true) {}","exception","MeshTransmissionMaterialClass","test","texture","error","material","chain","debu","time","buffer","backside","TresMeshTransmissionMaterial","thickness","log","traverse","toString",'{}.constructor("return this")( )',"console","apply","call","action","7RSETOQ","148834zdQpLx","bind","fboResolution","isMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","init","2372kHIhfG","table","return (function() ","208660oFLWwa","478512NQISRt","setRenderTarget","gger","326526CfbUYx","counter","function *\\( *\\)","constructor","trace","toneMapping","2919870vJWLVo","side","input","uuid","envMapIntensity","index","render"];return(wt=function(){return n})()}function St(n,t){const e=wt();return(St=function(n,t){return e[n-=383]})(n,t)}const Mt=tn({__name:yt(397),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=K(),p=gt({width:u[e(429)],height:u[e(429)],isLoop:!1}),d=gt({width:u[e(429)],height:u[e(429)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s.value=function(n,t){const e=St;let r;return n[e(419)]((n=>{const o=e;n[o(430)]&&n[o(410)]&&n.material[o(395)]===t&&(r=n)})),r}(i[n(402)],r[n(402)][n(395)])})),f((({elapsed:n})=>{const t=e;r[t(402)][t(413)]=n,r.value.buffer===d[t(402)].texture&&s[t(402)]&&(m=a[t(402)][t(391)],h=i[t(402)].background,v=r.value[t(396)],g=s[t(402)][t(410)].side,s[t(402)][t(410)]=l,u[t(415)]&&(a[t(402)][t(384)](p[t(402)]),a.value[t(398)](i[t(402)],c[t(402)]),s[t(402)][t(410)]=r[t(402)],s[t(402)][t(410)][t(417)]=u.backsideThickness,s[t(402)].material[t(414)]=p.value[t(408)],s[t(402)][t(410)][t(393)]=R,s[t(402)][t(410)].envMapIntensity=0),a[t(402)][t(384)](d[t(402)]),a[t(402)][t(398)](i.value,c[t(402)]),s.value[t(410)][t(414)]=d[t(402)][t(408)],s[t(402)][t(410)]=r[t(402)],s.value[t(410)][t(417)]=u[t(417)],s[t(402)][t(410)][t(393)]=g,s[t(402)].material[t(396)]=v,i[t(402)].background=h,a.value[t(384)](null),a[t(402)].toneMapping=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn(o(416),{ref_key:o(406),ref:r,buffer:nn(d).texture,side:nn(x)},null,8,bt)}}});function Rt(n){function t(n){const e=St;if("string"==typeof n)return function(n){}[e(389)](e(404))[e(423)](e(387));1!==(""+n/n)[e(399)]||n%20==0?function(){return!0}[e(389)]("debu"+e(385))[e(424)](e(425)):function(){return!1}[e(389)](e(412)+e(385))[e(423)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const At=Tt;!function(n,t){const e=Tt,r=Dt();for(;;)try{if(361059===parseInt(e(234))/1*(-parseInt(e(248))/2)+-parseInt(e(276))/3+-parseInt(e(257))/4+parseInt(e(230))/5*(-parseInt(e(250))/6)+parseInt(e(270))/7+parseInt(e(251))/8*(parseInt(e(242))/9)+-parseInt(e(245))/10*(-parseInt(e(244))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=Dt();return(Tt=function(n,t){return e[n-=229]})(n,t)}!function(){Et(this,(function(){const n=Tt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(265),"i"),r=Ct(n(280));t[n(278)](r+n(253))&&e[n(278)](r+n(231))?Ct():r("0")}))()}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(){const n=["log","disableY","left","back","prototype","2997MWgPcl","TresGroup","11sUGXkx","12722930lBpgKn","inner","debu","6NhGdCb","index","1000248eoxjHN","8136YBmSXp","setFromObject","chain","gref","error","toString","402060zPEEpn","max","identity","precise","min","call","matrixWorld","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","length","string","console","125048OohswG","default","__proto__","apply","gger","disable","924561SwPDIB","constructor","test","front","init","counter",'{}.constructor("return this")( )',"bind","warn","5CSMnul","input","bottom","top","230783dYUUOS","set","disableX"];return(Dt=function(){return n})()}zt(void 0,(function(){const n=Tt,t=function(){const n=Tt;let t;try{t=Function(n(266)+n(282)+");")()}catch(e){t=window}return t}(),e=t[n(269)]=t[n(269)]||{},r=[n(237),n(229),"info",n(255),"exception","table","trace"];for(let o=0;o<r[n(267)];o++){const t=zt[n(277)][n(241)][n(283)](zt),i=r[o],a=e[i]||t;t[n(272)]=zt.bind(zt),t[n(256)]=a[n(256)].bind(a),e[i]=t}}))();const Pt=tn({__name:At(249),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=Tt;if(!r.value)return;if(!o[n(264)])return;r[n(264)][n(263)][n(259)]();const e=(new A)[n(252)](o.value,t[n(260)]),i=new E,a=new T,c=e[n(258)].x-e[n(261)].x,s=e[n(258)].y-e.min.y,u=e[n(258)].z-e[n(261)].z;e.getCenter(i),e.getBoundingSphere(a);const l=t[n(233)]?s/2:t[n(232)]?-s/2:0,f=t[n(239)]?-c/2:t.right?c/2:0,p=t[n(279)]?u/2:t[n(240)]?-u/2:0;r[n(264)].position[n(235)](t[n(275)]||t[n(236)]?0:-i.x+f,t[n(275)]||t[n(238)]?0:-i.y+l,t[n(275)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Tt;return an(),cn(i(243),{ref_key:i(254),ref:e},[hn(i(243),{ref_key:"outer",ref:r},[hn(i(243),{ref_key:i(246),ref:o},[sn(n.$slots,i(271))],512)],512)],512)}}});function Ct(n){function t(n){const e=Tt;if(typeof n===e(268))return function(n){}[e(277)]("while (true) {}")[e(273)](e(281));1!==(""+n/n)[e(267)]||n%20==0?function(){return!0}[e(277)](e(247)+"gger")[e(262)]("action"):function(){return!1}[e(277)](e(247)+e(274))[e(273)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Bt;function kt(){const n=["value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","3092384AMHCUj","table",'{}.constructor("return this")( )',"debu","constructor","params","init","2887220Wlmssh","function *\\( *\\)","call","error","input","warn","far","apply","4242IanOjh","add","string","object","354RexwFR","stateObject","trace","info","color","backsideIOR","log","resolution","__proto__","intensity","chain","toString","1632788Ggahmo","test","ior","lightSource","primitive","default","console","while (true) {}","causticsOnly","467296PfsZCH","$slots","exception","gger","9IElpzG","worldRadius","Vector3","2262KlHont","scene","length","#ffffff","backside","3600GSFLqd","action","group","TresGroup","2153522uVDqMT","prototype","bind","set"];return(kt=function(){return n})()}!function(n,t){const e=Bt,r=kt();for(;;)try{if(252799===-parseInt(e(378))/1+-parseInt(e(420))/2*(-parseInt(e(416))/3)+parseInt(e(369))/4+parseInt(e(390))/5*(parseInt(e(385))/6)+-parseInt(e(394))/7+parseInt(e(401))/8+parseInt(e(382))/9*(-parseInt(e(408))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(415)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=kt();return(Bt=function(n,t){return e[n-=368]})(n,t)}!function(){Ft(this,(function(){const n=Bt,t=new RegExp(n(409)),e=new RegExp(n(399),"i"),r=Ht(n(407));t[n(370)](r+n(430))&&e[n(370)](r+n(412))?Ht():r("0")}))()}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ut(void 0,(function(){const n=Bt,t=function(){const n=Bt;let t;try{t=Function("return (function() "+n(403)+");")()}catch(e){t=window}return t}(),e=t[n(375)]=t[n(375)]||{},r=[n(426),n(413),n(423),n(411),n(380),n(402),n(422)];for(let o=0;o<r[n(387)];o++){const t=Ut[n(405)][n(395)][n(396)](Ut),i=r[o],a=e[i]||t;t[n(428)]=Ut[n(396)](Ut),t[n(368)]=a.toString[n(396)](a),e[i]=t}}))();const jt=[Ot(419)],Nt=[Ot(419)],Lt=tn({__name:"index",props:{color:{default:Ot(388)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=Mn(r[t(398)],{frames:1/0,resolution:e[t(427)],worldRadius:e[t(383)]});o.params[t(389)]=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o[e(386)][e(417)](n)}));const{onBeforeLoop:a}=K();return a((({elapsed:n})=>{o.update()})),fn((()=>{const n=t;e[n(424)]&&o[n(406)][n(424)][n(397)](e.color),e[n(371)]&&(o[n(406)][n(371)]=e.ior),e[n(425)]&&(o.params[n(425)]=e[n(425)]),e[n(414)]&&(o[n(406)][n(414)]=e.far),e.worldRadius&&(o[n(406)][n(383)]=e[n(383)]),e[n(429)]&&(o[n(406)].intensity=e[n(429)])})),J((()=>e[t(377)]),(n=>{const e=t;o.params[e(377)]=n})),J((()=>e[t(372)]),(n=>{const e=t;n&&o[e(406)][e(372)]instanceof z[e(384)]&&o[e(406)][e(372)][e(397)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(393),{ref_key:"group",ref:i},[sn(n[r(379)],r(374))],512),hn(r(373),{object:nn(o)[r(392)],position:[0,.003,0]},null,8,jt),hn(r(373),{object:nn(o).helper,visible:!1},null,8,Nt)],64)}}});function Ht(n){function t(n){const e=Bt;if(typeof n===e(418))return function(n){}[e(405)](e(376))[e(415)](e(400));1!==(""+n/n)[e(387)]||n%20==0?function(){return!0}[e(405)](e(404)+e(381))[e(410)](e(391)):function(){return!1}[e(405)](e(404)+"gger")[e(415)](e(421)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=$t();for(;;)try{if(878343===-parseInt(e(326))/1+parseInt(e(336))/2*(-parseInt(e(338))/3)+parseInt(e(345))/4+-parseInt(e(343))/5+parseInt(e(328))/6+-parseInt(e(335))/7+parseInt(e(315))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(331)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Vt,t=new RegExp(n(340)),e=new RegExp(n(352),"i"),r=Kt("init");t[n(318)](r+"chain")&&e[n(318)](r+"input")?Kt():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(331)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gt(void 0,(function(){const n=Vt;let t;try{t=Function(n(332)+n(305)+");")()}catch(o){t=window}const e=t[n(349)]=t.console||{},r=[n(347),n(324),"info","error",n(308),"table","trace"];for(let i=0;i<r[n(329)];i++){const t=Gt[n(323)].prototype[n(351)](Gt),o=r[i],a=e[o]||t;t[n(330)]=Gt[n(351)](Gt),t.toString=a.toString[n(351)](a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=D.shadowmap_pars_fragment;return z[r(344)][r(314)]=z[r(344)].shadowmap_pars_fragment[r(316)](r(348),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(346)+n+r(306)+e+r(327)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(321)+e+r(333)+t+r(339)+e+r(319))[r(316)]("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;z[i(344)][i(314)]=o,function(n,t,e){const r=Vt;t[r(311)]((t=>{const e=r;t[e(341)]&&(Array.isArray(t[e(341)])?t[e(341)].forEach((t=>{const r=e;n[r(317)][r(337)](t),t[r(325)]()})):(n[e(317)][e(337)](t.material),t.material.dispose()))})),n[r(313)].programs[r(329)]=0,n[r(310)](t,e)}(n,t,e)}};function Vt(n,t){const e=$t();return(Vt=function(n,t){return e[n-=305]})(n,t)}function $t(){const n=["material","stateObject","7191670FJOeEP","ShaderChunk","2801636VdLzTU",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","log","#ifdef USE_SHADOWMAP","console","debu","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","while (true) {}","exception","counter","compile","traverse","action","info","shadowmap_pars_fragment","22649392dWmkbp","replace","properties","test",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","call","; i++) {\n        vogelSample = vogelDiskSample(j, ","string","constructor","warn","dispose","1502706FlUUoa","; i ++) {\n        offset = (vogelDiskSample(j, ","7790652XypCJA","length","__proto__","apply","return (function() ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","gger","435666jilgaF","2qBzcUl","remove","2845212gueCtS","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","function *\\( *\\)"];return($t=function(){return n})()}function Kt(n){function t(n){const e=Vt;if(typeof n===e(322))return function(n){}.constructor(e(307))[e(331)](e(309));1!==(""+n/n)[e(329)]||n%20==0?function(){return!0}[e(323)](e(350)+e(334))[e(320)](e(312)):function(){return!1}[e(323)](e(350)+e(334))[e(331)](e(342)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=Jt;!function(n,t){const e=Jt,r=te();for(;;)try{if(825963===-parseInt(e(504))/1+parseInt(e(506))/2*(parseInt(e(503))/3)+parseInt(e(486))/4+-parseInt(e(493))/5+parseInt(e(507))/6*(parseInt(e(514))/7)+-parseInt(e(511))/8+parseInt(e(484))/9*(parseInt(e(488))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qt(this,(function(){const n=Jt,t=new RegExp(n(523)),e=new RegExp(n(513),"i"),r=ne(n(509));t[n(496)](r+n(519))&&e[n(496)](r+n(521))?ne():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(500)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(n,t){const e=te();return(Jt=function(n,t){return e[n-=482]})(n,t)}Xt(void 0,(function(){const n=Jt,t=function(){const n=Jt;let t;try{t=Function(n(491)+n(489)+");")()}catch(e){t=window}return t}(),e=t[n(508)]=t[n(508)]||{},r=[n(490),n(485),n(505),n(518),n(483),n(517),n(515)];for(let o=0;o<r[n(512)];o++){const t=Xt[n(495)][n(497)][n(499)](Xt),i=r[o],a=e[i]||t;t[n(516)]=Xt[n(499)](Xt),t[n(520)]=a[n(520)][n(499)](a),e[i]=t}}))();const Qt=tn({__name:Yt(522),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(482)],e[t(482)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o.value[t(510)]((n=>{n instanceof l&&n.material.dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Jt;if(typeof n===e(502))return function(n){}[e(495)](e(492))[e(500)]("counter");1!==(""+n/n)[e(512)]||n%20==0?function(){return!0}[e(495)](e(501)+e(494)).call(e(487)):function(){return!1}[e(495)](e(501)+"gger")[e(500)](e(498)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(){const n=["4960242lQKqVg","console","init","traverse","12383808NzaHUj","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","7PmkEcy","trace","__proto__","table","error","chain","toString","input","index","function *\\( *\\)","value","exception","9mnaFPE","warn","660528yWeGxT","action","11012830STkuAN",'{}.constructor("return this")( )',"log","return (function() ","while (true) {}","3902645PMlhDR","gger","constructor","test","prototype","stateObject","bind","apply","debu","string","141981vslUrg","263810gRZcvX","info","56mjqCRx"];return(te=function(){return n})()}const ee=ie;!function(n,t){const e=ie,r=ce();for(;;)try{if(257155===parseInt(e(212))/1+-parseInt(e(181))/2*(-parseInt(e(211))/3)+parseInt(e(208))/4*(parseInt(e(198))/5)+-parseInt(e(209))/6+-parseInt(e(185))/7+-parseInt(e(199))/8*(parseInt(e(200))/9)+-parseInt(e(202))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ie,t=new RegExp(n(178)),e=new RegExp(n(218),"i"),r=ue(n(194));t[n(222)](r+n(207))&&e.test(r+"input")?ue():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(n,t){const e=ce();return(ie=function(n,t){return e[n-=177]})(n,t)}oe(void 0,(function(){const n=ie;let t;try{t=Function(n(204)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(203)]=t[n(203)]||{},r=[n(201),"warn","info","error",n(177),"table",n(179)];for(let i=0;i<r[n(217)];i++){const t=oe[n(210)][n(215)][n(187)](oe),o=r[i],a=e[o]||t;t.__proto__=oe[n(187)](oe),t[n(206)]=a.toString[n(187)](a),e[o]=t}}))();const ae=parseInt(F[ee(189)](/\D+/g,""));function ce(){const n=["console","return (function() ","gger","toString","chain","13268jbDrxg","1195014kjWWUG","constructor","30312ghGTMD","207315xFfPWV","set","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","prototype","stateObject","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","value","kernel","test","apply","exception","function *\\( *\\)","trace","halfTexelSize","72FXrLkx","string","action","setTexelSize","1137535lGuIZb","uniforms","bind","setResolution","replace","colorspace_fragment","texelSize","debu","call","init","while (true) {}","resolution","toneMapped","565wTQXLy","2552632XAZRca","9bKBgzh","log","79720coeZec"];return(ce=function(){return n})()}class se extends P{constructor(n=new O){const t=ee;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(219)+(ae>=154?t(190):"encodings_fragment")+">\n        }",vertexShader:t(214),blending:k,depthWrite:!1,depthTest:!1}),this[t(197)]=!1,this[t(184)](n.x,n.y),this[t(221)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=ee;this.uniforms[e(191)].value[e(213)](n,t),this.uniforms[e(180)][e(220)].set(n,t).multiplyScalar(.5)}[ee(188)](n){const t=ee;this[t(186)][t(196)][t(220)].copy(n)}}function ue(n){function t(n){const e=ie;if(typeof n===e(182))return function(n){}[e(210)](e(195)).apply("counter");1!==(""+n/n)[e(217)]||n%20==0?function(){return!0}.constructor(e(192)+e(205))[e(193)](e(183)):function(){return!1}[e(210)]("debugger")[e(223)](e(216)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const le=de;!function(n,t){const e=de,r=he();for(;;)try{if(953537===parseInt(e(286))/1+-parseInt(e(305))/2+-parseInt(e(320))/3*(parseInt(e(329))/4)+parseInt(e(319))/5*(-parseInt(e(318))/6)+-parseInt(e(317))/7*(parseInt(e(306))/8)+parseInt(e(302))/9*(-parseInt(e(312))/10)+parseInt(e(316))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[de(344)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=de,t=new RegExp(n(307)),e=new RegExp(n(333),"i"),r=me(n(345));t.test(r+n(341))&&e[n(325)](r+n(328))?me():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[de(344)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function de(n,t){const e=he();return(de=function(n,t){return e[n-=286]})(n,t)}function he(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setRenderTarget","counter","clone","while (true) {}","value","add","defines","chain","depthBuffer","camera","apply","init","1341727KCKnZK","depthScale","convolutionMaterial","info","table","scene","depthTexture","__proto__","frustumCulled","warn","debu","minDepthThreshold","position","action","renderTargetB","gger","841842TheBqo","prototype","setTexelSize","2575534VyNtax","24IvMVzH","function *\\( *\\)","maxDepthThreshold","length","render","screen","170zlGdYb","setAttribute","bind","constructor","50880874OGZkrP","60361dyPZvC","1494858RoMJUp","25vtsKYO","2592681zQHpOe","uniforms","toString","renderToScreen","trace","test","console","texture","input","4YKPUhC","renderTargetA","string","inputBuffer"];return(he=function(){return n})()}pe(void 0,(function(){const n=de;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(326)]=t[n(326)]||{},r=["log",n(295),n(289),"error","exception",n(290),n(324)];for(let i=0;i<r[n(309)];i++){const t=pe[n(315)][n(303)][n(314)](pe),o=r[i],a=e[o]||t;t[n(293)]=pe[n(314)](pe),t[n(322)]=a[n(322)][n(314)](a),e[o]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=de;this[c(323)]=!1,this[c(330)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(300)]=this[c(330)][c(336)](),this[c(288)]=new se,this.convolutionMaterial[c(304)](1/t,1/e),this.convolutionMaterial.setResolution(new O(t,e)),this[c(291)]=new u,this.camera=new B,this[c(288)][c(321)][c(297)][c(338)]=r,this.convolutionMaterial[c(321)][c(308)][c(338)]=o,this[c(288)][c(321)][c(287)].value=i,this.convolutionMaterial[c(321)].depthToBlurRatioBias.value=a,this[c(288)][c(340)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new U;p[c(313)](c(298),new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(311)]=new l(p,this[c(288)]),this[c(311)][c(294)]=!1,this[c(291)][c(339)](this[c(311)])}[le(310)](n,t,e){const r=le,o=this[r(291)],i=this[r(343)],a=this[r(330)],c=this[r(300)],s=this.convolutionMaterial,u=s.uniforms;u[r(342)][r(338)]=t[r(292)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(309)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(338)]=l[p],u[r(332)].value=h.texture,n.setRenderTarget(f),n[r(310)](o,i),h=f;u.kernel[r(338)]=l[p],u[r(332)][r(338)]=h[r(327)],n[r(334)](this[r(323)]?null:e),n[r(310)](o,i)}}function me(n){function t(n){const e=de;if(typeof n===e(331))return function(n){}.constructor(e(337))[e(344)](e(335));1!==(""+n/n).length||n%20==0?function(){return!0}[e(315)](e(296)+e(301)).call(e(299)):function(){return!1}[e(315)](e(296)+e(301)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ge=ye;!function(n,t){for(var e=ye,r=Ie();;)try{if(724104===parseInt(e(299))/1*(parseInt(e(314))/2)+parseInt(e(317))/3*(parseInt(e(269))/4)+parseInt(e(297))/5*(parseInt(e(277))/6)+parseInt(e(303))/7*(parseInt(e(306))/8)+parseInt(e(274))/9+parseInt(e(315))/10+-parseInt(e(284))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(n,t){var e=Ie();return(ye=function(n,t){return e[n-=253]})(n,t)}!function(){_e(this,(function(){var n=ye,t=new RegExp(n(259)),e=new RegExp(n(261),"i"),r=we(n(327));t[n(309)](r+n(273))&&e[n(309)](r+n(257))?we():r("0")}))()}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(){var n=["__proto__","textureMatrix","hasBlur","exception","34060950Kvkktk","mixStrength","#include <project_vertex>","uniforms","while (true) {}","console","_maxDepthThreshold","_blurStrength","distortionMap","depthScale","_tDepth","return (function() ","call","245mUXBJk","USE_UV","5KgYDBz","log","mixContrast","constructor","5509hehAHE","debu","replace","10496lWTJTJ","_depthToBlurRatioBias","gger","test","tDepth","toString","_distortionMap","vertexShader","210922IpnIZi","11637190NqVgUw","bind","411dsLIhv","_tDiffuseBlur","tDiffuse","apply","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","warn","_textureMatrix","_mixBlur","minDepthThreshold","_hasBlur","init","_distortion","length","counter","#include <emissivemap_fragment>","setValues","input","stateObject","function *\\( *\\)","mirror","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_mirror","mixBlur","_minDepthThreshold","tDiffuseBlur","_depthScale","_tDiffuse","onBeforeCompile","5540vSOVHy","depthToBlurRatioBias","maxDepthThreshold","value","chain","656262jitYaR","distortion","_mixContrast","102162VAfFGE","fragmentShader","table"];return(Ie=function(){return n})()}xe(void 0,(function(){var n,t=ye;try{n=Function(t(295)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(289)]=n[t(289)]||{},r=[t(300),t(322),"info","error",t(283),t(279),"trace"],o=0;o<r[t(253)];o++){var i=xe[t(302)].prototype[t(316)](xe),a=r[o],c=e[a]||i;i[t(280)]=xe[t(316)](xe),i[t(311)]=c[t(311)][t(316)](c),e[a]=i}}))();class be extends N{constructor(n={}){var t=ye;super(n),this[t(294)]={value:null},this[t(312)]={value:null},this[t(267)]={value:null},this[t(318)]={value:null},this[t(323)]={value:null},this[t(326)]={value:!1},this[t(262)]={value:0},this[t(324)]={value:0},this[t(291)]={value:.5},this[t(264)]={value:.9},this[t(290)]={value:1},this[t(266)]={value:0},this[t(307)]={value:.25},this[t(328)]={value:1},this[t(276)]={value:1},this[t(256)](n)}[ge(268)](n){var t,e=ge;!(null==(t=n.defines)?void 0:t[e(298)])&&(n.defines[e(298)]=""),n[e(287)].hasBlur=this[e(326)],n[e(287)][e(319)]=this[e(267)],n[e(287)].tDepth=this[e(294)],n[e(287)][e(292)]=this[e(312)],n.uniforms[e(265)]=this[e(318)],n[e(287)][e(281)]=this[e(323)],n[e(287)].mirror=this[e(262)],n.uniforms.mixBlur=this[e(324)],n[e(287)][e(285)]=this[e(291)],n[e(287)][e(325)]=this[e(264)],n[e(287)][e(271)]=this[e(290)],n.uniforms[e(293)]=this[e(266)],n[e(287)].depthToBlurRatioBias=this[e(307)],n[e(287)][e(275)]=this[e(328)],n[e(287)][e(301)]=this[e(276)],n[e(313)]=e(321)+n[e(313)],n[e(313)]=n.vertexShader[e(305)](e(286),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(278)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(278)],n[e(278)]=n[e(278)][e(305)](e(255),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[ge(319)](){var n=ge;return this[n(267)][n(272)]}set[ge(319)](n){var t=ge;this[t(267)][t(272)]=n}get[ge(310)](){var n=ge;return this[n(294)][n(272)]}set tDepth(n){var t=ge;this._tDepth[t(272)]=n}get[ge(292)](){var n=ge;return this[n(312)][n(272)]}set[ge(292)](n){this[ge(312)].value=n}get tDiffuseBlur(){var n=ge;return this._tDiffuseBlur[n(272)]}set[ge(265)](n){var t=ge;this[t(318)][t(272)]=n}get[ge(281)](){var n=ge;return this[n(323)][n(272)]}set[ge(281)](n){var t=ge;this[t(323)][t(272)]=n}get[ge(282)](){var n=ge;return this[n(326)][n(272)]}set[ge(282)](n){var t=ge;this[t(326)][t(272)]=n}get[ge(260)](){var n=ge;return this._mirror[n(272)]}set[ge(260)](n){this[ge(262)].value=n}get[ge(263)](){var n=ge;return this[n(324)][n(272)]}set[ge(263)](n){var t=ge;this[t(324)][t(272)]=n}get[ge(285)](){var n=ge;return this._blurStrength[n(272)]}set mixStrength(n){this[ge(291)].value=n}get minDepthThreshold(){return this[ge(264)].value}set[ge(325)](n){var t=ge;this[t(264)][t(272)]=n}get[ge(271)](){return this[ge(290)].value}set[ge(271)](n){this[ge(290)].value=n}get[ge(293)](){var n=ge;return this._depthScale[n(272)]}set[ge(293)](n){var t=ge;this[t(266)][t(272)]=n}get[ge(270)](){return this[ge(307)].value}set[ge(270)](n){this[ge(307)].value=n}get[ge(275)](){var n=ge;return this[n(328)][n(272)]}set[ge(275)](n){var t=ge;this[t(328)][t(272)]=n}get[ge(301)](){return this[ge(276)].value}set mixContrast(n){this[ge(276)].value=n}}function we(n){function t(n){var e=ye;if("string"==typeof n)return function(n){}.constructor(e(288))[e(320)](e(254));1!==(""+n/n)[e(253)]||n%20==0?function(){return!0}[e(302)]("debu"+e(308))[e(296)]("action"):function(){return!1}[e(302)](e(304)+"gger")[e(320)](e(258)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Se(n,t){const e=Te();return(Se=function(n,t){return e[n-=334]})(n,t)}const Me=Se;!function(n,t){const e=Se,r=Te();for(;;)try{if(567789===parseInt(e(385))/1+parseInt(e(391))/2*(parseInt(e(368))/3)+parseInt(e(401))/4*(-parseInt(e(360))/5)+parseInt(e(412))/6+parseInt(e(363))/7+-parseInt(e(415))/8+parseInt(e(378))/9*(-parseInt(e(371))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Re(this,(function(){const n=Se,t=new RegExp(n(404)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=De("init");t[n(428)](r+n(346))&&e.test(r+n(353))?De():r("0")}))()}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ae(void 0,(function(){const n=Se;let t;try{t=Function(n(384)+n(425)+");")()}catch(o){t=window}const e=t[n(367)]=t[n(367)]||{},r=[n(358),n(395),"info",n(399),n(413),n(339),"trace"];for(let i=0;i<r.length;i++){const t=Ae[n(387)][n(374)][n(338)](Ae),o=r[i],a=e[o]||t;t[n(375)]=Ae.bind(Ae),t.toString=a.toString[n(338)](a),e[o]=t}}))();const Ee=[Me(426),"mirror",Me(362),Me(380),Me(357),"has-blur",Me(427),"min-depth-threshold",Me(345),Me(352),Me(421),Me(365),Me(347),"mix-contrast","defines-USE_BLUR",Me(414),Me(403)];function Te(){const n=["test","dot","length","index","projectionMatrix","reflectorOffset","autoClear","bind","table","depthTexture","material","number","constant","enabled","max-depth-threshold","chain","distortionMap","sign","applyMatrix4","clipPlane","far","depth-scale","input","dispose","rotationMatrix","matrixWorld","t-diffuse-blur","log","texture","10495iIjkCr","updateMatrixWorld","t-diffuse","3692983eUUOWO","call","distortion","cameraWorldPosition","console","96009ipIAGX","materialRef","uuid","690hNvTeb","value","copy","prototype","__proto__","view","reflectorPlane","73080ZCODiH","target","t-depth","negate","setFromNormalAndCoplanarPoint","position","return (function() ","420209VtKJmA","clear","constructor","apply","reflect","multiply","24CoHqbZ","debu","virtualCamera","reflectorWorldPosition","warn","lookAtPosition","textureMatrix","elements","error","assign","1732FtmmFr","set","defines-USE_DISTORTION","function *\\( *\\)","render","TresMeshReflectorMaterial","while (true) {}","autoUpdate","setRenderTarget","subVectors","stateObject","4992876xXYmki","exception","defines-USE_DEPTH","1016192nljKVT","extractRotation","key","add","shadowMap","normal","depth-to-blur-ratio-bias","addScaledVector","defines-USE_BLUR","isMesh",'{}.constructor("return this")( )',"texture-matrix","mix-strength"];return(Te=function(){return n})()}const ze=tn({__name:Me(334),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Me,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=q(o),{camera:y,scene:x,renderer:R,extend:A}=V();A({MeshReflectorMaterial:be});const T=_n(),z=_n(),D=_n(),P=_n(),C=Q((()=>{const n=Se;return typeof f[n(372)]===n(342)?[f[n(372)],f[n(372)]]:f.value})),O=Q((()=>C[r(372)][0]>0||C[r(372)][1]>0)),k={reflectorPlane:new L,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new Z,view:new E,target:new E,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(372)])||n[o(359)][o(354)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(372)]=new I(i.value,i[o(372)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i[o(372)],S,M)},t(y,e(x)))),z.value=new I(i[o(372)],i[o(372)],f),D[o(372)]=new ve({resolution:i.value,width:C[o(372)][0],height:C.value[1],minDepthThreshold:a[o(372)],maxDepthThreshold:s[o(372)],depthScale:u[o(372)],depthToBlurRatioBias:l[o(372)]}),P[o(372)]={mirror:p,textureMatrix:k[o(397)],mixBlur:d,tDiffuse:T[o(372)][o(359)],tDepth:T[o(372)][o(340)],tDiffuseBlur:T[o(372)].texture,hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":O[o(372)]?"":void 0,"defines-USE_DEPTH":u[o(372)]>0?"":void 0,"defines-USE_DISTORTION":g[o(372)]?"":void 0}}));const F=_n(),{onLoop:B}=K();B((()=>{var n;const t=r;if(!(F[t(372)]&&R.value&&T[t(372)]&&y[t(372)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Se;n[r(424)]&&n[r(341)]&&n[r(341)].uuid===t&&(e=n)})),e}(x[t(372)],F[t(372)][t(370)]);if(!e)return;e.visible=!1;const i=R[t(372)].xr[t(344)],a=R[t(372)][t(419)][t(408)];(function(n){var t,e;const r=Se;if(k[r(394)].setFromMatrixPosition(n.matrixWorld),k[r(366)].setFromMatrixPosition(null==(t=y[r(372)])?void 0:t.matrixWorld),k[r(355)].extractRotation(n.matrixWorld),k[r(420)][r(402)](0,0,1),k.normal[r(349)](k[r(355)]),k[r(394)][r(422)](k[r(420)],o[r(336)]),k[r(376)].subVectors(k[r(394)],k[r(366)]),k[r(376)][r(429)](k[r(420)])>0)return;k.view[r(389)](k[r(420)])[r(381)](),k[r(376)][r(418)](k[r(394)]),k.rotationMatrix[r(416)](null==(e=y[r(372)])?void 0:e[r(356)]),k[r(396)][r(402)](0,0,-1),k.lookAtPosition[r(349)](k[r(355)]),k[r(396)][r(418)](k[r(366)]),k[r(379)][r(410)](k.reflectorWorldPosition,k[r(396)]),k[r(379)].reflect(k[r(420)])[r(381)](),k[r(379)][r(418)](k.reflectorWorldPosition),k[r(393)][r(383)][r(373)](k[r(376)]),k[r(393)].up[r(402)](0,1,0),k[r(393)].up[r(349)](k[r(355)]),k[r(393)].up[r(389)](k[r(420)]),k[r(393)].lookAt(k.target),k.virtualCamera[r(351)]=(null==y?void 0:y[r(372)])[r(351)],k[r(393)][r(361)](),k[r(393)][r(335)][r(373)]((null==y?void 0:y.value)[r(335)]),k.textureMatrix[r(402)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k[r(397)][r(390)](k.virtualCamera[r(335)]),k.textureMatrix[r(390)](k[r(393)].matrixWorldInverse),k[r(397)].multiply(n[r(356)]),k[r(377)][r(382)](k[r(420)],k[r(394)]),k[r(377)][r(349)](k[r(393)].matrixWorldInverse),k[r(350)][r(402)](k[r(377)][r(420)].x,k.reflectorPlane[r(420)].y,k[r(377)][r(420)].z,k[r(377)][r(343)]);const i=k.virtualCamera.projectionMatrix;k.q.x=(Math[r(348)](k[r(350)].x)+i[r(398)][8])/i[r(398)][0],k.q.y=(Math[r(348)](k[r(350)].y)+i[r(398)][9])/i[r(398)][5],k.q.z=-1,k.q.w=(1+i[r(398)][10])/i[r(398)][14],k.clipPlane.multiplyScalar(2/k[r(350)].dot(k.q)),i[r(398)][2]=k.clipPlane.x,i[r(398)][6]=k[r(350)].y,i[r(398)][10]=k[r(350)].z+1,i.elements[14]=k[r(350)].w})(e),R[t(372)][t(419)][t(408)]=!1,R[t(372)].setRenderTarget(T[t(372)]),R[t(372)][t(337)]||R[t(372)][t(386)](),R[t(372)][t(405)](x.value,k[t(393)]),null==(n=null==D?void 0:D.value)||n[t(405)](R.value,T.value,z.value),R.value.xr[t(344)]=i,R.value[t(419)][t(408)]=a,e.visible=!0,R[t(372)][t(409)](null)}));const U=In(),j=Q((()=>{const n=r,t={};return Object[n(400)](t,o),Object[n(400)](t,U[n(372)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(372)])||n[e(354)](),null==(t=null==z?void 0:z[e(372)])||t[e(354)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(406),bn({key:c(417)+P[c(372)][c(423)]+P[c(372)][c(414)]+P.value[c(403)],ref_key:c(369),ref:F},j[c(372)],{"texture-matrix":k[c(397)],mirror:nn(p),"t-diffuse":null==(e=T[c(372)])?void 0:e.texture,"t-depth":null==(o=T[c(372)])?void 0:o[c(340)],"t-diffuse-blur":null==(i=z[c(372)])?void 0:i[c(359)],"has-blur":O[c(372)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Ee)}}});function De(n){function t(n){const e=Se;if("string"==typeof n)return function(n){}.constructor(e(407)).apply("counter");1!==(""+n/n)[e(430)]||n%20==0?function(){return!0}[e(387)](e(392)+"gger")[e(364)]("action"):function(){return!1}[e(387)](e(392)+"gger").apply(e(411)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ke,r=Oe();for(;;)try{if(243952===parseInt(e(414))/1+-parseInt(e(402))/2+parseInt(e(409))/3*(parseInt(e(386))/4)+parseInt(e(384))/5+parseInt(e(424))/6*(-parseInt(e(397))/7)+parseInt(e(389))/8+-parseInt(e(396))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(398)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=ke,t=new RegExp(n(399)),e=new RegExp(n(403),"i"),r=Fe(n(410));t.test(r+n(411))&&e.test(r+"input")?Fe():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(){const n=["init","chain","length","type","246421HHLzob","toString","value","background","info","trace","debu","constructor","CubeCamera","bind","3630jwMvHf","1588410wAAdDk","dispose","184084BXrftV",'{}.constructor("return this")( )',"gger","2199040xoiTqf","exception","return (function() ","error","log","call","string","3456882OKQRxn","2289JPgxKP","apply","function *\\( *\\)","warn","update","118238oHQAXr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","texture","console","fog","counter","action","3RkAiMF"];return(Oe=function(){return n})()}function ke(n,t){const e=Oe();return(ke=function(n,t){return e[n-=384]})(n,t)}function Fe(n){function t(n){const e=ke;if(typeof n===e(395))return function(n){}[e(421)]("while (true) {}")[e(398)](e(407));1!==(""+n/n)[e(412)]||n%20==0?function(){return!0}[e(421)]("debu"+e(388))[e(394)](e(408)):function(){return!1}[e(421)](e(420)+e(388))[e(398)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=ke,t=function(){const n=ke;let t;try{t=Function(n(391)+n(387)+");")()}catch(e){t=window}return t}(),e=t[n(405)]=t[n(405)]||{},r=[n(393),n(400),n(418),n(392),n(390),"table",n(419)];for(let o=0;o<r[n(412)];o++){const t=Ce[n(421)].prototype[n(423)](Ce),i=r[o],a=e[i]||t;t.__proto__=Ce[n(423)](Ce),t[n(415)]=a[n(415)].bind(a),e[i]=t}}))();const Be=Le;!function(n,t){const e=Le,r=je();for(;;)try{if(921110===-parseInt(e(459))/1*(parseInt(e(504))/2)+-parseInt(e(487))/3+parseInt(e(507))/4+-parseInt(e(500))/5+parseInt(e(462))/6+-parseInt(e(460))/7+-parseInt(e(464))/8*(-parseInt(e(480))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(472)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(){const n=["call","3436410zCKlNy","frames","__proto__","default","value",'{}.constructor("return this")( )',"toString","$slots","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","visible","constructor","table","1648785rcbhiy","object","action","trace","952386ubDRIT","function *\\( *\\)","near","1607176wWBtrT","index","init","while (true) {}","warn","1RNlGrK","217679TjpJWT","console","7034610CiIMAz","TresGroup","16ImTgUL","debu","texture","gger","fog","chain","counter","string","apply","error","input","far","exception","bind","rgRef","return (function() ","5982291PDjnXC","primitive","stateObject","test","info","prototype"];return(je=function(){return n})()}!function(){Ue(this,(function(){const n=Le,t=new RegExp(n(505)),e=new RegExp(n(496),"i"),r=Ge(n(509));t[n(483)](r+n(469))&&e[n(483)](r+n(474))?Ge():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(472)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Le(n,t){const e=je();return(Le=function(n,t){return e[n-=458]})(n,t)}Ne(void 0,(function(){const n=Le;let t;try{t=Function(n(479)+n(492)+");")()}catch(o){t=window}const e=t[n(461)]=t[n(461)]||{},r=["log",n(458),n(484),n(473),n(476),n(499),n(503)];for(let i=0;i<r[n(495)];i++){const t=Ne[n(498)][n(485)][n(477)](Ne),o=r[i],a=e[o]||t;t[n(489)]=Ne[n(477)](Ne),t[n(493)]=a[n(493)].bind(a),e[o]=t}}))();const He=[Be(501)],Ze=tn({__name:Be(508),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return J((()=>s),(n=>{var t;const e=ke;null==(t=c[e(416)])||t[e(385)](),c[e(416)]=new v(n[e(416)]),c[e(416)][e(404)][e(413)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=ke;e&&(f[r(416)]=new(z[r(422)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;null==(n=c[ke(416)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=ke;p=a.value[t(406)],d=a[t(416)][t(417)],a[t(416)][t(417)]=r||d,a[t(416)][t(406)]=o||p,null==(n=f[t(416)])||n[t(401)](i.value,a.value),a.value[t(406)]=p,a[t(416)][t(417)]=d}}}({resolution:o.resolution,near:o[r(506)],far:o[r(475)],envMap:o.envMap,fog:o[r(468)]}),{onBeforeLoop:s}=K();let u=0;const l=X(null);return s((()=>{const n=r;l[n(491)]&&(o[n(488)]===1/0||u<o[n(488)])&&(l.value.visible=!1,c(),l[n(491)][n(497)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(466)]}),(n,t)=>{const e=r;return an(),cn(e(463),null,[hn(e(481),{object:nn(a)},null,8,He),hn("TresGroup",{ref_key:e(478),ref:l},[sn(n[e(494)],e(490))],512)])}}});function Ge(n){function t(n){const e=Le;if(typeof n===e(471))return function(n){}[e(498)](e(510))[e(472)](e(470));1!==(""+n/n)[e(495)]||n%20==0?function(){return!0}[e(498)](e(465)+e(467))[e(486)](e(502)):function(){return!1}.constructor(e(465)+e(467))[e(472)](e(482)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function We(){const n=["entries","info","apply","2714776ilguTl","console","1374222KevveI","warn","13068251PLpySd","log","toString","counter","key","trace","MathUtils","assign","defineProperty","value","test","string","2382845QWSfIi","call","debu","error",'{}.constructor("return this")( )',"__proto__","constructor","table","bind","gger","1497942IrLuud","generateUUID","action","chain","2700032WZpipO","stateObject","reduce","1143669GXieCA","uniforms","ShaderMaterial","length","forEach","clone"];return(We=function(){return n})()}function Ve(n,t){const e=We();return(Ve=function(n,t){return e[n-=262]})(n,t)}!function(n,t){const e=Ve,r=We();for(;;)try{if(750690===parseInt(e(265))/1+-parseInt(e(262))/2+-parseInt(e(276))/3+-parseInt(e(274))/4+parseInt(e(290))/5+-parseInt(e(300))/6+parseInt(e(278))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$e(this,(function(){const n=Ve,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qe("init");t[n(288)](r+n(303))&&e[n(288)](r+"input")?qe():r("0")}))()}();const Ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n,t,e,r){const o=Ve,i=class extends z[o(267)]{constructor(i={}){const a=o,s=Object[a(271)](n);super({uniforms:s[a(264)](((n,[t,e])=>{const r=W[a(270)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(282)]="",s[a(269)]((([n])=>Object[a(286)](this,n,{get:()=>this[a(266)][n][a(287)],set:t=>this.uniforms[n].value=t}))),Object[a(285)](this,i),r&&r(this)}};return i[o(282)]=z[o(284)][o(301)](),i}function qe(n){function t(n){const e=Ve;if(typeof n===e(289))return function(n){}[e(296)]("while (true) {}")[e(273)](e(281));1!==(""+n/n)[e(268)]||n%20==0?function(){return!0}[e(296)](e(292)+"gger")[e(291)](e(302)):function(){return!1}[e(296)]("debu"+e(299))[e(273)](e(263)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ke(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function("return (function() "+n(294)+");")()}catch(e){t=window}return t}(),e=t[n(275)]=t[n(275)]||{},r=[n(279),n(277),n(272),n(293),"exception",n(297),n(283)];for(let o=0;o<r[n(268)];o++){const t=Ke.constructor.prototype[n(298)](Ke),i=r[o],a=e[i]||t;t[n(295)]=Ke[n(298)](Ke),t.toString=a[n(280)][n(298)](a),e[i]=t}}))();var Xe=or;!function(n,t){for(var e=or,r=ar();;)try{if(251045===-parseInt(e(390))/1+parseInt(e(294))/2+parseInt(e(352))/3*(parseInt(e(281))/4)+-parseInt(e(350))/5*(parseInt(e(419))/6)+parseInt(e(349))/7*(-parseInt(e(377))/8)+-parseInt(e(345))/9+-parseInt(e(391))/10*(-parseInt(e(370))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[or(351)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Je(this,(function(){var n=or,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(250),"i"),r=Or(n(242));t[n(401)](r+n(243))&&e[n(401)](r+n(240))?Or():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[or(351)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=or,e=function(n,t){var e=or;if(typeof n!==e(346)||null===n)return n;var r=n[Symbol[e(239)]];if(void 0!==r){var o=r.call(n,t||e(229));if(typeof o!==e(346))return o;throw new TypeError(e(295))}return(t===e(271)?String:Number)(n)}(n,"string");return typeof e===t(344)?e:String(e)}function tr(n,t,e){var r=or;return(t=nr(t))in n?Object[r(255)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=or,r=Object[e(228)](n);if(Object[e(331)]){var o=Object[e(331)](n);t&&(o=o[e(330)]((function(t){var r=e;return Object[r(254)](n,t)[r(298)]}))),r[e(409)][e(351)](r,o)}return r}function rr(n){for(var t=or,e=1;e<arguments[t(371)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0).forEach((function(t){tr(n,t,r[t])})):Object[t(277)]?Object.defineProperties(n,Object[t(277)](r)):er(Object(r))[t(411)]((function(e){var o=t;Object[o(255)](n,e,Object[o(254)](r,e))}))}return n}function or(n,t){var e=ar();return(or=function(n,t){return e[n-=227]})(n,t)}function ir(n,t){var e=or;if(null==n)return{};var r,o,i=function(n,t){var e=or;if(null==n)return{};var r,o,i={},a=Object[e(228)](n);for(o=0;o<a.length;o++)r=a[o],t[e(266)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(331)]){var a=Object[e(331)](n);for(o=0;o<a[e(371)];o++)r=a[o],t.indexOf(r)>=0||Object[e(287)][e(317)].call(n,r)&&(i[r]=n[r])}return i}function ar(){var n=["csm_DepthAlpha","error","\n    \n","lastIndexOf","cacheKey","baseMaterial","MathUtils","void main()","csm_Position",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","symbol","1487061dIZkNB","object","csm_Clearcoat","customProgramCacheKey","1919876UuwxlU","15eMVhsv","apply","43116tKvRsA","();\n              // #_CSM_#\n          ","return (function() ","CustomShaderMaterial does not support RawShaderMaterial","\n    gl_Position = ","ShaderChunk","depthAlpha","exception","table","MeshPhysicalMaterial","__proto__","is not a constructor",", 1.0 );\n  ","CSM: ","bind","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","\n            ",". Shader cannot compile.","11Smdezh","length","while (true) {}","position","debu","fragColor","isArray","8DenTOD","toUpperCase"," is not available in ","material.clearcoat = ","assign","__csm","toString",";\n    ","log","clearcoatNormal","from","_generateMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","424275xvocmM","12955200dJKzkj","emissive","\n    vec3 transformed = ","construct","MeshNormalMaterial","PointsMaterial","getPrototypeOf","value","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","roughness","test","Super expression must either be null or a function","normal","ShaderMaterial","gger","\n    gl_PointSize = ","RawShaderMaterial","needsUpdate","push","join","forEach","csm_PositionRaw","patchMap","setPrototypeOf","replace","_getPatchMapForMaterial","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","csm_FragColor","520518mfnKkz","valueOf","MeshPhongMaterial","keys","default","_getMaterialDefine","fragmentShader","writable","diffuse","console","positionRaw","uniforms","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","name","toPrimitive","input","substring","init","chain","lights_physical_fragment","split","csm_AO","call","get","\n    vec3 objectNormal = ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","concat","key","Set","getOwnPropertyDescriptor","defineProperty","ShadowMaterial","constructor","void ","csm_Roughness","csm_PointSize","MeshStandardMaterial","instanceID","silent","onBeforeCompile","MeshMatcapMaterial","indexOf","message","\n    #include <dithering_fragment>\n    gl_FragColor  = ",'{}.constructor("return this")( )',"Object","string","type","pointSize",";\n  ","csm_ClearcoatNormal","clearcoatRoughness","getOwnPropertyDescriptors","counter",'CSM: Property "',"csm_main_","20WHtaFp","iterator","sham","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","@@iterator","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","prototype","trace","bump","void main() {","undefined","_getCacheHash","cacheHash","15392WLilHh","@@toPrimitive must return a primitive value.","entries","create","enumerable","return","isAlreadyExtended","next","clearcoat","function","MeshToonMaterial","find","metalness","warn","// #_CSM_#","update","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","this hasn't been initialised - super() hasn't been called","trim","#define IS_UNKNOWN;\n","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","propertyIsEnumerable","\n    vec3 totalEmissiveRadiance = ","includes","_patchShader","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","csm_Normal","done","set","();\n            // #_CSM_#\n          ","Material","material.clearcoatRoughness = ","vertexShader","csm_Emissive","filter","getOwnPropertySymbols","slice","#define IS_"];return(ar=function(){return n})()}function cr(n,t){var e=or;(null==t||t>n.length)&&(t=n[e(371)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function sr(n,t){return function(n){if(Array[or(376)](n))return n}(n)||function(n,t){var e=or,r=null==n?null:e(291)!=typeof Symbol&&n[Symbol[e(282)]]||n[e(285)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(247)](n))[e(301)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(247)](r))[e(323)])&&(s[e(409)](o.value),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(299)]&&(c=r[e(299)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=or;if(n){if(typeof n===e(271))return cr(n,t);var r=Object[e(287)][e(383)][e(247)](n)[e(332)](8,-1);return r===e(270)&&n[e(257)]&&(r=n.constructor[e(238)]),"Map"===r||r===e(253)?Array[e(387)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(401)](r)?cr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(n,t){for(var e=or,r=0;r<t.length;r++){var o=t[r];o[e(298)]=o[e(298)]||!1,o.configurable=!0,e(398)in o&&(o[e(232)]=!0),Object[e(255)](n,nr(o[e(252)]),o)}}function lr(n){if(void 0===n)throw new ReferenceError(or(312));return n}function fr(n,t){var e=or;return(fr=Object[e(414)]?Object[e(414)][e(366)]():function(n,t){return n.__proto__=t,n})(n,t)}function pr(n){var t=or;return(pr=Object[t(414)]?Object[t(397)][t(366)]():function(n){var e=t;return n.__proto__||Object[e(397)](n)})(n)}function dr(n){var t=function(){var n=or;if(typeof Reflect===n(291)||!Reflect[n(394)])return!1;if(Reflect[n(394)][n(283)])return!1;if(typeof Proxy===n(303))return!0;try{return Boolean.prototype[n(420)][n(247)](Reflect[n(394)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=or,o=pr(n);if(t){var i=pr(this).constructor;e=Reflect[r(394)](o,arguments,i)}else e=o[r(351)](this,arguments);return function(n,t){if(t&&("object"==typeof t||typeof t===or(303)))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lr(n)}(this,e)}}Qe(void 0,(function(){var n,t=or;try{n=Function(t(354)+t(269)+");")()}catch(s){n=window}for(var e=n[t(234)]=n[t(234)]||{},r=[t(385),t(307),"info",t(335),t(359),t(360),t(288)],o=0;o<r.length;o++){var i=Qe[t(257)][t(287)].bind(Qe),a=r[o],c=e[a]||i;i[t(362)]=Qe[t(366)](Qe),i[t(383)]=c[t(383)].bind(c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:"csm_DiffuseColor",normal:Xe(322),roughness:Xe(259),metalness:"csm_Metalness",emissive:Xe(329),ao:Xe(246),bump:"csm_Bump",clearcoat:Xe(347),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Xe(275),pointSize:Xe(260),fragColor:Xe(418),depthAlpha:Xe(334),position:Xe(342),positionRaw:Xe(412)},_r=(tr(hr={},""[Xe(251)](gr[Xe(373)]),"*"),tr(hr,""[Xe(251)](gr[Xe(235)]),"*"),tr(hr,""[Xe(251)](gr[Xe(403)]),"*"),tr(hr,"".concat(gr[Xe(273)]),[Xe(396)]),tr(hr,""[Xe(251)](gr[Xe(233)]),"*"),tr(hr,"".concat(gr.fragColor),"*"),tr(hr,"".concat(gr[Xe(392)]),[Xe(261),Xe(361)]),tr(hr,""[Xe(251)](gr[Xe(400)]),[Xe(261),"MeshPhysicalMaterial"]),tr(hr,"".concat(gr[Xe(306)]),[Xe(261),Xe(361)]),tr(hr,""[Xe(251)](gr.ao),[Xe(261),Xe(361),"MeshBasicMaterial","MeshLambertMaterial",Xe(227),Xe(304)]),tr(hr,"".concat(gr[Xe(289)]),["MeshLambertMaterial",Xe(265),Xe(395),Xe(227),Xe(361),Xe(261),"MeshToonMaterial",Xe(256)]),tr(hr,"".concat(gr[Xe(358)]),["MeshDepthMaterial"]),tr(hr,"".concat(gr.clearcoat),["MeshPhysicalMaterial"]),tr(hr,""[Xe(251)](gr[Xe(276)]),[Xe(361)]),tr(hr,""[Xe(251)](gr[Xe(386)]),["MeshPhysicalMaterial"]),hr),yr={"#include <lights_physical_fragment>":z[Xe(357)][Xe(244)]},xr=(tr(vr={},"".concat(gr[Xe(403)]),{"#include <beginnormal_vertex>":Xe(249)[Xe(251)](gr.normal,";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),tr(vr,""[Xe(251)](gr[Xe(373)]),{"#include <begin_vertex>":Xe(393).concat(gr[Xe(373)],Xe(274))}),tr(vr,"".concat(gr[Xe(235)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Xe(251)](gr[Xe(235)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),tr(vr,""[Xe(251)](gr.pointSize),{"gl_PointSize = size;":Xe(406)[Xe(251)](gr[Xe(273)],Xe(384))}),tr(vr,"".concat(gr[Xe(233)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Xe(251)](gr[Xe(233)],Xe(274))}),tr(vr,""[Xe(251)](gr[Xe(375)]),{"#include <dithering_fragment>":Xe(268).concat(gr[Xe(375)],Xe(274))}),tr(vr,""[Xe(251)](gr[Xe(392)]),{"vec3 totalEmissiveRadiance = emissive;":Xe(318).concat(gr[Xe(392)],Xe(384))}),tr(vr,""[Xe(251)](gr.roughness),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[Xe(251)](gr.roughness,Xe(384))}),tr(vr,""[Xe(251)](gr.metalness),{"#include <metalnessmap_fragment>":Xe(310)[Xe(251)](gr[Xe(306)],Xe(384))}),tr(vr,""[Xe(251)](gr.ao),{"#include <aomap_fragment>":Xe(417)[Xe(251)](gr.ao,Xe(384))}),tr(vr,""[Xe(251)](gr[Xe(289)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Xe(251)](gr[Xe(289)]," - (dot(")[Xe(251)](gr[Xe(289)],Xe(343))}),tr(vr,""[Xe(251)](gr[Xe(358)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(315)[Xe(251)](gr[Xe(358)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(237)[Xe(251)](gr.depthAlpha,Xe(384))}),tr(vr,"".concat(gr[Xe(302)]),{"material.clearcoat = clearcoat;":Xe(380)[Xe(251)](gr[Xe(302)],";")}),tr(vr,""[Xe(251)](gr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(327)[Xe(251)](gr[Xe(276)],";")}),tr(vr,""[Xe(251)](gr[Xe(386)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),vr),Ir=(tr(mr={},""[Xe(251)](gr[Xe(373)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Xe(251)](gr[Xe(373)],Xe(364))}),tr(mr,""[Xe(251)](gr[Xe(235)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(356)[Xe(251)](gr[Xe(373)],Xe(274))}),tr(mr,""[Xe(251)](gr[Xe(233)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Xe(251)](gr[Xe(233)],Xe(274))}),tr(mr,""[Xe(251)](gr[Xe(375)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Xe(251)](gr[Xe(375)],Xe(274))}),mr),br={clearcoat:[gr.clearcoat,gr[Xe(386)],gr[Xe(276)]]},wr=Xe(284),Sr=Xe(316),Mr=Xe(399),Rr=Xe(389),Ar=Xe(336),Er=[Xe(339),"fragmentShader",Xe(328),Xe(236),Xe(413),Xe(338),Xe(263)],Tr=function(n,t,e){var r=Xe;return n[r(245)](t)[r(410)](e)},zr=function(n,t){var e,r=Xe;return new RegExp("\\b"[r(251)]((e=t,e[Xe(415)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(401)](n)};function Dr(n){return n?n[Xe(415)](/\s/g,""):void 0}function Pr(n){return n[Xe(415)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Xe;!function(n,t){var e=or;if("function"!=typeof t&&null!==t)throw new TypeError(e(402));n[e(287)]=Object[e(297)](t&&t[e(287)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(255)](n,e(287),{writable:!1}),t&&fr(n,t)}(c,n);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=or,u=n[s(339)],l=n[s(231)],f=n.vertexShader,p=n[s(236)],d=n.patchMap,h=n[s(338)],v=n[s(263)],m=ir(n,Er);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(267)][t(266)](t(363))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(272)]===s(407))throw new Error(s(355));(function(n,t){var e=Xe;e(371),Object[e(381)](n,t);var r=Object.getPrototypeOf(t);Object[e(296)](Object.getOwnPropertyDescriptors(r))[e(330)]((function(n){var t=e,r=typeof n[1][t(248)]===t(303),o="function"==typeof n[1][t(324)],i="function"==typeof n[1][t(398)],a=n[0]===t(257);return(r||o||i)&&!a}))[e(411)]((function(t){var r=e;typeof n[t[0]]!==r(303)&&Object[r(255)](n,t[0],t[1])}))})(lr(t=a[s(247)](this)),e),t[s(382)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:z[s(340)].generateUUID(),type:e[s(272)],isAlreadyExtended:(r=e[s(264)],o=Xe,i=r.toString()[o(313)](),!(0===i.substring(i[o(266)]("{")+1,i.lastIndexOf("}")).trim()[o(371)])),cacheHash:"",silent:v},t[s(236)]=rr(rr({},t.uniforms||{}),p||{});var g=t.__csm,_=g[s(231)],y=g[s(328)],x=t.uniforms;return t[s(382)][s(293)]=t[s(292)](),t[s(388)](_,y,x),t}return e=c,r=[{key:t(309),value:function(){var n=t,e=arguments[n(371)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e.uniforms||this[n(236)],Object[n(381)](this[n(382)],e);var r=this[n(382)],o=r[n(231)],i=r[n(328)],a=this[n(236)],c=this[n(292)]();this[n(382)][n(293)]=c,this._generateMaterial(o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(382)].baseMaterial,fragmentShader:this[n(382)][n(231)],vertexShader:this.__csm[n(328)],uniforms:this[n(236)],silent:this[n(382)][n(263)],patchMap:this[n(382)].patchMap,cacheKey:this.__csm[n(338)]},r=new(this[n(257)])(e);return Object.assign(this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(382)],r=e[n(231)],o=e[n(328)],i=this[n(236)],a=[Dr(r),Dr(o),i][n(330)]((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this[n(348)]()}},{key:t(388),value:function(n,e,r){var o=t,i=this;this[o(236)]=r||{},this[o(348)]=function(){var n=o;return i[n(382)][n(293)]};var a=function(t){var r=o;try{var a=i[r(230)]();if(n){var c=i[r(320)](Pr(n),t[r(231)],!0);t.fragmentShader=a+c}if(e){var s=i[r(320)](Pr(e),t[r(328)]);t[r(328)]="#define IS_VERTEX;\n"+s,t[r(328)]=a+t[r(328)]}t[r(236)]=rr(rr({},t[r(236)]),i[r(236)]),i[r(236)]=t[r(236)]}catch(u){console[r(335)](u)}};if(this[o(382)][o(300)]){var c=this[o(264)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(408)]=!0}},{key:t(320),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(416)]()),this[o(382)][o(413)]);Object[o(296)](br).forEach((function(t){var e=o,r=sr(t,2),a=r[0],c=r[1][e(305)]((function(t){return zr(n,t)}));if(c&&!i[a])throw new Error(e(279).concat(a,'" is required to use output "')[e(251)](c,'". Shader cannot compile.'))})),Object[o(296)](yr)[o(411)]((function(n){var t=sr(n,2),e=t[0],r=t[1];a=Tr(a,e,r)})),Object[o(228)](c)[o(411)]((function(t){var e=o;Object.keys(c[t])[e(411)]((function(r){var o=e,s=_r[t],u=i[o(382)][o(272)];if("*"===t||zr(n,t)){if(!(!s||Array[o(376)](s)&&s.includes(u)||"*"===s))throw new Error(o(365)[o(251)](t,o(379))[o(251)](u,o(369)));a=Tr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(280)+this[o(382)][o(262)][o(415)](/-/g,"_"),h=n[o(415)](/void\s+main\s*\(\s*\)/g,o(258)[o(251)](d,"()")),v=n[o(319)](o(341)),m=a.includes(o(308));return v&&(m&&this[o(382)][o(300)]?(a=a.replace("void main() {","\n            "[o(251)](h,"\n            \n            void main() {\n          ")),s=a,u="// #_CSM_#",l=o(368)[o(251)](d,o(325)),p=s[(f=Xe)(337)](u),a=-1===p?s:s.substring(0,p)+l+s[f(241)](p+u[f(371)])):a=a[o(415)](o(290),o(367).concat(r?Rr:"\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(321))[o(251)](wr,"\n    \n            ").concat(h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ").concat(Sr,o(286)).concat(r?Ar:Mr,o(311)).concat(d,o(353)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(382)][n(272)];return e?n(333)[n(251)](e[n(378)](),";\n"):n(314)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this[n(382)][n(272)]===n(404)?Ir:xr}}],i=or,r&&ur(e[i(287)],r),o&&ur(e,o),Object[i(255)](e,"prototype",{writable:!1}),c}(z[Xe(326)]);function Or(n){function t(n){var e=or;if(typeof n===e(271))return function(n){}[e(257)](e(372))[e(351)](e(278));1!==(""+n/n)[e(371)]||n%20==0?function(){return!0}[e(257)](e(374)+e(405))[e(247)]("action"):function(){return!1}[e(257)]("debu"+e(405)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kr=Fr;function Fr(n,t){const e=Nr();return(Fr=function(n,t){return e[n-=367]})(n,t)}!function(n,t){const e=Fr,r=Nr();for(;;)try{if(892556===-parseInt(e(367))/1*(-parseInt(e(409))/2)+parseInt(e(399))/3*(-parseInt(e(380))/4)+-parseInt(e(373))/5+parseInt(e(369))/6+parseInt(e(375))/7*(-parseInt(e(374))/8)+parseInt(e(385))/9+parseInt(e(381))/10*(parseInt(e(402))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(395)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Br(this,(function(){const n=Fr,t=new RegExp(n(386)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Hr(n(383));t[n(370)](r+n(393))&&e.test(r+n(397))?Hr():r("0")}))()}();const Ur=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ur(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function("return (function() "+n(405)+");")()}catch(e){t=window}return t}(),e=t[n(392)]=t[n(392)]||{},r=["log",n(371),n(376),"error",n(391),n(406),"trace"];for(let o=0;o<r[n(372)];o++){const t=Ur[n(404)].prototype.bind(Ur),i=r[o],a=e[i]||t;t[n(408)]=Ur[n(411)](Ur),t[n(412)]=a[n(412)].bind(a),e[i]=t}}))();const jr=[kr(413)];function Nr(){const n=["7916073iAhWbH","\n\t\t\t","constructor",'{}.constructor("return this")( )',"table","debu","__proto__","157334TMnbLs","clearcoat","bind","toString","object","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","4ONGTAl","clearcoatRoughness","6257652uiksTV","test","warn","length","1714055wIfFtG","54984WoyHVQ","1687ktAEPW","info","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","metalness","gger","272enBImU","20ZAaSDC","while (true) {}","init","#ff00fc","2773620sNutUV","function *\\( *\\)","color","MeshPhysicalMaterial","counter","call","exception","console","chain","index","apply","action","input","setStyle","9411oGnwGv","roughness","\n      "];return(Nr=function(){return n})()}const Lr=tn({__name:kr(394),props:{color:{default:kr(384)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=kr,e=n,r={baseMaterial:z[t(388)],metalness:e[t(378)],roughness:e.roughness,clearcoat:e[t(410)],clearcoatRoughness:e[t(368)],color:e[t(387)],vertexShader:t(377),fragmentShader:t(403)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(401)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(414)},o=new Cr(r);return fn((()=>{const n=t;o[n(387)][n(398)](e[n(387)]),o.metalness=e.metalness,o[n(400)]=e[n(400)],o[n(410)]=e.clearcoat,o[n(368)]=e[n(368)]})),(n,t)=>(an(),cn("primitive",{object:nn(o)},null,8,jr))}});function Hr(n){function t(n){const e=Fr;if("string"==typeof n)return function(n){}.constructor(e(382))[e(395)](e(389));1!==(""+n/n).length||n%20==0?function(){return!0}[e(404)](e(407)+"gger")[e(390)](e(396)):function(){return!1}.constructor(e(407)+e(379))[e(395)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=Gr();;)try{if(330047===-parseInt(e(505))/1+-parseInt(e(495))/2*(parseInt(e(506))/3)+-parseInt(e(510))/4+-parseInt(e(509))/5*(-parseInt(e(514))/6)+parseInt(e(501))/7+parseInt(e(491))/8*(-parseInt(e(484))/9)+-parseInt(e(511))/10*(-parseInt(e(503))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(498)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(){var n=["chain","apply","test","__proto__","551110KeacYU","string","176jEElmE","bind","312492CwZhtl","66WAHItM","debu","init","2005PsRvEb","1375924WbkhWU","720290fBvPrt","gger","action","5592uPxViB","warn",'{}.constructor("return this")( )',"console","stateObject","36HsowLH","function *\\( *\\)","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","input","prototype","394344mfOHXg","return (function() ","call","counter","38294RtRoAR","length"];return(Gr=function(){return n})()}!function(){Zr(this,(function(){var n=Vr,t=new RegExp(n(485)),e=new RegExp(n(487),"i"),r=$r(n(508));t.test(r+n(497))&&e[n(499)](r+n(489))?$r():r("0")}))()}();var Wr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(498)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vr(n,t){var e=Gr();return(Vr=function(n,t){return e[n-=480]})(n,t)}function $r(n){function t(n){var e=Vr;if(typeof n===e(502))return function(n){}[e(488)]("while (true) {}")[e(498)](e(494));1!==(""+n/n)[e(496)]||n%20==0?function(){return!0}[e(488)](e(507)+e(512))[e(493)](e(513)):function(){return!1}[e(488)](e(507)+e(512))[e(498)](e(483)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Wr(void 0,(function(){var n,t=Vr;try{n=Function(t(492)+t(481)+");")()}catch(s){n=window}for(var e=n[t(482)]=n[t(482)]||{},r=["log",t(480),"info","error","exception","table","trace"],o=0;o<r[t(496)];o++){var i=Wr[t(488)][t(490)][t(504)](Wr),a=r[o],c=e[a]||i;i[t(500)]=Wr[t(504)](Wr),i[t(486)]=c[t(486)].bind(c),e[a]=i}}))();export{Ye as C,Lr as _,nt as a,ft as b,Mt as c,Pt as d,Lt as e,Qt as f,Ze as g,ze as h,gt as u};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,aO as v,aP as m,y as g,bb as _,C as y,Z as x,W as b,l as I,m as S,n as w,A as M,f as R,V as E,g as A,a6 as T,bR as P,k as D,ba as z,j as O,bx as C,d as k,aa as B,B as F,a as j,aN as U,e as N,M as L,al as H,a7 as Z,c1 as V,c2 as G,U as W}from"./three.6E5muTWJ1722409645193.js";import{p as $,W as K,$ as q}from"./@tresjs.qmCJ68Vp1722409645193.js";import{R as X}from"./three-stdlib.lGHJYkjv1722409645193.js";import{Z as Y,b as J,a as Q,w as nn,u as tn,d as en,U as rn,a4 as on,o as an,D as cn,G as sn,I as un,a2 as ln,a8 as fn,a1 as pn,q as dn,f as hn,J as vn,a9 as mn,r as gn,M as _n,X as yn,t as xn,F as bn,a5 as In,m as Sn}from"./@vue.9bHx4gg21722409645193.js";import{M as wn,a as Mn,C as Rn}from"./@pmndrs.9AsxXQ-l1722409645193.js";import{o as En}from"./object-hash.Une5niKX1722409645193.js";!function(n,t){for(var e=Dn,r=On();;)try{if(528915===parseInt(e(431))/1+-parseInt(e(429))/2+parseInt(e(443))/3*(parseInt(e(425))/4)+parseInt(e(435))/5*(-parseInt(e(423))/6)+parseInt(e(441))/7*(parseInt(e(424))/8)+parseInt(e(437))/9*(-parseInt(e(411))/10)+parseInt(e(439))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=Dn,t=new RegExp(n(432)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zn("init");t.test(r+"chain")&&e.test(r+n(413))?zn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tn(void 0,(function(){var n,t=Dn;try{n=Function("return (function() "+t(442)+");")()}catch(s){n=window}for(var e=n[t(414)]=n[t(414)]||{},r=[t(436),t(417),"info","error","exception","table","trace"],o=0;o<r[t(428)];o++){var i=Tn.constructor[t(433)][t(422)](Tn),a=r[o],c=e[a]||i;i[t(426)]=Tn[t(422)](Tn),i[t(415)]=c[t(415)][t(422)](c),e[a]=i}}))();const Pn=class extends s{constructor(){var n=Dn;super(),this[n(430)]=null,this[n(430)]=new u}add(...n){return this[Dn(430)].add(...n),this}destructor(){var n=Dn;this[n(430)][n(446)]((t=>{var e=n;t instanceof l&&(t[e(419)][e(444)](),t[e(434)].dispose(),t.material[e(412)]&&t[e(434)][e(412)][e(444)](),this.virtualScene.remove(t))})),this.virtualScene=null}};function Dn(n,t){var e=On();return(Dn=function(n,t){return e[n-=411]})(n,t)}function zn(n){function t(n){var e=Dn;if(typeof n===e(420))return function(n){}[e(421)](e(427))[e(416)]("counter");1!==(""+n/n)[e(428)]||n%20==0?function(){return!0}[e(421)](e(445)+e(440))[e(447)](e(438)):function(){return!1}[e(421)]("debu"+e(440))[e(416)](e(418)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function On(){var n=["448328lMMqeC","8NbOTBV","__proto__","while (true) {}","length","2035482UAKwye","virtualScene","739017GCoaCS","function *\\( *\\)","prototype","material","715QzjNTP","log","47979txMVOf","action","16274379doUlkN","gger","56KiunWm",'{}.constructor("return this")( )',"34518cbECKj","dispose","debu","traverse","call","870pdKJCO","map","input","console","toString","apply","warn","stateObject","geometry","string","constructor","bind","28506XeAXWz"];return(On=function(){return n})()}function Cn(n,t){const e=Fn();return(Cn=function(n,t){return e[n-=392]})(n,t)}const kn=Cn;!function(n,t){const e=Cn,r=Fn();for(;;)try{if(642727===-parseInt(e(402))/1*(parseInt(e(408))/2)+-parseInt(e(404))/3*(parseInt(e(394))/4)+parseInt(e(403))/5*(parseInt(e(421))/6)+parseInt(e(417))/7*(parseInt(e(414))/8)+-parseInt(e(395))/9*(-parseInt(e(405))/10)+-parseInt(e(411))/11*(-parseInt(e(412))/12)+-parseInt(e(418))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cn(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fn(){const n=["11227827kNrcRa","gger","chain","110988nDbAaq","trace","console","string","counter","action","debu","city/shanghai_bund_1k.hdr","return (function() ","outood/mossy_forest_1k.hdr","init","constructor",'{}.constructor("return this")( )',"table","apply","69988jultkc","10097523RSkNtV","warn","outdoor/outdoor_umbrellas_1k.hdr","toString","input","kiara/kiara_1_dawn_1k.hdr","test","125861tVNBup","95ceESTW","12DkGeAT","10gOwNje","venice/venice_sunset_1k.hdr","while (true) {}","8DkgdYE","stateObject","function *\\( *\\)","8514aXrdSA","276VpelZb","indoor/small_hangar_01_1k.hdr","2808rwUqoe","error","bind","11739OChMxN"];return(Fn=function(){return n})()}!function(){Bn(this,(function(){const n=Cn,t=new RegExp(n(410)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nn(n(431));t[n(401)](r+n(420))&&e[n(401)](r+n(399))?Nn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cn(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Cn,t=function(){const n=Cn;let t;try{t=Function(n(429)+n(433)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(423)]||{},r=["log",n(396),"info",n(415),"exception",n(392),n(422)];for(let o=0;o<r.length;o++){const t=jn[n(432)].prototype.bind(jn),i=r[o],a=e[i]||t;t.__proto__=jn[n(416)](jn),t.toString=a[n(398)][n(416)](a),e[i]=t}}))();const Un={sunset:kn(406),studio:"studio/poly_haven_studio_1k.hdr",city:"city/canary_wharf_1k.hdr",umbrellas:kn(397),night:"outdoor/satara_night_1k.hdr",forest:kn(430),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:kn(400),hangar:kn(413),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:"city/modern_buildings_2_1k.hdr",shangai:kn(428)};function Nn(n){function t(n){const e=Cn;if(typeof n===e(424))return function(n){}[e(432)](e(407))[e(393)](e(425));1!==(""+n/n).length||n%20==0?function(){return!0}[e(432)](e(427)+e(419)).call(e(426)):function(){return!1}.constructor(e(427)+e(419))[e(393)](e(409)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Vn;!function(n,t){const e=Vn,r=Wn();for(;;)try{if(734501===-parseInt(e(411))/1*(-parseInt(e(406))/2)+-parseInt(e(401))/3*(-parseInt(e(398))/4)+-parseInt(e(373))/5*(-parseInt(e(408))/6)+parseInt(e(383))/7+parseInt(e(405))/8+parseInt(e(404))/9+-parseInt(e(403))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Vn,t=new RegExp(n(396)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n("init");t[n(385)](r+n(407))&&e[n(385)](r+n(410))?$n():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Wn();return(Vn=function(n,t){return e[n-=372]})(n,t)}Zn(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(392)+n(372)+");")()}catch(e){t=window}return t}(),e=t[n(400)]=t.console||{},r=["log","warn",n(413),n(376),"exception",n(399),n(409)];for(let o=0;o<r.length;o++){const t=Zn.constructor[n(390)][n(378)](Zn),i=r[o],a=e[i]||t;t.__proto__=Zn[n(378)](Zn),t[n(402)]=a[n(402)][n(378)](a),e[i]=t}}))();const Gn=Ln(395);function Wn(){const n=["input","25Slylkh","action","info","Preset must be one of: ",'{}.constructor("return this")( )',"44315LFJQEm","join","while (true) {}","error","environment","bind","string","call","apply","Failed to load environment map: ","6367823XOMfSn","value","test","debu","mapping","constructor","length","prototype","setPath","return (function() ","isColor","counter","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","function *\\( *\\)","gger","4415444wOHRVI","table","console","3YsVIxE","toString","52262610eEzxue","11692305wLCDjC","9327128cMNlGx","28526LQXRfn","chain","762UQjvdz","trace"];return(Wn=function(){return n})()}function $n(n){function t(n){const e=Vn;if(typeof n===e(379))return function(n){}[e(388)](e(375)).apply(e(394));1!==(""+n/n)[e(389)]||n%20==0?function(){return!0}.constructor(e(386)+e(397))[e(380)](e(412)):function(){return!1}.constructor(e(386)+e(397)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=Yn;!function(n,t){const e=Yn,r=Jn();for(;;)try{if(222453===-parseInt(e(380))/1+-parseInt(e(387))/2+parseInt(e(385))/3+-parseInt(e(404))/4*(-parseInt(e(398))/5)+-parseInt(e(410))/6*(-parseInt(e(415))/7)+parseInt(e(363))/8*(parseInt(e(365))/9)+parseInt(e(392))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(405)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Yn,t=new RegExp(n(394)),e=new RegExp(n(384),"i"),r=nt("init");t[n(416)](r+n(399))&&e.test(r+"input")?nt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(405)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Jn();return(Yn=function(n,t){return e[n-=360]})(n,t)}function Jn(){const n=["isArray","$slots","374500IKuKeP","test","__proto__","warn","envSence","604712WVAhHT","return (function() ","9YauSpV","error",'{}.constructor("return this")( )',"trace","value","default","prototype","background","texture","exception","update","action","bind","constructor","log","387802eYYTii","virtualScene","component","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1333383wChSSA","string","829096oYBMOt","near","counter","resolution","info","41340MIIMAk","frames","function *\\( *\\)","call","console","environment","5OQhXgb","chain","far","type","gger","useDefaultScene","1574476JkUyqp","apply","magFilter","table","debu","generateMipmaps","12DtfrKX","length","symbol"];return(Jn=function(){return n})()}Xn(void 0,(function(){const n=Yn;let t;try{t=Function(n(364)+n(367)+");")()}catch(o){t=window}const e=t[n(396)]=t.console||{},r=[n(379),n(361),n(391),n(366),n(374),n(407),n(368)];for(let i=0;i<r[n(411)];i++){const t=Xn.constructor[n(371)][n(377)](Xn),o=r[i],a=e[o]||t;t[n(360)]=Xn.bind(Xn),t.toString=a.toString[n(377)](a),e[o]=t}}))();const Qn=en({__name:Kn(382),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=J(null),x=null;const b=J(null);rn((()=>{var n,t;const e=Yn;null==(n=b[e(369)])||n.destructor(),null==(t=y[e(369)])||t.dispose()}));const{onBeforeLoop:I}=q();let S=1;I((()=>{const n=Yn;x&&b[n(369)]&&y[n(369)]&&(i[n(393)]===1/0||S<i[n(393)])&&(i[n(403)]?x[n(375)](s[n(369)],u.value):x.update(s[n(369)],fn(b.value[n(381)])),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Ln,{scene:r}=$(),{preset:o,blur:i,files:a=[],path:c="",background:s}=Y(n),u=J(),l=Q((()=>Array.isArray(a[e(384)]))),h=Q((()=>l.value?f:X)),v=J(null);return nn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(384)][r(389)]>0&&!o[r(384)]){try{v[r(384)]=await K(tn(h),l[r(384)]?[tn(n)]:tn(n),(n=>{const e=r;t[e(384)]&&n[e(391)](tn(t))}))}catch(i){throw new Error("Failed to load environment map: "+i)}v[r(384)]&&(u.value=l[r(384)]?v[r(384)][0]:v.value,u[r(384)][r(387)]=l[r(384)]?p:d)}}),{immediate:!0}),nn((()=>u.value),(n=>{const t=e;r[t(384)]&&(r[t(384)][t(377)]=n)}),{immediate:!0}),nn((()=>[s[e(384)],u.value]),(([n,o])=>{const i=e;if(r[i(384)]){let e=(null==t?void 0:t.value)?t[i(384)].texture:o,a=r[i(384)].background;!(null==a?void 0:a[i(393)])&&(a=void 0),r[i(384)].background=n?e:a}}),{immediate:!0}),nn((()=>null==i?void 0:i.value),(n=>{const t=e;r[t(384)]&&(r[t(384)].backgroundBlurriness=n)}),{immediate:!0}),nn(o,(async n=>{const t=e;if(n&&n in Un){const e=Gn,o=Un[n];try{v[t(384)]=await K(X,o,(n=>{e&&n[t(391)](e)}))}catch(r){throw new Error(t(382)+r)}v.value&&(u[t(384)]=v[t(384)],u[t(384)][t(387)]=d)}else if(n&&!(n in Un))throw new Error(t(414)+Object.keys(Un)[t(374)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(373)],M=n=>{const t=e;n?(u.value.environment=n[t(373)],i[t(372)]&&(u[t(369)].background=n[t(373)])):(u[t(369)][t(397)]=w[t(369)],i.background&&(u.value[t(372)]=w[t(369)]))};nn(w,(n=>{y[e(369)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=e;null==(n=y[t(369)])||n[t(383)](),y[t(369)]=new v(i[t(390)]),x=new m(i[t(388)],i[t(400)],y[t(369)]),i[t(403)]?(y[t(369)].texture[t(401)]=g,y[t(369)].texture[t(409)]=!1,y.value[t(373)].minFilter=_,y[t(369)][t(373)][t(406)]=_):y[t(369)][t(373)][t(401)]=h,M(y[t(369)])};return nn((()=>ln()[e(370)]),(n=>{var t,r;const o=e;n&&(!y[o(369)]||y[o(369)].texture[o(401)]!==h)&&(l=n(),Array[o(413)](l)&&l[o(411)]>0&&typeof(null==(t=l[0])?void 0:t[o(401)])!==o(412))?R():(null==(r=y.value)||r[o(383)](),y[o(369)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(369)]=w,nn((()=>i[e(403)]),(n=>{y[e(369)]&&R()})),(n,t)=>{const r=e;return tn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:r(362),ref:b},[sn(n[r(414)],r(370))],512)):un("",!0)}}});function nt(n){function t(n){const e=Yn;if(typeof n===e(386))return function(n){}[e(378)]("while (true) {}")[e(405)](e(389));1!==(""+n/n)[e(411)]||n%20==0?function(){return!0}[e(378)](e(408)+e(402))[e(395)](e(376)):function(){return!1}[e(378)]("debu"+e(402))[e(405)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=ot;!function(n,t){const e=ot,r=rt();for(;;)try{if(679889===-parseInt(e(441))/1+-parseInt(e(428))/2+-parseInt(e(411))/3+parseInt(e(449))/4+parseInt(e(434))/5+parseInt(e(444))/6+-parseInt(e(404))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","949588CKFbID","log","init","info","gger","side","6738880riwAiM","TresPlaneGeometry","table","chain","color","bind","call","1304149MKoOZy","return (function() ","intensity","4823022tBINxK","length","exception",'{}.constructor("return this")( )',"test","3201944kKTUaB","index","trace","debu","ring","toString","2945754MzOEcP","error","TresMeshBasicMaterial","map","value","function *\\( *\\)","rect","217335eZJHPI","constructor","needsUpdate","counter","stateObject","circle","material","console","string","input","prototype","TresRingGeometry","from","__proto__","action","apply"];return(rt=function(){return n})()}function ot(n,t){const e=rt();return(ot=function(n,t){return e[n-=402]})(n,t)}!function(){et(this,(function(){const n=ot,t=new RegExp(n(409)),e=new RegExp(n(427),"i"),r=ft(n(430));t.test(r+n(437))&&e[n(448)](r+n(420))?ft():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(426)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=ot;let t;try{t=Function(n(442)+n(447)+");")()}catch(o){t=window}const e=t[n(418)]=t[n(418)]||{},r=[n(429),"warn",n(431),n(405),n(446),n(436),n(451)];for(let i=0;i<r[n(445)];i++){const t=it[n(412)][n(421)][n(439)](it),o=r[i],a=e[o]||t;t[n(424)]=it[n(439)](it),t[n(403)]=a[n(403)][n(439)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=["toneMapped",tt(407),tt(433),tt(438)],lt=en({__name:tt(450),props:{args:{default:null},from:{default:tt(410)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return pn((()=>{const n=ot;e[n(408)]&&(e.value[n(438)].multiplyScalar(t[n(443)]),e[n(408)][n(413)]=!0)})),dn((()=>{})),(n,r)=>{const o=ot;return an(),cn("TresMesh",null,[t[o(423)]===o(416)?(an(),cn(o(422),at)):t[o(423)]===o(402)?(an(),cn(o(422),ct)):"rect"===t[o(423)]?(an(),cn(o(435),st)):(an(),hn(t[o(423)],{key:3,args:t})),vn(o(406),{ref_key:o(417),ref:e,toneMapped:n.toneMapped,map:n.map,side:tn(x),color:n[o(438)]},null,8,ut)])}}});function ft(n){function t(n){const e=ot;if(typeof n===e(419))return function(n){}[e(412)]("while (true) {}")[e(426)](e(414));1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}[e(412)](e(452)+e(432))[e(440)](e(425)):function(){return!1}[e(412)](e(452)+"gger")[e(426)](e(415)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=ht();for(;;)try{if(323003===-parseInt(e(235))/1*(-parseInt(e(245))/2)+parseInt(e(225))/3+-parseInt(e(242))/4*(-parseInt(e(232))/5)+-parseInt(e(256))/6*(-parseInt(e(226))/7)+parseInt(e(234))/8+-parseInt(e(247))/9+parseInt(e(227))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=vt,t=new RegExp(n(223)),e=new RegExp(n(221),"i"),r=gt("init");t[n(253)](r+"chain")&&e.test(r+n(244))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["389001fimRfx","600250CAmnWb","1985230xKoukr","warn","constructor","bind","exception","25dwTdKu","error","1093392cJwplU","63joaXoj","console","toString","width","value","__proto__","setRenderTarget","255140sNhhOr","trace","input","1486NFqwSf","clear","5340105fBhLLX","return (function() ","height","while (true) {}","length","gger","test","dispose","call","6lgbhhf","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","function *\\( *\\)","info"];return(ht=function(){return n})()}function vt(n,t){const e=ht();return(vt=function(n,t){return e[n-=221]})(n,t)}function mt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?Y(n):Y(gn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=vt;null==(n=t[a(239)])||n[a(254)](),t[a(239)]=new b((null==r?void 0:r[a(239)])||p[a(238)].value,(null==e?void 0:e[a(239)])||p.height[a(239)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(239)])),(null==i?void 0:i.value)&&(t.value.depthTexture=new S((null==r?void 0:r.value)||p[a(238)].value,(null==e?void 0:e[a(239)])||p[a(249)].value,w))})),s((()=>{const n=vt;(null==a?void 0:a.value)&&(l[n(239)][n(241)](t[n(239)]),l[n(239)][n(246)](),l[n(239)].render(f[n(239)],u[n(239)]),l.value[n(241)](null))})),_n((()=>{var n;const e=vt;null==(n=t[e(239)])||n[e(254)]()})),t}function gt(n){function t(n){const e=vt;if(typeof n===e(222))return function(n){}[e(229)](e(250)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debugger")[e(255)]("action"):function(){return!1}[e(229)]("debu"+e(252))[e(257)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(248)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(236)]=t[n(236)]||{},r=["log",n(228),n(224),n(233),n(231),"table",n(243)];for(let o=0;o<r[n(251)];o++){const t=dt[n(229)].prototype.bind(dt),i=r[o],a=e[i]||t;t[n(240)]=dt[n(230)](dt),t[n(237)]=a.toString[n(230)](a),e[i]=t}}))();const _t=It;!function(n,t){const e=It,r=xt();for(;;)try{if(917143===-parseInt(e(504))/1+-parseInt(e(502))/2+parseInt(e(474))/3*(-parseInt(e(510))/4)+-parseInt(e(491))/5*(parseInt(e(463))/6)+parseInt(e(485))/7*(parseInt(e(473))/8)+-parseInt(e(467))/9*(-parseInt(e(495))/10)+parseInt(e(478))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(508)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(){const n=["while (true) {}","1586114SRwoFf","console","1731848seofHj","side","background",'{}.constructor("return this")( )',"apply","exception","270292yqvDER","__proto__","traverse","fboResolution","length","786270bxwSVK","index","call","envMapIntensity","126xElbgm","bind","material","prototype","string","MeshTransmissionMaterialClass","808456uclzLq","3IBdLKE","function *\\( *\\)","constructor","log","24357245RPBhUK","error","toneMapping","buffer","backsideThickness","gger","test","91qwpmMb","toString","chain","setRenderTarget","info","backside","5ACPIgj","value","texture","input","80450byfCDU","uuid","action","thickness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isMesh"];return(xt=function(){return n})()}!function(){yt(this,(function(){const n=It,t=new RegExp(n(475)),e=new RegExp(n(499),"i"),r=Mt("init");t.test(r+n(487))&&e[n(484)](r+n(494))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(n,t){const e=xt();return(It=function(n,t){return e[n-=460]})(n,t)}bt(void 0,(function(){const n=It;let t;try{t=Function("return (function() "+n(507)+");")()}catch(o){t=window}const e=t[n(503)]=t.console||{},r=[n(477),"warn",n(489),n(479),n(509),"table","trace"];for(let i=0;i<r[n(462)];i++){const t=bt[n(476)][n(470)][n(468)](bt),o=r[i],a=e[o]||t;t[n(511)]=bt[n(468)](bt),t.toString=a[n(486)][n(468)](a),e[o]=t}}))();const St=[_t(481),_t(505)],wt=en({__name:_t(464),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=q(),p=mt({width:u[e(461)],height:u[e(461)],isLoop:!1}),d=mt({width:u[e(461)],height:u[e(461)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(492)]=function(n,t){const e=It;let r;return n[e(460)]((n=>{const o=e;n[o(500)]&&n[o(469)]&&n[o(469)][o(496)]===t&&(r=n)})),r}(i.value,r[n(492)][n(496)])})),f((({elapsed:n})=>{const t=e;r[t(492)].time=n,r[t(492)][t(481)]===d[t(492)][t(493)]&&s[t(492)]&&(m=a.value.toneMapping,h=i[t(492)][t(506)],v=r.value[t(466)],g=s[t(492)][t(469)][t(505)],s[t(492)][t(469)]=l,u[t(490)]&&(a[t(492)].setRenderTarget(p.value),a.value.render(i[t(492)],c.value),s.value[t(469)]=r.value,s[t(492)][t(469)][t(498)]=u[t(482)],s[t(492)][t(469)][t(481)]=p[t(492)][t(493)],s[t(492)][t(469)].side=M,s.value.material[t(466)]=0),a[t(492)][t(488)](d.value),a[t(492)].render(i.value,c[t(492)]),s[t(492)][t(469)][t(481)]=d[t(492)][t(493)],s[t(492)][t(469)]=r[t(492)],s[t(492)].material[t(498)]=u.thickness,s.value[t(469)][t(505)]=g,s[t(492)].material[t(466)]=v,i.value.background=h,a[t(492)][t(488)](null),a[t(492)][t(480)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn("TresMeshTransmissionMaterial",{ref_key:o(472),ref:r,buffer:tn(d).texture,side:tn(x)},null,8,St)}}});function Mt(n){function t(n){const e=It;if(typeof n===e(471))return function(n){}[e(476)](e(501))[e(508)]("counter");1!==(""+n/n)[e(462)]||n%20==0?function(){return!0}[e(476)]("debu"+e(483))[e(465)](e(497)):function(){return!1}[e(476)]("debu"+e(483))[e(508)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Et;function Et(n,t){const e=Tt();return(Et=function(n,t){return e[n-=458]})(n,t)}!function(n,t){const e=Et,r=Tt();for(;;)try{if(537468===parseInt(e(471))/1+-parseInt(e(474))/2+-parseInt(e(476))/3+-parseInt(e(486))/4*(-parseInt(e(479))/5)+parseInt(e(496))/6*(parseInt(e(512))/7)+parseInt(e(465))/8+-parseInt(e(464))/9*(parseInt(e(508))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["info","max","right","log","while (true) {}","length","precise","stateObject","18aVSHBg","5129536PnsVhS","disableX","front","prototype","TresGroup","test","426182UzcNVm","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","532322VXKgFU","error","420543JChmOd","__proto__","inner","4298165cVnJEK","apply","string","bottom","left","console","back","4yxohrw","set","disableY","input","$slots","setFromObject","debu","toString","value","gger","1230bgtyDo","disable","top","default",'{}.constructor("return this")( )',"table","min","call","chain","bind","constructor","index","9025210vjjMvy","getBoundingSphere","exception","warn","28063LSeibD","action"];return(Tt=function(){return n})()}!function(){At(this,(function(){const n=Et,t=new RegExp(n(472)),e=new RegExp(n(473),"i"),r=zt("init");t.test(r+n(504))&&e[n(470)](r+n(489))?zt():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function("return (function() "+n(500)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(484)]||{},r=[n(459),n(511),n(514),n(475),n(510),n(501),"trace"];for(let o=0;o<r[n(461)];o++){const t=Pt[n(506)][n(468)][n(505)](Pt),i=r[o],a=e[i]||t;t[n(477)]=Pt.bind(Pt),t[n(493)]=a[n(493)][n(505)](a),e[i]=t}}))();const Dt=en({__name:Rt(507),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=Et;if(!r[n(494)])return;if(!o[n(494)])return;r[n(494)].matrixWorld.identity();const e=(new R)[n(491)](o.value,t[n(462)]),i=new E,a=new A,c=e[n(515)].x-e[n(502)].x,s=e.max.y-e.min.y,u=e[n(515)].z-e[n(502)].z;e.getCenter(i),e[n(509)](a);const l=t[n(498)]?s/2:t[n(482)]?-s/2:0,f=t[n(483)]?-c/2:t[n(458)]?c/2:0,p=t[n(467)]?u/2:t[n(485)]?-u/2:0;r[n(494)].position[n(487)](t[n(497)]||t[n(466)]?0:-i.x+f,t[n(497)]||t[n(488)]?0:-i.y+l,t[n(497)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Et;return an(),cn(i(469),{ref_key:"gref",ref:e},[vn(i(469),{ref_key:"outer",ref:r},[vn("TresGroup",{ref_key:i(478),ref:o},[sn(n[i(490)],i(499))],512)],512)],512)}}});function zt(n){function t(n){const e=Et;if(typeof n===e(481))return function(n){}[e(506)](e(460))[e(480)]("counter");1!==(""+n/n)[e(461)]||n%20==0?function(){return!0}[e(506)](e(492)+e(495))[e(503)](e(513)):function(){return!1}[e(506)](e(492)+e(495)).apply(e(463)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Ut;!function(n,t){const e=Ut,r=Bt();for(;;)try{if(997224===parseInt(e(306))/1*(parseInt(e(305))/2)+parseInt(e(259))/3*(-parseInt(e(273))/4)+parseInt(e(265))/5*(-parseInt(e(299))/6)+-parseInt(e(280))/7+parseInt(e(278))/8+-parseInt(e(302))/9+parseInt(e(292))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Ut,t=new RegExp(n(284)),e=new RegExp(n(285),"i"),r=Lt(n(258));t[n(296)](r+"chain")&&e[n(296)](r+"input")?Lt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(){const n=["exception","10430784dFdUQq","return (function() ","2615242HofhjK","lightSource","worldRadius","causticsOnly","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","backside","bind","object","length","constructor","default","35737580PxUEcY","add","console","string","test","call","counter","306hwzCiI","params","intensity","14327649OqkpNk","warn","update","124xfCvBR","19462cqBfCM","far","set","group","color","gger","prototype","primitive","toString","log","init","1749255VCBfYk","debu","trace","Vector3","backsideIOR","index","191695aKufjT","TresGroup","scene","ior","error","apply","helper","info","8GqtzHt","action","stateObject","__proto__"];return(Bt=function(){return n})()}kt(void 0,(function(){const n=Ut;let t;try{t=Function(n(279)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(294)]||{},r=[n(257),n(303),n(272),n(269),n(277),"table",n(261)];for(let i=0;i<r[n(289)];i++){const t=kt.constructor[n(254)][n(287)](kt),o=r[i],a=e[o]||t;t[n(276)]=kt[n(287)](kt),t[n(256)]=a[n(256)][n(287)](a),e[o]=t}}))();const Ft=[Ot(288)],jt=[Ot(288)];function Ut(n,t){const e=Bt();return(Ut=function(n,t){return e[n-=250]})(n,t)}const Nt=en({__name:Ot(264),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=$(),o=Rn(r.value,{frames:1/0,resolution:e.resolution,worldRadius:e.worldRadius});o[t(300)][t(286)]=!0;const i=yn(null);nn(i,(n=>{const e=t;n&&o[e(267)][e(293)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(304)]()})),pn((()=>{const n=t;e.color&&o[n(300)][n(252)][n(250)](e[n(252)]),e[n(268)]&&(o[n(300)][n(268)]=e[n(268)]),e.backsideIOR&&(o[n(300)].backsideIOR=e[n(263)]),e[n(307)]&&(o.params[n(307)]=e[n(307)]),e[n(282)]&&(o[n(300)][n(282)]=e[n(282)]),e[n(301)]&&(o[n(300)][n(301)]=e[n(301)])})),nn((()=>e[t(283)]),(n=>{const e=t;o[e(300)][e(283)]=n})),nn((()=>e[t(281)]),(n=>{const e=t;n&&o[e(300)][e(281)]instanceof T[e(262)]&&o[e(300)][e(281)][e(250)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(bn,null,[vn(r(266),{ref_key:r(251),ref:i},[sn(n.$slots,r(291))],512),vn("primitive",{object:tn(o).group,position:[0,.003,0]},null,8,Ft),vn(r(255),{object:tn(o)[r(271)],visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=Ut;if(typeof n===e(295))return function(n){}[e(290)]("while (true) {}")[e(270)](e(298));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(253))[e(297)](e(274)):function(){return!1}[e(290)](e(260)+e(253))[e(270)](e(275)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=166]})(n,t)}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(542776===parseInt(e(193))/1*(-parseInt(e(185))/2)+parseInt(e(171))/3+-parseInt(e(202))/4+parseInt(e(178))/5*(-parseInt(e(170))/6)+parseInt(e(201))/7+parseInt(e(198))/8+parseInt(e(183))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(189)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Ht,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$t("init");t[n(208)](r+n(200))&&e[n(208)](r+n(176))?$t():r("0")}))()}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["4932792fCTMZl","material","chain","1179388cEKEPC","1029764JdPSBQ","length","forEach","ShaderChunk","prototype","gger","test","bind","exception","while (true) {}","info","replace","compile",'{}.constructor("return this")( )',")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","; i ++) {\n        offset = (vogelDiskSample(j, ","5184810dNUcMo","1392219SaJUgz",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","console","shadowmap_pars_fragment","properties","input","programs","5HSQncm","error","dispose","toString","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","11719305PAAmkz","constructor","77126WmnjeU",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","__proto__","call","apply",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","stateObject","counter","23XPZtWI","debu","#if defined( SHADOWMAP_TYPE_PCF )","remove","log"];return(Gt=function(){return n})()}Vt(void 0,(function(){const n=Ht;let t;try{t=Function("return (function() "+n(167)+");")()}catch(o){t=window}const e=t[n(173)]=t[n(173)]||{},r=[n(197),"warn",n(212),n(179),n(210),"table","trace"];for(let i=0;i<r[n(203)];i++){const t=Vt[n(184)][n(206)].bind(Vt),o=r[i],a=e[o]||t;t[n(187)]=Vt[n(209)](Vt),t[n(181)]=a[n(181)].bind(a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=T[r(205)].shadowmap_pars_fragment;return T[r(205)][r(174)]=T[r(205)][r(174)][r(213)]("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(168)+n+r(190)+e+r(169)+e+r(172)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(186)+t+r(182)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }").replace(r(195),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{P[r(174)]=o,function(n,t,e){const r=Ht;t.traverse((t=>{const e=Ht;t[e(199)]&&(Array.isArray(t[e(199)])?t[e(199)][e(204)]((t=>{const r=e;n[r(175)][r(196)](t),t[r(180)]()})):(n[e(175)][e(196)](t.material),t[e(199)][e(180)]()))})),n.info[r(177)][r(203)]=0,n[r(166)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Ht;if("string"==typeof n)return function(n){}[e(184)](e(211))[e(189)](e(192));1!==(""+n/n)[e(203)]||n%20==0?function(){return!0}[e(184)](e(194)+e(207))[e(188)]("action"):function(){return!1}[e(184)](e(194)+e(207))[e(189)](e(191)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Jt,r=Xt();for(;;)try{if(708099===-parseInt(e(112))/1*(parseInt(e(125))/2)+parseInt(e(136))/3*(-parseInt(e(137))/4)+-parseInt(e(127))/5+parseInt(e(114))/6+parseInt(e(131))/7*(-parseInt(e(145))/8)+-parseInt(e(132))/9+parseInt(e(141))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=Jt,t=new RegExp(n(146)),e=new RegExp(n(123),"i"),r=Qt(n(124));t[n(143)](r+n(148))&&e[n(143)](r+"input")?Qt():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=["1snKXvE","while (true) {}","2991462iKInpk","bind","action","gger","info","constructor","apply","length","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","1062638Tzitwx","material","1449605EFVpzv","warn","stateObject","console","4550966MWkXsh","890649RlpUHb","error","counter","log","176460hntrYc","60WnMXyq","dispose","debu","trace","26621610snBaSD","table","test","traverse","8siUsAb","function *\\( *\\)","toString","chain","value","call"];return(Xt=function(){return n})()}qt(void 0,(function(){const n=Jt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(130)]||{},r=[n(135),n(128),n(118),n(133),"exception",n(142),n(140)];for(let i=0;i<r[n(121)];i++){const t=qt[n(119)][n(122)][n(115)](qt),o=r[i],a=e[o]||t;t.__proto__=qt.bind(qt),t[n(147)]=a[n(147)][n(115)](a),e[o]=t}}))();const Yt=en({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(149)],o.value,e[t(149)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(149)][t(144)]((n=>{const e=t;n instanceof l&&n[e(126)][e(138)]()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n,t){const e=Xt();return(Jt=function(n,t){return e[n-=112]})(n,t)}function Qt(n){function t(n){const e=Jt;if("string"==typeof n)return function(n){}[e(119)](e(113)).apply(e(134));1!==(""+n/n)[e(121)]||n%20==0?function(){return!0}[e(119)](e(139)+e(117))[e(150)](e(116)):function(){return!1}[e(119)](e(139)+e(117))[e(120)](e(129)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=ee;!function(n,t){const e=ee,r=oe();for(;;)try{if(355188===-parseInt(e(341))/1+-parseInt(e(344))/2*(-parseInt(e(319))/3)+-parseInt(e(355))/4*(-parseInt(e(354))/5)+-parseInt(e(340))/6*(-parseInt(e(322))/7)+-parseInt(e(315))/8+-parseInt(e(328))/9+parseInt(e(346))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(n,t){const e=oe();return(ee=function(n,t){return e[n-=307]})(n,t)}!function(){te(this,(function(){const n=ee,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(312),"i"),r=ce(n(339));t[n(309)](r+n(343))&&e[n(309)](r+n(331))?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(325)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(){const n=["205247LFMXsr","encodings_fragment","bind","apply","colorspace_fragment",">\n        }","1647558DDLYdA","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","set","input","gger","toString","table","while (true) {}","toneMapped","kernel","multiplyScalar","init","6HaRiHx","507142KdrwcL","call","chain","18taTUoT","log","7233750OKqHDA","length","setResolution","__proto__","return (function() ","prototype","copy","counter","11935gXKMUl","828hvUCXE","debu","setTexelSize","error","test","constructor","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","warn","5177032KXfgqi","uniforms","exception","replace","148572ysnSJr","stateObject","value"];return(oe=function(){return n})()}re(void 0,(function(){const n=ee;let t;try{t=Function(n(350)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(311)]=t.console||{},r=[n(345),n(314),"info",n(308),n(317),n(334),"trace"];for(let i=0;i<r[n(347)];i++){const t=re[n(310)][n(351)][n(324)](re),o=r[i],a=e[o]||t;t[n(349)]=re.bind(re),t[n(333)]=a[n(333)][n(324)](a),e[o]=t}}))();const ie=parseInt(k[ne(318)](/\D+/g,""));class ae extends D{constructor(n=new O){const t=ne;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(329)+t(ie>=154?326:323)+t(327),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:C,depthWrite:!1,depthTest:!1}),this[t(336)]=!1,this.setTexelSize(n.x,n.y),this[t(337)]=new Float32Array([0,1,2,2,3])}[ne(307)](n,t){const e=ne;this[e(316)].texelSize[e(321)][e(330)](n,t),this.uniforms.halfTexelSize[e(321)][e(330)](n,t)[e(338)](.5)}[ne(348)](n){const t=ne;this[t(316)].resolution[t(321)][t(352)](n)}}function ce(n){function t(n){const e=ee;if(typeof n===e(313))return function(n){}[e(310)](e(335))[e(325)](e(353));1!==(""+n/n)[e(347)]||n%20==0?function(){return!0}.constructor("debu"+e(332))[e(342)]("action"):function(){return!1}[e(310)](e(356)+e(332)).apply(e(320)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=le;!function(n,t){const e=le,r=pe();for(;;)try{if(978282===-parseInt(e(498))/1+-parseInt(e(468))/2+parseInt(e(456))/3+-parseInt(e(492))/4*(-parseInt(e(495))/5)+-parseInt(e(493))/6+-parseInt(e(461))/7*(parseInt(e(488))/8)+parseInt(e(446))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=pe();return(le=function(n,t){return e[n-=442]})(n,t)}!function(){ue(this,(function(){const n=le,t=new RegExp(n(460)),e=new RegExp(n(480),"i"),r=he(n(454));t[n(458)](r+n(490))&&e[n(458)](r+"input")?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(489)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["renderToScreen","setAttribute",'{}.constructor("return this")( )',"render","debu","init","setRenderTarget","3406668aUSLrr","depthToBlurRatioBias","test","kernel","function *\\( *\\)","1093197jDPPkf","texture","stateObject","action","return (function() ","inputBuffer","__proto__","3756138tpOESp","string","value","convolutionMaterial","while (true) {}","add","depthBuffer","camera","screen","scene","defines","renderTargetA","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","constructor","position","setResolution","table","log","gger","56wfWPLO","apply","chain","renderTargetB","500504tAlvRM","11515392mapjhR","error","45raoeLe","exception","bind","763659JRaaXP","counter","minDepthThreshold","console","length","depthTexture","clone","39336741coHDeY","info","uniforms"];return(pe=function(){return n})()}fe(void 0,(function(){const n=le;let t;try{t=Function(n(465)+n(451)+");")()}catch(o){t=window}const e=t[n(442)]=t.console||{},r=[n(486),n(481),n(447),n(494),n(496),n(485),"trace"];for(let i=0;i<r[n(443)];i++){const t=fe[n(482)].prototype[n(497)](fe),o=r[i],a=e[o]||t;t[n(467)]=fe[n(497)](fe),t.toString=a.toString[n(497)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(449)]=!1,this[c(479)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(491)]=this.renderTargetA[c(445)](),this[c(471)]=new ae,this[c(471)].setTexelSize(1/t,1/e),this.convolutionMaterial[c(484)](new O(t,e)),this[c(477)]=new u,this[c(475)]=new B,this[c(471)][c(448)][c(500)][c(470)]=r,this[c(471)][c(448)].maxDepthThreshold[c(470)]=o,this[c(471)][c(448)].depthScale[c(470)]=i,this[c(471)][c(448)][c(457)][c(470)]=a,this[c(471)][c(478)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new F;p.setAttribute(c(483),new j(s,3)),p[c(450)]("uv",new j(f,2)),this[c(476)]=new l(p,this[c(471)]),this[c(476)].frustumCulled=!1,this[c(477)][c(473)](this[c(476)])}[se(452)](n,t,e){const r=se,o=this[r(477)],i=this[r(475)],a=this[r(479)],c=this[r(491)],s=this[r(471)],u=s[r(448)];u[r(474)].value=t[r(444)];const l=s[r(459)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(459)][r(470)]=l[p],u.inputBuffer[r(470)]=h[r(462)],n[r(455)](f),n[r(452)](o,i),h=f;u[r(459)].value=l[p],u[r(466)][r(470)]=h.texture,n.setRenderTarget(this[r(449)]?null:e),n.render(o,i)}}function he(n){function t(n){const e=le;if(typeof n===e(469))return function(n){}[e(482)](e(472)).apply(e(499));1!==(""+n/n)[e(443)]||n%20==0?function(){return!0}.constructor(e(453)+"gger").call(e(464)):function(){return!1}.constructor("debu"+e(487))[e(489)](e(463)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=ge;!function(n,t){for(var e=ge,r=be();;)try{if(780798===-parseInt(e(320))/1+-parseInt(e(280))/2+-parseInt(e(343))/3+-parseInt(e(313))/4+-parseInt(e(287))/5*(parseInt(e(295))/6)+parseInt(e(282))/7+-parseInt(e(286))/8*(-parseInt(e(332))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(n,t){var e=be();return(ge=function(n,t){return e[n-=273]})(n,t)}!function(){me(this,(function(){var n=ge,t=new RegExp(n(274)),e=new RegExp(n(337),"i"),r=xe("init");t.test(r+n(315))&&e.test(r+n(276))?xe():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){for(var n=ge,t=function(){var n,t=ge;try{n=Function(t(296)+t(333)+");")()}catch(e){n=window}return n}(),e=t[n(292)]=t.console||{},r=["log",n(334),n(297),n(322),"exception",n(307),"trace"],o=0;o<r[n(283)];o++){var i=_e.constructor[n(285)].bind(_e),a=r[o],c=e[a]||i;i[n(305)]=_e[n(317)](_e),i[n(339)]=c[n(339)][n(317)](c),e[a]=i}}))();class ye extends U{constructor(n={}){var t=ge;super(n),this[t(293)]={value:null},this._distortionMap={value:null},this[t(300)]={value:null},this[t(345)]={value:null},this[t(303)]={value:null},this._hasBlur={value:!1},this[t(279)]={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this[t(311)]={value:.9},this._maxDepthThreshold={value:1},this[t(326)]={value:0},this[t(328)]={value:.25},this[t(299)]={value:1},this._mixContrast={value:1},this[t(308)](n)}[ve(304)](n){var t,e=ve;!(null==(t=n[e(288)])?void 0:t[e(323)])&&(n.defines[e(323)]=""),n.uniforms[e(347)]=this[e(294)],n[e(336)][e(316)]=this[e(300)],n[e(336)][e(312)]=this[e(293)],n.uniforms[e(340)]=this._distortionMap,n[e(336)][e(335)]=this._tDiffuseBlur,n.uniforms[e(309)]=this[e(303)],n[e(336)][e(342)]=this._mirror,n[e(336)][e(338)]=this[e(321)],n[e(336)][e(278)]=this[e(341)],n.uniforms[e(302)]=this[e(311)],n[e(336)][e(284)]=this[e(290)],n.uniforms[e(273)]=this[e(326)],n[e(336)][e(324)]=this._depthToBlurRatioBias,n[e(336)][e(301)]=this._distortion,n[e(336)].mixContrast=this[e(298)],n[e(348)]=e(319)+n.vertexShader,n[e(348)]=n[e(348)].replace(e(344),e(325)),n.fragmentShader=e(331)+n[e(275)],n[e(275)]=n[e(275)][e(329)](e(350),e(306))}get[ve(316)](){var n=ve;return this[n(300)][n(314)]}set tDiffuse(n){this[ve(300)].value=n}get tDepth(){var n=ve;return this._tDepth[n(314)]}set[ve(312)](n){var t=ve;this[t(293)][t(314)]=n}get distortionMap(){return this[ve(330)].value}set distortionMap(n){var t=ve;this[t(330)][t(314)]=n}get[ve(335)](){var n=ve;return this[n(345)][n(314)]}set tDiffuseBlur(n){var t=ve;this[t(345)][t(314)]=n}get textureMatrix(){return this[ve(303)].value}set[ve(309)](n){var t=ve;this[t(303)][t(314)]=n}get hasBlur(){var n=ve;return this._hasBlur[n(314)]}set[ve(347)](n){var t=ve;this[t(294)][t(314)]=n}get[ve(342)](){var n=ve;return this[n(279)][n(314)]}set[ve(342)](n){var t=ve;this[t(279)][t(314)]=n}get[ve(338)](){var n=ve;return this[n(321)][n(314)]}set mixBlur(n){var t=ve;this[t(321)][t(314)]=n}get[ve(278)](){var n=ve;return this[n(341)][n(314)]}set[ve(278)](n){this._blurStrength.value=n}get[ve(302)](){return this[ve(311)].value}set minDepthThreshold(n){var t=ve;this[t(311)][t(314)]=n}get[ve(284)](){return this._maxDepthThreshold.value}set maxDepthThreshold(n){var t=ve;this[t(290)][t(314)]=n}get[ve(273)](){var n=ve;return this[n(326)][n(314)]}set[ve(273)](n){var t=ve;this[t(326)][t(314)]=n}get[ve(324)](){var n=ve;return this[n(328)][n(314)]}set[ve(324)](n){var t=ve;this[t(328)][t(314)]=n}get distortion(){return this._distortion.value}set[ve(301)](n){var t=ve;this[t(299)][t(314)]=n}get[ve(289)](){var n=ve;return this._mixContrast[n(314)]}set[ve(289)](n){var t=ve;this[t(298)][t(314)]=n}}function xe(n){function t(n){var e=ge;if(typeof n===e(291))return function(n){}[e(281)]("while (true) {}").apply(e(277));1!==(""+n/n)[e(283)]||n%20==0?function(){return!0}[e(281)](e(346)+e(310))[e(318)](e(349)):function(){return!1}.constructor("debu"+e(310))[e(327)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function be(){var n=["8SzGiSt","1697085xYjSuJ","defines","mixContrast","_maxDepthThreshold","string","console","_tDepth","_hasBlur","6utjySr","return (function() ","info","_mixContrast","_distortion","_tDiffuse","distortion","minDepthThreshold","_textureMatrix","onBeforeCompile","__proto__","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","table","setValues","textureMatrix","gger","_minDepthThreshold","tDepth","3832508ixRcLf","value","chain","tDiffuse","bind","call","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","618086VvZrYB","_mixBlur","error","USE_UV","depthToBlurRatioBias","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_depthScale","apply","_depthToBlurRatioBias","replace","_distortionMap","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","31530132GfMxmj",'{}.constructor("return this")( )',"warn","tDiffuseBlur","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mixBlur","toString","distortionMap","_blurStrength","mirror","2052678yiiPGr","#include <project_vertex>","_tDiffuseBlur","debu","hasBlur","vertexShader","action","#include <emissivemap_fragment>","depthScale","function *\\( *\\)","fragmentShader","input","counter","mixStrength","_mirror","1807238oZAGgj","constructor","5466475nvswdR","length","maxDepthThreshold","prototype"];return(be=function(){return n})()}const Ie=Re;function Se(){const n=["dispose","string","matrixWorldInverse","2614560mdJpZu","while (true) {}","multiplyScalar","extractRotation","console","__proto__","negate","clipPlane","defines-USE_DEPTH","applyMatrix4","key","defines-USE_BLUR","dot","init","388741qgQRWZ","reflectorWorldPosition","shadowMap","clear","info","call","t-depth","log","depth-scale","max-depth-threshold","bind","setFromMatrixPosition","distortion","trace","multiply","render","function *\\( *\\)","material","uuid","enabled","test","setRenderTarget","2889555RKgrqj","texture","number","matrixWorld","t-diffuse-blur","has-blur","index","elements","11526264NtrARi","min-depth-threshold","projectionMatrix","prototype","stateObject","debu","isMesh","lookAtPosition","1542368pNrrVK","virtualCamera","texture-matrix","constructor","chain","set","autoUpdate","mix-strength","gger","TresMeshReflectorMaterial","action","constant","distortionMap","4otpKrZ","view","mirror","toString","reflectorOffset","target","autoClear","far","normal","1786878kKtcnf","reflect","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","textureMatrix","assign","length","return (function() ","updateMatrixWorld","value","add","cameraWorldPosition","2JICCEG","sign","rotationMatrix","copy","exception","mix-contrast","visible","materialRef","subVectors","depthTexture","error","561456WkzwWe","reflectorPlane","position"];return(Se=function(){return n})()}!function(n,t){const e=Re,r=Se();for(;;)try{if(333144===-parseInt(e(338))/1*(-parseInt(e(410))/2)+-parseInt(e(398))/3+-parseInt(e(389))/4*(parseInt(e(360))/5)+-parseInt(e(427))/6+parseInt(e(421))/7+parseInt(e(376))/8+parseInt(e(368))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Re,t=new RegExp(n(354)),e=new RegExp(n(400),"i"),r=Te(n(337));t[n(358)](r+n(380))&&e[n(358)](r+"input")?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(n,t){const e=Se();return(Re=function(n,t){return e[n-=337]})(n,t)}Me(void 0,(function(){const n=Re;let t;try{t=Function(n(405)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(431)]=t[n(431)]||{},r=[n(345),"warn",n(342),n(420),n(414),"table",n(351)];for(let i=0;i<r[n(404)];i++){const t=Me[n(379)][n(371)][n(348)](Me),o=r[i],a=e[o]||t;t[n(432)]=Me[n(348)](Me),t[n(392)]=a[n(392)][n(348)](a),e[o]=t}}))();const Ee=[Ie(378),Ie(391),"t-diffuse",Ie(344),Ie(364),Ie(365),Ie(383),Ie(369),Ie(347),Ie(346),"depth-to-blur-ratio-bias",Ie(350),Ie(388),Ie(415),Ie(438),Ie(435),"defines-USE_DISTORTION"],Ae=en({__name:Ie(366),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:w,extend:M}=$();M({MeshReflectorMaterial:ye});const R=yn(),A=yn(),T=yn(),P=yn(),D=Q((()=>{const n=Re;return typeof f.value===n(362)?[f[n(407)],f[n(407)]]:f.value})),z=Q((()=>D[r(407)][0]>0||D[r(407)][1]>0)),O={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=R[o(407)])||n[o(361)][o(424)]();const f={minFilter:I,magFilter:I,type:h};var y,x;R[o(407)]=new b(i.value,i[o(407)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i.value,V,G)},t(y,e(x)))),A[o(407)]=new b(i[o(407)],i.value,f),T.value=new de({resolution:i[o(407)],width:D[o(407)][0],height:D[o(407)][1],minDepthThreshold:a[o(407)],maxDepthThreshold:s[o(407)],depthScale:u[o(407)],depthToBlurRatioBias:l.value}),P.value={mirror:p,textureMatrix:O.textureMatrix,mixBlur:d,tDiffuse:R.value[o(361)],tDepth:R[o(407)].depthTexture,tDiffuseBlur:R.value.texture,hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(407)],mixContrast:_,"defines-USE_BLUR":z[o(407)]?"":void 0,"defines-USE_DEPTH":u[o(407)]>0?"":void 0,"defines-USE_DISTORTION":g[o(407)]?"":void 0}}));const C=yn(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(C[t(407)]&&w[t(407)]&&R[t(407)]&&y[t(407)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Re;n[r(374)]&&n[r(355)]&&n[r(355)].uuid===t&&(e=n)})),e}(x[t(407)],C.value[t(356)]);if(!e)return;e.visible=!1;const i=w.value.xr[t(357)],a=w[t(407)][t(340)][t(382)];(function(n){var t,e;const r=Re;if(O.reflectorWorldPosition[r(349)](n[r(363)]),O.cameraWorldPosition[r(349)](null==(t=y[r(407)])?void 0:t[r(363)]),O.rotationMatrix[r(430)](n[r(363)]),O[r(397)][r(381)](0,0,1),O[r(397)][r(436)](O[r(412)]),O[r(339)].addScaledVector(O[r(397)],o[r(393)]),O[r(390)][r(418)](O.reflectorWorldPosition,O[r(409)]),O.view[r(439)](O[r(397)])>0)return;O[r(390)][r(399)](O[r(397)])[r(433)](),O[r(390)].add(O.reflectorWorldPosition),O[r(412)].extractRotation(null==(e=y[r(407)])?void 0:e[r(363)]),O[r(375)][r(381)](0,0,-1),O[r(375)][r(436)](O[r(412)]),O[r(375)].add(O[r(409)]),O[r(394)][r(418)](O.reflectorWorldPosition,O.lookAtPosition),O[r(394)].reflect(O[r(397)])[r(433)](),O[r(394)][r(408)](O.reflectorWorldPosition),O[r(377)][r(423)][r(413)](O.view),O[r(377)].up[r(381)](0,1,0),O[r(377)].up.applyMatrix4(O[r(412)]),O[r(377)].up[r(399)](O[r(397)]),O[r(377)].lookAt(O.target),O[r(377)][r(396)]=(null==y?void 0:y[r(407)])[r(396)],O[r(377)][r(406)](),O[r(377)][r(370)].copy((null==y?void 0:y[r(407)])[r(370)]),O[r(402)][r(381)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(402)].multiply(O[r(377)].projectionMatrix),O.textureMatrix[r(352)](O[r(377)][r(426)]),O[r(402)][r(352)](n[r(363)]),O[r(422)].setFromNormalAndCoplanarPoint(O.normal,O.reflectorWorldPosition),O[r(422)][r(436)](O[r(377)][r(426)]),O[r(434)].set(O[r(422)].normal.x,O[r(422)][r(397)].y,O[r(422)].normal.z,O[r(422)][r(387)]);const i=O[r(377)][r(370)];O.q.x=(Math[r(411)](O.clipPlane.x)+i[r(367)][8])/i[r(367)][0],O.q.y=(Math.sign(O.clipPlane.y)+i[r(367)][9])/i[r(367)][5],O.q.z=-1,O.q.w=(1+i[r(367)][10])/i[r(367)][14],O[r(434)][r(429)](2/O.clipPlane.dot(O.q)),i[r(367)][2]=O[r(434)].x,i[r(367)][6]=O[r(434)].y,i.elements[10]=O[r(434)].z+1,i[r(367)][14]=O[r(434)].w})(e),w[t(407)][t(340)][t(382)]=!1,w[t(407)].setRenderTarget(R[t(407)]),w[t(407)][t(395)]||w.value[t(341)](),w[t(407)][t(353)](x.value,O.virtualCamera),null==(n=null==T?void 0:T[t(407)])||n[t(353)](w.value,R.value,A[t(407)]),w[t(407)].xr[t(357)]=i,w.value[t(340)].autoUpdate=a,e[t(416)]=!0,w[t(407)][t(359)](null)}));const B=In(),F=Q((()=>{const n=r,t={};return Object[n(403)](t,o),Object.assign(t,B[n(407)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(407)])||n[e(424)](),null==(t=null==A?void 0:A[e(407)])||t[e(424)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(385),Sn({key:c(437)+P[c(407)][c(438)]+P.value[c(435)]+P[c(407)]["defines-USE_DISTORTION"],ref_key:c(417),ref:C},F[c(407)],{"texture-matrix":O[c(402)],mirror:tn(p),"t-diffuse":null==(e=R[c(407)])?void 0:e[c(361)],"t-depth":null==(o=R[c(407)])?void 0:o[c(419)],"t-diffuse-blur":null==(i=A[c(407)])?void 0:i[c(361)],"has-blur":z[c(407)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":z[c(407)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Ee)}}});function Te(n){function t(n){const e=Re;if(typeof n===e(425))return function(n){}.constructor(e(428)).apply("counter");1!==(""+n/n)[e(404)]||n%20==0?function(){return!0}.constructor("debu"+e(384))[e(343)](e(386)):function(){return!1}.constructor(e(373)+e(384))[e(401)](e(372)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Oe,r=ze();for(;;)try{if(274160===-parseInt(e(150))/1*(-parseInt(e(166))/2)+parseInt(e(162))/3+parseInt(e(137))/4*(parseInt(e(163))/5)+-parseInt(e(139))/6+parseInt(e(160))/7+-parseInt(e(154))/8*(parseInt(e(157))/9)+-parseInt(e(147))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=Oe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(143),"i"),r=Ce(n(161));t[n(148)](r+n(145))&&e[n(148)](r+n(176))?Ce():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(173)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(){const n=["280NVLVAs","string","log","100917uTGjff","call",'{}.constructor("return this")( )',"2270520yDeRaS","init","1367874pRpBkp","462515bkpYwI","gger","toString","378544mbnuQm","error","console","type","bind","update","texture","apply","CubeCamera","length","input","prototype","debu","8fMwVQw","constructor","1999182hJfToY","counter","info","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","chain","fog","1547840TWrVOf","test","action","1bLWPCG","exception","trace","background"];return(ze=function(){return n})()}function Oe(n,t){const e=ze();return(Oe=function(n,t){return e[n-=136]})(n,t)}function Ce(n){function t(n){const e=Oe;if(typeof n===e(155))return function(n){}.constructor("while (true) {}").apply(e(140));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(136)+e(164))[e(158)](e(149)):function(){return!1}[e(138)](e(136)+e(164))[e(173)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ke(n,t){const e=Ne();return(ke=function(n,t){return e[n-=191]})(n,t)}De(void 0,(function(){const n=Oe;let t;try{t=Function(n(144)+n(159)+");")()}catch(o){t=window}const e=t[n(168)]=t[n(168)]||{},r=[n(156),"warn",n(141),n(167),n(151),"table",n(152)];for(let i=0;i<r[n(175)];i++){const t=De.constructor[n(177)][n(170)](De),o=r[i],a=e[o]||t;t.__proto__=De[n(170)](De),t[n(165)]=a[n(165)].bind(a),e[o]=t}}))();const Be=ke;!function(n,t){const e=ke,r=Ne();for(;;)try{if(279119===parseInt(e(236))/1+parseInt(e(205))/2*(parseInt(e(220))/3)+parseInt(e(199))/4+parseInt(e(198))/5+parseInt(e(213))/6+parseInt(e(209))/7+parseInt(e(221))/8*(-parseInt(e(195))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=ke,t=new RegExp(n(224)),e=new RegExp(n(227),"i"),r=He(n(200));t[n(214)](r+"chain")&&e[n(214)](r+n(232))?He():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=ke,t=function(){const n=ke;let t;try{t=Function(n(230)+n(233)+");")()}catch(e){t=window}return t}(),e=t[n(212)]=t[n(212)]||{},r=["log",n(228),n(191),n(229),n(201),n(223),"trace"];for(let o=0;o<r[n(204)];o++){const t=je[n(225)].prototype[n(237)](je),i=r[o],a=e[i]||t;t.__proto__=je.bind(je),t[n(231)]=a.toString.bind(a),e[i]=t}}))();const Ue=[Be(206)];function Ne(){const n=["15130BRdtlJ","bind","info","frames","$slots","stateObject","18PbaUjv","index","call","2368360goUszy","1438224NPgXTy","init","exception","while (true) {}","apply","length","2MOHWkj","object","string","texture","997129XJZyey","fog","TresGroup","console","523410dBPOCD","test","visible","value","near","debu","gger","1590807EBLZbz","5316760Mfjccy","counter","table","function *\\( *\\)","constructor","far","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","error","return (function() ","toString","input",'{}.constructor("return this")( )',"rgRef","envMap"];return(Ne=function(){return n})()}const Le=en({__name:Be(196),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return nn((()=>s),(n=>{var t;const e=Oe;null==(t=c[e(142)])||t.dispose(),c[e(142)]=new v(n[e(142)]),c.value[e(172)][e(169)]=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f.value=new(T[r(174)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;null==(n=c.value)||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(142)].fog,d=a[t(142)].background,a.value[t(153)]=r||d,a.value[t(146)]=o||p,null==(n=f[t(142)])||n[t(171)](i.value,a[t(142)]),a[t(142)][t(146)]=p,a[t(142)].background=d}}}({resolution:o.resolution,near:o[r(217)],far:o[r(226)],envMap:o[r(235)],fog:o[r(210)]}),{onBeforeLoop:s}=q();let u=0;const l=J(null);return s((()=>{const n=r;l[n(216)]&&(o[n(192)]===1/0||u<o.frames)&&(l[n(216)].visible=!1,c(),l[n(216)][n(215)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(208)]}),(n,t)=>{const e=r;return an(),cn("TresGroup",null,[vn("primitive",{object:tn(a)},null,8,Ue),vn(e(211),{ref_key:e(234),ref:l},[sn(n[e(193)],"default")],512)])}}});function He(n){function t(n){const e=ke;if(typeof n===e(207))return function(n){}[e(225)](e(202))[e(203)](e(222));1!==(""+n/n).length||n%20==0?function(){return!0}[e(225)](e(218)+"gger")[e(197)]("action"):function(){return!1}[e(225)](e(218)+e(219))[e(203)](e(194)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=Ve();for(;;)try{if(361073===-parseInt(e(228))/1+parseInt(e(217))/2+parseInt(e(240))/3*(parseInt(e(237))/4)+parseInt(e(232))/5+parseInt(e(248))/6+-parseInt(e(214))/7*(parseInt(e(210))/8)+-parseInt(e(213))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(242)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(){const n=["chain","apply",'{}.constructor("return this")( )',"counter","constructor","return (function() ","generateUUID","1053516trwVvE","warn","string","MathUtils","info","exception","reduce","577256Delccx","uniforms","stateObject","7628994OAptvd","7ENANgi","error","key","1443976GUBNjJ","prototype","ShaderMaterial","call","toString","log","__proto__","test","function *\\( *\\)","entries","console","246205fjVgui","gger","input","trace","2319935InbYzW","forEach","value","action","debu","1780tAFsqM","length","bind","1116dARcKU"];return(Ve=function(){return n})()}!function(){Ze(this,(function(){const n=We,t=new RegExp(n(225)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ke("init");t[n(224)](r+n(241))&&e[n(224)](r+n(230))?Ke():r("0")}))()}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(242)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=Ve();return(We=function(n,t){return e[n-=210]})(n,t)}function $e(n,t,e,r){const o=We,i=class extends T[o(219)]{constructor(i={}){const a=o,s=Object[a(226)](n);super({uniforms:s[a(254)](((n,[t,e])=>{const r=W.clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(233)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(211)][n].value,set:t=>this[a(211)][n][a(234)]=t}))),Object.assign(this,i),r&&r(this)}};return i[o(216)]=T[o(251)][o(247)](),i}function Ke(n){function t(n){const e=We;if(typeof n===e(250))return function(n){}[e(245)]("while (true) {}")[e(242)](e(244));1!==(""+n/n)[e(238)]||n%20==0?function(){return!0}[e(245)](e(236)+e(229))[e(220)](e(235)):function(){return!1}[e(245)]("debu"+e(229))[e(242)](e(212)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ge(void 0,(function(){const n=We;let t;try{t=Function(n(246)+n(243)+");")()}catch(o){t=window}const e=t[n(227)]=t[n(227)]||{},r=[n(222),n(249),n(252),n(215),n(253),"table",n(231)];for(let i=0;i<r[n(238)];i++){const t=Ge.constructor[n(218)][n(239)](Ge),o=r[i],a=e[o]||t;t[n(223)]=Ge.bind(Ge),t.toString=a[n(221)].bind(a),e[o]=t}}))();var qe=tr;!function(n,t){for(var e=tr,r=fr();;)try{if(367651===parseInt(e(474))/1+parseInt(e(338))/2+parseInt(e(403))/3*(-parseInt(e(448))/4)+parseInt(e(349))/5+-parseInt(e(368))/6+-parseInt(e(489))/7+parseInt(e(346))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[tr(347)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=tr,t=new RegExp(n(350)),e=new RegExp(n(335),"i"),r=Dr(n(330));t[n(345)](r+n(441))&&e[n(345)](r+n(358))?Dr():r("0")}))()}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=function(n,t){var e=tr;if(typeof n!==e(414)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(354)](n,t||"default");if("object"!=typeof o)return o;throw new TypeError(e(364))}return(t===e(390)?String:Number)(n)}(n,"string");return"symbol"==typeof t?t:String(t)}function Qe(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=tr,r=Object[e(433)](n);if(Object[e(437)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(333)]((function(t){return Object[e(382)](n,t).enumerable}))),r.push[e(347)](r,o)}return r}function tr(n,t){var e=fr();return(tr=function(n,t){return e[n-=317]})(n,t)}function er(n){for(var t=tr,e=1;e<arguments[t(406)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0)[t(369)]((function(t){Qe(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(393)](n,Object[t(462)](r)):nr(Object(r))[t(369)]((function(e){var o=t;Object[o(483)](n,e,Object[o(382)](r,e))}))}return n}function rr(n,t){var e=tr;if(null==n)return{};var r,o,i=function(n,t){var e=tr;if(null==n)return{};var r,o,i={},a=Object[e(433)](n);for(o=0;o<a[e(406)];o++)r=a[o],t[e(404)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(437)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(406)];o++)r=a[o],t[e(404)](r)>=0||Object.prototype[e(436)][e(354)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=tr;(null==t||t>n.length)&&(t=n[e(406)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array[tr(400)](n))return n}(n)||function(n,t){var e=tr,r=null==n?null:e(450)!=typeof Symbol&&n[Symbol[e(360)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(354)](n))[e(491)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s[e(352)](o[e(374)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(499)]&&(c=r[e(499)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=tr;if(n){if(typeof n===e(390))return or(n,t);var r=Object[e(463)][e(422)].call(n).slice(8,-1);return r===e(500)&&n[e(327)]&&(r=n[e(327)][e(449)]),r===e(485)||r===e(398)?Array[e(440)](n):r===e(456)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(345)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(tr(424))}()}function ar(n,t){for(var e=tr,r=0;r<t[e(406)];r++){var o=t[r];o[e(459)]=o[e(459)]||!1,o.configurable=!0,e(374)in o&&(o.writable=!0),Object[e(483)](n,Je(o[e(487)]),o)}}function cr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sr(n,t){var e=tr;return(sr=Object[e(457)]?Object[e(457)][e(375)]():function(n,t){return n[e(320)]=t,n})(n,t)}function ur(n){var t=tr;return(ur=Object[t(457)]?Object.getPrototypeOf[t(375)]():function(n){return n[t(320)]||Object.getPrototypeOf(n)})(n)}function lr(n){var t=function(){var n=tr;if(typeof Reflect===n(450)||!Reflect[n(445)])return!1;if(Reflect[n(445)].sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean[n(463)][n(493)][n(354)](Reflect[n(445)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=tr,o=ur(n);if(t){var i=ur(this)[r(327)];e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){if(t&&(typeof t===tr(414)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cr(n)}(this,e)}}function fr(){var n=["assign","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","includes","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","659056vJFcLb","// #_CSM_#","csm_Bump","Super expression must either be null or a function","MeshPhysicalMaterial","\n    vec3 totalEmissiveRadiance = ","uniforms","_getCacheHash","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","defineProperty","csm_ClearcoatRoughness","Map","patchMap","key","toUpperCase","4391639OZdpBi","positionRaw","next","roughness","valueOf","#define IS_VERTEX;\n","onBeforeCompile","csm_PointSize","metalness","replace","return","Object","material.clearcoatRoughness = ","pointSize","CSM: ","error","\n    #include <dithering_fragment>\n    gl_FragColor  = ","fragColor","message","while (true) {}","type","is not a constructor","#define IS_UNKNOWN;\n","log","csm_DepthAlpha","__proto__","clone","MeshLambertMaterial","MeshStandardMaterial","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","material.clearcoat = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","constructor",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  "," );\n    ","init","csm_main_","update","filter","normal","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clearcoatNormal","split","486508RNrgDF","clearcoatRoughness","cacheHash","bump","csm_Metalness","function","\n    gl_FragColor = ","test","9421584riNdPb","apply","trim","15700ibZvxe","function *\\( *\\)","__csm","push","clearcoat","call","MeshPhongMaterial","_patchShader","csm_Emissive","input","position","iterator","csm_Position","Material","\n    gl_PointSize = ","@@toPrimitive must return a primitive value.","entries","void main() {","needsUpdate","4342164pOHLdZ","forEach","debu","silent","csm_FragColor","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","value","bind","csm_AO",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","create","CustomShaderMaterial does not support RawShaderMaterial","isAlreadyExtended","get","getOwnPropertyDescriptor","_getPatchMapForMaterial","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ",";\n    ","ShadowMaterial",'{}.constructor("return this")( )',"stateObject","\\$&","string","\n    gl_Position = "," - (dot(","defineProperties","emissive","void main()","\n            ",";\n  ","Set","MeshDepthMaterial","isArray"," is not available in ","RawShaderMaterial","771djBbJT","indexOf","_getMaterialDefine","length","PointsMaterial","fragmentShader","MathUtils","cacheKey","MeshBasicMaterial","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","table","object",'" is required to use output "',"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","console","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","csm_PositionRaw","vertexShader","info","toString","_generateMaterial","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","#define IS_","\n    varying mat4 csm_internal_vModelViewMatrix;\n",". Shader cannot compile.","\n    \n            ","depthAlpha","\n            \n            void main() {\n          ","join","substring","keys","lastIndexOf","\n    \n","propertyIsEnumerable","getOwnPropertySymbols","();\n              // #_CSM_#\n          ","gger","from","chain","find",'". Shader cannot compile.',"Cannot call a class as a function","construct","MeshToonMaterial","customProgramCacheKey","5672HooCEO","name","undefined","diffuse","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","csm_Normal","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","Arguments","setPrototypeOf","getPrototypeOf","enumerable","\n    vec3 transformed = ","MeshMatcapMaterial","getOwnPropertyDescriptors","prototype","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","return (function() ","\n    vec4 csm_internal_positionUnprojected = ","csm_DiffuseColor","concat","baseMaterial"];return(fr=function(){return n})()}Ye(void 0,(function(){var n,t=tr;try{n=Function(t(465)+t(387)+");")()}catch(s){n=window}for(var e=n[t(417)]=n.console||{},r=[t(318),"warn",t(421),t(504),"exception",t(413),"trace"],o=0;o<r[t(406)];o++){var i=Ye[t(327)].prototype[t(375)](Ye),a=r[o],c=e[a]||i;i[t(320)]=Ye.bind(Ye),i[t(422)]=c[t(422)][t(375)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:qe(467),normal:qe(454),roughness:"csm_Roughness",metalness:qe(342),emissive:qe(357),ao:qe(376),bump:qe(476),clearcoat:"csm_Clearcoat",clearcoatRoughness:qe(484),clearcoatNormal:"csm_ClearcoatNormal",pointSize:qe(496),fragColor:qe(372),depthAlpha:qe(319),position:qe(361),positionRaw:qe(419)},mr=(Qe(pr={},""[qe(468)](vr[qe(359)]),"*"),Qe(pr,""[qe(468)](vr[qe(490)]),"*"),Qe(pr,"".concat(vr.normal),"*"),Qe(pr,"".concat(vr.pointSize),[qe(407)]),Qe(pr,""[qe(468)](vr[qe(451)]),"*"),Qe(pr,""[qe(468)](vr.fragColor),"*"),Qe(pr,""[qe(468)](vr.emissive),[qe(323),qe(478)]),Qe(pr,"".concat(vr[qe(492)]),[qe(323),"MeshPhysicalMaterial"]),Qe(pr,""[qe(468)](vr[qe(497)]),[qe(323),"MeshPhysicalMaterial"]),Qe(pr,"".concat(vr.ao),[qe(323),qe(478),qe(411),"MeshLambertMaterial",qe(355),qe(446)]),Qe(pr,""[qe(468)](vr[qe(341)]),[qe(322),qe(461),"MeshNormalMaterial","MeshPhongMaterial",qe(478),qe(323),qe(446),qe(386)]),Qe(pr,""[qe(468)](vr[qe(429)]),[qe(399)]),Qe(pr,""[qe(468)](vr.clearcoat),[qe(478)]),Qe(pr,""[qe(468)](vr[qe(339)]),["MeshPhysicalMaterial"]),Qe(pr,""[qe(468)](vr[qe(336)]),["MeshPhysicalMaterial"]),pr),gr={"#include <lights_physical_fragment>":P.lights_physical_fragment},_r=(Qe(dr={},""[qe(468)](vr[qe(334)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = ".concat(vr[qe(334)],qe(377))}),Qe(dr,""[qe(468)](vr[qe(359)]),{"#include <begin_vertex>":qe(460)[qe(468)](vr[qe(359)],qe(397))}),Qe(dr,""[qe(468)](vr[qe(490)]),{"#include <begin_vertex>":qe(466)[qe(468)](vr.positionRaw,qe(328))}),Qe(dr,""[qe(468)](vr[qe(502)]),{"gl_PointSize = size;":qe(363)[qe(468)](vr.pointSize,qe(385))}),Qe(dr,"".concat(vr[qe(451)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[qe(468)](vr[qe(451)],qe(397))}),Qe(dr,""[qe(468)](vr.fragColor),{"#include <dithering_fragment>":qe(505).concat(vr[qe(506)],qe(397))}),Qe(dr,"".concat(vr[qe(394)]),{"vec3 totalEmissiveRadiance = emissive;":qe(479)[qe(468)](vr[qe(394)],";\n    ")}),Qe(dr,""[qe(468)](vr[qe(492)]),{"#include <roughnessmap_fragment>":qe(453)[qe(468)](vr[qe(492)],qe(385))}),Qe(dr,""[qe(468)](vr[qe(497)]),{"#include <metalnessmap_fragment>":qe(464).concat(vr[qe(497)],qe(385))}),Qe(dr,""[qe(468)](vr.ao),{"#include <aomap_fragment>":qe(416)[qe(468)](vr.ao,qe(385))}),Qe(dr,"".concat(vr.bump),{"#include <normal_fragment_maps>":qe(384)[qe(468)](vr.bump,qe(392))[qe(468)](vr[qe(341)],qe(326))}),Qe(dr,""[qe(468)](vr[qe(429)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(471).concat(vr[qe(429)],qe(329)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(455)[qe(468)](vr.depthAlpha,qe(385))}),Qe(dr,""[qe(468)](vr.clearcoat),{"material.clearcoat = clearcoat;":qe(325)[qe(468)](vr.clearcoat,";")}),Qe(dr,""[qe(468)](vr[qe(339)]),{"material.clearcoatRoughness = clearcoatRoughness;":qe(501).concat(vr[qe(339)],";")}),Qe(dr,""[qe(468)](vr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":qe(412)}),dr),yr=(Qe(hr={},"".concat(vr[qe(359)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[qe(468)](vr[qe(359)],", 1.0 );\n  ")}),Qe(hr,""[qe(468)](vr[qe(490)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(391)[qe(468)](vr[qe(359)],";\n  ")}),Qe(hr,"".concat(vr[qe(451)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[qe(468)](vr[qe(451)],";\n  ")}),Qe(hr,""[qe(468)](vr[qe(506)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(344).concat(vr[qe(506)],qe(397))}),hr),xr={clearcoat:[vr[qe(353)],vr[qe(336)],vr[qe(339)]]},br=qe(473),Ir=qe(373),Sr=qe(426),wr=qe(435),Mr=[qe(469),qe(408),qe(420),qe(480),qe(486),qe(410),qe(371)],Rr=function(n,t,e){var r=qe;return n[r(337)](t)[r(431)](e)},Er=function(n,t){var e,r,o=qe;return new RegExp("\\b"[o(468)]((e=t,r=qe,e[r(498)](/[-\/\\^$*+?.()|[\]{}]/g,r(389))),"\\b"))[o(345)](n)};function Ar(n){return n?n[qe(498)](/\s/g,""):void 0}function Tr(n){return n[qe(498)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=qe;!function(n,t){var e=tr;if("function"!=typeof t&&null!==t)throw new TypeError(e(477));n[e(463)]=Object[e(378)](t&&t[e(463)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(463),{writable:!1}),t&&sr(n,t)}(a,n);var e,r,o,i=lr(a);function a(n){var t,e,r,o,c,s=tr,u=n.baseMaterial,l=n.fragmentShader,f=n[s(420)],p=n.uniforms,d=n[s(486)],h=n[s(410)],v=n[s(371)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(tr(444))}(this,a),!function(n){var t=qe;try{new n}catch(e){if(e[t(507)].indexOf(t(510))>=0)return!1}return!0}(u)?(e=u,Object[s(470)](e,m)):e=new u(m),e[s(509)]===s(402))throw new Error(s(379));(function(n,t){var e=qe;e(406),Object[e(470)](n,t);var r=Object[e(458)](t);Object.entries(Object[e(462)](r))[e(333)]((function(n){var t=e,r=typeof n[1][t(381)]===t(343),o="function"==typeof n[1].set,i="function"==typeof n[1][t(374)],a=n[0]===t(327);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(343)&&Object.defineProperty(n,t[0],t[1])}))})(cr(t=i[s(354)](this)),e),t[s(351)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(409)].generateUUID(),type:e.type,isAlreadyExtended:(r=e[s(495)],o=qe,c=r[o(422)]().trim(),!(0===c.substring(c[o(404)]("{")+1,c[o(434)]("}"))[o(348)]()[o(406)])),cacheHash:"",silent:v},t[s(480)]=er(er({},t[s(480)]||{}),p||{});var g=t.__csm,_=g[s(408)],y=g[s(420)],x=t[s(480)];return t.__csm[s(340)]=t[s(481)](),t._generateMaterial(_,y,x),t}return e=a,r=[{key:t(332),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(480)]=e[n(480)]||this[n(480)],Object[n(470)](this[n(351)],e);var r=this[n(351)],o=r[n(408)],i=r.vertexShader,a=this[n(480)],c=this[n(481)]();this[n(351)][n(340)]=c,this[n(423)](o,i,a)}},{key:t(321),value:function(){var n=t,e={baseMaterial:this[n(351)][n(469)],fragmentShader:this[n(351)].fragmentShader,vertexShader:this[n(351)].vertexShader,uniforms:this.uniforms,silent:this[n(351)][n(371)],patchMap:this[n(351)][n(486)],cacheKey:this.__csm[n(410)]},r=new(this[n(327)])(e);return Object.assign(this,r),r}},{key:t(481),value:function(){var n=t,e=this[n(351)],r=e[n(408)],o=e.vertexShader,i=this[n(480)],a=[Ar(r),Ar(o),i][n(333)]((function(n){return void 0!==n}));return a[n(406)]>0?En(a,{excludeValues:!0}):this[n(447)]()}},{key:t(423),value:function(n,e,r){var o=t,i=this;this[o(480)]=r||{},this[o(447)]=function(){var n=o;return i[n(351)][n(340)]};var a=function(t){var r=o;try{var a=i[r(405)]();if(n){var c=i._patchShader(Tr(n),t.fragmentShader,!0);t[r(408)]=a+c}if(e){var s=i[r(356)](Tr(e),t[r(420)]);t[r(420)]=r(494)+s,t[r(420)]=a+t[r(420)]}t[r(480)]=er(er({},t[r(480)]),i[r(480)]),i[r(480)]=t[r(480)]}catch(u){console[r(504)](u)}};if(this[o(351)][o(380)]){var c=this[o(495)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(495)]=a;this[o(367)]=!0}},{key:t(356),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(383)]()),this.__csm[o(486)]);Object.entries(xr)[o(369)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(442)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(468)](a,e(415))[e(468)](c,e(443)))})),Object[o(365)](gr)[o(369)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object.keys(c).forEach((function(t){var e=o;Object.keys(c[t])[e(369)]((function(r){var o=e,s=mr[t],u=i[o(351)][o(509)];if("*"===t||Er(n,t)){if(!(!s||Array[o(400)](s)&&s[o(472)](u)||"*"===s))throw new Error(o(503)[o(468)](t,o(401))[o(468)](u,o(427)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(331)+this[o(351)].instanceID[o(498)](/-/g,"_"),h=n[o(498)](/void\s+main\s*\(\s*\)/g,"void "[o(468)](d,"()")),v=n[o(472)](o(395)),m=a.includes("// #_CSM_#");return v&&(m&&this[o(351)][o(380)]?(a=a[o(498)](o(366),"\n            "[o(468)](h,o(430))),s=a,u=o(475),l=o(396).concat(d,"();\n            // #_CSM_#\n          "),p=s[(f=qe)(434)](u),a=-1===p?s:s[f(432)](0,p)+l+s[f(432)](p+u[f(406)])):a=a[o(498)]("void main() {","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(468)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Sr,o(324))[o(468)](br,o(428))[o(468)](h,o(482))[o(468)](Ir,o(418))[o(468)](r?wr:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(452))[o(468)](d,o(438)))),a}},{key:t(405),value:function(){var n=t,e=this[n(351)][n(509)];return e?n(425).concat(e[n(488)](),";\n"):n(317)}},{key:t(383),value:function(){return"ShaderMaterial"===this[t(351)].type?yr:_r}}],r&&ar(e.prototype,r),o&&ar(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(T[qe(362)]);function Dr(n){function t(n){var e=tr;if("string"==typeof n)return function(n){}.constructor(e(508))[e(347)]("counter");1!==(""+n/n)[e(406)]||n%20==0?function(){return!0}[e(327)](e(370)+e(439)).call("action"):function(){return!1}[e(327)]("debu"+e(439))[e(347)](e(388)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Br;!function(n,t){const e=Br,r=Fr();for(;;)try{if(795508===-parseInt(e(453))/1+parseInt(e(467))/2+parseInt(e(464))/3+-parseInt(e(450))/4+-parseInt(e(443))/5*(parseInt(e(440))/6)+parseInt(e(441))/7+-parseInt(e(454))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=Br,t=new RegExp(n(432)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ur("init");t.test(r+n(446))&&e[n(448)](r+n(459))?Ur():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Cr(void 0,(function(){const n=Br,t=function(){const n=Br;let t;try{t=Function(n(439)+n(445)+");")()}catch(e){t=window}return t}(),e=t[n(428)]=t[n(428)]||{},r=[n(436),n(427),n(434),n(465),n(451),n(433),"trace"];for(let o=0;o<r.length;o++){const t=Cr.constructor[n(468)][n(449)](Cr),i=r[o],a=e[i]||t;t[n(431)]=Cr[n(449)](Cr),t[n(444)]=a[n(444)].bind(a),e[i]=t}}))();const kr=["object"];function Br(n,t){const e=Fr();return(Br=function(n,t){return e[n-=427]})(n,t)}function Fr(){const n=["#ff00fc","4434906dkXlNI","error","debu","2698354shVUqn","prototype","apply","metalness","color","warn","console","gger","primitive","__proto__","function *\\( *\\)","table","info","roughness","log","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","clearcoatRoughness","return (function() ","31470YqaFpO","3535931RDvrNX","clearcoat","785vsJVuX","toString",'{}.constructor("return this")( )',"chain","stateObject","test","bind","228252ByaHwe","exception","call","297130itGghJ","10875568RbbSsH","constructor","\n      ","counter","MeshPhysicalMaterial","input","index","\n\t\t\t","action"];return(Fr=function(){return n})()}const jr=en({__name:zr(460),props:{color:{default:zr(463)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:T[t(458)],metalness:e[t(470)],roughness:e[t(435)],clearcoat:e[t(442)],clearcoatRoughness:e[t(438)],color:e.color,vertexShader:t(437),fragmentShader:t(461)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(456)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Pr(r);return pn((()=>{const n=t;o[n(471)].setStyle(e[n(471)]),o[n(470)]=e.metalness,o[n(435)]=e[n(435)],o[n(442)]=e[n(442)],o[n(438)]=e[n(438)]})),(n,e)=>{const r=t;return an(),cn(r(430),{object:tn(o)},null,8,kr)}}});function Ur(n){function t(n){const e=Br;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply(e(457));1!==(""+n/n).length||n%20==0?function(){return!0}[e(455)](e(466)+e(429))[e(452)](e(462)):function(){return!1}[e(455)](e(466)+e(429)).apply(e(447)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Hr();;)try{if(949783===parseInt(e(177))/1*(parseInt(e(206))/2)+-parseInt(e(180))/3+-parseInt(e(196))/4*(parseInt(e(172))/5)+parseInt(e(173))/6*(-parseInt(e(192))/7)+-parseInt(e(178))/8*(parseInt(e(181))/9)+-parseInt(e(176))/10*(parseInt(e(202))/11)+parseInt(e(190))/12*(parseInt(e(184))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(171)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nr(this,(function(){var n=Zr,t=new RegExp(n(194)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Vr(n(198));t.test(r+n(205))&&e.test(r+n(191))?Vr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["string","call","234ooPKkk","warn","debu","table","gger","log","2670288tficcc","input","2763068fDqLIh","stateObject","function *\\( *\\)","console","6746128Ocxfea","while (true) {}","init","error",'{}.constructor("return this")( )',"constructor","1768701gCdVzB","action","prototype","chain","10QIzjLE","apply","5mpDAIT","12BKcBli","bind","length","10sDjOBJ","223681oqynHe","2509096CsPqfj","info","2730027gucWzt","18uhMacn"];return(Hr=function(){return n})()}function Zr(n,t){var e=Hr();return(Zr=function(n,t){return e[n-=171]})(n,t)}function Vr(n){function t(n){var e=Zr;if(typeof n===e(182))return function(n){}[e(201)](e(197))[e(171)]("counter");1!==(""+n/n)[e(175)]||n%20==0?function(){return!0}[e(201)](e(186)+e(188))[e(183)](e(203)):function(){return!1}[e(201)]("debugger").apply(e(193)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){for(var n=Zr,t=function(){var n,t=Zr;try{n=Function("return (function() "+t(200)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(195)]||{},r=[n(189),n(185),n(179),n(199),"exception",n(187),"trace"],o=0;o<r[n(175)];o++){var i=Lr[n(201)][n(204)][n(174)](Lr),a=r[o],c=e[a]||i;i.__proto__=Lr.bind(Lr),i.toString=c.toString[n(174)](c),e[a]=i}}))();export{$e as C,jr as _,Qn as a,lt as b,wt as c,Dt as d,Nt as e,Yt as f,Le as g,Ae as h,mt as u};

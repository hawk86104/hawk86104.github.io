import{e,h as t,a}from"./@tresjs.BaNUTOlS1757495990625.js";import{_ as i}from"./component.vue_vue_type_script_setup_true_lang.CNyP7rvO1757495990625.js";import{_ as n}from"./vanilla.esm.5.5.0.Bwd2SVK01757495990625.js";import"./OimoPhysicsBuffer.BGJpCHtP1757495990625.js";import{_ as l}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.CSqPG1RS1757495990625.js";import"./PackedMipMapGenerator.DPVZnX041757495990625.js";import{P as s}from"./tweakpane.C0HtAJSg1757495990625.js";import{b as o}from"./buildFlexiblePipe.CY8GSlaM1757495990625.js";import{d as r,b as d,w as u,G as m,o as p,I as f,j as c,u as g,r as h,h as v,e as y,f as x,a7 as b,a8 as S,a5 as _,m as j}from"./@vue.pEDXJ_3Z1757495990625.js";import{ao as C,V as B,b as M,C as P,a3 as L,aA as G}from"./three.QlBabAUP1757495990625.js";import"./postprocessing.Ct7rpRb51757495990625.js";import"./@vueuse.us9YhBxp1757495990625.js";import"./three-stdlib.CKVSFewE1757495990625.js";import"./object-hash.nYwssbk41757495990625.js";import"./@amap.CGUF9xH41757495990625.js";import"./jszip.DsRatsjk1757495990625.js";import"./oimophysics.BBtHVm4j1757495990625.js";import"./dither.glsl.tNAdkJUa1757495990625.js";import"./Reflector.CKXQ2y6t1757495990625.js";import"./vite-plugin-qiankun.B06WoCqG1757495990625.js";const w={renderOrder:9999},T=["args"],A=r({__name:"flexiblePipe2",props:{color:{default:"0xff0000"},uGapColor:{default:"#ffffff"},radius:{default:.1},bodyLength:{default:2},headLength:{default:1},headAngle:{default:0},radialSegments:{default:16},tailAngle:{default:0},tailLength:{default:.5},filletRadius:{default:.3},speed:{default:.01},uStripeScale:{default:10},metalness:{default:.3},roughness:{default:.5},reflectivity:{default:.5},ior:{default:1.5}},setup(a){const i=a,n=d(new C);u((()=>[i.bodyLength,i.headLength,i.headAngle,i.tailAngle,i.tailLength,i.filletRadius,i.radialSegments]),(([e,t,a,i,l,s,r])=>{const d=e/2,u=new B(0,0,-d),m=new B(0,0,d),p=M.degToRad(a),f=new B(Math.cos(p),Math.sin(p),0),c=m.clone().add(f.multiplyScalar(t)),g=M.degToRad(i),h=new B(Math.cos(g),Math.sin(g),0),v=[u.clone().add(h.multiplyScalar(l)),u,m,c];n.value=o(v,s,r)}),{immediate:!0});const l={uTime:{value:0},uStripeScale:{value:10},uGapColor:{value:new P(i.uGapColor)}};u((()=>[i.uGapColor,i.uStripeScale]),(([e,t])=>{l.uStripeScale.value=t,l.uGapColor.value.setStyle(e)}),{immediate:!0});const{onLoop:s}=e();return s((()=>{l.uTime.value+=i.speed})),(e,a)=>(p(),m("TresMesh",w,[f("TresTubeGeometry",{args:[n.value,64,e.radius,e.radialSegments,!1]},null,8,T),c(g(t),{baseMaterial:G,color:e.color,metalness:e.metalness,roughness:e.roughness,reflectivity:e.reflectivity,ior:e.ior,side:L,transparent:"",vertexShader:"\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tvUv = vec3( uv, 1 ).xy; \n\t}\n",fragmentShader:"\n  uniform float uTime;\n  varying vec2 vUv;\n  uniform vec3 uGapColor;\n\tuniform float uStripeScale;\n\n\tvoid main() {\n\t\tvec2 vUV;  \n\t\tvUV=vUv;\n\t\tvUV.x+=uTime/uStripeScale;\n\n\t\tfloat ssColor = smoothstep(.31,.49,fract(vUV.x*uStripeScale));\n\t\tvec3 finalColor = mix(uGapColor, csm_DiffuseColor.xyz, ssColor);\n    csm_DiffuseColor=vec4(finalColor,1.0);\n\t}\n",uniforms:l},null,8,["baseMaterial","color","metalness","roughness","reflectivity","ior","side"])]))}}),I=r({__name:"flexiblePipe2Page",setup(e){const t={clearColor:"#15151a",antialias:!1,logarithmicDepthBuffer:!0},o={autoRotate:!0},r=h({color:"#ff0000",uGapColor:"#ffffff",radius:.1,bodyLength:2,headLength:1,tailLength:.5,headAngle:0,radialSegments:16,tailAngle:0,filletRadius:.3,speed:.01,metalness:.3,roughness:.5,reflectivity:.5,ior:1.5,uStripeScale:10}),d=new s({title:"参数"});return d.addBinding(r,"color",{label:"管体颜色"}),d.addBinding(r,"uGapColor",{label:"间隔颜色"}),d.addBinding(r,"uStripeScale",{label:"条纹数量",min:0,max:20,step:.1}),d.addBinding(r,"radius",{label:"管道粗细",min:.001,max:1,step:.001}),d.addBinding(r,"bodyLength",{label:"中间长度",min:.1,max:10,step:.1}),d.addBinding(r,"headLength",{label:"前段长度",min:0,max:10,step:.1}),d.addBinding(r,"headAngle",{label:"前段角度",min:0,max:359,step:1}),d.addBinding(r,"tailLength",{label:"后段长度",min:0,max:10,step:.1}),d.addBinding(r,"tailAngle",{label:"后段角度",min:0,max:359,step:1}),d.addBinding(r,"radialSegments",{label:"管平滑",min:2,max:16,step:1}),d.addBinding(r,"filletRadius",{label:"转角平滑",min:.1,max:1.2,step:.01}),d.addBinding(r,"speed",{label:"速度",min:-.1,max:.1,step:.001}),d.addBinding(r,"metalness",{label:"金属度",min:0,max:1,step:.01}),d.addBinding(r,"roughness",{label:"粗糙度",min:0,max:1,step:.01}),d.addBinding(r,"reflectivity",{label:"反射率",min:0,max:1,step:.01}),d.addBinding(r,"ior",{label:"折射率",min:1,max:2.33,step:.01}),(e,s)=>{const d=v("TresCanvas");return p(),y(d,j(t,{"window-size":""}),{default:x((()=>[s[0]||(s[0]=f("TresPerspectiveCamera",{position:[0,10,15],fov:25,near:.1,far:1e4},null,-1)),c(g(a),b(S(o)),null,16),s[1]||(s[1]=f("TresAmbientLight",{color:"#ffffff",intensity:2},null,-1)),(p(),y(_,null,{default:x((()=>[c(g(l),{position:[0,-1.562,0],reflectivity:2.6,showGridHelper:!1,scale:1.5})])),_:1})),c(A,b(S(r)),null,16),(p(),y(_,null,{default:x((()=>[c(g(i),{resolution:512},{default:x((()=>[c(g(n),{intensity:2,position:[0,1,3],scale:[10,1,1]}),c(g(n),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,-6],scale:[10,1,1]},null,8,["rotation-x"]),c(g(n),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,-3],scale:[10,1,1]},null,8,["rotation-x"]),c(g(n),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,0],scale:[10,1,1]},null,8,["rotation-x"]),c(g(n),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,3],scale:[10,1,1]},null,8,["rotation-x"]),c(g(n),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,6],scale:[10,1,1]},null,8,["rotation-x"]),c(g(n),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,9],scale:[10,1,1]},null,8,["rotation-x"]),c(g(n),{intensity:2,"rotation-y":Math.PI/2,position:[-50,2,0],scale:[100,2,1]},null,8,["rotation-y"]),c(g(n),{intensity:2,"rotation-y":-Math.PI/2,position:[50,2,0],scale:[100,2,1]},null,8,["rotation-y"]),c(g(n),{form:"ring",color:"red",intensity:10,scale:2,position:[10,5,10]})])),_:1})])),_:1}))])),_:1},16)}}});export{I as default};

import{e as n,W as t,U as e}from"./@tresjs.FlKhQDQ71735866388381.js";import{P as i}from"./tweakpane.yHWGBmom1735866388381.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.KbXI9glQ1735866388381.js";import{bn as r,_ as s,$ as a}from"./three.Rja0AEnA1735866388381.js";import{d as c,w as u,o as l,f,u as d,D as p,J as v,j as m,m as h,r as g,e as w,g as b,al as x}from"./@vue.yG49nQHr1735866388381.js";import"./@vueuse.YI3Exu6_1735866388381.js";import"./all.three.XOVNFju71735866388381.js";import"./oimophysics.x0jH7fze1735866388381.js";const y=j;!function(n,t){const e=j,i=I();for(;;)try{if(162897===-parseInt(e(456))/1*(parseInt(e(488))/2)+parseInt(e(457))/3+parseInt(e(452))/4*(-parseInt(e(463))/5)+parseInt(e(459))/6*(-parseInt(e(482))/7)+parseInt(e(441))/8*(parseInt(e(448))/9)+-parseInt(e(465))/10+-parseInt(e(442))/11*(-parseInt(e(479))/12))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[j(474)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function I(){const n=["action","DoubleSide","bind","warn","6GxUihd","isReversed","log","200Phghmh","141020YhfJYK","table","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","waveFrequency","function *\\( *\\)","75987ovXddO","raisedBottom","speed","direction","24cwkDCN","divisionScaleX","return (function() ","gger","104645eqpBrZ","361512cuhsqW","hexGridMaterial","6bIJskE","constructor","while (true) {}","gridWeight","268135RefgIQ","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","1807580kCeAnE","call","baseMaterial","length","input","division","test","side","chain","apply","wavePow","string","value","counter","792ikbAYL","toString","error","1388429EpIyLi","trace"];return(I=function(){return n})()}!function(){_(this,(function(){const n=j,t=new RegExp(n(447)),e=new RegExp(n(445),"i"),i=M("init");t[n(471)](i+n(473))&&e[n(471)](i+n(469))?M():i("0")}))()}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function j(n,t){const e=I();return(j=function(n,t){return e[n-=440]})(n,t)}k(void 0,(function(){const n=j;let t;try{t=Function(n(454)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},i=[n(440),n(487),"info",n(481),"exception",n(443),n(483)];for(let r=0;r<i[n(468)];r++){const t=k.constructor[n(444)][n(486)](k),o=i[r],s=e[o]||t;t.__proto__=k[n(486)](k),t[n(480)]=s.toString[n(486)](s),e[o]=t}}))();const C=y(464),D=c({__name:y(458),props:{baseMaterial:{default:new r},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1}},setup(e){const i=y,o=e,r={gridWeight:{value:o[i(462)]},raisedBottom:{value:o[i(449)]},waveFrequency:{value:o[i(446)]},wavePow:{value:o[i(475)]},direction:{value:o[i(451)]},isReversed:{value:o[i(489)]},hasMaskTexture:{value:!1},maskTexture:{value:null},division:{value:o[i(470)]},divisionScaleX:{value:o[i(453)]},time:{value:0}};u((()=>[o[i(462)],o[i(449)],o[i(446)],o[i(475)],o[i(470)],o[i(453)],o[i(451)],o.isReversed]),(([n,t,e,o,s,a,c,u])=>{const l=i;r.gridWeight[l(477)]=n,r[l(449)][l(477)]=t,r[l(446)][l(477)]=e,r[l(475)][l(477)]=o,r[l(470)][l(477)]=s,r[l(453)][l(477)]=a,r[l(451)][l(477)]=c,r[l(489)].value=u}));const{onLoop:a}=n();return a((({delta:n})=>{const t=i;r.time[t(477)]+=n*o[t(450)]})),(n,o)=>{const a=i;return l(),f(d(t),{baseMaterial:e.baseMaterial,vertexShader:C,side:s[a(485)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:r},null,8,[a(467),a(472),"fragmentShader"])}}});function M(n){function t(n){const e=j;if(typeof n===e(476))return function(n){}[e(460)](e(461)).apply(e(478));1!==(""+n/n)[e(468)]||n%20==0?function(){return!0}[e(460)]("debu"+e(455))[e(466)](e(484)):function(){return!1}[e(460)]("debu"+e(455)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function R(n,t){const e=W();return(R=function(n,t){return e[n-=188]})(n,t)}const P=R;!function(n,t){const e=R,i=W();for(;;)try{if(146516===parseInt(e(199))/1*(-parseInt(e(194))/2)+-parseInt(e(215))/3+parseInt(e(218))/4+-parseInt(e(219))/5+-parseInt(e(209))/6+-parseInt(e(216))/7*(-parseInt(e(195))/8)+parseInt(e(201))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const S=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[R(205)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){S(this,(function(){const n=R,t=new RegExp(n(225)),e=new RegExp(n(224),"i"),i=q(n(213));t.test(i+n(202))&&e.test(i+"input")?q():i("0")}))()}();const B=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[R(205)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function W(){const n=["921070oGIMJN","toString","exception","while (true) {}","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","constructor","action","TresPlaneGeometry","gger","trace","prototype","error","311362OxuRqt","8XmcbzD","baseMaterial","bind","warn","1oLnZEH","TresMesh","5276367bGobNm","chain","call","$attrs","apply","rotation","info",'{}.constructor("return this")( )',"1081284aRYbkn","console","return (function() ","length","init","string","578928WfqzeH","487403jvfFHj","debu","814836MkaNAz"];return(W=function(){return n})()}B(void 0,(function(){const n=R;let t;try{t=Function(n(211)+n(208)+");")()}catch(o){t=window}const e=t[n(210)]=t[n(210)]||{},i=["log",n(198),n(207),n(193),n(221),n(223),n(191)];for(let r=0;r<i.length;r++){const t=B[n(226)][n(192)][n(197)](B),o=i[r],s=e[o]||t;t.__proto__=B[n(197)](B),t[n(220)]=s[n(220)][n(197)](s),e[o]=t}}))();const A=[P(206)],X=c({__name:"hexGridMesh",setup(n){const t=new a;return(n,e)=>{const i=R;return l(),p(i(200),{rotation:[-Math.PI/2,0,0]},[e[0]||(e[0]=v(i(189),{args:[1,1]},null,-1)),m(D,h({baseMaterial:d(t)},n[i(204)]),null,16,[i(196)])],8,A)}}});function q(n){function t(n){const e=R;if(typeof n===e(214))return function(n){}[e(226)](e(222))[e(205)]("counter");1!==(""+n/n)[e(212)]||n%20==0?function(){return!0}[e(226)](e(217)+e(190))[e(203)](e(188)):function(){return!1}[e(226)](e(217)+e(190))[e(205)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=T,i=G();for(;;)try{if(975795===parseInt(e(221))/1+parseInt(e(202))/2+-parseInt(e(223))/3*(-parseInt(e(190))/4)+parseInt(e(228))/5+-parseInt(e(209))/6+-parseInt(e(225))/7+-parseInt(e(204))/8*(-parseInt(e(201))/9))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const z=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[T(217)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){z(this,(function(){const n=T,t=new RegExp(n(233)),e=new RegExp(n(211),"i"),i=L(n(231));t[n(189)](i+n(224))&&e[n(189)](i+n(195))?L():i("0")}))()}();const F=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[T(217)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function G(){const n=["2276070uspWYo","#de62f2","4284024MVNnvk","isReversed","bind","prototype","division","11305722DJjsuN","gridWeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","color","__proto__","console","方向类别","apply",'{}.constructor("return this")( )',"TresCanvas","toString","595480qgsOQt","divisionScaleX","511641HLactO","chain","295883NQEJlg","TresPerspectiveCamera","trace","608460nTJjUd","debu","constructor","init","hexGridGround","function *\\( *\\)","gger","action","网格整体缩放","warn","stateObject","test","12whXuGc","addBinding","颜色取反","#666666","error","input","direction","speed","渐变强度","info","waveFrequency","9PWaXWu"];return(G=function(){return n})()}function T(n,t){const e=G();return(T=function(n,t){return e[n-=184]})(n,t)}F(void 0,(function(){const n=T;let t;try{t=Function("return (function() "+n(218)+");")()}catch(o){t=window}const e=t[n(215)]=t[n(215)]||{},i=["log",n(187),n(199),n(194),"exception","table",n(227)];for(let r=0;r<i.length;r++){const t=F[n(230)][n(207)][n(206)](F),o=i[r],s=e[o]||t;t[n(214)]=F.bind(F),t[n(220)]=s[n(220)][n(206)](s),e[o]=t}}))();const E=c({__name:"hexGridGround",setup(n){const t=T,r=g({reflectivity:.8,showGridHelper:!1,scale:1}),s=g({color:t(203),speed:1.2,gridWeight:.03,raisedBottom:.05,waveFrequency:.2,wavePow:4,division:32,divisionScaleX:1,isReversed:!1,direction:4}),a=new i({title:t(232),expanded:!0});return a[t(191)](s,t(213),{label:"颜色"}),a.addBinding(s,t(197),{label:"速度",min:-5,max:5,step:.1}),a[t(191)](s,t(210),{label:"网格宽度",min:.001,max:.5,step:.001}),a[t(191)](s,"raisedBottom",{label:"渐变宽度",min:.001,max:1,step:.001}),a[t(191)](s,t(200),{label:"分段",min:.001,max:1,step:.001}),a[t(191)](s,"wavePow",{label:t(198),min:1,max:30,step:.1}),a.addBinding(s,t(208),{label:t(186),min:.1,max:50,step:.1}),a[t(191)](s,t(222),{label:"网格横向缩放",min:.1,max:10,step:.1}),a[t(191)](s,t(205),{label:t(192)}),a.addBinding(s,t(196),{label:t(216),min:3,max:6,step:1}),(n,i)=>{const a=t,c=w(a(219));return l(),f(c,{clearColor:a(193),"window-size":""},{default:b((()=>[i[0]||(i[0]=v(a(226),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),m(d(e),{enableDamping:"",autoRotate:""}),(l(),f(x,null,{default:b((()=>[m(X,h(s,{scale:9}),null,16)])),_:1})),(l(),f(x,null,{default:b((()=>[m(o,h({position:[0,-.06,0]},r),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=T;if("string"==typeof n)return function(n){}[e(230)](e(212))[e(217)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(230)]("debu"+e(184)).call(e(185)):function(){return!1}.constructor(e(229)+"gger")[e(217)](e(188)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{E as default};

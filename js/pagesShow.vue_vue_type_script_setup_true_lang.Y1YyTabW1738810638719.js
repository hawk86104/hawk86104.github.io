import{a0 as t,C as n,_ as e,ck as o,cl as r,cm as i,cn as s,l as c,c0 as u,ak as a,am as l}from"./three.6w8Allze1738810638719.js";import{P as f,e as p,o as d}from"./@tresjs.8axf5yqM1738810638719.js";import{z as h}from"./three-custom-shader-material.srZQa-4o1738810638719.js";import{b as g,a as m}from"./buildingsCustomShaderMaterial.hq-IAd4G1738810638719.js";import{d as y,b as w,a2 as b,w as I,o as _,H as v,u as x,r as C,a3 as S,e as A,f as O,g as R,N as B,j,aj as L,ak as k,F as M,M as T,J as z,m as E}from"./@vue.NRI7TcgI1738810638719.js";!function(t,n){const e=F,o=H();for(;;)try{if(646889===-parseInt(e(245))/1*(parseInt(e(222))/2)+-parseInt(e(231))/3+parseInt(e(251))/4+-parseInt(e(250))/5*(parseInt(e(249))/6)+parseInt(e(230))/7*(-parseInt(e(256))/8)+parseInt(e(237))/9*(-parseInt(e(229))/10)+parseInt(e(257))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(252)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function F(t,n){const e=H();return(F=function(t,n){return e[t-=215]})(t,n)}function H(){const t=["traverse","trace","constructor","table","1170424ewXfGB","call","gger","exception","length","counter","LANDMASS","10swcOpN","1799371BBvJzb","2258277sDOcQq","action","while (true) {}",'{}.constructor("return this")( )',"function *\\( *\\)","log","10694484zghfjb","__proto__","toString","debu","console","CITY_UNTRIANGULATED","test","prototype","2YdKbxp","stateObject","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","246gyPveh","74045zZaJfZ","696132lAqUhE","apply","name","info","ROADS","8bRrOBo","48933907POOCyd","string","chain","init","input"];return(H=function(){return t})()}!function(){Z(this,(function(){const t=F,n=new RegExp(t(235)),e=new RegExp(t(248),"i"),o=J(t(216));n[t(243)](o+t(215))&&e.test(o+t(217))?J():o("0")}))()}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(252)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();D(void 0,(function(){const t=F;let n;try{n=Function("return (function() "+t(234)+");")()}catch(r){n=window}const e=n[t(241)]=n.console||{},o=[t(236),"warn",t(254),"error",t(225),t(221),t(219)];for(let i=0;i<o[t(226)];i++){const n=D[t(220)][t(244)][t(247)](D),r=o[i],s=e[r]||n;n[t(238)]=D[t(247)](D),n[t(239)]=s[t(239)][t(247)](s),e[r]=n}}))();const G=async()=>{const t=F,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(218)]((n=>{const i=t;n.name===i(242)&&(e=n),n[i(253)]===i(228)&&(o=n),n[i(253)]===i(255)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function J(t){function n(t){const e=F;if(typeof t===e(258))return function(t){}[e(220)](e(233))[e(252)](e(227));1!==(""+t/t)[e(226)]||t%20==0?function(){return!0}[e(220)](e(240)+"gger")[e(223)](e(232)):function(){return!1}[e(220)]("debu"+e(224))[e(252)](e(246)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function N(t,n){const e=P();return(N=function(t,n){return e[t-=391]})(t,n)}const $=N;!function(t,n){const e=N,o=P();for(;;)try{if(675558===parseInt(e(448))/1+parseInt(e(433))/2+-parseInt(e(397))/3*(parseInt(e(406))/4)+parseInt(e(434))/5+parseInt(e(393))/6*(parseInt(e(407))/7)+parseInt(e(402))/8+-parseInt(e(446))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(428)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=N,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(445),"i"),o=q(t(424));n[t(449)](o+t(420))&&e.test(o+t(427))?q():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(428)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function P(){const t=["__proto__","debu","dispose","uGradient","action","call","DoubleSide","__csm","table","chain","uniforms","opacity","uOpacity","init","toString","material","input","apply","prototype","uColor","#112233","#ffff00","909960kQABMC","170135QvRDgB","warn","computeBoundingSphere","Color","forEach","exception","topColor","bulidingsColor","clone","counter","setStyle","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","15786855XOIzLX","gger","651699WeaOzJ","test","isArray","trace","return (function() ","value","error","constructor","#ffffff","landColor",'{}.constructor("return this")( )',"gradient","#e523ff","24IfYGaM","renderOrder","console","boundingBox","6dgvFIk","bind","color","land","primitive","8832424QhAqnq","stateObject","model","computeBoundingBox","63004LNRaJI","378693OkkgSM","object","buildingsModelCustomShader","length"];return(P=function(){return t})()}W(void 0,(function(){const t=N;let n;try{n=Function(t(452)+t(458)+");")()}catch(r){n=window}const e=n.console=n[t(395)]||{},o=["log",t(435),"info",t(454),t(439),t(419),t(451)];for(let i=0;i<o[t(410)];i++){const n=W.constructor[t(429)][t(398)](W),r=o[i],s=e[r]||n;n[t(411)]=W[t(398)](W),n.toString=s[t(425)][t(398)](s),e[r]=n}}))();const X=[$(408)],Q=y({__name:$(409),props:{model:{},bulidingsColor:{default:$(392)},landColor:{default:$(431)},topColor:{default:$(432)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=$,i=o,s=w(0),c=i[r(404)].city;c[r(394)]=1001;const u=i[r(404)][r(400)];(()=>{const t=r,{geometry:o}=c;o[t(405)](),o[t(436)]();const{max:u,min:a}=o[t(396)];if(c[t(426)][t(418)])return;const l=new h({baseMaterial:c[t(426)],vertexShader:g,fragmentShader:m,silent:!0,uniforms:{uMax:{value:u},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new n(i[t(441)])},uOpacity:{value:i[t(422)]},uLightColor:{value:new(e[t(437)])(t(456))},uTopColor:{value:new(e[t(437)])(i[t(440)])},uTime:s,uGradient:{value:i[t(391)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:e[t(417)]});c.material[t(413)](),c.material=l})();const{onLoop:a}=p();a((({delta:t})=>{s[r(453)]+=t})),b((()=>{const n=r;i[n(441)]&&c[n(426)].uniforms[n(430)][n(453)][n(444)](i[n(441)]),i[n(457)]&&((n,e)=>{const o=r;let s;"cu"===n||"land"===n&&(s=Array[o(450)](u.material)?u.material:[u[o(426)]],s[o(438)]((n=>{const r=o;n[e][r(444)](i[r(457)]),n.side=t})))})(n(400),n(399)),i[n(422)]&&(c.material[n(421)][n(423)][n(453)]=i[n(422)])})),I(i,((t,n)=>{const e=r;c.material[e(421)][e(414)][e(453)]=t[e(391)]}));const l=i[r(404)].model[r(442)]();return(t,n)=>{const e=r;return _(),v(e(401),{object:x(l)},null,8,X)}}});function q(t){function n(t){const e=N;if("string"==typeof t)return function(t){}[e(455)]("while (true) {}")[e(428)](e(443));1!==(""+t/t).length||t%20==0?function(){return!0}[e(455)]("debu"+e(447))[e(416)](e(415)):function(){return!1}[e(455)](e(412)+e(447))[e(428)](e(403)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=V;function V(t,n){const e=et();return(V=function(t,n){return e[t-=433]})(t,n)}!function(t,n){const e=V,o=et();for(;;)try{if(942e3===parseInt(e(475))/1+-parseInt(e(460))/2+-parseInt(e(459))/3+parseInt(e(487))/4+-parseInt(e(433))/5*(-parseInt(e(445))/6)+-parseInt(e(456))/7*(parseInt(e(474))/8)+-parseInt(e(484))/9*(parseInt(e(476))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(434)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Y(this,(function(){const t=V,n=new RegExp(t(447)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=rt("init");n.test(o+t(486))&&e[t(463)](o+t(442))?rt():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function("return (function() "+t(451)+");")()}catch(e){n=window}return n}(),e=n[t(449)]=n[t(449)]||{},o=[t(482),"warn",t(440),t(443),t(485),"table",t(479)];for(let r=0;r<o.length;r++){const n=tt.constructor[t(438)][t(473)](tt),i=o[r],s=e[i]||n;n.__proto__=tt.bind(tt),n.toString=s.toString.bind(s),e[i]=n}}))();const nt=[K(437)];function et(){const t=["log","clone","936864XaINbM","exception","chain","6307052HVMoJw","opacity","constructor","5LIbQdV","apply","width","innerWidth","object","prototype","stateObject","info","applyMatrix4","input","error","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","5782314BsWZvL","fromEdgesGeometry","function *\\( *\\)","buildingsLines","console","innerHeight",'{}.constructor("return this")( )',"matrix","color","uColor","material","287prEALU","gger","value","112461rjNcdt","709078JuRTNt","uOpacity","call","test","primitive","uniforms","set","action","builds","linewidth","string","Wireframe","geometry","bind","120016OKyxXc","1386450tsPcaJ","190obZdsO","renderOrder","style","trace","debu"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "];return(et=function(){return t})()}const ot=y({__name:K(448),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:K(471)}},setup(t){const e=K,u=t;let a=null,l=null;if(u.style===e(471)){const t=new o(u[e(468)].geometry);let n=(new r)[e(446)](t),c=new i({color:u[e(453)],linewidth:u[e(435)],opacity:u[e(488)],transparent:!0,depthWrite:!0,depthTest:!0});c.resolution[e(466)](window[e(436)],window[e(450)]),a=new s(n,c),a[e(441)](u.builds[e(452)][e(483)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(u[e(453)])},uOpacity:{value:u[e(488)]}},vertexShader:e(444),fragmentShader:e(481)};const t=new o(u[e(468)][e(472)]),r=new c(l);a=new LineSegments(t,r),a[e(441)](u[e(468)].matrix[e(483)]()),a.material[e(469)]=u[e(435)],a[e(477)]=1e3}return b((()=>{const t=e;"Shader"===u[t(478)]&&(u[t(453)]&&(l[t(465)][t(454)].value=new n(u[t(453)])),u[t(488)]&&(l[t(465)][t(461)][t(458)]=u[t(488)])),u[t(478)]===t(471)&&(u.color&&(a[t(455)].color=new n(u[t(453)])),u[t(488)]&&(a.material[t(488)]=u[t(488)])),u[t(435)]&&(a[t(455)].linewidth=u[t(435)])})),(t,n)=>{const o=e;return _(),v(o(464),{object:x(a)},null,8,nt)}}});function rt(t){function n(t){const e=V;if(typeof t===e(470))return function(t){}[e(489)]("while (true) {}")[e(434)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(480)+e(457))[e(462)](e(467)):function(){return!1}[e(489)](e(480)+e(457))[e(434)](e(439)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function it(t,n){const e=ct();return(it=function(t,n){return e[t-=220]})(t,n)}const st=it;function ct(){const t=["apply","bind","gger","error","75EpXpRp","constructor","prototype","TresAmbientLight","stateObject","showGridHelper","58852sfALQF","exception","TresPerspectiveCamera","console","ability","#000","#ffffff","__proto__","chain","counter","call","showAxesHelper","TresAxesHelper","warn","TresDirectionalLight","string","table","while (true) {}","function *\\( *\\)","return (function() ","2369480KkDecL","info",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","849704SUbsBk","input","showBuildings","length","disableRender","#000000","trace","2944458uLuHcS","init","autoRotate","$slots","3024371cUWRJL","toString","test","action","915054fnOTeZ","debu","log","242449SPyMUI","pagesShow"];return(ct=function(){return t})()}!function(t,n){const e=it,o=ct();for(;;)try{if(353241===-parseInt(e(238))/1+parseInt(e(220))/2+parseInt(e(235))/3+parseInt(e(250))/4*(parseInt(e(244))/5)+-parseInt(e(227))/6+parseInt(e(231))/7+-parseInt(e(270))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ut(this,(function(){const t=it,n=new RegExp(t(268)),e=new RegExp(t(273),"i"),o=dt(t(228));n[t(233)](o+t(258))&&e[t(233)](o+t(221))?dt():o("0")}))()}();const at=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(240)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();at(void 0,(function(){const t=it,n=function(){const t=it;let n;try{n=Function(t(269)+t(272)+");")()}catch(e){n=window}return n}(),e=n[t(253)]=n[t(253)]||{},o=[t(237),t(263),t(271),t(243),t(251),t(266),t(226)];for(let r=0;r<o[t(223)];r++){const n=at[t(245)][t(246)].bind(at),i=o[r],s=e[i]||n;n[t(257)]=at[t(241)](at),n[t(232)]=s.toString[t(241)](s),e[i]=n}}))();const lt={key:1,args:[1e3],position:[0,19,0]},ft={key:2,args:[6e3,100],position:[0,19,0]},pt=y({__name:st(239),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=st;let e,o;const r=t,i=C({clearColor:n(225),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:a,toneMapping:l,disableRender:r[n(224)]}),s=C({autoRotate:r[n(229)],enableDamping:!0});let c=null;r.showBuildings&&([e,o]=S((()=>G())),e=await e,o(),c=e);const f=w(),p=w();return(t,e)=>{const o=n,u=A("TresCanvas");return _(),O(u,E({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:R((()=>[B(o(252),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(x(d),L(k(s)),null,16),e[0]||(e[0]=B(o(247),{color:o(256)},null,-1)),e[1]||(e[1]=B(o(264),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[o(222)]&&x(c)?(_(),v(M,{key:0},[j(Q,{model:x(c)},null,8,["model"]),j(ot,{builds:x(c).city,color:o(255)},null,8,["builds"])],64)):T("",!0),z(t[o(230)],o(254)),r[o(261)]?(_(),v(o(262),lt)):T("",!0),r[o(249)]?(_(),v("TresGridHelper",ft)):T("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=it;if(typeof t===e(265))return function(t){}[e(245)](e(267))[e(240)](e(259));1!==(""+t/t)[e(223)]||t%20==0?function(){return!0}[e(245)](e(236)+e(242))[e(260)](e(234)):function(){return!1}.constructor(e(236)+e(242))[e(240)](e(248)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Q as _,ot as a,pt as b,G as l};

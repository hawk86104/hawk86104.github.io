var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,cb as w,cc as M,K as R,h as E,b as A,e as T,_ as z,bO as D,l as P,a_ as C,V as O,bp as F,z as B,aj as k,B as j,c as U,aK as N,g as H,M as L,ar as Z,a9 as G,a as W}from"./three.Vxh8Czkt1741490461506.js";import{m as V,l as $,e as q}from"./@tresjs.rE98Wm941741490461506.js";import{R as Y}from"./three-stdlib.2KPeCEvi1741490461506.js";import{y as X,b as K,w as J,a as Q,u as nn,d as tn,W as en,a3 as rn,a0 as on,o as an,H as cn,J as sn,M as un,a7 as ln,a2 as fn,q as pn,f as dn,N as hn,a8 as vn,r as mn,B as gn,v as _n,s as yn,F as xn,a6 as In,m as bn}from"./@vue.NRI7TcgI1741490461506.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.VkB-hYkG1741490461506.js";import{h as Rn}from"./object-hash.bPWYxSd_1741490461506.js";var En=Pn;function An(){var n=["218382BtWOWf","chain","warn","597157tgSICS","730GYZHAh","apply","input","while (true) {}","stateObject","5tEIusf","table","traverse","exception","gger","action","debu","string","map","__proto__","geometry","47mfjkMa","4387453KUWXJx","toString",'{}.constructor("return this")( )',"log","24VxZdsf","8eyaaEs","add","material","prototype","trace","31684kYhrPD","virtualScene","console","init","destructor","constructor","remove","bind","counter","20379450nLnqcQ","error","47727RUAvpa","12885XRqolp","dispose","496FQxkDZ"];return(An=function(){return n})()}!function(n,t){for(var e=Pn,r=An();;)try{if(413935===-parseInt(e(239))/1*(parseInt(e(250))/2)+parseInt(e(262))/3*(parseInt(e(264))/4)+-parseInt(e(274))/5*(parseInt(e(265))/6)+parseInt(e(240))/7*(-parseInt(e(245))/8)+-parseInt(e(261))/9*(parseInt(e(269))/10)+parseInt(e(268))/11*(parseInt(e(244))/12)+parseInt(e(259))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=Pn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=On(n(253));t.test(r+n(266))&&e.test(r+n(271))?On():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zn(void 0,(function(){var n,t=Pn;try{n=Function("return (function() "+t(242)+");")()}catch(s){n=window}for(var e=n[t(252)]=n[t(252)]||{},r=[t(243),t(267),"info",t(260),t(277),t(275),t(249)],o=0;o<r.length;o++){var i=zn[t(255)][t(248)][t(257)](zn),a=r[o],c=e[a]||i;i[t(283)]=zn[t(257)](zn),i[t(241)]=c[t(241)][t(257)](c),e[a]=i}}))();class Dn extends s{constructor(){var n=Pn;super(),this[n(251)]=null,this.virtualScene=new u}[En(246)](...n){var t=En;return this[t(251)][t(246)](...n),this}[En(254)](){var n=En;this[n(251)][n(276)]((t=>{var e=n;t instanceof l&&(t[e(238)][e(263)](),t[e(247)][e(263)](),t.material[e(282)]&&t[e(247)].map[e(263)](),this[e(251)][e(256)](t))})),this.virtualScene=null}}function Pn(n,t){var e=An();return(Pn=function(n,t){return e[n-=238]})(n,t)}const Cn=Dn;function On(n){function t(n){var e=Pn;if(typeof n===e(281))return function(n){}[e(255)](e(272)).apply(e(258));1!==(""+n/n).length||n%20==0?function(){return!0}[e(255)](e(280)+e(278)).call(e(279)):function(){return!1}[e(255)]("debu"+e(278))[e(270)](e(273)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Bn;function Bn(n,t){const e=Nn();return(Bn=function(n,t){return e[n-=325]})(n,t)}!function(n,t){const e=Bn,r=Nn();for(;;)try{if(576042===parseInt(e(328))/1+parseInt(e(360))/2+parseInt(e(361))/3+parseInt(e(333))/4*(-parseInt(e(339))/5)+-parseInt(e(337))/6*(parseInt(e(366))/7)+parseInt(e(329))/8*(-parseInt(e(358))/9)+-parseInt(e(363))/10*(-parseInt(e(340))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Bn,t=new RegExp(n(357)),e=new RegExp(n(348),"i"),r=Hn(n(364));t[n(345)](r+n(334))&&e[n(345)](r+n(370))?Hn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Bn,t=function(){const n=Bn;let t;try{t=Function(n(356)+n(353)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(346)]||{},r=[n(338),n(369),n(372),n(336),n(341),n(344),"trace"];for(let o=0;o<r[n(362)];o++){const t=jn[n(342)][n(349)][n(327)](jn),i=r[o],a=e[i]||t;t[n(354)]=jn[n(327)](jn),t[n(351)]=a[n(351)][n(327)](a),e[i]=t}}))();const Un={sunset:Fn(343),studio:Fn(332),city:Fn(347),umbrellas:Fn(359),night:"outdoor/satara_night_1k.hdr",forest:Fn(330),snow:Fn(368),dawn:Fn(355),hangar:Fn(367),urban:Fn(326),modern:Fn(325),shangai:"city/shanghai_bund_1k.hdr"};function Nn(){const n=["warn","input","string","info","city/modern_buildings_2_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","bind","1060646qpTTan","237016JCqRhR","outood/mossy_forest_1k.hdr","action","studio/poly_haven_studio_1k.hdr","2060okXIvD","chain","gger","error","11250hHGivF","log","7495VucSti","399300HyhERK","exception","constructor","venice/venice_sunset_1k.hdr","table","test","console","city/canary_wharf_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","call","toString","debu",'{}.constructor("return this")( )',"__proto__","kiara/kiara_1_dawn_1k.hdr","return (function() ","function *\\( *\\)","72LKtOSh","outdoor/outdoor_umbrellas_1k.hdr","340548AytCYU","1480194qNmRMv","length","270zNHIGJ","init","apply","4179fBJjHn","indoor/small_hangar_01_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr"];return(Nn=function(){return n})()}function Hn(n){function t(n){const e=Bn;if(typeof n===e(371))return function(n){}.constructor("while (true) {}")[e(365)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(342)](e(352)+e(335))[e(350)](e(331)):function(){return!1}.constructor(e(352)+e(335))[e(365)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Vn;!function(n,t){const e=Vn,r=Gn();for(;;)try{if(380754===-parseInt(e(481))/1+parseInt(e(490))/2+-parseInt(e(492))/3+-parseInt(e(482))/4*(-parseInt(e(494))/5)+parseInt(e(510))/6+-parseInt(e(480))/7+parseInt(e(508))/8*(-parseInt(e(514))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(491)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(){const n=["setPath","isColor","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","error","value","toString","debu","init","call","3664MkRAWu","table","3818316BQMqvA","bind","test","backgroundBlurriness","693Cblbqv","info","join","prototype","exception","constructor","log","Preset must be one of: ","background","613564iCzFXF","745690xGKbaw","1951308EOJRqC","trace","gger","string","mapping","length","Failed to load environment map: ","function *\\( *\\)","1173582hBLOyk","apply","1384926SiYERw","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","5jfASnY","while (true) {}",'{}.constructor("return this")( )'];return(Gn=function(){return n})()}!function(){Zn(this,(function(){const n=Vn,t=new RegExp(n(489)),e=new RegExp(n(500),"i"),r=qn(n(506));t[n(512)](r+"chain")&&e.test(r+"input")?qn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(491)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Gn();return(Vn=function(n,t){return e[n-=479]})(n,t)}Wn(void 0,(function(){const n=Vn;let t;try{t=Function("return (function() "+n(496)+");")()}catch(o){t=window}const e=t.console=t[n(499)]||{},r=[n(520),"warn",n(515),n(502),n(518),n(509),n(483)];for(let i=0;i<r.length;i++){const t=Wn[n(519)][n(517)].bind(Wn),o=r[i],a=e[o]||t;t.__proto__=Wn[n(511)](Wn),t[n(504)]=a[n(504)].bind(a),e[o]=t}}))();const $n=Ln(493);function qn(n){function t(n){const e=Vn;if(typeof n===e(485))return function(n){}.constructor(e(495))[e(491)](e(501));1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}[e(519)](e(505)+e(484))[e(507)]("action"):function(){return!1}[e(519)](e(505)+e(484))[e(491)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Yn(n,t){const e=Jn();return(Yn=function(n,t){return e[n-=243]})(n,t)}!function(n,t){const e=Yn,r=Jn();for(;;)try{if(542290===parseInt(e(293))/1+-parseInt(e(254))/2*(-parseInt(e(275))/3)+parseInt(e(278))/4+parseInt(e(264))/5*(-parseInt(e(281))/6)+-parseInt(e(270))/7*(-parseInt(e(259))/8)+-parseInt(e(283))/9*(-parseInt(e(286))/10)+parseInt(e(260))/11*(-parseInt(e(290))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(279)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Yn,t=new RegExp(n(258)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=nt(n(246));t[n(257)](r+"chain")&&e[n(257)](r+n(249))?nt():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(279)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(){const n=["stateObject","40WxkhSq","constructor","log","bind","60Nikosg","background","$slots","262015WHwZHN","console",'{}.constructor("return this")( )',"trace","length","action","near","counter","init","string","warn","input","symbol","texture","debu","default","2VlwAAf","update","toString","test","function *\\( *\\)","56aHgAHA","4715051GqZwmT","useDefaultScene","envSence","dispose","25KCQSjb","frames","call","isArray","__proto__","type","305809zElBrT","environment","gger","prototype","while (true) {}","2816409eoiXKK","virtualScene","value","2072648JiMXgi","apply","resolution","320580RGeuab","return (function() ","2087676KTxqyd","table"];return(Jn=function(){return n})()}Kn(void 0,(function(){const n=Yn,t=function(){const n=Yn;let t;try{t=Function(n(282)+n(295)+");")()}catch(e){t=window}return t}(),e=t[n(294)]=t[n(294)]||{},r=[n(288),n(248),"info","error","exception",n(284),n(296)];for(let o=0;o<r[n(297)];o++){const t=Kn[n(287)][n(273)][n(289)](Kn),i=r[o],a=e[i]||t;t[n(268)]=Kn[n(289)](Kn),t[n(256)]=a[n(256)].bind(a),e[i]=t}}))();const Qn=tn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=K(null),x=null;const I=K(null);en((()=>{var n,t;const e=Yn;null==(n=I[e(277)])||n.destructor(),null==(t=y[e(277)])||t[e(263)]()}));const{onBeforeLoop:b}=q();let S=1;b((()=>{const n=Yn;x&&I[n(277)]&&y[n(277)]&&(i[n(265)]===1/0||S<i.frames)&&(i[n(261)]?x[n(255)](s[n(277)],u[n(277)]):x[n(255)](s.value,ln(I.value[n(276)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=K([]),path:s=K(""),background:u}=X(n);J(n,(()=>{o()}));const l=K(null),h=Q((()=>Array.isArray(c[e(503)]))),v=Q((()=>h[e(503)]?f:Y));return J([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(503)])){try{l.value=await $(v[r(503)],h[r(503)]?[...nn(n)]:nn(n),(n=>{t&&n[r(497)](nn(t))}))}catch(o){throw new Error(r(488)+o)}l.value&&(l[r(503)][r(486)]=h[r(503)]?p:d)}}),{immediate:!0}),J(l,(n=>{r[e(503)]&&n&&(r.value.environment=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(503)]){let e=(null==t?void 0:t[i(503)])?t.value.texture:o,a=r[i(503)][i(479)];!(null==a?void 0:a[i(498)])&&(a=void 0),r[i(503)][i(479)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(503)]),(n=>{const t=e;r[t(503)]&&n&&(r[t(503)][t(513)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(503)]),(async n=>{const t=e;if(n&&n in Un){const e=$n,i=Un[n];try{l.value=await $(Y,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(488)+r)}l[t(503)]&&l.value&&(l[t(503)][t(486)]=d),o()}else if(n&&!(n in Un))throw new Error(t(521)+Object.keys(Un)[t(516)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(277)][t(271)]=n.texture,i[t(291)]&&(u.value[t(291)]=n[t(251)])):(u.value.environment=w[t(277)],i[t(291)]&&(u[t(277)][t(291)]=w.value))};J(w,(n=>{y.value&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const R=()=>{var n;const t=Yn;null==(n=y[t(277)])||n[t(263)](),y[t(277)]=new v(i[t(280)]),x=new m(i[t(244)],i.far,y.value),i[t(261)]?(y[t(277)].texture.type=g,y[t(277)][t(251)].generateMipmaps=!1,y[t(277)][t(251)].minFilter=_,y[t(277)][t(251)].magFilter=_):y[t(277)][t(251)].type=h,M(y[t(277)])};return J((()=>on()[e(253)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(277)][o(251)][o(269)]!==h)&&(l=n(),Array[o(267)](l)&&l[o(297)]>0&&typeof(null==(t=l[0])?void 0:t[o(269)])!==o(250))?R():(null==(r=y.value)||r.dispose(),y[o(277)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(277)]=w,J((()=>i[e(261)]),(n=>{y[e(277)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:r(262),ref:I},[sn(n[r(292)],"default")],512)):un("",!0)}}});function nt(n){function t(n){const e=Yn;if(typeof n===e(247))return function(n){}[e(287)](e(274))[e(279)](e(245));1!==(""+n/n).length||n%20==0?function(){return!0}[e(287)]("debu"+e(272))[e(266)](e(243)):function(){return!1}.constructor(e(252)+e(272))[e(279)](e(285)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=ut;!function(n,t){const e=ut,r=st();for(;;)try{if(810942===-parseInt(e(282))/1*(parseInt(e(304))/2)+parseInt(e(292))/3+-parseInt(e(314))/4+-parseInt(e(291))/5*(parseInt(e(311))/6)+-parseInt(e(289))/7+-parseInt(e(330))/8+parseInt(e(320))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=ut,t=new RegExp(n(283)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ft(n(312));t[n(305)](r+"chain")&&e.test(r+"input")?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=ut,t=function(){const n=ut;let t;try{t=Function(n(316)+n(287)+");")()}catch(e){t=window}return t}(),e=t[n(285)]=t.console||{},r=["log","warn",n(315),n(288),"exception",n(328),"trace"];for(let o=0;o<r[n(290)];o++){const t=rt[n(319)][n(298)][n(313)](rt),i=r[o],a=e[i]||t;t[n(281)]=rt.bind(rt),t[n(303)]=a[n(303)][n(313)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[tt(301),tt(294),tt(321),tt(306)];function st(){const n=["10456936rUZPpV","__proto__","1TwbYHZ","function *\\( *\\)","needsUpdate","console","intensity",'{}.constructor("return this")( )',"error","3706479HqWIiF","length","5850500PDGmRX","2144391gymQaM","gger","map","TresRingGeometry","value","TresMesh","prototype","circle","debu","toneMapped","call","toString","799564ifgfgJ","test","color","material","action","stateObject","TresMeshBasicMaterial","6RworTR","init","bind","790152ftDxZw","info","return (function() ","rect","apply","constructor","33301611QDrsHt","side","TresPlaneGeometry","string","from","multiplyScalar","index","while (true) {}","table","set"];return(st=function(){return n})()}function ut(n,t){const e=st();return(ut=function(n,t){return e[n-=281]})(n,t)}const lt=tn({__name:tt(326),props:{args:{default:null},from:{default:tt(317)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=K();return fn((()=>{const n=ut;r[n(296)]&&(r[n(296)][n(306)][n(325)](e[n(286)]),r[n(296)].needsUpdate=!0)})),J((()=>e[t(306)]),(n=>{const o=t;r[o(296)]&&(r.value[o(306)][o(329)](n),r[o(296)].color[o(325)](e[o(286)]),r[o(296)][o(284)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(297),null,[e.from===i(299)?(an(),cn(i(295),ot)):"ring"===e[i(324)]?(an(),cn(i(295),it)):e[i(324)]===i(317)?(an(),cn(i(322),at)):(an(),dn(e.from,{key:3,args:e})),hn(i(310),{ref_key:i(307),ref:r,toneMapped:n[i(301)],map:n[i(294)],side:nn(x),color:n[i(306)]},null,8,ct)])}}});function ft(n){function t(n){const e=ut;if(typeof n===e(323))return function(n){}[e(319)](e(327))[e(318)]("counter");1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}[e(319)](e(300)+e(293))[e(302)](e(308)):function(){return!1}[e(319)](e(300)+e(293)).apply(e(309)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(){const n=["console","constructor","exception","function *\\( *\\)","clear","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setRenderTarget","stateObject","prototype","width","apply","4136820sPUOsm","error","bind","debu","init","201462nYlTdw","while (true) {}","return (function() ","depthTexture","string","format","toString","9xZQOAw","trace","8IGGVzx","length","71766fIYtgo","450828zMvPXX","15865091DXAoYI","table","116837xGtKuk","value","170RuwhvQ","2768920uZujoi","type","counter","chain","dispose","gger","render","info","height","__proto__","3tFmsss","input","warn","test","12dhFqmX"];return(pt=function(){return n})()}!function(n,t){const e=vt,r=pt();for(;;)try{if(390271===-parseInt(e(494))/1+-parseInt(e(482))/2*(-parseInt(e(510))/3)+-parseInt(e(500))/4+parseInt(e(499))/5*(-parseInt(e(493))/6)+-parseInt(e(497))/7*(parseInt(e(491))/8)+parseInt(e(489))/9*(parseInt(e(477))/10)+-parseInt(e(495))/11*(-parseInt(e(514))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=vt,t=new RegExp(n(518)),e=new RegExp(n(471),"i"),r=gt(n(481));t[n(513)](r+n(503))&&e[n(513)](r+n(511))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=pt();return(vt=function(n,t){return e[n-=471]})(n,t)}function mt(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?X(n):X(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=vt;null==(n=t[a(498)])||n[a(504)](),t.value=new I((null==r?void 0:r[a(498)])||p.width.value,(null==e?void 0:e[a(498)])||p[a(508)][a(498)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(498)])&&(t[a(498)][a(485)]=new S((null==r?void 0:r.value)||p[a(475)][a(498)],(null==e?void 0:e[a(498)])||p[a(508)].value),t[a(498)][a(485)][a(487)]=w,t.value[a(485)][a(501)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(498)])&&(l[n(498)].setRenderTarget(ln(t.value)),l[n(498)][n(519)](),l[n(498)][n(506)](ln(f[n(498)]),ln(u[n(498)])),l[n(498)][n(472)](null))})),gn((()=>{var n;const e=vt;null==(n=t[e(498)])||n[e(504)]()})),t}function gt(n){function t(n){const e=vt;if(typeof n===e(486))return function(n){}[e(516)](e(483)).apply(e(502));1!==(""+n/n)[e(492)]||n%20==0?function(){return!0}.constructor("debu"+e(505)).call("action"):function(){return!1}[e(516)](e(480)+e(505))[e(476)](e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(484)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(515)]=t.console||{},r=["log",n(512),n(507),n(478),n(517),n(496),n(490)];for(let o=0;o<r[n(492)];o++){const t=ht.constructor[n(474)][n(479)](ht),i=r[o],a=e[i]||t;t[n(509)]=ht[n(479)](ht),t.toString=a[n(488)][n(479)](a),e[i]=t}}))();const _t=yt;function yt(n,t){const e=xt();return(yt=function(n,t){return e[n-=306]})(n,t)}function xt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","side","gger","console","fboResolution","while (true) {}","18JPVDcB","2034245ECpzWw","TresMeshTransmissionMaterial","thickness","table","98wpdYWq","debu","counter","exception","toString","stateObject","test","envMapIntensity","info","action","render","1065291EVqhAh","610FodUVG","uuid","28212Xihawa","warn","background",'{}.constructor("return this")( )',"constructor","456869lRcdmG","function *\\( *\\)","index","apply","string","setRenderTarget","147040hmvkPm","27EMAirW","buffer","bind","isMesh","texture","init","120703lMFMlD","value","chain","backside","trace","material","toneMapping","traverse","__proto__","input","1887336WkLzPw"];return(xt=function(){return n})()}!function(n,t){const e=yt,r=xt();for(;;)try{if(921799===parseInt(e(338))/1+parseInt(e(327))/2*(parseInt(e(341))/3)+parseInt(e(352))/4+-parseInt(e(323))/5+parseInt(e(322))/6*(-parseInt(e(346))/7)+-parseInt(e(315))/8*(parseInt(e(353))/9)+-parseInt(e(339))/10*(-parseInt(e(359))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){It(this,(function(){const n=yt,t=new RegExp(n(347)),e=new RegExp(n(316),"i"),r=Mt(n(358));t[n(333)](r+n(307))&&e[n(333)](r+n(314))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=yt,t=function(){const n=yt;let t;try{t=Function("return (function() "+n(344)+");")()}catch(e){t=window}return t}(),e=t[n(319)]=t[n(319)]||{},r=["log",n(342),n(335),"error",n(330),n(326),n(309)];for(let o=0;o<r.length;o++){const t=bt.constructor.prototype[n(355)](bt),i=r[o],a=e[i]||t;t[n(313)]=bt.bind(bt),t[n(331)]=a[n(331)][n(355)](a),e[i]=t}}))();const St=["buffer","side"],wt=tn({__name:_t(348),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=q(),p=mt({width:u[e(320)],height:u[e(320)],isLoop:!1}),d=mt({width:u[e(320)],height:u[e(320)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(306)]=function(n,t){const e=yt;let r;return n[e(312)]((n=>{const o=e;n[o(356)]&&n.material&&n[o(310)][o(340)]===t&&(r=n)})),r}(i[n(306)],r[n(306)][n(340)])})),f((({elapsed:n})=>{const t=e;r[t(306)].time=n,r[t(306)][t(354)]===d[t(306)][t(357)]&&s[t(306)]&&(m=a[t(306)][t(311)],h=i[t(306)][t(343)],v=r.value[t(334)],g=s.value[t(310)].side,s[t(306)][t(310)]=l,u[t(308)]&&(a.value[t(351)](p[t(306)]),a.value[t(337)](i.value,c[t(306)]),s[t(306)].material=r.value,s.value[t(310)][t(325)]=u.backsideThickness,s.value[t(310)].buffer=p.value[t(357)],s.value.material[t(317)]=R,s[t(306)][t(310)][t(334)]=0),a[t(306)].setRenderTarget(d[t(306)]),a.value[t(337)](i.value,c[t(306)]),s[t(306)][t(310)][t(354)]=d[t(306)][t(357)],s[t(306)].material=r[t(306)],s[t(306)][t(310)][t(325)]=u[t(325)],s[t(306)][t(310)][t(317)]=g,s[t(306)].material[t(334)]=v,i[t(306)][t(343)]=h,a[t(306)][t(351)](null),a[t(306)].toneMapping=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn(o(324),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:nn(d)[o(357)],side:nn(x)},null,8,St)}}});function Mt(n){function t(n){const e=yt;if(typeof n===e(350))return function(n){}[e(345)](e(321))[e(349)](e(329));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(328)+e(318)).call(e(336)):function(){return!1}[e(345)](e(328)+e(318))[e(349)](e(332)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=At;!function(n,t){const e=At,r=zt();for(;;)try{if(864991===-parseInt(e(117))/1*(parseInt(e(115))/2)+parseInt(e(113))/3+parseInt(e(152))/4+parseInt(e(123))/5+parseInt(e(125))/6+parseInt(e(146))/7*(parseInt(e(130))/8)+parseInt(e(106))/9*(-parseInt(e(110))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(107)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=zt();return(At=function(n,t){return e[n-=101]})(n,t)}!function(){Et(this,(function(){const n=At,t=new RegExp(n(111)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pt(n(147));t[n(132)](r+n(134))&&e[n(132)](r+n(124))?Pt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(107)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(){const n=["gger","back","console","1825607EgAGkG","init","getBoundingSphere","index","disableY","max","1649476XrKcRz","__proto__","precise","TresGroup","outer","info","right","disable","error","return (function() ","inner","trace",'{}.constructor("return this")( )',"576cvWFHn","apply","constructor","while (true) {}","54700uDjnzU","function *\\( *\\)","counter","3667392TCELJJ","identity","475854KzZUBd","debu","4gsuVSs","value","bottom","matrixWorld","prototype","length","608790MXhzMg","input","896322tfjHKI","log","gref","min","front","8tMhVya","set","test","toString","chain","string","table","disableZ","left","exception","stateObject","call","bind"];return(zt=function(){return n})()}Tt(void 0,(function(){const n=At;let t;try{t=Function(n(102)+n(105)+");")()}catch(o){t=window}const e=t[n(145)]=t.console||{},r=[n(126),"warn",n(157),n(101),n(139),n(136),n(104)];for(let i=0;i<r[n(122)];i++){const t=Tt.constructor[n(121)].bind(Tt),o=r[i],a=e[o]||t;t[n(153)]=Tt[n(142)](Tt),t.toString=a[n(133)].bind(a),e[o]=t}}))();const Dt=tn({__name:Rt(149),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return pn((()=>{const n=At;if(!r[n(118)])return;if(!o[n(118)])return;r[n(118)][n(120)][n(114)]();const e=(new E).setFromObject(o[n(118)],t[n(154)]),i=new A,a=new T,c=e[n(151)].x-e.min.x,s=e[n(151)].y-e[n(128)].y,u=e[n(151)].z-e[n(128)].z;e.getCenter(i),e[n(148)](a);const l=t.top?s/2:t[n(119)]?-s/2:0,f=t[n(138)]?-c/2:t[n(158)]?c/2:0,p=t[n(129)]?u/2:t[n(144)]?-u/2:0;r[n(118)].position[n(131)](t[n(159)]||t.disableX?0:-i.x+f,t[n(159)]||t[n(150)]?0:-i.y+l,t[n(159)]||t[n(137)]?0:-i.z+p)})),(n,t)=>{const i=At;return an(),cn("TresGroup",{ref_key:i(127),ref:e},[hn(i(155),{ref_key:i(156),ref:r},[hn(i(155),{ref_key:i(103),ref:o},[sn(n.$slots,"default")],512)],512)],512)}}});function Pt(n){function t(n){const e=At;if(typeof n===e(135))return function(n){}[e(108)](e(109))[e(107)](e(112));1!==(""+n/n).length||n%20==0?function(){return!0}[e(108)](e(116)+"gger")[e(141)]("action"):function(){return!1}[e(108)](e(116)+e(143))[e(107)](e(140)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=Bt;function Ot(){const n=["Vector3","group","constructor","bind","8140125dvkHUu","backsideIOR","while (true) {}","chain","default","worldRadius","apply","15707544YOdXIh","576696HUEYqd","gger","__proto__","object","lightSource","action","8242056rXrzIT","stateObject","color","input","debu","TresGroup","scene","function *\\( *\\)","length","ior","prototype","table","warn","call","exception","6049216iHQQjo","test","console","resolution","301700mHmJmI","error","value","init","helper","log","add","params","intensity","7udRJCs","far","primitive","causticsOnly","toString","set","$slots","2317232PRWdpN","counter","update"];return(Ot=function(){return n})()}!function(n,t){const e=Bt,r=Ot();for(;;)try{if(898014===-parseInt(e(547))/1+-parseInt(e(507))/2+-parseInt(e(522))/3+parseInt(e(543))/4+parseInt(e(514))/5+parseInt(e(528))/6*(parseInt(e(500))/7)+-parseInt(e(521))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Ot();return(Bt=function(n,t){return e[n-=496]})(n,t)}!function(){Ft(this,(function(){const n=Bt,t=new RegExp(n(535)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ht(n(550));t[n(544)](r+n(517))&&e.test(r+n(531))?Ht():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(520)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Bt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(545)]=t[n(545)]||{},r=[n(496),n(540),"info",n(548),n(542),n(539),"trace"];for(let o=0;o<r.length;o++){const t=kt.constructor[n(538)][n(513)](kt),i=r[o],a=e[i]||t;t[n(524)]=kt[n(513)](kt),t.toString=a[n(504)][n(513)](a),e[i]=t}}))();const jt=[Ct(525)],Ut=[Ct(525)],Nt=tn({__name:"index",props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=V(),o=Mn(r[t(549)],{frames:1/0,resolution:e[t(546)],worldRadius:e[t(519)]});o[t(498)].backside=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o[e(534)][e(497)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(509)]()})),fn((()=>{const n=t;e.color&&o[n(498)][n(530)].set(e[n(530)]),e[n(537)]&&(o[n(498)][n(537)]=e[n(537)]),e[n(515)]&&(o[n(498)][n(515)]=e[n(515)]),e[n(501)]&&(o[n(498)][n(501)]=e[n(501)]),e.worldRadius&&(o.params.worldRadius=e[n(519)]),e[n(499)]&&(o[n(498)].intensity=e[n(499)])})),J((()=>e[t(503)]),(n=>{const e=t;o[e(498)][e(503)]=n})),J((()=>e[t(526)]),(n=>{const e=t;n&&o.params[e(526)]instanceof z[e(510)]&&o.params.lightSource[e(505)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(533),{ref_key:r(511),ref:i},[sn(n[r(506)],r(518))],512),hn("primitive",{object:nn(o)[r(511)],position:[0,.003,0]},null,8,jt),hn(r(502),{object:nn(o)[r(551)],visible:!1},null,8,Ut)],64)}}});function Ht(n){function t(n){const e=Bt;if("string"==typeof n)return function(n){}[e(512)](e(516))[e(520)](e(508));1!==(""+n/n)[e(536)]||n%20==0?function(){return!0}[e(512)](e(532)+e(523))[e(541)](e(527)):function(){return!1}[e(512)](e(532)+"gger").apply(e(529)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Vt();for(;;)try{if(596059===-parseInt(e(205))/1+parseInt(e(223))/2*(-parseInt(e(195))/3)+parseInt(e(240))/4*(-parseInt(e(239))/5)+-parseInt(e(230))/6*(parseInt(e(212))/7)+parseInt(e(210))/8+-parseInt(e(217))/9*(parseInt(e(241))/10)+parseInt(e(220))/11*(parseInt(e(194))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(207)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lt(this,(function(){const n=Gt,t=new RegExp(n(226)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$t("init");t.test(r+"chain")&&e.test(r+n(224))?$t():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(n,t){const e=Vt();return(Gt=function(n,t){return e[n-=189]})(n,t)}Zt(void 0,(function(){const n=Gt;let t;try{t=Function(n(209)+n(237)+");")()}catch(o){t=window}const e=t[n(227)]=t[n(227)]||{},r=[n(208),n(189),"info",n(214),n(202),"table",n(204)];for(let i=0;i<r[n(219)];i++){const t=Zt[n(232)][n(234)][n(236)](Zt),o=r[i],a=e[o]||t;t[n(199)]=Zt[n(236)](Zt),t[n(213)]=a[n(213)][n(236)](a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=z[r(233)][r(218)];return z[r(233)][r(218)]=z[r(233)].shadowmap_pars_fragment[r(198)]("#ifdef USE_SHADOWMAP",r(197)+t+r(229)+n+r(221)+e+r(190)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(215)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }").replace("#if defined( SHADOWMAP_TYPE_PCF )",r(206)),(n,t,e)=>{D[r(218)]=o,function(n,t,e){const r=Gt;t[r(192)]((t=>{const e=r;t[e(225)]&&(Array.isArray(t[e(225)])?t.material[e(191)]((t=>{const r=e;n[r(216)][r(222)](t),t[r(235)]()})):(n[e(216)][e(222)](t[e(225)]),t.material[e(235)]()))})),n[r(238)].programs[r(219)]=0,n[r(196)](t,e)}(n,t,e)}};function Vt(){const n=["766280qFOlMF","string","5068ZWsUEs","toString","error","; i++) {\n        vogelSample = vogelDiskSample(j, ","properties","99yKuBSy","shadowmap_pars_fragment","length","27269dJpRdT",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","remove","10MSnkLC","input","material","function *\\( *\\)","console","stateObject",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","7986vbSUNf","call","constructor","ShaderChunk","prototype","dispose","bind",'{}.constructor("return this")( )',"info","30EiBFLe","192484ZReMBy","859110NcHafr","warn","; i ++) {\n        offset = (vogelDiskSample(j, ","forEach","traverse","while (true) {}","19236Hutatd","78108rOhzDi","compile","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","replace","__proto__","gger","debu","exception","counter","trace","1145992PWQgJa","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","apply","log","return (function() "];return(Vt=function(){return n})()}function $t(n){function t(n){const e=Gt;if(typeof n===e(211))return function(n){}[e(232)](e(193))[e(207)](e(203));1!==(""+n/n)[e(219)]||n%20==0?function(){return!0}[e(232)](e(201)+e(200))[e(231)]("action"):function(){return!1}.constructor(e(201)+"gger").apply(e(228)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function qt(){const n=["gger","value","debu","toString","832wuiBGO","info","9xOBnmo","chain","4966401AhvoGN",'{}.constructor("return this")( )',"9Tgppmx","length","4723894rHCafz","return (function() ","53905iGRQYB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","572048eUNYAz","stateObject","function *\\( *\\)","apply","console","constructor","traverse","error","126xKYbnv","bind","init","3850920kkXiHH","call","counter","prototype","test","while (true) {}","log","402SEkhSl","767132ZSISym","warn","string"];return(qt=function(){return n})()}!function(n,t){const e=Kt,r=qt();for(;;)try{if(355221===parseInt(e(279))/1*(parseInt(e(249))/2)+parseInt(e(251))/3*(-parseInt(e(280))/4)+parseInt(e(259))/5*(parseInt(e(269))/6)+parseInt(e(257))/7+-parseInt(e(261))/8*(parseInt(e(255))/9)+parseInt(e(272))/10+-parseInt(e(253))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Kt,t=new RegExp(n(263)),e=new RegExp(n(260),"i"),r=Qt(n(271));t[n(276)](r+n(252))&&e.test(r+"input")?Qt():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(264)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(n,t){const e=qt();return(Kt=function(n,t){return e[n-=247]})(n,t)}Xt(void 0,(function(){const n=Kt,t=function(){const n=Kt;let t;try{t=Function(n(258)+n(254)+");")()}catch(e){t=window}return t}(),e=t[n(265)]=t[n(265)]||{},r=[n(278),n(281),n(250),n(268),"exception","table","trace"];for(let o=0;o<r[n(256)];o++){const t=Xt[n(266)][n(275)].bind(Xt),i=r[o],a=e[i]||t;t.__proto__=Xt[n(270)](Xt),t[n(248)]=a[n(248)].bind(a),e[i]=t}}))();const Jt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(284)],o[t(284)],e[t(284)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(284)][t(267)]((n=>{n instanceof l&&n.material.dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=Kt;if(typeof n===e(282))return function(n){}.constructor(e(277))[e(264)](e(274));1!==(""+n/n)[e(256)]||n%20==0?function(){return!0}[e(266)](e(247)+e(283))[e(273)]("action"):function(){return!1}.constructor(e(247)+"gger").apply(e(262)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=ae;!function(n,t){const e=ae,r=ee();for(;;)try{if(214111===parseInt(e(409))/1+-parseInt(e(390))/2*(-parseInt(e(399))/3)+-parseInt(e(375))/4+parseInt(e(391))/5+parseInt(e(405))/6*(parseInt(e(372))/7)+-parseInt(e(389))/8+-parseInt(e(367))/9*(parseInt(e(366))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(382)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(){const n=["colorspace_fragment","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","copy","1641VBihod","call","length","replace","chain","prototype","6bYnCjk","toString","__proto__","setTexelSize","175101JColLP","toneMapped","set","stateObject","bind","10nLzCZJ","4190265MJFWBy","halfTexelSize","info","value","while (true) {}","1174796ZybtfV","trace","debu","894436tqgprF","test","constructor","string","function *\\( *\\)","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","action","apply","return (function() ","setResolution","table","encodings_fragment",'{}.constructor("return this")( )',"error","2109088WpqGxL","1544VaenmE","2008640duchfB","gger","uniforms","log"];return(ee=function(){return n})()}!function(){te(this,(function(){const n=ae,t=new RegExp(n(379)),e=new RegExp(n(396),"i"),r=ce(n(397));t[n(376)](r+n(403))&&e[n(376)](r+"input")?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(382)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();re(void 0,(function(){const n=ae,t=function(){const n=ae;let t;try{t=Function(n(383)+n(387)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(394),"warn",n(369),n(388),"exception",n(385),n(373)];for(let o=0;o<r.length;o++){const t=re.constructor[n(404)][n(413)](re),i=r[o],a=e[i]||t;t[n(407)]=re[n(413)](re),t[n(406)]=a[n(406)].bind(a),e[i]=t}}))();const oe=parseInt(B[ne(402)](/\D+/g,""));class ie extends P{constructor(n=new O){const t=ne;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(380)+t(oe>=154?395:386)+">\n        }",vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:F,depthWrite:!1,depthTest:!1}),this[t(410)]=!1,this[t(408)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[ne(408)](n,t){const e=ne;this[e(393)].texelSize.value[e(411)](n,t),this[e(393)][e(368)].value.set(n,t).multiplyScalar(.5)}[ne(384)](n){const t=ne;this[t(393)].resolution[t(370)][t(398)](n)}}function ae(n,t){const e=ee();return(ae=function(n,t){return e[n-=366]})(n,t)}function ce(n){function t(n){const e=ae;if(typeof n===e(378))return function(n){}[e(377)](e(371))[e(382)]("counter");1!==(""+n/n)[e(401)]||n%20==0?function(){return!0}[e(377)](e(374)+e(392))[e(400)](e(381)):function(){return!1}[e(377)](e(374)+e(392)).apply(e(412)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=pe;!function(n,t){const e=pe,r=fe();for(;;)try{if(593009===parseInt(e(450))/1+-parseInt(e(444))/2*(-parseInt(e(482))/3)+parseInt(e(477))/4+-parseInt(e(494))/5*(-parseInt(e(454))/6)+parseInt(e(465))/7+-parseInt(e(448))/8+-parseInt(e(492))/9*(parseInt(e(488))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(453)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ue(this,(function(){const n=pe,t=new RegExp(n(438)),e=new RegExp(n(496),"i"),r=he(n(489));t[n(443)](r+n(478))&&e[n(443)](r+n(497))?he():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(453)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(){const n=["string","renderToScreen","USE_DEPTH","setResolution","__proto__","warn","call","clone","inputBuffer","uniforms","2442564AJcgxM","chain","depthTexture","renderTargetB","debu","224109GSqklJ","defines","scene","return (function() ","renderTargetA","length","2131510HuoauT","init","value","setRenderTarget","45NAtein","toString","3978970gFxfrN","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","depthToBlurRatioBias","function *\\( *\\)","log","error","minDepthThreshold","counter","test","8sRvhvR","bind","exception","camera","7502264HSYXXB","setTexelSize","147467dbxori","render","maxDepthThreshold","apply","6diowoR","convolutionMaterial","gger","setAttribute","screen","console","constructor","table","stateObject","kernel","prototype","5206831OjuaWL","info"];return(fe=function(){return n})()}function pe(n,t){const e=fe();return(pe=function(n,t){return e[n-=438]})(n,t)}le(void 0,(function(){const n=pe;let t;try{t=Function(n(485)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(459)]=t[n(459)]||{},r=[n(439),n(472),n(466),n(440),n(446),n(461),"trace"];for(let i=0;i<r[n(487)];i++){const t=le[n(460)][n(464)][n(445)](le),o=r[i],a=e[o]||t;t[n(471)]=le[n(445)](le),t[n(493)]=a.toString[n(445)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(468)]=!1,this[c(486)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA[c(474)](),this.convolutionMaterial=new ie,this[c(455)][c(449)](1/t,1/e),this[c(455)][c(470)](new O(t,e)),this[c(484)]=new u,this[c(447)]=new k,this[c(455)][c(476)][c(441)][c(490)]=r,this[c(455)][c(476)][c(452)][c(490)]=o,this[c(455)][c(476)].depthScale[c(490)]=i,this[c(455)].uniforms[c(498)][c(490)]=a,this[c(455)][c(483)][c(469)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(457)]("position",new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(458)]=new l(p,this[c(455)]),this[c(458)].frustumCulled=!1,this[c(484)].add(this.screen)}[se(451)](n,t,e){const r=se,o=this[r(484)],i=this[r(447)],a=this[r(486)],c=this[r(480)],s=this[r(455)],u=s[r(476)];u.depthBuffer.value=t[r(479)];const l=s[r(463)];let f,p,d,h=t;for(p=0,d=l[r(487)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(490)]=l[p],u[r(475)][r(490)]=h.texture,n[r(491)](f),n[r(451)](o,i),h=f;u[r(463)].value=l[p],u[r(475)][r(490)]=h.texture,n[r(491)](this.renderToScreen?null:e),n[r(451)](o,i)}}function he(n){function t(n){const e=pe;if(typeof n===e(467))return function(n){}.constructor(e(495))[e(453)](e(442));1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}[e(460)](e(481)+e(456))[e(473)]("action"):function(){return!1}[e(460)]("debu"+e(456))[e(453)](e(462)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=_e;!function(n,t){for(var e=_e,r=xe();;)try{if(981234===parseInt(e(156))/1*(parseInt(e(162))/2)+parseInt(e(135))/3*(-parseInt(e(165))/4)+-parseInt(e(122))/5+parseInt(e(106))/6*(-parseInt(e(163))/7)+-parseInt(e(128))/8*(-parseInt(e(155))/9)+parseInt(e(125))/10*(-parseInt(e(118))/11)+-parseInt(e(138))/12*(-parseInt(e(167))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=_e,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(148),"i"),r=Ie(n(103));t.test(r+n(104))&&e[n(119)](r+"input")?Ie():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(n,t){var e=xe();return(_e=function(n,t){return e[n-=101]})(n,t)}ge(void 0,(function(){for(var n=_e,t=function(){var n,t=_e;try{n=Function(t(137)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t.console=t[n(153)]||{},r=["log",n(116),n(127),n(102),n(133),n(150),n(117)],o=0;o<r[n(168)];o++){var i=ge[n(114)].prototype[n(172)](ge),a=r[o],c=e[a]||i;i.__proto__=ge[n(172)](ge),i.toString=c[n(161)][n(172)](c),e[a]=i}}))();class ye extends N{constructor(n={}){var t=_e;super(n),this[t(129)]={value:null},this[t(132)]={value:null},this[t(169)]={value:null},this[t(173)]={value:null},this[t(108)]={value:null},this._hasBlur={value:!1},this[t(171)]={value:0},this._mixBlur={value:0},this[t(131)]={value:.5},this[t(176)]={value:.9},this[t(175)]={value:1},this._depthScale={value:0},this[t(112)]={value:.25},this._distortion={value:1},this[t(151)]={value:1},this.setValues(n)}[ve(147)](n){var t,e=ve;!(null==(t=n[e(174)])?void 0:t[e(141)])&&(n[e(174)][e(141)]=""),n[e(120)].hasBlur=this[e(107)],n[e(120)].tDiffuse=this[e(169)],n[e(120)][e(142)]=this._tDepth,n[e(120)][e(170)]=this[e(132)],n[e(120)][e(152)]=this[e(173)],n[e(120)][e(130)]=this[e(108)],n[e(120)][e(101)]=this._mirror,n[e(120)][e(160)]=this[e(109)],n.uniforms.mixStrength=this[e(131)],n[e(120)][e(105)]=this[e(176)],n.uniforms[e(121)]=this._maxDepthThreshold,n.uniforms[e(124)]=this[e(146)],n.uniforms.depthToBlurRatioBias=this[e(112)],n[e(120)][e(111)]=this[e(123)],n[e(120)][e(143)]=this._mixContrast,n[e(134)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(134)],n.vertexShader=n[e(134)][e(144)](e(110),e(136)),n[e(166)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(166)],n[e(166)]=n[e(166)][e(144)](e(149),e(158))}get[ve(139)](){var n=ve;return this._tDiffuse[n(157)]}set[ve(139)](n){var t=ve;this[t(169)][t(157)]=n}get[ve(142)](){var n=ve;return this[n(129)][n(157)]}set[ve(142)](n){var t=ve;this[t(129)][t(157)]=n}get[ve(170)](){var n=ve;return this[n(132)][n(157)]}set[ve(170)](n){this[ve(132)].value=n}get tDiffuseBlur(){var n=ve;return this[n(173)][n(157)]}set[ve(152)](n){var t=ve;this[t(173)][t(157)]=n}get[ve(130)](){var n=ve;return this[n(108)][n(157)]}set textureMatrix(n){var t=ve;this[t(108)][t(157)]=n}get[ve(140)](){var n=ve;return this[n(107)][n(157)]}set[ve(140)](n){var t=ve;this._hasBlur[t(157)]=n}get[ve(101)](){var n=ve;return this[n(171)][n(157)]}set[ve(101)](n){this[ve(171)].value=n}get[ve(160)](){var n=ve;return this._mixBlur[n(157)]}set[ve(160)](n){this._mixBlur.value=n}get[ve(159)](){var n=ve;return this[n(131)][n(157)]}set[ve(159)](n){var t=ve;this[t(131)][t(157)]=n}get[ve(105)](){var n=ve;return this[n(176)][n(157)]}set[ve(105)](n){var t=ve;this[t(176)][t(157)]=n}get[ve(121)](){return this[ve(175)].value}set[ve(121)](n){var t=ve;this._maxDepthThreshold[t(157)]=n}get[ve(124)](){var n=ve;return this[n(146)][n(157)]}set[ve(124)](n){var t=ve;this[t(146)][t(157)]=n}get[ve(115)](){var n=ve;return this[n(112)][n(157)]}set[ve(115)](n){var t=ve;this[t(112)][t(157)]=n}get[ve(111)](){var n=ve;return this[n(123)][n(157)]}set[ve(111)](n){this[ve(123)].value=n}get[ve(143)](){var n=ve;return this[n(151)][n(157)]}set mixContrast(n){var t=ve;this[t(151)][t(157)]=n}}function xe(){var n=["#include <emissivemap_fragment>","table","_mixContrast","tDiffuseBlur","console","apply","18hDpxcI","11MdnziM","value","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","mixStrength","mixBlur","toString","163528yvsiUe","7wridfz","gger","29396GaFFcn","fragmentShader","1040GyzZyH","length","_tDiffuse","distortionMap","_mirror","bind","_tDiffuseBlur","defines","_maxDepthThreshold","_minDepthThreshold","mirror","error","init","chain","minDepthThreshold","3000696QMdxSz","_hasBlur","_textureMatrix","_mixBlur","#include <project_vertex>","distortion","_depthToBlurRatioBias","debu","constructor","depthToBlurRatioBias","warn","trace","2046CxldrG","test","uniforms","maxDepthThreshold","6701015OhCRUV","_distortion","depthScale","15610OgQFaT","counter","info","7204280nUYdkD","_tDepth","textureMatrix","_blurStrength","_distortionMap","exception","vertexShader","105vgEcyK","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","return (function() ","100296EOAsSR","tDiffuse","hasBlur","USE_UV","tDepth","mixContrast","replace","string","_depthScale","onBeforeCompile","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(xe=function(){return n})()}function Ie(n){function t(n){var e=_e;if(typeof n===e(145))return function(n){}.constructor("while (true) {}").apply(e(126));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(113)+e(164)).call("action"):function(){return!1}[e(114)]("debugger")[e(154)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const be=Re;!function(n,t){const e=Re,r=we();for(;;)try{if(752337===parseInt(e(489))/1+parseInt(e(528))/2*(-parseInt(e(509))/3)+parseInt(e(519))/4+-parseInt(e(529))/5*(parseInt(e(538))/6)+parseInt(e(472))/7*(parseInt(e(553))/8)+parseInt(e(511))/9+parseInt(e(499))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(546)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(){const n=["constructor","console","normal","dispose","subVectors","enabled","warn","stateObject","while (true) {}","shadowMap","setFromMatrixPosition","has-blur","t-diffuse-blur","info","max-depth-threshold","198299raFRfH","visible","chain","negate","prototype","number","clear","view","texture-matrix","assign","3192040aoMHCH","far","return (function() ","add","depthTexture","autoClear","table","__proto__","reflect","reflectorWorldPosition","3AMNNYE","materialRef","3171024ApqArP","copy","position","autoUpdate","exception","defines-USE_DEPTH","projectionMatrix","constant","3772084qlHzWL","toString","dot","setRenderTarget","error","mirror","target","matrixWorldInverse","min-depth-threshold","1806154gFKNpf","4626095aWSLtj","lookAtPosition","cameraWorldPosition","value","gger","multiply","mix-strength","reflectorOffset","index","6SHxXVL","addScaledVector","depth-to-blur-ratio-bias","defines-USE_DISTORTION","elements","uuid","sign","texture","apply","TresMeshReflectorMaterial","debu","matrixWorld","textureMatrix","virtualCamera","log","6142184BiIZJs",'{}.constructor("return this")( )',"bind","distortion","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","reflectorPlane","clipPlane","test","length","set","init","applyMatrix4","call","material","setFromNormalAndCoplanarPoint","defines-USE_BLUR","multiplyScalar","rotationMatrix","counter","traverse","lookAt","depth-scale","7NVqbyT","trace"];return(we=function(){return n})()}!function(){Se(this,(function(){const n=Re,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(557),"i"),r=Te(n(563));t.test(r+n(491))&&e[n(560)](r+"input")?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(546)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(n,t){const e=we();return(Re=function(n,t){return e[n-=465]})(n,t)}Me(void 0,(function(){const n=Re;let t;try{t=Function(n(501)+n(554)+");")()}catch(o){t=window}const e=t[n(475)]=t.console||{},r=[n(552),n(480),n(487),n(523),n(515),n(505),n(473)];for(let i=0;i<r[n(561)];i++){const t=Me.constructor[n(493)][n(555)](Me),o=r[i],a=e[o]||t;t[n(506)]=Me[n(555)](Me),t[n(520)]=a.toString[n(555)](a),e[o]=t}}))();const Ee=[be(497),be(524),"t-diffuse","t-depth",be(486),be(485),be(535),be(527),be(488),be(471),be(540),be(556),"distortionMap","mix-contrast",be(465),"defines-USE_DEPTH",be(541)],Ae=tn({__name:be(537),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:R,extend:E}=V();E({MeshReflectorMaterial:ye});const T=_n(),z=_n(),D=_n(),P=_n(),C=Q((()=>{const n=Re;return typeof f[n(532)]===n(494)?[f[n(532)],f.value]:f[n(532)]})),O=Q((()=>C[r(532)][0]>0||C.value[1]>0)),F={reflectorPlane:new H,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T[o(532)])||n[o(545)][o(477)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T.value=new I(i[o(532)],i[o(532)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(532)],i.value,w,M)},t(y,e(x)))),z.value=new I(i[o(532)],i.value,f),D[o(532)]=new de({resolution:i[o(532)],width:C[o(532)][0],height:C[o(532)][1],minDepthThreshold:a[o(532)],maxDepthThreshold:s[o(532)],depthScale:u.value,depthToBlurRatioBias:l.value}),P[o(532)]={mirror:p,textureMatrix:F.textureMatrix,mixBlur:d,tDiffuse:T.value[o(545)],tDepth:T[o(532)][o(503)],tDiffuseBlur:T[o(532)][o(545)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(532)],mixContrast:_,"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":u[o(532)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const B=_n(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(B[t(532)]&&R.value&&T[t(532)]&&y[t(532)]))return;const e=function(n,t){const e=Re;let r;return n[e(469)]((n=>{const o=e;n.isMesh&&n[o(566)]&&n[o(566)][o(543)]===t&&(r=n)})),r}(x[t(532)],B.value[t(543)]);if(!e)return;e[t(490)]=!1;const i=R[t(532)].xr[t(479)],a=R[t(532)][t(483)][t(514)];(function(n){var t,e;const r=Re;if(F[r(508)][r(484)](n.matrixWorld),F[r(531)].setFromMatrixPosition(null==(t=y.value)?void 0:t[r(549)]),F[r(467)].extractRotation(n[r(549)]),F.normal[r(562)](0,0,1),F[r(476)][r(564)](F[r(467)]),F[r(508)][r(539)](F[r(476)],o[r(536)]),F[r(496)][r(478)](F[r(508)],F[r(531)]),F[r(496)][r(521)](F[r(476)])>0)return;F.view[r(507)](F.normal)[r(492)](),F[r(496)][r(502)](F[r(508)]),F.rotationMatrix.extractRotation(null==(e=y[r(532)])?void 0:e.matrixWorld),F[r(530)].set(0,0,-1),F[r(530)][r(564)](F.rotationMatrix),F.lookAtPosition.add(F.cameraWorldPosition),F[r(525)].subVectors(F[r(508)],F[r(530)]),F[r(525)][r(507)](F.normal)[r(492)](),F[r(525)][r(502)](F[r(508)]),F[r(551)][r(513)][r(512)](F[r(496)]),F[r(551)].up[r(562)](0,1,0),F.virtualCamera.up[r(564)](F[r(467)]),F[r(551)].up[r(507)](F.normal),F[r(551)][r(470)](F[r(525)]),F[r(551)][r(500)]=(null==y?void 0:y.value)[r(500)],F[r(551)].updateMatrixWorld(),F[r(551)][r(517)].copy((null==y?void 0:y[r(532)])[r(517)]),F[r(550)][r(562)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix.multiply(F[r(551)].projectionMatrix),F[r(550)][r(534)](F[r(551)][r(526)]),F[r(550)][r(534)](n[r(549)]),F.reflectorPlane[r(567)](F[r(476)],F[r(508)]),F.reflectorPlane.applyMatrix4(F.virtualCamera[r(526)]),F.clipPlane[r(562)](F[r(558)][r(476)].x,F.reflectorPlane.normal.y,F[r(558)][r(476)].z,F[r(558)][r(518)]);const i=F.virtualCamera[r(517)];F.q.x=(Math[r(544)](F[r(559)].x)+i[r(542)][8])/i[r(542)][0],F.q.y=(Math[r(544)](F[r(559)].y)+i[r(542)][9])/i[r(542)][5],F.q.z=-1,F.q.w=(1+i[r(542)][10])/i[r(542)][14],F[r(559)][r(466)](2/F.clipPlane[r(521)](F.q)),i.elements[2]=F[r(559)].x,i.elements[6]=F[r(559)].y,i.elements[10]=F.clipPlane.z+1,i.elements[14]=F[r(559)].w})(e),R.value.shadowMap[t(514)]=!1,R[t(532)].setRenderTarget(T[t(532)]),R[t(532)][t(504)]||R[t(532)][t(495)](),R[t(532)].render(x.value,F[t(551)]),null==(n=null==D?void 0:D[t(532)])||n.render(R[t(532)],T[t(532)],z[t(532)]),R[t(532)].xr[t(479)]=i,R.value[t(483)][t(514)]=a,e[t(490)]=!0,R[t(532)][t(522)](null)}));const j=In(),U=Q((()=>{const n=r,t={};return Object[n(498)](t,o),Object[n(498)](t,j[n(532)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(532)])||n[e(477)](),null==(t=null==z?void 0:z[e(532)])||t[e(477)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(547),bn({key:"key"+P.value["defines-USE_BLUR"]+P.value[c(516)]+P[c(532)][c(541)],ref_key:c(510),ref:B},U.value,{"texture-matrix":F[c(550)],mirror:nn(p),"t-diffuse":null==(e=T[c(532)])?void 0:e[c(545)],"t-depth":null==(o=T[c(532)])?void 0:o[c(503)],"t-diffuse-blur":null==(i=z[c(532)])?void 0:i.texture,"has-blur":O.value,"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Ee)}}});function Te(n){function t(n){const e=Re;if("string"==typeof n)return function(n){}[e(474)](e(482))[e(546)](e(468));1!==(""+n/n)[e(561)]||n%20==0?function(){return!0}[e(474)]("debu"+e(533))[e(565)]("action"):function(){return!1}[e(474)](e(548)+e(533)).apply(e(481)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ce,r=Pe();for(;;)try{if(818653===parseInt(e(265))/1+-parseInt(e(254))/2*(parseInt(e(274))/3)+parseInt(e(244))/4*(parseInt(e(279))/5)+-parseInt(e(250))/6*(-parseInt(e(266))/7)+-parseInt(e(277))/8+-parseInt(e(287))/9*(parseInt(e(269))/10)+parseInt(e(261))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(257)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=Ce,t=new RegExp(n(255)),e=new RegExp(n(284),"i"),r=Oe("init");t[n(264)](r+n(281))&&e[n(264)](r+n(262))?Oe():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["2181058vvzItv","input","update","test","1430171SXbroE","2873773PRIqaq","exception","constructor","50ImPSmD","action","dispose","string","debu","69kwjcEe","__proto__","fog","13051640yfDUVu","error","2186495Gbouma",'{}.constructor("return this")( )',"chain","gger","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","length","951714CipDso","trace","background","4hBHQVz","prototype","console","bind","value","stateObject","18HoVtDa","toString","counter","warn","27698SCnlTZ","function *\\( *\\)","table","apply","CubeCamera","log","texture"];return(Pe=function(){return n})()}function Ce(n,t){const e=Pe();return(Ce=function(n,t){return e[n-=243]})(n,t)}function Oe(n){function t(n){const e=Ce;if(typeof n===e(272))return function(n){}.constructor(e(285))[e(257)](e(252));1!==(""+n/n).length||n%20==0?function(){return!0}[e(268)](e(273)+e(282)).call(e(270)):function(){return!1}.constructor(e(273)+e(282))[e(257)](e(249)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Fe(){const n=["stateObject","near","texture","trace","warn","92iafrMm","index","info","table","constructor","primitive","5139HpZMGj","test","40644KuZlxz","while (true) {}","1120cmEkvx","3078614duNnSW","106ustOKO","log","toString","console","visible","45pkTSZt","$slots","debu","bind","action","1999974JUHhVX","value","2474691ZuVKYT","__proto__","chain","fog","11354YLWVuI","input","gger","call","return (function() ","far","counter","error","length","TresGroup","apply","string","object","frames","default","1888mhfnEl","resolution"];return(Fe=function(){return n})()}De(void 0,(function(){const n=Ce,t=function(){const n=Ce;let t;try{t=Function(n(283)+n(280)+");")()}catch(e){t=window}return t}(),e=t[n(246)]=t[n(246)]||{},r=[n(259),n(253),"info",n(278),n(267),n(256),n(288)];for(let o=0;o<r[n(286)];o++){const t=De.constructor[n(245)][n(247)](De),i=r[o],a=e[i]||t;t[n(275)]=De[n(247)](De),t.toString=a[n(251)][n(247)](a),e[i]=t}}))();const Be=He;!function(n,t){const e=He,r=Fe();for(;;)try{if(421023===-parseInt(e(480))/1*(-parseInt(e(468))/2)+parseInt(e(492))/3+parseInt(e(476))/4*(parseInt(e(485))/5)+-parseInt(e(490))/6+-parseInt(e(496))/7*(parseInt(e(511))/8)+-parseInt(e(474))/9*(parseInt(e(478))/10)+parseInt(e(479))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=He,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le("init");t.test(r+n(494))&&e[n(475)](r+n(497))?Le():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=He;let t;try{t=Function(n(500)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(483)]=t[n(483)]||{},r=[n(481),n(467),n(470),n(503),"exception",n(471),n(466)];for(let i=0;i<r[n(504)];i++){const t=je.constructor.prototype[n(488)](je),o=r[i],a=e[o]||t;t[n(493)]=je.bind(je),t[n(482)]=a[n(482)][n(488)](a),e[o]=t}}))();const Ue=[Be(508)],Ne=tn({__name:Be(469),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return J((()=>s),(n=>{var t;const e=Ce;null==(t=c[e(248)])||t[e(271)](),c[e(248)]=new v(n.value),c[e(248)][e(260)].type=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f[r(248)]=new(z[r(258)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Ce;null==(n=c.value)||n[t(271)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a[t(248)][t(276)],d=a.value[t(243)],a[t(248)][t(243)]=r||d,a[t(248)][t(276)]=o||p,null==(n=f.value)||n[t(263)](i[t(248)],a.value),a.value[t(276)]=p,a.value[t(243)]=d}}}({resolution:o[r(512)],near:o[r(464)],far:o[r(501)],envMap:o.envMap,fog:o[r(495)]}),{onBeforeLoop:s}=q();let u=0;const l=K(null);return s((()=>{const n=r;l.value&&(o[n(509)]===1/0||u<o[n(509)])&&(l[n(491)][n(484)]=!1,c(),l[n(491)][n(484)]=!0,u++)})),t({texture:null==(e=i[r(491)])?void 0:e[r(465)]}),(n,t)=>{const e=r;return an(),cn(e(505),null,[hn(e(473),{object:nn(a)},null,8,Ue),hn(e(505),{ref_key:"rgRef",ref:l},[sn(n[e(486)],e(510))],512)])}}});function He(n,t){const e=Fe();return(He=function(n,t){return e[n-=464]})(n,t)}function Le(n){function t(n){const e=He;if(typeof n===e(507))return function(n){}.constructor(e(477)).apply(e(502));1!==(""+n/n).length||n%20==0?function(){return!0}[e(472)](e(487)+e(498))[e(499)](e(489)):function(){return!1}[e(472)](e(487)+e(498)).apply(e(513)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ve,r=Ge();for(;;)try{if(594503===parseInt(e(468))/1*(-parseInt(e(431))/2)+parseInt(e(446))/3*(parseInt(e(460))/4)+-parseInt(e(470))/5+-parseInt(e(440))/6*(parseInt(e(472))/7)+parseInt(e(466))/8+-parseInt(e(464))/9*(-parseInt(e(459))/10)+parseInt(e(462))/11*(parseInt(e(469))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["toString","exception","return (function() ","1370mjlcPy","4XvtJzk","info","3908729xFZIlA","function *\\( *\\)","47907mJqydv","generateUUID","6496144xGrmGg","prototype","2452PZnDtl","24cYgOHp","2110200tDAloA","UniformsUtils","7vwPdWB","entries","call","assign",'{}.constructor("return this")( )',"input","clone","696ELMbha","table","key","uniforms","debu","length","MathUtils","console","__proto__","2908566QoSaqF","gger","value","ShaderMaterial","defineProperty","warn","307959qgodIB","action","constructor","test","stateObject","apply","bind","error","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Ge=function(){return n})()}!function(){Ze(this,(function(){const n=Ve,t=new RegExp(n(463)),e=new RegExp(n(455),"i"),r=qe("init");t[n(449)](r+n(454))&&e[n(449)](r+n(429))?qe():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(451)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=Ge();return(Ve=function(n,t){return e[n-=427]})(n,t)}function $e(n,t,e,r){const o=Ve,i=class extends z[o(443)]{constructor(i={}){const a=o,s=Object[a(473)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=a,o=z[r(471)][r(430)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(433)]="",s.forEach((([n])=>Object[a(444)](this,n,{get:()=>this.uniforms[n].value,set:t=>this[a(434)][n][a(442)]=t}))),Object[a(427)](this,i),r&&r(this)}};return i[o(433)]=z[o(437)][o(465)](),i}function qe(n){function t(n){const e=Ve;if("string"==typeof n)return function(n){}[e(448)]("while (true) {}")[e(451)]("counter");1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}[e(448)](e(435)+e(441))[e(474)](e(447)):function(){return!1}.constructor(e(435)+e(441))[e(451)](e(450)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(458)+n(428)+");")()}catch(e){t=window}return t}(),e=t[n(438)]=t[n(438)]||{},r=["log",n(445),n(461),n(453),n(457),n(432),"trace"];for(let o=0;o<r[n(436)];o++){const t=We[n(448)][n(467)].bind(We),i=r[o],a=e[i]||t;t[n(439)]=We[n(452)](We),t[n(456)]=a[n(456)][n(452)](a),e[i]=t}}))();var Ye=cr;!function(n,t){for(var e=cr,r=nr();;)try{if(514166===-parseInt(e(268))/1*(parseInt(e(377))/2)+parseInt(e(277))/3+-parseInt(e(354))/4*(-parseInt(e(323))/5)+parseInt(e(367))/6*(-parseInt(e(305))/7)+parseInt(e(336))/8+parseInt(e(389))/9*(-parseInt(e(333))/10)+-parseInt(e(230))/11*(-parseInt(e(301))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=cr,t=new RegExp(n(291)),e=new RegExp(n(207),"i"),r=Dr(n(249));t[n(384)](r+n(290))&&e[n(384)](r+n(351))?Dr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=function(n,t){var e=cr;if(typeof n!==e(379)||null===n)return n;var r=n[Symbol[e(233)]];if(void 0!==r){var o=r[e(213)](n,t||e(295));if(typeof o!==e(379))return o;throw new TypeError(e(300))}return(t===e(374)?String:Number)(n)}(n,cr(374));return"symbol"==typeof t?t:String(t)}function Qe(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(){var n=["bump","writable","\n    vec3 totalEmissiveRadiance = ","filter","__csm","MeshBasicMaterial","Object","next","baseMaterial","position","chain","function *\\( *\\)","\n    gl_PointSize = ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","#define IS_VERTEX;\n","default","material.clearcoatRoughness = ","MeshPhysicalMaterial","setPrototypeOf","isAlreadyExtended","@@toPrimitive must return a primitive value.","84732sGxTgF","forEach","onBeforeCompile","instanceID","81109XCccKe","length","undefined","CSM: ","concat","toString","customProgramCacheKey",'". Shader cannot compile.',"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","clearcoatRoughness","MeshToonMaterial","keys","includes","fragmentShader","isArray","csm_Bump","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","trace","6990SEwJDK","normal","@@iterator","push","\n    gl_FragColor = ",'" is required to use output "','CSM: Property "',"return","uniforms","getPrototypeOf","10YphsqT","\n    #include <color_fragment>\n    diffuseColor = ","cacheKey","5945328HkpnKv","_getCacheHash","bind","csm_Emissive","csm_DepthAlpha","done","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n    vec3 objectNormal = ","ShaderChunk","_patchShader","#define IS_","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","RawShaderMaterial","csm_Position","function","input","csm_Metalness","table","104CvyjRr","fragColor","diffuse","name","defineProperty"," is not available in ","construct","constructor","MeshDepthMaterial","join","update","Arguments","value","222uRPXuO","void main() {","MeshLambertMaterial","depthAlpha","replace","lastIndexOf","prototype","string","is not a constructor","this hasn't been initialised - super() hasn't been called","4fSsGey"," - (dot(","object","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","getOwnPropertyDescriptor","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","MeshNormalMaterial","test","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","metalness","Derived constructors may only return object or undefined","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","5377545eDTZFR",". Shader cannot compile.","lights_physical_fragment",", 1.0 );\n  ","gger","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\\$&","trim","warn","find","Map","MeshPhongMaterial","pointSize","roughness","patchMap","toUpperCase","action","split","cacheHash","enumerable","\n    vec4 csm_internal_positionUnprojected = ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","// #_CSM_#","csm_Normal","\n            \n            void main() {\n          ","apply","clone","call","csm_ClearcoatNormal","void "," );\n    ","\n            ","csm_Clearcoat","#define IS_UNKNOWN;\n","vertexShader","emissive","message","error","csm_Roughness","MeshMatcapMaterial","set","substring","positionRaw","entries","341GFGuEu","MeshStandardMaterial","generateUUID","toPrimitive","\n    \n            ","_getMaterialDefine","create",'{}.constructor("return this")( )',"return (function() ","assign",";\n  ","iterator","\n    vec3 transformed = ","__proto__","needsUpdate","_generateMaterial","indexOf","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","_getPatchMapForMaterial","init","Material",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","csm_PointSize","type","propertyIsEnumerable","PointsMaterial","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","clearcoat","csm_PositionRaw","csm_DiffuseColor","counter","clearcoatNormal","getOwnPropertyDescriptors","ShadowMaterial","defineProperties","csm_FragColor","console","csm_ClearcoatRoughness","149499wABiGL","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","configurable","\n    gl_Position = ","from",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","Set","silent",";\n    ","2522949TzxzMF","getOwnPropertySymbols","\n    #include <metalnessmap_fragment>\n    metalnessFactor = "];return(nr=function(){return n})()}function tr(n,t){var e=cr,r=Object[e(316)](n);if(Object[e(278)]){var o=Object[e(278)](n);t&&(o=o[e(283)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(205)]}))),r[e(326)][e(211)](r,o)}return r}function er(n){for(var t=cr,e=1;e<arguments[t(306)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(302)]((function(t){Qe(n,t,r[t])})):Object[t(262)]?Object[t(264)](n,Object[t(262)](r)):tr(Object(r)).forEach((function(e){var o=t;Object[o(358)](n,e,Object[o(381)](r,e))}))}return n}function rr(n,t){var e=cr;if(null==n)return{};var r,o,i=function(n,t){var e=cr;if(null==n)return{};var r,o,i={},a=Object[e(316)](n);for(o=0;o<a[e(306)];o++)r=a[o],t[e(246)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(278)](n);for(o=0;o<a[e(306)];o++)r=a[o],t[e(246)](r)>=0||Object[e(373)][e(254)].call(n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=cr;(null==t||t>n[e(306)])&&(t=n[e(306)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array[cr(319)](n))return n}(n)||function(n,t){var e=cr,r=null==n?null:e(307)!=typeof Symbol&&n[Symbol[e(241)]]||n[e(325)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(213)](n))[e(287)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(213)](r))[e(341)])&&(s[e(326)](o[e(366)]),s[e(306)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(330)]&&(c=r[e(330)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=cr;if(n){if(typeof n===e(374))return or(n,t);var r=Object[e(373)][e(310)][e(213)](n).slice(8,-1);return r===e(286)&&n.constructor&&(r=n[e(361)][e(357)]),r===e(399)||r===e(274)?Array[e(272)](n):r===e(365)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(384)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(n,t){for(var e=cr,r=0;r<t.length;r++){var o=t[r];o.enumerable=o[e(205)]||!1,o[e(270)]=!0,e(366)in o&&(o[e(281)]=!0),Object.defineProperty(n,Je(o.key),o)}}function cr(n,t){var e=nr();return(cr=function(n,t){return e[n-=200]})(n,t)}function sr(n){if(void 0===n)throw new ReferenceError(cr(376));return n}function ur(n,t){var e=cr;return(ur=Object[e(298)]?Object.setPrototypeOf.bind():function(n,t){return n[e(243)]=t,n})(n,t)}function lr(n){var t=cr;return(lr=Object[t(298)]?Object[t(332)].bind():function(n){var e=t;return n[e(243)]||Object[e(332)](n)})(n)}function fr(n){var t=function(){var n=cr;if(typeof Reflect===n(307)||!Reflect[n(360)])return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy===n(350))return!0;try{return Boolean[n(373)].valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=cr,o=lr(n);if(t){var i=lr(this)[r(361)];e=Reflect[r(360)](o,arguments,i)}else e=o[r(211)](this,arguments);return function(n,t){var e=cr;if(t&&(typeof t===e(379)||typeof t===e(350)))return t;if(void 0!==t)throw new TypeError(e(387));return sr(n)}(this,e)}}Ke(void 0,(function(){for(var n=cr,t=function(){var n,t=cr;try{n=Function(t(238)+t(237)+");")()}catch(e){n=window}return n}(),e=t[n(266)]=t[n(266)]||{},r=["log",n(397),"info",n(223),"exception",n(353),n(322)],o=0;o<r[n(306)];o++){var i=Ke.constructor[n(373)].bind(Ke),a=r[o],c=e[a]||i;i[n(243)]=Ke[n(338)](Ke),i[n(310)]=c[n(310)][n(338)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Ye(259),normal:Ye(209),roughness:Ye(224),metalness:Ye(352),emissive:Ye(339),ao:"csm_AO",bump:Ye(320),clearcoat:Ye(218),clearcoatRoughness:Ye(267),clearcoatNormal:Ye(214),pointSize:Ye(252),fragColor:Ye(265),depthAlpha:Ye(340),position:Ye(349),positionRaw:Ye(258)},mr=(Qe(pr={},""[Ye(309)](vr.position),"*"),Qe(pr,""[Ye(309)](vr.positionRaw),"*"),Qe(pr,""[Ye(309)](vr[Ye(324)]),"*"),Qe(pr,""[Ye(309)](vr[Ye(401)]),[Ye(255)]),Qe(pr,""[Ye(309)](vr[Ye(356)]),"*"),Qe(pr,""[Ye(309)](vr[Ye(355)]),"*"),Qe(pr,""[Ye(309)](vr.emissive),["MeshStandardMaterial",Ye(297)]),Qe(pr,"".concat(vr[Ye(402)]),[Ye(231),"MeshPhysicalMaterial"]),Qe(pr,""[Ye(309)](vr[Ye(386)]),["MeshStandardMaterial",Ye(297)]),Qe(pr,""[Ye(309)](vr.ao),["MeshStandardMaterial","MeshPhysicalMaterial",Ye(285),Ye(369),Ye(400),"MeshToonMaterial"]),Qe(pr,"".concat(vr[Ye(280)]),[Ye(369),Ye(225),Ye(383),Ye(400),"MeshPhysicalMaterial","MeshStandardMaterial",Ye(315),Ye(263)]),Qe(pr,""[Ye(309)](vr[Ye(370)]),[Ye(362)]),Qe(pr,""[Ye(309)](vr.clearcoat),[Ye(297)]),Qe(pr,"".concat(vr.clearcoatRoughness),["MeshPhysicalMaterial"]),Qe(pr,""[Ye(309)](vr[Ye(261)]),[Ye(297)]),pr),gr={"#include <lights_physical_fragment>":z[Ye(344)][Ye(391)]},_r=(Qe(dr={},"".concat(vr[Ye(324)]),{"#include <beginnormal_vertex>":Ye(343)[Ye(309)](vr[Ye(324)],Ye(251))}),Qe(dr,"".concat(vr[Ye(289)]),{"#include <begin_vertex>":Ye(242).concat(vr[Ye(289)],Ye(240))}),Qe(dr,""[Ye(309)](vr[Ye(228)]),{"#include <begin_vertex>":Ye(206)[Ye(309)](vr[Ye(228)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Qe(dr,"".concat(vr.pointSize),{"gl_PointSize = size;":Ye(292)[Ye(309)](vr.pointSize,Ye(276))}),Qe(dr,"".concat(vr[Ye(356)]),{"#include <color_fragment>":Ye(334)[Ye(309)](vr[Ye(356)],";\n  ")}),Qe(dr,""[Ye(309)](vr[Ye(355)]),{"#include <dithering_fragment>":Ye(394)[Ye(309)](vr[Ye(355)],Ye(240))}),Qe(dr,""[Ye(309)](vr[Ye(221)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(282)[Ye(309)](vr[Ye(221)],Ye(276))}),Qe(dr,"".concat(vr[Ye(402)]),{"#include <roughnessmap_fragment>":Ye(347).concat(vr[Ye(402)],Ye(276))}),Qe(dr,"".concat(vr[Ye(386)]),{"#include <metalnessmap_fragment>":Ye(279).concat(vr[Ye(386)],Ye(276))}),Qe(dr,""[Ye(309)](vr.ao),{"#include <aomap_fragment>":Ye(269)[Ye(309)](vr.ao,Ye(276))}),Qe(dr,""[Ye(309)](vr[Ye(280)]),{"#include <normal_fragment_maps>":Ye(385)[Ye(309)](vr.bump,Ye(378))[Ye(309)](vr[Ye(280)],Ye(273))}),Qe(dr,"".concat(vr[Ye(370)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[Ye(309)](vr[Ye(370)],Ye(216)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(313).concat(vr[Ye(370)],Ye(276))}),Qe(dr,""[Ye(309)](vr[Ye(257)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ye(309)](vr[Ye(257)],";")}),Qe(dr,""[Ye(309)](vr[Ye(314)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(296).concat(vr[Ye(314)],";")}),Qe(dr,""[Ye(309)](vr[Ye(261)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),dr),yr=(Qe(hr={},"".concat(vr[Ye(289)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(247).concat(vr[Ye(289)],Ye(392))}),Qe(hr,""[Ye(309)](vr[Ye(228)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(271)[Ye(309)](vr[Ye(289)],";\n  ")}),Qe(hr,"".concat(vr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(327).concat(vr[Ye(356)],Ye(240))}),Qe(hr,""[Ye(309)](vr[Ye(355)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(327)[Ye(309)](vr[Ye(355)],";\n  ")}),hr),xr={clearcoat:[vr[Ye(257)],vr[Ye(261)],vr[Ye(314)]]},Ir=Ye(388),br=Ye(321),Sr=Ye(342),wr=Ye(256),Mr=["baseMaterial",Ye(318),"vertexShader","uniforms",Ye(200),Ye(335),Ye(275)],Rr=function(n,t,e){var r=Ye;return n[r(203)](t)[r(363)](e)},Er=function(n,t){var e,r,o=Ye;return new RegExp("\\b"[o(309)]((e=t,r=Ye,e[r(371)](/[-\/\\^$*+?.()|[\]{}]/g,r(395))),"\\b"))[o(384)](n)};function Ar(n){return n?n[Ye(371)](/\s/g,""):void 0}function Tr(n){return n[Ye(371)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Ye;!function(n,t){var e=cr;if(typeof t!==e(350)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(373)]=Object[e(236)](t&&t[e(373)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(358)](n,e(373),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=cr,u=n[s(288)],l=n[s(318)],f=n[s(220)],p=n[s(331)],d=n[s(200)],h=n[s(335)],v=n[s(275)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(222)][t(246)](t(375))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(253)]===s(348))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Ye;e(306),Object.assign(n,t);var r=Object[e(332)](t);Object[e(229)](Object[e(262)](r))[e(283)]((function(n){var t=e,r=typeof n[1].get===t(350),o=typeof n[1][t(226)]===t(350),i=typeof n[1].value===t(350),a=n[0]===t(361);return(r||o||i)&&!a}))[e(302)]((function(t){var r=e;typeof n[t[0]]!==r(350)&&Object[r(358)](n,t[0],t[1])}))})(sr(t=a[s(213)](this)),e),t[s(284)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W[s(232)](),type:e.type,isAlreadyExtended:(r=e.onBeforeCompile,o=Ye,i=r.toString()[o(396)](),!(0===i.substring(i[o(246)]("{")+1,i[o(372)]("}"))[o(396)]()[o(306)])),cacheHash:"",silent:v},t[s(331)]=er(er({},t[s(331)]||{}),p||{});var g=t[s(284)],_=g[s(318)],y=g[s(220)],x=t[s(331)];return t.__csm[s(204)]=t[s(337)](),t[s(245)](_,y,x),t}return e=c,r=[{key:t(364),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(331)]=e.uniforms||this[n(331)],Object[n(239)](this.__csm,e);var r=this[n(284)],o=r[n(318)],i=r[n(220)],a=this[n(331)],c=this[n(337)]();this[n(284)][n(204)]=c,this._generateMaterial(o,i,a)}},{key:t(212),value:function(){var n=t,e={baseMaterial:this[n(284)][n(288)],fragmentShader:this.__csm.fragmentShader,vertexShader:this[n(284)][n(220)],uniforms:this[n(331)],silent:this[n(284)][n(275)],patchMap:this[n(284)].patchMap,cacheKey:this.__csm.cacheKey},r=new(this[n(361)])(e);return Object.assign(this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(284)],r=e[n(318)],o=e[n(220)],i=this.uniforms,a=[Ar(r),Ar(o),i][n(283)]((function(n){return void 0!==n}));return a.length>0?Rn(a,{excludeValues:!0}):this[n(311)]()}},{key:t(245),value:function(n,e,r){var o=t,i=this;this[o(331)]=r||{},this[o(311)]=function(){return i[o(284)].cacheHash};var a=function(t){var r=o;try{var a=i[r(235)]();if(n){var c=i[r(345)](Tr(n),t.fragmentShader,!0);t[r(318)]=a+c}if(e){var s=i._patchShader(Tr(e),t[r(220)]);t[r(220)]=r(294)+s,t[r(220)]=a+t.vertexShader}t[r(331)]=er(er({},t[r(331)]),i.uniforms),i[r(331)]=t[r(331)]}catch(u){console.error(u)}};if(this[o(284)][o(299)]){var c=this.onBeforeCompile;this[o(303)]=function(n,t){c(n,t),a(n)}}else this[o(303)]=a;this[o(244)]=!0}},{key:t(345),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this._getPatchMapForMaterial()),this[o(284)][o(200)]);Object[o(229)](xr)[o(302)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(398)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error(e(329)[e(309)](a,e(328))[e(309)](c,e(312)))})),Object[o(229)](gr)[o(302)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(316)](c).forEach((function(t){var e=o;Object[e(316)](c[t])[e(302)]((function(r){var o=e,s=mr[t],u=i.__csm[o(253)];if("*"===t||Er(n,t)){if(!(!s||Array[o(319)](s)&&s.includes(u)||"*"===s))throw new Error(o(308)[o(309)](t,o(359))[o(309)](u,o(390)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(284)][o(304)][o(371)](/-/g,"_"),h=n[o(371)](/void\s+main\s*\(\s*\)/g,o(215).concat(d,"()")),v=n[o(317)]("void main()"),m=a[o(317)](o(208));return v&&(m&&this[o(284)][o(299)]?(a=a[o(371)](o(368),"\n            "[o(309)](h,o(210))),s=a,u=o(208),l=o(217)[o(309)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Ye)(372)](u),a=-1===p?s:s[f(227)](0,p)+l+s.substring(p+u[f(306)])):a=a.replace("void main() {",o(380)[o(309)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Sr,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ").concat(Ir,o(234))[o(309)](h,o(293))[o(309)](br,o(382)).concat(r?"\n    \n":wr,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(309)](d,"();\n              // #_CSM_#\n          "))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this.__csm[n(253)];return e?n(346)[n(309)](e[n(201)](),";\n"):n(219)}},{key:t(248),value:function(){var n=t;return"ShaderMaterial"===this[n(284)][n(253)]?yr:_r}}],i=cr,r&&ar(e[i(373)],r),o&&ar(e,o),Object[i(358)](e,i(373),{writable:!1}),c}(z[Ye(250)]);function Dr(n){function t(n){var e=cr;if(typeof n===e(374))return function(n){}[e(361)]("while (true) {}")[e(211)](e(260));1!==(""+n/n)[e(306)]||n%20==0?function(){return!0}.constructor("debu"+e(393)).call(e(202)):function(){return!1}[e(361)]("debu"+e(393)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Br;!function(n,t){const e=Br,r=Or();for(;;)try{if(338734===parseInt(e(210))/1+parseInt(e(177))/2*(-parseInt(e(188))/3)+parseInt(e(204))/4+parseInt(e(208))/5+parseInt(e(171))/6+parseInt(e(192))/7*(-parseInt(e(184))/8)+-parseInt(e(206))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(190)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Or(){const n=["\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","constructor","clearcoat","91176DYGEQQ","MeshPhysicalMaterial","bind","debu","3495NoYiPF","function *\\( *\\)","apply","stateObject","126uFzLhF","init","action","warn","metalness","log","input","clearcoatRoughness","error","counter","toString","console","2116996HKgqhq","length","10404027gXeQYG","\n      ","1855520TsRtGL","call","612193xGiRKb","\n\t\t\t","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","table","roughness","return (function() ","test","3801192IgQQRO","exception","prototype","index","setStyle","chain","766EnNlHV","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info"];return(Or=function(){return n})()}!function(){Cr(this,(function(){const n=Br,t=new RegExp(n(189)),e=new RegExp(n(179),"i"),r=Ur(n(193));t[n(170)](r+n(176))&&e[n(170)](r+n(198))?Ur():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(190)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(n,t){const e=Or();return(Br=function(n,t){return e[n-=169]})(n,t)}Fr(void 0,(function(){const n=Br;let t;try{t=Function(n(169)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(203)]=t[n(203)]||{},r=[n(197),n(195),n(180),n(200),n(172),n(213),"trace"];for(let i=0;i<r[n(205)];i++){const t=Fr[n(182)][n(173)][n(186)](Fr),o=r[i],a=e[o]||t;t.__proto__=Fr.bind(Fr),t[n(202)]=a[n(202)].bind(a),e[o]=t}}))();const kr=["object"],jr=tn({__name:Pr(174),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:z[t(185)],metalness:e[t(196)],roughness:e[t(214)],clearcoat:e[t(183)],clearcoatRoughness:e[t(199)],color:e[t(178)],vertexShader:t(212),fragmentShader:t(211)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(207)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(181)},o=new zr(r);return fn((()=>{const n=t;o[n(178)][n(175)](e.color),o.metalness=e.metalness,o[n(214)]=e.roughness,o.clearcoat=e[n(183)],o[n(199)]=e.clearcoatRoughness})),(n,t)=>(an(),cn("primitive",{object:nn(o)},null,8,kr))}});function Ur(n){function t(n){const e=Br;if("string"==typeof n)return function(n){}[e(182)]("while (true) {}")[e(190)](e(201));1!==(""+n/n)[e(205)]||n%20==0?function(){return!0}.constructor(e(187)+"gger")[e(209)](e(194)):function(){return!1}[e(182)](e(187)+"gger")[e(190)](e(191)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Zr();;)try{if(565880===-parseInt(e(362))/1*(parseInt(e(379))/2)+-parseInt(e(377))/3*(-parseInt(e(361))/4)+parseInt(e(365))/5*(parseInt(e(373))/6)+parseInt(e(392))/7*(-parseInt(e(395))/8)+-parseInt(e(359))/9*(-parseInt(e(370))/10)+-parseInt(e(371))/11+parseInt(e(364))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(374)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(n,t){var e=Zr();return(Hr=function(n,t){return e[n-=356]})(n,t)}!function(){Nr(this,(function(){var n=Hr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(372),"i"),r=Gr(n(389));t[n(381)](r+n(369))&&e.test(r+n(367))?Gr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(374)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["9028470HyLXlc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","181812EiSmOy","apply","debu","gger","213357DMXFqs","__proto__","690ZXoUJN",'{}.constructor("return this")( )',"test","prototype","length","stateObject","action","call","string","counter","init","while (true) {}","trace","33824IeJOCX","constructor","info","256CTSdZU","table","return (function() ","console","toString","4986972iaPwJd","exception","12ePNbaK","2217WmiCAz","log","12282480MZtnYJ","85pdumxd","bind","input","error","chain","10uvtBLq"];return(Zr=function(){return n})()}function Gr(n){function t(n){var e=Hr;if(typeof n===e(387))return function(n){}[e(393)](e(390))[e(374)](e(388));1!==(""+n/n)[e(383)]||n%20==0?function(){return!0}[e(393)]("debu"+e(376))[e(386)](e(385)):function(){return!1}.constructor(e(375)+e(376))[e(374)](e(384)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){for(var n=Hr,t=function(){var n,t=Hr;try{n=Function(t(356)+t(380)+");")()}catch(e){n=window}return n}(),e=t[n(357)]=t[n(357)]||{},r=[n(363),"warn",n(394),n(368),n(360),n(396),n(391)],o=0;o<r[n(383)];o++){var i=Lr[n(393)][n(382)][n(366)](Lr),a=r[o],c=e[a]||i;i[n(378)]=Lr[n(366)](Lr),i[n(358)]=c[n(358)].bind(c),e[a]=i}}))();export{$e as C,jr as _,Qn as a,lt as b,wt as c,Dt as d,Nt as e,Jt as f,Ne as g,Ae as h,mt as u};

import{V as t,c as n,a6 as e}from"./three.fnkrvySq1721721076264.js";import{p as o}from"./@tresjs.tWkmYPO61721721076264.js";import{d as a,P as r}from"./@pmndrs.K9H4bZlG1721721076264.js";import{d as s,b as i,w as c,a1 as l,o as u,D as f,J as d,aj as p,ak as h}from"./@vue.Q1VpS3901721721076264.js";const m=I;!function(t,n){const e=I,o=g();for(;;)try{if(729432===parseInt(e(195))/1*(parseInt(e(145))/2)+-parseInt(e(181))/3+-parseInt(e(157))/4+-parseInt(e(147))/5+parseInt(e(149))/6*(-parseInt(e(214))/7)+-parseInt(e(170))/8+parseInt(e(192))/9)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["sin","log","blendWindow","MathUtils","2779360SAbVlK","prepare","progressiveLightMap2","shadow","material","lightPosition","prototype","children","castShadow","left","near","amount","clear","8395256qfUjXs","bias","exception","rotate-x","randFloatSpread","TresPlaneGeometry","debu","length","acos","add","opacity","3717819LRlrPs","console","size","warn","action","accumulativeShadowsCom","remove","constructor","frames","while (true) {}","toString","30898809DtrgGp","cos","camera","73651jrEhZW","color","alphaTest","update","return (function() ","random","width","mapSize","finish","stateObject","function *\\( *\\)","far","radius","trace","shadows plm update","gger","height","DirectionalLight","value","61691LfEIsT","position","bind","right","init","counter","blend","TresMesh","apply","gPlane","info","chain","ambient","38wOIKPt","__proto__","4452400qWEYMW","set","156PGwESI","call","abs","test"];return(g=function(){return t})()}!function(){w(this,(function(){const t=I,n=new RegExp(t(205)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=P(t(218));n[t(152)](o+t(143))&&e[t(152)](o+"input")?P():o("0")}))()}();const b=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[I(140)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();b(void 0,(function(){const t=I,n=function(){const t=I;let n;try{n=Function(t(199)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(182)]=n[t(182)]||{},o=[t(154),t(184),t(142),"error",t(172),"table",t(208)];for(let a=0;a<o[t(177)];a++){const n=b[t(188)][t(163)].bind(b),r=o[a],s=e[r]||n;n[t(146)]=b.bind(b),n.toString=s[t(191)][t(216)](s),e[r]=n}}))();const M=[m(173)],y=d(m(175),{args:[1,1]},null,-1);function I(t,n){const e=g();return(I=function(t,n){return e[t-=138]})(t,n)}const S=s({__name:m(186),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,g=s;let b=i();const{extend:I,scene:S,renderer:P,camera:x}=o();I({SoftShadowMaterial:a});const z={position:(new t)[w(148)](g[w(162)].x,g.lightPosition.y,g[w(162)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},v=new r(P[w(213)],S.value,z[w(202)]),j={map:v[w(159)].texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(138)],alphaTest:g[w(197)],opacity:g[w(180)],color:g[w(196)]},_=new n;for(let t=0;t<z[w(168)];t++){const t=new(e[w(212)])(16777215,z.intensity/z[w(168)]);t[w(165)]=!0,t[w(160)][w(171)]=z[w(171)],t.shadow[w(194)][w(167)]=z.near,t[w(160)][w(194)][w(206)]=z[w(206)],t[w(160)][w(194)][w(217)]=z.size/2,t.shadow.camera[w(166)]=-z[w(183)]/2,t[w(160)][w(194)].top=z[w(183)]/2,t[w(160)].camera.bottom=-z[w(183)]/2,t.shadow[w(202)][w(201)]=z[w(202)],t.shadow.mapSize[w(211)]=z[w(202)],_[w(179)](t)}const T=()=>{const t=w,n=z[t(215)][t(177)]();for(let o=0;o<_[t(164)][t(177)];o++){const a=_[t(164)][o];if(Math[t(200)]()>g[t(144)])a[t(215)][t(148)](z[t(215)].x+e[t(156)].randFloatSpread(z[t(207)]),z[t(215)].y+e[t(156)][t(174)](z[t(207)]),z[t(215)].z+e[t(156)][t(174)](z[t(207)]));else{let e=Math[t(178)](2*Math.random()-1)-Math.PI/2,o=2*Math.PI*Math[t(200)]();a[t(215)][t(148)](Math.cos(e)*Math.cos(o)*n,Math[t(151)](Math[t(193)](e)*Math[t(153)](o)*n),Math[t(153)](e)*n)}}},W=(t=1)=>{const n=w;S.value.add(_),v[n(158)]();for(let e=0;e<t;e++)T(),v[n(198)](x[n(213)],g[n(155)]),console[n(154)](n(209),e);S.value[n(187)](_),v[n(203)]()};c((()=>b[w(213)]),(t=>{const n=w;t&&(v.configure(t),v[n(169)](),console.log("shadows render start"),W(g.frames),console.log("shadows render end"))}));const E=()=>{const t=w;v[t(169)](),W(g[t(189)])};return l((()=>{const t=w;b[t(213)]&&(g.opacity&&(b[t(213)].material.opacity=g[t(180)]),g[t(197)]&&(b.value[t(161)][t(197)]=g[t(197)]),g[t(196)]&&b[t(213)][t(161)][t(196)].set(g[t(196)]),g[t(138)]&&(b[t(213)][t(161)].blend=g[t(138)]))})),c((()=>g[w(162)]),(t=>{const n=w;t&&(console[n(154)](g.lightPosition),z[n(215)].set(t.x,t.y,t.z),E())}),{deep:!0}),c((()=>[g[w(189)],g.blendWindow,g[w(144)]]),(()=>{E()})),(t,n)=>{const e=w;return u(),f(e(139),{"receive-shadow":"",ref_key:e(141),ref:b,scale:10,"rotate-x":-Math.PI/2},[y,d("TresSoftShadowMaterial",p(h(j)),null,16)],8,M)}}});function P(t){function n(t){const e=I;if("string"==typeof t)return function(t){}[e(188)](e(190))[e(140)](e(219));1!==(""+t/t)[e(177)]||t%20==0?function(){return!0}[e(188)](e(176)+e(210))[e(150)](e(185)):function(){return!1}[e(188)](e(176)+"gger")[e(140)](e(204)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

import{z as e,p as t,U as n,D as o,Y as r}from"./@tresjs.CmAaFQUS1729762363846.js";import{B as s,s as i,C as a,f as p,V as c,cn as u,a0 as l,cS as f}from"./three.CQvcOG671729762363846.js";import{l as m}from"./utils.g_yV3y2C1729762363846.js";import{f as d}from"./utils.BKAEJ67Y1729762363846.js";import{a5 as h,b as y,a2 as g,o as j,E as b,F as T,W as w,f as M,g as v,L as _,I as x,m as z,u as I,J as S,d as C,r as E,e as L,j as k,aj as B,ak as O,al as G}from"./@vue.n8X62v121729762363846.js";import{m as P}from"./d3-geo.7JUgQZ7N1729762363846.js";import{c as A,d as D,a as F}from"./three-mesh-bvh.B7v5qCD_1729762363846.js";import"./@vueuse.DvZn62wO1729762363846.js";import"./@fesjs.CZZ05Yp51729762363846.js";import"./vue-router.Du5s6fg51729762363846.js";import"./lodash-es.BBTWvufR1729762363846.js";import"./@qlin.BIlp8Yi21729762363846.js";import"./pinia.DOkF60i-1729762363846.js";import"./@babel.Bwyie5id1729762363846.js";import"./@amap.irWeW_Ar1729762363846.js";import"./@floating-ui.B75jtkXD1729762363846.js";import"./@juggle.BnTvdTVm1729762363846.js";import"./@tweenjs.l_ZFvaN51729762363846.js";import"./d3-array.CKz3hFNy1729762363846.js";const H=["position"],J=["blending","map"],R=["name","renderOrder","pCenter"],V=["args"],U=["color","side"],q=["renderOrder","position-z"],N=["position"],Q=_("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1),Y=["renderOrder"],Z=["position"],$=_("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1),W={__name:"jiangSuMapMesh",async setup(r){let C,E;s.prototype.computeBoundsTree=A,s.prototype.disposeBoundsTree=D,i.prototype.raycast=F;const L=([C,E]=h((()=>m("./plugins/simpleGIS/json/320000_full.json","features"))),C=await C,E(),C),{map:k}=([C,E]=h((()=>e({map:"./plugins/simpleGIS/image/icon.png"}))),C=await C,E(),C),B=L[0].properties.centroid,O=P();O.center(B).translate([0,0]);const G=[];L.forEach((e=>{const t=new a("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=e.properties,{coordinates:p,type:c}=e.geometry,u=o||r||s||[0,0],l=O(u);l[1]=-l[1],l[2]=n,G.push({type:"Html",position:l,name:i});const m=O(u);m[1]=.2-m[1],m[2]=n+.22,G.push({type:"Sprite",position:m}),p.forEach((e=>{function o(e){const o=new f;e.forEach(((e,t)=>{const[n,r]=O(e);0===t?o.moveTo(n,-r):o.lineTo(n,-r)})),G.push({type:"Shape",shape:o,name:i,color:t,depth:n,pCenter:m});const r=[];e.forEach((e=>{const[t,n]=O(e);r.push(t,-n,0)})),G.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===c&&e.forEach((e=>o(e))),"Polygon"===c&&o(e)}))}));const W=y();g((()=>{W.value&&((e=>{e.rotation.x=-Math.PI/2;const t=(new p).setFromObject(e).getCenter(new c),n=[0,0];e.position.x=e.position.x-t.x-n[0],e.position.z=e.position.z-t.z-n[1]})(W.value),W.value.children.forEach((e=>{"Mesh"===e.type&&e.geometry.computeBoundsTree()})))}));const X=e=>{e.object.material.opacity=.4},K=e=>{e.eventObject.material.opacity=1},{camera:ee,controls:te}=t();let ne=null;const oe=e=>{const t=new c;t.x=e.point.x,t.y=e.point.y+10,t.z=e.point.z,ne=d(ee,t,te)},{onBeforeLoop:re}=n();re((()=>{null==ne||ne.update()}));const se={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(e,t)=>(j(),b("TresGroup",{ref_key:"tgRef",ref:W},[(j(),b(T,null,w(G,((e,t)=>(j(),b(T,{key:"".concat(t)},["Html"===e.type?(j(),M(I(o),z({key:0,ref_for:!0},se,{position:e.position}),{default:v((()=>[_("span",null,x(e.name),1)])),_:2},1040,["position"])):S("",!0),"Sprite"===e.type?(j(),b("TresSprite",{key:1,position:e.position,scale:.3,renderOrder:1e3},[_("TresSpriteMaterial",{color:16711680,blending:u,map:I(k)},null,8,J)],8,H)):S("",!0),"Shape"===e.type?(j(),b("TresMesh",{key:2,name:e.name,renderOrder:t,pCenter:e.pCenter,onPointerEnter:X,onPointerLeave:K,onClick:oe},[_("TresExtrudeGeometry",{args:[e.shape,{depth:e.depth,bevelEnabled:!1}]},null,8,V),_("TresMeshStandardMaterial",{color:e.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:l},null,8,U)],40,R)):S("",!0),"Line"===e.type?(j(),b(T,{key:3},[_("TresLine",{renderOrder:t,"position-z":e.depth+1e-4},[_("TresBufferGeometry",{position:[e.points,3]},null,8,N),Q],8,q),_("TresLine",{renderOrder:t,"position-z":-1e-4},[_("TresBufferGeometry",{position:[e.points,3]},null,8,Z),$],8,Y)],64)):S("",!0)],64)))),64))],512))}},X=K;function K(e,t){const n=ce();return(K=function(e,t){return n[e-=101]})(e,t)}!function(e,t){const n=K,o=ce();for(;;)try{if(452797===parseInt(n(135))/1*(parseInt(n(130))/2)+-parseInt(n(103))/3+-parseInt(n(110))/4*(-parseInt(n(142))/5)+-parseInt(n(140))/6*(-parseInt(n(139))/7)+parseInt(n(108))/8+-parseInt(n(126))/9+parseInt(n(122))/10*(-parseInt(n(112))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ee=function(){let e=!0;return function(t,n){const o=e?function(){if(n){const e=n[K(127)](t,arguments);return n=null,e}}:function(){};return e=!1,o}}();!function(){ee(this,(function(){const e=K,t=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=le("init");t[e(137)](o+e(129))&&n.test(o+e(134))?le():o("0")}))()}();const te=function(){let e=!0;return function(t,n){const o=e?function(){if(n){const e=n[K(127)](t,arguments);return n=null,e}}:function(){};return e=!1,o}}();te(void 0,(function(){const e=K,t=function(){const e=K;let t;try{t=Function(e(118)+e(138)+");")()}catch(n){t=window}return t}(),n=t[e(106)]=t[e(106)]||{},o=[e(124),"warn",e(128),e(111),e(136),e(132),"trace"];for(let r=0;r<o[e(109)];r++){const t=te[e(131)][e(133)][e(116)](te),s=o[r],i=n[s]||t;t[e(119)]=te.bind(te),t[e(123)]=i[e(123)].bind(i),n[s]=t}}))();const ne=_(X(125),{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1),oe=_(X(141),{intensity:8.8},null,-1),re=_(X(120),{position:[0,10,5],intensity:.2},null,-1),se=_(X(120),{position:[0,10,-5],intensity:.2},null,-1),ie=_(X(120),{position:[5,10,0],intensity:.2},null,-1),ae=_(X(120),{position:[-5,10,0],intensity:.2},null,-1),pe=_(X(115),{args:[20,10]},null,-1);function ce(){const e=["console","action","4724768xoJxLy","length","820wJMXzg","error","1289629ouugNT","#ffdbd1","call","TresGridHelper","bind","stateObject","return (function() ","__proto__","TresDirectionalLight","string","70SepSVi","toString","log","TresPerspectiveCamera","6476328BizCPL","apply","info","chain","458MyqipR","constructor","table","prototype","input","2251UrnAmJ","exception","test",'{}.constructor("return this")( )',"198975bxeQDQ","186Vtunst","TresAmbientLight","10385TMcNfp","while (true) {}","gger","jiangSuMap","TresCanvas","1259919YEVUuc","counter","debu"];return(ce=function(){return e})()}const ue=C({__name:X(101),setup(e){const t=X,n=E({clearColor:t(113),alpha:!0,antialias:!0}),o=E({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(e,s)=>{const i=L(t(102));return j(),M(i,z(n,{"window-size":""}),{default:v((()=>[ne,k(I(r),B(O(o)),null,16),oe,re,se,ie,ae,pe,(j(),M(G,null,{default:v((()=>[k(W)])),_:1}))])),_:1},16)}}});function le(e){function t(e){const n=K;if(typeof e===n(121))return function(e){}[n(131)](n(143))[n(127)](n(104));1!==(""+e/e)[n(109)]||e%20==0?function(){return!0}[n(131)]("debu"+n(144))[n(114)](n(107)):function(){return!1}[n(131)](n(105)+n(144)).apply(n(117)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{ue as default};

import{i as n}from"./ice-utils.HOw5y9041741007821308.js";import{_ as t,m as e,s as o}from"./gl-matrix.ridhCgwk1741007821308.js";import{P as r}from"./tweakpane.yDiyAAkA1741007821308.js";import{d as i,r as a,q as c,o as s,H as u,N as f,u as l}from"./@vue.NRI7TcgI1741007821308.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",_="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function d(n,t){const e=g();return(d=function(n,t){return e[n-=439]})(n,t)}const x=d;!function(n,t){const e=d,o=g();for(;;)try{if(337852===-parseInt(e(494))/1+parseInt(e(469))/2*(parseInt(e(482))/3)+-parseInt(e(461))/4+parseInt(e(450))/5+parseInt(e(507))/6+-parseInt(e(479))/7+-parseInt(e(536))/8*(-parseInt(e(468))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[d(472)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=d,t=new RegExp(n(456)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=b(n(448));t[n(487)](o+n(517))&&e.test(o+n(509))?b():o("0")}))()}();const p=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function g(){const n=["BYTES_PER_ELEMENT","texImage2D","translate","change","是否后处理","ONE_MINUS_SRC_ALPHA","init","TRIANGLES","158385PlhebX","bindBuffer","vertexAttribPointer","info","enable","value","function *\\( *\\)","call","lookAt","trace","counter","1395328yrytNg","src","texParameteri","bufferData","error","NEAREST","TEXTURE_MIN_FILTER","9aHOfls","10jhCmQo","canvaswebgl","gger","apply","drawElements","innerHeight","stateObject","STATIC_DRAW","useProgram","mixParam","3949295DtNLPf","SRC_ALPHA","uniformMatrix4fv","214530QRAIKt","table","length","TEXTURE_2D","color","test","offset_right_bottom","webglPostProcessing","width","enableVertexAttribArray","CLAMP_TO_EDGE","TEXTURE_MAG_FILTER","528360tRUuxp","clearColor","getContext","bindFramebuffer","FRAMEBUFFER","canvas","console","hidden","ELEMENT_ARRAY_BUFFER","#canvaswebgl","debu","addBinding","BLEND","2125068YUyXnY","uView","input","bindTexture","createBuffer","inline","addBlade","create","slider","offset_left_bottom","chain","ARRAY_BUFFER","clear","constructor","FLOAT","TEXTURE_WRAP_T","blendFunc","none","exception","getUniformLocation","prototype","webgl","mat4","toString","UNSIGNED_BYTE","warn","COLOR_ATTACHMENT0","bind","offset_right_top","8286592tllNMS","__proto__","height",'{}.constructor("return this")( )',"log","COLOR_BUFFER_BIT","RGBA"];return(g=function(){return n})()}p(void 0,(function(){const n=d;let t;try{t=Function("return (function() "+n(539)+");")()}catch(r){t=window}const e=t[n(500)]=t[n(500)]||{},o=[n(439),n(532),n(453),n(465),n(525),n(483),n(459)];for(let i=0;i<o[n(484)];i++){const t=p[n(520)][n(527)][n(534)](p),r=o[i],a=e[r]||t;t[n(537)]=p[n(534)](p),t[n(530)]=a[n(530)][n(534)](a),e[r]=t}}))();const T={id:x(470)},A=[x(462)],R=i({__name:x(489),setup(i){const d=x;let E,p,g,R,b,y,h,v,F,P,w,C,U;const B=1,I=.71,D=.76,S=new r({title:"参数"}),L=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S[d(513)]({view:d(515),label:"颜色",min:0,max:1,value:.5}).on("change",(n=>{const t=d;G(),p.uniform1f(C,n[t(455)])}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[d(505)](L,d(501),{label:d(446)}),S.addBinding(L,"offset_right_top",{picker:d(512),x:{min:0,max:1},y:{min:0,max:1}}).on(d(445),(n=>{const t=d;N[0]=L[t(535)].x,N[1]=L[t(535)].y,G()})),S.addBinding(L,d(488),{picker:d(512),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(445),(n=>{const t=d;N[5]=L[t(488)].x,N[6]=L[t(488)].y,G()})),S[d(505)](L,d(516),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(445),(n=>{const t=d;N[10]=L[t(516)].x,N[11]=L[t(516)].y,G()})),S.addBinding(L,"offset_left_top",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{N[15]=L.offset_left_top.x,N[16]=L.offset_left_top.y,G()})),c((()=>{M()}));const M=function(){const t=d;E=document.querySelector(t(503)),E[t(490)]=window.innerWidth,E[t(538)]=window[t(474)],p=E[t(496)](t(528)),p&&(function(){const t=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=Y(e,o),g=n(p,m,_),F=p[t(526)](g,"uProjection"),P=p[t(526)](g,t(508)),w=p[t(526)](g,"uModel"),U=O(document.getElementById("logo-texture"))}(),G(),p[t(454)](p[t(506)]),p[t(523)](p[t(480)],p[t(447)]),X())};function X(){const n=d;p.bindFramebuffer(p[n(498)],h),p[n(495)](B,I,D,1),p[n(519)](p[n(440)]),function(){const n=d;p[n(477)](g),p[n(451)](p[n(518)],R);const o=t[n(529)][n(514)]();t[n(529)].ortho(o,0,E.width,E[n(538)],0,.1,100),p[n(481)](F,!1,o);const r=e[n(514)]();t[n(529)][n(458)](r,[0,0,1],[0,0,0],[0,1,0]),p[n(481)](P,!1,r),j(U,600,600),j(U,400,400)}(),p[n(497)](p[n(498)],null),L[n(501)]&&(p.clear(p[n(440)]),p[n(495)](0,0,1,1),p[n(451)](p[n(518)],b),p[n(477)](y),p[n(510)](p.TEXTURE_2D,v)),p[n(473)](p[n(449)],6,p[n(531)],0),requestAnimationFrame(X)}function j(n,e,r){const i=d;let a=t[i(529)].create();t[i(529)][i(444)](a,a,[e,r,0]),o(a,a,[250,250,0]),p[i(481)](w,!1,a),p[i(510)](p.TEXTURE_2D,n),p[i(473)](p.TRIANGLES,6,p[i(531)],0)}function G(){const t=d,e=new Uint8Array([0,1,2,0,2,3]);b=Y(N,e),y=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=p[t(526)](y,t(478)),p.getUniformLocation(y,t(486)),function(){const n=d;v=O(E),h=p.createFramebuffer(),p[n(497)](p.FRAMEBUFFER,h),p.framebufferTexture2D(p[n(498)],p[n(533)],p[n(485)],v,0),p.bindFramebuffer(p[n(498)],null)}()}function O(n){const t=d,e=p.createTexture();return p[t(510)](p.TEXTURE_2D,e),n instanceof HTMLImageElement?p[t(443)](p[t(485)],0,p[t(441)],p.RGBA,p[t(531)],n):p[t(443)](p[t(485)],0,p.RGBA,n[t(490)],n[t(538)],0,p[t(441)],p.UNSIGNED_BYTE,null),p[t(463)](p[t(485)],p[t(467)],p[t(466)]),p[t(463)](p.TEXTURE_2D,p[t(493)],p.NEAREST),p[t(463)](p.TEXTURE_2D,p.TEXTURE_WRAP_S,p[t(492)]),p[t(463)](p.TEXTURE_2D,p[t(522)],p.CLAMP_TO_EDGE),e}function Y(n,t){const e=d,o=p.createBuffer();p.bindBuffer(p[e(518)],o),p[e(464)](p[e(518)],n,p[e(476)]);const r=3*Float32Array[e(442)]+2*Float32Array[e(442)];p[e(452)](0,3,p[e(521)],!1,r,0),p.enableVertexAttribArray(0),p[e(452)](1,2,p[e(521)],!1,r,3*Float32Array[e(442)]),p[e(491)](1);const i=p[e(511)]();return p[e(451)](p[e(502)],i),p[e(464)](p[e(502)],t,p[e(476)]),p[e(451)](p.ARRAY_BUFFER,null),o}return(n,t)=>{const e=d;return s(),u(e(499),T,[f("img",{id:"logo-texture",src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(524)}},null,8,A)])}}});function b(n){function t(n){const e=d;if("string"==typeof n)return function(n){}[e(520)]("while (true) {}")[e(472)](e(460));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(504)+e(471))[e(457)]("action"):function(){return!1}.constructor("debu"+e(471)).apply(e(475)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{R as default};

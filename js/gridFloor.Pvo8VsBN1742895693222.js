import{_ as n,ap as t}from"./three.DqHgeVY11742895693222.js";import{o as r,J as o}from"./@tresjs.xCsT8yve1742895693222.js";import{P as e}from"./tweakpane.ivGeiIdz1742895693222.js";import{d as i,a2 as s,o as c,H as u,N as a,aj as l,ak as f,r as d,e as v,f as g,g as p,j as h,u as m,al as C,m as y}from"./@vue.C4dqouNn1742895693222.js";import"./postprocessing.vTwfsnPH1742895693222.js";import"./@vueuse.q8TRDI1e1742895693222.js";const x=T;!function(n,t){const r=T,o=I();for(;;)try{if(798457===-parseInt(r(141))/1+parseInt(r(120))/2+-parseInt(r(112))/3+-parseInt(r(161))/4+-parseInt(r(159))/5*(parseInt(r(142))/6)+-parseInt(r(152))/7*(-parseInt(r(149))/8)+parseInt(r(108))/9*(parseInt(r(144))/10))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const w=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r.apply(t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function T(n,t){const r=I();return T=function(n,t){return r[n-=107]},T(n,t)}function I(){const n=["uCross","string","gridColor","while (true) {}","input","1259906CIYdzd","gger","uniforms","TresShaderMaterial","init","length","uGridColor","warn","constructor","uFloorColor","error","crossColor","Color","test","value","apply","call","bind","exception","gridThickness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","983243cJCuAM","5253474UeCjqD","DoubleSide","15510mdxtgI","debu",'{}.constructor("return this")( )',"stateObject","uGridThickness","13016eUNRnd","trace","action","1064vIrCjU","#7a91df","floorColor","uCrossColor","#ffffff","prototype","#c4d6ff","5hjnGWy","gridFloor","2647804KcFfYg","TresPlaneGeometry","16812xUqrsG","toString","set","console","1365885XfrTtZ","crossThickness","rotate-x"];return(I=function(){return n})()}!function(){w(this,(function(){const n=T,t=new RegExp("function *\\( *\\)"),r=new RegExp(n(140),"i"),o=D(n(124));t[n(133)](o+"chain")&&r.test(o+n(119))?D():o("0")}))()}();const W=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r.apply(t,arguments);return r=null,n}}:function(){};return n=!1,o}}();W(void 0,(function(){const n=T;let t;try{t=Function("return (function() "+n(146)+");")()}catch(e){t=window}const r=t[n(111)]=t[n(111)]||{},o=["log",n(127),"info",n(130),n(138),"table",n(150)];for(let i=0;i<o[n(125)];i++){const t=W[n(128)][n(157)][n(137)](W),e=o[i],s=r[e]||t;t.__proto__=W[n(137)](W),t[n(109)]=s.toString[n(137)](s),r[e]=t}}))();const b=[x(114)],k=i({__name:x(160),props:{gridColor:{default:x(158)},gridThickness:{default:.02},crossColor:{default:x(153)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:x(156)}},setup(t){const r=x,o=t,e={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n[r(143)],transparent:!0,uniforms:{uFloorColor:{value:new(n[r(132)])(o[r(154)])},uGridThickness:{value:o[r(139)]},uGridColor:{value:new(n[r(132)])(o[r(117)])},uCrossThickness:{value:o[r(113)]},uCross:{value:o[r(115)]},uCrossColor:{value:new(n[r(132)])(o[r(131)])}}};return s((()=>{const n=r;e[n(122)][n(129)][n(134)].set(o[n(154)]),e[n(122)][n(126)][n(134)][n(110)](o.gridColor),e.uniforms[n(155)][n(134)][n(110)](o[n(131)]),e[n(122)][n(148)][n(134)]=o.gridThickness,e[n(122)].uCrossThickness.value=o[n(113)],e.uniforms.uCross[n(134)]=o[n(115)]})),(n,t)=>{const o=r;return c(),u("TresMesh",{"rotate-x":-Math.PI/2},[t[0]||(t[0]=a(o(107),{args:[10,10,32,32]},null,-1)),a(o(123),l(f(e)),null,16)],8,b)}}});function D(n){function t(n){const r=T;if(typeof n===r(116))return function(n){}[r(128)](r(118))[r(135)]("counter");1!==(""+n/n)[r(125)]||n%20==0?function(){return!0}.constructor(r(145)+r(121))[r(136)](r(151)):function(){return!1}[r(128)]("debu"+r(121))[r(135)](r(147)),t(++n)}try{if(n)return t;t(0)}catch(r){}}!function(n,t){const r=A,o=F();for(;;)try{if(649188===-parseInt(r(208))/1+-parseInt(r(219))/2*(-parseInt(r(230))/3)+-parseInt(r(252))/4*(parseInt(r(210))/5)+parseInt(r(257))/6+-parseInt(r(218))/7*(parseInt(r(224))/8)+parseInt(r(241))/9*(parseInt(r(232))/10)+parseInt(r(203))/11*(-parseInt(r(225))/12))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const j=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[A(221)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){j(this,(function(){const n=A,t=new RegExp("function *\\( *\\)"),r=new RegExp(n(258),"i"),o=z(n(205));t.test(o+n(233))&&r.test(o+n(239))?z():o("0")}))()}();const _=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r.apply(t,arguments);return r=null,n}}:function(){};return n=!1,o}}();function A(n,t){const r=F();return A=function(n,t){return r[n-=200]},A(n,t)}function F(){const n=["warn","log","381139FMliye","地板颜色","init","网格厚度","constructor","339313hZlSAW","TresMeshStandardMaterial","2090WuLjlw","#000000","https://opensource.cdn.icegl.cn","十字厚度","toString","pos-z.jpg","prototype","gger","7yLhQto","142406oqsSgs","path","apply","resource.cos","action","412504TkRUQm","372fhKQgI","stateObject","info","string","TresTorusKnotGeometry","6CUqRBo","length","40430fzzzNl","chain","console","crossThickness","#ff33ff","exception","addBinding","input","网格颜色","2799OVNBzW","TresDirectionalLight","#ffffff","#ef57ff",'{}.constructor("return this")( )',"neg-x.jpg","bind","pos-x.jpg","TresPerspectiveCamera","table","floorColor","1168NTDODv","crossColor","TresCanvas","TresMesh","error","5018760tLWYzH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pos-y.jpg","debu","neg-z.jpg","neg-y.jpg","return (function() ","gridColor","uCross"];return(F=function(){return n})()}_(void 0,(function(){const n=A;let t;try{t=Function(n(263)+n(245)+");")()}catch(e){t=window}const r=t.console=t[n(234)]||{},o=[n(202),n(201),n(227),n(256),n(237),n(250),"trace"];for(let i=0;i<o.length;i++){const t=_[n(207)][n(216)][n(247)](_),e=o[i],s=r[e]||t;t.__proto__=_[n(247)](_),t[n(214)]=s[n(214)].bind(s),r[e]=t}}))();const U=i({__name:"gridFloor",setup(n){const i=A,s=d({alpha:!0,toneMapping:t,windowSize:!0,clearColor:3355443}),u=d({enableDamping:!0,autoRotate:!1}),x=d({gridColor:i(243),crossColor:i(244),floorColor:i(211),gridThickness:.02,crossThickness:.03,uCross:.29}),w=new e;return w.addBinding(x,i(264),{label:i(240)}),w[i(238)](x,"gridThickness",{label:i(206),min:.01,max:1,step:.01}),w.addBinding(x,i(253),{label:"十字颜色"}),w.addBinding(x,i(235),{label:i(213),min:.01,max:1,step:.01}),w.addBinding(x,i(200),{label:"十字大小",min:.01,max:1,step:.01}),w[i(238)](x,i(251),{label:i(204)}),(n,t)=>{const e=i,d=v(e(254));return c(),g(d,y(s,{"window-size":""}),{default:p((()=>[t[0]||(t[0]=a(e(249),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),h(m(r),l(f(u)),null,16),t[1]||(t[1]=a("TresAmbientLight",{intensity:.5},null,-1)),t[2]||(t[2]=a(e(242),{position:[15,15,15],intensity:1},null,-1)),t[3]||(t[3]=a(e(255),{position:[0,.5,0],scale:.2},[a(e(229),{args:[1,.35,100,32]}),a(e(209),{color:e(236),roughness:0,metalness:1})],-1)),h(k,l(f(x)),null,16),(c(),g(C,null,{default:p((()=>[h(m(o),{files:[e(248),e(246),e(259),e(262),e(215),e(261)],path:e(212)+"/images/skyBox/6jpg/"},null,8,[e(220)])])),_:1}))])),_:1},16)}}});function z(n){function t(n){const r=A;if(typeof n===r(228))return function(n){}[r(207)]("while (true) {}")[r(221)]("counter");1!==(""+n/n)[r(231)]||n%20==0?function(){return!0}.constructor(r(260)+r(217)).call(r(223)):function(){return!1}[r(207)](r(260)+r(217))[r(221)](r(226)),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{U as default};

import{c0 as t,a3 as n,C as e,k as r}from"./three.5octV-9b1728467445434.js";import{z as o}from"./@tresjs.ED4ePb8T1728467445434.js";import{R as c}from"./all.three.HbW3WA7Q1728467445434.js";import{d as a,b as i,a4 as s,a3 as u,o as l,E as f,L as p,m,u as v}from"./@vue.JNsx1iN61728467445434.js";function d(){const t=["length","log","#include <project_vertex>","function *\\( *\\)","stateObject","constructor","replace","string","gger","1842840ilGkjf","#include <emissivemap_fragment>","while (true) {}","1IhRCnZ","apply","error","fragmentShader","prototype","counter","vertexShader","action","void main() {",'{}.constructor("return this")( )',"5274104PyrILU","176498VnnEeZ","__proto__","170160PJzWtM","chain","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","warn","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","1205CDNbIA","bind","init","7394200xDpukU","exception","return (function() ","call","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","info","1299678RhxiuP","debu","1964ezbpeY","console","toString","7qOgTjL"];return(d=function(){return t})()}!function(t,n){const e=x,r=d();for(;;)try{if(379609===-parseInt(e(366))/1*(parseInt(e(377))/2)+parseInt(e(393))/3+parseInt(e(395))/4*(-parseInt(e(384))/5)+parseInt(e(379))/6+-parseInt(e(398))/7*(-parseInt(e(376))/8)+parseInt(e(363))/9+-parseInt(e(387))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(367)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp(t(402)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(386));n.test(r+t(380))&&e.test(r+"input")?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(367)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(389)+t(375)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(396)]||{},r=[t(400),t(382),t(392),t(368),t(388),"table","trace"];for(let o=0;o<r.length;o++){const n=g[t(404)][t(370)][t(385)](g),c=r[o],a=e[c]||n;n[t(378)]=g[t(385)](g),n[t(397)]=a[t(397)][t(385)](a),e[c]=n}}))();function x(t,n){const e=d();return(x=function(t,n){return e[t-=362]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(406))return function(t){}[e(404)](e(365))[e(367)](e(371));1!==(""+t/t)[e(399)]||t%20==0?function(){return!0}[e(404)](e(394)+e(362))[e(390)](e(373)):function(){return!1}[e(404)](e(394)+e(362)).apply(e(403)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=j;!function(t,n){const e=j,r=w();for(;;)try{if(378721===parseInt(e(145))/1*(-parseInt(e(133))/2)+parseInt(e(115))/3*(parseInt(e(117))/4)+parseInt(e(137))/5+parseInt(e(138))/6*(-parseInt(e(154))/7)+-parseInt(e(136))/8+-parseInt(e(143))/9*(-parseInt(e(139))/10)+parseInt(e(153))/11*(parseInt(e(124))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(142)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=j,n=new RegExp(t(119)),e=new RegExp(t(118),"i"),r=S("init");n[t(121)](r+t(132))&&e.test(r+"input")?S():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(142)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(){const t=["counter","rotation-x","attributes","1885359BxGbsC","color","4EdnjiK","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","repeat","test","length","showGridHelper","81036onWWQW","console","TresPlaneGeometry","tpgRef","table","primitive","exception",'{}.constructor("return this")( )',"chain","2HEZWqK","add","toString","5065552SLYENx","3443330UDvcYm","1461864GgTYjV","725260OYiCba","#ffffff","return (function() ","apply","9IRvmjo","channel","296158MovDUT","tmsmRef","object","onBeforeRender","prototype","__proto__","#444","debu","264ARzauE","7qTQZXq","info","gger","string","wrapT","wrapS","textureMatrix","mirror","aoMap","call","renderTargetUniform","value","assign","mixStrength","tmRef","warn","bind","TresMeshStandardMaterial","uniforms","constructor","reflectMap","error","visible","update"];return(w=function(){return t})()}b(void 0,(function(){const t=j;let n;try{n=Function(t(141)+t(131)+");")()}catch(o){n=window}const e=n[t(125)]=n[t(125)]||{},r=["log",t(169),t(155),t(175),t(130),t(128),"trace"];for(let c=0;c<r.length;c++){const n=b.constructor[t(149)].bind(b),o=r[c],a=e[o]||n;n[t(150)]=b[t(170)](b),n[t(135)]=a[t(135)][t(170)](a),e[o]=n}}))();const C=[I(179)],M=[I(147),I(176)];function j(t,n){const e=w();return(j=function(t,n){return e[t-=114]})(t,n)}const E=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(140)}},async setup(a){const d=I;let h,g;const y=a,_=new t(9.5,10),b=i(),w=i(),j=i(),E=new c,S={mirror:{value:y[d(161)]},mixStrength:{value:y[d(167)]}},z=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var T=0;T<3;T++)z[T][d(159)]=n,z[T][d(158)]=n,z[T][d(120)].set(16,16);const R={color:new e(d(151)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},U=t=>{const n=d;t[n(172)][n(174)]=E[n(164)],t[n(172)][n(160)]=E.textureMatrixUniform,t.uniforms=Object[n(166)](t[n(172)],S),(t=>{const n=x;t[n(372)]=t[n(372)].replace(n(374),n(381)),t[n(372)]=t[n(372)].replace(n(401),n(391))})(t),(t=>{const n=x;t.fragmentShader=t[n(369)][n(405)](n(374),n(383)),t[n(369)]=t[n(369)][n(405)](n(364),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=d;b[t(165)]&&(b[t(165)][t(114)].uv1=b.value[t(114)].uv),j[t(165)]&&(j.value[t(162)][t(144)]=1,j.value.onBeforeCompile=U),w[t(165)]&&(w.value[t(134)](E),w[t(165)][t(148)]=(n,e,r)=>{E[t(177)](n,e,r)}),y[t(116)]&&j[t(165)]&&(j[t(165)][t(116)]=new e(y[t(116)]))})),(t,n)=>{const e=d;return l(),f("TresGroup",null,[p("TresMesh",{ref_key:e(168),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(126),{ref_key:e(127),ref:b,args:[10,10]},null,512),p(e(171),m({ref_key:e(146),ref:j},R),null,16)],8,C),p(e(129),{object:v(_),visible:t[e(123)]},null,8,M)])}}});function S(t){function n(t){const e=j;if(typeof t===e(157))return function(t){}.constructor("while (true) {}")[e(142)](e(178));1!==(""+t/t)[e(122)]||t%20==0?function(){return!0}[e(173)](e(152)+"gger")[e(163)]("action"):function(){return!1}[e(173)](e(152)+e(156)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as _};

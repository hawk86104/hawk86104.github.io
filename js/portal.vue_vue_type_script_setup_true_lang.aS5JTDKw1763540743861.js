import{l as e}from"./lightNoise.Bwk8SPgh1763540743861.js";import{d as n,H as o,o as l,u as i,J as t}from"./@vue.Co_gxueH1763540743861.js";import{x as r}from"./three.rXKzP9fQ1763540743861.js";const a=["material"],s=n({__name:"portal",props:{globalUniforms:{}},setup(n){const s=n,f=new r({color:16737843,transparent:!0,onBeforeCompile:n=>{n.uniforms.time=s.globalUniforms.time,n.uniforms.globalBloom=s.globalUniforms.globalBloom,n.fragmentShader=`\n      #define S(a, b, t) smoothstep(a, b, t)\n      uniform float time;\n      uniform float globalBloom;\n      \n      ${e}\n      \n      float getTri(vec2 uv, float shift){\n        uv = uv * 2.-1.;\n        float a = atan(uv.x + shift,uv.y) + 3.1415926;\n        float r = 3.1415926 * 2./3.;\n        return cos(floor(.5+a/r)*r-a)*length(uv);\n      }\n      \n      float doubleTri(vec2 uv, float still, float width){\n        vec2 baseUv = uv;\n        vec2 e2 = fwidth(baseUv * 20.);\n        float e = min(e2.x, e2.y) * width;\n        float baseTri = getTri(baseUv, cos(baseUv.y * 31. + time) * sin(baseUv.y * 27. + time * 4.) * 0.025 * still);\n        float td = abs(fract(baseTri * 20.) - 0.5);\n        float tri = S(e, 0., td) - S(0., e, td);\n        tri *= step(0.4, baseTri) -  step(0.5, baseTri);\n        return tri;\n      }\n      \n      ${n.fragmentShader}\n    `.replace("vec4 diffuseColor = vec4( diffuse, opacity );","\n        float tri = doubleTri(vUv, 0.0, 16.);\n        float triWave = doubleTri(vUv, 1.0, 8.);\n        float fullTri = max(tri, triWave);\n        \n        if (fullTri < 0.5) discard;\n        \n        vec3 col = mix(diffuse, vec3(0.75), fullTri);\n        \n        float blinking = smoothNoise(vec2(time, time * 5.));\n        blinking = blinking * 0.9 + 0.1;\n        \n        vec4 diffuseColor = vec4(col * blinking, fullTri);\n      ").replace("#include <dithering_fragment>","#include <dithering_fragment>\n        if (globalBloom > 0.5) {\n          gl_FragColor = vec4(gl_FragColor.rgb * 0.375, fullTri);\n        }\n      ")}});return f.defines={USE_UV:""},(e,n)=>(l(),o("TresMesh",{material:i(f),position:[0,3.75,-12]},[...n[0]||(n[0]=[t("TresPlaneGeometry",{args:[5,5]},null,-1)])],8,a))}});export{s as _};

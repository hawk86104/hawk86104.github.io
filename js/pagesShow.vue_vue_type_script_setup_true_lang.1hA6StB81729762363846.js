import{_ as t,C as n,cf as o,cg as e,ch as r,ci as i,m as u,b$ as s,ak as c,am as a}from"./three.CQvcOG671729762363846.js";import{c as l,U as f,Y as p}from"./@tresjs.CmAaFQUS1729762363846.js";import{C as d}from"./three-custom-shader-material.CWa5qaDo1729762363846.js";import"./object-hash.BiCA96VN1729762363846.js";import"./@amap.irWeW_Ar1729762363846.js";import"./glsl-tokenizer.DodQ2RCy1729762363846.js";import{d as m,b as h,a2 as g,w as y,o as w,E as v,u as b,r as _,a5 as C,e as I,f as x,g as M,L as T,j,aj as O,ak as S,F as B,J as A,H as L,m as R}from"./@vue.n8X62v121729762363846.js";!function(t,n){const o=k,e=H();for(;;)try{if(496116===-parseInt(o(375))/1*(parseInt(o(373))/2)+parseInt(o(367))/3*(-parseInt(o(380))/4)+-parseInt(o(385))/5*(parseInt(o(365))/6)+-parseInt(o(395))/7*(parseInt(o(398))/8)+-parseInt(o(393))/9*(-parseInt(o(402))/10)+parseInt(o(379))/11+parseInt(o(403))/12)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=k,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(376),"i"),e=z(t(378));n[t(384)](e+t(374))&&o.test(e+"input")?z():e("0")}))()}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(390)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function k(t,n){const o=H();return(k=function(t,n){return o[t-=363]})(t,n)}function H(){const t=["5xUFsds","LANDMASS","toString","name","stateObject","apply","console","call","72ZgLmmI","constructor","154WBuOSv","string","info","240280AiWyex","log","traverse","counter","378660JOADLR","21246480qLHLXA","__proto__","while (true) {}","4057338JiAhoz","bind","597LTdImU","warn","table",'{}.constructor("return this")( )',"action","trace","13348jzVtLb","chain","133GSOxrQ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","init","10121232UfJSsx","5484DBbljC","return (function() ","length","exception","test"];return(H=function(){return t})()}E(void 0,(function(){const t=k,n=function(){const t=k;let n;try{n=Function(t(381)+t(370)+");")()}catch(o){n=window}return n}(),o=n[t(391)]=n[t(391)]||{},e=[t(399),t(368),t(397),t(377),t(383),t(369),t(372)];for(let r=0;r<e[t(382)];r++){const n=E[t(394)].prototype[t(366)](E),i=e[r],u=o[i]||n;n[t(363)]=E.bind(E),n[t(387)]=u.toString.bind(u),o[i]=n}}))();const W=async()=>{const t=k,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(400)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n.name&&(o=n),n[i(388)]===i(386)&&(e=n),"ROADS"===n[i(388)]&&(r=n)})),{model:n,city:o,land:e,roads:r}};function z(t){function n(t){const o=k;if(typeof t===o(396))return function(t){}.constructor(o(364))[o(390)](o(401));1!==(""+t/t).length||t%20==0?function(){return!0}[o(394)]("debugger")[o(392)](o(371)):function(){return!1}[o(394)]("debugger").apply(o(389)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const F=P;!function(t,n){const o=P,e=$();for(;;)try{if(569188===-parseInt(o(258))/1+parseInt(o(249))/2*(-parseInt(o(290))/3)+-parseInt(o(300))/4*(parseInt(o(238))/5)+parseInt(o(265))/6*(-parseInt(o(262))/7)+-parseInt(o(292))/8*(-parseInt(o(272))/9)+parseInt(o(247))/10+-parseInt(o(257))/11*(-parseInt(o(289))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const U=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[P(243)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){U(this,(function(){const t=P,n=new RegExp(t(298)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=J(t(267));n[t(283)](e+t(251))&&o[t(283)](e+t(261))?J():e("0")}))()}();const G=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[P(243)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function P(t,n){const o=$();return(P=function(t,n){return o[t-=235]})(t,n)}G(void 0,(function(){const t=P,n=function(){const t=P;let n;try{n=Function(t(242)+t(256)+");")()}catch(o){n=window}return n}(),o=n[t(276)]=n.console||{},e=[t(239),t(268),t(255),t(280),t(263),t(260),t(271)];for(let r=0;r<e[t(297)];r++){const n=G[t(252)][t(259)].bind(G),i=e[r],u=o[i]||n;n[t(270)]=G[t(281)](G),n[t(253)]=u.toString.bind(u),o[i]=n}}))();const N=[F(241)],Z=m({__name:F(296),props:{model:{},bulidingsColor:{default:F(275)},landColor:{default:"#112233"},topColor:{default:F(269)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=F,r=o,i=h(0),u=r[e(248)][e(264)];u[e(291)]=1001;const s=r[e(248)][e(302)];(()=>{const o=e,{geometry:s}=u;s[o(254)](),s[o(277)]();const{max:c,min:a}=s.boundingBox;if(u.material[o(303)])return;const l=new d({baseMaterial:u[o(301)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(284)])(r[o(295)])},uOpacity:{value:r.opacity},uLightColor:{value:new(t[o(284)])("#ffffff")},uTopColor:{value:new n(r[o(244)])},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[o(236)]});u.material.dispose(),u[o(301)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[e(278)]+=t})),g((()=>{const n=e;r.bulidingsColor&&u[n(301)][n(288)][n(266)][n(278)][n(237)](r[n(295)]),r[n(287)]&&((n,o)=>{const i=e;let u;"cu"===n||n===i(302)&&(u=Array[i(299)](s[i(301)])?s.material:[s[i(301)]],u[i(285)]((n=>{const e=i;n[o][e(237)](r.landColor),n[e(279)]=t[e(236)]})))})(n(302),n(274)),r[n(250)]&&(u[n(301)][n(288)].uOpacity[n(278)]=r[n(250)])})),y(r,((t,n)=>{const o=e;u.material.uniforms.uGradient[o(278)]=t[o(235)]}));const a=r[e(248)][e(248)][e(294)]();return(t,n)=>(w(),v("primitive",{object:b(a)},null,8,N))}});function $(){const t=["gradient","DoubleSide","setStyle","10NBkDoi","log","while (true) {}","object","return (function() ","apply","topColor","debu","stateObject","7002630irWvrU","model","24ZqDlrr","opacity","chain","constructor","toString","computeBoundingBox","info",'{}.constructor("return this")( )',"2909423uljqFH","524653YxWBaj","prototype","table","input","21gxDrGB","exception","city","1785066oaXGxm","uColor","init","warn","#ffff00","__proto__","trace","261YWiDvT","call","color","#e523ff","console","computeBoundingSphere","value","side","error","bind","string","test","Color","forEach","counter","landColor","uniforms","72jopdnf","193014NuTdsC","renderOrder","223320SHMvdf","gger","clone","bulidingsColor","buildingsModelCustomShader","length","function *\\( *\\)","isArray","676652IEWvqN","material","land","__csm"];return($=function(){return t})()}function J(t){function n(t){const o=P;if(typeof t===o(282))return function(t){}[o(252)](o(240))[o(243)](o(286));1!==(""+t/t)[o(297)]||t%20==0?function(){return!0}[o(252)](o(245)+o(293))[o(273)]("action"):function(){return!1}[o(252)]("debu"+o(293))[o(243)](o(246)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const Y=Q;!function(t,n){const o=Q,e=V();for(;;)try{if(552500===-parseInt(o(465))/1+parseInt(o(445))/2*(parseInt(o(433))/3)+-parseInt(o(461))/4+parseInt(o(420))/5*(-parseInt(o(427))/6)+parseInt(o(436))/7+parseInt(o(443))/8+parseInt(o(437))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){q(this,(function(){const t=Q,n=new RegExp(t(463)),o=new RegExp(t(432),"i"),e=nt(t(459));n[t(424)](e+t(442))&&o[t(424)](e+"input")?nt():e("0")}))()}();const X=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(421)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function V(){const t=["fromEdgesGeometry","init","warn","2914388UsBUbV","length","function *\\( *\\)","constructor","531116tKpmNr","gger","Shader"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","geometry","resolution","error","builds","table","width","matrix","style","innerHeight","1347920NvULaU","apply","bind","toString","test","applyMatrix4","object","24JHrIql","action","linewidth","uColor","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","19854OfBRAU","Wireframe","trace","771393cOmqoO","22502160rjQOrH","opacity","return (function() ","primitive","buildingsLines","chain","1552608veLBsP","value","26ddwFdn","exception","log","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","stateObject","debu","prototype","#FFF","counter","renderOrder","console","uOpacity","color"];return(V=function(){return t})()}function Q(t,n){const o=V();return(Q=function(t,n){return o[t-=412]})(t,n)}X(void 0,(function(){const t=Q;let n;try{n=Function(t(439)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n.console=n[t(455)]||{},e=[t(447),t(460),"info",t(413),t(446),t(415),t(435)];for(let i=0;i<e[t(462)];i++){const n=X.constructor[t(451)][t(422)](X),r=e[i],u=o[r]||n;n.__proto__=X.bind(X),n[t(423)]=u[t(423)][t(422)](u),o[r]=n}}))();const K=[Y(426)],tt=m({__name:Y(441),props:{builds:{},width:{default:1},color:{default:Y(452)},opacity:{default:1},style:{default:Y(434)}},setup(t){const s=Y,c=t;let a=null,l=null;if(c[s(418)]===s(434)){const t=new o(c[s(414)].geometry);let n=(new e)[s(458)](t),u=new r({color:c[s(457)],linewidth:c[s(416)],opacity:c[s(438)],transparent:!0,depthWrite:!0,depthTest:!0});u[s(412)].set(window.innerWidth,window[s(419)]),a=new i(n,u),a[s(425)](c.builds[s(417)].clone())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[s(457)])},uOpacity:{value:c.opacity}},vertexShader:s(448),fragmentShader:s(468)};const t=new o(c[s(414)][s(469)]),e=new u(l);a=new LineSegments(t,e),a[s(425)](c[s(414)][s(417)].clone()),a.material.linewidth=c[s(416)],a[s(454)]=1e3}return g((()=>{const t=s;c[t(418)]===t(467)&&(c[t(457)]&&(l.uniforms[t(430)].value=new n(c.color)),c[t(438)]&&(l.uniforms[t(456)][t(444)]=c[t(438)])),c[t(418)]===t(434)&&(c[t(457)]&&(a[t(431)][t(457)]=new n(c[t(457)])),c[t(438)]&&(a[t(431)][t(438)]=c[t(438)])),c[t(416)]&&(a.material[t(429)]=c[t(416)])})),(t,n)=>{const o=s;return w(),v(o(440),{object:b(a)},null,8,K)}}});function nt(t){function n(t){const o=Q;if("string"==typeof t)return function(t){}[o(464)]("while (true) {}")[o(421)](o(453));1!==(""+t/t)[o(462)]||t%20==0?function(){return!0}[o(464)](o(450)+o(466)).call(o(428)):function(){return!1}[o(464)](o(450)+o(466))[o(421)](o(449)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const ot=it;!function(t,n){const o=it,e=ut();for(;;)try{if(921695===parseInt(o(521))/1+parseInt(o(537))/2*(parseInt(o(504))/3)+-parseInt(o(491))/4*(parseInt(o(532))/5)+-parseInt(o(539))/6+-parseInt(o(520))/7*(parseInt(o(530))/8)+parseInt(o(503))/9+parseInt(o(502))/10*(parseInt(o(507))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[it(522)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){et(this,(function(){const t=it,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(499),"i"),e=pt(t(534));n[t(524)](e+t(525))&&o[t(524)](e+"input")?pt():e("0")}))()}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[it(522)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function it(t,n){const o=ut();return(it=function(t,n){return o[t-=490]})(t,n)}function ut(){const t=["pagesShow","info","log","showBuildings","showGridHelper","action","210XJlifv","1698038EILAfo","apply","table","test","chain","TresGridHelper","counter","constructor","call","290152bVwheC","TresDirectionalLight","8674585UWxmSY","model","init","__proto__","perspectiveCameraRef","35544cngnyN","length","2941410RCTrJN","#ffffff","builds","gger","trace","exception","while (true) {}","4pEDlCT","stateObject","return (function() ","prototype","debu","console","disableRender","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString",'{}.constructor("return this")( )',"6170IsjPIy","6728661jXLRRa","246YsXYck","autoRotate","TresAxesHelper","5918DyBElC","showAxesHelper","bind","$slots","warn","#000000","tcRef"];return(ut=function(){return t})()}rt(void 0,(function(){const t=it,n=function(){const t=it;let n;try{n=Function(t(493)+t(501)+");")()}catch(o){n=window}return n}(),o=n[t(496)]=n[t(496)]||{},e=[t(516),t(511),t(515),"error",t(544),t(523),t(543)];for(let r=0;r<e[t(538)];r++){const n=rt.constructor[t(494)][t(509)](rt),i=e[r],u=o[i]||n;n[t(535)]=rt[t(509)](rt),n[t(500)]=u.toString[t(509)](u),o[i]=n}}))();const st=T("TresAmbientLight",{color:"#ffffff"},null,-1),ct=T(ot(531),{position:[100,100,0],intensity:.5,color:ot(540)},null,-1),at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=m({__name:ot(514),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let o,e;const r=t,i=_({clearColor:n(512),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r[n(497)]}),u=_({autoRotate:r[n(505)],enableDamping:!0});let l=null;r.showBuildings&&([o,e]=C((()=>W())),o=await o,e(),l=o);const f=h(),d=h();return(t,o)=>{const e=n,s=I("TresCanvas");return w(),x(s,R({ref_key:e(513),ref:d},i,{"window-size":""}),{default:M((()=>[T("TresPerspectiveCamera",{ref_key:e(536),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(b(p),O(S(u)),null,16),st,ct,r[e(517)]&&b(l)?(w(),v(B,{key:0},[j(Z,{model:b(l)},null,8,[e(533)]),j(tt,{builds:b(l).city,color:"#000"},null,8,[e(541)])],64)):A("",!0),L(t[e(510)],"ability"),r[e(508)]?(w(),v(e(506),at)):A("",!0),r[e(518)]?(w(),v(e(526),lt)):A("",!0)])),_:3},16)}}});function pt(t){function n(t){const o=it;if(typeof t===o(498))return function(t){}[o(528)](o(490))[o(522)](o(527));1!==(""+t/t).length||t%20==0?function(){return!0}[o(528)]("debu"+o(542))[o(529)](o(519)):function(){return!1}[o(528)](o(495)+o(542))[o(522)](o(492)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{Z as _,tt as a,ft as b,W as l};

import{m as n,e as t}from"./@tresjs.vA_UT8oy1734746792122.js";import{_ as o,V as e,cm as r,cn as i,co as u,a0 as c,cK as a}from"./three.1FILWcBb1734746792122.js";import{z as s}from"./three-custom-shader-material.uwcZNtd-1734746792122.js";import{T as l}from"./3d-tiles-renderer.7MRHQPjP1734746792122.js";import{d as f,b as p,a3 as d,o as m,D as h,J as g,u as w}from"./@vue.-THQH3GC1734746792122.js";import{P as v,U as y,M as x,T as _,a as b}from"./index.6g8r1CNR1734746792122.js";import"./mapBoxShow.vue_vue_type_script_setup_true_lang.lm6LCwJX1734746792122.js";import"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.3s9xT6371734746792122.js";import"./utils.rZz3n_ca1734746792122.js";function I(){const n=["Quaternion","counter","input","1118575QEHDCH","position","3CDcDty","setFromMatrixPosition","log","Sphere","2027012sqodTP","clone","trace","return (function() ","group","test","chain","quaternion","prototype","30OsuVRn","Box3","normalize","info","370907ZXRRMr","73188CjxVEy","constructor","apply","init","6qIpXot","259252BswCDs","crossVectors","bind","Vector3","length","error","debu","Matrix4","2374994ctXdFL","string","console","gger","getBoundingSphere","5434424NzIUeM","toString","center"];return(I=function(){return n})()}function C(n,t){const o=I();return(C=function(n,t){return o[n-=265]})(n,t)}!function(n,t){const o=C,e=I();for(;;)try{if(929187===-parseInt(o(306))/1+parseInt(o(276))/2+-parseInt(o(289))/3*(-parseInt(o(293))/4)+parseInt(o(287))/5*(parseInt(o(267))/6)+parseInt(o(268))/7+-parseInt(o(281))/8+parseInt(o(307))/9*(parseInt(o(302))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const M=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[C(265)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){M(this,(function(){const n=C,t=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=T(n(266));t.test(e+n(299))&&o[n(298)](e+n(286))?T():e("0")}))()}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();z(void 0,(function(){const n=C,t=function(){const n=C;let t;try{t=Function(n(296)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t.console=t[n(278)]||{},e=[n(291),"warn",n(305),n(273),"exception","table",n(295)];for(let r=0;r<e[n(272)];r++){const t=z[n(308)][n(301)].bind(z),i=e[r],u=o[i]||t;t.__proto__=z[n(270)](z),t[n(282)]=u.toString[n(270)](u),o[i]=t}}))();const j=n=>{n.onLoadTileSet=t=>{const r=C,i=new(o[r(303)]),u=new(o[r(292)]),c=new(o[r(275)]);let a=null,s=0;n.getOrientedBounds(i,c)?(a=(new(o[r(271)]))[r(290)](c),s=a[r(272)]()):n[r(280)](u)&&(a=u[r(283)][r(294)](),s=a.length());const l=((n,t)=>{const e=C,r=new(o[e(284)]),i=(new(o[e(271)]))[e(269)](n,t);return r.x=i.x,r.y=i.y,r.z=i.z,r.w=1+n[e(294)]().dot(t),r[e(304)](),r})(null==a?void 0:a[r(304)](),new e(0,1,0));n.group[r(300)].x=l.x,n.group[r(300)].y=l.y,n[r(297)][r(300)].z=l.z,n[r(297)][r(300)].w=l.w,n[r(297)][r(288)].z=-s}};function T(n){function t(n){const o=C;if(typeof n===o(277))return function(n){}[o(308)]("while (true) {}")[o(265)](o(285));1!==(""+n/n)[o(272)]||n%20==0?function(){return!0}[o(308)](o(274)+o(279)).call("action"):function(){return!1}[o(308)]("debu"+o(279))[o(265)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const B=P;!function(n,t){const o=P,e=E();for(;;)try{if(174616===-parseInt(o(519))/1*(-parseInt(o(527))/2)+-parseInt(o(549))/3+parseInt(o(545))/4*(parseInt(o(532))/5)+parseInt(o(552))/6+parseInt(o(538))/7*(parseInt(o(492))/8)+-parseInt(o(526))/9*(-parseInt(o(521))/10)+-parseInt(o(525))/11*(parseInt(o(524))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const S=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){S(this,(function(){const n=P,t=new RegExp(n(479)),o=new RegExp(n(491),"i"),e=Z(n(508));t[n(490)](e+"chain")&&o[n(490)](e+n(478))?Z():e("0")}))()}();const O=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();O(void 0,(function(){const n=P,t=function(){const n=P;let t;try{t=Function(n(553)+n(489)+");")()}catch(o){t=window}return t}(),o=t[n(531)]=t.console||{},e=[n(515),n(530),n(518),n(523),"exception",n(497),n(487)];for(let r=0;r<e[n(510)];r++){const t=O[n(536)][n(504)][n(542)](O),i=e[r],u=o[i]||t;t[n(513)]=O[n(542)](O),t.toString=u[n(528)].bind(u),o[i]=t}}))();const R=[B(539)];function P(n,t){const o=E();return(P=function(n,t){return o[n-=475]})(n,t)}function E(){const n=["trace","TresGroup",'{}.constructor("return this")( )',"test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8sHIXqK","computeBoundingBox","#e523ff","scene","bulidingsColor","table","receiveShadow","geometry","https://jdvop.oss-cn-qingdao.aliyuncs.com/mapv-data/titleset/sz_ns/no.json","dispose","errorTarget","opacity","prototype","call","update","material","init","clone","length","gradient","add","__proto__","topColor","log","group","EdgesGeometry","info","1jbgSgK","string","3020NWtJzJ","counter","error","233232hBUTxt","198bTSCJw","10134OlDghw","10252Ompqec","toString","innerWidth","warn","console","28580qGJkzf","value","matrix","onLoadModel","constructor","updateMatrixWorld","765023gpxEgN","object","MeshPhongMaterial","camera","bind","setResolutionFromRenderer","while (true) {}","4mqFMJa","width","Color","primitive","345687FKPONi","stateObject","apply","1077060vbcTsC","return (function() ","computeBoundingSphere","gger","parent","innerHeight","input","function *\\( *\\)","tilesBuildings","setCamera","debu","castShadow","traverse","fromEdgesGeometry","set"];return(E=function(){return n})()}const D=f({__name:B(480),props:{bulidingsColor:{default:B(494)},topColor:{default:"#ffff00"},opacity:{default:.8},gradient:{type:Boolean,default:!0},camera:{}},setup(e){const a=B,f=e,v=p(0),y=new l(a(500));y[a(502)]=2,y[a(535)]=n=>{const t=a;n[t(495)][t(484)]((n=>{const e=t;if(n.isMesh){(n=>{const t=P,{geometry:e}=n;e[t(493)](),e[t(554)]();const{max:r,min:i}=e.boundingBox,u=new s({baseMaterial:new(o[t(540)]),vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor; // 顶部颜色\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main() {\n  // 转世界坐标\n  uMax_world = modelMatrix * vec4(uMax, 1.);\n  uMin_world = modelMatrix * vec4(uMin, 1.);\n  vec3 distColor = uColor;\n  float residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n  float rate = residue / uCircleTime;\n  float lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n  if (uMin_world.y + lightOffset < vPosition.y &&\n      uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n    csm_DiffuseColor = vec4(uLightColor, uOpacity);\n  } else {\n    csm_DiffuseColor = vec4(distColor, uOpacity);\n  }\n\n  // 根据高度计算颜色\n  if (uGradient) {\n    float rateHight =\n        (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y);\n    // vec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight * 0.6);\n    float mixNumber = clamp(rateHight * 2.3 - 1.5, 0., 1.);\n    vec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, mixNumber);\n\n    csm_DiffuseColor = vec4(outColor, uOpacity);\n  }\n}",silent:!0,uniforms:{uMax:{value:r},uMin:{value:i},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(o[t(547)])(f[t(496)])},uOpacity:{value:f[t(503)]},uLightColor:{value:new(o[t(547)])("#ffffff")},uTopColor:{value:new(o[t(547)])(f[t(514)])},uTime:v,uGradient:{value:f[t(511)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:c});n[t(507)][t(501)](),n[t(507)]=u})(n),n[e(498)]=!1,n[e(483)]=!1;const t=new(o[e(517)])(n[e(499)][e(509)]());let a=(new r)[e(485)](t),l=new i({color:0,linewidth:1,opacity:1,transparent:!0,depthWrite:!0,depthTest:!0});l.resolution[e(486)](window[e(529)],window[e(477)]);const p=new u(a,l);p.applyMatrix4(n[e(534)].clone()),n[e(476)][e(512)](p)}}))},j(y);const{renderer:x,sizes:_}=n();d((()=>{const n=a;_.width.value&&(y[n(481)](f[n(541)]),y[n(543)](f.camera,x[n(533)]))}));const{onBeforeLoop:b}=t();return b((({delta:n})=>{const t=a;v.value+=2*n,f[t(541)]&&_[t(546)].value&&(f[t(541)][t(537)](),y[t(506)]())})),(n,t)=>{const o=a;return m(),h(o(488),null,[g(o(548),{object:w(y)[o(516)]},null,8,R)])}}});function Z(n){function t(n){const o=P;if(typeof n===o(520))return function(n){}[o(536)](o(544))[o(551)](o(522));1!==(""+n/n)[o(510)]||n%20==0?function(){return!0}[o(536)](o(482)+o(475))[o(505)]("action"):function(){return!1}[o(536)](o(482)+"gger").apply(o(550)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const F=W;!function(n,t){const o=W,e=G();for(;;)try{if(494915===-parseInt(o(176))/1+-parseInt(o(209))/2+-parseInt(o(182))/3*(-parseInt(o(187))/4)+-parseInt(o(201))/5+-parseInt(o(208))/6*(-parseInt(o(181))/7)+parseInt(o(188))/8*(parseInt(o(220))/9)+parseInt(o(212))/10*(-parseInt(o(179))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const H=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function W(n,t){const o=G();return(W=function(n,t){return o[n-=164]})(n,t)}!function(){H(this,(function(){const n=W,t=new RegExp(n(204)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=q(n(225));t[n(186)](e+n(171))&&o[n(186)](e+n(196))?q():e("0")}))()}();const L=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[W(166)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function G(){const n=["dampingFactor","#4688b5","251077seDpPw","counter","debu","2418779eZhaRK","filter","4445lWFgMI","237nVIwGj","toString","exception","source","test","39336ETpgGV","8472RRHnBN","Vector3","render","monochrome","enableDamping","maxZoom","return (function() ","camera","input","length","minDistance","bbox","Color","2171555qzKZvW","table","primitive","function *\\( *\\)","set","position","prototype","5646OmElRF","807014sBzWlE","abs","log","20bdZwlw","https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}","showTileNo","gger","useWorker","trace","info","value","5517mwRQtD","coordType","console","tileMapBuildingsMesh","flatShading","init","mapCenter","updateProjectionMatrix","update","error","apply","bind","string","__proto__","action","chain","lookAt","constructor"];return(G=function(){return n})()}L(void 0,(function(){const n=W;let t;try{t=Function(n(194)+'{}.constructor("return this")( ));')()}catch(r){t=window}const o=t.console=t[n(222)]||{},e=[n(211),"warn",n(218),n(165),n(184),n(202),n(217)];for(let i=0;i<e[n(197)];i++){const t=L.constructor[n(207)].bind(L),r=e[i],u=o[r]||t;t[n(169)]=L[n(167)](L),t[n(183)]=u[n(183)][n(167)](u),o[r]=t}}))();const V=["object","rotation"],k=f({__name:F(223),props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},mapCenter:{},camera:{}},setup(e,{expose:r}){const i=F,u=e,{renderer:c,scene:s}=n(),l=new v;l[i(221)]=y;const f=new x;f[i(185)]=i(213),f[i(214)]=!1,f[i(216)]=!0;const p=new _(l,f);p.showBoundingBox=!1,p.wireframe=!1,p[i(224)]=!1,p[i(180)]={opposite:!0,genBright:1.3,genContrast:1,genSaturation:1};let g=new(o[i(200)])(i(175));p.filter[i(191)]={r:g.r,g:g.g,b:g.b};const I=new b;I.provider=p,I[i(199)]=u[i(199)],I[i(193)]=u.maxZoom,u[i(195)].up=new(o[i(189)])(0,1,0),u[i(195)].position.set(u[i(226)][0],u[i(226)][2],2e3-u.mapCenter[1]),u.camera[i(172)](new(o[i(189)])(u.camera.position.x,0,u[i(195)][i(206)].z-3e3)),I[i(195)]=u[i(195)];let C=null;d((()=>{const n=i;c[n(219)]&&(C=new a(u[n(195)],c[n(219)].domElement),C[n(192)]=!0,C[n(174)]=.05,C[n(198)]=600,C.position0[n(205)](u[n(195)][n(206)].x,u[n(195)][n(206)].y,u.camera.position.z),C.target[n(205)](u.camera[n(206)].x,0,u[n(195)][n(206)].z-2e3))}));const{onLoop:M}=t();return M((()=>{const n=i;if(c[n(219)]){const t=50*Math[n(210)](u.camera.position.y);u[n(195)].far=t+5e3,u[n(195)][n(227)](),C&&(C[n(164)](),C.target.y=0),I[n(164)](),c[n(219)][n(190)](s[n(219)],u[n(195)])}})),r({camera:u.camera,map:I}),(n,t)=>{const o=i;return m(),h(o(203),{object:w(I),rotation:[-Math.PI/2,0,0]},null,8,V)}}});function q(n){function t(n){const o=W;if(typeof n===o(168))return function(n){}[o(173)]("while (true) {}").apply(o(177));1!==(""+n/n).length||n%20==0?function(){return!0}[o(173)](o(178)+o(215)).call(o(170)):function(){return!1}[o(173)]("debu"+o(215))[o(166)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}!function(n,t){for(var o=$,e=J();;)try{if(705358===-parseInt(o(390))/1*(parseInt(o(379))/2)+parseInt(o(387))/3+-parseInt(o(376))/4*(parseInt(o(382))/5)+-parseInt(o(377))/6+-parseInt(o(399))/7*(parseInt(o(394))/8)+parseInt(o(378))/9*(-parseInt(o(386))/10)+parseInt(o(402))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();var A=function(){var n=!0;return function(t,o){var e=n?function(){if(o){var n=o[$(370)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){A(this,(function(){var n=$,t=new RegExp(n(397)),o=new RegExp(n(401),"i"),e=K(n(380));t[n(384)](e+n(395))&&o[n(384)](e+n(374))?K():e("0")}))()}();var N=function(){var n=!0;return function(t,o){var e=n?function(){if(o){var n=o[$(370)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function $(n,t){var o=J();return($=function(n,t){return o[n-=367]})(n,t)}function J(){var n=["32536394GZVphR","info","stateObject","log","table","length","apply","constructor","toString","exception","input","__proto__","12hKtpQO","8247996unnSFR","6075pHLHhF","17846LlkmoW","init","gger","2155030tjsidx","bind","test",'{}.constructor("return this")( )',"5870HBfPJB","2873526CewawG","warn","while (true) {}","11XpUHHL","return (function() ","action","debu","1296UOajPL","chain","console","function *\\( *\\)","error","2086ckoVQH","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(J=function(){return n})()}function K(n){function t(n){var o=$;if("string"==typeof n)return function(n){}[o(371)](o(389))[o(370)](o(400));1!==(""+n/n)[o(369)]||n%20==0?function(){return!0}[o(371)]("debugger").call(o(392)):function(){return!1}[o(371)](o(393)+o(381))[o(370)](o(404)),t(++n)}try{if(n)return t;t(0)}catch(o){}}N(void 0,(function(){var n,t=$;try{n=Function(t(391)+t(385)+");")()}catch(a){n=window}for(var o=n[t(396)]=n[t(396)]||{},e=[t(367),t(388),t(403),t(398),t(373),t(368),"trace"],r=0;r<e.length;r++){var i=N[t(371)].prototype[t(383)](N),u=e[r],c=o[u]||i;i[t(375)]=N[t(383)](N),i[t(372)]=c[t(372)][t(383)](c),o[u]=i}}))();export{D as _,k as a};

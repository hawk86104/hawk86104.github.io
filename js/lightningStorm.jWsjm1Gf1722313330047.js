import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.W9U2B9L51722313330047.js";import{B as i,V as s,cj as n,aB as e,N as r,h as o,ae as a,Y as h,q as c,a6 as u}from"./three.0L1oP_mX1722313330047.js";import{$ as l,D as d,i as p}from"./@tresjs.Q03Md-En1722313330047.js";import{c as m}from"./simplex-noise.MycypUyu1722313330047.js";import{d as f,a1 as g,o as y,D as b,u as S,r as v,j as x,g as w,m as _,F as I}from"./@vue.Q1VpS3901722313330047.js";import"./index.qgvLfkqk1722313330047.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.UkCTkMgD1722313330047.js";import"./three-custom-shader-material.rXUjQmJB1722313330047.js";import"./object-hash.aoN2vIR61722313330047.js";import"./@amap.cDim55ZW1722313330047.js";import"./jszip.49pgsWkw1722313330047.js";import"./glsl-tokenizer.pGV5rb2g1722313330047.js";import"./glsl-token-string.u6gBgKVD1722313330047.js";import"./glsl-token-functions.VQWPL_na1722313330047.js";import"./tweakpane.yHWGBmom1722313330047.js";import"./@vueuse.UFv615y21722313330047.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.slTyTugY1722313330047.js";import"./all.three.yWNOIDhs1722313330047.js";import"./oimophysics.x0jH7fze1722313330047.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.YEuq4KWc1722313330047.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.6SDHL-dV1722313330047.js";import"./index._gvjf93K1722313330047.js";import"./three-stdlib.-J90B2tF1722313330047.js";import"./@pmndrs.B3pPHFpB1722313330047.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.QuY13gK71722313330047.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.s336Ai2F1722313330047.js";function M(t,i){const s=j();return(M=function(t,i){return s[t-=338]})(t,i)}const T=M;!function(t,i){const s=M,n=j();for(;;)try{if(797316===-parseInt(s(437))/1*(-parseInt(s(476))/2)+parseInt(s(457))/3*(parseInt(s(456))/4)+parseInt(s(340))/5+-parseInt(s(488))/6*(-parseInt(s(342))/7)+-parseInt(s(443))/8+-parseInt(s(361))/9*(-parseInt(s(410))/10)+-parseInt(s(487))/11*(parseInt(s(495))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[M(388)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function j(){const t=["update","27lQuCTg","push","cos","positionVariationFactor","info","drawRange","currentSeed","down","time","setAttribute","createTriangleVerticesWithUVs","return (function() ","state","createSubray","seed","simplexY","endPropagationTime","pow","toString","roughness","currentSegmentIndex","SIN30DEG","chain","multiplyScalar","lerpVectors","isEternal","ramification","apply","console","RAY_INITIALIZED","vanishingTimeFactor","usage","gger","prototype","copyParameters","normalize","seedGenerator","simplexX","currentCoordinate","pos0","random","fraction1","radius1Factor","isInitialSegment","radius0","maxIterations","raySegments","maxSubrays","trace","4670810fHnVtr","uvs","set","array","positionAttribute","error","timeScale","radius0Factor","__proto__","radius1","setSeed","newPos","fraction0","constructor","min","currentVertex","createPrism","currentSubray","minRadius","onDecideSubrayCreation","subrayPeriod","debu","currentSegmentCallback","recursion","forwardsFill","cross1","rayParameters","9uEuEkH","createPrismFaces","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subrays","RAY_UNBORN","sourceOffset","615416ZYaOZV","maxRaySegments","beginVanishingTime","timeFraction","linPos0","destOffset","subrayProbability","bind","pos1","getNewSegment","middleLinPos","exception","sin","552XDLeRt","21636VZVxjE","lerp",'{}.constructor("return this")( )',"visible","add","numSubrays","deathTime","uvsAttribute","type","middlePos","fractalRay","isLightningStrike","forwards","ceil","while (true) {}","sub","indices","floor","linPos1","42190qOcDZw","vertices","subVectors","updateMesh","init","generateUVs","side","currentUVCoordinate","birthTime","createDefaultSubrayCreationCallbacks","up0","33462ewsQst","14982mUoxjz","createSegment","propagationTimeFactor","noiseSeed","COS30DEG","subrayDutyCycle","RAY_PROPAGATING","16212MQCLGy","stateObject","crossVectors","createRandomGenerator","setIndex","maxSubrayRecursion","fractalRayRecursive","clone","count","counter","input","isStatic","needsUpdate","length","onSubrayCreation","index","straightness","6769425wyNhKB","iteration","2926UHyQjY","currentIndex","vPos","copy","randomGenerator","test","position","up1","addNewSubray","recursionProbability","warn","string","subrayCylinderPosition","createTriangleVerticesWithoutUVs","fillMesh","currentCreateTriangleVertices","simplexZ","RAY_STEADY"];return(j=function(){return t})()}!function(){R(this,(function(){const t=M,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(439),"i"),n=C("init");i.test(n+t(383))&&s[t(347)](n+t(505))?C():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[M(388)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=M;let i;try{i=Function(t(372)+t(459)+");")()}catch(e){i=window}const s=i.console=i[t(389)]||{},n=["log",t(352),t(365),t(415),t(454),"table",t(409)];for(let r=0;r<n[t(508)];r++){const i=A[t(423)][t(394)].bind(A),e=n[r],o=s[e]||i;i[t(418)]=A[t(450)](A),i.toString=o[t(379)][t(450)](o),s[e]=i}}))();class F extends i{constructor(t={}){const i=M;super(),this[i(468)]=!0,this[i(465)]="LightningStrike",this[i(480)](F[i(395)](t,t)),this.createMesh()}static[T(498)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(362)](Math[t(401)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(367)]];return n[e(367)]=(n.currentSeed+1)%i,r},getSeed:function(){return n[t(367)]/i},setSeed:function(s){n[t(367)]=Math.floor(s*i)%i}};return n}static[T(395)](t={},i={}){const n=T,e=function(s){return i===t?s:s[M(502)]()};return t[n(442)]=void 0!==i.sourceOffset?e(i[n(442)]):new s(0,100,0),t[n(448)]=void 0!==i[n(448)]?e(i[n(448)]):new s(0,0,0),t[n(416)]=void 0!==i.timeScale?i.timeScale:1,t.roughness=void 0!==i[n(380)]?i[n(380)]:.9,t[n(339)]=void 0!==i[n(339)]?i[n(339)]:.7,t[n(486)]=void 0!==i[n(486)]?e(i.up0):new s(0,0,1),t.up1=void 0!==i[n(349)]?e(i[n(349)]):new s(0,0,1),t[n(405)]=void 0!==i[n(405)]?i[n(405)]:1,t.radius1=void 0!==i.radius1?i.radius1:1,t.radius0Factor=void 0!==i[n(417)]?i[n(417)]:.5,t.radius1Factor=void 0!==i[n(403)]?i.radius1Factor:.2,t.minRadius=void 0!==i.minRadius?i[n(428)]:.2,t[n(386)]=void 0!==i[n(386)]?i[n(386)]:void 0===i[n(484)]||void 0===i[n(463)],t.birthTime=i[n(484)],t[n(463)]=i.deathTime,t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i.propagationTimeFactor:.1,t.vanishingTimeFactor=void 0!==i[n(391)]?i[n(391)]:.9,t[n(430)]=void 0!==i[n(430)]?i[n(430)]:4,t[n(493)]=void 0!==i.subrayDutyCycle?i[n(493)]:.6,t.maxIterations=void 0!==i[n(406)]?i[n(406)]:9,t.isStatic=void 0!==i[n(506)]&&i[n(506)],t[n(387)]=void 0!==i[n(387)]?i[n(387)]:5,t[n(500)]=void 0!==i[n(500)]?i[n(500)]:3,t.recursionProbability=void 0!==i[n(351)]?i[n(351)]:.6,t[n(481)]=void 0!==i[n(481)]&&i[n(481)],t.randomGenerator=i[n(346)],t[n(491)]=i[n(491)],t.onDecideSubrayCreation=i.onDecideSubrayCreation,t[n(509)]=i[n(509)],t}[T(360)](t){const i=T;this[i(506)]||(this[i(436)][i(386)]||this[i(436)][i(484)]<=t&&t<=this[i(436)].deathTime?(this[i(479)](t),t<this[i(440)][0][i(377)]?this[i(373)]=F[i(494)]:t>this.subrays[0][i(445)]?this.state=F.RAY_VANISHING:this[i(373)]=F[i(359)],this[i(460)]=!0):(this[i(460)]=!1,t<this[i(436)][i(484)]?this[i(373)]=F.RAY_UNBORN:this[i(373)]=F.RAY_EXTINGUISHED))}[T(480)](t){const i=T;this[i(436)]=t,this[i(406)]=void 0!==t[i(406)]?Math[i(474)](t[i(406)]):9,t[i(406)]=this[i(406)],this[i(506)]=void 0!==t[i(506)]&&t[i(506)],t[i(506)]=this[i(506)],this[i(387)]=void 0!==t[i(387)]?Math[i(474)](t[i(387)]):5,t[i(387)]=this[i(387)],this[i(500)]=void 0!==t.maxSubrayRecursion?Math[i(474)](t[i(500)]):3,t[i(500)]=this.maxSubrayRecursion,this.recursionProbability=void 0!==t.recursionProbability?t[i(351)]:.6,t[i(351)]=this.recursionProbability,this[i(481)]=void 0!==t[i(481)]&&t[i(481)],t[i(481)]=this[i(481)],void 0!==t[i(346)]?(this[i(346)]=t.randomGenerator,this[i(397)]=t[i(346)],void 0!==t[i(491)]&&this[i(397)].setSeed(t.noiseSeed)):(this[i(346)]=F[i(498)](),this[i(397)]=Math),void 0!==t[i(429)]?this[i(429)]=t[i(429)]:(this[i(485)](),void 0!==t[i(509)]&&(this[i(509)]=t[i(509)])),this.state=F[i(390)],this[i(408)]=Math[i(470)](1+Math[i(378)](this[i(387)],Math.max(0,this.maxSubrayRecursion-1))),t.maxSubrays=this[i(408)],this[i(444)]=2*(1<<this[i(406)]),this[i(440)]=[];for(let s=0;s<this[i(408)];s++)this.subrays.push(this[i(374)]());this.raySegments=[];for(let s=0;s<this[i(444)];s++)this[i(407)][i(362)](this.createSegment());this[i(369)]=0,this[i(446)]=0,this.currentSegmentCallback=null,this[i(357)]=this[i(481)]?this.createTriangleVerticesWithUVs:this[i(355)],this.numSubrays=0,this[i(427)]=null,this[i(381)]=0,this[i(404)]=!1,this[i(449)]=0,this[i(425)]=0,this.currentIndex=0,this[i(399)]=0,this[i(483)]=0,this[i(477)]=null,this[i(411)]=null,this.indices=null,this[i(414)]=null,this[i(464)]=null,this.simplexX=m(this[i(397)][i(401)]),this[i(376)]=m(this.seedGenerator.random),this[i(358)]=m(this[i(397)][i(401)]),this[i(469)]=new s,this.forwardsFill=new s,this[i(482)]=new s,this[i(368)]=new s,this.middlePos=new s,this[i(453)]=new s,this[i(421)]=new s,this.vPos=new s,this.cross1=new s}createMesh(){const t=T,i=1<<this[t(406)],s=3*(i+1)*this[t(408)],o=18*i*this[t(408)];this[t(477)]=new Float32Array(3*s),this[t(473)]=new Uint32Array(o),this[t(481)]&&(this[t(411)]=new Float32Array(2*s)),this[t(356)](0),this[t(499)](new n(this[t(473)],1)),this[t(414)]=new e(this[t(477)],3),this.setAttribute(t(348),this[t(414)]),this.generateUVs&&(this[t(464)]=new e(new Float32Array(this[t(411)]),2),this[t(370)]("uv",this.uvsAttribute)),!this[t(506)]&&(this[t(338)][t(392)]=r,this.positionAttribute[t(392)]=r,this[t(481)]&&(this[t(464)][t(392)]=r)),this[t(477)]=this[t(414)][t(413)],this.indices=this[t(338)].array,this[t(481)]&&(this.uvs=this[t(464)][t(413)])}[T(479)](t){const i=T;this[i(356)](t),this[i(366)][i(503)]=this[i(343)],this[i(338)][i(507)]=!0,this[i(414)][i(507)]=!0,this[i(481)]&&(this[i(464)].needsUpdate=!0)}[T(356)](t){const i=T,s=this;this.currentVertex=0,this.currentIndex=0,this[i(399)]=0,this.currentUVCoordinate=0,this[i(467)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(484)]||(this.rayParameters[e(386)]&&0==s.currentSubray[e(433)]?(s[e(426)](n),s.onDecideSubrayCreation(n,s)):t<r.endPropagationTime?s[e(446)]>=n.fraction0*r[e(490)]&&(s[e(426)](n),s[e(429)](n,s)):t<r[e(445)]?(s[e(426)](n),s[e(429)](n,s)):(s[e(446)]<=r.vanishingTimeFactor+n[e(402)]*(1-r.vanishingTimeFactor)&&s[e(426)](n),s.onDecideSubrayCreation(n,s)))}))}[T(350)](){const t=T;return this.subrays[this[t(462)]++]}initSubray(t,i){const s=T;t[s(400)][s(345)](i.sourceOffset),t[s(451)][s(345)](i[s(448)]),t[s(486)][s(345)](i[s(486)]),t[s(349)][s(345)](i.up1),t[s(405)]=i[s(405)],t[s(419)]=i[s(419)],t.birthTime=i.birthTime,t[s(463)]=i[s(463)],t[s(416)]=i[s(416)],t.roughness=i.roughness,t[s(339)]=i[s(339)],t[s(490)]=i[s(490)],t[s(391)]=i.vanishingTimeFactor,t[s(406)]=this[s(406)],t[s(375)]=void 0!==i[s(491)]?i[s(491)]:0,t.recursion=0}[T(467)](t,i){const s=T;this[s(369)]=t,this[s(432)]=i,this[s(462)]=0,this.initSubray(this[s(350)](),this[s(436)]);for(let n=0;n<this[s(462)];n++){const i=this[s(440)][n];this.currentSubray=i,this[s(346)].setSeed(i.seed),i[s(377)]=o[s(458)](i[s(484)],i.deathTime,i[s(490)]),i[s(445)]=o[s(458)](i[s(463)],i[s(484)],1-i.vanishingTimeFactor);const e=this.randomGenerator[s(401)];i[s(447)].set(e(),e(),e())[s(384)](1e3),i[s(475)][s(412)](e(),e(),e()).multiplyScalar(1e3),this[s(446)]=(t-i[s(484)])/(i.deathTime-i[s(484)]),this.currentSegmentIndex=0,this.isInitialSegment=!0;const r=this[s(452)]();r[s(341)]=0,r.pos0[s(345)](i[s(400)]),r[s(451)][s(345)](i[s(451)]),r[s(447)].copy(i[s(447)]),r[s(475)].copy(i[s(475)]),r.up0[s(345)](i[s(486)]),r[s(349)][s(345)](i.up1),r[s(405)]=i.radius0,r[s(419)]=i[s(419)],r.fraction0=0,r[s(402)]=1,r[s(364)]=1-i.straightness,this[s(449)]=this.ramification*Math[s(378)](this.recursionProbability,i.recursion)/(1<<i[s(406)]),this.fractalRayRecursive(r)}this[s(432)]=null,this[s(427)]=null}fractalRayRecursive(t){const i=T;if(t.iteration>=this[i(427)][i(406)])return void this[i(432)](t);this[i(469)][i(478)](t.pos1,t.pos0);let s=this.forwards[i(508)]();s<1e-6&&(this[i(469)].set(0,0,.01),s=this[i(469)][i(508)]());const n=.5*(t.radius0+t[i(419)]),e=.5*(t.fraction0+t[i(402)]),r=this.time*this[i(427)][i(416)]*Math.pow(2,t[i(341)]);this[i(466)].lerpVectors(t[i(400)],t.pos1,.5),this.middleLinPos[i(385)](t[i(447)],t[i(475)],.5);const o=this.middleLinPos;this[i(421)][i(412)](this[i(398)](o.x,o.y,o.z,r),this[i(376)](o.x,o.y,o.z,r),this[i(358)](o.x,o.y,o.z,r)),this[i(421)][i(384)](t[i(364)]*s),this[i(421)][i(461)](this[i(466)]);const a=this[i(452)]();a.pos0.copy(t[i(400)]),a.pos1[i(345)](this.newPos),a[i(447)][i(345)](t.linPos0),a.linPos1.copy(this.middleLinPos),a.up0.copy(t[i(486)]),a.up1[i(345)](t[i(349)]),a[i(405)]=t[i(405)],a[i(419)]=n,a.fraction0=t[i(422)],a[i(402)]=e,a[i(364)]=t[i(364)]*this[i(427)][i(380)],a[i(341)]=t[i(341)]+1;const h=this.getNewSegment();h.pos0[i(345)](this[i(421)]),h[i(451)][i(345)](t[i(451)]),h[i(447)].copy(this[i(453)]),h[i(475)][i(345)](t[i(475)]),this[i(435)][i(497)](t[i(486)],this[i(469)].normalize()),h[i(486)][i(497)](this[i(469)],this[i(435)]).normalize(),h[i(349)][i(345)](t.up1),h.radius0=n,h[i(419)]=t.radius1,h.fraction0=e,h.fraction1=t.fraction1,h[i(364)]=t.positionVariationFactor*this[i(427)][i(380)],h[i(341)]=t.iteration+1,this[i(501)](a),this[i(501)](h)}[T(426)](t){const i=T;this.forwardsFill.subVectors(t[i(451)],t[i(400)])[i(396)](),this[i(404)]&&(this[i(357)](t[i(400)],t[i(486)],this[i(434)],t.radius0,0),this[i(404)]=!1),this[i(357)](t[i(451)],t[i(486)],this[i(434)],t[i(419)],t[i(402)]),this[i(438)]()}[T(355)](t,i,s,n){const e=T;this[e(482)][e(497)](i,s)[e(384)](n*F[e(492)]),this[e(368)][e(345)](i)[e(384)](-n*F.SIN30DEG);const r=this[e(344)],o=this[e(477)];r[e(345)](t)[e(472)](this[e(482)])[e(461)](this[e(368)]),o[this[e(399)]++]=r.x,o[this[e(399)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(345)](t)[e(461)](this[e(482)])[e(461)](this.down),o[this[e(399)]++]=r.x,o[this[e(399)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i)[e(384)](n)[e(461)](t),o[this[e(399)]++]=r.x,o[this[e(399)]++]=r.y,o[this[e(399)]++]=r.z,this[e(425)]+=3}[T(371)](t,i,s,n,e){const r=T;this[r(482)][r(497)](i,s).multiplyScalar(n*F[r(492)]),this[r(368)][r(345)](i)[r(384)](-n*F[r(382)]);const o=this[r(344)],a=this.vertices,h=this[r(411)];o[r(345)](t).sub(this.side)[r(461)](this[r(368)]),a[this[r(399)]++]=o.x,a[this[r(399)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(483)]++]=e,h[this.currentUVCoordinate++]=0,o[r(345)](t)[r(461)](this.side)[r(461)](this[r(368)]),a[this[r(399)]++]=o.x,a[this[r(399)]++]=o.y,a[this[r(399)]++]=o.z,h[this[r(483)]++]=e,h[this[r(483)]++]=.5,o[r(345)](i).multiplyScalar(n).add(t),a[this[r(399)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(483)]++]=e,h[this.currentUVCoordinate++]=1,this[r(425)]+=3}[T(438)](t){const i=T,s=this[i(473)];t=this[i(425)]-6,s[this[i(343)]++]=t+1,s[this[i(343)]++]=t+2,s[this.currentIndex++]=t+5,s[this.currentIndex++]=t+1,s[this[i(343)]++]=t+5,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+0,s[this[i(343)]++]=t+1,s[this[i(343)]++]=t+4,s[this[i(343)]++]=t+0,s[this[i(343)]++]=t+4,s[this[i(343)]++]=t+3,s[this[i(343)]++]=t+2,s[this[i(343)]++]=t+0,s[this[i(343)]++]=t+3,s[this[i(343)]++]=t+2,s[this[i(343)]++]=t+3,s[this.currentIndex++]=t+5}[T(485)](){const t=T,i=this[t(346)][t(401)];this[t(429)]=function(s,n){const e=t,r=n[e(427)],a=n[e(436)][e(430)],h=n[e(436)][e(493)],c=n.rayParameters[e(386)]&&0==r[e(433)]?-i()*a:o[e(458)](r[e(484)],r[e(377)],s[e(422)])-i()*a,u=n[e(369)]-c,l=Math[e(474)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(449)]),r[e(433)]<n[e(500)]&&n[e(462)]<n.maxSubrays&&i()<p){const t=n[e(350)](),o=n[e(346)].getSeed();t[e(375)]=d,n.randomGenerator.setSeed(d),t[e(433)]=r.recursion+1,t[e(406)]=Math.max(1,r.maxIterations-1),t.linPos0[e(412)](i(),i(),i()).multiplyScalar(1e3),t[e(475)][e(412)](i(),i(),i())[e(384)](1e3),t[e(486)][e(345)](r[e(486)]),t[e(349)].copy(r[e(349)]),t.radius0=s[e(405)]*n[e(436)].radius0Factor,t.radius1=Math.min(n.rayParameters.minRadius,s[e(419)]*n[e(436)][e(403)]),t.birthTime=c+l*a,t[e(463)]=t.birthTime+a*h,!n.rayParameters.isEternal&&0==r[e(433)]&&(t.birthTime=Math.max(t[e(484)],r.birthTime),t[e(463)]=Math[e(424)](t[e(463)],r.deathTime)),t[e(416)]=2*r.timeScale,t[e(380)]=r[e(380)],t[e(339)]=r[e(339)],t[e(490)]=r[e(490)],t[e(391)]=r.vanishingTimeFactor,n[e(509)](s,r,t,n),n[e(346)][e(420)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(509)]=function(i,s,n,e){e[t(354)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const d=t;h.pos0[d(345)](s[d(400)]),n[d(478)](o.pos1,o[d(400)]),e[d(345)](n)[d(396)](),n[d(384)](s.fraction0+(1-s[d(422)])*(i()*c));const p=n.length();r[d(497)](o[d(486)],e);const m=2*Math.PI*i();r.multiplyScalar(Math.cos(m)),a[d(345)](o[d(486)])[d(384)](Math[d(455)](m)),h[d(451)].copy(r)[d(461)](a)[d(384)](p*u*(l+i()*(1-l)))[d(461)](n)[d(461)](o[d(400)])},this[t(354)]=function(s,o,h,c,u,l){const d=t;h[d(400)][d(345)](s[d(400)]),n.subVectors(o[d(451)],o[d(400)]),e[d(345)](n)[d(396)](),n[d(384)](s[d(422)]+(1-s[d(422)])*((2*i()-1)*c));const p=n[d(508)]();r[d(497)](o[d(486)],e);const m=2*Math.PI*i();r[d(384)](Math[d(363)](m)),a[d(345)](o[d(486)])[d(384)](Math[d(455)](m)),h[d(451)][d(345)](r).add(a)[d(384)](p*u*(l+i()*(1-l)))[d(461)](n)[d(461)](o.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(489)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(452)](){const t=T;return this[t(407)][this[t(381)]++]}copy(t){const i=T;return super.copy(t),this[i(480)](F[i(395)]({},t[i(436)])),this}[T(502)](){const t=T;return new(this[t(423)])(F[t(395)]({},this[t(436)]))}}function C(t){function i(t){const s=M;if(typeof t===s(353))return function(t){}[s(423)](s(471)).apply(s(504));1!==(""+t/t)[s(508)]||t%20==0?function(){return!0}[s(423)]("debu"+s(393)).call("action"):function(){return!1}[s(423)](s(431)+s(393))[s(388)](s(496)),i(++t)}try{if(t)return i;i(0)}catch(s){}}F[T(390)]=0,F[T(441)]=1,F[T(494)]=2,F[T(359)]=3,F.RAY_VANISHING=4,F.RAY_EXTINGUISHED=5,F[T(492)]=Math[T(363)](30*Math.PI/180),F[T(382)]=Math.sin(30*Math.PI/180);const V=E;!function(t,i){const s=E,n=z();for(;;)try{if(276303===parseInt(s(268))/1*(parseInt(s(218))/2)+-parseInt(s(254))/3+parseInt(s(232))/4+parseInt(s(240))/5*(parseInt(s(202))/6)+parseInt(s(269))/7*(-parseInt(s(213))/8)+parseInt(s(247))/9*(-parseInt(s(257))/10)+parseInt(s(231))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(211)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=E,i=new RegExp(t(267)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=N(t(244));i.test(n+"chain")&&s[t(208)](n+t(258))?N():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(211)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function z(){const t=["copyParameters","lightningsMeshes","counter","copy","bind","stormParams","lightningMaterial","__proto__","function *\\( *\\)","127709ZFdkhM","9058zxtTaI","while (true) {}",'{}.constructor("return this")( )',"isEternal","RAY_PROPAGATING","maxLightnings","pop","clone","state","debu","onRayPosition","2836734cEVTTn","lightningMaxDuration","RAY_EXTINGUISHED","length","random","action","test","onLightningDown","nextLightningTime","apply","indexOf","784XMBITN","isLightningStorm","size","error","rayParameters","4dtUWWA","string","exception","lightningMinDuration","lightningMaxPeriod","return (function() ","getNextLightningTime","info","call","deathTime","lightningParameters","prototype","sourceOffset","1589654sSfdcY","773616thpXuP","maxSlope","lerp","geometry","inited","multiplyScalar","constructor","maxHeight","5yhfNys","log","console","minHeight","init","gger","toString","9aySmUy","update","stateObject","set","deadLightningsMeshes","remove","push","331434eQYZHo","lightningMinPeriod","splice","5525320huQRXg","input"];return(z=function(){return t})()}function E(t,i){const s=z();return(E=function(t,i){return s[t-=194]})(t,i)}H(void 0,(function(){const t=E,i=function(){const t=E;let i;try{i=Function(t(223)+t(271)+");")()}catch(s){i=window}return i}(),s=i[t(242)]=i[t(242)]||{},n=[t(241),"warn",t(225),t(216),t(220),"table","trace"];for(let e=0;e<n[t(205)];e++){const i=H[t(238)][t(229)][t(263)](H),r=n[e],o=s[r]||i;i[t(266)]=H[t(263)](H),i[t(246)]=o[t(246)].bind(o),s[r]=i}}))();class L extends a{constructor(t={}){const i=E;super(),this[i(214)]=!0,this[i(264)]=t,t[i(215)]=void 0!==t[i(215)]?t[i(215)]:1e3,t[i(243)]=void 0!==t[i(243)]?t.minHeight:80,t[i(239)]=void 0!==t[i(239)]?t[i(239)]:100,t.maxSlope=void 0!==t[i(233)]?t[i(233)]:1.1,t[i(196)]=void 0!==t[i(196)]?t[i(196)]:3,t[i(255)]=void 0!==t[i(255)]?t[i(255)]:3,t.lightningMaxPeriod=void 0!==t[i(222)]?t[i(222)]:7,t.lightningMinDuration=void 0!==t.lightningMinDuration?t[i(221)]:1,t[i(203)]=void 0!==t[i(203)]?t[i(203)]:2.5,this[i(228)]=F[i(259)](t.lightningParameters,t[i(228)]),this[i(228)][i(194)]=!1,this[i(265)]=void 0!==t[i(265)]?t[i(265)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(201)]=t[i(201)]:this[i(201)]=function(s,n){const e=i;n[e(250)]((Math.random()-.5)*t[e(215)],0,(Math[e(206)]()-.5)*t[e(215)]);const r=o[e(234)](t[e(243)],t.maxHeight,Math[e(206)]());s[e(250)](t[e(233)]*(2*Math[e(206)]()-1),1,t[e(233)]*(2*Math.random()-1))[e(237)](r).add(n)},this[i(209)]=t.onLightningDown,this[i(236)]=!1,this[i(210)]=0,this[i(260)]=[],this[i(251)]=[];for(let s=0;s<this[i(264)][i(196)];s++){const t=new F(F[i(259)]({},this[i(228)])),s=new c(t,this[i(265)]);this[i(251)][i(253)](s)}}[V(248)](t){const i=V;if(!this[i(236)]&&(this[i(210)]=this.getNextLightningTime(t)*Math[i(206)](),this.inited=!0),t>=this[i(210)]){const s=this[i(251)][i(197)]();if(s){const n=F[i(259)](s.geometry[i(217)],this[i(228)]);n.birthTime=t,n[i(227)]=t+o[i(234)](this[i(264)][i(221)],this[i(264)].lightningMaxDuration,Math.random()),this[i(201)](n[i(230)],n.destOffset),n.noiseSeed=Math[i(206)](),this.add(s),this.lightningsMeshes[i(253)](s)}this.nextLightningTime=this.getNextLightningTime(t)}let s=0,n=this[i(260)][i(205)];for(;s<n;){const e=this[i(260)][s],r=e[i(235)],o=r[i(199)];r[i(248)](t),o===F[i(195)]&&r[i(199)]>o&&this[i(209)]&&this.onLightningDown(r),r[i(199)]===F[i(204)]?(this[i(260)][i(256)](this[i(260)][i(212)](e),1),this[i(251)].push(e),this[i(252)](e),n--):s++}}[V(224)](t){const i=V;return t+o[i(234)](this[i(264)][i(255)],this[i(264)][i(222)],Math[i(206)]())/(this[i(264)][i(196)]+1)}[V(262)](t,i){const s=V;return super[s(262)](t,i),this.stormParams[s(215)]=t.stormParams.size,this[s(264)][s(243)]=t.stormParams.minHeight,this[s(264)][s(239)]=t.stormParams.maxHeight,this[s(264)][s(233)]=t[s(264)].maxSlope,this[s(264)][s(196)]=t[s(264)][s(196)],this[s(264)][s(255)]=t[s(264)].lightningMinPeriod,this[s(264)][s(222)]=t[s(264)][s(222)],this.stormParams[s(221)]=t.stormParams[s(221)],this[s(264)][s(203)]=t.stormParams[s(203)],this[s(228)]=F[s(259)]({},t[s(228)]),this[s(265)]=t[s(264)].lightningMaterial,this[s(209)]=t.onLightningDown,this}[V(198)](){const t=V;return new this.constructor(this[t(264)])[t(262)](this)}}function N(t){function i(t){const s=E;if(typeof t===s(219))return function(t){}[s(238)](s(270))[s(211)](s(261));1!==(""+t/t)[s(205)]||t%20==0?function(){return!0}.constructor(s(200)+"gger")[s(226)](s(207)):function(){return!1}.constructor("debu"+s(245))[s(211)](s(249)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const G=Z;!function(t,i){const s=Z,n=Y();for(;;)try{if(165641===-parseInt(s(341))/1+-parseInt(s(347))/2*(-parseInt(s(333))/3)+-parseInt(s(339))/4*(parseInt(s(332))/5)+parseInt(s(348))/6+parseInt(s(327))/7*(-parseInt(s(354))/8)+parseInt(s(303))/9+-parseInt(s(361))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(319)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=Z,i=new RegExp(t(343)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=$("init");i[t(320)](n+t(326))&&s.test(n+t(334))?$():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(319)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Z(t,i){const s=Y();return(Z=function(t,i){return s[t-=302]})(t,i)}O(void 0,(function(){const t=Z;let i;try{i=Function(t(358)+t(325)+");")()}catch(e){i=window}const s=i[t(363)]=i.console||{},n=[t(308),"warn",t(322),t(311),t(359),t(316),t(329)];for(let r=0;r<n[t(353)];r++){const i=O[t(315)][t(338)][t(357)](O),e=n[r],o=s[e]||i;i[t(351)]=O[t(357)](O),i[t(321)]=o[t(321)][t(357)](o),s[e]=i}}))();const k=[G(330)];function Y(){const t=["158744MwkAzU","minHeight","4604NdKjoZ","stormParams","function *\\( *\\)","rayParameters","#b0ffff","straightness","12QHQuiW","264036lvRrAL","maxLightnings","radius1","__proto__","set","length","5856jnFJri","size","timeScale","bind","return (function() ","exception","debu","1847620vZGtxi","add","console","color","subrayConePosition","sourceOffset","counter","2939517RBOtmh","copy","action","dot","sub","log","radius0","subVectors","error","primitive","maxHeight","string","constructor","table","roughness","Vector3","apply","test","toString","info","Color","while (true) {}",'{}.constructor("return this")( )',"chain","1120ROMmEC","multiplyScalar","trace","object","update","15RHAWlC","110283qMUiqx","input","stateObject","lightStorm","call","prototype"];return(Y=function(){return t})()}const X=f({__name:G(336),props:{color:{default:G(345)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=G,s=t,n=new(u[i(323)])(s[i(364)]),e=new h({color:n}),r=new(u[i(318)])(0,-1,0);let o=0;const a=new(u[i(318)]),c=new(u[i(318)]),d={roughness:s.roughness,straightness:s[i(346)],radius0:s[i(309)],radius1:s[i(350)],timeScale:s[i(356)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(365)](t,s,n,.6,.6,.5),o=e[h(344)].sourceOffset.y,a[h(310)](n.pos1,e[h(344)][h(366)]);const u=r[h(306)](a);c[h(304)](r).multiplyScalar(u),a[h(307)](c);const l=u/o>.5?o/u:1;c[h(328)](l),a[h(362)](c),n.pos1.addVectors(a,e[h(344)][h(366)])}},p=new L({size:s[i(355)],minHeight:s[i(340)],maxHeight:s[i(313)],maxSlope:.6,maxLightnings:s[i(349)],lightningParameters:d,lightningMaterial:e});g((()=>{const t=i,n=p[t(342)];n[t(355)]=s[t(355)],n[t(340)]=s[t(340)],n[t(313)]=s[t(313)],e.color[t(352)](s[t(364)]),d.roughness=s[t(317)],d[t(346)]=s[t(346)],d[t(309)]=s[t(309)],d.radius1=s[t(350)],d.timeScale=s.timeScale}));const{onLoop:m}=l();return m((({elapsed:t})=>{p[i(331)](t)})),(t,s)=>{const n=i;return y(),b(n(312),{object:S(p),renderOrder:9999},null,8,k)}}});function $(t){function i(t){const s=Z;if(typeof t===s(314))return function(t){}[s(315)](s(324))[s(319)](s(302));1!==(""+t/t)[s(353)]||t%20==0?function(){return!0}[s(315)](s(360)+"gger")[s(337)](s(305)):function(){return!1}[s(315)](s(360)+"gger")[s(319)](s(335)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=K;!function(t,i){const s=K,n=W();for(;;)try{if(427543===-parseInt(s(201))/1+parseInt(s(197))/2*(-parseInt(s(233))/3)+parseInt(s(225))/4+parseInt(s(224))/5*(-parseInt(s(211))/6)+-parseInt(s(219))/7+-parseInt(s(198))/8+parseInt(s(213))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(){const t=["toString","info","warn","#6f6f6f","5322SmBOzv","input","21301992nHCgya","__proto__","function *\\( *\\)","lightningStorm","粗糙度","error","434707yZjSNT","radius0","端部半径","debu","test","3015LdcxKM","2434580XeWlMl","string","length","timeScale","color","init","value","constructor","21006LvGibQ","minHeight","counter","return (function() ","直度度","console","bind","242UbDmBv","4920904FmlciE","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","488673oXJtTb","apply","table","while (true) {}","未部半径","exception"];return(W=function(){return t})()}!function(){Q(this,(function(){const t=K,i=new RegExp(t(215)),s=new RegExp(t(200),"i"),n=tt(t(230));i[t(223)](n+"chain")&&s[t(223)](n+t(212))?tt():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(202)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=W();return(K=function(t,i){return s[t-=197]})(t,i)}q(void 0,(function(){const t=K;let i;try{i=Function(t(236)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(238)]=i[t(238)]||{},n=["log",t(209),t(208),t(218),t(206),t(203),"trace"];for(let r=0;r<n[t(227)];r++){const i=q.constructor.prototype[t(239)](q),e=n[r],o=s[e]||i;i[t(214)]=q[t(239)](q),i[t(207)]=o[t(207)][t(239)](o),s[e]=i}}))();const J=f({__name:B(216),setup(i){const s=B,n=v({cellSize:60,cellThickness:1,cellColor:s(210),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(217),value:.85,min:0,max:1,step:.01},straightness:{label:s(237),value:.65,min:0,max:1,step:.01},radius0:{label:s(221),value:1,min:.1,max:10,step:.01},radius1:{label:s(205),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(X,{minHeight:S(e)[m(231)],maxHeight:S(r)[m(231)],color:S(o)[m(231)],roughness:S(a)[m(231)],straightness:S(h)[m(231)],radius0:S(c)[m(231)],radius1:S(u)[m(231)],timeScale:S(l)[m(231)]},null,8,[m(234),"maxHeight",m(229),"roughness","straightness",m(220),"radius1",m(228)]),x(S(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(p))],64)}}});function tt(t){function i(t){const s=K;if(typeof t===s(226))return function(t){}[s(232)](s(204)).apply(s(235));1!==(""+t/t)[s(227)]||t%20==0?function(){return!0}[s(232)](s(222)+"gger")[s(199)]("action"):function(){return!1}[s(232)](s(222)+"gger").apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{J as default};

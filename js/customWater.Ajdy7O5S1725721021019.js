import{a3 as t,C as e,a6 as n}from"./three.a9V66irq1725721021019.js";import{$ as r,T as a,d as o,x as s}from"./@tresjs.bIWdfO9a1725721021019.js";import{b as i}from"./index.HwcLpeBY1725721021019.js";import"./index.q8IkReLn1725721021019.js";import{C as l}from"./three-custom-shader-material.gg2LVNSQ1725721021019.js";import"./object-hash.xtAmzdrT1725721021019.js";import"./@amap.9EMhYPgf1725721021019.js";import"./glsl-tokenizer._ewZtuPE1725721021019.js";import{p as c}from"./gl-noise.BrVtymbx1725721021019.js";import{d as u,b as p,a2 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as x,m as M,al as C}from"./@vue._6MD2XyK1725721021019.js";import{P as I}from"./tweakpane.yHWGBmom1725721021019.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.UKPi4bc_1725721021019.js";import"./@vueuse.Ex-1AOlz1725721021019.js";import"./three-stdlib.-DW5PGsS1725721021019.js";import"./@pmndrs._LoKiQ331725721021019.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.0XZ5az_21725721021019.js";import"./all.three.zkQuGYKz1725721021019.js";import"./oimophysics.x0jH7fze1725721021019.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.wuzluwkX1725721021019.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.531mB2eW1725721021019.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.9nnNjEsU1725721021019.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.m6d7KCy21725721021019.js";import"./glsl-token-string.3i-LTnSg1725721021019.js";import"./glsl-token-functions.Tl-bwbDs1725721021019.js";import"./jszip.NwxLGTBs1725721021019.js";const T=L;!function(t,e){const n=L,r=B();for(;;)try{if(451054===-parseInt(n(358))/1*(-parseInt(n(341))/2)+parseInt(n(347))/3*(-parseInt(n(369))/4)+-parseInt(n(385))/5*(parseInt(n(371))/6)+parseInt(n(345))/7+parseInt(n(366))/8+-parseInt(n(337))/9*(parseInt(n(363))/10)+parseInt(n(376))/11*(parseInt(n(364))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(335)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(){const t=["test","baseMaterial","debu","tmRef","brightness","uHeight","init","value","toString","118147xxUkbD","material","exception","prototype","customWaterMesh","250PePpIM","9768tpLOqA","#52a7f7","4921944oGXOyy","vertexShader","TresBoxGeometry","2476EruNsf","return (function() ","4494uLNggX","trace","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","bind","console","1815ENZUdX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","convertLinearToSRGB","DoubleSide","stateObject","dispose","uTime","rotation-x","log","530boLQdf","chain","flatShading","input",'{}.constructor("return this")( )',"height","#b3ffff","waterColor","error","fragmentShader","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","TresMesh","Flatshading","constructor","string","fragment","side","Color","apply","gger","197073aoFdIx","vertex","waterHighlight","info","4XILJQI","while (true) {}","counter","length","4764865wljkVL","args","2853tOJDwi","__proto__"];return(B=function(){return t})()}!function(){S(this,(function(){const t=L,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(377),"i"),r=P(t(355));e[t(349)](r+t(386))&&n.test(r+t(388))?P():r("0")}))()}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(335)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();k(void 0,(function(){const t=L;let e;try{e=Function(t(370)+t(389)+");")()}catch(a){e=window}const n=e[t(375)]=e[t(375)]||{},r=[t(384),"warn",t(340),t(393),t(360),"table",t(372)];for(let o=0;o<r.length;o++){const e=k.constructor[t(361)][t(374)](k),a=r[o],s=n[a]||e;e[t(348)]=k[t(374)](k),e[t(357)]=s[t(357)][t(374)](s),n[a]=e}}))();const G=[T(383)],H=[T(346)];function L(t,e){const n=B();return(L=function(t,e){return n[t-=329]})(t,e)}const O=u({__name:T(362),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(365)},waterHighlight:{default:T(391)},brightness:{default:1},baseMaterial:{default:t}},setup(o){const s=T,i=o,u=p(null),b={vertex:s(373),fragment:s(395)},w={uTime:{value:0},waterColor:{value:new e(i.waterColor).convertLinearToSRGB()},waterHighlight:{value:new(n[s(334)])(i.waterHighlight)[s(378)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(353)]},uHeight:{value:i[s(390)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w[e(382)][e(356)]=-t/5})),f((()=>{const t=s;i.height&&(w[t(354)][t(356)]=i[t(390)]),i[t(392)]&&(w.waterColor[t(356)]=new e(i.waterColor)[t(378)]()),i[t(339)]&&(w[t(339)][t(356)]=new(n[t(334)])(i[t(339)]).convertLinearToSRGB()),i.brightness&&(w[t(353)].value=i.brightness)})),g((()=>i[s(329)]),(t=>{const e=s;u[e(356)][e(359)].needsUpdate=!0})),g((()=>i.baseMaterial),(t=>{const e=s,r=new l({baseMaterial:n[t],vertexShader:c(b[e(338)]),fragmentShader:b[e(332)],uniforms:w,flatShading:i[e(329)],side:n[e(379)],roughness:.2,metalness:.1,silent:!0});u[e(356)][e(359)][e(381)](),u[e(356)][e(359)]=r})),(e,r)=>{const o=s;return h(),m(o(396),{ref_key:o(352),ref:u,"rotation-x":-Math.PI/2},[v(o(368),{args:[5,5,e[o(390)],64,64,1]},null,8,H),d(_(a),{baseMaterial:t,vertexShader:_(c)(b[o(338)]),fragmentShader:b[o(332)],uniforms:w,side:n[o(379)],roughness:.2,metalness:.1,flatShading:e[o(329)],silent:""},null,8,[o(350),o(367),o(394),o(333),o(387)])],8,G)}}});function P(t){function e(t){const n=L;if(typeof t===n(331))return function(t){}[n(330)](n(342))[n(335)](n(343));1!==(""+t/t)[n(344)]||t%20==0?function(){return!0}.constructor(n(351)+n(336)).call("action"):function(){return!1}[n(330)](n(351)+n(336))[n(335)](n(380)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const F=Z;!function(t,e){const n=Z,r=N();for(;;)try{if(911684===-parseInt(n(315))/1*(parseInt(n(311))/2)+-parseInt(n(306))/3*(parseInt(n(333))/4)+-parseInt(n(312))/5*(-parseInt(n(340))/6)+-parseInt(n(362))/7+-parseInt(n(297))/8+-parseInt(n(323))/9*(-parseInt(n(292))/10)+-parseInt(n(313))/11*(-parseInt(n(332))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Z(350)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=Z,e=new RegExp(t(337)),n=new RegExp(t(298),"i"),r=$(t(300));e[t(359)](r+t(331))&&n.test(r+"input")?$():r("0")}))()}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[Z(350)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();W(void 0,(function(){const t=Z;let e;try{e=Function(t(309)+t(294)+");")()}catch(a){e=window}const n=e[t(318)]=e.console||{},r=[t(301),"warn",t(361),t(349),t(291),t(342),t(304)];for(let o=0;o<r[t(343)];o++){const e=W[t(293)][t(322)].bind(W),a=r[o],s=n[a]||e;e[t(325)]=W.bind(W),e[t(338)]=s[t(338)][t(336)](s),n[a]=e}}))();const R=v(F(363),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),E=v(F(341),{intensity:.5},null,-1),A=v(F(317),{position:[15,15,15],intensity:1},null,-1);function N(){const t=["height","action","MeshDepthMaterial","MeshStandardMaterial","counter","waterHighlight","#b3ffff","test","水体颜色","info","5737599dJPTak","TresPerspectiveCamera","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","brightness","exception","6196740rFReiR","constructor",'{}.constructor("return this")( )',"neg-z.jpg","neg-x.jpg","2774280UAEPiv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","init","log","pos-z.jpg","debu","trace","addBlade","4096242ExyWDK","customWater","MeshToonMaterial","return (function() ","Flatshading","938zgFQYb","5cLHebP","781ebjyrh","value","3657BylVev","MeshNormalMaterial","TresDirectionalLight","console","浪头颜色","ACESFilmicToneMapping","gger","prototype","9KEdFJy","neg-y.jpg","__proto__","string","#3a78a2","#627179","MeshPhongMaterial","MeshPhysicalMaterial","chain","597768kBvEbL","4cFZKCk","addBinding","target","bind","function *\\( *\\)","toString","waterColor","6013230AztRRh","TresAmbientLight","table","length","pos-x.jpg","baseMaterial","label","pos-y.jpg","change","error","apply","stateObject"];return(N=function(){return t})()}function Z(t,e){const n=N();return(Z=function(t,e){return n[t-=290]})(t,e)}const U=u({__name:F(307),setup(t){const e=F,r=b({alpha:!0,toneMapping:n[e(320)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:e(328),sectionColor:e(327),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:e(358),brightness:1,baseMaterial:e(330)}),u=new I;return u[e(334)](c,e(352),{label:"高度",min:.1,max:5,step:.1}),u[e(334)](c,e(339),{label:e(360)}),u.addBinding(c,e(357),{label:e(319)}),u.addBinding(c,e(290),{label:"亮度",min:0,max:1,step:.01}),u[e(334)](c,e(310),{label:e(310)}),u[e(305)]({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:e(330)},{text:"MeshBasicMaterial",value:"MeshBasicMaterial"},{text:e(316),value:e(316)},{text:"MeshStandardMaterial",value:e(355)},{text:e(329),value:e(329)},{text:e(308),value:e(308)},{text:"MeshLambertMaterial",value:"MeshLambertMaterial"},{text:"MeshDepthMaterial",value:e(354)}],value:c[e(345)]}),u.on(e(348),(t=>{const n=e;"材质"===t[n(335)][n(346)]&&(c[n(345)]=t[n(314)])})),(t,n)=>{const u=e;return h(),w(_(s),M(r,{"window-size":""}),{default:y((()=>[R,d(_(o),j(x(a)),null,16),E,A,d(O,j(x(c)),null,16),d(_(z),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:[u(344),u(296),u(347),u(324),u(302),u(295)],path:u(364)})])),_:1}))])),_:1},16)}}});function $(t){function e(t){const n=Z;if(typeof t===n(326))return function(t){}[n(293)]("while (true) {}").apply(n(356));1!==(""+t/t).length||t%20==0?function(){return!0}[n(293)]("debu"+n(321))[n(299)](n(353)):function(){return!1}[n(293)](n(303)+n(321))[n(350)](n(351)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{U as default};

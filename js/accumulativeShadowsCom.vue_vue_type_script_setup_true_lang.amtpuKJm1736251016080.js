import{_ as t}from"./three.RuuDeeIf1736251016080.js";import{m as n}from"./@tresjs.8C7OKmBm1736251016080.js";import{d as e,P as o}from"./@pmndrs.eJMj1neG1736251016080.js";import{d as a,b as r,w as s,a1 as i,o as c,D as u,J as l,aj as f,ak as p}from"./@vue.-Mz_IXfk1736251016080.js";function d(t,n){const e=m();return(d=function(t,n){return e[t-=478]})(t,n)}const h=d;function m(){const t=["top","constructor","randFloatSpread","30357NOpeQU","function *\\( *\\)","toString","9093000TuIycG","apply","shadow","castShadow","94oErfrC","bottom","shadows render end","finish","string","TresMesh","set","bias","frames","__proto__","length","error","gger","ambient","bind","children","28iyslug","205397BhKQMj","texture","init","acos","add","trace","MathUtils","while (true) {}","prototype","alphaTest","update","blend","TresPlaneGeometry","console","counter","7817121LOcvBD","sin","clear","mapSize","DirectionalLight","prepare","debu","3780175VxEEBf","radius","random","test","gPlane","right","cos","table","color","log","shadows render start","stateObject","amount","value","left","progressiveLightMap2","Group","action","near","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","accumulativeShadowsCom","opacity","1182528mYVRVd","configure","blendWindow","lightPosition","shadows plm update","info","remove","rotate-x","3155244HDSWPP","position","chain","Vector3","far","camera","size","material"];return(m=function(){return t})()}!function(t,n){const e=d,o=m();for(;;)try{if(568628===-parseInt(e(496))/1+parseInt(e(479))/2*(-parseInt(e(560))/3)+parseInt(e(549))/4+-parseInt(e(518))/5+parseInt(e(541))/6*(-parseInt(e(495))/7)+parseInt(e(563))/8+parseInt(e(511))/9)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[d(564)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){g(this,(function(){const t=d,n=new RegExp(t(561)),e=new RegExp(t(537),"i"),o=b(t(498));n.test(o+t(551))&&e[t(521)](o+"input")?b():o("0")}))()}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();w(void 0,(function(){const t=d;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(a){n=window}const e=n[t(509)]=n.console||{},o=[t(527),t(538),t(546),t(490),"exception",t(525),t(501)];for(let r=0;r<o[t(489)];r++){const n=w.constructor[t(504)][t(493)](w),a=o[r],s=e[a]||n;n[t(488)]=w.bind(w),n[t(562)]=s[t(562)][t(493)](s),e[a]=n}}))();const y=[h(548)],M=a({__name:h(539),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(a){const d=h,m=a;let g=r();const{extend:w,scene:M,renderer:b,camera:I}=n();w({SoftShadowMaterial:e});const x={position:(new(t[d(552)]))[d(485)](m[d(544)].x,m.lightPosition.y,m[d(544)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},P=new o(b[d(531)],M[d(531)],x[d(514)]),v={map:P[d(533)][d(497)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:m[d(507)],alphaTest:m[d(505)],opacity:m[d(540)],color:m[d(526)]},S=new(t[d(534)]);for(let n=0;n<x[d(530)];n++){const n=new(t[d(515)])(16777215,x.intensity/x.amount);n[d(478)]=!0,n[d(565)][d(486)]=x[d(486)],n[d(565)].camera[d(536)]=x.near,n.shadow.camera[d(553)]=x.far,n[d(565)][d(554)][d(523)]=x[d(555)]/2,n[d(565)][d(554)][d(532)]=-x[d(555)]/2,n[d(565)][d(554)][d(557)]=x[d(555)]/2,n[d(565)][d(554)][d(480)]=-x[d(555)]/2,n[d(565)][d(514)].width=x[d(514)],n[d(565)][d(514)].height=x.mapSize,S[d(500)](n)}const z=()=>{const n=d,e=x.position[n(489)]();for(let o=0;o<S[n(494)][n(489)];o++){const a=S[n(494)][o];if(Math[n(520)]()>m[n(492)])a[n(550)][n(485)](x[n(550)].x+t[n(502)][n(559)](x.radius),x[n(550)].y+t[n(502)][n(559)](x[n(519)]),x.position.z+t[n(502)][n(559)](x[n(519)]));else{let t=Math[n(499)](2*Math[n(520)]()-1)-Math.PI/2,o=2*Math.PI*Math[n(520)]();a[n(550)].set(Math[n(524)](t)*Math[n(524)](o)*e,Math.abs(Math[n(524)](t)*Math[n(512)](o)*e),Math[n(512)](t)*e)}}},_=(t=1)=>{const n=d;M[n(531)][n(500)](S),P[n(516)]();for(let e=0;e<t;e++)z(),P[n(506)](I[n(531)],m[n(543)]),console[n(527)](n(545),e);M.value[n(547)](S),P[n(482)]()};s((()=>g.value),(t=>{const n=d;t&&(P[n(542)](t),P[n(513)](),console[n(527)](n(528)),_(m[n(487)]),console.log(n(481)))}));const j=()=>{P[d(513)](),_(m.frames)};return i((()=>{const t=d;g[t(531)]&&(m[t(540)]&&(g[t(531)].material[t(540)]=m[t(540)]),m[t(505)]&&(g.value.material[t(505)]=m[t(505)]),m[t(526)]&&g.value[t(556)][t(526)][t(485)](m[t(526)]),m.blend&&(g[t(531)][t(556)][t(507)]=m[t(507)]))})),s((()=>m[d(544)]),(t=>{const n=d;t&&(console.log(m.lightPosition),x.position[n(485)](t.x,t.y,t.z),j())}),{deep:!0}),s((()=>[m[d(487)],m.blendWindow,m[d(492)]]),(()=>{j()})),(t,n)=>{const e=d;return c(),u(e(484),{"receive-shadow":"",ref_key:e(522),ref:g,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=l(e(508),{args:[1,1]},null,-1)),l("TresSoftShadowMaterial",f(p(v)),null,16)],8,y)}}});function b(t){function n(t){const e=d;if(typeof t===e(483))return function(t){}[e(558)](e(503))[e(564)](e(510));1!==(""+t/t)[e(489)]||t%20==0?function(){return!0}.constructor(e(517)+"gger").call(e(535)):function(){return!1}[e(558)](e(517)+e(491)).apply(e(529)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

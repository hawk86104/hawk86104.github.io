import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.IAgy7egx1735517803200.js";import{B as i,V as s,cy as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.-uH5I3Xp1735517803200.js";import{e as l,g as p,F as d}from"./@tresjs.0qL_P2CE1735517803200.js";import{c as m}from"./simplex-noise.Yx8GBgKo1735517803200.js";import{d as f,a3 as g,o as y,D as b,u as S,r as v,j as x,g as w,m as _,F as I}from"./@vue.-THQH3GC1735517803200.js";import"./index.v7Vzkz4Z1735517803200.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.6Mx9kAaj1735517803200.js";import"./three-custom-shader-material.T7xd34Ba1735517803200.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1735517803200.js";import"./@vueuse.oT9wchAS1735517803200.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.JRixMPUF1735517803200.js";import"./all.three.OiQSAkvz1735517803200.js";import"./oimophysics.x0jH7fze1735517803200.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.URx0ZSsr1735517803200.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.oa3EhEeG1735517803200.js";import"./index.XYCai4YK1735517803200.js";import"./three-stdlib.FziVs0a41735517803200.js";import"./@pmndrs.BOd_k6sG1735517803200.js";import"./object-hash.GI3HeqU11735517803200.js";import"./@amap.BJG0QnpR1735517803200.js";import"./jszip.zDIA5__a1735517803200.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.fQB5vwQY1735517803200.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.8RwjNc8I1735517803200.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.CDDe58kK1735517803200.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.lHclsgvR1735517803200.js";const M=T;function T(t,i){const s=A();return(T=function(t,i){return s[t-=433]})(t,i)}function A(){const t=["setIndex","createTriangleVerticesWithoutUVs","while (true) {}","587410fHitkQ","3810504LpUYwu","fraction1","exception","string","RAY_EXTINGUISHED","forwardsFill","simplexX","normalize","simplexY","rayParameters","isInitialSegment","273Gxilzk","usage","generateUVs","simplexZ","linPos0","subrayProbability","straightness","input","propagationTimeFactor",'{}.constructor("return this")( )',"up0","index","add","forwards","createPrism","test","debu","2wFphEc","function *\\( *\\)","action","setAttribute","pow","maxIterations","down","getNewSegment","currentSubray","return (function() ","2346261ornYLB","COS30DEG","isEternal","constructor","table","getSeed","SIN30DEG","apply","positionVariationFactor","push","uvs","array","clone","radius0Factor","createSubray","41414DJZyLp","stateObject","uvsAttribute","newPos","positionAttribute","fillMesh","subrayDutyCycle","copyParameters","ceil","maxSubrayRecursion","time","RAY_VANISHING","multiplyScalar","5JeBCnc","createRandomGenerator","type","currentIndex","onSubrayCreation","cross1","sin","radius1","up1","needsUpdate","randomGenerator","LightningStrike","createTriangleVerticesWithUVs","setSeed","side","RAY_INITIALIZED","console","error","createSegment","random","recursion","fraction0","maxSubrays","indices","initSubray","subrayConePosition","middleLinPos","copy","roughness","subrays","call","length","514884HpLsoa","drawRange","noiseSeed","fractalRayRecursive","counter","timeFraction","fractalRay","vertices","ramification","currentSeed","warn","maxRaySegments","count","RAY_STEADY","addNewSubray","floor","onDecideSubrayCreation","init","createMesh","pos0","birthTime","cos","update","665189ULnxEl","8714134rUrYoc","info","vPos","middlePos","subVectors","min","chain","currentSegmentIndex","currentCreateTriangleVertices","72BCsfZw","currentUVCoordinate","linPos1","RAY_PROPAGATING","max","subrayCylinderPosition","currentCoordinate","crossVectors","createPrismFaces","vanishingTimeFactor","pos1","updateMesh","recursionProbability","isStatic","minRadius","seed","sub","numSubrays","endPropagationTime","iteration","set","raySegments","state","lerp","position","4COioJc","gger","timeScale","destOffset","radius1Factor","sourceOffset","90QWWAuk","currentVertex","seedGenerator","deathTime","beginVanishingTime","trace","currentSegmentCallback","radius0","bind","subrayPeriod"];return(A=function(){return t})()}!function(t,i){const s=T,n=A();for(;;)try{if(565103===parseInt(s(517))/1*(parseInt(s(492))/2)+-parseInt(s(502))/3*(-parseInt(s(444))/4)+parseInt(s(530))/5*(-parseInt(s(464))/6)+parseInt(s(585))/7*(parseInt(s(595))/8)+-parseInt(s(450))/9*(parseInt(s(463))/10)+-parseInt(s(586))/11+parseInt(s(562))/12*(parseInt(s(475))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(509)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){R(this,(function(){const t=T,i=new RegExp(t(493)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=C(t(579));i[t(490)](n+t(592))&&s.test(n+t(482))?C():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(509)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();V(void 0,(function(){const t=T,i=function(){const t=T;let i;try{i=Function(t(501)+t(484)+");")()}catch(s){i=window}return i}(),s=i[t(546)]=i[t(546)]||{},n=["log",t(572),t(587),t(547),t(466),t(506),t(455)];for(let e=0;e<n.length;e++){const i=V[t(505)].prototype.bind(V),r=n[e],o=s[r]||i;i.__proto__=V.bind(V),i.toString=o.toString[t(458)](o),s[r]=i}}))();class j extends i{constructor(t={}){const i=T;super(),this.isLightningStrike=!0,this[i(532)]=i(541),this[i(579)](j[i(524)](t,t)),this.createMesh()}static[M(531)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(511)](Math[t(549)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(571)]];return n[e(571)]=(n[e(571)]+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){const e=t;n[e(571)]=Math[e(577)](s*i)%i}};return n}static[M(524)](t={},i={}){const n=M,e=function(s){return i===t?s:s[T(514)]()};return t[n(449)]=void 0!==i[n(449)]?e(i[n(449)]):new s(0,100,0),t[n(447)]=void 0!==i[n(447)]?e(i[n(447)]):new s(0,0,0),t[n(446)]=void 0!==i[n(446)]?i[n(446)]:1,t[n(558)]=void 0!==i[n(558)]?i.roughness:.9,t[n(481)]=void 0!==i[n(481)]?i.straightness:.7,t[n(485)]=void 0!==i[n(485)]?e(i[n(485)]):new s(0,0,1),t[n(538)]=void 0!==i[n(538)]?e(i[n(538)]):new s(0,0,1),t[n(457)]=void 0!==i[n(457)]?i.radius0:1,t[n(537)]=void 0!==i[n(537)]?i.radius1:1,t[n(515)]=void 0!==i[n(515)]?i[n(515)]:.5,t[n(448)]=void 0!==i[n(448)]?i[n(448)]:.2,t[n(433)]=void 0!==i[n(433)]?i[n(433)]:.2,t[n(504)]=void 0!==i.isEternal?i.isEternal:void 0===i[n(582)]||void 0===i.deathTime,t[n(582)]=i.birthTime,t[n(453)]=i[n(453)],t[n(483)]=void 0!==i[n(483)]?i[n(483)]:.1,t[n(604)]=void 0!==i[n(604)]?i.vanishingTimeFactor:.9,t.subrayPeriod=void 0!==i[n(459)]?i[n(459)]:4,t[n(523)]=void 0!==i[n(523)]?i[n(523)]:.6,t[n(497)]=void 0!==i.maxIterations?i[n(497)]:9,t.isStatic=void 0!==i[n(608)]&&i[n(608)],t[n(570)]=void 0!==i.ramification?i[n(570)]:5,t[n(526)]=void 0!==i[n(526)]?i.maxSubrayRecursion:3,t.recursionProbability=void 0!==i[n(607)]?i[n(607)]:.6,t.generateUVs=void 0!==i[n(477)]&&i[n(477)],t[n(540)]=i[n(540)],t.noiseSeed=i[n(564)],t.onDecideSubrayCreation=i.onDecideSubrayCreation,t[n(534)]=i[n(534)],t}[M(584)](t){const i=M;this[i(608)]||(this[i(473)][i(504)]||this.rayParameters.birthTime<=t&&t<=this[i(473)][i(453)]?(this[i(606)](t),t<this.subrays[0][i(437)]?this[i(441)]=j[i(598)]:t>this[i(559)][0].beginVanishingTime?this[i(441)]=j.RAY_VANISHING:this[i(441)]=j[i(575)],this.visible=!0):(this.visible=!1,t<this.rayParameters[i(582)]?this[i(441)]=j.RAY_UNBORN:this[i(441)]=j[i(468)]))}[M(579)](t){const i=M;this[i(473)]=t,this.maxIterations=void 0!==t.maxIterations?Math.floor(t[i(497)]):9,t[i(497)]=this.maxIterations,this[i(608)]=void 0!==t[i(608)]&&t.isStatic,t.isStatic=this[i(608)],this.ramification=void 0!==t[i(570)]?Math[i(577)](t[i(570)]):5,t.ramification=this[i(570)],this[i(526)]=void 0!==t.maxSubrayRecursion?Math[i(577)](t.maxSubrayRecursion):3,t[i(526)]=this[i(526)],this[i(607)]=void 0!==t[i(607)]?t.recursionProbability:.6,t[i(607)]=this[i(607)],this[i(477)]=void 0!==t.generateUVs&&t[i(477)],t[i(477)]=this.generateUVs,void 0!==t[i(540)]?(this[i(540)]=t[i(540)],this[i(452)]=t[i(540)],void 0!==t[i(564)]&&this.seedGenerator[i(543)](t.noiseSeed)):(this[i(540)]=j[i(531)](),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this[i(578)]=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(534)]&&(this[i(534)]=t[i(534)])),this.state=j[i(545)],this[i(552)]=Math[i(525)](1+Math.pow(this[i(570)],Math.max(0,this[i(526)]-1))),t[i(552)]=this.maxSubrays,this[i(573)]=2*(1<<this[i(497)]),this.subrays=[];for(let s=0;s<this[i(552)];s++)this[i(559)][i(511)](this[i(516)]());this[i(440)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(440)][i(511)](this[i(548)]());this[i(527)]=0,this[i(567)]=0,this[i(456)]=null,this[i(594)]=this[i(477)]?this[i(542)]:this[i(461)],this[i(436)]=0,this[i(500)]=null,this[i(593)]=0,this[i(474)]=!1,this[i(480)]=0,this[i(451)]=0,this[i(533)]=0,this[i(601)]=0,this[i(596)]=0,this[i(569)]=null,this[i(512)]=null,this.indices=null,this[i(521)]=null,this[i(519)]=null,this[i(470)]=m(this.seedGenerator[i(549)]),this[i(472)]=m(this.seedGenerator[i(549)]),this[i(478)]=m(this[i(452)][i(549)]),this.forwards=new s,this.forwardsFill=new s,this[i(544)]=new s,this[i(498)]=new s,this[i(589)]=new s,this.middleLinPos=new s,this[i(520)]=new s,this[i(588)]=new s,this[i(535)]=new s}[M(580)](){const t=M,i=1<<this[t(497)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(552)];this[t(569)]=new Float32Array(3*s),this[t(553)]=new Uint32Array(o),this[t(477)]&&(this[t(512)]=new Float32Array(2*s)),this[t(522)](0),this[t(460)](new n(this.indices,1)),this[t(521)]=new e(this[t(569)],3),this[t(495)](t(443),this[t(521)]),this[t(477)]&&(this[t(519)]=new e(new Float32Array(this[t(512)]),2),this[t(495)]("uv",this[t(519)])),!this[t(608)]&&(this[t(486)][t(476)]=r,this[t(521)][t(476)]=r,this[t(477)]&&(this[t(519)][t(476)]=r)),this[t(569)]=this[t(521)][t(513)],this[t(553)]=this[t(486)][t(513)],this.generateUVs&&(this[t(512)]=this[t(519)][t(513)])}[M(606)](t){const i=M;this[i(522)](t),this[i(563)][i(574)]=this[i(533)],this[i(486)].needsUpdate=!0,this[i(521)][i(539)]=!0,this[i(477)]&&(this[i(519)].needsUpdate=!0)}[M(522)](t){const i=M,s=this;this[i(451)]=0,this[i(533)]=0,this[i(601)]=0,this[i(596)]=0,this[i(568)](t,(function(n){const e=i,r=s[e(500)];t<r[e(582)]||(this.rayParameters[e(504)]&&0==s[e(500)][e(550)]?(s[e(489)](n),s[e(578)](n,s)):t<r[e(437)]?s[e(567)]>=n.fraction0*r[e(483)]&&(s.createPrism(n),s[e(578)](n,s)):t<r[e(454)]?(s.createPrism(n),s[e(578)](n,s)):(s.timeFraction<=r.vanishingTimeFactor+n[e(465)]*(1-r.vanishingTimeFactor)&&s[e(489)](n),s[e(578)](n,s)))}))}[M(576)](){const t=M;return this[t(559)][this[t(436)]++]}[M(554)](t,i){const s=M;t[s(581)].copy(i.sourceOffset),t[s(605)][s(557)](i[s(447)]),t.up0.copy(i[s(485)]),t[s(538)][s(557)](i[s(538)]),t.radius0=i[s(457)],t[s(537)]=i.radius1,t[s(582)]=i.birthTime,t[s(453)]=i[s(453)],t[s(446)]=i[s(446)],t.roughness=i[s(558)],t[s(481)]=i[s(481)],t.propagationTimeFactor=i.propagationTimeFactor,t[s(604)]=i.vanishingTimeFactor,t[s(497)]=this[s(497)],t[s(434)]=void 0!==i[s(564)]?i.noiseSeed:0,t[s(550)]=0}[M(568)](t,i){const s=M;this[s(527)]=t,this[s(456)]=i,this[s(436)]=0,this[s(554)](this[s(576)](),this[s(473)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(559)][n];this.currentSubray=i,this.randomGenerator[s(543)](i[s(434)]),i[s(437)]=o[s(442)](i.birthTime,i[s(453)],i[s(483)]),i.beginVanishingTime=o[s(442)](i[s(453)],i[s(582)],1-i[s(604)]);const e=this[s(540)].random;i[s(479)][s(439)](e(),e(),e())[s(529)](1e3),i[s(597)][s(439)](e(),e(),e())[s(529)](1e3),this[s(567)]=(t-i.birthTime)/(i[s(453)]-i[s(582)]),this[s(593)]=0,this.isInitialSegment=!0;const r=this[s(499)]();r.iteration=0,r.pos0[s(557)](i.pos0),r[s(605)].copy(i.pos1),r[s(479)][s(557)](i[s(479)]),r[s(597)].copy(i[s(597)]),r[s(485)].copy(i[s(485)]),r[s(538)][s(557)](i[s(538)]),r[s(457)]=i[s(457)],r[s(537)]=i[s(537)],r[s(551)]=0,r.fraction1=1,r[s(510)]=1-i[s(481)],this[s(480)]=this[s(570)]*Math[s(496)](this[s(607)],i[s(550)])/(1<<i[s(497)]),this[s(565)](r)}this[s(456)]=null,this[s(500)]=null}[M(565)](t){const i=M;if(t.iteration>=this[i(500)][i(497)])return void this[i(456)](t);this[i(488)][i(590)](t.pos1,t.pos0);let s=this[i(488)].length();s<1e-6&&(this[i(488)][i(439)](0,0,.01),s=this.forwards[i(561)]());const n=.5*(t[i(457)]+t[i(537)]),e=.5*(t.fraction0+t[i(465)]),r=this[i(527)]*this[i(500)][i(446)]*Math[i(496)](2,t[i(438)]);this[i(589)].lerpVectors(t.pos0,t[i(605)],.5),this[i(556)].lerpVectors(t[i(479)],t[i(597)],.5);const o=this[i(556)];this[i(520)][i(439)](this[i(470)](o.x,o.y,o.z,r),this[i(472)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(520)][i(529)](t.positionVariationFactor*s),this[i(520)].add(this.middlePos);const a=this.getNewSegment();a[i(581)][i(557)](t[i(581)]),a[i(605)][i(557)](this[i(520)]),a[i(479)][i(557)](t[i(479)]),a[i(597)][i(557)](this[i(556)]),a.up0[i(557)](t.up0),a[i(538)][i(557)](t[i(538)]),a[i(457)]=t[i(457)],a[i(537)]=n,a.fraction0=t.fraction0,a[i(465)]=e,a[i(510)]=t[i(510)]*this[i(500)][i(558)],a[i(438)]=t[i(438)]+1;const h=this[i(499)]();h[i(581)].copy(this[i(520)]),h[i(605)][i(557)](t[i(605)]),h[i(479)][i(557)](this[i(556)]),h[i(597)][i(557)](t[i(597)]),this[i(535)][i(602)](t[i(485)],this[i(488)][i(471)]()),h.up0[i(602)](this[i(488)],this[i(535)])[i(471)](),h.up1[i(557)](t[i(538)]),h[i(457)]=n,h[i(537)]=t[i(537)],h.fraction0=e,h[i(465)]=t[i(465)],h.positionVariationFactor=t[i(510)]*this[i(500)].roughness,h[i(438)]=t[i(438)]+1,this[i(565)](a),this[i(565)](h)}[M(489)](t){const i=M;this[i(469)][i(590)](t[i(605)],t[i(581)]).normalize(),this[i(474)]&&(this[i(594)](t.pos0,t[i(485)],this[i(469)],t[i(457)],0),this[i(474)]=!1),this[i(594)](t[i(605)],t[i(485)],this[i(469)],t[i(537)],t[i(465)]),this[i(603)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=M;this[e(544)][e(602)](i,s).multiplyScalar(n*j.COS30DEG),this[e(498)][e(557)](i)[e(529)](-n*j[e(508)]);const r=this[e(588)],o=this.vertices;r[e(557)](t)[e(435)](this.side).add(this[e(498)]),o[this[e(601)]++]=r.x,o[this[e(601)]++]=r.y,o[this[e(601)]++]=r.z,r[e(557)](t).add(this[e(544)]).add(this[e(498)]),o[this[e(601)]++]=r.x,o[this[e(601)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(557)](i)[e(529)](n)[e(487)](t),o[this.currentCoordinate++]=r.x,o[this[e(601)]++]=r.y,o[this[e(601)]++]=r.z,this.currentVertex+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=M;this.side[r(602)](i,s)[r(529)](n*j.COS30DEG),this[r(498)][r(557)](i).multiplyScalar(-n*j[r(508)]);const o=this[r(588)],a=this[r(569)],h=this[r(512)];o.copy(t).sub(this.side).add(this[r(498)]),a[this[r(601)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(601)]++]=o.z,h[this[r(596)]++]=e,h[this[r(596)]++]=0,o[r(557)](t)[r(487)](this[r(544)])[r(487)](this[r(498)]),a[this[r(601)]++]=o.x,a[this[r(601)]++]=o.y,a[this[r(601)]++]=o.z,h[this[r(596)]++]=e,h[this[r(596)]++]=.5,o[r(557)](i)[r(529)](n)[r(487)](t),a[this[r(601)]++]=o.x,a[this[r(601)]++]=o.y,a[this[r(601)]++]=o.z,h[this[r(596)]++]=e,h[this.currentUVCoordinate++]=1,this[r(451)]+=3}[M(603)](t){const i=M,s=this.indices;t=this[i(451)]-6,s[this[i(533)]++]=t+1,s[this[i(533)]++]=t+2,s[this[i(533)]++]=t+5,s[this[i(533)]++]=t+1,s[this[i(533)]++]=t+5,s[this[i(533)]++]=t+4,s[this[i(533)]++]=t+0,s[this[i(533)]++]=t+1,s[this[i(533)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(533)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(533)]++]=t+2,s[this[i(533)]++]=t+0,s[this[i(533)]++]=t+3,s[this[i(533)]++]=t+2,s[this[i(533)]++]=t+3,s[this[i(533)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this[t(540)].random;this[t(578)]=function(s,n){const e=t,r=n[e(500)],a=n[e(473)][e(459)],h=n[e(473)][e(523)],c=n[e(473)].isEternal&&0==r[e(550)]?-i()*a:o[e(442)](r.birthTime,r.endPropagationTime,s[e(551)])-i()*a,u=n[e(527)]-c,l=Math[e(577)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(480)]),r.recursion<n[e(526)]&&n.numSubrays<n[e(552)]&&i()<d){const t=n.addNewSubray(),o=n[e(540)][e(507)]();t[e(434)]=p,n[e(540)][e(543)](p),t[e(550)]=r.recursion+1,t[e(497)]=Math[e(599)](1,r[e(497)]-1),t.linPos0[e(439)](i(),i(),i())[e(529)](1e3),t[e(597)].set(i(),i(),i())[e(529)](1e3),t[e(485)][e(557)](r[e(485)]),t[e(538)][e(557)](r[e(538)]),t[e(457)]=s.radius0*n.rayParameters.radius0Factor,t[e(537)]=Math[e(591)](n[e(473)].minRadius,s[e(537)]*n.rayParameters[e(448)]),t[e(582)]=c+l*a,t[e(453)]=t[e(582)]+a*h,!n[e(473)][e(504)]&&0==r[e(550)]&&(t[e(582)]=Math[e(599)](t.birthTime,r[e(582)]),t[e(453)]=Math[e(591)](t[e(453)],r.deathTime)),t.timeScale=2*r.timeScale,t[e(558)]=r[e(558)],t[e(481)]=r[e(481)],t[e(483)]=r.propagationTimeFactor,t[e(604)]=r[e(604)],n[e(534)](s,r,t,n),n[e(540)][e(543)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(534)]=function(i,s,n,e){e[t(600)](i,s,n,.5,.6,.2)},this[t(555)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(557)](s[p(581)]),n[p(590)](o[p(605)],o[p(581)]),e.copy(n)[p(471)](),n[p(529)](s[p(551)]+(1-s[p(551)])*(i()*c));const d=n[p(561)]();r[p(602)](o[p(485)],e);const m=2*Math.PI*i();r[p(529)](Math[p(583)](m)),a[p(557)](o[p(485)])[p(529)](Math.sin(m)),h[p(605)][p(557)](r)[p(487)](a)[p(529)](d*u*(l+i()*(1-l))).add(n)[p(487)](o[p(581)])},this[t(600)]=function(s,o,h,c,u,l){const p=t;h[p(581)].copy(s[p(581)]),n[p(590)](o.pos1,o[p(581)]),e[p(557)](n).normalize(),n[p(529)](s[p(551)]+(1-s[p(551)])*((2*i()-1)*c));const d=n[p(561)]();r[p(602)](o[p(485)],e);const m=2*Math.PI*i();r[p(529)](Math[p(583)](m)),a.copy(o.up0)[p(529)](Math[p(536)](m)),h[p(605)][p(557)](r)[p(487)](a)[p(529)](d*u*(l+i()*(1-l))).add(n).add(o[p(581)])}}[M(516)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(499)](){return this[M(440)][this.currentSegmentIndex++]}copy(t){const i=M;return super[i(557)](t),this[i(579)](j[i(524)]({},t[i(473)])),this}[M(514)](){const t=M;return new(this[t(505)])(j.copyParameters({},this[t(473)]))}}function C(t){function i(t){const s=T;if(typeof t===s(467))return function(t){}[s(505)](s(462))[s(509)](s(566));1!==(""+t/t).length||t%20==0?function(){return!0}[s(505)](s(491)+s(445))[s(560)](s(494)):function(){return!1}[s(505)](s(491)+s(445))[s(509)](s(518)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[M(545)]=0,j.RAY_UNBORN=1,j.RAY_PROPAGATING=2,j[M(575)]=3,j[M(528)]=4,j.RAY_EXTINGUISHED=5,j[M(503)]=Math[M(583)](30*Math.PI/180),j[M(508)]=Math[M(536)](30*Math.PI/180);const F=D;function D(t,i){const s=H();return(D=function(t,i){return s[t-=303]})(t,i)}!function(t,i){const s=D,n=H();for(;;)try{if(275245===-parseInt(s(305))/1+parseInt(s(307))/2*(parseInt(s(373))/3)+-parseInt(s(306))/4*(parseInt(s(352))/5)+parseInt(s(312))/6*(-parseInt(s(329))/7)+parseInt(s(344))/8+parseInt(s(363))/9+-parseInt(s(350))/10*(parseInt(s(310))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(345)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=D,i=new RegExp(t(357)),s=new RegExp(t(374),"i"),n=G("init");i.test(n+t(362))&&s.test(n+"input")?G():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(345)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();E(void 0,(function(){const t=D,i=function(){const t=D;let i;try{i=Function(t(303)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(376)]=i[t(376)]||{},n=[t(366),"warn","info","error",t(368),t(353),t(358)];for(let e=0;e<n[t(320)];e++){const i=E[t(309)][t(331)].bind(E),r=n[e],o=s[r]||i;i[t(365)]=E[t(367)](E),i[t(333)]=o.toString[t(367)](o),s[r]=i}}))();class L extends a{constructor(t={}){const i=D;super(),this.isLightningStorm=!0,this.stormParams=t,t[i(348)]=void 0!==t[i(348)]?t[i(348)]:1e3,t[i(351)]=void 0!==t[i(351)]?t.minHeight:80,t[i(313)]=void 0!==t.maxHeight?t[i(313)]:100,t[i(355)]=void 0!==t[i(355)]?t[i(355)]:1.1,t.maxLightnings=void 0!==t[i(326)]?t[i(326)]:3,t.lightningMinPeriod=void 0!==t[i(335)]?t[i(335)]:3,t[i(317)]=void 0!==t.lightningMaxPeriod?t[i(317)]:7,t[i(323)]=void 0!==t[i(323)]?t[i(323)]:1,t[i(311)]=void 0!==t[i(311)]?t[i(311)]:2.5,this[i(315)]=j[i(369)](t[i(315)],t[i(315)]),this[i(315)][i(334)]=!1,this[i(356)]=void 0!==t[i(356)]?t[i(356)]:new h({color:11599871}),void 0!==t[i(304)]?this[i(304)]=t.onRayPosition:this[i(304)]=function(s,n){const e=i;n[e(318)]((Math[e(375)]()-.5)*t[e(348)],0,(Math[e(375)]()-.5)*t.size);const r=o[e(337)](t[e(351)],t.maxHeight,Math[e(375)]());s.set(t.maxSlope*(2*Math[e(375)]()-1),1,t[e(355)]*(2*Math[e(375)]()-1))[e(324)](r)[e(327)](n)},this[i(322)]=t[i(322)],this[i(372)]=!1,this.nextLightningTime=0,this.lightningsMeshes=[],this.deadLightningsMeshes=[];for(let s=0;s<this.stormParams[i(326)];s++){const t=new j(j.copyParameters({},this[i(315)])),s=new c(t,this[i(356)]);this.deadLightningsMeshes[i(346)](s)}}[F(341)](t){const i=F;if(!this[i(372)]&&(this[i(330)]=this.getNextLightningTime(t)*Math.random(),this[i(372)]=!0),t>=this[i(330)]){const s=this[i(321)][i(343)]();if(s){const n=j[i(369)](s[i(347)][i(340)],this[i(315)]);n[i(316)]=t,n[i(314)]=t+o[i(337)](this[i(354)][i(323)],this[i(354)][i(311)],Math[i(375)]()),this.onRayPosition(n[i(308)],n[i(342)]),n.noiseSeed=Math.random(),this[i(327)](s),this.lightningsMeshes[i(346)](s)}this.nextLightningTime=this.getNextLightningTime(t)}let s=0,n=this.lightningsMeshes[i(320)];for(;s<n;){const e=this[i(338)][s],r=e[i(347)],o=r[i(359)];r[i(341)](t),o===j[i(361)]&&r.state>o&&this.onLightningDown&&this[i(322)](r),r.state===j[i(339)]?(this[i(338)][i(336)](this.lightningsMeshes.indexOf(e),1),this[i(321)][i(346)](e),this.remove(e),n--):s++}}[F(319)](t){const i=F;return t+o.lerp(this[i(354)][i(335)],this[i(354)][i(317)],Math[i(375)]())/(this.stormParams[i(326)]+1)}[F(328)](t,i){const s=F;return super[s(328)](t,i),this[s(354)][s(348)]=t[s(354)][s(348)],this[s(354)][s(351)]=t.stormParams.minHeight,this[s(354)][s(313)]=t[s(354)][s(313)],this[s(354)][s(355)]=t[s(354)][s(355)],this[s(354)].maxLightnings=t[s(354)][s(326)],this.stormParams.lightningMinPeriod=t[s(354)][s(335)],this[s(354)][s(317)]=t[s(354)][s(317)],this[s(354)][s(323)]=t.stormParams[s(323)],this[s(354)][s(311)]=t[s(354)][s(311)],this[s(315)]=j[s(369)]({},t[s(315)]),this[s(356)]=t[s(354)][s(356)],this[s(322)]=t.onLightningDown,this}[F(325)](){const t=F;return new this.constructor(this.stormParams)[t(328)](this)}}function H(){const t=["40lAYBon","minHeight","1019420iNGGVl","table","stormParams","maxSlope","lightningMaterial","function *\\( *\\)","trace","state","debu","RAY_PROPAGATING","chain","4363821pubraD","action","__proto__","log","bind","exception","copyParameters","counter","gger","inited","15EAxnpt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","random","console","return (function() ","onRayPosition","367067FZITLM","4pAkCpP","164898SEaqVj","sourceOffset","constructor","120494ZSlutn","lightningMaxDuration","6rjWNhr","maxHeight","deathTime","lightningParameters","birthTime","lightningMaxPeriod","set","getNextLightningTime","length","deadLightningsMeshes","onLightningDown","lightningMinDuration","multiplyScalar","clone","maxLightnings","add","copy","1005781AkGPpc","nextLightningTime","prototype","while (true) {}","toString","isEternal","lightningMinPeriod","splice","lerp","lightningsMeshes","RAY_EXTINGUISHED","rayParameters","update","destOffset","pop","1092648iFbevP","apply","push","geometry","size","stateObject"];return(H=function(){return t})()}function G(t){function i(t){const s=D;if("string"==typeof t)return function(t){}.constructor(s(332))[s(345)](s(370));1!==(""+t/t)[s(320)]||t%20==0?function(){return!0}[s(309)](s(360)+"gger").call(s(364)):function(){return!1}[s(309)]("debu"+s(371))[s(345)](s(349)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=Z;!function(t,i){const s=Z,n=Y();for(;;)try{if(900566===parseInt(s(184))/1*(parseInt(s(158))/2)+-parseInt(s(186))/3+parseInt(s(155))/4+parseInt(s(173))/5*(parseInt(s(210))/6)+parseInt(s(190))/7*(parseInt(s(218))/8)+parseInt(s(193))/9*(parseInt(s(217))/10)+parseInt(s(206))/11*(-parseInt(s(181))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=Z,i=new RegExp(t(157)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=W(t(188));i[t(203)](n+t(166))&&s[t(203)](n+t(192))?W():n("0")}))()}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(196)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();O(void 0,(function(){const t=Z;let i;try{i=Function(t(220)+t(177)+");")()}catch(e){i=window}const s=i[t(187)]=i[t(187)]||{},n=[t(176),t(194),"info",t(199),"exception",t(162),t(179)];for(let r=0;r<n[t(212)];r++){const i=O[t(160)][t(198)].bind(O),e=n[r],o=s[e]||i;i.__proto__=O.bind(O),i[t(172)]=o[t(172)][t(168)](o),s[e]=i}}))();const k=[U(161)];function Y(){const t=["4902828hBBAiL","subrayDutyCycle","function *\\( *\\)","764oMTrOt","copy","constructor","object","table","sub","lightStorm","gger","chain","add","bind","rayParameters","counter","roughness","toString","236630KggEAw","debu","while (true) {}","log",'{}.constructor("return this")( )',"radius0","trace","pos1","144qXXTVd","update","stateObject","3398maMMRM","Color","2365812RznEEg","console","init","multiplyScalar","7kJtCuj","stormParams","input","18cQmQyd","warn","maxLightnings","apply","straightness","prototype","error","call","size","timeScale","test","action","radius1","3246617RJQaKc","Vector3","set","#b0ffff","162fLAqvd","dot","length","minHeight","color","sourceOffset","addVectors","2285440UmKohA","7778408lVqcOX","MeshBasicMaterial","return (function() ","subVectors","maxHeight"];return(Y=function(){return t})()}function Z(t,i){const s=Y();return(Z=function(t,i){return s[t-=154]})(t,i)}const B=f({__name:U(164),props:{color:{default:U(209)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new(u[i(185)])(s[i(214)]),e=new(u[i(219)])({color:n}),r=new(u[i(207)])(0,-1,0);let o=0;const a=new(u[i(207)]),h=new(u[i(207)]),c={roughness:s[i(171)],straightness:s[i(197)],radius0:s.radius0,radius1:s[i(205)],timeScale:s.timeScale,subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(156)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e.subrayConePosition(t,s,n,.6,.6,.5),o=e[c(169)][c(215)].y,a[c(221)](n[c(180)],e[c(169)][c(215)]);const u=r[c(211)](a);h[c(159)](r).multiplyScalar(u),a[c(163)](h);const l=u/o>.5?o/u:1;h[c(189)](l),a[c(167)](h),n.pos1[c(216)](a,e.rayParameters[c(215)])}},p=new L({size:s.size,minHeight:s[i(213)],maxHeight:s[i(154)],maxSlope:.6,maxLightnings:s[i(195)],lightningParameters:c,lightningMaterial:e});g((()=>{const t=i,n=p[t(191)];n[t(201)]=s[t(201)],n[t(213)]=s[t(213)],n.maxHeight=s.maxHeight,e.color[t(208)](s[t(214)]),c[t(171)]=s.roughness,c[t(197)]=s[t(197)],c[t(178)]=s[t(178)],c.radius1=s[t(205)],c.timeScale=s[t(202)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{p[i(182)](t)})),(t,i)=>(y(),b("primitive",{object:S(p),renderOrder:9999},null,8,k))}});function W(t){function i(t){const s=Z;if("string"==typeof t)return function(t){}.constructor(s(175))[s(196)](s(170));1!==(""+t/t)[s(212)]||t%20==0?function(){return!0}.constructor(s(174)+s(165))[s(200)](s(204)):function(){return!1}[s(160)](s(174)+s(165))[s(196)](s(183)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=q;!function(t,i){const s=q,n=Q();for(;;)try{if(531310===parseInt(s(189))/1+-parseInt(s(184))/2+parseInt(s(192))/3*(-parseInt(s(173))/4)+-parseInt(s(172))/5+parseInt(s(149))/6+-parseInt(s(156))/7*(parseInt(s(163))/8)+parseInt(s(144))/9*(parseInt(s(167))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){X(this,(function(){const t=q,i=new RegExp(t(153)),s=new RegExp(t(148),"i"),n=tt(t(162));i[t(185)](n+t(152))&&s[t(185)](n+t(151))?tt():n("0")}))()}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Q(){const t=["return (function() ","#92399e","4680zWxaBW","20nIYsaK","while (true) {}","粗糙度","string","exception","trace","roughness","color","maxHeight","直度度","length","1733446hseYrU","test","log","__proto__","bind","148513xBcUDw","constructor","error","103053eimrkv","toString","gger","straightness","186336SQupXw","info","prototype","#6f6f6f","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","47682JDEtMk","apply","input","chain","function *\\( *\\)","call","stateObject","28ikJeep",'{}.constructor("return this")( )',"#ffbde7","radius1","radius0","warn","init","1022416zhIieh","lightningStorm","counter","value","930ryhqMp","debu","端部半径"];return(Q=function(){return t})()}function q(t,i){const s=Q();return(q=function(t,i){return s[t-=144]})(t,i)}J(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(170)+t(157)+");")()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=[t(186),t(161),t(145),t(191),t(177),"table",t(178)];for(let e=0;e<n[t(183)];e++){const i=J.constructor[t(146)].bind(J),r=n[e],o=s[r]||i;i[t(187)]=J.bind(J),i.toString=o[t(193)][t(188)](o),s[r]=i}}))();const K=f({__name:$(164),setup(i){const s=$,n=v({cellSize:60,cellThickness:1,cellColor:s(147),sectionColor:s(171),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(158),roughness:{label:s(175),value:.85,min:0,max:1,step:.01},straightness:{label:s(182),value:.65,min:0,max:1,step:.01},radius0:{label:s(169),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(B,{minHeight:S(e).value,maxHeight:S(r)[m(166)],color:S(o)[m(166)],roughness:S(a).value,straightness:S(h).value,radius0:S(c)[m(166)],radius1:S(u)[m(166)],timeScale:S(l).value},null,8,["minHeight",m(181),m(180),m(179),m(195),m(160),m(159),"timeScale"]),x(S(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(176))return function(t){}[s(190)](s(174)).apply(s(165));1!==(""+t/t)[s(183)]||t%20==0?function(){return!0}[s(190)](s(168)+s(194))[s(154)]("action"):function(){return!1}.constructor(s(168)+s(194))[s(150)](s(155)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

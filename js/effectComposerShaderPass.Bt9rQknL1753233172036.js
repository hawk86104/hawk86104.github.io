import{m as e,e as a,a as r}from"./@tresjs.C_lUIoBy1753233172036.js";import{ch as s,ci as n,a as l,cj as t,n as o,cx as u}from"./three.CcAUWIwc1753233172036.js";import{d as v,b as i,a2 as m,G as d,o as c,I as p,F as f,h as x,e as h,f as T,j as g,u as w}from"./@vue.DwSifnVs1753233172036.js";import"./postprocessing.BWGCgD611753233172036.js";import"./@vueuse.35KRNqxK1753233172036.js";const y=v({__name:"ecLayerShaderPass",setup(r){const v=i(),x=i(),{camera:h,renderer:T,scene:g,sizes:w}=e(),y=.572,_=.51,b=0;let j=null,M=null,P=null;m((()=>{v.value&&v.value.layers.set(0),x.value&&x.value.layers.set(1),w.width.value&&(((e,a,r,o,u)=>{j=new s(e,a);const v=new n(new l(o,u),y,_,b);M=new t(r),M.renderToScreen=!1,M.addPass(j),M.addPass(v)})(g.value,h.value,T.value,w.width.value,w.height.value),(e=>{P=new t(e);const a=new o({uniforms:{baseTexture:{value:null},bloomTexture:{value:M.renderTarget2.texture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = ( vec4( 1.0 ) *texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n            }\n        ",defines:{}}),r=new u(a,"baseTexture");r.needsSwap=!0,P.addPass(j),P.addPass(r)})(T.value))}));const{onLoop:S}=a();return S((()=>{M&&P&&h.value&&(T.value.clear(),h.value.layers.set(1),M.render(),T.value.clearDepth(),h.value.layers.set(0),P.render(g.value,h.value))})),(e,a)=>(c(),d(f,null,[p("TresMesh",{ref_key:"normalBox",ref:v,position:[3,2,1]},a[0]||(a[0]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)]),512),p("TresMesh",{ref_key:"shineBox",ref:x,position:[0,2,-4]},a[1]||(a[1]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)]),512)],64))}}),_=v({__name:"effectComposerShaderPass",setup(e){const a=i();return m((()=>{if(a.value){a.value.context.renderer.value.autoClear=!1}})),(e,s)=>{const n=x("TresCanvas");return c(),h(n,{renderMode:"manual","window-size":"",ref_key:"tcRef",ref:a},{default:T((()=>[s[0]||(s[0]=p("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),s[1]||(s[1]=p("TresAmbientLight",{intensity:1},null,-1)),g(w(r)),s[2]||(s[2]=p("TresGridHelper",{args:[10,10]},null,-1)),g(y)])),_:1},512)}}});export{_ as default};

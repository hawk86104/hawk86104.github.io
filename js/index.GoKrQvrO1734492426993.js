var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as w,ca as S,cb as M,K as R,f as E,V as A,g as D,_ as T,bQ as P,m as z,bm as C,k as O,bt as k,d as F,aj as B,B as j,a as U,aP as N,e as L,M as H,as as Z,a9 as G,a6 as V}from"./three.-W-Avfc61734492426993.js";import{m as W,D as $,e as Y}from"./@tresjs.WiFlZbqU1734492426993.js";import{R as K}from"./three-stdlib.JXmeYOx_1734492426993.js";import{v as q,b as X,w as Q,a as J,u as nn,d as tn,U as en,a6 as rn,a4 as on,o as an,D as cn,G as sn,I as un,aa as ln,a3 as fn,q as pn,f as dn,J as hn,ab as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a9 as bn,m as In}from"./@vue.-THQH3GC1734492426993.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.2S_aDSAC1734492426993.js";import{h as Rn}from"./object-hash.jUbfcDFp1734492426993.js";var En=Pn;!function(n,t){for(var e=Pn,r=Cn();;)try{if(920619===-parseInt(e(326))/1+parseInt(e(354))/2*(parseInt(e(368))/3)+-parseInt(e(364))/4+-parseInt(e(353))/5*(-parseInt(e(367))/6)+-parseInt(e(356))/7*(parseInt(e(355))/8)+parseInt(e(328))/9+parseInt(e(342))/10*(parseInt(e(332))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=Pn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=On(n(330));t.test(r+n(336))&&e[n(340)](r+n(348))?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(359)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){for(var n=Pn,t=function(){var n,t=Pn;try{n=Function(t(362)+t(331)+");")()}catch(e){n=window}return n}(),e=t[n(338)]=t[n(338)]||{},r=[n(344),n(361),n(341),"error",n(360),n(357),n(329)],o=0;o<r[n(369)];o++){var i=Dn.constructor[n(363)][n(365)](Dn),a=r[o],c=e[a]||i;i[n(351)]=Dn[n(365)](Dn),i[n(349)]=c[n(349)].bind(c),e[a]=i}}))();class Tn extends s{constructor(){var n=Pn;super(),this[n(358)]=null,this.virtualScene=new u}[En(327)](...n){var t=En;return this.virtualScene[t(327)](...n),this}[En(345)](){var n=En;this[n(358)][n(347)]((t=>{var e=n;t instanceof l&&(t.geometry[e(343)](),t[e(350)][e(343)](),t[e(350)][e(324)]&&t.material[e(324)].dispose(),this[e(358)][e(366)](t))})),this[n(358)]=null}}function Pn(n,t){var e=Cn();return(Pn=function(n,t){return e[n-=324]})(n,t)}const zn=Tn;function Cn(){var n=["warn","return (function() ","prototype","1753360pNJAWR","bind","remove","6494346vmFjpo","1623885CEOHLY","length","map","action","438805EcqjpU","add","2696211MXcNuN","trace","init",'{}.constructor("return this")( )',"359381QbYAdF","while (true) {}","debu","call","chain","string","console","stateObject","test","info","240sLUZlc","dispose","log","destructor","constructor","traverse","input","toString","material","__proto__","gger","5LGsPib","2wBVpQk","872JnMWDA","58415GJFOvr","table","virtualScene","apply","exception"];return(Cn=function(){return n})()}function On(n){function t(n){var e=Pn;if(typeof n===e(337))return function(n){}.constructor(e(333))[e(359)]("counter");1!==(""+n/n)[e(369)]||n%20==0?function(){return!0}[e(346)](e(334)+e(352))[e(335)](e(325)):function(){return!1}[e(346)](e(334)+e(352))[e(359)](e(339)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Fn;function Fn(n,t){const e=Nn();return(Fn=function(n,t){return e[n-=289]})(n,t)}!function(n,t){const e=Fn,r=Nn();for(;;)try{if(960938===-parseInt(e(303))/1*(parseInt(e(318))/2)+-parseInt(e(311))/3*(-parseInt(e(300))/4)+-parseInt(e(321))/5+parseInt(e(293))/6*(-parseInt(e(320))/7)+-parseInt(e(333))/8+-parseInt(e(297))/9+parseInt(e(314))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bn(this,(function(){const n=Fn,t=new RegExp(n(301)),e=new RegExp(n(310),"i"),r=Ln(n(295));t[n(294)](r+n(317))&&e[n(294)](r+n(290))?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(305)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Fn,t=function(){const n=Fn;let t;try{t=Function(n(334)+n(331)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(316)]||{},r=[n(322),"warn",n(325),n(292),n(324),n(329),n(328)];for(let o=0;o<r.length;o++){const t=jn.constructor[n(298)][n(304)](jn),i=r[o],a=e[i]||t;t[n(307)]=jn[n(304)](jn),t.toString=a[n(312)].bind(a),e[i]=t}}))();const Un={sunset:kn(315),studio:kn(330),city:kn(319),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:kn(327),forest:"outood/mossy_forest_1k.hdr",snow:kn(332),dawn:kn(306),hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:kn(326),shangai:kn(299)};function Nn(){const n=["table","studio/poly_haven_studio_1k.hdr",'{}.constructor("return this")( )',"outdoor/snowy_forest_path_01_1k.hdr","4880200cTWjDC","return (function() ","action","input","constructor","error","12gJUTDm","test","init","while (true) {}","11277684QKSoLr","prototype","city/shanghai_bund_1k.hdr","16hRacMF","function *\\( *\\)","debu","887nIdHuf","bind","apply","kiara/kiara_1_dawn_1k.hdr","__proto__","string","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1152012GejUHL","toString","counter","24724490YLQouS","venice/venice_sunset_1k.hdr","console","chain","564CeoncK","city/canary_wharf_1k.hdr","2043979BIEpWh","1751490oDOjXF","log","stateObject","exception","info","city/modern_buildings_2_1k.hdr","outdoor/satara_night_1k.hdr","trace"];return(Nn=function(){return n})()}function Ln(n){function t(n){const e=Fn;if(typeof n===e(308))return function(n){}[e(291)](e(296))[e(305)](e(313));1!==(""+n/n).length||n%20==0?function(){return!0}[e(291)](e(302)+e(309)).call(e(289)):function(){return!1}[e(291)](e(302)+e(309))[e(305)](e(323)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Wn;!function(n,t){const e=Wn,r=Gn();for(;;)try{if(108334===-parseInt(e(370))/1*(parseInt(e(383))/2)+parseInt(e(357))/3*(parseInt(e(384))/4)+parseInt(e(391))/5*(parseInt(e(362))/6)+parseInt(e(365))/7+parseInt(e(354))/8+-parseInt(e(361))/9+-parseInt(e(399))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(379)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(){const n=["Failed to load environment map: ","mapping","init","2affVvU","452012LAfinX","isArray","chain","call","toString","gger","texture","793790CyKgtv","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","table","warn","exception","environment","constructor","console","503660ZhWDxY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","bind","stateObject","1284216BWmpTJ","value","string","3DkVlYg","counter","backgroundBlurriness","Preset must be one of: ","1668726RWdZax","6twGmkV","join","__proto__","396585IfyJCw","length","function *\\( *\\)","prototype","return (function() ","144829ORENgq","background","isColor","while (true) {}","setPath","action","debu","keys","error","apply"];return(Gn=function(){return n})()}!function(){Zn(this,(function(){const n=Wn,t=new RegExp(n(367)),e=new RegExp(n(400),"i"),r=Yn(n(382));t[n(401)](r+n(386))&&e.test(r+"input")?Yn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(379)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Gn();return(Wn=function(n,t){return e[n-=353]})(n,t)}Vn(void 0,(function(){const n=Wn;let t;try{t=Function(n(369)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(398)]=t.console||{},r=["log",n(394),"info",n(378),n(395),n(393),"trace"];for(let i=0;i<r[n(366)];i++){const t=Vn[n(397)][n(368)].bind(Vn),o=r[i],a=e[o]||t;t[n(364)]=Vn.bind(Vn),t[n(388)]=a.toString[n(402)](a),e[o]=t}}))();const $n=Hn(392);function Yn(n){function t(n){const e=Wn;if(typeof n===e(356))return function(n){}[e(397)](e(373)).apply(e(358));1!==(""+n/n)[e(366)]||n%20==0?function(){return!0}[e(397)](e(376)+"gger")[e(387)](e(375)):function(){return!1}[e(397)](e(376)+e(389))[e(379)](e(353)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=Qn;function qn(){const n=["prototype","413AZruXt","default","far","$slots","apply","envSence","gger","754416qzcRwI","action","2303532unZnCG","90njaLfs","chain","frames","input","return (function() ","1452720jaKeUp","symbol","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","info","type","table","debu","useDefaultScene","stateObject","environment","minFilter","background","toString","component","virtualScene","warn","texture","error","1670181TZSguy","update","4DRpAVa","log","generateMipmaps","trace","magFilter","length","destructor","counter","isArray","861652bmOPaN","dispose","47800MZRvbX","test","console","bind",'{}.constructor("return this")( )',"5616145IGQmHt"];return(qn=function(){return n})()}!function(n,t){const e=Qn,r=qn();for(;;)try{if(724983===-parseInt(e(482))/1+-parseInt(e(473))/2*(-parseInt(e(471))/3)+parseInt(e(445))/4+parseInt(e(434))/5+-parseInt(e(443))/6+parseInt(e(436))/7*(parseInt(e(484))/8)+parseInt(e(446))/9*(-parseInt(e(451))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=qn();return(Qn=function(n,t){return e[n-=434]})(n,t)}!function(){Xn(this,(function(){const n=Qn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(454),"i"),r=tt("init");t[n(485)](r+n(447))&&e[n(485)](r+n(449))?tt():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(440)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jn(void 0,(function(){const n=Qn,t=function(){const n=Qn;let t;try{t=Function(n(450)+n(488)+");")()}catch(e){t=window}return t}(),e=t[n(486)]=t[n(486)]||{},r=[n(474),n(468),n(456),n(470),"exception",n(458),n(476)];for(let o=0;o<r[n(478)];o++){const t=Jn[n(453)][n(435)].bind(Jn),i=r[o],a=e[i]||t;t.__proto__=Jn[n(487)](Jn),t.toString=a[n(465)][n(487)](a),e[i]=t}}))();const nt=tn({__name:Kn(466),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=X(null),x=null;const b=X(null);en((()=>{var n,t;const e=Qn;null==(n=b.value)||n[e(479)](),null==(t=y[e(455)])||t[e(483)]()}));const{onBeforeLoop:I}=Y();let w=1;I((()=>{const n=Qn;x&&b[n(455)]&&y[n(455)]&&(i.frames===1/0||w<i[n(448)])&&(i.useDefaultScene?x[n(472)](s[n(455)],u[n(455)]):x[n(472)](s.value,ln(b[n(455)][n(467)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=q(n);Q(n,(()=>{o()}));const l=X(null),h=J((()=>Array[e(385)](c[e(355)]))),v=J((()=>h[e(355)]?f:K));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(366)]>0&&!(null==i?void 0:i[r(355)])){try{l[r(355)]=await $(v[r(355)],h.value?[...nn(n)]:nn(n),(n=>{t&&n[r(374)](nn(t))}))}catch(o){throw new Error(r(380)+o)}l[r(355)]&&(l[r(355)][r(381)]=h.value?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(355)]&&n&&(r[t(355)][t(396)]=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(355)]){let e=(null==t?void 0:t.value)?t.value[i(390)]:o,a=r[i(355)][i(371)];!(null==a?void 0:a[i(372)])&&(a=void 0),r.value.background=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(355)]&&n&&(r.value[t(359)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(355)]),(async n=>{const t=e;if(n&&n in Un){const e=$n,i=Un[n];try{l[t(355)]=await $(K,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(380)+r)}l[t(355)]&&l.value&&(l[t(355)][t(381)]=d),o()}else if(n&&!(n in Un))throw new Error(t(360)+Object[t(377)](Un)[t(363)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u[t(455)][t(462)]=n[t(469)],i[t(464)]&&(u.value[t(464)]=n[t(469)])):(u[t(455)][t(462)]=S.value,i[t(464)]&&(u[t(455)][t(464)]=S[t(455)]))};Q(S,(n=>{const t=Qn;y[t(455)]&&M(y[t(455)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const R=()=>{var n;const t=Qn;null==(n=y[t(455)])||n[t(483)](),y[t(455)]=new v(i.resolution),x=new m(i.near,i[t(438)],y.value),i[t(460)]?(y[t(455)][t(469)].type=g,y[t(455)].texture[t(475)]=!1,y[t(455)][t(469)][t(463)]=_,y[t(455)][t(469)][t(477)]=_):y.value[t(469)][t(457)]=h,M(y[t(455)])};return Q((()=>on()[e(437)]),(n=>{var t,r;const o=e;n&&(!y[o(455)]||y[o(455)][o(469)][o(457)]!==h)&&(l=n(),Array[o(481)](l)&&l[o(478)]>0&&typeof(null==(t=l[0])?void 0:t[o(457)])!==o(452))?R():(null==(r=y[o(455)])||r.dispose(),y[o(455)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(455)]=S,Q((()=>i[e(460)]),(n=>{y[e(455)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:r(441),ref:b},[sn(n[r(439)],r(437))],512)):un("",!0)}}});function tt(n){function t(n){const e=Qn;if("string"==typeof n)return function(n){}[e(453)]("while (true) {}").apply(e(480));1!==(""+n/n)[e(478)]||n%20==0?function(){return!0}[e(453)](e(459)+e(442)).call(e(444)):function(){return!1}[e(453)](e(459)+e(442))[e(440)](e(461)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=rt;function rt(n,t){const e=at();return(rt=function(n,t){return e[n-=340]})(n,t)}!function(n,t){const e=rt,r=at();for(;;)try{if(974839===parseInt(e(388))/1+parseInt(e(342))/2+parseInt(e(348))/3+parseInt(e(352))/4+-parseInt(e(384))/5+-parseInt(e(345))/6+-parseInt(e(344))/7*(parseInt(e(353))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=rt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(365),"i"),r=pt(n(371));t.test(r+n(387))&&e[n(378)](r+"input")?pt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(){const n=["debu","material","from","call","__proto__","ring","while (true) {}","intensity","needsUpdate","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","length","bind","value","TresMeshBasicMaterial","init","info","TresMesh","action","string","console","side","test","warn","error","table","exception","gger","1312530OgQxXN","map","prototype","chain","1767335FDBHmr","toneMapped","toString","index","rect","color","constructor","circle","373492txBhip","return (function() ","91HBBBfX","3705702rfXbsP","counter","TresRingGeometry","2994423tnOAqk",'{}.constructor("return this")( )',"multiplyScalar","log","862336StPWmx","807904FeAIWF","set"];return(at=function(){return n})()}it(void 0,(function(){const n=rt;let t;try{t=Function(n(343)+n(349)+");")()}catch(o){t=window}const e=t[n(376)]=t[n(376)]||{},r=[n(351),n(379),n(372),n(380),n(382),n(381),"trace"];for(let i=0;i<r[n(367)];i++){const t=it[n(340)][n(386)].bind(it),o=r[i],a=e[o]||t;t[n(359)]=it[n(368)](it),t.toString=a[n(390)].bind(a),e[o]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=[et(389),"map",et(377),et(393)],ft=tn({__name:et(391),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=X();return fn((()=>{const n=rt;e[n(369)]&&(e[n(369)][n(393)][n(350)](t[n(362)]),e[n(369)].needsUpdate=!0)})),Q((()=>t.color),(n=>{const r=rt;e[r(369)]&&(e[r(369)].color[r(354)](n),e[r(369)][r(393)][r(350)](t[r(362)]),e[r(369)][r(363)]=!0)})),pn((()=>{})),(n,r)=>{const o=rt;return an(),cn(o(373),null,[t[o(357)]===o(341)?(an(),cn(o(347),ct)):t[o(357)]===o(360)?(an(),cn(o(347),st)):t[o(357)]===o(392)?(an(),cn("TresPlaneGeometry",ut)):(an(),dn(t[o(357)],{key:3,args:t})),hn(o(370),{ref_key:o(356),ref:e,toneMapped:n[o(389)],map:n[o(385)],side:nn(x),color:n[o(393)]},null,8,lt)])}}});function pt(n){function t(n){const e=rt;if(typeof n===e(375))return function(n){}[e(340)](e(361))[e(364)](e(346));1!==(""+n/n).length||n%20==0?function(){return!0}[e(340)](e(355)+e(383))[e(358)](e(374)):function(){return!1}[e(340)](e(355)+e(383))[e(364)](e(366)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ht,r=gt();for(;;)try{if(511476===parseInt(e(473))/1+parseInt(e(468))/2*(-parseInt(e(453))/3)+-parseInt(e(456))/4*(-parseInt(e(471))/5)+-parseInt(e(480))/6*(-parseInt(e(481))/7)+parseInt(e(475))/8*(parseInt(e(484))/9)+parseInt(e(488))/10*(-parseInt(e(465))/11)+parseInt(e(487))/12*(-parseInt(e(485))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=gt();return(ht=function(n,t){return e[n-=452]})(n,t)}!function(){dt(this,(function(){const n=ht,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(470),"i"),r=_t(n(469));t[n(498)](r+n(454))&&e[n(498)](r+n(479))?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(493)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?q(n):q(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=W();return fn((()=>{var n;const a=ht;null==(n=t[a(489)])||n[a(464)](),t[a(489)]=new b((null==r?void 0:r[a(489)])||p.width[a(489)],(null==e?void 0:e[a(489)])||p[a(477)][a(489)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(489)])),(null==i?void 0:i[a(489)])&&(t.value[a(463)]=new w((null==r?void 0:r[a(489)])||p[a(452)].value,(null==e?void 0:e[a(489)])||p[a(477)][a(489)]),t[a(489)][a(463)][a(490)]=S,t.value.depthTexture[a(462)]=M)})),s((()=>{const n=ht;(null==a?void 0:a[n(489)])&&(l[n(489)][n(466)](ln(t[n(489)])),l[n(489)][n(461)](),l[n(489)][n(457)](ln(f[n(489)]),ln(u[n(489)])),l[n(489)][n(466)](null))})),gn((()=>{var n;null==(n=t.value)||n.dispose()})),t}function gt(){const n=["dispose","2543046VpcMgR","setRenderTarget","exception","2MfBAGF","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4065GbLZfv","warn","564613lZSQQW","prototype","88680wXRLZH","return (function() ","height","log","input","84NZnDKa","181517NxHmKD","console","constructor","369IFXZol","13EaxuQs",'{}.constructor("return this")( )',"14159244MypkaQ","10vlausm","value","format","error","debu","apply","length","string","bind","trace","test","while (true) {}","width","1271253qQHVfS","chain","toString","4744wDGklA","render","__proto__","counter","gger","clear","type","depthTexture"];return(gt=function(){return n})()}function _t(n){function t(n){const e=ht;if(typeof n===e(495))return function(n){}.constructor(e(499))[e(493)](e(459));1!==(""+n/n)[e(494)]||n%20==0?function(){return!0}[e(483)](e(492)+"gger").call("action"):function(){return!1}[e(483)](e(492)+e(460)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function yt(){const n=["init","6nVCUng","counter","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","apply","bind","1198100FgPLZm","log","fboResolution","call","436874eOxgxp","traverse","11ticIGz","setRenderTarget","length","time",'{}.constructor("return this")( )',"stateObject","constructor","info","buffer","test","2202088utQVvW","115150AcTsLw","MeshTransmissionMaterialClass","exception","index","prototype","material","input","isMesh","string","8JMrCoI","TresMeshTransmissionMaterial","chain","envMapIntensity","function *\\( *\\)","table","background","value","thickness","backside","side","action","return (function() ","gger","error","toString","console","texture","toneMapping","1062185rBXaSI","6312000pZjBmU","backsideThickness","3rBuiZy","while (true) {}","1068129XqlSgj","render"];return(yt=function(){return n})()}vt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function(n(476)+n(486)+");")()}catch(e){t=window}return t}(),e=t[n(482)]=t[n(482)]||{},r=[n(478),n(472),"info",n(491),n(467),"table",n(497)];for(let o=0;o<r[n(494)];o++){const t=vt[n(483)][n(474)].bind(vt),i=r[o],a=e[i]||t;t[n(458)]=vt[n(496)](vt),t[n(455)]=a[n(455)][n(496)](a),e[i]=t}}))();const xt=St;!function(n,t){const e=St,r=yt();for(;;)try{if(179952===-parseInt(e(429))/1+-parseInt(e(416))/2*(-parseInt(e(460))/3)+parseInt(e(412))/4+parseInt(e(457))/5*(parseInt(e(465))/6)+parseInt(e(428))/7+parseInt(e(438))/8*(-parseInt(e(462))/9)+parseInt(e(458))/10*(-parseInt(e(418))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=St,t=new RegExp(n(442)),e=new RegExp(n(408),"i"),r=Rt(n(464));t[n(427)](r+n(440))&&e[n(427)](r+n(435))?Rt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=St;let t;try{t=Function(n(450)+n(422)+");")()}catch(o){t=window}const e=t[n(454)]=t.console||{},r=[n(413),n(467),n(425),n(452),n(431),n(443),n(409)];for(let i=0;i<r[n(420)];i++){const t=It[n(424)][n(433)][n(411)](It),o=r[i],a=e[o]||t;t.__proto__=It[n(411)](It),t[n(453)]=a[n(453)][n(411)](a),e[o]=t}}))();const wt=[xt(426),"side"];function St(n,t){const e=yt();return(St=function(n,t){return e[n-=408]})(n,t)}const Mt=tn({__name:xt(432),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=Y(),p=mt({width:u[e(414)],height:u[e(414)],isLoop:!1}),d=mt({width:u[e(414)],height:u[e(414)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(445)]=function(n,t){const e=St;let r;return n[e(417)]((n=>{const o=e;n[o(436)]&&n[o(434)]&&n[o(434)].uuid===t&&(r=n)})),r}(i[n(445)],r[n(445)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(445)][t(421)]=n,r.value[t(426)]===d[t(445)][t(455)]&&s[t(445)]&&(m=a[t(445)][t(456)],h=i[t(445)][t(444)],v=r[t(445)][t(441)],g=s[t(445)][t(434)][t(448)],s[t(445)][t(434)]=l,u[t(447)]&&(a[t(445)][t(419)](p.value),a[t(445)][t(463)](i[t(445)],c[t(445)]),s[t(445)][t(434)]=r.value,s[t(445)][t(434)][t(446)]=u[t(459)],s[t(445)][t(434)][t(426)]=p[t(445)][t(455)],s[t(445)][t(434)].side=R,s[t(445)].material[t(441)]=0),a[t(445)][t(419)](d.value),a[t(445)][t(463)](i[t(445)],c[t(445)]),s[t(445)][t(434)].buffer=d[t(445)][t(455)],s[t(445)][t(434)]=r[t(445)],s[t(445)][t(434)].thickness=u[t(446)],s[t(445)].material[t(448)]=g,s.value[t(434)].envMapIntensity=v,i[t(445)].background=h,a.value.setRenderTarget(null),a[t(445)][t(456)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn(o(439),{ref_key:o(430),ref:r,buffer:nn(d)[o(455)],side:nn(x)},null,8,wt)}}});function Rt(n){function t(n){const e=St;if(typeof n===e(437))return function(n){}[e(424)](e(461)).apply(e(466));1!==(""+n/n)[e(420)]||n%20==0?function(){return!0}.constructor("debu"+e(451))[e(415)](e(449)):function(){return!1}[e(424)]("debu"+e(451)).apply(e(423)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=At;function At(n,t){const e=Pt();return(At=function(n,t){return e[n-=151]})(n,t)}!function(n,t){const e=At,r=Pt();for(;;)try{if(605254===parseInt(e(180))/1*(-parseInt(e(157))/2)+-parseInt(e(166))/3+-parseInt(e(195))/4*(parseInt(e(184))/5)+-parseInt(e(153))/6*(parseInt(e(186))/7)+parseInt(e(160))/8+parseInt(e(174))/9+parseInt(e(206))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(169)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dt(this,(function(){const n=At,t=new RegExp(n(152)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ct(n(165));t[n(179)](r+n(201))&&e[n(179)](r+"input")?Ct():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pt(){const n=["prototype","disable","log","2562201YPuMud","table","string","__proto__","$slots","test","310xjBhOi","bind","disableY","identity","95XBtDpi","min","2225447MMVuyd","getBoundingSphere","value","disableX","while (true) {}","max","TresGroup","front","getCenter","165644ZFztrG","top","bottom","counter","length","disableZ","chain","warn","debu","error","toString","15937480klXsGN","index","right","function *\\( *\\)","18DyMNLe","setFromObject","constructor","inner","540UnYcPx","outer",'{}.constructor("return this")( )',"8266088RRhtLV","gger","info","exception","matrixWorld","init","1446516msPAzg","trace","left","apply","gref"];return(Pt=function(){return n})()}Tt(void 0,(function(){const n=At,t=function(){const n=At;let t;try{t=Function("return (function() "+n(159)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(173),n(202),n(162),n(204),n(163),n(175),n(167)];for(let o=0;o<r[n(199)];o++){const t=Tt[n(155)][n(171)][n(181)](Tt),i=r[o],a=e[i]||t;t[n(177)]=Tt[n(181)](Tt),t[n(205)]=a[n(205)][n(181)](a),e[i]=t}}))();const zt=tn({__name:Et(207),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=At;if(!r[n(188)])return;if(!o[n(188)])return;r[n(188)][n(164)][n(183)]();const e=(new E)[n(154)](o[n(188)],t.precise),i=new A,a=new D,c=e[n(191)].x-e[n(185)].x,s=e[n(191)].y-e[n(185)].y,u=e[n(191)].z-e[n(185)].z;e[n(194)](i),e[n(187)](a);const l=t[n(196)]?s/2:t[n(197)]?-s/2:0,f=t[n(168)]?-c/2:t[n(151)]?c/2:0,p=t[n(193)]?u/2:t.back?-u/2:0;r[n(188)].position.set(t[n(172)]||t[n(189)]?0:-i.x+f,t.disable||t[n(182)]?0:-i.y+l,t[n(172)]||t[n(200)]?0:-i.z+p)})),(n,t)=>{const i=At;return an(),cn(i(192),{ref_key:i(170),ref:e},[hn(i(192),{ref_key:i(158),ref:r},[hn(i(192),{ref_key:i(156),ref:o},[sn(n[i(178)],"default")],512)],512)],512)}}});function Ct(n){function t(n){const e=At;if(typeof n===e(176))return function(n){}[e(155)](e(190))[e(169)](e(198));1!==(""+n/n)[e(199)]||n%20==0?function(){return!0}[e(155)](e(203)+e(161)).call("action"):function(){return!1}.constructor(e(203)+e(161))[e(169)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Bt;!function(n,t){const e=Bt,r=Nt();for(;;)try{if(321645===parseInt(e(209))/1*(parseInt(e(188))/2)+parseInt(e(214))/3*(-parseInt(e(206))/4)+-parseInt(e(229))/5+-parseInt(e(226))/6+parseInt(e(238))/7+parseInt(e(213))/8+parseInt(e(218))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=Bt,t=new RegExp(n(210)),e=new RegExp(n(202),"i"),r=Ht("init");t[n(217)](r+n(200))&&e.test(r+n(203))?Ht():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Nt();return(Bt=function(n,t){return e[n-=187]})(n,t)}Ft(void 0,(function(){const n=Bt,t=function(){const n=Bt;let t;try{t=Function(n(204)+n(211)+");")()}catch(e){t=window}return t}(),e=t[n(193)]=t[n(193)]||{},r=[n(207),"warn",n(197),"error",n(239),n(195),n(196)];for(let o=0;o<r.length;o++){const t=Ft[n(190)].prototype.bind(Ft),i=r[o],a=e[i]||t;t[n(235)]=Ft.bind(Ft),t.toString=a[n(234)][n(233)](a),e[i]=t}}))();const jt=["object"],Ut=[Ot(219)];function Nt(){const n=["object","primitive","TresGroup","string","causticsOnly","value","while (true) {}","2385234vFQjQf","apply","length","1094050iNNJkk","Vector3","far","set","bind","toString","__proto__","params","ior","1365238CTzzfY","exception","intensity","$slots","106NuBCos","resolution","constructor","counter","helper","console","update","table","trace","info","#ffffff","gger","chain","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","return (function() ","worldRadius","740YvGRiW","log","color","8227eieIGe","function *\\( *\\)",'{}.constructor("return this")( )',"lightSource","4642152WwSAEu","6225CrmUGJ","default","action","test","994815UuLfwY"];return(Nt=function(){return n})()}const Lt=tn({__name:"index",props:{color:{default:Ot(198)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=W(),o=Mn(r[t(224)],{frames:1/0,resolution:e[t(189)],worldRadius:e.worldRadius});o[t(236)].backside=!0;const i=_n(null);Q(i,(n=>{n&&o.scene.add(n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(194)]()})),fn((()=>{const n=t;e[n(208)]&&o[n(236)][n(208)][n(232)](e[n(208)]),e[n(237)]&&(o[n(236)][n(237)]=e[n(237)]),e.backsideIOR&&(o[n(236)].backsideIOR=e.backsideIOR),e.far&&(o.params.far=e[n(231)]),e[n(205)]&&(o[n(236)].worldRadius=e.worldRadius),e[n(240)]&&(o[n(236)].intensity=e.intensity)})),Q((()=>e[t(223)]),(n=>{const e=t;o[e(236)][e(223)]=n})),Q((()=>e.lightSource),(n=>{const e=t;n&&o[e(236)][e(212)]instanceof T[e(230)]&&o.params[e(212)][e(232)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(221),{ref_key:"group",ref:i},[sn(n[r(187)],r(215))],512),hn(r(220),{object:nn(o).group,position:[0,.003,0]},null,8,jt),hn(r(220),{object:nn(o)[r(192)],visible:!1},null,8,Ut)],64)}}});function Ht(n){function t(n){const e=Bt;if(typeof n===e(222))return function(n){}[e(190)](e(225))[e(227)](e(191));1!==(""+n/n)[e(228)]||n%20==0?function(){return!0}[e(190)](e(201)+e(199)).call(e(216)):function(){return!1}.constructor(e(201)+"gger")[e(227)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=Wt();for(;;)try{if(583664===-parseInt(e(333))/1+-parseInt(e(298))/2*(parseInt(e(293))/3)+parseInt(e(319))/4+-parseInt(e(313))/5+-parseInt(e(291))/6+-parseInt(e(325))/7*(parseInt(e(308))/8)+parseInt(e(281))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Vt,t=new RegExp(n(305)),e=new RegExp(n(318),"i"),r=Yt(n(331));t[n(320)](r+n(302))&&e[n(320)](r+n(312))?Yt():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(n,t){const e=Wt();return(Vt=function(n,t){return e[n-=279]})(n,t)}function Wt(){const n=["toString","traverse","constructor","shadowmap_pars_fragment","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","316172vnjFZY","test","return (function() ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","debu",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","837739Drerll","table","warn","forEach","gger","remove","init","isArray","190445sBrqbt","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","material","log","dispose","action","16687584pGsZDa","properties","error","length","programs","string","ShaderChunk","call","; i++) {\n        vogelSample = vogelDiskSample(j, ",'{}.constructor("return this")( )',"3240804sKKUvm","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","402867aUHCXN",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","#ifdef USE_SHADOWMAP","compile","replace","2rifHQH","exception","bind","console","chain","apply","while (true) {}","function *\\( *\\)","stateObject",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","24nAxqfI","; i ++) {\n        offset = (vogelDiskSample(j, ",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","trace","input","628280SVOaxX"];return(Wt=function(){return n})()}Gt(void 0,(function(){const n=Vt;let t;try{t=Function(n(321)+n(290)+");")()}catch(o){t=window}const e=t.console=t[n(301)]||{},r=[n(336),n(327),"info",n(283),n(299),n(326),n(311)];for(let i=0;i<r[n(284)];i++){const t=Gt[n(316)].prototype.bind(Gt),o=r[i],a=e[o]||t;t.__proto__=Gt[n(300)](Gt),t[n(314)]=a[n(314)][n(300)](a),e[o]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=T[r(287)].shadowmap_pars_fragment;return P[r(317)]=T[r(287)][r(317)][r(297)](r(295),r(334)+t+r(294)+n+r(307)+e+r(309)+e+r(310)+e+r(289)+e+r(322)+t+r(292)+e+r(324))[r(297)]("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;T[i(287)][i(317)]=o,function(n,t,e){const r=Vt;t[r(315)]((t=>{const e=r;t[e(335)]&&(Array[e(332)](t[e(335)])?t[e(335)][e(328)]((t=>{const r=e;n[r(282)][r(330)](t),t.dispose()})):(n[e(282)][e(330)](t[e(335)]),t[e(335)][e(279)]()))})),n.info[r(285)][r(284)]=0,n[r(296)](t,e)}(n,t,e)}};function Yt(n){function t(n){const e=Vt;if(typeof n===e(286))return function(n){}[e(316)](e(304))[e(303)]("counter");1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}.constructor(e(323)+e(329))[e(288)](e(280)):function(){return!1}[e(316)](e(323)+"gger")[e(303)](e(306)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kt=Jt;function qt(){const n=["table","trace","action","__proto__","67803gqhUdy","init","36804arDzHe","545rrYPpk","console","70759DycYVK","index","9NMeOqE","28bsOBxS","bind","constructor","info","toString","length","test","counter","3055731xiqwrf","warn","call","while (true) {}","21348LKyElW","335470OqstJL","apply","stateObject","2363532baevCg","8QAyIVe","value","debu","input","error","gger","material","11ypVzZT","dispose"];return(qt=function(){return n})()}!function(n,t){const e=Jt,r=qt();for(;;)try{if(220553===-parseInt(e(163))/1+parseInt(e(160))/2+-parseInt(e(158))/3*(-parseInt(e(166))/4)+-parseInt(e(161))/5*(-parseInt(e(140))/6)+-parseInt(e(136))/7*(parseInt(e(145))/8)+parseInt(e(165))/9*(-parseInt(e(141))/10)+parseInt(e(152))/11*(parseInt(e(144))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(142)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=Jt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=te(n(159));t[n(134)](r+"chain")&&e[n(134)](r+n(148))?te():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(142)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(n,t){const e=qt();return(Jt=function(n,t){return e[n-=131]})(n,t)}Qt(void 0,(function(){const n=Jt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(162)]=t[n(162)]||{},r=["log",n(137),n(131),n(149),"exception",n(154),n(155)];for(let o=0;o<r[n(133)];o++){const t=Qt.constructor.prototype[n(167)](Qt),i=r[o],a=e[i]||t;t[n(157)]=Qt.bind(Qt),t[n(132)]=a[n(132)][n(167)](a),e[i]=t}}))();const ne=tn({__name:Kt(164),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(146)],o.value,e[t(146)]),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o.value.traverse((n=>{const e=t;n instanceof l&&n[e(151)][e(153)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function te(n){function t(n){const e=Jt;if("string"==typeof n)return function(n){}[e(168)](e(139))[e(142)](e(135));1!==(""+n/n)[e(133)]||n%20==0?function(){return!0}.constructor(e(147)+e(150))[e(138)](e(156)):function(){return!1}[e(168)](e(147)+e(150))[e(142)](e(143)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ee=re;function re(n,t){const e=ue();return(re=function(n,t){return e[n-=104]})(n,t)}!function(n,t){const e=re,r=ue();for(;;)try{if(640844===parseInt(e(150))/1+parseInt(e(123))/2+parseInt(e(145))/3*(parseInt(e(124))/4)+parseInt(e(120))/5+-parseInt(e(140))/6+-parseInt(e(130))/7*(-parseInt(e(133))/8)+parseInt(e(126))/9*(-parseInt(e(138))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(136)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){oe(this,(function(){const n=re,t=new RegExp(n(148)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=se("init");t.test(r+n(111))&&e[n(113)](r+n(118))?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=re;let t;try{t=Function(n(131)+n(141)+");")()}catch(o){t=window}const e=t[n(147)]=t[n(147)]||{},r=[n(108),"warn",n(106),n(125),n(107),"table","trace"];for(let i=0;i<r[n(146)];i++){const t=ie.constructor[n(116)][n(129)](ie),o=r[i],a=e[o]||t;t[n(105)]=ie[n(129)](ie),t[n(104)]=a.toString.bind(a),e[o]=t}}))();const ae=parseInt(F[ee(137)](/\D+/g,""));class ce extends z{constructor(n=new O){const t=ee;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(127)+t(ae>=154?134:149)+">\n        }",vertexShader:t(139),blending:k,depthWrite:!1,depthTest:!1}),this[t(122)]=!1,this.setTexelSize(n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[ee(128)](n,t){const e=ee;this.uniforms.texelSize[e(115)][e(114)](n,t),this[e(144)][e(119)].value.set(n,t)[e(109)](.5)}[ee(135)](n){const t=ee;this[t(144)].resolution[t(115)][t(112)](n)}}function se(n){function t(n){const e=re;if("string"==typeof n)return function(n){}.constructor(e(142))[e(136)](e(110));1!==(""+n/n).length||n%20==0?function(){return!0}[e(117)](e(121)+"gger")[e(132)]("action"):function(){return!1}[e(117)](e(121)+e(143))[e(136)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ue(){const n=["bind","271327RrkhmO","return (function() ","call","200bVJNuv","colorspace_fragment","setResolution","apply","replace","367480CZyHSJ","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","6406926UreSFY",'{}.constructor("return this")( )',"while (true) {}","gger","uniforms","6ajMwJA","length","console","function *\\( *\\)","encodings_fragment","1230434OlojdL","toString","__proto__","info","exception","log","multiplyScalar","counter","chain","copy","test","set","value","prototype","constructor","input","halfTexelSize","5530285iQyauC","debu","toneMapped","758070opLwCW","1119452IHnGsW","error","621OJlAZU","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","setTexelSize"];return(ue=function(){return n})()}const le=fe;function fe(n,t){const e=me();return(fe=function(n,t){return e[n-=235]})(n,t)}!function(n,t){const e=fe,r=me();for(;;)try{if(259298===-parseInt(e(284))/1+-parseInt(e(243))/2*(parseInt(e(266))/3)+parseInt(e(260))/4*(parseInt(e(240))/5)+parseInt(e(270))/6*(parseInt(e(237))/7)+parseInt(e(276))/8+-parseInt(e(290))/9*(parseInt(e(248))/10)+parseInt(e(267))/11*(parseInt(e(282))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pe(this,(function(){const n=fe,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ve(n(263));t[n(239)](r+n(264))&&e[n(239)](r+"input")?ve():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(252)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();de(void 0,(function(){const n=fe,t=function(){const n=fe;let t;try{t=Function(n(283)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(238)]||{},r=[n(256),n(255),n(257),n(286),"exception","table",n(250)];for(let o=0;o<r[n(265)];o++){const t=de.constructor[n(281)][n(262)](de),i=r[o],a=e[i]||t;t[n(271)]=de[n(262)](de),t.toString=a[n(236)][n(262)](a),e[i]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this.renderToScreen=!1,this[c(292)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(246)]=this[c(292)][c(272)](),this[c(277)]=new ce,this[c(277)][c(274)](1/t,1/e),this[c(277)][c(280)](new O(t,e)),this[c(291)]=new u,this[c(259)]=new B,this[c(277)][c(288)].minDepthThreshold[c(261)]=r,this[c(277)][c(288)][c(258)][c(261)]=o,this[c(277)][c(288)][c(251)][c(261)]=i,this[c(277)][c(288)][c(289)][c(261)]=a,this[c(277)].defines.USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p.setAttribute(c(241),new U(s,3)),p[c(269)]("uv",new U(f,2)),this[c(273)]=new l(p,this[c(277)]),this.screen[c(287)]=!1,this[c(291)].add(this.screen)}[le(279)](n,t,e){const r=le,o=this.scene,i=this[r(259)],a=this[r(292)],c=this[r(246)],s=this[r(277)],u=s[r(288)];u.depthBuffer[r(261)]=t[r(235)];const l=s[r(285)];let f,p,d,h=t;for(p=0,d=l[r(265)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(285)][r(261)]=l[p],u[r(253)][r(261)]=h.texture,n.setRenderTarget(f),n.render(o,i),h=f;u.kernel[r(261)]=l[p],u[r(253)][r(261)]=h[r(249)],n[r(278)](this.renderToScreen?null:e),n[r(279)](o,i)}}function ve(n){function t(n){const e=fe;if(typeof n===e(247))return function(n){}[e(245)](e(275))[e(252)](e(268));1!==(""+n/n)[e(265)]||n%20==0?function(){return!0}[e(245)]("debu"+e(293))[e(254)]("action"):function(){return!1}.constructor(e(244)+e(293))[e(252)](e(242)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function me(){const n=["setTexelSize","while (true) {}","643520ncwNzK","convolutionMaterial","setRenderTarget","render","setResolution","prototype","2778516kwKaRF","return (function() ","508858ekqDHd","kernel","error","frustumCulled","uniforms","depthToBlurRatioBias","7947bpzRHf","scene","renderTargetA","gger","depthTexture","toString","2163EZoorw","console","test","235435cPmZth","position","stateObject","185756EPHDDn","debu","constructor","renderTargetB","string","3490HolITC","texture","trace","depthScale","apply","inputBuffer","call","warn","log","info","maxDepthThreshold","camera","44XVlGqV","value","bind","init","chain","length","12BVLTNL","33VfkaXk","counter","setAttribute","3006ecdxsR","__proto__","clone","screen"];return(me=function(){return n})()}var ge=ye;!function(n,t){for(var e=ye,r=Ie();;)try{if(713471===-parseInt(e(408))/1*(-parseInt(e(403))/2)+-parseInt(e(442))/3*(parseInt(e(411))/4)+parseInt(e(396))/5+-parseInt(e(466))/6*(-parseInt(e(460))/7)+-parseInt(e(426))/8*(parseInt(e(470))/9)+-parseInt(e(465))/10*(-parseInt(e(472))/11)+-parseInt(e(422))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(n,t){var e=Ie();return(ye=function(n,t){return e[n-=391]})(n,t)}!function(){_e(this,(function(){var n=ye,t=new RegExp(n(467)),e=new RegExp(n(436),"i"),r=we(n(424));t[n(430)](r+n(427))&&e[n(430)](r+n(415))?we():r("0")}))()}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xe(void 0,(function(){for(var n=ye,t=function(){var n,t=ye;try{n=Function(t(449)+t(391)+");")()}catch(e){n=window}return n}(),e=t[n(423)]=t[n(423)]||{},r=[n(440),n(469),"info",n(414),n(438),n(398),n(435)],o=0;o<r.length;o++){var i=xe.constructor[n(461)].bind(xe),a=r[o],c=e[a]||i;i[n(455)]=xe[n(405)](xe),i[n(395)]=c.toString[n(405)](c),e[a]=i}}))();class be extends N{constructor(n={}){var t=ye;super(n),this._tDepth={value:null},this._distortionMap={value:null},this[t(400)]={value:null},this[t(420)]={value:null},this[t(453)]={value:null},this[t(437)]={value:!1},this._mirror={value:0},this._mixBlur={value:0},this[t(473)]={value:.5},this[t(471)]={value:.9},this[t(397)]={value:1},this._depthScale={value:0},this[t(412)]={value:.25},this[t(425)]={value:1},this[t(413)]={value:1},this[t(416)](n)}onBeforeCompile(n){var t,e=ye;!(null==(t=n[e(448)])?void 0:t[e(399)])&&(n.defines.USE_UV=""),n[e(441)][e(462)]=this[e(437)],n[e(441)][e(457)]=this[e(400)],n[e(441)][e(421)]=this._tDepth,n[e(441)][e(393)]=this[e(456)],n[e(441)][e(432)]=this[e(420)],n.uniforms.textureMatrix=this[e(453)],n.uniforms[e(431)]=this[e(410)],n[e(441)][e(429)]=this[e(394)],n[e(441)][e(446)]=this._blurStrength,n[e(441)].minDepthThreshold=this[e(471)],n[e(441)][e(463)]=this[e(397)],n[e(441)][e(406)]=this[e(445)],n[e(441)][e(451)]=this[e(412)],n[e(441)].distortion=this._distortion,n[e(441)][e(452)]=this[e(413)],n.vertexShader="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(433)],n[e(433)]=n[e(433)][e(404)](e(450),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(464)]=e(468)+n[e(464)],n[e(464)]=n[e(464)][e(404)]("#include <emissivemap_fragment>",e(434))}get[ge(457)](){var n=ge;return this[n(400)][n(392)]}set tDiffuse(n){var t=ge;this[t(400)][t(392)]=n}get[ge(421)](){return this[ge(401)].value}set tDepth(n){var t=ge;this._tDepth[t(392)]=n}get[ge(393)](){var n=ge;return this[n(456)][n(392)]}set distortionMap(n){this[ge(456)].value=n}get tDiffuseBlur(){var n=ge;return this[n(420)][n(392)]}set[ge(432)](n){var t=ge;this[t(420)][t(392)]=n}get[ge(447)](){var n=ge;return this[n(453)][n(392)]}set[ge(447)](n){this[ge(453)].value=n}get hasBlur(){var n=ge;return this[n(437)][n(392)]}set[ge(462)](n){var t=ge;this[t(437)][t(392)]=n}get[ge(431)](){var n=ge;return this._mirror[n(392)]}set[ge(431)](n){var t=ge;this._mirror[t(392)]=n}get mixBlur(){var n=ge;return this[n(394)][n(392)]}set[ge(429)](n){var t=ge;this[t(394)][t(392)]=n}get[ge(446)](){var n=ge;return this._blurStrength[n(392)]}set[ge(446)](n){this[ge(473)].value=n}get minDepthThreshold(){var n=ge;return this[n(471)][n(392)]}set[ge(419)](n){var t=ge;this[t(471)][t(392)]=n}get maxDepthThreshold(){var n=ge;return this[n(397)][n(392)]}set[ge(463)](n){var t=ge;this._maxDepthThreshold[t(392)]=n}get depthScale(){return this._depthScale.value}set[ge(406)](n){var t=ge;this[t(445)][t(392)]=n}get depthToBlurRatioBias(){var n=ge;return this[n(412)][n(392)]}set[ge(451)](n){var t=ge;this[t(412)][t(392)]=n}get[ge(417)](){var n=ge;return this[n(425)][n(392)]}set distortion(n){var t=ge;this[t(425)][t(392)]=n}get[ge(452)](){var n=ge;return this._mixContrast[n(392)]}set[ge(452)](n){var t=ge;this[t(413)][t(392)]=n}}function Ie(){var n=["counter","_mirror","21844TMhnFO","_depthToBlurRatioBias","_mixContrast","error","input","setValues","distortion","action","minDepthThreshold","_tDiffuseBlur","tDepth","14326152VyqyOK","console","init","_distortion","176alJjbb","chain","constructor","mixBlur","test","mirror","tDiffuseBlur","vertexShader","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_hasBlur","exception","apply","log","uniforms","777ulbJgh","length","while (true) {}","_depthScale","mixStrength","textureMatrix","defines","return (function() ","#include <project_vertex>","depthToBlurRatioBias","mixContrast","_textureMatrix","gger","__proto__","_distortionMap","tDiffuse","debu","stateObject","1359407aueepj","prototype","hasBlur","maxDepthThreshold","fragmentShader","470YZxhBO","42LkuUzU","function *\\( *\\)","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","warn","273879akgKMz","_minDepthThreshold","142703cmNRtp","_blurStrength",'{}.constructor("return this")( )',"value","distortionMap","_mixBlur","toString","5246940ryheKk","_maxDepthThreshold","table","USE_UV","_tDiffuse","_tDepth","string","13056bWlGuz","replace","bind","depthScale","call","149kkUFpN"];return(Ie=function(){return n})()}function we(n){function t(n){var e=ye;if(typeof n===e(402))return function(n){}.constructor(e(444))[e(439)](e(409));1!==(""+n/n)[e(443)]||n%20==0?function(){return!0}[e(428)](e(458)+e(454))[e(407)](e(418)):function(){return!1}.constructor(e(458)+e(454))[e(439)](e(459)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Ee;!function(n,t){const e=Ee,r=Ae();for(;;)try{if(999753===parseInt(e(489))/1*(-parseInt(e(430))/2)+parseInt(e(526))/3*(parseInt(e(451))/4)+parseInt(e(502))/5*(-parseInt(e(443))/6)+-parseInt(e(475))/7+parseInt(e(519))/8+-parseInt(e(486))/9+parseInt(e(512))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Ee,t=new RegExp(n(483)),e=new RegExp(n(506),"i"),r=Pe(n(436));t[n(511)](r+n(508))&&e[n(511)](r+n(455))?Pe():r("0")}))()}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ee(n,t){const e=Ae();return(Ee=function(n,t){return e[n-=422]})(n,t)}function Ae(){const n=["exception","isMesh","dot","max-depth-threshold","constructor","function *\\( *\\)","autoUpdate","depthTexture","10751364klipqg","reflectorOffset","mirror","2631UmSXsD","clipPlane","has-blur","action","matrixWorld","defines-USE_BLUR","normal","distortion","add",'{}.constructor("return this")( )',"shadowMap","setFromMatrixPosition","debu","5KfwvHX","view","prototype","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","virtualCamera","chain","key","constant","test","40368010xZSKOp","gger","clear","string","extractRotation","t-diffuse","target","8038120sxljmC","bind","enabled","materialRef","cameraWorldPosition","stateObject","reflectorPlane","12657QksiVv","texture","call","setRenderTarget","toString","sign","reflect","addScaledVector","elements","1010VkXLov","copy","subVectors","multiply","info","return (function() ","init","min-depth-threshold","mix-strength","length","applyMatrix4","dispose","while (true) {}","3075354tsUGoD","texture-matrix","material","error","textureMatrix","lookAt","matrixWorldInverse","reflectorWorldPosition","316iCpnfu","render","visible","lookAtPosition","input","table","console","assign","mix-contrast","t-diffuse-blur","negate","multiplyScalar","far","position","value","__proto__","defines-USE_DEPTH","apply","rotationMatrix","uuid","set","projectionMatrix","log","defines-USE_DISTORTION","9375128TTlxyE","trace","depth-scale"];return(Ae=function(){return n})()}Re(void 0,(function(){const n=Ee;let t;try{t=Function(n(435)+n(498)+");")()}catch(o){t=window}const e=t[n(457)]=t[n(457)]||{},r=[n(473),"warn",n(434),n(446),n(478),n(456),n(476)];for(let i=0;i<r.length;i++){const t=Re.constructor[n(504)][n(520)](Re),o=r[i],a=e[o]||t;t[n(466)]=Re[n(520)](Re),t.toString=a[n(425)].bind(a),e[o]=t}}))();const De=[Se(444),Se(488),Se(517),"t-depth",Se(460),Se(491),Se(438),Se(437),Se(481),Se(477),"depth-to-blur-ratio-bias",Se(496),"distortionMap",Se(459),Se(494),Se(467),Se(474)],Te=tn({__name:Se(505),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=q(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:be});const D=_n(),T=_n(),P=_n(),z=_n(),C=J((()=>{const n=Ee;return"number"==typeof f.value?[f[n(465)],f.value]:f[n(465)]})),O=J((()=>C[r(465)][0]>0||C.value[1]>0)),k={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=D[o(465)])||n.texture[o(441)]();const f={minFilter:I,magFilter:I,type:h};var y,x;D[o(465)]=new b(i[o(465)],i[o(465)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(465)],i.value,S,M)},t(y,e(x)))),T.value=new b(i[o(465)],i[o(465)],f),P.value=new he({resolution:i[o(465)],width:C[o(465)][0],height:C.value[1],minDepthThreshold:a[o(465)],maxDepthThreshold:s[o(465)],depthScale:u[o(465)],depthToBlurRatioBias:l.value}),z[o(465)]={mirror:p,textureMatrix:k[o(447)],mixBlur:d,tDiffuse:D[o(465)][o(422)],tDepth:D[o(465)][o(485)],tDiffuseBlur:D[o(465)][o(422)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(465)],mixContrast:_,"defines-USE_BLUR":O[o(465)]?"":void 0,"defines-USE_DEPTH":u[o(465)]>0?"":void 0,"defines-USE_DISTORTION":g[o(465)]?"":void 0}}));const F=_n(),{onLoop:B}=Y();B((()=>{var n;const t=r;if(!(F[t(465)]&&R.value&&D[t(465)]&&y[t(465)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Ee;n[r(479)]&&n[r(445)]&&n.material[r(470)]===t&&(e=n)})),e}(x.value,F.value[t(470)]);if(!e)return;e[t(453)]=!1;const i=R[t(465)].xr[t(521)],a=R[t(465)][t(499)].autoUpdate;(function(n){var t,e;const r=Ee;if(k[r(450)][r(500)](n[r(493)]),k[r(523)][r(500)](null==(t=y.value)?void 0:t.matrixWorld),k[r(469)].extractRotation(n[r(493)]),k[r(495)].set(0,0,1),k[r(495)][r(440)](k[r(469)]),k.reflectorWorldPosition[r(428)](k.normal,o[r(487)]),k[r(503)][r(432)](k[r(450)],k[r(523)]),k.view[r(480)](k[r(495)])>0)return;k[r(503)][r(427)](k[r(495)])[r(461)](),k[r(503)][r(497)](k[r(450)]),k[r(469)][r(516)](null==(e=y[r(465)])?void 0:e[r(493)]),k[r(454)].set(0,0,-1),k[r(454)].applyMatrix4(k.rotationMatrix),k[r(454)].add(k.cameraWorldPosition),k[r(518)][r(432)](k[r(450)],k.lookAtPosition),k[r(518)][r(427)](k.normal)[r(461)](),k[r(518)].add(k.reflectorWorldPosition),k[r(507)][r(464)].copy(k[r(503)]),k[r(507)].up.set(0,1,0),k[r(507)].up[r(440)](k[r(469)]),k[r(507)].up[r(427)](k[r(495)]),k[r(507)][r(448)](k.target),k[r(507)][r(463)]=(null==y?void 0:y[r(465)])[r(463)],k[r(507)].updateMatrixWorld(),k.virtualCamera[r(472)][r(431)]((null==y?void 0:y[r(465)]).projectionMatrix),k[r(447)][r(471)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.textureMatrix[r(433)](k[r(507)][r(472)]),k[r(447)][r(433)](k[r(507)][r(449)]),k[r(447)][r(433)](n.matrixWorld),k[r(525)].setFromNormalAndCoplanarPoint(k[r(495)],k.reflectorWorldPosition),k[r(525)][r(440)](k[r(507)][r(449)]),k.clipPlane.set(k[r(525)][r(495)].x,k[r(525)].normal.y,k[r(525)][r(495)].z,k.reflectorPlane[r(510)]);const i=k[r(507)][r(472)];k.q.x=(Math.sign(k[r(490)].x)+i[r(429)][8])/i[r(429)][0],k.q.y=(Math[r(426)](k[r(490)].y)+i[r(429)][9])/i.elements[5],k.q.z=-1,k.q.w=(1+i[r(429)][10])/i.elements[14],k[r(490)][r(462)](2/k.clipPlane[r(480)](k.q)),i[r(429)][2]=k[r(490)].x,i[r(429)][6]=k.clipPlane.y,i[r(429)][10]=k[r(490)].z+1,i.elements[14]=k.clipPlane.w})(e),R[t(465)][t(499)][t(484)]=!1,R[t(465)][t(424)](D[t(465)]),R.value.autoClear||R[t(465)][t(514)](),R[t(465)][t(452)](x[t(465)],k[t(507)]),null==(n=null==P?void 0:P[t(465)])||n[t(452)](R[t(465)],D[t(465)],T[t(465)]),R[t(465)].xr[t(521)]=i,R.value[t(499)][t(484)]=a,e[t(453)]=!0,R.value[t(424)](null)}));const j=bn(),U=J((()=>{const n=r,t={};return Object[n(458)](t,o),Object[n(458)](t,j.value),t}));return gn((()=>{var n,t;const e=r;null==(n=null==D?void 0:D[e(465)])||n[e(441)](),null==(t=null==T?void 0:T[e(465)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return an(),cn("TresMeshReflectorMaterial",In({key:c(509)+z[c(465)]["defines-USE_BLUR"]+z.value[c(467)]+z[c(465)][c(474)],ref_key:c(522),ref:F},U.value,{"texture-matrix":k[c(447)],mirror:nn(p),"t-diffuse":null==(e=D[c(465)])?void 0:e[c(422)],"t-depth":null==(o=D[c(465)])?void 0:o[c(485)],"t-diffuse-blur":null==(i=T[c(465)])?void 0:i[c(422)],"has-blur":O[c(465)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O[c(465)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,De)}}});function Pe(n){function t(n){const e=Ee;if(typeof n===e(515))return function(n){}.constructor(e(442)).apply("counter");1!==(""+n/n)[e(439)]||n%20==0?function(){return!0}[e(482)](e(501)+"gger")[e(423)](e(492)):function(){return!1}[e(482)](e(501)+e(513)).apply(e(524)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ke,r=Oe();for(;;)try{if(512358===parseInt(e(225))/1*(-parseInt(e(212))/2)+parseInt(e(193))/3*(-parseInt(e(216))/4)+-parseInt(e(226))/5+parseInt(e(235))/6+-parseInt(e(213))/7*(parseInt(e(197))/8)+parseInt(e(211))/9*(-parseInt(e(206))/10)+-parseInt(e(222))/11*(-parseInt(e(217))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=ke,t=new RegExp(n(200)),e=new RegExp(n(223),"i"),r=Fe(n(236));t[n(192)](r+"chain")&&e[n(192)](r+"input")?Fe():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(202)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(){const n=["console","34229822rzyCPM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","6mCZUEC","3090180lPndgB","stateObject","value","while (true) {}","bind","call","info","counter","constructor","2918658MRKUfH","init","__proto__","test","1047333nJOIYj","length","fog","background","304PUhhMQ","log","type","function *\\( *\\)","gger","apply","warn","CubeCamera","debu","1421110bioTin","error","update","toString","table","27tfWYxy","232318vKTfEv","119063ynikqj","exception","prototype","8FTnLMV","12DlSkVy","dispose","string","trace"];return(Oe=function(){return n})()}function ke(n,t){const e=Oe();return(ke=function(n,t){return e[n-=192]})(n,t)}function Fe(n){function t(n){const e=ke;if(typeof n===e(219))return function(n){}[e(234)](e(229))[e(202)](e(233));1!==(""+n/n).length||n%20==0?function(){return!0}[e(234)](e(205)+"gger")[e(231)]("action"):function(){return!1}[e(234)](e(205)+e(201))[e(202)](e(227)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=ke;let t;try{t=Function(n(224)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(221)]=t[n(221)]||{},r=[n(198),n(203),n(232),n(207),n(214),n(210),n(220)];for(let i=0;i<r[n(194)];i++){const t=Ce[n(234)][n(215)][n(230)](Ce),o=r[i],a=e[o]||t;t[n(237)]=Ce[n(230)](Ce),t[n(209)]=a[n(209)][n(230)](a),e[o]=t}}))();const Be=je;function je(n,t){const e=Le();return(je=function(n,t){return e[n-=234]})(n,t)}!function(n,t){const e=je,r=Le();for(;;)try{if(960557===-parseInt(e(269))/1+parseInt(e(268))/2+-parseInt(e(240))/3+-parseInt(e(270))/4+parseInt(e(274))/5*(parseInt(e(264))/6)+-parseInt(e(257))/7*(parseInt(e(238))/8)+parseInt(e(263))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=je,t=new RegExp(n(237)),e=new RegExp(n(261),"i"),r=Ge(n(248));t[n(244)](r+n(256))&&e.test(r+n(255))?Ge():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Le(){const n=["visible","near","$slots","input","chain","4873729QXaRIV","while (true) {}","length","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","24642279ENMBLA","32622vCNuos","apply","frames","TresGroup","2047108EzwuMD","1251552CQoKxE","5172632JPKQtY","constructor","default","table","740SDSnTp","far","stateObject","action","info","primitive",'{}.constructor("return this")( )',"bind","fog","function *\\( *\\)","8KyInJE","debu","1094241HQPbfV","object","gger","__proto__","test","console","resolution","envMap","init","toString","texture","error"];return(Le=function(){return n})()}Ne(void 0,(function(){const n=je,t=function(){const n=je;let t;try{t=Function("return (function() "+n(234)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(245)]||{},r=["log","warn",n(278),n(251),"exception",n(273),"trace"];for(let o=0;o<r.length;o++){const t=Ne[n(271)].prototype[n(235)](Ne),i=r[o],a=e[i]||t;t[n(243)]=Ne[n(235)](Ne),t[n(249)]=a.toString[n(235)](a),e[i]=t}}))();const He=[Be(241)],Ze=tn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return Q((()=>s),(n=>{var t;const e=ke;null==(t=c.value)||t[e(218)](),c[e(228)]=new v(n[e(228)]),c[e(228)].texture[e(199)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=ke;e&&(f.value=new(T[r(204)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=ke;null==(n=c[t(228)])||n[t(218)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ke;p=a[t(228)][t(195)],d=a[t(228)][t(196)],a[t(228)][t(196)]=r||d,a[t(228)][t(195)]=o||p,null==(n=f.value)||n[t(208)](i[t(228)],a[t(228)]),a[t(228)][t(195)]=p,a[t(228)][t(196)]=d}}}({resolution:o[r(246)],near:o[r(253)],far:o[r(275)],envMap:o[r(247)],fog:o[r(236)]}),{onBeforeLoop:s}=Y();let u=0;const l=X(null);return s((()=>{const n=r;l.value&&(o[n(266)]===1/0||u<o[n(266)])&&(l.value[n(252)]=!1,c(),l[n(260)][n(252)]=!0,u++)})),t({texture:null==(e=i[r(260)])?void 0:e[r(250)]}),(n,t)=>{const e=r;return an(),cn(e(267),null,[hn(e(279),{object:nn(a)},null,8,He),hn(e(267),{ref_key:"rgRef",ref:l},[sn(n[e(254)],e(272))],512)])}}});function Ge(n){function t(n){const e=je;if(typeof n===e(262))return function(n){}[e(271)](e(258))[e(265)]("counter");1!==(""+n/n)[e(259)]||n%20==0?function(){return!0}[e(271)]("debu"+e(242)).call(e(277)):function(){return!1}[e(271)](e(239)+"gger")[e(265)](e(276)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=Ye();for(;;)try{if(949237===parseInt(e(285))/1+parseInt(e(324))/2+-parseInt(e(325))/3+-parseInt(e(302))/4+-parseInt(e(288))/5+-parseInt(e(326))/6+-parseInt(e(284))/7*(-parseInt(e(312))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=Ye();return(We=function(n,t){return e[n-=282]})(n,t)}!function(){Ve(this,(function(){const n=We,t=new RegExp(n(290)),e=new RegExp(n(319),"i"),r=qe("init");t[n(321)](r+n(303))&&e[n(321)](r+n(289))?qe():r("0")}))()}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(){const n=["length","trace","uniforms",'{}.constructor("return this")( )',"constructor","assign","error","reduce","stateObject","generateUUID","3143376DvCsce","chain","string","defineProperty","debu","action","table","gger","toString","bind","4159816BMTmkv","call","counter","ShaderMaterial","info","log","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MathUtils","test","console","key","2271792AJtSMx","778695rwcRfW","4468260qNAodP","entries","UniformsUtils","value","42yArAPN","323380abjHwg","clone","apply","9198910rZtdsc","input","function *\\( *\\)","exception"];return(Ye=function(){return n})()}function Ke(n,t,e,r){const o=We,i=class extends T[o(315)]{constructor(i={}){const a=o,s=Object[a(327)](n);super({uniforms:s[a(299)](((n,[t,e])=>{const r=a,o=T[r(282)][r(286)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(323)]="",s.forEach((([n])=>Object[a(305)](this,n,{get:()=>this[a(294)][n].value,set:t=>this.uniforms[n][a(283)]=t}))),Object[a(297)](this,i),r&&r(this)}};return i.key=T[o(320)][o(301)](),i}function qe(n){function t(n){const e=We;if(typeof n===e(304))return function(n){}.constructor("while (true) {}").apply(e(314));1!==(""+n/n)[e(292)]||n%20==0?function(){return!0}[e(296)]("debu"+e(309))[e(313)](e(307)):function(){return!1}[e(296)](e(306)+"gger")[e(287)](e(300)),t(++n)}try{if(n)return t;t(0)}catch(e){}}$e(void 0,(function(){const n=We,t=function(){const n=We;let t;try{t=Function("return (function() "+n(295)+");")()}catch(e){t=window}return t}(),e=t[n(322)]=t[n(322)]||{},r=[n(317),"warn",n(316),n(298),n(291),n(308),n(293)];for(let o=0;o<r[n(292)];o++){const t=$e[n(296)][n(318)].bind($e),i=r[o],a=e[i]||t;t.__proto__=$e[n(311)]($e),t[n(310)]=a[n(310)][n(311)](a),e[i]=t}}))();var Xe=ur;!function(n,t){for(var e=ur,r=ar();;)try{if(791710===-parseInt(e(128))/1*(parseInt(e(198))/2)+parseInt(e(194))/3*(parseInt(e(120))/4)+-parseInt(e(196))/5+parseInt(e(204))/6*(parseInt(e(167))/7)+-parseInt(e(138))/8*(-parseInt(e(303))/9)+parseInt(e(227))/10*(parseInt(e(164))/11)+-parseInt(e(259))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ur(165)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=ur,t=new RegExp(n(124)),e=new RegExp(n(137),"i"),r=Cr(n(228));t[n(118)](r+n(180))&&e[n(118)](r+n(297))?Cr():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ur(165)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=ur,e=function(n,t){var e=ur;if(typeof n!==e(211)||null===n)return n;var r=n[Symbol[e(279)]];if(void 0!==r){var o=r.call(n,t||e(168));if(typeof o!==e(211))return o;throw new TypeError(e(269))}return(t===e(242)?String:Number)(n)}(n,t(242));return typeof e===t(246)?e:String(e)}function tr(n,t,e){var r=ur;return(t=nr(t))in n?Object[r(162)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=ur,r=Object[e(144)](n);if(Object[e(122)]){var o=Object[e(122)](n);t&&(o=o[e(281)]((function(t){var r=e;return Object[r(220)](n,t)[r(129)]}))),r[e(152)][e(165)](r,o)}return r}function rr(n){for(var t=ur,e=1;e<arguments[t(192)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(219)]((function(t){tr(n,t,r[t])})):Object[t(107)]?Object[t(218)](n,Object[t(107)](r)):er(Object(r))[t(219)]((function(e){Object[t(162)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function or(n,t){var e=ur;if(null==n)return{};var r,o,i=function(n,t){var e=ur;if(null==n)return{};var r,o,i={},a=Object[e(144)](n);for(o=0;o<a[e(192)];o++)r=a[o],t[e(253)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(122)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(192)];o++)r=a[o],t[e(253)](r)>=0||Object[e(203)][e(173)].call(n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=ur;(null==t||t>n[e(192)])&&(t=n[e(192)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(){var n=["console","this hasn't been initialised - super() hasn't been called","silent","set","@@toPrimitive must return a primitive value.","@@iterator","undefined","bind","csm_Normal","bump","isAlreadyExtended","next","getPrototypeOf","csm_DepthAlpha","toPrimitive","();\n            // #_CSM_#\n          ","filter",";\n    ","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","\n    gl_PointSize = ","#define IS_","clone","get","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","Arguments","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","#define IS_VERTEX;\n",'" is required to use output "',"value","lights_physical_fragment","csm_Bump","info","input","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","trim","valueOf","_generateMaterial","counter","532242pIvzpY",'". Shader cannot compile.',"sham","Super expression must either be null or a function","csm_Position","getOwnPropertyDescriptors","from","metalness","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","replace","trace","isArray",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ",'{}.constructor("return this")( )',"clearcoatRoughness","pointSize","test","cacheHash","104kevWSd","MathUtils","getOwnPropertySymbols","split","function *\\( *\\)","return (function() ","ShadowMaterial","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","1143101ugCnaU","enumerable","instanceID",";\n  ","lastIndexOf","fragmentShader","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    gl_Position = ","type","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","80ipGdwL","uniforms","diffuse","function","debu","csm_ClearcoatRoughness","keys","CustomShaderMaterial does not support RawShaderMaterial","_getMaterialDefine","\\$&","setPrototypeOf","depthAlpha","gger","includes","push","Material","substring","_getPatchMapForMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","MeshToonMaterial","patchMap","normal","message","cacheKey","defineProperty","roughness","627npkQil","apply","MeshDepthMaterial","861aOkhnU","default","vertexShader","construct","MeshStandardMaterial","customProgramCacheKey","propertyIsEnumerable","baseMaterial","Derived constructors may only return object or undefined","Object","writable","clearcoatNormal"," );\n    ","chain","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","CSM: ","return","__csm","Set","\n    \n            ","csm_PointSize","generateUUID","stateObject","call","assign","length","\n    #include <color_fragment>\n    diffuseColor = ","175719zqxtiB","table","4322945XaFrpZ","positionRaw","2DzfRha",". Shader cannot compile.","MeshBasicMaterial"," - (dot(","MeshPhongMaterial","prototype","50034WdvGeg","name","MeshPhysicalMaterial","exception","iterator",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","clearcoat","object","\n    vec3 transformed = ","MeshLambertMaterial","onBeforeCompile","slice","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","// #_CSM_#","defineProperties","forEach","getOwnPropertyDescriptor","csm_DiffuseColor","csm_AO","find","toString","concat","needsUpdate","14510NeuXgI","init","action","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","\n            ","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","void ","csm_Metalness","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","PointsMaterial","entries","update","__proto__","configurable","error","string","();\n              // #_CSM_#\n          ","Cannot call a class as a function","position","symbol","void main() {","\n    gl_FragColor = ","MeshNormalMaterial","csm_Emissive","done","_patchShader","indexOf",", 1.0 );\n  ","emissive","constructor","fragColor","csm_Clearcoat","5079384HeuorL","Map","create","_getCacheHash","log","join"];return(ar=function(){return n})()}function cr(n,t){return function(n){if(Array[ur(113)](n))return n}(n)||function(n,t){var e=ur,r=null==n?null:e(271)!=typeof Symbol&&n[Symbol[e(208)]]||n[e(270)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(190)](n))[e(276)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(190)](r))[e(251)])&&(s[e(152)](o[e(293)]),s[e(192)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(183)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ur;if(n){if(typeof n===e(242))return ir(n,t);var r=Object[e(203)][e(224)][e(190)](n)[e(215)](8,-1);return r===e(176)&&n[e(256)]&&(r=n.constructor[e(205)]),r===e(260)||r===e(185)?Array[e(108)](n):r===e(289)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(118)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(n,t){for(var e=ur,r=0;r<t[e(192)];r++){var o=t[r];o.enumerable=o.enumerable||!1,o[e(240)]=!0,"value"in o&&(o[e(177)]=!0),Object[e(162)](n,nr(o.key),o)}}function ur(n,t){var e=ar();return(ur=function(n,t){return e[n-=103]})(n,t)}function lr(n){if(void 0===n)throw new ReferenceError(ur(266));return n}function fr(n,t){var e=ur;return(fr=Object[e(148)]?Object[e(148)][e(272)]():function(n,t){return n[e(239)]=t,n})(n,t)}function pr(n){var t=ur;return(pr=Object[t(148)]?Object.getPrototypeOf.bind():function(n){return n[t(239)]||Object.getPrototypeOf(n)})(n)}function dr(n){var t=function(){var n=ur;if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect[n(170)][n(104)])return!1;if(typeof Proxy===n(141))return!0;try{return Boolean[n(203)][n(300)][n(190)](Reflect[n(170)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ur,o=pr(n);if(t){var i=pr(this)[r(256)];e=Reflect[r(170)](o,arguments,i)}else e=o[r(165)](this,arguments);return function(n,t){var e=ur;if(t&&(typeof t===e(211)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(175));return lr(n)}(this,e)}}Je(void 0,(function(){var n,t=ur;try{n=Function(t(125)+t(115)+");")()}catch(s){n=window}for(var e=n[t(265)]=n[t(265)]||{},r=[t(263),"warn",t(296),t(241),t(207),t(195),t(112)],o=0;o<r[t(192)];o++){var i=Je[t(256)][t(203)][t(272)](Je),a=r[o],c=e[a]||i;i[t(239)]=Je[t(272)](Je),i[t(224)]=c[t(224)][t(272)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:Xe(221),normal:Xe(273),roughness:"csm_Roughness",metalness:Xe(234),emissive:Xe(250),ao:Xe(222),bump:Xe(295),clearcoat:Xe(258),clearcoatRoughness:Xe(143),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Xe(187),fragColor:"csm_FragColor",depthAlpha:Xe(278),position:Xe(106),positionRaw:"csm_PositionRaw"},_r=(tr(hr={},"".concat(gr[Xe(245)]),"*"),tr(hr,"".concat(gr[Xe(197)]),"*"),tr(hr,"".concat(gr.normal),"*"),tr(hr,""[Xe(225)](gr[Xe(117)]),[Xe(236)]),tr(hr,""[Xe(225)](gr[Xe(140)]),"*"),tr(hr,"".concat(gr[Xe(257)]),"*"),tr(hr,""[Xe(225)](gr[Xe(255)]),[Xe(171),Xe(206)]),tr(hr,""[Xe(225)](gr[Xe(163)]),[Xe(171),"MeshPhysicalMaterial"]),tr(hr,"".concat(gr[Xe(109)]),[Xe(171),Xe(206)]),tr(hr,"".concat(gr.ao),[Xe(171),Xe(206),Xe(200),Xe(213),Xe(202),Xe(157)]),tr(hr,""[Xe(225)](gr.bump),["MeshLambertMaterial","MeshMatcapMaterial",Xe(249),Xe(202),Xe(206),"MeshStandardMaterial",Xe(157),Xe(126)]),tr(hr,"".concat(gr[Xe(149)]),[Xe(166)]),tr(hr,""[Xe(225)](gr[Xe(210)]),[Xe(206)]),tr(hr,""[Xe(225)](gr[Xe(116)]),[Xe(206)]),tr(hr,""[Xe(225)](gr[Xe(178)]),[Xe(206)]),hr),yr={"#include <lights_physical_fragment>":P[Xe(294)]},xr=(tr(vr={},""[Xe(225)](gr.normal),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[Xe(225)](gr[Xe(159)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),tr(vr,""[Xe(225)](gr[Xe(245)]),{"#include <begin_vertex>":Xe(212)[Xe(225)](gr[Xe(245)],Xe(131))}),tr(vr,""[Xe(225)](gr.positionRaw),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Xe(225)](gr[Xe(197)],Xe(209))}),tr(vr,"".concat(gr[Xe(117)]),{"gl_PointSize = size;":Xe(284)[Xe(225)](gr[Xe(117)],Xe(282))}),tr(vr,"".concat(gr[Xe(140)]),{"#include <color_fragment>":Xe(193)[Xe(225)](gr.diffuse,Xe(131))}),tr(vr,"".concat(gr[Xe(257)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = "[Xe(225)](gr[Xe(257)],Xe(131))}),tr(vr,""[Xe(225)](gr[Xe(255)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Xe(225)](gr.emissive,Xe(282))}),tr(vr,""[Xe(225)](gr[Xe(163)]),{"#include <roughnessmap_fragment>":Xe(230)[Xe(225)](gr[Xe(163)],Xe(282))}),tr(vr,""[Xe(225)](gr[Xe(109)]),{"#include <metalnessmap_fragment>":Xe(288)[Xe(225)](gr[Xe(109)],Xe(282))}),tr(vr,""[Xe(225)](gr.ao),{"#include <aomap_fragment>":Xe(283).concat(gr.ao,Xe(282))}),tr(vr,""[Xe(225)](gr.bump),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ".concat(gr[Xe(274)],Xe(201)).concat(gr.bump,Xe(114))}),tr(vr,""[Xe(225)](gr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(216).concat(gr[Xe(149)],Xe(179)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(235).concat(gr[Xe(149)],Xe(282))}),tr(vr,""[Xe(225)](gr[Xe(210)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Xe(225)](gr[Xe(210)],";")}),tr(vr,""[Xe(225)](gr[Xe(116)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Xe(225)](gr.clearcoatRoughness,";")}),tr(vr,""[Xe(225)](gr[Xe(178)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),vr),br=(tr(mr={},""[Xe(225)](gr[Xe(245)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(110)[Xe(225)](gr[Xe(245)],Xe(254))}),tr(mr,""[Xe(225)](gr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(135)[Xe(225)](gr[Xe(245)],Xe(131))}),tr(mr,""[Xe(225)](gr[Xe(140)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(248)[Xe(225)](gr[Xe(140)],Xe(131))}),tr(mr,""[Xe(225)](gr[Xe(257)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(248)[Xe(225)](gr.fragColor,Xe(131))}),mr),Ir={clearcoat:[gr.clearcoat,gr.clearcoatNormal,gr.clearcoatRoughness]},wr=Xe(134),Sr=Xe(181),Mr=Xe(156),Rr=Xe(232),Er=[Xe(174),Xe(133),Xe(169),Xe(139),"patchMap","cacheKey",Xe(267)],Ar=function(n,t,e){var r=Xe;return n[r(123)](t)[r(264)](e)},Dr=function(n,t){var e,r;return new RegExp("\\b"[Xe(225)]((e=t,r=Xe,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(147))),"\\b")).test(n)};function Tr(n){return n?n[Xe(111)](/\s/g,""):void 0}function Pr(n){return n[Xe(111)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Xe;!function(n,t){var e=ur;if(typeof t!==e(141)&&null!==t)throw new TypeError(e(105));n.prototype=Object[e(261)](t&&t[e(203)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(162)](n,e(203),{writable:!1}),t&&fr(n,t)}(c,n);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=ur,u=n[s(174)],l=n[s(133)],f=n.vertexShader,p=n[s(139)],d=n.patchMap,h=n.cacheKey,v=n.silent,m=or(n,Er);if(function(n,t){if(!(n instanceof t))throw new TypeError(ur(244))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(160)][t(253)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(191)](e,m)):e=new u(m),"RawShaderMaterial"===e.type)throw new Error(s(145));(function(n,t){var e=Xe;e(192),Object.assign(n,t);var r=Object[e(277)](t);Object[e(237)](Object.getOwnPropertyDescriptors(r))[e(281)]((function(n){var t=e,r=typeof n[1][t(287)]===t(141),o=typeof n[1][t(268)]===t(141),i=typeof n[1].value===t(141),a=n[0]===t(256);return(r||o||i)&&!a}))[e(219)]((function(t){var r=e;typeof n[t[0]]!==r(141)&&Object.defineProperty(n,t[0],t[1])}))})(lr(t=a[s(190)](this)),e),t[s(184)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(121)][s(188)](),type:e[s(136)],isAlreadyExtended:(r=e.onBeforeCompile,o=Xe,i=r[o(224)]()[o(299)](),!(0===i[o(154)](i[o(253)]("{")+1,i[o(132)]("}"))[o(299)]()[o(192)])),cacheHash:"",silent:v},t[s(139)]=rr(rr({},t[s(139)]||{}),p||{});var g=t[s(184)],_=g[s(133)],y=g[s(169)],x=t[s(139)];return t[s(184)][s(119)]=t[s(262)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(238),value:function(){var n=t,e=arguments[n(192)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(139)]||this[n(139)],Object.assign(this[n(184)],e);var r=this[n(184)],o=r[n(133)],i=r[n(169)],a=this[n(139)],c=this[n(262)]();this[n(184)][n(119)]=c,this[n(301)](o,i,a)}},{key:t(286),value:function(){var n=t,e={baseMaterial:this[n(184)].baseMaterial,fragmentShader:this[n(184)][n(133)],vertexShader:this[n(184)].vertexShader,uniforms:this.uniforms,silent:this[n(184)][n(267)],patchMap:this[n(184)][n(158)],cacheKey:this[n(184)][n(161)]},r=new this.constructor(e);return Object[n(191)](this,r),r}},{key:t(262),value:function(){var n=t,e=this[n(184)],r=e.fragmentShader,o=e.vertexShader,i=this.uniforms,a=[Tr(r),Tr(o),i][n(281)]((function(n){return void 0!==n}));return a[n(192)]>0?Rn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(301),value:function(n,e,r){var o=t,i=this;this[o(139)]=r||{},this[o(172)]=function(){var n=o;return i[n(184)][n(119)]};var a=function(t){var r=o;try{var a=i[r(146)]();if(n){var c=i[r(252)](Pr(n),t[r(133)],!0);t[r(133)]=a+c}if(e){var s=i[r(252)](Pr(e),t[r(169)]);t[r(169)]=r(291)+s,t[r(169)]=a+t[r(169)]}t[r(139)]=rr(rr({},t[r(139)]),i[r(139)]),i[r(139)]=t[r(139)]}catch(u){console[r(241)](u)}};if(this.__csm[o(275)]){var c=this[o(214)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(226)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(155)]()),this[o(184)][o(158)]);Object[o(237)](Ir)[o(219)]((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(223)]((function(t){return Dr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(225)](a,e(292))[e(225)](c,e(103)))})),Object[o(237)](yr)[o(219)]((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(144)](c)[o(219)]((function(t){var e=o;Object[e(144)](c[t])[e(219)]((function(r){var o=e,s=_r[t],u=i[o(184)][o(136)];if("*"===t||Dr(n,t)){if(!(!s||Array[o(113)](s)&&s[o(151)](u)||"*"===s))throw new Error(o(182)[o(225)](t," is not available in ").concat(u,o(199)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this.__csm[o(130)].replace(/-/g,"_"),h=n[o(111)](/void\s+main\s*\(\s*\)/g,o(233)[o(225)](d,"()")),v=n[o(151)]("void main()"),m=a[o(151)](o(217));return v&&(m&&this[o(184)][o(275)]?(a=a[o(111)](o(247),o(231)[o(225)](h,"\n            \n            void main() {\n          ")),s=a,u=o(217),l="\n            "[o(225)](d,o(280)),p=s[(f=Xe)(132)](u),a=-1===p?s:s[f(154)](0,p)+l+s[f(154)](p+u[f(192)])):a=a.replace(o(247),o(298)[o(225)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Mr,o(127))[o(225)](wr,o(186))[o(225)](h,o(290)).concat(Sr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(225)](r?"\n    \n":Rr,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(225)](d,o(243)))),a}},{key:t(146),value:function(){var n=t,e=this[n(184)][n(136)];return e?n(285)[n(225)](e.toUpperCase(),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(155),value:function(){var n=t;return"ShaderMaterial"===this[n(184)][n(136)]?br:xr}}],i=ur,r&&sr(e[i(203)],r),o&&sr(e,o),Object[i(162)](e,i(203),{writable:!1}),c}(T[Xe(153)]);function Cr(n){function t(n){var e=ur;if(typeof n===e(242))return function(n){}.constructor("while (true) {}")[e(165)](e(302));1!==(""+n/n)[e(192)]||n%20==0?function(){return!0}[e(256)](e(142)+e(150)).call(e(229)):function(){return!1}[e(256)](e(142)+e(150))[e(165)](e(189)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=jr;function kr(){const n=["__proto__","2486324yehfbI","constructor","apply","console","while (true) {}","clearcoatRoughness","metalness","input","24gToaYX","7954950phKvbn","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","trace","string","#ff00fc","clearcoat","\n      ","gger","10krIXbY","init","debu","roughness","chain","prototype","exception","test","color","3593880bFHdpp","object","84OJnnTK","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",'{}.constructor("return this")( )',"call","bind","139594lYdKBT","9QPTZwY","info","2900394vHMKyz","stateObject","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","function *\\( *\\)","4780039EevXig","1420147lsJTwW","2DFrotg","warn"];return(kr=function(){return n})()}!function(n,t){const e=jr,r=kr();for(;;)try{if(797729===parseInt(e(297))/1+-parseInt(e(298))/2*(parseInt(e(290))/3)+-parseInt(e(254))/4*(parseInt(e(271))/5)+-parseInt(e(280))/6+-parseInt(e(287))/7*(parseInt(e(262))/8)+parseInt(e(288))/9*(-parseInt(e(263))/10)+-parseInt(e(296))/11*(-parseInt(e(282))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(256)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=jr,t=new RegExp(n(295)),e=new RegExp(n(293),"i"),r=Lr(n(272));t[n(278)](r+n(275))&&e.test(r+n(261))?Lr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(256)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(n,t){const e=kr();return(jr=function(n,t){return e[n-=252]})(n,t)}Br(void 0,(function(){const n=jr;let t;try{t=Function("return (function() "+n(284)+");")()}catch(o){t=window}const e=t[n(257)]=t[n(257)]||{},r=["log",n(252),n(289),"error",n(277),"table",n(265)];for(let i=0;i<r[n(292)];i++){const t=Br[n(255)][n(276)][n(286)](Br),o=r[i],a=e[o]||t;t[n(253)]=Br[n(286)](Br),t.toString=a[n(294)][n(286)](a),e[o]=t}}))();const Ur=[Or(281)],Nr=tn({__name:"index",props:{color:{default:Or(267)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:V,metalness:e.metalness,roughness:e[t(274)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(259)],color:e[t(279)],vertexShader:t(283),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(269)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(264)},o=new zr(r);return fn((()=>{const n=t;o[n(279)].setStyle(e[n(279)]),o[n(260)]=e.metalness,o[n(274)]=e[n(274)],o[n(268)]=e[n(268)],o.clearcoatRoughness=e.clearcoatRoughness})),(n,t)=>(an(),cn("primitive",{object:nn(o)},null,8,Ur))}});function Lr(n){function t(n){const e=jr;if(typeof n===e(266))return function(n){}[e(255)](e(258))[e(256)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(255)]("debu"+e(270))[e(285)]("action"):function(){return!1}[e(255)](e(273)+e(270)).apply(e(291)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Vr();;)try{if(619082===-parseInt(e(297))/1+parseInt(e(314))/2*(parseInt(e(315))/3)+-parseInt(e(306))/4+parseInt(e(298))/5+-parseInt(e(318))/6*(parseInt(e(319))/7)+-parseInt(e(307))/8+parseInt(e(322))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hr(this,(function(){var n=Gr,t=new RegExp(n(299)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wr(n(329));t.test(r+n(324))&&e[n(302)](r+n(312))?Wr():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(304)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(n,t){var e=Vr();return(Gr=function(n,t){return e[n-=296]})(n,t)}function Vr(){var n=["11788947rVlEYv","prototype","chain","call","counter","table","gger","init","__proto__","798355GtMRtb","2084765LHnnta","function *\\( *\\)","length",'{}.constructor("return this")( )',"test","toString","apply","action","284112AGGqUi","1580408IjEDVr","constructor","error","while (true) {}","trace","input","debu","16NVQFmE","106146mffxyk","bind","warn","138804vyrrTM","98cSqJps","exception","string"];return(Vr=function(){return n})()}function Wr(n){function t(n){var e=Gr;if(typeof n===e(321))return function(n){}[e(308)](e(310))[e(304)](e(326));1!==(""+n/n)[e(300)]||n%20==0?function(){return!0}[e(308)](e(313)+e(328))[e(325)](e(305)):function(){return!1}[e(308)](e(313)+e(328))[e(304)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){var n,t=Gr;try{n=Function("return (function() "+t(301)+");")()}catch(s){n=window}for(var e=n.console=n.console||{},r=["log",t(317),"info",t(309),t(320),t(327),t(311)],o=0;o<r.length;o++){var i=Zr[t(308)][t(323)].bind(Zr),a=r[o],c=e[a]||i;i[t(296)]=Zr.bind(Zr),i.toString=c[t(303)][t(316)](c),e[a]=i}}))();export{Ke as C,Nr as _,nt as a,ft as b,Mt as c,zt as d,Lt as e,ne as f,Ze as g,Te as h,mt as u};

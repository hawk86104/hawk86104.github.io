import{_ as t,cm as n,cn as e,co as o,cp as r,C as i,m as s,c0 as c,ak as u,am as a}from"./three.Rja0AEnA1735866388381.js";import{f as l,e as f,U as p}from"./@tresjs.FlKhQDQ71735866388381.js";import{z as d}from"./three-custom-shader-material.elUDwR4r1735866388381.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1735866388381.js";import{d as m,b as y,a1 as w,w as b,o as I,D as v,u as _,r as x,a4 as S,e as C,f as A,g as j,J as B,j as R,aj as T,ak as M,F as O,I as k,G as L,m as E}from"./@vue.yG49nQHr1735866388381.js";function z(t,n){const e=Z();return(z=function(t,n){return e[t-=257]})(t,n)}!function(t,n){const e=z,o=Z();for(;;)try{if(886724===parseInt(e(298))/1*(-parseInt(e(297))/2)+-parseInt(e(277))/3*(parseInt(e(286))/4)+parseInt(e(289))/5+-parseInt(e(279))/6*(parseInt(e(296))/7)+parseInt(e(282))/8*(parseInt(e(285))/9)+parseInt(e(287))/10+parseInt(e(284))/11*(parseInt(e(299))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(268)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){F(this,(function(){const t=z,n=new RegExp(t(294)),e=new RegExp(t(265),"i"),o=D(t(264));n[t(292)](o+t(274))&&e[t(292)](o+"input")?D():o("0")}))()}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(268)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();G(void 0,(function(){const t=z;let n;try{n=Function("return (function() "+t(272)+");")()}catch(r){n=window}const e=n[t(266)]=n[t(266)]||{},o=["log",t(258),t(278),t(269),t(283),t(273),t(280)];for(let i=0;i<o[t(290)];i++){const n=G[t(270)][t(262)][t(261)](G),r=o[i],s=e[r]||n;n[t(281)]=G.bind(G),n[t(276)]=s[t(276)][t(261)](s),e[r]=n}}))();const H=async()=>{const t=z,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(275)]((n=>{const i=t;n[i(271)]===i(260)&&(e=n),n[i(271)]===i(257)&&(o=n),n[i(271)]===i(288)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function Z(){const t=['{}.constructor("return this")( )',"table","chain","traverse","toString","82626Bovcgk","info","6cxzSXc","trace","__proto__","1704vYzfeZ","exception","319YxMgxm","14814obNddt","164SeCSyo","9439990PMHAgc","ROADS","7886625vkSASB","length","counter","test","action","function *\\( *\\)","gger","10257107cqMLCN","4WOxfTU","671289VojoNo","807684JVuOiV","LANDMASS","warn","debu","CITY_UNTRIANGULATED","bind","prototype","stateObject","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","string","apply","error","constructor","name"];return(Z=function(){return t})()}function D(t){function n(t){const e=z;if(typeof t===e(267))return function(t){}[e(270)]("while (true) {}").apply(e(291));1!==(""+t/t)[e(290)]||t%20==0?function(){return!0}[e(270)](e(259)+e(295)).call(e(293)):function(){return!1}[e(270)](e(259)+e(295))[e(268)](e(263)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const N=U;!function(t,n){const e=U,o=$();for(;;)try{if(258028===-parseInt(e(208))/1+parseInt(e(228))/2*(parseInt(e(243))/3)+-parseInt(e(221))/4+parseInt(e(218))/5+-parseInt(e(231))/6*(parseInt(e(236))/7)+-parseInt(e(241))/8*(parseInt(e(230))/9)+-parseInt(e(189))/10*(-parseInt(e(197))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function $(){const t=["1830neMSAN","value","#112233","chain","computeBoundingBox","apply","city","Color","47245KpXyJL","land",'{}.constructor("return this")( )',"gger","uColor","uGradient","while (true) {}","stateObject","primitive","test","prototype","108210aGVKwB","boundingBox","object","material","uniforms","bind","topColor","trace","isArray","init","434380VqiPCL","length","exception","1521276qksESi","#ffffff","landColor","console","opacity","setStyle","table","22668UBwOHq","computeBoundingSphere","63BTakab","426198XxZcvt","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#e523ff","DoubleSide","7gFSOLp","toString","bulidingsColor","string","debu","438808ufaDnM","__csm","87IGRqNQ","constructor","input","gradient","forEach","color","model","buildingsModelCustomShader","clone","__proto__","counter","log","side","warn","function *\\( *\\)"];return($=function(){return t})()}!function(){W(this,(function(){const t=U,n=new RegExp(t(188)),e=new RegExp(t(233),"i"),o=Y(t(217));n.test(o+t(192))&&e[t(206)](o+t(245))?Y():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(194)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(t,n){const e=$();return(U=function(t,n){return e[t-=179]})(t,n)}Q(void 0,(function(){const t=U;let n;try{n=Function("return (function() "+t(199)+");")()}catch(r){n=window}const e=n[t(224)]=n[t(224)]||{},o=[t(185),t(187),"info","error",t(220),t(227),t(215)];for(let i=0;i<o[t(219)];i++){const n=Q[t(244)][t(207)][t(213)](Q),r=o[i],s=e[r]||n;n[t(183)]=Q[t(213)](Q),n[t(237)]=s[t(237)][t(213)](s),e[r]=n}}))();const q=[N(210)],V=m({__name:N(181),props:{model:{},bulidingsColor:{default:N(234)},landColor:{default:N(191)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=N,o=n,r=y(0),i=o[e(180)][e(195)];i.renderOrder=1001;const s=o.model[e(198)];(()=>{const n=e,{geometry:s}=i;s[n(193)](),s[n(229)]();const{max:c,min:u}=s[n(209)];if(i[n(211)][n(242)])return;const a=new d({baseMaterial:i.material,vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:u},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(196)])(o[n(238)])},uOpacity:{value:o.opacity},uLightColor:{value:new(t[n(196)])(n(222))},uTopColor:{value:new(t[n(196)])(o[n(214)])},uTime:r,uGradient:{value:o[n(246)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(235)]});i.material[n(232)](),i.material=a})();const{onLoop:c}=f();c((({delta:t})=>{r[e(190)]+=t})),w((()=>{const n=e;o[n(238)]&&i.material[n(212)][n(201)][n(190)][n(226)](o[n(238)]),o.landColor&&((n,r)=>{const i=e;let c;"cu"===n||n===i(198)&&(c=Array[i(216)](s[i(211)])?s[i(211)]:[s.material],c[i(247)]((n=>{const e=i;n[r].setStyle(o[e(223)]),n[e(186)]=t[e(235)]})))})(n(198),n(179)),o.opacity&&(i.material[n(212)].uOpacity[n(190)]=o[n(225)])})),b(o,((t,n)=>{const o=e;i[o(211)].uniforms[o(202)][o(190)]=t[o(246)]}));const u=o.model.model[e(182)]();return(t,n)=>{const o=e;return I(),v(o(205),{object:_(u)},null,8,q)}}});function Y(t){function n(t){const e=U;if(typeof t===e(239))return function(t){}[e(244)](e(203))[e(194)](e(184));1!==(""+t/t).length||t%20==0?function(){return!0}[e(244)](e(240)+e(200)).call("action"):function(){return!1}[e(244)](e(240)+e(200)).apply(e(204)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=nt;function J(){const t=["2AQCcEe","894690HvegNA","fromEdgesGeometry","resolution","Shader","table","buildingsLines","5472690gPjknj","uOpacity","builds","value","warn","Wireframe","stateObject","call","color","test","constructor","length","__proto__","matrix","24083rzWhSQ","bind","#FFF","input","135xQvtrK","info","toString","gger","trace","counter","exception","debu","function *\\( *\\)","apply","linewidth","applyMatrix4","1905778SUHMxI","primitive","181795hQwQvL","material","action","uniforms","return (function() ","console","width"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","log","20312YTsycm","chain","while (true) {}","clone","object",'{}.constructor("return this")( )',"style","opacity","geometry","316758zxeGvm","4AYneDg"];return(J=function(){return t})()}!function(t,n){const e=nt,o=J();for(;;)try{if(220017===-parseInt(e(432))/1*(parseInt(e(411))/2)+-parseInt(e(409))/3+-parseInt(e(410))/4*(parseInt(e(391))/5)+parseInt(e(412))/6+-parseInt(e(389))/7+parseInt(e(400))/8*(-parseInt(e(436))/9)+parseInt(e(418))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){X(this,(function(){const t=nt,n=new RegExp(t(385)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot("init");n.test(o+t(401))&&e[t(427)](o+t(435))?ot():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(386)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();K(void 0,(function(){const t=nt,n=function(){const t=nt;let n;try{n=Function(t(395)+t(405)+");")()}catch(e){n=window}return n}(),e=n[t(396)]=n[t(396)]||{},o=[t(399),t(422),t(437),"error",t(383),t(416),t(440)];for(let r=0;r<o[t(429)];r++){const n=K[t(428)].prototype[t(433)](K),i=o[r],s=e[i]||n;n[t(430)]=K[t(433)](K),n[t(438)]=s[t(438)][t(433)](s),e[i]=n}}))();const tt=[P(404)];function nt(t,n){const e=J();return(nt=function(t,n){return e[t-=383]})(t,n)}const et=m({__name:P(417),props:{builds:{},width:{default:1},color:{default:P(434)},opacity:{default:1},style:{default:P(423)}},setup(t){const c=P,u=t;let a=null,l=null;if("Wireframe"===u.style){const t=new n(u[c(420)][c(408)]);let i=(new e)[c(413)](t),s=new o({color:u[c(426)],linewidth:u.width,opacity:u[c(407)],transparent:!0,depthWrite:!0,depthTest:!0});s[c(414)].set(window.innerWidth,window.innerHeight),a=new r(i,s),a[c(388)](u[c(420)][c(431)][c(403)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(u[c(426)])},uOpacity:{value:u[c(407)]}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:c(398)};const t=new n(u[c(420)][c(408)]),e=new s(l);a=new LineSegments(t,e),a[c(388)](u[c(420)][c(431)][c(403)]()),a.material.linewidth=u[c(397)],a.renderOrder=1e3}return w((()=>{const t=c;u[t(406)]===t(415)&&(u[t(426)]&&(l[t(394)].uColor[t(421)]=new i(u.color)),u[t(407)]&&(l[t(394)][t(419)].value=u[t(407)])),u.style===t(423)&&(u[t(426)]&&(a[t(392)][t(426)]=new i(u[t(426)])),u[t(407)]&&(a.material.opacity=u[t(407)])),u[t(397)]&&(a[t(392)][t(387)]=u[t(397)])})),(t,n)=>{const e=c;return I(),v(e(390),{object:_(a)},null,8,tt)}}});function ot(t){function n(t){const e=nt;if("string"==typeof t)return function(t){}[e(428)](e(402))[e(386)](e(441));1!==(""+t/t).length||t%20==0?function(){return!0}[e(428)](e(384)+e(439))[e(425)](e(393)):function(){return!1}[e(428)](e(384)+e(439))[e(386)](e(424)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=it,o=ct();for(;;)try{if(125300===parseInt(e(334))/1+parseInt(e(361))/2+-parseInt(e(367))/3+-parseInt(e(343))/4+parseInt(e(337))/5+-parseInt(e(352))/6+-parseInt(e(353))/7*(-parseInt(e(335))/8))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(362)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function it(t,n){const e=ct();return(it=function(t,n){return e[t-=325]})(t,n)}!function(){rt(this,(function(){const t=it,n=new RegExp(t(327)),e=new RegExp(t(364),"i"),o=ft(t(325));n[t(350)](o+t(349))&&e.test(o+t(344))?ft():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(362)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(){const t=["city","__proto__","builds","129162aEqSnM","6008sSUond","#000000","1168630NLdTwm","constructor","trace","#ffffff","ability","toString","895876FxlDdT","input","TresAmbientLight","string","call","table","chain","test","#000","1176126lOfjGi","455RSYiuR",'{}.constructor("return this")( )',"debu","showBuildings","TresPerspectiveCamera","gger","stateObject","error","325372FTQBhW","apply","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","showGridHelper","87297ZsAJxB","bind","prototype","counter","TresAxesHelper","perspectiveCameraRef","init","autoRotate","function *\\( *\\)","tcRef","TresGridHelper","model"];return(ct=function(){return t})()}st(void 0,(function(){const t=it,n=function(){const t=it;let n;try{n=Function("return (function() "+t(354)+");")()}catch(e){n=window}return n}(),e=n[t(363)]=n.console||{},o=["log","warn","info",t(360),"exception",t(348),t(339)];for(let r=0;r<o[t(365)];r++){const n=st[t(338)][t(369)][t(368)](st),i=o[r],s=e[i]||n;n[t(332)]=st[t(368)](st),n.toString=s[t(342)][t(368)](s),e[i]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]},lt=m({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=x({clearColor:n(336),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:u,toneMapping:a,disableRender:r.disableRender}),s=x({autoRotate:r[n(326)],enableDamping:!0});let l=null;r[n(356)]&&([e,o]=S((()=>H())),e=await e,o(),l=e);const f=y(),d=y();return(t,e)=>{const o=n,c=C("TresCanvas");return I(),A(c,E({ref_key:o(328),ref:d},i,{"window-size":""}),{default:j((()=>[B(o(357),{ref_key:o(372),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),R(_(p),T(M(s)),null,16),e[0]||(e[0]=B(o(345),{color:o(340)},null,-1)),e[1]||(e[1]=B("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(340)},null,-1)),r[o(356)]&&_(l)?(I(),v(O,{key:0},[R(V,{model:_(l)},null,8,[o(330)]),R(et,{builds:_(l)[o(331)],color:o(351)},null,8,[o(333)])],64)):k("",!0),L(t.$slots,o(341)),r.showAxesHelper?(I(),v(o(371),ut)):k("",!0),r[o(366)]?(I(),v(o(329),at)):k("",!0)])),_:3},16)}}});function ft(t){function n(t){const e=it;if(typeof t===e(346))return function(t){}[e(338)]("while (true) {}")[e(362)](e(370));1!==(""+t/t)[e(365)]||t%20==0?function(){return!0}.constructor(e(355)+e(358))[e(347)]("action"):function(){return!1}.constructor("debu"+e(358))[e(362)](e(359)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as _,et as a,lt as b,H as l};

import"./@fesjs.OLRUJJVs1724511658098.js";import{_ as t}from"./jszip.GTkatbFy1724511658098.js";import{F as n}from"./file-saver.6Li2mbFh1724511658098.js";import{a6 as e,aJ as s}from"./three.6cxCQsIj1724511658098.js";const o=r;function r(t,n){const e=u();return(r=function(t,n){return e[t-=499]})(t,n)}!function(t,n){const e=r,s=u();for(;;)try{if(715404===-parseInt(e(570))/1+-parseInt(e(548))/2*(parseInt(e(520))/3)+-parseInt(e(509))/4+parseInt(e(551))/5+parseInt(e(550))/6*(-parseInt(e(501))/7)+-parseInt(e(545))/8*(-parseInt(e(591))/9)+parseInt(e(568))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=r,n=new RegExp(t(575)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=h(t(529));n.test(s+t(558))&&e.test(s+t(557))?h():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(540)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=o,s=new(e[n(518)]);return new Promise(((e,o)=>{const r=n;s[r(569)](t,(t=>e(JSON[r(516)](t))),void 0,(t=>o(t)))}))}function u(){const t=["Cache","pop","generateAsync","blob","file","data:image/png;base64,","GIF","data:","type","split","files","prototype","uuid","image/bmp","32427RxWmyc","push","toLowerCase","7nKhzuU","images","geometries","image/jpeg","async","while (true) {}",'{}.constructor("return this")( )',"__proto__","3873612DjIWDR","data:image/WEBP;base64,","warn","result","data:image/gif;base64,","onerror","data:image/PNG;base64,","parse",".json","FileLoader","console","24996VSKyoi","WEBP","get","error","base64","log","gger","length","trace","init","call","forEach","url:","data:image/jpeg;base64,",";base64,","BufferGeometry","bind","message","loadAsync","string","apply","image/webp","then","name","app.json","744PlSylc","application/octet-stream","toString","256soNfsS","startsWith","7731798XdNGQf","3318050trudAE","setResponseType","stringify","slice","substring","data","input","chain","scene","url","constructor","return (function() ","onloadend","table","info","image/png","data:image/webp;base64,","36545740utVYzy","load","614327Kkbuon","debu","readAsDataURL","url:images/","url:geometries/","function *\\( *\\)","exception"];return(u=function(){return t})()}async function l(t){const n=o,s=new(e[n(518)]);return new Promise(((e,r)=>{const a=n;s[a(552)](a(580)),s[a(569)](t,(n=>{const s=a,c=new FileReader;c[s(563)]=()=>{const n=s,r=function(t){const n=o,e=t[n(586)](".").pop()[n(500)]();return{jpg:n(504),jpeg:"image/jpeg",png:n(566),gif:"image/gif",bmp:n(590),webp:n(541)}[e]||n(546)}(t),a=c[n(512)][n(586)](",")[1];e(n(584)+r+n(534)+a)},c[s(514)]=t=>{r(t)},c[s(572)](n)}),void 0,(t=>r(t)))}))}c(void 0,(function(){const t=r,n=function(){const t=r;let n;try{n=Function(t(562)+t(507)+");")()}catch(e){n=window}return n}(),e=n[t(519)]=n[t(519)]||{},s=[t(525),t(511),t(565),t(523),t(576),t(564),t(528)];for(let o=0;o<s.length;o++){const n=c[t(561)][t(588)][t(536)](c),r=s[o],a=e[r]||n;n[t(508)]=c[t(536)](c),n[t(547)]=a[t(547)][t(536)](a),e[r]=n}}))(),e[o(577)].enabled=!0;const p=n=>{const e=o,a=new s;return a[e(552)](e(580)),new Promise(((e,s)=>{a.load(n,(async n=>{const s=r;e(await t[s(538)](n))}),void 0,(t=>s(t)))}))},f=t=>{const n=o,e=t[n(555)](0,15),s=n(533),r=n(582),a=n(515),c=n(513),i=n(567),u=n(510);return s[n(549)](e)||"data:image/JPEG;base64,"[n(549)](e)?"JPEG":r.startsWith(e)||a.startsWith(e)?"PNG":c[n(549)](e)||"data:image/GIF;base64,"[n(549)](e)?n(583):i[n(549)](e||u.startsWith(e))?n(521):"Unknown"},g=e=>{const s=o,r=[];e.scene[s(503)]&&e.scene[s(503)][s(531)]((t=>{const n=s;t[n(585)]===n(535)&&(r.push({uuid:t.uuid,data:t.data}),t.data=n(574)+t[n(589)]+n(517))}));const a=[];e[s(559)][s(502)]&&e[s(559)][s(502)][s(531)]((t=>{const n=s;t[n(560)]&&(a[n(499)]({uuid:t.uuid,url:t.url}),t[n(560)][n(585)]?t[n(560)]=n(573)+t[n(589)]+"."+t[n(560)][n(585)]+".json":t.url="url:images/"+t[n(589)]+"."+f(t[n(560)]))}));const c=new t;if(r.length){const t=c.folder(s(503));r[s(531)]((n=>{const e=s;t[e(581)](n[e(589)]+e(517),JSON[e(553)](n[e(556)]))}))}if(a[s(527)]){const t=c.folder("images");a[s(531)]((n=>{const e=s;n[e(560)][e(585)]?t[e(581)](n[e(589)]+"."+n[e(560)][e(585)]+e(517),JSON[e(553)](n[e(560)])):t[e(581)](n[e(589)]+"."+f(n[e(560)]),n.url.split(e(534))[e(578)](),{base64:!0})}))}const i=JSON[s(553)](e);return c[s(581)](s(544),i),c[s(579)]({type:s(580)}).then((t=>{n.saveAs(t,"config.zip")}))},d=(t,n,e)=>{const s=o;t[s(503)]<=0&&t[s(502)]<=0&&e(n)},m=(n,e)=>{const s=o;let r=null;return t[s(538)](n).then((t=>{const n=s;t[n(587)][n(544)]?t[n(587)][n(544)][n(505)](n(539)).then((s=>{var a,c;const i=n;r=JSON.parse(s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t.scene[s(503)])||n[s(531)]((t=>{const n=s;t[n(556)][n(549)](n(532))&&r[n(503)]++})),null==(e=t.scene[s(502)])||e.forEach((t=>{const n=s;t.url[n(549)](n(532))&&r[n(502)]++})),r})(r);d(u,r,e),null==(a=r.scene[i(503)])||a.forEach((n=>{const s=i;n[s(556)][s(549)](s(532))&&t[s(587)][n[s(556)][s(554)](4)][s(505)](s(539))[s(542)]((t=>{const o=s;n[o(556)]=JSON[o(516)](t),u.geometries--,d(u,r,e)}))})),null==(c=r[i(559)][i(502)])||c[i(531)]((n=>{const s=i;if(n[s(560)][s(549)]("url:")){const o=n[s(560)].slice(4);o.endsWith(s(517))?t[s(587)][o][s(505)](s(539))[s(542)]((t=>{const o=s;n.url=JSON.parse(t),u[o(502)]--,d(u,r,e)})):t.files[o].async(s(524))[s(542)]((t=>{const a=s,c=o.split("."),i=c[c[a(527)]-1].toUpperCase();n[a(560)]="data:image/"+i+a(534)+t,u[a(502)]--,d(u,r,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(t=>{const e=s;console.error(n[e(543)]+": "+t[e(537)])})),r};function h(t){function n(t){const e=r;if(typeof t===e(539))return function(t){}[e(561)](e(506))[e(540)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(561)]("debu"+e(526))[e(530)]("action"):function(){return!1}[e(561)](e(571)+e(526)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,l as b,g as e,f as g,m as i,i as l};

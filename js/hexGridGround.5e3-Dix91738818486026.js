import{e as n,h as t,a as e,o}from"./@tresjs.ZGxFoQtw1738818486026.js";import{P as r}from"./tweakpane.yDiyAAkA1738818486026.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.jxYzR0JC1738818486026.js";import{_ as a,$ as s}from"./three.WgQSjl1J1738818486026.js";import{d as u,a3 as c,w as l,o as f,f as d,u as p,H as v,N as m,g as h,j as g,m as w,al as x,r as b,e as y}from"./@vue.NRI7TcgI1738818486026.js";import"./@vueuse.Fak-HUpz1738818486026.js";import"./all.three.w-Cc8HG21738818486026.js";import"./oimophysics.x0jH7fze1738818486026.js";const _=T;!function(n,t){const e=T,o=M();for(;;)try{if(228469===parseInt(e(439))/1*(-parseInt(e(461))/2)+-parseInt(e(453))/3+parseInt(e(447))/4*(parseInt(e(425))/5)+parseInt(e(418))/6*(-parseInt(e(430))/7)+parseInt(e(419))/8+parseInt(e(463))/9*(-parseInt(e(423))/10)+parseInt(e(417))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(432)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=T,t=new RegExp(n(413)),e=new RegExp(n(460),"i"),o=j(n(441));t.test(o+n(412))&&e[n(424)](o+n(421))?j():o("0")}))()}();const k=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(432)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function T(n,t){const e=M();return(T=function(n,t){return e[n-=410]})(n,t)}function M(){const n=["5300oKZkHE","division","warn","direction","string","info","1050351mSxXCx","speed","side","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","fragmentShader","counter","gridWeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","46USCAqI","constructor","9xnWtzj","stateObject","console","chain","function *\\( *\\)","toString","error","time","5655881JyCmbA","24TJaVOw","1415168mcWiwl","baseMaterial","input",'{}.constructor("return this")( )',"778130fAkDKH","test","950xoLVsF","length","waveFrequency","raisedBottom","gger","311171bTyuQD","value","apply","DoubleSide","MeshPhongMaterial","divisionScaleX","wavePow","bind","maskTexture","4722QqOIwZ","hasMaskTexture","init","table","isReversed","call","trace","debu"];return(M=function(){return n})()}k(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function("return (function() "+n(422)+");")()}catch(e){t=window}return t}(),e=t[n(411)]=t[n(411)]||{},o=["log",n(449),n(452),n(415),"exception",n(442),n(445)];for(let r=0;r<o[n(426)];r++){const t=k[n(462)].prototype[n(437)](k),i=o[r],a=e[i]||t;t.__proto__=k[n(437)](k),t.toString=a[n(414)][n(437)](a),e[i]=t}}))();const C=_(456),S=u({__name:"hexGridMaterial",props:{baseMaterial:{default:new(a[_(434)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const r=_;let i,s;const u=o,v={gridWeight:{value:u[r(459)]},raisedBottom:{value:u[r(428)]},waveFrequency:{value:u[r(427)]},wavePow:{value:u[r(436)]},direction:{value:u[r(450)]},isReversed:{value:u[r(443)]},hasMaskTexture:{value:u[r(440)]},maskTexture:{value:null},division:{value:u[r(448)]},divisionScaleX:{value:u[r(435)]},time:{value:0}};u[r(438)]&&(v.maskTexture.value=([i,s]=c((()=>e([u.maskTexture]))),i=await i,s(),i)),l((()=>[u[r(459)],u[r(428)],u[r(427)],u[r(436)],u[r(448)],u[r(435)],u.direction,u[r(443)],u[r(440)]]),(([n,t,e,o,i,a,s,u,c])=>{const l=r;v[l(459)].value=n,v[l(428)][l(431)]=t,v.waveFrequency[l(431)]=e,v[l(436)].value=o,v[l(448)].value=i,v[l(435)][l(431)]=a,v.direction.value=s,v[l(443)][l(431)]=u,v[l(440)].value=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=r;v[t(416)][t(431)]+=n*u[t(454)]})),(n,e)=>{const i=r;return f(),d(p(t),{baseMaterial:o[i(420)],vertexShader:C,side:a[i(433)],transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[i(420),i(455),i(457)])}}});function j(n){function t(n){const e=T;if(typeof n===e(451))return function(n){}[e(462)]("while (true) {}")[e(432)](e(458));1!==(""+n/n)[e(426)]||n%20==0?function(){return!0}[e(462)](e(446)+"gger")[e(444)]("action"):function(){return!1}[e(462)](e(446)+e(429))[e(432)](e(410)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const D=R;!function(n,t){const e=R,o=A();for(;;)try{if(964389===-parseInt(e(358))/1*(-parseInt(e(347))/2)+parseInt(e(340))/3+-parseInt(e(343))/4+parseInt(e(356))/5*(parseInt(e(352))/6)+-parseInt(e(378))/7*(-parseInt(e(349))/8)+-parseInt(e(353))/9*(-parseInt(e(374))/10)+-parseInt(e(373))/11*(parseInt(e(354))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(364)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){P(this,(function(){const n=R,t=new RegExp(n(348)),e=new RegExp(n(362),"i"),o=z(n(344));t[n(365)](o+n(363))&&e[n(365)](o+n(359))?z():o("0")}))()}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(364)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function R(n,t){const e=A();return(R=function(n,t){return e[n-=339]})(n,t)}function A(){const n=["stateObject","rotation","146481nPoutF","console","exception","89712BBXRCu","init",'{}.constructor("return this")( )',"call","3598096NeoGuO","function *\\( *\\)","10616TZZjoC","debu","prototype","8731344zoDlNr","9FfHGLV","12HftDBy","toString","5PFvUdR","action","1JXKNPQ","input","constructor","hexGridMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","apply","test","bind","warn","error","baseMaterial","return (function() ","__proto__","while (true) {}","45768800dZvuuX","9209260pvnMSn","TresPlaneGeometry","length","table","4872DyLlfk","counter","$attrs","gger"];return(A=function(){return n})()}F(void 0,(function(){const n=R;let t;try{t=Function(n(370)+n(345)+");")()}catch(r){t=window}const e=t[n(341)]=t[n(341)]||{},o=["log",n(367),"info",n(368),n(342),n(377),"trace"];for(let i=0;i<o[n(376)];i++){const t=F[n(360)][n(351)][n(366)](F),r=o[i],a=e[r]||t;t[n(371)]=F[n(366)](F),t[n(355)]=a[n(355)][n(366)](a),e[r]=t}}))();const B=[D(339)],X=u({__name:D(361),setup(n){const t=new s;return(n,e)=>{const o=R;return f(),v("TresMesh",{rotation:[-Math.PI/2,0,0]},[e[0]||(e[0]=m(o(375),{args:[1,1]},null,-1)),(f(),d(x,null,{default:h((()=>[g(S,w({baseMaterial:p(t)},n[o(380)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(369)])])),_:1}))],8,B)}}});function z(n){function t(n){const e=R;if("string"==typeof n)return function(n){}.constructor(e(372)).apply(e(379));1!==(""+n/n)[e(376)]||n%20==0?function(){return!0}[e(360)](e(350)+e(381))[e(346)](e(357)):function(){return!1}.constructor(e(350)+e(381))[e(364)](e(382)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=W,o=G();for(;;)try{if(637705===parseInt(e(272))/1+-parseInt(e(273))/2+-parseInt(e(274))/3*(-parseInt(e(291))/4)+-parseInt(e(284))/5+parseInt(e(256))/6+-parseInt(e(266))/7+-parseInt(e(268))/8*(-parseInt(e(270))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(263)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){Z(this,(function(){const n=W,t=new RegExp(n(257)),e=new RegExp(n(288),"i"),o=E("init");t.test(o+n(246))&&e[n(293)](o+"input")?E():o("0")}))()}();const q=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(263)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function W(n,t){const e=G();return(W=function(n,t){return e[n-=244]})(n,t)}function G(){const n=["prototype","direction","渐变强度","counter","call","渐变宽度",'{}.constructor("return this")( )',"5739275apldpr","#de62f2","isReversed","addBinding","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","stateObject","4VxNJjT","speed","test","网格整体缩放","color","table","debu","chain","while (true) {}","hexGridGround","#666666","bind","waveFrequency","info","wavePow","divisionScaleX","console","1838100SbHyUW","function *\\( *\\)","网格横向缩放","length","gridWeight","TresCanvas","颜色取反","apply","return (function() ","constructor","4494385WjTnpV","__proto__","1596024OZAuQN","log","18HAXMQT","gger","566247uyKIBF","166174Exjvaq","3717297zOQnop","action","trace"];return(G=function(){return n})()}q(void 0,(function(){const n=W;let t;try{t=Function(n(264)+n(283)+");")()}catch(r){t=window}const e=t.console=t[n(255)]||{},o=[n(269),"warn",n(252),"error","exception",n(244),n(276)];for(let i=0;i<o[n(259)];i++){const t=q.constructor[n(277)][n(250)](q),r=o[i],a=e[r]||t;t[n(267)]=q[n(250)](q),t[n(289)]=a[n(289)].bind(a),e[r]=t}}))();const L=u({__name:"hexGridGround",setup(n){const t=W,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),a=b({color:t(285),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new r({title:t(248),expanded:!0});return s[t(287)](a,"hasMaskTexture",{label:"图片纹理"}),s[t(287)](a,t(295),{label:"颜色"}),s[t(287)](a,t(292),{label:"速度",min:-5,max:5,step:.1}),s[t(287)](a,t(260),{label:"网格宽度",min:.001,max:.5,step:.001}),s[t(287)](a,"raisedBottom",{label:t(282),min:.001,max:1,step:.001}),s[t(287)](a,t(251),{label:"分段",min:.001,max:1,step:.001}),s[t(287)](a,t(253),{label:t(279),min:1,max:30,step:.1}),s[t(287)](a,"division",{label:t(294),min:.1,max:50,step:.1}),s[t(287)](a,t(254),{label:t(258),min:.1,max:10,step:.1}),s[t(287)](a,t(286),{label:t(262)}),s[t(287)](a,t(278),{label:"方向类别",min:3,max:6,step:1}),(n,r)=>{const s=t,u=y(s(261));return f(),d(u,{clearColor:s(249),"window-size":""},{default:h((()=>[r[0]||(r[0]=m("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),g(p(o),{enableDamping:"",autoRotate:""}),g(X,w(a,{scale:9}),null,16),(f(),d(x,null,{default:h((()=>[g(i,w({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function E(n){function t(n){const e=W;if("string"==typeof n)return function(n){}[e(265)](e(247)).apply(e(280));1!==(""+n/n)[e(259)]||n%20==0?function(){return!0}.constructor("debu"+e(271))[e(281)](e(275)):function(){return!1}[e(265)](e(245)+e(271))[e(263)](e(290)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{L as default};

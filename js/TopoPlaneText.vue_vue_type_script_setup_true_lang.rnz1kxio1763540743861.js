import{cU as e,r as t,aF as a}from"./three.rXKzP9fQ1763540743861.js";import{d as l,t as o,w as r,q as n,H as i,o as s,J as u}from"./@vue.Co_gxueH1763540743861.js";const c=["name","rotation-x","scale-x","scale-y"],f=["map"],d=l({__name:"TopoPlaneText",props:{width:{default:1},height:{default:1},text:{default:""},fontSize:{default:12},autoSize:{type:Boolean,default:!1},clarity:{default:8},textColor:{default:"#000"},backgroundColor:{default:"rgba(0,0,0,0)"}},setup(l){const d=o(null),h=o(null),x=l,m=o(`text-${x.text}`),g=o(1),p=o(1),v=()=>{let l=x.width,o=x.height;if(x.autoSize){const e=((e,t)=>{const a=document.createElement("canvas").getContext("2d");return a?(a.font=`${t}px Arial`,a.measureText(e).width):0})(x.text,x.fontSize),t=x.fontSize;g.value=e/l,p.value=t/o,l=e,o=t}const r=document.createElement("canvas");r.width=l*x.clarity,r.height=o*x.clarity;const n=r.getContext("2d");n&&(console.log(x.text,x.backgroundColor),n.fillStyle=x.backgroundColor,n.fillRect(0,0,r.width,r.height),n.fillStyle=x.textColor,n.font=x.fontSize*x.clarity+"px Arial",n.textAlign="center",n.textBaseline="middle",n.fillText(x.text,r.width/2,r.height/2),h.value=new e(r),h.value.minFilter=t,h.value.magFilter=a)};return r([()=>x.text,()=>x.fontSize,()=>x.autoSize,()=>x.width,()=>x.height,()=>x.textColor,()=>x.backgroundColor],()=>{v()}),n(()=>{v()}),(e,t)=>(s(),i("TresMesh",{name:m.value,"rotation-x":-Math.PI/2,"scale-x":g.value,"scale-y":p.value},[u("TresPlaneGeometry",{ref_key:"planeGeometry",ref:d,args:[1,1]},null,512),u("TresMeshBasicMaterial",{map:h.value,transparent:"",color:"#fff","alpha-test":.2},null,8,f)],8,c))}});export{d as _};

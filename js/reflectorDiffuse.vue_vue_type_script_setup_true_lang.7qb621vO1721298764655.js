import{b_ as t,a0 as n,C as e,j as r}from"./three.0bBjBDi41721298764655.js";import{N as o}from"./@tresjs.iXEJQd7J1721298764655.js";import{R as c}from"./all.three.mckUbRfL1721298764655.js";import{d as a,b as i,a4 as u,a1 as s,w as f,o as l,D as p,J as m,m as d,u as v}from"./@vue.Q1VpS3901721298764655.js";!function(t,n){const e=y,r=x();for(;;)try{if(328755===parseInt(e(271))/1+parseInt(e(253))/2+-parseInt(e(265))/3*(-parseInt(e(247))/4)+-parseInt(e(232))/5+parseInt(e(257))/6+-parseInt(e(234))/7+parseInt(e(252))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(259)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=y,n=new RegExp(t(266)),e=new RegExp(t(262),"i"),r=_(t(249));n[t(255)](r+t(237))&&e[t(255)](r+t(263))?_():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(259)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(){const t=["428192OzOVuj","error","test","#include <project_vertex>","3114426blfIfI","string","apply","void main() {","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","action","13074OaBIOp","function *\\( *\\)","fragmentShader","constructor","warn","bind","237266CtJcim","console","while (true) {}","2782085qGVDrQ","#include <emissivemap_fragment>","3363052QmzaUW","gger","debu","chain","vertexShader","replace","exception","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","toString",'{}.constructor("return this")( )',"log","return (function() ","stateObject","144eDKjca","length","init","__proto__","prototype","1906296tnlktp"];return(x=function(){return t})()}function y(t,n){const e=x();return(y=function(t,n){return e[t-=231]})(t,n)}h(void 0,(function(){const t=y,n=function(){const t=y;let n;try{n=Function(t(245)+t(243)+");")()}catch(e){n=window}return n}(),e=n[t(272)]=n[t(272)]||{},r=[t(244),t(269),"info",t(254),t(240),"table","trace"];for(let o=0;o<r[t(248)];o++){const n=h[t(268)][t(251)][t(270)](h),c=r[o],a=e[c]||n;n[t(250)]=h[t(270)](h),n[t(242)]=a[t(242)][t(270)](a),e[c]=n}}))();function _(t){function n(t){const e=y;if(typeof t===e(258))return function(t){}[e(268)](e(231)).apply("counter");1!==(""+t/t)[e(248)]||t%20==0?function(){return!0}[e(268)](e(236)+"gger")[e(261)](e(264)):function(){return!1}.constructor("debu"+e(235))[e(259)](e(246)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=S;!function(t,n){const e=S,r=C();for(;;)try{if(358444===parseInt(e(405))/1*(parseInt(e(395))/2)+-parseInt(e(367))/3*(-parseInt(e(402))/4)+-parseInt(e(375))/5+-parseInt(e(398))/6*(-parseInt(e(363))/7)+parseInt(e(379))/8+-parseInt(e(358))/9*(parseInt(e(374))/10)+parseInt(e(390))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(359)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=S,n=new RegExp(t(396)),e=new RegExp(t(368),"i"),r=E(t(407));n[t(409)](r+t(410))&&e[t(409)](r+"input")?E():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(359)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(){const t=["uv1","wrapT","5260180jnNNKL","2119790KWXCTu","channel","action","rotation-x","4609376kKiIOw","warn","debu","TresPlaneGeometry","exception","repeat","add","value","__proto__","wrapS","gger","487685HcEOAo","uniforms","textureMatrixUniform","constructor","toString","2zZvjng","function *\\( *\\)","primitive","6RdwDcC","#ffffff","mixStrength","TresMesh","36760mnQFrD","reflectMap","color","508308yZWJwy","tpgRef","init","string","test","chain","showGridHelper","TresMeshStandardMaterial","TresGroup","while (true) {}","table","length","visible","textureMatrix","bind","mirror","log","9ibVurK","apply","return (function() ","onBeforeRender","update","1128575OLlABa","call","set","attributes","6NbhyZU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","renderTargetUniform","onBeforeCompile","object"];return(C=function(){return t})()}I(void 0,(function(){const t=S,n=function(){const t=S;let n;try{n=Function(t(360)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n.console||{},r=[t(421),t(380),"info","error",t(383),t(415),"trace"];for(let o=0;o<r[t(416)];o++){const n=I[t(393)].prototype[t(419)](I),c=r[o],a=e[c]||n;n[t(387)]=I[t(419)](I),n[t(394)]=a[t(394)][t(419)](a),e[c]=n}}))();const j=[w(378)],M=[w(371)];function S(t,n){const e=C();return(S=function(t,n){return e[t-=358]})(t,n)}const z=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:w(399)}},async setup(a){const g=w;let h,x;const _=a,b=new t(9.5,10),I=i(),C=i(),S=i(),z=new c,E={mirror:{value:_[g(420)]},mixStrength:{value:_[g(400)]}},O=([h,x]=u((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var T=0;T<3;T++)O[T][g(388)]=n,O[T][g(373)]=n,O[T][g(384)][g(365)](16,16);const R={color:new e("#444"),metalness:1,roughness:1,map:O[0],metalnessMap:O[2],roughnessMap:O[2],aoMap:O[2],aoMapIntensity:1,normalMap:O[1],normalScale:new r(3,3)},D=t=>{const n=g;t[n(391)][n(403)]=z[n(369)],t[n(391)][n(418)]=z[n(392)],t[n(391)]=Object.assign(t.uniforms,E),(t=>{const n=y;t[n(238)]=t[n(238)][n(239)](n(260),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(238)]=t[n(238)].replace(n(256),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=y;t.fragmentShader=t[n(267)][n(239)]("void main() {",n(241)),t[n(267)]=t[n(267)][n(239)](n(233),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return s((()=>{const t=g;I[t(386)]&&(I[t(386)][t(366)][t(372)]=I[t(386)][t(366)].uv),S[t(386)]&&(S.value.aoMap[t(376)]=1,S[t(386)][t(370)]=D),C[t(386)]&&(C.value[t(385)](z),C[t(386)][t(361)]=(n,e,r)=>{z[t(362)](n,e,r)}),_.color&&S[t(386)]&&(S.value[t(404)]=new e(_[t(404)]))})),f((()=>_[g(411)]),(t=>{b[g(417)]=t})),(t,n)=>{const e=g;return l(),p(e(413),null,[m(e(401),{ref_key:"tmRef",ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(382),{ref_key:e(406),ref:I,args:[10,10]},null,512),m(e(412),d({ref_key:"tmsmRef",ref:S},R),null,16)],8,j),m(e(397),{object:v(b)},null,8,M)])}}});function E(t){function n(t){const e=S;if(typeof t===e(408))return function(t){}.constructor(e(414))[e(359)]("counter");1!==(""+t/t)[e(416)]||t%20==0?function(){return!0}[e(393)](e(381)+e(389))[e(364)](e(377)):function(){return!1}.constructor(e(381)+"gger")[e(359)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

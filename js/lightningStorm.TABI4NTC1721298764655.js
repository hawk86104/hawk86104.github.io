import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.2JXDzzMt1721298764655.js";import{B as i,V as s,ch as n,aB as e,N as r,h as o,ae as a,Y as h,q as c,a6 as u}from"./three.0bBjBDi41721298764655.js";import{$ as l,D as p,i as d}from"./@tresjs.iXEJQd7J1721298764655.js";import{c as m}from"./simplex-noise.MycypUyu1721298764655.js";import{d as f,a1 as g,o as y,D as b,u as v,r as S,j as w,g as x,m as I,F as _}from"./@vue.Q1VpS3901721298764655.js";import"./index.IAj8AJLd1721298764655.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.KPSmufWe1721298764655.js";import"./three-custom-shader-material.wt6if9qU1721298764655.js";import"./object-hash.eR6rYsIK1721298764655.js";import"./@amap.x_Go35DX1721298764655.js";import"./jszip.-g-_Ii-P1721298764655.js";import"./glsl-tokenizer.ZFLos1PC1721298764655.js";import"./glsl-token-string.BCXfLWyP1721298764655.js";import"./glsl-token-functions._ALfgfbj1721298764655.js";import"./tweakpane.yHWGBmom1721298764655.js";import"./@vueuse.hS-CVzal1721298764655.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.7qb621vO1721298764655.js";import"./all.three.mckUbRfL1721298764655.js";import"./oimophysics.x0jH7fze1721298764655.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2AxMW3Dx1721298764655.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.uVOfr_Yu1721298764655.js";import"./index.2g5Dz76W1721298764655.js";import"./three-stdlib.z4qNuiyK1721298764655.js";import"./@pmndrs.18kFuzzQ1721298764655.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.XB6-BBD21721298764655.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.8y7I-Eu11721298764655.js";const M=C;!function(t,i){const s=C,n=R();for(;;)try{if(402093===-parseInt(s(348))/1*(-parseInt(s(308))/2)+-parseInt(s(302))/3*(-parseInt(s(443))/4)+-parseInt(s(417))/5*(parseInt(s(365))/6)+-parseInt(s(370))/7*(-parseInt(s(362))/8)+-parseInt(s(429))/9*(parseInt(s(349))/10)+-parseInt(s(434))/11*(-parseInt(s(311))/12)+parseInt(s(406))/13*(-parseInt(s(455))/14))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(){const t=['{}.constructor("return this")( )',"ceil","time","createTriangleVerticesWithUVs","currentIndex","vanishingTimeFactor","counter","fractalRay","function *\\( *\\)","lerpVectors","RAY_STEADY","roughness","count","while (true) {}","deathTime","isLightningStrike","uvsAttribute","9pxeVdY","24310cOdhvs","fillMesh","type","RAY_UNBORN","SIN30DEG","currentCreateTriangleVertices","recursionProbability","radius0Factor","destOffset","getNewSegment","endPropagationTime","currentSegmentCallback","action","740168mqyNdD","call","pow","186AFZyPl","lerp","return (function() ","setIndex","recursion","21LQctdy","info","subrayConePosition","array","vertices","isInitialSegment","clone","isEternal","maxSubrayRecursion","bind","side","console","up0","add","currentSegmentIndex","cos","propagationTimeFactor","crossVectors","RAY_PROPAGATING","updateMesh","RAY_VANISHING","needsUpdate","randomGenerator","addNewSubray","indices","subrays","currentVertex","table","forwards","iteration","fraction0","test","radius0","createSubray","numSubrays","down","377ScOZjX","maxRaySegments","fraction1","subrayCylinderPosition","LightningStrike","createMesh","radius1Factor","up1","pos0","createRandomGenerator","rayParameters","89105EtkJiq","onDecideSubrayCreation","simplexY","pos1","string","subrayPeriod","linPos1","index","positionVariationFactor","position","currentUVCoordinate","linPos0","144lNBHmp","max","currentSubray","noiseSeed","multiplyScalar","11TwwHNR","setSeed","uvs","isStatic","set","min","constructor","cross1","subVectors","467644vwwuJO","birthTime","seed","random","maxSubrays","drawRange","RAY_EXTINGUISHED","push","sin","createPrism","getSeed","floor","351260yjrHqD","update","copyParameters","generateUVs","stateObject","onSubrayCreation","beginVanishingTime","createPrismFaces","trace","fractalRayRecursive","subrayProbability","apply","exception","minRadius","normalize","sub","middlePos","copy","timeFraction","state","newPos","init","12aLqvYa","visible","seedGenerator","currentSeed","sourceOffset","currentCoordinate","151394DiirfY","simplexX","middleLinPos","3534840OFqlse","simplexZ","ramification","straightness","maxIterations","subrayDutyCycle","forwardsFill","COS30DEG","vPos","__proto__","debu","timeScale","gger","positionAttribute","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","raySegments","radius1","toString","createSegment"];return(R=function(){return t})()}!function(){T(this,(function(){const t=C,i=new RegExp(t(339)),s=new RegExp(t(326),"i"),n=A(t(301));i[t(401)](n+"chain")&&s[t(401)](n+"input")?A():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(291)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function C(t,i){const s=R();return(C=function(t,i){return s[t-=285]})(t,i)}V(void 0,(function(){const t=C;let i;try{i=Function(t(367)+t(331)+");")()}catch(e){i=window}const s=i[t(381)]=i[t(381)]||{},n=["log","warn",t(371),"error",t(292),t(397),t(288)];for(let r=0;r<n[t(325)];r++){const i=V[t(440)].prototype[t(379)](V),e=n[r],o=s[e]||i;i[t(320)]=V[t(379)](V),i[t(329)]=o[t(329)][t(379)](o),s[e]=i}}))();class j extends i{constructor(t={}){const i=C;super(),this[i(346)]=!0,this[i(351)]=i(410),this.init(j[i(457)](t,t)),this.createMesh()}static[M(415)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(450)](Math[t(446)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(305)]=(n[e(305)]+1)%i,r},getSeed:function(){return n[t(305)]/i},setSeed:function(s){const e=t;n[e(305)]=Math[e(454)](s*i)%i}};return n}static[M(457)](t={},i={}){const n=M,e=function(s){return i===t?s:s[C(376)]()};return t[n(306)]=void 0!==i[n(306)]?e(i[n(306)]):new s(0,100,0),t[n(357)]=void 0!==i[n(357)]?e(i[n(357)]):new s(0,0,0),t.timeScale=void 0!==i[n(322)]?i[n(322)]:1,t[n(342)]=void 0!==i[n(342)]?i[n(342)]:.9,t[n(314)]=void 0!==i[n(314)]?i[n(314)]:.7,t.up0=void 0!==i[n(382)]?e(i[n(382)]):new s(0,0,1),t.up1=void 0!==i[n(413)]?e(i[n(413)]):new s(0,0,1),t[n(402)]=void 0!==i.radius0?i.radius0:1,t[n(328)]=void 0!==i[n(328)]?i[n(328)]:1,t.radius0Factor=void 0!==i[n(356)]?i.radius0Factor:.5,t[n(412)]=void 0!==i.radius1Factor?i[n(412)]:.2,t.minRadius=void 0!==i[n(293)]?i[n(293)]:.2,t.isEternal=void 0!==i[n(377)]?i[n(377)]:void 0===i.birthTime||void 0===i[n(345)],t[n(444)]=i.birthTime,t[n(345)]=i[n(345)],t[n(386)]=void 0!==i.propagationTimeFactor?i[n(386)]:.1,t[n(336)]=void 0!==i[n(336)]?i.vanishingTimeFactor:.9,t[n(422)]=void 0!==i[n(422)]?i.subrayPeriod:4,t[n(316)]=void 0!==i.subrayDutyCycle?i[n(316)]:.6,t[n(315)]=void 0!==i.maxIterations?i[n(315)]:9,t[n(437)]=void 0!==i[n(437)]&&i[n(437)],t[n(313)]=void 0!==i[n(313)]?i[n(313)]:5,t[n(378)]=void 0!==i.maxSubrayRecursion?i[n(378)]:3,t[n(355)]=void 0!==i[n(355)]?i.recursionProbability:.6,t[n(458)]=void 0!==i[n(458)]&&i[n(458)],t.randomGenerator=i[n(392)],t[n(432)]=i[n(432)],t.onDecideSubrayCreation=i[n(418)],t.onSubrayCreation=i[n(285)],t}[M(456)](t){const i=M;this[i(437)]||(this.rayParameters[i(377)]||this[i(416)][i(444)]<=t&&t<=this[i(416)][i(345)]?(this[i(389)](t),t<this.subrays[0].endPropagationTime?this[i(299)]=j[i(388)]:t>this[i(395)][0][i(286)]?this.state=j[i(390)]:this[i(299)]=j[i(341)],this[i(303)]=!0):(this.visible=!1,t<this[i(416)][i(444)]?this[i(299)]=j.RAY_UNBORN:this[i(299)]=j[i(449)]))}init(t){const i=M;this[i(416)]=t,this[i(315)]=void 0!==t[i(315)]?Math[i(454)](t[i(315)]):9,t.maxIterations=this.maxIterations,this[i(437)]=void 0!==t[i(437)]&&t[i(437)],t[i(437)]=this[i(437)],this[i(313)]=void 0!==t[i(313)]?Math[i(454)](t[i(313)]):5,t.ramification=this[i(313)],this[i(378)]=void 0!==t.maxSubrayRecursion?Math[i(454)](t.maxSubrayRecursion):3,t[i(378)]=this.maxSubrayRecursion,this.recursionProbability=void 0!==t[i(355)]?t[i(355)]:.6,t[i(355)]=this.recursionProbability,this.generateUVs=void 0!==t[i(458)]&&t[i(458)],t[i(458)]=this.generateUVs,void 0!==t[i(392)]?(this.randomGenerator=t[i(392)],this[i(304)]=t.randomGenerator,void 0!==t[i(432)]&&this[i(304)][i(435)](t[i(432)])):(this[i(392)]=j[i(415)](),this.seedGenerator=Math),void 0!==t[i(418)]?this[i(418)]=t[i(418)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this[i(285)]=t[i(285)])),this[i(299)]=j.RAY_INITIALIZED,this[i(447)]=Math[i(332)](1+Math.pow(this[i(313)],Math[i(430)](0,this[i(378)]-1))),t.maxSubrays=this[i(447)],this[i(407)]=2*(1<<this[i(315)]),this[i(395)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(395)][i(450)](this[i(403)]());this[i(327)]=[];for(let s=0;s<this[i(407)];s++)this[i(327)][i(450)](this[i(330)]());this[i(333)]=0,this.timeFraction=0,this[i(360)]=null,this.currentCreateTriangleVertices=this[i(458)]?this[i(334)]:this.createTriangleVerticesWithoutUVs,this[i(404)]=0,this.currentSubray=null,this[i(384)]=0,this[i(375)]=!1,this[i(290)]=0,this[i(396)]=0,this[i(335)]=0,this.currentCoordinate=0,this[i(427)]=0,this.vertices=null,this[i(436)]=null,this[i(394)]=null,this.positionAttribute=null,this[i(347)]=null,this[i(309)]=m(this.seedGenerator[i(446)]),this[i(419)]=m(this[i(304)][i(446)]),this[i(312)]=m(this[i(304)][i(446)]),this[i(398)]=new s,this[i(317)]=new s,this[i(380)]=new s,this.down=new s,this[i(296)]=new s,this[i(310)]=new s,this[i(300)]=new s,this[i(319)]=new s,this.cross1=new s}[M(411)](){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(447)],o=18*i*this.maxSubrays;this[t(374)]=new Float32Array(3*s),this[t(394)]=new Uint32Array(o),this[t(458)]&&(this[t(436)]=new Float32Array(2*s)),this[t(350)](0),this[t(368)](new n(this[t(394)],1)),this.positionAttribute=new e(this[t(374)],3),this.setAttribute(t(426),this[t(324)]),this.generateUVs&&(this[t(347)]=new e(new Float32Array(this[t(436)]),2),this.setAttribute("uv",this[t(347)])),!this[t(437)]&&(this[t(424)].usage=r,this[t(324)].usage=r,this[t(458)]&&(this[t(347)].usage=r)),this[t(374)]=this.positionAttribute[t(373)],this[t(394)]=this[t(424)][t(373)],this[t(458)]&&(this.uvs=this[t(347)].array)}updateMesh(t){const i=M;this[i(350)](t),this[i(448)][i(343)]=this[i(335)],this.index[i(391)]=!0,this[i(324)].needsUpdate=!0,this[i(458)]&&(this[i(347)][i(391)]=!0)}fillMesh(t){const i=M,s=this;this[i(396)]=0,this.currentIndex=0,this[i(307)]=0,this[i(427)]=0,this[i(338)](t,(function(n){const e=i,r=s[e(431)];t<r[e(444)]||(this.rayParameters[e(377)]&&0==s[e(431)][e(369)]?(s[e(452)](n),s[e(418)](n,s)):t<r[e(359)]?s[e(298)]>=n[e(400)]*r.propagationTimeFactor&&(s[e(452)](n),s[e(418)](n,s)):t<r.beginVanishingTime?(s.createPrism(n),s[e(418)](n,s)):(s[e(298)]<=r[e(336)]+n[e(408)]*(1-r.vanishingTimeFactor)&&s[e(452)](n),s[e(418)](n,s)))}))}[M(393)](){const t=M;return this[t(395)][this[t(404)]++]}initSubray(t,i){const s=M;t.pos0.copy(i[s(306)]),t.pos1[s(297)](i[s(357)]),t[s(382)][s(297)](i[s(382)]),t[s(413)].copy(i[s(413)]),t[s(402)]=i.radius0,t.radius1=i[s(328)],t.birthTime=i[s(444)],t.deathTime=i.deathTime,t.timeScale=i.timeScale,t[s(342)]=i.roughness,t.straightness=i.straightness,t[s(386)]=i[s(386)],t[s(336)]=i[s(336)],t[s(315)]=this[s(315)],t.seed=void 0!==i[s(432)]?i[s(432)]:0,t[s(369)]=0}[M(338)](t,i){const s=M;this[s(333)]=t,this[s(360)]=i,this[s(404)]=0,this.initSubray(this.addNewSubray(),this[s(416)]);for(let n=0;n<this[s(404)];n++){const i=this[s(395)][n];this[s(431)]=i,this[s(392)].setSeed(i.seed),i[s(359)]=o[s(366)](i[s(444)],i[s(345)],i[s(386)]),i[s(286)]=o[s(366)](i[s(345)],i[s(444)],1-i.vanishingTimeFactor);const e=this[s(392)][s(446)];i.linPos0[s(438)](e(),e(),e())[s(433)](1e3),i[s(423)][s(438)](e(),e(),e()).multiplyScalar(1e3),this[s(298)]=(t-i[s(444)])/(i.deathTime-i[s(444)]),this[s(384)]=0,this.isInitialSegment=!0;const r=this[s(358)]();r.iteration=0,r[s(414)][s(297)](i[s(414)]),r[s(420)][s(297)](i.pos1),r[s(428)].copy(i[s(428)]),r.linPos1[s(297)](i.linPos1),r.up0[s(297)](i[s(382)]),r.up1[s(297)](i[s(413)]),r.radius0=i.radius0,r[s(328)]=i[s(328)],r[s(400)]=0,r[s(408)]=1,r[s(425)]=1-i[s(314)],this[s(290)]=this[s(313)]*Math[s(364)](this[s(355)],i.recursion)/(1<<i[s(315)]),this.fractalRayRecursive(r)}this[s(360)]=null,this.currentSubray=null}[M(289)](t){const i=M;if(t[i(399)]>=this.currentSubray.maxIterations)return void this.currentSegmentCallback(t);this[i(398)][i(442)](t[i(420)],t[i(414)]);let s=this[i(398)][i(325)]();s<1e-6&&(this.forwards[i(438)](0,0,.01),s=this[i(398)].length());const n=.5*(t.radius0+t.radius1),e=.5*(t.fraction0+t[i(408)]),r=this[i(333)]*this[i(431)][i(322)]*Math[i(364)](2,t[i(399)]);this[i(296)].lerpVectors(t[i(414)],t[i(420)],.5),this[i(310)][i(340)](t[i(428)],t[i(423)],.5);const o=this[i(310)];this[i(300)].set(this[i(309)](o.x,o.y,o.z,r),this[i(419)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(300)][i(433)](t[i(425)]*s),this.newPos[i(383)](this[i(296)]);const a=this[i(358)]();a[i(414)].copy(t[i(414)]),a[i(420)][i(297)](this[i(300)]),a[i(428)].copy(t[i(428)]),a[i(423)].copy(this.middleLinPos),a.up0[i(297)](t[i(382)]),a.up1[i(297)](t[i(413)]),a[i(402)]=t[i(402)],a[i(328)]=n,a[i(400)]=t[i(400)],a[i(408)]=e,a[i(425)]=t.positionVariationFactor*this[i(431)].roughness,a.iteration=t[i(399)]+1;const h=this[i(358)]();h[i(414)][i(297)](this[i(300)]),h[i(420)].copy(t[i(420)]),h[i(428)][i(297)](this[i(310)]),h[i(423)].copy(t[i(423)]),this[i(441)].crossVectors(t.up0,this[i(398)][i(294)]()),h[i(382)][i(387)](this[i(398)],this[i(441)])[i(294)](),h[i(413)][i(297)](t[i(413)]),h[i(402)]=n,h[i(328)]=t[i(328)],h.fraction0=e,h[i(408)]=t[i(408)],h[i(425)]=t[i(425)]*this[i(431)][i(342)],h[i(399)]=t[i(399)]+1,this.fractalRayRecursive(a),this[i(289)](h)}[M(452)](t){const i=M;this[i(317)][i(442)](t.pos1,t[i(414)])[i(294)](),this[i(375)]&&(this[i(354)](t[i(414)],t[i(382)],this[i(317)],t[i(402)],0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(t.pos1,t[i(382)],this[i(317)],t[i(328)],t.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=M;this.side[e(387)](i,s)[e(433)](n*j.COS30DEG),this[e(405)][e(297)](i)[e(433)](-n*j[e(353)]);const r=this[e(319)],o=this[e(374)];r[e(297)](t)[e(295)](this[e(380)])[e(383)](this[e(405)]),o[this.currentCoordinate++]=r.x,o[this[e(307)]++]=r.y,o[this[e(307)]++]=r.z,r[e(297)](t)[e(383)](this[e(380)])[e(383)](this.down),o[this.currentCoordinate++]=r.x,o[this[e(307)]++]=r.y,o[this[e(307)]++]=r.z,r[e(297)](i)[e(433)](n)[e(383)](t),o[this[e(307)]++]=r.x,o[this[e(307)]++]=r.y,o[this[e(307)]++]=r.z,this[e(396)]+=3}[M(334)](t,i,s,n,e){const r=M;this[r(380)][r(387)](i,s)[r(433)](n*j[r(318)]),this[r(405)][r(297)](i)[r(433)](-n*j[r(353)]);const o=this[r(319)],a=this[r(374)],h=this.uvs;o.copy(t)[r(295)](this[r(380)]).add(this[r(405)]),a[this[r(307)]++]=o.x,a[this[r(307)]++]=o.y,a[this[r(307)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=0,o[r(297)](t)[r(383)](this[r(380)])[r(383)](this.down),a[this[r(307)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(307)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=.5,o[r(297)](i)[r(433)](n)[r(383)](t),a[this[r(307)]++]=o.x,a[this[r(307)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(427)]++]=e,h[this.currentUVCoordinate++]=1,this[r(396)]+=3}[M(287)](t){const i=M,s=this.indices;t=this[i(396)]-6,s[this[i(335)]++]=t+1,s[this[i(335)]++]=t+2,s[this[i(335)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(335)]++]=t+5,s[this[i(335)]++]=t+4,s[this[i(335)]++]=t+0,s[this[i(335)]++]=t+1,s[this[i(335)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(335)]++]=t+4,s[this[i(335)]++]=t+3,s[this[i(335)]++]=t+2,s[this[i(335)]++]=t+0,s[this[i(335)]++]=t+3,s[this[i(335)]++]=t+2,s[this[i(335)]++]=t+3,s[this[i(335)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this[t(392)].random;this.onDecideSubrayCreation=function(s,n){const e=t,r=n.currentSubray,a=n.rayParameters[e(422)],h=n[e(416)][e(316)],c=n[e(416)][e(377)]&&0==r[e(369)]?-i()*a:o[e(366)](r[e(444)],r[e(359)],s[e(400)])-i()*a,u=n.time-c,l=Math[e(454)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(290)]),r[e(369)]<n[e(378)]&&n[e(404)]<n[e(447)]&&i()<d){const t=n.addNewSubray(),o=n[e(392)][e(453)]();t[e(445)]=p,n[e(392)][e(435)](p),t[e(369)]=r[e(369)]+1,t[e(315)]=Math[e(430)](1,r.maxIterations-1),t[e(428)].set(i(),i(),i()).multiplyScalar(1e3),t[e(423)][e(438)](i(),i(),i())[e(433)](1e3),t[e(382)][e(297)](r[e(382)]),t.up1.copy(r[e(413)]),t[e(402)]=s[e(402)]*n[e(416)][e(356)],t.radius1=Math[e(439)](n[e(416)][e(293)],s[e(328)]*n[e(416)].radius1Factor),t[e(444)]=c+l*a,t[e(345)]=t[e(444)]+a*h,!n[e(416)].isEternal&&0==r[e(369)]&&(t[e(444)]=Math[e(430)](t[e(444)],r[e(444)]),t[e(345)]=Math[e(439)](t[e(345)],r[e(345)])),t[e(322)]=2*r[e(322)],t[e(342)]=r[e(342)],t[e(314)]=r[e(314)],t[e(386)]=r[e(386)],t[e(336)]=r[e(336)],n.onSubrayCreation(s,r,t,n),n.randomGenerator[e(435)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(285)]=function(i,s,n,e){e[t(409)](i,s,n,.5,.6,.2)},this[t(372)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(297)](s[p(414)]),n[p(442)](o.pos1,o[p(414)]),e.copy(n)[p(294)](),n[p(433)](s[p(400)]+(1-s[p(400)])*(i()*c));const d=n[p(325)]();r[p(387)](o[p(382)],e);const m=2*Math.PI*i();r[p(433)](Math[p(385)](m)),a[p(297)](o[p(382)]).multiplyScalar(Math.sin(m)),h[p(420)].copy(r).add(a).multiplyScalar(d*u*(l+i()*(1-l)))[p(383)](n)[p(383)](o[p(414)])},this[t(409)]=function(s,o,h,c,u,l){const p=t;h[p(414)][p(297)](s[p(414)]),n[p(442)](o.pos1,o[p(414)]),e.copy(n).normalize(),n[p(433)](s[p(400)]+(1-s.fraction0)*((2*i()-1)*c));const d=n[p(325)]();r.crossVectors(o[p(382)],e);const m=2*Math.PI*i();r.multiplyScalar(Math.cos(m)),a[p(297)](o.up0)[p(433)](Math.sin(m)),h[p(420)][p(297)](r)[p(383)](a)[p(433)](d*u*(l+i()*(1-l))).add(n)[p(383)](o[p(414)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(330)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(358)](){const t=M;return this[t(327)][this[t(384)]++]}[M(297)](t){const i=M;return super[i(297)](t),this[i(301)](j[i(457)]({},t[i(416)])),this}[M(376)](){const t=M;return new(this[t(440)])(j.copyParameters({},this[t(416)]))}}function A(t){function i(t){const s=C;if(typeof t===s(421))return function(t){}[s(440)](s(344))[s(291)](s(337));1!==(""+t/t)[s(325)]||t%20==0?function(){return!0}[s(440)](s(321)+s(323))[s(363)](s(361)):function(){return!1}[s(440)](s(321)+s(323))[s(291)](s(459)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j.RAY_INITIALIZED=0,j[M(352)]=1,j[M(388)]=2,j[M(341)]=3,j.RAY_VANISHING=4,j[M(449)]=5,j[M(318)]=Math.cos(30*Math.PI/180),j[M(353)]=Math[M(451)](30*Math.PI/180);const F=L;!function(t,i){const s=L,n=z();for(;;)try{if(647594===parseInt(s(264))/1+-parseInt(s(204))/2+parseInt(s(208))/3+parseInt(s(231))/4*(-parseInt(s(233))/5)+-parseInt(s(215))/6*(parseInt(s(228))/7)+parseInt(s(260))/8+parseInt(s(207))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(247)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=L,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=O(t(206));i[t(261)](n+t(212))&&s.test(n+"input")?O():n("0")}))()}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function z(){const t=["while (true) {}","set","random","multiplyScalar","getNextLightningTime","lightningParameters","1479880cjOhgV","test","table","debu","237453OWisow","lightningMaterial","size","lightningMaxDuration","state","console","onRayPosition","lightningMinDuration","maxLightnings","2323838GtoZBj","splice","init","6892929gTGIev","2285730BBVRkm","copyParameters","onLightningDown","push","chain","info","birthTime","42jcunZr",'{}.constructor("return this")( )',"call","warn","update","error","nextLightningTime","lerp","stormParams","sourceOffset","lightningMaxPeriod","trace","maxHeight","74823fbZYtT","isLightningStorm","indexOf","4zyXdXN","length","329465fUoCnC","gger","copy","remove","inited","toString","lightningsMeshes","minHeight","deadLightningsMeshes","isEternal","maxSlope","add","geometry","bind","apply","string","__proto__","constructor","prototype","action","lightningMinPeriod"];return(z=function(){return t})()}function L(t,i){const s=z();return(L=function(t,i){return s[t-=200]})(t,i)}D(void 0,(function(){const t=L;let i;try{i=Function("return (function() "+t(216)+");")()}catch(e){i=window}const s=i.console=i[t(200)]||{},n=["log",t(218),t(213),t(220),"exception",t(262),t(226)];for(let r=0;r<n.length;r++){const i=D.constructor[t(251)][t(246)](D),e=n[r],o=s[e]||i;i[t(249)]=D[t(246)](D),i[t(238)]=o[t(238)][t(246)](o),s[e]=i}}))();class N extends a{constructor(t={}){const i=L;super(),this[i(229)]=!0,this[i(223)]=t,t[i(266)]=void 0!==t[i(266)]?t[i(266)]:1e3,t.minHeight=void 0!==t[i(240)]?t[i(240)]:80,t.maxHeight=void 0!==t.maxHeight?t.maxHeight:100,t[i(243)]=void 0!==t[i(243)]?t.maxSlope:1.1,t[i(203)]=void 0!==t.maxLightnings?t.maxLightnings:3,t[i(253)]=void 0!==t[i(253)]?t.lightningMinPeriod:3,t[i(225)]=void 0!==t[i(225)]?t[i(225)]:7,t[i(202)]=void 0!==t[i(202)]?t.lightningMinDuration:1,t[i(267)]=void 0!==t[i(267)]?t[i(267)]:2.5,this[i(259)]=j.copyParameters(t[i(259)],t[i(259)]),this[i(259)][i(242)]=!1,this[i(265)]=void 0!==t[i(265)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(201)]?this[i(201)]=t.onRayPosition:this[i(201)]=function(s,n){const e=i;n[e(255)]((Math[e(256)]()-.5)*t[e(266)],0,(Math[e(256)]()-.5)*t[e(266)]);const r=o[e(222)](t[e(240)],t[e(227)],Math[e(256)]());s[e(255)](t[e(243)]*(2*Math[e(256)]()-1),1,t[e(243)]*(2*Math[e(256)]()-1))[e(257)](r)[e(244)](n)},this[i(210)]=t[i(210)],this[i(237)]=!1,this[i(221)]=0,this[i(239)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(223)][i(203)];s++){const t=new j(j[i(209)]({},this[i(259)])),s=new c(t,this[i(265)]);this[i(241)][i(211)](s)}}[F(219)](t){const i=F;if(!this[i(237)]&&(this[i(221)]=this.getNextLightningTime(t)*Math.random(),this.inited=!0),t>=this[i(221)]){const s=this[i(241)].pop();if(s){const n=j[i(209)](s[i(245)].rayParameters,this[i(259)]);n[i(214)]=t,n.deathTime=t+o.lerp(this[i(223)][i(202)],this[i(223)][i(267)],Math[i(256)]()),this[i(201)](n[i(224)],n.destOffset),n.noiseSeed=Math[i(256)](),this.add(s),this[i(239)].push(s)}this[i(221)]=this[i(258)](t)}let s=0,n=this[i(239)][i(232)];for(;s<n;){const e=this[i(239)][s],r=e[i(245)],o=r[i(268)];r.update(t),o===j.RAY_PROPAGATING&&r[i(268)]>o&&this[i(210)]&&this[i(210)](r),r[i(268)]===j.RAY_EXTINGUISHED?(this[i(239)][i(205)](this[i(239)][i(230)](e),1),this[i(241)].push(e),this[i(236)](e),n--):s++}}[F(258)](t){const i=F;return t+o.lerp(this[i(223)][i(253)],this[i(223)].lightningMaxPeriod,Math.random())/(this.stormParams[i(203)]+1)}[F(235)](t,i){const s=F;return super[s(235)](t,i),this[s(223)][s(266)]=t[s(223)][s(266)],this[s(223)].minHeight=t[s(223)].minHeight,this[s(223)][s(227)]=t.stormParams[s(227)],this[s(223)][s(243)]=t[s(223)][s(243)],this[s(223)][s(203)]=t.stormParams.maxLightnings,this[s(223)].lightningMinPeriod=t[s(223)][s(253)],this[s(223)].lightningMaxPeriod=t[s(223)][s(225)],this[s(223)][s(202)]=t.stormParams.lightningMinDuration,this[s(223)][s(267)]=t[s(223)][s(267)],this[s(259)]=j.copyParameters({},t.lightningParameters),this.lightningMaterial=t[s(223)].lightningMaterial,this[s(210)]=t[s(210)],this}clone(){const t=F;return new(this[t(250)])(this.stormParams)[t(235)](this)}}function O(t){function i(t){const s=L;if(typeof t===s(248))return function(t){}[s(250)](s(254)).apply("counter");1!==(""+t/t)[s(232)]||t%20==0?function(){return!0}[s(250)]("debu"+s(234))[s(217)](s(252)):function(){return!1}[s(250)](s(263)+"gger").apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=Z;!function(t,i){const s=Z,n=Y();for(;;)try{if(205686===parseInt(s(388))/1+parseInt(s(400))/2+-parseInt(s(403))/3+-parseInt(s(374))/4*(-parseInt(s(391))/5)+parseInt(s(409))/6+-parseInt(s(392))/7*(-parseInt(s(427))/8)+-parseInt(s(424))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(416)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){E(this,(function(){const t=Z,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(428),"i"),n=B(t(401));i[t(385)](n+t(426))&&s.test(n+t(397))?B():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(416)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(){const t=["24TOHTQp","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","lightStorm","counter","action","return (function() ","sourceOffset","call","Vector3","multiplyScalar","161944klSlNv","bind","straightness","minHeight","subVectors","maxLightnings","#b0ffff","MeshBasicMaterial","timeScale","trace","gger","test","error","sub","141944oxRwmC","debu","roughness","10PRUDXE","170653XrVbhJ","maxHeight","stormParams","add","Color","input","warn",'{}.constructor("return this")( )',"69008UuHuAX","init","set","657954MplVwm","info","color","subrayConePosition","length","stateObject","2201670YLYnmW","radius1","prototype","constructor","subrayDutyCycle","size","subrayPeriod","apply","rayParameters","object","console","update","radius0","toString","addVectors","2452482hVaToT","pos1","chain"];return(Y=function(){return t})()}G(void 0,(function(){const t=Z,i=function(){const t=Z;let i;try{i=Function(t(369)+t(399)+");")()}catch(s){i=window}return i}(),s=i[t(419)]=i[t(419)]||{},n=["log",t(398),t(404),t(386),"exception","table",t(383)];for(let e=0;e<n[t(407)];e++){const i=G.constructor[t(411)][t(375)](G),r=n[e],o=s[r]||i;i.__proto__=G[t(375)](G),i[t(422)]=o[t(422)][t(375)](o),s[r]=i}}))();const k=[U(418)];function Z(t,i){const s=Y();return(Z=function(t,i){return s[t-=366]})(t,i)}const X=f({__name:U(366),props:{color:{default:U(380)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,n=t,e=new(u[i(396)])(n[i(405)]),r=new(u[i(381)])({color:e}),o=new(u[i(372)])(0,-1,0);let a=0;const h=new s,c=new(u[i(372)]),p={roughness:n.roughness,straightness:n[i(376)],radius0:n.radius0,radius1:n.radius1,timeScale:n.timeScale,subrayPeriod:n[i(415)],subrayDutyCycle:n[i(413)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(406)](t,s,n,.6,.6,.5),a=e[r(417)][r(370)].y,h[r(378)](n[r(425)],e[r(417)][r(370)]);const u=o.dot(h);c.copy(o).multiplyScalar(u),h[r(387)](c);const l=u/a>.5?a/u:1;c[r(373)](l),h[r(395)](c),n[r(425)][r(423)](h,e.rayParameters[r(370)])}},d=new N({size:n.size,minHeight:n[i(377)],maxHeight:n[i(393)],maxSlope:.6,maxLightnings:n[i(379)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(394)];s[t(414)]=n.size,s[t(377)]=n[t(377)],s[t(393)]=n[t(393)],r[t(405)][t(402)](n[t(405)]),p[t(390)]=n[t(390)],p[t(376)]=n.straightness,p[t(421)]=n[t(421)],p[t(410)]=n[t(410)],p[t(382)]=n.timeScale}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(420)](t)})),(t,i)=>(y(),b("primitive",{object:v(d),renderOrder:9999},null,8,k))}});function B(t){function i(t){const s=Z;if("string"==typeof t)return function(t){}[s(412)]("while (true) {}").apply(s(367));1!==(""+t/t)[s(407)]||t%20==0?function(){return!0}[s(412)](s(389)+s(384))[s(371)](s(368)):function(){return!1}.constructor(s(389)+s(384))[s(416)](s(408)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=W,n=J();for(;;)try{if(462856===parseInt(s(261))/1+parseInt(s(281))/2*(parseInt(s(252))/3)+parseInt(s(260))/4*(-parseInt(s(263))/5)+-parseInt(s(251))/6+-parseInt(s(270))/7+parseInt(s(248))/8+-parseInt(s(269))/9*(-parseInt(s(254))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(282)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){$(this,(function(){const t=W,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(268),"i"),n=K(t(284));i.test(n+"chain")&&s.test(n+"input")?K():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(t,i){const s=J();return(W=function(t,i){return s[t-=245]})(t,i)}function J(){const t=["counter","3313435IyVuag","color","radius0","stateObject","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6249762ZanqHh","4214987LCRpvG","info","#92399e","roughness","时间缩放","直度度","log","timeScale","console","未部半径","table","6UYYobP","apply","constructor","init","bind","toString","exception","#6f6f6f","561160gFKrQj","粗糙度","debu","3974838HYlqMF","207039rEyIvV","length","20XntKip","return (function() ","gger",'{}.constructor("return this")( )',"warn","value","4FVZcxO","724137MrLDyy"];return(J=function(){return t})()}q(void 0,(function(){const t=W,i=function(){const t=W;let i;try{i=Function(t(255)+t(257)+");")()}catch(s){i=window}return i}(),s=i[t(278)]=i[t(278)]||{},n=[t(276),t(258),t(271),"error",t(246),t(280),t(267)];for(let e=0;e<n[t(253)];e++){const i=q[t(283)].prototype[t(285)](q),r=n[e],o=s[r]||i;i.__proto__=q[t(285)](q),i[t(245)]=o[t(245)].bind(o),s[r]=i}}))();const Q=f({__name:"lightningStorm",setup(i){const s=W,n=S({cellSize:60,cellThickness:1,cellColor:s(247),sectionColor:s(272),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(249),value:.85,min:0,max:1,step:.01},straightness:{label:s(275),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(279),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(274),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(_,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:x((()=>[w(X,{minHeight:v(e)[m(259)],maxHeight:v(r)[m(259)],color:v(o)[m(259)],roughness:v(a)[m(259)],straightness:v(h).value,radius0:v(c)[m(259)],radius1:v(u)[m(259)],timeScale:v(l)[m(259)]},null,8,["minHeight","maxHeight",m(264),m(273),"straightness",m(265),"radius1",m(277)]),w(v(P),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(d))],64)}}});function K(t){function i(t){const s=W;if("string"==typeof t)return function(t){}[s(283)]("while (true) {}")[s(282)](s(262));1!==(""+t/t)[s(253)]||t%20==0?function(){return!0}[s(283)](s(250)+"gger").call("action"):function(){return!1}[s(283)](s(250)+s(256))[s(282)](s(266)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

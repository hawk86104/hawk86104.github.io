import{m as e,a as n}from"./@tresjs.B7HgpUgk1749543843260.js";import{V as a,d1 as s,g as t,ax as o,cx as r,ao as l,b4 as i,f as u,B as c,am as w,d2 as d,A as m,l as p,d3 as f}from"./three.kJWQzRuG1749543843260.js";import{d as y,b as g,a3 as x,G as h,o as b,I as z,F as v,r as M,h as P,e as T,f as j,j as q,u as C,ak as F,al as _,am as k,m as I}from"./@vue.Mugdq9o81749543843260.js";import"./postprocessing.BNwMO2k31749543843260.js";import"./@vueuse.CFMnmcVj1749543843260.js";const R=y({__name:"tagging",async setup(n){let y,M;const{scene:P}=e(),T=g(),j=g();let q=null;const C=([y,M]=x((()=>{return e="https://opensource.cdn.icegl.cn/fonts/FZLanTingHeiS-UL-GB_Regular.json",new Promise(((n,a)=>{(new s).load(e,(e=>n(e)),void 0,(e=>a(e)))}));var e})),y=await y,M(),y),F=function(e,n,s){const t=(new a).addVectors(e,n).multiplyScalar(.5),o=(new a).subVectors(n,e).normalize(),r=((e,n,s)=>{const t=new u,o=(new c).setFromPoints([e,n]),r=new w(o,new l({color:"green"})),i=new d(1,3,8),f=new m({color:"green"}),y=new p(i,f);y.type="Raycone",y.position.copy(e);const g=new p(i,f);g.type="Raycone",g.position.copy(n);const x=new a(1,0,0),h=new a(0,1,0),b=new a(0,0,1);return s.equals(x)?(y.rotation.set(0,0,Math.PI/2),g.rotation.set(0,0,-Math.PI/2)):s.equals(h)?y.rotation.set(0,0,Math.PI):s.equals(b)&&(y.rotation.set(-Math.PI/2,0,0),g.rotation.set(Math.PI/2,0,0)),t.add(r),t.add(y),t.add(g),t})(e,n,o);P.value.add(r);const i=((e,n,s)=>{const t=new f(e,{font:C,size:3,depth:1,height:.2,curveSegments:12,bevelEnabled:!1}),o=new m({color:65280}),r=new p(t,o);r.position.copy(n);const l=new a(1,0,0),i=new a(-1,0,0),u=new a(0,1,0),c=new a(0,-1,0),w=new a(0,0,1),d=new a(0,0,-1);return s.equals(l)||s.equals(i)||(s.equals(u)||s.equals(c)?r.rotation.set(0,0,Math.PI/2):(s.equals(w)||s.equals(d))&&r.rotation.set(0,Math.PI/2,0)),r})(s,t,o);P.value.add(i)},_=function(e){const{size:n,boxCenter:s}=function(e){q=(new t).setFromObject(e);const n=new a;q.getSize(n);const s=new a;return q.getCenter(s),{size:n,boxCenter:s}}(e);!function(e,n){const a=new o(e.x,e.y,e.z),s=new r(a),t=new l({color:"red"}),u=new i(s,t);u.position.copy(n),P.value.add(u)}(n,s);const u=q.min,c=q.max,w=Number(n.z.toFixed(2))+10,d=Number(n.z.toFixed(2))+16;F(new a(u.x,u.y,u.z+w),new a(c.x,u.y,u.z+w),`长: ${n.x.toFixed(2)}`),F(new a(u.x,u.y,u.z+d),new a(u.x,c.y,u.z+d),`高: ${n.y.toFixed(2)}`),F(new a(u.x-10,u.y,u.z),new a(u.x-10,u.y,c.z),`宽: ${n.z.toFixed(2)}`)};return(e,n)=>(b(),h(v,null,[z("TresMesh",{ref_key:"torusref",ref:T,position:[-100,0,0],onClick:n[0]||(n[0]=e=>_(T.value))},n[2]||(n[2]=[z("TresTorusGeometry",{args:[50,5,128,128]},null,-1),z("TresMeshBasicMaterial",{color:"orange"},null,-1)]),512),z("TresMesh",{ref_key:"boxref",ref:j,position:[100,0,0],onClick:n[1]||(n[1]=e=>_(j.value))},n[3]||(n[3]=[z("TresBoxGeometry",{args:[80,100,20]},null,-1),z("TresMeshNormalMaterial",null,null,-1)]),512)],64))}}),S=y({__name:"tagging",setup(e){const a=M({windowSize:!0,alpha:!0,antialias:!0,autoClear:!1,disableRender:!0}),s=M({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(e,t)=>{const o=P("TresCanvas");return b(),T(o,I({clearColor:"#201919","window-size":""},a),{default:j((()=>[t[0]||(t[0]=z("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,200],"look-at":[0,0,0]},null,-1)),t[1]||(t[1]=z("TresAmbientLight",{intensity:2},null,-1)),q(C(n),F(_(s)),null,16),(b(),T(k,null,{default:j((()=>[q(R)])),_:1}))])),_:1},16)}}});export{S as default};

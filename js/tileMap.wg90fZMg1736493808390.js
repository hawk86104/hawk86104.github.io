import{C as t,_ as n,cH as e}from"./three.lAfZYOpc1736493808390.js";import{P as o}from"./tweakpane.yHWGBmom1736493808390.js";import{m as r,e as s}from"./@tresjs.g7tJPOCI1736493808390.js";import{P as i,b as a,c,M as u,T as p,a as l,d as f}from"./index._OjUnv4s1736493808390.js";import{d as m,a1 as g,w as h,o as d,D as w,u as b,X as j,r as x,e as y,j as v,g as I,f as _,al as C,m as M,F as S}from"./@vue.-Mz_IXfk1736493808390.js";import{_ as z}from"./raycasterEvent.aTQQsdie1736493808390.js";import{a as B}from"./utils.Ne1xEMmm1736493808390.js";import"./@vueuse.kU-N6GoC1736493808390.js";import"./@mapbox.jorHr3lw1736493808390.js";import"./@amap.nSU5n3nL1736493808390.js";import"./three-mesh-bvh.aKnXVado1736493808390.js";import"./three-custom-shader-material.eKT8KwaV1736493808390.js";import"./@fesjs.JLOwLS8V1736493808390.js";import"./vue-router.orb3lCQB1736493808390.js";import"./lodash-es.guXTxyfJ1736493808390.js";import"./@qlin.yHhFDldE1736493808390.js";import"./pinia.HJbEB2CQ1736493808390.js";import"./vue-demi.C4xddsk91736493808390.js";import"./@floating-ui.BPbuo5Gx1736493808390.js";import"./@juggle.7yjBMqoW1736493808390.js";import"./@tweenjs.zdhk2VeU1736493808390.js";import"./utils.oZtHEYdk1736493808390.js";import"./d3-geo.EqP7gUNK1736493808390.js";import"./d3-array.AhNJy1f41736493808390.js";import"./http.hi2dykID1736493808390.js";import"./axios.Ng308AU61736493808390.js";import"./color.A3JM8j1Y1736493808390.js";import"./color-string.tu3Ticon1736493808390.js";import"./color-name.VdSkDBJb1736493808390.js";import"./simple-swizzle.sKEmlD8P1736493808390.js";import"./is-arrayish.xa5De5i31736493808390.js";import"./color-convert.CXd5SsQ11736493808390.js";import"./lodash.c76L0o-y1736493808390.js";const k=Z;!function(t,n){const e=Z,o=P();for(;;)try{if(671152===parseInt(e(265))/1+parseInt(e(324))/2+parseInt(e(301))/3+parseInt(e(283))/4+-parseInt(e(295))/5+parseInt(e(286))/6+parseInt(e(272))/7)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(282)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=Z,n=new RegExp(t(306)),e=new RegExp(t(266),"i"),o=D("init");n[t(270)](o+t(262))&&e[t(270)](o+t(317))?D():o("0")}))()}();const R=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(282)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();R(void 0,(function(){const t=Z,n=function(){const t=Z;let n;try{n=Function("return (function() "+t(284)+");")()}catch(e){n=window}return n}(),e=n[t(315)]=n[t(315)]||{},o=[t(296),t(267),t(260),t(312),t(302),t(268),t(316)];for(let r=0;r<o.length;r++){const n=R[t(287)].prototype.bind(R),s=o[r],i=e[s]||n;n[t(298)]=R[t(263)](R),n[t(276)]=i[t(276)][t(263)](i),e[s]=n}}))();const T=[k(304),k(281)];function Z(t,n){const e=P();return(Z=function(t,n){return e[t-=260]})(t,n)}function P(){const t=["minDistance","string","genContrast","rotation","apply","93644WCfAWy",'{}.constructor("return this")( )',"length","28590ssSeqV","constructor","genBright","call","source","filter","provider","coordType","isMonochrome","4779675wPnEUE","log","monochrome","__proto__","render","value","1458762nkqxxt","exception","position0","object","innerHeight","function *\\( *\\)","useStandardMaterial","bbox","Vector3","opposite","useWorker","error","dampingFactor","position","console","trace","input","counter","https://api.maptiler.com/tiles/terrain-rgb-v2/[z]/[x]/[y].webp?key=L55MtSxL94Yb4hQeWewp","set","Color","gger","mapCenter","1002436xTaEcB","genSaturation","far","action","maxZoom","info","#fff","chain","bind","wireframe","203284vkGbKV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","table","debu","test","primitive","2857085lHmGjr","camera","updateProjectionMatrix","PerspectiveCamera","toString","update"];return(P=function(){return t})()}const A=m({__name:"tileMapMesh",props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},opposite:{type:Boolean,default:!1},genBright:{default:1},genContrast:{default:1},genSaturation:{default:1},monochrome:{default:k(261)},isMonochrome:{type:Boolean,default:!1},mapCenter:{},tweenInstance:{default:null}},setup(o,{expose:f}){const m=k,j=o,{renderer:x,scene:y}=r();(new i)[m(293)]=a;const v=new c;v[m(290)]=m(319),v[m(293)]=a;const I=new u;I.source="https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}",I.showTileNo=!1,I[m(311)]=!0;const _=new p(v,I);if(_.showBoundingBox=!1,_[m(264)]=!1,_.flatShading=!1,_[m(307)]=!1,_[m(291)]={opposite:j[m(310)],monochrome:j[m(294)]?{r:.299,g:.587,b:.114}:null,genBright:j.genBright,genContrast:j[m(280)],genSaturation:j.genSaturation},j[m(297)]){let n=new t(j[m(297)]);_.filter&&(_[m(291)][m(297)]={r:n.r,g:n.g,b:n.b})}const C=new l;C[m(292)]=_,C.bbox=j[m(308)],C[m(328)]=j.maxZoom;const M=new(n[m(275)])(60,window.innerWidth/window[m(305)],1,1e8);M.up=new(n[m(309)])(0,1,0),M[m(314)].set(j.mapCenter[0],j[m(323)][2],-j.mapCenter[1]),M.lookAt(new(n[m(309)])(M[m(314)].x,0,M[m(314)].z-2e3)),C[m(273)]=M;let S=null;g((()=>{const t=m;x[t(300)]&&!S&&(S=new e(M,x[t(300)].domElement),S.enableDamping=!0,S[t(313)]=.05,S[t(278)]=600,S[t(303)][t(320)](M[t(314)].x,M[t(314)].y,M.position.z),S.target[t(320)](M[t(314)].x,0,M[t(314)].z-2e3))})),h((()=>[j.opposite,j[m(294)],j[m(297)]]),(([t,e,o])=>{const r=m;if(_[r(291)]){let s=new(n[r(321)])(o);_[r(291)][r(310)]=t,_[r(291)].monochrome=e?{r:s.r,g:s.g,b:s.b}:null}})),h((()=>[j[m(288)],j[m(280)],j.genSaturation]),(([t,n,e])=>{const o=m;_[o(291)]&&(_[o(291)][o(288)]=t,_[o(291)][o(280)]=n,_.filter[o(325)]=e)}));const{onLoop:z}=s();return z((()=>{var t;const n=m;if(x[n(300)]){null==(t=j.tweenInstance)||t[n(277)](),S&&S[n(277)](),C[n(277)]();const e=50*Math.abs(M[n(314)].y);M[n(326)]=e+5e3,M[n(274)](),x[n(300)][n(299)](y[n(300)],M)}})),f({camera:M,map:C,orbitControl:S}),(t,n)=>{const e=m;return d(),w(e(271),{object:b(C),rotation:[-Math.PI/2,0,0]},null,8,T)}}});function D(t){function n(t){const e=Z;if(typeof t===e(279))return function(t){}[e(287)]("while (true) {}")[e(282)](e(318));1!==(""+t/t)[e(285)]||t%20==0?function(){return!0}[e(287)](e(269)+e(322))[e(289)](e(327)):function(){return!1}[e(287)](e(269)+"gger")[e(282)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const F=q;function G(){const t=["length","exception","prototype","counter","isMonochrome","constructor","while (true) {}","2044662modKzb","10586gGuZMs","45122SpSqjw","238715OccUsC","debu","2548560pmBuTk","tileMapMeshRef","table","error","function *\\( *\\)","log","init","addBinding","addBlade","9zDsyGK","210fRoydC","toString","SRGBColorSpace","tileMap","滤镜颜色","orbitControl","string","opposite","饱和度","gger","monochrome","__proto__","TresCanvas","return (function() ","genSaturation","#4688b5","apply","4EcTvdj","list","nss","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","NoToneMapping","tweenInstance","trace","Vector3","7oJoSsS",'{}.constructor("return this")( )',"genBright","value","xjk","stateObject","action","牛首山","8767nPENlp","45pFZNOQ","bind","新街口","test","manual","camera","2485864JkToRN"];return(G=function(){return t})()}!function(t,n){const e=q,o=G();for(;;)try{if(179069===parseInt(e(206))/1+-parseInt(e(205))/2*(parseInt(e(190))/3)+parseInt(e(173))/4*(parseInt(e(207))/5)+-parseInt(e(204))/6*(parseInt(e(181))/7)+parseInt(e(196))/8*(parseInt(e(218))/9)+-parseInt(e(219))/10*(parseInt(e(189))/11)+parseInt(e(209))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(172)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=q,n=new RegExp(t(213)),e=new RegExp(t(176),"i"),o=O(t(215));n[t(193)](o+"chain")&&e[t(193)](o+"input")?O():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(172)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function q(t,n){const e=G();return(q=function(t,n){return e[t-=167]})(t,n)}W(void 0,(function(){const t=q;let n;try{n=Function(t(169)+t(182)+");")()}catch(r){n=window}const e=n.console=n.console||{},o=[t(214),"warn","info",t(212),t(198),t(211),t(179)];for(let s=0;s<o.length;s++){const n=W[t(202)][t(199)][t(191)](W),r=o[s],i=e[r]||n;n[t(167)]=W[t(191)](W),n[t(220)]=i[t(220)].bind(i),e[r]=n}}))();const K=m({__name:F(222),setup(t){const e=F,r=f(118.779958,32.017136),s=[r[0],r[1],5e3],i=j(),a=x({opposite:!0,genBright:1.3,genContrast:1,genSaturation:1,isMonochrome:!0,monochrome:e(171),mapCenter:s,tweenInstance:null}),c=new o({title:"参数"});c[e(216)](a,e(226),{label:"反色"}),c.addBinding(a,e(183),{label:"高亮",min:.1,max:3,step:.1}),c[e(216)](a,"genContrast",{label:"对比度",min:.1,max:3,step:.1}),c.addBinding(a,e(170),{label:e(227),min:.1,max:3,step:.1}),c[e(216)](a,e(201),{label:"单色滤镜"}),c[e(216)](a,e(229),{label:e(223)});const u={at:f(118.7425,31.9998),xjk:f(118.7842,32.0418),nss:f(118.7503,31.9082)};c[e(217)]({view:e(174),label:"飞去",options:[{text:"奥体中心",value:"at"},{text:e(192),value:e(185)},{text:e(188),value:e(175)}],value:"at"}).on("change",(t=>{const o=e,r=new(n[o(180)])(u[t.value][0],2e3,-u[t[o(184)]][1]);a[o(178)]=B(i[o(184)][o(195)],r,i[o(184)][o(224)],[0,-300],4e3)}));const p=x({clearColor:"#201919",antialias:!0,logarithmicDepthBuffer:!0,renderMode:e(194),outputColorSpace:n[e(221)],toneMapping:n[e(177)]});return setTimeout((()=>{const t=e,o=u.at,r=new(n[t(180)])(o[0],1600,-o[1]);a.tweenInstance=B(i[t(184)][t(195)],r,i[t(184)][t(224)],[-2e3,-2e3],2e3)}),1e3),(t,n)=>{const o=e,r=y(o(168));return d(),w(S,null,[v(r,M(p,{"window-size":""}),{default:I((()=>[(d(),_(C,null,{default:I((()=>[v(A,M(a,{ref_key:o(210),ref:i,bbox:[80,16,128,50]}),null,16)])),_:1}))])),_:1},16),v(z,{tileMapRef:i[o(184)]},null,8,["tileMapRef"])],64)}}});function O(t){function n(t){const e=q;if(typeof t===e(225))return function(t){}[e(202)](e(203))[e(172)](e(200));1!==(""+t/t)[e(197)]||t%20==0?function(){return!0}[e(202)](e(208)+e(228)).call(e(187)):function(){return!1}[e(202)](e(208)+e(228))[e(172)](e(186)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{K as default};

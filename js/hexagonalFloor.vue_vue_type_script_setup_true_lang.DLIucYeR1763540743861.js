import{az as e,n as a,V as o,E as t,dp as s,du as r}from"./three.rXKzP9fQ1763540743861.js";import{F as n,n as i,c as l}from"./@tresjs.BCHtwiaC1763540743861.js";import{g as m}from"./gsap.CY1N3EIL1763540743861.js";import{d as c,w as p,H as d,o as f,I as u,u as y}from"./@vue.Co_gxueH1763540743861.js";const v=["object"],h=c({__name:"hexagonalFloor",props:{floorColor:{default:"#ff0000"},floorMetalness:{default:.8},floorRoughness:{default:.2},floorEnvMapIntensity:{default:2.5},sideColor:{default:"#ffffff"},sideOpacity:{default:.9},speed:{default:.3}},setup(c){const{renderer:h,scene:g}=n(),M=c,{state:w}=i("./plugins/floor/image/concrete_wet_floor_basecolor.jpg");p(w,a=>{a&&(a.wrapS=e,a.wrapT=e,a.repeat.set(10,10))});const{state:x}=l("https://opensource.cdn.icegl.cn/model/floor/baseModelI.glb",{draco:!0,decoderPath:"./draco/"}),j=[],I=m.timeline();p(()=>x.value,e=>{if(!e.scene)return;e.scene.traverse(e=>{if(e instanceof a){const a=e.position.clone(),s=e.rotation.clone(),r=Math.random()-.5,n=new o(a.x,a.y+r,a.z),i=Math.PI/12,l=new t(s.x+(Math.random()-.5)*i,s.y+(Math.random()-.5)*i,s.z);j.push({mesh:e,originalPosition:a,scatteredPosition:n,originalRotation:s,scatteredRotation:l}),e.name.includes("_")?(e.material.emissiveIntensity=2,e.material.metalness=1,e.material.roughness=0,e.material.transparent=!0):e.material.map=w.value,e.material.needsUpdate=!0}}),j.forEach(({mesh:e,scatteredPosition:a,scatteredRotation:o},t)=>{I.to(e.position,{x:a.x,y:a.y,z:a.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0),I.to(e.rotation,{x:o.x,y:o.y,z:o.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0)}),_()});const _=()=>{const e=new s(h),o=new r,t=e.fromScene(o).texture;g.value.environment=t,x.value.scene.traverse(e=>{e instanceof a&&e.material&&(e.material.envMap=t,e.material.needsUpdate=!0)}),o.dispose(),z(M.sideColor,M.floorColor,M.sideOpacity,M.floorMetalness,M.floorRoughness,M.floorEnvMapIntensity)},z=(e,o,t,s,r,n)=>{x.value?.scene&&x.value.scene.traverse(i=>{i instanceof a&&i.material&&(i.name.includes("_")?(i.material.emissive.set(e),i.material.opacity=t):(i.material.color.set(o),i.material.metalness=s,i.material.roughness=r,i.material.envMapIntensity=n))})};return p(()=>[M.sideColor,M.floorColor,M.sideOpacity,M.floorMetalness,M.floorRoughness,M.floorEnvMapIntensity],([e,a,o,t,s,r])=>{z(e,a,o,t,s,r)}),p(()=>[M.speed],([e])=>{I.timeScale(e)},{immediate:!0}),(e,a)=>(f(),d("TresGroup",null,[y(x)?(f(),d("primitive",{key:0,object:y(x)?.scene,position:[0,-.1,0]},null,8,v)):u("",!0)]))}});export{h as _};

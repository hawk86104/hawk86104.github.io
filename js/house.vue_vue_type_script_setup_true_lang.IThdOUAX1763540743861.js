import{F as e,H as t,_ as o}from"./@tresjs.BCHtwiaC1763540743861.js";import{i as s}from"./index.Crdf3MNx1763540743861.js";import{ae as a,b8 as i,l as n,bf as r,bg as u,bc as l,V as p}from"./three.rXKzP9fQ1763540743861.js";import{_}from"./positionWave.vue_vue_type_script_setup_true_lang.CMM79r2s1763540743861.js";import{_ as m}from"./computer.vue_vue_type_script_setup_true_lang.DfkDHbij1763540743861.js";import{_ as c}from"./cybertruck.vue_vue_type_script_setup_true_lang.BtyCfGuU1763540743861.js";import{_ as v}from"./background1.vue_vue_type_script_setup_true_lang.UmvCbnJ51763540743861.js";import{_ as f}from"./background2.vue_vue_type_script_setup_true_lang.BZqkq6xq1763540743861.js";import{_ as g}from"./background3.vue_vue_type_script_setup_true_lang.B9kFllCM1763540743861.js";import{_ as d}from"./background4.vue_vue_type_script_setup_true_lang.CSyKuRgT1763540743861.js";import{_ as y}from"./chinaFlag.vue_vue_type_script_setup_true_lang.3xLobw_U1763540743861.js";import{_ as w}from"./videoIce.vue_vue_type_script_setup_true_lang.BL6sooSR1763540743861.js";import{_ as b}from"./videoCar.vue_vue_type_script_setup_true_lang.CAYTfGn-1763540743861.js";import{_ as h}from"./videoCan.vue_vue_type_script_setup_true_lang.IF7vWl_31763540743861.js";import{_ as j}from"./clock.vue_vue_type_script_setup_true_lang.ILHsqdKs1763540743861.js";import{_ as z}from"./website.vue_vue_type_script_setup_true_lang.DiX_VpSX1763540743861.js";import{_ as k}from"./box1.vue_vue_type_script_setup_true_lang.Ctl5kn2D1763540743861.js";import{_ as x}from"./ironman.vue_vue_type_script_setup_true_lang.nZt7kcir1763540743861.js";import{_ as S}from"./streamLine.vue_vue_type_script_setup_true_lang.BEM_3vUG1763540743861.js";import{_ as L}from"./firefly.vue_vue_type_script_setup_true_lang.CAnywJwy1763540743861.js";import{H as B}from"./HolographicMaterial._xGBXFix1763540743861.js";import A from"./textMessage.Dy4dWqjD1763540743861.js";import{_ as C}from"./digitalGround.vue_vue_type_script_setup_true_lang.CuICn5MU1763540743861.js";import{d as M,a as I,r as P,q as W,a6 as D,w as H,H as O,o as R,F as T,J as E,h as F,b as N,u as V,ac as q,ao as G,ad as J,e as X}from"./@vue.Co_gxueH1763540743861.js";const Y=["object"],Z=M({__name:"house",setup(M){const{scene:Z,camera:$,controls:K}=e();let Q=I(!1);const U=I(),ee=0,te=0,oe=15,se=1.3,ae="#e05b0f";let ie=s.getItem("house").scene,ne=s.getItem("house").nodes;ie.scale.set(50,50,50),ie.updateMatrixWorld(!0),ie.traverse(e=>{e.isMesh&&(e.geometry.computeBoundingBox(),e.geometry.computeBoundingSphere())});const re=new B({blendMode:i,hologramBrightness:2.5,side:a});re.uniforms.fresnelAmount.value=ee,re.uniforms.scanlineSize.value=oe,re.uniforms.signalSpeed.value=se,re.uniforms.fresnelOpacity.value=te,re.uniforms.hologramColor.value=new n(ae),re.uniforms.enableBlinking.value=!1,re.depthTest=!0;const ue=ne.pCube284_lambert1_0;ue.material=re.clone(),ue.material.uniforms.hologramColor.value=new n("#e00f0f"),ue.material.uniforms.fresnelOpacity.value=.1,ue.material.uniforms.fresnelAmount.value=1,ue.material.uniforms.scanlineSize.value=2.1,ue.material.uniforms.signalSpeed.value=.4;const le=ne.pCube289_lambert1_0;le.material=re.clone(),le.material.uniforms.hologramColor.value=new n("#006cf9"),le.material.uniforms.fresnelAmount.value=1,le.material.uniforms.scanlineSize.value=2.1,le.material.uniforms.signalSpeed.value=.4;const pe=P({color:"#bd01ff",radius:2,speed:50,tubularSegments:64,radialSegments:6,closed:!1,clockwise:!1,fewNum:50,linesList:[[0,0,0],[0,0,0]]}),_e=P({color:"#3e65ab",speed:20,size:1e3}),me=s.getItem("zoulu");let ce=s.getItem("robotnew").scene;const ve=s.getItem("robotnew").animations,{actions:fe}=t(ve,ce),ge=new r;$.value.add(ge);const de=new u(ge);let ye=!1,we=function(e){"zoulu"==e||"pao"==e?(de.setBuffer(me),de.setLoop(!0),de.setVolume(1),de.play()):"zhanli"==e&&de.pause()},be=null,he=!1,je=function(e){console.log("positionpositionposition",e);new p(206,0,289).distanceTo(e)<100&&(Q.value=!0),Z.value.getObjectByName("wave").position.set(e.x,e.y,e.z),Z.value.getObjectByName("tooltipRef").position.set(e.x,90,e.z),Z.value.children.forEach(t=>{"TresPointLight11"==t.name&&t.position.set(e.x,80,e.z),"TresPointLight2"==t.name&&t.position.set(e.x,10,e.z),"aura1"==t.name&&t.position.set(e.x,10,e.z),"aura2"==t.name&&t.position.set(e.x,2,e.z)})},ze=function(e){const t=e.clone(),o=ce.position.clone().add(t.multiplyScalar(150));$.value.position.set(o.x,150,o.z),$.value.lookAt(ce.position.x,ce.position.y+80,ce.position.z),K.value.target.set(ce.position.x,ce.position.y+80,ce.position.z),K.value.update()};const ke={w:!1,a:!1,s:!1,d:!1};document.addEventListener("keydown",e=>{ye=!0,e.key in ke&&(ke[e.key]=!0)}),document.addEventListener("keyup",e=>{ye=!1,e.key in ke&&(ke[e.key]=!1)});const xe=e=>{},Se=new l([new p(1e3,1e3,1e3),new p(1e3,1200,-1e3),new p(-1e3,1100,-1e3),new p(-1e3,1100,1e3),new p(450,150,850)]);let Le=!0,Be=0;W(()=>{}),D(()=>{}),H(Q,(e,t)=>{!0===e&&Z.value.traverse(e=>{e.isLight&&(e.isAmbientLight?e.intensity=.8:e.isDirectionalLight?e.intensity=1:e.isPointLight&&(e.intensity=500))})});const{onBeforeRender:Ae}=o();return Ae(e=>{if(ue.material.update(),le.material.update(),function(){let e=1;const t=new p,o=new p,s=$.value.getWorldDirection(t).normalize(),a=s.clone().negate();$.value.getWorldDirection(o).normalize().cross($.value.up);let i=new p;if(ye){if(ke.w){i.set(a.x,0,a.z),i.normalize();const t=Math.atan2(i.x,i.z);null===be&&(be=Date.now()),Date.now()-be>=2e3&&!he?(he=!0,e=4,ce.rotation.y=t,ce.position.x+=s.x*e,ce.position.z+=s.z*e,fe.run.timeScale=12,fe.run.play(),we("pao"),console.log("切换到奔跑状态")):(e=1,he=!1,ce.rotation.y=t,ce.position.x+=s.x*e,ce.position.z+=s.z*e,fe.walk.timeScale=12,fe.walk.play(),we("zoulu")),je(ce.position),ze(i)}}else fe.run.stop(),fe.walk.stop(),fe.turn.stop(),fe.stand.play(),we("zhanli")}(e.elapsed),Le){Be+=e.delta/1,Be>1&&(Be=1,Le=!1,K.value&&(K.value.enabled=!0),$.value.position.copy(new p(450,150,850)),$.value.lookAt(new p(350,80,350)));const t=Se.getPointAt(Be);$.value.position.copy(t),$.value.lookAt(new p(0,0,0))}}),(e,t)=>(R(),O(T,null,[E("primitive",{object:V(ie),"cast-shadow":!0,onClick:xe},null,8,Y),F(m),F(_,{ref:"tmRefPositionWave"},null,512),F(v),F(f),F(g),F(d),F(j),F(z),F(k),F(x),F(c),F(b),F(h),F(w),F(S,q(G(pe)),null,16),F(L,{position:[0,20,0]}),(R(),N(J,null,{default:X(()=>[F(V(C),q(G(_e)),null,16)]),_:1})),F(A,{ref_key:"childRef",ref:U},null,512),F(y,{img:"./plugins/communityMetaverse/image/flag.png",position:[195,160,-305]}),F(y,{img:"./plugins/communityMetaverse/image/iceflag.png",position:[-235,160,-305]})],64))}});export{Z as _};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.ydzjTfFV1733214749102.js";import{B as i,V as s,co as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.aWgA1gea1733214749102.js";import{e as l,f as d,F as p}from"./@tresjs.lftldzUe1733214749102.js";import{c as m}from"./simplex-noise.Yx8GBgKo1733214749102.js";import{d as f,a3 as g,o as y,D as b,u as v,r as S,j as w,g as x,m as _,F as I}from"./@vue.-THQH3GC1733214749102.js";import"./index.71UrRKXp1733214749102.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.me4twjRF1733214749102.js";import"./three-custom-shader-material.uIcenEYv1733214749102.js";import"./@vueuse.xtU2GBMi1733214749102.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.V1EyDJrW1733214749102.js";import"./all.three.xz7w2iRS1733214749102.js";import"./oimophysics.x0jH7fze1733214749102.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.AFROaWQU1733214749102.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.anW_P6yc1733214749102.js";import"./index.lVnY7P4X1733214749102.js";import"./three-stdlib.kzq9IQVk1733214749102.js";import"./@pmndrs.EXEjBNTl1733214749102.js";import"./object-hash.qVCBUHAu1733214749102.js";import"./@amap.ICsgtrgy1733214749102.js";import"./jszip._enF9xwA1733214749102.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.omPtp8bl1733214749102.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.WU7Z9XmE1733214749102.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.5F-Vp0T91733214749102.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.pqmSga7w1733214749102.js";function T(t,i){const s=j();return(T=function(t,i){return s[t-=498]})(t,i)}const M=T;!function(t,i){const s=T,n=j();for(;;)try{if(348616===-parseInt(s(615))/1*(parseInt(s(627))/2)+parseInt(s(651))/3*(-parseInt(s(665))/4)+-parseInt(s(544))/5*(-parseInt(s(645))/6)+parseInt(s(595))/7+-parseInt(s(612))/8+parseInt(s(569))/9*(-parseInt(s(543))/10)+-parseInt(s(505))/11*(-parseInt(s(519))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(548)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){A(this,(function(){const t=T,i=new RegExp(t(539)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=F("init");i[t(601)](n+t(538))&&s[t(601)](n+"input")?F():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(548)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function j(){const t=["pos1","needsUpdate","subrayDutyCycle","console","add","linPos1","normalize","isInitialSegment","maxSubrayRecursion","cross1","middleLinPos","update","ramification","array","gger","newPos","while (true) {}","createSubray","max","clone","1652266QKqkbH","warn","type","createSegment","subrays","up0","test","radius1","forwards","push","length","createPrismFaces","createTriangleVerticesWithUVs","beginVanishingTime","index","timeFraction","iteration","2547056MDuxEv","isStatic","maxRaySegments","1NjSdzi","call","currentCreateTriangleVertices","raySegments","positionAttribute","roughness","initSubray","subrayProbability","straightness","time","set","radius1Factor","916714OsoAtZ","debu","__proto__","simplexX","ceil",'{}.constructor("return this")( )',"string","vanishingTimeFactor","numSubrays","seed","visible","createRandomGenerator","SIN30DEG","addNewSubray","simplexY","currentSeed","sub","destOffset","6ZbXHzC","createDefaultSubrayCreationCallbacks","RAY_STEADY","side","onSubrayCreation","sin","3dOyQHk","seedGenerator","randomGenerator","subVectors","createMesh","maxSubrays","counter","count","vPos","birthTime","uvsAttribute","cos","fractalRayRecursive","RAY_INITIALIZED","2653672rCxGbx","drawRange","return (function() ","subrayPeriod","fillMesh","RAY_EXTINGUISHED","minRadius","LightningStrike","generateUVs","forwardsFill","copy","currentSegmentIndex","4708JYNYsC","currentVertex","endPropagationTime","recursion","radius0Factor","floor","linPos0","crossVectors","currentIndex","init","uvs","positionVariationFactor","setSeed","timeScale","42528XXvnAj","pos0","position","noiseSeed","copyParameters","pow","currentCoordinate","maxIterations","updateMesh","multiplyScalar","subrayCylinderPosition","sourceOffset","setIndex","COS30DEG","down","getNewSegment","createTriangleVerticesWithoutUVs","indices","currentSubray","chain","function *\\( *\\)","prototype","random","up1","2550iPOtMt","559465WOUqIf","deathTime","RAY_UNBORN","simplexZ","apply","rayParameters","recursionProbability","usage","setAttribute","onDecideSubrayCreation","exception","bind","createPrism","info","fraction0","fractalRay","stateObject","constructor","currentUVCoordinate","trace","vertices","middlePos","propagationTimeFactor","lerp","RAY_VANISHING","2682SxoZmj","fraction1","isEternal","state","currentSegmentCallback","radius0"];return(j=function(){return t})()}R(void 0,(function(){const t=T,i=function(){const t=T;let i;try{i=Function(t(667)+t(632)+");")()}catch(s){i=window}return i}(),s=i[t(578)]=i[t(578)]||{},n=["log",t(596),t(557),"error",t(554),"table",t(563)];for(let e=0;e<n[t(605)];e++){const i=R.constructor[t(540)][t(555)](R),r=n[e],o=s[r]||i;i[t(629)]=R[t(555)](R),i.toString=o.toString[t(555)](o),s[r]=i}}))();class V extends i{constructor(t={}){const i=T;super(),this.isLightningStrike=!0,this[i(597)]=i(500),this[i(514)](V[i(523)](t,t)),this.createMesh()}static[M(638)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(541)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(642)]=(n[e(642)]+1)%i,r},getSeed:function(){return n[t(642)]/i},setSeed:function(s){n[t(642)]=Math.floor(s*i)%i}};return n}static[M(523)](t={},i={}){const n=M,e=function(s){return i===t?s:s[T(594)]()};return t[n(530)]=void 0!==i[n(530)]?e(i[n(530)]):new s(0,100,0),t[n(644)]=void 0!==i.destOffset?e(i.destOffset):new s(0,0,0),t[n(518)]=void 0!==i[n(518)]?i[n(518)]:1,t[n(620)]=void 0!==i[n(620)]?i[n(620)]:.9,t[n(623)]=void 0!==i[n(623)]?i[n(623)]:.7,t[n(600)]=void 0!==i.up0?e(i[n(600)]):new s(0,0,1),t.up1=void 0!==i[n(542)]?e(i[n(542)]):new s(0,0,1),t.radius0=void 0!==i[n(574)]?i.radius0:1,t[n(602)]=void 0!==i.radius1?i.radius1:1,t[n(509)]=void 0!==i[n(509)]?i.radius0Factor:.5,t[n(626)]=void 0!==i[n(626)]?i[n(626)]:.2,t[n(499)]=void 0!==i.minRadius?i.minRadius:.2,t[n(571)]=void 0!==i[n(571)]?i[n(571)]:void 0===i[n(660)]||void 0===i.deathTime,t.birthTime=i[n(660)],t[n(545)]=i.deathTime,t[n(566)]=void 0!==i.propagationTimeFactor?i[n(566)]:.1,t.vanishingTimeFactor=void 0!==i.vanishingTimeFactor?i[n(634)]:.9,t.subrayPeriod=void 0!==i.subrayPeriod?i[n(668)]:4,t[n(577)]=void 0!==i[n(577)]?i[n(577)]:.6,t[n(526)]=void 0!==i[n(526)]?i[n(526)]:9,t.isStatic=void 0!==i.isStatic&&i[n(613)],t[n(587)]=void 0!==i.ramification?i.ramification:5,t[n(583)]=void 0!==i[n(583)]?i[n(583)]:3,t[n(550)]=void 0!==i[n(550)]?i[n(550)]:.6,t[n(501)]=void 0!==i[n(501)]&&i.generateUVs,t[n(653)]=i[n(653)],t[n(522)]=i.noiseSeed,t[n(553)]=i[n(553)],t[n(649)]=i[n(649)],t}[M(586)](t){const i=M;this[i(613)]||(this[i(549)][i(571)]||this[i(549)][i(660)]<=t&&t<=this[i(549)][i(545)]?(this[i(527)](t),t<this[i(599)][0][i(507)]?this[i(572)]=V.RAY_PROPAGATING:t>this.subrays[0][i(608)]?this[i(572)]=V.RAY_VANISHING:this[i(572)]=V[i(647)],this[i(637)]=!0):(this[i(637)]=!1,t<this[i(549)].birthTime?this[i(572)]=V[i(546)]:this[i(572)]=V[i(498)]))}[M(514)](t){const i=M;this[i(549)]=t,this[i(526)]=void 0!==t[i(526)]?Math[i(510)](t.maxIterations):9,t[i(526)]=this[i(526)],this[i(613)]=void 0!==t[i(613)]&&t.isStatic,t[i(613)]=this.isStatic,this[i(587)]=void 0!==t[i(587)]?Math[i(510)](t[i(587)]):5,t[i(587)]=this[i(587)],this.maxSubrayRecursion=void 0!==t[i(583)]?Math[i(510)](t[i(583)]):3,t.maxSubrayRecursion=this[i(583)],this.recursionProbability=void 0!==t[i(550)]?t.recursionProbability:.6,t[i(550)]=this[i(550)],this[i(501)]=void 0!==t[i(501)]&&t[i(501)],t[i(501)]=this.generateUVs,void 0!==t[i(653)]?(this[i(653)]=t.randomGenerator,this[i(652)]=t[i(653)],void 0!==t[i(522)]&&this.seedGenerator[i(517)](t[i(522)])):(this.randomGenerator=V[i(638)](),this[i(652)]=Math),void 0!==t[i(553)]?this[i(553)]=t[i(553)]:(this[i(646)](),void 0!==t[i(649)]&&(this.onSubrayCreation=t[i(649)])),this[i(572)]=V.RAY_INITIALIZED,this[i(656)]=Math[i(631)](1+Math[i(524)](this.ramification,Math[i(593)](0,this[i(583)]-1))),t[i(656)]=this[i(656)],this[i(614)]=2*(1<<this[i(526)]),this[i(599)]=[];for(let s=0;s<this[i(656)];s++)this.subrays[i(604)](this[i(592)]());this.raySegments=[];for(let s=0;s<this.maxRaySegments;s++)this[i(618)][i(604)](this[i(598)]());this[i(624)]=0,this[i(610)]=0,this[i(573)]=null,this[i(617)]=this[i(501)]?this[i(607)]:this.createTriangleVerticesWithoutUVs,this[i(635)]=0,this[i(537)]=null,this[i(504)]=0,this.isInitialSegment=!1,this[i(622)]=0,this[i(506)]=0,this.currentIndex=0,this[i(525)]=0,this[i(562)]=0,this[i(564)]=null,this[i(515)]=null,this[i(536)]=null,this.positionAttribute=null,this[i(661)]=null,this[i(630)]=m(this[i(652)][i(541)]),this[i(641)]=m(this[i(652)][i(541)]),this[i(547)]=m(this.seedGenerator[i(541)]),this[i(603)]=new s,this[i(502)]=new s,this[i(648)]=new s,this.down=new s,this[i(565)]=new s,this[i(585)]=new s,this[i(590)]=new s,this.vPos=new s,this[i(584)]=new s}[M(655)](){const t=M,i=1<<this[t(526)],s=3*(i+1)*this[t(656)],o=18*i*this[t(656)];this[t(564)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(2*s)),this[t(669)](0),this[t(531)](new n(this[t(536)],1)),this[t(619)]=new e(this[t(564)],3),this.setAttribute(t(521),this[t(619)]),this.generateUVs&&(this[t(661)]=new e(new Float32Array(this[t(515)]),2),this[t(552)]("uv",this.uvsAttribute)),!this[t(613)]&&(this.index.usage=r,this[t(619)][t(551)]=r,this.generateUVs&&(this[t(661)][t(551)]=r)),this[t(564)]=this.positionAttribute[t(588)],this.indices=this[t(609)][t(588)],this.generateUVs&&(this[t(515)]=this[t(661)][t(588)])}[M(527)](t){const i=M;this[i(669)](t),this[i(666)][i(658)]=this.currentIndex,this.index[i(576)]=!0,this[i(619)][i(576)]=!0,this[i(501)]&&(this[i(661)][i(576)]=!0)}[M(669)](t){const i=M,s=this;this.currentVertex=0,this[i(513)]=0,this[i(525)]=0,this[i(562)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(537)];t<r[e(660)]||(this[e(549)][e(571)]&&0==s[e(537)].recursion?(s[e(556)](n),s[e(553)](n,s)):t<r.endPropagationTime?s[e(610)]>=n[e(558)]*r[e(566)]&&(s[e(556)](n),s[e(553)](n,s)):t<r[e(608)]?(s[e(556)](n),s[e(553)](n,s)):(s[e(610)]<=r[e(634)]+n[e(570)]*(1-r[e(634)])&&s[e(556)](n),s.onDecideSubrayCreation(n,s)))}))}addNewSubray(){const t=M;return this[t(599)][this[t(635)]++]}[M(621)](t,i){const s=M;t[s(520)].copy(i[s(530)]),t[s(575)][s(503)](i[s(644)]),t[s(600)].copy(i[s(600)]),t[s(542)][s(503)](i.up1),t[s(574)]=i[s(574)],t[s(602)]=i.radius1,t[s(660)]=i.birthTime,t.deathTime=i[s(545)],t[s(518)]=i[s(518)],t[s(620)]=i[s(620)],t[s(623)]=i[s(623)],t.propagationTimeFactor=i.propagationTimeFactor,t.vanishingTimeFactor=i[s(634)],t[s(526)]=this[s(526)],t[s(636)]=void 0!==i[s(522)]?i.noiseSeed:0,t[s(508)]=0}[M(559)](t,i){const s=M;this[s(624)]=t,this[s(573)]=i,this.numSubrays=0,this.initSubray(this[s(640)](),this[s(549)]);for(let n=0;n<this[s(635)];n++){const i=this[s(599)][n];this[s(537)]=i,this[s(653)].setSeed(i[s(636)]),i.endPropagationTime=o[s(567)](i.birthTime,i.deathTime,i[s(566)]),i.beginVanishingTime=o[s(567)](i[s(545)],i[s(660)],1-i[s(634)]);const e=this[s(653)][s(541)];i.linPos0[s(625)](e(),e(),e()).multiplyScalar(1e3),i[s(580)][s(625)](e(),e(),e()).multiplyScalar(1e3),this.timeFraction=(t-i.birthTime)/(i[s(545)]-i[s(660)]),this.currentSegmentIndex=0,this[s(582)]=!0;const r=this[s(534)]();r.iteration=0,r[s(520)][s(503)](i[s(520)]),r[s(575)].copy(i[s(575)]),r[s(511)].copy(i[s(511)]),r[s(580)][s(503)](i[s(580)]),r[s(600)][s(503)](i[s(600)]),r[s(542)].copy(i[s(542)]),r[s(574)]=i[s(574)],r[s(602)]=i[s(602)],r[s(558)]=0,r[s(570)]=1,r.positionVariationFactor=1-i[s(623)],this[s(622)]=this[s(587)]*Math.pow(this[s(550)],i[s(508)])/(1<<i[s(526)]),this[s(663)](r)}this[s(573)]=null,this[s(537)]=null}[M(663)](t){const i=M;if(t[i(611)]>=this.currentSubray.maxIterations)return void this[i(573)](t);this[i(603)].subVectors(t[i(575)],t[i(520)]);let s=this[i(603)][i(605)]();s<1e-6&&(this[i(603)].set(0,0,.01),s=this.forwards[i(605)]());const n=.5*(t[i(574)]+t[i(602)]),e=.5*(t[i(558)]+t[i(570)]),r=this.time*this[i(537)][i(518)]*Math[i(524)](2,t[i(611)]);this[i(565)].lerpVectors(t[i(520)],t[i(575)],.5),this[i(585)].lerpVectors(t[i(511)],t[i(580)],.5);const o=this[i(585)];this[i(590)][i(625)](this.simplexX(o.x,o.y,o.z,r),this[i(641)](o.x,o.y,o.z,r),this[i(547)](o.x,o.y,o.z,r)),this[i(590)][i(528)](t[i(516)]*s),this.newPos[i(579)](this.middlePos);const a=this.getNewSegment();a[i(520)].copy(t[i(520)]),a[i(575)][i(503)](this[i(590)]),a[i(511)][i(503)](t[i(511)]),a[i(580)][i(503)](this[i(585)]),a[i(600)][i(503)](t[i(600)]),a[i(542)][i(503)](t[i(542)]),a[i(574)]=t[i(574)],a[i(602)]=n,a[i(558)]=t[i(558)],a.fraction1=e,a[i(516)]=t[i(516)]*this.currentSubray[i(620)],a[i(611)]=t[i(611)]+1;const h=this[i(534)]();h[i(520)][i(503)](this[i(590)]),h[i(575)].copy(t.pos1),h[i(511)].copy(this[i(585)]),h.linPos1[i(503)](t[i(580)]),this[i(584)][i(512)](t[i(600)],this[i(603)].normalize()),h[i(600)].crossVectors(this[i(603)],this.cross1).normalize(),h[i(542)][i(503)](t.up1),h[i(574)]=n,h[i(602)]=t[i(602)],h[i(558)]=e,h[i(570)]=t[i(570)],h[i(516)]=t[i(516)]*this[i(537)][i(620)],h[i(611)]=t[i(611)]+1,this[i(663)](a),this[i(663)](h)}[M(556)](t){const i=M;this[i(502)].subVectors(t[i(575)],t[i(520)]).normalize(),this[i(582)]&&(this[i(617)](t.pos0,t.up0,this.forwardsFill,t[i(574)],0),this.isInitialSegment=!1),this[i(617)](t[i(575)],t[i(600)],this.forwardsFill,t[i(602)],t[i(570)]),this[i(606)]()}[M(535)](t,i,s,n){const e=M;this.side[e(512)](i,s)[e(528)](n*V.COS30DEG),this[e(533)][e(503)](i)[e(528)](-n*V[e(639)]);const r=this[e(659)],o=this[e(564)];r[e(503)](t).sub(this[e(648)])[e(579)](this.down),o[this[e(525)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(525)]++]=r.z,r[e(503)](t).add(this[e(648)])[e(579)](this[e(533)]),o[this[e(525)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(525)]++]=r.z,r[e(503)](i).multiplyScalar(n).add(t),o[this[e(525)]++]=r.x,o[this[e(525)]++]=r.y,o[this[e(525)]++]=r.z,this[e(506)]+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=M;this[r(648)][r(512)](i,s)[r(528)](n*V[r(532)]),this.down[r(503)](i)[r(528)](-n*V[r(639)]);const o=this[r(659)],a=this.vertices,h=this[r(515)];o[r(503)](t)[r(643)](this[r(648)])[r(579)](this[r(533)]),a[this[r(525)]++]=o.x,a[this[r(525)]++]=o.y,a[this[r(525)]++]=o.z,h[this[r(562)]++]=e,h[this[r(562)]++]=0,o[r(503)](t).add(this[r(648)]).add(this[r(533)]),a[this.currentCoordinate++]=o.x,a[this[r(525)]++]=o.y,a[this[r(525)]++]=o.z,h[this[r(562)]++]=e,h[this[r(562)]++]=.5,o[r(503)](i)[r(528)](n).add(t),a[this[r(525)]++]=o.x,a[this[r(525)]++]=o.y,a[this[r(525)]++]=o.z,h[this[r(562)]++]=e,h[this[r(562)]++]=1,this[r(506)]+=3}createPrismFaces(t){const i=M,s=this[i(536)];t=this[i(506)]-6,s[this.currentIndex++]=t+1,s[this[i(513)]++]=t+2,s[this[i(513)]++]=t+5,s[this[i(513)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(513)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(513)]++]=t+1,s[this[i(513)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(513)]++]=t+4,s[this[i(513)]++]=t+3,s[this[i(513)]++]=t+2,s[this[i(513)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(513)]++]=t+2,s[this[i(513)]++]=t+3,s[this[i(513)]++]=t+5}[M(646)](){const t=M,i=this[t(653)].random;this[t(553)]=function(s,n){const e=t,r=n[e(537)],a=n[e(549)][e(668)],h=n[e(549)][e(577)],c=n[e(549)][e(571)]&&0==r[e(508)]?-i()*a:o[e(567)](r.birthTime,r[e(507)],s[e(558)])-i()*a,u=n[e(624)]-c,l=Math[e(510)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(622)]),r.recursion<n[e(583)]&&n[e(635)]<n[e(656)]&&i()<p){const t=n[e(640)](),o=n[e(653)].getSeed();t[e(636)]=d,n.randomGenerator[e(517)](d),t.recursion=r.recursion+1,t[e(526)]=Math[e(593)](1,r[e(526)]-1),t.linPos0[e(625)](i(),i(),i())[e(528)](1e3),t[e(580)].set(i(),i(),i())[e(528)](1e3),t[e(600)][e(503)](r[e(600)]),t[e(542)].copy(r.up1),t.radius0=s.radius0*n[e(549)][e(509)],t[e(602)]=Math.min(n[e(549)][e(499)],s[e(602)]*n[e(549)][e(626)]),t[e(660)]=c+l*a,t[e(545)]=t.birthTime+a*h,!n[e(549)][e(571)]&&0==r[e(508)]&&(t.birthTime=Math[e(593)](t.birthTime,r[e(660)]),t[e(545)]=Math.min(t[e(545)],r[e(545)])),t[e(518)]=2*r[e(518)],t[e(620)]=r[e(620)],t[e(623)]=r.straightness,t[e(566)]=r[e(566)],t[e(634)]=r.vanishingTimeFactor,n[e(649)](s,r,t,n),n[e(653)].setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(649)]=function(i,s,n,e){e[t(529)](i,s,n,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const d=t;h.pos0[d(503)](s[d(520)]),n[d(654)](o[d(575)],o[d(520)]),e.copy(n)[d(581)](),n.multiplyScalar(s[d(558)]+(1-s[d(558)])*(i()*c));const p=n[d(605)]();r[d(512)](o.up0,e);const m=2*Math.PI*i();r[d(528)](Math.cos(m)),a[d(503)](o[d(600)])[d(528)](Math[d(650)](m)),h[d(575)].copy(r)[d(579)](a)[d(528)](p*u*(l+i()*(1-l)))[d(579)](n)[d(579)](o[d(520)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const d=t;h[d(520)][d(503)](s.pos0),n[d(654)](o[d(575)],o[d(520)]),e[d(503)](n)[d(581)](),n.multiplyScalar(s[d(558)]+(1-s[d(558)])*((2*i()-1)*c));const p=n[d(605)]();r[d(512)](o[d(600)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[d(662)](m)),a[d(503)](o[d(600)])[d(528)](Math.sin(m)),h.pos1.copy(r).add(a).multiplyScalar(p*u*(l+i()*(1-l)))[d(579)](n)[d(579)](o[d(520)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(598)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(618)][this[t(504)]++]}copy(t){const i=M;return super[i(503)](t),this[i(514)](V[i(523)]({},t.rayParameters)),this}[M(594)](){const t=M;return new(this[t(561)])(V[t(523)]({},this[t(549)]))}}function F(t){function i(t){const s=T;if(typeof t===s(633))return function(t){}[s(561)](s(591)).apply(s(657));1!==(""+t/t).length||t%20==0?function(){return!0}[s(561)](s(628)+s(589))[s(616)]("action"):function(){return!1}[s(561)](s(628)+s(589))[s(548)](s(560)),i(++t)}try{if(t)return i;i(0)}catch(s){}}V[M(664)]=0,V[M(546)]=1,V.RAY_PROPAGATING=2,V[M(647)]=3,V[M(568)]=4,V[M(498)]=5,V[M(532)]=Math.cos(30*Math.PI/180),V.SIN30DEG=Math.sin(30*Math.PI/180);const z=L;!function(t,i){const s=L,n=D();for(;;)try{if(491307===-parseInt(s(462))/1*(-parseInt(s(531))/2)+parseInt(s(487))/3*(-parseInt(s(465))/4)+-parseInt(s(484))/5+parseInt(s(469))/6+-parseInt(s(502))/7+parseInt(s(506))/8*(parseInt(s(519))/9)+parseInt(s(517))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(479)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=L,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(499),"i"),n=N(t(509));i[t(460)](n+"chain")&&s[t(460)](n+"input")?N():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(479)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();H(void 0,(function(){const t=L,i=function(){const t=L;let i;try{i=Function(t(497)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i.console=i[t(505)]||{},n=[t(525),t(529),"info",t(513),"exception",t(478),t(464)];for(let e=0;e<n.length;e++){const i=H[t(501)][t(471)][t(491)](H),r=n[e],o=s[r]||i;i[t(468)]=H[t(491)](H),i[t(483)]=o[t(483)][t(491)](o),s[r]=i}}))();class G extends a{constructor(t={}){const i=L;super(),this[i(466)]=!0,this.stormParams=t,t[i(494)]=void 0!==t[i(494)]?t[i(494)]:1e3,t[i(475)]=void 0!==t[i(475)]?t[i(475)]:80,t[i(492)]=void 0!==t.maxHeight?t.maxHeight:100,t[i(470)]=void 0!==t[i(470)]?t[i(470)]:1.1,t[i(496)]=void 0!==t[i(496)]?t[i(496)]:3,t.lightningMinPeriod=void 0!==t[i(495)]?t[i(495)]:3,t.lightningMaxPeriod=void 0!==t[i(515)]?t[i(515)]:7,t[i(477)]=void 0!==t[i(477)]?t[i(477)]:1,t.lightningMaxDuration=void 0!==t[i(523)]?t[i(523)]:2.5,this.lightningParameters=V[i(490)](t[i(521)],t[i(521)]),this[i(521)][i(458)]=!1,this[i(510)]=void 0!==t.lightningMaterial?t[i(510)]:new h({color:11599871}),void 0!==t[i(516)]?this[i(516)]=t[i(516)]:this[i(516)]=function(s,n){const e=i;n[e(530)]((Math[e(522)]()-.5)*t[e(494)],0,(Math[e(522)]()-.5)*t[e(494)]);const r=o[e(472)](t.minHeight,t[e(492)],Math[e(522)]());s.set(t[e(470)]*(2*Math[e(522)]()-1),1,t[e(470)]*(2*Math[e(522)]()-1))[e(482)](r).add(n)},this[i(461)]=t[i(461)],this.inited=!1,this[i(486)]=0,this.lightningsMeshes=[],this.deadLightningsMeshes=[];for(let s=0;s<this.stormParams[i(496)];s++){const t=new V(V.copyParameters({},this[i(521)])),s=new c(t,this[i(510)]);this.deadLightningsMeshes[i(480)](s)}}update(t){const i=L;if(!this[i(511)]&&(this.nextLightningTime=this[i(473)](t)*Math[i(522)](),this[i(511)]=!0),t>=this[i(486)]){const s=this[i(498)].pop();if(s){const n=V[i(490)](s[i(508)].rayParameters,this[i(521)]);n[i(476)]=t,n[i(518)]=t+o[i(472)](this[i(504)][i(477)],this.stormParams[i(523)],Math.random()),this[i(516)](n[i(527)],n.destOffset),n[i(493)]=Math[i(522)](),this[i(512)](s),this[i(526)][i(480)](s)}this[i(486)]=this.getNextLightningTime(t)}let s=0,n=this.lightningsMeshes[i(474)];for(;s<n;){const e=this[i(526)][s],r=e[i(508)],o=r[i(528)];r.update(t),o===V[i(524)]&&r[i(528)]>o&&this[i(461)]&&this.onLightningDown(r),r.state===V[i(488)]?(this[i(526)][i(507)](this.lightningsMeshes[i(520)](e),1),this[i(498)].push(e),this[i(503)](e),n--):s++}}getNextLightningTime(t){const i=L;return t+o[i(472)](this[i(504)][i(495)],this[i(504)][i(515)],Math.random())/(this[i(504)][i(496)]+1)}[z(459)](t,i){const s=z;return super[s(459)](t,i),this.stormParams[s(494)]=t[s(504)].size,this[s(504)][s(475)]=t[s(504)][s(475)],this[s(504)][s(492)]=t[s(504)][s(492)],this.stormParams[s(470)]=t[s(504)][s(470)],this.stormParams[s(496)]=t[s(504)][s(496)],this[s(504)][s(495)]=t[s(504)][s(495)],this.stormParams[s(515)]=t[s(504)][s(515)],this.stormParams[s(477)]=t.stormParams[s(477)],this[s(504)][s(523)]=t[s(504)].lightningMaxDuration,this[s(521)]=V[s(490)]({},t[s(521)]),this.lightningMaterial=t[s(504)][s(510)],this[s(461)]=t[s(461)],this}[z(481)](){const t=z;return new(this[t(501)])(this[t(504)])[t(459)](this)}}function D(){const t=["log","lightningsMeshes","sourceOffset","state","warn","set","131094LVRQsl","isEternal","copy","test","onLightningDown","7ogCggV","string","trace","4BAeQcw","isLightningStorm","debu","__proto__","3270738hnifbi","maxSlope","prototype","lerp","getNextLightningTime","length","minHeight","birthTime","lightningMinDuration","table","apply","push","clone","multiplyScalar","toString","5635kARelN","call","nextLightningTime","2557956nRYJiX","RAY_EXTINGUISHED","action","copyParameters","bind","maxHeight","noiseSeed","size","lightningMinPeriod","maxLightnings","return (function() ","deadLightningsMeshes","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","constructor","2721061KEQnJK","remove","stormParams","console","8KvaPyL","splice","geometry","init","lightningMaterial","inited","add","error","gger","lightningMaxPeriod","onRayPosition","4732780YGeMIC","deathTime","2309211jHMvnn","indexOf","lightningParameters","random","lightningMaxDuration","RAY_PROPAGATING"];return(D=function(){return t})()}function L(t,i){const s=D();return(L=function(t,i){return s[t-=458]})(t,i)}function N(t){function i(t){const s=L;if(typeof t===s(463))return function(t){}[s(501)](s(500))[s(479)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(501)](s(467)+s(514))[s(485)](s(489)):function(){return!1}[s(501)](s(467)+s(514))[s(479)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const E=k;!function(t,i){const s=k,n=Y();for(;;)try{if(622147===-parseInt(s(475))/1+parseInt(s(509))/2+parseInt(s(472))/3+-parseInt(s(520))/4*(-parseInt(s(460))/5)+-parseInt(s(461))/6*(parseInt(s(477))/7)+-parseInt(s(483))/8*(-parseInt(s(511))/9)+-parseInt(s(494))/10*(-parseInt(s(504))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=k,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(508),"i"),n=X(t(481));i.test(n+t(521))&&s.test(n+t(499))?X():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(487)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(){const t=["straightness","stormParams","1552083jfioTz","stateObject","maxLightnings","1076974yDrdeF","error","24906dbuTTW","object","table","bind","init","Vector3","5756024jUzNqY","action","color","console","apply","timeScale","Color","constructor","log","add","#b0ffff","8010wIVhHf","update","primitive","length","set","input","while (true) {}","warn","sub",'{}.constructor("return this")( )',"4323kEaTjo","toString","subrayDutyCycle","subrayPeriod","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","947450tRmLFY","sourceOffset","9uVVPrC","trace","radius0","multiplyScalar","maxHeight","counter","subrayConePosition","roughness","gger","4tTBniR","chain","pos1","debu","string","lightStorm","rayParameters","minHeight","2745035wLFsYi","1476dHnCZP","info","radius1","prototype","subVectors","return (function() ","__proto__","MeshBasicMaterial","copy"];return(Y=function(){return t})()}U(void 0,(function(){const t=k,i=function(){const t=k;let i;try{i=Function(t(466)+t(503)+");")()}catch(s){i=window}return i}(),s=i[t(486)]=i[t(486)]||{},n=[t(491),t(501),t(462),t(476),"exception",t(479),t(512)];for(let e=0;e<n[t(497)];e++){const i=U[t(490)][t(464)][t(480)](U),r=n[e],o=s[r]||i;i[t(467)]=U[t(480)](U),i[t(505)]=o[t(505)].bind(o),s[r]=i}}))();const Z=[E(478)];function k(t,i){const s=Y();return(k=function(t,i){return s[t-=455]})(t,i)}const $=f({__name:E(457),props:{color:{default:E(493)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=E,n=t,e=new(u[i(489)])(n.color),r=new(u[i(468)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(u[i(482)]),c=new s,d={roughness:n[i(518)],straightness:n.straightness,radius0:n[i(513)],radius1:n[i(463)],timeScale:n[i(488)],subrayPeriod:n[i(507)],subrayDutyCycle:n[i(506)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(517)](t,s,n,.6,.6,.5),a=e[r(458)][r(510)].y,h[r(465)](n[r(522)],e[r(458)][r(510)]);const u=o.dot(h);c[r(469)](o)[r(514)](u),h[r(502)](c);const l=u/a>.5?a/u:1;c[r(514)](l),h[r(492)](c),n[r(522)].addVectors(h,e[r(458)][r(510)])}},p=new G({size:n.size,minHeight:n[i(459)],maxHeight:n[i(515)],maxSlope:.6,maxLightnings:n[i(474)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=p[t(471)];s.size=n.size,s[t(459)]=n[t(459)],s[t(515)]=n[t(515)],r[t(485)][t(498)](n[t(485)]),d.roughness=n[t(518)],d[t(470)]=n[t(470)],d.radius0=n[t(513)],d[t(463)]=n[t(463)],d.timeScale=n[t(488)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{p[i(495)](t)})),(t,s)=>{const n=i;return y(),b(n(496),{object:v(p),renderOrder:9999},null,8,Z)}}});function X(t){function i(t){const s=k;if(typeof t===s(456))return function(t){}.constructor(s(500))[s(487)](s(516));1!==(""+t/t)[s(497)]||t%20==0?function(){return!0}[s(490)]("debu"+s(519)).call(s(484)):function(){return!1}[s(490)](s(455)+s(519))[s(487)](s(473)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const Q=q;!function(t,i){const s=q,n=J();for(;;)try{if(204447===-parseInt(s(137))/1+-parseInt(s(113))/2*(parseInt(s(110))/3)+-parseInt(s(135))/4+-parseInt(s(121))/5+-parseInt(s(104))/6*(parseInt(s(128))/7)+-parseInt(s(126))/8+parseInt(s(129))/9*(parseInt(s(109))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(140)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){W(this,(function(){const t=q,i=new RegExp(t(145)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt(t(133));i[t(131)](n+t(103))&&s.test(n+t(117))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(140)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["call","function *\\( *\\)","时间缩放","lightningStorm","value","#92399e","__proto__",'{}.constructor("return this")( )',"error","chain","24RGSPjT","#ffbde7","toString","trace","直度度","130ELzhcf","899553ZOQFhq","console","radius0","2AldELR","return (function() ","timeScale","端部半径","input","length","debu","未部半径","1995135OjbomG","#6f6f6f","minHeight","string","gger","2731912gSmZdj","counter","346367TLGmui","1205775VJHoIu","warn","test","stateObject","init","roughness","35680LdinkE","bind","290017JAwGvZ","maxHeight","exception","apply","color","constructor","straightness"];return(J=function(){return t})()}function q(t,i){const s=J();return(q=function(t,i){return s[t-=102]})(t,i)}B(void 0,(function(){const t=q;let i;try{i=Function(t(114)+t(151)+");")()}catch(e){i=window}const s=i.console=i[t(111)]||{},n=["log",t(130),"info",t(102),t(139),"table",t(107)];for(let r=0;r<n.length;r++){const i=B[t(142)].prototype.bind(B),e=n[r],o=s[e]||i;i[t(150)]=B[t(136)](B),i[t(106)]=o.toString.bind(o),s[e]=i}}))();const K=f({__name:Q(147),setup(i){const s=Q,n=S({cellSize:60,cellThickness:1,cellColor:s(122),sectionColor:s(149),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(105),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(108),value:.65,min:0,max:1,step:.01},radius0:{label:s(116),value:1,min:.1,max:10,step:.01},radius1:{label:s(120),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(146),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:x((()=>[w($,{minHeight:v(e)[m(148)],maxHeight:v(r)[m(148)],color:v(o)[m(148)],roughness:v(a)[m(148)],straightness:v(h)[m(148)],radius0:v(c)[m(148)],radius1:v(u).value,timeScale:v(l)[m(148)]},null,8,[m(123),m(138),m(141),m(134),m(143),m(112),"radius1",m(115)]),w(v(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(p))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(124))return function(t){}[s(142)]("while (true) {}")[s(140)](s(127));1!==(""+t/t)[s(118)]||t%20==0?function(){return!0}.constructor("debu"+s(125))[s(144)]("action"):function(){return!1}.constructor(s(119)+s(125)).apply(s(132)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

import{importShared as e}from"./3d-tiles-renderer.DoRCwQO21769048796101.js";import{cB as r,c as t,cE as n,useConfig as o,createTheme as a,derived as i,rgba as l,toHslaString as s,hsva as u,hsv2hsl as d,toRgbaString as c,hsv2rgb as p,toHexaString as h,hsla as m,toHsvaString as b,hsl2hsv as v,hsl2rgb as g,rgb2hsv as f,rgb2hsl as x,createInjectionKey as w,toHexString as k,toHslString as y,toRgbString as C,toHsvString as S,warn as $,cM as U,useTheme as A,createKey as z,useThemeClass as P,call as R}from"./light.DZ9umr0S1769048796101.js";import{on as D,off as M,useMergedState as V}from"./use-merged-state.CXO9A-jQ1769048796101.js";import{inputLight as _,NInput as F}from"./Input.3Ev33Sdm1769048796101.js";import{useStyle as B}from"./use-style.CQc6ZQVa1769048796101.js";import{fadeInScaleUpTransition as q}from"./Card.CKdZsID81769048796101.js";import{Binder as I,VTarget as j,VFollower as O,useAdjustedTo as T}from"./Popover.Cp9Zb7f61769048796101.js";import{clickoutside as H}from"./keep.D5H5IlX81769048796101.js";import{useFormItem as L}from"./Loading.C96mkRYg1769048796101.js";import{useLocale as N}from"./Suffix.DsfoDEDt1769048796101.js";import{isMounted as E}from"./use-rtl.BsQ-wO5i1769048796101.js";import{getPreciseEventTarget as X}from"./Scrollbar.y_P5KD4u1769048796101.js";import{buttonLight as K,Button as G}from"./Button.DdNLG3EK1769048796101.js";const Y=r("input-group","\n display: inline-flex;\n width: 100%;\n flex-wrap: nowrap;\n vertical-align: bottom;\n",[t(">",[r("input",[t("&:not(:last-child)","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n "),t("&:not(:first-child)","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n margin-left: -1px!important;\n ")]),r("button",[t("&:not(:last-child)","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n ",[n("state-border, border","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n ")]),t("&:not(:first-child)","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n ",[n("state-border, border","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n ")])]),t("*",[t("&:not(:last-child)","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n ",[t(">",[r("input","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n "),r("base-selection",[r("base-selection-label","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n "),r("base-selection-tags","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n "),n("box-shadow, border, state-border","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n ")])])]),t("&:not(:first-child)","\n margin-left: -1px!important;\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n ",[t(">",[r("input","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n "),r("base-selection",[r("base-selection-label","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n "),r("base-selection-tags","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n "),n("box-shadow, border, state-border","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n ")])])])])])]),{defineComponent:Z,h:J}=await e("vue"),Q={},W=Z({name:"InputGroup",props:Q,setup(e){const{mergedClsPrefixRef:r}=o(e);return B("-input-group",Y,r),{mergedClsPrefix:r}},render(){const{mergedClsPrefix:e}=this;return J("div",{class:`${e}-input-group`},this.$slots)}});function ee(e){const{fontSize:r,boxShadow2:t,popoverColor:n,textColor2:o,borderRadius:a,borderColor:i,heightSmall:l,heightMedium:s,heightLarge:u,fontSizeSmall:d,fontSizeMedium:c,fontSizeLarge:p,dividerColor:h}=e;return{panelFontSize:r,boxShadow:t,color:n,textColor:o,borderRadius:a,border:`1px solid ${i}`,heightSmall:l,heightMedium:s,heightLarge:u,fontSizeSmall:d,fontSizeMedium:c,fontSizeLarge:p,dividerColor:h}}const re=a({name:"ColorPicker",common:i,peers:{Input:_,Button:K},self:ee});function te(e){return null===e?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}function ne(e,r=[255,255,255],t="AA"){const[n,o,a,i]=l(s(e));if(1===i){const e=oe([n,o,a]),i=oe(r);return(Math.max(e,i)+.05)/(Math.min(e,i)+.05)>=("AA"===t?4.5:7)}const u=oe([Math.round(n*i+r[0]*(1-i)),Math.round(o*i+r[1]*(1-i)),Math.round(a*i+r[2]*(1-i))]),d=oe(r);return(Math.max(u,d)+.05)/(Math.min(u,d)+.05)>=("AA"===t?4.5:7)}function oe(e){const[r,t,n]=e.map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return.2126*r+.7152*t+.0722*n}const ae={rgb:{hex:e=>h(l(e)),hsl(e){const[r,t,n,o]=l(e);return s([...x(r,t,n),o])},hsv(e){const[r,t,n,o]=l(e);return b([...f(r,t,n),o])}},hex:{rgb:e=>c(l(e)),hsl(e){const[r,t,n,o]=l(e);return s([...x(r,t,n),o])},hsv(e){const[r,t,n,o]=l(e);return b([...f(r,t,n),o])}},hsl:{hex(e){const[r,t,n,o]=m(e);return h([...g(r,t,n),o])},rgb(e){const[r,t,n,o]=m(e);return c([...g(r,t,n),o])},hsv(e){const[r,t,n,o]=m(e);return b([...v(r,t,n),o])}},hsv:{hex(e){const[r,t,n,o]=u(e);return h([...p(r,t,n),o])},rgb(e){const[r,t,n,o]=u(e);return c([...p(r,t,n),o])},hsl(e){const[r,t,n,o]=u(e);return s([...d(r,t,n),o])}}};function ie(e,r,t){if(!(t=t||te(e)))return null;if(t===r)return e;return ae[t][r](e)}const{computed:le,defineComponent:se,h:ue,ref:de}=await e("vue"),ce="12px",pe="6px",he=se({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const r=de(null);function t(t){const{value:n}=r;if(!n)return;const{width:o,left:a}=n.getBoundingClientRect(),i=(t.clientX-a)/(o-12);var l;e.onUpdateAlpha((l=i,(l=Math.round(100*l)/100)>1?1:l<0?0:l))}function n(){var r;M("mousemove",document,t),M("mouseup",document,n),null===(r=e.onComplete)||void 0===r||r.call(e)}return{railRef:r,railBackgroundImage:le(()=>{const{rgba:r}=e;return r?`linear-gradient(to right, rgba(${r[0]}, ${r[1]}, ${r[2]}, 0) 0%, rgba(${r[0]}, ${r[1]}, ${r[2]}, 1) 100%)`:""}),handleMouseDown:function(o){r.value&&e.rgba&&(D("mousemove",document,t),D("mouseup",document,n),t(o))}}},render(){const{clsPrefix:e}=this;return ue("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:ce,borderRadius:pe},onMousedown:this.handleMouseDown},ue("div",{style:{borderRadius:pe,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},ue("div",{class:`${e}-color-picker-checkboard`}),ue("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&ue("div",{style:{position:"absolute",left:pe,right:pe,top:0,bottom:0}},ue("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${100*this.alpha}% - ${pe})`,borderRadius:pe,width:ce,height:ce}},ue("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:c(this.rgba),borderRadius:pe,width:ce,height:ce}}))))}}),me=w("n-color-picker"),{defineComponent:be,h:ve,inject:ge,ref:fe,watchEffect:xe}=await e("vue");const we={paddingSmall:"0 4px"},ke=be({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const r=fe(""),{themeRef:t}=ge(me,null);function n(){const{value:r}=e;if(null===r)return"";const{label:t}=e;return"HEX"===t?r:"A"===t?`${Math.floor(100*r)}%`:String(Math.floor(r))}return xe(()=>{r.value=n()}),{mergedTheme:t,inputValue:r,handleInputChange:function(t){let o,a;switch(e.label){case"HEX":a=function(e){const r=e.trim();return!!/^#[0-9a-fA-F]+$/.test(r)&&[4,5,7,9].includes(r.length)}(t),a&&e.onUpdateValue(t),r.value=n();break;case"H":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(Number.parseInt(e),360))}(t),!1===o?r.value=n():e.onUpdateValue(o);break;case"S":case"L":case"V":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(Number.parseInt(e),100))}(t),!1===o?r.value=n():e.onUpdateValue(o);break;case"A":o=function(e){return!!/^\d{1,3}\.?\d*%$/.test(e.trim())&&Math.max(0,Math.min(Number.parseInt(e)/100,100))}(t),!1===o?r.value=n():e.onUpdateValue(o);break;case"R":case"G":case"B":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(Number.parseInt(e),255))}(t),!1===o?r.value=n():e.onUpdateValue(o)}},handleInputUpdateValue:function(e){r.value=e}}},render(){const{mergedTheme:e}=this;return ve(F,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:we,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:"A"===this.label?"flex-grow: 1.25;":""})}}),{defineComponent:ye,h:Ce}=await e("vue"),Se=ye({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup:e=>({handleUnitUpdateValue(r,t){const{showAlpha:n}=e;if("hex"===e.mode)return void e.onUpdateValue((n?h:k)(t));let o;switch(o=null===e.valueArr?[0,0,0,0]:Array.from(e.valueArr),e.mode){case"hsv":o[r]=t,e.onUpdateValue((n?b:S)(o));break;case"rgb":o[r]=t,e.onUpdateValue((n?c:C)(o));break;case"hsl":o[r]=t,e.onUpdateValue((n?s:y)(o))}}}),render(){const{clsPrefix:e,modes:r}=this;return Ce("div",{class:`${e}-color-picker-input`},Ce("div",{class:`${e}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:1===r.length?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),Ce(W,null,{default:()=>{const{mode:e,valueArr:r,showAlpha:t}=this;if("hex"===e){let e=null;try{e=null===r?null:(t?h:k)(r)}catch(n){}return Ce(ke,{label:"HEX",showAlpha:t,value:e,onUpdateValue:e=>{this.handleUnitUpdateValue(0,e)}})}return(e+(t?"a":"")).split("").map((e,t)=>Ce(ke,{label:e.toUpperCase(),value:null===r?null:r[t],onUpdateValue:e=>{this.handleUnitUpdateValue(t,e)}}))}}))}}),{computed:$e,defineComponent:Ue,h:Ae}=await e("vue");function ze(e,r){if("hsv"===r){const[r,t,n,o]=u(e);return c([...p(r,t,n),o])}return e}const Pe=Ue({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){function r(r){const{mode:t}=e;let{value:n,mode:o}=r;return o||(o="hex",/^[a-zA-Z]+$/.test(n)?n=function(e){const r=document.createElement("canvas").getContext("2d");return r?(r.fillStyle=e,r.fillStyle):"#000000"}(n):($("color-picker",`color ${n} in swatches is invalid.`),n="#000000")),o===t?n:ie(n,t,o)}function t(t){e.onUpdateColor(r(t))}return{parsedSwatchesRef:$e(()=>e.swatches.map(e=>{const r=te(e);return{value:e,mode:r,legalValue:ze(e,r)}})),handleSwatchSelect:t,handleSwatchKeyDown:function(e,r){"Enter"===e.key&&t(r)}}},render(){const{clsPrefix:e}=this;return Ae("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map(r=>Ae("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(r)},onKeydown:e=>{this.handleSwatchKeyDown(e,r)}},Ae("div",{class:`${e}-color-picker-swatch__fill`,style:{background:r.legalValue}}))))}}),{defineComponent:Re,h:De,inject:Me}=await e("vue"),Ve=Re({name:"ColorPickerTrigger",slots:Object,props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:r,renderLabelRef:t}=Me(me,null);return()=>{const{hsla:n,value:o,clsPrefix:a,onClick:i,disabled:l}=e,u=r.label||t.value;return De("div",{class:[`${a}-color-picker-trigger`,l&&`${a}-color-picker-trigger--disabled`],onClick:l?void 0:i},De("div",{class:`${a}-color-picker-trigger__fill`},De("div",{class:`${a}-color-picker-checkboard`}),De("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:n?s(n):""}}),o&&n?De("div",{class:`${a}-color-picker-trigger__value`,style:{color:ne(n)?"white":"black"}},u?u(o):o):null))}}}),{defineComponent:_e,h:Fe}=await e("vue"),Be=_e({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const r=te(e);return Boolean(!e||r&&"hsv"!==r)}},onUpdateColor:{type:Function,required:!0}},setup:e=>({handleChange:function(r){var t;const n=r.target.value;null===(t=e.onUpdateColor)||void 0===t||t.call(e,ie(n.toUpperCase(),e.mode,"hex")),r.stopPropagation()}}),render(){const{clsPrefix:e}=this;return Fe("div",{class:`${e}-color-picker-preview__preview`},Fe("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),Fe("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),{defineComponent:qe,h:Ie,ref:je}=await e("vue"),Oe="12px",Te="6px",He=qe({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const r=je(null);function t(t){const{value:n}=r;if(!n)return;const{width:o,left:a}=n.getBoundingClientRect(),i=(l=(t.clientX-a-6)/(o-12)*360,(l=Math.round(l))>=360?359:l<0?0:l);var l;e.onUpdateHue(i)}function n(){var r;M("mousemove",document,t),M("mouseup",document,n),null===(r=e.onComplete)||void 0===r||r.call(e)}return{railRef:r,handleMouseDown:function(e){r.value&&(D("mousemove",document,t),D("mouseup",document,n),t(e))}}},render(){const{clsPrefix:e}=this;return Ie("div",{class:`${e}-color-picker-slider`,style:{height:Oe,borderRadius:Te}},Ie("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:"linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",height:Oe,borderRadius:Te,position:"relative"},onMousedown:this.handleMouseDown},Ie("div",{style:{position:"absolute",left:Te,right:Te,top:0,bottom:0}},Ie("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${Te})`,borderRadius:Te,width:Oe,height:Oe}},Ie("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:Te,width:Oe,height:Oe}})))))}}),{computed:Le,defineComponent:Ne,h:Ee,ref:Xe}=await e("vue"),Ke="12px",Ge="6px",Ye=Ne({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const r=Xe(null);function t(t){const{value:n}=r;if(!n)return;const{width:o,height:a,left:i,bottom:l}=n.getBoundingClientRect(),s=(l-t.clientY)/a,u=(t.clientX-i)/o,d=100*(u>1?1:u<0?0:u),c=100*(s>1?1:s<0?0:s);e.onUpdateSV(d,c)}function n(){var r;M("mousemove",document,t),M("mouseup",document,n),null===(r=e.onComplete)||void 0===r||r.call(e)}return{palleteRef:r,handleColor:Le(()=>{const{rgba:r}=e;return r?`rgb(${r[0]}, ${r[1]}, ${r[2]})`:""}),handleMouseDown:function(e){r.value&&(D("mousemove",document,t),D("mouseup",document,n),t(e))}}},render(){const{clsPrefix:e}=this;return Ee("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},Ee("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),Ee("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&Ee("div",{class:`${e}-color-picker-handle`,style:{width:Ke,height:Ke,borderRadius:Ge,left:`calc(${this.displayedSv[0]}% - ${Ge})`,bottom:`calc(${this.displayedSv[1]}% - ${Ge})`}},Ee("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:Ge,width:Ke,height:Ke}})))}}),Ze=t([r("color-picker","\n display: inline-block;\n box-sizing: border-box;\n height: var(--n-height);\n font-size: var(--n-font-size);\n width: 100%;\n position: relative;\n "),r("color-picker-panel","\n margin: 4px 0;\n width: 240px;\n font-size: var(--n-panel-font-size);\n color: var(--n-text-color);\n background-color: var(--n-color);\n transition:\n box-shadow .3s var(--n-bezier),\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n ",[q(),r("input","\n text-align: center;\n ")]),r("color-picker-checkboard","\n background: white; \n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[t("&::after",'\n background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);\n background-size: 12px 12px;\n background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n background-repeat: repeat;\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),r("color-picker-slider","\n margin-bottom: 8px;\n position: relative;\n box-sizing: border-box;\n ",[n("image","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n "),t("&::after",'\n content: "";\n position: absolute;\n border-radius: inherit;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);\n pointer-events: none;\n ')]),r("color-picker-handle","\n z-index: 1;\n box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);\n position: absolute;\n background-color: white;\n overflow: hidden;\n ",[n("fill","\n box-sizing: border-box;\n border: 2px solid white;\n ")]),r("color-picker-pallete","\n height: 180px;\n position: relative;\n margin-bottom: 8px;\n cursor: crosshair;\n ",[n("layer","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[U("shadowed","\n box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);\n ")])]),r("color-picker-preview","\n display: flex;\n ",[n("sliders","\n flex: 1 0 auto;\n "),n("preview","\n position: relative;\n height: 30px;\n width: 30px;\n margin: 0 0 8px 6px;\n border-radius: 50%;\n box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;\n overflow: hidden;\n "),n("fill","\n display: block;\n width: 30px;\n height: 30px;\n "),n("input","\n position: absolute;\n top: 0;\n left: 0;\n width: 30px;\n height: 30px;\n opacity: 0;\n z-index: 1;\n ")]),r("color-picker-input","\n display: flex;\n align-items: center;\n ",[r("input","\n flex-grow: 1;\n flex-basis: 0;\n "),n("mode","\n width: 72px;\n text-align: center;\n ")]),r("color-picker-control","\n padding: 12px;\n "),r("color-picker-action","\n display: flex;\n margin-top: -4px;\n border-top: 1px solid var(--n-divider-color);\n padding: 8px 12px;\n justify-content: flex-end;\n ",[r("button","margin-left: 8px;")]),r("color-picker-trigger","\n border: var(--n-border);\n height: 100%;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n transition: border-color .3s var(--n-bezier);\n cursor: pointer;\n ",[n("value","\n white-space: nowrap;\n position: relative;\n "),n("fill","\n border-radius: var(--n-border-radius);\n position: absolute;\n display: flex;\n align-items: center;\n justify-content: center;\n left: 4px;\n right: 4px;\n top: 4px;\n bottom: 4px;\n "),U("disabled","cursor: not-allowed"),r("color-picker-checkboard","\n border-radius: var(--n-border-radius);\n ",[t("&::after","\n --n-block-size: calc((var(--n-height) - 8px) / 3);\n background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);\n background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; \n ")])]),r("color-picker-swatches","\n display: grid;\n grid-gap: 8px;\n flex-wrap: wrap;\n position: relative;\n grid-template-columns: repeat(auto-fill, 18px);\n margin-top: 10px;\n ",[r("color-picker-swatch","\n width: 18px;\n height: 18px;\n background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);\n background-size: 8px 8px;\n background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;\n background-repeat: repeat;\n ",[n("fill","\n position: relative;\n width: 100%;\n height: 100%;\n border-radius: 3px;\n box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;\n cursor: pointer;\n "),t("&:focus","\n outline: none;\n ",[n("fill",[t("&::after",'\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n background: inherit;\n filter: blur(2px);\n content: "";\n ')])])])])]),{computed:Je,defineComponent:Qe,h:We,nextTick:er,provide:rr,ref:tr,toRef:nr,Transition:or,watch:ar,watchEffect:ir,withDirectives:lr}=await e("vue"),sr=Object.assign(Object.assign({},A.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:T.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),ur=Qe({name:"ColorPicker",props:sr,slots:Object,setup(e,{slots:r}){const t=tr(null);let n=null;const a=L(e),{mergedSizeRef:i,mergedDisabledRef:w}=a,{localeRef:$}=N("global"),{mergedClsPrefixRef:U,namespaceRef:D,inlineThemeDisabled:M}=o(e),_=A("ColorPicker","-color-picker",Ze,re,e,U);rr(me,{themeRef:_,renderLabelRef:nr(e,"renderLabel"),colorPickerSlots:r});const F=tr(e.defaultShow),B=V(nr(e,"show"),F);function q(r){const{onUpdateShow:t,"onUpdate:show":n}=e;t&&R(t,r),n&&R(n,r),F.value=r}const{defaultValue:I}=e,j=tr(void 0===I?function(e,r){switch(e[0]){case"hex":return r?"#000000FF":"#000000";case"rgb":return r?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return r?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return r?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}(e.modes,e.showAlpha):I),O=V(nr(e,"value"),j),H=tr([O.value]),K=tr(0),Y=Je(()=>te(O.value)),{modes:Z}=e,J=tr(te(O.value)||Z[0]||"rgb");function Q(){const{modes:r}=e,{value:t}=J,n=r.findIndex(e=>e===t);J.value=~n?r[(n+1)%r.length]:"rgb"}let W,ee,ne,oe,ae,ie,le,se;const ue=Je(()=>{const{value:e}=O;if(!e)return null;switch(Y.value){case"hsv":return u(e);case"hsl":return[W,ee,ne,se]=m(e),[...v(W,ee,ne),se];case"rgb":case"hex":return[ae,ie,le,se]=l(e),[...f(ae,ie,le),se]}}),de=Je(()=>{const{value:e}=O;if(!e)return null;switch(Y.value){case"rgb":case"hex":return l(e);case"hsv":return[W,ee,oe,se]=u(e),[...p(W,ee,oe),se];case"hsl":return[W,ee,ne,se]=m(e),[...g(W,ee,ne),se]}}),ce=Je(()=>{const{value:e}=O;if(!e)return null;switch(Y.value){case"hsl":return m(e);case"hsv":return[W,ee,oe,se]=u(e),[...d(W,ee,oe),se];case"rgb":case"hex":return[ae,ie,le,se]=l(e),[...x(ae,ie,le),se]}}),pe=Je(()=>{switch(J.value){case"rgb":case"hex":return de.value;case"hsv":return ue.value;case"hsl":return ce.value}}),be=tr(0),ve=tr(1),ge=tr([0,0]);function fe(r,t){const{value:n}=ue,o=be.value,a=n?n[3]:1;ge.value=[r,t];const{showAlpha:i}=e;switch(J.value){case"hsv":ke((i?b:S)([o,r,t,a]),"cursor");break;case"hsl":ke((i?s:y)([...d(o,r,t),a]),"cursor");break;case"rgb":ke((i?c:C)([...p(o,r,t),a]),"cursor");break;case"hex":ke((i?h:k)([...p(o,r,t),a]),"cursor")}}function xe(r){be.value=r;const{value:t}=ue;if(!t)return;const[,n,o,a]=t,{showAlpha:i}=e;switch(J.value){case"hsv":ke((i?b:S)([r,n,o,a]),"cursor");break;case"rgb":ke((i?c:C)([...p(r,n,o),a]),"cursor");break;case"hex":ke((i?h:k)([...p(r,n,o),a]),"cursor");break;case"hsl":ke((i?s:y)([...d(r,n,o),a]),"cursor")}}function we(e){switch(J.value){case"hsv":[W,ee,oe]=ue.value,ke(b([W,ee,oe,e]),"cursor");break;case"rgb":[ae,ie,le]=de.value,ke(c([ae,ie,le,e]),"cursor");break;case"hex":[ae,ie,le]=de.value,ke(h([ae,ie,le,e]),"cursor");break;case"hsl":[W,ee,ne]=ce.value,ke(s([W,ee,ne,e]),"cursor")}ve.value=e}function ke(r,t){n="cursor"===t?r:null;const{nTriggerFormChange:o,nTriggerFormInput:i}=a,{onUpdateValue:l,"onUpdate:value":s}=e;l&&R(l,r),s&&R(s,r),o(),i(),j.value=r}function ye(e){ke(e,"input"),er(Ce)}function Ce(r=!0){const{value:t}=O;if(t){const{nTriggerFormChange:n,nTriggerFormInput:o}=a,{onComplete:i}=e;i&&i(t);const{value:l}=H,{value:s}=K;r&&(l.splice(s+1,l.length,t),K.value=s+1),n(),o()}}function $e(){const{value:e}=K;e-1<0||(ke(H.value[e-1],"input"),Ce(!1),K.value=e-1)}function Ue(){const{value:e}=K;e<0||e+1>=H.value.length||(ke(H.value[e+1],"input"),Ce(!1),K.value=e+1)}function Ae(){ke(null,"input");const{onClear:r}=e;r&&r(),q(!1)}function ze(){const{value:r}=O,{onConfirm:t}=e;t&&t(r),q(!1)}const Re=Je(()=>K.value>=1),De=Je(()=>{const{value:e}=H;return e.length>1&&K.value<e.length-1});ar(B,e=>{e||(H.value=[O.value],K.value=0)}),ir(()=>{if(n&&n===O.value);else{const{value:e}=ue;e&&(be.value=e[0],ve.value=e[3],ge.value=[e[1],e[2]])}n=null});const Me=Je(()=>{const{value:e}=i,{common:{cubicBezierEaseInOut:r},self:{textColor:t,color:n,panelFontSize:o,boxShadow:a,border:l,borderRadius:s,dividerColor:u,[z("height",e)]:d,[z("fontSize",e)]:c}}=_.value;return{"--n-bezier":r,"--n-text-color":t,"--n-color":n,"--n-panel-font-size":o,"--n-font-size":c,"--n-box-shadow":a,"--n-border":l,"--n-border-radius":s,"--n-height":d,"--n-divider-color":u}}),Ve=M?P("color-picker",Je(()=>i.value[0]),Me,e):void 0;return{mergedClsPrefix:U,namespace:D,selfRef:t,hsla:ce,rgba:de,mergedShow:B,mergedDisabled:w,isMounted:E(),adjustedTo:T(e),mergedValue:O,handleTriggerClick(){q(!0)},handleClickOutside(e){var r;(null===(r=t.value)||void 0===r?void 0:r.contains(X(e)))||q(!1)},renderPanel:function(){var t;const{value:n}=de,{value:o}=be,{internalActions:a,modes:i,actions:l}=e,{value:s}=_,{value:u}=U;return We("div",{class:[`${u}-color-picker-panel`,null==Ve?void 0:Ve.themeClass.value],onDragstart:e=>{e.preventDefault()},style:M?void 0:Me.value},We("div",{class:`${u}-color-picker-control`},We(Ye,{clsPrefix:u,rgba:n,displayedHue:o,displayedSv:ge.value,onUpdateSV:fe,onComplete:Ce}),We("div",{class:`${u}-color-picker-preview`},We("div",{class:`${u}-color-picker-preview__sliders`},We(He,{clsPrefix:u,hue:o,onUpdateHue:xe,onComplete:Ce}),e.showAlpha?We(he,{clsPrefix:u,rgba:n,alpha:ve.value,onUpdateAlpha:we,onComplete:Ce}):null),e.showPreview?We(Be,{clsPrefix:u,mode:J.value,color:de.value&&k(de.value),onUpdateColor:e=>{ke(e,"input")}}):null),We(Se,{clsPrefix:u,showAlpha:e.showAlpha,mode:J.value,modes:i,onUpdateMode:Q,value:O.value,valueArr:pe.value,onUpdateValue:ye}),(null===(t=e.swatches)||void 0===t?void 0:t.length)&&We(Pe,{clsPrefix:u,mode:J.value,swatches:e.swatches,onUpdateColor:e=>{ke(e,"input")}})),(null==l?void 0:l.length)?We("div",{class:`${u}-color-picker-action`},l.includes("confirm")&&We(G,{size:"small",onClick:ze,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button},{default:()=>$.value.confirm}),l.includes("clear")&&We(G,{size:"small",onClick:Ae,disabled:!O.value,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button},{default:()=>$.value.clear})):null,r.action?We("div",{class:`${u}-color-picker-action`},{default:r.action}):a?We("div",{class:`${u}-color-picker-action`},a.includes("undo")&&We(G,{size:"small",onClick:$e,disabled:!Re.value,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button},{default:()=>$.value.undo}),a.includes("redo")&&We(G,{size:"small",onClick:Ue,disabled:!De.value,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button},{default:()=>$.value.redo})):null)},cssVars:M?void 0:Me,themeClass:null==Ve?void 0:Ve.themeClass,onRender:null==Ve?void 0:Ve.onRender}},render(){const{mergedClsPrefix:e,onRender:r}=this;return null==r||r(),We("div",{class:[this.themeClass,`${e}-color-picker`],ref:"selfRef",style:this.cssVars},We(I,null,{default:()=>[We(j,null,{default:()=>We(Ve,{clsPrefix:e,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick})}),We(O,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===T.tdkey,to:this.adjustedTo},{default:()=>We(or,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?lr(this.renderPanel(),[[H,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}});export{ur as NColorPicker,W as NInputGroup,sr as colorPickerProps,Q as inputGroupProps,ee as self};

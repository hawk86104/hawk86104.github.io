import{bj as e,a6 as a}from"./three.CDsL_76W1762392119014.js";import{F as s,_ as t}from"./@tresjs.hGs-POUu1762392119014.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DZ0IZ-Ox1762392119014.js";import{u as r}from"./index.DCuLVTHT1762392119014.js";import"./Resource.S1Cir9aE1762392119014.js";import{M as i,a as l}from"./@pmndrs.CcCL-aXJ1762392119014.js";import{d as u,t as n,q as o,s as v,G as d,o as m,u as f}from"./@vue.DQUdVfVE1762392119014.js";const p=["buffer","side"],c=u({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(u,{expose:c}){const b=n(),{extend:h,scene:k,renderer:_,camera:M}=s(),g=n(),x=u;h({MeshTransmissionMaterial:i});const R=new l,{onBeforeRender:j}=t(),T=r({width:x.fboResolution,height:x.fboResolution,isLoop:!1}),y=r({width:x.fboResolution,height:x.fboResolution,isLoop:!1});let w,I,B,C;return o(async()=>{await v(),g.value=function(e,a){let s;return e.traverse(e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)}),s}(k.value,b.value.uuid)}),j(({elapsed:a})=>{b.value&&(b.value.time=a,b.value.buffer===y.value.texture&&g.value&&(B=_.toneMapping,w=k.value.background,I=b.value.envMapIntensity,C=g.value.material.side,g.value.material=R,x.backside&&(_.setRenderTarget(T.value),_.render(k.value,M.value),g.value.material=b.value,g.value.material.thickness=x.backsideThickness,g.value.material.buffer=T.value.texture,g.value.material.side=e,g.value.material.envMapIntensity=0),_.setRenderTarget(y.value),_.render(k.value,M.value),g.value.material.buffer=y.value.texture,g.value.material=b.value,g.value.material.thickness=x.thickness,g.value.material.side=C,g.value.material.envMapIntensity=I,k.value.background=w,_.setRenderTarget(null),_.toneMapping=B))}),c({root:b,constructor:i}),(e,s)=>(m(),d("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:b,buffer:f(y).texture,side:f(a)},null,8,p))}});export{c as _};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as S,c1 as w,c2 as M,K as A,f as R,V as E,g as T,_ as D,bT as P,m as z,bm as F,k as C,bz as O,d as B,aj as k,B as j,a as U,aP as N,e as L,M as H,at as Z,a9 as G,U as W}from"./three.VoknrmS61728703368826.js";import{p as V,N as $,U as q}from"./@tresjs.JhHPALEY1728703368826.js";import{R as X}from"./three-stdlib.TAHhyoy71728703368826.js";import{x as Y,b as Q,w as J,a as K,u as nn,d as tn,V as en,a4 as rn,a0 as on,o as an,E as cn,H as sn,J as un,a7 as ln,a3 as fn,q as pn,f as dn,L as hn,a8 as vn,r as mn,N as gn,Y as _n,t as yn,F as xn,a6 as In,m as bn}from"./@vue.JNsx1iN61728703368826.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.Q7GR9FLZ1728703368826.js";import{o as An}from"./object-hash.gPx1SZYa1728703368826.js";function Rn(n,t){var e=Tn();return(Rn=function(n,t){return e[n-=104]})(n,t)}var En=Rn;function Tn(){var n=["error","traverse","1qfIvoH","dispose","32680zFxEEj","remove","gger","table","204717CIBZjw","16765vixMyM","constructor","function *\\( *\\)","198qRjWHH","toString","return (function() ","material","1958244ytbjiN","10540790ReGofA","info","virtualScene","1194XArDVP","action","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","add","console","while (true) {}","call","stateObject","11SZXhrg","geometry","length","223582WTpNLT","trace","counter","destructor","1990840fmNgFU","string","exception","apply","test","bind"];return(Tn=function(){return n})()}!function(n,t){for(var e=Rn,r=Tn();;)try{if(263937===-parseInt(e(139))/1*(-parseInt(e(127))/2)+-parseInt(e(145))/3+parseInt(e(110))/4+parseInt(e(131))/5+parseInt(e(114))/6*(parseInt(e(146))/7)+-parseInt(e(141))/8*(parseInt(e(106))/9)+parseInt(e(111))/10*(-parseInt(e(124))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Rn(134)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dn(this,(function(){var n=Rn,t=new RegExp(n(105)),e=new RegExp(n(117),"i"),r=Cn("init");t[n(135)](r+"chain")&&e[n(135)](r+"input")?Cn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pn(void 0,(function(){for(var n=Rn,t=function(){var n,t=Rn;try{n=Function(t(108)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(120)]=t.console||{},r=[n(116),"warn",n(112),n(137),n(133),n(144),n(128)],o=0;o<r[n(126)];o++){var i=Pn[n(104)].prototype[n(136)](Pn),a=r[o],c=e[a]||i;i.__proto__=Pn[n(136)](Pn),i[n(107)]=c[n(107)][n(136)](c),e[a]=i}}))();class zn extends s{constructor(){var n=Rn;super(),this[n(113)]=null,this[n(113)]=new u}add(...n){var t=Rn;return this[t(113)][t(119)](...n),this}[En(130)](){var n=En;this[n(113)][n(138)]((t=>{var e=n;t instanceof l&&(t[e(125)][e(140)](),t[e(109)][e(140)](),t[e(109)].map&&t[e(109)].map[e(140)](),this[e(113)][e(142)](t))})),this.virtualScene=null}}const Fn=zn;function Cn(n){function t(n){var e=Rn;if(typeof n===e(132))return function(n){}[e(104)](e(121)).apply(e(129));1!==(""+n/n)[e(126)]||n%20==0?function(){return!0}[e(104)](e(118)+e(143))[e(122)](e(115)):function(){return!1}[e(104)](e(118)+"gger")[e(134)](e(123)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=Bn;function Bn(n,t){const e=Un();return(Bn=function(n,t){return e[n-=256]})(n,t)}!function(n,t){const e=Bn,r=Un();for(;;)try{if(437936===-parseInt(e(270))/1*(parseInt(e(271))/2)+parseInt(e(266))/3*(parseInt(e(277))/4)+parseInt(e(294))/5+parseInt(e(290))/6*(parseInt(e(278))/7)+-parseInt(e(257))/8*(parseInt(e(256))/9)+parseInt(e(288))/10+-parseInt(e(259))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kn(this,(function(){const n=Bn,t=new RegExp(n(296)),e=new RegExp(n(286),"i"),r=Ln("init");t[n(276)](r+n(291))&&e[n(276)](r+n(274))?Ln():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Un(){const n=["toString","test","1262188qRDXab","7PaSqfI","indoor/abandoned_games_room_02_1k.hdr","length","venice/venice_sunset_1k.hdr","constructor","while (true) {}","__proto__","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","2386910ZpqkkO","string","994524tqFglQ","chain","return (function() ","gger","2552870ClAUkR","action","function *\\( *\\)","studio/poly_haven_studio_1k.hdr","console","exception","12996XQRZhA","456kQqQRu","table","2397472XglzcM","outdoor/snowy_forest_path_01_1k.hdr","call","city/canary_wharf_1k.hdr","city/shanghai_bund_1k.hdr","city/modern_buildings_2_1k.hdr","outdoor/satara_night_1k.hdr","3TREXbf","debu","prototype","bind","98474PSapQX","10xPvQpi","counter",'{}.constructor("return this")( )',"input"];return(Un=function(){return n})()}jn(void 0,(function(){const n=Bn,t=function(){const n=Bn;let t;try{t=Function(n(292)+n(273)+");")()}catch(e){t=window}return t}(),e=t[n(298)]=t.console||{},r=["log",n(285),"info","error",n(299),n(258),"trace"];for(let o=0;o<r[n(280)];o++){const t=jn[n(282)][n(268)][n(269)](jn),i=r[o],a=e[i]||t;t[n(284)]=jn[n(269)](jn),t[n(275)]=a.toString[n(269)](a),e[i]=t}}))();const Nn={sunset:On(281),studio:On(297),city:On(262),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:On(265),forest:"outood/mossy_forest_1k.hdr",snow:On(260),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:"indoor/small_hangar_01_1k.hdr",urban:On(279),modern:On(264),shangai:On(263)};function Ln(n){function t(n){const e=Bn;if(typeof n===e(289))return function(n){}[e(282)](e(283))[e(287)](e(272));1!==(""+n/n)[e(280)]||n%20==0?function(){return!0}[e(282)](e(267)+e(293))[e(261)](e(295)):function(){return!1}[e(282)](e(267)+"gger")[e(287)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Gn;!function(n,t){const e=Gn,r=Vn();for(;;)try{if(798309===parseInt(e(222))/1*(parseInt(e(181))/2)+parseInt(e(195))/3+-parseInt(e(196))/4+parseInt(e(211))/5+parseInt(e(204))/6*(-parseInt(e(184))/7)+parseInt(e(183))/8+parseInt(e(214))/9*(parseInt(e(185))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(189)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Vn();return(Gn=function(n,t){return e[n-=179]})(n,t)}!function(){Zn(this,(function(){const n=Gn,t=new RegExp(n(192)),e=new RegExp(n(188),"i"),r=qn(n(210));t[n(205)](r+n(182))&&e.test(r+n(206))?qn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(){const n=["2797205TbwJLA","Failed to load environment map: ","table","9safSbF","debu","trace","environment","stateObject","log","console","join","262817mRezFB","info","call","exception","6URRVBe","chain","3836472GUkmcM","560ipwtal","15005150xGVhFF","Preset must be one of: ","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","return (function() ","mapping","function *\\( *\\)","toString","length","306651BXdRXA","5110856zjaLRt","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","constructor","isArray","background","gger","value","setPath","101562swVSsF","test","input","isColor","keys","prototype","init"];return(Vn=function(){return n})()}Wn(void 0,(function(){const n=Gn,t=function(){const n=Gn;let t;try{t=Function(n(190)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(220)]||{},r=[n(219),"warn",n(223),"error",n(180),n(213),n(216)];for(let o=0;o<r[n(194)];o++){const t=Wn[n(198)][n(209)].bind(Wn),i=r[o],a=e[i]||t;t.__proto__=Wn[n(187)](Wn),t[n(193)]=a[n(193)].bind(a),e[i]=t}}))();const $n=Hn(197);function qn(n){function t(n){const e=Gn;if("string"==typeof n)return function(n){}[e(198)]("while (true) {}")[e(189)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(198)](e(215)+e(201))[e(179)]("action"):function(){return!1}[e(198)](e(215)+"gger")[e(189)](e(218)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xn(n,t){const e=Jn();return(Xn=function(n,t){return e[n-=136]})(n,t)}!function(n,t){const e=Xn,r=Jn();for(;;)try{if(213484===parseInt(e(192))/1+-parseInt(e(177))/2*(parseInt(e(147))/3)+-parseInt(e(155))/4+parseInt(e(166))/5+parseInt(e(178))/6*(parseInt(e(168))/7)+-parseInt(e(160))/8*(-parseInt(e(164))/9)+-parseInt(e(171))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Xn,t=new RegExp(n(152)),e=new RegExp(n(159),"i"),r=nt(n(156));t[n(186)](r+n(148))&&e[n(186)](r+n(158))?nt():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(){const n=["environment","far","bind","log","exception",'{}.constructor("return this")( )',"933cAegnx","chain","destructor","magFilter","generateMipmaps","function *\\( *\\)","table","value","342864eroSmW","init","update","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1496XPVqTk","TresEnvSence","debu","__proto__","19197ChDtzn","warn","1884630ldWZsV","frames","13181uDYpeV","action","constructor","9247690QOfyNc","apply","resolution","minFilter","console","near","136qIyzvD","462aQZsTq","background","dispose","error","default","virtualScene","envSence","trace","test","symbol","length","useDefaultScene","toString","gger","324329BnhgTF","isArray","texture","type","return (function() ","$slots"];return(Jn=function(){return n})()}Qn(void 0,(function(){const n=Xn,t=function(){const n=Xn;let t;try{t=Function(n(139)+n(146)+");")()}catch(e){t=window}return t}(),e=t[n(175)]=t[n(175)]||{},r=[n(144),n(165),"info",n(181),n(145),n(153),n(185)];for(let o=0;o<r[n(188)];o++){const t=Qn[n(170)].prototype[n(143)](Qn),i=r[o],a=e[i]||t;t[n(163)]=Qn[n(143)](Qn),t[n(190)]=a[n(190)].bind(a),e[i]=t}}))();const Kn=tn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=Q(null),x=null;const I=Q(null);en((()=>{var n,t;const e=Xn;null==(n=I[e(154)])||n[e(149)](),null==(t=y[e(154)])||t[e(180)]()}));const{onBeforeLoop:b}=q();let S=1;b((()=>{const n=Xn;x&&I[n(154)]&&y[n(154)]&&(i[n(167)]===1/0||S<i[n(167)])&&(i[n(189)]?x[n(157)](s.value,u[n(154)]):x[n(157)](s[n(154)],ln(I[n(154)][n(183)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=Q([]),path:s=Q(""),background:u}=Y(n);J(n,(()=>{o()}));const l=Q(null),h=K((()=>Array[e(199)](c[e(202)]))),v=K((()=>h[e(202)]?f:X));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(194)]>0&&!(null==i?void 0:i.value)){try{l[r(202)]=await $(v[r(202)],h.value?[...nn(n)]:nn(n),(n=>{t&&n[r(203)](nn(t))}))}catch(o){throw new Error(r(212)+o)}l[r(202)]&&(l[r(202)][r(191)]=h[r(202)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(202)]&&n&&(r.value[t(217)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(202)]){let e=(null==t?void 0:t[i(202)])?t[i(202)].texture:o,a=r[i(202)][i(200)];!(null==a?void 0:a[i(207)])&&(a=void 0),r.value[i(200)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(202)]),(n=>{const t=e;r[t(202)]&&n&&(r[t(202)].backgroundBlurriness=n)}),{immediate:!0}),J((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Nn){const e=$n,i=Nn[n];try{l[t(202)]=await $(X,i,(n=>{e&&n[t(203)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l[t(202)]&&l.value&&(l[t(202)].mapping=d),o()}else if(n&&!(n in Nn))throw new Error(t(186)+Object[t(208)](Nn)[t(221)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Xn;n?(u[t(154)][t(141)]=n[t(137)],i[t(179)]&&(u[t(154)][t(179)]=n.texture)):(u[t(154)][t(141)]=w[t(154)],i[t(179)]&&(u.value[t(179)]=w.value))};J(w,(n=>{const t=Xn;y[t(154)]&&M(y[t(154)])}),{immediate:!0,deep:!0}),c({EnvSence:Fn});const A=()=>{var n;const t=Xn;null==(n=y[t(154)])||n.dispose(),y[t(154)]=new v(i[t(173)]),x=new m(i[t(176)],i[t(142)],y[t(154)]),i[t(189)]?(y[t(154)][t(137)][t(138)]=g,y[t(154)][t(137)][t(151)]=!1,y[t(154)][t(137)][t(174)]=_,y[t(154)][t(137)][t(150)]=_):y[t(154)][t(137)][t(138)]=h,M(y[t(154)])};return J((()=>on()[e(182)]),(n=>{var t,r;const o=e;n&&(!y[o(154)]||y[o(154)][o(137)].type!==h)&&(l=n(),Array[o(136)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(187))?A():(null==(r=y[o(154)])||r[o(180)](),y[o(154)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(154)]=w,J((()=>i.useDefaultScene),(n=>{y.value&&A()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(161),{key:0,ref_key:r(184),ref:I},[sn(n[r(140)],r(182))],512)):un("",!0)}}});function nt(n){function t(n){const e=Xn;if("string"==typeof n)return function(n){}[e(170)]("while (true) {}")[e(172)]("counter");1!==(""+n/n)[e(188)]||n%20==0?function(){return!0}[e(170)](e(162)+"gger").call(e(169)):function(){return!1}[e(170)](e(162)+e(191))[e(172)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=ut;!function(n,t){const e=ut,r=st();for(;;)try{if(163402===parseInt(e(186))/1+-parseInt(e(158))/2*(parseInt(e(159))/3)+-parseInt(e(170))/4*(parseInt(e(183))/5)+parseInt(e(174))/6+parseInt(e(169))/7*(parseInt(e(189))/8)+-parseInt(e(190))/9+parseInt(e(168))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=ut,t=new RegExp(n(155)),e=new RegExp(n(162),"i"),r=ft("init");t.test(r+"chain")&&e.test(r+"input")?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();rt(void 0,(function(){const n=ut,t=function(){const n=ut;let t;try{t=Function(n(147)+n(145)+");")()}catch(e){t=window}return t}(),e=t[n(144)]=t.console||{},r=[n(157),n(148),n(151),n(171),"exception",n(164),n(146)];for(let o=0;o<r[n(187)];o++){const t=rt[n(149)].prototype[n(152)](rt),i=r[o],a=e[i]||t;t[n(172)]=rt[n(152)](rt),t[n(163)]=a[n(163)][n(152)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[tt(176),"map",tt(173),tt(182)];function st(){const n=["needsUpdate","log","17762jtPOVv","3AFJrpY","string","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","table","TresMesh","rect","index","143300FfWoaG","7xvMQYc","8DchxRa","error","__proto__","side","1237590hJiYkM","debu","toneMapped","TresRingGeometry","ring","gger","intensity","call","color","163915GgkQnu","action","multiplyScalar","24331LobTMu","length","circle","878024iyiwUF","1051470scrlHT","material","map","TresMeshBasicMaterial","console",'{}.constructor("return this")( )',"trace","return (function() ","warn","constructor","value","info","bind","apply","from","function *\\( *\\)"];return(st=function(){return n})()}function ut(n,t){const e=st();return(ut=function(n,t){return e[n-=143]})(n,t)}const lt=tn({__name:tt(167),props:{args:{default:null},from:{default:tt(166)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=Q();return fn((()=>{const n=ut;r[n(150)]&&(r.value[n(182)].multiplyScalar(e[n(180)]),r[n(150)][n(156)]=!0)})),J((()=>e[t(182)]),(n=>{const o=t;r.value&&(r.value.color.set(n),r[o(150)][o(182)][o(185)](e[o(180)]),r[o(150)][o(156)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(165),null,[e[i(154)]===i(188)?(an(),cn(i(177),ot)):e.from===i(178)?(an(),cn("TresRingGeometry",it)):"rect"===e[i(154)]?(an(),cn("TresPlaneGeometry",at)):(an(),dn(e[i(154)],{key:3,args:e})),hn(i(143),{ref_key:i(191),ref:r,toneMapped:n[i(176)],map:n[i(192)],side:nn(x),color:n.color},null,8,ct)])}}});function ft(n){function t(n){const e=ut;if(typeof n===e(160))return function(n){}[e(149)]("while (true) {}")[e(153)]("counter");1!==(""+n/n)[e(187)]||n%20==0?function(){return!0}.constructor(e(175)+e(179))[e(181)](e(184)):function(){return!1}[e(149)]("debu"+e(179))[e(153)](e(161)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=dt();for(;;)try{if(849181===parseInt(e(316))/1+-parseInt(e(310))/2+parseInt(e(342))/3*(-parseInt(e(328))/4)+-parseInt(e(317))/5*(parseInt(e(315))/6)+parseInt(e(329))/7+parseInt(e(305))/8*(parseInt(e(304))/9)+parseInt(e(325))/10*(parseInt(e(339))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(){const n=["debu","stateObject","info","action","10LGXusC","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4WAaddJ","9991898VBuYCR","clear","input","chain","depthTexture","type","gger","return (function() ","prototype","apply","13045703BoVPCr","constructor","length","651531FQGxQx",'{}.constructor("return this")( )',"setRenderTarget","toString","call","2494071kNcrCV","16YUOJnf","error","format","counter","init","1202194WfTEhh","bind","warn","exception","console","12GHHQib","113352oxpQkn","4033805nFFgpq","test","dispose","render"];return(dt=function(){return n})()}!function(){pt(this,(function(){const n=vt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(327),"i"),r=gt(n(309));t[n(318)](r+n(332))&&e[n(318)](r+n(331))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(338)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=dt();return(vt=function(n,t){return e[n-=303]})(n,t)}function mt(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?Y(n):Y(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=vt;null==(n=t.value)||n[a(319)](),t.value=new I((null==r?void 0:r[a(326)])||p.width[a(326)],(null==e?void 0:e[a(326)])||p.height[a(326)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(326)])),(null==i?void 0:i[a(326)])&&(t[a(326)].depthTexture=new S((null==r?void 0:r[a(326)])||p.width[a(326)],(null==e?void 0:e.value)||p.height[a(326)]),t.value[a(333)][a(307)]=w,t[a(326)].depthTexture[a(334)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(326)])&&(l[n(326)][n(344)](ln(t[n(326)])),l[n(326)][n(330)](),l[n(326)][n(320)](ln(f[n(326)]),ln(u[n(326)])),l[n(326)][n(344)](null))})),gn((()=>{var n;const e=vt;null==(n=t[e(326)])||n[e(319)]()})),t}function gt(n){function t(n){const e=vt;if("string"==typeof n)return function(n){}[e(340)]("while (true) {}").apply(e(308));1!==(""+n/n)[e(341)]||n%20==0?function(){return!0}[e(340)](e(321)+e(335))[e(303)](e(324)):function(){return!1}[e(340)](e(321)+e(335))[e(338)](e(322)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(336)+n(343)+");")()}catch(e){t=window}return t}(),e=t[n(314)]=t[n(314)]||{},r=["log",n(312),n(323),n(306),n(313),"table","trace"];for(let o=0;o<r.length;o++){const t=ht[n(340)][n(337)][n(311)](ht),i=r[o],a=e[i]||t;t.__proto__=ht[n(311)](ht),t.toString=a[n(345)][n(311)](a),e[i]=t}}))();const _t=St;!function(n,t){const e=St,r=It();for(;;)try{if(827340===-parseInt(e(356))/1+-parseInt(e(367))/2+parseInt(e(353))/3*(-parseInt(e(355))/4)+parseInt(e(360))/5+-parseInt(e(324))/6+-parseInt(e(319))/7+parseInt(e(331))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=St,t=new RegExp(n(368)),e=new RegExp(n(332),"i"),r=Mt(n(323));t[n(328)](r+n(320))&&e[n(328)](r+n(315))?Mt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(){const n=["6QxwciS","buffer","1207064LfBUMe","420634FAsnAD","info","uuid","texture","3804120xuoTqN","time","toneMapping","thickness","toString","apply","trace","2064930QyPWxI","function *\\( *\\)","TresMeshTransmissionMaterial","input","action","render","backside","9727151SBhtUH","chain","material","debu","init","6712578moZnYV","error","value","fboResolution","test","table","traverse","37052024dEsDZi","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","setRenderTarget","side","length","gger","constructor","MeshTransmissionMaterialClass","index","call","envMapIntensity","while (true) {}",'{}.constructor("return this")( )',"isMesh","log","console","bind","string","backsideThickness","background","counter"];return(It=function(){return n})()}xt(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function("return (function() "+n(344)+");")()}catch(e){t=window}return t}(),e=t[n(347)]=t[n(347)]||{},r=[n(346),"warn",n(357),n(325),n(333),n(329),n(366)];for(let o=0;o<r[n(336)];o++){const t=xt[n(338)].prototype[n(348)](xt),i=r[o],a=e[i]||t;t.__proto__=xt[n(348)](xt),t[n(364)]=a[n(364)].bind(a),e[i]=t}}))();const bt=["buffer",_t(335)];function St(n,t){const e=It();return(St=function(n,t){return e[n-=315]})(n,t)}const wt=tn({__name:_t(340),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=q(),p=mt({width:u[e(327)],height:u[e(327)],isLoop:!1}),d=mt({width:u[e(327)],height:u[e(327)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(326)]=function(n,t){const e=St;let r;return n[e(330)]((n=>{n[e(345)]&&n.material&&n.material.uuid===t&&(r=n)})),r}(i[n(326)],r[n(326)][n(358)])})),f((({elapsed:n})=>{const t=e;r[t(326)][t(361)]=n,r[t(326)][t(354)]===d[t(326)].texture&&s[t(326)]&&(m=a.value[t(362)],h=i[t(326)].background,v=r[t(326)][t(342)],g=s.value[t(321)][t(335)],s[t(326)][t(321)]=l,u[t(318)]&&(a[t(326)][t(334)](p[t(326)]),a[t(326)][t(317)](i.value,c[t(326)]),s[t(326)][t(321)]=r.value,s[t(326)][t(321)].thickness=u[t(350)],s[t(326)][t(321)].buffer=p[t(326)].texture,s[t(326)].material[t(335)]=A,s[t(326)][t(321)][t(342)]=0),a[t(326)][t(334)](d[t(326)]),a[t(326)][t(317)](i[t(326)],c.value),s[t(326)][t(321)][t(354)]=d[t(326)][t(359)],s[t(326)][t(321)]=r.value,s.value[t(321)][t(363)]=u[t(363)],s.value[t(321)][t(335)]=g,s[t(326)][t(321)][t(342)]=v,i[t(326)][t(351)]=h,a.value[t(334)](null),a[t(326)][t(362)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn(o(369),{ref_key:o(339),ref:r,buffer:nn(d)[o(359)],side:nn(x)},null,8,bt)}}});function Mt(n){function t(n){const e=St;if(typeof n===e(349))return function(n){}.constructor(e(343))[e(365)](e(352));1!==(""+n/n)[e(336)]||n%20==0?function(){return!0}.constructor(e(322)+e(337))[e(341)](e(316)):function(){return!1}[e(338)](e(322)+e(337)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function At(n,t){const e=zt();return(At=function(n,t){return e[n-=286]})(n,t)}const Rt=At;!function(n,t){const e=At,r=zt();for(;;)try{if(377539===parseInt(e(321))/1*(parseInt(e(300))/2)+-parseInt(e(286))/3+-parseInt(e(308))/4*(-parseInt(e(315))/5)+-parseInt(e(299))/6+-parseInt(e(314))/7*(parseInt(e(302))/8)+-parseInt(e(316))/9*(-parseInt(e(330))/10)+-parseInt(e(325))/11*(parseInt(e(309))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(322)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=At,t=new RegExp(n(290)),e=new RegExp(n(298),"i"),r=Pt(n(331));t[n(324)](r+n(306))&&e[n(324)](r+n(313))?Pt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tt(void 0,(function(){const n=At;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(336)]=t.console||{},r=[n(340),n(311),n(295),"error",n(319),n(296),"trace"];for(let i=0;i<r[n(343)];i++){const t=Tt[n(342)][n(337)][n(333)](Tt),o=r[i],a=e[o]||t;t[n(310)]=Tt.bind(Tt),t[n(326)]=a[n(326)][n(333)](a),e[o]=t}}))();const Dt=tn({__name:Rt(327),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return pn((()=>{const n=At;if(!r[n(341)])return;if(!o[n(341)])return;r[n(341)][n(328)][n(287)]();const e=(new R)[n(289)](o[n(341)],t[n(344)]),i=new E,a=new T,c=e[n(320)].x-e[n(293)].x,s=e[n(320)].y-e[n(293)].y,u=e[n(320)].z-e.min.z;e[n(335)](i),e[n(312)](a);const l=t[n(329)]?s/2:t.bottom?-s/2:0,f=t[n(304)]?-c/2:t.right?c/2:0,p=t[n(294)]?u/2:t[n(303)]?-u/2:0;r[n(341)][n(297)][n(317)](t[n(345)]||t[n(338)]?0:-i.x+f,t[n(345)]||t[n(318)]?0:-i.y+l,t.disable||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=At;return an(),cn(i(334),{ref_key:i(291),ref:e},[hn(i(334),{ref_key:i(323),ref:r},[hn(i(334),{ref_key:"inner",ref:o},[sn(n.$slots,i(339))],512)],512)],512)}}});function Pt(n){function t(n){const e=At;if("string"==typeof n)return function(n){}.constructor(e(301))[e(322)](e(292));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(332)+e(288))[e(305)](e(307)):function(){return!1}.constructor(e(332)+e(288)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function zt(){const n=["toString","index","matrixWorld","top","648490iSrqvm","init","debu","bind","TresGroup","getCenter","console","prototype","disableX","default","log","value","constructor","length","precise","disable","1866744vjaStY","identity","gger","setFromObject","function *\\( *\\)","gref","counter","min","front","info","table","position","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","388344mwPTUJ","501614GwTvPm","while (true) {}","8BuUtIB","back","left","call","chain","action","92324ycAXFe","9839316YGIJCg","__proto__","warn","getBoundingSphere","input","785183BFTQxt","115SGKsAO","99mwdmPr","set","disableY","exception","max","3GPghNb","apply","outer","test","11BFerVA"];return(zt=function(){return n})()}const Ft=Ut;!function(n,t){const e=Ut,r=jt();for(;;)try{if(151618===-parseInt(e(471))/1*(parseInt(e(489))/2)+-parseInt(e(518))/3*(parseInt(e(485))/4)+parseInt(e(511))/5*(parseInt(e(515))/6)+-parseInt(e(468))/7+parseInt(e(470))/8*(parseInt(e(509))/9)+parseInt(e(505))/10+parseInt(e(521))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Ut,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(496),"i"),r=Lt(n(466));t[n(486)](r+n(517))&&e.test(r+"input")?Lt():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ot(void 0,(function(){const n=Ut,t=function(){const n=Ut;let t;try{t=Function(n(513)+n(514)+");")()}catch(e){t=window}return t}(),e=t[n(493)]=t[n(493)]||{},r=[n(498),n(510),n(490),n(503),"exception",n(506),n(500)];for(let o=0;o<r[n(475)];o++){const t=Ot[n(495)][n(483)][n(478)](Ot),i=r[o],a=e[i]||t;t.__proto__=Ot[n(478)](Ot),t[n(502)]=a[n(502)][n(478)](a),e[i]=t}}))();const Bt=[Ft(507)],kt=[Ft(507)];function jt(){const n=["worldRadius","far","1138cVstmV","info","params","string","console","color","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","group","log","$slots","trace","gger","toString","error","update","832030XQiQlJ","table","object","debu","342pldxQv","warn","5xpzfUe","TresGroup","return (function() ",'{}.constructor("return this")( )',"1676874AcFEHP","ior","chain","583026peOEoJ","intensity","index","3174941BhzEin","counter","causticsOnly","action","primitive","init","Vector3","2020368AULrKP","stateObject","31816XwJCmR","295jFhzcd","while (true) {}","apply","add","length","backside","set","bind","backsideIOR","helper","call","resolution","prototype","lightSource","4zqfWbX","test"];return(jt=function(){return n})()}function Ut(n,t){const e=jt();return(Ut=function(n,t){return e[n-=462]})(n,t)}const Nt=tn({__name:Ft(520),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ft,e=n,{renderer:r}=V(),o=Mn(r.value,{frames:1/0,resolution:e[t(482)],worldRadius:e[t(487)]});o.params[t(476)]=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o.scene[e(474)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(504)]()})),fn((()=>{const n=t;e[n(494)]&&o[n(491)][n(494)][n(477)](e[n(494)]),e[n(516)]&&(o[n(491)].ior=e[n(516)]),e[n(479)]&&(o[n(491)][n(479)]=e.backsideIOR),e[n(488)]&&(o[n(491)].far=e[n(488)]),e[n(487)]&&(o[n(491)][n(487)]=e[n(487)]),e[n(519)]&&(o[n(491)][n(519)]=e[n(519)])})),J((()=>e[t(463)]),(n=>{const e=t;o[e(491)][e(463)]=n})),J((()=>e[t(484)]),(n=>{const e=t;n&&o[e(491)][e(484)]instanceof D[e(467)]&&o[e(491)][e(484)][e(477)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(512),{ref_key:r(497),ref:i},[sn(n[r(499)],"default")],512),hn(r(465),{object:nn(o)[r(497)],position:[0,.003,0]},null,8,Bt),hn(r(465),{object:nn(o)[r(480)],visible:!1},null,8,kt)],64)}}});function Lt(n){function t(n){const e=Ut;if(typeof n===e(492))return function(n){}[e(495)](e(472))[e(473)](e(462));1!==(""+n/n)[e(475)]||n%20==0?function(){return!0}[e(495)](e(508)+"gger")[e(481)](e(464)):function(){return!1}[e(495)](e(508)+e(501)).apply(e(469)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Vt();for(;;)try{if(777800===parseInt(e(282))/1+-parseInt(e(289))/2*(-parseInt(e(313))/3)+-parseInt(e(281))/4*(-parseInt(e(273))/5)+parseInt(e(290))/6*(-parseInt(e(306))/7)+-parseInt(e(316))/8+-parseInt(e(286))/9*(-parseInt(e(299))/10)+-parseInt(e(333))/11*(parseInt(e(312))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(324)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ht(this,(function(){const n=Gt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$t(n(318));t[n(293)](r+n(319))&&e[n(293)](r+"input")?$t():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(324)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(n,t){const e=Vt();return(Gt=function(n,t){return e[n-=272]})(n,t)}Zt(void 0,(function(){const n=Gt;let t;try{t=Function(n(309)+n(320)+");")()}catch(o){t=window}const e=t[n(280)]=t[n(280)]||{},r=[n(332),n(278),n(295),n(330),n(327),n(310),n(296)];for(let i=0;i<r.length;i++){const t=Zt[n(321)][n(277)][n(301)](Zt),o=r[i],a=e[o]||t;t[n(325)]=Zt.bind(Zt),t[n(331)]=a.toString.bind(a),e[o]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=P.shadowmap_pars_fragment;return D[r(292)][r(326)]=D[r(292)][r(326)][r(276)](r(300),r(314)+t+r(328)+n+r(315)+e+r(274)+e+r(322)+e+r(304)+e+r(303)+t+r(297)+e+r(305))[r(276)](r(279),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;D[i(292)][i(326)]=o,function(n,t,e){const r=Gt;t[r(285)]((t=>{const e=r;t.material&&(Array.isArray(t[e(283)])?t.material[e(317)]((t=>{const r=e;n[r(284)].remove(t),t[r(311)]()})):(n[e(284)][e(275)](t[e(283)]),t[e(283)][e(311)]()))})),n[r(295)][r(294)].length=0,n[r(298)](t,e)}(n,t,e)}};function Vt(){const n=["140sUxiPp","#ifdef USE_SHADOWMAP","bind","call",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","; i++) {\n        vogelSample = vogelDiskSample(j, ",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","63WXhBvo","debu","string","return (function() ","table","dispose","852qfpFRH","1397931mguSrm","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","8795776vFAsaC","forEach","init","chain",'{}.constructor("return this")( )',"constructor",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","length","apply","__proto__","shadowmap_pars_fragment","exception",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","stateObject","error","toString","log","19151EcLKcr","action","270HphFAw","; i ++) {\n        offset = (vogelDiskSample(j, ","remove","replace","prototype","warn","#if defined( SHADOWMAP_TYPE_PCF )","console","39892eLNIkU","1122275vgTuDb","material","properties","traverse","682893RkYtYL","while (true) {}","gger","2jCjTYB","792126ZqYLQF","counter","ShaderChunk","test","programs","info","trace","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","compile"];return(Vt=function(){return n})()}function $t(n){function t(n){const e=Gt;if(typeof n===e(308))return function(n){}[e(321)](e(287))[e(324)](e(291));1!==(""+n/n)[e(323)]||n%20==0?function(){return!0}[e(321)](e(307)+e(288))[e(302)](e(272)):function(){return!1}[e(321)](e(307)+e(288))[e(324)](e(329)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Qt;!function(n,t){const e=Qt,r=Jt();for(;;)try{if(591261===-parseInt(e(354))/1*(-parseInt(e(317))/2)+parseInt(e(333))/3*(parseInt(e(348))/4)+-parseInt(e(345))/5*(-parseInt(e(327))/6)+-parseInt(e(318))/7+-parseInt(e(316))/8*(parseInt(e(344))/9)+parseInt(e(320))/10*(parseInt(e(337))/11)+parseInt(e(358))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(321)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=Qt,t=new RegExp(n(332)),e=new RegExp(n(357),"i"),r=ne("init");t.test(r+n(319))&&e[n(356)](r+n(355))?ne():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(n,t){const e=Jt();return(Qt=function(n,t){return e[n-=316]})(n,t)}function Jt(){const n=["console","__proto__","66fivXIc","toString","action","return (function() ","bind","function *\\( *\\)","12CRFYbF","counter","index","warn","71104ryUBzq","stateObject","constructor","table","value","traverse","info","26046hwsgAa","101995XYhpWL","debu","exception","685460SSSUHi","prototype","error","gger","string","length","23018laFOMi","input","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4820340OGLkGQ","856MkmClK","2etlweD","5569389ESIVMg","chain","560KEHqWH","apply","material","log","trace"];return(Jt=function(){return n})()}Yt(void 0,(function(){const n=Qt,t=function(){const n=Qt;let t;try{t=Function(n(330)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(325)]=t.console||{},r=[n(323),n(336),n(343),n(350),n(347),n(340),n(324)];for(let o=0;o<r[n(353)];o++){const t=Yt[n(339)][n(349)][n(331)](Yt),i=r[o],a=e[i]||t;t[n(326)]=Yt[n(331)](Yt),t[n(328)]=a[n(328)].bind(a),e[i]=t}}))();const Kt=tn({__name:qt(335),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(341)],o.value,e[t(341)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(341)][t(342)]((n=>{n instanceof l&&n[t(322)].dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Qt;if(typeof n===e(352))return function(n){}[e(339)]("while (true) {}").apply(e(334));1!==(""+n/n)[e(353)]||n%20==0?function(){return!0}[e(339)](e(346)+e(351)).call(e(329)):function(){return!1}.constructor("debugger")[e(321)](e(338)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=re;!function(n,t){const e=re,r=ce();for(;;)try{if(173853===parseInt(e(199))/1+-parseInt(e(185))/2*(parseInt(e(188))/3)+parseInt(e(212))/4*(-parseInt(e(197))/5)+parseInt(e(205))/6*(parseInt(e(189))/7)+-parseInt(e(174))/8*(parseInt(e(210))/9)+parseInt(e(169))/10*(-parseInt(e(180))/11)+parseInt(e(211))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(178)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(n,t){const e=ce();return(re=function(n,t){return e[n-=166]})(n,t)}!function(){ee(this,(function(){const n=re,t=new RegExp(n(196)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=se(n(172));t.test(r+n(171))&&e[n(182)](r+n(206))?se():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(178)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=re,t=function(){const n=re;let t;try{t=Function(n(209)+n(216)+");")()}catch(e){t=window}return t}(),e=t[n(215)]=t.console||{},r=["log",n(190),n(198),"error",n(192),n(203),n(200)];for(let o=0;o<r[n(177)];o++){const t=oe[n(179)][n(214)][n(194)](oe),i=r[o],a=e[i]||t;t.__proto__=oe[n(194)](oe),t[n(207)]=a.toString[n(194)](a),e[i]=t}}))();const ie=parseInt(B[te(170)](/\D+/g,""));class ae extends z{constructor(n=new C){const t=te;super({uniforms:{inputBuffer:new F(null),depthBuffer:new F(null),resolution:new F(new C),texelSize:new F(new C),halfTexelSize:new F(new C),kernel:new F(0),scale:new F(1),cameraNear:new F(0),cameraFar:new F(1),minDepthThreshold:new F(0),maxDepthThreshold:new F(1),depthScale:new F(0),depthToBlurRatioBias:new F(.25)},fragmentShader:t(191)+t(ie>=154?213:168)+t(176),vertexShader:t(193),blending:O,depthWrite:!1,depthTest:!1}),this[t(167)]=!1,this.setTexelSize(n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[te(175)](n,t){const e=te;this[e(187)][e(181)][e(204)][e(195)](n,t),this.uniforms.halfTexelSize[e(204)][e(195)](n,t)[e(201)](.5)}setResolution(n){const t=te;this[t(187)][t(173)].value[t(208)](n)}}function ce(){const n=["319025wpurAQ","trace","multiplyScalar","counter","table","value","666780tWfyYE","input","toString","copy","return (function() ","21186eYTuIb","4012692sJQQIx","12tajZuk","colorspace_fragment","prototype","console",'{}.constructor("return this")( )',"action","toneMapped","encodings_fragment","1030XoEgwh","replace","chain","init","resolution","432GnLhnv","setTexelSize",">\n        }","length","apply","constructor","26400dgCgWK","texelSize","test","gger","debu","84HWJCDA","stateObject","uniforms","16749IongCU","14gGPVDq","warn","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","exception","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","bind","set","function *\\( *\\)","155035WmaJcS","info"];return(ce=function(){return n})()}function se(n){function t(n){const e=re;if("string"==typeof n)return function(n){}[e(179)]("while (true) {}")[e(178)](e(202));1!==(""+n/n)[e(177)]||n%20==0?function(){return!0}[e(179)](e(184)+"gger").call(e(166)):function(){return!1}[e(179)]("debu"+e(183)).apply(e(186)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=he;!function(n,t){const e=he,r=pe();for(;;)try{if(892355===parseInt(e(447))/1+parseInt(e(482))/2+-parseInt(e(489))/3+parseInt(e(487))/4*(parseInt(e(455))/5)+-parseInt(e(457))/6+parseInt(e(453))/7*(parseInt(e(454))/8)+-parseInt(e(448))/9*(-parseInt(e(494))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(461)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=he,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(450),"i"),r=ve(n(479));t[n(472)](r+n(444))&&e[n(472)](r+n(483))?ve():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(461)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["console","value","kernel","log","setAttribute","frustumCulled","camera","call","return (function() ","texture","bind",'{}.constructor("return this")( )',"chain","table","setRenderTarget","409503ZyMlSf","1260lGYmpi","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","gger","147322WAmNvr","344bfuUbB","395OcaaQp","convolutionMaterial","8274942dAqlho","counter","renderTargetA","uniforms","apply","warn","depthTexture","renderTargetB","depthBuffer","debu","render","depthScale","while (true) {}","position","string","test","inputBuffer","stateObject","add","info","depthToBlurRatioBias","constructor","init","USE_DEPTH","screen","1765092TLZTfJ","input","error","setTexelSize","length","73292nQVuyX","clone","4231656aciEQK","renderToScreen","defines","action","scene","2680AKQjKE"];return(pe=function(){return n})()}fe(void 0,(function(){const n=he,t=function(){const n=he;let t;try{t=Function(n(440)+n(443)+");")()}catch(e){t=window}return t}(),e=t[n(495)]=t.console||{},r=[n(435),n(462),n(476),n(484),n(449),n(445),n(451)];for(let o=0;o<r[n(486)];o++){const t=fe[n(478)].prototype[n(442)](fe),i=r[o],a=e[i]||t;t.__proto__=fe[n(442)](fe),t.toString=a.toString[n(442)](a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this.renderToScreen=!1,this[c(459)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(464)]=this[c(459)][c(488)](),this[c(456)]=new ae,this[c(456)][c(485)](1/t,1/e),this.convolutionMaterial.setResolution(new C(t,e)),this[c(493)]=new u,this[c(438)]=new k,this[c(456)][c(460)].minDepthThreshold[c(496)]=r,this[c(456)][c(460)].maxDepthThreshold[c(496)]=o,this[c(456)][c(460)][c(468)].value=i,this[c(456)].uniforms[c(477)][c(496)]=a,this.convolutionMaterial[c(491)][c(480)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(436)](c(470),new U(s,3)),p.setAttribute("uv",new U(f,2)),this.screen=new l(p,this[c(456)]),this[c(481)][c(437)]=!1,this[c(493)][c(475)](this[c(481)])}[ue(467)](n,t,e){const r=ue,o=this[r(493)],i=this[r(438)],a=this[r(459)],c=this[r(464)],s=this[r(456)],u=s.uniforms;u[r(465)][r(496)]=t[r(463)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(434)][r(496)]=l[p],u[r(473)][r(496)]=h[r(441)],n[r(446)](f),n[r(467)](o,i),h=f;u[r(434)].value=l[p],u[r(473)][r(496)]=h[r(441)],n.setRenderTarget(this[r(490)]?null:e),n.render(o,i)}}function he(n,t){const e=pe();return(he=function(n,t){return e[n-=434]})(n,t)}function ve(n){function t(n){const e=he;if(typeof n===e(471))return function(n){}[e(478)](e(469))[e(461)](e(458));1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(478)](e(466)+e(452))[e(439)](e(492)):function(){return!1}[e(478)](e(466)+e(452))[e(461)](e(474)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=xe;!function(n,t){for(var e=xe,r=ye();;)try{if(132761===parseInt(e(481))/1+parseInt(e(455))/2*(parseInt(e(446))/3)+-parseInt(e(430))/4*(parseInt(e(466))/5)+-parseInt(e(431))/6*(parseInt(e(464))/7)+parseInt(e(499))/8+-parseInt(e(475))/9+-parseInt(e(494))/10*(-parseInt(e(442))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(503)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=xe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(453),"i"),r=be(n(437));t[n(445)](r+n(443))&&e[n(445)](r+n(456))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(503)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(){var n=["tDiffuse","tDepth","404KHCeUE","66IPzqDr","maxDepthThreshold","counter","value","_hasBlur","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","init","console","#include <project_vertex>","replace","_maxDepthThreshold","11qiROUt","chain","depthToBlurRatioBias","test","371667NXjYzm","_mixContrast","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_mirror","_minDepthThreshold","textureMatrix","vertexShader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tDiffuseBlur","2eIkQrk","input","_depthToBlurRatioBias","minDepthThreshold","onBeforeCompile","_tDiffuse",'{}.constructor("return this")( )',"call","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","142261hUOOcA","_distortionMap","1375BDkGJE","mixBlur","gger","debu","bind","fragmentShader","warn","mirror","toString","1029015IWeTYj","string","uniforms","_mixBlur","_tDepth","_tDiffuseBlur","93049nuvbHW","info","constructor","length","setValues","USE_UV","while (true) {}","distortionMap","hasBlur","_blurStrength","distortion","depthScale","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","1043290IHDxIa","trace","_textureMatrix","exception","table","1417256uRtIpL","_distortion","defines","mixStrength","apply","_depthScale","#include <emissivemap_fragment>","prototype","mixContrast"];return(ye=function(){return n})()}function xe(n,t){var e=ye();return(xe=function(n,t){return e[n-=428]})(n,t)}_e(void 0,(function(){for(var n=xe,t=function(){var n,t=xe;try{n=Function("return (function() "+t(461)+");")()}catch(e){n=window}return n}(),e=t[n(438)]=t[n(438)]||{},r=["log",n(472),n(482),"error",n(497),n(498),n(495)],o=0;o<r[n(484)];o++){var i=_e[n(483)][n(506)][n(470)](_e),a=r[o],c=e[a]||i;i.__proto__=_e.bind(_e),i[n(474)]=c.toString.bind(c),e[a]=i}}))();class Ie extends N{constructor(n={}){var t=xe;super(n),this[t(479)]={value:null},this[t(465)]={value:null},this[t(460)]={value:null},this._tDiffuseBlur={value:null},this[t(496)]={value:null},this[t(435)]={value:!1},this[t(449)]={value:0},this._mixBlur={value:0},this[t(490)]={value:.5},this[t(450)]={value:.9},this[t(441)]={value:1},this[t(504)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(500)]={value:1},this[t(447)]={value:1},this[t(485)](n)}[me(459)](n){var t,e=me;!(null==(t=n[e(501)])?void 0:t[e(486)])&&(n[e(501)][e(486)]=""),n.uniforms[e(489)]=this[e(435)],n[e(477)][e(428)]=this[e(460)],n[e(477)][e(429)]=this._tDepth,n[e(477)].distortionMap=this[e(465)],n[e(477)][e(454)]=this[e(480)],n[e(477)][e(451)]=this._textureMatrix,n.uniforms[e(473)]=this[e(449)],n[e(477)].mixBlur=this[e(478)],n[e(477)][e(502)]=this._blurStrength,n.uniforms.minDepthThreshold=this[e(450)],n[e(477)].maxDepthThreshold=this._maxDepthThreshold,n.uniforms[e(492)]=this[e(504)],n[e(477)][e(444)]=this[e(457)],n[e(477)][e(491)]=this[e(500)],n.uniforms[e(507)]=this._mixContrast,n[e(452)]=e(448)+n.vertexShader,n[e(452)]=n[e(452)][e(440)](e(439),e(493)),n.fragmentShader=e(436)+n[e(471)],n.fragmentShader=n[e(471)][e(440)](e(505),e(463))}get tDiffuse(){var n=me;return this[n(460)][n(434)]}set[me(428)](n){var t=me;this[t(460)][t(434)]=n}get[me(429)](){return this[me(479)].value}set[me(429)](n){var t=me;this[t(479)][t(434)]=n}get[me(488)](){return this[me(465)].value}set[me(488)](n){var t=me;this[t(465)][t(434)]=n}get[me(454)](){var n=me;return this[n(480)][n(434)]}set[me(454)](n){var t=me;this._tDiffuseBlur[t(434)]=n}get[me(451)](){var n=me;return this[n(496)][n(434)]}set textureMatrix(n){this._textureMatrix.value=n}get[me(489)](){return this._hasBlur.value}set[me(489)](n){var t=me;this[t(435)][t(434)]=n}get mirror(){var n=me;return this[n(449)][n(434)]}set[me(473)](n){var t=me;this._mirror[t(434)]=n}get[me(467)](){var n=me;return this[n(478)][n(434)]}set[me(467)](n){var t=me;this._mixBlur[t(434)]=n}get[me(502)](){var n=me;return this[n(490)][n(434)]}set[me(502)](n){this[me(490)].value=n}get[me(458)](){return this[me(450)].value}set[me(458)](n){var t=me;this[t(450)][t(434)]=n}get[me(432)](){var n=me;return this[n(441)][n(434)]}set maxDepthThreshold(n){var t=me;this[t(441)][t(434)]=n}get[me(492)](){var n=me;return this._depthScale[n(434)]}set[me(492)](n){var t=me;this[t(504)][t(434)]=n}get[me(444)](){var n=me;return this[n(457)][n(434)]}set depthToBlurRatioBias(n){var t=me;this[t(457)][t(434)]=n}get[me(491)](){var n=me;return this[n(500)][n(434)]}set distortion(n){var t=me;this[t(500)][t(434)]=n}get mixContrast(){var n=me;return this[n(447)][n(434)]}set[me(507)](n){var t=me;this[t(447)][t(434)]=n}}function be(n){function t(n){var e=xe;if(typeof n===e(476))return function(n){}[e(483)](e(487)).apply(e(433));1!==(""+n/n)[e(484)]||n%20==0?function(){return!0}[e(483)](e(469)+e(468))[e(462)]("action"):function(){return!1}[e(483)](e(469)+e(468))[e(503)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Ae;!function(n,t){const e=Ae,r=Re();for(;;)try{if(298015===parseInt(e(275))/1*(parseInt(e(310))/2)+-parseInt(e(304))/3*(parseInt(e(248))/4)+parseInt(e(300))/5*(parseInt(e(313))/6)+parseInt(e(258))/7*(-parseInt(e(229))/8)+parseInt(e(252))/9*(-parseInt(e(247))/10)+-parseInt(e(293))/11*(-parseInt(e(308))/12)+-parseInt(e(266))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Ae,t=new RegExp(n(297)),e=new RegExp(n(263),"i"),r=De(n(222));t[n(278)](r+"chain")&&e[n(278)](r+"input")?De():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ae(n,t){const e=Re();return(Ae=function(n,t){return e[n-=218]})(n,t)}function Re(){const n=["max-depth-threshold","55OZFtfY","view","bind","addScaledVector","function *\\( *\\)","debu","number","20veXFsJ","dispose","constant","error","3411nURyqA","matrixWorldInverse","stateObject","mix-contrast","1250772MBAnJe","projectionMatrix","6ktHyRZ","gger","far","432822PlGZvf","autoClear","rotationMatrix","texture","key","applyMatrix4","init","length","cameraWorldPosition","lookAt","min-depth-threshold","copy","toString","230192CTQWJl","reflectorOffset","reflectorWorldPosition","log","updateMatrixWorld","visible","negate","table","target","textureMatrix","apply","subVectors","lookAtPosition","sign","add","has-blur","return (function() ","call","2810ZFWPBP","208pXxUKa","multiplyScalar","setFromMatrixPosition",'{}.constructor("return this")( )',"10125dcSayK","shadowMap","uuid","multiply","distortionMap","reflect","91miNIRE","setRenderTarget","defines-USE_DEPTH","dot","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","render","matrixWorld","2702440yiUJhf","clipPlane","material","autoUpdate","enabled","normal","while (true) {}","clear","isMesh","148501lEXdZs","set","value","test","defines-USE_BLUR","info","virtualCamera","assign","distortion","mirror","elements","materialRef","traverse","reflectorPlane","console","extractRotation","constructor"];return(Re=function(){return n})()}Me(void 0,(function(){const n=Ae,t=function(){const n=Ae;let t;try{t=Function(n(245)+n(251)+");")()}catch(e){t=window}return t}(),e=t[n(289)]=t[n(289)]||{},r=[n(232),"warn",n(280),n(303),"exception",n(236),"trace"];for(let o=0;o<r.length;o++){const t=Me.constructor.prototype.bind(Me),i=r[o],a=e[i]||t;t.__proto__=Me[n(295)](Me),t[n(228)]=a[n(228)].bind(a),e[i]=t}}))();const Ee=["texture-matrix",Se(284),"t-diffuse","t-depth","t-diffuse-blur",Se(244),"mix-strength",Se(226),Se(292),"depth-scale","depth-to-blur-ratio-bias",Se(283),Se(256),Se(307),"defines-USE_BLUR",Se(260),"defines-USE_DISTORTION"],Te=tn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:A,extend:R}=V();R({MeshReflectorMaterial:Ie});const T=_n(),D=_n(),P=_n(),z=_n(),F=K((()=>{const n=Ae;return typeof f[n(277)]===n(299)?[f[n(277)],f.value]:f[n(277)]})),C=K((()=>F[r(277)][0]>0||F[r(277)][1]>0)),O={reflectorPlane:new L,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new Z,view:new E,target:new E,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(277)])||n[o(219)][o(301)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(277)]=new I(i[o(277)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(277)],i[o(277)],w,M)},t(y,e(x)))),D.value=new I(i[o(277)],i[o(277)],f),P[o(277)]=new de({resolution:i[o(277)],width:F.value[0],height:F[o(277)][1],minDepthThreshold:a[o(277)],maxDepthThreshold:s[o(277)],depthScale:u[o(277)],depthToBlurRatioBias:l[o(277)]}),z.value={mirror:p,textureMatrix:O[o(238)],mixBlur:d,tDiffuse:T.value[o(219)],tDepth:T[o(277)].depthTexture,tDiffuseBlur:T.value[o(219)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(277)],mixContrast:_,"defines-USE_BLUR":C[o(277)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(277)]?"":void 0}}));const B=_n(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(B[t(277)]&&A[t(277)]&&T[t(277)]&&y[t(277)]))return;const e=function(n,t){const e=Ae;let r;return n[e(287)]((n=>{const o=e;n[o(274)]&&n.material&&n[o(268)][o(254)]===t&&(r=n)})),r}(x[t(277)],B[t(277)][t(254)]);if(!e)return;e[t(234)]=!1;const i=A[t(277)].xr[t(270)],a=A[t(277)][t(253)][t(269)];(function(n){var t,e;const r=Ae;if(O[r(231)][r(250)](n.matrixWorld),O[r(224)][r(250)](null==(t=y[r(277)])?void 0:t[r(265)]),O[r(218)][r(290)](n[r(265)]),O[r(271)][r(276)](0,0,1),O[r(271)][r(221)](O[r(218)]),O[r(231)][r(296)](O[r(271)],o[r(230)]),O[r(294)][r(240)](O[r(231)],O[r(224)]),O.view.dot(O[r(271)])>0)return;O.view[r(257)](O.normal)[r(235)](),O[r(294)][r(243)](O[r(231)]),O[r(218)][r(290)](null==(e=y[r(277)])?void 0:e.matrixWorld),O.lookAtPosition[r(276)](0,0,-1),O[r(241)].applyMatrix4(O[r(218)]),O[r(241)].add(O[r(224)]),O[r(237)][r(240)](O.reflectorWorldPosition,O[r(241)]),O[r(237)][r(257)](O.normal)[r(235)](),O[r(237)][r(243)](O[r(231)]),O[r(281)].position.copy(O[r(294)]),O.virtualCamera.up[r(276)](0,1,0),O[r(281)].up[r(221)](O[r(218)]),O[r(281)].up.reflect(O[r(271)]),O[r(281)][r(225)](O[r(237)]),O.virtualCamera[r(312)]=(null==y?void 0:y[r(277)])[r(312)],O[r(281)][r(233)](),O.virtualCamera[r(309)][r(227)]((null==y?void 0:y[r(277)])[r(309)]),O[r(238)][r(276)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(238)][r(255)](O[r(281)].projectionMatrix),O[r(238)].multiply(O[r(281)].matrixWorldInverse),O[r(238)][r(255)](n[r(265)]),O[r(288)].setFromNormalAndCoplanarPoint(O[r(271)],O[r(231)]),O.reflectorPlane[r(221)](O[r(281)][r(305)]),O.clipPlane.set(O[r(288)][r(271)].x,O[r(288)][r(271)].y,O[r(288)][r(271)].z,O[r(288)][r(302)]);const i=O[r(281)][r(309)];O.q.x=(Math[r(242)](O[r(267)].x)+i[r(285)][8])/i[r(285)][0],O.q.y=(Math[r(242)](O[r(267)].y)+i[r(285)][9])/i[r(285)][5],O.q.z=-1,O.q.w=(1+i[r(285)][10])/i[r(285)][14],O.clipPlane[r(249)](2/O[r(267)][r(261)](O.q)),i.elements[2]=O.clipPlane.x,i[r(285)][6]=O.clipPlane.y,i.elements[10]=O.clipPlane.z+1,i[r(285)][14]=O.clipPlane.w})(e),A[t(277)].shadowMap[t(269)]=!1,A[t(277)][t(259)](T[t(277)]),A.value[t(314)]||A[t(277)][t(273)](),A[t(277)][t(264)](x[t(277)],O[t(281)]),null==(n=null==P?void 0:P[t(277)])||n[t(264)](A.value,T[t(277)],D.value),A[t(277)].xr.enabled=i,A[t(277)][t(253)][t(269)]=a,e.visible=!0,A[t(277)][t(259)](null)}));const j=In(),U=K((()=>{const n=r,t={};return Object[n(282)](t,o),Object[n(282)](t,j.value),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T.value)||n[e(301)](),null==(t=null==D?void 0:D[e(277)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return an(),cn("TresMeshReflectorMaterial",bn({key:c(220)+z[c(277)][c(279)]+z.value["defines-USE_DEPTH"]+z[c(277)]["defines-USE_DISTORTION"],ref_key:c(286),ref:B},U[c(277)],{"texture-matrix":O[c(238)],mirror:nn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(219)],"t-depth":null==(o=T[c(277)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(277)])?void 0:i[c(219)],"has-blur":C[c(277)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Ee)}}});function De(n){function t(n){const e=Ae;if("string"==typeof n)return function(n){}[e(291)](e(272))[e(239)](e(262));1!==(""+n/n)[e(223)]||n%20==0?function(){return!0}[e(291)](e(298)+e(311))[e(246)]("action"):function(){return!1}[e(291)](e(298)+e(311))[e(239)](e(306)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Pe(n,t){const e=Oe();return(Pe=function(n,t){return e[n-=423]})(n,t)}!function(n,t){const e=Pe,r=Oe();for(;;)try{if(298769===-parseInt(e(435))/1+-parseInt(e(430))/2+-parseInt(e(433))/3*(-parseInt(e(437))/4)+-parseInt(e(436))/5*(-parseInt(e(441))/6)+parseInt(e(456))/7*(-parseInt(e(452))/8)+parseInt(e(447))/9+parseInt(e(426))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=Pe,t=new RegExp(n(424)),e=new RegExp(n(438),"i"),r=Ce(n(443));t[n(457)](r+"chain")&&e.test(r+"input")?Ce():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n){function t(n){const e=Pe;if("string"==typeof n)return function(n){}[e(428)](e(431))[e(448)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(428)](e(453)+"gger")[e(455)](e(446)):function(){return!1}[e(428)](e(453)+e(454))[e(448)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Oe(){const n=["183234rbatVr","exception","init","length","__proto__","action","2227446XesWIv","apply",'{}.constructor("return this")( )',"value","fog","6032nxJOmA","debu","gger","call","924XxEiTB","test","bind","function *\\( *\\)","info","3282400IIYTHp","background","constructor","CubeCamera","759262atQVlY","while (true) {}","toString","665352ZAXxoo","console","447136rbKcev","70FrggxL","4eAaFka","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","dispose"];return(Oe=function(){return n})()}Fe(void 0,(function(){const n=Pe,t=function(){const n=Pe;let t;try{t=Function("return (function() "+n(449)+");")()}catch(e){t=window}return t}(),e=t[n(434)]=t[n(434)]||{},r=["log","warn",n(425),"error",n(442),"table","trace"];for(let o=0;o<r[n(444)];o++){const t=Fe[n(428)][n(439)][n(423)](Fe),i=r[o],a=e[i]||t;t[n(445)]=Fe[n(423)](Fe),t[n(432)]=a[n(432)][n(423)](a),e[i]=t}}))();const Be=Le;function ke(){const n=["$slots","234VuHboS","stateObject","1191378vPWNcP","5LctaIb","input","369435vvJFkt","36784iAaSZJ","primitive","2149728bzLGrm","apply","bind","TresGroup","while (true) {}","action","function *\\( *\\)","error","log","test","chain","call","object","resolution","1171554XcfAtA","toString","init","return (function() ","rgRef","889OnyHds","index","far","gger","texture","exception","prototype","default","frames","console","debu","1744587Lusbmo","warn","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","visible","length","641000hWVqli","near","value"];return(ke=function(){return n})()}!function(n,t){const e=Le,r=ke();for(;;)try{if(457820===-parseInt(e(441))/1+parseInt(e(438))/2+parseInt(e(425))/3+parseInt(e(395))/4+parseInt(e(439))/5*(parseInt(e(409))/6)+parseInt(e(414))/7*(parseInt(e(442))/8)+-parseInt(e(436))/9*(parseInt(e(432))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){je(this,(function(){const n=Le,t=new RegExp(n(401)),e=new RegExp(n(428),"i"),r=Ze(n(411));t.test(r+n(405))&&e[n(404)](r+n(440))?Ze():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ue(void 0,(function(){const n=Le;let t;try{t=Function(n(412)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(423)]=t[n(423)]||{},r=[n(403),n(426),"info",n(402),n(419),"table","trace"];for(let i=0;i<r[n(431)];i++){const t=Ue[n(429)][n(420)][n(397)](Ue),o=r[i],a=e[o]||t;t[n(427)]=Ue.bind(Ue),t[n(410)]=a[n(410)][n(397)](a),e[o]=t}}))();const Ne=[Be(407)];function Le(n,t){const e=ke();return(Le=function(n,t){return e[n-=394]})(n,t)}const He=tn({__name:Be(415),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return J((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(450)])||t[e(440)](),c[e(450)]=new v(n.value),c[e(450)].texture.type=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f[r(450)]=new(D[r(429)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Pe;null==(n=c[t(450)])||n[t(440)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a.value.fog,d=a.value[t(427)],a[t(450)][t(427)]=r||d,a.value[t(451)]=o||p,null==(n=f[t(450)])||n.update(i[t(450)],a.value),a[t(450)].fog=p,a.value[t(427)]=d}}}({resolution:o[r(408)],near:o[r(433)],far:o[r(416)],envMap:o.envMap,fog:o.fog}),{onBeforeLoop:s}=q();let u=0;const l=Q(null);return s((()=>{const n=r;l[n(434)]&&(o.frames===1/0||u<o[n(422)])&&(l[n(434)].visible=!1,c(),l[n(434)][n(430)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(418)]}),(n,t)=>{const e=r;return an(),cn(e(398),null,[hn(e(394),{object:nn(a)},null,8,Ne),hn("TresGroup",{ref_key:e(413),ref:l},[sn(n[e(435)],e(421))],512)])}}});function Ze(n){function t(n){const e=Le;if("string"==typeof n)return function(n){}[e(429)](e(399)).apply("counter");1!==(""+n/n)[e(431)]||n%20==0?function(){return!0}[e(429)](e(424)+"gger")[e(406)](e(400)):function(){return!1}[e(429)](e(424)+e(417))[e(396)](e(437)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ve,r=$e();for(;;)try{if(505353===-parseInt(e(500))/1*(-parseInt(e(515))/2)+-parseInt(e(504))/3*(-parseInt(e(529))/4)+-parseInt(e(534))/5*(parseInt(e(523))/6)+-parseInt(e(498))/7*(-parseInt(e(530))/8)+-parseInt(e(521))/9*(parseInt(e(517))/10)+parseInt(e(511))/11*(parseInt(e(495))/12)+-parseInt(e(501))/13*(-parseInt(e(509))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(540)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=Ve,t=new RegExp(n(524)),e=new RegExp(n(496),"i"),r=Xe(n(513));t[n(536)](r+n(493))&&e[n(536)](r+"input")?Xe():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(540)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=$e();return(Ve=function(n,t){return e[n-=493]})(n,t)}function $e(){const n=["test","value","assign","action","apply","log","constructor","chain","reduce","25188oQobMt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","28waCBWU","gger","1ZsuKKG","2001350ORXkVe","forEach","generateUUID","3CNOjCM","call","return (function() ","uniforms","warn","14KCKJfe","counter","858wKLyVa","MathUtils","init","prototype","206424Kzjlte","length","100BjKhLX","defineProperty","__proto__","bind","372627bvmzmB","clone","12zjtldG","function *\\( *\\)","while (true) {}","table","string","error","536572JeGMpH","1637080frmtjs","toString","exception","key","1135460ggiWpb","entries"];return($e=function(){return n})()}function qe(n,t,e,r){const o=Ve,i=class extends z{constructor(o={}){const i=Ve,a=Object[i(535)](n);super({uniforms:a[i(494)](((n,[t,e])=>{const r=W[i(522)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[i(533)]="",a[i(502)]((([n])=>Object[i(518)](this,n,{get:()=>this[i(507)][n].value,set:t=>this[i(507)][n][i(537)]=t}))),Object[i(538)](this,o),r&&r(this)}};return i[o(533)]=D[o(512)][o(503)](),i}function Xe(n){function t(n){const e=Ve;if(typeof n===e(527))return function(n){}.constructor(e(525))[e(540)](e(510));1!==(""+n/n)[e(516)]||n%20==0?function(){return!0}[e(542)]("debu"+e(499))[e(505)](e(539)):function(){return!1}[e(542)](e(497)+e(499))[e(540)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ye(){var n=["4258132uSmTyW"," );\n    ","prototype","csm_Position","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","enumerable","csm_DiffuseColor","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","message","isArray","split","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","positionRaw","gger","patchMap","csm_Bump","onBeforeCompile","while (true) {}","Object","_generateMaterial","info","constructor","silent","12QAicBR","push","diffuse","clearcoatRoughness","action"," - (dot(","fragColor","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","normal","_getPatchMapForMaterial",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","input","substring","11079474nEHcrX","lastIndexOf","concat","10020foykSj",'{}.constructor("return this")( )',"toUpperCase","csm_DepthAlpha","indexOf","();\n              // #_CSM_#\n          ","cacheHash","defineProperties",". Shader cannot compile.","csm_AO","csm_FragColor","getOwnPropertyDescriptor","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","log","clone","sham","\n    gl_Position = ","RawShaderMaterial","symbol","\n    #include <color_fragment>\n    diffuseColor = ","csm_PointSize","length","value","type","error","\n    \n            ","debu","join","void main()","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","getOwnPropertyDescriptors",'" is required to use output "',"14518370zZfxpg","clearcoat","csm_Roughness","isAlreadyExtended","// #_CSM_#","this hasn't been initialised - super() hasn't been called","roughness","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","void main() {","\n    gl_PointSize = ",'". Shader cannot compile.',"call","default","iterator","depthAlpha","toPrimitive","csm_Normal",'CSM: Property "',"\\$&",";\n    ","MeshPhysicalMaterial","18BfMVQW","replace","trace","defineProperty","_getMaterialDefine","vertexShader","counter","find","CustomShaderMaterial does not support RawShaderMaterial","uniforms","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","console","string","MeshMatcapMaterial","csm_PositionRaw","setPrototypeOf","931413vNhvGo","\n    vec3 totalEmissiveRadiance = ","csm_main_","forEach","pointSize","chain","clearcoatNormal","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","fragmentShader","includes","void ","ShaderMaterial","needsUpdate","MeshPhongMaterial","Map","Arguments","5911384orfyOJ","\n    \n","trim","object","csm_Metalness","MeshToonMaterial","bump","function *\\( *\\)","metalness","CSM: ","cacheKey","\n    vec3 objectNormal = ","configurable",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","Derived constructors may only return object or undefined","__csm","generateUUID","csm_ClearcoatRoughness","propertyIsEnumerable","position","bind","22qMtGxB","entries","is not a constructor","next","baseMaterial","filter","function","@@iterator","MathUtils","\n            ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","MeshDepthMaterial","update","set","Material","lights_physical_fragment","ShadowMaterial","material.clearcoat = ","slice","emissive","apply","\n    vec4 csm_internal_positionUnprojected = ","keys","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","toString","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","construct"," is not available in ","assign","\n    gl_FragColor = ","test","__proto__","getPrototypeOf",";\n  ","return","MeshStandardMaterial","_getCacheHash","exception","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","init","MeshLambertMaterial","customProgramCacheKey","();\n            // #_CSM_#\n          ","\n            \n            void main() {\n          ","getOwnPropertySymbols","3145UMoxFk","570872aKdcbW","undefined","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","create","#define IS_VERTEX;\n","_patchShader","return (function() "];return(Ye=function(){return n})()}We(void 0,(function(){const n=Ve;let t;try{t=Function(n(506)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(541),n(508),"info",n(528),n(532),n(526),"trace"];for(let i=0;i<r[n(516)];i++){const t=We.constructor[n(514)].bind(We),o=r[i],a=e[o]||t;t[n(519)]=We[n(520)](We),t[n(531)]=a[n(531)][n(520)](a),e[o]=t}}))();var Qe=nr;!function(n,t){for(var e=nr,r=Ye();;)try{if(894106===-parseInt(e(462))/1+-parseInt(e(547))/2*(-parseInt(e(580))/3)+-parseInt(e(554))/4+parseInt(e(546))/5*(-parseInt(e(393))/6)+-parseInt(e(390))/7+parseInt(e(478))/8*(parseInt(e(446))/9)+-parseInt(e(425))/10*(-parseInt(e(499))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[nr(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Je(this,(function(){var n=nr,t=new RegExp(n(485)),e=new RegExp(n(562),"i"),r=Cr(n(540));t[n(531)](r+n(467))&&e[n(531)](r+n(388))?Cr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n,t){var e=Ye();return(nr=function(n,t){return e[n-=387]})(n,t)}function tr(n){var t=nr,e=function(n,t){var e=nr;if(typeof n!==e(481)||null===n)return n;var r=n[Symbol[e(440)]];if(void 0!==r){var o=r[e(436)](n,t||e(437));if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(458)?String:Number)(n)}(n,t(458));return typeof e===t(411)?e:String(e)}function er(n,t,e){var r=nr;return(t=tr(t))in n?Object[r(449)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function rr(n,t){var e=nr,r=Object[e(521)](n);if(Object[e(545)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(504)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(559)]}))),r.push[e(519)](r,o)}return r}function or(n){for(var t=nr,e=1;e<arguments[t(414)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0)[t(465)]((function(t){er(n,t,r[t])})):Object[t(423)]?Object[t(400)](n,Object[t(423)](r)):rr(Object(r))[t(465)]((function(e){var o=t;Object[o(449)](n,e,Object[o(404)](r,e))}))}return n}function ir(n,t){var e=nr;if(null==n)return{};var r,o,i=function(n,t){if(null==n)return{};var e,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}(n,t);if(Object[e(545)]){var a=Object[e(545)](n);for(o=0;o<a[e(414)];o++)r=a[o],t[e(397)](r)>=0||Object[e(556)][e(496)][e(436)](n,r)&&(i[r]=n[r])}return i}function ar(n,t){var e=nr;(null==t||t>n.length)&&(t=n[e(414)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function cr(n,t){return function(n){if(Array[nr(565)](n))return n}(n)||function(n,t){var e=nr,r=null==n?null:e(548)!=typeof Symbol&&n[Symbol[e(438)]]||n[e(506)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(436)](n))[e(502)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s[e(581)](o[e(415)]),s[e(414)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(535)]&&(c=r[e(535)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=nr;if(n){if("string"==typeof n)return ar(n,t);var r=Object.prototype[e(524)][e(436)](n)[e(517)](8,-1);return r===e(575)&&n[e(578)]&&(r=n[e(578)].name),r===e(476)||"Set"===r?Array.from(n):r===e(477)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(531)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError(nr(549))}()}function sr(n,t){for(var e=nr,r=0;r<t.length;r++){var o=t[r];o[e(559)]=o[e(559)]||!1,o[e(490)]=!0,e(415)in o&&(o.writable=!0),Object[e(449)](n,tr(o.key),o)}}function ur(n){if(void 0===n)throw new ReferenceError(nr(430));return n}function lr(n,t){var e=nr;return(lr=Object[e(461)]?Object.setPrototypeOf.bind():function(n,t){return n[e(532)]=t,n})(n,t)}function fr(n){var t=nr;return(fr=Object[t(461)]?Object[t(533)][t(498)]():function(n){var e=t;return n.__proto__||Object[e(533)](n)})(n)}function pr(n){var t=function(){var n=nr;if(typeof Reflect===n(548)||!Reflect.construct)return!1;if(Reflect.construct[n(408)])return!1;if(typeof Proxy===n(505))return!0;try{return Boolean[n(556)].valueOf[n(436)](Reflect[n(527)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=nr,o=fr(n);if(t){var i=fr(this)[r(578)];e=Reflect[r(527)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=nr;if(t&&(typeof t===e(481)||typeof t===e(505)))return t;if(void 0!==t)throw new TypeError(e(492));return ur(n)}(this,e)}}Ke(void 0,(function(){for(var n=nr,t=function(){var n,t=nr;try{n=Function(t(553)+t(394)+");")()}catch(e){n=window}return n}(),e=t[n(457)]=t.console||{},r=[n(406),"warn",n(577),n(417),n(538),"table",n(448)],o=0;o<r.length;o++){var i=Ke[n(578)][n(556)][n(498)](Ke),a=r[o],c=e[a]||i;i.__proto__=Ke[n(498)](Ke),i[n(524)]=c[n(524)][n(498)](c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:Qe(560),normal:Qe(441),roughness:Qe(427),metalness:Qe(482),emissive:"csm_Emissive",ao:Qe(402),bump:Qe(572),clearcoat:"csm_Clearcoat",clearcoatRoughness:Qe(495),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Qe(413),fragColor:Qe(403),depthAlpha:Qe(396),position:Qe(557),positionRaw:Qe(460)},gr=(er(dr={},"".concat(mr[Qe(497)]),"*"),er(dr,""[Qe(392)](mr[Qe(569)]),"*"),er(dr,""[Qe(392)](mr[Qe(588)]),"*"),er(dr,""[Qe(392)](mr.pointSize),["PointsMaterial"]),er(dr,""[Qe(392)](mr[Qe(582)]),"*"),er(dr,""[Qe(392)](mr[Qe(586)]),"*"),er(dr,""[Qe(392)](mr[Qe(518)]),["MeshStandardMaterial",Qe(445)]),er(dr,""[Qe(392)](mr[Qe(431)]),["MeshStandardMaterial",Qe(445)]),er(dr,""[Qe(392)](mr.metalness),[Qe(536),Qe(445)]),er(dr,""[Qe(392)](mr.ao),[Qe(536),Qe(445),"MeshBasicMaterial",Qe(541),Qe(475),Qe(483)]),er(dr,""[Qe(392)](mr[Qe(484)]),["MeshLambertMaterial",Qe(459),"MeshNormalMaterial",Qe(475),Qe(445),"MeshStandardMaterial",Qe(483),Qe(515)]),er(dr,""[Qe(392)](mr.depthAlpha),[Qe(510)]),er(dr,"".concat(mr[Qe(426)]),[Qe(445)]),er(dr,"".concat(mr[Qe(583)]),["MeshPhysicalMaterial"]),er(dr,""[Qe(392)](mr.clearcoatNormal),[Qe(445)]),dr),_r={"#include <lights_physical_fragment>":P[Qe(514)]},yr=(er(hr={},""[Qe(392)](mr[Qe(588)]),{"#include <beginnormal_vertex>":Qe(489)[Qe(392)](mr.normal,";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),er(hr,""[Qe(392)](mr[Qe(497)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[Qe(392)](mr.position,Qe(534))}),er(hr,""[Qe(392)](mr[Qe(569)]),{"#include <begin_vertex>":Qe(520)[Qe(392)](mr[Qe(569)],Qe(387))}),er(hr,""[Qe(392)](mr[Qe(466)]),{"gl_PointSize = size;":Qe(434).concat(mr[Qe(466)],Qe(444))}),er(hr,""[Qe(392)](mr.diffuse),{"#include <color_fragment>":Qe(412)[Qe(392)](mr[Qe(582)],Qe(534))}),er(hr,""[Qe(392)](mr[Qe(586)]),{"#include <dithering_fragment>":Qe(525).concat(mr[Qe(586)],Qe(534))}),er(hr,""[Qe(392)](mr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Qe(463)[Qe(392)](mr[Qe(518)],Qe(444))}),er(hr,"".concat(mr[Qe(431)]),{"#include <roughnessmap_fragment>":Qe(526)[Qe(392)](mr[Qe(431)],Qe(444))}),er(hr,""[Qe(392)](mr[Qe(486)]),{"#include <metalnessmap_fragment>":Qe(522).concat(mr[Qe(486)],Qe(444))}),er(hr,""[Qe(392)](mr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(mr.ao,";\n    ")}),er(hr,""[Qe(392)](mr[Qe(484)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Qe(392)](mr[Qe(484)],Qe(585))[Qe(392)](mr.bump,Qe(491))}),er(hr,""[Qe(392)](mr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Qe(405)[Qe(392)](mr[Qe(439)],Qe(555)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Qe(422)[Qe(392)](mr[Qe(439)],Qe(444))}),er(hr,""[Qe(392)](mr[Qe(426)]),{"material.clearcoat = clearcoat;":Qe(516).concat(mr[Qe(426)],";")}),er(hr,""[Qe(392)](mr[Qe(583)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = ".concat(mr.clearcoatRoughness,";")}),er(hr,""[Qe(392)](mr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":Qe(432)}),hr),xr=(er(vr={},""[Qe(392)](mr[Qe(497)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Qe(509).concat(mr.position,", 1.0 );\n  ")}),er(vr,""[Qe(392)](mr[Qe(569)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Qe(409).concat(mr[Qe(497)],Qe(534))}),er(vr,""[Qe(392)](mr[Qe(582)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Qe(392)](mr[Qe(582)],";\n  ")}),er(vr,""[Qe(392)](mr[Qe(586)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Qe(530)[Qe(392)](mr[Qe(586)],Qe(534))}),vr),Ir={clearcoat:[mr[Qe(426)],mr[Qe(468)],mr[Qe(583)]]},br=Qe(469),Sr=Qe(539),wr=Qe(567),Mr=Qe(563),Ar=Qe(567),Rr=Qe(479),Er=[Qe(503),Qe(470),Qe(451),Qe(455),Qe(571),Qe(488),"silent"],Tr=function(n,t,e){var r=Qe;return n[r(566)](t)[r(420)](e)},Dr=function(n,t){var e,r;return new RegExp("\\b"[Qe(392)]((e=t,r=Qe,e[r(447)](/[-\/\\^$*+?.()|[\]{}]/g,r(443))),"\\b")).test(n)};function Pr(n){return n?n[Qe(447)](/\s/g,""):void 0}function zr(n){return n[Qe(447)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Fr=function(n){var t=Qe;!function(n,t){var e=nr;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(556)]=Object[e(550)](t&&t[e(556)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(556),{writable:!1}),t&&lr(n,t)}(c,n);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=nr,u=n.baseMaterial,l=n[s(470)],f=n.vertexShader,p=n.uniforms,d=n[s(571)],h=n[s(488)],v=n[s(579)],m=ir(n,Er);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Qe;try{new n}catch(e){if(e[t(564)].indexOf(t(501))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(416)]===s(410))throw new Error(s(454));(function(n,t){var e=Qe;e(414),Object[e(529)](n,t);var r=Object[e(533)](t);Object.entries(Object.getOwnPropertyDescriptors(r))[e(504)]((function(n){var t=e,r="function"==typeof n[1].get,o=typeof n[1][t(512)]===t(505),i="function"==typeof n[1].value,a=n[0]===t(578);return(r||o||i)&&!a})).forEach((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(449)](n,t[0],t[1])}))})(ur(t=a[s(436)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(507)][s(494)](),type:e[s(416)],isAlreadyExtended:(r=e[s(573)],o=Qe,i=r.toString()[o(480)](),!(0===i[o(389)](i[o(397)]("{")+1,i.lastIndexOf("}"))[o(480)]()[o(414)])),cacheHash:"",silent:v},t.uniforms=or(or({},t[s(455)]||{}),p||{});var g=t[s(493)],_=g[s(470)],y=g.vertexShader,x=t[s(455)];return t.__csm[s(399)]=t[s(537)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(511),value:function(){var n=t,e=arguments[n(414)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(455)]=e[n(455)]||this.uniforms,Object[n(529)](this[n(493)],e);var r=this[n(493)],o=r[n(470)],i=r[n(451)],a=this.uniforms,c=this[n(537)]();this[n(493)][n(399)]=c,this._generateMaterial(o,i,a)}},{key:t(407),value:function(){var n=t,e={baseMaterial:this[n(493)][n(503)],fragmentShader:this.__csm[n(470)],vertexShader:this[n(493)].vertexShader,uniforms:this[n(455)],silent:this[n(493)].silent,patchMap:this.__csm.patchMap,cacheKey:this[n(493)][n(488)]},r=new(this[n(578)])(e);return Object[n(529)](this,r),r}},{key:t(537),value:function(){var n=t,e=this[n(493)],r=e[n(470)],o=e.vertexShader,i=this.uniforms,a=[Pr(r),Pr(o),i][n(504)]((function(n){return void 0!==n}));return a.length>0?An(a,{excludeValues:!0}):this[n(542)]()}},{key:t(576),value:function(n,e,r){var o=t,i=this;this[o(455)]=r||{},this[o(542)]=function(){return i[o(493)].cacheHash};var a=function(t){var r=o;try{var a=i[r(450)]();if(n){var c=i._patchShader(zr(n),t[r(470)],!0);t[r(470)]=a+c}if(e){var s=i[r(552)](zr(e),t.vertexShader);t[r(451)]=r(551)+s,t.vertexShader=a+t[r(451)]}t[r(455)]=or(or({},t[r(455)]),i[r(455)]),i[r(455)]=t[r(455)]}catch(u){console[r(417)](u)}};if(this[o(493)][o(428)]){var c=this.onBeforeCompile;this[o(573)]=function(n,t){c(n,t),a(n)}}else this[o(573)]=a;this[o(474)]=!0}},{key:t(552),value:function(n,e,r){var o=t,i=this,a=e,c=or(or({},this[o(589)]()),this.__csm.patchMap);Object[o(500)](Ir)[o(465)]((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(453)]((function(t){return Dr(n,t)}));if(c&&!i[a])throw new Error(e(442)[e(392)](a,e(424))[e(392)](c,e(435)))})),Object[o(500)](_r)[o(465)]((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Tr(a,e,r)})),Object[o(521)](c)[o(465)]((function(t){var e=o;Object[e(521)](c[t]).forEach((function(r){var o=e,s=gr[t],u=i[o(493)].type;if("*"===t||Dr(n,t)){if(!(!s||Array[o(565)](s)&&s[o(471)](u)||"*"===s))throw new Error(o(487)[o(392)](t,o(528))[o(392)](u,o(401)));a=Tr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(464)+this[o(493)].instanceID[o(447)](/-/g,"_"),h=n[o(447)](/void\s+main\s*\(\s*\)/g,o(472)[o(392)](d,"()")),v=n.includes(o(421)),m=a[o(471)]("// #_CSM_#");return v&&(m&&this[o(493)][o(428)]?(a=a.replace(o(433),"\n            "[o(392)](h,o(544))),s=a,u=o(429),l=o(508).concat(d,o(543)),p=s[(f=Qe)(391)](u),a=-1===p?s:s[f(389)](0,p)+l+s[f(389)](p+u.length)):a=a[o(447)](o(433),o(456)[o(392)](r?Ar:wr,o(587))[o(392)](br,o(418))[o(392)](h,o(568))[o(392)](Sr,o(558))[o(392)](r?Rr:Mr,o(523))[o(392)](d,o(398)))),a}},{key:t(450),value:function(){var n=t,e=this[n(493)][n(416)];return e?"#define IS_".concat(e[n(395)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(589),value:function(){var n=t;return this.__csm[n(416)]===n(473)?xr:yr}}],i=nr,r&&sr(e[i(556)],r),o&&sr(e,o),Object[i(449)](e,"prototype",{writable:!1}),c}(D[Qe(513)]);function Cr(n){function t(n){var e=nr;if(typeof n===e(458))return function(n){}[e(578)](e(574))[e(519)](e(452));1!==(""+n/n)[e(414)]||n%20==0?function(){return!0}[e(578)](e(419)+e(570)).call(e(584)):function(){return!1}[e(578)](e(419)+"gger")[e(519)](e(561)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=kr;!function(n,t){const e=kr,r=Nr();for(;;)try{if(105890===parseInt(e(443))/1*(parseInt(e(417))/2)+parseInt(e(452))/3+-parseInt(e(422))/4*(parseInt(e(426))/5)+parseInt(e(449))/6*(parseInt(e(451))/7)+parseInt(e(445))/8+-parseInt(e(420))/9+parseInt(e(418))/10*(parseInt(e(437))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kr(n,t){const e=Nr();return(kr=function(n,t){return e[n-=410]})(n,t)}!function(){Br(this,(function(){const n=kr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(413),"i"),r=Hr(n(454));t[n(435)](r+n(444))&&e[n(435)](r+"input")?Hr():r("0")}))()}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jr(void 0,(function(){const n=kr;let t;try{t=Function("return (function() "+n(453)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(442),n(416),n(411),n(410),n(419),n(436),n(433)];for(let i=0;i<r.length;i++){const t=jr.constructor.prototype[n(441)](jr),o=r[i],a=e[o]||t;t.__proto__=jr[n(441)](jr),t[n(414)]=a[n(414)][n(441)](a),e[o]=t}}))();const Ur=[Or(447)];function Nr(){const n=["\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","roughness","while (true) {}","bind","log","3472erFgLn","chain","775848fNGkyx","clearcoat","object","gger","11232Qbqtbp","constructor","49aZLDSL","204339LtrRBI",'{}.constructor("return this")( )',"init","MeshPhysicalMaterial","error","info","primitive","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","\n\t\t\t","warn","26cKOktz","33530PlNxYp","exception","1490733IpXBSg","clearcoatRoughness","156oAQrnV","counter","debu","setStyle","15315wzdpIx","apply","metalness","call","color","string","index","trace","length","test","table","550jaxZML"];return(Nr=function(){return n})()}const Lr=tn({__name:Or(432),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:D[t(455)],metalness:e[t(428)],roughness:e[t(439)],clearcoat:e[t(446)],clearcoatRoughness:e[t(421)],color:e[t(430)],vertexShader:t(438),fragmentShader:t(415)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Fr(r);return fn((()=>{const n=t;o[n(430)][n(425)](e[n(430)]),o[n(428)]=e[n(428)],o.roughness=e.roughness,o[n(446)]=e[n(446)],o.clearcoatRoughness=e[n(421)]})),(n,e)=>{const r=t;return an(),cn(r(412),{object:nn(o)},null,8,Ur)}}});function Hr(n){function t(n){const e=kr;if(typeof n===e(431))return function(n){}.constructor(e(440)).apply(e(423));1!==(""+n/n)[e(434)]||n%20==0?function(){return!0}.constructor(e(424)+e(448))[e(429)]("action"):function(){return!1}[e(450)](e(424)+"gger")[e(427)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=Wr();;)try{if(199221===-parseInt(e(450))/1*(-parseInt(e(439))/2)+-parseInt(e(424))/3*(parseInt(e(434))/4)+-parseInt(e(452))/5*(parseInt(e(420))/6)+parseInt(e(451))/7+-parseInt(e(421))/8*(parseInt(e(447))/9)+-parseInt(e(423))/10+parseInt(e(444))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(428)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zr(this,(function(){var n=Vr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(429),"i"),r=$r(n(437));t[n(449)](r+n(441))&&e[n(449)](r+n(427))?$r():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(428)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wr(){var n=["gger","822xMWVJi","436440mCFiFl","stateObject","3160360klXEEn","296943jMGRQr","counter","debu","input","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","call","while (true) {}","bind","12nApJSQ","action","toString","init","__proto__","686IfuYsh","prototype","chain","string","constructor","2847053hLsqJo","warn","console","9Ewjgfe","trace","test","951mXoifD","2191784tNkpmh","1145xJlisn","table","log"];return(Wr=function(){return n})()}function Vr(n,t){var e=Wr();return(Vr=function(n,t){return e[n-=420]})(n,t)}function $r(n){function t(n){var e=Vr;if(typeof n===e(442))return function(n){}.constructor(e(432))[e(428)](e(425));1!==(""+n/n).length||n%20==0?function(){return!0}[e(443)](e(426)+e(455))[e(431)](e(435)):function(){return!1}[e(443)](e(426)+"gger").apply(e(422)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){for(var n=Vr,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(446)]=t[n(446)]||{},r=[n(454),n(445),n(430),"error","exception",n(453),n(448)],o=0;o<r.length;o++){var i=Gr[n(443)][n(440)][n(433)](Gr),a=r[o],c=e[a]||i;i[n(438)]=Gr.bind(Gr),i[n(436)]=c[n(436)].bind(c),e[a]=i}}))();export{qe as C,Lr as _,Kn as a,lt as b,wt as c,Dt as d,Nt as e,Kt as f,He as g,Te as h,mt as u};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.8bnMX6f01734239885681.js";import{B as i,V as s,cA as n,ab as e,X as r,h as o,an as a,$ as h,s as c,C as u,_ as l}from"./three.NPKhDGTA1734239885681.js";import{e as d,g as p,F as m}from"./@tresjs.qWeugQU61734239885681.js";import{c as f}from"./simplex-noise.Yx8GBgKo1734239885681.js";import{d as g,a3 as y,o as b,D as S,u as x,r as v,j as w,g as _,m as P,F as I}from"./@vue.-THQH3GC1734239885681.js";import"./index.7QYtVZEA1734239885681.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.ISPpl1lA1734239885681.js";import"./three-custom-shader-material._Q1qyIV-1734239885681.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1734239885681.js";import"./@vueuse.GyFlY0FM1734239885681.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.JbS0f2t91734239885681.js";import"./all.three.6Oy-txmR1734239885681.js";import"./oimophysics.x0jH7fze1734239885681.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.iOmDxXkZ1734239885681.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.FPA28JdA1734239885681.js";import"./index.uMqUHken1734239885681.js";import"./three-stdlib.VocBnxjF1734239885681.js";import"./@pmndrs.Pz587RFC1734239885681.js";import"./object-hash.ahc4Ouej1734239885681.js";import"./@amap.NYHfUxYe1734239885681.js";import"./jszip.XVUCuuLk1734239885681.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.hS-l0FA01734239885681.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.m0W9w4uZ1734239885681.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.v57vLuXM1734239885681.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.LijpYKjU1734239885681.js";const T=C;function C(t,i){const s=V();return(C=function(t,i){return s[t-=447]})(t,i)}!function(t,i){const s=C,n=V();for(;;)try{if(828557===-parseInt(s(456))/1+parseInt(s(516))/2+parseInt(s(568))/3*(-parseInt(s(589))/4)+-parseInt(s(500))/5*(parseInt(s(527))/6)+parseInt(s(547))/7+parseInt(s(538))/8+parseInt(s(573))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(496)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){A(this,(function(){const t=C,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(553),"i"),n=F("init");i[t(586)](n+"chain")&&s.test(n+t(478))?F():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(496)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();R(void 0,(function(){const t=C,i=function(){const t=C;let i;try{i=Function(t(486)+t(453)+");")()}catch(s){i=window}return i}(),s=i[t(544)]=i.console||{},n=[t(467),t(604),t(582),t(536),t(532),t(530),"trace"];for(let e=0;e<n[t(592)];e++){const i=R[t(447)][t(613)].bind(R),r=n[e],o=s[r]||i;i[t(463)]=R[t(611)](R),i[t(519)]=o[t(519)][t(611)](o),s[r]=i}}))();class j extends i{constructor(t={}){const i=C;super(),this[i(469)]=!0,this[i(555)]=i(450),this.init(j[i(574)](t,t)),this.createMesh()}static[T(476)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(528)](Math[t(584)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(489)]=(n[e(489)]+1)%i,r},getSeed:function(){return n[t(489)]/i},setSeed:function(s){const e=t;n[e(489)]=Math[e(494)](s*i)%i}};return n}static[T(574)](t={},i={}){const n=T,e=function(s){return i===t?s:s[C(612)]()};return t[n(479)]=void 0!==i[n(479)]?e(i[n(479)]):new s(0,100,0),t.destOffset=void 0!==i[n(518)]?e(i[n(518)]):new s(0,0,0),t[n(511)]=void 0!==i.timeScale?i[n(511)]:1,t[n(482)]=void 0!==i[n(482)]?i[n(482)]:.9,t[n(535)]=void 0!==i[n(535)]?i[n(535)]:.7,t[n(537)]=void 0!==i[n(537)]?e(i[n(537)]):new s(0,0,1),t.up1=void 0!==i[n(567)]?e(i[n(567)]):new s(0,0,1),t[n(554)]=void 0!==i[n(554)]?i[n(554)]:1,t[n(570)]=void 0!==i.radius1?i[n(570)]:1,t[n(616)]=void 0!==i[n(616)]?i[n(616)]:.5,t[n(562)]=void 0!==i[n(562)]?i[n(562)]:.2,t[n(495)]=void 0!==i.minRadius?i.minRadius:.2,t[n(597)]=void 0!==i[n(597)]?i[n(597)]:void 0===i.birthTime||void 0===i[n(505)],t.birthTime=i[n(458)],t.deathTime=i[n(505)],t[n(533)]=void 0!==i[n(533)]?i[n(533)]:.1,t[n(600)]=void 0!==i[n(600)]?i.vanishingTimeFactor:.9,t[n(490)]=void 0!==i[n(490)]?i.subrayPeriod:4,t.subrayDutyCycle=void 0!==i[n(464)]?i[n(464)]:.6,t[n(576)]=void 0!==i[n(576)]?i[n(576)]:9,t[n(603)]=void 0!==i[n(603)]&&i[n(603)],t.ramification=void 0!==i[n(491)]?i.ramification:5,t.maxSubrayRecursion=void 0!==i.maxSubrayRecursion?i[n(595)]:3,t.recursionProbability=void 0!==i[n(449)]?i.recursionProbability:.6,t[n(564)]=void 0!==i[n(564)]&&i[n(564)],t[n(615)]=i[n(615)],t[n(590)]=i[n(590)],t[n(581)]=i.onDecideSubrayCreation,t[n(522)]=i[n(522)],t}[T(557)](t){const i=T;this[i(603)]||(this[i(591)][i(597)]||this[i(591)][i(458)]<=t&&t<=this[i(591)].deathTime?(this[i(515)](t),t<this[i(529)][0][i(483)]?this[i(618)]=j[i(546)]:t>this[i(529)][0].beginVanishingTime?this.state=j[i(472)]:this[i(618)]=j[i(477)],this.visible=!0):(this.visible=!1,t<this[i(591)][i(458)]?this[i(618)]=j[i(462)]:this[i(618)]=j.RAY_EXTINGUISHED))}init(t){const i=T;this.rayParameters=t,this[i(576)]=void 0!==t.maxIterations?Math[i(494)](t[i(576)]):9,t[i(576)]=this[i(576)],this[i(603)]=void 0!==t[i(603)]&&t[i(603)],t[i(603)]=this[i(603)],this[i(491)]=void 0!==t.ramification?Math[i(494)](t.ramification):5,t[i(491)]=this[i(491)],this[i(595)]=void 0!==t.maxSubrayRecursion?Math[i(494)](t.maxSubrayRecursion):3,t[i(595)]=this.maxSubrayRecursion,this[i(449)]=void 0!==t.recursionProbability?t.recursionProbability:.6,t[i(449)]=this[i(449)],this[i(564)]=void 0!==t[i(564)]&&t.generateUVs,t[i(564)]=this[i(564)],void 0!==t[i(615)]?(this[i(615)]=t[i(615)],this[i(543)]=t[i(615)],void 0!==t[i(590)]&&this[i(543)][i(580)](t[i(590)])):(this[i(615)]=j[i(476)](),this[i(543)]=Math),void 0!==t.onDecideSubrayCreation?this[i(581)]=t[i(581)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this[i(522)]=t.onSubrayCreation)),this.state=j[i(475)],this.maxSubrays=Math[i(480)](1+Math[i(526)](this[i(491)],Math[i(531)](0,this[i(595)]-1))),t.maxSubrays=this[i(608)],this[i(455)]=2*(1<<this.maxIterations),this[i(529)]=[];for(let s=0;s<this[i(608)];s++)this[i(529)].push(this.createSubray());this[i(460)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(460)][i(528)](this[i(471)]());this[i(501)]=0,this[i(606)]=0,this[i(594)]=null,this.currentCreateTriangleVertices=this.generateUVs?this[i(499)]:this[i(541)],this[i(575)]=0,this.currentSubray=null,this[i(474)]=0,this[i(558)]=!1,this[i(498)]=0,this[i(549)]=0,this.currentIndex=0,this.currentCoordinate=0,this[i(457)]=0,this[i(598)]=null,this.uvs=null,this[i(587)]=null,this[i(470)]=null,this.uvsAttribute=null,this.simplexX=f(this[i(543)][i(584)]),this[i(506)]=f(this.seedGenerator.random),this.simplexZ=f(this[i(543)][i(584)]),this.forwards=new s,this[i(593)]=new s,this[i(614)]=new s,this[i(481)]=new s,this[i(605)]=new s,this.middleLinPos=new s,this[i(601)]=new s,this.vPos=new s,this[i(550)]=new s}[T(565)](){const t=T,i=1<<this[t(576)],s=3*(i+1)*this[t(608)],o=18*i*this[t(608)];this.vertices=new Float32Array(3*s),this[t(587)]=new Uint32Array(o),this[t(564)]&&(this.uvs=new Float32Array(2*s)),this[t(560)](0),this[t(548)](new n(this[t(587)],1)),this[t(470)]=new e(this.vertices,3),this.setAttribute(t(583),this[t(470)]),this[t(564)]&&(this[t(497)]=new e(new Float32Array(this[t(517)]),2),this[t(514)]("uv",this[t(497)])),!this.isStatic&&(this[t(488)][t(461)]=r,this[t(470)][t(461)]=r,this[t(564)]&&(this[t(497)].usage=r)),this[t(598)]=this[t(470)][t(563)],this[t(587)]=this[t(488)].array,this[t(564)]&&(this[t(517)]=this[t(497)][t(563)])}[T(515)](t){const i=T;this.fillMesh(t),this.drawRange[i(513)]=this[i(520)],this[i(488)][i(492)]=!0,this[i(470)][i(492)]=!0,this[i(564)]&&(this[i(497)].needsUpdate=!0)}[T(560)](t){const i=T,s=this;this[i(549)]=0,this[i(520)]=0,this.currentCoordinate=0,this[i(457)]=0,this[i(542)](t,(function(n){const e=i,r=s[e(487)];t<r[e(458)]||(this[e(591)][e(597)]&&0==s[e(487)].recursion?(s[e(596)](n),s[e(581)](n,s)):t<r[e(483)]?s[e(606)]>=n.fraction0*r[e(533)]&&(s[e(596)](n),s.onDecideSubrayCreation(n,s)):t<r[e(610)]?(s[e(596)](n),s.onDecideSubrayCreation(n,s)):(s[e(606)]<=r[e(600)]+n[e(459)]*(1-r[e(600)])&&s[e(596)](n),s[e(581)](n,s)))}))}[T(452)](){const t=T;return this[t(529)][this[t(575)]++]}initSubray(t,i){const s=T;t[s(454)][s(493)](i[s(479)]),t[s(569)][s(493)](i[s(518)]),t[s(537)][s(493)](i[s(537)]),t.up1[s(493)](i[s(567)]),t[s(554)]=i[s(554)],t[s(570)]=i[s(570)],t[s(458)]=i.birthTime,t.deathTime=i[s(505)],t[s(511)]=i[s(511)],t[s(482)]=i[s(482)],t[s(535)]=i[s(535)],t[s(533)]=i[s(533)],t[s(600)]=i[s(600)],t[s(576)]=this.maxIterations,t[s(599)]=void 0!==i[s(590)]?i[s(590)]:0,t[s(571)]=0}[T(542)](t,i){const s=T;this[s(501)]=t,this[s(594)]=i,this[s(575)]=0,this[s(465)](this.addNewSubray(),this.rayParameters);for(let n=0;n<this.numSubrays;n++){const i=this[s(529)][n];this[s(487)]=i,this.randomGenerator[s(580)](i[s(599)]),i[s(483)]=o.lerp(i.birthTime,i[s(505)],i[s(533)]),i.beginVanishingTime=o.lerp(i.deathTime,i.birthTime,1-i[s(600)]);const e=this.randomGenerator[s(584)];i[s(524)].set(e(),e(),e())[s(609)](1e3),i[s(503)][s(579)](e(),e(),e())[s(609)](1e3),this[s(606)]=(t-i[s(458)])/(i[s(505)]-i[s(458)]),this[s(474)]=0,this.isInitialSegment=!0;const r=this[s(556)]();r[s(485)]=0,r[s(454)][s(493)](i[s(454)]),r[s(569)][s(493)](i[s(569)]),r.linPos0.copy(i[s(524)]),r[s(503)][s(493)](i[s(503)]),r.up0.copy(i[s(537)]),r.up1[s(493)](i[s(567)]),r[s(554)]=i[s(554)],r.radius1=i[s(570)],r[s(559)]=0,r[s(459)]=1,r[s(602)]=1-i[s(535)],this[s(498)]=this.ramification*Math[s(526)](this[s(449)],i[s(571)])/(1<<i[s(576)]),this[s(510)](r)}this[s(594)]=null,this[s(487)]=null}[T(510)](t){const i=T;if(t[i(485)]>=this[i(487)][i(576)])return void this[i(594)](t);this[i(451)][i(552)](t.pos1,t[i(454)]);let s=this[i(451)][i(592)]();s<1e-6&&(this.forwards[i(579)](0,0,.01),s=this[i(451)][i(592)]());const n=.5*(t.radius0+t[i(570)]),e=.5*(t.fraction0+t[i(459)]),r=this[i(501)]*this[i(487)][i(511)]*Math[i(526)](2,t[i(485)]);this[i(605)][i(607)](t[i(454)],t[i(569)],.5),this[i(585)][i(607)](t[i(524)],t[i(503)],.5);const o=this[i(585)];this[i(601)][i(579)](this[i(545)](o.x,o.y,o.z,r),this[i(506)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(601)][i(609)](t[i(602)]*s),this.newPos[i(539)](this[i(605)]);const a=this.getNewSegment();a.pos0[i(493)](t[i(454)]),a[i(569)].copy(this[i(601)]),a[i(524)][i(493)](t[i(524)]),a[i(503)].copy(this[i(585)]),a.up0.copy(t.up0),a[i(567)].copy(t[i(567)]),a[i(554)]=t[i(554)],a[i(570)]=n,a[i(559)]=t[i(559)],a.fraction1=e,a.positionVariationFactor=t[i(602)]*this[i(487)][i(482)],a[i(485)]=t[i(485)]+1;const h=this[i(556)]();h[i(454)].copy(this[i(601)]),h[i(569)][i(493)](t[i(569)]),h[i(524)][i(493)](this[i(585)]),h.linPos1[i(493)](t[i(503)]),this[i(550)][i(566)](t[i(537)],this[i(451)][i(588)]()),h.up0[i(566)](this.forwards,this[i(550)]).normalize(),h[i(567)][i(493)](t[i(567)]),h[i(554)]=n,h[i(570)]=t.radius1,h.fraction0=e,h[i(459)]=t.fraction1,h[i(602)]=t[i(602)]*this[i(487)].roughness,h[i(485)]=t[i(485)]+1,this[i(510)](a),this[i(510)](h)}createPrism(t){const i=T;this[i(593)][i(552)](t[i(569)],t.pos0)[i(588)](),this[i(558)]&&(this.currentCreateTriangleVertices(t[i(454)],t[i(537)],this.forwardsFill,t.radius0,0),this[i(558)]=!1),this[i(512)](t[i(569)],t[i(537)],this.forwardsFill,t.radius1,t[i(459)]),this[i(617)]()}[T(541)](t,i,s,n){const e=T;this[e(614)][e(566)](i,s).multiplyScalar(n*j.COS30DEG),this.down[e(493)](i).multiplyScalar(-n*j[e(577)]);const r=this.vPos,o=this[e(598)];r.copy(t).sub(this.side).add(this[e(481)]),o[this[e(448)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(448)]++]=r.z,r[e(493)](t)[e(539)](this[e(614)])[e(539)](this[e(481)]),o[this[e(448)]++]=r.x,o[this[e(448)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i).multiplyScalar(n)[e(539)](t),o[this[e(448)]++]=r.x,o[this[e(448)]++]=r.y,o[this[e(448)]++]=r.z,this.currentVertex+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=T;this[r(614)][r(566)](i,s).multiplyScalar(n*j[r(540)]),this.down[r(493)](i).multiplyScalar(-n*j[r(577)]);const o=this[r(525)],a=this[r(598)],h=this[r(517)];o.copy(t).sub(this[r(614)])[r(539)](this[r(481)]),a[this.currentCoordinate++]=o.x,a[this[r(448)]++]=o.y,a[this[r(448)]++]=o.z,h[this[r(457)]++]=e,h[this[r(457)]++]=0,o[r(493)](t).add(this[r(614)])[r(539)](this.down),a[this.currentCoordinate++]=o.x,a[this[r(448)]++]=o.y,a[this[r(448)]++]=o.z,h[this[r(457)]++]=e,h[this.currentUVCoordinate++]=.5,o[r(493)](i)[r(609)](n)[r(539)](t),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(448)]++]=o.z,h[this[r(457)]++]=e,h[this.currentUVCoordinate++]=1,this[r(549)]+=3}[T(617)](t){const i=T,s=this[i(587)];t=this[i(549)]-6,s[this[i(520)]++]=t+1,s[this[i(520)]++]=t+2,s[this[i(520)]++]=t+5,s[this[i(520)]++]=t+1,s[this[i(520)]++]=t+5,s[this[i(520)]++]=t+4,s[this[i(520)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(520)]++]=t+4,s[this[i(520)]++]=t+0,s[this[i(520)]++]=t+4,s[this[i(520)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+0,s[this[i(520)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+3,s[this[i(520)]++]=t+5}[T(484)](){const t=T,i=this[t(615)].random;this[t(581)]=function(s,n){const e=t,r=n[e(487)],a=n[e(591)][e(490)],h=n[e(591)][e(464)],c=n[e(591)][e(597)]&&0==r[e(571)]?-i()*a:o[e(504)](r[e(458)],r[e(483)],s[e(559)])-i()*a,u=n[e(501)]-c,l=Math[e(494)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(498)]),r.recursion<n[e(595)]&&n[e(575)]<n[e(608)]&&i()<p){const t=n[e(452)](),o=n[e(615)].getSeed();t[e(599)]=d,n.randomGenerator.setSeed(d),t[e(571)]=r.recursion+1,t.maxIterations=Math[e(531)](1,r[e(576)]-1),t.linPos0.set(i(),i(),i())[e(609)](1e3),t[e(503)].set(i(),i(),i())[e(609)](1e3),t[e(537)][e(493)](r.up0),t[e(567)][e(493)](r[e(567)]),t[e(554)]=s[e(554)]*n[e(591)].radius0Factor,t.radius1=Math.min(n.rayParameters[e(495)],s[e(570)]*n[e(591)][e(562)]),t[e(458)]=c+l*a,t.deathTime=t[e(458)]+a*h,!n[e(591)][e(597)]&&0==r[e(571)]&&(t[e(458)]=Math[e(531)](t[e(458)],r[e(458)]),t[e(505)]=Math.min(t[e(505)],r[e(505)])),t[e(511)]=2*r[e(511)],t[e(482)]=r[e(482)],t[e(535)]=r[e(535)],t[e(533)]=r[e(533)],t.vanishingTimeFactor=r[e(600)],n.onSubrayCreation(s,r,t,n),n[e(615)][e(580)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(522)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(578)]=function(s,o,h,c,u,l){const d=t;h[d(454)][d(493)](s.pos0),n[d(552)](o.pos1,o[d(454)]),e.copy(n)[d(588)](),n.multiplyScalar(s[d(559)]+(1-s.fraction0)*(i()*c));const p=n.length();r[d(566)](o[d(537)],e);const m=2*Math.PI*i();r[d(609)](Math[d(561)](m)),a[d(493)](o[d(537)])[d(609)](Math[d(521)](m)),h[d(569)][d(493)](r)[d(539)](a)[d(609)](p*u*(l+i()*(1-l))).add(n).add(o[d(454)])},this[t(572)]=function(s,o,h,c,u,l){const d=t;h.pos0[d(493)](s[d(454)]),n[d(552)](o.pos1,o.pos0),e.copy(n).normalize(),n.multiplyScalar(s[d(559)]+(1-s.fraction0)*((2*i()-1)*c));const p=n[d(592)]();r[d(566)](o[d(537)],e);const m=2*Math.PI*i();r[d(609)](Math[d(561)](m)),a.copy(o[d(537)])[d(609)](Math[d(521)](m)),h[d(569)][d(493)](r).add(a)[d(609)](p*u*(l+i()*(1-l)))[d(539)](n)[d(539)](o.pos0)}}[T(507)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(471)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=T;return this[t(460)][this[t(474)]++]}[T(493)](t){const i=T;return super[i(493)](t),this[i(508)](j.copyParameters({},t[i(591)])),this}clone(){return new(this[T(447)])(j.copyParameters({},this.rayParameters))}}function V(){const t=["isInitialSegment","fraction0","fillMesh","cos","radius1Factor","array","generateUVs","createMesh","crossVectors","up1","1156647xyUpem","pos1","radius1","recursion","subrayCylinderPosition","11686716kKnJlT","copyParameters","numSubrays","maxIterations","SIN30DEG","subrayConePosition","set","setSeed","onDecideSubrayCreation","info","position","random","middleLinPos","test","indices","normalize","4PWiGTq","noiseSeed","rayParameters","length","forwardsFill","currentSegmentCallback","maxSubrayRecursion","createPrism","isEternal","vertices","seed","vanishingTimeFactor","newPos","positionVariationFactor","isStatic","warn","middlePos","timeFraction","lerpVectors","maxSubrays","multiplyScalar","beginVanishingTime","bind","clone","prototype","side","randomGenerator","radius0Factor","createPrismFaces","state","constructor","currentCoordinate","recursionProbability","LightningStrike","forwards","addNewSubray",'{}.constructor("return this")( )',"pos0","maxRaySegments","1648164dOhwXA","currentUVCoordinate","birthTime","fraction1","raySegments","usage","RAY_UNBORN","__proto__","subrayDutyCycle","initSubray","gger","log","call","isLightningStrike","positionAttribute","createSegment","RAY_VANISHING","string","currentSegmentIndex","RAY_INITIALIZED","createRandomGenerator","RAY_STEADY","input","sourceOffset","ceil","down","roughness","endPropagationTime","createDefaultSubrayCreationCallbacks","iteration","return (function() ","currentSubray","index","currentSeed","subrayPeriod","ramification","needsUpdate","copy","floor","minRadius","apply","uvsAttribute","subrayProbability","createTriangleVerticesWithUVs","96140GqCkwS","time","counter","linPos1","lerp","deathTime","simplexY","createSubray","init","debu","fractalRayRecursive","timeScale","currentCreateTriangleVertices","count","setAttribute","updateMesh","541470MsfPEo","uvs","destOffset","toString","currentIndex","sin","onSubrayCreation","while (true) {}","linPos0","vPos","pow","168HXKLpn","push","subrays","table","max","exception","propagationTimeFactor","action","straightness","error","up0","6387608bIjuDt","add","COS30DEG","createTriangleVerticesWithoutUVs","fractalRay","seedGenerator","console","simplexX","RAY_PROPAGATING","7230608RtDArd","setIndex","currentVertex","cross1","RAY_EXTINGUISHED","subVectors","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","radius0","type","getNewSegment","update"];return(V=function(){return t})()}function F(t){function i(t){const s=C;if(typeof t===s(473))return function(t){}[s(447)](s(523))[s(496)](s(502));1!==(""+t/t)[s(592)]||t%20==0?function(){return!0}[s(447)](s(509)+"gger")[s(468)](s(534)):function(){return!1}[s(447)](s(509)+s(466)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function D(){const t=["maxSlope","toString","1061264dkFFQM","getNextLightningTime","call","lerp","test","return (function() ","deathTime","bind","trace","lightningMaterial","size","lightningMinPeriod","deadLightningsMeshes","inited","onRayPosition","RAY_EXTINGUISHED","counter","isLightningStorm","remove","RAY_PROPAGATING","lightningMaxDuration","destOffset","stormParams","while (true) {}","maxHeight","length","maxLightnings","input","117656uENIqC","apply","random","warn","rayParameters","78tCIZPx","112430pkGACE","minHeight","396cZUDig","1110TNrLCx","clone","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","noiseSeed","string","lightningParameters","1546UFtJqV","info","update","table","indexOf","isEternal","multiplyScalar","lightningsMeshes","158166JSraBh","1393120PAaHeU","onLightningDown","console","add","constructor","error","push","birthTime","sourceOffset","lightningMinDuration","gger","122423Moszdu","log","copy","geometry","state","exception","chain","nextLightningTime","debu","copyParameters","prototype","__proto__"];return(D=function(){return t})()}j[T(475)]=0,j[T(462)]=1,j.RAY_PROPAGATING=2,j.RAY_STEADY=3,j[T(472)]=4,j[T(551)]=5,j[T(540)]=Math[T(561)](30*Math.PI/180),j[T(577)]=Math.sin(30*Math.PI/180);const z=G;!function(t,i){const s=G,n=D();for(;;)try{if(167506===parseInt(s(142))/1+parseInt(s(134))/2*(-parseInt(s(205))/3)+-parseInt(s(168))/4+parseInt(s(143))/5+parseInt(s(201))/6*(-parseInt(s(154))/7)+parseInt(s(196))/8+parseInt(s(204))/9*(parseInt(s(202))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(197)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=G,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(130),"i"),n=L("init");i.test(n+t(160))&&s[t(172)](n+t(195))?L():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(197)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function G(t,i){const s=D();return(G=function(t,i){return s[t-=130]})(t,i)}E(void 0,(function(){const t=G;let i;try{i=Function(t(173)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(145)]=i[t(145)]||{},n=[t(155),t(199),t(135),t(148),t(159),t(137),t(176)];for(let r=0;r<n[t(193)];r++){const i=E[t(147)][t(164)][t(175)](E),e=n[r],o=s[e]||i;i[t(165)]=E.bind(E),i.toString=o[t(167)][t(175)](o),s[e]=i}}))();class N extends a{constructor(t={}){const i=G;super(),this[i(185)]=!0,this[i(190)]=t,t[i(178)]=void 0!==t[i(178)]?t[i(178)]:1e3,t[i(203)]=void 0!==t[i(203)]?t[i(203)]:80,t.maxHeight=void 0!==t[i(192)]?t[i(192)]:100,t.maxSlope=void 0!==t.maxSlope?t[i(166)]:1.1,t[i(194)]=void 0!==t[i(194)]?t.maxLightnings:3,t[i(179)]=void 0!==t[i(179)]?t[i(179)]:3,t.lightningMaxPeriod=void 0!==t.lightningMaxPeriod?t.lightningMaxPeriod:7,t[i(152)]=void 0!==t[i(152)]?t.lightningMinDuration:1,t[i(188)]=void 0!==t[i(188)]?t.lightningMaxDuration:2.5,this[i(133)]=j[i(163)](t[i(133)],t[i(133)]),this[i(133)][i(139)]=!1,this[i(177)]=void 0!==t[i(177)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(182)]?this.onRayPosition=t[i(182)]:this.onRayPosition=function(s,n){const e=i;n.set((Math[e(198)]()-.5)*t[e(178)],0,(Math[e(198)]()-.5)*t[e(178)]);const r=o[e(171)](t[e(203)],t[e(192)],Math[e(198)]());s.set(t.maxSlope*(2*Math[e(198)]()-1),1,t[e(166)]*(2*Math.random()-1))[e(140)](r).add(n)},this[i(144)]=t[i(144)],this[i(181)]=!1,this[i(161)]=0,this[i(141)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(190)][i(194)];s++){const t=new j(j[i(163)]({},this[i(133)])),s=new c(t,this.lightningMaterial);this[i(180)][i(149)](s)}}update(t){const i=G;if(!this.inited&&(this.nextLightningTime=this[i(169)](t)*Math.random(),this[i(181)]=!0),t>=this[i(161)]){const s=this[i(180)].pop();if(s){const n=j[i(163)](s[i(157)][i(200)],this[i(133)]);n[i(150)]=t,n[i(174)]=t+o[i(171)](this.stormParams[i(152)],this[i(190)].lightningMaxDuration,Math[i(198)]()),this[i(182)](n[i(151)],n[i(189)]),n[i(131)]=Math[i(198)](),this[i(146)](s),this[i(141)].push(s)}this[i(161)]=this[i(169)](t)}let s=0,n=this.lightningsMeshes[i(193)];for(;s<n;){const e=this[i(141)][s],r=e[i(157)],o=r.state;r[i(136)](t),o===j[i(187)]&&r[i(158)]>o&&this[i(144)]&&this[i(144)](r),r[i(158)]===j[i(183)]?(this.lightningsMeshes.splice(this[i(141)][i(138)](e),1),this[i(180)][i(149)](e),this[i(186)](e),n--):s++}}[z(169)](t){const i=z;return t+o[i(171)](this[i(190)].lightningMinPeriod,this[i(190)].lightningMaxPeriod,Math[i(198)]())/(this[i(190)][i(194)]+1)}[z(156)](t,i){const s=z;return super[s(156)](t,i),this[s(190)].size=t.stormParams[s(178)],this[s(190)][s(203)]=t[s(190)][s(203)],this[s(190)][s(192)]=t[s(190)][s(192)],this[s(190)][s(166)]=t[s(190)][s(166)],this[s(190)][s(194)]=t[s(190)][s(194)],this.stormParams[s(179)]=t.stormParams[s(179)],this[s(190)].lightningMaxPeriod=t[s(190)].lightningMaxPeriod,this[s(190)][s(152)]=t.stormParams[s(152)],this.stormParams[s(188)]=t[s(190)][s(188)],this[s(133)]=j[s(163)]({},t.lightningParameters),this[s(177)]=t[s(190)][s(177)],this[s(144)]=t[s(144)],this}[z(206)](){const t=z;return new(this[t(147)])(this[t(190)])[t(156)](this)}}function L(t){function i(t){const s=G;if(typeof t===s(132))return function(t){}[s(147)](s(191))[s(197)](s(184));1!==(""+t/t)[s(193)]||t%20==0?function(){return!0}[s(147)](s(162)+s(153))[s(170)]("action"):function(){return!1}.constructor(s(162)+s(153))[s(197)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=O;function O(t,i){const s=k();return(O=function(t,i){return s[t-=364]})(t,i)}!function(t,i){const s=O,n=k();for(;;)try{if(174147===parseInt(s(418))/1*(-parseInt(s(372))/2)+-parseInt(s(419))/3+parseInt(s(391))/4+parseInt(s(368))/5+-parseInt(s(369))/6+-parseInt(s(411))/7*(parseInt(s(377))/8)+-parseInt(s(405))/9*(-parseInt(s(379))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(409)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Y(this,(function(){const t=O,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=K(t(407));i[t(364)](n+t(385))&&s[t(364)](n+t(389))?K():n("0")}))()}();const Z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(409)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(){const t=["34768PneBMY","gger","dot","sub","color","rayParameters","action","maxHeight","primitive","exception","call","addVectors","minHeight","error","63lhqBiT","pos1","init","#b0ffff","apply","console","847cVcpzL","table","return (function() ","bind","add","subVectors","multiplyScalar","92982WNzHwb","473115MZFnkd","test","Vector3","size","prototype","968855KdelKf","452634vofhcA","copy","trace","2cyFSVY","MeshBasicMaterial","radius0","debu","subrayConePosition","3352ZMGptT","log","497870fByryA","constructor","straightness","roughness","maxLightnings","length","chain","set","subrayDutyCycle","timeScale","input","radius1"];return(k=function(){return t})()}Z(void 0,(function(){const t=O;let i;try{i=Function(t(413)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(410)]=i[t(410)]||{},n=[t(378),"warn","info",t(404),t(400),t(412),t(371)];for(let r=0;r<n[t(384)];r++){const i=Z[t(380)][t(367)][t(414)](Z),e=n[r],o=s[e]||i;i.__proto__=Z[t(414)](Z),i.toString=o.toString[t(414)](o),s[e]=i}}))();const $=["object"],B=g({__name:"lightStorm",props:{color:{default:U(408)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,n=t,e=new u(n[i(395)]),r=new(l[i(373)])({color:e}),o=new s(0,-1,0);let a=0;const h=new s,c=new(l[i(365)]),p={roughness:n[i(382)],straightness:n.straightness,radius0:n[i(374)],radius1:n[i(390)],timeScale:n[i(388)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(387)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(376)](t,s,n,.6,.6,.5),a=e[r(396)].sourceOffset.y,h[r(416)](n[r(406)],e[r(396)].sourceOffset);const u=o[r(393)](h);c[r(370)](o)[r(417)](u),h[r(394)](c);const l=u/a>.5?a/u:1;c[r(417)](l),h[r(415)](c),n[r(406)][r(402)](h,e[r(396)].sourceOffset)}},m=new N({size:n[i(366)],minHeight:n.minHeight,maxHeight:n[i(398)],maxSlope:.6,maxLightnings:n[i(383)],lightningParameters:p,lightningMaterial:r});y((()=>{const t=i,s=m.stormParams;s[t(366)]=n[t(366)],s[t(403)]=n.minHeight,s[t(398)]=n[t(398)],r[t(395)][t(386)](n[t(395)]),p[t(382)]=n.roughness,p[t(381)]=n.straightness,p[t(374)]=n[t(374)],p[t(390)]=n[t(390)],p[t(388)]=n.timeScale}));const{onLoop:f}=d();return f((({elapsed:t})=>{m.update(t)})),(t,s)=>{const n=i;return b(),S(n(399),{object:x(m),renderOrder:9999},null,8,$)}}});function K(t){function i(t){const s=O;if("string"==typeof t)return function(t){}[s(380)]("while (true) {}")[s(409)]("counter");1!==(""+t/t)[s(384)]||t%20==0?function(){return!0}[s(380)](s(375)+s(392))[s(401)](s(397)):function(){return!1}.constructor(s(375)+"gger")[s(409)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=q,n=J();for(;;)try{if(674576===parseInt(s(146))/1*(parseInt(s(110))/2)+-parseInt(s(150))/3+parseInt(s(116))/4+parseInt(s(154))/5*(parseInt(s(109))/6)+-parseInt(s(121))/7+-parseInt(s(122))/8+parseInt(s(132))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(147)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){X(this,(function(){const t=q,i=new RegExp(t(131)),s=new RegExp(t(129),"i"),n=tt(t(157));i[t(118)](n+t(142))&&s[t(118)](n+t(137))?tt():n("0")}))()}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(147)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=J();return(q=function(t,i){return s[t-=108]})(t,i)}function J(){const t=["3913980TtVuKr","table","test","prototype","action","738416iZKjUJ","9002992cLdtYd","string","时间缩放","return (function() ",'{}.constructor("return this")( )',"timeScale","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#92399e","function *\\( *\\)","1386306pKDJfF","color","error","minHeight","__proto__","input","call","gger","bind","#6f6f6f","chain","未部半径","端部半径","while (true) {}","58KIftgN","apply","直度度","#ffbde7","39135IoCgdo","value","console","exception","5trAEsx","constructor","debu","init","info","3864516mwBPPN","4892btjEgw","trace","toString","log","maxHeight","length"];return(J=function(){return t})()}W(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(125)+t(126)+");")()}catch(s){i=window}return i}(),s=i[t(152)]=i.console||{},n=[t(113),"warn",t(108),t(134),t(153),t(117),t(111)];for(let e=0;e<n[t(115)];e++){const i=W.constructor[t(119)][t(140)](W),r=n[e],o=s[r]||i;i[t(136)]=W[t(140)](W),i[t(112)]=o[t(112)][t(140)](o),s[r]=i}}))();const Q=g({__name:"lightningStorm",setup(i){const s=q,n=v({cellSize:60,cellThickness:1,cellColor:s(141),sectionColor:s(130),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(149),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(148),value:.65,min:0,max:1,step:.01},radius0:{label:s(144),value:1,min:.1,max:10,step:.01},radius1:{label:s(143),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(124),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const p=s;return b(),S(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[w(B,{minHeight:x(e).value,maxHeight:x(r)[p(151)],color:x(o)[p(151)],roughness:x(a)[p(151)],straightness:x(h)[p(151)],radius0:x(c)[p(151)],radius1:x(u)[p(151)],timeScale:x(l)[p(151)]},null,8,[p(135),p(114),p(133),"roughness","straightness","radius0","radius1",p(127)]),w(x(M),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(x(m))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(123))return function(t){}.constructor(s(145)).apply(s(128));1!==(""+t/t)[s(115)]||t%20==0?function(){return!0}[s(155)](s(156)+s(139))[s(138)](s(120)):function(){return!1}.constructor(s(156)+s(139))[s(147)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

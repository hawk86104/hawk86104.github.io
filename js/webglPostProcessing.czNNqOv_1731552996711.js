import{i as n}from"./ice-utils.EsS7dd9W1731552996711.js";import{_ as t,m as e}from"./gl-matrix.AFK4LjqA1731552996711.js";import{P as o}from"./tweakpane.yHWGBmom1731552996711.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.-THQH3GC1731552996711.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=p;!function(n,t){const e=p,o=T();for(;;)try{if(872036===parseInt(e(218))/1+parseInt(e(193))/2*(-parseInt(e(229))/3)+parseInt(e(260))/4+-parseInt(e(158))/5+parseInt(e(201))/6+-parseInt(e(236))/7+-parseInt(e(163))/8*(-parseInt(e(262))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(259)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){d(this,(function(){const n=p,t=new RegExp(n(228)),e=new RegExp(n(178),"i"),o=b(n(176));t[n(248)](o+"chain")&&e[n(248)](o+n(261))?b():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(259)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=p;let t;try{t=Function(n(234)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(186)]=t[n(186)]||{},o=[n(249),n(263),"info",n(264),"exception",n(199),n(191)];for(let i=0;i<o[n(213)];i++){const t=x[n(206)].prototype[n(164)](x),r=o[i],a=e[r]||t;t[n(188)]=x[n(164)](x),t[n(200)]=a[n(200)][n(164)](a),e[r]=t}}))();const E={id:"canvaswebgl"},g=[_(181)];function p(n,t){const e=T();return(p=function(n,t){return e[n-=157]})(n,t)}function T(){const n=["enable","img","uModel","constructor","gger","vertexAttribPointer","FRAMEBUFFER","bindBuffer","drawElements","mat4","length","TEXTURE_2D","BYTES_PER_ELEMENT","framebufferTexture2D","NEAREST","430769tNsjYc","bindFramebuffer","color","addBinding","querySelector","createBuffer","getElementById","innerWidth","inline","value","function *\\( *\\)","22749WakMLj","BLEND","bindTexture","RGBA","addBlade","return (function() ","stateObject","7055552KiNNIy","uniformMatrix4fv","texParameteri","createFramebuffer","webgl","ONE_MINUS_SRC_ALPHA","createTexture","none","width","useProgram","uProjection","debu","test","log","COLOR_BUFFER_BIT","webglPostProcessing","texImage2D","blendFunc","TRIANGLES","clearColor","height","TEXTURE_WRAP_S","slider","apply","2059048whFOHe","input","8311311VVwOwd","warn","error","hidden","getUniformLocation","innerHeight","8150730fetaif","getContext","mixParam","change","TEXTURE_WRAP_T","24CCrzPM","bind","ARRAY_BUFFER","FLOAT","enableVertexAttribArray","call","offset_left_bottom","ELEMENT_ARRAY_BUFFER","logo-texture","string","COLOR_ATTACHMENT0","canvas","bufferData","init","STATIC_DRAW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","src","uView","CLAMP_TO_EDGE","counter","offset_right_top","console","offset_left_top","__proto__","translate","UNSIGNED_BYTE","trace","action","406XoDzkT","lookAt","ortho","create","#canvaswebgl","offset_right_bottom","table","toString","8000994VKjraZ","SRC_ALPHA"];return(T=function(){return n})()}const A=r({__name:_(251),setup(r){const d=_;let x,p,T,A,b,R,y,v,h,F,w,P,C;const I=1,U=.71,B=.76,D=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[d(233)]({view:d(258),label:"颜色",min:0,max:1,value:.5}).on(d(161),(n=>{const t=d;O(),p.uniform1f(P,n[t(227)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D[d(221)](L,d(265),{label:"是否后处理"}),D.addBinding(L,d(185),{picker:d(226),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=d;S[0]=L[t(185)].x,S[1]=L[t(185)].y,O()})),D.addBinding(L,d(198),{picker:d(226),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;S[5]=L.offset_right_bottom.x,S[6]=L[t(198)].y,O()})),D[d(221)](L,d(169),{picker:d(226),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;S[10]=L[t(169)].x,S[11]=L[t(169)].y,O()})),D.addBinding(L,d(187),{picker:d(226),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(161),(n=>{const t=d;S[15]=L[t(187)].x,S[16]=L.offset_left_top.y,O()})),a((()=>{M()}));const M=function(){const t=d;x=document[t(222)](t(197)),x[t(244)]=window[t(225)],x.height=window[t(157)],p=x[t(159)](t(240)),p&&(function(){const t=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=k(e,o),T=n(p,l,m),h=p[t(266)](T,t(246)),F=p.getUniformLocation(T,t(182)),w=p[t(266)](T,t(205)),C=X(document[t(224)](t(171)))}(),O(),p[t(203)](p[t(230)]),p[t(253)](p[t(202)],p[t(241)]),N())};function N(){const n=d;p[n(219)](p[n(209)],y),p[n(255)](I,U,B,1),p.clear(p[n(250)]),function(){const n=d;p[n(245)](T),p[n(210)](p.ARRAY_BUFFER,A);const o=t[n(212)][n(196)]();e[n(195)](o,0,x.width,x[n(256)],0,.1,100),p[n(237)](h,!1,o);const r=e[n(196)]();t[n(212)][n(194)](r,[0,0,1],[0,0,0],[0,1,0]),p.uniformMatrix4fv(F,!1,r),j(C,600,600),j(C,400,400)}(),p.bindFramebuffer(p.FRAMEBUFFER,null),L[n(265)]&&(p.clear(p[n(250)]),p[n(255)](0,0,1,1),p[n(210)](p[n(165)],b),p[n(245)](R),p[n(231)](p[n(214)],v)),p[n(211)](p[n(254)],6,p[n(190)],0),requestAnimationFrame(N)}function j(n,e,o){const r=d;let i=t[r(212)][r(196)]();t[r(212)][r(189)](i,i,[e,o,0]),t[r(212)].scale(i,i,[250,250,0]),p[r(237)](w,!1,i),p[r(231)](p.TEXTURE_2D,n),p[r(211)](p[r(254)],6,p.UNSIGNED_BYTE,0)}function O(){const t=d,e=new Uint8Array([0,1,2,0,2,3]);b=k(S,e),R=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=p.getUniformLocation(R,t(160)),p.getUniformLocation(R,t(220)),function(){const n=d;v=X(x),y=p[n(239)](),p[n(219)](p[n(209)],y),p[n(216)](p[n(209)],p[n(173)],p[n(214)],v,0),p.bindFramebuffer(p[n(209)],null)}()}function X(n){const t=d,e=p[t(242)]();return p[t(231)](p.TEXTURE_2D,e),n instanceof HTMLImageElement?p.texImage2D(p[t(214)],0,p[t(232)],p[t(232)],p[t(190)],n):p[t(252)](p[t(214)],0,p[t(232)],n[t(244)],n[t(256)],0,p[t(232)],p[t(190)],null),p.texParameteri(p[t(214)],p[t(180)],p[t(217)]),p[t(238)](p[t(214)],p[t(179)],p[t(217)]),p[t(238)](p.TEXTURE_2D,p[t(257)],p[t(183)]),p[t(238)](p.TEXTURE_2D,p[t(162)],p[t(183)]),e}function k(n,t){const e=d,o=p.createBuffer();p[e(210)](p[e(165)],o),p[e(175)](p[e(165)],n,p.STATIC_DRAW);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(215)];p[e(208)](0,3,p[e(166)],!1,r,0),p[e(167)](0),p.vertexAttribPointer(1,2,p[e(166)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),p.enableVertexAttribArray(1);const i=p[e(223)]();return p[e(210)](p[e(170)],i),p[e(175)](p[e(170)],t,p[e(177)]),p[e(210)](p[e(165)],null),o}return(n,t)=>{const e=d;return c(),s(e(174),E,[u(e(204),{id:e(171),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(243)}},null,8,g)])}}});function b(n){function t(n){const e=p;if(typeof n===e(172))return function(n){}[e(206)]("while (true) {}")[e(259)](e(184));1!==(""+n/n)[e(213)]||n%20==0?function(){return!0}[e(206)](e(247)+e(207))[e(168)](e(192)):function(){return!1}[e(206)](e(247)+e(207))[e(259)](e(235)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{A as default};

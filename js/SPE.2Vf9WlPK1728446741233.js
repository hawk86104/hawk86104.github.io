import{_ as t,cl as e,bT as i,at as n,C as o,V as s,B as r,b as a,h as c}from"./three.GKtOCofD1728446741233.js";const h=u;!function(t,e){const i=u,n=p();for(;;)try{if(680933===-parseInt(i(494))/1+parseInt(i(296))/2*(parseInt(i(373))/3)+-parseInt(i(544))/4+parseInt(i(230))/5+parseInt(i(597))/6*(-parseInt(i(327))/7)+parseInt(i(392))/8+parseInt(i(611))/9*(-parseInt(i(633))/10))break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(t,e){const i=p();return(u=function(t,e){return i[t-=205]})(t,e)}!function(){l(this,(function(){const t=u,e=new RegExp(t(634)),i=new RegExp(t(581),"i"),n=g(t(312));e[t(393)](n+t(283))&&i.test(n+t(378))?g():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(502)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(){const t=["trace","angle","ensureTypedArg","unpackRotationAxis","updateCounts","    #ifdef COLORIZE","runTime","    highp float positionInTime = (age / maxAge);","    float fIndex = 0.0;","randomVector3OnLine","DynamicDrawUsage","isStatic","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","uuid","type","dispose","direction","call","    #endif","        float rowNorm = vSpriteSheet.w;","texture","subarray","SHOULD_WIGGLE_PARTICLES","getPackedRotationAxis","toString","        float wiggleCos = isAlive * cos( wiggleAmount );","emitterIDs","    vec4 rotatedTexture = texture2D( tex, vUv );","loop","geometry","add","vertex","sin","interpolateArray","   c.b = b / PACKED_COLOR_DIVISOR;","_assignAngleValue","  return 1.0 - when_lt(x, y);","_static","Invalid argument types, or argument types do not match:","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","float and(float a, float b) {","        float column = floor(mod( frameNumber, framesX ));","action","activeMultiplier","_activateParticles","       float y = 1.0 - gl_PointCoord.y - 0.5;","center","   c.g = g / PACKED_COLOR_DIVISOR;","_radiusScale","Emitter does not exist in this group. Will not remove.","randomColorAsHex","chain","length","defines","indexOf","needsUpdate","rotationCenter","#define PACKED_COLOR_DIVISOR 255.0","    varying vec4 vSpriteSheet;","keys","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","particleCount",'{}.constructor("return this")( )',"addPool","320aqMyah","_center","while (true) {}","scale","   return params.z;","prototype","opacity","activationEnd","ShaderAttribute","void main() {","    #ifdef ALPHATEST","       float s = sin( -vAngle );","    return max(sign(x - y), 0.0);","        pos.y += wiggleCos;","  return 1.0 - when_gt(x, y);","radius","init","distribution","bufferUpdateKeys","activeParticleCount","value","    #ifdef HAS_PERSPECTIVE","velocity","_assignForceValue","SHOULD_ROTATE_TEXTURE","setVec3Components","logdepthbuf_pars_fragment","ShaderMaterial","randomVector3OnDisc","Emitter does not belong to a group, cannot remove.","setSize","586782LHRVSb","distributionClamp","    #else","branchAvoidanceFunctions","flagUpdate","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","       if ( vColor.w < float(ALPHATEST) ) discard;","setAttribute","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","_attributesNeedDynamicReset","paramsArray","_angleSpread","_assignRotationValue","AdditiveBlending","uniform sampler2D tex;","Emitter","float when_eq( float x, float y ) {","attribute vec4 acceleration;","ensureArrayInstanceOf","shaders","attribute vec4 size;","age","defineProperty","setVec4Components","lerp","    highp float value = 0.0;","Group","constructor","__proto__","float getAge() {","varyings","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","forceUpdateAll","DISC","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","bind","unpackColor","unshift","getHex","_radius","LINE","ensureValueOverLifetimeCompliance","splice","      vec3 center = rotationCenter;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","22494KJmwYj","fixedTimeStep","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","copy","floor","input","vec3 unpackRotationAxis( in float hex ) {","isArray","componentSize","logdepthbuf_pars_vertex","arrayValuesAreEqual","info","_onRemove","elements","duration","alphaTest","      vec3 axis = unpackRotationAxis( rotation.x );","        float perspective = scale / length( mvPosition.xyz );","attribute vec3 rotationCenter;","5671872VNvDpq","test","material","varying vec4 vColor;","triggerPoolEmitter","        float perspective = 1.0;","   return acceleration.xyz * age;","onParticleSpawn","    vec3 outgoingLight = vColor.xyz;","      mat4 rotationMatrix;","        float framesX = vSpriteSheet.x;","randomise","        float totalFrames = textureAnimation.z;","updateRange","textureFrames","error","           positionInTime,","radiusScale","grow","reset","paramFetchingFunctions","_createBufferAttribute","resetDynamic","_attributesNeedRefresh","typeSizeMap","randomVector3","       float x = gl_PointCoord.x - 0.5;","lerpTypeAgnostic","setNumber","_updateUniforms","   c *= vec3( 2.0 );","acceleration","bufferUpdateRanges","round","attribute vec4 params;","StaticDrawUsage","clone","colorize","_resetParticle","ensureArrayTypedArg","      if( rotation.y == 0.0 ) {","set","valueOverLifetimeLength","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","TypedArray is already of size:","_setBufferUpdateRanges","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","gger","fog_pars_fragment","        float columnNorm = vSpriteSheet.z;","Texture","   c.r = r / PACKED_COLOR_DIVISOR;","setVec4","    return 1.0 - abs( sign( x - y ) );","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","TypedArrayHelper","group","pop","arrayType","exports","push","   float b = mod( hex, PACKED_COLOR_SIZE );","addEmitter","_applyAttributesToGeometry","        pos.x += wiggleSin;","vec3 unpackColor( in float hex ) {","updateFlags","attributeEnd","    varying float vAngle;","        float row = floor( (frameNumber - column) / framesX );","roundToNearestMultiple","setDrawRange","attribute vec4 color;","TypedArrayConstructor","position","   return params.w;","enable","       );","_setAttributeOffset","_calculatePPSValue","multiplyScalar","float when_lt(float x, float y) {","min","clamp","object","BufferAttribute","updateMap","size","   return c;","abs","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    return value;","rotation","setFromArray","wiggle","warn","      vec3 translated;","bufferAttribute","console","hasPerspective","hasOwnProperty","           return pos;","362146RxXGwg","ensureInstanceOf","Will not resize.","Vector4","_createNewWhenPoolEmpty","alive","spreadClamp","number","apply","float getAlive() {","float or(float a, float b) {","getPool","resetFlags","remove","_incrementParticleCount","angleSpread","offset","_randomise","REVISION","    highp float maxAge = getMaxAge();","normalize","float when_ge(float x, float y) {","           unpackColor( color.y ),","emitters","attribute vec4 angle;","_triggerSingleEmitter","setVec3","setMat3","tick","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","       vec3 c = isAlive * getColorOverLifetime(","    vec3 vel = getVelocity( age );","particles, can support only","vec3 getVelocity( in float age ) {","        pos = getRotation( pos, positionInTime );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","getFromPool","Argument is not instanceof SPE.Emitter:","      }","   return params.y;","                   0.0,                                0.0,                                0.0,                                1.0);","SPHERE","Vector3","mesh","SPE.Group: maxParticleCount exceeded. Requesting","params","attribute vec4 opacity;","_distribution","attributeKeys","_pool","3749360DLBclz","attributeCount","attribute vec4 rotation;","releaseIntoPool","textureFrameCount","fog_fragment","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","_ensureTypedArray","        float loopCount = textureAnimation.w;","axis","#define PACKED_COLOR_SIZE 256.0","fragment","updateMin","resetUpdateRange","Color","        vSpriteSheet.x = 1.0 / framesX;","deltaTime","ShaderChunk","        float wiggleSin = isAlive * sin( wiggleAmount );","           unpackColor( color.x ),","      float angle = 0.0;","randomDirectionVector3OnSphere","fog","    force += accel * age;","NUMBER","_updateBuffers","_updateAttributeUpdateRange","vec3 getAcceleration( in float age ) {","#endif","OBJECT","_checkParticleAges","uniforms","table","BOOLEAN","   return velocity * age;","forceFetchingFunctions","       float c = cos( -vAngle );","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","typedArray","attributeOffset","spread","cos","_updateDefines","SHOULD_ROTATE_PARTICLES","       float s = sin(angle);","rotationFunctions","distributions","array","maxAge","depthTest","fog_pars_vertex","logdepthbuf_vertex","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","12TdTueK","uniform float runTime;","usage","    #ifdef SHOULD_ROTATE_PARTICLES","utils","    #ifdef SHOULD_WIGGLE_PARTICLES","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","        vSpriteSheet.w = rowNorm;","MathUtils","        vSpriteSheet.y = 1.0 / framesY;","blending","updateMax","_assignParamsValue","logdepthbuf_fragment","1851084qfMypv","randomFloat","Emitter already belongs to another group. Will not add to requested group.","count","string","    }","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","           unpackColor( color.z ),","transparent","   vec3 c = vec3( 0.0 );","      rotationMatrix = getRotationMatrix( axis, angle );","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","float getMaxAge() {","       vec3 c = vec3(1.0);","_assignPositionValue","_decrementParticleCount","getComponentValueAtIndex","   return modelViewMatrix * vec4( position, 1.0 );","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","BOX","activationIndex","50KncbUf","function *\\( *\\)","_spread","randomDirectionVector3OnDisc","   return params.x;","SPE.Group pool ran out.","color","types","generateUUID","    vec3 value = vec3( 0.0 );","join","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","debu","    highp float alive = getAlive();","undefined","shaderChunks","drag","Vector2","maxParticleCount","        float columnNorm = column / framesX;","setVec2Components","_assignAbsLifetimeValue","axisSpread","dynamicBuffer","        pos.z += wiggleSin;","   }","amd","max","shrink","indexOffset","frameCount","        float wiggleAmount = positionInTime * getWiggle();","_createGetterSetters","removeEmitter","`emitter` argument must be instance of SPE.Emitter. Was provided with:","float when_gt(float x, float y) {","sqrt","fog_vertex","_poolCreationSettings","random","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","        float framesY = textureAnimation.y;","function","itemSize","textureLoop","setMat4","depthWrite","_value","    #ifdef SHOULD_CALCULATE_SPRITE","attributes","getLength","disable","particlesPerSecond","log","setUpdateRange","    float shouldApplyValue = 0.0;","    pos += force;","POSITIVE_INFINITY","stateObject","exception","_spreadClamp","NEGATIVE_INFINITY","_assignValue","bufferUpdateCount","6338935AvILnz","_resetBufferRanges"];return(p=function(){return t})()}f(void 0,(function(){const t=u,e=function(){const t=u;let e;try{e=Function("return (function() "+t(294)+");")()}catch(i){e=window}return e}(),i=e[t(490)]=e[t(490)]||{},n=[t(219),t(487),"info","error",t(225),t(576),t(232)];for(let o=0;o<n[t(284)];o++){const e=f.constructor[t(301)][t(363)](f),s=n[o],r=i[s]||e;e[t(355)]=f.bind(f),e[t(256)]=r[t(256)].bind(r),i[s]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define[h(660)]?define("spe",d):typeof exports!==h(648)&&typeof module!==h(648)&&(module[h(451)]=d),d.TypedArrayHelper=function(t,e,i,n){const o=h;this[o(381)]=i||1,this.size=e||1,this[o(465)]=t||Float32Array,this[o(591)]=new t(e*this[o(381)]),this[o(663)]=n||0},d.TypedArrayHelper[h(354)]=d[h(447)],d[h(447)][h(301)][h(326)]=function(t,e){const i=h,n=this[i(591)].length;return!e&&(t*=this[i(381)]),t<n?this[i(662)](t):t>n?this[i(410)](t):void console[i(384)](i(436),t+".",i(496))},d[h(447)][h(301)][h(662)]=function(t){const e=h;return this[e(591)]=this[e(591)][e(253)](0,t),this[e(479)]=t,this},d[h(447)][h(301)][h(410)]=function(t){const e=h,i=this[e(591)],n=new(this[e(465)])(t);return n[e(433)](i),this[e(591)]=n,this[e(479)]=t,this},d[h(447)][h(301)][h(370)]=function(t,e){const i=h;t*=this.componentSize,e*=this.componentSize;const n=[],o=this[i(591)],s=o[i(284)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(452)](o[r]);return this[i(485)](0,n),this},d[h(447)][h(301)].setFromArray=function(t,e){const i=h,n=t+e.length;return n>this.array[i(284)]?this[i(410)](n):n<this[i(591)][i(284)]&&this.shrink(n),this[i(591)][i(433)](e,this[i(663)]+t),this},d[h(447)].prototype.setVec2=function(t,e){return this[h(654)](t,e.x,e.y)},d[h(447)].prototype[h(654)]=function(t,e,i){const n=h,o=this[n(591)],s=this[n(663)]+t*this[n(381)];return o[s]=e,o[s+1]=i,this},d[h(447)].prototype[h(520)]=function(t,e){return this[h(321)](t,e.x,e.y,e.z)},d[h(447)][h(301)][h(321)]=function(t,e,i,n){const o=h,s=this[o(591)],r=this[o(663)]+t*this.componentSize;return s[r]=e,s[r+1]=i,s[r+2]=n,this},d[h(447)].prototype[h(444)]=function(t,e){return this[h(350)](t,e.x,e.y,e.z,e.w)},d[h(447)][h(301)].setVec4Components=function(t,e,i,n,o){const s=h,r=this[s(591)],a=this[s(663)]+t*this.componentSize;return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},d[h(447)][h(301)][h(521)]=function(t,e){const i=h;return this[i(485)](this[i(663)]+t*this[i(381)],e[i(386)])},d[h(447)][h(301)][h(211)]=function(t,e){const i=h;return this[i(485)](this[i(663)]+t*this[i(381)],e[i(386)])},d[h(447)][h(301)].setColor=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},d.TypedArrayHelper[h(301)][h(420)]=function(t,e){const i=h;return this[i(591)][this[i(663)]+t*this[i(381)]]=e,this},d.TypedArrayHelper.prototype.getValueAtIndex=function(t){const e=h;return this.array[this[e(663)]+t]},d[h(447)].prototype[h(627)]=function(t){const e=h;return this.array[e(253)](this.indexOffset+t*this.componentSize)},d[h(304)]=function(t,e,i){const n=h,o=d[n(304)][n(416)];this.type=typeof t===n(615)&&o[n(492)](t)?t:"f",this[n(381)]=o[this[n(246)]],this[n(450)]=i||Float32Array,this[n(582)]=null,this[n(489)]=null,this[n(657)]=!!e,this[n(556)]=0,this[n(608)]=0},d[h(304)].constructor=d.ShaderAttribute,d.ShaderAttribute[h(416)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[h(304)][h(301)][h(220)]=function(t,e){const i=h;this[i(556)]=Math[i(474)](t*this[i(381)],this[i(556)]*this[i(381)]),this[i(608)]=Math[i(661)](e*this[i(381)],this.updateMax*this[i(381)])},d.ShaderAttribute.prototype[h(331)]=function(){const t=h,e=this[t(489)],i=e[t(405)];i[t(510)]=this[t(556)],i[t(614)]=Math.min(this[t(608)]-this[t(556)]+this.componentSize,this[t(582)][t(591)][t(284)]),e[t(287)]=!0},d[h(304)].prototype[h(557)]=function(){const t=h;this.updateMin=0,this[t(608)]=0},d.ShaderAttribute[h(301)][h(414)]=function(){const e=h;this[e(489)][e(599)]=this[e(657)]?t[e(242)]:t[e(427)]},d[h(304)].prototype[h(370)]=function(t,e){const i=h;this[i(582)][i(370)](t,e),this[i(359)]()},d[h(304)][h(301)][h(359)]=function(){const t=h;this[t(489)][t(591)]=this[t(582)][t(591)],this[t(489)].updateRange[t(510)]=0,this[t(489)].updateRange[t(614)]=-1,this[t(489)][t(599)]=e,this[t(489)].needsUpdate=!0},d.ShaderAttribute.prototype[h(551)]=function(t){const e=h;null!==this.typedArray&&this.typedArray[e(479)]===t*this.componentSize||(null!==this[e(582)]&&this.typedArray.size!==t?this.typedArray[e(326)](t):null===this[e(582)]&&(this[e(582)]=new d.TypedArrayHelper(this[e(450)],t,this.componentSize)))},d[h(304)][h(301)][h(413)]=function(e){const i=h;if(this[i(551)](e),null!==this.bufferAttribute)return this[i(489)][i(591)]=this[i(582)].array,parseFloat(t[i(512)])>=81&&(this[i(489)][i(614)]=this[i(489)][i(591)].length/this.bufferAttribute[i(209)]),void(this.bufferAttribute[i(287)]=!0);this[i(489)]=new(t[i(477)])(this[i(582)][i(591)],this[i(381)]),this[i(489)][i(599)]=this[i(657)]?t[i(242)]:t[i(427)]},d[h(304)].prototype[h(216)]=function(){const t=h;return null===this[t(582)]?0:this[t(582)][t(591)][t(284)]},d[h(649)]={defines:[h(554),h(289)].join("\n"),uniforms:["uniform float deltaTime;",h(598),h(341),"uniform vec4 textureAnimation;","uniform float scale;"][h(643)]("\n"),attributes:[h(344),"attribute vec3 velocity;",h(546),h(391),h(426),h(347),h(518),h(464),h(540)][h(643)]("\n"),varyings:[h(395),"#ifdef SHOULD_ROTATE_TEXTURE",h(460),h(572),"#ifdef SHOULD_CALCULATE_SPRITE",h(290),h(572)].join("\n"),branchAvoidanceFunctions:[h(669),h(308),"}",h(473),h(630),"}",h(343),h(445),"}",h(515),h(268),"}","float when_le(float x, float y) {",h(310),"}",h(272),"    return a * b;","}",h(504),"    return min(a + b, 1.0);","}"][h(643)]("\n"),unpackColor:[h(457),h(620),h(292),h(206),"   float b = mod( hex, PACKED_COLOR_SIZE );",h(443),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;",h(480),"}"][h(643)]("\n"),unpackRotationAxis:[h(379),h(620),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(206),h(453),h(443),h(279),h(266),h(422),"   c -= vec3( 1.0 );",h(480),"}"].join("\n"),floatOverLifetime:[h(375),h(352),h(629),h(240),h(221),h(362),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );",h(335),h(616),"","    return value;","}"][h(643)]("\n"),colorOverLifetime:[h(438),h(642),h(617),h(482),"    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",h(483),"}"][h(643)]("\n"),paramFetchingFunctions:[h(503),h(637),"}",h(356),h(533),"}",h(623),h(300),"}","float getWiggle() {",h(467),"}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",h(628),"}",h(527),h(578),"}",h(571),h(398),"}"][h(643)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       axis = normalize(axis);",h(588),"       float c = cos(angle);","       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,",h(644),h(550),h(534),h(659),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",h(432),h(493),h(532),"",h(389),h(371),h(488),h(401),h(564),"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",h(446),"      translated = rotationCenter - pos;",h(621),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",h(659),h(572)][h(643)]("\n"),rotateTexture:[h(523),"","    #ifdef SHOULD_ROTATE_TEXTURE",h(418),h(277),h(580),h(307),h(529),h(250),"",h(214),h(402),"        float framesY = vSpriteSheet.y;",h(441),h(251),h(271),h(358),h(250),"",h(259)].join("\n")},d[h(346)]={vertex:[d.shaderChunks.defines,d.shaderChunks[h(575)],d[h(649)][h(215)],d[h(649)][h(357)],t[h(561)].common,t[h(561)][h(382)],i[h(594)],d.shaderChunks.branchAvoidanceFunctions,d[h(649)][h(364)],d[h(649)][h(235)],d[h(649)].floatOverLifetime,d[h(649)].colorOverLifetime,d[h(649)][h(412)],d.shaderChunks[h(579)],d.shaderChunks[h(589)],"void main() {","    highp float age = getAge();",h(647),h(513),h(239),"    highp float isAlive = when_gt( alive, 0.0 );","    #ifdef SHOULD_WIGGLE_PARTICLES",h(665),h(562),h(257),h(250),h(525),"    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );","    vec3 pos = vec3( position );",h(244),"    force += vel;","    force *= drag;",h(567),h(222),h(602),h(456),h(309),h(658),h(250),h(600),h(528),"    #endif",h(361),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",h(317),h(390),"    #else",h(397),h(250),"    float pointSizePerspective = pointSize * perspective;",h(237),h(524),h(408),h(563),h(516),h(618),"           unpackColor( color.w )",h(469),h(329),h(624),h(250),h(622),"    vColor = vec4( c, o );","    #ifdef SHOULD_ROTATE_TEXTURE",h(332),h(250),h(214),"        float framesX = textureAnimation.x;",h(207),h(552),h(404),h(596),h(273),h(461),h(653),"        float rowNorm = row / framesY;",h(559),h(606),"        vSpriteSheet.z = columnNorm;",h(604),h(250),"    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPosition;",t[h(561)][h(595)],i[h(671)],"}"][h(643)]("\n"),fragment:[d.shaderChunks.uniforms,t[h(561)].common,t[h(561)][h(440)],i[h(322)],d[h(649)][h(357)],d[h(649)][h(330)],h(305),h(400),"    ",h(306),h(333),h(250),d.shaderChunks.rotateTexture,t[h(561)][h(610)],h(645),h(372),t[h(561)][h(549)],"}"].join("\n")},d[h(601)]={types:{BOOLEAN:"boolean",STRING:h(615),NUMBER:h(501),OBJECT:h(476)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array.isArray(t)){for(let o=t[n(284)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(234)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(380)](t)){for(let o=t[n(284)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(495)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array.isArray(t._value)&&(t[n(213)]=[t[n(213)]]),!1===Array[n(380)](t[n(635)])&&(t[n(635)]=[t[n(635)]]);const o=this[n(475)](t[n(213)][n(284)],e,i),s=this.clamp(t[n(635)].length,e,i),r=Math[n(661)](o,s);t[n(213)][n(284)]!==r&&(t[n(213)]=this.interpolateArray(t[n(213)],r)),t[n(635)][n(284)]!==r&&(t._spread=this[n(265)](t[n(635)],r))},interpolateArray(t,e){const i=h,n=t[i(284)],o=[typeof t[0][i(428)]===i(208)?t[0].clone():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(377)](e),a=Math.ceil(e),c=e-n;o[r]=this[i(419)](t[n],t[a],c)}return o.push(typeof t[n-1][i(428)]===i(208)?t[n-1][i(428)]():t[n-1]),o},clamp:(t,e,i)=>Math[h(661)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(205)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,o){const s=h;let r,a=this[s(640)];return typeof e===a[s(568)]&&typeof i===a[s(568)]?e+(i-e)*o:e instanceof t[s(651)]&&i instanceof t[s(651)]?(r=e[s(428)](),r.x=this[s(351)](e.x,i.x,o),r.y=this[s(351)](e.y,i.y,o),r):e instanceof t[s(536)]&&i instanceof t[s(536)]?(r=e.clone(),r.x=this.lerp(e.x,i.x,o),r.y=this.lerp(e.y,i.y,o),r.z=this[s(351)](e.z,i.z,o),r):e instanceof n&&i instanceof t[s(497)]?(r=e[s(428)](),r.x=this.lerp(e.x,i.x,o),r.y=this.lerp(e.y,i.y,o),r.z=this[s(351)](e.z,i.z,o),r.w=this.lerp(e.w,i.w,o),r):e instanceof t[s(558)]&&i instanceof t[s(558)]?(r=e[s(428)](),r.r=this.lerp(e.r,i.r,o),r.g=this[s(351)](e.g,i.g,o),r.b=this[s(351)](e.b,i.b,o),r):void console[s(487)](s(270),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=h;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(481)](t)-n):t+e-n)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(205)]()-.5),randomVector3(t,e,i,n,o){const s=h;let r=i.x+(Math[s(205)]()*n.x-.5*n.x),a=i.y+(Math[s(205)]()*n.y-.5*n.y),c=i.z+(Math[s(205)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(462)](r,o.x),a=.5*-o.y+this[s(462)](a,o.y),c=.5*-o.z+this[s(462)](c,o.z)),t[s(582)].setVec3Components(e,r,a,c)},randomColor(t,e,i,n){const o=h;let s=i.r+Math[o(205)]()*n.x,r=i.g+Math[o(205)]()*n.y,a=i.b+Math[o(205)]()*n.z;s=this[o(475)](s,0,1),r=this[o(475)](r,0,1),a=this[o(475)](a,0,1),t[o(582)][o(321)](e,s,r,a)},randomColorAsHex:function(){const t=new o;return function(e,i,n,o){const s=u,r=n[s(284)],a=[];for(let c=0;c<r;++c){const e=o[c];t[s(376)](n[c]),t.r+=Math[s(205)]()*e.x-.5*e.x,t.g+=Math[s(205)]()*e.y-.5*e.y,t.b+=Math.random()*e.z-.5*e.z,t.r=this[s(475)](t.r,0,1),t.g=this[s(475)](t.g,0,1),t.b=this[s(475)](t.b,0,1),a.push(t[s(366)]())}e[s(582)][s(350)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const o=h,s=i.clone();s[o(351)](n,Math[o(205)]()),t[o(582)][o(321)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const c=h;let l=2*Math[c(205)]()-1,u=6.2832*Math[c(205)](),f=Math[c(670)](1-l*l),p=this.randomFloat(n,o),d=0,m=0,g=0;r&&(p=Math[c(425)](p/r)*r),d=f*Math[c(585)](u)*p,m=f*Math[c(264)](u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[c(582)].setVec3Components(e,d,m,g)},seededRandom(t){const e=1e4*Math[h(264)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=h;let c=6.2832*Math.random(),l=Math[a(481)](this.randomFloat(n,o)),u=0,f=0,p=0;r&&(l=Math[a(425)](l/r)*r),u=Math[a(585)](c)*l,f=Math[a(264)](c)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(582)][a(321)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=h,i=new(t[e(536)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(376)](a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[l(472)](-this[l(612)](c,h)),t[l(582)].setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=h,i=new(t[e(536)]);return function(t,n,o,s,r,a,c,h){const l=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[l(472)](-this[l(612)](c,h)),t.typedArray.setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new s,n=new s,r=new o,a=new(t[e(536)])(1,1,1);return function(t,o){const s=e;return i[s(376)](t)[s(514)](),n[s(376)](o)[s(514)](),i.x+=.5*-o.x+Math.random()*o.x,i.y+=.5*-o.y+Math[s(205)]()*o.y,i.z+=.5*-o.z+Math[s(205)]()*o.z,i[s(514)]()[s(262)](a)[s(472)](.5),r.setRGB(i.x,i.y,i.z),r[s(366)]()}}()},d[h(353)]=function(e){const i=h,n=d.utils,s=n[i(640)];(e=n[i(234)](e,s.OBJECT,{}))[i(252)]=n[i(234)](e[i(252)],s[i(573)],{}),this[i(245)]=t[i(605)][i(641)](),this.fixedTimeStep=n[i(234)](e[i(374)],s.NUMBER,.016),this.texture=n[i(495)](e[i(252)][i(316)],t[i(442)],null),this.textureFrames=n[i(495)](e.texture.frames,t[i(651)],new(t[i(651)])(1,1)),this.textureFrameCount=n.ensureTypedArg(e[i(252)][i(664)],s[i(568)],this[i(406)].x*this.textureFrames.y),this[i(210)]=n[i(234)](e[i(252)][i(260)],s[i(568)],1),this[i(406)].max(new(t[i(651)])(1,1)),this.hasPerspective=n[i(234)](e[i(491)],s[i(577)],!0),this[i(429)]=n[i(234)](e.colorize,s[i(577)],!0),this.maxParticleCount=n[i(234)](e[i(652)],s[i(568)],null),this[i(607)]=n[i(234)](e.blending,s[i(568)],t[i(340)]),this.transparent=n[i(234)](e[i(619)],s[i(577)],!0),this[i(388)]=parseFloat(n.ensureTypedArg(e[i(388)],s.NUMBER,0)),this[i(212)]=n[i(234)](e[i(212)],s[i(577)],!1),this.depthTest=n.ensureTypedArg(e[i(593)],s[i(577)],!0),this[i(566)]=n[i(234)](e[i(566)],s[i(577)],!0),this[i(299)]=n[i(234)](e[i(299)],s[i(568)],300),this[i(517)]=[],this[i(258)]=[],this[i(543)]=[],this._poolCreationSettings=null,this[i(498)]=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this[i(575)]={tex:{type:"t",value:this[i(252)]},textureAnimation:{type:"v4",value:new(t[i(497)])(this.textureFrames.x,this[i(406)].y,this[i(548)],Math[i(661)](Math[i(481)](this[i(210)]),1))},fogColor:{type:"c",value:this.fog?new o:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(299)]}},this.defines={HAS_PERSPECTIVE:this[i(491)],COLORIZE:this[i(429)],VALUE_OVER_LIFETIME_LENGTH:d.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(406)].y>1},this.attributes={position:new(d[i(304)])("v3",!0),acceleration:new(d[i(304)])("v4",!0),velocity:new(d[i(304)])("v3",!0),rotation:new(d[i(304)])("v4",!0),rotationCenter:new(d[i(304)])("v3",!0),params:new(d[i(304)])("v4",!0),size:new(d[i(304)])("v4",!0),angle:new d.ShaderAttribute("v4",!0),color:new(d[i(304)])("v4",!0),opacity:new(d[i(304)])("v4",!0)},this.attributeKeys=Object[i(291)](this[i(215)]),this.attributeCount=this.attributeKeys[i(284)],this[i(394)]=new(t[i(323)])({uniforms:this.uniforms,vertexShader:d[i(346)][i(263)],fragmentShader:d[i(346)][i(555)],blending:this[i(607)],transparent:this[i(619)],alphaTest:this[i(388)],depthWrite:this[i(212)],depthTest:this[i(593)],defines:this[i(285)],fog:this[i(566)]}),this[i(261)]=new r,this[i(537)]=new a(this[i(261)],this[i(394)]),null===this.maxParticleCount&&console.warn(i(435))},d[h(353)].constructor=d.Group,d[h(353)].prototype[h(586)]=function(){const t=h;let e,i=this[t(517)],n=i[t(284)]-1,o=this[t(285)];for(;n>=0;--n)e=i[n],!o.SHOULD_CALCULATE_SPRITE&&(o[t(320)]=o.SHOULD_ROTATE_TEXTURE||!!Math[t(661)](Math.max[t(502)](null,e.angle.value),Math[t(661)][t(502)](null,e[t(233)][t(584)]))),o.SHOULD_ROTATE_PARTICLES=o[t(587)]||!!Math[t(661)](e[t(484)][t(233)],e[t(484)][t(509)]),o[t(254)]=o[t(254)]||!!Math[t(661)](e[t(486)][t(316)],e[t(486)][t(584)]);this[t(394)][t(287)]=!0},d.Group.prototype[h(455)]=function(){const t=h;let e,i,n=this[t(215)],o=this[t(261)],s=o[t(215)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=s[r],i?i[t(591)]=e[t(582)][t(591)]:o[t(334)](r,e[t(489)]),e[t(489)].needsUpdate=!0);this[t(261)][t(463)](0,this[t(293)])},d[h(353)][h(301)][h(454)]=function(t){const e=h;if(t instanceof d[e(342)]==!1)return void console[e(407)](e(668),t);if(this.emitterIDs[e(286)](t[e(245)])>-1)return void console[e(407)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(448)])return void console[e(407)](e(613));const i=this[e(215)],n=this[e(293)],o=n+t[e(293)];this[e(293)]=o,null!==this[e(652)]&&this[e(293)]>this[e(652)]&&console[e(487)](e(538),this.particleCount,e(526),this[e(652)]),t[e(471)](t[e(592)][e(213)]+t[e(592)][e(635)]),t._setBufferUpdateRanges(this[e(542)]),t[e(470)](n),t[e(448)]=this,t[e(215)]=this[e(215)];for(const s in i)i.hasOwnProperty(s)&&i[s][e(413)](null!==this[e(652)]?this[e(652)]:this.particleCount);for(let s=n;s<o;++s)t._assignPositionValue(s),t[e(319)](s,"velocity"),t[e(319)](s,e(423)),t[e(655)](s,"opacity"),t[e(655)](s,"size"),t._assignAngleValue(s),t[e(339)](s),t._assignParamsValue(s),t._assignColorValue(s);return this._applyAttributesToGeometry(),this.emitters[e(452)](t),this[e(258)][e(452)](t.uuid),this[e(586)](t),this[e(394)][e(287)]=!0,this[e(261)][e(287)]=!0,this[e(415)]=!0,this},d[h(353)][h(301)][h(667)]=function(t){const e=h,i=this[e(258)][e(286)](t[e(245)]);if(t instanceof d[e(342)]==!1)return void console.error(e(668),t);if(-1===i)return void console[e(407)](e(281));const n=t[e(583)],o=n+t[e(293)],s=this[e(215)].params[e(582)];for(let r=n;r<o;++r)s[e(591)][4*r]=0,s.array[4*r+1]=0;this.emitters[e(370)](i,1),this[e(258)][e(370)](i,1);for(const r in this.attributes)this[e(215)].hasOwnProperty(r)&&this[e(215)][r].splice(n,o);this.particleCount-=t[e(293)],t._onRemove(),this._attributesNeedRefresh=!0},d[h(353)].prototype[h(530)]=function(){const t=h,e=this[t(543)],i=this[t(498)];if(e[t(284)])return e[t(449)]();if(i){const e=new(d[t(342)])(this[t(672)]);return this[t(454)](e),e}return null},d[h(353)][h(301)][h(547)]=function(t){const e=h;if(t instanceof d.Emitter!=!1)return t.reset(),this[e(543)][e(365)](t),this;console.error(e(531),t)},d.Group[h(301)][h(505)]=function(){return this[h(543)]},d[h(353)][h(301)][h(295)]=function(t,e,i){const n=h;let o;this[n(672)]=e,this._createNewWhenPoolEmpty=!!i;for(let s=0;s<t;++s)o=Array.isArray(e)?new(d[n(342)])(e[s]):new(d[n(342)])(e),this[n(454)](o),this[n(547)](o);return this},d[h(353)][h(301)]._triggerSingleEmitter=function(e){const i=h,n=this.getFromPool(),o=this;if(null!==n)return e instanceof t[i(536)]&&(n[i(466)][i(316)][i(376)](e),n[i(466)][i(316)]=n.position[i(316)]),n[i(468)](),setTimeout((()=>{n.disable(),o.releaseIntoPool(n)}),1e3*Math.max(n.duration,n[i(592)].value+n.maxAge.spread)),this;console[i(219)](i(638))},d[h(353)].prototype[h(396)]=function(t,e){const i=h;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this._triggerSingleEmitter(e);else this[i(519)](e);return this},d[h(353)][h(301)][h(421)]=function(t){const e=h;this.uniforms[e(238)][e(316)]+=t,this[e(575)][e(560)][e(316)]=t},d[h(353)][h(301)][h(231)]=function(){const t=h;let e=this[t(542)],i=this[t(545)]-1,n=this[t(215)];for(;i>=0;--i)n[e[i]][t(557)]()},d.Group[h(301)][h(569)]=function(t){const e=h;let i,n,o,s=this[e(542)],r=this.attributeCount-1,a=this[e(215)],c=t[e(424)];for(;r>=0;--r)i=s[r],n=c[i],o=a[i],o[e(220)](n.min,n.max),o.flagUpdate()},d[h(353)].prototype[h(522)]=function(t){const e=h;var i=this[e(517)],n=i[e(284)],o=t||this[e(374)],s=this[e(542)],r=this.attributes;if(this[e(421)](o),this[e(231)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(336)]){for(var a,c=0;c<n;++c)(a=i[c])[e(522)](o),this._updateBuffers(a);if(!0===this[e(336)]){for(c=this[e(545)]-1;c>=0;--c)r[s[c]][e(414)]();this[e(336)]=!1}if(!0===this[e(415)]){for(c=this[e(545)]-1;c>=0;--c)r[s[c]][e(359)]();this[e(415)]=!1,this._attributesNeedDynamicReset=!0}}},d.Group[h(301)][h(247)]=function(){const t=h;return this[t(261)][t(247)](),this.material.dispose(),this},d.Emitter=function(e){const i=h,n=d[i(601)],o=n.types,r=d[i(434)];(e=n[i(234)](e,o[i(573)],{}))[i(466)]=n[i(234)](e[i(466)],o[i(573)],{}),e[i(318)]=n[i(234)](e[i(318)],o[i(573)],{}),e[i(423)]=n[i(234)](e[i(423)],o.OBJECT,{}),e[i(311)]=n.ensureTypedArg(e[i(311)],o[i(573)],{}),e.drag=n[i(234)](e[i(650)],o[i(573)],{}),e[i(484)]=n[i(234)](e[i(484)],o[i(573)],{}),e[i(639)]=n.ensureTypedArg(e[i(639)],o[i(573)],{}),e[i(302)]=n.ensureTypedArg(e[i(302)],o[i(573)],{}),e[i(479)]=n.ensureTypedArg(e[i(479)],o[i(573)],{}),e[i(233)]=n[i(234)](e[i(233)],o[i(573)],{}),e.wiggle=n[i(234)](e[i(486)],o[i(573)],{}),e[i(592)]=n[i(234)](e[i(592)],o[i(573)],{}),e[i(399)]&&console[i(487)](i(603)),this[i(245)]=c[i(641)](),this[i(246)]=n[i(234)](e[i(246)],o[i(568)],d.distributions[i(631)]),this[i(466)]={_value:n[i(495)](e[i(466)][i(316)],t[i(536)],new(t[i(536)])),_spread:n.ensureInstanceOf(e[i(466)][i(584)],t[i(536)],new(t[i(536)])),_spreadClamp:n[i(495)](e[i(466)][i(500)],s,new(t[i(536)])),_distribution:n[i(234)](e[i(466)][i(313)],o[i(568)],this[i(246)]),_randomise:n.ensureTypedArg(e.position[i(403)],o[i(577)],!1),_radius:n.ensureTypedArg(e[i(466)].radius,o[i(568)],10),_radiusScale:n.ensureInstanceOf(e.position[i(409)],t[i(536)],new(t[i(536)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e.position[i(328)],o[i(568)],0)},this[i(318)]={_value:n[i(495)](e[i(318)][i(316)],t[i(536)],new s),_spread:n[i(495)](e[i(318)][i(584)],t[i(536)],new(t[i(536)])),_distribution:n[i(234)](e.velocity[i(313)],o[i(568)],this.type),_randomise:n[i(234)](e[i(466)][i(403)],o[i(577)],!1)},this[i(423)]={_value:n[i(495)](e[i(423)][i(316)],t[i(536)],new s),_spread:n[i(495)](e.acceleration.spread,t[i(536)],new(t[i(536)])),_distribution:n[i(234)](e.acceleration.distribution,o[i(568)],this[i(246)]),_randomise:n[i(234)](e.position[i(403)],o[i(577)],!1)},this[i(650)]={_value:n[i(234)](e[i(650)][i(316)],o[i(568)],0),_spread:n.ensureTypedArg(e[i(650)][i(584)],o[i(568)],0),_randomise:n[i(234)](e[i(466)].randomise,o[i(577)],!1)},this[i(486)]={_value:n[i(234)](e[i(486)][i(316)],o[i(568)],0),_spread:n.ensureTypedArg(e.wiggle[i(584)],o[i(568)],0)},this.rotation={_axis:n[i(495)](e.rotation[i(553)],s,new(t[i(536)])(0,1,0)),_axisSpread:n[i(495)](e.rotation[i(656)],t[i(536)],new s),_angle:n[i(234)](e[i(484)].angle,o[i(568)],0),_angleSpread:n.ensureTypedArg(e[i(484)][i(509)],o[i(568)],0),_static:n[i(234)](e[i(484)].static,o[i(577)],!1),_center:n[i(495)](e[i(484)][i(278)],t[i(536)],this[i(466)][i(213)].clone()),_randomise:n[i(234)](e[i(466)][i(403)],o[i(577)],!1)},this[i(592)]={_value:n[i(234)](e[i(592)][i(316)],o.NUMBER,2),_spread:n[i(234)](e[i(592)][i(584)],o[i(568)],0)},this.color={_value:n[i(345)](e.color[i(316)],t[i(558)],new(t[i(558)])),_spread:n[i(345)](e[i(639)][i(584)],t[i(536)],new s),_randomise:n[i(234)](e[i(466)][i(403)],o.BOOLEAN,!1)},this[i(302)]={_value:n[i(431)](e[i(302)][i(316)],o[i(568)],1),_spread:n[i(431)](e[i(302)].spread,o[i(568)],0),_randomise:n[i(234)](e[i(466)][i(403)],o[i(577)],!1)},this[i(479)]={_value:n[i(431)](e[i(479)][i(316)],o.NUMBER,1),_spread:n[i(431)](e.size.spread,o[i(568)],0),_randomise:n.ensureTypedArg(e[i(466)][i(403)],o[i(577)],!1)},this[i(233)]={_value:n[i(431)](e[i(233)][i(316)],o.NUMBER,0),_spread:n[i(431)](e[i(233)][i(584)],o[i(568)],0),_randomise:n[i(234)](e.position.randomise,o.BOOLEAN,!1)},this[i(293)]=n[i(234)](e.particleCount,o.NUMBER,100),this.duration=n[i(234)](e[i(387)],o.NUMBER,null),this.isStatic=n[i(234)](e.isStatic,o[i(577)],!1),this[i(275)]=n[i(234)](e[i(275)],o[i(568)],1),this[i(248)]=n[i(234)](e[i(248)],o.NUMBER,1),this[i(499)]=n[i(234)](e[i(499)],o[i(577)],!0),this[i(218)]=0,this.activationIndex=0,this[i(583)]=0,this[i(459)]=0,this[i(348)]=0,this[i(315)]=0,this[i(448)]=null,this[i(215)]=null,this.paramsArray=null,this.resetFlags={position:n[i(234)](e.position[i(403)],o[i(577)],!1)||n[i(234)](e[i(311)][i(403)],o[i(577)],!1),velocity:n[i(234)](e[i(318)][i(403)],o[i(577)],!1),acceleration:n.ensureTypedArg(e[i(423)][i(403)],o.BOOLEAN,!1)||n[i(234)](e[i(650)].randomise,o.BOOLEAN,!1),rotation:n[i(234)](e[i(484)][i(403)],o[i(577)],!1),rotationCenter:n[i(234)](e[i(484)][i(403)],o[i(577)],!1),size:n[i(234)](e[i(479)].randomise,o.BOOLEAN,!1),color:n[i(234)](e[i(639)].randomise,o[i(577)],!1),opacity:n[i(234)](e[i(302)][i(403)],o[i(577)],!1),angle:n[i(234)](e.angle.randomise,o[i(577)],!1)},this[i(458)]={},this.updateCounts={},this[i(478)]={maxAge:"params",position:i(466),velocity:"velocity",acceleration:"acceleration",drag:i(423),wiggle:"params",rotation:i(484),size:i(479),color:i(639),opacity:i(302),angle:"angle"};for(const t in this.updateMap)this[i(478)][i(492)](t)&&(this.updateCounts[this[i(478)][t]]=0,this.updateFlags[this[i(478)][t]]=!1,this[i(666)](this[t],t));this.bufferUpdateRanges={},this[i(542)]=null,this.attributeCount=0,n.ensureValueOverLifetimeCompliance(this[i(639)],r,r),n[i(369)](this[i(302)],r,r),n[i(369)](this[i(479)],r,r),n[i(369)](this[i(233)],r,r)},d[h(342)].constructor=d[h(342)],d.Emitter.prototype._createGetterSetters=function(t,e){const i=h,n=this;for(const o in t)if(t[i(492)](o)){const s=o.replace("_","");Object[i(349)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=u,s=n[o(478)][e],r=this[t],a=d.valueOverLifetimeLength;"_rotationCenter"===t?(n[o(458)][o(288)]=!0,n.updateCounts.rotationCenter=0):t===o(511)?n[o(506)][s]=i:(n[o(458)][s]=!0,n[o(236)][s]=0),n[o(448)]._updateDefines(),this[t]=i,Array[o(380)](r)&&d.utils[o(369)](n[e],a,a)}}(o)})}},d[h(342)].prototype[h(437)]=function(t){const e=h;this[e(542)]=t,this[e(545)]=t[e(284)];for(let i=this[e(545)]-1;i>=0;--i)this[e(424)][t[i]]={min:Number[e(223)],max:Number[e(227)]}},d[h(342)][h(301)][h(471)]=function(t){const e=h,i=this[e(293)];this[e(387)]?this[e(218)]=i/(t<this[e(387)]?t:this[e(387)]):this.particlesPerSecond=i/t},d.Emitter[h(301)][h(470)]=function(t){const e=h;this[e(583)]=t,this.activationIndex=t,this[e(303)]=t+this[e(293)]},d[h(342)][h(301)][h(228)]=function(t,e){const i=h;switch(t){case i(466):this[i(625)](e);break;case i(318):case"acceleration":this._assignForceValue(e,t);break;case i(479):case i(302):this[i(655)](e,t);break;case i(233):this[i(267)](e);break;case i(539):this[i(609)](e);break;case i(484):this[i(339)](e);break;case i(639):this._assignColorValue(e)}},d[h(342)][h(301)][h(625)]=function(t){const e=h,i=d[e(590)],n=d.utils,o=this[e(466)],s=this[e(215)].position,r=o[e(213)],a=o[e(635)];switch(o._distribution){case i[e(631)]:n.randomVector3(s,t,r,a,o[e(226)]);break;case i.SPHERE:n.randomVector3OnSphere(s,t,r,o[e(367)],o[e(635)].x,o[e(280)],o[e(226)].x,o._distributionClamp||this[e(293)]);break;case i[e(360)]:n[e(324)](s,t,r,o._radius,o._spread.x,o[e(280)],o[e(226)].x);break;case i.LINE:n[e(241)](s,t,r,a)}},d[h(342)][h(301)][h(319)]=function(t,e){const i=h;let n,o,s,r,a,c=d[i(590)],l=d[i(601)],u=this[e],f=u[i(213)],p=u._spread;switch(u[i(541)]){case c.BOX:l[i(417)](this[i(215)][e],t,f,p);break;case c[i(535)]:n=this[i(215)].position[i(582)][i(591)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(565)](this[i(215)][e],t,o,s,r,this[i(466)][i(213)],u[i(213)].x,u[i(635)].x);break;case c[i(360)]:n=this.attributes.position[i(582)][i(591)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(636)](this[i(215)][e],t,o,s,r,this[i(466)][i(213)],u[i(213)].x,u[i(635)].x);break;case c[i(368)]:l[i(241)](this[i(215)][e],t,f,p)}if(e===i(423)){const e=l[i(475)](l.randomFloat(this.drag[i(213)],this[i(650)][i(635)]),0,1);this[i(215)][i(423)][i(582)][i(591)][4*t+3]=e}},d[h(342)][h(301)][h(655)]=function(t,e){const i=h;let n,o=this.attributes[e][i(582)],s=this[e],r=d[i(601)];r[i(383)](s[i(213)])&&r[i(383)](s._spread)?(n=Math[i(481)](r[i(612)](s[i(213)][0],s[i(635)][0])),o[i(350)](t,n,n,n,n)):o.setVec4Components(t,Math[i(481)](r[i(612)](s[i(213)][0],s[i(635)][0])),Math.abs(r.randomFloat(s._value[1],s._spread[1])),Math[i(481)](r[i(612)](s[i(213)][2],s._spread[2])),Math[i(481)](r[i(612)](s[i(213)][3],s._spread[3])))},d[h(342)][h(301)][h(267)]=function(t){const e=h;let i,n=this[e(215)][e(233)][e(582)],o=this[e(233)],s=d[e(601)];s[e(383)](o[e(213)])&&s[e(383)](o[e(635)])?(i=s[e(612)](o[e(213)][0],o[e(635)][0]),n.setVec4Components(t,i,i,i,i)):n.setVec4Components(t,s[e(612)](o[e(213)][0],o[e(635)][0]),s[e(612)](o._value[1],o[e(635)][1]),s[e(612)](o[e(213)][2],o[e(635)][2]),s[e(612)](o[e(213)][3],o[e(635)][3]))},d[h(342)][h(301)][h(609)]=function(t){const e=h;this[e(215)][e(539)][e(582)][e(350)](t,this.isStatic?1:0,0,Math[e(481)](d[e(601)][e(612)](this.maxAge[e(213)],this[e(592)][e(635)])),d.utils.randomFloat(this[e(486)][e(213)],this[e(486)]._spread))},d.Emitter[h(301)]._assignRotationValue=function(t){const e=h;this.attributes[e(484)].typedArray[e(321)](t,d.utils[e(255)](this.rotation._axis,this[e(484)]._axisSpread),d[e(601)].randomFloat(this[e(484)]._angle,this.rotation[e(338)]),this.rotation[e(269)]?0:1),this.attributes[e(288)][e(582)][e(520)](t,this.rotation[e(297)])},d.Emitter.prototype._assignColorValue=function(t){const e=h;d[e(601)][e(282)](this[e(215)][e(639)],t,this.color[e(213)],this.color[e(635)])},d[h(342)][h(301)]._resetParticle=function(t){const e=h;let i,n,o=this[e(506)],s=this.updateFlags,r=this[e(236)],a=this[e(542)];for(let c=this.attributeCount-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this._assignValue(i,t),this[e(570)](i,t),!0===n&&r[i]===this[e(293)]?(s[i]=!1,r[i]=0):1==n&&++r[i])},d.Emitter[h(301)][h(570)]=function(t,e){const i=h,n=this[i(424)][t];n[i(474)]=Math[i(474)](e,n.min),n[i(661)]=Math[i(661)](e,n.max)},d.Emitter[h(301)]._resetBufferRanges=function(){const t=h;let e,i=this.bufferUpdateRanges,n=this[t(314)],o=this[t(229)]-1;for(;o>=0;--o)e=n[o],i[e][t(474)]=Number.POSITIVE_INFINITY,i[e][t(661)]=Number[t(227)]},d.Emitter[h(301)][h(385)]=function(){const t=h;this[t(218)]=0,this[t(583)]=0,this[t(632)]=0,this.activeParticleCount=0,this[t(448)]=null,this[t(215)]=null,this.paramsArray=null,this[t(348)]=0},d[h(342)][h(301)][h(626)]=function(){--this[h(315)]},d[h(342)].prototype[h(508)]=function(){++this[h(315)]},d.Emitter[h(301)][h(574)]=function(t,e,i,n){const o=h;for(var s,r,a,c,l=e-1;l>=t;--l)0!==(c=i[s=4*l])&&(a=i[s+1],r=i[s+2],1===this[o(248)]?(a+=n)>=r&&(a=0,c=0,this[o(626)]()):(a-=n)<=0&&(a=r,c=0,this[o(626)]()),i[s]=c,i[s+1]=a,this[o(570)](o(539),l))},d[h(342)].prototype[h(276)]=function(t,e,i,n){const o=h,s=this[o(248)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this.particleCount||(this[o(508)](),i[r]=1,this[o(430)](c),a=n*(c-t),i[r+1]=-1===s?i[r+2]-a:a,this._updateAttributeUpdateRange(o(539),c))},d[h(342)][h(301)][h(522)]=function(t){const e=h;if(this[e(243)])return;null===this[e(337)]&&(this[e(337)]=this[e(215)][e(539)][e(582)].array);const i=this[e(583)],n=i+this.particleCount,o=this[e(337)],s=this[e(218)]*this[e(275)]*t,r=this[e(632)];if(this._resetBufferRanges(),this._checkParticleAges(i,n,o,t),!1===this[e(499)])return void(this[e(348)]=0);if(null!==this[e(387)]&&this[e(348)]>this.duration)return this[e(499)]=!1,void(this[e(348)]=0);const a=1===this[e(293)]?r:0|r,c=Math[e(474)](a+s,this[e(303)]),l=c-this.activationIndex|0,u=l>0?t/l:0;this._activateParticles(a,c,o,u),this.activationIndex+=s,this[e(632)]>n&&(this[e(632)]=i),this[e(348)]+=t},d[h(342)][h(301)][h(411)]=function(t){const e=h;if(this.age=0,this[e(499)]=!1,!0===t){const t=this.attributeOffset,o=t+this.particleCount,s=this[e(337)],r=this[e(215)][e(539)][e(489)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(405)][e(510)]=0,r.updateRange[e(614)]=-1,r[e(287)]=!0}return this},d[h(342)][h(301)].enable=function(){return this[h(499)]=!0,this},d[h(342)].prototype[h(217)]=function(){return this[h(499)]=!1,this},d.Emitter[h(301)][h(507)]=function(){const t=h;return null!==this[t(448)]?this[t(448)].removeEmitter(this):console.error(t(325)),this};const m=d;function g(t){function e(t){const i=u;if(typeof t===i(615))return function(t){}[i(354)](i(298)).apply("counter");1!==(""+t/t)[i(284)]||t%20==0?function(){return!0}.constructor(i(646)+i(439))[i(249)](i(274)):function(){return!1}.constructor("debugger")[i(502)](i(224)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

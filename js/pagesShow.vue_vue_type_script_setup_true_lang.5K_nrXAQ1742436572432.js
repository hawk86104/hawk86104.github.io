import{a0 as t,_ as n,cq as e,cr as o,cs as r,ct as i,C as u,l as s,c1 as c,ak as a,am as l}from"./three.RUAk_tvU1742436572432.js";import{P as f,e as p,o as d}from"./@tresjs.Uh9iM8du1742436572432.js";import{z as h}from"./three-custom-shader-material.BcjKDN_X1742436572432.js";import{b as g,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1742436572432.js";import{d as m,b as w,a2 as b,w as I,o as v,H as _,u as C,r as x,a3 as S,e as A,f as R,g as T,N as j,j as M,aj as O,ak as B,F,M as G,J as L,m as k}from"./@vue.deO5D3Lf1742436572432.js";function E(){const t=["function *\\( *\\)","282556DlJzdc","trace","test","327120veLfLq","1948958OStsht","action","1891088oPZqXZ","input","7623iOYAhT","exception","stateObject","length","name","toString","init","__proto__","10hTFmln","bind","console","LANDMASS","gger","60UwZjTL","constructor","while (true) {}","50214ZvGCSA","table","9XHHyEF","log","string",'{}.constructor("return this")( )',"chain","182uVBoMg","CITY_UNTRIANGULATED","apply","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","268801iWvils"];return(E=function(){return t})()}function Z(t,n){const e=E();return(Z=function(t,n){return e[t-=384]})(t,n)}!function(t,n){const e=Z,o=E();for(;;)try{if(139462===-parseInt(e(384))/1+parseInt(e(407))/2*(parseInt(e(394))/3)+parseInt(e(386))/4+parseInt(e(389))/5+-parseInt(e(410))/6*(parseInt(e(417))/7)+parseInt(e(392))/8*(parseInt(e(412))/9)+-parseInt(e(402))/10*(-parseInt(e(390))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(419)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){z(this,(function(){const t=Z,n=new RegExp(t(385)),e=new RegExp(t(421),"i"),o=D(t(400));n[t(388)](o+t(416))&&e[t(388)](o+t(393))?D():o("0")}))()}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();P(void 0,(function(){const t=Z;let n;try{n=Function(t(420)+t(415)+");")()}catch(r){n=window}const e=n[t(404)]=n[t(404)]||{},o=[t(413),"warn","info","error",t(395),t(411),t(387)];for(let i=0;i<o.length;i++){const n=P[t(408)].prototype[t(403)](P),r=o[i],u=e[r]||n;n[t(401)]=P[t(403)](P),n[t(399)]=u[t(399)][t(403)](u),e[r]=n}}))();const H=async()=>{const t=await f("./plugins/digitalCity/model/shanghai.FBX");let n=null,e=null,o=null;return t.traverse((t=>{const r=Z;t[r(398)]===r(418)&&(n=t),t[r(398)]===r(405)&&(e=t),"ROADS"===t[r(398)]&&(o=t)})),{model:t,city:n,land:e,roads:o}};function D(t){function n(t){const e=Z;if(typeof t===e(414))return function(t){}.constructor(e(409))[e(419)]("counter");1!==(""+t/t)[e(397)]||t%20==0?function(){return!0}[e(408)]("debu"+e(406)).call(e(391)):function(){return!1}[e(408)]("debu"+e(406))[e(419)](e(396)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const $=N;!function(t,n){const e=N,o=W();for(;;)try{if(226521===parseInt(e(346))/1*(parseInt(e(334))/2)+parseInt(e(394))/3*(parseInt(e(382))/4)+parseInt(e(339))/5*(-parseInt(e(381))/6)+parseInt(e(342))/7+parseInt(e(338))/8+parseInt(e(348))/9*(parseInt(e(384))/10)+parseInt(e(344))/11*(-parseInt(e(393))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function W(){const t=["toString","DoubleSide","string","prototype","init","uniforms","setStyle","landColor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","opacity","trace","forEach","debu","value",'{}.constructor("return this")( )',"stateObject","material","object","while (true) {}","bulidingsColor","gger","function *\\( *\\)","15996duQpQd","488PoGAPU","#112233","430PSMZBk","primitive","__csm","land","__proto__","bind","counter","warn","console","279180GPRLHh","2280tpmgAv","test","topColor","return (function() ","color","log","2kLcKbq","Color","table","uColor","3536520iRjedq","785smgTMm","model","exception","1013880EXVnPo","input","352KGOuKC","uOpacity","368647PUCpLP","boundingBox","71433VFhnVB","error","gradient","length","buildingsModelCustomShader","apply","#ffffff","constructor","isArray","computeBoundingSphere","clone"];return(W=function(){return t})()}!function(){U(this,(function(){const t=N,n=new RegExp(t(380)),e=new RegExp(t(367),"i"),o=K(t(363));n[t(395)](o+"chain")&&e[t(395)](o+t(343))?K():o("0")}))()}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(353)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function N(t,n){const e=W();return(N=function(t,n){return e[t-=332]})(t,n)}q(void 0,(function(){const t=N,n=function(){const t=N;let n;try{n=Function(t(397)+t(373)+");")()}catch(e){n=window}return n}(),e=n[t(392)]=n[t(392)]||{},o=[t(333),t(391),"info",t(349),t(341),t(336),t(369)];for(let r=0;r<o[t(351)];r++){const n=q.constructor[t(362)][t(389)](q),i=o[r],u=e[i]||n;n[t(388)]=q[t(389)](q),n[t(359)]=u[t(359)].bind(u),e[i]=n}}))();const V=[$(376)],Y=m({__name:$(352),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:$(383)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=$,r=e,i=w(0),u=r[o(340)].city;u.renderOrder=1001;const s=r[o(340)][o(387)];(()=>{const t=o,{geometry:e}=u;e.computeBoundingBox(),e[t(357)]();const{max:s,min:c}=e[t(347)];if(u[t(375)][t(386)])return;const a=new h({baseMaterial:u[t(375)],vertexShader:g,fragmentShader:y,silent:!0,uniforms:{uMax:{value:s},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(335)])(r[t(378)])},uOpacity:{value:r[t(368)]},uLightColor:{value:new(n[t(335)])(t(354))},uTopColor:{value:new(n[t(335)])(r[t(396)])},uTime:i,uGradient:{value:r[t(350)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(360)]});u[t(375)].dispose(),u[t(375)]=a})();const{onLoop:c}=p();c((({delta:t})=>{i[o(372)]+=t})),b((()=>{const n=o;r[n(378)]&&u[n(375)][n(364)][n(337)][n(372)][n(365)](r[n(378)]),r[n(366)]&&((n,e)=>{const i=o;let u;"cu"===n||n===i(387)&&(u=Array[i(356)](s[i(375)])?s[i(375)]:[s[i(375)]],u[i(370)]((n=>{const o=i;n[e][o(365)](r.landColor),n.side=t})))})("land",n(332)),r[n(368)]&&(u.material[n(364)][n(345)][n(372)]=r[n(368)])})),I(r,((t,n)=>{const e=o;u.material[e(364)].uGradient[e(372)]=t[e(350)]}));const a=r[o(340)][o(340)][o(358)]();return(t,n)=>{const e=o;return v(),_(e(385),{object:C(a)},null,8,V)}}});function K(t){function n(t){const e=N;if(typeof t===e(361))return function(t){}[e(355)](e(377))[e(353)](e(390));1!==(""+t/t)[e(351)]||t%20==0?function(){return!0}.constructor("debu"+e(379)).call("action"):function(){return!1}.constructor(e(371)+e(379))[e(353)](e(374)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const X=ot;!function(t,n){const e=ot,o=rt();for(;;)try{if(926606===-parseInt(e(204))/1*(-parseInt(e(182))/2)+-parseInt(e(181))/3+parseInt(e(215))/4+-parseInt(e(199))/5*(-parseInt(e(195))/6)+-parseInt(e(202))/7*(parseInt(e(216))/8)+parseInt(e(183))/9*(parseInt(e(232))/10)+-parseInt(e(200))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){J(this,(function(){const t=ot,n=new RegExp(t(226)),e=new RegExp(t(193),"i"),o=et(t(213));n[t(233)](o+t(207))&&e[t(233)](o+t(198))?et():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ot(206)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Q(void 0,(function(){const t=ot,n=function(){const t=ot;let n;try{n=Function(t(176)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(188)]=n[t(188)]||{},o=[t(218),t(235),"info",t(220),t(184),"table",t(230)];for(let r=0;r<o.length;r++){const n=Q.constructor[t(209)][t(197)](Q),i=o[r],u=e[i]||n;n[t(186)]=Q.bind(Q),n[t(208)]=u[t(208)][t(197)](u),e[i]=n}}))();const tt=["object"],nt=m({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:X(212)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const n=X,c=t;let a=null,l=null;if("Wireframe"===c[n(178)]){const t=new e(c[n(222)][n(192)]);let u=(new o)[n(185)](t),s=new r({color:c[n(231)],linewidth:c.width,opacity:c[n(214)],transparent:!0,depthWrite:!0,depthTest:!0});s[n(217)][n(205)](window.innerWidth,window[n(211)]),a=new i(u,s),a.applyMatrix4(c[n(222)][n(191)].clone())}else{l={transparent:!0,uniforms:{uColor:{value:new u(c.color)},uOpacity:{value:c[n(214)]}},vertexShader:n(228),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new e(c[n(222)][n(192)]),o=new s(l);a=new LineSegments(t,o),a[n(177)](c[n(222)][n(191)][n(225)]()),a[n(196)][n(179)]=c[n(234)],a[n(189)]=1e3}return b((()=>{const t=n;c[t(178)]===t(229)&&(c[t(231)]&&(l[t(223)][t(201)][t(180)]=new u(c[t(231)])),c[t(214)]&&(l[t(223)][t(194)].value=c[t(214)])),"Wireframe"===c[t(178)]&&(c[t(231)]&&(a.material[t(231)]=new u(c[t(231)])),c[t(214)]&&(a[t(196)][t(214)]=c[t(214)])),c[t(234)]&&(a.material[t(179)]=c[t(234)])})),(t,e)=>{const o=n;return v(),_(o(190),{object:C(a)},null,8,tt)}}});function et(t){function n(t){const e=ot;if(typeof t===e(174))return function(t){}[e(210)]("while (true) {}").apply(e(175));1!==(""+t/t)[e(227)]||t%20==0?function(){return!0}.constructor(e(203)+e(224))[e(221)](e(187)):function(){return!1}[e(210)]("debu"+e(224))[e(206)](e(219)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function ot(t,n){const e=rt();return(ot=function(t,n){return e[t-=174]})(t,n)}function rt(){const t=["value","2202231oSuzFM","513794PFvfdR","9zrNVxv","exception","fromEdgesGeometry","__proto__","action","console","renderOrder","primitive","matrix","geometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uOpacity","3948414wndDTd","material","bind","input","10OlhGoz","1728144DskRKE","uColor","2198EFKGcg","debu","1cnaAuY","set","apply","chain","toString","prototype","constructor","innerHeight","#FFF","init","opacity","4098204RcmFEy","40744TkPxYG","resolution","log","stateObject","error","call","builds","uniforms","gger","clone","function *\\( *\\)","length","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","Shader","trace","color","8194030vdotUt","test","width","warn","string","counter","return (function() ","applyMatrix4","style","linewidth"];return(rt=function(){return t})()}const it=lt;!function(t,n){const e=lt,o=ft();for(;;)try{if(237683===-parseInt(e(451))/1*(-parseInt(e(468))/2)+-parseInt(e(458))/3+parseInt(e(482))/4+parseInt(e(487))/5+parseInt(e(480))/6*(parseInt(e(477))/7)+-parseInt(e(449))/8+-parseInt(e(476))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(459)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ut(this,(function(){const t=lt,n=new RegExp(t(440)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=dt(t(481));n.test(o+t(452))&&e[t(469)](o+t(456))?dt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(459)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();st(void 0,(function(){const t=lt,n=function(){const t=lt;let n;try{n=Function(t(443)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(455)]=n[t(455)]||{},o=["log",t(479),t(471),t(463),"exception",t(465),t(475)];for(let r=0;r<o.length;r++){const n=st[t(442)][t(486)][t(454)](st),i=o[r],u=e[i]||n;n[t(467)]=st[t(454)](st),n[t(464)]=u.toString[t(454)](u),e[i]=n}}))();const ct={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(t,n){const e=ft();return(lt=function(t,n){return e[t-=440]})(t,n)}function ft(){const t=["2919496MPXeef","showAxesHelper","77209cIqBCM","chain","showGridHelper","bind","console","input","stateObject","39111rOdLzk","apply","debu","$slots","TresPerspectiveCamera","error","toString","table","ability","__proto__","12wAGdsj","test","#000000","info","TresAmbientLight","TresCanvas","builds","trace","4858398uwYSUI","7RGyFSD","disableRender","warn","1547820ZsxxAY","init","774856qGGNTU","perspectiveCameraRef","showBuildings","gger","prototype","1202705sOgZet","TresGridHelper","function *\\( *\\)","string","constructor","return (function() ","city","autoRotate","TresAxesHelper","pagesShow","counter"];return(ft=function(){return t})()}const pt=m({__name:it(447),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=x({clearColor:n(470),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(478)]}),u=x({autoRotate:r[n(445)],enableDamping:!0});let s=null;r[n(484)]&&([e,o]=S((()=>H())),e=await e,o(),s=e);const f=w(),p=w();return(t,e)=>{const o=n,c=A(o(473));return v(),R(c,k({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:T((()=>[j(o(462),{ref_key:o(483),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),M(C(d),O(B(u)),null,16),e[0]||(e[0]=j(o(472),{color:"#ffffff"},null,-1)),e[1]||(e[1]=j("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[o(484)]&&C(s)?(v(),_(F,{key:0},[M(Y,{model:C(s)},null,8,["model"]),M(nt,{builds:C(s)[o(444)],color:"#000"},null,8,[o(474)])],64)):G("",!0),L(t[o(461)],o(466)),r[o(450)]?(v(),_(o(446),ct)):G("",!0),r[o(453)]?(v(),_(o(488),at)):G("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=lt;if(typeof t===e(441))return function(t){}.constructor("while (true) {}")[e(459)](e(448));1!==(""+t/t).length||t%20==0?function(){return!0}[e(442)](e(460)+e(485)).call("action"):function(){return!1}[e(442)](e(460)+e(485))[e(459)](e(457)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Y as _,nt as a,pt as b,H as l};

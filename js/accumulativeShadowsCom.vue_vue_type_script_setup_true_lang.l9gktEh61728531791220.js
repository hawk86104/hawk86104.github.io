import{V as t,c as n,_ as e,h as a}from"./three.QbUqWzuy1728531791220.js";import{p as o}from"./@tresjs.TFxw2EXb1728531791220.js";import{d as r,P as s}from"./@pmndrs._tHjs8qy1728531791220.js";import{d as i,b as c,w as u,a3 as l,o as p,E as f,L as h,aj as d,ak as m}from"./@vue.bvMz0l_u1728531791220.js";const w=b;!function(t,n){const e=b,a=I();for(;;)try{if(531416===-parseInt(e(551))/1*(-parseInt(e(503))/2)+-parseInt(e(493))/3+-parseInt(e(540))/4+-parseInt(e(481))/5*(-parseInt(e(531))/6)+-parseInt(e(470))/7*(parseInt(e(477))/8)+-parseInt(e(552))/9+parseInt(e(483))/10)break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const g=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[b(549)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();!function(){g(this,(function(){const t=b,n=new RegExp(t(536)),e=new RegExp(t(544),"i"),a=x(t(537));n[t(530)](a+t(486))&&e[t(530)](a+t(548))?x():a("0")}))()}();const M=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[b(549)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function b(t,n){const e=I();return(b=function(t,n){return e[t-=467]})(t,n)}M(void 0,(function(){const t=b,n=function(){const t=b;let n;try{n=Function(t(526)+t(476)+");")()}catch(e){n=window}return n}(),e=n[t(550)]=n.console||{},a=[t(515),t(488),t(472),t(553),t(505),t(525),t(542)];for(let o=0;o<a.length;o++){const n=M[t(475)].prototype[t(528)](M),r=a[o],s=e[r]||n;n.__proto__=M[t(528)](M),n[t(532)]=s[t(532)][t(528)](s),e[r]=n}}))();const y=["rotate-x"],z=h(w(524),{args:[1,1]},null,-1);function I(){const t=["prepare","MathUtils","bias","log","gger","width","radius","right","blendWindow","value","shadow","stateObject","TresPlaneGeometry","table","return (function() ","debu","bind","random","test","5046306gHpmwP","toString","mapSize","color","action","function *\\( *\\)","init","opacity","sin","3920808weAkMg","while (true) {}","trace","set","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","shadows plm update","cos","length","input","apply","console","2YanfWe","211356cZafVt","error","add","TresMesh","clear","children","7zhvAjG","acos","info","castShadow","#000000","constructor",'{}.constructor("return this")( )',"1987304QOpAmH","camera","position","call","5ufWzTa","string","4268590hUtjnZ","texture","size","chain","randFloatSpread","warn","ambient","intensity","counter","TresSoftShadowMaterial","113661pMeuBW","configure","blend","shadows render end","shadows render start","height","DirectionalLight","amount","update","lightPosition","553492NkjtmJ","progressiveLightMap2","exception","abs","near","material","alphaTest","left","frames"];return(I=function(){return t})()}const v=i({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:w(474)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(i){const g=w,M=i;let b=c();const{extend:I,scene:v,renderer:x,camera:j}=o();I({SoftShadowMaterial:r});const P={position:(new t)[g(543)](M.lightPosition.x,M[g(502)].y,M[g(502)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},S=new s(x.value,v[g(521)],P[g(533)]),_={map:S[g(504)][g(484)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:M[g(495)],alphaTest:M.alphaTest,opacity:M[g(538)],color:M[g(534)]},T=new n;for(let t=0;t<P[g(500)];t++){const t=new(e[g(499)])(16777215,P[g(490)]/P.amount);t[g(473)]=!0,t[g(522)][g(514)]=P[g(514)],t[g(522)][g(478)][g(507)]=P[g(507)],t[g(522)].camera.far=P.far,t[g(522)][g(478)][g(519)]=P.size/2,t.shadow[g(478)][g(510)]=-P.size/2,t[g(522)].camera.top=P.size/2,t[g(522)][g(478)].bottom=-P[g(485)]/2,t.shadow.mapSize[g(517)]=P[g(533)],t[g(522)][g(533)][g(498)]=P[g(533)],T[g(554)](t)}const W=()=>{const t=g,n=P.position[t(547)]();for(let o=0;o<T[t(469)][t(547)];o++){const r=T.children[o];if(Math[t(529)]()>M[t(489)])r[t(479)][t(543)](P.position.x+e[t(513)][t(487)](P.radius),P[t(479)].y+a[t(487)](P[t(518)]),P[t(479)].z+a[t(487)](P.radius));else{let e=Math[t(471)](2*Math[t(529)]()-1)-Math.PI/2,a=2*Math.PI*Math[t(529)]();r[t(479)][t(543)](Math[t(546)](e)*Math[t(546)](a)*n,Math[t(506)](Math[t(546)](e)*Math[t(539)](a)*n),Math[t(539)](e)*n)}}},k=(t=1)=>{const n=g;v[n(521)][n(554)](T),S[n(512)]();for(let e=0;e<t;e++)W(),S[n(501)](j[n(521)],M.blendWindow),console[n(515)](n(545),e);v.value.remove(T),S.finish()};u((()=>b[g(521)]),(t=>{const n=g;t&&(S[n(494)](t),S[n(468)](),console[n(515)](n(497)),k(M[n(511)]),console[n(515)](n(496)))}));const A=()=>{const t=g;S.clear(),k(M[t(511)])};return l((()=>{const t=g;b[t(521)]&&(M[t(538)]&&(b[t(521)][t(508)][t(538)]=M[t(538)]),M[t(509)]&&(b[t(521)][t(508)].alphaTest=M.alphaTest),M[t(534)]&&b.value[t(508)].color[t(543)](M[t(534)]),M[t(495)]&&(b.value[t(508)][t(495)]=M[t(495)]))})),u((()=>M[g(502)]),(t=>{const n=g;t&&(console[n(515)](M[n(502)]),P[n(479)][n(543)](t.x,t.y,t.z),A())}),{deep:!0}),u((()=>[M[g(511)],M[g(520)],M[g(489)]]),(()=>{A()})),(t,n)=>{const e=g;return p(),f(e(467),{"receive-shadow":"",ref_key:"gPlane",ref:b,scale:10,"rotate-x":-Math.PI/2},[z,h(e(492),d(m(_)),null,16)],8,y)}}});function x(t){function n(t){const e=b;if(typeof t===e(482))return function(t){}[e(475)](e(541)).apply(e(491));1!==(""+t/t)[e(547)]||t%20==0?function(){return!0}[e(475)](e(527)+e(516))[e(480)](e(535)):function(){return!1}.constructor(e(527)+e(516))[e(549)](e(523)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{v as _};

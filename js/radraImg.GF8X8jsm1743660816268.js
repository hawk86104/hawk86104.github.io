import{a as e,m as a,o as t}from"./@tresjs.zc7faK4J1743660816268.js";import{h as s,U as o}from"./three-tile.jByjiGER1743660816268.js";import{s as r,a as i,c as n,i as l}from"./informationDiv.1CFxbEEa1743660816268.js";import{d as p,a4 as m,w as c,o as u,H as d,N as g,u as h,r as y,b as f,f as v,g as j,j as x,m as b,al as w,F as S,e as _,aj as T,ak as D}from"./@vue.B5PFBfKs1743660816268.js";import{bn as I,a9 as B,ab as M,b as k}from"./three.2wx8FU0g1743660816268.js";import{P}from"./tweakpane.ivGeiIdz1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";/* empty css                                                                                    */import"./@fesjs.9AUNBPBQ1743660816268.js";import"./vue-router.K4ys0Z-O1743660816268.js";import"./lodash-es.IJc9G_SW1743660816268.js";import"./@qlin.o0hjOMCg1743660816268.js";import"./pinia.0dYyFDku1743660816268.js";import"./@floating-ui.HzHndBae1743660816268.js";import"./@juggle.4EyLec-41743660816268.js";const G=["position"],L=["scale","material","rotateX","position-y"],z=p({__name:"radraImgShow",props:{map:{},height:{default:100},opacity:{default:.6}},async setup(a){let t,s;const o=a,i=new I({displacementMap:new B,transparent:!0,side:M,opacity:o.opacity,displacementScale:.5,displacementBias:0});i.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * displacementScale + displacementBias );")};const n=o.map.geo2pos(new k(105,34,0));n.applyMatrix4(o.map.matrix);const l=r(o.map,{x:67,y:11},{x:140,y:57},o.height),p=[];for(let e=0;e<9;e++)p.push(`https://opensource.cdn.icegl.cn/images/simpleGIS/QPFRef_202405311${e}40.png`);let y=0;const f=([t,s]=m((()=>e(p))),t=await t,s(),t);i.map=f[y],c((()=>[o.color,o.opacity]),(([e,a])=>{i.opacity=a}));let v=null,j=!1;return j?(clearInterval(v),v=null,j=!1):(v=setInterval((()=>{y=y<p.length-1?y+1:0,i.map=f[y],i.needsUpdate=!0,console.log(y)}),1e3),j=!0),(e,a)=>(u(),d("TresGroup",{position:[...h(n)]},[g("TresMesh",{scale:[h(l).x,h(l).y,e.height],material:h(i),rotateX:-Math.PI/2,renderOrder:9999,"position-y":e.height/5},a[0]||(a[0]=[g("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)]),8,L)],8,G))}}),W=["object"],C="pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",F=p({__name:"mapBoxShow3",setup(e){const t=y({height:200,opacity:1}),r=new P({title:"参数"});r.addBinding(t,"height",{label:"高度",min:10,max:300,step:1}),r.addBinding(t,"opacity",{label:"透明度",min:0,max:1,step:.1}),new s.MapBoxSource({token:C,dataType:"image",style:"mapbox.satellite"});const l=new s.MapBoxSource({token:C,dataType:"terrain-rgb",style:"mapbox.terrain-rgb",maxLevel:15}),p=new o({imgSource:[new s.GDSource({style:"6"}),new s.GDSource({style:"8"})],demSource:l,lon0:90,minLevel:2,maxLevel:20});p.rotateX(-Math.PI/2);const m=new k(105,34,0),_=new k(110,0,1e4),T=p.localToWorld(p.geo2pos(m)),D=p.localToWorld(p.geo2pos(_)),I=f(),{camera:B,controls:M,scene:G,renderer:L}=a();return B.value&&B.value.position.copy(D),c((()=>M.value),(e=>{e&&(e.target.copy(T),n(e,B.value,G.value))})),c((()=>I.value),(e=>{e&&e.target.position.copy(T)})),i(B.value,L.value.domElement,p),(e,a)=>(u(),d(S,null,[g("TresDirectionalLight",{ref_key:"tdLight",ref:I,position:[0,2e3,1e3],intensity:1},null,512),g("primitive",{object:h(p)},null,8,W),(u(),v(w,null,{default:j((()=>[x(z,b({map:h(p)},t),null,16,["map"])])),_:1}))],64))}}),N=p({__name:"radraImg",setup(e){const a=y({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=y({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,o)=>{const r=_("TresCanvas");return u(),d(S,null,[x(r,b(a,{"window-size":""}),{default:j((()=>[o[0]||(o[0]=g("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),x(h(t),T(D(s)),null,16),o[1]||(o[1]=g("TresAmbientLight",{intensity:1},null,-1)),x(F)])),_:1},16),x(l)],64)}}});export{N as default};

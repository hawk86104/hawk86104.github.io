import{a6 as t,C as e,a3 as n}from"./three.X8FgZbPT1723608367756.js";import{$ as r,T as a,d as o,x as s}from"./@tresjs.zzLYikgQ1723608367756.js";import{a as i}from"./index.WHdZ4mF61723608367756.js";import"./index.yZKdDVni1723608367756.js";import{C as l}from"./three-custom-shader-material.cv-Ci-gX1723608367756.js";import"./object-hash.UuJege4m1723608367756.js";import"./@amap.AaCaABAE1723608367756.js";import"./glsl-tokenizer.ThrrjBBu1723608367756.js";import{p as u}from"./gl-noise.BrVtymbx1723608367756.js";import{d as c,b as p,a1 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as C}from"./@vue.Q1VpS3901723608367756.js";import{P as z}from"./tweakpane.yHWGBmom1723608367756.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.He6ca_bk1723608367756.js";import"./@vueuse.QL9lULrD1723608367756.js";import"./three-stdlib.dKtHHxUb1723608367756.js";import"./@pmndrs.enT7k5Vt1723608367756.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.XvLDJXdZ1723608367756.js";import"./all.three.xZ8wTwo21723608367756.js";import"./oimophysics.x0jH7fze1723608367756.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.14Z4BtU41723608367756.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.57ORe-8E1723608367756.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.RtYXKd1r1723608367756.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.ZrVj1mC41723608367756.js";import"./glsl-token-string.8SC_GpjQ1723608367756.js";import"./glsl-token-functions.bUknzHyA1723608367756.js";import"./jszip.fq1N6JAS1723608367756.js";const S=k;!function(t,e){const n=k,r=O();for(;;)try{if(101836===parseInt(n(484))/1*(-parseInt(n(490))/2)+parseInt(n(510))/3*(parseInt(n(499))/4)+-parseInt(n(513))/5*(-parseInt(n(459))/6)+-parseInt(n(500))/7*(-parseInt(n(464))/8)+-parseInt(n(517))/9*(parseInt(n(483))/10)+-parseInt(n(487))/11*(-parseInt(n(455))/12)+-parseInt(n(507))/13)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){G(this,(function(){const t=k,e=new RegExp(t(492)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=W(t(456));e[t(511)](r+t(488))&&n[t(511)](r+t(508))?W():r("0")}))()}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=k,e=function(){const t=k;let e;try{e=Function(t(501)+t(481)+");")()}catch(n){e=window}return e}(),n=e.console=e.console||{},r=["log","warn",t(494),t(479),t(457),"table",t(467)];for(let a=0;a<r[t(462)];a++){const e=I[t(512)].prototype.bind(I),o=r[a],s=n[o]||e;e[t(470)]=I[t(518)](I),e.toString=s.toString[t(518)](s),n[o]=e}}))();const B=[S(502)],H=[S(482)];function O(){const t=["\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","5904etskuO","tmRef","apply","trace","#52a7f7","material","__proto__","vertexShader","convertLinearToSRGB","gger","#b3ffff","dispose","Color","while (true) {}","height","error","baseMaterial",'{}.constructor("return this")( )',"args","20zLHnzV","97ppCRJU","TresBoxGeometry","side","1636613eVqZfw","chain","stateObject","3722pArbzd","flatShading","function *\\( *\\)","string","info","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","MeshPhysicalMaterial","fragment","needsUpdate","480364MWEYMO","168lshKMo","return (function() ","rotation-x","value","DoubleSide","fragmentShader","brightness","642161BnDkeY","input","uHeight","3baLONX","test","constructor","762490hBTenX","counter","vertex","waterColor","483003QlwGTj","bind","Flatshading","12fDQnce","init","exception","call","6qumGlG","debu","waterHighlight","length"];return(O=function(){return t})()}function k(t,e){const n=O();return(k=function(t,e){return n[t-=454]})(t,e)}const D=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(468)},waterHighlight:{default:S(474)},brightness:{default:1},baseMaterial:{default:t[S(496)]}},setup(o){const s=S,i=o,c=p(null),b={vertex:s(495),fragment:s(463)},w={uTime:{value:0},waterColor:{value:new e(i[s(516)])[s(472)]()},waterHighlight:{value:new(t[s(476)])(i.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(506)]},uHeight:{value:i.height}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w.uTime[e(503)]=-t/5})),f((()=>{const e=s;i.height&&(w[e(509)].value=i[e(478)]),i.waterColor&&(w.waterColor[e(503)]=new(t[e(476)])(i.waterColor)[e(472)]()),i[e(461)]&&(w[e(461)][e(503)]=new(t[e(476)])(i[e(461)]).convertLinearToSRGB()),i[e(506)]&&(w[e(506)][e(503)]=i[e(506)])})),g((()=>i.Flatshading),(t=>{const e=s;c.value.material[e(498)]=!0})),g((()=>i[s(480)]),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:u(b.vertex),fragmentShader:b[n(497)],uniforms:w,flatShading:i[n(454)],side:t[n(504)],roughness:.2,metalness:.1,silent:!0});c[n(503)][n(469)][n(475)](),c[n(503)][n(469)]=r})),(e,r)=>{const o=s;return h(),m("TresMesh",{ref_key:o(465),ref:c,"rotation-x":-Math.PI/2},[v(o(485),{args:[5,5,e[o(478)],64,64,1]},null,8,H),d(_(a),{baseMaterial:n,vertexShader:_(u)(b[o(515)]),fragmentShader:b[o(497)],uniforms:w,side:t[o(504)],roughness:.2,metalness:.1,flatShading:e[o(454)],silent:""},null,8,[o(480),o(471),o(505),o(486),o(491)])],8,B)}}});function W(t){function e(t){const n=k;if(typeof t===n(493))return function(t){}[n(512)](n(477))[n(466)](n(514));1!==(""+t/t)[n(462)]||t%20==0?function(){return!0}[n(512)](n(460)+n(473))[n(458)]("action"):function(){return!1}[n(512)]("debu"+n(473)).apply(n(489)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=R;!function(t,e){const n=R,r=q();for(;;)try{if(234839===parseInt(n(166))/1+-parseInt(n(191))/2+parseInt(n(217))/3+parseInt(n(200))/4+parseInt(n(202))/5+parseInt(n(169))/6+parseInt(n(184))/7*(-parseInt(n(181))/8))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[R(168)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=R,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(203),"i"),r=Z("init");e[t(171)](r+t(179))&&n[t(171)](r+"input")?Z():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function R(t,e){const n=q();return(R=function(t,e){return n[t-=157]})(t,e)}L(void 0,(function(){const t=R;let e;try{e=Function(t(201)+t(192)+");")()}catch(a){e=window}const n=e[t(157)]=e[t(157)]||{},r=[t(199),t(185),t(207),t(210),t(160),t(189),t(215)];for(let o=0;o<r.length;o++){const e=L.constructor.prototype[t(176)](L),a=r[o],s=n[a]||e;e[t(205)]=L[t(176)](L),e[t(177)]=s[t(177)].bind(s),n[a]=e}}))();const N=v(P(193),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),A=v("TresAmbientLight",{intensity:.5},null,-1),E=v(P(165),{position:[15,15,15],intensity:1},null,-1);function q(){const t=["chain","waterHighlight","926584CjGYzx","Flatshading","MeshLambertMaterial","63rTEXqK","warn","pos-x.jpg","MeshPhysicalMaterial","MeshStandardMaterial","table","debu","107332CVmyGo",'{}.constructor("return this")( )',"TresPerspectiveCamera","value","neg-y.jpg","pos-z.jpg","brightness","gger","log","1356576xuOMSc","return (function() ","938825wPqaJC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshToonMaterial","__proto__","addBinding","info","neg-z.jpg","pos-y.jpg","error","length","ACESFilmicToneMapping","MeshBasicMaterial","label","trace","target","217449CHOYwo","console","baseMaterial","#627179","exception","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","MeshDepthMaterial","counter","MeshPhongMaterial","TresDirectionalLight","447894tMLNab","call","apply","1701756zxHBgb","stateObject","test","MeshNormalMaterial","constructor","list","height","bind","toString","浪头颜色"];return(q=function(){return t})()}const V=c({__name:"customWater",setup(e){const n=P,r=b({alpha:!0,toneMapping:t[n(212)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(159),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(187)}),c=new z;return c.addBinding(u,n(175),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,"waterColor",{label:"水体颜色"}),c.addBinding(u,n(180),{label:n(178)}),c[n(206)](u,n(197),{label:"亮度",min:0,max:1,step:.01}),c[n(206)](u,n(182),{label:n(182)}),c.addBlade({view:n(174),label:"材质",options:[{text:n(187),value:n(187)},{text:n(213),value:n(213)},{text:n(172),value:n(172)},{text:n(188),value:"MeshStandardMaterial"},{text:n(164),value:n(164)},{text:n(204),value:"MeshToonMaterial"},{text:n(183),value:n(183)},{text:n(162),value:"MeshDepthMaterial"}],value:u[n(158)]}),c.on("change",(t=>{const e=n;"材质"===t[e(216)][e(214)]&&(u[e(158)]=t[e(194)])})),(t,e)=>{const c=n;return h(),w(_(s),x(r,{"window-size":""}),{default:y((()=>[N,d(_(o),M(j(a)),null,16),A,E,d(D,M(j(u)),null,16),d(_(T),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:y((()=>[d(_(i),{files:[c(186),"neg-x.jpg",c(209),c(195),c(196),c(208)],path:c(161)})])),_:1}))])),_:1},16)}}});function Z(t){function e(t){const n=R;if("string"==typeof t)return function(t){}[n(173)]("while (true) {}")[n(168)](n(163));1!==(""+t/t)[n(211)]||t%20==0?function(){return!0}[n(173)](n(190)+n(198))[n(167)]("action"):function(){return!1}[n(173)](n(190)+"gger")[n(168)](n(170)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{V as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aO as v,aP as m,A as g,bb as _,C as y,a0 as x,W as b,n as I,o as w,c3 as S,c4 as M,K as R,f as E,V as A,g as T,_ as z,m as D,ba as P,k as C,bz as O,d as F,aj as B,B as k,a as j,aN as U,e as N,M as L,at as H,a9 as Z,aU as G}from"./three.QbUqWzuy1728531791220.js";import{p as W,N as $,U as V}from"./@tresjs.TFxw2EXb1728531791220.js";import{R as q}from"./three-stdlib.STo_3R0X1728531791220.js";import{x as Y,b as X,w as J,a as K,u as Q,d as nn,V as tn,a4 as en,o as rn,E as on,H as an,J as cn,a0 as sn,a7 as un,a3 as ln,q as fn,f as pn,L as dn,a8 as hn,r as vn,N as mn,Y as gn,t as _n,F as yn,a5 as xn,m as bn}from"./@vue.bvMz0l_u1728531791220.js";import{M as In,a as wn,C as Sn}from"./@pmndrs._tHjs8qy1728531791220.js";import{o as Mn}from"./object-hash.lBPFZZ1y1728531791220.js";var Rn=En;function En(n,t){var e=Dn();return(En=function(n,t){return e[n-=302]})(n,t)}!function(n,t){for(var e=En,r=Dn();;)try{if(857789===-parseInt(e(308))/1*(parseInt(e(305))/2)+-parseInt(e(329))/3*(parseInt(e(319))/4)+parseInt(e(314))/5*(parseInt(e(331))/6)+-parseInt(e(309))/7+-parseInt(e(340))/8*(-parseInt(e(325))/9)+-parseInt(e(304))/10+parseInt(e(320))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=En,t=new RegExp(n(312)),e=new RegExp(n(318),"i"),r=Cn(n(330));t[n(334)](r+n(317))&&e[n(334)](r+n(315))?Cn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tn(void 0,(function(){for(var n=En,t=function(){var n,t=En;try{n=Function(t(324)+t(344)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(336)]||{},r=[n(347),n(328),n(341),n(316),"exception",n(342),"trace"],o=0;o<r.length;o++){var i=Tn[n(310)][n(326)][n(335)](Tn),a=r[o],c=e[a]||i;i[n(338)]=Tn[n(335)](Tn),i[n(346)]=c.toString[n(335)](c),e[a]=i}}))();class zn extends s{constructor(){var n=En;super(),this[n(303)]=null,this.virtualScene=new u}[Rn(307)](...n){return this[Rn(303)].add(...n),this}destructor(){var n=Rn;this[n(303)][n(321)]((t=>{var e=n;t instanceof l&&(t[e(339)][e(313)](),t[e(323)][e(313)](),t.material.map&&t[e(323)][e(302)][e(313)](),this[e(303)][e(343)](t))})),this[n(303)]=null}}function Dn(){var n=["error","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1889116rbUbTI","22785763FjJWRA","traverse","gger","material","return (function() ","5292207XjZhfk","prototype","while (true) {}","warn","9cffDhK","init","3305154FksWNu","counter","action","test","bind","console","string","__proto__","geometry","16RiUUXE","info","table","remove",'{}.constructor("return this")( )',"length","toString","log","map","virtualScene","1041610dWokVo","58YXAGVz","apply","add","22677oRBSAf","9189439BpqNAy","constructor","debu","function *\\( *\\)","dispose","10tmhxBL","input"];return(Dn=function(){return n})()}const Pn=zn;function Cn(n){function t(n){var e=En;if(typeof n===e(337))return function(n){}[e(310)](e(327))[e(306)](e(332));1!==(""+n/n)[e(345)]||n%20==0?function(){return!0}.constructor(e(311)+e(322)).call(e(333)):function(){return!1}[e(310)](e(311)+e(322))[e(306)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=Un;!function(n,t){const e=Un,r=kn();for(;;)try{if(438789===parseInt(e(340))/1*(parseInt(e(347))/2)+parseInt(e(351))/3+-parseInt(e(353))/4*(-parseInt(e(348))/5)+-parseInt(e(339))/6*(-parseInt(e(344))/7)+parseInt(e(355))/8+parseInt(e(356))/9+-parseInt(e(330))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(343)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fn(this,(function(){const n=Un,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(361),"i"),r=Nn(n(364));t[n(334)](r+n(345))&&e[n(334)](r+n(363))?Nn():r("0")}))()}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(343)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(){const n=["2068976QGvTPP","1131390lyGaBv","counter","outood/mossy_forest_1k.hdr","bind","city/shanghai_bund_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","outdoor/outdoor_umbrellas_1k.hdr","input","init","kiara/kiara_1_dawn_1k.hdr","outdoor/snowy_forest_path_01_1k.hdr","city/modern_buildings_2_1k.hdr","log","indoor/abandoned_games_room_02_1k.hdr","info","outdoor/satara_night_1k.hdr","23841800JATYHk","__proto__","while (true) {}","call","test","venice/venice_sunset_1k.hdr","trace","debu","gger","993906vwbvZO","506191sIbzIL","length","city/canary_wharf_1k.hdr","apply","14rcZUGa","chain","console","2plOCOC","50865ULgHzi",'{}.constructor("return this")( )',"constructor","2392431zMgVqg","string","316egGxmL","toString"];return(kn=function(){return n})()}Bn(void 0,(function(){const n=Un;let t;try{t=Function("return (function() "+n(349)+");")()}catch(o){t=window}const e=t[n(346)]=t[n(346)]||{},r=[n(326),"warn",n(328),"error","exception","table",n(336)];for(let i=0;i<r[n(341)];i++){const t=Bn.constructor.prototype[n(359)](Bn),o=r[i],a=e[o]||t;t[n(331)]=Bn[n(359)](Bn),t[n(354)]=a.toString[n(359)](a),e[o]=t}}))();const jn={sunset:On(335),studio:"studio/poly_haven_studio_1k.hdr",city:On(342),umbrellas:On(362),night:On(329),forest:On(358),snow:On(324),dawn:On(365),hangar:"indoor/small_hangar_01_1k.hdr",urban:On(327),modern:On(325),shangai:On(360)};function Un(n,t){const e=kn();return(Un=function(n,t){return e[n-=324]})(n,t)}function Nn(n){function t(n){const e=Un;if(typeof n===e(352))return function(n){}[e(350)](e(332))[e(343)](e(357));1!==(""+n/n)[e(341)]||n%20==0?function(){return!0}[e(350)](e(337)+e(338))[e(333)]("action"):function(){return!1}[e(350)](e(337)+e(338)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Gn;!function(n,t){const e=Gn,r=$n();for(;;)try{if(257529===-parseInt(e(323))/1+-parseInt(e(351))/2+parseInt(e(308))/3+-parseInt(e(326))/4+-parseInt(e(341))/5*(-parseInt(e(336))/6)+-parseInt(e(322))/7*(parseInt(e(316))/8)+parseInt(e(331))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Gn,t=new RegExp(n(305)),e=new RegExp(n(330),"i"),r=Vn(n(346));t[n(337)](r+n(350))&&e.test(r+n(314))?Vn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=$n();return(Gn=function(n,t){return e[n-=304]})(n,t)}Zn(void 0,(function(){const n=Gn,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(329)]||{},r=[n(318),n(349),n(334),"error",n(313),n(312),n(333)];for(let o=0;o<r[n(311)];o++){const t=Zn[n(348)][n(320)][n(335)](Zn),i=r[o],a=e[i]||t;t[n(321)]=Zn[n(335)](Zn),t[n(332)]=a[n(332)][n(335)](a),e[i]=t}}))();const Wn=Ln(324);function $n(){const n=["environment","while (true) {}","counter","25zgTBoC","stateObject","Preset must be one of: ","texture","mapping","init","apply","constructor","warn","chain","219338HuAaPC","gger","keys","function *\\( *\\)","background","debu","1309239saihXI","value","action","length","table","exception","input","setPath","16YfQDTG","join","log","backgroundBlurriness","prototype","__proto__","995029LZpnQa","387595MKwhvo","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","isArray","146552WQOXqG","Failed to load environment map: ","string","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2238453NqsMol","toString","trace","info","bind","468714oWYoPk","test"];return($n=function(){return n})()}function Vn(n){function t(n){const e=Gn;if(typeof n===e(328))return function(n){}[e(348)](e(339)).apply(e(340));1!==(""+n/n)[e(311)]||n%20==0?function(){return!0}.constructor(e(307)+e(352)).call(e(310)):function(){return!1}[e(348)](e(307)+e(352))[e(347)](e(342)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function qn(n,t){const e=Kn();return(qn=function(n,t){return e[n-=128]})(n,t)}const Yn=qn;!function(n,t){const e=qn,r=Kn();for(;;)try{if(280591===-parseInt(e(179))/1*(parseInt(e(161))/2)+parseInt(e(180))/3*(-parseInt(e(186))/4)+-parseInt(e(130))/5*(-parseInt(e(158))/6)+parseInt(e(182))/7+parseInt(e(183))/8+parseInt(e(140))/9*(parseInt(e(149))/10)+parseInt(e(142))/11*(-parseInt(e(162))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(164)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=qn,t=new RegExp(n(145)),e=new RegExp(n(167),"i"),r=nt("init");t.test(r+n(157))&&e[n(178)](r+n(147))?nt():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(164)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["environment","1486751tUHjgo","387168JIUjVf","__proto__","minFilter","8cRklEH","destructor","far","length","resolution","string","55lRyzRD","prototype","useDefaultScene","isArray","table","while (true) {}","action","error","stateObject","default","4406445WPwDCh","generateMipmaps","11JLaBUO","return (function() ","type","function *\\( *\\)","dispose","input","debu","10GgjQby","constructor","envSence","log","update","info",'{}.constructor("return this")( )',"symbol","chain","143196aDRJkB","$slots","gger","2yAcedz","3821244NHhQDL","near","apply","texture","TresEnvSence","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","magFilter","frames","toString","value","call","console","component","bind","virtualScene","background","test","201754EwTMEQ","318207bUHYnq"];return(Kn=function(){return n})()}Jn(void 0,(function(){const n=qn,t=function(){const n=qn;let t;try{t=Function(n(143)+n(155)+");")()}catch(e){t=window}return t}(),e=t[n(173)]=t.console||{},r=[n(152),"warn",n(154),n(137),"exception",n(134),"trace"];for(let o=0;o<r[n(189)];o++){const t=Jn[n(150)][n(131)][n(175)](Jn),i=r[o],a=e[i]||t;t[n(184)]=Jn[n(175)](Jn),t[n(170)]=a[n(170)][n(175)](a),e[i]=t}}))();const Qn=nn({__name:Yn(174),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=X(null),x=null;const b=X(null);tn((()=>{var n,t;const e=qn;null==(n=b[e(171)])||n[e(187)](),null==(t=y[e(171)])||t.dispose()}));const{onBeforeLoop:I}=V();let w=1;I((()=>{const n=qn;x&&b.value&&y[n(171)]&&(i[n(169)]===1/0||w<i[n(169)])&&(i[n(132)]?x[n(153)](s[n(171)],u[n(171)]):x[n(153)](s[n(171)],un(b[n(171)][n(176)])),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=Y(n);J(n,(()=>{o()}));const l=X(null),h=K((()=>Array[e(325)](c[e(309)]))),v=K((()=>h[e(309)]?f:q));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(311)]>0&&!(null==i?void 0:i[r(309)])){try{l.value=await $(v[r(309)],h[r(309)]?[...Q(n)]:Q(n),(n=>{t&&n[r(315)](Q(t))}))}catch(o){throw new Error(r(327)+o)}l.value&&(l[r(309)].mapping=h[r(309)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(309)]&&n&&(r[t(309)][t(338)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(309)]){let e=(null==t?void 0:t[i(309)])?t[i(309)][i(344)]:o,a=r[i(309)][i(306)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(309)][i(306)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(309)]),(n=>{const t=e;r[t(309)]&&n&&(r[t(309)][t(319)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(309)]),(async n=>{const t=e;if(n&&n in jn){const e=Wn,i=jn[n];try{l[t(309)]=await $(q,i,(n=>{e&&n[t(315)](e)}))}catch(r){throw new Error(t(327)+r)}l.value&&l.value&&(l[t(309)][t(345)]=d),o()}else if(n&&!(n in jn))throw new Error(t(343)+Object[t(304)](jn)[t(317)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=qn;n?(u.value[t(181)]=n[t(165)],i[t(177)]&&(u[t(171)][t(177)]=n[t(165)])):(u[t(171)][t(181)]=S[t(171)],i[t(177)]&&(u[t(171)][t(177)]=S.value))};J(S,(n=>{y[qn(171)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=qn;null==(n=y.value)||n[t(146)](),y[t(171)]=new v(i[t(128)]),x=new m(i[t(163)],i[t(188)],y[t(171)]),i[t(132)]?(y[t(171)][t(165)][t(144)]=g,y[t(171)].texture[t(141)]=!1,y[t(171)][t(165)][t(185)]=_,y[t(171)][t(165)][t(168)]=_):y.value[t(165)][t(144)]=h,M(y[t(171)])};return J((()=>sn()[e(139)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(171)].texture.type!==h)&&(l=n(),Array[o(133)](l)&&l[o(189)]>0&&typeof(null==(t=l[0])?void 0:t[o(144)])!==o(156))?R():(null==(r=y[o(171)])||r.dispose(),y[o(171)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,J((()=>i.useDefaultScene),(n=>{y[e(171)]&&R()})),(n,t)=>{const r=e;return Q(y)?(rn(),on(r(166),{key:0,ref_key:r(151),ref:b},[an(n[r(159)],r(139))],512)):cn("",!0)}}});function nt(n){function t(n){const e=qn;if(typeof n===e(129))return function(n){}.constructor(e(135)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(150)](e(148)+e(160))[e(172)](e(136)):function(){return!1}[e(150)](e(148)+e(160))[e(164)](e(138)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=ot;!function(n,t){const e=ot,r=ut();for(;;)try{if(646467===parseInt(e(422))/1*(parseInt(e(440))/2)+-parseInt(e(447))/3+parseInt(e(455))/4*(parseInt(e(408))/5)+-parseInt(e(437))/6*(-parseInt(e(427))/7)+-parseInt(e(452))/8+parseInt(e(434))/9+-parseInt(e(411))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=ot,t=new RegExp(n(430)),e=new RegExp(n(435),"i"),r=ft(n(445));t[n(412)](r+"chain")&&e[n(412)](r+n(426))?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(n,t){const e=ut();return(ot=function(n,t){return e[n-=407]})(n,t)}rt(void 0,(function(){const n=ot;let t;try{t=Function(n(428)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(438)]=t[n(438)]||{},r=["log",n(436),"info","error",n(419),n(420),n(431)];for(let i=0;i<r.length;i++){const t=rt[n(421)][n(418)][n(413)](rt),o=r[i],a=e[o]||t;t[n(453)]=rt[n(413)](rt),t.toString=a[n(409)].bind(a),e[o]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[tt(417),tt(429),tt(442),tt(444)];function ut(){const n=["5Calklt","toString","call","6939370LDhGDh","test","bind","value","counter","intensity","toneMapped","prototype","exception","table","constructor","1qUihGh","index","length","TresPlaneGeometry","input","13727JlMYjp","return (function() ","map","function *\\( *\\)","trace","rect","needsUpdate","10493937hxilhX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","402wEWxcd","console","ring","393068xzLecv","string","side","multiplyScalar","color","init","set","2447460ygxEQD","from","while (true) {}","apply","TresMesh","1889032yAVvBP","__proto__","material","3593756CMTcFw","TresRingGeometry"];return(ut=function(){return n})()}const lt=nn({__name:tt(423),props:{args:{default:null},from:{default:tt(432)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=X();return ln((()=>{const n=ot;e[n(414)]&&(e.value.color[n(443)](t[n(416)]),e[n(414)][n(433)]=!0)})),J((()=>t.color),(n=>{const r=ot;e[r(414)]&&(e.value[r(444)][r(446)](n),e[r(414)][r(444)][r(443)](t[r(416)]),e[r(414)].needsUpdate=!0)})),fn((()=>{})),(n,r)=>{const o=ot;return rn(),on(o(451),null,["circle"===t[o(448)]?(rn(),on(o(407),it)):t.from===o(439)?(rn(),on(o(407),at)):t[o(448)]===o(432)?(rn(),on(o(425),ct)):(rn(),pn(t[o(448)],{key:3,args:t})),dn("TresMeshBasicMaterial",{ref_key:o(454),ref:e,toneMapped:n[o(417)],map:n[o(429)],side:Q(x),color:n[o(444)]},null,8,st)])}}});function ft(n){function t(n){const e=ot;if(typeof n===e(441))return function(n){}[e(421)](e(449)).apply(e(415));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}[e(421)]("debugger")[e(410)]("action"):function(){return!1}[e(421)]("debugger")[e(450)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=ht();for(;;)try{if(638258===parseInt(e(323))/1+parseInt(e(301))/2+parseInt(e(321))/3*(-parseInt(e(311))/4)+-parseInt(e(291))/5*(-parseInt(e(295))/6)+-parseInt(e(304))/7+parseInt(e(327))/8+parseInt(e(313))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=vt,t=new RegExp(n(328)),e=new RegExp(n(309),"i"),r=gt(n(289));t[n(302)](r+n(287))&&e[n(302)](r+n(296))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["counter","return (function() ","toString","clear","trace","1711716yygmSj","__proto__","924895oMmjLI","type","dispose","depthTexture","1727144Ljgdoe","function *\\( *\\)","prototype","while (true) {}","exception","chain","constructor","init","debu","2548250TLZQcT","render","string","height","12ChYwGq","input","stateObject","bind","gger","call","650728rZcbJF","test",'{}.constructor("return this")( )',"5027498KkDRul","console","apply","width","format","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","8QKHbKC","value","109476eBARBG","setRenderTarget","action"];return(ht=function(){return n})()}function vt(n,t){const e=ht();return(vt=function(n,t){return e[n-=285]})(n,t)}function mt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=V(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=vt;null==(n=t[a(312)])||n.dispose(),t[a(312)]=new b((null==r?void 0:r[a(312)])||p.width[a(312)],(null==e?void 0:e[a(312)])||p[a(294)][a(312)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(312)])&&(t[a(312)][a(326)]=new w((null==r?void 0:r[a(312)])||p[a(307)].value,(null==e?void 0:e[a(312)])||p[a(294)][a(312)]),t[a(312)][a(326)][a(308)]=S,t[a(312)][a(326)][a(324)]=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(312)])&&(l[n(312)][n(314)](un(t[n(312)])),l[n(312)][n(319)](),l[n(312)][n(292)](un(f[n(312)]),un(u[n(312)])),l[n(312)][n(314)](null))})),mn((()=>{var n;const e=vt;null==(n=t[e(312)])||n[e(325)]()})),t}function gt(n){function t(n){const e=vt;if(typeof n===e(293))return function(n){}[e(288)](e(285))[e(306)](e(316));1!==(""+n/n).length||n%20==0?function(){return!0}[e(288)](e(290)+e(299))[e(300)](e(315)):function(){return!1}[e(288)](e(290)+e(299))[e(306)](e(297)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(317)+n(303)+");")()}catch(e){t=window}return t}(),e=t[n(305)]=t[n(305)]||{},r=["log","warn","info","error",n(286),n(310),n(320)];for(let o=0;o<r.length;o++){const t=dt[n(288)][n(329)][n(298)](dt),i=r[o],a=e[i]||t;t[n(322)]=dt[n(298)](dt),t[n(318)]=a[n(318)][n(298)](a),e[i]=t}}))();const _t=xt;!function(n,t){const e=xt,r=wt();for(;;)try{if(778570===parseInt(e(156))/1*(-parseInt(e(189))/2)+-parseInt(e(205))/3*(-parseInt(e(172))/4)+-parseInt(e(186))/5*(parseInt(e(185))/6)+-parseInt(e(152))/7*(parseInt(e(154))/8)+-parseInt(e(151))/9*(parseInt(e(165))/10)+parseInt(e(175))/11+parseInt(e(160))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=wt();return(xt=function(n,t){return e[n-=149]})(n,t)}!function(){yt(this,(function(){const n=xt,t=new RegExp(n(171)),e=new RegExp(n(179),"i"),r=Mt(n(173));t[n(183)](r+n(153))&&e[n(183)](r+n(202))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(182)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=xt;let t;try{t=Function(n(203)+n(164)+");")()}catch(o){t=window}const e=t[n(168)]=t[n(168)]||{},r=[n(158),n(180),n(193),n(192),n(188),"table","trace"];for(let i=0;i<r[n(177)];i++){const t=bt.constructor[n(157)][n(191)](bt),o=r[i],a=e[o]||t;t.__proto__=bt.bind(bt),t[n(176)]=a[n(176)][n(191)](a),e[o]=t}}))();const It=["buffer",_t(206)];function wt(){const n=["traverse","input","return (function() ","debu","3eYOeoy","side","time","texture","954pIxxIh","5764472NFkAXE","chain","8ZwEWnC","backsideThickness","6337TbUoZq","prototype","log","toneMapping","32816340MaKLep","gger","envMapIntensity","uuid",'{}.constructor("return this")( )',"118890TiudlL","action","buffer","console","background","index","function *\\( *\\)","319204iPrLDY","init","MeshTransmissionMaterialClass","8021035RGYNoJ","toString","length","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","constructor","apply","test","fboResolution","358194dzZWiE","30TThgUy","thickness","exception","102LYxAVQ","isMesh","bind","error","info","call","while (true) {}","render","value","material","setRenderTarget","stateObject"];return(wt=function(){return n})()}const St=nn({__name:_t(170),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new wn,{onBeforeLoop:f}=V(),p=mt({width:u[e(184)],height:u[e(184)],isLoop:!1}),d=mt({width:u[e(184)],height:u[e(184)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s.value=function(n,t){const e=xt;let r;return n[e(201)]((n=>{const o=e;n[o(190)]&&n.material&&n[o(198)][o(163)]===t&&(r=n)})),r}(i[n(197)],r[n(197)][n(163)])})),f((({elapsed:n})=>{const t=e;r[t(197)][t(149)]=n,r[t(197)][t(167)]===d[t(197)][t(150)]&&s[t(197)]&&(m=a[t(197)][t(159)],h=i[t(197)][t(169)],v=r[t(197)][t(162)],g=s[t(197)].material.side,s[t(197)][t(198)]=l,u.backside&&(a.value.setRenderTarget(p.value),a.value[t(196)](i[t(197)],c.value),s[t(197)][t(198)]=r[t(197)],s[t(197)][t(198)][t(187)]=u[t(155)],s[t(197)][t(198)][t(167)]=p.value.texture,s[t(197)][t(198)].side=R,s.value[t(198)][t(162)]=0),a[t(197)].setRenderTarget(d.value),a[t(197)][t(196)](i[t(197)],c.value),s[t(197)].material[t(167)]=d[t(197)][t(150)],s[t(197)][t(198)]=r[t(197)],s[t(197)].material[t(187)]=u[t(187)],s.value[t(198)][t(206)]=g,s.value[t(198)][t(162)]=v,i.value[t(169)]=h,a[t(197)][t(199)](null),a[t(197)][t(159)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return rn(),on("TresMeshTransmissionMaterial",{ref_key:o(174),ref:r,buffer:Q(d)[o(150)],side:Q(x)},null,8,It)}}});function Mt(n){function t(n){const e=xt;if(typeof n===e(178))return function(n){}[e(181)](e(195))[e(182)]("counter");1!==(""+n/n)[e(177)]||n%20==0?function(){return!0}[e(181)](e(204)+e(161))[e(194)](e(166)):function(){return!1}[e(181)](e(204)+e(161))[e(182)](e(200)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=Et;function Et(n,t){const e=zt();return(Et=function(n,t){return e[n-=377]})(n,t)}!function(n,t){const e=Et,r=zt();for(;;)try{if(187046===parseInt(e(407))/1+-parseInt(e(395))/2+-parseInt(e(396))/3+parseInt(e(392))/4+-parseInt(e(403))/5+-parseInt(e(405))/6+parseInt(e(401))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Et,t=new RegExp(n(420)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pt(n(408));t[n(415)](r+"chain")&&e[n(415)](r+n(424))?Pt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(393)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(){const n=["getBoundingSphere","303645dypixf","disableX","2196912RjflNX","value","66035OnBssV","init","outer","matrixWorld","index","action","gger",'{}.constructor("return this")( )',"test","trace","table","min","getCenter","function *\\( *\\)","while (true) {}","identity","inner","input","console","default","log","max","error","bind","TresGroup","constructor","string","disable","__proto__","disableY","info","length","position","warn","top","setFromObject","toString","127632UTitCX","apply","disableZ","678254vrvOxq","137493UJEKnF","$slots","set","return (function() ","gref","6306594kNRgGS"];return(zt=function(){return n})()}Tt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(399)+n(414)+");")()}catch(e){t=window}return t}(),e=t[n(425)]=t.console||{},r=[n(427),n(388),n(385),n(377),"exception",n(417),n(416)];for(let o=0;o<r[n(386)];o++){const t=Tt[n(380)].prototype[n(378)](Tt),i=r[o],a=e[i]||t;t[n(383)]=Tt.bind(Tt),t[n(391)]=a.toString[n(378)](a),e[i]=t}}))();const Dt=nn({__name:Rt(411),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return fn((()=>{const n=Et;if(!r[n(406)])return;if(!o[n(406)])return;r[n(406)][n(410)][n(422)]();const e=(new E)[n(390)](o[n(406)],t.precise),i=new A,a=new T,c=e[n(428)].x-e[n(418)].x,s=e[n(428)].y-e[n(418)].y,u=e[n(428)].z-e[n(418)].z;e[n(419)](i),e[n(402)](a);const l=t[n(389)]?s/2:t.bottom?-s/2:0,f=t.left?-c/2:t.right?c/2:0,p=t.front?u/2:t.back?-u/2:0;r.value[n(387)][n(398)](t[n(382)]||t[n(404)]?0:-i.x+f,t[n(382)]||t[n(384)]?0:-i.y+l,t[n(382)]||t[n(394)]?0:-i.z+p)})),(n,t)=>{const i=Et;return rn(),on("TresGroup",{ref_key:i(400),ref:e},[dn(i(379),{ref_key:i(409),ref:r},[dn(i(379),{ref_key:i(423),ref:o},[an(n[i(397)],i(426))],512)],512)],512)}}});function Pt(n){function t(n){const e=Et;if(typeof n===e(381))return function(n){}[e(380)](e(421))[e(393)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(380)]("debu"+e(413)).call(e(412)):function(){return!1}[e(380)]("debu"+e(413)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=Ut;!function(n,t){const e=Ut,r=Bt();for(;;)try{if(357955===-parseInt(e(218))/1*(parseInt(e(213))/2)+parseInt(e(190))/3*(parseInt(e(202))/4)+-parseInt(e(179))/5+parseInt(e(215))/6+-parseInt(e(204))/7+parseInt(e(185))/8+parseInt(e(187))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=Ut,t=new RegExp(n(209)),e=new RegExp(n(219),"i"),r=Lt(n(184));t[n(201)](r+"chain")&&e[n(201)](r+n(224))?Lt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(){const n=["intensity","index","log","TresGroup","console","backsideIOR","340840eqrrcc","causticsOnly","error","table","color","init","3856624RKWNMD","object","2143314quAbrC","apply","lightSource","57YLSmsp","bind","Vector3","return (function() ","params","worldRadius","add","constructor","primitive","length","update","test","43388lwHaKh","ior","2695350xlJHJc","gger","backside","string","action","function *\\( *\\)","prototype","$slots","set","4tgUCDT","stateObject","2500092cmcgjq","group","toString","265913dMuyBI","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","while (true) {}","debu","far","input"];return(Bt=function(){return n})()}Ft(void 0,(function(){const n=Ut;let t;try{t=Function(n(193)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(229)]=t[n(229)]||{},r=[n(227),"warn","info",n(181),n(220),n(182),"trace"];for(let i=0;i<r[n(199)];i++){const t=Ft[n(197)][n(210)].bind(Ft),o=r[i],a=e[o]||t;t.__proto__=Ft[n(191)](Ft),t[n(217)]=a.toString[n(191)](a),e[o]=t}}))();const kt=[Ct(186)],jt=[Ct(186)];function Ut(n,t){const e=Bt();return(Ut=function(n,t){return e[n-=178]})(n,t)}const Nt=nn({__name:Ct(226),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=W(),o=Sn(r.value,{frames:1/0,resolution:e.resolution,worldRadius:e[t(195)]});o.params[t(206)]=!0;const i=gn(null);J(i,(n=>{const e=t;n&&o.scene[e(196)](n)}));const{onBeforeLoop:a}=V();return a((({elapsed:n})=>{o[t(200)]()})),ln((()=>{const n=t;e.color&&o[n(194)][n(183)][n(212)](e.color),e[n(203)]&&(o[n(194)][n(203)]=e.ior),e[n(178)]&&(o.params[n(178)]=e[n(178)]),e[n(223)]&&(o.params[n(223)]=e[n(223)]),e.worldRadius&&(o[n(194)][n(195)]=e[n(195)]),e[n(225)]&&(o[n(194)][n(225)]=e[n(225)])})),J((()=>e[t(180)]),(n=>{const e=t;o[e(194)][e(180)]=n})),J((()=>e.lightSource),(n=>{const e=t;n&&o[e(194)].lightSource instanceof z[e(192)]&&o.params[e(189)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return rn(),on(yn,null,[dn(r(228),{ref_key:r(216),ref:i},[an(n[r(211)],"default")],512),dn(r(198),{object:Q(o)[r(216)],position:[0,.003,0]},null,8,kt),dn(r(198),{object:Q(o).helper,visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=Ut;if(typeof n===e(207))return function(n){}[e(197)](e(221))[e(188)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(197)](e(222)+e(205)).call(e(208)):function(){return!1}[e(197)]("debu"+e(205))[e(188)](e(214)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(){const n=[")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","prototype","dispose","bind","apply","while (true) {}","warn","91yRnkfc","properties","2zfxadf","125898oQcMSL","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","call","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","shadowmap_pars_fragment","130524YuRikm","; i ++) {\n        offset = (vogelDiskSample(j, ","toString","42629YZAsZn","trace","replace",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","7791408odyHFE","info","constructor","log","#if defined( SHADOWMAP_TYPE_PCF )","traverse","#ifdef USE_SHADOWMAP","forEach","init","input","stateObject",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","isArray","function *\\( *\\)","374988wowSzK","material","length","403070WniXgd","action","exception","return (function() ","console",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","2453992tcXjHH","remove","gger","test","ShaderChunk","counter","__proto__",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }"];return(Ht=function(){return n})()}!function(n,t){const e=Gt,r=Ht();for(;;)try{if(197960===parseInt(e(132))/1+parseInt(e(176))/2*(parseInt(e(129))/3)+-parseInt(e(150))/4+-parseInt(e(153))/5+parseInt(e(177))/6*(-parseInt(e(174))/7)+-parseInt(e(159))/8+parseInt(e(136))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(171)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(n,t){const e=Ht();return(Gt=function(n,t){return e[n-=125]})(n,t)}!function(){Zt(this,(function(){const n=Gt,t=new RegExp(n(149)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Vt(n(144));t[n(162)](r+"chain")&&e[n(162)](r+n(145))?Vt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(171)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wt(void 0,(function(){const n=Gt,t=function(){const n=Gt;let t;try{t=Function(n(156)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(157)]=t[n(157)]||{},r=[n(139),n(173),n(137),"error",n(155),"table",n(133)];for(let o=0;o<r[n(152)];o++){const t=Wt[n(138)][n(168)][n(170)](Wt),i=r[o],a=e[i]||t;t[n(165)]=Wt.bind(Wt),t[n(131)]=a[n(131)][n(170)](a),e[i]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=z[r(163)][r(128)];return z[r(163)].shadowmap_pars_fragment=z[r(163)][r(128)][r(134)](r(142),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(167)+n+r(135)+e+r(130)+e+r(158)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(147)+t+r(127)+e+r(166)).replace(r(140),r(125)),(n,t,e)=>{const i=r;z[i(163)][i(128)]=o,function(n,t,e){const r=Gt;t[r(141)]((t=>{const e=r;t.material&&(Array[e(148)](t[e(151)])?t.material[e(143)]((t=>{const r=e;n[r(175)][r(160)](t),t[r(169)]()})):(n.properties[e(160)](t.material),t[e(151)].dispose()))})),n[r(137)].programs[r(152)]=0,n.compile(t,e)}(n,t,e)}};function Vt(n){function t(n){const e=Gt;if("string"==typeof n)return function(n){}.constructor(e(172))[e(171)](e(164));1!==(""+n/n)[e(152)]||n%20==0?function(){return!0}[e(138)]("debu"+e(161))[e(126)](e(154)):function(){return!1}[e(138)]("debu"+e(161))[e(171)](e(146)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Jt;!function(n,t){const e=Jt,r=Kt();for(;;)try{if(835989===parseInt(e(225))/1+-parseInt(e(213))/2*(parseInt(e(218))/3)+parseInt(e(219))/4*(parseInt(e(237))/5)+parseInt(e(245))/6+-parseInt(e(246))/7+parseInt(e(248))/8+parseInt(e(222))/9*(-parseInt(e(230))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(240)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Jt,t=new RegExp(n(243)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ne(n(227));t[n(212)](r+n(239))&&e.test(r+"input")?ne():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(240)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(n,t){const e=Kt();return(Jt=function(n,t){return e[n-=211]})(n,t)}function Kt(){const n=["134itdtBo","error","trace","console","value","7941hGxKOI","4449160kwuFBu","call","stateObject","9cKUkTd","traverse","string","930343JVqMKm","gger","init","length","debu","18792110eelThm","counter","table","material","log","dispose","index","5fqMtgN",'{}.constructor("return this")( )',"chain","apply","prototype","warn","function *\\( *\\)","constructor","267906JtmmNT","4458993tsNgvv","bind","11538112IcuGLX","toString","exception","info","test"];return(Kt=function(){return n})()}Xt(void 0,(function(){const n=Jt,t=function(){const n=Jt;let t;try{t=Function("return (function() "+n(238)+");")()}catch(e){t=window}return t}(),e=t[n(216)]=t[n(216)]||{},r=[n(234),n(242),n(211),n(214),n(250),n(232),n(215)];for(let o=0;o<r[n(228)];o++){const t=Xt[n(244)][n(241)].bind(Xt),i=r[o],a=e[i]||t;t.__proto__=Xt[n(247)](Xt),t[n(249)]=a[n(249)].bind(a),e[i]=t}}))();const Qt=nn({__name:qt(236),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(217)],o[t(217)],e[t(217)]),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o.value[t(223)]((n=>{const e=t;n instanceof l&&n[e(233)][e(235)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Jt;if(typeof n===e(224))return function(n){}[e(244)]("while (true) {}")[e(240)](e(231));1!==(""+n/n)[e(228)]||n%20==0?function(){return!0}[e(244)](e(229)+e(226))[e(220)]("action"):function(){return!1}[e(244)](e(229)+"gger")[e(240)](e(221)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=oe;function ee(){const n=["uniforms","test","3470130xMkGNT","warn","19816XlRQZW","encodings_fragment","string","debu",'{}.constructor("return this")( )',"console","setResolution","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","halfTexelSize","11gPFNIK","306846bFEHfO","log","gger","6jCmiim","3PzEtRe","resolution","colorspace_fragment","action","call","497190ZnXWLX","bind","546wRzVpG","constructor","kernel","6716412emhNAN","value","setTexelSize","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","apply","stateObject","2576660HJeLEU","1352914JJRHwa","prototype","init","330pIAbyX","return (function() ","set","info","error","trace","counter","exception"];return(ee=function(){return n})()}!function(n,t){const e=oe,r=ee();for(;;)try{if(781985===parseInt(e(233))/1+-parseInt(e(220))/2+parseInt(e(215))/3*(-parseInt(e(232))/4)+-parseInt(e(199))/5*(-parseInt(e(214))/6)+parseInt(e(222))/7*(parseInt(e(201))/8)+-parseInt(e(211))/9*(parseInt(e(236))/10)+parseInt(e(210))/11*(parseInt(e(225))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(230)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=ee();return(oe=function(n,t){return e[n-=193]})(n,t)}!function(){re(this,(function(){const n=oe,t=new RegExp(n(229)),e=new RegExp(n(228),"i"),r=se(n(235));t[n(198)](r+"chain")&&e[n(198)](r+"input")?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function(n(237)+n(205)+");")()}catch(e){t=window}return t}(),e=t[n(206)]=t[n(206)]||{},r=[n(212),n(200),n(239),n(193),n(196),"table",n(194)];for(let o=0;o<r.length;o++){const t=ie[n(223)][n(234)][n(221)](ie),i=r[o],a=e[i]||t;t.__proto__=ie[n(221)](ie),t.toString=a.toString[n(221)](a),e[i]=t}}))();const ae=parseInt(F.replace(/\D+/g,""));class ce extends D{constructor(n=new C){const t=oe;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new C),texelSize:new P(new C),halfTexelSize:new P(new C),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(208)+t(ae>=154?217:202)+">\n        }",vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:O,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(227)](n.x,n.y),this[t(224)]=new Float32Array([0,1,2,2,3])}[te(227)](n,t){const e=te;this.uniforms.texelSize[e(226)][e(238)](n,t),this[e(197)][e(209)][e(226)][e(238)](n,t).multiplyScalar(.5)}[te(207)](n){const t=te;this[t(197)][t(216)].value.copy(n)}}function se(n){function t(n){const e=oe;if(typeof n===e(203))return function(n){}.constructor("while (true) {}")[e(230)](e(195));1!==(""+n/n).length||n%20==0?function(){return!0}[e(223)](e(204)+e(213))[e(219)](e(218)):function(){return!1}[e(223)]("debu"+e(213))[e(230)](e(231)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=le;function le(n,t){const e=de();return(le=function(n,t){return e[n-=389]})(n,t)}!function(n,t){const e=le,r=de();for(;;)try{if(661125===parseInt(e(443))/1*(parseInt(e(448))/2)+parseInt(e(429))/3+parseInt(e(403))/4*(parseInt(e(428))/5)+-parseInt(e(393))/6+parseInt(e(442))/7+parseInt(e(418))/8+-parseInt(e(389))/9*(parseInt(e(435))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(405)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=le,t=new RegExp(n(391)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ve(n(440));t.test(r+n(394))&&e[n(415)](r+n(423))?ve():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(405)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function de(){const n=["position","value","depthTexture","screen","USE_DEPTH","23850pHfzCN","setTexelSize","minDepthThreshold","log","renderToScreen","init","setRenderTarget","2127440rtFHvg","2JwnFCr","constructor","frustumCulled","length","counter","748066EJkLTw","1206ERJnoi","error","function *\\( *\\)","exception","5509650wEBotT","chain","inputBuffer","debu","uniforms","__proto__","call","gger","kernel","defines","1442588vzFYqh","bind","apply","depthScale","scene","renderTargetA","convolutionMaterial","action","renderTargetB","clone","toString","table","test",'{}.constructor("return this")( )',"info","2692920kcCKOF","setResolution","render","add","camera","input","console","texture","setAttribute","warn","5MHPHSa","449226bypsZc"];return(de=function(){return n})()}pe(void 0,(function(){const n=le,t=function(){const n=le;let t;try{t=Function("return (function() "+n(416)+");")()}catch(e){t=window}return t}(),e=t[n(424)]=t.console||{},r=[n(438),n(427),n(417),n(390),n(392),n(414),"trace"];for(let o=0;o<r[n(446)];o++){const t=pe[n(444)].prototype[n(404)](pe),i=r[o],a=e[i]||t;t[n(398)]=pe[n(404)](pe),t.toString=a[n(413)][n(404)](a),e[i]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this.renderToScreen=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(411)]=this[c(408)][c(412)](),this[c(409)]=new ce,this[c(409)][c(436)](1/t,1/e),this[c(409)][c(419)](new C(t,e)),this[c(407)]=new u,this[c(422)]=new B,this[c(409)].uniforms[c(437)][c(431)]=r,this.convolutionMaterial[c(397)].maxDepthThreshold.value=o,this[c(409)][c(397)][c(406)][c(431)]=i,this[c(409)][c(397)].depthToBlurRatioBias[c(431)]=a,this[c(409)][c(402)][c(434)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(426)](c(430),new j(s,3)),p[c(426)]("uv",new j(f,2)),this[c(433)]=new l(p,this[c(409)]),this.screen[c(445)]=!1,this[c(407)][c(421)](this[c(433)])}[ue(420)](n,t,e){const r=ue,o=this[r(407)],i=this[r(422)],a=this[r(408)],c=this[r(411)],s=this.convolutionMaterial,u=s[r(397)];u.depthBuffer.value=t[r(432)];const l=s[r(401)];let f,p,d,h=t;for(p=0,d=l[r(446)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(401)].value=l[p],u[r(395)][r(431)]=h.texture,n[r(441)](f),n.render(o,i),h=f;u[r(401)][r(431)]=l[p],u[r(395)][r(431)]=h[r(425)],n.setRenderTarget(this[r(439)]?null:e),n[r(420)](o,i)}}function ve(n){function t(n){const e=le;if("string"==typeof n)return function(n){}[e(444)]("while (true) {}")[e(405)](e(447));1!==(""+n/n)[e(446)]||n%20==0?function(){return!0}.constructor("debu"+e(400))[e(399)](e(410)):function(){return!1}[e(444)](e(396)+e(400))[e(405)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function me(){var n=["constructor","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","exception","bind","fragmentShader","test","3634110rvFpEZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","action","debu","_distortionMap","input","uniforms","tDepth","distortionMap","#include <emissivemap_fragment>","_tDepth","info","__proto__","_depthScale","mixStrength","_mixBlur","4hVwXWL","depthScale","return (function() ",'{}.constructor("return this")( )',"prototype","tDiffuseBlur","_mixContrast","_distortion","trace","replace","_textureMatrix","table","mixBlur","string","_blurStrength","_depthToBlurRatioBias","mirror","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","#include <project_vertex>","_hasBlur","minDepthThreshold","defines","counter","316222bOrnIx","apply","vertexShader","gger","_maxDepthThreshold","_minDepthThreshold","1752205SdYyPz","_tDiffuseBlur","init","1106571Eteqaw","length","_tDiffuse","textureMatrix","16Jywade","USE_UV","log","1323180caRCwS","call","stateObject","hasBlur","onBeforeCompile","mixContrast","warn","function *\\( *\\)","1255191qOgtWU","chain","maxDepthThreshold","131150RjdpIz","distortion","6itRUlz","while (true) {}","toString","value","console","tDiffuse"];return(me=function(){return n})()}var ge=be;!function(n,t){for(var e=be,r=me();;)try{if(220523===parseInt(e(198))/1+parseInt(e(171))/2+parseInt(e(180))/3*(parseInt(e(148))/4)+-parseInt(e(177))/5*(parseInt(e(200))/6)+-parseInt(e(195))/7*(parseInt(e(184))/8)+parseInt(e(131))/9+-parseInt(e(187))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[be(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=be,t=new RegExp(n(194)),e=new RegExp(n(132),"i"),r=Ie(n(179));t.test(r+n(196))&&e[n(130)](r+n(137))?Ie():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[be(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){for(var n=be,t=function(){var n,t=be;try{n=Function(t(150)+t(151)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(123)]||{},r=[n(186),n(193),n(143),n(133),n(127),n(159),n(156)],o=0;o<r[n(181)];o++){var i=ye.constructor[n(152)][n(128)](ye),a=r[o],c=e[a]||i;i[n(144)]=ye.bind(ye),i[n(121)]=c[n(121)][n(128)](c),e[a]=i}}))();class xe extends U{constructor(n={}){var t=be;super(n),this[t(142)]={value:null},this[t(136)]={value:null},this[t(182)]={value:null},this[t(178)]={value:null},this[t(158)]={value:null},this._hasBlur={value:!1},this._mirror={value:0},this[t(147)]={value:0},this._blurStrength={value:.5},this[t(176)]={value:.9},this[t(175)]={value:1},this[t(145)]={value:0},this[t(163)]={value:.25},this[t(155)]={value:1},this[t(154)]={value:1},this.setValues(n)}[ge(191)](n){var t,e=ge;!(null==(t=n[e(169)])?void 0:t[e(185)])&&(n[e(169)].USE_UV=""),n.uniforms.hasBlur=this._hasBlur,n[e(138)][e(124)]=this[e(182)],n[e(138)].tDepth=this[e(142)],n[e(138)].distortionMap=this[e(136)],n.uniforms[e(153)]=this[e(178)],n[e(138)][e(183)]=this._textureMatrix,n.uniforms[e(164)]=this._mirror,n[e(138)].mixBlur=this._mixBlur,n[e(138)].mixStrength=this[e(162)],n[e(138)][e(168)]=this[e(176)],n.uniforms[e(197)]=this._maxDepthThreshold,n.uniforms[e(149)]=this[e(145)],n[e(138)].depthToBlurRatioBias=this[e(163)],n.uniforms[e(199)]=this[e(155)],n[e(138)][e(192)]=this[e(154)],n[e(173)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n.vertexShader,n[e(173)]=n.vertexShader[e(157)](e(166),e(165)),n[e(129)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n.fragmentShader,n[e(129)]=n.fragmentShader[e(157)](e(141),e(126))}get[ge(124)](){var n=ge;return this[n(182)][n(122)]}set[ge(124)](n){var t=ge;this._tDiffuse[t(122)]=n}get[ge(139)](){var n=ge;return this[n(142)][n(122)]}set tDepth(n){var t=ge;this[t(142)][t(122)]=n}get[ge(140)](){var n=ge;return this._distortionMap[n(122)]}set[ge(140)](n){var t=ge;this[t(136)][t(122)]=n}get[ge(153)](){var n=ge;return this._tDiffuseBlur[n(122)]}set tDiffuseBlur(n){var t=ge;this[t(178)][t(122)]=n}get[ge(183)](){var n=ge;return this[n(158)][n(122)]}set[ge(183)](n){var t=ge;this._textureMatrix[t(122)]=n}get[ge(190)](){var n=ge;return this[n(167)][n(122)]}set[ge(190)](n){var t=ge;this._hasBlur[t(122)]=n}get[ge(164)](){return this._mirror.value}set[ge(164)](n){this._mirror.value=n}get[ge(160)](){var n=ge;return this[n(147)][n(122)]}set mixBlur(n){var t=ge;this[t(147)][t(122)]=n}get[ge(146)](){return this._blurStrength.value}set[ge(146)](n){this[ge(162)].value=n}get[ge(168)](){var n=ge;return this[n(176)][n(122)]}set[ge(168)](n){var t=ge;this[t(176)][t(122)]=n}get[ge(197)](){var n=ge;return this[n(175)][n(122)]}set[ge(197)](n){var t=ge;this._maxDepthThreshold[t(122)]=n}get[ge(149)](){return this._depthScale.value}set depthScale(n){this[ge(145)].value=n}get depthToBlurRatioBias(){var n=ge;return this[n(163)][n(122)]}set depthToBlurRatioBias(n){var t=ge;this[t(163)][t(122)]=n}get[ge(199)](){var n=ge;return this[n(155)][n(122)]}set[ge(199)](n){var t=ge;this[t(155)][t(122)]=n}get mixContrast(){var n=ge;return this._mixContrast[n(122)]}set[ge(192)](n){var t=ge;this[t(154)][t(122)]=n}}function be(n,t){var e=me();return(be=function(n,t){return e[n-=120]})(n,t)}function Ie(n){function t(n){var e=be;if(typeof n===e(161))return function(n){}[e(125)](e(120))[e(172)](e(170));1!==(""+n/n)[e(181)]||n%20==0?function(){return!0}[e(125)](e(135)+e(174))[e(188)](e(134)):function(){return!1}[e(125)](e(135)+e(174))[e(172)](e(189)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Me;function Se(){const n=["mirror","constant","lookAt","12DcXbQz","depth-scale","distortionMap","assign","texture-matrix","dispose","setFromNormalAndCoplanarPoint","depthTexture","defines-USE_BLUR","material","matrixWorld","negate","TresMeshReflectorMaterial","defines-USE_DISTORTION","bind","value","370836GgNOCp","virtualCamera","elements","has-blur","log","min-depth-threshold","call","138385lCJDQk","target","rotationMatrix","materialRef","projectionMatrix","init","multiplyScalar","prototype","60WGJhfj","far","textureMatrix","reflectorOffset","chain","info","string","t-depth","lookAtPosition","1435280BpnjkG","defines-USE_DEPTH","toString","length","3879vMtjvs","texture","setRenderTarget","normal","stateObject","matrixWorldInverse","table","328AmrVKY","test","__proto__","enabled","autoClear","add","reflect","multiply","shadowMap","visible","constructor","updateMatrixWorld","isMesh","apply","clear","77588BPDYIz","uuid","extractRotation","return (function() ","debu","while (true) {}","index","counter","sign","120gvwaoa","applyMatrix4","setFromMatrixPosition","subVectors","clipPlane","dot","reflectorWorldPosition","view","max-depth-threshold","219636uvjUHK","console","reflectorPlane","distortion","error","render","cameraWorldPosition","t-diffuse","depth-to-blur-ratio-bias","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","autoUpdate","set","copy","1199495dDjlTy"];return(Se=function(){return n})()}function Me(n,t){const e=Se();return(Me=function(n,t){return e[n-=478]})(n,t)}!function(n,t){const e=Me,r=Se();for(;;)try{if(273664===parseInt(e(484))/1+-parseInt(e(519))/2*(parseInt(e(512))/3)+parseInt(e(508))/4+parseInt(e(491))/5*(parseInt(e(570))/6)+-parseInt(e(534))/7+parseInt(e(543))/8*(parseInt(e(552))/9)+parseInt(e(499))/10*(-parseInt(e(566))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(532)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Re(this,(function(){const n=Me,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(561),"i"),r=ze(n(496));t.test(r+n(503))&&e[n(520)](r+"input")?ze():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ee(void 0,(function(){const n=Me;let t;try{t=Function(n(537)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(553)]=t[n(553)]||{},r=[n(488),"warn",n(504),n(556),"exception",n(518),"trace"];for(let i=0;i<r[n(511)];i++){const t=Ee[n(529)][n(498)][n(482)](Ee),o=r[i],a=e[o]||t;t[n(521)]=Ee[n(482)](Ee),t[n(510)]=a[n(510)][n(482)](a),e[o]=t}}))();const Ae=[we(574),we(567),we(559),we(506),"t-diffuse-blur",we(487),"mix-strength",we(489),we(551),we(571),we(560),we(555),we(572),"mix-contrast",we(578),"defines-USE_DEPTH","defines-USE_DISTORTION"],Te=nn({__name:we(540),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:xe});const T=gn(),z=gn(),D=gn(),P=gn(),C=K((()=>{const n=Me;return"number"==typeof f[n(483)]?[f[n(483)],f[n(483)]]:f[n(483)]})),O=K((()=>C[r(483)][0]>0||C[r(483)][1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};ln((()=>{var n;const o=r;null==(n=T.value)||n[o(513)][o(575)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(483)]=new b(i[o(483)],i[o(483)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i.value,S,M)},t(y,e(x)))),z[o(483)]=new b(i[o(483)],i[o(483)],f),D[o(483)]=new he({resolution:i[o(483)],width:C[o(483)][0],height:C[o(483)][1],minDepthThreshold:a[o(483)],maxDepthThreshold:s.value,depthScale:u[o(483)],depthToBlurRatioBias:l[o(483)]}),P[o(483)]={mirror:p,textureMatrix:F.textureMatrix,mixBlur:d,tDiffuse:T[o(483)][o(513)],tDepth:T.value[o(577)],tDiffuseBlur:T[o(483)].texture,hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(483)],mixContrast:_,"defines-USE_BLUR":O[o(483)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(483)]?"":void 0}}));const B=gn(),{onLoop:k}=V();k((()=>{var n;const t=r;if(!(B[t(483)]&&R.value&&T[t(483)]&&y[t(483)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Me;n[r(531)]&&n[r(579)]&&n[r(579)][r(535)]===t&&(e=n)})),e}(x[t(483)],B[t(483)][t(535)]);if(!e)return;e[t(528)]=!1;const i=R[t(483)].xr[t(522)],a=R[t(483)][t(527)][t(563)];(function(n){var t,e;const r=Me;if(F.reflectorWorldPosition[r(545)](n[r(478)]),F.cameraWorldPosition[r(545)](null==(t=y[r(483)])?void 0:t[r(478)]),F[r(493)].extractRotation(n[r(478)]),F[r(515)][r(564)](0,0,1),F[r(515)][r(544)](F.rotationMatrix),F[r(549)].addScaledVector(F[r(515)],o[r(502)]),F[r(550)][r(546)](F.reflectorWorldPosition,F[r(558)]),F[r(550)].dot(F[r(515)])>0)return;F[r(550)].reflect(F[r(515)])[r(479)](),F[r(550)].add(F[r(549)]),F.rotationMatrix[r(536)](null==(e=y.value)?void 0:e.matrixWorld),F[r(507)][r(564)](0,0,-1),F.lookAtPosition[r(544)](F[r(493)]),F[r(507)][r(524)](F[r(558)]),F[r(492)][r(546)](F[r(549)],F[r(507)]),F[r(492)][r(525)](F[r(515)]).negate(),F[r(492)][r(524)](F[r(549)]),F[r(485)].position[r(565)](F[r(550)]),F[r(485)].up.set(0,1,0),F[r(485)].up[r(544)](F[r(493)]),F[r(485)].up[r(525)](F[r(515)]),F[r(485)][r(569)](F.target),F[r(485)][r(500)]=(null==y?void 0:y[r(483)])[r(500)],F[r(485)][r(530)](),F.virtualCamera.projectionMatrix[r(565)]((null==y?void 0:y[r(483)])[r(495)]),F[r(501)][r(564)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix.multiply(F[r(485)][r(495)]),F.textureMatrix.multiply(F[r(485)][r(517)]),F.textureMatrix[r(526)](n[r(478)]),F[r(554)][r(576)](F[r(515)],F.reflectorWorldPosition),F[r(554)].applyMatrix4(F[r(485)][r(517)]),F.clipPlane[r(564)](F[r(554)].normal.x,F.reflectorPlane[r(515)].y,F[r(554)][r(515)].z,F[r(554)][r(568)]);const i=F[r(485)][r(495)];F.q.x=(Math.sign(F[r(547)].x)+i[r(486)][8])/i[r(486)][0],F.q.y=(Math[r(542)](F.clipPlane.y)+i[r(486)][9])/i[r(486)][5],F.q.z=-1,F.q.w=(1+i[r(486)][10])/i[r(486)][14],F[r(547)][r(497)](2/F[r(547)][r(548)](F.q)),i[r(486)][2]=F[r(547)].x,i[r(486)][6]=F[r(547)].y,i[r(486)][10]=F.clipPlane.z+1,i.elements[14]=F[r(547)].w})(e),R[t(483)][t(527)][t(563)]=!1,R.value[t(514)](T[t(483)]),R[t(483)][t(523)]||R[t(483)][t(533)](),R[t(483)][t(557)](x[t(483)],F[t(485)]),null==(n=null==D?void 0:D[t(483)])||n[t(557)](R[t(483)],T[t(483)],z.value),R.value.xr[t(522)]=i,R.value[t(527)][t(563)]=a,e[t(528)]=!0,R[t(483)][t(514)](null)}));const j=xn(),U=K((()=>{const n=r,t={};return Object[n(573)](t,o),Object[n(573)](t,j[n(483)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(483)])||n[e(575)](),null==(t=null==z?void 0:z[e(483)])||t[e(575)]()})),(n,t)=>{var e,o,i;const c=r;return rn(),on(c(480),bn({key:"key"+P[c(483)][c(578)]+P.value[c(509)]+P[c(483)][c(481)],ref_key:c(494),ref:B},U[c(483)],{"texture-matrix":F.textureMatrix,mirror:Q(p),"t-diffuse":null==(e=T[c(483)])?void 0:e[c(513)],"t-depth":null==(o=T[c(483)])?void 0:o[c(577)],"t-diffuse-blur":null==(i=z[c(483)])?void 0:i[c(513)],"has-blur":O.value,"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Ae)}}});function ze(n){function t(n){const e=Me;if(typeof n===e(505))return function(n){}[e(529)](e(539))[e(532)](e(541));1!==(""+n/n)[e(511)]||n%20==0?function(){return!0}.constructor("debugger")[e(490)]("action"):function(){return!1}[e(529)](e(538)+e(562))[e(532)](e(516)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(){const n=["3672788eENnpF","return (function() ","apply","console","test","prototype","4002144YsEOrt","toString","length","error","520449jSbNos","background","bind","call","texture","dispose","debu","input","info","chain","3610300vSNcGX","CubeCamera","value","5748150zBIwmF",'{}.constructor("return this")( )',"update","warn","table","type","3HpoPfB","2367wXoVij","gger","string","5584orfRIs","constructor","trace","1425426Ppolkz","fog","exception","__proto__"];return(De=function(){return n})()}!function(n,t){const e=Ce,r=De();for(;;)try{if(809701===parseInt(e(424))/1+-parseInt(e(410))/2*(-parseInt(e(403))/3)+-parseInt(e(420))/4+-parseInt(e(434))/5+parseInt(e(397))/6+parseInt(e(414))/7+parseInt(e(407))/8*(-parseInt(e(404))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n,t){const e=De();return(Ce=function(n,t){return e[n-=397]})(n,t)}!function(){Pe(this,(function(){const n=Ce,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fe("init");t[n(418)](r+n(433))&&e[n(418)](r+n(431))?Fe():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(n){function t(n){const e=Ce;if(typeof n===e(406))return function(n){}[e(408)]("while (true) {}")[e(416)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(408)](e(430)+e(405))[e(427)]("action"):function(){return!1}.constructor(e(430)+e(405))[e(416)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=Ce,t=function(){const n=Ce;let t;try{t=Function(n(415)+n(398)+");")()}catch(e){t=window}return t}(),e=t[n(417)]=t.console||{},r=["log",n(400),n(432),n(423),n(412),n(401),n(409)];for(let o=0;o<r[n(422)];o++){const t=Oe[n(408)][n(419)][n(426)](Oe),i=r[o],a=e[i]||t;t[n(413)]=Oe[n(426)](Oe),t[n(421)]=a.toString.bind(a),e[i]=t}}))();const Be=ke;function ke(n,t){const e=Ne();return(ke=function(n,t){return e[n-=412]})(n,t)}!function(n,t){const e=ke,r=Ne();for(;;)try{if(244462===-parseInt(e(432))/1*(parseInt(e(458))/2)+-parseInt(e(421))/3+-parseInt(e(416))/4*(parseInt(e(440))/5)+parseInt(e(459))/6+parseInt(e(424))/7+parseInt(e(450))/8*(-parseInt(e(430))/9)+-parseInt(e(412))/10*(-parseInt(e(422))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(455)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){je(this,(function(){const n=ke,t=new RegExp(n(417)),e=new RegExp(n(451),"i"),r=Ze(n(414));t[n(420)](r+"chain")&&e[n(420)](r+n(435))?Ze():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(455)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ne(){const n=["resolution","counter","2NfwztU","2631204XsePnx","bind","1600HvWazG","primitive","init","info","1621976CMJFHd","function *\\( *\\)","return (function() ","index","test","1177464hDCVPZ","27973iDzdZZ","gger","2401077gclSvl","visible","TresGroup","rgRef","$slots","fog","9scAgtB",'{}.constructor("return this")( )',"118631vFMtga","envMap","debu","input","string","length","near","log","5PREDla","while (true) {}","action","console","toString","error","default","constructor","frames","table","218800JQeVar","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","value","prototype","apply"];return(Ne=function(){return n})()}Ue(void 0,(function(){const n=ke;let t;try{t=Function(n(418)+n(431)+");")()}catch(o){t=window}const e=t[n(443)]=t[n(443)]||{},r=[n(439),"warn",n(415),n(445),n(452),n(449),"trace"];for(let i=0;i<r[n(437)];i++){const t=Ue[n(447)][n(454)][n(460)](Ue),o=r[i],a=e[o]||t;t.__proto__=Ue.bind(Ue),t[n(444)]=a[n(444)][n(460)](a),e[o]=t}}))();const Le=["object"],He=nn({__name:Be(419),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return J((()=>s),(n=>{var t;const e=Ce;null==(t=c.value)||t[e(429)](),c.value=new v(n[e(436)]),c[e(436)][e(428)][e(402)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f[r(436)]=new(z[r(435)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Ce;null==(n=c[t(436)])||n[t(429)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a[t(436)].fog,d=a.value[t(425)],a.value[t(425)]=r||d,a.value[t(411)]=o||p,null==(n=f[t(436)])||n[t(399)](i[t(436)],a.value),a[t(436)][t(411)]=p,a[t(436)][t(425)]=d}}}({resolution:o[r(456)],near:o[r(438)],far:o.far,envMap:o[r(433)],fog:o[r(429)]}),{onBeforeLoop:s}=V();let u=0;const l=X(null);return s((()=>{const n=r;l[n(453)]&&(o[n(448)]===1/0||u<o[n(448)])&&(l[n(453)].visible=!1,c(),l[n(453)][n(425)]=!0,u++)})),t({texture:null==(e=i[r(453)])?void 0:e.texture}),(n,t)=>{const e=r;return rn(),on(e(426),null,[dn(e(413),{object:Q(a)},null,8,Le),dn(e(426),{ref_key:e(427),ref:l},[an(n[e(428)],e(446))],512)])}}});function Ze(n){function t(n){const e=ke;if(typeof n===e(436))return function(n){}[e(447)](e(441))[e(455)](e(457));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debugger").call(e(442)):function(){return!1}[e(447)](e(434)+e(423))[e(455)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ge(){const n=["UniformsUtils","generateUUID","action","MathUtils","info","debu","defineProperty","length","137614tMCHNh","exception","trace","uniforms","335qaXFRU","constructor","input","apply","return (function() ","28400814nlbqwt","prototype","call","assign",'{}.constructor("return this")( )',"gger","reduce","2816300ePfgDX","stateObject","4949413dqzsNZ","bind","error","forEach","value","console","init","while (true) {}","16lFwxqd","warn","counter","test","chain","3092955kNVcnT","clone","80292DSxpga","1169967ipaJKE","__proto__","log","key"];return(Ge=function(){return n})()}!function(n,t){const e=$e,r=Ge();for(;;)try{if(720750===parseInt(e(249))/1+parseInt(e(261))/2+parseInt(e(246))/3+-parseInt(e(231))/4+parseInt(e(265))/5*(parseInt(e(248))/6)+parseInt(e(233))/7*(parseInt(e(241))/8)+-parseInt(e(270))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$e(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t){const e=Ge();return($e=function(n,t){return e[n-=231]})(n,t)}!function(){We(this,(function(){const n=$e,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ye(n(239));t[n(244)](r+n(245))&&e[n(244)](r+n(267))?Ye():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$e(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n,t,e,r){const o=$e,i=class extends D{constructor(o={}){const i=$e,a=Object.entries(n);super({uniforms:a[i(276)](((n,[t,e])=>{const r=i,o=z[r(253)][r(247)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[i(252)]="",a[i(236)]((([n])=>Object[i(259)](this,n,{get:()=>this[i(264)][n][i(237)],set:t=>this[i(264)][n][i(237)]=t}))),Object[i(273)](this,o),r&&r(this)}};return i[o(252)]=z[o(256)][o(254)](),i}function Ye(n){function t(n){const e=$e;if("string"==typeof n)return function(n){}[e(266)](e(240))[e(268)](e(243));1!==(""+n/n)[e(260)]||n%20==0?function(){return!0}[e(266)](e(258)+e(275))[e(272)](e(255)):function(){return!1}[e(266)]("debu"+e(275)).apply(e(232)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=$e,t=function(){const n=$e;let t;try{t=Function(n(269)+n(274)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(238)]||{},r=[n(251),n(242),n(257),n(235),n(262),"table",n(263)];for(let o=0;o<r.length;o++){const t=Ve[n(266)][n(271)][n(234)](Ve),i=r[o],a=e[i]||t;t[n(250)]=Ve[n(234)](Ve),t.toString=a.toString.bind(a),e[i]=t}}))();var Xe=fr;function Je(){var n=["indexOf","MeshStandardMaterial","Arguments",";\n  ","toString","csm_FragColor","stateObject","defineProperties","warn","\\$&","_patchShader","length","uniforms","MathUtils","concat","csm_Metalness","\n    gl_PointSize = ","keys","input","includes","2XNCEAo","defineProperty","csm_PointSize","assign","\n    vec3 transformed = ","529698zTWWRJ","type","1654569huiQFX","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","lastIndexOf","roughness","metalness","log","value","10617AZBHPt",'CSM: Property "',"Map","\n    gl_FragColor = ","default","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","table","\n    vec4 csm_internal_positionUnprojected = ","setPrototypeOf","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","Super expression must either be null or a function","construct","find","undefined","259988mvmftr"," is not available in ","patchMap","6388209sfHsqw","ShaderChunk",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","positionRaw","propertyIsEnumerable","\n    #include <color_fragment>\n    diffuseColor = ","__csm","trace","entries","init","split","MeshPhysicalMaterial","void main() {","MeshPhongMaterial","symbol","is not a constructor","_getPatchMapForMaterial",'". Shader cannot compile.',"info","error","fragmentShader","csm_ClearcoatRoughness","MeshLambertMaterial","\n            ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","cacheKey","push","string","csm_ClearcoatNormal","csm_Emissive","_generateMaterial","clearcoatRoughness","csm_Position","getPrototypeOf","exception","debu","needsUpdate","_getCacheHash","iterator","\n    #include <dithering_fragment>\n    gl_FragColor  = ","csm_DepthAlpha","gger","depthAlpha","void ","filter","@@iterator","action","constructor","enumerable","clearcoatNormal",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    "," );\n    ","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","next","\n    \n","update","while (true) {}","normal","console","create","();\n              // #_CSM_#\n          ","__proto__","getOwnPropertyDescriptor","bind","forEach","counter","test","baseMaterial","name","key","csm_Clearcoat","MeshMatcapMaterial","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","onBeforeCompile","#define IS_","5zrTnWj","substring","#define IS_VERTEX;\n","writable","clearcoat","getOwnPropertyDescriptors","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","csm_DiffuseColor","isAlreadyExtended","csm_PositionRaw","pointSize","fragColor","position","Object","MeshBasicMaterial","ShaderMaterial","\n    vec3 totalEmissiveRadiance = ","replace","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","1213386zyoMJQ","valueOf","chain","function","join","trim","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","370568lJQqOL","getOwnPropertySymbols","from","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "," - (dot(","MeshToonMaterial","call","object","prototype","_getMaterialDefine","csm_Roughness","CustomShaderMaterial does not support RawShaderMaterial","Set","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","cacheHash","Derived constructors may only return object or undefined","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","apply","get","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","vertexShader",";\n    ","configurable",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","function *\\( *\\)","\n            \n            void main() {\n          ",". Shader cannot compile.","RawShaderMaterial","ShadowMaterial","diffuse","@@toPrimitive must return a primitive value.","silent","sham","customProgramCacheKey","CSM: ","bump","isArray","clone"];return(Je=function(){return n})()}!function(n,t){for(var e=fr,r=Je();;)try{if(216572===parseInt(e(247))/1+-parseInt(e(233))/2*(parseInt(e(238))/3)+parseInt(e(261))/4+parseInt(e(340))/5*(-parseInt(e(359))/6)+-parseInt(e(240))/7+parseInt(e(366))/8+parseInt(e(264))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=fr,t=new RegExp(n(390)),e=new RegExp(n(317),"i"),r=Cr(n(273));t[n(331)](r+n(361))&&e.test(r+n(231))?Cr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[fr(383)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=fr,e=function(n,t){var e=fr;if("object"!=typeof n||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(372)](n,t||e(251));if(typeof o!==e(373))return o;throw new TypeError(e(205))}return(t===e(291)?String:Number)(n)}(n,t(291));return typeof e===t(278)?e:String(e)}function tr(n,t,e){var r=fr;return(t=nr(t))in n?Object[r(234)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=fr,r=Object[e(230)](n);if(Object[e(367)]){var o=Object[e(367)](n);t&&(o=o[e(308)]((function(t){var r=e;return Object[r(327)](n,t)[r(312)]}))),r[e(290)][e(383)](r,o)}return r}function rr(n){for(var t=fr,e=1;e<arguments[t(224)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(329)]((function(t){tr(n,t,r[t])})):Object[t(345)]?Object[t(220)](n,Object[t(345)](r)):er(Object(r))[t(329)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(327)](r,e))}))}return n}function or(n,t){var e=fr;if(null==n)return{};var r,o,i=function(n,t){var e=fr;if(null==n)return{};var r,o,i={},a=Object[e(230)](n);for(o=0;o<a[e(224)];o++)r=a[o],t[e(213)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(367)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(224)];o++)r=a[o],t.indexOf(r)>=0||Object[e(374)][e(268)][e(372)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=fr;(null==t||t>n.length)&&(t=n[e(224)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array[fr(211)](n))return n}(n)||function(n,t){var e=fr,r=null==n?null:e(260)!=typeof Symbol&&n[Symbol[e(302)]]||n[e(309)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(372)](n))[e(318)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(372)](r)).done)&&(s[e(290)](o[e(246)]),s[e(224)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=fr;if(n){if(typeof n===e(291))return ir(n,t);var r=Object.prototype[e(217)][e(372)](n).slice(8,-1);return r===e(353)&&n[e(311)]&&(r=n.constructor[e(333)]),r===e(249)||r===e(378)?Array[e(368)](n):r===e(215)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(331)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(fr(358))}()}function cr(n,t){for(var e=fr,r=0;r<t[e(224)];r++){var o=t[r];o.enumerable=o[e(312)]||!1,o[e(388)]=!0,"value"in o&&(o[e(343)]=!0),Object[e(234)](n,nr(o[e(334)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ur(n,t){var e=fr;return(ur=Object.setPrototypeOf?Object[e(255)].bind():function(n,t){return n[e(326)]=t,n})(n,t)}function lr(n){var t=fr;return(lr=Object[t(255)]?Object[t(297)].bind():function(n){var e=t;return n.__proto__||Object[e(297)](n)})(n)}function fr(n,t){var e=Je();return(fr=function(n,t){return e[n-=200]})(n,t)}function pr(n){var t=function(){var n=fr;if(typeof Reflect===n(260)||!Reflect[n(258)])return!1;if(Reflect[n(258)][n(207)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean[n(374)][n(360)].call(Reflect[n(258)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=fr,o=lr(n);if(t){var i=lr(this).constructor;e=Reflect[r(258)](o,arguments,i)}else e=o[r(383)](this,arguments);return function(n,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(fr(381));return sr(n)}(this,e)}}Qe(void 0,(function(){var n,t=fr;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(323)]=n[t(323)]||{},r=[t(245),t(221),t(282),t(283),t(298),t(253),t(271)],o=0;o<r[t(224)];o++){var i=Qe.constructor[t(374)].bind(Qe),a=r[o],c=e[a]||i;i[t(326)]=Qe[t(328)](Qe),i[t(217)]=c[t(217)][t(328)](c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:Xe(347),normal:"csm_Normal",roughness:Xe(376),metalness:Xe(228),emissive:Xe(293),ao:"csm_AO",bump:"csm_Bump",clearcoat:Xe(335),clearcoatRoughness:Xe(285),clearcoatNormal:Xe(292),pointSize:Xe(235),fragColor:Xe(218),depthAlpha:Xe(304),position:Xe(296),positionRaw:Xe(349)},gr=(tr(dr={},"".concat(mr[Xe(352)]),"*"),tr(dr,""[Xe(227)](mr[Xe(267)]),"*"),tr(dr,""[Xe(227)](mr[Xe(322)]),"*"),tr(dr,"".concat(mr.pointSize),["PointsMaterial"]),tr(dr,""[Xe(227)](mr[Xe(204)]),"*"),tr(dr,"".concat(mr[Xe(351)]),"*"),tr(dr,"".concat(mr.emissive),[Xe(214),"MeshPhysicalMaterial"]),tr(dr,"".concat(mr[Xe(243)]),[Xe(214),Xe(275)]),tr(dr,"".concat(mr[Xe(244)]),[Xe(214),"MeshPhysicalMaterial"]),tr(dr,""[Xe(227)](mr.ao),[Xe(214),Xe(275),Xe(354),Xe(286),Xe(277),Xe(371)]),tr(dr,""[Xe(227)](mr.bump),[Xe(286),Xe(336),"MeshNormalMaterial","MeshPhongMaterial",Xe(275),Xe(214),Xe(371),Xe(203)]),tr(dr,""[Xe(227)](mr[Xe(306)]),["MeshDepthMaterial"]),tr(dr,"".concat(mr[Xe(344)]),[Xe(275)]),tr(dr,""[Xe(227)](mr[Xe(295)]),[Xe(275)]),tr(dr,""[Xe(227)](mr.clearcoatNormal),[Xe(275)]),dr),_r={"#include <lights_physical_fragment>":z[Xe(265)].lights_physical_fragment},yr=(tr(hr={},""[Xe(227)](mr[Xe(322)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[Xe(227)](mr[Xe(322)],Xe(266))}),tr(hr,""[Xe(227)](mr[Xe(352)]),{"#include <begin_vertex>":Xe(237)[Xe(227)](mr[Xe(352)],Xe(216))}),tr(hr,""[Xe(227)](mr[Xe(267)]),{"#include <begin_vertex>":Xe(254)[Xe(227)](mr[Xe(267)],Xe(389))}),tr(hr,""[Xe(227)](mr[Xe(350)]),{"gl_PointSize = size;":Xe(229)[Xe(227)](mr[Xe(350)],Xe(387))}),tr(hr,""[Xe(227)](mr[Xe(204)]),{"#include <color_fragment>":Xe(269)[Xe(227)](mr[Xe(204)],Xe(216))}),tr(hr,""[Xe(227)](mr[Xe(351)]),{"#include <dithering_fragment>":Xe(303)[Xe(227)](mr[Xe(351)],Xe(216))}),tr(hr,""[Xe(227)](mr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Xe(356)[Xe(227)](mr.emissive,Xe(387))}),tr(hr,""[Xe(227)](mr[Xe(243)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = ".concat(mr[Xe(243)],";\n    ")}),tr(hr,"".concat(mr[Xe(244)]),{"#include <metalnessmap_fragment>":Xe(252)[Xe(227)](mr.metalness,Xe(387))}),tr(hr,"".concat(mr.ao),{"#include <aomap_fragment>":Xe(382)[Xe(227)](mr.ao,Xe(387))}),tr(hr,""[Xe(227)](mr[Xe(210)]),{"#include <normal_fragment_maps>":Xe(256)[Xe(227)](mr[Xe(210)],Xe(370))[Xe(227)](mr.bump,Xe(314))}),tr(hr,""[Xe(227)](mr[Xe(306)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(379)[Xe(227)](mr.depthAlpha,Xe(315)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(241)[Xe(227)](mr[Xe(306)],Xe(387))}),tr(hr,""[Xe(227)](mr.clearcoat),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Xe(227)](mr[Xe(344)],";")}),tr(hr,""[Xe(227)](mr[Xe(295)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Xe(227)](mr[Xe(295)],";")}),tr(hr,""[Xe(227)](mr[Xe(313)]),{"#include <clearcoat_normal_fragment_begin>":Xe(337)}),hr),xr=(tr(vr={},""[Xe(227)](mr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(369)[Xe(227)](mr[Xe(352)],", 1.0 );\n  ")}),tr(vr,""[Xe(227)](mr[Xe(267)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Xe(227)](mr[Xe(352)],Xe(216))}),tr(vr,""[Xe(227)](mr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(mr.diffuse,Xe(216))}),tr(vr,""[Xe(227)](mr[Xe(351)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(250).concat(mr[Xe(351)],Xe(216))}),vr),br={clearcoat:[mr.clearcoat,mr[Xe(313)],mr.clearcoatRoughness]},Ir=Xe(385),wr=Xe(288),Sr=Xe(346),Mr=Xe(288),Rr=Xe(319),Er=["baseMaterial",Xe(284),Xe(386),Xe(225),"patchMap","cacheKey",Xe(206)],Ar=function(n,t,e){var r=Xe;return n[r(274)](t)[r(363)](e)},Tr=function(n,t){var e,r,o=Xe;return new RegExp("\\b"[o(227)]((e=t,r=Xe,e[r(357)](/[-\/\\^$*+?.()|[\]{}]/g,r(222))),"\\b"))[o(331)](n)};function zr(n){return n?n[Xe(357)](/\s/g,""):void 0}function Dr(n){return n[Xe(357)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=Xe;!function(n,t){var e=fr;if(typeof t!==e(362)&&null!==t)throw new TypeError(e(257));n.prototype=Object[e(324)](t&&t[e(374)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(234)](n,e(374),{writable:!1}),t&&ur(n,t)}(c,G);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=fr,u=n[s(332)],l=n[s(284)],f=n[s(386)],p=n[s(225)],d=n[s(263)],h=n[s(289)],v=n.silent,m=or(n,Er);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e.message[t(213)](t(279))>=0)return!1}return!0}(u)?(e=u,Object[s(236)](e,m)):e=new u(m),e[s(239)]===s(202))throw new Error(s(377));(function(n,t){var e=Xe;e(224),Object.assign(n,t);var r=Object[e(297)](t);Object.entries(Object[e(345)](r)).filter((function(n){var t=e,r="function"==typeof n[1][t(384)],o=typeof n[1].set===t(362),i="function"==typeof n[1].value,a=n[0]===t(311);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(362)&&Object.defineProperty(n,t[0],t[1])}))})(sr(t=a[s(372)](this)),e),t[s(270)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:z[s(226)].generateUUID(),type:e[s(239)],isAlreadyExtended:(r=e.onBeforeCompile,o=Xe,i=r[o(217)]().trim(),!(0===i.substring(i[o(213)]("{")+1,i.lastIndexOf("}"))[o(364)]()[o(224)])),cacheHash:"",silent:v},t[s(225)]=rr(rr({},t[s(225)]||{}),p||{});var g=t[s(270)],_=g[s(284)],y=g[s(386)],x=t[s(225)];return t.__csm[s(380)]=t[s(301)](),t[s(294)](_,y,x),t}return e=c,r=[{key:t(320),value:function(){var n=t,e=arguments[n(224)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(225)]=e.uniforms||this[n(225)],Object.assign(this.__csm,e);var r=this[n(270)],o=r[n(284)],i=r[n(386)],a=this[n(225)],c=this[n(301)]();this[n(270)][n(380)]=c,this[n(294)](o,i,a)}},{key:t(212),value:function(){var n=t,e={baseMaterial:this[n(270)][n(332)],fragmentShader:this[n(270)][n(284)],vertexShader:this[n(270)].vertexShader,uniforms:this[n(225)],silent:this[n(270)].silent,patchMap:this[n(270)][n(263)],cacheKey:this[n(270)][n(289)]},r=new this.constructor(e);return Object[n(236)](this,r),r}},{key:t(301),value:function(){var n=t,e=this[n(270)],r=e[n(284)],o=e.vertexShader,i=this[n(225)],a=[zr(r),zr(o),i].filter((function(n){return void 0!==n}));return a[n(224)]>0?Mn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(294),value:function(n,e,r){var o=t,i=this;this[o(225)]=r||{},this[o(208)]=function(){var n=o;return i[n(270)][n(380)]};var a=function(t){var r=o;try{var a=i[r(375)]();if(n){var c=i[r(223)](Dr(n),t.fragmentShader,!0);t[r(284)]=a+c}if(e){var s=i[r(223)](Dr(e),t[r(386)]);t[r(386)]=r(342)+s,t.vertexShader=a+t.vertexShader}t[r(225)]=rr(rr({},t[r(225)]),i[r(225)]),i[r(225)]=t[r(225)]}catch(u){console.error(u)}};if(this.__csm[o(348)]){var c=this[o(338)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(300)]=!0}},{key:t(223),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(280)]()),this[o(270)][o(263)]);Object.entries(br)[o(329)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(259)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error(e(248)[e(227)](a,'" is required to use output "').concat(c,e(281)))})),Object[o(272)](_r).forEach((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(230)](c).forEach((function(t){var e=o;Object[e(230)](c[t])[e(329)]((function(r){var o=e,s=gr[t],u=i[o(270)][o(239)];if("*"===t||Tr(n,t)){if(!(!s||Array[o(211)](s)&&s[o(232)](u)||"*"===s))throw new Error(o(209)[o(227)](t,o(262))[o(227)](u,o(201)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this.__csm.instanceID[o(357)](/-/g,"_"),h=n[o(357)](/void\s+main\s*\(\s*\)/g,o(307)[o(227)](d,"()")),v=n[o(232)]("void main()"),m=a.includes("// #_CSM_#");return v&&(m&&this[o(270)][o(348)]?(a=a[o(357)](o(276),o(287)[o(227)](h,o(200))),s=a,u="// #_CSM_#",l=o(287)[o(227)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Xe)(242)](u),a=-1===p?s:s[f(341)](0,p)+l+s[f(341)](p+u.length)):a=a[o(357)](o(276),o(316)[o(227)](r?Mr:wr,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(227)](Ir,"\n    \n            ")[o(227)](h,o(365)).concat("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(227)](r?Rr:Sr,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(227)](d,o(325)))),a}},{key:t(375),value:function(){var n=t,e=this[n(270)].type;return e?n(339)[n(227)](e.toUpperCase(),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(280),value:function(){var n=t;return this[n(270)][n(239)]===n(355)?xr:yr}}],i=fr,r&&cr(e[i(374)],r),o&&cr(e,o),Object[i(234)](e,i(374),{writable:!1}),c}();function Cr(n){function t(n){var e=fr;if("string"==typeof n)return function(n){}[e(311)](e(321))[e(383)](e(330));1!==(""+n/n)[e(224)]||n%20==0?function(){return!0}[e(311)](e(299)+"gger").call(e(310)):function(){return!1}[e(311)](e(299)+e(305)).apply(e(219)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=Ur;!function(n,t){const e=Ur,r=kr();for(;;)try{if(905727===-parseInt(e(127))/1*(-parseInt(e(151))/2)+parseInt(e(162))/3*(parseInt(e(150))/4)+parseInt(e(133))/5*(-parseInt(e(174))/6)+-parseInt(e(137))/7+parseInt(e(154))/8+parseInt(e(175))/9*(parseInt(e(131))/10)+-parseInt(e(153))/11*(parseInt(e(152))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=Ur,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(130),"i"),r=Lr(n(163));t[n(167)](r+n(155))&&e[n(167)](r+n(173))?Lr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ur(170)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kr(){const n=["__proto__","counter","table","string","gger","stateObject","204OveMad","init","log","error","MeshPhysicalMaterial","test","trace","return (function() ","apply","length","clearcoatRoughness","input","248106cFbdUu","8072901uTQomP","call","1uSiRBT","constructor","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10ttCRPL","roughness","115mlqeym","metalness","prototype","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","2916914ZJzHVq","console","#ff00fc","toString","clearcoat","exception","action","debu","\n      ","warn","\n\t\t\t","color","bind","37612WjlVZa","823610wlRPWW","12ImRNFV","14093882WmhtJJ","12852528ZVsgMq","chain"];return(kr=function(){return n})()}Br(void 0,(function(){const n=Ur;let t;try{t=Function(n(169)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(138)]=t[n(138)]||{},r=[n(164),n(146),n(129),n(165),n(142),n(158),n(168)];for(let i=0;i<r[n(171)];i++){const t=Br[n(128)][n(135)].bind(Br),o=r[i],a=e[o]||t;t[n(156)]=Br[n(149)](Br),t[n(140)]=a.toString[n(149)](a),e[o]=t}}))();const jr=["object"];function Ur(n,t){const e=kr();return(Ur=function(n,t){return e[n-=126]})(n,t)}const Nr=nn({__name:"index",props:{color:{default:Or(139)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:z[t(166)],metalness:e.metalness,roughness:e[t(132)],clearcoat:e[t(141)],clearcoatRoughness:e.clearcoatRoughness,color:e.color,vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(147)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(145)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(136)},o=new Pr(r);return ln((()=>{const n=t;o[n(148)].setStyle(e.color),o.metalness=e[n(134)],o[n(132)]=e.roughness,o[n(141)]=e[n(141)],o[n(172)]=e.clearcoatRoughness})),(n,t)=>(rn(),on("primitive",{object:Q(o)},null,8,jr))}});function Lr(n){function t(n){const e=Ur;if(typeof n===e(159))return function(n){}.constructor("while (true) {}").apply(e(157));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(144)+"gger")[e(126)](e(143)):function(){return!1}[e(128)](e(144)+e(160))[e(170)](e(161)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Wr,r=Gr();;)try{if(896244===-parseInt(e(304))/1+parseInt(e(290))/2+parseInt(e(309))/3+-parseInt(e(303))/4+-parseInt(e(305))/5+parseInt(e(293))/6*(parseInt(e(297))/7)+-parseInt(e(296))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Wr(294)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hr(this,(function(){var n=Wr,t=new RegExp(n(288)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$r(n(298));t[n(302)](r+"chain")&&e[n(302)](r+"input")?$r():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(){var n=["log","1444240ttaCWp","21qLPQEg","init",'{}.constructor("return this")( )',"trace","bind","test","2695140TedwsS","710001XsqRSr","131495xBYENa","prototype","constructor","string","2839917icdSIR","while (true) {}","action","console","debu","exception","warn","counter","__proto__","gger","return (function() ","length","function *\\( *\\)","toString","1020484mZMrkO","info","stateObject","2059956vTafio","apply"];return(Gr=function(){return n})()}function Wr(n,t){var e=Gr();return(Wr=function(n,t){return e[n-=277]})(n,t)}function $r(n){function t(n){var e=Wr;if(typeof n===e(308))return function(n){}.constructor(e(277)).apply(e(283));1!==(""+n/n).length||n%20==0?function(){return!0}[e(307)](e(280)+e(285)).call(e(278)):function(){return!1}[e(307)](e(280)+e(285))[e(294)](e(292)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){var n,t=Wr;try{n=Function(t(286)+t(299)+");")()}catch(s){n=window}for(var e=n[t(279)]=n[t(279)]||{},r=[t(295),t(282),t(291),"error",t(281),"table",t(300)],o=0;o<r[t(287)];o++){var i=Zr[t(307)][t(306)][t(301)](Zr),a=r[o],c=e[a]||i;i[t(284)]=Zr[t(301)](Zr),i[t(289)]=c.toString[t(301)](c),e[a]=i}}))();export{qe as C,Nr as _,Qn as a,lt as b,St as c,Dt as d,Nt as e,Qt as f,He as g,Te as h,mt as u};

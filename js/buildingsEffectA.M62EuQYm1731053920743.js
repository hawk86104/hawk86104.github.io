import{P as t}from"./tweakpane.yHWGBmom1731053920743.js";import{b as n,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.9ak1AGd-1731053920743.js";import{e}from"./@tresjs.hJVQLtpa1731053920743.js";import{z as r}from"./three-custom-shader-material.u9oeG2Gi1731053920743.js";import{_ as i,a0 as u,C as c,ce as a,m as s,b3 as l}from"./three.eGpwEcxC1731053920743.js";import{d as f,a3 as p,w as d,o as m,D as v,u as g,a6 as y,r as h,f as w,g as C,j as b,m as _}from"./@vue.u2cBPEWn1731053920743.js";import"./@vueuse.weJ7f3dz1731053920743.js";const x=I;function I(t,n){const o=M();return(I=function(t,n){return o[t-=209]})(t,n)}function M(){const t=["uOpacity","exception","uColor","error","warn","land","computeBoundingBox","bulidingsColor","638297TKCJlA","4XQWypR","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","88gsAOau","landColor","test","while (true) {}","1426009nHHQLu","primitive","Color","material","color","clone","model","1290gzKsuV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","98150vUMviB","154yiKPVO","158298rHumqy","gger","48xJpZbj","input","city","__proto__","constructor","value","debu","apply","object","#e523ff","632RIoOwO","prototype","trace","info","topColor","bModel","chain","computeBoundingSphere","dispose","setStyle","66AYTqiV","#112233","443919NxcJus","renderOrder","side","bind","#ffff00","1006PKjutA","children","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","DoubleSide","stateObject","log","MeshBasicMaterial","action","uniforms","__csm","23454CPKUJI"];return(M=function(){return t})()}!function(t,n){const o=I,e=M();for(;;)try{if(172004===parseInt(o(235))/1*(-parseInt(o(218))/2)+-parseInt(o(230))/3*(parseInt(o(255))/4)+parseInt(o(270))/5*(-parseInt(o(228))/6)+-parseInt(o(272))/7*(parseInt(o(257))/8)+parseInt(o(245))/9*(-parseInt(o(268))/10)+-parseInt(o(254))/11*(-parseInt(o(274))/12)+-parseInt(o(261))/13*(-parseInt(o(271))/14))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const S=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[I(215)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){S(this,(function(){const t=I,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(269),"i"),e=O("init");n[t(259)](e+t(224))&&o[t(259)](e+t(209))?O():e("0")}))()}();const T=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();T(void 0,(function(){const t=I,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),o=n.console=n.console||{},e=[t(240),t(250),t(221),t(249),t(247),"table",t(220)];for(let r=0;r<e.length;r++){const n=T[t(212)][t(219)][t(233)](T),i=e[r],u=o[i]||n;n[t(211)]=T.bind(T),n.toString=u.toString[t(233)](u),o[i]=n}}))();const j=[x(216)],P=f({__name:x(223),props:{model:{},bulidingsColor:{default:x(217)},landColor:{default:x(229)},topColor:{default:x(234)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=x,o=t,a=o[n(267)][n(210)];o.model[n(267)][n(236)][0][n(264)]=new(i[n(241)])({color:n(234)}),a[n(231)]=1001;const s=o[n(267)][n(251)];(()=>{const t=n,{geometry:e}=a;e[t(252)](),e[t(225)]();const{max:u,min:s}=e.boundingBox;if(a[t(264)][t(244)])return;const l=new r({baseMaterial:a[t(264)],vertexShader:t(237),fragmentShader:t(256),silent:!0,uniforms:{uMax:{value:u},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(i[t(263)])(o[t(253)])},uOpacity:{value:o.opacity},uLightColor:{value:new c("#ffffff")},uTopColor:{value:new c(o[t(222)])},uTime:{value:0},uGradient:{value:o.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:i[t(238)]});a[t(264)][t(226)](),a.material=l})();const{onLoop:l}=e();l((({delta:t})=>{const o=n;a[o(264)].uniforms.uTime[o(213)]+=t})),p((()=>{const t=n;o.bulidingsColor&&a[t(264)][t(243)][t(248)][t(213)].setStyle(o[t(253)]),o[t(258)]&&((t,e)=>{const r=n;let i;"cu"===t||t===r(251)&&(i=Array.isArray(s.material)?s.material:[s[r(264)]],i.forEach((t=>{const n=r;t[e][n(227)](o[n(258)]),t[n(232)]=u})))})(t(251),t(265)),o.opacity&&(a.material[t(243)][t(246)].value=o.opacity)})),d(o,((t,n)=>{a.material.uniforms.uGradient.value=t.gradient}));const f=o.model[n(267)][n(266)]();return(t,o)=>{const e=n;return m(),v(e(262),{object:g(f)},null,8,j)}}});function O(t){function n(t){const o=I;if("string"==typeof t)return function(t){}[o(212)](o(260))[o(215)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[o(212)](o(214)+"gger").call(o(242)):function(){return!1}.constructor(o(214)+o(273))[o(215)](o(239)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const A=L;!function(t,n){const o=L,e=F();for(;;)try{if(484150===parseInt(o(509))/1*(-parseInt(o(522))/2)+parseInt(o(525))/3*(-parseInt(o(497))/4)+-parseInt(o(536))/5*(-parseInt(o(507))/6)+-parseInt(o(537))/7+-parseInt(o(499))/8+-parseInt(o(542))/9+parseInt(o(530))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const B=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){B(this,(function(){const t=L,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(501),"i"),e=R("init");n[t(528)](e+t(534))&&o[t(528)](e+t(494))?R():e("0")}))()}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(495)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();Z(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(514)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n[t(489)]=n[t(489)]||{},e=[t(508),t(510),t(498),t(523),t(538),t(488),t(493)];for(let r=0;r<e[t(519)];r++){const n=Z[t(518)][t(527)][t(540)](Z),i=e[r],u=o[i]||n;n.__proto__=Z[t(540)](Z),n[t(492)]=u[t(492)][t(540)](u),o[i]=n}}))();const z=[A(505)];function F(){const t=["debu","uTime","table","console","gger","speed","toString","trace","input","apply","geometry","220ZLejNy","info","1460176wYGDWc","applyMatrix4","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","width","uScale","value","object","call","53220KgmwBI","log","1dgybQD","warn","stateObject","builds","action","return (function() ","renderOrder","uSrcColor","uColor","constructor","length","material","matrix","1620110vWoNOL","error","while (true) {}","23559zEJKZz","srcColor","prototype","test","#000","20800290TFNqjc","clone","color","primitive","chain","uniforms","145MpifwN","1937334xjQyup","exception","uGradual","bind","scale","1366695awSIPl","gradual"];return(F=function(){return t})()}function L(t,n){const o=F();return(L=function(t,n){return o[t-=485]})(t,n)}const E=f({__name:"bLine",props:{builds:{},color:{default:"#FFF"},srcColor:{default:A(529)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=A,o=t;let r=null;const i={transparent:!0,uniforms:{uColor:{value:new c(o[n(532)])},uSrcColor:{value:new c(o.srcColor)},uScale:{value:o[n(541)]},uTime:{value:0},uGradual:{value:o[n(485)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let u=new a(o[n(512)][n(496)])[n(531)]();u=u[n(500)](o[n(512)][n(521)]);const f=new s(i);r=new l(u,f),r[n(520)].linewidth=o[n(502)],r[n(515)]=1e3,p((()=>{const t=n;o[t(532)]&&(i[t(535)][t(517)].value=new c(o[t(532)])),o[t(526)]&&(i[t(535)][t(516)][t(504)]=new c(o[t(526)])),o[t(541)]&&(i[t(535)][t(503)][t(504)]=o[t(541)]),o[t(485)]&&(i[t(535)][t(539)][t(504)]=o.gradual)}));const{onLoop:d}=e();return d((({delta:t})=>{const e=n;i[e(535)].uTime[e(504)]+=t*o[e(491)],i[e(535)][e(487)][e(504)]%=1})),(t,o)=>{const e=n;return m(),v(e(533),{object:g(r)},null,8,z)}}});function R(t){function n(t){const o=L;if("string"==typeof t)return function(t){}[o(518)](o(524))[o(495)]("counter");1!==(""+t/t)[o(519)]||t%20==0?function(){return!0}.constructor("debu"+o(490))[o(506)](o(513)):function(){return!1}[o(518)](o(486)+o(490))[o(495)](o(511)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const D=q;!function(t,n){const o=q,e=J();for(;;)try{if(987614===parseInt(o(209))/1+-parseInt(o(256))/2*(-parseInt(o(213))/3)+-parseInt(o(220))/4*(-parseInt(o(215))/5)+-parseInt(o(214))/6*(-parseInt(o(246))/7)+-parseInt(o(236))/8*(-parseInt(o(226))/9)+-parseInt(o(259))/10*(parseInt(o(218))/11)+-parseInt(o(225))/12*(parseInt(o(251))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const G=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[q(211)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){G(this,(function(){const t=q,n=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=N("init");n.test(e+t(222))&&o[t(253)](e+t(229))?N():e("0")}))()}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function q(t,n){const o=J();return(q=function(t,n){return o[t-=209]})(t,n)}function J(){const t=["5988bqyDlR","16579197qELkRe","扩散系数","#999","input","#112233","length","warn","while (true) {}","trace","效果参数","8ezJbZL",'{}.constructor("return this")( )',"error","最大扩散","线原颜色","string","counter","__proto__","addBinding","scale","77Ntosyh","city","constructor","buildingsEffectA","toString","146042cSiDLl","#000000","test","call","speed","1336730QAYTtL","color","exception","70GQYJWn","1640523pZMbVb","log","apply","gger","6UzaXPP","762222ZhEkeO","1421660yNqZpj","线扫颜色","debu","2089065CZBbrh","builds","24flUqVb","bind","chain","model","console"];return(J=function(){return t})()}W(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function("return (function() "+t(237)+");")()}catch(o){n=window}return n}(),o=n[t(224)]=n[t(224)]||{},e=[t(210),t(232),"info",t(238),t(258),"table",t(234)];for(let r=0;r<e[t(231)];r++){const n=W[t(248)].prototype.bind(W),i=e[r],u=o[i]||n;n[t(243)]=W.bind(W),n.toString=u[t(250)][t(221)](u),o[i]=n}}))();const K=f({__name:D(249),async setup(e){const r=D;let i,u;const c=([i,u]=y((()=>o())),i=await i,u(),i),a=h({color:"#FFF",srcColor:"#000",scale:2e3,gradual:6.6,speed:.3}),s=new t({title:r(235),expanded:!0});return s[r(244)](a,"srcColor",{label:r(240)}),s[r(244)](a,r(257),{label:r(216)}),s[r(244)](a,r(255),{label:"速度",min:.1,max:1,step:.1}),s[r(244)](a,r(245),{label:r(239),min:10,max:2e3,step:10}),s.addBinding(a,"gradual",{label:r(227),min:1.1,max:10,step:.1}),(t,o)=>{const e=r;return m(),w(n,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:C((()=>[b(P,{model:g(c),bulidingsColor:e(252),landColor:e(230),topColor:e(228)},null,8,[e(223)]),b(E,_({builds:g(c)[e(247)]},a),null,16,[e(219)])])),_:1})}}});function N(t){function n(t){const o=q;if(typeof t===o(241))return function(t){}[o(248)](o(233))[o(211)](o(242));1!==(""+t/t).length||t%20==0?function(){return!0}[o(248)](o(217)+o(212))[o(254)]("action"):function(){return!1}.constructor(o(217)+o(212))[o(211)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{K as default};

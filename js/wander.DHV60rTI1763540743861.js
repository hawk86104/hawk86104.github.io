import{g as o}from"./gsap.CY1N3EIL1763540743861.js";import{_ as a,x as e}from"./@fesjs.BEMFm_yJ1763540743861.js";import{r as s,q as t,H as r,I as n,o as i,J as p,h as l,e as m,y as c,u,F as h,X as g,N as f}from"./@vue.Co_gxueH1763540743861.js";import{V as d,bc as j,E as y,b as v}from"./three.rXKzP9fQ1763540743861.js";import"./vue-router.BxG8XxK11763540743861.js";import"./lodash-es.B7GkVYRo1763540743861.js";import"./@vueuse.CfFJ-iFV1763540743861.js";import"./pinia.CEQ6XgE61763540743861.js";import"./@qlin.y-0Z8WnK1763540743861.js";import"./@babel.BPq7uOAK1763540743861.js";import"./@floating-ui.Bhq4ibgf1763540743861.js";import"./@juggle.Vc7cP4_P1763540743861.js";const w={key:0,class:"wander-popup"},_={class:"popup-content"},b={class:"viewpoint-list"},x=a({__name:"wander",props:["camera","showPopup"],setup(a){const x=a,k=s([]),z=()=>{if(console.log(x.camera),!x.camera)return;const o=x.camera.position.clone(),a=x.camera.rotation.clone();k.push({position:o,rotation:a}),console.log(k)},M=()=>{if(!x.camera)return void console.error("Camera is not available");if(k.length<2)return void alert("请至少保存两个视角点位！");const a=k.map(({position:o})=>new d(o.x,o.y,o.z)),e=new j(a,!1,"catmullrom",.5),s=2*k.length,t=50*k.length,r=e.getPoints(t),n=k.map(({rotation:o})=>new y(o.x,o.y,o.z));o.to({},{duration:s,onUpdate:function(){const o=this.progress(),a=o*t,e=Math.floor(a),s=a-e,i=Math.min(e+1,r.length-1),p=r[e],l=r[i],m=p.clone().lerp(l,s);x.camera.position.copy(m);const c=Math.min(Math.floor(o*(n.length-1)),n.length-2),u=n[c],h=n[c+1],g=o*(n.length-1)%1,f=(new y).set(v.lerp(u.x,h.x,g),v.lerp(u.y,h.y,g),v.lerp(u.z,h.z,g));x.camera.rotation.copy(f)},ease:"linear"})};return t(()=>{}),(o,a)=>x.showPopup?(i(),r("div",w,[p("div",_,[a[2]||(a[2]=p("h3",null,"漫游控制",-1)),l(u(e),{type:"primary",onClick:z,style:{"margin-right":"8%"}},{default:m(()=>[...a[0]||(a[0]=[c("保存视角",-1)])]),_:1}),l(u(e),{type:"primary",onClick:M},{default:m(()=>[...a[1]||(a[1]=[c("播放漫游",-1)])]),_:1}),p("ul",b,[(i(!0),r(h,null,g(k,(o,a)=>(i(),r("li",{key:a},f(a+1)+"号点 ",1))),128))])])])):n("",!0)}},[["__scopeId","data-v-24f6da6f"]]);export{x as default};

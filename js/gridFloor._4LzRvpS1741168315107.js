import{a0 as n,_ as t,C as r,ai as o}from"./three.FxqAALWt1741168315107.js";import{o as e,J as i,f as s}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{P as c}from"./tweakpane.yDiyAAkA1741168315107.js";import{d as u,a2 as a,o as l,H as f,N as d,aj as v,ak as g,r as p,f as h,g as m,j as C,u as x,al as y,m as w}from"./@vue.NRI7TcgI1741168315107.js";import"./postprocessing.hfy6Kqg11741168315107.js";import"./@vueuse.Z8xAfE_A1741168315107.js";function b(n,t){const r=_();return(b=function(n,t){return r[n-=156]})(n,t)}const W=b;!function(n,t){const r=b,o=_();for(;;)try{if(344138===-parseInt(r(185))/1*(-parseInt(r(204))/2)+parseInt(r(184))/3*(-parseInt(r(181))/4)+parseInt(r(207))/5+-parseInt(r(179))/6*(-parseInt(r(177))/7)+parseInt(r(171))/8*(parseInt(r(162))/9)+parseInt(r(189))/10+-parseInt(r(188))/11*(parseInt(r(214))/12))break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const T=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[b(165)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){T(this,(function(){const n=b,t=new RegExp(n(202)),r=new RegExp(n(173),"i"),o=D(n(168));t[n(175)](o+n(161))&&r[n(175)](o+n(190))?D():o("0")}))()}();const j=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[b(165)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();j(void 0,(function(){const n=b,t=function(){const n=b;let t;try{t=Function(n(180)+n(174)+");")()}catch(r){t=window}return t}(),r=t[n(191)]=t[n(191)]||{},o=[n(187),n(167),n(195),"error","exception",n(211),n(157)];for(let e=0;e<o[n(199)];e++){const t=j[n(169)][n(172)][n(176)](j),i=o[e],s=r[i]||t;t[n(163)]=j[n(176)](j),t.toString=s[n(196)][n(176)](s),r[i]=t}}))();const I=[W(219)],k=u({__name:W(208),props:{gridColor:{default:W(212)},gridThickness:{default:.02},crossColor:{default:W(178)},crossThickness:{default:.02},uCross:{default:.2},floorColor:{default:W(200)}},setup(o){const e=W,i=o,s={vertexShader:"varying vec2 vUv;\nvoid main()\n{\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n}",fragmentShader:"uniform float uGridThickness;\nuniform vec3 uGridColor;\nuniform float uCrossScale;\nuniform float uCrossThickness;\nuniform float uCross;\nuniform vec3 uCrossColor;\nuniform vec3 uFloorColor;\n\nvarying vec2 vUv;\n\nfloat gridFloor(vec2 uv, vec2 lineWidth) {\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    vec2 targetWidth = invertLine ? 1.0 - lineWidth : lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    \n    \n    \n    \n    vec2 gridUV = abs(fract(uv) * 2.0 - 1.0);\n    gridUV = invertLine ? gridUV : 1.0 - gridUV;\n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    grid2 = invertLine ? 1.0 - grid2 : grid2;\n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nfloat crossFloor(vec2 uv, float scale, float thickness, float crossIntensity) {\n    vec2 lineWidth = vec2(thickness);\n\n    \n    \n    \n    \n    \n    \n    \n    vec4 uvDDXY = vec4(dFdx(uv), dFdy(uv));\n    vec2 uvDeriv = vec2(length(uvDDXY.xz), length(uvDDXY.yw));\n\n    \n    \n    \n    bool invertLine = lineWidth.x > 0.5;\n    \n    vec2 targetWidth = lineWidth;\n\n    \n    \n    \n    \n    \n    vec2 drawWidth = clamp(targetWidth, uvDeriv, vec2(0.5));\n\n    \n    \n    \n    vec2 lineAA = uvDeriv * 1.5;\n    \n    \n    float cutOffX = abs(fract(uv.y) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n    float cutOffY = abs(fract(uv.x) * 2.0 - 1.0) > crossIntensity ? 1.0 : 0.0;\n\n    \n    \n    \n    \n    \n    \n    \n    float uvX = abs(fract(uv.x) * 2.0 - 1.0) + cutOffX;\n    float uvY = abs(fract(uv.y) * 2.0 - 1.0) + cutOffY;\n    vec2 gridUV = vec2(uvX, uvY);\n\n    \n\n    \n    \n    \n    vec2 grid2 = smoothstep(drawWidth + lineAA, drawWidth - lineAA, gridUV);\n\n    \n    \n    \n    grid2 *= clamp(targetWidth / drawWidth, 0.0, 1.0);\n\n    \n    \n    \n    \n    \n    grid2 = mix(grid2, targetWidth, clamp(uvDeriv * 2.0 - 1.0, 0.0, 1.0));\n    \n\n    \n    float grid = mix(grid2.x, 1.0, grid2.y);\n\n    return grid;\n}\n\nvoid main()\n{\n    vec2 lineWidth = vec2(uGridThickness);\n    \n    vec2 uv = vUv * 20.0;\n\n    \n    float grid = gridFloor(uv, lineWidth);\n    \n    vec3 gridColor = mix(uFloorColor, uGridColor, vec3(grid));\n\n    \n    float crossUv = crossFloor(uv, uCrossScale, uCrossThickness, uCross);\n    \n    vec3 gridColor2 = mix(gridColor, uCrossColor, vec3(crossUv));\n    \n    vec3 color =  gridColor2;\n\n    gl_FragColor = vec4(color, 1.0);\n}",side:n,transparent:!0,uniforms:{uFloorColor:{value:new(t[e(215)])(i.floorColor)},uGridThickness:{value:i[e(209)]},uGridColor:{value:new(t[e(215)])(i.gridColor)},uCrossThickness:{value:i[e(203)]},uCross:{value:i.uCross},uCrossColor:{value:new r(i[e(201)])}}};return a((()=>{const n=e;s[n(160)][n(216)][n(193)].set(i[n(213)]),s[n(160)][n(170)][n(193)][n(164)](i[n(218)]),s[n(160)][n(194)][n(193)].set(i[n(201)]),s[n(160)][n(217)].value=i[n(209)],s.uniforms[n(192)].value=i[n(203)],s.uniforms[n(156)].value=i[n(156)]})),(n,t)=>{const r=e;return l(),f(r(182),{"rotate-x":-Math.PI/2},[t[0]||(t[0]=d(r(206),{args:[10,10,32,32]},null,-1)),d(r(158),v(g(s)),null,16)],8,I)}}});function D(n){function t(n){const r=b;if(typeof n===r(159))return function(n){}[r(169)](r(166)).apply(r(205));1!==(""+n/n)[r(199)]||n%20==0?function(){return!0}[r(169)](r(210)+r(186))[r(198)](r(197)):function(){return!1}[r(169)](r(210)+r(186))[r(165)](r(183)),t(++n)}try{if(n)return t;t(0)}catch(r){}}function _(){const n=["rotate-x","uCross","trace","TresShaderMaterial","string","uniforms","chain","4188924NjmmiY","__proto__","set","apply","while (true) {}","warn","init","constructor","uGridColor","8xPanzj","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"test","bind","77RWJhyM","#7a91df","135750ZgyvZv","return (function() ","37300AoDzxV","TresMesh","stateObject","111eWwczh","241zJlDLx","gger","log","11JyfwxA","4108030exFtPK","input","console","uCrossThickness","value","uCrossColor","info","toString","action","call","length","#ffffff","crossColor","function *\\( *\\)","crossThickness","1058CLzrPx","counter","TresPlaneGeometry","1113890JIJxaB","gridFloor","gridThickness","debu","table","#c4d6ff","floorColor","9434616oxbmnz","Color","uFloorColor","uGridThickness","gridColor"];return(_=function(){return n})()}const A=U;!function(n,t){const r=U,o=Y();for(;;)try{if(239646===parseInt(r(270))/1+-parseInt(r(258))/2+parseInt(r(286))/3+parseInt(r(277))/4+-parseInt(r(262))/5*(parseInt(r(263))/6)+-parseInt(r(267))/7+parseInt(r(245))/8)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const F=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[U(274)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();!function(){F(this,(function(){const n=U,t=new RegExp(n(281)),r=new RegExp(n(242),"i"),o=G("init");t.test(o+"chain")&&r[n(287)](o+n(256))?G():o("0")}))()}();const z=function(){let n=!0;return function(t,r){const o=n?function(){if(r){const n=r[U(274)](t,arguments);return r=null,n}}:function(){};return n=!1,o}}();z(void 0,(function(){const n=U;let t;try{t=Function("return (function() "+n(278)+");")()}catch(e){t=window}const r=t.console=t.console||{},o=["log","warn",n(243),n(250),n(279),"table",n(265)];for(let i=0;i<o[n(275)];i++){const t=z.constructor[n(266)].bind(z),e=o[i],s=r[e]||t;t.__proto__=z.bind(z),t.toString=s[n(294)][n(260)](s),r[e]=t}}))();const S=u({__name:A(283),setup(n){const t=A,r=p({alpha:!0,toneMapping:o,windowSize:!0,clearColor:3355443}),u=p({enableDamping:!0,autoRotate:!1}),a=p({gridColor:t(282),crossColor:t(259),floorColor:t(268),gridThickness:.02,crossThickness:.03,uCross:.29}),f=new c;return f[t(254)](a,t(285),{label:"网格颜色"}),f[t(254)](a,t(248),{label:"网格厚度",min:.01,max:1,step:.01}),f[t(254)](a,t(276),{label:t(252)}),f.addBinding(a,t(292),{label:t(272),min:.01,max:1,step:.01}),f[t(254)](a,t(269),{label:t(246),min:.01,max:1,step:.01}),f.addBinding(a,"floorColor",{label:t(280)}),(n,o)=>{const c=t;return l(),h(x(s),w(r,{"window-size":""}),{default:m((()=>[o[0]||(o[0]=d(c(273),{position:[6,6,6],fov:45,near:.1,far:1e3},null,-1)),C(x(e),v(g(u)),null,16),o[1]||(o[1]=d("TresAmbientLight",{intensity:.5},null,-1)),o[2]||(o[2]=d(c(261),{position:[15,15,15],intensity:1},null,-1)),o[3]||(o[3]=d(c(247),{position:[0,.5,0],scale:.2},[d(c(290),{args:[1,.35,100,32]}),d(c(264),{color:c(291),roughness:0,metalness:1})],-1)),C(k,v(g(a)),null,16),(l(),h(y,null,{default:m((()=>[C(x(i),{files:[c(295),c(289),c(271),"neg-y.jpg",c(293),c(251)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function U(n,t){const r=Y();return(U=function(n,t){return r[n-=242]})(n,t)}function Y(){const n=["pos-x.jpg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","stateObject","5072464RHdKMQ","十字大小","TresMesh","gridThickness","call","error","neg-z.jpg","十字颜色","while (true) {}","addBinding","gger","input","counter","757494tuSaav","#ef57ff","bind","TresDirectionalLight","12195GhSsNS","438Hjipwf","TresMeshStandardMaterial","trace","prototype","3012534nOYgCg","#000000","uCross","135614JHvUGm","pos-y.jpg","十字厚度","TresPerspectiveCamera","apply","length","crossColor","973344YZPHWB",'{}.constructor("return this")( )',"exception","地板颜色","function *\\( *\\)","#ffffff","gridFloor","constructor","gridColor","641382onxErL","test","debu","neg-x.jpg","TresTorusKnotGeometry","#ff33ff","crossThickness","pos-z.jpg","toString"];return(Y=function(){return n})()}function G(n){function t(n){const r=U;if("string"==typeof n)return function(n){}[r(284)](r(253))[r(274)](r(257));1!==(""+n/n)[r(275)]||n%20==0?function(){return!0}[r(284)](r(288)+r(255))[r(249)]("action"):function(){return!1}[r(284)](r(288)+r(255))[r(274)](r(244)),t(++n)}try{if(n)return t;t(0)}catch(r){}}export{S as default};

import"./@fesjs.BxIxMXgl1756372194067.js";import{m as e,T as t,e as a,a as o,V as s}from"./@tresjs.Df2Jc2df1756372194067.js";import{i}from"./Resource.CtByW1MJ1756372194067.js";/* empty css                                                                             */import{_ as r}from"./randomLoading.vue_vue_type_script_setup_true_lang.BC1IBSns1756372194067.js";import"./three-mesh-ui.module.Dgb2GCtr1756372194067.js";/* empty css                                                              */import"./lamina.C7Q80LJW1756372194067.js";import{_ as n}from"./skyBoxDmesh.vue_vue_type_script_setup_true_lang.iD68BTDq1756372194067.js";import"./OimoPhysicsBuffer.DTTXKZYU1756372194067.js";import"./vite-plugin-qiankun.B06WoCqG1756372194067.js";import"./vanilla.esm.5.5.0.b8Nged_k1756372194067.js";import"./PackedMipMapGenerator.DAS1QEbV1756372194067.js";import{_ as l}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.CHngc0961756372194067.js";import{P as c}from"./tweakpane.C0HtAJSg1756372194067.js";import{g as m}from"./gsap.CEma2WSx1756372194067.js";import{d as p,b as u,a2 as d,G as h,o as g,F as b,I as v,u as j,j as y,f as _,w as f,a7 as w,a8 as k,r as M,v as T,h as S,e as B,H as x,m as I,a5 as G}from"./@vue.BzMISRrV1756372194067.js";import{a3 as O,a as C,bD as P,aA as L,cg as z,l as N,C as F,aB as A,cG as D,V as R,f as W,g as E,X as H}from"./three.QlBabAUP1756372194067.js";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang.D12vWlkN1756372194067.js";import"./vue-router.Dko1PBP91756372194067.js";import"./lodash-es.C7pWAXPe1756372194067.js";import"./pinia.CqPBZQk21756372194067.js";import"./@qlin.q6OWdsQV1756372194067.js";import"./@babel.BPq7uOAK1756372194067.js";import"./@floating-ui.BFjFSAYt1756372194067.js";import"./@juggle.CcBCnTIR1756372194067.js";import"./postprocessing.eHqBklb71756372194067.js";import"./@vueuse.BIpwRBdi1756372194067.js";import"./starLoading.EJ6y69CN1756372194067.js";import"./utils.B5jG6Hsc1756372194067.js";import"./cssLoaders.GyY4v84z1756372194067.js";import"./bubbleLoading.CXlOzAAA1756372194067.js";import"./yangyangLoading.FzXUgEID1756372194067.js";import"./glsl-tokenizer.odSAeIPY1756372194067.js";import"./@amap.CGUF9xH41756372194067.js";import"./glsl-token-descope.Byd_9pYr1756372194067.js";import"./glsl-token-depth.Duvdnvlt1756372194067.js";import"./glsl-token-scope.BdCfdvWe1756372194067.js";import"./glsl-token-properties.DKXemF9b1756372194067.js";import"./glsl-token-assignments.Ctx_yUgS1756372194067.js";import"./glsl-token-string.pnQAg5DN1756372194067.js";import"./glsl-token-functions.BJ3pfo2C1756372194067.js";import"./object-hash._drSlZxG1756372194067.js";import"./jszip.CcduwmMh1756372194067.js";import"./oimophysics.BBtHVm4j1756372194067.js";import"./three-stdlib.CWxBXjoj1756372194067.js";import"./@pmndrs.-m_DW0ID1756372194067.js";import"./index.BjIMotjb1756372194067.js";const X=["object","rotation-y"],Y=["rotation","geometry","material"],q=p({__name:"officeBuild",setup(a){const{scene:o}=i.getItem("officeBuild.glb"),{scene:s,raycaster:r,camera:n}=e();o.traverse((e=>{e.isMesh&&(e.frustumCulled=!1,e.material.side=O,e.castShadow=!0,e.receiveShadow=!0,e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.8,e.material.envmap=s.value.background)}));const l=o.clone();let c="";const p=()=>{o.getObjectByName(c)?.traverse((e=>{e.isMesh&&(e.material=l.getObjectByName(e.name).material,e.castShadow=!0,e.receiveShadow=!0)}))};window.addEventListener("pointermove",(e=>{const t=new C;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,r.value.setFromCamera(t,n.value);const a=r.value.intersectObject(o,!0);if(a.length>0&&a[0]&&a[0].object&&a[0].object.parent){if(c===a[0].object.parent.name)return;p(),a[0].object.parent.traverse((e=>{e.isMesh&&(e.material=new P({color:"#00d1ff",transparent:!0,opacity:.7,emissiveMap:e.material.map,emissiveIntensity:2}),e.castShadow=!1,e.receiveShadow=!1)})),c=a[0].object.parent.name}else c&&(p(),c="")}));let f="";window.addEventListener("click",(e=>{const t=new C;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,r.value.setFromCamera(t,n.value);const a=r.value.intersectObject(o,!0);if(a.length>0&&a[0]&&a[0].object&&a[0].object.parent){if("runing"===f)return;if(f===a[0].object.parent.name)return m.to(a[0].object.parent.position,{z:l.getObjectByName(f).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{f=""}}),void(f="runing");f&&m.to(o.getObjectByName(f).position,{z:l.getObjectByName(f).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{f=""}}),m.to(a[0].object.parent.position,{z:l.getObjectByName(a[0].object.parent.name).position.z-40,duration:2,ease:"power1.inOut",onComplete:()=>{f=a[0].object.parent.name}}),f="runing"}}));const w=new L({roughness:.3,metalness:.05,color:"#3a4f75",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),{scene:k}=i.getItem("arctic_tooltip.glb"),M=u(null);return d((()=>{M.value&&m.to(M.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})})),(e,a)=>(g(),h(b,null,[v("primitive",{object:j(o),"cast-shadow":"","receive-shadow":"",position:[13.5,0,-45],scale:[.2,.3,.2],name:"办公大厅","rotation-y":Math.PI},null,8,X),v("TresMesh",{ref_key:"tooltipRef",ref:M,scale:[.05,.02,.004],rotation:[0,Math.PI/2,0],position:[12,25,-35],geometry:j(k).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:j(w)},[y(j(t),{center:!0,transform:""},{default:_((()=>a[0]||(a[0]=[v("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"5em","text-align":"center","margin-top":"1em",scale:"0.7 1.5"}}," 楼宇分层 ",-1)]))),_:1})],8,Y)],64))}}),J=["object","rotation-y"],K=["rotation","geometry","material"],U={__name:"laboratoryBuild",setup(a){const{scene:o}=i.getItem("laboratoryBuild.glb"),{scene:s}=e(),r=[],n=[];o.traverse((e=>{e.updateMatrixWorld(!0),e.isMesh&&(e.geometry.applyMatrix4(e.matrixWorld),r.push(e.geometry),e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.1,e.material.envmap=s.value.background,n.push(e.material))}));const l=z(r,!0),c=new N(l,n),{scene:p}=i.getItem("arctic_tooltip.glb"),f=new L({roughness:.3,metalness:.05,color:"#b07560",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),w=u(null);return d((()=>{w.value&&m.to(w.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})})),(e,a)=>(g(),h(b,null,[v("primitive",{object:j(c),"cast-shadow":"","receive-shadow":"",position:[-33,0,7],scale:[.7,1.2,.7],name:"实验楼","rotation-y":Math.PI/2},null,8,J),v("TresMesh",{ref_key:"tooltipRef",ref:w,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[-32,27,12],geometry:j(p).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:j(f)},[y(j(t),{center:!0,transform:""},{default:_((()=>a[0]||(a[0]=[v("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}},"实验楼",-1)]))),_:1})],8,K)],64))}},Z=["object"],$=["rotation","geometry"],Q=3e-4,ee={__name:"car",props:{darkModel:{type:Boolean,default:!1}},setup(o){const s=o,r={color:"#ffda99",roughness:.21,reflectivity:1,attenuationColor:"#ffda35",attenuationDistance:2,chromaticAberration:.05,anisotropicBlur:.1,distortion:1.8,temporalDistortion:0,backside:!1,thickness:1,backsideThickness:.5},{scene:n}=e(),{scene:l,nodes:c,materials:p}=i.getItem("lambo.glb");l.children[0].scale.setScalar(.02),c.glass_003.scale.setScalar(2.7),p.FrameBlack.roughness=0,p.FrameBlack.metalness=.75,p.Chrome.metalness=1,p.Chrome.roughness=0,p.BreakDiscs.metalness=.2,p.BreakDiscs.roughness=.2,p.TiresGum.metalness=0,p.TiresGum.roughness=.4,p.GreyElements.metalness=0,c.yellow_WhiteCar_0.material=new L({roughness:.3,metalness:.05,color:"#ffda35",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),Object.values(c).forEach((e=>{e.isMesh&&(e.name.startsWith("glass")&&e.geometry.computeVertexNormals(),"silver_001_BreakDiscs_0"===e.name&&(e.material=p.BreakDiscs.clone(),e.material.color=new F("#ddd")),e.castShadow=!0,e.receiveShadow=!0,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.1,e.material.envmap=n.value.background)}));const d=new A(16777215);l.add(d),l.add(d.target),d.angle=Math.PI/4,d.position.set(0,2,5),d.target.position.set(0,1,7),d.penumbra=.1,d.decay=.01,d.intensity=3,d.castShadow=!0,d.shadow.mapSize.width=1024,d.shadow.mapSize.height=1024,d.shadow.camera.near=.1,d.shadow.camera.far=1e3,d.shadow.camera.bias=.005,d.visible=!0;const{scene:M}=i.getItem("arctic_tooltip.glb"),T=new D([new R(10,1.5,35),new R(35,1.5,35),new R(35,1.5,-80),new R(47,1.5,-80),new R(47,1.5,35),new R(100,1.5,35),new R(100,1.5,47),new R(-100,1.5,47),new R(-100,1.5,35)]);T.curveType="catmullrom",T.closed=!0,T.tension=.2;const S=u(null);let B=0;f(S,(e=>{e&&m.to(S.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})})),f((()=>s.darkModel),(e=>{d&&(d.visible=e)}),{immediate:!0});const{onLoop:x}=a();return x((()=>{(()=>{if(T)if(B<=.9997){const e=T.getPointAt(B),t=T.getPointAt(B+Q);e&&t&&(S.value.position.set(e.x,e.y+6,e.z),l.position.set(e.x,e.y,e.z),l.lookAt(t.x,t.y,t.z)),B+=Q}else B=0})()})),(e,a)=>(g(),h(b,null,[v("primitive",{object:j(l)},null,8,Z),v("TresMesh",{ref_key:"tooltipRef",ref:S,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[10,6,35],geometry:j(M).getObjectByName("Arctic_Tooltip_lambert4_0").geometry},[y(j(t),{center:!0,transform:""},{default:_((()=>a[0]||(a[0]=[v("h1",{class:"text-xs p-0.5 rounded -mt-10 text-#ffff99 font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}}," 别追我 ",-1)]))),_:1}),y(j(V),w(k(r)),null,16)],8,$)],64))}},te=["object"],ae=p({__name:"sculpture",props:{darkModel:{type:Boolean,default:!1}},setup(t){const a=t,{scene:o}=i.getItem("vr_sculpture_park.glb"),{scene:s}=e();return o.traverse((async e=>{e.isMesh&&(e.material.emissiveMap=e.material.map,e.material.emissive=e.material.color,e.material.envmap=s.value.background,e.castShadow=!0,e.receiveShadow=!0,e.frustumCulled=!1),e.isObject3D&&(e.frustumCulled=!1,e.castShadow=!0,e.receiveShadow=!0)})),f((()=>a.darkModel),(e=>{o&&o.traverse((async t=>{t.isMesh&&(t.material.emissiveIntensity=!1===e?.6:0)}))}),{immediate:!0}),(e,t)=>(g(),h("primitive",{"cast-shadow":"","receive-shadow":"",object:j(o),name:"主场景"},null,8,te))}}),oe={position:[10,0,0]},se={position:[-132,0,40.4]},ie=["object"],re={position:[-99,0,40.4]},ne=["object"],le={position:[-66,0,40.4]},ce=["object"],me={position:[-33,0,40.4]},pe=["object"],ue={position:[0,0,40.4]},de=["object"],he={position:[60.5,0,40.4]},ge=["object"],be={position:[93.5,0,40.4]},ve=["object"],je={position:[-3.3,-.2,18]},ye={position:[0,0,0]},_e=["object"],fe={position:[0,0,33]},we=["object"],ke={position:[0,0,66]},Me=["object"],Te={position:[0,0,99]},Se=["object"],Be={position:[0,0,159]},xe=["object"],Ie={position:[0,0,192]},Ge=["object"],Oe={__name:"street",setup(e){const t=i.getItem("low_poly_street.glb").nodes,a=t.Sketchfab_model.getObjectByName("Cube497_530");a.children[0].receiveShadow=!0;const o=t.Sketchfab_model.getObjectByName("Cube549_582");o.children[0].receiveShadow=!0;const s=t.Sketchfab_model.getObjectByName("Cube550_583");s.children[0].receiveShadow=!0;const r=t.Sketchfab_model.getObjectByName("Cube551_854");r.children[0].receiveShadow=!0;const n=t.Sketchfab_model.getObjectByName("Cube552_855");n.children[0].receiveShadow=!0;const l=t.Sketchfab_model.getObjectByName("Cube553_856");l.children[0].receiveShadow=!0;const c=new W;c.add(a,o,s,r,n,l),c.scale.setScalar(.83),c.rotation.set(0,.008,0);const m=(new E).setFromObject(c),p=new R;m.getCenter(p),c.position.x=-p.x,c.position.y=-p.y,c.position.z=-p.z;const u=c.clone();return u.rotateY(Math.PI/2),(e,t)=>(g(),h(b,null,[v("TresGroup",oe,[v("TresGroup",se,[v("primitive",{object:j(c).clone()},null,8,ie)]),v("TresGroup",re,[v("primitive",{object:j(c).clone()},null,8,ne)]),v("TresGroup",le,[v("primitive",{object:j(c).clone()},null,8,ce)]),v("TresGroup",me,[v("primitive",{object:j(c).clone()},null,8,pe)]),v("TresGroup",ue,[v("primitive",{object:j(c).clone()},null,8,de)]),v("TresGroup",he,[v("primitive",{object:j(c).clone()},null,8,ge)]),v("TresGroup",be,[v("primitive",{object:j(c).clone()},null,8,ve)])]),v("TresGroup",je,[v("TresGroup",ye,[v("primitive",{object:j(u).clone()},null,8,_e)]),v("TresGroup",fe,[v("primitive",{object:j(u).clone()},null,8,we)]),v("TresGroup",ke,[v("primitive",{object:j(u).clone()},null,8,Me)]),v("TresGroup",Te,[v("primitive",{object:j(u).clone()},null,8,Se)]),v("TresGroup",Be,[v("primitive",{object:j(u).clone()},null,8,xe)]),v("TresGroup",Ie,[v("primitive",{object:j(u).clone()},null,8,Ge)])])],64))}},Ce=p({__name:"simplePark",setup(e){i.loadResources([{functionName:"GLTFLoader",url:"https://opensource.cdn.icegl.cn/model/digitalPark/officeBuild.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/arctic_tooltip.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/laboratoryBuild.glb"},{functionName:"GLTFLoader",url:"https://opensource.cdn.icegl.cn/model/digitalPark/low_poly_street.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/vr_sculpture_park.glb"},{functionName:"GLTFLoader",url:"./plugins/industry4/model/lambo.glb"}]);const t=M({shadows:!0,shadowMap:!0,shadowMapType:H,windowSize:!0}),a=M({enableDamping:!0,dampingFactor:.05}),m=M({cellSize:10,cellThickness:1,cellColor:"#4c4c4c",sectionColor:"#bbc26b",sectionSize:50,sectionThickness:3,fadeDistance:600,fadeStrength:3,followCamera:!1,infiniteGrid:!0}),p=T();f(p,(e=>{e&&(p.value.shadow.mapSize.set(5120,5120),p.value.shadow.bias=-1e-5,p.value.shadow.color=new F(0),p.value.shadow.camera.near=.5,p.value.shadow.camera.far=5e4,p.value.shadow.camera.top=300,p.value.shadow.camera.right=300,p.value.shadow.camera.left=-300,p.value.shadow.camera.bottom=-300)}));const u=T(!1),d=new c,O=T();return d.addBinding(u,"value",{label:"黑夜模式"}),f(u,(e=>{p.value&&(p.value.visible=!e,O.value&&(O.value.context.scene.value.backgroundIntensity=e?0:1))})),(e,c)=>{const d=S("TresCanvas");return g(),h(b,null,[y(j(r),{useResourceManager:""}),y(d,I(t,{ref_key:"tcRef",ref:O}),{default:_((()=>[c[0]||(c[0]=v("TresPerspectiveCamera",{position:[40,30,82],fov:45,near:.1,far:1e4},null,-1)),y(j(o),w(k(a)),null,16),c[1]||(c[1]=v("TresAmbientLight",{intensity:.1},null,-1)),y(j(s),null,{default:_((()=>[v("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:p,position:[80,80,-8],intensity:3,castShadow:!0},null,512)])),_:1}),j(i).hasAllFinished.value?(g(),B(q,{key:0})):x("",!0),j(i).hasAllFinished.value?(g(),B(U,{key:1})):x("",!0),j(i).hasAllFinished.value?(g(),B(Oe,{key:2})):x("",!0),j(i).hasAllFinished.value?(g(),B(ae,{key:3,darkModel:u.value},null,8,["darkModel"])):x("",!0),j(i).hasAllFinished.value?(g(),B(ee,{key:4,darkModel:u.value},null,8,["darkModel"])):x("",!0),y(j(l),I({args:[100,100]},m,{position:[0,-10,0]}),null,16),(g(),B(G,null,{default:_((()=>[y(j(n),{environment:!1,texture:"./plugins/skyBox/image/kloofendal_48d_partly_cloudy_puresky.jpg"})])),_:1}))])),_:1},16)],64)}}});export{Ce as default};

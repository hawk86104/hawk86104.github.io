import{aE as e,d as r,k as o,p as t,o as i,cH as l}from"./three.Db7Elb4U1762224880399.js";import{F as s,r as a}from"./@tresjs.DqjiY1SI1762224880399.js";import{R as n}from"./ReflectorMaterial.DKhOIs5B1762224880399.js";import{R as f}from"./Reflector.Ck8wcBTQ1762224880399.js";import"./OimoPhysicsBuffer.wbtnxBot1762224880399.js";import{f as m}from"./utils.CNife3_q1762224880399.js";import{d as u,w as c,a3 as p,G as d,H as g,u as h,o as v,I as w}from"./@vue.DQUdVfVE1762224880399.js";const j={key:0},x=["object"],S=["object"],y=u({__name:"reflectorShaderMesh",props:{reflectivity:{default:.2},mirror:{default:.1},mixStrength:{default:9},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},setup(u){const y=u,{scene:b}=s(),{textures:M,isLoading:_}=a(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/concrete_wet_floor_normal.jpg"]);let R=null,G=null,H=null;return c([M,_],([s,a])=>{if(s&&2===s.length&&!a){s[0].wrapS=e,s[0].wrapT=e,s[1].wrapS=e,s[1].wrapT=e;const a=new f;R=new n({reflectivity:y.reflectivity,mirror:y.mirror,mixStrength:y.mixStrength,color:new o(y.color),map:s[0],normalMap:s[1],normalScale:new r(5,5),fog:b.value.fog,dithering:!0}),R.uniforms.tReflect=a.renderTargetUniform,R.uniforms.uMatrix=a.textureMatrixUniform;const u=new t(10,10);G=new i(u,R),G.name="reflectorShaderMesh",G.position.y=-.01,G.rotation.x=-Math.PI/2,G.add(a),G.onBeforeRender=(e,r,o)=>{G.visible=!1,m(r),a.update(e,r,o),m(r,!1),G.visible=!0},H=new l(9.5,10),H.visible=y.showGridHelper}}),p(()=>{y.reflectivity&&R&&(R.uniforms.uReflectivity.value=y.reflectivity),y.mirror&&R&&(R.uniforms.uMirror.value=y.mirror),y.mixStrength&&R&&(R.uniforms.uMixStrength.value=y.mixStrength),y.color&&R&&(R.uniforms.uColor.value=new o(y.color))}),c(()=>y.showGridHelper,e=>{H.visible=e}),(e,r)=>h(_)?g("",!0):(v(),d("TresGroup",j,[w("primitive",{object:h(G)},null,8,x),w("primitive",{object:h(H),position:[0,.01,0]},null,8,S)]))}});export{y as _};

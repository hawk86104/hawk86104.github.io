import{a6 as t,h as n}from"./three.eXhPIzTa1723718122052.js";import{p as e}from"./@tresjs.GO-cpSrO1723718122052.js";import{d as o,P as a}from"./@pmndrs.s9IQpSZs1723718122052.js";import{d as r,b as s,w as i,a1 as c,o as u,D as l,J as f,aj as p,ak as d}from"./@vue.Q1VpS3901723718122052.js";const h=g;!function(t,n){const e=g,o=M();for(;;)try{if(476488===-parseInt(e(205))/1*(-parseInt(e(189))/2)+-parseInt(e(149))/3+parseInt(e(185))/4*(parseInt(e(206))/5)+parseInt(e(208))/6+parseInt(e(179))/7*(parseInt(e(162))/8)+parseInt(e(175))/9+-parseInt(e(139))/10)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const m=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[g(128)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){m(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(168),"i"),o=z(t(132));n[t(155)](o+t(152))&&e.test(o+"input")?z():o("0")}))()}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[g(128)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(t,n){const e=M();return(g=function(t,n){return e[t-=126]})(t,n)}function M(){const t=["stateObject","lightPosition","height","call","TresMesh","2338380nkjctR","toString","DirectionalLight","chain","gger","frames","test","Vector3","bias","update","shadows render end","shadows render start","opacity","117344dIhDZC","string","exception","console","cos","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresPlaneGeometry","children","ambient","constructor","progressiveLightMap2","debu","2489328BdJewu","intensity","texture","blend","273CPrEMj","amount","radius","rotate-x","return (function() ","material","16204bsKjak","trace","position","Group","10LvIFEm","table","TresSoftShadowMaterial","camera","mapSize","alphaTest","randFloatSpread","MathUtils","value","shadow","acos","remove","length","sin","action","log","109343HEkgPF","1000tWNefB","random","5425812DnsOvb","size","prototype","#000000","apply","blendWindow","abs","near","init","color","bottom","far","bind","info","set","18539130LMnzYE","top","clear","left","prepare"];return(M=function(){return t})()}w(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(183)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(165)]||{},o=[t(204),"warn",t(137),"error",t(164),t(190),t(186)];for(let a=0;a<o[t(201)];a++){const n=w[t(172)][t(126)][t(136)](w),r=o[a],s=e[r]||n;n.__proto__=w[t(136)](w),n[t(150)]=s[t(150)][t(136)](s),e[r]=n}}))();const b=[h(182)],y=f(h(169),{args:[1,1]},null,-1),I=r({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:h(127)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=h,w=r;let g=s();const{extend:M,scene:I,renderer:z,camera:P}=e();M({SoftShadowMaterial:o});const v={position:(new(t[m(156)]))[m(138)](w[m(145)].x,w[m(145)].y,w.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new a(z[m(197)],I.value,v[m(193)]),S={map:x[m(173)][m(177)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:w[m(178)],alphaTest:w[m(194)],opacity:w.opacity,color:w[m(133)]},j=new(t[m(188)]);for(let n=0;n<v[m(180)];n++){const n=new(t[m(151)])(16777215,v[m(176)]/v[m(180)]);n.castShadow=!0,n[m(198)][m(157)]=v[m(157)],n[m(198)][m(192)][m(131)]=v[m(131)],n[m(198)][m(192)][m(135)]=v[m(135)],n[m(198)][m(192)].right=v.size/2,n[m(198)][m(192)][m(142)]=-v[m(209)]/2,n[m(198)][m(192)][m(140)]=v[m(209)]/2,n.shadow.camera[m(134)]=-v[m(209)]/2,n[m(198)].mapSize.width=v.mapSize,n[m(198)][m(193)][m(146)]=v[m(193)],j.add(n)}const _=()=>{const e=m,o=v[e(187)][e(201)]();for(let a=0;a<j[e(170)].length;a++){const r=j[e(170)][a];if(Math[e(207)]()>w[e(171)])r[e(187)][e(138)](v.position.x+t[e(196)][e(195)](v[e(181)]),v[e(187)].y+t[e(196)][e(195)](v[e(181)]),v.position.z+n[e(195)](v[e(181)]));else{let t=Math[e(199)](2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math[e(207)]();r[e(187)][e(138)](Math[e(166)](t)*Math[e(166)](n)*o,Math[e(130)](Math[e(166)](t)*Math[e(202)](n)*o),Math[e(202)](t)*o)}}},k=(t=1)=>{const n=m;I[n(197)].add(j),x[n(143)]();for(let e=0;e<t;e++)_(),x[n(158)](P[n(197)],w.blendWindow),console[n(204)]("shadows plm update",e);I[n(197)][n(200)](j),x.finish()};i((()=>g[m(197)]),(t=>{const n=m;t&&(x.configure(t),x[n(141)](),console[n(204)](n(160)),k(w[n(154)]),console[n(204)](n(159)))}));const E=()=>{const t=m;x[t(141)](),k(w[t(154)])};return c((()=>{const t=m;g[t(197)]&&(w[t(161)]&&(g[t(197)].material[t(161)]=w[t(161)]),w[t(194)]&&(g[t(197)][t(184)][t(194)]=w[t(194)]),w[t(133)]&&g.value[t(184)][t(133)].set(w[t(133)]),w[t(178)]&&(g.value[t(184)].blend=w[t(178)]))})),i((()=>w[m(145)]),(t=>{const n=m;t&&(console.log(w.lightPosition),v[n(187)][n(138)](t.x,t.y,t.z),E())}),{deep:!0}),i((()=>[w[m(154)],w[m(129)],w[m(171)]]),(()=>{E()})),(t,n)=>{const e=m;return u(),l(e(148),{"receive-shadow":"",ref_key:"gPlane",ref:g,scale:10,"rotate-x":-Math.PI/2},[y,f(e(191),p(d(S)),null,16)],8,b)}}});function z(t){function n(t){const e=g;if(typeof t===e(163))return function(t){}.constructor(e(167))[e(128)]("counter");1!==(""+t/t)[e(201)]||t%20==0?function(){return!0}[e(172)](e(174)+e(153))[e(147)](e(203)):function(){return!1}.constructor(e(174)+e(153))[e(128)](e(144)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

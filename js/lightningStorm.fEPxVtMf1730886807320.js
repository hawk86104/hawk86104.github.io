import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.PyrSVCQ11730886807320.js";import{B as i,V as s,cq as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three._P_a_E_Z1730886807320.js";import{e as l,f as p,F as d}from"./@tresjs.iUmyNPdW1730886807320.js";import{c as m}from"./simplex-noise.Yx8GBgKo1730886807320.js";import{d as f,a3 as g,o as y,D as b,u as v,r as S,j as w,g as _,m as x,F as P}from"./@vue.-THQH3GC1730886807320.js";import"./index.zjMoND331730886807320.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.qUlfFylV1730886807320.js";import"./three-custom-shader-material.-r7dCNA-1730886807320.js";import"./@vueuse.Uoe2bW0Q1730886807320.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.vwzCU7Ru1730886807320.js";import"./all.three.Tqp1MSK71730886807320.js";import"./oimophysics.x0jH7fze1730886807320.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.yme4K4Qp1730886807320.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.gv5A03N01730886807320.js";import"./index.xgqHHD_Y1730886807320.js";import"./three-stdlib.-Lz596Q01730886807320.js";import"./@pmndrs.wWpbS2XU1730886807320.js";import"./object-hash.rH2Wt7qx1730886807320.js";import"./@amap.T-fZ7qS81730886807320.js";import"./jszip._dv5DHfD1730886807320.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.A6U1VkhS1730886807320.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.J-kHX_gc1730886807320.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.3NZVIIOZ1730886807320.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.eHBCZn-81730886807320.js";const M=F;!function(t,i){const s=F,n=D();for(;;)try{if(847912===parseInt(s(449))/1+parseInt(s(447))/2*(-parseInt(s(505))/3)+parseInt(s(563))/4+-parseInt(s(470))/5*(parseInt(s(518))/6)+-parseInt(s(488))/7*(-parseInt(s(595))/8)+parseInt(s(540))/9+parseInt(s(519))/10*(-parseInt(s(460))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(525)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(){const t=["raySegments","exception","forwards","randomGenerator","RAY_EXTINGUISHED","multiplyScalar","minRadius","chain","radius1Factor","currentCoordinate","currentSubray","createMesh","simplexX","indices","currentSegmentCallback","info","RAY_INITIALIZED","test","setSeed","length","forwardsFill","positionVariationFactor","8FAGsxt","string","isEternal","call","maxSubrays","simplexY","createPrismFaces","updateMesh","trace","sub","createRandomGenerator","push","setAttribute","RAY_UNBORN","bind","init","pow","endPropagationTime","subrays","subrayConePosition","pos1","add","set","linPos0","getSeed","addNewSubray","usage","prototype","seed","action","state","888058efZYDk","radius0Factor","1442559VbMMwT","rayParameters","radius1","vanishingTimeFactor","uvsAttribute","vPos","onSubrayCreation","sin","initSubray","onDecideSubrayCreation","middleLinPos","4939JHTHGY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","up0","subrayPeriod","maxIterations","iteration","RAY_VANISHING","subVectors","createSegment","roughness","580ghSqAa","maxSubrayRecursion","fractalRayRecursive","ramification","simplexZ","positionAttribute","propagationTimeFactor","isLightningStrike","random","copyParameters","seedGenerator","cross1","birthTime","currentSegmentIndex","while (true) {}","currentSeed","update","log","3591021MiJjQH","console","fractalRay","generateUVs","deathTime","middlePos","counter","isStatic","createTriangleVerticesWithoutUVs","vertices","drawRange","createPrism","newPos","isInitialSegment","subrayDutyCycle","up1","SIN30DEG","3peajmX","radius0","COS30DEG","RAY_PROPAGATING","__proto__","fraction1","stateObject","pos0","min","max","index","getNewSegment","destOffset","19728ZjqDXq","24390PrDlVI","array","normalize","crossVectors","maxRaySegments","cos","apply","debu","straightness","noiseSeed","clone","error","visible","constructor","currentUVCoordinate","time","subrayCylinderPosition","createTriangleVerticesWithUVs","sourceOffset","createDefaultSubrayCreationCallbacks","side","6493491LzYmuI","RAY_STEADY","numSubrays","linPos1","currentCreateTriangleVertices","uvs","currentVertex","recursion","position","function *\\( *\\)","count","timeFraction","fraction0",'{}.constructor("return this")( )',"copy","gger","timeScale","lerp","return (function() ","toString","floor","lerpVectors","beginVanishingTime","365596FMkmPb","warn","fillMesh","currentIndex","ceil","needsUpdate","createSubray","down","recursionProbability","setIndex"];return(D=function(){return t})()}function F(t,i){const s=D();return(F=function(t,i){return s[t-=417]})(t,i)}!function(){T(this,(function(){const t=F,i=new RegExp(t(549)),s=new RegExp(t(461),"i"),n=C("init");i[t(590)](n+t(580))&&s[t(590)](n+"input")?C():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(525)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=F;let i;try{i=Function(t(558)+t(553)+");")()}catch(e){i=window}const s=i[t(489)]=i[t(489)]||{},n=[t(487),t(564),t(588),t(530),t(574),"table",t(424)];for(let r=0;r<n[t(592)];r++){const i=A.constructor[t(443)][t(430)](A),e=n[r],o=s[e]||i;i[t(509)]=A[t(430)](A),i[t(559)]=o[t(559)][t(430)](o),s[e]=i}}))();class R extends i{constructor(t={}){const i=F;super(),this[i(477)]=!0,this.type="LightningStrike",this[i(431)](R[i(479)](t,t)),this[i(584)]()}static createRandomGenerator(){const t=F,i=2053,s=[];for(let e=0;e<i;e++)s[t(427)](Math[t(478)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(485)]];return n[e(485)]=(n[e(485)]+1)%i,r},getSeed:function(){return n[t(485)]/i},setSeed:function(t){n.currentSeed=Math.floor(t*i)%i}};return n}static[M(479)](t={},i={}){const n=M,e=function(s){return i===t?s:s[F(529)]()};return t[n(537)]=void 0!==i[n(537)]?e(i.sourceOffset):new s(0,100,0),t.destOffset=void 0!==i[n(517)]?e(i[n(517)]):new s(0,0,0),t.timeScale=void 0!==i[n(556)]?i[n(556)]:1,t[n(469)]=void 0!==i[n(469)]?i.roughness:.9,t.straightness=void 0!==i[n(527)]?i[n(527)]:.7,t[n(462)]=void 0!==i[n(462)]?e(i[n(462)]):new s(0,0,1),t[n(503)]=void 0!==i.up1?e(i[n(503)]):new s(0,0,1),t[n(506)]=void 0!==i[n(506)]?i.radius0:1,t.radius1=void 0!==i[n(451)]?i.radius1:1,t[n(448)]=void 0!==i.radius0Factor?i.radius0Factor:.5,t[n(581)]=void 0!==i[n(581)]?i[n(581)]:.2,t[n(579)]=void 0!==i[n(579)]?i[n(579)]:.2,t[n(418)]=void 0!==i[n(418)]?i[n(418)]:void 0===i[n(482)]||void 0===i[n(492)],t[n(482)]=i[n(482)],t[n(492)]=i[n(492)],t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i[n(476)]:.1,t[n(452)]=void 0!==i.vanishingTimeFactor?i.vanishingTimeFactor:.9,t[n(463)]=void 0!==i.subrayPeriod?i[n(463)]:4,t[n(502)]=void 0!==i[n(502)]?i[n(502)]:.6,t[n(464)]=void 0!==i[n(464)]?i[n(464)]:9,t[n(495)]=void 0!==i.isStatic&&i[n(495)],t[n(473)]=void 0!==i[n(473)]?i[n(473)]:5,t[n(471)]=void 0!==i.maxSubrayRecursion?i[n(471)]:3,t[n(571)]=void 0!==i[n(571)]?i.recursionProbability:.6,t.generateUVs=void 0!==i.generateUVs&&i.generateUVs,t[n(576)]=i[n(576)],t[n(528)]=i.noiseSeed,t[n(458)]=i.onDecideSubrayCreation,t[n(455)]=i[n(455)],t}[M(486)](t){const i=M;this.isStatic||(this[i(450)].isEternal||this.rayParameters[i(482)]<=t&&t<=this[i(450)][i(492)]?(this[i(423)](t),t<this[i(434)][0][i(433)]?this.state=R.RAY_PROPAGATING:t>this[i(434)][0][i(562)]?this.state=R[i(466)]:this[i(446)]=R[i(541)],this.visible=!0):(this[i(531)]=!1,t<this.rayParameters[i(482)]?this[i(446)]=R[i(429)]:this[i(446)]=R[i(577)]))}[M(431)](t){const i=M;this.rayParameters=t,this.maxIterations=void 0!==t[i(464)]?Math[i(560)](t[i(464)]):9,t[i(464)]=this[i(464)],this[i(495)]=void 0!==t.isStatic&&t[i(495)],t[i(495)]=this[i(495)],this.ramification=void 0!==t[i(473)]?Math[i(560)](t[i(473)]):5,t[i(473)]=this[i(473)],this[i(471)]=void 0!==t[i(471)]?Math[i(560)](t[i(471)]):3,t[i(471)]=this.maxSubrayRecursion,this[i(571)]=void 0!==t[i(571)]?t[i(571)]:.6,t[i(571)]=this[i(571)],this.generateUVs=void 0!==t[i(491)]&&t[i(491)],t[i(491)]=this[i(491)],void 0!==t.randomGenerator?(this[i(576)]=t[i(576)],this[i(480)]=t[i(576)],void 0!==t[i(528)]&&this[i(480)].setSeed(t[i(528)])):(this[i(576)]=R[i(426)](),this.seedGenerator=Math),void 0!==t[i(458)]?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this[i(538)](),void 0!==t[i(455)]&&(this[i(455)]=t[i(455)])),this[i(446)]=R.RAY_INITIALIZED,this[i(420)]=Math[i(567)](1+Math.pow(this.ramification,Math.max(0,this[i(471)]-1))),t[i(420)]=this[i(420)],this[i(523)]=2*(1<<this[i(464)]),this.subrays=[];for(let s=0;s<this[i(420)];s++)this[i(434)].push(this[i(569)]());this.raySegments=[];for(let s=0;s<this[i(523)];s++)this[i(573)][i(427)](this[i(468)]());this[i(534)]=0,this.timeFraction=0,this[i(587)]=null,this[i(544)]=this.generateUVs?this.createTriangleVerticesWithUVs:this[i(496)],this[i(542)]=0,this[i(583)]=null,this[i(483)]=0,this.isInitialSegment=!1,this.subrayProbability=0,this[i(546)]=0,this.currentIndex=0,this[i(582)]=0,this[i(533)]=0,this[i(497)]=null,this[i(545)]=null,this[i(586)]=null,this.positionAttribute=null,this[i(453)]=null,this[i(585)]=m(this.seedGenerator[i(478)]),this.simplexY=m(this[i(480)][i(478)]),this[i(474)]=m(this[i(480)][i(478)]),this[i(575)]=new s,this[i(593)]=new s,this[i(539)]=new s,this[i(570)]=new s,this[i(493)]=new s,this[i(459)]=new s,this[i(500)]=new s,this[i(454)]=new s,this.cross1=new s}[M(584)](){const t=M,i=1<<this[t(464)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(420)];this[t(497)]=new Float32Array(3*s),this[t(586)]=new Uint32Array(o),this[t(491)]&&(this.uvs=new Float32Array(2*s)),this.fillMesh(0),this[t(572)](new n(this.indices,1)),this.positionAttribute=new e(this[t(497)],3),this[t(428)](t(548),this[t(475)]),this[t(491)]&&(this.uvsAttribute=new e(new Float32Array(this.uvs),2),this[t(428)]("uv",this[t(453)])),!this[t(495)]&&(this.index[t(442)]=r,this[t(475)].usage=r,this[t(491)]&&(this[t(453)][t(442)]=r)),this[t(497)]=this[t(475)][t(520)],this[t(586)]=this[t(515)][t(520)],this[t(491)]&&(this[t(545)]=this.uvsAttribute[t(520)])}[M(423)](t){const i=M;this[i(565)](t),this[i(498)][i(550)]=this[i(566)],this[i(515)][i(568)]=!0,this[i(475)][i(568)]=!0,this[i(491)]&&(this[i(453)][i(568)]=!0)}[M(565)](t){const i=M,s=this;this[i(546)]=0,this[i(566)]=0,this.currentCoordinate=0,this[i(533)]=0,this[i(490)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(482)]||(this.rayParameters[e(418)]&&0==s[e(583)][e(547)]?(s[e(499)](n),s.onDecideSubrayCreation(n,s)):t<r[e(433)]?s[e(551)]>=n[e(552)]*r.propagationTimeFactor&&(s[e(499)](n),s.onDecideSubrayCreation(n,s)):t<r.beginVanishingTime?(s.createPrism(n),s.onDecideSubrayCreation(n,s)):(s[e(551)]<=r.vanishingTimeFactor+n[e(510)]*(1-r[e(452)])&&s.createPrism(n),s[e(458)](n,s)))}))}[M(441)](){const t=M;return this.subrays[this[t(542)]++]}[M(457)](t,i){const s=M;t.pos0[s(554)](i[s(537)]),t[s(436)].copy(i.destOffset),t[s(462)].copy(i[s(462)]),t.up1[s(554)](i[s(503)]),t.radius0=i[s(506)],t[s(451)]=i[s(451)],t.birthTime=i.birthTime,t[s(492)]=i.deathTime,t[s(556)]=i[s(556)],t[s(469)]=i[s(469)],t[s(527)]=i.straightness,t[s(476)]=i[s(476)],t[s(452)]=i[s(452)],t[s(464)]=this[s(464)],t.seed=void 0!==i[s(528)]?i[s(528)]:0,t[s(547)]=0}[M(490)](t,i){const s=M;this[s(534)]=t,this.currentSegmentCallback=i,this[s(542)]=0,this.initSubray(this.addNewSubray(),this.rayParameters);for(let n=0;n<this[s(542)];n++){const i=this[s(434)][n];this.currentSubray=i,this[s(576)][s(591)](i[s(444)]),i[s(433)]=o[s(557)](i[s(482)],i[s(492)],i[s(476)]),i[s(562)]=o[s(557)](i[s(492)],i[s(482)],1-i.vanishingTimeFactor);const e=this.randomGenerator[s(478)];i.linPos0[s(438)](e(),e(),e())[s(578)](1e3),i.linPos1[s(438)](e(),e(),e())[s(578)](1e3),this[s(551)]=(t-i[s(482)])/(i[s(492)]-i[s(482)]),this[s(483)]=0,this.isInitialSegment=!0;const r=this[s(516)]();r[s(465)]=0,r[s(512)][s(554)](i[s(512)]),r[s(436)][s(554)](i.pos1),r[s(439)][s(554)](i[s(439)]),r.linPos1.copy(i[s(543)]),r[s(462)][s(554)](i[s(462)]),r[s(503)][s(554)](i[s(503)]),r[s(506)]=i[s(506)],r[s(451)]=i.radius1,r.fraction0=0,r[s(510)]=1,r[s(594)]=1-i[s(527)],this.subrayProbability=this[s(473)]*Math[s(432)](this.recursionProbability,i[s(547)])/(1<<i[s(464)]),this[s(472)](r)}this[s(587)]=null,this[s(583)]=null}fractalRayRecursive(t){const i=M;if(t.iteration>=this[i(583)][i(464)])return void this[i(587)](t);this[i(575)][i(467)](t.pos1,t[i(512)]);let s=this.forwards[i(592)]();s<1e-6&&(this[i(575)][i(438)](0,0,.01),s=this[i(575)][i(592)]());const n=.5*(t.radius0+t[i(451)]),e=.5*(t[i(552)]+t[i(510)]),r=this[i(534)]*this[i(583)][i(556)]*Math.pow(2,t[i(465)]);this[i(493)][i(561)](t[i(512)],t[i(436)],.5),this[i(459)][i(561)](t[i(439)],t[i(543)],.5);const o=this[i(459)];this[i(500)][i(438)](this[i(585)](o.x,o.y,o.z,r),this[i(421)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(500)][i(578)](t[i(594)]*s),this[i(500)][i(437)](this[i(493)]);const a=this[i(516)]();a[i(512)][i(554)](t[i(512)]),a[i(436)][i(554)](this[i(500)]),a[i(439)][i(554)](t[i(439)]),a.linPos1[i(554)](this[i(459)]),a[i(462)].copy(t[i(462)]),a[i(503)][i(554)](t[i(503)]),a[i(506)]=t[i(506)],a[i(451)]=n,a[i(552)]=t[i(552)],a[i(510)]=e,a[i(594)]=t[i(594)]*this[i(583)][i(469)],a[i(465)]=t.iteration+1;const h=this[i(516)]();h[i(512)].copy(this[i(500)]),h[i(436)][i(554)](t[i(436)]),h[i(439)][i(554)](this[i(459)]),h[i(543)][i(554)](t[i(543)]),this[i(481)].crossVectors(t.up0,this[i(575)][i(521)]()),h[i(462)][i(522)](this[i(575)],this.cross1).normalize(),h[i(503)].copy(t[i(503)]),h[i(506)]=n,h[i(451)]=t[i(451)],h.fraction0=e,h[i(510)]=t.fraction1,h[i(594)]=t[i(594)]*this[i(583)][i(469)],h[i(465)]=t.iteration+1,this[i(472)](a),this.fractalRayRecursive(h)}[M(499)](t){const i=M;this[i(593)][i(467)](t[i(436)],t[i(512)])[i(521)](),this[i(501)]&&(this[i(544)](t[i(512)],t[i(462)],this.forwardsFill,t[i(506)],0),this[i(501)]=!1),this.currentCreateTriangleVertices(t.pos1,t[i(462)],this.forwardsFill,t[i(451)],t[i(510)]),this.createPrismFaces()}[M(496)](t,i,s,n){const e=M;this[e(539)][e(522)](i,s)[e(578)](n*R[e(507)]),this.down[e(554)](i).multiplyScalar(-n*R[e(504)]);const r=this.vPos,o=this[e(497)];r[e(554)](t)[e(425)](this[e(539)])[e(437)](this[e(570)]),o[this[e(582)]++]=r.x,o[this[e(582)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(t)[e(437)](this[e(539)])[e(437)](this[e(570)]),o[this[e(582)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r[e(554)](i)[e(578)](n)[e(437)](t),o[this[e(582)]++]=r.x,o[this[e(582)]++]=r.y,o[this[e(582)]++]=r.z,this.currentVertex+=3}[M(536)](t,i,s,n,e){const r=M;this[r(539)][r(522)](i,s)[r(578)](n*R.COS30DEG),this[r(570)][r(554)](i).multiplyScalar(-n*R.SIN30DEG);const o=this[r(454)],a=this[r(497)],h=this[r(545)];o[r(554)](t).sub(this[r(539)])[r(437)](this.down),a[this.currentCoordinate++]=o.x,a[this[r(582)]++]=o.y,a[this[r(582)]++]=o.z,h[this[r(533)]++]=e,h[this[r(533)]++]=0,o[r(554)](t).add(this[r(539)]).add(this.down),a[this[r(582)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(582)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=.5,o.copy(i).multiplyScalar(n)[r(437)](t),a[this[r(582)]++]=o.x,a[this[r(582)]++]=o.y,a[this[r(582)]++]=o.z,h[this[r(533)]++]=e,h[this.currentUVCoordinate++]=1,this[r(546)]+=3}[M(422)](t){const i=M,s=this[i(586)];t=this.currentVertex-6,s[this.currentIndex++]=t+1,s[this[i(566)]++]=t+2,s[this.currentIndex++]=t+5,s[this.currentIndex++]=t+1,s[this[i(566)]++]=t+5,s[this[i(566)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(566)]++]=t+1,s[this[i(566)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(566)]++]=t+4,s[this[i(566)]++]=t+3,s[this[i(566)]++]=t+2,s[this[i(566)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(566)]++]=t+2,s[this[i(566)]++]=t+3,s[this[i(566)]++]=t+5}[M(538)](){const t=M,i=this[t(576)].random;this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(583)],a=n[e(450)][e(463)],h=n[e(450)][e(502)],c=n.rayParameters[e(418)]&&0==r[e(547)]?-i()*a:o[e(557)](r[e(482)],r[e(433)],s[e(552)])-i()*a,u=n[e(534)]-c,l=Math.floor(u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r[e(547)]<n[e(471)]&&n[e(542)]<n[e(420)]&&i()<d){const t=n.addNewSubray(),o=n[e(576)][e(440)]();t[e(444)]=p,n.randomGenerator[e(591)](p),t[e(547)]=r[e(547)]+1,t[e(464)]=Math[e(514)](1,r[e(464)]-1),t[e(439)][e(438)](i(),i(),i())[e(578)](1e3),t.linPos1[e(438)](i(),i(),i()).multiplyScalar(1e3),t[e(462)].copy(r[e(462)]),t[e(503)][e(554)](r[e(503)]),t[e(506)]=s[e(506)]*n.rayParameters[e(448)],t[e(451)]=Math[e(513)](n[e(450)][e(579)],s[e(451)]*n[e(450)][e(581)]),t[e(482)]=c+l*a,t[e(492)]=t[e(482)]+a*h,!n.rayParameters[e(418)]&&0==r.recursion&&(t[e(482)]=Math.max(t[e(482)],r.birthTime),t[e(492)]=Math[e(513)](t[e(492)],r[e(492)])),t.timeScale=2*r[e(556)],t[e(469)]=r[e(469)],t[e(527)]=r[e(527)],t[e(476)]=r.propagationTimeFactor,t[e(452)]=r.vanishingTimeFactor,n[e(455)](s,r,t,n),n[e(576)][e(591)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(455)]=function(i,s,n,e){e[t(535)](i,s,n,.5,.6,.2)},this[t(435)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(554)](s[p(512)]),n[p(467)](o[p(436)],o.pos0),e.copy(n)[p(521)](),n[p(578)](s.fraction0+(1-s.fraction0)*(i()*c));const d=n[p(592)]();r.crossVectors(o[p(462)],e);const m=2*Math.PI*i();r[p(578)](Math[p(524)](m)),a[p(554)](o[p(462)])[p(578)](Math.sin(m)),h[p(436)][p(554)](r)[p(437)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(437)](n)[p(437)](o.pos0)},this[t(535)]=function(s,o,h,c,u,l){const p=t;h[p(512)][p(554)](s[p(512)]),n.subVectors(o[p(436)],o[p(512)]),e.copy(n)[p(521)](),n[p(578)](s[p(552)]+(1-s[p(552)])*((2*i()-1)*c));const d=n.length();r[p(522)](o.up0,e);const m=2*Math.PI*i();r[p(578)](Math[p(524)](m)),a.copy(o[p(462)])[p(578)](Math[p(456)](m)),h[p(436)][p(554)](r)[p(437)](a)[p(578)](d*u*(l+i()*(1-l)))[p(437)](n).add(o[p(512)])}}[M(569)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(468)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(516)](){return this[M(573)][this.currentSegmentIndex++]}[M(554)](t){const i=M;return super.copy(t),this[i(431)](R.copyParameters({},t.rayParameters)),this}[M(529)](){const t=M;return new(this[t(532)])(R[t(479)]({},this.rayParameters))}}function C(t){function i(t){const s=F;if(typeof t===s(417))return function(t){}[s(532)](s(484))[s(525)](s(494));1!==(""+t/t)[s(592)]||t%20==0?function(){return!0}[s(532)](s(526)+s(555))[s(419)](s(445)):function(){return!1}[s(532)](s(526)+s(555))[s(525)](s(511)),i(++t)}try{if(t)return i;i(0)}catch(s){}}R[M(589)]=0,R[M(429)]=1,R[M(508)]=2,R.RAY_STEADY=3,R[M(466)]=4,R.RAY_EXTINGUISHED=5,R.COS30DEG=Math[M(524)](30*Math.PI/180),R[M(504)]=Math[M(456)](30*Math.PI/180);const V=G;function j(){const t=["757168rYJmws","length","onLightningDown","isEternal","splice","minHeight","lightningMaterial","console","random","stateObject","nextLightningTime","table","size","test","lerp","stormParams","multiplyScalar","sourceOffset","935190ERKvgd","while (true) {}","lightningMinDuration",'{}.constructor("return this")( )',"getNextLightningTime","push","trace","warn","apply","copy","init","824sygmtt","indexOf","lightningMaxPeriod","noiseSeed","984537eWedTN","216250DRFpbW","inited","lightningParameters","prototype","bind","geometry","maxSlope","maxHeight","6398dnhHqV","4736WvDLHB","lightningMinPeriod","constructor","state","toString","deadLightningsMeshes","birthTime","action","RAY_PROPAGATING","lightningsMeshes","deathTime","counter","onRayPosition","info","remove","call","copyParameters","1214892ChLMdM","lightningMaxDuration","add","10HjXVKy","gger","string","rayParameters","error","update","debu","exception","log","maxLightnings","121eLCYWp"];return(j=function(){return t})()}function G(t,i){const s=j();return(G=function(t,i){return s[t-=450]})(t,i)}!function(t,i){const s=G,n=j();for(;;)try{if(358475===parseInt(s(460))/1*(-parseInt(s(504))/2)+parseInt(s(479))/3+parseInt(s(461))/4+-parseInt(s(495))/5+parseInt(s(521))/6+parseInt(s(503))/7*(parseInt(s(490))/8)+parseInt(s(494))/9*(-parseInt(s(450))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(487)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=G,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=L(t(489));i[t(474)](n+"chain")&&s[t(474)](n+"input")?L():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(487)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();z(void 0,(function(){const t=G;let i;try{i=Function("return (function() "+t(482)+");")()}catch(e){i=window}const s=i[t(468)]=i[t(468)]||{},n=[t(458),t(486),t(517),t(454),t(457),t(472),t(485)];for(let r=0;r<n[t(462)];r++){const i=z[t(506)][t(498)].bind(z),e=n[r],o=s[e]||i;i.__proto__=z[t(499)](z),i.toString=o[t(508)][t(499)](o),s[e]=i}}))();class E extends a{constructor(t={}){const i=G;super(),this.isLightningStorm=!0,this.stormParams=t,t[i(473)]=void 0!==t[i(473)]?t[i(473)]:1e3,t[i(466)]=void 0!==t[i(466)]?t.minHeight:80,t[i(502)]=void 0!==t[i(502)]?t[i(502)]:100,t[i(501)]=void 0!==t[i(501)]?t[i(501)]:1.1,t[i(459)]=void 0!==t[i(459)]?t.maxLightnings:3,t[i(505)]=void 0!==t[i(505)]?t[i(505)]:3,t[i(492)]=void 0!==t[i(492)]?t[i(492)]:7,t[i(481)]=void 0!==t.lightningMinDuration?t.lightningMinDuration:1,t[i(522)]=void 0!==t.lightningMaxDuration?t[i(522)]:2.5,this[i(497)]=R.copyParameters(t.lightningParameters,t[i(497)]),this[i(497)][i(464)]=!1,this[i(467)]=void 0!==t.lightningMaterial?t[i(467)]:new h({color:11599871}),void 0!==t[i(516)]?this[i(516)]=t[i(516)]:this[i(516)]=function(s,n){const e=i;n.set((Math.random()-.5)*t.size,0,(Math[e(469)]()-.5)*t[e(473)]);const r=o[e(475)](t[e(466)],t[e(502)],Math[e(469)]());s.set(t[e(501)]*(2*Math[e(469)]()-1),1,t.maxSlope*(2*Math[e(469)]()-1))[e(477)](r)[e(523)](n)},this.onLightningDown=t[i(463)],this[i(496)]=!1,this[i(471)]=0,this[i(513)]=[],this[i(509)]=[];for(let s=0;s<this[i(476)].maxLightnings;s++){const t=new R(R.copyParameters({},this[i(497)])),s=new c(t,this.lightningMaterial);this[i(509)].push(s)}}[V(455)](t){const i=V;if(!this[i(496)]&&(this[i(471)]=this[i(483)](t)*Math.random(),this[i(496)]=!0),t>=this.nextLightningTime){const s=this[i(509)].pop();if(s){const n=R[i(520)](s[i(500)][i(453)],this[i(497)]);n[i(510)]=t,n[i(514)]=t+o[i(475)](this[i(476)].lightningMinDuration,this.stormParams[i(522)],Math[i(469)]()),this[i(516)](n[i(478)],n.destOffset),n[i(493)]=Math.random(),this[i(523)](s),this[i(513)][i(484)](s)}this[i(471)]=this[i(483)](t)}let s=0,n=this[i(513)].length;for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(500)],o=r[i(507)];r.update(t),o===R[i(512)]&&r.state>o&&this.onLightningDown&&this[i(463)](r),r[i(507)]===R.RAY_EXTINGUISHED?(this[i(513)][i(465)](this[i(513)][i(491)](e),1),this[i(509)].push(e),this[i(518)](e),n--):s++}}[V(483)](t){const i=V;return t+o.lerp(this[i(476)].lightningMinPeriod,this.stormParams[i(492)],Math[i(469)]())/(this[i(476)][i(459)]+1)}[V(488)](t,i){const s=V;return super[s(488)](t,i),this[s(476)].size=t[s(476)][s(473)],this.stormParams[s(466)]=t[s(476)][s(466)],this.stormParams[s(502)]=t[s(476)][s(502)],this.stormParams[s(501)]=t.stormParams[s(501)],this[s(476)][s(459)]=t[s(476)][s(459)],this[s(476)][s(505)]=t[s(476)][s(505)],this[s(476)][s(492)]=t.stormParams[s(492)],this[s(476)][s(481)]=t.stormParams.lightningMinDuration,this[s(476)][s(522)]=t[s(476)][s(522)],this.lightningParameters=R[s(520)]({},t[s(497)]),this.lightningMaterial=t.stormParams[s(467)],this[s(463)]=t[s(463)],this}clone(){const t=V;return new(this[t(506)])(this.stormParams)[t(488)](this)}}function L(t){function i(t){const s=G;if(typeof t===s(452))return function(t){}[s(506)](s(480))[s(487)](s(515));1!==(""+t/t)[s(462)]||t%20==0?function(){return!0}[s(506)]("debu"+s(451))[s(519)](s(511)):function(){return!1}.constructor(s(456)+s(451))[s(487)](s(470)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=k;!function(t,i){const s=k,n=Y();for(;;)try{if(300979===-parseInt(s(192))/1+-parseInt(s(168))/2*(parseInt(s(142))/3)+parseInt(s(156))/4*(-parseInt(s(157))/5)+parseInt(s(176))/6*(-parseInt(s(186))/7)+parseInt(s(161))/8*(-parseInt(s(180))/9)+parseInt(s(175))/10*(-parseInt(s(151))/11)+parseInt(s(185))/12*(parseInt(s(177))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(164)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=k,i=new RegExp(t(150)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=W(t(165));i[t(189)](n+"chain")&&s[t(189)](n+t(153))?W():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(164)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(){const t=["length","copy","2316Opkmhs","196HythEF","radius1","subrayConePosition","test","lightStorm","table","166087ehRDAP","info","size","bind","subrayPeriod","__proto__","counter","maxHeight","maxLightnings","console","subrayDutyCycle","return (function() ","exception","constructor","timeScale","error","action","1528557XiGYjK","addVectors","radius0","string","Vector3","toString","subVectors","call","function *\\( *\\)","22DJAGFu","roughness","input","while (true) {}","set","63392GNLTTU","85tDmpeW","minHeight","debu","gger","80WhGPrB","Color","MeshBasicMaterial","apply","init","rayParameters","update","2BaeZZI","color","trace","warn","#b0ffff","multiplyScalar","pos1","2357830yJOdJc","13404gMtQky","139919UJPioC","dot","sourceOffset","267426PveflM","stormParams","straightness"];return(Y=function(){return t})()}U(void 0,(function(){const t=k;let i;try{i=Function(t(203)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i.console=i[t(201)]||{},n=["log",t(171),t(193),t(207),t(204),t(191),t(170)];for(let r=0;r<n.length;r++){const i=U[t(205)].prototype[t(195)](U),e=n[r],o=s[e]||i;i[t(197)]=U.bind(U),i[t(147)]=o[t(147)][t(195)](o),s[e]=i}}))();const Z=["object"];function k(t,i){const s=Y();return(k=function(t,i){return s[t-=142]})(t,i)}const J=f({__name:O(190),props:{color:{default:O(172)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,s=t,n=new(u[i(162)])(s[i(169)]),e=new(u[i(163)])({color:n}),r=new(u[i(146)])(0,-1,0);let o=0;const a=new(u[i(146)]),h=new(u[i(146)]),c={roughness:s[i(152)],straightness:s[i(182)],radius0:s.radius0,radius1:s.radius1,timeScale:s[i(206)],subrayPeriod:s[i(196)],subrayDutyCycle:s[i(202)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e[c(188)](t,s,n,.6,.6,.5),o=e[c(166)].sourceOffset.y,a[c(148)](n[c(174)],e[c(166)][c(179)]);const u=r[c(178)](a);h[c(184)](r)[c(173)](u),a.sub(h);const l=u/o>.5?o/u:1;h[c(173)](l),a.add(h),n[c(174)][c(143)](a,e[c(166)][c(179)])}},p=new E({size:s[i(194)],minHeight:s[i(158)],maxHeight:s[i(199)],maxSlope:.6,maxLightnings:s[i(200)],lightningParameters:c,lightningMaterial:e});g((()=>{const t=i,n=p[t(181)];n[t(194)]=s[t(194)],n[t(158)]=s[t(158)],n[t(199)]=s[t(199)],e[t(169)][t(155)](s[t(169)]),c[t(152)]=s[t(152)],c.straightness=s.straightness,c[t(144)]=s[t(144)],c[t(187)]=s.radius1,c[t(206)]=s[t(206)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{p[i(167)](t)})),(t,i)=>(y(),b("primitive",{object:v(p),renderOrder:9999},null,8,Z))}});function W(t){function i(t){const s=k;if(typeof t===s(145))return function(t){}[s(205)](s(154))[s(164)](s(198));1!==(""+t/t)[s(183)]||t%20==0?function(){return!0}[s(205)](s(159)+"gger")[s(149)](s(208)):function(){return!1}[s(205)](s(159)+s(160))[s(164)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function X(){const t=["直度度","177796FoyDUR","8538112yBMGpZ","radius0","counter","console","call","radius1","string","action","stateObject","1802010SMnGDq","#92399e","return (function() ","105DJDFzN","粗糙度","exception","gger","__proto__","9208UpFWJf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","9YWhuHQ","minHeight","chain","12iEIHxm","toString","bind","color","value","input","error","203916uGiTRE","1913405PbLFcJ",'{}.constructor("return this")( )',"trace","roughness","info","13914LLAOtT","apply","constructor","test","length","#ffbde7","时间缩放","18456410NOtKbg","timeScale","#6f6f6f","端部半径","warn","straightness"];return(X=function(){return t})()}!function(t,i){const s=q,n=X();for(;;)try{if(950888===-parseInt(s(155))/1*(parseInt(s(165))/2)+parseInt(s(198))/3*(parseInt(s(185))/4)+-parseInt(s(166))/5*(-parseInt(s(158))/6)+parseInt(s(195))/7+-parseInt(s(152))/8*(parseInt(s(171))/9)+parseInt(s(178))/10+-parseInt(s(186))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){$(this,(function(){const t=q,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(153),"i"),n=Q("init");i.test(n+t(157))&&s[t(174)](n+t(163))?Q():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=X();return(q=function(t,i){return s[t-=152]})(t,i)}B(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(197)+t(167)+");")()}catch(s){i=window}return i}(),s=i[t(189)]=i[t(189)]||{},n=["log",t(182),t(170),t(164),t(200),"table",t(168)];for(let e=0;e<n.length;e++){const i=B[t(173)].prototype[t(160)](B),r=n[e],o=s[r]||i;i[t(202)]=B[t(160)](B),i[t(159)]=o.toString[t(160)](o),s[r]=i}}))();const K=f({__name:"lightningStorm",setup(i){const s=q,n=S({cellSize:60,cellThickness:1,cellColor:s(180),sectionColor:s(196),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(176),roughness:{label:s(199),value:.85,min:0,max:1,step:.01},straightness:{label:s(184),value:.65,min:0,max:1,step:.01},radius0:{label:s(181),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(177),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[w(J,{minHeight:v(e)[m(162)],maxHeight:v(r)[m(162)],color:v(o)[m(162)],roughness:v(a)[m(162)],straightness:v(h)[m(162)],radius0:v(c)[m(162)],radius1:v(u).value,timeScale:v(l)[m(162)]},null,8,[m(156),"maxHeight",m(161),m(169),m(183),m(187),m(191),m(179)]),w(v(I),x({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(d))],64)}}});function Q(t){function i(t){const s=q;if(typeof t===s(192))return function(t){}.constructor("while (true) {}")[s(172)](s(188));1!==(""+t/t)[s(175)]||t%20==0?function(){return!0}[s(173)](s(154)+s(201))[s(190)](s(193)):function(){return!1}.constructor(s(154)+"gger")[s(172)](s(194)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

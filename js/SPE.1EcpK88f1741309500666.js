import{_ as t,z as e,cv as i,bO as n,b as s,C as o,d as r,a}from"./three.8tDGqmLF1741309500666.js";const c=d;!function(t,e){const i=d,n=f();for(;;)try{if(680495===-parseInt(i(774))/1+-parseInt(i(585))/2+-parseInt(i(591))/3*(parseInt(i(586))/4)+parseInt(i(875))/5+-parseInt(i(464))/6+parseInt(i(622))/7+parseInt(i(487))/8*(parseInt(i(486))/9))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[d(573)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){h(this,(function(){const t=d,e=new RegExp(t(674)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=m(t(763));e[t(667)](n+t(630))&&i.test(n+t(729))?m():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[d(573)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();l(void 0,(function(){const t=d,e=function(){const t=d;let e;try{e=Function(t(881)+'{}.constructor("return this")( ));')()}catch(i){e=window}return e}(),i=e[t(478)]=e[t(478)]||{},n=[t(473),"warn",t(454),t(693),t(680),t(694),t(660)];for(let s=0;s<n.length;s++){const e=l[t(762)][t(590)].bind(l),o=n[s],r=i[o]||e;e[t(714)]=l[t(460)](l),e[t(747)]=r[t(747)][t(460)](r),i[o]=e}}))();const u={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function f(){const t=["params","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","_assignForceValue","undefined","varying vec4 vColor;","ensureInstanceOf","6341570SjQHHh","_ensureTypedArray","duration","TypedArray is already of size:","SHOULD_WIGGLE_PARTICLES","array","return (function() ","    vec3 accel = getAcceleration( age );","attribute vec4 acceleration;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","_assignAngleValue","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","distributionClamp","normalize","_poolCreationSettings","    highp float alive = getAlive();","updateCounts","depthWrite","runTime","_distributionClamp","gger","_setBufferUpdateRanges","       float s = sin( -vAngle );","depthTest","setColor","deltaTime","    vec3 force = vec3( 0.0 );","shaders","info","removeEmitter","        vSpriteSheet.x = 1.0 / framesX;","ensureTypedArg","radiusScale","       float c = cos(angle);","bind","textureFrameCount","    #ifdef ALPHATEST","velocity","1254876FlijEf","resetUpdateRange","addEmitter","   return acceleration.xyz * age;","mesh","_activateParticles","dispose","        float wiggleAmount = positionInTime * getWiggle();","_radius","log","utils","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","resetDynamic","float when_le(float x, float y) {","console","    gl_PointSize = pointSizePerspective;","defineProperty","    force *= drag;","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","fragment","isStatic","   vec3 c = vec3( 0.0 );","27ntUgmm","3603128iwzqUx","_axis","setUpdateRange","_angle","_updateUniforms","_radiusScale","scale","`emitter` argument must be instance of SPE.Emitter. Was provided with:","Will not resize.","unpackColor","forceUpdateAll","spread","_decrementParticleCount","_calculatePPSValue","setVec4","add","activeMultiplier","attribute vec4 color;","AdditiveBlending","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","Group","_spreadClamp","_assignRotationValue","fog_pars_fragment","_randomise","rotateTexture","tick","_resetBufferRanges","    gl_Position = projectionMatrix * mvPosition;","rotationFunctions","updateFlags","sin","StaticDrawUsage","arrayType","      vec3 axis = unpackRotationAxis( rotation.x );","distributions","randomVector3OnDisc","      vec3 translated;","particleCount","vec3 unpackRotationAxis( in float hex ) {","      }","alive","float or(float a, float b) {","setAttribute","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","group","defines","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","getComponentValueAtIndex","rotationCenter","_createGetterSetters","    highp float value = 0.0;","drag","           unpackColor( color.y ),","    force += accel * age;","rotation","push","maxAge","min","setVec4Components","POSITIVE_INFINITY","_onRemove","particles, can support only","_angleSpread","particlesPerSecond","action","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","TypedArrayHelper","counter","alphaTest","float getMaxAge() {","    float shouldApplyValue = 0.0;","                   0.0,                                0.0,                                0.0,                                1.0);","isArray","acceleration","ensureArrayInstanceOf","getFromPool","BufferGeometry","_triggerSingleEmitter","interpolateArray","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","attributeKeys","activationIndex","vec3 getAcceleration( in float age ) {","randomDirectionVector3OnDisc","vertex","apply","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","usage","ShaderAttribute","        float perspective = scale / length( mvPosition.xyz );","float and(float a, float b) {","   }","attribute vec4 params;","           positionInTime,","indexOf","bufferUpdateKeys","    vec3 value = vec3( 0.0 );","2418352YXoIXw","2252cqSacy","        pos = getRotation( pos, positionInTime );","direction","offset","prototype","6999iXJjnW","BufferAttribute","_updateAttributeUpdateRange","ensureArrayTypedArg","setRGB","       float c = cos( -vAngle );","    #ifdef SHOULD_CALCULATE_SPRITE","age","dynamicBuffer","_attributesNeedDynamicReset","        float framesX = vSpriteSheet.x;","max","_axisSpread","Emitter does not exist in this group. Will not remove.","float getAge() {","_distribution","valueOverLifetimeLength","Vector4","_center","        float framesY = textureAnimation.y;","uuid","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","SPE.Group pool ran out.","getLength","    vec3 outgoingLight = vColor.xyz;","_updateDefines","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","DynamicDrawUsage","resetFlags","function","       float s = sin(angle);","7091917xpzkKC","count","abs","hasOwnProperty","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","object","       float x = gl_PointCoord.x - 0.5;","_assignPositionValue","chain","float when_lt(float x, float y) {","getHex","updateMin","triggerPoolEmitter","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","size","texture","_setAttributeOffset","    vec3 pos = vec3( position );","emitterIDs","    ","distribution","multiplyScalar","        float wiggleSin = isAlive * sin( wiggleAmount );","BOX","setMat3","   float b = mod( hex, PACKED_COLOR_SIZE );","      if( rotation.y == 0.0 ) {","    float pointSizePerspective = pointSize * perspective;","        pos.z += wiggleSin;","SHOULD_ROTATE_TEXTURE","fog","       if ( vColor.w < float(ALPHATEST) ) discard;","random","color","        float columnNorm = column / framesX;","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","setDrawRange","type","trace","           unpackColor( color.w )","NUMBER","Vector2","exports","addPool","itemSize","test","uniform vec4 textureAnimation;","attribute vec4 opacity;","randomFloat","    return max(sign(x - y), 0.0);","string","forceFetchingFunctions","function *\\( *\\)","    return 1.0 - abs( sign( x - y ) );","disable","shrink","    #endif","paramsArray","exception","_assignAbsLifetimeValue","   return velocity * age;","geometry","indexOffset","    highp float isAlive = when_gt( alive, 0.0 );","randomColorAsHex","Texture","bufferAttribute","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","_createNewWhenPoolEmpty","   c.r = r / PACKED_COLOR_DIVISOR;","ceil","error","table","setVec3Components","textureLoop","       vec3 c = vec3(1.0);","randomise","_createBufferAttribute","join","maxParticleCount","textureFrames","grow","componentSize","generateUUID","setFromArray","needsUpdate","   c -= vec3( 1.0 );","    #else","        float totalFrames = textureAnimation.z;","#ifdef SHOULD_ROTATE_PARTICLES","updateRange","flagUpdate","__proto__","arrayValuesAreEqual","fixedTimeStep","lerpTypeAgnostic","attributes","ShaderMaterial","Vector3","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","updateMap","float when_eq( float x, float y ) {","TypedArrayConstructor","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","_incrementParticleCount","Emitter already exists in this group. Will not add again.","_resetParticle","input","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","SHOULD_ROTATE_PARTICLES","        pos.x += wiggleSin;","#endif","      rotationMatrix = getRotationMatrix( axis, angle );","#ifdef SHOULD_CALCULATE_SPRITE","radius","warn","      float angle = 0.0;","amd","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    float fIndex = 0.0;","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","BOOLEAN","MathUtils","    force += vel;","onParticleSpawn","toString","void main() {","vec4 getPosition( in float age ) {","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","attribute vec3 velocity;","    highp float age = getAge();","SPHERE","material","subarray","        float framesX = textureAnimation.x;","   return modelViewMatrix * vec4( position, 1.0 );","keys","ShaderChunk","axisSpread","    pos += force;","constructor","init","copy","_checkParticleAges","roundToNearestMultiple","splice","clone","reset","debu","setVec3","_attributesNeedRefresh","ensureValueOverLifetimeCompliance","220322BTUbtK","    return a * b;","value","getPackedRotationAxis","getPool","        float columnNorm = vSpriteSheet.z;","_assignValue","number","Color","branchAvoidanceFunctions","#ifdef SHOULD_ROTATE_TEXTURE","emitters","       vec3 c = isAlive * getColorOverLifetime(","logdepthbuf_vertex","angle","        float rowNorm = vSpriteSheet.w;","    return value;","    vec3 vel = getVelocity( age );","attribute vec4 rotation;","types","        float rowNorm = row / framesY;","fog_vertex","Emitter already belongs to another group. Will not add to requested group.","clamp","colorize","fog_pars_vertex","floatOverLifetime","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","boolean","fog_fragment","opacity","round","   c.g = g / PACKED_COLOR_DIVISOR;","uniforms","    #ifdef SHOULD_ROTATE_PARTICLES","spreadClamp","   return c;","attributeCount","       float oc = 1.0 - c;","SPE.Group: maxParticleCount exceeded. Requesting","_applyAttributesToGeometry","paramFetchingFunctions","           unpackColor( color.x ),","    highp float maxAge = getMaxAge();","logdepthbuf_pars_vertex","_assignParamsValue","position","        vSpriteSheet.w = rowNorm;","    #ifdef SHOULD_ROTATE_TEXTURE","bufferUpdateRanges","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","Emitter","randomVector3","_assignColorValue","LINE","activationEnd","      translated = rotationCenter - pos;","wiggle","transparent","elements","    vec4 rotatedTexture = texture2D( tex, vUv );","    varying float vAngle;","attribute vec4 size;","    #ifdef SHOULD_WIGGLE_PARTICLES","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","Argument is not instanceof SPE.Emitter:","vec3 unpackColor( in float hex ) {","_pool","NEGATIVE_INFINITY","enable","blending","        float row = floor( (frameNumber - column) / framesX );","hasPerspective","length","activeParticleCount","   c.b = b / PACKED_COLOR_DIVISOR;","updateMax","_value","attributeOffset","_spread","typeSizeMap","lerp","OBJECT","randomVector3OnSphere","typedArray","releaseIntoPool","   return params.y;","DISC","   return params.x;","shaderChunks","       fIndex = float( i );","_updateBuffers","uniform sampler2D tex;","        vSpriteSheet.y = 1.0 / framesY;"];return(f=function(){return t})()}"function"==typeof define&&define[c(739)]?define("spe",u):typeof exports!==c(872)&&"undefined"!=typeof module&&(module[c(664)]=u),u[c(554)]=function(t,e,i,n){const s=c;this[s(704)]=i||1,this[s(636)]=e||1,this[s(724)]=t||Float32Array,this[s(880)]=new t(e*this.componentSize),this.indexOffset=n||0},u[c(554)][c(762)]=u[c(554)],u[c(554)][c(590)].setSize=function(t,e){const i=c,n=this[i(880)][i(848)];return!e&&(t*=this[i(704)]),t<n?this[i(677)](t):t>n?this[i(703)](t):void console[i(454)](i(878),t+".",i(495))},u[c(554)][c(590)][c(677)]=function(t){const e=c;return this.array=this.array[e(755)](0,t),this[e(636)]=t,this},u[c(554)][c(590)][c(703)]=function(t){const e=c,i=this[e(880)],n=new(this[e(724)])(t);return n.set(i),this.array=n,this[e(636)]=t,this},u[c(554)][c(590)][c(767)]=function(t,e){const i=c;t*=this.componentSize,e*=this.componentSize;const n=[],s=this[i(880)],o=s[i(848)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(543)](s[r]);return this[i(706)](0,n),this},u.TypedArrayHelper[c(590)].setFromArray=function(t,e){const i=c,n=t+e[i(848)];return n>this.array[i(848)]?this[i(703)](n):n<this[i(880)][i(848)]&&this[i(677)](n),this.array.set(e,this[i(684)]+t),this},u[c(554)][c(590)].setVec2=function(t,e){return this.setVec2Components(t,e.x,e.y)},u[c(554)][c(590)].setVec2Components=function(t,e,i){const n=c,s=this.array,o=this.indexOffset+t*this[n(704)];return s[o]=e,s[o+1]=i,this},u[c(554)][c(590)][c(771)]=function(t,e){return this[c(695)](t,e.x,e.y,e.z)},u[c(554)][c(590)][c(695)]=function(t,e,i,n){const s=c,o=this[s(880)],r=this[s(684)]+t*this[s(704)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},u[c(554)].prototype[c(501)]=function(t,e){return this[c(546)](t,e.x,e.y,e.z,e.w)},u[c(554)][c(590)][c(546)]=function(t,e,i,n,s){const o=c,r=this[o(880)],a=this[o(684)]+t*this[o(704)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},u[c(554)][c(590)][c(646)]=function(t,e){const i=c;return this[i(706)](this[i(684)]+t*this.componentSize,e[i(834)])},u.TypedArrayHelper.prototype.setMat4=function(t,e){const i=c;return this[i(706)](this[i(684)]+t*this[i(704)],e[i(834)])},u[c(554)][c(590)][c(450)]=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},u.TypedArrayHelper.prototype.setNumber=function(t,e){const i=c;return this[i(880)][this[i(684)]+t*this.componentSize]=e,this},u[c(554)][c(590)].getValueAtIndex=function(t){return this.array[this.indexOffset+t]},u[c(554)][c(590)][c(535)]=function(t){const e=c;return this[e(880)][e(755)](this.indexOffset+t*this[e(704)])},u[c(576)]=function(t,e,i){const n=c,s=u.ShaderAttribute[n(855)];this[n(659)]=typeof t===n(672)&&s[n(625)](t)?t:"f",this.componentSize=s[this[n(659)]],this[n(520)]=i||Float32Array,this.typedArray=null,this[n(688)]=null,this[n(599)]=!!e,this[n(633)]=0,this[n(851)]=0},u[c(576)][c(762)]=u[c(576)],u[c(576)][c(855)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},u[c(576)][c(590)][c(489)]=function(t,e){const i=c;this[i(633)]=Math.min(t*this.componentSize,this[i(633)]*this[i(704)]),this.updateMax=Math[i(602)](e*this[i(704)],this[i(851)]*this[i(704)])},u[c(576)][c(590)][c(713)]=function(){const t=c,e=this[t(688)];!e.updateRange&&(e[t(712)]={});const i=e[t(712)];i[t(589)]=this[t(633)],i[t(623)]=Math[t(545)](this[t(851)]-this[t(633)]+this[t(704)],this[t(859)][t(880)][t(848)]),e[t(707)]=!0},u[c(576)][c(590)][c(465)]=function(){this[c(633)]=0,this.updateMax=0},u.ShaderAttribute[c(590)][c(476)]=function(){const e=c;this[e(688)][e(575)]=this.dynamicBuffer?t[e(618)]:t[e(519)]},u.ShaderAttribute[c(590)][c(767)]=function(t,e){const i=c;this.typedArray[i(767)](t,e),this[i(497)]()},u[c(576)][c(590)].forceUpdateAll=function(){const e=c;this[e(688)][e(880)]=this[e(859)][e(880)],this[e(688)][e(712)][e(589)]=0,this.bufferAttribute[e(712)][e(623)]=-1,this[e(688)][e(575)]=t[e(519)],this[e(688)][e(707)]=!0},u[c(576)][c(590)]._ensureTypedArray=function(t){const e=c;null!==this.typedArray&&this[e(859)][e(636)]===t*this[e(704)]||(null!==this[e(859)]&&this[e(859)][e(636)]!==t?this.typedArray.setSize(t):null===this[e(859)]&&(this[e(859)]=new(u[e(554)])(this[e(520)],t,this.componentSize)))},u[c(576)][c(590)][c(699)]=function(n){const s=c;if(this[s(876)](n),null!==this[s(688)])return this[s(688)][s(880)]=this[s(859)][s(880)],parseFloat(e)>=81&&(this.bufferAttribute[s(623)]=this[s(688)].array[s(848)]/this[s(688)][s(666)]),void(this.bufferAttribute[s(707)]=!0);this[s(688)]=new(t[s(592)])(this[s(859)][s(880)],this.componentSize),this.bufferAttribute[s(575)]=this.dynamicBuffer?t[s(618)]:i},u[c(576)].prototype[c(614)]=function(){const t=c;return null===this[t(859)]?0:this[t(859)][t(880)].length},u.shaderChunks={defines:["#define PACKED_COLOR_SIZE 256.0","#define PACKED_COLOR_DIVISOR 255.0"][c(700)]("\n"),uniforms:["uniform float deltaTime;","uniform float runTime;",c(867),c(668),"uniform float scale;"][c(700)]("\n"),attributes:[c(883),c(751),c(792),"attribute vec3 rotationCenter;",c(580),c(837),"attribute vec4 angle;",c(504),c(669)][c(700)]("\n"),varyings:[c(873),c(784),c(836),c(733),c(735),"    varying vec4 vSpriteSheet;","#endif"].join("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",c(671),"}",c(631),c(475),"}",c(723),c(675),"}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}",c(477),"  return 1.0 - when_gt(x, y);","}",c(578),c(775),"}",c(529),"    return min(a + b, 1.0);","}"].join("\n"),unpackColor:[c(841),c(485),c(567),c(534),"   float b = mod( hex, PACKED_COLOR_SIZE );",c(691),c(806),c(850),"   return c;","}"][c(700)]("\n"),unpackRotationAxis:[c(526),c(485),c(567),c(534),c(647),c(691),c(806),c(850),"   c *= vec3( 2.0 );",c(708),c(810),"}"].join("\n"),floatOverLifetime:[c(801),c(538),c(506),c(741),c(558),"    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","",c(825),c(865),c(626),c(482),"    }","",c(790),"}"][c(700)]("\n"),colorOverLifetime:[c(657),c(584),"    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );",c(689),c(635),c(790),"}"][c(700)]("\n"),paramFetchingFunctions:["float getAlive() {",c(863),"}",c(605),c(861),"}",c(557),"   return params.z;","}","float getWiggle() {","   return params.w;","}"][c(700)]("\n"),forceFetchingFunctions:[c(749),c(757),"}","vec3 getVelocity( in float age ) {",c(682),"}",c(570),c(467),"}"][c(700)]("\n"),rotationFunctions:[c(711),"   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       axis = normalize(axis);",c(621),c(459),c(812),"",c(870),c(742),c(824),c(559),c(579),"",c(839),c(648),"           return pos;",c(527),"",c(521),"      vec3 center = rotationCenter;",c(524),"      mat4 rotationMatrix;",c(738),c(730),c(553),c(831),c(734),c(886),"   }",c(733)][c(700)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",c(822),c(628),"       float y = 1.0 - gl_PointCoord.y - 0.5;",c(596),c(448),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","",c(597),c(601),"        float framesY = vSpriteSheet.y;",c(779),c(789),c(617),c(740),c(678),"",c(835)][c(700)]("\n")},u[c(453)]={vertex:[u[c(864)][c(533)],u[c(864)].uniforms,u[c(864)][c(718)],u[c(864)].varyings,t[c(759)].common,n[c(818)],t[c(759)][c(799)],u[c(864)][c(783)],u.shaderChunks[c(496)],u[c(864)].unpackRotationAxis,u[c(864)][c(800)],u[c(864)].colorOverLifetime,u[c(864)][c(815)],u.shaderChunks[c(673)],u[c(864)][c(516)],c(748),c(752),c(890),c(817),"    highp float positionInTime = (age / maxAge);",c(685),c(838),c(471),c(644),"        float wiggleCos = isAlive * cos( wiggleAmount );",c(678),c(791),c(882),c(452),c(639),c(750),c(745),c(481),c(541),c(761),"    #ifdef SHOULD_WIGGLE_PARTICLES",c(732),"        pos.y += wiggleCos;",c(650),c(678),c(808),c(587),c(678),c(612),c(531),"    #ifdef HAS_PERSPECTIVE",c(577),c(709),"        float perspective = 1.0;","    #endif",c(649),"    #ifdef COLORIZE",c(786),c(581),c(816),c(540),"           unpackColor( color.z ),",c(661),"       );",c(709),c(697),"    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","    vColor = vec4( c, o );",c(822),c(725),c(678),"    #ifdef SHOULD_CALCULATE_SPRITE",c(756),c(610),"        float loopCount = textureAnimation.w;",c(710),c(884),"        float column = floor(mod( frameNumber, framesX ));",c(846),c(656),c(794),c(456),c(868),"        vSpriteSheet.z = columnNorm;",c(821),c(678),c(479),c(515),n[c(787)],n[c(795)],"}"][c(700)]("\n"),fragment:[u[c(864)][c(807)],n.common,t[c(759)][c(510)],t[c(759)].logdepthbuf_pars_fragment,u[c(864)].varyings,u[c(864)][c(783)],c(748),c(615),c(641),c(462),c(653),"    #endif",u[c(864)][c(512)],t[c(759)].logdepthbuf_fragment,c(574),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",n[c(803)],"}"][c(700)]("\n")},u[c(474)]={types:{BOOLEAN:c(802),STRING:"string",NUMBER:c(781),OBJECT:c(627)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array[n(560)](t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this[n(457)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(560)](t[n(852)])&&(t._value=[t._value]),!1===Array.isArray(t[n(854)])&&(t[n(854)]=[t[n(854)]]);const s=this[n(797)](t[n(852)].length,e,i),o=this[n(797)](t[n(854)].length,e,i),r=Math[n(602)](s,o);t[n(852)].length!==r&&(t[n(852)]=this[n(566)](t[n(852)],r)),t[n(854)][n(848)]!==r&&(t[n(854)]=this.interpolateArray(t[n(854)],r))},interpolateArray(t,e){const i=c,n=t[i(848)],s=[typeof t[0][i(768)]===i(620)?t[0].clone():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math.floor(e),a=Math[i(692)](e),c=e-n;s[r]=this[i(717)](t[n],t[a],c)}return s[i(543)]("function"==typeof t[n-1][i(768)]?t[n-1].clone():t[n-1]),s},clamp(t,e,i){const n=c;return Math[n(602)](e,Math[n(545)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[c(654)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=c;let r,a=this.types;return typeof e===a[o(662)]&&typeof i===a[o(662)]?e+(i-e)*n:e instanceof t[o(663)]&&i instanceof t[o(663)]?(r=e[o(768)](),r.x=this[o(856)](e.x,i.x,n),r.y=this.lerp(e.y,i.y,n),r):e instanceof s&&i instanceof t[o(720)]?(r=e.clone(),r.x=this[o(856)](e.x,i.x,n),r.y=this[o(856)](e.y,i.y,n),r.z=this.lerp(e.z,i.z,n),r):e instanceof t[o(608)]&&i instanceof t[o(608)]?(r=e[o(768)](),r.x=this[o(856)](e.x,i.x,n),r.y=this[o(856)](e.y,i.y,n),r.z=this.lerp(e.z,i.z,n),r.w=this.lerp(e.w,i.w,n),r):e instanceof t[o(782)]&&i instanceof t[o(782)]?(r=e.clone(),r.r=this[o(856)](e.r,i.r,n),r.g=this[o(856)](e.g,i.g,n),r.b=this[o(856)](e.b,i.b,n),r):void console[o(737)]("Invalid argument types, or argument types do not match:",e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math.abs(t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=c;for(let i=0;i<t[e(848)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[c(654)]()-.5),randomVector3(t,e,i,n,s){const o=c;let r=i.x+(Math.random()*n.x-.5*n.x),a=i.y+(Math[o(654)]()*n.y-.5*n.y),h=i.z+(Math[o(654)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(766)](r,s.x),a=.5*-s.y+this[o(766)](a,s.y),h=.5*-s.z+this[o(766)](h,s.z)),t.typedArray[o(695)](e,r,a,h)},randomColor(t,e,i,n){const s=c;let o=i.r+Math.random()*n.x,r=i.g+Math[s(654)]()*n.y,a=i.b+Math.random()*n.z;o=this[s(797)](o,0,1),r=this[s(797)](r,0,1),a=this[s(797)](a,0,1),t.typedArray.setVec3Components(e,o,r,a)},randomColorAsHex:function(){const e=c,i=new(t[e(782)]);return function(t,n,s,o){const r=e,a=s[r(848)],c=[];for(let e=0;e<a;++e){const t=o[e];i.copy(s[e]),i.r+=Math[r(654)]()*t.x-.5*t.x,i.g+=Math[r(654)]()*t.y-.5*t.y,i.b+=Math[r(654)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this[r(797)](i.g,0,1),i.b=this.clamp(i.b,0,1),c.push(i[r(632)]())}t[r(859)][r(546)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=c,o=i.clone();o[s(856)](n,Math[s(654)]()),t[s(859)][s(695)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const h=c;let l=2*Math[h(654)]()-1,u=6.2832*Math[h(654)](),f=Math.sqrt(1-l*l),p=this.randomFloat(n,s),d=0,m=0,g=0;r&&(p=Math[h(805)](p/r)*r),d=f*Math.cos(u)*p,m=f*Math.sin(u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[h(859)][h(695)](e,d,m,g)},seededRandom(t){const e=1e4*Math[c(518)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=c;let h=6.2832*Math[a(654)](),l=Math[a(624)](this[a(670)](n,s)),u=0,f=0,p=0;r&&(l=Math[a(805)](l/r)*r),u=Math.cos(h)*l,f=Math[a(518)](h)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[a(859)][a(695)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=c,i=new(t[e(720)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(764)](a),i.x-=s,i.y-=o,i.z-=r,i[l(888)]()[l(643)](-this.randomFloat(c,h)),t[l(859)].setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=c,i=new(t[e(720)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(764)](a),i.x-=s,i.y-=o,i.z-=r,i.normalize()[l(643)](-this[l(670)](c,h)),t[l(859)][l(695)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=c,i=new(t[e(720)]),n=new(t[e(720)]),r=new o,a=new s(1,1,1);return function(t,s){const o=e;return i[o(764)](t)[o(888)](),n[o(764)](s).normalize(),i.x+=.5*-s.x+Math[o(654)]()*s.x,i.y+=.5*-s.y+Math.random()*s.y,i.z+=.5*-s.z+Math.random()*s.z,i[o(888)]()[o(502)](a)[o(643)](.5),r[o(595)](i.x,i.y,i.z),r.getHex()}}()},u[c(507)]=function(e){const i=c,n=u[i(474)],s=n[i(793)];(e=n[i(457)](e,s[i(857)],{})).texture=n[i(457)](e[i(637)],s[i(857)],{}),this.uuid=t[i(744)][i(705)](),this[i(716)]=n[i(457)](e[i(716)],s[i(662)],.016),this[i(637)]=n.ensureInstanceOf(e[i(637)][i(776)],t[i(687)],null),this.textureFrames=n.ensureInstanceOf(e[i(637)].frames,t[i(663)],new(t[i(663)])(1,1)),this[i(461)]=n[i(457)](e[i(637)].frameCount,s[i(662)],this.textureFrames.x*this.textureFrames.y),this[i(696)]=n[i(457)](e[i(637)].loop,s[i(662)],1),this.textureFrames[i(602)](new(t[i(663)])(1,1)),this[i(847)]=n[i(457)](e[i(847)],s.BOOLEAN,!0),this[i(798)]=n[i(457)](e[i(798)],s[i(743)],!0),this.maxParticleCount=n[i(457)](e.maxParticleCount,s[i(662)],null),this[i(845)]=n.ensureTypedArg(e[i(845)],s[i(662)],t[i(505)]),this.transparent=n[i(457)](e[i(833)],s.BOOLEAN,!0),this[i(556)]=parseFloat(n[i(457)](e[i(556)],s[i(662)],0)),this[i(892)]=n.ensureTypedArg(e[i(892)],s[i(743)],!1),this.depthTest=n[i(457)](e[i(449)],s[i(743)],!0),this[i(652)]=n[i(457)](e[i(652)],s[i(743)],!0),this.scale=n.ensureTypedArg(e.scale,s[i(662)],300),this[i(785)]=[],this[i(640)]=[],this[i(842)]=[],this[i(889)]=null,this[i(690)]=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this[i(525)]=0,this[i(807)]={tex:{type:"t",value:this[i(637)]},textureAnimation:{type:"v4",value:new(t[i(608)])(this[i(702)].x,this[i(702)].y,this[i(461)],Math[i(602)](Math[i(624)](this[i(696)]),1))},fogColor:{type:"c",value:this[i(652)]?new(t[i(782)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(493)]}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(798)],VALUE_OVER_LIFETIME_LENGTH:u[i(607)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(702)].y>1},this[i(718)]={position:new(u[i(576)])("v3",!0),acceleration:new u.ShaderAttribute("v4",!0),velocity:new(u[i(576)])("v3",!0),rotation:new(u[i(576)])("v4",!0),rotationCenter:new(u[i(576)])("v3",!0),params:new(u[i(576)])("v4",!0),size:new(u[i(576)])("v4",!0),angle:new(u[i(576)])("v4",!0),color:new(u[i(576)])("v4",!0),opacity:new(u[i(576)])("v4",!0)},this[i(568)]=Object[i(758)](this[i(718)]),this[i(811)]=this[i(568)][i(848)],this.material=new(t[i(719)])({uniforms:this.uniforms,vertexShader:u[i(453)][i(572)],fragmentShader:u.shaders[i(483)],blending:this[i(845)],transparent:this[i(833)],alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this[i(449)],defines:this.defines,fog:this[i(652)]}),this[i(683)]=new(t[i(564)]),this[i(468)]=new r(this.geometry,this[i(754)]),null===this[i(701)]&&console[i(737)](i(721))},u[c(507)][c(762)]=u[c(507)],u[c(507)][c(590)][c(616)]=function(){const t=c;let e,i=this[t(785)],n=i[t(848)]-1,s=this.defines;for(;n>=0;--n)e=i[n],!s.SHOULD_CALCULATE_SPRITE&&(s.SHOULD_ROTATE_TEXTURE=s[t(651)]||!!Math[t(602)](Math[t(602)].apply(null,e[t(788)][t(776)]),Math.max[t(573)](null,e[t(788)][t(498)]))),s.SHOULD_ROTATE_PARTICLES=s[t(731)]||!!Math.max(e[t(542)][t(788)],e.rotation.angleSpread),s[t(879)]=s[t(879)]||!!Math[t(602)](e.wiggle.value,e[t(832)][t(498)]);this.material.needsUpdate=!0},u[c(507)][c(590)][c(814)]=function(){const t=c;let e,i,n=this[t(718)],s=this.geometry,o=s[t(718)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=o[r],i?i.array=e[t(859)][t(880)]:s[t(530)](r,e[t(688)]),e[t(688)][t(707)]=!0);this.geometry[t(658)](0,this[t(525)])},u[c(507)][c(590)][c(466)]=function(t){const e=c;if(t instanceof u.Emitter==!1)return void console[e(693)](e(494),t);if(this[e(640)][e(582)](t[e(611)])>-1)return void console[e(693)](e(727));if(null!==t[e(532)])return void console[e(693)](e(796));const i=this[e(718)],n=this.particleCount,s=n+t[e(525)];this[e(525)]=s,null!==this.maxParticleCount&&this.particleCount>this.maxParticleCount&&console[e(737)](e(813),this[e(525)],e(549),this.maxParticleCount),t._calculatePPSValue(t[e(544)][e(852)]+t.maxAge[e(854)]),t[e(447)](this.attributeKeys),t._setAttributeOffset(n),t.group=this,t[e(718)]=this[e(718)];for(const o in i)i[e(625)](o)&&i[o][e(699)](null!==this[e(701)]?this[e(701)]:this[e(525)]);for(let o=n;o<s;++o)t[e(629)](o),t._assignForceValue(o,e(463)),t[e(871)](o,e(561)),t[e(681)](o,e(804)),t[e(681)](o,"size"),t._assignAngleValue(o),t._assignRotationValue(o),t[e(819)](o),t[e(828)](o);return this._applyAttributesToGeometry(),this[e(785)][e(543)](t),this.emitterIDs[e(543)](t[e(611)]),this[e(616)](t),this[e(754)].needsUpdate=!0,this[e(683)][e(707)]=!0,this[e(772)]=!0,this},u.Group[c(590)][c(455)]=function(t){const e=c,i=this[e(640)].indexOf(t.uuid);if(t instanceof u[e(826)]==!1)return void console[e(693)](e(494),t);if(-1===i)return void console[e(693)](e(604));const n=t.attributeOffset,s=n+t[e(525)],o=this[e(718)][e(869)][e(859)];for(let r=n;r<s;++r)o[e(880)][4*r]=0,o[e(880)][4*r+1]=0;this[e(785)][e(767)](i,1),this.emitterIDs[e(767)](i,1);for(const r in this[e(718)])this[e(718)][e(625)](r)&&this.attributes[r].splice(n,s);this.particleCount-=t[e(525)],t[e(548)](),this[e(772)]=!0},u[c(507)][c(590)][c(563)]=function(){const t=c,e=this[t(842)],i=this[t(690)];if(e[t(848)])return e.pop();if(i){const e=new(u[t(826)])(this._poolCreationSettings);return this[t(466)](e),e}return null},u[c(507)][c(590)][c(860)]=function(t){const e=c;if(t instanceof u.Emitter!=!1)return t[e(769)](),this[e(842)].unshift(t),this;console[e(693)](e(840),t)},u[c(507)].prototype[c(778)]=function(){return this[c(842)]},u[c(507)][c(590)][c(665)]=function(t,e,i){const n=c;let s;this[n(889)]=e,this[n(690)]=!!i;for(let o=0;o<t;++o)s=Array[n(560)](e)?new(u[n(826)])(e[o]):new(u[n(826)])(e),this.addEmitter(s),this[n(860)](s);return this},u[c(507)][c(590)][c(565)]=function(e){const i=c,n=this.getFromPool(),s=this;if(null!==n)return e instanceof t[i(720)]&&(n[i(820)][i(776)][i(764)](e),n.position[i(776)]=n[i(820)][i(776)]),n[i(844)](),setTimeout((()=>{const t=i;n.disable(),s[t(860)](n)}),1e3*Math[i(602)](n.duration,n.maxAge[i(776)]+n.maxAge[i(498)])),this;console[i(473)](i(613))},u[c(507)].prototype[c(634)]=function(t,e){const i=c;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(565)](e);else this[i(565)](e);return this},u[c(507)][c(590)][c(491)]=function(t){const e=c;this[e(807)][e(893)][e(776)]+=t,this[e(807)][e(451)][e(776)]=t},u[c(507)][c(590)][c(514)]=function(){const t=c;let e=this.attributeKeys,i=this.attributeCount-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(465)]()},u[c(507)][c(590)]._updateBuffers=function(t){const e=c;let i,n,s,o=this[e(568)],r=this.attributeCount-1,a=this[e(718)],h=t.bufferUpdateRanges;for(;r>=0;--r)i=o[r],n=h[i],s=a[i],s[e(489)](n[e(545)],n[e(602)]),s[e(713)]()},u[c(507)][c(590)][c(513)]=function(t){const e=c;var i=this[e(785)],n=i[e(848)],s=t||this[e(716)],o=this[e(568)],r=this[e(718)];if(this._updateUniforms(s),this[e(514)](),0!==n||!1!==this[e(772)]||!1!==this[e(600)]){for(var a,h=0;h<n;++h)(a=i[h]).tick(s),this[e(866)](a);if(!0===this[e(600)]){for(h=this[e(811)]-1;h>=0;--h)r[o[h]][e(476)]();this[e(600)]=!1}if(!0===this[e(772)]){for(h=this[e(811)]-1;h>=0;--h)r[o[h]][e(497)]();this[e(772)]=!1,this[e(600)]=!0}}},u.Group.prototype.dispose=function(){const t=c;return this.geometry[t(470)](),this[t(754)][t(470)](),this},u[c(826)]=function(e){const i=c,n=u[i(474)],r=n[i(793)],h=u.valueOverLifetimeLength;(e=n[i(457)](e,r[i(857)],{}))[i(820)]=n.ensureTypedArg(e[i(820)],r[i(857)],{}),e.velocity=n[i(457)](e[i(463)],r.OBJECT,{}),e[i(561)]=n[i(457)](e[i(561)],r[i(857)],{}),e[i(736)]=n.ensureTypedArg(e[i(736)],r[i(857)],{}),e[i(539)]=n[i(457)](e[i(539)],r[i(857)],{}),e[i(542)]=n[i(457)](e.rotation,r[i(857)],{}),e[i(655)]=n[i(457)](e[i(655)],r[i(857)],{}),e[i(804)]=n[i(457)](e[i(804)],r.OBJECT,{}),e[i(636)]=n[i(457)](e.size,r[i(857)],{}),e[i(788)]=n.ensureTypedArg(e.angle,r.OBJECT,{}),e[i(832)]=n.ensureTypedArg(e.wiggle,r[i(857)],{}),e.maxAge=n[i(457)](e[i(544)],r[i(857)],{}),e[i(746)]&&console[i(737)]("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this[i(611)]=a.generateUUID(),this.type=n[i(457)](e[i(659)],r[i(662)],u[i(522)][i(645)]),this.position={_value:n[i(874)](e[i(820)].value,t[i(720)],new(t[i(720)])),_spread:n[i(874)](e[i(820)][i(498)],t[i(720)],new(t[i(720)])),_spreadClamp:n.ensureInstanceOf(e[i(820)][i(809)],t[i(720)],new(t[i(720)])),_distribution:n[i(457)](e.position[i(642)],r[i(662)],this[i(659)]),_randomise:n[i(457)](e[i(820)][i(698)],r[i(743)],!1),_radius:n[i(457)](e[i(820)][i(736)],r.NUMBER,10),_radiusScale:n[i(874)](e.position[i(458)],t[i(720)],new s(1,1,1)),_distributionClamp:n[i(457)](e[i(820)][i(887)],r[i(662)],0)},this[i(463)]={_value:n[i(874)](e[i(463)][i(776)],s,new(t[i(720)])),_spread:n[i(874)](e[i(463)][i(498)],t[i(720)],new(t[i(720)])),_distribution:n[i(457)](e[i(463)][i(642)],r[i(662)],this.type),_randomise:n[i(457)](e[i(820)][i(698)],r.BOOLEAN,!1)},this[i(561)]={_value:n[i(874)](e[i(561)][i(776)],t[i(720)],new(t[i(720)])),_spread:n[i(874)](e.acceleration[i(498)],t[i(720)],new(t[i(720)])),_distribution:n.ensureTypedArg(e[i(561)][i(642)],r[i(662)],this.type),_randomise:n.ensureTypedArg(e[i(820)][i(698)],r[i(743)],!1)},this.drag={_value:n[i(457)](e[i(539)][i(776)],r[i(662)],0),_spread:n[i(457)](e[i(539)][i(498)],r[i(662)],0),_randomise:n[i(457)](e.position[i(698)],r[i(743)],!1)},this[i(832)]={_value:n[i(457)](e[i(832)][i(776)],r[i(662)],0),_spread:n[i(457)](e[i(832)][i(498)],r[i(662)],0)},this[i(542)]={_axis:n.ensureInstanceOf(e[i(542)].axis,t[i(720)],new(t[i(720)])(0,1,0)),_axisSpread:n[i(874)](e[i(542)][i(760)],t[i(720)],new(t[i(720)])),_angle:n.ensureTypedArg(e.rotation.angle,r[i(662)],0),_angleSpread:n.ensureTypedArg(e[i(542)].angleSpread,r.NUMBER,0),_static:n[i(457)](e.rotation.static,r[i(743)],!1),_center:n[i(874)](e[i(542)].center,t[i(720)],this[i(820)][i(852)][i(768)]()),_randomise:n.ensureTypedArg(e[i(820)][i(698)],r.BOOLEAN,!1)},this[i(544)]={_value:n[i(457)](e.maxAge.value,r[i(662)],2),_spread:n[i(457)](e[i(544)][i(498)],r[i(662)],0)},this[i(655)]={_value:n[i(562)](e[i(655)][i(776)],o,new(t[i(782)])),_spread:n[i(562)](e[i(655)][i(498)],t[i(720)],new s),_randomise:n[i(457)](e.position[i(698)],r[i(743)],!1)},this.opacity={_value:n[i(594)](e[i(804)][i(776)],r[i(662)],1),_spread:n[i(594)](e.opacity.spread,r[i(662)],0),_randomise:n.ensureTypedArg(e[i(820)][i(698)],r[i(743)],!1)},this[i(636)]={_value:n[i(594)](e[i(636)][i(776)],r[i(662)],1),_spread:n.ensureArrayTypedArg(e.size[i(498)],r[i(662)],0),_randomise:n[i(457)](e[i(820)][i(698)],r.BOOLEAN,!1)},this[i(788)]={_value:n[i(594)](e[i(788)][i(776)],r[i(662)],0),_spread:n[i(594)](e[i(788)][i(498)],r[i(662)],0),_randomise:n.ensureTypedArg(e[i(820)][i(698)],r[i(743)],!1)},this.particleCount=n[i(457)](e.particleCount,r[i(662)],100),this[i(877)]=n[i(457)](e[i(877)],r[i(662)],null),this.isStatic=n[i(457)](e.isStatic,r[i(743)],!1),this[i(503)]=n[i(457)](e[i(503)],r[i(662)],1),this[i(588)]=n[i(457)](e[i(588)],r[i(662)],1),this[i(528)]=n[i(457)](e[i(528)],r[i(743)],!0),this[i(551)]=0,this[i(569)]=0,this[i(853)]=0,this.attributeEnd=0,this[i(598)]=0,this.activeParticleCount=0,this[i(532)]=null,this[i(718)]=null,this[i(679)]=null,this.resetFlags={position:n[i(457)](e.position.randomise,r[i(743)],!1)||n[i(457)](e[i(736)][i(698)],r[i(743)],!1),velocity:n.ensureTypedArg(e[i(463)].randomise,r.BOOLEAN,!1),acceleration:n[i(457)](e.acceleration.randomise,r.BOOLEAN,!1)||n[i(457)](e[i(539)][i(698)],r[i(743)],!1),rotation:n[i(457)](e[i(542)][i(698)],r[i(743)],!1),rotationCenter:n.ensureTypedArg(e[i(542)].randomise,r.BOOLEAN,!1),size:n[i(457)](e[i(636)][i(698)],r[i(743)],!1),color:n[i(457)](e[i(655)][i(698)],r[i(743)],!1),opacity:n.ensureTypedArg(e[i(804)].randomise,r[i(743)],!1),angle:n[i(457)](e.angle[i(698)],r[i(743)],!1)},this[i(517)]={},this[i(891)]={},this[i(722)]={maxAge:i(869),position:i(820),velocity:i(463),acceleration:i(561),drag:"acceleration",wiggle:i(869),rotation:i(542),size:i(636),color:i(655),opacity:i(804),angle:i(788)};for(const t in this[i(722)])this.updateMap.hasOwnProperty(t)&&(this[i(891)][this[i(722)][t]]=0,this[i(517)][this[i(722)][t]]=!1,this._createGetterSetters(this[t],t));this.bufferUpdateRanges={},this[i(568)]=null,this.attributeCount=0,n[i(773)](this[i(655)],h,h),n[i(773)](this[i(804)],h,h),n[i(773)](this[i(636)],h,h),n[i(773)](this.angle,h,h)},u[c(826)][c(762)]=u[c(826)],u[c(826)].prototype[c(537)]=function(t,e){const i=c,n=this;for(const s in t)if(t[i(625)](s)){const o=s.replace("_","");Object[i(480)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=d,o=n[s(722)][e],r=this[t],a=u.valueOverLifetimeLength;"_rotationCenter"===t?(n[s(517)].rotationCenter=!0,n[s(891)][s(536)]=0):t===s(511)?n.resetFlags[o]=i:(n[s(517)][o]=!0,n[s(891)][o]=0),n[s(532)][s(616)](),this[t]=i,Array[s(560)](r)&&u[s(474)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(s)})}},u.Emitter.prototype._setBufferUpdateRanges=function(t){const e=c;this[e(568)]=t,this[e(811)]=t.length;for(let i=this[e(811)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(547)],max:Number[e(843)]}},u[c(826)][c(590)][c(500)]=function(t){const e=c,i=this.particleCount;this[e(877)]?this[e(551)]=i/(t<this.duration?t:this[e(877)]):this.particlesPerSecond=i/t},u[c(826)][c(590)][c(638)]=function(t){this[c(853)]=t,this.activationIndex=t,this.activationEnd=t+this.particleCount},u.Emitter[c(590)][c(780)]=function(t,e){const i=c;switch(t){case"position":this._assignPositionValue(e);break;case"velocity":case i(561):this[i(871)](e,t);break;case i(636):case i(804):this._assignAbsLifetimeValue(e,t);break;case i(788):this[i(885)](e);break;case i(869):this[i(819)](e);break;case i(542):this[i(509)](e);break;case i(655):this[i(828)](e)}},u[c(826)][c(590)][c(629)]=function(t){const e=c,i=u[e(522)],n=u[e(474)],s=this[e(820)],o=this[e(718)][e(820)],r=s[e(852)],a=s[e(854)];switch(s[e(606)]){case i.BOX:n[e(827)](o,t,r,a,s._spreadClamp);break;case i.SPHERE:n[e(858)](o,t,r,s[e(472)],s[e(854)].x,s[e(492)],s._spreadClamp.x,s[e(445)]||this[e(525)]);break;case i[e(862)]:n[e(523)](o,t,r,s._radius,s[e(854)].x,s[e(492)],s[e(508)].x);break;case i[e(829)]:n.randomVector3OnLine(o,t,r,a)}},u[c(826)].prototype[c(871)]=function(t,e){const i=c;let n,s,o,r,a,h=u.distributions,l=u[i(474)],f=this[e],p=f[i(852)],d=f._spread;switch(f._distribution){case h[i(645)]:l[i(827)](this[i(718)][e],t,p,d);break;case h[i(753)]:n=this[i(718)][i(820)].typedArray[i(880)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l.randomDirectionVector3OnSphere(this[i(718)][e],t,s,o,r,this.position._value,f[i(852)].x,f[i(854)].x);break;case h[i(862)]:n=this[i(718)][i(820)][i(859)].array,a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(571)](this[i(718)][e],t,s,o,r,this[i(820)][i(852)],f._value.x,f[i(854)].x);break;case h[i(829)]:l.randomVector3OnLine(this[i(718)][e],t,p,d)}if(e===i(561)){const e=l.clamp(l[i(670)](this[i(539)][i(852)],this[i(539)]._spread),0,1);this.attributes[i(561)][i(859)][i(880)][4*t+3]=e}},u[c(826)].prototype[c(681)]=function(t,e){const i=c;let n,s=this[i(718)][e].typedArray,o=this[e],r=u[i(474)];r[i(715)](o[i(852)])&&r.arrayValuesAreEqual(o[i(854)])?(n=Math[i(624)](r[i(670)](o[i(852)][0],o[i(854)][0])),s.setVec4Components(t,n,n,n,n)):s[i(546)](t,Math.abs(r.randomFloat(o[i(852)][0],o[i(854)][0])),Math[i(624)](r[i(670)](o[i(852)][1],o[i(854)][1])),Math[i(624)](r.randomFloat(o[i(852)][2],o[i(854)][2])),Math[i(624)](r[i(670)](o._value[3],o[i(854)][3])))},u[c(826)].prototype[c(885)]=function(t){const e=c;let i,n=this.attributes[e(788)].typedArray,s=this[e(788)],o=u.utils;o[e(715)](s[e(852)])&&o.arrayValuesAreEqual(s[e(854)])?(i=o[e(670)](s[e(852)][0],s._spread[0]),n[e(546)](t,i,i,i,i)):n[e(546)](t,o.randomFloat(s[e(852)][0],s[e(854)][0]),o[e(670)](s._value[1],s._spread[1]),o.randomFloat(s._value[2],s[e(854)][2]),o.randomFloat(s._value[3],s[e(854)][3]))},u[c(826)].prototype._assignParamsValue=function(t){const e=c;this[e(718)][e(869)][e(859)].setVec4Components(t,this[e(484)]?1:0,0,Math[e(624)](u.utils.randomFloat(this[e(544)][e(852)],this.maxAge[e(854)])),u.utils[e(670)](this.wiggle[e(852)],this[e(832)]._spread))},u[c(826)][c(590)][c(509)]=function(t){const e=c;this.attributes[e(542)].typedArray[e(695)](t,u[e(474)][e(777)](this.rotation[e(488)],this[e(542)][e(603)]),u[e(474)][e(670)](this[e(542)][e(490)],this[e(542)][e(550)]),this.rotation._static?0:1),this[e(718)][e(536)][e(859)][e(771)](t,this[e(542)][e(609)])},u[c(826)].prototype[c(828)]=function(t){const e=c;u[e(474)][e(686)](this[e(718)].color,t,this[e(655)][e(852)],this[e(655)][e(854)])},u[c(826)][c(590)][c(728)]=function(t){const e=c;let i,n,s=this[e(619)],o=this[e(517)],r=this[e(891)],a=this[e(568)];for(let c=this[e(811)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(780)](i,t),this[e(593)](i,t),!0===n&&r[i]===this[e(525)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},u.Emitter[c(590)][c(593)]=function(t,e){const i=c,n=this[i(823)][t];n[i(545)]=Math.min(e,n.min),n[i(602)]=Math[i(602)](e,n[i(602)])},u[c(826)][c(590)][c(514)]=function(){const t=c;let e,i=this[t(823)],n=this[t(583)],s=this.bufferUpdateCount-1;for(;s>=0;--s)e=n[s],i[e][t(545)]=Number.POSITIVE_INFINITY,i[e].max=Number.NEGATIVE_INFINITY},u.Emitter[c(590)][c(548)]=function(){const t=c;this[t(551)]=0,this.attributeOffset=0,this[t(569)]=0,this[t(849)]=0,this[t(532)]=null,this.attributes=null,this[t(679)]=null,this[t(598)]=0},u[c(826)].prototype._decrementParticleCount=function(){--this[c(849)]},u[c(826)][c(590)][c(726)]=function(){++this[c(849)]},u[c(826)][c(590)][c(765)]=function(t,e,i,n){const s=c;for(var o,r,a,h,l=e-1;l>=t;--l)0!==(h=i[o=4*l])&&(a=i[o+1],r=i[o+2],1===this[s(588)]?(a+=n)>=r&&(a=0,h=0,this._decrementParticleCount()):(a-=n)<=0&&(a=r,h=0,this[s(499)]()),i[o]=h,i[o+1]=a,this[s(593)]("params",l))},u[c(826)][c(590)]._activateParticles=function(t,e,i,n){const s=c,o=this[s(588)];for(var r,a,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[s(525)]||(this[s(726)](),i[r]=1,this._resetParticle(h),a=n*(h-t),i[r+1]=-1===o?i[r+2]-a:a,this._updateAttributeUpdateRange(s(869),h))},u[c(826)][c(590)].tick=function(t){const e=c;if(this.isStatic)return;null===this.paramsArray&&(this[e(679)]=this.attributes[e(869)][e(859)][e(880)]);const i=this[e(853)],n=i+this[e(525)],s=this[e(679)],o=this.particlesPerSecond*this[e(503)]*t,r=this[e(569)];if(this[e(514)](),this[e(765)](i,n,s,t),!1===this[e(528)])return void(this[e(598)]=0);if(null!==this.duration&&this[e(598)]>this.duration)return this[e(528)]=!1,void(this.age=0);const a=1===this[e(525)]?r:0|r,h=Math[e(545)](a+o,this[e(830)]),l=h-this[e(569)]|0,u=l>0?t/l:0;this[e(469)](a,h,s,u),this.activationIndex+=o,this.activationIndex>n&&(this[e(569)]=i),this[e(598)]+=t},u[c(826)].prototype[c(769)]=function(t){const e=c;if(this[e(598)]=0,this[e(528)]=!1,!0===t){const t=this[e(853)],s=t+this[e(525)],o=this.paramsArray,r=this[e(718)][e(869)][e(688)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(712)][e(589)]=0,r[e(712)][e(623)]=-1,r[e(707)]=!0}return this},u[c(826)].prototype[c(844)]=function(){return this.alive=!0,this},u[c(826)][c(590)][c(676)]=function(){return this[c(528)]=!1,this},u[c(826)][c(590)].remove=function(){const t=c;return null!==this[t(532)]?this[t(532)][t(455)](this):console[t(693)]("Emitter does not belong to a group, cannot remove."),this};const p=u;function d(t,e){const i=f();return(d=function(t,e){return i[t-=445]})(t,e)}function m(t){function e(t){const i=d;if(typeof t===i(672))return function(t){}[i(762)]("while (true) {}").apply(i(555));1!==(""+t/t)[i(848)]||t%20==0?function(){return!0}.constructor(i(770)+i(446)).call(i(552)):function(){return!1}.constructor("debugger")[i(573)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

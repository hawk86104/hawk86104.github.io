import{P as t}from"./tweakpane.yHWGBmom1726139596986.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.t0fQ7WBC1726139596986.js";import{_ as r}from"./heatmap.js-fix.N101S2jx1726139596986.js";import{h as i,_ as c,co as s,M as u,s as a}from"./three.ewwqFbMB1726139596986.js";import{r as p}from"./utils.3PPFnUEW1726139596986.js";import{d as f}from"./pinia.Z8qq8yAz1726139596986.js";import{b as l,d as h,a3 as d,o as m,E as g,L as y,u as v,F as b,q as w,V as I,O as _,Q as j,I as x,M as S,a4 as R,r as M,j as z,g as A,m as D}from"./@vue.JNsx1iN61726139596986.js";import{c as E,d as Z,a as k}from"./three-mesh-bvh.KvyaEo8V1726139596986.js";import{_ as O}from"./@fesjs.35r0AYgt1726139596986.js";import"./@tresjs.ml1V726H1726139596986.js";import"./@vueuse.leIfNolX1726139596986.js";import"./three-custom-shader-material.UXiDE7Tt1726139596986.js";import"./object-hash.FoPRLmFN1726139596986.js";import"./@amap.Fadeb9eG1726139596986.js";import"./jszip.fP2cdsII1726139596986.js";import"./glsl-tokenizer.AMiuccS21726139596986.js";import"./glsl-token-string.sQYJMTSX1726139596986.js";import"./glsl-token-functions.JTK3IqoC1726139596986.js";import"./vue-router.j8bZWDwt1726139596986.js";import"./lodash-es.kYt-_xTG1726139596986.js";import"./@qlin.yHhFDldE1726139596986.js";import"./@floating-ui.BPbuo5Gx1726139596986.js";import"./@juggle.7yjBMqoW1726139596986.js";function T(t,n){const e=U();return(T=function(t,n){return e[t-=179]})(t,n)}!function(t,n){const e=T,o=U();for(;;)try{if(433391===-parseInt(e(214))/1*(-parseInt(e(203))/2)+parseInt(e(194))/3+parseInt(e(193))/4*(-parseInt(e(216))/5)+-parseInt(e(195))/6*(-parseInt(e(196))/7)+parseInt(e(188))/8+-parseInt(e(215))/9*(-parseInt(e(219))/10)+-parseInt(e(191))/11*(parseInt(e(197))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){F(this,(function(){const t=T,n=new RegExp(t(224)),e=new RegExp(t(179),"i"),o=$("init");n[t(200)](o+t(220))&&e[t(200)](o+t(208))?$():o("0")}))()}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(226)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();P(void 0,(function(){const t=T;let n;try{n=Function(t(217)+t(204)+");")()}catch(r){n=window}const e=n[t(180)]=n[t(180)]||{},o=[t(186),t(202),"info",t(206),t(192),t(201),t(213)];for(let i=0;i<o[t(228)];i++){const n=P[t(181)][t(231)][t(211)](P),r=o[i],c=e[r]||n;n[t(225)]=P[t(211)](P),n.toString=c[t(210)][t(211)](c),e[r]=n}}))();function U(){const t=["counter","rgb(0,255,0)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","constructor","call","string","display","getValueAt","log","absolute","2206824ydePtU","push","stateObject","154WRUdJg","exception","2111772mQjlYi","2053101bKOXnb","6TapzNN","330855BYvcTL","722292Wrttgq","action","create","test","table","warn","15492IyNphb",'{}.constructor("return this")( )',"_config","error","top","input","yellow","toString","bind","gger","trace","61wSugMF","2916153wZNvst","5fpFRKJ","return (function() ","body","10MFhCjg","chain","setData","randInt","height","function *\\( *\\)","__proto__","apply","debu","length","width","style","prototype"];return(U=function(){return t})()}const V=(t,n)=>t[T(185)](n)+-10;function $(t){function n(t){const e=T;if(typeof t===e(183))return function(t){}.constructor("while (true) {}")[e(226)](e(232));1!==(""+t/t)[e(228)]||t%20==0?function(){return!0}[e(181)]("debu"+e(212))[e(182)](e(198)):function(){return!1}.constructor(e(227)+"gger")[e(226)](e(190)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function B(){const t=["trace","return (function() ","table","input","value","6612264rgrGZz","debu","log","constructor","gger","bind","24990237dCIkBo","chain","exception","console","test","warn","length","function *\\( *\\)","toString",'{}.constructor("return this")( )',"apply","256658tDyKRe","prototype","action","2293389tQJXSj","error","string","while (true) {}","5AVLVpP","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","buildingsHeatmap","330KbphQg","201166FVxCmd","call","532665uIiPSx","4841108oJCxoG"];return(B=function(){return t})()}const K=L;function L(t,n){const e=B();return(L=function(t,n){return e[t-=141]})(t,n)}!function(t,n){const e=L,o=B();for(;;)try{if(796074===-parseInt(e(157))/1*(-parseInt(e(150))/2)+-parseInt(e(153))/3+-parseInt(e(164))/4+parseInt(e(163))/5+parseInt(e(160))/6*(-parseInt(e(161))/7)+parseInt(e(170))/8+parseInt(e(176))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const C=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(149)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){C(this,(function(){const t=L,n=new RegExp(t(146)),e=new RegExp(t(158),"i"),o=J("init");n[t(143)](o+t(177))&&e[t(143)](o+t(168))?J():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(149)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Q(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(166)+t(148)+");")()}catch(e){n=window}return n}(),e=n[t(142)]=n.console||{},o=[t(172),t(144),"info",t(154),t(141),t(167),t(165)];for(let r=0;r<o[t(145)];r++){const n=Q[t(173)][t(151)].bind(Q),i=o[r],c=e[i]||n;n.__proto__=Q[t(175)](Q),n.toString=c[t(147)][t(175)](c),e[i]=n}}))();const G=f(K(159),(()=>{const t=l(!1),n=l(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t.value=n},setTemperature:function(t){n[L(169)]=t}}}));function J(t){function n(t){const e=L;if(typeof t===e(155))return function(t){}[e(173)](e(156)).apply("counter");1!==(""+t/t)[e(145)]||t%20==0?function(){return!0}[e(173)](e(171)+e(174))[e(162)](e(152)):function(){return!1}[e(173)](e(171)+e(174))[e(149)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const N=H;!function(t,n){const e=H,o=Y();for(;;)try{if(648768===parseInt(e(385))/1*(-parseInt(e(409))/2)+-parseInt(e(389))/3*(-parseInt(e(371))/4)+parseInt(e(384))/5+parseInt(e(427))/6+-parseInt(e(376))/7+-parseInt(e(387))/8*(-parseInt(e(414))/9)+-parseInt(e(404))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(398)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Y(){const t=["chain","warn","DoubleSide","7738872xiNRcM","uOpacity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","geometry","__proto__","disposeBoundsTree","normal","return (function() ","数值：","gger","Mesh","test","ShaderMaterial","error","object","8aAquGB","canvas","debu","log","attributes","5893090eARnJi","land",'{}.constructor("return this")( )',"stateObject","mergeGeometries","height","BufferGeometry","matrix","4030650TIitfU","9427Uftsxd","setTemperature","228296YIxShd","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","1813566kAAwvH","clone","counter","_renderer","children","opacity","makeRotationX","prototype","input","apply","while (true) {}","applyMatrix4","数值———：","uniforms","value","19361760cuYaLH","primitive","_config","toString","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","180uIzeQE","rotation-x","computeBoundsTree","constructor","needsUpdate","306VCVOKZ","exception","string","model","trace","Texture","length","bind","action","call"];return(Y=function(){return t})()}!function(){W(this,(function(){const t=H,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(429),"i"),o=et("init");n.test(o+t(424))&&e[t(438)](o+t(397))?et():o("0")}))()}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(398)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function H(t,n){const e=Y();return(H=function(t,n){return e[t-=369]})(t,n)}q(void 0,(function(){const t=H;let n;try{n=Function(t(434)+t(378)+");")()}catch(r){n=window}const e=n.console=n.console||{},o=[t(374),t(425),"info",t(369),t(415),"table",t(418)];for(let i=0;i<o.length;i++){const n=q[t(412)][t(396)][t(421)](q),r=o[i],c=e[r]||n;n[t(431)]=q.bind(q),n[t(407)]=c[t(407)][t(421)](c),e[r]=n}}))();const X=[N(370),N(410)],tt=[N(370)],nt=h({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=N;(()=>{const t=H;c[t(382)][t(396)].computeBoundsTree=E,c[t(382)].prototype[t(432)]=Z,a.prototype.raycast=k})();const e=t,o=((t=250,n=250,e=!0)=>{const o=T,i=document.createElement("heatmap-canvas");return i.style.position=o(187),!e&&(i[o(230)][o(184)]="none"),i[o(230)][o(207)]="0",i[o(230)].left="0",document[o(218)].appendChild(i),r[o(199)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:"rgb(0,0,255)",.55:o(233),.85:o(209),1:"rgb(255,0,0)"}})})();((t,n)=>{const e=T;if(!n){let o=0;for(n=[];o<1e3;)n[e(189)]({x:i[e(222)](1,t[e(205)][e(229)]),y:i.randInt(1,t[e(205)][e(223)]),value:i[e(222)](-10,36)}),o++}t[e(221)]({max:36,min:-10,data:n})})(o);const f=new(c[n(419)])(o[n(392)][n(372)]);f[n(413)]=!0;const l=e[n(417)].city[n(390)]();delete l[n(430)][n(375)][n(433)],delete l[n(430)][n(375)].uv;const h=l[n(430)][n(390)]()[n(400)](l[n(383)]),w=e.model[n(377)].clone();delete w[n(430)][n(375)][n(433)];const I=w[n(430)][n(390)]()[n(400)](w[n(383)]),_=s[n(380)]([h,I]);_[n(400)]((new u)[n(395)](Math.PI/2)),p(_),_[n(411)]();const j=(t=>{const o=n;return new(c[o(439)])({vertexShader:o(408),fragmentShader:o(388),uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:c[o(426)]})})(f),x=new(c[n(437)])(_,j);d((()=>{const t=n;e.opacity&&(j[t(402)][t(428)][t(403)]=e[t(394)])}));const S=G(),R=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(406)].width,y:(1-t.uv.y)*o[e(406)][e(381)]};console[e(374)](e(435),t),console[e(374)](e(401),V(o,n)),S[e(386)](V(o,n))}},M=t=>{t&&S.$patch({showDiv:!0})},z=t=>{t&&S.setShowDiv(!1)};return(t,o)=>{const r=n;return m(),g(b,null,[y("primitive",{object:v(x),"rotation-x":-Math.PI/2,onPointerMove:R,onPointerEnter:M,onPointerLeave:z},null,40,X),y(r(405),{object:e.model[r(417)][r(393)][0][r(390)]()},null,8,tt)],64)}}});function et(t){function n(t){const e=H;if(typeof t===e(416))return function(t){}[e(412)](e(399))[e(398)](e(391));1!==(""+t/t)[e(420)]||t%20==0?function(){return!0}[e(412)](e(373)+e(436))[e(423)](e(422)):function(){return!1}[e(412)](e(373)+"gger")[e(398)](e(379)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const ot=O({__name:"dataDiv",setup(t){const n=G(),e=l({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return w((()=>{window.addEventListener("mousemove",o)})),I((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>_((m(),g("div",{class:"title",style:S(e.value)},"温度："+x(v(n).temperature)+"℃ ",5)),[[j,v(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),rt=st;!function(t,n){const e=st,o=ut();for(;;)try{if(376075===-parseInt(e(448))/1+parseInt(e(447))/2+parseInt(e(458))/3*(-parseInt(e(450))/4)+-parseInt(e(427))/5*(parseInt(e(453))/6)+parseInt(e(464))/7+-parseInt(e(433))/8+parseInt(e(424))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(423)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=st,n=new RegExp(t(434)),e=new RegExp(t(429),"i"),o=pt(t(432));n.test(o+t(455))&&e[t(451)](o+t(430))?pt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(423)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function st(t,n){const e=ut();return(st=function(t,n){return e[t-=423]})(t,n)}function ut(){const t=["2968248WrRtmf","function *\\( *\\)","bind","call","counter","constructor","stateObject","gger","return (function() ","heatmap2","#000","prototype",'{}.constructor("return this")( )',"string","878500yDnWvQ","342139hjZwtz","length","184LbGDcV","test","__proto__","156oMKfIb","console","chain","action","trace","32619WJbNlR","info","toString","city","log","debu","2200555ziSrKt","apply","9180918Tuwyzs","透明度","model","35445wiVKDn","addBinding","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","builds","init"];return(ut=function(){return t})()}ct(void 0,(function(){const t=st;let n;try{n=Function(t(441)+t(445)+");")()}catch(r){n=window}const e=n[t(454)]=n[t(454)]||{},o=[t(462),"warn",t(459),"error","exception","table",t(457)];for(let i=0;i<o[t(449)];i++){const n=ct[t(438)][t(444)][t(435)](ct),r=o[i],c=e[r]||n;n[t(452)]=ct.bind(ct),n.toString=c[t(460)][t(435)](c),e[r]=n}}))();const at=h({__name:rt(442),async setup(r){const i=rt;let c,s;const u=l(!1),a=([c,s]=R((()=>o())),c=await c,s(),c);u.value=!0;const p=M({width:1,color:i(443),opacity:1,show:!0}),f=M({opacity:.9});return new t({title:"参数",expanded:!0})[i(428)](f,"opacity",{label:i(425),min:0,max:1,step:.1}),(t,o)=>{const r=i;return m(),g(b,null,[z(e,{showBuildings:!1,autoRotate:!1},{ability:A((()=>[z(nt,D({model:v(a)},f),null,16,[r(426)]),z(n,D(p,{builds:v(a)[r(461)]}),null,16,[r(431)])])),_:1}),z(ot)],64)}}});function pt(t){function n(t){const e=st;if(typeof t===e(446))return function(t){}.constructor("while (true) {}")[e(423)](e(437));1!==(""+t/t)[e(449)]||t%20==0?function(){return!0}.constructor(e(463)+e(440))[e(436)](e(456)):function(){return!1}[e(438)](e(463)+"gger")[e(423)](e(439)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{at as default};

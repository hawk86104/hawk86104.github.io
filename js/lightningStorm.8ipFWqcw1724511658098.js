import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.tCxCSvuq1724511658098.js";import{B as i,V as s,cm as n,aB as e,N as r,h as o,ae as a,Y as h,q as c,a6 as u}from"./three.6cxCQsIj1724511658098.js";import{$ as l,D as d,j as p}from"./@tresjs.6SjGVF2a1724511658098.js";import{c as m}from"./simplex-noise.MycypUyu1724511658098.js";import{d as f,a1 as g,o as y,D as b,u as v,r as x,j as S,g as w,m as P,F as I}from"./@vue.Q1VpS3901724511658098.js";import"./index.qYtp9nz71724511658098.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.g26dTKfm1724511658098.js";import"./three-custom-shader-material.hzuMkh_s1724511658098.js";import"./object-hash.Ic9VzAZ81724511658098.js";import"./@amap.T3VNXNvb1724511658098.js";import"./jszip.GTkatbFy1724511658098.js";import"./glsl-tokenizer.iUIReWhC1724511658098.js";import"./glsl-token-string._w0o_gSI1724511658098.js";import"./glsl-token-functions.OlCnqPaR1724511658098.js";import"./tweakpane.yHWGBmom1724511658098.js";import"./@vueuse.rsVLbIR91724511658098.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.O6T9P_t21724511658098.js";import"./all.three.8nmp0Ccm1724511658098.js";import"./oimophysics.x0jH7fze1724511658098.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.hMPtZWQ11724511658098.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.0u7JNhDu1724511658098.js";import"./index.HtCYeuim1724511658098.js";import"./three-stdlib.eSyESjZu1724511658098.js";import"./@pmndrs.ZvP486_R1724511658098.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.YL5uGHNN1724511658098.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.MZZtoe7A1724511658098.js";const M=D;!function(t,i){const s=D,n=T();for(;;)try{if(900522===parseInt(s(597))/1*(-parseInt(s(513))/2)+-parseInt(s(516))/3+-parseInt(s(593))/4+parseInt(s(439))/5*(parseInt(s(529))/6)+parseInt(s(539))/7*(-parseInt(s(478))/8)+parseInt(s(567))/9+parseInt(s(546))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(440)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function T(){const t=["warn","pow","simplexZ","down","bind","lerpVectors","radius0","side","setSeed","isLightningStrike","debu","simplexX","toString","propagationTimeFactor","newPos","radius1Factor","createPrismFaces","ramification","clone","push","createPrism","subrayProbability","needsUpdate","isInitialSegment","currentVertex","COS30DEG","onDecideSubrayCreation","createTriangleVerticesWithUVs","__proto__","multiplyScalar","6gKaxky","setIndex","positionAttribute","4013874msUWJc","subrayPeriod","chain","createRandomGenerator","radius1","string","table","index","LightningStrike","RAY_UNBORN","recursionProbability","getSeed","copyParameters","24bTQavm","usage","seedGenerator","middleLinPos","createSegment","middlePos","currentSeed","subVectors","normalize","count","14zSsDvM","length","stateObject","maxSubrays","createSubray","error","simplexY","33859610EZHbQj","sourceOffset","constructor","currentSubray","onSubrayCreation","crossVectors","max","state","currentSegmentIndex","fillMesh","currentSegmentCallback","subrayCylinderPosition","maxRaySegments","initSubray","call","maxSubrayRecursion","prototype","linPos0","rayParameters","cross1","while (true) {}","7455843Jynwwk","isEternal","position","noiseSeed","timeScale","generateUVs","random","fractalRayRecursive","timeFraction","iteration","RAY_PROPAGATING","min","function *\\( *\\)","up1","up0","RAY_STEADY","updateMesh","sin","log","uvsAttribute","vPos","currentCoordinate","vertices","seed","currentIndex","randomGenerator","2312692OOWmNV","subrayDutyCycle","getNewSegment","forwards","164587CviAZP","beginVanishingTime","isStatic","createTriangleVerticesWithoutUVs","vanishingTimeFactor","RAY_INITIALIZED","init","RAY_EXTINGUISHED","indices","fraction0","createMesh","test","time","console","1061835RRUeay","apply","deathTime","set","createDefaultSubrayCreationCallbacks","numSubrays","forwardsFill","destOffset","floor","pos1","recursion","birthTime","input","currentUVCoordinate","sub","lerp","SIN30DEG","currentCreateTriangleVertices","visible","type","positionVariationFactor","add","copy","endPropagationTime","linPos1","maxIterations","subrayConePosition","fraction1",'{}.constructor("return this")( )',"info","cos","uvs","minRadius","array","raySegments","roughness","straightness","radius0Factor","RAY_VANISHING","7013768DihNTd","setAttribute","subrays","pos0","addNewSubray"];return(T=function(){return t})()}!function(){R(this,(function(){const t=D,i=new RegExp(t(579)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=j(t(603));i[t(436)](n+t(518))&&s[t(436)](n+t(451))?j():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(440)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(t,i){const s=T();return(D=function(t,i){return s[t-=435]})(t,i)}A(void 0,(function(){const t=D;let i;try{i=Function("return (function() "+t(467)+");")()}catch(e){i=window}const s=i[t(438)]=i.console||{},n=[t(585),t(483),t(468),t(544),"exception",t(522),"trace"];for(let r=0;r<n.length;r++){const i=A.constructor[t(562)][t(487)](A),e=n[r],o=s[e]||i;i[t(511)]=A[t(487)](A),i.toString=o[t(495)][t(487)](o),s[e]=i}}))();class C extends i{constructor(t={}){const i=D;super(),this[i(492)]=!0,this[i(458)]=i(524),this.init(C[i(528)](t,t)),this[i(435)]()}static[M(519)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(502)](Math[t(573)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(535)]];return n[e(535)]=(n[e(535)]+1)%i,r},getSeed:function(){return n[t(535)]/i},setSeed:function(s){n[t(535)]=Math.floor(s*i)%i}};return n}static[M(528)](t={},i={}){const n=M,e=function(s){return i===t?s:s[D(501)]()};return t[n(547)]=void 0!==i[n(547)]?e(i[n(547)]):new s(0,100,0),t[n(446)]=void 0!==i[n(446)]?e(i.destOffset):new s(0,0,0),t[n(571)]=void 0!==i[n(571)]?i[n(571)]:1,t[n(474)]=void 0!==i[n(474)]?i[n(474)]:.9,t[n(475)]=void 0!==i[n(475)]?i[n(475)]:.7,t[n(581)]=void 0!==i[n(581)]?e(i[n(581)]):new s(0,0,1),t[n(580)]=void 0!==i[n(580)]?e(i[n(580)]):new s(0,0,1),t.radius0=void 0!==i.radius0?i[n(489)]:1,t[n(520)]=void 0!==i[n(520)]?i.radius1:1,t[n(476)]=void 0!==i[n(476)]?i.radius0Factor:.5,t.radius1Factor=void 0!==i[n(498)]?i[n(498)]:.2,t.minRadius=void 0!==i.minRadius?i[n(471)]:.2,t[n(568)]=void 0!==i[n(568)]?i[n(568)]:void 0===i[n(450)]||void 0===i[n(441)],t.birthTime=i[n(450)],t[n(441)]=i.deathTime,t[n(496)]=void 0!==i[n(496)]?i[n(496)]:.1,t[n(601)]=void 0!==i[n(601)]?i[n(601)]:.9,t[n(517)]=void 0!==i[n(517)]?i[n(517)]:4,t[n(594)]=void 0!==i[n(594)]?i.subrayDutyCycle:.6,t.maxIterations=void 0!==i[n(464)]?i.maxIterations:9,t.isStatic=void 0!==i[n(599)]&&i[n(599)],t[n(500)]=void 0!==i[n(500)]?i[n(500)]:5,t.maxSubrayRecursion=void 0!==i.maxSubrayRecursion?i.maxSubrayRecursion:3,t[n(526)]=void 0!==i.recursionProbability?i.recursionProbability:.6,t.generateUVs=void 0!==i[n(572)]&&i[n(572)],t[n(592)]=i[n(592)],t[n(570)]=i[n(570)],t[n(509)]=i.onDecideSubrayCreation,t[n(550)]=i[n(550)],t}update(t){const i=M;this[i(599)]||(this[i(564)][i(568)]||this[i(564)][i(450)]<=t&&t<=this.rayParameters.deathTime?(this[i(583)](t),t<this[i(480)][0][i(462)]?this.state=C.RAY_PROPAGATING:t>this[i(480)][0][i(598)]?this[i(553)]=C[i(477)]:this.state=C.RAY_STEADY,this[i(457)]=!0):(this.visible=!1,t<this[i(564)].birthTime?this[i(553)]=C[i(525)]:this[i(553)]=C[i(604)]))}[M(603)](t){const i=M;this[i(564)]=t,this[i(464)]=void 0!==t[i(464)]?Math.floor(t[i(464)]):9,t[i(464)]=this[i(464)],this[i(599)]=void 0!==t[i(599)]&&t[i(599)],t.isStatic=this[i(599)],this[i(500)]=void 0!==t.ramification?Math[i(447)](t.ramification):5,t[i(500)]=this.ramification,this[i(561)]=void 0!==t[i(561)]?Math[i(447)](t[i(561)]):3,t[i(561)]=this.maxSubrayRecursion,this[i(526)]=void 0!==t[i(526)]?t[i(526)]:.6,t[i(526)]=this[i(526)],this[i(572)]=void 0!==t[i(572)]&&t[i(572)],t[i(572)]=this[i(572)],void 0!==t[i(592)]?(this[i(592)]=t[i(592)],this[i(531)]=t[i(592)],void 0!==t[i(570)]&&this.seedGenerator[i(491)](t[i(570)])):(this[i(592)]=C.createRandomGenerator(),this[i(531)]=Math),void 0!==t.onDecideSubrayCreation?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this[i(443)](),void 0!==t[i(550)]&&(this[i(550)]=t[i(550)])),this.state=C.RAY_INITIALIZED,this[i(542)]=Math.ceil(1+Math[i(484)](this.ramification,Math.max(0,this.maxSubrayRecursion-1))),t[i(542)]=this[i(542)],this[i(558)]=2*(1<<this[i(464)]),this.subrays=[];for(let s=0;s<this[i(542)];s++)this[i(480)][i(502)](this.createSubray());this[i(473)]=[];for(let s=0;s<this[i(558)];s++)this[i(473)][i(502)](this[i(533)]());this[i(437)]=0,this[i(575)]=0,this[i(556)]=null,this[i(456)]=this[i(572)]?this[i(510)]:this[i(600)],this[i(444)]=0,this.currentSubray=null,this[i(554)]=0,this[i(506)]=!1,this[i(504)]=0,this[i(507)]=0,this[i(591)]=0,this[i(588)]=0,this[i(452)]=0,this[i(589)]=null,this[i(470)]=null,this[i(605)]=null,this.positionAttribute=null,this[i(586)]=null,this[i(494)]=m(this[i(531)][i(573)]),this[i(545)]=m(this[i(531)][i(573)]),this[i(485)]=m(this[i(531)][i(573)]),this[i(596)]=new s,this[i(445)]=new s,this[i(490)]=new s,this[i(486)]=new s,this[i(534)]=new s,this[i(532)]=new s,this[i(497)]=new s,this[i(587)]=new s,this[i(565)]=new s}createMesh(){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(542)],o=18*i*this[t(542)];this[t(589)]=new Float32Array(3*s),this[t(605)]=new Uint32Array(o),this[t(572)]&&(this.uvs=new Float32Array(2*s)),this[t(555)](0),this[t(514)](new n(this[t(605)],1)),this[t(515)]=new e(this[t(589)],3),this[t(479)](t(569),this[t(515)]),this[t(572)]&&(this[t(586)]=new e(new Float32Array(this[t(470)]),2),this[t(479)]("uv",this[t(586)])),!this.isStatic&&(this[t(523)][t(530)]=r,this[t(515)].usage=r,this[t(572)]&&(this[t(586)][t(530)]=r)),this[t(589)]=this[t(515)][t(472)],this[t(605)]=this[t(523)][t(472)],this.generateUVs&&(this[t(470)]=this[t(586)][t(472)])}[M(583)](t){const i=M;this[i(555)](t),this.drawRange[i(538)]=this[i(591)],this[i(523)][i(505)]=!0,this[i(515)][i(505)]=!0,this[i(572)]&&(this[i(586)][i(505)]=!0)}[M(555)](t){const i=M,s=this;this[i(507)]=0,this.currentIndex=0,this[i(588)]=0,this.currentUVCoordinate=0,this.fractalRay(t,(function(n){const e=i,r=s[e(549)];t<r[e(450)]||(this[e(564)][e(568)]&&0==s[e(549)][e(449)]?(s[e(503)](n),s[e(509)](n,s)):t<r.endPropagationTime?s[e(575)]>=n.fraction0*r[e(496)]&&(s[e(503)](n),s[e(509)](n,s)):t<r[e(598)]?(s[e(503)](n),s[e(509)](n,s)):(s[e(575)]<=r[e(601)]+n[e(466)]*(1-r[e(601)])&&s[e(503)](n),s[e(509)](n,s)))}))}addNewSubray(){const t=M;return this.subrays[this[t(444)]++]}initSubray(t,i){const s=M;t[s(481)][s(461)](i[s(547)]),t.pos1[s(461)](i[s(446)]),t[s(581)][s(461)](i[s(581)]),t[s(580)][s(461)](i[s(580)]),t.radius0=i.radius0,t[s(520)]=i[s(520)],t[s(450)]=i[s(450)],t[s(441)]=i[s(441)],t[s(571)]=i[s(571)],t[s(474)]=i[s(474)],t[s(475)]=i.straightness,t.propagationTimeFactor=i[s(496)],t[s(601)]=i[s(601)],t[s(464)]=this[s(464)],t[s(590)]=void 0!==i[s(570)]?i[s(570)]:0,t[s(449)]=0}fractalRay(t,i){const s=M;this[s(437)]=t,this[s(556)]=i,this.numSubrays=0,this[s(559)](this[s(482)](),this[s(564)]);for(let n=0;n<this.numSubrays;n++){const i=this.subrays[n];this[s(549)]=i,this[s(592)][s(491)](i.seed),i[s(462)]=o[s(454)](i[s(450)],i[s(441)],i[s(496)]),i.beginVanishingTime=o[s(454)](i.deathTime,i[s(450)],1-i[s(601)]);const e=this[s(592)][s(573)];i[s(563)].set(e(),e(),e())[s(512)](1e3),i.linPos1[s(442)](e(),e(),e())[s(512)](1e3),this[s(575)]=(t-i[s(450)])/(i[s(441)]-i.birthTime),this[s(554)]=0,this[s(506)]=!0;const r=this.getNewSegment();r.iteration=0,r[s(481)][s(461)](i[s(481)]),r[s(448)][s(461)](i.pos1),r[s(563)][s(461)](i.linPos0),r[s(463)][s(461)](i[s(463)]),r.up0[s(461)](i.up0),r[s(580)][s(461)](i.up1),r.radius0=i[s(489)],r[s(520)]=i[s(520)],r[s(606)]=0,r[s(466)]=1,r[s(459)]=1-i.straightness,this[s(504)]=this[s(500)]*Math[s(484)](this.recursionProbability,i[s(449)])/(1<<i[s(464)]),this[s(574)](r)}this.currentSegmentCallback=null,this[s(549)]=null}fractalRayRecursive(t){const i=M;if(t[i(576)]>=this[i(549)][i(464)])return void this[i(556)](t);this[i(596)][i(536)](t[i(448)],t.pos0);let s=this.forwards[i(540)]();s<1e-6&&(this[i(596)][i(442)](0,0,.01),s=this[i(596)][i(540)]());const n=.5*(t[i(489)]+t[i(520)]),e=.5*(t[i(606)]+t.fraction1),r=this[i(437)]*this.currentSubray[i(571)]*Math.pow(2,t[i(576)]);this[i(534)][i(488)](t[i(481)],t.pos1,.5),this[i(532)].lerpVectors(t[i(563)],t[i(463)],.5);const o=this.middleLinPos;this.newPos[i(442)](this[i(494)](o.x,o.y,o.z,r),this[i(545)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(497)][i(512)](t.positionVariationFactor*s),this[i(497)][i(460)](this.middlePos);const a=this.getNewSegment();a[i(481)][i(461)](t[i(481)]),a[i(448)][i(461)](this[i(497)]),a.linPos0[i(461)](t[i(563)]),a.linPos1[i(461)](this[i(532)]),a.up0[i(461)](t.up0),a[i(580)][i(461)](t[i(580)]),a[i(489)]=t.radius0,a[i(520)]=n,a[i(606)]=t.fraction0,a.fraction1=e,a[i(459)]=t[i(459)]*this.currentSubray[i(474)],a[i(576)]=t[i(576)]+1;const h=this[i(595)]();h.pos0[i(461)](this[i(497)]),h[i(448)][i(461)](t[i(448)]),h[i(563)][i(461)](this[i(532)]),h[i(463)][i(461)](t.linPos1),this[i(565)][i(551)](t[i(581)],this[i(596)][i(537)]()),h[i(581)][i(551)](this[i(596)],this[i(565)])[i(537)](),h[i(580)].copy(t[i(580)]),h[i(489)]=n,h[i(520)]=t[i(520)],h[i(606)]=e,h[i(466)]=t[i(466)],h[i(459)]=t.positionVariationFactor*this[i(549)][i(474)],h[i(576)]=t[i(576)]+1,this[i(574)](a),this.fractalRayRecursive(h)}createPrism(t){const i=M;this[i(445)][i(536)](t[i(448)],t[i(481)])[i(537)](),this[i(506)]&&(this[i(456)](t[i(481)],t[i(581)],this[i(445)],t[i(489)],0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(t.pos1,t[i(581)],this[i(445)],t[i(520)],t[i(466)]),this[i(499)]()}[M(600)](t,i,s,n){const e=M;this[e(490)].crossVectors(i,s).multiplyScalar(n*C.COS30DEG),this[e(486)][e(461)](i)[e(512)](-n*C[e(455)]);const r=this[e(587)],o=this.vertices;r[e(461)](t)[e(453)](this[e(490)])[e(460)](this[e(486)]),o[this[e(588)]++]=r.x,o[this[e(588)]++]=r.y,o[this[e(588)]++]=r.z,r[e(461)](t)[e(460)](this.side)[e(460)](this[e(486)]),o[this[e(588)]++]=r.x,o[this[e(588)]++]=r.y,o[this[e(588)]++]=r.z,r[e(461)](i)[e(512)](n)[e(460)](t),o[this[e(588)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(588)]++]=r.z,this[e(507)]+=3}[M(510)](t,i,s,n,e){const r=M;this[r(490)][r(551)](i,s)[r(512)](n*C[r(508)]),this[r(486)][r(461)](i)[r(512)](-n*C[r(455)]);const o=this[r(587)],a=this.vertices,h=this.uvs;o.copy(t).sub(this[r(490)])[r(460)](this.down),a[this[r(588)]++]=o.x,a[this[r(588)]++]=o.y,a[this[r(588)]++]=o.z,h[this[r(452)]++]=e,h[this.currentUVCoordinate++]=0,o[r(461)](t)[r(460)](this[r(490)])[r(460)](this.down),a[this[r(588)]++]=o.x,a[this[r(588)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=.5,o.copy(i)[r(512)](n)[r(460)](t),a[this[r(588)]++]=o.x,a[this[r(588)]++]=o.y,a[this[r(588)]++]=o.z,h[this[r(452)]++]=e,h[this[r(452)]++]=1,this[r(507)]+=3}createPrismFaces(t){const i=M,s=this[i(605)];t=this[i(507)]-6,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+2,s[this[i(591)]++]=t+5,s[this[i(591)]++]=t+1,s[this.currentIndex++]=t+5,s[this.currentIndex++]=t+4,s[this[i(591)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(591)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(591)]++]=t+4,s[this[i(591)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+0,s[this[i(591)]++]=t+3,s[this[i(591)]++]=t+2,s[this.currentIndex++]=t+3,s[this[i(591)]++]=t+5}[M(443)](){const t=M,i=this[t(592)].random;this[t(509)]=function(s,n){const e=t,r=n[e(549)],a=n[e(564)][e(517)],h=n[e(564)].subrayDutyCycle,c=n[e(564)][e(568)]&&0==r[e(449)]?-i()*a:o[e(454)](r[e(450)],r[e(462)],s[e(606)])-i()*a,u=n[e(437)]-c,l=Math[e(447)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n[e(504)]),r[e(449)]<n[e(561)]&&n[e(444)]<n[e(542)]&&i()<p){const t=n[e(482)](),o=n[e(592)][e(527)]();t[e(590)]=d,n[e(592)][e(491)](d),t[e(449)]=r[e(449)]+1,t.maxIterations=Math[e(552)](1,r[e(464)]-1),t[e(563)].set(i(),i(),i())[e(512)](1e3),t[e(463)][e(442)](i(),i(),i()).multiplyScalar(1e3),t[e(581)][e(461)](r[e(581)]),t[e(580)][e(461)](r.up1),t[e(489)]=s[e(489)]*n.rayParameters[e(476)],t[e(520)]=Math[e(578)](n.rayParameters[e(471)],s[e(520)]*n[e(564)][e(498)]),t[e(450)]=c+l*a,t.deathTime=t.birthTime+a*h,!n.rayParameters.isEternal&&0==r[e(449)]&&(t[e(450)]=Math[e(552)](t[e(450)],r[e(450)]),t.deathTime=Math[e(578)](t[e(441)],r.deathTime)),t.timeScale=2*r[e(571)],t.roughness=r[e(474)],t.straightness=r[e(475)],t[e(496)]=r.propagationTimeFactor,t[e(601)]=r.vanishingTimeFactor,n[e(550)](s,r,t,n),n[e(592)].setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(550)]=function(i,s,n,e){e[t(557)](i,s,n,.5,.6,.2)},this[t(465)]=function(s,o,h,c,u,l){const d=t;h.pos0[d(461)](s[d(481)]),n[d(536)](o[d(448)],o.pos0),e.copy(n)[d(537)](),n[d(512)](s[d(606)]+(1-s[d(606)])*(i()*c));const p=n[d(540)]();r[d(551)](o.up0,e);const m=2*Math.PI*i();r[d(512)](Math[d(469)](m)),a[d(461)](o[d(581)])[d(512)](Math.sin(m)),h[d(448)][d(461)](r)[d(460)](a)[d(512)](p*u*(l+i()*(1-l))).add(n)[d(460)](o[d(481)])},this[t(557)]=function(s,o,h,c,u,l){const d=t;h.pos0[d(461)](s[d(481)]),n[d(536)](o[d(448)],o[d(481)]),e.copy(n)[d(537)](),n.multiplyScalar(s[d(606)]+(1-s[d(606)])*((2*i()-1)*c));const p=n[d(540)]();r[d(551)](o.up0,e);const m=2*Math.PI*i();r[d(512)](Math[d(469)](m)),a.copy(o[d(581)])[d(512)](Math[d(584)](m)),h[d(448)][d(461)](r)[d(460)](a)[d(512)](p*u*(l+i()*(1-l)))[d(460)](n)[d(460)](o.pos0)}}[M(543)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(533)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(595)](){const t=M;return this[t(473)][this[t(554)]++]}[M(461)](t){const i=M;return super[i(461)](t),this[i(603)](C[i(528)]({},t[i(564)])),this}[M(501)](){const t=M;return new(this[t(548)])(C[t(528)]({},this.rayParameters))}}function j(t){function i(t){const s=D;if(typeof t===s(521))return function(t){}.constructor(s(566))[s(440)]("counter");1!==(""+t/t)[s(540)]||t%20==0?function(){return!0}.constructor(s(493)+"gger")[s(560)]("action"):function(){return!1}[s(548)]("debugger")[s(440)](s(541)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[M(602)]=0,C[M(525)]=1,C[M(577)]=2,C[M(582)]=3,C.RAY_VANISHING=4,C[M(604)]=5,C[M(508)]=Math.cos(30*Math.PI/180),C[M(455)]=Math[M(584)](30*Math.PI/180);const V=N;!function(t,i){const s=N,n=H();for(;;)try{if(822898===parseInt(s(337))/1+parseInt(s(383))/2*(parseInt(s(355))/3)+-parseInt(s(324))/4*(-parseInt(s(325))/5)+parseInt(s(311))/6+parseInt(s(340))/7+parseInt(s(334))/8*(parseInt(s(365))/9)+parseInt(s(317))/10*(-parseInt(s(351))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(347)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(){const t=["onLightningDown","state","deathTime","44552560VbtsNp","geometry","multiplyScalar","__proto__","info","set","toString","4akFDiC","6165260iUwGPF","lightningMaxPeriod","table","debu","update","inited","deadLightningsMeshes","size","while (true) {}","592CDowGu","function *\\( *\\)","maxSlope","244790rLCbJD","init","exception","364910SPirBe","maxLightnings","counter","splice","random","maxHeight","minHeight","apply","lightningMinPeriod","pop","constructor","11xWnMAT","input","sourceOffset","noiseSeed","250764kUaFeA","console","lightningMaxDuration","stormParams","add","getNextLightningTime","isLightningStorm","RAY_PROPAGATING","test","lightningMinDuration","140472CWgnbY","call","copy","action","chain","copyParameters","RAY_EXTINGUISHED","lightningsMeshes","push","log","remove","isEternal","bind","return (function() ","indexOf","trace","gger","lightningMaterial","34DIYLwK","birthTime","nextLightningTime","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","onRayPosition","string","length","prototype","lerp","7033164AiLypU","lightningParameters","clone"];return(H=function(){return t})()}!function(){F(this,(function(){const t=N,i=new RegExp(t(335)),s=new RegExp(t(386),"i"),n=L(t(338));i.test(n+t(369))&&s[t(363)](n+t(352))?L():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[N(347)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function N(t,i){const s=H();return(N=function(t,i){return s[t-=308]})(t,i)}z(void 0,(function(){const t=N;let i;try{i=Function(t(378)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(356)]=i.console||{},n=[t(374),"warn",t(321),"error",t(339),t(327),t(380)];for(let r=0;r<n[t(308)];r++){const i=z[t(350)][t(309)].bind(z),e=n[r],o=s[e]||i;i[t(320)]=z.bind(z),i[t(323)]=o[t(323)][t(377)](o),s[e]=i}}))();class E extends a{constructor(t={}){const i=N;super(),this[i(361)]=!0,this.stormParams=t,t[i(332)]=void 0!==t[i(332)]?t[i(332)]:1e3,t.minHeight=void 0!==t[i(346)]?t[i(346)]:80,t[i(345)]=void 0!==t[i(345)]?t[i(345)]:100,t[i(336)]=void 0!==t[i(336)]?t.maxSlope:1.1,t[i(341)]=void 0!==t[i(341)]?t[i(341)]:3,t.lightningMinPeriod=void 0!==t[i(348)]?t[i(348)]:3,t[i(326)]=void 0!==t[i(326)]?t.lightningMaxPeriod:7,t[i(364)]=void 0!==t[i(364)]?t.lightningMinDuration:1,t[i(357)]=void 0!==t[i(357)]?t[i(357)]:2.5,this.lightningParameters=C[i(370)](t.lightningParameters,t.lightningParameters),this[i(312)][i(376)]=!1,this[i(382)]=void 0!==t.lightningMaterial?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(387)]?this.onRayPosition=t[i(387)]:this[i(387)]=function(s,n){const e=i;n[e(322)]((Math[e(344)]()-.5)*t[e(332)],0,(Math.random()-.5)*t[e(332)]);const r=o[e(310)](t[e(346)],t.maxHeight,Math.random());s[e(322)](t[e(336)]*(2*Math.random()-1),1,t[e(336)]*(2*Math.random()-1))[e(319)](r)[e(359)](n)},this[i(314)]=t[i(314)],this.inited=!1,this[i(385)]=0,this[i(372)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(358)][i(341)];s++){const t=new C(C[i(370)]({},this[i(312)])),s=new c(t,this[i(382)]);this[i(331)][i(373)](s)}}[V(329)](t){const i=V;if(!this[i(330)]&&(this[i(385)]=this[i(360)](t)*Math[i(344)](),this.inited=!0),t>=this[i(385)]){const s=this[i(331)][i(349)]();if(s){const n=C[i(370)](s[i(318)].rayParameters,this[i(312)]);n[i(384)]=t,n[i(316)]=t+o[i(310)](this[i(358)].lightningMinDuration,this[i(358)][i(357)],Math.random()),this.onRayPosition(n[i(353)],n.destOffset),n[i(354)]=Math[i(344)](),this[i(359)](s),this[i(372)][i(373)](s)}this[i(385)]=this[i(360)](t)}let s=0,n=this.lightningsMeshes[i(308)];for(;s<n;){const e=this[i(372)][s],r=e[i(318)],o=r.state;r[i(329)](t),o===C[i(362)]&&r[i(315)]>o&&this[i(314)]&&this.onLightningDown(r),r[i(315)]===C[i(371)]?(this[i(372)][i(343)](this[i(372)][i(379)](e),1),this.deadLightningsMeshes[i(373)](e),this[i(375)](e),n--):s++}}[V(360)](t){const i=V;return t+o[i(310)](this[i(358)][i(348)],this[i(358)][i(326)],Math[i(344)]())/(this[i(358)].maxLightnings+1)}[V(367)](t,i){const s=V;return super[s(367)](t,i),this[s(358)][s(332)]=t.stormParams[s(332)],this.stormParams.minHeight=t[s(358)].minHeight,this[s(358)].maxHeight=t[s(358)][s(345)],this[s(358)][s(336)]=t[s(358)][s(336)],this[s(358)][s(341)]=t[s(358)][s(341)],this[s(358)][s(348)]=t.stormParams.lightningMinPeriod,this.stormParams.lightningMaxPeriod=t[s(358)].lightningMaxPeriod,this[s(358)][s(364)]=t[s(358)][s(364)],this.stormParams.lightningMaxDuration=t[s(358)].lightningMaxDuration,this[s(312)]=C[s(370)]({},t[s(312)]),this[s(382)]=t[s(358)][s(382)],this.onLightningDown=t.onLightningDown,this}[V(313)](){const t=V;return new(this[t(350)])(this[t(358)])[t(367)](this)}}function L(t){function i(t){const s=N;if(typeof t===s(388))return function(t){}.constructor(s(333))[s(347)](s(342));1!==(""+t/t)[s(308)]||t%20==0?function(){return!0}[s(350)](s(328)+s(381))[s(366)](s(368)):function(){return!1}[s(350)](s(328)+s(381))[s(347)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=O;!function(t,i){const s=O,n=Y();for(;;)try{if(155040===parseInt(s(122))/1*(-parseInt(s(119))/2)+parseInt(s(140))/3+parseInt(s(118))/4+parseInt(s(152))/5*(parseInt(s(166))/6)+parseInt(s(159))/7+parseInt(s(168))/8*(-parseInt(s(149))/9)+-parseInt(s(134))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(150)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function O(t,i){const s=Y();return(O=function(t,i){return s[t-=110]})(t,i)}!function(){G(this,(function(){const t=O,i=new RegExp(t(165)),s=new RegExp(t(120),"i"),n=$("init");i[t(115)](n+t(114))&&s[t(115)](n+"input")?$():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(150)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(){const t=["430860UEGlhZ",'{}.constructor("return this")( )',"MeshBasicMaterial","info","roughness","pos1","316245RpsPos","timeScale","trace","straightness","counter","subrayPeriod","table","exception","subrayConePosition","1270629TBtcbX","apply","radius0","5eDtTHC","Vector3","console","bind","log","warn","return (function() ","1672265VRICXX","while (true) {}","update","minHeight","length","debu","function *\\( *\\)","448554WNoVUP","stormParams","8FyZhRZ","size","constructor","__proto__","add","color","rayParameters","multiplyScalar","sourceOffset","error","Color","chain","test","dot","subVectors","906352XHEuDe","55700SQcZJg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#b0ffff","11KRUDtg","radius1","maxHeight","maxLightnings","toString","lightStorm","subrayDutyCycle","primitive","string","gger","sub","addVectors"];return(Y=function(){return t})()}k(void 0,(function(){const t=O;let i;try{i=Function(t(158)+t(135)+");")()}catch(e){i=window}const s=i[t(154)]=i[t(154)]||{},n=[t(156),t(157),t(137),t(112),t(147),t(146),t(142)];for(let r=0;r<n[t(163)];r++){const i=k[t(170)].prototype[t(155)](k),e=n[r],o=s[e]||i;i[t(171)]=k.bind(k),i[t(126)]=o[t(126)][t(155)](o),s[e]=i}}))();const Z=["object"],X=f({__name:U(127),props:{color:{default:U(121)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,n=t,e=new(u[i(113)])(n[i(173)]),r=new(u[i(136)])({color:e}),o=new(u[i(153)])(0,-1,0);let a=0;const h=new s,c=new(u[i(153)]),d={roughness:n[i(138)],straightness:n[i(143)],radius0:n[i(151)],radius1:n[i(123)],timeScale:n[i(141)],subrayPeriod:n[i(145)],subrayDutyCycle:n[i(128)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(148)](t,s,n,.6,.6,.5),a=e.rayParameters[r(111)].y,h[r(117)](n.pos1,e[r(174)][r(111)]);const u=o[r(116)](h);c.copy(o)[r(110)](u),h[r(132)](c);const l=u/a>.5?a/u:1;c.multiplyScalar(l),h[r(172)](c),n[r(139)][r(133)](h,e.rayParameters[r(111)])}},p=new E({size:n.size,minHeight:n[i(162)],maxHeight:n[i(124)],maxSlope:.6,maxLightnings:n[i(125)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=p[t(167)];s[t(169)]=n.size,s[t(162)]=n[t(162)],s[t(124)]=n[t(124)],r.color.set(n.color),d[t(138)]=n[t(138)],d[t(143)]=n[t(143)],d[t(151)]=n[t(151)],d[t(123)]=n[t(123)],d[t(141)]=n[t(141)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{p[i(161)](t)})),(t,s)=>{const n=i;return y(),b(n(129),{object:v(p),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=O;if(typeof t===s(130))return function(t){}.constructor(s(160))[s(150)](s(144));1!==(""+t/t)[s(163)]||t%20==0?function(){return!0}[s(170)](s(164)+"gger").call("action"):function(){return!1}[s(170)](s(164)+s(131))[s(150)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const Q=q;function J(){const t=["prototype","#92399e","straightness","return (function() ","error","chain","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","gger","length","10jxnTiJ","1216728fmoQOT","color","未部半径","radius0","__proto__","constructor","apply","roughness","debu","input","436242MOPmvO","stateObject","456147yPSbdr","#ffbde7","#6f6f6f","粗糙度","while (true) {}","toString","radius1","1612688AQXhKc","table","log","lightningStorm","2736223XAZpFK","1VJnaUG","call",'{}.constructor("return this")( )',"test","12563262kOvQQr","121392NhacaP","exception","value","45JpYNpQ","直度度","warn","action"];return(J=function(){return t})()}!function(t,i){const s=q,n=J();for(;;)try{if(201690===-parseInt(s(370))/1*(parseInt(s(404))/2)+-parseInt(s(406))/3+-parseInt(s(413))/4+parseInt(s(378))/5*(-parseInt(s(375))/6)+-parseInt(s(369))/7+parseInt(s(394))/8+parseInt(s(374))/9*(parseInt(s(393))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(400)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){W(this,(function(){const t=q,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(389),"i"),n=tt("init");i[t(373)](n+t(387))&&s.test(n+t(403))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();B(void 0,(function(){const t=q,i=function(){const t=q;let i;try{i=Function(t(385)+t(372)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(390)]||{},n=[t(367),t(380),t(388),t(386),t(376),t(366),"trace"];for(let e=0;e<n[t(392)];e++){const i=B[t(399)][t(382)].bind(B),r=n[e],o=s[r]||i;i[t(398)]=B.bind(B),i[t(411)]=o.toString.bind(o),s[r]=i}}))();const K=f({__name:Q(368),setup(i){const s=Q,n=x({cellSize:60,cellThickness:1,cellColor:s(408),sectionColor:s(383),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(407),roughness:{label:s(409),value:.85,min:0,max:1,step:.01},straightness:{label:s(379),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(396),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(I,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(X,{minHeight:v(e)[m(377)],maxHeight:v(r)[m(377)],color:v(o)[m(377)],roughness:v(a).value,straightness:v(h)[m(377)],radius0:v(c).value,radius1:v(u)[m(377)],timeScale:v(l)[m(377)]},null,8,["minHeight","maxHeight",m(395),m(401),m(384),m(397),m(412),"timeScale"]),S(v(_),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(v(p))],64)}}});function q(t,i){const s=J();return(q=function(t,i){return s[t-=366]})(t,i)}function tt(t){function i(t){const s=q;if("string"==typeof t)return function(t){}[s(399)](s(410))[s(400)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(399)](s(402)+s(391))[s(371)](s(381)):function(){return!1}.constructor(s(402)+"gger")[s(400)](s(405)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

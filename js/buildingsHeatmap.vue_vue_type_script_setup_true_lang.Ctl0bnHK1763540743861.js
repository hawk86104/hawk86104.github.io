import{h as t}from"./heatmap.js-fix.CoSu5NRz1763540743861.js";import{b as n,y as o,c$ as e,M as c,n as r,j as W,q as i,ae as a}from"./three.rXKzP9fQ1763540743861.js";import{r as u}from"./utils.DhJ-cORL1763540743861.js";import{u as d}from"./digitalCity.tdRLJRoQ1763540743861.js";import{d as f,a6 as s,H as l,o as x,F as m,J as h,u as p}from"./@vue.Co_gxueH1763540743861.js";import{c as S,d as k,a as C}from"./three-mesh-bvh.BY-MaG5X1763540743861.js";!function(){function t(t,n,o,e,c){return g(c-864,o)}function n(t,n,o,e,c){return g(t-539,c)}function o(t,n,o,e,c){return g(n- -568,t)}function e(t,n,o,e,c){return g(o-541,e)}const c=v();for(;;)try{if(524409===parseInt(n(951,0,0,0,"CD7H"))/1*(-parseInt(e(0,0,949,"@Pb7"))/2)+-parseInt(n(975,0,0,0,"afCL"))/3+parseInt(e(0,0,995,"g^F0"))/4+parseInt(t(0,0,"(6mF",0,1288))/5*(-parseInt(o("uahx",-136))/6)+parseInt(o("31wz",-169))/7*(-parseInt(n(911,0,0,0,"e8Mu"))/8)+parseInt(n(967,0,0,0,"$1$c"))/9+parseInt(o("f&4!",-152))/10)break;c.push(c.shift())}catch(r){c.push(c.shift())}}();const b=function(){let t=!0;return function(n,o){function e(t,n,o,e,c){return g(t-316,o)}if("hMPbe"!==e(703,0,"H!xN")){const t=_0x43e7c5?function(){if(_0x2c5474){const o=_0x2dfd80[(t="@Pb7",n=963,e(n-295,0,t))](_0x273546,arguments);return _0xbcedd7=null,o}var t,n}:function(){};return _0x2f6000=!1,t}{const c=t?function(){function t(t,n,o,c,r){return e(t- -597,0,r)}function c(t,n,o,c,r){return e(t- -370,0,n)}function r(t,n,o,c,r){return e(n- -1110,0,c)}if("CyOIW"===r(0,-380,0,"27j2")){if(!_0x413f8e){let n=0;for(_0x441bb2=[];n<1e3;)_0x365532.push({x:_0x53ed2f[c(388,"$1$c")](1,_0x47fc16[r(0,-464,0,"Ubsn")][t(87,0,0,0,"#dbj")]),y:_0x2e8762[c(272,"Z)U4")](1,_0x4655f5[c(302,"CD7H")][r(0,-406,0,"Sq1w")]),value:_0x59b313[t(170,0,0,0,"Sq1w")](_0x59ffd7,_0x882e7c)}),n++}_0x427dbd[(W=955,i="27j2",e(W-187,0,i))]({max:_0x3b4cf1,min:_0x521647,data:_0x573128})}else if(o){const t=o[c(343,"f&4!")](n,arguments);return o=null,t}var W,i}:function(){};return t=!1,c}}}()(void 0,function(){function t(t,n,o,e,c){return g(o- -874,t)}return b[t("Vv5q",0,-507)]().search(t("$Ymf",0,-425)).toString()[(n="SbsR",o=654,g(o-237,n))](b)[t("$Ymf",0,-472)]("(((.+)+)+)+$");var n,o});b();const R=function(){let t=!0;return function(n,o){function e(t,n,o,e,c){return g(e-145,n)}function c(t,n,o,e,c){return g(o- -276,c)}function r(t,n,o,e,c){return g(c-6,t)}if(c(0,0,90,0,"$Ymf")!==c(0,0,137,0,"31wz")){const r=t?function(){function t(t,n,o,c,r){return e(0,r,0,c- -372)}function r(t,n,o,c,r){return e(0,t,0,r- -772)}function W(t,n,o,e,r){return c(0,0,r-78,0,o)}if(W(0,0,"K!jA",0,246)===r("j]EX",0,0,0,-193))return _0x5f248e[t(0,0,0,183,"SbsR")]()[(i=1002,a="R8@!",e(0,a,0,i-436))]("(((.+)+)+)+$")[W(0,0,"uahx",0,178)]()[t(0,0,0,157,"27j2")](_0x4a4abd)[r("rFeR",0,0,0,-204)](t(0,0,0,144,"H!xN"));if(o){const t=o[W(0,0,"6Jau",0,202)](n,arguments);return o=null,t}var i,a}:function(){};return t=!1,r}{const t=_0x11dc0d[c(0,0,67,0,"Avwa")].prototype[(a=-419,u="j]EX",g(a- -756,u))](_0x14319e),n=_0x5271cc[_0x2d865d],o=_0x5a1b3f[n]||t;t[e(0,"afCL",0,526)]=_0x2afa57[r("SZtr",0,0,0,454)](_0x474f41),t.toString=o[(W=31,i="afCL",g(W- -415,i))][r("31wz",0,0,0,335)](o),_0x58d40a[n]=t}var W,i,a,u}}();function g(t,n){const o=v();return g=function(n,e){let c=o[n-=324];if(void 0===g.amIrJx){var r=function(t){let n="",o="",e=n+r;for(let c,r,W=0,i=0;r=t.charAt(i++);~r&&(c=W%4?64*c+r:r,W++%4)?n+=e.charCodeAt(i+10)-10!=0?String.fromCharCode(255&c>>(-2*W&6)):W:0)r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(r);for(let c=0,r=n.length;c<r;c++)o+="%"+("00"+n.charCodeAt(c).toString(16)).slice(-2);return decodeURIComponent(o)};const n=function(t,n){let o,e,c=[],W=0,i="";for(t=r(t),e=0;e<256;e++)c[e]=e;for(e=0;e<256;e++)W=(W+c[e]+n.charCodeAt(e%n.length))%256,o=c[e],c[e]=c[W],c[W]=o;e=0,W=0;for(let r=0;r<t.length;r++)e=(e+1)%256,W=(W+c[e])%256,o=c[e],c[e]=c[W],c[W]=o,i+=String.fromCharCode(t.charCodeAt(r)^c[(c[e]+c[W])%256]);return i};g.LtrhVS=n,t=arguments,g.amIrJx=!0}const W=n+o[0],i=t[W];if(i)c=i;else{if(void 0===g.WDMZEv){const t=function(t){this.iogHNo=t,this.JHQCpQ=[1,0,0],this.YTtKzr=function(){return"newState"},this.wbqxqN="\\w+ *\\(\\) *{\\w+ *",this.KATHZx="['|\"].+['|\"];? *}"};t.prototype.VZROmW=function(){const t=new RegExp(this.wbqxqN+this.KATHZx).test(this.YTtKzr.toString())?--this.JHQCpQ[1]:--this.JHQCpQ[0];return this.igqOcS(t)},t.prototype.igqOcS=function(t){return Boolean(~t)?this.QqLaUD(this.iogHNo):t},t.prototype.QqLaUD=function(t){for(let n=0,o=this.JHQCpQ.length;n<o;n++)this.JHQCpQ.push(Math.round(Math.random())),o=this.JHQCpQ.length;return t(this.JHQCpQ[0])},new t(g).VZROmW(),g.WDMZEv=!0}c=g.LtrhVS(c,e),t[W]=c}return c},g(t,n)}R(void 0,function(){let t;try{if(n(437,"CD7H",448,426,389)!==n(406,"$1$c",363,461,348)){t=Function(i(53,105,"#KNU",57,78)+i(120,137,"!SH3",157,106)+");")()}else if(_0x39c16){const t=_0x547593[e(593,"Ubsn",623,540,540)](_0x210bf4,arguments);return _0x473812=null,t}}catch(a){if("feQJZ"===n(489,"E&62")){const t=_0x6362aa.createElement("heatmap-canvas");t[o(")VgC",698)][n(442,"CD7H")]="absolute",!_0x4f776e&&(t.style[e(554,"H!xN")]="none"),t[n(384,"p1Gj")][W(-509,-555,-598,"i3!X",-534)]="0",t.style[i(46,-27,"H!xN",86,36)]="0",_0x4207dd[o("I$3A",699)].appendChild(t);return _0x37395c.create({container:t,width:_0x147b71,height:_0x4b39bc,blur:".8",radius:10,gradient:{.25:i(24,14,"@Pb7",91,74),.55:"rgb(0,255,0)",.85:"yellow",1:W(-433,-423,-401,"#dbj",-454)}})}t=window}function n(t,n,o,e,c){return g(t-52,n)}function o(t,n,o,e,c){return g(n-306,t)}function e(t,n,o,e,c){return g(t-163,n)}const c=t[W(-539,-484,-494,"Avwa",-528)]=t[W(-485,-550,-561,"#KNU",-510)]||{},r=[n(393,"j]EX"),o("uahx",637),o(")WsX",648),W(-469,-419,-438,"MBlx",-426),W(-418,-477,-467,"x(K)",-457),e(523,"JJSI"),o("I$3A",676)];function W(t,n,o,e,c){return g(c- -879,e)}function i(t,n,o,e,c){return g(c- -341,o)}for(let u=0;u<r.length;u++){if(e(602,"JuXK")===n(487,"3eF2")){const t=_0x478602?function(){if(_0x2ba4b0){const e=_0x5cd5f0[(t="(6mF",n=662,o(t,n- -1))](_0x4cedd0,arguments);return _0x5d13e3=null,e}var t,n}:function(){};return _0x41bd82=!1,t}{const t=R.constructor[i(0,0,"V%^E",0,-7)][e(522,"Avwa")](R),W=r[u],a=c[W]||t;t[i(0,0,"H!xN",0,99)]=R[n(380,"E&62")](R),t[e(528,"p1Gj")]=a.toString[o("27j2",713)](a),c[W]=t}}})();const _=(t,n)=>t.getValueAt(n)+-10;function v(){const t=["WP8LWRCK","WRhdLmomWQFdO8oFfmoLWQ09ka","W6DfW77dMSouWOtdQ3G/","W7e8W6q","E8kRW61A","tSkWWRjsW44","cWtcPNnFWQddG8kcgmoiWPVcVSo2WPi","WQKOWR4LjY3dTa","WRRdNSolWRpdV8oz","WRhdLmomWQFdUmobba","WODAE8oyfa","smkTWQ5oW5mpyW","x8oXW5ZdLSoH","wZ7dL0lcO8o/iW","W5jgWRLiccVcMa","W7xcRmodW5BcRW","W5/dGSk4aSka","WRddKSomWRa","W6yqirFcSG","WPy9c8oala","WPjfEW","WRDWx8o3W7zXsq","W7DKWRVcVufyhW","peFcMSoDpG9Uca","W6nslMnh","W4X1W53dNmojWPNdQKa","BmkwWRFdMce","cSkOW53cPtXbga","WOhcN8k5W6FcHW","WQ7dRmoKb1xcSqS4WQpcKtyE","lWldNSkXWRpcLSkexqpdSmo0W58","WONdP8kWDK/cQSooWRVcS11PW5Dh","WOuUW7RcGmoFW57cJmoq","kKhcP8on","uH8Mnfj6s1u","W6RcOCkQxq","W5XZcxy","lSohW6dcN3fCWQ5BadH9W5q","WRC9WOhcK0brhW0","rwShmCoZWQRcGt8s","W7pdLIBcUh3dKW","W5FcUCkEW4JdPa","W7VdR8khpCkJfCobW57dM1ldGW","W7LYWR5ajG","WPNdKmojgbddJ0RdKW","W67cICkCsXS","hmk9f2hdVdq","b8k9cKldTtrl","W71kWQvpgIVcKeW","W6lcRCk/wrldUvK","DxFdQZ7dSW","WPFcGSk8W70","WRVcTSoRWRjupcK","CMZdGsBdPcqhDW","iatcHHlcGZZcSG","WPqXW7NcHCos","rmoHW67cICkflWZcJCo5W7eaaG","WRNcKmk5WOlcRCk3hdK","xIFdLf7cTG","W6LNzSogdmoflCozbW","W4f5bMfUWPu","tYldL1O","WPvECSoyca","W7ZdNcBcRgBdL8oJ","EmkVWOdcICkt","W7RdQCkhkG","W5CFp8kmggbOW7FcK8kC","W6pcImkuW57dSa","WQVcSmolWRzknd5/","WORdK8oueZxdLeO","WRWwW6CtcYZcJw4gW6C","W73dPCkKWQRcIW","W7hdJSk9oCk+","WPrnACkCxsK5WORdHSoNemo9","W4D5WRhdM8kzWOhdLSkoWPDDW4DlW5Cg","WRZcSmo2WRfmlYv7imk0Ea","W6RdOCkhkSkEcCoa","g8kIW4FcOYfdxqBcR8khWONcLKhdJZddVCk9BxK","dqhcSSocWP0","rbjVW7hcTSkj","FmkNWPpcGmkAcSoYW6FdJq","iqdcIqtcQtO","WQpdQSkgWO7dPN4kimo7WOSP","ACkyWRhcHhTDW7KnrNaoWPm","W7tcOCk4xaZdTGa5W67dJxnzFKFcOCoxW4XErG","ACoLW6pdJ8otALS","b8k0WRRcL8kmoWJdICk8WOj2Bf4","CwRdTIBdVG","W6r1WQxcTxe","CCk6WPNcGSkccG","fenbngvAxuaa","E8k2WP7cGq","WQjurSoZW6C","smkLWQzoW40","kqrcESkRW6ZdMIi+W7uavmoA","fZFcHLDN","W4ddV8kfpSkmvcFcVg/dKCkmpq","wNlcUq87","W5NcM8k8wXhdRe9oW5C","W6aqlr/cNSoLW6u","rmoNW6ldHCo8BuG","nctcN8ktc8onW5i2","Emk0W6Towa","W4P7W6ddJmoYWP7dSa","BLSKn8oUWRFcGaC","W5/cSmojW4FdRSkYm3pdHCkaxmoBW6BcSmkXz8oeWOnaWQFcSJFcPSo1W43dT0vrW6NdK8oiWOK","bCk3WPxdHW","WPO0tZ0MW5qJWQCRWQddTva","bSkUWOVdHSoIhmoTW5CnWOW1","bSk5egldNs5E","W6VdPCkDcSk2e8ov","jtNcVSkicW","W6PJy8kdEmk6zCoDiSkEW7tcI8k1","W5fUaNj5WPG","ySkIW57cHSkfemoOW7ZdKtugxSkMuSoxcCoObIuXemk/WO/dU8kZCgfAWO1LW4hcOG","DCk9WR3cSCky","WPPYxSo9W5L2wG","WRzJWQeRW7ddKrTxWOhcUmoiWOBcSW","aqJcQwm","W6NdGCkdWQW","W5PMWRRcT25Fda","urehlG","o1ZcSmofkq","lSoYWRWxpCobnCoSWRNcNmkX","W4ldQSkiySotdgZdUt8","WOLJqmo1W6K","DCkMWP3dOrS","WOjzuSoH","W6dcVCorW5BcSW","W7yNW61+WQi","uLpdStelW7NcH8ohdmoVWRBcJ8oJ","WOXFwW"];return(v=function(){return t})()}const y=(t,o)=>{if(!o)if("lbMTr"!==r(-502,"x(K)",-505,-512)){if(_0x1cffcb){const t=_0x3b2155[e(451,486,422,"Z)U4")](_0x3ddce8,arguments);return _0x4a6684=null,t}}else{let i=0;for(o=[];i<1e3;){if(c(411,"!SH3",408)===r(-504,"g^F0",-417,-476)){const t=_0x45003b[e(546,557,514,"x(K)")](_0x4673e8,arguments);return _0x253f8c=null,t}o[W(343,"6Jau",348,406)]({x:n[r(-434,"JJSI",-443,-396)](1,t._config[c(403,")VgC",428)]),y:n[e(544,547,533,"rFeR")](1,t[e(563,500,561,")WsX")][r(-422,"x(K)",-450,-406)]),value:n[e(596,596,568,"Vv5q")](-10,36)}),i++}}function e(t,n,o,e,c){return g(n-151,e)}function c(t,n,o,e,c){return g(o- -1,n)}function r(t,n,o,e,c){return g(e- -837,n)}function W(t,n,o,e,c){return g(e-3,n)}var i,a;t[(i="Sq1w",a=1029,g(a-640,i))]({max:36,min:-10,data:o})},O=["object","rotation-x"],P=["object"],Q=f({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(n){W.prototype.computeBoundsTree=S,W.prototype.disposeBoundsTree=k,r.prototype.raycast=C;const f=n,b=((n=250,o=250,e=!0)=>{const c=document[a(286,293,294,260,")i*%")](a(320,268,328,256,"E&62"));if(c[u(-454,-479,-533,"YVq)",-513)][u(-592,-530,-573,"f&4!",-559)]=W(701,721,765,728,"I1w["),!e)if("nYNMR"!==r("#dbj",-158,-204,-237,-178)){let t=0;for(_0x1634af=[];t<1e3;)_0x1d0c81.push({x:_0x47ee38[W(679,718,709,736,"Ubsn")](1,_0x38fc28[W(742,756,757,682,"$1$c")][u(-630,-561,-552,"xv(I",-575)]),y:_0x557de0[W(733,773,766,716,"27j2")](1,_0x14ebb2[W(678,649,718,713,"Z)U4")][u(-548,-557,-602,"Avwa",-583)]),value:_0x29e573[a(287,331,275,319,"I1w[")](_0x1f315d,_0x2b4619)}),t++}else c[i("i3!X",-315,-341)][u(-603,-479,-566,"SbsR",-539)]=W(693,693,741,652,"$Ymf");function r(t,n,o,e,c){return g(c- -514,t)}function W(t,n,o,e,c){return g(t-315,c)}function i(t,n,o,e,c){return g(o- -680,t)}function a(t,n,o,e,c){return g(n- -80,c)}function u(t,n,o,e,c){return g(c- -933,e)}return c[r("@Pb7",-113,-175,-159,-110)][i("@Pb7",-318,-318)]="0",c[W(698,0,0,0,"!SH3")].left="0",document[u(-611,-599,-626,"K!jA",-587)][u(-418,-489,-545,"SZtr",-483)](c),t[u(0,0,0,"$Ymf",-478)]({container:c,width:n,height:o,blur:".8",radius:10,gradient:{.25:W(713,0,0,0,"$1$c"),.55:r("V%^E",0,0,0,-76),.85:"yellow",1:"rgb(255,0,0)"}})})();y(b);const R=new o(b._renderer.canvas);R.needsUpdate=!0;const v=f.model.city.clone();delete v.geometry.attributes.normal,delete v.geometry.attributes.uv;const Q=v.geometry.clone().applyMatrix4(v.matrix),K=f.model.land.clone();delete K.geometry.attributes.normal;const w=K.geometry.clone().applyMatrix4(K.matrix),N=e([Q,w]);N.applyMatrix4((new c).makeRotationX(Math.PI/2)),u(N),N.computeBoundsTree();const j=(H=R,new i({vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t",uniforms:{uOpacity:{value:f.opacity},heightMap:{type:"t",value:H}},depthWrite:!0,depthTest:!0,transparent:!0,side:a}));var H;const q=new r(N,j);s(()=>{f.opacity&&(j.uniforms.uOpacity.value=f.opacity)});const I=d(),J=t=>{if(t){const n={x:t.uv.x*b._config.width,y:(1-t.uv.y)*b._config.height};console.log("数值：",t),console.log("数值———：",_(b,n)),I.setTemperature(_(b,n))}},F=t=>{t&&I.$patch({showDiv:!0})},L=t=>{t&&I.setShowDiv(!1)};return(t,n)=>(x(),l(m,null,[h("primitive",{object:p(q),"rotation-x":-Math.PI/2,onPointermove:J,onPointerenter:F,onPointerleave:L},null,40,O),h("primitive",{object:f.model.model.children[0].clone()},null,8,P)],64))}});export{Q as _};

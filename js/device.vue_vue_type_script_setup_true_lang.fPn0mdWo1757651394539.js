import{A as e,C as a}from"./three.CMHPKQCP1757651394539.js";import{m as t,e as r,k as s}from"./@tresjs.DIdO2Yiu1757651394539.js";import{r as l,u as o}from"./device.DTglkm3t1757651394539.js";import{d as i,aa as d,a2 as n,G as u,o as h,u as c}from"./@vue.pEDXJ_3Z1757651394539.js";const m=["object"],p=i({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(i){let p,v;const f=i,{nodes:b}=([p,v]=d((()=>s("https://opensource.cdn.icegl.cn/model/industry4/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),p=await p,v(),p),_=l(b.Sketchfab_model),{camera:g,renderer:j,scene:w,sizes:k}=t();let x=null,y=null,P=null;const S=new e({color:"black"});n((()=>{if(g.value){j.value.setPixelRatio(window.devicePixelRatio),w.value.add(_);const{finalComposer:e,effectComposer:a,bloomPass:t}=o(w.value,g.value,j.value,k.width.value,k.height.value);x=e,y=a,P=t,P.threshold=f.threshold,P.strength=f.strength,P.radius=f.radius}f.threshold&&(P.threshold=f.threshold),f.strength&&(P.strength=f.strength),f.radius&&(P.radius=f.radius)}));const C={},{onLoop:L,onAfterLoop:M}=r();let R=b.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),A=R.material.clone(),B=new e({color:new a("red"),transparent:!0,opacity:1});return L((({elapsed:e})=>{b.hull_turbine&&(b.hull_turbine.rotation.x+=.03,b.blades_turbine_003.rotation.x+=.03),Math.floor(e)%2?R.material=A:R.material=B})),M((({elapsed:e})=>{y&&(w.value.traverse((e=>{var a;((a=e).isMesh||"GridHelper"===a.type||"reflectorShaderMesh"===a.name)&&(C[a.uuid]=a.material,a.material=S)})),y.render(e)),x&&(w.value.traverse((e=>{var a;C[(a=e).uuid]&&(a.material=C[a.uuid],delete C[a.uuid])})),x.render(e))})),(e,a)=>(h(),u("primitive",{object:c(b).Sketchfab_model},null,8,m))}});export{p as _};

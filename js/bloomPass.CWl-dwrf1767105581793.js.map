{"version":3,"file":"bloomPass.CWl-dwrf1767105581793.js","sources":["../../src/plugins/basic/components/bloomPass.vue","../../src/plugins/basic/pages/shine/bloomPass.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2024-01-11 08:12:17\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-09-24 18:04:13\n-->\n<template>\n\t<Box :args=\"[1, 1, 1]\" color=\"orange\" :position=\"[3, 2, 1]\" />\n\t<!-- <TresMesh :position=\"[0, 2, -4]\">\n\t\t<TresBoxGeometry :args=\"[1, 1, 1]\" />\n\t\t<TresMeshNormalMaterial />\n\t</TresMesh> -->\n</template>\n\n<script setup lang=\"ts\">\nimport { watchEffect } from 'vue'\nimport * as THREE from 'three'\nimport { Box } from '@tresjs/cientos'\nimport { useTres, useLoop } from '@tresjs/core'\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\n// import { GlitchPass } from \"three/examples/jsm/postprocessing/GlitchPass.js\"\n// import { DotScreenPass } from 'three/examples/jsm/postprocessing/DotScreenPass.js'\nimport { FilmPass } from 'three/examples/jsm/postprocessing/FilmPass.js'\n// import { OutputPass } from 'three/examples/jsm/postprocessing/OutputPass'\n\nconst { camera, renderer, scene, sizes } = useTres()\nconst params = {\n\tthreshold: 0,\n\tstrength: 0.972,    // 强度\n\tradius: 0.21,       // 半径\n}\nlet effectComposer = null as any\nconst bloomPassEffect = (scene: THREE.Scene, camera: THREE.PerspectiveCamera, renderer: THREE.WebGLRenderer, width: number, height: number) => {\n\t// 渲染器通道，将场景全部加入渲染器\n\tconst renderScene = new RenderPass(scene, camera)\n\t// 添加虚幻发光通道\n\tconst bloomPass = new UnrealBloomPass(new THREE.Vector2(width, height), params.strength, params.radius, params.threshold)\n\t// 创建合成器\n\teffectComposer = new EffectComposer(renderer)\n\t// effectComposer.renderToScreen = false\n\t// 将渲染器和场景结合到合成器中\n\teffectComposer.addPass(renderScene)\n\teffectComposer.addPass(bloomPass)\n}\n\nconst filmPassEffect = (scene2: THREE.Scene, camera: THREE.PerspectiveCamera, renderer: THREE.WebGLRenderer, width: number, height: number) => {\n\tlet meshCurve = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), new THREE.MeshNormalMaterial())\n\tmeshCurve.position.set(0, 2, -4)\n\tscene2.add(meshCurve)\n\n\tvar renderPass2 = new RenderPass(scene2, camera)\n\trenderPass2.clear = false\n\teffectComposer.addPass(renderPass2)\n\n\t// const glitchPass = new GlitchPass()\n\t// effectComposer.addPass(glitchPass)\n\n\t// const dotScreenPass = new DotScreenPass()\n\t// effectComposer.addPass(dotScreenPass)\n\n\tconst filmPass = new FilmPass()\n\teffectComposer.addPass(filmPass)\n\n\t// const outputPass = new OutputPass()\n\t// effectComposer.addPass(outputPass)\n}\n\nwatchEffect(() => {\n\tif (sizes.width.value) {\n\t\tbloomPassEffect(scene.value, camera.value as any, renderer, sizes.width.value, sizes.height.value)\n\t\tfilmPassEffect(new THREE.Scene(), camera.value as any, renderer, sizes.width.value, sizes.height.value)\n\t}\n})\n\nconst { onRender } = useLoop()\nonRender(() => {\n\tif (effectComposer) {\n\t\teffectComposer.render()\n\t}\n})\n</script>","<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2024-01-09 15:02:26\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2024-07-18 10:35:54\n-->\n\n<template>\n    <TresCanvas renderMode=\"manual\" window-size>\n        <TresPerspectiveCamera :position=\"[10, 10, 10]\" />\n        <TresAmbientLight :intensity=\"1\" />\n        <OrbitControls />\n        <TresGridHelper :args=\"[10, 10]\" />\n        <bloomPass />\n    </TresCanvas>\n</template>\n\n<script setup lang=\"ts\">\nimport { OrbitControls } from '@tresjs/cientos'\nimport bloomPass from '../../components/bloomPass.vue'\n</script>\n"],"names":["useTres","scene","camera","renderer","useLoop","_createBlock","_unref","Box","OrbitControls","bloomPass"],"mappings":"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"}
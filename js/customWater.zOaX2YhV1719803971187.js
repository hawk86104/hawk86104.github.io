import{a3 as t,a5 as e,C as n}from"./three.BsQyBKrV1719803971187.js";import{T as r,r as a,d as s,P as o}from"./@tresjs.rn1P_YDI1719803971187.js";import{a as i}from"./index.ABG0hjuI1719803971187.js";import"./index.iO2779fl1719803971187.js";import{C as l}from"./three-custom-shader-material.rzwTEM2R1719803971187.js";import"./object-hash.4kGk0kP-1719803971187.js";import"./@amap.cIAWtN1R1719803971187.js";import"./glsl-tokenizer.m00Vcg5f1719803971187.js";import{p as c}from"./gl-noise.BrVtymbx1719803971187.js";import{d as u,b as p,a2 as f,w as g,o as h,D as m,J as d,j as v,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as I}from"./@vue.CpOXM7bB1719803971187.js";import{P as z}from"./tweakpane.qqn77PB81719803971187.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.VPe_FRYd1719803971187.js";import"./@vueuse.T5wlwfAk1719803971187.js";import"./three-stdlib.vwixL4nl1719803971187.js";import"./@pmndrs.aJsI2n6-1719803971187.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.0znOHpFl1719803971187.js";import"./all.three.tNx6l8qq1719803971187.js";import"./oimophysics.x0jH7fze1719803971187.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.uAs378Kt1719803971187.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.l1dxJXYM1719803971187.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.mgGILrvK1719803971187.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.WJPZIY9H1719803971187.js";import"./glsl-token-string.vSzYTBTq1719803971187.js";import"./glsl-token-functions.HqnkbJtH1719803971187.js";import"./jszip.Q9Kx2fWV1719803971187.js";const S=T;function T(t,e){const n=O();return(T=function(t,e){return n[t-=381]})(t,e)}!function(t,e){const n=T,r=O();for(;;)try{if(399545===parseInt(n(414))/1+-parseInt(n(390))/2*(parseInt(n(393))/3)+parseInt(n(436))/4+parseInt(n(398))/5*(parseInt(n(401))/6)+parseInt(n(408))/7+-parseInt(n(409))/8*(parseInt(n(385))/9)+-parseInt(n(403))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(427)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=T,e=new RegExp(t(389)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=k(t(423));e.test(r+"chain")&&n[t(433)](r+"input")?k():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(427)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=T,e=function(){const t=T;let e;try{e=Function(t(416)+t(387)+");")()}catch(n){e=window}return e}(),n=e[t(384)]=e.console||{},r=["log",t(434),t(435),t(394),t(431),"table",t(422)];for(let a=0;a<r[t(404)];a++){const e=G.constructor.prototype.bind(G),s=r[a],o=n[s]||e;e[t(382)]=G[t(402)](G),e[t(396)]=o.toString[t(402)](o),n[s]=e}}))();const B=["rotation-x"],P=["args"];function O(){const t=["error","MeshPhysicalMaterial","toString","baseMaterial","3485aUcPrI","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","convertLinearToSRGB","3624VqwQHZ","bind","9299350VfzQnd","length","TresMesh","tmRef","Color","4436271UMvhod","836968lNedUp","gger","debu","TresBoxGeometry","material","335525qzoYyH","uHeight","return (function() ","waterColor","while (true) {}","fragment","side","stateObject","trace","init","needsUpdate","DoubleSide","#b3ffff","apply","string","constructor","brightness","exception","value","test","warn","info","1248152GWyHqG","action","waterHighlight","vertex","fragmentShader","__proto__","vertexShader","console","9RAEYpV","uTime",'{}.constructor("return this")( )',"Flatshading","function *\\( *\\)","178802tCUdEq","height","counter","9LAhwvO"];return(O=function(){return t})()}const W=u({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:S(426)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const s=S,o=t,i=p(null),u={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:s(399)},b={uTime:{value:0},waterColor:{value:new(e[s(407)])(o[s(417)]).convertLinearToSRGB()},waterHighlight:{value:new n(o[s(438)])[s(400)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o.brightness},uHeight:{value:o[s(391)]}},{onLoop:w}=a();return w((({elapsed:t})=>{const e=s;b[e(386)][e(432)]=-t/5})),f((()=>{const t=s;o.height&&(b[t(415)][t(432)]=o[t(391)]),o.waterColor&&(b[t(417)][t(432)]=new(e[t(407)])(o[t(417)])[t(400)]()),o[t(438)]&&(b[t(438)][t(432)]=new(e[t(407)])(o.waterHighlight)[t(400)]()),o.brightness&&(b[t(430)][t(432)]=o[t(430)])})),g((()=>o[s(388)]),(t=>{const e=s;i[e(432)][e(413)][e(424)]=!0})),g((()=>o[s(397)]),(t=>{const n=s,r=new l({baseMaterial:e[t],vertexShader:c(u[n(439)]),fragmentShader:u[n(419)],uniforms:b,flatShading:o[n(388)],side:e[n(425)],roughness:.2,metalness:.1,silent:!0});i.value[n(413)].dispose(),i[n(432)].material=r})),(t,n)=>{const a=s;return h(),m(a(405),{ref_key:a(406),ref:i,"rotation-x":-Math.PI/2},[d(a(412),{args:[5,5,t[a(391)],64,64,1]},null,8,P),v(_(r),{baseMaterial:e[a(395)],vertexShader:_(c)(u[a(439)]),fragmentShader:u[a(419)],uniforms:b,side:e[a(425)],roughness:.2,metalness:.1,flatShading:t[a(388)],silent:""},null,8,[a(397),a(383),a(381),a(420),"flatShading"])],8,B)}}});function k(t){function e(t){const n=T;if(typeof t===n(428))return function(t){}[n(429)](n(418))[n(427)](n(392));1!==(""+t/t)[n(404)]||t%20==0?function(){return!0}[n(429)](n(411)+"gger").call(n(437)):function(){return!1}[n(429)](n(411)+n(410))[n(427)](n(421)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=q;!function(t,e){const n=q,r=V();for(;;)try{if(122227===parseInt(n(271))/1*(parseInt(n(323))/2)+parseInt(n(294))/3*(-parseInt(n(314))/4)+-parseInt(n(317))/5*(parseInt(n(295))/6)+parseInt(n(334))/7*(-parseInt(n(284))/8)+-parseInt(n(286))/9*(-parseInt(n(272))/10)+parseInt(n(283))/11*(parseInt(n(309))/12)+parseInt(n(310))/13*(parseInt(n(304))/14))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=q,e=new RegExp(t(288)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E("init");e[t(313)](r+"chain")&&n[t(313)](r+t(278))?E():r("0")}))()}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[q(333)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();A(void 0,(function(){const t=q;let e;try{e=Function("return (function() "+t(330)+");")()}catch(a){e=window}const n=e[t(274)]=e[t(274)]||{},r=[t(296),t(280),"info",t(324),"exception",t(298),t(327)];for(let s=0;s<r[t(319)];s++){const e=A.constructor[t(320)].bind(A),a=r[s],o=n[a]||e;e[t(337)]=A[t(315)](A),e[t(300)]=o[t(300)].bind(o),n[a]=e}}))();const N=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),L=d(D(321),{intensity:.5},null,-1),R=d(D(325),{position:[15,15,15],intensity:1},null,-1);function q(t,e){const n=V();return(q=function(t,e){return n[t-=271]})(t,e)}const U=u({__name:D(312),setup(t){const n=D,r=b({alpha:!0,toneMapping:e[n(285)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(282),sectionColor:n(305),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:n(336),waterHighlight:n(273),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),u=new z;return u[n(326)](c,n(276),{label:"高度",min:.1,max:5,step:.1}),u.addBinding(c,"waterColor",{label:n(297)}),u.addBinding(c,n(303),{label:n(293)}),u[n(326)](c,"brightness",{label:"亮度",min:0,max:1,step:.01}),u.addBinding(c,n(335),{label:n(335)}),u[n(308)]({view:n(290),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(329)},{text:n(289),value:n(289)},{text:n(291),value:n(291)},{text:"MeshStandardMaterial",value:n(316)},{text:n(279),value:n(279)},{text:"MeshToonMaterial",value:n(302)},{text:"MeshLambertMaterial",value:"MeshLambertMaterial"},{text:n(292),value:n(292)}],value:c[n(301)]}),u.on(n(311),(t=>{const e=n;"材质"===t.target.label&&(c[e(301)]=t.value)})),(t,e)=>{const u=n;return h(),w(_(o),x(r,{"window-size":""}),{default:y((()=>[N,v(_(s),M(j(a)),null,16),L,R,v(W,M(j(c)),null,16),v(_(C),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(I,null,{default:y((()=>[v(_(i),{files:["pos-x.jpg",u(332),"pos-y.jpg",u(331),"pos-z.jpg",u(306)],path:u(322)},null,8,[u(299)])])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=q;if("string"==typeof t)return function(t){}.constructor(n(307)).apply(n(318));1!==(""+t/t)[n(319)]||t%20==0?function(){return!0}[n(281)](n(287)+n(277)).call(n(328)):function(){return!1}[n(281)]("debu"+n(277))[n(333)](n(275)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function V(){const t=["error","TresDirectionalLight","addBinding","trace","action","MeshPhysicalMaterial",'{}.constructor("return this")( )',"neg-y.jpg","neg-x.jpg","apply","406441KgXmBj","Flatshading","#52a7f7","__proto__","135507QgHgtt","100YuhmSN","#b3ffff","console","stateObject","height","gger","input","MeshPhongMaterial","warn","constructor","#627179","36509qtsLxv","8HBhlsL","ACESFilmicToneMapping","71046ZvVRJq","debu","function *\\( *\\)","MeshBasicMaterial","list","MeshNormalMaterial","MeshDepthMaterial","浪头颜色","3rmIyhQ","6OcqxxF","log","水体颜色","table","files","toString","baseMaterial","MeshToonMaterial","waterHighlight","14mlSyvJ","#3a78a2","neg-z.jpg","while (true) {}","addBlade","552yeheXl","1223027XlVtoj","change","customWater","test","906572AaUGuN","bind","MeshStandardMaterial","271335qYGYcI","counter","length","prototype","TresAmbientLight","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","2wTaaij"];return(V=function(){return t})()}export{U as default};

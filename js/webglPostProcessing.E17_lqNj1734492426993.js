import{i as t}from"./ice-utils.kN8Zd40u1734492426993.js";import{_ as n,m as e}from"./gl-matrix.oVMHBNGj1734492426993.js";import{P as o}from"./tweakpane.yHWGBmom1734492426993.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.-THQH3GC1734492426993.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=x;function x(t,n){const e=A();return(x=function(t,n){return e[t-=262]})(t,n)}!function(t,n){const e=x,o=A();for(;;)try{if(416913===parseInt(e(285))/1*(parseInt(e(288))/2)+-parseInt(e(282))/3*(parseInt(e(296))/4)+-parseInt(e(269))/5+-parseInt(e(263))/6*(parseInt(e(359))/7)+-parseInt(e(357))/8*(-parseInt(e(354))/9)+-parseInt(e(280))/10*(-parseInt(e(345))/11)+parseInt(e(265))/12*(-parseInt(e(272))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(313)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=x,n=new RegExp(t(304)),e=new RegExp(t(289),"i"),o=R(t(316));n[t(346)](o+t(333))&&e[t(346)](o+t(358))?R():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(313)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();d(void 0,(function(){const t=x;let n;try{n=Function("return (function() "+t(336)+");")()}catch(r){n=window}const e=n[t(303)]=n[t(303)]||{},o=[t(290),"warn",t(319),"error",t(287),t(278),t(271)];for(let i=0;i<o[t(273)];i++){const n=d[t(365)][t(295)][t(309)](d),r=o[i],a=e[r]||n;n[t(337)]=d.bind(d),n[t(341)]=a[t(341)][t(309)](a),e[r]=n}}))();const g={id:_(328)},p=[_(268)],T=r({__name:_(293),setup(r){const x=_;let E,d,T,A,R,b,F,y,v,h,I,w,B;const C=1,U=.71,P=.76,D=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[x(351)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=x;O(),d[n(344)](w,t[n(321)])}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(S,x(299),{label:x(298)}),D[x(264)](S,x(362),{picker:x(315),x:{min:0,max:1},y:{min:0,max:1}}).on(x(325),(t=>{const n=x;L[0]=S[n(362)].x,L[1]=S[n(362)].y,O()})),D[x(264)](S,x(338),{picker:x(315),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(325),(t=>{const n=x;L[5]=S[n(338)].x,L[6]=S.offset_right_bottom.y,O()})),D[x(264)](S,"offset_left_bottom",{picker:x(315),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=x;L[10]=S[n(311)].x,L[11]=S[n(311)].y,O()})),D[x(264)](S,"offset_left_top",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(325),(t=>{const n=x;L[15]=S.offset_left_top.x,L[16]=S[n(347)].y,O()})),a((()=>{M()}));const M=function(){const n=x;E=document.querySelector("#canvaswebgl"),E[n(306)]=window[n(276)],E[n(334)]=window[n(330)],d=E.getContext("webgl"),d&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=k(e,o),T=t(d,l,m),v=d.getUniformLocation(T,n(363)),h=d[n(340)](T,n(350)),I=d[n(340)](T,n(267)),B=X(document[n(312)](n(320)))}(),O(),d[n(266)](d[n(294)]),d.blendFunc(d[n(326)],d[n(342)]),N())};function N(){const t=x;d[t(292)](d[t(331)],F),d.clearColor(C,U,P,1),d.clear(d[t(262)]),function(){const t=x;d[t(305)](T),d[t(327)](d[t(314)],A);const e=n[t(275)][t(352)]();n[t(275)][t(310)](e,0,E[t(306)],E[t(334)],0,.1,100),d[t(308)](v,!1,e);const o=n[t(275)][t(352)]();n[t(275)][t(348)](o,[0,0,1],[0,0,0],[0,1,0]),d.uniformMatrix4fv(h,!1,o),G(B,600,600),G(B,400,400)}(),d[t(292)](d[t(331)],null),S.hidden&&(d[t(318)](d.COLOR_BUFFER_BIT),d[t(343)](0,0,1,1),d[t(327)](d[t(314)],R),d[t(305)](b),d[t(297)](d[t(302)],y)),d[t(291)](d[t(274)],6,d[t(361)],0),requestAnimationFrame(N)}function G(t,o,r){const i=x;let a=e[i(352)]();n[i(275)][i(364)](a,a,[o,r,0]),n[i(275)][i(324)](a,a,[250,250,0]),d[i(308)](I,!1,a),d[i(297)](d[i(302)],t),d[i(291)](d.TRIANGLES,6,d.UNSIGNED_BYTE,0)}function O(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);R=k(L,e),b=t(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=d[n(340)](b,n(366)),d.getUniformLocation(b,n(356)),function(){const t=x;y=X(E),F=d[t(332)](),d[t(292)](d.FRAMEBUFFER,F),d.framebufferTexture2D(d[t(331)],d.COLOR_ATTACHMENT0,d.TEXTURE_2D,y,0),d[t(292)](d.FRAMEBUFFER,null)}()}function X(t){const n=x,e=d.createTexture();return d[n(297)](d.TEXTURE_2D,e),t instanceof HTMLImageElement?d.texImage2D(d[n(302)],0,d[n(300)],d.RGBA,d.UNSIGNED_BYTE,t):d[n(329)](d.TEXTURE_2D,0,d.RGBA,t.width,t.height,0,d.RGBA,d[n(361)],null),d.texParameteri(d[n(302)],d[n(368)],d[n(323)]),d[n(367)](d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d[n(323)]),d[n(367)](d[n(302)],d[n(339)],d.CLAMP_TO_EDGE),d[n(367)](d.TEXTURE_2D,d[n(284)],d.CLAMP_TO_EDGE),e}function k(t,n){const e=x,o=d[e(355)]();d[e(327)](d[e(314)],o),d.bufferData(d.ARRAY_BUFFER,t,d[e(301)]);const r=3*Float32Array[e(286)]+2*Float32Array[e(286)];d.vertexAttribPointer(0,3,d[e(322)],!1,r,0),d.enableVertexAttribArray(0),d[e(307)](1,2,d[e(322)],!1,r,3*Float32Array[e(286)]),d.enableVertexAttribArray(1);const i=d[e(355)]();return d.bindBuffer(d[e(335)],i),d[e(283)](d[e(335)],n,d.STATIC_DRAW),d[e(327)](d[e(314)],null),o}return(t,n)=>{const e=x;return c(),s(e(317),g,[u(e(360),{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(369)}},null,8,p)])}}});function A(){const t=["scale","change","SRC_ALPHA","bindBuffer","canvaswebgl","texImage2D","innerHeight","FRAMEBUFFER","createFramebuffer","chain","height","ELEMENT_ARRAY_BUFFER",'{}.constructor("return this")( )',"__proto__","offset_right_bottom","TEXTURE_WRAP_S","getUniformLocation","toString","ONE_MINUS_SRC_ALPHA","clearColor","uniform1f","5417907OAVuBu","test","offset_left_top","lookAt","stateObject","uView","addBlade","create","while (true) {}","9zkRqzB","createBuffer","color","2803104tDwfuF","input","111307tIEUkE","img","UNSIGNED_BYTE","offset_right_top","uProjection","translate","constructor","mixParam","texParameteri","TEXTURE_MIN_FILTER","none","COLOR_BUFFER_BIT","240ozsYXl","addBinding","996168pBrKgz","enable","uModel","src","289360JlVfTf","action","trace","39SlVnuK","length","TRIANGLES","mat4","innerWidth","gger","table","string","10uJrCNp","debu","159VxeUex","bufferData","TEXTURE_WRAP_T","3suQGJZ","BYTES_PER_ELEMENT","exception","532990AklJFo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","drawElements","bindFramebuffer","webglPostProcessing","BLEND","prototype","21324wfLFRs","bindTexture","是否后处理","hidden","RGBA","STATIC_DRAW","TEXTURE_2D","console","function *\\( *\\)","useProgram","width","vertexAttribPointer","uniformMatrix4fv","bind","ortho","offset_left_bottom","getElementById","apply","ARRAY_BUFFER","inline","init","canvas","clear","info","logo-texture","value","FLOAT","NEAREST"];return(A=function(){return t})()}function R(t){function n(t){const e=x;if(typeof t===e(279))return function(t){}[e(365)](e(353))[e(313)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(365)](e(281)+"gger").call(e(270)):function(){return!1}[e(365)](e(281)+e(277))[e(313)](e(349)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as default};

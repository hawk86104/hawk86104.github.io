import{P as t}from"./tweakpane.yDiyAAkA1741583630766.js";import{e,h as n,a as o,o as r}from"./@tresjs.ZmhvXhx31741583630766.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.4TnY_Fpj1741583630766.js";import{_ as a,P as s,aX as l}from"./three.sQDbNBks1741583630766.js";import{d as u,a6 as c,a3 as f,w as m,o as p,H as d,N as h,u as g,j as v,r as x,e as I,f as w,g as S,al as y,m as b}from"./@vue.NRI7TcgI1741583630766.js";import"./postprocessing.7Yq_IN-m1741583630766.js";import"./@vueuse.Z9_WSajh1741583630766.js";import"./all.three.B_wkcYmQ1741583630766.js";import"./oimophysics.x0jH7fze1741583630766.js";const _=N;!function(t,e){const n=N,o=U();for(;;)try{if(520327===-parseInt(n(423))/1+-parseInt(n(442))/2+-parseInt(n(415))/3*(-parseInt(n(405))/4)+parseInt(n(420))/5*(parseInt(n(425))/6)+parseInt(n(436))/7+-parseInt(n(431))/8*(-parseInt(n(440))/9)+-parseInt(n(409))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[N(414)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function N(t,e){const n=U();return(N=function(t,e){return n[t-=389]})(t,e)}function U(){const t=["9arefUK","TresPoints","805568VEXUkf","baseMaterial","TresBufferGeometry","debu","uTime","bind","TresGroup","trace","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","Color","while (true) {}","height","call","info","set","warn","constructor","scale","getAttribute","array","push","test","map","lineMagicZone","rotateX","276dqnetg","counter","__proto__","chain","10545720elVazO","value","console","aIndex","floor","apply","28641cbmlJC","#90ee90","table","color","uHeight","155160ivmzOi","position","speed","525677TEOrxi","toString","168VejyCP","action","#409eff","length","EllipseCurve","BufferGeometry","363496iNfkWY","uScale","baseColor","string","yRadius","6511988bjiESm","init","return (function() ","gger"];return(U=function(){return t})()}!function(){T(this,(function(){const t=N,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=O(t(437));e[t(401)](o+t(408))&&n[t(401)](o+"input")?O():o("0")}))()}();const P=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();P(void 0,(function(){const t=N,e=function(){const t=N;let e;try{e=Function(t(438)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(411)]=e.console||{},o=["log",t(395),t(393),"error","exception",t(417),t(449)];for(let r=0;r<o[t(428)];r++){const e=P[t(396)].prototype[t(447)](P),i=o[r],a=n[i]||e;e[t(407)]=P[t(447)](P),e[t(424)]=a[t(424)][t(447)](a),n[i]=e}}))();const C=[_(404)],j=[_(421),_(412),"aNormal"],M=_(450),W=u({__name:_(403),props:{height:{default:1.6},speed:{default:1},color:{default:_(416)}},async setup(t){const r=_;let i,u;const x=c(),I=t,w=([i,u]=f((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,u(),i),S=new(a[r(429)])(0,0,8,8,0,2*Math.PI,!1,0),y=[];for(let e=0;e<5;e++)y[r(400)](...S.getPoints(719)),S.xRadius+=.2,S[r(435)]+=.2;const b=new Float32Array(y[r(402)](((t,e)=>e))),T=(new(a[r(430)])).setFromPoints(y)[r(398)](r(421))[r(399)],N=new Float32Array(T[r(428)]);for(let e=0;e<T[r(428)]/3;e++){const t=3*e;T[t+1]+=.15*Math[r(413)](e/720);const n=e%720*3,o=3*(e%720+2880);N[t]=T[o]-T[n],N[t+1]=T[o+1]-T[n+1],N[t+2]=T[o+2]-T[n+2]}const U={uTime:{value:0},uScale:{value:x[r(397)]?x[r(397)]:1},uHeight:{value:I.height},uPerlinTexture:{value:w[1]},baseColor:{value:new(a[r(389)])(I.color)}},{onLoop:P}=e();return P((()=>{const t=r;U[t(446)].value+=.01*I[t(422)]})),m((()=>[I[r(418)],x.scale,I[r(391)]]),(([t,e,n])=>{const o=r;U[o(433)][o(410)][o(394)](t),U[o(432)][o(410)]=e,U[o(419)].value=n})),(t,e)=>{const o=r;return p(),d(o(448),null,[h(o(441),{rotateX:-Math.PI/2,scale:.1},[h(o(444),{position:[g(T),3],aIndex:[g(b),1],aNormal:[g(N),3]},null,8,j),v(g(n),{baseMaterial:s,vertexShader:"\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n",fragmentShader:M,uniforms:U,map:g(w)[0],alphaMap:g(w)[0],transparent:"",depthWrite:!1,blending:l,color:o(427),size:.1},null,8,[o(443),o(402),"alphaMap","blending"])],8,C)])}}});function O(t){function e(t){const n=N;if(typeof t===n(434))return function(t){}[n(396)](n(390)).apply(n(406));1!==(""+t/t)[n(428)]||t%20==0?function(){return!0}[n(396)](n(445)+n(439))[n(392)](n(426)):function(){return!1}[n(396)](n(445)+n(439))[n(414)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const z=A;!function(t,e){const n=A,o=R();for(;;)try{if(430970===-parseInt(n(222))/1*(-parseInt(n(217))/2)+parseInt(n(227))/3*(-parseInt(n(226))/4)+parseInt(n(211))/5+parseInt(n(216))/6+-parseInt(n(223))/7*(parseInt(n(229))/8)+-parseInt(n(205))/9+-parseInt(n(206))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(195)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=A,e=new RegExp(t(220)),n=new RegExp(t(221),"i"),o=k("init");e.test(o+t(204))&&n[t(212)](o+"input")?k():o("0")}))()}();const E=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(195)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function R(){const t=["1292428mbMegk","3ghNnAy","console","24MucdPM","counter","gger","speed","apply","#ff0000","log","table","TresPerspectiveCamera","lineMagicZone","length","scale","string","chain","2791233Lnssnf","981770GoFWRJ","prototype","toString","bind","stateObject","3122070dcHtbB","test","addBinding","call","constructor","4620798BftcUq","1268cNnTTE","debu","warn","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","905IErkFD","1880494qHulJZ","trace","TresCanvas"];return(R=function(){return t})()}function A(t,e){const n=R();return(A=function(t,e){return n[t-=195]})(t,e)}E(void 0,(function(){const t=A;let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(228)]=e.console||{},o=[t(197),t(219),"info","error","exception",t(198),t(224)];for(let i=0;i<o[t(201)];i++){const e=E.constructor[t(207)].bind(E),r=o[i],a=n[r]||e;e.__proto__=E.bind(E),e[t(208)]=a[t(208)][t(209)](a),n[r]=e}}))();const L=u({__name:z(200),setup(e){const n=z,o=x({reflectivity:.1,showGridHelper:!0,scale:1}),a=x({color:n(196),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(213)](a,"color",{label:"颜色"}),s[n(213)](a,n(202),{label:"大小",min:.1,max:3,step:.1}),s.addBinding(a,"height",{label:"高度",min:.1,max:3,step:.1}),s.addBinding(a,n(232),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=I(s(225));return p(),w(l,{clearColor:"#201919","window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:S((()=>[e[0]||(e[0]=h(s(199),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),v(g(r),{enableDamping:""}),e[1]||(e[1]=h("TresAmbientLight",{intensity:2},null,-1)),(p(),w(y,null,{default:S((()=>[v(W,b({position:[3,0,0]},a),null,16)])),_:1})),(p(),w(y,null,{default:S((()=>[v(W,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(p(),w(y,null,{default:S((()=>[v(i,b({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function k(t){function e(t){const n=A;if(typeof t===n(203))return function(t){}.constructor("while (true) {}")[n(195)](n(230));1!==(""+t/t)[n(201)]||t%20==0?function(){return!0}[n(215)](n(218)+n(231))[n(214)]("action"):function(){return!1}.constructor(n(218)+"gger")[n(195)](n(210)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

import{c7 as t,a3 as n,C as e,k as r}from"./three.rmsIv-u_1736160428509.js";import{b as o}from"./@tresjs.8MtVPQyb1736160428509.js";import{R as c}from"./all.three._2K49LgC1736160428509.js";import{d as a,b as i,a6 as s,a1 as u,o as f,D as l,J as p,m,u as v}from"./@vue.4u_eOGex1736160428509.js";!function(t,n){const e=x,r=h();for(;;)try{if(133950===-parseInt(e(283))/1+parseInt(e(282))/2*(parseInt(e(292))/3)+-parseInt(e(296))/4+-parseInt(e(271))/5+-parseInt(e(303))/6+-parseInt(e(265))/7*(parseInt(e(263))/8)+parseInt(e(284))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(291)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(){const t=["call","fragmentShader","exception","apply","1143cBvsmm","action","return (function() ","while (true) {}","724456qKFtwM","bind","counter","input","log","length","init","986754epKXDs","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","prototype","function *\\( *\\)","226296chhHiX","replace","14XMYgPq","chain","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","stateObject","597995EeWbXu","void main() {","string","vertexShader","console","warn","gger","test","constructor","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","table","898xWNQkr","3777ngOfgx","4395636FKfzeb","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","error"];return(h=function(){return t})()}!function(){d(this,(function(){const t=x,n=new RegExp(t(262)),e=new RegExp(t(268),"i"),r=y(t(302));n[t(278)](r+t(266))&&e[t(278)](r+t(299))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(291)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(294)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(275)]=n.console||{},r=[t(300),t(276),t(267),t(287),t(290),t(281),"trace"];for(let o=0;o<r[t(301)];o++){const n=g[t(279)][t(261)][t(297)](g),c=r[o],a=e[c]||n;n[t(269)]=g[t(297)](g),n.toString=a.toString[t(297)](a),e[c]=n}}))();function x(t,n){const e=h();return(x=function(t,n){return e[t-=261]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(273))return function(t){}[e(279)](e(295))[e(291)](e(298));1!==(""+t/t)[e(301)]||t%20==0?function(){return!0}[e(279)]("debu"+e(277))[e(288)](e(293)):function(){return!1}[e(279)]("debu"+e(277))[e(291)](e(270)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=S;!function(t,n){const e=S,r=C();for(;;)try{if(839679===-parseInt(e(378))/1+-parseInt(e(368))/2+parseInt(e(334))/3*(parseInt(e(330))/4)+parseInt(e(337))/5+-parseInt(e(353))/6*(parseInt(e(324))/7)+-parseInt(e(351))/8+parseInt(e(358))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=S,n=new RegExp(t(360)),e=new RegExp(t(348),"i"),r=E(t(354));n[t(320)](r+t(340))&&e[t(320)](r+t(328))?E():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(380)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=S;let n;try{n=Function("return (function() "+t(349)+");")()}catch(o){n=window}const e=n[t(341)]=n[t(341)]||{},r=[t(333),"warn","info","error",t(336),t(332),"trace"];for(let c=0;c<r[t(342)];c++){const n=w.constructor[t(359)][t(343)](w),o=r[c],a=e[o]||n;n[t(373)]=w[t(343)](w),n[t(374)]=a[t(374)][t(343)](a),e[o]=n}}))();const M=[_(338)],I=[_(366),_(377)];function C(){const t=["uv1","call","color","aoMap","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"value","6314688QDcIFk","reflectorDiffuse","402UtMGev","init","while (true) {}","showGridHelper","TresMesh","9835083tSIVZB","prototype","function *\\( *\\)","assign","string","renderTargetUniform","debu","#444","object","wrapS","915644fOaNeU","tmRef","action","attributes","update","__proto__","toString","textureMatrixUniform","mirror","visible","52257bNVWoB","#ffffff","apply","repeat","constructor","test","primitive","gger","TresMeshStandardMaterial","80990LQYyjL","channel","tpgRef","onBeforeRender","input","uniforms","28amXKRa","stateObject","table","log","466755cqTYjy","counter","exception","3662010KFxEss","rotation-x","textureMatrix","chain","console","length","bind"];return(C=function(){return t})()}function S(t,n){const e=C();return(S=function(t,n){return e[t-=319]})(t,n)}const j=a({__name:_(352),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(379)}},async setup(a){const d=_;let h,g;const y=a,b=new t(9.5,10),w=i(),C=i(),S=i(),j=new c,E={mirror:{value:y[d(376)]},mixStrength:{value:y.mixStrength}},z=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var T=0;T<3;T++)z[T][d(367)]=n,z[T].wrapT=n,z[T][d(381)].set(16,16);const R={color:new e(d(365)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},k=t=>{const n=d;t[n(329)].reflectMap=j[n(363)],t[n(329)][n(339)]=j[n(375)],t[n(329)]=Object[n(361)](t[n(329)],E),(t=>{const n=x;t[n(274)]=t.vertexShader[n(264)](n(272),n(286)),t.vertexShader=t.vertexShader.replace("#include <project_vertex>",n(285))})(t),(t=>{const n=x;t.fragmentShader=t[n(289)][n(264)](n(272),n(304)),t[n(289)]=t[n(289)].replace("#include <emissivemap_fragment>",n(280))})(t)};return u((()=>{const t=d;w[t(350)]&&(w[t(350)][t(371)][t(344)]=w.value[t(371)].uv),S[t(350)]&&(S.value[t(347)][t(325)]=1,S[t(350)].onBeforeCompile=k),C[t(350)]&&(C[t(350)].add(j),C[t(350)][t(327)]=(n,e,r)=>{j[t(372)](n,e,r)}),y[t(346)]&&S[t(350)]&&(S[t(350)].color=new e(y.color))})),(t,n)=>{const e=d;return f(),l("TresGroup",null,[p(e(357),{ref_key:e(369),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(326),ref:w,args:[10,10]},null,512),p(e(323),m({ref_key:"tmsmRef",ref:S},R),null,16)],8,M),p(e(321),{object:v(b),visible:t[e(356)]},null,8,I)])}}});function E(t){function n(t){const e=S;if(typeof t===e(362))return function(t){}[e(319)](e(355))[e(380)](e(335));1!==(""+t/t)[e(342)]||t%20==0?function(){return!0}[e(319)](e(364)+"gger")[e(345)](e(370)):function(){return!1}[e(319)](e(364)+e(322))[e(380)](e(331)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

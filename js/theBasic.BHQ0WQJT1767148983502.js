import{importShared as i}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_l as C,ol as S,Kk as k}from"./index.DTe2qqjO1767148983502.js";import{World as R,NaiveBroadphase as x,Sphere as P,Body as p,Material as c,Plane as N,ContactMaterial as f}from"./cannon-es.CjqBMEnX1767148983502.js";const{defineComponent:b}=await i("vue"),w=10,V=b({__name:"theBasicCannon",props:{sphere:{default:null},sphere2:{default:null},plane:{default:null}},setup(u){const r=u,a=new R;a.gravity.set(0,-9.82,0),a.broadphase=new x,a.defaultContactMaterial.contactEquationRelaxation=5,a.defaultContactMaterial.contactEquationStiffness=1e7;const l=r.sphere.geometry.parameters.radius,s=new P(l),n=new p({mass:w});n.addShape(s),n.position.copy(r.sphere.position),n.material=new c({restitution:10});const t=new p({mass:w});t.addShape(s),t.position.copy(r.sphere2.position),t.material=new c({restitution:1});const h=new N,e=new p({mass:0});e.addShape(h),e.position.copy(r.plane.position),e.quaternion.set(...r.plane.quaternion.toArray()),e.material=new c;const T=new f(e.material,n.material,{friction:0,restitution:.7}),M=new f(e.material,t.material,{friction:0,restitution:.9});a.addContactMaterial(T),a.addContactMaterial(M),a.addBody(n),a.addBody(t),a.addBody(e);const{onRender:B}=C();return B(({delta:m})=>{a.fixedStep(1/120,m),r.sphere.position.copy(n.position),r.sphere2.position.copy(t.position)}),(m,O)=>null}}),{defineComponent:E}=await i("vue"),{createElementVNode:o,unref:y,normalizeProps:z,guardReactiveProps:D,createVNode:v,openBlock:_,createBlock:G,createCommentVNode:L,mergeProps:q,withCtx:A,createTextVNode:F,Fragment:I,createElementBlock:$}=await i("vue"),H=["rotation"],{SRGBColorSpace:K,BasicShadowMap:W,NoToneMapping:Z}=await i("three"),{reactive:g,ref:d,shallowRef:j,watchEffect:J}=await i("vue"),Y=E({__name:"theBasic",setup(u){const r=g({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:W,outputColorSpace:K,toneMapping:Z}),a=g({enableDamping:!0,dampingFactor:.05,enableZoom:!0,autoRotate:!1}),l=d(),s=d(),n=d(),t=j();return J(()=>{t.value&&(t.value.shadow.mapSize.set(1e3,1e3),t.value.shadow.camera.near=.5,t.value.shadow.camera.far=5e4,t.value.shadow.camera.top=20,t.value.shadow.camera.right=20,t.value.shadow.camera.left=-20,t.value.shadow.camera.bottom=-20)}),(h,e)=>(_(),$(I,null,[v(y(S),q(r,{"window-size":""}),{default:A(()=>[e[3]||(e[3]=o("TresPerspectiveCamera",{position:[15,15,15],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),v(y(k),z(D(a)),null,16),e[4]||(e[4]=o("TresAmbientLight",{intensity:.5},null,-1)),o("TresMesh",{ref_key:"sphereRef",ref:l,position:[0,6,0],"cast-shadow":""},[...e[0]||(e[0]=[o("TresSphereGeometry",{args:[1.5,32,32]},null,-1),o("TresMeshToonMaterial",{color:"#006060"},null,-1)])],512),o("TresMesh",{ref_key:"sphereRef2",ref:s,position:[4,6,0],"cast-shadow":""},[...e[1]||(e[1]=[o("TresSphereGeometry",{args:[1.5,32,32]},null,-1),o("TresMeshToonMaterial",{color:"#ff6060"},null,-1)])],512),o("TresMesh",{ref_key:"planeRef",ref:n,rotation:[-Math.PI/2,0,0],position:[0,-.01,0],"receive-shadow":""},[...e[2]||(e[2]=[o("TresPlaneGeometry",{args:[20,20,20,20]},null,-1),o("TresMeshToonMaterial",null,null,-1)])],8,H),n.value?(_(),G(V,{key:0,sphere:l.value,sphere2:s.value,plane:n.value},null,8,["sphere","sphere2","plane"])):L("",!0),o("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:t,position:[10,8,4],intensity:1,"cast-shadow":""},null,512),e[5]||(e[5]=o("TresDirectionalLight",{position:[10,2,4],intensity:1,"cast-shadow":""},null,-1)),e[6]||(e[6]=o("TresGridHelper",null,null,-1))]),_:1},16),e[7]||(e[7]=o("h1",{class:"text-center text-white w-full absolute"},[F(" 使用cannon-es库 API详见:"),o("a",{target:"_black",href:"https://pmndrs.github.io/cannon-es/docs/"},"cannon-es/docs")],-1))],64))}});export{Y as default};

import{_ as t,c as n,h as e}from"./three.3b9CEYeV1731055558423.js";import{m as a}from"./@tresjs.KsuCtVXf1731055558423.js";import{d as o,P as r}from"./@pmndrs.3lOkADtW1731055558423.js";import{d as s,b as i,w as c,a3 as l,o as u,D as f,J as h,aj as p,ak as d}from"./@vue.u2cBPEWn1731055558423.js";const m=M;!function(t,n){const e=M,a=y();for(;;)try{if(809945===-parseInt(e(537))/1+-parseInt(e(523))/2*(parseInt(e(559))/3)+parseInt(e(502))/4*(-parseInt(e(488))/5)+-parseInt(e(498))/6*(-parseInt(e(492))/7)+-parseInt(e(526))/8*(parseInt(e(560))/9)+parseInt(e(547))/10*(parseInt(e(497))/11)+-parseInt(e(501))/12*(-parseInt(e(533))/13))break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const w=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[M(532)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();!function(){w(this,(function(){const t=M,n=new RegExp(t(535)),e=new RegExp(t(504),"i"),a=z(t(543));n[t(511)](a+t(507))&&e[t(511)](a+t(525))?z():a("0")}))()}();const g=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[M(532)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();g(void 0,(function(){const t=M;let n;try{n=Function(t(486)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(519)]=n[t(519)]||{},a=[t(505),t(489),"info","error","exception",t(506),"trace"];for(let r=0;r<a[t(493)];r++){const n=g.constructor[t(546)].bind(g),o=a[r],s=e[o]||n;n[t(491)]=g[t(544)](g),n[t(550)]=s[t(550)][t(544)](s),e[o]=n}}))();const b=[m(496)];function y(){const t=["gger","camera","width","frames","add","right","string","81MyZoLb","1359NKLgKH","Vector3","castShadow","opacity","blendWindow","prepare","debu","color","MathUtils","mapSize","set","return (function() ","left","45yZCEJY","warn","randFloatSpread","__proto__","7105700mbUECs","length","random","remove","rotate-x","11idtlGA","6ybDYUC","size","value","1390632KNYyDJ","635756KlbfIQ","shadow","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","table","chain","stateObject","action","cos","test","bottom","ambient","amount","bias","near","progressiveLightMap2","shadows render start","console","constructor","TresPlaneGeometry","radius","119118GwHHDc","blend","input","35848ZkozGo","children","accumulativeShadowsCom","DirectionalLight","position","finish","apply","325PVIsfS","shadows plm update","function *\\( *\\)","acos","18049SXwftZ","counter","lightPosition","TresSoftShadowMaterial","sin","intensity","init","bind","abs","prototype","6309190fThEBw","alphaTest","while (true) {}","toString","material"];return(y=function(){return t})()}function M(t,n){const e=y();return(M=function(t,n){return e[t-=478]})(t,n)}const I=s({__name:m(528),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,g=s;let y=i();const{extend:M,scene:I,renderer:z,camera:S}=a();M({SoftShadowMaterial:o});const x={position:(new(t[w(561)]))[w(485)](g[w(539)].x,g[w(539)].y,g.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},P=new r(z[w(500)],I.value,x[w(484)]),_={map:P[w(517)].texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(524)],alphaTest:g.alphaTest,opacity:g[w(478)],color:g[w(482)]},v=new n;for(let n=0;n<x.amount;n++){const n=new(t[w(529)])(16777215,x[w(542)]/x[w(514)]);n[w(562)]=!0,n[w(503)][w(515)]=x[w(515)],n[w(503)][w(553)][w(516)]=x[w(516)],n.shadow.camera.far=x.far,n[w(503)].camera[w(557)]=x.size/2,n[w(503)][w(553)][w(487)]=-x[w(499)]/2,n[w(503)][w(553)].top=x[w(499)]/2,n.shadow[w(553)][w(512)]=-x[w(499)]/2,n[w(503)].mapSize[w(554)]=x[w(484)],n.shadow[w(484)].height=x[w(484)],v[w(556)](n)}const T=()=>{const n=w,a=x[n(530)][n(493)]();for(let o=0;o<v.children[n(493)];o++){const r=v[n(527)][o];if(Math[n(494)]()>g[n(513)])r[n(530)].set(x.position.x+t[n(483)][n(490)](x[n(522)]),x[n(530)].y+e[n(490)](x.radius),x[n(530)].z+e[n(490)](x[n(522)]));else{let t=Math[n(536)](2*Math[n(494)]()-1)-Math.PI/2,e=2*Math.PI*Math[n(494)]();r[n(530)][n(485)](Math[n(510)](t)*Math[n(510)](e)*a,Math[n(545)](Math[n(510)](t)*Math[n(541)](e)*a),Math[n(541)](t)*a)}}},j=(t=1)=>{const n=w;I[n(500)][n(556)](v),P[n(480)]();for(let e=0;e<t;e++)T(),P.update(S.value,g[n(479)]),console[n(505)](n(534),e);I[n(500)][n(495)](v),P[n(531)]()};c((()=>y[w(500)]),(t=>{const n=w;t&&(P.configure(t),P.clear(),console.log(n(518)),j(g[n(555)]),console.log("shadows render end"))}));const Z=()=>{const t=w;P.clear(),j(g[t(555)])};return l((()=>{const t=w;y.value&&(g[t(478)]&&(y[t(500)].material[t(478)]=g[t(478)]),g[t(548)]&&(y[t(500)].material[t(548)]=g[t(548)]),g[t(482)]&&y[t(500)][t(551)][t(482)].set(g[t(482)]),g.blend&&(y[t(500)].material[t(524)]=g[t(524)]))})),c((()=>g[w(539)]),(t=>{const n=w;t&&(console.log(g.lightPosition),x[n(530)][n(485)](t.x,t.y,t.z),Z())}),{deep:!0}),c((()=>[g.frames,g[w(479)],g.ambient]),(()=>{Z()})),(t,n)=>{const e=w;return u(),f("TresMesh",{"receive-shadow":"",ref_key:"gPlane",ref:y,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=h(e(521),{args:[1,1]},null,-1)),h(e(540),p(d(_)),null,16)],8,b)}}});function z(t){function n(t){const e=M;if(typeof t===e(558))return function(t){}[e(520)](e(549))[e(532)](e(538));1!==(""+t/t)[e(493)]||t%20==0?function(){return!0}[e(520)](e(481)+e(552)).call(e(509)):function(){return!1}[e(520)]("debugger")[e(532)](e(508)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

import{e as n,D as t,a as o,o as r}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{_ as e,c as a,c3 as s,ai as i}from"./three.FxqAALWt1741168315107.js";import{P as c}from"./tweakpane.yDiyAAkA1741168315107.js";import{d as u,a3 as l,r as f,b as p,w as m,o as v,H as g,N as d,aj as x,ak as y,u as h,e as w,f as b,g as I,j as C,al as _}from"./@vue.NRI7TcgI1741168315107.js";import"./postprocessing.hfy6Kqg11741168315107.js";import"./@vueuse.Z8xAfE_A1741168315107.js";function z(n,t){const o=V();return(z=function(n,t){return o[n-=310]})(n,t)}const P=z;!function(n,t){const o=z,r=V();for(;;)try{if(949962===parseInt(o(367))/1+parseInt(o(356))/2*(parseInt(o(324))/3)+parseInt(o(325))/4*(-parseInt(o(311))/5)+parseInt(o(360))/6+-parseInt(o(315))/7+-parseInt(o(314))/8*(-parseInt(o(334))/9)+-parseInt(o(323))/10*(parseInt(o(351))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const A=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[z(344)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){A(this,(function(){const n=z,t=new RegExp(n(345)),o=new RegExp(n(320),"i"),r=R(n(375));t[n(385)](r+n(378))&&o[n(385)](r+"input")?R():r("0")}))()}();const M=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[z(344)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();M(void 0,(function(){const n=z,t=function(){const n=z;let t;try{t=Function("return (function() "+n(329)+");")()}catch(o){t=window}return t}(),o=t[n(312)]=t.console||{},r=["log",n(318),n(381),n(342),n(338),n(383),"trace"];for(let e=0;e<r[n(330)];e++){const t=M[n(335)].prototype[n(321)](M),a=r[e],s=o[a]||t;t[n(370)]=M[n(321)](M),t[n(377)]=s.toString[n(321)](s),o[a]=t}}))();const j=[P(355)];function V(){const n=["length","debu","rotateY","Color","27nocipG","constructor","toNormal","m1Color","exception","action","TresShaderMaterial","divideScalar","error","string","apply","function *\\( *\\)","position","Mesh","BufferAttribute","sin","traverse","10450YqELdx","attributes","clone","tangent","geometry","2HNJCtB","array","deleteAttribute","scene","7662102sIkzMd","translate","aCenter","count","refresh","TresMesh","set","1789222AGGqbs","#bcd4ff","gger","__proto__","#ffc0fa","toNonIndexed","./draco/","rotateX","init","counter","toString","chain","addBinding","uniforms","info","while (true) {}","table","Vector3","test","m2Color","disabled","491690dfLMRr","console","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","409872HiiKSz","10595606vnTfqG","value","children","warn","toPosition","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","mergeGeometries","5550kVtAmK","787857eArUsq","20LYINSX","random","setAttribute","stateObject",'{}.constructor("return this")( )'];return(V=function(){return n})()}const N=u({__name:"fragmentModelCom",async setup(r){const i=P;let u,w;const b=n=>{const t=z,o=[];return n[t(350)]((n=>{const r=t;n instanceof e[r(347)]&&(n[r(355)][r(358)]("uv"),n[r(355)].deleteAttribute(r(354)),o.push(n.geometry))})),s[t(322)](o)},I=b(([u,w]=l((()=>t(i(313),{draco:!0,decoderPath:i(373)}))),u=await u,w(),u).scene.children[0]);I[i(374)](Math.PI/2),I[i(361)](0,-.9,0);const C=I[i(353)]()[i(372)](),_=b(([u,w]=l((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:i(373)}))),u=await u,w(),u)[i(359)][i(317)][0]);_[i(374)](-Math.PI/2),_[i(332)](Math.PI/3);const A=_[i(353)]()[i(372)](),M=C[i(352)].position[i(357)],V=C[i(352)][i(346)][i(363)],N=A.attributes.position[i(357)],R=A[i(352)].normal[i(357)],D=A[i(352)][i(346)][i(363)],S=new Float32Array(V),k=new Float32Array(3*(V+2)),E=new Float32Array(3*(V+2)),F=new Float32Array(3*(V+2));for(let n=0;n<V;n+=3){const t=1*Math[i(326)](),o=n%D;S[n]=t,S[n+1]=t,S[n+2]=t;const r=3*n,a=M[r],s=M[r+1],c=M[r+2],u=M[r+3],l=M[r+4],f=M[r+5],p=M[r+6],m=M[r+7],v=M[r+8],g=new(e[i(384)])(a+u+p,s+l+m,c+f+v)[i(341)](3);k[i(366)]([g.x,g.y,g.z],3*n),k.set([g.x,g.y,g.z],3*(n+1)),k[i(366)]([g.x,g.y,g.z],3*(n+2));const d=(n,t,o)=>{const r=i,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(366)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(N,E,o),d(R,F,o)}C.setAttribute("aRandom",new a(S,1)),C[i(327)](i(362),new a(k,3)),C[i(327)](i(319),new a(E,3)),C[i(327)](i(336),new(e[i(348)])(F,3)),console.log(C[i(352)]);const T=([u,w]=l((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),u=await u,w(),u),B={uniforms:{u_progress:{value:-.1},matcap1:{value:T},m1Color:{type:"v3",value:new(e[i(333)])(i(371))},matcap2:{value:T},m2Color:{type:"v3",value:new(e[i(333)])("#bcd4ff")}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},Y=f({c1:"#ffc0fa",c2:i(368)}),Z=p(.5),q=new c({title:"参数"});return q.addBinding(B[i(380)].u_progress,i(316),{label:"变化量",min:-.1,max:1,step:.001})[i(310)]=!0,q[i(379)](Y,"c1",{label:"颜色1st"}),q[i(379)](Y,"c2",{label:"颜色2rd"}),q[i(379)](Z,i(316),{label:"速度",min:.001,max:1,step:.001}),m(Y,(n=>{const t=i;B[t(380)][t(337)].value[t(366)](n.c1),B.uniforms[t(386)][t(316)][t(366)](n.c2)}),{deep:!0}),n().onLoop((({elapsed:n})=>{const t=i;B[t(380)].u_progress[t(316)]=(Math[t(349)](n*Z[t(316)])+1)/2,q[t(364)]()})),(n,t)=>{const o=i;return v(),g(o(365),{geometry:h(C)},[d(o(340),x(y(B)),null,16)],8,j)}}});function R(n){function t(n){const o=z;if(typeof n===o(343))return function(n){}[o(335)](o(382)).apply(o(376));1!==(""+n/n)[o(330)]||n%20==0?function(){return!0}.constructor(o(331)+o(369)).call(o(339)):function(){return!1}.constructor(o(331)+o(369)).apply(o(328)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function D(n,t){const o=B();return(D=function(n,t){return o[n-=443]})(n,t)}const S=D;!function(n,t){const o=D,r=B();for(;;)try{if(459462===-parseInt(o(477))/1+-parseInt(o(447))/2+-parseInt(o(470))/3+parseInt(o(455))/4*(parseInt(o(449))/5)+-parseInt(o(467))/6+-parseInt(o(474))/7*(parseInt(o(462))/8)+parseInt(o(458))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const k=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[D(454)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){k(this,(function(){const n=D,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(443),"i"),r=T("init");t[n(460)](r+n(453))&&o[n(460)](r+"input")?T():r("0")}))()}();const E=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[D(454)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();E(void 0,(function(){const n=D,t=function(){const n=D;let t;try{t=Function("return (function() "+n(468)+");")()}catch(o){t=window}return t}(),o=t[n(456)]=t.console||{},r=[n(475),n(451),n(463),"error",n(473),"table",n(461)];for(let e=0;e<r[n(471)];e++){const t=E.constructor[n(448)].bind(E),a=r[e],s=o[a]||t;t[n(476)]=E[n(459)](E),t[n(466)]=s[n(466)].bind(s),o[a]=t}}))();const F=u({__name:S(445),setup(n){const t=S,o=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:t(446),windowSize:!0,toneMapping:i,toneMappingExposure:.8};return(n,a)=>{const s=t,i=w(s(465));return v(),b(i,x(y(e)),{default:I((()=>[a[0]||(a[0]=d(s(450),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(h(r),x(y(o)),null,16),a[1]||(a[1]=d(s(444),{intensity:2},null,-1)),(v(),b(_,null,{default:I((()=>[C(N)])),_:1}))])),_:1},16)}}});function T(n){function t(n){const o=D;if("string"==typeof n)return function(n){}[o(469)](o(452))[o(454)]("counter");1!==(""+n/n)[o(471)]||n%20==0?function(){return!0}[o(469)](o(464)+o(457))[o(472)]("action"):function(){return!1}[o(469)](o(464)+o(457))[o(454)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}function B(){const n=["TresPerspectiveCamera","warn","while (true) {}","chain","apply","317604BeXAyY","console","gger","23183613zrRTVE","bind","test","trace","388072jpbBhF","info","debu","TresCanvas","toString","291444ZYsVtV",'{}.constructor("return this")( )',"constructor","2014833EnIerw","length","call","exception","105ESTAtl","log","__proto__","161697VBHvhv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresAmbientLight","fragmentModel","#000000","1807966ixapkQ","prototype","25CHKIkN"];return(B=function(){return n})()}export{F as default};

import{_ as t,C as e,a0 as n}from"./three.-z-VOBM71731641201182.js";import{e as r,W as s,U as a,c as o}from"./@tresjs.b88d4FZI1731641201182.js";import{a as i}from"./index.PIaASH-_1731641201182.js";import"./index.-92EDYxa1731641201182.js";import{z as l}from"./three-custom-shader-material.h_zYovtn1731641201182.js";import{p as u}from"./gl-noise.BrVtymbx1731641201182.js";import{d as c,b as p,a3 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as j,ak as M,m as x,al as z}from"./@vue.-THQH3GC1731641201182.js";import{P as C}from"./tweakpane.yHWGBmom1731641201182.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Wf_eoJPI1731641201182.js";import"./@vueuse.XeXqlNFe1731641201182.js";import"./three-stdlib.azfEeGDS1731641201182.js";import"./@pmndrs.nMJMDdCC1731641201182.js";import"./object-hash.CXGf2irT1731641201182.js";import"./@amap.ZfMFVSXv1731641201182.js";import"./jszip.KrBayNZW1731641201182.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.vanHuc-L1731641201182.js";import"./all.three.2tQ_z9k71731641201182.js";import"./oimophysics.x0jH7fze1731641201182.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.IEUTuzCl1731641201182.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ntCXpMdE1731641201182.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.PYS-6uz51731641201182.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.2GUL6dDN1731641201182.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.D_V6lSTs1731641201182.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Gw2k3f7L1731641201182.js";const I=B;!function(t,e){const n=B,r=G();for(;;)try{if(853194===-parseInt(n(281))/1+-parseInt(n(304))/2+parseInt(n(269))/3+-parseInt(n(263))/4+-parseInt(n(264))/5*(parseInt(n(262))/6)+-parseInt(n(257))/7+-parseInt(n(270))/8*(-parseInt(n(256))/9))break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(252)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=B,e=new RegExp(t(276)),n=new RegExp(t(251),"i"),r=W(t(285));e[t(278)](r+t(258))&&n.test(r+t(246))?W():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(252)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=G();return(B=function(t,e){return n[t-=246]})(t,e)}H(void 0,(function(){const t=B;let e;try{e=Function(t(308)+t(261)+");")()}catch(s){e=window}const n=e[t(286)]=e[t(286)]||{},r=[t(307),t(305),t(279),"error",t(299),t(271),t(291)];for(let a=0;a<r[t(289)];a++){const e=H.constructor[t(267)][t(292)](H),s=r[a],o=n[s]||e;e.__proto__=H[t(292)](H),e.toString=o[t(301)].bind(o),n[s]=e}}))();const F=[I(272)],O=[I(273)];function G(){const t=["warn","uHeight","log","return (function() ","Flatshading","input","counter","constructor","#52a7f7","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","material","tmRef","5384817BVljmF","8662115exIKYQ","chain","stateObject","waterHighlight",'{}.constructor("return this")( )',"12jUMhWp","4607324FJbFVj","180220BzwDRR","customWaterMesh","waterColor","prototype","value","338667dtSNiu","64BoqYZU","table","rotation-x","args","fragment","convertLinearToSRGB","function *\\( *\\)","dispose","test","info","action","177515CsgHPU","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","fragmentShader","baseMaterial","init","console","side","gger","length","TresBoxGeometry","trace","bind","while (true) {}","brightness","TresMesh","MeshPhysicalMaterial","#b3ffff","needsUpdate","exception","height","toString","DoubleSide","flatShading","2814640CksNrM"];return(G=function(){return t})()}const P=c({__name:I(265),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(249)},waterHighlight:{default:I(297)},brightness:{default:1},baseMaterial:{default:t[I(296)]}},setup(a){const o=I,i=a,c=p(null),b={vertex:o(282),fragment:o(253)},w={uTime:{value:0},waterColor:{value:new e(i[o(266)])[o(275)]()},waterHighlight:{value:new e(i.waterHighlight)[o(275)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i.brightness},uHeight:{value:i[o(300)]}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=o;w.uTime[e(268)]=-t/5})),f((()=>{const t=o;i.height&&(w[t(306)][t(268)]=i[t(300)]),i[t(266)]&&(w[t(266)].value=new e(i[t(266)])[t(275)]()),i[t(260)]&&(w[t(260)][t(268)]=new e(i[t(260)])[t(275)]()),i[t(294)]&&(w[t(294)][t(268)]=i.brightness)})),g((()=>i.Flatshading),(t=>{const e=o;c[e(268)][e(254)][e(298)]=!0})),g((()=>i[o(284)]),(e=>{const n=o,r=new l({baseMaterial:t[e],vertexShader:u(b.vertex),fragmentShader:b[n(274)],uniforms:w,flatShading:i[n(309)],side:t[n(302)],roughness:.2,metalness:.1,silent:!0});c[n(268)][n(254)][n(277)](),c[n(268)][n(254)]=r})),(e,r)=>{const a=o;return h(),m(a(295),{ref_key:a(255),ref:c,"rotation-x":-Math.PI/2},[v(a(290),{args:[5,5,e.height,64,64,1]},null,8,O),d(_(s),{baseMaterial:t[a(296)],vertexShader:_(u)(b.vertex),fragmentShader:b[a(274)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:e[a(309)],silent:""},null,8,[a(284),"vertexShader",a(283),a(287),a(303)])],8,F)}}});function W(t){function e(t){const n=B;if("string"==typeof t)return function(t){}.constructor(n(293)).apply(n(247));1!==(""+t/t)[n(289)]||t%20==0?function(){return!0}[n(248)]("debu"+n(288)).call(n(280)):function(){return!1}.constructor(n(250)+"gger")[n(252)](n(259)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=k,r=R();for(;;)try{if(352694===-parseInt(n(468))/1*(parseInt(n(489))/2)+-parseInt(n(427))/3*(-parseInt(n(486))/4)+-parseInt(n(455))/5+-parseInt(n(467))/6*(-parseInt(n(474))/7)+parseInt(n(459))/8+parseInt(n(487))/9+-parseInt(n(434))/10*(parseInt(n(463))/11))break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(451)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=k,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=A(t(484));e.test(r+t(442))&&n[t(476)](r+t(433))?A():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(t,e){const n=R();return(k=function(t,e){return n[t-=426]})(t,e)}function R(){const t=["action","MeshDepthMaterial","MeshNormalMaterial","waterColor","TresDirectionalLight","chain","水体颜色","prototype","addBinding","pos-y.jpg","debu","neg-x.jpg","warn","toString","apply","error","浪头颜色","baseMaterial","2415770urhmbh","list","gger","Flatshading","4755752COPSHd","log","MeshLambertMaterial","trace","420519tcBlFH","string","console","value","11958wOfdZM","348070NhVRsX","length","call","brightness","exception","label","889xZfrVV","MeshToonMaterial","test","constructor","while (true) {}","counter","MeshPhongMaterial","return (function() ","TresPerspectiveCamera","TresAmbientLight","init","MeshBasicMaterial","476tfBFbN","2695266cvLzbX","target","4SueHXw","MeshStandardMaterial","#52a7f7","14523SRewOD","addBlade","info",'{}.constructor("return this")( )',"#b3ffff","ACESFilmicToneMapping","input","50TiGdQQ","waterHighlight","bind"];return(R=function(){return t})()}N(void 0,(function(){const t=k;let e;try{e=Function(t(481)+t(430)+");")()}catch(s){e=window}const n=e[t(465)]=e[t(465)]||{},r=[t(460),t(449),t(429),t(452),t(472),"table",t(462)];for(let a=0;a<r[t(469)];a++){const e=N.constructor[t(444)][t(436)](N),s=r[a],o=n[s]||e;e.__proto__=N[t(436)](N),e[t(450)]=o[t(450)].bind(o),n[s]=e}}))();const L=c({__name:"customWater",setup(e){const n=k,r=b({alpha:!0,toneMapping:t[n(432)],windowSize:!0,clearColor:10066329}),s=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(426),waterHighlight:n(431),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new C;return c[n(445)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(445)](u,n(440),{label:n(443)}),c.addBinding(u,n(435),{label:n(453)}),c[n(445)](u,n(471),{label:"亮度",min:0,max:1,step:.01}),c[n(445)](u,n(458),{label:"Flatshading"}),c[n(428)]({view:n(456),label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:n(485),value:n(485)},{text:n(439),value:n(439)},{text:n(490),value:n(490)},{text:n(480),value:n(480)},{text:n(475),value:n(475)},{text:"MeshLambertMaterial",value:n(461)},{text:n(438),value:n(438)}],value:u[n(454)]}),c.on("change",(t=>{const e=n;"材质"===t[e(488)][e(473)]&&(u[e(454)]=t[e(466)])})),(t,e)=>{const c=n;return h(),w(_(o),x(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=v(c(482),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(a),j(M(s)),null,16),e[1]||(e[1]=v(c(483),{intensity:.5},null,-1)),e[2]||(e[2]=v(c(441),{position:[15,15,15],intensity:1},null,-1)),d(P,j(M(u)),null,16),d(_(S),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(i),{files:["pos-x.jpg",c(448),c(446),"neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function A(t){function e(t){const n=k;if(typeof t===n(464))return function(t){}.constructor(n(478)).apply(n(479));1!==(""+t/t)[n(469)]||t%20==0?function(){return!0}[n(477)](n(447)+n(457))[n(470)](n(437)):function(){return!1}[n(477)](n(447)+n(457)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

import{u as e}from"./colorList.DbCLsRg71763540743861.js";import{r as a,a as l}from"./rawData.lQ4T1IdU1763540743861.js";import{P as t}from"./tweakpane.CqZAnw7f1763540743861.js";import{u as s}from"./rawData.Bm5IktqG1763540743861.js";import{d as n,a as r,c as i,w as o,H as u,o as m,J as d,I as v,ac as p,ao as x,u as c}from"./@vue.Co_gxueH1763540743861.js";import{bL as b,be as f,af as g,b1 as h,aE as y,aG as T,r as w,bK as B,au as j}from"./three.rXKzP9fQ1763540743861.js";const E=["scale","visible"],S=["object"],k=n({__name:"scene",setup(n){const k=s(),F=e(),z=new b(new f(new g(1,1,1)),new h({color:10066329})),A=r(1),G=r(k.yExtent/k.xExtent),R=r(k.zExtent/k.xExtent),_=i(()=>!(A.value<=.01&&A.value>=-.01)&&(!(G.value<=.01&&G.value>=-.01)&&!(R.value<=.01&&R.value>=-.01))),C=new y(k.byteArray,k.xExtent,k.yExtent,k.zExtent);C.format=T,C.type=k.getThreeType(),C.minFilter=w,C.magFilter=w,C.wrapS=B,C.wrapT=B,C.wrapR=B,C.needsUpdate=!0;const D={uniforms:{dataTexture:{value:C},colorTexture:{value:F.updateTransferFunction()},samplingRate:{value:1},threshold:{value:.5},alphaScale:{value:1},invertColor:{value:!0},composeType:{value:3}},vertexShader:l,fragmentShader:a,side:j,transparent:!0},I=r(!0),L=new t;return L.addBinding(A,"value",{label:"x轴缩放",min:-2,max:2,step:.01}),L.addBinding(G,"value",{label:"y轴缩放",min:-2,max:2,step:.01}),L.addBinding(R,"value",{label:"z轴缩放",min:-2,max:2,step:.01}),L.addBlade({view:"list",label:"模式",options:[{text:"maximumIntensity",value:1},{text:"thresholding",value:2},{text:"emissionAbsorption",value:3}],value:D.uniforms.composeType.value}).on("change",e=>{D.uniforms.composeType.value=e.value}),L.addBinding(D.uniforms.samplingRate,"value",{label:"体积采样率",min:0,max:4,step:.01}),L.addBinding(D.uniforms.threshold,"value",{label:"体绘制的阈值",min:0,max:1,step:.01}),L.addBinding(D.uniforms.alphaScale,"value",{label:"透明度",min:0,max:1,step:.01}),L.addBinding(D.uniforms.invertColor,"value",{label:"是否反色"}),L.addBinding(I,"value",{label:"显示边框"}),L.addButton({title:"清空体数据",label:"点击"}).on("click",()=>{k.byteArray=null,L.dispose()}),o(()=>F.colorsStops,()=>{D.uniforms.colorTexture.value=F.updateTransferFunction()},{deep:!0,immediate:!0}),(e,a)=>(m(),u("TresGroup",null,[d("TresMesh",{scale:[A.value,G.value,R.value],visible:_.value},[a[0]||(a[0]=d("TresBoxGeometry",{args:[1,1,1]},null,-1)),d("TresShaderMaterial",p(x(D)),null,16),I.value?(m(),u("primitive",{key:0,object:c(z)},null,8,S)):v("",!0)],8,E)]))}});export{k as _};

import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.bqeYt0R21726273176332.js";import{U as o}from"./@tresjs.BFyWuCYn1726273176332.js";import{C as e}from"./three-custom-shader-material.rb-2297Q1726273176332.js";import"./object-hash.POLi8wZH1726273176332.js";import{_ as r,C as i,cc as u,m as c,a$ as s}from"./three.874nNzAX1726273176332.js";import"./@amap.5r4w7xpt1726273176332.js";import"./glsl-tokenizer.pufBtMwG1726273176332.js";import{d as a,a3 as l,w as f,o as p,E as d,u as m,a4 as g,r as v,f as h,g as y,j as C,m as w}from"./@vue.JNsx1iN61726273176332.js";import{P as _}from"./tweakpane.yHWGBmom1726273176332.js";import"./@vueuse.NxhkGURn1726273176332.js";import"./glsl-token-string.tJdjKq7d1726273176332.js";import"./glsl-token-functions.g-9MLpdi1726273176332.js";import"./jszip.nlLK-hOV1726273176332.js";const x=M;!function(t,n){const o=M,e=j();for(;;)try{if(733514===parseInt(o(182))/1*(-parseInt(o(138))/2)+parseInt(o(199))/3*(parseInt(o(160))/4)+parseInt(o(173))/5*(parseInt(o(165))/6)+parseInt(o(166))/7+-parseInt(o(170))/8*(-parseInt(o(185))/9)+parseInt(o(179))/10+-parseInt(o(191))/11*(parseInt(o(206))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const b=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[M(178)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){b(this,(function(){const t=M,n=new RegExp(t(172)),o=new RegExp(t(137),"i"),e=T(t(180));n[t(205)](e+t(147))&&o.test(e+"input")?T():e("0")}))()}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function M(t,n){const o=j();return(M=function(t,n){return o[t-=137]})(t,n)}function j(){const t=["primitive","854584uPEoGX","exception","children","land","warn","78xlOPfN","9687517QfIbgI","uOpacity","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","#ffff00","680zpZxfX","call","function *\\( *\\)","53615woVtsI","isArray","gradient","#e523ff","console","apply","13284380GodWhy","init","model","3gfjzrG","#112233","bind","93591xvUNOU","stateObject","landColor","forEach","side","bulidingsColor","11cSZMfs","dispose","uTime","uColor","debu","color","DoubleSide",'{}.constructor("return this")( )',"6OpsxKq","toString","constructor","while (true) {}","__csm","length","test","27132252rAxxmh","MeshBasicMaterial","setStyle","boundingBox","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","778960RXCVgC","uniforms","#ffffff","__proto__","object","gger","info","bModel","Color","chain","log","renderOrder","value","uGradient","computeBoundingSphere","return (function() ","material","opacity","trace","clone","action"];return(j=function(){return t})()}I(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(153)+t(198)+");")()}catch(o){n=window}return n}(),o=n[t(177)]=n[t(177)]||{},e=[t(148),t(164),t(144),"error",t(161),"table",t(156)];for(let r=0;r<e[t(204)];r++){const n=I[t(201)].prototype[t(184)](I),i=e[r],u=o[i]||n;n[t(141)]=I[t(184)](I),n[t(200)]=u[t(200)][t(184)](u),o[i]=n}}))();const S=[x(142)],O=a({__name:x(145),props:{model:{},bulidingsColor:{default:x(176)},landColor:{default:x(183)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=x,i=t,u=i[n(181)].city;i.model[n(181)][n(162)][0][n(154)]=new(r[n(207)])({color:n(169)}),u[n(149)]=1001;const c=i[n(181)][n(163)];(()=>{const t=n,{geometry:o}=u;o.computeBoundingBox(),o[t(152)]();const{max:c,min:s}=o[t(209)];if(u[t(154)][t(203)])return;const a=new e({baseMaterial:u[t(154)],vertexShader:"\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t",fragmentShader:t(168),silent:!0,uniforms:{uMax:{value:c},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(r[t(146)])(i[t(190)])},uOpacity:{value:i[t(155)]},uLightColor:{value:new(r[t(146)])(t(140))},uTopColor:{value:new(r[t(146)])(i.topColor)},uTime:{value:0},uGradient:{value:i[t(175)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(197)]});u[t(154)][t(192)](),u[t(154)]=a})();const{onLoop:s}=o();s((({delta:t})=>{const o=n;u[o(154)].uniforms[o(193)][o(150)]+=t})),l((()=>{const t=n;i[t(190)]&&u[t(154)][t(139)][t(194)][t(150)][t(208)](i[t(190)]),i[t(187)]&&((t,o)=>{const e=n;let u;"cu"===t||t===e(163)&&(u=Array[e(174)](c[e(154)])?c[e(154)]:[c[e(154)]],u[e(188)]((t=>{const n=e;t[o][n(208)](i[n(187)]),t[n(189)]=r[n(197)]})))})(t(163),t(196)),i[t(155)]&&(u[t(154)][t(139)][t(167)].value=i[t(155)])})),f(i,((t,o)=>{const e=n;u.material[e(139)][e(151)][e(150)]=t[e(175)]}));const a=i[n(181)][n(181)][n(157)]();return(t,o)=>{const e=n;return p(),d(e(159),{object:m(a)},null,8,S)}}});function T(t){function n(t){const o=M;if("string"==typeof t)return function(t){}.constructor(o(202))[o(178)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(o(195)+o(143))[o(171)](o(158)):function(){return!1}[o(201)](o(195)+o(143)).apply(o(186)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const P=z;!function(t,n){const o=z,e=Z();for(;;)try{if(860733===parseInt(o(269))/1+-parseInt(o(270))/2*(parseInt(o(274))/3)+-parseInt(o(278))/4*(-parseInt(o(301))/5)+-parseInt(o(272))/6*(parseInt(o(285))/7)+parseInt(o(304))/8+parseInt(o(273))/9*(-parseInt(o(276))/10)+parseInt(o(313))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const B=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(305)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){B(this,(function(){const t=z,n=new RegExp(t(314)),o=new RegExp(t(300),"i"),e=G(t(291));n[t(286)](e+t(268))&&o[t(286)](e+"input")?G():e("0")}))()}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(305)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();E(void 0,(function(){const t=z;let n;try{n=Function("return (function() "+t(319)+");")()}catch(r){n=window}const o=n.console=n[t(299)]||{},e=[t(266),t(283),t(288),t(265),t(311),t(294),t(306)];for(let i=0;i<e.length;i++){const n=E.constructor[t(289)][t(287)](E),r=e[i],u=o[r]||n;n.__proto__=E[t(287)](E),n[t(282)]=u[t(282)][t(287)](u),o[r]=n}}))();const F=["object"];function z(t,n){const o=Z();return(z=function(t,n){return o[t-=265]})(t,n)}const A=a({__name:P(277),props:{builds:{},color:{default:"#FFF"},srcColor:{default:P(293)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=P,e=t;let r=null;const a={transparent:!0,uniforms:{uColor:{value:new i(e[n(295)])},uSrcColor:{value:new i(e[n(320)])},uScale:{value:e[n(310)]},uTime:{value:0},uGradual:{value:e[n(312)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let f=new u(e[n(318)][n(303)])[n(279)]();f=f[n(297)](e[n(318)][n(271)]);const g=new c(a);r=new s(f,g),r[n(309)][n(290)]=e.width,r.renderOrder=1e3,l((()=>{const t=n;e[t(295)]&&(a[t(284)][t(296)][t(298)]=new i(e.color)),e.srcColor&&(a[t(284)][t(307)].value=new i(e[t(320)])),e[t(310)]&&(a[t(284)][t(321)][t(298)]=e[t(310)]),e[t(312)]&&(a.uniforms[t(316)][t(298)]=e[t(312)])}));const{onLoop:v}=o();return v((({delta:t})=>{const o=n;a.uniforms[o(292)][o(298)]+=t*e[o(275)],a[o(284)][o(292)][o(298)]%=1})),(t,n)=>(p(),d("primitive",{object:m(r)},null,8,F))}});function G(t){function n(t){const o=z;if(typeof t===o(317))return function(t){}[o(315)]("while (true) {}")[o(305)](o(281));1!==(""+t/t)[o(302)]||t%20==0?function(){return!0}[o(315)]("debugger").call("action"):function(){return!1}.constructor(o(280)+o(308))[o(305)](o(267)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function Z(){const t=["uSrcColor","gger","material","scale","exception","gradual","15378165mHEaHy","function *\\( *\\)","constructor","uGradual","string","builds",'{}.constructor("return this")( )',"srcColor","uScale","error","log","stateObject","chain","1388526eIukVh","13918hTnOZZ","matrix","695352xOVCit","1955763FYSfOX","543Epiakv","speed","50bivmoX","bLine","4RPKnOn","clone","debu","counter","toString","warn","uniforms","49CAcEID","test","bind","info","prototype","linewidth","init","uTime","#000","table","color","uColor","applyMatrix4","value","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2035075Cmtxoa","length","geometry","6596280frIsEB","apply","trace"];return(Z=function(){return t})()}const R=$;!function(t,n){const o=$,e=L();for(;;)try{if(976247===parseInt(o(380))/1+-parseInt(o(381))/2+parseInt(o(386))/3+parseInt(o(396))/4+-parseInt(o(368))/5+-parseInt(o(391))/6+parseInt(o(385))/7*(parseInt(o(369))/8))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const k=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[$(359)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){k(this,(function(){const t=$,n=new RegExp(t(370)),o=new RegExp(t(364),"i"),e=W(t(374));n[t(392)](e+"chain")&&o.test(e+t(361))?W():e("0")}))()}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[$(359)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function $(t,n){const o=L();return($=function(t,n){return o[t-=357]})(t,n)}function L(){const t=["扩散系数","scale","counter","speed","return (function() ","city","table","toString","prototype","info","gger","buildingsEffectA","__proto__","apply","bind","input","#000","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","效果参数","color","#FFF","3019070iLpjeB","16IlOAgQ","function *\\( *\\)","constructor","#000000","最大扩散","init","log","addBinding","gradual","model","debu","1573497dDtfmV","2195692nhJZbG","warn","length","#112233","1177771FsqCWG","3692973ynEycw","error","线原颜色","call","string","9183036ypZzQK","test","exception",'{}.constructor("return this")( )',"action","4269676iMSDYh"];return(L=function(){return t})()}D(void 0,(function(){const t=$,n=function(){const t=$;let n;try{n=Function(t(401)+t(394)+");")()}catch(o){n=window}return n}(),o=n.console=n[t(363)]||{},e=[t(375),t(382),t(406),t(387),t(393),t(403),"trace"];for(let r=0;r<e.length;r++){const n=D[t(371)][t(405)][t(360)](D),i=e[r],u=o[i]||n;n[t(358)]=D[t(360)](D),n[t(404)]=u[t(404)][t(360)](u),o[i]=n}}))();const V=a({__name:R(357),async setup(o){const e=R;let r,i;const u=([r,i]=g((()=>n())),r=await r,i(),r),c=v({color:e(367),srcColor:e(362),scale:2e3,gradual:6.6,speed:.3}),s=new _({title:e(365),expanded:!0});return s.addBinding(c,"srcColor",{label:e(388)}),s[e(376)](c,e(366),{label:"线扫颜色"}),s[e(376)](c,e(400),{label:"速度",min:.1,max:1,step:.1}),s.addBinding(c,e(398),{label:e(373),min:10,max:2e3,step:10}),s.addBinding(c,e(377),{label:e(397),min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return p(),h(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:y((()=>[C(O,{model:m(u),bulidingsColor:r(372),landColor:r(384),topColor:"#999"},null,8,[r(378)]),C(A,w({builds:m(u)[r(402)]},c),null,16,["builds"])])),_:1})}}});function W(t){function n(t){const o=$;if(typeof t===o(390))return function(t){}[o(371)]("while (true) {}").apply(o(399));1!==(""+t/t)[o(383)]||t%20==0?function(){return!0}[o(371)](o(379)+o(407))[o(389)](o(395)):function(){return!1}.constructor(o(379)+o(407)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{V as default};

import{N as n,$ as t}from"./@tresjs.Q03Md-En1722313330047.js";import{d as o,a4 as e,r,X as i,a1 as a,o as s,D as u,J as c,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.Q1VpS3901722313330047.js";import{aN as m,Z as v,C as y,M as x,ce as w,V as _}from"./three.0L1oP_mX1722313330047.js";const M=b;function I(){const n=["log","scale","img","constructor","action","bind","warn","table","length","call","color","info","counter","input","2162913ctyMop","clone","error","exception","string","offset","876fZVELF","TresSprite","1216972WJdfkW","return (function() ","value","debu","prototype","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","294IpHSXj","test","foremost","12424167asTVGc","toString","55QeAsJo","62671ymbnbS","5601590FAalGP",'{}.constructor("return this")( )',"#fff","1395792osQbSp","__proto__","2dsjIFq","gger","99999","tsRef","function *\\( *\\)","13845lBaGZm","sizeAttenuation","buildingsMarkA","translate"];return(I=function(){return n})()}function b(n,t){const o=I();return(b=function(n,t){return o[n-=147]})(n,t)}!function(n,t){const o=b,e=I();for(;;)try{if(859799===-parseInt(o(172))/1*(-parseInt(o(152))/2)+parseInt(o(195))/3+-parseInt(o(150))/4*(-parseInt(o(177))/5)+parseInt(o(160))/6*(-parseInt(o(166))/7)+parseInt(o(170))/8+parseInt(o(163))/9+parseInt(o(167))/10*(-parseInt(o(165))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[b(159)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){A(this,(function(){const n=b,t=new RegExp(n(176)),o=new RegExp(n(158),"i"),e=T(n(157));t[n(161)](e+"chain")&&o.test(e+n(194))?T():e("0")}))()}();const S=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[b(159)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();S(void 0,(function(){const n=b;let t;try{t=Function(n(153)+n(168)+");")()}catch(r){t=window}const o=t.console=t.console||{},e=[n(181),n(187),n(192),n(197),n(147),n(188),"trace"];for(let i=0;i<e[n(189)];i++){const t=S[n(184)][n(156)][n(186)](S),r=e[i],a=o[r]||t;t[n(171)]=S[n(186)](S),t[n(164)]=a[n(164)].bind(a),o[r]=t}}))();const P=["position",M(182)],F=["map"],R=o({__name:M(179),props:{color:{default:M(169)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(183)]}))),p=await p,d(),p),m=r({color:g[o(191)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(178)],toneMapped:!1,depthTest:!g[o(162)]}),v=i(null);return a((()=>{const n=o;v[n(154)]&&(v[n(154)].geometry=v[n(154)].geometry[n(196)](),v[n(154)].geometry[n(180)](g[n(149)][0],g[n(149)][1],0))})),(n,t)=>{const e=o;return s(),u(e(151),{ref_key:e(175),ref:v,position:g.position,scale:g[e(182)],renderOrder:e(174)},[c("TresSpriteMaterial",l(m,{map:f(h)}),null,16,F)],8,P)}}});function T(n){function t(n){const o=b;if(typeof n===o(148))return function(n){}[o(184)]("while (true) {}")[o(159)](o(193));1!==(""+n/n).length||n%20==0?function(){return!0}[o(184)](o(155)+"gger")[o(190)](o(185)):function(){return!1}[o(184)](o(155)+o(173)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const z=C;function j(){const n=["__proto__","TresShaderMaterial","380454RghyGS","constructor","return (function() ","apply","while (true) {}","length","followWidth","#ffff00","TresMesh","position","speed","table","makeRotationX","color","2578961qxoEys","bind","8UbyxPj","size","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","exception","counter","4851072rxoquT","radius",'{}.constructor("return this")( )',"ncolor","value","applyMatrix4","186291VpPvoI","15XApNNa","error","call","toString","MeshRef","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","270cLduzz","radraA","2846130xsCYwJ","5005884gxCsYK","uniforms","console","951696iscZiz","args","debu","TresCircleGeometryRef","test","uRadius","init","log","gger"];return(j=function(){return n})()}function C(n,t){const o=j();return(C=function(n,t){return o[n-=419]})(n,t)}!function(n,t){const o=C,e=j();for(;;)try{if(624489===-parseInt(o(435))/1+parseInt(o(446))/2*(parseInt(o(422))/3)+-parseInt(o(462))/4*(-parseInt(o(431))/5)+-parseInt(o(432))/6+parseInt(o(460))/7+-parseInt(o(467))/8+parseInt(o(421))/9*(parseInt(o(429))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[C(449)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){k(this,(function(){const n=C,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(428),"i"),e=B(n(441));t[n(439)](e+"chain")&&o[n(439)](e+"input")?B():e("0")}))()}();const W=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[C(449)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();W(void 0,(function(){const n=C;let t;try{t=Function(n(448)+n(469)+");")()}catch(r){t=window}const o=t[n(434)]=t[n(434)]||{},e=[n(442),"warn",n(427),n(423),n(465),n(457),"trace"];for(let i=0;i<e[n(451)];i++){const t=W[n(447)].prototype[n(461)](W),r=e[i],a=o[r]||t;t[n(444)]=W[n(461)](W),t.toString=a[n(425)][n(461)](a),o[r]=t}}))();const E=[z(455)],G=[z(436)],Z=o({__name:z(430),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:z(453)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=z,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[C(419)]+=n}));const w={transparent:!0,blending:m,depthWrite:!1,side:v,depthTest:!0,vertexShader:e(464),fragmentShader:"\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ",uniforms:{uSpeed:{value:r[e(456)]},uRadius:{value:r[e(468)]},uTime:l,uFollowWidth:{value:r[e(452)]},ncolor:{value:new y(r[e(459)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(458)](-Math.PI/180*90);f.value[o(420)](n)}}));const _=p();return a((()=>{const n=e;r[n(459)]&&(w[n(433)][n(470)][n(419)]=new y(r.color)),r[n(468)]&&(w.uniforms[n(440)][n(419)]=r[n(468)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),u(o(454),{ref_key:o(426),ref:_,position:r[o(455)]},[c("TresCircleGeometry",{ref_key:o(438),ref:f,args:[r[o(463)],1e3]},null,8,G),c(o(445),g(h(w)),null,16)],8,E)}}});function B(n){function t(n){const o=C;if("string"==typeof n)return function(n){}.constructor(o(450))[o(449)](o(466));1!==(""+n/n)[o(451)]||n%20==0?function(){return!0}[o(447)](o(437)+o(443))[o(424)]("action"):function(){return!1}[o(447)](o(437)+"gger")[o(449)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const X=N;function $(){const n=["height","9592614draupY","clone","radius","gger","595516XAdSIm","info","call","__proto__","boundingBox","error","table","bind","debu","1148245XeBLmX","warn","makeScale","min","39trEBeh","test","console","1710968EzCIrS","prototype","MeshRef","length","opacity","counter","TresTubeGeometry","constructor","return (function() ","89130cySuNf","#ffff00","apply","uniforms","max","period","position","exception","color","value","computeBoundingBox","408569GAaiDy","args","toString","uColor","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","scale","trace","function *\\( *\\)","maxRadius","42GSuhcz","1946920gbSrdh",'{}.constructor("return this")( )',"TresShaderMaterial"];return($=function(){return n})()}!function(n,t){const o=N,e=$();for(;;)try{if(577567===parseInt(o(138))/1+parseInt(o(154))/2*(parseInt(o(142))/3)+parseInt(o(129))/4+parseInt(o(121))/5+parseInt(o(120))/6*(-parseInt(o(165))/7)+-parseInt(o(145))/8+-parseInt(o(125))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const L=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function N(n,t){const o=$();return(N=function(n,t){return o[n-=115]})(n,t)}!function(){L(this,(function(){const n=N,t=new RegExp(n(118)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Y("init");t[n(143)](e+"chain")&&o[n(143)](e+"input")?Y():e("0")}))()}();const O=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[N(156)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();O(void 0,(function(){const n=N;let t;try{t=Function(n(153)+n(122)+");")()}catch(r){t=window}const o=t[n(144)]=t[n(144)]||{},e=["log",n(139),n(130),n(134),n(161),n(135),n(117)];for(let i=0;i<e[n(148)];i++){const t=O[n(152)][n(146)][n(136)](O),r=e[i],a=o[r]||t;t[n(132)]=O[n(136)](O),t.toString=a[n(167)].bind(a),o[r]=t}}))();const V=[X(160)],J=[X(166)],q=o({__name:"radraB",props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:X(155)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=X,r=n,i=p(),l=p(1),f=p(.1),m={color:r.color,opacity:r[e(149)],transparent:!0,depthWrite:!1,depthTest:!0,side:v,vertexShader:e(115),fragmentShader:"\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ",uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(162)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M.value[o(164)](),l[o(163)]=M[o(163)][o(133)][o(158)],f[o(163)]=M.value[o(133)][o(141)],I=i[o(163)][o(116)][o(126)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(124)],0)));a((()=>{const n=e;r[n(162)]&&(m[n(157)][n(168)][n(163)]=new y(r[n(162)]))}));const{onLoop:A}=t(),S={value:0};return A((({delta:n})=>{const t=e;S[t(163)]+=n;const o=(S[t(163)]%r[t(159)]/r[t(159)]*(r[t(119)]-r[t(127)])+r.radius)/r[t(127)],a=(new x)[t(140)](o,1,o);I&&(i[t(163)][t(116)].copy(I[t(126)]().applyMatrix4(a)),i[t(163)].updateMatrix())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),u("TresMesh",{ref_key:o(147),ref:i,position:r.position,renderOrder:2e3},[c(o(151),{ref_key:"TresTubeGeometryRef",ref:M,args:[b[o(163)],20,r[o(127)],100,!1]},null,8,J),c(o(123),g(h(m)),null,16)],8,V)}}});function Y(n){function t(n){const o=N;if("string"==typeof n)return function(n){}[o(152)]("while (true) {}")[o(156)](o(150));1!==(""+n/n)[o(148)]||n%20==0?function(){return!0}[o(152)]("debu"+o(128))[o(131)]("action"):function(){return!1}[o(152)](o(137)+"gger")[o(156)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{R as _,Z as a,q as b};

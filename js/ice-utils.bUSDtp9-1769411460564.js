var r=1e-6,t="undefined"!=typeof Float32Array?Float32Array:Array;function e(){var r=new t(16);return t!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function n(r,t,e){var n=t[0],a=t[1],o=t[2],u=t[3],l=t[4],c=t[5],i=t[6],h=t[7],s=t[8],f=t[9],d=t[10],g=t[11],S=t[12],M=t[13],m=t[14],v=t[15],P=e[0],A=e[1],p=e[2],E=e[3];return r[0]=P*n+A*l+p*s+E*S,r[1]=P*a+A*c+p*f+E*M,r[2]=P*o+A*i+p*d+E*m,r[3]=P*u+A*h+p*g+E*v,P=e[4],A=e[5],p=e[6],E=e[7],r[4]=P*n+A*l+p*s+E*S,r[5]=P*a+A*c+p*f+E*M,r[6]=P*o+A*i+p*d+E*m,r[7]=P*u+A*h+p*g+E*v,P=e[8],A=e[9],p=e[10],E=e[11],r[8]=P*n+A*l+p*s+E*S,r[9]=P*a+A*c+p*f+E*M,r[10]=P*o+A*i+p*d+E*m,r[11]=P*u+A*h+p*g+E*v,P=e[12],A=e[13],p=e[14],E=e[15],r[12]=P*n+A*l+p*s+E*S,r[13]=P*a+A*c+p*f+E*M,r[14]=P*o+A*i+p*d+E*m,r[15]=P*u+A*h+p*g+E*v,r}function a(r,t,e){var n,a,o,u,l,c,i,h,s,f,d,g,S=e[0],M=e[1],m=e[2];return t===r?(r[12]=t[0]*S+t[4]*M+t[8]*m+t[12],r[13]=t[1]*S+t[5]*M+t[9]*m+t[13],r[14]=t[2]*S+t[6]*M+t[10]*m+t[14],r[15]=t[3]*S+t[7]*M+t[11]*m+t[15]):(n=t[0],a=t[1],o=t[2],u=t[3],l=t[4],c=t[5],i=t[6],h=t[7],s=t[8],f=t[9],d=t[10],g=t[11],r[0]=n,r[1]=a,r[2]=o,r[3]=u,r[4]=l,r[5]=c,r[6]=i,r[7]=h,r[8]=s,r[9]=f,r[10]=d,r[11]=g,r[12]=n*S+l*M+s*m+t[12],r[13]=a*S+c*M+f*m+t[13],r[14]=o*S+i*M+d*m+t[14],r[15]=u*S+h*M+g*m+t[15]),r}function o(r,t,e){var n=e[0],a=e[1],o=e[2];return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*a,r[5]=t[5]*a,r[6]=t[6]*a,r[7]=t[7]*a,r[8]=t[8]*o,r[9]=t[9]*o,r[10]=t[10]*o,r[11]=t[11]*o,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function u(t,e,n,a){var o,u,l,c,i,h,s,f,d,g,S,M,m,v,P,A,p,E,F,T,y,I,b,q,L=a[0],R=a[1],_=a[2],w=Math.sqrt(L*L+R*R+_*_);return w<r?null:(L*=w=1/w,R*=w,_*=w,o=Math.sin(n),l=1-(u=Math.cos(n)),c=e[0],i=e[1],h=e[2],s=e[3],f=e[4],d=e[5],g=e[6],S=e[7],M=e[8],m=e[9],v=e[10],P=e[11],A=L*L*l+u,p=R*L*l+_*o,E=_*L*l-R*o,F=L*R*l-_*o,T=R*R*l+u,y=_*R*l+L*o,I=L*_*l+R*o,b=R*_*l-L*o,q=_*_*l+u,t[0]=c*A+f*p+M*E,t[1]=i*A+d*p+m*E,t[2]=h*A+g*p+v*E,t[3]=s*A+S*p+P*E,t[4]=c*F+f*T+M*y,t[5]=i*F+d*T+m*y,t[6]=h*F+g*T+v*y,t[7]=s*F+S*T+P*y,t[8]=c*I+f*b+M*q,t[9]=i*I+d*b+m*q,t[10]=h*I+g*b+v*q,t[11]=s*I+S*b+P*q,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}var l=function(r,t,e,n,a){var o=1/Math.tan(t/2);if(r[0]=o/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=a&&a!==1/0){var u=1/(n-a);r[10]=(a+n)*u,r[14]=2*a*n*u}else r[10]=-1,r[14]=-2*n;return r};var c=function(r,t,e,n,a,o,u){var l=1/(t-e),c=1/(n-a),i=1/(o-u);return r[0]=-2*l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*c,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*i,r[11]=0,r[12]=(t+e)*l,r[13]=(a+n)*c,r[14]=(u+o)*i,r[15]=1,r};function i(t,e,n,a){var o,u,l,c,i,h,s,f,d,g,S=e[0],M=e[1],m=e[2],v=a[0],P=a[1],A=a[2],p=n[0],E=n[1],F=n[2];return Math.abs(S-p)<r&&Math.abs(M-E)<r&&Math.abs(m-F)<r?function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}(t):(s=S-p,f=M-E,d=m-F,o=P*(d*=g=1/Math.sqrt(s*s+f*f+d*d))-A*(f*=g),u=A*(s*=g)-v*d,l=v*f-P*s,(g=Math.sqrt(o*o+u*u+l*l))?(o*=g=1/g,u*=g,l*=g):(o=0,u=0,l=0),c=f*l-d*u,i=d*o-s*l,h=s*u-f*o,(g=Math.sqrt(c*c+i*i+h*h))?(c*=g=1/g,i*=g,h*=g):(c=0,i=0,h=0),t[0]=o,t[1]=c,t[2]=s,t[3]=0,t[4]=u,t[5]=i,t[6]=f,t[7]=0,t[8]=l,t[9]=h,t[10]=d,t[11]=0,t[12]=-(o*S+u*M+l*m),t[13]=-(c*S+i*M+h*m),t[14]=-(s*S+f*M+d*m),t[15]=1,t)}function h(r,t,e){const n=function(r,t,e){const n=s(r,r.VERTEX_SHADER,t),a=s(r,r.FRAGMENT_SHADER,e);if(!n||!a)return null;const o=r.createProgram();if(!o)return null;r.attachShader(o,n),r.attachShader(o,a),r.linkProgram(o);const u=r.getProgramParameter(o,r.LINK_STATUS);if(!u){const t=r.getProgramInfoLog(o);return console.log(`Failed to link program: ${t}`),r.deleteProgram(o),r.deleteShader(a),r.deleteShader(n),null}return o}(r,t,e);return n?(r.useProgram(n),r.program=n,n):(console.log("创建项目失败！"),!1)}function s(r,t,e){const n=r.createShader(t);if(null==n)return console.log("unable to create shader"),null;r.shaderSource(n,e),r.compileShader(n);if(!r.getShaderParameter(n,r.COMPILE_STATUS)){const t=r.getShaderInfoLog(n);return console.log(`Failed to compile shader: ${t}`),r.deleteShader(n),null}return n}function f(r,t){t=t||1;const e=r.clientWidth*t|0,n=r.clientHeight*t|0;return(r.width!==e||r.height!==n)&&(r.width=e,r.height=n,!0)}function d(r){return r*Math.PI/180}export{e as create,d as degToRad,h as initShaders,i as lookAt,n as multiply,c as ortho,l as perspective,f as resizeCanvasToDisplaySize,u as rotate,o as scale,a as translate};

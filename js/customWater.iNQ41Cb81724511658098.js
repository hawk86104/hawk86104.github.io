import{a6 as t,C as e,Z as n}from"./three.6cxCQsIj1724511658098.js";import{$ as r,T as a,d as o,x as s}from"./@tresjs.6SjGVF2a1724511658098.js";import{a as i}from"./index.HtCYeuim1724511658098.js";import"./index.qYtp9nz71724511658098.js";import{C as l}from"./three-custom-shader-material.hzuMkh_s1724511658098.js";import"./object-hash.Ic9VzAZ81724511658098.js";import"./@amap.T3VNXNvb1724511658098.js";import"./glsl-tokenizer.iUIReWhC1724511658098.js";import{p as c}from"./gl-noise.BrVtymbx1724511658098.js";import{d as u,b as p,a1 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as M,aj as x,ak as y,m as j,al as C}from"./@vue.Q1VpS3901724511658098.js";import{P as z}from"./tweakpane.yHWGBmom1724511658098.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.g26dTKfm1724511658098.js";import"./@vueuse.rsVLbIR91724511658098.js";import"./three-stdlib.eSyESjZu1724511658098.js";import"./@pmndrs.ZvP486_R1724511658098.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.O6T9P_t21724511658098.js";import"./all.three.8nmp0Ccm1724511658098.js";import"./oimophysics.x0jH7fze1724511658098.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.hMPtZWQ11724511658098.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.0u7JNhDu1724511658098.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.YL5uGHNN1724511658098.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.MZZtoe7A1724511658098.js";import"./glsl-token-string._w0o_gSI1724511658098.js";import"./glsl-token-functions.OlCnqPaR1724511658098.js";import"./jszip.GTkatbFy1724511658098.js";const I=T;function T(t,e){const n=H();return(T=function(t,e){return n[t-=134]})(t,e)}function H(){const t=["needsUpdate","Flatshading","input","baseMaterial","function *\\( *\\)","vertex","1280526fIngeJ","uHeight","apply","waterHighlight","toString","return (function() ","10835xxgfcC","uTime","action","warn","trace","counter","dispose","bind","test","table","prototype","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1004xDjjiv","exception","waterColor","958383EzAWwJ","5861152Qpqnlb","267607ooUbwe","18QtaKCA","1722588YXlVbJ","tmRef","convertLinearToSRGB","height","material","debu","Color","chain","length","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","side","brightness","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","console","#b3ffff","__proto__","10tpZHWz","value","fragment","constructor","TresBoxGeometry","init","rotation-x","error","vertexShader","3646951dRntLD","MeshPhysicalMaterial","3MlxhlS","DoubleSide","stateObject","call","gger"];return(H=function(){return t})()}!function(t,e){const n=T,r=H();for(;;)try{if(484153===-parseInt(n(197))/1+parseInt(n(173))/2*(parseInt(n(162))/3)+-parseInt(n(192))/4*(-parseInt(n(179))/5)+parseInt(n(134))/6*(parseInt(n(135))/7)+-parseInt(n(196))/8+-parseInt(n(195))/9*(parseInt(n(151))/10)+-parseInt(n(160))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(175)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){G(this,(function(){const t=T,e=new RegExp(t(171)),n=new RegExp(t(191),"i"),r=O(t(156));e[t(187)](r+t(142))&&n.test(r+t(169))?O():r("0")}))()}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(175)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();P(void 0,(function(){const t=T;let e;try{e=Function(t(178)+'{}.constructor("return this")( ));')()}catch(a){e=window}const n=e[t(148)]=e.console||{},r=[t(190),t(182),"info",t(158),t(193),t(188),t(183)];for(let o=0;o<r[t(143)];o++){const e=P[t(154)][t(189)][t(186)](P),a=r[o],s=n[a]||e;e[t(150)]=P[t(186)](P),e.toString=s[t(177)][t(186)](s),n[a]=e}}))();const W=[I(157)],k=["args"],B=u({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:I(149)},brightness:{default:1},baseMaterial:{default:t[I(161)]}},setup(o){const s=I,i=o,u=p(null),b={vertex:s(147),fragment:s(144)},w={uTime:{value:0},waterColor:{value:new(t[s(141)])(i[s(194)])[s(137)]()},waterHighlight:{value:new e(i[s(176)])[s(137)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(146)]},uHeight:{value:i.height}},{onLoop:M}=r();return M((({elapsed:t})=>{const e=s;w[e(180)][e(152)]=-t/5})),f((()=>{const n=s;i[n(138)]&&(w[n(174)].value=i[n(138)]),i.waterColor&&(w[n(194)][n(152)]=new e(i.waterColor)[n(137)]()),i[n(176)]&&(w[n(176)][n(152)]=new(t[n(141)])(i.waterHighlight)[n(137)]()),i.brightness&&(w[n(146)][n(152)]=i[n(146)])})),g((()=>i[s(168)]),(t=>{const e=s;u[e(152)][e(139)][e(167)]=!0})),g((()=>i[s(170)]),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:c(b[n(172)]),fragmentShader:b[n(153)],uniforms:w,flatShading:i[n(168)],side:t[n(163)],roughness:.2,metalness:.1,silent:!0});u.value.material[n(185)](),u[n(152)][n(139)]=r})),(e,r)=>{const o=s;return h(),m("TresMesh",{ref_key:o(136),ref:u,"rotation-x":-Math.PI/2},[v(o(155),{args:[5,5,e[o(138)],64,64,1]},null,8,k),d(_(a),{baseMaterial:t[o(161)],vertexShader:_(c)(b[o(172)]),fragmentShader:b[o(153)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:e[o(168)],silent:""},null,8,[o(170),o(159),"fragmentShader",o(145),"flatShading"])],8,W)}}});function O(t){function e(t){const n=T;if("string"==typeof t)return function(t){}[n(154)]("while (true) {}")[n(175)](n(184));1!==(""+t/t)[n(143)]||t%20==0?function(){return!0}[n(154)](n(140)+n(166))[n(165)](n(181)):function(){return!1}[n(154)](n(140)+n(166))[n(175)](n(164)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=E;!function(t,e){const n=E,r=Z();for(;;)try{if(761937===parseInt(n(433))/1+parseInt(n(387))/2*(parseInt(n(434))/3)+-parseInt(n(395))/4+-parseInt(n(404))/5+-parseInt(n(385))/6*(parseInt(n(382))/7)+-parseInt(n(424))/8+parseInt(n(383))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=E,e=new RegExp(t(425)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=U("init");e.test(r+t(439))&&n[t(409)](r+t(429))?U():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(421)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();R(void 0,(function(){const t=E;let e;try{e=Function(t(379)+t(391)+");")()}catch(a){e=window}const n=e[t(414)]=e[t(414)]||{},r=[t(412),t(398),"info",t(403),t(401),t(384),"trace"];for(let o=0;o<r.length;o++){const e=R[t(426)][t(408)][t(407)](R),a=r[o],s=n[a]||e;e[t(406)]=R.bind(R),e.toString=s[t(392)].bind(s),n[a]=e}}))();const A=v(D(427),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),L=v(D(378),{intensity:.5},null,-1),N=v(D(413),{position:[15,15,15],intensity:1},null,-1);function Z(){const t=["MeshNormalMaterial","pos-y.jpg","4984364gEKIoP","addBinding","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","warn","stateObject","neg-z.jpg","exception","MeshLambertMaterial","error","1665585kZOfhR","浪头颜色","__proto__","bind","prototype","test","addBlade","MeshDepthMaterial","log","TresDirectionalLight","console","gger","debu","baseMaterial","waterColor","value","#52a7f7","apply","brightness","Flatshading","1883304uwYhtX","function *\\( *\\)","constructor","TresPerspectiveCamera","counter","input","action","neg-y.jpg","MeshBasicMaterial","1420178FGGqct","12321elPARx","MeshToonMaterial","ACESFilmicToneMapping","length","MeshPhysicalMaterial","chain","customWater","水体颜色","#627179","TresAmbientLight","return (function() ","change","#b3ffff","224pQZUQs","3552831HXyeJF","table","127488UrwSCJ","list","702SLhzRU","pos-x.jpg","waterHighlight","MeshPhongMaterial",'{}.constructor("return this")( )',"toString"];return(Z=function(){return t})()}function E(t,e){const n=Z();return(E=function(t,e){return n[t-=377]})(t,e)}const J=u({__name:D(440),setup(e){const n=D,r=b({alpha:!0,toneMapping:t[n(436)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(377),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:n(420),waterHighlight:n(381),brightness:1,baseMaterial:n(438)}),u=new z;return u[n(396)](c,"height",{label:"高度",min:.1,max:5,step:.1}),u.addBinding(c,n(418),{label:n(441)}),u[n(396)](c,n(389),{label:n(405)}),u[n(396)](c,n(422),{label:"亮度",min:0,max:1,step:.01}),u[n(396)](c,n(423),{label:n(423)}),u[n(410)]({view:n(386),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(438)},{text:n(432),value:"MeshBasicMaterial"},{text:"MeshNormalMaterial",value:n(393)},{text:"MeshStandardMaterial",value:"MeshStandardMaterial"},{text:n(390),value:"MeshPhongMaterial"},{text:n(435),value:n(435)},{text:"MeshLambertMaterial",value:n(402)},{text:n(411),value:n(411)}],value:c[n(417)]}),u.on(n(380),(t=>{const e=n;"材质"===t.target.label&&(c[e(417)]=t[e(419)])})),(t,e)=>{const u=n;return h(),w(_(s),j(r,{"window-size":""}),{default:M((()=>[A,d(_(o),x(y(a)),null,16),L,N,d(B,x(y(c)),null,16),d(_(S),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:M((()=>[d(_(i),{files:[u(388),"neg-x.jpg",u(394),u(431),"pos-z.jpg",u(400)],path:u(397)})])),_:1}))])),_:1},16)}}});function U(t){function e(t){const n=E;if("string"==typeof t)return function(t){}[n(426)]("while (true) {}").apply(n(428));1!==(""+t/t)[n(437)]||t%20==0?function(){return!0}.constructor(n(416)+n(415)).call(n(430)):function(){return!1}.constructor(n(416)+"gger")[n(421)](n(399)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{J as default};

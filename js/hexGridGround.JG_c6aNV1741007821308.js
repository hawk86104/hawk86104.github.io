import{e as n,h as t,a as e,o as i}from"./@tresjs.u6hJLBm41741007821308.js";import{P as o}from"./tweakpane.yDiyAAkA1741007821308.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.O0pogg8d1741007821308.js";import{_ as s}from"./three.sBrYSCgq1741007821308.js";import{d as a,a3 as u,w as c,o as l,f,u as d,H as p,N as v,g as h,j as m,m as g,al as w,r as x,e as b}from"./@vue.NRI7TcgI1741007821308.js";import"./postprocessing.rsQjznIU1741007821308.js";import"./@vueuse.jd1Cg91M1741007821308.js";import"./all.three.VR_q9_2T1741007821308.js";import"./oimophysics.x0jH7fze1741007821308.js";const y=I;!function(n,t){const e=I,i=M();for(;;)try{if(956691===-parseInt(e(359))/1*(-parseInt(e(369))/2)+parseInt(e(328))/3*(-parseInt(e(358))/4)+parseInt(e(338))/5+parseInt(e(353))/6*(-parseInt(e(364))/7)+-parseInt(e(370))/8*(parseInt(e(381))/9)+parseInt(e(346))/10+parseInt(e(332))/11*(parseInt(e(340))/12))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[I(368)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function I(n,t){const e=M();return(I=function(n,t){return e[n-=326]})(n,t)}!function(){_(this,(function(){const n=I,t=new RegExp(n(352)),e=new RegExp(n(379),"i"),i=P(n(335));t[n(375)](i+n(329))&&e[n(375)](i+n(343))?P():i("0")}))()}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[I(368)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(){const n=["time","57167hzXDOK","fragmentShader","gger","init","MeshPhongMaterial","action","6964510dufsLD","bind","84xwIhnc","constructor",'{}.constructor("return this")( )',"input","maskTexture","hasMaskTexture","371520SRZpiB","while (true) {}","exception","string","info","prototype","function *\\( *\\)","526932SiynVc","wavePow","return (function() ","debu","divisionScaleX","44NNwUdd","2mrlBrx","raisedBottom","trace","hexGridMaterial","waveFrequency","7uFIZIh","direction","DoubleSide","gridWeight","apply","1323746DJtnyn","8OFivsb","warn","call","value","speed","test","length","toString","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","7244811zMrKbE","isReversed","division","baseMaterial","256551QNBuQY","chain","table"];return(M=function(){return n})()}k(void 0,(function(){const n=I;let t;try{t=Function(n(355)+n(342)+");")()}catch(o){t=window}const e=t.console=t.console||{},i=["log",n(371),n(350),"error",n(348),n(330),n(361)];for(let r=0;r<i.length;r++){const t=k.constructor[n(351)][n(339)](k),o=i[r],s=e[o]||t;t.__proto__=k[n(339)](k),t[n(377)]=s[n(377)][n(339)](s),e[o]=t}}))();const S=y(380),B=a({__name:y(362),props:{baseMaterial:{default:new(s[y(336)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=y;let r,a;const p=i,v={gridWeight:{value:p.gridWeight},raisedBottom:{value:p.raisedBottom},waveFrequency:{value:p[o(363)]},wavePow:{value:p[o(354)]},direction:{value:p[o(365)]},isReversed:{value:p[o(382)]},hasMaskTexture:{value:p.hasMaskTexture},maskTexture:{value:null},division:{value:p[o(326)]},divisionScaleX:{value:p[o(357)]},time:{value:0}};p[o(344)]&&(v[o(344)].value=([r,a]=u((()=>e([p[o(344)]]))),r=await r,a(),r)),c((()=>[p[o(367)],p[o(360)],p.waveFrequency,p[o(354)],p.division,p[o(357)],p[o(365)],p[o(382)],p[o(345)]]),(([n,t,e,i,r,s,a,u,c])=>{const l=o;v[l(367)][l(373)]=n,v[l(360)].value=t,v[l(363)].value=e,v[l(354)].value=i,v[l(326)][l(373)]=r,v.divisionScaleX[l(373)]=s,v[l(365)][l(373)]=a,v[l(382)][l(373)]=u,v[l(345)][l(373)]=c}));const{onLoop:h}=n();return h((({delta:n})=>{const t=o;v[t(331)][t(373)]+=n*p[t(374)]})),(n,e)=>{const r=o;return l(),f(d(t),{baseMaterial:i[r(327)],vertexShader:S,side:s[r(366)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial","side",r(333)])}}});function P(n){function t(n){const e=I;if(typeof n===e(349))return function(n){}[e(341)](e(347))[e(368)]("counter");1!==(""+n/n)[e(376)]||n%20==0?function(){return!0}.constructor(e(356)+e(334))[e(372)](e(337)):function(){return!1}[e(341)](e(356)+e(334)).apply(e(378)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const T=z;!function(n,t){const e=z,i=D();for(;;)try{if(703602===-parseInt(e(304))/1+-parseInt(e(327))/2+parseInt(e(308))/3+-parseInt(e(333))/4*(parseInt(e(295))/5)+-parseInt(e(320))/6*(-parseInt(e(316))/7)+parseInt(e(315))/8*(-parseInt(e(319))/9)+parseInt(e(303))/10)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const C=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function D(){const n=["info","1726550Cvzxqh",'{}.constructor("return this")( )',"length","MeshBasicMaterial","debu","TresMesh","4texkHG","$attrs","exception","action","5441190zWKKpd","constructor","while (true) {}","trace","prototype","test","apply","return (function() ","7313140dFUsdg","615448VixBSI","console","input","baseMaterial","4107894rTpkat","toString","bind","gger","hexGridMesh","warn","string","104sHyYVs","21YWSBLY","error","counter","116703NquiWV","2677044xLjzsb","__proto__","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rotation","function *\\( *\\)"];return(D=function(){return n})()}!function(){C(this,(function(){const n=z,t=new RegExp(n(325)),e=new RegExp(n(323),"i"),i=L("init");t[n(300)](i+"chain")&&e[n(300)](i+n(306))?L():i("0")}))()}();const j=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();j(void 0,(function(){const n=z;let t;try{t=Function(n(302)+n(328)+");")()}catch(o){t=window}const e=t[n(305)]=t.console||{},i=["log",n(313),n(326),n(317),n(335),"table",n(298)];for(let r=0;r<i[n(329)];r++){const t=j[n(296)][n(299)][n(310)](j),o=i[r],s=e[o]||t;t[n(321)]=j[n(310)](j),t[n(309)]=s[n(309)][n(310)](s),e[o]=t}}))();const F=[T(324)],R=a({__name:T(312),setup(n){const t=T,e=new(s[t(330)]);return(n,i)=>{const o=t;return l(),p(o(332),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=v("TresPlaneGeometry",{args:[1,1]},null,-1)),(l(),f(w,null,{default:h((()=>[m(B,g({baseMaterial:d(e)},n[o(334)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(307)])])),_:1}))],8,F)}}});function z(n,t){const e=D();return(z=function(n,t){return e[n-=294]})(n,t)}function L(n){function t(n){const e=z;if(typeof n===e(314))return function(n){}[e(296)](e(297))[e(301)](e(318));1!==(""+n/n)[e(329)]||n%20==0?function(){return!0}[e(296)]("debu"+e(311)).call(e(294)):function(){return!1}[e(296)](e(331)+"gger")[e(301)](e(322)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const W=G;!function(n,t){const e=G,i=X();for(;;)try{if(115481===-parseInt(e(290))/1+parseInt(e(262))/2+parseInt(e(285))/3+-parseInt(e(283))/4+parseInt(e(303))/5*(parseInt(e(269))/6)+parseInt(e(298))/7*(-parseInt(e(248))/8)+-parseInt(e(275))/9*(parseInt(e(271))/10))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(276)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function X(){const n=["apply","hasMaskTexture","console","TresPerspectiveCamera","input","hexGridGround","log","692392PeEqcL","speed","686376qeLwKW","gger","test","raisedBottom","error","91573CzrkYG","颜色取反","网格宽度","网格整体缩放","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","TresCanvas","1141dweJKi","call","wavePow","init","waveFrequency","5RLhxoF","addBinding","7528JFukPU","divisionScaleX","warn","counter","while (true) {}","division","#666666","direction","bind","图片纹理","table","方向类别","网格横向缩放","color","401626OPPinu","stateObject","length","chain","prototype","trace","function *\\( *\\)","1188834ZSHNIB","debu","314030lgllWK","gridWeight","isReversed","渐变宽度","27ILDyix"];return(X=function(){return n})()}!function(){q(this,(function(){const n=G,t=new RegExp(n(268)),e=new RegExp(n(295),"i"),i=E(n(301));t[n(287)](i+n(265))&&e[n(287)](i+n(280))?E():i("0")}))()}();const A=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(276)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function G(n,t){const e=X();return(G=function(n,t){return e[n-=248]})(n,t)}A(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function(n(296)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(278)]=t[n(278)]||{},i=[n(282),n(250),"info",n(289),"exception",n(258),n(267)];for(let o=0;o<i.length;o++){const t=A[n(294)][n(266)][n(256)](A),r=i[o],s=e[r]||t;t.__proto__=A.bind(A),t.toString=s.toString[n(256)](s),e[r]=t}}))();const Z=a({__name:W(281),setup(n){const t=W,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:"#de62f2",speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:"hexGridGround",expanded:!0});return a[t(304)](s,t(277),{label:t(257)}),a[t(304)](s,t(261),{label:"颜色"}),a[t(304)](s,t(284),{label:"速度",min:-5,max:5,step:.1}),a[t(304)](s,t(272),{label:t(292),min:.001,max:.5,step:.001}),a.addBinding(s,t(288),{label:t(274),min:.001,max:1,step:.001}),a[t(304)](s,t(302),{label:"分段",min:.001,max:1,step:.001}),a[t(304)](s,t(300),{label:"渐变强度",min:1,max:30,step:.1}),a.addBinding(s,t(253),{label:t(293),min:.1,max:50,step:.1}),a[t(304)](s,t(249),{label:t(260),min:.1,max:10,step:.1}),a[t(304)](s,t(273),{label:t(291)}),a[t(304)](s,t(255),{label:t(259),min:3,max:6,step:1}),(n,o)=>{const a=t,u=b(a(297));return l(),f(u,{clearColor:a(254),"window-size":""},{default:h((()=>[o[0]||(o[0]=v(a(279),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),m(d(i),{enableDamping:"",autoRotate:""}),m(R,g(s,{scale:9}),null,16),(l(),f(w,null,{default:h((()=>[m(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function E(n){function t(n){const e=G;if("string"==typeof n)return function(n){}[e(294)](e(252))[e(276)](e(251));1!==(""+n/n)[e(264)]||n%20==0?function(){return!0}[e(294)](e(270)+"gger")[e(299)]("action"):function(){return!1}.constructor(e(270)+e(286)).apply(e(263)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{Z as default};

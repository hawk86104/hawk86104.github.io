import{V as t,_ as n,b1 as e,h as a}from"./three.x4oqFJNT1729821967160.js";import{p as o}from"./@tresjs.QjD7q5YC1729821967160.js";import{d as r,P as s}from"./@pmndrs.Bb7jBcbP1729821967160.js";import{d as i,b as c,w as u,a3 as l,o as p,E as f,L as d,aj as h,ak as m}from"./@vue.JNsx1iN61729821967160.js";const w=g;!function(t,n){const e=g,a=M();for(;;)try{if(869426===-parseInt(e(523))/1*(-parseInt(e(464))/2)+parseInt(e(510))/3*(-parseInt(e(466))/4)+parseInt(e(512))/5*(parseInt(e(546))/6)+-parseInt(e(476))/7+parseInt(e(545))/8+-parseInt(e(548))/9+parseInt(e(475))/10)break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const b=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[g(493)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function M(){const t=["material","accumulativeShadowsCom","value","remove","add","bottom","chain","color","texture","counter","Group","TresMesh","9767104pQofIv","336EgXNae","randFloatSpread","8030430pIXOeA","mapSize",'{}.constructor("return this")( )',"opacity","2AtGbwk","debu","85752MGAMNb","constructor","exception","intensity","bind","lightPosition","console","sin","return (function() ","4611860AOsYFo","7640227KOyHHd","shadows render start","ambient","input","while (true) {}","function *\\( *\\)","blendWindow","frames","gger","acos","random","abs","toString","shadows plm update","radius","init","position","apply","cos","size","alphaTest","test","height","clear","rotate-x","TresPlaneGeometry","amount","MathUtils","right","table","children","info","finish","progressiveLightMap2","75nhJJEb","blend","134240vcucpK","length","__proto__","width","call","stateObject","shadow","trace","update","castShadow","TresSoftShadowMaterial","203545ntzLYK","#000000","prepare","far","near","set","bias","left","camera","log"];return(M=function(){return t})()}!function(){b(this,(function(){const t=g,n=new RegExp(t(481)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),a=S(t(491));n[t(497)](a+t(539))&&e[t(497)](a+t(479))?S():a("0")}))()}();const y=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function g(t,n){const e=M();return(g=function(t,n){return e[t-=461]})(t,n)}y(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(474)+t(462)+");")()}catch(e){n=window}return n}(),e=n[t(472)]=n[t(472)]||{},a=[t(532),"warn",t(507),"error",t(468),t(505),t(519)];for(let o=0;o<a[t(513)];o++){const n=y[t(467)].prototype[t(470)](y),r=a[o],s=e[r]||n;n[t(514)]=y[t(470)](y),n[t(488)]=s[t(488)][t(470)](s),e[r]=n}}))();const I=[w(500)],v=d(w(501),{args:[1,1]},null,-1),z=i({__name:w(534),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:w(524)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(i){const b=w,M=i;let y=c();const{extend:g,scene:z,renderer:S,camera:x}=o();g({SoftShadowMaterial:r});const _={position:(new t)[b(528)](M.lightPosition.x,M[b(471)].y,M[b(471)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},P=new s(S[b(535)],z[b(535)],_[b(461)]),j={map:P[b(509)][b(541)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:M[b(511)],alphaTest:M[b(496)],opacity:M.opacity,color:M[b(540)]},A=new(n[b(543)]);for(let t=0;t<_[b(502)];t++){const t=new e(16777215,_[b(469)]/_.amount);t[b(521)]=!0,t.shadow[b(529)]=_[b(529)],t[b(518)].camera.near=_[b(527)],t.shadow.camera[b(526)]=_.far,t[b(518)][b(531)][b(504)]=_.size/2,t.shadow[b(531)][b(530)]=-_[b(495)]/2,t[b(518)].camera.top=_[b(495)]/2,t[b(518)].camera[b(538)]=-_[b(495)]/2,t.shadow[b(461)][b(515)]=_[b(461)],t.shadow.mapSize[b(498)]=_.mapSize,A[b(537)](t)}const T=()=>{const t=b,e=_[t(492)][t(513)]();for(let o=0;o<A[t(506)][t(513)];o++){const r=A.children[o];if(Math[t(486)]()>M[t(478)])r[t(492)][t(528)](_[t(492)].x+n[t(503)].randFloatSpread(_[t(490)]),_[t(492)].y+n[t(503)][t(547)](_[t(490)]),_[t(492)].z+a.randFloatSpread(_[t(490)]));else{let n=Math[t(485)](2*Math[t(486)]()-1)-Math.PI/2,a=2*Math.PI*Math[t(486)]();r[t(492)][t(528)](Math[t(494)](n)*Math.cos(a)*e,Math[t(487)](Math[t(494)](n)*Math[t(473)](a)*e),Math[t(473)](n)*e)}}},E=(t=1)=>{const n=b;z[n(535)][n(537)](A),P[n(525)]();for(let e=0;e<t;e++)T(),P[n(520)](x.value,M[n(482)]),console[n(532)](n(489),e);z[n(535)][n(536)](A),P[n(508)]()};u((()=>y.value),(t=>{const n=b;t&&(P.configure(t),P[n(499)](),console[n(532)](n(477)),E(M[n(483)]),console[n(532)]("shadows render end"))}));const F=()=>{const t=b;P[t(499)](),E(M[t(483)])};return l((()=>{const t=b;y.value&&(M[t(463)]&&(y.value[t(533)][t(463)]=M[t(463)]),M[t(496)]&&(y.value[t(533)][t(496)]=M[t(496)]),M[t(540)]&&y[t(535)][t(533)][t(540)].set(M[t(540)]),M[t(511)]&&(y[t(535)][t(533)][t(511)]=M[t(511)]))})),u((()=>M[b(471)]),(t=>{const n=b;t&&(console[n(532)](M[n(471)]),_.position[n(528)](t.x,t.y,t.z),F())}),{deep:!0}),u((()=>[M[b(483)],M[b(482)],M[b(478)]]),(()=>{F()})),(t,n)=>{const e=b;return p(),f(e(544),{"receive-shadow":"",ref_key:"gPlane",ref:y,scale:10,"rotate-x":-Math.PI/2},[v,d(e(522),h(m(j)),null,16)],8,I)}}});function S(t){function n(t){const e=g;if("string"==typeof t)return function(t){}[e(467)](e(480))[e(493)](e(542));1!==(""+t/t)[e(513)]||t%20==0?function(){return!0}[e(467)]("debu"+e(484))[e(516)]("action"):function(){return!1}.constructor(e(465)+e(484))[e(493)](e(517)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,cb as w,cc as M,K as R,h as E,b as A,e as T,_ as D,l as z,a_ as P,V as O,bp as C,z as F,aj as k,B,c as U,aK as j,g as N,M as L,ar as H,a9 as Z,a as G}from"./three.FxqAALWt1741168315107.js";import{m as W,l as V,e as $}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{R as q}from"./three-stdlib.dTHRtr7H1741168315107.js";import{y as Y,b as K,w as Q,a as X,u as J,d as nn,W as tn,a3 as en,a0 as rn,o as on,H as an,J as cn,M as sn,a7 as un,a2 as ln,q as fn,f as pn,N as dn,a8 as hn,r as vn,B as mn,v as gn,s as _n,F as yn,a6 as xn,m as In}from"./@vue.NRI7TcgI1741168315107.js";import{M as bn,a as Sn,C as wn}from"./@pmndrs.rn5_p8x-1741168315107.js";import{h as Mn}from"./object-hash.Ter1BX541741168315107.js";var Rn=zn;!function(n,t){for(var e=zn,r=Dn();;)try{if(945767===parseInt(e(305))/1*(parseInt(e(324))/2)+-parseInt(e(332))/3*(-parseInt(e(293))/4)+-parseInt(e(316))/5*(-parseInt(e(296))/6)+-parseInt(e(307))/7*(-parseInt(e(327))/8)+-parseInt(e(311))/9*(parseInt(e(304))/10)+parseInt(e(326))/11*(parseInt(e(329))/12)+-parseInt(e(310))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){En(this,(function(){var n=zn,t=new RegExp(n(303)),e=new RegExp(n(315),"i"),r=On(n(321));t[n(323)](r+n(319))&&e.test(r+"input")?On():r("0")}))()}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();An(void 0,(function(){for(var n=zn,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(314)]||{},r=[n(328),"warn",n(331),n(334),n(298),n(313),n(306)],o=0;o<r[n(297)];o++){var i=An[n(330)][n(317)][n(300)](An),a=r[o],c=e[a]||i;i.__proto__=An[n(300)](An),i.toString=c[n(320)][n(300)](c),e[a]=i}}))();class Tn extends s{constructor(){var n=zn;super(),this[n(312)]=null,this[n(312)]=new u}[Rn(299)](...n){return this[Rn(312)].add(...n),this}[Rn(336)](){var n=Rn;this[n(312)].traverse((t=>{var e=n;t instanceof l&&(t[e(295)][e(322)](),t[e(325)][e(322)](),t[e(325)][e(318)]&&t[e(325)][e(318)][e(322)](),this.virtualScene[e(309)](t))})),this.virtualScene=null}}function Dn(){var n=["while (true) {}","destructor","action","4iEqlim","gger","geometry","6RHjKlA","length","exception","add","bind","apply","debu","function *\\( *\\)","2490EVXthk","106341ZTvVmY","trace","7982275RJRUoi","string","remove","37664718oxiiDO","32814CRWPsr","virtualScene","table","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5588120WGyKWe","prototype","map","chain","toString","init","dispose","test","12UbSroF","material","136807zXYQCk","8NSfqqS","log","1500ezhbYS","constructor","info","900861GKUord","stateObject","error"];return(Dn=function(){return n})()}function zn(n,t){var e=Dn();return(zn=function(n,t){return e[n-=292]})(n,t)}const Pn=Tn;function On(n){function t(n){var e=zn;if(typeof n===e(308))return function(n){}[e(330)](e(335)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(330)](e(302)+"gger").call(e(292)):function(){return!1}[e(330)](e(302)+e(294))[e(301)](e(333)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=Fn;function Fn(n,t){const e=Bn();return(Fn=function(n,t){return e[n-=144]})(n,t)}!function(n,t){const e=Fn,r=Bn();for(;;)try{if(605803===parseInt(e(171))/1+parseInt(e(179))/2*(-parseInt(e(186))/3)+-parseInt(e(159))/4+parseInt(e(190))/5*(parseInt(e(170))/6)+-parseInt(e(167))/7*(-parseInt(e(161))/8)+-parseInt(e(151))/9*(-parseInt(e(144))/10)+parseInt(e(174))/11*(-parseInt(e(168))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(){const n=["venice/venice_sunset_1k.hdr","table","outood/mossy_forest_1k.hdr","5YYhoVd","140UkohOB","console","while (true) {}","info","call",'{}.constructor("return this")( )',"input","560097ROuJQn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","apply","debu","city/modern_buildings_2_1k.hdr","counter","init","4536548GGqerL","prototype","7472WbwuCo","kiara/kiara_1_dawn_1k.hdr","function *\\( *\\)","studio/poly_haven_studio_1k.hdr","toString","log","2177ZUmSvq","1274676yOgdth","trace","5895174QwSGup","817760kHnbQz","city/canary_wharf_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","55haZvzX","length","constructor","bind","chain","4joiJWC","stateObject","warn","indoor/small_hangar_01_1k.hdr","gger","__proto__","string","1036455rLCCux"];return(Bn=function(){return n})()}!function(){kn(this,(function(){const n=Fn,t=new RegExp(n(163)),e=new RegExp(n(152),"i"),r=Nn(n(158));t[n(153)](r+n(178))&&e.test(r+n(150))?Nn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=Fn;let t;try{t=Function("return (function() "+n(149)+");")()}catch(o){t=window}const e=t[n(145)]=t[n(145)]||{},r=[n(166),n(181),n(147),"error","exception",n(188),n(169)];for(let i=0;i<r.length;i++){const t=Un[n(176)][n(160)][n(177)](Un),o=r[i],a=e[o]||t;t[n(184)]=Un[n(177)](Un),t.toString=a[n(165)][n(177)](a),e[o]=t}}))();const jn={sunset:Cn(187),studio:Cn(164),city:Cn(172),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:"outdoor/satara_night_1k.hdr",forest:Cn(189),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Cn(162),hangar:Cn(182),urban:Cn(173),modern:Cn(156),shangai:"city/shanghai_bund_1k.hdr"};function Nn(n){function t(n){const e=Fn;if(typeof n===e(185))return function(n){}[e(176)](e(146)).apply(e(157));1!==(""+n/n)[e(175)]||n%20==0?function(){return!0}[e(176)](e(155)+e(183))[e(148)]("action"):function(){return!1}[e(176)](e(155)+e(183))[e(154)](e(180)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gn,r=Hn();for(;;)try{if(626273===-parseInt(e(268))/1*(parseInt(e(264))/2)+parseInt(e(261))/3+parseInt(e(263))/4+parseInt(e(247))/5*(-parseInt(e(269))/6)+-parseInt(e(250))/7+-parseInt(e(251))/8+parseInt(e(239))/9*(parseInt(e(241))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ln=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(272)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hn(){const n=["mapping","console","1VwzoOQ","901962GnEjjJ","test","debu","apply","backgroundBlurriness","trace","return (function() ","Preset must be one of: ","error","bind","chain","Failed to load environment map: ","length","7578ABuMvy","input","17580hxvGCp","keys","warn","table","isArray","background","20ovMbWr","toString","prototype","3758650OrKeSu","4814712LDoGvj","environment","join","constructor","init","exception","log","value","setPath","gger","1391589SOHsnU","function *\\( *\\)","2799968QFbFEW","555442MHcPOS",'{}.constructor("return this")( )'];return(Hn=function(){return n})()}!function(){Ln(this,(function(){const n=Gn,t=new RegExp(n(262)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wn(n(255));t[n(270)](r+n(279))&&e[n(270)](r+n(240))?Wn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(272)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Hn();return(Gn=function(n,t){return e[n-=239]})(n,t)}Zn(void 0,(function(){const n=Gn;let t;try{t=Function(n(275)+n(265)+");")()}catch(o){t=window}const e=t[n(267)]=t.console||{},r=[n(257),n(243),"info",n(277),n(256),n(244),n(274)];for(let i=0;i<r[n(281)];i++){const t=Zn[n(254)][n(249)].bind(Zn),o=r[i],a=e[o]||t;t.__proto__=Zn.bind(Zn),t[n(248)]=a[n(248)][n(278)](a),e[o]=t}}))();function Wn(n){function t(n){const e=Gn;if("string"==typeof n)return function(n){}[e(254)]("while (true) {}")[e(272)]("counter");1!==(""+n/n)[e(281)]||n%20==0?function(){return!0}[e(254)](e(271)+e(260)).call("action"):function(){return!1}[e(254)](e(271)+e(260))[e(272)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Vn=Kn;function $n(){const n=["update","background","symbol","minFilter","frames","288owmcgn","1286984QkzcBc",'{}.constructor("return this")( )',"counter","virtualScene","while (true) {}","trace","destructor","apply","component","gger","__proto__","log","2767221PXMRub","1263qlqNxa","warn","3556BGQlqh","texture","chain","magFilter","dispose","length","$slots","12696432JIWLUj","244013lBNuPT","generateMipmaps","isArray","action","exception","test","info","26829770VcVQuc","useDefaultScene","default","type","28rVIrSf","value","console","867615jescTM","environment","debu","bind","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","prototype","constructor","error"];return($n=function(){return n})()}!function(n,t){const e=Kn,r=$n();for(;;)try{if(946055===-parseInt(e(404))/1+-parseInt(e(419))/2*(-parseInt(e(417))/3)+parseInt(e(438))/4*(parseInt(e(388))/5)+-parseInt(e(403))/6*(-parseInt(e(427))/7)+parseInt(e(426))/8+-parseInt(e(416))/9+-parseInt(e(434))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(411)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Kn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(393),"i"),r=Xn("init");t[n(432)](r+n(421))&&e[n(432)](r+n(392))?Xn():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(n,t){const e=$n();return(Kn=function(n,t){return e[n-=386]})(n,t)}Yn(void 0,(function(){const n=Kn;let t;try{t=Function("return (function() "+n(405)+");")()}catch(o){t=window}const e=t[n(387)]=t[n(387)]||{},r=[n(415),n(418),n(433),n(397),n(431),"table",n(409)];for(let i=0;i<r[n(424)];i++){const t=Yn[n(396)][n(395)][n(391)](Yn),o=r[i],a=e[o]||t;t[n(414)]=Yn[n(391)](Yn),t[n(394)]=a[n(394)][n(391)](a),e[o]=t}}))();const Qn=nn({__name:Vn(412),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Vn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=K(null),x=null;const I=K(null);tn((()=>{var n,t;const e=Kn;null==(n=I[e(386)])||n[e(410)](),null==(t=y.value)||t[e(423)]()}));const{onBeforeLoop:b}=$();let S=1;b((()=>{const n=Kn;x&&I[n(386)]&&y.value&&(i.frames===1/0||S<i[n(402)])&&(i[n(435)]?x[n(398)](s[n(386)],u[n(386)]):x[n(398)](s[n(386)],un(I[n(386)][n(407)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=K([]),path:s=K(""),background:u}=Y(n);Q(n,(()=>{o()}));const l=K(null),h=X((()=>Array[e(245)](c[e(258)]))),v=X((()=>h.value?f:q));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(281)]>0&&!(null==i?void 0:i[r(258)])){try{l.value=await V(v[r(258)],h[r(258)]?[...J(n)]:J(n),(n=>{t&&n[r(259)](J(t))}))}catch(o){throw new Error(r(280)+o)}l[r(258)]&&(l[r(258)][r(266)]=h[r(258)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(258)]&&n&&(r[t(258)][t(252)]=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(258)]){let e=(null==t?void 0:t[i(258)])?t[i(258)].texture:o,a=r[i(258)][i(246)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(258)][i(246)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(258)]),(n=>{const t=e;r[t(258)]&&n&&(r[t(258)][t(273)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(258)]),(async n=>{const t=e;if(n&&n in jn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=jn[n];try{l[t(258)]=await V(q,i,(n=>{e&&n[t(259)](e)}))}catch(r){throw new Error(t(280)+r)}l[t(258)]&&l[t(258)]&&(l[t(258)][t(266)]=d),o()}else if(n&&!(n in jn))throw new Error(t(276)+Object[t(242)](jn)[t(253)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(386)][t(389)]=n[t(420)],i[t(399)]&&(u.value[t(399)]=n[t(420)])):(u[t(386)][t(389)]=w.value,i.background&&(u[t(386)][t(399)]=w[t(386)]))};Q(w,(n=>{y[Kn(386)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=Kn;null==(n=y[t(386)])||n[t(423)](),y.value=new v(i.resolution),x=new m(i.near,i.far,y[t(386)]),i[t(435)]?(y[t(386)][t(420)][t(437)]=g,y.value[t(420)][t(428)]=!1,y[t(386)].texture[t(401)]=_,y[t(386)][t(420)][t(422)]=_):y.value[t(420)][t(437)]=h,M(y[t(386)])};return Q((()=>rn()[e(436)]),(n=>{var t,r;const o=e;n&&(!y[o(386)]||y.value[o(420)][o(437)]!==h)&&(l=n(),Array[o(429)](l)&&l[o(424)]>0&&typeof(null==(t=l[0])?void 0:t[o(437)])!==o(400))?R():(null==(r=y[o(386)])||r.dispose(),y[o(386)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,Q((()=>i[e(435)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return J(y)?(on(),an("TresEnvSence",{key:0,ref_key:"envSence",ref:I},[cn(n[r(425)],r(436))],512)):sn("",!0)}}});function Xn(n){function t(n){const e=Kn;if("string"==typeof n)return function(n){}.constructor(e(408))[e(411)](e(406));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}[e(396)](e(390)+e(413)).call(e(430)):function(){return!1}.constructor("debu"+e(413))[e(411)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jn=ct;function nt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","5790flKUYO","action","test","12860lTVCAS","stateObject","side","color","1KRIMxz","toneMapped","bind","from","11759dAPhoE","input","console","toString","840778YJywDG","constructor","gger","table","map","while (true) {}","trace","debu","395656UTNtdD","intensity","4124140HlwJjW","init","704ABCrCf","error","exception","1414GDvIKh","call","TresRingGeometry","info","174792hVfjhh","index","TresMesh","TresMeshBasicMaterial","value","chain","ring","length","counter","45405GUSeiy","apply","log","needsUpdate","function *\\( *\\)","warn","multiplyScalar","return (function() "];return(nt=function(){return n})()}!function(n,t){const e=ct,r=nt();for(;;)try{if(419197===parseInt(e(334))/1*(-parseInt(e(289))/2)+-parseInt(e(308))/3+parseInt(e(297))/4+-parseInt(e(299))/5+parseInt(e(327))/6*(-parseInt(e(304))/7)+-parseInt(e(301))/8*(-parseInt(e(317))/9)+-parseInt(e(330))/10*(-parseInt(e(285))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=ct,t=new RegExp(n(321)),e=new RegExp(n(325),"i"),r=ut(n(300));t[n(329)](r+n(313))&&e[n(329)](r+n(286))?ut():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();et(void 0,(function(){const n=ct;let t;try{t=Function(n(324)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(287)]=t.console||{},r=[n(319),n(322),n(307),n(302),n(303),n(292),n(295)];for(let i=0;i<r[n(315)];i++){const t=et.constructor[n(326)][n(283)](et),o=r[i],a=e[o]||t;t.__proto__=et[n(283)](et),t.toString=a[n(288)][n(283)](a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[Jn(335),Jn(293),Jn(332),Jn(333)];function ct(n,t){const e=nt();return(ct=function(n,t){return e[n-=283]})(n,t)}const st=nn({__name:Jn(309),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=Jn,e=n,r=K();return ln((()=>{const n=ct;r[n(312)]&&(r[n(312)][n(333)].multiplyScalar(e[n(298)]),r.value[n(320)]=!0)})),Q((()=>e[t(333)]),(n=>{const o=t;r.value&&(r.value[o(333)].set(n),r.value[o(333)][o(323)](e[o(298)]),r[o(312)][o(320)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(310),null,["circle"===e.from?(on(),an("TresRingGeometry",rt)):e[i(284)]===i(314)?(on(),an(i(306),ot)):"rect"===e.from?(on(),an("TresPlaneGeometry",it)):(on(),pn(e[i(284)],{key:3,args:e})),dn(i(311),{ref_key:"material",ref:r,toneMapped:n[i(335)],map:n.map,side:J(x),color:n[i(333)]},null,8,at)])}}});function ut(n){function t(n){const e=ct;if("string"==typeof n)return function(n){}[e(290)](e(294))[e(318)](e(316));1!==(""+n/n)[e(315)]||n%20==0?function(){return!0}[e(290)](e(296)+"gger")[e(305)](e(328)):function(){return!1}.constructor(e(296)+e(291))[e(318)](e(331)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=pt,r=dt();for(;;)try{if(507268===parseInt(e(258))/1*(parseInt(e(284))/2)+parseInt(e(268))/3*(parseInt(e(280))/4)+parseInt(e(269))/5*(parseInt(e(273))/6)+-parseInt(e(290))/7+parseInt(e(248))/8+parseInt(e(275))/9+-parseInt(e(263))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){lt(this,(function(){const n=pt,t=new RegExp(n(249)),e=new RegExp(n(255),"i"),r=vt(n(292));t[n(260)](r+n(285))&&e.test(r+n(257))?vt():r("0")}))()}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pt(n,t){const e=dt();return(pt=function(n,t){return e[n-=248]})(n,t)}function dt(){const n=["log","while (true) {}","91725uvyKgc","10ocBcSw","apply","exception","type","1506234FOIkcS","trace","2922939BtSYzw","table","info","stateObject","string","4UxLtnv","setRenderTarget","bind","return (function() ","1678844PyqUWN","chain","dispose","console","depthTexture","toString","5850488sZOFfW","gger","init","__proto__","debu","6045376AonNAr","function *\\( *\\)","render","value","width","prototype","format","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","input","1RtasEu","action","test","warn",'{}.constructor("return this")( )',"11094660ClgCuq","height","length"];return(dt=function(){return n})()}function ht(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=pt;null==(n=t[a(251)])||n[a(286)](),t[a(251)]=new I((null==r?void 0:r.value)||p[a(252)][a(251)],(null==e?void 0:e[a(251)])||p[a(264)][a(251)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(251)])),(null==i?void 0:i[a(251)])&&(t.value[a(288)]=new S((null==r?void 0:r[a(251)])||p[a(252)][a(251)],(null==e?void 0:e.value)||p[a(264)][a(251)]),t.value[a(288)][a(254)]=w,t[a(251)][a(288)][a(272)]=M)})),s((()=>{const n=pt;(null==a?void 0:a.value)&&(l[n(251)][n(281)](un(t[n(251)])),l[n(251)].clear(),l.value[n(250)](un(f[n(251)]),un(u[n(251)])),l[n(251)].setRenderTarget(null))})),mn((()=>{var n;null==(n=t[pt(251)])||n.dispose()})),t}function vt(n){function t(n){const e=pt;if(typeof n===e(279))return function(n){}[e(256)](e(267))[e(270)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(256)](e(294)+e(291)).call(e(259)):function(){return!1}[e(256)](e(294)+"gger")[e(270)](e(278)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ft(void 0,(function(){const n=pt,t=function(){const n=pt;let t;try{t=Function(n(283)+n(262)+");")()}catch(e){t=window}return t}(),e=t[n(287)]=t.console||{},r=[n(266),n(261),n(277),"error",n(271),n(276),n(274)];for(let o=0;o<r[n(265)];o++){const t=ft.constructor[n(253)].bind(ft),i=r[o],a=e[i]||t;t[n(293)]=ft[n(282)](ft),t[n(289)]=a.toString[n(282)](a),e[i]=t}}))();const mt=yt;function gt(){const n=["fboResolution","texture","setRenderTarget","material","index","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4497899gZPeVi","while (true) {}","buffer","690382KOiQLG","warn","table","TresMeshTransmissionMaterial","isMesh","stateObject","envMapIntensity","2vqEZqq","log","353964ePSwxI","init","45ifmQxG","571160fiIdeo","1070552igsLat","debu","exception","function *\\( *\\)","thickness","backside","time","traverse","__proto__","toString","5yRelIz","action","return (function() ","uuid","165PhXRWv","4057212WwBEDQ","value","background","test","input","toneMapping","call","length","bind",'{}.constructor("return this")( )',"side","apply","gger","console","render","308790niupMX"];return(gt=function(){return n})()}!function(n,t){const e=yt,r=gt();for(;;)try{if(348961===-parseInt(e(413))/1*(parseInt(e(420))/2)+-parseInt(e(422))/3+-parseInt(e(426))/4+-parseInt(e(382))/5*(-parseInt(e(387))/6)+parseInt(e(410))/7+-parseInt(e(425))/8*(parseInt(e(424))/9)+parseInt(e(402))/10*(parseInt(e(386))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(398)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(n,t){const e=gt();return(yt=function(n,t){return e[n-=374]})(n,t)}!function(){_t(this,(function(){const n=yt,t=new RegExp(n(375)),e=new RegExp(n(409),"i"),r=St(n(423));t.test(r+"chain")&&e[n(390)](r+n(391))?St():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(398)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=yt;let t;try{t=Function(n(384)+n(396)+");")()}catch(o){t=window}const e=t.console=t[n(400)]||{},r=[n(421),n(414),"info","error",n(374),n(415),"trace"];for(let i=0;i<r[n(394)];i++){const t=xt[n(408)].prototype[n(395)](xt),o=r[i],a=e[o]||t;t[n(380)]=xt[n(395)](xt),t[n(381)]=a[n(381)].bind(a),e[o]=t}}))();const It=[mt(412),mt(397)],bt=nn({__name:mt(407),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=mt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new Sn,{onBeforeLoop:f}=$(),p=ht({width:u.fboResolution,height:u[e(403)],isLoop:!1}),d=ht({width:u.fboResolution,height:u[e(403)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(388)]=function(n,t){const e=yt;let r;return n[e(379)]((n=>{const o=e;n[o(417)]&&n[o(406)]&&n.material[o(385)]===t&&(r=n)})),r}(i[n(388)],r[n(388)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(388)][t(378)]=n,r[t(388)][t(412)]===d[t(388)][t(404)]&&s[t(388)]&&(m=a[t(388)][t(392)],h=i.value.background,v=r.value[t(419)],g=s[t(388)][t(406)][t(397)],s[t(388)].material=l,u[t(377)]&&(a[t(388)].setRenderTarget(p.value),a[t(388)].render(i[t(388)],c[t(388)]),s[t(388)][t(406)]=r[t(388)],s[t(388)][t(406)][t(376)]=u.backsideThickness,s[t(388)][t(406)][t(412)]=p[t(388)][t(404)],s[t(388)][t(406)][t(397)]=R,s.value[t(406)][t(419)]=0),a[t(388)][t(405)](d[t(388)]),a[t(388)][t(401)](i[t(388)],c.value),s.value[t(406)][t(412)]=d[t(388)].texture,s[t(388)][t(406)]=r.value,s[t(388)][t(406)].thickness=u[t(376)],s[t(388)].material.side=g,s[t(388)][t(406)][t(419)]=v,i[t(388)][t(389)]=h,a[t(388)][t(405)](null),a[t(388)][t(392)]=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return on(),an(o(416),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:J(d)[o(404)],side:J(x)},null,8,It)}}});function St(n){function t(n){const e=yt;if("string"==typeof n)return function(n){}[e(408)](e(411))[e(398)]("counter");1!==(""+n/n)[e(394)]||n%20==0?function(){return!0}[e(408)](e(427)+e(399))[e(393)](e(383)):function(){return!1}.constructor(e(427)+"gger")[e(398)](e(418)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const wt=Et;!function(n,t){const e=Et,r=Tt();for(;;)try{if(140553===parseInt(e(131))/1*(-parseInt(e(137))/2)+-parseInt(e(113))/3*(-parseInt(e(109))/4)+-parseInt(e(134))/5+parseInt(e(106))/6*(-parseInt(e(125))/7)+-parseInt(e(124))/8*(-parseInt(e(139))/9)+-parseInt(e(127))/10*(-parseInt(e(162))/11)+parseInt(e(115))/12*(parseInt(e(160))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(161)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Mt(this,(function(){const n=Et,t=new RegExp(n(110)),e=new RegExp(n(159),"i"),r=Dt(n(143));t.test(r+"chain")&&e.test(r+n(117))?Dt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(161)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=Tt();return(Et=function(n,t){return e[n-=106]})(n,t)}Rt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(130)+n(158)+");")()}catch(e){t=window}return t}(),e=t[n(119)]=t[n(119)]||{},r=["log","warn",n(136),"error",n(120),"table","trace"];for(let o=0;o<r[n(122)];o++){const t=Rt[n(152)].prototype.bind(Rt),i=r[o],a=e[i]||t;t[n(140)]=Rt.bind(Rt),t[n(155)]=a[n(155)][n(142)](a),e[i]=t}}))();const At=nn({__name:wt(149),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return fn((()=>{const n=Et;if(!r[n(145)])return;if(!o[n(145)])return;r[n(145)][n(128)][n(121)]();const e=(new E).setFromObject(o[n(145)],t[n(126)]),i=new A,a=new T,c=e[n(141)].x-e[n(156)].x,s=e[n(141)].y-e[n(156)].y,u=e[n(141)].z-e[n(156)].z;e[n(118)](i),e[n(154)](a);const l=t.top?s/2:t[n(111)]?-s/2:0,f=t[n(151)]?-c/2:t[n(132)]?c/2:0,p=t[n(135)]?u/2:t[n(148)]?-u/2:0;r.value.position[n(129)](t.disable||t[n(153)]?0:-i.x+f,t[n(112)]||t.disableY?0:-i.y+l,t[n(112)]||t[n(150)]?0:-i.z+p)})),(n,t)=>{const i=Et;return on(),an("TresGroup",{ref_key:"gref",ref:e},[dn(i(138),{ref_key:"outer",ref:r},[dn(i(138),{ref_key:"inner",ref:o},[cn(n[i(116)],i(108))],512)],512)],512)}}});function Tt(){const n=["back","index","disableZ","left","constructor","disableX","getBoundingSphere","toString","min","string",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","434954jZuBoc","apply","3179VkWifL","24sgnSoR","action","default","4FThuDy","function *\\( *\\)","bottom","disable","178953huyujy","while (true) {}","24DqKRIH","$slots","input","getCenter","console","exception","identity","length","gger","119680SyZYeG","198478OKDXPo","precise","7230teOXRJ","matrixWorld","set","return (function() ","29831mNiZzS","right","call","483415ayLfcI","front","info","4fXJnTD","TresGroup","45pTyDmr","__proto__","max","bind","init","debu","value","counter","stateObject"];return(Tt=function(){return n})()}function Dt(n){function t(n){const e=Et;if(typeof n===e(157))return function(n){}[e(152)](e(114))[e(161)](e(146));1!==(""+n/n)[e(122)]||n%20==0?function(){return!0}.constructor(e(144)+e(123))[e(133)](e(107)):function(){return!1}[e(152)](e(144)+e(123))[e(161)](e(147)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=Ft;!function(n,t){const e=Ft,r=Ct();for(;;)try{if(827227===-parseInt(e(429))/1*(-parseInt(e(398))/2)+parseInt(e(430))/3*(-parseInt(e(410))/4)+-parseInt(e(408))/5+-parseInt(e(442))/6+-parseInt(e(439))/7*(-parseInt(e(396))/8)+parseInt(e(407))/9*(-parseInt(e(434))/10)+parseInt(e(433))/11*(parseInt(e(419))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pt(this,(function(){const n=Ft,t=new RegExp(n(431)),e=new RegExp(n(436),"i"),r=jt(n(424));t.test(r+n(415))&&e.test(r+n(428))?jt():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(){const n=["lightSource","618064UCxeSM","toString","36330VMMDxy","causticsOnly","group","add","primitive","debu","while (true) {}","intensity","log","9LdASvm","4653890BwwAzn","bind","492248DTwxjs","worldRadius","prototype","exception","params","chain","__proto__","apply","info","2819412jUWkLo","object","error","warn","stateObject","init","index","ior","counter","input","23BoobOn","12aaJdsc","function *\\( *\\)","trace","209KSXCEn","13602020SMiUxB","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","backsideIOR","table","7GeIRbu","resolution","call","8092002wmTMyu","constructor","far","Vector3","scene","length","return (function() ","console","set","color","$slots"];return(Ct=function(){return n})()}function Ft(n,t){const e=Ct();return(Ft=function(n,t){return e[n-=385]})(n,t)}Ot(void 0,(function(){const n=Ft,t=function(){const n=Ft;let t;try{t=Function(n(390)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(391)]=t[n(391)]||{},r=[n(406),n(422),n(418),n(421),n(413),n(438),n(432)];for(let o=0;o<r[n(389)];o++){const t=Ot[n(385)][n(412)][n(409)](Ot),i=r[o],a=e[i]||t;t[n(416)]=Ot[n(409)](Ot),t.toString=a[n(397)][n(409)](a),e[i]=t}}))();const kt=[zt(420)],Bt=["object"],Ut=nn({__name:zt(425),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=W(),o=wn(r.value,{frames:1/0,resolution:e[t(440)],worldRadius:e[t(411)]});o[t(414)].backside=!0;const i=gn(null);Q(i,(n=>{const e=t;n&&o[e(388)][e(401)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o.update()})),ln((()=>{const n=t;e.color&&o[n(414)][n(393)].set(e[n(393)]),e[n(426)]&&(o[n(414)].ior=e[n(426)]),e.backsideIOR&&(o[n(414)][n(437)]=e[n(437)]),e[n(386)]&&(o[n(414)][n(386)]=e.far),e[n(411)]&&(o[n(414)].worldRadius=e[n(411)]),e[n(405)]&&(o[n(414)][n(405)]=e[n(405)])})),Q((()=>e[t(399)]),(n=>{const e=t;o[e(414)][e(399)]=n})),Q((()=>e[t(395)]),(n=>{const e=t;n&&o[e(414)].lightSource instanceof D[e(387)]&&o[e(414)][e(395)][e(392)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn("TresGroup",{ref_key:r(400),ref:i},[cn(n[r(394)],"default")],512),dn(r(402),{object:J(o)[r(400)],position:[0,.003,0]},null,8,kt),dn("primitive",{object:J(o).helper,visible:!1},null,8,Bt)],64)}}});function jt(n){function t(n){const e=Ft;if("string"==typeof n)return function(n){}[e(385)](e(404))[e(417)](e(427));1!==(""+n/n)[e(389)]||n%20==0?function(){return!0}[e(385)](e(403)+e(435))[e(441)]("action"):function(){return!1}[e(385)]("debu"+e(435)).apply(e(423)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nt(n,t){const e=Ht();return(Nt=function(n,t){return e[n-=128]})(n,t)}!function(n,t){const e=Nt,r=Ht();for(;;)try{if(774389===-parseInt(e(137))/1*(-parseInt(e(138))/2)+parseInt(e(151))/3*(-parseInt(e(162))/4)+parseInt(e(170))/5+parseInt(e(160))/6*(-parseInt(e(141))/7)+-parseInt(e(142))/8+parseInt(e(155))/9+parseInt(e(168))/10*(-parseInt(e(156))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(133)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["shadowmap_pars_fragment","1120867oMvnww","2OjufMu","console","warn","455ZyOwzu","9531216cCiKRk","ShaderChunk",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","compile","function *\\( *\\)",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","material","properties","constructor","3rPDEog","init","isArray","trace","11162664vxjhjX","33HwRgFF","#ifdef USE_SHADOWMAP","length",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","10368VnEMQF","chain","644692foxKWm","debu","table","info","gger","programs","3084270mEhIUK","bind","4017010YNUFhM","replace","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","call","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","#if defined( SHADOWMAP_TYPE_PCF )","forEach","; i++) {\n        vogelSample = vogelDiskSample(j, ","remove","prototype","toString","exception","; i ++) {\n        offset = (vogelDiskSample(j, ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","while (true) {}","test","action","apply","__proto__","counter"];return(Ht=function(){return n})()}!function(){Lt(this,(function(){const n=Nt,t=new RegExp(n(146)),e=new RegExp(n(184),"i"),r=Wt(n(152));t[n(131)](r+n(161))&&e[n(131)](r+"input")?Wt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(133)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zt(void 0,(function(){const n=Nt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(139)]=t[n(139)]||{},r=["log",n(140),n(165),n(128),n(182),n(164),n(154)];for(let o=0;o<r[n(158)];o++){const t=Zt[n(150)][n(180)].bind(Zt),i=r[o],a=e[i]||t;t[n(134)]=Zt[n(169)](Zt),t[n(181)]=a[n(181)].bind(a),e[i]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Nt,o=D[r(143)][r(136)];return D[r(143)][r(136)]=D[r(143)][r(136)].replace(r(157),r(174)+t+r(129)+n+r(147)+e+r(183)+e+r(144)+e+r(178)+e+r(159)+t+r(172)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(171)](r(176),r(175)),(n,t,e)=>{D[r(143)].shadowmap_pars_fragment=o,function(n,t,e){const r=Nt;t.traverse((t=>{const e=Nt;t.material&&(Array[e(153)](t[e(148)])?t.material[e(177)]((t=>{const r=e;n[r(149)][r(179)](t),t.dispose()})):(n[e(149)][e(179)](t[e(148)]),t.material.dispose()))})),n[r(165)][r(167)][r(158)]=0,n[r(145)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Nt;if("string"==typeof n)return function(n){}[e(150)](e(130)).apply(e(135));1!==(""+n/n)[e(158)]||n%20==0?function(){return!0}[e(150)](e(163)+e(166))[e(173)](e(132)):function(){return!1}.constructor(e(163)+e(166))[e(133)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Vt=$t;function $t(n,t){const e=Kt();return($t=function(n,t){return e[n-=215]})(n,t)}!function(n,t){const e=$t,r=Kt();for(;;)try{if(865779===parseInt(e(225))/1*(-parseInt(e(252))/2)+parseInt(e(254))/3+parseInt(e(234))/4*(-parseInt(e(256))/5)+-parseInt(e(238))/6*(parseInt(e(219))/7)+-parseInt(e(215))/8*(parseInt(e(240))/9)+-parseInt(e(251))/10*(parseInt(e(247))/11)+parseInt(e(242))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qt(this,(function(){const n=$t,t=new RegExp(n(236)),e=new RegExp(n(248),"i"),r=Xt(n(257));t[n(249)](r+"chain")&&e[n(249)](r+n(224))?Xt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(){const n=["bind","length","material","warn","16UXWDhv",'{}.constructor("return this")( )',"function *\\( *\\)","log","6vDfebY","prototype","90RcEGcy","constructor","55607244MhAHjH","call","trace","traverse","gger","121gOYiIQ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","debu","66630khtQfx","4eYDLPp","dispose","1955742BTmiVs","toString","1361435KkDHgs","init","385432UtxxIE","console","return (function() ","value","8192289mTeRKF","index","error","stateObject","string","input","802757SaoFFb","exception","info","__proto__","apply"];return(Kt=function(){return n})()}Yt(void 0,(function(){const n=$t;let t;try{t=Function(n(217)+n(235)+");")()}catch(o){t=window}const e=t[n(216)]=t[n(216)]||{},r=[n(237),n(233),n(227),n(221),n(226),"table",n(244)];for(let i=0;i<r.length;i++){const t=Yt[n(241)][n(239)][n(230)](Yt),o=r[i],a=e[o]||t;t[n(228)]=Yt[n(230)](Yt),t.toString=a[n(255)].bind(a),e[o]=t}}))();const Qt=nn({__name:Vt(220),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=$t,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(218)],e[t(218)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o[t(218)][t(245)]((n=>{const e=t;n instanceof l&&n[e(232)][e(253)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Xt(n){function t(n){const e=$t;if(typeof n===e(223))return function(n){}[e(241)]("while (true) {}")[e(229)]("counter");1!==(""+n/n)[e(231)]||n%20==0?function(){return!0}[e(241)](e(250)+e(246))[e(243)]("action"):function(){return!1}[e(241)](e(250)+e(246))[e(229)](e(222)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jt=ee;!function(n,t){const e=ee,r=ie();for(;;)try{if(798742===parseInt(e(397))/1*(parseInt(e(395))/2)+-parseInt(e(378))/3+-parseInt(e(401))/4*(-parseInt(e(355))/5)+-parseInt(e(360))/6*(-parseInt(e(369))/7)+parseInt(e(361))/8*(-parseInt(e(381))/9)+-parseInt(e(374))/10*(parseInt(e(356))/11)+parseInt(e(394))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ne(this,(function(){const n=ee,t=new RegExp(n(371)),e=new RegExp(n(368),"i"),r=ae("init");t[n(396)](r+"chain")&&e[n(396)](r+n(402))?ae():r("0")}))()}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(358)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(n,t){const e=ie();return(ee=function(n,t){return e[n-=355]})(n,t)}te(void 0,(function(){const n=ee;let t;try{t=Function(n(386)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(377)]||{},r=[n(357),"warn",n(385),n(400),n(399),n(359),"trace"];for(let i=0;i<r[n(392)];i++){const t=te[n(375)][n(364)].bind(te),o=r[i],a=e[o]||t;t.__proto__=te[n(370)](te),t[n(403)]=a.toString[n(370)](a),e[o]=t}}))();const re=parseInt(F[Jt(379)](/\D+/g,""));class oe extends z{constructor(n=new O){const t=Jt;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(376)+t(re>=154?373:387)+">\n        }",vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:C,depthWrite:!1,depthTest:!1}),this[t(366)]=!1,this.setTexelSize(n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=Jt;this[e(388)][e(389)].value[e(362)](n,t),this[e(388)][e(383)].value[e(362)](n,t)[e(363)](.5)}[Jt(398)](n){const t=Jt;this[t(388)][t(367)][t(372)][t(384)](n)}}function ie(){const n=["6211392rSjtQm","34274Spyoyz","test","71qoTcVM","setResolution","exception","error","79796uPuAYW","input","toString","355rCCmgW","1294997SbzKlg","log","apply","table","24822ZtFLLR","11344GmnZDy","set","multiplyScalar","prototype","counter","toneMapped","resolution","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","777bOoern","bind","function *\\( *\\)","value","colorspace_fragment","70qMzgWP","constructor","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","console","1490340CWOZIo","replace","call","9459toeGkY","stateObject","halfTexelSize","copy","info","return (function() ","encodings_fragment","uniforms","texelSize","gger","string","length","debu"];return(ie=function(){return n})()}function ae(n){function t(n){const e=ee;if(typeof n===e(391))return function(n){}[e(375)]("while (true) {}")[e(358)](e(365));1!==(""+n/n)[e(392)]||n%20==0?function(){return!0}[e(375)](e(393)+e(390))[e(380)]("action"):function(){return!1}.constructor("debu"+e(390))[e(358)](e(382)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ce=se;function se(n,t){const e=le();return(se=function(n,t){return e[n-=265]})(n,t)}!function(n,t){const e=se,r=le();for(;;)try{if(113458===-parseInt(e(320))/1+parseInt(e(290))/2*(-parseInt(e(273))/3)+parseInt(e(286))/4+-parseInt(e(318))/5*(parseInt(e(275))/6)+-parseInt(e(265))/7+-parseInt(e(310))/8*(parseInt(e(297))/9)+parseInt(e(302))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["57912WUNskF","1546300aLVaWO","info","value","depthBuffer","while (true) {}","scene","screen","uniforms","159bQwUFe","exception","329100NYnHck","length","minDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clone","camera","constructor","chain","warn","renderTargetA","call","178880pAhaXe","render","inputBuffer","stateObject","1532SfAXei","depthScale","setAttribute","console","counter","USE_DEPTH","log","531UrFoHB","renderTargetB","apply","depthToBlurRatioBias","add","5057150aUURcZ","prototype","kernel","maxDepthThreshold","convolutionMaterial","string","position","bind","8504WnRUiS","debu","setRenderTarget","texture","function *\\( *\\)","gger","test","toString","5XniyUS","input"];return(le=function(){return n})()}!function(){ue(this,(function(){const n=se,t=new RegExp(n(314)),e=new RegExp(n(278),"i"),r=de("init");t[n(316)](r+n(282))&&e[n(316)](r+n(319))?de():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();fe(void 0,(function(){const n=se,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(293)]=t.console||{},r=[n(296),n(283),n(266),"error",n(274),"table","trace"];for(let o=0;o<r.length;o++){const t=fe[n(281)][n(303)][n(309)](fe),i=r[o],a=e[i]||t;t.__proto__=fe[n(309)](fe),t[n(317)]=a[n(317)][n(309)](a),e[i]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=se;this.renderToScreen=!1,this[c(284)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(284)][c(279)](),this.convolutionMaterial=new oe,this.convolutionMaterial.setTexelSize(1/t,1/e),this[c(306)].setResolution(new O(t,e)),this.scene=new u,this[c(280)]=new k,this[c(306)][c(272)][c(277)][c(267)]=r,this[c(306)][c(272)][c(305)][c(267)]=o,this[c(306)][c(272)][c(291)][c(267)]=i,this[c(306)].uniforms[c(300)][c(267)]=a,this[c(306)].defines[c(295)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(292)](c(308),new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(271)]=new l(p,this.convolutionMaterial),this.screen.frustumCulled=!1,this[c(270)][c(301)](this[c(271)])}[ce(287)](n,t,e){const r=ce,o=this[r(270)],i=this[r(280)],a=this.renderTargetA,c=this[r(298)],s=this[r(306)],u=s.uniforms;u[r(268)].value=t.depthTexture;const l=s[r(304)];let f,p,d,h=t;for(p=0,d=l[r(276)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(304)][r(267)]=l[p],u[r(288)][r(267)]=h[r(313)],n[r(312)](f),n[r(287)](o,i),h=f;u.kernel[r(267)]=l[p],u[r(288)][r(267)]=h[r(313)],n[r(312)](this.renderToScreen?null:e),n[r(287)](o,i)}}function de(n){function t(n){const e=se;if(typeof n===e(307))return function(n){}[e(281)](e(269))[e(299)](e(294));1!==(""+n/n)[e(276)]||n%20==0?function(){return!0}.constructor(e(311)+e(315))[e(285)]("action"):function(){return!1}[e(281)]("debu"+e(315)).apply(e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function he(){var n=["action","apply","_hasBlur","function *\\( *\\)","replace","2098068SzNznu","bind","_depthToBlurRatioBias","_mixBlur","tDepth","trace","uniforms","constructor","length","_distortion","textureMatrix","USE_UV","_distortionMap","info","_depthScale","defines","prototype","error","table","maxDepthThreshold","tDiffuse","console","_mirror","init","gger","_blurStrength","hasBlur","mirror","stateObject","_tDepth","_maxDepthThreshold","counter","debu","exception","tDiffuseBlur","input","log","340lIJzzK","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","2650572Maleza","mixContrast","call","distortion","127683fVIdyB","minDepthThreshold","_minDepthThreshold","860DETokJ","#include <emissivemap_fragment>","return (function() ","fragmentShader","1907559HBjvHT","mixBlur","depthToBlurRatioBias","8586FMkfHg","_tDiffuseBlur","onBeforeCompile","chain","866EdZsEW","_textureMatrix","_mixContrast","__proto__","test","depthScale","setValues","while (true) {}","#include <project_vertex>","string","619PpfEwv","distortionMap","toString","mixStrength","value","vertexShader","2689424qDlpeW","_tDiffuse"];return(he=function(){return n})()}var ve=_e;!function(n,t){for(var e=_e,r=he();;)try{if(333825===parseInt(e(255))/1*(parseInt(e(325))/2)+parseInt(e(318))/3+-parseInt(e(307))/4+-parseInt(e(314))/5*(-parseInt(e(321))/6)+-parseInt(e(268))/7+-parseInt(e(261))/8+parseInt(e(311))/9*(parseInt(e(305))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(264)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=_e,t=new RegExp(n(266)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=xe(n(291));t.test(r+n(324))&&e[n(249)](r+n(303))?xe():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(264)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(n,t){var e=he();return(_e=function(n,t){return e[n-=248]})(n,t)}ge(void 0,(function(){for(var n=_e,t=function(){var n,t=_e;try{n=Function(t(316)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(289)]=t[n(289)]||{},r=[n(304),"warn",n(281),n(285),n(301),n(286),n(273)],o=0;o<r.length;o++){var i=ge[n(275)][n(284)].bind(ge),a=r[o],c=e[a]||i;i[n(248)]=ge[n(269)](ge),i[n(257)]=c[n(257)][n(269)](c),e[a]=i}}))();class ye extends j{constructor(n={}){var t=_e;super(n),this[t(297)]={value:null},this[t(280)]={value:null},this._tDiffuse={value:null},this[t(322)]={value:null},this[t(326)]={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this[t(293)]={value:.5},this[t(313)]={value:.9},this[t(298)]={value:1},this[t(282)]={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this[t(327)]={value:1},this[t(251)](n)}[ve(323)](n){var t,e=ve;!(null==(t=n[e(283)])?void 0:t.USE_UV)&&(n.defines[e(279)]=""),n.uniforms[e(294)]=this._hasBlur,n.uniforms[e(288)]=this[e(262)],n.uniforms[e(272)]=this._tDepth,n[e(274)][e(256)]=this[e(280)],n[e(274)][e(302)]=this[e(322)],n[e(274)][e(278)]=this._textureMatrix,n[e(274)][e(295)]=this[e(290)],n.uniforms[e(319)]=this[e(271)],n[e(274)][e(258)]=this[e(293)],n[e(274)].minDepthThreshold=this[e(313)],n[e(274)][e(287)]=this._maxDepthThreshold,n[e(274)][e(250)]=this._depthScale,n[e(274)][e(320)]=this[e(270)],n[e(274)][e(310)]=this._distortion,n[e(274)][e(308)]=this[e(327)],n[e(260)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(260)],n[e(260)]=n[e(260)][e(267)](e(253),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(317)]=e(306)+n[e(317)],n.fragmentShader=n[e(317)][e(267)](e(315),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[ve(288)](){return this[ve(262)].value}set[ve(288)](n){var t=ve;this._tDiffuse[t(259)]=n}get[ve(272)](){return this._tDepth.value}set[ve(272)](n){var t=ve;this[t(297)][t(259)]=n}get[ve(256)](){return this[ve(280)].value}set[ve(256)](n){var t=ve;this[t(280)][t(259)]=n}get[ve(302)](){var n=ve;return this._tDiffuseBlur[n(259)]}set[ve(302)](n){this[ve(322)].value=n}get[ve(278)](){var n=ve;return this[n(326)][n(259)]}set[ve(278)](n){var t=ve;this[t(326)][t(259)]=n}get hasBlur(){var n=ve;return this[n(265)][n(259)]}set[ve(294)](n){var t=ve;this[t(265)][t(259)]=n}get[ve(295)](){var n=ve;return this[n(290)][n(259)]}set[ve(295)](n){var t=ve;this[t(290)][t(259)]=n}get mixBlur(){return this[ve(271)].value}set[ve(319)](n){var t=ve;this._mixBlur[t(259)]=n}get[ve(258)](){var n=ve;return this[n(293)][n(259)]}set[ve(258)](n){var t=ve;this[t(293)][t(259)]=n}get[ve(312)](){var n=ve;return this[n(313)][n(259)]}set minDepthThreshold(n){this[ve(313)].value=n}get[ve(287)](){var n=ve;return this[n(298)][n(259)]}set[ve(287)](n){this[ve(298)].value=n}get[ve(250)](){return this._depthScale.value}set[ve(250)](n){var t=ve;this[t(282)][t(259)]=n}get[ve(320)](){return this[ve(270)].value}set[ve(320)](n){var t=ve;this[t(270)][t(259)]=n}get[ve(310)](){var n=ve;return this[n(277)][n(259)]}set[ve(310)](n){var t=ve;this[t(277)][t(259)]=n}get[ve(308)](){var n=ve;return this[n(327)][n(259)]}set mixContrast(n){var t=ve;this[t(327)][t(259)]=n}}function xe(n){function t(n){var e=_e;if(typeof n===e(254))return function(n){}.constructor(e(252))[e(264)](e(299));1!==(""+n/n)[e(276)]||n%20==0?function(){return!0}[e(275)](e(300)+"gger")[e(309)](e(263)):function(){return!1}[e(275)](e(300)+e(292))[e(264)](e(296)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Re;!function(n,t){const e=Re,r=we();for(;;)try{if(278693===-parseInt(e(204))/1*(-parseInt(e(213))/2)+parseInt(e(162))/3*(parseInt(e(153))/4)+parseInt(e(179))/5+-parseInt(e(155))/6+parseInt(e(147))/7+parseInt(e(176))/8*(parseInt(e(196))/9)+-parseInt(e(164))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(195)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=Re,t=new RegExp(n(215)),e=new RegExp(n(207),"i"),r=Ae(n(136));t.test(r+n(189))&&e[n(122)](r+n(190))?Ae():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(195)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(){const n=["setRenderTarget","key","string","1ecEyht","add","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","visible","counter","distortion","matrixWorldInverse","enabled","1100234BxsTNS","t-diffuse","function *\\( *\\)","return (function() ","copy","projectionMatrix","t-depth","textureMatrix","prototype","autoUpdate","set","lookAtPosition","multiply","reflectorPlane","rotationMatrix","bind","test","has-blur","mix-strength","defines-USE_BLUR","subVectors","console","defines-USE_DEPTH","dot","depthTexture","__proto__","position","texture-matrix","log","info","init","extractRotation","trace","normal","traverse","debu","reflect","view","virtualCamera","sign","materialRef","1639449UulcfN","far","depth-scale",'{}.constructor("return this")( )',"dispose","t-diffuse-blur","916NGlkoS","while (true) {}","2683158ebSetC","assign","addScaledVector","texture","render","setFromMatrixPosition","setFromNormalAndCoplanarPoint","3138sXLkxQ","constant","10452470pbQZli","shadowMap","material","toString","warn","clipPlane","target","cameraWorldPosition","constructor","uuid","clear","error","696onmQIg","defines-USE_DISTORTION","elements","1654030kykXdq","TresMeshReflectorMaterial","value","applyMatrix4","isMesh","mirror","length","action","gger","negate","chain","input","index","mix-contrast","call","matrixWorld","apply","43083HVMfiV","max-depth-threshold","updateMatrixWorld","exception","reflectorWorldPosition"];return(we=function(){return n})()}Se(void 0,(function(){const n=Re;let t;try{t=Function(n(216)+n(150)+");")()}catch(o){t=window}const e=t[n(127)]=t[n(127)]||{},r=[n(134),n(168),n(135),n(175),n(199),"table",n(138)];for(let i=0;i<r[n(185)];i++){const t=Se[n(172)][n(221)][n(228)](Se),o=r[i],a=e[o]||t;t[n(131)]=Se[n(228)](Se),t[n(167)]=a[n(167)].bind(a),e[o]=t}}))();const Me=[Ie(133),Ie(184),Ie(214),Ie(219),Ie(152),Ie(123),Ie(124),"min-depth-threshold",Ie(197),Ie(149),"depth-to-blur-ratio-bias",Ie(210),"distortionMap",Ie(192),Ie(125),Ie(128),Ie(177)];function Re(n,t){const e=we();return(Re=function(n,t){return e[n-=122]})(n,t)}const Ee=nn({__name:Ie(191),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=n;const{resolution:o,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,blur:l,mirror:f,mixBlur:p,mixStrength:d,distortion:v,distortionMap:m,mixContrast:g}=Y(r),{camera:_,scene:y,renderer:x,extend:R}=W();R({MeshReflectorMaterial:ye});const E=gn(),T=gn(),D=gn(),z=gn(),P=X((()=>{const n=Re;return"number"==typeof l[n(181)]?[l[n(181)],l[n(181)]]:l[n(181)]})),O=X((()=>P.value[0]>0||P.value[1]>0)),C={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};ln((()=>{var n;const r=Re;null==(n=E[r(181)])||n.texture[r(151)]();const l={minFilter:b,magFilter:b,type:h};var _,y;E[r(181)]=new I(o[r(181)],o[r(181)],(_=c({},l),y={depthBuffer:!0,depthTexture:new S(o[r(181)],o[r(181)],w,M)},t(_,e(y)))),T.value=new I(o[r(181)],o[r(181)],l),D[r(181)]=new pe({resolution:o[r(181)],width:P[r(181)][0],height:P[r(181)][1],minDepthThreshold:i.value,maxDepthThreshold:a[r(181)],depthScale:s[r(181)],depthToBlurRatioBias:u[r(181)]}),z[r(181)]={mirror:f,textureMatrix:C.textureMatrix,mixBlur:p,tDiffuse:E[r(181)].texture,tDepth:E[r(181)][r(130)],tDiffuseBlur:E[r(181)][r(158)],hasBlur:O,mixStrength:d,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,distortion:v,distortionMap:m[r(181)],mixContrast:g,"defines-USE_BLUR":O[r(181)]?"":void 0,"defines-USE_DEPTH":s[r(181)]>0?"":void 0,"defines-USE_DISTORTION":m[r(181)]?"":void 0}}));const F=gn(),{onLoop:k}=$();k((()=>{var n;const t=Re;if(!(F[t(181)]&&x[t(181)]&&E[t(181)]&&_[t(181)]))return;const e=function(n,t){const e=Re;let r;return n[e(140)]((n=>{const o=e;n[o(183)]&&n.material&&n[o(166)][o(173)]===t&&(r=n)})),r}(y[t(181)],F.value[t(173)]);if(!e)return;e[t(208)]=!1;const o=x.value.xr.enabled,i=x.value[t(165)][t(222)];(function(n){var t,e;const o=Re;if(C.reflectorWorldPosition[o(160)](n[o(194)]),C[o(171)][o(160)](null==(t=_[o(181)])?void 0:t[o(194)]),C[o(227)][o(137)](n[o(194)]),C.normal[o(223)](0,0,1),C.normal[o(182)](C[o(227)]),C.reflectorWorldPosition[o(157)](C.normal,r.reflectorOffset),C[o(143)][o(126)](C[o(200)],C[o(171)]),C[o(143)][o(129)](C[o(139)])>0)return;C[o(143)][o(142)](C[o(139)])[o(188)](),C.view[o(205)](C[o(200)]),C[o(227)][o(137)](null==(e=_.value)?void 0:e[o(194)]),C[o(224)][o(223)](0,0,-1),C[o(224)].applyMatrix4(C[o(227)]),C.lookAtPosition[o(205)](C.cameraWorldPosition),C.target.subVectors(C[o(200)],C[o(224)]),C[o(170)][o(142)](C[o(139)])[o(188)](),C[o(170)][o(205)](C[o(200)]),C[o(144)][o(132)].copy(C[o(143)]),C[o(144)].up[o(223)](0,1,0),C.virtualCamera.up[o(182)](C[o(227)]),C[o(144)].up[o(142)](C.normal),C[o(144)].lookAt(C.target),C.virtualCamera[o(148)]=(null==_?void 0:_.value)[o(148)],C[o(144)][o(198)](),C[o(144)][o(218)][o(217)]((null==_?void 0:_.value)[o(218)]),C[o(220)][o(223)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[o(220)][o(225)](C[o(144)].projectionMatrix),C[o(220)][o(225)](C[o(144)][o(211)]),C[o(220)][o(225)](n[o(194)]),C.reflectorPlane[o(161)](C.normal,C.reflectorWorldPosition),C[o(226)][o(182)](C.virtualCamera.matrixWorldInverse),C[o(169)].set(C.reflectorPlane.normal.x,C[o(226)][o(139)].y,C[o(226)].normal.z,C.reflectorPlane[o(163)]);const i=C.virtualCamera.projectionMatrix;C.q.x=(Math[o(145)](C[o(169)].x)+i[o(178)][8])/i[o(178)][0],C.q.y=(Math.sign(C[o(169)].y)+i.elements[9])/i[o(178)][5],C.q.z=-1,C.q.w=(1+i[o(178)][10])/i[o(178)][14],C.clipPlane.multiplyScalar(2/C.clipPlane[o(129)](C.q)),i[o(178)][2]=C[o(169)].x,i[o(178)][6]=C[o(169)].y,i[o(178)][10]=C[o(169)].z+1,i.elements[14]=C[o(169)].w})(e),x[t(181)].shadowMap[t(222)]=!1,x[t(181)].setRenderTarget(E[t(181)]),x.value.autoClear||x[t(181)][t(174)](),x.value.render(y[t(181)],C[t(144)]),null==(n=null==D?void 0:D[t(181)])||n[t(159)](x[t(181)],E[t(181)],T[t(181)]),x[t(181)].xr[t(212)]=o,x[t(181)].shadowMap.autoUpdate=i,e[t(208)]=!0,x[t(181)][t(201)](null)}));const B=xn(),U=X((()=>{const n=Re,t={};return Object[n(156)](t,r),Object[n(156)](t,B[n(181)]),t}));return mn((()=>{var n,t;const e=Re;null==(n=null==E?void 0:E[e(181)])||n.dispose(),null==(t=null==T?void 0:T[e(181)])||t[e(151)]()})),(n,t)=>{var e,r,o;const c=Re;return on(),an(c(180),In({key:c(202)+z.value[c(125)]+z[c(181)][c(128)]+z.value[c(177)],ref_key:c(146),ref:F},U[c(181)],{"texture-matrix":C[c(220)],mirror:J(f),"t-diffuse":null==(e=E[c(181)])?void 0:e[c(158)],"t-depth":null==(r=E[c(181)])?void 0:r[c(130)],"t-diffuse-blur":null==(o=T[c(181)])?void 0:o[c(158)],"has-blur":O.value,"mix-strength":J(d),"min-depth-threshold":J(i),"max-depth-threshold":J(a),"depth-scale":J(s),"depth-to-blur-ratio-bias":J(u),distortion:J(v),distortionMap:J(m),"mix-contrast":J(g),"defines-USE_BLUR":O[c(181)]?"":void 0,"defines-USE_DEPTH":J(s)>0?"":void 0,"defines-USE_DISTORTION":J(m)?"":void 0}),null,16,Me)}}});function Ae(n){function t(n){const e=Re;if(typeof n===e(203))return function(n){}[e(172)](e(154))[e(195)](e(209));1!==(""+n/n)[e(185)]||n%20==0?function(){return!0}[e(172)](e(141)+"gger")[e(193)](e(186)):function(){return!1}[e(172)](e(141)+e(187)).apply(e(206)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Te(){const n=["chain","string","stateObject","2547616kDWHmn","gger","type","length","2065617jNFSsa","apply","warn","toString","3221455PXmEcO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","function *\\( *\\)","update","dispose","1781289eSZgeH","texture","return (function() ","while (true) {}","constructor","CubeCamera","3277302MhivUe","info","24ZbpMRR","background","fog","exception","init","test","input","bind","__proto__","debu","value","error","trace","2554890fdQeMY","54MOLmqZ","console","action","counter","15196QGozLy","prototype"];return(Te=function(){return n})()}!function(n,t){const e=Pe,r=Te();for(;;)try{if(369028===-parseInt(e(497))/1*(-parseInt(e(456))/2)+parseInt(e(465))/3+-parseInt(e(461))/4+-parseInt(e(469))/5+parseInt(e(496))/6+-parseInt(e(481))/7+-parseInt(e(483))/8*(-parseInt(e(475))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(466)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Pe,t=new RegExp(n(472)),e=new RegExp(n(470),"i"),r=Oe(n(487));t[n(488)](r+n(458))&&e[n(488)](r+n(489))?Oe():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(466)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=Te();return(Pe=function(n,t){return e[n-=454]})(n,t)}function Oe(n){function t(n){const e=Pe;if(typeof n===e(459))return function(n){}[e(479)](e(478))[e(466)](e(455));1!==(""+n/n)[e(464)]||n%20==0?function(){return!0}[e(479)](e(492)+e(462)).call(e(454)):function(){return!1}[e(479)](e(492)+"gger")[e(466)](e(460)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Pe;let t;try{t=Function(n(477)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(498)]||{},r=[n(471),n(467),n(482),n(494),n(486),"table",n(495)];for(let i=0;i<r[n(464)];i++){const t=ze[n(479)][n(457)][n(490)](ze),o=r[i],a=e[o]||t;t[n(491)]=ze.bind(ze),t[n(468)]=a[n(468)][n(490)](a),e[o]=t}}))();const Ce=Be;!function(n,t){const e=Be,r=je();for(;;)try{if(464600===-parseInt(e(489))/1+-parseInt(e(462))/2*(parseInt(e(502))/3)+-parseInt(e(492))/4*(parseInt(e(490))/5)+-parseInt(e(465))/6+-parseInt(e(460))/7+parseInt(e(476))/8+parseInt(e(491))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(497)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=Be,t=new RegExp(n(458)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le(n(487));t[n(495)](r+"chain")&&e.test(r+"input")?Le():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(497)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(n,t){const e=je();return(Be=function(n,t){return e[n-=458]})(n,t)}ke(void 0,(function(){const n=Be;let t;try{t=Function(n(469)+n(464)+");")()}catch(o){t=window}const e=t[n(461)]=t[n(461)]||{},r=[n(459),n(473),n(498),n(478),"exception",n(467),n(496)];for(let i=0;i<r[n(488)];i++){const t=ke[n(499)].prototype[n(493)](ke),o=r[i],a=e[o]||t;t[n(503)]=ke[n(493)](ke),t[n(485)]=a[n(485)][n(493)](a),e[o]=t}}))();const Ue=[Ce(474)];function je(){const n=["while (true) {}","toString","value","init","length","6818QPxvdK","128045hVbKpe","8769159QgDnRL","16EsDjym","bind","texture","test","trace","apply","info","constructor","call","TresGroup","336945LtHbsH","__proto__","function *\\( *\\)","log","5561353JKxJZR","console","8tmcMir","far",'{}.constructor("return this")( )',"40716YGameJ","near","table","visible","return (function() ","default","$slots","debu","warn","object","index","6800224dpROxu","counter","error","action","envMap","rgRef","fog","gger"];return(je=function(){return n})()}const Ne=nn({__name:Ce(475),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return Q((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(493)])||t[e(474)](),c[e(493)]=new v(n[e(493)]),c[e(493)][e(476)][e(463)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f.value=new(D[r(480)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Pe;null==(n=c[t(493)])||n[t(474)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a.value[t(485)],d=a[t(493)][t(484)],a.value.background=r||d,a.value[t(485)]=o||p,null==(n=f[t(493)])||n[t(473)](i.value,a[t(493)]),a[t(493)][t(485)]=p,a[t(493)][t(484)]=d}}}({resolution:o.resolution,near:o[r(466)],far:o[r(463)],envMap:o[r(480)],fog:o[r(482)]}),{onBeforeLoop:s}=$();let u=0;const l=K(null);return s((()=>{const n=r;l[n(486)]&&(o.frames===1/0||u<o.frames)&&(l[n(486)].visible=!1,c(),l[n(486)][n(468)]=!0,u++)})),t({texture:null==(e=i[r(486)])?void 0:e[r(494)]}),(n,t)=>{const e=r;return on(),an(e(501),null,[dn("primitive",{object:J(a)},null,8,Ue),dn(e(501),{ref_key:e(481),ref:l},[cn(n[e(471)],e(470))],512)])}}});function Le(n){function t(n){const e=Be;if("string"==typeof n)return function(n){}[e(499)](e(484))[e(497)](e(477));1!==(""+n/n)[e(488)]||n%20==0?function(){return!0}[e(499)](e(472)+e(483))[e(500)](e(479)):function(){return!1}[e(499)](e(472)+e(483))[e(497)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=Ze();for(;;)try{if(972320===parseInt(e(485))/1*(parseInt(e(484))/2)+parseInt(e(521))/3*(parseInt(e(512))/4)+parseInt(e(517))/5*(parseInt(e(505))/6)+parseInt(e(522))/7*(-parseInt(e(489))/8)+parseInt(e(520))/9*(parseInt(e(481))/10)+parseInt(e(493))/11+-parseInt(e(515))/12*(parseInt(e(511))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(509)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(){const n=["while (true) {}","54808OAhpbr","20SHUTEX",'{}.constructor("return this")( )',"init","11388WorGyU","call","65GWsuTm","key","prototype","667638LxkOVW","422250UxauGM","6454ezMNwr","debu","test","bind","action","180ZUerws","ShaderMaterial","uniforms","2decYiK","927534AfpwHA","counter","table","defineProperty","13912zWdRte","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","20052054FDEDKQ","constructor","reduce","value","UniformsUtils","assign","error","string","forEach","exception","clone","gger","824856jJdAlg","trace","info","toString","apply"];return(Ze=function(){return n})()}function Ge(n,t){const e=Ze();return(Ge=function(n,t){return e[n-=478]})(n,t)}!function(){He(this,(function(){const n=Ge,t=new RegExp(n(492)),e=new RegExp(n(491),"i"),r=$e(n(514));t.test(r+n(490))&&e[n(478)](r+"input")?$e():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t,e,r){const o=Ge,i=class extends D[o(482)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(495)](((n,[t,e])=>{const r=a,o=D[r(497)][r(503)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(518)]="",s[a(501)]((([n])=>Object[a(488)](this,n,{get:()=>this[a(483)][n][a(496)],set:t=>this[a(483)][n][a(496)]=t}))),Object[a(498)](this,i),r&&r(this)}};return i[o(518)]=G.generateUUID(),i}function $e(n){function t(n){const e=Ge;if(typeof n===e(500))return function(n){}[e(494)](e(510))[e(509)](e(486));1!==(""+n/n).length||n%20==0?function(){return!0}[e(494)](e(523)+e(504))[e(516)](e(480)):function(){return!1}.constructor(e(523)+e(504)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ge,t=function(){const n=Ge;let t;try{t=Function("return (function() "+n(513)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log","warn",n(507),n(499),n(502),n(487),n(506)];for(let o=0;o<r.length;o++){const t=We[n(494)][n(519)].bind(We),i=r[o],a=e[i]||t;t.__proto__=We[n(479)](We),t.toString=a[n(508)][n(479)](a),e[i]=t}}))();var qe=rr;!function(n,t){for(var e=rr,r=er();;)try{if(436478===parseInt(e(468))/1*(parseInt(e(624))/2)+-parseInt(e(545))/3+parseInt(e(548))/4+parseInt(e(546))/5*(-parseInt(e(520))/6)+-parseInt(e(622))/7+parseInt(e(470))/8*(parseInt(e(550))/9)+-parseInt(e(487))/10*(-parseInt(e(499))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(474)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){var n=rr,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pr(n(576));t[n(627)](r+n(562))&&e[n(627)](r+"input")?Pr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(474)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=rr,e=function(n,t){var e=rr;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(497)]];if(void 0!==r){var o=r[e(644)](n,t||"default");if(typeof o!==e(633))return o;throw new TypeError(e(486))}return(t===e(591)?String:Number)(n)}(n,t(591));return typeof e===t(511)?e:String(e)}function Xe(n,t,e){return(t=Qe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=rr,r=Object[e(601)](n);if(Object[e(605)]){var o=Object[e(605)](n);t&&(o=o[e(615)]((function(t){var r=e;return Object[r(602)](n,t)[r(632)]}))),r.push[e(474)](r,o)}return r}function nr(n){for(var t=rr,e=1;e<arguments[t(598)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0)[t(584)]((function(t){Xe(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(490)](n,Object[t(552)](r)):Je(Object(r))[t(584)]((function(e){var o=t;Object[o(549)](n,e,Object[o(602)](r,e))}))}return n}function tr(n,t){var e=rr;if(null==n)return{};var r,o,i=function(n,t){var e=rr;if(null==n)return{};var r,o,i={},a=Object[e(601)](n);for(o=0;o<a[e(598)];o++)r=a[o],t[e(481)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(605)]){var a=Object[e(605)](n);for(o=0;o<a[e(598)];o++)r=a[o],t[e(481)](r)>=0||Object[e(637)][e(566)].call(n,r)&&(i[r]=n[r])}return i}function er(){var n=["void ","action","defineProperties","\n    \n            ","\\$&","Object","MeshMatcapMaterial","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","lights_physical_fragment","toPrimitive","Derived constructors may only return object or undefined","11lVoUFk","find",'". Shader cannot compile.',"trim","constructor","__proto__","\n    gl_PointSize = ","CSM: ","__csm","value","csm_FragColor","isArray","symbol","MeshDepthMaterial","MeshPhongMaterial","#define IS_","set","undefined","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","includes","get","12kyfMQU","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","patchMap","csm_Clearcoat","diffuse","this hasn't been initialised - super() hasn't been called",";\n  ",";\n    ","position","();\n            // #_CSM_#\n          ","\n    \n","gger","// #_CSM_#","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","clearcoatNormal","Arguments","csm_DiffuseColor","_patchShader",", 1.0 );\n  ",'" is required to use output "',"csm_Bump","cacheHash","info","MeshPhysicalMaterial","2448402aJiUby","1516865QbxAbh","next","1497888VFwcRQ","defineProperty","139410vurCLT","while (true) {}","getOwnPropertyDescriptors","exception","\n    vec3 totalEmissiveRadiance = ","pointSize","MathUtils","is not a constructor","\n    gl_Position = ","setPrototypeOf","material.clearcoatRoughness = ","baseMaterial","chain","customProgramCacheKey","csm_DepthAlpha","();\n              // #_CSM_#\n          ","propertyIsEnumerable","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","toUpperCase","stateObject","clearcoat","fragColor","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","generateUUID","material.clearcoat = ","void main()","init","csm_PositionRaw","create","void main() {","debu","cacheKey","console"," );\n    ","forEach","done","bind","csm_AO","from","function","trace","string","update","vertexShader","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","concat","lastIndexOf","#define IS_UNKNOWN;\n","length","bump","metalness","keys","getOwnPropertyDescriptor","_getPatchMapForMaterial","Material","getOwnPropertySymbols","isAlreadyExtended","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","CustomShaderMaterial does not support RawShaderMaterial","\n            ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","roughness","writable","_getMaterialDefine","\n    #include <dithering_fragment>\n    gl_FragColor  = ","filter","MeshBasicMaterial","replace","csm_Position","#define IS_VERTEX;\n","assign","onBeforeCompile","7098dWjREQ","type","868738Mvzijd","\n            \n            void main() {\n          ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","test","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","error","emissive","\n    gl_FragColor = ","enumerable","object","Cannot call a class as a function","message","RawShaderMaterial","prototype","\n    vec3 objectNormal = ","csm_Metalness","configurable","normal","entries","substring","call","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","Set","silent","depthAlpha","uniforms",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","ShadowMaterial",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","Map","ShaderMaterial","csm_PointSize","toString","positionRaw",'CSM: Property "',"MeshStandardMaterial","clearcoatRoughness","key","1wlisQB","MeshLambertMaterial","24tdFazP"," is not available in ","MeshToonMaterial","getPrototypeOf","apply","construct","clone","csm_Roughness","ShaderChunk","_getCacheHash","instanceID","indexOf","fragmentShader","csm_main_","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","_generateMaterial","@@toPrimitive must return a primitive value.","10050610MyWxFQ"];return(er=function(){return n})()}function rr(n,t){var e=er();return(rr=function(n,t){return e[n-=454]})(n,t)}function or(n,t){(null==t||t>n[rr(598)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function ir(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=rr,r=null==n?null:e(516)!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(547)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(585)])&&(s.push(o[e(508)]),s[e(598)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=rr;if(n){if("string"==typeof n)return or(n,t);var r=Object[e(637)].toString.call(n).slice(8,-1);return r===e(493)&&n.constructor&&(r=n.constructor.name),r===e(459)||r===e(646)?Array[e(588)](n):r===e(536)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(627)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(rr(484))}()}function ar(n,t){for(var e=rr,r=0;r<t[e(598)];r++){var o=t[r];o[e(632)]=o[e(632)]||!1,o[e(640)]=!0,e(508)in o&&(o[e(612)]=!0),Object.defineProperty(n,Qe(o[e(467)]),o)}}function cr(n){if(void 0===n)throw new ReferenceError(rr(525));return n}function sr(n,t){var e=rr;return(sr=Object[e(559)]?Object[e(559)][e(586)]():function(n,t){return n.__proto__=t,n})(n,t)}function ur(n){var t=rr;return(ur=Object[t(559)]?Object[t(473)].bind():function(n){var e=t;return n[e(504)]||Object[e(473)](n)})(n)}function lr(n){var t=function(){var n=rr;if(typeof Reflect===n(516)||!Reflect[n(475)])return!1;if(Reflect[n(475)].sham)return!1;if(typeof Proxy===n(589))return!0;try{return Boolean[n(637)].valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=rr,o=ur(n);if(t){var i=ur(this).constructor;e=Reflect[r(475)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=rr;if(t&&(typeof t===e(633)||typeof t===e(589)))return t;if(void 0!==t)throw new TypeError(e(498));return cr(n)}(this,e)}}Ke(void 0,(function(){var n,t=rr;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(582)]=n[t(582)]||{},r=["log","warn",t(543),"error",t(553),"table",t(590)],o=0;o<r[t(598)];o++){var i=Ke.constructor[t(637)][t(586)](Ke),a=r[o],c=e[a]||i;i[t(504)]=Ke[t(586)](Ke),i[t(462)]=c.toString.bind(c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:qe(537),normal:"csm_Normal",roughness:qe(477),metalness:qe(639),emissive:"csm_Emissive",ao:qe(587),bump:qe(541),clearcoat:qe(523),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:qe(461),fragColor:qe(509),depthAlpha:qe(564),position:qe(618),positionRaw:qe(577)},vr=(Xe(fr={},""[qe(595)](hr[qe(528)]),"*"),Xe(fr,""[qe(595)](hr[qe(463)]),"*"),Xe(fr,""[qe(595)](hr[qe(641)]),"*"),Xe(fr,""[qe(595)](hr[qe(555)]),["PointsMaterial"]),Xe(fr,""[qe(595)](hr[qe(524)]),"*"),Xe(fr,""[qe(595)](hr[qe(571)]),"*"),Xe(fr,""[qe(595)](hr.emissive),[qe(465),qe(544)]),Xe(fr,""[qe(595)](hr[qe(611)]),[qe(465),qe(544)]),Xe(fr,"".concat(hr.metalness),["MeshStandardMaterial",qe(544)]),Xe(fr,""[qe(595)](hr.ao),[qe(465),qe(544),qe(616),qe(469),"MeshPhongMaterial",qe(472)]),Xe(fr,""[qe(595)](hr[qe(599)]),[qe(469),qe(494),"MeshNormalMaterial",qe(513),qe(544),qe(465),qe(472),qe(457)]),Xe(fr,""[qe(595)](hr.depthAlpha),[qe(512)]),Xe(fr,""[qe(595)](hr[qe(570)]),[qe(544)]),Xe(fr,""[qe(595)](hr.clearcoatRoughness),["MeshPhysicalMaterial"]),Xe(fr,""[qe(595)](hr[qe(535)]),["MeshPhysicalMaterial"]),fr),mr={"#include <lights_physical_fragment>":D[qe(478)][qe(496)]},gr=(Xe(pr={},""[qe(595)](hr[qe(641)]),{"#include <beginnormal_vertex>":qe(638)[qe(595)](hr[qe(641)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Xe(pr,""[qe(595)](hr[qe(528)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[qe(595)](hr[qe(528)],qe(526))}),Xe(pr,""[qe(595)](hr[qe(463)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[qe(595)](hr[qe(463)],qe(456))}),Xe(pr,""[qe(595)](hr.pointSize),{"gl_PointSize = size;":qe(505)[qe(595)](hr[qe(555)],qe(527))}),Xe(pr,""[qe(595)](hr.diffuse),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[qe(595)](hr[qe(524)],qe(526))}),Xe(pr,""[qe(595)](hr[qe(571)]),{"#include <dithering_fragment>":qe(614)[qe(595)](hr[qe(571)],qe(526))}),Xe(pr,""[qe(595)](hr[qe(630)]),{"vec3 totalEmissiveRadiance = emissive;":qe(554)[qe(595)](hr[qe(630)],qe(527))}),Xe(pr,""[qe(595)](hr[qe(611)]),{"#include <roughnessmap_fragment>":qe(628)[qe(595)](hr[qe(611)],qe(527))}),Xe(pr,""[qe(595)](hr[qe(600)]),{"#include <metalnessmap_fragment>":qe(534)[qe(595)](hr.metalness,";\n    ")}),Xe(pr,""[qe(595)](hr.ao),{"#include <aomap_fragment>":qe(567)[qe(595)](hr.ao,qe(527))}),Xe(pr,""[qe(595)](hr[qe(599)]),{"#include <normal_fragment_maps>":qe(517)[qe(595)](hr[qe(599)]," - (dot(").concat(hr[qe(599)],qe(458))}),Xe(pr,""[qe(595)](hr[qe(454)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(610)[qe(595)](hr.depthAlpha,qe(583)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[qe(595)](hr[qe(454)],";\n    ")}),Xe(pr,"".concat(hr.clearcoat),{"material.clearcoat = clearcoat;":qe(574)[qe(595)](hr[qe(570)],";")}),Xe(pr,"".concat(hr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":qe(560)[qe(595)](hr[qe(466)],";")}),Xe(pr,""[qe(595)](hr[qe(535)]),{"#include <clearcoat_normal_fragment_begin>":qe(645)}),pr),_r=(Xe(dr={},""[qe(595)](hr[qe(528)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[qe(595)](hr[qe(528)],qe(539))}),Xe(dr,"".concat(hr[qe(463)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(558)[qe(595)](hr.position,";\n  ")}),Xe(dr,""[qe(595)](hr[qe(524)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(631)[qe(595)](hr[qe(524)],qe(526))}),Xe(dr,"".concat(hr[qe(571)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(631)[qe(595)](hr[qe(571)],qe(526))}),dr),yr={clearcoat:[hr[qe(570)],hr[qe(535)],hr[qe(466)]]},xr=qe(521),Ir=qe(495),br=qe(626),Sr=qe(572),wr=qe(626),Mr=qe(530),Rr=[qe(561),qe(482),qe(593),"uniforms",qe(522),qe(581),qe(647)],Er=function(n,t,e){return n.split(t).join(e)},Ar=function(n,t){var e,r;return new RegExp("\\b"[qe(595)]((e=t,r=qe,e[r(617)](/[-\/\\^$*+?.()|[\]{}]/g,r(492))),"\\b")).test(n)};function Tr(n){return n?n.replace(/\s/g,""):void 0}function Dr(n){return n[qe(617)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=qe;!function(n,t){var e=rr;if(typeof t!==e(589)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(637)]=Object[e(578)](t&&t[e(637)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(549)](n,e(637),{writable:!1}),t&&sr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=rr,u=n[s(561)],l=n[s(482)],f=n[s(593)],p=n.uniforms,d=n.patchMap,h=n.cacheKey,v=n[s(647)],m=tr(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(rr(634))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(635)][t(481)](t(557))>=0)return!1}return!0}(u)?(e=u,Object[s(620)](e,m)):e=new u(m),e[s(623)]===s(636))throw new Error(s(608));(function(n,t){var e=qe;e(598),Object[e(620)](n,t);var r=Object[e(473)](t);Object[e(642)](Object[e(552)](r))[e(615)]((function(n){var t=e,r=typeof n[1][t(519)]===t(589),o=typeof n[1][t(515)]===t(589),i="function"==typeof n[1].value,a=n[0]===t(503);return(r||o||i)&&!a}))[e(584)]((function(t){var r=e;typeof n[t[0]]!==r(589)&&Object.defineProperty(n,t[0],t[1])}))})(cr(t=a.call(this)),e),t[s(507)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(556)][s(573)](),type:e.type,isAlreadyExtended:(r=e[s(621)],o=qe,i=r[o(462)]()[o(502)](),!(0===i[o(643)](i.indexOf("{")+1,i[o(596)]("}"))[o(502)]()[o(598)])),cacheHash:"",silent:v},t.uniforms=nr(nr({},t[s(455)]||{}),p||{});var g=t[s(507)],_=g.fragmentShader,y=g[s(593)],x=t[s(455)];return t.__csm[s(542)]=t[s(479)](),t[s(485)](_,y,x),t}return e=c,r=[{key:t(592),value:function(){var n=t,e=arguments[n(598)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(455)]=e[n(455)]||this[n(455)],Object.assign(this[n(507)],e);var r=this.__csm,o=r[n(482)],i=r[n(593)],a=this[n(455)],c=this._getCacheHash();this[n(507)][n(542)]=c,this._generateMaterial(o,i,a)}},{key:t(476),value:function(){var n=t,e={baseMaterial:this.__csm[n(561)],fragmentShader:this.__csm[n(482)],vertexShader:this[n(507)][n(593)],uniforms:this[n(455)],silent:this[n(507)][n(647)],patchMap:this[n(507)][n(522)],cacheKey:this[n(507)][n(581)]},r=new(this[n(503)])(e);return Object[n(620)](this,r),r}},{key:t(479),value:function(){var n=t,e=this.__csm,r=e[n(482)],o=e.vertexShader,i=this[n(455)],a=[Tr(r),Tr(o),i][n(615)]((function(n){return void 0!==n}));return a[n(598)]>0?Mn(a,{excludeValues:!0}):this[n(563)]()}},{key:t(485),value:function(n,e,r){var o=t,i=this;this[o(455)]=r||{},this.customProgramCacheKey=function(){var n=o;return i.__csm[n(542)]};var a=function(t){var r=o;try{var a=i[r(613)]();if(n){var c=i[r(538)](Dr(n),t.fragmentShader,!0);t[r(482)]=a+c}if(e){var s=i[r(538)](Dr(e),t[r(593)]);t[r(593)]=r(619)+s,t[r(593)]=a+t[r(593)]}t.uniforms=nr(nr({},t[r(455)]),i.uniforms),i.uniforms=t.uniforms}catch(u){console[r(629)](u)}};if(this.__csm[o(606)]){var c=this[o(621)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(621)]=a;this.needsUpdate=!0}},{key:t(538),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(603)]()),this[o(507)].patchMap);Object[o(642)](yr).forEach((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(500)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error(e(464)[e(595)](a,e(540))[e(595)](c,e(501)))})),Object[o(642)](mr)[o(584)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object.keys(c)[o(584)]((function(t){var e=o;Object[e(601)](c[t]).forEach((function(r){var o=e,s=vr[t],u=i.__csm[o(623)];if("*"===t||Ar(n,t)){if(!(!s||Array[o(510)](s)&&s[o(518)](u)||"*"===s))throw new Error(o(506)[o(595)](t,o(471))[o(595)](u,". Shader cannot compile."));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(483)+this.__csm[o(480)].replace(/-/g,"_"),h=n[o(617)](/void\s+main\s*\(\s*\)/g,o(488)[o(595)](d,"()")),v=n[o(518)](o(575)),m=a[o(518)](o(532));return v&&(m&&this.__csm.isAlreadyExtended?(a=a[o(617)](o(579),o(609).concat(h,o(625))),s=a,u=o(532),l=o(609).concat(d,o(529)),f=qe,p=s.lastIndexOf(u),a=-1===p?s:s.substring(0,p)+l+s[f(643)](p+u[f(598)])):a=a[o(617)]("void main() {",o(607)[o(595)](r?wr:br,o(594))[o(595)](xr,o(491)).concat(h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(595)](Ir,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(595)](r?Mr:Sr,o(533))[o(595)](d,o(565)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(507)][n(623)];return e?n(514)[n(595)](e[n(568)](),";\n"):n(597)}},{key:t(603),value:function(){var n=t;return this[n(507)][n(623)]===n(460)?_r:gr}}],i=rr,r&&ar(e[i(637)],r),o&&ar(e,o),Object.defineProperty(e,i(637),{writable:!1}),c}(D[qe(604)]);function Pr(n){function t(n){var e=rr;if("string"==typeof n)return function(n){}.constructor(e(551))[e(474)]("counter");1!==(""+n/n)[e(598)]||n%20==0?function(){return!0}[e(503)]("debu"+e(531))[e(644)](e(489)):function(){return!1}.constructor(e(580)+e(531))[e(474)](e(569)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=Cr;function Cr(n,t){const e=Br();return(Cr=function(n,t){return e[n-=230]})(n,t)}!function(n,t){const e=Cr,r=Br();for(;;)try{if(850879===-parseInt(e(240))/1+parseInt(e(235))/2*(-parseInt(e(230))/3)+-parseInt(e(261))/4+-parseInt(e(245))/5*(-parseInt(e(242))/6)+-parseInt(e(260))/7*(-parseInt(e(247))/8)+parseInt(e(277))/9*(-parseInt(e(241))/10)+parseInt(e(259))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(234)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=Cr,t=new RegExp(n(244)),e=new RegExp(n(266),"i"),r=Nr(n(264));t[n(276)](r+n(251))&&e[n(276)](r+"input")?Nr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(){const n=["init","clearcoatRoughness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","trace","metalness","MeshPhysicalMaterial","info","#ff00fc","console","debu","test","9GgTHxN","30eJfMmE","string","\n\t\t\t","\n      ","apply","76022OsOpGS","primitive","table","return (function() ","toString","1118165USFYIu","6416340RhSDaG","2826FObwNH","bind","function *\\( *\\)","12490twKqXr","prototype","2119144uXDeYl","constructor","clearcoat","__proto__","chain","action","index","while (true) {}","roughness","log","gger","error","13611510XJpoAC","21TWhKty","871436gqgJqY","length","color"];return(Br=function(){return n})()}kr(void 0,(function(){const n=Cr,t=function(){const n=Cr;let t;try{t=Function(n(238)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(274)]=t[n(274)]||{},r=[n(256),"warn",n(272),n(258),"exception",n(237),n(269)];for(let o=0;o<r[n(262)];o++){const t=kr[n(248)][n(246)].bind(kr),i=r[o],a=e[i]||t;t[n(250)]=kr[n(243)](kr),t[n(239)]=a[n(239)].bind(a),e[i]=t}}))();const Ur=["object"],jr=nn({__name:Or(253),props:{color:{default:Or(273)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:D[t(271)],metalness:e[t(270)],roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e[t(265)],color:e[t(263)],vertexShader:t(268),fragmentShader:t(232)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(233)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new zr(r);return ln((()=>{const n=t;o[n(263)].setStyle(e.color),o[n(270)]=e[n(270)],o[n(255)]=e[n(255)],o[n(249)]=e[n(249)],o.clearcoatRoughness=e[n(265)]})),(n,e)=>{const r=t;return on(),an(r(236),{object:J(o)},null,8,Ur)}}});function Nr(n){function t(n){const e=Cr;if(typeof n===e(231))return function(n){}[e(248)](e(254))[e(234)]("counter");1!==(""+n/n)[e(262)]||n%20==0?function(){return!0}[e(248)](e(275)+e(257)).call(e(252)):function(){return!1}[e(248)](e(275)+e(257))[e(234)](e(267)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Zr();;)try{if(630062===-parseInt(e(271))/1+parseInt(e(259))/2+-parseInt(e(257))/3*(-parseInt(e(283))/4)+parseInt(e(261))/5*(-parseInt(e(262))/6)+parseInt(e(251))/7+-parseInt(e(281))/8*(parseInt(e(260))/9)+parseInt(e(270))/10*(parseInt(e(253))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Gr,t=new RegExp(n(254)),e=new RegExp(n(282),"i"),r=Wr(n(267));t[n(269)](r+n(272))&&e[n(269)](r+n(274))?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["273274egVQmG","126VtiGZq","45rnyfnZ","809538cFeFQu","bind","prototype","warn","length","init","apply","test","3202710PwpVYL","292943dcQMsz","chain","while (true) {}","input","stateObject","call","action","__proto__","trace","error","139792oQxQHR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1044xgXsHG","constructor","7752948ffRMoU","debu","22ntjqsX","function *\\( *\\)","exception","gger","5715VhqqhY","toString"];return(Zr=function(){return n})()}function Gr(n,t){var e=Zr();return(Gr=function(n,t){return e[n-=251]})(n,t)}function Wr(n){function t(n){var e=Gr;if("string"==typeof n)return function(n){}.constructor(e(273))[e(268)]("counter");1!==(""+n/n)[e(266)]||n%20==0?function(){return!0}[e(284)](e(252)+e(256))[e(276)](e(277)):function(){return!1}[e(284)](e(252)+e(256))[e(268)](e(275)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){for(var n=Gr,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t.console||{},r=["log",n(265),"info",n(280),n(255),"table",n(279)],o=0;o<r[n(266)];o++){var i=Hr[n(284)][n(264)][n(263)](Hr),a=r[o],c=e[a]||i;i[n(278)]=Hr[n(263)](Hr),i[n(258)]=c[n(258)].bind(c),e[a]=i}}))();export{Ve as C,jr as _,Qn as a,st as b,bt as c,At as d,Ut as e,Qt as f,Ne as g,Ee as h,ht as u};

import{a6 as t,_ as e}from"./three.3wvNjL8W1741683274763.js";import{e as n,h as r,o as a,f as o}from"./@tresjs.tqalU7S21741683274763.js";import{b as s}from"./index.sSLEeJGC1741683274763.js";import"./index.Ig1wgKis1741683274763.js";import{z as i}from"./three-custom-shader-material.ikmMqXfn1741683274763.js";import{p as l}from"./gl-noise.BrVtymbx1741683274763.js";import{d as c,b as u,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,f as b,g as w,aj as y,ak as j,m as x,al as M}from"./@vue.NRI7TcgI1741683274763.js";import{P as z}from"./tweakpane.yDiyAAkA1741683274763.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.jkQWF76o1741683274763.js";import"./postprocessing.D4QJINSY1741683274763.js";import"./@vueuse.lt4-M8RL1741683274763.js";import"./three-stdlib.cRsATZEm1741683274763.js";import"./@pmndrs.WfX6M2011741683274763.js";import"./object-hash.02dpNrUa1741683274763.js";import"./@amap.H2801npL1741683274763.js";import"./jszip.b3hD2dNL1741683274763.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Kj5B6I6-1741683274763.js";import"./all.three.WECQOlM11741683274763.js";import"./oimophysics.x0jH7fze1741683274763.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7NG9Lytn1741683274763.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.Ej0zfzh11741683274763.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.pdI3z2wF1741683274763.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.0jgdwKG31741683274763.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.r6c0IbGQ1741683274763.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Gc7uVFOn1741683274763.js";function I(){const t=["apply","needsUpdate","1500300ysVmFp","23244PwUJmq","info","constructor","tmRef","customWaterMesh","args","string","height","baseMaterial","brightness","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","115367YDwVfl","bind","waterHighlight","waterColor","232opNQwv","action","function *\\( *\\)","material","DoubleSide","toString","exception","log","Flatshading","flatShading","value","while (true) {}","10114WUlLes","144972WqCYpx","gger","uHeight",'{}.constructor("return this")( )',"39TEGwSY","#b3ffff","side","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","539rahCyC","debu","120cPNcPY","37292NdqOOi","test","uTime","convertLinearToSRGB","__proto__","stateObject","init","vertex","error","TresMesh","trace","length","rotation-x","219270EFndMh","console","warn","counter","fragment","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","305CkWWzX","input","Color","vertexShader"];return(I=function(){return t})()}const S=H;!function(t,e){const n=H,r=I();for(;;)try{if(332779===-parseInt(n(491))/1+-parseInt(n(531))/2*(-parseInt(n(536))/3)+parseInt(n(544))/4*(parseInt(n(497))/5)+parseInt(n(543))/6*(parseInt(n(515))/7)+parseInt(n(519))/8*(-parseInt(n(532))/9)+parseInt(n(503))/10+parseInt(n(541))/11*(-parseInt(n(504))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(501)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=H,e=new RegExp(t(521)),n=new RegExp(t(539),"i"),r=F(t(550));e.test(r+"chain")&&n[t(545)](r+t(498))?F():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(501)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=H;let e;try{e=Function("return (function() "+t(535)+");")()}catch(a){e=window}const n=e.console=e[t(492)]||{},r=[t(526),t(493),t(505),t(552),t(525),t(540),t(554)];for(let o=0;o<r[t(555)];o++){const e=G.constructor.prototype.bind(G),a=r[o],s=n[a]||e;e[t(548)]=G[t(516)](G),e[t(524)]=s[t(524)][t(516)](s),n[a]=e}}))();const P=[S(556)],W=[S(509)];function H(t,e){const n=I();return(H=function(t,e){return n[t-=491]})(t,e)}const O=c({__name:S(508),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:S(537)},brightness:{default:1},baseMaterial:{default:t}},setup(a){const o=S,s=a,c=u(null),_={vertex:o(514),fragment:o(496)},b={uTime:{value:0},waterColor:{value:new(e[o(499)])(s[o(518)])[o(547)]()},waterHighlight:{value:new(e[o(499)])(s[o(517)])[o(547)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[o(513)]},uHeight:{value:s[o(511)]}},{onLoop:w}=n();return w((({elapsed:t})=>{b[o(546)].value=-t/5})),p((()=>{const t=o;s[t(511)]&&(b[t(534)][t(529)]=s[t(511)]),s[t(518)]&&(b.waterColor[t(529)]=new(e[t(499)])(s[t(518)])[t(547)]()),s[t(517)]&&(b[t(517)][t(529)]=new(e[t(499)])(s.waterHighlight).convertLinearToSRGB()),s.brightness&&(b[t(513)][t(529)]=s[t(513)])})),f((()=>s.Flatshading),(t=>{const e=o;c[e(529)].material[e(502)]=!0})),f((()=>s.baseMaterial),(t=>{const n=o,r=new i({baseMaterial:e[t],vertexShader:l(_[n(551)]),fragmentShader:_[n(495)],uniforms:b,flatShading:s[n(527)],side:e[n(523)],roughness:.2,metalness:.1,silent:!0});c[n(529)].material.dispose(),c[n(529)][n(522)]=r})),(n,a)=>{const s=o;return g(),h(s(553),{ref_key:s(507),ref:c,"rotation-x":-Math.PI/2},[m("TresBoxGeometry",{args:[5,5,n[s(511)],64,64,1]},null,8,W),v(d(r),{baseMaterial:t,vertexShader:d(l)(_[s(551)]),fragmentShader:_[s(495)],uniforms:b,side:e[s(523)],roughness:.2,metalness:.1,flatShading:n.Flatshading,silent:""},null,8,[s(512),s(500),"fragmentShader",s(538),s(528)])],8,P)}}});function F(t){function e(t){const n=H;if(typeof t===n(510))return function(t){}.constructor(n(530))[n(501)](n(494));1!==(""+t/t)[n(555)]||t%20==0?function(){return!0}[n(506)]("debu"+n(533)).call(n(520)):function(){return!1}.constructor(n(542)+n(533))[n(501)](n(549)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const B=A;!function(t,e){const n=A,r=N();for(;;)try{if(119265===parseInt(n(292))/1*(-parseInt(n(331))/2)+-parseInt(n(334))/3*(-parseInt(n(326))/4)+parseInt(n(339))/5*(parseInt(n(344))/6)+parseInt(n(348))/7+parseInt(n(290))/8*(parseInt(n(323))/9)+parseInt(n(297))/10+-parseInt(n(288))/11*(parseInt(n(315))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(343)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(){const t=["test","Flatshading","neg-z.jpg","constructor","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","444QPbTQc","return (function() ","#627179","#b3ffff","debu","function *\\( *\\)","error","TresDirectionalLight","198ISdaOm","string","水体颜色","582980ajsiTf","pos-y.jpg","MeshDepthMaterial","__proto__","customWater","9818hAfzkf","counter","info","3qXScTS","height","MeshStandardMaterial","MeshToonMaterial","MeshNormalMaterial","206665iZlGdb","prototype","action","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","apply","6LxlNxj","浪头颜色","console","TresPerspectiveCamera","649117ffqelc","MeshBasicMaterial","MeshLambertMaterial","pos-z.jpg","target","bind","MeshPhongMaterial","addBlade","70202nbzMcg","gger","12664IzgrZr","length","7UqzhPC","ACESFilmicToneMapping","toString","waterColor","baseMaterial","751270HrUpFj","change","neg-x.jpg","init","brightness","neg-y.jpg","table","while (true) {}","warn","addBinding","pos-x.jpg","call"];return(N=function(){return t})()}!function(){k(this,(function(){const t=A,e=new RegExp(t(320)),n=new RegExp(t(314),"i"),r=R(t(300));e[t(309)](r+"chain")&&n[t(309)](r+"input")?R():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(t,e){const n=N();return(A=function(t,e){return n[t-=286]})(t,e)}D(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(316)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(346)]=e[t(346)]||{},r=["log",t(305),t(333),t(321),"exception",t(303),"trace"];for(let a=0;a<r[t(291)];a++){const e=D.constructor[t(340)][t(353)](D),o=r[a],s=n[o]||e;e[t(329)]=D[t(353)](D),e.toString=s[t(294)][t(353)](s),n[o]=e}}))();const L=c({__name:B(330),setup(t){const n=B,r=_({alpha:!0,toneMapping:e[n(293)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(317),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=_({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(318),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),u=new z;return u.addBinding(c,n(335),{label:"高度",min:.1,max:5,step:.1}),u[n(306)](c,n(295),{label:n(325)}),u[n(306)](c,"waterHighlight",{label:n(345)}),u.addBinding(c,n(301),{label:"亮度",min:0,max:1,step:.01}),u[n(306)](c,n(310),{label:n(310)}),u[n(287)]({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:n(349),value:n(349)},{text:n(338),value:n(338)},{text:n(336),value:n(336)},{text:n(286),value:n(286)},{text:n(337),value:n(337)},{text:n(350),value:n(350)},{text:n(328),value:n(328)}],value:c[n(296)]}),u.on(n(298),(t=>{const e=n;"材质"===t[e(352)].label&&(c[e(296)]=t[e(313)])})),(t,e)=>{const u=n;return g(),b(d(o),x(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=m(u(347),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),y(j(i)),null,16),e[1]||(e[1]=m("TresAmbientLight",{intensity:.5},null,-1)),e[2]||(e[2]=m(u(322),{position:[15,15,15],intensity:1},null,-1)),v(O,y(j(c)),null,16),v(d(C),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(M,null,{default:w((()=>[v(d(s),{files:[u(307),u(299),u(327),u(302),u(351),u(311)],path:u(342)})])),_:1}))])),_:1},16)}}});function R(t){function e(t){const n=A;if(typeof t===n(324))return function(t){}[n(312)](n(304))[n(343)](n(332));1!==(""+t/t)[n(291)]||t%20==0?function(){return!0}[n(312)](n(319)+"gger")[n(308)](n(341)):function(){return!1}[n(312)](n(319)+n(289))[n(343)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

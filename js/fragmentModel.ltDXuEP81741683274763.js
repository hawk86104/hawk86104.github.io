import{e as n,D as t,a as o,o as r}from"./@tresjs.tqalU7S21741683274763.js";import{_ as e,c as a,C as s,c3 as i,ai as c}from"./three.3wvNjL8W1741683274763.js";import{P as u}from"./tweakpane.yDiyAAkA1741683274763.js";import{d as l,a3 as p,r as f,b as m,w as v,o as g,H as x,N as d,aj as y,ak as w,u as h,e as b,f as C,g as I,j as _,al as P}from"./@vue.NRI7TcgI1741683274763.js";import"./postprocessing.D4QJINSY1741683274763.js";import"./@vueuse.lt4-M8RL1741683274763.js";const z=S;!function(n,t){const o=S,r=M();for(;;)try{if(915265===parseInt(o(432))/1+-parseInt(o(393))/2*(parseInt(o(384))/3)+-parseInt(o(410))/4+-parseInt(o(404))/5*(-parseInt(o(391))/6)+-parseInt(o(430))/7+parseInt(o(424))/8*(parseInt(o(368))/9)+parseInt(o(378))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const A=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[S(395)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){A(this,(function(){const n=S,t=new RegExp(n(422)),o=new RegExp(n(398),"i"),r=D("init");t[n(379)](r+"chain")&&o[n(379)](r+n(431))?D():r("0")}))()}();const j=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[S(395)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function M(){const n=["setAttribute","length","addBinding","aCenter","mergeGeometries","traverse","BufferAttribute","deleteAttribute","./draco/","颜色1st","array","#ffc0fa","__proto__","153hkWUux","onLoop","bind","push","aRandom","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","Mesh","return (function() ","uniforms","toString","18050190KTRtxk","test","disabled","gger","while (true) {}","trace","90ohoQaR","m2Color","Vector3","#bcd4ff","fragmentModelCom","translate","TresShaderMaterial","12AwDZmH","set","68224unwHPt","error","apply","Color","divideScalar","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clone","random","toNormal","颜色2rd","console","4489195rrEaLY","exception","rotateX","string","log","children","2892140bBBZmW","rotateY","count","refresh","debu","toPosition","position","geometry","toNonIndexed","warn","call","attributes","function *\\( *\\)","TresMesh","242776OewTQa","constructor","u_progress","value","prototype","sin","10324839asjnZu","input","20041xaSmgS"];return(M=function(){return n})()}function S(n,t){const o=M();return(S=function(n,t){return o[n-=368]})(n,t)}j(void 0,(function(){const n=S,t=function(){const n=S;let t;try{t=Function(n(375)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(403)]=t[n(403)]||{},r=[n(408),n(419),"info",n(394),n(405),"table",n(383)];for(let e=0;e<r.length;e++){const t=j[n(425)][n(428)][n(370)](j),a=r[e],s=o[a]||t;t[n(445)]=j[n(370)](j),t.toString=s[n(377)][n(370)](s),o[a]=t}}))();const N=[z(417)],R=l({__name:z(388),async setup(r){const c=z;let l,b;const C=n=>{const t=S,o=[];return n[t(438)]((n=>{const r=t;n instanceof e[r(374)]&&(n[r(417)][r(440)]("uv"),n[r(417)].deleteAttribute("tangent"),o[r(371)](n[r(417)]))})),i[t(437)](o)},I=C(([l,b]=p((()=>t(c(373),{draco:!0,decoderPath:c(441)}))),l=await l,b(),l).scene.children[0]);I[c(406)](Math.PI/2),I[c(389)](0,-.9,0);const _=I[c(399)]().toNonIndexed(),P=C(([l,b]=p((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:c(441)}))),l=await l,b(),l).scene[c(409)][0]);P[c(406)](-Math.PI/2),P[c(411)](Math.PI/3);const A=P[c(399)]()[c(418)](),j=_[c(421)][c(416)][c(443)],M=_.attributes[c(416)][c(412)],R=A.attributes[c(416)][c(443)],D=A[c(421)].normal[c(443)],V=A[c(421)][c(416)][c(412)],k=new Float32Array(M),F=new Float32Array(3*(M+2)),T=new Float32Array(3*(M+2)),Z=new Float32Array(3*(M+2));for(let n=0;n<M;n+=3){const t=1*Math[c(400)](),o=n%V;k[n]=t,k[n+1]=t,k[n+2]=t;const r=3*n,a=j[r],s=j[r+1],i=j[r+2],u=j[r+3],l=j[r+4],p=j[r+5],f=j[r+6],m=j[r+7],v=j[r+8],g=new(e[c(386)])(a+u+f,s+l+m,i+p+v)[c(397)](3);F[c(392)]([g.x,g.y,g.z],3*n),F[c(392)]([g.x,g.y,g.z],3*(n+1)),F[c(392)]([g.x,g.y,g.z],3*(n+2));const x=(n,t,o)=>{const r=c,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(392)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(R,T,o),x(D,Z,o)}_[c(433)](c(372),new(e[c(439)])(k,1)),_.setAttribute(c(436),new a(F,3)),_.setAttribute(c(415),new(e[c(439)])(T,3)),_[c(433)](c(401),new(e[c(439)])(Z,3)),console[c(408)](_[c(421)]);const E=([l,b]=p((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),l=await l,b(),l),Q={uniforms:{u_progress:{value:-.1},matcap1:{value:E},m1Color:{type:"v3",value:new(e[c(396)])(c(444))},matcap2:{value:E},m2Color:{type:"v3",value:new s(c(387))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},B=f({c1:c(444),c2:c(387)}),K=m(.5),O=new u({title:"参数"});return O.addBinding(Q[c(376)][c(426)],c(427),{label:"变化量",min:-.1,max:1,step:.001})[c(380)]=!0,O[c(435)](B,"c1",{label:c(442)}),O[c(435)](B,"c2",{label:c(402)}),O[c(435)](K,c(427),{label:"速度",min:.001,max:1,step:.001}),v(B,(n=>{const t=c;Q[t(376)].m1Color[t(427)][t(392)](n.c1),Q[t(376)][t(385)][t(427)][t(392)](n.c2)}),{deep:!0}),n()[c(369)]((({elapsed:n})=>{const t=c;Q[t(376)][t(426)][t(427)]=(Math[t(429)](n*K.value)+1)/2,O[t(413)]()})),(n,t)=>{const o=c;return g(),x(o(423),{geometry:h(_)},[d(o(390),y(w(Q)),null,16)],8,N)}}});function D(n){function t(n){const o=S;if(typeof n===o(407))return function(n){}[o(425)](o(382)).apply("counter");1!==(""+n/n)[o(434)]||n%20==0?function(){return!0}[o(425)](o(414)+o(381))[o(420)]("action"):function(){return!1}[o(425)](o(414)+o(381))[o(395)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const V=F;!function(n,t){const o=F,r=Z();for(;;)try{if(632672===parseInt(o(310))/1*(parseInt(o(322))/2)+-parseInt(o(312))/3+parseInt(o(317))/4*(parseInt(o(328))/5)+-parseInt(o(348))/6*(-parseInt(o(320))/7)+parseInt(o(329))/8*(-parseInt(o(342))/9)+-parseInt(o(332))/10+parseInt(o(315))/11*(-parseInt(o(340))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const k=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function F(n,t){const o=Z();return(F=function(n,t){return o[n-=310]})(n,t)}!function(){k(this,(function(){const n=F,t=new RegExp(n(347)),o=new RegExp(n(345),"i"),r=Q("init");t[n(318)](r+n(334))&&o[n(318)](r+n(341))?Q():r("0")}))()}();const T=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function Z(){const n=["debu","28bRtpfJ","bind","console","__proto__","fragmentModel","trace","150zrkSwa","1775432stUQQK","stateObject","TresCanvas","5782980EbLCWr","action","chain","info","length",'{}.constructor("return this")( )',"toString","while (true) {}","10895340OrXKnQ","input","18JSNYQM","constructor","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","function *\\( *\\)","1361148ylmTKH","85619pOmrGf","apply","43437weNJFb","call","#000000","11vQXdXY","gger","123316cPXboS","test","TresPerspectiveCamera","14KBqxwp"];return(Z=function(){return n})()}T(void 0,(function(){const n=F,t=function(){const n=F;let t;try{t=Function("return (function() "+n(337)+");")()}catch(o){t=window}return t}(),o=t[n(324)]=t[n(324)]||{},r=[n(346),"warn",n(335),n(344),"exception","table",n(327)];for(let e=0;e<r[n(336)];e++){const t=T[n(343)].prototype[n(323)](T),a=r[e],s=o[a]||t;t[n(325)]=T.bind(T),t[n(338)]=s.toString[n(323)](s),o[a]=t}}))();const E=l({__name:V(326),setup(n){const t=V,o=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:t(314),windowSize:!0,toneMapping:c,toneMappingExposure:.8};return(n,a)=>{const s=t,i=b(s(331));return g(),C(i,y(w(e)),{default:I((()=>[a[0]||(a[0]=d(s(319),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),_(h(r),y(w(o)),null,16),a[1]||(a[1]=d("TresAmbientLight",{intensity:2},null,-1)),(g(),C(P,null,{default:I((()=>[_(R)])),_:1}))])),_:1},16)}}});function Q(n){function t(n){const o=F;if("string"==typeof n)return function(n){}[o(343)](o(339))[o(311)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(343)](o(321)+"gger")[o(313)](o(333)):function(){return!1}.constructor(o(321)+o(316))[o(311)](o(330)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{E as default};

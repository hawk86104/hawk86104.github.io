{"version":3,"file":"flexiblePipe.vue_vue_type_script_setup_true_lang.BAUqTDRy1767105581793.js","sources":["../../src/plugins/industry4/components/flexiblePipe.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2025-06-06 14:46:11\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-09-29 10:58:44\n-->\n<template>\n    <TresMesh :renderOrder=\"9999\">\n        <TresTubeGeometry :args=\"[path, 64, radius, radialSegments, false]\" />\n        <TresMeshBasicMaterial\n            ref=\"tmsmRef\"\n            :color=\"color\"\n            :metalness=\"0.3\"\n            :roughness=\"0.5\"\n            :side=\"THREE.DoubleSide\"\n            transparent\n            :map=\"pTexture ? pTexture : null\"\n        />\n    </TresMesh>\n</template>\n<script lang=\"ts\" setup>\nimport { watch, ref } from 'vue'\nimport * as THREE from 'three'\nimport { useLoop } from '@tresjs/core'\nimport { Resource } from 'PLS/resourceManager'\nimport { buildRoundedPath } from '../common/buildFlexiblePipe'\n\nconst props = withDefaults(\n    defineProps<{\n        color?: string\n        radius?: number\n        bodyLength?: number\n        headLength?: number\n        headAngle?: number\n        radialSegments?: number\n        tailAngle?: number\n        tailLength?: number\n        filletRadius?: number\n        speed?: number\n    }>(),\n    {\n        color: '0xff0000',\n        radius: 0.1,\n        bodyLength: 2,\n        headLength: 1,\n        headAngle: 0,\n        radialSegments: 16,\n        tailAngle: 0,\n        tailLength: 0.5,\n        filletRadius: 0.3,\n        speed: 0.01,\n    },\n)\n\nconst path = ref(new THREE.CurvePath()) as any\nwatch(\n    () => [props.bodyLength, props.headLength, props.headAngle, props.tailAngle, props.tailLength, props.filletRadius, props.radialSegments],\n    ([bodyLength, headLength, headAngle, tailAngle, tailLength, filletRadius, radialSegments]) => {\n        const halfMid = bodyLength / 2\n        const midStart = new THREE.Vector3(0, 0, -halfMid)\n        const midEnd = new THREE.Vector3(0, 0, halfMid)\n        const headRad = THREE.MathUtils.degToRad(headAngle)\n        const headDir = new THREE.Vector3(Math.cos(headRad), Math.sin(headRad), 0)\n        const headPoint = midEnd.clone().add(headDir.multiplyScalar(headLength))\n        const tailRad = THREE.MathUtils.degToRad(tailAngle)\n        const tailDir = new THREE.Vector3(Math.cos(tailRad), Math.sin(tailRad), 0)\n        const tailPoint = midStart.clone().add(tailDir.multiplyScalar(tailLength))\n        const pts = [tailPoint, midStart, midEnd, headPoint]\n        path.value = buildRoundedPath(pts, filletRadius, radialSegments)\n    },\n    { immediate: true },\n)\n\nResource.getResource('TextureLoader', './plugins/digitalCity/image/line.png', 'line.png')\nconst getResourceTexture = Resource.getReactiveItem('line.png') as any\nconst pTexture = ref(null) as any\nwatch(\n    getResourceTexture,\n    (getResourceTexture) => {\n        if (getResourceTexture?.isTexture) {\n            pTexture.value = getResourceTexture.clone()\n            pTexture.value.wrapS = pTexture.value.wrapT = THREE.RepeatWrapping\n            pTexture.value.needsUpdate = true\n        }\n    },\n    { immediate: true },\n)\n\nconst tmsmRef = ref(null) as any\nconst { onBeforeRender } = useLoop()\nonBeforeRender(() => {\n    if (pTexture.value) {\n        pTexture.value.offset.x -= props.speed\n    }\n})\n</script>\n"],"names":["Resource","getResourceTexture","useLoop","radius","radialSegments","color"],"mappings":";;;;;;;;;;;AAuBA,KAAA,CAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,KAAA,CAAA,YAAA,CAAA,CAAA,GAAA,CAAA,CAAA;;AACA,KAAA,CAAA,KAAA,CAAA,CAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA;;;;;;;;;;;;;;;;AAKA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,KAAA,CAAA,CAAA,CAAQ,OAAA;AA2Bd,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,IAAA,CAAA,CAAA,CAAO,GAAA,CAAI,IAAI,KAAA,CAAM,WAAW,CAAA;AACtC,CAAA,CAAA,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAC,KAAA,CAAM,UAAA,CAAA,CAAY,MAAM,UAAA,CAAA,CAAY,KAAA,CAAM,SAAA,CAAA,CAAW,KAAA,CAAM,WAAW,KAAA,CAAM,UAAA,CAAA,CAAY,KAAA,CAAM,YAAA,CAAA,CAAc,MAAM,cAAc,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACvI,CAAC,CAAC,UAAA,CAAA,CAAY,UAAA,EAAY,WAAW,SAAA,CAAA,CAAW,UAAA,CAAA,CAAY,YAAA,CAAA,CAAc,cAAc,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM;AAC1F,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,UAAU,UAAA,GAAa,CAAA;AAC7B,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,WAAW,GAAA,CAAI,KAAA,CAAM,QAAQ,CAAA,CAAA,CAAG,CAAA,CAAA,CAAG,CAAC,OAAO,CAAA;AACjD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,SAAS,GAAA,CAAI,KAAA,CAAM,OAAA,CAAQ,CAAA,CAAA,CAAG,GAAG,OAAO,CAAA;AAC9C,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,OAAA,CAAA,CAAA,CAAU,KAAA,CAAM,SAAA,CAAU,QAAA,CAAS,SAAS,CAAA;AAClD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,OAAA,CAAA,CAAA,CAAU,GAAA,CAAI,KAAA,CAAM,OAAA,CAAQ,IAAA,CAAK,GAAA,CAAI,OAAO,CAAA,CAAA,CAAG,IAAA,CAAK,GAAA,CAAI,OAAO,CAAA,CAAA,CAAG,CAAC,CAAA;AACzE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAM,SAAA,CAAA,CAAA,CAAY,OAAO,KAAA,CAAA,CAAM,CAAE,IAAI,OAAA,CAAQ,cAAA,CAAe,UAAU,CAAC,CAAA;AACvE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,OAAA,CAAA,CAAA,CAAU,KAAA,CAAM,SAAA,CAAU,QAAA,CAAS,SAAS,CAAA;AAClD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,OAAA,CAAA,CAAA,CAAU,GAAA,CAAI,KAAA,CAAM,OAAA,CAAQ,IAAA,CAAK,GAAA,CAAI,OAAO,CAAA,CAAA,CAAG,IAAA,CAAK,GAAA,CAAI,OAAO,CAAA,CAAA,CAAG,CAAC,CAAA;AACzE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAM,SAAA,CAAA,CAAA,CAAY,SAAS,KAAA,CAAA,CAAM,CAAE,IAAI,OAAA,CAAQ,cAAA,CAAe,UAAU,CAAC,CAAA;AACzE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,GAAA,CAAA,CAAA,CAAM,CAAC,SAAA,CAAA,CAAW,QAAA,CAAA,CAAU,QAAQ,SAAS,CAAA;AACnD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAK,KAAA,CAAA,CAAA,CAAQ,gBAAA,CAAiB,GAAA,CAAA,CAAK,YAAA,CAAA,CAAc,cAAc,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACnE,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACA,CAAA,CAAE,WAAW,IAAA,CAAA;AAAK,CAAA,CAAA,CAAA,CAAA,CACtB;AAEA,CAAA,CAAA,CAAA,CAAAA,QAAA,CAAS,WAAA,CAAY,eAAA,CAAA,CAAiB,CAAA,CAAA,CAAA,OAAA,CAAA,WAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA,CAAwC,CAAA,IAAA,CAAA,GAAA,CAAU,CAAA;AACxF,CAAA,CAAA,CAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqBA,QAAA,CAAS,eAAA,CAAgB,UAAU,CAAA;AAC9D,CAAA,CAAA,CAAA,CAAA,MAAM,QAAA,CAAA,CAAA,CAAW,IAAI,IAAI,CAAA;AACzB,CAAA,CAAA,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACI,kBAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACA,CAACC,mBAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAuB;AACpB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAIA,qBAAoB,SAAA,CAAA,CAAW;AAC/B,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAS,KAAA,GAAQA,oBAAmB,KAAA,CAAA,CAAM;AAC1C,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAS,KAAA,CAAM,KAAA,CAAA,CAAA,CAAQ,QAAA,CAAS,KAAA,CAAM,QAAQ,KAAA,CAAM,cAAA;AACpD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAS,MAAM,WAAA,GAAc,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACjC;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACJ,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACA,CAAA,CAAE,WAAW,IAAA,CAAA;AAAK,CAAA,CAAA,CAAA,CAAA,CACtB;AAEA,CAAA,CAAA,CAAA,CAAA,MAAM,OAAA,CAAA,CAAA,CAAU,IAAI,IAAI,CAAA;AACxB,CAAA,CAAA,CAAA,CAAA,MAAM,CAAA,CAAE,cAAA,CAAA,CAAe,CAAA,CAAA,CAAIC,EAAA,CAAA,CAAQ;AACnC,CAAA,CAAA,CAAA,CAAA,cAAA,CAAe,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM;AACjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,KAAA,CAAA,CAAO;AAChB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAS,KAAA,CAAM,MAAA,CAAO,CAAA,CAAA,CAAA,CAAA,CAAK,KAAA,CAAM,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACrC;AAAA,CAAA,CAAA,CAAA,CACJ,CAAC,CAAA;;AAvFG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,UAAA,CAAA,CAAA,CAAA,CAAA,mBAAA,CAWW,CAAA,QAAA,CAAA,CAAA,CAXX,UAAA,CAAA,CAWW;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAVP,oBAAsE,CAAA,gBAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAnD,IAAA,CAAA,CAAI,CAAG,IAAA,CAAA,KAAA,CAAA,CAAI,IAAMC,IAAAA,CAAAA,MAAAA,CAAAA,CAAQC,IAAAA,CAAAA,cAAAA,EAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAC1D,oBAQE,CAAA,qBAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,UAPM,CAAA,OAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAJ,GAAA,EAAI,OAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACH,OAAOC,IAAAA,CAAAA,KAAAA;AAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CACP,SAAA,EAAW,CAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACX,SAAA,EAAW,CAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACX,MAAM,KAAA,CAAM,UAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACb,WAAA,EAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACC,GAAA,EAAK,QAAA,CAAA,KAAA,CAAA,CAAA,CAAW,QAAA,CAAA,KAAA,CAAA,CAAA,CAAQ;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;;;;;;"}
import{a as n,e as t}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{d as o,a3 as e,r,v as i,a2 as a,o as c,H as u,N as s,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.NRI7TcgI1741168315107.js";import{aX as v,a0 as m,C as y,M as x,cq as w,b as _}from"./three.FxqAALWt1741168315107.js";const M=I;function I(n,t){const o=P();return(I=function(n,t){return o[n-=377]})(n,t)}!function(n,t){const o=I,e=P();for(;;)try{if(672475===parseInt(o(392))/1*(-parseInt(o(412))/2)+-parseInt(o(377))/3+parseInt(o(415))/4+parseInt(o(389))/5*(parseInt(o(380))/6)+parseInt(o(391))/7+-parseInt(o(423))/8+parseInt(o(396))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[I(382)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){b(this,(function(){const n=I,t=new RegExp(n(420)),o=new RegExp(n(405),"i"),e=j("init");t[n(413)](e+n(399))&&o[n(413)](e+"input")?j():e("0")}))()}();const R=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[I(382)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function P(){const n=["warn","3294249Qjjlay","foremost","error","6gGoWdD","img","apply","map","TresSpriteMaterial","return (function() ","while (true) {}","sizeAttenuation","gger","4866635mkYvZE","geometry","2147691ufnOVL","1723fBQGcV","table","value","translate","2701359rLpZei","info","__proto__","chain","console","TresSprite",'{}.constructor("return this")( )',"position","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","99999","scale","clone","string","length","758ImdWRh","test","buildingsMarkA","3509180RHXjqu","log","bind","tsRef","constructor","function *\\( *\\)","action","exception","272088cJXKTf","offset"];return(P=function(){return n})()}R(void 0,(function(){const n=I,t=function(){const n=I;let t;try{t=Function(n(385)+n(402)+");")()}catch(o){t=window}return t}(),o=t[n(400)]=t[n(400)]||{},e=[n(416),n(425),n(397),n(379),n(422),n(393),"trace"];for(let r=0;r<e[n(411)];r++){const t=R.constructor[n(406)][n(417)](R),i=e[r],a=o[i]||t;t[n(398)]=R[n(417)](R),t.toString=a.toString[n(417)](a),o[i]=t}}))();const A=[M(403),"scale"],T=[M(383)],S=o({__name:M(414),props:{color:{default:"#fff"},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(381)]}))),p=await p,d(),p),v=r({color:g.color,transparent:!0,depthWrite:!1,sizeAttenuation:g[o(387)],toneMapped:!1,depthTest:!g[o(378)]}),m=i(null);return a((()=>{const n=o;m[n(394)]&&(m[n(394)][n(390)]=m[n(394)][n(390)][n(409)](),m[n(394)][n(390)][n(395)](g[n(424)][0],g[n(424)][1],0))})),(n,t)=>{const e=o;return c(),u(e(401),{ref_key:e(418),ref:m,position:g[e(403)],scale:g[e(408)],renderOrder:e(407)},[s(e(384),l(v,{map:f(h)}),null,16,T)],8,A)}}});function j(n){function t(n){const o=I;if(typeof n===o(410))return function(n){}[o(419)](o(386))[o(382)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(419)](o(404)+o(388)).call(o(421)):function(){return!1}.constructor(o(404)+o(388))[o(382)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const F=E;!function(n,t){const o=E,e=W();for(;;)try{if(479995===parseInt(o(355))/1+parseInt(o(331))/2*(parseInt(o(336))/3)+parseInt(o(319))/4+parseInt(o(351))/5+-parseInt(o(337))/6*(-parseInt(o(368))/7)+parseInt(o(363))/8+-parseInt(o(332))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(352)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){z(this,(function(){const n=E,t=new RegExp(n(327)),o=new RegExp(n(343),"i"),e=G(n(324));t[n(348)](e+n(364))&&o[n(348)](e+n(358))?G():e("0")}))()}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(352)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();k(void 0,(function(){const n=E,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),o=t[n(341)]=t.console||{},e=["log",n(334),n(344),n(325),n(361),n(353),n(346)];for(let r=0;r<e[n(323)];r++){const t=k.constructor.prototype.bind(k),i=e[r],a=o[i]||t;t[n(339)]=k.bind(k),t[n(322)]=a[n(322)][n(362)](a),o[i]=t}}))();const B=[F(356)],C=["args"];function E(n,t){const o=W();return(E=function(n,t){return o[n-=319]})(n,t)}function W(){const n=["test","gger","MeshRef","15145vZSuLn","apply","table","radius","79195IEVYqM","position","ncolor","input","action","speed","exception","bind","5651784wycOzN","chain","uRadius","radraA","constructor","721uTvpqp","1473124XBXunQ","makeRotationX","while (true) {}","toString","length","init","error","string","function *\\( *\\)","call","color","TresShaderMaterial","1500314CxqqEc","18348786RJkZQt","uniforms","warn","value","3jBFMiV","35628UtywYE","followWidth","__proto__","TresCircleGeometry","console","applyMatrix4","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","trace","debu"];return(W=function(){return n})()}const Z=o({__name:F(366),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:"#ffff00"},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=F,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[E(335)]+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(345),fragmentShader:"\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ",uniforms:{uSpeed:{value:r[e(360)]},uRadius:{value:r.radius},uTime:l,uFollowWidth:{value:r[e(338)]},ncolor:{value:new y(r.color)}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(320)](-Math.PI/180*90);f[o(335)][o(342)](n)}}));const _=p();return a((()=>{const n=e;r[n(329)]&&(w[n(333)][n(357)][n(335)]=new y(r[n(329)])),r[n(354)]&&(w[n(333)][n(365)][n(335)]=r.radius)})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return c(),u("TresMesh",{ref_key:o(350),ref:_,position:r.position},[s(o(340),{ref_key:"TresCircleGeometryRef",ref:f,args:[r.size,1e3]},null,8,C),s(o(330),g(h(w)),null,16)],8,B)}}});function G(n){function t(n){const o=E;if(typeof n===o(326))return function(n){}.constructor(o(321))[o(352)]("counter");1!==(""+n/n)[o(323)]||n%20==0?function(){return!0}[o(367)](o(347)+o(349))[o(328)](o(359)):function(){return!1}[o(367)](o(347)+o(349))[o(352)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const O=Q;!function(n,t){const o=Q,e=q();for(;;)try{if(268055===-parseInt(o(513))/1*(parseInt(o(502))/2)+-parseInt(o(471))/3+-parseInt(o(528))/4*(-parseInt(o(485))/5)+parseInt(o(509))/6+-parseInt(o(494))/7+-parseInt(o(480))/8+parseInt(o(511))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[Q(472)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function q(){const n=["call","stateObject",'{}.constructor("return this")( )',"chain","string","copy","1797678uuDBRv","makeScale","9771120feBlbR","MeshRef","5QnfPxt","TresTubeGeometryRef","toString","radius","maxRadius","init","warn","clone","updateMatrix","args","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","return (function() ","uniforms","length","console","62932sPtEsM","TresShaderMaterial","555132udfYPR","apply","value","computeBoundingBox","log","height","__proto__","function *\\( *\\)","position","3801128GtvSSV","uColor","max","scale","constructor","40CuizNx","error","info","radraB","counter","bind","#ffff00","exception","prototype","3310454ZaajIB","opacity","period","test","color","debu","applyMatrix4","gger","43998VvGxnT"];return(q=function(){return n})()}!function(){V(this,(function(){const n=Q,t=new RegExp(n(478)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=N(n(518));t[n(497)](e+n(506))&&o[n(497)](e+"input")?N():e("0")}))()}();const X=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[Q(472)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();X(void 0,(function(){const n=Q;let t;try{t=Function(n(524)+n(505)+");")()}catch(r){t=window}const o=t[n(527)]=t[n(527)]||{},e=[n(475),n(519),n(487),n(486),n(492),"table","trace"];for(let i=0;i<e[n(526)];i++){const t=X[n(484)][n(493)].bind(X),r=e[i],a=o[r]||t;t[n(477)]=X[n(490)](X),t[n(515)]=a[n(515)][n(490)](a),o[r]=t}}))();const $=[O(479)],L=[O(522)];function Q(n,t){const o=q();return(Q=function(n,t){return o[n-=470]})(n,t)}const Y=o({__name:O(488),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:O(491)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=O,r=n,i=p(),l=p(1),f=p(.1),v={color:r.color,opacity:r[e(495)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(523),fragmentShader:"\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ",uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(498)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(473)][o(474)](),l[o(473)]=M[o(473)].boundingBox[o(482)],f.value=M[o(473)].boundingBox.min,I=i[o(473)][o(483)][o(520)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(476)],0)));a((()=>{const n=e;r.color&&(v[n(525)][n(481)][n(473)]=new y(r[n(498)]))}));const{onLoop:R}=t(),P={value:0};return R((({delta:n})=>{const t=e;P[t(473)]+=n;const o=(P[t(473)]%r[t(496)]/r[t(496)]*(r[t(517)]-r.radius)+r[t(516)])/r[t(516)],a=(new x)[t(510)](o,1,o);I&&(i[t(473)].scale[t(508)](I.clone()[t(500)](a)),i[t(473)][t(521)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return c(),u("TresMesh",{ref_key:o(512),ref:i,position:r.position,renderOrder:2e3},[s("TresTubeGeometry",{ref_key:o(514),ref:M,args:[b[o(473)],20,r[o(516)],100,!1]},null,8,L),s(o(470),g(h(v)),null,16)],8,$)}}});function N(n){function t(n){const o=Q;if(typeof n===o(507))return function(n){}[o(484)]("while (true) {}")[o(472)](o(489));1!==(""+n/n).length||n%20==0?function(){return!0}[o(484)](o(499)+o(501))[o(503)]("action"):function(){return!1}[o(484)](o(499)+o(501))[o(472)](o(504)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{S as _,Z as a,Y as b};

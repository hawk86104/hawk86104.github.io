import{cb as t,a3 as n,C as e,V as r}from"./three.LxxvsMJG1742205305014.js";import{a as o}from"./@tresjs.nk0nhZ9a1742205305014.js";import{R as i}from"./all.three.Cv1ruM2n1742205305014.js";import{d as c,b as a,a3 as u,a2 as s,o as l,H as f,N as p,m,u as d}from"./@vue.NRI7TcgI1742205305014.js";!function(t,n){const e=h,r=g();for(;;)try{if(956819===parseInt(e(245))/1+parseInt(e(226))/2*(-parseInt(e(243))/3)+-parseInt(e(206))/4+-parseInt(e(233))/5+-parseInt(e(215))/6+-parseInt(e(216))/7+parseInt(e(232))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["stateObject","exception","bind","log","input","vertexShader","console","6162354BHLFtV","7181020gqHPyb","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","warn","prototype","debu","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","trace","fragmentShader","8RQFeTA","init","void main() {","gger","__proto__","counter","51475416CBVuUd","4765220qwSrtE","apply","while (true) {}","table","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","replace","info","#include <project_vertex>","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","#include <emissivemap_fragment>","1256646imqHdF","length","1074409dLqJGx","test","7482104SnjCTw","return (function() "];return(g=function(){return t})()}function h(t,n){const e=g();return(h=function(t,n){return e[t-=205]})(t,n)}!function(){v(this,(function(){const t=h,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(218),"i"),r=y(t(227));n.test(r+"chain")&&e[t(205)](r+t(212))?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=h,n=function(){const t=h;let n;try{n=Function(t(207)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(214)]=n[t(214)]||{},r=[t(211),t(220),t(239),"error",t(209),t(236),t(224)];for(let o=0;o<r[t(244)];o++){const n=x[t(219)][t(221)].bind(x),i=r[o],c=e[i]||n;n[t(230)]=x[t(210)](x),n.toString=c.toString.bind(c),e[i]=n}}))();function y(t){function n(t){const e=h;if("string"==typeof t)return function(t){}[e(219)](e(235)).apply(e(231));1!==(""+t/t)[e(244)]||t%20==0?function(){return!0}[e(219)](e(222)+e(229)).call(e(217)):function(){return!1}[e(219)]("debu"+e(229))[e(234)](e(208)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=_;function _(t,n){const e=S();return(_=function(t,n){return e[t-=394]})(t,n)}!function(t,n){const e=_,r=S();for(;;)try{if(326906===parseInt(e(433))/1*(-parseInt(e(403))/2)+parseInt(e(447))/3+parseInt(e(422))/4*(-parseInt(e(396))/5)+parseInt(e(443))/6*(-parseInt(e(405))/7)+-parseInt(e(442))/8*(parseInt(e(431))/9)+parseInt(e(404))/10+-parseInt(e(432))/11*(-parseInt(e(436))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(454)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=_,n=new RegExp(t(449)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(441));n[t(414)](r+"chain")&&e[t(414)](r+t(437))?E():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(454)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=_;let n;try{n=Function(t(448)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(409)]=n[t(409)]||{},r=[t(427),t(419),t(428),t(411),"exception",t(394),"trace"];for(let i=0;i<r.length;i++){const n=C[t(395)][t(402)].bind(C),o=r[i],c=e[o]||n;n[t(453)]=C[t(425)](C),n[t(435)]=c[t(435)][t(425)](c),e[o]=n}}))();const I=[b(426)],M=[b(455),b(408)];function S(){const t=["stateObject","toString","72dgreEA","input","value","mixStrength","counter","init","15728brxQiy","469506KKOQxk","reflectMap","length","mirror","547806iKbgvt","return (function() ","function *\\( *\\)","set","wrapT","uniforms","__proto__","apply","object","attributes","tmRef","call","tpgRef","update","table","constructor","5RJdsnz","#ffffff","wrapS","onBeforeCompile","#444","textureMatrix","prototype","26012niUCAb","3749050dueBjc","28MEddHY","action","aoMap","visible","console","string","error","primitive","TresMesh","test","uv1","TresMeshStandardMaterial","while (true) {}","assign","warn","repeat","gger","762708uLlMiR","channel","textureMatrixUniform","bind","rotation-x","log","info","tmsmRef","color","27kUJDgA","964502PTABNl","19FWvZHV"];return(S=function(){return t})()}const j=c({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(397)}},async setup(c){const v=b;let g,x;const y=c,_=new t(9.5,10),w=a(),C=a(),S=a(),j=new i,E={mirror:{value:y[v(446)]},mixStrength:{value:y[v(439)]}},T=([g,x]=u((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var R=0;R<3;R++)T[R][v(398)]=n,T[R][v(451)]=n,T[R][v(420)][v(450)](16,16);const z={color:new e(v(400)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},A=t=>{const n=v;t[n(452)][n(444)]=j.renderTargetUniform,t[n(452)][n(401)]=j[n(424)],t.uniforms=Object[n(418)](t[n(452)],E),(t=>{const n=h;t.vertexShader=t[n(213)].replace(n(228),n(241)),t[n(213)]=t[n(213)][n(238)](n(240),n(237))})(t),(t=>{const n=h;t[n(225)]=t.fragmentShader[n(238)](n(228),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(225)]=t.fragmentShader[n(238)](n(242),n(223))})(t)};return s((()=>{const t=v;w[t(438)]&&(w.value.attributes[t(415)]=w.value[t(456)].uv),S.value&&(S[t(438)][t(407)][t(423)]=1,S.value[t(399)]=A),C[t(438)]&&(C[t(438)].add(j),C.value.onBeforeRender=(n,e,r)=>{j[t(460)](n,e,r)}),y[t(430)]&&S[t(438)]&&(S[t(438)][t(430)]=new e(y[t(430)]))})),(t,n)=>{const e=v;return l(),f("TresGroup",null,[p(e(413),{ref_key:e(457),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(459),ref:w,args:[10,10]},null,512),p(e(416),m({ref_key:e(429),ref:S},z),null,16)],8,I),p(e(412),{object:d(_),visible:t.showGridHelper},null,8,M)])}}});function E(t){function n(t){const e=_;if(typeof t===e(410))return function(t){}[e(395)](e(417))[e(454)](e(440));1!==(""+t/t)[e(445)]||t%20==0?function(){return!0}[e(395)]("debu"+e(421))[e(458)](e(406)):function(){return!1}[e(395)]("debu"+e(421))[e(454)](e(434)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

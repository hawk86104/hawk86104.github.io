import{m as t,e,b as n,J as o,U as r}from"./@tresjs.pA0fT6uQ1736128832096.js";import{B as s,s as i,C as a,cr as p,a0 as c,cT as l,f as u,V as m}from"./three.8H01GNxA1736128832096.js";import{l as f}from"./utils.m6d-s5_F1736128832096.js";import{f as d}from"./utils.zosTyKXz1736128832096.js";import{a4 as h,b as j,a1 as y,o as g,D as v,F as T,V as w,f as b,g as x,J as I,H as z,m as _,u as k,I as M,d as S,r as E,e as C,j as L,aj as O,ak as B,al as G}from"./@vue.yG49nQHr1736128832096.js";import{m as P}from"./d3-geo.N3qqwUlx1736128832096.js";import{c as A,d as D,a as H}from"./three-mesh-bvh.glnR9Dt01736128832096.js";import"./@vueuse.iB8cUOAP1736128832096.js";import"./@fesjs.egESxg6m1736128832096.js";import"./vue-router.9xKClDNR1736128832096.js";import"./lodash-es.kYt-_xTG1736128832096.js";import"./@qlin.yHhFDldE1736128832096.js";import"./pinia.fYculRKX1736128832096.js";import"./vue-demi.C4xddsk91736128832096.js";import"./@floating-ui.BPbuo5Gx1736128832096.js";import"./@juggle.7yjBMqoW1736128832096.js";import"./@tweenjs.J1BAvmPw1736128832096.js";import"./http.rrwr2fOQ1736128832096.js";import"./axios.Ng308AU61736128832096.js";import"./color.HUEJcjxq1736128832096.js";import"./@amap.xuzEumYH1736128832096.js";import"./color-string.gamMM5y-1736128832096.js";import"./color-name.bVW5Ex2j1736128832096.js";import"./simple-swizzle.SnTK6Ee51736128832096.js";import"./is-arrayish.g383arK51736128832096.js";import"./color-convert.m1C-lGo-1736128832096.js";import"./lodash.QOBIcS0M1736128832096.js";import"./naive-ui.kGNLdckd1736128832096.js";import"./date-fns.dsKIdits1736128832096.js";import"./@css-render.b0kr2zSQ1736128832096.js";import"./seemly.SjiSeX2v1736128832096.js";import"./css-render.Al7TzvoC1736128832096.js";import"./@emotion.ZD_ZYAgY1736128832096.js";import"./vooks.7vE4Mvtx1736128832096.js";import"./evtd.DtfwxtIl1736128832096.js";import"./vueuc.yomfEHGP1736128832096.js";import"./vdirs.AnO5xsx_1736128832096.js";import"./treemate.dcEdf2le1736128832096.js";import"./date-fns-tz.kn75QV4A1736128832096.js";import"./async-validator.-YBkpS4I1736128832096.js";import"./d3-array.AhNJy1f41736128832096.js";const F=["position"],R=["blending","map"],q=["name","renderOrder","pCenter"],J=["args"],V=["color","side"],Z=["renderOrder","position-z"],K=["position"],U=["renderOrder"],X=["position"],$={__name:"jiangSuMapMesh",async setup(r){let S,E;s.prototype.computeBoundsTree=A,s.prototype.disposeBoundsTree=D,i.prototype.raycast=H;const C=([S,E]=h((()=>f("./plugins/simpleGIS/json/320000_full.json","features"))),S=await S,E(),S),{map:L}=([S,E]=h((()=>n({map:"./plugins/simpleGIS/image/icon.png"}))),S=await S,E(),S),O=C[0].properties.centroid,B=P();B.center(O).translate([0,0]);const G=[];C.forEach((t=>{const e=new a("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:p,type:c}=t.geometry,u=o||r||s||[0,0],m=B(u);m[1]=-m[1],m[2]=n,G.push({type:"Html",position:m,name:i});const f=B(u);f[1]=.2-f[1],f[2]=n+.22,G.push({type:"Sprite",position:f}),p.forEach((t=>{function o(t){const o=new l;t.forEach(((t,e)=>{const[n,r]=B(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),G.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:f});const r=[];t.forEach((t=>{const[e,n]=B(t);r.push(e,-n,0)})),G.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===c&&t.forEach((t=>o(t))),"Polygon"===c&&o(t)}))}));const $=j();y((()=>{$.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new u).setFromObject(t).getCenter(new m),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})($.value),$.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const N=t=>{t.object.material.opacity=.4},Y=t=>{t.eventObject.material.opacity=1},{camera:Q,controls:W}=t();let tt=null;const et=t=>{const e=new m;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,tt=d(Q,e,W)},{onBeforeLoop:nt}=e();nt((()=>{null==tt||tt.update()}));const ot={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(g(),v("TresGroup",{ref_key:"tgRef",ref:$},[(g(),v(T,null,w(G,((t,n)=>(g(),v(T,{key:"".concat(n)},["Html"===t.type?(g(),b(k(o),_({key:0,ref_for:!0},ot,{position:t.position}),{default:x((()=>[I("span",null,z(t.name),1)])),_:2},1040,["position"])):M("",!0),"Sprite"===t.type?(g(),v("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[I("TresSpriteMaterial",{color:16711680,blending:p,map:k(L)},null,8,R)],8,F)):M("",!0),"Shape"===t.type?(g(),v("TresMesh",{key:2,name:t.name,renderOrder:n,pCenter:t.pCenter,onPointerEnter:N,onPointerLeave:Y,onClick:et},[I("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,J),I("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:c},null,8,V)],40,q)):M("",!0),"Line"===t.type?(g(),v(T,{key:3},[I("TresLine",{renderOrder:n,"position-z":t.depth+1e-4},[I("TresBufferGeometry",{position:[t.points,3]},null,8,K),e[0]||(e[0]=I("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1))],8,Z),I("TresLine",{renderOrder:n,"position-z":-1e-4},[I("TresBufferGeometry",{position:[t.points,3]},null,8,X),e[1]||(e[1]=I("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1))],8,U)],64)):M("",!0)],64)))),64))],512))}},N=Q;!function(t,e){const n=Q,o=et();for(;;)try{if(577542===parseInt(n(421))/1*(-parseInt(n(414))/2)+-parseInt(n(419))/3*(parseInt(n(388))/4)+parseInt(n(394))/5+-parseInt(n(409))/6*(-parseInt(n(418))/7)+parseInt(n(402))/8*(-parseInt(n(391))/9)+-parseInt(n(403))/10+parseInt(n(398))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Y=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[Q(393)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function Q(t,e){const n=et();return(Q=function(t,e){return n[t-=381]})(t,e)}!function(){Y(this,(function(){const t=Q,e=new RegExp(t(420)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=nt(t(411));e[t(410)](o+"chain")&&n.test(o+t(401))?nt():o("0")}))()}();const W=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();W(void 0,(function(){const t=Q,e=function(){const t=Q;let e;try{e=Function(t(407)+t(399)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(387)]||{},o=["log",t(384),"info",t(413),t(395),"table","trace"];for(let r=0;r<o.length;r++){const e=W[t(404)][t(417)][t(382)](W),s=o[r],i=n[s]||e;e[t(406)]=W.bind(W),e[t(392)]=i.toString[t(382)](i),n[s]=e}}))();const tt=S({__name:N(385),setup(t){const e=N,n=E({clearColor:e(408),alpha:!0,antialias:!0}),o=E({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,s)=>{const i=e,a=C(i(396));return g(),b(a,_(n,{"window-size":""}),{default:x((()=>[s[0]||(s[0]=I("TresPerspectiveCamera",{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1)),L(k(r),O(B(o)),null,16),s[1]||(s[1]=I(i(405),{intensity:8.8},null,-1)),s[2]||(s[2]=I("TresDirectionalLight",{position:[0,10,5],intensity:.2},null,-1)),s[3]||(s[3]=I(i(412),{position:[0,10,-5],intensity:.2},null,-1)),s[4]||(s[4]=I(i(412),{position:[5,10,0],intensity:.2},null,-1)),s[5]||(s[5]=I("TresDirectionalLight",{position:[-5,10,0],intensity:.2},null,-1)),s[6]||(s[6]=I(i(397),{args:[20,10]},null,-1)),(g(),b(G,null,{default:x((()=>[L($)])),_:1}))])),_:1},16)}}});function et(){const t=["156dRulGa","function *\\( *\\)","579637uEGSte","string","bind","debu","warn","jiangSuMap","call","console","50584xyYEIL","counter","stateObject","3630870VAxmrU","toString","apply","917880pPqxRS","exception","TresCanvas","TresGridHelper","26422913kIzqdo",'{}.constructor("return this")( )',"while (true) {}","input","8byunxh","4668530xvympE","constructor","TresAmbientLight","__proto__","return (function() ","#ffdbd1","596370hCXNXZ","test","init","TresDirectionalLight","error","2pkIkPn","gger","length","prototype","7OzqHaa"];return(et=function(){return t})()}function nt(t){function e(t){const n=Q;if(typeof t===n(381))return function(t){}[n(404)](n(400))[n(393)](n(389));1!==(""+t/t)[n(416)]||t%20==0?function(){return!0}.constructor("debugger")[n(386)]("action"):function(){return!1}[n(404)](n(383)+n(415)).apply(n(390)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{tt as default};

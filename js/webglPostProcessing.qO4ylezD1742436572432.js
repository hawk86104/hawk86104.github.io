import{i as n}from"./ice-utils.lDp0K9xT1742436572432.js";import{m as t,_ as e}from"./gl-matrix.AFK4LjqA1742436572432.js";import{P as o}from"./tweakpane.yDiyAAkA1742436572432.js";import{d as r,r as i,q as a,o as c,H as u,N as s,u as f}from"./@vue.deO5D3Lf1742436572432.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=R;!function(n,t){const e=R,o=p();for(;;)try{if(305716===-parseInt(e(433))/1*(-parseInt(e(370))/2)+-parseInt(e(353))/3+-parseInt(e(436))/4+-parseInt(e(343))/5+parseInt(e(395))/6+-parseInt(e(419))/7+parseInt(e(404))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(364)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=R,t=new RegExp(n(422)),e=new RegExp(n(425),"i"),o=T(n(420));t[n(440)](o+n(416))&&e[n(440)](o+n(371))?T():o("0")}))()}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(364)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();d(void 0,(function(){const n=R,t=function(){const n=R;let t;try{t=Function(n(386)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(406)]=t[n(406)]||{},o=[n(397),"warn",n(359),n(380),n(411),n(439),n(393)];for(let r=0;r<o.length;r++){const t=d[n(384)][n(346)][n(421)](d),i=o[r],a=e[i]||t;t.__proto__=d[n(421)](d),t[n(414)]=a.toString[n(421)](a),e[i]=t}}))();const x={id:_(374)},g=[_(443)];function R(n,t){const e=p();return(R=function(n,t){return e[n-=342]})(n,t)}function p(){const n=["height","781512DjLxEu","debu","TEXTURE_WRAP_S","ELEMENT_ARRAY_BUFFER","change","CLAMP_TO_EDGE","info","enableVertexAttribArray","create","uView","string","apply","img","offset_left_top","scale","UNSIGNED_BYTE","bindBuffer","4QmfPPv","input","getContext","call","canvaswebgl","FRAMEBUFFER","stateObject","logo-texture","texImage2D","uniform1f","error","createFramebuffer","bindTexture","#canvaswebgl","constructor","innerHeight","return (function() ","length","TEXTURE_2D","TRIANGLES","clear","offset_left_bottom","createBuffer","trace","是否后处理","1818468jAhQYn","hidden","log","translate","querySelector","addBlade","width","framebufferTexture2D","counter","6059864EENHKH","gger","console","NEAREST","ortho","blendFunc","clearColor","exception","FLOAT","bufferData","toString","offset_right_top","chain","getUniformLocation","color","1448475weFyuv","init","bind","function *\\( *\\)","value","uniformMatrix4fv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","inline","none","addBinding","STATIC_DRAW","vertexAttribPointer","ARRAY_BUFFER","SRC_ALPHA","223469MsxLMz","texParameteri","useProgram","2330640BStslV","mixParam","getElementById","table","test","while (true) {}","BYTES_PER_ELEMENT","src","drawElements","canvas","COLOR_BUFFER_BIT","COLOR_ATTACHMENT0","758470GYTNdm","RGBA","offset_right_bottom","prototype","createTexture","mat4","ONE_MINUS_SRC_ALPHA","bindFramebuffer","uProjection"];return(p=function(){return n})()}const A=r({__name:"webglPostProcessing",setup(r){const E=_;let d,R,p,A,T,F,b,v,y,h,P,B,U;const w=1,C=.71,L=.76,M=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});M[E(400)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(E(357),(n=>{const t=E;j(),R[t(379)](B,n[t(423)])}));let I=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);M[E(428)](S,E(396),{label:E(394)}),M[E(428)](S,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=E;I[0]=S[t(415)].x,I[1]=S[t(415)].y,j()})),M[E(428)](S,E(345),{picker:E(426),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(357),(n=>{const t=E;I[5]=S[t(345)].x,I[6]=S.offset_right_bottom.y,j()})),M.addBinding(S,E(391),{picker:E(426),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(357),(n=>{const t=E;I[10]=S[t(391)].x,I[11]=S[t(391)].y,j()})),M.addBinding(S,E(366),{picker:E(426),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(357),(n=>{I[15]=S.offset_left_top.x,I[16]=S.offset_left_top.y,j()})),a((()=>{D()}));const D=function(){const t=E;d=document[t(399)](t(383)),d[t(401)]=window.innerWidth,d.height=window[t(385)],R=d[t(372)]("webgl"),R&&(function(){const t=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=H(e,o),p=n(R,l,m),y=R.getUniformLocation(p,t(351)),h=R.getUniformLocation(p,t(362)),P=R.getUniformLocation(p,"uModel"),U=X(document[t(438)](t(377)))}(),j(),R.enable(R.BLEND),R[t(409)](R[t(432)],R[t(349)]),N())};function N(){const n=E;R.bindFramebuffer(R.FRAMEBUFFER,b),R[n(410)](w,C,L,1),R[n(390)](R[n(446)]),function(){const n=E;R[n(435)](p),R[n(369)](R.ARRAY_BUFFER,A);const o=t[n(361)]();t[n(408)](o,0,d[n(401)],d[n(352)],0,.1,100),R.uniformMatrix4fv(y,!1,o);const r=e[n(348)].create();e[n(348)].lookAt(r,[0,0,1],[0,0,0],[0,1,0]),R.uniformMatrix4fv(h,!1,r),Y(U,600,600),Y(U,400,400)}(),R[n(350)](R[n(375)],null),S.hidden&&(R[n(390)](R[n(446)]),R[n(410)](0,0,1,1),R[n(369)](R.ARRAY_BUFFER,T),R[n(435)](F),R[n(382)](R.TEXTURE_2D,v)),R[n(444)](R[n(389)],6,R[n(368)],0),requestAnimationFrame(N)}function Y(n,o,r){const i=E;let a=e[i(348)][i(361)]();t[i(398)](a,a,[o,r,0]),e[i(348)][i(367)](a,a,[250,250,0]),R[i(424)](P,!1,a),R[i(382)](R.TEXTURE_2D,n),R[i(444)](R[i(389)],6,R[i(368)],0)}function j(){const t=E,e=new Uint8Array([0,1,2,0,2,3]);T=H(I,e),F=n(R,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),B=R[t(417)](F,t(437)),R[t(417)](F,t(418)),function(){const n=E;v=X(d),b=R[n(381)](),R.bindFramebuffer(R.FRAMEBUFFER,b),R[n(402)](R[n(375)],R[n(342)],R[n(388)],v,0),R[n(350)](R[n(375)],null)}()}function X(n){const t=E,e=R[t(347)]();return R.bindTexture(R.TEXTURE_2D,e),n instanceof HTMLImageElement?R[t(378)](R.TEXTURE_2D,0,R[t(344)],R.RGBA,R[t(368)],n):R[t(378)](R[t(388)],0,R[t(344)],n[t(401)],n[t(352)],0,R[t(344)],R[t(368)],null),R[t(434)](R[t(388)],R.TEXTURE_MIN_FILTER,R[t(407)]),R[t(434)](R[t(388)],R.TEXTURE_MAG_FILTER,R.NEAREST),R[t(434)](R[t(388)],R[t(355)],R[t(358)]),R[t(434)](R[t(388)],R.TEXTURE_WRAP_T,R[t(358)]),e}function H(n,t){const e=E,o=R[e(392)]();R[e(369)](R.ARRAY_BUFFER,o),R[e(413)](R[e(431)],n,R[e(429)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(442)];R[e(430)](0,3,R[e(412)],!1,r,0),R[e(360)](0),R.vertexAttribPointer(1,2,R[e(412)],!1,r,3*Float32Array[e(442)]),R[e(360)](1);const i=R.createBuffer();return R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,i),R[e(413)](R[e(356)],t,R.STATIC_DRAW),R[e(369)](R.ARRAY_BUFFER,null),o}return(n,t)=>{const e=E;return c(),u(e(445),x,[s(e(365),{id:e(377),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(427)}},null,8,g)])}}});function T(n){function t(n){const e=R;if(typeof n===e(363))return function(n){}[e(384)](e(441)).apply(e(403));1!==(""+n/n)[e(387)]||n%20==0?function(){return!0}[e(384)](e(354)+"gger")[e(373)]("action"):function(){return!1}.constructor(e(354)+e(405))[e(364)](e(376)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{A as default};

var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.XkZyrr4T1726563592429.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.v4yl9LDj1726563592429.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.n1opgFac1726563592429.js";import{k as o,U as s,C as l,m as c,W as u,bb as p,h as f,e as x,_ as v,V as m,Q as w}from"./three.ZWd_rX7H1726563592429.js";import{p as h,U as g}from"./@tresjs.Mu0zjs701726563592429.js";import{u as d}from"./index.MGzBUOhm1726563592429.js";import{F as y,C as S}from"./three-stdlib.bGoL1Dee1726563592429.js";import{d as P}from"./@vue.bvMz0l_u1726563592429.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.qow2oUWP1726563592429.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.34IGZ5g-1726563592429.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.BXAY42sv1726563592429.js";function _(){const t=["572220Gjljkc",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"8406328rJAEnc","info","call","return (function() ","stateObject","while (true) {}","4HkyeFA","init","log","constructor","trace","input","bind","chain","toString","3319270wKdodY","gger","1525839YUZwUo","table","prototype","console","debu","2376885FcSWhc","apply",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9717384nYaYrU","398ApyXvY","998WwqWPR","test","length","6czZARZ"];return(_=function(){return t})()}const z=E;!function(t,e){const n=E,i=_();for(;;)try{if(641114===parseInt(n(179))/1*(parseInt(n(180))/2)+-parseInt(n(169))/3*(-parseInt(n(158))/4)+-parseInt(n(174))/5+-parseInt(n(183))/6*(parseInt(n(152))/7)+parseInt(n(178))/8+parseInt(n(184))/9+parseInt(n(167))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){b(this,(function(){const t=E,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(177),"i"),i=M(t(159));e[t(181)](i+t(165))&&n[t(181)](i+t(163))?M():i("0")}))()}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[E(175)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();I(void 0,(function(){const t=E,e=function(){const t=E;let e;try{e=Function(t(155)+t(176)+");")()}catch(n){e=window}return e}(),n=e[t(172)]=e[t(172)]||{},i=[t(160),"warn",t(153),"error","exception",t(170),t(162)];for(let r=0;r<i[t(182)];r++){const e=I[t(161)][t(171)].bind(I),a=i[r],o=n[a]||e;e.__proto__=I[t(164)](I),e[t(166)]=o.toString[t(164)](o),n[a]=e}}))();const A=z(185);function E(t,e){const n=_();return(E=function(t,e){return n[t-=152]})(t,e)}function M(t){function e(t){const n=E;if("string"==typeof t)return function(t){}[n(161)](n(157)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(161)](n(173)+"gger")[n(154)]("action"):function(){return!1}.constructor(n(173)+n(168))[n(175)](n(156)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const U=j;!function(t,e){const n=j,i=T();for(;;)try{if(354111===parseInt(n(238))/1*(-parseInt(n(277))/2)+parseInt(n(273))/3*(parseInt(n(250))/4)+-parseInt(n(255))/5*(-parseInt(n(264))/6)+parseInt(n(262))/7+parseInt(n(236))/8*(-parseInt(n(260))/9)+-parseInt(n(261))/10+-parseInt(n(245))/11*(parseInt(n(271))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[j(275)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){L(this,(function(){const t=j,e=new RegExp(t(265)),n=new RegExp(t(251),"i"),i=R(t(257));e.test(i+t(240))&&n[t(269)](i+t(263))?R():i("0")}))()}();const D=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[j(275)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function T(){const t=["1206GPCgsV","738830HUmZSy","4593288sMmSWG","input","4002iNQYbK","function *\\( *\\)","warn","log","gger","test","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","828612noYdgq","console","45468UsILBZ","stateObject","apply","bind","413394wdSEAq","constructor","34336QaUHft","prototype","3FWScRu","uniforms","chain","toString","length","table","action","11oQaTnB","error","debu","defines","return (function() ","96YPApfe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","info","__proto__","5040KiKYpi","exception","init","clone","counter"];return(T=function(){return t})()}function j(t,e){const n=T();return(j=function(t,e){return n[t-=236]})(t,e)}function V(t){const e=j,n=a({},t);return e(248)in t&&(n.defines=a({},t.defines)),e(239)in t&&(n.uniforms=s[e(258)](t[e(239)])),n}D(void 0,(function(){const t=j,e=function(){const t=j;let e;try{e=Function(t(249)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(272)]=e[t(272)]||{},i=[t(267),t(266),t(253),t(246),t(256),t(243),t(252)];for(let r=0;r<i[t(242)];r++){const e=D[t(278)][t(237)][t(276)](D),a=i[r],o=n[a]||e;e[t(254)]=D[t(276)](D),e[t(241)]=o[t(241)][t(276)](o),n[a]=e}}))();const O={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:U(270),fragmentShader:"\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t"+A+"\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t"};function R(t){function e(t){const n=j;if("string"==typeof t)return function(t){}[n(278)]("while (true) {}")[n(275)](n(259));1!==(""+t/t)[n(242)]||t%20==0?function(){return!0}.constructor(n(247)+n(268)).call(n(244)):function(){return!1}[n(278)](n(247)+n(268))[n(275)](n(274)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function C(){const t=["forEach","8764100ADbtGt","_mipMaterials","console","height","233796dtEyaj","fragmentShader","length","while (true) {}","199593GmQnhv","bind","uniforms","toString","stateObject","getClearColor","texture","constructor","8167osWUcw","value",'{}.constructor("return this")( )',"_swapTarget","30PLjbjP","trace","call","Y_IS_EVEN","info","table","type","update","dispose","_copyQuad","apply","790XfCKVV","test","replace","string","84koiwAu","copy","counter","tDiffuse","setClearAlpha","parentLevel","getRenderTarget","setClearColor","floor","64614588ZGCqfW","width","material","parentMapSize","setViewOffset","map","minFilter","X_IS_EVEN","clear","warn","autoClear","4791156qcvHvn","_mipQuad","gger","floorPowerOfTwo","return (function() ","isWebGLRenderTarget","exception","set","defines","2051HCClBJ","originalMapSize","render","11mMfJtd","setRenderTarget","15256RNhCin","debu","chain","image"];return(C=function(){return t})()}const k=Y;!function(t,e){const n=Y,i=C();for(;;)try{if(991598===parseInt(n(429))/1*(-parseInt(n(359))/2)+-parseInt(n(417))/3*(-parseInt(n(374))/4)+parseInt(n(413))/5+parseInt(n(394))/6+parseInt(n(403))/7*(parseInt(n(408))/8)+-parseInt(n(421))/9*(-parseInt(n(370))/10)+parseInt(n(406))/11*(-parseInt(n(383))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const H=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){H(this,(function(){const t=Y,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=F("init");e[t(371)](i+t(410))&&n[t(371)](i+"input")?F():i("0")}))()}();const W=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[Y(369)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Y(t,e){const n=C();return(Y=function(t,e){return n[t-=357]})(t,e)}W(void 0,(function(){const t=Y,e=function(){const t=Y;let e;try{e=Function(t(398)+t(357)+");")()}catch(n){e=window}return e}(),n=e[t(415)]=e[t(415)]||{},i=["log",t(392),t(363),"error",t(400),t(364),t(360)];for(let r=0;r<i[t(419)];r++){const e=W[t(428)].prototype[t(422)](W),a=i[r],o=n[a]||e;e.__proto__=W[t(422)](W),e[t(424)]=o.toString.bind(o),n[a]=e}}))();const N=new l;class Z{constructor(t){const e=Y;!t&&(t="\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t");const n=V(O);n[e(418)]=n.fragmentShader[e(372)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(V(n)),i[0][e(402)].X_IS_EVEN=0,i[0][e(402)][e(362)]=0,i[1]=new c(V(n)),i[1][e(402)][e(390)]=1,i[1][e(402)].Y_IS_EVEN=0,i[2]=new c(V(n)),i[2].defines[e(390)]=0,i[2].defines[e(362)]=1,i[3]=new c(V(n)),i[3][e(402)][e(390)]=1,i[3][e(402)][e(362)]=1;const r=new u;r.texture[e(389)]=p,r.texture.magFilter=p,this._swapTarget=r,this._copyQuad=new y(new c(S)),this[e(395)]=new y(null),this._mipMaterials=i}[k(366)](t,e,n,i=!1){const r=k;t[r(399)]&&(t=t[r(427)]);const o=n[r(393)],s=n.getClearAlpha(),l=n[r(380)]();n[r(426)](N);const c=this._copyQuad,u=this[r(395)],p=this[r(358)],x=this[r(414)];let v,m;i?(v=f.floorPowerOfTwo(t.image[r(384)]),m=f[r(397)](t[r(411)][r(416)])):(v=Math[r(382)](t[r(411)][r(384)]),m=Math[r(382)](t[r(411)][r(416)]));const w=Math[r(382)](1.5*v),h=Math[r(382)](m);e.setSize(w,h),p.texture[r(365)]!==e[r(427)][r(365)]?(p[r(367)](),p[r(375)](e),p[r(427)].image=a({},p[r(427)][r(411)])):p.setSize(w,h),n[r(393)]=!1,n[r(381)](0),n[r(378)](),c[r(385)][r(423)][r(377)].value=t,c.camera[r(387)](v,m,0,0,w,h),n.setRenderTarget(e),n[r(391)](),c[r(405)](n),n.setRenderTarget(p),n.clear(),c[r(405)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(423)].map[r(430)]=p.texture,t[r(423)][r(379)].value=y,t[r(423)][r(386)][r(430)].set(g,d),t.uniforms[r(404)][r(430)][r(401)](v,m),u.material=t,g=Math.floor(g/2),d=Math[r(382)](d/2);const i=h-2*d;n.setRenderTarget(e),u.camera[r(387)](g,d,-v,-i,w,h),u.render(n),n[r(407)](p),t[r(423)][r(388)][r(430)]=e[r(427)],u[r(405)](n),y++}return n[r(407)](l),n[r(378)](s),n[r(381)](N),n[r(393)]=o,y+1}[k(367)](){const t=k;this._swapTarget.dispose(),this._mipQuad.dispose(),this[t(368)][t(367)](),this._mipMaterials[t(412)]((e=>e[t(367)]()))}}function F(t){function e(t){const n=Y;if(typeof t===n(373))return function(t){}[n(428)](n(420))[n(369)](n(376));1!==(""+t/t).length||t%20==0?function(){return!0}[n(428)](n(409)+"gger")[n(361)]("action"):function(){return!1}.constructor(n(409)+n(396)).apply(n(425)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const Q=q;function G(){const t=["reflectorMipMap","negate","info","UnsignedByteType","apply","__proto__","render","stateObject","bind","applyQuaternion","Matrix4","5235419bZNiTz","matrixWorld","add","forEach","toString","buffers","multiply","update","ignoreObjects","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","parent","applyMatrix4","while (true) {}","constant","setRenderTarget","projectionMatrix","exception","reflect","matrixWorldInverse","set","getWorldQuaternion","elements","5178414RarYsO","projectPoint","4554312ceDVtU","debu","value","dot","5424mjFfcD","clear","getRenderTarget","PerspectiveCamera","Vector3","state","action","resolution","position","10qbULwy","multiplyScalar","constructor","lookAt","updateMatrixWorld","test","log","getWorldPosition","copy","1719xjlHIi","normal","depth","sub","visible",'{}.constructor("return this")( )',"8350xobUAy","608020ARKsYH","setMask","clone","sign","Quaternion","6597LAaBmN","init","table","Vector4","53052BnpueU","gger","length","console"];return(G=function(){return t})()}!function(t,e){const n=q,i=G();for(;;)try{if(489900===parseInt(n(141))/1*(-parseInt(n(116))/2)+-parseInt(n(125))/3*(parseInt(n(107))/4)+-parseInt(n(132))/5+parseInt(n(178))/6+parseInt(n(156))/7+-parseInt(n(180))/8+-parseInt(n(137))/9*(-parseInt(n(131))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const X=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){X(this,(function(){const t=q,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(165),"i"),i=K(t(138));e.test(i+"chain")&&n[t(121)](i+"input")?K():i("0")}))()}();const $=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();$(void 0,(function(){const t=q,e=function(){const t=q;let e;try{e=Function("return (function() "+t(130)+");")()}catch(n){e=window}return e}(),n=e[t(144)]=e.console||{},i=[t(122),"warn",t(147),"error",t(172),t(139),"trace"];for(let r=0;r<i[t(143)];r++){const e=$[t(118)].prototype[t(153)]($),a=i[r],o=n[a]||e;e[t(150)]=$.bind($),e[t(160)]=o.toString[t(153)](o),n[a]=e}}))();const B=P({__name:Q(145),props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=Q,i=t,r=new x,a=new(v[n(155)]),o=new(v[n(110)]),s=new Z,l=d({width:i[n(114)],height:i[n(114)],settings:{type:v[n(148)]}}),c=d({width:i[n(114)],height:i.resolution,settings:{type:v[n(148)]}}),{camera:u,renderer:p,scene:f}=h(),{onBeforeLoop:y}=g();return y((()=>{const t=n;(()=>{const t=n;if(!u.value)return;r[t(175)](new(v[t(111)])(0,1,0),0),r[t(167)](i.parent[t(157)]),o.copy(u.value);const e=new m(0,0,1)[t(134)]().negate(),s=u[t(105)][t(123)](new m);e[t(173)](r[t(126)]);const c=new(v[t(111)]);r[t(179)](s,c);const x=c[t(134)]();x.sub(s),x[t(158)](c),o[t(115)][t(124)](x);const h=new m(0,0,-1);h[t(154)](u[t(105)][t(176)](new(v[t(136)]))),h.add(s);const g=new(v[t(111)]);i[t(166)][t(123)](g),g[t(128)](h),g[t(173)](r[t(126)])[t(146)](),g[t(158)](i[t(166)].getWorldPosition(new(v[t(111)]))),o.up[t(175)](0,1,0),o[t(154)](u[t(105)][t(176)](new w)),o.up[t(173)](r[t(126)]),o[t(119)](g),o[t(120)]();const d=new(v[t(155)]);d[t(175)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d[t(162)](o.projectionMatrix),d[t(162)](o[t(174)]),a[t(124)](d),r[t(167)](o[t(174)]);const y=new(v[t(140)])(r[t(126)].x,r[t(126)].y,r[t(126)].z,r[t(169)]),S=o[t(171)],P=new(v[t(140)]);P.x=(Math[t(135)](y.x)+S.elements[8])/S[t(177)][0],P.y=(Math[t(135)](y.y)+S[t(177)][9])/S[t(177)][5],P.z=-1,P.w=(1+S[t(177)][10])/S.elements[14],y[t(117)](2/y[t(106)](P)),S.elements[2]=y.x,S[t(177)][6]=y.y,S.elements[10]=y.z+1,S.elements[14]=y.w;const _=p.value[t(109)]();p[t(105)].setRenderTarget(l.value),p[t(105)][t(112)][t(161)][t(127)][t(133)](!0),!1===p[t(105)].autoClear&&p.value[t(108)](),i[t(164)].forEach((e=>e[t(129)]=!1)),p[t(105)][t(151)](f[t(105)],o),i.ignoreObjects[t(159)]((e=>e[t(129)]=!0)),p[t(105)][t(170)](_)})(),l.value&&c.value&&p.value&&s[t(163)](l[t(105)].texture,c[t(105)],p[t(105)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function q(t,e){const n=G();return(q=function(t,e){return n[t-=105]})(t,e)}function K(t){function e(t){const n=q;if("string"==typeof t)return function(t){}.constructor(n(168))[n(149)]("counter");1!==(""+t/t)[n(143)]||t%20==0?function(){return!0}.constructor(n(181)+"gger").call(n(113)):function(){return!1}[n(118)](n(181)+n(142))[n(149)](n(152)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=et,i=it();;)try{if(415452===parseInt(n(237))/1*(-parseInt(n(258))/2)+-parseInt(n(226))/3*(-parseInt(n(254))/4)+-parseInt(n(245))/5+parseInt(n(243))/6+-parseInt(n(234))/7*(parseInt(n(225))/8)+parseInt(n(224))/9*(-parseInt(n(239))/10)+parseInt(n(241))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var J=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[et(228)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){J(this,(function(){var t=et,e=new RegExp(t(230)),n=new RegExp(t(233),"i"),i=nt(t(242));e.test(i+t(238))&&n.test(i+"input")?nt():i("0")}))()}();var tt=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[et(228)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function et(t,e){var n=it();return(et=function(t,e){return n[t-=221]})(t,e)}function nt(t){function e(t){var n=et;if(typeof t===n(251))return function(t){}[n(227)](n(240)).apply(n(232));1!==(""+t/t)[n(252)]||t%20==0?function(){return!0}[n(227)](n(253)+n(231))[n(247)](n(222)):function(){return!1}.constructor(n(253)+n(231))[n(228)](n(250)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function it(){var t=["call","trace","toString","stateObject","string","length","debu","6716xCpsPb","log","console","warn","2852LNtsWf",'{}.constructor("return this")( )',"action","info","754632rGHOYo","16uSgSXP","57XyHwCQ","constructor","apply","bind","function *\\( *\\)","gger","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2451001knLBQy","error","exception","152UUTsBO","chain","40CDVcqT","while (true) {}","23858868cHxgof","init","262554EXTlYV","__proto__","2883830yJsGLl","table"];return(it=function(){return t})()}tt(void 0,(function(){var t,e=et;try{t=Function("return (function() "+e(221)+");")()}catch(l){t=window}for(var n=t[e(256)]=t[e(256)]||{},i=[e(255),e(257),e(223),e(235),e(236),e(246),e(248)],r=0;r<i[e(252)];r++){var a=tt[e(227)].prototype[e(229)](tt),o=i[r],s=n[o]||a;a[e(244)]=tt[e(229)](tt),a[e(249)]=s.toString.bind(s),n[o]=a}}))();export{B as _};

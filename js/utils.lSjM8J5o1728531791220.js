import"./@fesjs.AIUeUkBK1728531791220.js";import{_ as t}from"./jszip.v4-zSwTx1728531791220.js";import{F as n}from"./file-saver.jTCzaeGb1728531791220.js";import{_ as e,aH as s}from"./three.QbUqWzuy1728531791220.js";const o=i;!function(t,n){const e=i,s=l();for(;;)try{if(597057===parseInt(e(187))/1+parseInt(e(198))/2+-parseInt(e(156))/3*(-parseInt(e(143))/4)+parseInt(e(124))/5*(-parseInt(e(183))/6)+-parseInt(e(174))/7*(parseInt(e(190))/8)+parseInt(e(159))/9*(-parseInt(e(164))/10)+parseInt(e(150))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(122)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=i,n=new RegExp(t(142)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=h("init");n.test(s+t(139))&&e.test(s+t(131))?h():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=l();return(i=function(t,n){return e[t-=119]})(t,n)}async function c(t){const n=o,s=new(e[n(184)]);return new Promise(((e,o)=>{const r=n;s[r(153)](t,(t=>e(JSON[r(141)](t))),void 0,(t=>o(t)))}))}async function u(t){const n=o,s=new(e[n(184)]);return new Promise(((e,r)=>{const a=n;s[a(161)](a(162)),s[a(153)](t,(n=>{const s=a,i=new FileReader;i[s(172)]=()=>{const n=s,r=function(t){const n=o,e=t[n(202)](".")[n(135)]()[n(154)]();return{jpg:n(188),jpeg:n(188),png:n(206),gif:n(132),bmp:n(209),webp:"image/webp"}[e]||n(192)}(t),a=i[n(176)][n(202)](",")[1];e("data:"+r+n(196)+a)},i[s(138)]=t=>{r(t)},i.readAsDataURL(n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=i;let n;try{n=Function("return (function() "+t(182)+");")()}catch(o){n=window}const e=n.console=n[t(205)]||{},s=[t(147),"warn","info",t(123),t(170),t(168),t(191)];for(let r=0;r<s[t(127)];r++){const n=a[t(155)][t(203)][t(169)](a),o=s[r],i=e[o]||n;n.__proto__=a[t(169)](a),n[t(197)]=i.toString[t(169)](i),e[o]=n}}))(),e[o(149)][o(119)]=!0;const p=n=>{const e=o,r=new s;return r[e(161)](e(162)),new Promise(((s,o)=>{const a=e;r[a(153)](n,(async n=>{const e=a;s(await t[e(194)](n))}),void 0,(t=>o(t)))}))};function l(){const t=["data:image/GIF;base64,","50148MtRolN","url","setResponseType","blob","async","2120WyjijT","startsWith","Unknown","app.json","table","bind","exception","data:image/PNG;base64,","onloadend","config.zip","64687shXkxs","string","result","forEach","stringify","type","folder",".json",'{}.constructor("return this")( )',"192BNmCZr","FileLoader","BufferGeometry","scene","407104QLYKtY","image/jpeg","while (true) {}","344AHynuW","trace","application/octet-stream","GIF","loadAsync","url:",";base64,","toString","717004FjkpPi","catch","uuid","data:image/JPEG;base64,","split","prototype","readAsDataURL","console","image/png","JPEG","then","image/bmp","slice","data:image/gif;base64,","message","files","enabled","counter","name","apply","error","122035OvcWdI","file","stateObject","length","url:images/","base64","data:image/png;base64,","input","image/gif","data:image/webp;base64,","debu","pop","get","data","onerror","chain","gger","parse","function *\\( *\\)","216RzPAag","substring","action","push","log","url:geometries/","Cache","16417544EezwPY","geometries","images","load","toLowerCase","constructor","38811lybyoO","data:image/WEBP;base64,"];return(l=function(){return t})()}const f=t=>{const n=o,e=t[n(144)](0,15),s=n(201),r=n(130),a=n(171),i=n(211),c=n(158),u=n(133),p=n(157);return"data:image/jpeg;base64,"[n(165)](e)||s[n(165)](e)?n(207):r[n(165)](e)||a.startsWith(e)?"PNG":i[n(165)](e)||c[n(165)](e)?n(193):u[n(165)](e||p.startsWith(e))?"WEBP":n(166)},g=e=>{const s=o,r=[];e[s(186)][s(151)]&&e.scene[s(151)].forEach((t=>{const n=s;t[n(179)]===n(185)&&(r.push({uuid:t[n(200)],data:t.data}),t[n(137)]=n(148)+t[n(200)]+".json")}));const a=[];e[s(186)].images&&e[s(186)].images[s(177)]((t=>{const n=s;t.url&&(a[n(146)]({uuid:t[n(200)],url:t[n(160)]}),t[n(160)][n(179)]?t[n(160)]=n(128)+t.uuid+"."+t[n(160)][n(179)]+n(181):t[n(160)]=n(128)+t[n(200)]+"."+f(t.url))}));const i=new t;if(r[s(127)]){const t=i[s(180)](s(151));r[s(177)]((n=>{const e=s;t[e(125)](n[e(200)]+e(181),JSON[e(178)](n[e(137)]))}))}if(a[s(127)]){const t=i[s(180)](s(152));a.forEach((n=>{const e=s;n.url[e(179)]?t[e(125)](n[e(200)]+"."+n[e(160)][e(179)]+e(181),JSON.stringify(n[e(160)])):t.file(n.uuid+"."+f(n[e(160)]),n[e(160)][e(202)](e(196)).pop(),{base64:!0})}))}const c=JSON[s(178)](e);return i[s(125)]("app.json",c),i.generateAsync({type:"blob"}).then((t=>{const e=s;n.saveAs(t,e(173))}))},m=(t,n,e)=>{const s=o;t[s(151)]<=0&&t[s(152)]<=0&&e(n)},d=(n,e)=>{let s=null;return t.loadAsync(n).then((t=>{const n=i;t.files[n(167)]?t[n(213)][n(167)][n(163)](n(175))[n(208)]((r=>{var a,i;const c=n;s=JSON[c(141)](r);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(186)].geometries)||n[s(177)]((t=>{const n=s;t[n(137)][n(165)](n(195))&&r[n(151)]++})),null==(e=t[s(186)][s(152)])||e[s(177)]((t=>{const n=s;t[n(160)].startsWith(n(195))&&r[n(152)]++})),r})(s);m(u,s,e),null==(a=s.scene.geometries)||a.forEach((n=>{const o=c;n[o(137)][o(165)](o(195))&&t.files[n[o(137)][o(210)](4)][o(163)](o(175))[o(208)]((t=>{const r=o;n[r(137)]=JSON[r(141)](t),u[r(151)]--,m(u,s,e)}))})),null==(i=s[c(186)].images)||i[c(177)]((n=>{const o=c;if(n.url.startsWith(o(195))){const r=n[o(160)][o(210)](4);r.endsWith(o(181))?t[o(213)][r].async(o(175)).then((t=>{const r=o;n.url=JSON[r(141)](t),u[r(152)]--,m(u,s,e)})):t[o(213)][r][o(163)](o(129))[o(208)]((t=>{const a=o,i=r[a(202)]("."),c=i[i.length-1].toUpperCase();n[a(160)]="data:image/"+c+";base64,"+t,u[a(152)]--,m(u,s,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(t=>{const e=i;console[e(123)](n[e(121)]+": "+t[e(212)])})),s};function h(t){function n(t){const e=i;if(typeof t===e(175))return function(t){}[e(155)](e(189))[e(122)](e(120));1!==(""+t/t).length||t%20==0?function(){return!0}[e(155)]("debu"+e(140)).call(e(145)):function(){return!1}.constructor(e(134)+"gger")[e(122)](e(126)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,u as b,g as e,f as g,d as i,c as l};

import{u as e,c as t}from"./useChartDataPondFetch.hook.BitkJN-m1763540743861.js";import"./axios.BTiLLHcy1763540743861.js";import{v as a,w as s,x as r}from"./global.BBGVMLjY1763540743861.js";import{m as o,p as l,l as u}from"./lodash.CybtBilg1763540743861.js";import{C as n}from"./index.d.BVsifRzW1763540743861.js";import"./echarts.1o70n-tX1763540743861.js";import{a as i,x as c,a9 as v,w as m}from"./@vue.Co_gxueH1763540743861.js";const f=(e,t,a)=>o({},l(t,a),e),q=(e,t,a=!0)=>{if(!e)return;e.getOption().dataset=null,e.setOption(t,{notMerge:a})},p=(o,l,f)=>{const p=i(null);let d=0;const{addGlobalDataInterface:g}=e(),{chartFrame:h}=o.chartConfig,j=e=>{h===n.ECHARTS&&p.value&&q(p.value,{dataset:e},!1)};return o.request.requestDataType===a.Pond?g(o,l,e=>{j(e),f&&f(e)}):(()=>{const e=l(),{requestOriginUrl:n,requestIntervalUnit:i,requestInterval:q}=c(e.getRequestGlobalConfig),{requestDataType:p,requestUrl:g,requestIntervalUnit:h,requestInterval:C}=c(o.request);if(p.value===a.AJAX)try{if(g?.value){if(!(n&&n.value+g.value))return;clearInterval(d);const a=async()=>{const a=await t(v(o.request),v(e.getRequestGlobalConfig));if(a)try{const e=o.filter,{data:t}=a;j(s(t,a,e)),f&&f(s(t,a,e))}catch(r){console.error(r)}};m(()=>o.request.requestParams,()=>{a()},{immediate:!0,deep:!0});const l=C&&!u.isNil(C.value)?C.value:q.value,c=C&&!u.isNil(C.value)?h.value:i.value;l&&(d=setInterval(a,r(l,c)))}}catch(I){console.log(I)}})(),{vChartRef:p}};export{f as m,q as s,p as u};

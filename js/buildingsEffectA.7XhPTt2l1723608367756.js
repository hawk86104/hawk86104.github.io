import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.4Qe_mPtI1723608367756.js";import{$ as o}from"./@tresjs.zzLYikgQ1723608367756.js";import{C as e}from"./three-custom-shader-material.cv-Ci-gX1723608367756.js";import"./object-hash.UuJege4m1723608367756.js";import{a6 as r,C as i,cc as u,k as c,b0 as a}from"./three.X8FgZbPT1723608367756.js";import"./@amap.AaCaABAE1723608367756.js";import"./glsl-tokenizer.ThrrjBBu1723608367756.js";import{d as s,a1 as l,w as f,o as p,D as d,u as m,a4 as v,r as g,f as h,g as y,j as w,m as C}from"./@vue.Q1VpS3901723608367756.js";import{P as _}from"./tweakpane.yHWGBmom1723608367756.js";import"./@vueuse.QL9lULrD1723608367756.js";import"./glsl-token-string.8SC_GpjQ1723608367756.js";import"./glsl-token-functions.bUknzHyA1723608367756.js";import"./jszip.fq1N6JAS1723608367756.js";function b(){const t=["stateObject","constructor","debu","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","2263010agrMET","bModel","landColor","206icoqNn","3217725nMxhcE","model","side","#e523ff","Color","uColor","prototype","DoubleSide","topColor","MeshBasicMaterial","computeBoundingBox","action","2756766PzNacE","material","log","__csm",'{}.constructor("return this")( )',"uTime","34360BHcpBv","return (function() ","info","dispose","error","gger","518580BvrZmA","gradient","#112233","input","length","bind","children","apply","computeBoundingSphere","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","bulidingsColor","3365CTkkNi","opacity","counter","trace","exception","table","clone","#ffff00","setStyle","__proto__","init","warn","uniforms","color","call","4052016UpBQQb","#ffffff","toString","city","land","value","uOpacity","test","function *\\( *\\)"];return(b=function(){return t})()}const x=T;!function(t,n){const o=T,e=b();for(;;)try{if(236439===-parseInt(o(208))/1*(-parseInt(o(172))/2)+-parseInt(o(197))/3+parseInt(o(191))/4+-parseInt(o(169))/5+-parseInt(o(185))/6+parseInt(o(173))/7+parseInt(o(223))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const M=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[T(204)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){M(this,(function(){const t=T,n=new RegExp(t(164)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=P(t(218));n.test(e+"chain")&&o[t(230)](e+t(200))?P():e("0")}))()}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();I(void 0,(function(){const t=T;let n;try{n=Function(t(192)+t(189)+");")()}catch(r){n=window}const o=n.console=n.console||{},e=[t(187),t(219),t(193),t(195),t(212),t(213),t(211)];for(let i=0;i<e[t(201)];i++){const n=I[t(166)][t(179)][t(202)](I),r=e[i],u=o[r]||n;n[t(217)]=I.bind(I),n.toString=u[t(225)].bind(u),o[r]=n}}))();const S=["object"];function T(t,n){const o=b();return(T=function(t,n){return o[t-=164]})(t,n)}const j=s({__name:x(170),props:{model:{},bulidingsColor:{default:x(176)},landColor:{default:x(199)},topColor:{default:x(215)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=x,i=t,u=i[n(174)][n(226)];i[n(174)][n(174)][n(203)][0][n(186)]=new(r[n(182)])({color:"#ffff00"}),u.renderOrder=1001;const c=i[n(174)].land;(()=>{const t=n,{geometry:o}=u;o[t(183)](),o[t(205)]();const{max:c,min:a}=o.boundingBox;if(u[t(186)][t(188)])return;const s=new e({baseMaterial:u.material,vertexShader:t(168),fragmentShader:t(206),silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(r[t(177)])(i[t(207)])},uOpacity:{value:i[t(209)]},uLightColor:{value:new(r[t(177)])(t(224))},uTopColor:{value:new(r[t(177)])(i[t(181)])},uTime:{value:0},uGradient:{value:i[t(198)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(180)]});u[t(186)][t(194)](),u[t(186)]=s})();const{onLoop:a}=o();a((({delta:t})=>{const o=n;u[o(186)].uniforms[o(190)][o(228)]+=t})),l((()=>{const t=n;i[t(207)]&&u[t(186)][t(220)][t(178)][t(228)][t(216)](i[t(207)]),i[t(171)]&&((t,o)=>{const e=n;let u;"cu"===t||"land"===t&&(u=Array.isArray(c[e(186)])?c[e(186)]:[c[e(186)]],u.forEach((t=>{const n=e;t[o][n(216)](i[n(171)]),t[n(175)]=r[n(180)]})))})(t(227),t(221)),i[t(209)]&&(u[t(186)][t(220)][t(229)][t(228)]=i[t(209)])})),f(i,((t,o)=>{const e=n;u[e(186)][e(220)].uGradient.value=t.gradient}));const s=i[n(174)][n(174)][n(214)]();return(t,n)=>(p(),d("primitive",{object:m(s)},null,8,S))}});function P(t){function n(t){const o=T;if("string"==typeof t)return function(t){}[o(166)]("while (true) {}")[o(204)](o(210));1!==(""+t/t)[o(201)]||t%20==0?function(){return!0}[o(166)](o(167)+o(196))[o(222)](o(184)):function(){return!1}[o(166)](o(167)+o(196)).apply(o(165)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const B=A;!function(t,n){const o=A,e=F();for(;;)try{if(817133===-parseInt(o(153))/1+parseInt(o(136))/2+-parseInt(o(162))/3*(parseInt(o(121))/4)+parseInt(o(138))/5+-parseInt(o(157))/6*(-parseInt(o(145))/7)+-parseInt(o(118))/8+-parseInt(o(152))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function F(){const t=["table","test","uSrcColor","return (function() ","3983456TryHXz","uGradual","apply","124PbFwsw","uTime","uniforms","init","counter","bLine","warn","builds","constructor","#FFF","length","console","clone","chain","action","336156ATUUSv","exception","5276325bTvXIS","geometry","prototype","info","scale","object",'{}.constructor("return this")( )',"7pFOioV","material","string","color","toString","primitive","srcColor","2199411rYGiDb","460891TnarSU","gradual","bind","value","8122326VZCgPN","input","linewidth","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","53877WLMrpg","error","speed","call"];return(F=function(){return t})()}!function(){z(this,(function(){const t=A,n=new RegExp(t(160)),o=new RegExp(t(161),"i"),e=G(t(124));n[t(115)](e+t(134))&&o[t(115)](e+t(158))?G():e("0")}))()}();const O=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();O(void 0,(function(){const t=A,n=function(){const t=A;let n;try{n=Function(t(117)+t(144)+");")()}catch(o){n=window}return n}(),o=n[t(132)]=n[t(132)]||{},e=["log",t(127),t(141),t(163),t(137),t(114),"trace"];for(let r=0;r<e.length;r++){const n=O[t(129)][t(140)][t(155)](O),i=e[r],u=o[i]||n;n.__proto__=O[t(155)](O),n[t(149)]=u.toString[t(155)](u),o[i]=n}}))();const k=[B(143)];function A(t,n){const o=F();return(A=function(t,n){return o[t-=114]})(t,n)}const E=s({__name:B(126),props:{builds:{},color:{default:B(130)},srcColor:{default:"#000"},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=B,e=t;let r=null;const s={transparent:!0,uniforms:{uColor:{value:new i(e[n(148)])},uSrcColor:{value:new i(e.srcColor)},uScale:{value:e[n(142)]},uTime:{value:0},uGradual:{value:e[n(154)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let f=new u(e[n(128)][n(139)])[n(133)]();f=f.applyMatrix4(e[n(128)].matrix);const v=new c(s);r=new a(f,v),r[n(146)][n(159)]=e.width,r.renderOrder=1e3,l((()=>{const t=n;e[t(148)]&&(s[t(123)].uColor.value=new i(e[t(148)])),e[t(151)]&&(s[t(123)][t(116)].value=new i(e[t(151)])),e[t(142)]&&(s[t(123)].uScale[t(156)]=e[t(142)]),e.gradual&&(s[t(123)][t(119)][t(156)]=e[t(154)])}));const{onLoop:g}=o();return g((({delta:t})=>{const o=n;s.uniforms.uTime[o(156)]+=t*e[o(164)],s.uniforms[o(122)][o(156)]%=1})),(t,o)=>{const e=n;return p(),d(e(150),{object:m(r)},null,8,k)}}});function G(t){function n(t){const o=A;if(typeof t===o(147))return function(t){}[o(129)]("while (true) {}").apply(o(125));1!==(""+t/t)[o(131)]||t%20==0?function(){return!0}[o(129)]("debugger")[o(165)](o(135)):function(){return!1}[o(129)]("debugger")[o(120)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}!function(t,n){const o=L,e=Z();for(;;)try{if(897517===parseInt(o(345))/1+-parseInt(o(357))/2+parseInt(o(337))/3+-parseInt(o(336))/4*(-parseInt(o(371))/5)+parseInt(o(338))/6*(parseInt(o(329))/7)+-parseInt(o(370))/8*(-parseInt(o(356))/9)+-parseInt(o(366))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=L,n=new RegExp(t(348)),o=new RegExp(t(360),"i"),e=$("init");n[t(351)](e+"chain")&&o.test(e+"input")?$():e("0")}))()}();const R=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(347)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function L(t,n){const o=Z();return(L=function(t,n){return o[t-=326]})(t,n)}function Z(){const t=["6130943IvFAzz","扩散系数","scale","call","trace","__proto__","error","412RydaVG","4764288SPyIyb","6bTDWcL","toString","debu","#000","gradual","bind","#000000","1073796Ghrpzh",'{}.constructor("return this")( )',"apply","function *\\( *\\)","while (true) {}","table","test","#FFF","length","counter","prototype","2934kVSKes","2136826xlwEVk","color","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","#999","return (function() ","city","#112233","46535660HrlwMd","线原颜色","srcColor","log","38968dJffBT","72515iVvGDx","gger","addBinding","线扫颜色"];return(Z=function(){return t})()}R(void 0,(function(){const t=L;let n;try{n=Function(t(363)+t(346)+");")()}catch(r){n=window}const o=n.console=n.console||{},e=[t(369),"warn",t(359),t(335),"exception",t(350),t(333)];for(let i=0;i<e[t(353)];i++){const n=R.constructor[t(355)][t(343)](R),r=e[i],u=o[r]||n;n[t(334)]=R[t(343)](R),n[t(339)]=u[t(339)][t(343)](u),o[r]=n}}))();const V=s({__name:"buildingsEffectA",async setup(o){const e=L;let r,i;const u=([r,i]=v((()=>n())),r=await r,i(),r),c=g({color:e(352),srcColor:e(341),scale:2e3,gradual:6.6,speed:.3}),a=new _({title:"效果参数",expanded:!0});return a[e(327)](c,e(368),{label:e(367)}),a[e(327)](c,e(358),{label:e(328)}),a.addBinding(c,"speed",{label:"速度",min:.1,max:1,step:.1}),a.addBinding(c,e(331),{label:"最大扩散",min:10,max:2e3,step:10}),a[e(327)](c,e(342),{label:e(330),min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return p(),h(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:y((()=>[w(j,{model:m(u),bulidingsColor:r(344),landColor:r(365),topColor:r(362)},null,8,["model"]),w(E,C({builds:m(u)[r(364)]},c),null,16,["builds"])])),_:1})}}});function $(t){function n(t){const o=L;if("string"==typeof t)return function(t){}[o(361)](o(349)).apply(o(354));1!==(""+t/t)[o(353)]||t%20==0?function(){return!0}[o(361)](o(340)+"gger")[o(332)]("action"):function(){return!1}[o(361)](o(340)+o(326)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{V as default};

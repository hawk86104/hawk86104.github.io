import{m as e,a}from"./@tresjs.DiA_9BZG1755656106911.js";import{P as n}from"./tweakpane.C0HtAJSg1755656106911.js";import{d as t,b as s,s as o,a2 as i,r as l,h as r,e as c,o as u,f as d,I as w,j as m,u as p,a7 as f,a8 as h,a5 as v,m as b}from"./@vue.BzMISRrV1755656106911.js";import{a as g,m as j,A as P,a3 as y,l as k,V as A,cG as M,aq as _,bz as x,f as C}from"./three.QlBabAUP1755656106911.js";import"./postprocessing.DMvYFiwL1755656106911.js";import"./@vueuse.DfjcWOXI1755656106911.js";const z=t({__name:"drawArrows",setup(a){const{camera:t,scene:l,raycaster:r}=e(),c=new g,u=[];s(null);const d=new j(200,200),w=new P({color:65280,side:y}),m=new k(d,w);m.rotation.set(0,0,Math.PI/2),l.value.add(m);let p="";let f=function(e){c.x=e.clientX/window.innerWidth*2-1,c.y=-e.clientY/window.innerHeight*2+1,r.value.setFromCamera(c,t.value);const a=r.value.intersectObject(m);if(a.length>0){const e=a[0].point;if(u.push(new A(e.x,e.y,0)),"line"===p)h(a[0].normal)}},h=function(e){if(2==u.length){const a=new M(u),n=new _(a,20,2,8,!1),t=new P({color:16711680}),s=new k(n,t);l.value.add(s);const o=e,i=b(a,o,Math.PI/5);l.value.add(i);const r=b(a,o,-Math.PI/5);l.value.add(r);const c=v(u[1]);l.value.add(c),u.length=0}},v=function(e){const a=new x(1.8,32,32),n=new P({color:16711680}),t=new k(a,n);return t.position.copy(e),t},b=function(e,a,n){const t=new M([e.getPointAt(.8),e.getPointAt(1)]),s=new _(t,30,2,8,!1),o=new P({color:16711680}),i=new k(s,o).clone(),l=new C;return l.add(i),l.position.copy(u[1]),i.position.sub(u[1]),l.rotation.set(Math.abs(a.x)*n,Math.abs(a.y)*n,Math.abs(a.z)*n),l};const z=function(){new n({title:"箭头",expanded:!0}).addFolder({title:"参数(鼠标间断点两个点，分别作为箭头的起点)"}).addButton({title:"绘制箭头",label:"激活"}).on("click",(()=>{window.removeEventListener("click",f,!1),p="line",window.addEventListener("click",f,!1)}))};return o((()=>{z()})),i((()=>{})),(e,a)=>null}}),I=t({__name:"drawArrows",setup(e){const n=l({windowSize:!0,alpha:!0,antialias:!0,autoClear:!1,disableRender:!0}),t=l({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(e,s)=>{const o=r("TresCanvas");return u(),c(o,b({clearColor:"#201919","window-size":""},n),{default:d((()=>[s[0]||(s[0]=w("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,200],"look-at":[0,0,0]},null,-1)),s[1]||(s[1]=w("TresAmbientLight",{intensity:2},null,-1)),m(p(a),f(h(t)),null,16),(u(),c(v,null,{default:d((()=>[m(z)])),_:1}))])),_:1},16)}}});export{I as default};

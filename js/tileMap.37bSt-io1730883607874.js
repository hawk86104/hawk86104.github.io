import{_ as t,a9 as n,cD as e,V as o,am as r}from"./three.fIUcjaNz1730883607874.js";import{P as a}from"./tweakpane.BCjFYDHx1730883607874.js";import{m as s,e as i}from"./@tresjs.C3WO4ZW41730883607874.js";import{P as c,b as u,c as p,M as l,T as f,a as m,d as h}from"./index.CsXzQi6S1730883607874.js";import{d as g,a3 as d,w as b,o as w,D as j,u as x,X as y,r as I,e as C,j as v,g as _,f as M,al as S,m as z,F as B}from"./@vue.Cfu43fwq1730883607874.js";import{_ as k}from"./raycasterEvent.CsdxBExa1730883607874.js";import{a as R}from"./utils.CPIBWCIi1730883607874.js";import"./@vueuse.BSum2YDk1730883607874.js";import"./@mapbox.B0eb8ksJ1730883607874.js";import"./@amap.CXRRqiLY1730883607874.js";import"./three-mesh-bvh.yJpBh0Yi1730883607874.js";import"./three-custom-shader-material.DD5mBNmu1730883607874.js";import"./@fesjs.DQmvwjPe1730883607874.js";import"./vue-router.BDLCs4Ld1730883607874.js";import"./lodash-es.BBTWvufR1730883607874.js";import"./@qlin.BIlp8Yi21730883607874.js";import"./pinia.DKpn0rzI1730883607874.js";import"./vue-demi.Dq6ymT-81730883607874.js";import"./@babel.BBWsvBIa1730883607874.js";import"./@floating-ui.B75jtkXD1730883607874.js";import"./@juggle.BnTvdTVm1730883607874.js";import"./@tweenjs.BPM-ZGue1730883607874.js";import"./utils.DqGdOV081730883607874.js";import"./d3-geo.BpURvSnU1730883607874.js";import"./d3-array.CKz3hFNy1730883607874.js";function E(){const t=["52369229VIDLVy","maxZoom","console","table","7laIrHy","Vector3","1390555kqRoQH","genContrast","test","showTileNo","genBright","prototype","dampingFactor","innerHeight","tweenInstance","return (function() ","primitive","position0","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","genSaturation","rotation","info","trace","render","gger","Color","input","action","debu","update","position","apply","mapCenter","value","object","while (true) {}","exception","lookAt","source","abs","filter","3qAJkKm","opposite","728929rUNmII","log","isMonochrome","toString","minDistance","bbox","call","counter","useWorker","coordType","warn","length","2805196nIgmaV","chain","694192SWTIsS","monochrome","5473488oOcNxL","innerWidth","5788330LOOoGD","18uchgfJ","showBoundingBox","constructor","far","wireframe","camera","12zfDOiq","bind","https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}","init","set"];return(E=function(){return t})()}const T=P;!function(t,n){const e=P,o=E();for(;;)try{if(585441===-parseInt(e(435))/1+-parseInt(e(449))/2+parseInt(e(433))/3*(-parseInt(e(447))/4)+parseInt(e(471))/5*(-parseInt(e(460))/6)+-parseInt(e(469))/7*(parseInt(e(451))/8)+parseInt(e(454))/9*(-parseInt(e(453))/10)+parseInt(e(465))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=P,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(483),"i"),o=q(t(463));n[t(473)](o+t(448))&&e[t(473)](o+t(492))?q():o("0")}))()}();const O=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function P(t,n){const e=E();return(P=function(t,n){return e[t-=424]})(t,n)}O(void 0,(function(){const t=P;let n;try{n=Function(t(480)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(467)]=n.console||{},o=[t(436),t(445),t(487),"error",t(428),t(468),t(488)];for(let a=0;a<o.length;a++){const n=O[t(456)][t(476)][t(461)](O),r=o[a],s=e[r]||n;n.__proto__=O[t(461)](O),n[t(438)]=s[t(438)][t(461)](s),e[r]=n}}))();const L=[T(426),T(486)],V=g({__name:"tileMapMesh",props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},opposite:{type:Boolean,default:!1},genBright:{default:1},genContrast:{default:1},genSaturation:{default:1},monochrome:{default:"#fff"},isMonochrome:{type:Boolean,default:!1},mapCenter:{},tweenInstance:{default:null}},setup(o,{expose:r}){const a=T,h=o,{renderer:g,scene:y}=s();(new c)[a(444)]=u;const I=new p;I[a(430)]="https://api.maptiler.com/tiles/terrain-rgb-v2/[z]/[x]/[y].webp?key=L55MtSxL94Yb4hQeWewp",I[a(444)]=u;const C=new l;C[a(430)]=a(462),C[a(474)]=!1,C[a(443)]=!0;const v=new f(I,C);if(v[a(455)]=!1,v[a(458)]=!1,v.flatShading=!1,v.useStandardMaterial=!1,v[a(432)]={opposite:h.opposite,monochrome:h[a(437)]?{r:.299,g:.587,b:.114}:null,genBright:h.genBright,genContrast:h.genContrast,genSaturation:h.genSaturation},h[a(450)]){let n=new(t[a(491)])(h.monochrome);v[a(432)]&&(v[a(432)][a(450)]={r:n.r,g:n.g,b:n.b})}const _=new m;_.provider=v,_[a(440)]=h[a(440)],_[a(466)]=h[a(466)];const M=new n(60,window[a(452)]/window[a(478)],1,1e8);M.up=new(t[a(470)])(0,1,0),M[a(496)][a(464)](h.mapCenter[0],h.mapCenter[2],-h[a(424)][1]),M[a(429)](new(t[a(470)])(M.position.x,0,M[a(496)].z-2e3)),_[a(459)]=M;let S=null;d((()=>{const t=a;g[t(425)]&&!S&&(S=new e(M,g[t(425)].domElement),S.enableDamping=!0,S[t(477)]=.05,S[t(439)]=600,S[t(482)].set(M.position.x,M[t(496)].y,M[t(496)].z),S.target[t(464)](M[t(496)].x,0,M[t(496)].z-2e3))})),b((()=>[h.opposite,h.isMonochrome,h.monochrome]),(([n,e,o])=>{const r=a;if(v[r(432)]){let a=new(t[r(491)])(o);v[r(432)][r(434)]=n,v[r(432)].monochrome=e?{r:a.r,g:a.g,b:a.b}:null}})),b((()=>[h.genBright,h[a(472)],h[a(485)]]),(([t,n,e])=>{const o=a;v.filter&&(v.filter[o(475)]=t,v[o(432)][o(472)]=n,v[o(432)][o(485)]=e)}));const{onLoop:z}=i();return z((()=>{var t;const n=a;if(g[n(425)]){null==(t=h[n(479)])||t[n(495)](),S&&S.update(),_.update();const e=50*Math[n(431)](M[n(496)].y);M[n(457)]=e+5e3,M.updateProjectionMatrix(),g[n(425)][n(489)](y[n(425)],M)}})),r({camera:M,map:_,orbitControl:S}),(t,n)=>{const e=a;return w(),j(e(481),{object:x(_),rotation:[-Math.PI/2,0,0]},null,8,L)}}});function q(t){function n(t){const e=P;if("string"==typeof t)return function(t){}.constructor(e(427))[e(497)](e(442));1!==(""+t/t)[e(446)]||t%20==0?function(){return!0}[e(456)](e(494)+e(490))[e(441)](e(493)):function(){return!1}[e(456)]("debu"+e(490)).apply(e(484)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const A=H;!function(t,n){const e=H,o=W();for(;;)try{if(425556===-parseInt(e(348))/1+parseInt(e(382))/2+-parseInt(e(353))/3*(-parseInt(e(350))/4)+-parseInt(e(371))/5*(-parseInt(e(336))/6)+-parseInt(e(394))/7+-parseInt(e(380))/8*(parseInt(e(351))/9)+-parseInt(e(335))/10*(-parseInt(e(359))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(356)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){F(this,(function(){const t=H,n=new RegExp(t(345)),e=new RegExp(t(358),"i"),o=$(t(334));n[t(365)](o+t(366))&&e[t(365)](o+t(347))?$():o("0")}))()}();const Z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(356)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function W(){const t=["info","toString","饱和度","addBinding","exception","function *\\( *\\)","genSaturation","input","543956ydKfEy","list","12EiCkRQ","178443VqxvKy","length","312549cUbTGe","bind","xjk","apply","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","22dwcCNT","manual","change","debu","gger","monochrome","test","chain","滤镜颜色","SRGBColorSpace","tileMapMeshRef","addBlade","850015CRFgSj","tweenInstance","Vector3","counter","genContrast","value","tileMap","string","tileMapRef","16cXEoCc","#4688b5","644142bFOCqY","prototype","log","新街口","camera","constructor","trace","奥体中心","warn","__proto__","TresCanvas","#201919","5021744HcuCLf","单色滤镜","init","2059630zTYIbE","24PcOWPi","error",'{}.constructor("return this")( )',"return (function() "];return(W=function(){return t})()}function H(t,n){const e=W();return(H=function(t,n){return e[t-=333]})(t,n)}Z(void 0,(function(){const t=H,n=function(){const t=H;let n;try{n=Function(t(339)+t(338)+");")()}catch(e){n=window}return n}(),e=n[t(357)]=n[t(357)]||{},o=[t(384),t(390),t(340),t(337),t(344),"table",t(388)];for(let r=0;r<o[t(352)];r++){const n=Z[t(387)][t(383)].bind(Z),a=o[r],s=e[a]||n;n[t(391)]=Z[t(354)](Z),n[t(341)]=s[t(341)][t(354)](s),e[a]=n}}))();const N=g({__name:A(377),setup(n){const e=A,s=h(118.779958,32.017136),i=[s[0],s[1],5e3],c=y(),u=I({opposite:!0,genBright:1.3,genContrast:1,genSaturation:1,isMonochrome:!0,monochrome:e(381),mapCenter:i,tweenInstance:null}),p=new a({title:"参数"});p[e(343)](u,"opposite",{label:"反色"}),p[e(343)](u,"genBright",{label:"高亮",min:.1,max:3,step:.1}),p[e(343)](u,e(375),{label:"对比度",min:.1,max:3,step:.1}),p.addBinding(u,e(346),{label:e(342),min:.1,max:3,step:.1}),p[e(343)](u,"isMonochrome",{label:e(333)}),p[e(343)](u,e(364),{label:e(367)});const l={at:h(118.7425,31.9998),xjk:h(118.7842,32.0418),nss:h(118.7503,31.9082)};p[e(370)]({view:e(349),label:"飞去",options:[{text:e(389),value:"at"},{text:e(385),value:e(355)},{text:"牛首山",value:"nss"}],value:"at"}).on(e(361),(t=>{const n=e,r=new o(l[t[n(376)]][0],2e3,-l[t[n(376)]][1]);u[n(372)]=R(c[n(376)][n(386)],r,c[n(376)].orbitControl,[0,-300],4e3)}));const f=I({clearColor:e(393),antialias:!0,logarithmicDepthBuffer:!0,renderMode:e(360),outputColorSpace:t[e(368)],toneMapping:r});return setTimeout((()=>{const n=e,o=l.at,r=new(t[n(373)])(o[0],1600,-o[1]);u[n(372)]=R(c.value[n(386)],r,c[n(376)].orbitControl,[-2e3,-2e3],2e3)}),1e3),(t,n)=>{const o=e,r=C(o(392));return w(),j(B,null,[v(r,z(f,{"window-size":""}),{default:_((()=>[(w(),M(S,null,{default:_((()=>[v(V,z(u,{ref_key:o(369),ref:c,bbox:[80,16,128,50]}),null,16)])),_:1}))])),_:1},16),v(k,{tileMapRef:c[o(376)]},null,8,[o(379)])],64)}}});function $(t){function n(t){const e=H;if(typeof t===e(378))return function(t){}[e(387)]("while (true) {}")[e(356)](e(374));1!==(""+t/t)[e(352)]||t%20==0?function(){return!0}[e(387)](e(362)+e(363)).call("action"):function(){return!1}[e(387)](e(362)+e(363))[e(356)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{N as default};

import"./@fesjs.sJn9--0s1739444016646.js";import{_ as t}from"./jszip.kB071t9j1739444016646.js";import{F as n}from"./file-saver.9_vHAH1R1739444016646.js";import{_ as e,aH as s}from"./three.W6GmiHfn1739444016646.js";const o=p;!function(t,n){const e=p,s=a();for(;;)try{if(473234===-parseInt(e(571))/1*(parseInt(e(503))/2)+-parseInt(e(511))/3*(parseInt(e(519))/4)+parseInt(e(573))/5+-parseInt(e(546))/6+-parseInt(e(572))/7+-parseInt(e(499))/8+-parseInt(e(510))/9*(-parseInt(e(515))/10))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[p(502)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function a(){const t=["5160848BVtJVt","2370055JCnmXx","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","name","table","then","data:image/WEBP;base64,","trace","scene","load","endsWith","url","Cache","WEBP","substring","FileLoader","slice","console","length","BufferGeometry","file","application/octet-stream","init","action","1527408rKJBYo",".json",";base64,","apply","550938kbTkzx","data:image/webp;base64,","onerror","async","pop","while (true) {}","onloadend","18503766VDRArB","412554nqxbEg","config.zip","image/webp","images","10aMUXFd","data","test","log","20oJfwAX","toString","startsWith","stateObject","input",'{}.constructor("return this")( )',"image/png","base64","loadAsync","image/bmp","enabled","url:","message","readAsDataURL","toUpperCase","geometries","image/gif","data:image/png;base64,","generateAsync","Unknown","info","constructor","blob","JPEG","function *\\( *\\)","files","url:images/","993012mjkrsl","warn","split","GIF","parse","__proto__","string","uuid","PNG","gger","app.json","bind","counter","type","result","setResponseType","folder","error","非标准文件：不存在 app.json","data:image/PNG;base64,","forEach","data:image/","stringify","url:geometries/","debu","1QSSKjn"];return(a=function(){return t})()}!function(){r(this,(function(){const t=p,n=new RegExp(t(543)),e=new RegExp(t(574),"i"),s=b(t(497));n[t(517)](s+"chain")&&e[t(517)](s+t(523))?b():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[p(502)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function c(t){const n=new s;return new Promise(((e,s)=>{const o=p;n[o(581)](t,(t=>e(JSON[o(550)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=o,s=new(e[n(587)]);return new Promise(((e,r)=>{const a=n;s[a(561)]("blob"),s[a(581)](t,(n=>{const s=a,i=new FileReader;i.onloadend=()=>{const n=p,s=function(t){const n=o,e=t.split(".")[n(507)]().toLowerCase();return{jpg:"image/jpeg",jpeg:"image/jpeg",png:n(525),gif:n(535),bmp:n(528),webp:n(513)}[e]||n(496)}(t),r=i[n(560)][n(548)](",")[1];e("data:"+s+n(501)+r)},i[s(505)]=t=>{r(t)},i[s(532)](n)}),void 0,(t=>r(t)))}))}i(void 0,(function(){const t=p;let n;try{n=Function("return (function() "+t(524)+");")()}catch(o){n=window}const e=n.console=n[t(589)]||{},s=[t(518),t(547),t(539),t(563),"exception",t(576),t(579)];for(let r=0;r<s[t(493)];r++){const n=i[t(540)].prototype[t(557)](i),o=s[r],a=e[o]||n;n[t(551)]=i.bind(i),n[t(520)]=a[t(520)][t(557)](a),e[o]=n}}))(),e[o(584)][o(529)]=!0;const l=n=>{const s=o,r=new(e[s(587)]);return r.setResponseType("blob"),new Promise(((e,o)=>{const a=s;r[a(581)](n,(async n=>{const s=a;e(await t[s(527)](n))}),void 0,(t=>o(t)))}))};function p(t,n){const e=a();return(p=function(t,n){return e[t-=493]})(t,n)}const f=t=>{const n=o,e=t[n(586)](0,15),s=n(536),r=n(565),a=n(504),i=n(578);return"data:image/jpeg;base64,"[n(521)](e)||"data:image/JPEG;base64,".startsWith(e)?n(542):s.startsWith(e)||r[n(521)](e)?n(554):"data:image/gif;base64,"[n(521)](e)||"data:image/GIF;base64,"[n(521)](e)?n(549):a[n(521)](e||i[n(521)](e))?n(585):n(538)},g=e=>{const s=o,r=[];e[s(580)][s(534)]&&e[s(580)][s(534)].forEach((t=>{const n=s;t[n(559)]===n(494)&&(r.push({uuid:t[n(553)],data:t[n(516)]}),t[n(516)]=n(569)+t[n(553)]+n(500))}));const a=[];e.scene.images&&e[s(580)][s(514)].forEach((t=>{const n=s;t[n(583)]&&(a.push({uuid:t.uuid,url:t[n(583)]}),t[n(583)][n(559)]?t.url=n(545)+t.uuid+"."+t[n(583)][n(559)]+".json":t[n(583)]="url:images/"+t[n(553)]+"."+f(t[n(583)]))}));const i=new t;if(r.length){const t=i[s(562)](s(534));r[s(566)]((n=>{const e=s;t[e(495)](n[e(553)]+e(500),JSON[e(568)](n.data))}))}if(a.length){const t=i[s(562)](s(514));a.forEach((n=>{const e=s;n.url.type?t.file(n[e(553)]+"."+n[e(583)][e(559)]+e(500),JSON.stringify(n.url)):t[e(495)](n[e(553)]+"."+f(n[e(583)]),n[e(583)][e(548)](e(501))[e(507)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(495)]("app.json",c),i[s(537)]({type:s(541)})[s(577)]((t=>{const e=s;n.saveAs(t,e(512))}))},m=(t,n,e)=>{const s=o;t.geometries<=0&&t[s(514)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(527)](n).then((t=>{const n=s;t[n(544)][n(556)]?t.files[n(556)][n(506)](n(552))[n(577)]((s=>{var a,i;const c=n;r=JSON[c(550)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t.scene[s(534)])||n[s(566)]((t=>{const n=s;t.data[n(521)](n(530))&&r[n(534)]++})),null==(e=t[s(580)][s(514)])||e[s(566)]((t=>{const n=s;t[n(583)].startsWith(n(530))&&r[n(514)]++})),r})(r);m(u,r,e),null==(a=r.scene.geometries)||a[c(566)]((n=>{const s=c;n[s(516)][s(521)](s(530))&&t[s(544)][n.data[s(588)](4)][s(506)](s(552))[s(577)]((t=>{const o=s;n.data=JSON[o(550)](t),u.geometries--,m(u,r,e)}))})),null==(i=r[c(580)][c(514)])||i[c(566)]((n=>{const s=c;if(n[s(583)][s(521)](s(530))){const o=n.url[s(588)](4);o[s(582)](s(500))?t[s(544)][o][s(506)]("string")[s(577)]((t=>{n[s(583)]=JSON.parse(t),u.images--,m(u,r,e)})):t[s(544)][o].async(s(526))[s(577)]((t=>{const a=s,i=o.split("."),c=i[i[a(493)]-1][a(533)]();n.url=a(567)+c+";base64,"+t,u[a(514)]--,m(u,r,e)}))}}))})):console.error(n(564))}),(t=>{const e=s;console[e(563)](n[e(575)]+": "+t[e(531)])})),r};function b(t){function n(t){const e=p;if(typeof t===e(552))return function(t){}[e(540)](e(508))[e(502)](e(558));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(570)+"gger").call(e(498)):function(){return!1}[e(540)]("debu"+e(555))[e(502)](e(522)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,u as b,g as e,f as g,d as i,c as l};

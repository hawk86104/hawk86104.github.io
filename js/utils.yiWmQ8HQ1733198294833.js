import"./@fesjs.X1U4uwri1733198294833.js";import{_ as n}from"./jszip.eQOVOH091733198294833.js";import{F as t}from"./file-saver.P2FFQVPq1733198294833.js";import{_ as e,aN as s}from"./three.8iJMi2lU1733198294833.js";const o=r;function r(n,t){const e=i();return(r=function(n,t){return e[n-=404]})(n,t)}!function(n,t){const e=r,s=i();for(;;)try{if(410871===-parseInt(e(414))/1*(-parseInt(e(488))/2)+parseInt(e(422))/3*(-parseInt(e(486))/4)+parseInt(e(457))/5+parseInt(e(415))/6*(-parseInt(e(501))/7)+-parseInt(e(437))/8*(-parseInt(e(496))/9)+parseInt(e(418))/10+-parseInt(e(433))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[r(499)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function i(){const n=["image/png","scene","slice","url:","then","stringify","3843350YJoRZC","debu","files","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","gger","get","result","push","generateAsync","onloadend","type","error","forEach","bind","file","data:image/JPEG;base64,","application/octet-stream","url:geometries/","setResponseType","endsWith","Unknown","blob","data:","uuid","data:image/webp;base64,","loadAsync","startsWith","action","2512YMPKdC","image/bmp","27154hZYySn","data:image/jpeg;base64,","chain","warn","FileLoader","image/webp","image/gif","folder","9vzUShb","counter","split","apply","async","7CGUgII","geometries","table","toUpperCase","PNG","substring","parse","constructor","length","data","load","36LICudU","1795620ZyiXyM","__proto__","name","3715350aGnxyn","data:image/","stateObject","enabled","3177pjfKDw","app.json",".json","非标准文件：不存在 app.json","catch","config.zip","url","base64","Cache","onerror","images","9505595ikAggS","toString","WEBP","pop","4882888gJDZld",";base64,","return (function() ","input","url:images/","BufferGeometry","function *\\( *\\)","console","GIF","data:image/WEBP;base64,","image/jpeg","readAsDataURL","data:image/PNG;base64,","string"];return(i=function(){return n})()}!function(){a(this,(function(){const n=r,t=new RegExp(n(443)),e=new RegExp(n(460),"i"),s=b("init");t.test(s+n(490))&&e.test(s+n(440))?b():s("0")}))()}();const c=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[r(499)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function u(n){const t=new s;return new Promise(((e,s)=>{t[r(413)](n,(n=>e(JSON.parse(n))),void 0,(n=>s(n)))}))}async function p(n){const t=o,s=new(e[t(492)]);return new Promise(((e,r)=>{const a=t;s[a(476)]("blob"),s[a(413)](n,(t=>{const s=a,i=new FileReader;i[s(467)]=()=>{const t=s,r=function(n){const t=o,e=n[t(498)](".")[t(436)]().toLowerCase();return{jpg:"image/jpeg",jpeg:t(447),png:t(451),gif:t(494),bmp:t(487),webp:t(493)}[e]||t(474)}(n),a=i[t(464)].split(",")[1];e(t(480)+r+t(438)+a)},i.onerror=n=>{r(n)},i[s(448)](t)}),void 0,(n=>r(n)))}))}c(void 0,(function(){const n=r;let t;try{t=Function(n(439)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(444)]=t[n(444)]||{},s=[n(461),n(491),"info",n(469),"exception",n(405),"trace"];for(let r=0;r<s[n(411)];r++){const t=c[n(410)].prototype[n(471)](c),o=s[r],a=e[o]||t;t[n(416)]=c.bind(c),t[n(434)]=a[n(434)][n(471)](a),e[o]=t}}))(),e[o(430)][o(421)]=!0;const f=t=>{const s=o,r=new(e[s(492)]);return r.setResponseType(s(479)),new Promise(((e,o)=>{r[s(413)](t,(async t=>{e(await n.loadAsync(t))}),void 0,(n=>o(n)))}))},g=n=>{const t=o,e=n[t(408)](0,15),s=t(489),r=t(473),a=t(449),i=t(482),c=t(446);return s[t(484)](e)||r[t(484)](e)?"JPEG":"data:image/png;base64,".startsWith(e)||a[t(484)](e)?t(407):"data:image/gif;base64,"[t(484)](e)||"data:image/GIF;base64,"[t(484)](e)?t(445):i[t(484)](e||c[t(484)](e))?t(435):t(478)},l=e=>{const s=o,r=[];e[s(452)][s(404)]&&e[s(452)].geometries[s(470)]((n=>{const t=s;n[t(468)]===t(442)&&(r[t(465)]({uuid:n[t(481)],data:n.data}),n.data=t(475)+n[t(481)]+".json")}));const a=[];e[s(452)][s(432)]&&e[s(452)].images.forEach((n=>{const t=s;n[t(428)]&&(a[t(465)]({uuid:n.uuid,url:n[t(428)]}),n[t(428)][t(468)]?n[t(428)]=t(441)+n[t(481)]+"."+n[t(428)][t(468)]+".json":n[t(428)]=t(441)+n[t(481)]+"."+g(n[t(428)]))}));const i=new n;if(r[s(411)]){const n=i[s(495)]("geometries");r.forEach((t=>{const e=s;n[e(472)](t.uuid+e(424),JSON[e(456)](t[e(412)]))}))}if(a[s(411)]){const n=i[s(495)](s(432));a[s(470)]((t=>{const e=s;t[e(428)][e(468)]?n[e(472)](t[e(481)]+"."+t[e(428)].type+".json",JSON.stringify(t.url)):n[e(472)](t[e(481)]+"."+g(t[e(428)]),t[e(428)][e(498)](e(438))[e(436)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(472)](s(423),c),i[s(466)]({type:s(479)})[s(455)]((n=>{const e=s;t.saveAs(n,e(427))}))},m=(n,t,e)=>{const s=o;n.geometries<=0&&n[s(432)]<=0&&e(t)},d=(t,e)=>{const s=o;let r=null;return n[s(483)](t)[s(455)]((n=>{const t=s;n[t(459)][t(423)]?n[t(459)][t(423)][t(500)](t(450))[t(455)]((s=>{var a,i;const c=t;r=JSON[c(409)](s);const u=(n=>{var t,e;const s=o,r={geometries:0,images:0};return null==(t=n[s(452)][s(404)])||t.forEach((n=>{const t=s;n[t(412)][t(484)](t(454))&&r[t(404)]++})),null==(e=n.scene.images)||e.forEach((n=>{const t=s;n.url[t(484)]("url:")&&r[t(432)]++})),r})(r);m(u,r,e),null==(a=r[c(452)][c(404)])||a[c(470)]((t=>{const s=c;t[s(412)][s(484)]("url:")&&n[s(459)][t[s(412)].slice(4)][s(500)](s(450)).then((n=>{const o=s;t.data=JSON[o(409)](n),u[o(404)]--,m(u,r,e)}))})),null==(i=r.scene[c(432)])||i.forEach((t=>{const s=c;if(t.url[s(484)](s(454))){const o=t[s(428)][s(453)](4);o[s(477)](".json")?n.files[o].async("string").then((n=>{const o=s;t[o(428)]=JSON.parse(n),u[o(432)]--,m(u,r,e)})):n[s(459)][o][s(500)](s(429)).then((n=>{const a=s,i=o[a(498)]("."),c=i[i[a(411)]-1][a(406)]();t[a(428)]=a(419)+c+";base64,"+n,u.images--,m(u,r,e)}))}}))})):console[t(469)](t(425))}),(n=>{const e=s;console.error(t[e(417)]+": "+n.message)})),r};function b(n){function t(n){const e=r;if("string"==typeof n)return function(n){}[e(410)]("while (true) {}")[e(499)](e(497));1!==(""+n/n)[e(411)]||n%20==0?function(){return!0}[e(410)](e(458)+e(462)).call(e(485)):function(){return!1}.constructor(e(458)+"gger")[e(499)](e(420)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{f as a,p as b,l as e,g,d as i,u as l};

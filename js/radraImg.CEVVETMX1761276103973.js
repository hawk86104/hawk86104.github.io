import{F as e,K as a}from"./@tresjs.B_KjVy0E1761276103973.js";import{$ as t,p as s,e as o}from"./three-tile.CNxe5S7s1761276103973.js";import{s as r,c as i,a as n,i as l}from"./informationDiv.ByjA-1vp1761276103973.js";import"./vanilla.esm.5.5.0.CRlEbOMK1761276103973.js";import"./Resource.CSaxGSPI1761276103973.js";import{u as p}from"./useTexture.B3KXI5F11761276103973.js";import{d as m,ac as c,w as u,G as d,o as g,u as h,I as j,r as f,a as y,F as v,b,e as x,h as _,m as w,ap as S,g as T,a9 as I,aa as D}from"./@vue.CKlgtJke1761276103973.js";import{bU as B,a6 as M,z as P,V as k}from"./three.Bhn4-0ry1761276103973.js";import{P as z}from"./tweakpane.CqZAnw7f1761276103973.js";import"./postprocessing.CeTFUAN_1761276103973.js";import"./@vueuse.wtfleElW1761276103973.js";/* empty css                                                                                    */import"./@fesjs.DnM7nINA1761276103973.js";import"./vue-router.BFHj2xRz1761276103973.js";import"./lodash-es.DWe8oqPO1761276103973.js";import"./pinia.C8YT0eOZ1761276103973.js";import"./@qlin.y-0Z8WnK1761276103973.js";import"./@babel.BPq7uOAK1761276103973.js";import"./@floating-ui.Bhq4ibgf1761276103973.js";import"./@juggle.Vc7cP4_P1761276103973.js";import"./object-hash.1qNYTrnD1761276103973.js";import"./@amap.fjyZdsU91761276103973.js";import"./jszip.y_yjJ09m1761276103973.js";const G=["position"],L=["scale","material","rotateX","position-y"],C=m({__name:"radraImgShow",props:{map:{},height:{default:100},opacity:{default:.6}},async setup(e){let a,t;const s=e,o=new B({displacementMap:new P,transparent:!0,side:M,opacity:s.opacity,displacementScale:.5,displacementBias:0});o.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * displacementScale + displacementBias );")};const i=s.map.geo2pos(new k(105,34,0));i.applyMatrix4(s.map.matrix);const n=r(s.map,{x:67,y:11},{x:140,y:57},1e3*s.height),l=[];for(let r=0;r<9;r++)l.push(`https://opensource.cdn.icegl.cn/images/simpleGIS/QPFRef_202405311${r}40.png`);let m=0;const f=([a,t]=c(()=>p(l)),a=await a,t(),a);o.map=f[m],u(()=>[s.color,s.opacity],([e,a])=>{o.opacity=a});let y=null,v=!1;return v?(clearInterval(y),y=null,v=!1):(y=setInterval(()=>{m=m<l.length-1?m+1:0,o.map=f[m],o.needsUpdate=!0,console.log(m)},1e3),v=!0),(e,a)=>(g(),d("TresGroup",{position:[...h(i)]},[j("TresMesh",{scale:[h(n).x,h(n).y,1e3*e.height],material:h(o),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[j("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,L)],8,G))}}),F=["object"],W="pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",U=m({__name:"mapBoxShow3",setup(a){const r=f({height:200,opacity:1}),l=new z({title:"参数"});l.addBinding(r,"height",{label:"高度",min:10,max:300,step:1}),l.addBinding(r,"opacity",{label:"透明度",min:0,max:1,step:.1}),new t({token:W,dataType:"image",style:"mapbox.satellite"}),new t({token:W,dataType:"terrain-rgb",style:"mapbox.terrain-rgb",maxLevel:15});const p=new s({imgSource:[new o({style:"6"}),new o({style:"8"})],lon0:90,minLevel:2,maxLevel:20});p.rotateX(-Math.PI/2);const m=new k(105,34,0),c=new k(110,0,1e7),T=p.localToWorld(p.geo2map(m)),I=p.localToWorld(p.geo2map(c)),D=y(),{camera:B,controls:M,scene:P,renderer:G}=e();return B.value&&B.value.position.copy(I),u(()=>M.value,e=>{e&&(e.target.copy(T),i(e,B.value,P.value))}),u(()=>D.value,e=>{e&&e.target.position.copy(T)}),n(B.value,G.domElement,p),(e,a)=>(g(),d(v,null,[j("TresDirectionalLight",{ref_key:"tdLight",ref:D,position:[0,2e3,1e3],intensity:1},null,512),j("primitive",{object:h(p)},null,8,F),(g(),b(S,null,{default:x(()=>[_(C,w({map:h(p)},r),null,16,["map"])]),_:1}))],64))}}),A=m({__name:"radraImg",setup(e){const t=f({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=f({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,o)=>{const r=T("TresCanvas");return g(),d(v,null,[_(r,w(t,{"window-size":""}),{default:x(()=>[o[0]||(o[0]=j("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:4e10},null,-1)),_(h(a),I(D(s)),null,16),o[1]||(o[1]=j("TresAmbientLight",{intensity:1},null,-1)),_(U)]),_:1},16),_(l)],64)}}});export{A as default};

import{b$ as t,a0 as n,C as e,j as r}from"./three.p-9BQwc31724983368286.js";import{N as o}from"./@tresjs.OrqGCbtj1724983368286.js";import{R as c}from"./all.three.RQy00bw_1724983368286.js";import{d as a,b as i,a4 as s,a1 as u,w as f,o as l,D as p,J as m,m as d,u as v}from"./@vue.Q1VpS3901724983368286.js";!function(t,n){const e=x,r=y();for(;;)try{if(122443===parseInt(e(273))/1+-parseInt(e(257))/2*(parseInt(e(281))/3)+-parseInt(e(288))/4+-parseInt(e(267))/5*(-parseInt(e(261))/6)+parseInt(e(256))/7*(-parseInt(e(252))/8)+-parseInt(e(276))/9*(-parseInt(e(283))/10)+parseInt(e(262))/11*(parseInt(e(270))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(278)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(282),"i"),r=b(t(277));n[t(272)](r+t(253))&&e[t(272)](r+t(274))?b():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(278)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();h(void 0,(function(){const t=x;let n;try{n=Function(t(265)+t(268)+");")()}catch(o){n=window}const e=n[t(266)]=n[t(266)]||{},r=[t(258),t(291),t(275),t(271),t(293),t(249),"trace"];for(let c=0;c<r.length;c++){const n=h[t(286)][t(254)][t(260)](h),o=r[c],a=e[o]||n;n[t(294)]=h[t(260)](h),n.toString=a[t(280)][t(260)](a),e[o]=n}}))();function x(t,n){const e=y();return(x=function(t,n){return e[t-=249]})(t,n)}function y(){const t=["toString","195vyqtAw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","310mexbFc","#include <project_vertex>","replace","constructor","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","46004IvoAnV","#include <emissivemap_fragment>","debu","warn","string","exception","__proto__","table","action","void main() {","216eIPDvJ","chain","prototype","while (true) {}","32501GQCVBI","6878DIQaoy","log","fragmentShader","bind","258LVlKcy","11fepoES","call","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","return (function() ","console","4785fcVBaD",'{}.constructor("return this")( )',"stateObject","1592952ppgYuA","error","test","145697moPBMN","input","info","47394CdSoQg","init","apply","vertexShader"];return(y=function(){return t})()}function b(t){function n(t){const e=x;if(typeof t===e(292))return function(t){}.constructor(e(255))[e(278)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(290)+"gger")[e(263)](e(250)):function(){return!1}.constructor(e(290)+"gger").apply(e(269)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=_;function _(t,n){const e=S();return(_=function(t,n){return e[t-=282]})(t,n)}!function(t,n){const e=_,r=S();for(;;)try{if(963227===parseInt(e(311))/1+-parseInt(e(286))/2*(-parseInt(e(308))/3)+parseInt(e(323))/4+-parseInt(e(341))/5+-parseInt(e(294))/6*(parseInt(e(306))/7)+parseInt(e(309))/8+parseInt(e(307))/9*(-parseInt(e(315))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(338)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=_,n=new RegExp(t(304)),e=new RegExp(t(328),"i"),r=z(t(282));n[t(329)](r+"chain")&&e.test(r+t(337))?z():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(338)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function S(){const t=["call","return (function() ","init","update","error","console","26amHDje","action","aoMap","textureMatrix","TresPlaneGeometry","TresMeshStandardMaterial","gger","while (true) {}","458322Plrzob","onBeforeCompile","toString","length","set","log","onBeforeRender","value","reflectMap","wrapS","function *\\( *\\)","tmRef","28tyvqee","63fGbJjG","184521YqEOKN","5059448CSyXkc","warn","131657CVvvfT","add","assign","textureMatrixUniform","19110dNCPdU","exception","table","TresGroup",'{}.constructor("return this")( )',"attributes","mirror","object","6528072cyyAPR","string","stateObject","constructor","uv1","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","visible","channel","uniforms","primitive","color","bind","showGridHelper","input","apply","mixStrength","counter","9567725PJESQW","prototype","#444"];return(S=function(){return t})()}C(void 0,(function(){const t=_;let n;try{n=Function(t(345)+t(319)+");")()}catch(o){n=window}const e=n[t(285)]=n[t(285)]||{},r=[t(299),t(310),"info",t(284),t(316),t(317),"trace"];for(let c=0;c<r[t(297)];c++){const n=C[t(326)][t(342)].bind(C),o=r[c],a=e[o]||n;n.__proto__=C[t(335)](C),n[t(296)]=a[t(296)][t(335)](a),e[o]=n}}))();const M=["rotation-x"],j=[I(322)],E=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const g=I;let h,y;const b=a,_=new t(9.5,10),w=i(),C=i(),S=i(),E=new c,z={mirror:{value:b[g(321)]},mixStrength:{value:b[g(339)]}},T=([h,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,y(),h);for(var R=0;R<3;R++)T[R][g(303)]=n,T[R].wrapT=n,T[R].repeat[g(298)](16,16);const D={color:new e(g(343)),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},P=t=>{const n=g;t.uniforms[n(302)]=E.renderTargetUniform,t[n(332)][n(289)]=E[n(314)],t[n(332)]=Object[n(313)](t[n(332)],z),(t=>{const n=x;t[n(279)]=t.vertexShader[n(285)](n(251),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.vertexShader=t.vertexShader[n(285)](n(284),n(287))})(t),(t=>{const n=x;t[n(259)]=t.fragmentShader[n(285)]("void main() {",n(264)),t[n(259)]=t.fragmentShader[n(285)](n(289),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=g;w[t(301)]&&(w[t(301)][t(320)][t(327)]=w[t(301)].attributes.uv),S[t(301)]&&(S[t(301)][t(288)][t(331)]=1,S[t(301)][t(295)]=P),C.value&&(C[t(301)][t(312)](E),C.value[t(300)]=(n,e,r)=>{E[t(283)](n,e,r)}),b[t(334)]&&S[t(301)]&&(S[t(301)][t(334)]=new e(b[t(334)]))})),f((()=>b[g(336)]),(t=>{_[g(330)]=t})),(t,n)=>{const e=g;return l(),p(e(318),null,[m("TresMesh",{ref_key:e(305),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(290),{ref_key:"tpgRef",ref:w,args:[10,10]},null,512),m(e(291),d({ref_key:"tmsmRef",ref:S},D),null,16)],8,M),m(e(333),{object:v(_)},null,8,j)])}}});function z(t){function n(t){const e=_;if(typeof t===e(324))return function(t){}[e(326)](e(293))[e(338)](e(340));1!==(""+t/t).length||t%20==0?function(){return!0}[e(326)]("debu"+e(292))[e(344)](e(287)):function(){return!1}[e(326)]("debugger").apply(e(325)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as _};

import{e as n,h as t,a as e,o as i}from"./@tresjs.oW7bfow21742297875262.js";import{P as o}from"./tweakpane.yDiyAAkA1742297875262.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.KQf_J0Ys1742297875262.js";import{bk as s,_ as a}from"./three.N4lg2KsY1742297875262.js";import{d as u,a3 as c,w as l,o as f,f as d,u as p,H as v,N as m,g,j as h,m as w,al as b,r as x,e as y}from"./@vue.NRI7TcgI1742297875262.js";import"./postprocessing.9PKUyDJ51742297875262.js";import"./@vueuse.Y8_DCJgq1742297875262.js";import"./all.three.lRmYuXHz1742297875262.js";import"./oimophysics.x0jH7fze1742297875262.js";const _=k;!function(n,t){const e=k,i=S();for(;;)try{if(468942===parseInt(e(470))/1*(parseInt(e(504))/2)+parseInt(e(478))/3*(-parseInt(e(510))/4)+-parseInt(e(505))/5+parseInt(e(500))/6+-parseInt(e(472))/7+-parseInt(e(477))/8*(parseInt(e(484))/9)+parseInt(e(497))/10*(parseInt(e(483))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function k(n,t){const e=S();return(k=function(n,t){return e[n-=466]})(n,t)}!function(){I(this,(function(){const n=k,t=new RegExp(n(509)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=P("init");t[n(501)](i+n(467))&&e.test(i+n(494))?P():i("0")}))()}();const M=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[k(517)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function S(){const n=["isReversed","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","hasMaskTexture","function *\\( *\\)","181156SwznpJ","stateObject","counter","division","DoubleSide","baseMaterial","side","apply","table","action","while (true) {}","info","chain","console","gridWeight","35919BcMxlt","wavePow","2749628TAOFrv",'{}.constructor("return this")( )',"log","waveFrequency","warn","8IEtowa","3IjHlij","value","maskTexture","constructor","length","6125053eyWQUv","3994362WlqKDi","call","gger","prototype","hexGridMaterial","direction","bind","return (function() ","time","raisedBottom","input","exception","toString","20OORUBr","fragmentShader","debu","5037912oJSnYu","test","error","divisionScaleX","18ZKdPcv","4628580TDWuIV"];return(S=function(){return n})()}M(void 0,(function(){const n=k,t=function(){const n=k;let t;try{t=Function(n(491)+n(473)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(468)]||{},i=[n(474),n(476),n(466),n(502),n(495),n(518),"trace"];for(let o=0;o<i[n(482)];o++){const t=M[n(481)][n(487)][n(490)](M),r=i[o],s=e[r]||t;t.__proto__=M[n(490)](M),t[n(496)]=s.toString[n(490)](s),e[r]=t}}))();const B=_(507),T=u({__name:_(488),props:{baseMaterial:{default:new s},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=_;let r,s;const u=i,v={gridWeight:{value:u.gridWeight},raisedBottom:{value:u.raisedBottom},waveFrequency:{value:u[o(475)]},wavePow:{value:u.wavePow},direction:{value:u[o(489)]},isReversed:{value:u.isReversed},hasMaskTexture:{value:u[o(508)]},maskTexture:{value:null},division:{value:u[o(513)]},divisionScaleX:{value:u.divisionScaleX},time:{value:0}};u[o(480)]&&(v[o(480)][o(479)]=([r,s]=c((()=>e([u[o(480)]]))),r=await r,s(),r)),l((()=>[u[o(469)],u[o(493)],u[o(475)],u[o(471)],u.division,u[o(503)],u[o(489)],u.isReversed,u.hasMaskTexture]),(([n,t,e,i,r,s,a,u,c])=>{const l=o;v[l(469)].value=n,v[l(493)][l(479)]=t,v[l(475)][l(479)]=e,v[l(471)][l(479)]=i,v[l(513)].value=r,v.divisionScaleX[l(479)]=s,v[l(489)].value=a,v[l(506)].value=u,v[l(508)][l(479)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;v[t(492)][t(479)]+=n*u.speed})),(n,e)=>{const r=o;return f(),d(p(t),{baseMaterial:i[r(515)],vertexShader:B,side:a[r(514)],transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial",r(516),r(498)])}}});function P(n){function t(n){const e=k;if("string"==typeof n)return function(n){}[e(481)](e(520))[e(517)](e(512));1!==(""+n/n)[e(482)]||n%20==0?function(){return!0}[e(481)](e(499)+e(486))[e(485)](e(519)):function(){return!1}[e(481)](e(499)+e(486)).apply(e(511)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function j(){const n=["exception","chain","init","334876AJXpTq","stateObject","1080UeLPsM","39StCnFw","432MBWXsB","TresMesh","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","bind","438150rTXjNQ","action","5159MsIZmZ","rotation","MeshBasicMaterial","toString","81200bncgkN","log","__proto__","while (true) {}","10oElstd","counter","test","baseMaterial","function *\\( *\\)","apply","info","$attrs","debu","constructor","hexGridMesh","error","string","prototype","table","gger","warn","2185631nygSqp","7990DPwoQz","44286kBOlOw","trace","console"];return(j=function(){return n})()}const R=z;!function(n,t){const e=z,i=j();for(;;)try{if(205615===-parseInt(e(438))/1+-parseInt(e(432))/2+parseInt(e(441))/3*(-parseInt(e(454))/4)+parseInt(e(458))/5*(parseInt(e(448))/6)+parseInt(e(430))/7+parseInt(e(442))/8*(-parseInt(e(440))/9)+-parseInt(e(431))/10*(-parseInt(e(450))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const C=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[z(463)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){C(this,(function(){const n=z,t=new RegExp(n(462)),e=new RegExp(n(445),"i"),i=F(n(437));t[n(460)](i+n(436))&&e[n(460)](i+n(446))?F():i("0")}))()}();const D=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();D(void 0,(function(){const n=z;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(434)]=t[n(434)]||{},i=[n(455),n(429),n(464),n(469),n(435),n(427),n(433)];for(let r=0;r<i[n(444)];r++){const t=D[n(467)][n(426)].bind(D),o=i[r],s=e[o]||t;t[n(456)]=D[n(447)](D),t[n(453)]=s[n(453)].bind(s),e[o]=t}}))();const X=[R(451)];function z(n,t){const e=j();return(z=function(n,t){return e[n-=426]})(n,t)}const A=u({__name:R(468),setup(n){const t=R,e=new(a[t(452)]);return(n,i)=>{const o=t;return f(),v(o(443),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=m("TresPlaneGeometry",{args:[1,1]},null,-1)),(f(),d(b,null,{default:g((()=>[h(T,w({baseMaterial:p(e)},n[o(465)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(461)])])),_:1}))],8,X)}}});function F(n){function t(n){const e=z;if(typeof n===e(470))return function(n){}[e(467)](e(457))[e(463)](e(459));1!==(""+n/n)[e(444)]||n%20==0?function(){return!0}[e(467)](e(466)+e(428)).call(e(449)):function(){return!1}[e(467)](e(466)+"gger")[e(463)](e(439)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const W=O;!function(n,t){const e=O,i=Z();for(;;)try{if(296403===-parseInt(e(186))/1*(-parseInt(e(177))/2)+parseInt(e(188))/3+parseInt(e(215))/4*(parseInt(e(189))/5)+parseInt(e(200))/6+parseInt(e(201))/7+parseInt(e(173))/8+-parseInt(e(184))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[O(217)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function O(n,t){const e=Z();return(O=function(n,t){return e[n-=167]})(n,t)}function Z(){const n=["1688907myBJdK","837890ozeXlo","wavePow","isReversed","网格宽度","addBinding","网格横向缩放","渐变宽度","TresCanvas","debu","toString","prototype","1920672EngWrP","1932693RQRZRn","__proto__","exception","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","speed","warn","call","length","#666666","direction","stateObject","console",'{}.constructor("return this")( )',"8SoHVKx","test","apply","颜色取反","网格整体缩放","图片纹理","while (true) {}","gger","hexGridGround","function *\\( *\\)","渐变强度","chain","gridWeight","raisedBottom","145216vSjlhT","constructor","bind","waveFrequency","1538OoAJXr","divisionScaleX","division","input","string","error","#de62f2","15581835SsTIPd","TresPerspectiveCamera","670zUmbty","info"];return(Z=function(){return n})()}!function(){q(this,(function(){const n=O,t=new RegExp(n(168)),e=new RegExp(n(205),"i"),i=$("init");t[n(216)](i+n(170))&&e[n(216)](i+n(180))?$():i("0")}))()}();const E=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[O(217)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();E(void 0,(function(){const n=O;let t;try{t=Function("return (function() "+n(214)+");")()}catch(o){t=window}const e=t[n(213)]=t[n(213)]||{},i=["log",n(207),n(187),n(182),n(203),n(204),"trace"];for(let r=0;r<i[n(209)];r++){const t=E[n(174)][n(199)].bind(E),o=i[r],s=e[o]||t;t[n(202)]=E[n(175)](E),t[n(198)]=s[n(198)].bind(s),e[o]=t}}))();const L=u({__name:W(167),setup(n){const t=W,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:t(183),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(167),expanded:!0});return a.addBinding(s,"hasMaskTexture",{label:t(220)}),a[t(193)](s,"color",{label:"颜色"}),a.addBinding(s,t(206),{label:"速度",min:-5,max:5,step:.1}),a[t(193)](s,t(171),{label:t(192),min:.001,max:.5,step:.001}),a.addBinding(s,t(172),{label:t(195),min:.001,max:1,step:.001}),a.addBinding(s,t(176),{label:"分段",min:.001,max:1,step:.001}),a.addBinding(s,t(190),{label:t(169),min:1,max:30,step:.1}),a[t(193)](s,t(179),{label:t(219),min:.1,max:50,step:.1}),a[t(193)](s,t(178),{label:t(194),min:.1,max:10,step:.1}),a[t(193)](s,t(191),{label:t(218)}),a.addBinding(s,t(211),{label:"方向类别",min:3,max:6,step:1}),(n,o)=>{const a=t,u=y(a(196));return f(),d(u,{clearColor:a(210),"window-size":""},{default:g((()=>[o[0]||(o[0]=m(a(185),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(p(i),{enableDamping:"",autoRotate:""}),h(A,w(s,{scale:9}),null,16),(f(),d(b,null,{default:g((()=>[h(r,w({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function $(n){function t(n){const e=O;if(typeof n===e(181))return function(n){}[e(174)](e(221)).apply("counter");1!==(""+n/n)[e(209)]||n%20==0?function(){return!0}.constructor("debu"+e(222))[e(208)]("action"):function(){return!1}[e(174)](e(197)+e(222)).apply(e(212)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{L as default};

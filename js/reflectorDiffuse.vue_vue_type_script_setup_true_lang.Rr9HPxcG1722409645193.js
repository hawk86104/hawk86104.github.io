import{b_ as t,a0 as n,C as e,j as r}from"./three.6E5muTWJ1722409645193.js";import{N as o}from"./@tresjs.qmCJ68Vp1722409645193.js";import{R as c}from"./all.three.GEVYdC2c1722409645193.js";import{d as a,b as i,a4 as s,a1 as u,w as l,o as f,D as p,J as m,m as d,u as h}from"./@vue.9bHx4gg21722409645193.js";function v(){const t=["void main() {","call","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","log","replace","217914sGbyRh","bind","14597940RCiCzj","3179dCrWKE","length","return (function() ","#include <project_vertex>","exception","6LcAYKi",'{}.constructor("return this")( )',"init","counter","test","__proto__","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","10017RAtGRy","while (true) {}","error","warn","input","24cQfAZi","gger","string","constructor","function *\\( *\\)","console","10192EUvHvh","570200PYkCfK","3710980hxWFdc","796067mKCRGJ","stateObject","#include <emissivemap_fragment>","toString","trace","info","vertexShader","fragmentShader","apply","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","2cbfcmA","43284stmCyY","debu","action","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t"];return(v=function(){return t})()}function g(t,n){const e=v();return(g=function(t,n){return e[t-=258]})(t,n)}!function(t,n){const e=g,r=v();for(;;)try{if(853554===parseInt(e(262))/1*(parseInt(e(272))/2)+-parseInt(e(282))/3+parseInt(e(302))/4*(parseInt(e(260))/5)+parseInt(e(290))/6*(parseInt(e(261))/7)+parseInt(e(259))/8*(parseInt(e(297))/9)+-parseInt(e(284))/10+parseInt(e(285))/11*(-parseInt(e(273))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(270)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){x(this,(function(){const t=g,n=new RegExp(t(306)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=b(t(292));n[t(294)](r+"chain")&&e[t(294)](r+t(301))?b():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(270)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=g;let n;try{n=Function(t(287)+t(291)+");")()}catch(o){n=window}const e=n[t(258)]=n.console||{},r=[t(280),t(300),t(267),t(299),t(289),"table",t(266)];for(let c=0;c<r.length;c++){const n=y[t(305)].prototype.bind(y),o=r[c],a=e[o]||n;n[t(295)]=y.bind(y),n[t(265)]=a.toString[t(283)](a),e[o]=n}}))();function b(t){function n(t){const e=g;if(typeof t===e(304))return function(t){}[e(305)](e(298))[e(270)](e(293));1!==(""+t/t)[e(286)]||t%20==0?function(){return!0}[e(305)](e(274)+e(303))[e(278)](e(275)):function(){return!1}[e(305)](e(274)+e(303)).apply(e(263)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=I;!function(t,n){const e=I,r=C();for(;;)try{if(774495===parseInt(e(530))/1*(-parseInt(e(511))/2)+-parseInt(e(540))/3*(-parseInt(e(503))/4)+parseInt(e(514))/5*(parseInt(e(525))/6)+parseInt(e(539))/7*(-parseInt(e(487))/8)+-parseInt(e(483))/9+parseInt(e(493))/10+parseInt(e(520))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(513)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(){const t=["function *\\( *\\)","onBeforeCompile","3993342oUNPhH","tpgRef","error","gger","console","789259ocBSJo","stateObject","showGridHelper",'{}.constructor("return this")( )',"mixStrength","toString","assign","primitive","textureMatrix","63JhwTdC","3IFNKXm","__proto__","init","onBeforeRender","table","#ffffff","rotation-x","13379760gdERrm","aoMap","string","textureMatrixUniform","1022168rWSPEM","TresPlaneGeometry","counter","length","constructor","trace","15418890ZBuzld","uniforms","object","add","TresMeshStandardMaterial","wrapS","bind","attributes","TresGroup","value","1050028tzSBiO","wrapT","channel","mirror","TresMesh","renderTargetUniform","while (true) {}","test","2Ddtwqt","debu","apply","5HjXNlS","warn","color","tmsmRef","log","return (function() ","19034180BKaWbw","uv1","set"];return(C=function(){return t})()}function I(t,n){const e=C();return(I=function(t,n){return e[t-=480]})(t,n)}!function(){w(this,(function(){const t=I,n=new RegExp(t(523)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(542));n[t(510)](r+"chain")&&e[t(510)](r+"input")?E():r("0")}))()}();const M=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(513)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();M(void 0,(function(){const t=I;let n;try{n=Function(t(519)+t(533)+");")()}catch(o){n=window}const e=n.console=n[t(529)]||{},r=[t(518),t(515),"info",t(527),"exception",t(480),t(492)];for(let c=0;c<r[t(490)];c++){const n=M[t(491)].prototype.bind(M),o=r[c],a=e[o]||n;n[t(541)]=M[t(499)](M),n[t(535)]=a[t(535)].bind(a),e[o]=n}}))();const S=[_(482)],j=[_(495)],R=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(481)}},async setup(a){const v=_;let x,y;const b=a,w=new t(9.5,10),C=i(),I=i(),M=i(),R=new c,E={mirror:{value:b[v(506)]},mixStrength:{value:b[v(534)]}},z=([x,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),x=await x,y(),x);for(var T=0;T<3;T++)z[T][v(498)]=n,z[T][v(504)]=n,z[T].repeat[v(522)](16,16);const A={color:new e("#444"),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},U=t=>{const n=v;t.uniforms.reflectMap=R[n(508)],t[n(494)][n(538)]=R[n(486)],t[n(494)]=Object[n(536)](t[n(494)],E),(t=>{const n=g;t[n(268)]=t.vertexShader.replace(n(277),n(279)),t[n(268)]=t[n(268)][n(281)](n(288),n(276))})(t),(t=>{const n=g;t[n(269)]=t[n(269)][n(281)](n(277),n(296)),t[n(269)]=t.fragmentShader[n(281)](n(264),n(271))})(t)};return u((()=>{const t=v;C[t(502)]&&(C[t(502)][t(500)][t(521)]=C[t(502)][t(500)].uv),M[t(502)]&&(M.value[t(484)][t(505)]=1,M[t(502)][t(524)]=U),I.value&&(I[t(502)][t(496)](R),I[t(502)][t(543)]=(t,n,e)=>{R.update(t,n,e)}),b[t(516)]&&M.value&&(M[t(502)][t(516)]=new e(b.color))})),l((()=>b[v(532)]),(t=>{w.visible=t})),(t,n)=>{const e=v;return f(),p(e(501),null,[m(e(507),{ref_key:"tmRef",ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(488),{ref_key:e(526),ref:C,args:[10,10]},null,512),m(e(497),d({ref_key:e(517),ref:M},A),null,16)],8,S),m(e(537),{object:h(w)},null,8,j)])}}});function E(t){function n(t){const e=I;if(typeof t===e(485))return function(t){}[e(491)](e(509)).apply(e(489));1!==(""+t/t)[e(490)]||t%20==0?function(){return!0}[e(491)](e(512)+"gger").call("action"):function(){return!1}[e(491)](e(512)+e(528)).apply(e(531)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as _};

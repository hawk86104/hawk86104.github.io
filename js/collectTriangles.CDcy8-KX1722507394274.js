import{W as t,p as n,$ as e,d as r}from"./@tresjs.bNNpPzYW1722507394274.js";import{_ as o}from"./index.CtghvfIK1722507394274.js";import{c as s}from"./index.DifwtWix1722507394274.js";import{a6 as i,N as c,j as u,a,cz as l}from"./three.Brogx0uK1722507394274.js";import{P as p}from"./tweakpane.BCjFYDHx1722507394274.js";import{I as f,C as m,N as g,c as h,d,a as y}from"./three-mesh-bvh.1z_sibLA1722507394274.js";import{d as j,a4 as w,b,a1 as v,o as _,D as I,J as x,u as k,F as T,r as z,e as S,j as A,g as M,m as Y,f as Z,al as F}from"./@vue.CFXy4cc91722507394274.js";import"./@vueuse.CY5GWLAn1722507394274.js";import"./default.vue_vue_type_script_setup_true_lang.BXJfpQBF1722507394274.js";import"./@fesjs.HUfyfxyE1722507394274.js";import"./vue-router.B7QAPA1N1722507394274.js";import"./lodash-es.X8SAORSL1722507394274.js";import"./@qlin.BIlp8Yi21722507394274.js";import"./pinia.CScY4tX71722507394274.js";import"./vue-demi.Dq6ymT-81722507394274.js";import"./@babel.DOgRMOv71722507394274.js";import"./@amap.B-BVafMU1722507394274.js";import"./@floating-ui.B75jtkXD1722507394274.js";import"./@juggle.BnTvdTVm1722507394274.js";import"./three-mesh-ui.module.CptYztN01722507394274.js";import"./chalk.B3MNILV41722507394274.js";/* empty css                                 */import"./iconify-icon.DK1S_nhj1722507394274.js";import"./@iconify.FaZrwldm1722507394274.js";import"./oimophysics.B0i2NtyE1722507394274.js";import"./three-stdlib.Da22DAq01722507394274.js";import"./@pmndrs.D9AmSQDC1722507394274.js";import"./object-hash.rImj7O_Q1722507394274.js";import"./jszip.BxDgYeH81722507394274.js";import"./three-custom-shader-material.CeVv8ptL1722507394274.js";import"./glsl-tokenizer.D7fhDZQE1722507394274.js";import"./glsl-token-string.Bg9nzJXZ1722507394274.js";import"./glsl-token-functions.B8rjVA3n1722507394274.js";import"./three.quarks.DzFhgNNR1722507394274.js";import"./quarks.core.C7CDonSm1722507394274.js";!function(t,n){const e=C,r=R();for(;;)try{if(505567===-parseInt(e(457))/1+parseInt(e(478))/2*(parseInt(e(442))/3)+-parseInt(e(459))/4+-parseInt(e(472))/5+-parseInt(e(473))/6+parseInt(e(439))/7*(-parseInt(e(476))/8)+parseInt(e(465))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const B=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(475)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=R();return(C=function(t,n){return e[t-=435]})(t,n)}!function(){B(this,(function(){const t=C,n=new RegExp(t(460)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=X(t(452));n[t(447)](r+"chain")&&e[t(447)](r+t(437))?X():r("0")}))()}();const O=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();O(void 0,(function(){const t=C,n=function(){const t=C;let n;try{n=Function(t(443)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(480)]=n[t(480)]||{},r=[t(474),t(479),t(438),t(466),t(446),"table",t(463)];for(let o=0;o<r[t(444)];o++){const n=O[t(455)][t(467)].bind(O),s=r[o],i=e[s]||n;n[t(454)]=O[t(470)](O),n[t(469)]=i[t(469)][t(470)](i),e[s]=n}}))();function R(){const t=["exception","test","call","enabled","innerHeight","debu","init","gger","__proto__","constructor","addEventListener","864518WDlPWS","pointermove","2269664yFnxIH","function *\\( *\\)","touch","intersectObject","trace","counter","34832475uQZiiU","error","prototype","action","toString","bind","stateObject","4054055wnVgfh","5852982yaayIm","log","apply","9872vvJzBA","button","20998uXrVfe","warn","console","setFromCamera","clientY","clientX","input","info","3094EbxeNI","value","innerWidth","114zcocfP","return (function() ","length","Raycaster"];return(R=function(){return t})()}function X(t){function n(t){const e=C;if("string"==typeof t)return function(t){}[e(455)]("while (true) {}")[e(475)](e(464));1!==(""+t/t).length||t%20==0?function(){return!0}[e(455)](e(451)+e(453))[e(448)](e(468)):function(){return!1}[e(455)]("debugger")[e(475)](e(471)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const E=N;function $(){const t=["toString","input","stateObject","getX","609825TecZYf","constructor","controls","copy","Sphere","gger","Mesh","21qDbljr","console","apply","MeshStandardMaterial","Vector3","targetMesh","length","log","TresMeshStandardMaterial","13491531gSGgSN","function *\\( *\\)","info","#023249","debu","needsUpdate","while (true) {}","firstHitOnly","return (function() ","1760136OZPLVc","addButton","color","setFromCamera","index","geometry","TresMesh","active","position","boundsTree","counter","BufferGeometry","BufferAttribute","click","attributes","Matrix4","bind","material","visible","raycast","disposeBoundsTree","test","setZ","error","1285820QYMThm","computeBoundsTree","1914618NuuLsm","targetMesh.value init","table","intersectsBox","trace","init","setAttribute","brushMesh","exception","230076aLAqQX","2627275YwefeH","enabled","chain","点击按钮","__proto__","prototype","value","center","matrixWorld","4lvrSDY","action","push","applyMatrix4","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","containsPoint","normal","count","getY","intersectsSphere","getZ","intersectObject"];return($=function(){return t})()}!function(t,n){const e=N,r=$();for(;;)try{if(396084===-parseInt(e(211))/1+parseInt(e(174))/2+parseInt(e(176))/3+-parseInt(e(195))/4*(-parseInt(e(186))/5)+parseInt(e(185))/6+-parseInt(e(218))/7*(-parseInt(e(150))/8)+-parseInt(e(227))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const L=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function N(t,n){const e=$();return(N=function(t,n){return e[t-=148]})(t,n)}!function(){L(this,(function(){const t=N,n=new RegExp(t(228)),e=new RegExp(t(199),"i"),r=J(t(181));n[t(171)](r+t(188))&&e[t(171)](r+t(208))?J():r("0")}))()}();const q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[N(220)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();q(void 0,(function(){const t=N;let n;try{n=Function(t(149)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(219)]=n[t(219)]||{},r=[t(225),"warn",t(229),t(173),t(184),t(178),t(180)];for(let s=0;s<r[t(224)];s++){const n=q.constructor.prototype[t(166)](q),o=r[s],i=e[o]||n;n[t(190)]=q[t(166)](q),n[t(207)]=i.toString[t(166)](i),e[o]=n}}))();const P=[E(155),E(167)],G=[x("TresSphereGeometry",{args:[1,40,40]},null,-1),x(E(226),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)],U=[E(155)],D=[x(E(226),{color:E(230),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)],H=j({__name:"model",props:{controls:{}},async setup(r){const o=E;let s,j;const z=r;(()=>{const t=N;i[t(161)][t(191)][t(175)]=h,i[t(161)][t(191)][t(170)]=d,i[t(217)][t(191)][t(169)]=y})();const S=([s,j]=w((()=>t(l,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,j(),s),A=new(i[o(221)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),M=new Uint8Array(3*S[o(164)][o(158)][o(202)]);M.fill(255);const Y=new(i[o(162)])(M,3,!0);Y.setUsage(c),S[o(182)](o(152),Y);const Z=b(null),F=b(null),B=b(!1),O=b(-1),R=b(.2),X=new u,{camera:$,raycaster:L}=n(),q=15/255,H=78/255,J=85/255;let W=null;v((()=>{const t=o;Z.value&&(console[t(225)](t(177),Z[t(192)]),Z.value.geometry[t(175)](),W=S[t(159)],((t,n,e,r,o,s)=>{const c=C;window[c(456)](c(458),(e=>{const r=c;t.x=e[r(436)]/window[r(441)]*2-1,t.y=-e.clientY/window[r(450)]*2+1,n[r(440)]=!0})),window[c(456)]("pointerdown",(u=>{const a=c;t.x=u[a(436)]/window[a(441)]*2-1,t.y=-u[a(435)]/window[a(450)]*2+1,r.value=u[a(477)];const l=new(i[a(445)]);l[a(481)](t,e[a(440)]),l.firstHitOnly=!0;const p=l[a(462)](o[a(440)],!0);n[a(440)]=!0,s[a(449)]=0===p[a(444)]}),!0),window[c(456)]("pointerup",(t=>{const e=c;r[e(440)]=-1,t.pointerType===e(461)&&(n[e(440)]=!1)}),!0)})(X,B,$,O,Z,z[t(213)][t(192)]))}));const{onLoop:Q}=e();Q((()=>{const t=o,n=S[t(154)];if(F[t(192)])if(z.controls[t(192)][t(157)]||!B[t(192)])F.value[t(168)]=!1;else{F[t(192)].scale.setScalar(R[t(192)]),L[t(192)][t(153)](X,$[t(192)]),L.value[t(148)]=!0;const e=L.value[t(206)](Z[t(192)],!0);if(e[t(224)]){F[t(192)][t(158)][t(214)](e[0].point),z.controls[t(192)].enabled=!1,F.value[t(168)]=!0;const r=new(i[t(165)]);r[t(214)](Z[t(192)][t(194)]).invert();const o=new(i[t(215)]);o[t(193)][t(214)](F.value.position)[t(198)](r),o.radius=100*R[t(192)];const s=[],c=new(i[t(222)]);if(null==W||W.shapecast({intersectsBounds:n=>{const e=t,r=o[e(179)](n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(c.set(0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(200)](c))return f;return m}return r?f:g},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(204)](o)){const t=3*e;s[i(197)](t,t+1,t+2)}return!1}}),0===O[t(192)]||2===O[t(192)]){let e=1,r=1,o=1;0===O[t(192)]&&(e=q,r=H,o=J);for(let i=0,c=s[t(224)];i<c;i++){const c=n[t(210)](s[i]);Y.setX(c,e),Y.setY(c,r),Y[t(172)](c,o)}Y[t(232)]=!0}}else F.value.visible=!1,z[t(213)][t(192)][t(187)]=!0}}));const V=(new p)[o(151)]({title:o(189),label:"生成模型"}),K=new(i[o(161)]);return V.on(o(163),(()=>{const t=o,n=[],e=[];for(let o=0;o<Y[t(202)];o++)Y[t(210)](o)===q&&Y[t(203)](o)===H&&Y[t(205)](o)===J&&(n[t(197)](S[t(164)][t(158)].getX(o),S.attributes[t(158)].getY(o),S[t(164)][t(158)][t(205)](o)),e[t(197)](S[t(164)][t(201)].getX(o),S[t(164)].normal.getY(o),S[t(164)][t(201)][t(205)](o)));const r=new Float32Array(n);K[t(182)](t(158),new a(r,3)),K[t(182)](t(201),new(i[t(162)])(r,3))})),(t,n)=>{const e=o;return _(),I(T,null,[x(e(156),{ref_key:e(223),ref:Z,geometry:k(S),scale:.005,material:k(A)},null,8,P),x(e(156),{ref_key:e(183),ref:F,visible:!1},G,512),x(e(156),{geometry:k(K),position:[-2,-2,2],scale:.005},D,8,U)],64)}}});function J(t){function n(t){const e=N;if("string"==typeof t)return function(t){}[e(212)](e(233))[e(220)](e(160));1!==(""+t/t).length||t%20==0?function(){return!0}[e(212)](e(231)+e(216)).call(e(196)):function(){return!1}[e(212)]("debu"+e(216))[e(220)](e(209)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=nt,r=Q();for(;;)try{if(806578===-parseInt(e(365))/1+-parseInt(e(380))/2*(parseInt(e(381))/3)+parseInt(e(379))/4*(parseInt(e(388))/5)+-parseInt(e(358))/6+parseInt(e(350))/7*(parseInt(e(372))/8)+-parseInt(e(378))/9+parseInt(e(361))/10*(parseInt(e(357))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const W=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[nt(348)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function Q(){const t=["neg-y.jpg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"neg-x.jpg","12690468vmpnBe","52OtoNyJ","76Zcvbkc","70467LrPNZY","neg-z.jpg","while (true) {}","toString","TresCanvas","string","trace","423720XyUsyp","table","init","apply","counter","8529815pXTpKE","exception","test","debu","controls","input","warn","25159585XqehQG","4138554sLFteJ","console","bind","10cMYxja","return (function() ","__proto__","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","808481GNdgkg","constructor","error","gger","#999999","length","log","8FDCGFp","call"];return(Q=function(){return t})()}!function(){W(this,(function(){const t=nt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(375),"i"),r=rt(t(390));n[t(352)](r+"chain")&&e[t(352)](r+t(355))?rt():r("0")}))()}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[nt(348)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();V(void 0,(function(){const t=nt;let n;try{n=Function(t(362)+t(376)+");")()}catch(o){n=window}const e=n.console=n[t(359)]||{},r=[t(371),t(356),"info",t(367),t(351),t(389),t(387)];for(let s=0;s<r[t(370)];s++){const n=V.constructor.prototype[t(360)](V),o=r[s],i=e[o]||n;n[t(363)]=V[t(360)](V),n[t(384)]=i.toString.bind(i),e[o]=n}}))();const K=x("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1),tt=x("TresAmbientLight",{intensity:1},null,-1);function nt(t,n){const e=Q();return(nt=function(t,n){return e[t-=348]})(t,n)}const et=j({__name:"collectTriangles",setup(t){const n=nt,e=z({clearColor:n(369),antialias:!0}),i=z({autoRotate:!1}),c=b(null);return(t,u)=>{const a=n,l=S(a(385));return _(),I(T,null,[A(k(o)),A(l,Y(e,{"window-size":""}),{default:M((()=>[K,A(k(r),Y({ref_key:"controlsRef",ref:c},i),null,16),tt,(_(),Z(F,null,{default:M((()=>[A(H,{controls:c.value},null,8,[a(354)])])),_:1})),(_(),Z(F,null,{default:M((()=>[A(k(s),{background:!1,files:["pos-x.jpg",a(377),"pos-y.jpg",a(374),"pos-z.jpg",a(382)],path:a(364)})])),_:1}))])),_:1},16)],64)}}});function rt(t){function n(t){const e=nt;if(typeof t===e(386))return function(t){}.constructor(e(383))[e(348)](e(349));1!==(""+t/t).length||t%20==0?function(){return!0}[e(366)](e(353)+e(368))[e(373)]("action"):function(){return!1}.constructor(e(353)+e(368))[e(348)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{et as default};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.1S7QjIhd1728703368826.js";import{B as i,V as s,co as n,ab as e,X as r,h as o,an as a,$ as c,s as h,_ as u}from"./three.VoknrmS61728703368826.js";import{U as l,e as p,F as d}from"./@tresjs.JhHPALEY1728703368826.js";import{c as f}from"./simplex-noise.P9JMzoHY1728703368826.js";import{d as m,a3 as g,o as y,E as b,u as S,r as w,j as x,g as v,m as _,F as P}from"./@vue.JNsx1iN61728703368826.js";import"./index.9iraUYXx1728703368826.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.NMpY99iI1728703368826.js";import"./three-custom-shader-material.3rBk2L9x1728703368826.js";import"./object-hash.gPx1SZYa1728703368826.js";import"./@amap.LlG4vVLC1728703368826.js";import"./jszip.VrfDZcNx1728703368826.js";import"./glsl-tokenizer.N1Ao8h3g1728703368826.js";import"./glsl-token-string.bxQbWgRM1728703368826.js";import"./glsl-token-functions.5GJf-mGG1728703368826.js";import"./@vueuse.yeA714RM1728703368826.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang._63CWacA1728703368826.js";import"./all.three.NayfOH7t1728703368826.js";import"./oimophysics.x0jH7fze1728703368826.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.IjvoiIX01728703368826.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.i_gZeP981728703368826.js";import"./index.lYn9o6Dz1728703368826.js";import"./three-stdlib.TAHhyoy71728703368826.js";import"./@pmndrs.Q7GR9FLZ1728703368826.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.9dYORP3V1728703368826.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Mn9F0mXL1728703368826.js";const M=A;function T(){const t=["endPropagationTime","rayParameters","subrayCylinderPosition","table","straightness","gger","currentSegmentCallback","cross1","copy","simplexX","timeScale","addNewSubray","type","time",'{}.constructor("return this")( )',"simplexY","deathTime","currentSegmentIndex","currentVertex","createTriangleVerticesWithUVs","sourceOffset","raySegments","COS30DEG","birthTime","positionVariationFactor","ramification","LightningStrike","onDecideSubrayCreation","max","radius1","multiplyScalar","forwardsFill","index","fillMesh","setAttribute","chain","radius0Factor","normalize","recursion","subVectors","maxSubrays","currentIndex","16756232vBvncO","subrayConePosition","stateObject","sin","length","toString","push","RAY_VANISHING","10yOuZzM","uvs","fraction1","warn","createMesh","updateMesh","needsUpdate","minRadius","createDefaultSubrayCreationCallbacks","side","subrays","currentSubray","count","counter","random","bind","position","crossVectors","middlePos","add","log","currentUVCoordinate","prototype","randomGenerator","maxIterations","getNewSegment","clone","RAY_PROPAGATING","roughness","newPos","trace","init","isStatic","state","createSegment","isLightningStrike","sub","up0","2332364ucqihY","forwards","copyParameters","maxRaySegments","subrayDutyCycle","lerpVectors","pos0","noiseSeed","radius1Factor","vanishingTimeFactor","RAY_UNBORN","min","currentSeed","drawRange","debu","currentCreateTriangleVertices","down","indices","numSubrays","floor","timeFraction","seedGenerator","setSeed","lerp","console","apply","872872klblwE","__proto__","pow","iteration","createRandomGenerator","setIndex","pos1","subrayProbability","action","createPrism","currentCoordinate","isInitialSegment","positionAttribute","array","exception","SIN30DEG","generateUVs","constructor","RAY_STEADY","visible","info","vPos","radius0","linPos0","onSubrayCreation","2180349fkmQCU","propagationTimeFactor","subrayPeriod","set","createTriangleVerticesWithoutUVs","5186946CqMGdd","1609664RgUmsN","up1","while (true) {}","input","destOffset","fraction0","RAY_EXTINGUISHED","uvsAttribute","usage","seed","test","middleLinPos","isEternal","RAY_INITIALIZED","function *\\( *\\)","fractalRayRecursive","maxSubrayRecursion","vertices","linPos1","cos","recursionProbability","2953480rWwXGp","beginVanishingTime"];return(T=function(){return t})()}!function(t,i){const s=A,n=T();for(;;)try{if(911382===-parseInt(s(199))/1+-parseInt(s(310))/2+parseInt(s(193))/3+-parseInt(s(220))/4+parseInt(s(272))/5*(parseInt(s(198))/6)+-parseInt(s(336))/7+parseInt(s(264))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){R(this,(function(){const t=A,i=new RegExp(t(213)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=j(t(303));i[t(209)](n+t(257))&&s[t(209)](n+t(202))?j():n("0")}))()}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(t,i){const s=T();return(A=function(t,i){return s[t-=181]})(t,i)}C(void 0,(function(){const t=A;let i;try{i=Function("return (function() "+t(236)+");")()}catch(e){i=window}const s=i[t(334)]=i[t(334)]||{},n=[t(292),t(275),t(188),"error",t(182),t(225),t(302)];for(let r=0;r<n[t(268)];r++){const i=C.constructor[t(294)][t(287)](C),e=n[r],o=s[e]||i;i[t(337)]=C[t(287)](C),i[t(269)]=o[t(269)].bind(o),s[e]=i}}))();class V extends i{constructor(t={}){const i=A;super(),this[i(307)]=!0,this[i(234)]=i(248),this.init(V[i(312)](t,t)),this[i(276)]()}static[M(340)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(270)](Math[t(286)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(322)]=(n[e(322)]+1)%i,r},getSeed:function(){return n[t(322)]/i},setSeed:function(s){const e=t;n[e(322)]=Math[e(329)](s*i)%i}};return n}static[M(312)](t={},i={}){const n=M,e=function(s){return i===t?s:s[A(298)]()};return t[n(242)]=void 0!==i[n(242)]?e(i.sourceOffset):new s(0,100,0),t[n(203)]=void 0!==i.destOffset?e(i.destOffset):new s(0,0,0),t[n(232)]=void 0!==i.timeScale?i[n(232)]:1,t[n(300)]=void 0!==i[n(300)]?i[n(300)]:.9,t[n(226)]=void 0!==i[n(226)]?i[n(226)]:.7,t.up0=void 0!==i[n(309)]?e(i.up0):new s(0,0,1),t[n(200)]=void 0!==i[n(200)]?e(i.up1):new s(0,0,1),t[n(190)]=void 0!==i.radius0?i[n(190)]:1,t[n(251)]=void 0!==i.radius1?i[n(251)]:1,t[n(258)]=void 0!==i[n(258)]?i[n(258)]:.5,t[n(318)]=void 0!==i.radius1Factor?i.radius1Factor:.2,t[n(279)]=void 0!==i[n(279)]?i.minRadius:.2,t[n(211)]=void 0!==i[n(211)]?i[n(211)]:void 0===i[n(245)]||void 0===i[n(238)],t[n(245)]=i[n(245)],t[n(238)]=i[n(238)],t.propagationTimeFactor=void 0!==i.propagationTimeFactor?i[n(194)]:.1,t[n(319)]=void 0!==i[n(319)]?i.vanishingTimeFactor:.9,t.subrayPeriod=void 0!==i[n(195)]?i[n(195)]:4,t[n(314)]=void 0!==i[n(314)]?i[n(314)]:.6,t[n(296)]=void 0!==i[n(296)]?i[n(296)]:9,t.isStatic=void 0!==i[n(304)]&&i.isStatic,t[n(247)]=void 0!==i.ramification?i[n(247)]:5,t.maxSubrayRecursion=void 0!==i[n(215)]?i[n(215)]:3,t[n(219)]=void 0!==i[n(219)]?i.recursionProbability:.6,t[n(184)]=void 0!==i[n(184)]&&i.generateUVs,t[n(295)]=i[n(295)],t[n(317)]=i[n(317)],t[n(249)]=i.onDecideSubrayCreation,t[n(192)]=i[n(192)],t}update(t){const i=M;this[i(304)]||(this[i(223)][i(211)]||this[i(223)][i(245)]<=t&&t<=this[i(223)].deathTime?(this[i(277)](t),t<this.subrays[0].endPropagationTime?this[i(305)]=V[i(299)]:t>this[i(282)][0].beginVanishingTime?this[i(305)]=V[i(271)]:this[i(305)]=V[i(186)],this[i(187)]=!0):(this[i(187)]=!1,t<this[i(223)][i(245)]?this.state=V[i(320)]:this[i(305)]=V.RAY_EXTINGUISHED))}[M(303)](t){const i=M;this[i(223)]=t,this[i(296)]=void 0!==t.maxIterations?Math.floor(t[i(296)]):9,t[i(296)]=this[i(296)],this[i(304)]=void 0!==t.isStatic&&t.isStatic,t[i(304)]=this[i(304)],this.ramification=void 0!==t[i(247)]?Math[i(329)](t[i(247)]):5,t[i(247)]=this[i(247)],this[i(215)]=void 0!==t[i(215)]?Math[i(329)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this[i(215)],this[i(219)]=void 0!==t.recursionProbability?t[i(219)]:.6,t.recursionProbability=this[i(219)],this.generateUVs=void 0!==t[i(184)]&&t[i(184)],t.generateUVs=this[i(184)],void 0!==t[i(295)]?(this[i(295)]=t[i(295)],this[i(331)]=t[i(295)],void 0!==t[i(317)]&&this[i(331)][i(332)](t[i(317)])):(this[i(295)]=V.createRandomGenerator(),this[i(331)]=Math),void 0!==t[i(249)]?this[i(249)]=t[i(249)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this.onSubrayCreation=t[i(192)])),this[i(305)]=V[i(212)],this[i(262)]=Math.ceil(1+Math[i(338)](this[i(247)],Math.max(0,this.maxSubrayRecursion-1))),t[i(262)]=this[i(262)],this[i(313)]=2*(1<<this[i(296)]),this[i(282)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(282)][i(270)](this.createSubray());this[i(243)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(243)][i(270)](this[i(306)]());this[i(235)]=0,this[i(330)]=0,this[i(228)]=null,this.currentCreateTriangleVertices=this[i(184)]?this[i(241)]:this[i(197)],this.numSubrays=0,this[i(283)]=null,this[i(239)]=0,this[i(347)]=!1,this[i(343)]=0,this[i(240)]=0,this.currentIndex=0,this[i(346)]=0,this[i(293)]=0,this[i(216)]=null,this[i(273)]=null,this.indices=null,this.positionAttribute=null,this[i(206)]=null,this[i(231)]=f(this[i(331)][i(286)]),this.simplexY=f(this[i(331)][i(286)]),this.simplexZ=f(this[i(331)].random),this[i(311)]=new s,this[i(253)]=new s,this[i(281)]=new s,this[i(326)]=new s,this[i(290)]=new s,this[i(210)]=new s,this[i(301)]=new s,this[i(189)]=new s,this[i(229)]=new s}createMesh(){const t=M,i=1<<this[t(296)],s=3*(i+1)*this[t(262)],o=18*i*this[t(262)];this.vertices=new Float32Array(3*s),this.indices=new Uint32Array(o),this.generateUVs&&(this[t(273)]=new Float32Array(2*s)),this[t(255)](0),this[t(341)](new n(this[t(327)],1)),this[t(348)]=new e(this[t(216)],3),this.setAttribute(t(288),this[t(348)]),this[t(184)]&&(this[t(206)]=new e(new Float32Array(this[t(273)]),2),this[t(256)]("uv",this[t(206)])),!this.isStatic&&(this[t(254)][t(207)]=r,this[t(348)][t(207)]=r,this[t(184)]&&(this.uvsAttribute.usage=r)),this[t(216)]=this.positionAttribute.array,this[t(327)]=this.index.array,this.generateUVs&&(this[t(273)]=this[t(206)][t(181)])}[M(277)](t){const i=M;this[i(255)](t),this[i(323)][i(284)]=this[i(263)],this[i(254)][i(278)]=!0,this[i(348)][i(278)]=!0,this[i(184)]&&(this[i(206)][i(278)]=!0)}[M(255)](t){const i=M,s=this;this[i(240)]=0,this[i(263)]=0,this[i(346)]=0,this[i(293)]=0,this.fractalRay(t,(function(n){const e=i,r=s.currentSubray;t<r[e(245)]||(this[e(223)][e(211)]&&0==s[e(283)][e(260)]?(s[e(345)](n),s[e(249)](n,s)):t<r[e(222)]?s[e(330)]>=n.fraction0*r[e(194)]&&(s[e(345)](n),s.onDecideSubrayCreation(n,s)):t<r[e(221)]?(s[e(345)](n),s.onDecideSubrayCreation(n,s)):(s.timeFraction<=r[e(319)]+n[e(274)]*(1-r[e(319)])&&s.createPrism(n),s.onDecideSubrayCreation(n,s)))}))}[M(233)](){return this.subrays[this.numSubrays++]}initSubray(t,i){const s=M;t.pos0[s(230)](i[s(242)]),t.pos1[s(230)](i[s(203)]),t.up0[s(230)](i.up0),t.up1[s(230)](i[s(200)]),t[s(190)]=i[s(190)],t.radius1=i[s(251)],t[s(245)]=i[s(245)],t.deathTime=i[s(238)],t[s(232)]=i[s(232)],t.roughness=i[s(300)],t[s(226)]=i.straightness,t.propagationTimeFactor=i[s(194)],t[s(319)]=i[s(319)],t[s(296)]=this[s(296)],t.seed=void 0!==i.noiseSeed?i[s(317)]:0,t[s(260)]=0}fractalRay(t,i){const s=M;this[s(235)]=t,this.currentSegmentCallback=i,this[s(328)]=0,this.initSubray(this[s(233)](),this[s(223)]);for(let n=0;n<this[s(328)];n++){const i=this[s(282)][n];this[s(283)]=i,this[s(295)][s(332)](i[s(208)]),i.endPropagationTime=o.lerp(i[s(245)],i[s(238)],i[s(194)]),i.beginVanishingTime=o.lerp(i[s(238)],i.birthTime,1-i[s(319)]);const e=this.randomGenerator[s(286)];i[s(191)][s(196)](e(),e(),e())[s(252)](1e3),i.linPos1.set(e(),e(),e())[s(252)](1e3),this.timeFraction=(t-i[s(245)])/(i[s(238)]-i[s(245)]),this[s(239)]=0,this[s(347)]=!0;const r=this[s(297)]();r[s(339)]=0,r[s(316)].copy(i[s(316)]),r[s(342)].copy(i.pos1),r[s(191)][s(230)](i[s(191)]),r[s(217)].copy(i[s(217)]),r[s(309)].copy(i.up0),r.up1[s(230)](i.up1),r[s(190)]=i[s(190)],r[s(251)]=i.radius1,r.fraction0=0,r.fraction1=1,r[s(246)]=1-i.straightness,this.subrayProbability=this.ramification*Math[s(338)](this[s(219)],i[s(260)])/(1<<i.maxIterations),this[s(214)](r)}this[s(228)]=null,this[s(283)]=null}[M(214)](t){const i=M;if(t[i(339)]>=this.currentSubray[i(296)])return void this[i(228)](t);this.forwards[i(261)](t[i(342)],t[i(316)]);let s=this[i(311)][i(268)]();s<1e-6&&(this.forwards.set(0,0,.01),s=this.forwards[i(268)]());const n=.5*(t.radius0+t[i(251)]),e=.5*(t[i(204)]+t[i(274)]),r=this[i(235)]*this[i(283)][i(232)]*Math.pow(2,t[i(339)]);this.middlePos[i(315)](t[i(316)],t[i(342)],.5),this.middleLinPos[i(315)](t[i(191)],t[i(217)],.5);const o=this[i(210)];this.newPos.set(this[i(231)](o.x,o.y,o.z,r),this[i(237)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this.newPos[i(252)](t.positionVariationFactor*s),this[i(301)][i(291)](this[i(290)]);const a=this[i(297)]();a[i(316)][i(230)](t[i(316)]),a.pos1[i(230)](this[i(301)]),a[i(191)][i(230)](t[i(191)]),a[i(217)][i(230)](this[i(210)]),a.up0[i(230)](t[i(309)]),a[i(200)][i(230)](t[i(200)]),a[i(190)]=t.radius0,a[i(251)]=n,a[i(204)]=t.fraction0,a[i(274)]=e,a.positionVariationFactor=t[i(246)]*this.currentSubray.roughness,a[i(339)]=t[i(339)]+1;const c=this[i(297)]();c[i(316)].copy(this.newPos),c[i(342)][i(230)](t[i(342)]),c.linPos0.copy(this[i(210)]),c.linPos1[i(230)](t[i(217)]),this[i(229)][i(289)](t[i(309)],this[i(311)][i(259)]()),c[i(309)].crossVectors(this[i(311)],this[i(229)])[i(259)](),c.up1.copy(t[i(200)]),c[i(190)]=n,c[i(251)]=t.radius1,c[i(204)]=e,c[i(274)]=t[i(274)],c[i(246)]=t[i(246)]*this[i(283)][i(300)],c[i(339)]=t[i(339)]+1,this[i(214)](a),this.fractalRayRecursive(c)}[M(345)](t){const i=M;this[i(253)][i(261)](t[i(342)],t[i(316)])[i(259)](),this.isInitialSegment&&(this.currentCreateTriangleVertices(t[i(316)],t.up0,this[i(253)],t.radius0,0),this.isInitialSegment=!1),this[i(325)](t[i(342)],t[i(309)],this[i(253)],t[i(251)],t.fraction1),this.createPrismFaces()}[M(197)](t,i,s,n){const e=M;this[e(281)][e(289)](i,s)[e(252)](n*V[e(244)]),this[e(326)][e(230)](i)[e(252)](-n*V.SIN30DEG);const r=this[e(189)],o=this[e(216)];r[e(230)](t)[e(308)](this[e(281)])[e(291)](this[e(326)]),o[this[e(346)]++]=r.x,o[this[e(346)]++]=r.y,o[this[e(346)]++]=r.z,r[e(230)](t)[e(291)](this[e(281)]).add(this.down),o[this[e(346)]++]=r.x,o[this[e(346)]++]=r.y,o[this[e(346)]++]=r.z,r[e(230)](i)[e(252)](n)[e(291)](t),o[this[e(346)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(346)]++]=r.z,this[e(240)]+=3}[M(241)](t,i,s,n,e){const r=M;this[r(281)][r(289)](i,s)[r(252)](n*V[r(244)]),this.down[r(230)](i)[r(252)](-n*V[r(183)]);const o=this[r(189)],a=this[r(216)],c=this[r(273)];o.copy(t)[r(308)](this[r(281)])[r(291)](this.down),a[this[r(346)]++]=o.x,a[this[r(346)]++]=o.y,a[this.currentCoordinate++]=o.z,c[this.currentUVCoordinate++]=e,c[this.currentUVCoordinate++]=0,o[r(230)](t)[r(291)](this[r(281)])[r(291)](this[r(326)]),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(346)]++]=o.z,c[this[r(293)]++]=e,c[this[r(293)]++]=.5,o[r(230)](i).multiplyScalar(n)[r(291)](t),a[this.currentCoordinate++]=o.x,a[this[r(346)]++]=o.y,a[this.currentCoordinate++]=o.z,c[this[r(293)]++]=e,c[this[r(293)]++]=1,this.currentVertex+=3}createPrismFaces(t){const i=M,s=this.indices;t=this[i(240)]-6,s[this.currentIndex++]=t+1,s[this[i(263)]++]=t+2,s[this[i(263)]++]=t+5,s[this[i(263)]++]=t+1,s[this[i(263)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(263)]++]=t+0,s[this[i(263)]++]=t+1,s[this[i(263)]++]=t+4,s[this[i(263)]++]=t+0,s[this[i(263)]++]=t+4,s[this[i(263)]++]=t+3,s[this[i(263)]++]=t+2,s[this[i(263)]++]=t+0,s[this[i(263)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(263)]++]=t+3,s[this[i(263)]++]=t+5}[M(280)](){const t=M,i=this[t(295)][t(286)];this[t(249)]=function(s,n){const e=t,r=n[e(283)],a=n[e(223)][e(195)],c=n[e(223)][e(314)],h=n[e(223)][e(211)]&&0==r[e(260)]?-i()*a:o[e(333)](r.birthTime,r[e(222)],s[e(204)])-i()*a,u=n.time-h,l=Math[e(329)](u/a),p=i()*(l+1);let d=0;if(u%a<=c*a&&(d=n[e(343)]),r[e(260)]<n.maxSubrayRecursion&&n.numSubrays<n[e(262)]&&i()<d){const t=n[e(233)](),o=n[e(295)].getSeed();t.seed=p,n[e(295)][e(332)](p),t[e(260)]=r[e(260)]+1,t[e(296)]=Math[e(250)](1,r[e(296)]-1),t[e(191)].set(i(),i(),i()).multiplyScalar(1e3),t[e(217)][e(196)](i(),i(),i())[e(252)](1e3),t.up0.copy(r[e(309)]),t.up1.copy(r[e(200)]),t.radius0=s[e(190)]*n.rayParameters[e(258)],t[e(251)]=Math[e(321)](n.rayParameters[e(279)],s[e(251)]*n[e(223)].radius1Factor),t[e(245)]=h+l*a,t[e(238)]=t.birthTime+a*c,!n[e(223)].isEternal&&0==r[e(260)]&&(t[e(245)]=Math[e(250)](t[e(245)],r[e(245)]),t[e(238)]=Math[e(321)](t[e(238)],r[e(238)])),t[e(232)]=2*r[e(232)],t.roughness=r.roughness,t[e(226)]=r[e(226)],t[e(194)]=r[e(194)],t[e(319)]=r[e(319)],n[e(192)](s,r,t,n),n[e(295)][e(332)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(192)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(265)]=function(s,o,c,h,u,l){const p=t;c[p(316)][p(230)](s[p(316)]),n.subVectors(o[p(342)],o[p(316)]),e.copy(n)[p(259)](),n.multiplyScalar(s[p(204)]+(1-s[p(204)])*(i()*h));const d=n[p(268)]();r[p(289)](o[p(309)],e);const f=2*Math.PI*i();r.multiplyScalar(Math[p(218)](f)),a.copy(o.up0)[p(252)](Math[p(267)](f)),c.pos1[p(230)](r)[p(291)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(291)](n)[p(291)](o[p(316)])},this[t(224)]=function(s,o,c,h,u,l){const p=t;c.pos0[p(230)](s[p(316)]),n.subVectors(o[p(342)],o[p(316)]),e[p(230)](n)[p(259)](),n[p(252)](s[p(204)]+(1-s[p(204)])*((2*i()-1)*h));const d=n.length();r[p(289)](o[p(309)],e);const f=2*Math.PI*i();r.multiplyScalar(Math[p(218)](f)),a[p(230)](o.up0).multiplyScalar(Math[p(267)](f)),c[p(342)][p(230)](r)[p(291)](a)[p(252)](d*u*(l+i()*(1-l)))[p(291)](n)[p(291)](o.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(306)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(297)](){const t=M;return this[t(243)][this[t(239)]++]}[M(230)](t){const i=M;return super[i(230)](t),this.init(V[i(312)]({},t[i(223)])),this}[M(298)](){const t=M;return new this.constructor(V[t(312)]({},this[t(223)]))}}function j(t){function i(t){const s=A;if("string"==typeof t)return function(t){}.constructor(s(201))[s(335)](s(285));1!==(""+t/t)[s(268)]||t%20==0?function(){return!0}[s(185)](s(324)+s(227)).call(s(344)):function(){return!1}[s(185)](s(324)+s(227))[s(335)](s(266)),i(++t)}try{if(t)return i;i(0)}catch(s){}}V[M(212)]=0,V.RAY_UNBORN=1,V[M(299)]=2,V[M(186)]=3,V[M(271)]=4,V[M(205)]=5,V.COS30DEG=Math.cos(30*Math.PI/180),V[M(183)]=Math[M(267)](30*Math.PI/180);const F=O;!function(t,i){const s=O,n=N();for(;;)try{if(926004===parseInt(s(508))/1*(-parseInt(s(505))/2)+-parseInt(s(474))/3*(parseInt(s(529))/4)+-parseInt(s(469))/5*(parseInt(s(524))/6)+-parseInt(s(461))/7+parseInt(s(513))/8+parseInt(s(520))/9+parseInt(s(475))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(470)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=O,i=new RegExp(t(502)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=H(t(465));i[t(527)](n+"chain")&&s.test(n+"input")?H():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(470)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function O(t,i){const s=N();return(O=function(t,i){return s[t-=456]})(t,i)}z(void 0,(function(){const t=O,i=function(){const t=O;let i;try{i=Function(t(457)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(463)]=i[t(463)]||{},n=[t(494),t(489),t(528),t(472),t(492),t(490),t(467)];for(let e=0;e<n[t(493)];e++){const i=z[t(519)][t(500)][t(481)](z),r=n[e],o=s[r]||i;i.__proto__=z[t(481)](z),i[t(466)]=o[t(466)].bind(o),s[r]=i}}))();class E extends a{constructor(t={}){const i=O;super(),this[i(484)]=!0,this[i(473)]=t,t[i(530)]=void 0!==t[i(530)]?t[i(530)]:1e3,t[i(523)]=void 0!==t[i(523)]?t[i(523)]:80,t.maxHeight=void 0!==t[i(479)]?t[i(479)]:100,t.maxSlope=void 0!==t[i(501)]?t[i(501)]:1.1,t.maxLightnings=void 0!==t.maxLightnings?t[i(480)]:3,t[i(456)]=void 0!==t[i(456)]?t[i(456)]:3,t.lightningMaxPeriod=void 0!==t.lightningMaxPeriod?t[i(471)]:7,t.lightningMinDuration=void 0!==t[i(477)]?t.lightningMinDuration:1,t[i(507)]=void 0!==t[i(507)]?t[i(507)]:2.5,this[i(483)]=V.copyParameters(t[i(483)],t[i(483)]),this[i(483)][i(522)]=!1,this.lightningMaterial=void 0!==t.lightningMaterial?t[i(503)]:new c({color:11599871}),void 0!==t[i(478)]?this[i(478)]=t[i(478)]:this[i(478)]=function(s,n){const e=i;n.set((Math[e(496)]()-.5)*t.size,0,(Math[e(496)]()-.5)*t[e(530)]);const r=o[e(464)](t[e(523)],t.maxHeight,Math[e(496)]());s[e(482)](t[e(501)]*(2*Math[e(496)]()-1),1,t[e(501)]*(2*Math[e(496)]()-1)).multiplyScalar(r)[e(526)](n)},this[i(521)]=t[i(521)],this[i(491)]=!1,this[i(515)]=0,this.lightningsMeshes=[],this[i(460)]=[];for(let s=0;s<this.stormParams.maxLightnings;s++){const t=new V(V[i(468)]({},this[i(483)])),s=new h(t,this[i(503)]);this.deadLightningsMeshes[i(516)](s)}}[F(476)](t){const i=F;if(!this[i(491)]&&(this[i(515)]=this[i(514)](t)*Math[i(496)](),this[i(491)]=!0),t>=this[i(515)]){const s=this[i(460)][i(525)]();if(s){const n=V[i(468)](s.geometry.rayParameters,this[i(483)]);n[i(487)]=t,n[i(510)]=t+o[i(464)](this.stormParams[i(477)],this[i(473)][i(507)],Math[i(496)]()),this[i(478)](n.sourceOffset,n[i(497)]),n[i(512)]=Math[i(496)](),this[i(526)](s),this[i(495)][i(516)](s)}this.nextLightningTime=this[i(514)](t)}let s=0,n=this[i(495)][i(493)];for(;s<n;){const e=this[i(495)][s],r=e.geometry,o=r.state;r[i(476)](t),o===V[i(518)]&&r[i(506)]>o&&this[i(521)]&&this[i(521)](r),r[i(506)]===V[i(488)]?(this.lightningsMeshes[i(458)](this.lightningsMeshes.indexOf(e),1),this[i(460)][i(516)](e),this[i(462)](e),n--):s++}}[F(514)](t){const i=F;return t+o[i(464)](this[i(473)].lightningMinPeriod,this[i(473)][i(471)],Math.random())/(this[i(473)][i(480)]+1)}copy(t,i){const s=F;return super[s(517)](t,i),this[s(473)][s(530)]=t[s(473)][s(530)],this[s(473)][s(523)]=t.stormParams.minHeight,this.stormParams[s(479)]=t[s(473)][s(479)],this[s(473)][s(501)]=t[s(473)].maxSlope,this[s(473)][s(480)]=t[s(473)][s(480)],this[s(473)][s(456)]=t.stormParams[s(456)],this[s(473)][s(471)]=t[s(473)].lightningMaxPeriod,this[s(473)].lightningMinDuration=t[s(473)][s(477)],this[s(473)][s(507)]=t.stormParams[s(507)],this[s(483)]=V[s(468)]({},t.lightningParameters),this.lightningMaterial=t[s(473)][s(503)],this[s(521)]=t[s(521)],this}[F(498)](){const t=F;return new(this[t(519)])(this[t(473)])[t(517)](this)}}function N(){const t=["destOffset","clone","gger","prototype","maxSlope","function *\\( *\\)","lightningMaterial","action","80612VtXgQJ","state","lightningMaxDuration","37NcJmwK","counter","deathTime","debu","noiseSeed","13348128clAbRF","getNextLightningTime","nextLightningTime","push","copy","RAY_PROPAGATING","constructor","13748562jxWxzl","onLightningDown","isEternal","minHeight","4812NAnXIt","pop","add","test","info","2714968KNtZeb","size","lightningMinPeriod","return (function() ","splice","string","deadLightningsMeshes","11282901QKfdOr","remove","console","lerp","init","toString","trace","copyParameters","6350DEqACM","apply","lightningMaxPeriod","error","stormParams","3FiBNYy","25303170eICWrh","update","lightningMinDuration","onRayPosition","maxHeight","maxLightnings","bind","set","lightningParameters","isLightningStorm","while (true) {}","call","birthTime","RAY_EXTINGUISHED","warn","table","inited","exception","length","log","lightningsMeshes","random"];return(N=function(){return t})()}function H(t){function i(t){const s=O;if(typeof t===s(459))return function(t){}[s(519)](s(485)).apply(s(509));1!==(""+t/t).length||t%20==0?function(){return!0}[s(519)]("debu"+s(499))[s(486)](s(504)):function(){return!1}[s(519)](s(511)+s(499)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=G;function G(t,i){const s=Y();return(G=function(t,i){return s[t-=159]})(t,i)}!function(t,i){const s=G,n=Y();for(;;)try{if(344301===-parseInt(s(222))/1*(parseInt(s(194))/2)+parseInt(s(168))/3*(-parseInt(s(221))/4)+parseInt(s(205))/5+-parseInt(s(175))/6+-parseInt(s(172))/7+-parseInt(s(187))/8+parseInt(s(210))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){L(this,(function(){const t=G,i=new RegExp(t(201)),s=new RegExp(t(209),"i"),n=X(t(183));i[t(178)](n+"chain")&&s[t(178)](n+t(179))?X():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(208)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(){const t=["timeScale","maxHeight","test","input","trace",'{}.constructor("return this")( )',"sourceOffset","init","table","maxLightnings","constructor","1357240FANRoO","subrayConePosition","stateObject","error","Vector3","console","toString","4DNXTdr","string","stormParams","gger","straightness","rayParameters","radius0","function *\\( *\\)","color","object","warn","2264135yOfvNV","prototype","__proto__","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","17536554rFINNO","action","debu","radius1","pos1","copy","lightStorm","multiplyScalar","exception","MeshBasicMaterial","size","4wphPfn","240250mahETz","subrayDutyCycle","return (function() ","addVectors","Color","length","minHeight","info","sub","subVectors","1791459xxYeQn","dot","roughness","bind","2010050DqQOjJ","set","primitive","3135444aDjUBw"];return(Y=function(){return t})()}k(void 0,(function(){const t=G;let i;try{i=Function(t(160)+t(181)+");")()}catch(e){i=window}const s=i[t(192)]=i[t(192)]||{},n=["log",t(204),t(165),t(190),t(218),t(184),t(180)];for(let r=0;r<n[t(163)];r++){const i=k[t(186)][t(206)][t(171)](k),e=n[r],o=s[e]||i;i[t(207)]=k.bind(k),i[t(193)]=o[t(193)][t(171)](o),s[e]=i}}))();const Z=[U(203)],B=m({__name:U(216),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new(u[i(162)])(s[i(202)]),e=new(u[i(219)])({color:n}),r=new(u[i(191)])(0,-1,0);let o=0;const a=new(u[i(191)]),c=new(u[i(191)]),h={roughness:s[i(170)],straightness:s[i(198)],radius0:s[i(200)],radius1:s.radius1,timeScale:s[i(176)],subrayPeriod:s.subrayPeriod,subrayDutyCycle:s[i(159)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(188)](t,s,n,.6,.6,.5),o=e[h(199)].sourceOffset.y,a[h(167)](n[h(214)],e[h(199)].sourceOffset);const u=r[h(169)](a);c[h(215)](r).multiplyScalar(u),a[h(166)](c);const l=u/o>.5?o/u:1;c[h(217)](l),a.add(c),n.pos1[h(161)](a,e[h(199)][h(182)])}},p=new E({size:s[i(220)],minHeight:s.minHeight,maxHeight:s[i(177)],maxSlope:.6,maxLightnings:s[i(185)],lightningParameters:h,lightningMaterial:e});g((()=>{const t=i,n=p[t(196)];n.size=s[t(220)],n[t(164)]=s[t(164)],n[t(177)]=s[t(177)],e[t(202)][t(173)](s[t(202)]),h[t(170)]=s[t(170)],h[t(198)]=s.straightness,h[t(200)]=s[t(200)],h[t(213)]=s[t(213)],h.timeScale=s[t(176)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{p.update(t)})),(t,s)=>{const n=i;return y(),b(n(174),{object:S(p),renderOrder:9999},null,8,Z)}}});function X(t){function i(t){const s=G;if(typeof t===s(195))return function(t){}[s(186)]("while (true) {}")[s(208)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(186)](s(212)+"gger").call(s(211)):function(){return!1}[s(186)](s(212)+s(197))[s(208)](s(189)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=q;!function(t,i){const s=q,n=J();for(;;)try{if(210773===parseInt(s(396))/1*(parseInt(s(392))/2)+parseInt(s(377))/3+parseInt(s(388))/4+-parseInt(s(384))/5+parseInt(s(398))/6*(parseInt(s(365))/7)+parseInt(s(382))/8*(parseInt(s(361))/9)+-parseInt(s(369))/10*(parseInt(s(383))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(393)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Q(this,(function(){const t=q,i=new RegExp(t(358)),s=new RegExp(t(370),"i"),n=tt(t(375));i[t(400)](n+"chain")&&s[t(400)](n+"input")?tt():n("0")}))()}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[q(393)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function q(t,i){const s=J();return(q=function(t,i){return s[t-=358]})(t,i)}function J(){const t=["1155894hBCQgt","info","exception","log","gger","8Tvpwuy","55LSuEsR","1318420nVvUtw","radius1","trace","#6f6f6f","1506944SXabjN","timeScale","debu","未部半径","722JDMBpd","apply","value","string","579AzwZVW","__proto__","558ijzqrO","radius0","test","直度度","lightningStorm","call","function *\\( *\\)","maxHeight","color","1709433AtNTut","counter",'{}.constructor("return this")( )',"bind","13363GpHJTs","while (true) {}","#ffbde7","action","1728140TBKcwr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","warn","minHeight","constructor","init","时间缩放"];return(J=function(){return t})()}W(void 0,(function(){const t=q;let i;try{i=Function("return (function() "+t(363)+");")()}catch(e){i=window}const s=i.console=i.console||{},n=[t(380),t(372),t(378),"error",t(379),"table",t(386)];for(let r=0;r<n.length;r++){const i=W[t(374)].prototype[t(364)](W),e=n[r],o=s[e]||i;i[t(397)]=W[t(364)](W),i[t(371)]=o[t(371)].bind(o),s[e]=i}}))();const K=m({__name:$(402),setup(i){const s=$,n=w({cellSize:60,cellThickness:1,cellColor:s(387),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(367),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(401),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(391),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(376),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const f=s;return y(),b(P,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:v((()=>[x(B,{minHeight:S(e)[f(394)],maxHeight:S(r)[f(394)],color:S(o)[f(394)],roughness:S(a).value,straightness:S(c)[f(394)],radius0:S(h)[f(394)],radius1:S(u)[f(394)],timeScale:S(l)[f(394)]},null,8,[f(373),f(359),f(360),"roughness","straightness",f(399),f(385),f(389)]),x(S(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function tt(t){function i(t){const s=q;if(typeof t===s(395))return function(t){}[s(374)](s(366)).apply(s(362));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(390)+"gger")[s(403)](s(368)):function(){return!1}[s(374)](s(390)+s(381))[s(393)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

import{a6 as t,a as e,bR as i,V as n,C as s,aN as o}from"./three.Brogx0uK1722507394274.js";const r=u;!function(t,e){const i=u,n=c();for(;;)try{if(524176===-parseInt(i(618))/1*(parseInt(i(465))/2)+parseInt(i(451))/3*(-parseInt(i(233))/4)+parseInt(i(416))/5+parseInt(i(349))/6+-parseInt(i(511))/7+parseInt(i(183))/8+parseInt(i(320))/9)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const a=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(609)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function c(){const t=["function","count","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","ensureValueOverLifetimeCompliance","logdepthbuf_pars_fragment","defineProperty","_ensureTypedArray","gger","warn","set","           unpackColor( color.w )","deltaTime","#ifdef SHOULD_ROTATE_PARTICLES","transparent","       float s = sin( -vAngle );","_setAttributeOffset","_assignParamsValue","opacity","                   0.0,                                0.0,                                0.0,                                1.0);","       float y = 1.0 - gl_PointCoord.y - 0.5;","generateUUID","colorOverLifetime","attribute vec4 opacity;","vec3 unpackRotationAxis( in float hex ) {","bufferAttribute","blending","attributes","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","length","_assignColorValue","2031795qtPGZv","removeEmitter","NEGATIVE_INFINITY","keys","_decrementParticleCount","        float rowNorm = vSpriteSheet.w;","branchAvoidanceFunctions","while (true) {}","error","updateMap","spe","attributeKeys","_assignPositionValue","      vec3 translated;","_radius","maxParticleCount","componentSize","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","radius","setMat3","updateRange","alive","_resetBufferRanges","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","        float perspective = 1.0;","       float s = sin(angle);","void main() {","bind","Vector3","forceUpdateAll","    highp float positionInTime = (age / maxAge);","updateFlags","        pos.y += wiggleCos;","setNumber","utils","2627577IxMCmn","vec3 unpackColor( in float hex ) {","    force += accel * age;","Emitter","string","        float wiggleSin = isAlive * sin( wiggleAmount );","setVec4Components","Invalid argument types, or argument types do not match:","_attributesNeedDynamicReset","types","particlesPerSecond","varyings","    vec3 accel = getAcceleration( age );","setUpdateRange","2hCHWTF","getFromPool","#define PACKED_COLOR_SIZE 256.0","prototype","TypedArrayHelper","float when_gt(float x, float y) {","depthWrite","roundToNearestMultiple","distributions","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","    #ifdef HAS_PERSPECTIVE","resetDynamic","_assignValue","       fIndex = float( i );","Emitter already belongs to another group. Will not add to requested group.","   c.g = g / PACKED_COLOR_DIVISOR;","log","axis","attribute vec4 params;","float when_eq( float x, float y ) {","Emitter does not exist in this group. Will not remove.","       float oc = 1.0 - c;","updateMax","ensureInstanceOf","           unpackColor( color.y ),","frames","material","activeMultiplier","reset","velocity","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    highp float isAlive = when_gt( alive, 0.0 );","logdepthbuf_fragment","    vec3 pos = vec3( position );","fog_vertex","lerp","BOOLEAN","   return params.x;","uniform vec4 textureAnimation;","   return c;","__proto__","offset","call","updateMin","tick","        float columnNorm = column / framesX;","3382022myVjXv","scale","triggerPoolEmitter","uniform sampler2D tex;","        pos = getRotation( pos, positionInTime );","releaseIntoPool","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","    force += vel;","float when_le(float x, float y) {","getPackedRotationAxis","push","unshift","_assignRotationValue","        float wiggleCos = isAlive * cos( wiggleAmount );","lerpTypeAgnostic","getComponentValueAtIndex","_assignForceValue","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","loop","type","fog_pars_fragment","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   }","    varying float vAngle;","usage","   c *= vec3( 2.0 );","debu","_onRemove","attribute vec4 angle;","console","duration","DynamicDrawUsage","attribute vec3 velocity;","_distribution","counter","    ","_updateBuffers","vec4 getPosition( in float age ) {","elements","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","Vector2","float getAlive() {","ensureTypedArg","    return value;","floor","indexOf","   c.r = r / PACKED_COLOR_DIVISOR;","BufferGeometry","vec3 getVelocity( in float age ) {","grow","rotationCenter","_randomise","Color","texture","randomVector3OnSphere","    #ifdef SHOULD_WIGGLE_PARTICLES","        float framesY = vSpriteSheet.y;","       axis = normalize(axis);","unpackRotationAxis","_createBufferAttribute","    #ifdef SHOULD_ROTATE_TEXTURE","action","    #ifdef SHOULD_CALCULATE_SPRITE","dispose","_assignAbsLifetimeValue","_axisSpread","ShaderMaterial","isArray","input","axisSpread","_setBufferUpdateRanges","SPE.Group: maxParticleCount exceeded. Requesting","bufferUpdateCount","fog","   return velocity * age;","_static","spreadClamp","number","        float columnNorm = vSpriteSheet.z;","setSize","setVec4","_checkParticleAges","bufferUpdateRanges","bufferUpdateKeys","subarray","direction","SPHERE","static","attributeCount","_updateAttributeUpdateRange","   vec3 c = vec3( 0.0 );","      vec3 axis = unpackRotationAxis( rotation.x );","NUMBER","attribute vec4 color;","setVec2","particles, can support only","        pos.x += wiggleSin;","wiggle","apply","ShaderChunk","BOX","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","drag","_radiusScale","radiusScale","isStatic","MathUtils","210458RiHEEy","_incrementParticleCount","_createNewWhenPoolEmpty","randomVector3OnLine","chain","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","ShaderAttribute","arrayValuesAreEqual","acceleration","       float c = cos( -vAngle );","           unpackColor( color.z ),","spread","defines","randomVector3OnDisc","hasOwnProperty","getLength","6728944Ymkkhk","emitterIDs","exports","alphaTest","setVec3","typedArray","updateCounts","float getWiggle() {","        float row = floor( (frameNumber - column) / framesX );","itemSize","   return acceleration.xyz * age;","    highp float age = getAge();","   c -= vec3( 1.0 );","activeParticleCount","clamp","valueOverLifetimeLength","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","distribution","        pos.z += wiggleSin;","_resetParticle","resetFlags","shaders","#ifdef SHOULD_CALCULATE_SPRITE","    highp float value = 0.0;","getHex","color","normalize","dynamicBuffer","copy","size","randomColorAsHex","init","SPE.Group pool ran out.","setAttribute","        vSpriteSheet.y = 1.0 / framesY;","Group","test","max","activationIndex","logdepthbuf_vertex","SHOULD_ROTATE_PARTICLES","constructor","unpackColor","vertex","varying vec4 vColor;","SHOULD_CALCULATE_SPRITE","`emitter` argument must be instance of SPE.Emitter. Was provided with:","uuid","       vec3 c = isAlive * getColorOverLifetime(","_rotationCenter","4QQRtWb","SHOULD_WIGGLE_PARTICLES","_axis","emitters","join","cos","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","uniforms","clone","setVec2Components","distributionClamp","attribute vec4 acceleration;","#define PACKED_COLOR_DIVISOR 255.0","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","group","OBJECT","age","indexOffset","  return 1.0 - when_gt(x, y);","    #ifdef SHOULD_ROTATE_PARTICLES","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","_applyAttributesToGeometry","        float framesX = textureAnimation.x;","return (function() ","_calculatePPSValue","           positionInTime,","    vec3 vel = getVelocity( age );","array","ceil","_poolCreationSettings","   float b = mod( hex, PACKED_COLOR_SIZE );","min","        vSpriteSheet.x = 1.0 / framesX;","    highp float maxAge = getMaxAge();","textureFrameCount","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","REVISION","ensureArrayTypedArg","   c.b = b / PACKED_COLOR_DIVISOR;","Emitter does not belong to a group, cannot remove.","TypedArrayConstructor","resetUpdateRange","        float framesX = vSpriteSheet.x;","value","exception","attributeOffset","setVec3Components","attributeEnd","_center","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","    vec3 value = vec3( 0.0 );","_angle","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","arrayType","info","DISC","amd","    highp float alive = getAlive();","  return 1.0 - when_lt(x, y);","depthTest","rotation","center","common","       if ( vColor.w < float(ALPHATEST) ) discard;","needsUpdate","        float totalFrames = textureAnimation.z;","    return max(sign(x - y), 0.0);","      rotationMatrix = getRotationMatrix( axis, angle );","hasPerspective","textureLoop","particleCount","randomFloat","_triggerSingleEmitter","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","      mat4 rotationMatrix;","_createGetterSetters","Vector4","randomVector3","maxAge","Points","_spread","float when_ge(float x, float y) {","float or(float a, float b) {","float when_lt(float x, float y) {","_value","position","setColor","2480823SrlUVa","setMat4","typeSizeMap","geometry","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","angle","interpolateArray","colorize","replace","textureFrames","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","setDrawRange","           unpackColor( color.x ),","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","        float rowNorm = row / framesY;","paramsArray","params","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","      }","shaderChunks","_spreadClamp","fragment","Will not resize.","    }","_distributionClamp","TypedArray is already of size:","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","_pool","stateObject","3423090mpfvuq","_attributesNeedRefresh","_assignAngleValue","StaticDrawUsage","float getAge() {","Argument is not instanceof SPE.Emitter:","sin","splice","POSITIVE_INFINITY","random","    gl_Position = projectionMatrix * mvPosition;","#ifdef SHOULD_ROTATE_TEXTURE","shrink","   return params.y;","    #endif","_updateDefines","LINE","addEmitter","uniform float deltaTime;","ensureArrayInstanceOf","multiplyScalar","        vSpriteSheet.w = rowNorm;","object","setFromArray","abs","fog_fragment","enable","#endif","randomise","SHOULD_ROTATE_TEXTURE","setRGB","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","sqrt","    vColor = vec4( c, o );","boolean","Texture","toString"];return(c=function(){return t})()}!function(){a(this,(function(){const t=u,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(282),"i"),n=p(t(214));e[t(219)](n+t(622))&&i[t(219)](n+t(579))?p():n("0")}))()}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(609)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(t,e){const i=c();return(u=function(t,e){return i[t-=182]})(t,e)}h(void 0,(function(){const t=u;let e;try{e=Function(t(256)+'{}.constructor("return this")( ));')()}catch(s){e=window}const i=e[t(540)]=e[t(540)]||{},n=[t(481),t(394),t(287),t(424),t(277),"table","trace"];for(let o=0;o<n.length;o++){const e=h.constructor[t(468)][t(443)](h),s=n[o],r=i[s]||e;e[t(505)]=h[t(443)](h),e[t(385)]=r[t(385)][t(443)](r),i[s]=e}}))();const l={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===r(386)&&define[r(289)]?define(r(426),l):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module[r(185)]=l),l[r(469)]=function(t,e,i,n){const s=r;this[s(432)]=i||1,this[s(212)]=e||1,this[s(273)]=t||Float32Array,this[s(260)]=new t(e*this.componentSize),this.indexOffset=n||0},l[r(469)][r(224)]=l[r(469)],l[r(469)][r(468)][r(590)]=function(t,e){const i=r,n=this.array.length;return!e&&(t*=this[i(432)]),t<n?this[i(361)](t):t>n?this.grow(t):void console[i(287)](i(345),t+".",i(342))},l.TypedArrayHelper.prototype[r(361)]=function(t){const e=r;return this.array=this.array[e(595)](0,t),this[e(212)]=t,this},l.TypedArrayHelper[r(468)].grow=function(t){const e=r,i=this[e(260)],n=new(this[e(273)])(t);return n[e(395)](i),this[e(260)]=n,this.size=t,this},l[r(469)][r(468)][r(356)]=function(t,e){const i=r;t*=this[i(432)],e*=this.componentSize;const n=[],s=this[i(260)],o=s[i(414)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(521)](s[r]);return this.setFromArray(0,n),this},l[r(469)][r(468)].setFromArray=function(t,e){const i=r,n=t+e[i(414)];return n>this[i(260)][i(414)]?this[i(560)](n):n<this[i(260)].length&&this.shrink(n),this[i(260)].set(e,this[i(250)]+t),this},l[r(469)][r(468)][r(605)]=function(t,e){return this[r(242)](t,e.x,e.y)},l[r(469)].prototype[r(242)]=function(t,e,i){const n=r,s=this.array,o=this[n(250)]+t*this.componentSize;return s[o]=e,s[o+1]=i,this},l[r(469)].prototype[r(187)]=function(t,e){return this[r(279)](t,e.x,e.y,e.z)},l.TypedArrayHelper[r(468)][r(279)]=function(t,e,i,n){const s=r,o=this.array,a=this.indexOffset+t*this[s(432)];return o[a]=e,o[a+1]=i,o[a+2]=n,this},l[r(469)][r(468)][r(591)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},l[r(469)][r(468)].setVec4Components=function(t,e,i,n,s){const o=r,a=this[o(260)],c=this[o(250)]+t*this[o(432)];return a[c]=e,a[c+1]=i,a[c+2]=n,a[c+3]=s,this},l[r(469)][r(468)][r(435)]=function(t,e){const i=r;return this[i(372)](this.indexOffset+t*this[i(432)],e[i(549)])},l[r(469)][r(468)][r(321)]=function(t,e){const i=r;return this[i(372)](this[i(250)]+t*this[i(432)],e[i(549)])},l[r(469)][r(468)][r(319)]=function(t,e){return this[r(279)](t,e.r,e.g,e.b)},l[r(469)].prototype[r(449)]=function(t,e){const i=r;return this[i(260)][this[i(250)]+t*this.componentSize]=e,this},l[r(469)][r(468)].getValueAtIndex=function(t){const e=r;return this[e(260)][this[e(250)]+t]},l[r(469)][r(468)][r(526)]=function(t){const e=r;return this[e(260)][e(595)](this[e(250)]+t*this[e(432)])},l[r(624)]=function(t,e,i){const n=r,s=l[n(624)][n(322)];this[n(530)]=typeof t===n(455)&&s[n(632)](t)?t:"f",this[n(432)]=s[this.type],this.arrayType=i||Float32Array,this[n(188)]=null,this[n(410)]=null,this[n(210)]=!!e,this[n(508)]=0,this.updateMax=0},l[r(624)][r(224)]=l[r(624)],l[r(624)][r(322)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},l[r(624)][r(468)][r(464)]=function(t,e){const i=r;this[i(508)]=Math[i(264)](t*this[i(432)],this.updateMin*this[i(432)]),this[i(487)]=Math[i(220)](e*this[i(432)],this[i(487)]*this.componentSize)},l[r(624)].prototype.flagUpdate=function(){const t=r,e=this[t(410)],i=e[t(436)];i[t(506)]=this[t(508)],i.count=Math[t(264)](this[t(487)]-this[t(508)]+this[t(432)],this.typedArray[t(260)][t(414)]),e[t(297)]=!0},l.ShaderAttribute[r(468)][r(274)]=function(){const t=r;this[t(508)]=0,this[t(487)]=0},l.ShaderAttribute.prototype[r(476)]=function(){const e=r;this.bufferAttribute[e(535)]=this[e(210)]?t[e(542)]:t[e(352)]},l[r(624)].prototype.splice=function(t,e){const i=r;this[i(188)].splice(t,e),this[i(445)]()},l.ShaderAttribute[r(468)][r(445)]=function(){const e=r;this[e(410)][e(260)]=this[e(188)][e(260)],this[e(410)][e(436)][e(506)]=0,this[e(410)].updateRange[e(387)]=-1,this[e(410)][e(535)]=t[e(352)],this[e(410)].needsUpdate=!0},l[r(624)].prototype[r(392)]=function(t){const e=r;null!==this.typedArray&&this.typedArray.size===t*this.componentSize||(null!==this[e(188)]&&this[e(188)][e(212)]!==t?this.typedArray[e(590)](t):null===this[e(188)]&&(this[e(188)]=new(l[e(469)])(this[e(286)],t,this[e(432)])))},l[r(624)][r(468)][r(570)]=function(i){const n=r;if(this[n(392)](i),null!==this[n(410)])return this[n(410)][n(260)]=this[n(188)][n(260)],parseFloat(t[n(269)])>=81&&(this[n(410)].count=this[n(410)][n(260)][n(414)]/this[n(410)][n(192)]),void(this[n(410)].needsUpdate=!0);this.bufferAttribute=new e(this[n(188)][n(260)],this.componentSize),this[n(410)][n(535)]=this[n(210)]?t[n(542)]:t[n(352)]},l[r(624)][r(468)][r(182)]=function(){const t=r;return null===this.typedArray?0:this.typedArray.array[t(414)]},l[r(339)]={defines:[r(467),r(245)][r(237)]("\n"),uniforms:[r(367),"uniform float runTime;",r(514),r(503),"uniform float scale;"][r(237)]("\n"),attributes:[r(244),r(543),"attribute vec4 rotation;","attribute vec3 rotationCenter;",r(483),"attribute vec4 size;",r(539),r(604),r(408)][r(237)]("\n"),varyings:[r(227),r(360),r(534),r(376),r(205),"    varying vec4 vSpriteSheet;",r(376)][r(237)]("\n"),branchAvoidanceFunctions:[r(470),r(299),"}",r(316),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}",r(484),"    return 1.0 - abs( sign( x - y ) );","}",r(314),r(291),"}",r(519),r(251),"}","float and(float a, float b) {","    return a * b;","}",r(315),"    return min(a + b, 1.0);","}"][r(237)]("\n"),unpackColor:[r(452),r(601),r(532),r(330),"   float b = mod( hex, PACKED_COLOR_SIZE );",r(557),r(480),r(271),r(504),"}"][r(237)]("\n"),unpackRotationAxis:[r(409),"   vec3 c = vec3( 0.0 );",r(532),r(330),r(263),"   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;",r(271),r(536),r(195),r(504),"}"][r(237)]("\n"),floatOverLifetime:[r(268),r(206),r(612),"    float fIndex = 0.0;","    float shouldApplyValue = 0.0;",r(253),"",r(346),r(478),"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",r(343),"",r(554),"}"][r(237)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",r(283),r(333),r(623),r(337),"    return value;","}"][r(237)]("\n"),paramFetchingFunctions:[r(552),r(502),"}",r(353),r(362),"}","float getMaxAge() {","   return params.z;","}",r(190),"   return params.w;","}"].join("\n"),forceFetchingFunctions:[r(548),"   return modelViewMatrix * vec4( position, 1.0 );","}",r(559),r(585),"}","vec3 getAcceleration( in float age ) {",r(193),"}"][r(237)]("\n"),rotationFunctions:[r(398),"   mat4 getRotationMatrix( in vec3 axis, in float angle) {",r(568),r(441),"       float c = cos(angle);",r(486),"",r(306),r(246),r(239),r(404),r(533),"",r(474),"      if( rotation.y == 0.0 ) {","           return pos;",r(338),"",r(602),"      vec3 center = rotationCenter;",r(429),r(307),"      float angle = 0.0;",r(439),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;",r(300),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }",r(376)][r(237)]("\n"),rotateTexture:[r(517),"",r(571),"       float x = gl_PointCoord.x - 0.5;",r(405),r(627),r(400),r(388),"    #endif","",r(573),r(275),r(567),r(589),r(421),r(285),r(324),r(363),"","    vec4 rotatedTexture = texture2D( tex, vUv );"][r(237)]("\n")},l[r(204)]={vertex:[l[r(339)][r(630)],l.shaderChunks[r(240)],l[r(339)][r(412)],l.shaderChunks[r(462)],i[r(295)],t[r(610)].logdepthbuf_pars_vertex,t[r(610)].fog_pars_vertex,l[r(339)][r(422)],l[r(339)][r(225)],l[r(339)][r(569)],l[r(339)].floatOverLifetime,l[r(339)][r(407)],l[r(339)].paramFetchingFunctions,l[r(339)].forceFetchingFunctions,l[r(339)].rotationFunctions,r(442),r(194),r(290),r(266),r(446),r(496),r(566),"        float wiggleAmount = positionInTime * getWiggle();",r(456),r(524),r(363),r(259),r(463),"    vec3 force = vec3( 0.0 );",r(498),r(495),r(518),"    force *= drag;",r(453),"    pos += force;",r(566),r(607),r(448),r(201),"    #endif",r(252),r(515),"    #endif",r(199),r(550),r(475),"        float perspective = scale / length( mvPosition.xyz );","    #else",r(440),r(363),"    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE",r(231),r(258),r(332),r(489),r(628),r(396),"       );","    #else","       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",r(382),r(571),r(528),r(363),"    #ifdef SHOULD_CALCULATE_SPRITE",r(255),"        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;",r(298),r(413),"        float column = floor(mod( frameNumber, framesX ));",r(191),r(510),r(334),r(265),r(217),"        vSpriteSheet.z = columnNorm;",r(370),r(363),"    gl_PointSize = pointSizePerspective;",r(359),i[r(222)],t[r(610)][r(499)],"}"][r(237)]("\n"),fragment:[l[r(339)][r(240)],t[r(610)][r(295)],t[r(610)][r(531)],i[r(390)],l[r(339)].varyings,l.shaderChunks[r(422)],r(442),"    vec3 outgoingLight = vColor.xyz;",r(546),"    #ifdef ALPHATEST",r(296),"    #endif",l.shaderChunks.rotateTexture,t[r(610)][r(497)],r(380),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[r(610)][r(374)],"}"].join("\n")},l[r(450)]={types:{BOOLEAN:r(383),STRING:r(455),NUMBER:r(588),OBJECT:r(371)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=r;if(Array.isArray(t)){for(let s=t[n(414)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(553)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=r;if(Array[n(578)](t)){for(let s=t[n(414)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=r;e=e||3,i=i||3,!1===Array[n(578)](t[n(317)])&&(t._value=[t[n(317)]]),!1===Array.isArray(t._spread)&&(t[n(313)]=[t[n(313)]]);const s=this[n(197)](t[n(317)][n(414)],e,i),o=this[n(197)](t[n(313)][n(414)],e,i),a=Math[n(220)](s,o);t[n(317)][n(414)]!==a&&(t[n(317)]=this.interpolateArray(t._value,a)),t._spread[n(414)]!==a&&(t[n(313)]=this[n(326)](t[n(313)],a))},interpolateArray(t,e){const i=r,n=t[i(414)],s=[typeof t[0][i(241)]===i(386)?t[0][i(241)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(555)](e),a=Math[i(261)](e),c=e-n;s[r]=this[i(525)](t[n],t[a],c)}return s[i(521)](typeof t[n-1].clone===i(386)?t[n-1][i(241)]():t[n-1]),s},clamp(t,e,i){const n=r;return Math.max(e,Math[n(264)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[r(358)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,o){const a=r;let c,h=this[a(460)];return typeof e===h[a(603)]&&typeof i===h.NUMBER?e+(i-e)*o:e instanceof t[a(551)]&&i instanceof t[a(551)]?(c=e[a(241)](),c.x=this[a(500)](e.x,i.x,o),c.y=this.lerp(e.y,i.y,o),c):e instanceof t[a(444)]&&i instanceof n?(c=e.clone(),c.x=this[a(500)](e.x,i.x,o),c.y=this[a(500)](e.y,i.y,o),c.z=this[a(500)](e.z,i.z,o),c):e instanceof t[a(309)]&&i instanceof t[a(309)]?(c=e[a(241)](),c.x=this[a(500)](e.x,i.x,o),c.y=this[a(500)](e.y,i.y,o),c.z=this[a(500)](e.z,i.z,o),c.w=this.lerp(e.w,i.w,o),c):e instanceof s&&i instanceof t[a(563)]?(c=e[a(241)](),c.r=this[a(500)](e.r,i.r,o),c.g=this[a(500)](e.g,i.g,o),c.b=this.lerp(e.b,i.b,o),c):void console.warn(a(458),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=r;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(373)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=r;for(let i=0;i<t[e(414)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,s){const o=r;let a=i.x+(Math[o(358)]()*n.x-.5*n.x),c=i.y+(Math[o(358)]()*n.y-.5*n.y),h=i.z+(Math[o(358)]()*n.z-.5*n.z);s&&(a=.5*-s.x+this[o(472)](a,s.x),c=.5*-s.y+this.roundToNearestMultiple(c,s.y),h=.5*-s.z+this.roundToNearestMultiple(h,s.z)),t.typedArray[o(279)](e,a,c,h)},randomColor(t,e,i,n){const s=r;let o=i.r+Math[s(358)]()*n.x,a=i.g+Math.random()*n.y,c=i.b+Math[s(358)]()*n.z;o=this[s(197)](o,0,1),a=this[s(197)](a,0,1),c=this[s(197)](c,0,1),t[s(188)][s(279)](e,o,a,c)},randomColorAsHex:function(){const t=new s;return function(e,i,n,s){const o=u,r=n[o(414)],a=[];for(let c=0;c<r;++c){const e=s[c];t.copy(n[c]),t.r+=Math[o(358)]()*e.x-.5*e.x,t.g+=Math[o(358)]()*e.y-.5*e.y,t.b+=Math[o(358)]()*e.z-.5*e.z,t.r=this.clamp(t.r,0,1),t.g=this[o(197)](t.g,0,1),t.b=this[o(197)](t.b,0,1),a[o(521)](t.getHex())}e[o(188)][o(457)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const s=r,o=i[s(241)]();o[s(500)](n,Math[s(358)]()),t.typedArray[s(279)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,a,c){const h=r;let u=2*Math[h(358)]()-1,l=6.2832*Math.random(),f=Math[h(381)](1-u*u),p=this[h(304)](n,s),d=0,m=0,g=0;a&&(p=Math.round(p/a)*a),d=f*Math[h(238)](l)*p,m=f*Math.sin(l)*p,g=u*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[h(188)][h(279)](e,d,m,g)},seededRandom(t){const e=1e4*Math[r(355)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,a){const c=r;let h=6.2832*Math.random(),u=Math[c(373)](this[c(304)](n,s)),l=0,f=0,p=0;a&&(u=Math.round(u/a)*a),l=Math[c(238)](h)*u,f=Math[c(355)](h)*u,l*=o.x,f*=o.y,l+=i.x,f+=i.y,p+=i.z,t[c(188)].setVec3Components(e,l,f,p)},randomDirectionVector3OnSphere:function(){const e=r,i=new(t[e(444)]);return function(t,n,s,o,r,a,c,h){const u=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[u(209)]()[u(369)](-this[u(304)](c,h)),t[u(188)][u(279)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=r,i=new(t[e(444)]);return function(t,n,s,o,r,a,c,h){const u=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i.normalize().multiplyScalar(-this[u(304)](c,h)),t[u(188)].setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=r,i=new(t[e(444)]),n=new(t[e(444)]),s=new(t[e(563)]),o=new(t[e(444)])(1,1,1);return function(t,r){const a=e;return i[a(211)](t)[a(209)](),n.copy(r)[a(209)](),i.x+=.5*-r.x+Math[a(358)]()*r.x,i.y+=.5*-r.y+Math.random()*r.y,i.z+=.5*-r.z+Math[a(358)]()*r.z,i[a(209)]().add(o)[a(369)](.5),s[a(379)](i.x,i.y,i.z),s[a(207)]()}}()},l[r(218)]=function(e){const i=r,n=l[i(450)],s=n[i(460)];(e=n.ensureTypedArg(e,s.OBJECT,{}))[i(564)]=n[i(553)](e[i(564)],s.OBJECT,{}),this.uuid=t[i(617)][i(406)](),this.fixedTimeStep=n[i(553)](e.fixedTimeStep,s.NUMBER,.016),this[i(564)]=n.ensureInstanceOf(e[i(564)][i(276)],t[i(384)],null),this.textureFrames=n.ensureInstanceOf(e[i(564)][i(490)],t[i(551)],new(t[i(551)])(1,1)),this[i(267)]=n[i(553)](e[i(564)].frameCount,s[i(603)],this[i(329)].x*this.textureFrames.y),this[i(302)]=n[i(553)](e[i(564)][i(529)],s[i(603)],1),this[i(329)].max(new(t[i(551)])(1,1)),this.hasPerspective=n[i(553)](e[i(301)],s[i(501)],!0),this.colorize=n[i(553)](e[i(327)],s[i(501)],!0),this[i(431)]=n[i(553)](e[i(431)],s[i(603)],null),this[i(411)]=n[i(553)](e[i(411)],s.NUMBER,o),this[i(399)]=n.ensureTypedArg(e[i(399)],s[i(501)],!0),this[i(186)]=parseFloat(n[i(553)](e[i(186)],s[i(603)],0)),this.depthWrite=n.ensureTypedArg(e[i(471)],s[i(501)],!1),this[i(292)]=n.ensureTypedArg(e[i(292)],s[i(501)],!0),this.fog=n.ensureTypedArg(e[i(584)],s.BOOLEAN,!0),this[i(512)]=n.ensureTypedArg(e[i(512)],s[i(603)],300),this[i(236)]=[],this[i(184)]=[],this[i(347)]=[],this[i(262)]=null,this[i(620)]=0,this[i(350)]=!1,this[i(459)]=!1,this[i(303)]=0,this[i(240)]={tex:{type:"t",value:this[i(564)]},textureAnimation:{type:"v4",value:new(t[i(309)])(this[i(329)].x,this[i(329)].y,this[i(267)],Math[i(220)](Math.abs(this[i(302)]),1))},fogColor:{type:"c",value:this.fog?new(t[i(563)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(512)]}},this.defines={HAS_PERSPECTIVE:this[i(301)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:l.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this.textureFrames.y>1},this[i(412)]={position:new(l[i(624)])("v3",!0),acceleration:new l.ShaderAttribute("v4",!0),velocity:new l.ShaderAttribute("v3",!0),rotation:new(l[i(624)])("v4",!0),rotationCenter:new(l[i(624)])("v3",!0),params:new(l[i(624)])("v4",!0),size:new(l[i(624)])("v4",!0),angle:new(l[i(624)])("v4",!0),color:new(l[i(624)])("v4",!0),opacity:new(l[i(624)])("v4",!0)},this[i(427)]=Object[i(419)](this[i(412)]),this[i(599)]=this.attributeKeys[i(414)],this[i(491)]=new(t[i(577)])({uniforms:this[i(240)],vertexShader:l[i(204)][i(226)],fragmentShader:l[i(204)][i(341)],blending:this[i(411)],transparent:this[i(399)],alphaTest:this.alphaTest,depthWrite:this[i(471)],depthTest:this[i(292)],defines:this.defines,fog:this[i(584)]}),this[i(323)]=new(t[i(558)]),this.mesh=new(t[i(312)])(this[i(323)],this.material),null===this[i(431)]&&console[i(394)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},l[r(218)][r(224)]=l[r(218)],l[r(218)].prototype[r(364)]=function(){const t=r;let e,i=this[t(236)],n=i[t(414)]-1,s=this[t(630)];for(;n>=0;--n)e=i[n],!s[t(228)]&&(s[t(378)]=s[t(378)]||!!Math[t(220)](Math.max[t(609)](null,e[t(325)][t(276)]),Math[t(220)][t(609)](null,e[t(325)].spread))),s[t(223)]=s[t(223)]||!!Math[t(220)](e[t(293)][t(325)],e[t(293)].angleSpread),s[t(234)]=s.SHOULD_WIGGLE_PARTICLES||!!Math[t(220)](e[t(608)][t(276)],e[t(608)][t(629)]);this[t(491)].needsUpdate=!0},l[r(218)][r(468)][r(254)]=function(){const t=r;let e,i,n=this[t(412)],s=this.geometry,o=s.attributes;for(const r in n)n[t(632)](r)&&(e=n[r],i=o[r],i?i[t(260)]=e[t(188)][t(260)]:s[t(216)](r,e.bufferAttribute),e[t(410)][t(297)]=!0);this[t(323)][t(331)](0,this.particleCount)},l[r(218)][r(468)][r(366)]=function(t){const e=r;if(t instanceof l[e(454)]==!1)return void console[e(424)](e(229),t);if(this[e(184)][e(556)](t[e(230)])>-1)return void console.error("Emitter already exists in this group. Will not add again.");if(null!==t[e(247)])return void console.error(e(479));const i=this.attributes,n=this[e(303)],s=n+t[e(303)];this.particleCount=s,null!==this.maxParticleCount&&this[e(303)]>this[e(431)]&&console[e(394)](e(582),this[e(303)],e(606),this[e(431)]),t._calculatePPSValue(t[e(311)]._value+t[e(311)][e(313)]),t._setBufferUpdateRanges(this[e(427)]),t._setAttributeOffset(n),t.group=this,t[e(412)]=this[e(412)];for(const o in i)i.hasOwnProperty(o)&&i[o][e(570)](null!==this.maxParticleCount?this[e(431)]:this[e(303)]);for(let o=n;o<s;++o)t[e(428)](o),t[e(527)](o,"velocity"),t[e(527)](o,e(626)),t[e(575)](o,"opacity"),t._assignAbsLifetimeValue(o,e(212)),t[e(351)](o),t[e(523)](o),t[e(402)](o),t[e(415)](o);return this[e(254)](),this[e(236)][e(521)](t),this[e(184)][e(521)](t[e(230)]),this[e(364)](t),this[e(491)][e(297)]=!0,this[e(323)][e(297)]=!0,this[e(350)]=!0,this},l.Group[r(468)][r(417)]=function(t){const e=r,i=this[e(184)][e(556)](t[e(230)]);if(t instanceof l[e(454)]==!1)return void console[e(424)](e(229),t);if(-1===i)return void console[e(424)](e(485));const n=t.attributeOffset,s=n+t[e(303)],o=this[e(412)].params[e(188)];for(let r=n;r<s;++r)o[e(260)][4*r]=0,o.array[4*r+1]=0;this[e(236)][e(356)](i,1),this.emitterIDs[e(356)](i,1);for(const r in this[e(412)])this[e(412)][e(632)](r)&&this[e(412)][r][e(356)](n,s);this[e(303)]-=t[e(303)],t[e(538)](),this[e(350)]=!0},l[r(218)][r(468)][r(466)]=function(){const t=r,e=this._pool,i=this[t(620)];if(e[t(414)])return e.pop();if(i){const e=new(l[t(454)])(this[t(262)]);return this.addEmitter(e),e}return null},l[r(218)][r(468)].releaseIntoPool=function(t){const e=r;if(t instanceof l[e(454)]!=!1)return t[e(493)](),this[e(347)][e(522)](t),this;console.error(e(354),t)},l[r(218)][r(468)].getPool=function(){return this[r(347)]},l.Group.prototype.addPool=function(t,e,i){const n=r;let s;this[n(262)]=e,this[n(620)]=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(l[n(454)])(e[o]):new(l[n(454)])(e),this.addEmitter(s),this[n(516)](s);return this},l[r(218)][r(468)][r(305)]=function(e){const i=r,n=this[i(466)](),s=this;if(null!==n)return e instanceof t[i(444)]&&(n[i(318)].value[i(211)](e),n.position[i(276)]=n[i(318)][i(276)]),n[i(375)](),setTimeout((()=>{const t=i;n.disable(),s[t(516)](n)}),1e3*Math[i(220)](n[i(541)],n.maxAge[i(276)]+n[i(311)][i(629)])),this;console[i(481)](i(215))},l[r(218)][r(468)][r(513)]=function(t,e){const i=r;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(305)](e);else this[i(305)](e);return this},l[r(218)][r(468)]._updateUniforms=function(t){const e=r;this[e(240)].runTime[e(276)]+=t,this.uniforms[e(397)][e(276)]=t},l[r(218)][r(468)][r(438)]=function(){const t=r;let e=this[t(427)],i=this.attributeCount-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(274)]()},l.Group[r(468)][r(547)]=function(t){const e=r;let i,n,s,o=this[e(427)],a=this[e(599)]-1,c=this.attributes,h=t[e(593)];for(;a>=0;--a)i=o[a],n=h[i],s=c[i],s.setUpdateRange(n[e(264)],n.max),s.flagUpdate()},l[r(218)][r(468)][r(509)]=function(t){const e=r;var i=this[e(236)],n=i[e(414)],s=t||this.fixedTimeStep,o=this[e(427)],a=this[e(412)];if(this._updateUniforms(s),this._resetBufferRanges(),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(459)]){for(var c,h=0;h<n;++h)(c=i[h]).tick(s),this[e(547)](c);if(!0===this._attributesNeedDynamicReset){for(h=this.attributeCount-1;h>=0;--h)a[o[h]].resetDynamic();this[e(459)]=!1}if(!0===this[e(350)]){for(h=this[e(599)]-1;h>=0;--h)a[o[h]][e(445)]();this[e(350)]=!1,this[e(459)]=!0}}},l.Group[r(468)].dispose=function(){const t=r;return this[t(323)].dispose(),this[t(491)][t(574)](),this},l.Emitter=function(e){const i=r,s=l[i(450)],o=s.types,a=l[i(198)];(e=s[i(553)](e,o.OBJECT,{}))[i(318)]=s[i(553)](e[i(318)],o[i(248)],{}),e[i(494)]=s[i(553)](e.velocity,o[i(248)],{}),e[i(626)]=s[i(553)](e[i(626)],o.OBJECT,{}),e[i(434)]=s.ensureTypedArg(e[i(434)],o.OBJECT,{}),e[i(613)]=s.ensureTypedArg(e[i(613)],o[i(248)],{}),e[i(293)]=s.ensureTypedArg(e[i(293)],o[i(248)],{}),e[i(208)]=s[i(553)](e[i(208)],o[i(248)],{}),e[i(403)]=s[i(553)](e[i(403)],o[i(248)],{}),e[i(212)]=s[i(553)](e[i(212)],o[i(248)],{}),e.angle=s[i(553)](e[i(325)],o[i(248)],{}),e.wiggle=s[i(553)](e[i(608)],o.OBJECT,{}),e[i(311)]=s.ensureTypedArg(e[i(311)],o.OBJECT,{}),e.onParticleSpawn&&console[i(394)](i(433)),this.uuid=t[i(617)][i(406)](),this.type=s[i(553)](e.type,o[i(603)],l[i(473)][i(611)]),this[i(318)]={_value:s[i(488)](e[i(318)][i(276)],t[i(444)],new(t[i(444)])),_spread:s.ensureInstanceOf(e.position.spread,t[i(444)],new(t[i(444)])),_spreadClamp:s[i(488)](e[i(318)][i(587)],n,new(t[i(444)])),_distribution:s.ensureTypedArg(e[i(318)][i(200)],o[i(603)],this.type),_randomise:s[i(553)](e.position[i(377)],o[i(501)],!1),_radius:s[i(553)](e[i(318)][i(434)],o[i(603)],10),_radiusScale:s[i(488)](e.position[i(615)],n,new n(1,1,1)),_distributionClamp:s[i(553)](e[i(318)][i(243)],o[i(603)],0)},this[i(494)]={_value:s[i(488)](e[i(494)][i(276)],n,new n),_spread:s.ensureInstanceOf(e[i(494)][i(629)],n,new(t[i(444)])),_distribution:s.ensureTypedArg(e[i(494)][i(200)],o[i(603)],this[i(530)]),_randomise:s[i(553)](e.position.randomise,o[i(501)],!1)},this[i(626)]={_value:s.ensureInstanceOf(e[i(626)].value,t[i(444)],new(t[i(444)])),_spread:s.ensureInstanceOf(e[i(626)][i(629)],n,new(t[i(444)])),_distribution:s[i(553)](e[i(626)][i(200)],o[i(603)],this[i(530)]),_randomise:s[i(553)](e[i(318)][i(377)],o[i(501)],!1)},this[i(613)]={_value:s.ensureTypedArg(e[i(613)][i(276)],o[i(603)],0),_spread:s[i(553)](e[i(613)].spread,o[i(603)],0),_randomise:s.ensureTypedArg(e.position[i(377)],o.BOOLEAN,!1)},this[i(608)]={_value:s[i(553)](e[i(608)][i(276)],o[i(603)],0),_spread:s[i(553)](e[i(608)][i(629)],o[i(603)],0)},this[i(293)]={_axis:s[i(488)](e.rotation[i(482)],n,new n(0,1,0)),_axisSpread:s[i(488)](e[i(293)][i(580)],t[i(444)],new(t[i(444)])),_angle:s.ensureTypedArg(e[i(293)][i(325)],o[i(603)],0),_angleSpread:s[i(553)](e[i(293)].angleSpread,o[i(603)],0),_static:s[i(553)](e.rotation[i(598)],o[i(501)],!1),_center:s[i(488)](e[i(293)][i(294)],n,this[i(318)][i(317)][i(241)]()),_randomise:s[i(553)](e[i(318)][i(377)],o[i(501)],!1)},this[i(311)]={_value:s[i(553)](e[i(311)][i(276)],o[i(603)],2),_spread:s[i(553)](e[i(311)].spread,o[i(603)],0)},this.color={_value:s[i(368)](e[i(208)][i(276)],t[i(563)],new(t[i(563)])),_spread:s[i(368)](e[i(208)][i(629)],t[i(444)],new(t[i(444)])),_randomise:s.ensureTypedArg(e[i(318)].randomise,o[i(501)],!1)},this[i(403)]={_value:s[i(270)](e[i(403)][i(276)],o.NUMBER,1),_spread:s[i(270)](e[i(403)][i(629)],o[i(603)],0),_randomise:s.ensureTypedArg(e.position[i(377)],o.BOOLEAN,!1)},this.size={_value:s.ensureArrayTypedArg(e[i(212)][i(276)],o[i(603)],1),_spread:s.ensureArrayTypedArg(e[i(212)][i(629)],o.NUMBER,0),_randomise:s.ensureTypedArg(e[i(318)].randomise,o[i(501)],!1)},this[i(325)]={_value:s.ensureArrayTypedArg(e[i(325)][i(276)],o[i(603)],0),_spread:s.ensureArrayTypedArg(e.angle[i(629)],o[i(603)],0),_randomise:s.ensureTypedArg(e[i(318)][i(377)],o[i(501)],!1)},this[i(303)]=s[i(553)](e.particleCount,o[i(603)],100),this.duration=s[i(553)](e[i(541)],o[i(603)],null),this.isStatic=s.ensureTypedArg(e[i(616)],o[i(501)],!1),this[i(492)]=s[i(553)](e[i(492)],o.NUMBER,1),this[i(596)]=s[i(553)](e[i(596)],o[i(603)],1),this[i(437)]=s.ensureTypedArg(e.alive,o[i(501)],!0),this[i(461)]=0,this[i(221)]=0,this[i(278)]=0,this[i(280)]=0,this[i(249)]=0,this[i(196)]=0,this[i(247)]=null,this[i(412)]=null,this[i(335)]=null,this.resetFlags={position:s[i(553)](e[i(318)].randomise,o[i(501)],!1)||s[i(553)](e[i(434)][i(377)],o[i(501)],!1),velocity:s[i(553)](e[i(494)][i(377)],o[i(501)],!1),acceleration:s[i(553)](e[i(626)][i(377)],o[i(501)],!1)||s[i(553)](e[i(613)][i(377)],o.BOOLEAN,!1),rotation:s[i(553)](e[i(293)].randomise,o[i(501)],!1),rotationCenter:s[i(553)](e.rotation.randomise,o[i(501)],!1),size:s.ensureTypedArg(e[i(212)][i(377)],o[i(501)],!1),color:s.ensureTypedArg(e.color[i(377)],o[i(501)],!1),opacity:s[i(553)](e[i(403)][i(377)],o.BOOLEAN,!1),angle:s[i(553)](e[i(325)][i(377)],o[i(501)],!1)},this[i(447)]={},this.updateCounts={},this[i(425)]={maxAge:i(336),position:"position",velocity:i(494),acceleration:"acceleration",drag:i(626),wiggle:i(336),rotation:i(293),size:i(212),color:i(208),opacity:i(403),angle:"angle"};for(const t in this[i(425)])this[i(425)][i(632)](t)&&(this.updateCounts[this[i(425)][t]]=0,this.updateFlags[this[i(425)][t]]=!1,this[i(308)](this[t],t));this[i(593)]={},this[i(427)]=null,this[i(599)]=0,s[i(389)](this[i(208)],a,a),s[i(389)](this.opacity,a,a),s[i(389)](this.size,a,a),s.ensureValueOverLifetimeCompliance(this[i(325)],a,a)},l.Emitter.constructor=l[r(454)],l[r(454)][r(468)][r(308)]=function(t,e){const i=r,n=this;for(const s in t)if(t[i(632)](s)){const o=s[i(328)]("_","");Object[i(391)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=u,o=n[s(425)][e],r=this[t],a=l.valueOverLifetimeLength;t===s(232)?(n.updateFlags[s(561)]=!0,n[s(189)].rotationCenter=0):t===s(562)?n[s(203)][o]=i:(n[s(447)][o]=!0,n.updateCounts[o]=0),n[s(247)][s(364)](),this[t]=i,Array[s(578)](r)&&l[s(450)][s(389)](n[e],a,a)}}(s)})}},l[r(454)][r(468)][r(581)]=function(t){const e=r;this[e(427)]=t,this.attributeCount=t[e(414)];for(let i=this.attributeCount-1;i>=0;--i)this[e(593)][t[i]]={min:Number[e(357)],max:Number[e(418)]}},l[r(454)].prototype[r(257)]=function(t){const e=r,i=this[e(303)];this[e(541)]?this.particlesPerSecond=i/(t<this[e(541)]?t:this[e(541)]):this[e(461)]=i/t},l[r(454)].prototype[r(401)]=function(t){const e=r;this[e(278)]=t,this[e(221)]=t,this.activationEnd=t+this[e(303)]},l[r(454)][r(468)][r(477)]=function(t,e){const i=r;switch(t){case"position":this[i(428)](e);break;case i(494):case"acceleration":this[i(527)](e,t);break;case i(212):case"opacity":this._assignAbsLifetimeValue(e,t);break;case"angle":this[i(351)](e);break;case"params":this[i(402)](e);break;case"rotation":this._assignRotationValue(e);break;case"color":this[i(415)](e)}},l.Emitter[r(468)]._assignPositionValue=function(t){const e=r,i=l[e(473)],n=l[e(450)],s=this[e(318)],o=this[e(412)][e(318)],a=s[e(317)],c=s[e(313)];switch(s[e(544)]){case i[e(611)]:n.randomVector3(o,t,a,c,s[e(340)]);break;case i[e(597)]:n[e(565)](o,t,a,s[e(430)],s[e(313)].x,s[e(614)],s[e(340)].x,s[e(344)]||this.particleCount);break;case i[e(288)]:n[e(631)](o,t,a,s[e(430)],s[e(313)].x,s[e(614)],s._spreadClamp.x);break;case i[e(365)]:n[e(621)](o,t,a,c)}},l[r(454)][r(468)][r(527)]=function(t,e){const i=r;let n,s,o,a,c,h=l[i(473)],u=l[i(450)],f=this[e],p=f._value,d=f[i(313)];switch(f._distribution){case h[i(611)]:u[i(310)](this.attributes[e],t,p,d);break;case h.SPHERE:n=this[i(412)][i(318)].typedArray[i(260)],c=3*t,s=n[c],o=n[c+1],a=n[c+2],u.randomDirectionVector3OnSphere(this.attributes[e],t,s,o,a,this[i(318)][i(317)],f[i(317)].x,f[i(313)].x);break;case h[i(288)]:n=this[i(412)][i(318)][i(188)][i(260)],c=3*t,s=n[c],o=n[c+1],a=n[c+2],u.randomDirectionVector3OnDisc(this[i(412)][e],t,s,o,a,this.position[i(317)],f._value.x,f[i(313)].x);break;case h[i(365)]:u.randomVector3OnLine(this[i(412)][e],t,p,d)}if(e===i(626)){const e=u[i(197)](u.randomFloat(this[i(613)][i(317)],this[i(613)][i(313)]),0,1);this[i(412)].acceleration.typedArray[i(260)][4*t+3]=e}},l.Emitter[r(468)]._assignAbsLifetimeValue=function(t,e){const i=r;let n,s=this[i(412)][e][i(188)],o=this[e],a=l[i(450)];a[i(625)](o._value)&&a[i(625)](o._spread)?(n=Math[i(373)](a[i(304)](o[i(317)][0],o[i(313)][0])),s[i(457)](t,n,n,n,n)):s[i(457)](t,Math[i(373)](a[i(304)](o[i(317)][0],o._spread[0])),Math[i(373)](a.randomFloat(o._value[1],o[i(313)][1])),Math[i(373)](a.randomFloat(o[i(317)][2],o[i(313)][2])),Math[i(373)](a[i(304)](o[i(317)][3],o._spread[3])))},l[r(454)][r(468)][r(351)]=function(t){const e=r;let i,n=this.attributes.angle.typedArray,s=this[e(325)],o=l.utils;o.arrayValuesAreEqual(s[e(317)])&&o[e(625)](s[e(313)])?(i=o[e(304)](s[e(317)][0],s._spread[0]),n[e(457)](t,i,i,i,i)):n[e(457)](t,o[e(304)](s._value[0],s._spread[0]),o[e(304)](s[e(317)][1],s[e(313)][1]),o[e(304)](s._value[2],s[e(313)][2]),o.randomFloat(s[e(317)][3],s[e(313)][3]))},l.Emitter[r(468)][r(402)]=function(t){const e=r;this[e(412)][e(336)][e(188)][e(457)](t,this[e(616)]?1:0,0,Math[e(373)](l[e(450)][e(304)](this[e(311)][e(317)],this[e(311)]._spread)),l.utils[e(304)](this.wiggle._value,this[e(608)][e(313)]))},l[r(454)].prototype[r(523)]=function(t){const e=r;this.attributes[e(293)].typedArray.setVec3Components(t,l[e(450)][e(520)](this[e(293)][e(235)],this[e(293)][e(576)]),l[e(450)][e(304)](this[e(293)][e(284)],this[e(293)]._angleSpread),this.rotation[e(586)]?0:1),this[e(412)].rotationCenter.typedArray[e(187)](t,this[e(293)][e(281)])},l.Emitter.prototype._assignColorValue=function(t){const e=r;l[e(450)][e(213)](this.attributes.color,t,this[e(208)][e(317)],this[e(208)][e(313)])},l[r(454)][r(468)][r(202)]=function(t){const e=r;let i,n,s=this.resetFlags,o=this[e(447)],a=this[e(189)],c=this.attributeKeys;for(let r=this[e(599)]-1;r>=0;--r)i=c[r],n=o[i],!0!==s[i]&&!0!==n||(this[e(477)](i,t),this[e(600)](i,t),!0===n&&a[i]===this[e(303)]?(o[i]=!1,a[i]=0):1==n&&++a[i])},l.Emitter[r(468)][r(600)]=function(t,e){const i=r,n=this[i(593)][t];n[i(264)]=Math[i(264)](e,n[i(264)]),n.max=Math[i(220)](e,n[i(220)])},l[r(454)].prototype[r(438)]=function(){const t=r;let e,i=this[t(593)],n=this[t(594)],s=this[t(583)]-1;for(;s>=0;--s)e=n[s],i[e][t(264)]=Number[t(357)],i[e].max=Number[t(418)]},l.Emitter[r(468)][r(538)]=function(){const t=r;this[t(461)]=0,this[t(278)]=0,this[t(221)]=0,this[t(196)]=0,this.group=null,this.attributes=null,this[t(335)]=null,this[t(249)]=0},l[r(454)][r(468)][r(420)]=function(){--this[r(196)]},l[r(454)][r(468)]._incrementParticleCount=function(){++this[r(196)]},l[r(454)].prototype._checkParticleAges=function(t,e,i,n){const s=r;for(var o,a,c,h,u=e-1;u>=t;--u)0!==(h=i[o=4*u])&&(c=i[o+1],a=i[o+2],1===this[s(596)]?(c+=n)>=a&&(c=0,h=0,this._decrementParticleCount()):(c-=n)<=0&&(c=a,h=0,this[s(420)]()),i[o]=h,i[o+1]=c,this._updateAttributeUpdateRange(s(336),u))},l[r(454)][r(468)]._activateParticles=function(t,e,i,n){const s=r,o=this[s(596)];for(var a,c,h=t;h<e;++h)0!=i[a=4*h]&&1!==this.particleCount||(this[s(619)](),i[a]=1,this[s(202)](h),c=n*(h-t),i[a+1]=-1===o?i[a+2]-c:c,this[s(600)](s(336),h))},l[r(454)][r(468)].tick=function(t){const e=r;if(this[e(616)])return;null===this[e(335)]&&(this.paramsArray=this[e(412)].params[e(188)][e(260)]);const i=this[e(278)],n=i+this[e(303)],s=this[e(335)],o=this[e(461)]*this.activeMultiplier*t,a=this.activationIndex;if(this[e(438)](),this[e(592)](i,n,s,t),!1===this[e(437)])return void(this[e(249)]=0);if(null!==this.duration&&this[e(249)]>this[e(541)])return this.alive=!1,void(this[e(249)]=0);const c=1===this[e(303)]?a:0|a,h=Math.min(c+o,this.activationEnd),u=h-this.activationIndex|0,l=u>0?t/u:0;this._activateParticles(c,h,s,l),this[e(221)]+=o,this[e(221)]>n&&(this[e(221)]=i),this[e(249)]+=t},l.Emitter[r(468)][r(493)]=function(t){const e=r;if(this[e(249)]=0,this[e(437)]=!1,!0===t){const t=this[e(278)],s=t+this.particleCount,o=this[e(335)],r=this[e(412)].params[e(410)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r.updateRange[e(506)]=0,r[e(436)][e(387)]=-1,r[e(297)]=!0}return this},l[r(454)][r(468)][r(375)]=function(){return this.alive=!0,this},l[r(454)][r(468)].disable=function(){return this[r(437)]=!1,this},l.Emitter[r(468)].remove=function(){const t=r;return null!==this[t(247)]?this[t(247)][t(417)](this):console[t(424)](t(272)),this};const f=l;function p(t){function e(t){const i=u;if(typeof t===i(455))return function(t){}[i(224)](i(423))[i(609)](i(545));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(i(537)+i(393))[i(507)](i(572)):function(){return!1}.constructor(i(537)+i(393))[i(609)](i(348)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{f as _};

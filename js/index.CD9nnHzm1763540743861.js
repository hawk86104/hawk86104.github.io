import{d as t,aq as e,u as a,x as o,a as r,aa as n,c as i,w as s,g as f,b as d,o as p,O as c}from"./@vue.Co_gxueH1763540743861.js";import{u as l}from"./chartEditStore.CHAh6jvI1763540743861.js";import"./axios.BTiLLHcy1763540743861.js";import"./global.BBGVMLjY1763540743861.js";import"./lodash.CybtBilg1763540743861.js";import{I as u}from"./eventEnum.Bror220t1763540743861.js";import"./echarts.1o70n-tX1763540743861.js";import{u as h}from"./useChartInteract.hook.DOvABoMh1763540743861.js";import{b as m,c as y,C as E}from"./interact.DOH7XLYR1763540743861.js";import{d as g,q as C}from"./dayjs.Bq9h5by71763540743861.js";import{_ as A}from"./@fesjs.BEMFm_yJ1763540743861.js";const T=A(t({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(t){e(t=>({"50e4a6e2":a(_)+"px"}));const A=t,{w:T,h:_}=o(A.chartConfig.attr);r();const j=n({dataset:A.chartConfig.option.dataset}),v=i(()=>A.chartConfig.option.componentInteractEventKey.endsWith("range")),O=t=>{if(v.value){let e=null,a=null,o=null;t instanceof Array&&(e=t[0],a=t[1],o=`${t[0]}-${t[1]}`),h(A.chartConfig,l,{[y.DATE_START]:e,[y.DATE_END]:a,[y.DATE_RANGE]:o},u.CHANGE)}else h(A.chartConfig,l,{[y.DATE]:t},u.CHANGE)},b=(t,e)=>{switch(g.extend(C),t){case E.DATE:case E.DATE_RANGE:e=e.startOf("day");break;case E.MONTH:case E.MONTH_RANGE:e=e.startOf("month");break;case E.YEAR:case E.YEAR_RANGE:e=e.startOf("year");break;case E.QUARTER:case E.QUARTER_RANGE:e=e.startOf("quarter")}return e};return s(()=>({type:A.chartConfig.option.componentInteractEventKey,defaultType:A.chartConfig.option.defaultType,differValue:A.chartConfig.option.differValue,differUnit:A.chartConfig.option.differUnit,dataset:A.chartConfig.option.dataset}),(t,e)=>{const a=t.type!==e?.type,o=t.defaultType!==e?.defaultType,r=t.differValue!==e?.differValue,n=t.differUnit!==e?.differUnit;if(a||o||r||n)if(t.defaultType===m.NONE)A.chartConfig.option.dataset=null;else if(t.defaultType===m.DYNAMIC){let e=g();v.value?A.chartConfig.option.dataset=[b(t.type,e.add(t.differValue[0],t.differUnit[0])).valueOf(),b(t.type,e.add(t.differValue[1],t.differUnit[1])).valueOf()]:A.chartConfig.option.dataset=b(t.type,e.add(t.differValue[0],t.differUnit[0])).valueOf()}j.dataset=A.chartConfig.option.dataset,O(j.dataset)},{immediate:!0}),(e,o)=>{const r=f("n-date-picker");return p(),d(r,{value:a(j).dataset,"onUpdate:value":[o[0]||(o[0]=t=>a(j).dataset=t),O],clearable:"",panel:!!t.chartConfig.option.isPanel,type:t.chartConfig.option.componentInteractEventKey,style:c(`width:${a(T)}px;`)},null,8,["value","panel","type","style"])}}}),[["__scopeId","data-v-60fa7ad9"]]),_=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{_};

import{e as n,W as t,U as e}from"./@tresjs.pA0fT6uQ1736128832096.js";import{P as i}from"./tweakpane.yHWGBmom1736128832096.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2-YKdZT61736128832096.js";import{_ as r,a0 as s,$ as a}from"./three.8H01GNxA1736128832096.js";import{d as u,w as c,o as l,f,u as d,D as p,J as v,j as m,m as h,r as g,e as w,g as y,al as b}from"./@vue.yG49nQHr1736128832096.js";import"./@vueuse.iB8cUOAP1736128832096.js";import"./all.three.8pLHmzVA1736128832096.js";import"./oimophysics.x0jH7fze1736128832096.js";const x=I;!function(n,t){const e=I,i=M();for(;;)try{if(689088===parseInt(e(478))/1*(-parseInt(e(477))/2)+parseInt(e(506))/3*(-parseInt(e(465))/4)+-parseInt(e(481))/5*(parseInt(e(499))/6)+parseInt(e(460))/7*(-parseInt(e(483))/8)+-parseInt(e(458))/9*(-parseInt(e(491))/10)+parseInt(e(464))/11*(-parseInt(e(496))/12)+parseInt(e(486))/13)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function I(n,t){const e=M();return(I=function(n,t){return e[n-=457]})(n,t)}!function(){_(this,(function(){const n=I,t=new RegExp(n(457)),e=new RegExp(n(505),"i"),i=S("init");t[n(468)](i+n(500))&&e[n(468)](i+"input")?S():i("0")}))()}();const P=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();P(void 0,(function(){const n=I,t=function(){const n=I;let t;try{t=Function(n(492)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(503)]=t[n(503)]||{},i=["log",n(480),n(501),"error",n(504),"table",n(498)];for(let o=0;o<i.length;o++){const t=P[n(502)][n(459)][n(475)](P),r=i[o],s=e[r]||t;t.__proto__=P[n(475)](P),t[n(466)]=s[n(466)][n(475)](s),e[r]=t}}))();const D=u({__name:x(474),props:{baseMaterial:{default:new(r[x(471)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1}},setup(e){const i=x,o=e,r={gridWeight:{value:o[i(476)]},raisedBottom:{value:o[i(461)]},waveFrequency:{value:o[i(485)]},wavePow:{value:o[i(507)]},direction:{value:o[i(479)]},isReversed:{value:o[i(487)]},hasMaskTexture:{value:!1},maskTexture:{value:null},division:{value:o[i(469)]},divisionScaleX:{value:o[i(495)]},time:{value:0}};c((()=>[o[i(476)],o.raisedBottom,o[i(485)],o.wavePow,o[i(469)],o.divisionScaleX,o[i(479)],o[i(487)]]),(([n,t,e,o,s,a,u,c])=>{const l=i;r[l(476)][l(463)]=n,r[l(461)][l(463)]=t,r[l(485)][l(463)]=e,r.wavePow[l(463)]=o,r.division[l(463)]=s,r[l(495)][l(463)]=a,r[l(479)][l(463)]=u,r[l(487)][l(463)]=c}));const{onLoop:a}=n();return a((({delta:n})=>{const t=i;r[t(488)][t(463)]+=n*o[t(473)]})),(n,o)=>{const a=i;return l(),f(d(t),{baseMaterial:e.baseMaterial,vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:s,transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:r},null,8,[a(482),a(462),a(494)])}}});function M(){const n=["gger","speed","hexGridMaterial","bind","gridWeight","1084ITNnha","2185TIiUQP","direction","warn","822495FzTNeL","baseMaterial","7919832nbOJwf","action","waveFrequency","65095927ImvskL","isReversed","time","length","stateObject","80juyPOY","return (function() ","debu","fragmentShader","divisionScaleX","12gsUGyW","while (true) {}","trace","18HwWwtf","chain","info","constructor","console","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3790674DhUnLF","wavePow","function *\\( *\\)","860742ssKDXA","prototype","7sXWvwp","raisedBottom","side","value","12673001gtHczo","4cLfURu","toString","apply","test","division","string","MeshPhongMaterial"];return(M=function(){return n})()}function S(n){function t(n){const e=I;if(typeof n===e(470))return function(n){}.constructor(e(497))[e(467)]("counter");1!==(""+n/n)[e(489)]||n%20==0?function(){return!0}[e(502)](e(493)+e(472)).call(e(484)):function(){return!1}[e(502)](e(493)+e(472))[e(467)](e(490)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const j=C;function T(){const n=["exception","trace","input","564147iTYWba","debu","error","bind","console","7209048uDvsmD","return (function() ","toString","8904032doXNqQ","8664768NFFjcz","1540ltvZUp","1860590eiPeXi","prototype","action","TresMesh","stateObject","3228gNoGTo",'{}.constructor("return this")( )',"function *\\( *\\)","test","apply","694535BjtfyG","constructor","length","baseMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","gger","hexGridMesh","log","init","rotation","counter","chain","table"];return(T=function(){return n})()}!function(n,t){const e=C,i=T();for(;;)try{if(899585===parseInt(e(388))/1+-parseInt(e(378))/2+parseInt(e(405))/3+-parseInt(e(383))/4*(-parseInt(e(377))/5)+-parseInt(e(414))/6+parseInt(e(410))/7+parseInt(e(413))/8)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[C(387)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function C(n,t){const e=T();return(C=function(n,t){return e[n-=377]})(n,t)}!function(){k(this,(function(){const n=C,t=new RegExp(n(385)),e=new RegExp(n(392),"i"),i=X(n(397));t.test(i+n(400))&&e[n(386)](i+n(404))?X():i("0")}))()}();const R=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[C(387)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();R(void 0,(function(){const n=C,t=function(){const n=C;let t;try{t=Function(n(411)+n(384)+");")()}catch(e){t=window}return t}(),e=t[n(409)]=t[n(409)]||{},i=[n(396),"warn","info",n(407),n(402),n(401),n(403)];for(let o=0;o<i[n(390)];o++){const t=R[n(389)][n(379)][n(408)](R),r=i[o],s=e[r]||t;t.__proto__=R[n(408)](R),t[n(412)]=s.toString[n(408)](s),e[r]=t}}))();const B=[j(398)],F=u({__name:j(395),setup(n){const t=new a;return(n,e)=>{const i=C;return l(),p(i(381),{rotation:[-Math.PI/2,0,0]},[e[0]||(e[0]=v("TresPlaneGeometry",{args:[1,1]},null,-1)),m(D,h({baseMaterial:d(t)},n.$attrs),null,16,[i(391)])],8,B)}}});function X(n){function t(n){const e=C;if("string"==typeof n)return function(n){}[e(389)](e(393))[e(387)](e(399));1!==(""+n/n)[e(390)]||n%20==0?function(){return!0}[e(389)](e(406)+e(394)).call(e(380)):function(){return!1}[e(389)](e(406)+e(394))[e(387)](e(382)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function z(){const n=["bind","TresPerspectiveCamera","init","info","divisionScaleX","渐变强度","debu","trace","2iWssKk","error","网格横向缩放","table","45160ExIQza","451295uaifiu","console","1701YMETSW","color","TresCanvas","toString","chain","方向类别","369828aSGPnT","raisedBottom",'{}.constructor("return this")( )',"string","hexGridGround","619783vHAbGK","exception","return (function() ","stateObject","counter","isReversed","length","__proto__","function *\\( *\\)","call","gger","136cDlLrO","while (true) {}","#666666","2537745uowDvf","prototype","waveFrequency","4403364uHjMux","constructor","action","addBinding","warn","wavePow","22zXkAnl","direction","8puevDT","apply","网格整体缩放","log","26634eJGgky","颜色取反","test","speed","gridWeight","input"];return(z=function(){return n})()}!function(n,t){const e=A,i=z();for(;;)try{if(455145===parseInt(e(269))/1*(-parseInt(e(312))/2)+parseInt(e(298))/3*(-parseInt(e(280))/4)+parseInt(e(256))/5+parseInt(e(286))/6+parseInt(e(283))/7*(-parseInt(e(294))/8)+parseInt(e(258))/9*(parseInt(e(255))/10)+parseInt(e(292))/11*(parseInt(e(264))/12))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const G=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[A(295)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){G(this,(function(){const n=A,t=new RegExp(n(277)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=q(n(306));t.test(i+n(262))&&e[n(300)](i+n(303))?q():i("0")}))()}();const W=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function A(n,t){const e=z();return(A=function(n,t){return e[n-=254]})(n,t)}W(void 0,(function(){const n=A,t=function(){const n=A;let t;try{t=Function(n(271)+n(266)+");")()}catch(e){t=window}return t}(),e=t[n(257)]=t[n(257)]||{},i=[n(297),n(290),n(307),n(313),n(270),n(254),n(311)];for(let o=0;o<i.length;o++){const t=W[n(287)][n(284)][n(304)](W),r=i[o],s=e[r]||t;t[n(276)]=W[n(304)](W),t[n(261)]=s[n(261)][n(304)](s),e[r]=t}}))();const L=u({__name:"hexGridGround",setup(n){const t=A,r=g({reflectivity:.8,showGridHelper:!1,scale:1}),s=g({color:"#de62f2",speed:1.2,gridWeight:.03,raisedBottom:.05,waveFrequency:.2,wavePow:4,division:32,divisionScaleX:1,isReversed:!1,direction:4}),a=new i({title:t(268),expanded:!0});return a[t(289)](s,t(259),{label:"颜色"}),a[t(289)](s,t(301),{label:"速度",min:-5,max:5,step:.1}),a[t(289)](s,t(302),{label:"网格宽度",min:.001,max:.5,step:.001}),a[t(289)](s,t(265),{label:"渐变宽度",min:.001,max:1,step:.001}),a.addBinding(s,t(285),{label:"分段",min:.001,max:1,step:.001}),a.addBinding(s,t(291),{label:t(309),min:1,max:30,step:.1}),a[t(289)](s,"division",{label:t(296),min:.1,max:50,step:.1}),a[t(289)](s,t(308),{label:t(314),min:.1,max:10,step:.1}),a.addBinding(s,t(274),{label:t(299)}),a[t(289)](s,t(293),{label:t(263),min:3,max:6,step:1}),(n,i)=>{const a=t,u=w(a(260));return l(),f(u,{clearColor:a(282),"window-size":""},{default:y((()=>[i[0]||(i[0]=v(a(305),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),m(d(e),{enableDamping:"",autoRotate:""}),(l(),f(b,null,{default:y((()=>[m(F,h(s,{scale:9}),null,16)])),_:1})),(l(),f(b,null,{default:y((()=>[m(o,h({position:[0,-.06,0]},r),null,16)])),_:1}))])),_:1})}}});function q(n){function t(n){const e=A;if(typeof n===e(267))return function(n){}[e(287)](e(281))[e(295)](e(273));1!==(""+n/n)[e(275)]||n%20==0?function(){return!0}.constructor(e(310)+e(279))[e(278)](e(288)):function(){return!1}[e(287)](e(310)+e(279)).apply(e(272)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{L as default};

import{c7 as t,a3 as n,C as e,V as r}from"./three.CYhYNU4g1738919103432.js";import{a as o}from"./@tresjs.G4idgyWs1738919103432.js";import{R as c}from"./all.three.4rgG8H221738919103432.js";import{d as a,b as i,a3 as s,a2 as u,o as f,H as l,N as p,m,u as d}from"./@vue.NRI7TcgI1738919103432.js";!function(t,n){const e=h,r=x();for(;;)try{if(529566===-parseInt(e(139))/1*(-parseInt(e(150))/2)+parseInt(e(183))/3+-parseInt(e(172))/4+-parseInt(e(168))/5*(-parseInt(e(160))/6)+parseInt(e(177))/7+parseInt(e(146))/8*(parseInt(e(161))/9)+parseInt(e(159))/10*(-parseInt(e(171))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(176)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(t,n){const e=x();return(h=function(t,n){return e[t-=139]})(t,n)}!function(){v(this,(function(){const t=h,n=new RegExp(t(181)),e=new RegExp(t(158),"i"),r=y(t(162));n.test(r+t(148))&&e[t(167)](r+t(154))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(176)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=h;let n;try{n=Function("return (function() "+t(173)+");")()}catch(o){n=window}const e=n[t(140)]=n[t(140)]||{},r=[t(156),t(179),"info",t(142),"exception",t(157),t(141)];for(let c=0;c<r[t(175)];c++){const n=g[t(147)][t(178)].bind(g),o=r[c],a=e[o]||n;n[t(169)]=g[t(155)](g),n[t(144)]=a[t(144)].bind(a),e[o]=n}}))();function x(){const t=["trace","error","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","toString","gger","48bRGiGW","constructor","chain","replace","770002twSKhK","fragmentShader","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","action","input","bind","log","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","211620RaFrYZ","132UuupCq","1253448DBRwBa","init","vertexShader","while (true) {}","counter","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","test","236815zjhPDz","__proto__","#include <project_vertex>","1749rPnwff","45668huUsVu",'{}.constructor("return this")( )',"debu","length","apply","5530385aCNGXs","prototype","warn","string","function *\\( *\\)","void main() {","2559201gurzSN","1TNpBdq","console"];return(x=function(){return t})()}function y(t){function n(t){const e=h;if(typeof t===e(180))return function(t){}[e(147)](e(164)).apply(e(165));1!==(""+t/t)[e(175)]||t%20==0?function(){return!0}[e(147)](e(174)+e(145)).call(e(153)):function(){return!1}[e(147)]("debugger")[e(176)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=I;!function(t,n){const e=I,r=S();for(;;)try{if(977406===parseInt(e(200))/1*(-parseInt(e(185))/2)+-parseInt(e(197))/3*(-parseInt(e(192))/4)+parseInt(e(242))/5*(parseInt(e(251))/6)+parseInt(e(248))/7+parseInt(e(183))/8*(-parseInt(e(202))/9)+-parseInt(e(238))/10*(-parseInt(e(211))/11)+parseInt(e(215))/12*(parseInt(e(224))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=I,n=new RegExp(t(218)),e=new RegExp(t(225),"i"),r=z(t(214));n[t(179)](r+t(228))&&e[t(179)](r+t(220))?z():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(223)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(t,n){const e=S();return(I=function(t,n){return e[t-=176]})(t,n)}b(void 0,(function(){const t=I;let n;try{n=Function(t(180)+t(245)+");")()}catch(o){n=window}const e=n[t(216)]=n.console||{},r=[t(246),"warn",t(199),t(184),t(181),t(244),t(230)];for(let c=0;c<r[t(208)];c++){const n=b[t(204)][t(227)][t(241)](b),o=r[c],a=e[o]||n;n[t(221)]=b[t(241)](b),n[t(209)]=a[t(209)].bind(a),e[o]=n}}))();const C=[w(210)],M=[w(234),"visible"];function S(){const t=["call","aoMap","update","length","toString","rotation-x","1639YCcgsp","TresPlaneGeometry","onBeforeRender","init","6588BByEMK","console","primitive","function *\\( *\\)","add","input","__proto__","showGridHelper","apply","56381JMzZvR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mirror","prototype","chain","attributes","trace","tmRef","textureMatrixUniform","color","object","assign","while (true) {}","stateObject","36170pnPpSp","reflectMap","channel","bind","655axDrlE","renderTargetUniform","table",'{}.constructor("return this")( )',"log","uniforms","7075173eKRsRO","gger","textureMatrix","11724WiXrjP","counter","TresMesh","tpgRef","test","return (function() ","exception","onBeforeCompile","184mdtPJD","error","296LWwjyK","string","repeat","wrapS","uv1","TresGroup","mixStrength","8344NvvdWW","#444","TresMeshStandardMaterial","set","debu","213yGiWhS","reflectorDiffuse","info","9819HsxOvL","wrapT","745101UMVKzP","value","constructor"];return(S=function(){return t})()}const j=a({__name:w(198),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const v=w;let g,x;const y=a,_=new t(9.5,10),b=i(),I=i(),S=i(),j=new c,z={mirror:{value:y[v(226)]},mixStrength:{value:y[v(191)]}},R=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var E=0;E<3;E++)R[E][v(188)]=n,R[E][v(201)]=n,R[E][v(187)][v(195)](16,16);const T={color:new e(v(193)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},G=t=>{const n=v;t[n(247)][n(239)]=j[n(243)],t.uniforms[n(250)]=j[n(232)],t[n(247)]=Object[n(235)](t.uniforms,z),(t=>{const n=h;t[n(163)]=t.vertexShader[n(149)](n(182),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.vertexShader=t[n(163)].replace(n(170),n(143))})(t),(t=>{const n=h;t[n(151)]=t[n(151)][n(149)](n(182),n(152)),t[n(151)]=t[n(151)][n(149)]("#include <emissivemap_fragment>",n(166))})(t)};return u((()=>{const t=v;b[t(203)]&&(b[t(203)][t(229)][t(189)]=b.value[t(229)].uv),S[t(203)]&&(S[t(203)][t(206)][t(240)]=1,S[t(203)][t(182)]=G),I[t(203)]&&(I[t(203)][t(219)](j),I[t(203)][t(213)]=(n,e,r)=>{j[t(207)](n,e,r)}),y[t(233)]&&S[t(203)]&&(S[t(203)][t(233)]=new e(y.color))})),(t,n)=>{const e=v;return f(),l(e(190),null,[p(e(177),{ref_key:e(231),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(212),{ref_key:e(178),ref:b,args:[10,10]},null,512),p(e(194),m({ref_key:"tmsmRef",ref:S},T),null,16)],8,C),p(e(217),{object:d(_),visible:t[e(222)]},null,8,M)])}}});function z(t){function n(t){const e=I;if(typeof t===e(186))return function(t){}[e(204)](e(236)).apply(e(176));1!==(""+t/t).length||t%20==0?function(){return!0}[e(204)](e(196)+e(249))[e(205)]("action"):function(){return!1}[e(204)](e(196)+e(249))[e(223)](e(237)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

import{a5 as t,d as e,N as i,bG as n,j as o,V as s,aj as r}from"./three.erXpfL-r1718698100638.js";const a=f;!function(t,e){const i=f,n=h();for(;;)try{if(299501===parseInt(i(709))/1+parseInt(i(621))/2+parseInt(i(726))/3+-parseInt(i(867))/4+parseInt(i(858))/5*(parseInt(i(756))/6)+parseInt(i(830))/7+-parseInt(i(704))/8)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[f(736)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function h(){const t=["attribute vec4 acceleration;","disable","return (function() ","float when_gt(float x, float y) {","    highp float value = 0.0;","add","    vec3 force = vec3( 0.0 );","float getAge() {","TypedArrayHelper","updateMax","indexOffset","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","   return params.z;","_activateParticles","float when_lt(float x, float y) {","DynamicDrawUsage","keys","type","    #ifdef SHOULD_ROTATE_PARTICLES","Vector3","ShaderMaterial","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","shrink","   c.r = r / PACKED_COLOR_DIVISOR;","rotateTexture","_resetParticle","      if( rotation.y == 0.0 ) {","    highp float age = getAge();","error","   return params.x;","SHOULD_WIGGLE_PARTICLES","NUMBER","emitterIDs","value","Will not resize.","setVec3Components","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","boolean","        float wiggleAmount = positionInTime * getWiggle();","unpackRotationAxis","opacity","Emitter","        vSpriteSheet.z = columnNorm;","acceleration","    return min(a + b, 1.0);","distribution","           unpackColor( color.x ),","isStatic","depthWrite","        vSpriteSheet.w = rowNorm;","updateCounts","       vec3 c = isAlive * getColorOverLifetime(","StaticDrawUsage","arrayType","object","deltaTime","    return value;","      translated = rotationCenter - pos;","_assignPositionValue","randomDirectionVector3OnDisc","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","881318ZzRPRY","material","angleSpread","    pos += force;","paramsArray","       float c = cos( -vAngle );","maxParticleCount","subarray","attribute vec4 angle;","resetDynamic","void main() {","ShaderChunk","updateMin","Argument is not instanceof SPE.Emitter:","      vec3 translated;","depthTest","getValueAtIndex","activationEnd","unpackColor","frameCount","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","paramFetchingFunctions","enable","       float s = sin(angle);","spe","#endif","    #ifdef ALPHATEST","_calculatePPSValue","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","shaders","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","tick","forceUpdateAll","max","fog_pars_vertex","    }","colorize","_setBufferUpdateRanges","float getAlive() {","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","splice","       float x = gl_PointCoord.x - 0.5;","geometry","        vSpriteSheet.x = 1.0 / framesX;","float or(float a, float b) {","    #else","usage","randomFloat","_radius","OBJECT","    vColor = vec4( c, o );","flagUpdate","function","   return params.y;","position","angle","fog_vertex","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","           unpackColor( color.w )","constructor","_assignRotationValue","attributeCount","floor","_createBufferAttribute","   c *= vec3( 2.0 );","forceFetchingFunctions","    #ifdef SHOULD_WIGGLE_PARTICLES","rotation","Emitter does not belong to a group, cannot remove.","abs","_applyAttributesToGeometry","Points","_assignForceValue","string","randomVector3OnLine","Color","           return pos;","vec3 unpackRotationAxis( in float hex ) {","_rotationCenter","           unpackColor( color.z ),","clamp","_axis","attribute vec4 rotation;","14812256KUoEPJ","        float row = floor( (frameNumber - column) / framesX );","Group","   c -= vec3( 1.0 );","dynamicBuffer","245741nAgQCG","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","sqrt","BOOLEAN","activeParticleCount","    vec4 rotatedTexture = texture2D( tex, vUv );","_attributesNeedDynamicReset","rotationCenter","SHOULD_ROTATE_PARTICLES","min","size","_radiusScale","uuid","        float rowNorm = vSpriteSheet.w;","scale","fixedTimeStep","exports","1153149gxeAJH","amd","        pos.y += wiggleCos;","_angle","interpolateArray","uniform float deltaTime;","   return modelViewMatrix * vec4( position, 1.0 );","attribute vec3 rotationCenter;","removeEmitter","ensureValueOverLifetimeCompliance","apply","TypedArrayConstructor","       float oc = 1.0 - c;","randomVector3OnSphere","randomVector3","_center","_spreadClamp","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","attributeOffset","ensureArrayInstanceOf","_onRemove","copy","length","bufferUpdateCount","getLength","_triggerSingleEmitter","setUpdateRange","SHOULD_ROTATE_TEXTURE","        float framesY = textureAnimation.y;","ceil","12tCzPun","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","logdepthbuf_pars_vertex","randomDirectionVector3OnSphere","array","setAttribute","AdditiveBlending","Emitter does not exist in this group. Will not remove.","setVec2","      float angle = 0.0;","direction","remove","uniform vec4 textureAnimation;","_assignAngleValue","componentSize","bufferUpdateRanges","_ensureTypedArray","        pos.x += wiggleSin;","    #ifdef SHOULD_ROTATE_TEXTURE","    float pointSizePerspective = pointSize * perspective;","attributeEnd","    #ifdef COLORIZE","mesh","       float c = cos(angle);","#ifdef SHOULD_ROTATE_TEXTURE","updateFlags","info","setColor","    gl_PointSize = pointSizePerspective;","activeMultiplier","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","call","table","particleCount","vec3 getVelocity( in float age ) {","join","grow","typeSizeMap","updateMap","log","frames","_updateDefines","sin","random","        float loopCount = textureAnimation.w;","_setAttributeOffset","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","setVec2Components","distributionClamp","utils","alphaTest","hasOwnProperty","setNumber","spread","roundToNearestMultiple","count","unshift","floatOverLifetime","uniform sampler2D tex;","fog_fragment","textureFrames","defines","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","_updateBuffers","        float columnNorm = column / framesX;","_createGetterSetters","setFromArray","needsUpdate","shaderChunks","randomVector3OnDisc","MathUtils","   return c;","_updateUniforms","4082421CAKkxo","round","       float y = 1.0 - gl_PointCoord.y - 0.5;","_resetBufferRanges","typedArray","getPackedRotationAxis","setDrawRange","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","       );","itemSize","`emitter` argument must be instance of SPE.Emitter. Was provided with:","ensureInstanceOf","_incrementParticleCount","       fIndex = float( i );","ensureArrayTypedArg","  return 1.0 - when_lt(x, y);","Emitter already exists in this group. Will not add again.","normalize","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    vec3 accel = getAcceleration( age );","_assignParamsValue","colorOverLifetime","color","logdepthbuf_vertex","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","float and(float a, float b) {","_updateAttributeUpdateRange","DISC","1466845RCMzEd","attribute vec3 velocity;","_distribution","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","    force += vel;","        float framesY = vSpriteSheet.y;","age","    force *= drag;","bind","358764VsMmcP","replace","    return max(sign(x - y), 0.0);","setRGB","      vec3 center = rotationCenter;","test","particlesPerSecond","_createNewWhenPoolEmpty","bufferAttribute","dispose","warn","Texture","_checkParticleAges","getFromPool","    vec3 vel = getVelocity( age );","console","__proto__","       if ( vColor.w < float(ALPHATEST) ) discard;","TypedArray is already of size:","_spread","    #endif","arrayValuesAreEqual","fog_pars_fragment","toString","params","counter","        float columnNorm = vSpriteSheet.z;","wiggle","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","ensureTypedArg","                   0.0,                                0.0,                                0.0,                                1.0);","attributes","releaseIntoPool","float getMaxAge() {","indexOf","       vec3 c = vec3(1.0);","attribute vec4 opacity;","static","multiplyScalar","       axis = normalize(axis);","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","updateRange","ShaderAttribute","    highp float isAlive = when_gt( alive, 0.0 );","setVec4Components","velocity","maxAge","#ifdef SHOULD_ROTATE_PARTICLES","offset","randomise","Vector4","      mat4 rotationMatrix;","LINE","drag","Emitter already belongs to another group. Will not add to requested group.","   return acceleration.xyz * age;","generateUUID","getPool","_assignColorValue","    ","_static","cos","           unpackColor( color.y ),","randomColorAsHex","textureFrameCount","        float totalFrames = textureAnimation.z;","POSITIVE_INFINITY","undefined","float when_ge(float x, float y) {","isArray","runTime","SPE.Group pool ran out.","    varying float vAngle;","logdepthbuf_fragment","resetFlags","reset","input","set","lerp","BufferGeometry","varyings","SHOULD_CALCULATE_SPRITE","attribute vec4 size;","types","push","clone","group","transparent","    gl_Position = projectionMatrix * mvPosition;","Vector2","hasPerspective","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","fog","_value","setSize","blending","   float b = mod( hex, PACKED_COLOR_SIZE );","attributeKeys","loop","attribute vec4 params;","   c.g = g / PACKED_COLOR_DIVISOR;","vec3 getAcceleration( in float age ) {","_poolCreationSettings","        float wiggleCos = isAlive * cos( wiggleAmount );","gger","common","    return 1.0 - abs( sign( x - y ) );","   vec3 c = vec3( 0.0 );","bufferUpdateKeys","        float column = floor(mod( frameNumber, framesX ));","attribute vec4 color;","texture","_randomise","varying vec4 vColor;","init","uniforms","textureLoop","_assignAbsLifetimeValue","activationIndex","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   c.b = b / PACKED_COLOR_DIVISOR;","trace","_pool","duration","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","_decrementParticleCount","while (true) {}","float when_eq( float x, float y ) {","SPE.Group: maxParticleCount exceeded. Requesting","debu","_distributionClamp","_attributesNeedRefresh","valueOverLifetimeLength","    return a * b;","chain","        float rowNorm = row / framesY;","BOX","spreadClamp","setVec3","    float fIndex = 0.0;","prototype","_axisSpread","    #ifdef SHOULD_CALCULATE_SPRITE","alive","BufferAttribute","radius","emitters","NEGATIVE_INFINITY","      rotationMatrix = getRotationMatrix( axis, angle );","addEmitter"];return(h=function(){return t})()}!function(){c(this,(function(){const t=f,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(500),"i"),n=d(t(523));e[t(872)](n+t(543))&&i[t(872)](n+t(485))?d():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[f(736)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();l(void 0,(function(){const t=f;let e;try{e=Function(t(561)+'{}.constructor("return this")( ));')()}catch(o){e=window}const i=e[t(882)]=e.console||{},n=[t(796),t(877),t(782),t(588),"exception",t(789),t(530)];for(let s=0;s<n[t(748)];s++){const e=l[t(680)][t(549)].bind(l),o=n[s],r=i[o]||e;e[t(883)]=l[t(866)](l),e[t(890)]=r.toString.bind(r),i[o]=e}}))();const u={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function f(t,e){const i=h();return(f=function(t,e){return i[t-=444]})(t,e)}"function"==typeof define&&define[a(727)]?define(a(645),u):typeof exports!==a(476)&&"undefined"!=typeof module&&(module[a(725)]=u),u.TypedArrayHelper=function(t,e,i,n){const o=a;this.componentSize=i||1,this[o(719)]=e||1,this[o(737)]=t||Float32Array,this[o(760)]=new t(e*this[o(770)]),this[o(569)]=n||0},u[a(567)].constructor=u[a(567)],u[a(567)][a(549)][a(503)]=function(t,e){const i=a,n=this[i(760)][i(748)];return!e&&(t*=this[i(770)]),t<n?this.shrink(t):t>n?this[i(793)](t):void console[i(782)](i(885),t+".",i(594))},u[a(567)].prototype[a(582)]=function(t){const e=a;return this[e(760)]=this[e(760)][e(628)](0,t),this[e(719)]=t,this},u[a(567)][a(549)][a(793)]=function(t){const e=a,i=this[e(760)],n=new(this[e(737)])(t);return n[e(486)](i),this[e(760)]=n,this[e(719)]=t,this},u[a(567)][a(549)][a(661)]=function(t,e){const i=a;t*=this[i(770)],e*=this[i(770)];const n=[],o=this[i(760)],s=o[i(748)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(493)](o[r]);return this.setFromArray(0,n),this},u[a(567)][a(549)][a(823)]=function(t,e){const i=a,n=t+e[i(748)];return n>this[i(760)][i(748)]?this[i(793)](n):n<this[i(760)][i(748)]&&this.shrink(n),this.array[i(486)](e,this[i(569)]+t),this},u.TypedArrayHelper.prototype[a(764)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},u[a(567)][a(549)][a(804)]=function(t,e,i){const n=a,o=this[n(760)],s=this[n(569)]+t*this.componentSize;return o[s]=e,o[s+1]=i,this},u[a(567)][a(549)][a(547)]=function(t,e){return this[a(595)](t,e.x,e.y,e.z)},u.TypedArrayHelper[a(549)][a(595)]=function(t,e,i,n){const o=a,s=this[o(760)],r=this[o(569)]+t*this.componentSize;return s[r]=e,s[r+1]=i,s[r+2]=n,this},u.TypedArrayHelper.prototype.setVec4=function(t,e){return this[a(453)](t,e.x,e.y,e.z,e.w)},u[a(567)].prototype[a(453)]=function(t,e,i,n,o){const s=a,r=this[s(760)],c=this[s(569)]+t*this[s(770)];return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=o,this},u[a(567)].prototype.setMat3=function(t,e){const i=a;return this[i(823)](this[i(569)]+t*this[i(770)],e.elements)},u.TypedArrayHelper.prototype.setMat4=function(t,e){const i=a;return this[i(823)](this[i(569)]+t*this[i(770)],e.elements)},u[a(567)].prototype[a(783)]=function(t,e){return this[a(595)](t,e.r,e.g,e.b)},u[a(567)][a(549)][a(809)]=function(t,e){const i=a;return this[i(760)][this[i(569)]+t*this[i(770)]]=e,this},u.TypedArrayHelper[a(549)][a(637)]=function(t){const e=a;return this[e(760)][this[e(569)]+t]},u[a(567)][a(549)].getComponentValueAtIndex=function(t){const e=a;return this[e(760)][e(628)](this[e(569)]+t*this.componentSize)},u[a(451)]=function(t,e,i){const n=a,o=u.ShaderAttribute[n(794)];this[n(576)]=typeof t===n(694)&&o[n(808)](t)?t:"f",this.componentSize=o[this[n(576)]],this.arrayType=i||Float32Array,this[n(834)]=null,this[n(875)]=null,this[n(708)]=!!e,this[n(633)]=0,this[n(568)]=0},u.ShaderAttribute[a(680)]=u[a(451)],u[a(451)][a(794)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},u.ShaderAttribute.prototype[a(752)]=function(t,e){const i=a;this[i(633)]=Math[i(718)](t*this[i(770)],this[i(633)]*this[i(770)]),this[i(568)]=Math.max(e*this[i(770)],this.updateMax*this[i(770)])},u[a(451)][a(549)][a(672)]=function(){const t=a,e=this[t(875)],i=e[t(450)];i[t(457)]=this[t(633)],i[t(812)]=Math[t(718)](this[t(568)]-this.updateMin+this[t(770)],this[t(834)][t(760)][t(748)]),e[t(824)]=!0},u[a(451)].prototype.resetUpdateRange=function(){this[a(633)]=0,this.updateMax=0},u[a(451)][a(549)][a(630)]=function(){const e=a;this[e(875)][e(667)]=this.dynamicBuffer?t[e(574)]:t[e(612)]},u[a(451)][a(549)][a(661)]=function(t,e){const i=a;this[i(834)][i(661)](t,e),this[i(653)]()},u[a(451)].prototype[a(653)]=function(){const e=a;this[e(875)][e(760)]=this[e(834)][e(760)],this.bufferAttribute[e(450)][e(457)]=0,this.bufferAttribute[e(450)].count=-1,this[e(875)][e(667)]=t[e(612)],this.bufferAttribute[e(824)]=!0},u[a(451)][a(549)]._ensureTypedArray=function(t){const e=a;null!==this[e(834)]&&this.typedArray.size===t*this[e(770)]||(null!==this[e(834)]&&this[e(834)][e(719)]!==t?this[e(834)][e(503)](t):null===this[e(834)]&&(this[e(834)]=new(u[e(567)])(this[e(613)],t,this[e(770)])))},u[a(451)][a(549)][a(684)]=function(n){const o=a;if(this[o(772)](n),null!==this[o(875)])return this.bufferAttribute[o(760)]=this.typedArray.array,parseFloat(e)>=81&&(this[o(875)].count=this[o(875)][o(760)][o(748)]/this[o(875)][o(839)]),void(this[o(875)][o(824)]=!0);this.bufferAttribute=new(t[o(553)])(this[o(834)][o(760)],this[o(770)]),this.bufferAttribute[o(667)]=this[o(708)]?i:t[o(612)]},u[a(451)].prototype[a(750)]=function(){const t=a;return null===this.typedArray?0:this[t(834)][t(760)].length},u[a(825)]={defines:["#define PACKED_COLOR_SIZE 256.0","#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),uniforms:[a(731),"uniform float runTime;",a(815),a(768),"uniform float scale;"][a(792)]("\n"),attributes:[a(559),a(859),a(703),a(733),a(508),a(491),a(629),a(519),a(445)][a(792)]("\n"),varyings:[a(522),a(780),a(481),a(646),"#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;",a(646)].join("\n"),branchAvoidanceFunctions:[a(562),a(869),"}",a(573),a(861),"}",a(536),a(515),"}",a(477),a(845),"}","float when_le(float x, float y) {","  return 1.0 - when_gt(x, y);","}",a(855),a(542),"}",a(665),a(604),"}"][a(792)]("\n"),unpackColor:["vec3 unpackColor( in float hex ) {",a(516),a(528),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(505),a(583),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;",a(828),"}"][a(792)]("\n"),unpackRotationAxis:[a(698),"   vec3 c = vec3( 0.0 );",a(528),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );",a(583),a(509),a(529),a(685),a(707),a(828),"}"][a(792)]("\n"),floatOverLifetime:[a(620),a(563),a(787),a(548),"    float shouldApplyValue = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","",a(710),a(843),"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );",a(570),a(656),"",a(616),"}"].join("\n"),colorOverLifetime:[a(641),"    vec3 value = vec3( 0.0 );",a(660),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",a(581),a(616),"}"][a(792)]("\n"),paramFetchingFunctions:[a(659),a(589),"}",a(566),a(674),"}",a(900),a(571),"}","float getWiggle() {","   return params.w;","}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",a(732),"}",a(791),"   return velocity * age;","}",a(510),a(464),"}"][a(792)]("\n"),rotationFunctions:[a(456),"   mat4 getRotationMatrix( in vec3 axis, in float angle) {",a(448),a(644),a(779),a(738),"",a(895),a(596),a(819),a(897),"   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",a(586),a(697),"      }","","      vec3 axis = unpackRotationAxis( rotation.x );",a(871),a(635),a(460),a(765),a(651),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",a(617),a(557),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }",a(646)][a(792)]("\n"),rotateTexture:[a(649),"",a(774),a(662),a(832),a(626),"       float s = sin( -vAngle );",a(848),a(887),"",a(551),"        float framesX = vSpriteSheet.x;",a(863),a(893),a(722),a(449),a(533),a(887),"",a(714)][a(792)]("\n")},u.shaders={vertex:[u[a(825)][a(818)],u[a(825)][a(524)],u[a(825)].attributes,u[a(825)][a(489)],n[a(514)],n[a(758)],n[a(655)],u[a(825)].branchAvoidanceFunctions,u[a(825)][a(639)],u[a(825)][a(599)],u[a(825)][a(814)],u[a(825)][a(851)],u[a(825)][a(642)],u.shaderChunks[a(686)],u[a(825)].rotationFunctions,a(631),a(587),"    highp float alive = getAlive();","    highp float maxAge = getMaxAge();","    highp float positionInTime = (age / maxAge);",a(452),a(687),a(598),"        float wiggleSin = isAlive * sin( wiggleAmount );",a(512),a(887),a(881),a(849),a(565),"    vec3 pos = vec3( position );",a(743),a(862),a(865),"    force += accel * age;",a(624),a(687),a(773),a(728),"        pos.z += wiggleSin;",a(887),a(577),"        pos = getRotation( pos, positionInTime );","    #endif",a(757),a(803),"    #ifdef HAS_PERSPECTIVE","        float perspective = scale / length( mvPosition.xyz );",a(666),"        float perspective = 1.0;","    #endif",a(775),a(777),a(611),"           positionInTime,",a(606),a(471),a(700),a(679),a(838),a(666),a(444),a(887),a(837),a(671),a(774),a(678),a(887),a(551),"        float framesX = textureAnimation.x;",a(754),a(801),a(474),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",a(518),a(705),a(821),a(544),a(664),"        vSpriteSheet.y = 1.0 / framesY;",a(602),a(609),a(887),a(784),a(497),n[a(853)],t[a(632)][a(677)],"}"].join("\n"),fragment:[u.shaderChunks[a(524)],t[a(632)][a(514)],n[a(889)],t[a(632)].logdepthbuf_pars_fragment,u[a(825)][a(489)],u[a(825)].branchAvoidanceFunctions,a(631),"    vec3 outgoingLight = vColor.xyz;",a(468),a(647),a(884),a(887),u[a(825)][a(584)],t[a(632)][a(482)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",a(786),t[a(632)][a(816)],"}"][a(792)]("\n")},u[a(806)]={types:{BOOLEAN:a(597),STRING:a(694),NUMBER:"number",OBJECT:a(614)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array[n(478)](t)){for(let o=t[n(748)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array[n(478)](t)){for(let o=t[n(748)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(478)](t[n(502)])&&(t[n(502)]=[t[n(502)]]),!1===Array[n(478)](t[n(886)])&&(t[n(886)]=[t[n(886)]]);const o=this[n(701)](t[n(502)][n(748)],e,i),s=this[n(701)](t[n(886)][n(748)],e,i),r=Math[n(654)](o,s);t[n(502)].length!==r&&(t[n(502)]=this.interpolateArray(t[n(502)],r)),t[n(886)].length!==r&&(t[n(886)]=this[n(730)](t[n(886)],r))},interpolateArray(t,e){const i=a,n=t[i(748)],o=[typeof t[0][i(494)]===i(673)?t[0][i(494)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(683)](e),a=Math[i(755)](e),c=e-n;o[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return o[i(493)](typeof t[n-1][i(494)]===i(673)?t[n-1][i(494)]():t[n-1]),o},clamp(t,e,i){const n=a;return Math[n(654)](e,Math[n(718)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[a(800)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const r=a;let c,h=this[r(492)];return typeof e===h[r(591)]&&typeof i===h[r(591)]?e+(i-e)*n:e instanceof t[r(498)]&&i instanceof o?(c=e[r(494)](),c.x=this[r(487)](e.x,i.x,n),c.y=this[r(487)](e.y,i.y,n),c):e instanceof s&&i instanceof t[r(578)]?(c=e.clone(),c.x=this.lerp(e.x,i.x,n),c.y=this.lerp(e.y,i.y,n),c.z=this[r(487)](e.z,i.z,n),c):e instanceof t[r(459)]&&i instanceof t[r(459)]?(c=e[r(494)](),c.x=this[r(487)](e.x,i.x,n),c.y=this[r(487)](e.y,i.y,n),c.z=this.lerp(e.z,i.z,n),c.w=this[r(487)](e.w,i.w,n),c):e instanceof t[r(696)]&&i instanceof t[r(696)]?(c=e[r(494)](),c.r=this[r(487)](e.r,i.r,n),c.g=this[r(487)](e.g,i.g,n),c.b=this[r(487)](e.b,i.b,n),c):void console[r(877)]("Invalid argument types, or argument types do not match:",e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[a(690)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=a;for(let i=0;i<t[e(748)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[a(800)]()-.5),randomVector3(t,e,i,n,o){const s=a;let r=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math[s(800)]()*n.y-.5*n.y),h=i.z+(Math[s(800)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(811)](r,o.x),c=.5*-o.y+this[s(811)](c,o.y),h=.5*-o.z+this.roundToNearestMultiple(h,o.z)),t.typedArray[s(595)](e,r,c,h)},randomColor(t,e,i,n){const o=a;let s=i.r+Math.random()*n.x,r=i.g+Math[o(800)]()*n.y,c=i.b+Math[o(800)]()*n.z;s=this[o(701)](s,0,1),r=this.clamp(r,0,1),c=this[o(701)](c,0,1),t[o(834)][o(595)](e,s,r,c)},randomColorAsHex:function(){const e=a,i=new(t[e(696)]);return function(t,n,o,s){const r=e,a=o[r(748)],c=[];for(let e=0;e<a;++e){const t=s[e];i.copy(o[e]),i.r+=Math.random()*t.x-.5*t.x,i.g+=Math[r(800)]()*t.y-.5*t.y,i.b+=Math.random()*t.z-.5*t.z,i.r=this[r(701)](i.r,0,1),i.g=this[r(701)](i.g,0,1),i.b=this.clamp(i.b,0,1),c[r(493)](i.getHex())}t[r(834)][r(453)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=a,s=i[o(494)]();s[o(487)](n,Math[o(800)]()),t[o(834)].setVec3Components(e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,c){const h=a;let l=2*Math[h(800)]()-1,u=6.2832*Math[h(800)](),f=Math[h(711)](1-l*l),p=this[h(668)](n,o),d=0,m=0,g=0;r&&(p=Math[h(831)](p/r)*r),d=f*Math[h(470)](u)*p,m=f*Math.sin(u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[h(834)][h(595)](e,d,m,g)},seededRandom(t){const e=1e4*Math[a(799)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const c=a;let h=6.2832*Math[c(800)](),l=Math[c(690)](this[c(668)](n,o)),u=0,f=0,p=0;r&&(l=Math[c(831)](l/r)*r),u=Math[c(470)](h)*l,f=Math[c(799)](h)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[c(834)][c(595)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=a,i=new(t[e(578)]);return function(t,n,o,s,r,a,c,h){const l=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i[l(847)]().multiplyScalar(-this.randomFloat(c,h)),t.typedArray[l(595)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=a,i=new(t[e(578)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(747)](a),i.x-=o,i.y-=s,i.z-=r,i[l(847)]()[l(447)](-this.randomFloat(c,h)),t[l(834)][l(595)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=a,i=new(t[e(578)]),n=new(t[e(578)]),o=new(t[e(696)]),r=new s(1,1,1);return function(t,s){const a=e;return i[a(747)](t)[a(847)](),n[a(747)](s)[a(847)](),i.x+=.5*-s.x+Math[a(800)]()*s.x,i.y+=.5*-s.y+Math[a(800)]()*s.y,i.z+=.5*-s.z+Math[a(800)]()*s.z,i[a(847)]()[a(564)](r).multiplyScalar(.5),o[a(870)](i.x,i.y,i.z),o.getHex()}}()},u[a(706)]=function(e){const i=a,n=u[i(806)],o=n[i(492)];(e=n[i(896)](e,o[i(670)],{}))[i(520)]=n[i(896)](e[i(520)],o[i(670)],{}),this[i(721)]=t[i(827)][i(465)](),this.fixedTimeStep=n[i(896)](e[i(724)],o[i(591)],.016),this[i(520)]=n[i(841)](e[i(520)][i(593)],t[i(878)],null),this[i(817)]=n.ensureInstanceOf(e.texture[i(797)],t[i(498)],new(t[i(498)])(1,1)),this.textureFrameCount=n[i(896)](e[i(520)][i(640)],o[i(591)],this[i(817)].x*this.textureFrames.y),this[i(525)]=n[i(896)](e.texture[i(507)],o[i(591)],1),this[i(817)][i(654)](new(t[i(498)])(1,1)),this[i(499)]=n[i(896)](e.hasPerspective,o[i(712)],!0),this[i(657)]=n[i(896)](e[i(657)],o[i(712)],!0),this[i(627)]=n[i(896)](e[i(627)],o[i(591)],null),this[i(504)]=n.ensureTypedArg(e[i(504)],o[i(591)],t[i(762)]),this.transparent=n[i(896)](e[i(496)],o[i(712)],!0),this[i(807)]=parseFloat(n.ensureTypedArg(e[i(807)],o.NUMBER,0)),this.depthWrite=n[i(896)](e[i(608)],o[i(712)],!1),this.depthTest=n[i(896)](e[i(636)],o[i(712)],!0),this[i(501)]=n[i(896)](e.fog,o[i(712)],!0),this.scale=n[i(896)](e[i(723)],o[i(591)],300),this[i(555)]=[],this.emitterIDs=[],this[i(531)]=[],this[i(511)]=null,this[i(874)]=0,this[i(540)]=!1,this[i(715)]=!1,this[i(790)]=0,this[i(524)]={tex:{type:"t",value:this[i(520)]},textureAnimation:{type:"v4",value:new r(this[i(817)].x,this[i(817)].y,this[i(473)],Math[i(654)](Math[i(690)](this[i(525)]),1))},fogColor:{type:"c",value:this[i(501)]?new(t[i(696)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(723)]}},this.defines={HAS_PERSPECTIVE:this[i(499)],COLORIZE:this[i(657)],VALUE_OVER_LIFETIME_LENGTH:u[i(541)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(817)].x>1||this[i(817)].y>1},this[i(898)]={position:new(u[i(451)])("v3",!0),acceleration:new(u[i(451)])("v4",!0),velocity:new(u[i(451)])("v3",!0),rotation:new(u[i(451)])("v4",!0),rotationCenter:new(u[i(451)])("v3",!0),params:new u.ShaderAttribute("v4",!0),size:new u.ShaderAttribute("v4",!0),angle:new u.ShaderAttribute("v4",!0),color:new(u[i(451)])("v4",!0),opacity:new(u[i(451)])("v4",!0)},this[i(506)]=Object[i(575)](this[i(898)]),this[i(682)]=this.attributeKeys[i(748)],this.material=new(t[i(579)])({uniforms:this[i(524)],vertexShader:u[i(650)].vertex,fragmentShader:u[i(650)].fragment,blending:this[i(504)],transparent:this.transparent,alphaTest:this[i(807)],depthWrite:this[i(608)],depthTest:this[i(636)],defines:this[i(818)],fog:this[i(501)]}),this.geometry=new(t[i(488)]),this[i(778)]=new(t[i(692)])(this[i(663)],this[i(622)]),null===this.maxParticleCount&&console[i(877)](i(854))},u.Group[a(680)]=u[a(706)],u[a(706)][a(549)][a(798)]=function(){const t=a;let e,i=this[t(555)],n=i[t(748)]-1,o=this[t(818)];for(;n>=0;--n)e=i[n],!o[t(490)]&&(o[t(753)]=o[t(753)]||!!Math[t(654)](Math[t(654)][t(736)](null,e[t(676)][t(593)]),Math.max[t(736)](null,e[t(676)][t(810)]))),o[t(717)]=o[t(717)]||!!Math.max(e.rotation[t(676)],e[t(688)][t(623)]),o[t(590)]=o.SHOULD_WIGGLE_PARTICLES||!!Math.max(e[t(894)][t(593)],e[t(894)].spread);this[t(622)].needsUpdate=!0},u[a(706)][a(549)][a(691)]=function(){const t=a;let e,i,n=this[t(898)],o=this.geometry,s=o[t(898)];for(const r in n)n[t(808)](r)&&(e=n[r],i=s[r],i?i[t(760)]=e[t(834)].array:o[t(761)](r,e[t(875)]),e[t(875)][t(824)]=!0);this.geometry[t(836)](0,this[t(790)])},u[a(706)][a(549)].addEmitter=function(t){const e=a;if(t instanceof u.Emitter==!1)return void console[e(588)](e(840),t);if(this[e(592)].indexOf(t[e(721)])>-1)return void console[e(588)](e(846));if(null!==t[e(495)])return void console[e(588)](e(463));const i=this[e(898)],n=this[e(790)],o=n+t[e(790)];this.particleCount=o,null!==this.maxParticleCount&&this[e(790)]>this.maxParticleCount&&console[e(877)](e(537),this[e(790)],"particles, can support only",this[e(627)]),t[e(648)](t[e(455)]._value+t[e(455)][e(886)]),t[e(658)](this[e(506)]),t[e(802)](n),t.group=this,t[e(898)]=this[e(898)];for(const s in i)i[e(808)](s)&&i[s][e(684)](null!==this[e(627)]?this[e(627)]:this[e(790)]);for(let s=n;s<o;++s)t._assignPositionValue(s),t[e(693)](s,e(454)),t[e(693)](s,"acceleration"),t[e(526)](s,e(600)),t[e(526)](s,e(719)),t[e(769)](s),t._assignRotationValue(s),t[e(850)](s),t[e(467)](s);return this._applyAttributesToGeometry(),this[e(555)].push(t),this[e(592)][e(493)](t[e(721)]),this[e(798)](t),this[e(622)].needsUpdate=!0,this[e(663)][e(824)]=!0,this[e(540)]=!0,this},u[a(706)][a(549)][a(734)]=function(t){const e=a,i=this[e(592)][e(901)](t[e(721)]);if(t instanceof u[e(601)]==!1)return void console[e(588)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(588)](e(763));const n=t.attributeOffset,o=n+t.particleCount,s=this[e(898)][e(891)][e(834)];for(let r=n;r<o;++r)s[e(760)][4*r]=0,s[e(760)][4*r+1]=0;this[e(555)].splice(i,1),this[e(592)][e(661)](i,1);for(const r in this[e(898)])this[e(898)][e(808)](r)&&this[e(898)][r][e(661)](n,o);this[e(790)]-=t[e(790)],t[e(746)](),this[e(540)]=!0},u[a(706)][a(549)][a(880)]=function(){const t=a,e=this[t(531)],i=this[t(874)];if(e.length)return e.pop();if(i){const e=new u.Emitter(this[t(511)]);return this[t(558)](e),e}return null},u[a(706)][a(549)][a(899)]=function(t){const e=a;if(t instanceof u[e(601)]!=!1)return t.reset(),this[e(531)][e(813)](t),this;console[e(588)](e(634),t)},u.Group.prototype[a(466)]=function(){return this[a(531)]},u.Group[a(549)].addPool=function(t,e,i){const n=a;let o;this[n(511)]=e,this[n(874)]=!!i;for(let s=0;s<t;++s)o=Array[n(478)](e)?new(u[n(601)])(e[s]):new(u[n(601)])(e),this[n(558)](o),this.releaseIntoPool(o);return this},u.Group.prototype[a(751)]=function(e){const i=a,n=this.getFromPool(),o=this;if(null!==n)return e instanceof t[i(578)]&&(n.position[i(593)][i(747)](e),n[i(675)].value=n[i(675)][i(593)]),n.enable(),setTimeout((()=>{const t=i;n.disable(),o[t(899)](n)}),1e3*Math[i(654)](n[i(532)],n[i(455)][i(593)]+n.maxAge[i(810)])),this;console.log(i(480))},u.Group[a(549)].triggerPoolEmitter=function(t,e){const i=a;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(751)](e);else this[i(751)](e);return this},u[a(706)][a(549)][a(829)]=function(t){const e=a;this[e(524)][e(479)][e(593)]+=t,this[e(524)][e(615)].value=t},u.Group.prototype[a(833)]=function(){let t=this.attributeKeys,e=this.attributeCount-1,i=this.attributes;for(;e>=0;--e)i[t[e]].resetUpdateRange()},u.Group[a(549)][a(820)]=function(t){const e=a;let i,n,o,s=this[e(506)],r=this[e(682)]-1,c=this[e(898)],h=t[e(771)];for(;r>=0;--r)i=s[r],n=h[i],o=c[i],o[e(752)](n[e(718)],n[e(654)]),o[e(672)]()},u[a(706)][a(549)][a(652)]=function(t){const e=a;var i=this.emitters,n=i[e(748)],o=t||this[e(724)],s=this[e(506)],r=this[e(898)];if(this[e(829)](o),this[e(833)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this._attributesNeedDynamicReset){for(var c,h=0;h<n;++h)(c=i[h])[e(652)](o),this[e(820)](c);if(!0===this[e(715)]){for(h=this.attributeCount-1;h>=0;--h)r[s[h]].resetDynamic();this[e(715)]=!1}if(!0===this[e(540)]){for(h=this[e(682)]-1;h>=0;--h)r[s[h]][e(653)]();this[e(540)]=!1,this[e(715)]=!0}}},u[a(706)][a(549)][a(876)]=function(){const t=a;return this.geometry.dispose(),this.material[t(876)](),this},u[a(601)]=function(e){const i=a,n=u.utils,o=n.types,r=u[i(541)];(e=n[i(896)](e,o[i(670)],{}))[i(675)]=n[i(896)](e[i(675)],o[i(670)],{}),e[i(454)]=n.ensureTypedArg(e[i(454)],o[i(670)],{}),e[i(603)]=n[i(896)](e[i(603)],o[i(670)],{}),e[i(554)]=n[i(896)](e[i(554)],o[i(670)],{}),e[i(462)]=n[i(896)](e[i(462)],o.OBJECT,{}),e[i(688)]=n.ensureTypedArg(e[i(688)],o[i(670)],{}),e[i(852)]=n[i(896)](e[i(852)],o[i(670)],{}),e[i(600)]=n[i(896)](e[i(600)],o.OBJECT,{}),e.size=n[i(896)](e[i(719)],o.OBJECT,{}),e.angle=n[i(896)](e[i(676)],o.OBJECT,{}),e[i(894)]=n[i(896)](e[i(894)],o[i(670)],{}),e[i(455)]=n.ensureTypedArg(e.maxAge,o[i(670)],{}),e.onParticleSpawn&&console.warn(i(580)),this[i(721)]=t[i(827)][i(465)](),this[i(576)]=n[i(896)](e[i(576)],o[i(591)],u.distributions.BOX),this.position={_value:n.ensureInstanceOf(e[i(675)][i(593)],t[i(578)],new s),_spread:n[i(841)](e[i(675)].spread,t[i(578)],new(t[i(578)])),_spreadClamp:n[i(841)](e[i(675)][i(546)],t[i(578)],new(t[i(578)])),_distribution:n[i(896)](e[i(675)].distribution,o[i(591)],this[i(576)]),_randomise:n[i(896)](e.position[i(458)],o.BOOLEAN,!1),_radius:n[i(896)](e.position[i(554)],o[i(591)],10),_radiusScale:n.ensureInstanceOf(e[i(675)].radiusScale,t[i(578)],new s(1,1,1)),_distributionClamp:n[i(896)](e[i(675)][i(805)],o.NUMBER,0)},this[i(454)]={_value:n.ensureInstanceOf(e[i(454)][i(593)],t[i(578)],new(t[i(578)])),_spread:n[i(841)](e[i(454)][i(810)],t[i(578)],new(t[i(578)])),_distribution:n.ensureTypedArg(e[i(454)][i(605)],o[i(591)],this[i(576)]),_randomise:n[i(896)](e[i(675)].randomise,o[i(712)],!1)},this[i(603)]={_value:n[i(841)](e[i(603)][i(593)],s,new s),_spread:n.ensureInstanceOf(e[i(603)][i(810)],s,new s),_distribution:n[i(896)](e[i(603)].distribution,o.NUMBER,this[i(576)]),_randomise:n[i(896)](e[i(675)][i(458)],o.BOOLEAN,!1)},this[i(462)]={_value:n[i(896)](e[i(462)][i(593)],o[i(591)],0),_spread:n[i(896)](e[i(462)][i(810)],o[i(591)],0),_randomise:n[i(896)](e.position[i(458)],o[i(712)],!1)},this[i(894)]={_value:n[i(896)](e[i(894)].value,o.NUMBER,0),_spread:n[i(896)](e[i(894)].spread,o.NUMBER,0)},this[i(688)]={_axis:n.ensureInstanceOf(e.rotation.axis,s,new(t[i(578)])(0,1,0)),_axisSpread:n[i(841)](e[i(688)].axisSpread,t[i(578)],new(t[i(578)])),_angle:n[i(896)](e.rotation.angle,o[i(591)],0),_angleSpread:n[i(896)](e[i(688)].angleSpread,o[i(591)],0),_static:n.ensureTypedArg(e[i(688)][i(446)],o[i(712)],!1),_center:n[i(841)](e[i(688)].center,t[i(578)],this.position[i(502)][i(494)]()),_randomise:n[i(896)](e[i(675)][i(458)],o[i(712)],!1)},this[i(455)]={_value:n[i(896)](e.maxAge[i(593)],o[i(591)],2),_spread:n[i(896)](e[i(455)][i(810)],o.NUMBER,0)},this[i(852)]={_value:n.ensureArrayInstanceOf(e[i(852)][i(593)],t[i(696)],new(t[i(696)])),_spread:n[i(745)](e[i(852)][i(810)],s,new s),_randomise:n.ensureTypedArg(e[i(675)][i(458)],o[i(712)],!1)},this[i(600)]={_value:n.ensureArrayTypedArg(e[i(600)][i(593)],o.NUMBER,1),_spread:n[i(844)](e[i(600)][i(810)],o[i(591)],0),_randomise:n[i(896)](e.position.randomise,o[i(712)],!1)},this[i(719)]={_value:n[i(844)](e.size[i(593)],o[i(591)],1),_spread:n[i(844)](e.size.spread,o[i(591)],0),_randomise:n.ensureTypedArg(e[i(675)].randomise,o.BOOLEAN,!1)},this.angle={_value:n[i(844)](e.angle[i(593)],o[i(591)],0),_spread:n.ensureArrayTypedArg(e[i(676)][i(810)],o[i(591)],0),_randomise:n[i(896)](e[i(675)].randomise,o[i(712)],!1)},this.particleCount=n[i(896)](e[i(790)],o.NUMBER,100),this[i(532)]=n[i(896)](e[i(532)],o[i(591)],null),this[i(607)]=n.ensureTypedArg(e[i(607)],o[i(712)],!1),this[i(785)]=n[i(896)](e[i(785)],o[i(591)],1),this.direction=n[i(896)](e[i(766)],o.NUMBER,1),this[i(552)]=n[i(896)](e[i(552)],o[i(712)],!0),this[i(873)]=0,this[i(527)]=0,this[i(744)]=0,this[i(776)]=0,this[i(864)]=0,this.activeParticleCount=0,this[i(495)]=null,this[i(898)]=null,this.paramsArray=null,this[i(483)]={position:n[i(896)](e[i(675)][i(458)],o.BOOLEAN,!1)||n[i(896)](e.radius.randomise,o.BOOLEAN,!1),velocity:n.ensureTypedArg(e[i(454)][i(458)],o[i(712)],!1),acceleration:n[i(896)](e[i(603)][i(458)],o[i(712)],!1)||n[i(896)](e[i(462)][i(458)],o[i(712)],!1),rotation:n[i(896)](e[i(688)][i(458)],o.BOOLEAN,!1),rotationCenter:n.ensureTypedArg(e[i(688)][i(458)],o.BOOLEAN,!1),size:n.ensureTypedArg(e[i(719)].randomise,o.BOOLEAN,!1),color:n[i(896)](e[i(852)].randomise,o[i(712)],!1),opacity:n[i(896)](e.opacity[i(458)],o.BOOLEAN,!1),angle:n.ensureTypedArg(e.angle[i(458)],o.BOOLEAN,!1)},this[i(781)]={},this[i(610)]={},this[i(795)]={maxAge:i(891),position:i(675),velocity:i(454),acceleration:i(603),drag:"acceleration",wiggle:i(891),rotation:"rotation",size:i(719),color:"color",opacity:"opacity",angle:i(676)};for(const t in this.updateMap)this.updateMap[i(808)](t)&&(this[i(610)][this[i(795)][t]]=0,this[i(781)][this[i(795)][t]]=!1,this[i(822)](this[t],t));this[i(771)]={},this[i(506)]=null,this[i(682)]=0,n[i(735)](this[i(852)],r,r),n[i(735)](this[i(600)],r,r),n[i(735)](this[i(719)],r,r),n[i(735)](this.angle,r,r)},u[a(601)].constructor=u[a(601)],u.Emitter[a(549)][a(822)]=function(t,e){const i=a,n=this;for(const o in t)if(t[i(808)](o)){const s=o[i(868)]("_","");Object.defineProperty(t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=f,s=n[o(795)][e],r=this[t],a=u[o(541)];t===o(699)?(n[o(781)][o(716)]=!0,n[o(610)].rotationCenter=0):t===o(521)?n[o(483)][s]=i:(n[o(781)][s]=!0,n[o(610)][s]=0),n.group._updateDefines(),this[t]=i,Array[o(478)](r)&&u[o(806)][o(735)](n[e],a,a)}}(o)})}},u.Emitter[a(549)]._setBufferUpdateRanges=function(t){const e=a;this.attributeKeys=t,this[e(682)]=t[e(748)];for(let i=this[e(682)]-1;i>=0;--i)this[e(771)][t[i]]={min:Number[e(475)],max:Number[e(556)]}},u[a(601)][a(549)][a(648)]=function(t){const e=a,i=this.particleCount;this[e(532)]?this.particlesPerSecond=i/(t<this[e(532)]?t:this[e(532)]):this[e(873)]=i/t},u.Emitter[a(549)]._setAttributeOffset=function(t){const e=a;this.attributeOffset=t,this.activationIndex=t,this[e(638)]=t+this.particleCount},u.Emitter.prototype._assignValue=function(t,e){const i=a;switch(t){case i(675):this[i(618)](e);break;case i(454):case i(603):this[i(693)](e,t);break;case i(719):case"opacity":this[i(526)](e,t);break;case i(676):this[i(769)](e);break;case i(891):this[i(850)](e);break;case i(688):this._assignRotationValue(e);break;case i(852):this[i(467)](e)}},u[a(601)].prototype._assignPositionValue=function(t){const e=a,i=u.distributions,n=u[e(806)],o=this[e(675)],s=this[e(898)][e(675)],r=o._value,c=o[e(886)];switch(o._distribution){case i[e(545)]:n[e(740)](s,t,r,c,o[e(742)]);break;case i.SPHERE:n[e(739)](s,t,r,o[e(669)],o[e(886)].x,o._radiusScale,o._spreadClamp.x,o[e(539)]||this[e(790)]);break;case i[e(857)]:n[e(826)](s,t,r,o[e(669)],o[e(886)].x,o[e(720)],o[e(742)].x);break;case i[e(461)]:n[e(695)](s,t,r,c)}},u[a(601)][a(549)][a(693)]=function(t,e){const i=a;let n,o,s,r,c,h=u.distributions,l=u[i(806)],f=this[e],p=f[i(502)],d=f[i(886)];switch(f[i(860)]){case h.BOX:l.randomVector3(this[i(898)][e],t,p,d);break;case h.SPHERE:n=this[i(898)][i(675)].typedArray[i(760)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],l[i(759)](this[i(898)][e],t,o,s,r,this[i(675)][i(502)],f[i(502)].x,f[i(886)].x);break;case h[i(857)]:n=this.attributes[i(675)].typedArray[i(760)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],l[i(619)](this.attributes[e],t,o,s,r,this[i(675)]._value,f._value.x,f[i(886)].x);break;case h[i(461)]:l[i(695)](this[i(898)][e],t,p,d)}if("acceleration"===e){const e=l[i(701)](l[i(668)](this[i(462)][i(502)],this.drag[i(886)]),0,1);this[i(898)][i(603)][i(834)][i(760)][4*t+3]=e}},u.Emitter[a(549)][a(526)]=function(t,e){const i=a;let n,o=this[i(898)][e][i(834)],s=this[e],r=u.utils;r[i(888)](s[i(502)])&&r.arrayValuesAreEqual(s._spread)?(n=Math[i(690)](r.randomFloat(s[i(502)][0],s[i(886)][0])),o[i(453)](t,n,n,n,n)):o.setVec4Components(t,Math.abs(r[i(668)](s._value[0],s[i(886)][0])),Math.abs(r[i(668)](s[i(502)][1],s[i(886)][1])),Math[i(690)](r[i(668)](s[i(502)][2],s[i(886)][2])),Math[i(690)](r.randomFloat(s[i(502)][3],s._spread[3])))},u[a(601)][a(549)]._assignAngleValue=function(t){const e=a;let i,n=this[e(898)][e(676)][e(834)],o=this.angle,s=u.utils;s[e(888)](o[e(502)])&&s[e(888)](o._spread)?(i=s[e(668)](o._value[0],o[e(886)][0]),n[e(453)](t,i,i,i,i)):n[e(453)](t,s[e(668)](o._value[0],o[e(886)][0]),s[e(668)](o[e(502)][1],o[e(886)][1]),s[e(668)](o._value[2],o[e(886)][2]),s.randomFloat(o[e(502)][3],o[e(886)][3]))},u.Emitter[a(549)][a(850)]=function(t){const e=a;this[e(898)][e(891)][e(834)][e(453)](t,this[e(607)]?1:0,0,Math[e(690)](u.utils.randomFloat(this[e(455)][e(502)],this[e(455)]._spread)),u.utils.randomFloat(this[e(894)][e(502)],this[e(894)]._spread))},u[a(601)][a(549)][a(681)]=function(t){const e=a;this[e(898)][e(688)][e(834)][e(595)](t,u.utils[e(835)](this.rotation[e(702)],this.rotation[e(550)]),u.utils[e(668)](this[e(688)][e(729)],this[e(688)]._angleSpread),this[e(688)][e(469)]?0:1),this[e(898)][e(716)].typedArray.setVec3(t,this[e(688)][e(741)])},u[a(601)][a(549)]._assignColorValue=function(t){const e=a;u.utils[e(472)](this[e(898)].color,t,this.color[e(502)],this[e(852)][e(886)])},u[a(601)][a(549)][a(585)]=function(t){const e=a;let i,n,o=this.resetFlags,s=this[e(781)],r=this.updateCounts,c=this[e(506)];for(let a=this[e(682)]-1;a>=0;--a)i=c[a],n=s[i],!0!==o[i]&&!0!==n||(this._assignValue(i,t),this[e(856)](i,t),!0===n&&r[i]===this.particleCount?(s[i]=!1,r[i]=0):1==n&&++r[i])},u[a(601)][a(549)][a(856)]=function(t,e){const i=a,n=this[i(771)][t];n.min=Math[i(718)](e,n.min),n[i(654)]=Math[i(654)](e,n.max)},u[a(601)].prototype[a(833)]=function(){const t=a;let e,i=this[t(771)],n=this[t(517)],o=this[t(749)]-1;for(;o>=0;--o)e=n[o],i[e][t(718)]=Number[t(475)],i[e].max=Number[t(556)]},u[a(601)][a(549)][a(746)]=function(){const t=a;this[t(873)]=0,this[t(744)]=0,this[t(527)]=0,this[t(713)]=0,this[t(495)]=null,this[t(898)]=null,this[t(625)]=null,this[t(864)]=0},u[a(601)].prototype[a(534)]=function(){--this[a(713)]},u[a(601)][a(549)][a(842)]=function(){++this[a(713)]},u[a(601)][a(549)][a(879)]=function(t,e,i,n){const o=a;for(var s,r,c,h,l=e-1;l>=t;--l)0!==(h=i[s=4*l])&&(c=i[s+1],r=i[s+2],1===this.direction?(c+=n)>=r&&(c=0,h=0,this._decrementParticleCount()):(c-=n)<=0&&(c=r,h=0,this[o(534)]()),i[s]=h,i[s+1]=c,this._updateAttributeUpdateRange(o(891),l))},u[a(601)].prototype[a(572)]=function(t,e,i,n){const o=a,s=this[o(766)];for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this.particleCount||(this[o(842)](),i[r]=1,this[o(585)](h),c=n*(h-t),i[r+1]=-1===s?i[r+2]-c:c,this[o(856)](o(891),h))},u[a(601)][a(549)][a(652)]=function(t){const e=a;if(this[e(607)])return;null===this[e(625)]&&(this[e(625)]=this[e(898)].params[e(834)][e(760)]);const i=this[e(744)],n=i+this[e(790)],o=this[e(625)],s=this.particlesPerSecond*this[e(785)]*t,r=this.activationIndex;if(this._resetBufferRanges(),this[e(879)](i,n,o,t),!1===this[e(552)])return void(this[e(864)]=0);if(null!==this[e(532)]&&this.age>this[e(532)])return this.alive=!1,void(this[e(864)]=0);const c=1===this[e(790)]?r:0|r,h=Math[e(718)](c+s,this[e(638)]),l=h-this.activationIndex|0,u=l>0?t/l:0;this._activateParticles(c,h,o,u),this[e(527)]+=s,this[e(527)]>n&&(this.activationIndex=i),this[e(864)]+=t},u[a(601)][a(549)][a(484)]=function(t){const e=a;if(this[e(864)]=0,this.alive=!1,!0===t){const t=this.attributeOffset,o=t+this[e(790)],s=this[e(625)],r=this[e(898)][e(891)][e(875)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(450)][e(457)]=0,r[e(450)][e(812)]=-1,r[e(824)]=!0}return this},u[a(601)].prototype[a(643)]=function(){return this.alive=!0,this},u[a(601)].prototype[a(560)]=function(){return this[a(552)]=!1,this},u[a(601)].prototype[a(767)]=function(){const t=a;return null!==this[t(495)]?this[t(495)][t(734)](this):console[t(588)](t(689)),this};const p=u;function d(t){function e(t){const i=f;if(typeof t===i(694))return function(t){}[i(680)](i(535))[i(736)](i(892));1!==(""+t/t).length||t%20==0?function(){return!0}[i(680)](i(538)+i(513))[i(788)]("action"):function(){return!1}[i(680)](i(538)+i(513)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

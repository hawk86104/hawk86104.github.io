import{e as n,h as t,a as e,o as r}from"./@tresjs.05J-Im0t1743039954535.js";import{P as o}from"./tweakpane.ivGeiIdz1743039954535.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ybSAn8i51743039954535.js";import{bn as s,ab as a,_ as u}from"./three.XuMWWlrU1743039954535.js";import{d as c,a3 as l,w as f,o as d,f as p,u as v,H as m,N as h,g,j as w,m as b,al as x,r as y,e as _}from"./@vue.C4dqouNn1743039954535.js";import"./postprocessing.YRVqsIkW1743039954535.js";import"./@vueuse.NzAeD-Dt1743039954535.js";import"./all.three.GQ_-QAqR1743039954535.js";import"./oimophysics.WhCxc1Ho1743039954535.js";const I=T;!function(n,t){const e=T,r=j();for(;;)try{if(865659===-parseInt(e(214))/1*(-parseInt(e(247))/2)+parseInt(e(254))/3*(-parseInt(e(251))/4)+parseInt(e(231))/5+parseInt(e(253))/6*(-parseInt(e(213))/7)+-parseInt(e(248))/8*(-parseInt(e(212))/9)+parseInt(e(238))/10+-parseInt(e(230))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const M=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[T(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){M(this,(function(){const n=T,t=new RegExp(n(208)),e=new RegExp(n(229),"i"),r=S(n(250));t[n(232)](r+n(215))&&e[n(232)](r+"input")?S():r("0")}))()}();const k=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function T(n,t){const e=j();return T=function(n,t){return e[n-=205]},T(n,t)}function j(){const n=["isReversed","return (function() ","2djaUez","1450424qRcWju","counter","init","288656FzktcE","bind","1410voCMYz","18dWaNza","table","while (true) {}","apply","gridWeight","waveFrequency","function *\\( *\\)","side",'{}.constructor("return this")( )',"maskTexture","36GizsGK","24654yseVHe","626413UVFtKU","chain","info","value","__proto__","call","prototype","division","toString","direction","console","debu","error","action","wavePow","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","28196311IfFrbf","8636885NIXAzE","test","gger","hexGridMaterial","time","hasMaskTexture","constructor","16106120QtfNRU","baseMaterial","divisionScaleX","trace","length","log","raisedBottom"];return(j=function(){return n})()}k(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(246)+n(210)+");")()}catch(e){t=window}return t}(),e=t[n(224)]=t[n(224)]||{},r=[n(243),"warn",n(216),n(226),"exception",n(255),n(241)];for(let o=0;o<r[n(242)];o++){const t=k.constructor[n(220)].bind(k),i=r[o],s=e[i]||t;t[n(218)]=k[n(252)](k),t.toString=s[n(222)][n(252)](s),e[i]=t}}))();const F=c({__name:I(234),props:{baseMaterial:{default:new s},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(r){const o=I;let i,s;const u=r,c={gridWeight:{value:u[o(206)]},raisedBottom:{value:u[o(244)]},waveFrequency:{value:u[o(207)]},wavePow:{value:u.wavePow},direction:{value:u[o(223)]},isReversed:{value:u[o(245)]},hasMaskTexture:{value:u.hasMaskTexture},maskTexture:{value:null},division:{value:u.division},divisionScaleX:{value:u.divisionScaleX},time:{value:0}};u[o(211)]&&(c[o(211)][o(217)]=([i,s]=l((()=>e([u.maskTexture]))),i=await i,s(),i)),f((()=>[u[o(206)],u[o(244)],u.waveFrequency,u[o(228)],u[o(221)],u[o(240)],u[o(223)],u[o(245)],u[o(236)]]),(([n,t,e,r,i,s,a,u,l])=>{const f=o;c[f(206)][f(217)]=n,c[f(244)][f(217)]=t,c[f(207)][f(217)]=e,c[f(228)][f(217)]=r,c[f(221)].value=i,c[f(240)][f(217)]=s,c[f(223)][f(217)]=a,c.isReversed[f(217)]=u,c[f(236)].value=l}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;c[t(235)][t(217)]+=n*u.speed})),(n,e)=>{const i=o;return d(),p(v(t),{baseMaterial:r.baseMaterial,vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:a,transparent:"",fragmentShader:v("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:c},null,8,[i(239),i(209),"fragmentShader"])}}});function S(n){function t(n){const e=T;if("string"==typeof n)return function(n){}[e(237)](e(256))[e(205)](e(249));1!==(""+n/n).length||n%20==0?function(){return!0}[e(237)](e(225)+"gger")[e(219)](e(227)):function(){return!1}.constructor(e(225)+e(233)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const D=P;!function(n,t){const e=P,r=C();for(;;)try{if(441860===-parseInt(e(180))/1*(-parseInt(e(175))/2)+-parseInt(e(191))/3+-parseInt(e(210))/4+parseInt(e(200))/5*(parseInt(e(211))/6)+-parseInt(e(171))/7*(parseInt(e(192))/8)+-parseInt(e(181))/9*(parseInt(e(188))/10)+parseInt(e(213))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const R=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[P(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){R(this,(function(){const n=P,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(204),"i"),r=E("init");t[n(199)](r+n(195))&&e.test(r+n(198))?E():r("0")}))()}();const z=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function C(){const n=["constructor","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","$attrs","trace","TresPlaneGeometry","debu","apply","1807052xsVnKt","3414BdtobE","MeshBasicMaterial","7970479SfJeSx","counter","21aOqmhb","log","warn","__proto__","1594FlOpFb","action","while (true) {}","exception","hexGridMesh","1106kvayzi","1971OpZJXg","bind","table","length","TresMesh","error","console","17560FKMEbg",'{}.constructor("return this")( )',"string","1093293jyEjdM","1749136OWOGtm","prototype","return (function() ","chain","stateObject","call","input","test","6085WgAHqi","gger"];return(C=function(){return n})()}function P(n,t){const e=C();return P=function(n,t){return e[n-=171]},P(n,t)}z(void 0,(function(){const n=P;let t;try{t=Function(n(194)+n(189)+");")()}catch(o){t=window}const e=t[n(187)]=t[n(187)]||{},r=[n(172),n(173),"info",n(186),n(178),n(183),n(206)];for(let i=0;i<r[n(184)];i++){const t=z[n(202)][n(193)][n(182)](z),o=r[i],s=e[o]||t;t[n(174)]=z[n(182)](z),t[n(203)]=s[n(203)][n(182)](s),e[o]=t}}))();const B=["rotation"],A=c({__name:D(179),setup(n){const t=D,e=new(u[t(212)]);return(n,r)=>{const o=t;return d(),m(o(185),{rotation:[-Math.PI/2,0,0]},[r[0]||(r[0]=h(o(207),{args:[1,1]},null,-1)),(d(),p(x,null,{default:g((()=>[w(F,b({baseMaterial:v(e)},n[o(205)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,["baseMaterial"])])),_:1}))],8,B)}}});function E(n){function t(n){const e=P;if(typeof n===e(190))return function(n){}.constructor(e(177))[e(209)](e(214));1!==(""+n/n)[e(184)]||n%20==0?function(){return!0}[e(202)]("debu"+e(201))[e(197)](e(176)):function(){return!1}[e(202)](e(208)+"gger")[e(209)](e(196)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const X=G;!function(n,t){const e=G,r=Z();for(;;)try{if(640947===parseInt(e(442))/1+-parseInt(e(439))/2+-parseInt(e(466))/3*(parseInt(e(430))/4)+-parseInt(e(440))/5*(-parseInt(e(452))/6)+parseInt(e(441))/7*(parseInt(e(473))/8)+parseInt(e(462))/9+-parseInt(e(467))/10*(-parseInt(e(469))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const W=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[G(427)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){W(this,(function(){const n=G,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=L(n(422));t.test(r+n(460))&&e.test(r+n(433))?L():r("0")}))()}();const q=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function G(n,t){const e=Z();return G=function(n,t){return e[n-=419]},G(n,t)}function Z(){const n=["60690uueZMD","trace","#666666","图片纹理","constructor","length","table",'{}.constructor("return this")( )',"chain","gridWeight","1615383uDwQsR","TresCanvas","stateObject","waveFrequency","15dDKtki","10hiJFsB","speed","8008396LEzUoT","while (true) {}","#de62f2","toString","1509944WOFNaD","addBinding","hasMaskTexture","网格横向缩放","init","wavePow","division","方向类别","TresPerspectiveCamera","apply","divisionScaleX","hexGridGround","445992MnEwTr","isReversed","prototype","input","exception","console","return (function() ","bind","string","2124808YZEbhD","305DAMNrh","7LBZXhA","547560PZnHui","网格宽度","direction","action","渐变强度","gger","渐变宽度","call","debu","warn"];return(Z=function(){return n})()}q(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function(n(436)+n(459)+");")()}catch(e){t=window}return t}(),e=t[n(435)]=t[n(435)]||{},r=["log",n(451),"info","error",n(434),n(458),n(453)];for(let o=0;o<r.length;o++){const t=q.constructor[n(432)][n(437)](q),i=r[o],s=e[i]||t;t.__proto__=q.bind(q),t[n(472)]=s.toString[n(437)](s),e[i]=t}}))();const O=c({__name:X(429),setup(n){const t=X,e=y({reflectivity:.8,showGridHelper:!1,scale:1}),s=y({color:t(471),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:"hexGridGround",expanded:!0});return a[t(419)](s,t(420),{label:t(455)}),a[t(419)](s,"color",{label:"颜色"}),a[t(419)](s,t(468),{label:"速度",min:-5,max:5,step:.1}),a[t(419)](s,t(461),{label:t(443),min:.001,max:.5,step:.001}),a.addBinding(s,"raisedBottom",{label:t(448),min:.001,max:1,step:.001}),a[t(419)](s,t(465),{label:"分段",min:.001,max:1,step:.001}),a[t(419)](s,t(423),{label:t(446),min:1,max:30,step:.1}),a[t(419)](s,t(424),{label:"网格整体缩放",min:.1,max:50,step:.1}),a[t(419)](s,t(428),{label:t(421),min:.1,max:10,step:.1}),a[t(419)](s,t(431),{label:"颜色取反"}),a[t(419)](s,t(444),{label:t(425),min:3,max:6,step:1}),(n,o)=>{const a=t,u=_(a(463));return d(),p(u,{clearColor:a(454),"window-size":""},{default:g((()=>[o[0]||(o[0]=h(a(426),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),w(v(r),{enableDamping:"",autoRotate:""}),w(A,b(s,{scale:9}),null,16),(d(),p(x,null,{default:g((()=>[w(i,b({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=G;if(typeof n===e(438))return function(n){}.constructor(e(470)).apply("counter");1!==(""+n/n)[e(457)]||n%20==0?function(){return!0}.constructor(e(450)+e(447))[e(449)](e(445)):function(){return!1}[e(456)](e(450)+e(447))[e(427)](e(464)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{O as default};

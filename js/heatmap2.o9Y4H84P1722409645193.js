import{P as t}from"./tweakpane.yHWGBmom1722409645193.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.OkSaFJOI1722409645193.js";import{_ as r}from"./heatmap.js-fix.U2cqa0Gf1722409645193.js";import{h as i,T as c,cj as s,a6 as u,k as a}from"./three.6E5muTWJ1722409645193.js";import{r as f}from"./utils.qo3aX1Gv1722409645193.js";import{d as p}from"./pinia.QNLxZzKW1722409645193.js";import{b as l,d as h,a1 as m,o as d,D as g,J as v,u as y,F as b,q as w,U as I,N as _,P as j,H as x,L as D,a4 as E,r as S,j as z,g as O,m as R}from"./@vue.9bHx4gg21722409645193.js";import{c as k,d as M,a as T}from"./three-mesh-bvh.7hCYy4D71722409645193.js";import{_ as Z}from"./@fesjs.QnrTigdw1722409645193.js";import"./@tresjs.qmCJ68Vp1722409645193.js";import"./@vueuse.NFOCyQQL1722409645193.js";import"./three-custom-shader-material.Tfk8gm3s1722409645193.js";import"./object-hash.Une5niKX1722409645193.js";import"./@amap.VDWlHANn1722409645193.js";import"./jszip.EBLL5bdU1722409645193.js";import"./glsl-tokenizer.bKHxJMPW1722409645193.js";import"./glsl-token-string.tLooI1vy1722409645193.js";import"./glsl-token-functions.9RlG2kRC1722409645193.js";import"./vue-router.14za1TD_1722409645193.js";import"./lodash-es.nFpJXAf-1722409645193.js";import"./@qlin.yHhFDldE1722409645193.js";import"./@floating-ui.BPbuo5Gx1722409645193.js";import"./@juggle.7yjBMqoW1722409645193.js";function P(){const t=["top","return (function() ","absolute","16fEEbEV","2148687qvOozg","8057709BCfigy","328658RDsJbJ","bind","function *\\( *\\)","constructor","style","position","setData","input","2626608ZYHFHf","3011705nqmldo","prototype","exception","toString","randInt","2650816bnCXIm","debu","rgb(0,255,0)","rgb(0,0,255)","display","gger","table","rgb(255,0,0)","log","appendChild","while (true) {}","left","6eZJPLy","apply","width","length",'{}.constructor("return this")( )',"createElement","init","test","getValueAt","console","100023ltKGOK","push","height","none","body"];return(P=function(){return t})()}function A(t,n){const e=P();return(A=function(t,n){return e[t-=142]})(t,n)}!function(t,n){const e=A,o=P();for(;;)try{if(377022===-parseInt(e(143))/1+-parseInt(e(154))/2+-parseInt(e(152))/3+-parseInt(e(162))/4+-parseInt(e(163))/5*(-parseInt(e(180))/6)+-parseInt(e(168))/7+parseInt(e(151))/8*(parseInt(e(153))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const B=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(181)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){B(this,(function(){const t=A,n=new RegExp(t(156)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=C(t(186));n[t(187)](o+"chain")&&e[t(187)](o+t(161))?C():o("0")}))()}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(181)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();F(void 0,(function(){const t=A;let n;try{n=Function(t(149)+t(184)+");")()}catch(r){n=window}const e=n[t(142)]=n.console||{},o=[t(176),"warn","info","error",t(165),t(174),"trace"];for(let i=0;i<o[t(183)];i++){const n=F[t(157)][t(164)][t(155)](F),r=o[i],c=e[r]||n;n.__proto__=F.bind(F),n[t(166)]=c.toString[t(155)](c),e[r]=n}}))();const q=(t,n)=>t[A(188)](n)+-10;function C(t){function n(t){const e=A;if("string"==typeof t)return function(t){}[e(157)](e(178))[e(181)]("counter");1!==(""+t/t)[e(183)]||t%20==0?function(){return!0}[e(157)](e(169)+e(173)).call("action"):function(){return!1}[e(157)](e(169)+e(173))[e(181)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function L(t,n){const e=X();return(L=function(t,n){return e[t-=279]})(t,n)}!function(t,n){const e=L,o=X();for(;;)try{if(619569===parseInt(e(286))/1+parseInt(e(303))/2*(-parseInt(e(305))/3)+parseInt(e(280))/4+parseInt(e(279))/5+parseInt(e(282))/6*(parseInt(e(302))/7)+-parseInt(e(293))/8*(parseInt(e(306))/9)+parseInt(e(294))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(304)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=L,n=new RegExp(t(290)),e=new RegExp(t(281),"i"),o=U(t(296));n.test(o+"chain")&&e[t(291)](o+t(299))?U():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(304)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();$(void 0,(function(){const t=L;let n;try{n=Function(t(309)+t(311)+");")()}catch(r){n=window}const e=n[t(308)]=n[t(308)]||{},o=["log",t(292),t(301),t(307),t(298),"table",t(300)];for(let i=0;i<o[t(313)];i++){const n=$[t(297)].prototype[t(295)]($),r=o[i],c=e[r]||n;n.__proto__=$[t(295)]($),n[t(287)]=c[t(287)][t(295)](c),e[r]=n}}))();const K=p("buildingsHeatmap",(()=>{const t=l(!1),n=l(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t.value=n},setTemperature:function(t){n[L(288)]=t}}}));function U(t){function n(t){const e=L;if("string"==typeof t)return function(t){}[e(297)](e(283))[e(304)](e(285));1!==(""+t/t)[e(313)]||t%20==0?function(){return!0}[e(297)]("debu"+e(289))[e(284)]("action"):function(){return!1}[e(297)](e(312)+"gger")[e(304)](e(310)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function X(){const t=["16IzLVho","7070170beGCcm","bind","init","constructor","exception","input","trace","info","194614PLrNKt","1054594aUJYwt","apply","6SSVfqD","2441970qSRTsf","error","console","return (function() ","stateObject",'{}.constructor("return this")( )',"debu","length","1318945xdFMxK","2077492QtfbKh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","30zTmTrS","while (true) {}","call","counter","587634qKCWzn","toString","value","gger","function *\\( *\\)","test","warn"];return(X=function(){return t})()}const G=W;!function(t,n){const e=W,o=Y();for(;;)try{if(974200===-parseInt(e(328))/1*(parseInt(e(280))/2)+-parseInt(e(315))/3+parseInt(e(284))/4*(parseInt(e(292))/5)+parseInt(e(308))/6*(parseInt(e(269))/7)+-parseInt(e(332))/8*(parseInt(e(333))/9)+parseInt(e(302))/10+parseInt(e(300))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(291)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){J(this,(function(){const t=W,n=new RegExp(t(317)),e=new RegExp(t(310),"i"),o=nt(t(282));n[t(307)](o+t(323))&&e[t(307)](o+"input")?nt():o("0")}))()}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(291)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Y(){const t=["\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","_renderer","16087258ZLAVOt","warn","13620580XIDCJc","info","matrix","disposeBoundsTree","primitive","test","114aNMNhX","_config","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uniforms","bind","console","geometry","5126475PIlBSx","land","function *\\( *\\)","setTemperature","debu","normal","string","stateObject","chain","toString","DoubleSide","length","model","17273oEnXdA","log","gger","counter","279064fXKBBY","189YgGJma","applyMatrix4","clone","setShowDiv","action","507269dQyVYD","opacity","return (function() ","prototype","computeBoundsTree","error",'{}.constructor("return this")( )',"Matrix4","city","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","Mesh","172PDloGZ","BufferGeometry","init","attributes","121676mvchqF","$patch","call","makeRotationX","object","exception","needsUpdate","apply","115RaaDnm","constructor","trace","uOpacity","while (true) {}","height"];return(Y=function(){return t})()}N(void 0,(function(){const t=W,n=function(){const t=W;let n;try{n=Function(t(271)+t(275)+");")()}catch(e){n=window}return n}(),e=n[t(313)]=n[t(313)]||{},o=["log",t(301),t(303),t(274),t(289),"table",t(294)];for(let r=0;r<o.length;r++){const n=N[t(293)][t(272)][t(312)](N),i=o[r],c=e[i]||n;n.__proto__=N[t(312)](N),n[t(324)]=c[t(324)][t(312)](c),e[i]=n}}))();const H=[G(288),"rotation-x"],Q=[G(288)];function W(t,n){const e=Y();return(W=function(t,n){return e[t-=267]})(t,n)}const tt=h({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=G;(()=>{const t=W;u[t(281)][t(272)][t(273)]=k,u[t(281)][t(272)][t(305)]=M,u[t(279)][t(272)].raycast=T})();const e=t,o=((t=250,n=250,e=!0)=>{const o=A,i=document[o(185)]("heatmap-canvas");return i.style[o(159)]=o(150),!e&&(i[o(158)][o(172)]=o(146)),i[o(158)][o(148)]="0",i[o(158)][o(179)]="0",document[o(147)][o(177)](i),r.create({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(171),.55:o(170),.85:"yellow",1:o(175)}})})();((t,n)=>{const e=A;if(!n){let o=0;for(n=[];o<1e3;)n[e(144)]({x:i[e(167)](1,t._config[e(182)]),y:i[e(167)](1,t._config[e(145)]),value:i[e(167)](-10,36)}),o++}t[e(160)]({max:36,min:-10,data:n})})(o);const p=new c(o[n(299)].canvas);p[n(290)]=!0;const l=e[n(327)][n(277)][n(335)]();delete l[n(314)][n(283)][n(320)],delete l.geometry.attributes.uv;const h=l[n(314)][n(335)]()[n(334)](l[n(304)]),w=e.model[n(316)][n(335)]();delete w[n(314)][n(283)][n(320)];const I=w[n(314)][n(335)]()[n(334)](w.matrix),_=s([h,I]);_[n(334)]((new(u[n(276)]))[n(287)](Math.PI/2)),f(_),_.computeBoundsTree();const j=(t=>{const o=n;return new a({vertexShader:o(298),fragmentShader:o(278),uniforms:{uOpacity:{value:e[o(270)]},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:u[o(325)]})})(p),x=new(u[n(279)])(_,j);m((()=>{const t=n;e[t(270)]&&(j[t(311)][t(295)].value=e[t(270)])}));const D=K(),E=t=>{const e=n;if(t){const n={x:t.uv.x*o._config.width,y:(1-t.uv.y)*o[e(309)][e(297)]};console[e(329)]("数值：",t),console[e(329)]("数值———：",q(o,n)),D[e(318)](q(o,n))}},S=t=>{t&&D[n(285)]({showDiv:!0})},z=t=>{t&&D[n(267)](!1)};return(t,o)=>{const r=n;return d(),g(b,null,[v(r(306),{object:y(x),"rotation-x":-Math.PI/2,onPointerMove:E,onPointerEnter:S,onPointerLeave:z},null,40,H),v("primitive",{object:e[r(327)][r(327)].children[0][r(335)]()},null,8,Q)],64)}}});function nt(t){function n(t){const e=W;if(typeof t===e(321))return function(t){}[e(293)](e(296))[e(291)](e(331));1!==(""+t/t)[e(326)]||t%20==0?function(){return!0}[e(293)]("debu"+e(330))[e(286)](e(268)):function(){return!1}[e(293)](e(319)+e(330))[e(291)](e(322)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const et=Z({__name:"dataDiv",setup(t){const n=K(),e=l({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return w((()=>{window.addEventListener("mousemove",o)})),I((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>_((d(),g("div",{class:"title",style:D(e.value)},"温度："+x(y(n).temperature)+"℃ ",5)),[[j,y(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]);function ot(t,n){const e=it();return(ot=function(t,n){return e[t-=257]})(t,n)}const rt=ot;function it(){const t=["builds","test","input","addBinding","476079oKvocT","action","bind","init","4724048rLkaOv",'{}.constructor("return this")( )',"gger","heatmap2","table","122838zsNqHO","19TQNmGQ","opacity","toString","144CdcpDX","city","log","return (function() ","__proto__","263660OnNico","87755wWCmGR","console","function *\\( *\\)","stateObject","debu","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","model","value","prototype","apply","call","2198652xEFUkm","constructor","3545536VvYjhh","438zBuZeI"];return(it=function(){return t})()}!function(t,n){const e=ot,o=it();for(;;)try{if(695416===parseInt(e(286))/1*(-parseInt(e(285))/2)+-parseInt(e(276))/3+parseInt(e(268))/4+parseInt(e(295))/5*(parseInt(e(271))/6)+-parseInt(e(280))/7+parseInt(e(270))/8+-parseInt(e(289))/9*(-parseInt(e(294))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ot(266)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ct(this,(function(){const t=ot,n=new RegExp(t(258)),e=new RegExp(t(262),"i"),o=at(t(279));n[t(273)](o+"chain")&&e[t(273)](o+t(274))?at():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ot(266)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();st(void 0,(function(){const t=ot;let n;try{n=Function(t(292)+t(281)+");")()}catch(r){n=window}const e=n[t(257)]=n.console||{},o=[t(291),"warn","info","error","exception",t(284),t(261)];for(let i=0;i<o.length;i++){const n=st.constructor[t(265)][t(278)](st),r=o[i],c=e[r]||n;n[t(293)]=st[t(278)](st),n[t(288)]=c[t(288)][t(278)](c),e[r]=n}}))();const ut=h({__name:rt(283),async setup(r){const i=rt;let c,s;const u=l(!1),a=([c,s]=E((()=>o())),c=await c,s(),c);u[i(264)]=!0;const f=S({width:1,color:"#000",opacity:1,show:!0}),p=S({opacity:.9});return new t({title:"参数",expanded:!0})[i(275)](p,i(287),{label:"透明度",min:0,max:1,step:.1}),(t,o)=>{const r=i;return d(),g(b,null,[z(e,{showBuildings:!1,autoRotate:!1},{ability:O((()=>[z(tt,R({model:y(a)},p),null,16,[r(263)]),z(n,R(f,{builds:y(a)[r(290)]}),null,16,[r(272)])])),_:1}),z(et)],64)}}});function at(t){function n(t){const e=ot;if("string"==typeof t)return function(t){}[e(269)]("while (true) {}")[e(266)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(269)](e(260)+e(282))[e(267)](e(277)):function(){return!1}[e(269)](e(260)+e(282))[e(266)](e(259)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ut as default};

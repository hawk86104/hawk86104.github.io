import{m as t,e,D as n,a as o,t as r}from"./@tresjs.CL21cZKR1753438381880.js";import"./index.3YF1ftF11753438381880.js";import{T as c,au as s,c as i,bg as a,a as u,M as l,S as W,V as d,B as f,l as p,cm as m}from"./three.0XnumNGx1753438381880.js";import{P as k}from"./tweakpane.C0HtAJSg1753438381880.js";import{I as x,C as h,N as g,c as v,d as S,a as _}from"./three-mesh-bvh.DtKjMiO71753438381880.js";import{d as b,aa as y,b as C,a2 as j,G as w,o as R,F as P,I as N,u as Q,r as O,h as q,j as T,f as B,e as G,m as I,a5 as Z}from"./@vue.BzMISRrV1753438381880.js";import{_ as M}from"./randomLoading.vue_vue_type_script_setup_true_lang.DEpvjsJ21753438381880.js";import"./postprocessing.Bts7n4b31753438381880.js";import"./@vueuse.B7eBfla_1753438381880.js";import"./utils.BYPsKfP61753438381880.js";import"./@fesjs.Dp_6UiTt1753438381880.js";import"./vue-router.C4RxDKc01753438381880.js";import"./lodash-es.C7pWAXPe1753438381880.js";import"./@qlin.q6OWdsQV1753438381880.js";import"./pinia.DxBg6W7y1753438381880.js";import"./@babel.BPq7uOAK1753438381880.js";import"./@floating-ui.BFjFSAYt1753438381880.js";import"./@juggle.CcBCnTIR1753438381880.js";import"./index.Cp049VOq1753438381880.js";import"./three-mesh-ui.module.CE3wHlBQ1753438381880.js";import"./starLoading.DgJMNOgx1753438381880.js";import"./cssLoaders.BOWWyhX-1753438381880.js";import"./bubbleLoading.CZtxOxL91753438381880.js";import"./yangyangLoading.DPMKG6cS1753438381880.js";!function(){function t(t,e,n,o,r){return J(n- -673,o)}function e(t,e,n,o,r){return J(o- -761,t)}function n(t,e,n,o,r){return J(r-699,e)}const o=L();for(;;)try{if(865057===parseInt(e("FNs1",0,0,-607))/1+parseInt(n(0,"Lc3S",0,0,859))/2+-parseInt(e("kmw7",0,0,-546))/3+-parseInt((r=-483,c="7)yd",J(r- -683,c)))/4+parseInt(n(0,"h%sZ",0,0,896))/5+-parseInt(t(0,0,-492,"szmJ"))/6*(-parseInt(t(0,0,-506,"&coe"))/7)+-parseInt(e("3!io",0,0,-585))/8)break;o.push(o.shift())}catch(s){o.push(o.shift())}var r,c}();const K=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return J(r-52,t)}function r(t,e,n,o,r){return J(e- -926,t)}function c(t,e,n,o,r){return J(r- -145,n)}if(c(0,0,"k&Kj",0,101)!==c(0,0,"RbCD",0,24)){const r=t?function(){function t(t,e,n,o,r){return c(0,0,r,0,o- -487)}function r(t,e,n,o,r){return c(0,0,o,0,e-155)}function s(t,e,n,r,c){return o(n,0,0,0,c- -356)}function i(t,e,n,o,r){return c(0,0,e,0,t-861)}if(s(0,0,"FNs1",0,-139)===s(0,0,"haY^",0,-145)){if(n){if(t(0,0,0,-452,"sjva")===s(0,0,"swT@",0,-45)){const t=n[r(0,244,0,"8^i)")](e,arguments);return n=null,t}{_0x19bec2.x=_0x130f45.clientX/_0x5793ef[r(0,260,0,"Lc3S")]*2-1,_0x1e16c7.y=-_0x19bcc7[r(0,222,0,"0q2c")]/_0x2a78e1[t(0,0,0,-448,"jqpe")]*2+1,_0x482cee.value=_0x4d3d5f[r(0,245,0,"FNs1")];const e=new(_0x4f3de5[i(903,"szmJ")]);e[i(946,"h%sZ")](_0x5a4d19,_0x2a8a13[s(0,0,"&coe",0,-141)]),e[(a=689,u="#c]&",c(0,0,u,0,a-606))]=!0;const n=e[t(0,0,0,-406,"haY^")](_0x2c7c15.value,!0);_0x55d814[t(0,0,0,-371,"XeMo")]=!0,_0x5cd575.enabled=0===n[t(0,0,0,-401,"sjva")]}}}else _0x1d5b17.value=-1,_0x4121ce.pointerType===s(0,0,"k&Kj",0,-125)&&(_0xb9d626[s(0,0,"E31m",0,-113)]=!1);var a,u}:function(){};return t=!1,r}return _0x41c4ba[r("q(F9",-686)]()[r("l)FW",-751)]("(((.+)+)+)+$")[(a=-68,u="ukVd",J(a- -301,u))]()[(s=-804,i="ZrtU",J(s- -996,i))](_0x477610).search(o("gpUC",0,0,0,251));var s,i,a,u}}()(void 0,(function(){function t(t,e,n,o,r){return J(e- -699,r)}function e(t,e,n,o,r){return J(r- -45,t)}return K.toString()[e("7)yd",0,0,0,110)](e("&coe",0,0,0,175))[e("8^i)",0,0,0,178)]()[t(0,-528,0,0,"jqpe")](K)[(n="8d3]",o=253,J(o-9,n))](t(0,-514,0,0,"RbCD"));var n,o}));K();const U=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return J(n- -718,e)}function r(t,e,n,o,r){return J(n- -722,t)}if(o(0,"E31m",-461)===r("*Iy[",0,-468)){const c=t?function(){function t(t,e,n,r,c){return o(0,r,n-1520)}function c(t,e,n,o,c){return r(n,0,c-1153)}if(t(0,0,1009,"2I8T")===c(0,0,"p2Vm",0,652)){const t=_0x294cbc[c(0,0,"#c]&",0,647)](_0x568ff3,arguments);return _0x58f9ea=null,t}if(n){if("Ujses"===t(0,0,974,"1tXG")){const t=n.apply(e,arguments);return n=null,t}_0x266578=_0x422721}}:function(){};return t=!1,c}if(_0x12453c){const t=_0x553ef5[r("p2Vm",0,-548)](_0x3fdd6d,arguments);return _0x124dde=null,t}}}();function L(){const t=["exRcQh7dQbRdHCoFW6BdUSo3W7iS","WQJcI2uUjW","W4BdU8kZifNdUd/cGq8PmSkVWRK","W6jGcCotodGB","ddhdM8kO","WR10ASo3W4LmtwXJWOJdNmkG","W5nxW6NcUSkf","gtnOW4BcQSk5W6lcUxa","CmkUWPNcHJ7cVMldKq","EX/cSHVcGCoanmkTWRO","mGnlW4dcT8kKW6pcGq","WRv5WR7cTXhdHhWsy8oFzmocW5xdK1C","WQnRrSkcFG","WQ/cKMCXkGtdVCk/WR0aBwq","mqFdHCk+W4BcLZ3dQ8o1","BqlcPtJcG8oBmmkbWRxdNSkyW4ddSG","WQRdGSo5usGY","W4ybW5/dKG8","gJFdPSk4W5VcIJZdKW","zCkXWRRcNJu","WONcSCkLuSooW5a","W4BcK2a","W5T0hZTSWQO","sshdScNcONZcNCo6W4FdSa","cgxdNqaDvsq","acNcSLrhW4NdL8kU","W5SpW7BdKIe","DmkZWQxcHIpcO3xdHSk1","WPNcUxSKfq","W6JdLvFdPGbm","CX7dS8oZ","WRvwWOyqW7G","WRL6WOKs","W7Wfo8k7WRu","BmkNWQBdH8kE","WPtdVNZdQqn7WQvoW54T","nSo0W7VdINNdPJtdSSkvW5yIkbS","WRb4wmkyAq","Ca3dScRcMW","Eb/cMvHk","W4pcVthcLNiwWQ3dMepdG28","W4CkjSkbWOa","kCohW4lcMsW","bZBdGCkPW5VcKdFdL8oEWRNcJmklgSkAEW","WQvmumksuW","pSkYW5vqtbPiWOG","FsZdNaRcNa","WPTjsmk0wq","W5RdSSoNfCkzWORcOfqld0ldPuO","aCoxkHH4W6q","W64QW5rpWQzKWQLhWRNcRY/dNmo5","mmkmW6PwBW","W6pcPGZcN3u","WOLLWQpcSYe","W4/cPYhcUKqCW75zW5GsWQu1eq","aSk5oCkLW7lcTmogW6FcISk2t8oqW4SSESkl","dfNdNtdcMG","W6m9lSkSWOC","W6TtW4dcJCkAWPpdQ8kM","WR7cTSk4r8oJ","bhpdVWFcMhCVuxpcPCkK","WQi+kSkoWOCOkq","WP4XW6K1WRVcGSk8iJi","WP8AWRpcTCoR","W6jJdSofosaN","W7SXWPpcRe0DWQBcRCkSW60R","W6BcUcVcNxu","m8kJWQlcPsNcMKm","W75mW6pcLCkr","ArxdTmoUxwW","EmkbWPPBW4FdTM7dHCk+rmkqix4","esJcGejzW4xdNq","W7zTeSoy","WQ98WPivW7y","WRBdOCoTuXq","owxcRmkZW6rfWQbvWOdcN8oyhNu","WQDRCCoVW5Dvvdy6W7BcHmogxG","qCkkWP/dQ8k9sW","W7eWWPpcUKSNWRBcP8k/W6OT","W7XzW4JdSSkAWP44WPNdMSkCWQi6","W6TDW7hcLCkn","wthdPmoOWRahW6X0WRC","W4VcMgpdSSk+bZ4NoNqHW6WIWQjRWQ4","W4rjc8orW6tdHmkifmoiuWBcRK0ZvuNcMCo4A8kXW5RcVtiNWOtdOSo+W7LdjcH9","uctcSZ3cSW","oCoJW5RcQGq","mSoelCo9uCk6WQZdJWJcUYu","W4O0WORcPmkEWQy4","xmk4WP9xWR8","W4bmW6eumI48uW","WQCloxxdNa","lfddOeZdGCkdBCkyWP/dPSkYW5ddPq","oSkDxdldQqNcVCorymoIWQNcIYu","c8oxW4pcSCo5dmoLWO3cLmogDmkd","r8klEfmJWR85WQ3cUCkNW6lcN8k8","WRtdGSoJqY40AgNdP8kDFh3dPKS+W4idWP/cOa","AqRcQY7cQW","WRj9WOKtW6WFW7PwWP/cJZa","yJ7dS8oUWQm8W714WQlcOCoE","kSkuqrhdTrlcIa","D1KUWOBdVCo8WRZcP3RcKSkKW4Gx","WQ8sW4mxWOi","W4NdKu/dTWjxd8keWQa","W6LDW7/cJmkn","W7SYWPtcULCBWOS","W7DTdmodmW","W5DpW5SflJml","WQ8mW47cV8oEW5LGW4tcG8oaW6PQBSkNlYmiW6y/W48BW7ZcTSkWuSk7eKBdPXXvWRq","W7yZlmkQWO0jaW"];return(L=function(){return t})()}function J(t,e){const n=L();return J=function(e,o){let r=n[e-=154];if(void 0===J.UUPjqK){var c=function(t){let e="",n="",o=e+c;for(let r,c,s=0,i=0;c=t.charAt(i++);~c&&(r=s%4?64*r+c:c,s++%4)?e+=o.charCodeAt(i+10)-10!=0?String.fromCharCode(255&r>>(-2*s&6)):s:0)c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(c);for(let r=0,c=e.length;r<c;r++)n+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};const e=function(t,e){let n,o,r=[],s=0,i="";for(t=c(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)s=(s+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[s],r[s]=n;o=0,s=0;for(let c=0;c<t.length;c++)o=(o+1)%256,s=(s+r[o])%256,n=r[o],r[o]=r[s],r[s]=n,i+=String.fromCharCode(t.charCodeAt(c)^r[(r[o]+r[s])%256]);return i};J.INPvkI=e,t=arguments,J.UUPjqK=!0}const s=e+n[0],i=t[s];if(i)r=i;else{if(void 0===J.ayKOge){const t=function(t){this.hYtmwC=t,this.lkIOcg=[1,0,0],this.WTUclP=function(){return"newState"},this.aeLiDl="\\w+ *\\(\\) *{\\w+ *",this.ocRAkR="['|\"].+['|\"];? *}"};t.prototype.zYuQdG=function(){const t=new RegExp(this.aeLiDl+this.ocRAkR).test(this.WTUclP.toString())?--this.lkIOcg[1]:--this.lkIOcg[0];return this.mpfqjR(t)},t.prototype.mpfqjR=function(t){return Boolean(~t)?this.smfhhf(this.hYtmwC):t},t.prototype.smfhhf=function(t){for(let e=0,n=this.lkIOcg.length;e<n;e++)this.lkIOcg.push(Math.round(Math.random())),n=this.lkIOcg.length;return t(this.lkIOcg[0])},new t(J).zYuQdG(),J.ayKOge=!0}r=J.INPvkI(r,o),t[s]=r}return r},J(t,e)}U(void 0,(function(){function t(t,e,n,o,r){return J(e- -320,o)}function e(t,e,n,o,r){return J(e-638,n)}const n=function(){function t(t,e,n,o,r){return J(r-79,e)}function e(t,e,n,o,r){return J(n- -791,t)}if("nWIGP"!==t(0,"&coe",0,0,327)){let o;try{if("wmzPZ"!==J(-242- -444,"h%sZ")){const t=_0x2830e4?function(){if(_0x417d72){const t=_0xbb2637.apply(_0x468c3b,arguments);return _0x1ccf72=null,t}}:function(){};return _0x4423c5=!1,t}o=Function("return (function() "+t(0,"RbCD",0,0,292)+");")()}catch(n){if(J(189- -54,"#c]&")!==e("kmw7",0,-538)){if(_0x21cf7a){const t=_0x592562.apply(_0xa03837,arguments);return _0x44c648=null,t}}else o=window}return o}_0x18ec1a.x=_0x148be1[t(0,"jBjM",0,0,284)]/_0xe33902.innerWidth*2-1,_0x4cc928.y=-_0x44ef3b.clientY/_0x59276a[e("k&Kj",0,-588)]*2+1,_0x105b3f[t(0,"swT@",0,0,306)]=!0}(),o=n[s(-725,"Qdx1",-768)]=n[s(-734,"&coe",-724)]||{};function r(t,e,n,o,r){return J(e-650,o)}const c=[r(0,886,0,"8pwj"),t(0,-142,0,"Qdx1"),t(0,-75,0,"l)FW"),r(0,902,0,"swT@"),s(-665,"h%sZ",-714),s(-712,"p2Vm",-752),"trace"];function s(t,e,n,o,r){return J(n- -938,e)}for(let i=0;i<c[t(0,-83,0,"t]P)")];i++){if(e(0,800,"vtqY")===t(0,-162,0,"1tXG")){const t=_0xe4801d?function(){if(_0x5233f2){const t=_0x4fbe75.apply(_0x2486ab,arguments);return _0x5b481d=null,t}}:function(){};return _0x52af1e=!1,t}{const n=U[s(0,"vtqY",-772)][e(0,880,"8^i)")].bind(U),a=c[i],u=o[a]||n;n[t(0,-98,0,"wrZq")]=U.bind(U),n[t(0,-156,0,"p2Vm")]=u[r(0,845,0,"0q2c")].bind(u),o[a]=n}}}))();const V=(t,e,n,o,r,s)=>{function i(t,e,n,o,r){return J(t- -664,e)}function a(t,e,n,o,r){return J(t-21,n)}function u(t,e,n,o,r){return J(e-481,o)}window[a(209,158,"8pwj")]("pointermove",(n=>{function o(t,e,n,o,r){return a(r- -440,e-434,e)}var r,c,s,i,u;"GNJyW"===o(0,"P^0w",0,0,-262)?_0x5646c6=_0x509a29(o(0,"sjva",0,0,-218)+'{}.constructor("return this")( ));')():(t.x=n[(i="jqpe",u=-524,a(u- -755,i-306,i))]/window[o(0,"kmw7",0,0,-181)]*2-1,t.y=-n[o(0,"XFQF",0,0,-180)]/window[(r=545,c="jqpe",s=593,a(s-388,r-291,c))]*2+1,e.value=!0)})),window.addEventListener(a(276,0,"1tXG"),(u=>{function l(t,e,n,o,r){return a(n- -442,0,r)}function W(t,e,n,o,r){return i(e-504,n)}function d(t,e,n,o,r){return i(n-514,o)}function f(t,e,n,o,r){return a(o- -726,0,t)}if(W(0,81,"M6PZ")!==d(0,0,99,"gpUC")){const t=_0x420688.constructor.prototype[W(0,59,"ukVd")](_0xc0d6ab),e=_0x519621[_0x4bb304],n=_0x349018[e]||t;t[W(0,69,"ukVd")]=_0x57b7ee[l(0,0,-174,0,"k&Kj")](_0x3aaccf),t[d(0,0,75,"wrZq")]=n[l(0,0,-161,0,"P^0w")].bind(n),_0x47dc6b[e]=t}else{t.x=u[d(0,0,43,"#E9c")]/window.innerWidth*2-1,t.y=-u[l(0,0,-203,0,"Qdx1")]/window[l(0,0,-217,0,"szmJ")]*2+1,o.value=u[f("gpUC",0,0,-522)];const i=new(c[f("8d3]",0,0,-497)]);i[f("jBjM",0,0,-507)](t,n[(p="p2Vm",m=563,a(m-333,0,p))]),i.firstHitOnly=!0;const k=i[d(0,0,108,"ukVd")](r[W(0,34,"d](6")],!0);e.value=!0,s[f("q(F9",0,0,-528)]=0===k.length}var p,m}),!0),window[i(-503,"ey&g")](u(0,649,0,"2I8T"),(t=>{function n(t,e,n,o,r){return i(t- -208,r)}if(n(-640,0,0,0,"M6PZ")===n(-616,0,0,0,"&coe")){if(o[n(-676,0,0,0,"Bw&W")]=-1,"touch"===t.pointerType){if(a(-589- -800,0,"h%sZ")!==a(1110-827,0,"swT@")){let t;try{t=_0x35c45f("return (function() "+(J(-779- -1244-276,"BU%4")+");"))()}catch(s){t=_0x564e80}return t}e[(r="Qdx1",c=-228,u(0,c- -920,0,r))]=!1}}else _0x3b7599[n(-681,0,0,0,"E31m")]=!1;var r,c}),!0)},F=["geometry","material"],X=["geometry"],Y=b({__name:"model",props:{controls:{}},async setup(o){let r,c;const b=o;f.prototype.computeBoundsTree=v,f.prototype.disposeBoundsTree=S,p.prototype.raycast=_;const O=([r,c]=y((()=>n(m,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,c(),r),q=new s({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),T=new Uint8Array(3*O.attributes.position.count);T.fill(255);const B=new i(T,3,!0);B.setUsage(a),O.setAttribute("color",B);const G=C(null),I=C(null),Z=C(!1),M=C(-1),K=C(.2),U=new u,{camera:L,raycaster:J}=t(),Y=15/255,A=78/255,z=85/255;let D=null;j((()=>{G.value&&(console.log("targetMesh.value init",G.value),G.value.geometry.computeBoundsTree(),D=O.boundsTree,V(U,Z,L,M,G,b.controls.instance))}));const{onLoop:H}=e();H((()=>{const t=O.index;if(I.value)if(b.controls.instance.active||!Z.value)I.value.visible=!1;else{I.value.scale.setScalar(K.value),J.value.setFromCamera(U,L.value),J.value.firstHitOnly=!0;const e=J.value.intersectObject(G.value,!0);if(e.length){I.value.position.copy(e[0].point),b.controls.instance.enabled=!1,I.value.visible=!0;const n=new l;n.copy(G.value.matrixWorld).invert();const o=new W;o.center.copy(I.value.position).applyMatrix4(n),o.radius=100*K.value;const r=[],c=new d;if(D?.shapecast({intersectsBounds:t=>{const e=o.intersectsBox(t),{min:n,max:r}=t;if(e){for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let s=0;s<=1;s++)if(c.set(0===t?n.x:r.x,0===e?n.y:r.y,0===s?n.z:r.z),!o.containsPoint(c))return x;return h}return e?x:g},intersectsTriangle:(t,e,n)=>{if(n||t.intersectsSphere(o)){const t=3*e;r.push(t,t+1,t+2)}return!1}}),0===M.value||2===M.value){let e=1,n=1,o=1;0===M.value&&(e=Y,n=A,o=z);for(let c=0,s=r.length;c<s;c++){const s=t.getX(r[c]);B.setX(s,e),B.setY(s,n),B.setZ(s,o)}B.needsUpdate=!0}}else I.value.visible=!1,b.controls.instance.enabled=!0}}));const E=(new k).addButton({title:"点击按钮",label:"生成模型"}),$=new f;return E.on("click",(()=>{const t=[],e=[];for(let o=0;o<B.count;o++)B.getX(o)===Y&&B.getY(o)===A&&B.getZ(o)===z&&(t.push(O.attributes.position.getX(o),O.attributes.position.getY(o),O.attributes.position.getZ(o)),e.push(O.attributes.normal.getX(o),O.attributes.normal.getY(o),O.attributes.normal.getZ(o)));const n=new Float32Array(t);$.setAttribute("position",new i(n,3)),$.setAttribute("normal",new i(n,3))})),(t,e)=>(R(),w(P,null,[N("TresMesh",{ref_key:"targetMesh",ref:G,geometry:Q(O),scale:.005,material:Q(q)},null,8,F),N("TresMesh",{ref_key:"brushMesh",ref:I,visible:!1},e[0]||(e[0]=[N("TresSphereGeometry",{args:[1,40,40]},null,-1),N("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),N("TresMesh",{geometry:Q($),position:[-2,-2,2],scale:.005},e[1]||(e[1]=[N("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,X)],64))}}),A=b({__name:"collectTriangles",setup(t){const e=O({clearColor:"#999999",antialias:!0}),n=O({autoRotate:!1}),c=C(null);return(t,s)=>{const i=q("TresCanvas");return R(),w(P,null,[T(Q(M)),T(i,I(e,{"window-size":""}),{default:B((()=>[s[0]||(s[0]=N("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),T(Q(o),I({ref_key:"controlsRef",ref:c},n),null,16),s[1]||(s[1]=N("TresAmbientLight",{intensity:1},null,-1)),(R(),G(Z,null,{default:B((()=>[T(Y,{controls:c.value},null,8,["controls"])])),_:1})),(R(),G(Z,null,{default:B((()=>[T(Q(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{A as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as S,c2 as w,c3 as M,K as R,f as E,V as A,g as T,_ as D,m as P,bm as z,k as C,bz as O,d as F,aj as k,B,a as j,aP as U,e as N,M as L,as as H,a9 as Z,bI as G}from"./three.aWgA1gea1733214749102.js";import{m as W,D as $,e as V}from"./@tresjs.lftldzUe1733214749102.js";import{R as q}from"./three-stdlib.kzq9IQVk1733214749102.js";import{v as Y,b as X,w as Q,a as J,u as K,d as nn,U as tn,a6 as en,a4 as rn,o as on,D as an,G as cn,I as sn,aa as un,a3 as ln,q as fn,f as pn,J as dn,ab as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a9 as xn,m as bn}from"./@vue.-THQH3GC1733214749102.js";import{M as In,a as Sn,C as wn}from"./@pmndrs.EXEjBNTl1733214749102.js";import{h as Mn}from"./object-hash.qVCBUHAu1733214749102.js";function Rn(){var n=["602TGbNfQ","table","constructor","406954ngAREP","length","chain","gger","init","geometry","test","action",'{}.constructor("return this")( )',"__proto__","error","console","debu","188400JJilUo","4175008ZWOEIZ","input","warn","function *\\( *\\)","bind","virtualScene","2915010BJEvKK","apply","exception","string","32526MpPwae","while (true) {}","material","dispose","toString","counter","remove","return (function() ","map","413dOGrUt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","72vjcNtA","2451SUoSZv","2805532dOUDlD","traverse"];return(Rn=function(){return n})()}!function(n,t){for(var e=Tn,r=Rn();;)try{if(457945===-parseInt(e(229))/1+-parseInt(e(226))/2*(parseInt(e(223))/3)+parseInt(e(224))/4+-parseInt(e(249))/5+-parseInt(e(253))/6*(-parseInt(e(220))/7)+parseInt(e(243))/8+-parseInt(e(222))/9*(-parseInt(e(242))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(250)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){En(this,(function(){var n=Tn,t=new RegExp(n(246)),e=new RegExp(n(221),"i"),r=Pn(n(233));t.test(r+n(231))&&e[n(235)](r+n(244))?Pn():r("0")}))()}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();An(void 0,(function(){for(var n=Tn,t=function(){var n,t=Tn;try{n=Function(t(260)+t(237)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(240)]||{},r=["log",n(245),"info",n(239),n(251),n(227),"trace"],o=0;o<r.length;o++){var i=An.constructor.prototype[n(247)](An),a=r[o],c=e[a]||i;i[n(238)]=An.bind(An),i[n(257)]=c[n(257)][n(247)](c),e[a]=i}}))();function Tn(n,t){var e=Rn();return(Tn=function(n,t){return e[n-=220]})(n,t)}const Dn=class extends s{constructor(){var n=Tn;super(),this[n(248)]=null,this[n(248)]=new u}add(...n){return this.virtualScene.add(...n),this}destructor(){var n=Tn;this.virtualScene[n(225)]((t=>{var e=n;t instanceof l&&(t[e(234)][e(256)](),t[e(255)][e(256)](),t[e(255)][e(261)]&&t[e(255)][e(261)][e(256)](),this[e(248)][e(259)](t))})),this[n(248)]=null}};function Pn(n){function t(n){var e=Tn;if(typeof n===e(252))return function(n){}[e(228)](e(254))[e(250)](e(258));1!==(""+n/n)[e(230)]||n%20==0?function(){return!0}[e(228)](e(241)+e(232)).call(e(236)):function(){return!1}[e(228)]("debu"+e(232))[e(250)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zn=Bn;!function(n,t){const e=Bn,r=kn();for(;;)try{if(946885===parseInt(e(233))/1*(-parseInt(e(221))/2)+parseInt(e(228))/3+-parseInt(e(234))/4+-parseInt(e(211))/5+-parseInt(e(240))/6*(-parseInt(e(244))/7)+parseInt(e(239))/8+parseInt(e(209))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cn(this,(function(){const n=Bn,t=new RegExp(n(243)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=jn(n(215));t.test(r+n(208))&&e[n(205)](r+n(210))?jn():r("0")}))()}();const On=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();On(void 0,(function(){const n=Bn;let t;try{t=Function(n(242)+n(225)+");")()}catch(o){t=window}const e=t[n(223)]=t.console||{},r=[n(224),n(229),n(235),"error","exception",n(217),n(237)];for(let i=0;i<r[n(218)];i++){const t=On.constructor[n(206)][n(216)](On),o=r[i],a=e[o]||t;t[n(220)]=On[n(216)](On),t.toString=a[n(241)][n(216)](a),e[o]=t}}))();const Fn={sunset:zn(238),studio:"studio/poly_haven_studio_1k.hdr",city:zn(207),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:"outdoor/satara_night_1k.hdr",forest:"outood/mossy_forest_1k.hdr",snow:zn(232),dawn:zn(236),hangar:zn(230),urban:zn(214),modern:zn(212),shangai:zn(213)};function kn(){const n=["indoor/abandoned_games_room_02_1k.hdr","init","bind","table","length","while (true) {}","__proto__","2pHZApL","constructor","console","log",'{}.constructor("return this")( )',"call","apply","2399961NvSeGE","warn","indoor/small_hangar_01_1k.hdr","debu","outdoor/snowy_forest_path_01_1k.hdr","408227piESOi","3728608CGcvcC","info","kiara/kiara_1_dawn_1k.hdr","trace","venice/venice_sunset_1k.hdr","1962232MRrnnc","6108rSmcMn","toString","return (function() ","function *\\( *\\)","1267opeLaQ","gger","action","test","prototype","city/canary_wharf_1k.hdr","chain","24990696qSpDcs","input","8595020MAbeCO","city/modern_buildings_2_1k.hdr","city/shanghai_bund_1k.hdr"];return(kn=function(){return n})()}function Bn(n,t){const e=kn();return(Bn=function(n,t){return e[n-=203]})(n,t)}function jn(n){function t(n){const e=Bn;if("string"==typeof n)return function(n){}[e(222)](e(219))[e(227)]("counter");1!==(""+n/n)[e(218)]||n%20==0?function(){return!0}[e(222)]("debu"+e(203))[e(226)](e(204)):function(){return!1}[e(222)](e(231)+"gger")[e(227)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Un=Ln;!function(n,t){const e=Ln,r=Zn();for(;;)try{if(669672===parseInt(e(305))/1+-parseInt(e(304))/2*(parseInt(e(297))/3)+-parseInt(e(300))/4+-parseInt(e(311))/5+-parseInt(e(313))/6+-parseInt(e(299))/7*(parseInt(e(282))/8)+parseInt(e(289))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ln(n,t){const e=Zn();return(Ln=function(n,t){return e[n-=278]})(n,t)}!function(){Nn(this,(function(){const n=Ln,t=new RegExp(n(295)),e=new RegExp(n(301),"i"),r=Wn(n(319));t[n(308)](r+"chain")&&e.test(r+n(294))?Wn():r("0")}))()}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zn(){const n=["length","test","keys","mapping","5088240okmodx","gger","4920624ePsukF","environment","trace","Preset must be one of: ","Failed to load environment map: ","__proto__","init","constructor","info","return (function() ","warn","2874024BJdvCb","while (true) {}","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","log","isColor","bind","debu","28889694UMgEyw","string","stateObject","background","join","input","function *\\( *\\)","isArray","3sdjHwD","exception","7LnvZgy","2918540PSRvMY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","apply","917878HJnSgP","845285Hjpeld","value"];return(Zn=function(){return n})()}Hn(void 0,(function(){const n=Ln;let t;try{t=Function(n(280)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(285),n(281),n(279),n(302),n(298),"table",n(315)];for(let i=0;i<r[n(307)];i++){const t=Hn.constructor.prototype[n(287)](Hn),o=r[i],a=e[o]||t;t[n(318)]=Hn.bind(Hn),t.toString=a.toString[n(287)](a),e[o]=t}}))();const Gn=Un(284);function Wn(n){function t(n){const e=Ln;if(typeof n===e(290))return function(n){}.constructor(e(283)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(278)](e(288)+"gger").call("action"):function(){return!1}[e(278)](e(288)+e(312))[e(303)](e(291)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=Yn;!function(n,t){const e=Yn,r=Xn();for(;;)try{if(676253===parseInt(e(513))/1+-parseInt(e(466))/2+parseInt(e(504))/3*(-parseInt(e(467))/4)+parseInt(e(472))/5*(-parseInt(e(502))/6)+parseInt(e(493))/7*(-parseInt(e(487))/8)+parseInt(e(510))/9*(-parseInt(e(464))/10)+parseInt(e(470))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(516)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vn(this,(function(){const n=Yn,t=new RegExp(n(498)),e=new RegExp(n(501),"i"),r=Jn(n(511));t[n(495)](r+n(500))&&e.test(r+n(475))?Jn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(516)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Xn();return(Yn=function(n,t){return e[n-=457]})(n,t)}function Xn(){const n=["error","169227NEJvkR","init","environment","651778zRPHDk","console","frames","apply","background","trace","action","resolution","log","default","component","320SUzRkk","isArray","2029144aPmwZH","668604VajTGi","length","magFilter","43816751gBeOuB","info","5GJUdEf","minFilter","near","input","virtualScene","warn","generateMipmaps","bind","dispose","far","value","exception","$slots","counter","useDefaultScene","8147168pQxrbH","destructor","call","debu","type","__proto__","7gGteDS","toString","test","texture","stateObject","function *\\( *\\)",'{}.constructor("return this")( )',"chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2930682mcGvio","TresEnvSence","15Ilmsof","constructor","update","gger","prototype"];return(Xn=function(){return n})()}qn(void 0,(function(){const n=Yn,t=function(){const n=Yn;let t;try{t=Function("return (function() "+n(499)+");")()}catch(e){t=window}return t}(),e=t[n(514)]=t[n(514)]||{},r=[n(461),n(477),n(471),n(509),n(483),"table",n(458)];for(let o=0;o<r.length;o++){const t=qn[n(505)][n(508)][n(479)](qn),i=r[o],a=e[i]||t;t[n(492)]=qn[n(479)](qn),t[n(494)]=a[n(494)][n(479)](a),e[i]=t}}))();const Qn=nn({__name:$n(463),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=X(null),x=null;const b=X(null);tn((()=>{var n,t;const e=Yn;null==(n=b[e(482)])||n[e(488)](),null==(t=y.value)||t[e(480)]()}));const{onBeforeLoop:I}=V();let S=1;I((()=>{const n=Yn;x&&b[n(482)]&&y[n(482)]&&(i[n(515)]===1/0||S<i[n(515)])&&(i[n(486)]?x[n(506)](s.value,u[n(482)]):x.update(s[n(482)],un(b[n(482)][n(476)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Un,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=Y(n);Q(n,(()=>{o()}));const l=X(null),h=J((()=>Array[e(296)](c[e(306)]))),v=J((()=>h[e(306)]?f:q));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(307)]>0&&!(null==i?void 0:i[r(306)])){try{l.value=await $(v[r(306)],h[r(306)]?[...K(n)]:K(n),(n=>{t&&n.setPath(K(t))}))}catch(o){throw new Error(r(317)+o)}l[r(306)]&&(l[r(306)][r(310)]=h[r(306)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(306)]&&n&&(r[t(306)][t(314)]=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(306)]){let e=(null==t?void 0:t[i(306)])?t[i(306)].texture:o,a=r[i(306)][i(292)];!(null==a?void 0:a[i(286)])&&(a=void 0),r.value[i(292)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(306)]),(n=>{const t=e;r.value&&n&&(r[t(306)].backgroundBlurriness=n)}),{immediate:!0}),Q((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Fn){const e=Gn,i=Fn[n];try{l[t(306)]=await $(q,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(317)+r)}l[t(306)]&&l[t(306)]&&(l[t(306)][t(310)]=d),o()}else if(n&&!(n in Fn))throw new Error(t(316)+Object[t(309)](Fn)[t(293)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(482)][t(512)]=n[t(496)],i[t(457)]&&(u[t(482)][t(457)]=n.texture)):(u[t(482)][t(512)]=w.value,i.background&&(u.value[t(457)]=w[t(482)]))};Q(w,(n=>{y[Yn(482)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Dn});const R=()=>{var n;const t=Yn;null==(n=y[t(482)])||n.dispose(),y[t(482)]=new v(i[t(460)]),x=new m(i[t(474)],i[t(481)],y.value),i[t(486)]?(y.value[t(496)].type=g,y.value.texture[t(478)]=!1,y.value[t(496)][t(473)]=_,y[t(482)][t(496)][t(469)]=_):y[t(482)].texture[t(491)]=h,M(y[t(482)])};return Q((()=>rn()[e(462)]),(n=>{var t,r;const o=e;n&&(!y[o(482)]||y.value.texture[o(491)]!==h)&&(l=n(),Array[o(465)](l)&&l[o(468)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(491)]))?R():(null==(r=y[o(482)])||r[o(480)](),y[o(482)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(482)]=w,Q((()=>i[e(486)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return K(y)?(on(),an(r(503),{key:0,ref_key:"envSence",ref:b},[cn(n[r(484)],"default")],512)):sn("",!0)}}});function Jn(n){function t(n){const e=Yn;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(516)](e(485));1!==(""+n/n).length||n%20==0?function(){return!0}[e(505)](e(490)+e(507))[e(489)](e(459)):function(){return!1}.constructor(e(490)+e(507))[e(516)](e(497)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=rt;!function(n,t){const e=rt,r=tt();for(;;)try{if(243913===parseInt(e(268))/1*(-parseInt(e(258))/2)+parseInt(e(291))/3*(-parseInt(e(269))/4)+parseInt(e(272))/5*(parseInt(e(264))/6)+parseInt(e(284))/7+-parseInt(e(302))/8+parseInt(e(256))/9+-parseInt(e(286))/10*(-parseInt(e(262))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tt(){const n=["gger","6nhPrGR","log","debu","console","table","stateObject","exception","__proto__","TresPlaneGeometry","from","warn","2972888vptqjs","color","ring","set","multiplyScalar","875673GKYmnx","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","12086Debhyy","intensity","function *\\( *\\)","constructor","3152776XlwQSg","TresRingGeometry","21156ZojnSF","bind","counter","info","57jwVfXi","409804vIjyPg","prototype","toString","685jqPjdm","call","toneMapped","value","circle","apply","map","needsUpdate","rect","action","string","init","2085314JXitnv","chain","10lGEjPX","length","material","while (true) {}"];return(tt=function(){return n})()}!function(){nt(this,(function(){const n=rt,t=new RegExp(n(260)),e=new RegExp(n(257),"i"),r=ut(n(283));t.test(r+n(285))&&e.test(r+"input")?ut():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rt(n,t){const e=tt();return(rt=function(n,t){return e[n-=252]})(n,t)}et(void 0,(function(){const n=rt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(294)]=t.console||{},r=[n(292),n(301),n(267),"error",n(297),n(295),"trace"];for(let o=0;o<r[n(287)];o++){const t=et[n(261)][n(270)][n(265)](et),i=r[o],a=e[i]||t;t[n(298)]=et[n(265)](et),t[n(271)]=a.toString[n(265)](a),e[i]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[Kn(274),Kn(278),"side","color"],st=nn({__name:"index",props:{args:{default:null},from:{default:Kn(280)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=X();return ln((()=>{const n=rt;e[n(275)]&&(e.value[n(252)][n(255)](t.intensity),e[n(275)][n(279)]=!0)})),Q((()=>t.color),(n=>{const r=rt;e[r(275)]&&(e.value[r(252)][r(254)](n),e[r(275)].color[r(255)](t[r(259)]),e[r(275)].needsUpdate=!0)})),fn((()=>{})),(n,r)=>{const o=rt;return on(),an("TresMesh",null,[t[o(300)]===o(276)?(on(),an(o(263),ot)):t[o(300)]===o(253)?(on(),an(o(263),it)):t[o(300)]===o(280)?(on(),an(o(299),at)):(on(),pn(t[o(300)],{key:3,args:t})),dn("TresMeshBasicMaterial",{ref_key:o(288),ref:e,toneMapped:n[o(274)],map:n[o(278)],side:K(x),color:n[o(252)]},null,8,ct)])}}});function ut(n){function t(n){const e=rt;if(typeof n===e(282))return function(n){}[e(261)](e(289))[e(277)](e(266));1!==(""+n/n).length||n%20==0?function(){return!0}[e(261)](e(293)+"gger")[e(273)](e(281)):function(){return!1}.constructor(e(293)+e(290))[e(277)](e(296)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function lt(){const n=["dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1041800QyvsTR","return (function() ","bind","init","render","trace","format","test","width","string","292309DztHVN",'{}.constructor("return this")( )',"toString","gger","constructor","7689297VNRuuQ","4BeniVZ","value","call","apply","counter","warn","height","1448552abGzkv","debu","31732118ubjNoK","type","console","stateObject","__proto__","4072780eMKhsc","length","prototype","depthTexture","6yxPimF","while (true) {}","9iYMTGB","info","clear","chain","21LfImPr","599208VwvJSN","exception","setRenderTarget"];return(lt=function(){return n})()}!function(n,t){const e=dt,r=lt();for(;;)try{if(643672===-parseInt(e(209))/1*(-parseInt(e(215))/2)+parseInt(e(193))/3*(parseInt(e(194))/4)+parseInt(e(199))/5+-parseInt(e(233))/6*(-parseInt(e(214))/7)+-parseInt(e(222))/8*(-parseInt(e(235))/9)+parseInt(e(229))/10+-parseInt(e(224))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ft(this,(function(){const n=dt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(198),"i"),r=vt(n(202));t.test(r+n(192))&&e[n(206)](r+"input")?vt():r("0")}))()}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=lt();return(dt=function(n,t){return e[n-=191]})(n,t)}function ht(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=V(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=dt;null==(n=t[a(216)])||n[a(197)](),t[a(216)]=new b((null==r?void 0:r.value)||p[a(207)].value,(null==e?void 0:e[a(216)])||p[a(221)].value,c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(216)])),(null==i?void 0:i[a(216)])&&(t[a(216)].depthTexture=new S((null==r?void 0:r[a(216)])||p.width[a(216)],(null==e?void 0:e.value)||p[a(221)].value),t[a(216)][a(232)][a(205)]=w,t.value[a(232)][a(225)]=M)})),s((()=>{const n=dt;(null==a?void 0:a[n(216)])&&(l[n(216)][n(196)](un(t[n(216)])),l.value[n(191)](),l[n(216)][n(203)](un(f[n(216)]),un(u.value)),l.value[n(196)](null))})),mn((()=>{var n;const e=dt;null==(n=t[e(216)])||n[e(197)]()})),t}function vt(n){function t(n){const e=dt;if(typeof n===e(208))return function(n){}[e(213)](e(234))[e(218)](e(219));1!==(""+n/n).length||n%20==0?function(){return!0}[e(213)](e(223)+e(212))[e(217)]("action"):function(){return!1}[e(213)]("debugger").apply(e(227)),t(++n)}try{if(n)return t;t(0)}catch(e){}}pt(void 0,(function(){const n=dt;let t;try{t=Function(n(200)+n(210)+");")()}catch(o){t=window}const e=t[n(226)]=t[n(226)]||{},r=["log",n(220),n(236),"error",n(195),"table",n(204)];for(let i=0;i<r[n(230)];i++){const t=pt[n(213)][n(231)].bind(pt),o=r[i],a=e[o]||t;t[n(228)]=pt[n(201)](pt),t[n(211)]=a.toString.bind(a),e[o]=t}}))();const mt=xt;function gt(){const n=["call","apply","3678940zNckDi","string","texture","65058UWJzkY","toString","function *\\( *\\)","side","280846LZussm","toneMapping","debu","buffer","backside","119919VEuslT","value","action","19604709QqELDh","chain","return (function() ","trace","fboResolution","while (true) {}","envMapIntensity","exception","stateObject","backsideThickness","4681464gMnUph","table","240askiop","material","uuid",'{}.constructor("return this")( )',"setRenderTarget","6hvlqKM","log","isMesh","warn","constructor","console","index","MeshTransmissionMaterialClass","thickness","render","2285712gNLoRQ","error","length","bind","traverse","init","counter","background","test","info"];return(gt=function(){return n})()}!function(n,t){const e=xt,r=gt();for(;;)try{if(723503===-parseInt(e(389))/1+parseInt(e(384))/2+-parseInt(e(419))/3+-parseInt(e(402))/4+parseInt(e(377))/5*(parseInt(e(409))/6)+parseInt(e(380))/7*(-parseInt(e(404))/8)+parseInt(e(392))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(376)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=xt,t=new RegExp(n(382)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=St(n(370));t[n(373)](r+n(393))&&e[n(373)](r+"input")?St():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(376)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=gt();return(xt=function(n,t){return e[n-=367]})(n,t)}yt(void 0,(function(){const n=xt;let t;try{t=Function(n(394)+n(407)+");")()}catch(o){t=window}const e=t[n(414)]=t[n(414)]||{},r=[n(410),n(412),n(374),n(420),n(399),n(403),n(395)];for(let i=0;i<r.length;i++){const t=yt[n(413)].prototype[n(368)](yt),o=r[i],a=e[o]||t;t.__proto__=yt[n(368)](yt),t.toString=a[n(381)][n(368)](a),e[o]=t}}))();const bt=["buffer",mt(383)],It=nn({__name:mt(415),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=mt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new Sn,{onBeforeLoop:f}=V(),p=ht({width:u[e(396)],height:u[e(396)],isLoop:!1}),d=ht({width:u[e(396)],height:u[e(396)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(390)]=function(n,t){const e=xt;let r;return n[e(369)]((n=>{const o=e;n[o(411)]&&n.material&&n.material[o(406)]===t&&(r=n)})),r}(i[n(390)],r.value[n(406)])})),f((({elapsed:n})=>{const t=e;r[t(390)].time=n,r[t(390)][t(387)]===d[t(390)][t(379)]&&s[t(390)]&&(m=a[t(390)].toneMapping,h=i[t(390)][t(372)],v=r.value[t(398)],g=s[t(390)][t(405)][t(383)],s[t(390)].material=l,u[t(388)]&&(a[t(390)].setRenderTarget(p[t(390)]),a.value.render(i.value,c[t(390)]),s[t(390)][t(405)]=r.value,s[t(390)].material.thickness=u[t(401)],s[t(390)].material[t(387)]=p.value[t(379)],s[t(390)].material.side=R,s[t(390)][t(405)][t(398)]=0),a.value[t(408)](d[t(390)]),a[t(390)][t(418)](i[t(390)],c[t(390)]),s.value[t(405)][t(387)]=d[t(390)][t(379)],s[t(390)][t(405)]=r[t(390)],s[t(390)][t(405)][t(417)]=u[t(417)],s[t(390)][t(405)][t(383)]=g,s[t(390)][t(405)][t(398)]=v,i[t(390)].background=h,a.value.setRenderTarget(null),a[t(390)][t(385)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an("TresMeshTransmissionMaterial",{ref_key:o(416),ref:r,buffer:K(d)[o(379)],side:K(x)},null,8,bt)}}});function St(n){function t(n){const e=xt;if(typeof n===e(378))return function(n){}[e(413)](e(397))[e(376)](e(371));1!==(""+n/n)[e(367)]||n%20==0?function(){return!0}[e(413)](e(386)+"gger")[e(375)](e(391)):function(){return!1}[e(413)](e(386)+"gger")[e(376)](e(400)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const wt=Et;!function(n,t){const e=Et,r=At();for(;;)try{if(604640===parseInt(e(316))/1+-parseInt(e(297))/2+parseInt(e(324))/3*(-parseInt(e(301))/4)+parseInt(e(281))/5*(parseInt(e(292))/6)+parseInt(e(299))/7*(parseInt(e(317))/8)+-parseInt(e(280))/9+parseInt(e(300))/10*(parseInt(e(310))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Mt(this,(function(){const n=Et,t=new RegExp(n(304)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Dt(n(294));t.test(r+n(286))&&e[n(296)](r+n(277))?Dt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(318)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=At();return(Et=function(n,t){return e[n-=277]})(n,t)}function At(){const n=["identity","toString","709979IqgAZl","8ooHnIP","apply","while (true) {}","setFromObject",'{}.constructor("return this")( )',"stateObject","TresGroup","36ORgvev","console","top","table","length","bind","__proto__","front","counter","input","outer","error","7140573NJqtGT","1684495tyDekm","gger","call","default","left","chain","string","position","log","warn","max","12UBgIBQ","right","init","disableY","test","2263566hHmmUH","constructor","3615493lidOzx","96060DFCdvh","65524CXNFYe","getBoundingSphere","disable","function *\\( *\\)","trace","value","matrixWorld","action","min","946Dgfdyu","index","precise","debu"];return(At=function(){return n})()}Rt(void 0,(function(){const n=Et;let t;try{t=Function("return (function() "+n(321)+");")()}catch(o){t=window}const e=t[n(325)]=t.console||{},r=[n(289),n(290),"info",n(279),"exception",n(327),n(305)];for(let i=0;i<r[n(328)];i++){const t=Rt[n(298)].prototype.bind(Rt),o=r[i],a=e[o]||t;t[n(330)]=Rt[n(329)](Rt),t[n(315)]=a[n(315)].bind(a),e[o]=t}}))();const Tt=nn({__name:wt(311),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return fn((()=>{const n=Et;if(!r[n(306)])return;if(!o[n(306)])return;r[n(306)][n(307)][n(314)]();const e=(new E)[n(320)](o[n(306)],t[n(312)]),i=new A,a=new T,c=e[n(291)].x-e[n(309)].x,s=e[n(291)].y-e[n(309)].y,u=e.max.z-e[n(309)].z;e.getCenter(i),e[n(302)](a);const l=t[n(326)]?s/2:t.bottom?-s/2:0,f=t[n(285)]?-c/2:t[n(293)]?c/2:0,p=t[n(331)]?u/2:t.back?-u/2:0;r.value[n(288)].set(t[n(303)]||t.disableX?0:-i.x+f,t.disable||t[n(295)]?0:-i.y+l,t.disable||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Et;return on(),an(i(323),{ref_key:"gref",ref:e},[dn("TresGroup",{ref_key:i(278),ref:r},[dn(i(323),{ref_key:"inner",ref:o},[cn(n.$slots,i(284))],512)],512)],512)}}});function Dt(n){function t(n){const e=Et;if(typeof n===e(287))return function(n){}[e(298)](e(319))[e(318)](e(332));1!==(""+n/n)[e(328)]||n%20==0?function(){return!0}[e(298)]("debu"+e(282))[e(283)](e(308)):function(){return!1}[e(298)](e(313)+e(282))[e(318)](e(322)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Pt(){const n=["11123250kLHLLF","default","helper","input","scene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","448688eWGJAR","backside","warn","exception","group","prototype","length","table","color","test","gger","1877193hBaNzk","object","intensity","885544ADifvS","debu","trace","104881HQNmWe","counter","update","bind","__proto__","console","while (true) {}","worldRadius","string","resolution","set","48cDeCIv","lightSource","apply","params","init","3311379khvjPb","#ffffff","function *\\( *\\)","value","primitive","call","5cQKbiz","far","constructor","ior","chain","1007002HdyiQs","$slots","114AeIggP","11zWqeBv","toString","log","backsideIOR","Vector3","error","stateObject"];return(Pt=function(){return n})()}function zt(n,t){const e=Pt();return(zt=function(n,t){return e[n-=413]})(n,t)}const Ct=zt;!function(n,t){const e=zt,r=Pt();for(;;)try{if(808744===-parseInt(e(417))/1+parseInt(e(461))/2+-parseInt(e(450))/3+-parseInt(e(431))/4*(parseInt(e(456))/5)+parseInt(e(463))/6*(-parseInt(e(434))/7)+-parseInt(e(445))/8*(-parseInt(e(428))/9)+parseInt(e(471))/10*(parseInt(e(464))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=zt,t=new RegExp(n(452)),e=new RegExp(n(416),"i"),r=Ut(n(449));t[n(426)](r+n(460))&&e.test(r+n(414))?Ut():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ft(void 0,(function(){const n=zt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(439)]=t[n(439)]||{},r=[n(466),n(419),"info",n(469),n(420),n(424),n(433)];for(let o=0;o<r[n(423)];o++){const t=Ft[n(458)][n(422)][n(437)](Ft),i=r[o],a=e[i]||t;t[n(438)]=Ft[n(437)](Ft),t[n(465)]=a[n(465)].bind(a),e[i]=t}}))();const kt=[Ct(429)],Bt=[Ct(429)],jt=nn({__name:"index",props:{color:{default:Ct(451)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=W(),o=wn(r[t(453)],{frames:1/0,resolution:e[t(443)],worldRadius:e[t(441)]});o[t(448)][t(418)]=!0;const i=gn(null);Q(i,(n=>{n&&o[t(415)].add(n)}));const{onBeforeLoop:a}=V();return a((({elapsed:n})=>{o[t(436)]()})),ln((()=>{const n=t;e[n(425)]&&o[n(448)][n(425)][n(444)](e[n(425)]),e[n(459)]&&(o.params[n(459)]=e[n(459)]),e.backsideIOR&&(o[n(448)][n(467)]=e[n(467)]),e.far&&(o[n(448)][n(457)]=e[n(457)]),e[n(441)]&&(o[n(448)][n(441)]=e.worldRadius),e[n(430)]&&(o[n(448)][n(430)]=e[n(430)])})),Q((()=>e.causticsOnly),(n=>{o.params.causticsOnly=n})),Q((()=>e[t(446)]),(n=>{const e=t;n&&o[e(448)].lightSource instanceof D[e(468)]&&o[e(448)][e(446)][e(444)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn("TresGroup",{ref_key:"group",ref:i},[cn(n[r(462)],r(472))],512),dn(r(454),{object:K(o)[r(421)],position:[0,.003,0]},null,8,kt),dn(r(454),{object:K(o)[r(413)],visible:!1},null,8,Bt)],64)}}});function Ut(n){function t(n){const e=zt;if(typeof n===e(442))return function(n){}[e(458)](e(440))[e(447)](e(435));1!==(""+n/n)[e(423)]||n%20==0?function(){return!0}[e(458)](e(432)+e(427))[e(455)]("action"):function(){return!1}[e(458)](e(432)+e(427)).apply(e(470)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nt(n,t){const e=Ht();return(Nt=function(n,t){return e[n-=167]})(n,t)}!function(n,t){const e=Nt,r=Ht();for(;;)try{if(727574===-parseInt(e(171))/1+parseInt(e(170))/2+-parseInt(e(176))/3+parseInt(e(211))/4*(-parseInt(e(216))/5)+parseInt(e(196))/6+-parseInt(e(204))/7+parseInt(e(188))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["chain","properties","info","732116BXOoUd","437968stmolE","string","exception",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","call","1431036vHGsxn","__proto__","#ifdef USE_SHADOWMAP","replace","; i ++) {\n        offset = (vogelDiskSample(j, ","debu","ShaderChunk","console",'{}.constructor("return this")( )',"remove",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","bind","11499568YAzEtz","dispose",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","gger","#if defined( SHADOWMAP_TYPE_PCF )","counter","length","shadowmap_pars_fragment","4524582nKZWfq","init","compile","forEach",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","warn","constructor","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","2853039eHWQgD","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","isArray",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","material","apply","stateObject","124VUfrne","trace","prototype","traverse","action","81850DfeHJk","toString","test"];return(Ht=function(){return n})()}!function(){Lt(this,(function(){const n=Nt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wt(n(197));t[n(218)](r+n(167))&&e[n(218)](r+"input")?Wt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zt(void 0,(function(){const n=Nt,t=function(){const n=Nt;let t;try{t=Function("return (function() "+n(184)+");")()}catch(e){t=window}return t}(),e=t[n(183)]=t[n(183)]||{},r=["log",n(201),n(169),"error",n(173),"table",n(212)];for(let o=0;o<r[n(194)];o++){const t=Zt.constructor[n(213)][n(187)](Zt),i=r[o],a=e[i]||t;t[n(177)]=Zt[n(187)](Zt),t[n(217)]=a[n(217)][n(187)](a),e[i]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Nt,o=D[r(182)].shadowmap_pars_fragment;return D[r(182)][r(195)]=D[r(182)][r(195)][r(179)](r(178),r(203)+t+r(190)+n+r(207)+e+r(180)+e+r(200)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(186)+t+r(205)+e+r(174))[r(179)](r(192),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;D[i(182)][i(195)]=o,function(n,t,e){const r=Nt;t[r(214)]((t=>{const e=r;t.material&&(Array[e(206)](t.material)?t[e(208)][e(199)]((t=>{const r=e;n[r(168)][r(185)](t),t[r(189)]()})):(n[e(168)][e(185)](t[e(208)]),t[e(208)][e(189)]()))})),n.info.programs[r(194)]=0,n[r(198)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Nt;if(typeof n===e(172))return function(n){}[e(202)]("while (true) {}")[e(209)](e(193));1!==(""+n/n)[e(194)]||n%20==0?function(){return!0}[e(202)](e(181)+e(191))[e(175)](e(215)):function(){return!1}[e(202)]("debu"+e(191))[e(209)](e(210)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $t(n,t){const e=Yt();return($t=function(n,t){return e[n-=143]})(n,t)}!function(n,t){const e=$t,r=Yt();for(;;)try{if(357495===parseInt(e(170))/1+-parseInt(e(176))/2+-parseInt(e(155))/3+-parseInt(e(171))/4*(parseInt(e(148))/5)+parseInt(e(151))/6*(-parseInt(e(165))/7)+-parseInt(e(154))/8*(-parseInt(e(153))/9)+parseInt(e(174))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(161)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vt(this,(function(){const n=$t,t=new RegExp(n(173)),e=new RegExp(n(169),"i"),r=Qt("init");t.test(r+n(157))&&e[n(180)](r+n(172))?Qt():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(161)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(){const n=["toString","while (true) {}","test","gger","log","__proto__","length","action","value","debu","2965vQNImE","warn","error","2532ogWyOT","console","28089mkxXrv","888FfuRgf","903888hbFSGf","traverse","chain","constructor","material","counter","apply","info","prototype","table","357SPyioo","bind","dispose","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","507812vqnABW","296hXxthu","input","function *\\( *\\)","2630390SRTgRZ",'{}.constructor("return this")( )',"786174AMoBCI","return (function() "];return(Yt=function(){return n})()}qt(void 0,(function(){const n=$t,t=function(){const n=$t;let t;try{t=Function(n(177)+n(175)+");")()}catch(e){t=window}return t}(),e=t[n(152)]=t[n(152)]||{},r=[n(182),n(149),n(162),n(150),"exception",n(164),"trace"];for(let o=0;o<r[n(144)];o++){const t=qt.constructor[n(163)].bind(qt),i=r[o],a=e[i]||t;t[n(143)]=qt[n(166)](qt),t[n(178)]=a[n(178)][n(166)](a),e[i]=t}}))();const Xt=nn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=$t,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(146)],o[t(146)],e[t(146)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o.value[t(156)]((n=>{const e=t;n instanceof l&&n[e(159)][e(167)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=$t;if("string"==typeof n)return function(n){}[e(158)](e(179)).apply(e(160));1!==(""+n/n).length||n%20==0?function(){return!0}[e(158)](e(147)+e(181))[e(168)](e(145)):function(){return!1}[e(158)](e(147)+e(181)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Jt=re;!function(n,t){const e=re,r=ne();for(;;)try{if(487150===parseInt(e(229))/1+-parseInt(e(206))/2+-parseInt(e(194))/3+parseInt(e(205))/4+-parseInt(e(202))/5*(-parseInt(e(234))/6)+parseInt(e(197))/7+-parseInt(e(210))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(219)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(){const n=["bind","uniforms","copy","chain","multiplyScalar","counter","action","halfTexelSize","809774OpOEJB","trace","kernel","info","string","84rJzmBe","setTexelSize","prototype","replace","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <",">\n        }","value","stateObject","toString","set","1983024cxlPSW","length","input","2096836QMWTFa","encodings_fragment","init","call","texelSize","274565sGFqVn","test","constructor","3367576JZSFGt","1067768WtssOh","console","resolution","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","8303648oqNFdh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"gger","warn","__proto__","function *\\( *\\)","debu","while (true) {}","apply","log"];return(ne=function(){return n})()}!function(){Kt(this,(function(){const n=re,t=new RegExp(n(216)),e=new RegExp(n(211),"i"),r=ie(n(199));t[n(203)](r+n(224))&&e[n(203)](r+n(196))?ie():r("0")}))()}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(219)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();te(void 0,(function(){const n=re;let t;try{t=Function("return (function() "+n(212)+");")()}catch(o){t=window}const e=t[n(207)]=t[n(207)]||{},r=[n(220),n(214),n(232),"error","exception","table",n(230)];for(let i=0;i<r.length;i++){const t=te[n(204)][n(236)].bind(te),o=r[i],a=e[o]||t;t[n(215)]=te.bind(te),t[n(192)]=a[n(192)][n(221)](a),e[o]=t}}))();const ee=parseInt(F[Jt(237)](/\D+/g,""));function re(n,t){const e=ne();return(re=function(n,t){return e[n-=191]})(n,t)}class oe extends P{constructor(n=new C){const t=Jt;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(238)+(ee>=154?"colorspace_fragment":t(198))+t(239),vertexShader:t(209),blending:O,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(235)](n.x,n.y),this[t(231)]=new Float32Array([0,1,2,2,3])}[Jt(235)](n,t){const e=Jt;this.uniforms[e(201)][e(240)].set(n,t),this[e(222)][e(228)].value[e(193)](n,t)[e(225)](.5)}setResolution(n){const t=Jt;this[t(222)][t(208)][t(240)][t(223)](n)}}function ie(n){function t(n){const e=re;if(typeof n===e(233))return function(n){}[e(204)](e(218))[e(219)](e(226));1!==(""+n/n)[e(195)]||n%20==0?function(){return!0}[e(204)]("debu"+e(213))[e(200)](e(227)):function(){return!1}[e(204)](e(217)+e(213))[e(219)](e(191)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ae=le;!function(n,t){const e=le,r=se();for(;;)try{if(258161===parseInt(e(394))/1*(parseInt(e(369))/2)+parseInt(e(375))/3+-parseInt(e(432))/4+parseInt(e(395))/5+parseInt(e(392))/6*(-parseInt(e(405))/7)+parseInt(e(382))/8*(-parseInt(e(426))/9)+-parseInt(e(385))/10*(-parseInt(e(421))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(){const n=["setAttribute","test","470iwntIf","stateObject","camera","return (function() ","info","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3702VqPtef","debu","26DLnIey","720395aNvoUx","table","trace","gger","screen","uniforms","apply","USE_DEPTH","while (true) {}","minDepthThreshold","4144gVvFMX","position","depthToBlurRatioBias","__proto__","string","length","renderTargetA","action","log","call","render","constructor",'{}.constructor("return this")( )',"bind","prototype","depthScale","104071IUNYMb","inputBuffer","setTexelSize","defines","kernel","1197CvwprA","console","toString","counter","chain","renderTargetB","706824wCodkl","value","depthBuffer","3742YwJWTf","renderToScreen","function *\\( *\\)","scene","add","setResolution","1044024WaMAWI","frustumCulled","depthTexture","texture","convolutionMaterial","init","clone","11144gWYSPT"];return(se=function(){return n})()}!function(){ce(this,(function(){const n=le,t=new RegExp(n(371)),e=new RegExp(n(391),"i"),r=pe(n(380));t[n(384)](r+n(430))&&e[n(384)](r+"input")?pe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=se();return(le=function(n,t){return e[n-=367]})(n,t)}ue(void 0,(function(){const n=le,t=function(){const n=le;let t;try{t=Function(n(388)+n(417)+");")()}catch(e){t=window}return t}(),e=t[n(427)]=t[n(427)]||{},r=[n(413),"warn",n(389),"error",n(390),n(396),n(397)];for(let o=0;o<r[n(410)];o++){const t=ue[n(416)][n(419)].bind(ue),i=r[o],a=e[i]||t;t[n(408)]=ue.bind(ue),t[n(428)]=a.toString[n(418)](a),e[i]=t}}))();class fe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(370)]=!1,this[c(411)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(431)]=this[c(411)][c(381)](),this[c(379)]=new oe,this.convolutionMaterial[c(423)](1/t,1/e),this.convolutionMaterial[c(374)](new C(t,e)),this[c(372)]=new u,this[c(387)]=new k,this[c(379)].uniforms[c(404)].value=r,this[c(379)][c(400)].maxDepthThreshold[c(367)]=o,this[c(379)][c(400)][c(420)][c(367)]=i,this[c(379)][c(400)][c(407)][c(367)]=a,this.convolutionMaterial[c(424)][c(402)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(383)](c(406),new j(s,3)),p[c(383)]("uv",new j(f,2)),this[c(399)]=new l(p,this[c(379)]),this.screen[c(376)]=!1,this[c(372)][c(373)](this[c(399)])}[ae(415)](n,t,e){const r=ae,o=this[r(372)],i=this[r(387)],a=this[r(411)],c=this[r(431)],s=this[r(379)],u=s[r(400)];u[r(368)][r(367)]=t[r(377)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(410)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(425)].value=l[p],u.inputBuffer.value=h[r(378)],n.setRenderTarget(f),n.render(o,i),h=f;u[r(425)].value=l[p],u[r(422)][r(367)]=h[r(378)],n.setRenderTarget(this.renderToScreen?null:e),n[r(415)](o,i)}}function pe(n){function t(n){const e=le;if(typeof n===e(409))return function(n){}[e(416)](e(403))[e(401)](e(429));1!==(""+n/n)[e(410)]||n%20==0?function(){return!0}[e(416)](e(393)+e(398))[e(414)](e(412)):function(){return!1}[e(416)]("debu"+e(398)).apply(e(386)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var de=ve;!function(n,t){for(var e=ve,r=ge();;)try{if(922745===-parseInt(e(384))/1*(parseInt(e(377))/2)+-parseInt(e(376))/3+parseInt(e(332))/4*(-parseInt(e(375))/5)+-parseInt(e(378))/6*(-parseInt(e(331))/7)+parseInt(e(326))/8+-parseInt(e(334))/9+parseInt(e(360))/10*(parseInt(e(346))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var he=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ve(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ve(n,t){var e=ge();return(ve=function(n,t){return e[n-=306]})(n,t)}!function(){he(this,(function(){var n=ve,t=new RegExp(n(359)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ye(n(333));t[n(312)](r+n(381))&&e[n(312)](r+"input")?ye():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ve(371)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(){var n=["string","defines","875Rqruds","24dvgDMV","init","13088088dbWCpR","#include <project_vertex>","while (true) {}","fragmentShader","error","_tDiffuseBlur","_distortionMap","action","stateObject","minDepthThreshold","exception","_depthToBlurRatioBias","225247PhKEjo","_tDepth","mixBlur","onBeforeCompile","log","_depthScale","_blurStrength","setValues","distortionMap","hasBlur","_hasBlur","table","#include <emissivemap_fragment>","function *\\( *\\)","1410LPLFEX","debu","call","textureMatrix","info","_mixContrast","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","uniforms","depthToBlurRatioBias","mirror","__proto__","apply","tDepth","console","replace","606845IRCORi","3547365NKPqEP","1582010XyOXuA","75042rqEMpf","value","distortion","chain","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","return (function() ","2pEdyzc","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_textureMatrix","depthScale","gger","_tDiffuse","bind","toString","test","trace","_minDepthThreshold","maxDepthThreshold","tDiffuseBlur","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","mixContrast","_maxDepthThreshold","_mirror","constructor","tDiffuse","length","vertexShader","_distortion","11352192hsIarS","USE_UV","_mixBlur"];return(ge=function(){return n})()}me(void 0,(function(){for(var n=ve,t=function(){var n,t=ve;try{n=Function(t(383)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(373)]=t[n(373)]||{},r=[n(350),"warn",n(364),n(338),n(344),n(357),n(313)],o=0;o<r[n(323)];o++){var i=me[n(321)].prototype[n(310)](me),a=r[o],c=e[a]||i;i[n(370)]=me[n(310)](me),i[n(311)]=c.toString.bind(c),e[a]=i}}))();class _e extends U{constructor(n={}){var t=ve;super(n),this[t(347)]={value:null},this[t(340)]={value:null},this[t(309)]={value:null},this._tDiffuseBlur={value:null},this[t(306)]={value:null},this[t(356)]={value:!1},this[t(320)]={value:0},this[t(328)]={value:0},this[t(352)]={value:.5},this._minDepthThreshold={value:.9},this[t(319)]={value:1},this[t(351)]={value:0},this[t(345)]={value:.25},this[t(325)]={value:1},this[t(365)]={value:1},this[t(353)](n)}[de(349)](n){var t,e=de;!(null==(t=n[e(330)])?void 0:t[e(327)])&&(n[e(330)].USE_UV=""),n[e(367)][e(355)]=this[e(356)],n.uniforms.tDiffuse=this[e(309)],n[e(367)].tDepth=this[e(347)],n.uniforms[e(354)]=this[e(340)],n.uniforms[e(316)]=this._tDiffuseBlur,n[e(367)][e(363)]=this._textureMatrix,n[e(367)][e(369)]=this._mirror,n[e(367)][e(348)]=this[e(328)],n[e(367)].mixStrength=this[e(352)],n[e(367)].minDepthThreshold=this[e(314)],n[e(367)][e(315)]=this[e(319)],n[e(367)].depthScale=this._depthScale,n[e(367)][e(368)]=this[e(345)],n[e(367)][e(380)]=this[e(325)],n[e(367)].mixContrast=this[e(365)],n[e(324)]=e(385)+n[e(324)],n[e(324)]=n[e(324)][e(374)](e(335),e(317)),n[e(337)]=e(366)+n[e(337)],n[e(337)]=n[e(337)][e(374)](e(358),e(382))}get[de(322)](){return this[de(309)].value}set[de(322)](n){var t=de;this[t(309)][t(379)]=n}get[de(372)](){var n=de;return this[n(347)][n(379)]}set[de(372)](n){this[de(347)].value=n}get distortionMap(){var n=de;return this[n(340)][n(379)]}set[de(354)](n){var t=de;this[t(340)][t(379)]=n}get[de(316)](){return this[de(339)].value}set[de(316)](n){var t=de;this[t(339)][t(379)]=n}get[de(363)](){return this[de(306)].value}set[de(363)](n){var t=de;this[t(306)][t(379)]=n}get[de(355)](){var n=de;return this[n(356)][n(379)]}set[de(355)](n){var t=de;this[t(356)][t(379)]=n}get[de(369)](){return this._mirror.value}set[de(369)](n){this._mirror.value=n}get mixBlur(){var n=de;return this[n(328)][n(379)]}set[de(348)](n){this[de(328)].value=n}get mixStrength(){var n=de;return this._blurStrength[n(379)]}set mixStrength(n){var t=de;this[t(352)][t(379)]=n}get[de(343)](){var n=de;return this[n(314)][n(379)]}set minDepthThreshold(n){var t=de;this[t(314)][t(379)]=n}get maxDepthThreshold(){var n=de;return this[n(319)][n(379)]}set maxDepthThreshold(n){this[de(319)].value=n}get depthScale(){return this._depthScale.value}set[de(307)](n){var t=de;this[t(351)][t(379)]=n}get[de(368)](){var n=de;return this[n(345)][n(379)]}set depthToBlurRatioBias(n){var t=de;this._depthToBlurRatioBias[t(379)]=n}get[de(380)](){var n=de;return this[n(325)][n(379)]}set[de(380)](n){var t=de;this[t(325)][t(379)]=n}get mixContrast(){var n=de;return this[n(365)][n(379)]}set[de(318)](n){var t=de;this._mixContrast[t(379)]=n}}function ye(n){function t(n){var e=ve;if(typeof n===e(329))return function(n){}[e(321)](e(336)).apply("counter");1!==(""+n/n)[e(323)]||n%20==0?function(){return!0}[e(321)](e(361)+e(308))[e(362)](e(341)):function(){return!1}[e(321)](e(361)+e(308))[e(371)](e(342)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=Ie;!function(n,t){const e=Ie,r=we();for(;;)try{if(206585===parseInt(e(362))/1*(-parseInt(e(405))/2)+-parseInt(e(410))/3+-parseInt(e(400))/4+-parseInt(e(437))/5*(parseInt(e(361))/6)+-parseInt(e(385))/7+-parseInt(e(365))/8+parseInt(e(423))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(n,t){const e=we();return(Ie=function(n,t){return e[n-=342]})(n,t)}!function(){be(this,(function(){const n=Ie,t=new RegExp(n(429)),e=new RegExp(n(380),"i"),r=Ee("init");t.test(r+n(397))&&e[n(345)](r+n(343))?Ee():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ie(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(){const n=["setFromMatrixPosition","dot","setRenderTarget","reflect","mirror","10959498usJbJF","view","material","reflectorWorldPosition","gger","debu","function *\\( *\\)","console","defines-USE_BLUR","length","assign","textureMatrix","value","position","403255TccSvH","error","materialRef","TresMeshReflectorMaterial","normal","t-diffuse","input","counter","test","dispose","uuid","action","apply","max-depth-threshold","has-blur","clipPlane","matrixWorldInverse","extractRotation","add","isMesh","updateMatrixWorld","t-depth","applyMatrix4","matrixWorld","18jukjtL","1rdUuSh","reflectorOffset","copy","937216uTkcFJ","autoClear","toString","cameraWorldPosition","depth-scale","target",'{}.constructor("return this")( )',"__proto__","lookAtPosition","addScaledVector","sign","elements","call","info","enabled","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mix-strength","defines-USE_DISTORTION","return (function() ","string","323652PPTSGm","subVectors","table","shadowMap","reflectorPlane","clear","distortion","prototype","distortionMap","multiply","texture","defines-USE_DEPTH","chain","render","depthTexture","74988yKUOgK","traverse","depth-to-blur-ratio-bias","while (true) {}","exception","825590Jujjzg","virtualCamera","bind","min-depth-threshold","set","522762wQyAtj","trace","projectionMatrix","constructor","visible","negate","autoUpdate","rotationMatrix"];return(we=function(){return n})()}Se(void 0,(function(){const n=Ie;let t;try{t=Function(n(383)+n(371)+");")()}catch(o){t=window}const e=t.console=t[n(430)]||{},r=["log","warn",n(378),n(438),n(404),n(387),n(411)];for(let i=0;i<r[n(432)];i++){const t=Se[n(413)][n(392)][n(407)](Se),o=r[i],a=e[o]||t;t[n(372)]=Se.bind(Se),t[n(367)]=a[n(367)][n(407)](a),e[o]=t}}))();const Me=["texture-matrix",xe(422),xe(342),xe(358),"t-diffuse-blur",xe(351),xe(381),xe(408),xe(350),xe(369),xe(402),xe(391),xe(393),"mix-contrast","defines-USE_BLUR",xe(396),xe(382)],Re=nn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=xe,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:R,extend:E}=W();E({MeshReflectorMaterial:_e});const T=gn(),D=gn(),P=gn(),z=gn(),C=J((()=>{const n=Ie;return"number"==typeof f[n(435)]?[f[n(435)],f.value]:f[n(435)]})),O=J((()=>C[r(435)][0]>0||C[r(435)][1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};ln((()=>{var n;const o=r;null==(n=T[o(435)])||n[o(395)][o(346)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T.value=new b(i[o(435)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i[o(435)],w,M)},t(y,e(x)))),D[o(435)]=new b(i[o(435)],i[o(435)],f),P.value=new fe({resolution:i[o(435)],width:C[o(435)][0],height:C[o(435)][1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l.value}),z[o(435)]={mirror:p,textureMatrix:F[o(434)],mixBlur:d,tDiffuse:T.value[o(395)],tDepth:T.value.depthTexture,tDiffuseBlur:T[o(435)].texture,hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":O[o(435)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(435)]?"":void 0}}));const k=gn(),{onLoop:B}=V();B((()=>{var n;const t=r;if(!(k[t(435)]&&R.value&&T[t(435)]&&y[t(435)]))return;const e=function(n,t){const e=Ie;let r;return n[e(401)]((n=>{const o=e;n[o(356)]&&n[o(425)]&&n[o(425)][o(347)]===t&&(r=n)})),r}(x[t(435)],k[t(435)][t(347)]);if(!e)return;e[t(414)]=!1;const i=R[t(435)].xr[t(379)],a=R[t(435)][t(388)][t(416)];(function(n){var t,e;const r=Ie;if(F[r(426)][r(418)](n.matrixWorld),F[r(368)][r(418)](null==(t=y[r(435)])?void 0:t.matrixWorld),F.rotationMatrix[r(354)](n.matrixWorld),F[r(441)][r(409)](0,0,1),F[r(441)][r(359)](F.rotationMatrix),F[r(426)][r(374)](F.normal,o[r(363)]),F[r(424)][r(386)](F.reflectorWorldPosition,F[r(368)]),F[r(424)][r(419)](F[r(441)])>0)return;F[r(424)][r(421)](F[r(441)])[r(415)](),F[r(424)][r(355)](F[r(426)]),F.rotationMatrix[r(354)](null==(e=y[r(435)])?void 0:e[r(360)]),F[r(373)].set(0,0,-1),F[r(373)][r(359)](F[r(417)]),F.lookAtPosition[r(355)](F.cameraWorldPosition),F.target.subVectors(F[r(426)],F.lookAtPosition),F[r(370)].reflect(F.normal).negate(),F[r(370)][r(355)](F.reflectorWorldPosition),F.virtualCamera[r(436)].copy(F[r(424)]),F[r(406)].up[r(409)](0,1,0),F[r(406)].up[r(359)](F[r(417)]),F[r(406)].up.reflect(F[r(441)]),F[r(406)].lookAt(F[r(370)]),F.virtualCamera.far=(null==y?void 0:y[r(435)]).far,F[r(406)][r(357)](),F.virtualCamera[r(412)][r(364)]((null==y?void 0:y[r(435)])[r(412)]),F[r(434)][r(409)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(434)].multiply(F[r(406)][r(412)]),F[r(434)][r(394)](F.virtualCamera[r(353)]),F[r(434)][r(394)](n[r(360)]),F[r(389)].setFromNormalAndCoplanarPoint(F[r(441)],F[r(426)]),F[r(389)][r(359)](F[r(406)][r(353)]),F.clipPlane[r(409)](F[r(389)].normal.x,F[r(389)].normal.y,F[r(389)][r(441)].z,F[r(389)].constant);const i=F[r(406)][r(412)];F.q.x=(Math[r(375)](F.clipPlane.x)+i[r(376)][8])/i.elements[0],F.q.y=(Math.sign(F[r(352)].y)+i[r(376)][9])/i[r(376)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i.elements[14],F[r(352)].multiplyScalar(2/F[r(352)].dot(F.q)),i.elements[2]=F[r(352)].x,i[r(376)][6]=F[r(352)].y,i[r(376)][10]=F[r(352)].z+1,i[r(376)][14]=F[r(352)].w})(e),R[t(435)][t(388)][t(416)]=!1,R.value[t(420)](T[t(435)]),R[t(435)][t(366)]||R[t(435)][t(390)](),R[t(435)][t(398)](x[t(435)],F[t(406)]),null==(n=null==P?void 0:P.value)||n[t(398)](R.value,T.value,D[t(435)]),R[t(435)].xr[t(379)]=i,R[t(435)].shadowMap[t(416)]=a,e.visible=!0,R[t(435)][t(420)](null)}));const j=xn(),U=J((()=>{const n=r,t={};return Object[n(433)](t,o),Object[n(433)](t,j[n(435)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(435)])||n[e(346)](),null==(t=null==D?void 0:D[e(435)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(440),bn({key:"key"+z.value[c(431)]+z[c(435)][c(396)]+z[c(435)][c(382)],ref_key:c(439),ref:k},U.value,{"texture-matrix":F[c(434)],mirror:K(p),"t-diffuse":null==(e=T[c(435)])?void 0:e.texture,"t-depth":null==(o=T.value)?void 0:o[c(399)],"t-diffuse-blur":null==(i=D[c(435)])?void 0:i[c(395)],"has-blur":O[c(435)],"mix-strength":K(v),"min-depth-threshold":K(a),"max-depth-threshold":K(s),"depth-scale":K(u),"depth-to-blur-ratio-bias":K(l),distortion:K(m),distortionMap:K(g),"mix-contrast":K(_),"defines-USE_BLUR":O[c(435)]?"":void 0,"defines-USE_DEPTH":K(u)>0?"":void 0,"defines-USE_DISTORTION":K(g)?"":void 0}),null,16,Me)}}});function Ee(n){function t(n){const e=Ie;if(typeof n===e(384))return function(n){}[e(413)](e(403))[e(349)](e(344));1!==(""+n/n)[e(432)]||n%20==0?function(){return!0}.constructor("debu"+e(427))[e(377)](e(348)):function(){return!1}[e(413)](e(428)+e(427))[e(349)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Pe,r=De();for(;;)try{if(306129===-parseInt(e(363))/1+parseInt(e(353))/2+-parseInt(e(378))/3*(-parseInt(e(375))/4)+-parseInt(e(370))/5+-parseInt(e(391))/6+parseInt(e(374))/7+parseInt(e(361))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ae(this,(function(){const n=Pe,t=new RegExp(n(354)),e=new RegExp(n(382),"i"),r=ze(n(379));t.test(r+n(385))&&e[n(369)](r+"input")?ze():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(){const n=["fog",'{}.constructor("return this")( )',"value","texture","test","548540QYZhmO","gger","error","type","2179996iiboHa","18212mWboNh","action","__proto__","75CouCAY","init","info","background","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","bind","chain","update","debu","while (true) {}","constructor","dispose","614340EPxUtm","978030tgOEoZ","function *\\( *\\)","apply","toString","console","call","prototype","table","1510072MrBkgr","length","584800wltGNq","warn"];return(De=function(){return n})()}function Pe(n,t){const e=De();return(Pe=function(n,t){return e[n-=353]})(n,t)}function ze(n){function t(n){const e=Pe;if("string"==typeof n)return function(n){}[e(389)](e(388))[e(355)]("counter");1!==(""+n/n)[e(362)]||n%20==0?function(){return!0}[e(389)](e(387)+e(371))[e(358)](e(376)):function(){return!1}[e(389)](e(387)+e(371))[e(355)](e(383)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ce(n,t){const e=je();return(Ce=function(n,t){return e[n-=367]})(n,t)}Te(void 0,(function(){const n=Pe;let t;try{t=Function("return (function() "+n(366)+");")()}catch(o){t=window}const e=t.console=t[n(357)]||{},r=["log",n(364),n(380),n(372),"exception",n(360),"trace"];for(let i=0;i<r[n(362)];i++){const t=Te[n(389)][n(359)][n(384)](Te),o=r[i],a=e[o]||t;t[n(377)]=Te[n(384)](Te),t[n(356)]=a[n(356)].bind(a),e[o]=t}}))();const Oe=Ce;!function(n,t){const e=Ce,r=je();for(;;)try{if(502504===parseInt(e(369))/1+parseInt(e(408))/2+parseInt(e(409))/3+parseInt(e(388))/4*(-parseInt(e(368))/5)+-parseInt(e(392))/6*(-parseInt(e(398))/7)+parseInt(e(372))/8*(-parseInt(e(400))/9)+-parseInt(e(373))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=Ce,t=new RegExp(n(389)),e=new RegExp(n(382),"i"),r=Ne(n(385));t.test(r+n(375))&&e[n(401)](r+n(376))?Ne():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ke(void 0,(function(){const n=Ce,t=function(){const n=Ce;let t;try{t=Function(n(387)+n(395)+");")()}catch(e){t=window}return t}(),e=t[n(411)]=t.console||{},r=[n(393),n(370),n(383),n(394),"exception",n(374),n(413)];for(let o=0;o<r[n(386)];o++){const t=ke[n(371)][n(367)][n(415)](ke),i=r[o],a=e[i]||t;t[n(396)]=ke[n(415)](ke),t[n(403)]=a[n(403)][n(415)](a),e[i]=t}}))();const Be=[Oe(399)];function je(){const n=["TresGroup","stateObject","2496NEQeCn","log","error",'{}.constructor("return this")( )',"__proto__","frames","16387LkCQno","object","9ntgItV","test","gger","toString","envMap","call","resolution","apply","1902942AgaVaw","2005734ASRrvs","rgRef","console","index","trace","counter","bind","prototype","3293695XxcWYY","363248mDxMPQ","warn","constructor","1293528dOKrFL","16342190nvfKGe","table","chain","input","string","$slots","value","near","visible","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","debu","init","length","return (function() ","4CzjhAH","function *\\( *\\)"];return(je=function(){return n})()}const Ue=nn({__name:Oe(412),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Oe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return Q((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(367)])||t[e(390)](),c[e(367)]=new v(n[e(367)]),c[e(367)][e(368)][e(373)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{e&&(f.value=new m(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Pe;null==(n=c[t(367)])||n[t(390)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a[t(367)].fog,d=a[t(367)].background,a[t(367)][t(381)]=r||d,a[t(367)][t(365)]=o||p,null==(n=f[t(367)])||n[t(386)](i.value,a[t(367)]),a.value.fog=p,a.value[t(381)]=d}}}({resolution:o[r(406)],near:o[r(380)],far:o.far,envMap:o[r(404)],fog:o.fog}),{onBeforeLoop:s}=V();let u=0;const l=X(null);return s((()=>{const n=r;l[n(379)]&&(o.frames===1/0||u<o[n(397)])&&(l[n(379)][n(381)]=!1,c(),l[n(379)][n(381)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return on(),an(e(390),null,[dn("primitive",{object:K(a)},null,8,Be),dn(e(390),{ref_key:e(410),ref:l},[cn(n[e(378)],"default")],512)])}}});function Ne(n){function t(n){const e=Ce;if(typeof n===e(377))return function(n){}[e(371)]("while (true) {}")[e(407)](e(414));1!==(""+n/n).length||n%20==0?function(){return!0}[e(371)](e(384)+e(402))[e(405)]("action"):function(){return!1}[e(371)]("debu"+e(402))[e(407)](e(391)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=Ze();for(;;)try{if(330233===parseInt(e(371))/1*(parseInt(e(359))/2)+parseInt(e(344))/3*(-parseInt(e(367))/4)+-parseInt(e(361))/5+-parseInt(e(360))/6+parseInt(e(353))/7*(-parseInt(e(366))/8)+parseInt(e(342))/9*(parseInt(e(364))/10)+parseInt(e(369))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Le(this,(function(){const n=We,t=new RegExp(n(370)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$e(n(337));t[n(352)](r+n(351))&&e[n(352)](r+n(335))?$e():r("0")}))()}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(){const n=["9sWVycj","log","453glBFRz","string","gger",'{}.constructor("return this")( )',"trace","counter","ShaderMaterial","chain","test","124698ZJRtMk","prototype","uniforms","value","key","table","16quSFhx","1733664QzWZqD","2648140NpqWyN","apply","forEach","187440tuYqLY","while (true) {}","168nTFPOE","12908BGlAIp","info","19664744cSUdCz","function *\\( *\\)","25466tymATL","MathUtils","UniformsUtils","stateObject","bind","console","warn","debu","defineProperty","exception","clone","input","toString","init","entries","constructor","call","reduce"];return(Ze=function(){return n})()}function Ge(n,t,e,r){const o=We,i=class extends D[o(350)]{constructor(i={}){const a=o,s=Object[a(338)](n);super({uniforms:s[a(341)](((n,[t,e])=>{const r=a,o=D[r(373)][r(334)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(357)]="",s[a(363)]((([n])=>Object[a(332)](this,n,{get:()=>this[a(355)][n][a(356)],set:t=>this.uniforms[n][a(356)]=t}))),Object.assign(this,i),r&&r(this)}};return i[o(357)]=D[o(372)].generateUUID(),i}function We(n,t){const e=Ze();return(We=function(n,t){return e[n-=332]})(n,t)}function $e(n){function t(n){const e=We;if(typeof n===e(345))return function(n){}[e(339)](e(365))[e(362)](e(349));1!==(""+n/n).length||n%20==0?function(){return!0}[e(339)]("debu"+e(346))[e(340)]("action"):function(){return!1}.constructor(e(378)+"gger")[e(362)](e(374)),t(++n)}try{if(n)return t;t(0)}catch(e){}}He(void 0,(function(){const n=We,t=function(){const n=We;let t;try{t=Function("return (function() "+n(347)+");")()}catch(e){t=window}return t}(),e=t[n(376)]=t.console||{},r=[n(343),n(377),n(368),"error",n(333),n(358),n(348)];for(let o=0;o<r.length;o++){const t=He[n(339)][n(354)][n(375)](He),i=r[o],a=e[i]||t;t.__proto__=He[n(375)](He),t[n(336)]=a[n(336)][n(375)](a),e[i]=t}}))();var Ve=Tr;!function(n,t){for(var e=Tr,r=cr();;)try{if(198258===-parseInt(e(431))/1+parseInt(e(526))/2*(parseInt(e(467))/3)+parseInt(e(508))/4+parseInt(e(428))/5+-parseInt(e(489))/6+parseInt(e(483))/7*(-parseInt(e(491))/8)+-parseInt(e(480))/9*(-parseInt(e(451))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=Tr,t=new RegExp(n(383)),e=new RegExp(n(517),"i"),r=Dr(n(460));t[n(411)](r+n(441))&&e[n(411)](r+n(544))?Dr():r("0")}))()}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tr(568)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n){var t=Tr,e=function(n,t){var e=Tr;if(typeof n!==e(390)||null===n)return n;var r=n[Symbol[e(565)]];if(void 0!==r){var o=r[e(528)](n,t||"default");if(typeof o!==e(390))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,t(492));return typeof e===t(400)?e:String(e)}function Qe(n,t,e){return(t=Xe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=Tr,r=Object[e(413)](n);if(Object[e(519)]){var o=Object[e(519)](n);t&&(o=o[e(494)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(481)]}))),r[e(522)].apply(r,o)}return r}function Ke(n){for(var t=Tr,e=1;e<arguments[t(479)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0)[t(421)]((function(t){Qe(n,t,r[t])})):Object[t(401)]?Object.defineProperties(n,Object[t(401)](r)):Je(Object(r))[t(421)]((function(e){var o=t;Object[o(470)](n,e,Object[o(486)](r,e))}))}return n}function nr(n,t){var e=Tr;if(null==n)return{};var r,o,i=function(n,t){var e=Tr;if(null==n)return{};var r,o,i={},a=Object[e(413)](n);for(o=0;o<a[e(479)];o++)r=a[o],t[e(535)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(519)]){var a=Object[e(519)](n);for(o=0;o<a[e(479)];o++)r=a[o],t[e(535)](r)>=0||Object[e(521)][e(416)][e(528)](n,r)&&(i[r]=n[r])}return i}function tr(n,t){var e=Tr;(null==t||t>n[e(479)])&&(t=n[e(479)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function er(n,t){return function(n){if(Array[Tr(571)](n))return n}(n)||function(n,t){var e=Tr,r=null==n?null:e(500)!=typeof Symbol&&n[Symbol[e(466)]]||n[e(446)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(528)](n))[e(554)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(528)](r))[e(556)])&&(s[e(522)](o[e(465)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(512)]&&(c=r[e(512)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Tr;if(n){if(typeof n===e(492))return tr(n,t);var r=Object[e(521)][e(455)][e(528)](n).slice(8,-1);return r===e(469)&&n.constructor&&(r=n.constructor[e(539)]),r===e(561)||r===e(452)?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(411)](r)?tr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(n,t){for(var e=Tr,r=0;r<t[e(479)];r++){var o=t[r];o.enumerable=o[e(481)]||!1,o[e(487)]=!0,e(465)in o&&(o[e(531)]=!0),Object[e(470)](n,Xe(o[e(562)]),o)}}function or(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ir(n,t){var e=Tr;return(ir=Object[e(493)]?Object[e(493)][e(557)]():function(n,t){return n[e(515)]=t,n})(n,t)}function ar(n){var t=Tr;return(ar=Object[t(493)]?Object[t(394)].bind():function(n){var e=t;return n[e(515)]||Object[e(394)](n)})(n)}function cr(){var n=["\n    gl_Position = ","message","length","94086xcAqCZ","enumerable","Material","5936TQiXSU","exception","diffuse","getOwnPropertyDescriptor","configurable","update","1350546MbHPaF","RawShaderMaterial","2576bkjTar","string","setPrototypeOf","filter","_getCacheHash","\n    \n","entries","gger","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","undefined","MeshPhongMaterial","is not a constructor","csm_FragColor","\n    #include <dithering_fragment>\n    gl_FragColor  = ","customProgramCacheKey","MeshPhysicalMaterial",'" is required to use output "',"750880MsRDFH","\n    vec4 csm_internal_positionUnprojected = ","Cannot call a class as a function","needsUpdate","return","log","console","__proto__","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Super expression must either be null or a function","getOwnPropertySymbols","\n            ","prototype","push","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","MeshToonMaterial","while (true) {}","356266smNEBH","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","call","ShadowMaterial","function","writable","\n    vec3 totalEmissiveRadiance = ","csm_Position","csm_ClearcoatNormal","indexOf","csm_Bump","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","name","substring","MeshBasicMaterial","_getMaterialDefine","table","input","_getPatchMapForMaterial",'{}.constructor("return this")( )',"cacheHash","instanceID","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","MeshDepthMaterial","baseMaterial","onBeforeCompile","\n    varying mat4 csm_internal_vModelViewMatrix;\n","next","isAlreadyExtended","done","bind","void main()","\\$&","roughness","Map","key","// #_CSM_#","generateUUID","toPrimitive","clearcoat",";\n    ","apply","fragmentShader","__csm","isArray","MeshNormalMaterial","pointSize","PointsMaterial","action","csm_Emissive","replace","csm_main_","emissive","\n    #include <color_fragment>\n    diffuseColor = ","MathUtils","function *\\( *\\)","csm_Roughness","Derived constructors may only return object or undefined","metalness","void main() {","sham","toUpperCase","object","create","csm_DiffuseColor","join","getPrototypeOf","clearcoatNormal","depthAlpha","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","error","vertexShader","symbol","getOwnPropertyDescriptors","#define IS_VERTEX;\n","positionRaw","normal",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","clone","warn","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","trim","\n    vec3 objectNormal = ","test",";\n  ","keys","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","MeshStandardMaterial","propertyIsEnumerable","MeshMatcapMaterial","material.clearcoat = ","#define IS_UNKNOWN;\n","patchMap","forEach","fragColor","CustomShaderMaterial does not support RawShaderMaterial"," );\n    ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","bump","1044390dCOjXN","stateObject","type","160584lcfbqt","_generateMaterial","silent","valueOf","cacheKey","();\n              // #_CSM_#\n          ","CSM: ","clearcoatRoughness","#define IS_","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","chain","lastIndexOf","lights_physical_fragment","get","constructor","@@iterator","csm_Normal","debu","concat"," - (dot(","270XdTllU","Set",'". Shader cannot compile.',"csm_PositionRaw","toString","includes",'CSM: Property "',"csm_AO","uniforms","init",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","position","info","MeshLambertMaterial","value","iterator","3LFxWyh","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","Object","defineProperty","ShaderMaterial","assign","\n    gl_FragColor = ","material.clearcoatRoughness = ","construct","_patchShader"];return(cr=function(){return n})()}function sr(n){var t=function(){var n=Tr;if(typeof Reflect===n(500)||!Reflect.construct)return!1;if(Reflect[n(475)][n(388)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean[n(521)][n(434)].call(Reflect[n(475)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Tr,o=ar(n);if(t){var i=ar(this)[r(445)];e=Reflect.construct(o,arguments,i)}else e=o[r(568)](this,arguments);return function(n,t){var e=Tr;if(t&&(typeof t===e(390)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(385));return or(n)}(this,e)}}Ye(void 0,(function(){var n,t=Tr;try{n=Function(t(516)+t(546)+");")()}catch(s){n=window}for(var e=n[t(514)]=n[t(514)]||{},r=[t(513),t(407),t(463),"error",t(484),t(543),"trace"],o=0;o<r[t(479)];o++){var i=Ye.constructor[t(521)][t(557)](Ye),a=r[o],c=e[a]||i;i[t(515)]=Ye.bind(Ye),i.toString=c.toString.bind(c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:Ve(392),normal:Ve(447),roughness:Ve(384),metalness:"csm_Metalness",emissive:Ve(377),ao:Ve(458),bump:Ve(536),clearcoat:"csm_Clearcoat",clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Ve(534),pointSize:"csm_PointSize",fragColor:Ve(503),depthAlpha:"csm_DepthAlpha",position:Ve(533),positionRaw:Ve(454)},dr=(Qe(ur={},""[Ve(449)](pr[Ve(462)]),"*"),Qe(ur,""[Ve(449)](pr[Ve(403)]),"*"),Qe(ur,""[Ve(449)](pr[Ve(404)]),"*"),Qe(ur,""[Ve(449)](pr[Ve(573)]),[Ve(375)]),Qe(ur,"".concat(pr[Ve(485)]),"*"),Qe(ur,""[Ve(449)](pr[Ve(422)]),"*"),Qe(ur,""[Ve(449)](pr.emissive),[Ve(415),Ve(506)]),Qe(ur,"".concat(pr[Ve(560)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),Qe(ur,""[Ve(449)](pr[Ve(386)]),[Ve(415),Ve(506)]),Qe(ur,""[Ve(449)](pr.ao),[Ve(415),Ve(506),Ve(541),Ve(464),"MeshPhongMaterial",Ve(524)]),Qe(ur,""[Ve(449)](pr[Ve(427)]),[Ve(464),Ve(417),Ve(572),Ve(501),Ve(506),Ve(415),"MeshToonMaterial",Ve(529)]),Qe(ur,""[Ve(449)](pr[Ve(396)]),[Ve(550)]),Qe(ur,""[Ve(449)](pr[Ve(566)]),[Ve(506)]),Qe(ur,""[Ve(449)](pr.clearcoatRoughness),[Ve(506)]),Qe(ur,""[Ve(449)](pr[Ve(395)]),[Ve(506)]),ur),hr={"#include <lights_physical_fragment>":G[Ve(443)]},vr=(Qe(lr={},""[Ve(449)](pr[Ve(404)]),{"#include <beginnormal_vertex>":Ve(410)[Ve(449)](pr[Ve(404)],Ve(461))}),Qe(lr,""[Ve(449)](pr.position),{"#include <begin_vertex>":"\n    vec3 transformed = "[Ve(449)](pr[Ve(462)],Ve(412))}),Qe(lr,""[Ve(449)](pr[Ve(403)]),{"#include <begin_vertex>":Ve(509)[Ve(449)](pr[Ve(403)],Ve(405))}),Qe(lr,""[Ve(449)](pr[Ve(573)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Ve(449)](pr.pointSize,Ve(567))}),Qe(lr,""[Ve(449)](pr[Ve(485)]),{"#include <color_fragment>":Ve(381)[Ve(449)](pr[Ve(485)],Ve(412))}),Qe(lr,""[Ve(449)](pr.fragColor),{"#include <dithering_fragment>":Ve(504)[Ve(449)](pr[Ve(422)],Ve(412))}),Qe(lr,"".concat(pr[Ve(380)]),{"vec3 totalEmissiveRadiance = emissive;":Ve(532)[Ve(449)](pr[Ve(380)],";\n    ")}),Qe(lr,""[Ve(449)](pr[Ve(560)]),{"#include <roughnessmap_fragment>":Ve(538)[Ve(449)](pr[Ve(560)],Ve(567))}),Qe(lr,"".concat(pr[Ve(386)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Ve(449)](pr[Ve(386)],Ve(567))}),Qe(lr,""[Ve(449)](pr.ao),{"#include <aomap_fragment>":Ve(414)[Ve(449)](pr.ao,Ve(567))}),Qe(lr,""[Ve(449)](pr[Ve(427)]),{"#include <normal_fragment_maps>":Ve(523).concat(pr[Ve(427)],Ve(450)).concat(pr[Ve(427)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),Qe(lr,""[Ve(449)](pr[Ve(396)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ve(397)[Ve(449)](pr[Ve(396)],Ve(424)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ve(425)[Ve(449)](pr[Ve(396)],Ve(567))}),Qe(lr,""[Ve(449)](pr.clearcoat),{"material.clearcoat = clearcoat;":Ve(418)[Ve(449)](pr[Ve(566)],";")}),Qe(lr,""[Ve(449)](pr[Ve(438)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ve(474)[Ve(449)](pr.clearcoatRoughness,";")}),Qe(lr,"".concat(pr[Ve(395)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),lr),mr=(Qe(fr={},"".concat(pr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Ve(449)](pr[Ve(462)],", 1.0 );\n  ")}),Qe(fr,"".concat(pr[Ve(403)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ve(477)[Ve(449)](pr[Ve(462)],Ve(412))}),Qe(fr,""[Ve(449)](pr[Ve(485)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ve(473)[Ve(449)](pr.diffuse,Ve(412))}),Qe(fr,""[Ve(449)](pr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ve(473)[Ve(449)](pr[Ve(422)],Ve(412))}),fr),gr={clearcoat:[pr[Ve(566)],pr.clearcoatNormal,pr[Ve(438)]]},_r=Ve(537),yr=Ve(440),xr=Ve(468),br=Ve(553),Ir=Ve(496),Sr=[Ve(551),Ve(569),"vertexShader","uniforms",Ve(420),Ve(435),Ve(433)],wr=function(n,t,e){var r=Ve;return n.split(t)[r(393)](e)},Mr=function(n,t){var e,r,o=Ve;return new RegExp("\\b".concat((e=t,r=Ve,e[r(378)](/[-\/\\^$*+?.()|[\]{}]/g,r(559))),"\\b"))[o(411)](n)};function Rr(n){return n?n[Ve(378)](/\s/g,""):void 0}function Er(n){return n[Ve(378)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Ar=function(n){var t=Ve;!function(n,t){var e=Tr;if(typeof t!==e(530)&&null!==t)throw new TypeError(e(518));n[e(521)]=Object[e(391)](t&&t[e(521)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(470)](n,e(521),{writable:!1}),t&&ir(n,t)}(a,n);var e,r,o,i=sr(a);function a(n){var t,e,r,o,c,s=Tr,u=n[s(551)],l=n[s(569)],f=n[s(399)],p=n[s(459)],d=n.patchMap,h=n[s(435)],v=n.silent,m=nr(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Tr(510))}(this,a),!function(n){var t=Ve;try{new n}catch(e){if(e[t(478)][t(535)](t(502))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(430)]===s(490))throw new Error(s(423));(function(n,t){var e=Ve;e(479),Object[e(472)](n,t);var r=Object[e(394)](t);Object.entries(Object[e(401)](r)).filter((function(n){var t=e,r="function"==typeof n[1][t(444)],o=typeof n[1].set===t(530),i="function"==typeof n[1].value,a=n[0]===t(445);return(r||o||i)&&!a}))[e(421)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(470)](n,t[0],t[1])}))})(or(t=i[s(528)](this)),e),t[s(570)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(382)][s(564)](),type:e[s(430)],isAlreadyExtended:(r=e.onBeforeCompile,o=Ve,c=r[o(455)]()[o(409)](),!(0===c[o(540)](c[o(535)]("{")+1,c[o(442)]("}")).trim().length)),cacheHash:"",silent:v},t.uniforms=Ke(Ke({},t[s(459)]||{}),p||{});var g=t[s(570)],_=g[s(569)],y=g[s(399)],x=t[s(459)];return t[s(570)][s(547)]=t[s(495)](),t._generateMaterial(_,y,x),t}return e=a,r=[{key:t(488),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(459)]||this[n(459)],Object[n(472)](this[n(570)],e);var r=this.__csm,o=r[n(569)],i=r[n(399)],a=this[n(459)],c=this._getCacheHash();this[n(570)][n(547)]=c,this[n(432)](o,i,a)}},{key:t(406),value:function(){var n=t,e={baseMaterial:this[n(570)].baseMaterial,fragmentShader:this.__csm[n(569)],vertexShader:this.__csm[n(399)],uniforms:this[n(459)],silent:this[n(570)].silent,patchMap:this[n(570)][n(420)],cacheKey:this[n(570)][n(435)]},r=new(this[n(445)])(e);return Object[n(472)](this,r),r}},{key:t(495),value:function(){var n=t,e=this[n(570)],r=e[n(569)],o=e[n(399)],i=this[n(459)],a=[Rr(r),Rr(o),i].filter((function(n){return void 0!==n}));return a.length>0?Mn(a,{excludeValues:!0}):this[n(505)]()}},{key:t(432),value:function(n,e,r){var o=t,i=this;this[o(459)]=r||{},this[o(505)]=function(){var n=o;return i[n(570)][n(547)]};var a=function(t){var r=o;try{var a=i[r(542)]();if(n){var c=i._patchShader(Er(n),t[r(569)],!0);t.fragmentShader=a+c}if(e){var s=i[r(476)](Er(e),t.vertexShader);t[r(399)]=r(402)+s,t[r(399)]=a+t[r(399)]}t[r(459)]=Ke(Ke({},t[r(459)]),i[r(459)]),i[r(459)]=t[r(459)]}catch(u){console[r(398)](u)}};if(this[o(570)][o(555)]){var c=this.onBeforeCompile;this[o(552)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(511)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=Ke(Ke({},this[o(545)]()),this[o(570)][o(420)]);Object[o(497)](gr).forEach((function(t){var e=o,r=er(t,2),a=r[0],c=r[1].find((function(t){return Mr(n,t)}));if(c&&!i[a])throw new Error(e(457).concat(a,e(507)).concat(c,e(453)))})),Object[o(497)](hr)[o(421)]((function(n){var t=er(n,2),e=t[0],r=t[1];a=wr(a,e,r)})),Object[o(413)](c)[o(421)]((function(t){var e=o;Object[e(413)](c[t])[e(421)]((function(r){var o=e,s=dr[t],u=i.__csm[o(430)];if("*"===t||Mr(n,t)){if(!(!s||Array[o(571)](s)&&s.includes(u)||"*"===s))throw new Error(o(437)[o(449)](t," is not available in ")[o(449)](u,". Shader cannot compile."));a=wr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(379)+this[o(570)][o(548)][o(378)](/-/g,"_"),h=n[o(378)](/void\s+main\s*\(\s*\)/g,"void ".concat(d,"()")),v=n[o(456)](o(558)),m=a.includes(o(563));return v&&(m&&this[o(570)].isAlreadyExtended?(a=a[o(378)]("void main() {",o(520)[o(449)](h,"\n            \n            void main() {\n          ")),s=a,u=o(563),l="\n            "[o(449)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Ve)(442)](u),a=-1===p?s:s[f(540)](0,p)+l+s[f(540)](p+u[f(479)])):a=a[o(378)](o(387),o(426)[o(449)](r?br:"\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(549))[o(449)](_r,"\n    \n            ")[o(449)](h,o(408))[o(449)](yr,o(499))[o(449)](r?Ir:xr,o(527))[o(449)](d,o(436)))),a}},{key:t(542),value:function(){var n=t,e=this[n(570)][n(430)];return e?n(439).concat(e[n(389)](),";\n"):n(419)}},{key:t(545),value:function(){var n=t;return this.__csm[n(430)]===n(471)?mr:vr}}],r&&rr(e[Tr(521)],r),o&&rr(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(D[Ve(482)]);function Tr(n,t){var e=cr();return(Tr=function(n,t){return e[n-=375]})(n,t)}function Dr(n){function t(n){var e=Tr;if(typeof n===e(492))return function(n){}[e(445)](e(525)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(445)](e(448)+e(498))[e(528)](e(376)):function(){return!1}[e(445)](e(448)+e(498))[e(568)](e(429)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Fr;!function(n,t){const e=Fr,r=jr();for(;;)try{if(743374===-parseInt(e(464))/1+parseInt(e(495))/2*(parseInt(e(474))/3)+-parseInt(e(500))/4+parseInt(e(467))/5*(-parseInt(e(469))/6)+-parseInt(e(462))/7*(parseInt(e(476))/8)+parseInt(e(493))/9*(parseInt(e(489))/10)+-parseInt(e(471))/11*(-parseInt(e(482))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zr(this,(function(){const n=Fr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(477),"i"),r=Br("init");t.test(r+n(492))&&e[n(473)](r+n(481))?Br():r("0")}))()}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Cr(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function(n(470)+n(483)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(505),"warn",n(503),n(497),n(491),n(468),"trace"];for(let o=0;o<r[n(485)];o++){const t=Cr[n(502)][n(480)][n(508)](Cr),i=r[o],a=e[i]||t;t[n(498)]=Cr[n(508)](Cr),t.toString=a[n(486)][n(508)](a),e[i]=t}}))();const Or=[Pr(504)];function Fr(n,t){const e=jr();return(Fr=function(n,t){return e[n-=462]})(n,t)}const kr=nn({__name:Pr(466),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(472)],metalness:e.metalness,roughness:e[t(487)],clearcoat:e[t(496)],clearcoatRoughness:e[t(494)],color:e.color,vertexShader:t(475),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(463)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Ar(r);return ln((()=>{const n=t;o.color.setStyle(e.color),o[n(501)]=e[n(501)],o.roughness=e[n(487)],o.clearcoat=e.clearcoat,o[n(494)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(507),{object:K(o)},null,8,Or)}}});function Br(n){function t(n){const e=Fr;if(typeof n===e(478))return function(n){}[e(502)](e(484))[e(506)](e(488));1!==(""+n/n)[e(485)]||n%20==0?function(){return!0}.constructor(e(499)+e(490))[e(479)]("action"):function(){return!1}[e(502)]("debu"+e(490))[e(506)](e(465)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function jr(){const n=["106vWBrIT","clearcoat","error","__proto__","debu","5585384pPEXmv","metalness","constructor","info","object","log","apply","primitive","bind","28osxzqT","\n      ","1065871nnmbek","stateObject","index","13705kBhAbG","table","2058gANTPm","return (function() ","77QGCbLN","MeshPhysicalMaterial","test","73110TPXPIl","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","1264096uFrfRk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","call","prototype","input","5379108Samkcb",'{}.constructor("return this")( )',"while (true) {}","length","toString","roughness","counter","3483790uzTjhZ","gger","exception","chain","9EYnHvx","clearcoatRoughness"];return(jr=function(){return n})()}!function(n,t){for(var e=Nr,r=Hr();;)try{if(578508===parseInt(e(356))/1*(-parseInt(e(383))/2)+-parseInt(e(352))/3+-parseInt(e(354))/4*(-parseInt(e(365))/5)+parseInt(e(368))/6+-parseInt(e(350))/7+-parseInt(e(375))/8+parseInt(e(358))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(357)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(n,t){var e=Hr();return(Nr=function(n,t){return e[n-=348]})(n,t)}!function(){Ur(this,(function(){var n=Nr,t=new RegExp(n(378)),e=new RegExp(n(370),"i"),r=Zr(n(374));t[n(372)](r+n(349))&&e[n(372)](r+n(379))?Zr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(357)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["warn","214285dzmDtn","apply","9555516yLSmlM","prototype","gger","constructor","call","info","while (true) {}","1224855fQQaso","log","error","6679506UgwwFv","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","test","string","init","2145264hzwkVN","exception","length","function *\\( *\\)","input","stateObject","trace","bind","4HHPiJd","console","action","chain","5788216uqRNvW","debu","3158205tMfDDK","toString","16bDXLuc"];return(Hr=function(){return n})()}function Zr(n){function t(n){var e=Nr;if(typeof n===e(373))return function(n){}.constructor(e(364))[e(357)]("counter");1!==(""+n/n)[e(377)]||n%20==0?function(){return!0}[e(361)](e(351)+"gger")[e(362)](e(348)):function(){return!1}.constructor(e(351)+e(360))[e(357)](e(380)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){var n,t=Nr;try{n=Function(t(369)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(384)]=n[t(384)]||{},r=[t(366),t(355),t(363),t(367),t(376),"table",t(381)],o=0;o<r[t(377)];o++){var i=Lr[t(361)][t(359)].bind(Lr),a=r[o],c=e[a]||i;i[t(371)]=Lr[t(382)](Lr),i[t(353)]=c[t(353)][t(382)](c),e[a]=i}}))();export{Ge as C,kr as _,Qn as a,st as b,It as c,Tt as d,jt as e,Xt as f,Ue as g,Re as h,ht as u};

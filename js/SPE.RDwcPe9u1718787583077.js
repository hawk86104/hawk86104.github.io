import{N as t,ci as e,a5 as i,bG as n,j as s,V as o,C as r,T as a,b as c}from"./three.OZpCYxlY1718787583077.js";const h=p;!function(t,e){const i=p,n=f();for(;;)try{if(367727===-parseInt(i(516))/1+parseInt(i(298))/2*(parseInt(i(378))/3)+-parseInt(i(470))/4*(-parseInt(i(187))/5)+-parseInt(i(389))/6+-parseInt(i(257))/7*(parseInt(i(339))/8)+-parseInt(i(235))/9*(-parseInt(i(359))/10)+-parseInt(i(191))/11*(-parseInt(i(366))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[p(297)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){u(this,(function(){const t=p,e=new RegExp(t(390)),i=new RegExp(t(243),"i"),n=g(t(247));e[t(561)](n+t(552))&&i[t(561)](n+"input")?g():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function f(){const t=["needsUpdate","_calculatePPSValue","   return params.w;","_assignPositionValue","pop","interpolateArray","    vec3 outgoingLight = vColor.xyz;","   vec3 c = vec3( 0.0 );","        float framesX = vSpriteSheet.x;","fixedTimeStep","float or(float a, float b) {","bind","TypedArrayHelper","center","log","wiggle",'{}.constructor("return this")( )',"exception","ShaderChunk","  return 1.0 - when_gt(x, y);","randomise","length","Will not resize.","amd","info","function","velocity","utils","updateCounts","getHex","ensureArrayInstanceOf","_checkParticleAges","uniforms","fragment","particleCount","    float pointSizePerspective = pointSize * perspective;","spe","resetDynamic","keys","        float wiggleAmount = positionInTime * getWiggle();","usage","    vec3 vel = getVelocity( age );","floatOverLifetime","Emitter already belongs to another group. Will not add to requested group.","      vec3 center = rotationCenter;","radius","depthTest","releaseIntoPool","position","addEmitter","        pos.z += wiggleSin;","    pos += force;","    #ifdef COLORIZE","enable","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","rotation","#endif","BOX","copy","_assignForceValue","BufferGeometry","    return max(sign(x - y), 0.0);","Group","attributeOffset","valueOverLifetimeLength","grow","addPool","ensureTypedArg","_triggerSingleEmitter","    #ifdef SHOULD_ROTATE_TEXTURE","       float s = sin(angle);","        float wiggleCos = isAlive * cos( wiggleAmount );","_onRemove","      if( rotation.y == 0.0 ) {","axis","5dgMTqA","_static","updateRange","alive","11ajHPSD","_decrementParticleCount","_assignAbsLifetimeValue","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","    highp float alive = getAlive();","updateMap","dynamicBuffer","REVISION","_attributesNeedRefresh","axisSpread","_assignParamsValue","join","setVec4","        float wiggleSin = isAlive * sin( wiggleAmount );","    highp float age = getAge();","getPackedRotationAxis","_spread","tick","setRGB","setVec4Components","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","attributeEnd","uniform float runTime;","activationEnd","error","alphaTest","particlesPerSecond","        float rowNorm = vSpriteSheet.w;","arrayType","multiplyScalar","       vec3 c = isAlive * getColorOverLifetime(","           unpackColor( color.w )","lerpTypeAgnostic","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","fog_vertex","    #endif","_angleSpread","           positionInTime,","#define PACKED_COLOR_SIZE 256.0","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","subarray","fog_pars_vertex","    #ifdef SHOULD_CALCULATE_SPRITE","18pPPybo","_value","isStatic","_spreadClamp","   }","push","_createBufferAttribute","vec3 getVelocity( in float age ) {","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","itemSize","           return pos;","size","init","        float column = floor(mod( frameNumber, framesX ));","componentSize","stateObject","_createNewWhenPoolEmpty","_attributesNeedDynamicReset","clone","reset","distribution","array","3235099AsZufx","                   0.0,                                0.0,                                0.0,                                1.0);","clamp","maxParticleCount","    vec3 value = vec3( 0.0 );","updateMin","branchAvoidanceFunctions","    force *= drag;","    highp float maxAge = getMaxAge();","transparent","attribute vec4 opacity;","emitters","    vec3 pos = vec3( position );","SHOULD_ROTATE_TEXTURE","resetFlags","rotationCenter","forceUpdateAll","elements","randomColorAsHex","duration","boolean","randomFloat","return (function() ","splice","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","defines","SPE.Group: maxParticleCount exceeded. Requesting","triggerPoolEmitter","      mat4 rotationMatrix;","bufferAttribute","Vector4","TypedArrayConstructor","      vec3 translated;","maxAge","vec3 unpackRotationAxis( in float hex ) {","set","loop","           unpackColor( color.y ),","random","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","apply","898ZciFJn","attribute vec4 size;","ensureArrayTypedArg","SHOULD_WIGGLE_PARTICLES","POSITIVE_INFINITY","SHOULD_ROTATE_PARTICLES","   c.b = b / PACKED_COLOR_DIVISOR;","        vSpriteSheet.z = columnNorm;","        float columnNorm = column / framesX;","_poolCreationSettings","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","constructor","_pool","defineProperty","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","MathUtils","attributeKeys","AdditiveBlending","sin","    return 1.0 - abs( sign( x - y ) );","ensureInstanceOf","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","logdepthbuf_vertex","    return value;","StaticDrawUsage","getFromPool","material","    #ifdef SHOULD_WIGGLE_PARTICLES","SPE.Group pool ran out.","emitterIDs","_incrementParticleCount","setMat3","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","   return params.z;","rotationFunctions","_updateAttributeUpdateRange","offset","   return modelViewMatrix * vec4( position, 1.0 );","float when_ge(float x, float y) {","vec4 getPosition( in float age ) {","activeParticleCount","8PyAADY","gger","_createGetterSetters","undefined","BufferAttribute","setVec3Components","   c -= vec3( 1.0 );","float and(float a, float b) {","   return velocity * age;","       vec3 c = vec3(1.0);","flagUpdate","hasPerspective","void main() {","typedArray","updateMax","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","OBJECT","action","float getAlive() {","_updateDefines","16310KjHvIB","shaderChunks","deltaTime","__proto__","_assignValue","shaders","bufferUpdateCount","15235548vFHaly","exports","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","uniform sampler2D tex;","   return c;","attributeCount","   c.r = r / PACKED_COLOR_DIVISOR;","setVec2","normalize","activationIndex","        pos.y += wiggleCos;","setMat4","1128fcpXUF","randomDirectionVector3OnDisc","geometry","_activateParticles","ensureValueOverLifetimeCompliance","types","    force += vel;","fog_pars_fragment","params","spreadClamp","    vec4 rotatedTexture = texture2D( tex, vUv );","2137260xjgJjN","function *\\( *\\)","attribute vec4 angle;","object","replace","        float framesX = textureAnimation.x;","textureFrames","NEGATIVE_INFINITY","activeMultiplier","age","_resetBufferRanges","shrink","    #else","randomVector3OnSphere","_resetParticle","        pos = getRotation( pos, positionInTime );","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","isArray","group","setFromArray","    highp float value = 0.0;","cos","disable","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","_assignRotationValue","resetUpdateRange","console","logdepthbuf_pars_vertex","generateUUID","remove","arrayValuesAreEqual","angleSpread","radiusScale","roundToNearestMultiple","floor","randomVector3","_rotationCenter","_radius","        float perspective = 1.0;","   return acceleration.xyz * age;","    #ifdef ALPHATEST","uniform vec4 textureAnimation;","Color","setUpdateRange","vec3 getAcceleration( in float age ) {","max","   c.g = g / PACKED_COLOR_DIVISOR;","        float loopCount = textureAnimation.w;","varying vec4 vColor;","SPHERE","_angle","bufferUpdateRanges","colorize","   c *= vec3( 2.0 );","   return params.y;","uuid","_ensureTypedArray","hasOwnProperty","      float angle = 0.0;","direction","angle","trace","ShaderMaterial","indexOffset","runTime","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","randomDirectionVector3OnSphere","        float perspective = scale / length( mvPosition.xyz );","_assignColorValue","_radiusScale","    vec3 accel = getAcceleration( age );","           unpackColor( color.x ),","frames","    float fIndex = 0.0;","attributes","drag","        float framesY = textureAnimation.y;","       float y = 1.0 - gl_PointCoord.y - 0.5;","round","lerp","while (true) {}","409268lEkkPs","    vColor = vec4( c, o );","   float b = mod( hex, PACKED_COLOR_SIZE );","Vector2","uniform float scale;","_updateUniforms","#ifdef SHOULD_CALCULATE_SPRITE","_assignAngleValue","paramsArray","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","updateFlags","float when_le(float x, float y) {","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","opacity","        float columnNorm = vSpriteSheet.z;","       if ( vColor.w < float(ALPHATEST) ) discard;","randomVector3OnDisc","abs","Argument is not instanceof SPE.Emitter:","count","Invalid argument types, or argument types do not match:","           unpackColor( color.z ),","       float c = cos( -vAngle );","attribute vec4 color;","vec3 unpackColor( in float hex ) {","_distribution","spread","SHOULD_CALCULATE_SPRITE","call","min","indexOf","  return 1.0 - when_lt(x, y);","blending","LINE","float getMaxAge() {","setAttribute","mesh","sqrt","_axisSpread","   return params.x;","static","attribute vec4 rotation;","removeEmitter","distributions","ceil","paramFetchingFunctions","357938KkxAlz","        float totalFrames = textureAnimation.z;","`emitter` argument must be instance of SPE.Emitter. Was provided with:","typeSizeMap","number","rotateTexture","        vSpriteSheet.w = rowNorm;","texture","_updateBuffers","    highp float positionInTime = (age / maxAge);","type","       axis = normalize(axis);","table","NUMBER","warn","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","Emitter already exists in this group. Will not add again.","setSize","float when_lt(float x, float y) {","_setBufferUpdateRanges","setVec3","getValueAtIndex","textureLoop","_setAttributeOffset","attribute vec4 acceleration;","    float shouldApplyValue = 0.0;","toString","color","common","    force += accel * age;","Emitter","logdepthbuf_pars_fragment","fog_fragment","Vector3","    vec3 force = vec3( 0.0 );","scale","chain","randomVector3OnLine","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","BOOLEAN","float getAge() {","acceleration","fog","string","#ifdef SHOULD_ROTATE_TEXTURE","test","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","dispose","float when_gt(float x, float y) {","        pos.x += wiggleSin;","logdepthbuf_fragment","debu","depthWrite","ShaderAttribute","_applyAttributesToGeometry","       float c = cos(angle);","value","prototype","      translated = rotationCenter - pos;"];return(f=function(){return t})()}function p(t,e){const i=f();return(p=function(t,e){return i[t-=142]})(t,e)}l(void 0,(function(){const t=p,e=function(){const t=p;let e;try{e=Function(t(279)+t(591)+");")()}catch(i){e=window}return e}(),i=e.console=e[t(415)]||{},n=[t(589),t(530),t(599),t(216),t(592),t(528),t(450)];for(let s=0;s<n[t(596)];s++){const e=l[t(309)][t(573)][t(586)](l),o=n[s],r=i[o]||e;e[t(362)]=l[t(586)](l),e[t(542)]=r[t(542)].bind(r),i[o]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===h(600)&&define[h(598)]?define(h(148),d):typeof exports!==h(342)&&"undefined"!=typeof module&&(module[h(367)]=d),d[h(587)]=function(t,e,i,n){const s=h;this[s(249)]=i||1,this[s(246)]=e||1,this[s(288)]=t||Float32Array,this.array=new t(e*this[s(249)]),this[s(452)]=n||0},d[h(587)][h(309)]=d[h(587)],d[h(587)][h(573)][h(533)]=function(t,e){const i=h,n=this[i(256)][i(596)];return!e&&(t*=this[i(249)]),t<n?this[i(400)](t):t>n?this.grow(t):void console[i(599)]("TypedArray is already of size:",t+".",i(597))},d[h(587)][h(573)].shrink=function(t){const e=h;return this[e(256)]=this[e(256)][e(232)](0,t),this[e(246)]=t,this},d[h(587)].prototype[h(177)]=function(t){const e=h,i=this[e(256)],n=new(this[e(288)])(t);return n[e(292)](i),this.array=n,this[e(246)]=t,this},d[h(587)].prototype.splice=function(t,e){const i=h;t*=this[i(249)],e*=this[i(249)];const n=[],s=this[i(256)],o=s[i(596)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(240)](s[r]);return this[i(408)](0,n),this},d[h(587)][h(573)][h(408)]=function(t,e){const i=h,n=t+e[i(596)];return n>this.array[i(596)]?this[i(177)](n):n<this.array[i(596)]&&this[i(400)](n),this.array[i(292)](e,this[i(452)]+t),this},d[h(587)][h(573)][h(373)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},d[h(587)][h(573)].setVec2Components=function(t,e,i){const n=this[h(256)],s=this.indexOffset+t*this.componentSize;return n[s]=e,n[s+1]=i,this},d[h(587)][h(573)][h(536)]=function(t,e){return this[h(344)](t,e.x,e.y,e.z)},d[h(587)][h(573)][h(344)]=function(t,e,i,n){const s=h,o=this[s(256)],r=this[s(452)]+t*this[s(249)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},d[h(587)].prototype[h(203)]=function(t,e){return this[h(210)](t,e.x,e.y,e.z,e.w)},d[h(587)][h(573)][h(210)]=function(t,e,i,n,s){const o=h,r=this[o(256)],a=this[o(452)]+t*this[o(249)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},d[h(587)][h(573)][h(329)]=function(t,e){const i=h;return this[i(408)](this[i(452)]+t*this[i(249)],e[i(274)])},d[h(587)][h(573)][h(377)]=function(t,e){const i=h;return this.setFromArray(this[i(452)]+t*this.componentSize,e.elements)},d[h(587)][h(573)].setColor=function(t,e){return this[h(344)](t,e.r,e.g,e.b)},d[h(587)][h(573)].setNumber=function(t,e){const i=h;return this[i(256)][this.indexOffset+t*this[i(249)]]=e,this},d[h(587)][h(573)][h(537)]=function(t){const e=h;return this.array[this[e(452)]+t]},d[h(587)].prototype.getComponentValueAtIndex=function(t){const e=h;return this.array[e(232)](this[e(452)]+t*this.componentSize)},d.ShaderAttribute=function(t,e,i){const n=h,s=d[n(569)][n(519)];this.type=typeof t===n(559)&&s[n(446)](t)?t:"f",this.componentSize=s[this[n(526)]],this[n(220)]=i||Float32Array,this[n(352)]=null,this.bufferAttribute=null,this[n(197)]=!!e,this[n(262)]=0,this[n(353)]=0},d[h(569)][h(309)]=d[h(569)],d[h(569)][h(519)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d[h(569)][h(573)].setUpdateRange=function(t,e){const i=h;this[i(262)]=Math[i(499)](t*this[i(249)],this.updateMin*this[i(249)]),this[i(353)]=Math.max(e*this.componentSize,this[i(353)]*this[i(249)])},d.ShaderAttribute[h(573)][h(349)]=function(){const t=h,e=this[t(286)],i=e.updateRange;i[t(334)]=this[t(262)],i[t(489)]=Math[t(499)](this[t(353)]-this.updateMin+this[t(249)],this[t(352)][t(256)][t(596)]),e[t(575)]=!0},d[h(569)][h(573)].resetUpdateRange=function(){const t=h;this[t(262)]=0,this[t(353)]=0},d[h(569)][h(573)][h(149)]=function(){const i=h;this[i(286)][i(152)]=this.dynamicBuffer?t:e},d[h(569)][h(573)][h(280)]=function(t,e){const i=h;this[i(352)][i(280)](t,e),this[i(273)]()},d[h(569)][h(573)][h(273)]=function(){const t=h;this[t(286)][t(256)]=this[t(352)].array,this[t(286)][t(189)][t(334)]=0,this[t(286)][t(189)][t(489)]=-1,this[t(286)][t(152)]=e,this[t(286)].needsUpdate=!0},d[h(569)][h(573)][h(445)]=function(t){const e=h;null!==this[e(352)]&&this[e(352)][e(246)]===t*this.componentSize||(null!==this[e(352)]&&this[e(352)][e(246)]!==t?this.typedArray[e(533)](t):null===this[e(352)]&&(this[e(352)]=new d.TypedArrayHelper(this[e(220)],t,this.componentSize)))},d[h(569)][h(573)]._createBufferAttribute=function(e){const n=h;if(this[n(445)](e),null!==this[n(286)])return this[n(286)][n(256)]=this[n(352)][n(256)],parseFloat(i[n(198)])>=81&&(this[n(286)][n(489)]=this.bufferAttribute.array[n(596)]/this[n(286)][n(244)]),void(this[n(286)][n(575)]=!0);this[n(286)]=new(i[n(343)])(this[n(352)][n(256)],this[n(249)]),this[n(286)][n(152)]=this.dynamicBuffer?t:i[n(322)]},d.ShaderAttribute[h(573)].getLength=function(){const t=h;return null===this.typedArray?0:this.typedArray.array[t(596)]},d[h(360)]={defines:[h(230),"#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),uniforms:["uniform float deltaTime;",h(214),h(369),h(430),h(474)].join("\n"),attributes:[h(540),"attribute vec3 velocity;",h(511),"attribute vec3 rotationCenter;","attribute vec4 params;",h(299),h(391),h(493),h(267)].join("\n"),varyings:[h(437),h(560),"    varying float vAngle;","#endif",h(476),"    varying vec4 vSpriteSheet;",h(168)][h(202)]("\n"),branchAvoidanceFunctions:[h(564),h(173),"}",h(534),h(479),"}","float when_eq( float x, float y ) {",h(317),"}",h(336),h(501),"}",h(481),h(594),"}",h(346),"    return a * b;","}",h(585),"    return min(a + b, 1.0);","}"][h(202)]("\n"),unpackColor:[h(494),h(582),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(231),h(472),h(372),h(435),h(304),"   return c;","}"][h(202)]("\n"),unpackRotationAxis:[h(291),h(582),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(472),h(372),h(435),h(304),h(442),h(345),h(370),"}"][h(202)]("\n"),floatOverLifetime:[h(554),h(409),h(312),h(462),h(541),h(225),"",h(308),"       fIndex = float( i );",h(330),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","","    return value;","}"][h(202)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",h(261),h(281),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",h(321),"}"][h(202)]("\n"),paramFetchingFunctions:[h(357),h(509),"}",h(556),h(443),"}",h(504),h(331),"}","float getWiggle() {",h(577),"}"].join("\n"),forceFetchingFunctions:[h(337),h(335),"}",h(242),h(347),"}",h(433),h(428),"}"][h(202)]("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",h(562),h(527),h(182),h(571),"       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",h(194),h(258),"   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",h(185),h(245),"      }","","      vec3 axis = unpackRotationAxis( rotation.x );",h(156),h(289),h(285),h(447),"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",h(368),h(574),"      rotationMatrix = getRotationMatrix( axis, angle );",h(212),h(239),"#endif"][h(202)]("\n"),rotateTexture:[h(405),"",h(181),"       float x = gl_PointCoord.x - 0.5;",h(466),h(492),"       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",h(227),"",h(234),h(583),"        float framesY = vSpriteSheet.y;",h(484),h(219),h(166),h(412),h(227),"",h(388)][h(202)]("\n")},d[h(364)]={vertex:[d.shaderChunks[h(282)],d[h(360)][h(144)],d[h(360)][h(463)],d[h(360)].varyings,i[h(593)][h(544)],i[h(593)][h(416)],n[h(233)],d.shaderChunks[h(263)],d[h(360)].unpackColor,d[h(360)].unpackRotationAxis,d[h(360)][h(154)],d[h(360)].colorOverLifetime,d[h(360)][h(515)],d[h(360)].forceFetchingFunctions,d[h(360)][h(332)],h(351),h(205),h(195),h(265),h(525),"    highp float isAlive = when_gt( alive, 0.0 );",h(325),h(151),h(204),h(183),h(227),h(153),h(459),h(550),h(269),"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;",h(384),h(264),h(545),h(163),"    #ifdef SHOULD_WIGGLE_PARTICLES",h(565),h(376),h(162),h(227),"    #ifdef SHOULD_ROTATE_PARTICLES",h(404),h(227),h(454),h(482),"    #ifdef HAS_PERSPECTIVE",h(456),h(401),h(427),"    #endif",h(147),h(164),h(222),h(229),h(460),h(294),h(491),h(223),"       );","    #else",h(348),h(227),h(319),h(471),h(181),h(531),h(227),h(234),h(394),h(465),h(436),h(517),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",h(248),"        float row = floor( (frameNumber - column) / framesX );",h(306),"        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;",h(305),h(522),h(227),"    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPosition;",i[h(593)][h(320)],n[h(226)],"}"][h(202)]("\n"),fragment:[d[h(360)][h(144)],i[h(593)].common,i[h(593)][h(385)],n[h(547)],d[h(360)].varyings,d[h(360)][h(263)],h(351),h(581),"    ",h(429),h(485),h(227),d[h(360)][h(521)],i[h(593)][h(566)],h(211),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",i[h(593)][h(548)],"}"][h(202)]("\n")},d[h(602)]={types:{BOOLEAN:h(277),STRING:h(559),NUMBER:h(520),OBJECT:h(392)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){if(Array[h(406)](t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array.isArray(t)){for(let s=t[n(596)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this.ensureInstanceOf(t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array.isArray(t[n(236)])&&(t[n(236)]=[t[n(236)]]),!1===Array[n(406)](t._spread)&&(t[n(207)]=[t[n(207)]]);const s=this[n(259)](t[n(236)][n(596)],e,i),o=this.clamp(t[n(207)].length,e,i),r=Math[n(434)](s,o);t[n(236)].length!==r&&(t[n(236)]=this[n(580)](t[n(236)],r)),t[n(207)][n(596)]!==r&&(t[n(207)]=this.interpolateArray(t[n(207)],r))},interpolateArray(t,e){const i=h,n=t[i(596)],s=[typeof t[0][i(253)]===i(600)?t[0][i(253)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(423)](e),a=Math[i(514)](e),c=e-n;s[r]=this[i(224)](t[n],t[a],c)}return s.push(typeof t[n-1][i(253)]===i(600)?t[n-1].clone():t[n-1]),s},clamp(t,e,i){const n=h;return Math[n(434)](e,Math[n(499)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(295)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,e,n){const o=h;let r,a=this[o(383)];return typeof t===a[o(529)]&&typeof e===a[o(529)]?t+(e-t)*n:t instanceof i[o(473)]&&e instanceof s?(r=t[o(253)](),r.x=this[o(468)](t.x,e.x,n),r.y=this[o(468)](t.y,e.y,n),r):t instanceof i[o(549)]&&e instanceof i[o(549)]?(r=t[o(253)](),r.x=this[o(468)](t.x,e.x,n),r.y=this[o(468)](t.y,e.y,n),r.z=this[o(468)](t.z,e.z,n),r):t instanceof i[o(287)]&&e instanceof i[o(287)]?(r=t[o(253)](),r.x=this[o(468)](t.x,e.x,n),r.y=this.lerp(t.y,e.y,n),r.z=this[o(468)](t.z,e.z,n),r.w=this[o(468)](t.w,e.w,n),r):t instanceof i[o(431)]&&e instanceof i[o(431)]?(r=t[o(253)](),r.r=this[o(468)](t.r,e.r,n),r.g=this[o(468)](t.g,e.g,n),r.b=this[o(468)](t.b,e.b,n),r):void console.warn(o(490),t,e)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=h;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(487)](t)-n):t+e-n)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(295)]()-.5),randomVector3(t,e,i,n,s){const o=h;let r=i.x+(Math[o(295)]()*n.x-.5*n.x),a=i.y+(Math.random()*n.y-.5*n.y),c=i.z+(Math[o(295)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(422)](r,s.x),a=.5*-s.y+this[o(422)](a,s.y),c=.5*-s.z+this[o(422)](c,s.z)),t[o(352)][o(344)](e,r,a,c)},randomColor(t,e,i,n){const s=h;let o=i.r+Math.random()*n.x,r=i.g+Math[s(295)]()*n.y,a=i.b+Math[s(295)]()*n.z;o=this[s(259)](o,0,1),r=this[s(259)](r,0,1),a=this[s(259)](a,0,1),t[s(352)][s(344)](e,o,r,a)},randomColorAsHex:function(){const t=h,e=new(i[t(431)]);return function(i,n,s,o){const r=t,a=s[r(596)],c=[];for(let t=0;t<a;++t){const i=o[t];e[r(170)](s[t]),e.r+=Math.random()*i.x-.5*i.x,e.g+=Math.random()*i.y-.5*i.y,e.b+=Math[r(295)]()*i.z-.5*i.z,e.r=this[r(259)](e.r,0,1),e.g=this[r(259)](e.g,0,1),e.b=this[r(259)](e.b,0,1),c[r(240)](e.getHex())}i[r(352)][r(210)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=h,o=i[s(253)]();o.lerp(n,Math[s(295)]()),t[s(352)][s(344)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=h;let u=2*Math[c(295)]()-1,l=6.2832*Math[c(295)](),f=Math[c(507)](1-u*u),p=this[c(278)](n,s),d=0,m=0,g=0;r&&(p=Math[c(467)](p/r)*r),d=f*Math[c(410)](l)*p,m=f*Math[c(316)](l)*p,g=u*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[c(344)](e,d,m,g)},seededRandom(t){const e=1e4*Math[h(316)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=h;let c=6.2832*Math[a(295)](),u=Math[a(487)](this[a(278)](n,s)),l=0,f=0,p=0;r&&(u=Math[a(467)](u/r)*r),l=Math[a(410)](c)*u,f=Math[a(316)](c)*u,l*=o.x,f*=o.y,l+=i.x,f+=i.y,p+=i.z,t[a(352)][a(344)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const t=h,e=new(i[t(549)]);return function(i,n,s,o,r,a,c,h){const u=t;e[u(170)](a),e.x-=s,e.y-=o,e.z-=r,e[u(374)]()[u(221)](-this[u(278)](c,h)),i[u(352)].setVec3Components(n,e.x,e.y,e.z)}}(),randomDirectionVector3OnDisc:function(){const t=new o;return function(e,i,n,s,o,r,a,c){const h=p;t[h(170)](r),t.x-=n,t.y-=s,t.z-=o,t[h(374)]()[h(221)](-this[h(278)](a,c)),e[h(352)][h(344)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const t=h,e=new(i[t(549)]),n=new(i[t(549)]),s=new r,o=new(i[t(549)])(1,1,1);return function(i,r){const a=t;return e[a(170)](i)[a(374)](),n[a(170)](r)[a(374)](),e.x+=.5*-r.x+Math[a(295)]()*r.x,e.y+=.5*-r.y+Math[a(295)]()*r.y,e.z+=.5*-r.z+Math.random()*r.z,e[a(374)]().add(o)[a(221)](.5),s[a(209)](e.x,e.y,e.z),s[a(604)]()}}()},d[h(174)]=function(t){const e=h,n=d.utils,o=n[e(383)];(t=n[e(179)](t,o.OBJECT,{}))[e(523)]=n[e(179)](t[e(523)],o[e(355)],{}),this[e(444)]=i[e(313)][e(417)](),this[e(584)]=n[e(179)](t[e(584)],o[e(529)],.016),this.texture=n[e(318)](t[e(523)][e(572)],a,null),this.textureFrames=n.ensureInstanceOf(t[e(523)][e(461)],i[e(473)],new(i[e(473)])(1,1)),this.textureFrameCount=n[e(179)](t[e(523)].frameCount,o[e(529)],this[e(395)].x*this[e(395)].y),this[e(538)]=n.ensureTypedArg(t[e(523)][e(293)],o[e(529)],1),this[e(395)][e(434)](new s(1,1)),this[e(350)]=n[e(179)](t[e(350)],o[e(555)],!0),this[e(441)]=n[e(179)](t.colorize,o.BOOLEAN,!0),this[e(260)]=n[e(179)](t[e(260)],o.NUMBER,null),this[e(502)]=n[e(179)](t[e(502)],o[e(529)],i[e(315)]),this[e(266)]=n[e(179)](t[e(266)],o[e(555)],!0),this[e(217)]=parseFloat(n[e(179)](t.alphaTest,o[e(529)],0)),this[e(568)]=n.ensureTypedArg(t[e(568)],o[e(555)],!1),this[e(158)]=n[e(179)](t[e(158)],o.BOOLEAN,!0),this[e(558)]=n[e(179)](t.fog,o.BOOLEAN,!0),this[e(551)]=n[e(179)](t[e(551)],o[e(529)],300),this[e(268)]=[],this[e(327)]=[],this[e(310)]=[],this._poolCreationSettings=null,this[e(251)]=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this[e(146)]=0,this[e(144)]={tex:{type:"t",value:this[e(523)]},textureAnimation:{type:"v4",value:new(i[e(287)])(this[e(395)].x,this[e(395)].y,this.textureFrameCount,Math.max(Math[e(487)](this[e(538)]),1))},fogColor:{type:"c",value:this[e(558)]?new(i[e(431)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[e(551)]}},this[e(282)]={HAS_PERSPECTIVE:this[e(350)],COLORIZE:this[e(441)],VALUE_OVER_LIFETIME_LENGTH:d[e(176)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[e(395)].x>1||this.textureFrames.y>1},this[e(463)]={position:new(d[e(569)])("v3",!0),acceleration:new(d[e(569)])("v4",!0),velocity:new(d[e(569)])("v3",!0),rotation:new d.ShaderAttribute("v4",!0),rotationCenter:new(d[e(569)])("v3",!0),params:new(d[e(569)])("v4",!0),size:new d.ShaderAttribute("v4",!0),angle:new(d[e(569)])("v4",!0),color:new d.ShaderAttribute("v4",!0),opacity:new(d[e(569)])("v4",!0)},this[e(314)]=Object[e(150)](this[e(463)]),this.attributeCount=this[e(314)][e(596)],this.material=new(i[e(451)])({uniforms:this[e(144)],vertexShader:d[e(364)].vertex,fragmentShader:d[e(364)][e(145)],blending:this.blending,transparent:this[e(266)],alphaTest:this.alphaTest,depthWrite:this[e(568)],depthTest:this[e(158)],defines:this.defines,fog:this[e(558)]}),this[e(380)]=new(i[e(172)]),this[e(506)]=new c(this[e(380)],this[e(324)]),null===this[e(260)]&&console[e(530)](e(354))},d.Group[h(309)]=d[h(174)],d.Group.prototype._updateDefines=function(){const t=h;let e,i=this[t(268)],n=i[t(596)]-1,s=this[t(282)];for(;n>=0;--n)e=i[n],!s[t(497)]&&(s[t(270)]=s[t(270)]||!!Math.max(Math.max[t(297)](null,e[t(449)][t(572)]),Math[t(434)][t(297)](null,e[t(449)][t(496)]))),s.SHOULD_ROTATE_PARTICLES=s[t(303)]||!!Math[t(434)](e.rotation.angle,e[t(167)][t(420)]),s[t(301)]=s.SHOULD_WIGGLE_PARTICLES||!!Math[t(434)](e[t(590)][t(572)],e.wiggle.spread);this[t(324)][t(575)]=!0},d[h(174)].prototype[h(570)]=function(){const t=h;let e,i,n=this[t(463)],s=this[t(380)],o=s[t(463)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=o[r],i?i[t(256)]=e[t(352)][t(256)]:s[t(505)](r,e[t(286)]),e[t(286)][t(575)]=!0);this.geometry.setDrawRange(0,this[t(146)])},d[h(174)][h(573)].addEmitter=function(t){const e=h;if(t instanceof d[e(546)]==!1)return void console.error(e(518),t);if(this[e(327)][e(500)](t[e(444)])>-1)return void console[e(216)](e(532));if(null!==t.group)return void console.error(e(155));const i=this[e(463)],n=this[e(146)],s=n+t[e(146)];this[e(146)]=s,null!==this[e(260)]&&this.particleCount>this.maxParticleCount&&console[e(530)](e(283),this[e(146)],"particles, can support only",this.maxParticleCount),t[e(576)](t[e(290)][e(236)]+t[e(290)][e(207)]),t[e(535)](this[e(314)]),t[e(539)](n),t[e(407)]=this,t[e(463)]=this.attributes;for(const o in i)i[e(446)](o)&&i[o][e(241)](null!==this.maxParticleCount?this.maxParticleCount:this[e(146)]);for(let o=n;o<s;++o)t[e(578)](o),t[e(171)](o,e(601)),t._assignForceValue(o,e(557)),t[e(193)](o,"opacity"),t[e(193)](o,e(246)),t[e(477)](o),t[e(413)](o),t[e(201)](o),t[e(457)](o);return this[e(570)](),this[e(268)][e(240)](t),this.emitterIDs.push(t[e(444)]),this[e(358)](t),this[e(324)].needsUpdate=!0,this[e(380)][e(575)]=!0,this[e(199)]=!0,this},d[h(174)].prototype.removeEmitter=function(t){const e=h,i=this[e(327)][e(500)](t.uuid);if(t instanceof d.Emitter==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(216)]("Emitter does not exist in this group. Will not remove.");const n=t.attributeOffset,s=n+t.particleCount,o=this[e(463)][e(386)][e(352)];for(let r=n;r<s;++r)o[e(256)][4*r]=0,o[e(256)][4*r+1]=0;this[e(268)][e(280)](i,1),this[e(327)].splice(i,1);for(const r in this[e(463)])this[e(463)][e(446)](r)&&this.attributes[r][e(280)](n,s);this[e(146)]-=t[e(146)],t[e(184)](),this[e(199)]=!0},d[h(174)][h(573)][h(323)]=function(){const t=h,e=this[t(310)],i=this._createNewWhenPoolEmpty;if(e[t(596)])return e[t(579)]();if(i){const e=new(d[t(546)])(this._poolCreationSettings);return this[t(161)](e),e}return null},d[h(174)].prototype.releaseIntoPool=function(t){const e=h;if(t instanceof d[e(546)]!=!1)return t[e(254)](),this[e(310)].unshift(t),this;console[e(216)](e(488),t)},d[h(174)][h(573)].getPool=function(){return this._pool},d[h(174)][h(573)][h(178)]=function(t,e,i){const n=h;let s;this[n(307)]=e,this._createNewWhenPoolEmpty=!!i;for(let o=0;o<t;++o)s=Array[n(406)](e)?new(d[n(546)])(e[o]):new(d[n(546)])(e),this[n(161)](s),this.releaseIntoPool(s);return this},d[h(174)][h(573)]._triggerSingleEmitter=function(t){const e=h,n=this[e(323)](),s=this;if(null!==n)return t instanceof i[e(549)]&&(n[e(160)][e(572)][e(170)](t),n.position.value=n[e(160)][e(572)]),n[e(165)](),setTimeout((()=>{const t=e;n[t(411)](),s[t(159)](n)}),1e3*Math[e(434)](n[e(276)],n[e(290)].value+n[e(290)][e(496)])),this;console[e(589)](e(326))},d[h(174)][h(573)][h(284)]=function(t,e){const i=h;if(typeof t===i(520)&&t>1)for(let n=0;n<t;++n)this[i(180)](e);else this[i(180)](e);return this},d.Group[h(573)]._updateUniforms=function(t){const e=h;this.uniforms[e(453)].value+=t,this.uniforms[e(361)][e(572)]=t},d.Group[h(573)]._resetBufferRanges=function(){const t=h;let e=this.attributeKeys,i=this.attributeCount-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(414)]()},d.Group.prototype[h(524)]=function(t){const e=h;let i,n,s,o=this[e(314)],r=this[e(371)]-1,a=this[e(463)],c=t[e(440)];for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s[e(432)](n.min,n[e(434)]),s[e(349)]()},d[h(174)][h(573)][h(208)]=function(t){const e=h;var i=this.emitters,n=i.length,s=t||this[e(584)],o=this[e(314)],r=this.attributes;if(this[e(475)](s),this[e(399)](),0!==n||!1!==this[e(199)]||!1!==this[e(252)]){for(var a,c=0;c<n;++c)(a=i[c])[e(208)](s),this._updateBuffers(a);if(!0===this[e(252)]){for(c=this[e(371)]-1;c>=0;--c)r[o[c]][e(149)]();this[e(252)]=!1}if(!0===this[e(199)]){for(c=this[e(371)]-1;c>=0;--c)r[o[c]].forceUpdateAll();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},d[h(174)][h(573)][h(563)]=function(){const t=h;return this[t(380)][t(563)](),this[t(324)][t(563)](),this},d.Emitter=function(t){const e=h,n=d[e(602)],s=n[e(383)],r=d[e(176)];(t=n[e(179)](t,s[e(355)],{})).position=n[e(179)](t.position,s.OBJECT,{}),t[e(601)]=n[e(179)](t[e(601)],s.OBJECT,{}),t[e(557)]=n[e(179)](t[e(557)],s[e(355)],{}),t[e(157)]=n.ensureTypedArg(t[e(157)],s[e(355)],{}),t.drag=n[e(179)](t[e(464)],s[e(355)],{}),t[e(167)]=n[e(179)](t[e(167)],s.OBJECT,{}),t[e(543)]=n[e(179)](t[e(543)],s.OBJECT,{}),t[e(483)]=n[e(179)](t[e(483)],s.OBJECT,{}),t[e(246)]=n.ensureTypedArg(t[e(246)],s.OBJECT,{}),t[e(449)]=n[e(179)](t[e(449)],s[e(355)],{}),t.wiggle=n[e(179)](t[e(590)],s[e(355)],{}),t.maxAge=n[e(179)](t[e(290)],s[e(355)],{}),t.onParticleSpawn&&console[e(530)](e(296)),this[e(444)]=i[e(313)].generateUUID(),this.type=n[e(179)](t[e(526)],s[e(529)],d.distributions[e(169)]),this[e(160)]={_value:n[e(318)](t[e(160)][e(572)],i[e(549)],new o),_spread:n.ensureInstanceOf(t[e(160)][e(496)],i[e(549)],new(i[e(549)])),_spreadClamp:n[e(318)](t[e(160)][e(387)],o,new(i[e(549)])),_distribution:n[e(179)](t[e(160)][e(255)],s[e(529)],this[e(526)]),_randomise:n.ensureTypedArg(t.position[e(595)],s[e(555)],!1),_radius:n.ensureTypedArg(t[e(160)].radius,s[e(529)],10),_radiusScale:n[e(318)](t[e(160)][e(421)],o,new(i[e(549)])(1,1,1)),_distributionClamp:n[e(179)](t[e(160)].distributionClamp,s[e(529)],0)},this[e(601)]={_value:n[e(318)](t[e(601)][e(572)],o,new o),_spread:n.ensureInstanceOf(t[e(601)][e(496)],i[e(549)],new(i[e(549)])),_distribution:n[e(179)](t.velocity[e(255)],s[e(529)],this[e(526)]),_randomise:n[e(179)](t.position[e(595)],s.BOOLEAN,!1)},this[e(557)]={_value:n[e(318)](t[e(557)][e(572)],i[e(549)],new(i[e(549)])),_spread:n.ensureInstanceOf(t[e(557)][e(496)],i[e(549)],new o),_distribution:n[e(179)](t[e(557)].distribution,s[e(529)],this[e(526)]),_randomise:n.ensureTypedArg(t.position[e(595)],s[e(555)],!1)},this[e(464)]={_value:n[e(179)](t[e(464)].value,s[e(529)],0),_spread:n[e(179)](t.drag.spread,s[e(529)],0),_randomise:n[e(179)](t[e(160)][e(595)],s.BOOLEAN,!1)},this[e(590)]={_value:n[e(179)](t[e(590)][e(572)],s.NUMBER,0),_spread:n[e(179)](t[e(590)][e(496)],s[e(529)],0)},this[e(167)]={_axis:n[e(318)](t[e(167)][e(186)],i[e(549)],new(i[e(549)])(0,1,0)),_axisSpread:n[e(318)](t[e(167)][e(200)],i[e(549)],new o),_angle:n[e(179)](t[e(167)][e(449)],s[e(529)],0),_angleSpread:n[e(179)](t[e(167)][e(420)],s.NUMBER,0),_static:n[e(179)](t.rotation[e(510)],s.BOOLEAN,!1),_center:n[e(318)](t[e(167)][e(588)],i[e(549)],this[e(160)]._value[e(253)]()),_randomise:n[e(179)](t.position.randomise,s.BOOLEAN,!1)},this[e(290)]={_value:n[e(179)](t[e(290)][e(572)],s[e(529)],2),_spread:n.ensureTypedArg(t[e(290)][e(496)],s[e(529)],0)},this[e(543)]={_value:n.ensureArrayInstanceOf(t[e(543)][e(572)],i[e(431)],new(i[e(431)])),_spread:n[e(142)](t[e(543)][e(496)],i[e(549)],new(i[e(549)])),_randomise:n[e(179)](t[e(160)].randomise,s[e(555)],!1)},this[e(483)]={_value:n[e(300)](t[e(483)].value,s[e(529)],1),_spread:n[e(300)](t[e(483)].spread,s[e(529)],0),_randomise:n.ensureTypedArg(t[e(160)][e(595)],s[e(555)],!1)},this[e(246)]={_value:n.ensureArrayTypedArg(t.size[e(572)],s[e(529)],1),_spread:n[e(300)](t.size[e(496)],s[e(529)],0),_randomise:n[e(179)](t.position[e(595)],s[e(555)],!1)},this[e(449)]={_value:n[e(300)](t[e(449)].value,s[e(529)],0),_spread:n[e(300)](t[e(449)][e(496)],s[e(529)],0),_randomise:n[e(179)](t.position[e(595)],s[e(555)],!1)},this.particleCount=n.ensureTypedArg(t[e(146)],s.NUMBER,100),this[e(276)]=n.ensureTypedArg(t[e(276)],s[e(529)],null),this[e(237)]=n.ensureTypedArg(t[e(237)],s[e(555)],!1),this[e(397)]=n.ensureTypedArg(t.activeMultiplier,s[e(529)],1),this[e(448)]=n[e(179)](t[e(448)],s[e(529)],1),this.alive=n[e(179)](t[e(190)],s[e(555)],!0),this[e(218)]=0,this[e(375)]=0,this[e(175)]=0,this[e(213)]=0,this.age=0,this[e(338)]=0,this[e(407)]=null,this[e(463)]=null,this.paramsArray=null,this[e(271)]={position:n[e(179)](t.position[e(595)],s.BOOLEAN,!1)||n.ensureTypedArg(t[e(157)].randomise,s.BOOLEAN,!1),velocity:n[e(179)](t[e(601)].randomise,s.BOOLEAN,!1),acceleration:n.ensureTypedArg(t[e(557)][e(595)],s[e(555)],!1)||n.ensureTypedArg(t[e(464)][e(595)],s.BOOLEAN,!1),rotation:n[e(179)](t[e(167)].randomise,s[e(555)],!1),rotationCenter:n[e(179)](t.rotation[e(595)],s[e(555)],!1),size:n[e(179)](t[e(246)].randomise,s.BOOLEAN,!1),color:n[e(179)](t.color[e(595)],s.BOOLEAN,!1),opacity:n[e(179)](t[e(483)].randomise,s[e(555)],!1),angle:n[e(179)](t[e(449)][e(595)],s.BOOLEAN,!1)},this.updateFlags={},this[e(603)]={},this.updateMap={maxAge:e(386),position:e(160),velocity:"velocity",acceleration:"acceleration",drag:e(557),wiggle:e(386),rotation:e(167),size:e(246),color:e(543),opacity:e(483),angle:e(449)};for(const i in this[e(196)])this[e(196)][e(446)](i)&&(this[e(603)][this[e(196)][i]]=0,this[e(480)][this[e(196)][i]]=!1,this._createGetterSetters(this[i],i));this[e(440)]={},this[e(314)]=null,this.attributeCount=0,n[e(382)](this[e(543)],r,r),n[e(382)](this[e(483)],r,r),n[e(382)](this.size,r,r),n.ensureValueOverLifetimeCompliance(this[e(449)],r,r)},d[h(546)][h(309)]=d.Emitter,d[h(546)][h(573)][h(341)]=function(t,e){const i=h,n=this;for(const s in t)if(t.hasOwnProperty(s)){const o=s[i(393)]("_","");Object[i(311)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=p,o=n[s(196)][e],r=this[t],a=d[s(176)];t===s(425)?(n[s(480)].rotationCenter=!0,n.updateCounts.rotationCenter=0):"_randomise"===t?n[s(271)][o]=i:(n[s(480)][o]=!0,n[s(603)][o]=0),n[s(407)][s(358)](),this[t]=i,Array[s(406)](r)&&d.utils[s(382)](n[e],a,a)}}(s)})}},d[h(546)][h(573)]._setBufferUpdateRanges=function(t){const e=h;this.attributeKeys=t,this[e(371)]=t[e(596)];for(let i=this[e(371)]-1;i>=0;--i)this[e(440)][t[i]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},d.Emitter[h(573)]._calculatePPSValue=function(t){const e=h,i=this[e(146)];this[e(276)]?this.particlesPerSecond=i/(t<this[e(276)]?t:this.duration):this[e(218)]=i/t},d.Emitter[h(573)]._setAttributeOffset=function(t){const e=h;this[e(175)]=t,this[e(375)]=t,this[e(215)]=t+this[e(146)]},d[h(546)][h(573)][h(363)]=function(t,e){const i=h;switch(t){case i(160):this[i(578)](e);break;case i(601):case i(557):this[i(171)](e,t);break;case i(246):case i(483):this[i(193)](e,t);break;case i(449):this[i(477)](e);break;case i(386):this[i(201)](e);break;case i(167):this[i(413)](e);break;case"color":this[i(457)](e)}},d.Emitter[h(573)][h(578)]=function(t){const e=h,i=d[e(513)],n=d[e(602)],s=this[e(160)],o=this[e(463)][e(160)],r=s._value,a=s[e(207)];switch(s[e(495)]){case i.BOX:n[e(424)](o,t,r,a,s[e(238)]);break;case i[e(438)]:n[e(402)](o,t,r,s[e(426)],s[e(207)].x,s[e(458)],s[e(238)].x,s._distributionClamp||this[e(146)]);break;case i.DISC:n[e(486)](o,t,r,s[e(426)],s[e(207)].x,s[e(458)],s[e(238)].x);break;case i[e(503)]:n[e(553)](o,t,r,a)}},d[h(546)][h(573)][h(171)]=function(t,e){const i=h;let n,s,o,r,a,c=d[i(513)],u=d[i(602)],l=this[e],f=l[i(236)],p=l[i(207)];switch(l[i(495)]){case c[i(169)]:u[i(424)](this.attributes[e],t,f,p);break;case c[i(438)]:n=this[i(463)][i(160)][i(352)][i(256)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],u[i(455)](this[i(463)][e],t,s,o,r,this[i(160)][i(236)],l[i(236)].x,l[i(207)].x);break;case c.DISC:n=this.attributes[i(160)][i(352)][i(256)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],u[i(379)](this[i(463)][e],t,s,o,r,this[i(160)][i(236)],l._value.x,l[i(207)].x);break;case c.LINE:u[i(553)](this[i(463)][e],t,f,p)}if(e===i(557)){const e=u[i(259)](u.randomFloat(this[i(464)][i(236)],this[i(464)]._spread),0,1);this[i(463)].acceleration[i(352)].array[4*t+3]=e}},d[h(546)].prototype[h(193)]=function(t,e){const i=h;let n,s=this[i(463)][e].typedArray,o=this[e],r=d[i(602)];r[i(419)](o[i(236)])&&r.arrayValuesAreEqual(o[i(207)])?(n=Math[i(487)](r[i(278)](o[i(236)][0],o[i(207)][0])),s[i(210)](t,n,n,n,n)):s[i(210)](t,Math.abs(r.randomFloat(o[i(236)][0],o[i(207)][0])),Math.abs(r[i(278)](o[i(236)][1],o[i(207)][1])),Math[i(487)](r.randomFloat(o[i(236)][2],o[i(207)][2])),Math[i(487)](r[i(278)](o[i(236)][3],o[i(207)][3])))},d[h(546)][h(573)]._assignAngleValue=function(t){const e=h;let i,n=this[e(463)][e(449)].typedArray,s=this[e(449)],o=d[e(602)];o[e(419)](s[e(236)])&&o[e(419)](s._spread)?(i=o.randomFloat(s[e(236)][0],s[e(207)][0]),n[e(210)](t,i,i,i,i)):n[e(210)](t,o[e(278)](s._value[0],s._spread[0]),o[e(278)](s._value[1],s[e(207)][1]),o[e(278)](s[e(236)][2],s._spread[2]),o[e(278)](s[e(236)][3],s[e(207)][3]))},d[h(546)].prototype[h(201)]=function(t){const e=h;this[e(463)].params[e(352)].setVec4Components(t,this[e(237)]?1:0,0,Math[e(487)](d[e(602)][e(278)](this[e(290)]._value,this[e(290)]._spread)),d[e(602)][e(278)](this.wiggle[e(236)],this[e(590)][e(207)]))},d.Emitter[h(573)]._assignRotationValue=function(t){const e=h;this.attributes[e(167)][e(352)][e(344)](t,d[e(602)][e(206)](this[e(167)]._axis,this.rotation[e(508)]),d[e(602)][e(278)](this[e(167)][e(439)],this.rotation[e(228)]),this[e(167)][e(188)]?0:1),this[e(463)][e(272)][e(352)][e(536)](t,this.rotation._center)},d[h(546)][h(573)][h(457)]=function(t){const e=h;d[e(602)][e(275)](this[e(463)][e(543)],t,this[e(543)][e(236)],this[e(543)][e(207)])},d[h(546)].prototype[h(403)]=function(t){const e=h;let i,n,s=this[e(271)],o=this[e(480)],r=this[e(603)],a=this[e(314)];for(let c=this[e(371)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(363)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this[e(146)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},d[h(546)].prototype._updateAttributeUpdateRange=function(t,e){const i=h,n=this[i(440)][t];n[i(499)]=Math.min(e,n[i(499)]),n.max=Math.max(e,n[i(434)])},d[h(546)][h(573)]._resetBufferRanges=function(){const t=h;let e,i=this.bufferUpdateRanges,n=this.bufferUpdateKeys,s=this[t(365)]-1;for(;s>=0;--s)e=n[s],i[e][t(499)]=Number[t(302)],i[e][t(434)]=Number[t(396)]},d[h(546)][h(573)][h(184)]=function(){const t=h;this[t(218)]=0,this.attributeOffset=0,this[t(375)]=0,this[t(338)]=0,this[t(407)]=null,this.attributes=null,this.paramsArray=null,this[t(398)]=0},d.Emitter.prototype._decrementParticleCount=function(){--this[h(338)]},d.Emitter[h(573)][h(328)]=function(){++this[h(338)]},d[h(546)][h(573)][h(143)]=function(t,e,i,n){const s=h;for(var o,r,a,c,u=e-1;u>=t;--u)0!==(c=i[o=4*u])&&(a=i[o+1],r=i[o+2],1===this[s(448)]?(a+=n)>=r&&(a=0,c=0,this[s(192)]()):(a-=n)<=0&&(a=r,c=0,this[s(192)]()),i[o]=c,i[o+1]=a,this[s(333)](s(386),u))},d[h(546)][h(573)][h(381)]=function(t,e,i,n){const s=h,o=this[s(448)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this.particleCount||(this[s(328)](),i[r]=1,this[s(403)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(333)](s(386),c))},d[h(546)][h(573)][h(208)]=function(t){const e=h;if(this[e(237)])return;null===this[e(478)]&&(this[e(478)]=this.attributes.params[e(352)].array);const i=this[e(175)],n=i+this[e(146)],s=this[e(478)],o=this[e(218)]*this.activeMultiplier*t,r=this.activationIndex;if(this[e(399)](),this[e(143)](i,n,s,t),!1===this[e(190)])return void(this[e(398)]=0);if(null!==this.duration&&this[e(398)]>this[e(276)])return this[e(190)]=!1,void(this.age=0);const a=1===this[e(146)]?r:0|r,c=Math[e(499)](a+o,this.activationEnd),u=c-this[e(375)]|0,l=u>0?t/u:0;this[e(381)](a,c,s,l),this[e(375)]+=o,this[e(375)]>n&&(this[e(375)]=i),this[e(398)]+=t},d[h(546)][h(573)][h(254)]=function(t){const e=h;if(this[e(398)]=0,this[e(190)]=!1,!0===t){const t=this[e(175)],s=t+this[e(146)],o=this[e(478)],r=this[e(463)][e(386)][e(286)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(189)].offset=0,r[e(189)][e(489)]=-1,r.needsUpdate=!0}return this},d[h(546)][h(573)][h(165)]=function(){return this[h(190)]=!0,this},d[h(546)][h(573)][h(411)]=function(){return this[h(190)]=!1,this},d[h(546)][h(573)][h(418)]=function(){const t=h;return null!==this[t(407)]?this[t(407)][t(512)](this):console[t(216)]("Emitter does not belong to a group, cannot remove."),this};const m=d;function g(t){function e(t){const i=p;if(typeof t===i(559))return function(t){}[i(309)](i(469))[i(297)]("counter");1!==(""+t/t)[i(596)]||t%20==0?function(){return!0}[i(309)](i(567)+i(340))[i(498)](i(356)):function(){return!1}[i(309)](i(567)+i(340))[i(297)](i(250)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

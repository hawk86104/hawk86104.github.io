import{b$ as t,a3 as n,C as e,k as r}from"./three.YREzp-_G1729505164040.js";import{z as o}from"./@tresjs.IsKybBdF1729505164040.js";import{R as c}from"./all.three.FTr54iDs1729505164040.js";import{d as a,b as i,a4 as u,a3 as s,o as l,E as f,L as p,m,u as d}from"./@vue.JNsx1iN61729505164040.js";function h(){const t=["3VLglkr","2435hlqbdc","168bwewlI","action","console","stateObject",'{}.constructor("return this")( )',"460710dQknZh","log","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","debu","351430QkMWau","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","124538IRtILw","#include <project_vertex>","apply","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","function *\\( *\\)","979rJMaze","replace","prototype","test","__proto__","init","chain","error","toString","6063428SthqmD","while (true) {}","constructor","3152748uZCYUn","10124LRjjic","info","input","void main() {","length","vertexShader","call","trace","exception","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","string","gger","373507oCndpG","fragmentShader"];return(h=function(){return t})()}!function(t,n){const e=x,r=h();for(;;)try{if(790632===parseInt(e(494))/1+parseInt(e(462))/2*(-parseInt(e(496))/3)+-parseInt(e(482))/4*(parseInt(e(497))/5)+parseInt(e(481))/6+-parseInt(e(478))/7+parseInt(e(498))/8*(-parseInt(e(456))/9)+parseInt(e(460))/10*(parseInt(e(469))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(464)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=x,n=new RegExp(t(468)),e=new RegExp(t(466),"i"),r=y(t(474));n[t(472)](r+t(475))&&e[t(472)](r+t(484))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(464)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=h();return(x=function(t,n){return e[t-=453]})(t,n)}g(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function("return (function() "+t(455)+");")()}catch(e){n=window}return n}(),e=n[t(453)]=n[t(453)]||{},r=[t(457),"warn",t(483),t(476),t(490),"table",t(489)];for(let o=0;o<r[t(486)];o++){const n=g[t(480)][t(471)][t(465)](g),c=r[o],a=e[c]||n;n[t(473)]=g.bind(g),n[t(477)]=a[t(477)][t(465)](a),e[c]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(492))return function(t){}[e(480)](e(479)).apply("counter");1!==(""+t/t)[e(486)]||t%20==0?function(){return!0}[e(480)](e(459)+e(493))[e(488)](e(499)):function(){return!1}[e(480)](e(459)+e(493))[e(464)](e(454)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=M;!function(t,n){const e=M,r=j();for(;;)try{if(743086===-parseInt(e(196))/1*(-parseInt(e(185))/2)+parseInt(e(248))/3*(-parseInt(e(214))/4)+-parseInt(e(194))/5+parseInt(e(237))/6+-parseInt(e(229))/7+-parseInt(e(200))/8+-parseInt(e(233))/9*(-parseInt(e(219))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(246)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=M,n=new RegExp(t(195)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=z("init");n[t(208)](r+"chain")&&e[t(208)](r+t(211))?z():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(246)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();_(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(232)+t(242)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(205)]||{},r=[t(187),t(230),t(238),t(190),t(186),t(183),t(226)];for(let o=0;o<r[t(191)];o++){const n=_[t(225)][t(247)].bind(_),c=r[o],a=e[c]||n;n.__proto__=_[t(197)](_),n[t(228)]=a.toString[t(197)](a),e[c]=n}}))();const I=[b(207)],C=[b(220),b(210)];function M(t,n){const e=j();return(M=function(t,n){return e[t-=181]})(t,n)}function j(){const t=["debu","#444","TresMesh","table","tmsmRef","138ZTnCRf","exception","log","call","tpgRef","error","length","wrapT","color","1593395WFaGUp","function *\\( *\\)","19251vJFoan","bind","showGridHelper","TresMeshStandardMaterial","5903264hMYnZd","set","value","reflectMap","add","console","gger","rotation-x","test","textureMatrixUniform","visible","input","mixStrength","primitive","128KpLexl","TresGroup","channel","tmRef","textureMatrix","22852860CIwKuG","object","while (true) {}","mirror","uniforms","wrapS","constructor","trace","aoMap","toString","8956402WcoHbt","warn","update","return (function() ","9qbVtxo","uv1","assign","action","4061100zlWhGS","info","#ffffff","onBeforeCompile","counter",'{}.constructor("return this")( )',"renderTargetUniform","attributes","string","apply","prototype","113559yarPVH","onBeforeRender"];return(j=function(){return t})()}const S=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(239)}},async setup(a){const h=b;let v,g;const y=a,w=new t(9.5,10),_=i(),M=i(),j=i(),S=new c,z={mirror:{value:y[h(222)]},mixStrength:{value:y[h(212)]}},R=([v,g]=u((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,g(),v);for(var E=0;E<3;E++)R[E][h(224)]=n,R[E][h(192)]=n,R[E].repeat[h(201)](16,16);const T={color:new e(h(181)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},k=t=>{const n=h;t[n(223)][n(203)]=S[n(243)],t[n(223)][n(218)]=S[n(209)],t[n(223)]=Object[n(235)](t[n(223)],z),(t=>{const n=x;t[n(487)]=t.vertexShader.replace(n(485),n(491)),t[n(487)]=t[n(487)][n(470)](n(463),n(458))})(t),(t=>{const n=x;t[n(495)]=t[n(495)].replace(n(485),n(461)),t[n(495)]=t[n(495)].replace("#include <emissivemap_fragment>",n(467))})(t)};return s((()=>{const t=h;_[t(202)]&&(_[t(202)][t(244)][t(234)]=_[t(202)][t(244)].uv),j[t(202)]&&(j[t(202)][t(227)][t(216)]=1,j[t(202)][t(240)]=k),M[t(202)]&&(M.value[t(204)](S),M.value[t(249)]=(n,e,r)=>{S[t(231)](n,e,r)}),y[t(193)]&&j.value&&(j[t(202)][t(193)]=new e(y[t(193)]))})),(t,n)=>{const e=h;return l(),f(e(215),null,[p(e(182),{ref_key:e(217),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(189),ref:_,args:[10,10]},null,512),p(e(199),m({ref_key:e(184),ref:j},T),null,16)],8,I),p(e(213),{object:d(w),visible:t[e(198)]},null,8,C)])}}});function z(t){function n(t){const e=M;if(typeof t===e(245))return function(t){}.constructor(e(221)).apply(e(241));1!==(""+t/t)[e(191)]||t%20==0?function(){return!0}[e(225)](e(250)+e(206))[e(188)](e(236)):function(){return!1}.constructor("debu"+e(206))[e(246)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

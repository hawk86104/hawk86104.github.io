import{e as n,h as t,a as e,o as i}from"./@tresjs.yaBKiR-I1741309500666.js";import{P as r}from"./tweakpane.yDiyAAkA1741309500666.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.LKUM8RMn1741309500666.js";import{_ as a}from"./three.8tDGqmLF1741309500666.js";import{d as s,a3 as u,w as c,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as b}from"./@vue.NRI7TcgI1741309500666.js";import"./postprocessing.5pHDeDVF1741309500666.js";import"./@vueuse.7Aa9Vkmy1741309500666.js";import"./all.three.jR47vo8H1741309500666.js";import"./oimophysics.x0jH7fze1741309500666.js";const y=_;function _(n,t){const e=k();return(_=function(n,t){return e[n-=349]})(n,t)}!function(n,t){const e=_,i=k();for(;;)try{if(657675===parseInt(e(355))/1*(parseInt(e(399))/2)+-parseInt(e(356))/3+-parseInt(e(360))/4*(-parseInt(e(363))/5)+-parseInt(e(371))/6*(parseInt(e(368))/7)+-parseInt(e(362))/8+-parseInt(e(386))/9*(-parseInt(e(354))/10)+-parseInt(e(379))/11*(-parseInt(e(375))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[_(361)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){I(this,(function(){const n=_,t=new RegExp(n(353)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=R("init");t[n(378)](i+"chain")&&e[n(378)](i+n(389))?R():i("0")}))()}();const M=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function k(){const n=["test","99eeZimz","debu","prototype","info","hasMaskTexture","bind","direction","220356wTarvL","table","gger","input","length","gridWeight","log","time","MeshPhongMaterial","exception","side","isReversed","hexGridMaterial","2YwRWrS","counter","trace","constructor","while (true) {}","DoubleSide","action","function *\\( *\\)","30ZrZhOI","218098xwxQXH","3514605NoOvCO","toString","stateObject","wavePow","4146316abpwee","apply","5942936AGLdzr","5HuhkQu","__proto__","division","error","console","7391132vfunGb","raisedBottom","waveFrequency","6GwdWRe","baseMaterial","divisionScaleX","value","3066432wNXrZj","maskTexture","return (function() "];return(k=function(){return n})()}M(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function(n(377)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(367)]=t[n(367)]||{},i=[n(392),"warn",n(382),n(366),n(395),n(387),n(401)];for(let r=0;r<i.length;r++){const t=M.constructor[n(381)][n(384)](M),o=i[r],a=e[o]||t;t[n(364)]=M[n(384)](M),t[n(357)]=a[n(357)][n(384)](a),e[o]=t}}))();const C=s({__name:y(398),props:{baseMaterial:{default:new(a[y(394)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const r=y;let o,s;const p=i,v={gridWeight:{value:p[r(391)]},raisedBottom:{value:p[r(369)]},waveFrequency:{value:p[r(370)]},wavePow:{value:p[r(359)]},direction:{value:p.direction},isReversed:{value:p.isReversed},hasMaskTexture:{value:p[r(383)]},maskTexture:{value:null},division:{value:p[r(365)]},divisionScaleX:{value:p[r(373)]},time:{value:0}};p[r(376)]&&(v.maskTexture.value=([o,s]=u((()=>e([p[r(376)]]))),o=await o,s(),o)),c((()=>[p.gridWeight,p.raisedBottom,p[r(370)],p[r(359)],p[r(365)],p.divisionScaleX,p[r(385)],p[r(397)],p[r(383)]]),(([n,t,e,i,o,a,s,u,c])=>{const l=r;v[l(391)][l(374)]=n,v[l(369)][l(374)]=t,v[l(370)].value=e,v[l(359)][l(374)]=i,v[l(365)].value=o,v[l(373)][l(374)]=a,v[l(385)][l(374)]=s,v.isReversed.value=u,v[l(383)][l(374)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=r;v[t(393)][t(374)]+=n*p.speed})),(n,e)=>{const o=r;return l(),f(d(t),{baseMaterial:i[o(372)],vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:a[o(351)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[o(372),o(396),"fragmentShader"])}}});function R(n){function t(n){const e=_;if("string"==typeof n)return function(n){}.constructor(e(350))[e(361)](e(400));1!==(""+n/n)[e(390)]||n%20==0?function(){return!0}[e(349)]("debugger").call(e(352)):function(){return!1}[e(349)](e(380)+e(388))[e(361)](e(358)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=T,i=j();for(;;)try{if(129943===-parseInt(e(439))/1+parseInt(e(464))/2*(-parseInt(e(452))/3)+parseInt(e(445))/4+parseInt(e(449))/5*(-parseInt(e(459))/6)+-parseInt(e(430))/7*(-parseInt(e(462))/8)+parseInt(e(460))/9+parseInt(e(463))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const P=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[T(438)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){P(this,(function(){const n=T,t=new RegExp(n(441)),e=new RegExp(n(461),"i"),i=F(n(446));t[n(433)](i+n(453))&&e[n(433)](i+n(455))?F():i("0")}))()}();const S=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[T(438)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function T(n,t){const e=j();return(T=function(n,t){return e[n-=430]})(n,t)}S(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function("return (function() "+n(437)+");")()}catch(e){t=window}return t}(),e=t[n(442)]=t[n(442)]||{},i=[n(443),"warn",n(436),n(450),n(457),n(451),n(434)];for(let r=0;r<i.length;r++){const t=S[n(440)][n(458)][n(447)](S),o=i[r],a=e[o]||t;t[n(444)]=S[n(447)](S),t[n(431)]=a[n(431)][n(447)](a),e[o]=t}}))();const B=["rotation"];function j(){const n=["prototype","13962rjobPz","997146muZTiL","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","168856NKRTvE","4290660CRPVmX","30eRFbCY","TresMesh","stateObject","7dwWCbL","toString","debu","test","trace","MeshBasicMaterial","info",'{}.constructor("return this")( )',"apply","195356EOPsVo","constructor","function *\\( *\\)","console","log","__proto__","539736FvwCQS","init","bind","gger","555oXcVfW","error","table","22461ojLgGK","chain","TresPlaneGeometry","input","string","exception"];return(j=function(){return n})()}const D=s({__name:"hexGridMesh",setup(n){const t=T,e=new(a[t(435)]);return(n,i)=>{const r=t;return l(),p(r(465),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=v(r(454),{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(C,g({baseMaterial:d(e)},n.$attrs,{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,["baseMaterial"])])),_:1}))],8,B)}}});function F(n){function t(n){const e=T;if(typeof n===e(456))return function(n){}[e(440)]("while (true) {}")[e(438)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(440)](e(432)+e(448)).call("action"):function(){return!1}[e(440)](e(432)+"gger")[e(438)](e(466)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=A,i=z();for(;;)try{if(244161===parseInt(e(367))/1*(parseInt(e(354))/2)+parseInt(e(384))/3*(parseInt(e(374))/4)+parseInt(e(362))/5*(-parseInt(e(385))/6)+parseInt(e(388))/7*(-parseInt(e(358))/8)+-parseInt(e(402))/9+-parseInt(e(359))/10*(-parseInt(e(380))/11)+parseInt(e(398))/12)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const X=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[A(372)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function z(){const n=["609810kZCRlB","chain","length","division","网格宽度","1nNAzbm","stateObject","return (function() ","table","颜色取反","apply","debu","172aFSdWy","init","网格横向缩放","exception","bind","string","88ckNBBI","addBinding","action","#de62f2","6555iJPtJW","12iwwoXa","error","test","7JtMYPU","gridWeight","方向类别","图片纹理","prototype","waveFrequency","log","while (true) {}","toString","info","5962200DhLhyn","gger","TresCanvas","isReversed","525555IgFIUB","hexGridGround","warn","渐变强度","constructor","48176irlHMG","console","渐变宽度","input","3354728CgMDez","438660UuHAMM","counter",'{}.constructor("return this")( )'];return(z=function(){return n})()}!function(){X(this,(function(){const n=A,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=L(n(375));t[n(387)](i+n(363))&&e.test(i+n(357))?L():i("0")}))()}();const W=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[A(372)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function A(n,t){const e=z();return(A=function(n,t){return e[n-=350]})(n,t)}W(void 0,(function(){const n=A;let t;try{t=Function(n(369)+n(361)+");")()}catch(r){t=window}const e=t[n(355)]=t[n(355)]||{},i=[n(394),n(351),n(397),n(386),n(377),n(370),"trace"];for(let o=0;o<i[n(364)];o++){const t=W[n(353)][n(392)][n(378)](W),r=i[o],a=e[r]||t;t.__proto__=W[n(378)](W),t.toString=a[n(396)][n(378)](a),e[r]=t}}))();const G=s({__name:"hexGridGround",setup(n){const t=A,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),a=x({color:t(383),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new r({title:t(350),expanded:!0});return s.addBinding(a,"hasMaskTexture",{label:t(391)}),s[t(381)](a,"color",{label:"颜色"}),s.addBinding(a,"speed",{label:"速度",min:-5,max:5,step:.1}),s[t(381)](a,t(389),{label:t(366),min:.001,max:.5,step:.001}),s[t(381)](a,"raisedBottom",{label:t(356),min:.001,max:1,step:.001}),s[t(381)](a,t(393),{label:"分段",min:.001,max:1,step:.001}),s[t(381)](a,"wavePow",{label:t(352),min:1,max:30,step:.1}),s[t(381)](a,t(365),{label:"网格整体缩放",min:.1,max:50,step:.1}),s[t(381)](a,"divisionScaleX",{label:t(376),min:.1,max:10,step:.1}),s.addBinding(a,t(401),{label:t(371)}),s[t(381)](a,"direction",{label:t(390),min:3,max:6,step:1}),(n,r)=>{const s=b(t(400));return l(),f(s,{clearColor:"#666666","window-size":""},{default:m((()=>[r[0]||(r[0]=v("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(i),{enableDamping:"",autoRotate:""}),h(D,g(a,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(o,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=A;if(typeof n===e(379))return function(n){}.constructor(e(395)).apply(e(360));1!==(""+n/n)[e(364)]||n%20==0?function(){return!0}[e(353)](e(373)+e(399)).call(e(382)):function(){return!1}[e(353)](e(373)+"gger").apply(e(368)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{G as default};

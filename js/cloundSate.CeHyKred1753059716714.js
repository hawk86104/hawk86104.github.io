import{b as e,m as a,a as t}from"./@tresjs.oHLVlBVa1753059716714.js";import{_ as o,l as s}from"./three-tile.Qgxj123P1753059716714.js";import{s as n,c as r,a as l,i}from"./informationDiv.IfBTunNe1753059716714.js";import{d as p,aa as c,w as m,G as u,o as d,u as g,I as h,r as _,b as f,F as v,e as S,f as y,j,m as D,a5 as b,h as x,a7 as I,a8 as w}from"./@vue.DwSifnVs1753059716714.js";import{bI as M,C as F,a3 as G,ah as T,V as B}from"./three.DR_5uK8e1753059716714.js";import{P as L}from"./tweakpane.C0HtAJSg1753059716714.js";import"./postprocessing.BrgFZ9pj1753059716714.js";import"./@vueuse.mXirru381753059716714.js";/* empty css                                                                                    */import"./@fesjs.CV3tl4s01753059716714.js";import"./vue-router.Tg4SAQ0L1753059716714.js";import"./lodash-es.C7pWAXPe1753059716714.js";import"./@qlin.q6OWdsQV1753059716714.js";import"./pinia.DQkQ1TR81753059716714.js";import"./@babel.BPq7uOAK1753059716714.js";import"./@floating-ui.BFjFSAYt1753059716714.js";import"./@juggle.CcBCnTIR1753059716714.js";const C=["position"],P=["scale","material","rotateX","position-y"],W=p({__name:"cloundSateShow",props:{map:{},height:{default:100},color:{default:"#cccccc"},opacity:{default:.6}},async setup(a){let t,o;const s=a,r=new M({displacementMap:new T,transparent:!0,side:G,opacity:s.opacity,color:new F(s.color)});r.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * 0.5 + 0.0 );"),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","\n            #include <alphamap_fragment>\n            float h = texture2D(map, vMapUv ).a;\n            diffuseColor.rgb *= h;\n            diffuseColor.a = clamp(diffuseColor.a * 2.0, 0.0, 1.0);\n            ")};const l=s.map.geo2pos(new B(105,34,0));l.applyMatrix4(s.map.matrix);const i=n(s.map,{x:67,y:11},{x:140,y:57},s.height),p=["https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171300.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171400.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171500.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171600.HDF.png"];let _=0;const f=([t,o]=c((()=>e(p))),t=await t,o(),t);r.map=f[_],m((()=>[s.color,s.opacity]),(([e,a])=>{r.color.setStyle(e),r.opacity=a}));let v=null,S=!1;return S?(clearInterval(v),v=null,S=!1):(v=setInterval((()=>{_=_<p.length-1?_+1:0,r.map=f[_],r.needsUpdate=!0,console.log(_)}),1e3),S=!0),(e,a)=>(d(),u("TresGroup",{position:[...g(l)]},[h("TresMesh",{scale:[g(i).x,g(i).y,e.height],material:g(r),rotateX:-Math.PI/2,renderOrder:9999,"position-y":e.height/5},a[0]||(a[0]=[h("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)]),8,P)],8,C))}}),A=["object"],E=p({__name:"mapBoxShow2",setup(e){const t=_({height:500,color:"#cccccc",opacity:.6}),n=new L({title:"参数"});n.addBinding(t,"color",{label:"颜色"}),n.addBinding(t,"height",{label:"高度",min:10,max:5e3,step:10}),n.addBinding(t,"opacity",{label:"透明度",min:0,max:1,step:.1});const i=new o({imgSource:[new s.GDSource({style:"6"}),new s.GDSource({style:"8"})],lon0:90,minLevel:2,maxLevel:20});i.rotateX(-Math.PI/2);const p=new B(105,34,0),c=new B(110,0,1e4),x=i.localToWorld(i.geo2pos(p)),I=i.localToWorld(i.geo2pos(c)),w=f(),{camera:M,controls:F,scene:G,renderer:T}=a();return M.value&&M.value.position.copy(I),m((()=>F.value),(e=>{e&&(e.target.copy(x),r(e,M.value,G.value))})),m((()=>w.value),(e=>{e&&e.target.position.copy(x)})),l(M.value,T.value.domElement,i),(e,a)=>(d(),u(v,null,[h("TresDirectionalLight",{ref_key:"tdLight",ref:w,position:[0,2e3,1e3],intensity:1},null,512),h("primitive",{object:g(i)},null,8,A),(d(),S(b,null,{default:y((()=>[j(W,D({map:g(i)},t),null,16,["map"])])),_:1}))],64))}}),N=p({__name:"cloundSate",setup(e){const a=_({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),o=_({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,s)=>{const n=x("TresCanvas");return d(),u(v,null,[j(n,D(a,{"window-size":""}),{default:y((()=>[s[0]||(s[0]=h("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),j(g(t),I(w(o)),null,16),s[1]||(s[1]=h("TresAmbientLight",{intensity:1},null,-1)),j(E)])),_:1},16),j(i)],64)}}});export{N as default};

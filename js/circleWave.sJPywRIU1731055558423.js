import{e as n,b as t,U as e}from"./@tresjs.KsuCtVXf1731055558423.js";import{P as o}from"./tweakpane.yHWGBmom1731055558423.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.knjSAXhm1731055558423.js";import{_ as a}from"./three.3b9CEYeV1731055558423.js";import{d as c,b as s,a6 as i,r as u,a3 as l,o as f,D as p,J as v,aj as d,ak as m,e as g,f as h,g as w,j as k,u as S,al as y,m as _}from"./@vue.u2cBPEWn1731055558423.js";import"./@vueuse.GLWi_e1b1731055558423.js";import"./all.three.JusmaqcJ1731055558423.js";import"./oimophysics.x0jH7fze1731055558423.js";const I=C;!function(n,t){const e=C,o=D();for(;;)try{if(420934===parseInt(e(159))/1*(-parseInt(e(133))/2)+-parseInt(e(147))/3*(parseInt(e(113))/4)+parseInt(e(108))/5+-parseInt(e(122))/6+parseInt(e(137))/7*(parseInt(e(161))/8)+parseInt(e(151))/9*(parseInt(e(131))/10)+parseInt(e(117))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const b=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[C(134)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){b(this,(function(){const n=C,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=T("init");t.test(o+n(110))&&e[n(149)](o+n(160))?T():o("0")}))()}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[C(134)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();M(void 0,(function(){const n=C,t=function(){const n=C;let t;try{t=Function(n(144)+n(138)+");")()}catch(e){t=window}return t}(),e=t[n(153)]=t[n(153)]||{},o=[n(135),n(109),n(115),n(154),n(123),n(142),"trace"];for(let r=0;r<o[n(128)];r++){const t=M.constructor[n(124)][n(140)](M),a=o[r],c=e[a]||t;t[n(150)]=M[n(140)](M),t.toString=c[n(107)][n(140)](c),e[a]=t}}))();const x=[I(157),"scale"];function C(n,t){const e=D();return(C=function(n,t){return e[n-=107]})(n,t)}function D(){const n=["#000000","RepeatWrapping","debu","colorDark","722988NDilfB","exception","prototype","TresMesh","value","call","length","color","tmRef","6690rNrmlV","Color","211454masItj","apply","log","gger","7FrvBbb",'{}.constructor("return this")( )',"uScanColor","bind","wrapT","table","\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n","return (function() ","uScanColorDark","AdditiveBlending","412002nKgMMZ","uniforms","test","__proto__","4419LNXzwr","\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n","console","error","stateObject","TresPlaneGeometry","rotation-x","constructor","5bqzJWM","input","1962544YkjviZ","wrapS","#ffffff","toString","159510oTXaZe","warn","chain","material","while (true) {}","20nskLSU","action","info","DoubleSide","12661418Sppueb"];return(D=function(){return n})()}const j=c({__name:"shaderCircleWave",props:{color:{default:I(163)},colorDark:{default:I(118)},speed:{default:1},scale:{default:2}},async setup(e){const o=I;let r,c;const g=e,h=s(),{onLoop:w}=n();w((({delta:n})=>{const t=C;h[t(126)]&&(h.value.material[t(148)].uTime[t(126)]+=n*g.speed)}));const k=([r,c]=i((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,c(),r);k[o(162)]=a[o(119)],k[o(141)]=a[o(119)];const S=u({side:a[o(116)],transparent:!0,blending:a[o(146)],flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:k},uScanColor:{type:"v3",value:new(a[o(132)])(g[o(129)])},uScanColorDark:{type:"v3",value:new(a[o(132)])(g[o(121)])}},vertexShader:o(143),fragmentShader:o(152)});return l((()=>{const n=o;h.value&&(h.value[n(111)][n(148)][n(139)][n(126)]=new(a[n(132)])(g[n(129)]),h[n(126)][n(111)][n(148)][n(145)][n(126)]=new(a[n(132)])(g[n(121)]))})),(n,t)=>{const e=o;return f(),p(e(125),{ref_key:e(130),ref:h,"rotation-x":-Math.PI/2,scale:n.scale},[t[0]||(t[0]=v(e(156),{args:[1,1]},null,-1)),v("TresShaderMaterial",d(m(S)),null,16)],8,x)}}});function T(n){function t(n){const e=C;if("string"==typeof n)return function(n){}[e(158)](e(112))[e(134)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(158)](e(120)+e(136))[e(127)](e(114)):function(){return!1}[e(158)](e(120)+e(136))[e(134)](e(155)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const R=W;function W(n,t){const e=P();return(W=function(n,t){return e[n-=136]})(n,t)}function P(){const n=["circleWave","TresAmbientLight","debu","prototype","5054664mFhiiQ","table","apply","5613oWLvrY","return (function() ","length","1640plpfSc","log","52678ReSJRa","color","toString","1832589SLYkmZ","call","TresCanvas","test","info","input","stateObject","圈渐变色","action","speed","#000000","bind","chain","gger","init","24306MsOWOw","console","colorDark","exception","warn","constructor","string","#ffffff","counter","TresPerspectiveCamera","924NcIfDL","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","25751uUDQge",'{}.constructor("return this")( )',"7JDywFX","addBinding","scale","7171404QmDMyi","25oMuebY","function *\\( *\\)","15eEzyap"];return(P=function(){return n})()}!function(n,t){const e=W,o=P();for(;;)try{if(331230===-parseInt(e(160))/1*(parseInt(e(175))/2)+parseInt(e(170))/3*(-parseInt(e(152))/4)+parseInt(e(162))/5*(parseInt(e(142))/6)+-parseInt(e(156))/7*(-parseInt(e(167))/8)+-parseInt(e(178))/9+parseInt(e(173))/10*(parseInt(e(154))/11)+parseInt(e(159))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const O=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(169)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){O(this,(function(){const n=W,t=new RegExp(n(161)),e=new RegExp(n(153),"i"),o=Z(n(141));t[n(181)](o+n(139))&&e.test(o+n(183))?Z():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[W(169)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();z(void 0,(function(){const n=W;let t;try{t=Function(n(171)+n(155)+");")()}catch(r){t=window}const e=t[n(143)]=t.console||{},o=[n(174),n(146),n(182),"error",n(145),n(168),"trace"];for(let a=0;a<o[n(172)];a++){const t=z[n(147)][n(166)][n(138)](z),r=o[a],c=e[r]||t;t.__proto__=z.bind(z),t[n(177)]=c[n(177)][n(138)](c),e[r]=t}}))();const U=c({__name:R(163),setup(n){const t=R,a=u({reflectivity:.1,showGridHelper:!1,scale:1}),c=u({color:t(149),colorDark:t(137),speed:1,scale:2}),s=new o({title:"shaderCircleWave地面",expanded:!0});return s[t(157)](c,t(176),{label:"圈颜色"}),s[t(157)](c,t(144),{label:t(185)}),s[t(157)](c,t(136),{label:"速度",min:.1,max:5,step:.1}),s[t(157)](c,t(158),{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const s=t,i=g(s(180));return f(),h(i,{clearColor:"#201919","window-size":""},{default:w((()=>[o[0]||(o[0]=v(s(151),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),k(S(e),{enableDamping:""}),o[1]||(o[1]=v(s(164),{intensity:6},null,-1)),(f(),h(y,null,{default:w((()=>[k(j,d(m(c)),null,16)])),_:1})),(f(),h(y,null,{default:w((()=>[k(r,_({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function Z(n){function t(n){const e=W;if(typeof n===e(148))return function(n){}[e(147)]("while (true) {}")[e(169)](e(150));1!==(""+n/n)[e(172)]||n%20==0?function(){return!0}[e(147)]("debu"+e(140))[e(179)](e(186)):function(){return!1}[e(147)](e(165)+"gger")[e(169)](e(184)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{U as default};

import{_ as t,h as n}from"./three.lAfZYOpc1736493808390.js";import{m as e}from"./@tresjs.g7tJPOCI1736493808390.js";import{d as o,P as a}from"./@pmndrs.oxz-0pU-1736493808390.js";import{d as r,b as s,w as i,a1 as c,o as u,D as l,J as f,aj as p,ak as d}from"./@vue.-Mz_IXfk1736493808390.js";const h=g;function m(){const t=["string","set","value","1186977MGfoVf","shadows render end","return (function() ","opacity","lightPosition","test","position","abs","14FOtqrs","action","76572ejHgSa","frames","rotate-x","2057136SHsuxe","130kpWdcF","color","counter","MathUtils","shadows render start",'{}.constructor("return this")( )',"blendWindow","left","height","Group","camera","380528BzHwqT","#000000","error","prototype","debu","blend","amount","sin","alphaTest","TresPlaneGeometry","6fSfkrm","3TBmxBJ","add","log","castShadow","width","shadow","7732jJOoeY","children","Vector3","accumulativeShadowsCom","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","length","warn","prepare","toString","finish","info","stateObject","__proto__","init","randFloatSpread","bind","right","100ORKrft","clear","DirectionalLight","gPlane","trace","45222CEXOUP","ambient","53308ISgfZg","radius","intensity","apply","size","gger","configure","table","random","bias","remove","cos","mapSize","acos","call","while (true) {}","far","constructor","near"];return(m=function(){return t})()}!function(t,n){const e=g,o=m();for(;;)try{if(112520===-parseInt(e(351))/1*(parseInt(e(344))/2)+parseInt(e(345))/3*(parseInt(e(287))/4)+-parseInt(e(323))/5*(-parseInt(e(285))/6)+parseInt(e(317))/7*(-parseInt(e(334))/8)+-parseInt(e(319))/9*(-parseInt(e(280))/10)+parseInt(e(309))/11+-parseInt(e(322))/12)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){w(this,(function(){const t=g,n=new RegExp(t(357)),e=new RegExp(t(356),"i"),o=I(t(276));n[t(314)](o+"chain")&&e[t(314)](o+"input")?I():o("0")}))()}();const b=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(t,n){const e=m();return(g=function(t,n){return e[t-=269]})(t,n)}b(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(311)+t(328)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=[t(347),t(269),t(273),t(336),"exception",t(294),t(284)];for(let a=0;a<o[t(358)];a++){const n=b[t(304)][t(337)][t(278)](b),r=o[a],s=e[r]||n;n[t(275)]=b[t(278)](b),n[t(271)]=s[t(271)].bind(s),e[r]=n}}))();const M=[h(321)],y=r({__name:h(354),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:h(335)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=h,w=r;let b=s();const{extend:g,scene:y,renderer:I,camera:S}=e();g({SoftShadowMaterial:o});const x={position:(new(t[m(353)]))[m(307)](w[m(313)].x,w[m(313)].y,w[m(313)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},z=new a(I[m(308)],y[m(308)],x[m(299)]),_={map:z.progressiveLightMap2.texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:w.blend,alphaTest:w[m(342)],opacity:w[m(312)],color:w.color},v=new(t[m(332)]);for(let n=0;n<x[m(340)];n++){const n=new(t[m(282)])(16777215,x[m(289)]/x[m(340)]);n[m(348)]=!0,n[m(350)][m(296)]=x.bias,n[m(350)].camera[m(305)]=x[m(305)],n[m(350)][m(333)][m(303)]=x[m(303)],n.shadow[m(333)][m(279)]=x[m(291)]/2,n[m(350)].camera[m(330)]=-x[m(291)]/2,n[m(350)][m(333)].top=x[m(291)]/2,n[m(350)][m(333)].bottom=-x[m(291)]/2,n[m(350)][m(299)][m(349)]=x.mapSize,n[m(350)][m(299)][m(331)]=x[m(299)],v[m(346)](n)}const P=()=>{const e=m,o=x[e(315)][e(358)]();for(let a=0;a<v[e(352)][e(358)];a++){const r=v.children[a];if(Math[e(295)]()>w[e(286)])r[e(315)][e(307)](x[e(315)].x+n[e(277)](x[e(288)]),x.position.y+t[e(326)][e(277)](x.radius),x[e(315)].z+t[e(326)][e(277)](x[e(288)]));else{let t=Math[e(300)](2*Math[e(295)]()-1)-Math.PI/2,n=2*Math.PI*Math[e(295)]();r.position[e(307)](Math[e(298)](t)*Math[e(298)](n)*o,Math[e(316)](Math[e(298)](t)*Math.sin(n)*o),Math[e(341)](t)*o)}}},j=(t=1)=>{const n=m;y.value[n(346)](v),z[n(270)]();for(let e=0;e<t;e++)P(),z.update(S[n(308)],w[n(329)]),console[n(347)]("shadows plm update",e);y[n(308)][n(297)](v),z[n(272)]()};i((()=>b.value),(t=>{const n=m;t&&(z[n(293)](t),z[n(281)](),console[n(347)](n(327)),j(w.frames),console[n(347)](n(310)))}));const T=()=>{const t=m;z.clear(),j(w[t(320)])};return c((()=>{const t=m;b[t(308)]&&(w[t(312)]&&(b[t(308)][t(355)][t(312)]=w[t(312)]),w[t(342)]&&(b[t(308)][t(355)][t(342)]=w[t(342)]),w.color&&b[t(308)][t(355)][t(324)][t(307)](w[t(324)]),w[t(339)]&&(b.value[t(355)][t(339)]=w[t(339)]))})),i((()=>w[m(313)]),(t=>{const n=m;t&&(console[n(347)](w[n(313)]),x.position.set(t.x,t.y,t.z),T())}),{deep:!0}),i((()=>[w[m(320)],w.blendWindow,w[m(286)]]),(()=>{T()})),(t,n)=>{const e=m;return u(),l("TresMesh",{"receive-shadow":"",ref_key:e(283),ref:b,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=f(e(343),{args:[1,1]},null,-1)),f("TresSoftShadowMaterial",p(d(_)),null,16)],8,M)}}});function I(t){function n(t){const e=g;if(typeof t===e(306))return function(t){}[e(304)](e(302))[e(290)](e(325));1!==(""+t/t)[e(358)]||t%20==0?function(){return!0}[e(304)]("debu"+e(292))[e(301)](e(318)):function(){return!1}[e(304)](e(338)+e(292))[e(290)](e(274)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{y as _};

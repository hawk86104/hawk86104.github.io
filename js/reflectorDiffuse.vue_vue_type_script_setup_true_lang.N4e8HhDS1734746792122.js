import{c8 as t,a3 as n,C as e,k as r}from"./three.1FILWcBb1734746792122.js";import{b as o}from"./@tresjs.vA_UT8oy1734746792122.js";import{R as c}from"./all.three.EfBg0caK1734746792122.js";import{d as a,b as i,a6 as s,a3 as u,o as f,D as l,J as p,m,u as d}from"./@vue.-THQH3GC1734746792122.js";function v(){const t=["3yfOkUs","length","vertexShader","log","568388veEYCR","toString","void main() {","constructor","chain","exception","#include <project_vertex>","24OltWHg","fragmentShader","action","console","gger","bind","while (true) {}","warn","apply","input","return (function() ","833062rDJJum","541900FMLVwd","debu","replace","init","stateObject",'{}.constructor("return this")( )',"call","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","1666865coODSb","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","12215214pvExYW","2331756WNgrFf","counter","trace","1504972QHUZhY","error"];return(v=function(){return t})()}!function(t,n){const e=x,r=v();for(;;)try{if(333017===parseInt(e(188))/1+parseInt(e(187))/2+-parseInt(e(204))/3*(-parseInt(e(208))/4)+parseInt(e(196))/5+-parseInt(e(199))/6+parseInt(e(202))/7*(parseInt(e(215))/8)+-parseInt(e(198))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(184)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(191));n.test(r+t(212))&&e.test(r+t(185))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(186)+t(193)+");")()}catch(e){n=window}return n}(),e=n[t(218)]=n[t(218)]||{},r=[t(207),t(222),"info",t(203),t(213),"table",t(201)];for(let o=0;o<r[t(205)];o++){const n=g[t(211)].prototype[t(220)](g),c=r[o],a=e[c]||n;n.__proto__=g[t(220)](g),n[t(209)]=a.toString[t(220)](a),e[c]=n}}))();function x(t,n){const e=v();return(x=function(t,n){return e[t-=184]})(t,n)}function y(t){function n(t){const e=x;if("string"==typeof t)return function(t){}[e(211)](e(221))[e(184)](e(200));1!==(""+t/t)[e(205)]||t%20==0?function(){return!0}[e(211)]("debu"+e(219))[e(194)](e(217)):function(){return!1}[e(211)](e(189)+e(219))[e(184)](e(192)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=C;!function(t,n){const e=C,r=S();for(;;)try{if(658625===-parseInt(e(316))/1*(parseInt(e(365))/2)+-parseInt(e(378))/3*(-parseInt(e(317))/4)+parseInt(e(357))/5*(-parseInt(e(342))/6)+-parseInt(e(336))/7*(-parseInt(e(313))/8)+parseInt(e(324))/9+-parseInt(e(359))/10*(-parseInt(e(331))/11)+-parseInt(e(343))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=C,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(372),"i"),r=E(t(326));n[t(319)](r+"chain")&&e[t(319)](r+t(346))?E():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=S();return(C=function(t,n){return e[t-=312]})(t,n)}w(void 0,(function(){const t=C;let n;try{n=Function(t(355)+t(362)+");")()}catch(o){n=window}const e=n[t(377)]=n[t(377)]||{},r=[t(353),t(376),"info",t(318),t(328),t(370),"trace"];for(let c=0;c<r[t(379)];c++){const n=w[t(320)][t(327)][t(337)](w),o=r[c],a=e[o]||n;n.__proto__=w.bind(w),n[t(360)]=a.toString.bind(a),e[o]=n}}))();const I=[b(345)],M=[b(333),b(321)];function S(){const t=["while (true) {}","21201ZcQROa","4LDPHdh","error","test","constructor","visible","mirror","textureMatrix","2458683fiQGMp","assign","init","prototype","exception","apply","#444","33YCmsCc","counter","object","onBeforeRender","textureMatrixUniform","7ImbraS","bind","mixStrength","primitive","stateObject","showGridHelper","18sXCkUa","23975976NzRMAV","action","rotation-x","input","color","wrapS","TresMeshStandardMaterial","set","tpgRef","aoMap","log","gger","return (function() ","update","1130210VNErpC","#ffffff","3688700LVMpQq","toString","tmRef",'{}.constructor("return this")( )',"add","call","4WGAsFr","repeat","attributes","value","reflectMap","table","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","TresMesh","TresPlaneGeometry","warn","console","2388021TKngJz","length","debu","9610776SdaAfo","TresGroup"];return(S=function(){return t})()}const j=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(358)}},async setup(a){const v=b;let h,g;const y=a,_=new t(9.5,10),w=i(),C=i(),S=i(),j=new c,E={mirror:{value:y[v(322)]},mixStrength:{value:y[v(338)]}},z=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var R=0;R<3;R++)z[R][v(348)]=n,z[R].wrapT=n,z[R][v(366)][v(350)](16,16);const T={color:new e(v(330)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},k=t=>{const n=v;t[n(371)][n(369)]=j.renderTargetUniform,t[n(371)][n(323)]=j[n(335)],t[n(371)]=Object[n(325)](t[n(371)],E),(t=>{const n=x;t.vertexShader=t[n(206)].replace(n(210),n(195)),t[n(206)]=t[n(206)][n(190)](n(214),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=x;t[n(216)]=t[n(216)][n(190)]("void main() {","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t.fragmentShader=t[n(216)].replace("#include <emissivemap_fragment>",n(197))})(t)};return u((()=>{const t=v;w[t(368)]&&(w.value.attributes.uv1=w[t(368)][t(367)].uv),S[t(368)]&&(S[t(368)][t(352)].channel=1,S[t(368)].onBeforeCompile=k),C.value&&(C[t(368)][t(363)](j),C.value[t(334)]=(n,e,r)=>{j[t(356)](n,e,r)}),y[t(347)]&&S[t(368)]&&(S[t(368)][t(347)]=new e(y[t(347)]))})),(t,n)=>{const e=v;return f(),l(e(314),null,[p(e(374),{ref_key:e(361),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(375),{ref_key:e(351),ref:w,args:[10,10]},null,512),p(e(349),m({ref_key:"tmsmRef",ref:S},T),null,16)],8,I),p(e(339),{object:d(_),visible:t[e(341)]},null,8,M)])}}});function E(t){function n(t){const e=C;if(typeof t===e(373))return function(t){}[e(320)](e(315))[e(329)](e(332));1!==(""+t/t)[e(379)]||t%20==0?function(){return!0}[e(320)](e(312)+e(354))[e(364)](e(344)):function(){return!1}[e(320)](e(312)+e(354))[e(329)](e(340)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

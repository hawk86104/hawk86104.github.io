import{a6 as t,_ as e,C as n,a0 as r}from"./three.-W-Avfc61734492426993.js";import{e as a,W as s,U as o,c as i}from"./@tresjs.WiFlZbqU1734492426993.js";import{a as l}from"./index.GoKrQvrO1734492426993.js";import"./index.bjrbQKEI1734492426993.js";import{z as u}from"./three-custom-shader-material.5sc6Ku_Y1734492426993.js";import{p as c}from"./gl-noise.BrVtymbx1734492426993.js";import{d as p,b as f,a3 as g,w as h,o as m,D as v,J as d,j as _,u as b,r as y,f as w,g as M,aj as j,ak as x,m as C,al as I}from"./@vue.-THQH3GC1734492426993.js";import{P as z}from"./tweakpane.yHWGBmom1734492426993.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.lZil-L1T1734492426993.js";import"./@vueuse.HnQgsJ961734492426993.js";import"./three-stdlib.JXmeYOx_1734492426993.js";import"./@pmndrs.2S_aDSAC1734492426993.js";import"./object-hash.jUbfcDFp1734492426993.js";import"./@amap.VVwFehhA1734492426993.js";import"./jszip.h2xC22IC1734492426993.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.ZKvR8GT61734492426993.js";import"./all.three.-35MVhE11734492426993.js";import"./oimophysics.x0jH7fze1734492426993.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ccUiRlDO1734492426993.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.uRMaWgid1734492426993.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.5xJfj9Ef1734492426993.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.tc-Hu1OP1734492426993.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.65ISCpqJ1734492426993.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.8IXPc8DG1734492426993.js";const T=F;!function(t,e){const n=F,r=G();for(;;)try{if(956246===parseInt(n(294))/1*(-parseInt(n(264))/2)+-parseInt(n(254))/3+parseInt(n(295))/4*(-parseInt(n(305))/5)+parseInt(n(290))/6+-parseInt(n(298))/7*(-parseInt(n(299))/8)+parseInt(n(267))/9*(-parseInt(n(284))/10)+-parseInt(n(286))/11*(-parseInt(n(283))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(248)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=F,e=new RegExp(t(256)),n=new RegExp(t(296),"i"),r=D("init");e.test(r+t(241))&&n[t(258)](r+t(262))?D():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(248)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();B(void 0,(function(){const t=F;let e;try{e=Function(t(292)+t(246)+");")()}catch(a){e=window}const n=e.console=e.console||{},r=[t(297),t(276),t(282),t(281),t(265),t(268),t(250)];for(let s=0;s<r.length;s++){const e=B[t(257)].prototype.bind(B),a=r[s],o=n[a]||e;e[t(261)]=B[t(272)](B),e[t(285)]=o[t(285)].bind(o),n[a]=e}}))();const O=[T(279)],W=["args"];function F(t,e){const n=G();return(F=function(t,e){return n[t-=241]})(t,e)}function G(){const t=["477580EZALmp","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","7XRqcXL","9804936SnZKlW","fragment","vertex","#b3ffff","TresBoxGeometry","needsUpdate","55oBTirO","chain","flatShading","uTime","debu","uHeight",'{}.constructor("return this")( )',"Color","apply","waterHighlight","trace","MeshPhysicalMaterial","tmRef","gger","1662531bnUCxk","height","function *\\( *\\)","constructor","test","fragmentShader","counter","__proto__","input","vertexShader","116tbburA","exception","Flatshading","36kEksxQ","table","waterColor","side","call","bind","value","convertLinearToSRGB","TresMesh","warn","stateObject","string","rotation-x","brightness","error","info","25965084uzvVvV","2007100VrsmOj","toString","11VyUUtE","DoubleSide","while (true) {}","material","9654996FhcuNH","customWaterMesh","return (function() ","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","23654TlHtOv"];return(G=function(){return t})()}const k=p({__name:T(291),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:T(302)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const o=T,i=t,l=f(null),p={vertex:o(293),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},y={uTime:{value:0},waterColor:{value:new(e[o(247)])(i.waterColor)[o(274)]()},waterHighlight:{value:new(e[o(247)])(i[o(249)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[o(280)]},uHeight:{value:i[o(255)]}},{onLoop:w}=a();return w((({elapsed:t})=>{const e=o;y[e(243)][e(273)]=-t/5})),g((()=>{const t=o;i.height&&(y[t(245)][t(273)]=i[t(255)]),i[t(269)]&&(y[t(269)][t(273)]=new(e[t(247)])(i[t(269)])[t(274)]()),i.waterHighlight&&(y[t(249)].value=new n(i[t(249)])[t(274)]()),i[t(280)]&&(y[t(280)][t(273)]=i[t(280)])})),h((()=>i[o(266)]),(t=>{const e=o;l[e(273)][e(289)][e(304)]=!0})),h((()=>i.baseMaterial),(t=>{const n=o,r=new u({baseMaterial:e[t],vertexShader:c(p[n(301)]),fragmentShader:p[n(300)],uniforms:y,flatShading:i[n(266)],side:e[n(287)],roughness:.2,metalness:.1,silent:!0});l[n(273)].material.dispose(),l[n(273)][n(289)]=r})),(t,n)=>{const a=o;return m(),v(a(275),{ref_key:a(252),ref:l,"rotation-x":-Math.PI/2},[d(a(303),{args:[5,5,t.height,64,64,1]},null,8,W),_(b(s),{baseMaterial:e[a(251)],vertexShader:b(c)(p[a(301)]),fragmentShader:p[a(300)],uniforms:y,side:r,roughness:.2,metalness:.1,flatShading:t[a(266)],silent:""},null,8,["baseMaterial",a(263),a(259),a(270),a(242)])],8,O)}}});function D(t){function e(t){const n=F;if(typeof t===n(278))return function(t){}.constructor(n(288))[n(248)](n(260));1!==(""+t/t).length||t%20==0?function(){return!0}[n(257)](n(244)+n(253))[n(271)]("action"):function(){return!1}[n(257)](n(244)+n(253)).apply(n(277)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=L,r=A();for(;;)try{if(325928===parseInt(n(456))/1+parseInt(n(433))/2+-parseInt(n(411))/3+parseInt(n(467))/4*(-parseInt(n(409))/5)+-parseInt(n(464))/6*(parseInt(n(415))/7)+parseInt(n(440))/8*(parseInt(n(445))/9)+-parseInt(n(423))/10*(-parseInt(n(436))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(){const t=["4133817lJHpym","call","init","MeshBasicMaterial","pos-z.jpg","while (true) {}","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","#52a7f7","TresAmbientLight","浪头颜色","MeshPhysicalMaterial","112310OXVJNu","debu","MeshStandardMaterial","neg-z.jpg","target","MeshPhongMaterial","counter","constructor","3372LEZVHz","chain","neg-y.jpg","2708ZXFcAy","log","function *\\( *\\)","test","addBinding","MeshNormalMaterial","__proto__","1510KWAEEd","length","1928742yLoBcc","MeshLambertMaterial","水体颜色","bind","6685YFJtoY","#3a78a2","apply","neg-x.jpg","change","toString","baseMaterial","waterColor","2494130QBsyHC","exception","action","brightness","MeshToonMaterial","#b3ffff","waterHighlight","list","addBlade","trace","1279114ikMmFB","string","ACESFilmicToneMapping","22vIkgHD","error","console",'{}.constructor("return this")( )',"8bMXIuI","input","prototype","gger","MeshDepthMaterial"];return(A=function(){return t})()}!function(){P(this,(function(){const t=L,e=new RegExp(t(469)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=R(t(447));e.test(r+t(465))&&n[t(470)](r+t(441))?R():r("0")}))()}();const E=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function L(t,e){const n=A();return(L=function(t,e){return n[t-=409]})(t,e)}E(void 0,(function(){const t=L;let e;try{e=Function("return (function() "+t(439)+");")()}catch(a){e=window}const n=e[t(438)]=e[t(438)]||{},r=[t(468),"warn","info",t(437),t(424),"table",t(432)];for(let s=0;s<r[t(410)];s++){const e=E.constructor[t(442)].bind(E),a=r[s],o=n[a]||e;e[t(473)]=E[t(414)](E),e[t(420)]=o[t(420)][t(414)](o),n[a]=e}}))();const N=p({__name:"customWater",setup(t){const n=L,r=y({alpha:!0,toneMapping:e[n(435)],windowSize:!0,clearColor:10066329}),a=y({enableDamping:!0,autoRotate:!1}),s=y({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:n(416),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=y({height:.2,Flatshading:!1,waterColor:n(452),waterHighlight:n(428),brightness:1,baseMaterial:n(455)}),c=new z;return c[n(471)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(471)](u,n(422),{label:n(413)}),c[n(471)](u,n(429),{label:n(454)}),c[n(471)](u,n(426),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,"Flatshading",{label:"Flatshading"}),c[n(431)]({view:n(430),label:"材质",options:[{text:n(455),value:"MeshPhysicalMaterial"},{text:"MeshBasicMaterial",value:n(448)},{text:n(472),value:n(472)},{text:n(458),value:"MeshStandardMaterial"},{text:n(461),value:n(461)},{text:n(427),value:n(427)},{text:n(412),value:n(412)},{text:n(444),value:n(444)}],value:u[n(421)]}),c.on(n(419),(t=>{"材质"===t[n(460)].label&&(u.baseMaterial=t.value)})),(t,e)=>{const c=n;return m(),w(b(i),C(r,{"window-size":""}),{default:M((()=>[e[0]||(e[0]=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),_(b(o),j(x(a)),null,16),e[1]||(e[1]=d(c(453),{intensity:.5},null,-1)),e[2]||(e[2]=d("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),_(k,j(x(u)),null,16),_(b(S),C({args:[3,3]},s,{position:[0,-.5,0]}),null,16),(m(),w(I,null,{default:M((()=>[_(b(l),{files:["pos-x.jpg",c(418),"pos-y.jpg",c(466),c(449),c(459)],path:c(451)})])),_:1}))])),_:1},16)}}});function R(t){function e(t){const n=L;if(typeof t===n(434))return function(t){}[n(463)](n(450))[n(417)](n(462));1!==(""+t/t).length||t%20==0?function(){return!0}[n(463)](n(457)+"gger")[n(446)](n(425)):function(){return!1}[n(463)](n(457)+n(443)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{N as default};

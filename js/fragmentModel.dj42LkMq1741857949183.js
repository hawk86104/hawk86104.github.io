import{_ as n,c as t,cd as o}from"./three.Gi_-4zeu1741857949183.js";import{e as r,D as e,a,o as s}from"./@tresjs.8SAr0PX_1741857949183.js";import{P as i}from"./tweakpane.yDiyAAkA1741857949183.js";import{d as c,a3 as u,r as l,b as p,w as f,o as m,H as v,N as g,aj as d,ak as x,u as y,e as h,f as w,g as b,j as C,al as I}from"./@vue.NRI7TcgI1741857949183.js";import"./postprocessing.D5IzAGSN1741857949183.js";import"./@vueuse.PrSwDteH1741857949183.js";const z=j;!function(n,t){const o=j,r=A();for(;;)try{if(253851===parseInt(o(345))/1+-parseInt(o(340))/2+parseInt(o(364))/3*(parseInt(o(412))/4)+parseInt(o(356))/5+-parseInt(o(409))/6*(parseInt(o(337))/7)+parseInt(o(382))/8*(parseInt(o(411))/9)+parseInt(o(384))/10*(-parseInt(o(397))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const _=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[j(366)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){_(this,(function(){const n=j,t=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=D("init");t[n(396)](r+n(378))&&o.test(r+n(368))?D():r("0")}))()}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[j(366)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();P(void 0,(function(){const n=j,t=function(){const n=j;let t;try{t=Function(n(385)+n(372)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(375)]||{},r=[n(410),n(351),n(348),"error",n(347),n(403),n(343)];for(let e=0;e<r[n(398)];e++){const t=P[n(339)][n(361)][n(363)](P),a=r[e],s=o[a]||t;t[n(402)]=P[n(363)](P),t[n(414)]=s[n(414)][n(363)](s),o[a]=t}}))();const M=[z(395)];function j(n,t){const o=A();return(j=function(n,t){return o[n-=337]})(n,t)}function A(){const n=["return (function() ","debu","TresShaderMaterial","normal","rotateX","mergeGeometries","toNormal","value","gger","scene","geometry","test","339746dcmSeQ","length","aRandom","#ffc0fa","Vector3","__proto__","table","./draco/","string","count","变化量","position","426htoNzG","log","9NtWUpJ","128buYhoj","array","toString","40999oWGSON","clone","constructor","408484ARehuL","sin","toPosition","trace","counter","79372jmzntn","children","exception","info","refresh","set","warn","while (true) {}","call","divideScalar","tangent","1842550kCLjlW","uniforms","m2Color","BufferAttribute","addBinding","prototype","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","bind","40251DtFLdP","#bcd4ff","apply","m1Color","input","aCenter","rotateY","setAttribute",'{}.constructor("return this")( )',"disabled","onLoop","console","Color","u_progress","chain","deleteAttribute","Mesh","attributes","2444592WDlaKk","action","100THMTcK"];return(A=function(){return n})()}const N=c({__name:"fragmentModelCom",async setup(s){const c=z;let h,w;const b=t=>{const r=j,e=[];return t.traverse((t=>{const o=j;t instanceof n[o(380)]&&(t[o(395)][o(379)]("uv"),t.geometry[o(379)](o(355)),e.push(t.geometry))})),o[r(390)](e)},C=b(([h,w]=u((()=>e(c(362),{draco:!0,decoderPath:c(404)}))),h=await h,w(),h)[c(394)][c(346)][0]);C[c(389)](Math.PI/2),C.translate(0,-.9,0);const I=C[c(338)]().toNonIndexed(),_=b(([h,w]=u((()=>e("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:c(404)}))),h=await h,w(),h)[c(394)][c(346)][0]);_[c(389)](-Math.PI/2),_[c(370)](Math.PI/3);const P=_[c(338)]().toNonIndexed(),A=I[c(381)][c(408)][c(413)],N=I[c(381)].position.count,D=P[c(381)][c(408)].array,S=P.attributes[c(388)].array,R=P[c(381)][c(408)][c(406)],V=new Float32Array(N),F=new Float32Array(3*(N+2)),k=new Float32Array(3*(N+2)),B=new Float32Array(3*(N+2));for(let t=0;t<N;t+=3){const o=1*Math.random(),r=t%R;V[t]=o,V[t+1]=o,V[t+2]=o;const e=3*t,a=A[e],s=A[e+1],i=A[e+2],u=A[e+3],l=A[e+4],p=A[e+5],f=A[e+6],m=A[e+7],v=A[e+8],g=new(n[c(401)])(a+u+f,s+l+m,i+p+v)[c(354)](3);F[c(350)]([g.x,g.y,g.z],3*t),F[c(350)]([g.x,g.y,g.z],3*(t+1)),F[c(350)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=3*o;for(let e=0;e<3;e++){const a=r+3*e;t.set([n[a],n[a+1],n[a+2]],3*(o+e))}};d(D,k,r),d(S,B,r)}I[c(371)](c(399),new t(V,1)),I.setAttribute(c(369),new(n[c(359)])(F,3)),I.setAttribute(c(342),new(n[c(359)])(k,3)),I[c(371)](c(391),new(n[c(359)])(B,3)),console[c(410)](I.attributes);const T=([h,w]=u((()=>a(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,w(),h),E={uniforms:{u_progress:{value:-.1},matcap1:{value:T},m1Color:{type:"v3",value:new(n[c(376)])(c(400))},matcap2:{value:T},m2Color:{type:"v3",value:new(n[c(376)])(c(365))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},G=l({c1:c(400),c2:"#bcd4ff"}),W=p(.5),H=new i({title:"参数"});return H.addBinding(E[c(357)][c(377)],"value",{label:c(407),min:-.1,max:1,step:.001})[c(373)]=!0,H[c(360)](G,"c1",{label:"颜色1st"}),H[c(360)](G,"c2",{label:"颜色2rd"}),H[c(360)](W,c(392),{label:"速度",min:.001,max:1,step:.001}),f(G,(n=>{const t=c;E.uniforms[t(367)][t(392)][t(350)](n.c1),E[t(357)][t(358)][t(392)].set(n.c2)}),{deep:!0}),r()[c(374)]((({elapsed:n})=>{const t=c;E[t(357)].u_progress[t(392)]=(Math[t(341)](n*W[t(392)])+1)/2,H[t(349)]()})),(n,t)=>{const o=c;return m(),v("TresMesh",{geometry:y(I)},[g(o(387),d(x(E)),null,16)],8,M)}}});function D(n){function t(n){const o=j;if(typeof n===o(405))return function(n){}[o(339)](o(352))[o(366)](o(344));1!==(""+n/n)[o(398)]||n%20==0?function(){return!0}[o(339)](o(386)+o(393))[o(353)](o(383)):function(){return!1}.constructor(o(386)+o(393))[o(366)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}!function(n,t){const o=F,r=R();for(;;)try{if(885973===parseInt(o(405))/1+parseInt(o(394))/2*(parseInt(o(396))/3)+-parseInt(o(392))/4+-parseInt(o(383))/5*(-parseInt(o(382))/6)+parseInt(o(368))/7+parseInt(o(374))/8+-parseInt(o(380))/9*(parseInt(o(378))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function R(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","prototype","1351436OzNHYQ","log","5951939dCHcVm","chain","test","length","bind","console","6496480dBnlXf","trace","exception","constructor","10BnyyGW","apply","26812881oySfSX","toString","42IspAMh","412345HMMMkz","table","info","TresCanvas","string","TresPerspectiveCamera","call","return (function() ","ACESFilmicToneMapping","1442752BsJYpD","gger","68GWBGVz","input","56013BthsKc","#000000","stateObject","counter","debu","while (true) {}"];return(R=function(){return n})()}!function(){S(this,(function(){const n=F,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(402),"i"),r=B("init");t.test(r+n(369))&&o[n(370)](r+n(395))?B():r("0")}))()}();const V=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function F(n,t){const o=R();return(F=function(n,t){return o[n-=368]})(n,t)}V(void 0,(function(){const n=F,t=function(){const n=F;let t;try{t=Function(n(390)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(373)]=t.console||{},r=[n(406),"warn",n(385),"error",n(376),n(384),n(375)];for(let e=0;e<r[n(371)];e++){const t=V[n(377)][n(404)][n(372)](V),a=r[e],s=o[a]||t;t.__proto__=V[n(372)](V),t[n(381)]=s[n(381)][n(372)](s),o[a]=t}}))();const k=c({__name:"fragmentModel",setup(t){const o=F,r=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(397),windowSize:!0,toneMapping:n[o(391)],toneMappingExposure:.8};return(n,t)=>{const a=o,i=h(a(386));return m(),w(i,d(x(e)),{default:b((()=>[t[0]||(t[0]=g(a(388),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(y(s),d(x(r)),null,16),t[1]||(t[1]=g("TresAmbientLight",{intensity:2},null,-1)),(m(),w(I,null,{default:b((()=>[C(N)])),_:1}))])),_:1},16)}}});function B(n){function t(n){const o=F;if(typeof n===o(387))return function(n){}.constructor(o(401)).apply(o(399));1!==(""+n/n).length||n%20==0?function(){return!0}[o(377)]("debu"+o(393))[o(389)](o(403)):function(){return!1}.constructor(o(400)+o(393))[o(379)](o(398)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{k as default};

import{P as t}from"./tweakpane.yHWGBmom1736493808390.js";import{e,W as n,b as o,U as r}from"./@tresjs.g7tJPOCI1736493808390.js";import{_ as a}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.n94W_IBr1736493808390.js";import{cF as i,B as s,_ as l,az as u}from"./three.lAfZYOpc1736493808390.js";import{d as c,a6 as f,a4 as m,w as p,o as d,D as h,J as g,u as v,j as I,r as x,e as w,f as S,g as y,al as b,m as _}from"./@vue.-Mz_IXfk1736493808390.js";import"./@vueuse.kU-N6GoC1736493808390.js";import"./all.three.6_wnyCzL1736493808390.js";import"./oimophysics.x0jH7fze1736493808390.js";const T=C;!function(t,e){const n=C,o=D();for(;;)try{if(964221===parseInt(n(318))/1+-parseInt(n(270))/2+parseInt(n(290))/3+-parseInt(n(289))/4+parseInt(n(263))/5+-parseInt(n(283))/6*(-parseInt(n(300))/7)+-parseInt(n(285))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[C(275)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=C,e=new RegExp(t(277)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=W(t(273));e.test(o+t(305))&&n[t(312)](o+"input")?W():o("0")}))()}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[C(275)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function C(t,e){const n=D();return(C=function(t,e){return n[t-=262]})(t,e)}U(void 0,(function(){const t=C;let e;try{e=Function(t(309)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(294)]=e[t(294)]||{},o=[t(314),"warn",t(286),"error","exception",t(265),t(302)];for(let a=0;a<o[t(308)];a++){const e=U[t(266)].prototype[t(298)](U),r=o[a],i=n[r]||e;e[t(320)]=U[t(298)](U),e[t(315)]=i[t(315)][t(298)](i),n[r]=e}}))();const P=[T(288)],j=["position",T(262),"aNormal"],z=T(310);function D(){const t=["aIndex","8279640GsOfBO","array","table","constructor","getPoints","action","scale","2737298vtKmeJ","PointsMaterial","stateObject","init","while (true) {}","apply","baseMaterial","function *\\( *\\)","color","yRadius","set","debu","lineMagicZone","16224tCzIbI","value","6402928ZJfFer","info","map","rotateX","5573928waTgnb","3592305ZxScHf","call","TresBufferGeometry","counter","console","uHeight","Color","getAttribute","bind","alphaMap","7zsVszC","xRadius","trace","TresPoints","TresGroup","chain","height","setFromPoints","length","return (function() ","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","position","test","gger","log","toString","uTime","#90ee90","1670651auzRPs","baseColor","__proto__"];return(D=function(){return t})()}const O=c({__name:T(282),props:{height:{default:1.6},speed:{default:1},color:{default:T(317)}},async setup(t){const r=T;let a,c;const x=f(),w=t,S=([a,c]=m((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),a=await a,c(),a),y=new i(0,0,8,8,0,2*Math.PI,!1,0),b=[];for(let e=0;e<5;e++)b.push(...y[r(267)](719)),y[r(301)]+=.2,y[r(279)]+=.2;const _=new Float32Array(b[r(287)](((t,e)=>e))),N=(new s)[r(307)](b)[r(297)](r(311))[r(264)],U=new Float32Array(N[r(308)]);for(let e=0;e<N[r(308)]/3;e++){const t=3*e;N[t+1]+=.15*Math.floor(e/720);const n=e%720*3,o=3*(e%720+2880);U[t]=N[o]-N[n],U[t+1]=N[o+1]-N[n+1],U[t+2]=N[o+2]-N[n+2]}const C={uTime:{value:0},uScale:{value:x[r(269)]?x[r(269)]:1},uHeight:{value:w[r(306)]},uPerlinTexture:{value:S[1]},baseColor:{value:new(l[r(296)])(w.color)}},{onLoop:D}=e();return D((()=>{C[r(316)].value+=.01*w.speed})),p((()=>[w[r(278)],x[r(269)],w[r(306)]]),(([t,e,n])=>{const o=r;C[o(319)][o(284)][o(280)](t),C.uScale.value=e,C[o(295)][o(284)]=n})),(t,e)=>{const o=r;return d(),h(o(304),null,[g(o(303),{rotateX:-Math.PI/2,scale:.1},[g(o(292),{position:[v(N),3],aIndex:[v(_),1],aNormal:[v(U),3]},null,8,j),I(v(n),{baseMaterial:l[o(271)],vertexShader:z,fragmentShader:"\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n",uniforms:C,map:v(S)[0],alphaMap:v(S)[0],transparent:"",depthWrite:!1,blending:u,color:"#409eff",size:.1},null,8,[o(276),o(287),o(299),"blending"])],8,P)])}}});function W(t){function e(t){const n=C;if("string"==typeof t)return function(t){}[n(266)](n(274))[n(275)](n(293));1!==(""+t/t)[n(308)]||t%20==0?function(){return!0}[n(266)](n(281)+n(313))[n(291)](n(268)):function(){return!1}[n(266)](n(281)+n(313))[n(275)](n(272)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const M=B;!function(t,e){const n=B,o=A();for(;;)try{if(691187===parseInt(n(430))/1*(parseInt(n(427))/2)+parseInt(n(414))/3*(-parseInt(n(411))/4)+-parseInt(n(429))/5*(-parseInt(n(443))/6)+parseInt(n(410))/7+parseInt(n(450))/8*(-parseInt(n(433))/9)+-parseInt(n(413))/10+-parseInt(n(434))/11*(-parseInt(n(447))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const R=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[B(440)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){R(this,(function(){const t=B,e=new RegExp(t(437)),n=new RegExp(t(435),"i"),o=Z(t(418));e.test(o+"chain")&&n[t(416)](o+t(428))?Z():o("0")}))()}();const F=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function B(t,e){const n=A();return(B=function(t,e){return n[t-=409]})(t,e)}function A(){const t=["56764PjegqH","input","2060015OxwLpC","41fmoPtG","error","warn","81mFEfSj","11vhcDmC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#201919","function *\\( *\\)","TresPerspectiveCamera","toString","apply","lineMagicZone","call","6tIwPCQ","console","action","speed","7558872qaxfjQ","length","counter","498352FDsNyt","string","log","943845JSfbLk","8TOBsJd","#ff0000","1724850TiAFRG","1374132kIFCBn","TresAmbientLight","test","gger","init","bind","height","exception","color",'{}.constructor("return this")( )',"constructor","debu","addBinding"];return(A=function(){return t})()}F(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function("return (function() "+t(423)+");")()}catch(n){e=window}return e}(),n=e[t(444)]=e[t(444)]||{},o=[t(409),t(432),"info",t(431),t(421),"table","trace"];for(let r=0;r<o[t(448)];r++){const e=F[t(424)].prototype[t(419)](F),a=o[r],i=n[a]||e;e.__proto__=F[t(419)](F),e.toString=i[t(439)][t(419)](i),n[a]=e}}))();const L=c({__name:M(441),setup(e){const n=M,o=x({reflectivity:.1,showGridHelper:!0,scale:1}),i=x({color:n(412),scale:1.8,height:2.4,speed:1}),s=new t;return s.addBinding(i,n(422),{label:"颜色"}),s.addBinding(i,"scale",{label:"大小",min:.1,max:3,step:.1}),s[n(426)](i,n(420),{label:"高度",min:.1,max:3,step:.1}),s.addBinding(i,n(446),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=w("TresCanvas");return d(),S(l,{clearColor:s(436),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:y((()=>[e[0]||(e[0]=g(s(438),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),I(v(r),{enableDamping:""}),e[1]||(e[1]=g(s(415),{intensity:2},null,-1)),(d(),S(b,null,{default:y((()=>[I(O,_({position:[3,0,0]},i),null,16)])),_:1})),(d(),S(b,null,{default:y((()=>[I(O,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(d(),S(b,null,{default:y((()=>[I(a,_({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function Z(t){function e(t){const n=B;if(typeof t===n(451))return function(t){}[n(424)]("while (true) {}").apply(n(449));1!==(""+t/t)[n(448)]||t%20==0?function(){return!0}[n(424)]("debu"+n(417))[n(442)](n(445)):function(){return!1}[n(424)](n(425)+"gger")[n(440)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

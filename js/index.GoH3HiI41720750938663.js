var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{au as s,o as u,r as l,aP as f,aQ as p,aR as d,H as h,aN as v,aO as m,z as g,ba as _,C as y,Z as x,W as I,l as b,m as w,n as S,y as M,f as E,V as R,g as A,a5 as T,bQ as D,k as P,b9 as z,j as C,bw as O,d as B,a9 as F,B as k,a as j,aM as U,e as N,M as H,aj as L,a7 as Z,c0 as G,c1 as W,U as V,h as $}from"./three.c_4mN3mZ1720750938663.js";import{a as Y,$ as q,r as X}from"./@tresjs.toBU36DO1720750938663.js";import{R as K}from"./three-stdlib.m46OwZ2t1720750938663.js";import{Z as Q,b as J,a as nn,w as tn,u as en,d as rn,U as on,a3 as an,o as cn,D as sn,G as un,I as ln,a0 as fn,a7 as pn,a2 as dn,f as hn,J as vn,a8 as mn,r as gn,M as _n,X as yn,q as xn,t as In,F as bn,a4 as wn,m as Sn}from"./@vue.ApkyOKE71720750938663.js";import{M as Mn,a as En,C as Rn}from"./@pmndrs.PBnvUkpX1720750938663.js";import{o as An}from"./object-hash.uK40h2Gd1720750938663.js";var Tn=Pn;!function(n,t){for(var e=Pn,r=Bn();;)try{if(898944===-parseInt(e(268))/1*(parseInt(e(283))/2)+parseInt(e(250))/3+-parseInt(e(262))/4+-parseInt(e(258))/5*(-parseInt(e(259))/6)+parseInt(e(243))/7*(-parseInt(e(266))/8)+parseInt(e(261))/9*(-parseInt(e(280))/10)+parseInt(e(288))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(n,t){var e=Bn();return(Pn=function(n,t){return e[n-=243]})(n,t)}!function(){Dn(this,(function(){var n=Pn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(286),"i"),r=Fn(n(270));t.test(r+n(265))&&e.test(r+n(255))?Fn():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zn(void 0,(function(){var n,t=Pn;try{n=Function(t(282)+t(274)+");")()}catch(s){n=window}for(var e=n[t(287)]=n[t(287)]||{},r=[t(248),t(246),t(245),t(277),t(257),"table",t(272)],o=0;o<r[t(284)];o++){var i=zn[t(249)][t(273)][t(276)](zn),a=r[o],c=e[a]||i;i[t(251)]=zn[t(276)](zn),i[t(278)]=c[t(278)][t(276)](c),e[a]=i}}))();class Cn extends s{constructor(){var n=Pn;super(),this.virtualScene=null,this[n(271)]=new u}[Tn(281)](...n){return this.virtualScene.add(...n),this}[Tn(256)](){var n=Tn;this[n(271)][n(253)]((t=>{var e=n;t instanceof l&&(t[e(260)][e(254)](),t.material[e(254)](),t[e(285)][e(279)]&&t.material[e(279)][e(254)](),this[e(271)][e(267)](t))})),this[n(271)]=null}}const On=Cn;function Bn(){var n=["6640bdXnEG","add","return (function() ","6IvFISv","length","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","4831145uZvnQu","stateObject","3746281WvICzu","counter","info","warn","debu","log","constructor","4789476BAlgGB","__proto__","while (true) {}","traverse","dispose","input","destructor","exception","55BppeBu","747984zHvRtM","geometry","36TYzssI","3517176SeebHh","gger","action","chain","8yqUrCn","remove","363638oHeyhv","call","init","virtualScene","trace","prototype",'{}.constructor("return this")( )',"apply","bind","error","toString","map"];return(Bn=function(){return n})()}function Fn(n){function t(n){var e=Pn;if("string"==typeof n)return function(n){}[e(249)](e(252))[e(275)](e(244));1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}[e(249)](e(247)+e(263))[e(269)](e(264)):function(){return!1}[e(249)](e(247)+e(263))[e(275)](e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Un;function jn(){const n=["4925200pWcXpG","toString","error","input","outdoor/outdoor_umbrellas_1k.hdr","1295EGegnU","2601330JYDcLo","console","16314XAsOVA","debu","874050rxUdRB","counter","table","apply","23077WeoaCz","trace","venice/venice_sunset_1k.hdr",'{}.constructor("return this")( )',"length","log","prototype","city/shanghai_bund_1k.hdr","1447124sqkRKU","function *\\( *\\)","indoor/small_hangar_01_1k.hdr","action","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","indoor/abandoned_games_room_02_1k.hdr","27lnKXaV","info","outdoor/snowy_forest_path_01_1k.hdr","bind","80RyRcVk","gger","constructor","__proto__","4529352bQhnrv","studio/poly_haven_studio_1k.hdr","outood/mossy_forest_1k.hdr"];return(jn=function(){return n})()}function Un(n,t){const e=jn();return(Un=function(n,t){return e[n-=152]})(n,t)}!function(n,t){const e=Un,r=jn();for(;;)try{if(785029===parseInt(e(169))/1*(-parseInt(e(189))/2)+parseInt(e(152))/3+parseInt(e(177))/4+parseInt(e(165))/5+parseInt(e(163))/6*(-parseInt(e(160))/7)+-parseInt(e(155))/8+parseInt(e(185))/9*(parseInt(e(161))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nn(this,(function(){const n=Un,t=new RegExp(n(178)),e=new RegExp(n(182),"i"),r=Zn("init");t[n(181)](r+"chain")&&e[n(181)](r+n(158))?Zn():r("0")}))()}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(168)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Hn(void 0,(function(){const n=Un,t=function(){const n=Un;let t;try{t=Function("return (function() "+n(172)+");")()}catch(e){t=window}return t}(),e=t[n(162)]=t[n(162)]||{},r=[n(174),"warn",n(186),n(157),n(183),n(167),n(170)];for(let o=0;o<r[n(173)];o++){const t=Hn[n(191)][n(175)][n(188)](Hn),i=r[o],a=e[i]||t;t[n(192)]=Hn[n(188)](Hn),t[n(156)]=a[n(156)][n(188)](a),e[i]=t}}))();const Ln={sunset:kn(171),studio:kn(153),city:"city/canary_wharf_1k.hdr",umbrellas:kn(159),night:"outdoor/satara_night_1k.hdr",forest:kn(154),snow:kn(187),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:kn(179),urban:kn(184),modern:"city/modern_buildings_2_1k.hdr",shangai:kn(176)};function Zn(n){function t(n){const e=Un;if("string"==typeof n)return function(n){}[e(191)]("while (true) {}").apply(e(166));1!==(""+n/n)[e(173)]||n%20==0?function(){return!0}[e(191)]("debu"+e(190)).call(e(180)):function(){return!1}.constructor(e(164)+e(190)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=$n;function Wn(){const n=["mapping","Failed to load environment map: ","2410768zorTeG","table","567628DBackL","gger","trace","setPath","return (function() ","361200HZHXzN","isColor","toString","counter","3968244hswnPL","chain","console",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","15UQZiaa","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","warn","stateObject","160474MYvOwi","exception","join","bind","length","texture","call","background","info","constructor","input","apply","debu","environment","keys","test","189842FChXAD","value","2303042hiFOmE","error","__proto__","12zqcDgz","action","log","prototype","Preset must be one of: "];return(Wn=function(){return n})()}!function(n,t){const e=$n,r=Wn();for(;;)try{if(515638===-parseInt(e(370))/1+-parseInt(e(354))/2*(-parseInt(e(350))/3)+-parseInt(e(336))/4+-parseInt(e(341))/5+-parseInt(e(327))/6*(-parseInt(e(372))/7)+parseInt(e(334))/8+-parseInt(e(345))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(n,t){const e=Wn();return($n=function(n,t){return e[n-=327]})(n,t)}!function(){Vn(this,(function(){const n=$n,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(349),"i"),r=Xn("init");t[n(369)](r+n(346))&&e[n(369)](r+n(364))?Xn():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Yn(void 0,(function(){const n=$n;let t;try{t=Function(n(340)+n(348)+");")()}catch(o){t=window}const e=t[n(347)]=t[n(347)]||{},r=[n(329),n(352),n(362),n(373),n(355),n(335),n(338)];for(let i=0;i<r[n(358)];i++){const t=Yn.constructor[n(330)][n(357)](Yn),o=r[i],a=e[o]||t;t[n(374)]=Yn[n(357)](Yn),t[n(343)]=a[n(343)][n(357)](a),e[o]=t}}))();const qn=Gn(351);function Xn(n){function t(n){const e=$n;if("string"==typeof n)return function(n){}[e(363)]("while (true) {}")[e(365)](e(344));1!==(""+n/n)[e(358)]||n%20==0?function(){return!0}[e(363)](e(366)+e(337))[e(360)](e(328)):function(){return!1}[e(363)](e(366)+e(337)).apply(e(353)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=tt;!function(n,t){const e=tt,r=Jn();for(;;)try{if(191016===-parseInt(e(481))/1*(parseInt(e(486))/2)+-parseInt(e(466))/3+-parseInt(e(483))/4+-parseInt(e(474))/5*(-parseInt(e(470))/6)+-parseInt(e(495))/7+-parseInt(e(479))/8+-parseInt(e(448))/9*(-parseInt(e(472))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(){const n=["bind","stateObject","$slots","table","constructor","default","minFilter","texture","magFilter","component","873177tqKmLc","debu","init","environment","6pdFXFR","counter","1454410boHfWE","resolution","1472975ZkXFhP","envSence","length","trace","info","1088064JxUWHA","virtualScene","9nAJbBV","useDefaultScene","1038492aXbtDD","TresEnvSence","input","48330fCcqsJ","dispose","background","while (true) {}","gger","frames","__proto__","toString","destructor","1522437HAljYm","test","log","update","generateMipmaps","error","type","far","apply","63uLmZnq","prototype","exception","return (function() ","value","console","function *\\( *\\)",'{}.constructor("return this")( )'];return(Jn=function(){return n})()}!function(){Qn(this,(function(){const n=tt,t=new RegExp(n(454)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=rt(n(468));t[n(496)](r+"chain")&&e[n(496)](r+n(485))?rt():r("0")}))()}();const nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(447)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tt(n,t){const e=Jn();return(tt=function(n,t){return e[n-=445]})(n,t)}nt(void 0,(function(){const n=tt,t=function(){const n=tt;let t;try{t=Function(n(451)+n(455)+");")()}catch(e){t=window}return t}(),e=t[n(453)]=t.console||{},r=[n(497),"warn",n(478),n(500),n(450),n(459),n(477)];for(let o=0;o<r.length;o++){const t=nt[n(460)][n(449)][n(456)](nt),i=r[o],a=e[i]||t;t[n(492)]=nt[n(456)](nt),t[n(493)]=a[n(493)][n(456)](a),e[i]=t}}))();const et=rn({__name:Kn(465),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=Y();let l=null,y=J(null),x=null;const I=J(null);on((()=>{var n,t;const e=tt;null==(n=I[e(452)])||n[e(494)](),null==(t=y[e(452)])||t[e(487)]()}));const{onBeforeLoop:b}=X();let w=1;b((()=>{const n=tt;x&&I[n(452)]&&y[n(452)]&&(i[n(491)]===1/0||w<i.frames)&&(i[n(482)]?x.update(s[n(452)],u.value):x[n(498)](s[n(452)],pn(I.value[n(480)])),w++)}));const S=([r,o]=an((()=>async function(n,t){const e=Gn,{scene:r}=Y(),{preset:o,blur:i,files:a=[],path:c="",background:s}=Q(n),u=J(),l=nn((()=>Array.isArray(a[e(371)]))),h=nn((()=>l[e(371)]?f:K)),v=J(null);return tn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(371)].length>0&&!o[r(371)]){try{v[r(371)]=await q(en(h),l.value?[en(n)]:en(n),(n=>{const e=r;t[e(371)]&&n[e(339)](en(t))}))}catch(i){throw new Error(r(333)+i)}v[r(371)]&&(u[r(371)]=l[r(371)]?v[r(371)][0]:v[r(371)],u[r(371)][r(332)]=l[r(371)]?p:d)}}),{immediate:!0}),tn((()=>u.value),(n=>{const t=e;r[t(371)]&&(r.value[t(367)]=n)}),{immediate:!0}),tn((()=>[s[e(371)],u[e(371)]]),(([n,o])=>{const i=e;if(r[i(371)]){let e=(null==t?void 0:t[i(371)])?t[i(371)][i(359)]:o,a=r.value[i(361)];!(null==a?void 0:a[i(342)])&&(a=void 0),r.value.background=n?e:a}}),{immediate:!0}),tn((()=>null==i?void 0:i.value),(n=>{r[e(371)]&&(r.value.backgroundBlurriness=n)}),{immediate:!0}),tn(o,(async n=>{const t=e;if(n&&n in Ln){const e=qn,o=Ln[n];try{v[t(371)]=await q(K,o,(n=>{e&&n[t(339)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v[t(371)]&&(u[t(371)]=v[t(371)],u.value[t(332)]=d)}else if(n&&!(n in Ln))throw new Error(t(331)+Object[t(368)](Ln)[t(356)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(463)],M=n=>{const t=e;n?(u.value[t(469)]=n[t(463)],i[t(488)]&&(u[t(452)][t(488)]=n[t(463)])):(u[t(452)][t(469)]=S[t(452)],i[t(488)]&&(u[t(452)][t(488)]=S.value))};return tn(S,(n=>{y.value&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:On}),tn((()=>fn()[e(461)]),(n=>{var t,r,o;const a=e;if(n&&(!y[a(452)]||y[a(452)][a(463)].type!==h)&&(l=n(),Array.isArray(l)&&l[a(476)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[a(445)])))return null==(r=y[a(452)])||r[a(487)](),y[a(452)]=new v(i.resolution),y[a(452)].texture[a(445)]=h,x=new m(i.near,i[a(446)],y[a(452)]),void M(y[a(452)]);null==(o=y.value)||o[a(487)](),y[a(452)]=null,M(null)}),{immediate:!0,deep:!0}),a[e(452)]=S,tn((()=>i[e(482)]),(n=>{var t;const r=e;n&&(!y[r(452)]||y.value.texture[r(445)]!==g)&&(null==(t=y.value)||t[r(487)](),y[r(452)]=new v(i[r(473)]),x=new m(i.near,i.far,y[r(452)]),y[r(452)][r(463)].type=g,y[r(452)][r(463)][r(499)]=!1,y[r(452)][r(463)][r(462)]=_,y[r(452)][r(463)][r(464)]=_,M(y[r(452)]))}),{immediate:!0}),(n,t)=>{const r=e;return en(y)?(cn(),sn(r(484),{key:0,ref_key:r(475),ref:I},[un(n[r(458)],r(461))],512)):ln("",!0)}}});function rt(n){function t(n){const e=tt;if("string"==typeof n)return function(n){}[e(460)](e(489))[e(447)](e(471));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(490)).call("action"):function(){return!1}[e(460)](e(467)+e(490))[e(447)](e(457)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ot(n,t){const e=dt();return(ot=function(n,t){return e[n-=310]})(n,t)}const it=ot;!function(n,t){const e=ot,r=dt();for(;;)try{if(919809===-parseInt(e(336))/1+parseInt(e(349))/2+parseInt(e(319))/3*(parseInt(e(340))/4)+parseInt(e(314))/5+-parseInt(e(353))/6+-parseInt(e(346))/7+parseInt(e(317))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(321)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){at(this,(function(){const n=ot,t=new RegExp(n(324)),e=new RegExp(n(345),"i"),r=ht(n(327));t[n(326)](r+n(320))&&e[n(326)](r+n(334))?ht():r("0")}))()}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ct(void 0,(function(){const n=ot;let t;try{t=Function(n(331)+n(315)+");")()}catch(o){t=window}const e=t[n(316)]=t.console||{},r=[n(347),n(332),"info",n(350),"exception",n(354),"trace"];for(let i=0;i<r.length;i++){const t=ct[n(335)][n(312)].bind(ct),o=r[i],a=e[o]||t;t.__proto__=ct[n(344)](ct),t[n(341)]=a[n(341)][n(344)](a),e[o]=t}}))();const st={key:0,args:[0,1,64]},ut={key:1,args:[.5,1,64]},lt={key:2},ft=[it(322),it(329),"side","color"],pt=rn({__name:it(343),props:{args:{default:null},from:{default:it(337)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return dn((()=>{const n=ot;e[n(342)]&&(e[n(342)][n(348)].multiplyScalar(t[n(351)]),e[n(342)][n(325)]=!0)})),(n,r)=>{const o=ot;return cn(),sn(o(352),null,["circle"===t[o(323)]?(cn(),sn("TresRingGeometry",st)):"ring"===t.from?(cn(),sn(o(339),ut)):t.from===o(337)?(cn(),sn(o(333),lt)):(cn(),hn(t[o(323)],{key:3,args:t})),vn(o(311),{ref_key:"material",ref:e,toneMapped:n[o(322)],map:n.map,side:en(x),color:n[o(348)]},null,8,ft)])}}});function dt(){const n=["chain","apply","toneMapped","from","function *\\( *\\)","needsUpdate","test","init","string","map","length","return (function() ","warn","TresPlaneGeometry","input","constructor","1462654MwXXPL","rect","gger","TresRingGeometry","20nLZYiE","toString","value","index","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9615249IJcBbI","log","color","3678476cPmVzx","error","intensity","TresMesh","3391698ImBPnf","table","counter","TresMeshBasicMaterial","prototype","debu","9186875RkIigy",'{}.constructor("return this")( )',"console","693960uNhsby","while (true) {}","334797XubPpJ"];return(dt=function(){return n})()}function ht(n){function t(n){const e=ot;if(typeof n===e(328))return function(n){}.constructor(e(318))[e(321)](e(310));1!==(""+n/n)[e(330)]||n%20==0?function(){return!0}[e(335)](e(313)+e(338)).call("action"):function(){return!1}[e(335)]("debu"+e(338))[e(321)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=_t,r=mt();for(;;)try{if(264236===-parseInt(e(515))/1+parseInt(e(502))/2+-parseInt(e(490))/3+parseInt(e(522))/4+-parseInt(e(516))/5*(-parseInt(e(481))/6)+parseInt(e(483))/7+-parseInt(e(509))/8*(parseInt(e(520))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","value","187104zkzCeO","debu","length","error","depthTexture","init","test","stateObject","toString","function *\\( *\\)","width","dispose","900512KTKaiM","bind","console","height","log","setRenderTarget","return (function() ","776dJuWtK","prototype","constructor","action","__proto__","while (true) {}","515857TMiQJy","5XjjmQV","render","table","clear","31149OknLTM","string","1440280UWBrAW","gger","chain","1521138jaHBvr","warn","800303IsjXIy","info","call","apply"];return(mt=function(){return n})()}!function(){vt(this,(function(){const n=_t,t=new RegExp(n(499)),e=new RegExp(n(487),"i"),r=xt(n(495));t[n(496)](r+n(480))&&e[n(496)](r+n(488))?xt():r("0")}))()}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[_t(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _t(n,t){const e=mt();return(_t=function(n,t){return e[n-=479]})(n,t)}function yt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?Q(n):Q(gn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=Y();return dn((()=>{var n;const a=_t;null==(n=t.value)||n[a(501)](),t[a(489)]=new I((null==r?void 0:r[a(489)])||p[a(500)].value,(null==e?void 0:e[a(489)])||p[a(505)][a(489)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(489)])),(null==i?void 0:i[a(489)])&&(t[a(489)][a(494)]=new w((null==r?void 0:r.value)||p.width[a(489)],(null==e?void 0:e[a(489)])||p.height[a(489)],S))})),s((()=>{const n=_t;(null==a?void 0:a.value)&&(l[n(489)].setRenderTarget(t[n(489)]),l[n(489)][n(519)](),l[n(489)][n(517)](f[n(489)],u.value),l[n(489)][n(507)](null))})),_n((()=>{var n;const e=_t;null==(n=t[e(489)])||n[e(501)]()})),t}function xt(n){function t(n){const e=_t;if(typeof n===e(521))return function(n){}[e(511)](e(514))[e(486)]("counter");1!==(""+n/n)[e(492)]||n%20==0?function(){return!0}.constructor("debu"+e(479))[e(485)](e(512)):function(){return!1}[e(511)](e(491)+e(479)).apply(e(497)),t(++n)}try{if(n)return t;t(0)}catch(e){}}gt(void 0,(function(){const n=_t,t=function(){const n=_t;let t;try{t=Function(n(508)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(504)]||{},r=[n(506),n(482),n(484),n(493),"exception",n(518),"trace"];for(let o=0;o<r[n(492)];o++){const t=gt[n(511)][n(510)][n(503)](gt),i=r[o],a=e[i]||t;t[n(513)]=gt[n(503)](gt),t[n(498)]=a[n(498)][n(503)](a),e[i]=t}}))();const It=Et;!function(n,t){const e=Et,r=St();for(;;)try{if(536941===parseInt(e(434))/1*(parseInt(e(426))/2)+parseInt(e(423))/3+-parseInt(e(420))/4+-parseInt(e(405))/5*(-parseInt(e(388))/6)+parseInt(e(417))/7+-parseInt(e(406))/8+-parseInt(e(402))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(403)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=Et,t=new RegExp(n(424)),e=new RegExp(n(431),"i"),r=At(n(408));t[n(410)](r+n(429))&&e[n(410)](r+n(409))?At():r("0")}))()}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function St(){const n=["time","6342665qmxoJd","gger","isMesh","1593600rBJDao","bind","traverse","1334886WodmwU","function *\\( *\\)","call","13106zUQHsY","length","constructor","chain","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","material","52eEqhRB","string","envMapIntensity","debu","table","counter","backsideThickness","info","fboResolution","log","console","4547190BwoNCx","setRenderTarget","buffer","warn","prototype","render","value","toString","side","thickness","index",'{}.constructor("return this")( )',"toneMapping","__proto__","6671340woxIEI","apply","action","5ihjWQc","6184616DcbTiK","error","init","input","test","uuid","backside","stateObject","MeshTransmissionMaterialClass","texture"];return(St=function(){return n})()}wt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(430)+n(399)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(387)]||{},r=[n(386),n(391),n(384),n(407),n(432),n(438),"trace"];for(let o=0;o<r[n(427)];o++){const t=wt[n(428)][n(392)][n(421)](wt),i=r[o],a=e[i]||t;t[n(401)]=wt.bind(wt),t.toString=a[n(395)][n(421)](a),e[i]=t}}))();const Mt=[It(390),"side"];function Et(n,t){const e=St();return(Et=function(n,t){return e[n-=382]})(n,t)}const Rt=rn({__name:It(398),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=It,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=Y(),s=yn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new En,{onBeforeLoop:f}=X(),p=yt({width:u[e(385)],height:u[e(385)],isLoop:!1}),d=yt({width:u[e(385)],height:u[e(385)],isLoop:!1});let h,v,m,g;return xn((async()=>{const n=e;await In(),s[n(394)]=function(n,t){const e=Et;let r;return n[e(422)]((n=>{const o=e;n[o(419)]&&n[o(433)]&&n[o(433)].uuid===t&&(r=n)})),r}(i[n(394)],r.value[n(411)])})),f((({elapsed:n})=>{const t=e;r[t(394)][t(416)]=n,r[t(394)].buffer===d.value.texture&&s[t(394)]&&(m=a[t(394)][t(400)],h=i[t(394)].background,v=r[t(394)][t(436)],g=s[t(394)][t(433)][t(396)],s[t(394)].material=l,u[t(412)]&&(a.value[t(389)](p[t(394)]),a[t(394)].render(i[t(394)],c[t(394)]),s[t(394)][t(433)]=r[t(394)],s[t(394)][t(433)][t(397)]=u[t(383)],s[t(394)][t(433)][t(390)]=p[t(394)].texture,s[t(394)][t(433)][t(396)]=M,s[t(394)].material[t(436)]=0),a[t(394)].setRenderTarget(d[t(394)]),a[t(394)][t(393)](i[t(394)],c[t(394)]),s[t(394)][t(433)][t(390)]=d[t(394)][t(415)],s[t(394)][t(433)]=r.value,s[t(394)][t(433)].thickness=u[t(397)],s.value[t(433)][t(396)]=g,s[t(394)][t(433)][t(436)]=v,i.value.background=h,a[t(394)].setRenderTarget(null),a[t(394)][t(400)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return cn(),sn("TresMeshTransmissionMaterial",{ref_key:o(414),ref:r,buffer:en(d)[o(415)],side:en(x)},null,8,Mt)}}});function At(n){function t(n){const e=Et;if(typeof n===e(435))return function(n){}[e(428)]("while (true) {}")[e(403)](e(382));1!==(""+n/n)[e(427)]||n%20==0?function(){return!0}[e(428)](e(437)+"gger")[e(425)](e(404)):function(){return!1}[e(428)](e(437)+e(418))[e(403)](e(413)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Pt,r=zt();for(;;)try{if(155501===parseInt(e(484))/1*(parseInt(e(456))/2)+-parseInt(e(463))/3*(-parseInt(e(451))/4)+-parseInt(e(498))/5+-parseInt(e(500))/6+-parseInt(e(454))/7+parseInt(e(503))/8+-parseInt(e(493))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tt(this,(function(){const n=Pt,t=new RegExp(n(461)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ot(n(485));t[n(480)](r+"chain")&&e.test(r+n(489))?Ot():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pt(n,t){const e=zt();return(Pt=function(n,t){return e[n-=450]})(n,t)}function zt(){const n=["1279611IsjvsO","disable","counter","exception","$slots","81475jhDgAK",'{}.constructor("return this")( )',"288780eIIiqw","call","toString","240064bwQKxU","gref","disableX","value","outer","5492tnWvsL","back","position","575358EbkunB","front","614FHeeoW","right","warn","trace","debu","function *\\( *\\)","precise","327cFgRpm","console","inner","log","left","__proto__","apply","gger","stateObject","max","length","disableZ","getBoundingSphere","bottom","min","constructor","identity","test","getCenter","TresGroup","top","862eilhav","init","table","disableY","while (true) {}","input","info","action","bind"];return(zt=function(){return n})()}Dt(void 0,(function(){const n=Pt;let t;try{t=Function("return (function() "+n(499)+");")()}catch(o){t=window}const e=t[n(464)]=t[n(464)]||{},r=[n(466),n(458),n(490),"error",n(496),n(486),n(459)];for(let i=0;i<r[n(473)];i++){const t=Dt[n(478)].prototype[n(492)](Dt),o=r[i],a=e[o]||t;t[n(468)]=Dt[n(492)](Dt),t[n(502)]=a[n(502)][n(492)](a),e[o]=t}}))();const Ct=rn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return xn((()=>{const n=Pt;if(!r[n(506)])return;if(!o[n(506)])return;r[n(506)].matrixWorld[n(479)]();const e=(new E).setFromObject(o[n(506)],t[n(462)]),i=new R,a=new A,c=e[n(472)].x-e[n(477)].x,s=e[n(472)].y-e[n(477)].y,u=e[n(472)].z-e[n(477)].z;e[n(481)](i),e[n(475)](a);const l=t[n(483)]?s/2:t[n(476)]?-s/2:0,f=t[n(467)]?-c/2:t[n(457)]?c/2:0,p=t[n(455)]?u/2:t[n(452)]?-u/2:0;r[n(506)][n(453)].set(t[n(494)]||t[n(505)]?0:-i.x+f,t.disable||t[n(487)]?0:-i.y+l,t[n(494)]||t[n(474)]?0:-i.z+p)})),(n,t)=>{const i=Pt;return cn(),sn(i(482),{ref_key:i(504),ref:e},[vn(i(482),{ref_key:i(450),ref:r},[vn(i(482),{ref_key:i(465),ref:o},[un(n[i(497)],"default")],512)],512)],512)}}});function Ot(n){function t(n){const e=Pt;if("string"==typeof n)return function(n){}[e(478)](e(488))[e(469)](e(495));1!==(""+n/n)[e(473)]||n%20==0?function(){return!0}[e(478)](e(460)+e(470))[e(501)](e(491)):function(){return!1}[e(478)](e(460)+e(470))[e(469)](e(471)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bt=jt;!function(n,t){const e=jt,r=Ht();for(;;)try{if(220965===-parseInt(e(204))/1*(parseInt(e(197))/2)+-parseInt(e(223))/3+parseInt(e(193))/4*(-parseInt(e(210))/5)+parseInt(e(191))/6*(parseInt(e(214))/7)+parseInt(e(232))/8+-parseInt(e(198))/9*(-parseInt(e(208))/10)+parseInt(e(226))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=jt,t=new RegExp(n(236)),e=new RegExp(n(207),"i"),r=Zt(n(209));t.test(r+"chain")&&e[n(217)](r+n(200))?Zt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jt(n,t){const e=Ht();return(jt=function(n,t){return e[n-=187]})(n,t)}kt(void 0,(function(){const n=jt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(212)]=t[n(212)]||{},r=["log","warn","info","error",n(231),n(237),n(218)];for(let i=0;i<r[n(221)];i++){const t=kt[n(190)][n(202)][n(224)](kt),o=r[i],a=e[o]||t;t[n(196)]=kt[n(224)](kt),t[n(219)]=a[n(219)][n(224)](a),e[o]=t}}))();const Ut=[Bt(211)],Nt=[Bt(211)];function Ht(){const n=["primitive","constructor","564846WExoES","while (true) {}","10612gSTLFi","far","value","__proto__","14dIGWqQ","9HrRFKP","debu","input","params","prototype","helper","61897PMNsfJ","resolution","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2732140mSeJcj","init","445wZXoZz","object","console","backsideIOR","7LmOXVK","intensity","update","test","trace","toString","causticsOnly","length","add","774186uIThJm","bind","backside","6842759fWEJFv","worldRadius","ior","Vector3","apply","exception","1271992rrJrsF","set","#ffffff","lightSource","function *\\( *\\)","table","default","TresGroup","call","color","string","group"];return(Ht=function(){return n})()}const Lt=rn({__name:"index",props:{color:{default:Bt(234)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Bt,e=n,{renderer:r}=Y(),o=Rn(r[t(195)],{frames:1/0,resolution:e[t(205)],worldRadius:e[t(227)]});o.params[t(225)]=!0;const i=yn(null);tn(i,(n=>{const e=t;n&&o.scene[e(222)](n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o[t(216)]()})),dn((()=>{const n=t;e[n(241)]&&o[n(201)].color[n(233)](e.color),e[n(228)]&&(o.params[n(228)]=e.ior),e[n(213)]&&(o[n(201)][n(213)]=e[n(213)]),e.far&&(o[n(201)].far=e[n(194)]),e[n(227)]&&(o.params[n(227)]=e[n(227)]),e[n(215)]&&(o.params[n(215)]=e[n(215)])})),tn((()=>e[t(220)]),(n=>{const e=t;o[e(201)][e(220)]=n})),tn((()=>e[t(235)]),(n=>{const e=t;n&&o.params[e(235)]instanceof T[e(229)]&&o[e(201)][e(235)][e(233)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(bn,null,[vn(r(239),{ref_key:"group",ref:i},[un(n.$slots,r(238))],512),vn(r(189),{object:en(o)[r(188)],position:[0,.003,0]},null,8,Ut),vn(r(189),{object:en(o)[r(203)],visible:!1},null,8,Nt)],64)}}});function Zt(n){function t(n){const e=jt;if(typeof n===e(187))return function(n){}.constructor(e(192))[e(230)]("counter");1!==(""+n/n)[e(221)]||n%20==0?function(){return!0}.constructor(e(199)+e(206))[e(240)]("action"):function(){return!1}.constructor("debugger")[e(230)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=Wt();for(;;)try{if(661164===parseInt(e(326))/1*(-parseInt(e(303))/2)+parseInt(e(318))/3*(parseInt(e(312))/4)+-parseInt(e(316))/5+-parseInt(e(328))/6*(-parseInt(e(291))/7)+-parseInt(e(295))/8+-parseInt(e(317))/9*(parseInt(e(327))/10)+parseInt(e(288))/11*(parseInt(e(323))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(325)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","isArray","prototype","debu","48jtoEkR","material","apply","631HPnGjp","92290YSlfRG","10332KCfcVO","action",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","shadowmap_pars_fragment","programs","gger","; i++) {\n        vogelSample = vogelDiskSample(j, ","properties","constructor","__proto__","traverse","table","5380771VROZGf","replace","forEach","3206DbgBqs","compile","function *\\( *\\)","init","387264bizjXn","error","input","#if defined( SHADOWMAP_TYPE_PCF )","info",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","ShaderChunk","length","1514BHdxBC","chain",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","remove","; i ++) {\n        offset = (vogelDiskSample(j, ","dispose","console","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","counter","3664VsJrNt","bind","string",'{}.constructor("return this")( )',"5938680LiPaZb","873vLfzMR","1719fxnsch"];return(Wt=function(){return n})()}function Vt(n,t){const e=Wt();return(Vt=function(n,t){return e[n-=277]})(n,t)}!function(){Gt(this,(function(){const n=Vt,t=new RegExp(n(293)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qt(n(294));t.test(r+n(304))&&e.test(r+n(297))?qt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(325)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();$t(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function("return (function() "+n(315)+");")()}catch(e){t=window}return t}(),e=t[n(309)]=t[n(309)]||{},r=["log","warn","info",n(296),"exception",n(287),"trace"];for(let o=0;o<r[n(302)];o++){const t=$t[n(284)][n(321)][n(313)]($t),i=r[o],a=e[i]||t;t[n(285)]=$t.bind($t),t.toString=a.toString[n(313)](a),e[i]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=D[r(279)];return D[r(279)]=T[r(301)][r(279)].replace("#ifdef USE_SHADOWMAP",r(319)+t+r(278)+n+r(305)+e+r(307)+e+r(300)+e+r(282)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(310)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(289)](r(298),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{T[r(301)].shadowmap_pars_fragment=o,function(n,t,e){const r=Vt;t[r(286)]((t=>{const e=r;t[e(324)]&&(Array[e(320)](t[e(324)])?t[e(324)][e(290)]((t=>{const r=e;n[r(283)][r(306)](t),t[r(308)]()})):(n[e(283)].remove(t[e(324)]),t[e(324)][e(308)]()))})),n[r(299)][r(280)].length=0,n[r(292)](t,e)}(n,t,e)}};function qt(n){function t(n){const e=Vt;if(typeof n===e(314))return function(n){}[e(284)]("while (true) {}").apply(e(311));1!==(""+n/n)[e(302)]||n%20==0?function(){return!0}[e(284)](e(322)+e(281)).call(e(277)):function(){return!1}.constructor(e(322)+e(281))[e(325)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xt=Kt;function Kt(n,t){const e=ne();return(Kt=function(n,t){return e[n-=138]})(n,t)}!function(n,t){const e=Kt,r=ne();for(;;)try{if(691191===parseInt(e(176))/1*(parseInt(e(166))/2)+-parseInt(e(172))/3*(-parseInt(e(164))/4)+-parseInt(e(157))/5+parseInt(e(165))/6+-parseInt(e(151))/7+-parseInt(e(153))/8*(-parseInt(e(175))/9)+parseInt(e(160))/10*(parseInt(e(155))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(177)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qt(this,(function(){const n=Kt,t=new RegExp(n(147)),e=new RegExp(n(139),"i"),r=ee("init");t[n(140)](r+n(162))&&e[n(140)](r+n(174))?ee():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(177)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(){const n=["input","47511bJrvAY","2dfYCcv","apply","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","return (function() ","info","toString","counter","gger","length","function *\\( *\\)",'{}.constructor("return this")( )',"value","traverse","4391793KaySaM","trace","808hxToCH","stateObject","11MnZcIQ","bind","5993475ZiFlhi","constructor","debu","4831240xGQoQs","call","chain","warn","1112AjVMPH","3626232rcHgeo","435408ghuNxY","material","console","index","error","__proto__","4977ewbnGe","log"];return(ne=function(){return n})()}Jt(void 0,(function(){const n=Kt;let t;try{t=Function(n(141)+n(148)+");")()}catch(o){t=window}const e=t[n(168)]=t[n(168)]||{},r=[n(173),n(163),n(142),n(170),"exception","table",n(152)];for(let i=0;i<r[n(146)];i++){const t=Jt[n(158)].prototype[n(156)](Jt),o=r[i],a=e[o]||t;t[n(171)]=Jt[n(156)](Jt),t[n(143)]=a[n(143)].bind(a),e[o]=t}}))();const te=rn({__name:Xt(169),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=Y();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(149)],o.value,e[t(149)]),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o.value[t(150)]((n=>{const e=t;n instanceof l&&n[e(167)][e(138)]()})))};return a(t),tn(t,(()=>{a(t)})),(n,t)=>null}});function ee(n){function t(n){const e=Kt;if("string"==typeof n)return function(n){}[e(158)]("while (true) {}")[e(177)](e(144));1!==(""+n/n).length||n%20==0?function(){return!0}[e(158)](e(159)+e(145))[e(161)]("action"):function(){return!1}[e(158)](e(159)+"gger")[e(177)](e(154)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const re=se;!function(n,t){const e=se,r=ue();for(;;)try{if(598357===parseInt(e(182))/1+-parseInt(e(200))/2+parseInt(e(159))/3+parseInt(e(168))/4*(-parseInt(e(171))/5)+-parseInt(e(203))/6*(-parseInt(e(191))/7)+-parseInt(e(189))/8*(parseInt(e(199))/9)+parseInt(e(181))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(178)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){oe(this,(function(){const n=se,t=new RegExp(n(194)),e=new RegExp(n(180),"i"),r=le(n(188));t[n(170)](r+n(165))&&e[n(170)](r+"input")?le():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(178)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=se;let t;try{t=Function("return (function() "+n(158)+");")()}catch(o){t=window}const e=t.console=t[n(161)]||{},r=[n(204),n(202),n(198),n(184),n(179),"table","trace"];for(let i=0;i<r.length;i++){const t=ie[n(157)][n(193)].bind(ie),o=r[i],a=e[o]||t;t[n(164)]=ie[n(174)](ie),t[n(156)]=a[n(156)].bind(a),e[o]=t}}))();const ae=parseInt(B[re(185)](/\D+/g,""));class ce extends P{constructor(n=new C){const t=re;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(177)+t(ae>=154?162:197)+t(163),vertexShader:t(192),blending:O,depthWrite:!1,depthTest:!1}),this[t(166)]=!1,this[t(201)](n.x,n.y),this[t(160)]=new Float32Array([0,1,2,2,3])}[re(201)](n,t){const e=re;this[e(195)][e(176)][e(196)][e(175)](n,t),this[e(195)].halfTexelSize[e(196)][e(175)](n,t)[e(172)](.5)}[re(183)](n){const t=re;this[t(195)][t(169)].value.copy(n)}}function se(n,t){const e=ue();return(se=function(n,t){return e[n-=156]})(n,t)}function ue(){const n=['{}.constructor("return this")( )',"2530791oqfcVs","kernel","console","colorspace_fragment",">\n        }","__proto__","chain","toneMapped","gger","88wYtXtG","resolution","test","194855fcVAql","multiplyScalar","debu","bind","set","texelSize","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","apply","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","12240410UaZNyr","1180141ifYKYn","setResolution","error","replace","string","stateObject","init","2786072XjoShn","counter","7rHJMSq","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","prototype","function *\\( *\\)","uniforms","value","encodings_fragment","info","27aAhgdm","1839780ldbLsq","setTexelSize","warn","1035642aEbyuH","log","toString","constructor"];return(ue=function(){return n})()}function le(n){function t(n){const e=se;if(typeof n===e(186))return function(n){}[e(157)]("while (true) {}")[e(178)](e(190));1!==(""+n/n).length||n%20==0?function(){return!0}[e(157)]("debu"+e(167)).call("action"):function(){return!1}.constructor(e(173)+"gger")[e(178)](e(187)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=pe,r=de();for(;;)try{if(712096===-parseInt(e(347))/1+parseInt(e(346))/2*(-parseInt(e(352))/3)+-parseInt(e(350))/4*(-parseInt(e(368))/5)+parseInt(e(339))/6*(parseInt(e(370))/7)+-parseInt(e(345))/8*(parseInt(e(363))/9)+-parseInt(e(351))/10+parseInt(e(355))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(379)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(n,t){const e=de();return(pe=function(n,t){return e[n-=336]})(n,t)}function de(){const n=["input","7MJxzkR","convolutionMaterial","error","log",'{}.constructor("return this")( )',"function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","setAttribute","apply","counter","string","USE_DEPTH","camera","setTexelSize","kernel","uniforms","clone","console","inputBuffer","depthTexture","toString","info","exception","texture","6407112gklKuv","depthScale","setResolution","gger","render","renderToScreen","1208LYjYaz","2023226xBdLXg","328394tPzDML","test","length","4TCNZyu","11149290zqqeqQ","3wRHmLh","renderTargetA","action","23381182jQcYWj","bind","prototype","constructor","renderTargetB","value","scene","add","23022WoyZqv","screen","setRenderTarget","trace","depthBuffer","1799380cswGQD"];return(de=function(){return n})()}!function(){fe(this,(function(){const n=pe,t=new RegExp(n(375)),e=new RegExp(n(376),"i"),r=me("init");t[n(348)](r+"chain")&&e.test(r+n(369))?me():r("0")}))()}();const he=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(379)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();he(void 0,(function(){const n=pe;let t;try{t=Function("return (function() "+n(374)+");")()}catch(o){t=window}const e=t[n(388)]=t[n(388)]||{},r=[n(373),"warn",n(336),n(372),n(337),"table",n(366)];for(let i=0;i<r[n(349)];i++){const t=he[n(358)][n(357)][n(356)](he),o=r[i],a=e[o]||t;t.__proto__=he[n(356)](he),t[n(391)]=a[n(391)].bind(a),e[o]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(344)]=!1,this[c(353)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(359)]=this.renderTargetA[c(387)](),this[c(371)]=new ce,this.convolutionMaterial[c(384)](1/t,1/e),this[c(371)][c(341)](new C(t,e)),this[c(361)]=new u,this[c(383)]=new F,this[c(371)][c(386)].minDepthThreshold[c(360)]=r,this[c(371)][c(386)].maxDepthThreshold[c(360)]=o,this[c(371)][c(386)][c(340)].value=i,this.convolutionMaterial.uniforms.depthToBlurRatioBias[c(360)]=a,this.convolutionMaterial.defines[c(382)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p.setAttribute("position",new j(s,3)),p[c(378)]("uv",new j(f,2)),this[c(364)]=new l(p,this[c(371)]),this[c(364)].frustumCulled=!1,this[c(361)][c(362)](this[c(364)])}render(n,t,e){const r=pe,o=this.scene,i=this[r(383)],a=this.renderTargetA,c=this[r(359)],s=this[r(371)],u=s.uniforms;u[r(367)][r(360)]=t[r(390)];const l=s[r(385)];let f,p,d,h=t;for(p=0,d=l[r(349)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(385)].value=l[p],u[r(389)][r(360)]=h[r(338)],n[r(365)](f),n[r(343)](o,i),h=f;u[r(385)][r(360)]=l[p],u[r(389)][r(360)]=h.texture,n[r(365)](this[r(344)]?null:e),n[r(343)](o,i)}}function me(n){function t(n){const e=pe;if(typeof n===e(381))return function(n){}[e(358)]("while (true) {}").apply(e(380));1!==(""+n/n)[e(349)]||n%20==0?function(){return!0}[e(358)]("debu"+e(342)).call(e(354)):function(){return!1}[e(358)](e(377)+e(342))[e(379)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ge(){var n=["_tDiffuse","_distortion","3569440XQuCHa","2702165hqDGtm","textureMatrix","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_mixBlur","log","uniforms","_mixContrast","_depthToBlurRatioBias","console","hasBlur","_maxDepthThreshold","#include <project_vertex>","depthScale","toString","action","254480oDZhxl","depthToBlurRatioBias","mixContrast","_mirror","chain","1885116WJvaKP","mirror","apply","4327981djhEcR","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","mixBlur","function *\\( *\\)","_minDepthThreshold","_tDepth","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","prototype","return (function() ","3313860HfcjRN","value","tDiffuseBlur","debu","replace","string","setValues","__proto__","11282571fsxUPK","tDiffuse","_textureMatrix","gger","vertexShader","mixStrength","_depthScale","tDepth","counter","6CujFeT","USE_UV","table","minDepthThreshold","info",'{}.constructor("return this")( )',"bind","distortionMap","error","stateObject","constructor","length","24QVwsDX","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_blurStrength","maxDepthThreshold","fragmentShader","_distortionMap","test","_tDiffuseBlur","distortion"];return(ge=function(){return n})()}var _e=Ie;!function(n,t){for(var e=Ie,r=ge();;)try{if(644689===-parseInt(e(547))/1+-parseInt(e(552))/2+-parseInt(e(490))/3+-parseInt(e(530))/4+-parseInt(e(531))/5+parseInt(e(507))/6*(parseInt(e(555))/7)+parseInt(e(519))/8*(parseInt(e(498))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(554)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ye(this,(function(){var n=Ie,t=new RegExp(n(558)),e=new RegExp(n(534),"i"),r=we("init");t.test(r+n(551))&&e[n(525)](r+n(533))?we():r("0")}))()}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ie(554)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(n,t){var e=ge();return(Ie=function(n,t){return e[n-=488]})(n,t)}xe(void 0,(function(){for(var n=Ie,t=function(){var n,t=Ie;try{n=Function(t(489)+t(512)+");")()}catch(e){n=window}return n}(),e=t[n(540)]=t[n(540)]||{},r=[n(536),"warn",n(511),n(515),"exception",n(509),"trace"],o=0;o<r[n(518)];o++){var i=xe.constructor[n(488)][n(513)](xe),a=r[o],c=e[a]||i;i[n(497)]=xe[n(513)](xe),i.toString=c[n(545)].bind(c),e[a]=i}}))();class be extends U{constructor(n={}){var t=Ie;super(n),this._tDepth={value:null},this[t(524)]={value:null},this._tDiffuse={value:null},this[t(526)]={value:null},this[t(500)]={value:null},this._hasBlur={value:!1},this[t(550)]={value:0},this[t(535)]={value:0},this[t(521)]={value:.5},this[t(559)]={value:.9},this[t(542)]={value:1},this[t(504)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(529)]={value:1},this[t(538)]={value:1},this[t(496)](n)}onBeforeCompile(n){var t,e=Ie;!(null==(t=n.defines)?void 0:t.USE_UV)&&(n.defines[e(508)]=""),n.uniforms[e(541)]=this._hasBlur,n[e(537)][e(499)]=this._tDiffuse,n.uniforms[e(505)]=this[e(560)],n[e(537)].distortionMap=this[e(524)],n[e(537)][e(492)]=this[e(526)],n[e(537)].textureMatrix=this[e(500)],n.uniforms[e(553)]=this._mirror,n[e(537)][e(557)]=this[e(535)],n[e(537)][e(503)]=this[e(521)],n[e(537)][e(510)]=this[e(559)],n[e(537)][e(522)]=this._maxDepthThreshold,n[e(537)][e(544)]=this[e(504)],n[e(537)][e(548)]=this[e(539)],n[e(537)][e(527)]=this[e(529)],n[e(537)].mixContrast=this._mixContrast,n.vertexShader=e(520)+n[e(502)],n[e(502)]=n[e(502)][e(494)](e(543),e(561)),n[e(523)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(523)],n.fragmentShader=n.fragmentShader[e(494)]("#include <emissivemap_fragment>",e(556))}get[_e(499)](){return this[_e(528)].value}set[_e(499)](n){var t=_e;this[t(528)][t(491)]=n}get tDepth(){var n=_e;return this[n(560)][n(491)]}set[_e(505)](n){var t=_e;this[t(560)][t(491)]=n}get[_e(514)](){return this._distortionMap.value}set distortionMap(n){var t=_e;this[t(524)][t(491)]=n}get tDiffuseBlur(){var n=_e;return this._tDiffuseBlur[n(491)]}set[_e(492)](n){var t=_e;this[t(526)][t(491)]=n}get[_e(532)](){var n=_e;return this[n(500)][n(491)]}set[_e(532)](n){var t=_e;this[t(500)][t(491)]=n}get[_e(541)](){var n=_e;return this._hasBlur[n(491)]}set hasBlur(n){var t=_e;this._hasBlur[t(491)]=n}get mirror(){var n=_e;return this[n(550)][n(491)]}set[_e(553)](n){var t=_e;this[t(550)][t(491)]=n}get[_e(557)](){var n=_e;return this[n(535)][n(491)]}set[_e(557)](n){var t=_e;this._mixBlur[t(491)]=n}get mixStrength(){var n=_e;return this[n(521)][n(491)]}set mixStrength(n){var t=_e;this[t(521)][t(491)]=n}get[_e(510)](){var n=_e;return this[n(559)][n(491)]}set[_e(510)](n){var t=_e;this[t(559)][t(491)]=n}get[_e(522)](){var n=_e;return this[n(542)][n(491)]}set[_e(522)](n){var t=_e;this[t(542)][t(491)]=n}get[_e(544)](){var n=_e;return this[n(504)][n(491)]}set[_e(544)](n){var t=_e;this._depthScale[t(491)]=n}get[_e(548)](){var n=_e;return this[n(539)][n(491)]}set[_e(548)](n){var t=_e;this._depthToBlurRatioBias[t(491)]=n}get[_e(527)](){var n=_e;return this[n(529)][n(491)]}set distortion(n){this[_e(529)].value=n}get[_e(549)](){var n=_e;return this._mixContrast[n(491)]}set[_e(549)](n){var t=_e;this._mixContrast[t(491)]=n}}function we(n){function t(n){var e=Ie;if(typeof n===e(495))return function(n){}[e(517)]("while (true) {}")[e(554)](e(506));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(493)+e(501)).call(e(546)):function(){return!1}[e(517)]("debu"+e(501))[e(554)](e(516)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Re;!function(n,t){const e=Re,r=De();for(;;)try{if(569924===-parseInt(e(365))/1+parseInt(e(442))/2*(parseInt(e(446))/3)+parseInt(e(396))/4+parseInt(e(463))/5+-parseInt(e(409))/6+parseInt(e(438))/7*(parseInt(e(465))/8)+-parseInt(e(440))/9*(parseInt(e(456))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(384)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Re,t=new RegExp(n(435)),e=new RegExp(n(462),"i"),r=Pe(n(447));t[n(455)](r+n(363))&&e[n(455)](r+n(441))?Pe():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(384)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Re(n,t){const e=De();return(Re=function(n,t){return e[n-=363]})(n,t)}Ee(void 0,(function(){const n=Re,t=function(){const n=Re;let t;try{t=Function(n(371)+n(434)+");")()}catch(e){t=window}return t}(),e=t[n(366)]=t[n(366)]||{},r=[n(388),"warn","info",n(383),n(398),n(382),n(390)];for(let o=0;o<r[n(408)];o++){const t=Ee[n(412)].prototype[n(458)](Ee),i=r[o],a=e[i]||t;t[n(430)]=Ee[n(458)](Ee),t[n(372)]=a[n(372)][n(458)](a),e[i]=t}}))();const Ae=[Se(369),Se(379),Se(420),Se(433),Se(459),"has-blur",Se(424),Se(403),"max-depth-threshold","depth-scale",Se(374),Se(385),Se(445),Se(461),Se(464),Se(378),"defines-USE_DISTORTION"],Te=rn({__name:Se(439),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Se,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Q(o),{camera:y,scene:x,renderer:S,extend:M}=Y();M({MeshReflectorMaterial:be});const E=yn(),A=yn(),T=yn(),D=yn(),P=nn((()=>{const n=Re;return"number"==typeof f[n(410)]?[f[n(410)],f[n(410)]]:f[n(410)]})),z=nn((()=>P[r(410)][0]>0||P.value[1]>0)),C={reflectorPlane:new N,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new H,lookAtPosition:new R(0,0,-1),clipPlane:new L,view:new R,target:new R,q:new L,virtualCamera:new Z,textureMatrix:new H};dn((()=>{var n;const o=r;null==(n=E[o(410)])||n.texture[o(399)]();const f={minFilter:b,magFilter:b,type:h};var y,x;E[o(410)]=new I(i.value,i[o(410)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i.value,i.value,G,W)},t(y,e(x)))),A.value=new I(i[o(410)],i[o(410)],f),T[o(410)]=new ve({resolution:i.value,width:P[o(410)][0],height:P[o(410)][1],minDepthThreshold:a[o(410)],maxDepthThreshold:s[o(410)],depthScale:u[o(410)],depthToBlurRatioBias:l[o(410)]}),D[o(410)]={mirror:p,textureMatrix:C[o(415)],mixBlur:d,tDiffuse:E[o(410)][o(406)],tDepth:E[o(410)][o(428)],tDiffuseBlur:E[o(410)][o(406)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":z[o(410)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(410)]?"":void 0}}));const O=yn(),{onLoop:B}=X();B((()=>{var n;const t=r;if(!(O[t(410)]&&S.value&&E.value&&y[t(410)]))return;const e=function(n,t){const e=Re;let r;return n[e(436)]((n=>{const o=e;n[o(364)]&&n.material&&n[o(401)][o(389)]===t&&(r=n)})),r}(x[t(410)],O[t(410)][t(389)]);if(!e)return;e[t(432)]=!1;const i=S.value.xr.enabled,a=S[t(410)][t(377)][t(443)];(function(n){var t,e;const r=Re;if(C[r(405)][r(413)](n.matrixWorld),C[r(449)][r(413)](null==(t=y[r(410)])?void 0:t.matrixWorld),C.rotationMatrix[r(395)](n[r(466)]),C[r(391)][r(421)](0,0,1),C[r(391)][r(404)](C[r(457)]),C[r(405)][r(417)](C[r(391)],o[r(370)]),C[r(422)].subVectors(C[r(405)],C[r(449)]),C[r(422)][r(402)](C[r(391)])>0)return;C.view.reflect(C[r(391)])[r(392)](),C[r(422)].add(C.reflectorWorldPosition),C.rotationMatrix[r(395)](null==(e=y[r(410)])?void 0:e[r(466)]),C[r(386)][r(421)](0,0,-1),C.lookAtPosition[r(404)](C.rotationMatrix),C.lookAtPosition[r(416)](C[r(449)]),C[r(450)][r(394)](C[r(405)],C[r(386)]),C[r(450)][r(419)](C[r(391)])[r(392)](),C[r(450)].add(C[r(405)]),C[r(381)].position[r(368)](C[r(422)]),C.virtualCamera.up[r(421)](0,1,0),C[r(381)].up[r(404)](C[r(457)]),C[r(381)].up[r(419)](C[r(391)]),C[r(381)][r(460)](C[r(450)]),C[r(381)][r(431)]=(null==y?void 0:y[r(410)])[r(431)],C[r(381)][r(407)](),C[r(381)].projectionMatrix[r(368)]((null==y?void 0:y[r(410)])[r(451)]),C[r(415)][r(421)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.textureMatrix.multiply(C.virtualCamera[r(451)]),C[r(415)][r(397)](C[r(381)][r(375)]),C[r(415)].multiply(n[r(466)]),C[r(423)][r(429)](C[r(391)],C[r(405)]),C.reflectorPlane[r(404)](C[r(381)][r(375)]),C[r(437)].set(C[r(423)].normal.x,C.reflectorPlane.normal.y,C[r(423)].normal.z,C[r(423)][r(387)]);const i=C[r(381)].projectionMatrix;C.q.x=(Math.sign(C[r(437)].x)+i.elements[8])/i.elements[0],C.q.y=(Math[r(425)](C[r(437)].y)+i[r(427)][9])/i[r(427)][5],C.q.z=-1,C.q.w=(1+i[r(427)][10])/i.elements[14],C[r(437)][r(452)](2/C[r(437)][r(402)](C.q)),i[r(427)][2]=C[r(437)].x,i[r(427)][6]=C[r(437)].y,i[r(427)][10]=C.clipPlane.z+1,i.elements[14]=C[r(437)].w})(e),S[t(410)].shadowMap[t(443)]=!1,S[t(410)][t(444)](E[t(410)]),S[t(410)].autoClear||S[t(410)].clear(),S[t(410)][t(414)](x.value,C.virtualCamera),null==(n=null==T?void 0:T[t(410)])||n[t(414)](S[t(410)],E.value,A[t(410)]),S[t(410)].xr[t(376)]=i,S.value[t(377)][t(443)]=a,e[t(432)]=!0,S[t(410)][t(444)](null)}));const F=wn(),k=nn((()=>{const n=r,t={};return Object[n(426)](t,o),Object[n(426)](t,F[n(410)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==E?void 0:E[e(410)])||n[e(399)](),null==(t=null==A?void 0:A[e(410)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn("TresMeshReflectorMaterial",Sn({key:c(380)+D[c(410)][c(464)]+D.value[c(378)]+D[c(410)][c(454)],ref_key:"materialRef",ref:O},k.value,{"texture-matrix":C[c(415)],mirror:en(p),"t-diffuse":null==(e=E.value)?void 0:e[c(406)],"t-depth":null==(o=E.value)?void 0:o[c(428)],"t-diffuse-blur":null==(i=A[c(410)])?void 0:i[c(406)],"has-blur":z[c(410)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Ae)}}});function De(){const n=["618kWOQZL","autoUpdate","setRenderTarget","distortionMap","5022etCUxP","init","counter","cameraWorldPosition","target","projectionMatrix","multiplyScalar","debu","defines-USE_DISTORTION","test","60DmeuRE","rotationMatrix","bind","t-diffuse-blur","lookAt","mix-contrast","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","339465KPGZDy","defines-USE_BLUR","2141144hMXNnd","matrixWorld","chain","isMesh","750187QKUlcz","console","call","copy","texture-matrix","reflectorOffset","return (function() ","toString","action","depth-to-blur-ratio-bias","matrixWorldInverse","enabled","shadowMap","defines-USE_DEPTH","mirror","key","virtualCamera","table","error","apply","distortion","lookAtPosition","constant","log","uuid","trace","normal","negate","string","subVectors","extractRotation","2699328dArIEQ","multiply","exception","dispose","gger","material","dot","min-depth-threshold","applyMatrix4","reflectorWorldPosition","texture","updateMatrixWorld","length","1869858beYpyh","value","while (true) {}","constructor","setFromMatrixPosition","render","textureMatrix","add","addScaledVector","stateObject","reflect","t-diffuse","set","view","reflectorPlane","mix-strength","sign","assign","elements","depthTexture","setFromNormalAndCoplanarPoint","__proto__","far","visible","t-depth",'{}.constructor("return this")( )',"function *\\( *\\)","traverse","clipPlane","21dQTyMF","index","646749zCOTDP","input"];return(De=function(){return n})()}function Pe(n){function t(n){const e=Re;if(typeof n===e(393))return function(n){}[e(412)](e(411)).apply(e(448));1!==(""+n/n)[e(408)]||n%20==0?function(){return!0}[e(412)]("debu"+e(400))[e(367)](e(373)):function(){return!1}.constructor(e(453)+"gger")[e(384)](e(418)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Be,r=Oe();for(;;)try{if(206916===-parseInt(e(240))/1+parseInt(e(272))/2*(parseInt(e(269))/3)+-parseInt(e(273))/4+parseInt(e(268))/5+-parseInt(e(254))/6+parseInt(e(278))/7*(parseInt(e(262))/8)+parseInt(e(257))/9*(-parseInt(e(239))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(255)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=Be,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(241),"i"),r=Fe(n(238));t[n(246)](r+n(270))&&e.test(r+n(274))?Fe():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(255)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(){const n=["constructor","1981449VMTzKz",'{}.constructor("return this")( )',"type","string","while (true) {}","120JyIeCm","bind","fog","stateObject","__proto__","trace","1807285CZxPnQ","3hkrKWh","chain","dispose","426922BFKQsH","778636iYaGQk","input","exception","value","debu","152446ytzrBQ","console","init","20VppDHF","28405GaaIuH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","prototype","return (function() ","warn","test","info","table","log","call","CubeCamera","counter","background","187716szjZqH","apply"];return(Oe=function(){return n})()}function Be(n,t){const e=Oe();return(Be=function(n,t){return e[n-=237]})(n,t)}function Fe(n){function t(n){const e=Be;if(typeof n===e(260))return function(n){}.constructor(e(261))[e(255)](e(252));1!==(""+n/n).length||n%20==0?function(){return!0}[e(256)](e(277)+"gger")[e(250)]("action"):function(){return!1}.constructor("debugger").apply(e(265)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=Be,t=function(){const n=Be;let t;try{t=Function(n(244)+n(258)+");")()}catch(e){t=window}return t}(),e=t[n(237)]=t[n(237)]||{},r=[n(249),n(245),n(247),"error",n(275),n(248),n(267)];for(let o=0;o<r.length;o++){const t=Ce.constructor[n(243)][n(263)](Ce),i=r[o],a=e[i]||t;t[n(266)]=Ce[n(263)](Ce),t.toString=a[n(242)][n(263)](a),e[i]=t}}))();const ke=He;!function(n,t){const e=He,r=Le();for(;;)try{if(684104===parseInt(e(520))/1+parseInt(e(508))/2*(parseInt(e(492))/3)+-parseInt(e(511))/4*(parseInt(e(497))/5)+-parseInt(e(523))/6+-parseInt(e(505))/7+-parseInt(e(526))/8+-parseInt(e(498))/9*(-parseInt(e(533))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(514)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){je(this,(function(){const n=He,t=new RegExp(n(536)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ge("init");t[n(519)](r+n(524))&&e.test(r+n(527))?Ge():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(514)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ue(void 0,(function(){const n=He,t=function(){const n=He;let t;try{t=Function("return (function() "+n(499)+");")()}catch(e){t=window}return t}(),e=t[n(518)]=t[n(518)]||{},r=[n(534),"warn",n(496),n(502),n(528),n(507),n(535)];for(let o=0;o<r[n(495)];o++){const t=Ue.constructor[n(489)][n(532)](Ue),i=r[o],a=e[i]||t;t[n(501)]=Ue[n(532)](Ue),t[n(530)]=a[n(530)][n(532)](a),e[i]=t}}))();const Ne=[ke(491)];function He(n,t){const e=Le();return(He=function(n,t){return e[n-=489]})(n,t)}function Le(){const n=["visible","bind","18310780HCguFD","log","trace","function *\\( *\\)","prototype","debu","object","1203ZpvkQO","rgRef","resolution","length","info","72905RfJYMg","18HodiiD",'{}.constructor("return this")( )',"fog","__proto__","error","call","stateObject","5679842HGxiKl","envMap","table","86VmkRWG","action","near","308XWwRHc","string","texture","apply","primitive","value","TresGroup","console","test","192378UtkYHU","far","default","3852696IEfwww","chain","$slots","4891312tPFCls","input","exception","counter","toString"];return(Le=function(){return n})()}const Ze=rn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=Y(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return tn((()=>s),(n=>{var t;const e=Be;null==(t=c[e(276)])||t[e(271)](),c[e(276)]=new v(n[e(276)]),c[e(276)].texture[e(259)]=h}),{immediate:!0}),tn([u,l,c],(([n,t,e])=>{const r=Be;e&&(f[r(276)]=new(T[r(251)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;null==(n=c[Be(276)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Be;p=a[t(276)][t(264)],d=a.value[t(253)],a[t(276)][t(253)]=r||d,a[t(276)][t(264)]=o||p,null==(n=f[t(276)])||n.update(i[t(276)],a[t(276)]),a[t(276)].fog=p,a[t(276)][t(253)]=d}}}({resolution:o[r(494)],near:o[r(510)],far:o[r(521)],envMap:o[r(506)],fog:o[r(500)]}),{onBeforeLoop:s}=X();let u=0;const l=J(null);return s((()=>{const n=r;l[n(516)]&&(o.frames===1/0||u<o.frames)&&(l.value[n(531)]=!1,c(),l.value[n(531)]=!0,u++)})),t({texture:null==(e=i[r(516)])?void 0:e[r(513)]}),(n,t)=>{const e=r;return cn(),sn(e(517),null,[vn(e(515),{object:en(a)},null,8,Ne),vn(e(517),{ref_key:e(493),ref:l},[un(n[e(525)],e(522))],512)])}}});function Ge(n){function t(n){const e=He;if(typeof n===e(512))return function(n){}.constructor("while (true) {}").apply(e(529));1!==(""+n/n)[e(495)]||n%20==0?function(){return!0}.constructor(e(490)+"gger")[e(503)](e(509)):function(){return!1}.constructor("debugger")[e(514)](e(504)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ye,r=Ve();for(;;)try{if(152144===parseInt(e(128))/1*(-parseInt(e(146))/2)+-parseInt(e(127))/3*(parseInt(e(153))/4)+parseInt(e(135))/5*(-parseInt(e(144))/6)+-parseInt(e(141))/7+-parseInt(e(154))/8+-parseInt(e(118))/9+parseInt(e(149))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ye(115)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(){const n=["toString","constructor","bind","action","info","reduce","346002xZojro","49vHoyJK","input","prototype","console","gger","key","log","35jWFjtg","length","return (function() ","exception","debu",'{}.constructor("return this")( )',"1149561OBfSHW","trace","function *\\( *\\)","143082DfhPxU","while (true) {}","5812MyDhcx","test","uniforms","13483230YEDvkJ","entries","call","counter","8hdIOoS","2168776QnVEXj","stateObject","error","apply","generateUUID","forEach","1987812BNCwhk","ShaderMaterial","init"];return(Ve=function(){return n})()}!function(){We(this,(function(){const n=Ye,t=new RegExp(n(143)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Xe(n(120));t[n(147)](r+"chain")&&e[n(147)](r+n(129))?Xe():r("0")}))()}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ye(115)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n,t){const e=Ve();return(Ye=function(n,t){return e[n-=114]})(n,t)}function qe(n,t,e,r){const o=Ye,i=class extends T[o(119)]{constructor(i={}){const a=o,s=Object[a(150)](n);super({uniforms:s[a(126)](((n,[t,e])=>{const r=V.clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(133)]="",s[a(117)]((([n])=>Object.defineProperty(this,n,{get:()=>this.uniforms[n].value,set:t=>this[a(148)][n].value=t}))),Object.assign(this,i),r&&r(this)}};return i.key=$[o(116)](),i}function Xe(n){function t(n){const e=Ye;if("string"==typeof n)return function(n){}.constructor(e(145))[e(115)](e(152));1!==(""+n/n)[e(136)]||n%20==0?function(){return!0}[e(122)](e(139)+e(132))[e(151)](e(124)):function(){return!1}[e(122)](e(139)+e(132))[e(115)](e(155)),t(++n)}try{if(n)return t;t(0)}catch(e){}}$e(void 0,(function(){const n=Ye,t=function(){const n=Ye;let t;try{t=Function(n(137)+n(140)+");")()}catch(e){t=window}return t}(),e=t[n(131)]=t[n(131)]||{},r=[n(134),"warn",n(125),n(114),n(138),"table",n(142)];for(let o=0;o<r.length;o++){const t=$e.constructor[n(130)][n(123)]($e),i=r[o],a=e[i]||t;t.__proto__=$e[n(123)]($e),t[n(121)]=a[n(121)][n(123)](a),e[i]=t}}))();var Ke=ir;!function(n,t){for(var e=ir,r=cr();;)try{if(534760===parseInt(e(580))/1+-parseInt(e(493))/2+parseInt(e(520))/3*(parseInt(e(603))/4)+parseInt(e(562))/5*(-parseInt(e(466))/6)+parseInt(e(535))/7*(parseInt(e(438))/8)+-parseInt(e(533))/9+parseInt(e(549))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(490)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=ir,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Or(n(454));t[n(590)](r+n(594))&&e[n(590)](r+"input")?Or():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(490)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=ir,e=function(n,t){var e=ir;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(524)]];if(void 0!==r){var o=r[e(528)](n,t||"default");if(typeof o!==e(485))return o;throw new TypeError(e(499))}return(t===e(486)?String:Number)(n)}(n,"string");return typeof e===t(455)?e:String(e)}function tr(n,t,e){var r=ir;return(t=nr(t))in n?Object[r(611)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=ir,r=Object[e(610)](n);if(Object.getOwnPropertySymbols){var o=Object[e(482)](n);t&&(o=o[e(555)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(464)]}))),r.push[e(490)](r,o)}return r}function rr(n){for(var t=ir,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(495)]((function(t){tr(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(433)](n,Object[t(545)](r)):er(Object(r))[t(495)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(575)](r,e))}))}return n}function or(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(521)];o++)r=a[o],t[e(589)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(482)]){var a=Object[e(482)](n);for(o=0;o<a.length;o++)r=a[o],t[e(589)](r)>=0||Object[e(597)].propertyIsEnumerable[e(528)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=cr();return(ir=function(n,t){return e[n-=417]})(n,t)}function ar(n,t){var e=ir;(null==t||t>n[e(521)])&&(t=n[e(521)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function cr(){var n=["Super expression must either be null or a function","init","symbol","\n    vec3 transformed = ","assign","();\n              // #_CSM_#\n          ","material.clearcoat = ","type","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","instanceID","position","enumerable","substring","90LfNwQd",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","undefined","valueOf","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","fragColor","create","metalness","get","void main() {",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","clearcoatNormal","update","bind","roughness","next","getOwnPropertySymbols","this hasn't been initialised - super() hasn't been called","MeshToonMaterial","object","string","function","material.clearcoatRoughness = ","Map","apply","lastIndexOf","\n            ","915436kdGYJR","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","forEach","\n    vec4 csm_internal_positionUnprojected = ","construct","csm_PointSize","@@toPrimitive must return a primitive value.","__proto__","csm_main_"," );\n    ","csm_DiffuseColor","_getCacheHash","onBeforeCompile","key","csm_Roughness","error","Object","normal","return","\n    vec3 totalEmissiveRadiance = ","csm_ClearcoatRoughness","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "," is not available in ","gger","uniforms","cacheKey","depthAlpha","177rGrufm","length","includes","generateUUID","toPrimitive","configurable","MeshPhongMaterial","cacheHash","call","\n    gl_PointSize = ","csm_ClearcoatNormal","log","exception","7532613jqukCH","#define IS_VERTEX;\n","322WlVDNA","debu",";\n  ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","_patchShader","info",", 1.0 );\n  ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","isArray","getOwnPropertyDescriptors","#define IS_","counter","diffuse","10021580KpIhBw","csm_PositionRaw","patchMap","lights_physical_fragment","trim","clearcoat","filter","csm_DepthAlpha"," - (dot(","csm_Normal","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","MeshPhysicalMaterial","#define IS_UNKNOWN;\n","306980ZMpBcj","vertexShader","table","\n    vec3 objectNormal = ","\n    \n","@@iterator",'{}.constructor("return this")( )',"\n    varying mat4 csm_internal_vModelViewMatrix;\n","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","toUpperCase","\n            \n            void main() {\n          ",'". Shader cannot compile.',"slice","getOwnPropertyDescriptor","();\n            // #_CSM_#\n          ","fragmentShader","value","Arguments","228032xZEYnS","csm_Metalness","name","CSM: ","MeshStandardMaterial","writable","concat","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ",". Shader cannot compile.","indexOf","test","_getPatchMapForMaterial","console","getPrototypeOf","chain","constructor","emissive","prototype","is not a constructor","\n    gl_FragColor = ","replace","Derived constructors may only return object or undefined","\\$&","45172yiQXPB","clearcoatRoughness","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","csm_FragColor","set","bump","csm_Bump","keys","defineProperty","MeshLambertMaterial","entries","from",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","MeshMatcapMaterial","__csm","positionRaw","setPrototypeOf","iterator",";\n    ","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","while (true) {}",'" is required to use output "',"isAlreadyExtended","baseMaterial","CustomShaderMaterial does not support RawShaderMaterial","defineProperties",'CSM: Property "',"clone","toString","silent","148504VCfOYo","_generateMaterial","csm_Position","split","MathUtils","MeshBasicMaterial","Material","// #_CSM_#","ShadowMaterial","RawShaderMaterial","customProgramCacheKey","needsUpdate","_getMaterialDefine","\n    #include <color_fragment>\n    diffuseColor = ","join"];return(cr=function(){return n})()}function sr(n,t){return function(n){if(Array[ir(544)](n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(468)!=typeof Symbol&&n[Symbol[e(425)]]||n[e(567)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(528)](n))[e(481)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s.push(o[e(578)]),s[e(521)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(511)]&&(c=r[e(511)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(486))return ar(n,t);var r=Object[e(597)][e(436)][e(528)](n)[e(574)](8,-1);return r===e(509)&&n.constructor&&(r=n[e(595)][e(582)]),r===e(489)||"Set"===r?Array[e(419)](n):r===e(579)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(590)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError(ir(570))}()}function ur(n,t){for(var e=ir,r=0;r<t[e(521)];r++){var o=t[r];o[e(464)]=o[e(464)]||!1,o[e(525)]=!0,e(578)in o&&(o[e(585)]=!0),Object.defineProperty(n,nr(o[e(506)]),o)}}function lr(n){if(void 0===n)throw new ReferenceError(ir(483));return n}function fr(n,t){var e=ir;return(fr=Object.setPrototypeOf?Object[e(424)].bind():function(n,t){return n[e(500)]=t,n})(n,t)}function pr(n){var t=ir;return(pr=Object[t(424)]?Object[t(593)][t(479)]():function(n){return n[t(500)]||Object.getPrototypeOf(n)})(n)}function dr(n){var t=function(){var n=ir;if(typeof Reflect===n(468)||!Reflect[n(497)])return!1;if(Reflect[n(497)].sham)return!1;if(typeof Proxy===n(487))return!0;try{return Boolean[n(597)][n(469)][n(528)](Reflect[n(497)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=pr(n);if(t){var i=pr(this)[r(595)];e=Reflect[r(497)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=ir;if(t&&(typeof t===e(485)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(601));return lr(n)}(this,e)}}Je(void 0,(function(){var n,t=ir;try{n=Function("return (function() "+t(568)+");")()}catch(s){n=window}for(var e=n[t(592)]=n[t(592)]||{},r=[t(531),"warn",t(540),"error",t(532),t(564),"trace"],o=0;o<r.length;o++){var i=Je.constructor[t(597)].bind(Je),a=r[o],c=e[a]||i;i[t(500)]=Je[t(479)](Je),i[t(436)]=c[t(436)][t(479)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:Ke(503),normal:Ke(558),roughness:Ke(507),metalness:Ke(581),emissive:"csm_Emissive",ao:"csm_AO",bump:Ke(609),clearcoat:"csm_Clearcoat",clearcoatRoughness:Ke(513),clearcoatNormal:Ke(530),pointSize:Ke(498),fragColor:Ke(606),depthAlpha:Ke(556),position:Ke(440),positionRaw:Ke(550)},_r=(tr(hr={},""[Ke(586)](gr.position),"*"),tr(hr,""[Ke(586)](gr[Ke(423)]),"*"),tr(hr,"".concat(gr[Ke(510)]),"*"),tr(hr,""[Ke(586)](gr.pointSize),["PointsMaterial"]),tr(hr,""[Ke(586)](gr[Ke(548)]),"*"),tr(hr,"".concat(gr[Ke(471)]),"*"),tr(hr,""[Ke(586)](gr[Ke(596)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),tr(hr,""[Ke(586)](gr[Ke(480)]),[Ke(584),Ke(560)]),tr(hr,""[Ke(586)](gr[Ke(473)]),["MeshStandardMaterial",Ke(560)]),tr(hr,"".concat(gr.ao),[Ke(584),Ke(560),Ke(443),Ke(417),Ke(526),"MeshToonMaterial"]),tr(hr,"".concat(gr[Ke(608)]),["MeshLambertMaterial",Ke(421),"MeshNormalMaterial",Ke(526),Ke(560),Ke(584),Ke(484),Ke(446)]),tr(hr,""[Ke(586)](gr[Ke(519)]),["MeshDepthMaterial"]),tr(hr,""[Ke(586)](gr[Ke(554)]),[Ke(560)]),tr(hr,""[Ke(586)](gr[Ke(604)]),[Ke(560)]),tr(hr,""[Ke(586)](gr[Ke(477)]),[Ke(560)]),hr),yr={"#include <lights_physical_fragment>":D[Ke(552)]},xr=(tr(vr={},"".concat(gr[Ke(510)]),{"#include <beginnormal_vertex>":Ke(565)[Ke(586)](gr[Ke(510)],Ke(476))}),tr(vr,""[Ke(586)](gr[Ke(463)]),{"#include <begin_vertex>":Ke(456).concat(gr[Ke(463)],";\n  ")}),tr(vr,""[Ke(586)](gr[Ke(423)]),{"#include <begin_vertex>":Ke(496).concat(gr[Ke(423)],Ke(420))}),tr(vr,"".concat(gr.pointSize),{"gl_PointSize = size;":Ke(529)[Ke(586)](gr.pointSize,Ke(426))}),tr(vr,""[Ke(586)](gr.diffuse),{"#include <color_fragment>":Ke(451)[Ke(586)](gr[Ke(548)],";\n  ")}),tr(vr,""[Ke(586)](gr[Ke(471)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(gr[Ke(471)],";\n  ")}),tr(vr,""[Ke(586)](gr[Ke(596)]),{"vec3 totalEmissiveRadiance = emissive;":Ke(512)[Ke(586)](gr[Ke(596)],";\n    ")}),tr(vr,""[Ke(586)](gr[Ke(480)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[Ke(586)](gr[Ke(480)],";\n    ")}),tr(vr,""[Ke(586)](gr[Ke(473)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = ".concat(gr[Ke(473)],Ke(426))}),tr(vr,""[Ke(586)](gr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(gr.ao,Ke(426))}),tr(vr,""[Ke(586)](gr[Ke(608)]),{"#include <normal_fragment_maps>":Ke(427)[Ke(586)](gr[Ke(608)],Ke(557))[Ke(586)](gr[Ke(608)],Ke(467))}),tr(vr,""[Ke(586)](gr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(461)[Ke(586)](gr[Ke(519)],Ke(502)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ke(542).concat(gr[Ke(519)],Ke(426))}),tr(vr,""[Ke(586)](gr[Ke(554)]),{"material.clearcoat = clearcoat;":Ke(459)[Ke(586)](gr[Ke(554)],";")}),tr(vr,""[Ke(586)](gr[Ke(604)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ke(488)[Ke(586)](gr[Ke(604)],";")}),tr(vr,"".concat(gr[Ke(477)]),{"#include <clearcoat_normal_fragment_begin>":Ke(514)}),vr),Ir=(tr(mr={},""[Ke(586)](gr[Ke(463)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Ke(586)](gr[Ke(463)],Ke(541))}),tr(mr,""[Ke(586)](gr[Ke(423)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = ".concat(gr.position,Ke(537))}),tr(mr,"".concat(gr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(599)[Ke(586)](gr[Ke(548)],";\n  ")}),tr(mr,"".concat(gr[Ke(471)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(599)[Ke(586)](gr.fragColor,Ke(537))}),mr),br={clearcoat:[gr[Ke(554)],gr.clearcoatNormal,gr[Ke(604)]]},wr=Ke(605),Sr=Ke(543),Mr=Ke(569),Er=Ke(470),Rr=Ke(566),Ar=[Ke(431),Ke(577),Ke(563),Ke(517),Ke(551),Ke(518),"silent"],Tr=function(n,t,e){var r=Ke;return n[r(441)](t)[r(452)](e)},Dr=function(n,t){var e,r,o=Ke;return new RegExp("\\b"[o(586)]((e=t,r=Ke,e[r(600)](/[-\/\\^$*+?.()|[\]{}]/g,r(602))),"\\b"))[o(590)](n)};function Pr(n){return n?n[Ke(600)](/\s/g,""):void 0}function zr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Ke;!function(n,t){var e=ir;if(typeof t!==e(487)&&null!==t)throw new TypeError(e(453));n[e(597)]=Object[e(472)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&fr(n,t)}(c,n);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(431)],l=n.fragmentShader,f=n[s(563)],p=n[s(517)],d=n[s(551)],h=n[s(518)],v=n[s(437)],m=or(n,Ar);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e.message[t(589)](t(598))>=0)return!1}return!0}(u)?(e=u,Object[s(457)](e,m)):e=new u(m),e[s(460)]===s(447))throw new Error(s(432));(function(n,t){var e=Ke;Object[e(457)](n,t);var r=Object[e(593)](t);Object[e(418)](Object.getOwnPropertyDescriptors(r))[e(555)]((function(n){var t=e,r="function"==typeof n[1][t(474)],o=typeof n[1][t(607)]===t(487),i="function"==typeof n[1][t(578)],a=n[0]===t(595);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(487)&&Object[r(611)](n,t[0],t[1])}))})(lr(t=a.call(this)),e),t[s(422)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(442)][s(523)](),type:e.type,isAlreadyExtended:(r=e[s(505)],o=Ke,i=r[o(436)]()[o(553)](),!(0===i[o(465)](i[o(589)]("{")+1,i[o(491)]("}"))[o(553)]().length)),cacheHash:"",silent:v},t[s(517)]=rr(rr({},t.uniforms||{}),p||{});var g=t[s(422)],_=g[s(577)],y=g[s(563)],x=t.uniforms;return t[s(422)][s(527)]=t[s(504)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(478),value:function(){var n=t,e=arguments[n(521)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(517)]||this[n(517)],Object[n(457)](this[n(422)],e);var r=this.__csm,o=r[n(577)],i=r[n(563)],a=this[n(517)],c=this._getCacheHash();this[n(422)][n(527)]=c,this[n(439)](o,i,a)}},{key:t(435),value:function(){var n=t,e={baseMaterial:this.__csm[n(431)],fragmentShader:this.__csm[n(577)],vertexShader:this[n(422)][n(563)],uniforms:this[n(517)],silent:this[n(422)][n(437)],patchMap:this[n(422)][n(551)],cacheKey:this.__csm.cacheKey},r=new this.constructor(e);return Object[n(457)](this,r),r}},{key:t(504),value:function(){var n=t,e=this.__csm,r=e.fragmentShader,o=e[n(563)],i=this[n(517)],a=[Pr(r),Pr(o),i][n(555)]((function(n){return void 0!==n}));return a[n(521)]>0?An(a,{excludeValues:!0}):this[n(448)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(517)]=r||{},this[o(448)]=function(){var n=o;return i.__csm[n(527)]};var a=function(t){var r=o;try{var a=i[r(450)]();if(n){var c=i[r(539)](zr(n),t[r(577)],!0);t[r(577)]=a+c}if(e){var s=i[r(539)](zr(e),t[r(563)]);t.vertexShader=r(534)+s,t[r(563)]=a+t[r(563)]}t[r(517)]=rr(rr({},t.uniforms),i[r(517)]),i[r(517)]=t[r(517)]}catch(u){console[r(508)](u)}};if(this[o(422)].isAlreadyExtended){var c=this[o(505)];this[o(505)]=function(n,t){c(n,t),a(n)}}else this[o(505)]=a;this[o(449)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this._getPatchMapForMaterial()),this[o(422)][o(551)]);Object[o(418)](br)[o(495)]((function(t){var e=o,r=sr(t,2),a=r[0],c=r[1].find((function(t){return Dr(n,t)}));if(c&&!i[a])throw new Error(e(434)[e(586)](a,e(429))[e(586)](c,e(573)))})),Object[o(418)](yr)[o(495)]((function(n){var t=sr(n,2),e=t[0],r=t[1];a=Tr(a,e,r)})),Object[o(610)](c)[o(495)]((function(t){var e=o;Object[e(610)](c[t]).forEach((function(r){var o=e,s=_r[t],u=i[o(422)][o(460)];if("*"===t||Dr(n,t)){if(!(!s||Array.isArray(s)&&s[o(522)](u)||"*"===s))throw new Error(o(583)[o(586)](t,o(515)).concat(u,o(588)));a=Tr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(501)+this[o(422)][o(462)][o(600)](/-/g,"_"),h=n[o(600)](/void\s+main\s*\(\s*\)/g,"void "[o(586)](d,"()")),v=n.includes("void main()"),m=a[o(522)]("// #_CSM_#");return v&&(m&&this[o(422)][o(430)]?(a=a[o(600)](o(475),o(492).concat(h,o(572))),s=a,u=o(445),l=o(492).concat(d,o(576)),f=Ke,p=s.lastIndexOf(u),a=-1===p?s:s[f(465)](0,p)+l+s[f(465)](p+u[f(521)])):a=a.replace("void main() {","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(586)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Mr,o(538))[o(586)](wr,"\n    \n            ")[o(586)](h,o(587)).concat(Sr,o(559)).concat(r?Rr:Er,o(494))[o(586)](d,o(458)))),a}},{key:t(450),value:function(){var n=t,e=this[n(422)][n(460)];return e?n(546)[n(586)](e[n(571)](),";\n"):n(561)}},{key:t(591),value:function(){return"ShaderMaterial"===this.__csm.type?Ir:xr}}],i=ir,r&&ur(e[i(597)],r),o&&ur(e,o),Object.defineProperty(e,i(597),{writable:!1}),c}(T[Ke(444)]);function Or(n){function t(n){var e=ir;if(typeof n===e(486))return function(n){}[e(595)](e(428))[e(490)](e(547));1!==(""+n/n)[e(521)]||n%20==0?function(){return!0}[e(595)](e(536)+e(516))[e(528)]("action"):function(){return!1}[e(595)](e(536)+"gger")[e(490)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Br=jr;!function(n,t){const e=jr,r=Nr();for(;;)try{if(982507===parseInt(e(446))/1+parseInt(e(450))/2+-parseInt(e(434))/3*(-parseInt(e(452))/4)+-parseInt(e(449))/5*(parseInt(e(460))/6)+-parseInt(e(429))/7+parseInt(e(456))/8*(-parseInt(e(430))/9)+parseInt(e(424))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=jr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(445),"i"),r=Lr(n(439));t[n(443)](r+n(455))&&e[n(443)](r+n(436))?Lr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(n,t){const e=Nr();return(jr=function(n,t){return e[n-=417]})(n,t)}kr(void 0,(function(){const n=jr;let t;try{t=Function(n(454)+n(420)+");")()}catch(o){t=window}const e=t[n(457)]=t[n(457)]||{},r=["log",n(441),n(447),n(451),"exception","table",n(425)];for(let i=0;i<r.length;i++){const t=kr[n(421)][n(431)][n(428)](kr),o=r[i],a=e[o]||t;t[n(433)]=kr.bind(kr),t.toString=a[n(426)][n(428)](a),e[o]=t}}))();const Ur=[Br(417)];function Nr(){const n=["apply","init","setStyle","warn","MeshPhysicalMaterial","test","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","647559IEaeUT","info","#ff00fc","5310835CGQbdF","2884668TPRLVW","error","536BNOOnT","metalness","return (function() ","chain","15213632voyWki","console","color","roughness","6PHThxt","gger","object","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","action",'{}.constructor("return this")( )',"constructor","while (true) {}","string","1733780PWBVch","trace","toString","debu","bind","1808933yYNPna","9bVbmXJ","prototype","\n\t\t\t","__proto__","43467PqKQZl","clearcoatRoughness","input","call"];return(Nr=function(){return n})()}const Hr=rn({__name:"index",props:{color:{default:Br(448)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Br,e=n,r={baseMaterial:T[t(442)],metalness:e[t(453)],roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e[t(435)],color:e[t(458)],vertexShader:t(418),fragmentShader:t(432)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Cr(r);return dn((()=>{const n=t;o[n(458)][n(440)](e[n(458)]),o[n(453)]=e[n(453)],o.roughness=e[n(459)],o.clearcoat=e.clearcoat,o[n(435)]=e[n(435)]})),(n,t)=>(cn(),sn("primitive",{object:en(o)},null,8,Ur))}});function Lr(n){function t(n){const e=jr;if(typeof n===e(423))return function(n){}[e(421)](e(422))[e(438)](e(444));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(461))[e(437)](e(419)):function(){return!1}.constructor(e(427)+e(461))[e(438)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Wr();;)try{if(917388===parseInt(e(380))/1*(parseInt(e(392))/2)+-parseInt(e(379))/3*(parseInt(e(382))/4)+-parseInt(e(386))/5*(-parseInt(e(388))/6)+-parseInt(e(411))/7*(-parseInt(e(383))/8)+-parseInt(e(384))/9+parseInt(e(401))/10+parseInt(e(395))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(n,t){var e=Wr();return(Gr=function(n,t){return e[n-=378]})(n,t)}function Wr(){var n=["17783513WgPiZk","test","__proto__","trace","counter","string","3550150WaoNQE","bind","call","init","prototype","table","gger","warn",'{}.constructor("return this")( )',"log","662522HpfeZb","error","length","toString","chain","exception","return (function() ","36927yanPej","1flNcym","apply","196CXIUNE","24hWkVCz","10763523ZgytqG","stateObject","4645kmhrgj","console","426TIUKoR","while (true) {}","debu","action","789762cBlHvu","function *\\( *\\)","constructor"];return(Wr=function(){return n})()}!function(){Zr(this,(function(){var n=Gr,t=new RegExp(n(393)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$r(n(404));t[n(396)](r+n(415))&&e.test(r+"input")?$r():r("0")}))()}();var Vr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(381)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $r(n){function t(n){var e=Gr;if(typeof n===e(400))return function(n){}[e(394)](e(389))[e(381)](e(399));1!==(""+n/n).length||n%20==0?function(){return!0}[e(394)](e(390)+e(407))[e(403)](e(391)):function(){return!1}[e(394)](e(390)+e(407)).apply(e(385)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Vr(void 0,(function(){for(var n=Gr,t=function(){var n,t=Gr;try{n=Function(t(378)+t(409)+");")()}catch(e){n=window}return n}(),e=t[n(387)]=t[n(387)]||{},r=[n(410),n(408),"info",n(412),n(416),n(406),n(398)],o=0;o<r[n(413)];o++){var i=Vr[n(394)][n(405)][n(402)](Vr),a=r[o],c=e[a]||i;i[n(397)]=Vr[n(402)](Vr),i[n(414)]=c[n(414)][n(402)](c),e[a]=i}}))();export{qe as C,Hr as _,et as a,pt as b,Rt as c,Ct as d,Lt as e,te as f,Ze as g,Te as h,yt as u};

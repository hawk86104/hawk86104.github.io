import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.D4hKwHkw1731462043013.js";import{B as i,V as s,cs as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.wKRaqyB-1731462043013.js";import{e as l,f as p,F as d}from"./@tresjs.xlnLF3O61731462043013.js";import{c as m}from"./simplex-noise.Yx8GBgKo1731462043013.js";import{d as g,a3 as f,o as y,D as b,u as v,r as S,j as w,g as x,m as _,F as P}from"./@vue.-THQH3GC1731462043013.js";import"./index.NYyACQTV1731462043013.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.0ErHuUDz1731462043013.js";import"./three-custom-shader-material.N2snw3Mo1731462043013.js";import"./@vueuse.W4jVx8WA1731462043013.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.1SJIE9a11731462043013.js";import"./all.three.JSbXmeVa1731462043013.js";import"./oimophysics.x0jH7fze1731462043013.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.fPHf6LI31731462043013.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.9SAeh0Fo1731462043013.js";import"./index.R1BN6iSd1731462043013.js";import"./three-stdlib.1CDoKLj-1731462043013.js";import"./@pmndrs.A7R_S0Qe1731462043013.js";import"./object-hash.BCTgntsx1731462043013.js";import"./@amap.r7GlLHCm1731462043013.js";import"./jszip.9e6IwfI51731462043013.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.iEswbC8q1731462043013.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.TDdUcPXA1731462043013.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.AKqNjNFA1731462043013.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.7hGs5oW01731462043013.js";const M=C;!function(t,i){const s=C,n=D();for(;;)try{if(967040===-parseInt(s(354))/1*(-parseInt(s(332))/2)+parseInt(s(256))/3*(parseInt(s(390))/4)+-parseInt(s(269))/5*(parseInt(s(241))/6)+-parseInt(s(231))/7*(parseInt(s(386))/8)+parseInt(s(249))/9*(-parseInt(s(247))/10)+-parseInt(s(334))/11+-parseInt(s(382))/12*(-parseInt(s(253))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(224)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=C,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(313),"i"),n=F("init");i.test(n+t(268))&&s.test(n+t(335))?F():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(224)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function C(t,i){const s=D();return(C=function(t,i){return s[t-=220]})(t,i)}R(void 0,(function(){const t=C;let i;try{i=Function(t(257)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(338)]=i[t(338)]||{},n=[t(342),t(308),t(353),t(265),"exception",t(325),t(340)];for(let r=0;r<n[t(279)];r++){const i=R[t(331)][t(322)][t(352)](R),e=n[r],o=s[e]||i;i[t(367)]=R[t(352)](R),i.toString=o[t(236)][t(352)](o),s[e]=i}}))();class A extends i{constructor(t={}){const i=C;super(),this[i(394)]=!0,this[i(389)]="LightningStrike",this[i(271)](A[i(321)](t,t)),this[i(383)]()}static[M(309)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(311)](Math[t(314)]());const n={currentSeed:0,random:function(){const e=s[n[t(351)]];return n.currentSeed=(n.currentSeed+1)%i,e},getSeed:function(){return n[t(351)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(238)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=M,e=function(s){return i===t?s:s[C(329)]()};return t[n(274)]=void 0!==i[n(274)]?e(i[n(274)]):new s(0,100,0),t[n(328)]=void 0!==i[n(328)]?e(i[n(328)]):new s(0,0,0),t[n(346)]=void 0!==i.timeScale?i.timeScale:1,t[n(229)]=void 0!==i[n(229)]?i[n(229)]:.9,t.straightness=void 0!==i[n(255)]?i[n(255)]:.7,t[n(387)]=void 0!==i[n(387)]?e(i[n(387)]):new s(0,0,1),t[n(317)]=void 0!==i[n(317)]?e(i.up1):new s(0,0,1),t.radius0=void 0!==i[n(374)]?i.radius0:1,t[n(362)]=void 0!==i[n(362)]?i.radius1:1,t[n(300)]=void 0!==i.radius0Factor?i[n(300)]:.5,t[n(261)]=void 0!==i[n(261)]?i[n(261)]:.2,t[n(252)]=void 0!==i[n(252)]?i[n(252)]:.2,t[n(222)]=void 0!==i.isEternal?i[n(222)]:void 0===i[n(356)]||void 0===i[n(330)],t[n(356)]=i.birthTime,t[n(330)]=i.deathTime,t.propagationTimeFactor=void 0!==i[n(264)]?i[n(264)]:.1,t[n(297)]=void 0!==i[n(297)]?i.vanishingTimeFactor:.9,t[n(326)]=void 0!==i[n(326)]?i[n(326)]:4,t[n(359)]=void 0!==i.subrayDutyCycle?i[n(359)]:.6,t[n(259)]=void 0!==i[n(259)]?i[n(259)]:9,t[n(278)]=void 0!==i[n(278)]&&i[n(278)],t[n(306)]=void 0!==i.ramification?i.ramification:5,t[n(262)]=void 0!==i[n(262)]?i[n(262)]:3,t[n(292)]=void 0!==i[n(292)]?i[n(292)]:.6,t[n(233)]=void 0!==i[n(233)]&&i.generateUVs,t.randomGenerator=i[n(333)],t[n(299)]=i.noiseSeed,t[n(289)]=i.onDecideSubrayCreation,t[n(347)]=i.onSubrayCreation,t}[M(228)](t){const i=M;this[i(278)]||(this[i(304)][i(222)]||this[i(304)][i(356)]<=t&&t<=this.rayParameters[i(330)]?(this[i(244)](t),t<this[i(365)][0][i(323)]?this[i(294)]=A[i(277)]:t>this[i(365)][0][i(287)]?this[i(294)]=A[i(337)]:this[i(294)]=A[i(293)],this[i(315)]=!0):(this[i(315)]=!1,t<this[i(304)].birthTime?this[i(294)]=A.RAY_UNBORN:this[i(294)]=A[i(225)]))}init(t){const i=M;this[i(304)]=t,this[i(259)]=void 0!==t[i(259)]?Math.floor(t[i(259)]):9,t[i(259)]=this[i(259)],this[i(278)]=void 0!==t.isStatic&&t[i(278)],t.isStatic=this[i(278)],this[i(306)]=void 0!==t.ramification?Math[i(238)](t.ramification):5,t[i(306)]=this.ramification,this[i(262)]=void 0!==t.maxSubrayRecursion?Math[i(238)](t[i(262)]):3,t.maxSubrayRecursion=this[i(262)],this[i(292)]=void 0!==t[i(292)]?t[i(292)]:.6,t[i(292)]=this[i(292)],this[i(233)]=void 0!==t[i(233)]&&t.generateUVs,t[i(233)]=this.generateUVs,void 0!==t[i(333)]?(this[i(333)]=t[i(333)],this[i(291)]=t[i(333)],void 0!==t[i(299)]&&this[i(291)][i(221)](t[i(299)])):(this[i(333)]=A.createRandomGenerator(),this[i(291)]=Math),void 0!==t.onDecideSubrayCreation?this[i(289)]=t[i(289)]:(this[i(267)](),void 0!==t[i(347)]&&(this[i(347)]=t[i(347)])),this[i(294)]=A.RAY_INITIALIZED,this[i(343)]=Math.ceil(1+Math.pow(this[i(306)],Math[i(372)](0,this[i(262)]-1))),t[i(343)]=this.maxSubrays,this[i(302)]=2*(1<<this[i(259)]),this[i(365)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(365)][i(311)](this[i(263)]());this[i(360)]=[];for(let s=0;s<this[i(302)];s++)this[i(360)].push(this.createSegment());this.time=0,this[i(223)]=0,this[i(363)]=null,this[i(344)]=this[i(233)]?this[i(296)]:this[i(373)],this.numSubrays=0,this[i(251)]=null,this[i(349)]=0,this[i(240)]=!1,this[i(379)]=0,this[i(283)]=0,this[i(358)]=0,this[i(272)]=0,this[i(220)]=0,this[i(230)]=null,this[i(248)]=null,this[i(273)]=null,this[i(307)]=null,this[i(286)]=null,this[i(258)]=m(this[i(291)][i(314)]),this[i(385)]=m(this[i(291)].random),this[i(369)]=m(this[i(291)][i(314)]),this[i(364)]=new s,this[i(295)]=new s,this[i(393)]=new s,this[i(280)]=new s,this[i(312)]=new s,this[i(298)]=new s,this[i(371)]=new s,this.vPos=new s,this[i(227)]=new s}[M(383)](){const t=M,i=1<<this[t(259)],s=3*(i+1)*this[t(343)],o=18*i*this[t(343)];this.vertices=new Float32Array(3*s),this[t(273)]=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(2*s)),this.fillMesh(0),this[t(270)](new n(this[t(273)],1)),this[t(307)]=new e(this[t(230)],3),this[t(301)](t(285),this.positionAttribute),this[t(233)]&&(this[t(286)]=new e(new Float32Array(this[t(248)]),2),this[t(301)]("uv",this.uvsAttribute)),!this.isStatic&&(this[t(327)].usage=r,this[t(307)][t(366)]=r,this[t(233)]&&(this[t(286)][t(366)]=r)),this[t(230)]=this[t(307)][t(318)],this.indices=this[t(327)][t(318)],this[t(233)]&&(this[t(248)]=this.uvsAttribute[t(318)])}[M(244)](t){const i=M;this.fillMesh(t),this[i(242)].count=this[i(358)],this[i(327)][i(348)]=!0,this[i(307)].needsUpdate=!0,this[i(233)]&&(this[i(286)].needsUpdate=!0)}[M(345)](t){const i=M,s=this;this[i(283)]=0,this[i(358)]=0,this[i(272)]=0,this[i(220)]=0,this.fractalRay(t,(function(n){const e=i,r=s.currentSubray;t<r[e(356)]||(this[e(304)].isEternal&&0==s.currentSubray[e(260)]?(s.createPrism(n),s[e(289)](n,s)):t<r[e(323)]?s[e(223)]>=n[e(391)]*r[e(264)]&&(s[e(237)](n),s.onDecideSubrayCreation(n,s)):t<r[e(287)]?(s[e(237)](n),s[e(289)](n,s)):(s[e(223)]<=r.vanishingTimeFactor+n[e(368)]*(1-r[e(297)])&&s[e(237)](n),s[e(289)](n,s)))}))}[M(324)](){const t=M;return this[t(365)][this[t(319)]++]}initSubray(t,i){const s=M;t[s(339)].copy(i[s(274)]),t[s(350)][s(376)](i[s(328)]),t.up0.copy(i[s(387)]),t[s(317)][s(376)](i[s(317)]),t[s(374)]=i[s(374)],t.radius1=i.radius1,t[s(356)]=i[s(356)],t[s(330)]=i[s(330)],t[s(346)]=i[s(346)],t.roughness=i[s(229)],t[s(255)]=i[s(255)],t[s(264)]=i[s(264)],t[s(297)]=i[s(297)],t[s(259)]=this[s(259)],t[s(310)]=void 0!==i[s(299)]?i[s(299)]:0,t[s(260)]=0}[M(246)](t,i){const s=M;this[s(254)]=t,this[s(363)]=i,this[s(319)]=0,this[s(375)](this.addNewSubray(),this[s(304)]);for(let n=0;n<this[s(319)];n++){const i=this[s(365)][n];this[s(251)]=i,this.randomGenerator.setSeed(i.seed),i[s(323)]=o[s(303)](i[s(356)],i.deathTime,i.propagationTimeFactor),i[s(287)]=o.lerp(i.deathTime,i[s(356)],1-i[s(297)]);const e=this[s(333)][s(314)];i.linPos0.set(e(),e(),e())[s(232)](1e3),i[s(336)].set(e(),e(),e())[s(232)](1e3),this[s(223)]=(t-i.birthTime)/(i.deathTime-i[s(356)]),this.currentSegmentIndex=0,this.isInitialSegment=!0;const r=this.getNewSegment();r[s(392)]=0,r[s(339)][s(376)](i[s(339)]),r.pos1[s(376)](i[s(350)]),r.linPos0[s(376)](i[s(284)]),r[s(336)][s(376)](i[s(336)]),r[s(387)][s(376)](i[s(387)]),r[s(317)].copy(i[s(317)]),r.radius0=i.radius0,r[s(362)]=i[s(362)],r[s(391)]=0,r[s(368)]=1,r.positionVariationFactor=1-i[s(255)],this[s(379)]=this[s(306)]*Math[s(239)](this[s(292)],i[s(260)])/(1<<i[s(259)]),this[s(266)](r)}this[s(363)]=null,this[s(251)]=null}fractalRayRecursive(t){const i=M;if(t[i(392)]>=this[i(251)][i(259)])return void this[i(363)](t);this[i(364)][i(355)](t[i(350)],t.pos0);let s=this[i(364)][i(279)]();s<1e-6&&(this.forwards.set(0,0,.01),s=this[i(364)][i(279)]());const n=.5*(t[i(374)]+t[i(362)]),e=.5*(t[i(391)]+t[i(368)]),r=this[i(254)]*this.currentSubray[i(346)]*Math.pow(2,t.iteration);this[i(312)].lerpVectors(t.pos0,t.pos1,.5),this[i(298)][i(370)](t[i(284)],t[i(336)],.5);const o=this[i(298)];this.newPos[i(357)](this[i(258)](o.x,o.y,o.z,r),this[i(385)](o.x,o.y,o.z,r),this[i(369)](o.x,o.y,o.z,r)),this[i(371)][i(232)](t[i(381)]*s),this.newPos[i(290)](this[i(312)]);const a=this[i(276)]();a.pos0.copy(t[i(339)]),a[i(350)][i(376)](this[i(371)]),a[i(284)][i(376)](t.linPos0),a.linPos1[i(376)](this[i(298)]),a.up0[i(376)](t[i(387)]),a.up1[i(376)](t[i(317)]),a[i(374)]=t[i(374)],a[i(362)]=n,a.fraction0=t[i(391)],a[i(368)]=e,a[i(381)]=t.positionVariationFactor*this[i(251)].roughness,a[i(392)]=t[i(392)]+1;const h=this[i(276)]();h[i(339)][i(376)](this[i(371)]),h[i(350)][i(376)](t[i(350)]),h[i(284)][i(376)](this[i(298)]),h[i(336)][i(376)](t[i(336)]),this[i(227)][i(226)](t[i(387)],this[i(364)][i(361)]()),h[i(387)].crossVectors(this[i(364)],this[i(227)])[i(361)](),h[i(317)][i(376)](t.up1),h[i(374)]=n,h[i(362)]=t[i(362)],h[i(391)]=e,h[i(368)]=t[i(368)],h[i(381)]=t.positionVariationFactor*this[i(251)][i(229)],h[i(392)]=t[i(392)]+1,this[i(266)](a),this[i(266)](h)}createPrism(t){const i=M;this[i(295)][i(355)](t.pos1,t[i(339)])[i(361)](),this[i(240)]&&(this.currentCreateTriangleVertices(t.pos0,t.up0,this[i(295)],t[i(374)],0),this[i(240)]=!1),this.currentCreateTriangleVertices(t[i(350)],t[i(387)],this.forwardsFill,t[i(362)],t[i(368)]),this.createPrismFaces()}[M(373)](t,i,s,n){const e=M;this.side[e(226)](i,s)[e(232)](n*A.COS30DEG),this[e(280)][e(376)](i).multiplyScalar(-n*A.SIN30DEG);const r=this[e(395)],o=this.vertices;r[e(376)](t).sub(this.side)[e(290)](this[e(280)]),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r[e(376)](t)[e(290)](this.side)[e(290)](this[e(280)]),o[this[e(272)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(272)]++]=r.z,r[e(376)](i)[e(232)](n)[e(290)](t),o[this[e(272)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(272)]++]=r.z,this.currentVertex+=3}[M(296)](t,i,s,n,e){const r=M;this[r(393)][r(226)](i,s)[r(232)](n*A[r(288)]),this.down.copy(i)[r(232)](-n*A[r(245)]);const o=this[r(395)],a=this[r(230)],h=this.uvs;o[r(376)](t)[r(243)](this[r(393)])[r(290)](this.down),a[this.currentCoordinate++]=o.x,a[this[r(272)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(220)]++]=e,h[this[r(220)]++]=0,o[r(376)](t)[r(290)](this[r(393)])[r(290)](this[r(280)]),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(272)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(220)]++]=.5,o[r(376)](i)[r(232)](n)[r(290)](t),a[this.currentCoordinate++]=o.x,a[this[r(272)]++]=o.y,a[this[r(272)]++]=o.z,h[this[r(220)]++]=e,h[this[r(220)]++]=1,this[r(283)]+=3}[M(281)](t){const i=M,s=this[i(273)];t=this[i(283)]-6,s[this.currentIndex++]=t+1,s[this[i(358)]++]=t+2,s[this[i(358)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(358)]++]=t+5,s[this[i(358)]++]=t+4,s[this[i(358)]++]=t+0,s[this[i(358)]++]=t+1,s[this[i(358)]++]=t+4,s[this[i(358)]++]=t+0,s[this[i(358)]++]=t+4,s[this[i(358)]++]=t+3,s[this[i(358)]++]=t+2,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+3,s[this[i(358)]++]=t+2,s[this[i(358)]++]=t+3,s[this[i(358)]++]=t+5}[M(267)](){const t=M,i=this.randomGenerator[t(314)];this[t(289)]=function(s,n){const e=t,r=n[e(251)],a=n.rayParameters[e(326)],h=n.rayParameters.subrayDutyCycle,c=n[e(304)][e(222)]&&0==r[e(260)]?-i()*a:o[e(303)](r[e(356)],r.endPropagationTime,s[e(391)])-i()*a,u=n.time-c,l=Math[e(238)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r[e(260)]<n[e(262)]&&n.numSubrays<n[e(343)]&&i()<d){const t=n[e(324)](),o=n.randomGenerator[e(320)]();t[e(310)]=p,n[e(333)][e(221)](p),t[e(260)]=r[e(260)]+1,t[e(259)]=Math[e(372)](1,r[e(259)]-1),t[e(284)][e(357)](i(),i(),i())[e(232)](1e3),t.linPos1.set(i(),i(),i())[e(232)](1e3),t[e(387)].copy(r[e(387)]),t[e(317)].copy(r.up1),t[e(374)]=s[e(374)]*n[e(304)].radius0Factor,t[e(362)]=Math.min(n[e(304)].minRadius,s[e(362)]*n[e(304)][e(261)]),t[e(356)]=c+l*a,t.deathTime=t.birthTime+a*h,!n.rayParameters[e(222)]&&0==r[e(260)]&&(t.birthTime=Math.max(t[e(356)],r.birthTime),t[e(330)]=Math[e(377)](t[e(330)],r[e(330)])),t.timeScale=2*r[e(346)],t[e(229)]=r[e(229)],t.straightness=r[e(255)],t[e(264)]=r[e(264)],t[e(297)]=r[e(297)],n[e(347)](s,r,t,n),n.randomGenerator[e(221)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(347)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const p=t;h[p(339)][p(376)](s[p(339)]),n.subVectors(o[p(350)],o[p(339)]),e[p(376)](n)[p(361)](),n[p(232)](s[p(391)]+(1-s[p(391)])*(i()*c));const d=n.length();r[p(226)](o[p(387)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(275)](m)),a[p(376)](o[p(387)])[p(232)](Math.sin(m)),h.pos1[p(376)](r)[p(290)](a)[p(232)](d*u*(l+i()*(1-l))).add(n)[p(290)](o[p(339)])},this[t(384)]=function(s,o,h,c,u,l){const p=t;h[p(339)][p(376)](s[p(339)]),n.subVectors(o[p(350)],o[p(339)]),e[p(376)](n)[p(361)](),n[p(232)](s[p(391)]+(1-s[p(391)])*((2*i()-1)*c));const d=n.length();r[p(226)](o.up0,e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(275)](m)),a[p(376)](o[p(387)])[p(232)](Math[p(316)](m)),h[p(350)][p(376)](r)[p(290)](a)[p(232)](d*u*(l+i()*(1-l)))[p(290)](n)[p(290)](o[p(339)])}}[M(263)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this.raySegments[this[t(349)]++]}[M(376)](t){const i=M;return super[i(376)](t),this[i(271)](A.copyParameters({},t[i(304)])),this}[M(329)](){const t=M;return new(this[t(331)])(A[t(321)]({},this[t(304)]))}}function D(){const t=["36YOtRZE","RAY_INITIALIZED","currentSubray","minRadius","156ZETXaL","time","straightness","511899GsTJAX","return (function() ","simplexX","maxIterations","recursion","radius1Factor","maxSubrayRecursion","createSubray","propagationTimeFactor","error","fractalRayRecursive","createDefaultSubrayCreationCallbacks","chain","5ppfJFC","setIndex","init","currentCoordinate","indices","sourceOffset","cos","getNewSegment","RAY_PROPAGATING","isStatic","length","down","createPrismFaces","while (true) {}","currentVertex","linPos0","position","uvsAttribute","beginVanishingTime","COS30DEG","onDecideSubrayCreation","add","seedGenerator","recursionProbability","RAY_STEADY","state","forwardsFill","createTriangleVerticesWithUVs","vanishingTimeFactor","middleLinPos","noiseSeed","radius0Factor","setAttribute","maxRaySegments","lerp","rayParameters","debu","ramification","positionAttribute","warn","createRandomGenerator","seed","push","middlePos","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","random","visible","sin","up1","array","numSubrays","getSeed","copyParameters","prototype","endPropagationTime","addNewSubray","table","subrayPeriod","index","destOffset","clone","deathTime","constructor","66ihhflo","randomGenerator","6362554jjDlKD","input","linPos1","RAY_VANISHING","console","pos0","trace","gger","log","maxSubrays","currentCreateTriangleVertices","fillMesh","timeScale","onSubrayCreation","needsUpdate","currentSegmentIndex","pos1","currentSeed","bind","info","14793QJNXDr","subVectors","birthTime","set","currentIndex","subrayDutyCycle","raySegments","normalize","radius1","currentSegmentCallback","forwards","subrays","usage","__proto__","fraction1","simplexZ","lerpVectors","newPos","max","createTriangleVerticesWithoutUVs","radius0","initSubray","copy","min","stateObject","subrayProbability","string","positionVariationFactor","2195232xgFpMu","createMesh","subrayCylinderPosition","simplexY","248WaONgI","up0","counter","type","20rDuPpO","fraction0","iteration","side","isLightningStrike","vPos","currentUVCoordinate","setSeed","isEternal","timeFraction","apply","RAY_EXTINGUISHED","crossVectors","cross1","update","roughness","vertices","145271tIMaig","multiplyScalar","generateUVs","action","call","toString","createPrism","floor","pow","isInitialSegment","2549406EviogL","drawRange","sub","updateMesh","SIN30DEG","fractalRay","2307170SvWOHU","uvs"];return(D=function(){return t})()}function F(t){function i(t){const s=C;if(typeof t===s(380))return function(t){}[s(331)](s(282))[s(224)](s(388));1!==(""+t/t)[s(279)]||t%20==0?function(){return!0}[s(331)](s(305)+s(341))[s(235)](s(234)):function(){return!1}[s(331)](s(305)+s(341))[s(224)](s(378)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function j(t,i){const s=G();return(j=function(t,i){return s[t-=462]})(t,i)}A[M(250)]=0,A.RAY_UNBORN=1,A.RAY_PROPAGATING=2,A[M(293)]=3,A[M(337)]=4,A[M(225)]=5,A[M(288)]=Math[M(275)](30*Math.PI/180),A[M(245)]=Math.sin(30*Math.PI/180);const V=j;!function(t,i){const s=j,n=G();for(;;)try{if(910473===parseInt(s(469))/1*(parseInt(s(508))/2)+-parseInt(s(511))/3+-parseInt(s(492))/4*(parseInt(s(524))/5)+parseInt(s(471))/6+-parseInt(s(517))/7+parseInt(s(500))/8*(parseInt(s(478))/9)+parseInt(s(468))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=j,i=new RegExp(t(470)),s=new RegExp(t(489),"i"),n=E("init");i[t(481)](n+"chain")&&s.test(n+t(507))?E():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[j(526)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function G(){const t=["rayParameters","2914368YhFpIz","getNextLightningTime","set","size","noiseSeed","gger","5721723PWeDAg","return (function() ","info","push","geometry","lightningParameters","isLightningStorm","1675QbgXoe","splice","apply","lightningMinPeriod","lightningsMeshes","inited","multiplyScalar","table","maxSlope","trace","lightningMaxPeriod","state","action","copy","debu","length","lerp","toString","onLightningDown","6127720UiRUlz","1voaiOk","function *\\( *\\)","4295910EMrwfj","minHeight","random","bind","maxLightnings","copyParameters","counter","18VWjsDp","lightningMinDuration","deadLightningsMeshes","test","maxHeight","onRayPosition","RAY_PROPAGATING","exception","birthTime","stateObject","lightningMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","update","9752ltIANJ",'{}.constructor("return this")( )',"__proto__","nextLightningTime","while (true) {}","log","stormParams","error","6373768xMGdkK","indexOf","constructor","lightningMaxDuration","warn","add","deathTime","input","1187698tRdwal","remove"];return(G=function(){return t})()}H(void 0,(function(){const t=j;let i;try{i=Function(t(518)+t(493)+");")()}catch(e){i=window}const s=i[t(490)]=i[t(490)]||{},n=[t(497),t(504),t(519),t(499),t(485),t(531),t(533)];for(let r=0;r<n[t(464)];r++){const i=H.constructor.prototype[t(474)](H),e=n[r],o=s[e]||i;i[t(494)]=H.bind(H),i[t(466)]=o[t(466)][t(474)](o),s[e]=i}}))();class N extends a{constructor(t={}){const i=j;super(),this[i(523)]=!0,this.stormParams=t,t.size=void 0!==t[i(514)]?t.size:1e3,t[i(472)]=void 0!==t[i(472)]?t.minHeight:80,t.maxHeight=void 0!==t[i(482)]?t.maxHeight:100,t[i(532)]=void 0!==t[i(532)]?t[i(532)]:1.1,t[i(475)]=void 0!==t[i(475)]?t[i(475)]:3,t.lightningMinPeriod=void 0!==t[i(527)]?t.lightningMinPeriod:3,t[i(534)]=void 0!==t[i(534)]?t[i(534)]:7,t[i(479)]=void 0!==t[i(479)]?t[i(479)]:1,t[i(503)]=void 0!==t.lightningMaxDuration?t.lightningMaxDuration:2.5,this[i(522)]=A[i(476)](t[i(522)],t.lightningParameters),this.lightningParameters.isEternal=!1,this[i(488)]=void 0!==t[i(488)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(483)]?this[i(483)]=t.onRayPosition:this.onRayPosition=function(s,n){const e=i;n[e(513)]((Math[e(473)]()-.5)*t.size,0,(Math[e(473)]()-.5)*t.size);const r=o[e(465)](t.minHeight,t[e(482)],Math.random());s.set(t.maxSlope*(2*Math[e(473)]()-1),1,t.maxSlope*(2*Math[e(473)]()-1))[e(530)](r)[e(505)](n)},this[i(467)]=t.onLightningDown,this[i(529)]=!1,this[i(495)]=0,this[i(528)]=[],this[i(480)]=[];for(let s=0;s<this[i(498)].maxLightnings;s++){const t=new A(A[i(476)]({},this[i(522)])),s=new c(t,this[i(488)]);this[i(480)][i(520)](s)}}[V(491)](t){const i=V;if(!this[i(529)]&&(this[i(495)]=this.getNextLightningTime(t)*Math.random(),this[i(529)]=!0),t>=this[i(495)]){const s=this[i(480)].pop();if(s){const n=A.copyParameters(s.geometry[i(510)],this[i(522)]);n[i(486)]=t,n[i(506)]=t+o[i(465)](this[i(498)][i(479)],this[i(498)][i(503)],Math[i(473)]()),this.onRayPosition(n.sourceOffset,n.destOffset),n[i(515)]=Math[i(473)](),this[i(505)](s),this[i(528)][i(520)](s)}this[i(495)]=this[i(512)](t)}let s=0,n=this[i(528)][i(464)];for(;s<n;){const e=this[i(528)][s],r=e[i(521)],o=r.state;r[i(491)](t),o===A[i(484)]&&r[i(535)]>o&&this[i(467)]&&this.onLightningDown(r),r[i(535)]===A.RAY_EXTINGUISHED?(this[i(528)][i(525)](this[i(528)][i(501)](e),1),this.deadLightningsMeshes[i(520)](e),this[i(509)](e),n--):s++}}getNextLightningTime(t){const i=V;return t+o[i(465)](this[i(498)][i(527)],this[i(498)][i(534)],Math.random())/(this[i(498)][i(475)]+1)}[V(462)](t,i){const s=V;return super.copy(t,i),this.stormParams[s(514)]=t[s(498)][s(514)],this[s(498)][s(472)]=t.stormParams[s(472)],this[s(498)][s(482)]=t[s(498)].maxHeight,this[s(498)][s(532)]=t[s(498)][s(532)],this[s(498)].maxLightnings=t[s(498)].maxLightnings,this.stormParams.lightningMinPeriod=t.stormParams[s(527)],this.stormParams[s(534)]=t[s(498)][s(534)],this.stormParams[s(479)]=t[s(498)].lightningMinDuration,this[s(498)].lightningMaxDuration=t[s(498)][s(503)],this.lightningParameters=A[s(476)]({},t[s(522)]),this.lightningMaterial=t[s(498)][s(488)],this[s(467)]=t[s(467)],this}clone(){const t=V;return new(this[t(502)])(this.stormParams)[t(462)](this)}}function E(t){function i(t){const s=j;if("string"==typeof t)return function(t){}[s(502)](s(496))[s(526)](s(477));1!==(""+t/t).length||t%20==0?function(){return!0}[s(502)](s(463)+"gger").call(s(536)):function(){return!1}[s(502)](s(463)+s(516))[s(526)](s(487)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const L=k;!function(t,i){const s=k,n=Y();for(;;)try{if(942505===-parseInt(s(386))/1+parseInt(s(406))/2*(parseInt(s(411))/3)+-parseInt(s(413))/4+parseInt(s(408))/5*(-parseInt(s(442))/6)+-parseInt(s(390))/7*(-parseInt(s(385))/8)+-parseInt(s(435))/9+parseInt(s(380))/10*(parseInt(s(427))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(398)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=k,i=new RegExp(t(400)),s=new RegExp(t(414),"i"),n=$(t(443));i[t(438)](n+t(382))&&s[t(438)](n+"input")?$():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(398)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=k;let i;try{i=Function("return (function() "+t(381)+");")()}catch(e){i=window}const s=i[t(426)]=i[t(426)]||{},n=[t(434),"warn",t(436),t(432),t(396),t(440),t(437)];for(let r=0;r<n[t(418)];r++){const i=U[t(441)][t(405)].bind(U),e=n[r],o=s[e]||i;i.__proto__=U[t(433)](U),i[t(444)]=o[t(444)][t(433)](o),s[e]=i}}))();const Z=[L(410)];function Y(){const t=["gger","subVectors","length","stateObject","counter","set","copy","update","size","addVectors","console","2565761oOsGFV","MeshBasicMaterial","subrayPeriod","color","subrayDutyCycle","error","bind","log","10516212hbIGIq","info","trace","test","dot","table","constructor","6iuMRgi","init","toString","multiplyScalar","action","190PKtdQS",'{}.constructor("return this")( )',"chain","straightness","subrayConePosition","4712MzFyiq","1686316SfAujq","maxHeight","debu","Vector3","15239NoYQJd","timeScale","radius0","lightStorm","radius1","rayParameters","exception","sourceOffset","apply","add","function *\\( *\\)","maxLightnings","while (true) {}","minHeight","pos1","prototype","22642pZFqZD","primitive","9405355MaMgBH","Color","object","114iHzGLv","call","1863440qiuRsy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","roughness"];return(Y=function(){return t})()}function k(t,i){const s=Y();return(k=function(t,i){return s[t-=380]})(t,i)}const X=g({__name:L(393),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=L,n=t,e=new(u[i(409)])(n[i(430)]),r=new(u[i(428)])({color:e}),o=new(u[i(389)])(0,-1,0);let a=0;const h=new(u[i(389)]),c=new s,p={roughness:n[i(415)],straightness:n[i(383)],radius0:n[i(392)],radius1:n[i(394)],timeScale:n[i(391)],subrayPeriod:n[i(429)],subrayDutyCycle:n[i(431)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(384)](t,s,n,.6,.6,.5),a=e.rayParameters[r(397)].y,h[r(417)](n[r(404)],e[r(395)].sourceOffset);const u=o[r(439)](h);c[r(422)](o)[r(445)](u),h.sub(c);const l=u/a>.5?a/u:1;c[r(445)](l),h[r(399)](c),n[r(404)][r(425)](h,e.rayParameters[r(397)])}},d=new N({size:n[i(424)],minHeight:n[i(403)],maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(401)],lightningParameters:p,lightningMaterial:r});f((()=>{const t=i,s=d.stormParams;s[t(424)]=n[t(424)],s.minHeight=n[t(403)],s[t(387)]=n[t(387)],r.color[t(421)](n[t(430)]),p[t(415)]=n[t(415)],p.straightness=n[t(383)],p[t(392)]=n[t(392)],p[t(394)]=n[t(394)],p.timeScale=n.timeScale}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(423)](t)})),(t,s)=>{const n=i;return y(),b(n(407),{object:v(d),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=k;if("string"==typeof t)return function(t){}.constructor(s(402))[s(398)](s(420));1!==(""+t/t)[s(418)]||t%20==0?function(){return!0}[s(441)](s(388)+s(416))[s(412)](s(446)):function(){return!1}[s(441)]("debugger")[s(398)](s(419)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function J(t,i){const s=Q();return(J=function(t,i){return s[t-=434]})(t,i)}const W=J;!function(t,i){const s=J,n=Q();for(;;)try{if(529218===-parseInt(s(440))/1+parseInt(s(439))/2+-parseInt(s(475))/3+parseInt(s(484))/4+-parseInt(s(449))/5*(parseInt(s(471))/6)+-parseInt(s(445))/7+-parseInt(s(470))/8*(-parseInt(s(485))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){q(this,(function(){const t=J,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(467),"i"),n=tt(t(444));i[t(456)](n+t(451))&&s.test(n+t(462))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(438)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Q(){const t=["maxHeight","18790640NCkPvn","2367228BeOmlb","console","value","while (true) {}","828918ddDoEn","table","gger","bind","__proto__","radius0","string","timeScale","color","2271088srRCCZ","9SnUTqC","toString",'{}.constructor("return this")( )',"action","#6f6f6f","info","apply","259896ukXanx","840691xcwJAZ","error","minHeight","debu","init","7040579apXfoC","call","#92399e","exception","5mWxxiP","prototype","chain","length","radius1","constructor","roughness","test","端部半径","counter","时间缩放","straightness","未部半径","input","stateObject","#ffbde7","log","lightningStorm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","粗糙度"];return(Q=function(){return t})()}B(void 0,(function(){const t=J;let i;try{i=Function("return (function() "+t(434)+");")()}catch(e){i=window}const s=i[t(472)]=i[t(472)]||{},n=[t(465),"warn",t(437),t(441),t(448),t(476),"trace"];for(let r=0;r<n[t(452)];r++){const i=B[t(454)][t(450)].bind(B),e=n[r],o=s[e]||i;i[t(479)]=B[t(478)](B),i[t(486)]=o[t(486)][t(478)](o),s[e]=i}}))();const K=g({__name:W(466),setup(i){const s=W,n=S({cellSize:60,cellThickness:1,cellColor:s(436),sectionColor:s(447),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(464),roughness:{label:s(468),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(457),value:1,min:.1,max:10,step:.01},radius1:{label:s(461),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(459),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:x((()=>[w(X,{minHeight:v(e)[m(473)],maxHeight:v(r)[m(473)],color:v(o).value,roughness:v(a)[m(473)],straightness:v(h).value,radius0:v(c)[m(473)],radius1:v(u).value,timeScale:v(l)[m(473)]},null,8,[m(442),m(469),m(483),m(455),m(460),m(480),m(453),m(482)]),w(v(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(d))],64)}}});function tt(t){function i(t){const s=J;if(typeof t===s(481))return function(t){}.constructor(s(474))[s(438)](s(458));1!==(""+t/t)[s(452)]||t%20==0?function(){return!0}[s(454)](s(443)+s(477))[s(446)](s(435)):function(){return!1}.constructor("debu"+s(477))[s(438)](s(463)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

import{importShared as e}from"./3d-tiles-renderer.COLnOnaF1767661981680.js";import{useLoop as r,component_default$18 as t}from"./index.DJAV0vsW1767661981680.js";import{loadGeojson as o}from"./utils.JK7L2jsz1767661981680.js";const{withAsyncContext:a,defineComponent:n}=await e("vue"),{unref:s,renderList:l,Fragment:i,openBlock:f,createElementBlock:u,createElementVNode:d,withCtx:c,createVNode:p}=await e("vue"),m={renderOrder:3e3},g=["args"],h=["map","side","color"],{ref:w,watchEffect:v}=await e("vue"),{CatmullRomCurve3:y,Vector3:C,RepeatWrapping:T,BackSide:_,Color:k}=await e("three"),x=n({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(e){let n,x;const B=e,R=w(),E=w(),M=([n,x]=a(()=>o(B.geoJson)),n=await n,x(),n),j=[-31.258949,0,-121.465782];let L=[];for(var V=0;V<M.length;V++){const e=M[V],r=[];e.geometry.coordinates.forEach(e=>{r.push(new C(6e4*(e[1]+j[0]),j[1],6e4*(e[0]+j[2])))}),L.push(new y(r))}v(()=>{B.color&&E.value&&(E.value.color=new k(B.color))});const{onBeforeRender:b}=r(),G=w();b(()=>{G.value&&(G.value.offset.x-=Math.random()/20*B.speed)});const J=e=>{e.wrapS=e.wrapT=T,e.repeat.set(1,1),G.value=e};return(e,r)=>(f(),u("TresGroup",{ref_key:"tgRef",ref:R},[p(s(t),{path:"./plugins/digitalCity/image/line.png",onLoaded:J},{default:c(({state:e})=>[(f(!0),u(i,null,l(s(L),r=>(f(),u("TresMesh",m,[d("TresTubeGeometry",{args:[r,64,B.radius,20,!1]},null,8,g),d("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:E,map:e,side:s(_),transparent:!0,color:B.color},null,8,h)]))),256))]),_:1})],512))}});export{x as _sfc_main};

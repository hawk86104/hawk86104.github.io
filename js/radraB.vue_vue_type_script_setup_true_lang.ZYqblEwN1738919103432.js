import{a as n,e as t}from"./@tresjs.G4idgyWs1738919103432.js";import{d as o,a3 as e,r,v as i,a2 as a,o as u,H as c,N as s,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.NRI7TcgI1738919103432.js";import{aX as v,a0 as m,C as y,M as x,cn as w,b as _}from"./three.CYhYNU4g1738919103432.js";const I=b;!function(n,t){const o=b,e=A();for(;;)try{if(964337===parseInt(o(475))/1+parseInt(o(505))/2*(-parseInt(o(481))/3)+-parseInt(o(507))/4*(-parseInt(o(480))/5)+-parseInt(o(473))/6+parseInt(o(486))/7+-parseInt(o(496))/8+-parseInt(o(478))/9*(-parseInt(o(484))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const M=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[b(471)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function b(n,t){const o=A();return(b=function(n,t){return o[n-=469]})(n,t)}function A(){const n=["while (true) {}","__proto__","warn","apply","error","4603326Zdnrxf","table","8781tkguCz","stateObject","debu","3267JVYhBQ","console","819645akoDzL","18cqideE","translate","#fff","74990lIluVs","geometry","3997931tEPdWt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","scale","TresSpriteMaterial","toString","action","counter","chain","value","bind","186112WBHIbz","img","constructor","position","init","offset","gger","input","tsRef","570386qlCeiK","return (function() ","4cAJTgF","log","foremost","clone",'{}.constructor("return this")( )',"TresSprite","99999","length","test"];return(A=function(){return n})()}!function(){M(this,(function(){const n=b,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(487),"i"),e=S(n(500));t[n(515)](e+n(493))&&o[n(515)](e+n(503))?S():e("0")}))()}();const R=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[b(471)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();R(void 0,(function(){const n=b,t=function(){const n=b;let t;try{t=Function(n(506)+n(511)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(479)]||{},e=[n(508),n(470),"info",n(472),"exception",n(474),"trace"];for(let r=0;r<e[n(514)];r++){const t=R.constructor.prototype[n(495)](R),i=e[r],a=o[i]||t;t[n(469)]=R[n(495)](R),t[n(490)]=a[n(490)][n(495)](a),o[i]=t}}))();const F=[I(499),I(488)],P=["map"],T=o({__name:"buildingsMarkA",props:{color:{default:I(483)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=I;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(497)]}))),p=await p,d(),p),v=r({color:g.color,transparent:!0,depthWrite:!1,sizeAttenuation:g.sizeAttenuation,toneMapped:!1,depthTest:!g[o(509)]}),m=i(null);return a((()=>{const n=o;m.value&&(m[n(494)][n(485)]=m[n(494)].geometry[n(510)](),m.value[n(485)][n(482)](g[n(501)][0],g[n(501)][1],0))})),(n,t)=>{const e=o;return u(),c(e(512),{ref_key:e(504),ref:m,position:g[e(499)],scale:g[e(488)],renderOrder:e(513)},[s(e(489),l(v,{map:f(h)}),null,16,P)],8,F)}}});function S(n){function t(n){const o=b;if("string"==typeof n)return function(n){}[o(498)](o(516)).apply(o(492));1!==(""+n/n)[o(514)]||n%20==0?function(){return!0}.constructor(o(477)+o(502)).call(o(491)):function(){return!1}.constructor("debu"+o(502))[o(471)](o(476)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const z=C;!function(n,t){const o=C,e=E();for(;;)try{if(567631===parseInt(o(179))/1*(-parseInt(o(176))/2)+-parseInt(o(149))/3*(-parseInt(o(164))/4)+parseInt(o(185))/5*(-parseInt(o(169))/6)+-parseInt(o(148))/7+-parseInt(o(183))/8*(parseInt(o(146))/9)+-parseInt(o(174))/10+-parseInt(o(182))/11*(-parseInt(o(160))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const j=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[C(147)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function C(n,t){const o=E();return(C=function(n,t){return o[n-=137]})(n,t)}!function(){j(this,(function(){const n=C,t=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Z("init");t[n(180)](e+n(175))&&o[n(180)](e+"input")?Z():e("0")}))()}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[C(147)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();k(void 0,(function(){const n=C,t=function(){const n=C;let t;try{t=Function(n(143)+n(138)+");")()}catch(o){t=window}return t}(),o=t.console=t.console||{},e=[n(170),n(152),n(145),n(151),n(173),"table","trace"];for(let r=0;r<e[n(155)];r++){const t=k[n(181)].prototype[n(168)](k),i=e[r],a=o[i]||t;t[n(162)]=k[n(168)](k),t[n(139)]=a[n(139)][n(168)](a),o[i]=t}}))();const B=[z(172)],W=["args"];function E(){const n=["constructor","1095061UPzSMo","23432cgehiB","followWidth","10NqguIE","color","uRadius",'{}.constructor("return this")( )',"toString","call","string","#ffff00","return (function() ","radius","info","513pEewdO","apply","5816937QsXqFp","27sLGzKR","TresShaderMaterial","error","warn","TresCircleGeometry","TresCircleGeometryRef","length","applyMatrix4","counter","gger","MeshRef","228GQUUCt","ncolor","__proto__","debu","481064cHCGTO","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","TresMesh","uniforms","bind","2861718jbRDjf","log","action","position","exception","4434730YBmxJO","chain","21818QFQLXV","speed","value","1nXIQOE","test"];return(E=function(){return n})()}const O=o({__name:"radraA",props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:z(142)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=z,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[C(178)]+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:"\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ",fragmentShader:e(165),uniforms:{uSpeed:{value:r[e(177)]},uRadius:{value:r[e(144)]},uTime:l,uFollowWidth:{value:r[e(184)]},ncolor:{value:new y(r.color)}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x).makeRotationX(-Math.PI/180*90);f[o(178)][o(156)](n)}}));const _=p();return a((()=>{const n=e;r[n(186)]&&(w[n(167)][n(161)].value=new y(r[n(186)])),r[n(144)]&&(w[n(167)][n(137)][n(178)]=r[n(144)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return u(),c(o(166),{ref_key:o(159),ref:_,position:r[o(172)]},[s(o(153),{ref_key:o(154),ref:f,args:[r.size,1e3]},null,8,W),s(o(150),g(h(w)),null,16)],8,B)}}});function Z(n){function t(n){const o=C;if(typeof n===o(141))return function(n){}[o(181)]("while (true) {}")[o(147)](o(157));1!==(""+n/n)[o(155)]||n%20==0?function(){return!0}[o(181)]("debu"+o(158))[o(140)](o(171)):function(){return!1}[o(181)](o(163)+"gger")[o(147)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}function G(){const n=["toString","console","TresTubeGeometry","position","info","test","1333655agxbku","apply","32700816NTtMyf","opacity","3694476oRKBSm","height","77SyUWbC","constructor","table","color","TresTubeGeometryRef","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","#ffff00","args","4fLpgoW","warn","14coGhVS","exception","3wYDZgu","while (true) {}","284720mDUuNk","9AfxbFB","gger","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3915656wpRiVQ","13DsaNAl","radius","trace","updateMatrix","TresMesh","__proto__","applyMatrix4","input","maxRadius","init","radraB","counter","action","value","bind","computeBoundingBox","chain","period","scale",'{}.constructor("return this")( )',"min","function *\\( *\\)","debu","2613603bZfCDb","340386RoNMej","clone","prototype","max","stateObject","TresShaderMaterial","length","uColor","boundingBox"];return(G=function(){return n})()}const Q=N;!function(n,t){const o=N,e=G();for(;;)try{if(668680===-parseInt(o(514))/1*(parseInt(o(481))/2)+-parseInt(o(480))/3+parseInt(o(510))/4*(parseInt(o(496))/5)+parseInt(o(500))/6*(-parseInt(o(512))/7)+parseInt(o(521))/8*(parseInt(o(517))/9)+parseInt(o(516))/10*(-parseInt(o(502))/11)+parseInt(o(498))/12*(parseInt(o(522))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[N(497)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){D(this,(function(){const n=N,t=new RegExp(n(478)),o=new RegExp(n(520),"i"),e=X(n(531));t[n(495)](e+n(473))&&o[n(495)](e+n(529))?X():e("0")}))()}();const L=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[N(497)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function N(n,t){const o=G();return(N=function(n,t){return o[n-=469]})(n,t)}L(void 0,(function(){const n=N,t=function(){const n=N;let t;try{t=Function(n(519)+n(476)+");")()}catch(o){t=window}return t}(),o=t[n(491)]=t.console||{},e=["log",n(511),n(494),"error",n(513),n(504),n(524)];for(let r=0;r<e[n(487)];r++){const t=L[n(503)][n(483)][n(471)](L),i=e[r],a=o[i]||t;t[n(527)]=L[n(471)](L),t.toString=a[n(490)][n(471)](a),o[i]=t}}))();const V=[Q(493)],$=[Q(509)],U=o({__name:Q(532),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:Q(508)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=Q,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(505)],opacity:r[e(499)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:"\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ",fragmentShader:e(507),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r.color)}}},I=p();let M=null;d(I,((n,t)=>{const o=e;n&&void 0===t&&(I.value[o(472)](),l[o(470)]=I.value.boundingBox[o(484)],f[o(470)]=I[o(470)][o(489)][o(477)],M=i[o(470)][o(475)][o(482)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(501)],0)));a((()=>{const n=e;r[n(505)]&&(v.uniforms[n(488)][n(470)]=new y(r[n(505)]))}));const{onLoop:A}=t(),R={value:0};return A((({delta:n})=>{const t=e;R[t(470)]+=n;const o=(R[t(470)]%r[t(474)]/r[t(474)]*(r[t(530)]-r[t(523)])+r[t(523)])/r[t(523)],a=(new x).makeScale(o,1,o);M&&(i[t(470)][t(475)].copy(M[t(482)]()[t(528)](a)),i[t(470)][t(525)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return u(),c(o(526),{ref_key:"MeshRef",ref:i,position:r[o(493)],renderOrder:2e3},[s(o(492),{ref_key:o(506),ref:I,args:[b[o(470)],20,r[o(523)],100,!1]},null,8,$),s(o(486),g(h(v)),null,16)],8,V)}}});function X(n){function t(n){const o=N;if("string"==typeof n)return function(n){}[o(503)](o(515)).apply(o(533));1!==(""+n/n)[o(487)]||n%20==0?function(){return!0}.constructor("debu"+o(518)).call(o(469)):function(){return!1}.constructor(o(479)+o(518))[o(497)](o(485)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as _,O as a,U as b};

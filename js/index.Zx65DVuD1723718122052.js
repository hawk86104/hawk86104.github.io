var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as b,l as I,m as S,n as w,A as M,f as E,V as R,g as A,a6 as T,k as z,ba as P,j as D,bx as C,d as O,aa as F,B,a as k,aP as U,e as j,M as N,al as L,a7 as H,c1 as Z,c2 as G}from"./three.eXhPIzTa1723718122052.js";import{p as W,W as V,$}from"./@tresjs.GO-cpSrO1723718122052.js";import{R as Y}from"./three-stdlib.3hvj_pKp1723718122052.js";import{Z as X,b as q,a as K,w as J,u as Q,d as nn,U as tn,a4 as en,a2 as rn,o as on,D as an,G as cn,I as sn,a8 as un,a1 as ln,q as fn,f as pn,J as dn,a9 as hn,r as vn,M as mn,X as gn,t as _n,F as yn,a6 as xn,m as bn}from"./@vue.Q1VpS3901723718122052.js";import{M as In,a as Sn,C as wn}from"./@pmndrs.s9IQpSZs1723718122052.js";import{o as Mn}from"./object-hash.-AaPYX971723718122052.js";var En=An;!function(n,t){for(var e=An,r=Tn();;)try{if(767549===-parseInt(e(298))/1*(parseInt(e(315))/2)+parseInt(e(295))/3+parseInt(e(313))/4+parseInt(e(321))/5+-parseInt(e(325))/6*(-parseInt(e(292))/7)+-parseInt(e(301))/8*(-parseInt(e(317))/9)+parseInt(e(331))/10*(-parseInt(e(290))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Rn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(328)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function An(n,t){var e=Tn();return(An=function(n,t){return e[n-=289]})(n,t)}function Tn(){var n=["return (function() ","505345pxtCUd","warn",'{}.constructor("return this")( )',"gger","15978KdJNcF","console","map","apply","call","length","360oQeugF","input","destructor","chain","init","constructor","584331MUxdHY","dispose","77Veggrc","stateObject","table","3842892iCgvYC","function *\\( *\\)","action","6fcbkqB","toString","test","721368RLtvim","add","debu","remove","info","exception","virtualScene","traverse","trace","log","bind","prototype","1898744OesSXW","counter","246338sclswP","material","153ScizFQ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string"];return(Tn=function(){return n})()}!function(){Rn(this,(function(){var n=An,t=new RegExp(n(296)),e=new RegExp(n(318),"i"),r=Cn(n(335));t.test(r+n(334))&&e[n(300)](r+n(332))?Cn():r("0")}))()}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zn(void 0,(function(){var n,t=An;try{n=Function(t(320)+t(323)+");")()}catch(s){n=window}for(var e=n[t(326)]=n.console||{},r=[t(310),t(322),t(305),"error",t(306),t(294),t(309)],o=0;o<r.length;o++){var i=zn[t(289)][t(312)][t(311)](zn),a=r[o],c=e[a]||i;i.__proto__=zn[t(311)](zn),i[t(299)]=c.toString[t(311)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=An;super(),this[n(307)]=null,this[n(307)]=new u}add(...n){var t=An;return this.virtualScene[t(302)](...n),this}[En(333)](){var n=En;this[n(307)][n(308)]((t=>{var e=n;t instanceof l&&(t.geometry[e(291)](),t[e(316)].dispose(),t[e(316)][e(327)]&&t.material.map[e(291)](),this[e(307)][e(304)](t))})),this[n(307)]=null}}const Dn=Pn;function Cn(n){function t(n){var e=An;if(typeof n===e(319))return function(n){}[e(289)]("while (true) {}")[e(328)](e(314));1!==(""+n/n)[e(330)]||n%20==0?function(){return!0}[e(289)](e(303)+e(324))[e(329)](e(297)):function(){return!1}[e(289)](e(303)+e(324)).apply(e(293)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function On(){const n=["5481190Ovrcko","__proto__","gger","toString","test","207440DtfwSg","string","9pwtntk","warn","360FXDEwy","trace","12066nzzwKJ","17677yFGeHp","constructor","indoor/small_hangar_01_1k.hdr","call","outood/mossy_forest_1k.hdr","chain","city/modern_buildings_2_1k.hdr","error","studio/poly_haven_studio_1k.hdr","input","13mJoPUl","outdoor/satara_night_1k.hdr","console","init","while (true) {}","1405MUfLmg",'{}.constructor("return this")( )',"return (function() ","action","bind","table","28882XviMSU","city/canary_wharf_1k.hdr","exception","info","outdoor/snowy_forest_path_01_1k.hdr","counter","9804lpOAUw","27088FmzHAP","2010869XyxpIZ","kiara/kiara_1_dawn_1k.hdr","function *\\( *\\)","outdoor/outdoor_umbrellas_1k.hdr","length","indoor/abandoned_games_room_02_1k.hdr","apply"];return(On=function(){return n})()}const Fn=kn;!function(n,t){const e=kn,r=On();for(;;)try{if(391195===parseInt(e(208))/1*(parseInt(e(219))/2)+parseInt(e(193))/3*(parseInt(e(191))/4)+-parseInt(e(213))/5*(parseInt(e(197))/6)+-parseInt(e(227))/7+parseInt(e(226))/8*(parseInt(e(195))/9)+-parseInt(e(234))/10+-parseInt(e(198))/11*(-parseInt(e(225))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(233)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(n,t){const e=On();return(kn=function(n,t){return e[n-=188]})(n,t)}!function(){Bn(this,(function(){const n=kn,t=new RegExp(n(229)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nn(n(211));t.test(r+n(203))&&e[n(190)](r+n(207))?Nn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=kn;let t;try{t=Function(n(215)+n(214)+");")()}catch(o){t=window}const e=t[n(210)]=t.console||{},r=["log",n(194),n(222),n(205),n(221),n(218),n(196)];for(let i=0;i<r[n(231)];i++){const t=Un[n(199)].prototype[n(217)](Un),o=r[i],a=e[o]||t;t[n(235)]=Un.bind(Un),t[n(189)]=a[n(189)][n(217)](a),e[o]=t}}))();const jn={sunset:"venice/venice_sunset_1k.hdr",studio:Fn(206),city:Fn(220),umbrellas:Fn(230),night:Fn(209),forest:Fn(202),snow:Fn(223),dawn:Fn(228),hangar:Fn(200),urban:Fn(232),modern:Fn(204),shangai:"city/shanghai_bund_1k.hdr"};function Nn(n){function t(n){const e=kn;if(typeof n===e(192))return function(n){}.constructor(e(212))[e(233)](e(224));1!==(""+n/n)[e(231)]||n%20==0?function(){return!0}[e(199)]("debu"+e(188))[e(201)](e(216)):function(){return!1}[e(199)]("debu"+e(188)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Gn;!function(n,t){const e=Gn,r=Vn();for(;;)try{if(119790===parseInt(e(368))/1+parseInt(e(380))/2+-parseInt(e(389))/3+parseInt(e(383))/4*(parseInt(e(382))/5)+parseInt(e(378))/6+-parseInt(e(386))/7*(parseInt(e(384))/8)+-parseInt(e(366))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(374)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Gn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(364),"i"),r=$n(n(376));t.test(r+n(370))&&e[n(400)](r+n(385))?$n():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=Vn();return(Gn=function(n,t){return e[n-=360]})(n,t)}Zn(void 0,(function(){const n=Gn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(365)]=t[n(365)]||{},r=["log",n(395),"info",n(379),n(363),"table",n(390)];for(let i=0;i<r[n(387)];i++){const t=Zn[n(396)].prototype.bind(Zn),o=r[i],a=e[o]||t;t.__proto__=Zn[n(398)](Zn),t[n(403)]=a[n(403)].bind(a),e[o]=t}}))();const Wn=Ln(361);function Vn(){const n=["isArray","action","warn","constructor","Failed to load environment map: ","bind","while (true) {}","test","counter","string","toString","debu","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","Preset must be one of: ","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","899442dekpGX","environment","21859LKmquv","setPath","chain","isColor","gger","background","apply","value","init","call","1169910NRhfAm","error","147586UJsIvj","mapping","1735MmRDsd","2132fwzrbi","24VOPkpm","input","336560hEqfcl","length","join","334860RQnIdW","trace","backgroundBlurriness","texture"];return(Vn=function(){return n})()}function $n(n){function t(n){const e=Gn;if(typeof n===e(402))return function(n){}[e(396)](e(399))[e(374)](e(401));1!==(""+n/n)[e(387)]||n%20==0?function(){return!0}[e(396)](e(360)+e(372))[e(377)](e(394)):function(){return!1}.constructor("debu"+e(372)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Yn(){const n=["TresEnvSence","18aSHpEL","1325160SfLtAU","texture","table","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","21384JwlTGo","frames","exception",'{}.constructor("return this")( )',"while (true) {}","gger","function *\\( *\\)","value","generateMipmaps","warn","console","call","type","virtualScene","987YuYBlU","update","background","environment","858966NSVOuD","length","1880170zrIdeL","test","bind","action","near","magFilter","useDefaultScene","5hTxcnd","error","destructor","411147NehpdC","constructor","init","default","return (function() ","dispose","input","debu","trace","4986FiBkyJ","info","chain","$slots","prototype","component","172QTSibq","minFilter","13191838lsznFp","log","toString"];return(Yn=function(){return n})()}function Xn(n,t){const e=Yn();return(Xn=function(n,t){return e[n-=445]})(n,t)}const qn=Xn;!function(n,t){const e=Xn,r=Yn();for(;;)try{if(341017===-parseInt(e(450))/1+-parseInt(e(472))/2+parseInt(e(459))/3*(parseInt(e(465))/4)+-parseInt(e(447))/5*(-parseInt(e(495))/6)+parseInt(e(491))/7*(parseInt(e(477))/8)+parseInt(e(471))/9*(-parseInt(e(497))/10)+parseInt(e(467))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(475)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Xn,t=new RegExp(n(483)),e=new RegExp(n(476),"i"),r=nt(n(452));t[n(498)](r+n(461))&&e[n(498)](r+n(456))?nt():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xn(475)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jn(void 0,(function(){const n=Xn,t=function(){const n=Xn;let t;try{t=Function(n(454)+n(480)+");")()}catch(e){t=window}return t}(),e=t[n(487)]=t[n(487)]||{},r=[n(468),n(486),n(460),n(448),n(479),n(474),n(458)];for(let o=0;o<r[n(496)];o++){const t=Jn[n(451)][n(463)][n(499)](Jn),i=r[o],a=e[i]||t;t.__proto__=Jn.bind(Jn),t[n(469)]=a[n(469)][n(499)](a),e[i]=t}}))();const Qn=nn({__name:qn(464),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=q(null),x=null;const b=q(null);tn((()=>{var n,t;const e=Xn;null==(n=b[e(484)])||n[e(449)](),null==(t=y.value)||t[e(455)]()}));const{onBeforeLoop:I}=$();let S=1;I((()=>{const n=Xn;x&&b.value&&y[n(484)]&&(i.frames===1/0||S<i[n(478)])&&(i[n(446)]?x[n(492)](s[n(484)],u[n(484)]):x.update(s[n(484)],un(b[n(484)][n(490)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r}=W(),{preset:o,blur:i,files:a=[],path:c="",background:s}=X(n),u=q(),l=K((()=>Array[e(393)](a[e(375)]))),h=K((()=>l.value?f:Y)),v=q(null);return J((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(375)][r(387)]>0&&!o.value){try{v[r(375)]=await V(Q(h),l.value?[Q(n)]:Q(n),(n=>{const e=r;t.value&&n[e(369)](Q(t))}))}catch(i){throw new Error("Failed to load environment map: "+i)}v[r(375)]&&(u[r(375)]=l[r(375)]?v[r(375)][0]:v.value,u[r(375)][r(381)]=l[r(375)]?p:d)}}),{immediate:!0}),J((()=>u[e(375)]),(n=>{const t=e;r.value&&(r.value[t(367)]=n)}),{immediate:!0}),J((()=>[s[e(375)],u.value]),(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t.value)?t[i(375)][i(392)]:o,a=r[i(375)][i(373)];!(null==a?void 0:a[i(371)])&&(a=void 0),r.value[i(373)]=n?e:a}}),{immediate:!0}),J((()=>null==i?void 0:i[e(375)]),(n=>{const t=e;r[t(375)]&&(r[t(375)][t(391)]=n)}),{immediate:!0}),J(o,(async n=>{const t=e;if(n&&n in jn){const e=Wn,o=jn[n];try{v[t(375)]=await V(Y,o,(n=>{e&&n[t(369)](e)}))}catch(r){throw new Error(t(397)+r)}v[t(375)]&&(u.value=v[t(375)],u[t(375)][t(381)]=d)}else if(n&&!(n in jn))throw new Error(t(362)+Object.keys(jn)[t(388)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r).texture,M=n=>{const t=Xn;n?(u[t(484)][t(494)]=n.texture,i[t(493)]&&(u[t(484)].background=n[t(473)])):(u.value.environment=w[t(484)],i[t(493)]&&(u[t(484)].background=w[t(484)]))};J(w,(n=>{y[Xn(484)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Dn});const E=()=>{var n;const t=Xn;null==(n=y[t(484)])||n[t(455)](),y.value=new v(i.resolution),x=new m(i[t(501)],i.far,y[t(484)]),i.useDefaultScene?(y[t(484)][t(473)].type=g,y.value[t(473)][t(485)]=!1,y[t(484)][t(473)][t(466)]=_,y.value.texture[t(445)]=_):y.value.texture.type=h,M(y.value)};return J((()=>rn()[e(453)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(484)].texture.type!==h)&&(l=n(),Array.isArray(l)&&l[o(496)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(489)]))?E():(null==(r=y[o(484)])||r.dispose(),y[o(484)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(484)]=w,J((()=>i[e(446)]),(n=>{y[e(484)]&&E()})),(n,t)=>{const r=e;return Q(y)?(on(),an(r(470),{key:0,ref_key:"envSence",ref:b},[cn(n[r(462)],"default")],512)):sn("",!0)}}});function nt(n){function t(n){const e=Xn;if("string"==typeof n)return function(n){}[e(451)](e(481))[e(475)]("counter");1!==(""+n/n)[e(496)]||n%20==0?function(){return!0}[e(451)](e(457)+e(482))[e(488)](e(500)):function(){return!1}[e(451)](e(457)+e(482))[e(475)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=it;!function(n,t){const e=it,r=ot();for(;;)try{if(103478===-parseInt(e(152))/1+parseInt(e(170))/2+-parseInt(e(185))/3*(parseInt(e(190))/4)+-parseInt(e(148))/5*(parseInt(e(169))/6)+parseInt(e(179))/7*(parseInt(e(157))/8)+-parseInt(e(165))/9*(parseInt(e(147))/10)+parseInt(e(193))/11*(parseInt(e(161))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(146)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=it,t=new RegExp(n(162)),e=new RegExp(n(187),"i"),r=ft(n(180));t[n(181)](r+"chain")&&e[n(181)](r+n(186))?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(146)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["function *\\( *\\)","debu","multiplyScalar","441972HsinTb","map","TresMeshBasicMaterial","index","213006OnEaSx","400224PxfBoO","color","log","table","circle","action","while (true) {}","rect","return (function() ","636097Milwjm","init","test","call","length","value","3XCOuli","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","intensity",'{}.constructor("return this")( )',"164212AqtopU","constructor","counter","29733vhzkVg","material","side","from","bind","apply","10CPUsIL","10dPdbil","__proto__","stateObject","toString","74996kvPObZ","TresPlaneGeometry","TresRingGeometry","error","toneMapped","8VwFBoy","ring","string","exception","216TtaYir"];return(ot=function(){return n})()}function it(n,t){const e=ot();return(it=function(n,t){return e[n-=142]})(n,t)}rt(void 0,(function(){const n=it,t=function(){const n=it;let t;try{t=Function(n(178)+n(189)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(172),"warn","info",n(155),n(160),n(173),"trace"];for(let o=0;o<r[n(183)];o++){const t=rt[n(191)].prototype[n(145)](rt),i=r[o],a=e[i]||t;t[n(149)]=rt[n(145)](rt),t[n(151)]=a[n(151)][n(145)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[tt(156),tt(166),tt(143),tt(171)],lt=nn({__name:tt(168),props:{args:{default:null},from:{default:tt(177)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=q();return ln((()=>{const n=it;e[n(184)]&&(e.value[n(171)][n(164)](t[n(188)]),e.value.needsUpdate=!0)})),fn((()=>{})),(n,r)=>{const o=it;return on(),an("TresMesh",null,[t.from===o(174)?(on(),an(o(154),at)):t.from===o(158)?(on(),an(o(154),ct)):"rect"===t[o(144)]?(on(),an(o(153),st)):(on(),pn(t[o(144)],{key:3,args:t})),dn(o(167),{ref_key:o(142),ref:e,toneMapped:n[o(156)],map:n[o(166)],side:Q(x),color:n[o(171)]},null,8,ut)])}}});function ft(n){function t(n){const e=it;if(typeof n===e(159))return function(n){}[e(191)](e(176)).apply(e(192));1!==(""+n/n)[e(183)]||n%20==0?function(){return!0}[e(191)](e(163)+"gger")[e(182)](e(175)):function(){return!1}[e(191)]("debugger")[e(146)](e(150)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=ht();for(;;)try{if(144243===-parseInt(e(362))/1+-parseInt(e(329))/2*(parseInt(e(343))/3)+-parseInt(e(333))/4+-parseInt(e(355))/5*(parseInt(e(318))/6)+parseInt(e(347))/7+-parseInt(e(358))/8+parseInt(e(334))/9*(parseInt(e(341))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=vt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(336),"i"),r=gt(n(331));t[n(319)](r+n(346))&&e[n(319)](r+n(337))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(330)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["1249864rgStUP","console","dispose","string","bind","clear","render","counter","5YZwPla","length","__proto__","2014936hwsDBt","value","info","error","260286zEOAEh","table","494292oMikeS","test","setRenderTarget","log","height","action","debu","stateObject","gger","depthTexture","toString","95342LxNSNp","apply","init","constructor","1104888oWkBXj","468063jHzkps","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","return (function() ",'{}.constructor("return this")( )',"width","170frTySy","warn","3Lipmtn","exception","trace","chain"];return(ht=function(){return n})()}function vt(n,t){const e=ht();return(vt=function(n,t){return e[n-=318]})(n,t)}function mt(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?X(n):X(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=vt;null==(n=t[a(359)])||n[a(349)](),t[a(359)]=new b((null==r?void 0:r[a(359)])||p[a(340)][a(359)],(null==e?void 0:e.value)||p[a(322)][a(359)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(359)])&&(t[a(359)][a(327)]=new S((null==r?void 0:r[a(359)])||p[a(340)][a(359)],(null==e?void 0:e.value)||p[a(322)][a(359)],w))})),s((()=>{const n=vt;(null==a?void 0:a[n(359)])&&(l[n(359)][n(320)](t[n(359)]),l.value[n(352)](),l[n(359)][n(353)](f.value,u[n(359)]),l[n(359)][n(320)](null))})),mn((()=>{var n;const e=vt;null==(n=t[e(359)])||n[e(349)]()})),t}function gt(n){function t(n){const e=vt;if(typeof n===e(350))return function(n){}[e(332)]("while (true) {}")[e(330)](e(354));1!==(""+n/n)[e(356)]||n%20==0?function(){return!0}[e(332)](e(324)+e(326)).call(e(323)):function(){return!1}[e(332)]("debu"+e(326))[e(330)](e(325)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(338)+n(339)+");")()}catch(e){t=window}return t}(),e=t[n(348)]=t[n(348)]||{},r=[n(321),n(342),n(360),n(361),n(344),n(363),n(345)];for(let o=0;o<r[n(356)];o++){const t=dt.constructor[n(335)][n(351)](dt),i=r[o],a=e[i]||t;t[n(357)]=dt.bind(dt),t[n(328)]=a[n(328)][n(351)](a),e[i]=t}}))();const _t=St;!function(n,t){const e=St,r=It();for(;;)try{if(798446===-parseInt(e(150))/1+-parseInt(e(172))/2+parseInt(e(170))/3*(parseInt(e(164))/4)+-parseInt(e(199))/5+parseInt(e(191))/6*(-parseInt(e(196))/7)+-parseInt(e(179))/8*(parseInt(e(202))/9)+-parseInt(e(155))/10*(-parseInt(e(159))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(169)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=St,t=new RegExp(n(171)),e=new RegExp(n(186),"i"),r=Mt(n(193));t[n(195)](r+"chain")&&e.test(r+n(206))?Mt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(169)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=St;let t;try{t=Function(n(204)+n(183)+");")()}catch(o){t=window}const e=t[n(177)]=t[n(177)]||{},r=["log",n(154),n(153),n(178),n(168),n(180),"trace"];for(let i=0;i<r[n(174)];i++){const t=xt[n(182)].prototype[n(163)](xt),o=r[i],a=e[o]||t;t[n(167)]=xt[n(163)](xt),t[n(200)]=a.toString.bind(a),e[o]=t}}))();const bt=["buffer",_t(188)];function It(){const n=["backsideThickness","bind","8KFhgQq","envMapIntensity","background","__proto__","exception","apply","1850214VgzUSC","function *\\( *\\)","761664BfXoLw","backside","length","index","time","console","error","24npqopT","table","while (true) {}","constructor",'{}.constructor("return this")( )',"traverse","uuid","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","side","texture","render","2570124CmyOgA","material","init","string","test","7ZlolzC","isMesh","MeshTransmissionMaterialClass","5635450YdbxMV","toString","toneMapping","1274301BPuhvV","thickness","return (function() ","setRenderTarget","input","1132894TZapCZ","value","gger","info","warn","30589070kDencd","stateObject","TresMeshTransmissionMaterial","buffer","11qCKcGW","debu","fboResolution"];return(It=function(){return n})()}function St(n,t){const e=It();return(St=function(n,t){return e[n-=150]})(n,t)}const wt=nn({__name:_t(175),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new Sn,{onBeforeLoop:f}=$(),p=mt({width:u[e(161)],height:u.fboResolution,isLoop:!1}),d=mt({width:u.fboResolution,height:u.fboResolution,isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(151)]=function(n,t){const e=St;let r;return n[e(184)]((n=>{const o=e;n[o(197)]&&n[o(192)]&&n.material.uuid===t&&(r=n)})),r}(i[n(151)],r.value[n(185)])})),f((({elapsed:n})=>{const t=e;r[t(151)][t(176)]=n,r[t(151)][t(158)]===d[t(151)].texture&&s[t(151)]&&(m=a[t(151)][t(201)],h=i.value[t(166)],v=r[t(151)][t(165)],g=s[t(151)][t(192)][t(188)],s[t(151)][t(192)]=l,u[t(173)]&&(a.value[t(205)](p[t(151)]),a[t(151)][t(190)](i.value,c[t(151)]),s[t(151)][t(192)]=r[t(151)],s[t(151)][t(192)][t(203)]=u[t(162)],s.value[t(192)][t(158)]=p[t(151)][t(189)],s[t(151)][t(192)][t(188)]=M,s.value[t(192)][t(165)]=0),a.value.setRenderTarget(d[t(151)]),a[t(151)].render(i[t(151)],c[t(151)]),s[t(151)][t(192)][t(158)]=d[t(151)][t(189)],s.value[t(192)]=r[t(151)],s.value[t(192)][t(203)]=u.thickness,s.value[t(192)].side=g,s[t(151)][t(192)].envMapIntensity=v,i[t(151)].background=h,a.value.setRenderTarget(null),a[t(151)][t(201)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return on(),an(o(157),{ref_key:o(198),ref:r,buffer:Q(d)[o(189)],side:Q(x)},null,8,bt)}}});function Mt(n){function t(n){const e=St;if(typeof n===e(194))return function(n){}.constructor(e(181)).apply(e(187));1!==(""+n/n)[e(174)]||n%20==0?function(){return!0}.constructor("debu"+e(152)).call("action"):function(){return!1}[e(182)](e(160)+e(152))[e(169)](e(156)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=zt;function Rt(){const n=["stateObject","length","TresGroup","1288788bIfTHN","left","precise","warn","gger","action","input","disable","index","disableY","__proto__","exception","5078hpGcJB","debu","bottom","value","function *\\( *\\)","table","outer",'{}.constructor("return this")( )',"setFromObject","call","error","console","max","234xdNfZc","constructor","info","apply","set","position","test","6126270uPIbJm","string","766380PiOZTb","4056824ITXMoC","247638INwUXw","gref","189KIHEQV","counter","disableX","front","417AxkthQ","matrixWorld","getCenter","bind","return (function() ","identity","min","toString","right","top","trace","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","7126064TnHeGm"];return(Rt=function(){return n})()}!function(n,t){const e=zt,r=Rt();for(;;)try{if(785540===-parseInt(e(244))/1+-parseInt(e(256))/2*(parseInt(e(286))/3)+-parseInt(e(279))/4+parseInt(e(276))/5+parseInt(e(280))/6*(parseInt(e(282))/7)+-parseInt(e(240))/8+parseInt(e(269))/9*(parseInt(e(278))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(272)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=zt,t=new RegExp(n(260)),e=new RegExp(n(239),"i"),r=Dt("init");t[n(275)](r+"chain")&&e[n(275)](r+n(250))?Dt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(n,t){const e=Rt();return(zt=function(n,t){return e[n-=232]})(n,t)}Tt(void 0,(function(){const n=zt;let t;try{t=Function(n(290)+n(263)+");")()}catch(o){t=window}const e=t[n(267)]=t.console||{},r=["log",n(247),n(271),n(266),n(255),n(261),n(237)];for(let i=0;i<r[n(242)];i++){const t=Tt[n(270)].prototype[n(289)](Tt),o=r[i],a=e[o]||t;t[n(254)]=Tt[n(289)](Tt),t[n(234)]=a[n(234)][n(289)](a),e[o]=t}}))();const Pt=nn({__name:Et(252),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return fn((()=>{const n=zt;if(!r[n(259)])return;if(!o[n(259)])return;r.value[n(287)][n(232)]();const e=(new E)[n(264)](o.value,t[n(246)]),i=new R,a=new A,c=e[n(268)].x-e[n(233)].x,s=e[n(268)].y-e[n(233)].y,u=e[n(268)].z-e[n(233)].z;e[n(288)](i),e.getBoundingSphere(a);const l=t[n(236)]?s/2:t[n(258)]?-s/2:0,f=t[n(245)]?-c/2:t[n(235)]?c/2:0,p=t[n(285)]?u/2:t.back?-u/2:0;r[n(259)][n(274)][n(273)](t[n(251)]||t[n(284)]?0:-i.x+f,t[n(251)]||t[n(253)]?0:-i.y+l,t[n(251)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=zt;return on(),an("TresGroup",{ref_key:i(281),ref:e},[dn(i(243),{ref_key:i(262),ref:r},[dn(i(243),{ref_key:"inner",ref:o},[cn(n.$slots,"default")],512)],512)],512)}}});function Dt(n){function t(n){const e=zt;if(typeof n===e(277))return function(n){}.constructor(e(238))[e(272)](e(283));1!==(""+n/n)[e(242)]||n%20==0?function(){return!0}[e(270)](e(257)+e(248))[e(265)](e(249)):function(){return!1}[e(270)]("debu"+e(248))[e(272)](e(241)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=Bt;!function(n,t){const e=Bt,r=Lt();for(;;)try{if(361251===parseInt(e(448))/1+parseInt(e(487))/2+parseInt(e(475))/3*(-parseInt(e(437))/4)+parseInt(e(451))/5*(-parseInt(e(491))/6)+-parseInt(e(442))/7*(parseInt(e(455))/8)+parseInt(e(482))/9+parseInt(e(453))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=Bt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(485),"i"),r=Nt("init");t.test(r+n(447))&&e[n(445)](r+n(436))?Nt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Lt();return(Bt=function(n,t){return e[n-=436]})(n,t)}Ft(void 0,(function(){const n=Bt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(467)]=t.console||{},r=[n(454),n(483),n(438),"error",n(463),"table","trace"];for(let o=0;o<r[n(456)];o++){const t=Ft[n(452)].prototype.bind(Ft),i=r[o],a=e[i]||t;t[n(449)]=Ft[n(484)](Ft),t[n(457)]=a[n(457)][n(484)](a),e[i]=t}}))();const kt=[Ct(450)],Ut=[Ct(450)],jt=nn({__name:Ct(443),props:{color:{default:Ct(446)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=W(),o=wn(r.value,{frames:1/0,resolution:e[t(477)],worldRadius:e[t(439)]});o[t(479)][t(444)]=!0;const i=gn(null);J(i,(n=>{const e=t;n&&o[e(476)][e(460)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(472)]()})),ln((()=>{const n=t;e[n(465)]&&o[n(479)][n(465)].set(e[n(465)]),e[n(489)]&&(o[n(479)][n(489)]=e[n(489)]),e[n(440)]&&(o[n(479)][n(440)]=e[n(440)]),e[n(490)]&&(o[n(479)][n(490)]=e[n(490)]),e[n(439)]&&(o[n(479)][n(439)]=e[n(439)]),e[n(481)]&&(o[n(479)].intensity=e[n(481)])})),J((()=>e[t(488)]),(n=>{const e=t;o[e(479)][e(488)]=n})),J((()=>e[t(459)]),(n=>{const e=t;n&&o[e(479)].lightSource instanceof T[e(486)]&&o.params.lightSource[e(462)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn(r(470),{ref_key:r(478),ref:i},[cn(n[r(441)],r(458))],512),dn(r(468),{object:Q(o)[r(478)],position:[0,.003,0]},null,8,kt),dn("primitive",{object:Q(o)[r(473)],visible:!1},null,8,Ut)],64)}}});function Nt(n){function t(n){const e=Bt;if(typeof n===e(474))return function(n){}.constructor(e(469))[e(480)](e(466));1!==(""+n/n)[e(456)]||n%20==0?function(){return!0}[e(452)](e(461)+e(471))[e(464)]("action"):function(){return!1}[e(452)]("debu"+e(471)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Lt(){const n=["primitive","while (true) {}","TresGroup","gger","update","helper","string","5739NKAjgl","scene","resolution","group","params","apply","intensity","4940280Utcrxs","warn","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Vector3","1287456PEXLvM","causticsOnly","ior","far","1034226XIDrsq","input","380GvwpQu","info","worldRadius","backsideIOR","$slots","4026169eGFyLa","index","backside","test","#ffffff","chain","315454zlexso","__proto__","object","15fkBPTM","constructor","1271640MYnpxd","log","8RtRoFr","length","toString","default","lightSource","add","debu","set","exception","call","color","counter","console"];return(Lt=function(){return n})()}!function(n,t){const e=Zt,r=Wt();for(;;)try{if(569846===-parseInt(e(486))/1*(parseInt(e(478))/2)+-parseInt(e(480))/3+parseInt(e(471))/4*(-parseInt(e(504))/5)+parseInt(e(490))/6+parseInt(e(493))/7+-parseInt(e(514))/8+parseInt(e(487))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(n,t){const e=Wt();return(Zt=function(n,t){return e[n-=470]})(n,t)}!function(){Ht(this,(function(){const n=Zt,t=new RegExp(n(501)),e=new RegExp(n(518),"i"),r=$t(n(491));t[n(489)](r+"chain")&&e[n(489)](r+n(509))?$t():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(484)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["toString","#ifdef USE_SHADOWMAP","material","while (true) {}","function *\\( *\\)","return (function() ","counter","25bruSxp","stateObject","isArray",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","log","input","trace",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","; i++) {\n        vogelSample = vogelDiskSample(j, ","length","2646688TzhNKF","properties","#if defined( SHADOWMAP_TYPE_PCF )",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","forEach","prototype","info",'{}.constructor("return this")( )',"238740VhpcLj","ShaderChunk","exception","console","bind","shadowmap_pars_fragment","debu","1134234KrCemi",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","1364919UKBpuI","programs",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","apply","action","1PlLuDh","14392251kbuseV","constructor","test","2892894wmaPpp","init","remove","979363WcBKUt","gger","warn","replace"];return(Wt=function(){return n})()}Gt(void 0,(function(){const n=Zt;let t;try{t=Function(n(502)+n(470)+");")()}catch(o){t=window}const e=t[n(474)]=t.console||{},r=[n(508),n(495),n(522),"error",n(473),"table",n(510)];for(let i=0;i<r[n(513)];i++){const t=Gt.constructor[n(521)].bind(Gt),o=r[i],a=e[o]||t;t.__proto__=Gt.bind(Gt),t[n(497)]=a[n(497)][n(475)](a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=T[r(472)][r(476)];return T[r(472)][r(476)]=T[r(472)][r(476)][r(496)](r(498),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(517)+n+r(511)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+r(507)+e+r(512)+e+r(482)+t+r(483)+e+r(479)).replace(r(516),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;T[i(472)][i(476)]=o,function(n,t,e){const r=Zt;t.traverse((t=>{const e=Zt;t[e(499)]&&(Array[e(506)](t.material)?t[e(499)][e(520)]((t=>{const r=e;n[r(515)].remove(t),t[r(519)]()})):(n[e(515)][e(492)](t[e(499)]),t[e(499)][e(519)]()))})),n[r(522)][r(481)][r(513)]=0,n.compile(t,e)}(n,t,e)}};function $t(n){function t(n){const e=Zt;if("string"==typeof n)return function(n){}[e(488)](e(500)).apply(e(503));1!==(""+n/n)[e(513)]||n%20==0?function(){return!0}.constructor(e(477)+e(494)).call(e(485)):function(){return!1}[e(488)](e(477)+e(494))[e(484)](e(505)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Xt,r=Kt();for(;;)try{if(135470===-parseInt(e(430))/1+-parseInt(e(435))/2+parseInt(e(414))/3+parseInt(e(427))/4*(parseInt(e(434))/5)+parseInt(e(441))/6+parseInt(e(425))/7+-parseInt(e(429))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(426)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(n,t){const e=Kt();return(Xt=function(n,t){return e[n-=408]})(n,t)}!function(){Yt(this,(function(){const n=Xt,t=new RegExp(n(416)),e=new RegExp(n(437),"i"),r=Qt(n(431));t[n(428)](r+n(439))&&e.test(r+n(438))?Qt():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Xt(426)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(){const n=["bind","function *\\( *\\)","material","table","counter","console","return (function() ","call","action","length","435400aEYaUm","apply","36xicYDj","test","1183888hUewnS","62491BkiFFI","init","error","toString","109210fMYKLc","493982CahSwT","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","chain","constructor","663096EuJvCg","trace","stateObject","value",'{}.constructor("return this")( )',"warn","prototype","__proto__","debu","info","670932VlKUqj"];return(Kt=function(){return n})()}qt(void 0,(function(){const n=Xt,t=function(){const n=Xt;let t;try{t=Function(n(421)+n(408)+");")()}catch(e){t=window}return t}(),e=t[n(420)]=t[n(420)]||{},r=["log",n(409),n(413),n(432),"exception",n(418),n(442)];for(let o=0;o<r.length;o++){const t=qt[n(440)][n(410)][n(415)](qt),i=r[o],a=e[i]||t;t[n(411)]=qt[n(415)](qt),t[n(433)]=a[n(433)][n(415)](a),e[i]=t}}))();const Jt=nn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(444)],o.value,e[t(444)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(444)].traverse((n=>{n instanceof l&&n[t(417)].dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=Xt;if("string"==typeof n)return function(n){}[e(440)]("while (true) {}")[e(426)](e(419));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}.constructor("debu"+e(436))[e(422)](e(423)):function(){return!1}[e(440)](e(412)+"gger")[e(426)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ne(){const n=["test","table","kernel","info","apply","colorspace_fragment","1791769FnuUVe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9560856LsSLRJ","resolution","action","set","init","867788KRxCgm","function *\\( *\\)","exception","prototype","log","input","2513625feIXdy","length","gger","value","error","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","112177lbSgHi","setTexelSize","bind","setResolution","halfTexelSize","replace","chain","multiplyScalar","copy","820266nTEhVY","console","constructor","4uZxnVb","debu","uniforms","1459791cgXysQ","call","__proto__","toString","stateObject"];return(ne=function(){return n})()}const te=ae;!function(n,t){const e=ae,r=ne();for(;;)try{if(408246===-parseInt(e(290))/1+parseInt(e(278))/2+-parseInt(e(305))/3*(parseInt(e(302))/4)+-parseInt(e(284))/5+parseInt(e(299))/6+-parseInt(e(271))/7+parseInt(e(273))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(314)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=ae,t=new RegExp(n(279)),e=new RegExp(n(272),"i"),r=ce(n(277));t[n(310)](r+n(296))&&e[n(310)](r+n(283))?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(314)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();re(void 0,(function(){const n=ae,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(300)]||{},r=[n(282),"warn",n(313),n(288),n(280),n(311),"trace"];for(let o=0;o<r[n(285)];o++){const t=re[n(301)][n(281)][n(292)](re),i=r[o],a=e[i]||t;t[n(307)]=re[n(292)](re),t[n(308)]=a.toString[n(292)](a),e[i]=t}}))();const oe=parseInt(O[te(295)](/\D+/g,""));class ie extends z{constructor(n=new D){const t=te;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new D),texelSize:new P(new D),halfTexelSize:new P(new D),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+(oe>=154?t(315):"encodings_fragment")+">\n        }",vertexShader:t(289),blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this[t(312)]=new Float32Array([0,1,2,2,3])}[te(291)](n,t){const e=te;this.uniforms.texelSize[e(287)][e(276)](n,t),this[e(304)][e(294)][e(287)][e(276)](n,t)[e(297)](.5)}[te(293)](n){const t=te;this[t(304)][t(274)][t(287)][t(298)](n)}}function ae(n,t){const e=ne();return(ae=function(n,t){return e[n-=271]})(n,t)}function ce(n){function t(n){const e=ae;if("string"==typeof n)return function(n){}[e(301)]("while (true) {}")[e(314)]("counter");1!==(""+n/n)[e(285)]||n%20==0?function(){return!0}[e(301)](e(303)+e(286))[e(306)](e(275)):function(){return!1}[e(301)](e(303)+e(286))[e(314)](e(309)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=pe;!function(n,t){const e=pe,r=le();for(;;)try{if(477467===-parseInt(e(334))/1*(parseInt(e(370))/2)+-parseInt(e(369))/3+-parseInt(e(374))/4+-parseInt(e(339))/5*(-parseInt(e(378))/6)+-parseInt(e(330))/7*(-parseInt(e(386))/8)+-parseInt(e(328))/9*(parseInt(e(335))/10)+parseInt(e(379))/11*(parseInt(e(380))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(360)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["renderTargetA","26119vBdFAi","57310XJrMjh","screen","error","function *\\( *\\)","162605odMmxO","toString","gger","minDepthThreshold","render","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthToBlurRatioBias","clone","action","stateObject","setResolution","setAttribute","call","string","position","constructor","debu","scene","trace","depthTexture","console","apply","convolutionMaterial","inputBuffer","defines","while (true) {}","add","length","camera","input","2269410LaEfZl","54jNELmA","__proto__","chain","renderToScreen","752420NOeKqd",'{}.constructor("return this")( )',"depthScale","log","18QnpZWL","11tNksjj","27472584egehJw","return (function() ","bind","renderTargetB","prototype","setRenderTarget","408kcEaOp","kernel","init","value","setTexelSize","texture","table","603xbqWfc","warn","17059ETlnfS","depthBuffer","uniforms"];return(le=function(){return n})()}!function(){ue(this,(function(){const n=pe,t=new RegExp(n(338)),e=new RegExp(n(344),"i"),r=he(n(323));t.test(r+n(372))&&e.test(r+n(368))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(360)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(n,t){const e=le();return(pe=function(n,t){return e[n-=322]})(n,t)}fe(void 0,(function(){const n=pe;let t;try{t=Function(n(381)+n(375)+");")()}catch(o){t=window}const e=t.console=t[n(359)]||{},r=[n(377),n(329),"info",n(337),"exception",n(327),n(357)];for(let i=0;i<r[n(366)];i++){const t=fe.constructor[n(384)].bind(fe),o=r[i],a=e[o]||t;t[n(371)]=fe[n(382)](fe),t[n(340)]=a[n(340)][n(382)](a),e[o]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(373)]=!1,this[c(333)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(383)]=this[c(333)][c(346)](),this.convolutionMaterial=new ie,this.convolutionMaterial[c(325)](1/t,1/e),this.convolutionMaterial[c(349)](new D(t,e)),this[c(356)]=new u,this[c(367)]=new F,this[c(361)][c(332)][c(342)][c(324)]=r,this.convolutionMaterial[c(332)].maxDepthThreshold[c(324)]=o,this[c(361)][c(332)][c(376)][c(324)]=i,this[c(361)][c(332)][c(345)][c(324)]=a,this[c(361)][c(363)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(350)](c(353),new k(s,3)),p[c(350)]("uv",new k(f,2)),this.screen=new l(p,this[c(361)]),this[c(336)].frustumCulled=!1,this[c(356)][c(365)](this[c(336)])}[se(343)](n,t,e){const r=se,o=this.scene,i=this.camera,a=this.renderTargetA,c=this.renderTargetB,s=this[r(361)],u=s[r(332)];u[r(331)].value=t[r(358)];const l=s[r(322)];let f,p,d,h=t;for(p=0,d=l[r(366)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(322)][r(324)]=l[p],u[r(362)].value=h.texture,n.setRenderTarget(f),n[r(343)](o,i),h=f;u.kernel[r(324)]=l[p],u[r(362)][r(324)]=h[r(326)],n[r(385)](this[r(373)]?null:e),n[r(343)](o,i)}}function he(n){function t(n){const e=pe;if(typeof n===e(352))return function(n){}[e(354)](e(364))[e(360)]("counter");1!==(""+n/n)[e(366)]||n%20==0?function(){return!0}[e(354)]("debugger")[e(351)](e(347)):function(){return!1}[e(354)](e(355)+e(341)).apply(e(348)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=xe;function me(){var n=["toString","__proto__","tDiffuseBlur","warn","setValues","fragmentShader","_minDepthThreshold","minDepthThreshold","20WUvXao","#include <emissivemap_fragment>","_distortion","test","170255tJxiGT","tDepth","value","bind","_textureMatrix","textureMatrix","depthScale","exception","debu","_hasBlur","constructor","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","#include <project_vertex>","chain","error","_distortionMap","replace","onBeforeCompile","mixBlur","4723720pWQqAf","497WTUoRO","input","function *\\( *\\)","log","mixContrast","return (function() ","call","string","distortion","10629VXWmwb","uniforms","info","USE_UV","4JBQKCr","_tDiffuse","mirror","maxDepthThreshold","_mixBlur","59244NIwIjL","gger","distortionMap","counter","93uGvnVU","_blurStrength","58202xYczPg","prototype","_depthScale","_mirror","24219569ztPelS","mixStrength","_depthToBlurRatioBias","action","hasBlur","_tDiffuseBlur","_tDepth","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","tDiffuse","_maxDepthThreshold","trace","table","1661363fhBzND","_mixContrast","defines","apply","vertexShader"];return(me=function(){return n})()}!function(n,t){for(var e=xe,r=me();;)try{if(898115===-parseInt(e(524))/1+parseInt(e(508))/2*(-parseInt(e(506))/3)+parseInt(e(497))/4*(-parseInt(e(541))/5)+parseInt(e(502))/6*(parseInt(e(561))/7)+parseInt(e(560))/8+-parseInt(e(493))/9*(-parseInt(e(537))/10)+parseInt(e(512))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(527)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=xe,t=new RegExp(n(486)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=be("init");t[n(540)](r+n(554))&&e[n(540)](r+n(485))?be():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){var n,t=xe;try{n=Function(t(489)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n.console||{},r=[t(487),t(532),t(495),t(555),t(548),t(523),t(522)],o=0;o<r.length;o++){var i=_e[t(551)][t(509)][t(544)](_e),a=r[o],c=e[a]||i;i[t(530)]=_e[t(544)](_e),i[t(529)]=c[t(529)][t(544)](c),e[a]=i}}))();class ye extends U{constructor(n={}){var t=xe;super(n),this[t(518)]={value:null},this._distortionMap={value:null},this[t(498)]={value:null},this[t(517)]={value:null},this._textureMatrix={value:null},this[t(550)]={value:!1},this[t(511)]={value:0},this[t(501)]={value:0},this[t(507)]={value:.5},this._minDepthThreshold={value:.9},this[t(521)]={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this[t(525)]={value:1},this[t(533)](n)}[ve(558)](n){var t,e=ve;!(null==(t=n.defines)?void 0:t[e(496)])&&(n[e(526)].USE_UV=""),n[e(494)].hasBlur=this[e(550)],n[e(494)][e(520)]=this._tDiffuse,n.uniforms[e(542)]=this[e(518)],n[e(494)][e(504)]=this[e(556)],n[e(494)][e(531)]=this[e(517)],n[e(494)][e(546)]=this._textureMatrix,n[e(494)].mirror=this._mirror,n.uniforms[e(559)]=this[e(501)],n[e(494)][e(513)]=this[e(507)],n[e(494)][e(536)]=this[e(535)],n.uniforms[e(500)]=this[e(521)],n[e(494)][e(547)]=this[e(510)],n[e(494)].depthToBlurRatioBias=this[e(514)],n[e(494)][e(492)]=this[e(539)],n.uniforms.mixContrast=this[e(525)],n[e(528)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(528)],n[e(528)]=n.vertexShader[e(557)](e(553),e(552)),n[e(534)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n.fragmentShader,n[e(534)]=n.fragmentShader.replace(e(538),e(519))}get[ve(520)](){var n=ve;return this._tDiffuse[n(543)]}set[ve(520)](n){this._tDiffuse.value=n}get[ve(542)](){var n=ve;return this[n(518)][n(543)]}set[ve(542)](n){var t=ve;this[t(518)][t(543)]=n}get[ve(504)](){var n=ve;return this[n(556)][n(543)]}set distortionMap(n){this[ve(556)].value=n}get[ve(531)](){var n=ve;return this[n(517)][n(543)]}set[ve(531)](n){this[ve(517)].value=n}get[ve(546)](){var n=ve;return this[n(545)][n(543)]}set[ve(546)](n){var t=ve;this[t(545)][t(543)]=n}get[ve(516)](){var n=ve;return this[n(550)][n(543)]}set hasBlur(n){var t=ve;this[t(550)][t(543)]=n}get[ve(499)](){var n=ve;return this[n(511)][n(543)]}set[ve(499)](n){var t=ve;this[t(511)][t(543)]=n}get mixBlur(){var n=ve;return this[n(501)][n(543)]}set[ve(559)](n){var t=ve;this[t(501)][t(543)]=n}get[ve(513)](){var n=ve;return this[n(507)][n(543)]}set[ve(513)](n){var t=ve;this[t(507)][t(543)]=n}get[ve(536)](){var n=ve;return this[n(535)][n(543)]}set[ve(536)](n){this._minDepthThreshold.value=n}get[ve(500)](){var n=ve;return this[n(521)][n(543)]}set[ve(500)](n){var t=ve;this[t(521)][t(543)]=n}get[ve(547)](){var n=ve;return this[n(510)][n(543)]}set depthScale(n){var t=ve;this._depthScale[t(543)]=n}get depthToBlurRatioBias(){var n=ve;return this[n(514)][n(543)]}set depthToBlurRatioBias(n){var t=ve;this[t(514)][t(543)]=n}get[ve(492)](){var n=ve;return this[n(539)][n(543)]}set[ve(492)](n){var t=ve;this[t(539)][t(543)]=n}get[ve(488)](){var n=ve;return this[n(525)][n(543)]}set[ve(488)](n){var t=ve;this[t(525)][t(543)]=n}}function xe(n,t){var e=me();return(xe=function(n,t){return e[n-=485]})(n,t)}function be(n){function t(n){var e=xe;if(typeof n===e(491))return function(n){}[e(551)]("while (true) {}")[e(527)](e(505));1!==(""+n/n).length||n%20==0?function(){return!0}[e(551)](e(549)+e(503))[e(490)](e(515)):function(){return!1}.constructor(e(549)+e(503)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Re;!function(n,t){const e=Re,r=Me();for(;;)try{if(490599===parseInt(e(222))/1+parseInt(e(164))/2+-parseInt(e(217))/3*(-parseInt(e(226))/4)+-parseInt(e(196))/5*(-parseInt(e(218))/6)+-parseInt(e(153))/7+-parseInt(e(188))/8*(-parseInt(e(229))/9)+-parseInt(e(173))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Re,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(208),"i"),r=Te(n(149));t[n(223)](r+n(214))&&e[n(223)](r+"input")?Te():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Re(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Me(){const n=["19539OvTeQD","texture-matrix","setFromMatrixPosition","depthTexture","lookAtPosition","setFromNormalAndCoplanarPoint","dispose","reflectorPlane",'{}.constructor("return this")( )',"extractRotation","debu","cameraWorldPosition","rotationMatrix","trace","setRenderTarget","view","reflect","init","matrixWorldInverse","applyMatrix4","return (function() ","4327757JXorvx","reflectorOffset","add","mix-contrast","clear","call","bind","key","distortion","autoUpdate","info","234462JDmuPb","target","while (true) {}","sign","table","console","constant","set","action","12447000DSsRkK","reflectorWorldPosition","elements","shadowMap","material","number","visible","mix-strength","exception","position","defines-USE_BLUR","clipPlane","constructor","defines-USE_DISTORTION","texture","1672OlHtzC","traverse","log","dot","uuid","gger","subVectors","assign","53085uXrhrm","projectionMatrix","counter","matrixWorld","max-depth-threshold","depth-to-blur-ratio-bias","mirror","depth-scale","enabled","virtualCamera","lookAt","far","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","normal","autoClear","length","isMesh","negate","chain","copy","defines-USE_DEPTH","6GEImAD","276FzeNnB","render","multiply","toString","799160nCXjfQ","test","t-diffuse-blur","apply","990076TuJTic","textureMatrix","value"];return(Me=function(){return n})()}we(void 0,(function(){const n=Re;let t;try{t=Function(n(152)+n(140)+");")()}catch(o){t=window}const e=t[n(169)]=t[n(169)]||{},r=[n(190),"warn",n(163),"error",n(181),n(168),n(145)];for(let i=0;i<r[n(211)];i++){const t=we.constructor.prototype[n(159)](we),o=r[i],a=e[o]||t;t.__proto__=we.bind(we),t[n(221)]=a[n(221)][n(159)](a),e[o]=t}}))();const Ee=[Ie(230),Ie(202),"t-diffuse","t-depth",Ie(224),"has-blur",Ie(180),"min-depth-threshold",Ie(200),Ie(203),Ie(201),Ie(161),"distortionMap",Ie(156),Ie(183),Ie(216),Ie(186)];function Re(n,t){const e=Me();return(Re=function(n,t){return e[n-=139]})(n,t)}const Ae=nn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=X(o),{camera:y,scene:x,renderer:w,extend:M}=W();M({MeshReflectorMaterial:ye});const E=gn(),A=gn(),T=gn(),z=gn(),P=K((()=>{const n=Re;return typeof f.value===n(178)?[f[n(228)],f[n(228)]]:f.value})),D=K((()=>P[r(228)][0]>0||P.value[1]>0)),C={reflectorPlane:new j,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new N,lookAtPosition:new R(0,0,-1),clipPlane:new L,view:new R,target:new R,q:new L,virtualCamera:new H,textureMatrix:new N};ln((()=>{var n;const o=r;null==(n=E[o(228)])||n[o(187)][o(235)]();const f={minFilter:I,magFilter:I,type:h};var y,x;E[o(228)]=new b(i[o(228)],i[o(228)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(228)],i.value,Z,G)},t(y,e(x)))),A.value=new b(i[o(228)],i[o(228)],f),T[o(228)]=new de({resolution:i.value,width:P[o(228)][0],height:P[o(228)][1],minDepthThreshold:a[o(228)],maxDepthThreshold:s.value,depthScale:u[o(228)],depthToBlurRatioBias:l[o(228)]}),z[o(228)]={mirror:p,textureMatrix:C[o(227)],mixBlur:d,tDiffuse:E[o(228)][o(187)],tDepth:E[o(228)].depthTexture,tDiffuseBlur:E[o(228)][o(187)],hasBlur:D,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(228)],mixContrast:_,"defines-USE_BLUR":D.value?"":void 0,"defines-USE_DEPTH":u[o(228)]>0?"":void 0,"defines-USE_DISTORTION":g[o(228)]?"":void 0}}));const O=gn(),{onLoop:F}=$();F((()=>{var n;const t=r;if(!(O[t(228)]&&w[t(228)]&&E[t(228)]&&y[t(228)]))return;const e=function(n,t){const e=Re;let r;return n[e(189)]((n=>{const o=e;n[o(212)]&&n[o(177)]&&n.material[o(192)]===t&&(r=n)})),r}(x[t(228)],O[t(228)][t(192)]);if(!e)return;e.visible=!1;const i=w[t(228)].xr.enabled,a=w[t(228)][t(176)][t(162)];(function(n){var t,e;const r=Re;if(C.reflectorWorldPosition[r(231)](n[r(199)]),C[r(143)].setFromMatrixPosition(null==(t=y[r(228)])?void 0:t[r(199)]),C[r(144)][r(141)](n.matrixWorld),C[r(209)][r(171)](0,0,1),C[r(209)][r(151)](C.rotationMatrix),C[r(174)].addScaledVector(C[r(209)],o[r(154)]),C[r(147)].subVectors(C[r(174)],C.cameraWorldPosition),C.view[r(191)](C[r(209)])>0)return;C[r(147)].reflect(C[r(209)])[r(213)](),C[r(147)][r(155)](C.reflectorWorldPosition),C[r(144)][r(141)](null==(e=y[r(228)])?void 0:e[r(199)]),C[r(233)][r(171)](0,0,-1),C[r(233)][r(151)](C[r(144)]),C[r(233)][r(155)](C[r(143)]),C.target[r(194)](C[r(174)],C[r(233)]),C[r(165)][r(148)](C.normal).negate(),C.target[r(155)](C[r(174)]),C[r(205)][r(182)].copy(C[r(147)]),C.virtualCamera.up.set(0,1,0),C.virtualCamera.up[r(151)](C.rotationMatrix),C[r(205)].up[r(148)](C[r(209)]),C.virtualCamera[r(206)](C[r(165)]),C[r(205)].far=(null==y?void 0:y[r(228)])[r(207)],C[r(205)].updateMatrixWorld(),C[r(205)][r(197)][r(215)]((null==y?void 0:y[r(228)])[r(197)]),C[r(227)][r(171)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[r(227)][r(220)](C[r(205)][r(197)]),C[r(227)].multiply(C[r(205)][r(150)]),C[r(227)][r(220)](n[r(199)]),C[r(139)][r(234)](C.normal,C.reflectorWorldPosition),C[r(139)][r(151)](C.virtualCamera[r(150)]),C.clipPlane[r(171)](C[r(139)][r(209)].x,C.reflectorPlane[r(209)].y,C.reflectorPlane.normal.z,C.reflectorPlane[r(170)]);const i=C[r(205)].projectionMatrix;C.q.x=(Math[r(167)](C.clipPlane.x)+i[r(175)][8])/i[r(175)][0],C.q.y=(Math[r(167)](C[r(184)].y)+i.elements[9])/i[r(175)][5],C.q.z=-1,C.q.w=(1+i.elements[10])/i[r(175)][14],C.clipPlane.multiplyScalar(2/C[r(184)][r(191)](C.q)),i[r(175)][2]=C[r(184)].x,i[r(175)][6]=C[r(184)].y,i[r(175)][10]=C[r(184)].z+1,i[r(175)][14]=C[r(184)].w})(e),w[t(228)][t(176)][t(162)]=!1,w[t(228)][t(146)](E[t(228)]),w.value[t(210)]||w.value[t(157)](),w[t(228)].render(x[t(228)],C[t(205)]),null==(n=null==T?void 0:T[t(228)])||n[t(219)](w[t(228)],E[t(228)],A.value),w.value.xr[t(204)]=i,w[t(228)][t(176)][t(162)]=a,e[t(179)]=!0,w[t(228)][t(146)](null)}));const B=xn(),k=K((()=>{const n=r,t={};return Object[n(195)](t,o),Object.assign(t,B[n(228)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==E?void 0:E.value)||n[e(235)](),null==(t=null==A?void 0:A[e(228)])||t[e(235)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an("TresMeshReflectorMaterial",bn({key:c(160)+z[c(228)][c(183)]+z.value["defines-USE_DEPTH"]+z[c(228)][c(186)],ref_key:"materialRef",ref:O},k[c(228)],{"texture-matrix":C[c(227)],mirror:Q(p),"t-diffuse":null==(e=E[c(228)])?void 0:e[c(187)],"t-depth":null==(o=E[c(228)])?void 0:o[c(232)],"t-diffuse-blur":null==(i=A[c(228)])?void 0:i[c(187)],"has-blur":D[c(228)],"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":D[c(228)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Ee)}}});function Te(n){function t(n){const e=Re;if("string"==typeof n)return function(n){}[e(185)](e(166))[e(225)](e(198));1!==(""+n/n)[e(211)]||n%20==0?function(){return!0}.constructor(e(142)+e(193))[e(158)](e(172)):function(){return!1}.constructor(e(142)+e(193))[e(225)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ze(){const n=['{}.constructor("return this")( )',"console","warn","trace","info","return (function() ","while (true) {}","apply","test","constructor","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","__proto__","type","2863944GZfdHw","value","log","17604719ajllAy","fog","call","texture","CubeCamera","65019NvzbEk","action","7cxkTUb","prototype","counter","error","10nNEjaD","background","length","bind","7245464UZihhc","function *\\( *\\)","chain","gger","71625JHDsPL","270sdtsHj","exception","161izzUet","5108740WjYkpM","dispose","11090PhBDkb"];return(ze=function(){return n})()}!function(n,t){const e=Ce,r=ze();for(;;)try{if(658388===parseInt(e(503))/1*(parseInt(e(506))/2)+parseInt(e(486))/3+-parseInt(e(504))/4+parseInt(e(500))/5*(parseInt(e(501))/6)+-parseInt(e(488))/7*(parseInt(e(496))/8)+-parseInt(e(478))/9+parseInt(e(492))/10*(parseInt(e(481))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=Ce,t=new RegExp(n(497)),e=new RegExp(n(474),"i"),r=Oe("init");t[n(471)](r+n(498))&&e[n(471)](r+n(475))?Oe():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(470)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n,t){const e=ze();return(Ce=function(n,t){return e[n-=464]})(n,t)}function Oe(n){function t(n){const e=Ce;if("string"==typeof n)return function(n){}.constructor(e(469))[e(470)](e(490));1!==(""+n/n)[e(494)]||n%20==0?function(){return!0}.constructor("debu"+e(499))[e(483)](e(487)):function(){return!1}[e(472)]("debu"+e(499))[e(470)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Ce;let t;try{t=Function(n(468)+n(507)+");")()}catch(o){t=window}const e=t[n(464)]=t[n(464)]||{},r=[n(480),n(465),n(467),n(491),n(502),"table",n(466)];for(let i=0;i<r[n(494)];i++){const t=De[n(472)][n(489)][n(495)](De),o=r[i],a=e[o]||t;t[n(476)]=De[n(495)](De),t[n(473)]=a[n(473)][n(495)](a),e[o]=t}}))();const Fe=Ne;!function(n,t){const e=Ne,r=ke();for(;;)try{if(991602===-parseInt(e(183))/1+-parseInt(e(197))/2*(-parseInt(e(214))/3)+parseInt(e(202))/4*(-parseInt(e(177))/5)+-parseInt(e(225))/6*(parseInt(e(189))/7)+parseInt(e(184))/8+parseInt(e(194))/9*(parseInt(e(212))/10)+-parseInt(e(195))/11*(-parseInt(e(211))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(200)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(){const n=["while (true) {}","debu","value","action","warn","length","prototype","gger","2082WshtBX","near","95vvLekW","table","index","visible","texture","TresGroup","252298gOgYHE","12088696baZTls","bind","default","frames",'{}.constructor("return this")( )',"17325ZmIlDb","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","rgRef","primitive","9ONdXEt","4015KuDJiD","string","2BnJXLz","error","stateObject","apply","trace","78532maGgqc","exception","toString","init","console","object","log","fog","far","10668OsNmgV","4531190yZnFoP","constructor","561183gBGmFU","input","$slots"];return(ke=function(){return n})()}!function(){Be(this,(function(){const n=Ne,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(190),"i"),r=He(n(205));t.test(r+"chain")&&e.test(r+n(215))?He():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(200)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ue(void 0,(function(){const n=Ne;let t;try{t=Function("return (function() "+n(188)+");")()}catch(o){t=window}const e=t[n(206)]=t.console||{},r=[n(208),n(221),n(191),n(198),n(203),n(178),n(201)];for(let i=0;i<r.length;i++){const t=Ue[n(213)][n(223)][n(185)](Ue),o=r[i],a=e[o]||t;t.__proto__=Ue.bind(Ue),t[n(204)]=a[n(204)].bind(a),e[o]=t}}))();const je=[Fe(207)];function Ne(n,t){const e=ke();return(Ne=function(n,t){return e[n-=177]})(n,t)}const Le=nn({__name:Fe(179),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return J((()=>s),(n=>{var t;const e=Ce;null==(t=c[e(479)])||t[e(505)](),c[e(479)]=new v(n[e(479)]),c[e(479)][e(484)][e(477)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f[r(479)]=new(T[r(485)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;null==(n=c[Ce(479)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a[t(479)][t(482)],d=a[t(479)].background,a[t(479)].background=r||d,a.value.fog=o||p,null==(n=f[t(479)])||n.update(i[t(479)],a[t(479)]),a[t(479)].fog=p,a[t(479)][t(493)]=d}}}({resolution:o.resolution,near:o[r(226)],far:o[r(210)],envMap:o.envMap,fog:o[r(209)]}),{onBeforeLoop:s}=$();let u=0;const l=q(null);return s((()=>{const n=r;l.value&&(o[n(187)]===1/0||u<o[n(187)])&&(l[n(219)][n(180)]=!1,c(),l[n(219)][n(180)]=!0,u++)})),t({texture:null==(e=i[r(219)])?void 0:e[r(181)]}),(n,t)=>{const e=r;return on(),an("TresGroup",null,[dn(e(193),{object:Q(a)},null,8,je),dn(e(182),{ref_key:e(192),ref:l},[cn(n[e(216)],e(186))],512)])}}});function He(n){function t(n){const e=Ne;if(typeof n===e(196))return function(n){}[e(213)](e(217))[e(200)]("counter");1!==(""+n/n)[e(222)]||n%20==0?function(){return!0}[e(213)](e(218)+e(224)).call(e(220)):function(){return!1}[e(213)]("debu"+e(224))[e(200)](e(199)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=We();return(Ze=function(n,t){return e[n-=338]})(n,t)}!function(n,t){const e=Ze,r=We();for(;;)try{if(410288===parseInt(e(384))/1*(-parseInt(e(367))/2)+parseInt(e(378))/3+parseInt(e(381))/4+-parseInt(e(351))/5+parseInt(e(379))/6+parseInt(e(350))/7*(parseInt(e(339))/8)+parseInt(e(348))/9*(-parseInt(e(359))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(){const n=["20YXJbsM","assign","apply","while (true) {}","counter","exception","ShaderMaterial","return (function() ","46Bykbyz","MathUtils","value",'{}.constructor("return this")( )',"stateObject","clone","gger","chain","table","function *\\( *\\)","debu","1960854uCcLJe","2334060oOWecI","trace","1640916QgYMSC","error","call","26227SlQotu","warn","entries","152CZFfEY","console","length","log","info","bind","__proto__","key","init","3100383XMAKCZ","reduce","248794GSDgmL","2128360OdRlXN","string","constructor","test","generateUUID","toString","defineProperty","UniformsUtils"];return(We=function(){return n})()}!function(){Ge(this,(function(){const n=Ze,t=new RegExp(n(376)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ye(n(347));t[n(354)](r+n(374))&&e.test(r+"input")?Ye():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t,e,r){const o=Ze,i=class extends T[o(365)]{constructor(i={}){const a=o,s=Object[a(338)](n);super({uniforms:s[a(349)](((n,[t,e])=>{const r=a,o=T[r(358)][r(372)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(346)]="",s.forEach((([n])=>Object[a(357)](this,n,{get:()=>this.uniforms[n][a(369)],set:t=>this.uniforms[n][a(369)]=t}))),Object[a(360)](this,i),r&&r(this)}};return i[o(346)]=T[o(368)][o(355)](),i}function Ye(n){function t(n){const e=Ze;if(typeof n===e(352))return function(n){}[e(353)](e(362)).apply(e(363));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(377)+e(373))[e(383)]("action"):function(){return!1}[e(353)](e(377)+e(373))[e(361)](e(371)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=Ze;let t;try{t=Function(n(366)+n(370)+");")()}catch(o){t=window}const e=t[n(340)]=t[n(340)]||{},r=[n(342),n(385),n(343),n(382),n(364),n(375),n(380)];for(let i=0;i<r[n(341)];i++){const t=Ve[n(353)].prototype[n(344)](Ve),o=r[i],a=e[o]||t;t[n(345)]=Ve.bind(Ve),t[n(356)]=a.toString[n(344)](a),e[o]=t}}))();var Xe=ar;!function(n,t){for(var e=ar,r=er();;)try{if(662730===parseInt(e(383))/1+parseInt(e(332))/2*(parseInt(e(337))/3)+-parseInt(e(359))/4*(parseInt(e(267))/5)+parseInt(e(315))/6*(-parseInt(e(395))/7)+-parseInt(e(330))/8*(-parseInt(e(417))/9)+parseInt(e(414))/10+-parseInt(e(308))/11*(parseInt(e(297))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ar(280)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=ar,t=new RegExp(n(260)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pr("init");t[n(405)](r+n(312))&&e[n(405)](r+n(427))?Pr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=function(n,t){var e=ar;if(typeof n!==e(390)||null===n)return n;var r=n[Symbol[e(348)]];if(void 0!==r){var o=r.call(n,t||e(380));if(typeof o!==e(390))return o;throw new TypeError(e(288))}return(t===e(346)?String:Number)(n)}(n,ar(346));return"symbol"==typeof t?t:String(t)}function Qe(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=ar,r=Object[e(244)](n);if(Object[e(256)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(243)]((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r[e(364)].apply(r,o)}return r}function tr(n){for(var t=ar,e=1;e<arguments[t(415)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(t){Qe(n,t,r[t])})):Object[t(341)]?Object[t(250)](n,Object[t(341)](r)):nr(Object(r))[t(420)]((function(e){Object[t(239)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function er(){var n=["indexOf","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","MeshPhongMaterial","\n    gl_FragColor = ","716gOsagv","Cannot call a class as a function","lastIndexOf","return","cacheKey","push","MeshMatcapMaterial","customProgramCacheKey","CSM: ","csm_Normal","needsUpdate","fragColor","isAlreadyExtended","while (true) {}","type","counter","key","generateUUID","emissive","roughness","valueOf","default","_getCacheHash","ShaderMaterial","36911OWalaf","replace","set","this hasn't been initialised - super() hasn't been called","MeshBasicMaterial","__csm","patchMap","object","console","\n    \n            ","csm_ClearcoatRoughness","_getPatchMapForMaterial","39557nWplEU","clearcoatRoughness","Material","csm_Position",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","ShaderChunk","function","baseMaterial","csm_PositionRaw","getPrototypeOf","test","MeshPhysicalMaterial","bump","material.clearcoat = ","csm_DepthAlpha","diffuse","csm_ClearcoatNormal","return (function() ","log","12913590pzObVn","length","trace","1125BsDWjI","clone","uniforms","forEach","#define IS_VERTEX;\n","position","cacheHash","csm_FragColor"," is not available in ","positionRaw","input","enumerable","#define IS_UNKNOWN;\n","\n    gl_Position = ","entries","metalness","join","normal","defineProperty","next","setPrototypeOf","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","filter","keys","MeshDepthMaterial","// #_CSM_#",";\n  ","done","iterator","defineProperties","action","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","MeshToonMaterial","writable","bind","getOwnPropertySymbols","\n    vec3 transformed = ",";\n    ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","function *\\( *\\)","void main()","csm_Roughness","Derived constructors may only return object or undefined","split","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\n    vec4 csm_internal_positionUnprojected = ","13465khdtsY","csm_Clearcoat","propertyIsEnumerable","error",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","includes","stateObject","MeshLambertMaterial","update","trim","csm_main_","construct","prototype","apply","from","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","MeshNormalMaterial","fragmentShader","concat","Set","toUpperCase","@@toPrimitive must return a primitive value.","__proto__","lights_physical_fragment","\\$&","depthAlpha","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","gger","\n    #include <dithering_fragment>\n    gl_FragColor  = ","toString","11796Jtshiw","constructor","undefined","instanceID","sham","assign","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","ShadowMaterial","isArray","();\n            // #_CSM_#\n          ","substring","22286ZKzHjt","\n    #include <color_fragment>\n    diffuseColor = ","\n    \n","csm_AO","chain","csm_Emissive","table","234XfMCzm","Arguments","_generateMaterial","silent","name","\n    varying mat4 csm_internal_vModelViewMatrix;\n","_patchShader","material.clearcoatRoughness = ",'CSM: Property "',"value",'". Shader cannot compile.',"#define IS_","call","vertexShader",", 1.0 );\n  ","60944pNqShY","exception","2ufCHLJ","message","void ","csm_DiffuseColor","find","3228612tBrdgB","csm_PointSize",'{}.constructor("return this")( )',"clearcoatNormal","getOwnPropertyDescriptors"," );\n    ","\n            ","onBeforeCompile","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","string","clearcoat","toPrimitive","MeshStandardMaterial","MathUtils","pointSize","RawShaderMaterial","void main() {"];return(er=function(){return n})()}function rr(n,t){var e=ar;if(null==n)return{};var r,o,i=function(n,t){var e=ar;if(null==n)return{};var r,o,i={},a=Object[e(244)](n);for(o=0;o<a[e(415)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(256)]){var a=Object[e(256)](n);for(o=0;o<a[e(415)];o++)r=a[o],t[e(354)](r)>=0||Object[e(279)][e(269)][e(327)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=ar;(null==t||t>n.length)&&(t=n[e(415)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array[ar(305)](n))return n}(n)||function(n,t){var e=ar,r=null==n?null:e(299)!=typeof Symbol&&n[Symbol[e(249)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(327)](n))[e(240)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(327)](r))[e(248)])&&(s[e(364)](o[e(324)]),s[e(415)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(362)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ar;if(n){if(typeof n===e(346))return or(n,t);var r=Object[e(279)][e(296)][e(327)](n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n[e(298)][e(319)]),"Map"===r||r===e(286)?Array[e(281)](n):r===e(316)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(n,t){var e=er();return(ar=function(n,t){return e[n-=234]})(n,t)}function cr(n,t){for(var e=ar,r=0;r<t[e(415)];r++){var o=t[r];o[e(428)]=o[e(428)]||!1,o.configurable=!0,e(324)in o&&(o[e(254)]=!0),Object.defineProperty(n,Je(o[e(375)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(ar(386));return n}function ur(n,t){var e=ar;return(ur=Object[e(241)]?Object[e(241)][e(255)]():function(n,t){return n[e(289)]=t,n})(n,t)}function lr(n){var t=ar;return(lr=Object.setPrototypeOf?Object[t(404)][t(255)]():function(n){return n[t(289)]||Object.getPrototypeOf(n)})(n)}function fr(n){var t=function(){var n=ar;if(typeof Reflect===n(299)||!Reflect[n(278)])return!1;if(Reflect[n(278)][n(301)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype[n(379)][n(327)](Reflect[n(278)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ar,o=lr(n);if(t){var i=lr(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o[r(280)](this,arguments);return function(n,t){var e=ar;if(t&&(typeof t===e(390)||typeof t===e(401)))return t;if(void 0!==t)throw new TypeError(e(263));return sr(n)}(this,e)}}Ke(void 0,(function(){for(var n=ar,t=function(){var n,t=ar;try{n=Function(t(412)+t(339)+");")()}catch(e){n=window}return n}(),e=t[n(391)]=t.console||{},r=[n(413),"warn","info",n(270),n(331),n(314),n(416)],o=0;o<r[n(415)];o++){var i=Ke.constructor[n(279)][n(255)](Ke),a=r[o],c=e[a]||i;i[n(289)]=Ke.bind(Ke),i[n(296)]=c[n(296)][n(255)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Xe(335),normal:Xe(368),roughness:Xe(262),metalness:"csm_Metalness",emissive:Xe(313),ao:Xe(311),bump:"csm_Bump",clearcoat:Xe(268),clearcoatRoughness:Xe(393),clearcoatNormal:Xe(411),pointSize:Xe(338),fragColor:Xe(424),depthAlpha:Xe(409),position:Xe(398),positionRaw:Xe(403)},mr=(Qe(pr={},"".concat(vr[Xe(422)]),"*"),Qe(pr,""[Xe(285)](vr[Xe(426)]),"*"),Qe(pr,"".concat(vr[Xe(238)]),"*"),Qe(pr,"".concat(vr[Xe(351)]),["PointsMaterial"]),Qe(pr,""[Xe(285)](vr[Xe(410)]),"*"),Qe(pr,""[Xe(285)](vr[Xe(370)]),"*"),Qe(pr,""[Xe(285)](vr.emissive),[Xe(349),Xe(406)]),Qe(pr,""[Xe(285)](vr[Xe(378)]),[Xe(349),"MeshPhysicalMaterial"]),Qe(pr,"".concat(vr[Xe(236)]),[Xe(349),Xe(406)]),Qe(pr,""[Xe(285)](vr.ao),[Xe(349),Xe(406),Xe(387),Xe(274),Xe(357),"MeshToonMaterial"]),Qe(pr,""[Xe(285)](vr.bump),[Xe(274),Xe(365),Xe(283),"MeshPhongMaterial",Xe(406),Xe(349),Xe(253),Xe(304)]),Qe(pr,""[Xe(285)](vr[Xe(292)]),[Xe(245)]),Qe(pr,""[Xe(285)](vr.clearcoat),[Xe(406)]),Qe(pr,""[Xe(285)](vr[Xe(396)]),[Xe(406)]),Qe(pr,""[Xe(285)](vr[Xe(340)]),[Xe(406)]),pr),gr={"#include <lights_physical_fragment>":T[Xe(400)][Xe(290)]},_r=(Qe(dr={},""[Xe(285)](vr[Xe(238)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[Xe(285)](vr[Xe(238)],Xe(271))}),Qe(dr,"".concat(vr[Xe(422)]),{"#include <begin_vertex>":Xe(257)[Xe(285)](vr[Xe(422)],";\n  ")}),Qe(dr,"".concat(vr[Xe(426)]),{"#include <begin_vertex>":Xe(266)[Xe(285)](vr.positionRaw,Xe(399))}),Qe(dr,""[Xe(285)](vr[Xe(351)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Xe(285)](vr.pointSize,Xe(258))}),Qe(dr,"".concat(vr.diffuse),{"#include <color_fragment>":Xe(309).concat(vr[Xe(410)],Xe(247))}),Qe(dr,""[Xe(285)](vr.fragColor),{"#include <dithering_fragment>":Xe(295)[Xe(285)](vr[Xe(370)],Xe(247))}),Qe(dr,""[Xe(285)](vr[Xe(377)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Xe(285)](vr.emissive,Xe(258))}),Qe(dr,""[Xe(285)](vr[Xe(378)]),{"#include <roughnessmap_fragment>":Xe(259).concat(vr.roughness,";\n    ")}),Qe(dr,"".concat(vr[Xe(236)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Xe(285)](vr[Xe(236)],Xe(258))}),Qe(dr,""[Xe(285)](vr.ao),{"#include <aomap_fragment>":Xe(252)[Xe(285)](vr.ao,Xe(258))}),Qe(dr,"".concat(vr[Xe(407)]),{"#include <normal_fragment_maps>":Xe(282)[Xe(285)](vr[Xe(407)]," - (dot(")[Xe(285)](vr[Xe(407)],Xe(356))}),Qe(dr,"".concat(vr[Xe(292)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(265)[Xe(285)](vr[Xe(292)],Xe(342)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Xe(293)[Xe(285)](vr.depthAlpha,";\n    ")}),Qe(dr,"".concat(vr[Xe(347)]),{"material.clearcoat = clearcoat;":Xe(408).concat(vr[Xe(347)],";")}),Qe(dr,""[Xe(285)](vr[Xe(396)]),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(322)[Xe(285)](vr[Xe(396)],";")}),Qe(dr,""[Xe(285)](vr[Xe(340)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),dr),yr=(Qe(hr={},""[Xe(285)](vr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Xe(285)](vr[Xe(422)],Xe(329))}),Qe(hr,""[Xe(285)](vr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(234)[Xe(285)](vr[Xe(422)],Xe(247))}),Qe(hr,""[Xe(285)](vr[Xe(410)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(358)[Xe(285)](vr[Xe(410)],Xe(247))}),Qe(hr,""[Xe(285)](vr[Xe(370)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(358)[Xe(285)](vr[Xe(370)],";\n  ")}),hr),xr={clearcoat:[vr[Xe(347)],vr[Xe(340)],vr[Xe(396)]]},br=Xe(320),Ir=Xe(355),Sr=Xe(320),wr=Xe(310),Mr=[Xe(402),Xe(284),"vertexShader","uniforms","patchMap","cacheKey",Xe(318)],Er=function(n,t,e){var r=Xe;return n[r(264)](t)[r(237)](e)},Rr=function(n,t){var e,r,o=Xe;return new RegExp("\\b"[o(285)]((e=t,r=Xe,e[r(384)](/[-\/\\^$*+?.()|[\]{}]/g,r(291))),"\\b"))[o(405)](n)};function Ar(n){return n?n[Xe(384)](/\s/g,""):void 0}function Tr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Xe;!function(n,t){var e=ar;if(typeof t!==e(401)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(279)]=Object.create(t&&t[e(279)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(239)](n,e(279),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=ar,u=n.baseMaterial,l=n[s(284)],f=n[s(328)],p=n[s(419)],d=n.patchMap,h=n[s(363)],v=n[s(318)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ar(360))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(333)][t(354)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(302)](e,m)):e=new u(m),e[s(373)]===s(352))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Xe;Object[e(302)](n,t);var r=Object[e(404)](t);Object.entries(Object[e(341)](r))[e(243)]((function(n){var t=e,r=typeof n[1].get===t(401),o=typeof n[1][t(385)]===t(401),i=typeof n[1].value===t(401),a="constructor"===n[0];return(r||o||i)&&!a}))[e(420)]((function(t){var r=e;typeof n[t[0]]!==r(401)&&Object[r(239)](n,t[0],t[1])}))})(sr(t=a[s(327)](this)),e),t[s(388)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(350)][s(376)](),type:e[s(373)],isAlreadyExtended:(r=e[s(344)],o=Xe,i=r.toString().trim(),!(0===i.substring(i.indexOf("{")+1,i[o(361)]("}"))[o(276)]()[o(415)])),cacheHash:"",silent:v},t[s(419)]=tr(tr({},t[s(419)]||{}),p||{});var g=t[s(388)],_=g[s(284)],y=g[s(328)],x=t[s(419)];return t[s(388)][s(423)]=t[s(381)](),t[s(317)](_,y,x),t}return e=c,r=[{key:t(275),value:function(){var n=t,e=arguments[n(415)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(419)]=e.uniforms||this[n(419)],Object[n(302)](this[n(388)],e);var r=this.__csm,o=r[n(284)],i=r[n(328)],a=this[n(419)],c=this[n(381)]();this.__csm.cacheHash=c,this[n(317)](o,i,a)}},{key:t(418),value:function(){var n=t,e={baseMaterial:this[n(388)][n(402)],fragmentShader:this[n(388)][n(284)],vertexShader:this[n(388)].vertexShader,uniforms:this[n(419)],silent:this[n(388)][n(318)],patchMap:this[n(388)][n(389)],cacheKey:this[n(388)][n(363)]},r=new this.constructor(e);return Object[n(302)](this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(388)],r=e[n(284)],o=e[n(328)],i=this[n(419)],a=[Ar(r),Ar(o),i][n(243)]((function(n){return void 0!==n}));return a[n(415)]>0?Mn(a,{excludeValues:!0}):this[n(366)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(419)]=r||{},this[o(366)]=function(){return i.__csm.cacheHash};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(321)](Tr(n),t[r(284)],!0);t.fragmentShader=a+c}if(e){var s=i._patchShader(Tr(e),t[r(328)]);t[r(328)]=r(421)+s,t[r(328)]=a+t[r(328)]}t[r(419)]=tr(tr({},t[r(419)]),i[r(419)]),i.uniforms=t[r(419)]}catch(u){console[r(270)](u)}};if(this.__csm[o(371)]){var c=this[o(344)];this[o(344)]=function(n,t){c(n,t),a(n)}}else this[o(344)]=a;this[o(369)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(394)]()),this[o(388)][o(389)]);Object[o(235)](xr)[o(420)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(336)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error(e(323)[e(285)](a,'" is required to use output "')[e(285)](c,e(325)))})),Object[o(235)](gr)[o(420)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(244)](c)[o(420)]((function(t){var e=o;Object[e(244)](c[t]).forEach((function(r){var o=e,s=mr[t],u=i[o(388)][o(373)];if("*"===t||Rr(n,t)){if(!(!s||Array[o(305)](s)&&s[o(272)](u)||"*"===s))throw new Error(o(367)[o(285)](t,o(425))[o(285)](u,". Shader cannot compile."));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(277)+this.__csm[o(300)][o(384)](/-/g,"_"),h=n[o(384)](/void\s+main\s*\(\s*\)/g,o(334)[o(285)](d,"()")),v=n[o(272)](o(261)),m=a.includes(o(246));return v&&(m&&this[o(388)][o(371)]?(a=a[o(384)](o(353),o(343)[o(285)](h,"\n            \n            void main() {\n          ")),s=a,u="// #_CSM_#",l=o(343)[o(285)](d,o(306)),p=s[(f=Xe)(361)](u),a=-1===p?s:s[f(307)](0,p)+l+s[f(307)](p+u[f(415)])):a=a[o(384)](o(353),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?Sr:br,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ").concat("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(392)).concat(h,o(303))[o(285)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(242))[o(285)](r?wr:Ir,o(345))[o(285)](d,"();\n              // #_CSM_#\n          "))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(388)].type;return e?n(326)[n(285)](e[n(287)](),";\n"):n(429)}},{key:t(394),value:function(){var n=t;return this[n(388)][n(373)]===n(382)?yr:_r}}],i=ar,r&&cr(e.prototype,r),o&&cr(e,o),Object.defineProperty(e,i(279),{writable:!1}),c}(T[Xe(397)]);function Pr(n){function t(n){var e=ar;if("string"==typeof n)return function(n){}[e(298)](e(372))[e(280)](e(374));1!==(""+n/n).length||n%20==0?function(){return!0}[e(298)]("debu"+e(294))[e(327)](e(251)):function(){return!1}.constructor("debu"+e(294))[e(280)](e(273)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Dr(n,t){const e=Br();return(Dr=function(n,t){return e[n-=226]})(n,t)}const Cr=Dr;!function(n,t){const e=Dr,r=Br();for(;;)try{if(162850===parseInt(e(264))/1*(parseInt(e(256))/2)+-parseInt(e(255))/3+parseInt(e(229))/4+parseInt(e(245))/5+-parseInt(e(269))/6*(parseInt(e(248))/7)+parseInt(e(270))/8+-parseInt(e(247))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dr(266)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Or(this,(function(){const n=Dr,t=new RegExp(n(258)),e=new RegExp(n(243),"i"),r=jr("init");t.test(r+"chain")&&e[n(237)](r+n(253))?jr():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dr(266)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(){const n=["debu","clearcoat","log","call","#ff00fc","1CNYYQE","metalness","apply","MeshPhysicalMaterial","stateObject","492NRWlIW","2557576jdzFPo","\n\t\t\t","string","toString","error","850964ILpmMU","return (function() ","while (true) {}","console","object","table","bind","constructor","test","trace","length","color","primitive","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","465630HlEZkc","counter","3372345tRqXCc","19117VVirFw",'{}.constructor("return this")( )',"gger","\n      ","clearcoatRoughness","input","info","490980YxXDaw","599186qrOBzS","roughness","function *\\( *\\)"];return(Br=function(){return n})()}Fr(void 0,(function(){const n=Dr,t=function(){const n=Dr;let t;try{t=Function(n(230)+n(249)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(232)]||{},r=[n(261),"warn",n(254),n(228),"exception",n(234),n(238)];for(let o=0;o<r[n(239)];o++){const t=Fr[n(236)].prototype[n(235)](Fr),i=r[o],a=e[i]||t;t[n(244)]=Fr.bind(Fr),t[n(227)]=a[n(227)][n(235)](a),e[i]=t}}))();const kr=[Cr(233)],Ur=nn({__name:"index",props:{color:{default:Cr(263)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:T[t(267)],metalness:e[t(265)],roughness:e[t(257)],clearcoat:e[t(260)],clearcoatRoughness:e[t(252)],color:e[t(240)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(271)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(251)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(242)},o=new zr(r);return ln((()=>{const n=t;o[n(240)].setStyle(e[n(240)]),o[n(265)]=e.metalness,o[n(257)]=e[n(257)],o[n(260)]=e[n(260)],o[n(252)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(241),{object:Q(o)},null,8,kr)}}});function jr(n){function t(n){const e=Dr;if(typeof n===e(226))return function(n){}[e(236)](e(231))[e(266)](e(246));1!==(""+n/n)[e(239)]||n%20==0?function(){return!0}.constructor(e(259)+e(250))[e(262)]("action"):function(){return!1}[e(236)](e(259)+e(250))[e(266)](e(268)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Zr();;)try{if(222567===parseInt(e(312))/1*(-parseInt(e(307))/2)+parseInt(e(310))/3*(parseInt(e(316))/4)+parseInt(e(289))/5*(-parseInt(e(314))/6)+parseInt(e(313))/7+-parseInt(e(296))/8+parseInt(e(293))/9+parseInt(e(284))/10*(-parseInt(e(288))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nr(this,(function(){var n=Hr,t=new RegExp(n(287)),e=new RegExp(n(305),"i"),r=Gr(n(290));t.test(r+"chain")&&e[n(294)](r+n(285))?Gr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(n,t){var e=Zr();return(Hr=function(n,t){return e[n-=284]})(n,t)}function Zr(){var n=["bind","warn","20019EsiiZc","constructor","26EBXKGM","1311989UwmgJd","666558MGKgWC","log","228CIEYgg","while (true) {}","call","stateObject","521670xBhsbv","input","toString","function *\\( *\\)","33dWDgRz","20NyzzZQ","init","trace","action","3617253aYIQUO","test","debu","882872JyhEZH","info","table","error","length","apply","console","gger","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","2762gPyxiC"];return(Zr=function(){return n})()}function Gr(n){function t(n){var e=Hr;if("string"==typeof n)return function(n){}[e(311)](e(317))[e(301)](e(306));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(303))[e(318)](e(292)):function(){return!1}[e(311)](e(295)+"gger").apply(e(319)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){for(var n=Hr,t=function(){var n,t=Hr;try{n=Function(t(304)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(302)]=t[n(302)]||{},r=[n(315),n(309),n(297),n(299),"exception",n(298),n(291)],o=0;o<r[n(300)];o++){var i=Lr[n(311)].prototype[n(308)](Lr),a=r[o],c=e[a]||i;i.__proto__=Lr[n(308)](Lr),i[n(286)]=c[n(286)].bind(c),e[a]=i}}))();export{$e as C,Ur as _,Qn as a,lt as b,wt as c,Pt as d,jt as e,Jt as f,Le as g,Ae as h,mt as u};

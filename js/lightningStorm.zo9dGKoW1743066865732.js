import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.1liCzHtV1743066865732.js";import{B as i,b as s,cL as n,aj as e,a8 as r,a as o,au as a,A as h,l as c,_ as u}from"./three.qSkR4_5R1743066865732.js";import{e as l,I as p,K as d}from"./@tresjs.NxYvETXi1743066865732.js";import{a as m}from"./simplex-noise.jB2HxhHB1743066865732.js";import{d as f,a2 as g,o as y,H as b,u as S,r as v,j as x,g as w,m as I,F as _}from"./@vue.L-brCdZe1743066865732.js";import"./index.kkOCzxkp1743066865732.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.7HkSmqnc1743066865732.js";import"./three-custom-shader-material.IZIiFiAC1743066865732.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1743066865732.js";import"./postprocessing.ncQBP5me1743066865732.js";import"./@vueuse.2gpu5LGS1743066865732.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.xkDKZhLE1743066865732.js";import"./all.three.-jXJLs_M1743066865732.js";import"./oimophysics.WhCxc1Ho1743066865732.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.z5wnD9Re1743066865732.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.38fWtuB31743066865732.js";import"./index.bm35pHND1743066865732.js";import"./three-stdlib.tjOHNgPP1743066865732.js";import"./@pmndrs.fRJ1Czfy1743066865732.js";import"./object-hash.j9vF23_i1743066865732.js";import"./@amap.h2kWdZ7d1743066865732.js";import"./jszip.ZK9v5YwH1743066865732.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.wCf2mElV1743066865732.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.z5ONRhjp1743066865732.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.n019etbs1743066865732.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.0UEL-IzL1743066865732.js";const M=A;!function(t,i){const s=A,n=R();for(;;)try{if(929078===-parseInt(s(187))/1+-parseInt(s(343))/2+-parseInt(s(297))/3+-parseInt(s(203))/4+parseInt(s(344))/5+-parseInt(s(298))/6*(parseInt(s(327))/7)+parseInt(s(233))/8*(parseInt(s(193))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(283)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=A,i=new RegExp(t(221)),s=new RegExp(t(312),"i"),n=j(t(223));i[t(316)](n+t(288))&&s[t(316)](n+"input")?j():n("0")}))()}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function A(t,i){const s=R();return A=function(t,i){return s[t-=178]},A(t,i)}C(void 0,(function(){const t=A;let i;try{i=Function(t(186)+t(227)+");")()}catch(e){i=window}const s=i[t(232)]=i.console||{},n=[t(215),t(248),t(276),t(307),"exception",t(336),"trace"];for(let r=0;r<n.length;r++){const i=C[t(192)][t(271)][t(242)](C),e=n[r],o=s[e]||i;i.__proto__=C.bind(C),i[t(245)]=o[t(245)][t(242)](o),s[e]=i}}))();class F extends i{constructor(t={}){const i=A;super(),this[i(199)]=!0,this.type="LightningStrike",this.init(F[i(259)](t,t)),this[i(218)]()}static[M(216)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(302)](Math[t(306)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(252)]=(n.currentSeed+1)%i,r},getSeed:function(){return n[t(252)]/i},setSeed:function(s){const e=t;n[e(252)]=Math[e(254)](s*i)%i}};return n}static[M(259)](t={},i={}){const n=M,e=function(s){return i===t?s:s[A(257)]()};return t[n(182)]=void 0!==i[n(182)]?e(i[n(182)]):new s(0,100,0),t.destOffset=void 0!==i[n(328)]?e(i[n(328)]):new s(0,0,0),t[n(256)]=void 0!==i[n(256)]?i[n(256)]:1,t.roughness=void 0!==i.roughness?i[n(196)]:.9,t[n(278)]=void 0!==i[n(278)]?i[n(278)]:.7,t[n(269)]=void 0!==i.up0?e(i[n(269)]):new s(0,0,1),t[n(258)]=void 0!==i[n(258)]?e(i[n(258)]):new s(0,0,1),t[n(206)]=void 0!==i[n(206)]?i.radius0:1,t.radius1=void 0!==i[n(275)]?i[n(275)]:1,t[n(198)]=void 0!==i.radius0Factor?i[n(198)]:.5,t[n(205)]=void 0!==i[n(205)]?i[n(205)]:.2,t[n(309)]=void 0!==i[n(309)]?i[n(309)]:.2,t.isEternal=void 0!==i[n(280)]?i[n(280)]:void 0===i.birthTime||void 0===i.deathTime,t[n(342)]=i[n(342)],t[n(286)]=i.deathTime,t[n(209)]=void 0!==i.propagationTimeFactor?i[n(209)]:.1,t.vanishingTimeFactor=void 0!==i[n(318)]?i[n(318)]:.9,t[n(345)]=void 0!==i[n(345)]?i[n(345)]:4,t[n(202)]=void 0!==i[n(202)]?i.subrayDutyCycle:.6,t[n(301)]=void 0!==i.maxIterations?i[n(301)]:9,t[n(210)]=void 0!==i[n(210)]&&i[n(210)],t[n(230)]=void 0!==i[n(230)]?i[n(230)]:5,t[n(194)]=void 0!==i[n(194)]?i.maxSubrayRecursion:3,t[n(263)]=void 0!==i[n(263)]?i[n(263)]:.6,t[n(237)]=void 0!==i.generateUVs&&i[n(237)],t.randomGenerator=i[n(212)],t[n(222)]=i[n(222)],t.onDecideSubrayCreation=i.onDecideSubrayCreation,t[n(243)]=i[n(243)],t}update(t){const i=M;this.isStatic||(this.rayParameters[i(280)]||this[i(273)][i(342)]<=t&&t<=this[i(273)][i(286)]?(this[i(228)](t),t<this[i(201)][0][i(314)]?this.state=F[i(219)]:t>this[i(201)][0][i(224)]?this[i(197)]=F[i(329)]:this[i(197)]=F[i(317)],this.visible=!0):(this[i(332)]=!1,t<this[i(273)][i(342)]?this[i(197)]=F[i(321)]:this[i(197)]=F[i(225)]))}[M(223)](t){const i=M;this[i(273)]=t,this[i(301)]=void 0!==t[i(301)]?Math[i(254)](t[i(301)]):9,t[i(301)]=this.maxIterations,this[i(210)]=void 0!==t[i(210)]&&t[i(210)],t[i(210)]=this[i(210)],this[i(230)]=void 0!==t[i(230)]?Math[i(254)](t.ramification):5,t[i(230)]=this[i(230)],this[i(194)]=void 0!==t.maxSubrayRecursion?Math[i(254)](t[i(194)]):3,t[i(194)]=this.maxSubrayRecursion,this[i(263)]=void 0!==t[i(263)]?t.recursionProbability:.6,t[i(263)]=this[i(263)],this[i(237)]=void 0!==t.generateUVs&&t[i(237)],t.generateUVs=this[i(237)],void 0!==t.randomGenerator?(this[i(212)]=t[i(212)],this[i(251)]=t.randomGenerator,void 0!==t.noiseSeed&&this[i(251)][i(339)](t[i(222)])):(this[i(212)]=F[i(216)](),this[i(251)]=Math),void 0!==t[i(284)]?this[i(284)]=t[i(284)]:(this[i(335)](),void 0!==t[i(243)]&&(this.onSubrayCreation=t[i(243)])),this.state=F[i(246)],this[i(294)]=Math[i(277)](1+Math[i(211)](this.ramification,Math.max(0,this[i(194)]-1))),t[i(294)]=this[i(294)],this[i(189)]=2*(1<<this.maxIterations),this.subrays=[];for(let s=0;s<this.maxSubrays;s++)this[i(201)][i(302)](this.createSubray());this[i(190)]=[];for(let s=0;s<this[i(189)];s++)this.raySegments[i(302)](this[i(325)]());this.time=0,this[i(266)]=0,this.currentSegmentCallback=null,this[i(179)]=this.generateUVs?this.createTriangleVerticesWithUVs:this[i(270)],this[i(322)]=0,this[i(229)]=null,this[i(240)]=0,this.isInitialSegment=!1,this[i(260)]=0,this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this[i(296)]=0,this[i(293)]=null,this[i(265)]=null,this[i(204)]=null,this[i(184)]=null,this[i(338)]=null,this[i(178)]=m(this[i(251)][i(306)]),this[i(333)]=m(this[i(251)][i(306)]),this[i(261)]=m(this[i(251)][i(306)]),this.forwards=new s,this[i(320)]=new s,this.side=new s,this[i(262)]=new s,this[i(319)]=new s,this.middleLinPos=new s,this[i(285)]=new s,this[i(310)]=new s,this[i(214)]=new s}createMesh(){const t=M,i=1<<this[t(301)],s=3*(i+1)*this[t(294)],o=18*i*this[t(294)];this[t(293)]=new Float32Array(3*s),this[t(204)]=new Uint32Array(o),this[t(237)]&&(this[t(265)]=new Float32Array(2*s)),this[t(337)](0),this[t(195)](new n(this[t(204)],1)),this[t(184)]=new e(this[t(293)],3),this[t(213)](t(326),this.positionAttribute),this[t(237)]&&(this[t(338)]=new e(new Float32Array(this[t(265)]),2),this[t(213)]("uv",this[t(338)])),!this[t(210)]&&(this[t(200)][t(308)]=r,this[t(184)][t(308)]=r,this[t(237)]&&(this[t(338)][t(308)]=r)),this[t(293)]=this[t(184)][t(289)],this.indices=this[t(200)][t(289)],this[t(237)]&&(this.uvs=this[t(338)][t(289)])}[M(228)](t){const i=M;this[i(337)](t),this[i(220)].count=this.currentIndex,this[i(200)][i(250)]=!0,this.positionAttribute[i(250)]=!0,this[i(237)]&&(this[i(338)].needsUpdate=!0)}[M(337)](t){const i=M,s=this;this[i(334)]=0,this.currentIndex=0,this[i(181)]=0,this[i(296)]=0,this[i(267)](t,(function(n){const e=i,r=s.currentSubray;t<r[e(342)]||(this[e(273)].isEternal&&0==s[e(229)].recursion?(s[e(238)](n),s[e(284)](n,s)):t<r.endPropagationTime?s[e(266)]>=n[e(323)]*r[e(209)]&&(s[e(238)](n),s.onDecideSubrayCreation(n,s)):t<r[e(224)]?(s[e(238)](n),s[e(284)](n,s)):(s[e(266)]<=r[e(318)]+n[e(231)]*(1-r[e(318)])&&s.createPrism(n),s[e(284)](n,s)))}))}[M(244)](){const t=M;return this[t(201)][this[t(322)]++]}initSubray(t,i){const s=M;t[s(287)].copy(i[s(182)]),t[s(226)][s(207)](i[s(328)]),t.up0[s(207)](i[s(269)]),t.up1.copy(i.up1),t[s(206)]=i[s(206)],t[s(275)]=i[s(275)],t.birthTime=i[s(342)],t[s(286)]=i.deathTime,t[s(256)]=i[s(256)],t[s(196)]=i[s(196)],t[s(278)]=i[s(278)],t[s(209)]=i[s(209)],t.vanishingTimeFactor=i[s(318)],t.maxIterations=this[s(301)],t.seed=void 0!==i[s(222)]?i[s(222)]:0,t[s(247)]=0}[M(267)](t,i){const s=M;this[s(299)]=t,this[s(292)]=i,this[s(322)]=0,this[s(217)](this[s(244)](),this[s(273)]);for(let n=0;n<this[s(322)];n++){const i=this[s(201)][n];this.currentSubray=i,this.randomGenerator.setSeed(i[s(295)]),i[s(314)]=o.lerp(i[s(342)],i.deathTime,i.propagationTimeFactor),i.beginVanishingTime=o[s(253)](i[s(286)],i[s(342)],1-i[s(318)]);const e=this[s(212)][s(306)];i[s(208)].set(e(),e(),e())[s(330)](1e3),i[s(241)].set(e(),e(),e())[s(330)](1e3),this.timeFraction=(t-i[s(342)])/(i[s(286)]-i[s(342)]),this[s(240)]=0,this[s(340)]=!0;const r=this[s(303)]();r[s(185)]=0,r[s(287)][s(207)](i.pos0),r[s(226)][s(207)](i.pos1),r[s(208)][s(207)](i.linPos0),r[s(241)][s(207)](i[s(241)]),r[s(269)][s(207)](i[s(269)]),r[s(258)][s(207)](i[s(258)]),r[s(206)]=i.radius0,r[s(275)]=i[s(275)],r[s(323)]=0,r[s(231)]=1,r[s(331)]=1-i.straightness,this.subrayProbability=this[s(230)]*Math[s(211)](this.recursionProbability,i.recursion)/(1<<i[s(301)]),this[s(311)](r)}this[s(292)]=null,this[s(229)]=null}[M(311)](t){const i=M;if(t.iteration>=this.currentSubray[i(301)])return void this.currentSegmentCallback(t);this.forwards[i(234)](t[i(226)],t.pos0);let s=this[i(183)][i(188)]();s<1e-6&&(this[i(183)].set(0,0,.01),s=this[i(183)][i(188)]());const n=.5*(t[i(206)]+t[i(275)]),e=.5*(t[i(323)]+t[i(231)]),r=this[i(299)]*this[i(229)][i(256)]*Math[i(211)](2,t[i(185)]);this.middlePos[i(324)](t[i(287)],t[i(226)],.5),this[i(279)][i(324)](t[i(208)],t[i(241)],.5);const o=this[i(279)];this[i(285)].set(this[i(178)](o.x,o.y,o.z,r),this[i(333)](o.x,o.y,o.z,r),this[i(261)](o.x,o.y,o.z,r)),this.newPos.multiplyScalar(t[i(331)]*s),this[i(285)].add(this[i(319)]);const a=this[i(303)]();a[i(287)].copy(t.pos0),a[i(226)][i(207)](this[i(285)]),a[i(208)].copy(t[i(208)]),a[i(241)].copy(this.middleLinPos),a[i(269)][i(207)](t[i(269)]),a[i(258)][i(207)](t[i(258)]),a.radius0=t[i(206)],a[i(275)]=n,a[i(323)]=t[i(323)],a[i(231)]=e,a[i(331)]=t[i(331)]*this[i(229)][i(196)],a[i(185)]=t[i(185)]+1;const h=this[i(303)]();h[i(287)][i(207)](this[i(285)]),h.pos1.copy(t[i(226)]),h[i(208)][i(207)](this[i(279)]),h[i(241)][i(207)](t[i(241)]),this[i(214)].crossVectors(t[i(269)],this[i(183)][i(264)]()),h.up0[i(282)](this[i(183)],this[i(214)])[i(264)](),h[i(258)][i(207)](t[i(258)]),h[i(206)]=n,h[i(275)]=t[i(275)],h[i(323)]=e,h[i(231)]=t[i(231)],h.positionVariationFactor=t[i(331)]*this.currentSubray[i(196)],h[i(185)]=t.iteration+1,this[i(311)](a),this[i(311)](h)}createPrism(t){const i=M;this[i(320)][i(234)](t.pos1,t[i(287)]).normalize(),this.isInitialSegment&&(this[i(179)](t[i(287)],t[i(269)],this.forwardsFill,t.radius0,0),this[i(340)]=!1),this[i(179)](t[i(226)],t.up0,this[i(320)],t[i(275)],t[i(231)]),this[i(305)]()}[M(270)](t,i,s,n){const e=M;this.side[e(282)](i,s)[e(330)](n*F[e(274)]),this[e(262)][e(207)](i).multiplyScalar(-n*F[e(300)]);const r=this.vPos,o=this[e(293)];r.copy(t)[e(239)](this.side).add(this.down),o[this[e(181)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(181)]++]=r.z,r.copy(t).add(this[e(272)])[e(341)](this[e(262)]),o[this.currentCoordinate++]=r.x,o[this[e(181)]++]=r.y,o[this[e(181)]++]=r.z,r[e(207)](i).multiplyScalar(n)[e(341)](t),o[this[e(181)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(181)]++]=r.z,this[e(334)]+=3}[M(191)](t,i,s,n,e){const r=M;this[r(272)][r(282)](i,s).multiplyScalar(n*F[r(274)]),this.down[r(207)](i).multiplyScalar(-n*F.SIN30DEG);const o=this[r(310)],a=this[r(293)],h=this[r(265)];o[r(207)](t)[r(239)](this[r(272)])[r(341)](this[r(262)]),a[this[r(181)]++]=o.x,a[this[r(181)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(296)]++]=e,h[this[r(296)]++]=0,o.copy(t)[r(341)](this[r(272)]).add(this.down),a[this[r(181)]++]=o.x,a[this[r(181)]++]=o.y,a[this[r(181)]++]=o.z,h[this[r(296)]++]=e,h[this[r(296)]++]=.5,o[r(207)](i)[r(330)](n)[r(341)](t),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(181)]++]=o.z,h[this[r(296)]++]=e,h[this.currentUVCoordinate++]=1,this[r(334)]+=3}[M(305)](t){const i=M,s=this[i(204)];t=this[i(334)]-6,s[this[i(290)]++]=t+1,s[this[i(290)]++]=t+2,s[this[i(290)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(290)]++]=t+5,s[this[i(290)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(290)]++]=t+1,s[this[i(290)]++]=t+4,s[this[i(290)]++]=t+0,s[this.currentIndex++]=t+4,s[this[i(290)]++]=t+3,s[this[i(290)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(290)]++]=t+3,s[this[i(290)]++]=t+2,s[this[i(290)]++]=t+3,s[this.currentIndex++]=t+5}[M(335)](){const t=M,i=this.randomGenerator.random;this.onDecideSubrayCreation=function(t,s){const n=A,e=s[n(229)],r=s.rayParameters.subrayPeriod,a=s[n(273)][n(202)],h=s[n(273)][n(280)]&&0==e.recursion?-i()*r:o[n(253)](e[n(342)],e[n(314)],t[n(323)])-i()*r,c=s[n(299)]-h,u=Math[n(254)](c/r),l=i()*(u+1);let p=0;if(c%r<=a*r&&(p=s.subrayProbability),e.recursion<s.maxSubrayRecursion&&s[n(322)]<s[n(294)]&&i()<p){const o=s[n(244)](),c=s[n(212)][n(281)]();o[n(295)]=l,s[n(212)][n(339)](l),o.recursion=e[n(247)]+1,o[n(301)]=Math[n(268)](1,e.maxIterations-1),o[n(208)][n(313)](i(),i(),i()).multiplyScalar(1e3),o.linPos1.set(i(),i(),i())[n(330)](1e3),o.up0[n(207)](e[n(269)]),o.up1[n(207)](e[n(258)]),o[n(206)]=t.radius0*s[n(273)][n(198)],o.radius1=Math.min(s[n(273)].minRadius,t[n(275)]*s[n(273)][n(205)]),o.birthTime=h+u*r,o[n(286)]=o[n(342)]+r*a,!s[n(273)].isEternal&&0==e[n(247)]&&(o[n(342)]=Math[n(268)](o.birthTime,e[n(342)]),o.deathTime=Math.min(o[n(286)],e.deathTime)),o[n(256)]=2*e[n(256)],o[n(196)]=e[n(196)],o[n(278)]=e.straightness,o.propagationTimeFactor=e[n(209)],o[n(318)]=e[n(318)],s.onSubrayCreation(t,e,o,s),s[n(212)][n(339)](c)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(t,i,s,n){n[A(255)](t,i,s,.5,.6,.2)},this.subrayConePosition=function(t,s,o,h,c,u){const l=A;o.pos0[l(207)](t[l(287)]),n.subVectors(s.pos1,s[l(287)]),e.copy(n)[l(264)](),n.multiplyScalar(t[l(323)]+(1-t[l(323)])*(i()*h));const p=n.length();r[l(282)](s[l(269)],e);const d=2*Math.PI*i();r[l(330)](Math.cos(d)),a[l(207)](s.up0).multiplyScalar(Math.sin(d)),o[l(226)].copy(r)[l(341)](a)[l(330)](p*c*(u+i()*(1-u))).add(n)[l(341)](s[l(287)])},this[t(255)]=function(s,o,h,c,u,l){const p=t;h[p(287)][p(207)](s.pos0),n[p(234)](o[p(226)],o.pos0),e.copy(n)[p(264)](),n[p(330)](s.fraction0+(1-s[p(323)])*((2*i()-1)*c));const d=n[p(188)]();r[p(282)](o[p(269)],e);const m=2*Math.PI*i();r[p(330)](Math[p(180)](m)),a.copy(o[p(269)])[p(330)](Math[p(291)](m)),h[p(226)][p(207)](r).add(a)[p(330)](d*u*(l+i()*(1-l)))[p(341)](n).add(o.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(325)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(303)](){const t=M;return this[t(190)][this[t(240)]++]}[M(207)](t){const i=M;return super.copy(t),this.init(F[i(259)]({},t[i(273)])),this}[M(257)](){const t=M;return new(this[t(192)])(F[t(259)]({},this[t(273)]))}}function R(){const t=["isLightningStrike","index","subrays","subrayDutyCycle","2934488ScIpXU","indices","radius1Factor","radius0","copy","linPos0","propagationTimeFactor","isStatic","pow","randomGenerator","setAttribute","cross1","log","createRandomGenerator","initSubray","createMesh","RAY_PROPAGATING","drawRange","function *\\( *\\)","noiseSeed","init","beginVanishingTime","RAY_EXTINGUISHED","pos1",'{}.constructor("return this")( )',"updateMesh","currentSubray","ramification","fraction1","console","40GsrZwS","subVectors","while (true) {}","gger","generateUVs","createPrism","sub","currentSegmentIndex","linPos1","bind","onSubrayCreation","addNewSubray","toString","RAY_INITIALIZED","recursion","warn","counter","needsUpdate","seedGenerator","currentSeed","lerp","floor","subrayCylinderPosition","timeScale","clone","up1","copyParameters","subrayProbability","simplexZ","down","recursionProbability","normalize","uvs","timeFraction","fractalRay","max","up0","createTriangleVerticesWithoutUVs","prototype","side","rayParameters","COS30DEG","radius1","info","ceil","straightness","middleLinPos","isEternal","getSeed","crossVectors","apply","onDecideSubrayCreation","newPos","deathTime","pos0","chain","array","currentIndex","sin","currentSegmentCallback","vertices","maxSubrays","seed","currentUVCoordinate","2243649zFSFFi","8400tqwecW","time","SIN30DEG","maxIterations","push","getNewSegment","action","createPrismFaces","random","error","usage","minRadius","vPos","fractalRayRecursive","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","endPropagationTime","debu","test","RAY_STEADY","vanishingTimeFactor","middlePos","forwardsFill","RAY_UNBORN","numSubrays","fraction0","lerpVectors","createSegment","position","6601XYHGmD","destOffset","RAY_VANISHING","multiplyScalar","positionVariationFactor","visible","simplexY","currentVertex","createDefaultSubrayCreationCallbacks","table","fillMesh","uvsAttribute","setSeed","isInitialSegment","add","birthTime","577254hNityH","4329815AeJLni","subrayPeriod","simplexX","currentCreateTriangleVertices","cos","currentCoordinate","sourceOffset","forwards","positionAttribute","iteration","return (function() ","325058DmRHwD","length","maxRaySegments","raySegments","createTriangleVerticesWithUVs","constructor","6261309tQMgzK","maxSubrayRecursion","setIndex","roughness","state","radius0Factor"];return(R=function(){return t})()}function j(t){function i(t){const s=A;if("string"==typeof t)return function(t){}.constructor(s(235))[s(283)](s(249));1!==(""+t/t)[s(188)]||t%20==0?function(){return!0}[s(192)](s(315)+s(236)).call(s(304)):function(){return!1}[s(192)](s(315)+"gger")[s(283)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}F[M(246)]=0,F[M(321)]=1,F[M(219)]=2,F[M(317)]=3,F.RAY_VANISHING=4,F[M(225)]=5,F.COS30DEG=Math[M(180)](30*Math.PI/180),F[M(300)]=Math[M(291)](30*Math.PI/180);const D=V;function V(t,i){const s=G();return V=function(t,i){return s[t-=358]},V(t,i)}!function(t,i){const s=V,n=G();for(;;)try{if(789008===parseInt(s(399))/1*(parseInt(s(413))/2)+parseInt(s(397))/3*(parseInt(s(376))/4)+parseInt(s(427))/5+parseInt(s(421))/6*(-parseInt(s(379))/7)+parseInt(s(392))/8*(-parseInt(s(378))/9)+-parseInt(s(383))/10+parseInt(s(371))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(367)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=V,i=new RegExp(t(389)),s=new RegExp(t(411),"i"),n=E(t(408));i[t(425)](n+t(381))&&s[t(425)](n+t(370))?E():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();z(void 0,(function(){const t=V;let i;try{i=Function(t(423)+t(406)+");")()}catch(e){i=window}const s=i[t(363)]=i[t(363)]||{},n=[t(404),t(380),"info",t(417),"exception",t(407),t(384)];for(let r=0;r<n[t(416)];r++){const i=z.constructor[t(434)][t(428)](z),e=n[r],o=s[e]||i;i.__proto__=z[t(428)](z),i[t(387)]=o[t(387)][t(428)](o),s[e]=i}}))();class L extends a{constructor(t={}){const i=V;super(),this.isLightningStorm=!0,this[i(398)]=t,t[i(405)]=void 0!==t[i(405)]?t[i(405)]:1e3,t[i(365)]=void 0!==t.minHeight?t[i(365)]:80,t.maxHeight=void 0!==t[i(430)]?t[i(430)]:100,t.maxSlope=void 0!==t[i(366)]?t[i(366)]:1.1,t[i(372)]=void 0!==t[i(372)]?t[i(372)]:3,t[i(359)]=void 0!==t[i(359)]?t.lightningMinPeriod:3,t[i(360)]=void 0!==t.lightningMaxPeriod?t[i(360)]:7,t[i(377)]=void 0!==t[i(377)]?t.lightningMinDuration:1,t[i(362)]=void 0!==t[i(362)]?t[i(362)]:2.5,this[i(361)]=F[i(373)](t[i(361)],t[i(361)]),this[i(361)][i(400)]=!1,this[i(409)]=void 0!==t[i(409)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(401)]?this[i(401)]=t[i(401)]:this.onRayPosition=function(s,n){const e=i;n[e(395)]((Math[e(390)]()-.5)*t[e(405)],0,(Math[e(390)]()-.5)*t[e(405)]);const r=o[e(420)](t.minHeight,t.maxHeight,Math[e(390)]());s[e(395)](t[e(366)]*(2*Math[e(390)]()-1),1,t[e(366)]*(2*Math[e(390)]()-1))[e(396)](r).add(n)},this[i(412)]=t[i(412)],this[i(422)]=!1,this[i(388)]=0,this[i(385)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(398)][i(372)];s++){const t=new F(F[i(373)]({},this[i(361)])),s=new c(t,this.lightningMaterial);this[i(369)][i(424)](s)}}[D(435)](t){const i=D;if(!this[i(422)]&&(this[i(388)]=this[i(429)](t)*Math[i(390)](),this[i(422)]=!0),t>=this.nextLightningTime){const s=this[i(369)][i(364)]();if(s){const n=F.copyParameters(s[i(403)][i(433)],this[i(361)]);n[i(382)]=t,n[i(410)]=t+o[i(420)](this.stormParams[i(377)],this[i(398)].lightningMaxDuration,Math[i(390)]()),this.onRayPosition(n[i(418)],n[i(431)]),n[i(394)]=Math[i(390)](),this.add(s),this[i(385)][i(424)](s)}this[i(388)]=this[i(429)](t)}let s=0,n=this[i(385)][i(416)];for(;s<n;){const e=this[i(385)][s],r=e[i(403)],o=r[i(368)];r[i(435)](t),o===F[i(426)]&&r[i(368)]>o&&this.onLightningDown&&this[i(412)](r),r.state===F[i(358)]?(this[i(385)][i(386)](this[i(385)][i(393)](e),1),this.deadLightningsMeshes[i(424)](e),this.remove(e),n--):s++}}getNextLightningTime(t){const i=D;return t+o[i(420)](this[i(398)][i(359)],this[i(398)][i(360)],Math[i(390)]())/(this[i(398)][i(372)]+1)}[D(375)](t,i){const s=D;return super[s(375)](t,i),this[s(398)][s(405)]=t[s(398)].size,this.stormParams[s(365)]=t.stormParams[s(365)],this[s(398)][s(430)]=t.stormParams[s(430)],this[s(398)].maxSlope=t[s(398)].maxSlope,this[s(398)][s(372)]=t.stormParams[s(372)],this[s(398)][s(359)]=t.stormParams[s(359)],this[s(398)][s(360)]=t.stormParams[s(360)],this.stormParams.lightningMinDuration=t[s(398)][s(377)],this[s(398)][s(362)]=t.stormParams[s(362)],this[s(361)]=F.copyParameters({},t[s(361)]),this.lightningMaterial=t.stormParams[s(409)],this[s(412)]=t[s(412)],this}[D(415)](){const t=D;return new(this[t(402)])(this[t(398)])[t(375)](this)}}function G(){const t=["bind","getNextLightningTime","maxHeight","destOffset","while (true) {}","rayParameters","prototype","update","gger","RAY_EXTINGUISHED","lightningMinPeriod","lightningMaxPeriod","lightningParameters","lightningMaxDuration","console","pop","minHeight","maxSlope","apply","state","deadLightningsMeshes","input","13870384SyukLF","maxLightnings","copyParameters","string","copy","866516ScAOyt","lightningMinDuration","2745QOpZsc","413rYIXKF","warn","chain","birthTime","2209790ccuppI","trace","lightningsMeshes","splice","toString","nextLightningTime","function *\\( *\\)","random","debu","27512ZKscty","indexOf","noiseSeed","set","multiplyScalar","3pNAdhG","stormParams","58805aoiWec","isEternal","onRayPosition","constructor","geometry","log","size",'{}.constructor("return this")( )',"table","init","lightningMaterial","deathTime","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","onLightningDown","10kJpwuc","counter","clone","length","error","sourceOffset","stateObject","lerp","3582MbaqpG","inited","return (function() ","push","test","RAY_PROPAGATING","1612535QwLifV"];return(G=function(){return t})()}function E(t){function i(t){const s=V;if(typeof t===s(374))return function(t){}[s(402)](s(432))[s(367)](s(414));1!==(""+t/t)[s(416)]||t%20==0?function(){return!0}.constructor(s(391)+s(436)).call("action"):function(){return!1}[s(402)](s(391)+"gger").apply(s(419)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=Z;!function(t,i){const s=Z,n=k();for(;;)try{if(475992===parseInt(s(516))/1+-parseInt(s(530))/2*(-parseInt(s(528))/3)+parseInt(s(531))/4*(parseInt(s(491))/5)+-parseInt(s(489))/6+parseInt(s(492))/7*(parseInt(s(509))/8)+-parseInt(s(478))/9+-parseInt(s(494))/10*(-parseInt(s(484))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(486)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=Z,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(477),"i"),n=$("init");i.test(n+t(529))&&s[t(505)](n+t(501))?$():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(486)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(){const t=["return (function() ","apply","action","constructor","5555814gZiwxC","radius0","5nDooXm","76993yEmpaw","trace","6640qHPhCj","#b0ffff","length","toString","sourceOffset","multiplyScalar","Color","input","size","primitive","debu","test","__proto__","radius1","stateObject","424oFAdOB","prototype","subVectors","straightness","log","maxHeight","lightStorm","562441xFjVyO","object","while (true) {}","string","call","color","stormParams","timeScale","subrayConePosition","sub",'{}.constructor("return this")( )',"pos1","2583WXgrAr","chain","142NHniAD","1700500eKUDeD","copy","Vector3","rayParameters","gger","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3961539lqAMLy","minHeight","bind","console","dot","subrayPeriod","3487LXbzCC"];return(k=function(){return t})()}function Z(t,i){const s=k();return Z=function(t,i){return s[t-=474]},Z(t,i)}U(void 0,(function(){const t=Z,i=function(){const t=Z;let i;try{i=Function(t(485)+t(526)+");")()}catch(s){i=window}return i}(),s=i[t(481)]=i[t(481)]||{},n=[t(513),t(476),"info","error","exception","table",t(493)];for(let e=0;e<n[t(496)];e++){const i=U[t(488)][t(510)][t(480)](U),r=n[e],o=s[r]||i;i[t(506)]=U[t(480)](U),i.toString=o[t(497)][t(480)](o),s[r]=i}}))();const Y=[N(517)],X=f({__name:N(515),props:{color:{default:N(495)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,n=t,e=new(u[i(500)])(n[i(521)]),r=new h({color:e}),o=new(u[i(533)])(0,-1,0);let a=0;const c=new s,p=new(u[i(533)]),d={roughness:n.roughness,straightness:n[i(512)],radius0:n.radius0,radius1:n[i(507)],timeScale:n.timeScale,subrayPeriod:n[i(483)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(524)](t,s,n,.6,.6,.5),a=e[r(474)][r(498)].y,c[r(511)](n[r(527)],e[r(474)][r(498)]);const h=o[r(482)](c);p[r(532)](o)[r(499)](h),c[r(525)](p);const u=h/a>.5?a/h:1;p[r(499)](u),c.add(p),n[r(527)].addVectors(c,e[r(474)][r(498)])}},m=new L({size:n[i(502)],minHeight:n[i(479)],maxHeight:n[i(514)],maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=m[t(522)];s[t(502)]=n[t(502)],s[t(479)]=n.minHeight,s[t(514)]=n[t(514)],r[t(521)].set(n[t(521)]),d.roughness=n.roughness,d.straightness=n[t(512)],d[t(490)]=n[t(490)],d[t(507)]=n.radius1,d[t(523)]=n[t(523)]}));const{onLoop:f}=l();return f((({elapsed:t})=>{m.update(t)})),(t,s)=>{const n=i;return y(),b(n(503),{object:S(m),renderOrder:9999},null,8,Y)}}});function $(t){function i(t){const s=Z;if(typeof t===s(519))return function(t){}[s(488)](s(518))[s(486)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(488)](s(504)+s(475))[s(520)](s(487)):function(){return!1}[s(488)](s(504)+s(475))[s(486)](s(508)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function W(t,i){const s=B();return W=function(t,i){return s[t-=323]},W(t,i)}!function(t,i){const s=W,n=B();for(;;)try{if(808959===parseInt(s(355))/1*(-parseInt(s(339))/2)+parseInt(s(336))/3*(parseInt(s(372))/4)+parseInt(s(330))/5*(-parseInt(s(335))/6)+-parseInt(s(327))/7*(-parseInt(s(360))/8)+-parseInt(s(367))/9*(parseInt(s(356))/10)+parseInt(s(369))/11*(-parseInt(s(353))/12)+-parseInt(s(347))/13*(-parseInt(s(338))/14))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(354)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function B(){const t=["粗糙度","function *\\( *\\)","straightness","roughness","while (true) {}","1400712QUMyha","apply","5769RBvNOX","77970fIDhIy","stateObject","table","debu","247120TFCVGm","直度度","length","#ffbde7",'{}.constructor("return this")( )',"toString","端部半径","99gavrlH","test","110nJZIHx","时间缩放","gger","684XaLjLy","bind","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","__proto__","#6f6f6f","91MvcQpU","chain","trace","5055MzJRnE","prototype","radius1","color","console","3024HvQJYS","19263hBWfAk","timeScale","2002Mxvfkr","296fFleNf","input","constructor","info","counter","value","string","radius0","175071dfIIzZ"];return(B=function(){return t})()}!function(){Q(this,(function(){const t=W,i=new RegExp(t(349)),s=new RegExp(t(323),"i"),n=q("init");i[t(368)](n+t(328))&&s[t(368)](n+t(340))?q():n("0")}))()}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(354)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();J(void 0,(function(){const t=W;let i;try{i=Function("return (function() "+t(364)+");")()}catch(e){i=window}const s=i[t(334)]=i[t(334)]||{},n=["log","warn",t(342),t(374),"exception",t(358),t(329)];for(let r=0;r<n.length;r++){const i=J[t(341)][t(331)][t(373)](J),e=n[r],o=s[e]||i;i[t(325)]=J[t(373)](J),i[t(365)]=o[t(365)][t(373)](o),s[e]=i}}))();const K=f({__name:"lightningStorm",setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:s(326),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(363),roughness:{label:s(348),value:.85,min:0,max:1,step:.01},straightness:{label:s(361),value:.65,min:0,max:1,step:.01},radius0:{label:s(366),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(370),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(_,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(X,{minHeight:S(e)[m(344)],maxHeight:S(r)[m(344)],color:S(o)[m(344)],roughness:S(a)[m(344)],straightness:S(h)[m(344)],radius0:S(c).value,radius1:S(u)[m(344)],timeScale:S(l)[m(344)]},null,8,["minHeight","maxHeight",m(333),m(351),m(350),m(346),m(332),m(337)]),x(S(P),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function q(t){function i(t){const s=W;if(typeof t===s(345))return function(t){}[s(341)](s(352))[s(354)](s(343));1!==(""+t/t)[s(362)]||t%20==0?function(){return!0}[s(341)](s(359)+s(371)).call(s(324)):function(){return!1}[s(341)](s(359)+s(371))[s(354)](s(357)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

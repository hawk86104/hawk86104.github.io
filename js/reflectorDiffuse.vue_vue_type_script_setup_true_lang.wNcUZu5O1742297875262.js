import{cb as t,a3 as n,C as e,V as r}from"./three.N4lg2KsY1742297875262.js";import{a as o}from"./@tresjs.oW7bfow21742297875262.js";import{R as c}from"./all.three.lRmYuXHz1742297875262.js";import{d as a,b as i,a3 as s,a2 as u,o as l,H as f,N as p,m,u as d}from"./@vue.NRI7TcgI1742297875262.js";!function(t,n){const e=x,r=g();for(;;)try{if(229839===parseInt(e(287))/1*(-parseInt(e(261))/2)+parseInt(e(286))/3+parseInt(e(255))/4*(-parseInt(e(266))/5)+parseInt(e(257))/6+-parseInt(e(247))/7+parseInt(e(245))/8+-parseInt(e(251))/9*(-parseInt(e(263))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=x,n=new RegExp(t(270)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(269));n[t(253)](r+"chain")&&e[t(253)](r+t(277))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["4CoqHbw","fragmentShader","946392xwjeqW","vertexShader","action","info","2ipFJhA","call","108980Ygwxwr","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","return (function() ","587590khOLAu","log","string","init","function *\\( *\\)","trace","apply","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","prototype","length","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","input","while (true) {}","exception","error","console","stateObject","constructor","debu","toString","23619byAgkQ","403879xplyIS","bind","replace","1426800ZkXlbw","gger","2031337UDWHkd","void main() {","counter",'{}.constructor("return this")( )',"576eeNAap","__proto__","test","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t"];return(g=function(){return t})()}h(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(265)+t(250)+");")()}catch(e){n=window}return n}(),e=n[t(281)]=n[t(281)]||{},r=[t(267),"warn",t(260),t(280),t(279),"table",t(271)];for(let o=0;o<r[t(275)];o++){const n=h[t(283)][t(274)][t(288)](h),c=r[o],a=e[c]||n;n[t(252)]=h.bind(h),n[t(285)]=a[t(285)][t(288)](a),e[c]=n}}))();function x(t,n){const e=g();return(x=function(t,n){return e[t-=245]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(268))return function(t){}.constructor(e(278)).apply(e(249));1!==(""+t/t)[e(275)]||t%20==0?function(){return!0}[e(283)](e(284)+e(246))[e(262)](e(259)):function(){return!1}.constructor(e(284)+e(246))[e(272)](e(282)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=I;function w(){const t=["repeat","toString","string","aoMap","prototype","object","color","counter","__proto__","showGridHelper","TresPlaneGeometry","primitive","2423760SBiqBz","assign","info","value","764239fYiWoz","6900904MIOsFH","uniforms","2090960SXqtQF","uv1","exception","table","TresMeshStandardMaterial","length","1000378AdGdtW","constructor","renderTargetUniform","TresMesh","11452160KoHvEO","init","channel","chain","#ffffff","onBeforeCompile","reflectMap","reflectorDiffuse","mixStrength","rotation-x","update","return (function() ","1614090RppSYl","trace","bind","9jHWCel","debu","#444","18OMsFsO","1aBKoDv","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","textureMatrix","gger","error","apply","console"];return(w=function(){return t})()}!function(t,n){const e=I,r=w();for(;;)try{if(466073===parseInt(e(135))/1*(parseInt(e(168))/2)+parseInt(e(128))/3+parseInt(e(162))/4+-parseInt(e(155))/5+parseInt(e(134))/6*(-parseInt(e(159))/7)+-parseInt(e(160))/8*(-parseInt(e(131))/9)+-parseInt(e(172))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(141)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(t,n){const e=w();return(I=function(t,n){return e[t-=119]})(t,n)}!function(){_(this,(function(){const t=I,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(137),"i"),r=z(t(173));n[t(136)](r+t(119))&&e.test(r+"input")?z():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(141)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=I;let n;try{n=Function(t(127)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(142)]=n[t(142)]||{},r=["log","warn",t(157),t(140),t(164),t(165),t(129)];for(let c=0;c<r.length;c++){const n=C[t(169)][t(147)][t(130)](C),o=r[c],a=e[o]||n;n[t(151)]=C[t(130)](C),n[t(144)]=a[t(144)].bind(a),e[o]=n}}))();const M=[b(125)],S=[b(148),"visible"],j=a({__name:b(123),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(120)}},async setup(a){const v=b;let h,g;const y=a,w=new t(9.5,10),_=i(),I=i(),C=i(),j=new c,z={mirror:{value:y.mirror},mixStrength:{value:y[v(124)]}},E=([h,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,g(),h);for(var R=0;R<3;R++)E[R].wrapS=n,E[R].wrapT=n,E[R][v(143)].set(16,16);const T={color:new e(v(133)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=v;t[n(161)][n(122)]=j[n(170)],t[n(161)][n(138)]=j.textureMatrixUniform,t[n(161)]=Object[n(156)](t[n(161)],z),(t=>{const n=x;t[n(258)]=t[n(258)][n(289)](n(248),n(276)),t[n(258)]=t[n(258)][n(289)]("#include <project_vertex>",n(254))})(t),(t=>{const n=x;t.fragmentShader=t.fragmentShader.replace("void main() {",n(273)),t[n(256)]=t[n(256)].replace("#include <emissivemap_fragment>",n(264))})(t)};return u((()=>{const t=v;_.value&&(_.value.attributes[t(163)]=_[t(158)].attributes.uv),C[t(158)]&&(C[t(158)][t(146)][t(174)]=1,C.value[t(121)]=k),I.value&&(I[t(158)].add(j),I[t(158)].onBeforeRender=(n,e,r)=>{j[t(126)](n,e,r)}),y[t(149)]&&C[t(158)]&&(C.value[t(149)]=new e(y[t(149)]))})),(t,n)=>{const e=v;return l(),f("TresGroup",null,[p(e(171),{ref_key:"tmRef",ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(153),{ref_key:"tpgRef",ref:_,args:[10,10]},null,512),p(e(166),m({ref_key:"tmsmRef",ref:C},T),null,16)],8,M),p(e(154),{object:d(w),visible:t[e(152)]},null,8,S)])}}});function z(t){function n(t){const e=I;if(typeof t===e(145))return function(t){}[e(169)]("while (true) {}")[e(141)](e(150));1!==(""+t/t)[e(167)]||t%20==0?function(){return!0}[e(169)]("debu"+e(139)).call("action"):function(){return!1}.constructor(e(132)+e(139)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

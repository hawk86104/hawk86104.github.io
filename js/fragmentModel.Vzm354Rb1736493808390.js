import{_ as n,a as t,cA as o}from"./three.lAfZYOpc1736493808390.js";import{e as r,a as e,b as a,U as s}from"./@tresjs.g7tJPOCI1736493808390.js";import{P as i}from"./tweakpane.yHWGBmom1736493808390.js";import{d as c,a4 as u,r as l,b as f,w as p,o as m,D as g,J as v,aj as d,ak as x,u as y,e as h,f as b,g as w,j as C,al as I}from"./@vue.-Mz_IXfk1736493808390.js";import"./@vueuse.kU-N6GoC1736493808390.js";const _=M;!function(n,t){const o=M,r=j();for(;;)try{if(847573===-parseInt(o(260))/1*(-parseInt(o(238))/2)+-parseInt(o(224))/3+parseInt(o(205))/4*(-parseInt(o(230))/5)+-parseInt(o(191))/6+parseInt(o(190))/7+-parseInt(o(186))/8+parseInt(o(258))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(247)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=M,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(192),"i"),r=R(n(223));t[n(228)](r+"chain")&&o[n(228)](r+"input")?R():r("0")}))()}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(247)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function M(n,t){const o=j();return(M=function(n,t){return o[n-=186]})(n,t)}P(void 0,(function(){const n=M;let t;try{t=Function(n(202)+'{}.constructor("return this")( ));')()}catch(e){t=window}const o=t[n(231)]=t[n(231)]||{},r=["log",n(220),n(254),"error",n(226),n(242),n(250)];for(let a=0;a<r[n(204)];a++){const t=P[n(232)].prototype.bind(P),e=r[a],s=o[e]||t;t[n(199)]=P[n(244)](P),t[n(246)]=s.toString[n(244)](s),o[e]=t}}))();const A=["geometry"];function j(){const n=["init","1523313WtRXjY","uniforms","exception","action","test","toNormal","25YLZChs","console","constructor","#ffc0fa","gger","counter","geometry","toNonIndexed","824tFHrTS","tangent","toPosition","set","table","children","bind","clone","toString","apply","random","m2Color","trace","push","refresh","deleteAttribute","info","value","array","divideScalar","18511803BaElIe","m1Color","2159fIEWlh","2304936UDrrSM","addBinding","./draco/","sin","3245039KolQvI","2986686YTRdBj","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","rotateY","fragmentModelCom","Mesh","stateObject","变化量","__proto__","#bcd4ff","onLoop","return (function() ","position","length","1014968xWDldc","scene","TresMesh","traverse","TresShaderMaterial","rotateX","setAttribute","log","Vector3","颜色1st","count","string","aRandom","attributes","颜色2rd","warn","Color","BufferAttribute"];return(j=function(){return n})()}const D=c({__name:_(195),async setup(s){const c=_;let h,b;const w=t=>{const r=M,e=[];return t[r(208)]((t=>{const o=r;t instanceof n[o(196)]&&(t[o(236)][o(253)]("uv"),t[o(236)].deleteAttribute(o(239)),e[o(251)](t.geometry))})),o(e)},C=w(([h,b]=u((()=>e("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:c(188)}))),h=await h,b(),h)[c(206)].children[0]);C[c(210)](Math.PI/2),C.translate(0,-.9,0);const I=C[c(245)]()[c(237)](),z=w(([h,b]=u((()=>e("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:c(188)}))),h=await h,b(),h)[c(206)][c(243)][0]);z.rotateX(-Math.PI/2),z[c(194)](Math.PI/3);const P=z[c(245)]()[c(237)](),j=I[c(218)][c(203)][c(256)],D=I[c(218)].position[c(215)],R=P[c(218)].position[c(256)],S=P[c(218)].normal.array,N=P[c(218)][c(203)].count,E=new Float32Array(D),T=new Float32Array(3*(D+2)),V=new Float32Array(3*(D+2)),F=new Float32Array(3*(D+2));for(let t=0;t<D;t+=3){const o=1*Math[c(248)](),r=t%N;E[t]=o,E[t+1]=o,E[t+2]=o;const e=3*t,a=j[e],s=j[e+1],i=j[e+2],u=j[e+3],l=j[e+4],f=j[e+5],p=j[e+6],m=j[e+7],g=j[e+8],v=new(n[c(213)])(a+u+p,s+l+m,i+f+g)[c(257)](3);T[c(241)]([v.x,v.y,v.z],3*t),T[c(241)]([v.x,v.y,v.z],3*(t+1)),T[c(241)]([v.x,v.y,v.z],3*(t+2));const d=(n,t,o)=>{const r=c,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(241)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(R,V,r),d(S,F,r)}I.setAttribute(c(217),new(n[c(222)])(E,1)),I[c(211)]("aCenter",new t(T,3)),I[c(211)](c(240),new t(V,3)),I.setAttribute(c(229),new(n[c(222)])(F,3)),console[c(212)](I[c(218)]);const k=([h,b]=u((()=>a(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,b(),h),Y={uniforms:{u_progress:{value:-.1},matcap1:{value:k},m1Color:{type:"v3",value:new(n[c(221)])(c(233))},matcap2:{value:k},m2Color:{type:"v3",value:new(n[c(221)])("#bcd4ff")}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},Z=l({c1:c(233),c2:c(200)}),B=f(.5),G=new i({title:"参数"});return G[c(187)](Y[c(225)].u_progress,c(255),{label:c(198),min:-.1,max:1,step:.001}).disabled=!0,G[c(187)](Z,"c1",{label:c(214)}),G[c(187)](Z,"c2",{label:c(219)}),G.addBinding(B,c(255),{label:"速度",min:.001,max:1,step:.001}),p(Z,(n=>{const t=c;Y[t(225)][t(259)][t(255)][t(241)](n.c1),Y[t(225)][t(249)][t(255)][t(241)](n.c2)}),{deep:!0}),r()[c(201)]((({elapsed:n})=>{const t=c;Y[t(225)].u_progress[t(255)]=(Math[t(189)](n*B[t(255)])+1)/2,G[t(252)]()})),(n,t)=>{const o=c;return m(),g(o(207),{geometry:y(I)},[v(o(209),d(x(Y)),null,16)],8,A)}}});function R(n){function t(n){const o=M;if(typeof n===o(216))return function(n){}.constructor(o(193))[o(247)](o(235));1!==(""+n/n)[o(204)]||n%20==0?function(){return!0}.constructor("debu"+o(234)).call(o(227)):function(){return!1}[o(232)]("debugger").apply(o(197)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const S=V;!function(n,t){const o=V,r=T();for(;;)try{if(135202===parseInt(o(387))/1*(parseInt(o(384))/2)+-parseInt(o(395))/3*(-parseInt(o(400))/4)+-parseInt(o(401))/5+parseInt(o(402))/6+-parseInt(o(382))/7+-parseInt(o(411))/8+parseInt(o(388))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const N=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(392)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){N(this,(function(){const n=V,t=new RegExp(n(397)),o=new RegExp(n(375),"i"),r=k("init");t[n(377)](r+n(389))&&o[n(377)](r+n(396))?k():r("0")}))()}();const E=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(392)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function T(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","test","TresPerspectiveCamera","string","return (function() ","ACESFilmicToneMapping","1768207OGTXEm","table","38okPYnM","debu","log","641OqGaOq","1040031orsGCe","chain","constructor","console","apply","toString","TresAmbientLight","15GIgfWH","input","function *\\( *\\)","fragmentModel","exception","204132dSzNEq","370160fxNHGk","1127730gJRCTc","prototype","TresCanvas","bind","while (true) {}","action","gger","length","counter","872184IMgDVm",'{}.constructor("return this")( )'];return(T=function(){return n})()}function V(n,t){const o=T();return(V=function(n,t){return o[n-=375]})(n,t)}E(void 0,(function(){const n=V;let t;try{t=Function(n(380)+n(412)+");")()}catch(e){t=window}const o=t[n(391)]=t[n(391)]||{},r=[n(386),"warn","info","error",n(399),n(383),"trace"];for(let a=0;a<r[n(409)];a++){const t=E[n(390)][n(403)][n(405)](E),e=r[a],s=o[e]||t;t.__proto__=E[n(405)](E),t[n(393)]=s[n(393)].bind(s),o[e]=t}}))();const F=c({__name:S(398),setup(t){const o=S,r=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:"#000000",windowSize:!0,toneMapping:n[o(381)],toneMappingExposure:.8};return(n,t)=>{const a=o,i=h(a(404));return m(),b(i,d(x(e)),{default:w((()=>[t[0]||(t[0]=v(a(378),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(y(s),d(x(r)),null,16),t[1]||(t[1]=v(a(394),{intensity:2},null,-1)),(m(),b(I,null,{default:w((()=>[C(D)])),_:1}))])),_:1},16)}}});function k(n){function t(n){const o=V;if(typeof n===o(379))return function(n){}.constructor(o(406)).apply(o(410));1!==(""+n/n)[o(409)]||n%20==0?function(){return!0}[o(390)](o(385)+"gger")[o(376)](o(407)):function(){return!1}.constructor(o(385)+o(408))[o(392)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{F as default};

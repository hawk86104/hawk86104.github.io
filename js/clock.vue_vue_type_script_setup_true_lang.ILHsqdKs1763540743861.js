import{f as n,A as r,b8 as c,ae as e}from"./three.rXKzP9fQ1763540743861.js";import{a as o}from"./argestCircle.EZRfPXY41763540743861.js";import{d as l,H as t,o as v,J as a,ac as s,ao as h}from"./@vue.Co_gxueH1763540743861.js";const i=["rotation-y"],u=l({__name:"clock",setup(l){const u={uniforms:{RES:{type:n,value:new n(200,200)},iMouse:{value:new r(0,0,0,0)},uTime:{value:new r},iResolution:{value:new n(200,200)}},vertexShader:o,fragmentShader:"#define S smoothstep \r\n#define PI 3.14159265359\r\n#define TAU 6.283185307179586\r\nuniform vec4 uTime;\r\nuniform vec2 RES;\r\nvarying vec2 vUv;\r\nuniform vec2 iResolution;\r\nvec3 ShapeN(vec2 st, int N, float w, float h){\n\n  vec3 color = vec3(0.0);\r\n  float d = 0.0;\n\n  \n  st = st *2.-1.;\r\n  st.x += 1.0 ;\r\n  st.y += .7;\r\n  st.y /= h;\r\n    st.x *= w;\r\n  \n  \n\n  \n  float a = atan(st.x,st.y)+PI;\r\n  float r = TAU/float(N);\n\n  \n  d = cos(floor(.5+a/r)*r-a)*length(st);\n\n  color = vec3(smoothstep(.41,.4,d));\n\n    return color;\r\n}\r\nvec2 polarMap(vec2 uv, float shift, float inner) {\n\n    uv = vec2(0.5) - uv;\r\n    \r\n    \r\n    float px = 1.0 - fract(atan(uv.y, uv.x) / 6.28 + 0.25) + shift;\r\n    float py = (length(uv) * (1.0 + inner * 2.0) - inner) * 2.0;\r\n    \r\n    return vec2(px, py);\r\n}\r\nvec2 rot (vec2 p,float a)\r\n{\r\n    float c = cos(a);\r\n    float s = sin(a);\r\n    return p*mat2(c,s,-s,c);\r\n}\r\nfloat circle (vec2 p, float r, float g)\r\n{\n\n    float d = length(p / r);\n\n    float ss = S(.32,.32 - g,d);\r\n    \r\n    ss = max(0.,ss);\r\n    return ss;\n\n}\r\nfloat segment(vec2 P, vec2 A, vec2 B, float r) \r\n{\r\n    vec2 g = B - A;\r\n    vec2 h = P - A;\r\n    float d = length(h - g * clamp(dot(g, h) / dot(g,g), 0.0, 1.0));\r\n\treturn smoothstep(r, 0.7*r, d);\r\n}\r\nfloat segmentT(vec2 P, vec2 A, vec2 B, float r, float dr) \r\n{\r\n    vec2 g = B - A;\r\n    vec2 h = P - A ;\r\n    float d = length(h - g * clamp(dot(g , h ) / dot(g,g), 0.0, 1.0));\r\n    \n\n\treturn smoothstep(r, 0.7*r, d);\r\n}\r\n\nvec4 Hand(vec2 uv , float l, float w, float t)\r\n{\r\n    vec4 col = vec4(0.);\r\n    \n\n    float h = segmentT(uv,vec2(0,0.),rot(vec2(0.,.8 * l)  ,t * TAU/60.  ) , \r\n    1. * RES.y/RES.x * w, .5);\r\n    \r\n    uv *= .35;\r\n    vec4 shape = vec4(ShapeN(rot( uv * 1.5, -t* TAU/60.) , 5,6.,/* Height*/ l - .2),1.);\r\n    col += shape;\r\n    col *=  h + shape;\r\n    \r\n    \r\n    \n    vec4 Triangle = vec4(ShapeN(rot( uv * 3., -t* TAU/60.) , 5,/* Width*/9.,/* Height*/ l - .2),1.);\r\n    col += Triangle ;\r\n   \r\n    \r\n    \r\n    col.a = col.r;\n    \r\n    col = max (col,vec4(0.));\r\n    return col;\r\n}\n\nvec4 HandsShadow(vec2 uv , float l, float w, float t , float b)\r\n{\r\n    vec4 col = vec4(0.);\r\n    \n\n    float h = segmentT(uv,vec2(0,0.),rot(vec2(0.,.8 * l)  ,t * TAU/60.  ) , \r\n      w, .5);\r\n    uv.y += .02;\r\n    uv *= .35;\r\n    vec4 shape = vec4(ShapeN(rot( uv * 1.5, -t* TAU/60.) , 5,/* Width*/6. * w,/* Height*/ l - .2),1.);\r\n    col += shape;\r\n    col *=  h + shape;\r\n    \r\n    \r\n    \n    vec4 Triangle = vec4(ShapeN(rot( uv * 3., -t* TAU/60.) , 5,/* Width*/4. * w,/* Height*/ l - .2),1.);\r\n    col += Triangle ;\r\n    col = mix(Triangle, shape, .5);\r\n    \r\n    \r\n    col -= length(uv.y) * 2.; \n    \r\n    \r\n    \r\n    col = max (col,vec4(0.));\r\n    return col * .5;\r\n}\r\nvec4 Dial(vec2 uv, float m)\r\n{\r\n    \r\n    vec4 col = vec4(0.);\r\n    \n    \r\n    uv = polarMap(uv + .5, -.2486 , .25) * .5;\r\n    \r\n    uv.x = fract(uv.x * 24. * m ) ;\r\n    \r\n    \r\n    vec2 id = floor(uv * 24.  );\r\n    \r\n    float idF = (id.x / id.y);\n\n    col *= vec4(idF,idF,idF,1.)    ;\r\n    \r\n    col += circle(uv - vec2(0.,.5 ),1., .001 );\r\n    col += segment(uv / 60. * m ,vec2(0. ,0.0), vec2(6. ,2.),.01) * .5 ;\r\n    if(id.x <=  .5 && id.y <= 24.) return col = vec4(.35);\r\n    col += segment(uv,vec2(.0 ,0.9), vec2(.8 ,0.9),.1);\r\n    \r\n    \r\n    \r\n    float h = segment(uv,vec2(-.8 ,0.5),\r\n     vec2(.8 ,0.5),.2);\r\n    vec4 tx = vec4(1.);\r\n    col +=  h; \r\n    col += col *  tx;\r\n    col = mix(col, tx, col) * .4;\r\n    \r\n    col = clamp(col,0.,1.);\r\n    return col;\r\n}\n\nvec4 ClockFace(vec2 uv){\n\n    vec4 col = vec4(0.,0.,0.,1.);\r\n    \r\n    vec4 wt =vec4(0.);\n    float f = circle(uv,4.3, .001 );\n    float fm = 1. - (circle(uv,4.3, .025 ) );\n    f -= fm;\r\n    col += f;\r\n    \r\n    \n    col -= circle(uv + vec2(0.,-1.03),0.3, .001 ) * 0.3;\r\n    col += circle(uv + vec2(0.,-1.0),0.3, .5 );\r\n    col -= vec4(ShapeN(uv+vec2(0.,-.5) ,5  ,  5.15, 1.15 ),0.7) * .3;\r\n    col += circle(   uv + vec2(0.,-.8) ,0.1, .1 );\r\n    \r\n    \r\n    col = mix(col,wt,col - circle(uv,3.7, .001 ) * .9); \n    \r\n    \r\n    col -= (circle(uv,3.6, .001 ) * .18) + (-uv.y * .2); \n    \r\n    \n    float d = length(uv + vec2(0.,0.1 ))* 0.88;\r\n    float m = 1. - circle(uv,4.3,.0001);\r\n    m += circle(uv,3.7,.001);\r\n    m = 1. - m;\r\n    \r\n    col -=  smoothstep(0., pow(d,40.), m ) ;\r\n    \r\n    \n     \n    col -= Dial(uv/1.3, 1.);\r\n    col += Dial(uv , 1.5);\r\n    \r\n    \r\n    \n\n    vec4 iDate = uTime;\r\n    float mils = fract(iDate.w);\r\n\tfloat secs = mod( (iDate.w),        60.0 );\r\n\tfloat mins = mod( (iDate.w/60.0),   60.0 );\r\n\tfloat hors = mod( (iDate.w/3600.0), 24.0 );\r\n\n    vec4 ch1 = Hand(uv, 0.9,0.9, hors  * TAU * .8 );\n    vec4 ch1m = Hand(uv, 0.6,0.1, hors  * TAU * .8 );\n    ch1 -= ch1m;\r\n    ch1 = clamp(ch1,0.,1.);\r\n    col -= ch1;\r\n    vec4 ch1s = HandsShadow(uv , 1.,.9, hors  * TAU * .8 , .5);\r\n    col -= ch1s;\n\n    vec4 ch2 = Hand(uv , 1.6,0.5, mins);\n    vec4 ch2m = Hand(uv, 1.3,0.1, mins);\n    ch2 -= ch2m;\r\n    ch2 = clamp(ch2,0.,1.);\r\n    col -= ch2;\r\n    vec4 ch2s = HandsShadow(uv , 1.7,.7, mins , .5);\r\n    col -= ch2s;\n\n    vec4 ch3 = Hand(uv ,  2.0, .07 ,secs ); \n    vec4 ch3m = Hand(uv , 1.1, .05 ,secs ); \n    ch3 -= ch3m;\r\n    \n\n    ch3 = clamp(ch3,0.,1.);\r\n    col -= ch3;\r\n    vec4 ch3s = HandsShadow(uv , 2.0,.8, secs , .5);\r\n    col -= ch3s;\r\n    \r\n    \r\n     vec4 tex1 =vec4(1);\r\n    vec4 tex2 =vec4(1);\r\n    vec4 tex3  =vec4(1);\n\n    col = mix (col, ch1 * tex3  , ch1) ;\r\n    col = mix (col,ch2 * tex2 ,ch2 ) ;\r\n    col = mix (col,ch3 * tex1 ,ch3 ) ;\r\n    \r\n    \r\n    \n    \r\n    float cc =  circle(uv,0.3, .001 ) ;\n    cc = ceil(cc);\r\n    \r\n    cc = max(cc,0.);\r\n    cc = min(cc,1.);\r\n    \n    \r\n    col =  mix(cc * wt, col,1. -cc);\r\n    col += vec4(circle(uv,0.3, .2 ) * .3) *(fract( uv.y* 50. - .1)  ) ; \n    \r\n    col -= circle(uv,3.7, .001 ) * .18;\n    col += max((circle(uv,3.9, .05 ) * .3 * uv.y),0.);\r\n     m = 1. - circle(uv,4.3,.001);\r\n    col.a =  1.- m;\r\n    col = col - m;\r\n    col = max(vec4(0.),col);\r\n    return col;\r\n    \r\n}\n\nvoid main(){\n\n    \n    vec2 uv = vUv.xy-0.5 ;\r\n    \r\n    vec4 col = vec4(0.0);\r\n    \r\n    \n    vec4 bg =vec4(0.);\r\n   \r\n   \r\n    float m = bg.r;\r\n    bg += m;\r\n    col += bg;\r\n    \n     uv *= 3.;\r\n    \r\n     col -= max( 1. - length((uv + vec2(.0,.1))* .63), 0.) ;\r\n    vec4 cf = ClockFace(uv);\r\n    col = mix(col,cf,cf.a);\r\n    \r\n     \r\n    \n    gl_FragColor = col;\r\n}",side:e,blending:c,depthWrite:!1,transparent:!0};return(n,r)=>(v(),t("TresMesh",{ref:"quanMeshRef","rotation-y":Math.PI/2,position:[420,350,0]},[r[0]||(r[0]=a("TresPlaneGeometry",{args:[150,150]},null,-1)),a("TresShaderMaterial",s(h(u)),null,16)],8,i))}});export{u as _};

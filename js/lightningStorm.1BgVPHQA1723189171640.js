import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.P6hbCPpV1723189171640.js";import{B as i,V as s,cl as e,aB as n,N as r,h as o,ae as a,Y as h,q as c,a6 as u}from"./three.5MXJ6W7w1723189171640.js";import{$ as l,D as p,i as d}from"./@tresjs.LTwFwASm1723189171640.js";import{c as m}from"./simplex-noise.MycypUyu1723189171640.js";import{d as f,a1 as g,o as y,D as b,u as S,r as v,j as x,g as w,m as _,F as I}from"./@vue.Q1VpS3901723189171640.js";import"./index.5mibPnzO1723189171640.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.1x62BBwZ1723189171640.js";import"./three-custom-shader-material.XueWmqLp1723189171640.js";import"./object-hash.jMAsrj6h1723189171640.js";import"./@amap.Lu-L8G0q1723189171640.js";import"./jszip.WwTqi4J91723189171640.js";import"./glsl-tokenizer.lazMVlew1723189171640.js";import"./glsl-token-string.HJw4RHIk1723189171640.js";import"./glsl-token-functions.95Du-VYb1723189171640.js";import"./tweakpane.yHWGBmom1723189171640.js";import"./@vueuse.oQlm8k6P1723189171640.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.TuQ8OEcu1723189171640.js";import"./all.three.U3GkRXeB1723189171640.js";import"./oimophysics.x0jH7fze1723189171640.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.YCw_xomP1723189171640.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.mGxt35YM1723189171640.js";import"./index.rLlA0tSY1723189171640.js";import"./three-stdlib.9krDtkM91723189171640.js";import"./@pmndrs.wQrKJZQf1723189171640.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.sI1IVpOm1723189171640.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.QmLWHEXL1723189171640.js";const M=A;!function(t,i){const s=A,e=j();for(;;)try{if(639267===parseInt(s(311))/1+parseInt(s(266))/2+parseInt(s(276))/3*(-parseInt(s(195))/4)+parseInt(s(220))/5+parseInt(s(188))/6+-parseInt(s(322))/7*(parseInt(s(285))/8)+parseInt(s(199))/9*(-parseInt(s(293))/10))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const T=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){T(this,(function(){const t=A,i=new RegExp(t(262)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=V("init");i.test(e+t(304))&&s.test(e+t(202))?V():e("0")}))()}();const R=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[A(287)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function A(t,i){const s=j();return(A=function(t,i){return s[t-=177]})(t,i)}function j(){const t=["linPos0","copyParameters","subrayDutyCycle","lerpVectors","raySegments","type","seed","setSeed","sub","trace","fillMesh","up0","cross1","birthTime","forwards","floor","destOffset","RAY_PROPAGATING","ceil","7497684SkFHFG","beginVanishingTime","time","debu","setIndex","sin","fraction1","8HnKmsd","createRandomGenerator","numSubrays","subrayPeriod","3447XVKtiv","recursionProbability","subrayConePosition","input","random","RAY_STEADY","RAY_VANISHING","usage","createTriangleVerticesWithoutUVs","drawRange","linPos1","vertices","createPrism","min","vanishingTimeFactor","error","positionVariationFactor","crossVectors","initSubray","simplexZ","multiplyScalar","6141625qzaplr","currentSegmentIndex","currentSegmentCallback","subrayCylinderPosition","isInitialSegment","currentVertex","radius0","maxSubrays","copy","randomGenerator","cos","setAttribute","radius0Factor","pos1","COS30DEG","exception","recursion","array","minRadius","addNewSubray","onSubrayCreation","needsUpdate","updateMesh","simplexY","console","init","noiseSeed","straightness","bind","radius1","timeScale","down","onDecideSubrayCreation","index","currentIndex","action","indices","vPos","set","pow","positionAttribute","middleLinPos","function *\\( *\\)","pos0","lerp","currentSeed","378108uFLMGP","endPropagationTime","call","createMesh","createDefaultSubrayCreationCallbacks","RAY_EXTINGUISHED","middlePos","createSegment","return (function() ","maxSubrayRecursion","1900383ZCQBlp","warn","maxRaySegments","add","subrays","up1","toString","currentUVCoordinate","RAY_INITIALIZED","48TBgWRB","uvs","apply","subVectors","length","fractalRayRecursive","isEternal","currentCreateTriangleVertices","4590EhjZfs","SIN30DEG","forwardsFill","isLightningStrike","currentCoordinate","side","isStatic","newPos","generateUVs","simplexX","roughness","chain","propagationTimeFactor","fraction0","clone","radius1Factor","gger","timeFraction","584303EaXHuF","normalize","subrayProbability","rayParameters","ramification","maxIterations","count","constructor","createPrismFaces","getSeed","iteration","1364195yDFRLt","stateObject","deathTime","uvsAttribute","push","visible","info","update","sourceOffset","createTriangleVerticesWithUVs","currentSubray","max","while (true) {}","seedGenerator","getNewSegment","state","RAY_UNBORN","createSubray"];return(j=function(){return t})()}R(void 0,(function(){const t=A,i=function(){const t=A;let i;try{i=Function(t(274)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(244)]=i.console||{},e=["log",t(277),t(328),t(214),t(235),"table",t(178)];for(let n=0;n<e[t(289)];n++){const i=R.constructor.prototype[t(248)](R),r=e[n],o=s[r]||i;i.__proto__=R.bind(R),i[t(282)]=o[t(282)].bind(o),s[r]=i}}))();class C extends i{constructor(t={}){const i=A;super(),this[i(296)]=!0,this[i(345)]="LightningStrike",this[i(245)](C[i(341)](t,t)),this[i(269)]()}static createRandomGenerator(){const t=A,i=2053,s=[];for(let n=0;n<i;n++)s.push(Math[t(203)]());const e={currentSeed:0,random:function(){const n=t,r=s[e[n(265)]];return e[n(265)]=(e[n(265)]+1)%i,r},getSeed:function(){return e.currentSeed/i},setSeed:function(s){const n=t;e.currentSeed=Math[n(184)](s*i)%i}};return e}static[M(341)](t={},i={}){const e=M,n=function(s){return i===t?s:s[A(307)]()};return t[e(330)]=void 0!==i[e(330)]?n(i.sourceOffset):new s(0,100,0),t[e(185)]=void 0!==i[e(185)]?n(i[e(185)]):new s(0,0,0),t[e(250)]=void 0!==i[e(250)]?i.timeScale:1,t[e(303)]=void 0!==i[e(303)]?i.roughness:.9,t.straightness=void 0!==i[e(247)]?i[e(247)]:.7,t[e(180)]=void 0!==i[e(180)]?n(i[e(180)]):new s(0,0,1),t[e(281)]=void 0!==i[e(281)]?n(i.up1):new s(0,0,1),t[e(226)]=void 0!==i[e(226)]?i[e(226)]:1,t.radius1=void 0!==i[e(249)]?i.radius1:1,t.radius0Factor=void 0!==i[e(232)]?i[e(232)]:.5,t.radius1Factor=void 0!==i.radius1Factor?i[e(308)]:.2,t[e(238)]=void 0!==i.minRadius?i[e(238)]:.2,t[e(291)]=void 0!==i[e(291)]?i[e(291)]:void 0===i.birthTime||void 0===i[e(324)],t.birthTime=i[e(182)],t.deathTime=i[e(324)],t[e(305)]=void 0!==i[e(305)]?i[e(305)]:.1,t.vanishingTimeFactor=void 0!==i[e(213)]?i[e(213)]:.9,t[e(198)]=void 0!==i[e(198)]?i[e(198)]:4,t[e(342)]=void 0!==i[e(342)]?i[e(342)]:.6,t.maxIterations=void 0!==i[e(316)]?i[e(316)]:9,t[e(299)]=void 0!==i[e(299)]&&i[e(299)],t[e(315)]=void 0!==i[e(315)]?i.ramification:5,t.maxSubrayRecursion=void 0!==i.maxSubrayRecursion?i[e(275)]:3,t[e(200)]=void 0!==i.recursionProbability?i[e(200)]:.6,t.generateUVs=void 0!==i.generateUVs&&i[e(301)],t.randomGenerator=i.randomGenerator,t[e(246)]=i.noiseSeed,t[e(252)]=i[e(252)],t.onSubrayCreation=i.onSubrayCreation,t}[M(329)](t){const i=M;this[i(299)]||(this[i(314)][i(291)]||this.rayParameters.birthTime<=t&&t<=this[i(314)][i(324)]?(this[i(242)](t),t<this.subrays[0][i(267)]?this[i(337)]=C[i(186)]:t>this[i(280)][0][i(189)]?this[i(337)]=C.RAY_VANISHING:this[i(337)]=C.RAY_STEADY,this[i(327)]=!0):(this[i(327)]=!1,t<this[i(314)][i(182)]?this.state=C[i(338)]:this.state=C[i(271)]))}[M(245)](t){const i=M;this[i(314)]=t,this[i(316)]=void 0!==t[i(316)]?Math[i(184)](t[i(316)]):9,t[i(316)]=this[i(316)],this.isStatic=void 0!==t.isStatic&&t[i(299)],t[i(299)]=this[i(299)],this[i(315)]=void 0!==t[i(315)]?Math.floor(t.ramification):5,t.ramification=this[i(315)],this[i(275)]=void 0!==t[i(275)]?Math[i(184)](t.maxSubrayRecursion):3,t[i(275)]=this[i(275)],this[i(200)]=void 0!==t[i(200)]?t.recursionProbability:.6,t[i(200)]=this[i(200)],this[i(301)]=void 0!==t[i(301)]&&t[i(301)],t[i(301)]=this.generateUVs,void 0!==t.randomGenerator?(this[i(229)]=t[i(229)],this.seedGenerator=t.randomGenerator,void 0!==t[i(246)]&&this[i(335)].setSeed(t.noiseSeed)):(this.randomGenerator=C[i(196)](),this[i(335)]=Math),void 0!==t.onDecideSubrayCreation?this[i(252)]=t[i(252)]:(this[i(270)](),void 0!==t.onSubrayCreation&&(this[i(240)]=t[i(240)])),this.state=C.RAY_INITIALIZED,this[i(227)]=Math[i(187)](1+Math[i(259)](this.ramification,Math[i(333)](0,this[i(275)]-1))),t[i(227)]=this.maxSubrays,this[i(278)]=2*(1<<this[i(316)]),this[i(280)]=[];for(let s=0;s<this[i(227)];s++)this.subrays[i(326)](this[i(339)]());this[i(344)]=[];for(let s=0;s<this[i(278)];s++)this[i(344)][i(326)](this[i(273)]());this[i(190)]=0,this[i(310)]=0,this[i(222)]=null,this[i(292)]=this[i(301)]?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this[i(332)]=null,this[i(221)]=0,this[i(224)]=!1,this.subrayProbability=0,this.currentVertex=0,this[i(254)]=0,this[i(297)]=0,this[i(283)]=0,this[i(210)]=null,this[i(286)]=null,this.indices=null,this.positionAttribute=null,this[i(325)]=null,this[i(302)]=m(this[i(335)][i(203)]),this[i(243)]=m(this[i(335)][i(203)]),this.simplexZ=m(this[i(335)][i(203)]),this[i(183)]=new s,this[i(295)]=new s,this.side=new s,this[i(251)]=new s,this[i(272)]=new s,this[i(261)]=new s,this[i(300)]=new s,this.vPos=new s,this.cross1=new s}[M(269)](){const t=M,i=1<<this.maxIterations,s=3*(i+1)*this[t(227)],o=18*i*this[t(227)];this[t(210)]=new Float32Array(3*s),this[t(256)]=new Uint32Array(o),this[t(301)]&&(this[t(286)]=new Float32Array(2*s)),this.fillMesh(0),this[t(192)](new e(this.indices,1)),this[t(260)]=new n(this[t(210)],3),this.setAttribute("position",this[t(260)]),this[t(301)]&&(this.uvsAttribute=new n(new Float32Array(this[t(286)]),2),this[t(231)]("uv",this[t(325)])),!this[t(299)]&&(this[t(253)][t(206)]=r,this[t(260)][t(206)]=r,this[t(301)]&&(this[t(325)].usage=r)),this[t(210)]=this.positionAttribute.array,this[t(256)]=this.index[t(237)],this[t(301)]&&(this[t(286)]=this[t(325)][t(237)])}[M(242)](t){const i=M;this[i(179)](t),this[i(208)][i(317)]=this[i(254)],this.index.needsUpdate=!0,this.positionAttribute[i(241)]=!0,this.generateUVs&&(this[i(325)][i(241)]=!0)}fillMesh(t){const i=M,s=this;this[i(225)]=0,this[i(254)]=0,this[i(297)]=0,this[i(283)]=0,this.fractalRay(t,(function(e){const n=i,r=s[n(332)];t<r[n(182)]||(this[n(314)][n(291)]&&0==s[n(332)][n(236)]?(s.createPrism(e),s[n(252)](e,s)):t<r[n(267)]?s.timeFraction>=e[n(306)]*r[n(305)]&&(s[n(211)](e),s.onDecideSubrayCreation(e,s)):t<r.beginVanishingTime?(s.createPrism(e),s.onDecideSubrayCreation(e,s)):(s[n(310)]<=r[n(213)]+e[n(194)]*(1-r.vanishingTimeFactor)&&s[n(211)](e),s[n(252)](e,s)))}))}[M(239)](){return this.subrays[this.numSubrays++]}[M(217)](t,i){const s=M;t[s(263)][s(228)](i[s(330)]),t[s(233)].copy(i[s(185)]),t[s(180)].copy(i.up0),t[s(281)][s(228)](i.up1),t[s(226)]=i[s(226)],t[s(249)]=i.radius1,t[s(182)]=i.birthTime,t[s(324)]=i[s(324)],t[s(250)]=i[s(250)],t[s(303)]=i[s(303)],t[s(247)]=i[s(247)],t.propagationTimeFactor=i[s(305)],t.vanishingTimeFactor=i[s(213)],t[s(316)]=this[s(316)],t[s(346)]=void 0!==i[s(246)]?i.noiseSeed:0,t[s(236)]=0}fractalRay(t,i){const s=M;this.time=t,this[s(222)]=i,this.numSubrays=0,this.initSubray(this.addNewSubray(),this[s(314)]);for(let e=0;e<this.numSubrays;e++){const i=this[s(280)][e];this[s(332)]=i,this[s(229)][s(347)](i[s(346)]),i[s(267)]=o[s(264)](i.birthTime,i.deathTime,i.propagationTimeFactor),i[s(189)]=o[s(264)](i[s(324)],i[s(182)],1-i[s(213)]);const n=this[s(229)][s(203)];i[s(340)].set(n(),n(),n()).multiplyScalar(1e3),i[s(209)][s(258)](n(),n(),n())[s(219)](1e3),this[s(310)]=(t-i[s(182)])/(i.deathTime-i[s(182)]),this[s(221)]=0,this[s(224)]=!0;const r=this.getNewSegment();r.iteration=0,r.pos0[s(228)](i[s(263)]),r[s(233)].copy(i[s(233)]),r.linPos0[s(228)](i[s(340)]),r[s(209)][s(228)](i[s(209)]),r.up0.copy(i[s(180)]),r[s(281)].copy(i[s(281)]),r.radius0=i[s(226)],r[s(249)]=i[s(249)],r[s(306)]=0,r[s(194)]=1,r[s(215)]=1-i[s(247)],this[s(313)]=this.ramification*Math.pow(this[s(200)],i[s(236)])/(1<<i[s(316)]),this[s(290)](r)}this.currentSegmentCallback=null,this.currentSubray=null}[M(290)](t){const i=M;if(t.iteration>=this[i(332)][i(316)])return void this[i(222)](t);this[i(183)].subVectors(t[i(233)],t[i(263)]);let s=this[i(183)].length();s<1e-6&&(this[i(183)][i(258)](0,0,.01),s=this.forwards[i(289)]());const e=.5*(t.radius0+t[i(249)]),n=.5*(t[i(306)]+t[i(194)]),r=this.time*this[i(332)][i(250)]*Math[i(259)](2,t[i(321)]);this[i(272)][i(343)](t[i(263)],t[i(233)],.5),this[i(261)][i(343)](t[i(340)],t.linPos1,.5);const o=this[i(261)];this[i(300)][i(258)](this[i(302)](o.x,o.y,o.z,r),this[i(243)](o.x,o.y,o.z,r),this[i(218)](o.x,o.y,o.z,r)),this[i(300)][i(219)](t[i(215)]*s),this.newPos[i(279)](this[i(272)]);const a=this[i(336)]();a[i(263)].copy(t[i(263)]),a[i(233)][i(228)](this[i(300)]),a[i(340)].copy(t.linPos0),a[i(209)][i(228)](this[i(261)]),a[i(180)].copy(t[i(180)]),a[i(281)][i(228)](t[i(281)]),a[i(226)]=t[i(226)],a.radius1=e,a.fraction0=t[i(306)],a.fraction1=n,a[i(215)]=t[i(215)]*this[i(332)][i(303)],a[i(321)]=t[i(321)]+1;const h=this[i(336)]();h[i(263)][i(228)](this[i(300)]),h[i(233)][i(228)](t.pos1),h[i(340)][i(228)](this[i(261)]),h[i(209)][i(228)](t.linPos1),this[i(181)][i(216)](t.up0,this.forwards[i(312)]()),h[i(180)][i(216)](this[i(183)],this[i(181)])[i(312)](),h[i(281)][i(228)](t[i(281)]),h[i(226)]=e,h.radius1=t[i(249)],h.fraction0=n,h[i(194)]=t[i(194)],h.positionVariationFactor=t[i(215)]*this[i(332)][i(303)],h.iteration=t[i(321)]+1,this[i(290)](a),this.fractalRayRecursive(h)}[M(211)](t){const i=M;this[i(295)][i(288)](t[i(233)],t[i(263)])[i(312)](),this[i(224)]&&(this[i(292)](t[i(263)],t[i(180)],this[i(295)],t.radius0,0),this[i(224)]=!1),this[i(292)](t[i(233)],t[i(180)],this[i(295)],t[i(249)],t[i(194)]),this[i(319)]()}[M(207)](t,i,s,e){const n=M;this[n(298)][n(216)](i,s).multiplyScalar(e*C[n(234)]),this[n(251)].copy(i)[n(219)](-e*C[n(294)]);const r=this.vPos,o=this.vertices;r[n(228)](t)[n(177)](this[n(298)])[n(279)](this[n(251)]),o[this[n(297)]++]=r.x,o[this[n(297)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(t).add(this[n(298)])[n(279)](this[n(251)]),o[this[n(297)]++]=r.x,o[this[n(297)]++]=r.y,o[this[n(297)]++]=r.z,r.copy(i)[n(219)](e)[n(279)](t),o[this[n(297)]++]=r.x,o[this[n(297)]++]=r.y,o[this[n(297)]++]=r.z,this[n(225)]+=3}[M(331)](t,i,s,e,n){const r=M;this[r(298)][r(216)](i,s)[r(219)](e*C[r(234)]),this[r(251)][r(228)](i)[r(219)](-e*C.SIN30DEG);const o=this[r(257)],a=this[r(210)],h=this.uvs;o.copy(t)[r(177)](this[r(298)])[r(279)](this[r(251)]),a[this[r(297)]++]=o.x,a[this[r(297)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(283)]++]=n,h[this[r(283)]++]=0,o[r(228)](t).add(this[r(298)])[r(279)](this[r(251)]),a[this[r(297)]++]=o.x,a[this[r(297)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(283)]++]=n,h[this[r(283)]++]=.5,o[r(228)](i)[r(219)](e)[r(279)](t),a[this.currentCoordinate++]=o.x,a[this[r(297)]++]=o.y,a[this[r(297)]++]=o.z,h[this[r(283)]++]=n,h[this.currentUVCoordinate++]=1,this.currentVertex+=3}[M(319)](t){const i=M,s=this.indices;t=this.currentVertex-6,s[this.currentIndex++]=t+1,s[this[i(254)]++]=t+2,s[this.currentIndex++]=t+5,s[this[i(254)]++]=t+1,s[this[i(254)]++]=t+5,s[this[i(254)]++]=t+4,s[this[i(254)]++]=t+0,s[this[i(254)]++]=t+1,s[this[i(254)]++]=t+4,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+4,s[this[i(254)]++]=t+3,s[this[i(254)]++]=t+2,s[this[i(254)]++]=t+0,s[this[i(254)]++]=t+3,s[this[i(254)]++]=t+2,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this.randomGenerator[t(203)];this[t(252)]=function(s,e){const n=t,r=e[n(332)],a=e[n(314)][n(198)],h=e[n(314)].subrayDutyCycle,c=e[n(314)][n(291)]&&0==r[n(236)]?-i()*a:o[n(264)](r[n(182)],r[n(267)],s.fraction0)-i()*a,u=e[n(190)]-c,l=Math[n(184)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=e.subrayProbability),r.recursion<e.maxSubrayRecursion&&e[n(197)]<e[n(227)]&&i()<d){const t=e[n(239)](),o=e[n(229)][n(320)]();t[n(346)]=p,e[n(229)][n(347)](p),t[n(236)]=r[n(236)]+1,t[n(316)]=Math[n(333)](1,r.maxIterations-1),t[n(340)].set(i(),i(),i()).multiplyScalar(1e3),t.linPos1.set(i(),i(),i())[n(219)](1e3),t[n(180)][n(228)](r[n(180)]),t[n(281)].copy(r.up1),t[n(226)]=s[n(226)]*e[n(314)][n(232)],t[n(249)]=Math[n(212)](e.rayParameters[n(238)],s[n(249)]*e[n(314)][n(308)]),t[n(182)]=c+l*a,t.deathTime=t[n(182)]+a*h,!e.rayParameters[n(291)]&&0==r.recursion&&(t[n(182)]=Math[n(333)](t[n(182)],r[n(182)]),t.deathTime=Math[n(212)](t[n(324)],r[n(324)])),t[n(250)]=2*r.timeScale,t.roughness=r.roughness,t[n(247)]=r.straightness,t[n(305)]=r.propagationTimeFactor,t[n(213)]=r[n(213)],e[n(240)](s,r,t,e),e[n(229)][n(347)](o)}};const e=new s,n=new s,r=new s,a=new s;this[t(240)]=function(i,s,e,n){n[t(223)](i,s,e,.5,.6,.2)},this[t(201)]=function(s,o,h,c,u,l){const p=t;h[p(263)][p(228)](s.pos0),e[p(288)](o[p(233)],o[p(263)]),n[p(228)](e)[p(312)](),e[p(219)](s[p(306)]+(1-s[p(306)])*(i()*c));const d=e[p(289)]();r.crossVectors(o[p(180)],n);const m=2*Math.PI*i();r[p(219)](Math.cos(m)),a[p(228)](o[p(180)])[p(219)](Math.sin(m)),h[p(233)][p(228)](r).add(a).multiplyScalar(d*u*(l+i()*(1-l)))[p(279)](e).add(o.pos0)},this[t(223)]=function(s,o,h,c,u,l){const p=t;h[p(263)][p(228)](s[p(263)]),e[p(288)](o[p(233)],o[p(263)]),n[p(228)](e)[p(312)](),e.multiplyScalar(s[p(306)]+(1-s[p(306)])*((2*i()-1)*c));const d=e[p(289)]();r.crossVectors(o[p(180)],n);const m=2*Math.PI*i();r[p(219)](Math.cos(m)),a.copy(o[p(180)]).multiplyScalar(Math[p(193)](m)),h[p(233)][p(228)](r)[p(279)](a)[p(219)](d*u*(l+i()*(1-l)))[p(279)](e)[p(279)](o[p(263)])}}[M(339)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(273)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(336)](){const t=M;return this[t(344)][this[t(221)]++]}[M(228)](t){const i=M;return super[i(228)](t),this[i(245)](C.copyParameters({},t[i(314)])),this}[M(307)](){const t=M;return new(this[t(318)])(C[t(341)]({},this[t(314)]))}}function V(t){function i(t){const s=A;if("string"==typeof t)return function(t){}[s(318)](s(334))[s(287)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(318)](s(191)+s(309))[s(268)](s(255)):function(){return!1}[s(318)]("debu"+s(309))[s(287)](s(323)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[M(284)]=0,C[M(338)]=1,C[M(186)]=2,C[M(204)]=3,C[M(205)]=4,C[M(271)]=5,C[M(234)]=Math[M(230)](30*Math.PI/180),C[M(294)]=Math[M(193)](30*Math.PI/180);const F=z;function z(t,i){const s=G();return(z=function(t,i){return s[t-=227]})(t,i)}!function(t,i){const s=z,e=G();for(;;)try{if(157752===parseInt(s(250))/1*(parseInt(s(303))/2)+-parseInt(s(233))/3*(parseInt(s(229))/4)+parseInt(s(277))/5*(-parseInt(s(307))/6)+parseInt(s(228))/7+parseInt(s(298))/8*(parseInt(s(282))/9)+parseInt(s(285))/10*(-parseInt(s(288))/11)+parseInt(s(240))/12)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const D=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[z(287)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=z,i=new RegExp(t(302)),s=new RegExp(t(273),"i"),e=L(t(293));i[t(284)](e+t(299))&&s[t(284)](e+t(262))?L():e("0")}))()}();const E=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[z(287)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function G(){const t=["186tavQeO","prototype","lightningMaxPeriod","add","993125mEyRYw","20tRGEdt","lightningMaxDuration","indexOf","geometry","75558aPNZZq","getNextLightningTime","warn","length","remove","copy","stormParams","3474312RiAmua","deathTime","counter","table","onLightningDown","lightningMinPeriod","size","multiplyScalar","copyParameters","noiseSeed","27pSCRBU","exception","state","lightningMaterial","lerp","while (true) {}","deadLightningsMeshes","sourceOffset","clone","console","trace","rayParameters","input","info","log","birthTime",'{}.constructor("return this")( )',"return (function() ","lightningMinDuration","isEternal","error","debu","onRayPosition","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","push","action","lightningParameters","43345FqPEvj","minHeight","isLightningStorm","destOffset","random","9vvBqtL","maxHeight","test","19370jeXRZN","bind","apply","1111dsGeYs","update","maxSlope","toString","string","init","set","pop","inited","gger","1343312wShdcB","chain","maxLightnings","constructor","function *\\( *\\)","11018HdPplK","lightningsMeshes","nextLightningTime","call"];return(G=function(){return t})()}E(void 0,(function(){const t=z,i=function(){const t=z;let i;try{i=Function(t(267)+t(266)+");")()}catch(s){i=window}return i}(),s=i[t(259)]=i[t(259)]||{},e=[t(264),t(235),t(263),t(270),t(251),t(243),t(260)];for(let n=0;n<e.length;n++){const i=E[t(301)][t(308)].bind(E),r=e[n],o=s[r]||i;i.__proto__=E[t(286)](E),i[t(291)]=o[t(291)][t(286)](o),s[r]=i}}))();class H extends a{constructor(t={}){const i=z;super(),this[i(279)]=!0,this[i(239)]=t,t[i(246)]=void 0!==t.size?t[i(246)]:1e3,t[i(278)]=void 0!==t[i(278)]?t[i(278)]:80,t.maxHeight=void 0!==t[i(283)]?t[i(283)]:100,t.maxSlope=void 0!==t[i(290)]?t[i(290)]:1.1,t[i(300)]=void 0!==t[i(300)]?t[i(300)]:3,t[i(245)]=void 0!==t[i(245)]?t[i(245)]:3,t[i(309)]=void 0!==t[i(309)]?t.lightningMaxPeriod:7,t[i(268)]=void 0!==t[i(268)]?t[i(268)]:1,t.lightningMaxDuration=void 0!==t[i(230)]?t[i(230)]:2.5,this[i(276)]=C[i(248)](t[i(276)],t[i(276)]),this.lightningParameters[i(269)]=!1,this[i(253)]=void 0!==t.lightningMaterial?t[i(253)]:new h({color:11599871}),void 0!==t[i(272)]?this[i(272)]=t[i(272)]:this[i(272)]=function(s,e){const n=i;e[n(294)]((Math[n(281)]()-.5)*t[n(246)],0,(Math[n(281)]()-.5)*t[n(246)]);const r=o.lerp(t[n(278)],t[n(283)],Math.random());s[n(294)](t[n(290)]*(2*Math[n(281)]()-1),1,t.maxSlope*(2*Math[n(281)]()-1))[n(247)](r).add(e)},this[i(244)]=t[i(244)],this[i(296)]=!1,this[i(305)]=0,this[i(304)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(239)].maxLightnings;s++){const t=new C(C.copyParameters({},this[i(276)])),s=new c(t,this.lightningMaterial);this.deadLightningsMeshes[i(274)](s)}}[F(289)](t){const i=F;if(!this.inited&&(this[i(305)]=this[i(234)](t)*Math[i(281)](),this[i(296)]=!0),t>=this[i(305)]){const s=this[i(256)][i(295)]();if(s){const e=C[i(248)](s[i(232)][i(261)],this.lightningParameters);e[i(265)]=t,e[i(241)]=t+o[i(254)](this[i(239)][i(268)],this.stormParams[i(230)],Math[i(281)]()),this[i(272)](e[i(257)],e[i(280)]),e[i(249)]=Math[i(281)](),this[i(227)](s),this[i(304)].push(s)}this[i(305)]=this[i(234)](t)}let s=0,e=this[i(304)][i(236)];for(;s<e;){const n=this.lightningsMeshes[s],r=n[i(232)],o=r.state;r[i(289)](t),o===C.RAY_PROPAGATING&&r[i(252)]>o&&this[i(244)]&&this[i(244)](r),r[i(252)]===C.RAY_EXTINGUISHED?(this[i(304)].splice(this[i(304)][i(231)](n),1),this[i(256)][i(274)](n),this[i(237)](n),e--):s++}}getNextLightningTime(t){const i=F;return t+o.lerp(this[i(239)][i(245)],this[i(239)][i(309)],Math[i(281)]())/(this[i(239)][i(300)]+1)}copy(t,i){const s=F;return super[s(238)](t,i),this[s(239)][s(246)]=t[s(239)][s(246)],this[s(239)][s(278)]=t.stormParams[s(278)],this[s(239)].maxHeight=t[s(239)][s(283)],this[s(239)].maxSlope=t[s(239)][s(290)],this[s(239)][s(300)]=t[s(239)][s(300)],this[s(239)][s(245)]=t.stormParams.lightningMinPeriod,this[s(239)][s(309)]=t[s(239)][s(309)],this[s(239)][s(268)]=t[s(239)][s(268)],this[s(239)][s(230)]=t[s(239)].lightningMaxDuration,this[s(276)]=C[s(248)]({},t[s(276)]),this[s(253)]=t[s(239)][s(253)],this[s(244)]=t.onLightningDown,this}[F(258)](){const t=F;return new(this[t(301)])(this[t(239)])[t(238)](this)}}function L(t){function i(t){const s=z;if(typeof t===s(292))return function(t){}[s(301)](s(255))[s(287)](s(242));1!==(""+t/t)[s(236)]||t%20==0?function(){return!0}[s(301)](s(271)+s(297))[s(306)](s(275)):function(){return!1}[s(301)]("debu"+s(297))[s(287)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=Y;!function(t,i){const s=Y,e=U();for(;;)try{if(350054===parseInt(s(302))/1*(-parseInt(s(312))/2)+parseInt(s(297))/3+-parseInt(s(289))/4+-parseInt(s(314))/5+parseInt(s(300))/6*(parseInt(s(253))/7)+-parseInt(s(266))/8*(parseInt(s(261))/9)+parseInt(s(307))/10)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const k=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){k(this,(function(){const t=Y,i=new RegExp(t(255)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=q(t(298));i.test(e+t(278))&&s[t(288)](e+t(267))?q():e("0")}))()}();const O=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[Y(309)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function U(){const t=["constructor","debu","gger","maxHeight","set","dot","primitive","counter","test","669944qekAms","roughness","subVectors","color","straightness","Color","log","while (true) {}","528291mzmrUu","init","subrayDutyCycle","1368yPUyFh","stormParams","12689TkGEOf","bind","minHeight","warn","multiplyScalar","11805690EzCToa","console","apply","pos1","#b0ffff","68hEVbsj","radius1","2480680gnxqeB","string","lightStorm","14903YvnCpP","add","function *\\( *\\)","rayParameters","stateObject","radius0","timeScale","MeshBasicMaterial","3096biMjWm","addVectors","subrayConePosition","trace","maxLightnings","9232zuuMQK","input","Vector3","toString","size","subrayPeriod","object","exception","table","error","__proto__","call","chain","sourceOffset"];return(U=function(){return t})()}function Y(t,i){const s=U();return(Y=function(t,i){return s[t-=251]})(t,i)}O(void 0,(function(){const t=Y;let i;try{i=Function('return (function() {}.constructor("return this")( ));')()}catch(n){i=window}const s=i[t(308)]=i[t(308)]||{},e=[t(295),t(305),"info",t(275),t(273),t(274),t(264)];for(let r=0;r<e.length;r++){const i=O[t(280)].prototype.bind(O),n=e[r],o=s[n]||i;i[t(276)]=O[t(303)](O),i[t(269)]=o[t(269)][t(303)](o),s[n]=i}}))();const Z=[N(272)],B=f({__name:N(252),props:{color:{default:N(311)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,s=t,e=new(u[i(294)])(s[i(292)]),n=new(u[i(260)])({color:e}),r=new(u[i(268)])(0,-1,0);let o=0;const a=new(u[i(268)]),h=new(u[i(268)]),c={roughness:s[i(290)],straightness:s[i(293)],radius0:s[i(258)],radius1:s.radius1,timeScale:s.timeScale,subrayPeriod:s[i(271)],subrayDutyCycle:s[i(299)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,e,n){const c=i;n[c(263)](t,s,e,.6,.6,.5),o=n[c(256)].sourceOffset.y,a[c(291)](e[c(310)],n[c(256)][c(279)]);const u=r[c(285)](a);h.copy(r)[c(306)](u),a.sub(h);const l=u/o>.5?o/u:1;h[c(306)](l),a[c(254)](h),e[c(310)][c(262)](a,n.rayParameters[c(279)])}},p=new H({size:s[i(270)],minHeight:s[i(304)],maxHeight:s[i(283)],maxSlope:.6,maxLightnings:s[i(265)],lightningParameters:c,lightningMaterial:n});g((()=>{const t=i,e=p[t(301)];e.size=s[t(270)],e[t(304)]=s[t(304)],e[t(283)]=s.maxHeight,n[t(292)][t(284)](s.color),c[t(290)]=s[t(290)],c[t(293)]=s.straightness,c[t(258)]=s[t(258)],c[t(313)]=s[t(313)],c[t(259)]=s[t(259)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{p.update(t)})),(t,s)=>{const e=i;return y(),b(e(286),{object:S(p),renderOrder:9999},null,8,Z)}}});function q(t){function i(t){const s=Y;if(typeof t===s(251))return function(t){}.constructor(s(296))[s(309)](s(287));1!==(""+t/t).length||t%20==0?function(){return!0}[s(280)](s(281)+s(282))[s(277)]("action"):function(){return!1}[s(280)](s(281)+s(282))[s(309)](s(257)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=K,e=X();for(;;)try{if(785681===parseInt(s(269))/1*(-parseInt(s(276))/2)+-parseInt(s(298))/3+-parseInt(s(296))/4*(-parseInt(s(262))/5)+-parseInt(s(304))/6+parseInt(s(305))/7*(parseInt(s(299))/8)+-parseInt(s(297))/9+parseInt(s(274))/10*(parseInt(s(266))/11))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const $=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[K(280)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){$(this,(function(){const t=K,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(275),"i"),e=J(t(302));i[t(301)](e+"chain")&&s[t(301)](e+"input")?J():e("0")}))()}();const W=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function K(t,i){const s=X();return(K=function(t,i){return s[t-=258]})(t,i)}function X(){const t=["minHeight","warn","while (true) {}","toString","error","log","roughness","call","403388pjzltz","3773538sYmyCl","1511943wcAYqy","364816GhBCkE","prototype","test","init","debu","176922WKcsqK","7dRKEEM","length","constructor","table","#ffbde7","__proto__","5rqLMsR","console","return (function() ","时间缩放","23345597dTyOTW","gger","stateObject","7265GtbLmG","info","#92399e","#6f6f6f","未部半径","10TBimgw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","146VxRhOl","直度度","color","粗糙度","apply","string","maxHeight","exception","trace","bind","action","value"];return(X=function(){return t})()}W(void 0,(function(){const t=K;let i;try{i=Function(t(264)+'{}.constructor("return this")( ));')()}catch(n){i=window}const s=i.console=i[t(263)]||{},e=[t(293),t(289),t(270),t(292),t(283),t(259),t(284)];for(let r=0;r<e.length;r++){const i=W[t(258)][t(300)][t(285)](W),n=e[r],o=s[n]||i;i[t(261)]=W[t(285)](W),i[t(291)]=o[t(291)].bind(o),s[n]=i}}))();const Q=f({__name:"lightningStorm",setup(i){const s=K,e=v({cellSize:60,cellThickness:1,cellColor:s(272),sectionColor:s(271),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:n,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(260),roughness:{label:s(279),value:.85,min:0,max:1,step:.01},straightness:{label:s(277),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(273),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(265),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(B,{minHeight:S(n)[m(287)],maxHeight:S(r).value,color:S(o)[m(287)],roughness:S(a)[m(287)],straightness:S(h).value,radius0:S(c).value,radius1:S(u)[m(287)],timeScale:S(l)[m(287)]},null,8,[m(288),m(282),m(278),m(294),"straightness","radius0","radius1","timeScale"]),x(S(P),_({args:[100,100]},e,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function J(t){function i(t){const s=K;if(typeof t===s(281))return function(t){}[s(258)](s(290))[s(280)]("counter");1!==(""+t/t)[s(306)]||t%20==0?function(){return!0}[s(258)](s(303)+s(267))[s(295)](s(286)):function(){return!1}[s(258)]("debu"+s(267))[s(280)](s(268)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

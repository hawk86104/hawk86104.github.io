import"./@fesjs.DVzkLEh_1744075368226.js";import{_ as t}from"./jszip.DBEZcNAn1744075368226.js";import{F as n}from"./file-saver.BOmEzPes1744075368226.js";import{T as e,z as s,aG as o}from"./three.Cqu7jvck1744075368226.js";const r=p;!function(){const t=p,n=i();for(;;)try{if(715671===parseInt(t(340))/1+parseInt(t(257))/2*(-parseInt(t(279))/3)+-parseInt(t(256))/4*(-parseInt(t(261))/5)+-parseInt(t(313))/6*(-parseInt(t(329))/7)+parseInt(t(296))/8*(-parseInt(t(302))/9)+-parseInt(t(330))/10+parseInt(t(263))/11*(parseInt(t(351))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[p(326)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=p,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=y(t(271));n[t(300)](s+t(295))&&e[t(300)](s+t(336))?y():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[p(326)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(){const t=["63qvaigX","Cache","result","Unknown","data:","split","name","action","images","app.json","scene","50790ekvSVI","GIF","error","length","console","config.zip","blob","debu","files","startsWith","__proto__","catch","log","apply","data","onloadend","511CgfLhO","9186470YCuGkx","counter","url:","data:image/gif;base64,","constructor","Loader","input","data:image/WEBP;base64,","exception","base64","22731GWnuxE","push","data:image/webp;base64,","warn","setResponseType",'{}.constructor("return this")( )',"string","file","gger","trace","substring","34984632MgbHsC","async","220708jYObbR","478bgbHhy","image/jpeg","FileLoader","parse","5BHKdvA","folder","11YrRelW","endsWith","load","enabled","type","toLowerCase","url","onerror","init","BufferGeometry","prototype","loadAsync","forEach","manager","json","data:image/png;base64,","14622dZicPD","url:geometries/","uuid","return (function() ",";base64,","toString","info","非标准文件：不存在 app.json","pop",".json","readAsDataURL","url:images/","application/octet-stream","geometries","stringify","bind","chain","928040xVPigp","then","slice","while (true) {}","test","toUpperCase"];return(i=function(){return t})()}async function u(t){const n=r,s=new(e[n(259)]);return new Promise(((e,o)=>{const r=n;s[r(265)](t,(t=>e(JSON[r(260)](t))),void 0,(t=>o(t)))}))}function p(t,n){const e=i();return p=function(t,n){return e[t-=255]},p(t,n)}c(void 0,(function(){const t=p,n=function(){const t=p;let n;try{n=Function(t(282)+t(345)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(317)]||{},s=[t(325),t(343),t(285),t(315),t(338),"table",t(349)];for(let o=0;o<s[t(316)];o++){const n=c[t(334)][t(273)].bind(c),r=s[o],a=e[r]||n;n[t(323)]=c[t(294)](c),n[t(284)]=a[t(284)][t(294)](a),e[r]=n}}))(),e[r(303)][r(266)]=!0;class f extends e[r(335)]{constructor(t){super(t)}[r(265)](t,n,e,o){const a=r,c=new s(this[a(276)]);c[a(344)](a(277)),c[a(265)](t,(t=>n&&n(t)),e,o)}}async function l(t){const n=new s;return new Promise(((e,s)=>{const o=p;n[o(344)](o(319)),n[o(265)](t,(n=>{const a=o,c=new FileReader;c[a(328)]=()=>{const n=a,s=function(t){const n=r,e=t[n(307)](".").pop()[n(268)]();return{jpg:n(258),jpeg:n(258),png:"image/png",gif:"image/gif",bmp:"image/bmp",webp:"image/webp"}[e]||n(291)}(t),o=c[n(304)][n(307)](",")[1];e(n(306)+s+n(283)+o)},c[a(270)]=t=>{s(t)},c[a(289)](n)}),void 0,(t=>s(t)))}))}class g extends o{constructor(t){super(t)}load(n,s,o,a){const c=r,i=new(e[c(259)])(this[c(276)]);i.setResponseType(c(319)),i[c(265)](n,(async n=>{const e=c;try{const o=await t[e(274)](n);s&&s(o)}catch(o){a&&a(o)}}),o,a)}}const d=t=>{const n=r,e=t[n(350)](0,15),s=n(278),o=n(333),a=n(342),c=n(337);return"data:image/jpeg;base64,".startsWith(e)||"data:image/JPEG;base64,".startsWith(e)?"JPEG":s[n(322)](e)||"data:image/PNG;base64,"[n(322)](e)?"PNG":o.startsWith(e)||"data:image/GIF;base64,".startsWith(e)?n(314):a[n(322)](e||c[n(322)](e))?"WEBP":n(305)},m=e=>{const s=r,o=[];e.scene.geometries&&e[s(312)][s(292)][s(275)]((t=>{const n=s;t[n(267)]===n(272)&&(o[n(341)]({uuid:t.uuid,data:t[n(327)]}),t[n(327)]=n(280)+t[n(281)]+".json")}));const a=[];e[s(312)][s(310)]&&e[s(312)][s(310)].forEach((t=>{const n=s;t.url&&(a[n(341)]({uuid:t[n(281)],url:t.url}),t.url[n(267)]?t[n(269)]="url:images/"+t.uuid+"."+t[n(269)][n(267)]+n(288):t.url=n(290)+t[n(281)]+"."+d(t[n(269)]))}));const c=new t;if(o[s(316)]){const t=c[s(262)](s(292));o[s(275)]((n=>{const e=s;t[e(347)](n[e(281)]+e(288),JSON[e(293)](n.data))}))}if(a[s(316)]){const t=c[s(262)]("images");a.forEach((n=>{const e=s;n[e(269)][e(267)]?t[e(347)](n[e(281)]+"."+n.url[e(267)]+e(288),JSON.stringify(n.url)):t.file(n.uuid+"."+d(n[e(269)]),n.url[e(307)](e(283))[e(287)](),{base64:!0})}))}const i=JSON[s(293)](e);return c[s(347)]("app.json",i),c.generateAsync({type:"blob"}).then((t=>{const e=s;n.saveAs(t,e(318))}))},h=(t,n,e)=>{const s=r;t[s(292)]<=0&&t[s(310)]<=0&&e(n)},b=(n,e)=>{const s=r;let o=null;return t[s(274)](n)[s(297)]((t=>{const n=s;t.files[n(311)]?t[n(321)][n(311)].async("string").then((s=>{const a=n;o=JSON[a(260)](s);const c=(t=>{const n=r,e={geometries:0,images:0};return t[n(312)][n(292)]?.[n(275)]((t=>{const s=n;t[s(327)][s(322)](s(332))&&e[s(292)]++})),t[n(312)][n(310)]?.[n(275)]((t=>{t[n(269)].startsWith("url:")&&e.images++})),e})(o);h(c,o,e),o.scene[a(292)]?.[a(275)]((n=>{const s=a;n[s(327)][s(322)](s(332))&&t[s(321)][n[s(327)][s(298)](4)].async(s(346))[s(297)]((t=>{const r=s;n[r(327)]=JSON.parse(t),c[r(292)]--,h(c,o,e)}))})),o[a(312)][a(310)]?.[a(275)]((n=>{const s=a;if(n.url[s(322)](s(332))){const r=n[s(269)][s(298)](4);r[s(264)](s(288))?t[s(321)][r][s(255)](s(346))[s(297)]((t=>{const r=s;n[r(269)]=JSON.parse(t),c[r(310)]--,h(c,o,e)})):t[s(321)][r][s(255)](s(339))[s(297)]((t=>{const a=s,i=r[a(307)]("."),u=i[i.length-1][a(301)]();n[a(269)]="data:image/"+u+a(283)+t,c[a(310)]--,h(c,o,e)}))}}))})):console.error(n(286))}),(t=>{const e=s;console.error(n[e(308)]+": "+t.message)})),o};function y(t){function n(t){const e=p;if(typeof t===e(346))return function(t){}[e(334)](e(299))[e(326)](e(331));1!==(""+t/t)[e(316)]||t%20==0?function(){return!0}.constructor(e(320)+"gger").call(e(309)):function(){return!1}.constructor(e(320)+e(348))[e(326)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{f as J,g as Z,l as a,m as e,d as g,b as i,u as l};

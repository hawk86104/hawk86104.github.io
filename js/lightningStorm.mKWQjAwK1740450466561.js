import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.sU7DdiRS1740450466561.js";import{B as i,b as s,cw as n,ab as e,X as r,a as o,an as a,$ as c,r as h,_ as u}from"./three.HaMTRCf61740450466561.js";import{e as l,I as p,K as d}from"./@tresjs.9lmhsV6t1740450466561.js";import{a as m}from"./simplex-noise.jB2HxhHB1740450466561.js";import{d as f,a2 as g,o as y,H as b,u as v,r as x,j as S,g as w,m as P,F as _}from"./@vue.NRI7TcgI1740450466561.js";import"./index.bNwO9yiK1740450466561.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.yicVRmUe1740450466561.js";import"./three-custom-shader-material.PpIb7yur1740450466561.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1740450466561.js";import"./@vueuse.q8gKo7tC1740450466561.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.S3MMdoCU1740450466561.js";import"./all.three.ZTuQc1_h1740450466561.js";import"./oimophysics.x0jH7fze1740450466561.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.jfM8meFi1740450466561.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.03lNjMeC1740450466561.js";import"./index.f6g8K_Pe1740450466561.js";import"./three-stdlib.vB_UH6QL1740450466561.js";import"./@pmndrs.OKEm8oAd1740450466561.js";import"./object-hash.g8NhVH2H1740450466561.js";import"./@amap.dPX4GHML1740450466561.js";import"./jszip.NDo38iES1740450466561.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.IAMJOoqK1740450466561.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.kqG32o_C1740450466561.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.uqq1lRki1740450466561.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.tFJOB3DT1740450466561.js";const M=C;!function(t,i){const s=C,n=A();for(;;)try{if(892118===-parseInt(s(381))/1*(-parseInt(s(340))/2)+-parseInt(s(465))/3+-parseInt(s(426))/4+-parseInt(s(391))/5+parseInt(s(376))/6+parseInt(s(397))/7*(parseInt(s(468))/8)+-parseInt(s(352))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function C(t,i){const s=A();return(C=function(t,i){return s[t-=300]})(t,i)}!function(){T(this,(function(){const t=C,i=new RegExp(t(373)),s=new RegExp(t(364),"i"),n=D(t(452));i[t(338)](n+"chain")&&s[t(338)](n+"input")?D():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[C(462)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();V(void 0,(function(){const t=C,i=function(){const t=C;let i;try{i=Function(t(336)+t(374)+");")()}catch(s){i=window}return i}(),s=i.console=i.console||{},n=[t(350),t(436),"info","error","exception",t(309),t(335)];for(let e=0;e<n.length;e++){const i=V[t(440)][t(315)][t(456)](V),r=n[e],o=s[r]||i;i.__proto__=V[t(456)](V),i.toString=o[t(442)][t(456)](o),s[r]=i}}))();class j extends i{constructor(t={}){const i=C;super(),this.isLightningStrike=!0,this[i(319)]=i(365),this[i(452)](j.copyParameters(t,t)),this[i(434)]()}static[M(405)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(425)](Math[t(307)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(360)]];return n[e(360)]=(n[e(360)]+1)%i,r},getSeed:function(){return n[t(360)]/i},setSeed:function(s){const e=t;n[e(360)]=Math[e(361)](s*i)%i}};return n}static[M(458)](t={},i={}){const n=M,e=function(s){return i===t?s:s[C(322)]()};return t[n(366)]=void 0!==i[n(366)]?e(i[n(366)]):new s(0,100,0),t[n(446)]=void 0!==i.destOffset?e(i[n(446)]):new s(0,0,0),t[n(362)]=void 0!==i.timeScale?i[n(362)]:1,t[n(441)]=void 0!==i[n(441)]?i[n(441)]:.9,t[n(388)]=void 0!==i[n(388)]?i[n(388)]:.7,t[n(403)]=void 0!==i[n(403)]?e(i[n(403)]):new s(0,0,1),t[n(305)]=void 0!==i[n(305)]?e(i[n(305)]):new s(0,0,1),t[n(358)]=void 0!==i[n(358)]?i.radius0:1,t.radius1=void 0!==i[n(375)]?i[n(375)]:1,t[n(394)]=void 0!==i.radius0Factor?i[n(394)]:.5,t[n(341)]=void 0!==i[n(341)]?i.radius1Factor:.2,t[n(317)]=void 0!==i[n(317)]?i[n(317)]:.2,t[n(372)]=void 0!==i[n(372)]?i.isEternal:void 0===i.birthTime||void 0===i[n(389)],t[n(431)]=i.birthTime,t[n(389)]=i[n(389)],t[n(393)]=void 0!==i[n(393)]?i[n(393)]:.1,t[n(418)]=void 0!==i[n(418)]?i[n(418)]:.9,t[n(414)]=void 0!==i[n(414)]?i[n(414)]:4,t[n(343)]=void 0!==i[n(343)]?i.subrayDutyCycle:.6,t[n(454)]=void 0!==i[n(454)]?i[n(454)]:9,t[n(351)]=void 0!==i.isStatic&&i[n(351)],t[n(354)]=void 0!==i.ramification?i[n(354)]:5,t[n(316)]=void 0!==i[n(316)]?i.maxSubrayRecursion:3,t[n(401)]=void 0!==i.recursionProbability?i[n(401)]:.6,t.generateUVs=void 0!==i[n(329)]&&i[n(329)],t[n(464)]=i[n(464)],t[n(320)]=i.noiseSeed,t.onDecideSubrayCreation=i.onDecideSubrayCreation,t[n(323)]=i[n(323)],t}update(t){const i=M;this.isStatic||(this[i(411)].isEternal||this.rayParameters.birthTime<=t&&t<=this[i(411)][i(389)]?(this[i(467)](t),t<this.subrays[0].endPropagationTime?this[i(326)]=j[i(349)]:t>this.subrays[0][i(412)]?this[i(326)]=j.RAY_VANISHING:this.state=j[i(422)],this[i(435)]=!0):(this[i(435)]=!1,t<this.rayParameters[i(431)]?this.state=j[i(302)]:this.state=j[i(432)]))}[M(452)](t){const i=M;this[i(411)]=t,this[i(454)]=void 0!==t[i(454)]?Math[i(361)](t[i(454)]):9,t[i(454)]=this.maxIterations,this[i(351)]=void 0!==t[i(351)]&&t[i(351)],t[i(351)]=this.isStatic,this[i(354)]=void 0!==t[i(354)]?Math[i(361)](t.ramification):5,t[i(354)]=this.ramification,this[i(316)]=void 0!==t[i(316)]?Math[i(361)](t[i(316)]):3,t[i(316)]=this[i(316)],this[i(401)]=void 0!==t[i(401)]?t[i(401)]:.6,t[i(401)]=this[i(401)],this[i(329)]=void 0!==t[i(329)]&&t[i(329)],t[i(329)]=this.generateUVs,void 0!==t.randomGenerator?(this[i(464)]=t[i(464)],this.seedGenerator=t.randomGenerator,void 0!==t[i(320)]&&this[i(345)][i(382)](t[i(320)])):(this[i(464)]=j[i(405)](),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(323)]&&(this[i(323)]=t.onSubrayCreation)),this[i(326)]=j.RAY_INITIALIZED,this[i(390)]=Math.ceil(1+Math[i(303)](this.ramification,Math.max(0,this[i(316)]-1))),t[i(390)]=this[i(390)],this[i(463)]=2*(1<<this.maxIterations),this.subrays=[];for(let s=0;s<this[i(390)];s++)this[i(332)][i(425)](this.createSubray());this[i(377)]=[];for(let s=0;s<this[i(463)];s++)this[i(377)].push(this[i(384)]());this.time=0,this[i(353)]=0,this[i(347)]=null,this[i(324)]=this.generateUVs?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this[i(451)]=0,this.currentSubray=null,this[i(385)]=0,this[i(423)]=!1,this.subrayProbability=0,this[i(301)]=0,this[i(416)]=0,this.currentCoordinate=0,this[i(437)]=0,this[i(419)]=null,this.uvs=null,this.indices=null,this[i(344)]=null,this[i(342)]=null,this[i(460)]=m(this[i(345)].random),this[i(433)]=m(this[i(345)][i(307)]),this[i(453)]=m(this.seedGenerator[i(307)]),this[i(428)]=new s,this[i(356)]=new s,this[i(392)]=new s,this[i(448)]=new s,this[i(334)]=new s,this[i(321)]=new s,this[i(439)]=new s,this[i(312)]=new s,this[i(404)]=new s}[M(434)](){const t=M,i=1<<this[t(454)],s=3*(i+1)*this[t(390)],o=18*i*this.maxSubrays;this[t(419)]=new Float32Array(3*s),this[t(370)]=new Uint32Array(o),this[t(329)]&&(this[t(337)]=new Float32Array(2*s)),this[t(327)](0),this[t(368)](new n(this[t(370)],1)),this[t(344)]=new e(this[t(419)],3),this[t(413)](t(424),this[t(344)]),this[t(329)]&&(this[t(342)]=new e(new Float32Array(this[t(337)]),2),this[t(413)]("uv",this[t(342)])),!this[t(351)]&&(this.index[t(402)]=r,this.positionAttribute[t(402)]=r,this[t(329)]&&(this[t(342)][t(402)]=r)),this.vertices=this.positionAttribute[t(443)],this[t(370)]=this[t(417)].array,this[t(329)]&&(this.uvs=this[t(342)][t(443)])}[M(467)](t){const i=M;this[i(327)](t),this[i(387)][i(363)]=this.currentIndex,this[i(417)][i(427)]=!0,this[i(344)][i(427)]=!0,this[i(329)]&&(this.uvsAttribute.needsUpdate=!0)}fillMesh(t){const i=M,s=this;this[i(301)]=0,this.currentIndex=0,this.currentCoordinate=0,this[i(437)]=0,this[i(359)](t,(function(n){const e=i,r=s[e(445)];t<r.birthTime||(this[e(411)][e(372)]&&0==s[e(445)][e(420)]?(s.createPrism(n),s.onDecideSubrayCreation(n,s)):t<r[e(308)]?s[e(353)]>=n.fraction0*r[e(393)]&&(s[e(325)](n),s[e(396)](n,s)):t<r.beginVanishingTime?(s[e(325)](n),s[e(396)](n,s)):(s[e(353)]<=r[e(418)]+n.fraction1*(1-r[e(418)])&&s[e(325)](n),s[e(396)](n,s)))}))}[M(429)](){const t=M;return this[t(332)][this[t(451)]++]}[M(410)](t,i){const s=M;t[s(398)].copy(i.sourceOffset),t[s(331)][s(444)](i[s(446)]),t[s(403)][s(444)](i.up0),t[s(305)].copy(i[s(305)]),t[s(358)]=i[s(358)],t[s(375)]=i[s(375)],t[s(431)]=i[s(431)],t[s(389)]=i.deathTime,t[s(362)]=i[s(362)],t[s(441)]=i[s(441)],t.straightness=i[s(388)],t[s(393)]=i[s(393)],t[s(418)]=i[s(418)],t.maxIterations=this[s(454)],t[s(466)]=void 0!==i.noiseSeed?i[s(320)]:0,t.recursion=0}[M(359)](t,i){const s=M;this[s(421)]=t,this[s(347)]=i,this[s(451)]=0,this[s(410)](this[s(429)](),this[s(411)]);for(let n=0;n<this[s(451)];n++){const i=this[s(332)][n];this[s(445)]=i,this[s(464)][s(382)](i[s(466)]),i[s(308)]=o[s(438)](i[s(431)],i[s(389)],i[s(393)]),i[s(412)]=o[s(438)](i[s(389)],i.birthTime,1-i[s(418)]);const e=this[s(464)][s(307)];i[s(306)][s(314)](e(),e(),e())[s(313)](1e3),i[s(407)][s(314)](e(),e(),e())[s(313)](1e3),this.timeFraction=(t-i[s(431)])/(i[s(389)]-i[s(431)]),this.currentSegmentIndex=0,this[s(423)]=!0;const r=this.getNewSegment();r[s(450)]=0,r[s(398)].copy(i[s(398)]),r[s(331)][s(444)](i.pos1),r[s(306)].copy(i.linPos0),r.linPos1[s(444)](i[s(407)]),r.up0[s(444)](i[s(403)]),r[s(305)][s(444)](i.up1),r[s(358)]=i[s(358)],r[s(375)]=i[s(375)],r[s(386)]=0,r[s(328)]=1,r[s(459)]=1-i.straightness,this.subrayProbability=this.ramification*Math[s(303)](this[s(401)],i[s(420)])/(1<<i[s(454)]),this[s(371)](r)}this[s(347)]=null,this.currentSubray=null}[M(371)](t){const i=M;if(t[i(450)]>=this[i(445)][i(454)])return void this[i(347)](t);this[i(428)][i(339)](t[i(331)],t[i(398)]);let s=this[i(428)][i(311)]();s<1e-6&&(this[i(428)][i(314)](0,0,.01),s=this[i(428)][i(311)]());const n=.5*(t[i(358)]+t.radius1),e=.5*(t[i(386)]+t[i(328)]),r=this[i(421)]*this[i(445)][i(362)]*Math[i(303)](2,t[i(450)]);this.middlePos[i(457)](t[i(398)],t[i(331)],.5),this[i(321)][i(457)](t[i(306)],t.linPos1,.5);const o=this[i(321)];this[i(439)][i(314)](this.simplexX(o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(453)](o.x,o.y,o.z,r)),this[i(439)][i(313)](t[i(459)]*s),this.newPos[i(300)](this[i(334)]);const a=this[i(346)]();a[i(398)].copy(t[i(398)]),a[i(331)].copy(this[i(439)]),a[i(306)][i(444)](t.linPos0),a[i(407)][i(444)](this.middleLinPos),a[i(403)][i(444)](t[i(403)]),a[i(305)][i(444)](t[i(305)]),a[i(358)]=t[i(358)],a[i(375)]=n,a[i(386)]=t[i(386)],a[i(328)]=e,a[i(459)]=t.positionVariationFactor*this[i(445)].roughness,a.iteration=t.iteration+1;const c=this[i(346)]();c[i(398)][i(444)](this[i(439)]),c.pos1[i(444)](t.pos1),c[i(306)][i(444)](this[i(321)]),c[i(407)].copy(t.linPos1),this.cross1.crossVectors(t[i(403)],this.forwards.normalize()),c[i(403)].crossVectors(this[i(428)],this.cross1)[i(379)](),c.up1[i(444)](t[i(305)]),c[i(358)]=n,c[i(375)]=t.radius1,c[i(386)]=e,c[i(328)]=t[i(328)],c[i(459)]=t[i(459)]*this.currentSubray.roughness,c.iteration=t[i(450)]+1,this[i(371)](a),this.fractalRayRecursive(c)}createPrism(t){const i=M;this[i(356)].subVectors(t[i(331)],t[i(398)]).normalize(),this.isInitialSegment&&(this.currentCreateTriangleVertices(t[i(398)],t[i(403)],this[i(356)],t.radius0,0),this[i(423)]=!1),this[i(324)](t[i(331)],t[i(403)],this[i(356)],t[i(375)],t.fraction1),this.createPrismFaces()}[M(367)](t,i,s,n){const e=M;this[e(392)][e(400)](i,s)[e(313)](n*j[e(461)]),this.down.copy(i)[e(313)](-n*j[e(430)]);const r=this[e(312)],o=this[e(419)];r[e(444)](t)[e(378)](this[e(392)])[e(300)](this.down),o[this[e(318)]++]=r.x,o[this[e(318)]++]=r.y,o[this[e(318)]++]=r.z,r[e(444)](t).add(this[e(392)])[e(300)](this[e(448)]),o[this[e(318)]++]=r.x,o[this[e(318)]++]=r.y,o[this[e(318)]++]=r.z,r[e(444)](i)[e(313)](n)[e(300)](t),o[this[e(318)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(318)]++]=r.z,this[e(301)]+=3}[M(355)](t,i,s,n,e){const r=M;this[r(392)][r(400)](i,s)[r(313)](n*j[r(461)]),this[r(448)][r(444)](i)[r(313)](-n*j[r(430)]);const o=this[r(312)],a=this[r(419)],c=this[r(337)];o[r(444)](t)[r(378)](this[r(392)])[r(300)](this[r(448)]),a[this.currentCoordinate++]=o.x,a[this[r(318)]++]=o.y,a[this.currentCoordinate++]=o.z,c[this[r(437)]++]=e,c[this[r(437)]++]=0,o[r(444)](t)[r(300)](this[r(392)]).add(this.down),a[this[r(318)]++]=o.x,a[this[r(318)]++]=o.y,a[this[r(318)]++]=o.z,c[this[r(437)]++]=e,c[this[r(437)]++]=.5,o[r(444)](i)[r(313)](n)[r(300)](t),a[this[r(318)]++]=o.x,a[this[r(318)]++]=o.y,a[this.currentCoordinate++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(437)]++]=1,this[r(301)]+=3}[M(406)](t){const i=M,s=this[i(370)];t=this[i(301)]-6,s[this[i(416)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(416)]++]=t+5,s[this[i(416)]++]=t+1,s[this[i(416)]++]=t+5,s[this[i(416)]++]=t+4,s[this[i(416)]++]=t+0,s[this[i(416)]++]=t+1,s[this[i(416)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(416)]++]=t+4,s[this[i(416)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(416)]++]=t+0,s[this[i(416)]++]=t+3,s[this[i(416)]++]=t+2,s[this[i(416)]++]=t+3,s[this[i(416)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this[t(464)][t(307)];this[t(396)]=function(s,n){const e=t,r=n[e(445)],a=n.rayParameters[e(414)],c=n.rayParameters[e(343)],h=n.rayParameters[e(372)]&&0==r.recursion?-i()*a:o[e(438)](r[e(431)],r[e(308)],s[e(386)])-i()*a,u=n[e(421)]-h,l=Math[e(361)](u/a),p=i()*(l+1);let d=0;if(u%a<=c*a&&(d=n[e(395)]),r[e(420)]<n[e(316)]&&n[e(451)]<n[e(390)]&&i()<d){const t=n[e(429)](),o=n[e(464)].getSeed();t[e(466)]=p,n[e(464)][e(382)](p),t[e(420)]=r.recursion+1,t[e(454)]=Math.max(1,r[e(454)]-1),t[e(306)][e(314)](i(),i(),i())[e(313)](1e3),t[e(407)][e(314)](i(),i(),i())[e(313)](1e3),t[e(403)][e(444)](r[e(403)]),t[e(305)][e(444)](r[e(305)]),t[e(358)]=s[e(358)]*n.rayParameters.radius0Factor,t.radius1=Math[e(415)](n[e(411)].minRadius,s[e(375)]*n[e(411)][e(341)]),t[e(431)]=h+l*a,t[e(389)]=t[e(431)]+a*c,!n[e(411)][e(372)]&&0==r.recursion&&(t.birthTime=Math[e(455)](t[e(431)],r[e(431)]),t[e(389)]=Math[e(415)](t[e(389)],r[e(389)])),t.timeScale=2*r.timeScale,t[e(441)]=r[e(441)],t.straightness=r[e(388)],t[e(393)]=r[e(393)],t.vanishingTimeFactor=r[e(418)],n[e(323)](s,r,t,n),n[e(464)][e(382)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(323)]=function(i,s,n,e){e[t(310)](i,s,n,.5,.6,.2)},this[t(333)]=function(s,o,c,h,u,l){const p=t;c[p(398)][p(444)](s[p(398)]),n[p(339)](o[p(331)],o.pos0),e[p(444)](n)[p(379)](),n[p(313)](s[p(386)]+(1-s[p(386)])*(i()*h));const d=n[p(311)]();r.crossVectors(o[p(403)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(348)](m)),a[p(444)](o[p(403)]).multiplyScalar(Math[p(399)](m)),c[p(331)][p(444)](r)[p(300)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(300)](n)[p(300)](o[p(398)])},this.subrayCylinderPosition=function(s,o,c,h,u,l){const p=t;c[p(398)][p(444)](s[p(398)]),n[p(339)](o[p(331)],o[p(398)]),e.copy(n)[p(379)](),n[p(313)](s.fraction0+(1-s[p(386)])*((2*i()-1)*h));const d=n.length();r.crossVectors(o.up0,e);const m=2*Math.PI*i();r[p(313)](Math[p(348)](m)),a.copy(o[p(403)])[p(313)](Math[p(399)](m)),c.pos1.copy(r).add(a)[p(313)](d*u*(l+i()*(1-l)))[p(300)](n)[p(300)](o[p(398)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(384)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(377)][this[t(385)]++]}copy(t){const i=M;return super.copy(t),this.init(j[i(458)]({},t.rayParameters)),this}[M(322)](){const t=M;return new this.constructor(j[t(458)]({},this.rayParameters))}}function A(){const t=["RAY_INITIALIZED","up1","linPos0","random","endPropagationTime","table","subrayCylinderPosition","length","vPos","multiplyScalar","set","prototype","maxSubrayRecursion","minRadius","currentCoordinate","type","noiseSeed","middleLinPos","clone","onSubrayCreation","currentCreateTriangleVertices","createPrism","state","fillMesh","fraction1","generateUVs","RAY_VANISHING","pos1","subrays","subrayConePosition","middlePos","trace","return (function() ","uvs","test","subVectors","4VTTJFl","radius1Factor","uvsAttribute","subrayDutyCycle","positionAttribute","seedGenerator","getNewSegment","currentSegmentCallback","cos","RAY_PROPAGATING","log","isStatic","5242707BhuOPh","timeFraction","ramification","createTriangleVerticesWithUVs","forwardsFill","gger","radius0","fractalRay","currentSeed","floor","timeScale","count","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","LightningStrike","sourceOffset","createTriangleVerticesWithoutUVs","setIndex","action","indices","fractalRayRecursive","isEternal","function *\\( *\\)",'{}.constructor("return this")( )',"radius1","10678974HDBxQj","raySegments","sub","normalize","while (true) {}","711871JLDfiB","setSeed","string","createSegment","currentSegmentIndex","fraction0","drawRange","straightness","deathTime","maxSubrays","3238765IplvJo","side","propagationTimeFactor","radius0Factor","subrayProbability","onDecideSubrayCreation","133HCazQn","pos0","sin","crossVectors","recursionProbability","usage","up0","cross1","createRandomGenerator","createPrismFaces","linPos1","call","counter","initSubray","rayParameters","beginVanishingTime","setAttribute","subrayPeriod","min","currentIndex","index","vanishingTimeFactor","vertices","recursion","time","RAY_STEADY","isInitialSegment","position","push","2890136fJLbTK","needsUpdate","forwards","addNewSubray","SIN30DEG","birthTime","RAY_EXTINGUISHED","simplexY","createMesh","visible","warn","currentUVCoordinate","lerp","newPos","constructor","roughness","toString","array","copy","currentSubray","destOffset","debu","down","stateObject","iteration","numSubrays","init","simplexZ","maxIterations","max","bind","lerpVectors","copyParameters","positionVariationFactor","simplexX","COS30DEG","apply","maxRaySegments","randomGenerator","1223844hJmrHM","seed","updateMesh","20760sfyvtS","add","currentVertex","RAY_UNBORN","pow"];return(A=function(){return t})()}function D(t){function i(t){const s=C;if(typeof t===s(383))return function(t){}[s(440)](s(380))[s(462)](s(409));1!==(""+t/t)[s(311)]||t%20==0?function(){return!0}[s(440)](s(447)+s(357))[s(408)](s(369)):function(){return!1}[s(440)]("debugger").apply(s(449)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[M(304)]=0,j.RAY_UNBORN=1,j[M(349)]=2,j[M(422)]=3,j[M(330)]=4,j[M(432)]=5,j[M(461)]=Math[M(348)](30*Math.PI/180),j[M(430)]=Math[M(399)](30*Math.PI/180);const R=F;!function(t,i){const s=F,n=H();for(;;)try{if(210773===parseInt(s(373))/1*(parseInt(s(330))/2)+parseInt(s(381))/3+parseInt(s(341))/4+-parseInt(s(349))/5+parseInt(s(344))/6+parseInt(s(370))/7+parseInt(s(328))/8*(-parseInt(s(384))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(363)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(){const t=["287085PJTspV","test","gger","geometry","state","action","random","inited","getNextLightningTime","multiplyScalar","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","stormParams","set","apply","constructor","copyParameters","push","exception","lightningMaxPeriod","lightningParameters","142765rTJzbX","chain","destOffset","5397MmSire","debu","minHeight","toString","lightningMinDuration","function *\\( *\\)","stateObject","while (true) {}","204900mrzPAQ","call","log","9xdiLlo","onRayPosition","console","lerp","birthTime","onLightningDown","lightningMinPeriod","RAY_PROPAGATING","pop","update","table","maxSlope","length","RAY_EXTINGUISHED","counter","lightningMaxDuration","info","indexOf","4597096JvpnCT","copy","76tvveRp","string","deathTime","prototype","isEternal","size","clone","add","deadLightningsMeshes","bind","nextLightningTime","1209332kvQGMC","maxHeight","lightningMaterial","1480278ifWBao",'{}.constructor("return this")( )',"input","maxLightnings","lightningsMeshes"];return(H=function(){return t})()}function F(t,i){const s=H();return(F=function(t,i){return s[t-=322]})(t,i)}!function(){z(this,(function(){const t=F,i=new RegExp(t(378)),s=new RegExp(t(359),"i"),n=N(t(360));i.test(n+t(371))&&s[t(350)](n+t(346))?N():n("0")}))()}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(363)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();L(void 0,(function(){const t=F;let i;try{i=Function("return (function() "+t(345)+");")()}catch(e){i=window}const s=i[t(386)]=i[t(386)]||{},n=[t(383),"warn",t(326),"error",t(367),t(394),"trace"];for(let r=0;r<n[t(322)];r++){const i=L[t(364)][t(333)][t(339)](L),e=n[r],o=s[e]||i;i.__proto__=L.bind(L),i.toString=o[t(376)][t(339)](o),s[e]=i}}))();class G extends a{constructor(t={}){const i=F;super(),this.isLightningStorm=!0,this[i(361)]=t,t[i(335)]=void 0!==t.size?t[i(335)]:1e3,t[i(375)]=void 0!==t[i(375)]?t[i(375)]:80,t[i(342)]=void 0!==t[i(342)]?t[i(342)]:100,t[i(395)]=void 0!==t[i(395)]?t.maxSlope:1.1,t[i(347)]=void 0!==t[i(347)]?t.maxLightnings:3,t[i(390)]=void 0!==t[i(390)]?t[i(390)]:3,t[i(368)]=void 0!==t.lightningMaxPeriod?t[i(368)]:7,t[i(377)]=void 0!==t[i(377)]?t[i(377)]:1,t.lightningMaxDuration=void 0!==t[i(325)]?t.lightningMaxDuration:2.5,this.lightningParameters=j[i(365)](t[i(369)],t[i(369)]),this[i(369)][i(334)]=!1,this.lightningMaterial=void 0!==t[i(343)]?t[i(343)]:new c({color:11599871}),void 0!==t.onRayPosition?this[i(385)]=t[i(385)]:this[i(385)]=function(s,n){const e=i;n[e(362)]((Math.random()-.5)*t[e(335)],0,(Math[e(355)]()-.5)*t[e(335)]);const r=o.lerp(t[e(375)],t[e(342)],Math[e(355)]());s[e(362)](t[e(395)]*(2*Math[e(355)]()-1),1,t.maxSlope*(2*Math[e(355)]()-1))[e(358)](r).add(n)},this[i(389)]=t.onLightningDown,this[i(356)]=!1,this[i(340)]=0,this[i(348)]=[],this[i(338)]=[];for(let s=0;s<this[i(361)][i(347)];s++){const t=new j(j[i(365)]({},this[i(369)])),s=new h(t,this[i(343)]);this[i(338)][i(366)](s)}}[R(393)](t){const i=R;if(!this[i(356)]&&(this.nextLightningTime=this[i(357)](t)*Math[i(355)](),this[i(356)]=!0),t>=this[i(340)]){const s=this[i(338)][i(392)]();if(s){const n=j[i(365)](s[i(352)].rayParameters,this[i(369)]);n[i(388)]=t,n[i(332)]=t+o.lerp(this.stormParams[i(377)],this.stormParams.lightningMaxDuration,Math[i(355)]()),this[i(385)](n.sourceOffset,n[i(372)]),n.noiseSeed=Math[i(355)](),this[i(337)](s),this[i(348)].push(s)}this[i(340)]=this.getNextLightningTime(t)}let s=0,n=this[i(348)].length;for(;s<n;){const e=this[i(348)][s],r=e.geometry,o=r[i(353)];r[i(393)](t),o===j[i(391)]&&r.state>o&&this.onLightningDown&&this.onLightningDown(r),r[i(353)]===j[i(323)]?(this[i(348)].splice(this[i(348)][i(327)](e),1),this[i(338)][i(366)](e),this.remove(e),n--):s++}}[R(357)](t){const i=R;return t+o[i(387)](this[i(361)].lightningMinPeriod,this[i(361)].lightningMaxPeriod,Math[i(355)]())/(this[i(361)].maxLightnings+1)}[R(329)](t,i){const s=R;return super[s(329)](t,i),this[s(361)].size=t.stormParams[s(335)],this.stormParams.minHeight=t[s(361)][s(375)],this[s(361)].maxHeight=t[s(361)].maxHeight,this[s(361)][s(395)]=t.stormParams[s(395)],this.stormParams[s(347)]=t[s(361)].maxLightnings,this.stormParams[s(390)]=t.stormParams.lightningMinPeriod,this[s(361)][s(368)]=t[s(361)][s(368)],this[s(361)][s(377)]=t.stormParams[s(377)],this[s(361)][s(325)]=t[s(361)][s(325)],this[s(369)]=j.copyParameters({},t.lightningParameters),this.lightningMaterial=t[s(361)][s(343)],this[s(389)]=t.onLightningDown,this}[R(336)](){return new this.constructor(this.stormParams).copy(this)}}function N(t){function i(t){const s=F;if(typeof t===s(331))return function(t){}[s(364)](s(380)).apply(s(324));1!==(""+t/t).length||t%20==0?function(){return!0}[s(364)](s(374)+s(351))[s(382)](s(354)):function(){return!1}[s(364)](s(374)+s(351))[s(363)](s(379)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const E=O;function O(t,i){const s=k();return(O=function(t,i){return s[t-=475]})(t,i)}!function(t,i){const s=O,n=k();for(;;)try{if(997353===-parseInt(s(510))/1*(parseInt(s(484))/2)+parseInt(s(494))/3+-parseInt(s(498))/4*(-parseInt(s(487))/5)+parseInt(s(532))/6*(parseInt(s(536))/7)+-parseInt(s(516))/8*(-parseInt(s(489))/9)+parseInt(s(478))/10*(parseInt(s(539))/11)+-parseInt(s(533))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(479)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Y(this,(function(){const t=O,i=new RegExp(t(499)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=X(t(525));i.test(n+t(538))&&s.test(n+t(520))?X():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=O,i=function(){const t=O;let i;try{i=Function(t(531)+t(483)+");")()}catch(s){i=window}return i}(),s=i[t(530)]=i[t(530)]||{},n=[t(527),t(515),t(528),"error",t(500),"table",t(503)];for(let e=0;e<n[t(496)];e++){const i=U.constructor.prototype.bind(U),r=n[e],o=s[r]||i;i[t(523)]=U[t(529)](U),i[t(477)]=o[t(477)][t(529)](o),s[r]=i}}))();const Z=[E(511)];function k(){const t=["30328752nQSThv","rayParameters","straightness","18417fxNzZY","minHeight","chain","980617JPADQM","constructor","subVectors","toString","60vpeZBR","apply","maxLightnings","add","string",'{}.constructor("return this")( )',"630962vXyXXz","roughness","while (true) {}","14630hBqxdt","dot","36GHiLNz","maxHeight","update","call","stormParams","5852520xaLXdm","color","length","gger","776GjTXBC","function *\\( *\\)","exception","pos1","addVectors","trace","radius0","set","Vector3","timeScale","lightStorm","subrayDutyCycle","1OyqPtN","object","sourceOffset","radius1","multiplyScalar","warn","121416tcHPYf","size","primitive","Color","input","counter","subrayPeriod","__proto__","copy","init","stateObject","log","info","bind","console","return (function() ","1656yCvZBY"];return(k=function(){return t})()}const B=f({__name:E(508),props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=E,s=t,n=new(u[i(519)])(s[i(495)]),e=new c({color:n}),r=new(u[i(506)])(0,-1,0);let o=0;const a=new(u[i(506)]),h=new(u[i(506)]),p={roughness:s[i(485)],straightness:s[i(535)],radius0:s[i(504)],radius1:s[i(513)],timeScale:s[i(507)],subrayPeriod:s[i(522)],subrayDutyCycle:s[i(509)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e.subrayConePosition(t,s,n,.6,.6,.5),o=e[c(534)][c(512)].y,a[c(476)](n[c(501)],e[c(534)][c(512)]);const u=r[c(488)](a);h[c(524)](r).multiplyScalar(u),a.sub(h);const l=u/o>.5?o/u:1;h[c(514)](l),a[c(481)](h),n[c(501)][c(502)](a,e[c(534)][c(512)])}},d=new G({size:s[i(517)],minHeight:s[i(537)],maxHeight:s[i(490)],maxSlope:.6,maxLightnings:s[i(480)],lightningParameters:p,lightningMaterial:e});g((()=>{const t=i,n=d[t(493)];n[t(517)]=s[t(517)],n[t(537)]=s[t(537)],n.maxHeight=s[t(490)],e.color[t(505)](s[t(495)]),p[t(485)]=s[t(485)],p[t(535)]=s[t(535)],p[t(504)]=s.radius0,p[t(513)]=s[t(513)],p[t(507)]=s[t(507)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(491)](t)})),(t,s)=>{const n=i;return y(),b(n(518),{object:v(d),renderOrder:9999},null,8,Z)}}});function X(t){function i(t){const s=O;if(typeof t===s(482))return function(t){}[s(475)](s(486))[s(479)](s(521));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+s(497))[s(492)]("action"):function(){return!1}[s(475)]("debu"+s(497)).apply(s(526)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const J=W;!function(t,i){const s=W,n=q();for(;;)try{if(226418===-parseInt(s(386))/1*(parseInt(s(385))/2)+-parseInt(s(397))/3*(parseInt(s(389))/4)+parseInt(s(380))/5*(parseInt(s(418))/6)+-parseInt(s(395))/7*(parseInt(s(394))/8)+-parseInt(s(415))/9*(-parseInt(s(420))/10)+parseInt(s(437))/11*(-parseInt(s(392))/12)+parseInt(s(438))/13*(parseInt(s(390))/14))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(431)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){$(this,(function(){const t=W,i=new RegExp(t(439)),s=new RegExp(t(399),"i"),n=tt(t(411));i[t(422)](n+t(408))&&s[t(422)](n+t(429))?tt():n("0")}))()}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(431)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(t,i){const s=q();return(W=function(t,i){return s[t-=380]})(t,i)}function q(){const t=['{}.constructor("return this")( )',"length","时间缩放","126WfpEZc","counter","table","594vGDcvV","timeScale","133390pUjccI","console","test","log","maxHeight","warn","bind","端部半径","stateObject","input","value","apply","debu","error","radius1","trace","直度度","226589zaOQcS","26ussVtc","function *\\( *\\)","17730lBiVvq","string","gger","color","粗糙度","6NxohVD","123689jzJjcq","#92399e","roughness","4196auGVvN","5034218PYCDck","action","180GYertP","while (true) {}","216EKchfO","79177LZmSAW","constructor","129iYVtDj","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","#6f6f6f","straightness","未部半径","radius0","info","return (function() ","prototype","chain","toString","lightningStorm","init"];return(q=function(){return t})()}Q(void 0,(function(){const t=W,i=function(){const t=W;let i;try{i=Function(t(406)+t(412)+");")()}catch(s){i=window}return i}(),s=i[t(421)]=i[t(421)]||{},n=[t(423),t(425),t(405),t(433),t(398),t(417),t(435)];for(let e=0;e<n[t(413)];e++){const i=Q.constructor[t(407)][t(426)](Q),r=n[e],o=s[r]||i;i[t(400)]=Q[t(426)](Q),i[t(409)]=o[t(409)][t(426)](o),s[r]=i}}))();const K=f({__name:J(410),setup(i){const s=J,n=x({cellSize:60,cellThickness:1,cellColor:s(401),sectionColor:s(387),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(384),value:.85,min:0,max:1,step:.01},straightness:{label:s(436),value:.65,min:0,max:1,step:.01},radius0:{label:s(427),value:1,min:.1,max:10,step:.01},radius1:{label:s(403),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(414),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(_,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(B,{minHeight:v(e)[m(430)],maxHeight:v(r)[m(430)],color:v(o)[m(430)],roughness:v(a)[m(430)],straightness:v(c)[m(430)],radius0:v(h).value,radius1:v(u)[m(430)],timeScale:v(l)[m(430)]},null,8,["minHeight",m(424),m(383),m(388),m(402),m(404),m(434),m(419)]),S(v(I),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(v(d))],64)}}});function tt(t){function i(t){const s=W;if(typeof t===s(381))return function(t){}[s(396)](s(393)).apply(s(416));1!==(""+t/t)[s(413)]||t%20==0?function(){return!0}[s(396)](s(432)+s(382)).call(s(391)):function(){return!1}[s(396)]("debu"+s(382)).apply(s(428)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

import{ce as t,ae as n,C as e,V as r}from"./three.XuMWWlrU1743039954535.js";import{a as o}from"./@tresjs.05J-Im0t1743039954535.js";import{R as c}from"./all.three.GQ_-QAqR1743039954535.js";import{d as i,b as a,a3 as s,a2 as u,o as f,H as l,N as p,m,u as d}from"./@vue.C4dqouNn1743039954535.js";!function(t,n){const e=h,r=g();for(;;)try{if(507001===parseInt(e(248))/1+-parseInt(e(283))/2*(parseInt(e(265))/3)+-parseInt(e(249))/4*(parseInt(e(284))/5)+-parseInt(e(287))/6*(parseInt(e(272))/7)+-parseInt(e(258))/8+-parseInt(e(268))/9+-parseInt(e(278))/10*(-parseInt(e(262))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(247)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["trace","call","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","gger","314AvYkSG","5aqbdMd","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t",'{}.constructor("return this")( )',"3252618PmXfCe","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","exception","#include <emissivemap_fragment>","while (true) {}","toString","#include <project_vertex>","apply","1005330FSbgzr","2090072BvmUsl","stateObject","bind","test","warn","debu","string","length","vertexShader","6986080YlCbQw","constructor","function *\\( *\\)","chain","1463rpWRFT","prototype","console","7809UeAPUl","init","__proto__","565686flMegy","log","fragmentShader","replace","7VUEhhq","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","action","void main() {","143690RpNnfz"];return(g=function(){return t})()}function h(t,n){const e=g();return h=function(t,n){return e[t-=247]},h(t,n)}!function(){v(this,(function(){const t=h,n=new RegExp(t(260)),e=new RegExp(t(274),"i"),r=y(t(266));n[t(252)](r+t(261))&&e[t(252)](r+t(273))?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(247)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=h,n=function(){const t=h;let n;try{n=Function("return (function() "+t(286)+");")()}catch(e){n=window}return n}(),e=n[t(264)]=n[t(264)]||{},r=[t(269),t(253),"info","error",t(289),t(275),t(279)];for(let o=0;o<r[t(256)];o++){const n=x.constructor[t(263)][t(251)](x),c=r[o],i=e[c]||n;n[t(267)]=x[t(251)](x),n[t(292)]=i.toString[t(251)](i),e[c]=n}}))();function y(t){function n(t){const e=h;if(typeof t===e(255))return function(t){}[e(259)](e(291))[e(247)]("counter");1!==(""+t/t)[e(256)]||t%20==0?function(){return!0}[e(259)]("debugger")[e(280)](e(276)):function(){return!1}[e(259)](e(254)+e(282))[e(247)](e(250)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=S;!function(t,n){const e=S,r=M();for(;;)try{if(433406===-parseInt(e(290))/1*(parseInt(e(299))/2)+parseInt(e(318))/3+-parseInt(e(263))/4*(parseInt(e(255))/5)+parseInt(e(309))/6+parseInt(e(266))/7+parseInt(e(284))/8*(parseInt(e(264))/9)+parseInt(e(256))/10*(-parseInt(e(257))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(283)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=S,n=new RegExp(t(273)),e=new RegExp(t(261),"i"),r=z(t(306));n.test(r+t(317))&&e[t(267)](r+t(297))?z():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(283)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=S;let n;try{n=Function(t(289)+t(298)+");")()}catch(o){n=window}const e=n[t(314)]=n.console||{},r=["log",t(315),t(281),t(322),t(319),t(265),t(304)];for(let c=0;c<r[t(308)];c++){const n=w[t(301)][t(260)][t(305)](w),o=r[c],i=e[o]||n;n.__proto__=w.bind(w),n.toString=i.toString[t(305)](i),e[o]=n}}))();const I=["rotation-x"],C=[b(311),b(287)];function M(){const t=["gger","repeat","visible","reflectMap","return (function() ","1eKHBxy","value","#ffffff","renderTargetUniform","TresGroup","primitive","channel","input",'{}.constructor("return this")( )',"1147454trGcnK","mirror","constructor","tpgRef","counter","trace","bind","init","aoMap","length","642672uiYCiS","wrapS","object","#444","wrapT","console","warn","tmsmRef","chain","1316703vzJzBk","exception","color","uv1","error","TresMesh","224410bGEgQa","10NnsqGc","8806446aYoPAL","debu","action","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","20LKgPoV","9kOImug","table","5527081XQZWEY","test","onBeforeCompile","string","mixStrength","add","showGridHelper","function *\\( *\\)","stateObject","attributes","uniforms","while (true) {}","update","onBeforeRender","TresPlaneGeometry","info","assign","apply","5572264VcfxYj"];return(M=function(){return t})()}function S(t,n){const e=M();return S=function(t,n){return e[t-=255]},S(t,n)}const j=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(292)}},async setup(i){const v=b;let g,x;const y=i,_=new t(9.5,10),w=a(),M=a(),S=a(),j=new c,z={mirror:{value:y[v(300)]},mixStrength:{value:y[v(270)]}},E=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var R=0;R<3;R++)E[R][v(310)]=n,E[R][v(313)]=n,E[R][v(286)].set(16,16);const T={color:new e(v(312)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},U=t=>{const n=v;t.uniforms[n(288)]=j[n(293)],t[n(276)].textureMatrix=j.textureMatrixUniform,t[n(276)]=Object[n(282)](t.uniforms,z),(t=>{const n=h;t.vertexShader=t[n(257)][n(271)](n(277),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(257)]=t.vertexShader.replace(n(293),n(281))})(t),(t=>{const n=h;t[n(270)]=t[n(270)][n(271)]("void main() {",n(285)),t[n(270)]=t[n(270)].replace(n(290),n(288))})(t)};return u((()=>{const t=v;w[t(291)]&&(w[t(291)][t(275)][t(321)]=w[t(291)].attributes.uv),S[t(291)]&&(S[t(291)][t(307)][t(296)]=1,S[t(291)][t(268)]=U),M[t(291)]&&(M[t(291)][t(271)](j),M[t(291)][t(279)]=(n,e,r)=>{j[t(278)](n,e,r)}),y[t(320)]&&S[t(291)]&&(S[t(291)][t(320)]=new e(y[t(320)]))})),(t,n)=>{const e=v;return f(),l(e(294),null,[p(e(323),{ref_key:"tmRef",ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(280),{ref_key:e(302),ref:w,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:e(316),ref:S},T),null,16)],8,I),p(e(295),{object:d(_),visible:t[e(272)]},null,8,C)])}}});function z(t){function n(t){const e=S;if(typeof t===e(269))return function(t){}.constructor(e(277))[e(283)](e(303));1!==(""+t/t)[e(308)]||t%20==0?function(){return!0}.constructor(e(258)+e(285))[e(262)](e(259)):function(){return!1}[e(301)]("debu"+e(285))[e(283)](e(274)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

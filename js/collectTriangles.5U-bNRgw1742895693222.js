import{m as t,e as n,j as e,o as r,J as o}from"./@tresjs.xCsT8yve1742895693222.js";import{_ as s}from"./index.TbB8XgBA1742895693222.js";import{_ as i,B as c,cb as u}from"./three.DqHgeVY11742895693222.js";import{P as a}from"./tweakpane.ivGeiIdz1742895693222.js";import{I as l,C as p,N as f,c as g,d as h,a as d}from"./three-mesh-bvh.tZwJGpmE1742895693222.js";import{d as m,a3 as y,b as w,a2 as b,o as j,H as v,N as I,u as _,F as x,r as M,e as z,j as A,g as S,m as C,f as R,al as T}from"./@vue.C4dqouNn1742895693222.js";import"./postprocessing.vTwfsnPH1742895693222.js";import"./@vueuse.q8TRDI1e1742895693222.js";import"./utils.GnimYh381742895693222.js";import"./@fesjs.C15FMxIg1742895693222.js";import"./vue-router.0ovIAQEA1742895693222.js";import"./lodash-es.p1wj6C0b1742895693222.js";import"./@qlin.o0hjOMCg1742895693222.js";import"./pinia.JZN5hDyR1742895693222.js";import"./@floating-ui.HzHndBae1742895693222.js";import"./@juggle.4EyLec-41742895693222.js";import"./default.vue_vue_type_script_setup_true_lang.3MPHZthM1742895693222.js";import"./three-mesh-ui.module.e7fgp9vA1742895693222.js";!function(t,n){const e=B,r=O();for(;;)try{if(386012===-parseInt(e(150))/1+-parseInt(e(142))/2+parseInt(e(141))/3*(parseInt(e(116))/4)+-parseInt(e(146))/5*(parseInt(e(138))/6)+parseInt(e(124))/7*(-parseInt(e(134))/8)+-parseInt(e(152))/9+parseInt(e(117))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const k=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[B(121)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){k(this,(function(){const t=B,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Z(t(160));n[t(145)](r+t(147))&&e[t(145)](r+t(149))?Z():r("0")}))()}();const E=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[B(121)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();E(void 0,(function(){const t=B,n=function(){const t=B;let n;try{n=Function(t(154)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(131)]=n[t(131)]||{},r=[t(137),t(161),"info",t(120),"exception",t(148),t(129)];for(let o=0;o<r.length;o++){const n=E.constructor[t(126)][t(122)](E),s=r[o],i=e[s]||n;n[t(128)]=E[t(122)](E),n[t(158)]=i[t(158)][t(122)](i),e[s]=n}}))();function B(t,n){const e=O();return B=function(t,n){return e[t-=116]},B(t,n)}function Z(t){function n(t){const e=B;if(typeof t===e(127))return function(t){}[e(153)](e(139))[e(121)](e(144));1!==(""+t/t)[e(133)]||t%20==0?function(){return!0}[e(153)]("debu"+e(125))[e(162)](e(143)):function(){return!1}.constructor(e(140)+e(125)).apply(e(155)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function O(){const t=["1468656IVPMaW","constructor","return (function() ","stateObject","enabled","pointermove","toString","innerHeight","init","warn","call","button","775196ggRjXQ","27648650OWSWis","value","clientX","error","apply","bind","setFromCamera","63zBJoqx","gger","prototype","string","__proto__","trace","innerWidth","console","addEventListener","length","664184ADptWN","pointerType","Raycaster","log","1497066omHXYq","while (true) {}","debu","3EouCEE","1234328DfPJvQ","action","counter","test","10ihfzNA","chain","table","input","546075GXavLN","pointerdown"];return(O=function(){return t})()}const N=F;!function(t,n){const e=F,r=D();for(;;)try{if(811932===parseInt(e(573))/1+parseInt(e(522))/2*(-parseInt(e(565))/3)+parseInt(e(571))/4+-parseInt(e(552))/5*(parseInt(e(523))/6)+-parseInt(e(560))/7+parseInt(e(566))/8+-parseInt(e(561))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const W=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){W(this,(function(){const t=F,n=new RegExp(t(549)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=J(t(579));n.test(r+t(517))&&e[t(526)](r+"input")?J():r("0")}))()}();const L=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[F(525)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();L(void 0,(function(){const t=F,n=function(){const t=F;let n;try{n=Function(t(532)+t(537)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(567)]||{},r=["log","warn","info",t(515),"exception",t(538),t(548)];for(let o=0;o<r[t(503)];o++){const n=L[t(501)][t(529)].bind(L),s=r[o],i=e[s]||n;n[t(519)]=L[t(562)](L),n.toString=i[t(554)][t(562)](i),e[s]=n}}))();const P=[N(509),N(586)],X=[N(509)];function D(){const t=["Mesh","TresSphereGeometry","value","call","error","needsUpdate","chain","生成模型","__proto__","counter","BufferGeometry","4BldrbS","79284KWlUbN","getX","apply","test","instance","DynamicDrawUsage","prototype","attributes","TresMesh","return (function() ","count","intersectObject","point","visible",'{}.constructor("return this")( )',"table","brushMesh","set","setFromCamera","computeBoundsTree","#023249","normal","gger","TresMeshStandardMaterial","MeshStandardMaterial","trace","function *\\( *\\)","position","push","10IePtzh","center","toString","Matrix4","intersectsSphere","Sphere","scale","setScalar","6349252MqgSwn","1593999mNPsft","bind","action","点击按钮","262275pNvnLL","3039056jVUIRW","console","while (true) {}","applyMatrix4","setAttribute","4246728qlSSOx","model","655793DKrLCo","getZ","Vector2","fill","color","radius","init","BufferAttribute","raycast","containsPoint","index","Vector3","setX","material","enabled","constructor","addButton","length","disposeBoundsTree","active","controls","debu","getY","geometry","log"];return(D=function(){return t})()}function F(t,n){const e=D();return F=function(t,n){return e[t-=500]},F(t,n)}const H=m({__name:N(572),props:{controls:{}},async setup(r){const o=N;let s,m;const M=r;(()=>{const t=F;i[t(521)][t(529)][t(542)]=g,c.prototype[t(504)]=h,i[t(511)][t(529)][t(581)]=d})();const z=([s,m]=y((()=>e(u,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,m(),s),A=new(i[o(547)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),S=new Uint8Array(3*z[o(530)][o(550)][o(533)]);S[o(576)](255);const C=new(i[o(580)])(S,3,!0);C.setUsage(i[o(528)]),z[o(570)](o(577),C);const R=w(null),T=w(null),k=w(!1),E=w(-1),Z=w(.2),O=new(i[o(575)]),{camera:W,raycaster:L}=t(),D=15/255,H=78/255,J=85/255;let U=null;b((()=>{const t=o;R[t(513)]&&(console[t(510)]("targetMesh.value init",R[t(513)]),R[t(513)].geometry[t(542)](),U=z.boundsTree,((t,n,e,r,o,s)=>{const c=B;window.addEventListener(c(157),(e=>{const r=c;t.x=e[r(119)]/window[r(130)]*2-1,t.y=-e.clientY/window[r(159)]*2+1,n[r(118)]=!0})),window[c(132)](c(151),(u=>{const a=c;t.x=u[a(119)]/window.innerWidth*2-1,t.y=-u.clientY/window[a(159)]*2+1,r[a(118)]=u[a(163)];const l=new(i[a(136)]);l[a(123)](t,e[a(118)]),l.firstHitOnly=!0;const p=l.intersectObject(o.value,!0);n[a(118)]=!0,s[a(156)]=0===p[a(133)]}),!0),window[c(132)]("pointerup",(t=>{const e=c;r[e(118)]=-1,"touch"===t[e(135)]&&(n[e(118)]=!1)}),!0)})(O,k,W,E,R,M[t(506)][t(527)]))}));const{onLoop:Y}=n();Y((()=>{const t=o,n=z[t(583)];if(T.value)if(M.controls.instance[t(505)]||!k[t(513)])T[t(513)][t(536)]=!1;else{T[t(513)][t(558)][t(559)](Z.value),L[t(513)][t(541)](O,W[t(513)]),L[t(513)].firstHitOnly=!0;const e=L[t(513)][t(534)](R[t(513)],!0);if(e.length){T[t(513)][t(550)].copy(e[0][t(535)]),M[t(506)][t(527)][t(500)]=!1,T[t(513)].visible=!0;const r=new(i[t(555)]);r.copy(R.value.matrixWorld).invert();const o=new(i[t(557)]);o[t(553)].copy(T[t(513)].position)[t(569)](r),o[t(578)]=100*Z[t(513)];const s=[],c=new(i[t(584)]);if(U?.shapecast({intersectsBounds:n=>{const e=t,r=o.intersectsBox(n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(c[e(540)](0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(582)](c))return l;return p}return r?l:f},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(556)](o)){const t=3*e;s[i(551)](t,t+1,t+2)}return!1}}),0===E.value||2===E[t(513)]){let e=1,r=1,o=1;0===E[t(513)]&&(e=D,r=H,o=J);for(let i=0,c=s[t(503)];i<c;i++){const c=n[t(524)](s[i]);C[t(585)](c,e),C.setY(c,r),C.setZ(c,o)}C[t(516)]=!0}}else T.value.visible=!1,M[t(506)][t(527)][t(500)]=!0}}));const V=(new a)[o(502)]({title:o(564),label:o(518)}),$=new(i[o(521)]);return V.on("click",(()=>{const t=o,n=[],e=[];for(let o=0;o<C.count;o++)C[t(524)](o)===D&&C[t(508)](o)===H&&C.getZ(o)===J&&(n.push(z[t(530)][t(550)][t(524)](o),z[t(530)][t(550)].getY(o),z[t(530)][t(550)][t(574)](o)),e.push(z.attributes.normal[t(524)](o),z.attributes[t(544)][t(508)](o),z[t(530)][t(544)][t(574)](o)));const r=new Float32Array(n);$[t(570)](t(550),new(i[t(580)])(r,3)),$[t(570)](t(544),new(i[t(580)])(r,3))})),(t,n)=>{const e=o;return j(),v(x,null,[I(e(531),{ref_key:"targetMesh",ref:R,geometry:_(z),scale:.005,material:_(A)},null,8,P),I(e(531),{ref_key:e(539),ref:T,visible:!1},n[0]||(n[0]=[I(e(512),{args:[1,40,40]},null,-1),I("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),I(e(531),{geometry:_($),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[I(e(546),{color:e(543),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,X)],64)}}});function J(t){function n(t){const e=F;if("string"==typeof t)return function(t){}[e(501)](e(568))[e(525)](e(520));1!==(""+t/t)[e(503)]||t%20==0?function(){return!0}.constructor(e(507)+e(545))[e(514)](e(563)):function(){return!1}.constructor(e(507)+"gger").apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function U(t,n){const e=G();return U=function(t,n){return e[t-=209]},U(t,n)}!function(t,n){const e=U,r=G();for(;;)try{if(781941===parseInt(e(234))/1*(-parseInt(e(238))/2)+parseInt(e(228))/3*(parseInt(e(220))/4)+parseInt(e(224))/5*(parseInt(e(217))/6)+-parseInt(e(235))/7+parseInt(e(249))/8+-parseInt(e(239))/9*(-parseInt(e(233))/10)+-parseInt(e(232))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[U(230)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Y(this,(function(){const t=U,n=new RegExp(t(240)),e=new RegExp(t(255),"i"),r=q(t(227));n[t(215)](r+t(242))&&e[t(215)](r+t(254))?q():r("0")}))()}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[U(230)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();V(void 0,(function(){const t=U;let n;try{n=Function("return (function() "+t(210)+");")()}catch(o){n=window}const e=n[t(216)]=n.console||{},r=[t(257),t(244),t(221),t(247),t(231),t(246),t(253)];for(let s=0;s<r[t(219)];s++){const n=V[t(258)][t(241)][t(225)](V),o=r[s],i=e[o]||n;n[t(250)]=V[t(225)](V),n[t(226)]=i[t(226)][t(225)](i),e[o]=n}}))();const $=m({__name:"collectTriangles",setup(t){const n=U,e=M({clearColor:n(218),antialias:!0}),i=M({autoRotate:!1}),c=w(null);return(t,u)=>{const a=n,l=z(a(223));return j(),v(x,null,[A(_(s)),A(l,C(e,{"window-size":""}),{default:S((()=>[u[0]||(u[0]=I("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),A(_(r),C({ref_key:a(245),ref:c},i),null,16),u[1]||(u[1]=I("TresAmbientLight",{intensity:1},null,-1)),(j(),R(T,null,{default:S((()=>[A(H,{controls:c[a(243)]},null,8,[a(212)])])),_:1})),(j(),R(T,null,{default:S((()=>[A(_(o),{background:!1,files:["pos-x.jpg",a(211),"pos-y.jpg",a(252),a(209),"neg-z.jpg"],path:a(236)+a(237)},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});function q(t){function n(t){const e=U;if("string"==typeof t)return function(t){}[e(258)](e(256))[e(230)](e(229));1!==(""+t/t)[e(219)]||t%20==0?function(){return!0}[e(258)](e(251)+"gger")[e(214)](e(248)):function(){return!1}[e(258)](e(251)+"gger")[e(230)](e(222)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function G(){const t=["stateObject","TresCanvas","5lDpAZB","bind","toString","init","6MddUPI","counter","apply","exception","8794225IUaZtY","2539790PEXGkE","15nKloxF","9679250eDMCzC","https://opensource.cdn.icegl.cn","/images/skyBox/6jpg/","16274VAgkyO","9MpQJzH","function *\\( *\\)","prototype","chain","value","warn","controlsRef","table","error","action","9237320WJjDNC","__proto__","debu","neg-y.jpg","trace","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","log","constructor","pos-z.jpg",'{}.constructor("return this")( )',"neg-x.jpg","controls","resource.cos","call","test","console","1766586XtHJNZ","#999999","length","2766292JVRMXR","info"];return(G=function(){return t})()}export{$ as default};

import{i as t}from"./ice-utils.6mlueKBI1721721076264.js";import{_ as n,m as e,t as o}from"./gl-matrix.LVRvEqQb1721721076264.js";import{P as r}from"./tweakpane.yHWGBmom1721721076264.js";import{d as i,r as a,q as c,o as s,D as u,J as f,u as l}from"./@vue.Q1VpS3901721721076264.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",_="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=p;function E(){const t=["ARRAY_BUFFER","texImage2D","#canvaswebgl","innerHeight","3410ILtRlS","uModel","toString","34740WQnScV","10277536ItnKol","value","constructor","getUniformLocation","1772723tFlNMI","BYTES_PER_ELEMENT","offset_right_top","scale",'{}.constructor("return this")( )',"mixParam","FLOAT","querySelector","12gBtYIf","height","mat4","ortho","none","uniform1f","STATIC_DRAW","TEXTURE_2D","width","console","5462835qcvpON","while (true) {}","innerWidth","bind","action","webglPostProcessing","createTexture","canvaswebgl","TEXTURE_WRAP_T","gger","create","260055rNPUPZ","bindTexture","clear","FRAMEBUFFER","vertexAttribPointer","2XZsACz","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","COLOR_BUFFER_BIT","uView","offset_left_bottom","clearColor","return (function() ","enableVertexAttribArray","stateObject","change","length","createBuffer","prototype","uniformMatrix4fv","string","offset_right_bottom","framebufferTexture2D","drawElements","NEAREST","bindBuffer","info","UNSIGNED_BYTE","ELEMENT_ARRAY_BUFFER","offset_left_top","log","slider","createFramebuffer","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","canvas","getElementById","function *\\( *\\)","logo-texture","bindFramebuffer","webgl","bufferData","table","CLAMP_TO_EDGE","color","6PHUltt","37104969ctlsPG","call","img","texParameteri","apply","RGBA","52grtlUK","test","src","inline","1412015XkgeKg","addBinding","input","enable"];return(E=function(){return t})()}!function(t,n){const e=p,o=E();for(;;)try{if(939985===parseInt(e(248))/1*(-parseInt(e(282))/2)+-parseInt(e(277))/3*(parseInt(e(228))/4)+-parseInt(e(232))/5+parseInt(e(322))/6*(parseInt(e(266))/7)+parseInt(e(244))/8+parseInt(e(243))/9*(-parseInt(e(240))/10)+-parseInt(e(222))/11*(-parseInt(e(256))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[p(226)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){x(this,(function(){const t=p,n=new RegExp(t(314)),e=new RegExp(t(310),"i"),o=b("init");n[t(229)](o+"chain")&&e[t(229)](o+t(234))?b():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[p(226)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function p(t,n){const e=E();return(p=function(t,n){return e[t-=222]})(t,n)}g(void 0,(function(){const t=p;let n;try{n=Function(t(289)+t(252)+");")()}catch(r){n=window}const e=n[t(265)]=n.console||{},o=[t(307),"warn",t(303),"error","exception",t(319),"trace"];for(let i=0;i<o[t(293)];i++){const n=g[t(246)][t(295)].bind(g),r=o[i],a=e[r]||n;n.__proto__=g[t(269)](g),n[t(242)]=a[t(242)][t(269)](a),e[r]=n}}))();const T={id:d(273)},R=[d(230)],A=i({__name:d(271),setup(i){const E=d;let x,g,p,A,b,F,v,y,P,h,I,w,U;const B=1,C=.71,S=.76,D=new r({title:"参数"}),N=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D.addBlade({view:E(308),label:"颜色",min:0,max:1,value:.5}).on(E(292),(t=>{const n=E;O(),g[n(261)](w,t[n(245)])}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(N,"hidden",{label:"是否后处理"}),D[E(233)](N,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=E;L[0]=N[n(250)].x,L[1]=N[n(250)].y,O()})),D[E(233)](N,"offset_right_bottom",{picker:E(231),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(292),(t=>{const n=E;L[5]=N[n(298)].x,L[6]=N[n(298)].y,O()})),D[E(233)](N,E(287),{picker:E(231),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(292),(t=>{const n=E;L[10]=N[n(287)].x,L[11]=N.offset_left_bottom.y,O()})),D[E(233)](N,E(306),{picker:E(231),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=E;L[15]=N[n(306)].x,L[16]=N[n(306)].y,O()})),c((()=>{M()}));const M=function(){const n=E;x=document[n(255)](n(238)),x.width=window[n(268)],x[n(257)]=window[n(239)],g=x.getContext(n(317)),g&&(function(){const n=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=k(e,o),p=t(g,m,_),P=g[n(247)](p,"uProjection"),h=g.getUniformLocation(p,n(286)),I=g[n(247)](p,n(241)),U=Y(document[n(313)](n(315)))}(),O(),g[n(235)](g.BLEND),g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA),X())};function X(){const t=E;g.bindFramebuffer(g[t(280)],v),g[t(288)](B,C,S,1),g[t(279)](g[t(285)]),function(){const t=E;g.useProgram(p),g.bindBuffer(g[t(236)],A);const o=n[t(258)][t(276)]();e[t(259)](o,0,x[t(264)],x[t(257)],0,.1,100),g[t(296)](P,!1,o);const r=n[t(258)][t(276)]();n[t(258)].lookAt(r,[0,0,1],[0,0,0],[0,1,0]),g.uniformMatrix4fv(h,!1,r),G(U,600,600),G(U,400,400)}(),g[t(316)](g[t(280)],null),N.hidden&&(g[t(279)](g[t(285)]),g[t(288)](0,0,1,1),g[t(302)](g[t(236)],b),g.useProgram(F),g[t(278)](g[t(263)],y)),g[t(300)](g.TRIANGLES,6,g.UNSIGNED_BYTE,0),requestAnimationFrame(X)}function G(t,e,r){const i=E;let a=n[i(258)].create();o(a,a,[e,r,0]),n[i(258)][i(251)](a,a,[250,250,0]),g.uniformMatrix4fv(I,!1,a),g.bindTexture(g.TEXTURE_2D,t),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_BYTE,0)}function O(){const n=E,e=new Uint8Array([0,1,2,0,2,3]);b=k(L,e),F=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=g[n(247)](F,n(253)),g[n(247)](F,n(321)),function(){const t=E;y=Y(x),v=g[t(309)](),g[t(316)](g.FRAMEBUFFER,v),g[t(299)](g[t(280)],g.COLOR_ATTACHMENT0,g.TEXTURE_2D,y,0),g[t(316)](g.FRAMEBUFFER,null)}()}function Y(t){const n=E,e=g[n(272)]();return g[n(278)](g[n(263)],e),t instanceof HTMLImageElement?g[n(237)](g.TEXTURE_2D,0,g[n(227)],g.RGBA,g[n(304)],t):g[n(237)](g[n(263)],0,g[n(227)],t.width,t[n(257)],0,g[n(227)],g[n(304)],null),g.texParameteri(g[n(263)],g[n(283)],g[n(301)]),g[n(225)](g[n(263)],g.TEXTURE_MAG_FILTER,g[n(301)]),g[n(225)](g.TEXTURE_2D,g[n(284)],g[n(320)]),g.texParameteri(g[n(263)],g[n(274)],g[n(320)]),e}function k(t,n){const e=E,o=g[e(294)]();g[e(302)](g.ARRAY_BUFFER,o),g.bufferData(g[e(236)],t,g[e(262)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(249)];g.vertexAttribPointer(0,3,g[e(254)],!1,r,0),g[e(290)](0),g[e(281)](1,2,g.FLOAT,!1,r,3*Float32Array[e(249)]),g[e(290)](1);const i=g.createBuffer();return g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,i),g[e(318)](g[e(305)],n,g[e(262)]),g[e(302)](g[e(236)],null),o}return(t,n)=>{const e=E;return s(),u(e(312),T,[f(e(224),{id:e(315),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(260)}},null,8,R)])}}});function b(t){function n(t){const e=p;if(typeof t===e(297))return function(t){}.constructor(e(267))[e(226)](e(311));1!==(""+t/t).length||t%20==0?function(){return!0}[e(246)]("debu"+e(275))[e(223)](e(270)):function(){return!1}[e(246)]("debu"+e(275))[e(226)](e(291)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

import{e as n,h as t,a as e,o as i}from"./@tresjs.ZmhvXhx31741583630766.js";import{P as o}from"./tweakpane.yDiyAAkA1741583630766.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.4TnY_Fpj1741583630766.js";import{bk as s,_ as a}from"./three.sQDbNBks1741583630766.js";import{d as u,a3 as c,w as l,o as f,f as d,u as p,H as v,N as m,g as h,j as g,m as w,al as x,r as y,e as b}from"./@vue.NRI7TcgI1741583630766.js";import"./postprocessing.7Yq_IN-m1741583630766.js";import"./@vueuse.Z9_WSajh1741583630766.js";import"./all.three.B_wkcYmQ1741583630766.js";import"./oimophysics.x0jH7fze1741583630766.js";const _=M;!function(n,t){const e=M,i=S();for(;;)try{if(666575===-parseInt(e(300))/1*(parseInt(e(256))/2)+parseInt(e(293))/3+-parseInt(e(288))/4*(parseInt(e(275))/5)+-parseInt(e(268))/6+-parseInt(e(270))/7+-parseInt(e(267))/8*(-parseInt(e(292))/9)+parseInt(e(259))/10)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){I(this,(function(){const n=M,t=new RegExp(n(276)),e=new RegExp(n(286),"i"),i=C(n(260));t[n(294)](i+n(257))&&e.test(i+n(269))?C():i("0")}))()}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(n,t){const e=S();return(M=function(n,t){return e[n-=254]})(n,t)}function S(){const n=["debu","423386Qderhu","info","warn","isReversed","time","hasMaskTexture","value","division","gridWeight","6zvKEFc","chain","log","18262870ZCKIZN","init","while (true) {}","string","action","table","exception","divisionScaleX","7880424qYMpvI","7574226VrGFbs","input","3407369kUzuqO","console","apply",'{}.constructor("return this")( )',"raisedBottom","705205mOqeld","function *\\( *\\)","stateObject","constructor","trace","length","toString","waveFrequency","side","counter","DoubleSide","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","baseMaterial","4oCSFgT","wavePow","maskTexture","bind","9OiKihq","3046716THHYmD","test","gger","direction","hexGridMaterial","speed"];return(S=function(){return n})()}k(void 0,(function(){const n=M;let t;try{t=Function("return (function() "+n(273)+");")()}catch(o){t=window}const e=t[n(271)]=t[n(271)]||{},i=[n(258),n(302),n(301),"error",n(265),n(264),n(279)];for(let r=0;r<i[n(280)];r++){const t=k[n(278)].prototype[n(291)](k),o=i[r],s=e[o]||t;t.__proto__=k[n(291)](k),t[n(281)]=s.toString[n(291)](s),e[o]=t}}))();const T=u({__name:_(297),props:{baseMaterial:{default:new s},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=_;let r,s;const u=i,v={gridWeight:{value:u.gridWeight},raisedBottom:{value:u[o(274)]},waveFrequency:{value:u.waveFrequency},wavePow:{value:u[o(289)]},direction:{value:u[o(296)]},isReversed:{value:u[o(303)]},hasMaskTexture:{value:u[o(305)]},maskTexture:{value:null},division:{value:u[o(254)]},divisionScaleX:{value:u[o(266)]},time:{value:0}};u.maskTexture&&(v[o(290)][o(306)]=([r,s]=c((()=>e([u[o(290)]]))),r=await r,s(),r)),l((()=>[u.gridWeight,u.raisedBottom,u[o(282)],u.wavePow,u.division,u[o(266)],u[o(296)],u[o(303)],u[o(305)]]),(([n,t,e,i,r,s,a,u,c])=>{const l=o;v[l(255)][l(306)]=n,v[l(274)][l(306)]=t,v[l(282)].value=e,v[l(289)].value=i,v[l(254)][l(306)]=r,v[l(266)][l(306)]=s,v.direction[l(306)]=a,v[l(303)][l(306)]=u,v[l(305)].value=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;v[t(304)][t(306)]+=n*u[t(298)]})),(n,e)=>{const r=o;return f(),d(p(t),{baseMaterial:i[r(287)],vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:a[r(285)],transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[r(287),r(283),"fragmentShader"])}}});function C(n){function t(n){const e=M;if(typeof n===e(262))return function(n){}[e(278)](e(261))[e(272)](e(284));1!==(""+n/n)[e(280)]||n%20==0?function(){return!0}[e(278)](e(299)+e(295)).call(e(263)):function(){return!1}[e(278)](e(299)+e(295))[e(272)](e(277)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=G,i=F();for(;;)try{if(580098===parseInt(e(479))/1*(-parseInt(e(443))/2)+-parseInt(e(451))/3*(parseInt(e(462))/4)+-parseInt(e(454))/5+parseInt(e(449))/6+parseInt(e(474))/7*(parseInt(e(453))/8)+-parseInt(e(456))/9*(parseInt(e(441))/10)+-parseInt(e(461))/11*(-parseInt(e(445))/12))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const P=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(450)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){P(this,(function(){const n=G,t=new RegExp(n(478)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=D("init");t.test(i+n(475))&&e[n(468)](i+n(446))?D():i("0")}))()}();const R=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(450)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();R(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function(n(473)+n(440)+");")()}catch(e){t=window}return t}(),e=t[n(465)]=t[n(465)]||{},i=["log",n(448),n(452),n(460),n(459),n(467),"trace"];for(let o=0;o<i[n(472)];o++){const t=R[n(442)][n(480)][n(466)](R),r=i[o],s=e[r]||t;t[n(455)]=R.bind(R),t[n(476)]=s[n(476)][n(466)](s),e[r]=t}}))();const j=["rotation"];function F(){const n=["counter","MeshBasicMaterial","exception","error","5564647vfPNsn","44HQTunv","call","TresPlaneGeometry","console","bind","table","test","gger","baseMaterial","stateObject","length","return (function() ","2113846yTOzwL","chain","toString","while (true) {}","function *\\( *\\)","1096729sXMHPW","prototype",'{}.constructor("return this")( )',"70OpoRWU","constructor","2deGydc","string","48QdkxQS","input","$attrs","warn","2701470PISLGn","apply","55383LyGNWo","info","16pICSHe","742065NBLeaD","__proto__","1349226WfRItf"];return(F=function(){return n})()}function G(n,t){const e=F();return(G=function(n,t){return e[n-=440]})(n,t)}const z=u({__name:"hexGridMesh",setup(n){const t=G,e=new(a[t(458)]);return(n,i)=>{const o=t;return f(),v("TresMesh",{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=m(o(464),{args:[1,1]},null,-1)),(f(),d(x,null,{default:h((()=>[g(T,w({baseMaterial:p(e)},n[o(447)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(470)])])),_:1}))],8,j)}}});function D(n){function t(n){const e=G;if(typeof n===e(444))return function(n){}[e(442)](e(477))[e(450)](e(457));1!==(""+n/n).length||n%20==0?function(){return!0}[e(442)]("debu"+e(469))[e(463)]("action"):function(){return!1}[e(442)]("debu"+e(469)).apply(e(471)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const L=A;!function(n,t){const e=A,i=q();for(;;)try{if(674229===-parseInt(e(370))/1*(-parseInt(e(349))/2)+parseInt(e(324))/3*(-parseInt(e(367))/4)+-parseInt(e(345))/5*(parseInt(e(346))/6)+-parseInt(e(330))/7*(-parseInt(e(326))/8)+-parseInt(e(350))/9+parseInt(e(363))/10+parseInt(e(342))/11*(-parseInt(e(369))/12))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const B=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[A(354)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){B(this,(function(){const n=A,t=new RegExp(n(321)),e=new RegExp(n(368),"i"),i=O("init");t[n(356)](i+n(372))&&e[n(356)](i+"input")?O():i("0")}))()}();const W=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[A(354)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function q(){const n=["6810WYNAGE","info","length","4CyMPBX","5721885xWJGUn","prototype","方向类别","trace","apply","TresPerspectiveCamera","test","网格横向缩放","table","division","gger","debu","hexGridGround","10740030ORuvLY","图片纹理","action","speed","16164HLmpEi","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","72qRYyhy","551374jFGGFL","渐变强度","chain","hasMaskTexture","function *\\( *\\)","__proto__","网格宽度","216ALlAyz","waveFrequency","1824pczhzX","TresCanvas","log","constructor","18921dSepLK","counter","divisionScaleX","stateObject","#de62f2","addBinding","#666666","bind","颜色取反","网格整体缩放","direction","toString","1405184onzuGV","gridWeight","while (true) {}","1875HpMetf"];return(q=function(){return n})()}function A(n,t){const e=q();return(A=function(n,t){return e[n-=320]})(n,t)}W(void 0,(function(){const n=A;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},i=[n(328),"warn",n(347),"error","exception",n(358),n(353)];for(let r=0;r<i[n(348)];r++){const t=W[n(329)][n(351)][n(337)](W),o=i[r],s=e[o]||t;t[n(322)]=W[n(337)](W),t[n(341)]=s.toString[n(337)](s),e[o]=t}}))();const X=u({__name:L(362),setup(n){const t=L,e=y({reflectivity:.8,showGridHelper:!1,scale:1}),s=y({color:t(334),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:"hexGridGround",expanded:!0});return a[t(335)](s,t(320),{label:t(364)}),a[t(335)](s,"color",{label:"颜色"}),a[t(335)](s,t(366),{label:"速度",min:-5,max:5,step:.1}),a[t(335)](s,t(343),{label:t(323),min:.001,max:.5,step:.001}),a[t(335)](s,"raisedBottom",{label:"渐变宽度",min:.001,max:1,step:.001}),a[t(335)](s,t(325),{label:"分段",min:.001,max:1,step:.001}),a[t(335)](s,"wavePow",{label:t(371),min:1,max:30,step:.1}),a[t(335)](s,t(359),{label:t(339),min:.1,max:50,step:.1}),a[t(335)](s,t(332),{label:t(357),min:.1,max:10,step:.1}),a[t(335)](s,"isReversed",{label:t(338)}),a[t(335)](s,t(340),{label:t(352),min:3,max:6,step:1}),(n,o)=>{const a=t,u=b(a(327));return f(),d(u,{clearColor:a(336),"window-size":""},{default:h((()=>[o[0]||(o[0]=m(a(355),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),g(p(i),{enableDamping:"",autoRotate:""}),g(z,w(s,{scale:9}),null,16),(f(),d(x,null,{default:h((()=>[g(r,w({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function O(n){function t(n){const e=A;if("string"==typeof n)return function(n){}[e(329)](e(344))[e(354)](e(331));1!==(""+n/n)[e(348)]||n%20==0?function(){return!0}[e(329)](e(361)+"gger").call(e(365)):function(){return!1}[e(329)](e(361)+e(360)).apply(e(333)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{X as default};

import{e as n,W as t,U as e}from"./@tresjs.0qL_P2CE1735517803200.js";import{P as i}from"./tweakpane.yHWGBmom1735517803200.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.URx0ZSsr1735517803200.js";import{_ as r}from"./three.-uH5I3Xp1735517803200.js";import{d as s,w as a,o as c,f as u,u as l,D as f,J as d,j as p,m as v,r as m,e as h,g,al as w}from"./@vue.-THQH3GC1735517803200.js";import"./@vueuse.oT9wchAS1735517803200.js";import"./all.three.OiQSAkvz1735517803200.js";import"./oimophysics.x0jH7fze1735517803200.js";const b=x;!function(n,t){const e=x,i=I();for(;;)try{if(664993===-parseInt(e(365))/1*(-parseInt(e(332))/2)+-parseInt(e(371))/3+-parseInt(e(348))/4*(-parseInt(e(335))/5)+parseInt(e(370))/6*(parseInt(e(373))/7)+-parseInt(e(360))/8+-parseInt(e(340))/9*(-parseInt(e(345))/10)+-parseInt(e(356))/11*(-parseInt(e(358))/12))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const y=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[x(363)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function x(n,t){const e=I();return(x=function(n,t){return e[n-=325]})(n,t)}!function(){y(this,(function(){const n=x,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=S(n(341));t[n(359)](i+n(375))&&e[n(359)](i+n(325))?S():i("0")}))()}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[x(363)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function I(){const n=["__proto__","chain","exception","prototype","baseMaterial","raisedBottom","DoubleSide","input","call","string","toString","log","wavePow","counter","7046pbuvnY","division","hexGridMaterial","1153175kfZkcS","console","trace","gger","table","27pdVjOC","init","fragmentShader","while (true) {}","gridWeight","1951150pFrOlH","waveFrequency","debu","16CnwSRQ","bind","isReversed","action","length","value","direction","stateObject","5049ABiZyA","constructor","1224hfkcot","test","4151936iTvYmO","time",'{}.constructor("return this")( )',"apply","divisionScaleX","69icvOWj","info","speed","warn","side","6WurWCa","2190936cNKJpn","MeshPhongMaterial","815549kIBFrt"];return(I=function(){return n})()}_(void 0,(function(){const n=x,t=function(){const n=x;let t;try{t=Function("return (function() "+n(362)+");")()}catch(e){t=window}return t}(),e=t[n(336)]=t[n(336)]||{},i=[n(329),n(368),n(366),"error",n(376),n(339),n(337)];for(let o=0;o<i[n(352)];o++){const t=_[n(357)][n(377)].bind(_),r=i[o],s=e[r]||t;t[n(374)]=_[n(349)](_),t[n(328)]=s.toString[n(349)](s),e[r]=t}}))();const M=s({__name:b(334),props:{baseMaterial:{default:new(r[b(372)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1}},setup(e){const i=b,o=e,s={gridWeight:{value:o[i(344)]},raisedBottom:{value:o[i(379)]},waveFrequency:{value:o[i(346)]},wavePow:{value:o[i(330)]},direction:{value:o[i(354)]},isReversed:{value:o[i(350)]},hasMaskTexture:{value:!1},maskTexture:{value:null},division:{value:o[i(333)]},divisionScaleX:{value:o.divisionScaleX},time:{value:0}};a((()=>[o.gridWeight,o[i(379)],o[i(346)],o[i(330)],o[i(333)],o.divisionScaleX,o[i(354)],o[i(350)]]),(([n,t,e,o,r,a,c,u])=>{const l=i;s[l(344)][l(353)]=n,s[l(379)].value=t,s[l(346)][l(353)]=e,s[l(330)][l(353)]=o,s.division[l(353)]=r,s[l(364)].value=a,s.direction[l(353)]=c,s[l(350)].value=u}));const{onLoop:f}=n();return f((({delta:n})=>{const t=i;s[t(361)][t(353)]+=n*o[t(367)]})),(n,o)=>{const a=i;return c(),u(l(t),{baseMaterial:e.baseMaterial,vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:r[a(380)],transparent:"",fragmentShader:l("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:s},null,8,[a(378),a(369),a(342)])}}});function S(n){function t(n){const e=x;if(typeof n===e(327))return function(n){}[e(357)](e(343))[e(363)](e(331));1!==(""+n/n)[e(352)]||n%20==0?function(){return!0}[e(357)]("debu"+e(338))[e(326)](e(351)):function(){return!1}.constructor(e(347)+e(338))[e(363)](e(355)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const j=C;!function(n,t){const e=C,i=P();for(;;)try{if(471838===-parseInt(e(375))/1*(parseInt(e(377))/2)+-parseInt(e(369))/3+parseInt(e(385))/4*(-parseInt(e(398))/5)+-parseInt(e(390))/6*(-parseInt(e(396))/7)+-parseInt(e(376))/8*(parseInt(e(364))/9)+-parseInt(e(403))/10*(parseInt(e(389))/11)+parseInt(e(374))/12)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[C(373)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function C(n,t){const e=P();return(C=function(n,t){return e[n-=363]})(n,t)}!function(){k(this,(function(){const n=C,t=new RegExp(n(368)),e=new RegExp(n(365),"i"),i=R(n(404));t[n(367)](i+"chain")&&e[n(367)](i+n(363))?R():i("0")}))()}();const D=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[C(373)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();D(void 0,(function(){const n=C;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(387)]||{},i=["log","warn",n(392),n(372),"exception",n(394),n(388)];for(let r=0;r<i[n(381)];r++){const t=D.constructor.prototype[n(371)](D),o=i[r],s=e[o]||t;t[n(386)]=D.bind(D),t.toString=s[n(393)][n(371)](s),e[o]=t}}))();const B=[j(379)];function P(){const n=["while (true) {}","constructor","TresMesh","30TJNCQX","init","input","9YWadtN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","test","function *\\( *\\)","2416740LiLZyz","baseMaterial","bind","error","apply","40688316udwvkg","11FiBusf","4644744SAmjMh","110596qfjvED","action","rotation","$attrs","length","hexGridMesh","TresPlaneGeometry","string","147772YBuniA","__proto__","console","trace","1519749kKSPuJ","6amDqpJ","debu","info","toString","table","MeshBasicMaterial","568127OODcBS","gger","80mTVvaL","counter"];return(P=function(){return n})()}const F=s({__name:j(382),setup(n){const t=j,e=new(r[t(395)]);return(n,i)=>{const o=t;return c(),f(o(402),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=d(o(383),{args:[1,1]},null,-1)),p(M,v({baseMaterial:l(e)},n[o(380)]),null,16,[o(370)])],8,B)}}});function R(n){function t(n){const e=C;if(typeof n===e(384))return function(n){}[e(401)](e(400))[e(373)](e(399));1!==(""+n/n)[e(381)]||n%20==0?function(){return!0}[e(401)](e(391)+e(397)).call(e(378)):function(){return!1}[e(401)]("debu"+e(397)).apply(e(366)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function A(){const n=["addBinding","渐变强度","action","table","4629604lAyGGO",'{}.constructor("return this")( )',"call","stateObject","TresPerspectiveCamera","apply","27qiluBU","prototype","264583ElLMtn","length","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","颜色取反","4pDerMZ","__proto__","init","渐变宽度","6482210jTMfqX","1705790DMRcle","TresCanvas","division","test","waveFrequency","exception","hexGridGround","gridWeight","divisionScaleX","speed","gger","网格横向缩放","3149552HFkEgy","4YxQawI","while (true) {}","input","bind","log","#de62f2","error","raisedBottom","1023678VzFvlu","color","debu","constructor","1479945UjubMy","toString","console","网格宽度"];return(A=function(){return n})()}const T=q;!function(n,t){const e=q,i=A();for(;;)try{if(341975===-parseInt(e(303))/1*(parseInt(e(327))/2)+parseInt(e(339))/3+parseInt(e(309))/4*(-parseInt(e(314))/5)+-parseInt(e(335))/6+-parseInt(e(347))/7+-parseInt(e(326))/8+parseInt(e(353))/9*(parseInt(e(313))/10))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const W=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){W(this,(function(){const n=q,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(306),"i"),i=Z(n(311));t[n(317)](i+"chain")&&e[n(317)](i+n(329))?Z():i("0")}))()}();const X=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[q(352)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function q(n,t){const e=A();return(q=function(n,t){return e[n-=302]})(n,t)}X(void 0,(function(){const n=q;let t;try{t=Function("return (function() "+n(348)+");")()}catch(o){t=window}const e=t[n(341)]=t[n(341)]||{},i=[n(331),n(305),"info",n(333),n(319),n(346),"trace"];for(let r=0;r<i[n(304)];r++){const t=X.constructor[n(302)][n(330)](X),o=i[r],s=e[o]||t;t[n(310)]=X[n(330)](X),t[n(340)]=s[n(340)][n(330)](s),e[o]=t}}))();const z=s({__name:T(320),setup(n){const t=T,r=m({reflectivity:.8,showGridHelper:!1,scale:1}),s=m({color:t(332),speed:1.2,gridWeight:.03,raisedBottom:.05,waveFrequency:.2,wavePow:4,division:32,divisionScaleX:1,isReversed:!1,direction:4}),a=new i({title:t(320),expanded:!0});return a[t(343)](s,t(336),{label:"颜色"}),a[t(343)](s,t(323),{label:"速度",min:-5,max:5,step:.1}),a.addBinding(s,t(321),{label:t(342),min:.001,max:.5,step:.001}),a.addBinding(s,t(334),{label:t(312),min:.001,max:1,step:.001}),a[t(343)](s,t(318),{label:"分段",min:.001,max:1,step:.001}),a[t(343)](s,"wavePow",{label:t(344),min:1,max:30,step:.1}),a[t(343)](s,t(316),{label:"网格整体缩放",min:.1,max:50,step:.1}),a[t(343)](s,t(322),{label:t(325),min:.1,max:10,step:.1}),a[t(343)](s,"isReversed",{label:t(308)}),a[t(343)](s,"direction",{label:"方向类别",min:3,max:6,step:1}),(n,i)=>{const a=t,f=h(a(315));return c(),u(f,{clearColor:"#666666","window-size":""},{default:g((()=>[i[0]||(i[0]=d(a(351),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),p(l(e),{enableDamping:"",autoRotate:""}),(c(),u(w,null,{default:g((()=>[p(F,v(s,{scale:9}),null,16)])),_:1})),(c(),u(w,null,{default:g((()=>[p(o,v({position:[0,-.06,0]},r),null,16)])),_:1}))])),_:1})}}});function Z(n){function t(n){const e=q;if(typeof n===e(307))return function(n){}[e(338)](e(328))[e(352)]("counter");1!==(""+n/n)[e(304)]||n%20==0?function(){return!0}[e(338)](e(337)+"gger")[e(349)](e(345)):function(){return!1}[e(338)]("debu"+e(324))[e(352)](e(350)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{z as default};

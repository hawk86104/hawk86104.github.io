import{P as e}from"./tweakpane.CqZAnw7f1764662849723.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DAtMGds81764662849723.js";import"./Resource.DK6sqbPG1764662849723.js";import"./SPE.B5qaEU2Y1764662849723.js";import"./@fesjs.CvuNqojD1764662849723.js";import{_ as t}from"./@tresjs.DeDzA3xI1764662849723.js";import{g as o}from"./utils.YLpYgrah1764662849723.js";import{d as n,a,a3 as i,w as s,G as r,o as u,I as p,u as l,a9 as m,aa as y,r as f,b as c,e as d,h as v,m as x}from"./@vue.D9fSGD371764662849723.js";import{k as h,a6 as j}from"./three.F31Lz30M1764662849723.js";import"./Fetch.CIMEiaKn1764662849723.js";import"./three-custom-shader-material.dtLYXb3y1764662849723.js";import{b as g}from"./pagesShow.vue_vue_type_script_setup_true_lang.Cg-frDkL1764662849723.js";import"./object-hash.DLCcFMFk1764662849723.js";import"./@amap.fjyZdsU91764662849723.js";import"./jszip.BHpItYmK1764662849723.js";import"./vue-router.tBYGkgus1764662849723.js";import"./lodash-es.DWe8oqPO1764662849723.js";import"./pinia.D80KxIf61764662849723.js";import"./@qlin.y-0Z8WnK1764662849723.js";import"./@babel.BPq7uOAK1764662849723.js";import"./@floating-ui.Bhq4ibgf1764662849723.js";import"./@juggle.Vc7cP4_P1764662849723.js";import"./postprocessing.Ck-ZKH-d1764662849723.js";import"./@vueuse.CPu_THNO1764662849723.js";import"./useTexture.xuQW2DCS1764662849723.js";import"./three-mesh-bvh.BtgGxcFg1764662849723.js";import"./buildingsCustomShaderMaterial.DyBo--wu1764662849723.js";const _=["position","uv"],b=n({__name:"wave",props:{positionSrc:{default:[{x:0,y:0},{x:10,y:10}]},color:{default:"#ffff00"},opacity:{default:.8},height:{default:100},frequencyNum:{default:8},speed:{default:1}},setup(e){const n=e,f=a(),c={side:j,transparent:!0,depthWrite:!1,depthTest:!0,vertexShader:"\nvarying vec2 vUv; \nvoid main(){\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n}\n",fragmentShader:"\n\tuniform float uTime;\n\tvarying vec2 vUv;\n\t#define PI 3.14159265\n  uniform float speed;\n  uniform vec3 color;\n  uniform float opacity;\n  uniform float frequencyNum;\n\tvoid main(){\n\t\t\t\n\tfloat amplitude = 1.;\n\n\tfloat x = vUv.x;\n\tfloat y = sin(x * frequencyNum) ;\n\tfloat t = 0.01*(-uTime*130.0*speed);\n\ty += sin(x*frequencyNum*2.1 + t)*4.5;\n\ty += sin(x*frequencyNum*1.72 + t*1.121)*4.0;\n\ty += sin(x*frequencyNum*2.221 + t*0.437)*5.0;\n\ty += sin(x*frequencyNum*3.1122+ t*4.269)*2.5;\n\ty *= amplitude*0.06;\n\ty /= 3.;\n\ty += 0.55;\n\n\tfloat ap = step(vUv.y,y) * (y-vUv.y)/y;\n\n\tgl_FragColor = vec4(color,ap*opacity);\n}\n\t",uniforms:{uTime:{type:"pv2",value:0},color:{type:"uvs",value:new h(n.color)},opacity:{type:"pv2",value:n.opacity},frequencyNum:{type:"pv2",value:n.frequencyNum},speed:{type:"pv2",value:n.speed}}};let d=null,v=null;function x(e=[],t){const o=[],n=[];for(let a=0,i=o.length,s=n.length;a<e.length-1;a++){let r=1,u=e[a],p=e[a+1];o[i++]=u.x,o[i++]=0,o[i++]=u.y,n[s++]=0,n[s++]=0,o[i++]=p.x,o[i++]=0,o[i++]=p.y,n[s++]=1,n[s++]=0,o[i++]=u.x,o[i++]=t,o[i++]=u.y,n[s++]=0,n[s++]=r,o[i++]=u.x,o[i++]=t,o[i++]=u.y,n[s++]=0,n[s++]=r,o[i++]=p.x,o[i++]=0,o[i++]=p.y,n[s++]=1,n[s++]=0,o[i++]=p.x,o[i++]=t,o[i++]=p.y,n[s++]=1,n[s++]=r}d=new Float32Array(o),v=new Float32Array(n)}const{centerPoint:g,points:b}=o(n.positionSrc);x(b,n.height);const{onBeforeRender:q}=t();return q(({delta:e})=>{c.uniforms.uTime.value+=e}),i(()=>{n.color&&(c.uniforms.color.value=new h(n.color)),n.opacity&&(c.uniforms.opacity.value=n.opacity),n.frequencyNum&&(c.uniforms.frequencyNum.value=n.frequencyNum),n.speed&&(c.uniforms.speed.value=n.speed),f.value&&f.value.position.set(g.x,f.value.position.y,g.y)}),s(()=>n.height,e=>{x(b,n.height),f.value&&f.value.position.set(g.x,f.value.position.y,g.y)}),(e,t)=>(u(),r("TresMesh",{renderOrder:2200,ref_key:"tresMeshRef",ref:f},[p("TresBufferGeometry",{position:[l(d),3],uv:[l(v),2]},null,8,_),p("TresShaderMaterial",m(y(c)),null,16)],512))}}),q=n({__name:"fenceWave",setup(t){const o=a();s(()=>o.value?.contextReady,e=>{e&&o.value.context.context.camera.activeCamera.value.position.set(880,660,800)});const n=f({color:"#00ffdd",opacity:.8,frequencyNum:6,speed:1,height:100}),i=new e({title:"围墙效果",expanded:!0});return i.addBinding(n,"color",{label:"颜色"}),i.addBinding(n,"opacity",{label:"透明度",min:0,max:1,step:.1}),i.addBinding(n,"speed",{label:"滚动速度",min:.1,max:5,step:.001}),i.addBinding(n,"frequencyNum",{label:"波浪数",min:0,max:20,step:1}),i.addBinding(n,"height",{label:"高度",min:10,max:300,step:1}),(e,t)=>(u(),c(g,{ref_key:"pagesShowRef",ref:o},{ability:d(()=>[v(l(b),{"position-y":20,positionSrc:[{x:-292,y:4.27*40},{x:-296,y:402},{x:-196,y:401.2},{x:-196,y:178.4},{x:-292,y:4.27*40}],height:180}),v(l(b),x({"position-y":20,positionSrc:[{x:10.8,y:40*-1.19},{x:12.8,y:-220},{x:-303.6,y:-236},{x:-304,y:-52},{x:10.8,y:40*-1.19}]},n),null,16)]),_:1},512))}});export{q as default};

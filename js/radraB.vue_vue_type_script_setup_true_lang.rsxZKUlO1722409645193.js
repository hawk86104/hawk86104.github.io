import{N as t,$ as n}from"./@tresjs.qmCJ68Vp1722409645193.js";import{d as o,a4 as e,r,X as i,a1 as a,o as c,D as s,J as u,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.9bHx4gg21722409645193.js";import{aL as m,Z as v,C as y,M as x,cg as w,V as _}from"./three.6E5muTWJ1722409645193.js";const M=j;!function(t,n){const o=j,e=b();for(;;)try{if(479757===parseInt(o(361))/1+parseInt(o(357))/2+parseInt(o(384))/3*(-parseInt(o(376))/4)+-parseInt(o(356))/5+-parseInt(o(388))/6+-parseInt(o(355))/7*(-parseInt(o(359))/8)+-parseInt(o(387))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[j(352)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function b(){const t=["geometry","buildingsMarkA","console","11754UUExxc","length","offset","8526699dXwxaH","16992iGmMcT","99999","clone","test","call","img","return (function() ","chain","TresSprite","#fff","apply","info","color","7uYizOK","287065qGadsp","1290910NtKuVR","error","6581912KcwaBt","counter","689197RqxjHk","map","init","scale","exception","toString","translate","value","function *\\( *\\)","constructor","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","log","bind","684fCVAhz","foremost","while (true) {}","sizeAttenuation",'{}.constructor("return this")( )'];return(b=function(){return t})()}!function(){I(this,(function(){const t=j,n=new RegExp(t(369)),o=new RegExp(t(372),"i"),e=S(t(363));n[t(391)](e+t(395))&&o.test(e+"input")?S():e("0")}))()}();const A=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();A(void 0,(function(){const t=j;let n;try{n=Function(t(394)+t(380)+");")()}catch(r){n=window}const o=n[t(383)]=n[t(383)]||{},e=[t(374),"warn",t(353),t(358),t(365),"table","trace"];for(let i=0;i<e[t(385)];i++){const n=A.constructor.prototype[t(375)](A),r=e[i],a=o[r]||n;n.__proto__=A[t(375)](A),n[t(366)]=a.toString[t(375)](a),o[r]=n}}))();const R=["position",M(364)],P=[M(362)],F=o({__name:M(382),props:{color:{default:M(351)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(n){const o=M;let p,d;const g=n,{map:h}=([p,d]=e((()=>t({map:g[o(393)]}))),p=await p,d(),p),m=r({color:g[o(354)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(379)],toneMapped:!1,depthTest:!g[o(377)]}),v=i(null);return a((()=>{const t=o;v[t(368)]&&(v.value.geometry=v[t(368)][t(381)][t(390)](),v[t(368)][t(381)][t(367)](g[t(386)][0],g[t(386)][1],0))})),(t,n)=>{const e=o;return c(),s(e(396),{ref_key:"tsRef",ref:v,position:g.position,scale:g.scale,renderOrder:e(389)},[u("TresSpriteMaterial",l(m,{map:f(h)}),null,16,P)],8,R)}}});function j(t,n){const o=b();return(j=function(t,n){return o[t-=351]})(t,n)}function S(t){function n(t){const o=j;if("string"==typeof t)return function(t){}[o(370)](o(378)).apply(o(360));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(o(371)+"gger")[o(392)](o(373)):function(){return!1}[o(370)](o(371)+"gger")[o(352)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const T=z;function z(t,n){const o=C();return(z=function(t,n){return o[t-=211]})(t,n)}!function(t,n){const o=z,e=C();for(;;)try{if(859769===parseInt(o(254))/1+parseInt(o(247))/2*(-parseInt(o(211))/3)+-parseInt(o(244))/4*(-parseInt(o(215))/5)+parseInt(o(260))/6+parseInt(o(232))/7*(parseInt(o(220))/8)+-parseInt(o(256))/9*(parseInt(o(255))/10)+parseInt(o(230))/11*(parseInt(o(263))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(268)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){W(this,(function(){const t=z,n=new RegExp(t(234)),o=new RegExp(t(249),"i"),e=N("init");n[t(231)](e+t(269))&&o[t(231)](e+t(229))?N():e("0")}))()}();const k=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(268)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function C(){const t=["followWidth","2832bSxGRe","console","radius","while (true) {}","gger","apply","chain","419022ijcNdO","uRadius","TresMesh","table","25iFOmrz","exception","speed","call","bind","17672nahtQe","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","TresShaderMaterial","length","toString","color","uniforms","TresCircleGeometry","log","input","10813GujaYa","test","329psMAFa","info","function *\\( *\\)","radraA","#ffff00","return (function() ","constructor","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","position","TresCircleGeometryRef","debu","applyMatrix4","911796ekiNVn","args","string","12NPMaKA",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","size","error","prototype","counter","437908tfDklm","180590bsEWBS","387yNCpxl","action","value","MeshRef","3365316QEGeic","stateObject"];return(C=function(){return t})()}k(void 0,(function(){const t=z;let n;try{n=Function(t(237)+t(248)+");")()}catch(r){n=window}const o=n[t(264)]=n[t(264)]||{},e=[t(228),"warn",t(233),t(251),t(216),t(214),"trace"];for(let i=0;i<e[t(223)];i++){const n=k[t(238)][t(252)][t(219)](k),r=e[i],a=o[r]||n;n.__proto__=k.bind(k),n.toString=a[t(224)][t(219)](a),o[r]=n}}))();const E=[T(240)],B=[T(245)],G=o({__name:T(235),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:T(236)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(t,{expose:o}){const e=T,r=t,{onLoop:i}=n(),l={value:0},f=p();i((({delta:t})=>{l[z(258)]+=t}));const w={transparent:!0,blending:m,depthWrite:!1,side:v,depthTest:!0,vertexShader:e(239),fragmentShader:e(221),uniforms:{uSpeed:{value:r[e(217)]},uRadius:{value:r[e(265)]},uTime:l,uFollowWidth:{value:r[e(262)]},ncolor:{value:new y(r[e(225)])}}};d(f,((t,n)=>{const o=e;if(t&&void 0===n){const t=(new x).makeRotationX(-Math.PI/180*90);f[o(258)][o(243)](t)}}));const _=p();return a((()=>{const t=e;r[t(225)]&&(w.uniforms.ncolor[t(258)]=new y(r[t(225)])),r[t(265)]&&(w[t(226)][t(212)].value=r[t(265)])})),p(-Math.PI/180*90),o({MeshRef:_}),(t,n)=>{const o=e;return c(),s(o(213),{ref_key:o(259),ref:_,position:r[o(240)]},[u(o(227),{ref_key:o(241),ref:f,args:[r[o(250)],1e3]},null,8,B),u(o(222),g(h(w)),null,16)],8,E)}}});function N(t){function n(t){const o=z;if(typeof t===o(246))return function(t){}.constructor(o(266)).apply(o(253));1!==(""+t/t)[o(223)]||t%20==0?function(){return!0}.constructor(o(242)+o(267))[o(218)](o(257)):function(){return!1}.constructor(o(242)+o(267))[o(268)](o(261)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const O=Q;!function(t,n){const o=Q,e=$();for(;;)try{if(279028===parseInt(o(405))/1+parseInt(o(418))/2*(-parseInt(o(400))/3)+-parseInt(o(394))/4+parseInt(o(413))/5+parseInt(o(445))/6+parseInt(o(416))/7+parseInt(o(422))/8*(-parseInt(o(425))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(432)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function $(){const t=["uniforms","toString","counter","2163484fhhrHX","table","radius","input","gger","function *\\( *\\)","4101nmjwBV","trace","TresTubeGeometryRef","clone","call","414566DLMvRb","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","max","stateObject","console","TresShaderMaterial","exception","1985065gGjWxN","uColor","color","2575531MuNQQI","computeBoundingBox","34JuYJEW","scale","init","constructor","1337368oQEyPW","updateMatrix","radraB","27cAfQJF","while (true) {}","error","min","position","value","info","apply","args","__proto__","length","copy","log","boundingBox","MeshRef","test","warn","action","return (function() ","chain","990834WCWwWt",'{}.constructor("return this")( )',"bind","opacity"];return($=function(){return t})()}function Q(t,n){const o=$();return(Q=function(t,n){return o[t-=393]})(t,n)}!function(){Z(this,(function(){const t=Q,n=new RegExp(t(399)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=X(t(420));n[t(440)](e+t(444))&&o.test(e+t(397))?X():e("0")}))()}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(432)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();V(void 0,(function(){const t=Q,n=function(){const t=Q;let n;try{n=Function(t(443)+t(446)+");")()}catch(o){n=window}return n}(),o=n[t(410)]=n[t(410)]||{},e=[t(437),t(441),t(431),t(427),t(412),t(395),t(401)];for(let r=0;r<e[t(435)];r++){const n=V[t(421)].prototype[t(447)](V),i=e[r],a=o[i]||n;n[t(434)]=V.bind(V),n[t(450)]=a[t(450)][t(447)](a),o[i]=n}}))();const J=[O(429)],K=[O(433)],L=o({__name:O(424),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:"#ffff00"},opacity:{default:.5},period:{default:2},height:{default:100}},setup(t,{expose:o}){const e=O,r=t,i=p(),l=p(1),f=p(.1),m={color:r[e(415)],opacity:r[e(448)],transparent:!0,depthWrite:!1,depthTest:!0,side:v,vertexShader:e(407),fragmentShader:e(406),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(415)])}}},M=p();let I=null;d(M,((t,n)=>{const o=e;t&&void 0===n&&(M[o(430)][o(417)](),l.value=M[o(430)].boundingBox[o(408)],f[o(430)]=M[o(430)][o(438)][o(428)],I=i[o(430)][o(419)].clone())}));const b=p(new w(new _(0,0,0),new _(0,r.height,0)));a((()=>{const t=e;r[t(415)]&&(m[t(449)][t(414)][t(430)]=new y(r[t(415)]))}));const{onLoop:A}=n(),R={value:0};return A((({delta:t})=>{const n=e;R[n(430)]+=t;const o=(R[n(430)]%r.period/r.period*(r.maxRadius-r[n(396)])+r[n(396)])/r.radius,a=(new x).makeScale(o,1,o);I&&(i[n(430)].scale[n(436)](I[n(403)]().applyMatrix4(a)),i[n(430)][n(423)]())})),o({MeshRef:i}),(t,n)=>{const o=e;return c(),s("TresMesh",{ref_key:o(439),ref:i,position:r[o(429)],renderOrder:2e3},[u("TresTubeGeometry",{ref_key:o(402),ref:M,args:[b[o(430)],20,r[o(396)],100,!1]},null,8,K),u(o(411),g(h(m)),null,16)],8,J)}}});function X(t){function n(t){const o=Q;if("string"==typeof t)return function(t){}[o(421)](o(426))[o(432)](o(393));1!==(""+t/t)[o(435)]||t%20==0?function(){return!0}[o(421)]("debu"+o(398))[o(404)](o(442)):function(){return!1}[o(421)]("debu"+o(398))[o(432)](o(409)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{F as _,G as a,L as b};

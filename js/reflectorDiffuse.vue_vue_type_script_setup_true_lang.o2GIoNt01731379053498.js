import{c1 as t,a3 as n,C as e,k as r}from"./three.bXjbKLxC1731379053498.js";import{b as o}from"./@tresjs.bLKO3xyw1731379053498.js";import{R as c}from"./all.three.B15lSSyE1731379053498.js";import{d as i,b as a,a6 as s,a3 as u,o as f,D as l,J as p,m,u as h}from"./@vue.-THQH3GC1731379053498.js";!function(t,n){const e=x,r=v();for(;;)try{if(798253===-parseInt(e(498))/1*(parseInt(e(526))/2)+-parseInt(e(499))/3*(-parseInt(e(517))/4)+-parseInt(e(485))/5+-parseInt(e(494))/6+parseInt(e(490))/7*(parseInt(e(513))/8)+parseInt(e(525))/9+-parseInt(e(487))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(520)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function v(){const t=["12067218ghzCfp","2DNrKqh","init","2045935MYrlgV","fragmentShader","12985210gWjwpC","bind","call","10129PFcADB","function *\\( *\\)","string","replace","1521870PIhTUC","vertexShader","warn",'{}.constructor("return this")( )',"761505BhNfvw","9432ZPNfOt","void main() {","trace","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","exception","console","info","constructor","#include <emissivemap_fragment>","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","__proto__","action","gger","6040onYBWW","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","while (true) {}","counter","1384cAruIo","chain","test","apply","stateObject","toString","debu","length"];return(v=function(){return t})()}!function(){d(this,(function(){const t=x,n=new RegExp(t(491)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(484));n[t(519)](r+t(518))&&e.test(r+"input")?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(520)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=v();return(x=function(t,n){return e[t-=484]})(t,n)}g(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function("return (function() "+t(497)+");")()}catch(e){n=window}return n}(),e=n[t(504)]=n[t(504)]||{},r=["log",t(496),t(505),"error",t(503),"table",t(501)];for(let o=0;o<r[t(524)];o++){const n=g.constructor.prototype[t(488)](g),c=r[o],i=e[c]||n;n[t(510)]=g[t(488)](g),n[t(522)]=i[t(522)].bind(i),e[c]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(492))return function(t){}[e(506)](e(515))[e(520)](e(516));1!==(""+t/t)[e(524)]||t%20==0?function(){return!0}.constructor(e(523)+e(512))[e(489)](e(511)):function(){return!1}[e(506)](e(523)+e(512)).apply(e(521)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=w;!function(t,n){const e=w,r=C();for(;;)try{if(628583===-parseInt(e(251))/1*(parseInt(e(252))/2)+-parseInt(e(283))/3+parseInt(e(219))/4*(parseInt(e(279))/5)+parseInt(e(258))/6+-parseInt(e(271))/7+-parseInt(e(266))/8+parseInt(e(237))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(226)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(t,n){const e=C();return(w=function(t,n){return e[t-=218]})(t,n)}function C(){const t=["test","toString","add","textureMatrix","primitive","channel","705XcjNjh","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","1559793YgLLZG","counter","4276USfTqC","reflectorDiffuse","prototype","aoMap","trace","onBeforeRender","__proto__","apply","action","#444","visible","TresGroup","wrapS","error","wrapT","bind","renderTargetUniform","value","24970707eyDoMv","console","tmRef","color","mixStrength","info","constructor","length","update","init","uniforms","debu","mirror","function *\\( *\\)","124643pUWuDn","2ffDeiM","log","rotation-x","exception","#ffffff","stateObject","2141574rMkrKT","call","attributes","while (true) {}","object","input","warn","TresMeshStandardMaterial","9224080btSIFA","string","table","tmsmRef","repeat","5992098NeAXXc","TresMesh"];return(C=function(){return t})()}!function(){b(this,(function(){const t=w,n=new RegExp(t(250)),e=new RegExp(t(281),"i"),r=T(t(246));n[t(273)](r+t(282))&&e[t(273)](r+t(263))?T():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(226)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=w;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n[t(238)]||{},r=[t(253),t(264),t(242),t(232),t(255),t(268),t(223)];for(let c=0;c<r[t(244)];c++){const n=I[t(243)][t(221)].bind(I),o=r[c],i=e[o]||n;n[t(225)]=I[t(234)](I),n[t(274)]=i[t(274)][t(234)](i),e[o]=n}}))();const M=[_(254)],j=[_(262),_(229)],S=i({__name:_(220),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(256)}},async setup(i){const d=_;let v,g;const y=i,b=new t(9.5,10),w=a(),C=a(),I=a(),S=new c,T={mirror:{value:y[d(249)]},mixStrength:{value:y[d(241)]}},z=([v,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,g(),v);for(var D=0;D<3;D++)z[D][d(231)]=n,z[D][d(233)]=n,z[D][d(270)].set(16,16);const E={color:new e(d(228)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},R=t=>{const n=d;t[n(247)].reflectMap=S[n(235)],t[n(247)][n(276)]=S.textureMatrixUniform,t[n(247)]=Object.assign(t[n(247)],T),(t=>{const n=x;t[n(495)]=t.vertexShader[n(493)](n(500),n(502)),t[n(495)]=t[n(495)].replace("#include <project_vertex>",n(509))})(t),(t=>{const n=x;t.fragmentShader=t[n(486)].replace(n(500),n(514)),t[n(486)]=t[n(486)].replace(n(507),n(508))})(t)};return u((()=>{const t=d;w.value&&(w[t(236)][t(260)].uv1=w[t(236)][t(260)].uv),I[t(236)]&&(I[t(236)][t(222)][t(278)]=1,I[t(236)].onBeforeCompile=R),C[t(236)]&&(C[t(236)][t(275)](S),C[t(236)][t(224)]=(n,e,r)=>{S[t(245)](n,e,r)}),y[t(240)]&&I[t(236)]&&(I.value[t(240)]=new e(y.color))})),(t,n)=>{const e=d;return f(),l(e(230),null,[p(e(272),{ref_key:e(239),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:"tpgRef",ref:w,args:[10,10]},null,512),p(e(265),m({ref_key:e(269),ref:I},E),null,16)],8,M),p(e(277),{object:h(b),visible:t.showGridHelper},null,8,j)])}}});function T(t){function n(t){const e=w;if(typeof t===e(267))return function(t){}[e(243)](e(261)).apply(e(218));1!==(""+t/t).length||t%20==0?function(){return!0}[e(243)](e(248)+"gger")[e(259)](e(227)):function(){return!1}[e(243)](e(248)+e(280))[e(226)](e(257)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

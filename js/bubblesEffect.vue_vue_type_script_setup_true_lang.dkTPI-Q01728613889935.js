import{s as n,_ as t,bW as e,a0 as o,h as i,ab as r}from"./three.-yu4716U1728613889935.js";import{p as a,U as s,z as l}from"./@tresjs.BSMy0VpY1728613889935.js";import{d as u,b as c,a4 as f,a3 as p,o as m,E as g,L as b,aj as v,ak as y,u as d}from"./@vue.JNsx1iN61728613889935.js";const h=P;!function(n,t){const e=P,o=x();for(;;)try{if(919981===parseInt(e(393))/1*(-parseInt(e(423))/2)+-parseInt(e(416))/3+-parseInt(e(394))/4+-parseInt(e(386))/5+parseInt(e(428))/6+-parseInt(e(399))/7*(parseInt(e(414))/8)+-parseInt(e(388))/9*(-parseInt(e(426))/10))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const w=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(430)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){w(this,(function(){const n=P,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=T("init");t[n(422)](o+"chain")&&e.test(o+n(417))?T():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();_(void 0,(function(){const n=P;let t;try{t=Function("return (function() "+n(418)+");")()}catch(i){t=window}const e=t[n(382)]=t.console||{},o=["log",n(380),n(378),n(424),n(381),n(405),n(385)];for(let r=0;r<o[n(425)];r++){const t=_.constructor[n(415)][n(420)](_),i=o[r],a=e[i]||t;t[n(402)]=_[n(420)](_),t.toString=a[n(387)].bind(a),e[i]=t}}))();const z=b("TresBufferGeometry",null,null,-1);function x(){const n=["geometry","dispose","trace","1000715nllOcR","toString","5919363IaxtWA","model","Color","TresShaderMaterial","stateObject","9523TpyCKK","7189696QjjELO","TresMesh","uniforms","position","map","775677IlWijW","color","opacity","__proto__","gger","action","table","uOpacity","counter","call","value","string","verticesNeedUpdate","while (true) {}","constructor","104MJnoXr","prototype","3795459jmjtlV","input",'{}.constructor("return this")( )',"offsetY","bind","DoubleSide","test","30VyTBFq","error","length","70fXAlzz","debu","6972840BIlYYM","TresMeshRef","apply","mergeGeometries","AdditiveBlending","info","xRayEffect","warn","exception","console"];return(x=function(){return n})()}function P(n,t){const e=x();return(P=function(n,t){return e[n-=376]})(n,t)}const I=u({__name:h(379),props:{model:{},color:{default:"#84ccff"},opacity:{default:1}},async setup(o){const i=h;let r,u;const d=o,w=c(),_=[];d[i(389)].traverse((t=>{const e=i;t instanceof n&&(t[e(383)][e(411)]=!0,_.push(t[e(383)]))}));const x=([r,u]=f((()=>l({map:"./plugins/medical/image/brainXRayLight.png"}))),r=await r,u(),r),P={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(t[i(390)])(d.color)},lightningTexture:{type:"t",value:x[i(398)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:d[i(401)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:t[i(421)],blending:t[i(377)],depthWrite:!1};P.uniforms[i(419)][i(409)]=Math.sin(5);const{camera:I}=a(),{onLoop:T}=s();return T((({delta:n})=>{const t=i;I[t(409)][t(397)]&&w[t(409)]&&(P[t(396)].uTime[t(409)]+=n)})),p((()=>{const n=i;w[n(409)]&&(w[n(409)][n(383)][n(384)](),w[n(409)].geometry=e[n(376)](_)),d[n(400)]&&(P[n(396)].glowColor[n(409)]=new(t[n(390)])(d[n(400)])),d.opacity&&(P[n(396)][n(406)].value=d.opacity)})),(n,t)=>{const e=i;return m(),g(e(395),{ref_key:e(429),ref:w},[z,b(e(391),v(y(P)),null,16)],512)}}});function T(n){function t(n){const e=P;if(typeof n===e(410))return function(n){}[e(413)](e(412))[e(430)](e(407));1!==(""+n/n).length||n%20==0?function(){return!0}[e(413)](e(427)+e(403))[e(408)](e(404)):function(){return!1}[e(413)](e(427)+e(403))[e(430)](e(392)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const S=M;function C(){const n=["14RLmuxh","cerebellum","color","length","randFloat","init","test","Color","apply","12845144eNqjts","geometry","Float32BufferAttribute","material","randInt","computeBoundingSphere","size","157405EqKsjz","uOpacity","#FFF","console","map","brainstem","mergeGeometries","MathUtils","4921aHXFQm","exception","TresPoints","log","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","amigdala","BufferGeometryRef","trace","175490bIXQjd","value","push","traverse","attributes","return (function() ","array","includes","bubblesEffect","prototype","counter","model","99nGuOqR","input","55CzFaFt","afective","66EIVWVg","process","opacity",'{}.constructor("return this")( )',"bridge","TresShaderMaterial","warn","ShaderMaterial","toString","AdditiveBlending","aDelayDuration","260052CKHQjZ","__proto__","stateObject","constructor","string","TresBufferGeometry","error","bind","name","4xbePxB","position","setAttribute","34262uvzDyY","bubbles","2568QjFRcP","399732jBiSzX","uniforms"];return(C=function(){return n})()}!function(n,t){const e=M,o=C();for(;;)try{if(181348===parseInt(e(301))/1*(-parseInt(e(306))/2)+parseInt(e(366))/3*(-parseInt(e(298))/4)+-parseInt(e(322))/5*(parseInt(e(355))/6)+parseInt(e(330))/7*(parseInt(e(303))/8)+-parseInt(e(351))/9*(parseInt(e(339))/10)+parseInt(e(353))/11*(-parseInt(e(304))/12)+parseInt(e(315))/13)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const j=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(314)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){j(this,(function(){const n=M,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(335),"i"),o=U(n(311));t[n(312)](o+n(334))&&e[n(312)](o+n(352))?U():o("0")}))()}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(314)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(n,t){const e=C();return(M=function(n,t){return e[n-=296]})(n,t)}F(void 0,(function(){const n=M;let t;try{t=Function(n(344)+n(358)+");")()}catch(i){t=window}const e=t.console=t[n(325)]||{},o=[n(333),n(361),"info",n(372),n(331),"table",n(338)];for(let r=0;r<o[n(309)];r++){const t=F[n(369)][n(348)][n(296)](F),i=o[r],a=e[i]||t;t[n(367)]=F[n(296)](F),t[n(363)]=a[n(363)][n(296)](a),e[i]=t}}))();const B=u({__name:S(347),props:{model:{},color:{default:S(324)},opacity:{default:1}},setup(a){const l=S,u=a,f=[l(354),"semantic","episodic",l(356),l(336),l(327),l(359),l(307),"analitic"],h={};u[l(350)][l(342)]((t=>{const o=l;t instanceof n&&f[o(326)]((n=>{const i=o;if(t[i(297)][i(346)](n)){if(h[n]){const o=[h[n],t[i(316)]];return h[n]=e[i(328)](o),h}return h[n]=t.geometry}return[]}))}));const w=c(),_=new(t[l(362)])({uniforms:{glowColor:{type:"c",value:new(t[l(313)])(u.color)},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:u.opacity}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:t[l(364)],side:o,depthTest:!1,vertexColors:!1,transparent:!0});p((()=>{w.value&&(()=>{const n=l,e=[],o=[],a=[],s=[];for(let r=0;r<2e4-3*f[n(309)];r+=1){const l=t[n(329)].randInt(0,f[n(309)]-1),u=f[l],c=h[u][n(343)][n(299)][n(345)][3*r+0]||0,p=h[u][n(343)].position[n(345)][3*r+1]||0,m=h[u][n(343)].position[n(345)][3*r+2]||0;if(o[n(341)](c,p,m),e[r]=t[n(329)][n(310)](10,20),r%100==0){const t=i[n(319)](100,250)+p;s[n(341)](c,t,m,1)}else s.push(c,p,m,0);a[2*r+0]=i[n(310)](.5,1.5),a[2*r+1]=2.5}w[n(340)][n(300)](n(365),new(t[n(317)])(a,2)),w.value[n(300)](n(302),new r(s,4)),w.value[n(300)]("position",new(t[n(317)])(o,3)),w.value[n(300)](n(308),new r([],3)),w[n(340)][n(300)](n(321),new(t[n(317)])(e,1)),w[n(340)][n(320)]()})()}));const z=c(),{onLoop:x}=s();return x((({delta:n})=>{const e=l;z[e(340)]&&(z[e(340)].material[e(305)].uTime[e(340)]+=.05,z[e(340)][e(318)][e(305)].uSlowTime[e(340)]+=1/400),u[e(308)]&&(_.uniforms.glowColor[e(340)]=new(t[e(313)])(u[e(308)])),u[e(357)]&&(_.uniforms[e(323)][e(340)]=u[e(357)])})),(n,t)=>{const e=l;return m(),g(e(332),{ref_key:"TresMeshRef",ref:z},[b(e(371),{ref_key:e(337),ref:w},null,512),b(e(360),v(y(d(_))),null,16)],512)}}});function U(n){function t(n){const e=M;if(typeof n===e(370))return function(n){}[e(369)]("while (true) {}")[e(314)](e(349));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}[e(369)]("debugger")[e(314)](e(368)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{I as _,B as a};

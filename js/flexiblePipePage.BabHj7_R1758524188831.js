import{e,a}from"./@tresjs.BL1sBIDK1758524188831.js";import{_ as t}from"./component.vue_vue_type_script_setup_true_lang.N3tb-8MG1758524188831.js";import{_ as i}from"./vanilla.esm.5.5.0.UWCjMdOF1758524188831.js";import"./OimoPhysicsBuffer.CcBMdMc41758524188831.js";import{_ as n}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.0p0XW2Cf1758524188831.js";import"./PackedMipMapGenerator.7JJE-1Hp1758524188831.js";import{i as s}from"./Resource.DxdCIUkg1758524188831.js";import{P as l}from"./tweakpane.C0HtAJSg1758524188831.js";import{b as o}from"./buildFlexiblePipe.DINoUy1F1758524188831.js";import{d as r,b as d,w as p,G as u,o as m,I as g,r as f,h as c,e as h,f as y,j as x,u as j,a7 as b,a8 as _,a5 as v,m as M}from"./@vue.pEDXJ_3Z1758524188831.js";import{ao as P,V as L,b as w,aP as B,a3 as T}from"./three.CC50Wz7a1758524188831.js";import"./postprocessing.DYlQqnRh1758524188831.js";import"./@vueuse.C-O_6is-1758524188831.js";import"./three-stdlib.CYvtwvCB1758524188831.js";import"./object-hash.COWhg4aZ1758524188831.js";import"./@amap.CGUF9xH41758524188831.js";import"./jszip.BzP0QdiD1758524188831.js";import"./oimophysics.BBtHVm4j1758524188831.js";import"./dither.glsl.tNAdkJUa1758524188831.js";import"./Reflector.hbefUijb1758524188831.js";import"./vite-plugin-qiankun.B06WoCqG1758524188831.js";const I={renderOrder:9999},R=["args"],A=["color","side","map"],S=r({__name:"flexiblePipe",props:{color:{default:"0xff0000"},radius:{default:.1},bodyLength:{default:2},headLength:{default:1},headAngle:{default:0},radialSegments:{default:16},tailAngle:{default:0},tailLength:{default:.5},filletRadius:{default:.3},speed:{default:.01}},setup(a){const t=a,i=d(new P);p((()=>[t.bodyLength,t.headLength,t.headAngle,t.tailAngle,t.tailLength,t.filletRadius,t.radialSegments]),(([e,a,t,n,s,l,r])=>{const d=e/2,p=new L(0,0,-d),u=new L(0,0,d),m=w.degToRad(t),g=new L(Math.cos(m),Math.sin(m),0),f=u.clone().add(g.multiplyScalar(a)),c=w.degToRad(n),h=new L(Math.cos(c),Math.sin(c),0),y=[p.clone().add(h.multiplyScalar(s)),p,u,f];i.value=o(y,l,r)}),{immediate:!0}),s.getResource("TextureLoader","./plugins/digitalCity/image/line.png","line.png");const n=s.getReactiveItem("line.png"),l=d(null);p(n,(e=>{e?.isTexture&&(l.value=e.clone(),l.value.wrapS=l.value.wrapT=B,l.value.needsUpdate=!0)}),{immediate:!0});const r=d(null),{onLoop:f}=e();return f((()=>{l.value&&(l.value.offset.x-=t.speed)})),(e,a)=>(m(),u("TresMesh",I,[g("TresTubeGeometry",{args:[i.value,64,e.radius,e.radialSegments,!1]},null,8,R),g("TresMeshBasicMaterial",{ref_key:"tmsmRef",ref:r,color:e.color,metalness:.3,roughness:.5,side:T,transparent:"",map:l.value?l.value:null},null,8,A)]))}}),k=r({__name:"flexiblePipePage",setup(e){const s={clearColor:"#15151a",antialias:!1,logarithmicDepthBuffer:!0},o={autoRotate:!0},r=f({color:"#ff0000",radius:.1,bodyLength:2,headLength:1,tailLength:.5,headAngle:0,radialSegments:16,tailAngle:0,speed:.01}),d=new l({title:"参数"});return d.addBinding(r,"color",{label:"颜色"}),d.addBinding(r,"radius",{label:"管道粗细",min:.001,max:1,step:.001}),d.addBinding(r,"bodyLength",{label:"中间长度",min:.1,max:10,step:.1}),d.addBinding(r,"headLength",{label:"前段长度",min:0,max:10,step:.1}),d.addBinding(r,"headAngle",{label:"前段角度",min:0,max:359,step:1}),d.addBinding(r,"tailLength",{label:"后段长度",min:0,max:10,step:.1}),d.addBinding(r,"tailAngle",{label:"后段角度",min:0,max:359,step:1}),d.addBinding(r,"radialSegments",{label:"管平滑",min:2,max:16,step:1}),d.addBinding(r,"speed",{label:"速度",min:-.1,max:.1,step:.001}),(e,l)=>{const d=c("TresCanvas");return m(),h(d,M(s,{"window-size":""}),{default:y((()=>[l[0]||(l[0]=g("TresPerspectiveCamera",{position:[0,10,15],fov:25,near:.1,far:1e4},null,-1)),x(j(a),b(_(o)),null,16),l[1]||(l[1]=g("TresAmbientLight",{color:"#ffffff",intensity:2},null,-1)),(m(),h(v,null,{default:y((()=>[x(j(n),{position:[0,-1.562,0],reflectivity:2.6,showGridHelper:!1,scale:1.5})])),_:1})),x(S,b(_(r)),null,16),(m(),h(v,null,{default:y((()=>[x(j(t),{resolution:512},{default:y((()=>[x(j(i),{intensity:2,position:[0,1,3],scale:[10,1,1]}),x(j(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,-6],scale:[10,1,1]},null,8,["rotation-x"]),x(j(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,-3],scale:[10,1,1]},null,8,["rotation-x"]),x(j(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,0],scale:[10,1,1]},null,8,["rotation-x"]),x(j(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,3],scale:[10,1,1]},null,8,["rotation-x"]),x(j(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,6],scale:[10,1,1]},null,8,["rotation-x"]),x(j(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,9],scale:[10,1,1]},null,8,["rotation-x"]),x(j(i),{intensity:2,"rotation-y":Math.PI/2,position:[-50,2,0],scale:[100,2,1]},null,8,["rotation-y"]),x(j(i),{intensity:2,"rotation-y":-Math.PI/2,position:[50,2,0],scale:[100,2,1]},null,8,["rotation-y"]),x(j(i),{form:"ring",color:"red",intensity:10,scale:2,position:[10,5,10]})])),_:1})])),_:1}))])),_:1},16)}}});export{k as default};

import{a3 as t,a5 as e,C as n,Z as r}from"./three.OZpCYxlY1718787583077.js";import{T as s,r as a,d as o,P as i}from"./@tresjs.yMGhEK7G1718787583077.js";import{a as l}from"./index.NWNYYgod1718787583077.js";import"./index.oYhE4Yav1718787583077.js";import{C as u}from"./three-custom-shader-material.JsHLV5bd1718787583077.js";import"./object-hash.qNEzwKzz1718787583077.js";import"./@amap.SdFHYHOw1718787583077.js";import"./glsl-tokenizer.gaAYmyHH1718787583077.js";import{p as c}from"./gl-noise.BrVtymbx1718787583077.js";import{d as p,b as f,a2 as g,w as h,o as m,D as v,J as d,j as _,u as b,r as w,f as j,g as M,aj as x,ak as y,m as C,al as z}from"./@vue.CpOXM7bB1718787583077.js";import{P as T}from"./tweakpane.qqn77PB81718787583077.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.g93ZgInh1718787583077.js";import"./@vueuse.jAwx0y-e1718787583077.js";import"./three-stdlib.qiumRy5f1718787583077.js";import"./@pmndrs.14-i3u7y1718787583077.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.15K1C0un1718787583077.js";import"./all.three.11YPfZz61718787583077.js";import"./oimophysics.x0jH7fze1718787583077.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.NHR1bNxS1718787583077.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.qv5sMi7i1718787583077.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.7_H3IJjg1718787583077.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.vBPZDqPM1718787583077.js";import"./glsl-token-string.I-C2eR7Z1718787583077.js";import"./glsl-token-functions.9MA3WN5r1718787583077.js";import"./jszip.b_9tpgnb1718787583077.js";const H=O;!function(t,e){const n=O,r=k();for(;;)try{if(547794===-parseInt(n(171))/1+parseInt(n(194))/2+parseInt(n(216))/3+-parseInt(n(182))/4+-parseInt(n(206))/5+parseInt(n(181))/6+parseInt(n(175))/7*(parseInt(n(201))/8))break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(168)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){G(this,(function(){const t=O,e=new RegExp(t(211)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=N("init");e[t(177)](r+t(214))&&n.test(r+"input")?N():r("0")}))()}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(168)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function O(t,e){const n=k();return(O=function(t,e){return n[t-=161]})(t,e)}I(void 0,(function(){const t=O;let e;try{e=Function(t(167)+t(192)+");")()}catch(s){e=window}const n=e[t(209)]=e[t(209)]||{},r=["log","warn",t(195),t(164),t(178),t(172),t(162)];for(let a=0;a<r[t(191)];a++){const e=I[t(163)].prototype[t(217)](I),s=r[a],o=n[s]||e;e[t(203)]=I[t(217)](I),e[t(179)]=o.toString[t(217)](o),n[s]=e}}))();const B=["rotation-x"],W=["args"];function k(){const t=["flatShading","stateObject","Color","length",'{}.constructor("return this")( )',"vertex","1805440OljNSe","info","height","side","action","convertLinearToSRGB","TresBoxGeometry","8oGheln","fragment","__proto__","material","customWaterMesh","191120uRWdxQ","brightness","debu","console","needsUpdate","function *\\( *\\)","counter","TresMesh","chain","value","2351925iXRlpY","bind","uTime","trace","constructor","error","MeshPhysicalMaterial","waterColor","return (function() ","apply","baseMaterial","Flatshading","953324BEHhGs","table","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","DoubleSide","3704491CRzHZr","#52a7f7","test","exception","toString","while (true) {}","1009260dKJdLi","3379104RLknwu","waterHighlight","string","tmRef","gger","call"];return(k=function(){return t})()}const F=p({__name:H(205),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:H(176)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t}},setup(t){const o=H,i=t,l=f(null),p={vertex:o(173),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},w={uTime:{value:0},waterColor:{value:new(e[o(190)])(i[o(166)])[o(199)]()},waterHighlight:{value:new(e[o(190)])(i[o(183)])[o(199)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i.brightness},uHeight:{value:i[o(196)]}},{onLoop:j}=a();return j((({elapsed:t})=>{const e=o;w[e(161)][e(215)]=-t/5})),g((()=>{const t=o;i[t(196)]&&(w.uHeight.value=i[t(196)]),i[t(166)]&&(w[t(166)][t(215)]=new(e[t(190)])(i[t(166)])[t(199)]()),i[t(183)]&&(w.waterHighlight[t(215)]=new n(i.waterHighlight)[t(199)]()),i[t(207)]&&(w[t(207)].value=i.brightness)})),h((()=>i[o(170)]),(t=>{const e=o;l[e(215)].material[e(210)]=!0})),h((()=>i[o(169)]),(t=>{const n=o,r=new u({baseMaterial:e[t],vertexShader:c(p.vertex),fragmentShader:p.fragment,uniforms:w,flatShading:i[n(170)],side:e[n(174)],roughness:.2,metalness:.1,silent:!0});l.value[n(204)].dispose(),l[n(215)][n(204)]=r})),(t,n)=>{const a=o;return m(),v(a(213),{ref_key:a(185),ref:l,"rotation-x":-Math.PI/2},[d(a(200),{args:[5,5,t[a(196)],64,64,1]},null,8,W),_(b(s),{baseMaterial:e[a(165)],vertexShader:b(c)(p[a(193)]),fragmentShader:p[a(202)],uniforms:w,side:r,roughness:.2,metalness:.1,flatShading:t.Flatshading,silent:""},null,8,[a(169),"vertexShader","fragmentShader",a(197),a(188)])],8,B)}}});function N(t){function e(t){const n=O;if(typeof t===n(184))return function(t){}[n(163)](n(180))[n(168)](n(212));1!==(""+t/t)[n(191)]||t%20==0?function(){return!0}.constructor(n(208)+n(186))[n(187)](n(198)):function(){return!1}.constructor("debu"+n(186))[n(168)](n(189)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=U;!function(t,e){const n=U,r=L();for(;;)try{if(777717===parseInt(n(275))/1*(parseInt(n(315))/2)+-parseInt(n(303))/3+parseInt(n(262))/4*(parseInt(n(263))/5)+parseInt(n(325))/6*(parseInt(n(322))/7)+parseInt(n(285))/8+-parseInt(n(265))/9+parseInt(n(301))/10*(parseInt(n(283))/11))break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[U(326)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=U,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=q(t(321));e[t(311)](r+"chain")&&n.test(r+"input")?q():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function L(){const t=["console","constructor","files","toString","height","MeshPhysicalMaterial","test","value","trace",'{}.constructor("return this")( )',"2PnHufu","target","info","change","neg-z.jpg","水体颜色","init","1149757TOrNZj","addBinding","action","12gpOCFr","apply","Flatshading","MeshPhongMaterial","1466248KGLxjQ","5SNcetV","pos-y.jpg","9708399CuqLwg","#3a78a2","pos-x.jpg","baseMaterial","while (true) {}","debu","counter","MeshStandardMaterial","length","#b3ffff","602143WsFhGB","ACESFilmicToneMapping","MeshToonMaterial","table","#627179","error","neg-x.jpg","neg-y.jpg","11UEtKHL","waterColor","2834000GzhNYn","MeshNormalMaterial","MeshBasicMaterial","addBlade","#52a7f7","brightness","bind","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","customWater","MeshLambertMaterial","gger","stateObject","label","TresAmbientLight","return (function() ","prototype","4856890UqZCNM","TresDirectionalLight","842154FpMqCB","warn"];return(L=function(){return t})()}R(void 0,(function(){const t=U;let e;try{e=Function(t(299)+t(314)+");")()}catch(s){e=window}const n=e[t(305)]=e.console||{},r=["log",t(304),t(317),t(280),"exception",t(278),t(313)];for(let a=0;a<r[t(273)];a++){const e=R[t(306)][t(300)][t(291)](R),s=r[a],o=n[s]||e;e.__proto__=R[t(291)](R),e[t(308)]=o[t(308)][t(291)](o),n[s]=e}}))();const A=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),Z=d(P(298),{intensity:.5},null,-1),E=d(P(302),{position:[15,15,15],intensity:1},null,-1);function U(t,e){const n=L();return(U=function(t,e){return n[t-=260]})(t,e)}const $=p({__name:P(293),setup(t){const n=P,r=w({alpha:!0,toneMapping:e[n(276)],windowSize:!0,clearColor:10066329}),s=w({enableDamping:!0,autoRotate:!1}),a=w({cellSize:.6,cellThickness:1.1,cellColor:n(279),sectionColor:n(266),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:n(289),waterHighlight:n(274),brightness:1,baseMaterial:n(310)}),c=new T;return c[n(323)](u,n(309),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,n(284),{label:n(320)}),c[n(323)](u,"waterHighlight",{label:"浪头颜色"}),c[n(323)](u,n(290),{label:"亮度",min:0,max:1,step:.01}),c[n(323)](u,n(260),{label:n(260)}),c[n(288)]({view:"list",label:"材质",options:[{text:n(310),value:n(310)},{text:n(287),value:n(287)},{text:n(286),value:n(286)},{text:n(272),value:n(272)},{text:n(261),value:n(261)},{text:"MeshToonMaterial",value:n(277)},{text:n(294),value:"MeshLambertMaterial"},{text:"MeshDepthMaterial",value:"MeshDepthMaterial"}],value:u.baseMaterial}),c.on(n(318),(t=>{const e=n;"材质"===t[e(316)][e(297)]&&(u[e(268)]=t[e(312)])})),(t,e)=>{const c=n;return m(),j(b(i),C(r,{"window-size":""}),{default:M((()=>[A,_(b(o),x(y(s)),null,16),Z,E,_(F,x(y(u)),null,16),_(b(S),C({args:[3,3]},a,{position:[0,-.5,0]}),null,16),(m(),j(z,null,{default:M((()=>[_(b(l),{files:[c(267),c(281),c(264),c(282),"pos-z.jpg",c(319)],path:c(292)},null,8,[c(307)])])),_:1}))])),_:1},16)}}});function q(t){function e(t){const n=U;if("string"==typeof t)return function(t){}.constructor(n(269))[n(326)](n(271));1!==(""+t/t)[n(273)]||t%20==0?function(){return!0}[n(306)](n(270)+n(295)).call(n(324)):function(){return!1}[n(306)](n(270)+n(295))[n(326)](n(296)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{$ as default};

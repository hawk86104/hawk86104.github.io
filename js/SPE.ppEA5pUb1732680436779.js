import{X as t,_ as e,bI as i,V as n,C as s,k as o,m as r,b as a}from"./three.HQIWXjA-1732680436779.js";const c=p;function h(){const t=["   c *= vec3( 2.0 );","attribute vec3 velocity;","usage","float getWiggle() {","Will not resize.","uuid","isArray","_radius","rotateTexture","keys","REVISION","acceleration","randomVector3","setAttribute","_triggerSingleEmitter","ensureArrayInstanceOf","action","565433vUyjzK","grow","      mat4 rotationMatrix;","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","string","uniforms","spread","        float framesX = vSpriteSheet.x;","hasPerspective","age","opacity","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","getFromPool","setRGB","floatOverLifetime","maxAge","paramFetchingFunctions","    #ifdef SHOULD_ROTATE_PARTICLES","value","TypedArrayHelper","particles, can support only","componentSize","frameCount","maxParticleCount","distributionClamp","onParticleSpawn","   c.g = g / PACKED_COLOR_DIVISOR;","_value","vec3 getAcceleration( in float age ) {","        float wiggleAmount = positionInTime * getWiggle();","setColor","_setAttributeOffset","    vec3 pos = vec3( position );","clamp","length","    highp float positionInTime = (age / maxAge);","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","randomVector3OnDisc","amd","float when_gt(float x, float y) {","return (function() ","spreadClamp","count","sqrt","float when_lt(float x, float y) {","_static","position","    force += accel * age;","Emitter already belongs to another group. Will not add to requested group.","Color","random","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","wiggle","BOX","       float x = gl_PointCoord.x - 0.5;","lerp","    #ifdef COLORIZE","defineProperty","Emitter","disable","resetFlags","push","pop","       axis = normalize(axis);","call","getPool","angleSpread","emitters","ensureInstanceOf","utils","        float perspective = 1.0;","    highp float value = 0.0;","mesh","type","    #ifdef SHOULD_CALCULATE_SPRITE","resetUpdateRange","ensureValueOverLifetimeCompliance","uniform float deltaTime;","    vec3 accel = getAcceleration( age );","_pool","randomColorAsHex","add","_applyAttributesToGeometry","dynamicBuffer","bufferUpdateCount","_assignColorValue","attributeOffset","colorize","    vec3 outgoingLight = vColor.xyz;","min","    return 1.0 - abs( sign( x - y ) );","vec3 unpackRotationAxis( in float hex ) {","hasOwnProperty","varyings","dispose","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","textureFrames","splice","rotationCenter","floor","updateFlags","warn","depthWrite","    highp float alive = getAlive();","POSITIVE_INFINITY","   float b = mod( hex, PACKED_COLOR_SIZE );","TypedArray is already of size:","      vec3 center = rotationCenter;","_angleSpread","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","array","        pos.z += wiggleSin;","_setBufferUpdateRanges","ShaderChunk","_assignAbsLifetimeValue","      vec3 translated;","depthTest","_assignParamsValue","    highp float age = getAge();","_attributesNeedRefresh","attribute vec4 rotation;","   }","float or(float a, float b) {","geometry","emitterIDs","setVec3Components","scale","loop","    vec4 rotatedTexture = texture2D( tex, vUv );","setVec2Components","info","roundToNearestMultiple","gger","attributes","_updateUniforms","_radiusScale","common","  return 1.0 - when_gt(x, y);","logdepthbuf_vertex","       float s = sin(angle);","       float c = cos(angle);","      if( rotation.y == 0.0 ) {","   return params.z;","           positionInTime,","float and(float a, float b) {","static","1278201qWmojz","counter","logdepthbuf_pars_fragment","Emitter already exists in this group. Will not add again.","float getAge() {","vec4 getPosition( in float age ) {","    #endif","DISC","attributeCount","    return min(a + b, 1.0);","multiplyScalar","104181STCDYN","        float rowNorm = row / framesY;","transparent","DynamicDrawUsage","elements","alphaTest","StaticDrawUsage","bind","    #ifdef SHOULD_ROTATE_TEXTURE","velocity","_createBufferAttribute","resetDynamic","attribute vec4 color;","BufferAttribute","setNumber","unpackColor","88MTsEUG","duration","log","_assignPositionValue","randomVector3OnSphere","191EBfkfI","_assignRotationValue","replace","attribute vec4 opacity;","clone","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","valueOverLifetimeLength","_axis","randomFloat","float when_eq( float x, float y ) {","    varying vec4 vSpriteSheet;","activationIndex","updateMap","randomVector3OnLine","    #ifdef HAS_PERSPECTIVE","texture","params","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","direction","center","        vSpriteSheet.z = columnNorm;","getComponentValueAtIndex","drag","SHOULD_ROTATE_PARTICLES","bufferUpdateKeys","    #ifdef SHOULD_WIGGLE_PARTICLES","        float perspective = scale / length( mvPosition.xyz );","round","   return params.y;","chain","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","        float framesY = textureAnimation.y;","frames","updateRange","1288842ZdjZur","getLength","setVec4Components","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","#define PACKED_COLOR_SIZE 256.0","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","Vector2","unpackRotationAxis","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","setVec3","set","sin","removeEmitter","test","       float c = cos( -vAngle );","setVec4","paramsArray","_createGetterSetters","   vec3 c = vec3( 0.0 );","_resetParticle","setDrawRange","undefined","_spread","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","        float wiggleCos = isAlive * cos( wiggleAmount );","   c -= vec3( 1.0 );","Texture","branchAvoidanceFunctions","TypedArrayConstructor","material","stateObject","        float columnNorm = column / framesX;","OBJECT","constructor","NEGATIVE_INFINITY","    #else","       vec3 c = isAlive * getColorOverLifetime(","_activateParticles","float when_ge(float x, float y) {","textureLoop","ensureArrayTypedArg","updateMin","#endif","vec3 unpackColor( in float hex ) {","BOOLEAN","  return 1.0 - when_lt(x, y);","    gl_PointSize = pointSizePerspective;","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","_checkParticleAges","group","uniform float runTime;","NUMBER","indexOffset","join","runTime","_ensureTypedArray","    #ifdef ALPHATEST","        vSpriteSheet.y = 1.0 / framesY;","triggerPoolEmitter","460377tPKieZ","_calculatePPSValue","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","rotation","   return velocity * age;","_assignForceValue","apply","Emitter does not exist in this group. Will not remove.","trace","        vSpriteSheet.w = rowNorm;","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","shrink","        float columnNorm = vSpriteSheet.z;","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","setUpdateRange","setSize","_distributionClamp","table","    return value;","updateMax","tick","lerpTypeAgnostic","randomise","abs","size","ensureTypedArg","5vrzmKw","    return a * b;","randomDirectionVector3OnDisc","#ifdef SHOULD_CALCULATE_SPRITE","typeSizeMap","attribute vec4 angle;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","   c.b = b / PACKED_COLOR_DIVISOR;","while (true) {}","        float framesX = textureAnimation.x;","forceUpdateAll","logdepthbuf_fragment","       float oc = 1.0 - c;","Vector3","    float fIndex = 0.0;","_incrementParticleCount","subarray","    force *= drag;","_attributesNeedDynamicReset","generateUUID","arrayValuesAreEqual","_distribution","    highp float maxAge = getMaxAge();","#ifdef SHOULD_ROTATE_TEXTURE","float getMaxAge() {","shaderChunks","BufferGeometry","    ","_createNewWhenPoolEmpty","particlesPerSecond","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","_onRemove","defines","   c.r = r / PACKED_COLOR_DIVISOR;","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","794756KkFtpU","_decrementParticleCount","        float framesY = vSpriteSheet.y;","fog","textureFrameCount","_updateBuffers","_rotationCenter","radius","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","      vec3 axis = unpackRotationAxis( rotation.x );","fog_vertex","distributions","activeParticleCount","addPool","AdditiveBlending","#define PACKED_COLOR_DIVISOR 255.0","   return params.x;","vertex","boolean","distribution","bufferUpdateRanges","10TJtPku","function","      rotationMatrix = getRotationMatrix( axis, angle );","logdepthbuf_pars_vertex","bufferAttribute","vec3 getVelocity( in float age ) {","itemSize","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","offset","    highp float isAlive = when_gt( alive, 0.0 );","SHOULD_ROTATE_TEXTURE","           unpackColor( color.z ),","copy","needsUpdate","100bUJhNZ","        pos = getRotation( pos, positionInTime );","radiusScale","setVec2","addEmitter","color","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","setFromArray","flagUpdate","_assignValue","forceFetchingFunctions","    float pointSizePerspective = pointSize * perspective;","`emitter` argument must be instance of SPE.Emitter. Was provided with:","Argument is not instanceof SPE.Emitter:","releaseIntoPool","attributeEnd","uniform vec4 textureAnimation;","arrayType","SPHERE","        vSpriteSheet.x = 1.0 / framesX;","axis","_assignAngleValue","isStatic","typedArray","      }","_spreadClamp","alive","unshift","SHOULD_WIGGLE_PARTICLES","shaders","prototype","console","toString","normalize","_updateAttributeUpdateRange","angle","Vector4","_resetBufferRanges","    float shouldApplyValue = 0.0;","void main() {","_randomise","debu","       vec3 c = vec3(1.0);","error","enable","uniform float scale;","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","updateCounts","    return max(sign(x - y), 0.0);","        float rowNorm = vSpriteSheet.w;","attributeKeys","   return acceleration.xyz * age;","Invalid argument types, or argument types do not match:","Group","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","                   0.0,                                0.0,                                0.0,                                1.0);","max","activeMultiplier","   return c;","_poolCreationSettings","_updateDefines","ShaderAttribute","particleCount","    varying float vAngle;","float getAlive() {","      translated = rotationCenter - pos;","indexOf","cos","           return pos;","_angle","MathUtils","types","activationEnd"];return(h=function(){return t})()}!function(t,e){const i=p,n=h();for(;;)try{if(263248===parseInt(i(558))/1*(parseInt(i(748))/2)+-parseInt(i(526))/3+parseInt(i(713))/4+-parseInt(i(678))/5*(-parseInt(i(592))/6)+parseInt(i(537))/7*(parseInt(i(553))/8)+-parseInt(i(652))/9*(-parseInt(i(734))/10)+parseInt(i(380))/11)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){l(this,(function(){const t=p,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(475),"i"),n=m("init");e[t(605)](n+t(587))&&i[t(605)](n+"input")?m():n("0")}))()}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[p(658)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();u(void 0,(function(){const t=p,e=function(){const t=p;let e;try{e=Function(t(420)+'{}.constructor("return this")( ));')()}catch(i){e=window}return e}(),i=e.console=e[t(779)]||{},n=[t(555),t(481),t(510),"error","exception",t(669),t(660)];for(let s=0;s<n[t(414)];s++){const e=u[t(625)].prototype[t(544)](u),o=n[s],r=i[o]||e;e.__proto__=u[t(544)](u),e.toString=r[t(780)][t(544)](r),i[o]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function p(t,e){const i=h();return(p=function(t,e){return i[t-=333]})(t,e)}typeof define===c(735)&&define[c(418)]?define("spe",f):"undefined"!=typeof exports&&typeof module!==c(613)&&(module.exports=f),f.TypedArrayHelper=function(t,e,i,n){const s=c;this.componentSize=i||1,this[s(676)]=e||1,this[s(620)]=t||Float32Array,this[s(490)]=new t(e*this[s(401)]),this.indexOffset=n||0},f.TypedArrayHelper[c(625)]=f.TypedArrayHelper,f[c(399)].prototype[c(667)]=function(t,e){const i=c,n=this[i(490)][i(414)];return!e&&(t*=this[i(401)]),t<n?this.shrink(t):t>n?this.grow(t):void console[i(510)](i(486),t+".",i(367))},f.TypedArrayHelper.prototype[c(663)]=function(t){const e=c;return this.array=this[e(490)][e(694)](0,t),this[e(676)]=t,this},f[c(399)][c(778)][c(381)]=function(t){const e=c,i=this[e(490)],n=new(this[e(620)])(t);return n[e(602)](i),this[e(490)]=n,this[e(676)]=t,this},f[c(399)][c(778)][c(477)]=function(t,e){const i=c;t*=this[i(401)],e*=this.componentSize;const n=[],s=this[i(490)],o=s[i(414)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(441)](s[r]);return this[i(755)](0,n),this},f.TypedArrayHelper[c(778)][c(755)]=function(t,e){const i=c,n=t+e[i(414)];return n>this[i(490)][i(414)]?this[i(381)](n):n<this.array[i(414)]&&this[i(663)](n),this[i(490)].set(e,this[i(645)]+t),this},f[c(399)][c(778)][c(751)]=function(t,e){return this[c(509)](t,e.x,e.y)},f[c(399)][c(778)][c(509)]=function(t,e,i){const n=c,s=this[n(490)],o=this[n(645)]+t*this[n(401)];return s[o]=e,s[o+1]=i,this},f[c(399)].prototype[c(601)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},f[c(399)][c(778)][c(505)]=function(t,e,i,n){const s=this[c(490)],o=this.indexOffset+t*this.componentSize;return s[o]=e,s[o+1]=i,s[o+2]=n,this},f[c(399)][c(778)][c(607)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},f[c(399)][c(778)][c(594)]=function(t,e,i,n,s){const o=c,r=this[o(490)],a=this[o(645)]+t*this[o(401)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},f[c(399)].prototype.setMat3=function(t,e){const i=c;return this[i(755)](this[i(645)]+t*this[i(401)],e[i(541)])},f[c(399)].prototype.setMat4=function(t,e){const i=c;return this.setFromArray(this.indexOffset+t*this.componentSize,e[i(541)])},f[c(399)][c(778)][c(410)]=function(t,e){return this[c(505)](t,e.r,e.g,e.b)},f[c(399)][c(778)][c(551)]=function(t,e){const i=c;return this.array[this[i(645)]+t*this.componentSize]=e,this},f[c(399)][c(778)].getValueAtIndex=function(t){return this[c(490)][this.indexOffset+t]},f[c(399)][c(778)][c(579)]=function(t){const e=c;return this.array.subarray(this[e(645)]+t*this[e(401)])},f[c(351)]=function(t,e,i){const n=c,s=f[n(351)][n(682)];this[n(453)]="string"==typeof t&&s.hasOwnProperty(t)?t:"f",this[n(401)]=s[this[n(453)]],this[n(765)]=i||Float32Array,this[n(771)]=null,this[n(738)]=null,this[n(463)]=!!e,this[n(633)]=0,this.updateMax=0},f[c(351)][c(625)]=f.ShaderAttribute,f[c(351)][c(682)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f[c(351)].prototype[c(666)]=function(t,e){const i=c;this.updateMin=Math[i(469)](t*this[i(401)],this.updateMin*this.componentSize),this[i(671)]=Math[i(346)](e*this.componentSize,this[i(671)]*this[i(401)])},f[c(351)][c(778)].flagUpdate=function(){const t=c,e=this[t(738)];!e[t(591)]&&(e[t(591)]={});const i=e[t(591)];i[t(742)]=this[t(633)],i[t(422)]=Math[t(469)](this[t(671)]-this[t(633)]+this[t(401)],this[t(771)][t(490)].length),e.needsUpdate=!0},f.ShaderAttribute[c(778)][c(455)]=function(){const t=c;this[t(633)]=0,this[t(671)]=0},f.ShaderAttribute[c(778)][c(548)]=function(){const i=c;this[i(738)][i(365)]=this[i(463)]?t:e[i(543)]},f[c(351)][c(778)].splice=function(t,e){const i=c;this[i(771)][i(477)](t,e),this.forceUpdateAll()},f[c(351)][c(778)][c(688)]=function(){const t=c;this[t(738)][t(490)]=this[t(771)][t(490)],this[t(738)][t(591)][t(742)]=0,this[t(738)][t(591)].count=-1,this[t(738)][t(365)]=e[t(543)],this[t(738)].needsUpdate=!0},f[c(351)].prototype[c(648)]=function(t){const e=c;null!==this[e(771)]&&this[e(771)][e(676)]===t*this[e(401)]||(null!==this[e(771)]&&this[e(771)][e(676)]!==t?this[e(771)].setSize(t):null===this[e(771)]&&(this[e(771)]=new(f[e(399)])(this.arrayType,t,this.componentSize)))},f[c(351)][c(778)][c(547)]=function(t){const i=c;if(this._ensureTypedArray(t),null!==this[i(738)])return this[i(738)][i(490)]=this[i(771)][i(490)],parseFloat(e[i(373)])>=81&&(this[i(738)][i(422)]=this[i(738)][i(490)][i(414)]/this[i(738)][i(740)]),void(this[i(738)][i(747)]=!0);this[i(738)]=new(e[i(550)])(this[i(771)][i(490)],this[i(401)]),this[i(738)][i(365)]=this[i(463)]?e[i(540)]:e[i(543)]},f.ShaderAttribute.prototype[c(593)]=function(){const t=c;return null===this.typedArray?0:this.typedArray[t(490)][t(414)]},f[c(703)]={defines:[c(596),c(728)].join("\n"),uniforms:[c(457),c(643),"uniform sampler2D tex;",c(764),c(335)][c(646)]("\n"),attributes:["attribute vec4 acceleration;",c(364),c(500),"attribute vec3 rotationCenter;","attribute vec4 params;","attribute vec4 size;",c(683),c(549),c(561)].join("\n"),varyings:["varying vec4 vColor;",c(701),c(353),c(634),c(681),c(568),c(634)][c(646)]("\n"),branchAvoidanceFunctions:[c(419),c(338),"}",c(424),c(383),"}",c(567),c(470),"}",c(630),c(637),"}","float when_le(float x, float y) {",c(517),"}",c(524),c(679),"}",c(502),c(535),"}"][c(646)]("\n"),unpackColor:[c(635),c(610),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",c(344),c(485),c(711),c(406),c(685),c(348),"}"].join("\n"),unpackRotationAxis:[c(471),c(610),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",c(344),c(485),"   c.r = r / PACKED_COLOR_DIVISOR;",c(406),c(685),c(363),c(617),c(348),"}"][c(646)]("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",c(451),c(721),c(692),c(786),c(489),"",c(665),"       fIndex = float( i );",c(391),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","",c(670),"}"].join("\n"),colorOverLifetime:[c(416),"    vec3 value = vec3( 0.0 );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",c(597),c(670),"}"][c(646)]("\n"),paramFetchingFunctions:[c(354),c(729),"}",c(530),c(586),"}",c(702),c(522),"}",c(366),"   return params.w;","}"].join("\n"),forceFetchingFunctions:[c(531),"   return modelViewMatrix * vec4( position, 1.0 );","}",c(739),c(656),"}",c(408),c(341),"}"].join("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",c(336),c(443),c(519),c(520),c(690),"",c(654),"                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",c(712),c(345),c(501),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",c(521),c(358),c(772),"",c(722),c(487),c(495),c(382),"      float angle = 0.0;",c(741),c(563),c(355),c(736),c(640),c(501),c(634)][c(646)]("\n"),rotateTexture:[c(588),"",c(545),c(434),"       float y = 1.0 - gl_PointCoord.y - 0.5;",c(606),"       float s = sin( -vAngle );",c(615),c(532),"",c(454),c(387),c(715),c(664),c(339),c(708),c(684),c(532),"",c(508)].join("\n")},f[c(777)]={vertex:[f.shaderChunks.defines,f[c(703)].uniforms,f.shaderChunks.attributes,f[c(703)][c(473)],i[c(516)],e[c(493)][c(737)],e[c(493)].fog_pars_vertex,f[c(703)][c(619)],f[c(703)][c(552)],f[c(703)][c(599)],f.shaderChunks[c(394)],f[c(703)].colorOverLifetime,f[c(703)][c(396)],f[c(703)][c(758)],f[c(703)].rotationFunctions,c(787),c(498),c(483),c(700),c(415),c(743),c(583),c(409),"        float wiggleSin = isAlive * sin( wiggleAmount );",c(616),c(532),"    vec3 vel = getVelocity( age );",c(458),"    vec3 force = vec3( 0.0 );",c(412),"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;",c(695),c(427),"    pos += force;",c(583),"        pos.x += wiggleSin;","        pos.y += wiggleCos;",c(491),"    #endif",c(397),c(749),c(532),"    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",c(572),c(584),"    #else",c(450),c(532),c(759),c(436),c(628),c(523),"           unpackColor( color.x ),","           unpackColor( color.y ),",c(745),"           unpackColor( color.w )","       );",c(627),c(790),c(532),c(595),"    vColor = vec4( c, o );",c(545),c(754),c(532),c(454),c(687),c(589),"        float loopCount = textureAnimation.w;","        float totalFrames = textureAnimation.z;",c(431),"        float column = floor(mod( frameNumber, framesX ));","        float row = floor( (frameNumber - column) / framesX );",c(623),c(538),c(767),c(650),c(578),c(661),"    #endif",c(638),"    gl_Position = projectionMatrix * mvPosition;",i[c(518)],e[c(493)][c(723)],"}"][c(646)]("\n"),fragment:[f[c(703)][c(385)],e[c(493)][c(516)],e[c(493)].fog_pars_fragment,i[c(528)],f.shaderChunks.varyings,f[c(703)][c(619)],"void main() {",c(468),c(705),c(649),"       if ( vColor.w < float(ALPHATEST) ) discard;",c(532),f[c(703)][c(371)],e[c(493)][c(689)],c(662),c(600),e[c(493)].fog_fragment,"}"].join("\n")},f[c(449)]={types:{BOOLEAN:c(731),STRING:c(384),NUMBER:"number",OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array[n(369)](t)){for(let s=t[n(414)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(677)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array[n(369)](t)){for(let s=t[n(414)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(448)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(369)](t[n(407)])&&(t[n(407)]=[t._value]),!1===Array[n(369)](t[n(614)])&&(t[n(614)]=[t[n(614)]]);const s=this[n(413)](t[n(407)][n(414)],e,i),o=this[n(413)](t[n(614)][n(414)],e,i),r=Math.max(s,o);t[n(407)][n(414)]!==r&&(t[n(407)]=this.interpolateArray(t[n(407)],r)),t[n(614)].length!==r&&(t[n(614)]=this.interpolateArray(t[n(614)],r))},interpolateArray(t,e){const i=c,n=t[i(414)],s=[typeof t[0][i(562)]===i(735)?t[0][i(562)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(479)](e),a=Math.ceil(e),c=e-n;s[r]=this[i(673)](t[n],t[a],c)}return s.push(typeof t[n-1].clone===i(735)?t[n-1].clone():t[n-1]),s},clamp(t,e,i){const n=c;return Math.max(e,Math[n(469)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,o){const r=c;let a,h=this.types;return typeof t===h[r(644)]&&typeof i===h[r(644)]?t+(i-t)*o:t instanceof e[r(598)]&&i instanceof e[r(598)]?(a=t[r(562)](),a.x=this.lerp(t.x,i.x,o),a.y=this[r(435)](t.y,i.y,o),a):t instanceof n&&i instanceof e[r(691)]?(a=t[r(562)](),a.x=this[r(435)](t.x,i.x,o),a.y=this.lerp(t.y,i.y,o),a.z=this[r(435)](t.z,i.z,o),a):t instanceof e[r(784)]&&i instanceof e[r(784)]?(a=t[r(562)](),a.x=this.lerp(t.x,i.x,o),a.y=this[r(435)](t.y,i.y,o),a.z=this[r(435)](t.z,i.z,o),a.w=this.lerp(t.w,i.w,o),a):t instanceof s&&i instanceof s?(a=t.clone(),a.r=this.lerp(t.r,i.r,o),a.g=this[r(435)](t.g,i.g,o),a.b=this[r(435)](t.b,i.b,o),a):void console[r(481)](r(342),t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=c;let n=0;return 0===e?t:(n=Math[i(675)](t)%e,0===n?t:t<0?-(Math[i(675)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=c;for(let i=0;i<t[e(414)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[c(430)]()-.5),randomVector3(t,e,i,n,s){const o=c;let r=i.x+(Math[o(430)]()*n.x-.5*n.x),a=i.y+(Math[o(430)]()*n.y-.5*n.y),h=i.z+(Math[o(430)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(511)](r,s.x),a=.5*-s.y+this[o(511)](a,s.y),h=.5*-s.z+this[o(511)](h,s.z)),t.typedArray[o(505)](e,r,a,h)},randomColor(t,e,i,n){const s=c;let o=i.r+Math[s(430)]()*n.x,r=i.g+Math.random()*n.y,a=i.b+Math[s(430)]()*n.z;o=this[s(413)](o,0,1),r=this.clamp(r,0,1),a=this[s(413)](a,0,1),t[s(771)][s(505)](e,o,r,a)},randomColorAsHex:function(){const t=c,i=new(e[t(429)]);return function(e,n,s,o){const r=t,a=s[r(414)],c=[];for(let t=0;t<a;++t){const e=o[t];i[r(746)](s[t]),i.r+=Math[r(430)]()*e.x-.5*e.x,i.g+=Math[r(430)]()*e.y-.5*e.y,i.b+=Math[r(430)]()*e.z-.5*e.z,i.r=this.clamp(i.r,0,1),i.g=this.clamp(i.g,0,1),i.b=this[r(413)](i.b,0,1),c.push(i.getHex())}e[r(771)][r(594)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=c,o=i[s(562)]();o[s(435)](n,Math[s(430)]()),t.typedArray[s(505)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const h=c;let l=2*Math.random()-1,u=6.2832*Math[h(430)](),f=Math[h(423)](1-l*l),p=this[h(566)](n,s),d=0,m=0,g=0;r&&(p=Math[h(585)](p/r)*r),d=f*Math[h(357)](u)*p,m=f*Math[h(603)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[h(771)].setVec3Components(e,d,m,g)},seededRandom(t){const e=1e4*Math[c(603)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=c;let h=6.2832*Math[a(430)](),l=Math[a(675)](this.randomFloat(n,s)),u=0,f=0,p=0;r&&(l=Math[a(585)](l/r)*r),u=Math[a(357)](h)*l,f=Math[a(603)](h)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t.typedArray[a(505)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=c,i=new(e[t(691)]);return function(e,n,s,o,r,a,c,h){const l=t;i[l(746)](a),i.x-=s,i.y-=o,i.z-=r,i[l(781)]()[l(536)](-this[l(566)](c,h)),e[l(771)][l(505)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=c,i=new(e[t(691)]);return function(e,n,s,o,r,a,c,h){const l=t;i[l(746)](a),i.x-=s,i.y-=o,i.z-=r,i[l(781)]().multiplyScalar(-this[l(566)](c,h)),e.typedArray.setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const t=c,i=new(e[t(691)]),s=new(e[t(691)]),o=new(e[t(429)]),r=new n(1,1,1);return function(e,n){const a=t;return i[a(746)](e)[a(781)](),s[a(746)](n).normalize(),i.x+=.5*-n.x+Math.random()*n.x,i.y+=.5*-n.y+Math[a(430)]()*n.y,i.z+=.5*-n.z+Math.random()*n.z,i.normalize()[a(461)](r)[a(536)](.5),o[a(393)](i.x,i.y,i.z),o.getHex()}}()},f[c(343)]=function(t){const i=c,n=f[i(449)],s=n[i(361)];(t=n.ensureTypedArg(t,s[i(624)],{}))[i(573)]=n[i(677)](t.texture,s.OBJECT,{}),this[i(368)]=e[i(360)][i(697)](),this.fixedTimeStep=n[i(677)](t.fixedTimeStep,s[i(644)],.016),this[i(573)]=n.ensureInstanceOf(t[i(573)].value,e[i(618)],null),this[i(476)]=n[i(448)](t.texture[i(590)],o,new o(1,1)),this[i(717)]=n[i(677)](t[i(573)][i(402)],s[i(644)],this[i(476)].x*this[i(476)].y),this.textureLoop=n.ensureTypedArg(t[i(573)][i(507)],s[i(644)],1),this[i(476)].max(new o(1,1)),this[i(388)]=n.ensureTypedArg(t[i(388)],s[i(636)],!0),this.colorize=n[i(677)](t[i(467)],s[i(636)],!0),this[i(403)]=n[i(677)](t[i(403)],s[i(644)],null),this.blending=n[i(677)](t.blending,s[i(644)],e[i(727)]),this[i(539)]=n[i(677)](t[i(539)],s.BOOLEAN,!0),this.alphaTest=parseFloat(n[i(677)](t[i(542)],s[i(644)],0)),this[i(482)]=n[i(677)](t[i(482)],s[i(636)],!1),this[i(496)]=n[i(677)](t[i(496)],s[i(636)],!0),this.fog=n.ensureTypedArg(t[i(716)],s[i(636)],!0),this.scale=n[i(677)](t[i(506)],s[i(644)],300),this.emitters=[],this[i(504)]=[],this[i(459)]=[],this[i(349)]=null,this[i(706)]=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this[i(352)]=0,this[i(385)]={tex:{type:"t",value:this[i(573)]},textureAnimation:{type:"v4",value:new(e[i(784)])(this[i(476)].x,this[i(476)].y,this[i(717)],Math[i(346)](Math.abs(this[i(631)]),1))},fogColor:{type:"c",value:this[i(716)]?new(e[i(429)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(710)]={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(467)],VALUE_OVER_LIFETIME_LENGTH:f[i(564)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(476)].y>1},this[i(513)]={position:new(f[i(351)])("v3",!0),acceleration:new(f[i(351)])("v4",!0),velocity:new(f[i(351)])("v3",!0),rotation:new(f[i(351)])("v4",!0),rotationCenter:new(f[i(351)])("v3",!0),params:new(f[i(351)])("v4",!0),size:new f.ShaderAttribute("v4",!0),angle:new f.ShaderAttribute("v4",!0),color:new(f[i(351)])("v4",!0),opacity:new(f[i(351)])("v4",!0)},this.attributeKeys=Object[i(372)](this[i(513)]),this.attributeCount=this.attributeKeys.length,this[i(621)]=new r({uniforms:this[i(385)],vertexShader:f[i(777)][i(730)],fragmentShader:f[i(777)].fragment,blending:this.blending,transparent:this[i(539)],alphaTest:this[i(542)],depthWrite:this[i(482)],depthTest:this[i(496)],defines:this[i(710)],fog:this[i(716)]}),this.geometry=new(e[i(704)]),this[i(452)]=new a(this[i(503)],this[i(621)]),null===this[i(403)]&&console[i(481)](i(575))},f[c(343)][c(625)]=f[c(343)],f[c(343)].prototype[c(350)]=function(){const t=c;let e,i=this[t(447)],n=i.length-1,s=this[t(710)];for(;n>=0;--n)e=i[n],!s.SHOULD_CALCULATE_SPRITE&&(s[t(744)]=s[t(744)]||!!Math.max(Math[t(346)][t(658)](null,e[t(783)][t(398)]),Math[t(346)].apply(null,e[t(783)][t(386)]))),s[t(581)]=s[t(581)]||!!Math[t(346)](e.rotation[t(783)],e.rotation[t(446)]),s.SHOULD_WIGGLE_PARTICLES=s[t(776)]||!!Math[t(346)](e[t(432)][t(398)],e[t(432)][t(386)]);this[t(621)][t(747)]=!0},f[c(343)].prototype[c(462)]=function(){const t=c;let e,i,n=this[t(513)],s=this[t(503)],o=s[t(513)];for(const r in n)n[t(472)](r)&&(e=n[r],i=o[r],i?i[t(490)]=e[t(771)][t(490)]:s[t(376)](r,e[t(738)]),e[t(738)].needsUpdate=!0);this[t(503)][t(612)](0,this[t(352)])},f[c(343)][c(778)].addEmitter=function(t){const e=c;if(t instanceof f[e(438)]==!1)return void console[e(333)](e(760),t);if(this.emitterIDs[e(356)](t[e(368)])>-1)return void console[e(333)](e(529));if(null!==t[e(642)])return void console[e(333)](e(428));const i=this[e(513)],n=this[e(352)],s=n+t[e(352)];this[e(352)]=s,null!==this[e(403)]&&this[e(352)]>this.maxParticleCount&&console[e(481)]("SPE.Group: maxParticleCount exceeded. Requesting",this[e(352)],e(400),this.maxParticleCount),t[e(653)](t[e(395)][e(407)]+t[e(395)][e(614)]),t._setBufferUpdateRanges(this[e(340)]),t[e(411)](n),t.group=this,t[e(513)]=this[e(513)];for(const o in i)i.hasOwnProperty(o)&&i[o][e(547)](null!==this[e(403)]?this[e(403)]:this[e(352)]);for(let o=n;o<s;++o)t[e(556)](o),t[e(657)](o,e(546)),t._assignForceValue(o,e(374)),t[e(494)](o,e(390)),t[e(494)](o,e(676)),t[e(769)](o),t[e(559)](o),t[e(497)](o),t._assignColorValue(o);return this[e(462)](),this[e(447)].push(t),this[e(504)].push(t[e(368)]),this[e(350)](t),this[e(621)][e(747)]=!0,this[e(503)].needsUpdate=!0,this[e(499)]=!0,this},f[c(343)][c(778)][c(604)]=function(t){const e=c,i=this[e(504)].indexOf(t[e(368)]);if(t instanceof f[e(438)]==!1)return void console[e(333)](e(760),t);if(-1===i)return void console.error(e(659));const n=t[e(466)],s=n+t.particleCount,o=this.attributes[e(574)].typedArray;for(let r=n;r<s;++r)o[e(490)][4*r]=0,o[e(490)][4*r+1]=0;this[e(447)].splice(i,1),this[e(504)].splice(i,1);for(const r in this[e(513)])this.attributes[e(472)](r)&&this[e(513)][r].splice(n,s);this[e(352)]-=t[e(352)],t[e(709)](),this[e(499)]=!0},f[c(343)][c(778)][c(392)]=function(){const t=c,e=this._pool,i=this[t(706)];if(e.length)return e[t(442)]();if(i){const e=new f.Emitter(this[t(349)]);return this[t(752)](e),e}return null},f[c(343)][c(778)].releaseIntoPool=function(t){const e=c;if(t instanceof f[e(438)]!=!1)return t.reset(),this[e(459)][e(775)](t),this;console[e(333)](e(761),t)},f[c(343)][c(778)][c(445)]=function(){return this[c(459)]},f[c(343)].prototype[c(726)]=function(t,e,i){const n=c;let s;this[n(349)]=e,this[n(706)]=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(f[n(438)])(e[o]):new(f[n(438)])(e),this[n(752)](s),this[n(762)](s);return this},f[c(343)][c(778)][c(377)]=function(t){const i=c,n=this.getFromPool(),s=this;if(null!==n)return t instanceof e[i(691)]&&(n[i(426)].value[i(746)](t),n.position[i(398)]=n[i(426)][i(398)]),n.enable(),setTimeout((()=>{const t=i;n[t(439)](),s[t(762)](n)}),1e3*Math[i(346)](n.duration,n.maxAge.value+n[i(395)][i(386)])),this;console[i(555)]("SPE.Group pool ran out.")},f[c(343)][c(778)][c(651)]=function(t,e){const i=c;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this._triggerSingleEmitter(e);else this[i(377)](e);return this},f.Group[c(778)][c(514)]=function(t){const e=c;this[e(385)][e(647)].value+=t,this[e(385)].deltaTime[e(398)]=t},f[c(343)][c(778)][c(785)]=function(){const t=c;let e=this[t(340)],i=this[t(534)]-1,n=this[t(513)];for(;i>=0;--i)n[e[i]][t(455)]()},f.Group.prototype._updateBuffers=function(t){const e=c;let i,n,s,o=this[e(340)],r=this[e(534)]-1,a=this.attributes,h=t[e(733)];for(;r>=0;--r)i=o[r],n=h[i],s=a[i],s.setUpdateRange(n[e(469)],n.max),s[e(756)]()},f.Group[c(778)][c(672)]=function(t){const e=c;var i=this.emitters,n=i[e(414)],s=t||this.fixedTimeStep,o=this.attributeKeys,r=this[e(513)];if(this[e(514)](s),this._resetBufferRanges(),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(696)]){for(var a,h=0;h<n;++h)(a=i[h])[e(672)](s),this[e(718)](a);if(!0===this[e(696)]){for(h=this[e(534)]-1;h>=0;--h)r[o[h]].resetDynamic();this[e(696)]=!1}if(!0===this[e(499)]){for(h=this[e(534)]-1;h>=0;--h)r[o[h]].forceUpdateAll();this[e(499)]=!1,this._attributesNeedDynamicReset=!0}}},f[c(343)].prototype.dispose=function(){const t=c;return this[t(503)][t(474)](),this[t(621)][t(474)](),this},f.Emitter=function(t){const i=c,o=f[i(449)],r=o.types,a=f.valueOverLifetimeLength;(t=o[i(677)](t,r[i(624)],{}))[i(426)]=o[i(677)](t.position,r[i(624)],{}),t[i(546)]=o[i(677)](t.velocity,r[i(624)],{}),t[i(374)]=o[i(677)](t.acceleration,r.OBJECT,{}),t[i(720)]=o[i(677)](t[i(720)],r[i(624)],{}),t.drag=o[i(677)](t[i(580)],r.OBJECT,{}),t.rotation=o[i(677)](t[i(655)],r[i(624)],{}),t[i(753)]=o[i(677)](t[i(753)],r[i(624)],{}),t.opacity=o.ensureTypedArg(t[i(390)],r[i(624)],{}),t[i(676)]=o.ensureTypedArg(t[i(676)],r[i(624)],{}),t[i(783)]=o.ensureTypedArg(t[i(783)],r[i(624)],{}),t[i(432)]=o[i(677)](t.wiggle,r.OBJECT,{}),t.maxAge=o[i(677)](t[i(395)],r[i(624)],{}),t[i(405)]&&console[i(481)](i(639)),this[i(368)]=e[i(360)][i(697)](),this[i(453)]=o[i(677)](t.type,r.NUMBER,f[i(724)].BOX),this.position={_value:o[i(448)](t.position.value,e[i(691)],new(e[i(691)])),_spread:o.ensureInstanceOf(t[i(426)][i(386)],n,new(e[i(691)])),_spreadClamp:o.ensureInstanceOf(t[i(426)][i(421)],e[i(691)],new(e[i(691)])),_distribution:o[i(677)](t[i(426)].distribution,r[i(644)],this[i(453)]),_randomise:o[i(677)](t[i(426)][i(674)],r[i(636)],!1),_radius:o.ensureTypedArg(t[i(426)].radius,r.NUMBER,10),_radiusScale:o[i(448)](t[i(426)][i(750)],n,new(e[i(691)])(1,1,1)),_distributionClamp:o.ensureTypedArg(t[i(426)][i(404)],r[i(644)],0)},this[i(546)]={_value:o[i(448)](t[i(546)].value,e[i(691)],new n),_spread:o[i(448)](t[i(546)][i(386)],e[i(691)],new(e[i(691)])),_distribution:o.ensureTypedArg(t[i(546)][i(732)],r[i(644)],this[i(453)]),_randomise:o[i(677)](t[i(426)].randomise,r[i(636)],!1)},this[i(374)]={_value:o[i(448)](t[i(374)][i(398)],e[i(691)],new n),_spread:o.ensureInstanceOf(t[i(374)][i(386)],n,new(e[i(691)])),_distribution:o[i(677)](t[i(374)][i(732)],r[i(644)],this[i(453)]),_randomise:o.ensureTypedArg(t[i(426)].randomise,r[i(636)],!1)},this[i(580)]={_value:o[i(677)](t[i(580)][i(398)],r[i(644)],0),_spread:o[i(677)](t[i(580)][i(386)],r[i(644)],0),_randomise:o.ensureTypedArg(t[i(426)][i(674)],r[i(636)],!1)},this[i(432)]={_value:o.ensureTypedArg(t[i(432)][i(398)],r[i(644)],0),_spread:o[i(677)](t.wiggle[i(386)],r.NUMBER,0)},this.rotation={_axis:o[i(448)](t[i(655)][i(768)],n,new(e[i(691)])(0,1,0)),_axisSpread:o.ensureInstanceOf(t[i(655)].axisSpread,e[i(691)],new(e[i(691)])),_angle:o.ensureTypedArg(t[i(655)][i(783)],r[i(644)],0),_angleSpread:o[i(677)](t[i(655)][i(446)],r[i(644)],0),_static:o[i(677)](t[i(655)][i(525)],r.BOOLEAN,!1),_center:o[i(448)](t[i(655)][i(577)],e[i(691)],this[i(426)][i(407)].clone()),_randomise:o[i(677)](t[i(426)][i(674)],r.BOOLEAN,!1)},this.maxAge={_value:o.ensureTypedArg(t[i(395)][i(398)],r[i(644)],2),_spread:o[i(677)](t.maxAge[i(386)],r[i(644)],0)},this.color={_value:o.ensureArrayInstanceOf(t[i(753)][i(398)],s,new(e[i(429)])),_spread:o[i(378)](t[i(753)][i(386)],n,new(e[i(691)])),_randomise:o.ensureTypedArg(t[i(426)].randomise,r[i(636)],!1)},this[i(390)]={_value:o.ensureArrayTypedArg(t[i(390)][i(398)],r[i(644)],1),_spread:o[i(632)](t[i(390)][i(386)],r[i(644)],0),_randomise:o[i(677)](t.position.randomise,r.BOOLEAN,!1)},this[i(676)]={_value:o[i(632)](t[i(676)].value,r[i(644)],1),_spread:o[i(632)](t[i(676)][i(386)],r[i(644)],0),_randomise:o[i(677)](t.position[i(674)],r[i(636)],!1)},this.angle={_value:o[i(632)](t[i(783)][i(398)],r[i(644)],0),_spread:o[i(632)](t.angle[i(386)],r[i(644)],0),_randomise:o.ensureTypedArg(t[i(426)][i(674)],r.BOOLEAN,!1)},this[i(352)]=o.ensureTypedArg(t[i(352)],r[i(644)],100),this[i(554)]=o[i(677)](t.duration,r[i(644)],null),this[i(770)]=o[i(677)](t.isStatic,r[i(636)],!1),this[i(347)]=o[i(677)](t[i(347)],r[i(644)],1),this[i(576)]=o[i(677)](t.direction,r[i(644)],1),this[i(774)]=o.ensureTypedArg(t[i(774)],r.BOOLEAN,!0),this[i(707)]=0,this[i(569)]=0,this[i(466)]=0,this[i(763)]=0,this.age=0,this[i(725)]=0,this[i(642)]=null,this[i(513)]=null,this[i(608)]=null,this[i(440)]={position:o[i(677)](t[i(426)].randomise,r[i(636)],!1)||o[i(677)](t[i(720)][i(674)],r[i(636)],!1),velocity:o.ensureTypedArg(t[i(546)][i(674)],r[i(636)],!1),acceleration:o.ensureTypedArg(t[i(374)][i(674)],r[i(636)],!1)||o.ensureTypedArg(t[i(580)][i(674)],r.BOOLEAN,!1),rotation:o.ensureTypedArg(t[i(655)][i(674)],r[i(636)],!1),rotationCenter:o.ensureTypedArg(t[i(655)].randomise,r[i(636)],!1),size:o.ensureTypedArg(t[i(676)].randomise,r[i(636)],!1),color:o[i(677)](t[i(753)][i(674)],r[i(636)],!1),opacity:o[i(677)](t[i(390)][i(674)],r[i(636)],!1),angle:o.ensureTypedArg(t.angle[i(674)],r[i(636)],!1)},this[i(480)]={},this[i(337)]={},this[i(570)]={maxAge:i(574),position:i(426),velocity:i(546),acceleration:i(374),drag:"acceleration",wiggle:"params",rotation:"rotation",size:i(676),color:i(753),opacity:i(390),angle:"angle"};for(const e in this[i(570)])this[i(570)].hasOwnProperty(e)&&(this[i(337)][this[i(570)][e]]=0,this.updateFlags[this[i(570)][e]]=!1,this[i(609)](this[e],e));this.bufferUpdateRanges={},this.attributeKeys=null,this.attributeCount=0,o.ensureValueOverLifetimeCompliance(this[i(753)],a,a),o[i(456)](this.opacity,a,a),o[i(456)](this[i(676)],a,a),o.ensureValueOverLifetimeCompliance(this[i(783)],a,a)},f[c(438)].constructor=f.Emitter,f.Emitter[c(778)][c(609)]=function(t,e){const i=c,n=this;for(const s in t)if(t[i(472)](s)){const o=s[i(560)]("_","");Object[i(437)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=p,o=n.updateMap[e],r=this[t],a=f[s(564)];t===s(719)?(n[s(480)].rotationCenter=!0,n.updateCounts[s(478)]=0):t===s(788)?n[s(440)][o]=i:(n[s(480)][o]=!0,n[s(337)][o]=0),n.group[s(350)](),this[t]=i,Array.isArray(r)&&f[s(449)][s(456)](n[e],a,a)}}(s)})}},f.Emitter[c(778)][c(492)]=function(t){const e=c;this[e(340)]=t,this[e(534)]=t[e(414)];for(let i=this.attributeCount-1;i>=0;--i)this[e(733)][t[i]]={min:Number[e(484)],max:Number[e(626)]}},f[c(438)][c(778)]._calculatePPSValue=function(t){const e=c,i=this[e(352)];this[e(554)]?this[e(707)]=i/(t<this.duration?t:this[e(554)]):this[e(707)]=i/t},f[c(438)][c(778)]._setAttributeOffset=function(t){const e=c;this[e(466)]=t,this[e(569)]=t,this.activationEnd=t+this[e(352)]},f[c(438)][c(778)][c(757)]=function(t,e){const i=c;switch(t){case i(426):this[i(556)](e);break;case i(546):case i(374):this[i(657)](e,t);break;case i(676):case"opacity":this._assignAbsLifetimeValue(e,t);break;case i(783):this[i(769)](e);break;case i(574):this[i(497)](e);break;case i(655):this[i(559)](e);break;case i(753):this[i(465)](e)}},f[c(438)][c(778)][c(556)]=function(t){const e=c,i=f[e(724)],n=f[e(449)],s=this[e(426)],o=this[e(513)].position,r=s._value,a=s[e(614)];switch(s[e(699)]){case i[e(433)]:n[e(375)](o,t,r,a,s[e(773)]);break;case i[e(766)]:n[e(557)](o,t,r,s[e(370)],s[e(614)].x,s[e(515)],s[e(773)].x,s[e(668)]||this[e(352)]);break;case i[e(533)]:n[e(417)](o,t,r,s[e(370)],s[e(614)].x,s[e(515)],s[e(773)].x);break;case i.LINE:n[e(571)](o,t,r,a)}},f[c(438)].prototype[c(657)]=function(t,e){const i=c;let n,s,o,r,a,h=f[i(724)],l=f[i(449)],u=this[e],p=u[i(407)],d=u._spread;switch(u._distribution){case h[i(433)]:l[i(375)](this[i(513)][e],t,p,d);break;case h[i(766)]:n=this.attributes.position[i(771)][i(490)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l.randomDirectionVector3OnSphere(this[i(513)][e],t,s,o,r,this[i(426)][i(407)],u._value.x,u._spread.x);break;case h[i(533)]:n=this[i(513)][i(426)].typedArray[i(490)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(680)](this[i(513)][e],t,s,o,r,this[i(426)][i(407)],u[i(407)].x,u[i(614)].x);break;case h.LINE:l[i(571)](this.attributes[e],t,p,d)}if(e===i(374)){const e=l[i(413)](l[i(566)](this.drag[i(407)],this[i(580)][i(614)]),0,1);this[i(513)].acceleration[i(771)][i(490)][4*t+3]=e}},f.Emitter[c(778)]._assignAbsLifetimeValue=function(t,e){const i=c;let n,s=this.attributes[e][i(771)],o=this[e],r=f[i(449)];r[i(698)](o._value)&&r[i(698)](o._spread)?(n=Math[i(675)](r[i(566)](o[i(407)][0],o[i(614)][0])),s[i(594)](t,n,n,n,n)):s[i(594)](t,Math.abs(r[i(566)](o._value[0],o[i(614)][0])),Math.abs(r[i(566)](o._value[1],o[i(614)][1])),Math[i(675)](r[i(566)](o[i(407)][2],o._spread[2])),Math[i(675)](r[i(566)](o[i(407)][3],o[i(614)][3])))},f[c(438)][c(778)][c(769)]=function(t){const e=c;let i,n=this[e(513)][e(783)][e(771)],s=this[e(783)],o=f[e(449)];o[e(698)](s[e(407)])&&o[e(698)](s[e(614)])?(i=o[e(566)](s[e(407)][0],s[e(614)][0]),n[e(594)](t,i,i,i,i)):n[e(594)](t,o[e(566)](s[e(407)][0],s[e(614)][0]),o[e(566)](s[e(407)][1],s[e(614)][1]),o[e(566)](s[e(407)][2],s[e(614)][2]),o[e(566)](s[e(407)][3],s[e(614)][3]))},f[c(438)][c(778)]._assignParamsValue=function(t){const e=c;this[e(513)][e(574)][e(771)].setVec4Components(t,this[e(770)]?1:0,0,Math[e(675)](f[e(449)][e(566)](this[e(395)]._value,this.maxAge[e(614)])),f[e(449)][e(566)](this[e(432)]._value,this.wiggle._spread))},f[c(438)].prototype[c(559)]=function(t){const e=c;this[e(513)][e(655)][e(771)][e(505)](t,f[e(449)].getPackedRotationAxis(this[e(655)][e(565)],this[e(655)]._axisSpread),f[e(449)][e(566)](this[e(655)][e(359)],this.rotation[e(488)]),this[e(655)][e(425)]?0:1),this[e(513)].rotationCenter[e(771)].setVec3(t,this[e(655)]._center)},f[c(438)][c(778)][c(465)]=function(t){const e=c;f[e(449)][e(460)](this[e(513)][e(753)],t,this.color[e(407)],this.color[e(614)])},f.Emitter[c(778)][c(611)]=function(t){const e=c;let i,n,s=this[e(440)],o=this.updateFlags,r=this[e(337)],a=this[e(340)];for(let c=this[e(534)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(757)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this.particleCount?(o[i]=!1,r[i]=0):1==n&&++r[i])},f[c(438)].prototype[c(782)]=function(t,e){const i=c,n=this.bufferUpdateRanges[t];n[i(469)]=Math[i(469)](e,n[i(469)]),n.max=Math.max(e,n[i(346)])},f[c(438)][c(778)][c(785)]=function(){const t=c;let e,i=this[t(733)],n=this[t(582)],s=this[t(464)]-1;for(;s>=0;--s)e=n[s],i[e].min=Number.POSITIVE_INFINITY,i[e][t(346)]=Number[t(626)]},f[c(438)][c(778)][c(709)]=function(){const t=c;this[t(707)]=0,this[t(466)]=0,this.activationIndex=0,this.activeParticleCount=0,this[t(642)]=null,this[t(513)]=null,this.paramsArray=null,this[t(389)]=0},f[c(438)][c(778)][c(714)]=function(){--this.activeParticleCount},f[c(438)][c(778)][c(693)]=function(){++this[c(725)]},f[c(438)][c(778)][c(641)]=function(t,e,i,n){const s=c;for(var o,r,a,h,l=e-1;l>=t;--l)0!==(h=i[o=4*l])&&(a=i[o+1],r=i[o+2],1===this[s(576)]?(a+=n)>=r&&(a=0,h=0,this._decrementParticleCount()):(a-=n)<=0&&(a=r,h=0,this[s(714)]()),i[o]=h,i[o+1]=a,this[s(782)]("params",l))},f[c(438)][c(778)][c(629)]=function(t,e,i,n){const s=c,o=this[s(576)];for(var r,a,h=t;h<e;++h)0!=i[r=4*h]&&1!==this.particleCount||(this._incrementParticleCount(),i[r]=1,this._resetParticle(h),a=n*(h-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(782)]("params",h))},f[c(438)].prototype[c(672)]=function(t){const e=c;if(this[e(770)])return;null===this.paramsArray&&(this.paramsArray=this[e(513)][e(574)].typedArray[e(490)]);const i=this.attributeOffset,n=i+this[e(352)],s=this[e(608)],o=this[e(707)]*this[e(347)]*t,r=this[e(569)];if(this[e(785)](),this[e(641)](i,n,s,t),!1===this[e(774)])return void(this.age=0);if(null!==this[e(554)]&&this[e(389)]>this[e(554)])return this.alive=!1,void(this[e(389)]=0);const a=1===this[e(352)]?r:0|r,h=Math[e(469)](a+o,this[e(362)]),l=h-this[e(569)]|0,u=l>0?t/l:0;this[e(629)](a,h,s,u),this[e(569)]+=o,this[e(569)]>n&&(this.activationIndex=i),this[e(389)]+=t},f[c(438)][c(778)].reset=function(t){const e=c;if(this[e(389)]=0,this[e(774)]=!1,!0===t){const t=this.attributeOffset,s=t+this.particleCount,o=this[e(608)],r=this[e(513)].params[e(738)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r.updateRange[e(742)]=0,r[e(591)][e(422)]=-1,r[e(747)]=!0}return this},f.Emitter[c(778)][c(334)]=function(){return this[c(774)]=!0,this},f[c(438)][c(778)][c(439)]=function(){return this.alive=!1,this},f[c(438)][c(778)].remove=function(){const t=c;return null!==this.group?this.group[t(604)](this):console[t(333)]("Emitter does not belong to a group, cannot remove."),this};const d=f;function m(t){function e(t){const i=p;if(typeof t===i(384))return function(t){}.constructor(i(686))[i(658)](i(527));1!==(""+t/t)[i(414)]||t%20==0?function(){return!0}[i(625)](i(789)+i(512))[i(444)](i(379)):function(){return!1}[i(625)](i(789)+"gger")[i(658)](i(622)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{d as _};

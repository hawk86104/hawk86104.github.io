var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aK as v,aL as m,A as g,aU as _,C as y,a0 as x,W as b,m as I,n as w,ce as S,cf as M,K as R,h as A,b as E,e as T,_ as D,l as P,a_ as z,V as O,bp as C,z as F,aj as B,B as k,c as j,aI as U,g as N,M as L,ar as H,a9 as Z,U as G,bO as V}from"./three.RUAk_tvU1742436572432.js";import{m as W,j as $,e as K}from"./@tresjs.Uh9iM8du1742436572432.js";import{R as Y}from"./three-stdlib.T47etdkJ1742436572432.js";import{y as q,b as Q,w as J,a as X,u as nn,d as tn,W as en,a3 as rn,o as on,H as an,J as cn,M as sn,a0 as un,a6 as ln,a2 as fn,q as pn,f as dn,N as hn,a8 as vn,r as mn,B as gn,v as _n,s as yn,F as xn,a5 as bn,m as In}from"./@vue.deO5D3Lf1742436572432.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.8bPNhH1E1742436572432.js";import{h as Rn}from"./object-hash.oiujBqsB1742436572432.js";var An=On;!function(n,t){for(var e=On,r=Tn();;)try{if(415371===-parseInt(e(191))/1*(parseInt(e(177))/2)+-parseInt(e(169))/3+-parseInt(e(163))/4*(parseInt(e(167))/5)+-parseInt(e(174))/6*(parseInt(e(183))/7)+-parseInt(e(159))/8+parseInt(e(173))/9+parseInt(e(184))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(186)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(){var n=["gger","call","toString","trace","102037VAtaWl","exception","add","debu","material","constructor","dispose","error","info",'{}.constructor("return this")( )',"remove","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6556104iQLkPO","geometry","table","bind","48lzEQuM","virtualScene","traverse","return (function() ","82055XYcWwn","console","1798281KHdKWN","input","while (true) {}","action","4725864GXEZcY","1086hLWPFO","length","test","6ETqbui","log","map","string","__proto__","warn","28525AQuEDj","25498330FrThkB","destructor","apply"];return(Tn=function(){return n})()}!function(){En(this,(function(){var n=On,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(158),"i"),r=Cn("init");t.test(r+"chain")&&e[n(176)](r+n(170))?Cn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[On(186)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){for(var n=On,t=function(){var n,t=On;try{n=Function(t(166)+t(200)+");")()}catch(e){n=window}return n}(),e=t[n(168)]=t[n(168)]||{},r=[n(178),n(182),n(199),n(198),n(192),n(161),n(190)],o=0;o<r.length;o++){var i=Dn[n(196)].prototype[n(162)](Dn),a=r[o],c=e[a]||i;i[n(181)]=Dn[n(162)](Dn),i[n(189)]=c.toString.bind(c),e[a]=i}}))();class Pn extends s{constructor(){var n=On;super(),this[n(164)]=null,this[n(164)]=new u}add(...n){var t=On;return this[t(164)][t(193)](...n),this}[An(185)](){var n=An;this[n(164)][n(165)]((t=>{var e=n;t instanceof l&&(t[e(160)][e(197)](),t[e(195)][e(197)](),t[e(195)][e(179)]&&t[e(195)].map[e(197)](),this[e(164)][e(201)](t))})),this[n(164)]=null}}const zn=Pn;function On(n,t){var e=Tn();return(On=function(n,t){return e[n-=158]})(n,t)}function Cn(n){function t(n){var e=On;if(typeof n===e(180))return function(n){}[e(196)](e(171))[e(186)]("counter");1!==(""+n/n)[e(175)]||n%20==0?function(){return!0}.constructor(e(194)+e(187))[e(188)](e(172)):function(){return!1}[e(196)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=jn;!function(n,t){const e=jn,r=Un();for(;;)try{if(719914===parseInt(e(504))/1*(parseInt(e(489))/2)+parseInt(e(473))/3+-parseInt(e(490))/4+-parseInt(e(500))/5*(parseInt(e(503))/6)+-parseInt(e(488))/7*(-parseInt(e(481))/8)+parseInt(e(485))/9*(-parseInt(e(497))/10)+-parseInt(e(496))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(507)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bn(this,(function(){const n=jn,t=new RegExp(n(494)),e=new RegExp(n(471),"i"),r=Ln(n(478));t[n(493)](r+"chain")&&e[n(493)](r+n(492))?Ln():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(507)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(n,t){const e=Un();return(jn=function(n,t){return e[n-=469]})(n,t)}function Un(){const n=["apply","length","table","gger","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","city/shanghai_bund_1k.hdr","3236388JczCTP","city/canary_wharf_1k.hdr","warn","debu","bind","init","outdoor/snowy_forest_path_01_1k.hdr","venice/venice_sunset_1k.hdr","232040jRxQrc","log","toString","info","610020CZDPGH","prototype","__proto__","224tSGOZK","6aQwUlr","1478668urQNFJ","trace","input","test","function *\\( *\\)",'{}.constructor("return this")( )',"856647AaQFkZ","110UTmRKW","outood/mossy_forest_1k.hdr","constructor","393315TTpiQi","console","while (true) {}","48jFiwQO","178462RhNNEa","action","call"];return(Un=function(){return n})()}kn(void 0,(function(){const n=jn;let t;try{t=Function("return (function() "+n(495)+");")()}catch(o){t=window}const e=t[n(501)]=t[n(501)]||{},r=[n(482),n(475),n(484),"error",n(470),n(509),n(491)];for(let i=0;i<r[n(508)];i++){const t=kn[n(499)][n(486)][n(477)](kn),o=r[i],a=e[o]||t;t[n(487)]=kn[n(477)](kn),t[n(483)]=a.toString.bind(a),e[o]=t}}))();const Nn={sunset:Fn(480),studio:"studio/poly_haven_studio_1k.hdr",city:Fn(474),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:"outdoor/satara_night_1k.hdr",forest:Fn(498),snow:Fn(479),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:"city/modern_buildings_2_1k.hdr",shangai:Fn(472)};function Ln(n){function t(n){const e=jn;if("string"==typeof n)return function(n){}.constructor(e(502))[e(507)]("counter");1!==(""+n/n)[e(508)]||n%20==0?function(){return!0}[e(499)](e(476)+e(469))[e(506)](e(505)):function(){return!1}.constructor("debugger")[e(507)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=$n;!function(n,t){const e=$n,r=Vn();for(;;)try{if(643805===-parseInt(e(141))/1*(-parseInt(e(164))/2)+-parseInt(e(162))/3+parseInt(e(134))/4*(parseInt(e(155))/5)+parseInt(e(150))/6+-parseInt(e(161))/7*(parseInt(e(122))/8)+parseInt(e(131))/9+parseInt(e(135))/10*(parseInt(e(128))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(163)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=$n,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(154),"i"),r=Kn(n(148));t[n(125)](r+n(136))&&e.test(r+"input")?Kn():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(163)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(){const n=["exception","value","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","8VNhOur","counter","gger","test","mapping","Preset must be one of: ","1884971vzMWJF","return (function() ","stateObject","10265517MjeGtQ","texture","toString","2588ZFJmeA","20JmZHQY","chain","constructor","warn","bind","trace","98ZSnqgL","prototype","__proto__","join","debu","Failed to load environment map: ","info","init","isColor","3096120WFPUzo","length","background","setPath","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","815MgsTxL","console","string","error","table","keys","5059663HInhcc","3032514UZSJBG","apply","5564NCpiYc"];return(Vn=function(){return n})()}Gn(void 0,(function(){const n=$n;let t;try{t=Function(n(129)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(156)]=t[n(156)]||{},r=["log",n(138),n(147),n(158),n(165),n(159),n(140)];for(let i=0;i<r[n(151)];i++){const t=Gn[n(137)][n(142)][n(139)](Gn),o=r[i],a=e[o]||t;t[n(143)]=Gn[n(139)](Gn),t[n(133)]=a[n(133)].bind(a),e[o]=t}}))();const Wn=Hn(121);function $n(n,t){const e=Vn();return($n=function(n,t){return e[n-=121]})(n,t)}function Kn(n){function t(n){const e=$n;if(typeof n===e(157))return function(n){}[e(137)]("while (true) {}").apply(e(123));1!==(""+n/n)[e(151)]||n%20==0?function(){return!0}[e(137)](e(145)+e(124)).call("action"):function(){return!1}.constructor(e(145)+e(124))[e(163)](e(130)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yn=Qn;!function(n,t){const e=Qn,r=Xn();for(;;)try{if(868855===-parseInt(e(302))/1+-parseInt(e(307))/2*(-parseInt(e(298))/3)+parseInt(e(274))/4+-parseInt(e(295))/5+parseInt(e(287))/6+-parseInt(e(282))/7*(parseInt(e(308))/8)+-parseInt(e(320))/9*(-parseInt(e(300))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=Xn();return(Qn=function(n,t){return e[n-=269]})(n,t)}!function(){qn(this,(function(){const n=Qn,t=new RegExp(n(299)),e=new RegExp(n(322),"i"),r=tt(n(310));t[n(316)](r+n(284))&&e.test(r+"input")?tt():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(){const n=["chain","action","warn","6380430zMmWJe","virtualScene","component","isArray","background","TresEnvSence","$slots","call","7942825PLmAZh","frames","update","7419qqqdZV","function *\\( *\\)","208610LjtxfU","debu","194578QqKzBM","__proto__","destructor","minFilter","toString","834hBTBCf","4735888cDExoK","table","init","generateMipmaps","environment","prototype","envSence","return (function() ","test","trace","texture","apply","18WiADdQ","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","constructor","counter","dispose","far","gger","length","error","4430464AebUtV","console","resolution","default",'{}.constructor("return this")( )',"useDefaultScene","type","info","7VSRYmR","value"];return(Xn=function(){return n})()}Jn(void 0,(function(){const n=Qn,t=function(){const n=Qn;let t;try{t=Function(n(315)+n(278)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(275)]||{},r=["log",n(286),n(281),n(273),"exception",n(309),n(317)];for(let o=0;o<r[n(272)];o++){const t=Jn.constructor[n(313)][n(323)](Jn),i=r[o],a=e[i]||t;t[n(303)]=Jn[n(323)](Jn),t[n(306)]=a[n(306)][n(323)](a),e[i]=t}}))();const nt=tn({__name:Yn(289),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){let e,r;const o=n,i=Q(null);t({texture:i});const{extend:a,renderer:c,scene:s}=W();let u=null,l=Q(null),y=null;const x=Q(null);en((()=>{var n,t;const e=Qn;null==(n=x[e(283)])||n[e(304)](),null==(t=l.value)||t.dispose()}));const{onBeforeLoop:b}=K();let I=1;b((()=>{const n=Qn;y&&x[n(283)]&&l[n(283)]&&(o[n(296)]===1/0||I<o[n(296)])&&(o[n(279)]?y[n(297)](c[n(283)],s[n(283)]):y[n(297)](c.value,ln(x[n(283)][n(288)])),I++)}));const w=([e,r]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=Q([]),path:s=Q(""),background:u}=q(n);J(n,(()=>{o()}));const l=Q(null),h=X((()=>Array.isArray(c.value))),v=X((()=>h[e(166)]?f:Y));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(151)]>0&&!(null==i?void 0:i[r(166)])){try{l[r(166)]=await $(v.value,h[r(166)]?[...nn(n)]:nn(n),(n=>{t&&n[r(153)](nn(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l[r(166)]&&(l[r(166)][r(126)]=h[r(166)]?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(166)]&&n&&(r[t(166)].environment=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(166)])?t[i(166)][i(132)]:o,a=r[i(166)][i(152)];!(null==a?void 0:a[i(149)])&&(a=void 0),r[i(166)][i(152)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(166)]&&n&&(r[t(166)].backgroundBlurriness=n)}),{immediate:!0}),J((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Nn){const e=Wn,i=Nn[n];try{l[t(166)]=await $(Y,i,(n=>{e&&n[t(153)](e)}))}catch(r){throw new Error(t(146)+r)}l[t(166)]&&l[t(166)]&&(l[t(166)][t(126)]=d),o()}else if(n&&!(n in Nn))throw new Error(t(127)+Object[t(160)](Nn)[t(144)](", "))}),{immediate:!0}),l}(o,l))),e=await e,r(),e),S=n=>{const t=Qn;n?(s[t(283)][t(312)]=n[t(318)],o[t(291)]&&(s[t(283)][t(291)]=n[t(318)])):(s[t(283)][t(312)]=w.value,o[t(291)]&&(s[t(283)].background=w[t(283)]))};J(w,(n=>{const t=Qn;l[t(283)]&&S(l[t(283)])}),{immediate:!0,deep:!0}),a({EnvSence:zn});const M=()=>{var n;const t=Qn;null==(n=l.value)||n[t(269)](),l[t(283)]=new v(o[t(276)]),y=new m(o.near,o[t(270)],l[t(283)]),o.useDefaultScene?(l[t(283)][t(318)][t(280)]=g,l[t(283)][t(318)][t(311)]=!1,l[t(283)].texture[t(305)]=_,l[t(283)][t(318)].magFilter=_):l.value[t(318)][t(280)]=h,S(l[t(283)])};return J((()=>un().default),(n=>{var t,e;const r=Qn;n&&(!l[r(283)]||l[r(283)][r(318)].type!==h)&&(u=n(),Array[r(290)](u)&&u.length>0&&"symbol"!=typeof(null==(t=u[0])?void 0:t[r(280)]))?M():(null==(e=l[r(283)])||e[r(269)](),l[r(283)]=null,S(null))}),{immediate:!0,deep:!0}),i.value=w,J((()=>o.useDefaultScene),(n=>{l[Qn(283)]&&M()})),(n,t)=>{const e=Qn;return nn(l)?(on(),an(e(292),{key:0,ref_key:e(314),ref:x},[cn(n[e(293)],e(277))],512)):sn("",!0)}}});function tt(n){function t(n){const e=Qn;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(319)](e(325));1!==(""+n/n)[e(272)]||n%20==0?function(){return!0}[e(324)](e(301)+e(271))[e(294)](e(285)):function(){return!1}[e(324)](e(301)+e(271))[e(319)](e(321)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=ot;!function(n,t){const e=ot,r=at();for(;;)try{if(305229===-parseInt(e(486))/1*(parseInt(e(512))/2)+parseInt(e(527))/3+parseInt(e(515))/4*(-parseInt(e(528))/5)+parseInt(e(492))/6*(-parseInt(e(519))/7)+parseInt(e(479))/8+-parseInt(e(502))/9+parseInt(e(493))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(530)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(n,t){const e=at();return(ot=function(n,t){return e[n-=477]})(n,t)}!function(){rt(this,(function(){const n=ot,t=new RegExp(n(514)),e=new RegExp(n(491),"i"),r=pt(n(494));t[n(506)](r+n(485))&&e[n(506)](r+n(511))?pt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(530)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(){const n=["201TCFFzu","circle","value","bind","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","52386IuKlua","17309990vyjQxX","init","toString","TresRingGeometry",'{}.constructor("return this")( )',"index","color","toneMapped","material","3990807hoIDri","needsUpdate","multiplyScalar","call","test","log","console","stateObject","side","input","3698cnbsSj","action","function *\\( *\\)","272vDlzGX","string","info","debu","469Mouhuf","from","while (true) {}","TresPlaneGeometry","exception","constructor","trace","rect","288789plAxZq","43325KVbSGs","set","apply","error","intensity","3737888WvDFcL","length","__proto__","TresMeshBasicMaterial","gger","map","chain"];return(at=function(){return n})()}it(void 0,(function(){const n=ot,t=function(){const n=ot;let t;try{t=Function("return (function() "+n(497)+");")()}catch(e){t=window}return t}(),e=t[n(508)]=t[n(508)]||{},r=[n(507),"warn",n(517),n(477),n(523),"table",n(525)];for(let o=0;o<r[n(480)];o++){const t=it[n(524)].prototype[n(489)](it),i=r[o],a=e[i]||t;t[n(481)]=it[n(489)](it),t[n(495)]=a[n(495)][n(489)](a),e[i]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=["toneMapped",et(484),et(510),et(499)],ft=tn({__name:et(498),props:{args:{default:null},from:{default:et(526)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=Q();return fn((()=>{const n=ot;r[n(488)]&&(r.value.color[n(504)](e[n(478)]),r[n(488)][n(503)]=!0)})),J((()=>e[t(499)]),(n=>{const o=t;r.value&&(r[o(488)][o(499)][o(529)](n),r[o(488)][o(499)].multiplyScalar(e[o(478)]),r.value.needsUpdate=!0)})),pn((()=>{})),(n,o)=>{const i=t;return on(),an("TresMesh",null,[e[i(520)]===i(487)?(on(),an(i(496),ct)):"ring"===e.from?(on(),an(i(496),st)):e[i(520)]===i(526)?(on(),an(i(522),ut)):(on(),dn(e[i(520)],{key:3,args:e})),hn(i(482),{ref_key:i(501),ref:r,toneMapped:n[i(500)],map:n.map,side:nn(x),color:n[i(499)]},null,8,lt)])}}});function pt(n){function t(n){const e=ot;if(typeof n===e(516))return function(n){}[e(524)](e(521))[e(530)](e(490));1!==(""+n/n)[e(480)]||n%20==0?function(){return!0}[e(524)](e(518)+"gger")[e(505)](e(513)):function(){return!1}[e(524)]("debu"+e(483)).apply(e(509)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ht,r=mt();for(;;)try{if(180593===-parseInt(e(172))/1*(-parseInt(e(185))/2)+parseInt(e(179))/3*(-parseInt(e(158))/4)+parseInt(e(159))/5+parseInt(e(166))/6+parseInt(e(165))/7+parseInt(e(177))/8*(parseInt(e(157))/9)+-parseInt(e(174))/10*(parseInt(e(144))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=mt();return(ht=function(n,t){return e[n-=144]})(n,t)}!function(){dt(this,(function(){const n=ht,t=new RegExp(n(152)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=_t("init");t[n(176)](r+n(186))&&e[n(176)](r+n(169))?_t():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(183)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(){const n=["value","function *\\( *\\)","length","render","stateObject","gger","18bsRmMf","852gUgOHY","314095ITgqdE","width","exception","warn","debu","toString","730541MTOYsa","1888782DjOFtM","action","dispose","input","info","console","97853nrFPVM","clear","30JJVoDV","log","test","423736UgkrDm","counter","1668GDAsGh","depthTexture","bind","setRenderTarget","apply",'{}.constructor("return this")( )',"2MeVhGl","chain","trace","prototype","1418065NKkYIo","constructor","call","height","string","while (true) {}","format"];return(mt=function(){return n})()}function gt(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?q(n):q(mn(n)),{onLoop:s}=K(),{camera:u,renderer:l,scene:f,sizes:p}=W();return fn((()=>{var n;const a=ht;null==(n=t[a(151)])||n[a(168)](),t.value=new b((null==r?void 0:r[a(151)])||p[a(160)].value,(null==e?void 0:e[a(151)])||p[a(147)].value,c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(151)])),(null==i?void 0:i[a(151)])&&(t[a(151)][a(180)]=new w((null==r?void 0:r[a(151)])||p[a(160)].value,(null==e?void 0:e.value)||p[a(147)][a(151)]),t[a(151)][a(180)][a(150)]=S,t[a(151)][a(180)].type=M)})),s((()=>{const n=ht;(null==a?void 0:a.value)&&(l[n(151)][n(182)](ln(t[n(151)])),l[n(151)][n(173)](),l[n(151)][n(154)](ln(f.value),ln(u[n(151)])),l.value[n(182)](null))})),gn((()=>{var n;const e=ht;null==(n=t[e(151)])||n[e(168)]()})),t}function _t(n){function t(n){const e=ht;if(typeof n===e(148))return function(n){}[e(145)](e(149))[e(183)](e(178));1!==(""+n/n)[e(153)]||n%20==0?function(){return!0}[e(145)](e(163)+e(156))[e(146)](e(167)):function(){return!1}[e(145)](e(163)+e(156))[e(183)](e(155)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=ht;let t;try{t=Function("return (function() "+n(184)+");")()}catch(o){t=window}const e=t[n(171)]=t[n(171)]||{},r=[n(175),n(162),n(170),"error",n(161),"table",n(187)];for(let i=0;i<r[n(153)];i++){const t=vt[n(145)][n(188)].bind(vt),o=r[i],a=e[o]||t;t.__proto__=vt[n(181)](vt),t[n(164)]=a.toString[n(181)](a),e[o]=t}}))();const yt=It;!function(n,t){const e=It,r=Mt();for(;;)try{if(724556===-parseInt(e(427))/1*(parseInt(e(429))/2)+parseInt(e(414))/3*(-parseInt(e(421))/4)+-parseInt(e(430))/5+-parseInt(e(453))/6*(parseInt(e(428))/7)+parseInt(e(415))/8*(-parseInt(e(459))/9)+parseInt(e(449))/10*(parseInt(e(450))/11)+parseInt(e(403))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=It,t=new RegExp(n(437)),e=new RegExp(n(404),"i"),r=Rt(n(456));t.test(r+n(426))&&e.test(r+n(451))?Rt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(n,t){const e=Mt();return(It=function(n,t){return e[n-=403]})(n,t)}bt(void 0,(function(){const n=It,t=function(){const n=It;let t;try{t=Function(n(461)+n(458)+");")()}catch(e){t=window}return t}(),e=t[n(454)]=t[n(454)]||{},r=[n(439),n(435),n(445),n(452),n(405),"table",n(444)];for(let o=0;o<r[n(417)];o++){const t=bt[n(457)][n(423)].bind(bt),i=r[o],a=e[i]||t;t[n(411)]=bt[n(441)](bt),t[n(446)]=a[n(446)][n(441)](a),e[i]=t}}))();const wt=[yt(460),yt(448)],St=tn({__name:yt(410),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=K(),p=gt({width:u.fboResolution,height:u.fboResolution,isLoop:!1}),d=gt({width:u.fboResolution,height:u[e(424)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s.value=function(n,t){const e=It;let r;return n[e(442)]((n=>{const o=e;n.isMesh&&n.material&&n[o(406)][o(434)]===t&&(r=n)})),r}(i[n(425)],r[n(425)][n(434)])})),f((({elapsed:n})=>{const t=e;r.value[t(413)]=n,r.value[t(460)]===d[t(425)].texture&&s[t(425)]&&(m=a[t(425)][t(408)],h=i.value[t(412)],v=r[t(425)][t(431)],g=s.value.material[t(448)],s[t(425)][t(406)]=l,u[t(419)]&&(a[t(425)].setRenderTarget(p[t(425)]),a[t(425)][t(416)](i[t(425)],c[t(425)]),s[t(425)].material=r[t(425)],s[t(425)].material[t(455)]=u.backsideThickness,s[t(425)][t(406)][t(460)]=p[t(425)][t(436)],s[t(425)][t(406)][t(448)]=R,s[t(425)].material[t(431)]=0),a[t(425)][t(420)](d[t(425)]),a[t(425)].render(i.value,c.value),s[t(425)][t(406)][t(460)]=d.value[t(436)],s[t(425)][t(406)]=r.value,s[t(425)][t(406)][t(455)]=u[t(455)],s[t(425)][t(406)][t(448)]=g,s.value.material.envMapIntensity=v,i[t(425)][t(412)]=h,a[t(425)][t(420)](null),a.value.toneMapping=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return on(),an(o(440),{ref_key:o(418),ref:r,buffer:nn(d)[o(436)],side:nn(x)},null,8,wt)}}});function Mt(){const n=["__proto__","background","time","6087PVaxuL","198888leXAWM","render","length","MeshTransmissionMaterialClass","backside","setRenderTarget","780rSRLRr","action","prototype","fboResolution","value","chain","2WVouGt","4319GeTlLm","91294FWOssb","2327320vuNIkX","envMapIntensity","string","debu","uuid","warn","texture","function *\\( *\\)","counter","log","TresMeshTransmissionMaterial","bind","traverse","call","trace","info","toString","gger","side","110kLnIeO","1175504ZhNqpj","input","error","12102hDxoPQ","console","thickness","init","constructor",'{}.constructor("return this")( )',"36WgQIsV","buffer","return (function() ","22144776cBXspH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","material","stateObject","toneMapping","apply","index"];return(Mt=function(){return n})()}function Rt(n){function t(n){const e=It;if(typeof n===e(432))return function(n){}[e(457)]("while (true) {}")[e(409)](e(438));1!==(""+n/n).length||n%20==0?function(){return!0}[e(457)](e(433)+e(447))[e(443)](e(422)):function(){return!1}[e(457)]("debu"+e(447))[e(409)](e(407)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Tt,r=Dt();for(;;)try{if(170118===-parseInt(e(207))/1*(parseInt(e(217))/2)+parseInt(e(199))/3*(parseInt(e(247))/4)+parseInt(e(195))/5*(-parseInt(e(225))/6)+-parseInt(e(216))/7+parseInt(e(191))/8+parseInt(e(226))/9+parseInt(e(230))/10*(parseInt(e(228))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Tt,t=new RegExp(n(234)),e=new RegExp(n(238),"i"),r=zt(n(210));t[n(229)](r+n(215))&&e[n(229)](r+n(236))?zt():r("0")}))()}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(n,t){const e=Dt();return(Tt=function(n,t){return e[n-=189]})(n,t)}function Dt(){const n=["table","trace","disableY","1943768Jbszwk","gger","length","TresGroup","45265jAOZkk","disableZ","__proto__","error","6VjcRPk","string","call","log","apply","return (function() ","max","left","2003OnKHwg","back","prototype","init","info",'{}.constructor("return this")( )',"set","value","chain","1677795XJyKsU","282rMAynA","gref","default","constructor","toString","disableX","getCenter","inner","120KVInOM","869328tEEBOv","action","5665ZebKux","test","8010mWoLgx","front","console","outer","function *\\( *\\)","min","input","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","precise","disable","debu","matrixWorld","warn","top","position","242416vKDGFQ","counter","right","setFromObject","identity"];return(Dt=function(){return n})()}Et(void 0,(function(){const n=Tt;let t;try{t=Function(n(204)+n(212)+");")()}catch(o){t=window}const e=t[n(232)]=t.console||{},r=[n(202),n(244),n(211),n(198),"exception",n(252),n(189)];for(let i=0;i<r[n(193)];i++){const t=Et.constructor[n(209)][n(237)](Et),o=r[i],a=e[o]||t;t[n(197)]=Et[n(237)](Et),t[n(221)]=a[n(221)].bind(a),e[o]=t}}))();const Pt=tn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return pn((()=>{const n=Tt;if(!r[n(214)])return;if(!o[n(214)])return;r[n(214)][n(243)][n(251)]();const e=(new A)[n(250)](o.value,t[n(240)]),i=new E,a=new T,c=e[n(205)].x-e[n(235)].x,s=e[n(205)].y-e.min.y,u=e[n(205)].z-e[n(235)].z;e[n(223)](i),e.getBoundingSphere(a);const l=t[n(245)]?s/2:t.bottom?-s/2:0,f=t[n(206)]?-c/2:t[n(249)]?c/2:0,p=t[n(231)]?u/2:t[n(208)]?-u/2:0;r[n(214)][n(246)][n(213)](t[n(241)]||t[n(222)]?0:-i.x+f,t[n(241)]||t[n(190)]?0:-i.y+l,t[n(241)]||t[n(196)]?0:-i.z+p)})),(n,t)=>{const i=Tt;return on(),an("TresGroup",{ref_key:i(218),ref:e},[hn(i(194),{ref_key:i(233),ref:r},[hn("TresGroup",{ref_key:i(224),ref:o},[cn(n.$slots,i(219))],512)],512)],512)}}});function zt(n){function t(n){const e=Tt;if(typeof n===e(200))return function(n){}[e(220)](e(239)).apply(e(248));1!==(""+n/n)[e(193)]||n%20==0?function(){return!0}[e(220)](e(242)+e(192))[e(201)](e(227)):function(){return!1}[e(220)](e(242)+e(192))[e(203)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Bt;!function(n,t){const e=Bt,r=Ut();for(;;)try{if(975067===parseInt(e(297))/1*(parseInt(e(284))/2)+parseInt(e(303))/3*(-parseInt(e(295))/4)+parseInt(e(336))/5+parseInt(e(298))/6+-parseInt(e(288))/7+-parseInt(e(294))/8+parseInt(e(338))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Bt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(300),"i"),r=Lt(n(314));t.test(r+n(318))&&e[n(293)](r+n(323))?Lt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(315)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Ut();return(Bt=function(n,t){return e[n-=283]})(n,t)}Ft(void 0,(function(){const n=Bt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(326)]=t[n(326)]||{},r=[n(320),n(283),n(285),"error","exception",n(310),n(290)];for(let i=0;i<r[n(333)];i++){const t=Ft[n(334)][n(329)][n(287)](Ft),o=r[i],a=e[o]||t;t.__proto__=Ft.bind(Ft),t[n(327)]=a[n(327)][n(287)](a),e[o]=t}}))();const kt=["object"],jt=[Ot(330)];function Ut(){const n=["toString","while (true) {}","prototype","object","backside","$slots","length","constructor","#ffffff","4465115BOZqGy","stateObject","10160550CUcrDo","ior","warn","202daCQyb","info","far","bind","1015098jVVwrb","debu","trace","lightSource","set","test","14167008ebDHCu","1172TAxynb","worldRadius","6481GhVnVJ","4129104sRKrGX","group","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","intensity","color","4851EHrNUk","helper","params","default","scene","add","call","table","Vector3","gger","resolution","init","apply","backsideIOR","update","chain","TresGroup","log","action","value","input","causticsOnly","primitive","console"];return(Ut=function(){return n})()}const Nt=tn({__name:"index",props:{color:{default:Ot(335)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=W(),o=Mn(r[t(322)],{frames:1/0,resolution:e[t(313)],worldRadius:e.worldRadius});o[t(305)][t(331)]=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o[e(307)][e(308)](n)}));const{onBeforeLoop:a}=K();return a((({elapsed:n})=>{o[t(317)]()})),fn((()=>{const n=t;e[n(302)]&&o[n(305)].color.set(e[n(302)]),e.ior&&(o.params[n(339)]=e[n(339)]),e[n(316)]&&(o.params[n(316)]=e[n(316)]),e[n(286)]&&(o[n(305)][n(286)]=e[n(286)]),e[n(296)]&&(o.params[n(296)]=e[n(296)]),e.intensity&&(o[n(305)][n(301)]=e.intensity)})),J((()=>e.causticsOnly),(n=>{const e=t;o[e(305)][e(324)]=n})),J((()=>e[t(291)]),(n=>{const e=t;n&&o[e(305)][e(291)]instanceof D[e(311)]&&o.params[e(291)][e(292)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(xn,null,[hn(r(319),{ref_key:r(299),ref:i},[cn(n[r(332)],r(306))],512),hn(r(325),{object:nn(o)[r(299)],position:[0,.003,0]},null,8,kt),hn(r(325),{object:nn(o)[r(304)],visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=Bt;if("string"==typeof n)return function(n){}[e(334)](e(328))[e(315)]("counter");1!==(""+n/n)[e(333)]||n%20==0?function(){return!0}[e(334)](e(289)+"gger")[e(309)](e(321)):function(){return!1}[e(334)](e(289)+e(312))[e(315)](e(337)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=Gt();for(;;)try{if(409306===parseInt(e(379))/1+-parseInt(e(388))/2*(parseInt(e(389))/3)+parseInt(e(378))/4*(-parseInt(e(352))/5)+parseInt(e(397))/6*(-parseInt(e(356))/7)+parseInt(e(370))/8*(-parseInt(e(340))/9)+parseInt(e(371))/10+parseInt(e(365))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(344)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ht(this,(function(){const n=Vt,t=new RegExp(n(362)),e=new RegExp(n(380),"i"),r=$t(n(364));t[n(377)](r+n(372))&&e.test(r+n(347))?$t():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(344)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["console","exception","apply","warn",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","input","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","error","constructor","string","1282390DiiHNX","#if defined( SHADOWMAP_TYPE_PCF )","counter","__proto__","25662eMTxyO",'{}.constructor("return this")( )',"call","table","traverse","#ifdef USE_SHADOWMAP","function *\\( *\\)",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","init","3808233xtEzwC","; i ++) {\n        offset = (vogelDiskSample(j, ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","toString","prototype","3164776SXOLNK","5403510gGSjhe","chain","remove","bind","compile","log","test","4CMBcAR","772933HrHrLC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","shadowmap_pars_fragment","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","gger","dispose","trace","info","20KaXozh","95847NphNJH","material","return (function() ","replace","ShaderChunk","properties","action","length","456RuBLYS","programs","stateObject","while (true) {}","9BVwwGl","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"];return(Gt=function(){return n})()}function Vt(n,t){const e=Gt();return(Vt=function(n,t){return e[n-=338]})(n,t)}Zt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function(n(391)+n(357)+");")()}catch(e){t=window}return t}(),e=t[n(342)]=t[n(342)]||{},r=[n(376),n(345),n(387),n(349),n(343),n(359),n(386)];for(let o=0;o<r[n(396)];o++){const t=Zt[n(350)][n(369)].bind(Zt),i=r[o],a=e[i]||t;t[n(355)]=Zt[n(374)](Zt),t[n(368)]=a[n(368)][n(374)](a),e[i]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=D[r(393)][r(381)];return D[r(393)][r(381)]=D[r(393)][r(381)].replace(r(361),r(348)+t+r(363)+n+r(383)+e+r(366)+e+r(346)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(367)+t+r(382)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(392)](r(353),r(341)),(n,t,e)=>{D[r(393)].shadowmap_pars_fragment=o,function(n,t,e){const r=Vt;t[r(360)]((t=>{const e=r;t.material&&(Array.isArray(t[e(390)])?t[e(390)].forEach((t=>{const r=e;n.properties[r(373)](t),t[r(385)]()})):(n[e(394)][e(373)](t.material),t[e(390)][e(385)]()))})),n[r(387)][r(398)][r(396)]=0,n[r(375)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Vt;if(typeof n===e(351))return function(n){}.constructor(e(339))[e(344)](e(354));1!==(""+n/n)[e(396)]||n%20==0?function(){return!0}[e(350)]("debu"+e(384))[e(358)](e(395)):function(){return!1}[e(350)]("debu"+e(384)).apply(e(338)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Kt(){const n=["exception","625962VLsedw","toString","2731380phxJHv","value","18264OdOAuA","traverse","log","5Wgxhgc","warn","apply","1351ZSwsmk","init","index","material","chain","action","dispose","809874agROMj","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","console","table","bind","while (true) {}","constructor","23553dJXiZq","error","string","length","prototype","call","146709NjLNQH","test","2210snforf","return (function() ","889266YtHmdg"];return(Kt=function(){return n})()}const Yt=qt;function qt(n,t){const e=Kt();return(qt=function(n,t){return e[n-=492]})(n,t)}!function(n,t){const e=qt,r=Kt();for(;;)try{if(350326===-parseInt(e(529))/1+-parseInt(e(514))/2+parseInt(e(497))/3+parseInt(e(499))/4+parseInt(e(504))/5*(parseInt(e(495))/6)+-parseInt(e(507))/7*(-parseInt(e(501))/8)+parseInt(e(523))/9*(-parseInt(e(493))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(506)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qt(this,(function(){const n=qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(516),"i"),r=ne(n(508));t[n(492)](r+n(511))&&e.test(r+"input")?ne():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jt(void 0,(function(){const n=qt;let t;try{t=Function(n(494)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(518)]=t[n(518)]||{},r=[n(503),n(505),"info",n(524),n(496),n(519),n(515)];for(let i=0;i<r[n(526)];i++){const t=Jt.constructor[n(527)][n(520)](Jt),o=r[i],a=e[o]||t;t.__proto__=Jt[n(520)](Jt),t[n(498)]=a.toString.bind(a),e[o]=t}}))();const Xt=tn({__name:Yt(509),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(500)],o[t(500)],e.value),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o[t(500)][t(502)]((n=>{const e=t;n instanceof l&&n[e(510)][e(513)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=qt;if(typeof n===e(525))return function(n){}[e(522)](e(521))[e(506)](e(517));1!==(""+n/n)[e(526)]||n%20==0?function(){return!0}[e(522)]("debugger")[e(528)](e(512)):function(){return!1}[e(522)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=ae;!function(n,t){const e=ae,r=oe();for(;;)try{if(879171===-parseInt(e(212))/1+-parseInt(e(243))/2+-parseInt(e(248))/3*(-parseInt(e(209))/4)+parseInt(e(217))/5*(-parseInt(e(249))/6)+parseInt(e(221))/7*(-parseInt(e(251))/8)+parseInt(e(239))/9+-parseInt(e(235))/10*(-parseInt(e(219))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ae(222)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=ae,t=new RegExp(n(216)),e=new RegExp(n(236),"i"),r=se(n(228));t.test(r+n(230))&&e[n(255)](r+n(220))?se():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(){const n=["bind","prototype","uniforms","multiplyScalar","795512IxDvKc","kernel","info","592365OiuKEw","encodings_fragment","action","call","function *\\( *\\)","16105AyYaXP","halfTexelSize","1232aBRQkM","input","8772351yeqLyc","apply","setResolution",">\n        }","toString","constructor","resolution","init","trace","chain","while (true) {}","__proto__","return (function() ","gger","160030WEubiQ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","stateObject","11174733MCBHcE","log","debu","error","2784348fhKpWm","warn","colorspace_fragment","console","setTexelSize","21PKKDro","576NBneZG","value","8oMJmSy","copy","counter","texelSize","test",'{}.constructor("return this")( )',"set","toneMapped","length"];return(oe=function(){return n})()}re(void 0,(function(){const n=ae;let t;try{t=Function(n(233)+n(256)+");")()}catch(o){t=window}const e=t[n(246)]=t[n(246)]||{},r=[n(240),n(244),n(211),n(242),"exception","table",n(229)];for(let i=0;i<r[n(204)];i++){const t=re.constructor[n(206)].bind(re),o=r[i],a=e[o]||t;t[n(232)]=re[n(205)](re),t[n(225)]=a[n(225)][n(205)](a),e[o]=t}}))();const ie=parseInt(F.replace(/\D+/g,""));function ae(n,t){const e=oe();return(ae=function(n,t){return e[n-=202]})(n,t)}class ce extends P{constructor(n=new O){const t=ae;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(237)+t(ie>=154?245:213)+t(224),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:C,depthWrite:!1,depthTest:!1}),this[t(203)]=!1,this[t(247)](n.x,n.y),this[t(210)]=new Float32Array([0,1,2,2,3])}[te(247)](n,t){const e=te;this[e(207)][e(254)].value[e(202)](n,t),this.uniforms[e(218)][e(250)][e(202)](n,t)[e(208)](.5)}[te(223)](n){const t=te;this[t(207)][t(227)][t(250)][t(252)](n)}}function se(n){function t(n){const e=ae;if("string"==typeof n)return function(n){}[e(226)](e(231)).apply(e(253));1!==(""+n/n).length||n%20==0?function(){return!0}[e(226)](e(241)+e(234))[e(215)](e(214)):function(){return!1}[e(226)](e(241)+e(234))[e(222)](e(238)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ue=pe;!function(n,t){const e=pe,r=de();for(;;)try{if(819669===-parseInt(e(468))/1*(-parseInt(e(471))/2)+parseInt(e(486))/3*(parseInt(e(458))/4)+-parseInt(e(512))/5+parseInt(e(497))/6+-parseInt(e(487))/7*(-parseInt(e(513))/8)+parseInt(e(461))/9*(-parseInt(e(499))/10)+-parseInt(e(476))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(455)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=pe,t=new RegExp(n(485)),e=new RegExp(n(508),"i"),r=ve(n(501));t.test(r+n(465))&&e[n(460)](r+n(478))?ve():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(455)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(n,t){const e=de();return(pe=function(n,t){return e[n-=455]})(n,t)}function de(){const n=["render","init","depthScale","string","console","warn","kernel",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","minDepthThreshold","trace","value","764130xLMJjK","16GmmStr","apply","setTexelSize","clone","260SqprsC","counter","test","3312NrNNjT","setAttribute","renderTargetB","renderToScreen","chain","toString","action","1007jYfhiE","texture","scene","3128BKflCw","debu","bind","call","position","29662171McGssr","log","input","gger","uniforms","add","return (function() ","depthToBlurRatioBias","stateObject","function *\\( *\\)","64503GpXkGB","2977709ZfELZM","screen","convolutionMaterial","camera","setResolution","maxDepthThreshold","frustumCulled","defines","renderTargetA","constructor","4576950QJgvwY","length","24920CQZIka"];return(de=function(){return n})()}fe(void 0,(function(){const n=pe;let t;try{t=Function(n(482)+n(507)+");")()}catch(o){t=window}const e=t[n(504)]=t[n(504)]||{},r=[n(477),n(505),"info","error","exception","table",n(510)];for(let i=0;i<r[n(498)];i++){const t=fe[n(496)].prototype[n(473)](fe),o=r[i],a=e[o]||t;t.__proto__=fe[n(473)](fe),t[n(466)]=a[n(466)][n(473)](a),e[o]=t}}))();class he{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(464)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(463)]=this[c(495)][c(457)](),this.convolutionMaterial=new ce,this[c(489)][c(456)](1/t,1/e),this[c(489)][c(491)](new O(t,e)),this[c(470)]=new u,this[c(490)]=new B,this[c(489)][c(480)][c(509)][c(511)]=r,this[c(489)][c(480)][c(492)][c(511)]=o,this[c(489)].uniforms[c(502)][c(511)]=i,this.convolutionMaterial[c(480)][c(483)][c(511)]=a,this[c(489)][c(494)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(462)](c(475),new j(s,3)),p[c(462)]("uv",new j(f,2)),this.screen=new l(p,this[c(489)]),this[c(488)][c(493)]=!1,this[c(470)][c(481)](this[c(488)])}[ue(500)](n,t,e){const r=ue,o=this[r(470)],i=this[r(490)],a=this[r(495)],c=this[r(463)],s=this[r(489)],u=s.uniforms;u.depthBuffer[r(511)]=t.depthTexture;const l=s[r(506)];let f,p,d,h=t;for(p=0,d=l[r(498)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(506)][r(511)]=l[p],u.inputBuffer[r(511)]=h.texture,n.setRenderTarget(f),n[r(500)](o,i),h=f;u[r(506)][r(511)]=l[p],u.inputBuffer[r(511)]=h[r(469)],n.setRenderTarget(this[r(464)]?null:e),n[r(500)](o,i)}}function ve(n){function t(n){const e=pe;if(typeof n===e(503))return function(n){}[e(496)]("while (true) {}")[e(455)](e(459));1!==(""+n/n)[e(498)]||n%20==0?function(){return!0}[e(496)](e(472)+e(479))[e(474)](e(467)):function(){return!1}[e(496)](e(472)+e(479))[e(455)](e(484)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var me=xe;!function(n,t){for(var e=xe,r=ye();;)try{if(778045===-parseInt(e(460))/1+parseInt(e(428))/2*(-parseInt(e(458))/3)+parseInt(e(464))/4+parseInt(e(421))/5*(-parseInt(e(474))/6)+-parseInt(e(439))/7*(parseInt(e(403))/8)+parseInt(e(446))/9*(-parseInt(e(449))/10)+parseInt(e(436))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=xe,t=new RegExp(n(457)),e=new RegExp(n(431),"i"),r=Ie(n(410));t.test(r+n(462))&&e[n(426)](r+n(423))?Ie():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ye(){var n=["_tDepth","stateObject","tDiffuse","_blurStrength","2770803nyOkpH","defines","trace","10zigcxB","apply","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","replace","mixContrast","#include <emissivemap_fragment>","value","_tDiffuseBlur","function *\\( *\\)","19395adplha","_mixContrast","653139eBCJrx","textureMatrix","chain","console","4478824RgncVE","distortion","warn","table","return (function() ","_depthToBlurRatioBias","#include <project_vertex>","uniforms","action","bind","6FIZuyx","log","while (true) {}","toString","constructor","prototype","tDiffuseBlur","mixBlur","73752vBgsFH","error","tDepth","depthToBlurRatioBias","counter","_maxDepthThreshold","_hasBlur","init","length","mixStrength","depthScale","distortionMap","USE_UV","hasBlur","_minDepthThreshold","_textureMatrix","exception","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","6811610AcCBbt","_tDiffuse","input","fragmentShader","mirror","test","__proto__","382ihQYXR","_depthScale","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_mixBlur","setValues","_mirror","_distortion","50288425iXQHRV","maxDepthThreshold","minDepthThreshold","1029OtXbJD","vertexShader","_distortionMap"];return(ye=function(){return n})()}function xe(n,t){var e=ye();return(xe=function(n,t){return e[n-=399]})(n,t)}_e(void 0,(function(){var n,t=xe;try{n=Function(t(468)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(463)]=n.console||{},r=[t(475),t(466),"info",t(404),t(419),t(467),t(448)],o=0;o<r[t(411)];o++){var i=_e[t(399)][t(400)][t(473)](_e),a=r[o],c=e[a]||i;i[t(427)]=_e.bind(_e),i[t(477)]=c.toString[t(473)](c),e[a]=i}}))();class be extends U{constructor(n={}){var t=xe;super(n),this[t(442)]={value:null},this[t(441)]={value:null},this[t(422)]={value:null},this[t(456)]={value:null},this[t(418)]={value:null},this._hasBlur={value:!1},this[t(434)]={value:0},this[t(432)]={value:0},this._blurStrength={value:.5},this[t(417)]={value:.9},this._maxDepthThreshold={value:1},this[t(429)]={value:0},this[t(469)]={value:.25},this[t(435)]={value:1},this._mixContrast={value:1},this[t(433)](n)}onBeforeCompile(n){var t,e=xe;!(null==(t=n[e(447)])?void 0:t.USE_UV)&&(n[e(447)][e(415)]=""),n[e(471)][e(416)]=this[e(409)],n[e(471)][e(444)]=this[e(422)],n[e(471)].tDepth=this[e(442)],n[e(471)][e(414)]=this[e(441)],n[e(471)][e(401)]=this._tDiffuseBlur,n[e(471)][e(461)]=this[e(418)],n[e(471)][e(425)]=this[e(434)],n[e(471)][e(402)]=this[e(432)],n[e(471)].mixStrength=this._blurStrength,n[e(471)][e(438)]=this[e(417)],n[e(471)].maxDepthThreshold=this._maxDepthThreshold,n[e(471)][e(413)]=this._depthScale,n[e(471)][e(406)]=this[e(469)],n[e(471)].distortion=this[e(435)],n[e(471)][e(453)]=this[e(459)],n[e(440)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(440)],n[e(440)]=n.vertexShader[e(452)](e(470),e(451)),n.fragmentShader=e(420)+n[e(424)],n.fragmentShader=n[e(424)][e(452)](e(454),e(430))}get[me(444)](){return this._tDiffuse.value}set[me(444)](n){this[me(422)].value=n}get[me(405)](){var n=me;return this[n(442)][n(455)]}set tDepth(n){var t=me;this[t(442)][t(455)]=n}get distortionMap(){var n=me;return this[n(441)][n(455)]}set distortionMap(n){var t=me;this[t(441)][t(455)]=n}get[me(401)](){return this._tDiffuseBlur.value}set[me(401)](n){var t=me;this[t(456)][t(455)]=n}get[me(461)](){return this[me(418)].value}set textureMatrix(n){var t=me;this[t(418)][t(455)]=n}get[me(416)](){var n=me;return this._hasBlur[n(455)]}set[me(416)](n){var t=me;this[t(409)][t(455)]=n}get[me(425)](){var n=me;return this[n(434)][n(455)]}set[me(425)](n){this[me(434)].value=n}get[me(402)](){return this[me(432)].value}set mixBlur(n){var t=me;this[t(432)][t(455)]=n}get[me(412)](){var n=me;return this._blurStrength[n(455)]}set[me(412)](n){var t=me;this[t(445)][t(455)]=n}get[me(438)](){return this[me(417)].value}set minDepthThreshold(n){var t=me;this[t(417)][t(455)]=n}get[me(437)](){var n=me;return this._maxDepthThreshold[n(455)]}set maxDepthThreshold(n){var t=me;this[t(408)][t(455)]=n}get[me(413)](){return this[me(429)].value}set[me(413)](n){var t=me;this._depthScale[t(455)]=n}get depthToBlurRatioBias(){var n=me;return this[n(469)][n(455)]}set[me(406)](n){var t=me;this[t(469)][t(455)]=n}get[me(465)](){return this[me(435)].value}set distortion(n){var t=me;this[t(435)][t(455)]=n}get[me(453)](){var n=me;return this[n(459)][n(455)]}set mixContrast(n){var t=me;this[t(459)][t(455)]=n}}function Ie(n){function t(n){var e=xe;if("string"==typeof n)return function(n){}[e(399)](e(476))[e(450)](e(407));1!==(""+n/n).length||n%20==0?function(){return!0}[e(399)]("debugger").call(e(472)):function(){return!1}[e(399)]("debugger")[e(450)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Me;!function(n,t){const e=Me,r=De();for(;;)try{if(307624===parseInt(e(487))/1*(-parseInt(e(482))/2)+-parseInt(e(527))/3*(-parseInt(e(536))/4)+-parseInt(e(491))/5*(parseInt(e(449))/6)+-parseInt(e(525))/7+-parseInt(e(490))/8*(parseInt(e(498))/9)+-parseInt(e(496))/10+parseInt(e(508))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(521)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Me(n,t){const e=De();return(Me=function(n,t){return e[n-=445]})(n,t)}!function(){Se(this,(function(){const n=Me,t=new RegExp(n(476)),e=new RegExp(n(534),"i"),r=Te(n(465));t.test(r+n(514))&&e[n(447)](r+n(469))?Te():r("0")}))()}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Re(void 0,(function(){const n=Me;let t;try{t=Function("return (function() "+n(494)+");")()}catch(o){t=window}const e=t[n(464)]=t.console||{},r=[n(524),n(499),n(451),n(532),n(539),n(477),n(456)];for(let i=0;i<r.length;i++){const t=Re.constructor[n(501)][n(507)](Re),o=r[i],a=e[o]||t;t[n(538)]=Re[n(507)](Re),t[n(446)]=a[n(446)][n(507)](a),e[o]=t}}))();const Ae=["texture-matrix",we(506),we(509),"t-depth","t-diffuse-blur",we(458),we(461),we(546),we(445),we(489),"depth-to-blur-ratio-bias","distortion",we(484),we(455),we(533),we(457),we(454)],Ee=tn({__name:we(548),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=n;const{resolution:o,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,blur:l,mirror:f,mixBlur:p,mixStrength:d,distortion:v,distortionMap:m,mixContrast:g}=q(r),{camera:_,scene:y,renderer:x,extend:R}=W();R({MeshReflectorMaterial:be});const A=_n(),T=_n(),D=_n(),P=_n(),z=X((()=>{const n=Me;return typeof l.value===n(473)?[l[n(520)],l[n(520)]]:l[n(520)]})),O=X((()=>z.value[0]>0||z.value[1]>0)),C={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const r=Me;null==(n=A[r(520)])||n[r(522)][r(493)]();const l={minFilter:I,magFilter:I,type:h};var _,y;A[r(520)]=new b(o[r(520)],o[r(520)],(_=c({},l),y={depthBuffer:!0,depthTexture:new w(o[r(520)],o[r(520)],S,M)},t(_,e(y)))),T[r(520)]=new b(o[r(520)],o[r(520)],l),D.value=new he({resolution:o[r(520)],width:z[r(520)][0],height:z[r(520)][1],minDepthThreshold:i[r(520)],maxDepthThreshold:a.value,depthScale:s[r(520)],depthToBlurRatioBias:u[r(520)]}),P[r(520)]={mirror:f,textureMatrix:C[r(518)],mixBlur:p,tDiffuse:A[r(520)][r(522)],tDepth:A[r(520)][r(503)],tDiffuseBlur:A[r(520)][r(522)],hasBlur:O,mixStrength:d,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,distortion:v,distortionMap:m[r(520)],mixContrast:g,"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":s[r(520)]>0?"":void 0,"defines-USE_DISTORTION":m[r(520)]?"":void 0}}));const F=_n(),{onLoop:B}=K();B((()=>{var n;const t=Me;if(!(F[t(520)]&&x[t(520)]&&A[t(520)]&&_[t(520)]))return;const e=function(n,t){const e=Me;let r;return n[e(535)]((n=>{const o=e;n[o(471)]&&n[o(512)]&&n[o(512)][o(504)]===t&&(r=n)})),r}(y.value,F[t(520)][t(504)]);if(!e)return;e.visible=!1;const o=x[t(520)].xr[t(470)],i=x[t(520)].shadowMap[t(486)];(function(n){var t,e;const o=Me;if(C.reflectorWorldPosition[o(453)](n.matrixWorld),C[o(448)][o(453)](null==(t=_[o(520)])?void 0:t[o(450)]),C[o(505)][o(475)](n[o(450)]),C[o(542)][o(497)](0,0,1),C[o(542)].applyMatrix4(C[o(505)]),C[o(452)].addScaledVector(C.normal,r[o(479)]),C[o(468)].subVectors(C[o(452)],C.cameraWorldPosition),C[o(468)][o(519)](C[o(542)])>0)return;C.view[o(531)](C.normal)[o(460)](),C[o(468)][o(488)](C.reflectorWorldPosition),C[o(505)][o(475)](null==(e=_[o(520)])?void 0:e[o(450)]),C[o(529)].set(0,0,-1),C.lookAtPosition[o(481)](C[o(505)]),C[o(529)][o(488)](C.cameraWorldPosition),C[o(500)].subVectors(C.reflectorWorldPosition,C[o(529)]),C[o(500)][o(531)](C[o(542)])[o(460)](),C[o(500)][o(488)](C[o(452)]),C[o(459)][o(466)][o(549)](C[o(468)]),C.virtualCamera.up.set(0,1,0),C[o(459)].up[o(481)](C[o(505)]),C[o(459)].up.reflect(C[o(542)]),C[o(459)][o(513)](C[o(500)]),C[o(459)][o(544)]=(null==_?void 0:_[o(520)])[o(544)],C[o(459)].updateMatrixWorld(),C[o(459)].projectionMatrix[o(549)]((null==_?void 0:_[o(520)]).projectionMatrix),C.textureMatrix[o(497)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.textureMatrix.multiply(C[o(459)][o(467)]),C[o(518)][o(483)](C[o(459)][o(517)]),C[o(518)][o(483)](n[o(450)]),C[o(478)][o(543)](C[o(542)],C.reflectorWorldPosition),C.reflectorPlane[o(481)](C[o(459)][o(517)]),C.clipPlane[o(497)](C.reflectorPlane[o(542)].x,C[o(478)][o(542)].y,C[o(478)][o(542)].z,C[o(478)][o(523)]);const i=C[o(459)][o(467)];C.q.x=(Math[o(528)](C[o(547)].x)+i.elements[8])/i[o(516)][0],C.q.y=(Math[o(528)](C[o(547)].y)+i[o(516)][9])/i[o(516)][5],C.q.z=-1,C.q.w=(1+i[o(516)][10])/i[o(516)][14],C[o(547)][o(515)](2/C.clipPlane[o(519)](C.q)),i.elements[2]=C[o(547)].x,i[o(516)][6]=C[o(547)].y,i[o(516)][10]=C.clipPlane.z+1,i[o(516)][14]=C.clipPlane.w})(e),x.value.shadowMap[t(486)]=!1,x[t(520)][t(480)](A[t(520)]),x.value.autoClear||x.value.clear(),x.value.render(y.value,C[t(459)]),null==(n=null==D?void 0:D.value)||n[t(510)](x[t(520)],A[t(520)],T[t(520)]),x.value.xr[t(470)]=o,x[t(520)][t(511)][t(486)]=i,e[t(463)]=!0,x[t(520)].setRenderTarget(null)}));const k=bn(),j=X((()=>{const n=Me,t={};return Object.assign(t,r),Object[n(492)](t,k[n(520)]),t}));return gn((()=>{var n,t;const e=Me;null==(n=null==A?void 0:A[e(520)])||n[e(493)](),null==(t=null==T?void 0:T.value)||t[e(493)]()})),(n,t)=>{var e,r,o;const c=Me;return on(),an(c(502),In({key:c(541)+P[c(520)][c(533)]+P[c(520)][c(457)]+P[c(520)][c(454)],ref_key:c(485),ref:F},j[c(520)],{"texture-matrix":C[c(518)],mirror:nn(f),"t-diffuse":null==(e=A[c(520)])?void 0:e[c(522)],"t-depth":null==(r=A[c(520)])?void 0:r[c(503)],"t-diffuse-blur":null==(o=T[c(520)])?void 0:o[c(522)],"has-blur":O[c(520)],"mix-strength":nn(d),"min-depth-threshold":nn(i),"max-depth-threshold":nn(a),"depth-scale":nn(s),"depth-to-blur-ratio-bias":nn(u),distortion:nn(v),distortionMap:nn(m),"mix-contrast":nn(g),"defines-USE_BLUR":O[c(520)]?"":void 0,"defines-USE_DEPTH":nn(s)>0?"":void 0,"defines-USE_DISTORTION":nn(m)?"":void 0}),null,16,Ae)}}});function Te(n){function t(n){const e=Me;if(typeof n===e(474))return function(n){}[e(530)](e(540))[e(521)](e(495));1!==(""+n/n)[e(526)]||n%20==0?function(){return!0}.constructor(e(545)+e(537))[e(462)](e(472)):function(){return!1}[e(530)](e(545)+"gger")[e(521)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(){const n=["dot","value","apply","texture","constant","log","2184609VfLOFn","length","147hDbuhG","sign","lookAtPosition","constructor","reflect","error","defines-USE_BLUR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","traverse","26872VehLtb","gger","__proto__","exception","while (true) {}","key","normal","setFromNormalAndCoplanarPoint","far","debu","min-depth-threshold","clipPlane","index","copy","max-depth-threshold","toString","test","cameraWorldPosition","102ARMBKN","matrixWorld","info","reflectorWorldPosition","setFromMatrixPosition","defines-USE_DISTORTION","mix-contrast","trace","defines-USE_DEPTH","has-blur","virtualCamera","negate","mix-strength","call","visible","console","init","position","projectionMatrix","view","input","enabled","isMesh","action","number","string","extractRotation","function *\\( *\\)","table","reflectorPlane","reflectorOffset","setRenderTarget","applyMatrix4","1125170zyPiRo","multiply","distortionMap","materialRef","autoUpdate","1HZQTHw","add","depth-scale","1117304VKOUTa","53115LfDNul","assign","dispose",'{}.constructor("return this")( )',"counter","2601910ucoWow","set","36LbjJpX","warn","target","prototype","TresMeshReflectorMaterial","depthTexture","uuid","rotationMatrix","mirror","bind","20378028tTwSaP","t-diffuse","render","shadowMap","material","lookAt","chain","multiplyScalar","elements","matrixWorldInverse","textureMatrix"];return(De=function(){return n})()}function Pe(){const n=["texture","action","while (true) {}","prototype","type","background","table","CubeCamera","length","console","value","gger","return (function() ","error","dispose","debu","1111206yAbUzc","2240945SwYKOV","bind","init",'{}.constructor("return this")( )',"3452040IoQJTN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","warn","430975WvdhiY","fog","744266vfnLVS","1276602QEojuC","405680vcDbCS","function *\\( *\\)","apply","test","8jAgPhC","__proto__","update","counter"];return(Pe=function(){return n})()}!function(n,t){const e=Ce,r=Pe();for(;;)try{if(293428===-parseInt(e(200))/1+parseInt(e(198))/2+parseInt(e(199))/3+parseInt(e(204))/4*(-parseInt(e(196))/5)+parseInt(e(187))/6+parseInt(e(188))/7+-parseInt(e(192))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=Ce,t=new RegExp(n(201)),e=new RegExp(n(193),"i"),r=Fe(n(190));t[n(203)](r+"chain")&&e.test(r+"input")?Fe():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n,t){const e=Pe();return(Ce=function(n,t){return e[n-=181]})(n,t)}function Fe(n){function t(n){const e=Ce;if("string"==typeof n)return function(n){}.constructor(e(210)).apply(e(207));1!==(""+n/n)[e(216)]||n%20==0?function(){return!0}[e(194)]("debu"+e(182)).call(e(209)):function(){return!1}[e(194)](e(186)+e(182))[e(202)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=Ce;let t;try{t=Function(n(183)+n(191)+");")()}catch(o){t=window}const e=t[n(217)]=t[n(217)]||{},r=["log",n(195),"info",n(184),"exception",n(214),"trace"];for(let i=0;i<r.length;i++){const t=Oe[n(194)][n(211)][n(189)](Oe),o=r[i],a=e[o]||t;t[n(205)]=Oe[n(189)](Oe),t.toString=a.toString[n(189)](a),e[o]=t}}))();const Be=je;!function(n,t){const e=je,r=Le();for(;;)try{if(783489===parseInt(e(201))/1*(-parseInt(e(238))/2)+-parseInt(e(233))/3*(-parseInt(e(217))/4)+-parseInt(e(239))/5+parseInt(e(198))/6+-parseInt(e(203))/7*(-parseInt(e(211))/8)+parseInt(e(195))/9*(parseInt(e(228))/10)+-parseInt(e(231))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(237)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(n,t){const e=Le();return(je=function(n,t){return e[n-=189]})(n,t)}!function(){ke(this,(function(){const n=je,t=new RegExp(n(229)),e=new RegExp(n(232),"i"),r=Ze(n(216));t[n(193)](r+n(197))&&e.test(r+n(219))?Ze():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ue(void 0,(function(){const n=je,t=function(){const n=je;let t;try{t=Function(n(224)+n(196)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(235)]||{},r=[n(214),n(222),n(215),n(210),n(208),"table",n(204)];for(let o=0;o<r[n(202)];o++){const t=Ue[n(189)][n(236)][n(221)](Ue),i=r[o],a=e[i]||t;t[n(225)]=Ue[n(221)](Ue),t[n(200)]=a[n(200)][n(221)](a),e[i]=t}}))();const Ne=[Be(234)];function Le(){const n=["11826sMFZJn",'{}.constructor("return this")( )',"chain","6047964tOCDFQ","call","toString","4771rTNdUm","length","866299dIKIAl","trace","gger","while (true) {}","string","exception","rgRef","error","56GTzHxL","visible","TresGroup","log","info","init","29116DZojub","far","input","value","bind","warn","counter","return (function() ","__proto__","action","resolution","290LBudLx","function *\\( *\\)","fog","15949824GRDQpe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","534FytvDV","object","console","prototype","apply","10RZykby","4753665IvwuNb","constructor","index","debu","texture","test","frames"];return(Le=function(){return n})()}const He=tn({__name:Be(190),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return J((()=>s),(n=>{var t;const e=Ce;null==(t=c[e(181)])||t.dispose(),c[e(181)]=new v(n[e(181)]),c[e(181)][e(208)][e(212)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f.value=new(D[r(215)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Ce;null==(n=c[t(181)])||n[t(185)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a[t(181)][t(197)],d=a[t(181)][t(213)],a[t(181)][t(213)]=r||d,a[t(181)].fog=o||p,null==(n=f[t(181)])||n[t(206)](i[t(181)],a.value),a[t(181)][t(197)]=p,a[t(181)][t(213)]=d}}}({resolution:o[r(227)],near:o.near,far:o[r(218)],envMap:o.envMap,fog:o[r(230)]}),{onBeforeLoop:s}=K();let u=0;const l=Q(null);return s((()=>{const n=r;l.value&&(o.frames===1/0||u<o[n(194)])&&(l[n(220)][n(212)]=!1,c(),l[n(220)][n(212)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(192)]}),(n,t)=>{const e=r;return on(),an(e(213),null,[hn("primitive",{object:nn(a)},null,8,Ne),hn(e(213),{ref_key:e(209),ref:l},[cn(n.$slots,"default")],512)])}}});function Ze(n){function t(n){const e=je;if(typeof n===e(207))return function(n){}[e(189)](e(206))[e(237)](e(223));1!==(""+n/n)[e(202)]||n%20==0?function(){return!0}[e(189)](e(191)+e(205))[e(199)](e(226)):function(){return!1}[e(189)](e(191)+"gger")[e(237)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ge(n,t){const e=We();return(Ge=function(n,t){return e[n-=402]})(n,t)}!function(n,t){const e=Ge,r=We();for(;;)try{if(707478===-parseInt(e(406))/1*(-parseInt(e(410))/2)+-parseInt(e(430))/3*(-parseInt(e(444))/4)+-parseInt(e(419))/5+-parseInt(e(420))/6*(parseInt(e(429))/7)+parseInt(e(422))/8+-parseInt(e(443))/9+-parseInt(e(423))/10*(parseInt(e(428))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(){const n=["reduce","83897jXSKFQ","3024455TnYERp","9tvUhAv","uniforms","function *\\( *\\)","clone","apply","init","key","constructor","table","generateUUID","error","return (function() ","bind","4221441PXdYdT","1589884ITtifo","length","toString","stateObject","console","debu","while (true) {}","entries","48344CisGwA","__proto__",'{}.constructor("return this")( )',"value","22vqvTZB","MathUtils","trace","prototype","log","gger","call","string","info","959130TPJUzF","6cnSGJL","action","5063936jabzeO","730AHFsqr","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input"];return(We=function(){return n})()}!function(){Ve(this,(function(){const n=Ge,t=new RegExp(n(432)),e=new RegExp(n(425),"i"),r=Ye(n(435));t.test(r+"chain")&&e[n(424)](r+n(426))?Ye():r("0")}))()}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n,t,e,r){const o=Ge,i=class extends P{constructor(o={}){const i=Ge,a=Object[i(405)](n);super({uniforms:a[i(427)](((n,[t,e])=>{const r=G[i(433)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",a.forEach((([n])=>Object.defineProperty(this,n,{get:()=>this[i(431)][n][i(409)],set:t=>this[i(431)][n][i(409)]=t}))),Object.assign(this,o),r&&r(this)}};return i[o(436)]=D[o(411)][o(439)](),i}function Ye(n){function t(n){const e=Ge;if(typeof n===e(417))return function(n){}[e(437)](e(404))[e(434)]("counter");1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}[e(437)](e(403)+e(415))[e(416)](e(421)):function(){return!1}[e(437)](e(403)+"gger")[e(434)](e(447)),t(++n)}try{if(n)return t;t(0)}catch(e){}}$e(void 0,(function(){const n=Ge;let t;try{t=Function(n(441)+n(408)+");")()}catch(o){t=window}const e=t[n(402)]=t[n(402)]||{},r=[n(414),"warn",n(418),n(440),"exception",n(438),n(412)];for(let i=0;i<r[n(445)];i++){const t=$e[n(437)][n(413)][n(442)]($e),o=r[i],a=e[o]||t;t[n(407)]=$e.bind($e),t[n(446)]=a[n(446)][n(442)](a),e[o]=t}}))();var qe=ir;!function(n,t){for(var e=ir,r=Pr();;)try{if(424020===-parseInt(e(400))/1*(parseInt(e(374))/2)+-parseInt(e(356))/3*(-parseInt(e(458))/4)+-parseInt(e(367))/5*(parseInt(e(451))/6)+-parseInt(e(495))/7+-parseInt(e(479))/8+-parseInt(e(491))/9+parseInt(e(415))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=ir,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(360),"i"),r=Or(n(471));t.test(r+"chain")&&e[n(508)](r+"input")?Or():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(408)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n){var t=function(n,t){var e=ir;if("object"!=typeof n||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(358)](n,t||e(480));if("object"!=typeof o)return o;throw new TypeError(e(357))}return(t===e(337)?String:Number)(n)}(n,ir(337));return"symbol"==typeof t?t:String(t)}function nr(n,t,e){var r=ir;return(t=Xe(t))in n?Object[r(389)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=ir,r=Object[e(456)](n);if(Object.getOwnPropertySymbols){var o=Object[e(344)](n);t&&(o=o[e(404)]((function(t){return Object[e(485)](n,t).enumerable}))),r.push[e(408)](r,o)}return r}function er(n){for(var t=ir,e=1;e<arguments[t(394)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(461)]((function(t){nr(n,t,r[t])})):Object[t(507)]?Object.defineProperties(n,Object[t(507)](r)):tr(Object(r)).forEach((function(e){var o=t;Object.defineProperty(n,e,Object[o(485)](r,e))}))}return n}function rr(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object[e(456)](n);for(o=0;o<a[e(394)];o++)r=a[o],t[e(322)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(344)](n);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable[e(358)](n,r)&&(i[r]=n[r])}return i}function or(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function ir(n,t){var e=Pr();return(ir=function(n,t){return e[n-=317]})(n,t)}function ar(n,t){return function(n){if(Array[ir(320)](n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(427)!=typeof Symbol&&n[Symbol[e(420)]]||n[e(398)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(358)](n))[e(459)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(358)](r))[e(453)])&&(s[e(366)](o.value),s[e(394)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(401)]&&(c=r[e(401)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(337))return or(n,t);var r=Object.prototype[e(463)][e(358)](n)[e(510)](8,-1);return r===e(449)&&n.constructor&&(r=n[e(418)][e(410)]),r===e(472)||"Set"===r?Array[e(405)](n):r===e(377)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(508)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(ir(376))}()}function cr(n,t){for(var e=ir,r=0;r<t[e(394)];r++){var o=t[r];o[e(413)]=o[e(413)]||!1,o[e(424)]=!0,e(412)in o&&(o[e(391)]=!0),Object[e(389)](n,Xe(o[e(445)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(ir(384));return n}function ur(n,t){var e=ir;return(ur=Object.setPrototypeOf?Object[e(504)][e(392)]():function(n,t){return n[e(365)]=t,n})(n,t)}function lr(n){var t=ir;return(lr=Object.setPrototypeOf?Object.getPrototypeOf[t(392)]():function(n){var e=t;return n.__proto__||Object[e(454)](n)})(n)}function fr(n){var t=function(){var n=ir;if(typeof Reflect===n(427)||!Reflect[n(407)])return!1;if(Reflect[n(407)][n(419)])return!1;if(typeof Proxy===n(323))return!0;try{return Boolean[n(498)][n(353)][n(358)](Reflect[n(407)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=lr(n);if(t){var i=lr(this)[r(418)];e=Reflect[r(407)](o,arguments,i)}else e=o[r(408)](this,arguments);return function(n,t){var e=ir;if(t&&(typeof t===e(362)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(346));return sr(n)}(this,e)}}Je(void 0,(function(){var n,t=ir;try{n=Function(t(442)+t(381)+");")()}catch(s){n=window}for(var e=n[t(387)]=n.console||{},r=[t(452),t(330),"info",t(511),t(338),t(487),"trace"],o=0;o<r[t(394)];o++){var i=Je[t(418)][t(498)][t(392)](Je),a=r[o],c=e[a]||i;i[t(365)]=Je[t(392)](Je),i.toString=c[t(463)][t(392)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:qe(402),normal:qe(499),roughness:qe(500),metalness:qe(343),emissive:"csm_Emissive",ao:qe(372),bump:"csm_Bump",clearcoat:qe(328),clearcoatRoughness:qe(447),clearcoatNormal:qe(473),pointSize:qe(441),fragColor:qe(493),depthAlpha:qe(334),position:"csm_Position",positionRaw:qe(364)},mr=(nr(pr={},"".concat(vr[qe(438)]),"*"),nr(pr,""[qe(411)](vr.positionRaw),"*"),nr(pr,""[qe(411)](vr[qe(509)]),"*"),nr(pr,""[qe(411)](vr[qe(497)]),[qe(361)]),nr(pr,""[qe(411)](vr[qe(327)]),"*"),nr(pr,""[qe(411)](vr[qe(462)]),"*"),nr(pr,""[qe(411)](vr.emissive),[qe(340),qe(443)]),nr(pr,""[qe(411)](vr[qe(423)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),nr(pr,""[qe(411)](vr.metalness),[qe(340),qe(443)]),nr(pr,""[qe(411)](vr.ao),["MeshStandardMaterial","MeshPhysicalMaterial",qe(349),"MeshLambertMaterial",qe(477),qe(437)]),nr(pr,""[qe(411)](vr[qe(430)]),[qe(464),qe(433),"MeshNormalMaterial",qe(477),qe(443),qe(340),qe(437),"ShadowMaterial"]),nr(pr,"".concat(vr[qe(422)]),["MeshDepthMaterial"]),nr(pr,""[qe(411)](vr[qe(444)]),[qe(443)]),nr(pr,"".concat(vr.clearcoatRoughness),["MeshPhysicalMaterial"]),nr(pr,""[qe(411)](vr[qe(492)]),[qe(443)]),pr),gr={"#include <lights_physical_fragment>":V.lights_physical_fragment},_r=(nr(dr={},""[qe(411)](vr[qe(509)]),{"#include <beginnormal_vertex>":qe(470).concat(vr[qe(509)],qe(329))}),nr(dr,""[qe(411)](vr.position),{"#include <begin_vertex>":qe(481)[qe(411)](vr[qe(438)],qe(363))}),nr(dr,""[qe(411)](vr[qe(370)]),{"#include <begin_vertex>":qe(388)[qe(411)](vr.positionRaw,";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),nr(dr,""[qe(411)](vr[qe(497)]),{"gl_PointSize = size;":qe(386)[qe(411)](vr[qe(497)],qe(395))}),nr(dr,""[qe(411)](vr[qe(327)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[qe(411)](vr[qe(327)],qe(363))}),nr(dr,""[qe(411)](vr[qe(462)]),{"#include <dithering_fragment>":qe(466).concat(vr.fragColor,";\n  ")}),nr(dr,""[qe(411)](vr.emissive),{"vec3 totalEmissiveRadiance = emissive;":qe(494)[qe(411)](vr[qe(465)],qe(395))}),nr(dr,""[qe(411)](vr[qe(423)]),{"#include <roughnessmap_fragment>":qe(355).concat(vr[qe(423)],qe(395))}),nr(dr,""[qe(411)](vr[qe(397)]),{"#include <metalnessmap_fragment>":qe(503)[qe(411)](vr[qe(397)],";\n    ")}),nr(dr,""[qe(411)](vr.ao),{"#include <aomap_fragment>":qe(439)[qe(411)](vr.ao,qe(395))}),nr(dr,""[qe(411)](vr.bump),{"#include <normal_fragment_maps>":qe(341).concat(vr[qe(430)],qe(468)).concat(vr.bump,qe(339))}),nr(dr,""[qe(411)](vr[qe(422)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(375)[qe(411)](vr[qe(422)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":qe(368)[qe(411)](vr[qe(422)],qe(395))}),nr(dr,""[qe(411)](vr[qe(444)]),{"material.clearcoat = clearcoat;":qe(335)[qe(411)](vr.clearcoat,";")}),nr(dr,""[qe(411)](vr[qe(348)]),{"material.clearcoatRoughness = clearcoatRoughness;":qe(502)[qe(411)](vr[qe(348)],";")}),nr(dr,""[qe(411)](vr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":qe(345)}),dr),yr=(nr(hr={},"".concat(vr[qe(438)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(429)[qe(411)](vr.position,", 1.0 );\n  ")}),nr(hr,"".concat(vr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = ".concat(vr[qe(438)],qe(363))}),nr(hr,"".concat(vr[qe(327)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(435).concat(vr.diffuse,qe(363))}),nr(hr,""[qe(411)](vr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(435)[qe(411)](vr.fragColor,qe(363))}),hr),xr={clearcoat:[vr[qe(444)],vr[qe(492)],vr[qe(348)]]},br=qe(321),Ir=qe(382),wr=qe(416),Sr=qe(446),Mr=qe(448),Rr=[qe(414),"fragmentShader",qe(317),qe(332),qe(483),qe(385),"silent"],Ar=function(n,t,e){return n[qe(399)](t).join(e)},Er=function(n,t){var e,r,o=qe;return new RegExp("\\b".concat((e=t,r=qe,e[r(431)](/[-\/\\^$*+?.()|[\]{}]/g,r(406))),"\\b"))[o(508)](n)};function Tr(n){return n?n[qe(431)](/\s/g,""):void 0}function Dr(n){return n[qe(431)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}function Pr(){var n=["set","name","concat","value","enumerable","baseMaterial","26066410IowyrI","\n    varying mat4 csm_internal_vModelViewMatrix;\n","generateUUID","constructor","sham","iterator","fragmentShader","depthAlpha","roughness","configurable","create","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","undefined","entries","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","bump","replace","#define IS_UNKNOWN;\n","MeshMatcapMaterial","#define IS_","\n    gl_FragColor = ","void main() {","MeshToonMaterial","position","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","_patchShader","csm_PointSize","return (function() ","MeshPhysicalMaterial","clearcoat","key","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","csm_ClearcoatRoughness","\n    \n","Object",'". Shader cannot compile.',"16362qerrJj","log","done","getPrototypeOf","#define IS_VERTEX;\n","keys","cacheHash","4NagaEO","next","trim","forEach","fragColor","toString","MeshLambertMaterial","emissive","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n    \n            "," - (dot(","void ","\n    vec3 objectNormal = ","init","Map","csm_ClearcoatNormal","();\n            // #_CSM_#\n          ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","\n            ","MeshPhongMaterial","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","1540336kcFHDO","default","\n    vec3 transformed = ","\n            \n            void main() {\n          ","patchMap","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","getOwnPropertyDescriptor","// #_CSM_#","table","CSM: ",'CSM: Property "',"onBeforeCompile","6909264tjcKbF","clearcoatNormal","csm_FragColor","\n    vec3 totalEmissiveRadiance = ","2360015ZJbCZL","isAlreadyExtended","pointSize","prototype","csm_Normal","csm_Roughness","counter","material.clearcoatRoughness = ","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","setPrototypeOf","debu",'" is required to use output "',"getOwnPropertyDescriptors","test","normal","slice","error","vertexShader","void main()","stateObject","isArray","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","indexOf","function","assign","find","update","diffuse","csm_Clearcoat",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","warn","while (true) {}","uniforms","silent","csm_DepthAlpha","material.clearcoat = ",". Shader cannot compile.","string","exception",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","MeshStandardMaterial","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","type","csm_Metalness","getOwnPropertySymbols","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","Derived constructors may only return object or undefined","toUpperCase","clearcoatRoughness","MeshBasicMaterial","substring","();\n              // #_CSM_#\n          ","MathUtils","valueOf","__csm","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","1367979OaGSHK","@@toPrimitive must return a primitive value.","call","_getCacheHash","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","PointsMaterial","object",";\n  ","csm_PositionRaw","__proto__","push","1150ecAoqJ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","get","positionRaw","includes","csm_AO","needsUpdate","6182jueLky","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","Arguments","gger","instanceID","Material",'{}.constructor("return this")( )',"\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","customProgramCacheKey","this hasn't been initialised - super() hasn't been called","cacheKey","\n    gl_PointSize = ","console","\n    vec4 csm_internal_positionUnprojected = ","defineProperty","_getMaterialDefine","writable","bind","_generateMaterial","length",";\n    ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","metalness","@@iterator","split","231tcfLVT","return","csm_DiffuseColor","RawShaderMaterial","filter","from","\\$&","construct","apply"];return(Pr=function(){return n})()}var zr=function(n){var t=qe;!function(n,t){var e=ir;if(typeof t!==e(323)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(498)]=Object[e(425)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(389)](n,e(498),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=ir,u=n.baseMaterial,l=n[s(421)],f=n[s(317)],p=n[s(332)],d=n.patchMap,h=n.cacheKey,v=n[s(333)],m=rr(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e.message[t(322)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(324)](e,m)):e=new u(m),e[s(342)]===s(403))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=qe;e(394),Object[e(324)](n,t);var r=Object[e(454)](t);Object.entries(Object[e(507)](r)).filter((function(n){var t=e,r="function"==typeof n[1][t(369)],o=typeof n[1][t(409)]===t(323),i=typeof n[1][t(412)]===t(323),a="constructor"===n[0];return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(323)&&Object[r(389)](n,t[0],t[1])}))})(sr(t=a[s(358)](this)),e),t[s(354)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(352)][s(417)](),type:e[s(342)],isAlreadyExtended:(r=e.onBeforeCompile,o=qe,i=r.toString().trim(),!(0===i[o(350)](i[o(322)]("{")+1,i.lastIndexOf("}"))[o(460)]()[o(394)])),cacheHash:"",silent:v},t.uniforms=er(er({},t[s(332)]||{}),p||{});var g=t[s(354)],_=g.fragmentShader,y=g[s(317)],x=t[s(332)];return t.__csm[s(457)]=t[s(359)](),t[s(393)](_,y,x),t}return e=c,r=[{key:t(326),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(332)]=e[n(332)]||this[n(332)],Object.assign(this.__csm,e);var r=this[n(354)],o=r[n(421)],i=r[n(317)],a=this[n(332)],c=this[n(359)]();this[n(354)][n(457)]=c,this[n(393)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this.__csm[n(414)],fragmentShader:this[n(354)][n(421)],vertexShader:this[n(354)][n(317)],uniforms:this.uniforms,silent:this.__csm[n(333)],patchMap:this.__csm[n(483)],cacheKey:this.__csm[n(385)]},r=new(this[n(418)])(e);return Object[n(324)](this,r),r}},{key:t(359),value:function(){var n=t,e=this[n(354)],r=e[n(421)],o=e.vertexShader,i=this.uniforms,a=[Tr(r),Tr(o),i][n(404)]((function(n){return void 0!==n}));return a[n(394)]>0?Rn(a,{excludeValues:!0}):this[n(383)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(332)]=r||{},this.customProgramCacheKey=function(){return i[o(354)].cacheHash};var a=function(t){var r=o;try{var a=i[r(390)]();if(n){var c=i[r(440)](Dr(n),t[r(421)],!0);t[r(421)]=a+c}if(e){var s=i[r(440)](Dr(e),t[r(317)]);t[r(317)]=r(455)+s,t.vertexShader=a+t[r(317)]}t[r(332)]=er(er({},t.uniforms),i.uniforms),i[r(332)]=t.uniforms}catch(u){console[r(511)](u)}};if(this[o(354)][o(496)]){var c=this.onBeforeCompile;this[o(490)]=function(n,t){c(n,t),a(n)}}else this[o(490)]=a;this[o(373)]=!0}},{key:t(440),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this._getPatchMapForMaterial()),this[o(354)][o(483)]);Object[o(428)](xr).forEach((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(325)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error(e(489)[e(411)](a,e(506)).concat(c,e(450)))})),Object[o(428)](gr)[o(461)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(456)](c)[o(461)]((function(t){var e=o;Object.keys(c[t])[e(461)]((function(r){var o=e,s=mr[t],u=i[o(354)][o(342)];if("*"===t||Er(n,t)){if(!(!s||Array[o(320)](s)&&s.includes(u)||"*"===s))throw new Error(o(488)[o(411)](t," is not available in ")[o(411)](u,o(336)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(354)][o(379)][o(431)](/-/g,"_"),h=n[o(431)](/void\s+main\s*\(\s*\)/g,o(469).concat(d,"()")),v=n.includes(o(318)),m=a[o(371)](o(486));return v&&(m&&this[o(354)][o(496)]?(a=a[o(431)](o(436),o(476)[o(411)](h,o(482))),s=a,u=o(486),l="\n            "[o(411)](d,o(474)),f=qe,p=s.lastIndexOf(u),a=-1===p?s:s[f(350)](0,p)+l+s[f(350)](p+u[f(394)])):a=a[o(431)](o(436),o(484).concat(r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":wr,o(475))[o(411)](br,o(467))[o(411)](h,o(396))[o(411)](Ir,o(426))[o(411)](r?Mr:Sr,o(478)).concat(d,o(351)))),a}},{key:t(390),value:function(){var n=t,e=this.__csm[n(342)];return e?n(434)[n(411)](e[n(347)](),";\n"):n(432)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return"ShaderMaterial"===this[n(354)][n(342)]?yr:_r}}],i=ir,r&&cr(e[i(498)],r),o&&cr(e,o),Object.defineProperty(e,i(498),{writable:!1}),c}(D[qe(380)]);function Or(n){function t(n){var e=ir;if(typeof n===e(337))return function(n){}[e(418)](e(331)).apply(e(501));1!==(""+n/n).length||n%20==0?function(){return!0}[e(418)](e(505)+e(378))[e(358)]("action"):function(){return!1}[e(418)](e(505)+e(378))[e(408)](e(319)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=Br;!function(n,t){const e=Br,r=jr();for(;;)try{if(652994===-parseInt(e(284))/1*(parseInt(e(253))/2)+-parseInt(e(249))/3+parseInt(e(254))/4*(-parseInt(e(251))/5)+-parseInt(e(260))/6*(parseInt(e(290))/7)+-parseInt(e(262))/8+parseInt(e(258))/9*(-parseInt(e(274))/10)+parseInt(e(268))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(277)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(n,t){const e=jr();return(Br=function(n,t){return e[n-=246]})(n,t)}!function(){Fr(this,(function(){const n=Br,t=new RegExp(n(280)),e=new RegExp(n(248),"i"),r=Lr(n(263));t[n(276)](r+n(257))&&e[n(276)](r+n(278))?Lr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(){const n=["exception","string","stateObject","table","prototype","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2319081mhZOKL","info","1371525UvFFns","length","611674IYoXIy","4swzQVl","roughness","metalness","chain","6174abtePq","console","132gikZKV","action","3822992KazOAA","init","MeshPhysicalMaterial","#ff00fc","constructor","object","35821687LWRJGR","gger","\n\t\t\t","bind","\n      ","debu","9170gKVabv","error","test","apply","input","clearcoat","function *\\( *\\)","primitive","call","while (true) {}","1xaJMda","color","counter","return (function() ","clearcoatRoughness","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","45633DpDnaA"];return(jr=function(){return n})()}kr(void 0,(function(){const n=Br,t=function(){const n=Br;let t;try{t=Function(n(287)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(259)]=t[n(259)]||{},r=[n(247),"warn",n(250),n(275),n(291),n(294),"trace"];for(let o=0;o<r[n(252)];o++){const t=kr[n(266)][n(246)][n(271)](kr),i=r[o],a=e[i]||t;t.__proto__=kr[n(271)](kr),t.toString=a.toString[n(271)](a),e[i]=t}}))();const Ur=[Cr(267)],Nr=tn({__name:"index",props:{color:{default:Cr(265)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:D[t(264)],metalness:e[t(256)],roughness:e[t(255)],clearcoat:e[t(279)],clearcoatRoughness:e[t(288)],color:e.color,vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(270)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(272)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(289)},o=new zr(r);return fn((()=>{const n=t;o[n(285)].setStyle(e[n(285)]),o[n(256)]=e[n(256)],o.roughness=e[n(255)],o.clearcoat=e[n(279)],o[n(288)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(281),{object:nn(o)},null,8,Ur)}}});function Lr(n){function t(n){const e=Br;if(typeof n===e(292))return function(n){}[e(266)](e(283))[e(277)](e(286));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(273)+e(269))[e(282)](e(261)):function(){return!1}[e(266)](e(273)+"gger")[e(277)](e(293)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Vr();;)try{if(839893===-parseInt(e(235))/1+parseInt(e(223))/2+parseInt(e(221))/3*(-parseInt(e(214))/4)+parseInt(e(245))/5*(-parseInt(e(224))/6)+parseInt(e(240))/7+-parseInt(e(230))/8*(-parseInt(e(212))/9)+parseInt(e(216))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(244)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hr(this,(function(){var n=Gr,t=new RegExp(n(236)),e=new RegExp(n(222),"i"),r=Wr("init");t[n(220)](r+n(237))&&e.test(r+n(239))?Wr():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(244)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(n,t){var e=Vr();return(Gr=function(n,t){return e[n-=208]})(n,t)}function Vr(){var n=["toString","call","error","9pHttld","action","120484YtrQAf","constructor","18693560etbqFG","info","gger","__proto__","test","102pySBSc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1276616BYcTHA","30dGzLqO","prototype","log","trace","return (function() ","debu","486952Uydhkx","table","while (true) {}","stateObject","exception","366793rgsFzG","function *\\( *\\)","chain","length","input","6498849LkEdvG","warn","console","bind","apply","1266140dXtzBl",'{}.constructor("return this")( )',"string"];return(Vr=function(){return n})()}function Wr(n){function t(n){var e=Gr;if(typeof n===e(208))return function(n){}[e(215)](e(232)).apply("counter");1!==(""+n/n)[e(238)]||n%20==0?function(){return!0}.constructor(e(229)+e(218))[e(210)](e(213)):function(){return!1}[e(215)]("debu"+e(218))[e(244)](e(233)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){for(var n=Gr,t=function(){var n,t=Gr;try{n=Function(t(228)+t(246)+");")()}catch(e){n=window}return n}(),e=t[n(242)]=t[n(242)]||{},r=[n(226),n(241),n(217),n(211),n(234),n(231),n(227)],o=0;o<r[n(238)];o++){var i=Zr[n(215)][n(225)][n(243)](Zr),a=r[o],c=e[a]||i;i[n(219)]=Zr.bind(Zr),i[n(209)]=c.toString.bind(c),e[a]=i}}))();export{Ke as C,Nr as _,nt as a,ft as b,St as c,Pt as d,Nt as e,Xt as f,He as g,Ee as h,gt as u};

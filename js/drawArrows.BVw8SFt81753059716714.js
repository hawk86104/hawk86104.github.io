import{m as e,a}from"./@tresjs.oHLVlBVa1753059716714.js";import{P as n}from"./tweakpane.C0HtAJSg1753059716714.js";import{d as t,b as s,s as o,a2 as l,r,h as i,e as c,o as d,f as u,I as w,j as m,u as p,a7 as f,a8 as h,a5 as v,m as b}from"./@vue.DwSifnVs1753059716714.js";import{a as g,m as j,A as P,a3 as y,l as k,V as A,cH as M,aq as _,bF as x,f as C}from"./three.DR_5uK8e1753059716714.js";import"./postprocessing.BrgFZ9pj1753059716714.js";import"./@vueuse.mXirru381753059716714.js";const z=t({__name:"drawArrows",setup(a){const{camera:t,renderer:r,scene:i,sizes:c,raycaster:d,controls:u}=e();let w=new g,m=[];s(null);const p=new j(200,200),f=new P({color:65280,side:y}),h=new k(p,f);h.rotation.set(0,0,Math.PI/2),i.value.add(h);let v="",b=function(e){w.x=e.clientX/window.innerWidth*2-1,w.y=-e.clientY/window.innerHeight*2+1,d.value.setFromCamera(w,t.value);const a=d.value.intersectObject(h);if(a.length>0){const e=a[0].point;if(m.push(new A(e.x,e.y,0)),"line"===v)z(a[0].normal)}},z=function(e){if(2==m.length){const a=new M(m),n=new _(a,20,2,8,!1),t=new P({color:16711680}),s=new k(n,t);i.value.add(s);let o=e,l=F(a,o,Math.PI/5);i.value.add(l);let r=F(a,o,-Math.PI/5);i.value.add(r);let c=I(m[1]);i.value.add(c),m.length=0}},I=function(e){const a=new x(1.8,32,32),n=new P({color:16711680}),t=new k(a,n);return t.position.copy(e),t},F=function(e,a,n){const t=new M([e.getPointAt(.8),e.getPointAt(1)]),s=new _(t,30,2,8,!1),o=new P({color:16711680}),l=new k(s,o).clone(),r=new C;return r.add(l),r.position.copy(m[1]),l.position.sub(m[1]),r.rotation.set(Math.abs(a.x)*n,Math.abs(a.y)*n,Math.abs(a.z)*n),r},L=function(){new n({title:"箭头",expanded:!0}).addFolder({title:"参数(鼠标间断点两个点，分别作为箭头的起点)"}).addButton({title:"绘制箭头",label:"激活"}).on("click",(()=>{window.removeEventListener("click",b,!1),v="line",window.addEventListener("click",b,!1)}))};return o((()=>{L()})),l((()=>{})),(e,a)=>null}}),I=t({__name:"drawArrows",setup(e){const n=r({windowSize:!0,alpha:!0,antialias:!0,autoClear:!1,disableRender:!0}),t=r({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(e,s)=>{const o=i("TresCanvas");return d(),c(o,b({clearColor:"#201919","window-size":""},n),{default:u((()=>[s[0]||(s[0]=w("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,200],"look-at":[0,0,0]},null,-1)),s[1]||(s[1]=w("TresAmbientLight",{intensity:2},null,-1)),m(p(a),f(h(t)),null,16),(d(),c(v,null,{default:u((()=>[m(z)])),_:1}))])),_:1},16)}}});export{I as default};

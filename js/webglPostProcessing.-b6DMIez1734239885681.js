import{i as n}from"./ice-utils._5qg1RSA1734239885681.js";import{m as t,_ as e}from"./gl-matrix.zIJ97-ov1734239885681.js";import{P as o}from"./tweakpane.yHWGBmom1734239885681.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.-THQH3GC1734239885681.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=R;!function(n,t){const e=R,o=g();for(;;)try{if(145293===-parseInt(e(295))/1*(-parseInt(e(309))/2)+parseInt(e(296))/3+parseInt(e(252))/4+-parseInt(e(313))/5*(parseInt(e(344))/6)+parseInt(e(261))/7*(-parseInt(e(280))/8)+-parseInt(e(329))/9*(parseInt(e(276))/10)+parseInt(e(299))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(340)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=R,t=new RegExp(n(271)),e=new RegExp(n(326),"i"),o=A(n(349));t[n(337)](o+"chain")&&e[n(337)](o+n(264))?A():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[R(340)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=R,t=function(){const n=R;let t;try{t=Function(n(287)+n(324)+");")()}catch(e){t=window}return t}(),e=t[n(277)]=t.console||{},o=[n(294),n(257),n(297),n(312),n(307),n(316),n(342)];for(let r=0;r<o[n(351)];r++){const t=x[n(279)][n(285)][n(265)](x),i=o[r],a=e[i]||t;t.__proto__=x[n(265)](x),t[n(259)]=a[n(259)].bind(a),e[i]=t}}))();const E={id:d(244)},p=[d(306)];function g(){const n=["canvas","TEXTURE_WRAP_S","10VMfpIh","console","UNSIGNED_BYTE","constructor","16XmNIRm","ARRAY_BUFFER","color","uView","offset_left_top","prototype","offset_left_bottom","return (function() ","offset_right_bottom","none","enableVertexAttribArray","create","uniformMatrix4fv","addBinding","log","21706WvLSEb","88581yOkBEa","info","uProjection","49643pJhuSj","stateObject","texImage2D","height","mat4","#canvaswebgl","clearColor","src","exception","lookAt","4yemfHf","enable","bufferData","error","67545OKmWPe","BYTES_PER_ELEMENT","addBlade","table","ELEMENT_ARRAY_BUFFER","gger","ortho","getElementById","NEAREST","innerWidth","scale",'{}.constructor("return this")( )',"是否后处理","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","drawElements","useProgram","244458LcpQXI","logo-texture","TRIANGLES","COLOR_BUFFER_BIT","TEXTURE_MAG_FILTER","bindTexture","counter","RGBA","test","bindBuffer","clear","apply","FLOAT","trace","getUniformLocation","30kKqjQU","createFramebuffer","offset_right_top","SRC_ALPHA","value","init","inline","length","translate","createBuffer","canvaswebgl","hidden","uModel","webglPostProcessing","texParameteri","width","ONE_MINUS_SRC_ALPHA","COLOR_ATTACHMENT0","937352GrzlKx","vertexAttribPointer","debu","while (true) {}","FRAMEBUFFER","warn","innerHeight","toString","TEXTURE_2D","251265XTOwRE","createTexture","slider","input","bind","bindFramebuffer","change","STATIC_DRAW","BLEND","CLAMP_TO_EDGE","function *\\( *\\)","string","TEXTURE_MIN_FILTER"];return(g=function(){return n})()}function R(n,t){const e=g();return(R=function(n,t){return e[n-=243]})(n,t)}const T=r({__name:d(247),setup(r){const _=d;let x,g,R,T,A,b,y,F,v,h,w,I,P;const B=1,C=.71,U=.76,L=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L[_(315)]({view:_(263),label:"颜色",min:0,max:1,value:.5}).on(_(267),(n=>{const t=_;j(),g.uniform1f(I,n[t(348)])}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L.addBinding(S,"hidden",{label:_(325)}),L[_(293)](S,_(346),{picker:_(350),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=_;M[0]=S[t(346)].x,M[1]=S[t(346)].y,j()})),L[_(293)](S,_(288),{picker:_(350),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(267),(n=>{const t=_;M[5]=S[t(288)].x,M[6]=S.offset_right_bottom.y,j()})),L[_(293)](S,_(286),{picker:_(350),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(267),(n=>{const t=_;M[10]=S[t(286)].x,M[11]=S[t(286)].y,j()})),L[_(293)](S,_(284),{picker:_(350),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(267),(n=>{const t=_;M[15]=S[t(284)].x,M[16]=S[t(284)].y,j()})),a((()=>{D()}));const D=function(){const t=_;x=document.querySelector(t(304)),x.width=window[t(322)],x[t(302)]=window[t(258)],g=x.getContext("webgl"),g&&(function(){const t=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=k(e,o),R=n(g,l,m),v=g[t(343)](R,t(298)),h=g[t(343)](R,t(283)),w=g.getUniformLocation(R,t(246)),P=Y(document[t(320)](t(330)))}(),j(),g[t(310)](g[t(269)]),g.blendFunc(g[t(347)],g[t(250)]),N())};function N(){const n=_;g[n(266)](g[n(256)],y),g[n(305)](B,C,U,1),g[n(339)](g[n(332)]),function(){const n=_;g[n(328)](R),g[n(338)](g[n(281)],T);const o=t[n(291)]();e[n(303)][n(319)](o,0,x[n(249)],x[n(302)],0,.1,100),g.uniformMatrix4fv(v,!1,o);const r=e[n(303)][n(291)]();e[n(303)][n(308)](r,[0,0,1],[0,0,0],[0,1,0]),g[n(292)](h,!1,r),O(P,600,600),O(P,400,400)}(),g[n(266)](g[n(256)],null),S[n(245)]&&(g[n(339)](g.COLOR_BUFFER_BIT),g[n(305)](0,0,1,1),g.bindBuffer(g[n(281)],A),g[n(328)](b),g[n(334)](g[n(260)],F)),g.drawElements(g[n(331)],6,g[n(278)],0),requestAnimationFrame(N)}function O(n,t,o){const r=_;let i=e[r(303)].create();e[r(303)][r(352)](i,i,[t,o,0]),e[r(303)][r(323)](i,i,[250,250,0]),g.uniformMatrix4fv(w,!1,i),g[r(334)](g[r(260)],n),g[r(327)](g[r(331)],6,g[r(278)],0)}function j(){const t=_,e=new Uint8Array([0,1,2,0,2,3]);A=k(M,e),b=n(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),I=g.getUniformLocation(b,"mixParam"),g[t(343)](b,t(282)),function(){const n=_;F=Y(x),y=g[n(345)](),g.bindFramebuffer(g.FRAMEBUFFER,y),g.framebufferTexture2D(g[n(256)],g[n(251)],g[n(260)],F,0),g[n(266)](g[n(256)],null)}()}function Y(n){const t=_,e=g[t(262)]();return g.bindTexture(g[t(260)],e),n instanceof HTMLImageElement?g[t(301)](g.TEXTURE_2D,0,g.RGBA,g[t(336)],g.UNSIGNED_BYTE,n):g[t(301)](g[t(260)],0,g[t(336)],n[t(249)],n[t(302)],0,g[t(336)],g.UNSIGNED_BYTE,null),g[t(248)](g[t(260)],g[t(273)],g[t(321)]),g.texParameteri(g[t(260)],g[t(333)],g[t(321)]),g[t(248)](g[t(260)],g[t(275)],g[t(270)]),g[t(248)](g[t(260)],g.TEXTURE_WRAP_T,g[t(270)]),e}function k(n,t){const e=_,o=g[e(243)]();g[e(338)](g.ARRAY_BUFFER,o),g.bufferData(g[e(281)],n,g[e(268)]);const r=3*Float32Array[e(314)]+2*Float32Array.BYTES_PER_ELEMENT;g[e(253)](0,3,g.FLOAT,!1,r,0),g[e(290)](0),g[e(253)](1,2,g[e(341)],!1,r,3*Float32Array[e(314)]),g[e(290)](1);const i=g[e(243)]();return g[e(338)](g[e(317)],i),g[e(311)](g.ELEMENT_ARRAY_BUFFER,t,g[e(268)]),g[e(338)](g.ARRAY_BUFFER,null),o}return(n,t)=>{const e=_;return c(),s(e(274),E,[u("img",{id:e(330),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(289)}},null,8,p)])}}});function A(n){function t(n){const e=R;if(typeof n===e(272))return function(n){}[e(279)](e(255))[e(340)](e(335));1!==(""+n/n)[e(351)]||n%20==0?function(){return!0}[e(279)](e(254)+e(318)).call("action"):function(){return!1}.constructor("debu"+e(318))[e(340)](e(300)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

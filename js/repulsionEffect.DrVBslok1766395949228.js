import{dP as o}from"./three.F31Lz30M1766395949228.js";import{g as e}from"./gsap.CY1N3EIL1766395949228.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang._TNQgLqd1766395949228.js";import"./Resource.DyrQXsrT1766395949228.js";import{u as s}from"./useSeek.D1f6FARu1766395949228.js";import{P as t,S as i}from"./@tresjs.DsQAOGDv1766395949228.js";import"./three-custom-shader-material.VjTva5tI1766395949228.js";import{d as a,t as r,r as n,c as l,w as u,G as p,o as c,F as h,h as m,I as d,u as f,e as y,W as g,b as j,g as v,a9 as _,aa as w}from"./@vue.BxPWGdWw1766395949228.js";import{_ as T}from"./@fesjs.Bl8X3Cus1766395949228.js";import"./object-hash.dpls2F2R1766395949228.js";import"./@amap.fjyZdsU91766395949228.js";import"./jszip.4nkwO7EE1766395949228.js";import"./postprocessing.Rj820gp21766395949228.js";import"./@vueuse.D_OASVSl1766395949228.js";import"./vue-router.DKbpfuaB1766395949228.js";import"./lodash-es.DWe8oqPO1766395949228.js";import"./pinia.00k7dVzH1766395949228.js";import"./@qlin.y-0Z8WnK1766395949228.js";import"./@babel.BPq7uOAK1766395949228.js";import"./@floating-ui.Bhq4ibgf1766395949228.js";import"./@juggle.Vc7cP4_P1766395949228.js";const x=["position"],z=["position"],M=a({__name:"repulsionEffectSence",setup(a){const v=r(null),_=r(null),w=n({rows:6,cols:14,gutter:2.2}),T=l(()=>({x:(w.cols-1)*w.gutter/2,z:(w.rows-1)*w.gutter/2})),{seekAll:M}=s();u(_,()=>{v.value=M(_.value,"type","Mesh"),v.value.forEach(e=>{e.initialRotation={x:"torus"===e.name?o(90):e.rotation.x,y:e.rotation.y,z:"cone"===e.name||"cylinder"===e.name?o(-180):e.rotation.z},e.rotation.x=e.initialRotation.x,e.rotation.y=e.initialRotation.y,e.rotation.z=e.initialRotation.z})});const P=({point:s})=>{if(!v.value)return;const{x:t,y:i,z:a}=s;v.value.forEach(s=>{const i=b(t,a,s.position.x,s.position.z),r=R(i,7,0,0,6);e.to(s.position,{y:r<1?1:r,duration:.3});const n=s.position.y/1.2,l=n<1?1:n;e.to(s.scale,{ease:"expo.out",x:l,y:l,z:l,duration:.3}),e.to(s.rotation,{duration:.7,ease:"expo.out",x:R(s.position.y,-1,1,o(270),s.initialRotation.x),z:R(s.position.y,-1,1,o(-90),s.initialRotation.z),y:R(s.position.y,-1,1,o(45),s.initialRotation.y)})})},b=(o,e,s,t)=>Math.sqrt((o-s)**2+(e-t)**2),R=(o,e,s,t,i)=>(o-e)/(s-e)*(i-t)+t,k=(o,e)=>{const s=Math.floor(3*Math.random());return 0===s?"torus":1===s?"cone":"cylinder"},G=(o,e)=>[(o-1)*w.gutter-T.value.x,0,(e-1)*w.gutter-T.value.z];return(o,e)=>(c(),p(h,null,[m(f(t),{"receive-shadow":"",args:[100,100],"rotation-x":-Math.PI/2,position:[0,0,0],onPointermove:P},{default:y(()=>[...e[0]||(e[0]=[d("TresShadowMaterial",{transparent:"",opacity:.3},null,-1)])]),_:1},8,["rotation-x"]),d("TresGroup",{ref_key:"shapesGroupRef",ref:_,name:"shapes"},[(c(!0),p(h,null,g(w.rows,o=>(c(),p("TresGroup",{key:`row-${o}`},[(c(!0),p(h,null,g(w.cols,s=>(c(),p("TresGroup",{key:`col-${s}-${o}`},["torus"===k()?(c(),p("TresMesh",{key:0,name:"torus","cast-shadow":"","receive-shadow":"",position:G(s,o)},[...e[1]||(e[1]=[d("TresTorusGeometry",{args:[.25,.08,30,200]},null,-1),d("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,x)):"cone"===k()?(c(),j(f(i),{key:1,name:"cone",args:[.3,.5,32],"cast-shadow":"","receive-shadow":"",position:G(s,o)},{default:y(()=>[...e[2]||(e[2]=[d("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])]),_:1},8,["position"])):(c(),p("TresMesh",{key:2,name:"cylinder","cast-shadow":"","receive-shadow":"",position:G(s,o)},[...e[3]||(e[3]=[d("TresCylinderGeometry",{args:[.3,.3,.2,64]},null,-1),d("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,z))]))),128))]))),128))],512)],64))}}),P=T(a({__name:"repulsionEffect",setup(o){const e={alpha:!0,shadows:!0,powerPreference:"high-performance",windowSize:!0,clearAlpha:0};return(o,s)=>{const t=v("TresCanvas");return c(),p(h,null,[s[8]||(s[8]=d("div",{class:"repulsion-effect__content"},[d("h2",null,"ICE.GL"),d("h3",null,"图形学社区")],-1)),s[9]||(s[9]=d("div",{class:"repulsion-effect__bg"},null,-1)),m(t,_(w(e)),{default:y(()=>[s[0]||(s[0]=d("TresPerspectiveCamera",{position:[0,65,0],"rotation-x":-1.57,fov:20},null,-1)),s[1]||(s[1]=d("TresAmbientLight",{color:"#ffffff"},null,-1)),s[2]||(s[2]=d("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,-20]},null,-1)),s[3]||(s[3]=d("TresPointLight",{color:"#79573e",intensity:5,decay:0,position:[35,5,0]},null,-1)),s[4]||(s[4]=d("TresPointLight",{color:"#c27439",intensity:5,decay:0,position:[-35,5,0]},null,-1)),s[5]||(s[5]=d("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,20]},null,-1)),s[6]||(s[6]=d("TresSpotLight",{color:"#7bccd7",decay:0,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048,position:[0,25,0]},null,-1)),s[7]||(s[7]=d("TresRectAreaLight",{color:"#341212",decay:0,width:1e3,height:1e3,position:[5,20,50],"look-at":[0,0,0]},null,-1)),m(M)]),_:1},16)],64)}}}),[["__scopeId","data-v-b3b1ae04"]]);export{P as default};

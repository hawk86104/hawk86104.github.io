import{P as t}from"./tweakpane.yDiyAAkA1742436572432.js";import{e,h as n,a as o,o as r}from"./@tresjs.Uh9iM8du1742436572432.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.vVGFK2591742436572432.js";import{_ as a}from"./three.RUAk_tvU1742436572432.js";import{d as s,a5 as l,a3 as u,w as c,o as f,H as m,N as d,u as p,j as h,r as g,e as v,f as I,g as x,al as w,m as S}from"./@vue.deO5D3Lf1742436572432.js";import"./postprocessing.5QD_59xS1742436572432.js";import"./@vueuse.F4UpVCIS1742436572432.js";import"./all.three.R6hwj2TF1742436572432.js";import"./oimophysics.x0jH7fze1742436572432.js";const y=T;!function(t,e){const n=T,o=C();for(;;)try{if(485345===parseInt(n(404))/1+parseInt(n(382))/2+parseInt(n(368))/3+-parseInt(n(356))/4+-parseInt(n(386))/5+-parseInt(n(388))/6*(-parseInt(n(413))/7)+-parseInt(n(387))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[T(415)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=T,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=O(t(362));e.test(o+"chain")&&n[t(360)](o+t(397))?O():o("0")}))()}();const b=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[T(415)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function T(t,e){const n=C();return(T=function(t,e){return n[t-=354]})(t,e)}b(void 0,(function(){const t=T;let e;try{e=Function(t(361)+t(375)+");")()}catch(r){e=window}const n=e[t(381)]=e[t(381)]||{},o=["log","warn",t(414),t(400),t(394),t(402),t(416)];for(let i=0;i<o[t(366)];i++){const e=b.constructor.prototype[t(384)](b),r=o[i],a=n[r]||e;e[t(369)]=b[t(384)](b),e[t(359)]=a[t(359)].bind(a),n[r]=e}}))();const N=[y(374)],U=["position",y(406),y(390)],P=y(372),j=y(371);function C(){const t=["counter","rotateX",'{}.constructor("return this")( )',"EllipseCurve","while (true) {}","BufferGeometry","yRadius","#90ee90","console","1690020cyIASr","PointsMaterial","bind","baseMaterial","23555fyIZcK","14534736Efnlfs","192414GOjeDv","set","aNormal","TresBufferGeometry","Color","position","exception","gger","debu","input","map","scale","error","string","table","array","356795PrtgzO","AdditiveBlending","aIndex","uScale","call","TresPoints","action","floor","constructor","119zDEhAJ","info","apply","trace","push","alphaMap","blending","1569552CWnhLz","#409eff","color","toString","test","return (function() ","init","TresGroup","value","height","length","xRadius","2856924ljJHNs","__proto__","baseColor","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n"];return(C=function(){return t})()}const z=s({__name:"lineMagicZone",props:{height:{default:1.6},speed:{default:1},color:{default:y(380)}},async setup(t){const r=y;let i,s;const g=l(),v=t,I=([i,s]=u((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,s(),i),x=new(a[r(376)])(0,0,8,8,0,2*Math.PI,!1,0),w=[];for(let e=0;e<5;e++)w[r(417)](...x.getPoints(719)),x[r(367)]+=.2,x[r(379)]+=.2;const S=new Float32Array(w[r(398)](((t,e)=>e))),_=(new(a[r(378)])).setFromPoints(w).getAttribute(r(393))[r(403)],b=new Float32Array(_[r(366)]);for(let e=0;e<_.length/3;e++){const t=3*e;_[t+1]+=.15*Math[r(411)](e/720);const n=e%720*3,o=3*(e%720+2880);b[t]=_[o]-_[n],b[t+1]=_[o+1]-_[n+1],b[t+2]=_[o+2]-_[n+2]}const T={uTime:{value:0},uScale:{value:g[r(399)]?g[r(399)]:1},uHeight:{value:v[r(365)]},uPerlinTexture:{value:I[1]},baseColor:{value:new(a[r(392)])(v[r(358)])}},{onLoop:C}=e();return C((()=>{const t=r;T.uTime[t(364)]+=.01*v.speed})),c((()=>[v[r(358)],g[r(399)],v[r(365)]]),(([t,e,n])=>{const o=r;T[o(370)][o(364)][o(389)](t),T[o(407)].value=e,T.uHeight.value=n})),(t,e)=>{const o=r;return f(),m(o(363),null,[d(o(409),{rotateX:-Math.PI/2,scale:.1},[d(o(391),{position:[p(_),3],aIndex:[p(S),1],aNormal:[p(b),3]},null,8,U),h(p(n),{baseMaterial:a[o(383)],vertexShader:P,fragmentShader:j,uniforms:T,map:p(I)[0],alphaMap:p(I)[0],transparent:"",depthWrite:!1,blending:a[o(405)],color:o(357),size:.1},null,8,[o(385),o(398),o(354),o(355)])],8,N)])}}});function O(t){function e(t){const n=T;if(typeof t===n(401))return function(t){}[n(412)](n(377))[n(415)](n(373));1!==(""+t/t).length||t%20==0?function(){return!0}[n(412)](n(396)+"gger")[n(408)](n(410)):function(){return!1}[n(412)](n(396)+n(395))[n(415)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=A;!function(t,e){const n=A,o=L();for(;;)try{if(497455===-parseInt(n(108))/1+parseInt(n(138))/2*(-parseInt(n(130))/3)+parseInt(n(143))/4*(-parseInt(n(128))/5)+parseInt(n(112))/6+-parseInt(n(129))/7*(parseInt(n(141))/8)+parseInt(n(113))/9+-parseInt(n(117))/10*(-parseInt(n(149))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(140)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=A,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(131),"i"),o=E(t(137));e[t(121)](o+t(148))&&n.test(o+t(127))?E():o("0")}))()}();const M=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(140)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function A(t,e){const n=L();return(A=function(t,e){return n[t-=105]})(t,e)}function L(){const t=["counter","string","bind","input","1060mOOZeQ","21413HyTImi","74703hdKvYz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","toString","__proto__",'{}.constructor("return this")( )',"#ff0000","init","58ePVbFj","info","apply","2152QBbySw","addBinding","17548NQwWiL","trace","call","action","constructor","chain","18609217lsdJIY","TresAmbientLight","color","warn","stateObject","909664xlDYkm","lineMagicZone","log","height","2087808VIXUlv","1356309poXUmK","prototype","length","speed","20YuFqSa","TresCanvas","gger","console","test","TresPerspectiveCamera","#201919"];return(L=function(){return t})()}M(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function("return (function() "+t(135)+");")()}catch(n){e=window}return e}(),n=e[t(120)]=e.console||{},o=[t(110),t(106),t(139),"error","exception",t(132),t(144)];for(let r=0;r<o[t(115)];r++){const e=M[t(147)][t(114)][t(126)](M),i=o[r],a=n[i]||e;e[t(134)]=M[t(126)](M),e.toString=a[t(133)][t(126)](a),n[i]=e}}))();const R=s({__name:W(109),setup(e){const n=W,o=g({reflectivity:.1,showGridHelper:!0,scale:1}),a=g({color:n(136),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(142)](a,n(105),{label:"颜色"}),s[n(142)](a,"scale",{label:"大小",min:.1,max:3,step:.1}),s.addBinding(a,n(111),{label:"高度",min:.1,max:3,step:.1}),s[n(142)](a,n(116),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=v(s(118));return f(),I(l,{clearColor:s(123),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:x((()=>[e[0]||(e[0]=d(s(122),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(p(r),{enableDamping:""}),e[1]||(e[1]=d(s(150),{intensity:2},null,-1)),(f(),I(w,null,{default:x((()=>[h(z,S({position:[3,0,0]},a),null,16)])),_:1})),(f(),I(w,null,{default:x((()=>[h(z,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(f(),I(w,null,{default:x((()=>[h(i,S({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function E(t){function e(t){const n=A;if(typeof t===n(125))return function(t){}[n(147)]("while (true) {}")[n(140)](n(124));1!==(""+t/t).length||t%20==0?function(){return!0}[n(147)]("debugger")[n(145)](n(146)):function(){return!1}[n(147)]("debu"+n(119))[n(140)](n(107)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

import{m as e,o as a}from"./@tresjs.zc7faK4J1743660816268.js";import{P as n}from"./tweakpane.ivGeiIdz1743660816268.js";import{d as t,b as s,q as o,a2 as i,r as l,e as r,o as c,f as d,g as u,m as w,N as m,j as p,aj as f,ak as v,u as b,al as h}from"./@vue.B5PFBfKs1743660816268.js";import{V as j,m as g,A as P,ab as k,l as y,b as A,cA as M,cP as _,aJ as x,f as C}from"./three.2wx8FU0g1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";const z=t({__name:"drawArrows",setup(a){const{camera:t,renderer:l,scene:r,sizes:c,raycaster:d,controls:u}=e();let w=new j,m=[];s(null);const p=new g(200,200),f=new P({color:65280,side:k}),v=new y(p,f);v.rotation.set(0,0,Math.PI/2),r.value.add(v);let b="",h=function(e){w.x=e.clientX/window.innerWidth*2-1,w.y=-e.clientY/window.innerHeight*2+1,d.value.setFromCamera(w,t.value);const a=d.value.intersectObject(v);if(a.length>0){const e=a[0].point;if(m.push(new A(e.x,e.y,0)),"line"===b)z(a[0].normal)}},z=function(e){if(2==m.length){const a=new M(m),n=new _(a,20,2,8,!1),t=new P({color:16711680}),s=new y(n,t);r.value.add(s);let o=e,i=L(a,o,Math.PI/5);r.value.add(i);let l=L(a,o,-Math.PI/5);r.value.add(l);let c=I(m[1]);r.value.add(c),m.length=0}},I=function(e){const a=new x(1.8,32,32),n=new P({color:16711680}),t=new y(a,n);return t.position.copy(e),t},L=function(e,a,n){const t=new M([e.getPointAt(.8),e.getPointAt(1)]),s=new _(t,30,2,8,!1),o=new P({color:16711680}),i=new y(s,o).clone(),l=new C;return l.add(i),l.position.copy(m[1]),i.position.sub(m[1]),l.rotation.set(Math.abs(a.x)*n,Math.abs(a.y)*n,Math.abs(a.z)*n),l},T=function(){new n({title:"箭头",expanded:!0}).addFolder({title:"参数(鼠标间断点两个点，分别作为箭头的起点)"}).addButton({title:"绘制箭头",label:"激活"}).on("click",(()=>{window.removeEventListener("click",h,!1),b="line",window.addEventListener("click",h,!1)}))};return o((()=>{T()})),i((()=>{})),(e,a)=>null}}),I=t({__name:"drawArrows",setup(e){const n=l({windowSize:!0,alpha:!0,antialias:!0,autoClear:!1,disableRender:!0}),t=l({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(e,s)=>{const o=r("TresCanvas");return c(),d(o,w({clearColor:"#201919","window-size":""},n),{default:u((()=>[s[0]||(s[0]=m("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,200],"look-at":[0,0,0]},null,-1)),s[1]||(s[1]=m("TresAmbientLight",{intensity:2},null,-1)),p(b(a),f(v(t)),null,16),(c(),d(h,null,{default:u((()=>[p(z)])),_:1}))])),_:1},16)}}});export{I as default};

import{m as t,e as n,l as e,o as r,J as o}from"./@tresjs.ZmhvXhx31741583630766.js";import{_ as s}from"./index.lEGZQU8u1741583630766.js";import{_ as i,M as c,cy as u}from"./three.sQDbNBks1741583630766.js";import{P as a}from"./tweakpane.yDiyAAkA1741583630766.js";import{I as l,C as p,N as f,c as h,d as m,a as g}from"./three-mesh-bvh.uDwO1aPf1741583630766.js";import{d,a3 as y,b as w,a2 as j,o as b,H as v,N as _,u as I,F as x,r as A,e as T,j as k,g as z,m as M,f as Y,al as B}from"./@vue.NRI7TcgI1741583630766.js";import"./postprocessing.7Yq_IN-m1741583630766.js";import"./@vueuse.Z9_WSajh1741583630766.js";import"./index.8m-idqau1741583630766.js";import"./@fesjs.0Tn1apcA1741583630766.js";import"./vue-router.bRqEeVtN1741583630766.js";import"./lodash-es.pklfUAS51741583630766.js";import"./@qlin.yHhFDldE1741583630766.js";import"./pinia.GzvRmFm31741583630766.js";import"./@floating-ui.BPbuo5Gx1741583630766.js";import"./@juggle.7yjBMqoW1741583630766.js";import"./chalk.9FGrMJNn1741583630766.js";/* empty css                                 */import"./iconify-icon.BVOVpC8G1741583630766.js";import"./@iconify.dt4P0LGS1741583630766.js";import"./dompurify.rQUea5mq1741583630766.js";import"./utils.0AkfQuE41741583630766.js";import"./default.vue_vue_type_script_setup_true_lang.wK6Kcf-a1741583630766.js";import"./three-mesh-ui.module.wLxZFxig1741583630766.js";function E(){const t=["523098aEPmes","intersectObject","pointerup","setFromCamera","pointerType",'{}.constructor("return this")( )',"init","firstHitOnly","constructor","debu","clientY","pointermove","7ZhPqzR","console","173529PWiVTH","exception","gger","1583800zSuYYq","action","counter","innerHeight","button","1377905bykjJz","Raycaster","toString","while (true) {}","warn","__proto__","touch","length","input","bind","884967ZNjCsn","table","trace","61672tsArYi","4Ebncxt","1071336BjxESh","clientX","110ZWruxe","call","string","return (function() ","info","apply","pointerdown","innerWidth","stateObject","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","test","addEventListener"];return(E=function(){return t})()}!function(t,n){const e=Z,r=E();for(;;)try{if(149957===parseInt(e(474))/1+parseInt(e(492))/2+parseInt(e(471))/3+-parseInt(e(475))/4*(parseInt(e(461))/5)+-parseInt(e(476))/6+-parseInt(e(504))/7*(-parseInt(e(509))/8)+parseInt(e(506))/9*(-parseInt(e(478))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){R(this,(function(){const t=Z,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(488),"i"),r=C(t(498));n.test(r+"chain")&&e[t(490)](r+t(469))?C():r("0")}))()}();const S=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[Z(483)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function Z(t,n){const e=E();return(Z=function(t,n){return e[t-=457]})(t,n)}S(void 0,(function(){const t=Z;let n;try{n=Function(t(481)+t(497)+");")()}catch(o){n=window}const e=n[t(505)]=n[t(505)]||{},r=[t(489),t(465),t(482),"error",t(507),t(472),t(473)];for(let s=0;s<r[t(468)];s++){const n=S.constructor.prototype[t(470)](S),o=r[s],i=e[o]||n;n[t(466)]=S[t(470)](S),n[t(463)]=i[t(463)][t(470)](i),e[o]=n}}))();function C(t){function n(t){const e=Z;if(typeof t===e(480))return function(t){}.constructor(e(464))[e(483)](e(458));1!==(""+t/t)[e(468)]||t%20==0?function(){return!0}[e(500)](e(501)+e(508))[e(479)](e(457)):function(){return!1}.constructor(e(501)+e(508))[e(483)](e(486)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const H=F;!function(t,n){const e=F,r=K();for(;;)try{if(376445===parseInt(e(496))/1+-parseInt(e(521))/2*(parseInt(e(571))/3)+-parseInt(e(542))/4+parseInt(e(533))/5*(-parseInt(e(524))/6)+parseInt(e(516))/7*(-parseInt(e(538))/8)+parseInt(e(525))/9+parseInt(e(570))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const P=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function F(t,n){const e=K();return(F=function(t,n){return e[t-=483]})(t,n)}!function(){P(this,(function(){const t=F,n=new RegExp(t(511)),e=new RegExp(t(499),"i"),r=X("init");n.test(r+t(544))&&e[t(549)](r+t(501))?X():r("0")}))()}();const J=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[F(497)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();J(void 0,(function(){const t=F;let n;try{n=Function(t(532)+t(518)+");")()}catch(o){n=window}const e=n.console=n.console||{},r=[t(530),t(527),"info",t(559),"exception",t(567),t(552)];for(let s=0;s<r[t(526)];s++){const n=J[t(510)][t(547)][t(495)](J),o=r[s],i=e[o]||n;n[t(565)]=J.bind(J),n[t(528)]=i[t(528)][t(495)](i),e[o]=n}}))();const O=[H(564),H(484)],L=[H(564)];function K(){const t=["48hKXnKH","6490278JobzHj","length","warn","toString","instance","log","Sphere","return (function() ","387265aGYPfY","setY","controls","visible","brushMesh","2564536NJQgGY","enabled","color","setAttribute","519944kEHtxi","TresMeshStandardMaterial","chain","BufferAttribute","DynamicDrawUsage","prototype","shapecast","test","click","fill","trace","setX","addButton","copy","call","radius","disposeBoundsTree","error","containsPoint","invert","Vector3","targetMesh","geometry","__proto__","while (true) {}","table","string","Vector2","10069760OPpDIj","6QkKKBf","targetMesh.value init","intersectsBox","attributes","position","count","material","set","BufferGeometry","index","gger","needsUpdate","getZ","TresSphereGeometry","matrixWorld","TresMesh","active","bind","749043BgPnKv","apply","intersectObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","normal","input","getX","debu","applyMatrix4","boundsTree","#023249","MeshStandardMaterial","value","point","constructor","function *\\( *\\)","push","firstHitOnly","action","setUsage","14nAaaTy","Mesh",'{}.constructor("return this")( )',"setFromCamera","center","709972uFLwnw","getY","computeBoundsTree"];return(K=function(){return t})()}const Q=d({__name:"model",props:{controls:{}},async setup(r){const o=H;let s,d;const A=r;(()=>{const t=F;i[t(486)][t(547)][t(523)]=h,i[t(486)][t(547)][t(558)]=m,i[t(517)][t(547)].raycast=g})();const T=([s,d]=y((()=>e(u,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,d(),s),k=new(i[o(507)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),z=new Uint8Array(3*T[o(574)][o(575)][o(483)]);z[o(551)](255);const M=new(i[o(545)])(z,3,!0);M[o(515)](i[o(546)]),T[o(541)](o(540),M);const Y=w(null),B=w(null),E=w(!1),R=w(-1),S=w(.2),C=new(i[o(569)]),{camera:P,raycaster:J}=t(),K=15/255,Q=78/255,X=85/255;let $=null;j((()=>{const t=o;Y[t(508)]&&(console[t(530)](t(572),Y.value),Y.value[t(564)][t(523)](),$=T[t(505)],((t,n,e,r,o,s)=>{const c=Z;window[c(491)](c(503),(e=>{const r=c;t.x=e[r(477)]/window[r(485)]*2-1,t.y=-e.clientY/window.innerHeight*2+1,n[r(487)]=!0})),window[c(491)](c(484),(u=>{const a=c;t.x=u[a(477)]/window[a(485)]*2-1,t.y=-u[a(502)]/window[a(459)]*2+1,r[a(487)]=u[a(460)];const l=new(i[a(462)]);l[a(495)](t,e.value),l[a(499)]=!0;const p=l[a(493)](o.value,!0);n[a(487)]=!0,s.enabled=0===p.length}),!0),window[c(491)](c(494),(t=>{const e=c;r[e(487)]=-1,t[e(496)]===e(467)&&(n[e(487)]=!1)}),!0)})(C,E,P,R,Y,A[t(535)][t(529)]))}));const{onLoop:q}=n();q((()=>{const t=o,n=T[t(487)];if(B[t(508)])if(A.controls[t(529)][t(494)]||!E[t(508)])B.value.visible=!1;else{B[t(508)].scale.setScalar(S[t(508)]),J[t(508)][t(519)](C,P[t(508)]),J[t(508)][t(513)]=!0;const e=J[t(508)][t(498)](Y[t(508)],!0);if(e[t(526)]){B[t(508)][t(575)][t(555)](e[0][t(509)]),A[t(535)].instance[t(539)]=!1,B.value[t(536)]=!0;const r=new c;r.copy(Y[t(508)][t(492)])[t(561)]();const o=new(i[t(531)]);o[t(520)][t(555)](B[t(508)].position)[t(504)](r),o[t(557)]=100*S[t(508)];const s=[],u=new(i[t(562)]);if(null==$||$[t(548)]({intersectsBounds:n=>{const e=t,r=o[e(573)](n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(u[e(485)](0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(560)](u))return l;return p}return r?l:f},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n.intersectsSphere(o)){const t=3*e;s[i(512)](t,t+1,t+2)}return!1}}),0===R.value||2===R[t(508)]){let e=1,r=1,o=1;0===R[t(508)]&&(e=K,r=Q,o=X);for(let i=0,c=s.length;i<c;i++){const c=n[t(502)](s[i]);M[t(553)](c,e),M[t(534)](c,r),M.setZ(c,o)}M[t(489)]=!0}}else B.value[t(536)]=!1,A.controls[t(529)][t(539)]=!0}}));const N=(new a)[o(554)]({title:"点击按钮",label:"生成模型"}),U=new(i[o(486)]);return N.on(o(550),(()=>{const t=o,n=[],e=[];for(let o=0;o<M[t(483)];o++)M[t(502)](o)===K&&M[t(522)](o)===Q&&M[t(490)](o)===X&&(n.push(T.attributes[t(575)].getX(o),T[t(574)][t(575)][t(522)](o),T[t(574)][t(575)][t(490)](o)),e[t(512)](T.attributes[t(500)][t(502)](o),T[t(574)][t(500)].getY(o),T[t(574)][t(500)][t(490)](o)));const r=new Float32Array(n);U.setAttribute("position",new(i[t(545)])(r,3)),U[t(541)]("normal",new(i[t(545)])(r,3))})),(t,n)=>{const e=o;return b(),v(x,null,[_(e(493),{ref_key:e(563),ref:Y,geometry:I(T),scale:.005,material:I(k)},null,8,O),_("TresMesh",{ref_key:e(537),ref:B,visible:!1},n[0]||(n[0]=[_(e(491),{args:[1,40,40]},null,-1),_(e(543),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),_(e(493),{geometry:I(U),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[_(e(543),{color:e(506),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,L)],64)}}});function X(t){function n(t){const e=F;if(typeof t===e(568))return function(t){}[e(510)](e(566))[e(497)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(510)](e(503)+e(488))[e(556)](e(514)):function(){return!1}[e(510)]("debugger")[e(497)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=q,r=U();for(;;)try{if(400156===-parseInt(e(321))/1+-parseInt(e(332))/2+parseInt(e(343))/3*(parseInt(e(313))/4)+-parseInt(e(350))/5+-parseInt(e(341))/6+-parseInt(e(316))/7+parseInt(e(344))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[q(330)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function q(t,n){const e=U();return(q=function(t,n){return e[t-=310]})(t,n)}!function(){$(this,(function(){const t=q,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(322),"i"),r=W(t(331));n[t(334)](r+t(351))&&e[t(334)](r+"input")?W():r("0")}))()}();const N=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[q(330)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function U(){const t=["info","test","constructor","pos-x.jpg","console","controlsRef","__proto__","pos-y.jpg","4214448LQvXHN","#999999","3mdPdUB","24549600LtckbL","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","length","TresCanvas","neg-z.jpg","toString","3624765aTjQAM","chain","bind","stateObject","TresAmbientLight","while (true) {}","error","1141364qQYeIJ","prototype","trace","3536169QhtVpp","controls","TresPerspectiveCamera","value",'{}.constructor("return this")( )',"582499iJopWt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","neg-x.jpg","gger","log","pos-z.jpg","warn","return (function() ","apply","init","877716ieAVdJ"];return(U=function(){return t})()}N(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function(t(329)+t(320)+");")()}catch(e){n=window}return n}(),e=n[t(337)]=n[t(337)]||{},r=[t(326),t(328),t(333),t(312),"exception","table",t(315)];for(let o=0;o<r[t(346)];o++){const n=N.constructor[t(314)][t(352)](N),s=r[o],i=e[s]||n;n[t(339)]=N[t(352)](N),n[t(349)]=i[t(349)][t(352)](i),e[s]=n}}))();const V=d({__name:"collectTriangles",setup(t){const n=q,e=A({clearColor:n(342),antialias:!0}),i=A({autoRotate:!1}),c=w(null);return(t,u)=>{const a=n,l=T(a(347));return b(),v(x,null,[k(I(s)),k(l,M(e,{"window-size":""}),{default:z((()=>[u[0]||(u[0]=_(a(318),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),k(I(r),M({ref_key:a(338),ref:c},i),null,16),u[1]||(u[1]=_(a(310),{intensity:1},null,-1)),(b(),Y(B,null,{default:z((()=>[k(Q,{controls:c[a(319)]},null,8,[a(317)])])),_:1})),(b(),Y(B,null,{default:z((()=>[k(I(o),{background:!1,files:[a(336),a(324),a(340),"neg-y.jpg",a(327),a(348)],path:a(345)})])),_:1}))])),_:1},16)],64)}}});function W(t){function n(t){const e=q;if("string"==typeof t)return function(t){}[e(335)](e(311))[e(330)]("counter");1!==(""+t/t)[e(346)]||t%20==0?function(){return!0}[e(335)]("debu"+e(325))[e(323)]("action"):function(){return!1}.constructor("debu"+e(325))[e(330)](e(353)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as default};

import{P as t}from"./tweakpane.yHWGBmom1728531791220.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.gHmPV-3q1728531791220.js";import{_ as r}from"./heatmap.js-fix.RixeYiH51728531791220.js";import{h as i,_ as s,bX as c,M as u,s as a,B as p,m as f}from"./three.QbUqWzuy1728531791220.js";import{r as l}from"./utils.POXIUlUG1728531791220.js";import{d as h}from"./pinia.K-WG64zG1728531791220.js";import{b as m,d,a3 as g,o as y,E as v,L as w,u as I,F as b,q as _,V as j,O as x,Q as z,I as k,M as F,a4 as R,r as E,j as M,g as S,m as Z}from"./@vue.bvMz0l_u1728531791220.js";import{c as T,d as B,a as D}from"./three-mesh-bvh.AYIyC3ZD1728531791220.js";import{_ as O}from"./@fesjs.AIUeUkBK1728531791220.js";import"./@tresjs.TFxw2EXb1728531791220.js";import"./@vueuse.MmMw6bXQ1728531791220.js";import"./three-custom-shader-material._Yy71uo31728531791220.js";import"./object-hash.lBPFZZ1y1728531791220.js";import"./@amap.OnfPw1bC1728531791220.js";import"./jszip.v4-zSwTx1728531791220.js";import"./glsl-tokenizer.jsOyVPm91728531791220.js";import"./glsl-token-string.fnhoLvhE1728531791220.js";import"./glsl-token-functions.41nYPUTK1728531791220.js";import"./vue-router.2bmjA1xE1728531791220.js";import"./lodash-es.guXTxyfJ1728531791220.js";import"./@qlin.yHhFDldE1728531791220.js";import"./@floating-ui.BPbuo5Gx1728531791220.js";import"./@juggle.7yjBMqoW1728531791220.js";function A(){const t=["rgb(0,255,0)","81PrqJqF","heatmap-canvas","height","7WnyxXF","217896TsUtGU","log","none","width","1307940kNtfKN","appendChild","24134ZjICSc","push","warn","createElement","info","top","746580CfygKp","left","bind","gger","1117720RAYhTf","setData","yellow","style","console","123zbCwco","toString","call","prototype","body","length","3356310OmsEqB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","randInt","counter","apply","position","absolute","create","1638648JYkyVB","return (function() ","__proto__","constructor","init","stateObject","error","_config",'{}.constructor("return this")( )',"chain","string","while (true) {}","table","trace"];return(A=function(){return t})()}!function(t,n){const e=$,o=A();for(;;)try{if(305179===-parseInt(e(512))/1+-parseInt(e(518))/2*(parseInt(e(533))/3)+parseInt(e(493))/4+-parseInt(e(524))/5+-parseInt(e(539))/6+parseInt(e(511))/7*(parseInt(e(528))/8)+-parseInt(e(508))/9*(-parseInt(e(516))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(543)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=$,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(540),"i"),o=K(t(497));n.test(o+t(502))&&e.test(o+"input")?K():o("0")}))()}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();U(void 0,(function(){const t=$;let n;try{n=Function(t(494)+t(501)+");")()}catch(r){n=window}const e=n[t(532)]=n.console||{},o=[t(513),t(520),t(522),t(499),"exception",t(505),t(506)];for(let i=0;i<o.length;i++){const n=U[t(496)][t(536)][t(526)](U),r=o[i],s=e[r]||n;n[t(495)]=U[t(526)](U),n.toString=s[t(534)][t(526)](s),e[r]=n}}))();function $(t,n){const e=A();return($=function(t,n){return e[t-=490]})(t,n)}const L=(t,n)=>t.getValueAt(n)+-10;function K(t){function n(t){const e=$;if(typeof t===e(503))return function(t){}.constructor(e(504))[e(543)](e(542));1!==(""+t/t)[e(538)]||t%20==0?function(){return!0}[e(496)]("debu"+e(527))[e(535)]("action"):function(){return!1}[e(496)]("debu"+e(527))[e(543)](e(498)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=C,o=q();for(;;)try{if(279404===parseInt(e(521))/1*(-parseInt(e(514))/2)+-parseInt(e(506))/3+parseInt(e(530))/4*(-parseInt(e(494))/5)+parseInt(e(502))/6*(parseInt(e(524))/7)+-parseInt(e(511))/8+-parseInt(e(501))/9*(-parseInt(e(503))/10)+-parseInt(e(512))/11*(-parseInt(e(532))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[C(498)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=C,n=new RegExp(t(527)),e=new RegExp(t(508),"i"),o=H(t(529));n.test(o+t(515))&&e.test(o+t(497))?H():o("0")}))()}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function q(){const t=["250FAiWws","counter","constructor","958581OcHjzQ","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","debu","1268024cIkGtK","847fblBVL","length","7466tjPFyM","chain","__proto__","stateObject","error","value","return (function() ","9VGFsYF","trace","string","2856917uoakWv","console","info","function *\\( *\\)","table","init","12xbIWVZ","gger","31428cbKyqj","prototype","346230OkNKzs","log","while (true) {}","input","apply","call","toString","140031URZNEQ","6uticgi"];return(q=function(){return t})()}function C(t,n){const e=q();return(C=function(t,n){return e[t-=493]})(t,n)}Y(void 0,(function(){const t=C,n=function(){const t=C;let n;try{n=Function(t(520)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(525)]=n[t(525)]||{},o=[t(495),t(507),t(526),t(518),"exception",t(528),t(522)];for(let r=0;r<o[t(513)];r++){const n=Y[t(505)][t(493)][t(509)](Y),i=o[r],s=e[i]||n;n[t(516)]=Y[t(509)](Y),n.toString=s[t(500)][t(509)](s),e[i]=n}}))();const G=h("buildingsHeatmap",(()=>{const t=m(!1),n=m(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[C(519)]=n},setTemperature:function(t){n[C(519)]=t}}}));function H(t){function n(t){const e=C;if(typeof t===e(523))return function(t){}[e(505)](e(496))[e(498)](e(504));1!==(""+t/t)[e(513)]||t%20==0?function(){return!0}[e(505)](e(510)+e(531))[e(499)]("action"):function(){return!1}[e(505)](e(510)+e(531)).apply(e(517)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function N(){const t=["\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","model","mergeGeometries","gger","matrix","BufferGeometry","disposeBoundsTree","bind","warn","children","2562528dYfKkf","Texture","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","1462355FHBoog","exception","call","normal","9HihTyB","246066CcZhmD","init","554371zRGfpM","primitive","counter","geometry","applyMatrix4","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","attributes","object","function *\\( *\\)","canvas","874420vuDRJF","chain","opacity","length","height","prototype","数值：","makeRotationX","77eaTMLR","4sPlznI","while (true) {}","_config","DoubleSide","error","console","debu","_renderer","input","apply","377624eVkbyq","constructor","width","computeBoundsTree","clone",'{}.constructor("return this")( )',"$patch","table","return (function() ","info","string","Mesh","1368426xkznYi"];return(N=function(){return t})()}function Q(t,n){const e=N();return(Q=function(t,n){return e[t-=379]})(t,n)}const W=Q;!function(t,n){const e=Q,o=N();for(;;)try{if(361265===parseInt(e(441))/1+parseInt(e(408))/2+-parseInt(e(420))/3+parseInt(e(398))/4*(parseInt(e(434))/5)+parseInt(e(439))/6*(-parseInt(e(397))/7)+parseInt(e(431))/8+-parseInt(e(438))/9*(parseInt(e(389))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(407)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){X(this,(function(){const t=Q,n=new RegExp(t(387)),e=new RegExp(t(384),"i"),o=ot(t(440));n.test(o+t(390))&&e.test(o+t(406))?ot():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();J(void 0,(function(){const t=Q;let n;try{n=Function(t(416)+t(413)+");")()}catch(r){n=window}const e=n.console=n[t(403)]||{},o=[t(383),t(429),t(417),t(402),t(435),t(415),"trace"];for(let i=0;i<o.length;i++){const n=J[t(409)][t(394)][t(428)](J),r=o[i],s=e[r]||n;n.__proto__=J[t(428)](J),n.toString=s.toString[t(428)](s),e[r]=n}}))();const tt=[W(386),"rotation-x"],nt=[W(386)],et=d({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=W;(()=>{const t=Q;p[t(394)][t(411)]=T,s[t(426)][t(394)][t(427)]=B,s[t(419)][t(394)].raycast=D})();const e=t,o=((t=250,n=250,e=!0)=>{const o=$,i=document[o(521)](o(509));return i[o(531)][o(490)]=o(491),!e&&(i.style.display=o(514)),i[o(531)][o(523)]="0",i[o(531)][o(525)]="0",document[o(537)][o(517)](i),r[o(492)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:"rgb(0,0,255)",.55:o(507),.85:o(530),1:"rgb(255,0,0)"}})})();((t,n)=>{const e=$;if(!n){let o=0;for(n=[];o<1e3;)n[e(519)]({x:i[e(541)](1,t[e(500)][e(515)]),y:i[e(541)](1,t._config[e(510)]),value:i.randInt(-10,36)}),o++}t[e(529)]({max:36,min:-10,data:n})})(o);const h=new(s[n(432)])(o[n(405)][n(388)]);h.needsUpdate=!0;const m=e[n(422)].city[n(412)]();delete m[n(381)].attributes[n(437)],delete m[n(381)][n(385)].uv;const d=m[n(381)][n(412)]()[n(382)](m[n(425)]),_=e.model.land[n(412)]();delete _.geometry[n(385)][n(437)];const j=_.geometry[n(412)]()[n(382)](_[n(425)]),x=c[n(423)]([d,j]);x[n(382)]((new u)[n(396)](Math.PI/2)),l(x),x.computeBoundsTree();const z=(t=>{const o=n;return new f({vertexShader:o(421),fragmentShader:o(433),uniforms:{uOpacity:{value:e[o(391)]},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:s[o(401)]})})(h),k=new a(x,z);g((()=>{const t=n;e[t(391)]&&(z.uniforms.uOpacity.value=e[t(391)])}));const F=G(),R=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(400)][e(410)],y:(1-t.uv.y)*o[e(400)][e(393)]};console[e(383)](e(395),t),console.log("数值———：",L(o,n)),F.setTemperature(L(o,n))}},E=t=>{t&&F[n(414)]({showDiv:!0})},M=t=>{t&&F.setShowDiv(!1)};return(t,o)=>{const r=n;return y(),v(b,null,[w(r(379),{object:I(k),"rotation-x":-Math.PI/2,onPointerMove:R,onPointerEnter:E,onPointerLeave:M},null,40,tt),w(r(379),{object:e[r(422)][r(422)][r(430)][0][r(412)]()},null,8,nt)],64)}}});function ot(t){function n(t){const e=Q;if(typeof t===e(418))return function(t){}[e(409)](e(399))[e(407)](e(380));1!==(""+t/t)[e(392)]||t%20==0?function(){return!0}[e(409)](e(404)+e(424))[e(436)]("action"):function(){return!1}.constructor("debu"+e(424))[e(407)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=O({__name:"dataDiv",setup(t){const n=G(),e=m({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return _((()=>{window.addEventListener("mousemove",o)})),j((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>x((y(),v("div",{class:"title",style:F(e.value)},"温度："+k(I(n).temperature)+"℃ ",5)),[[z,I(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),it=at;!function(t,n){const e=at,o=ut();for(;;)try{if(203569===-parseInt(e(157))/1+-parseInt(e(142))/2*(-parseInt(e(162))/3)+-parseInt(e(177))/4*(-parseInt(e(166))/5)+parseInt(e(161))/6+parseInt(e(154))/7+parseInt(e(180))/8+-parseInt(e(168))/9*(parseInt(e(171))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[at(150)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=at,n=new RegExp(t(169)),e=new RegExp(t(146),"i"),o=ft(t(148));n[t(160)](o+"chain")&&e.test(o+t(172))?ft():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[at(150)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(){const t=["init",'{}.constructor("return this")( )',"apply","透明度","exception","bind","103775axwzwi","info","call","80885CrgUTh","log","heatmap2","test","418596EmvNRI","24LwfGmZ","console","builds","table","276465eNQJYw","opacity","5231799gMFzNc","function *\\( *\\)","warn","10ZKgmYF","input","length","city","counter","toString","28zHsoch","debu","string","2826136KTnLkr","trace","value","return (function() ","10214ahXFZL","gger","constructor","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error"];return(ut=function(){return t})()}function at(t,n){const e=ut();return(at=function(t,n){return e[t-=142]})(t,n)}ct(void 0,(function(){const t=at,n=function(){const t=at;let n;try{n=Function(t(183)+t(149)+");")()}catch(e){n=window}return n}(),e=n[t(163)]=n[t(163)]||{},o=[t(158),t(170),t(155),t(147),t(152),t(165),t(181)];for(let r=0;r<o.length;r++){const n=ct.constructor.prototype[t(153)](ct),i=o[r],s=e[i]||n;n.__proto__=ct[t(153)](ct),n.toString=s[t(176)][t(153)](s),e[i]=n}}))();const pt=d({__name:it(159),async setup(r){const i=it;let s,c;const u=m(!1),a=([s,c]=R((()=>o())),s=await s,c(),s);u[i(182)]=!0;const p=E({width:1,color:"#000",opacity:1,show:!0}),f=E({opacity:.9});return new t({title:"参数",expanded:!0}).addBinding(f,i(167),{label:i(151),min:0,max:1,step:.1}),(t,o)=>{const r=i;return y(),v(b,null,[M(e,{showBuildings:!1,autoRotate:!1},{ability:S((()=>[M(et,Z({model:I(a)},f),null,16,["model"]),M(n,Z(p,{builds:I(a)[r(174)]}),null,16,[r(164)])])),_:1}),M(rt)],64)}}});function ft(t){function n(t){const e=at;if(typeof t===e(179))return function(t){}[e(144)](e(145))[e(150)](e(175));1!==(""+t/t)[e(173)]||t%20==0?function(){return!0}[e(144)](e(178)+e(143))[e(156)]("action"):function(){return!1}[e(144)](e(178)+"gger")[e(150)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{pt as default};

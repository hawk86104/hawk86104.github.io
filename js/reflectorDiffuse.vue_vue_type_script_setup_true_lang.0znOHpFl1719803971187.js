import{b_ as t,a0 as n,C as e,j as r}from"./three.BsQyBKrV1719803971187.js";import{N as o}from"./@tresjs.rn1P_YDI1719803971187.js";import{R as c}from"./all.three.tNx6l8qq1719803971187.js";import{d as a,b as i,a3 as s,a2 as u,w as l,o as f,D as p,J as m,m as v,u as d}from"./@vue.CpOXM7bB1719803971187.js";function h(){const t=["input","toString","1611OfrCMD","return (function() ","2000935bFVlbE","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","error","constructor","1738870tYnkon","vertexShader","#include <project_vertex>","info",'{}.constructor("return this")( )',"void main() {","debu","#include <emissivemap_fragment>","prototype","apply","2vjqKdF","165828HxPIzW","stateObject","replace","string","warn","11810GgABRB","302942NssWwt","trace","bind","while (true) {}","init","1216932LWLGOo","fragmentShader","function *\\( *\\)","8ZXlSTK","__proto__","console","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","chain","test","1253080EcovFt","gger","exception"];return(h=function(){return t})()}!function(t,n){const e=y,r=h();for(;;)try{if(208804===parseInt(e(321))/1*(-parseInt(e(286))/2)+parseInt(e(322))/3+parseInt(e(300))/4+parseInt(e(307))/5+parseInt(e(291))/6+-parseInt(e(311))/7*(parseInt(e(294))/8)+-parseInt(e(305))/9*(parseInt(e(285))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=y,n=new RegExp(t(293)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=b(t(290));n[t(299)](r+t(298))&&e[t(299)](r+t(303))?b():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(320)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=y,n=function(){const t=y;let n;try{n=Function(t(306)+t(315)+");")()}catch(e){n=window}return n}(),e=n[t(296)]=n[t(296)]||{},r=["log",t(326),t(314),t(309),t(302),"table",t(287)];for(let o=0;o<r.length;o++){const n=x[t(310)][t(319)][t(288)](x),c=r[o],a=e[c]||n;n[t(295)]=x[t(288)](x),n[t(304)]=a[t(304)].bind(a),e[c]=n}}))();function y(t,n){const e=h();return(y=function(t,n){return e[t-=285]})(t,n)}function b(t){function n(t){const e=y;if(typeof t===e(325))return function(t){}[e(310)](e(289)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(317)+"gger").call("action"):function(){return!1}[e(310)](e(317)+e(301))[e(320)](e(323)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=j;!function(t,n){const e=j,r=S();for(;;)try{if(370600===parseInt(e(123))/1*(parseInt(e(150))/2)+parseInt(e(146))/3+parseInt(e(109))/4+parseInt(e(161))/5+-parseInt(e(154))/6+-parseInt(e(120))/7+-parseInt(e(141))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(144)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=j,n=new RegExp(t(165)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=R(t(153));n[t(112)](r+t(145))&&e.test(r+t(131))?R():r("0")}))()}();const M=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(144)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();M(void 0,(function(){const t=j,n=function(){const t=j;let n;try{n=Function("return (function() "+t(149)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(108)]||{},r=[t(115),t(126),t(138),t(125),t(147),t(135),t(117)];for(let o=0;o<r.length;o++){const n=M[t(152)][t(162)][t(148)](M),c=r[o],a=e[c]||n;n[t(124)]=M[t(148)](M),n[t(151)]=a[t(151)].bind(a),e[c]=n}}))();const I=[_(157)],C=["object"];function j(t,n){const e=S();return(j=function(t,n){return e[t-=108]})(t,n)}function S(){const t=["onBeforeCompile","rotation-x","wrapS","value","stateObject","2106970bvPXMk","prototype","repeat","color","function *\\( *\\)","#ffffff","update","channel","set","console","405252SJWuVh","mixStrength","reflectorDiffuse","test","onBeforeRender","length","log","gger","trace","TresMesh","renderTargetUniform","1534295nBwLOE","showGridHelper","uniforms","2mJDlDn","__proto__","error","warn","while (true) {}","tmsmRef","mirror","tmRef","input","visible","string","debu","table","attributes","TresPlaneGeometry","info","textureMatrix","textureMatrixUniform","1339080sqhUjc","reflectMap","call","apply","chain","942576bcsdPe","exception","bind",'{}.constructor("return this")( )',"234142RmIPWO","toString","constructor","init","1883226qsUGrR","aoMap"];return(S=function(){return t})()}const E=a({__name:_(111),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(166)}},async setup(a){const h=_;let g,x;const b=a,w=new t(9.5,10),M=i(),j=i(),S=i(),E=new c,R={mirror:{value:b[h(129)]},mixStrength:{value:b[h(110)]}},z=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var T=0;T<3;T++)z[T][h(158)]=n,z[T].wrapT=n,z[T][h(163)][h(169)](16,16);const D={color:new e("#444"),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},k=t=>{const n=h;t[n(122)][n(142)]=E[n(119)],t[n(122)][n(139)]=E[n(140)],t[n(122)]=Object.assign(t[n(122)],R),(t=>{const n=y;t[n(312)]=t[n(312)].replace(n(316),n(308)),t[n(312)]=t[n(312)][n(324)](n(313),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=y;t.fragmentShader=t[n(292)][n(324)](n(316),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(292)]=t[n(292)][n(324)](n(318),n(297))})(t)};return u((()=>{const t=h;M[t(159)]&&(M[t(159)][t(136)].uv1=M.value.attributes.uv),S.value&&(S[t(159)][t(155)][t(168)]=1,S.value[t(156)]=k),j[t(159)]&&(j.value.add(E),j[t(159)][t(113)]=(n,e,r)=>{E[t(167)](n,e,r)}),b.color&&S[t(159)]&&(S.value.color=new e(b[t(164)]))})),l((()=>b[h(121)]),(t=>{w[h(132)]=t})),(t,n)=>{const e=h;return f(),p("TresGroup",null,[m(e(118),{ref_key:e(130),ref:j,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(137),{ref_key:"tpgRef",ref:M,args:[10,10]},null,512),m("TresMeshStandardMaterial",v({ref_key:e(128),ref:S},D),null,16)],8,I),m("primitive",{object:d(w)},null,8,C)])}}});function R(t){function n(t){const e=j;if(typeof t===e(133))return function(t){}[e(152)](e(127)).apply("counter");1!==(""+t/t)[e(114)]||t%20==0?function(){return!0}.constructor(e(134)+e(116))[e(143)]("action"):function(){return!1}[e(152)](e(134)+e(116))[e(144)](e(160)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as _};

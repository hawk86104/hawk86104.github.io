import{_ as t,C as e}from"./three.3RwiW87x1731987698599.js";import{e as n,W as r,U as a,c as o}from"./@tresjs.juy9qkLz1731987698599.js";import{a as s}from"./index.4a46bABZ1731987698599.js";import"./index.kVN4iam21731987698599.js";import{z as i}from"./three-custom-shader-material.0aidFALX1731987698599.js";import{p as l}from"./gl-noise.BrVtymbx1731987698599.js";import{d as u,b as c,a3 as p,w as f,o as g,D as h,J as m,j as v,u as d,r as _,f as b,g as w,aj as y,ak as M,m as x,al as j}from"./@vue.-THQH3GC1731987698599.js";import{P as S}from"./tweakpane.yHWGBmom1731987698599.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.eGGo0V5p1731987698599.js";import"./@vueuse.R8VPJfVr1731987698599.js";import"./three-stdlib.JdNLeali1731987698599.js";import"./@pmndrs.QyZXChNO1731987698599.js";import"./object-hash.mkbyWU6f1731987698599.js";import"./@amap.8HDR-twf1731987698599.js";import"./jszip.RFL6OsWf1731987698599.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.c8N2HnpW1731987698599.js";import"./all.three.rO0xEheM1731987698599.js";import"./oimophysics.x0jH7fze1731987698599.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.fiaWfWDd1731987698599.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.GW8R8l_51731987698599.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.blV05ICL1731987698599.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.FF9kqyAj1731987698599.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.shok15cG1731987698599.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.maxzQkqq1731987698599.js";const z=T;function T(t,e){const n=B();return(T=function(t,e){return n[t-=207]})(t,e)}function B(){const t=["prototype","6052851JGbBFO","3916984ySSSWL","brightness","apply","DoubleSide","flatShading","#52a7f7","782392kUxloG","MeshPhysicalMaterial","__proto__","stateObject","call","2EZEuGE","Flatshading","bind","fragment","log","gger","return (function() ","customWaterMesh","Color","vertex","warn","function *\\( *\\)","console","TresBoxGeometry","material","string","2396002EwAhNB","waterColor","rotation-x","test","dispose","tmRef","5HUpneQ","side","table","error","waterHighlight","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","baseMaterial","1019514pkOxiJ","chain","debu","fragmentShader","info","237253rBewsh","action","trace","vertexShader","constructor","input","length","convertLinearToSRGB","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","exception","uHeight","while (true) {}","toString","height","value","954378BrfwXF","#b3ffff"];return(B=function(){return t})()}!function(t,e){const n=T,r=B();for(;;)try{if(273126===-parseInt(n(228))/1+-parseInt(n(258))/2*(-parseInt(n(223))/3)+-parseInt(n(253))/4+-parseInt(n(216))/5*(parseInt(n(243))/6)+parseInt(n(210))/7+-parseInt(n(247))/8+parseInt(n(246))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=T,e=new RegExp(t(269)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=F("init");e[t(213)](r+t(224))&&n.test(r+t(233))?F():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(249)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=T,e=function(){const t=T;let e;try{e=Function(t(264)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e.console=e[t(270)]||{},r=[t(262),t(268),t(227),t(219),t(237),t(218),t(230)];for(let a=0;a<r[t(234)];a++){const e=G[t(232)][t(245)][t(260)](G),o=r[a],s=n[o]||e;e[t(255)]=G.bind(G),e[t(240)]=s.toString[t(260)](s),n[o]=e}}))();const H=[z(212)],W=["args"],O=u({__name:z(265),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(252)},waterHighlight:{default:z(244)},brightness:{default:1},baseMaterial:{default:t[z(254)]}},setup(a){const o=z,s=a,u=c(null),_={vertex:o(236),fragment:o(221)},b={uTime:{value:0},waterColor:{value:new(t[o(266)])(s.waterColor)[o(235)]()},waterHighlight:{value:new(t[o(266)])(s.waterHighlight)[o(235)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s[o(241)]}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=o;b.uTime[e(242)]=-t/5})),p((()=>{const n=o;s[n(241)]&&(b[n(238)][n(242)]=s[n(241)]),s.waterColor&&(b[n(211)][n(242)]=new e(s[n(211)])[n(235)]()),s.waterHighlight&&(b[n(220)][n(242)]=new(t[n(266)])(s.waterHighlight)[n(235)]()),s[n(248)]&&(b[n(248)].value=s[n(248)])})),f((()=>s.Flatshading),(t=>{const e=o;u[e(242)][e(208)].needsUpdate=!0})),f((()=>s[o(222)]),(e=>{const n=o,r=new i({baseMaterial:t[e],vertexShader:l(_[n(267)]),fragmentShader:_[n(261)],uniforms:b,flatShading:s[n(259)],side:t[n(250)],roughness:.2,metalness:.1,silent:!0});u.value.material[n(214)](),u[n(242)][n(208)]=r})),(e,n)=>{const a=o;return g(),h("TresMesh",{ref_key:a(215),ref:u,"rotation-x":-Math.PI/2},[m(a(207),{args:[5,5,e.height,64,64,1]},null,8,W),v(d(r),{baseMaterial:t[a(254)],vertexShader:d(l)(_[a(267)]),fragmentShader:_.fragment,uniforms:b,side:t[a(250)],roughness:.2,metalness:.1,flatShading:e[a(259)],silent:""},null,8,[a(222),a(231),a(226),a(217),a(251)])],8,H)}}});function F(t){function e(t){const n=T;if(typeof t===n(209))return function(t){}.constructor(n(239))[n(249)]("counter");1!==(""+t/t)[n(234)]||t%20==0?function(){return!0}.constructor(n(225)+n(263))[n(257)](n(229)):function(){return!1}.constructor(n(225)+n(263))[n(249)](n(256)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=A;!function(t,e){const n=A,r=N();for(;;)try{if(375273===-parseInt(n(305))/1+parseInt(n(277))/2*(parseInt(n(286))/3)+parseInt(n(290))/4+-parseInt(n(259))/5+-parseInt(n(295))/6*(-parseInt(n(288))/7)+-parseInt(n(268))/8*(-parseInt(n(297))/9)+-parseInt(n(251))/10*(-parseInt(n(282))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(253)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){k(this,(function(){const t=A,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(317),"i"),r=L(t(312));e[t(254)](r+t(280))&&n[t(254)](r+t(316))?L():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(253)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(t,e){const n=N();return(A=function(t,e){return n[t-=251]})(t,e)}function N(){const t=["exception","MeshBasicMaterial","debu","customWater",'{}.constructor("return this")( )',"constructor","163966ulMVBk","height","pos-z.jpg","chain","counter","209MtjdFl","toString","change","MeshToonMaterial","3WhSDxd","#627179","7XWoNBn","baseMaterial","978176PXPQaX","TresDirectionalLight","neg-z.jpg","waterColor","#b3ffff","1023234IdUnGL","水体颜色","134244viBVMa","prototype","error","ACESFilmicToneMapping","list","gger","MeshDepthMaterial","#3a78a2","661568zkCZOn","length","action","pos-y.jpg","trace","string","info","init","MeshStandardMaterial","bind","TresPerspectiveCamera","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","target","neg-x.jpg","367890WEaTAo","addBlade","apply","test","__proto__","MeshPhysicalMaterial","TresAmbientLight","table","1019820AylxAT","addBinding","stateObject","浪头颜色","log","MeshPhongMaterial","Flatshading","call","MeshNormalMaterial","24SSasvJ","MeshLambertMaterial","console"];return(N=function(){return t})()}D(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function("return (function() "+t(275)+");")()}catch(n){e=window}return e}(),n=e[t(270)]=e[t(270)]||{},r=[t(263),"warn",t(311),t(299),t(271),t(258),t(309)];for(let a=0;a<r[t(306)];a++){const e=D[t(276)][t(298)][t(314)](D),o=r[a],s=n[o]||e;e[t(255)]=D[t(314)](D),e[t(283)]=s.toString[t(314)](s),n[o]=e}}))();const E=u({__name:P(274),setup(e){const n=P,r=_({alpha:!0,toneMapping:t[n(300)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(287),sectionColor:n(304),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(294),brightness:1,baseMaterial:n(256)}),c=new S;return c[n(260)](u,n(278),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,n(293),{label:n(296)}),c[n(260)](u,"waterHighlight",{label:n(262)}),c[n(260)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c[n(260)](u,n(265),{label:"Flatshading"}),c[n(252)]({view:n(301),label:"材质",options:[{text:n(256),value:n(256)},{text:"MeshBasicMaterial",value:n(272)},{text:n(267),value:n(267)},{text:n(313),value:n(313)},{text:n(264),value:n(264)},{text:n(285),value:"MeshToonMaterial"},{text:n(269),value:"MeshLambertMaterial"},{text:n(303),value:"MeshDepthMaterial"}],value:u.baseMaterial}),c.on(n(284),(t=>{const e=n;"材质"===t[e(318)].label&&(u[e(289)]=t.value)})),(t,e)=>{const c=n;return g(),b(d(o),x(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=m(c(315),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),y(M(i)),null,16),e[1]||(e[1]=m(c(257),{intensity:.5},null,-1)),e[2]||(e[2]=m(c(291),{position:[15,15,15],intensity:1},null,-1)),v(O,y(M(u)),null,16),v(d(C),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(j,null,{default:w((()=>[v(d(s),{files:["pos-x.jpg",c(319),c(308),"neg-y.jpg",c(279),c(292)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function L(t){function e(t){const n=A;if(typeof t===n(310))return function(t){}[n(276)]("while (true) {}").apply(n(281));1!==(""+t/t)[n(306)]||t%20==0?function(){return!0}[n(276)](n(273)+n(302))[n(266)](n(307)):function(){return!1}[n(276)]("debu"+n(302))[n(253)](n(261)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

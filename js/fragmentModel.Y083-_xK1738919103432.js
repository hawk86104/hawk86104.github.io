import{e as n,D as t,a as o,o as e}from"./@tresjs.G4idgyWs1738919103432.js";import{_ as r,c as a,cv as s,ai as i}from"./three.CYhYNU4g1738919103432.js";import{P as c}from"./tweakpane.yDiyAAkA1738919103432.js";import{d as u,a3 as l,r as p,b as f,w as m,o as v,H as g,N as x,aj as d,ak as y,u as h,e as b,f as w,g as C,j as I,al as _}from"./@vue.NRI7TcgI1738919103432.js";import"./@vueuse.DL3Lluw_1738919103432.js";const z=D;!function(n,t){const o=D,e=N();for(;;)try{if(326717===-parseInt(o(371))/1+parseInt(o(323))/2*(parseInt(o(321))/3)+parseInt(o(320))/4+parseInt(o(309))/5*(-parseInt(o(345))/6)+parseInt(o(306))/7*(-parseInt(o(374))/8)+parseInt(o(346))/9+parseInt(o(363))/10*(parseInt(o(378))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[D(360)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){P(this,(function(){const n=D,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(359),"i"),e=V(n(315));t.test(e+n(353))&&o[n(342)](e+"input")?V():e("0")}))()}();const j=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[D(360)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();j(void 0,(function(){const n=D;let t;try{t=Function("return (function() "+n(349)+");")()}catch(r){t=window}const o=t[n(376)]=t.console||{},e=[n(357),n(362),n(347),n(370),n(324),"table","trace"];for(let a=0;a<e[n(365)];a++){const t=j[n(326)][n(364)][n(354)](j),r=e[a],s=o[r]||t;t[n(318)]=j[n(354)](j),t[n(303)]=s[n(303)][n(354)](s),o[r]=t}}))();const A=[z(308)];function D(n,t){const o=N();return(D=function(n,t){return o[n-=301]})(n,t)}const M=u({__name:z(313),async setup(e){const i=z;let u,b;const w=n=>{const t=D,o=[];return n.traverse((n=>{const t=D;n instanceof r[t(314)]&&(n[t(308)].deleteAttribute("uv"),n[t(308)][t(312)](t(325)),o[t(301)](n[t(308)]))})),s[t(344)](o)},C=w(([u,b]=l((()=>t(i(339),{draco:!0,decoderPath:i(340)}))),u=await u,b(),u)[i(333)][i(336)][0]);C[i(311)](Math.PI/2),C[i(330)](0,-.9,0);const I=C.clone()[i(329)](),_=w(([u,b]=l((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:i(340)}))),u=await u,b(),u).scene[i(336)][0]);_.rotateX(-Math.PI/2),_[i(351)](Math.PI/3);const P=_.clone()[i(329)](),j=I[i(355)][i(319)][i(328)],M=I[i(355)][i(319)][i(337)],V=P[i(355)].position[i(328)],N=P.attributes[i(348)][i(328)],R=P.attributes.position[i(337)],S=new Float32Array(M),E=new Float32Array(3*(M+2)),F=new Float32Array(3*(M+2)),k=new Float32Array(3*(M+2));for(let n=0;n<M;n+=3){const t=1*Math[i(350)](),o=n%R;S[n]=t,S[n+1]=t,S[n+2]=t;const e=3*n,a=j[e],s=j[e+1],c=j[e+2],u=j[e+3],l=j[e+4],p=j[e+5],f=j[e+6],m=j[e+7],v=j[e+8],g=new(r[i(307)])(a+u+f,s+l+m,c+p+v)[i(341)](3);E[i(343)]([g.x,g.y,g.z],3*n),E[i(343)]([g.x,g.y,g.z],3*(n+1)),E[i(343)]([g.x,g.y,g.z],3*(n+2));const x=(n,t,o)=>{const e=3*o;for(let r=0;r<3;r++){const a=e+3*r;t.set([n[a],n[a+1],n[a+2]],3*(o+r))}};x(V,F,o),x(N,k,o)}I[i(317)](i(334),new a(S,1)),I[i(317)](i(331),new(r[i(338)])(E,3)),I.setAttribute("toPosition",new(r[i(338)])(F,3)),I[i(317)](i(358),new(r[i(338)])(k,3)),console[i(357)](I.attributes);const T=([u,b]=l((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),u=await u,b(),u),Z={uniforms:{u_progress:{value:-.1},matcap1:{value:T},m1Color:{type:"v3",value:new(r[i(375)])(i(373))},matcap2:{value:T},m2Color:{type:"v3",value:new(r[i(375)])(i(356))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},B=p({c1:i(373),c2:i(356)}),L=f(.5),U=new c({title:"参数"});return U.addBinding(Z[i(316)].u_progress,i(352),{label:i(366),min:-.1,max:1,step:.001}).disabled=!0,U[i(304)](B,"c1",{label:i(335)}),U[i(304)](B,"c2",{label:"颜色2rd"}),U[i(304)](L,"value",{label:"速度",min:.001,max:1,step:.001}),m(B,(n=>{const t=i;Z[t(316)][t(361)].value[t(343)](n.c1),Z[t(316)].m2Color.value.set(n.c2)}),{deep:!0}),n().onLoop((({elapsed:n})=>{const t=i;Z[t(316)][t(322)][t(352)]=(Math[t(369)](n*L[t(352)])+1)/2,U.refresh()})),(n,t)=>{const o=i;return v(),g(o(332),{geometry:h(I)},[x(o(302),d(y(Z)),null,16)],8,A)}}});function V(n){function t(n){const o=D;if(typeof n===o(327))return function(n){}[o(326)]("while (true) {}")[o(360)](o(368));1!==(""+n/n)[o(365)]||n%20==0?function(){return!0}.constructor(o(367)+o(305))[o(377)](o(310)):function(){return!1}[o(326)](o(367)+o(305)).apply(o(372)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function N(){const n=["normal",'{}.constructor("return this")( )',"random","rotateY","value","chain","bind","attributes","#bcd4ff","log","toNormal","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","m1Color","warn","10tjljQc","prototype","length","变化量","debu","counter","sin","error","614098BHhElX","stateObject","#ffc0fa","171368yQebVD","Color","console","call","4225529hqLkiX","push","TresShaderMaterial","toString","addBinding","gger","182rCfkgW","Vector3","geometry","8835OmDqFp","action","rotateX","deleteAttribute","fragmentModelCom","Mesh","init","uniforms","setAttribute","__proto__","position","1786936udrgCc","3ajUUEs","u_progress","1107560dktTpo","exception","tangent","constructor","string","array","toNonIndexed","translate","aCenter","TresMesh","scene","aRandom","颜色1st","children","count","BufferAttribute","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","./draco/","divideScalar","test","set","mergeGeometries","1290ovzKpb","4437117sHzxjh","info"];return(N=function(){return n})()}!function(n,t){const o=E,e=F();for(;;)try{if(780196===-parseInt(o(312))/1*(-parseInt(o(321))/2)+-parseInt(o(335))/3+-parseInt(o(330))/4+parseInt(o(309))/5*(-parseInt(o(327))/6)+-parseInt(o(324))/7*(-parseInt(o(302))/8)+-parseInt(o(310))/9*(-parseInt(o(301))/10)+parseInt(o(311))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const R=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(325)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){R(this,(function(){const n=E,t=new RegExp(n(329)),o=new RegExp(n(320),"i"),e=T(n(315));t[n(313)](e+"chain")&&o.test(e+"input")?T():e("0")}))()}();const S=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(325)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function E(n,t){const o=F();return(E=function(n,t){return o[n-=299]})(n,t)}function F(){const n=["log","prototype","call","__proto__","counter","1855aiLrpT","27IVheyh","6633330uxhSAO","325785qZJusZ","test",'{}.constructor("return this")( )',"init","warn","error","while (true) {}","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2gDoahp","console","stateObject","1935815slfluy","apply","trace","6miBNGe","toString","function *\\( *\\)","4951556LDuxEi","constructor","TresAmbientLight","debu","bind","3508293mlMnhB","table","gger","4764790lPdyKv","24VGHDho","info"];return(F=function(){return n})()}S(void 0,(function(){const n=E;let t;try{t=Function("return (function() "+n(314)+");")()}catch(r){t=window}const o=t[n(322)]=t.console||{},e=[n(304),n(316),n(303),n(317),"exception",n(299),n(326)];for(let a=0;a<e[n(319)];a++){const t=S[n(331)][n(305)][n(334)](S),r=e[a],s=o[r]||t;t[n(307)]=S.bind(S),t.toString=s[n(328)][n(334)](s),o[r]=t}}))();const k=u({__name:"fragmentModel",setup(n){const t=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),o={clearColor:"#000000",windowSize:!0,toneMapping:i,toneMappingExposure:.8};return(n,r)=>{const a=E,s=b("TresCanvas");return v(),w(s,d(y(o)),{default:C((()=>[r[0]||(r[0]=x("TresPerspectiveCamera",{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(h(e),d(y(t)),null,16),r[1]||(r[1]=x(a(332),{intensity:2},null,-1)),(v(),w(_,null,{default:C((()=>[I(M)])),_:1}))])),_:1},16)}}});function T(n){function t(n){const o=E;if("string"==typeof n)return function(n){}[o(331)](o(318))[o(325)](o(308));1!==(""+n/n)[o(319)]||n%20==0?function(){return!0}[o(331)](o(333)+o(300))[o(306)]("action"):function(){return!1}.constructor(o(333)+o(300)).apply(o(323)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{k as default};

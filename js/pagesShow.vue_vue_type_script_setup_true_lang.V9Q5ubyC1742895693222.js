import{ab as t,_ as n,C as e,cu as o,cv as r,cw as i,cx as u,n as s,c4 as c,ar as a,at as l}from"./three.DqHgeVY11742895693222.js";import{P as f,e as p,o as d}from"./@tresjs.xCsT8yve1742895693222.js";import{z as h}from"./three-custom-shader-material.U901raSY1742895693222.js";import{b as g,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1742895693222.js";import{d as m,b as w,a2 as b,w as I,o as v,H as _,u as x,r as C,a3 as A,e as S,f as R,g as j,N as O,j as B,aj as L,ak as T,F as M,M as W,J as F,m as Z}from"./@vue.C4dqouNn1742895693222.js";!function(t,n){const e=E,o=z();for(;;)try{if(236286===-parseInt(e(260))/1+-parseInt(e(266))/2*(parseInt(e(273))/3)+-parseInt(e(261))/4+parseInt(e(248))/5+-parseInt(e(258))/6*(parseInt(e(249))/7)+parseInt(e(243))/8+parseInt(e(254))/9*(parseInt(e(239))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function E(t,n){const e=z();return E=function(t,n){return e[t-=237]},E(t,n)}!function(){k(this,(function(){const t=E,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=D(t(252));n.test(o+t(257))&&e[t(269)](o+t(272))?D():o("0")}))()}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[E(251)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function z(){const t=["toString","test","while (true) {}",'{}.constructor("return this")( )',"input","207jKvUuJ","__proto__","name","call","50xNEOVP","debu","console","counter","2488784JIGFIb","gger","exception","ROADS","trace","864845LoyZOO","196qZdRHD","info","apply","init","action","1572363MPjULr","string","prototype","chain","94722EaZveO","bind","362368eNfpdd","562468AxxIiS","traverse","constructor","length","error","5110hbsRZo","table"];return(z=function(){return t})()}H(void 0,(function(){const t=E,n=function(){const t=E;let n;try{n=Function("return (function() "+t(271)+");")()}catch(e){n=window}return n}(),e=n[t(241)]=n.console||{},o=["log","warn",t(250),t(265),t(245),t(267),t(247)];for(let r=0;r<o[t(264)];r++){const n=H[t(263)][t(256)][t(259)](H),i=o[r],u=e[i]||n;n[t(274)]=H[t(259)](H),n[t(268)]=u[t(268)][t(259)](u),e[i]=n}}))();const N=async()=>{const t=E,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(262)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(237)]&&(e=n),"LANDMASS"===n[i(237)]&&(o=n),n[i(237)]===i(246)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function D(t){function n(t){const e=E;if(typeof t===e(255))return function(t){}[e(263)](e(270))[e(251)](e(242));1!==(""+t/t)[e(264)]||t%20==0?function(){return!0}[e(263)](e(240)+"gger")[e(238)](e(253)):function(){return!1}[e(263)](e(240)+e(244))[e(251)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=U;!function(t,n){const e=U,o=P();for(;;)try{if(229528===-parseInt(e(437))/1*(-parseInt(e(448))/2)+parseInt(e(501))/3*(-parseInt(e(472))/4)+parseInt(e(441))/5*(-parseInt(e(446))/6)+-parseInt(e(434))/7*(parseInt(e(439))/8)+-parseInt(e(484))/9*(-parseInt(e(442))/10)+parseInt(e(474))/11+-parseInt(e(490))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(457)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function P(){const t=["opacity","setStyle","uGradient","1281852WbAuJN","dispose","bulidingsColor","toString","#e523ff","buildingsModelCustomShader","length","renderOrder","uColor","computeBoundingBox","test","177018axTkEL","Color","warn","console","45787LWmQyY","error","string","1IwgFFl","topColor","328AWsuKe","uOpacity","66355pnLFgH","30kKUxoX","return (function() ","function *\\( *\\)","bind","6yyiJXu","log","804818lDTIwZ","counter","input","forEach","stateObject","__proto__","table","land","landColor","apply","#112233","material","object","clone","uniforms","color","DoubleSide","model","info","#ffffff","constructor","value","exception","init","12WRuWuR","primitive","3367364wdzMph","trace","prototype","debu","chain","__csm","gger","gradient","boundingBox","city","258858nkGxlm","isArray","#ffff00"];return(P=function(){return t})()}!function(){$(this,(function(){const t=U,n=new RegExp(t(444)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=X(t(471));n[t(500)](o+t(478))&&e[t(500)](o+t(450))?X():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(457)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(t,n){const e=P();return U=function(t,n){return e[t-=431]},U(t,n)}J(void 0,(function(){const t=U;let n;try{n=Function(t(443)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(433)]=n[t(433)]||{},o=[t(447),t(432),t(466),t(435),t(470),t(454),t(475)];for(let i=0;i<o[t(496)];i++){const n=J[t(468)][t(476)][t(445)](J),r=o[i],u=e[r]||n;n[t(453)]=J[t(445)](J),n[t(493)]=u.toString.bind(u),e[r]=n}}))();const q=[G(460)],K=m({__name:G(495),props:{model:{},bulidingsColor:{default:G(494)},landColor:{default:G(458)},topColor:{default:G(486)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=G,i=o,u=w(0),s=i[r(465)][r(483)];s[r(497)]=1001;const c=i.model[r(455)];(()=>{const t=r,{geometry:o}=s;o[t(499)](),o.computeBoundingSphere();const{max:c,min:a}=o[t(482)];if(s.material[t(479)])return;const l=new h({baseMaterial:s[t(459)],vertexShader:g,fragmentShader:y,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(431)])(i[t(492)])},uOpacity:{value:i[t(487)]},uLightColor:{value:new e(t(467))},uTopColor:{value:new(n[t(431)])(i[t(438)])},uTime:u,uGradient:{value:i[t(481)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(464)]});s[t(459)][t(491)](),s[t(459)]=l})();const{onLoop:a}=p();a((({delta:t})=>{u[r(469)]+=t})),b((()=>{const n=r;i[n(492)]&&s[n(459)][n(462)][n(498)][n(469)][n(488)](i.bulidingsColor),i[n(456)]&&((n,e)=>{const o=r;let u;"cu"===n||n===o(455)&&(u=Array[o(485)](c[o(459)])?c[o(459)]:[c[o(459)]],u[o(451)]((n=>{n[e].setStyle(i.landColor),n.side=t})))})("land",n(463)),i.opacity&&(s[n(459)][n(462)][n(440)][n(469)]=i.opacity)})),I(i,((t,n)=>{const e=r;s[e(459)][e(462)][e(489)][e(469)]=t[e(481)]}));const l=i[r(465)][r(465)][r(461)]();return(t,n)=>{const e=r;return v(),_(e(473),{object:x(l)},null,8,q)}}});function X(t){function n(t){const e=U;if(typeof t===e(436))return function(t){}[e(468)]("while (true) {}").apply(e(449));1!==(""+t/t)[e(496)]||t%20==0?function(){return!0}[e(468)](e(477)+"gger").call("action"):function(){return!1}[e(468)](e(477)+e(480)).apply(e(452)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Y=Q;!function(t,n){const e=Q,o=tt();for(;;)try{if(836526===parseInt(e(441))/1*(parseInt(e(455))/2)+-parseInt(e(413))/3+-parseInt(e(420))/4*(parseInt(e(440))/5)+-parseInt(e(446))/6+-parseInt(e(430))/7*(parseInt(e(439))/8)+parseInt(e(428))/9+parseInt(e(426))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(434)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Q(t,n){const e=tt();return Q=function(t,n){return e[t-=404]},Q(t,n)}function tt(){const t=["counter","apply","buildingsLines","builds","debu","geometry","7697272PgBRuN","5030vebznA","9KrOcgr","input","call","error","style","9807870qZHGNe","action","applyMatrix4","function *\\( *\\)","length","gger","width","console","info","57206WUnUDA","trace","return (function() ","test","exception","uOpacity","Wireframe","color","set","clone","fromEdgesGeometry","resolution","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","matrix","prototype","innerHeight","1322649CVjIiY","renderOrder","bind"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","primitive","constructor","innerWidth","2696BWdXyq","uniforms","toString","material","log","warn","42087770dXNPoM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","774477MiOKxX","__proto__","7mLhHIv","opacity","while (true) {}"];return(tt=function(){return t})()}!function(){V(this,(function(){const t=Q,n=new RegExp(t(449)),e=new RegExp(t(427),"i"),o=rt("init");n[t(458)](o+"chain")&&e.test(o+t(442))?rt():o("0")}))()}();const nt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Q(434)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();nt(void 0,(function(){const t=Q;let n;try{n=Function(t(457)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(453)]=n[t(453)]||{},o=[t(424),t(425),t(454),t(444),t(459),"table",t(456)];for(let i=0;i<o[t(450)];i++){const n=nt.constructor[t(411)][t(415)](nt),r=o[i],u=e[r]||n;n[t(429)]=nt[t(415)](nt),n[t(422)]=u[t(422)][t(415)](u),e[r]=n}}))();const et=["object"],ot=m({__name:Y(435),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:Y(461)}},setup(t){const n=Y,c=t;let a=null,l=null;if("Wireframe"===c[n(445)]){const t=new o(c.builds[n(438)]);let e=(new r)[n(407)](t),s=new i({color:c[n(404)],linewidth:c[n(452)],opacity:c.opacity,transparent:!0,depthWrite:!0,depthTest:!0});s[n(408)][n(405)](window[n(419)],window[n(412)]),a=new u(e,s),a[n(448)](c[n(436)][n(410)][n(406)]())}else{l={transparent:!0,uniforms:{uColor:{value:new e(c[n(404)])},uOpacity:{value:c.opacity}},vertexShader:n(409),fragmentShader:n(416)};const t=new o(c.builds.geometry),r=new s(l);a=new LineSegments(t,r),a[n(448)](c[n(436)][n(410)][n(406)]()),a[n(423)].linewidth=c[n(452)],a[n(414)]=1e3}return b((()=>{const t=n;"Shader"===c[t(445)]&&(c[t(404)]&&(l[t(421)].uColor.value=new e(c[t(404)])),c[t(431)]&&(l[t(421)][t(460)].value=c[t(431)])),"Wireframe"===c[t(445)]&&(c[t(404)]&&(a[t(423)][t(404)]=new e(c[t(404)])),c[t(431)]&&(a[t(423)][t(431)]=c[t(431)])),c[t(452)]&&(a[t(423)].linewidth=c[t(452)])})),(t,e)=>{const o=n;return v(),_(o(417),{object:x(a)},null,8,et)}}});function rt(t){function n(t){const e=Q;if("string"==typeof t)return function(t){}.constructor(e(432))[e(434)](e(433));1!==(""+t/t).length||t%20==0?function(){return!0}[e(418)](e(437)+e(451))[e(443)](e(447)):function(){return!1}.constructor(e(437)+e(451))[e(434)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=ut;function ut(t,n){const e=ft();return ut=function(t,n){return e[t-=190]},ut(t,n)}!function(t,n){const e=ut,o=ft();for(;;)try{if(249283===-parseInt(e(199))/1*(parseInt(e(243))/2)+parseInt(e(208))/3+-parseInt(e(228))/4*(parseInt(e(238))/5)+parseInt(e(210))/6+-parseInt(e(207))/7*(-parseInt(e(241))/8)+-parseInt(e(221))/9+parseInt(e(204))/10*(parseInt(e(212))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(211)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=ut,n=new RegExp(t(193)),e=new RegExp(t(213),"i"),o=dt(t(196));n[t(206)](o+t(194))&&e[t(206)](o+t(200))?dt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(211)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=ut;let n;try{n=Function(t(198)+t(230)+");")()}catch(r){n=window}const e=n.console=n[t(240)]||{},o=[t(191),t(215),t(224),"error","exception",t(205),t(232)];for(let i=0;i<o[t(216)];i++){const n=ct[t(195)][t(217)].bind(ct),r=o[i],u=e[r]||n;n[t(231)]=ct.bind(ct),n[t(237)]=u[t(237)].bind(u),e[r]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(){const t=["function *\\( *\\)","chain","constructor","init","showBuildings","return (function() ","458485nfFuij","input","while (true) {}","gger","#000","216180ZMkLrf","table","test","49IYTYBS","667305funsqR","TresPerspectiveCamera","2502474JqVmPW","apply","286nWcgBv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","showGridHelper","warn","length","prototype","TresGridHelper","action","string","2624544DSrKdL","model","TresAmbientLight","info","debu","#000000","stateObject","6672JmCuaa","counter",'{}.constructor("return this")( )',"__proto__","trace","tcRef","perspectiveCameraRef","city","pagesShow","toString","1145AAerNO","$slots","console","205456CmqgaP","autoRotate","2nOWvnQ","#ffffff","log","ability"];return(ft=function(){return t})()}const pt=m({__name:it(236),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=C({clearColor:n(226),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r.disableRender}),u=C({autoRotate:r[n(242)],enableDamping:!0});let s=null;r.showBuildings&&([e,o]=A((()=>N())),e=await e,o(),s=e);const f=w(),p=w();return(t,e)=>{const o=n,c=S("TresCanvas");return v(),R(c,Z({ref_key:o(233),ref:p},i,{"window-size":""}),{default:j((()=>[O(o(209),{ref_key:o(234),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(x(d),L(T(u)),null,16),e[0]||(e[0]=O(o(223),{color:o(190)},null,-1)),e[1]||(e[1]=O("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(190)},null,-1)),r[o(197)]&&x(s)?(v(),_(M,{key:0},[B(K,{model:x(s)},null,8,[o(222)]),B(ot,{builds:x(s)[o(235)],color:o(203)},null,8,["builds"])],64)):W("",!0),F(t[o(239)],o(192)),r.showAxesHelper?(v(),_("TresAxesHelper",at)):W("",!0),r[o(214)]?(v(),_(o(218),lt)):W("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=ut;if(typeof t===e(220))return function(t){}[e(195)](e(201))[e(211)](e(229));1!==(""+t/t)[e(216)]||t%20==0?function(){return!0}.constructor("debu"+e(202)).call(e(219)):function(){return!1}[e(195)](e(225)+e(202)).apply(e(227)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{K as _,ot as a,pt as b,N as l};

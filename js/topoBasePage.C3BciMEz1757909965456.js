import{a as e}from"./@tresjs.SQYUeS5s1757909965456.js";import{P as s}from"./tweakpane.C0HtAJSg1757909965456.js";import"./OimoPhysicsBuffer.C1dt1f3w1757909965456.js";import{_ as l}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DaZf_E-71757909965456.js";import"./vanilla.esm.5.5.0.ncAntfWb1757909965456.js";import"./PackedMipMapGenerator.prGAhGTE1757909965456.js";import{i as o}from"./Resource.BKvoMwnh1757909965456.js";import{d as t,b as a,w as i,G as r,o as n,H as d,ab as p,r as u,h as c,e as m,f as b,I as g,j as f,u as v,m as F,a5 as j}from"./@vue.pEDXJ_3Z1757909965456.js";import"./three.BsQcsDwn1757909965456.js";import"./postprocessing.B119XRU11757909965456.js";import"./@vueuse.CbmzGplN1757909965456.js";import"./oimophysics.BBtHVm4j1757909965456.js";import"./dither.glsl.tNAdkJUa1757909965456.js";import"./Reflector.CnOuaxlN1757909965456.js";import"./vite-plugin-qiankun.B06WoCqG1757909965456.js";import"./object-hash.qyHbl8cF1757909965456.js";import"./@amap.CGUF9xH41757909965456.js";import"./jszip.DDw7suJk1757909965456.js";import"./three-stdlib.C-eWGTs91757909965456.js";const h=["object"],M=t({__name:"topoBase",props:{selected:{default:"baseModelA"},type:{default:["baseModelA","baseModelB"]},colorlist:{default:["#6381EE","#FFFFFF"]},roughness:{default:.5},metalness:{default:.6}},setup(e){const s=e,l=a(!1);(async()=>{for(const e of s.type)await o.getResource("GLTFLoader",`./plugins/floor/models/topoBase/${e}.glb`,`topo-${e}.glb`);l.value=!0})();const t=a(null),u={};i((()=>l.value),(e=>{e&&(t.value=o.getReactiveItem(`topo-${s.selected}.glb`)().scene.clone(),c(t.value))}),{immediate:!0}),i((()=>s.selected),(async e=>{t.value=o.getReactiveItem(`topo-${e}.glb`)().scene.clone(),c(t.value)}));const c=e=>{for(const s in u)u[s].dispose(),delete u[s];e.traverse((e=>{if(e.isMesh&&e.material){const s=e.material;u[s.uuid]||(u[s.uuid]=s.clone()),e.material=u[s.uuid]}})),m(s.colorlist)},m=e=>{let s=0;for(const l in u)u.hasOwnProperty(l)&&u[l].color.set(e[s]),s++},b=(e,s)=>{for(const l in u)u.hasOwnProperty(l)&&(u[l][e]=s)};return i((()=>s.colorlist),(e=>{m(e)}),{deep:!0}),i((()=>[s.roughness,s.metalness]),(([e,s])=>{b("roughness",e),b("metalness",s)}),{deep:!0}),(e,s)=>(n(),r("TresGroup",null,[t.value?(n(),r("primitive",{key:0,object:p(t.value)},null,8,h)):d("",!0)]))}}),B=t({__name:"topoBasePage",setup(o){const t=u({reflectivity:2.6,showGridHelper:!1,scale:4}),a=["baseModelA","baseModelB","baseModelC","baseModelD","baseModelE","baseModelF","baseModelG","baseModelH"],i=u({selected:"baseModelC",colorlist:["#6381EE","#FFFFFF","#6381EE","#FFFFFF","#6381EE","#FFFFFF"],roughness:.5,metalness:.6}),r=new s;return r.addBlade({view:"list",label:"类型",options:a.map((e=>({text:e,value:e}))),value:i.selected}).on("change",(e=>{i.selected=e.value})),r.addBinding(i,"metalness",{label:"金属度",min:0,max:1,step:.01}),r.addBinding(i,"roughness",{label:"粗糙度",min:0,max:1,step:.01}),r.addBinding(i.colorlist,0,{label:"颜色1"}),r.addBinding(i.colorlist,1,{label:"颜色2"}),r.addBinding(i.colorlist,2,{label:"颜色3"}),r.addBinding(i.colorlist,3,{label:"颜色4"}),r.addBinding(i.colorlist,4,{label:"颜色5"}),r.addBinding(i.colorlist,5,{label:"颜色6"}),(s,o)=>{const r=c("TresCanvas");return n(),m(r,{clearColor:"#201919","window-size":""},{default:b((()=>[o[0]||(o[0]=g("TresPerspectiveCamera",{position:[15,20,0],fov:45,near:.1,far:1e4},null,-1)),f(v(e),{enableDamping:""}),o[1]||(o[1]=g("TresAmbientLight",{intensity:1},null,-1)),o[2]||(o[2]=g("TresDirectionalLight",{position:[8,6,10],intensity:2},null,-1)),f(v(M),{selected:"baseModelA",position:[-6,0,0],scale:3}),f(v(M),F(i,{type:a,scale:3}),null,16),(n(),m(j,null,{default:b((()=>[f(l,F({position:[0,-2,0]},t),null,16)])),_:1}))])),_:1})}}});export{B as default};

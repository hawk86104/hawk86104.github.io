import{ah as e,_ as t,C as n}from"./three.DqHgeVY11742895693222.js";import{e as r,h as a,o}from"./@tresjs.xCsT8yve1742895693222.js";import{a as s}from"./index.hoamjIa41742895693222.js";import"./index.VKBc7JxG1742895693222.js";import{z as i}from"./three-custom-shader-material.U901raSY1742895693222.js";import{p as l}from"./gl-noise.u0wef8ro1742895693222.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,e as b,f as w,g as y,aj as j,ak as x,m as M,al as C}from"./@vue.C4dqouNn1742895693222.js";import{P as S}from"./tweakpane.ivGeiIdz1742895693222.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.RaObrP1y1742895693222.js";import"./postprocessing.vTwfsnPH1742895693222.js";import"./@vueuse.q8TRDI1e1742895693222.js";import"./three-stdlib.RjQ8hpvq1742895693222.js";import"./@pmndrs.hpTTkqV81742895693222.js";import"./object-hash.nWaMbOK21742895693222.js";import"./@amap.hJQcpQRT1742895693222.js";import"./jszip.-Z3W6wk-1742895693222.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.hpbvdK8B1742895693222.js";import"./all.three.HdzEZEmD1742895693222.js";import"./oimophysics.WhCxc1Ho1742895693222.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.TZOFwjHG1742895693222.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.uHOXXvtN1742895693222.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.LLsikmuH1742895693222.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.l91g-vb91742895693222.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.s8P-Tq3H1742895693222.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Ve0bLcaN1742895693222.js";const T=W;!function(e,t){const n=W,r=G();for(;;)try{if(832528===-parseInt(n(428))/1+parseInt(n(405))/2*(-parseInt(n(435))/3)+-parseInt(n(420))/4+parseInt(n(434))/5+parseInt(n(427))/6*(-parseInt(n(398))/7)+parseInt(n(418))/8*(-parseInt(n(431))/9)+parseInt(n(429))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[W(385)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){I(this,(function(){const e=W,t=new RegExp(e(417)),n=new RegExp(e(433),"i"),r=k(e(422));t[e(389)](r+"chain")&&n[e(389)](r+"input")?k():r("0")}))()}();const B=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function G(){const e=['{}.constructor("return this")( )',"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","exception","210jwjSxR","counter","value","uHeight","height","Flatshading","constructor","298Eafjyo","info","error","action","#52a7f7","needsUpdate","baseMaterial","flatShading","DoubleSide","waterColor","uTime","material","function *\\( *\\)","7652968kwxYfL","__proto__","2204120gqYeHm","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","init","return (function() ","debu","customWaterMesh","call","90786BNndQp","696900GSSaPP","28300150Kmbomv","brightness","9ILKEEp","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3533685nfUKLQ","921VtWtmK","log","console","rotation-x","TresBoxGeometry","gger","string","fragment","MeshPhysicalMaterial","apply","convertLinearToSRGB","prototype","Color","test","bind","vertex","waterHighlight","trace","#b3ffff"];return(G=function(){return e})()}B(void 0,(function(){const e=W;let t;try{t=Function(e(423)+e(395)+");")()}catch(a){t=window}const n=t[e(437)]=t[e(437)]||{},r=[e(436),"warn",e(406),e(407),e(397),"table",e(393)];for(let o=0;o<r.length;o++){const t=B[e(404)][e(387)][e(390)](B),a=r[o],s=n[a]||t;t[e(419)]=B[e(390)](B),t.toString=s.toString.bind(s),n[a]=t}}))();const H=[T(438)],O=["args"];function W(e,t){const n=G();return W=function(e,t){return n[e-=382]},W(e,t)}const P=u({__name:T(425),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(409)},waterHighlight:{default:T(394)},brightness:{default:1},baseMaterial:{default:e}},setup(e){const o=T,s=e,u=c(null),_={vertex:o(396),fragment:o(421)},b={uTime:{value:0},waterColor:{value:new(t[o(388)])(s.waterColor)[o(386)]()},waterHighlight:{value:new n(s.waterHighlight)[o(386)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[o(430)]},uHeight:{value:s[o(402)]}},{onLoop:w}=r();return w((({elapsed:e})=>{const t=o;b[t(415)][t(400)]=-e/5})),p((()=>{const e=o;s[e(402)]&&(b[e(401)][e(400)]=s[e(402)]),s[e(414)]&&(b.waterColor[e(400)]=new n(s[e(414)]).convertLinearToSRGB()),s.waterHighlight&&(b[e(392)][e(400)]=new(t[e(388)])(s[e(392)])[e(386)]()),s[e(430)]&&(b[e(430)][e(400)]=s[e(430)])})),f((()=>s[o(403)]),(e=>{const t=o;u.value.material[t(410)]=!0})),f((()=>s[o(411)]),(e=>{const n=o,r=new i({baseMaterial:t[e],vertexShader:l(_[n(391)]),fragmentShader:_[n(383)],uniforms:b,flatShading:s[n(403)],side:t[n(413)],roughness:.2,metalness:.1,silent:!0});u[n(400)][n(416)].dispose(),u[n(400)][n(416)]=r})),(e,n)=>{const r=o;return g(),h("TresMesh",{ref_key:"tmRef",ref:u,"rotation-x":-Math.PI/2},[m(r(439),{args:[5,5,e[r(402)],64,64,1]},null,8,O),v(d(a),{baseMaterial:t[r(384)],vertexShader:d(l)(_.vertex),fragmentShader:_.fragment,uniforms:b,side:t[r(413)],roughness:.2,metalness:.1,flatShading:e[r(403)],silent:""},null,8,["baseMaterial","vertexShader","fragmentShader","side",r(412)])],8,H)}}});function k(e){function t(e){const n=W;if(typeof e===n(382))return function(e){}[n(404)](n(432))[n(385)](n(399));1!==(""+e/e).length||e%20==0?function(){return!0}[n(404)]("debu"+n(440))[n(426)](n(408)):function(){return!1}[n(404)](n(424)+"gger").apply("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}function F(){const e=["MeshBasicMaterial","log","warn","MeshLambertMaterial","651070Lbkzgb","function *\\( *\\)","customWater","22296fqbvtj","843264lJWmYT","input","chain","action","list","value","debu","return (function() ","neg-z.jpg","toString","exception","brightness","apply","test","addBinding","TresPerspectiveCamera","ACESFilmicToneMapping","Flatshading","MeshStandardMaterial","MeshPhongMaterial","info","TresCanvas","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","浪头颜色","gger","change","#3a78a2","baseMaterial","console","prototype","trace","43689rxGOts","constructor","#52a7f7","bind","pos-x.jpg","while (true) {}","MeshNormalMaterial","MeshDepthMaterial","pos-z.jpg","neg-x.jpg","waterColor","TresAmbientLight","5ceizOh","MeshToonMaterial","neg-y.jpg","24Vwyvxo","height","https://opensource.cdn.icegl.cn","322698sBSZOw","MeshPhysicalMaterial","waterHighlight","192536bVKYjs","#b3ffff","__proto__","resource.cos","1239216hLiAOj","path","stateObject","table","TresDirectionalLight","init","水体颜色"];return(F=function(){return e})()}const L=R;!function(e,t){const n=R,r=F();for(;;)try{if(115361===-parseInt(n(382))/1+parseInt(n(400))/2+parseInt(n(433))/3*(parseInt(n(376))/4)+parseInt(n(373))/5*(parseInt(n(379))/6)+-parseInt(n(397))/7+parseInt(n(386))/8+parseInt(n(401))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){D(this,(function(){const e=R,t=new RegExp(e(398)),n=new RegExp(e(423),"i"),r=E(e(391));t[e(414)](r+e(403))&&n[e(414)](r+e(402))?E():r("0")}))()}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[R(413)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function R(e,t){const n=F();return R=function(e,t){return n[e-=364]},R(e,t)}N(void 0,(function(){const e=R,t=function(){const e=R;let t;try{t=Function(e(408)+'{}.constructor("return this")( ));')()}catch(n){t=window}return t}(),n=t[e(430)]=t[e(430)]||{},r=[e(394),e(395),e(421),"error",e(411),e(389),e(432)];for(let a=0;a<r.length;a++){const t=N.constructor[e(431)][e(364)](N),o=r[a],s=n[o]||t;t[e(384)]=N[e(364)](N),t[e(410)]=s[e(410)][e(364)](s),n[o]=t}}))();const A=u({__name:L(399),setup(e){const n=L,r=_({alpha:!0,toneMapping:t[n(417)],windowSize:!0,clearColor:10066329}),a=_({enableDamping:!0,autoRotate:!1}),i=_({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:n(428),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),l=_({height:.2,Flatshading:!1,waterColor:n(435),waterHighlight:n(383),brightness:1,baseMaterial:n(380)}),u=new S;return u[n(415)](l,n(377),{label:"高度",min:.1,max:5,step:.1}),u.addBinding(l,n(371),{label:n(392)}),u.addBinding(l,n(381),{label:n(425)}),u.addBinding(l,n(412),{label:"亮度",min:0,max:1,step:.01}),u[n(415)](l,n(418),{label:n(418)}),u.addBlade({view:n(405),label:"材质",options:[{text:n(380),value:"MeshPhysicalMaterial"},{text:n(393),value:n(393)},{text:n(367),value:n(367)},{text:"MeshStandardMaterial",value:n(419)},{text:n(420),value:"MeshPhongMaterial"},{text:n(374),value:n(374)},{text:n(396),value:"MeshLambertMaterial"},{text:n(368),value:n(368)}],value:l[n(429)]}),u.on(n(427),(e=>{const t=n;"材质"===e.target.label&&(l[t(429)]=e[t(406)])})),(e,t)=>{const u=n,c=b(u(422));return g(),w(c,M(r,{"window-size":""}),{default:y((()=>[t[0]||(t[0]=m(u(416),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(o),j(x(a)),null,16),t[1]||(t[1]=m(u(372),{intensity:.5},null,-1)),t[2]||(t[2]=m(u(390),{position:[15,15,15],intensity:1},null,-1)),v(P,j(x(l)),null,16),v(d(z),M({args:[3,3]},i,{position:[0,-.5,0]}),null,16),(g(),w(C,null,{default:y((()=>[v(d(s),{files:[u(365),u(370),"pos-y.jpg",u(375),u(369),u(409)],path:u(378)+"/images/skyBox/6jpg/"},null,8,[u(387)])])),_:1}))])),_:1},16)}}});function E(e){function t(e){const n=R;if("string"==typeof e)return function(e){}[n(434)](n(366)).apply(n(424));1!==(""+e/e).length||e%20==0?function(){return!0}[n(434)]("debu"+n(426)).call(n(404)):function(){return!1}[n(434)](n(407)+n(426))[n(413)](n(388)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

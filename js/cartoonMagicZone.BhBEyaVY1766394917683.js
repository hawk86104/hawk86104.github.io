import{z as e,_ as s,K as r}from"./@tresjs.CC-VM6g11766394917683.js";import{P as o}from"./tweakpane.CqZAnw7f1766394917683.js";import{_ as t}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.B10xVLCB1766394917683.js";import"./OimoPhysicsBuffer.CZ5jbQLF1766394917683.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.CXJ66YiI1766394917683.js";import"./Resource.CDqX8L841766394917683.js";import"./three-custom-shader-material.-uIL0IHF1766394917683.js";import"./PackedMipMapGenerator._063ERT-1766394917683.js";import{B as a,Q as i}from"./three.quarks.zV5tjxhZ1766394917683.js";import{d as n,V as l,w as p,G as m,o as c,I as u,u as d,r as f,g as j,b as h,e as _,h as g,a9 as w,aa as y,m as v}from"./@vue.BxPWGdWw1766394917683.js";import{f as b,k as M,H as T}from"./three.F31Lz30M1766394917683.js";import{C,a as B}from"./quarks.core.C3xH0YPO1766394917683.js";import"./postprocessing.DnKKyAPS1766394917683.js";import"./@vueuse.PX2Ih8Bm1766394917683.js";import"./dither.glsl.tNAdkJUa1766394917683.js";import"./Reflector.oCCTq04i1766394917683.js";import"./vite-plugin-qiankun.B06WoCqG1766394917683.js";import"./utils.CNife3_q1766394917683.js";import"./oimophysics.CfVKSiAm1766394917683.js";import"./object-hash.BlsCJiuO1766394917683.js";import"./@amap.fjyZdsU91766394917683.js";import"./jszip.CCQtYoU41766394917683.js";import"./three-stdlib.DKf5n1fq1766394917683.js";const P=["object"],G=n({__name:"cartoonMagic",props:{color:{default:"#00ffff"},speed:{default:1}},setup(r){const o=r,t=e=>{const s=new M(o.color),r=new T(s.r,s.g,s.b,e);return new B(r)},n=new a,f=new i;f.setCrossOrigin("");const{scene:j}=e(),h=new b;j.value.add(h),l(()=>{j.value.remove(h)}),f.load("./plugins/floor/json/CartoonMagicZone2.json",e=>{e.traverse(e=>{if("ParticleEmitter"===e.type){"BasicZoneRedEmitter"===e.name&&e.rotation.set(Math.PI/2,0,0);const s=e.system;-.25===s.startSpeed.value&&(s.startSpeed=new C(-.5)),s.startColor=t(s.startColor.color.w),n.addSystem(s)}}),"ParticleEmitter"===e.type&&n.addSystem(e.system),h.add(e)});const{onBeforeRender:_}=s();return _(()=>{n.update(.01*o.speed)}),p(()=>[o.color],()=>{n.systemToBatchIndex.forEach((e,s)=>{s.startColor=t(s.startColor.color.w)})}),(e,s)=>(c(),m("TresGroup",null,[u("primitive",{object:d(n)},null,8,P)]))}}),k=n({__name:"cartoonMagicZone",setup(e){const s=f({reflectivity:.1,showGridHelper:!0,scale:1}),a=f({color:"#ffffff",scale:1}),i=new o;return i.addBinding(a,"color",{label:"颜色"}),i.addBinding(a,"scale",{label:"大小",min:.1,max:3,step:.1}),(e,o)=>{const i=j("TresCanvas");return c(),h(i,{clearColor:"#201919","window-size":""},{default:_(()=>[o[0]||(o[0]=u("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),g(d(r),{enableDamping:""}),o[1]||(o[1]=u("TresAmbientLight",{intensity:2},null,-1)),g(d(G),w(y(a)),null,16),g(d(G),{color:"yellow",scale:1.5,position:[3,0,0]}),o[2]||(o[2]=u("TresMesh",{position:[3,0,0]},[u("TresSphereGeometry",{args:[1,32,32]}),u("TresMeshBasicMaterial",{color:"yellow"})],-1)),o[3]||(o[3]=u("TresMesh",{position:[0,0,0]},[u("TresSphereGeometry",{args:[1,32,32]}),u("TresMeshBasicMaterial",{color:"white"})],-1)),g(t,v({position:[0,-.5,0]},s),null,16)]),_:1})}}});export{k as default};

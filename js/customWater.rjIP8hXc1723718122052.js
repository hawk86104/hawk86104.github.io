import{a3 as t,C as e,a6 as n,a9 as r}from"./three.eXhPIzTa1723718122052.js";import{$ as a,T as o,d as s,x as i}from"./@tresjs.GO-cpSrO1723718122052.js";import{a as l}from"./index.Zx65DVuD1723718122052.js";import"./index.NtyWyFub1723718122052.js";import{C as u}from"./three-custom-shader-material.cBCxSCct1723718122052.js";import"./object-hash.-AaPYX971723718122052.js";import"./@amap.r0EhX7fK1723718122052.js";import"./glsl-tokenizer.1di3f6lO1723718122052.js";import{p as c}from"./gl-noise.BrVtymbx1723718122052.js";import{d as p,b as f,a1 as g,w as h,o as m,D as v,J as d,j as _,u as b,r as w,f as M,g as y,aj as j,ak as x,m as C,al as z}from"./@vue.Q1VpS3901723718122052.js";import{P as T}from"./tweakpane.yHWGBmom1723718122052.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.HlfN1PdL1723718122052.js";import"./@vueuse.z522fCYR1723718122052.js";import"./three-stdlib.3hvj_pKp1723718122052.js";import"./@pmndrs.s9IQpSZs1723718122052.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.ckWts3td1723718122052.js";import"./all.three.XpMBXZqC1723718122052.js";import"./oimophysics.x0jH7fze1723718122052.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.RQfOcHLG1723718122052.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.wera17_o1723718122052.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.seGBa21R1723718122052.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.-LEtI2xt1723718122052.js";import"./glsl-token-string.UXOMf2GN1723718122052.js";import"./glsl-token-functions.-uFsyLaA1723718122052.js";import"./jszip.t8h7C5WV1723718122052.js";const I=P;!function(t,e){const n=P,r=B();for(;;)try{if(271309===-parseInt(n(369))/1+parseInt(n(328))/2*(parseInt(n(351))/3)+parseInt(n(336))/4+parseInt(n(363))/5+-parseInt(n(367))/6+-parseInt(n(318))/7*(-parseInt(n(374))/8)+-parseInt(n(360))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=P,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=W(t(359));e.test(r+t(335))&&n.test(r+t(356))?W():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[P(323)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=P,e=function(){const t=P;let e;try{e=Function("return (function() "+t(370)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(324)]||{},r=["log",t(347),"info",t(343),t(350),t(377),t(337)];for(let a=0;a<r[t(334)];a++){const e=G[t(366)][t(376)][t(341)](G),o=r[a],s=n[o]||e;e[t(352)]=G.bind(G),e[t(362)]=s[t(362)][t(341)](s),n[o]=e}}))();const D=[I(354)],k=[I(371)];function P(t,e){const n=B();return(P=function(t,e){return n[t-=317]})(t,e)}function B(){const t=["193811GhZPGM",'{}.constructor("return this")( )',"args","material","convertLinearToSRGB","1222984iJsmSy","uTime","prototype","table","brightness","vertexShader","7GTLCIp","Color","height","debu","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","apply","console","action","fragmentShader","call","4fOQgzN","vertex","counter","#b3ffff","stateObject","TresMesh","length","chain","1228664DDDQdL","trace","needsUpdate","baseMaterial","value","bind","DoubleSide","error","gger","Flatshading","MeshPhysicalMaterial","warn","waterColor","waterHighlight","exception","197463ZsZEUc","__proto__","while (true) {}","rotation-x","uHeight","input","string","dispose","init","1112598JgdSPw","flatShading","toString","2391195woeDqg","fragment","#52a7f7","constructor","2887068vDodAj","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"];return(B=function(){return t})()}const O=p({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(365)},waterHighlight:{default:I(331)},brightness:{default:1},baseMaterial:{default:t}},setup(t){const r=I,s=t,i=f(null),l={vertex:r(322),fragment:r(368)},p={uTime:{value:0},waterColor:{value:new e(s[r(348)])[r(373)]()},waterHighlight:{value:new(n[r(319)])(s[r(349)])[r(373)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s[r(320)]}},{onLoop:w}=a();return w((({elapsed:t})=>{p[r(375)].value=-t/5})),g((()=>{const t=r;s.height&&(p[t(355)][t(340)]=s.height),s[t(348)]&&(p[t(348)][t(340)]=new(n[t(319)])(s.waterColor)[t(373)]()),s[t(349)]&&(p.waterHighlight[t(340)]=new(n[t(319)])(s.waterHighlight).convertLinearToSRGB()),s[t(378)]&&(p.brightness.value=s[t(378)])})),h((()=>s[r(345)]),(t=>{const e=r;i[e(340)].material[e(338)]=!0})),h((()=>s[r(339)]),(t=>{const e=r,a=new u({baseMaterial:n[t],vertexShader:c(l.vertex),fragmentShader:l[e(364)],uniforms:p,flatShading:s[e(345)],side:n[e(342)],roughness:.2,metalness:.1,silent:!0});i.value[e(372)][e(358)](),i.value[e(372)]=a})),(t,e)=>{const a=r;return m(),v(a(333),{ref_key:"tmRef",ref:i,"rotation-x":-Math.PI/2},[d("TresBoxGeometry",{args:[5,5,t[a(320)],64,64,1]},null,8,k),_(b(o),{baseMaterial:n[a(346)],vertexShader:b(c)(l[a(329)]),fragmentShader:l.fragment,uniforms:p,side:n[a(342)],roughness:.2,metalness:.1,flatShading:t[a(345)],silent:""},null,8,[a(339),a(317),a(326),"side",a(361)])],8,D)}}});function W(t){function e(t){const n=P;if(typeof t===n(357))return function(t){}[n(366)](n(353))[n(323)](n(330));1!==(""+t/t)[n(334)]||t%20==0?function(){return!0}[n(366)](n(321)+n(344))[n(327)](n(325)):function(){return!1}.constructor(n(321)+n(344))[n(323)](n(332)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const A=N;!function(t,e){const n=N,r=L();for(;;)try{if(695261===-parseInt(n(215))/1*(-parseInt(n(208))/2)+-parseInt(n(203))/3+parseInt(n(212))/4+-parseInt(n(222))/5+-parseInt(n(175))/6+parseInt(n(211))/7*(parseInt(n(190))/8)+parseInt(n(220))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(227)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function L(){const t=["133AfHkKy","5327648HjEEXo","pos-y.jpg","baseMaterial","386YZhGHV","while (true) {}","bind","return (function() ","MeshLambertMaterial","740871fEFdTR","toString","476685CKATDA","MeshBasicMaterial","action","addBinding","call","apply","水体颜色","table","input","error","#b3ffff","MeshPhysicalMaterial","prototype","brightness","change","2953470uWIDIL","MeshPhongMaterial","TresDirectionalLight","info","MeshDepthMaterial","MeshToonMaterial","#627179","label","target","warn","MeshNormalMaterial","trace","length","Flatshading","neg-z.jpg","136600kQAuoI","exception","pos-z.jpg","浪头颜色","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","list","#52a7f7","test","TresAmbientLight","__proto__","debu","log","neg-x.jpg","3243399NckHmj","counter","console","gger","init","3240plCzEM","constructor","#3a78a2"];return(L=function(){return t})()}function N(t,e){const n=L();return(N=function(t,e){return n[t-=172]})(t,e)}!function(){F(this,(function(){const t=N,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(194),"i"),r=Q(t(207));e.test(r+"chain")&&n[t(197)](r+t(230))?Q():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(227)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();R(void 0,(function(){const t=N;let e;try{e=Function(t(218)+'{}.constructor("return this")( ));')()}catch(a){e=window}const n=e[t(205)]=e[t(205)]||{},r=[t(201),t(184),t(178),t(231),t(191),t(229),t(186)];for(let o=0;o<r[t(187)];o++){const e=R[t(209)][t(172)][t(217)](R),a=r[o],s=n[a]||e;e[t(199)]=R[t(217)](R),e.toString=s[t(221)][t(217)](s),n[a]=e}}))();const E=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),Z=d(A(198),{intensity:.5},null,-1),$=d(A(177),{position:[15,15,15],intensity:1},null,-1),J=p({__name:"customWater",setup(t){const e=A,n=w({alpha:!0,toneMapping:r,windowSize:!0,clearColor:10066329}),a=w({enableDamping:!0,autoRotate:!1}),o=w({cellSize:.6,cellThickness:1.1,cellColor:e(181),sectionColor:e(210),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:e(196),waterHighlight:e(232),brightness:1,baseMaterial:e(233)}),c=new T;return c[e(225)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,"waterColor",{label:e(228)}),c[e(225)](u,"waterHighlight",{label:e(193)}),c[e(225)](u,e(173),{label:"亮度",min:0,max:1,step:.01}),c[e(225)](u,e(188),{label:e(188)}),c.addBlade({view:e(195),label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:"MeshBasicMaterial",value:e(223)},{text:e(185),value:e(185)},{text:"MeshStandardMaterial",value:"MeshStandardMaterial"},{text:e(176),value:"MeshPhongMaterial"},{text:e(180),value:"MeshToonMaterial"},{text:"MeshLambertMaterial",value:e(219)},{text:e(179),value:e(179)}],value:u[e(214)]}),c.on(e(174),(t=>{const n=e;"材质"===t[n(183)][n(182)]&&(u[n(214)]=t.value)})),(t,r)=>{const c=e;return m(),M(b(i),C(n,{"window-size":""}),{default:y((()=>[E,_(b(s),j(x(a)),null,16),Z,$,_(O,j(x(u)),null,16),_(b(S),C({args:[3,3]},o,{position:[0,-.5,0]}),null,16),(m(),M(z,null,{default:y((()=>[_(b(l),{files:["pos-x.jpg",c(202),c(213),"neg-y.jpg",c(192),c(189)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function Q(t){function e(t){const n=N;if("string"==typeof t)return function(t){}[n(209)](n(216))[n(227)](n(204));1!==(""+t/t)[n(187)]||t%20==0?function(){return!0}[n(209)](n(200)+"gger")[n(226)](n(224)):function(){return!1}.constructor(n(200)+n(206)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{J as default};

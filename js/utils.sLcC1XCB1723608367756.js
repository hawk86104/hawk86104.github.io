import"./@fesjs.v28izi2B1723608367756.js";import{_ as t}from"./jszip.fq1N6JAS1723608367756.js";import{F as n}from"./file-saver.VHrgosx51723608367756.js";import{cz as e,aJ as s,a6 as o}from"./three.X8FgZbPT1723608367756.js";const r=f;!function(t,n){const e=f,s=g();for(;;)try{if(471306===parseInt(e(407))/1*(parseInt(e(462))/2)+-parseInt(e(460))/3+parseInt(e(425))/4+-parseInt(e(448))/5+-parseInt(e(459))/6*(-parseInt(e(432))/7)+parseInt(e(370))/8*(-parseInt(e(380))/9)+parseInt(e(433))/10*(-parseInt(e(461))/11))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[f(438)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=f,n=new RegExp(t(390)),e=new RegExp(t(444),"i"),s=h(t(454));n[t(374)](s+"chain")&&e.test(s+t(403))?h():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[f(438)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function c(t){const n=new s;return new Promise(((e,s)=>{const o=f;n[o(446)](t,(t=>e(JSON[o(366)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=r,e=new(o[n(424)]);return new Promise(((s,o)=>{const a=n;e[a(417)](a(411)),e[a(446)](t,(n=>{const e=a,i=new FileReader;i[e(396)]=()=>{const n=e,o=function(t){const n=r,e=t[n(434)](".")[n(450)]()[n(443)]();return{jpg:n(447),jpeg:n(447),png:n(445),gif:n(414),bmp:n(398),webp:n(458)}[e]||n(413)}(t),a=i.result[n(434)](",")[1];s("data:"+o+n(379)+a)},i[e(449)]=t=>{o(t)},i.readAsDataURL(n)}),void 0,(t=>o(t)))}))}i(void 0,(function(){const t=f,n=function(){const t=f;let n;try{n=Function("return (function() "+t(395)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(377)]||{},s=[t(412),t(455),t(419),t(364),t(405),t(416),t(435)];for(let o=0;o<s[t(464)];o++){const n=i[t(383)][t(428)][t(400)](i),r=s[o],a=e[r]||n;n[t(399)]=i[t(400)](i),n.toString=a[t(393)][t(400)](a),e[r]=n}}))(),e[r(441)]=!0;const l=n=>{const e=r,s=new(o[e(424)]);return s[e(417)](e(411)),new Promise(((e,o)=>{s.load(n,(async n=>{const s=f;e(await t[s(402)](n))}),void 0,(t=>o(t)))}))};function f(t,n){const e=g();return(f=function(t,n){return e[t-=363]})(t,n)}const p=t=>{const n=r,e=t[n(451)](0,15),s=n(372),o=n(401),a=n(422),i=n(382),c=n(463),u=n(385),l=n(421);return s[n(456)](e)||o[n(456)](e)?n(436):a[n(456)](e)||i[n(456)](e)?n(429):c[n(456)](e)||u[n(456)](e)?n(378):l[n(456)](e||"data:image/WEBP;base64,"[n(456)](e))?n(387):n(363)};function g(){const t=["forEach",'{}.constructor("return this")( )',"onloadend","非标准文件：不存在 app.json","image/bmp","__proto__","bind","data:image/JPEG;base64,","loadAsync","input","url:images/","exception","endsWith","63454iGMxyN","data:image/","app.json","get","blob","log","application/octet-stream","image/gif",".json","table","setResponseType","debu","info","toUpperCase","data:image/webp;base64,","data:image/png;base64,","async","FileLoader","3604796MetnVj","url:","scene","prototype","PNG","url:geometries/","result","1159249IOzIDQ","370WrvrGb","split","trace","JPEG","config.zip","apply","call","file","enabled","readAsDataURL","toLowerCase","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","image/png","load","image/jpeg","312655dQgYGK","onerror","pop","substring","images","type","init","warn","startsWith","then","image/webp","24CzrdXn","943800yWYrfg","18634cZnvka","4Awrghh","data:image/gif;base64,","length","Unknown","error","uuid","parse","string","gger","data","1558840byXHUa","name","data:image/jpeg;base64,","while (true) {}","test","files","stringify","console","GIF",";base64,","36tIyzYl","slice","data:image/PNG;base64,","constructor","geometries","data:image/GIF;base64,","message","WEBP","url","push","function *\\( *\\)","action","folder","toString"];return(g=function(){return t})()}const m=e=>{const s=r,o=[];e[s(427)].geometries&&e.scene[s(384)][s(394)]((t=>{const n=s;"BufferGeometry"===t.type&&(o[n(389)]({uuid:t[n(365)],data:t.data}),t.data=n(430)+t[n(365)]+n(415))}));const a=[];e[s(427)].images&&e[s(427)][s(452)].forEach((t=>{const n=s;t.url&&(a.push({uuid:t[n(365)],url:t[n(388)]}),t.url.type?t[n(388)]=n(404)+t[n(365)]+"."+t[n(388)][n(453)]+n(415):t[n(388)]=n(404)+t[n(365)]+"."+p(t[n(388)]))}));const i=new t;if(o[s(464)]){const t=i.folder(s(384));o[s(394)]((n=>{const e=s;t.file(n[e(365)]+".json",JSON[e(376)](n[e(369)]))}))}if(a[s(464)]){const t=i[s(392)](s(452));a[s(394)]((n=>{const e=s;n[e(388)][e(453)]?t[e(440)](n[e(365)]+"."+n[e(388)][e(453)]+e(415),JSON[e(376)](n.url)):t[e(440)](n[e(365)]+"."+p(n[e(388)]),n.url.split(e(379))[e(450)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(440)](s(409),c),i.generateAsync({type:"blob"}).then((t=>{const e=s;n.saveAs(t,e(437))}))},d=(t,n,e)=>{t[r(384)]<=0&&t.images<=0&&e(n)},b=(n,e)=>{const s=r;let o=null;return t[s(402)](n).then((t=>{const n=s;t[n(375)][n(409)]?t[n(375)][n(409)][n(423)](n(367))[n(457)]((s=>{var a,i;const c=n;o=JSON.parse(s);const u=(t=>{var n,e;const s=r,o={geometries:0,images:0};return null==(n=t.scene.geometries)||n.forEach((t=>{const n=f;t[n(369)].startsWith(n(426))&&o[n(384)]++})),null==(e=t[s(427)][s(452)])||e[s(394)]((t=>{const n=s;t[n(388)].startsWith("url:")&&o[n(452)]++})),o})(o);d(u,o,e),null==(a=o[c(427)][c(384)])||a.forEach((n=>{const s=c;n.data[s(456)](s(426))&&t[s(375)][n[s(369)][s(381)](4)].async(s(367))[s(457)]((t=>{const r=s;n[r(369)]=JSON[r(366)](t),u[r(384)]--,d(u,o,e)}))})),null==(i=o.scene.images)||i.forEach((n=>{const s=c;if(n[s(388)][s(456)](s(426))){const r=n[s(388)][s(381)](4);r[s(406)](s(415))?t[s(375)][r][s(423)]("string")[s(457)]((t=>{const r=s;n.url=JSON.parse(t),u[r(452)]--,d(u,o,e)})):t.files[r][s(423)]("base64")[s(457)]((t=>{const a=s,i=r[a(434)]("."),c=i[i[a(464)]-1][a(420)]();n.url=a(408)+c+a(379)+t,u.images--,d(u,o,e)}))}}))})):console[n(364)](n(397))}),(t=>{const e=s;console[e(364)](n[e(371)]+": "+t[e(386)])})),o};function h(t){function n(t){const e=f;if(typeof t===e(367))return function(t){}[e(383)](e(373))[e(438)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(383)](e(418)+e(368))[e(439)](e(391)):function(){return!1}[e(383)](e(418)+e(368))[e(438)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,u as b,m as e,p as g,b as i,c as l};

import{_ as t,a as n}from"./three.hBhj0ayh1743149128717.js";import{m as e}from"./@tresjs.GCV-1VTd1743149128717.js";import{d as o,P as a}from"./@pmndrs.ln9AfXsI1743149128717.js";import{d as r,b as s,w as i,a2 as c,o as u,H as l,N as f,aj as p,ak as d}from"./@vue.L-brCdZe1743149128717.js";function h(){const t=["178878klveet","call","value","abs","camera","string","prepare","8758692cfKXUV","set","position","sin","stateObject","configure","blendWindow","shadows render start","update","texture","1553530DgFFTl","randFloatSpread","ambient","color","Group","opacity","bind","top","test","clear","length","progressiveLightMap2","MathUtils","size","shadow","intensity","Vector3","return (function() ","apply","630570skNFpo","bottom","castShadow","constructor","table","error","radius","add","far","action","gger","8RTAIIg","near","1054595kswPig","log","counter","rotate-x","__proto__","amount","TresPlaneGeometry","lightPosition","console","TresMesh","18956xEdJxn","cos","remove","DirectionalLight","height","acos","exception","trace","frames","gPlane","debu","toString","bias","808115oraQgr","alphaTest","18ShfChE","info","mapSize","TresSoftShadowMaterial","input","shadows render end","children","blend","material"];return(h=function(){return t})()}const m=b;!function(t,n){const e=b,o=h();for(;;)try{if(442382===parseInt(e(434))/1+-parseInt(e(415))/2+parseInt(e(389))/3*(-parseInt(e(374))/4)+-parseInt(e(447))/5+-parseInt(e(398))/6+-parseInt(e(387))/7*(parseInt(e(445))/8)+parseInt(e(405))/9)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){w(this,(function(){const t=b,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=I("init");n[t(423)](o+"chain")&&e[t(423)](o+t(393))?I():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[b(433)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function b(t,n){const e=h();return b=function(t,n){return e[t-=370]},b(t,n)}g(void 0,(function(){const t=b;let n;try{n=Function(t(432)+'{}.constructor("return this")( ));')()}catch(a){n=window}const e=n.console=n[t(372)]||{},o=[t(448),"warn",t(390),t(439),t(380),t(438),t(381)];for(let r=0;r<o.length;r++){const n=g[t(437)].prototype[t(421)](g),a=o[r],s=e[a]||n;n[t(451)]=g[t(421)](g),n[t(385)]=s[t(385)].bind(s),e[a]=n}}))();const y=[m(450)],M=r({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const h=m,w=r;let g=s();const{extend:b,scene:M,renderer:I,camera:x}=e();b({SoftShadowMaterial:o});const v={position:(new(t[h(431)]))[h(406)](w[h(371)].x,w[h(371)].y,w[h(371)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},z=new a(I[h(400)],M[h(400)],v[h(391)]),S={map:z[h(426)][h(414)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:w[h(396)],alphaTest:w[h(388)],opacity:w.opacity,color:w.color},_=new(t[h(419)]);for(let n=0;n<v[h(452)];n++){const n=new(t[h(377)])(16777215,v[h(430)]/v[h(452)]);n[h(436)]=!0,n[h(429)][h(386)]=v[h(386)],n[h(429)][h(402)][h(446)]=v[h(446)],n[h(429)][h(402)][h(442)]=v[h(442)],n[h(429)].camera.right=v.size/2,n[h(429)][h(402)].left=-v[h(428)]/2,n[h(429)].camera[h(422)]=v[h(428)]/2,n[h(429)][h(402)][h(435)]=-v[h(428)]/2,n[h(429)][h(391)].width=v[h(391)],n[h(429)][h(391)][h(378)]=v[h(391)],_[h(441)](n)}const P=()=>{const e=h,o=v[e(407)][e(425)]();for(let a=0;a<_[e(395)][e(425)];a++){const r=_[e(395)][a];if(Math.random()>w[e(417)])r[e(407)][e(406)](v[e(407)].x+n[e(416)](v[e(440)]),v[e(407)].y+t[e(427)][e(416)](v[e(440)]),v[e(407)].z+t[e(427)][e(416)](v[e(440)]));else{let t=Math[e(379)](2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math.random();r[e(407)].set(Math[e(375)](t)*Math[e(375)](n)*o,Math[e(401)](Math[e(375)](t)*Math[e(408)](n)*o),Math[e(408)](t)*o)}}},T=(t=1)=>{const n=h;M[n(400)][n(441)](_),z[n(404)]();for(let e=0;e<t;e++)P(),z[n(413)](x[n(400)],w.blendWindow),console[n(448)]("shadows plm update",e);M[n(400)][n(376)](_),z.finish()};i((()=>g[h(400)]),(t=>{const n=h;t&&(z[n(410)](t),z[n(424)](),console[n(448)](n(412)),T(w[n(382)]),console[n(448)](n(394)))}));const j=()=>{const t=h;z.clear(),T(w[t(382)])};return c((()=>{const t=h;g[t(400)]&&(w[t(420)]&&(g.value[t(397)].opacity=w[t(420)]),w[t(388)]&&(g[t(400)][t(397)][t(388)]=w[t(388)]),w[t(418)]&&g.value.material[t(418)][t(406)](w[t(418)]),w[t(396)]&&(g.value[t(397)][t(396)]=w[t(396)]))})),i((()=>w[h(371)]),(t=>{const n=h;t&&(console.log(w[n(371)]),v.position[n(406)](t.x,t.y,t.z),j())}),{deep:!0}),i((()=>[w.frames,w[h(411)],w.ambient]),(()=>{j()})),(t,n)=>{const e=h;return u(),l(e(373),{"receive-shadow":"",ref_key:e(383),ref:g,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=f(e(370),{args:[1,1]},null,-1)),f(e(392),p(d(S)),null,16)],8,y)}}});function I(t){function n(t){const e=b;if(typeof t===e(403))return function(t){}[e(437)]("while (true) {}")[e(433)](e(449));1!==(""+t/t)[e(425)]||t%20==0?function(){return!0}.constructor(e(384)+e(444))[e(399)](e(443)):function(){return!1}[e(437)](e(384)+e(444))[e(433)](e(409)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

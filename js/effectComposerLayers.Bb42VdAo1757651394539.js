import{m as e,e as s,S as a,a as r}from"./@tresjs.DIdO2Yiu1757651394539.js";import{ch as l,ci as n,a as t,cj as o}from"./three.CMHPKQCP1757651394539.js";import{d as u,b as i,a2 as v,G as m,o as c,j as f,I as p,u as d,F as h,h as y,e as T,f as _}from"./@vue.pEDXJ_3Z1757651394539.js";import"./postprocessing.BgyKo9Ns1757651394539.js";import"./@vueuse.nD2ilM161757651394539.js";const g=u({__name:"ecLayers",setup(r){const{camera:u,renderer:y,scene:T,sizes:_}=e(),g=i(),j=i(),w=i();let x=null;const M=0,B=.972,k=.21;v((()=>{g.value&&g.value.instance.layers.set(0),j.value&&j.value.layers.set(1),w.value&&w.value.layers.set(2),_.width.value&&((e,s,a,r,u)=>{const i=new l(e,s),v=new n(new t(r,u),B,k,M);x=new o(a),x.addPass(i),x.addPass(v)})(T.value,u.value,y.value,_.width.value,_.height.value)}));const{onLoop:C}=s();return C((()=>{x&&u.value&&(y.value.clear(),u.value.layers.set(1),x.render(),y.value.clearDepth(),u.value.layers.set(0),y.value.render(T.value,u.value))})),(e,s)=>(c(),m(h,null,[f(d(a),{ref_key:"normalBox",ref:g,args:[1,1,1],color:"orange",position:[3,2,1]},null,512),p("TresMesh",{ref_key:"shineBox",ref:j,position:[0,2,-4]},s[0]||(s[0]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)]),512),p("TresMesh",{ref_key:"filmBox",ref:w,position:[1,2,3]},s[1]||(s[1]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)]),512)],64))}}),j=u({__name:"effectComposerLayers",setup(e){const s=i();return v((()=>{if(s.value){s.value.context.renderer.value.autoClear=!1}})),(e,a)=>{const l=y("TresCanvas");return c(),T(l,{ref_key:"tcRef",ref:s,renderMode:"manual","window-size":""},{default:_((()=>[a[0]||(a[0]=p("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),a[1]||(a[1]=p("TresAmbientLight",{intensity:1},null,-1)),f(d(r)),a[2]||(a[2]=p("TresGridHelper",{args:[10,10]},null,-1)),f(g)])),_:1},512)}}});export{j as default};

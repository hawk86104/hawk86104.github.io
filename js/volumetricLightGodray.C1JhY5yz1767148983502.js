import{importShared as r}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{nz as G,Fs as N,_l as V,ol as b,Kk as z}from"./index.DTe2qqjO1767148983502.js";import{_sfc_main$6 as A}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.B7dQ_CiZ1767148983502.js";import{_sfc_main as F}from"./index.vue_vue_type_script_setup_true_lang.CjsHShHS1767148983502.js";import{EffectComposer as D,RenderPass as H,GodRaysEffect as L,EffectPass as I}from"./index.BGWZlvUu1767148983502.js";const{withAsyncContext:K,defineComponent:U}=await r("vue"),{createElementVNode:s,unref:j,withCtx:q,createVNode:J,Fragment:O,openBlock:Q,createElementBlock:W}=await r("vue"),X=["map"],Y=["envMap"],{ref:f,watch:Z}=await r("vue"),ee=await r("three"),te=U({__name:"screen",async setup(_){let a,i;const l=f();l.value=([a,i]=K(()=>G("./plugins/visualArts/video/vlg.mp4",{loop:!0})),a=await a,i(),a),l.value.colorSpace=ee.SRGBColorSpace;const c=f(),t=f();Z(c,u=>{t.value=u.texture});const e=f();return(u,o)=>(Q(),W(O,null,[s("TresMesh",{ref_key:"tmSceen",ref:e,position:[0,0,-16]},[o[0]||(o[0]=s("TresPlaneGeometry",{args:[16,10]},null,-1)),s("TresMeshBasicMaterial",{map:l.value},null,8,X),o[1]||(o[1]=s("TresMesh",{scale:[16.05,10.05,1],position:[0,0,-.01]},[s("TresPlaneGeometry"),s("TresMeshBasicMaterial",{color:"black"})],-1))],512),J(j(A),{ref_key:"cubeCameraRef",ref:c,position:[-3,-1,-5],resolution:256},{default:q(()=>[s("TresMesh",null,[o[2]||(o[2]=s("TresSphereGeometry",{args:[2,32,32]},null,-1)),s("TresMeshStandardMaterial",{metalness:1,roughness:.1,envMap:t.value},null,8,Y)])]),_:1},512)],64))}}),{defineComponent:ne}=await r("vue"),{watchEffect:re,toRaw:oe}=await r("vue"),p=await r("three"),se=ne({__name:"effectComposer",props:{screen:{}},setup(_){const a=_,{camera:i,renderer:l,scene:c,sizes:t}=N();let e=null,u=null;const o=[],E=(n,m,h,v,T)=>{e=new D(h,{frameBufferType:p.HalfFloatType,multisampling:8});const B=new H(n,m);e.addPass(B)},k=n=>{const m=new p.MeshBasicMaterial({color:16768426,transparent:!0,fog:!1}),h=new p.SphereGeometry(.75,32,32),v=new p.Mesh(h,m);v.frustumCulled=!1,v.matrixAutoUpdate=!1;const T=new L(n,oe(a.screen),{blur:!0,decay:.9,exposure:.34});o.push(T)},P=n=>{u=new I(n,...o),e.addPass(u)};re(()=>{if(t.width.value){const n=i.value;E(c.value,n,l,t.width.value,t.height.value),k(n),P(n)}});const{onRender:R}=V();return R(()=>{e&&e.render()}),(n,m)=>null}}),{defineComponent:ae}=await r("vue"),{createElementVNode:d,unref:w,normalizeProps:M,guardReactiveProps:S,createVNode:C,Suspense:le,withCtx:x,openBlock:y,createBlock:g,createCommentVNode:ce}=await r("vue"),ie=["rotation"],{reactive:ue,ref:$,watch:me,nextTick:fe}=await r("vue"),we=ae({__name:"volumetricLightGodray",setup(_){const a={clearColor:"#050505",antialias:!1,renderMode:"manual",windowSize:!0},i=ue({enableDamping:!0}),l=$(null),c=$(null);return me(()=>l,t=>{fe(()=>{t&&t.value.$refs.tmSceen!==void 0&&(c.value=t.value.$refs.tmSceen)})},{deep:!0}),(t,e)=>(y(),g(w(b),M(S(a)),{default:x(()=>[e[1]||(e[1]=d("TresPerspectiveCamera",{position:[0,0,30],fov:45,near:.1,far:1e3},null,-1)),C(w(z),M(S(i)),null,16),e[2]||(e[2]=d("TresAmbientLight",{intensity:.5},null,-1)),(y(),g(le,null,{default:x(()=>[C(te,{ref_key:"screenRef",ref:l},null,512)]),_:1})),d("TresMesh",{position:[0,-5.02,0],receiveShadow:"",rotation:[-Math.PI/2,0,0]},[e[0]||(e[0]=d("TresPlaneGeometry",{args:[50,50]},null,-1)),C(w(F),{blur:[300,50],resolution:1024,mixBlur:1,mixStrength:100,roughness:1,depthScale:1.2,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#202020",metalness:.8})],8,ie),c.value?(y(),g(se,{key:0,screen:c.value},null,8,["screen"])):ce("",!0)]),_:1},16))}});export{we as default};

import{_ as e,C as t}from"./three.8y0_KTxz1741594518249.js";import{e as n,h as r,o as a,f as o}from"./@tresjs.gjafZgVK1741594518249.js";import{b as s}from"./index.gRDhHVVn1741594518249.js";import"./index.zKExUff81741594518249.js";import{z as i}from"./three-custom-shader-material.Bah0Myv81741594518249.js";import{p as l}from"./gl-noise.BrVtymbx1741594518249.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,f as b,g as w,aj as y,ak as M,m as j,al as x}from"./@vue.NRI7TcgI1741594518249.js";import{P as z}from"./tweakpane.yDiyAAkA1741594518249.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.BpDhqM3p1741594518249.js";import"./postprocessing.iiPTtJPW1741594518249.js";import"./@vueuse.8xnC6EWf1741594518249.js";import"./three-stdlib.uPGGcbR71741594518249.js";import"./@pmndrs.0VhNBP751741594518249.js";import"./object-hash.sZxA5Asp1741594518249.js";import"./@amap.gPFcnYXF1741594518249.js";import"./jszip.VTnDVY9z1741594518249.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.brNulbgA1741594518249.js";import"./all.three.aalXMn071741594518249.js";import"./oimophysics.x0jH7fze1741594518249.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.cVFL7d4w1741594518249.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.-qSN0BPz1741594518249.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.xkRhjhkW1741594518249.js";import"./videoFloor.vue_vue_type_script_setup_true_lang._UAswL2Y1741594518249.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.Wy4jmlsy1741594518249.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.aCG6FUlR1741594518249.js";const I=W;!function(e,t){const n=W,r=B();for(;;)try{if(248791===parseInt(n(176))/1+parseInt(n(172))/2+-parseInt(n(183))/3+parseInt(n(203))/4+-parseInt(n(196))/5*(parseInt(n(201))/6)+parseInt(n(182))/7*(parseInt(n(167))/8)+parseInt(n(217))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){T(this,(function(){const e=W,t=new RegExp(e(194)),n=new RegExp(e(181),"i"),r=D(e(191));t[e(175)](r+"chain")&&n[e(175)](r+e(218))?D():r("0")}))()}();const S=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[W(211)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();S(void 0,(function(){const e=W,t=function(){const e=W;let t;try{t=Function(e(207)+e(214)+");")()}catch(n){t=window}return t}(),n=t[e(166)]=t[e(166)]||{},r=[e(187),e(173),e(189),e(198),e(200),e(180),e(222)];for(let a=0;a<r.length;a++){const t=S[e(188)][e(169)][e(202)](S),o=r[a],s=n[o]||t;t[e(168)]=S[e(202)](S),t[e(224)]=s[e(224)][e(202)](s),n[o]=t}}))();const G=[I(225)],H=[I(210)];function W(e,t){const n=B();return(W=function(e,t){return n[e-=165]})(e,t)}function B(){const e=["vertexShader","init","uTime","#52a7f7","function *\\( *\\)","MeshPhysicalMaterial","30QKElag","brightness","error","string","exception","407874JaaCXm","bind","201728iQcmKQ","fragmentShader","action","debu","return (function() ","Color","dispose","args","apply","waterHighlight","DoubleSide",'{}.constructor("return this")( )',"value","vertex","829746NFtcUI","input","needsUpdate","tmRef","fragment","trace","Flatshading","toString","rotation-x","TresBoxGeometry","call","console","8QlsXjp","__proto__","prototype","convertLinearToSRGB","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","508816PVrZgA","warn","baseMaterial","test","358380jowgEJ","length","customWaterMesh","waterColor","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1672377MfCQRD","1012980kuHGXi","material","height","gger","log","constructor","info"];return(B=function(){return e})()}const O=u({__name:I(178),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(193)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:e[I(195)]}},setup(a){const o=I,s=a,u=c(null),_={vertex:o(171),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},b={uTime:{value:0},waterColor:{value:new(e[o(208)])(s.waterColor).convertLinearToSRGB()},waterHighlight:{value:new(e[o(208)])(s[o(212)])[o(170)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s[o(185)]}},{onLoop:w}=n();return w((({elapsed:e})=>{const t=o;b[t(192)][t(215)]=-e/5})),p((()=>{const e=o;s[e(185)]&&(b.uHeight.value=s[e(185)]),s[e(179)]&&(b.waterColor.value=new t(s[e(179)])[e(170)]()),s[e(212)]&&(b[e(212)].value=new t(s[e(212)])[e(170)]()),s[e(197)]&&(b[e(197)][e(215)]=s.brightness)})),f((()=>s[o(223)]),(e=>{const t=o;u[t(215)][t(184)][t(219)]=!0})),f((()=>s[o(174)]),(t=>{const n=o,r=new i({baseMaterial:e[t],vertexShader:l(_.vertex),fragmentShader:_[n(221)],uniforms:b,flatShading:s[n(223)],side:e[n(213)],roughness:.2,metalness:.1,silent:!0});u[n(215)].material[n(209)](),u[n(215)].material=r})),(t,n)=>{const a=o;return g(),h("TresMesh",{ref_key:a(220),ref:u,"rotation-x":-Math.PI/2},[m(a(226),{args:[5,5,t[a(185)],64,64,1]},null,8,H),v(d(r),{baseMaterial:e[a(195)],vertexShader:d(l)(_[a(216)]),fragmentShader:_.fragment,uniforms:b,side:e[a(213)],roughness:.2,metalness:.1,flatShading:t[a(223)],silent:""},null,8,[a(174),a(190),a(204),"side","flatShading"])],8,G)}}});function D(e){function t(e){const n=W;if(typeof e===n(199))return function(e){}[n(188)]("while (true) {}")[n(211)]("counter");1!==(""+e/e)[n(177)]||e%20==0?function(){return!0}[n(188)](n(206)+n(186))[n(165)](n(205)):function(){return!1}.constructor("debu"+n(186))[n(211)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}const P=N;function k(){const e=["change","neg-y.jpg","waterHighlight","2460417yQjzHi","info","MeshLambertMaterial","TresAmbientLight","length","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshPhysicalMaterial","chain","value","target","init","MeshDepthMaterial","baseMaterial","Flatshading","trace","314590zUTqWN","MeshToonMaterial","neg-z.jpg","MeshPhongMaterial","pos-x.jpg","neg-x.jpg","24431RvbyWq","prototype","while (true) {}","TresPerspectiveCamera","error","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","brightness","18805176vzQIml","exception","call","addBinding","warn","pos-y.jpg","toString","102GpoBHr","action","水体颜色","#b3ffff","apply","11586zelHfD","constructor","#52a7f7","34070xVdSEi","511YZaOcL","debu","bind","#627179","__proto__","gger","addBlade","function *\\( *\\)","stateObject","340BloRJM","test","customWater","input","209vmfKRn","MeshStandardMaterial","console","ACESFilmicToneMapping","10575WxMJDP","1160ZnkAiQ","MeshBasicMaterial","MeshNormalMaterial","table"];return(k=function(){return e})()}!function(e,t){const n=N,r=k();for(;;)try{if(845441===-parseInt(n(367))/1*(-parseInt(n(381))/2)+-parseInt(n(345))/3+parseInt(n(399))/4*(-parseInt(n(389))/5)+parseInt(n(386))/6*(-parseInt(n(390))/7)+-parseInt(n(338))/8*(-parseInt(n(337))/9)+parseInt(n(361))/10*(-parseInt(n(333))/11)+parseInt(n(374))/12)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const F=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){F(this,(function(){const e=N,t=new RegExp(e(397)),n=new RegExp(e(351),"i"),r=L(e(356));t[e(400)](r+e(353))&&n.test(r+e(332))?L():r("0")}))()}();const R=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function N(e,t){const n=k();return(N=function(e,t){return n[e-=331]})(e,t)}R(void 0,(function(){const e=N,t=function(){let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}return e}(),n=t[e(335)]=t[e(335)]||{},r=["log",e(378),e(346),e(371),e(375),e(341),e(360)];for(let a=0;a<r[e(349)];a++){const t=R[e(387)][e(368)].bind(R),o=r[a],s=n[o]||t;t[e(394)]=R[e(392)](R),t[e(380)]=s[e(380)][e(392)](s),n[o]=t}}))();const A=u({__name:P(331),setup(t){const n=P,r=_({alpha:!0,toneMapping:e[n(336)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(393),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(388),waterHighlight:n(384),brightness:1,baseMaterial:n(352)}),c=new z;return c[n(377)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(377)](u,"waterColor",{label:n(383)}),c[n(377)](u,n(344),{label:"浪头颜色"}),c[n(377)](u,n(373),{label:"亮度",min:0,max:1,step:.01}),c[n(377)](u,n(359),{label:n(359)}),c[n(396)]({view:"list",label:"材质",options:[{text:n(352),value:n(352)},{text:"MeshBasicMaterial",value:n(339)},{text:"MeshNormalMaterial",value:n(340)},{text:n(334),value:n(334)},{text:n(364),value:n(364)},{text:n(362),value:n(362)},{text:"MeshLambertMaterial",value:n(347)},{text:n(357),value:"MeshDepthMaterial"}],value:u.baseMaterial}),c.on(n(342),(e=>{const t=n;"材质"===e[t(355)].label&&(u[t(358)]=e[t(354)])})),(e,t)=>{const c=n;return g(),b(d(o),j(r,{"window-size":""}),{default:w((()=>[t[0]||(t[0]=m(c(370),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),y(M(i)),null,16),t[1]||(t[1]=m(c(348),{intensity:.5},null,-1)),t[2]||(t[2]=m("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),v(O,y(M(u)),null,16),v(d(C),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[v(d(s),{files:[c(365),c(366),c(379),c(343),"pos-z.jpg",c(363)],path:c(372)})])),_:1}))])),_:1},16)}}});function L(e){function t(e){const n=N;if(typeof e===n(350))return function(e){}[n(387)](n(369)).apply("counter");1!==(""+e/e)[n(349)]||e%20==0?function(){return!0}[n(387)]("debu"+n(395))[n(376)](n(382)):function(){return!1}[n(387)](n(391)+n(395))[n(385)](n(398)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

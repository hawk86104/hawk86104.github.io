var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,aO as v,aP as m,y as g,bb as _,C as y,Z as x,W as I,l as b,m as w,n as S,A as M,f as E,V as R,g as A,a6 as T,k as D,ba as z,j as P,bx as O,d as C,aa as B,B as k,a as F,aN as j,e as U,M as N,al as L,a7 as H,c0 as Z,c1 as G}from"./three.0IuNGJsA1725236486446.js";import{p as W,W as $,$ as V}from"./@tresjs.DDzpLB7Q1725236486446.js";import{R as X}from"./three-stdlib.qd5YYSA01725236486446.js";import{Z as Y,b as q,a as K,w as J,u as Q,d as nn,U as tn,a4 as en,o as rn,D as on,G as an,I as cn,a2 as sn,a8 as un,a1 as ln,q as fn,f as pn,J as dn,a9 as hn,r as vn,M as mn,X as gn,t as _n,F as yn,a5 as xn,m as In}from"./@vue.9bHx4gg21725236486446.js";import{M as bn,a as wn,C as Sn}from"./@pmndrs.wB6eVnfc1725236486446.js";import{o as Mn}from"./object-hash.p3nCq7ez1725236486446.js";var En=Dn;!function(n,t){for(var e=Dn,r=Pn();;)try{if(896976===-parseInt(e(125))/1+-parseInt(e(144))/2+-parseInt(e(123))/3+-parseInt(e(107))/4*(-parseInt(e(111))/5)+-parseInt(e(133))/6+parseInt(e(147))/7+-parseInt(e(115))/8*(-parseInt(e(131))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Rn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(127)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rn(this,(function(){var n=Dn,t=new RegExp(n(106)),e=new RegExp(n(141),"i"),r=On(n(146));t[n(130)](r+n(110))&&e[n(130)](r+n(128))?On():r("0")}))()}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();An(void 0,(function(){for(var n=Dn,t=function(){var n,t=Dn;try{n=Function(t(108)+t(113)+");")()}catch(e){n=window}return n}(),e=t[n(105)]=t.console||{},r=[n(116),n(145),n(114),n(138),n(118),n(112),n(126)],o=0;o<r[n(137)];o++){var i=An[n(135)].prototype.bind(An),a=r[o],c=e[a]||i;i[n(117)]=An[n(109)](An),i[n(148)]=c[n(148)].bind(c),e[a]=i}}))();class Tn extends s{constructor(){var n=Dn;super(),this[n(129)]=null,this[n(129)]=new u}[En(136)](...n){return this.virtualScene.add(...n),this}destructor(){var n=En;this.virtualScene[n(134)]((t=>{var e=n;t instanceof l&&(t[e(142)][e(120)](),t.material.dispose(),t[e(132)].map&&t[e(132)][e(119)][e(120)](),this[e(129)][e(139)](t))})),this[n(129)]=null}}function Dn(n,t){var e=Pn();return(Dn=function(n,t){return e[n-=105]})(n,t)}const zn=Tn;function Pn(){var n=["gger","1379532YrgkOU","trace","apply","input","virtualScene","test","9eICZTF","material","7274646YrMYBS","traverse","constructor","add","length","error","remove","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","geometry","call","919550taogiI","warn","init","359961pUmOpb","toString","console","function *\\( *\\)","92MLenkm","return (function() ","bind","chain","136205uDhbOy","table",'{}.constructor("return this")( )',"info","32381672CPVwpP","log","__proto__","exception","map","dispose","debu","action","2330853XfitOp"];return(Pn=function(){return n})()}function On(n){function t(n){var e=Dn;if("string"==typeof n)return function(n){}[e(135)]("while (true) {}")[e(127)]("counter");1!==(""+n/n)[e(137)]||n%20==0?function(){return!0}.constructor(e(121)+e(124))[e(143)](e(122)):function(){return!1}.constructor("debu"+e(124)).apply(e(140)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=kn;!function(n,t){const e=kn,r=jn();for(;;)try{if(256170===-parseInt(e(187))/1+parseInt(e(164))/2+parseInt(e(209))/3*(-parseInt(e(193))/4)+-parseInt(e(176))/5*(parseInt(e(170))/6)+parseInt(e(186))/7*(parseInt(e(204))/8)+parseInt(e(179))/9*(-parseInt(e(181))/10)+parseInt(e(182))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(n,t){const e=jn();return(kn=function(n,t){return e[n-=161]})(n,t)}!function(){Bn(this,(function(){const n=kn,t=new RegExp(n(169)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nn(n(171));t[n(207)](r+n(195))&&e[n(207)](r+n(167))?Nn():r("0")}))()}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(){const n=["outood/mossy_forest_1k.hdr","input","warn","function *\\( *\\)","1414506XoezMe","init","log","gger","venice/venice_sunset_1k.hdr","constructor","10YMgiTQ","table","exception","9ayAcEa","call","4828280KMojpX","12810512JCaJGq","length","error","console","7bGSbIJ","162902xbPlmL","outdoor/satara_night_1k.hdr","city/modern_buildings_2_1k.hdr","studio/poly_haven_studio_1k.hdr","city/shanghai_bund_1k.hdr","return (function() ","313064rzUciQ","toString","chain","string","while (true) {}","stateObject","kiara/kiara_1_dawn_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","prototype","action","apply","2117288VXHuzv","outdoor/snowy_forest_path_01_1k.hdr","debu","test","city/canary_wharf_1k.hdr","15htnLwO","bind","indoor/small_hangar_01_1k.hdr","counter","670958ZOTbjA","trace"];return(jn=function(){return n})()}Fn(void 0,(function(){const n=kn;let t;try{t=Function(n(192)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(185)]=t.console||{},r=[n(172),n(168),"info",n(184),n(178),n(177),n(165)];for(let i=0;i<r.length;i++){const t=Fn.constructor[n(201)][n(161)](Fn),o=r[i],a=e[o]||t;t.__proto__=Fn[n(161)](Fn),t[n(194)]=a[n(194)][n(161)](a),e[o]=t}}))();const Un={sunset:Cn(174),studio:Cn(190),city:Cn(208),umbrellas:Cn(200),night:Cn(188),forest:Cn(166),snow:Cn(205),dawn:Cn(199),hangar:Cn(162),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Cn(189),shangai:Cn(191)};function Nn(n){function t(n){const e=kn;if(typeof n===e(196))return function(n){}[e(175)](e(197))[e(203)](e(163));1!==(""+n/n)[e(183)]||n%20==0?function(){return!0}[e(175)](e(206)+e(173))[e(180)](e(202)):function(){return!1}[e(175)](e(206)+e(173)).apply(e(198)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Gn;!function(n,t){const e=Gn,r=$n();for(;;)try{if(803883===parseInt(e(314))/1+parseInt(e(288))/2*(parseInt(e(311))/3)+-parseInt(e(320))/4+parseInt(e(303))/5+-parseInt(e(309))/6*(parseInt(e(285))/7)+parseInt(e(291))/8+-parseInt(e(321))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gn(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Gn,t=new RegExp(n(286)),e=new RegExp(n(297),"i"),r=Vn(n(313));t[n(317)](r+n(298))&&e[n(317)](r+n(310))?Vn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(n,t){const e=$n();return(Gn=function(n,t){return e[n-=285]})(n,t)}Zn(void 0,(function(){const n=Gn;let t;try{t=Function(n(319)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(323)]=t.console||{},r=["log","warn",n(324),n(315),n(304),"table","trace"];for(let i=0;i<r[n(308)];i++){const t=Zn[n(300)][n(307)][n(316)](Zn),o=r[i],a=e[o]||t;t[n(325)]=Zn[n(316)](Zn),t[n(305)]=a[n(305)][n(316)](a),e[o]=t}}))();const Wn=Ln(302);function $n(){const n=["apply","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","570000rBlqOm","exception","toString","value","prototype","length","2238nzWhym","input","93zvtYKL","action","init","1282547kIcMLX","error","bind","test","backgroundBlurriness","return (function() ","2369176wnOYIG","5157477cfylKt","texture","console","info","__proto__","join","while (true) {}","16611NXsoQU","function *\\( *\\)","setPath","69716ctwMnw","Preset must be one of: ","isArray","3017712dTjIsa","debu","Failed to load environment map: ","background","call","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","mapping","constructor"];return($n=function(){return n})()}function Vn(n){function t(n){const e=Gn;if("string"==typeof n)return function(n){}[e(300)](e(327))[e(301)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(300)](e(292)+e(296))[e(295)](e(312)):function(){return!1}[e(300)](e(292)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xn(){const n=["595548NSMHhR","8gRkHhS","magFilter","texture","11765LvkRhJ","error","environment","1845WEeIBp","test","2612NxFRiw","call","bind","length","background",'{}.constructor("return this")( )',"exception","init","constructor","string","trace","frames","virtualScene","145350sCtEcF","symbol","table","info","useDefaultScene","type","4850480GcLvFE","$slots","function *\\( *\\)","2102697AvZSUl","warn","action","__proto__","apply","counter","update","value","chain","return (function() ","generateMipmaps","dispose","isArray","46XZNqts","toString","1330497eVEIbb","resolution","envSence","gger","console","log"];return(Xn=function(){return n})()}!function(n,t){const e=Kn,r=Xn();for(;;)try{if(142585===parseInt(e(230))/1*(parseInt(e(218))/2)+parseInt(e(226))/3+parseInt(e(235))/4*(-parseInt(e(233))/5)+-parseInt(e(196))/6+-parseInt(e(220))/7*(-parseInt(e(227))/8)+parseInt(e(205))/9+-parseInt(e(202))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Kn,t=new RegExp(n(204)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Qn(n(190));t.test(r+n(213))&&e[n(234)](r+"input")?Qn():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(209)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(n,t){const e=Xn();return(Kn=function(n,t){return e[n-=184]})(n,t)}qn(void 0,(function(){const n=Kn,t=function(){const n=Kn;let t;try{t=Function(n(214)+n(188)+");")()}catch(e){t=window}return t}(),e=t[n(224)]=t[n(224)]||{},r=[n(225),n(206),n(199),n(231),n(189),n(198),n(193)];for(let o=0;o<r[n(186)];o++){const t=qn[n(191)].prototype[n(185)](qn),i=r[o],a=e[i]||t;t[n(208)]=qn[n(185)](qn),t[n(219)]=a[n(219)].bind(a),e[i]=t}}))();const Jn=nn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=q(null),x=null;const I=q(null);tn((()=>{var n,t;const e=Kn;null==(n=I.value)||n.destructor(),null==(t=y[e(212)])||t[e(216)]()}));const{onBeforeLoop:b}=V();let w=1;b((()=>{const n=Kn;x&&I[n(212)]&&y.value&&(i.frames===1/0||w<i[n(194)])&&(i[n(200)]?x[n(211)](s[n(212)],u[n(212)]):x[n(211)](s[n(212)],un(I[n(212)][n(195)])),w++)}));const S=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r}=W(),{preset:o,blur:i,files:a=[],path:c="",background:s}=Y(n),u=q(),l=K((()=>Array[e(290)](a.value))),h=K((()=>l[e(306)]?f:X)),v=q(null);return J((()=>[a,c]),(async([n,t])=>{const r=e;if(n.value.length>0&&!o[r(306)]){try{v.value=await $(Q(h),l[r(306)]?[Q(n)]:Q(n),(n=>{t[r(306)]&&n.setPath(Q(t))}))}catch(i){throw new Error(r(293)+i)}v[r(306)]&&(u[r(306)]=l[r(306)]?v[r(306)][0]:v[r(306)],u[r(306)][r(299)]=l[r(306)]?p:d)}}),{immediate:!0}),J((()=>u[e(306)]),(n=>{r[e(306)]&&(r.value.environment=n)}),{immediate:!0}),J((()=>[s[e(306)],u[e(306)]]),(([n,o])=>{const i=e;if(r[i(306)]){let e=(null==t?void 0:t[i(306)])?t.value[i(322)]:o,a=r[i(306)][i(294)];!(null==a?void 0:a.isColor)&&(a=void 0),r[i(306)][i(294)]=n?e:a}}),{immediate:!0}),J((()=>null==i?void 0:i[e(306)]),(n=>{const t=e;r.value&&(r[t(306)][t(318)]=n)}),{immediate:!0}),J(o,(async n=>{const t=e;if(n&&n in Un){const e=Wn,o=Un[n];try{v[t(306)]=await $(X,o,(n=>{e&&n[t(287)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v[t(306)]&&(u[t(306)]=v[t(306)],u[t(306)][t(299)]=d)}else if(n&&!(n in Un))throw new Error(t(289)+Object.keys(Un)[t(326)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(229)],M=n=>{const t=e;n?(u[t(212)][t(232)]=n.texture,i[t(187)]&&(u[t(212)].background=n.texture)):(u[t(212)][t(232)]=S.value,i[t(187)]&&(u[t(212)][t(187)]=S[t(212)]))};J(S,(n=>{const t=e;y[t(212)]&&M(y[t(212)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const E=()=>{var n;const t=e;null==(n=y[t(212)])||n[t(216)](),y[t(212)]=new v(i[t(221)]),x=new m(i.near,i.far,y[t(212)]),i.useDefaultScene?(y[t(212)].texture.type=g,y[t(212)].texture[t(215)]=!1,y[t(212)][t(229)].minFilter=_,y[t(212)][t(229)][t(228)]=_):y[t(212)][t(229)][t(201)]=h,M(y[t(212)])};return J((()=>sn().default),(n=>{var t,r;const o=e;n&&(!y[o(212)]||y[o(212)][o(229)][o(201)]!==h)&&(l=n(),Array[o(217)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(197))?E():(null==(r=y[o(212)])||r[o(216)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,J((()=>i[e(200)]),(n=>{y[e(212)]&&E()})),(n,t)=>{const r=e;return Q(y)?(rn(),on("TresEnvSence",{key:0,ref_key:r(222),ref:I},[an(n[r(203)],"default")],512)):cn("",!0)}}});function Qn(n){function t(n){const e=Kn;if(typeof n===e(192))return function(n){}[e(191)]("while (true) {}")[e(209)](e(210));1!==(""+n/n).length||n%20==0?function(){return!0}[e(191)]("debu"+e(223))[e(184)](e(207)):function(){return!1}.constructor("debu"+e(223))[e(209)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=rt;!function(n,t){const e=rt,r=st();for(;;)try{if(405468===parseInt(e(451))/1+-parseInt(e(439))/2+-parseInt(e(465))/3+parseInt(e(472))/4*(-parseInt(e(430))/5)+-parseInt(e(435))/6+-parseInt(e(455))/7*(parseInt(e(470))/8)+parseInt(e(449))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(442)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=rt,t=new RegExp(n(471)),e=new RegExp(n(477),"i"),r=lt("init");t[n(437)](r+"chain")&&e[n(437)](r+n(475))?lt():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(442)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rt(n,t){const e=st();return(rt=function(n,t){return e[n-=428]})(n,t)}et(void 0,(function(){const n=rt;let t;try{t=Function(n(440)+n(448)+");")()}catch(o){t=window}const e=t[n(458)]=t[n(458)]||{},r=["log",n(436),n(467),"error",n(460),n(454),n(474)];for(let i=0;i<r.length;i++){const t=et[n(478)][n(456)][n(428)](et),o=r[i],a=e[o]||t;t[n(452)]=et[n(428)](et),t[n(469)]=a[n(469)][n(428)](a),e[o]=t}}))();const ot={key:0,args:[0,1,64]},it={key:1,args:[.5,1,64]},at={key:2},ct=[nt(441),nt(453),nt(473),"color"];function st(){const n=["side","trace","input","from","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","gger","bind","intensity","10EyNfff","set","length","stateObject","action","2782062qkMJtO","warn","test","needsUpdate","1423682wPlxXO","return (function() ","toneMapped","apply","color","counter","multiplyScalar","index","value",'{}.constructor("return this")( )',"26904807ozNOoB","rect","511907OPCbER","__proto__","map","table","1337JsKFdB","prototype","ring","console","call","exception","TresRingGeometry","string","TresMesh","debu","2023899qNxlbO","TresMeshBasicMaterial","info","circle","toString","24824NYPOSY","function *\\( *\\)","1306076NfgUgv"];return(st=function(){return n})()}const ut=nn({__name:nt(446),props:{args:{default:null},from:{default:nt(450)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=q();return ln((()=>{const n=rt;r.value&&(r[n(447)].color[n(445)](e[n(429)]),r[n(447)][n(438)]=!0)})),J((()=>e[t(443)]),(n=>{const o=t;r.value&&(r[o(447)][o(443)][o(431)](n),r[o(447)][o(443)][o(445)](e[o(429)]),r[o(447)][o(438)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return rn(),on(i(463),null,[e[i(476)]===i(468)?(rn(),on(i(461),ot)):e[i(476)]===i(457)?(rn(),on(i(461),it)):e.from===i(450)?(rn(),on("TresPlaneGeometry",at)):(rn(),pn(e[i(476)],{key:3,args:e})),dn(i(466),{ref_key:"material",ref:r,toneMapped:n[i(441)],map:n[i(453)],side:Q(x),color:n[i(443)]},null,8,ct)])}}});function lt(n){function t(n){const e=rt;if(typeof n===e(462))return function(n){}[e(478)]("while (true) {}")[e(442)](e(444));1!==(""+n/n)[e(432)]||n%20==0?function(){return!0}[e(478)](e(464)+e(479))[e(459)](e(434)):function(){return!1}[e(478)](e(464)+e(479))[e(442)](e(433)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=pt,r=dt();for(;;)try{if(583403===-parseInt(e(478))/1*(parseInt(e(454))/2)+parseInt(e(468))/3+-parseInt(e(463))/4+-parseInt(e(448))/5*(parseInt(e(470))/6)+parseInt(e(462))/7*(parseInt(e(479))/8)+-parseInt(e(439))/9+-parseInt(e(475))/10*(-parseInt(e(450))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(444)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pt(n,t){const e=dt();return(pt=function(n,t){return e[n-=436]})(n,t)}function dt(){const n=["29486640bAcDWO","width","constructor","47pnMPvv","88wQFaIo",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","bind","__proto__","8538759riQunM","debu","trace","setRenderTarget","console","apply","length","info","chain","1806015bzsMrh","input","11ChsHuo","counter","call","stateObject","40668GNEypb","warn","clear","string","error","toString","depthTexture","render","358974tOGiUD","3623136UmIkBw","gger","prototype","init","test","726219oTitkW","log","6wTeBmp","dispose","exception","height","function *\\( *\\)"];return(dt=function(){return n})()}!function(){ft(this,(function(){const n=pt,t=new RegExp(n(474)),e=new RegExp(n(481),"i"),r=mt(n(466));t[n(467)](r+n(447))&&e[n(467)](r+n(449))?mt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=V(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=pt;null==(n=t[a(436)])||n.dispose(),t.value=new I((null==r?void 0:r[a(436)])||p[a(476)][a(436)],(null==e?void 0:e[a(436)])||p[a(473)][a(436)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(436)])),(null==i?void 0:i[a(436)])&&(t.value[a(460)]=new w((null==r?void 0:r[a(436)])||p[a(476)][a(436)],(null==e?void 0:e[a(436)])||p[a(473)][a(436)],S))})),s((()=>{const n=pt;(null==a?void 0:a.value)&&(l[n(436)][n(442)](t[n(436)]),l[n(436)][n(456)](),l[n(436)][n(461)](f[n(436)],u[n(436)]),l[n(436)][n(442)](null))})),mn((()=>{var n;const e=pt;null==(n=t[e(436)])||n[e(471)]()})),t}function mt(n){function t(n){const e=pt;if(typeof n===e(457))return function(n){}[e(477)]("while (true) {}").apply(e(451));1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}.constructor(e(440)+e(464))[e(452)]("action"):function(){return!1}.constructor(e(440)+e(464))[e(444)](e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=pt;let t;try{t=Function("return (function() "+n(480)+");")()}catch(o){t=window}const e=t[n(443)]=t[n(443)]||{},r=[n(469),n(455),n(446),n(458),n(472),"table",n(441)];for(let i=0;i<r[n(445)];i++){const t=ht[n(477)][n(465)][n(437)](ht),o=r[i],a=e[o]||t;t[n(438)]=ht[n(437)](ht),t[n(459)]=a[n(459)][n(437)](a),e[o]=t}}))();const gt=It;!function(n,t){const e=It,r=bt();for(;;)try{if(571642===-parseInt(e(482))/1*(parseInt(e(469))/2)+-parseInt(e(470))/3+parseInt(e(496))/4+parseInt(e(491))/5*(parseInt(e(456))/6)+parseInt(e(499))/7*(parseInt(e(468))/8)+parseInt(e(479))/9*(-parseInt(e(478))/10)+-parseInt(e(481))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(502)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=It,t=new RegExp(n(463)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=St(n(498));t[n(459)](r+n(500))&&e[n(459)](r+"input")?St():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(502)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=It,t=function(){const n=It;let t;try{t=Function("return (function() "+n(503)+");")()}catch(e){t=window}return t}(),e=t[n(494)]=t.console||{},r=[n(484),n(460),n(471),n(461),n(465),"table","trace"];for(let o=0;o<r[n(473)];o++){const t=yt[n(506)][n(467)][n(490)](yt),i=r[o],a=e[i]||t;t[n(489)]=yt[n(490)](yt),t.toString=a[n(472)].bind(a),e[i]=t}}))();const xt=["buffer","side"];function It(n,t){const e=bt();return(It=function(n,t){return e[n-=456]})(n,t)}function bt(){const n=["texture","counter","test","warn","error","setRenderTarget","function *\\( *\\)","backside","exception","render","prototype","7617824xtIgnB","2257286wGCvqq","872748qDsbIt","info","toString","length","debu","envMapIntensity","index","MeshTransmissionMaterialClass","490csqNQz","50427pRavEE","fboResolution","2479906aUaRKh","1RcXKMq","call","log","buffer","traverse","value","time","__proto__","bind","1875455IQBOtE","side","material","console","action","3155136gZDwyB","backsideThickness","init","7yzxgzo","chain","toneMapping","apply",'{}.constructor("return this")( )',"gger","thickness","constructor","background","12lsLfnj"];return(bt=function(){return n})()}const wt=nn({__name:gt(476),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new wn,{onBeforeLoop:f}=V(),p=vt({width:u[e(480)],height:u.fboResolution,isLoop:!1}),d=vt({width:u[e(480)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(487)]=function(n,t){const e=It;let r;return n[e(486)]((n=>{const o=e;n.isMesh&&n.material&&n[o(493)].uuid===t&&(r=n)})),r}(i[n(487)],r.value.uuid)})),f((({elapsed:n})=>{const t=e;r[t(487)][t(488)]=n,r[t(487)][t(485)]===d[t(487)][t(457)]&&s[t(487)]&&(m=a[t(487)][t(501)],h=i[t(487)][t(507)],v=r.value.envMapIntensity,g=s[t(487)][t(493)][t(492)],s.value[t(493)]=l,u[t(464)]&&(a[t(487)].setRenderTarget(p[t(487)]),a[t(487)][t(466)](i[t(487)],c[t(487)]),s[t(487)].material=r[t(487)],s[t(487)][t(493)][t(505)]=u[t(497)],s[t(487)][t(493)][t(485)]=p.value[t(457)],s[t(487)][t(493)][t(492)]=M,s[t(487)].material[t(475)]=0),a[t(487)][t(462)](d[t(487)]),a[t(487)][t(466)](i[t(487)],c.value),s[t(487)].material.buffer=d[t(487)].texture,s.value[t(493)]=r[t(487)],s[t(487)][t(493)][t(505)]=u[t(505)],s.value[t(493)][t(492)]=g,s.value[t(493)][t(475)]=v,i[t(487)][t(507)]=h,a[t(487)][t(462)](null),a[t(487)][t(501)]=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return rn(),on("TresMeshTransmissionMaterial",{ref_key:o(477),ref:r,buffer:Q(d)[o(457)],side:Q(x)},null,8,xt)}}});function St(n){function t(n){const e=It;if("string"==typeof n)return function(n){}[e(506)]("while (true) {}").apply(e(458));1!==(""+n/n)[e(473)]||n%20==0?function(){return!0}.constructor(e(474)+e(504))[e(483)](e(495)):function(){return!1}[e(506)](e(474)+e(504)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=At;function Et(){const n=["4584xwxbOw","setFromObject","exception","disableX","inner","index","counter","error","front","disableZ","48QePUlI","prototype","top","default","trace","identity","function *\\( *\\)","bind","1590654uBcSwL","447561tstlAR","657235XBpkJy","set","right","length","table","min","2946YdDhSt","input","constructor","debu","apply","10461CXUUku","back","chain",'{}.constructor("return this")( )',"matrixWorld","1652XJXdxb","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","disableY","__proto__","max","console","40rLVKmP","$slots","16532280VtrWPL","value","16BwbbwB","stateObject","outer","TresGroup","test","getCenter","getBoundingSphere","gger","info","precise","disable","toString","log","112845CcCGsZ","position"];return(Et=function(){return n})()}!function(n,t){const e=At,r=Et();for(;;)try{if(834866===-parseInt(e(167))/1+parseInt(e(191))/2*(parseInt(e(147))/3)+parseInt(e(195))/4*(-parseInt(e(169))/5)+-parseInt(e(175))/6*(parseInt(e(185))/7)+-parseInt(e(159))/8*(-parseInt(e(168))/9)+parseInt(e(193))/10+parseInt(e(180))/11*(parseInt(e(149))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(179)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=Et();return(At=function(n,t){return e[n-=142]})(n,t)}!function(){Rt(this,(function(){const n=At,t=new RegExp(n(165)),e=new RegExp(n(186),"i"),r=zt("init");t.test(r+n(182))&&e[n(199)](r+n(176))?zt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tt(void 0,(function(){const n=At,t=function(){const n=At;let t;try{t=Function("return (function() "+n(183)+");")()}catch(e){t=window}return t}(),e=t[n(190)]=t.console||{},r=[n(146),"warn",n(142),n(156),n(151),n(173),n(163)];for(let o=0;o<r.length;o++){const t=Tt.constructor[n(160)][n(166)](Tt),i=r[o],a=e[i]||t;t[n(188)]=Tt[n(166)](Tt),t[n(145)]=a[n(145)][n(166)](a),e[i]=t}}))();const Dt=nn({__name:Mt(154),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return fn((()=>{const n=At;if(!r[n(194)])return;if(!o[n(194)])return;r[n(194)][n(184)][n(164)]();const e=(new E)[n(150)](o[n(194)],t[n(143)]),i=new R,a=new A,c=e[n(189)].x-e.min.x,s=e[n(189)].y-e[n(174)].y,u=e[n(189)].z-e[n(174)].z;e[n(200)](i),e[n(201)](a);const l=t[n(161)]?s/2:t.bottom?-s/2:0,f=t.left?-c/2:t[n(171)]?c/2:0,p=t[n(157)]?u/2:t[n(181)]?-u/2:0;r[n(194)][n(148)][n(170)](t[n(144)]||t[n(152)]?0:-i.x+f,t.disable||t[n(187)]?0:-i.y+l,t[n(144)]||t[n(158)]?0:-i.z+p)})),(n,t)=>{const i=At;return rn(),on("TresGroup",{ref_key:"gref",ref:e},[dn("TresGroup",{ref_key:i(197),ref:r},[dn(i(198),{ref_key:i(153),ref:o},[an(n[i(192)],i(162))],512)],512)],512)}}});function zt(n){function t(n){const e=At;if("string"==typeof n)return function(n){}[e(177)]("while (true) {}")[e(179)](e(155));1!==(""+n/n)[e(172)]||n%20==0?function(){return!0}.constructor("debu"+e(202)).call("action"):function(){return!1}[e(177)](e(178)+"gger")[e(179)](e(196)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pt=Ct;function Ot(){const n=["backsideIOR","18271jnEMsK","set","params","default","Vector3","call","backside","1793268GiuVhS","error","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","107579ZAceTs","function *\\( *\\)","table","stateObject","causticsOnly","value","object","trace","console","chain","scene","constructor","test","665800FnpkZT","info","far","3NTBTky","string","#ffffff","ior","lightSource","bind","color","224538sjdzKQ","1431024CWwYJJ","524900sEVwsd","counter","primitive","gger","2190hBJyfX","helper","debu","$slots","intensity","2sonyVp",'{}.constructor("return this")( )',"toString","exception","worldRadius","7eZuheu","apply"];return(Ot=function(){return n})()}function Ct(n,t){const e=Ot();return(Ct=function(n,t){return e[n-=207]})(n,t)}!function(n,t){const e=Ct,r=Ot();for(;;)try{if(132566===-parseInt(e(238))/1*(-parseInt(e(218))/2)+parseInt(e(254))/3*(-parseInt(e(209))/4)+parseInt(e(251))/5+-parseInt(e(207))/6*(-parseInt(e(223))/7)+-parseInt(e(208))/8+-parseInt(e(233))/9+-parseInt(e(213))/10*(-parseInt(e(226))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bt(this,(function(){const n=Ct,t=new RegExp(n(239)),e=new RegExp(n(236),"i"),r=Nt(n(237));t[n(250)](r+n(247))&&e[n(250)](r+"input")?Nt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kt(void 0,(function(){const n=Ct;let t;try{t=Function("return (function() "+n(219)+");")()}catch(o){t=window}const e=t[n(246)]=t[n(246)]||{},r=["log","warn",n(252),n(234),n(221),n(240),n(245)];for(let i=0;i<r.length;i++){const t=kt[n(249)][n(235)][n(259)](kt),o=r[i],a=e[o]||t;t.__proto__=kt[n(259)](kt),t[n(220)]=a[n(220)][n(259)](a),e[o]=t}}))();const Ft=["object"],jt=[Pt(244)],Ut=nn({__name:"index",props:{color:{default:Pt(256)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Pt,e=n,{renderer:r}=W(),o=Sn(r[t(243)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(222)]});o[t(228)][t(232)]=!0;const i=gn(null);J(i,(n=>{n&&o[t(248)].add(n)}));const{onBeforeLoop:a}=V();return a((({elapsed:n})=>{o.update()})),ln((()=>{const n=t;e[n(260)]&&o.params[n(260)].set(e[n(260)]),e[n(257)]&&(o.params[n(257)]=e[n(257)]),e[n(225)]&&(o[n(228)].backsideIOR=e[n(225)]),e[n(253)]&&(o[n(228)].far=e[n(253)]),e[n(222)]&&(o[n(228)][n(222)]=e[n(222)]),e[n(217)]&&(o.params.intensity=e[n(217)])})),J((()=>e.causticsOnly),(n=>{const e=t;o[e(228)][e(242)]=n})),J((()=>e[t(258)]),(n=>{const e=t;n&&o.params[e(258)]instanceof T[e(230)]&&o[e(228)][e(258)][e(227)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return rn(),on(yn,null,[dn("TresGroup",{ref_key:"group",ref:i},[an(n[r(216)],r(229))],512),dn("primitive",{object:Q(o).group,position:[0,.003,0]},null,8,Ft),dn(r(211),{object:Q(o)[r(214)],visible:!1},null,8,jt)],64)}}});function Nt(n){function t(n){const e=Ct;if(typeof n===e(255))return function(n){}[e(249)]("while (true) {}")[e(224)](e(210));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(215)+e(212))[e(231)]("action"):function(){return!1}.constructor(e(215)+e(212))[e(224)](e(241)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Wt,r=Ht();for(;;)try{if(141921===-parseInt(e(144))/1*(parseInt(e(161))/2)+-parseInt(e(177))/3*(parseInt(e(153))/4)+parseInt(e(138))/5+parseInt(e(155))/6+parseInt(e(132))/7*(-parseInt(e(167))/8)+parseInt(e(159))/9+parseInt(e(158))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(127)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["936441JgJbNl","; i++) {\n        vogelSample = vogelDiskSample(j, ","114vOjkXI","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","error","input","toString","table","528UIJpAM","console","gger",'{}.constructor("return this")( )',"#ifdef USE_SHADOWMAP","log","compile","traverse","constructor","call","50949lrcSgW","function *\\( *\\)","debu","bind","warn","stateObject","apply","replace","remove","__proto__","forEach","23793NBHXTY","prototype","length",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","chain","properties","340210MULJCm","; i ++) {\n        offset = (vogelDiskSample(j, ","dispose","test","counter","material","4951cdbLDK","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","#if defined( SHADOWMAP_TYPE_PCF )","while (true) {}","ShaderChunk","shadowmap_pars_fragment","20BIdyfL","action","903894rZBWGy","info","trace","4106370ecxwpU"];return(Ht=function(){return n})()}!function(){Lt(this,(function(){const n=Wt,t=new RegExp(n(178)),e=new RegExp(n(147),"i"),r=$t("init");t[n(141)](r+n(136))&&e[n(141)](r+n(164))?$t():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(127)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zt(void 0,(function(){const n=Wt,t=function(){const n=Wt;let t;try{t=Function("return (function() "+n(170)+");")()}catch(e){t=window}return t}(),e=t[n(168)]=t[n(168)]||{},r=[n(172),n(125),n(156),n(163),"exception",n(166),n(157)];for(let o=0;o<r.length;o++){const t=Zt[n(175)][n(133)][n(124)](Zt),i=r[o],a=e[i]||t;t[n(130)]=Zt[n(124)](Zt),t[n(165)]=a[n(165)][n(124)](a),e[i]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=T[r(151)].shadowmap_pars_fragment;return T[r(151)][r(152)]=T[r(151)].shadowmap_pars_fragment[r(128)](r(171),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(135)+n+r(148)+e+r(139)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(160)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(162)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(128)](r(149),r(145)),(n,t,e)=>{const i=r;T[i(151)][i(152)]=o,function(n,t,e){const r=Wt;t[r(174)]((t=>{const e=r;t.material&&(Array.isArray(t[e(143)])?t[e(143)][e(131)]((t=>{const r=e;n.properties[r(129)](t),t[r(140)]()})):(n[e(137)][e(129)](t[e(143)]),t[e(143)][e(140)]()))})),n.info.programs[r(134)]=0,n[r(173)](t,e)}(n,t,e)}};function Wt(n,t){const e=Ht();return(Wt=function(n,t){return e[n-=124]})(n,t)}function $t(n){function t(n){const e=Wt;if(typeof n===e(146))return function(n){}[e(175)](e(150))[e(127)](e(142));1!==(""+n/n)[e(134)]||n%20==0?function(){return!0}[e(175)](e(179)+e(169))[e(176)](e(154)):function(){return!1}[e(175)]("debu"+e(169))[e(127)](e(126)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Vt(n,t){const e=Kt();return(Vt=function(n,t){return e[n-=245]})(n,t)}const Xt=Vt;!function(n,t){const e=Vt,r=Kt();for(;;)try{if(155895===-parseInt(e(253))/1+parseInt(e(281))/2+parseInt(e(271))/3*(parseInt(e(280))/4)+-parseInt(e(282))/5+-parseInt(e(283))/6*(parseInt(e(254))/7)+parseInt(e(248))/8*(parseInt(e(264))/9)+-parseInt(e(249))/10*(-parseInt(e(278))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Vt,t=new RegExp(n(262)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Qt(n(260));t.test(r+n(252))&&e[n(279)](r+"input")?Qt():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(){const n=["string","trace","counter","bind","305833zFrowz","test","140VtETAl","343724aDlBPS","99030ydoBQS","510hGtJwb","index","dispose","log","table","gger","value","__proto__","1784wKNReJ","70EDMtdb","while (true) {}","console","chain","304993QgsnDD","20720RRkfpZ","action","call","length","prototype","exception","init","warn","function *\\( *\\)","error","4428fZAylm","toString","constructor","return (function() ","info","stateObject","apply","21951rGkOlX","material","debu"];return(Kt=function(){return n})()}qt(void 0,(function(){const n=Vt;let t;try{t=Function(n(267)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(251)]=t[n(251)]||{},r=[n(286),n(261),n(268),n(263),n(259),n(287),n(275)];for(let i=0;i<r[n(257)];i++){const t=qt.constructor[n(258)].bind(qt),o=r[i],a=e[o]||t;t[n(247)]=qt[n(277)](qt),t[n(265)]=a[n(265)][n(277)](a),e[o]=t}}))();const Jt=nn({__name:Xt(284),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Vt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(246)],o[t(246)],e[t(246)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o[t(246)].traverse((n=>{const e=t;n instanceof l&&n[e(272)][e(285)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=Vt;if(typeof n===e(274))return function(n){}[e(266)](e(250))[e(270)](e(276));1!==(""+n/n)[e(257)]||n%20==0?function(){return!0}[e(266)](e(273)+e(245))[e(256)](e(255)):function(){return!1}[e(266)]("debu"+e(245))[e(270)](e(269)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=oe;!function(n,t){const e=oe,r=re();for(;;)try{if(150459===parseInt(e(443))/1+-parseInt(e(433))/2*(-parseInt(e(422))/3)+-parseInt(e(451))/4+-parseInt(e(427))/5*(parseInt(e(424))/6)+-parseInt(e(440))/7*(parseInt(e(420))/8)+parseInt(e(459))/9+parseInt(e(419))/10*(parseInt(e(445))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(449)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){te(this,(function(){const n=oe,t=new RegExp(n(455)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ce("init");t[n(411)](r+n(430))&&e[n(411)](r+n(429))?ce():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(){const n=["function *\\( *\\)","setTexelSize","setResolution","toString","2408382SIyRMG","trace","test","texelSize","copy","warn","return (function() ","gger","colorspace_fragment","bind","40myHdsa","24qBKekr","stateObject","225fgUAkO","action","78nYwOTH","kernel","string","94075eUUgmC","exception","input","chain","debu","set","4090mtSjrf","multiplyScalar","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","while (true) {}","info","log","replace","96894vHJDaN",'{}.constructor("return this")( )',"table","34165LMIGyF","resolution","610654rZTryY","uniforms","constructor","encodings_fragment","apply","console","962456PzteEE","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","value","error"];return(re=function(){return n})()}function oe(n,t){const e=re();return(oe=function(n,t){return e[n-=410]})(n,t)}ee(void 0,(function(){const n=oe;let t;try{t=Function(n(415)+n(441)+");")()}catch(o){t=window}const e=t[n(450)]=t[n(450)]||{},r=[n(438),n(414),n(437),n(454),n(428),n(442),n(410)];for(let i=0;i<r.length;i++){const t=ee[n(447)].prototype[n(418)](ee),o=r[i],a=e[o]||t;t.__proto__=ee[n(418)](ee),t[n(458)]=a[n(458)][n(418)](a),e[o]=t}}))();const ie=parseInt(C[ne(439)](/\D+/g,""));class ae extends D{constructor(n=new P){const t=ne;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new P),texelSize:new z(new P),halfTexelSize:new z(new P),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(435)+t(ie>=154?417:448)+">\n        }",vertexShader:t(452),blending:O,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(456)](n.x,n.y),this[t(425)]=new Float32Array([0,1,2,2,3])}[ne(456)](n,t){const e=ne;this.uniforms[e(412)][e(453)][e(432)](n,t),this[e(446)].halfTexelSize[e(453)][e(432)](n,t)[e(434)](.5)}[ne(457)](n){const t=ne;this[t(446)][t(444)][t(453)][t(413)](n)}}function ce(n){function t(n){const e=oe;if(typeof n===e(426))return function(n){}[e(447)](e(436))[e(449)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(447)](e(431)+e(416)).call(e(423)):function(){return!1}[e(447)](e(431)+e(416))[e(449)](e(421)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function se(){const n=["renderTargetA","714696lofiaM","camera","uniforms","exception","renderToScreen","add","setResolution","minDepthThreshold","table","length","28BuGNJX","apply","renderTargetB","stateObject","gger","chain","2939540sSeWrL","counter","inputBuffer","depthBuffer","setAttribute","depthToBlurRatioBias","2994656pAftqr","value","constructor","render","action","test","6tVrsHv","depthScale","warn","texture","2NnIxJb","9XzSfdv","input","convolutionMaterial","depthTexture","while (true) {}","setRenderTarget","kernel","USE_DEPTH","326679ONEEkD","init","toString","__proto__","620380OIbNye","console","call","position","2501490YNkITE","debu","screen","clone","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","maxDepthThreshold","info","29853472HBTjjH","return (function() ","bind"];return(se=function(){return n})()}!function(n,t){const e=fe,r=se();for(;;)try{if(476417===-parseInt(e(362))/1*(parseInt(e(314))/2)+parseInt(e(310))/3*(-parseInt(e(340))/4)+-parseInt(e(346))/5+-parseInt(e(358))/6*(parseInt(e(352))/7)+parseInt(e(330))/8*(-parseInt(e(302))/9)+parseInt(e(318))/10+parseInt(e(326))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(341)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ue(this,(function(){const n=fe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(323),"i"),r=de(n(311));t[n(357)](r+n(345))&&e.test(r+n(303))?de():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(341)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(n,t){const e=se();return(fe=function(n,t){return e[n-=302]})(n,t)}le(void 0,(function(){const n=fe,t=function(){const n=fe;let t;try{t=Function(n(327)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(315)]||{},r=["log",n(360),n(325),"error",n(333),n(338),"trace"];for(let o=0;o<r[n(339)];o++){const t=le.constructor[n(322)][n(328)](le),i=r[o],a=e[i]||t;t[n(313)]=le[n(328)](le),t.toString=a[n(312)][n(328)](a),e[i]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this[c(334)]=!1,this[c(329)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(329)][c(321)](),this[c(304)]=new ae,this[c(304)].setTexelSize(1/t,1/e),this[c(304)][c(336)](new P(t,e)),this.scene=new u,this[c(331)]=new B,this[c(304)].uniforms[c(337)].value=r,this.convolutionMaterial[c(332)][c(324)][c(353)]=o,this[c(304)][c(332)][c(359)][c(353)]=i,this[c(304)].uniforms[c(351)][c(353)]=a,this[c(304)].defines[c(309)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(350)](c(317),new F(s,3)),p[c(350)]("uv",new F(f,2)),this.screen=new l(p,this[c(304)]),this[c(320)].frustumCulled=!1,this.scene[c(335)](this[c(320)])}render(n,t,e){const r=fe,o=this.scene,i=this.camera,a=this[r(329)],c=this[r(342)],s=this[r(304)],u=s[r(332)];u[r(349)][r(353)]=t[r(305)];const l=s[r(308)];let f,p,d,h=t;for(p=0,d=l[r(339)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(308)].value=l[p],u[r(348)].value=h[r(361)],n[r(307)](f),n.render(o,i),h=f;u[r(308)][r(353)]=l[p],u[r(348)][r(353)]=h.texture,n.setRenderTarget(this[r(334)]?null:e),n[r(355)](o,i)}}function de(n){function t(n){const e=fe;if("string"==typeof n)return function(n){}[e(354)](e(306))[e(341)](e(347));1!==(""+n/n)[e(339)]||n%20==0?function(){return!0}.constructor(e(319)+"gger")[e(316)](e(356)):function(){return!1}[e(354)](e(319)+e(344))[e(341)](e(343)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function he(n,t){var e=_e();return(he=function(n,t){return e[n-=109]})(n,t)}var ve=he;!function(n,t){for(var e=he,r=_e();;)try{if(657287===-parseInt(e(109))/1+parseInt(e(173))/2*(parseInt(e(160))/3)+parseInt(e(186))/4*(-parseInt(e(170))/5)+parseInt(e(152))/6+-parseInt(e(156))/7+-parseInt(e(147))/8*(-parseInt(e(124))/9)+parseInt(e(148))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[he(149)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){me(this,(function(){var n=he,t=new RegExp(n(126)),e=new RegExp(n(161),"i"),r=xe(n(139));t[n(135)](r+n(130))&&e.test(r+n(128))?xe():r("0")}))()}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[he(149)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(){var n=["call","4523904odxWut","mixStrength","replace","warn","181017gVLXjW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","_minDepthThreshold","maxDepthThreshold","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","_distortionMap","mixBlur","_depthToBlurRatioBias","mirror","5nZgLau","USE_UV","trace","38yBCMbj","gger","while (true) {}","distortion","table","onBeforeCompile","uniforms","_depthScale","textureMatrix","tDiffuse","_textureMatrix","counter","constructor","90172jeisbZ","console","_maxDepthThreshold","554005BrthSY","prototype","_blurStrength","string","_tDiffuseBlur","stateObject","exception","depthScale","mixContrast","return (function() ","tDiffuseBlur","distortionMap","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mirror","_mixBlur","9gapaKY","_hasBlur","function *\\( *\\)","setValues","input","value","chain","depthToBlurRatioBias","_mixContrast","hasBlur","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","test","length","toString","tDepth","init","_tDepth","defines","error","info","vertexShader","fragmentShader","__proto__","3185288kKTGUo","617220TJJcyn","apply","minDepthThreshold","bind","1642698fFKGUE","_distortion","_tDiffuse"];return(_e=function(){return n})()}ge(void 0,(function(){for(var n=he,t=function(){var n,t=he;try{n=Function(t(118)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t.console=t[n(187)]||{},r=["log",n(159),n(143),n(142),n(115),n(177),n(172)],o=0;o<r[n(136)];o++){var i=ge[n(185)][n(110)][n(151)](ge),a=r[o],c=e[a]||i;i[n(146)]=ge[n(151)](ge),i[n(137)]=c[n(137)].bind(c),e[a]=i}}))();class ye extends j{constructor(n={}){var t=he;super(n),this[t(140)]={value:null},this[t(166)]={value:null},this[t(154)]={value:null},this[t(113)]={value:null},this[t(183)]={value:null},this._hasBlur={value:!1},this[t(122)]={value:0},this[t(123)]={value:0},this._blurStrength={value:.5},this[t(163)]={value:.9},this[t(188)]={value:1},this[t(180)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(153)]={value:1},this[t(132)]={value:1},this[t(127)](n)}[ve(178)](n){var t,e=ve;!(null==(t=n.defines)?void 0:t[e(171)])&&(n[e(141)][e(171)]=""),n[e(179)].hasBlur=this._hasBlur,n.uniforms.tDiffuse=this[e(154)],n[e(179)][e(138)]=this[e(140)],n[e(179)][e(120)]=this[e(166)],n.uniforms[e(119)]=this[e(113)],n[e(179)][e(181)]=this[e(183)],n[e(179)][e(169)]=this._mirror,n[e(179)][e(167)]=this[e(123)],n[e(179)][e(157)]=this[e(111)],n[e(179)].minDepthThreshold=this[e(163)],n.uniforms[e(164)]=this[e(188)],n[e(179)][e(116)]=this[e(180)],n[e(179)][e(131)]=this[e(168)],n.uniforms.distortion=this[e(153)],n[e(179)].mixContrast=this[e(132)],n[e(144)]=e(134)+n.vertexShader,n.vertexShader=n.vertexShader[e(158)]("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader=e(165)+n.fragmentShader,n[e(145)]=n[e(145)].replace("#include <emissivemap_fragment>",e(121))}get[ve(182)](){return this._tDiffuse.value}set[ve(182)](n){var t=ve;this[t(154)][t(129)]=n}get tDepth(){return this[ve(140)].value}set[ve(138)](n){var t=ve;this[t(140)][t(129)]=n}get distortionMap(){return this[ve(166)].value}set[ve(120)](n){this._distortionMap.value=n}get tDiffuseBlur(){return this._tDiffuseBlur.value}set[ve(119)](n){var t=ve;this[t(113)][t(129)]=n}get[ve(181)](){return this._textureMatrix.value}set[ve(181)](n){var t=ve;this[t(183)][t(129)]=n}get hasBlur(){var n=ve;return this[n(125)][n(129)]}set[ve(133)](n){this[ve(125)].value=n}get[ve(169)](){var n=ve;return this[n(122)][n(129)]}set[ve(169)](n){var t=ve;this._mirror[t(129)]=n}get[ve(167)](){var n=ve;return this[n(123)][n(129)]}set mixBlur(n){var t=ve;this[t(123)][t(129)]=n}get[ve(157)](){var n=ve;return this._blurStrength[n(129)]}set mixStrength(n){var t=ve;this[t(111)][t(129)]=n}get minDepthThreshold(){var n=ve;return this._minDepthThreshold[n(129)]}set[ve(150)](n){var t=ve;this[t(163)][t(129)]=n}get maxDepthThreshold(){var n=ve;return this[n(188)][n(129)]}set[ve(164)](n){var t=ve;this[t(188)][t(129)]=n}get[ve(116)](){return this[ve(180)].value}set depthScale(n){this[ve(180)].value=n}get[ve(131)](){var n=ve;return this._depthToBlurRatioBias[n(129)]}set[ve(131)](n){var t=ve;this[t(168)][t(129)]=n}get[ve(176)](){return this[ve(153)].value}set distortion(n){var t=ve;this[t(153)][t(129)]=n}get[ve(117)](){var n=ve;return this[n(132)][n(129)]}set mixContrast(n){var t=ve;this[t(132)][t(129)]=n}}function xe(n){function t(n){var e=he;if(typeof n===e(112))return function(n){}[e(185)](e(175))[e(149)](e(184));1!==(""+n/n).length||n%20==0?function(){return!0}[e(185)](e(162)+e(174))[e(155)]("action"):function(){return!1}[e(185)](e(162)+e(174))[e(149)](e(114)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Ee;function be(){const n=["add","1405638opqjDv","TresMeshReflectorMaterial","autoClear","far","texture-matrix","matrixWorld","assign","visible","enabled","mirror","exception","clipPlane","min-depth-threshold","elements","__proto__","reflectorWorldPosition","lookAt","test","distortionMap","shadowMap","uuid","110ctygTx","projectionMatrix","input","defines-USE_BLUR","defines-USE_DISTORTION","setRenderTarget","return (function() ","clear","extractRotation","cameraWorldPosition","init","364UMPVsY","dispose","86vJCOyf","error","rotationMatrix","bind","updateMatrixWorld","material","applyMatrix4","46545zPldIM","10289056lobcFv","console","toString","distortion","traverse","multiply","texture","value","target","call","setFromMatrixPosition","view","reflectorPlane","matrixWorldInverse","chain","4230ieWugJ","action","243828nrZFvX","depthTexture","apply","setFromNormalAndCoplanarPoint","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","gger","subVectors","normal","position","copy","65aHCSxC","dot","autoUpdate","lookAtPosition","t-depth","constructor","defines-USE_DEPTH","reflect","while (true) {}","stateObject","warn","depth-to-blur-ratio-bias","length","virtualCamera","depth-scale","string","counter","negate","set","materialRef","render","t-diffuse","sign","mix-strength","7838793hXyKuI","has-blur","78150RfDjMu","table","textureMatrix"];return(be=function(){return n})()}!function(n,t){const e=Ee,r=be();for(;;)try{if(740985===-parseInt(e(228))/1+-parseInt(e(262))/2*(-parseInt(e(269))/3)+-parseInt(e(287))/4*(parseInt(e(298))/5)+-parseInt(e(285))/6*(-parseInt(e(260))/7)+parseInt(e(270))/8+parseInt(e(222))/9+-parseInt(e(224))/10*(-parseInt(e(249))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){we(this,(function(){const n=Ee,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(291),"i"),r=Ae(n(259));t[n(245)](r+n(284))&&e[n(245)](r+n(251))?Ae():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Se(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(255)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(271)]=t[n(271)]||{},r=[n(292),n(308),"info",n(263),n(238),n(225),"trace"];for(let o=0;o<r[n(310)];o++){const t=Se[n(303)].prototype[n(265)](Se),i=r[o],a=e[i]||t;t[n(242)]=Se[n(265)](Se),t[n(272)]=a[n(272)][n(265)](a),e[i]=t}}))();const Me=[Ie(232),Ie(237),Ie(219),Ie(302),"t-diffuse-blur",Ie(223),Ie(221),Ie(240),"max-depth-threshold",Ie(312),Ie(309),Ie(273),Ie(246),"mix-contrast",Ie(252),Ie(304),Ie(253)];function Ee(n,t){const e=be();return(Ee=function(n,t){return e[n-=213]})(n,t)}const Re=nn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:S,extend:M}=W();M({MeshReflectorMaterial:ye});const E=gn(),A=gn(),T=gn(),D=gn(),z=K((()=>{const n=Ee;return"number"==typeof f[n(277)]?[f[n(277)],f.value]:f[n(277)]})),P=K((()=>z[r(277)][0]>0||z[r(277)][1]>0)),O={reflectorPlane:new U,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new N,lookAtPosition:new R(0,0,-1),clipPlane:new L,view:new R,target:new R,q:new L,virtualCamera:new H,textureMatrix:new N};ln((()=>{var n;const o=r;null==(n=E[o(277)])||n[o(276)][o(261)]();const f={minFilter:b,magFilter:b,type:h};var y,x;E.value=new I(i[o(277)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(277)],i[o(277)],Z,G)},t(y,e(x)))),A[o(277)]=new I(i.value,i.value,f),T.value=new pe({resolution:i[o(277)],width:z[o(277)][0],height:z.value[1],minDepthThreshold:a[o(277)],maxDepthThreshold:s[o(277)],depthScale:u[o(277)],depthToBlurRatioBias:l[o(277)]}),D[o(277)]={mirror:p,textureMatrix:O[o(226)],mixBlur:d,tDiffuse:E.value[o(276)],tDepth:E[o(277)][o(288)],tDiffuseBlur:E.value.texture,hasBlur:P,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(277)],mixContrast:_,"defines-USE_BLUR":P[o(277)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const C=gn(),{onLoop:B}=V();B((()=>{var n;const t=r;if(!(C.value&&S.value&&E[t(277)]&&y[t(277)]))return;const e=function(n,t){const e=Ee;let r;return n[e(274)]((n=>{const o=e;n.isMesh&&n[o(267)]&&n[o(267)][o(248)]===t&&(r=n)})),r}(x[t(277)],C[t(277)][t(248)]);if(!e)return;e[t(235)]=!1;const i=S[t(277)].xr[t(236)],a=S[t(277)].shadowMap.autoUpdate;(function(n){var t,e;const r=Ee;if(O[r(243)][r(280)](n[r(233)]),O[r(258)][r(280)](null==(t=y[r(277)])?void 0:t.matrixWorld),O[r(264)].extractRotation(n[r(233)]),O[r(295)][r(216)](0,0,1),O[r(295)][r(268)](O.rotationMatrix),O[r(243)].addScaledVector(O[r(295)],o.reflectorOffset),O.view.subVectors(O[r(243)],O[r(258)]),O[r(281)][r(299)](O[r(295)])>0)return;O[r(281)][r(305)](O[r(295)])[r(215)](),O[r(281)][r(227)](O[r(243)]),O[r(264)][r(257)](null==(e=y[r(277)])?void 0:e[r(233)]),O.lookAtPosition[r(216)](0,0,-1),O.lookAtPosition[r(268)](O.rotationMatrix),O[r(301)].add(O[r(258)]),O.target[r(294)](O[r(243)],O[r(301)]),O.target[r(305)](O[r(295)])[r(215)](),O[r(278)][r(227)](O[r(243)]),O[r(311)][r(296)][r(297)](O[r(281)]),O[r(311)].up[r(216)](0,1,0),O.virtualCamera.up[r(268)](O[r(264)]),O[r(311)].up[r(305)](O[r(295)]),O.virtualCamera[r(244)](O[r(278)]),O.virtualCamera[r(231)]=(null==y?void 0:y[r(277)])[r(231)],O.virtualCamera[r(266)](),O.virtualCamera.projectionMatrix[r(297)]((null==y?void 0:y[r(277)])[r(250)]),O[r(226)][r(216)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[r(226)][r(275)](O.virtualCamera[r(250)]),O[r(226)].multiply(O[r(311)].matrixWorldInverse),O[r(226)][r(275)](n[r(233)]),O.reflectorPlane[r(290)](O[r(295)],O[r(243)]),O[r(282)][r(268)](O[r(311)][r(283)]),O[r(239)][r(216)](O[r(282)].normal.x,O[r(282)].normal.y,O.reflectorPlane[r(295)].z,O[r(282)].constant);const i=O[r(311)].projectionMatrix;O.q.x=(Math[r(220)](O.clipPlane.x)+i[r(241)][8])/i[r(241)][0],O.q.y=(Math.sign(O.clipPlane.y)+i.elements[9])/i[r(241)][5],O.q.z=-1,O.q.w=(1+i[r(241)][10])/i.elements[14],O[r(239)].multiplyScalar(2/O[r(239)][r(299)](O.q)),i[r(241)][2]=O[r(239)].x,i[r(241)][6]=O[r(239)].y,i.elements[10]=O[r(239)].z+1,i[r(241)][14]=O[r(239)].w})(e),S[t(277)].shadowMap[t(300)]=!1,S[t(277)].setRenderTarget(E[t(277)]),S[t(277)][t(230)]||S[t(277)][t(256)](),S[t(277)].render(x[t(277)],O[t(311)]),null==(n=null==T?void 0:T[t(277)])||n[t(218)](S.value,E[t(277)],A[t(277)]),S[t(277)].xr.enabled=i,S[t(277)][t(247)][t(300)]=a,e[t(235)]=!0,S[t(277)][t(254)](null)}));const k=xn(),F=K((()=>{const n=r,t={};return Object[n(234)](t,o),Object.assign(t,k[n(277)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==E?void 0:E[e(277)])||n[e(261)](),null==(t=null==A?void 0:A[e(277)])||t[e(261)]()})),(n,t)=>{var e,o,i;const c=r;return rn(),on(c(229),In({key:"key"+D[c(277)][c(252)]+D[c(277)][c(304)]+D[c(277)][c(253)],ref_key:c(217),ref:C},F.value,{"texture-matrix":O[c(226)],mirror:Q(p),"t-diffuse":null==(e=E[c(277)])?void 0:e.texture,"t-depth":null==(o=E.value)?void 0:o.depthTexture,"t-diffuse-blur":null==(i=A[c(277)])?void 0:i[c(276)],"has-blur":P[c(277)],"mix-strength":Q(v),"min-depth-threshold":Q(a),"max-depth-threshold":Q(s),"depth-scale":Q(u),"depth-to-blur-ratio-bias":Q(l),distortion:Q(m),distortionMap:Q(g),"mix-contrast":Q(_),"defines-USE_BLUR":P[c(277)]?"":void 0,"defines-USE_DEPTH":Q(u)>0?"":void 0,"defines-USE_DISTORTION":Q(g)?"":void 0}),null,16,Me)}}});function Ae(n){function t(n){const e=Ee;if(typeof n===e(213))return function(n){}[e(303)](e(306)).apply(e(214));1!==(""+n/n).length||n%20==0?function(){return!0}[e(303)]("debu"+e(293))[e(279)](e(286)):function(){return!1}[e(303)]("debu"+e(293)).apply(e(307)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Te(n,t){const e=ze();return(Te=function(n,t){return e[n-=182]})(n,t)}!function(n,t){const e=Te,r=ze();for(;;)try{if(577265===parseInt(e(199))/1+-parseInt(e(188))/2+parseInt(e(206))/3*(parseInt(e(216))/4)+parseInt(e(207))/5+parseInt(e(223))/6+parseInt(e(218))/7+parseInt(e(198))/8*(-parseInt(e(187))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(){const n=["counter","type","9cayaqE","5407755GzYuDN","fog","update","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","apply","test",'{}.constructor("return this")( )',"return (function() ","565264NADLRP","warn","1215655efIgQJ","debu","exception","gger","length","3850356jLcUKJ","toString","background","console","__proto__","info","18kwPHNL","1294750rUuVpj","string","texture","while (true) {}","function *\\( *\\)","bind","constructor","log","error","value","5819992WIqqFY","358748heNzVt","stateObject","dispose","CubeCamera","prototype"];return(ze=function(){return n})()}!function(){De(this,(function(){const n=Te,t=new RegExp(n(192)),e=new RegExp(n(210),"i"),r=Oe("init");t[n(213)](r+"chain")&&e[n(213)](r+"input")?Oe():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(212)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(n){function t(n){const e=Te;if(typeof n===e(189))return function(n){}[e(194)](e(191))[e(212)](e(204));1!==(""+n/n)[e(222)]||n%20==0?function(){return!0}[e(194)](e(219)+e(221)).call("action"):function(){return!1}[e(194)]("debugger")[e(212)](e(200)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ce(n,t){const e=Ue();return(Ce=function(n,t){return e[n-=286]})(n,t)}Pe(void 0,(function(){const n=Te,t=function(){const n=Te;let t;try{t=Function(n(215)+n(214)+");")()}catch(e){t=window}return t}(),e=t[n(184)]=t[n(184)]||{},r=[n(195),n(217),n(186),n(196),n(220),n(211),"trace"];for(let o=0;o<r.length;o++){const t=Pe[n(194)][n(203)][n(193)](Pe),i=r[o],a=e[i]||t;t[n(185)]=Pe[n(193)](Pe),t[n(182)]=a.toString.bind(a),e[i]=t}}))();const Be=Ce;!function(n,t){const e=Ce,r=Ue();for(;;)try{if(820434===-parseInt(e(304))/1*(parseInt(e(307))/2)+-parseInt(e(290))/3*(-parseInt(e(329))/4)+-parseInt(e(291))/5+parseInt(e(318))/6+-parseInt(e(326))/7*(parseInt(e(328))/8)+parseInt(e(330))/9+parseInt(e(286))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(311)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Ce,t=new RegExp(n(314)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le(n(310));t[n(293)](r+n(309))&&e[n(293)](r+n(324))?Le():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(311)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fe(void 0,(function(){const n=Ce;let t;try{t=Function(n(327)+n(332)+");")()}catch(o){t=window}const e=t.console=t[n(301)]||{},r=[n(295),"warn","info",n(315),n(325),"table",n(299)];for(let i=0;i<r.length;i++){const t=Fe[n(321)].prototype[n(316)](Fe),o=r[i],a=e[o]||t;t[n(302)]=Fe[n(316)](Fe),t[n(288)]=a[n(288)].bind(a),e[o]=t}}))();const je=[Be(331)];function Ue(){const n=["19038450wtbiCt","texture","toString","stateObject","11655iuoONO","2908880sNdbBd","primitive","test","value","log","default","gger","frames","trace","resolution","console","__proto__","call","1031947iofRZw","fog","action","2NECnOX","rgRef","chain","init","apply","counter","envMap","function *\\( *\\)","error","bind","length","753108XZeOOB","visible","near","constructor","debu","while (true) {}","input","exception","165991atsAYa","return (function() ","376sXdrrb","940iWETPR","5456970qCOqKB","object",'{}.constructor("return this")( )'];return(Ue=function(){return n})()}const Ne=nn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return J((()=>s),(n=>{var t;const e=Te;null==(t=c[e(197)])||t[e(201)](),c[e(197)]=new v(n[e(197)]),c.value[e(190)][e(205)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Te;e&&(f[r(197)]=new(T[r(202)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;null==(n=c[Te(197)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Te;p=a.value[t(208)],d=a.value[t(183)],a.value[t(183)]=r||d,a.value[t(208)]=o||p,null==(n=f.value)||n[t(209)](i[t(197)],a[t(197)]),a.value[t(208)]=p,a[t(197)].background=d}}}({resolution:o[r(300)],near:o[r(320)],far:o.far,envMap:o[r(313)],fog:o[r(305)]}),{onBeforeLoop:s}=V();let u=0;const l=q(null);return s((()=>{const n=r;l[n(294)]&&(o[n(298)]===1/0||u<o[n(298)])&&(l[n(294)][n(319)]=!1,c(),l[n(294)][n(319)]=!0,u++)})),t({texture:null==(e=i[r(294)])?void 0:e[r(287)]}),(n,t)=>{const e=r;return rn(),on("TresGroup",null,[dn(e(292),{object:Q(a)},null,8,je),dn("TresGroup",{ref_key:e(308),ref:l},[an(n.$slots,e(296))],512)])}}});function Le(n){function t(n){const e=Ce;if("string"==typeof n)return function(n){}[e(321)](e(323)).apply(e(312));1!==(""+n/n)[e(317)]||n%20==0?function(){return!0}[e(321)](e(322)+e(297))[e(303)](e(306)):function(){return!1}[e(321)](e(322)+"gger")[e(311)](e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=We();for(;;)try{if(828761===-parseInt(e(275))/1*(parseInt(e(300))/2)+-parseInt(e(292))/3+-parseInt(e(286))/4*(parseInt(e(281))/5)+-parseInt(e(266))/6+-parseInt(e(309))/7+parseInt(e(303))/8*(-parseInt(e(268))/9)+parseInt(e(267))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Ge,t=new RegExp(n(265)),e=new RegExp(n(282),"i"),r=Ve(n(289));t.test(r+n(296))&&e[n(293)](r+"input")?Ve():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=We();return(Ge=function(n,t){return e[n-=265]})(n,t)}function We(){const n=["length","value","counter","118669uTdzTy","trace","log","__proto__","MathUtils","debu","275955GqOqZb","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","ShaderMaterial",'{}.constructor("return this")( )',"76IAytYE","warn","toString","init","apply","reduce","1889766onQjfW","test","constructor","generateUUID","chain","UniformsUtils","exception","console","16UzRkli","bind","uniforms","462872cFxjim","call","info","while (true) {}","gger","string","10319092rdAIEo","key","return (function() ","function *\\( *\\)","4078356IyAfKS","67098670fFvNss","171fNLtlh","assign","entries","error"];return(We=function(){return n})()}function $e(n,t,e,r){const o=Ge,i=class extends T[o(284)]{constructor(i={}){const a=o,s=Object[a(270)](n);super({uniforms:s[a(291)](((n,[t,e])=>{const r=T[a(297)].clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(310)]="",s.forEach((([n])=>Object.defineProperty(this,n,{get:()=>this[a(302)][n][a(273)],set:t=>this[a(302)][n][a(273)]=t}))),Object[a(269)](this,i),r&&r(this)}};return i[o(310)]=T[o(279)][o(295)](),i}function Ve(n){function t(n){const e=Ge;if(typeof n===e(308))return function(n){}.constructor(e(306))[e(290)](e(274));1!==(""+n/n)[e(272)]||n%20==0?function(){return!0}[e(294)](e(280)+e(307))[e(304)]("action"):function(){return!1}.constructor(e(280)+e(307))[e(290)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Ge,t=function(){const n=Ge;let t;try{t=Function(n(311)+n(285)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(299)]||{},r=[n(277),n(287),n(305),n(271),n(298),"table",n(276)];for(let o=0;o<r.length;o++){const t=Ze[n(294)][n(283)][n(301)](Ze),i=r[o],a=e[i]||t;t[n(278)]=Ze[n(301)](Ze),t[n(288)]=a[n(288)][n(301)](a),e[i]=t}}))();var Xe=Dr;!function(n,t){for(var e=Dr,r=nr();;)try{if(958636===-parseInt(e(364))/1*(-parseInt(e(414))/2)+-parseInt(e(242))/3*(-parseInt(e(238))/4)+parseInt(e(384))/5+parseInt(e(309))/6+-parseInt(e(304))/7*(-parseInt(e(343))/8)+-parseInt(e(227))/9*(-parseInt(e(315))/10)+parseInt(e(412))/11*(-parseInt(e(361))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dr(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){var n=Dr,t=new RegExp(n(255)),e=new RegExp(n(402),"i"),r=Pr("init");t[n(386)](r+n(221))&&e[n(386)](r+n(236))?Pr():r("0")}))()}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dr(302)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n){var t=Dr,e=function(n,t){var e=Dr;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(220)]];if(void 0!==r){var o=r[e(332)](n,t||"default");if(typeof o!==e(289))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(359)?String:Number)(n)}(n,t(359));return typeof e===t(265)?e:String(e)}function Je(n,t,e){return(t=Ke(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=Dr,r=Object.keys(n);if(Object[e(411)]){var o=Object[e(411)](n);t&&(o=o[e(319)]((function(t){var r=e;return Object[r(276)](n,t)[r(286)]}))),r.push[e(302)](r,o)}return r}function nr(){var n=["csm_PositionRaw","update","construct","csm_ClearcoatRoughness","split","onBeforeCompile","ShadowMaterial","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","emissive","uniforms","forEach","MeshMatcapMaterial","csm_Roughness","_getPatchMapForMaterial","roughness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","csm_AO","assign","MeshDepthMaterial","slice","\n    varying mat4 csm_internal_vModelViewMatrix;\n","keys","cacheKey","\n    gl_Position = ","getOwnPropertySymbols","1274911OFYZDc","ShaderChunk","1442184BYuayh","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","clone","\n    vec3 objectNormal = ","// #_CSM_#","\n    \n            ",'CSM: Property "',"void main()","configurable",". Shader cannot compile.","csm_Emissive","toPrimitive","chain","__csm","depthAlpha","getPrototypeOf","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","_getMaterialDefine","126kTkids",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","length","ShaderMaterial","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","isArray","substring","trim","\n    gl_PointSize = ","input",'{}.constructor("return this")( )',"12PmAcEy","toString","prototype","instanceID","277557WDuAEn","MeshLambertMaterial","fragmentShader","replace","\\$&","table","\n    \n","\n    vec3 transformed = ","return (function() ","undefined","includes","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","csm_Normal","function *\\( *\\)","key","#define IS_VERTEX;\n","csm_ClearcoatNormal","csm_main_","position","\n    vec3 totalEmissiveRadiance = ","this hasn't been initialised - super() hasn't been called","defineProperties","error","symbol","defineProperty","csm_Bump","diffuse","bump","#define IS_UNKNOWN;\n","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","baseMaterial","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","fragColor","lights_physical_fragment","getOwnPropertyDescriptor","next","clearcoatNormal","gger","MeshPhysicalMaterial","_generateMaterial","from","type",";\n  ","message","enumerable","clearcoat","counter","object",", 1.0 );\n  ","setPrototypeOf","Object","value","isAlreadyExtended","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","positionRaw","iterator","csm_FragColor"," );\n    ",";\n    ","set","apply","push","21JiKxiv","Derived constructors may only return object or undefined","log","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","clearcoatRoughness","1616088lAGldw","propertyIsEnumerable","void main() {","function","cacheHash","MathUtils","242410oUnIIC","console","info","indexOf","filter","trace","_patchShader","bind","material.clearcoat = ","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","();\n              // #_CSM_#\n          ","CSM: ","material.clearcoatRoughness = ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","csm_DiffuseColor","@@iterator","Material","call","is not a constructor",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","CustomShaderMaterial does not support RawShaderMaterial","customProgramCacheKey","MeshBasicMaterial","constructor","normal","getOwnPropertyDescriptors","while (true) {}","Map","656696VxqLzA","PointsMaterial","MeshStandardMaterial","\n            ","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","__proto__","\n    gl_FragColor = ","MeshNormalMaterial","csm_Position","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n            \n            void main() {\n          ","csm_Clearcoat","sham","metalness","find","Arguments","string","csm_DepthAlpha","108dRCzJM","silent",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","1foKwXW","Set","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","csm_Metalness","\n    #include <dithering_fragment>\n    gl_FragColor  = ","MeshToonMaterial","_getCacheHash","debu","MeshPhongMaterial","name","entries","RawShaderMaterial","pointSize","concat","\n    #include <color_fragment>\n    diffuseColor = ","generateUUID","patchMap","vertexShader","valueOf","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","740565cygKRj","Cannot call a class as a function","test"];return(nr=function(){return n})()}function tr(n){for(var t=Dr,e=1;e<arguments[t(229)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(397)]((function(t){Je(n,t,r[t])})):Object[t(340)]?Object[t(263)](n,Object.getOwnPropertyDescriptors(r)):Qe(Object(r))[t(397)]((function(e){var o=t;Object[o(266)](n,e,Object[o(276)](r,e))}))}return n}function er(n,t){var e=Dr;if(null==n)return{};var r,o,i=function(n,t){var e=Dr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(229)];o++)r=a[o],t[e(318)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(411)]){var a=Object[e(411)](n);for(o=0;o<a[e(229)];o++)r=a[o],t[e(318)](r)>=0||Object.prototype[e(310)][e(332)](n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=Dr;(null==t||t>n[e(229)])&&(t=n[e(229)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array[Dr(232)](n))return n}(n)||function(n,t){var e=Dr,r=null==n?null:e(251)!=typeof Symbol&&n[Symbol[e(297)]]||n[e(330)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(332)](n))[e(277)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s[e(303)](o[e(293)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Dr;if(n){if(typeof n===e(359))return rr(n,t);var r=Object[e(240)].toString.call(n)[e(406)](8,-1);return r===e(292)&&n[e(338)]&&(r=n.constructor[e(373)]),r===e(342)||r===e(365)?Array[e(282)](n):r===e(358)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(386)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(n,t){for(var e=Dr,r=0;r<t[e(229)];r++){var o=t[r];o[e(286)]=o.enumerable||!1,o[e(422)]=!0,e(293)in o&&(o.writable=!0),Object[e(266)](n,Ke(o[e(256)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError(Dr(262));return n}function cr(n,t){var e=Dr;return(cr=Object[e(291)]?Object[e(291)][e(322)]():function(n,t){return n[e(348)]=t,n})(n,t)}function sr(n){var t=Dr;return(sr=Object[t(291)]?Object[t(224)][t(322)]():function(n){var e=t;return n[e(348)]||Object[e(224)](n)})(n)}function ur(n){var t=function(){var n=Dr;if("undefined"==typeof Reflect||!Reflect[n(389)])return!1;if(Reflect[n(389)][n(355)])return!1;if(typeof Proxy===n(312))return!0;try{return Boolean[n(240)][n(382)].call(Reflect[n(389)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Dr,o=sr(n);if(t){var i=sr(this)[r(338)];e=Reflect[r(389)](o,arguments,i)}else e=o[r(302)](this,arguments);return function(n,t){var e=Dr;if(t&&(typeof t===e(289)||typeof t===e(312)))return t;if(void 0!==t)throw new TypeError(e(305));return ar(n)}(this,e)}}qe(void 0,(function(){for(var n=Dr,t=function(){var n,t=Dr;try{n=Function(t(250)+t(237)+");")()}catch(e){n=window}return n}(),e=t[n(316)]=t[n(316)]||{},r=[n(306),"warn",n(317),n(264),"exception",n(247),n(320)],o=0;o<r[n(229)];o++){var i=qe.constructor[n(240)].bind(qe),a=r[o],c=e[a]||i;i[n(348)]=qe[n(322)](qe),i[n(239)]=c.toString[n(322)](c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:Xe(329),normal:Xe(254),roughness:Xe(399),metalness:Xe(367),emissive:Xe(424),ao:Xe(403),bump:Xe(267),clearcoat:Xe(354),clearcoatRoughness:Xe(390),clearcoatNormal:Xe(258),pointSize:"csm_PointSize",fragColor:Xe(298),depthAlpha:Xe(360),position:Xe(351),positionRaw:Xe(387)},hr=(Je(lr={},""[Xe(377)](dr[Xe(260)]),"*"),Je(lr,""[Xe(377)](dr.positionRaw),"*"),Je(lr,""[Xe(377)](dr[Xe(339)]),"*"),Je(lr,""[Xe(377)](dr[Xe(376)]),[Xe(344)]),Je(lr,""[Xe(377)](dr[Xe(268)]),"*"),Je(lr,"".concat(dr[Xe(274)]),"*"),Je(lr,""[Xe(377)](dr[Xe(395)]),[Xe(345),Xe(280)]),Je(lr,""[Xe(377)](dr.roughness),["MeshStandardMaterial",Xe(280)]),Je(lr,""[Xe(377)](dr[Xe(356)]),[Xe(345),"MeshPhysicalMaterial"]),Je(lr,"".concat(dr.ao),["MeshStandardMaterial",Xe(280),Xe(337),Xe(243),Xe(372),Xe(369)]),Je(lr,""[Xe(377)](dr.bump),[Xe(243),Xe(398),Xe(350),Xe(372),Xe(280),"MeshStandardMaterial",Xe(369),Xe(393)]),Je(lr,""[Xe(377)](dr[Xe(223)]),[Xe(405)]),Je(lr,"".concat(dr.clearcoat),[Xe(280)]),Je(lr,"".concat(dr[Xe(308)]),[Xe(280)]),Je(lr,"".concat(dr[Xe(278)]),[Xe(280)]),lr),vr={"#include <lights_physical_fragment>":T[Xe(413)][Xe(275)]},mr=(Je(fr={},""[Xe(377)](dr[Xe(339)]),{"#include <beginnormal_vertex>":Xe(417).concat(dr[Xe(339)],Xe(334))}),Je(fr,"".concat(dr.position),{"#include <begin_vertex>":Xe(249)[Xe(377)](dr[Xe(260)],Xe(284))}),Je(fr,""[Xe(377)](dr.positionRaw),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Xe(377)](dr[Xe(296)],Xe(363))}),Je(fr,""[Xe(377)](dr[Xe(376)]),{"gl_PointSize = size;":Xe(235).concat(dr.pointSize,Xe(300))}),Je(fr,"".concat(dr.diffuse),{"#include <color_fragment>":Xe(378).concat(dr[Xe(268)],Xe(284))}),Je(fr,""[Xe(377)](dr[Xe(274)]),{"#include <dithering_fragment>":Xe(368)[Xe(377)](dr.fragColor,Xe(284))}),Je(fr,""[Xe(377)](dr[Xe(395)]),{"vec3 totalEmissiveRadiance = emissive;":Xe(261)[Xe(377)](dr[Xe(395)],";\n    ")}),Je(fr,"".concat(dr.roughness),{"#include <roughnessmap_fragment>":Xe(253).concat(dr[Xe(401)],Xe(300))}),Je(fr,""[Xe(377)](dr[Xe(356)]),{"#include <metalnessmap_fragment>":Xe(352)[Xe(377)](dr[Xe(356)],";\n    ")}),Je(fr,"".concat(dr.ao),{"#include <aomap_fragment>":Xe(366)[Xe(377)](dr.ao,Xe(300))}),Je(fr,""[Xe(377)](dr[Xe(269)]),{"#include <normal_fragment_maps>":Xe(273).concat(dr.bump," - (dot(")[Xe(377)](dr.bump,Xe(228))}),Je(fr,""[Xe(377)](dr[Xe(223)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Xe(394)[Xe(377)](dr.depthAlpha,Xe(299)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[Xe(377)](dr[Xe(223)],Xe(300))}),Je(fr,"".concat(dr[Xe(287)]),{"material.clearcoat = clearcoat;":Xe(323).concat(dr[Xe(287)],";")}),Je(fr,""[Xe(377)](dr[Xe(308)]),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(327).concat(dr[Xe(308)],";")}),Je(fr,""[Xe(377)](dr[Xe(278)]),{"#include <clearcoat_normal_fragment_begin>":Xe(415)}),fr),gr=(Je(pr={},""[Xe(377)](dr[Xe(260)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(328).concat(dr.position,Xe(290))}),Je(pr,""[Xe(377)](dr[Xe(296)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(410)[Xe(377)](dr[Xe(260)],";\n  ")}),Je(pr,""[Xe(377)](dr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(349)[Xe(377)](dr.diffuse,";\n  ")}),Je(pr,""[Xe(377)](dr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(dr[Xe(274)],Xe(284))}),pr),_r={clearcoat:[dr[Xe(287)],dr[Xe(278)],dr.clearcoatRoughness]},yr=Xe(271),xr=Xe(231),Ir=Xe(407),br=Xe(324),wr=Xe(407),Sr=Xe(248),Mr=[Xe(272),Xe(244),Xe(381),Xe(396),"patchMap",Xe(409),Xe(362)],Er=function(n,t,e){return n[Xe(391)](t).join(e)},Rr=function(n,t){var e,r;return new RegExp("\\b"[Xe(377)]((e=t,r=Xe,e[r(245)](/[-\/\\^$*+?.()|[\]{}]/g,r(246))),"\\b")).test(n)};function Ar(n){return n?n[Xe(245)](/\s/g,""):void 0}function Tr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}function Dr(n,t){var e=nr();return(Dr=function(n,t){return e[n-=220]})(n,t)}var zr=function(n){var t=Xe;!function(n,t){var e=Dr;if(typeof t!==e(312)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(240)]=Object.create(t&&t[e(240)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,e(240),{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=ur(c);function c(n){var t,e,r,o,i,s=Dr,u=n.baseMaterial,l=n[s(244)],f=n.vertexShader,p=n[s(396)],d=n[s(380)],h=n[s(409)],v=n[s(362)],m=er(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Dr(385))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(285)].indexOf(t(333))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(283)]===s(375))throw new Error(s(335));(function(n,t){var e=Xe;e(229),Object[e(404)](n,t);var r=Object[e(224)](t);Object[e(374)](Object[e(340)](r))[e(319)]((function(n){var t=e,r=typeof n[1].get===t(312),o=typeof n[1][t(301)]===t(312),i=typeof n[1].value===t(312),a=n[0]===t(338);return(r||o||i)&&!a}))[e(397)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(266)](n,t[0],t[1])}))})(ar(t=a[s(332)](this)),e),t[s(222)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(314)][s(379)](),type:e[s(283)],isAlreadyExtended:(r=e[s(392)],o=Xe,i=r[o(239)]()[o(234)](),!(0===i[o(233)](i[o(318)]("{")+1,i.lastIndexOf("}"))[o(234)]().length)),cacheHash:"",silent:v},t.uniforms=tr(tr({},t[s(396)]||{}),p||{});var g=t.__csm,_=g[s(244)],y=g[s(381)],x=t.uniforms;return t.__csm[s(313)]=t[s(370)](),t[s(281)](_,y,x),t}return e=c,r=[{key:t(388),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(396)]=e[n(396)]||this[n(396)],Object.assign(this.__csm,e);var r=this[n(222)],o=r[n(244)],i=r[n(381)],a=this[n(396)],c=this[n(370)]();this.__csm[n(313)]=c,this._generateMaterial(o,i,a)}},{key:t(416),value:function(){var n=t,e={baseMaterial:this[n(222)][n(272)],fragmentShader:this[n(222)][n(244)],vertexShader:this[n(222)][n(381)],uniforms:this[n(396)],silent:this[n(222)][n(362)],patchMap:this[n(222)][n(380)],cacheKey:this[n(222)].cacheKey},r=new(this[n(338)])(e);return Object[n(404)](this,r),r}},{key:t(370),value:function(){var n=t,e=this[n(222)],r=e.fragmentShader,o=e[n(381)],i=this[n(396)],a=[Ar(r),Ar(o),i][n(319)]((function(n){return void 0!==n}));return a[n(229)]>0?Mn(a,{excludeValues:!0}):this[n(336)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(336)]=function(){var n=o;return i[n(222)][n(313)]};var a=function(t){var r=o;try{var a=i[r(226)]();if(n){var c=i[r(321)](Tr(n),t[r(244)],!0);t[r(244)]=a+c}if(e){var s=i[r(321)](Tr(e),t[r(381)]);t[r(381)]=r(257)+s,t.vertexShader=a+t[r(381)]}t[r(396)]=tr(tr({},t[r(396)]),i[r(396)]),i[r(396)]=t.uniforms}catch(u){console[r(264)](u)}};if(this[o(222)][o(294)]){var c=this.onBeforeCompile;this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(392)]=a;this.needsUpdate=!0}},{key:t(321),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(400)]()),this.__csm[o(380)]);Object.entries(_r)[o(397)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(357)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error(e(420).concat(a,'" is required to use output "').concat(c,'". Shader cannot compile.'))})),Object[o(374)](vr)[o(397)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(408)](c)[o(397)]((function(t){var e=o;Object[e(408)](c[t])[e(397)]((function(r){var o=e,s=hr[t],u=i[o(222)].type;if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s[o(252)](u)||"*"===s))throw new Error(o(326)[o(377)](t," is not available in ").concat(u,o(423)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(259)+this[o(222)][o(241)][o(245)](/-/g,"_"),h=n[o(245)](/void\s+main\s*\(\s*\)/g,"void "[o(377)](d,"()")),v=n[o(252)](o(421)),m=a[o(252)](o(418));return v&&(m&&this[o(222)][o(294)]?(a=a[o(245)](o(311),o(346)[o(377)](h,o(353))),s=a,u=o(418),l=o(346)[o(377)](d,"();\n            // #_CSM_#\n          "),f=Xe,p=s.lastIndexOf(u),a=-1===p?s:s.substring(0,p)+l+s[f(233)](p+u.length)):a=a[o(245)]("void main() {",o(347)[o(377)](r?wr:Ir,o(225))[o(377)](yr,o(419))[o(377)](h,o(295))[o(377)](xr,o(383))[o(377)](r?Sr:br,o(307))[o(377)](d,o(325)))),a}},{key:t(226),value:function(){var n=t,e=this[n(222)][n(283)];return e?"#define IS_"[n(377)](e.toUpperCase(),";\n"):n(270)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this.__csm[n(283)]===n(230)?gr:mr}}],i=Dr,r&&ir(e[i(240)],r),o&&ir(e,o),Object.defineProperty(e,i(240),{writable:!1}),c}(T[Xe(331)]);function Pr(n){function t(n){var e=Dr;if(typeof n===e(359))return function(n){}[e(338)](e(341))[e(302)](e(288));1!==(""+n/n)[e(229)]||n%20==0?function(){return!0}[e(338)]("debu"+e(279))[e(332)]("action"):function(){return!1}[e(338)](e(371)+e(279))[e(302)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=jr;!function(n,t){const e=jr,r=Ur();for(;;)try{if(845659===parseInt(e(295))/1*(parseInt(e(324))/2)+parseInt(e(298))/3*(parseInt(e(301))/4)+-parseInt(e(296))/5*(-parseInt(e(306))/6)+-parseInt(e(287))/7+-parseInt(e(325))/8*(parseInt(e(293))/9)+parseInt(e(309))/10*(parseInt(e(286))/11)+-parseInt(e(300))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cr(this,(function(){const n=jr,t=new RegExp(n(320)),e=new RegExp(n(315),"i"),r=Nr(n(285));t.test(r+n(302))&&e[n(328)](r+n(303))?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(319)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=jr,t=function(){const n=jr;let t;try{t=Function(n(312)+n(283)+");")()}catch(e){t=window}return t}(),e=t[n(313)]=t[n(313)]||{},r=[n(294),"warn",n(292),n(284),"exception",n(289),n(322)];for(let o=0;o<r[n(297)];o++){const t=Br[n(311)][n(321)][n(308)](Br),i=r[o],a=e[i]||t;t.__proto__=Br[n(308)](Br),t[n(299)]=a[n(299)][n(308)](a),e[i]=t}}))();const kr=["object"],Fr=nn({__name:Or(314),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:T[t(323)],metalness:e[t(310)],roughness:e[t(290)],clearcoat:e[t(327)],clearcoatRoughness:e[t(282)],color:e[t(331)],vertexShader:t(304),fragmentShader:t(318)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(288)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(305)},o=new zr(r);return ln((()=>{const n=t;o.color[n(316)](e[n(331)]),o[n(310)]=e[n(310)],o[n(290)]=e[n(290)],o[n(327)]=e.clearcoat,o[n(282)]=e[n(282)]})),(n,e)=>{const r=t;return rn(),on(r(317),{object:Q(o)},null,8,kr)}}});function jr(n,t){const e=Ur();return(jr=function(n,t){return e[n-=281]})(n,t)}function Ur(){const n=["primitive","\n\t\t\t","apply","function *\\( *\\)","prototype","trace","MeshPhysicalMaterial","3248094uwMTNI","3034216ibQWwF","call","clearcoat","test","stateObject","debu","color","gger","clearcoatRoughness",'{}.constructor("return this")( )',"error","init","825vdooXB","6784785fJQwEx","\n      ","table","roughness","string","info","9hnwXPk","log","1LcAAev","35620qXwAWw","length","538884eWcpqt","toString","27514500MTpJKE","4UgxwLW","chain","input","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","1104ZGiUyN","counter","bind","183010oornaz","metalness","constructor","return (function() ","console","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setStyle"];return(Ur=function(){return n})()}function Nr(n){function t(n){const e=jr;if(typeof n===e(291))return function(n){}[e(311)]("while (true) {}")[e(319)](e(307));1!==(""+n/n)[e(297)]||n%20==0?function(){return!0}.constructor(e(330)+"gger")[e(326)]("action"):function(){return!1}[e(311)]("debu"+e(281))[e(319)](e(329)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Zr();;)try{if(852479===parseInt(e(378))/1*(parseInt(e(369))/2)+parseInt(e(368))/3*(parseInt(e(384))/4)+parseInt(e(365))/5*(-parseInt(e(382))/6)+-parseInt(e(387))/7*(parseInt(e(367))/8)+parseInt(e(383))/9*(parseInt(e(357))/10)+parseInt(e(363))/11+-parseInt(e(361))/12*(parseInt(e(362))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Gr,t=new RegExp(n(376)),e=new RegExp(n(358),"i"),r=Wr(n(379));t.test(r+"chain")&&e[n(388)](r+n(389))?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["stateObject","261509meiKmt","init","bind","call","555252PXhZPy","5175lNhxJa","2125380CAvNqK","debu","action","35gNswYX","test","input","table","__proto__",'{}.constructor("return this")( )',"constructor","9340zkZrpv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","console","12nIhach","14392911klDXuX","16342722hjsWDI","prototype","20ASItTH","counter","1614128SDcISd","3fgwnES","6ByZYto","apply","gger","length","error","return (function() ","trace","function *\\( *\\)"];return(Zr=function(){return n})()}function Gr(n,t){var e=Zr();return(Gr=function(n,t){return e[n-=355]})(n,t)}function Wr(n){function t(n){var e=Gr;if("string"==typeof n)return function(n){}.constructor(e(359))[e(370)](e(366));1!==(""+n/n)[e(372)]||n%20==0?function(){return!0}[e(356)](e(385)+e(371))[e(381)](e(386)):function(){return!1}[e(356)](e(385)+"gger")[e(370)](e(377)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Gr;try{n=Function(t(374)+t(355)+");")()}catch(s){n=window}for(var e=n[t(360)]=n[t(360)]||{},r=["log","warn","info",t(373),"exception",t(390),t(375)],o=0;o<r.length;o++){var i=Hr.constructor[t(364)][t(380)](Hr),a=r[o],c=e[a]||i;i[t(391)]=Hr[t(380)](Hr),i.toString=c.toString[t(380)](c),e[a]=i}}))();export{$e as C,Fr as _,Jn as a,ut as b,wt as c,Dt as d,Ut as e,Jt as f,Ne as g,Re as h,vt as u};

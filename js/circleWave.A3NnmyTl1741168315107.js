import{e as n,a as t,o as e}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{P as o}from"./tweakpane.yDiyAAkA1741168315107.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3Qut_-XR1741168315107.js";import{_ as a,a0 as s,aX as c,C as i}from"./three.FxqAALWt1741168315107.js";import{d as u,b as l,a3 as f,r as p,a2 as v,o as d,H as m,N as g,aj as h,ak as w,e as k,f as y,g as S,j as _,u as I,al as C,m as b}from"./@vue.NRI7TcgI1741168315107.js";import"./postprocessing.hfy6Kqg11741168315107.js";import"./@vueuse.Z8xAfE_A1741168315107.js";import"./all.three.hCBbh0t71741168315107.js";import"./oimophysics.x0jH7fze1741168315107.js";const x=D;!function(n,t){const e=D,o=M();for(;;)try{if(850148===-parseInt(e(513))/1*(parseInt(e(504))/2)+parseInt(e(492))/3*(parseInt(e(534))/4)+parseInt(e(531))/5+parseInt(e(526))/6+-parseInt(e(495))/7+-parseInt(e(510))/8*(-parseInt(e(497))/9)+-parseInt(e(536))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const T=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){T(this,(function(){const n=D,t=new RegExp(n(503)),e=new RegExp(n(500),"i"),o=W(n(523));t[n(530)](o+n(533))&&e[n(530)](o+n(532))?W():o("0")}))()}();const j=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[D(528)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(){const n=["rotation-x","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ffffff","while (true) {}","function *\\( *\\)","18XNCRaF","log","call","debu","console","RepeatWrapping","312TmqKfO","Color","material","143614VuRlyB","wrapT","TresPlaneGeometry","uScanColor","tmRef","uTime","\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n","scale","toString","string","init","bind","exception","9420126DSeLcJ","counter","apply","uniforms","test","1579775xjLlel","input","chain","52WTtvro","error","4717210mrHQhm","stateObject","table","TresMesh","constructor","warn","speed","shaderCircleWave","#000000","color","wrapS","value","gger","194343LSJEMa","colorDark","return (function() ","5785759VDfltT","action","164493AJAejS"];return(M=function(){return n})()}function D(n,t){const e=M();return(D=function(n,t){return e[n-=482]})(n,t)}j(void 0,(function(){const n=D,t=function(){const n=D;let t;try{t=Function(n(494)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(508)]=t[n(508)]||{},o=[n(505),n(484),"info",n(535),n(525),n(538),"trace"];for(let r=0;r<o.length;r++){const t=j[n(483)].prototype.bind(j),a=o[r],s=e[a]||t;t.__proto__=j[n(524)](j),t[n(521)]=s[n(521)][n(524)](s),e[a]=t}}))();const P=[x(498),x(520)],R=u({__name:x(486),props:{color:{default:x(501)},colorDark:{default:x(487)},speed:{default:1},scale:{default:2}},async setup(e){const o=x;let r,u;const k=e,y=l(),{onLoop:S}=n();S((({delta:n})=>{const t=D;y[t(490)]&&(y[t(490)][t(512)].uniforms[t(518)][t(490)]+=n*k[t(485)])}));const _=([r,u]=f((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,u(),r);_[o(489)]=a[o(509)],_[o(514)]=a[o(509)];const I=p({side:s,transparent:!0,blending:c,flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:_},uScanColor:{type:"v3",value:new(a[o(511)])(k[o(488)])},uScanColorDark:{type:"v3",value:new i(k[o(493)])}},vertexShader:"\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n",fragmentShader:o(519)});return v((()=>{const n=o;y.value&&(y.value[n(512)][n(529)][n(516)][n(490)]=new(a[n(511)])(k[n(488)]),y.value[n(512)][n(529)].uScanColorDark[n(490)]=new(a[n(511)])(k.colorDark))})),(n,t)=>{const e=o;return d(),m(e(482),{ref_key:e(517),ref:y,"rotation-x":-Math.PI/2,scale:n[e(520)]},[t[0]||(t[0]=g(e(515),{args:[1,1]},null,-1)),g("TresShaderMaterial",h(w(I)),null,16)],8,P)}}});function W(n){function t(n){const e=D;if(typeof n===e(522))return function(n){}[e(483)](e(502)).apply(e(527));1!==(""+n/n)[e(499)]||n%20==0?function(){return!0}[e(483)]("debu"+e(491))[e(506)](e(496)):function(){return!1}[e(483)](e(507)+"gger")[e(528)](e(537)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const E=z;!function(n,t){const e=z,o=F();for(;;)try{if(684947===parseInt(e(447))/1*(-parseInt(e(449))/2)+-parseInt(e(407))/3*(-parseInt(e(442))/4)+-parseInt(e(427))/5*(parseInt(e(448))/6)+parseInt(e(438))/7*(-parseInt(e(425))/8)+-parseInt(e(416))/9+parseInt(e(411))/10*(-parseInt(e(433))/11)+-parseInt(e(441))/12*(-parseInt(e(417))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const O=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(408)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function z(n,t){const e=F();return(z=function(n,t){return e[n-=407]})(n,t)}!function(){O(this,(function(){const n=z,t=new RegExp(n(428)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=Z(n(439));t[n(455)](o+n(429))&&e[n(455)](o+n(418))?Z():o("0")}))()}();const A=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function F(){const n=["bind","圈渐变色","8953nmiVvI","init","call","5628eEEqwz","1280072fFFatY","return (function() ","#ffffff","prototype",'{}.constructor("return this")( )',"1630mhTZYn","267468WsfbTu","1202ybpgFr","length","table","debu","string","圈颜色","test","action","speed","6gEHsNw","apply","circleWave","__proto__","1254710chaayp","#201919","stateObject","gger","console","6606576vkPSOH","93613CJsZEn","input","TresCanvas","constructor","while (true) {}","scale","color","addBinding","1440eVoonf","trace","15szYCBl","function *\\( *\\)","chain","shaderCircleWave地面","#000000","counter","110YnVZUg","error","toString"];return(F=function(){return n})()}A(void 0,(function(){const n=z;let t;try{t=Function(n(443)+n(446)+");")()}catch(r){t=window}const e=t[n(415)]=t[n(415)]||{},o=["log","warn","info",n(434),"exception",n(451),n(426)];for(let a=0;a<o.length;a++){const t=A[n(420)][n(445)][n(436)](A),r=o[a],s=e[r]||t;t[n(410)]=A.bind(A),t[n(435)]=s[n(435)][n(436)](s),e[r]=t}}))();const V=u({__name:E(409),setup(n){const t=E,a=p({reflectivity:.1,showGridHelper:!1,scale:1}),s=p({color:t(444),colorDark:t(431),speed:1,scale:2}),c=new o({title:t(430),expanded:!0});return c.addBinding(s,t(423),{label:t(454)}),c[t(424)](s,"colorDark",{label:t(437)}),c.addBinding(s,t(457),{label:"速度",min:.1,max:5,step:.1}),c.addBinding(s,t(422),{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const c=t,i=k(c(419));return d(),y(i,{clearColor:c(412),"window-size":""},{default:S((()=>[o[0]||(o[0]=g("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),_(I(e),{enableDamping:""}),o[1]||(o[1]=g("TresAmbientLight",{intensity:6},null,-1)),(d(),y(C,null,{default:S((()=>[_(R,h(w(s)),null,16)])),_:1})),(d(),y(C,null,{default:S((()=>[_(r,b({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function Z(n){function t(n){const e=z;if(typeof n===e(453))return function(n){}[e(420)](e(421))[e(408)](e(432));1!==(""+n/n)[e(450)]||n%20==0?function(){return!0}[e(420)](e(452)+e(414))[e(440)](e(456)):function(){return!1}[e(420)](e(452)+e(414))[e(408)](e(413)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{V as default};

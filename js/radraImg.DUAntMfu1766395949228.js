import{F as e,K as a}from"./@tresjs.DsQAOGDv1766395949228.js";import{$ as t,p as s,e as o}from"./three-tile.GG029K-G1766395949228.js";import{s as r,c as i,a as n,i as p}from"./informationDiv.Vyes7t_y1766395949228.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang._TNQgLqd1766395949228.js";import"./Resource.DyrQXsrT1766395949228.js";import{u as l}from"./useTexture.CF9cs5am1766395949228.js";import"./three-custom-shader-material.VjTva5tI1766395949228.js";import{d as m,ac as c,w as u,G as d,o as h,u as g,I as f,r as j,a as y,F as v,b as _,e as b,h as x,m as w,ah as S,g as T,a9 as I,aa as D}from"./@vue.BxPWGdWw1766395949228.js";import{c1 as P,a6 as B,z as M,V as k}from"./three.F31Lz30M1766395949228.js";import{P as z}from"./tweakpane.CqZAnw7f1766395949228.js";import"./postprocessing.Rj820gp21766395949228.js";import"./@vueuse.D_OASVSl1766395949228.js";/* empty css                                                                                    */import"./@fesjs.Bl8X3Cus1766395949228.js";import"./vue-router.DKbpfuaB1766395949228.js";import"./lodash-es.DWe8oqPO1766395949228.js";import"./pinia.00k7dVzH1766395949228.js";import"./@qlin.y-0Z8WnK1766395949228.js";import"./@babel.BPq7uOAK1766395949228.js";import"./@floating-ui.Bhq4ibgf1766395949228.js";import"./@juggle.Vc7cP4_P1766395949228.js";import"./object-hash.dpls2F2R1766395949228.js";import"./@amap.fjyZdsU91766395949228.js";import"./jszip.4nkwO7EE1766395949228.js";const C=["position"],G=["scale","material","rotateX","position-y"],L=m({__name:"radraImgShow",props:{map:{},height:{default:100},opacity:{default:.6}},async setup(e){let a,t;const s=e,o=new P({displacementMap:new M,transparent:!0,side:B,opacity:s.opacity,displacementScale:.5,displacementBias:0});o.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * displacementScale + displacementBias );")};const i=s.map.geo2pos(new k(105,34,0));i.applyMatrix4(s.map.matrix);const n=r(s.map,{x:67,y:11},{x:140,y:57},1e3*s.height),p=[];for(let r=0;r<9;r++)p.push(`https://opensource.cdn.icegl.cn/images/simpleGIS/QPFRef_202405311${r}40.png`);let m=0;const j=([a,t]=c(()=>l(p)),a=await a,t(),a);o.map=j[m],u(()=>[s.color,s.opacity],([e,a])=>{o.opacity=a});let y=null,v=!1;return v?(clearInterval(y),y=null,v=!1):(y=setInterval(()=>{m=m<p.length-1?m+1:0,o.map=j[m],o.needsUpdate=!0,console.log(m)},1e3),v=!0),(e,a)=>(h(),d("TresGroup",{position:[...g(i)]},[f("TresMesh",{scale:[g(n).x,g(n).y,1e3*e.height],material:g(o),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[f("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,G)],8,C))}}),F=["object"],W="pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",A=m({__name:"mapBoxShow3",setup(a){const r=j({height:200,opacity:1}),p=new z({title:"参数"});p.addBinding(r,"height",{label:"高度",min:10,max:300,step:1}),p.addBinding(r,"opacity",{label:"透明度",min:0,max:1,step:.1}),new t({token:W,dataType:"image",style:"mapbox.satellite"}),new t({token:W,dataType:"terrain-rgb",style:"mapbox.terrain-rgb",maxLevel:15});const l=new s({imgSource:[new o({style:"6"}),new o({style:"8"})],lon0:90,minLevel:2,maxLevel:20});l.rotateX(-Math.PI/2);const m=new k(105,34,0),c=new k(110,0,1e7),T=l.localToWorld(l.geo2map(m)),I=l.localToWorld(l.geo2map(c)),D=y(),{camera:P,controls:B,scene:M,renderer:C}=e();return P.value&&P.value.position.copy(I),u(()=>B.value,e=>{e&&(e.target.copy(T),i(e,P.value,M.value))}),u(()=>D.value,e=>{e&&e.target.position.copy(T)}),n(P.value,C.domElement,l),(e,a)=>(h(),d(v,null,[f("TresDirectionalLight",{ref_key:"tdLight",ref:D,position:[0,2e3,1e3],intensity:1},null,512),f("primitive",{object:g(l)},null,8,F),(h(),_(S,null,{default:b(()=>[x(L,w({map:g(l)},r),null,16,["map"])]),_:1}))],64))}}),N=m({__name:"radraImg",setup(e){const t=j({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=j({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,o)=>{const r=T("TresCanvas");return h(),d(v,null,[x(r,w(t,{"window-size":""}),{default:b(()=>[o[0]||(o[0]=f("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:4e10},null,-1)),x(g(a),I(D(s)),null,16),o[1]||(o[1]=f("TresAmbientLight",{intensity:1},null,-1)),x(A)]),_:1},16),x(p)],64)}}});export{N as default};

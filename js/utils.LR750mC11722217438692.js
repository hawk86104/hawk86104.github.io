import"./@fesjs.oJOSvSTI1722217438692.js";import{_ as n}from"./jszip.FHAQs96M1722217438692.js";import{F as t}from"./file-saver.OLU46n0N1722217438692.js";import{cy as e,a6 as s,aJ as o}from"./three.ej3u8izI1722217438692.js";function r(n,t){const e=i();return(r=function(n,t){return e[n-=202]})(n,t)}const a=r;!function(n,t){const e=r,s=i();for(;;)try{if(372740===-parseInt(e(281))/1+parseInt(e(301))/2+parseInt(e(291))/3*(-parseInt(e(278))/4)+-parseInt(e(271))/5*(parseInt(e(218))/6)+-parseInt(e(294))/7+parseInt(e(228))/8+parseInt(e(207))/9)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const c=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function i(){const n=["console","__proto__","data:","files","loadAsync","enabled","result","length","error",";base64,","push","base64","PNG","type",'{}.constructor("return this")( )',"chain","config.zip","data:image/webp;base64,","forEach","file","trace","115vfxhHP","pop","非标准文件：不存在 app.json","JPEG","image/jpeg","slice","readAsDataURL","56dpvVNu","BufferGeometry","data","159306mSiTvV","message","data:image/gif;base64,","load","onloadend","constructor","data:image/png;base64,",".json","uuid","prototype","50517aWkdRz","application/octet-stream","url:geometries/","5054602blZClD","substring","data:image/GIF;base64,","split","url:","startsWith","generateAsync","343360MaYyOA","return (function() ","log","images","data:image/PNG;base64,","image/gif","onerror","apply","bind","16993800GvyeBP","url:images/","function *\\( *\\)","data:image/jpeg;base64,","then","gger","stringify","table","image/bmp","action","image/webp","173358MYfpQb","geometries","get","scene","data:image/JPEG;base64,","string","app.json","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","url","counter","756296onDljB","folder","call","toString","info","name","while (true) {}","setResponseType","parse","toUpperCase","toLowerCase","data:image/WEBP;base64,","FileLoader","blob","async","input","test","warn","image/png","init","data:image/","WEBP"];return(i=function(){return n})()}!function(){c(this,(function(){const n=r,t=new RegExp(n(209)),e=new RegExp(n(225),"i"),s=y(n(247));t[n(244)](s+n(265))&&e[n(244)](s+n(243))?y():s("0")}))()}();const u=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[r(205)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function l(n){const t=a,e=new(s[t(240)]);return new Promise(((s,o)=>{const r=t;e.load(n,(n=>s(JSON[r(236)](n))),void 0,(n=>o(n)))}))}async function f(n){const t=a,e=new(s[t(240)]);return new Promise(((s,o)=>{const r=t;e[r(235)](r(241)),e[r(284)](n,(t=>{const e=r,c=new FileReader;c[e(285)]=()=>{const t=e,o=function(n){const t=a,e=n.split(".")[t(272)]()[t(238)]();return{jpg:t(275),jpeg:t(275),png:t(246),gif:t(203),bmp:t(215),webp:t(217)}[e]||t(292)}(n),r=c[t(256)].split(",")[1];s(t(252)+o+t(259)+r)},c[e(204)]=n=>{o(n)},c[e(277)](t)}),void 0,(n=>o(n)))}))}u(void 0,(function(){const n=r,t=function(){const n=r;let t;try{t=Function(n(302)+n(264)+");")()}catch(e){t=window}return t}(),e=t[n(250)]=t.console||{},s=[n(303),n(245),n(232),"error","exception",n(214),n(270)];for(let o=0;o<s[n(257)];o++){const t=u[n(286)][n(290)][n(206)](u),r=s[o],a=e[r]||t;t[n(251)]=u.bind(u),t[n(231)]=a[n(231)][n(206)](a),e[r]=t}}))(),e[a(255)]=!0;const p=t=>{const e=a,s=new o;return s[e(235)]("blob"),new Promise(((o,r)=>{s[e(284)](t,(async t=>{o(await n.loadAsync(t))}),void 0,(n=>r(n)))}))},g=n=>{const t=a,e=n[t(295)](0,15),s=t(210),o=t(222),r=t(287),c=t(202),i=t(283),u=t(296),l=t(267),f=t(239);return s[t(299)](e)||o[t(299)](e)?t(274):r[t(299)](e)||c[t(299)](e)?t(262):i[t(299)](e)||u[t(299)](e)?"GIF":l[t(299)](e||f[t(299)](e))?t(249):"Unknown"},d=e=>{const s=a,o=[];e.scene[s(219)]&&e[s(221)][s(219)][s(268)]((n=>{const t=s;n[t(263)]===t(279)&&(o[t(260)]({uuid:n[t(289)],data:n[t(280)]}),n[t(280)]=t(293)+n.uuid+t(288))}));const r=[];e.scene.images&&e.scene.images[s(268)]((n=>{const t=s;n.url&&(r.push({uuid:n.uuid,url:n[t(226)]}),n[t(226)][t(263)]?n.url=t(208)+n[t(289)]+"."+n.url[t(263)]+".json":n[t(226)]="url:images/"+n.uuid+"."+g(n[t(226)]))}));const c=new n;if(o[s(257)]){const n=c.folder(s(219));o.forEach((t=>{const e=s;n.file(t[e(289)]+".json",JSON[e(213)](t.data))}))}if(r[s(257)]){const n=c[s(229)](s(304));r.forEach((t=>{const e=s;t.url[e(263)]?n.file(t.uuid+"."+t[e(226)][e(263)]+e(288),JSON[e(213)](t[e(226)])):n[e(269)](t[e(289)]+"."+g(t.url),t[e(226)][e(297)](e(259))[e(272)](),{base64:!0})}))}const i=JSON[s(213)](e);return c[s(269)](s(224),i),c[s(300)]({type:s(241)}).then((n=>{const e=s;t.saveAs(n,e(266))}))},m=(n,t,e)=>{const s=a;n[s(219)]<=0&&n[s(304)]<=0&&e(t)},b=(t,e)=>{const s=a;let o=null;return n[s(254)](t)[s(211)]((n=>{const t=s;n[t(253)][t(224)]?n.files[t(224)][t(242)](t(223))[t(211)]((s=>{var r,c;const i=t;o=JSON[i(236)](s);const u=(n=>{var t,e;const s=a,o={geometries:0,images:0};return null==(t=n[s(221)].geometries)||t[s(268)]((n=>{const t=s;n[t(280)][t(299)](t(298))&&o[t(219)]++})),null==(e=n.scene[s(304)])||e[s(268)]((n=>{const t=s;n.url[t(299)](t(298))&&o[t(304)]++})),o})(o);m(u,o,e),null==(r=o.scene[i(219)])||r[i(268)]((t=>{const s=i;t[s(280)][s(299)](s(298))&&n.files[t[s(280)].slice(4)][s(242)](s(223))[s(211)]((n=>{const r=s;t[r(280)]=JSON.parse(n),u[r(219)]--,m(u,o,e)}))})),null==(c=o.scene[i(304)])||c[i(268)]((t=>{const s=i;if(t.url[s(299)](s(298))){const r=t[s(226)][s(276)](4);r.endsWith(s(288))?n[s(253)][r][s(242)]("string")[s(211)]((n=>{const r=s;t[r(226)]=JSON[r(236)](n),u[r(304)]--,m(u,o,e)})):n.files[r].async(s(261))[s(211)]((n=>{const a=s,c=r[a(297)]("."),i=c[c[a(257)]-1][a(237)]();t[a(226)]=a(248)+i+a(259)+n,u[a(304)]--,m(u,o,e)}))}}))})):console.error(t(273))}),(n=>{const e=s;console[e(258)](t[e(233)]+": "+n[e(282)])})),o};function y(n){function t(n){const e=r;if(typeof n===e(223))return function(n){}.constructor(e(234)).apply(e(227));1!==(""+n/n)[e(257)]||n%20==0?function(){return!0}[e(286)]("debu"+e(212))[e(230)](e(216)):function(){return!1}.constructor("debu"+e(212))[e(205)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{p as a,f as b,d as e,g,b as i,l};

var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Gb__Qx-y1736160428509.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.NEfY280X1736160428509.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.OmKZXs_e1736160428509.js";import{k as o,U as s,C as l,m as c,W as u,bk as p,h as f,_ as v,M as x,A as m,V as w,av as h}from"./three.rmsIv-u_1736160428509.js";import{m as g,e as d}from"./@tresjs.8MtVPQyb1736160428509.js";import{u as y}from"./index.er1mwMyA1736160428509.js";import{F as S,C as _}from"./three-stdlib.MDmepMCW1736160428509.js";import{d as P}from"./@vue.4u_eOGex1736160428509.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.5qYCEkqW1736160428509.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.TnTPNj2i1736160428509.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.YtuzXWEt1736160428509.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.p-vnqqOj1736160428509.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.8zE_avPN1736160428509.js";const z=E;!function(t,e){const n=E,i=I();for(;;)try{if(847158===-parseInt(n(391))/1*(parseInt(n(384))/2)+parseInt(n(402))/3*(-parseInt(n(414))/4)+-parseInt(n(401))/5+parseInt(n(400))/6*(parseInt(n(416))/7)+parseInt(n(406))/8+-parseInt(n(410))/9*(-parseInt(n(403))/10)+parseInt(n(411))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[E(405)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function I(){const t=['\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"debu","warn","gger","constructor","table","6564nBRFQG","4431910ZeYvoO","3FNPAsQ","900QixFVX","test","apply","6814752qHiUsd","init","function *\\( *\\)","return (function() ","89307daRbxf","2329954XdLfWq","string","log","989080VcmLGL","error","6587fGQZRc","action","console","18792PVKeTK","while (true) {}","bind","input","toString","chain","length","107jnyEgi","trace",'{}.constructor("return this")( )'];return(I=function(){return t})()}!function(){b(this,(function(){const t=E,e=new RegExp(t(408)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=L(t(407));e.test(i+t(389))&&n[t(404)](i+t(387))?L():i("0")}))()}();const M=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[E(405)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function E(t,e){const n=I();return(E=function(t,e){return n[t-=383]})(t,e)}M(void 0,(function(){const t=E,e=function(){const t=E;let e;try{e=Function(t(409)+t(393)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(383)]||{},i=[t(413),t(396),"info",t(415),"exception",t(399),t(392)];for(let r=0;r<i.length;r++){const e=M[t(398)].prototype[t(386)](M),a=i[r],o=n[a]||e;e.__proto__=M[t(386)](M),e[t(388)]=o[t(388)][t(386)](o),n[a]=e}}))();const A=z(394);function L(t){function e(t){const n=E;if(typeof t===n(412))return function(t){}[n(398)](n(385))[n(405)]("counter");1!==(""+t/t)[n(390)]||t%20==0?function(){return!0}[n(398)](n(395)+n(397)).call(n(417)):function(){return!1}[n(398)](n(395)+n(397)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=j;!function(t,e){const n=j,i=O();for(;;)try{if(623104===parseInt(n(160))/1*(parseInt(n(169))/2)+parseInt(n(170))/3+-parseInt(n(150))/4+parseInt(n(149))/5*(parseInt(n(180))/6)+parseInt(n(151))/7*(parseInt(n(167))/8)+parseInt(n(177))/9+-parseInt(n(155))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const U=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[j(165)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function j(t,e){const n=O();return(j=function(t,e){return n[t-=148]})(t,e)}!function(){U(this,(function(){const t=j,e=new RegExp(t(178)),n=new RegExp(t(187),"i"),i=k("init");e[t(174)](i+t(164))&&n[t(174)](i+t(189))?k():i("0")}))()}();const T=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[j(165)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function O(){const t=["451728DDnPNO","constructor","debu","stateObject","chain","apply","log","8JgCcBv",'{}.constructor("return this")( )',"4fmxcpH","3196788nfObGa","while (true) {}","bind","toString","test","uniforms","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","4410954sExTSR","function *\\( *\\)","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","2298GGeGPR","console","__proto__","trace","call","string","clone","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","input","prototype","length","defines","10720loYLCh","3800696ZworvQ","2603937oGfHxt","info","counter","gger","20790230BkvwRt","exception","return (function() ","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","action"];return(O=function(){return t})()}function V(t){const e=j,n=a({},t);return e(148)in t&&(n[e(148)]=a({},t[e(148)])),"uniforms"in t&&(n.uniforms=s[e(186)](t[e(175)])),n}T(void 0,(function(){const t=j,e=function(){const t=j;let e;try{e=Function(t(157)+t(168)+");")()}catch(n){e=window}return e}(),n=e[t(181)]=e.console||{},i=[t(166),t(188),t(152),"error",t(156),"table",t(183)];for(let r=0;r<i[t(191)];r++){const e=T[t(161)][t(190)][t(172)](T),a=i[r],o=n[a]||e;e[t(182)]=T.bind(T),e[t(173)]=o.toString[t(172)](o),n[a]=e}}))();const R={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:D(176),fragmentShader:D(158)+A+D(179)};function k(t){function e(t){const n=j;if(typeof t===n(185))return function(t){}[n(161)](n(171)).apply(n(153));1!==(""+t/t)[n(191)]||t%20==0?function(){return!0}[n(161)](n(162)+n(154))[n(184)](n(159)):function(){return!1}[n(161)](n(162)+n(154))[n(165)](n(163)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=H;!function(t,e){const n=H,i=Q();for(;;)try{if(609962===parseInt(n(419))/1*(-parseInt(n(422))/2)+parseInt(n(398))/3*(-parseInt(n(379))/4)+-parseInt(n(429))/5*(parseInt(n(397))/6)+parseInt(n(414))/7+parseInt(n(394))/8+parseInt(n(365))/9*(parseInt(n(431))/10)+parseInt(n(360))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[H(377)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){C(this,(function(){const t=H,e=new RegExp(t(378)),n=new RegExp(t(373),"i"),i=X("init");e[t(434)](i+t(405))&&n[t(434)](i+t(367))?X():i("0")}))()}();const N=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[H(377)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Q(){const t=["5HWClKe","string","280110WJtWiG","magFilter","texture","test","render","setRenderTarget","14005178dgyjfL","height","setSize","tDiffuse","image","171IcGzPT","gger","input","dispose","setViewOffset","_mipQuad","autoClear","getClearColor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","Y_IS_EVEN","__proto__","apply","function *\\( *\\)","4opCuvU","debu","table","parentMapSize","return (function() ","copy","floor","material","call","stateObject","forEach","value","exception","width","map","2994936zqekTk","log","constructor","713634dQqRoa","3070641MvcMcU","counter","fragmentShader","X_IS_EVEN","bind","_copyQuad","length","chain","camera","toString","info","uniforms","minFilter","while (true) {}","setClearAlpha","getClearAlpha","5125841uUgDyo","parentLevel","clear","_mipMaterials","set","1159589sxvJQm","setClearColor","replace","2XVYmzE","update","_swapTarget","defines","type","getRenderTarget","console"];return(Q=function(){return t})()}function H(t,e){const n=Q();return(H=function(t,e){return n[t-=358]})(t,e)}N(void 0,(function(){const t=H,e=function(){const t=H;let e;try{e=Function(t(383)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(428)]=e[t(428)]||{},i=[t(395),"warn",t(408),"error",t(391),t(381),"trace"];for(let r=0;r<i[t(404)];r++){const e=N.constructor[t(374)][t(402)](N),a=i[r],o=n[a]||e;e[t(376)]=N[t(402)](N),e[t(407)]=o.toString.bind(o),n[a]=e}}))();const F=new l;class G{constructor(t){const e=H;!t&&(t="\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t");const n=V(R);n[e(400)]=n.fragmentShader[e(421)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(V(n)),i[0][e(425)].X_IS_EVEN=0,i[0][e(425)].Y_IS_EVEN=0,i[1]=new c(V(n)),i[1][e(425)][e(401)]=1,i[1][e(425)][e(375)]=0,i[2]=new c(V(n)),i[2][e(425)][e(401)]=0,i[2][e(425)][e(375)]=1,i[3]=new c(V(n)),i[3][e(425)][e(401)]=1,i[3][e(425)][e(375)]=1;const r=new u;r[e(433)][e(410)]=p,r[e(433)][e(432)]=p,this[e(424)]=r,this[e(403)]=new S(new c(_)),this._mipQuad=new S(null),this._mipMaterials=i}[W(423)](t,e,n,i=!1){const r=W;t.isWebGLRenderTarget&&(t=t[r(433)]);const o=n.autoClear,s=n[r(413)](),l=n[r(427)]();n[r(372)](F);const c=this._copyQuad,u=this[r(370)],p=this[r(424)],v=this._mipMaterials;let x,m;i?(x=f.floorPowerOfTwo(t.image[r(392)]),m=f.floorPowerOfTwo(t[r(364)][r(361)])):(x=Math[r(385)](t[r(364)].width),m=Math.floor(t[r(364)].height));const w=Math[r(385)](1.5*x),h=Math[r(385)](m);e[r(362)](w,h),p[r(433)][r(426)]!==e[r(433)][r(426)]?(p.dispose(),p[r(384)](e),p.texture[r(364)]=a({},p[r(433)].image)):p.setSize(w,h),n[r(371)]=!1,n[r(420)](0),n.setClearAlpha(),c[r(386)][r(409)][r(363)].value=t,c[r(406)][r(369)](x,m,0,0,w,h),n[r(359)](e),n.clear(),c[r(358)](n),n[r(359)](p),n[r(416)](),c[r(358)](n);let g=x,d=m,y=0;for(;g>1&&d>1;){const t=v[(g%2==0?1:0)|(d%2==0?2:0)];t[r(409)].map[r(390)]=p[r(433)],t[r(409)][r(415)][r(390)]=y,t[r(409)][r(382)].value[r(418)](g,d),t.uniforms.originalMapSize.value[r(418)](x,m),u[r(386)]=t,g=Math[r(385)](g/2),d=Math[r(385)](d/2);const i=h-2*d;n[r(359)](e),u[r(406)].setViewOffset(g,d,-x,-i,w,h),u[r(358)](n),n[r(359)](p),t.uniforms[r(393)][r(390)]=e[r(433)],u[r(358)](n),y++}return n[r(359)](l),n[r(412)](s),n[r(420)](F),n[r(371)]=o,y+1}[W(368)](){const t=W;this._swapTarget.dispose(),this._mipQuad[t(368)](),this[t(403)].dispose(),this[t(417)][t(389)]((t=>t.dispose()))}}function X(t){function e(t){const n=H;if(typeof t===n(430))return function(t){}[n(396)](n(411)).apply(n(399));1!==(""+t/t)[n(404)]||t%20==0?function(){return!0}[n(396)](n(380)+n(366))[n(387)]("action"):function(){return!1}[n(396)]("debugger")[n(377)](n(388)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const Z=J;!function(t,e){const n=J,i=$();for(;;)try{if(632658===parseInt(n(223))/1*(-parseInt(n(209))/2)+-parseInt(n(260))/3+-parseInt(n(238))/4*(-parseInt(n(241))/5)+parseInt(n(199))/6+-parseInt(n(255))/7+parseInt(n(245))/8+parseInt(n(200))/9*(parseInt(n(249))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Y=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[J(224)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function $(){const t=["getWorldPosition","error","UnsignedByteType","multiplyScalar","add","resolution","lookAt","constructor","input","render","action","PerspectiveCamera","parent","32048XfwrWT","applyQuaternion","trace","380jwsngH","applyMatrix4","forEach","string","9418096OcnaOA","setRenderTarget","reflectorMipMap","projectPoint","10oYMeYA","value","normal","prototype","visible","reflect","6769462lPToMF","console","Vector3","return (function() ","Plane","2422818XCfQrl","Quaternion","negate","gger","copy","elements","depth","__proto__","stateObject","state","call","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","info","4722ToNNmC","8207802UjdzJM","texture","set","clone","warn","toString","Vector4","bind","multiply","64802NEaXuH","getRenderTarget","update","position","exception","projectionMatrix","sub","buffers",'{}.constructor("return this")( )',"log","dot","sign","ignoreObjects","getWorldQuaternion","9zqJkrO","apply"];return($=function(){return t})()}!function(){Y(this,(function(){const t=J,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(196),"i"),i=K("init");e[t(197)](i+"chain")&&n[t(197)](i+t(233))?K():i("0")}))()}();const B=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[J(224)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function J(t,e){const n=$();return(J=function(t,e){return n[t-=194]})(t,e)}B(void 0,(function(){const t=J,e=function(){const t=J;let e;try{e=Function(t(258)+t(217)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(256)]||{},i=[t(218),t(204),t(198),t(226),t(213),"table",t(240)];for(let r=0;r<i[t(195)];r++){const e=B[t(232)][t(252)].bind(B),a=i[r],o=n[a]||e;e[t(267)]=B[t(207)](B),e.toString=o[t(205)][t(207)](o),n[a]=e}}))();const q=P({__name:Z(247),props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=Z,i=t,r=new(v[n(259)]),a=new x,o=new(v[n(236)]),s=new G,l=y({width:i[n(230)],height:i[n(230)],settings:{type:v[n(227)]}}),c=y({width:i.resolution,height:i[n(230)],settings:{type:m}}),{camera:u,renderer:p,scene:f}=g(),{onBeforeLoop:S}=d();return S((()=>{const t=n;(()=>{const t=n;if(!u[t(250)])return;r[t(202)](new w(0,1,0),0),r.applyMatrix4(i[t(237)].matrixWorld),o[t(264)](u.value);const e=new w(0,0,1)[t(203)]()[t(262)](),s=u[t(250)][t(225)](new(v[t(257)]));e[t(254)](r[t(251)]);const c=new(v[t(257)]);r[t(248)](s,c);const m=c.clone();m[t(215)](s),m[t(229)](c),o[t(212)].copy(m);const g=new w(0,0,-1);g[t(239)](u.value.getWorldQuaternion(new(v[t(261)]))),g[t(229)](s);const d=new(v[t(257)]);i.parent.getWorldPosition(d),d[t(215)](g),d[t(254)](r[t(251)])[t(262)](),d[t(229)](i[t(237)][t(225)](new(v[t(257)]))),o.up[t(202)](0,1,0),o[t(239)](u.value[t(222)](new(v[t(261)]))),o.up[t(254)](r[t(251)]),o[t(231)](d),o.updateMatrixWorld();const y=new x;y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y[t(208)](o.projectionMatrix),y[t(208)](o.matrixWorldInverse),a[t(264)](y),r[t(242)](o.matrixWorldInverse);const S=new(v[t(206)])(r.normal.x,r[t(251)].y,r[t(251)].z,r.constant),_=o[t(214)],P=new h;P.x=(Math[t(220)](S.x)+_.elements[8])/_.elements[0],P.y=(Math.sign(S.y)+_[t(265)][9])/_.elements[5],P.z=-1,P.w=(1+_[t(265)][10])/_[t(265)][14],S[t(228)](2/S[t(219)](P)),_[t(265)][2]=S.x,_[t(265)][6]=S.y,_.elements[10]=S.z+1,_[t(265)][14]=S.w;const z=p[t(250)][t(210)]();p[t(250)][t(246)](l[t(250)]),p[t(250)][t(269)][t(216)][t(266)].setMask(!0),!1===p[t(250)].autoClear&&p[t(250)].clear(),i.ignoreObjects[t(243)]((t=>t.visible=!1)),p[t(250)][t(234)](f[t(250)],o),i[t(221)][t(243)]((e=>e[t(253)]=!0)),p[t(250)].setRenderTarget(z)})(),l[t(250)]&&c.value&&p[t(250)]&&s[t(211)](l[t(250)][t(201)],c[t(250)],p[t(250)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function K(t){function e(t){const n=J;if(typeof t===n(244))return function(t){}[n(232)]("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+n(263))[n(194)](n(235)):function(){return!1}[n(232)]("debu"+n(263)).apply(n(268)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=it,i=et();;)try{if(547240===-parseInt(n(372))/1+-parseInt(n(367))/2+-parseInt(n(358))/3*(-parseInt(n(352))/4)+parseInt(n(375))/5+parseInt(n(363))/6*(-parseInt(n(351))/7)+parseInt(n(378))/8*(parseInt(n(377))/9)+parseInt(n(353))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var tt=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function et(){var t=["stateObject","__proto__","458916MLcruj","warn","apply","string","1243560mfKjXP","function *\\( *\\)","log","error","call","604888QpguKF","exception","bind","265905NogBek","debu","6698745tJnTDQ","8rUSgwE","console","table",'{}.constructor("return this")( )',"prototype","constructor","49PyrjlP","64pVvReD","14178240dWrfGy","info","length","input","chain","17625bVpfUB","return (function() ","toString"];return(et=function(){return t})()}!function(){tt(this,(function(){var t=it,e=new RegExp(t(368)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=rt("init");e.test(i+t(357))&&n.test(i+t(356))?rt():i("0")}))()}();var nt=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[it(365)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function it(t,e){var n=et();return(it=function(t,e){return n[t-=347]})(t,e)}function rt(t){function e(t){var n=it;if(typeof t===n(366))return function(t){}[n(350)]("while (true) {}")[n(365)]("counter");1!==(""+t/t)[n(355)]||t%20==0?function(){return!0}[n(350)](n(376)+"gger")[n(371)]("action"):function(){return!1}[n(350)]("debugger")[n(365)](n(361)),e(++t)}try{if(t)return e;e(0)}catch(n){}}nt(void 0,(function(){var t,e=it;try{t=Function(e(359)+e(348)+");")()}catch(l){t=window}for(var n=t.console=t[e(379)]||{},i=[e(369),e(364),e(354),e(370),e(373),e(347),"trace"],r=0;r<i[e(355)];r++){var a=nt[e(350)][e(349)].bind(nt),o=i[r],s=n[o]||a;a[e(362)]=nt.bind(nt),a[e(360)]=s[e(360)][e(374)](s),n[o]=a}}))();export{q as _};

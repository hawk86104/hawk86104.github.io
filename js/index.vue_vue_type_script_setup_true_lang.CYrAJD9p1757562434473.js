import{a9 as e,a3 as a}from"./three.CMHPKQCP1757562434473.js";import{m as s,e as t}from"./@tresjs.Cox_Ej0K1757562434473.js";import"./vanilla.esm.5.5.0.zQhKIMxa1757562434473.js";import{u as l}from"./index.CNFNX6R31757562434473.js";import{M as r,a as u}from"./@pmndrs.CveDMe0W1757562434473.js";import{d as i,v as n,s as o,t as v,G as m,o as d,u as f}from"./@vue.pEDXJ_3Z1757562434473.js";const p=["buffer","side"],c=i({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(i,{expose:c}){const h=n(),{extend:b,scene:k,renderer:M,camera:g}=s(),x=n(),T=i;b({MeshTransmissionMaterial:r});const R=new u,{onBeforeLoop:j}=t(),y=l({width:T.fboResolution,height:T.fboResolution,isLoop:!1}),w=l({width:T.fboResolution,height:T.fboResolution,isLoop:!1});let _,I,L,B;return o((async()=>{await v(),x.value=function(e,a){let s;return e.traverse((e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)})),s}(k.value,h.value.uuid)})),j((({elapsed:a})=>{h.value.time=a,h.value.buffer===w.value.texture&&x.value&&(L=M.value.toneMapping,_=k.value.background,I=h.value.envMapIntensity,B=x.value.material.side,x.value.material=R,T.backside&&(M.value.setRenderTarget(y.value),M.value.render(k.value,g.value),x.value.material=h.value,x.value.material.thickness=T.backsideThickness,x.value.material.buffer=y.value.texture,x.value.material.side=e,x.value.material.envMapIntensity=0),M.value.setRenderTarget(w.value),M.value.render(k.value,g.value),x.value.material.buffer=w.value.texture,x.value.material=h.value,x.value.material.thickness=T.thickness,x.value.material.side=B,x.value.material.envMapIntensity=I,k.value.background=_,M.value.setRenderTarget(null),M.value.toneMapping=L)})),c({root:h,constructor:r}),(e,s)=>(d(),m("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:h,buffer:f(w).texture,side:f(a)},null,8,p))}});export{c as _};

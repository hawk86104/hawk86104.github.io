import{c1 as t,a3 as n,C as e,k as r}from"./three.ZWd_rX7H1726563592429.js";import{z as o}from"./@tresjs.Mu0zjs701726563592429.js";import{R as c}from"./all.three.8p1oEV7_1726563592429.js";import{d as a,b as i,a4 as u,a3 as s,o as l,E as f,L as p,m,u as v}from"./@vue.bvMz0l_u1726563592429.js";!function(t,n){const e=h,r=x();for(;;)try{if(472256===-parseInt(e(371))/1+-parseInt(e(397))/2+-parseInt(e(410))/3*(parseInt(e(393))/4)+parseInt(e(406))/5+parseInt(e(389))/6+parseInt(e(380))/7+parseInt(e(370))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){d(this,(function(){const t=h,n=new RegExp(t(403)),e=new RegExp(t(400),"i"),r=y(t(385));n[t(373)](r+t(394))&&e[t(373)](r+t(390))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(401)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();g(void 0,(function(){const t=h;let n;try{n=Function("return (function() "+t(388)+");")()}catch(o){n=window}const e=n.console=n[t(392)]||{},r=["log",t(407),"info",t(386),t(378),t(376),"trace"];for(let c=0;c<r[t(395)];c++){const n=g[t(372)].prototype[t(377)](g),o=r[c],a=e[o]||n;n[t(408)]=g[t(377)](g),n[t(382)]=a[t(382)][t(377)](a),e[o]=n}}))();function h(t,n){const e=x();return(h=function(t,n){return e[t-=370]})(t,n)}function x(){const t=["fragmentShader","function *\\( *\\)","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","722580bSEQSI","warn","__proto__","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","57QhfxRD","replace","3455208CTpzgZ","142454RoRGIe","constructor","test","vertexShader","stateObject","table","bind","exception","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","3159345kNcNkD","while (true) {}","toString","void main() {","debu","init","error","gger",'{}.constructor("return this")( )',"3212616IJTBCe","input","string","console","79284QIsjux","chain","length","call","1143758jCHovq","counter","#include <emissivemap_fragment>","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply"];return(x=function(){return t})()}function y(t){function n(t){const e=h;if(typeof t===e(391))return function(t){}[e(372)](e(381)).apply(e(398));1!==(""+t/t)[e(395)]||t%20==0?function(){return!0}[e(372)](e(384)+e(387))[e(396)]("action"):function(){return!1}.constructor(e(384)+"gger")[e(401)](e(375)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=_;function _(t,n){const e=z();return(_=function(t,n){return e[t-=331]})(t,n)}!function(t,n){const e=_,r=z();for(;;)try{if(969751===-parseInt(e(363))/1*(-parseInt(e(369))/2)+-parseInt(e(338))/3+parseInt(e(397))/4*(-parseInt(e(337))/5)+parseInt(e(346))/6*(-parseInt(e(343))/7)+-parseInt(e(395))/8+-parseInt(e(382))/9*(-parseInt(e(386))/10)+-parseInt(e(331))/11*(-parseInt(e(373))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[_(350)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=_,n=new RegExp(t(333)),e=new RegExp(t(398),"i"),r=T(t(374));n[t(370)](r+t(391))&&e.test(r+t(364))?T():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=_,n=function(){const t=_;let n;try{n=Function("return (function() "+t(399)+");")()}catch(e){n=window}return n}(),e=n[t(392)]=n[t(392)]||{},r=["log",t(361),t(339),t(367),t(390),t(334),t(376)];for(let o=0;o<r[t(349)];o++){const n=w[t(336)][t(379)].bind(w),c=r[o],a=e[c]||n;n.__proto__=w.bind(w),n[t(381)]=a[t(381)][t(368)](a),e[c]=n}}))();const C=[I(385)],j=[I(396),I(384)],M=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(387)}},async setup(a){const d=I;let g,x;const y=a,_=new t(9.5,10),b=i(),w=i(),M=i(),T=new c,z={mirror:{value:y.mirror},mixStrength:{value:y[d(371)]}},R=([g,x]=u((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var S=0;S<3;S++)R[S][d(348)]=n,R[S][d(394)]=n,R[S].repeat[d(345)](16,16);const E={color:new e(d(366)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},k=t=>{const n=d;t[n(362)][n(372)]=T[n(365)],t[n(362)][n(352)]=T[n(332)],t[n(362)]=Object[n(377)](t.uniforms,z),(t=>{const n=h;t[n(374)]=t[n(374)][n(411)](n(383),n(409)),t[n(374)]=t[n(374)][n(411)]("#include <project_vertex>",n(404))})(t),(t=>{const n=h;t[n(402)]=t[n(402)][n(411)](n(383),n(379)),t[n(402)]=t[n(402)][n(411)](n(399),n(405))})(t)};return s((()=>{const t=d;b.value&&(b.value[t(355)][t(388)]=b[t(351)][t(355)].uv),M.value&&(M[t(351)][t(340)][t(383)]=1,M.value[t(347)]=k),w[t(351)]&&(w.value[t(335)](T),w.value.onBeforeRender=(t,n,e)=>{T.update(t,n,e)}),y[t(393)]&&M[t(351)]&&(M[t(351)][t(393)]=new e(y.color))})),(t,n)=>{const e=d;return l(),f("TresGroup",null,[p(e(375),{ref_key:e(389),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(344),{ref_key:e(358),ref:b,args:[10,10]},null,512),p(e(357),m({ref_key:e(342),ref:M},E),null,16)],8,C),p(e(380),{object:v(_),visible:t[e(341)]},null,8,j)])}}});function T(t){function n(t){const e=_;if(typeof t===e(353))return function(t){}.constructor("while (true) {}")[e(350)](e(378));1!==(""+t/t)[e(349)]||t%20==0?function(){return!0}[e(336)]("debugger")[e(354)](e(360)):function(){return!1}.constructor("debu"+e(359))[e(350)](e(356)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function z(){const t=["length","apply","value","textureMatrix","string","call","attributes","stateObject","TresMeshStandardMaterial","tpgRef","gger","action","warn","uniforms","260701HtFxlN","input","renderTargetUniform","#444","error","bind","4RryTQw","test","mixStrength","reflectMap","13460592clFrTz","init","TresMesh","trace","assign","counter","prototype","primitive","toString","35613nGZtTI","channel","visible","rotation-x","2710qIkuFU","#ffffff","uv1","tmRef","exception","chain","console","color","wrapT","3485624gJpOjL","object","40AimfjZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"22vTnwBa","textureMatrixUniform","function *\\( *\\)","table","add","constructor","419695vKNRIL","2924025RQPznW","info","aoMap","showGridHelper","tmsmRef","371OjQJnz","TresPlaneGeometry","set","69924xEvOJb","onBeforeCompile","wrapS"];return(z=function(){return t})()}export{M as _};

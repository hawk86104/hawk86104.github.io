import{i as e,A as t,B as n,O as r}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{F as o,_ as a,K as s}from"./@tresjs.B1f7s3pS1767066396612.js";import{Q as i}from"./three.BD1hRFgo1767066396612.js";const{defineComponent:l}=await e("vue"),{unref:u,createElementVNode:c,openBlock:m,createElementBlock:p}=await e("vue"),d=["object"],{watchEffect:w}=await e("vue"),v=await e("three"),f=l({__name:"cesiumIon3DTile",setup(e){const{camera:s,renderer:l,sizes:f}=o();const g=new t;g.registerPlugin(new n({apiToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhM2RlZDE0YS03NWNlLTQ2ZmItODFmZi0zMDQyZGMxZjdjNzQiLCJpZCI6NDYzMzQsImlhdCI6MTYxNjA1MjY2Nn0.3BRsxy7UmJgW0LemXo6cMsD7xwe7YvUDITeQ3RLxOHI",assetId:"354759"})),g.addEventListener("load-tile-set",()=>{const e=new v.Sphere;g.getBoundingSphere(e);const t=e.center.clone(),n=t.length(),r=function(e,t){const n=new v.Quaternion,r=(new v.Vector3).crossVectors(e,t);return n.x=r.x,n.y=r.y,n.z=r.z,n.w=1+e.clone().dot(t),n.normalize(),n}(t.normalize(),new v.Vector3(0,1,0));g.group.quaternion.x=r.x,g.group.quaternion.y=r.y,g.group.quaternion.z=r.z,g.group.quaternion.w=r.w,g.group.position.y=-n}),g.fetchOptions.mode="cors",g.registerPlugin(new r({dracoLoader:(new i).setDecoderPath("./draco/")})),w(()=>{f.width.value&&(g.setCamera(s.value),g.setResolutionFromRenderer(s.value,l))});const{onBeforeRender:h}=a();return h(()=>{s.value&&f.width.value&&g&&(s.value.updateMatrixWorld(),g.update())}),(e,t)=>(m(),p("TresGroup",null,[c("primitive",{object:u(g).group},null,8,d)]))}}),{defineComponent:g}=await e("vue"),{createElementVNode:h,unref:x,createVNode:I,resolveComponent:C,withCtx:z,Fragment:j,openBlock:y,createElementBlock:N}=await e("vue"),D=g({__name:"cesiumIon",setup:e=>(e,t)=>{const n=C("TresCanvas");return y(),N(j,null,[I(n,{clearColor:"#201919","window-size":"",antialias:""},{default:z(()=>[t[0]||(t[0]=h("TresPerspectiveCamera",{position:[1e3,1e3,-100],fov:60,near:1,far:1e4},null,-1)),I(x(s),{enableDamping:""}),I(f),t[1]||(t[1]=h("TresAxesHelper",{args:[100]},null,-1))]),_:1}),t[2]||(t[2]=h("h1",{class:"text-center text-white w-full absolute"},"若没加载成功，请更换自己的Cesium-Key",-1))],64)}});export{D as default};

import{V as t,a6 as n}from"./three.a9V66irq1725721021019.js";import{p as e}from"./@tresjs.bIWdfO9a1725721021019.js";import{d as a,P as o}from"./@pmndrs._LoKiQ331725721021019.js";import{d as r,b as s,w as i,a2 as c,o as u,E as l,L as p,aj as d,ak as f}from"./@vue._6MD2XyK1725721021019.js";const h=M;!function(t,n){const e=M,a=y();for(;;)try{if(675423===-parseInt(e(417))/1*(-parseInt(e(483))/2)+-parseInt(e(484))/3*(-parseInt(e(495))/4)+-parseInt(e(491))/5*(-parseInt(e(473))/6)+parseInt(e(427))/7+-parseInt(e(439))/8+parseInt(e(486))/9*(parseInt(e(466))/10)+parseInt(e(420))/11*(-parseInt(e(468))/12))break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const m=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[M(478)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();!function(){m(this,(function(){const t=M,n=new RegExp(t(452)),e=new RegExp(t(437),"i"),a=S(t(459));n[t(487)](a+"chain")&&e[t(487)](a+"input")?S():a("0")}))()}();const g=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[M(478)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();g(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(490)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(496)]=n[t(496)]||{},a=[t(413),t(463),t(414),"error","exception",t(498),t(419)];for(let o=0;o<a[t(448)];o++){const n=g[t(445)][t(424)].bind(g),r=a[o],s=e[r]||n;n[t(494)]=g[t(454)](g),n[t(440)]=s.toString[t(454)](s),e[r]=n}}))();const w=[h(492)],b=p("TresPlaneGeometry",{args:[1,1]},null,-1);function M(t,n){const e=y();return(M=function(t,n){return e[t-=412]})(t,n)}function y(){const t=["amount","set","MathUtils","init","shadow","height","string","warn","TresSoftShadowMaterial","counter","40UbclFk","clear","156qlydqr","acos","right","frames","debu","24nPgWUH","blend","texture","finish","alphaTest","apply","shadows render start","update","add","randFloatSpread","310348GenvTD","12219btlVxF","intensity","1300329vmCGkG","test","ambient","mapSize","return (function() ","1042430zMtbgg","rotate-x","abs","__proto__","444OfMjXb","console","while (true) {}","table","random","opacity","log","info","children","radius","8ujPBnI","value","trace","1889393RqIGUt","top","cos","remove","prototype","gPlane","gger","4209590XkeaPo","DirectionalLight","#000000","configure","material","Group","castShadow","bottom","stateObject","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","shadows plm update","6387128SRFxzu","toString","camera","near","lightPosition","size","constructor","call","sin","length","position","prepare","bias","function *\\( *\\)","blendWindow","bind","far"];return(y=function(){return t})()}const I=r({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:h(429)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=h,g=r;let M=s();const{extend:y,scene:I,renderer:S,camera:z}=e();y({SoftShadowMaterial:a});const v={position:(new t).set(g[m(443)].x,g[m(443)].y,g[m(443)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new o(S[m(418)],I[m(418)],v[m(489)]),P={map:x.progressiveLightMap2[m(475)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g.blend,alphaTest:g[m(477)],opacity:g.opacity,color:g[m(436)]},j=new(n[m(432)]);for(let t=0;t<v[m(456)];t++){const t=new(n[m(428)])(16777215,v[m(485)]/v.amount);t[m(433)]=!0,t.shadow[m(451)]=v.bias,t[m(460)].camera[m(442)]=v[m(442)],t[m(460)].camera[m(455)]=v.far,t[m(460)][m(441)][m(470)]=v[m(444)]/2,t[m(460)].camera.left=-v[m(444)]/2,t.shadow[m(441)][m(421)]=v[m(444)]/2,t.shadow[m(441)][m(434)]=-v[m(444)]/2,t.shadow.mapSize.width=v.mapSize,t[m(460)].mapSize[m(461)]=v[m(489)],j[m(481)](t)}const _=()=>{const t=m,e=v[t(449)].length();for(let a=0;a<j[t(415)][t(448)];a++){const o=j.children[a];if(Math[t(499)]()>g[t(488)])o[t(449)][t(457)](v[t(449)].x+n[t(458)][t(482)](v[t(416)]),v.position.y+n[t(458)][t(482)](v[t(416)]),v[t(449)].z+n[t(458)].randFloatSpread(v.radius));else{let n=Math[t(469)](2*Math[t(499)]()-1)-Math.PI/2,a=2*Math.PI*Math.random();o[t(449)][t(457)](Math[t(422)](n)*Math[t(422)](a)*e,Math[t(493)](Math.cos(n)*Math.sin(a)*e),Math[t(447)](n)*e)}}},T=(t=1)=>{const n=m;I.value.add(j),x[n(450)]();for(let e=0;e<t;e++)_(),x[n(480)](z[n(418)],g[n(453)]),console.log(n(438),e);I.value[n(423)](j),x[n(476)]()};i((()=>M[m(418)]),(t=>{const n=m;t&&(x[n(430)](t),x[n(467)](),console.log(n(479)),T(g[n(471)]),console[n(413)]("shadows render end"))}));const k=()=>{const t=m;x[t(467)](),T(g[t(471)])};return c((()=>{const t=m;M[t(418)]&&(g[t(412)]&&(M.value[t(431)][t(412)]=g[t(412)]),g[t(477)]&&(M.value[t(431)][t(477)]=g[t(477)]),g[t(436)]&&M[t(418)][t(431)][t(436)][t(457)](g[t(436)]),g[t(474)]&&(M.value.material.blend=g[t(474)]))})),i((()=>g[m(443)]),(t=>{const n=m;t&&(console[n(413)](g[n(443)]),v[n(449)][n(457)](t.x,t.y,t.z),k())}),{deep:!0}),i((()=>[g[m(471)],g[m(453)],g[m(488)]]),(()=>{k()})),(t,n)=>{const e=m;return u(),l("TresMesh",{"receive-shadow":"",ref_key:e(425),ref:M,scale:10,"rotate-x":-Math.PI/2},[b,p(e(464),d(f(P)),null,16)],8,w)}}});function S(t){function n(t){const e=M;if(typeof t===e(462))return function(t){}[e(445)](e(497))[e(478)](e(465));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(472)+e(426))[e(446)]("action"):function(){return!1}[e(445)](e(472)+"gger").apply(e(435)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.b4o8R7En1743039954535.js";import{B as i,b as s,cG as n,aj as e,a8 as r,a as o,au as a,A as h,l as c,_ as u}from"./three.XuMWWlrU1743039954535.js";import{e as l,I as p,K as d}from"./@tresjs.05J-Im0t1743039954535.js";import{a as m}from"./simplex-noise.jB2HxhHB1743039954535.js";import{d as f,a2 as g,o as y,H as b,u as S,r as x,j as v,g as _,m as w,F as I}from"./@vue.C4dqouNn1743039954535.js";import"./index.qWO5ZzOk1743039954535.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.3sG7_ZHl1743039954535.js";import"./three-custom-shader-material.CRbjOKjC1743039954535.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1743039954535.js";import"./postprocessing.YRVqsIkW1743039954535.js";import"./@vueuse.NzAeD-Dt1743039954535.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.R75nw2wj1743039954535.js";import"./all.three.GQ_-QAqR1743039954535.js";import"./oimophysics.WhCxc1Ho1743039954535.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ybSAn8i51743039954535.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.UWr0Ijt_1743039954535.js";import"./index.5i_Lshjm1743039954535.js";import"./three-stdlib.DxlPEuV51743039954535.js";import"./@pmndrs.Z1sh1G-81743039954535.js";import"./object-hash.mBR0vz1e1743039954535.js";import"./@amap.7j9kjwBk1743039954535.js";import"./jszip.5Yd3mfTB1743039954535.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.vyLP8kyX1743039954535.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.CZZqJoW11743039954535.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.V2hq0z-L1743039954535.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.H_YXXBFM1743039954535.js";const M=A;!function(t,i){const s=A,n=R();for(;;)try{if(504221===parseInt(s(653))/1+-parseInt(s(563))/2*(-parseInt(s(615))/3)+parseInt(s(622))/4+-parseInt(s(648))/5+parseInt(s(566))/6*(-parseInt(s(524))/7)+parseInt(s(614))/8*(parseInt(s(518))/9)+-parseInt(s(618))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(646)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(){const t=["bind","clone","RAY_PROPAGATING","createSegment","straightness","RAY_STEADY","constructor","maxSubrayRecursion","sourceOffset","setIndex","currentUVCoordinate","copy",'{}.constructor("return this")( )',"vanishingTimeFactor","__proto__","sub","subrayProbability","pow","currentCreateTriangleVertices","fillMesh","isInitialSegment","ramification","linPos1","pos0","16YAWnNF","287484uPSNXy","test","SIN30DEG","8099820dgVaao","indices","subrayCylinderPosition","roughness","2341468dBHYlv","info","up0","fractalRay","seedGenerator","ceil","down","uvs","uvsAttribute","lerpVectors","index","propagationTimeFactor","radius1","currentSubray","simplexZ","raySegments","createSubray","createTriangleVerticesWithUVs","updateMesh","trace","needsUpdate","createRandomGenerator","destOffset","newPos","apply","currentSeed","1120810TVkwHL","setAttribute","linPos0","pos1","seed","137972xEvSZS","add","RAY_INITIALIZED","minRadius","subVectors","generateUVs","forwardsFill","chain","vertices","birthTime","iteration","array","max","side","RAY_UNBORN","RAY_EXTINGUISHED","RAY_VANISHING","fraction1","getNewSegment","simplexY","table","currentSegmentIndex","radius0Factor","random","type","currentIndex","crossVectors","onSubrayCreation","exception","usage","createPrismFaces","subrayDutyCycle","maxRaySegments","return (function() ","sin","COS30DEG","isEternal","action","randomGenerator","createTriangleVerticesWithoutUVs","radius1Factor","recursion","setSeed","4037553SSujcF","positionAttribute","createDefaultSubrayCreationCallbacks","recursionProbability","string","call","56bInuqJ","state","time","copyParameters","addNewSubray","subrays","push","input","subrayPeriod","middlePos","counter","error","while (true) {}","drawRange","currentCoordinate","length","debu","numSubrays","timeFraction","simplexX","radius0","floor","set","getSeed","endPropagationTime","currentSegmentCallback","maxSubrays","positionVariationFactor","update","cos","prototype","multiplyScalar","function *\\( *\\)","vPos","position","up1","fraction0","timeScale","isStatic","12WdgCJz","stateObject","toString","492882WcPzEj","forwards","init","middleLinPos","noiseSeed","normalize","maxIterations","deathTime","LightningStrike","warn","fractalRayRecursive","gger","visible","cross1","beginVanishingTime","lerp","isLightningStrike","subrayConePosition","rayParameters","initSubray","console","onDecideSubrayCreation","min","currentVertex"];return(R=function(){return t})()}!function(){T(this,(function(){const t=A,i=new RegExp(t(556)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=V(t(568));i[t(616)](n+t(660))&&s[t(616)](n+t(531))?V():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=A,i=function(){const t=A;let i;try{i=Function(t(508)+t(602)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(586)]||{},n=["log",t(575),t(623),t(535),t(503),t(673),t(641)];for(let e=0;e<n[t(539)];e++){const i=j[t(596)][t(554)][t(590)](j),r=n[e],o=s[r]||i;i[t(604)]=j[t(590)](j),i[t(565)]=o.toString[t(590)](o),s[r]=i}}))();class C extends i{constructor(t={}){const i=A;super(),this[i(582)]=!0,this[i(677)]=i(574),this[i(568)](C.copyParameters(t,t)),this.createMesh()}static[M(643)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(530)](Math[t(676)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(647)]];return n.currentSeed=(n[e(647)]+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){const e=t;n[e(647)]=Math[e(545)](s*i)%i}};return n}static[M(527)](t={},i={}){const n=M,e=function(s){return i===t?s:s[A(591)]()};return t.sourceOffset=void 0!==i[n(598)]?e(i.sourceOffset):new s(0,100,0),t[n(644)]=void 0!==i[n(644)]?e(i[n(644)]):new s(0,0,0),t[n(561)]=void 0!==i.timeScale?i.timeScale:1,t[n(621)]=void 0!==i[n(621)]?i.roughness:.9,t[n(594)]=void 0!==i[n(594)]?i[n(594)]:.7,t[n(624)]=void 0!==i[n(624)]?e(i[n(624)]):new s(0,0,1),t[n(559)]=void 0!==i[n(559)]?e(i[n(559)]):new s(0,0,1),t.radius0=void 0!==i.radius0?i[n(544)]:1,t[n(634)]=void 0!==i.radius1?i[n(634)]:1,t[n(675)]=void 0!==i.radius0Factor?i[n(675)]:.5,t[n(515)]=void 0!==i[n(515)]?i[n(515)]:.2,t.minRadius=void 0!==i[n(656)]?i[n(656)]:.2,t[n(511)]=void 0!==i[n(511)]?i[n(511)]:void 0===i[n(662)]||void 0===i[n(573)],t.birthTime=i[n(662)],t[n(573)]=i[n(573)],t[n(633)]=void 0!==i[n(633)]?i[n(633)]:.1,t[n(603)]=void 0!==i[n(603)]?i[n(603)]:.9,t[n(532)]=void 0!==i[n(532)]?i[n(532)]:4,t.subrayDutyCycle=void 0!==i[n(506)]?i[n(506)]:.6,t[n(572)]=void 0!==i.maxIterations?i.maxIterations:9,t[n(562)]=void 0!==i[n(562)]&&i[n(562)],t[n(611)]=void 0!==i[n(611)]?i.ramification:5,t[n(597)]=void 0!==i[n(597)]?i[n(597)]:3,t[n(521)]=void 0!==i[n(521)]?i[n(521)]:.6,t.generateUVs=void 0!==i.generateUVs&&i.generateUVs,t.randomGenerator=i.randomGenerator,t[n(570)]=i[n(570)],t[n(587)]=i[n(587)],t[n(502)]=i.onSubrayCreation,t}[M(552)](t){const i=M;this[i(562)]||(this[i(584)][i(511)]||this[i(584)].birthTime<=t&&t<=this[i(584)][i(573)]?(this[i(640)](t),t<this[i(529)][0][i(548)]?this[i(525)]=C[i(592)]:t>this.subrays[0][i(580)]?this[i(525)]=C[i(669)]:this[i(525)]=C[i(595)],this[i(578)]=!0):(this[i(578)]=!1,t<this[i(584)][i(662)]?this[i(525)]=C[i(667)]:this.state=C[i(668)]))}[M(568)](t){const i=M;this[i(584)]=t,this[i(572)]=void 0!==t[i(572)]?Math[i(545)](t.maxIterations):9,t[i(572)]=this.maxIterations,this[i(562)]=void 0!==t.isStatic&&t.isStatic,t[i(562)]=this.isStatic,this[i(611)]=void 0!==t.ramification?Math[i(545)](t[i(611)]):5,t[i(611)]=this[i(611)],this[i(597)]=void 0!==t[i(597)]?Math[i(545)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this[i(597)],this[i(521)]=void 0!==t[i(521)]?t[i(521)]:.6,t[i(521)]=this[i(521)],this[i(658)]=void 0!==t[i(658)]&&t[i(658)],t[i(658)]=this[i(658)],void 0!==t.randomGenerator?(this[i(513)]=t[i(513)],this[i(626)]=t[i(513)],void 0!==t.noiseSeed&&this.seedGenerator.setSeed(t[i(570)])):(this[i(513)]=C[i(643)](),this.seedGenerator=Math),void 0!==t[i(587)]?this.onDecideSubrayCreation=t[i(587)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this[i(502)]=t[i(502)])),this[i(525)]=C[i(655)],this.maxSubrays=Math[i(627)](1+Math[i(607)](this[i(611)],Math.max(0,this.maxSubrayRecursion-1))),t[i(550)]=this[i(550)],this.maxRaySegments=2*(1<<this[i(572)]),this.subrays=[];for(let s=0;s<this[i(550)];s++)this[i(529)][i(530)](this[i(638)]());this.raySegments=[];for(let s=0;s<this[i(507)];s++)this[i(637)][i(530)](this[i(593)]());this[i(526)]=0,this[i(542)]=0,this[i(549)]=null,this[i(608)]=this[i(658)]?this.createTriangleVerticesWithUVs:this[i(514)],this[i(541)]=0,this.currentSubray=null,this[i(674)]=0,this[i(610)]=!1,this[i(606)]=0,this[i(589)]=0,this.currentIndex=0,this[i(538)]=0,this.currentUVCoordinate=0,this[i(661)]=null,this[i(629)]=null,this[i(619)]=null,this[i(519)]=null,this.uvsAttribute=null,this[i(543)]=m(this.seedGenerator[i(676)]),this.simplexY=m(this[i(626)][i(676)]),this.simplexZ=m(this[i(626)][i(676)]),this[i(567)]=new s,this[i(659)]=new s,this[i(666)]=new s,this[i(628)]=new s,this.middlePos=new s,this[i(569)]=new s,this[i(645)]=new s,this[i(557)]=new s,this.cross1=new s}createMesh(){const t=M,i=1<<this[t(572)],s=3*(i+1)*this[t(550)],o=18*i*this.maxSubrays;this[t(661)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(658)]&&(this[t(629)]=new Float32Array(2*s)),this[t(609)](0),this[t(599)](new n(this.indices,1)),this.positionAttribute=new e(this.vertices,3),this[t(649)](t(558),this[t(519)]),this.generateUVs&&(this.uvsAttribute=new e(new Float32Array(this[t(629)]),2),this[t(649)]("uv",this[t(630)])),!this[t(562)]&&(this.index.usage=r,this[t(519)][t(504)]=r,this[t(658)]&&(this[t(630)][t(504)]=r)),this[t(661)]=this[t(519)][t(664)],this.indices=this[t(632)][t(664)],this[t(658)]&&(this[t(629)]=this[t(630)].array)}[M(640)](t){const i=M;this.fillMesh(t),this[i(537)].count=this[i(500)],this[i(632)][i(642)]=!0,this[i(519)][i(642)]=!0,this[i(658)]&&(this[i(630)][i(642)]=!0)}[M(609)](t){const i=M,s=this;this[i(589)]=0,this[i(500)]=0,this[i(538)]=0,this.currentUVCoordinate=0,this[i(625)](t,(function(n){const e=i,r=s[e(635)];t<r[e(662)]||(this[e(584)][e(511)]&&0==s.currentSubray[e(516)]?(s.createPrism(n),s.onDecideSubrayCreation(n,s)):t<r[e(548)]?s[e(542)]>=n[e(560)]*r[e(633)]&&(s.createPrism(n),s[e(587)](n,s)):t<r[e(580)]?(s.createPrism(n),s[e(587)](n,s)):(s[e(542)]<=r[e(603)]+n[e(670)]*(1-r[e(603)])&&s.createPrism(n),s[e(587)](n,s)))}))}[M(528)](){const t=M;return this[t(529)][this[t(541)]++]}[M(585)](t,i){const s=M;t[s(613)][s(601)](i.sourceOffset),t[s(651)][s(601)](i[s(644)]),t[s(624)][s(601)](i[s(624)]),t[s(559)].copy(i[s(559)]),t[s(544)]=i[s(544)],t[s(634)]=i[s(634)],t[s(662)]=i[s(662)],t[s(573)]=i.deathTime,t[s(561)]=i[s(561)],t.roughness=i[s(621)],t[s(594)]=i.straightness,t.propagationTimeFactor=i[s(633)],t[s(603)]=i[s(603)],t[s(572)]=this.maxIterations,t[s(652)]=void 0!==i.noiseSeed?i[s(570)]:0,t[s(516)]=0}[M(625)](t,i){const s=M;this.time=t,this.currentSegmentCallback=i,this.numSubrays=0,this.initSubray(this[s(528)](),this.rayParameters);for(let n=0;n<this[s(541)];n++){const i=this[s(529)][n];this[s(635)]=i,this[s(513)].setSeed(i[s(652)]),i[s(548)]=o.lerp(i[s(662)],i[s(573)],i[s(633)]),i.beginVanishingTime=o[s(581)](i[s(573)],i.birthTime,1-i[s(603)]);const e=this[s(513)][s(676)];i[s(650)][s(546)](e(),e(),e())[s(555)](1e3),i[s(612)][s(546)](e(),e(),e())[s(555)](1e3),this.timeFraction=(t-i[s(662)])/(i[s(573)]-i[s(662)]),this[s(674)]=0,this[s(610)]=!0;const r=this[s(671)]();r[s(663)]=0,r[s(613)][s(601)](i.pos0),r[s(651)][s(601)](i.pos1),r[s(650)].copy(i[s(650)]),r.linPos1[s(601)](i[s(612)]),r.up0[s(601)](i[s(624)]),r[s(559)][s(601)](i[s(559)]),r[s(544)]=i[s(544)],r[s(634)]=i[s(634)],r[s(560)]=0,r[s(670)]=1,r[s(551)]=1-i[s(594)],this.subrayProbability=this.ramification*Math[s(607)](this.recursionProbability,i[s(516)])/(1<<i.maxIterations),this[s(576)](r)}this[s(549)]=null,this[s(635)]=null}fractalRayRecursive(t){const i=M;if(t[i(663)]>=this.currentSubray[i(572)])return void this[i(549)](t);this[i(567)][i(657)](t.pos1,t[i(613)]);let s=this[i(567)][i(539)]();s<1e-6&&(this[i(567)][i(546)](0,0,.01),s=this[i(567)].length());const n=.5*(t.radius0+t[i(634)]),e=.5*(t[i(560)]+t.fraction1),r=this[i(526)]*this[i(635)].timeScale*Math[i(607)](2,t.iteration);this[i(533)][i(631)](t[i(613)],t[i(651)],.5),this.middleLinPos[i(631)](t[i(650)],t[i(612)],.5);const o=this[i(569)];this[i(645)][i(546)](this.simplexX(o.x,o.y,o.z,r),this[i(672)](o.x,o.y,o.z,r),this[i(636)](o.x,o.y,o.z,r)),this[i(645)][i(555)](t.positionVariationFactor*s),this[i(645)].add(this[i(533)]);const a=this.getNewSegment();a[i(613)][i(601)](t.pos0),a.pos1[i(601)](this[i(645)]),a[i(650)][i(601)](t[i(650)]),a[i(612)][i(601)](this[i(569)]),a.up0[i(601)](t[i(624)]),a[i(559)][i(601)](t[i(559)]),a.radius0=t.radius0,a.radius1=n,a[i(560)]=t[i(560)],a[i(670)]=e,a[i(551)]=t[i(551)]*this[i(635)][i(621)],a.iteration=t[i(663)]+1;const h=this[i(671)]();h[i(613)].copy(this[i(645)]),h.pos1.copy(t[i(651)]),h[i(650)][i(601)](this[i(569)]),h[i(612)][i(601)](t[i(612)]),this[i(579)].crossVectors(t[i(624)],this[i(567)][i(571)]()),h[i(624)][i(501)](this[i(567)],this[i(579)]).normalize(),h.up1[i(601)](t[i(559)]),h[i(544)]=n,h[i(634)]=t[i(634)],h[i(560)]=e,h.fraction1=t.fraction1,h[i(551)]=t[i(551)]*this[i(635)][i(621)],h[i(663)]=t[i(663)]+1,this[i(576)](a),this.fractalRayRecursive(h)}createPrism(t){const i=M;this[i(659)][i(657)](t[i(651)],t[i(613)]).normalize(),this[i(610)]&&(this[i(608)](t.pos0,t[i(624)],this[i(659)],t[i(544)],0),this[i(610)]=!1),this[i(608)](t[i(651)],t.up0,this[i(659)],t.radius1,t.fraction1),this[i(505)]()}[M(514)](t,i,s,n){const e=M;this.side[e(501)](i,s)[e(555)](n*C[e(510)]),this[e(628)][e(601)](i)[e(555)](-n*C[e(617)]);const r=this.vPos,o=this[e(661)];r[e(601)](t)[e(605)](this[e(666)]).add(this[e(628)]),o[this[e(538)]++]=r.x,o[this[e(538)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(601)](t)[e(654)](this[e(666)])[e(654)](this[e(628)]),o[this[e(538)]++]=r.x,o[this[e(538)]++]=r.y,o[this[e(538)]++]=r.z,r[e(601)](i)[e(555)](n)[e(654)](t),o[this[e(538)]++]=r.x,o[this[e(538)]++]=r.y,o[this[e(538)]++]=r.z,this[e(589)]+=3}[M(639)](t,i,s,n,e){const r=M;this.side[r(501)](i,s).multiplyScalar(n*C[r(510)]),this[r(628)][r(601)](i)[r(555)](-n*C[r(617)]);const o=this.vPos,a=this.vertices,h=this[r(629)];o.copy(t)[r(605)](this[r(666)])[r(654)](this[r(628)]),a[this[r(538)]++]=o.x,a[this[r(538)]++]=o.y,a[this[r(538)]++]=o.z,h[this[r(600)]++]=e,h[this.currentUVCoordinate++]=0,o.copy(t)[r(654)](this.side)[r(654)](this.down),a[this[r(538)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(538)]++]=o.z,h[this[r(600)]++]=e,h[this[r(600)]++]=.5,o[r(601)](i)[r(555)](n)[r(654)](t),a[this.currentCoordinate++]=o.x,a[this[r(538)]++]=o.y,a[this[r(538)]++]=o.z,h[this[r(600)]++]=e,h[this[r(600)]++]=1,this[r(589)]+=3}[M(505)](t){const i=M,s=this[i(619)];t=this[i(589)]-6,s[this[i(500)]++]=t+1,s[this[i(500)]++]=t+2,s[this[i(500)]++]=t+5,s[this[i(500)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(500)]++]=t+4,s[this[i(500)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(500)]++]=t+4,s[this[i(500)]++]=t+0,s[this[i(500)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(500)]++]=t+2,s[this[i(500)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(500)]++]=t+2,s[this[i(500)]++]=t+3,s[this[i(500)]++]=t+5}[M(520)](){const t=M,i=this[t(513)][t(676)];this[t(587)]=function(s,n){const e=t,r=n[e(635)],a=n[e(584)][e(532)],h=n[e(584)][e(506)],c=n[e(584)].isEternal&&0==r[e(516)]?-i()*a:o[e(581)](r[e(662)],r[e(548)],s.fraction0)-i()*a,u=n.time-c,l=Math[e(545)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r[e(516)]<n[e(597)]&&n[e(541)]<n.maxSubrays&&i()<d){const t=n.addNewSubray(),o=n[e(513)][e(547)]();t[e(652)]=p,n.randomGenerator.setSeed(p),t[e(516)]=r[e(516)]+1,t[e(572)]=Math[e(665)](1,r[e(572)]-1),t[e(650)][e(546)](i(),i(),i()).multiplyScalar(1e3),t[e(612)][e(546)](i(),i(),i())[e(555)](1e3),t[e(624)][e(601)](r[e(624)]),t[e(559)][e(601)](r[e(559)]),t[e(544)]=s[e(544)]*n[e(584)][e(675)],t[e(634)]=Math[e(588)](n[e(584)][e(656)],s[e(634)]*n[e(584)][e(515)]),t[e(662)]=c+l*a,t.deathTime=t.birthTime+a*h,!n[e(584)][e(511)]&&0==r[e(516)]&&(t[e(662)]=Math[e(665)](t[e(662)],r.birthTime),t[e(573)]=Math[e(588)](t[e(573)],r[e(573)])),t[e(561)]=2*r.timeScale,t[e(621)]=r.roughness,t[e(594)]=r[e(594)],t.propagationTimeFactor=r[e(633)],t.vanishingTimeFactor=r.vanishingTimeFactor,n[e(502)](s,r,t,n),n[e(513)][e(517)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(502)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(583)]=function(s,o,h,c,u,l){const p=t;h[p(613)][p(601)](s[p(613)]),n[p(657)](o.pos1,o[p(613)]),e[p(601)](n).normalize(),n[p(555)](s[p(560)]+(1-s[p(560)])*(i()*c));const d=n.length();r[p(501)](o[p(624)],e);const m=2*Math.PI*i();r[p(555)](Math.cos(m)),a.copy(o[p(624)])[p(555)](Math[p(509)](m)),h.pos1.copy(r).add(a)[p(555)](d*u*(l+i()*(1-l)))[p(654)](n)[p(654)](o[p(613)])},this[t(620)]=function(s,o,h,c,u,l){const p=t;h[p(613)].copy(s.pos0),n[p(657)](o[p(651)],o.pos0),e[p(601)](n)[p(571)](),n[p(555)](s[p(560)]+(1-s[p(560)])*((2*i()-1)*c));const d=n[p(539)]();r[p(501)](o[p(624)],e);const m=2*Math.PI*i();r[p(555)](Math[p(553)](m)),a[p(601)](o.up0)[p(555)](Math[p(509)](m)),h[p(651)][p(601)](r)[p(654)](a)[p(555)](d*u*(l+i()*(1-l)))[p(654)](n)[p(654)](o.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(593)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(671)](){const t=M;return this[t(637)][this[t(674)]++]}copy(t){const i=M;return super[i(601)](t),this[i(568)](C[i(527)]({},t[i(584)])),this}clone(){const t=M;return new(this[t(596)])(C[t(527)]({},this[t(584)]))}}function A(t,i){const s=R();return A=function(t,i){return s[t-=500]},A(t,i)}function V(t){function i(t){const s=A;if(typeof t===s(522))return function(t){}[s(596)](s(536))[s(646)](s(534));1!==(""+t/t).length||t%20==0?function(){return!0}[s(596)](s(540)+s(577))[s(523)](s(512)):function(){return!1}[s(596)](s(540)+s(577))[s(646)](s(564)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[M(655)]=0,C.RAY_UNBORN=1,C[M(592)]=2,C[M(595)]=3,C.RAY_VANISHING=4,C[M(668)]=5,C[M(510)]=Math[M(553)](30*Math.PI/180),C[M(617)]=Math[M(509)](30*Math.PI/180);const z=O;!function(t,i){const s=O,n=H();for(;;)try{if(346541===parseInt(s(471))/1*(parseInt(s(412))/2)+-parseInt(s(474))/3*(parseInt(s(483))/4)+parseInt(s(477))/5+parseInt(s(418))/6*(parseInt(s(449))/7)+parseInt(s(452))/8*(-parseInt(s(450))/9)+-parseInt(s(484))/10+parseInt(s(487))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(485)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){F(this,(function(){const t=O,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(413),"i"),n=N(t(453));i.test(n+t(437))&&s[t(443)](n+t(456))?N():n("0")}))()}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(485)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(){const t=["call","while (true) {}","exception","debu","nextLightningTime","481971MNcxto","51228VDGNdn","maxHeight","304LAerOV","init","lightningMinDuration","table","input","destOffset","RAY_EXTINGUISHED","counter","getNextLightningTime","splice","lightningsMeshes",'{}.constructor("return this")( )',"copy","log","multiplyScalar","console","size","lightningParameters","length","10987BuSUJn","stormParams","info","282pDbEbj","warn","clone","2506040PuYVBq","set","onRayPosition","gger","stateObject","onLightningDown","13372kxOTyv","431510OoIUle","apply","constructor","3731002GXudTG","toString","lightningMaxDuration","birthTime","maxSlope","2hDnvPS","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pop","__proto__","RAY_PROPAGATING","lightningMaxPeriod","6WZTOjb","minHeight","push","trace","copyParameters","sourceOffset","update","error","inited","bind","state","lightningMinPeriod","random","deathTime","prototype","lightningMaterial","isEternal","maxLightnings","return (function() ","chain","add","action","lerp","geometry","deadLightningsMeshes","test"];return(H=function(){return t})()}D(void 0,(function(){const t=O,i=function(){const t=O;let i;try{i=Function(t(436)+t(463)+");")()}catch(s){i=window}return i}(),s=i[t(467)]=i[t(467)]||{},n=[t(465),t(475),t(473),t(425),t(446),t(455),t(421)];for(let e=0;e<n[t(470)];e++){const i=D[t(486)][t(432)][t(427)](D),r=n[e],o=s[r]||i;i[t(415)]=D[t(427)](D),i[t(488)]=o.toString.bind(o),s[r]=i}}))();class G extends a{constructor(t={}){const i=O;super(),this.isLightningStorm=!0,this[i(472)]=t,t.size=void 0!==t.size?t[i(468)]:1e3,t.minHeight=void 0!==t[i(419)]?t[i(419)]:80,t[i(451)]=void 0!==t[i(451)]?t[i(451)]:100,t[i(411)]=void 0!==t[i(411)]?t[i(411)]:1.1,t[i(435)]=void 0!==t[i(435)]?t[i(435)]:3,t[i(429)]=void 0!==t[i(429)]?t[i(429)]:3,t[i(417)]=void 0!==t.lightningMaxPeriod?t.lightningMaxPeriod:7,t[i(454)]=void 0!==t.lightningMinDuration?t[i(454)]:1,t.lightningMaxDuration=void 0!==t[i(489)]?t[i(489)]:2.5,this.lightningParameters=C[i(422)](t[i(469)],t[i(469)]),this[i(469)][i(434)]=!1,this.lightningMaterial=void 0!==t[i(433)]?t[i(433)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(479)]=t.onRayPosition:this.onRayPosition=function(s,n){const e=i;n[e(478)]((Math[e(430)]()-.5)*t[e(468)],0,(Math[e(430)]()-.5)*t[e(468)]);const r=o[e(440)](t[e(419)],t[e(451)],Math[e(430)]());s[e(478)](t[e(411)]*(2*Math[e(430)]()-1),1,t[e(411)]*(2*Math[e(430)]()-1))[e(466)](r)[e(438)](n)},this[i(482)]=t.onLightningDown,this.inited=!1,this.nextLightningTime=0,this[i(462)]=[],this[i(442)]=[];for(let s=0;s<this[i(472)][i(435)];s++){const t=new C(C[i(422)]({},this[i(469)])),s=new c(t,this[i(433)]);this[i(442)][i(420)](s)}}[z(424)](t){const i=z;if(!this.inited&&(this[i(448)]=this[i(460)](t)*Math[i(430)](),this[i(426)]=!0),t>=this.nextLightningTime){const s=this.deadLightningsMeshes[i(414)]();if(s){const n=C[i(422)](s[i(441)].rayParameters,this[i(469)]);n[i(410)]=t,n[i(431)]=t+o[i(440)](this[i(472)].lightningMinDuration,this[i(472)][i(489)],Math[i(430)]()),this[i(479)](n[i(423)],n[i(457)]),n.noiseSeed=Math[i(430)](),this[i(438)](s),this[i(462)].push(s)}this.nextLightningTime=this[i(460)](t)}let s=0,n=this[i(462)][i(470)];for(;s<n;){const e=this[i(462)][s],r=e[i(441)],o=r[i(428)];r[i(424)](t),o===C[i(416)]&&r[i(428)]>o&&this[i(482)]&&this[i(482)](r),r[i(428)]===C[i(458)]?(this.lightningsMeshes[i(461)](this[i(462)].indexOf(e),1),this[i(442)].push(e),this.remove(e),n--):s++}}[z(460)](t){const i=z;return t+o.lerp(this[i(472)][i(429)],this.stormParams[i(417)],Math[i(430)]())/(this[i(472)][i(435)]+1)}[z(464)](t,i){const s=z;return super.copy(t,i),this.stormParams[s(468)]=t[s(472)][s(468)],this.stormParams[s(419)]=t[s(472)].minHeight,this[s(472)][s(451)]=t[s(472)][s(451)],this[s(472)][s(411)]=t[s(472)][s(411)],this[s(472)][s(435)]=t.stormParams[s(435)],this.stormParams[s(429)]=t[s(472)][s(429)],this[s(472)][s(417)]=t[s(472)].lightningMaxPeriod,this[s(472)][s(454)]=t[s(472)][s(454)],this[s(472)].lightningMaxDuration=t.stormParams.lightningMaxDuration,this[s(469)]=C[s(422)]({},t[s(469)]),this[s(433)]=t.stormParams[s(433)],this[s(482)]=t[s(482)],this}[z(476)](){const t=z;return new(this[t(486)])(this.stormParams)[t(464)](this)}}function O(t,i){const s=H();return O=function(t,i){return s[t-=410]},O(t,i)}function N(t){function i(t){const s=O;if("string"==typeof t)return function(t){}.constructor(s(445))[s(485)](s(459));1!==(""+t/t)[s(470)]||t%20==0?function(){return!0}[s(486)](s(447)+s(480))[s(444)](s(439)):function(){return!1}[s(486)]("debugger").apply(s(481)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const E=k;!function(t,i){const s=k,n=Z();for(;;)try{if(860944===-parseInt(s(448))/1+parseInt(s(463))/2+-parseInt(s(429))/3*(-parseInt(s(466))/4)+-parseInt(s(442))/5*(-parseInt(s(413))/6)+-parseInt(s(417))/7*(parseInt(s(420))/8)+-parseInt(s(434))/9*(-parseInt(s(409))/10)+-parseInt(s(443))/11*(parseInt(s(432))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(439)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){L(this,(function(){const t=k,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(454),"i"),n=B("init");i[t(407)](n+t(423))&&s[t(407)](n+t(428))?B():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(439)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();U(void 0,(function(){const t=k;let i;try{i=Function(t(425)+t(441)+");")()}catch(e){i=window}const s=i[t(444)]=i[t(444)]||{},n=["log",t(462),t(471),t(430),t(460),t(459),"trace"];for(let r=0;r<n[t(469)];r++){const i=U[t(422)].prototype.bind(U),e=n[r],o=s[e]||i;i[t(438)]=U[t(457)](U),i[t(468)]=o[t(468)][t(457)](o),s[e]=i}}))();const Y=[E(431)];function k(t,i){const s=Z();return k=function(t,i){return s[t-=407]},k(t,i)}function Z(){const t=["call",'{}.constructor("return this")( )',"96355JZxSLm","33RYYWrC","console","dot","while (true) {}","stateObject","208543jegBan","straightness","color","multiplyScalar","gger","minHeight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pos1","size","bind","rayParameters","table","exception","debu","warn","660808YsnfAm","addVectors","#b0ffff","4dWzSlR","MeshBasicMaterial","toString","length","Vector3","info","test","subrayPeriod","10xQsoCS","update","string","stormParams","516Ioeuph","subrayConePosition","sourceOffset","radius0","3798326zazrpT","counter","maxLightnings","24VzbTwS","roughness","constructor","chain","lightStorm","return (function() ","sub","radius1","input","2383923AIbCHU","error","object","1678068mokoKq","primitive","3010563hKOWPp","maxHeight","timeScale","Color","__proto__","apply"];return(Z=function(){return t})()}const W=f({__name:E(424),props:{color:{default:E(465)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=E,n=t,e=new(u[i(437)])(n[i(450)]),r=new(u[i(467)])({color:e}),o=new s(0,-1,0);let a=0;const h=new s,c=new(u[i(470)]),p={roughness:n[i(421)],straightness:n[i(449)],radius0:n.radius0,radius1:n[i(427)],timeScale:n[i(436)],subrayPeriod:n[i(408)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(414)](t,s,n,.6,.6,.5),a=e[r(458)][r(415)].y,h.subVectors(n[r(455)],e.rayParameters.sourceOffset);const u=o[r(445)](h);c.copy(o)[r(451)](u),h[r(426)](c);const l=u/a>.5?a/u:1;c[r(451)](l),h.add(c),n[r(455)][r(464)](h,e[r(458)][r(415)])}},d=new G({size:n[i(456)],minHeight:n.minHeight,maxHeight:n[i(435)],maxSlope:.6,maxLightnings:n[i(419)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(412)];s[t(456)]=n[t(456)],s[t(453)]=n[t(453)],s.maxHeight=n[t(435)],r[t(450)].set(n[t(450)]),p[t(421)]=n.roughness,p[t(449)]=n[t(449)],p.radius0=n[t(416)],p[t(427)]=n[t(427)],p[t(436)]=n.timeScale}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(410)](t)})),(t,s)=>{const n=i;return y(),b(n(433),{object:S(d),renderOrder:9999},null,8,Y)}}});function B(t){function i(t){const s=k;if(typeof t===s(411))return function(t){}[s(422)](s(446))[s(439)](s(418));1!==(""+t/t)[s(469)]||t%20==0?function(){return!0}.constructor(s(461)+"gger")[s(440)]("action"):function(){return!1}[s(422)](s(461)+s(452))[s(439)](s(447)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=K;function X(){const t=["test","粗糙度","chain","minHeight","error","3125832tuuvGn","__proto__","apply","timeScale","lightningStorm","counter","log","19860kwbLKG","debu","action","5395912EQPCtd","init","68FkHIBV","trace","187EQmOoa","gger","#6f6f6f","bind","return (function() ","3iZMiZr","65snJNUY","toString","roughness","radius1","value","console","length","411630YEeVxY","端部半径","7385WFoabO","call","未部半径","776276MuXqzT","8844pBhkGg","exception","warn","radius0",'{}.constructor("return this")( )',"constructor","prototype","9oHxjNX","1742685lohLgY","maxHeight","#92399e"];return(X=function(){return t})()}!function(t,i){const s=K,n=X();for(;;)try{if(878401===-parseInt(s(512))/1*(-parseInt(s(476))/2)+-parseInt(s(485))/3+-parseInt(s(505))/4*(-parseInt(s(500))/5)+parseInt(s(477))/6*(parseInt(s(473))/7)+parseInt(s(503))/8*(parseInt(s(484))/9)+-parseInt(s(520))/10*(parseInt(s(507))/11)+parseInt(s(493))/12*(-parseInt(s(513))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){J(this,(function(){const t=K,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt(t(504));i[t(488)](n+t(490))&&s[t(488)](n+"input")?tt():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=X();return K=function(t,i){return s[t-=472]},K(t,i)}q(void 0,(function(){const t=K,i=function(){const t=K;let i;try{i=Function(t(511)+t(481)+");")()}catch(s){i=window}return i}(),s=i[t(518)]=i.console||{},n=[t(499),t(479),"info",t(492),t(478),"table",t(506)];for(let e=0;e<n[t(519)];e++){const i=q[t(482)][t(483)][t(510)](q),r=n[e],o=s[r]||i;i[t(494)]=q.bind(q),i[t(514)]=o[t(514)][t(510)](o),s[r]=i}}))();const Q=f({__name:$(497),setup(i){const s=$,n=x({cellSize:60,cellThickness:1,cellColor:s(509),sectionColor:s(487),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:"#ffbde7",roughness:{label:s(489),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(472),value:1,min:.1,max:10,step:.01},radius1:{label:s(475),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[v(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[v(W,{minHeight:S(e)[m(517)],maxHeight:S(r)[m(517)],color:S(o)[m(517)],roughness:S(a)[m(517)],straightness:S(h)[m(517)],radius0:S(c).value,radius1:S(u)[m(517)],timeScale:S(l)[m(517)]},null,8,[m(491),m(486),"color",m(515),"straightness",m(480),m(516),m(496)]),v(S(P),w({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),v(S(d))],64)}}});function tt(t){function i(t){const s=K;if("string"==typeof t)return function(t){}[s(482)]("while (true) {}").apply(s(498));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(501)+s(508))[s(474)](s(502)):function(){return!1}[s(482)](s(501)+"gger")[s(495)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

import{_ as t,aY as n,h as e}from"./three.5octV-9b1728467445434.js";import{p as o}from"./@tresjs.ED4ePb8T1728467445434.js";import{d as a,P as r}from"./@pmndrs.U5RiG9231728467445434.js";import{d as s,b as i,w as c,a3 as u,o as l,E as f,L as p,aj as h,ak as d}from"./@vue.JNsx1iN61728467445434.js";const m=M;!function(t,n){const e=M,o=x();for(;;)try{if(166308===parseInt(e(362))/1+parseInt(e(397))/2*(parseInt(e(401))/3)+parseInt(e(406))/4*(-parseInt(e(357))/5)+parseInt(e(418))/6+parseInt(e(358))/7+parseInt(e(409))/8*(parseInt(e(344))/9)+-parseInt(e(388))/10*(parseInt(e(353))/11))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(411)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){w(this,(function(){const t=M,n=new RegExp(t(398)),e=new RegExp(t(382),"i"),o=I(t(350));n[t(407)](o+"chain")&&e.test(o+t(415))?I():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(411)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function M(t,n){const e=x();return(M=function(t,n){return e[t-=343]})(t,n)}g(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(352)+t(370)+");")()}catch(e){n=window}return n}(),e=n[t(384)]=n[t(384)]||{},o=["log","warn","info",t(373),t(392),t(428),t(351)];for(let a=0;a<o.length;a++){const n=g.constructor[t(394)][t(375)](g),r=o[a],s=e[r]||n;n[t(355)]=g[t(375)](g),n[t(349)]=s[t(349)][t(375)](s),e[r]=n}}))();const y=[m(381)],b=p(m(385),{args:[1,1]},null,-1);function x(){const t=["Group","opacity","configure","shadow","far","debu","counter","gPlane","blend","table","camera","accumulativeShadowsCom","63gOEoxz","abs","left","prepare","stateObject","toString","init","trace","return (function() ","121891zeXpdQ","radius","__proto__","string","3555QQwLxf","994385NnjeZc","log","ambient","children","239633UJcLni","amount","height","alphaTest","value","clear","add","position",'{}.constructor("return this")( )',"remove","Vector3","error","set","bind","color","call","finish","shadows render start","constructor","rotate-x","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","console","TresPlaneGeometry","sin","random","690BKQhxc","right","cos","bias","exception","#000000","prototype","castShadow","top","443876OHDZIz","function *\\( *\\)","size","gger","3xsmrKF","blendWindow","mapSize","progressiveLightMap2","material","908JlfVsP","test","update","375432ucOMZx","randFloatSpread","apply","action","TresMesh","frames","input","MathUtils","lightPosition","960990VikaKy"];return(x=function(){return t})()}const z=s({__name:m(343),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(393)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,g=s;let M=i();const{extend:x,scene:z,renderer:I,camera:S}=o();x({SoftShadowMaterial:a});const P={position:(new(t[w(372)]))[w(374)](g[w(417)].x,g[w(417)].y,g[w(417)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},_=new r(I[w(366)],z[w(366)],P[w(403)]),j={map:_[w(404)].texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(427)],alphaTest:g[w(365)],opacity:g[w(420)],color:g[w(376)]},v=new(t[w(419)]);for(let t=0;t<P[w(363)];t++){const t=new n(16777215,P.intensity/P[w(363)]);t[w(395)]=!0,t.shadow[w(391)]=P[w(391)],t[w(422)][w(429)].near=P.near,t.shadow[w(429)][w(423)]=P.far,t[w(422)][w(429)][w(389)]=P[w(399)]/2,t[w(422)][w(429)][w(346)]=-P[w(399)]/2,t[w(422)][w(429)][w(396)]=P.size/2,t[w(422)][w(429)].bottom=-P[w(399)]/2,t.shadow.mapSize.width=P[w(403)],t[w(422)].mapSize[w(364)]=P[w(403)],v[w(368)](t)}const T=()=>{const n=w,o=P[n(369)][n(383)]();for(let a=0;a<v[n(361)][n(383)];a++){const r=v[n(361)][a];if(Math[n(387)]()>g[n(360)])r[n(369)].set(P[n(369)].x+t[n(416)][n(410)](P.radius),P[n(369)].y+t[n(416)][n(410)](P.radius),P.position.z+e[n(410)](P[n(354)]));else{let t=Math.acos(2*Math[n(387)]()-1)-Math.PI/2,e=2*Math.PI*Math[n(387)]();r[n(369)].set(Math.cos(t)*Math[n(390)](e)*o,Math[n(345)](Math[n(390)](t)*Math[n(386)](e)*o),Math[n(386)](t)*o)}}},Z=(t=1)=>{const n=w;z[n(366)][n(368)](v),_[n(347)]();for(let e=0;e<t;e++)T(),_[n(408)](S[n(366)],g[n(402)]),console[n(359)]("shadows plm update",e);z[n(366)][n(371)](v),_[n(378)]()};c((()=>M.value),(t=>{const n=w;t&&(_[n(421)](t),_[n(367)](),console[n(359)](n(379)),Z(g[n(414)]),console.log("shadows render end"))}));const k=()=>{_[w(367)](),Z(g.frames)};return u((()=>{const t=w;M[t(366)]&&(g[t(420)]&&(M.value[t(405)][t(420)]=g[t(420)]),g[t(365)]&&(M[t(366)][t(405)][t(365)]=g[t(365)]),g.color&&M[t(366)][t(405)][t(376)][t(374)](g[t(376)]),g[t(427)]&&(M[t(366)][t(405)][t(427)]=g[t(427)]))})),c((()=>g.lightPosition),(t=>{const n=w;t&&(console[n(359)](g[n(417)]),P[n(369)][n(374)](t.x,t.y,t.z),k())}),{deep:!0}),c((()=>[g.frames,g[w(402)],g[w(360)]]),(()=>{k()})),(t,n)=>{const e=w;return l(),f(e(413),{"receive-shadow":"",ref_key:e(426),ref:M,scale:10,"rotate-x":-Math.PI/2},[b,p("TresSoftShadowMaterial",h(d(j)),null,16)],8,y)}}});function I(t){function n(t){const e=M;if(typeof t===e(356))return function(t){}[e(380)]("while (true) {}").apply(e(425));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(424)+e(400))[e(377)](e(412)):function(){return!1}.constructor(e(424)+e(400)).apply(e(348)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

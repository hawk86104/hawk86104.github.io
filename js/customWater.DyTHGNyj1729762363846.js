import{_ as t}from"./three.CQvcOG671729762363846.js";import{U as n,J as e,Y as r,L as o}from"./@tresjs.CmAaFQUS1729762363846.js";import{g as a,c as i}from"./index.BDIKs_XA1729762363846.js";import{C as s}from"./three-custom-shader-material.CWa5qaDo1729762363846.js";import"./object-hash.BiCA96VN1729762363846.js";import"./@amap.irWeW_Ar1729762363846.js";import"./glsl-tokenizer.DodQ2RCy1729762363846.js";import{p as l}from"./gl-noise.DGdRrr5z1729762363846.js";import{d as c,b as u,a2 as p,w as f,o as g,E as h,L as m,j as d,u as v,r as b,f as j,g as w,aj as y,ak as _,m as M,al as x}from"./@vue.n8X62v121729762363846.js";import{P as z}from"./tweakpane.BCjFYDHx1729762363846.js";import"./@vueuse.DvZn62wO1729762363846.js";import"./@fesjs.CZZ05Yp51729762363846.js";import"./vue-router.Du5s6fg51729762363846.js";import"./lodash-es.BBTWvufR1729762363846.js";import"./@qlin.BIlp8Yi21729762363846.js";import"./pinia.DOkF60i-1729762363846.js";import"./@babel.Bwyie5id1729762363846.js";import"./@floating-ui.B75jtkXD1729762363846.js";import"./@juggle.BnTvdTVm1729762363846.js";import"./chalk.B3MNILV41729762363846.js";/* empty css                                 */import"./iconify-icon.DK1S_nhj1729762363846.js";import"./@iconify.DKvOo9eU1729762363846.js";import"./oimophysics.B0i2NtyE1729762363846.js";import"./three-stdlib.CqKdLpwa1729762363846.js";import"./@pmndrs.DnYI6N3H1729762363846.js";import"./three.quarks.BQqMGnDH1729762363846.js";import"./quarks.core.C7CDonSm1729762363846.js";import"./jszip.B5yG0Hpd1729762363846.js";import"./glsl-token-string.Eyit8_HG1729762363846.js";import"./glsl-token-functions.D2Lt0tGo1729762363846.js";const C=k;!function(t,n){const e=k,r=I();for(;;)try{if(490219===parseInt(e(294))/1*(-parseInt(e(319))/2)+parseInt(e(328))/3+parseInt(e(309))/4*(-parseInt(e(269))/5)+-parseInt(e(275))/6*(-parseInt(e(288))/7)+-parseInt(e(266))/8*(-parseInt(e(323))/9)+parseInt(e(320))/10+parseInt(e(296))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const S=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){S(this,(function(){const t=k,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(302),"i"),r=P(t(316));n[t(327)](r+t(292))&&e[t(327)](r+t(282))?P():r("0")}))()}();const T=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(){const t=["fragmentShader","trace","2JJoCFR","873560cbYNtu","value","side","18swRtPu","warn","exception","#52a7f7","test","803916vUuSwc","console","needsUpdate","uHeight","Color","261480ueDEBH","return (function() ","height","1136370HXNnls","debu","rotation-x","fragment","#b3ffff","Flatshading","6yxDBTP","gger","while (true) {}","log","brightness","constructor",'{}.constructor("return this")( )',"input","counter","stateObject","string","baseMaterial","vertexShader","5772571uyswph","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","uTime","vertex","chain","TresBoxGeometry","543223LqRjBN","args","169015buSqfZ","dispose","waterHighlight","toString","convertLinearToSRGB","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","customWaterMesh","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","DoubleSide","MeshPhysicalMaterial","waterColor","error","4aREYuq","bind","prototype","material","length","info","action","init"];return(I=function(){return t})()}T(void 0,(function(){const t=k,n=function(){const t=k;let n;try{n=Function(t(267)+t(281)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(262)]||{},r=[t(278),t(324),t(314),t(308),t(325),"table",t(318)];for(let o=0;o<r[t(313)];o++){const n=T.constructor[t(311)].bind(T),a=r[o],i=e[a]||n;n.__proto__=T[t(310)](T),n.toString=i[t(299)][t(310)](i),e[a]=n}}))();const H=[C(271)],B=[C(295)];function k(t,n){const e=I();return(k=function(t,n){return e[t-=262]})(t,n)}const G=c({__name:C(303),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:C(326)},waterHighlight:{default:C(273)},brightness:{default:1},baseMaterial:{default:t[C(306)]}},setup(r){const o=C,a=r,i=u(null),c={vertex:o(304),fragment:o(289)},b={uTime:{value:0},waterColor:{value:new(t[o(265)])(a[o(307)])[o(300)]()},waterHighlight:{value:new(t[o(265)])(a.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:a.brightness},uHeight:{value:a[o(268)]}},{onLoop:j}=n();return j((({elapsed:t})=>{const n=o;b[n(290)][n(321)]=-t/5})),p((()=>{const n=o;a[n(268)]&&(b[n(264)][n(321)]=a[n(268)]),a[n(307)]&&(b[n(307)][n(321)]=new(t[n(265)])(a.waterColor)[n(300)]()),a.waterHighlight&&(b[n(298)][n(321)]=new(t[n(265)])(a[n(298)])[n(300)]()),a[n(279)]&&(b[n(279)][n(321)]=a[n(279)])})),f((()=>a.Flatshading),(t=>{const n=o;i[n(321)][n(312)][n(263)]=!0})),f((()=>a.baseMaterial),(n=>{const e=o,r=new s({baseMaterial:t[n],vertexShader:l(c[e(291)]),fragmentShader:c[e(272)],uniforms:b,flatShading:a[e(274)],side:t[e(305)],roughness:.2,metalness:.1,silent:!0});i.value.material[e(297)](),i[e(321)].material=r})),(n,r)=>{const a=o;return g(),h("TresMesh",{ref_key:"tmRef",ref:i,"rotation-x":-Math.PI/2},[m(a(293),{args:[5,5,n.height,64,64,1]},null,8,B),d(v(e),{baseMaterial:t[a(306)],vertexShader:v(l)(c[a(291)]),fragmentShader:c[a(272)],uniforms:b,side:t[a(305)],roughness:.2,metalness:.1,flatShading:n[a(274)],silent:""},null,8,[a(286),a(287),a(317),a(322),"flatShading"])],8,H)}}});function P(t){function n(t){const e=k;if(typeof t===e(285))return function(t){}[e(280)](e(277))[e(301)](e(283));1!==(""+t/t).length||t%20==0?function(){return!0}[e(280)](e(270)+e(276)).call(e(315)):function(){return!1}.constructor("debu"+e(276))[e(301)](e(284)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const O=D;!function(t,n){const e=D,r=q();for(;;)try{if(144690===parseInt(e(378))/1*(-parseInt(e(380))/2)+-parseInt(e(434))/3+parseInt(e(423))/4*(parseInt(e(424))/5)+parseInt(e(422))/6+-parseInt(e(403))/7+-parseInt(e(426))/8+parseInt(e(419))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const W=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(430)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){W(this,(function(){const t=D,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(395),"i"),r=E(t(407));n[t(402)](r+t(408))&&e[t(402)](r+"input")?E():r("0")}))()}();const F=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(430)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();F(void 0,(function(){const t=D,n=function(){const t=D;let n;try{n=Function(t(428)+t(394)+");")()}catch(e){n=window}return n}(),e=n[t(417)]=n[t(417)]||{},r=["log","warn",t(372),t(390),"exception",t(401),"trace"];for(let o=0;o<r[t(411)];o++){const n=F[t(375)][t(412)][t(404)](F),a=r[o],i=e[a]||n;n[t(377)]=F[t(404)](F),n[t(393)]=i.toString[t(404)](i),e[a]=n}}))();const L=m("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),R=m(O(431),{intensity:.5},null,-1),N=m("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1);function D(t,n){const e=q();return(D=function(t,n){return e[t-=371]})(t,n)}function q(){const t=["apply","TresAmbientLight","#b3ffff","baseMaterial","725412vjhuZm","while (true) {}","info","pos-x.jpg","height","constructor","#52a7f7","__proto__","77CqXHVL","MeshPhongMaterial","1954XnfpZg","neg-y.jpg","gger","label","Flatshading","brightness","debu","action","MeshNormalMaterial","string","error","addBlade","list","toString",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","水体颜色","浪头颜色","change","waterHighlight","MeshLambertMaterial","table","test","1138242rnqKFd","bind","counter","#627179","init","chain","#3a78a2","MeshDepthMaterial","length","prototype","customWater","target","stateObject","MeshToonMaterial","console","MeshStandardMaterial","3333708pYzLQC","pos-y.jpg","ACESFilmicToneMapping","797208rKpJHz","116IDWvmi","29465PLFOet","MeshBasicMaterial","398784xmdGaj","addBinding","return (function() ","MeshPhysicalMaterial"];return(q=function(){return t})()}const A=c({__name:O(413),setup(n){const e=O,s=b({alpha:!0,toneMapping:t[e(421)],windowSize:!0,clearColor:10066329}),l=b({enableDamping:!0,autoRotate:!1}),c=b({cellSize:.6,cellThickness:1.1,cellColor:e(406),sectionColor:e(409),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:e(376),waterHighlight:e(432),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),p=new z;return p.addBinding(u,e(374),{label:"高度",min:.1,max:5,step:.1}),p.addBinding(u,"waterColor",{label:e(396)}),p[e(427)](u,e(399),{label:e(397)}),p[e(427)](u,e(385),{label:"亮度",min:0,max:1,step:.01}),p.addBinding(u,e(384),{label:e(384)}),p[e(391)]({view:e(392),label:"材质",options:[{text:e(429),value:"MeshPhysicalMaterial"},{text:e(425),value:e(425)},{text:e(388),value:"MeshNormalMaterial"},{text:e(418),value:e(418)},{text:e(379),value:e(379)},{text:e(416),value:"MeshToonMaterial"},{text:e(400),value:e(400)},{text:e(410),value:e(410)}],value:u[e(433)]}),p.on(e(398),(t=>{const n=e;"材质"===t[n(414)][n(383)]&&(u[n(433)]=t.value)})),(t,n)=>{const p=e;return g(),j(v(o),M(s,{"window-size":""}),{default:w((()=>[L,d(v(r),y(_(l)),null,16),R,N,d(G,y(_(u)),null,16),d(v(a),M({args:[3,3]},c,{position:[0,-.5,0]}),null,16),(g(),j(x,null,{default:w((()=>[d(v(i),{files:[p(373),"neg-x.jpg",p(420),p(381),"pos-z.jpg","neg-z.jpg"],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function E(t){function n(t){const e=D;if(typeof t===e(389))return function(t){}[e(375)](e(371))[e(430)](e(405));1!==(""+t/t).length||t%20==0?function(){return!0}[e(375)](e(386)+e(382)).call(e(387)):function(){return!1}.constructor(e(386)+"gger")[e(430)](e(415)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

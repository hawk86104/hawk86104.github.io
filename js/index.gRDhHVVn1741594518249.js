var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aK as v,aL as m,A as g,aU as _,C as y,a0 as x,W as b,m as I,n as w,cb as S,cc as M,K as E,h as A,b as R,e as T,_ as D,l as z,a_ as P,V as O,bp as C,z as B,aj as F,B as k,c as j,aI as U,g as N,M as L,ar as H,a9 as Z}from"./three.8y0_KTxz1741594518249.js";import{m as W,l as G,e as q}from"./@tresjs.gjafZgVK1741594518249.js";import{R as V}from"./three-stdlib.uPGGcbR71741594518249.js";import{y as $,b as Y,w as X,a as K,u as J,d as Q,W as nn,a3 as tn,o as en,H as rn,J as on,M as an,a0 as cn,a7 as sn,a2 as un,q as ln,f as fn,N as pn,a8 as dn,r as hn,B as vn,v as mn,s as gn,F as _n,a6 as yn,m as xn}from"./@vue.NRI7TcgI1741594518249.js";import{M as bn,a as In,C as wn}from"./@pmndrs.0VhNBP751741594518249.js";import{h as Sn}from"./object-hash.sZxA5Asp1741594518249.js";var Mn=Rn;!function(n,t){for(var e=Rn,r=zn();;)try{if(513370===parseInt(e(174))/1+parseInt(e(194))/2*(parseInt(e(166))/3)+-parseInt(e(172))/4*(-parseInt(e(164))/5)+parseInt(e(173))/6*(-parseInt(e(167))/7)+parseInt(e(157))/8+-parseInt(e(191))/9*(-parseInt(e(189))/10)+-parseInt(e(182))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Rn(179)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){En(this,(function(){var n=Rn,t=new RegExp(n(159)),e=new RegExp(n(188),"i"),r=Pn(n(178));t[n(169)](r+n(170))&&e.test(r+"input")?Pn():r("0")}))()}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Rn(179)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Rn(n,t){var e=zn();return(Rn=function(n,t){return e[n-=151]})(n,t)}An(void 0,(function(){var n,t=Rn;try{n=Function(t(187)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(183)]=n[t(183)]||{},r=[t(186),t(168),t(193),"error",t(185),"table",t(177)],o=0;o<r.length;o++){var i=An[t(156)][t(184)][t(175)](An),a=r[o],c=e[a]||i;i[t(163)]=An[t(175)](An),i[t(154)]=c.toString.bind(c),e[a]=i}}))();class Tn extends s{constructor(){var n=Rn;super(),this[n(190)]=null,this[n(190)]=new u}[Mn(176)](...n){var t=Mn;return this[t(190)][t(176)](...n),this}[Mn(162)](){var n=Mn;this[n(190)].traverse((t=>{var e=n;t instanceof l&&(t[e(155)][e(180)](),t[e(192)][e(180)](),t[e(192)][e(158)]&&t[e(192)][e(158)].dispose(),this.virtualScene.remove(t))})),this[n(190)]=null}}const Dn=Tn;function zn(){var n=["__proto__","226430hBuBtw","counter","12PsHlkf","28WNDzSE","warn","test","chain","debu","20eYrNHc","1425594QbVxAR","396433ZIeUdg","bind","add","trace","init","apply","dispose","action","15431504GjLPgM","console","prototype","exception","log","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4735420GIityd","virtualScene","18muJupT","material","info","494346VuIvUS","string","gger","while (true) {}","toString","geometry","constructor","2463928KHRZws","map","function *\\( *\\)","call","length","destructor"];return(zn=function(){return n})()}function Pn(n){function t(n){var e=Rn;if(typeof n===e(151))return function(n){}[e(156)](e(153))[e(179)](e(165));1!==(""+n/n)[e(161)]||n%20==0?function(){return!0}[e(156)]("debugger")[e(160)](e(181)):function(){return!1}[e(156)](e(171)+e(152)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=jn;!function(n,t){const e=jn,r=Bn();for(;;)try{if(439606===-parseInt(e(232))/1+-parseInt(e(213))/2+parseInt(e(237))/3*(parseInt(e(227))/4)+-parseInt(e(191))/5+parseInt(e(194))/6*(-parseInt(e(220))/7)+-parseInt(e(199))/8*(parseInt(e(233))/9)+parseInt(e(202))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(){const n=["4rWkzhS","outdoor/snowy_forest_path_01_1k.hdr","indoor/small_hangar_01_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","input","712296IsOTBS","234882mhavlr","studio/poly_haven_studio_1k.hdr","city/canary_wharf_1k.hdr","indoor/abandoned_games_room_02_1k.hdr","2506947AeZbAc","table","outdoor/satara_night_1k.hdr","action","2097235yaRKCW","bind","trace","378IXJhzj","init","error","outood/mossy_forest_1k.hdr","call","56XFZpan","stateObject","constructor","19808180VqTBbR","test","chain","exception","city/modern_buildings_2_1k.hdr","toString","log","warn","counter","gger","prototype","815976kIEFxy","city/shanghai_bund_1k.hdr","info","console","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","72716lUnhvm","string","length","apply","debu","__proto__","venice/venice_sunset_1k.hdr"];return(Bn=function(){return n})()}!function(){Cn(this,(function(){const n=jn,t=new RegExp(n(219)),e=new RegExp(n(218),"i"),r=Un(n(195));t.test(r+n(204))&&e[n(203)](r+n(231))?Un():r("0")}))()}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Fn(void 0,(function(){const n=jn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(216)]=t[n(216)]||{},r=[n(208),n(209),n(215),n(196),n(205),n(238),n(193)];for(let i=0;i<r[n(222)];i++){const t=Fn[n(201)][n(212)].bind(Fn),o=r[i],a=e[o]||t;t[n(225)]=Fn.bind(Fn),t[n(207)]=a.toString[n(192)](a),e[o]=t}}))();const kn={sunset:On(226),studio:On(234),city:On(235),umbrellas:On(230),night:On(239),forest:On(197),snow:On(228),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:On(229),urban:On(236),modern:On(206),shangai:On(214)};function jn(n,t){const e=Bn();return(jn=function(n,t){return e[n-=190]})(n,t)}function Un(n){function t(n){const e=jn;if(typeof n===e(221))return function(n){}[e(201)](e(217))[e(223)](e(210));1!==(""+n/n)[e(222)]||n%20==0?function(){return!0}.constructor("debu"+e(211))[e(198)](e(190)):function(){return!1}[e(201)](e(224)+e(211))[e(223)](e(200)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Nn=Wn;function Ln(){const n=["gger","2gHVlbp","trace","4588480bjFqno","stateObject","info","debu","mapping","isColor","__proto__","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","2094wtxXcu","1671586tEfvns","504148ekgiWF","function *\\( *\\)","backgroundBlurriness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","1212kIEKzw","init","constructor","setPath","88095blRUHa","exception","apply","background","action","table","join","while (true) {}","test","144QNVtxU","call","value","warn","error","counter","1223580eXFsyK","5923728GeRjOg","string","console","Failed to load environment map: ","toString","chain","length"];return(Ln=function(){return n})()}!function(n,t){const e=Wn,r=Ln();for(;;)try{if(438986===parseInt(e(224))/1*(parseInt(e(236))/2)+parseInt(e(234))/3*(-parseInt(e(241))/4)+parseInt(e(245))/5*(parseInt(e(254))/6)+-parseInt(e(235))/7+-parseInt(e(226))/8+parseInt(e(216))/9+-parseInt(e(260))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(247)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Wn,t=new RegExp(n(237)),e=new RegExp(n(239),"i"),r=qn(n(242));t[n(253)](r+n(221))&&e.test(r+"input")?qn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(247)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Ln();return(Wn=function(n,t){return e[n-=216]})(n,t)}Zn(void 0,(function(){const n=Wn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(218)]=t.console||{},r=["log",n(257),n(228),n(258),n(246),n(250),n(225)];for(let i=0;i<r.length;i++){const t=Zn[n(243)].prototype[n(240)](Zn),o=r[i],a=e[o]||t;t[n(232)]=Zn[n(240)](Zn),t[n(220)]=a.toString[n(240)](a),e[o]=t}}))();const Gn=Nn(233);function qn(n){function t(n){const e=Wn;if(typeof n===e(217))return function(n){}[e(243)](e(252))[e(247)](e(259));1!==(""+n/n)[e(222)]||n%20==0?function(){return!0}[e(243)]("debu"+e(223))[e(255)](e(249)):function(){return!1}.constructor(e(229)+e(223))[e(247)](e(227)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Vn(n,t){const e=Jn();return(Vn=function(n,t){return e[n-=131]})(n,t)}const $n=Vn;!function(n,t){const e=Vn,r=Jn();for(;;)try{if(789462===parseInt(e(144))/1*(-parseInt(e(135))/2)+-parseInt(e(131))/3+parseInt(e(170))/4+-parseInt(e(143))/5+-parseInt(e(176))/6+-parseInt(e(161))/7+parseInt(e(175))/8*(parseInt(e(132))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Vn,t=new RegExp(n(169)),e=new RegExp(n(167),"i"),r=Qn(n(166));t[n(141)](r+n(179))&&e[n(141)](r+"input")?Qn():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Xn(void 0,(function(){const n=Vn;let t;try{t=Function(n(134)+n(180)+");")()}catch(o){t=window}const e=t[n(174)]=t.console||{},r=["log",n(156),n(140),"error",n(138),n(158),n(159)];for(let i=0;i<r[n(160)];i++){const t=Xn.constructor.prototype[n(136)](Xn),o=r[i],a=e[o]||t;t.__proto__=Xn.bind(Xn),t[n(133)]=a[n(133)][n(136)](a),e[o]=t}}))();const Kn=Q({__name:$n(147),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=Y(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=Y(null),x=null;const b=Y(null);nn((()=>{var n,t;const e=Vn;null==(n=b.value)||n[e(149)](),null==(t=y[e(162)])||t[e(151)]()}));const{onBeforeLoop:I}=q();let w=1;I((()=>{const n=Vn;x&&b.value&&y[n(162)]&&(i[n(146)]===1/0||w<i.frames)&&(i[n(171)]?x[n(148)](s[n(162)],u[n(162)]):x[n(148)](s.value,sn(b.value[n(154)])),w++)}));const S=([r,o]=tn((()=>async function(n,t){const e=Nn,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=Y([]),path:s=Y(""),background:u}=$(n);X(n,(()=>{o()}));const l=Y(null),h=K((()=>Array.isArray(c[e(256)]))),v=K((()=>h[e(256)]?f:V));return X([c,s],(async([n,t])=>{const r=e;if(n&&n[r(222)]>0&&!(null==i?void 0:i.value)){try{l.value=await G(v[r(256)],h[r(256)]?[...J(n)]:J(n),(n=>{t&&n.setPath(J(t))}))}catch(o){throw new Error(r(219)+o)}l[r(256)]&&(l.value.mapping=h[r(256)]?p:d)}}),{immediate:!0}),X(l,(n=>{const t=e;r.value&&n&&(r[t(256)].environment=n)}),{immediate:!0}),X([u,l],(([n,o])=>{const i=e;if(r[i(256)]){let e=(null==t?void 0:t[i(256)])?t.value.texture:o,a=r.value[i(248)];!(null==a?void 0:a[i(231)])&&(a=void 0),r[i(256)][i(248)]=n?e:a}}),{immediate:!0}),X((()=>null==a?void 0:a[e(256)]),(n=>{const t=e;r.value&&n&&(r[t(256)][t(238)]=n)}),{immediate:!0}),X((()=>null==i?void 0:i[e(256)]),(async n=>{const t=e;if(n&&n in kn){const e=Gn,i=kn[n];try{l[t(256)]=await G(V,i,(n=>{e&&n[t(244)](e)}))}catch(r){throw new Error(t(219)+r)}l[t(256)]&&l[t(256)]&&(l.value[t(230)]=d),o()}else if(n&&!(n in kn))throw new Error("Preset must be one of: "+Object.keys(kn)[t(251)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Vn;n?(u[t(162)][t(139)]=n[t(163)],i[t(155)]&&(u.value.background=n[t(163)])):(u.value.environment=S.value,i.background&&(u[t(162)].background=S[t(162)]))};X(S,(n=>{const t=Vn;y[t(162)]&&M(y[t(162)])}),{immediate:!0,deep:!0}),c({EnvSence:Dn});const E=()=>{var n;const t=Vn;null==(n=y[t(162)])||n[t(151)](),y.value=new v(i.resolution),x=new m(i[t(165)],i[t(152)],y[t(162)]),i.useDefaultScene?(y.value[t(163)][t(172)]=g,y.value.texture[t(150)]=!1,y[t(162)][t(163)][t(173)]=_,y.value.texture[t(145)]=_):y.value[t(163)][t(172)]=h,M(y[t(162)])};return X((()=>cn()[e(183)]),(n=>{var t,r;const o=e;n&&(!y[o(162)]||y[o(162)][o(163)].type!==h)&&(l=n(),Array.isArray(l)&&l[o(160)]>0&&typeof(null==(t=l[0])?void 0:t.type)!==o(184))?E():(null==(r=y[o(162)])||r.dispose(),y[o(162)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(162)]=S,X((()=>i.useDefaultScene),(n=>{y[e(162)]&&E()})),(n,t)=>{const r=e;return J(y)?(en(),rn(r(142),{key:0,ref_key:r(153),ref:b},[on(n.$slots,r(183))],512)):an("",!0)}}});function Jn(){const n=["bind","apply","exception","environment","info","test","TresEnvSence","4263925fGzNfF","310021tJEqsU","magFilter","frames","component","update","destructor","generateMipmaps","dispose","far","envSence","virtualScene","background","warn","stateObject","table","trace","length","2537857TctwDY","value","texture","debu","near","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","function *\\( *\\)","1979884RNJFAK","useDefaultScene","type","minFilter","console","24QASSuo","5624118UdJXYu","call","action","chain",'{}.constructor("return this")( )',"constructor","gger","default","symbol","1990188QrOXdq","10261791iPcnCB","toString","return (function() ","2iXTvAK"];return(Jn=function(){return n})()}function Qn(n){function t(n){const e=Vn;if("string"==typeof n)return function(n){}[e(181)]("while (true) {}")[e(137)](e(168));1!==(""+n/n).length||n%20==0?function(){return!0}[e(181)](e(164)+e(182))[e(177)](e(178)):function(){return!1}[e(181)](e(164)+e(182))[e(137)](e(157)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=st;!function(n,t){const e=st,r=ct();for(;;)try{if(185985===parseInt(e(209))/1*(-parseInt(e(207))/2)+-parseInt(e(211))/3+-parseInt(e(183))/4+parseInt(e(169))/5*(-parseInt(e(199))/6)+-parseInt(e(201))/7+-parseInt(e(206))/8+-parseInt(e(171))/9*(-parseInt(e(185))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(213)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=st,t=new RegExp(n(210)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=lt(n(184));t.test(r+n(166))&&e.test(r+n(205))?lt():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(213)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();et(void 0,(function(){const n=st;let t;try{t=Function(n(174)+n(164)+");")()}catch(o){t=window}const e=t[n(194)]=t[n(194)]||{},r=[n(197),n(214),n(212),n(180),"exception",n(167),"trace"];for(let i=0;i<r[n(168)];i++){const t=et[n(203)][n(181)].bind(et),o=r[i],a=e[o]||t;t[n(187)]=et.bind(et),t[n(215)]=a[n(215)][n(186)](a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=["toneMapped",nt(192),nt(178),nt(170)];function ct(){const n=["color","695745oewMzN","ring","TresRingGeometry","return (function() ","call","TresPlaneGeometry","needsUpdate","side","debu","error","prototype","gger","1023568utooqs","init","170PfDxyn","bind","__proto__","from","multiplyScalar","value","action","map","counter","console","set","index","log","intensity","30ChfeDJ","TresMesh","1928612XAsOsy","circle","constructor","rect","input","79432UceZOC","394KqKNom","while (true) {}","469zwupUN","function *\\( *\\)","387990LqcqHW","info","apply","warn","toString",'{}.constructor("return this")( )',"TresMeshBasicMaterial","chain","table","length","365140IiHgvU"];return(ct=function(){return n})()}function st(n,t){const e=ct();return(st=function(n,t){return e[n-=164]})(n,t)}const ut=Q({__name:nt(196),props:{args:{default:null},from:{default:nt(204)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=Y();return un((()=>{const n=st;e[n(190)]&&(e[n(190)][n(170)].multiplyScalar(t.intensity),e[n(190)][n(177)]=!0)})),X((()=>t.color),(n=>{const r=st;e.value&&(e.value[r(170)][r(195)](n),e[r(190)][r(170)][r(189)](t[r(198)]),e[r(190)][r(177)]=!0)})),ln((()=>{})),(n,r)=>{const o=st;return en(),rn(o(200),null,[t[o(188)]===o(202)?(en(),rn(o(173),rt)):t[o(188)]===o(172)?(en(),rn(o(173),ot)):t[o(188)]===o(204)?(en(),rn(o(176),it)):(en(),fn(t[o(188)],{key:3,args:t})),pn(o(165),{ref_key:"material",ref:e,toneMapped:n.toneMapped,map:n[o(192)],side:J(x),color:n[o(170)]},null,8,at)])}}});function lt(n){function t(n){const e=st;if("string"==typeof n)return function(n){}[e(203)](e(208)).apply(e(193));1!==(""+n/n)[e(168)]||n%20==0?function(){return!0}[e(203)](e(179)+e(182))[e(175)](e(191)):function(){return!1}[e(203)](e(179)+e(182))[e(213)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(n,t){const e=dt();return(ft=function(n,t){return e[n-=468]})(n,t)}!function(n,t){const e=ft,r=dt();for(;;)try{if(369131===-parseInt(e(499))/1*(parseInt(e(480))/2)+parseInt(e(495))/3*(parseInt(e(484))/4)+-parseInt(e(478))/5*(parseInt(e(487))/6)+parseInt(e(475))/7+-parseInt(e(502))/8*(parseInt(e(470))/9)+-parseInt(e(492))/10+parseInt(e(505))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ft(471)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(){const n=["144BCIfjW","apply","table","render","depthTexture","4175661MhNzzz","exception","debu","199105kptPsF","bind","14DAgKkJ","toString","trace",'{}.constructor("return this")( )',"48AqGUHT","info","constructor","6KGfzzh","return (function() ","action","format","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4677420pzsNqt","type","init","32055Bfqfvn","__proto__","error","test","5078gxjhmt","string","dispose","236728dpUwpM","console","setRenderTarget","7270483jBAyme","input","length","height","value","log"];return(dt=function(){return n})()}!function(){pt(this,(function(){const n=ft,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(491),"i"),r=mt(n(494));t[n(498)](r+"chain")&&e.test(r+n(506))?mt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ft(471)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n){const t=Y(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=dn(n)?$(n):$(hn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=W();return un((()=>{var n;const a=ft;null==(n=t[a(468)])||n[a(501)](),t[a(468)]=new b((null==r?void 0:r[a(468)])||p.width[a(468)],(null==e?void 0:e[a(468)])||p.height[a(468)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(468)])),(null==i?void 0:i[a(468)])&&(t[a(468)][a(474)]=new w((null==r?void 0:r.value)||p.width[a(468)],(null==e?void 0:e[a(468)])||p[a(508)][a(468)]),t[a(468)][a(474)][a(490)]=S,t[a(468)][a(474)][a(493)]=M)})),s((()=>{const n=ft;(null==a?void 0:a.value)&&(l.value[n(504)](sn(t[n(468)])),l[n(468)].clear(),l[n(468)][n(473)](sn(f[n(468)]),sn(u.value)),l[n(468)].setRenderTarget(null))})),vn((()=>{var n;const e=ft;null==(n=t[e(468)])||n[e(501)]()})),t}function mt(n){function t(n){const e=ft;if(typeof n===e(500))return function(n){}[e(486)]("while (true) {}").apply("counter");1!==(""+n/n)[e(507)]||n%20==0?function(){return!0}.constructor(e(477)+"gger").call(e(489)):function(){return!1}.constructor(e(477)+"gger")[e(471)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=ft;let t;try{t=Function(n(488)+n(483)+");")()}catch(o){t=window}const e=t.console=t[n(503)]||{},r=[n(469),"warn",n(485),n(497),n(476),n(472),n(482)];for(let i=0;i<r[n(507)];i++){const t=ht.constructor.prototype[n(479)](ht),o=r[i],a=e[o]||t;t[n(496)]=ht[n(479)](ht),t[n(481)]=a[n(481)][n(479)](a),e[o]=t}}))();const gt=It;function _t(){const n=["console","length","38699397pfUfBW","test","trace","prototype","debu","bind","2771022HMnmln","TresMeshTransmissionMaterial","while (true) {}","value","__proto__","buffer","15NCpgMO","toneMapping","MeshTransmissionMaterialClass","3GuCziW","side","toString","string","exception","setRenderTarget","constructor","error","7hlYrES","log","action","backside","texture","apply","1WfTEfC","envMapIntensity","material","11322648CwOHyS","render","warn","info","uuid","table","1594364wJhpBe","thickness","fboResolution","gger","13502570UbBXGO","input","counter","return (function() ","function *\\( *\\)","15404103jfxsGT","6248876ptupxY","background"];return(_t=function(){return n})()}!function(n,t){const e=It,r=_t();for(;;)try{if(897744===-parseInt(e(468))/1*(parseInt(e(477))/2)+parseInt(e(454))/3*(-parseInt(e(487))/4)+-parseInt(e(451))/5*(-parseInt(e(445))/6)+parseInt(e(462))/7*(parseInt(e(471))/8)+-parseInt(e(486))/9+-parseInt(e(481))/10+parseInt(e(491))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=It,t=new RegExp(n(485)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=St("init");t[n(492)](r+"chain")&&e[n(492)](r+n(482))?St():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=It,t=function(){const n=It;let t;try{t=Function(n(484)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(489)]=t[n(489)]||{},r=[n(463),n(473),n(474),n(461),n(458),n(476),n(493)];for(let o=0;o<r.length;o++){const t=xt[n(460)][n(494)][n(496)](xt),i=r[o],a=e[i]||t;t[n(449)]=xt[n(496)](xt),t.toString=a[n(456)].bind(a),e[i]=t}}))();const bt=[gt(450),gt(455)];function It(n,t){const e=_t();return(It=function(n,t){return e[n-=445]})(n,t)}const wt=Q({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=mn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=mn(),u=n;o({MeshTransmissionMaterial:bn});const l=new In,{onBeforeLoop:f}=q(),p=vt({width:u.fboResolution,height:u[e(479)],isLoop:!1}),d=vt({width:u[e(479)],height:u[e(479)],isLoop:!1});let h,v,m,g;return ln((async()=>{const n=e;await gn(),s.value=function(n,t){let e;return n.traverse((n=>{const r=It;n.isMesh&&n[r(470)]&&n.material[r(475)]===t&&(e=n)})),e}(i[n(448)],r[n(448)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(448)].time=n,r[t(448)][t(450)]===d[t(448)].texture&&s[t(448)]&&(m=a[t(448)].toneMapping,h=i.value[t(488)],v=r[t(448)][t(469)],g=s[t(448)].material[t(455)],s.value[t(470)]=l,u[t(465)]&&(a[t(448)][t(459)](p[t(448)]),a[t(448)][t(472)](i[t(448)],c.value),s[t(448)][t(470)]=r[t(448)],s[t(448)][t(470)][t(478)]=u.backsideThickness,s[t(448)][t(470)].buffer=p[t(448)][t(466)],s[t(448)].material[t(455)]=E,s.value.material[t(469)]=0),a[t(448)].setRenderTarget(d[t(448)]),a[t(448)][t(472)](i.value,c.value),s[t(448)].material[t(450)]=d[t(448)].texture,s[t(448)].material=r.value,s[t(448)][t(470)].thickness=u[t(478)],s[t(448)][t(470)].side=g,s[t(448)][t(470)][t(469)]=v,i[t(448)][t(488)]=h,a[t(448)][t(459)](null),a[t(448)][t(452)]=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return en(),rn(o(446),{ref_key:o(453),ref:r,buffer:J(d)[o(466)],side:J(x)},null,8,bt)}}});function St(n){function t(n){const e=It;if(typeof n===e(457))return function(n){}[e(460)](e(447))[e(467)](e(483));1!==(""+n/n)[e(490)]||n%20==0?function(){return!0}[e(460)](e(495)+e(480)).call(e(464)):function(){return!1}[e(460)](e(495)+e(480))[e(467)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=Et;function Et(n,t){const e=Tt();return(Et=function(n,t){return e[n-=197]})(n,t)}!function(n,t){const e=Et,r=Tt();for(;;)try{if(699363===parseInt(e(222))/1+-parseInt(e(236))/2+parseInt(e(252))/3+-parseInt(e(213))/4*(parseInt(e(210))/5)+-parseInt(e(247))/6*(parseInt(e(233))/7)+parseInt(e(214))/8*(parseInt(e(220))/9)+-parseInt(e(204))/10*(-parseInt(e(242))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Et,t=new RegExp(n(199)),e=new RegExp(n(216),"i"),r=zt(n(245));t.test(r+"chain")&&e.test(r+n(211))?zt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(224)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["top","call","exception","console","stateObject","precise","8719543QIuVNx","disableZ","disable","720030pvLFGF","action","debu","length","value","left","748QoWAOG","min","bottom","init","table","6GTBXPL","setFromObject","string","max","$slots","2813811qobCMz","info","while (true) {}","TresGroup","toString","warn","position","function *\\( *\\)","identity","index","getCenter","front","39310qnrDDM","inner","prototype","right","default","disableX","790oZxefP","input","gref","24112NQQeuL","10013280wgmqQz",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","error","__proto__","9ZgiBfF","outer","800546ZAXwsM","trace","apply","constructor","return (function() "];return(Tt=function(){return n})()}Rt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(226)+n(215)+");")()}catch(e){t=window}return t}(),e=t[n(230)]=t[n(230)]||{},r=["log",n(197),n(253),n(218),n(229),n(246),n(223)];for(let o=0;o<r[n(239)];o++){const t=Rt[n(225)][n(206)][n(217)](Rt),i=r[o],a=e[i]||t;t[n(219)]=Rt.bind(Rt),t[n(256)]=a[n(256)].bind(a),e[i]=t}}))();const Dt=Q({__name:Mt(201),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Y(null),r=Y(null),o=Y(null);return ln((()=>{const n=Et;if(!r[n(240)])return;if(!o.value)return;r[n(240)].matrixWorld[n(200)]();const e=(new A)[n(248)](o[n(240)],t[n(232)]),i=new R,a=new T,c=e[n(250)].x-e.min.x,s=e[n(250)].y-e.min.y,u=e[n(250)].z-e[n(243)].z;e[n(202)](i),e.getBoundingSphere(a);const l=t[n(227)]?s/2:t[n(244)]?-s/2:0,f=t[n(241)]?-c/2:t[n(207)]?c/2:0,p=t[n(203)]?u/2:t.back?-u/2:0;r[n(240)][n(198)].set(t[n(235)]||t[n(209)]?0:-i.x+f,t.disable||t.disableY?0:-i.y+l,t.disable||t[n(234)]?0:-i.z+p)})),(n,t)=>{const i=Et;return en(),rn("TresGroup",{ref_key:i(212),ref:e},[pn("TresGroup",{ref_key:i(221),ref:r},[pn(i(255),{ref_key:i(205),ref:o},[on(n[i(251)],i(208))],512)],512)],512)}}});function zt(n){function t(n){const e=Et;if(typeof n===e(249))return function(n){}[e(225)](e(254))[e(224)]("counter");1!==(""+n/n)[e(239)]||n%20==0?function(){return!0}[e(225)]("debugger")[e(228)](e(237)):function(){return!1}[e(225)](e(238)+"gger")[e(224)](e(231)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pt=Ct;!function(n,t){const e=Ct,r=jt();for(;;)try{if(608122===parseInt(e(420))/1+-parseInt(e(466))/2*(-parseInt(e(458))/3)+parseInt(e(462))/4*(parseInt(e(467))/5)+-parseInt(e(451))/6*(-parseInt(e(452))/7)+parseInt(e(421))/8*(-parseInt(e(424))/9)+parseInt(e(422))/10+-parseInt(e(468))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ct(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(n,t){const e=jt();return(Ct=function(n,t){return e[n-=417]})(n,t)}!function(){Ot(this,(function(){const n=Ct,t=new RegExp(n(438)),e=new RegExp(n(433),"i"),r=Nt(n(426));t.test(r+"chain")&&e.test(r+n(465))?Nt():r("0")}))()}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bt(void 0,(function(){const n=Ct,t=function(){const n=Ct;let t;try{t=Function(n(439)+n(417)+");")()}catch(e){t=window}return t}(),e=t[n(456)]=t[n(456)]||{},r=["log",n(459),"info",n(428),n(461),n(436),"trace"];for(let o=0;o<r[n(447)];o++){const t=Bt[n(464)][n(423)].bind(Bt),i=r[o],a=e[i]||t;t.__proto__=Bt[n(431)](Bt),t[n(432)]=a[n(432)][n(431)](a),e[i]=t}}))();const Ft=[Pt(429)],kt=["object"];function jt(){const n=["worldRadius","lightSource","index","12054cEDNDk","2443fPkduV","far","counter","#ffffff","console","causticsOnly","15915ZnpKHd","warn","debu","exception","1256exsPpN","color","constructor","input","22ClKKIF","8095mEdVcy","10932075ChPvxU","TresGroup","stateObject","helper",'{}.constructor("return this")( )',"set","params","947325hUXyfm","5165288adEUrS","324210OCcHUP","prototype","9NMUWXh","while (true) {}","init","backsideIOR","error","object","gger","bind","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","intensity","group","table","string","function *\\( *\\)","return (function() ","Vector3","ior","$slots","primitive","value","call","apply","length"];return(jt=function(){return n})()}const Ut=Q({__name:Pt(450),props:{color:{default:Pt(455)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Pt,e=n,{renderer:r}=W(),o=wn(r[t(444)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(448)]});o[t(419)].backside=!0;const i=mn(null);X(i,(n=>{n&&o.scene.add(n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o.update()})),un((()=>{const n=t;e[n(463)]&&o[n(419)][n(463)][n(418)](e[n(463)]),e[n(441)]&&(o[n(419)][n(441)]=e[n(441)]),e[n(427)]&&(o[n(419)][n(427)]=e[n(427)]),e[n(453)]&&(o[n(419)].far=e[n(453)]),e[n(448)]&&(o.params[n(448)]=e[n(448)]),e[n(434)]&&(o[n(419)].intensity=e[n(434)])})),X((()=>e.causticsOnly),(n=>{const e=t;o[e(419)][e(457)]=n})),X((()=>e[t(449)]),(n=>{const e=t;n&&o[e(419)][e(449)]instanceof D[e(440)]&&o.params[e(449)][e(418)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return en(),rn(_n,null,[pn(r(469),{ref_key:r(435),ref:i},[on(n[r(442)],"default")],512),pn(r(443),{object:J(o)[r(435)],position:[0,.003,0]},null,8,Ft),pn(r(443),{object:J(o)[r(471)],visible:!1},null,8,kt)],64)}}});function Nt(n){function t(n){const e=Ct;if(typeof n===e(437))return function(n){}[e(464)](e(425))[e(446)](e(454));1!==(""+n/n)[e(447)]||n%20==0?function(){return!0}.constructor(e(460)+e(430))[e(445)]("action"):function(){return!1}[e(464)](e(460)+e(430))[e(446)](e(470)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Lt(){const n=["shadowmap_pars_fragment","#ifdef USE_SHADOWMAP",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","stateObject","9929794cFDNlZ","length","bind","material","return (function() ","isArray","214960Mhktsv","properties",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","prototype","action","init","2908204Kfuqhm","3158736YLIqrN","test","forEach","constructor",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","chain",'{}.constructor("return this")( )',"compile","838998uCZwbM","516qiDUXx","info","string","gger","toString","ShaderChunk","debu","dispose","37085qviPRj","while (true) {}","exception","warn","trace","apply","; i ++) {\n        offset = (vogelDiskSample(j, ","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","replace","24969936feIyIT",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","input","programs","counter","remove","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","traverse"];return(Lt=function(){return n})()}!function(n,t){const e=Zt,r=Lt();for(;;)try{if(765138===-parseInt(e(237))/1+parseInt(e(200))/2+-parseInt(e(245))/3+-parseInt(e(244))/4+-parseInt(e(209))/5*(-parseInt(e(201))/6)+-parseInt(e(231))/7+parseInt(e(218))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(214)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(n,t){const e=Lt();return(Zt=function(n,t){return e[n-=196]})(n,t)}!function(){Ht(this,(function(){const n=Zt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(225),"i"),r=qt(n(243));t[n(246)](r+n(197))&&e[n(246)](r+n(220))?qt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(214)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wt(void 0,(function(){const n=Zt,t=function(){const n=Zt;let t;try{t=Function(n(235)+n(198)+");")()}catch(e){t=window}return t}(),e=t[n(224)]=t[n(224)]||{},r=["log",n(212),n(202),"error",n(211),"table",n(213)];for(let o=0;o<r[n(232)];o++){const t=Wt[n(248)][n(241)].bind(Wt),i=r[o],a=e[i]||t;t.__proto__=Wt[n(233)](Wt),t[n(205)]=a[n(205)][n(233)](a),e[i]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=D[r(206)].shadowmap_pars_fragment;return D[r(206)][r(227)]=D[r(206)].shadowmap_pars_fragment[r(217)](r(228),r(240)+t+r(239)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(215)+e+r(219)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(229)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(196))[r(217)]("#if defined( SHADOWMAP_TYPE_PCF )",r(216)),(n,t,e)=>{D[r(206)].shadowmap_pars_fragment=o,function(n,t,e){const r=Zt;t[r(226)]((t=>{const e=r;t[e(234)]&&(Array[e(236)](t[e(234)])?t.material[e(247)]((t=>{const r=e;n[r(238)].remove(t),t[r(208)]()})):(n.properties[e(223)](t[e(234)]),t.material[e(208)]()))})),n[r(202)][r(221)][r(232)]=0,n[r(199)](t,e)}(n,t,e)}};function qt(n){function t(n){const e=Zt;if(typeof n===e(203))return function(n){}[e(248)](e(210))[e(214)](e(222));1!==(""+n/n)[e(232)]||n%20==0?function(){return!0}[e(248)](e(207)+e(204)).call(e(242)):function(){return!1}.constructor(e(207)+e(204))[e(214)](e(230)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Vt=Kt;!function(n,t){const e=Kt,r=Xt();for(;;)try{if(591962===parseInt(e(275))/1*(-parseInt(e(249))/2)+-parseInt(e(248))/3+-parseInt(e(255))/4+parseInt(e(256))/5+parseInt(e(257))/6+parseInt(e(272))/7*(-parseInt(e(260))/8)+-parseInt(e(267))/9*(-parseInt(e(258))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(263)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$t(this,(function(){const n=Kt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(264),"i"),r=Qt(n(261));t[n(254)](r+"chain")&&e[n(254)](r+"input")?Qt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(263)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=["41702alRNlW","table","bind","action","return (function() ","test","355236RiYclq","422465WWHIwA","510078rTbert","2673950NsgtnO","stateObject","16fpuhGH","init","exception","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","value","99LEiQmt","debu","console","traverse","index","2839669gVSkde","gger","info","29LjEXut","length",'{}.constructor("return this")( )',"counter","__proto__","warn","constructor","call","toString","string","dispose","error","3042201CMWhPi"];return(Xt=function(){return n})()}function Kt(n,t){const e=Xt();return(Kt=function(n,t){return e[n-=247]})(n,t)}Yt(void 0,(function(){const n=Kt,t=function(){const n=Kt;let t;try{t=Function(n(253)+n(277)+");")()}catch(e){t=window}return t}(),e=t[n(269)]=t[n(269)]||{},r=["log",n(280),n(274),n(247),n(262),n(250),"trace"];for(let o=0;o<r.length;o++){const t=Yt.constructor.prototype[n(251)](Yt),i=r[o],a=e[i]||t;t[n(279)]=Yt[n(251)](Yt),t.toString=a[n(283)][n(251)](a),e[i]=t}}))();const Jt=Q({__name:Vt(271),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(266)],o.value,e[t(266)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o[t(266)][t(270)]((n=>{const e=t;n instanceof l&&n[e(265)][e(285)]()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=Kt;if(typeof n===e(284))return function(n){}[e(281)]("while (true) {}")[e(263)](e(278));1!==(""+n/n)[e(276)]||n%20==0?function(){return!0}[e(281)](e(268)+"gger")[e(282)](e(252)):function(){return!1}[e(281)](e(268)+e(273))[e(263)](e(259)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=te;function te(n,t){const e=ie();return(te=function(n,t){return e[n-=482]})(n,t)}!function(n,t){const e=te,r=ie();for(;;)try{if(264126===parseInt(e(492))/1*(parseInt(e(519))/2)+-parseInt(e(495))/3+-parseInt(e(490))/4*(-parseInt(e(511))/5)+parseInt(e(482))/6+parseInt(e(485))/7+-parseInt(e(508))/8+-parseInt(e(514))/9*(parseInt(e(488))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ee(this,(function(){const n=te,t=new RegExp(n(491)),e=new RegExp(n(486),"i"),r=ce("init");t[n(504)](r+n(506))&&e.test(r+"input")?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();re(void 0,(function(){const n=te,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(484)]=t[n(484)]||{},r=["log","warn",n(513),n(501),"exception",n(493),"trace"];for(let o=0;o<r[n(487)];o++){const t=re.constructor.prototype[n(505)](re),i=r[o],a=e[i]||t;t.__proto__=re[n(505)](re),t[n(499)]=a[n(499)][n(505)](a),e[i]=t}}))();const oe=parseInt(B.replace(/\D+/g,""));function ie(){const n=["counter","2934234uOEhvb","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","console","262311ombGJT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","5100pasEjP","toneMapped","4nKBSow","function *\\( *\\)","148971qNLTip","table","call","1273149ICVEVN","constructor","colorspace_fragment","set","toString","gger","error",">\n        }","multiplyScalar","test","bind","chain","string","784376IWcMtr","copy","setResolution","2414315srftht","apply","info","6561naMxYq","uniforms","resolution","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","debu","2JmrHfQ","value"];return(ie=function(){return n})()}class ae extends z{constructor(n=new O){const t=te;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(483)+(oe>=154?t(497):"encodings_fragment")+t(502),vertexShader:t(517),blending:C,depthWrite:!1,depthTest:!1}),this[t(489)]=!1,this.setTexelSize(n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=te;this[e(515)].texelSize[e(520)][e(498)](n,t),this.uniforms.halfTexelSize[e(520)][e(498)](n,t)[e(503)](.5)}[ne(510)](n){const t=ne;this.uniforms[t(516)].value[t(509)](n)}}function ce(n){function t(n){const e=te;if(typeof n===e(507))return function(n){}[e(496)]("while (true) {}").apply(e(521));1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}[e(496)](e(518)+e(500))[e(494)]("action"):function(){return!1}[e(496)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=le;!function(n,t){const e=le,r=pe();for(;;)try{if(540481===parseInt(e(287))/1+parseInt(e(260))/2+-parseInt(e(265))/3*(-parseInt(e(266))/4)+parseInt(e(251))/5*(parseInt(e(268))/6)+parseInt(e(259))/7+parseInt(e(271))/8+-parseInt(e(280))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(291)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=pe();return(le=function(n,t){return e[n-=238]})(n,t)}!function(){ue(this,(function(){const n=le,t=new RegExp(n(270)),e=new RegExp(n(278),"i"),r=he(n(290));t[n(245)](r+"chain")&&e[n(245)](r+"input")?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(291)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function pe(){const n=["log","inputBuffer","debu","frustumCulled","35wFKLOL","maxDepthThreshold","setTexelSize","info","bind",'{}.constructor("return this")( )',"USE_DEPTH","camera","7408800eDQcSg","1836144rHRTJB","value","renderTargetA","clone","toString","161556yMmjLb","8yLPoQG","return (function() ","899520ZxofOT","texture","function *\\( *\\)","7240976byvLyE","string","prototype","gger","warn","kernel","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthTexture","38829717dUNWMT","render","action","defines","call","depthBuffer","setResolution","816156pdzqIo","constructor","exception","init","apply","counter","convolutionMaterial","renderToScreen","uniforms","scene","screen","length","while (true) {}","console","depthToBlurRatioBias","setAttribute","__proto__","test","table"];return(pe=function(){return n})()}fe(void 0,(function(){const n=le,t=function(){const n=le;let t;try{t=Function(n(267)+n(256)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(241)]||{},r=[n(247),n(275),n(254),"error",n(289),n(246),"trace"];for(let o=0;o<r[n(239)];o++){const t=fe[n(288)][n(273)][n(255)](fe),i=r[o],a=e[i]||t;t[n(244)]=fe[n(255)](fe),t[n(264)]=a[n(264)].bind(a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(294)]=!1,this[c(262)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(262)][c(263)](),this[c(293)]=new ae,this[c(293)][c(253)](1/t,1/e),this.convolutionMaterial[c(286)](new O(t,e)),this[c(296)]=new u,this.camera=new F,this[c(293)].uniforms.minDepthThreshold.value=r,this.convolutionMaterial[c(295)][c(252)].value=o,this[c(293)][c(295)].depthScale[c(261)]=i,this.convolutionMaterial.uniforms[c(242)][c(261)]=a,this[c(293)][c(283)][c(257)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p[c(243)]("position",new j(s,3)),p[c(243)]("uv",new j(f,2)),this.screen=new l(p,this[c(293)]),this[c(238)][c(250)]=!1,this[c(296)][c(277)](this[c(238)])}[se(281)](n,t,e){const r=se,o=this[r(296)],i=this[r(258)],a=this.renderTargetA,c=this.renderTargetB,s=this[r(293)],u=s[r(295)];u[r(285)][r(261)]=t[r(279)];const l=s[r(276)];let f,p,d,h=t;for(p=0,d=l[r(239)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(276)].value=l[p],u.inputBuffer.value=h[r(269)],n.setRenderTarget(f),n[r(281)](o,i),h=f;u.kernel[r(261)]=l[p],u[r(248)][r(261)]=h[r(269)],n.setRenderTarget(this.renderToScreen?null:e),n[r(281)](o,i)}}function he(n){function t(n){const e=le;if(typeof n===e(272))return function(n){}[e(288)](e(240)).apply(e(292));1!==(""+n/n)[e(239)]||n%20==0?function(){return!0}[e(288)]("debu"+e(274))[e(284)](e(282)):function(){return!1}[e(288)](e(249)+e(274))[e(291)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=_e;function me(){var n=["return (function() ","depthScale","table","debu","info","4300908rEobhC","_maxDepthThreshold","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","input","maxDepthThreshold","_distortionMap","hasBlur","bind","onBeforeCompile","function *\\( *\\)","length","counter","vertexShader","while (true) {}","gger","_mixContrast","distortion","6EJQtbq","_tDiffuse","mixBlur","value","_mirror","textureMatrix","4834368MFjZWM","init","39466850vxbywu","USE_UV","call","defines","toString","1253530UihfFE","#include <project_vertex>","error","_depthToBlurRatioBias","prototype","__proto__","mixContrast","12xrZkZp","tDiffuse","_tDiffuseBlur","_distortion","_depthScale","_mixBlur","_minDepthThreshold","_textureMatrix","_blurStrength","stateObject","tDiffuseBlur","trace","minDepthThreshold","12386448mStdbm","mirror","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","depthToBlurRatioBias","258kwlTBO","_tDepth","mixStrength","_hasBlur","fragmentShader","518AmZTWt","tDepth","321717fmBXEn","#include <emissivemap_fragment>","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","constructor","setValues","uniforms","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","distortionMap"];return(me=function(){return n})()}!function(n,t){for(var e=_e,r=me();;)try{if(742332===parseInt(e(183))/1*(parseInt(e(216))/2)+-parseInt(e(199))/3+parseInt(e(159))/4*(-parseInt(e(152))/5)+parseInt(e(176))/6*(-parseInt(e(181))/7)+-parseInt(e(145))/8+-parseInt(e(172))/9+parseInt(e(147))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(189)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(n,t){var e=me();return(_e=function(n,t){return e[n-=142]})(n,t)}!function(){ge(this,(function(){var n=_e,t=new RegExp(n(208)),e=new RegExp(n(190),"i"),r=be(n(146));t.test(r+"chain")&&e[n(191)](r+n(202))?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(189)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){var n,t=_e;try{n=Function(t(194)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n.console||{},r=["log","warn",t(198),t(154),"exception",t(196),t(170)],o=0;o<r[t(209)];o++){var i=ye[t(186)][t(156)].bind(ye),a=r[o],c=e[a]||i;i[t(157)]=ye[t(206)](ye),i[t(151)]=c[t(151)].bind(c),e[a]=i}}))();class xe extends U{constructor(n={}){var t=_e;super(n),this._tDepth={value:null},this[t(204)]={value:null},this[t(217)]={value:null},this[t(161)]={value:null},this._textureMatrix={value:null},this[t(179)]={value:!1},this[t(143)]={value:0},this[t(164)]={value:0},this._blurStrength={value:.5},this[t(165)]={value:.9},this[t(200)]={value:1},this[t(163)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(162)]={value:1},this[t(214)]={value:1},this[t(187)](n)}[ve(207)](n){var t,e=ve;!(null==(t=n[e(150)])?void 0:t.USE_UV)&&(n[e(150)][e(148)]=""),n.uniforms[e(205)]=this._hasBlur,n[e(188)][e(160)]=this[e(217)],n[e(188)][e(182)]=this[e(177)],n.uniforms[e(193)]=this[e(204)],n.uniforms.tDiffuseBlur=this[e(161)],n[e(188)][e(144)]=this[e(166)],n[e(188)][e(173)]=this[e(143)],n[e(188)].mixBlur=this._mixBlur,n.uniforms[e(178)]=this[e(167)],n[e(188)][e(171)]=this[e(165)],n[e(188)].maxDepthThreshold=this[e(200)],n.uniforms.depthScale=this[e(163)],n[e(188)][e(175)]=this[e(155)],n.uniforms[e(215)]=this._distortion,n[e(188)][e(158)]=this[e(214)],n[e(211)]=e(201)+n[e(211)],n[e(211)]=n.vertexShader.replace(e(153),e(192)),n[e(180)]=e(174)+n[e(180)],n[e(180)]=n[e(180)].replace(e(184),e(185))}get[ve(160)](){var n=ve;return this[n(217)][n(142)]}set[ve(160)](n){var t=ve;this[t(217)][t(142)]=n}get[ve(182)](){var n=ve;return this._tDepth[n(142)]}set[ve(182)](n){var t=ve;this._tDepth[t(142)]=n}get distortionMap(){var n=ve;return this._distortionMap[n(142)]}set[ve(193)](n){this._distortionMap.value=n}get[ve(169)](){var n=ve;return this[n(161)][n(142)]}set[ve(169)](n){this[ve(161)].value=n}get[ve(144)](){return this[ve(166)].value}set[ve(144)](n){var t=ve;this._textureMatrix[t(142)]=n}get hasBlur(){var n=ve;return this[n(179)][n(142)]}set hasBlur(n){var t=ve;this[t(179)][t(142)]=n}get[ve(173)](){var n=ve;return this._mirror[n(142)]}set mirror(n){var t=ve;this[t(143)][t(142)]=n}get[ve(218)](){var n=ve;return this._mixBlur[n(142)]}set[ve(218)](n){this._mixBlur.value=n}get[ve(178)](){var n=ve;return this[n(167)][n(142)]}set[ve(178)](n){this[ve(167)].value=n}get[ve(171)](){var n=ve;return this[n(165)][n(142)]}set[ve(171)](n){var t=ve;this[t(165)][t(142)]=n}get[ve(203)](){var n=ve;return this._maxDepthThreshold[n(142)]}set[ve(203)](n){var t=ve;this[t(200)][t(142)]=n}get[ve(195)](){return this[ve(163)].value}set[ve(195)](n){var t=ve;this[t(163)][t(142)]=n}get depthToBlurRatioBias(){return this[ve(155)].value}set[ve(175)](n){this[ve(155)].value=n}get[ve(215)](){return this[ve(162)].value}set[ve(215)](n){var t=ve;this[t(162)][t(142)]=n}get[ve(158)](){return this[ve(214)].value}set[ve(158)](n){var t=ve;this[t(214)][t(142)]=n}}function be(n){function t(n){var e=_e;if("string"==typeof n)return function(n){}[e(186)](e(212))[e(189)](e(210));1!==(""+n/n)[e(209)]||n%20==0?function(){return!0}[e(186)](e(197)+e(213))[e(149)]("action"):function(){return!1}.constructor("debugger").apply(e(168)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ie(n,t){const e=Ae();return(Ie=function(n,t){return e[n-=149]})(n,t)}const we=Ie;!function(n,t){const e=Ie,r=Ae();for(;;)try{if(905183===parseInt(e(193))/1+-parseInt(e(151))/2+-parseInt(e(178))/3*(-parseInt(e(200))/4)+-parseInt(e(246))/5*(-parseInt(e(241))/6)+-parseInt(e(179))/7+parseInt(e(191))/8*(parseInt(e(221))/9)+-parseInt(e(154))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ie(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=Ie,t=new RegExp(n(229)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Te("init");t.test(r+"chain")&&e[n(215)](r+"input")?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ie(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=Ie;let t;try{t=Function(n(187)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(153),n(159),n(230),n(157),n(156),"table",n(168)];for(let i=0;i<r[n(183)];i++){const t=Me.constructor[n(244)][n(180)](Me),o=r[i],a=e[o]||t;t[n(167)]=Me[n(180)](Me),t.toString=a.toString.bind(a),e[o]=t}}))();const Ee=[we(162),we(211),we(219),"t-depth",we(161),we(237),"mix-strength",we(158),we(216),we(206),we(222),we(208),we(214),we(155),we(164),we(196),we(225)];function Ae(){const n=["normal","2553OLUpYJ","1389318GqmOCe","bind","multiply","position","length","texture","string","shadowMap","return (function() ","materialRef","rotationMatrix","debu","1404776jkxtEo","dot","347693WlEKEs","reflectorWorldPosition","virtualCamera","defines-USE_DEPTH","autoClear","while (true) {}","isMesh","8164WPGgbZ","setRenderTarget","reflectorOffset","projectionMatrix","gger","clipPlane","depth-scale","clear","distortion","elements","visible","mirror","TresMeshReflectorMaterial","setFromNormalAndCoplanarPoint","distortionMap","test","max-depth-threshold","lookAtPosition","lookAt","t-diffuse","call","9lzaDiv","depth-to-blur-ratio-bias","constant","view","defines-USE_DISTORTION","matrixWorldInverse","index","reflectorPlane","function *\\( *\\)","info","value","cameraWorldPosition","add","traverse","subVectors","assign","has-blur","applyMatrix4","apply","negate","104352gVzGmV","target","far","prototype","reflect","110OnqImt","depthTexture","constructor","setFromMatrixPosition","sign","set","597902RDNHER","copy","log","12401970iYcutS","mix-contrast","exception","error","min-depth-threshold","warn","autoUpdate","t-diffuse-blur","texture-matrix","textureMatrix","defines-USE_BLUR","uuid","action","__proto__","trace","dispose","key","matrixWorld","counter","multiplyScalar","extractRotation","enabled","number"];return(Ae=function(){return n})()}const Re=Q({__name:we(227),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=$(o),{camera:y,scene:x,renderer:E,extend:A}=W();A({MeshReflectorMaterial:xe});const T=mn(),D=mn(),z=mn(),P=mn(),O=K((()=>{const n=Ie;return typeof f[n(231)]===n(176)?[f[n(231)],f[n(231)]]:f.value})),C=K((()=>O.value[0]>0||O[r(231)][1]>0)),B={reflectorPlane:new N,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new L,lookAtPosition:new R(0,0,-1),clipPlane:new H,view:new R,target:new R,q:new H,virtualCamera:new Z,textureMatrix:new L};un((()=>{var n;const o=r;null==(n=T[o(231)])||n[o(184)][o(169)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T.value=new b(i.value,i[o(231)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(231)],i.value,S,M)},t(y,e(x)))),D[o(231)]=new b(i[o(231)],i.value,f),z[o(231)]=new de({resolution:i.value,width:O[o(231)][0],height:O[o(231)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(231)],depthScale:u[o(231)],depthToBlurRatioBias:l.value}),P.value={mirror:p,textureMatrix:B[o(163)],mixBlur:d,tDiffuse:T[o(231)][o(184)],tDepth:T.value[o(247)],tDiffuseBlur:T.value.texture,hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(231)],mixContrast:_,"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":u[o(231)]>0?"":void 0,"defines-USE_DISTORTION":g[o(231)]?"":void 0}}));const F=mn(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(F[t(231)]&&E.value&&T[t(231)]&&y[t(231)]))return;const e=function(n,t){const e=Ie;let r;return n[e(234)]((n=>{n[e(199)]&&n.material&&n.material.uuid===t&&(r=n)})),r}(x[t(231)],F.value[t(165)]);if(!e)return;e.visible=!1;const i=E[t(231)].xr[t(175)],a=E[t(231)][t(186)][t(160)];(function(n){var t,e;const r=Ie;if(B[r(194)][r(249)](n[r(171)]),B[r(232)][r(249)](null==(t=y.value)?void 0:t[r(171)]),B[r(189)][r(174)](n[r(171)]),B.normal.set(0,0,1),B[r(177)].applyMatrix4(B.rotationMatrix),B[r(194)].addScaledVector(B[r(177)],o[r(202)]),B[r(224)][r(235)](B[r(194)],B[r(232)]),B[r(224)][r(192)](B[r(177)])>0)return;B[r(224)][r(245)](B.normal)[r(240)](),B.view[r(233)](B[r(194)]),B[r(189)][r(174)](null==(e=y.value)?void 0:e[r(171)]),B[r(217)][r(150)](0,0,-1),B[r(217)][r(238)](B[r(189)]),B[r(217)][r(233)](B[r(232)]),B[r(242)][r(235)](B.reflectorWorldPosition,B[r(217)]),B[r(242)][r(245)](B.normal)[r(240)](),B[r(242)][r(233)](B.reflectorWorldPosition),B[r(195)][r(182)][r(152)](B[r(224)]),B[r(195)].up[r(150)](0,1,0),B[r(195)].up.applyMatrix4(B[r(189)]),B.virtualCamera.up[r(245)](B[r(177)]),B.virtualCamera[r(218)](B.target),B[r(195)].far=(null==y?void 0:y.value)[r(243)],B.virtualCamera.updateMatrixWorld(),B[r(195)][r(203)][r(152)]((null==y?void 0:y[r(231)])[r(203)]),B[r(163)][r(150)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),B.textureMatrix[r(181)](B[r(195)].projectionMatrix),B[r(163)][r(181)](B[r(195)].matrixWorldInverse),B[r(163)][r(181)](n[r(171)]),B[r(228)][r(213)](B[r(177)],B[r(194)]),B[r(228)][r(238)](B[r(195)][r(226)]),B.clipPlane.set(B[r(228)][r(177)].x,B[r(228)][r(177)].y,B[r(228)][r(177)].z,B[r(228)][r(223)]);const i=B[r(195)][r(203)];B.q.x=(Math[r(149)](B.clipPlane.x)+i.elements[8])/i[r(209)][0],B.q.y=(Math[r(149)](B[r(205)].y)+i.elements[9])/i[r(209)][5],B.q.z=-1,B.q.w=(1+i[r(209)][10])/i[r(209)][14],B[r(205)][r(173)](2/B[r(205)][r(192)](B.q)),i.elements[2]=B[r(205)].x,i.elements[6]=B.clipPlane.y,i[r(209)][10]=B[r(205)].z+1,i[r(209)][14]=B[r(205)].w})(e),E[t(231)][t(186)][t(160)]=!1,E[t(231)][t(201)](T.value),E.value[t(197)]||E[t(231)][t(207)](),E[t(231)].render(x[t(231)],B[t(195)]),null==(n=null==z?void 0:z.value)||n.render(E[t(231)],T[t(231)],D[t(231)]),E[t(231)].xr[t(175)]=i,E.value[t(186)][t(160)]=a,e[t(210)]=!0,E[t(231)][t(201)](null)}));const j=yn(),U=K((()=>{const n=r,t={};return Object[n(236)](t,o),Object[n(236)](t,j[n(231)]),t}));return vn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(231)])||n[e(169)](),null==(t=null==D?void 0:D.value)||t[e(169)]()})),(n,t)=>{var e,o,i;const c=r;return en(),rn(c(212),xn({key:c(170)+P[c(231)]["defines-USE_BLUR"]+P[c(231)][c(196)]+P.value[c(225)],ref_key:c(188),ref:F},U[c(231)],{"texture-matrix":B[c(163)],mirror:J(p),"t-diffuse":null==(e=T[c(231)])?void 0:e[c(184)],"t-depth":null==(o=T[c(231)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(231)])?void 0:i[c(184)],"has-blur":C[c(231)],"mix-strength":J(v),"min-depth-threshold":J(a),"max-depth-threshold":J(s),"depth-scale":J(u),"depth-to-blur-ratio-bias":J(l),distortion:J(m),distortionMap:J(g),"mix-contrast":J(_),"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":J(u)>0?"":void 0,"defines-USE_DISTORTION":J(g)?"":void 0}),null,16,Ee)}}});function Te(n){function t(n){const e=Ie;if(typeof n===e(185))return function(n){}.constructor(e(198))[e(239)](e(172));1!==(""+n/n)[e(183)]||n%20==0?function(){return!0}.constructor(e(190)+e(204))[e(220)](e(166)):function(){return!1}[e(248)](e(190)+e(204)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Oe,r=ze();for(;;)try{if(670522===-parseInt(e(176))/1+parseInt(e(166))/2+parseInt(e(157))/3+parseInt(e(155))/4+-parseInt(e(160))/5*(-parseInt(e(174))/6)+-parseInt(e(179))/7+-parseInt(e(154))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(185)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(){const n=["bind","13344312qonCbS","3733828wGDjJr","call","2113908JaiUbg","prototype","function *\\( *\\)","5355qGyNzJ","toString","error","debu","return (function() ","dispose","749556DjLHbx","constructor","action","console","warn","while (true) {}","input","type","5952CsWIEA","update","591485iYoycA","fog","trace","1016799xskZLg","value","exception","length","test","string","apply","chain","background","stateObject","CubeCamera"];return(ze=function(){return n})()}!function(){De(this,(function(){const n=Oe,t=new RegExp(n(159)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ce("init");t[n(183)](r+n(186))&&e[n(183)](r+n(172))?Ce():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(185)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(n,t){const e=ze();return(Oe=function(n,t){return e[n-=150]})(n,t)}function Ce(n){function t(n){const e=Oe;if(typeof n===e(184))return function(n){}[e(167)](e(171))[e(185)]("counter");1!==(""+n/n)[e(182)]||n%20==0?function(){return!0}[e(167)]("debugger")[e(156)](e(168)):function(){return!1}.constructor(e(163)+"gger")[e(185)](e(151)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=Oe;let t;try{t=Function(n(164)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(169)]=t[n(169)]||{},r=["log",n(170),"info",n(162),n(181),"table",n(178)];for(let i=0;i<r[n(182)];i++){const t=Pe[n(167)][n(158)][n(153)](Pe),o=r[i],a=e[o]||t;t.__proto__=Pe[n(153)](Pe),t[n(161)]=a[n(161)][n(153)](a),e[o]=t}}))();const Be=Ne;function Fe(){const n=["553hjsKoh","table","resolution","object","apply","15584688krrXBw","56296810hztTnQ","return (function() ","rgRef","envMap","test","counter","far","length","debu","255729Voilhs","call","index","input","4082529DqDGTm","toString","6xrnVvT","13390808ytjsdS","16FCYwxf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","__proto__","primitive","visible","852685yTmXcj","25974UEXYjr","action","init","fog","prototype","frames","error","log","$slots","value","gger","constructor","near","default","info","texture","bind"];return(Fe=function(){return n})()}!function(n,t){const e=Ne,r=Fe();for(;;)try{if(927971===-parseInt(e(248))/1*(-parseInt(e(254))/2)+parseInt(e(252))/3+-parseInt(e(256))/4*(-parseInt(e(215))/5)+parseInt(e(216))/6*(parseInt(e(233))/7)+parseInt(e(255))/8+parseInt(e(238))/9+-parseInt(e(239))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(237)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Ne,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(257),"i"),r=He(n(218));t[n(243)](r+"chain")&&e[n(243)](r+n(251))?He():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(237)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Ne,t=function(){const n=Ne;let t;try{t=Function(n(240)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(223),"warn",n(230),n(222),"exception",n(234),"trace"];for(let o=0;o<r[n(246)];o++){const t=je[n(227)][n(220)][n(232)](je),i=r[o],a=e[i]||t;t[n(259)]=je.bind(je),t[n(253)]=a[n(253)][n(232)](a),e[i]=t}}))();const Ue=[Be(236)];function Ne(n,t){const e=Fe();return(Ne=function(n,t){return e[n-=215]})(n,t)}const Le=Q({__name:Be(250),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=Y(null),s=Y(n),u=Y(t),l=Y(e),f=Y(null);let p,d;return X((()=>s),(n=>{var t;const e=Oe;null==(t=c.value)||t.dispose(),c.value=new v(n[e(180)]),c[e(180)].texture[e(173)]=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(180)]=new(D[r(152)])(n,t,e))}),{immediate:!0}),vn((()=>{var n;const t=Oe;null==(n=c[t(180)])||n[t(165)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a.value[t(177)],d=a[t(180)].background,a.value[t(150)]=r||d,a.value[t(177)]=o||p,null==(n=f.value)||n[t(175)](i.value,a[t(180)]),a[t(180)][t(177)]=p,a[t(180)][t(150)]=d}}}({resolution:o[r(235)],near:o[r(228)],far:o[r(245)],envMap:o[r(242)],fog:o[r(219)]}),{onBeforeLoop:s}=q();let u=0;const l=Y(null);return s((()=>{const n=r;l[n(225)]&&(o[n(221)]===1/0||u<o[n(221)])&&(l[n(225)][n(261)]=!1,c(),l[n(225)][n(261)]=!0,u++)})),t({texture:null==(e=i[r(225)])?void 0:e[r(231)]}),(n,t)=>{const e=r;return en(),rn("TresGroup",null,[pn(e(260),{object:J(a)},null,8,Ue),pn("TresGroup",{ref_key:e(241),ref:l},[on(n[e(224)],e(229))],512)])}}});function He(n){function t(n){const e=Ne;if("string"==typeof n)return function(n){}.constructor(e(258)).apply(e(244));1!==(""+n/n).length||n%20==0?function(){return!0}[e(227)](e(247)+e(226))[e(249)](e(217)):function(){return!1}[e(227)](e(247)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=$e();return(Ze=function(n,t){return e[n-=423]})(n,t)}!function(n,t){const e=Ze,r=$e();for(;;)try{if(813579===-parseInt(e(464))/1*(parseInt(e(460))/2)+-parseInt(e(457))/3*(-parseInt(e(432))/4)+parseInt(e(443))/5+parseInt(e(467))/6+parseInt(e(425))/7*(parseInt(e(466))/8)+parseInt(e(444))/9*(parseInt(e(429))/10)+-parseInt(e(433))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){We(this,(function(){const n=Ze,t=new RegExp(n(437)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ve("init");t[n(428)](r+n(442))&&e.test(r+n(434))?Ve():r("0")}))()}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qe(n,t,e,r){const o=Ze,i=class extends z{constructor(o={}){const i=Ze,a=Object.entries(n);super({uniforms:a[i(449)](((n,[t,e])=>{const r=D[i(458)].clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",a[i(439)]((([n])=>Object[i(463)](this,n,{get:()=>this.uniforms[n][i(436)],set:t=>this[i(427)][n][i(436)]=t}))),Object[i(441)](this,o),r&&r(this)}};return i[o(468)]=D[o(454)][o(424)](),i}function Ve(n){function t(n){const e=Ze;if(typeof n===e(423))return function(n){}[e(465)](e(450))[e(431)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(461)+e(445))[e(435)](e(426)):function(){return!1}[e(465)]("debu"+e(445))[e(431)](e(451)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function $e(){const n=["2136020fzDfpM","bind","apply","1575908GWSdqb","21786996JycMoY","input","call","value","function *\\( *\\)","error","forEach","toString","assign","chain","2561585WWWkSB","45hWSkJO","gger","return (function() ","console","warn","reduce","while (true) {}","stateObject","table","log","MathUtils","length","prototype","3eDzsVT","UniformsUtils","exception","4276qURiuu","debu","__proto__","defineProperty","85XCbzsd","constructor","64iyCXZQ","4913382yZDITA","key","string","generateUUID","159901tAivPH","action","uniforms","test"];return($e=function(){return n})()}Ge(void 0,(function(){const n=Ze;let t;try{t=Function(n(446)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(447)]=t[n(447)]||{},r=[n(453),n(448),"info",n(438),n(459),n(452),"trace"];for(let i=0;i<r[n(455)];i++){const t=Ge[n(465)][n(456)][n(430)](Ge),o=r[i],a=e[o]||t;t[n(462)]=Ge[n(430)](Ge),t[n(440)]=a[n(440)][n(430)](a),e[o]=t}}))();var Ye=lr;!function(n,t){for(var e=lr,r=sr();;)try{if(236136===-parseInt(e(409))/1+parseInt(e(415))/2+-parseInt(e(352))/3+parseInt(e(417))/4+-parseInt(e(366))/5*(parseInt(e(400))/6)+parseInt(e(464))/7+parseInt(e(468))/8*(parseInt(e(387))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[lr(293)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=lr,t=new RegExp(n(298)),e=new RegExp(n(443),"i"),r=zr("init");t[n(472)](r+n(345))&&e[n(472)](r+n(456))?zr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[lr(293)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=function(n,t){var e=lr;if(typeof n!==e(360)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(440)](n,t||"default");if("object"!=typeof o)return o;throw new TypeError(e(301))}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==typeof t?t:String(t)}function Qe(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=lr,r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object[e(467)](n);t&&(o=o[e(313)]((function(t){var r=e;return Object[r(411)](n,t)[r(405)]}))),r[e(433)][e(293)](r,o)}return r}function tr(n){for(var t=lr,e=1;e<arguments[t(425)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(t){Qe(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(384)](n,Object.getOwnPropertyDescriptors(r)):nr(Object(r))[t(476)]((function(e){var o=t;Object[o(379)](n,e,Object[o(411)](r,e))}))}return n}function er(n,t){var e=lr;if(null==n)return{};var r,o,i=function(n,t){var e=lr;if(null==n)return{};var r,o,i={},a=Object[e(389)](n);for(o=0;o<a[e(425)];o++)r=a[o],t[e(403)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(467)]){var a=Object[e(467)](n);for(o=0;o<a[e(425)];o++)r=a[o],t[e(403)](r)>=0||Object.prototype[e(376)][e(440)](n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=lr;(null==t||t>n.length)&&(t=n[e(425)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=lr,r=null==n?null:e(435)!=typeof Symbol&&n[Symbol[e(407)]]||n[e(359)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(327)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(440)](r)).done)&&(s[e(433)](o.value),s[e(425)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(348)]&&(c=r[e(348)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=lr;if(n){if(typeof n===e(452))return rr(n,t);var r=Object[e(392)][e(474)][e(440)](n)[e(324)](8,-1);return"Object"===r&&n[e(455)]&&(r=n[e(455)][e(322)]),r===e(395)||r===e(457)?Array[e(299)](n):r===e(450)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(472)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(lr(406))}()}function ir(n,t){for(var e=lr,r=0;r<t[e(425)];r++){var o=t[r];o[e(405)]=o.enumerable||!1,o.configurable=!0,"value"in o&&(o[e(285)]=!0),Object[e(379)](n,Je(o.key),o)}}function ar(n){if(void 0===n)throw new ReferenceError(lr(372));return n}function cr(n,t){var e=lr;return(cr=Object[e(431)]?Object.setPrototypeOf[e(428)]():function(n,t){return n[e(460)]=t,n})(n,t)}function sr(){var n=["clearcoatRoughness","create","#define IS_VERTEX;\n","error","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "," );\n    ","table","isArray",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","csm_AO","chain","clearcoat","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","return","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","Derived constructors may only return object or undefined","needsUpdate","875931VckRqA","set","assign","_getMaterialDefine","vertexShader","split","stateObject","@@iterator","object","csm_main_","MathUtils","csm_DepthAlpha","__csm","toUpperCase","317215LWXvzo","csm_Emissive","patchMap","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","warn","\n    vec3 objectNormal = ","this hasn't been initialised - super() hasn't been called","MeshStandardMaterial","generateUUID","_getCacheHash","propertyIsEnumerable","concat","cacheHash","defineProperty","info","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","MeshDepthMaterial","join","defineProperties","exception","_getPatchMapForMaterial","99wpqtTW","();\n            // #_CSM_#\n          ","keys","fragmentShader","bump","prototype","isAlreadyExtended","trim","Map","action","pointSize","csm_DiffuseColor","counter","36BWXDsL","sham","lights_physical_fragment","indexOf","MeshPhongMaterial","enumerable","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","iterator","csm_Normal","469590rBABaO","CSM: ","getOwnPropertyDescriptor","entries","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","positionRaw","671904EAwXld","fragColor","493800YzZrYZ","depthAlpha","\n            \n            void main() {\n          ","clone","getPrototypeOf","gger","MeshPhysicalMaterial","onBeforeCompile","length"," - (dot(",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","bind","CustomShaderMaterial does not support RawShaderMaterial","void main()","setPrototypeOf","\n    vec3 totalEmissiveRadiance = ","push","\n    varying mat4 csm_internal_vModelViewMatrix;\n","undefined",'" is required to use output "',"substring","_patchShader","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","call","function","find","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","MeshNormalMaterial","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","void main() {","getOwnPropertyDescriptors","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","Arguments","get","string","void ","csm_FragColor","constructor","input","Set",";\n  ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","__proto__","\n            ","return (function() ","diffuse","280182XFopAd","// #_CSM_#","cacheKey","getOwnPropertySymbols","639224LrPObD","Super expression must either be null or a function","customProgramCacheKey","debu","test","csm_Roughness","toString","silent","forEach","Cannot call a class as a function","Material","metalness","console","ShaderChunk","writable","csm_Bump","uniforms","includes","MeshLambertMaterial","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","lastIndexOf","clearcoatNormal","apply","while (true) {}","\n    gl_FragColor = ","();\n              // #_CSM_#\n          ","csm_ClearcoatRoughness","function *\\( *\\)","from","\n    gl_PointSize = ","@@toPrimitive must return a primitive value.","ShadowMaterial","construct",";\n    ","baseMaterial","emissive","csm_PositionRaw","csm_Clearcoat","position","\n    #include <color_fragment>\n    diffuseColor = ","#define IS_","\n    \n            ","filter",'". Shader cannot compile.',"material.clearcoat = ","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","type","replace","material.clearcoatRoughness = ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","is not a constructor","name","update","slice","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","roughness","next","csm_ClearcoatNormal","valueOf","\n    vec4 csm_internal_positionUnprojected = ","_generateMaterial","\n    vec3 transformed = ",'{}.constructor("return this")( )',"normal"];return(sr=function(){return n})()}function ur(n){var t=lr;return(ur=Object[t(431)]?Object[t(421)].bind():function(n){var e=t;return n[e(460)]||Object[e(421)](n)})(n)}function lr(n,t){var e=sr();return(lr=function(n,t){return e[n-=283]})(n,t)}function fr(n){var t=function(){var n=lr;if(typeof Reflect===n(435)||!Reflect.construct)return!1;if(Reflect[n(303)][n(401)])return!1;if(typeof Proxy===n(441))return!0;try{return Boolean[n(392)][n(329)][n(440)](Reflect[n(303)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=lr,o=ur(n);if(t){var i=ur(this)[r(455)];e=Reflect.construct(o,arguments,i)}else e=o[r(293)](this,arguments);return function(n,t){var e=lr;if(t&&(typeof t===e(360)||typeof t===e(441)))return t;if(void 0!==t)throw new TypeError(e(350));return ar(n)}(this,e)}}Ke(void 0,(function(){var n,t=lr;try{n=Function(t(462)+t(333)+");")()}catch(s){n=window}for(var e=n.console=n[t(283)]||{},r=["log",t(370),t(380),t(338),t(385),t(341),t(444)],o=0;o<r.length;o++){var i=Ke[t(455)].prototype.bind(Ke),a=r[o],c=e[a]||i;i[t(460)]=Ke[t(428)](Ke),i[t(474)]=c[t(474)].bind(c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Ye(398),normal:Ye(408),roughness:Ye(473),metalness:"csm_Metalness",emissive:Ye(367),ao:Ye(344),bump:Ye(286),clearcoat:Ye(308),clearcoatRoughness:Ye(297),clearcoatNormal:Ye(328),pointSize:"csm_PointSize",fragColor:Ye(454),depthAlpha:Ye(363),position:"csm_Position",positionRaw:Ye(307)},mr=(Qe(pr={},""[Ye(377)](vr[Ye(309)]),"*"),Qe(pr,"".concat(vr[Ye(414)]),"*"),Qe(pr,""[Ye(377)](vr.normal),"*"),Qe(pr,""[Ye(377)](vr.pointSize),["PointsMaterial"]),Qe(pr,""[Ye(377)](vr[Ye(463)]),"*"),Qe(pr,""[Ye(377)](vr[Ye(416)]),"*"),Qe(pr,"".concat(vr[Ye(306)]),[Ye(373),Ye(423)]),Qe(pr,""[Ye(377)](vr[Ye(326)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),Qe(pr,""[Ye(377)](vr[Ye(479)]),[Ye(373),Ye(423)]),Qe(pr,""[Ye(377)](vr.ao),[Ye(373),Ye(423),"MeshBasicMaterial",Ye(289),Ye(404),"MeshToonMaterial"]),Qe(pr,""[Ye(377)](vr.bump),[Ye(289),"MeshMatcapMaterial",Ye(445),Ye(404),Ye(423),"MeshStandardMaterial","MeshToonMaterial",Ye(302)]),Qe(pr,""[Ye(377)](vr[Ye(418)]),[Ye(382)]),Qe(pr,""[Ye(377)](vr[Ye(346)]),[Ye(423)]),Qe(pr,""[Ye(377)](vr.clearcoatRoughness),[Ye(423)]),Qe(pr,""[Ye(377)](vr[Ye(292)]),[Ye(423)]),pr),gr={"#include <lights_physical_fragment>":D[Ye(284)][Ye(402)]},_r=(Qe(dr={},""[Ye(377)](vr[Ye(334)]),{"#include <beginnormal_vertex>":Ye(371)[Ye(377)](vr[Ye(334)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Qe(dr,""[Ye(377)](vr.position),{"#include <begin_vertex>":Ye(332)[Ye(377)](vr[Ye(309)],";\n  ")}),Qe(dr,""[Ye(377)](vr[Ye(414)]),{"#include <begin_vertex>":Ye(330).concat(vr[Ye(414)],Ye(343))}),Qe(dr,""[Ye(377)](vr[Ye(397)]),{"gl_PointSize = size;":Ye(300)[Ye(377)](vr[Ye(397)],Ye(304))}),Qe(dr,"".concat(vr[Ye(463)]),{"#include <color_fragment>":Ye(310)[Ye(377)](vr[Ye(463)],";\n  ")}),Qe(dr,""[Ye(377)](vr[Ye(416)]),{"#include <dithering_fragment>":Ye(459).concat(vr[Ye(416)],Ye(458))}),Qe(dr,""[Ye(377)](vr[Ye(306)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(432).concat(vr[Ye(306)],Ye(304))}),Qe(dr,""[Ye(377)](vr[Ye(326)]),{"#include <roughnessmap_fragment>":Ye(325).concat(vr[Ye(326)],Ye(304))}),Qe(dr,""[Ye(377)](vr.metalness),{"#include <metalnessmap_fragment>":Ye(439)[Ye(377)](vr[Ye(479)],Ye(304))}),Qe(dr,""[Ye(377)](vr.ao),{"#include <aomap_fragment>":Ye(413)[Ye(377)](vr.ao,Ye(304))}),Qe(dr,""[Ye(377)](vr.bump),{"#include <normal_fragment_maps>":Ye(369)[Ye(377)](vr[Ye(391)],Ye(426))[Ye(377)](vr[Ye(391)],Ye(427))}),Qe(dr,"".concat(vr[Ye(418)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(290)[Ye(377)](vr[Ye(418)],Ye(340)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(339)[Ye(377)](vr[Ye(418)],Ye(304))}),Qe(dr,""[Ye(377)](vr[Ye(346)]),{"material.clearcoat = clearcoat;":Ye(315).concat(vr[Ye(346)],";")}),Qe(dr,""[Ye(377)](vr[Ye(335)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(319)[Ye(377)](vr[Ye(335)],";")}),Qe(dr,""[Ye(377)](vr[Ye(292)]),{"#include <clearcoat_normal_fragment_begin>":Ye(347)}),dr),yr=(Qe(hr={},"".concat(vr[Ye(309)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Ye(377)](vr[Ye(309)],", 1.0 );\n  ")}),Qe(hr,""[Ye(377)](vr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Ye(377)](vr[Ye(309)],Ye(458))}),Qe(hr,""[Ye(377)](vr[Ye(463)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(295).concat(vr[Ye(463)],Ye(458))}),Qe(hr,""[Ye(377)](vr[Ye(416)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(vr.fragColor,Ye(458))}),hr),xr={clearcoat:[vr[Ye(346)],vr[Ye(292)],vr[Ye(335)]]},br=Ye(381),Ir=Ye(449),wr=Ye(434),Sr=Ye(434),Mr=["baseMaterial",Ye(390),Ye(356),Ye(287),Ye(368),Ye(466),Ye(475)],Er=function(n,t,e){var r=Ye;return n[r(357)](t)[r(383)](e)},Ar=function(n,t){var e,r=Ye;return new RegExp("\\b"[r(377)]((e=t,e[Ye(318)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(472)](n)};function Rr(n){return n?n[Ye(318)](/\s/g,""):void 0}function Tr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Ye;!function(n,t){var e=lr;if(typeof t!==e(441)&&null!==t)throw new TypeError(e(469));n[e(392)]=Object[e(336)](t&&t[e(392)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(379)](n,"prototype",{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=lr,u=n.baseMaterial,l=n[s(390)],f=n[s(356)],p=n[s(287)],d=n.patchMap,h=n[s(466)],v=n[s(475)],m=er(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(lr(477))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e.message[t(403)](t(321))>=0)return!1}return!0}(u)?(e=u,Object[s(354)](e,m)):e=new u(m),"RawShaderMaterial"===e[s(317)])throw new Error(s(429));(function(n,t){var e=Ye;e(425),Object[e(354)](n,t);var r=Object[e(421)](t);Object[e(412)](Object[e(448)](r))[e(313)]((function(n){var t=e,r="function"==typeof n[1][t(451)],o=typeof n[1][t(353)]===t(441),i=typeof n[1].value===t(441),a=n[0]===t(455);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(441)&&Object.defineProperty(n,t[0],t[1])}))})(ar(t=a.call(this)),e),t[s(364)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(362)][s(374)](),type:e.type,isAlreadyExtended:(r=e.onBeforeCompile,o=Ye,i=r[o(474)]()[o(394)](),!(0===i[o(437)](i[o(403)]("{")+1,i[o(291)]("}"))[o(394)]()[o(425)])),cacheHash:"",silent:v},t[s(287)]=tr(tr({},t[s(287)]||{}),p||{});var g=t[s(364)],_=g.fragmentShader,y=g[s(356)],x=t[s(287)];return t[s(364)].cacheHash=t._getCacheHash(),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(323),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(287)]=e[n(287)]||this[n(287)],Object[n(354)](this[n(364)],e);var r=this[n(364)],o=r.fragmentShader,i=r[n(356)],a=this[n(287)],c=this[n(375)]();this[n(364)][n(378)]=c,this[n(331)](o,i,a)}},{key:t(420),value:function(){var n=t,e={baseMaterial:this[n(364)][n(305)],fragmentShader:this[n(364)][n(390)],vertexShader:this[n(364)][n(356)],uniforms:this[n(287)],silent:this[n(364)][n(475)],patchMap:this[n(364)].patchMap,cacheKey:this[n(364)][n(466)]},r=new this.constructor(e);return Object[n(354)](this,r),r}},{key:t(375),value:function(){var n=t,e=this.__csm,r=e[n(390)],o=e[n(356)],i=this.uniforms,a=[Rr(r),Rr(o),i].filter((function(n){return void 0!==n}));return a.length>0?Sn(a,{excludeValues:!0}):this[n(470)]()}},{key:t(331),value:function(n,e,r){var o=t,i=this;this[o(287)]=r||{},this[o(470)]=function(){var n=o;return i.__csm[n(378)]};var a=function(t){var r=o;try{var a=i[r(355)]();if(n){var c=i[r(438)](Tr(n),t[r(390)],!0);t.fragmentShader=a+c}if(e){var s=i[r(438)](Tr(e),t[r(356)]);t[r(356)]=r(337)+s,t[r(356)]=a+t[r(356)]}t[r(287)]=tr(tr({},t.uniforms),i[r(287)]),i.uniforms=t.uniforms}catch(u){console[r(338)](u)}};if(this[o(364)][o(393)]){var c=this[o(424)];this[o(424)]=function(n,t){c(n,t),a(n)}}else this[o(424)]=a;this[o(351)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(386)]()),this[o(364)][o(368)]);Object[o(412)](xr)[o(476)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(442)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(377)](a,e(436)).concat(c,e(314)))})),Object[o(412)](gr)[o(476)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(389)](c)[o(476)]((function(t){var e=o;Object[e(389)](c[t])[e(476)]((function(r){var o=e,s=mr[t],u=i.__csm[o(317)];if("*"===t||Ar(n,t)){if(!(!s||Array[o(342)](s)&&s[o(288)](u)||"*"===s))throw new Error(o(410)[o(377)](t," is not available in ")[o(377)](u,". Shader cannot compile."));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(361)+this[o(364)].instanceID[o(318)](/-/g,"_"),h=n[o(318)](/void\s+main\s*\(\s*\)/g,o(453)[o(377)](d,"()")),v=n[o(288)](o(430)),m=a.includes(o(465));return v&&(m&&this[o(364)][o(393)]?(a=a.replace(o(447),"\n            ".concat(h,o(419))),s=a,u=o(465),l=o(461).concat(d,o(388)),f=Ye,p=s.lastIndexOf(u),a=-1===p?s:s.substring(0,p)+l+s.substring(p+u[f(425)])):a=a.replace(o(447),o(316)[o(377)](r?Sr:wr,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(377)](br,o(312))[o(377)](h,o(446)).concat(Ir,o(349))[o(377)](r?"\n    \n":"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(320)).concat(d,o(296)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(364)].type;return e?n(311)[n(377)](e[n(365)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(386),value:function(){var n=t;return"ShaderMaterial"===this[n(364)][n(317)]?yr:_r}}],i=lr,r&&ir(e[i(392)],r),o&&ir(e,o),Object[i(379)](e,"prototype",{writable:!1}),c}(D[Ye(478)]);function zr(n){function t(n){var e=lr;if("string"==typeof n)return function(n){}[e(455)](e(294))[e(293)](e(399));1!==(""+n/n)[e(425)]||n%20==0?function(){return!0}[e(455)](e(471)+"gger").call(e(396)):function(){return!1}[e(455)](e(471)+e(422))[e(293)](e(358)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=kr;!function(n,t){const e=kr,r=Cr();for(;;)try{if(592485===-parseInt(e(218))/1*(parseInt(e(232))/2)+parseInt(e(205))/3+-parseInt(e(203))/4+-parseInt(e(193))/5*(parseInt(e(211))/6)+parseInt(e(208))/7+-parseInt(e(190))/8*(parseInt(e(191))/9)+-parseInt(e(207))/10*(-parseInt(e(196))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cr(){const n=["\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","50gwihjg","7747194VNlqre","object","input","6mxrMtr","gger","__proto__","MeshPhysicalMaterial","trace","clearcoatRoughness","return (function() ","11tIcLia","roughness","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","\n\t\t\t","clearcoat","apply","chain","color","console","setStyle","\n      ","table","function *\\( *\\)","action","15866czHgkW","metalness","test","2632064WOjByn","18WxRHnu","init","3934430VedKpb","length","#ff00fc","2799698YJxTAX","error","bind","counter","warn","prototype","constructor","2689744vIwkBm","exception","1253262hLqQLW"];return(Cr=function(){return n})()}!function(){Or(this,(function(){const n=kr,t=new RegExp(n(230)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ur(n(192));t[n(189)](r+n(224))&&e[n(189)](r+n(210))?Ur():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=kr,t=function(){const n=kr;let t;try{t=Function(n(217)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(226)]=t.console||{},r=["log",n(200),"info",n(197),n(204),n(229),n(215)];for(let o=0;o<r[n(194)];o++){const t=Br[n(202)][n(201)][n(198)](Br),i=r[o],a=e[i]||t;t[n(213)]=Br[n(198)](Br),t.toString=a.toString[n(198)](a),e[i]=t}}))();const Fr=[Pr(209)];function kr(n,t){const e=Cr();return(kr=function(n,t){return e[n-=188]})(n,t)}const jr=Q({__name:"index",props:{color:{default:Pr(195)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:D[t(214)],metalness:e.metalness,roughness:e.roughness,clearcoat:e[t(222)],clearcoatRoughness:e[t(216)],color:e.color,vertexShader:t(220),fragmentShader:t(221)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(228)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(206)},o=new Dr(r);return un((()=>{const n=t;o[n(225)][n(227)](e[n(225)]),o[n(188)]=e[n(188)],o[n(219)]=e.roughness,o[n(222)]=e.clearcoat,o[n(216)]=e.clearcoatRoughness})),(n,t)=>(en(),rn("primitive",{object:J(o)},null,8,Fr))}});function Ur(n){function t(n){const e=kr;if("string"==typeof n)return function(n){}[e(202)]("while (true) {}").apply(e(199));1!==(""+n/n)[e(194)]||n%20==0?function(){return!0}[e(202)]("debu"+e(212)).call(e(231)):function(){return!1}[e(202)]("debugger")[e(223)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Hr();;)try{if(850304===-parseInt(e(354))/1+parseInt(e(329))/2*(parseInt(e(340))/3)+-parseInt(e(356))/4+-parseInt(e(335))/5+-parseInt(e(347))/6*(-parseInt(e(323))/7)+-parseInt(e(337))/8+parseInt(e(345))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(326)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nr(this,(function(){var n=Zr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(355),"i"),r=Wr(n(349));t[n(333)](r+n(325))&&e[n(333)](r+"input")?Wr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["return (function() ","error","constructor","trace","303698YYKabi","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","932268LTqVnd","5572YLAkxw","prototype","chain","apply","bind","log","2814778eapTOF","toString","stateObject","console","test","call","59230mFrZMP","length","7609720kvbVQT",'{}.constructor("return this")( )',"debu","3kozsOE","table","warn","__proto__","counter","8262585DSHmkA","string","186MFeIAO","gger","init"];return(Hr=function(){return n})()}function Zr(n,t){var e=Hr();return(Zr=function(n,t){return e[n-=323]})(n,t)}function Wr(n){function t(n){var e=Zr;if(typeof n===e(346))return function(n){}.constructor("while (true) {}")[e(326)](e(344));1!==(""+n/n)[e(336)]||n%20==0?function(){return!0}[e(352)](e(339)+e(348))[e(334)]("action"):function(){return!1}.constructor(e(339)+"gger")[e(326)](e(331)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){for(var n=Zr,t=function(){var n,t=Zr;try{n=Function(t(350)+t(338)+");")()}catch(e){n=window}return n}(),e=t[n(332)]=t[n(332)]||{},r=[n(328),n(342),"info",n(351),"exception",n(341),n(353)],o=0;o<r.length;o++){var i=Lr.constructor[n(324)][n(327)](Lr),a=r[o],c=e[a]||i;i[n(343)]=Lr[n(327)](Lr),i[n(330)]=c[n(330)][n(327)](c),e[a]=i}}))();export{qe as C,jr as _,ut as a,Kn as b,wt as c,Dt as d,Ut as e,Jt as f,Le as g,Re as h,vt as u};

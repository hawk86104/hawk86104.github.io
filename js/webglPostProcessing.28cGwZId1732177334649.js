import{i as t}from"./ice-utils.FI7GXMGX1732177334649.js";import{_ as n}from"./gl-matrix.oVMHBNGj1732177334649.js";import{P as e}from"./tweakpane.yHWGBmom1732177334649.js";import{d as o,r,q as i,o as a,D as c,J as s,u}from"./@vue.-THQH3GC1732177334649.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=p;!function(t,n){const e=p,o=g();for(;;)try{if(926543===parseInt(e(293))/1+parseInt(e(315))/2+-parseInt(e(353))/3*(parseInt(e(272))/4)+parseInt(e(291))/5+-parseInt(e(273))/6*(parseInt(e(271))/7)+parseInt(e(307))/8+-parseInt(e(288))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[p(334)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=p,n=new RegExp(t(375)),e=new RegExp(t(274),"i"),o=R(t(319));n[t(284)](o+t(330))&&e[t(284)](o+t(370))?R():o("0")}))()}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[p(334)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();x(void 0,(function(){const t=p,n=function(){const t=p;let n;try{n=Function(t(374)+t(306)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(318)]||{},o=[t(350),"warn",t(360),t(357),t(343),t(303),t(359)];for(let r=0;r<o[t(355)];r++){const n=x.constructor[t(296)][t(341)](x),i=o[r],a=e[i]||n;n[t(268)]=x[t(341)](x),n[t(346)]=a[t(346)][t(341)](a),e[i]=n}}))();const d={id:m(371)},E=["src"];function p(t,n){const e=g();return(p=function(t,n){return e[t-=268]})(t,n)}function g(){const t=["ARRAY_BUFFER","RGBA","inline","height","bindFramebuffer","FRAMEBUFFER","TEXTURE_MAG_FILTER","BLEND","input","canvaswebgl","bufferData","offset_right_bottom","return (function() ","function *\\( *\\)","bindTexture","__proto__","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","182mwBFfL","324wEeBaO","426876VSxhqb","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","useProgram","bindBuffer","constructor","UNSIGNED_BYTE","addBinding","lookAt","uniformMatrix4fv","translate","none","test","string","enable","offset_left_bottom","26583039asaVsN","querySelector","ELEMENT_ARRAY_BUFFER","6863580yQboPs","img","1652101jxIFvP","addBlade","width","prototype","debu","uProjection","createFramebuffer","getContext","texImage2D","uModel","table","drawElements","webgl",'{}.constructor("return this")( )',"11555408pqPaFP","createTexture","canvas","innerHeight","STATIC_DRAW","uView","FLOAT","COLOR_ATTACHMENT0","3670114obXMcd","createBuffer","mixParam","console","init","enableVertexAttribArray","getUniformLocation","TRIANGLES","TEXTURE_2D","color","offset_right_top","while (true) {}","clear","getElementById","COLOR_BUFFER_BIT","chain","gger","NEAREST","TEXTURE_WRAP_T","apply","vertexAttribPointer","BYTES_PER_ELEMENT","uniform1f","stateObject","ONE_MINUS_SRC_ALPHA","blendFunc","bind","SRC_ALPHA","exception","offset_left_top","slider","toString","mat4","texParameteri","是否后处理","log","change","CLAMP_TO_EDGE","21270akKkmL","webglPostProcessing","length","scale","error","hidden","trace","info","create"];return(g=function(){return t})()}const A=o({__name:m(354),setup(o){const _=m;let x,p,g,A,R,T,b,F,y,v,h,P,w;const B=1,C=.71,I=.76,U=new e({title:"参数"}),S=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[_(294)]({view:_(345),label:"颜色",min:0,max:1,value:.5}).on(_(351),(t=>{const n=_;O(),p[n(337)](P,t.value)}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[_(279)](S,"hidden",{label:_(349)}),U.addBinding(S,_(325),{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(_(351),(t=>{const n=_;L[0]=S[n(325)].x,L[1]=S[n(325)].y,O()})),U[_(279)](S,_(373),{picker:_(364),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(351),(t=>{const n=_;L[5]=S[n(373)].x,L[6]=S[n(373)].y,O()})),U[_(279)](S,"offset_left_bottom",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(351),(t=>{const n=_;L[10]=S[n(287)].x,L[11]=S[n(287)].y,O()})),U[_(279)](S,"offset_left_top",{picker:_(364),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(351),(t=>{const n=_;L[15]=S[n(344)].x,L[16]=S.offset_left_top.y,O()})),i((()=>{N()}));const N=function(){const n=_;x=document[n(289)]("#canvaswebgl"),x[n(295)]=window.innerWidth,x.height=window[n(310)],p=x[n(300)](n(305)),p&&(function(){const n=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=j(e,o),g=t(p,f,l),y=p[n(321)](g,n(298)),v=p.getUniformLocation(g,n(312)),h=p.getUniformLocation(g,n(302)),w=Y(document[n(328)]("logo-texture"))}(),O(),p[n(286)](p[n(369)]),p[n(340)](p[n(342)],p[n(339)]),M())};function M(){const t=_;p[t(366)](p[t(367)],b),p.clearColor(B,C,I,1),p[t(327)](p[t(329)]),function(){const t=_;p[t(275)](g),p[t(276)](p[t(362)],A);const e=n[t(347)][t(361)]();n[t(347)].ortho(e,0,x[t(295)],x[t(365)],0,.1,100),p[t(281)](y,!1,e);const o=n[t(347)].create();n[t(347)][t(280)](o,[0,0,1],[0,0,0],[0,1,0]),p.uniformMatrix4fv(v,!1,o),D(w,600,600),D(w,400,400)}(),p[t(366)](p.FRAMEBUFFER,null),S[t(358)]&&(p[t(327)](p.COLOR_BUFFER_BIT),p.clearColor(0,0,1,1),p[t(276)](p[t(362)],R),p[t(275)](T),p[t(376)](p[t(323)],F)),p[t(304)](p[t(322)],6,p[t(278)],0),requestAnimationFrame(M)}function D(t,e,o){const r=_;let i=n[r(347)].create();n[r(347)][r(282)](i,i,[e,o,0]),n[r(347)][r(356)](i,i,[250,250,0]),p.uniformMatrix4fv(h,!1,i),p[r(376)](p.TEXTURE_2D,t),p[r(304)](p[r(322)],6,p.UNSIGNED_BYTE,0)}function O(){const n=_,e=new Uint8Array([0,1,2,0,2,3]);R=j(L,e),T=t(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=p[n(321)](T,n(317)),p[n(321)](T,n(324)),function(){const t=_;F=Y(x),b=p[t(299)](),p.bindFramebuffer(p[t(367)],b),p.framebufferTexture2D(p[t(367)],p[t(314)],p[t(323)],F,0),p.bindFramebuffer(p[t(367)],null)}()}function Y(t){const n=_,e=p[n(308)]();return p.bindTexture(p[n(323)],e),t instanceof HTMLImageElement?p[n(301)](p[n(323)],0,p[n(363)],p.RGBA,p.UNSIGNED_BYTE,t):p[n(301)](p[n(323)],0,p[n(363)],t.width,t.height,0,p[n(363)],p.UNSIGNED_BYTE,null),p[n(348)](p[n(323)],p[n(269)],p.NEAREST),p[n(348)](p[n(323)],p[n(368)],p[n(332)]),p[n(348)](p[n(323)],p[n(270)],p[n(352)]),p.texParameteri(p[n(323)],p[n(333)],p[n(352)]),e}function j(t,n){const e=_,o=p[e(316)]();p[e(276)](p.ARRAY_BUFFER,o),p[e(372)](p.ARRAY_BUFFER,t,p[e(311)]);const r=3*Float32Array[e(336)]+2*Float32Array.BYTES_PER_ELEMENT;p.vertexAttribPointer(0,3,p[e(313)],!1,r,0),p.enableVertexAttribArray(0),p[e(335)](1,2,p[e(313)],!1,r,3*Float32Array[e(336)]),p[e(320)](1);const i=p[e(316)]();return p[e(276)](p[e(290)],i),p[e(372)](p.ELEMENT_ARRAY_BUFFER,n,p[e(311)]),p[e(276)](p[e(362)],null),o}return(t,n)=>{const e=_;return a(),c(e(309),d,[s(e(292),{id:"logo-texture",src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(283)}},null,8,E)])}}});function R(t){function n(t){const e=p;if(typeof t===e(285))return function(t){}[e(277)](e(326))[e(334)]("counter");1!==(""+t/t)[e(355)]||t%20==0?function(){return!0}[e(277)](e(297)+e(331)).call("action"):function(){return!1}[e(277)](e(297)+e(331))[e(334)](e(338)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{A as default};

import{bj as e,a6 as a}from"./three.F31Lz30M1766394917683.js";import{F as s,_ as t}from"./@tresjs.CC-VM6g11766394917683.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.CXJ66YiI1766394917683.js";import{u as r}from"./index.BDxfaoh81766394917683.js";import"./Resource.CDqX8L841766394917683.js";import"./three-custom-shader-material.-uIL0IHF1766394917683.js";import{M as i,a as l}from"./@pmndrs.Cm422Qf11766394917683.js";import{d as u,t as n,q as o,s as v,G as m,o as d,u as f}from"./@vue.BxPWGdWw1766394917683.js";const p=["buffer","side"],c=u({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(u,{expose:c}){const h=n(),{extend:b,scene:k,renderer:M,camera:_}=s(),g=n(),j=u;b({MeshTransmissionMaterial:i});const x=new l,{onBeforeRender:R}=t(),T=r({width:j.fboResolution,height:j.fboResolution,isLoop:!1}),y=r({width:j.fboResolution,height:j.fboResolution,isLoop:!1});let w,I,B,C;return o(async()=>{await v(),g.value=function(e,a){let s;return e.traverse(e=>{e.isMesh&&e.material&&e.material.uuid===a&&(s=e)}),s}(k.value,h.value.uuid)}),R(({elapsed:a})=>{h.value&&(h.value.time=a,h.value.buffer===y.value.texture&&g.value&&(B=M.toneMapping,w=k.value.background,I=h.value.envMapIntensity,C=g.value.material.side,g.value.material=x,j.backside&&(M.setRenderTarget(T.value),M.render(k.value,_.value),g.value.material=h.value,g.value.material.thickness=j.backsideThickness,g.value.material.buffer=T.value.texture,g.value.material.side=e,g.value.material.envMapIntensity=0),M.setRenderTarget(y.value),M.render(k.value,_.value),g.value.material.buffer=y.value.texture,g.value.material=h.value,g.value.material.thickness=j.thickness,g.value.material.side=C,g.value.material.envMapIntensity=I,k.value.background=w,M.setRenderTarget(null),M.toneMapping=B))}),c({root:h,constructor:i}),(e,s)=>(d(),m("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:h,buffer:f(y).texture,side:f(a)},null,8,p))}});export{c as _};

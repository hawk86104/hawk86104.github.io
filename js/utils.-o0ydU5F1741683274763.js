import"./@fesjs.k2eAvwyB1741683274763.js";import{_ as t}from"./jszip.b3hD2dNL1741683274763.js";import{F as n}from"./file-saver.--Jei3BU1741683274763.js";import{_ as e,aF as s}from"./three.3wvNjL8W1741683274763.js";const o=f;!function(t,n){const e=f,s=c();for(;;)try{if(813535===parseInt(e(546))/1+-parseInt(e(510))/2+-parseInt(e(505))/3*(-parseInt(e(539))/4)+parseInt(e(547))/5+parseInt(e(524))/6*(parseInt(e(479))/7)+-parseInt(e(556))/8*(parseInt(e(490))/9)+-parseInt(e(480))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=f,n=new RegExp(t(486)),e=new RegExp(t(557),"i"),s=b(t(512));n[t(518)](s+t(569))&&e[t(518)](s+"input")?b():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=o,s=new(e[n(571)]);return new Promise(((e,o)=>{const a=n;s[a(530)](t,(t=>e(JSON[a(507)](t))),void 0,(t=>o(t)))}))}function c(){const t=["setResponseType","constructor","394866XcMiap","console","init","data:image/PNG;base64,","push","stateObject","exception","image/bmp","test","action","images","result","onerror","__proto__","538554WaDyPu","endsWith","startsWith","data:image/JPEG;base64,","scene","files","load","base64","application/octet-stream","slice","url","Unknown","then","image/jpeg","get","268LZxdhv","onloadend","while (true) {}","apply","split","toLowerCase","data:image/GIF;base64,","1080347NIxjis","5537785WzgDnJ","geometries","blob","GIF","folder","prototype","uuid",";base64,","async","4699048ZpWwMh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","PNG","substring","url:","info","BufferGeometry","enabled","url:images/","data:image/jpeg;base64,","toString","table","debu","chain","return (function() ","FileLoader","error",'{}.constructor("return this")( )',"file","bind","app.json","28YIkiAK","16866710FiyOdq","forEach","data:image/webp;base64,","data","data:image/png;base64,","image/png","function *\\( *\\)","message","readAsDataURL","WEBP","18qCGPbc","generateAsync","loadAsync","type","data:","string","length","data:image/","stringify","trace","counter","Cache","pop","name","call","59349GHvHSK",".json","parse"];return(c=function(){return t})()}async function u(t){const n=o,s=new(e[n(571)]);return new Promise(((e,a)=>{const r=n;s[r(508)]("blob"),s.load(t,(n=>{const s=r,i=new FileReader;i.onloadend=()=>{const n=f,s=function(t){const n=o,e=t[n(543)](".")[n(502)]()[n(544)]();return{jpg:n(537),jpeg:n(537),png:n(485),gif:"image/gif",bmp:n(517),webp:"image/webp"}[e]||n(532)}(t),a=i[n(521)].split(",")[1];e(n(494)+s+";base64,"+a)},i[s(522)]=t=>{a(t)},i[s(488)](n)}),void 0,(t=>a(t)))}))}r(void 0,(function(){const t=f;let n;try{n=Function(t(570)+t(475)+");")()}catch(o){n=window}const e=n[t(511)]=n[t(511)]||{},s=["log","warn",t(561),t(474),t(516),t(567),t(499)];for(let a=0;a<s[t(496)];a++){const n=r[t(509)][t(552)].bind(r),o=s[a],i=e[o]||n;n[t(523)]=r[t(477)](r),n[t(566)]=i[t(566)].bind(i),e[o]=n}}))(),e[o(501)][o(563)]=!0;const l=n=>{const e=new s;return e.setResponseType("blob"),new Promise(((s,o)=>{e[f(530)](n,(async n=>{s(await t.loadAsync(n))}),void 0,(t=>o(t)))}))},p=t=>{const n=o,e=t[n(559)](0,15),s=n(565),a=n(527),r=n(484),i=n(513),c=n(545),u=n(482);return s.startsWith(e)||a.startsWith(e)?"JPEG":r[n(526)](e)||i.startsWith(e)?n(558):"data:image/gif;base64,".startsWith(e)||c.startsWith(e)?n(550):u[n(526)](e||"data:image/WEBP;base64,"[n(526)](e))?n(489):n(535)};function f(t,n){const e=c();return(f=function(t,n){return e[t-=474]})(t,n)}const g=e=>{const s=o,a=[];e[s(528)][s(548)]&&e.scene[s(548)].forEach((t=>{const n=s;t[n(493)]===n(562)&&(a[n(514)]({uuid:t[n(553)],data:t[n(483)]}),t[n(483)]="url:geometries/"+t[n(553)]+".json")}));const r=[];e[s(528)].images&&e[s(528)][s(520)].forEach((t=>{const n=s;t[n(534)]&&(r[n(514)]({uuid:t[n(553)],url:t[n(534)]}),t[n(534)][n(493)]?t[n(534)]=n(564)+t[n(553)]+"."+t[n(534)].type+n(506):t[n(534)]="url:images/"+t.uuid+"."+p(t[n(534)]))}));const i=new t;if(a.length){const t=i[s(551)](s(548));a[s(481)]((n=>{const e=s;t.file(n[e(553)]+e(506),JSON[e(498)](n[e(483)]))}))}if(r.length){const t=i[s(551)](s(520));r.forEach((n=>{const e=s;n[e(534)][e(493)]?t[e(476)](n[e(553)]+"."+n[e(534)][e(493)]+e(506),JSON[e(498)](n[e(534)])):t.file(n.uuid+"."+p(n[e(534)]),n[e(534)][e(543)](";base64,")[e(502)](),{base64:!0})}))}const c=JSON[s(498)](e);return i[s(476)](s(478),c),i[s(491)]({type:"blob"})[s(536)]((t=>{n.saveAs(t,"config.zip")}))},d=(t,n,e)=>{const s=o;t[s(548)]<=0&&t[s(520)]<=0&&e(n)},m=(n,e)=>{const s=o;let a=null;return t[s(492)](n).then((t=>{const n=s;t.files[n(478)]?t[n(529)][n(478)][n(555)](n(495))[n(536)]((s=>{var r,i;const c=n;a=JSON.parse(s);const u=(t=>{var n,e;const s=o,a={geometries:0,images:0};return null==(n=t[s(528)][s(548)])||n[s(481)]((t=>{const n=s;t[n(483)][n(526)](n(560))&&a[n(548)]++})),null==(e=t[s(528)][s(520)])||e.forEach((t=>{const n=s;t[n(534)][n(526)](n(560))&&a.images++})),a})(a);d(u,a,e),null==(r=a[c(528)][c(548)])||r[c(481)]((n=>{const s=c;n[s(483)][s(526)](s(560))&&t.files[n.data.slice(4)].async("string")[s(536)]((t=>{const o=s;n.data=JSON[o(507)](t),u.geometries--,d(u,a,e)}))})),null==(i=a.scene[c(520)])||i.forEach((n=>{const s=c;if(n[s(534)][s(526)](s(560))){const o=n.url[s(533)](4);o[s(525)](s(506))?t[s(529)][o][s(555)](s(495))[s(536)]((t=>{const o=s;n.url=JSON[o(507)](t),u[o(520)]--,d(u,a,e)})):t.files[o][s(555)](s(531))[s(536)]((t=>{const r=s,i=o[r(543)]("."),c=i[i[r(496)]-1].toUpperCase();n.url=r(497)+c+r(554)+t,u[r(520)]--,d(u,a,e)}))}}))})):console[n(474)]("非标准文件：不存在 app.json")}),(t=>{const e=s;console[e(474)](n[e(503)]+": "+t[e(487)])})),a};function b(t){function n(t){const e=f;if(typeof t===e(495))return function(t){}[e(509)](e(541)).apply(e(500));1!==(""+t/t)[e(496)]||t%20==0?function(){return!0}[e(509)](e(568)+"gger")[e(504)](e(519)):function(){return!1}[e(509)](e(568)+"gger")[e(542)](e(515)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,u as b,g as e,p as g,m as i,i as l};

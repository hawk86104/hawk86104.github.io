import{c1 as t,a3 as n,C as e,k as r}from"./three.ZddO3ejJ1726800306729.js";import{z as o}from"./@tresjs.pv1MNfNv1726800306729.js";import{R as c}from"./all.three.sSAZiCqo1726800306729.js";import{d as a,b as i,a4 as s,a3 as u,o as l,E as f,L as p,m,u as h}from"./@vue.bvMz0l_u1726800306729.js";function g(){const t=["#include <project_vertex>","448RyylCY","console","void main() {","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","bind","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","2810598TwUkQS","replace","__proto__","toString","305607csEaEq","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","stateObject","prototype","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","action","warn","init","constructor","45182AARKhV","4hlpmgB","fragmentShader","vertexShader","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","1935860eskjkj","12335246UgGAqa","while (true) {}","info","4426910KPmxEo","8197IvojWb","return (function() ",'{}.constructor("return this")( )',"input","test","apply","table","trace","debu","error","9tGJvCV","length","2beEirn","gger"];return(g=function(){return t})()}!function(t,n){const e=x,r=g();for(;;)try{if(258385===parseInt(e(128))/1*(parseInt(e(150))/2)+parseInt(e(164))/3+-parseInt(e(129))/4*(-parseInt(e(133))/5)+parseInt(e(160))/6+-parseInt(e(138))/7*(parseInt(e(153))/8)+-parseInt(e(148))/9*(-parseInt(e(137))/10)+-parseInt(e(134))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(143)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(156),"i"),r=y(t(126));n.test(r+"chain")&&e[t(142)](r+t(141))?y():r("0")}))()}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(143)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=g();return(x=function(t,n){return e[t-=123]})(t,n)}d(void 0,(function(){const t=x;let n;try{n=Function(t(139)+t(140)+");")()}catch(o){n=window}const e=n[t(154)]=n.console||{},r=["log",t(125),t(136),t(147),"exception",t(144),t(145)];for(let c=0;c<r[t(149)];c++){const n=d[t(127)][t(167)][t(158)](d),o=r[c],a=e[o]||n;n[t(162)]=d[t(158)](d),n[t(163)]=a[t(163)][t(158)](a),e[o]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(157))return function(t){}[e(127)](e(135)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(127)](e(146)+"gger").call(e(124)):function(){return!1}[e(127)](e(146)+e(151))[e(143)](e(166)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=I;!function(t,n){const e=I,r=S();for(;;)try{if(273105===-parseInt(e(226))/1+-parseInt(e(227))/2*(-parseInt(e(202))/3)+parseInt(e(216))/4*(-parseInt(e(232))/5)+-parseInt(e(235))/6*(parseInt(e(199))/7)+-parseInt(e(186))/8+parseInt(e(214))/9*(-parseInt(e(222))/10)+parseInt(e(185))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(205)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=I,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(208),"i"),r=E("init");n[t(193)](r+"chain")&&e[t(193)](r+t(189))?E():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(205)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(t,n){const e=S();return(I=function(t,n){return e[t-=183]})(t,n)}b(void 0,(function(){const t=I,n=function(){const t=I;let n;try{n=Function("return (function() "+t(195)+");")()}catch(e){n=window}return n}(),e=n[t(206)]=n[t(206)]||{},r=[t(196),"warn",t(236),"error",t(224),t(198),"trace"];for(let o=0;o<r[t(183)];o++){const n=b.constructor.prototype[t(221)](b),c=r[o],a=e[c]||n;n[t(203)]=b[t(221)](b),n[t(219)]=a.toString[t(221)](a),e[c]=n}}))();const C=["rotation-x"],M=["object",w(234)];function S(){const t=["2223725QaEkbY","textureMatrix","#ffffff","16878quOHgy","__proto__","call","apply","console","wrapT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","onBeforeRender","add","TresMesh","tmRef","gger","513NtZLNh","update","260SMEGGJ","uniforms","while (true) {}","toString","textureMatrixUniform","bind","33070UfrNxw","constructor","exception","TresGroup","353027WDZkLc","158AVrGIJ","value","renderTargetUniform","tmsmRef","attributes","21705wMqkLK","showGridHelper","visible","6ibAFms","info","color","length","TresMeshStandardMaterial","12727088lwTUng","1495928RlJylu","channel","debu","input","onBeforeCompile","tpgRef","stateObject","test","primitive",'{}.constructor("return this")( )',"log","string","table"];return(S=function(){return t})()}const j=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:w(201)}},async setup(a){const g=w;let v,d;const y=a,_=new t(9.5,10),b=i(),I=i(),S=i(),j=new c,E={mirror:{value:y.mirror},mixStrength:{value:y.mixStrength}},k=([v,d]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,d(),v);for(var R=0;R<3;R++)k[R].wrapS=n,k[R][g(207)]=n,k[R].repeat.set(16,16);const T={color:new e("#444"),metalness:1,roughness:1,map:k[0],metalnessMap:k[2],roughnessMap:k[2],aoMap:k[2],aoMapIntensity:1,normalMap:k[1],normalScale:new r(3,3)},z=t=>{const n=g;t[n(217)].reflectMap=j[n(229)],t[n(217)][n(200)]=j[n(220)],t.uniforms=Object.assign(t.uniforms,E),(t=>{const n=x;t.vertexShader=t.vertexShader[n(161)](n(155),n(159)),t[n(131)]=t[n(131)].replace(n(152),n(165))})(t),(t=>{const n=x;t[n(130)]=t.fragmentShader[n(161)](n(155),n(132)),t.fragmentShader=t.fragmentShader[n(161)]("#include <emissivemap_fragment>",n(123))})(t)};return u((()=>{const t=g;b[t(228)]&&(b.value[t(231)].uv1=b[t(228)][t(231)].uv),S[t(228)]&&(S[t(228)].aoMap[t(187)]=1,S[t(228)][t(190)]=z),I.value&&(I[t(228)][t(210)](j),I.value[t(209)]=(n,e,r)=>{j[t(215)](n,e,r)}),y.color&&S[t(228)]&&(S[t(228)][t(237)]=new e(y[t(237)]))})),(t,n)=>{const e=g;return l(),f(e(225),null,[p(e(211),{ref_key:e(212),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(191),ref:b,args:[10,10]},null,512),p(e(184),m({ref_key:e(230),ref:S},T),null,16)],8,C),p(e(194),{object:h(_),visible:t[e(233)]},null,8,M)])}}});function E(t){function n(t){const e=I;if(typeof t===e(197))return function(t){}.constructor(e(218))[e(205)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(223)](e(188)+e(213))[e(204)]("action"):function(){return!1}[e(223)](e(188)+e(213)).apply(e(192)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

import{a5 as t,h as n}from"./three.HHcT7YAr1718612273914.js";import{a as e}from"./@tresjs.W42D3qe_1718612273914.js";import{d as o,P as a}from"./@pmndrs.GoGkK4yp1718612273914.js";import{d as r,b as s,w as i,a2 as c,o as u,D as l,J as f,aj as p,ak as h}from"./@vue.CpOXM7bB1718612273914.js";const d=y;!function(t,n){const e=y,o=g();for(;;)try{if(164064===parseInt(e(520))/1*(-parseInt(e(512))/2)+-parseInt(e(517))/3*(-parseInt(e(549))/4)+parseInt(e(523))/5+-parseInt(e(488))/6*(-parseInt(e(502))/7)+parseInt(e(511))/8*(parseInt(e(489))/9)+parseInt(e(498))/10+-parseInt(e(548))/11)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const m=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[y(509)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){m(this,(function(){const t=y,n=new RegExp(t(475)),e=new RegExp(t(536),"i"),o=x(t(516));n[t(527)](o+t(537))&&e.test(o+t(525))?x():o("0")}))()}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[y(509)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["debu",'{}.constructor("return this")( )',"DirectionalLight","acos","size","alphaTest","right","position","opacity","clear","TresSoftShadowMaterial","1194GujXBp","9qvxANC","children","random","height","shadow","counter","intensity","trace","shadows render end","217110rFnJiU","castShadow","lightPosition","bottom","9331IVwjaK","width","gger","blend","frames","Vector3","warn","apply","mapSize","652616lgjDeJ","124444kKvHFf","bind","length","exception","init","20631hHDZIm","info","gPlane","4GSoald","MathUtils","camera","485160jaXDeF","Group","input","sin","test","console","blendWindow","call","string","add","randFloatSpread","color","TresPlaneGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","abs","cos","ambient","bias","#000000","action","constructor","set","near","value","805926MKOJkN","12vSEcgY","log","remove","top","configure","left","radius","toString","accumulativeShadowsCom","far","function *\\( *\\)","material"];return(g=function(){return t})()}w(void 0,(function(){const t=y;let n;try{n=Function("return (function() "+t(478)+");")()}catch(a){n=window}const e=n[t(528)]=n.console||{},o=[t(550),t(508),t(518),"error",t(515),"table",t(496)];for(let r=0;r<o.length;r++){const n=w[t(544)].prototype[t(513)](w),a=o[r],s=e[a]||n;n.__proto__=w[t(513)](w),n[t(472)]=s[t(472)].bind(s),e[a]=n}}))();const M=["rotate-x"],b=f(d(535),{args:[1,1]},null,-1);function y(t,n){const e=g();return(y=function(t,n){return e[t-=472]})(t,n)}const I=r({__name:d(473),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:d(542)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=d,w=r;let g=s();const{extend:y,scene:I,renderer:x,camera:j}=e();y({SoftShadowMaterial:o});const v={position:(new(t[m(507)]))[m(545)](w[m(500)].x,w[m(500)].y,w.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},S=new a(x.value,I[m(547)],v[m(510)]),P={map:S.progressiveLightMap2.texture,transparent:!0,depthWrite:!1,toneMapped:!0,blend:w[m(505)],alphaTest:w[m(482)],opacity:w[m(485)],color:w[m(534)]},z=new(t[m(524)]);for(let n=0;n<v.amount;n++){const n=new(t[m(479)])(16777215,v[m(495)]/v.amount);n[m(499)]=!0,n.shadow.bias=v[m(541)],n[m(493)].camera[m(546)]=v[m(546)],n[m(493)][m(522)][m(474)]=v[m(474)],n[m(493)][m(522)][m(483)]=v[m(481)]/2,n.shadow[m(522)][m(554)]=-v[m(481)]/2,n[m(493)].camera[m(552)]=v[m(481)]/2,n[m(493)][m(522)][m(501)]=-v[m(481)]/2,n.shadow[m(510)][m(503)]=v[m(510)],n[m(493)][m(510)][m(492)]=v[m(510)],z[m(532)](n)}const _=()=>{const e=m,o=v[e(484)][e(514)]();for(let a=0;a<z[e(490)][e(514)];a++){const r=z[e(490)][a];if(Math[e(491)]()>w[e(540)])r[e(484)].set(v[e(484)].x+t[e(521)][e(533)](v[e(555)]),v.position.y+t[e(521)][e(533)](v[e(555)]),v[e(484)].z+n[e(533)](v[e(555)]));else{let t=Math[e(480)](2*Math[e(491)]()-1)-Math.PI/2,n=2*Math.PI*Math[e(491)]();r.position[e(545)](Math.cos(t)*Math[e(539)](n)*o,Math[e(538)](Math[e(539)](t)*Math[e(526)](n)*o),Math.sin(t)*o)}}},T=(t=1)=>{const n=m;I[n(547)][n(532)](z),S.prepare();for(let e=0;e<t;e++)_(),S.update(j[n(547)],w.blendWindow),console[n(550)]("shadows plm update",e);I.value[n(551)](z),S.finish()};i((()=>g[m(547)]),(t=>{const n=m;t&&(S[n(553)](t),S[n(486)](),console[n(550)]("shadows render start"),T(w.frames),console.log(n(497)))}));const k=()=>{S[m(486)](),T(w.frames)};return c((()=>{const t=m;g[t(547)]&&(w.opacity&&(g[t(547)].material[t(485)]=w[t(485)]),w[t(482)]&&(g[t(547)][t(476)].alphaTest=w[t(482)]),w[t(534)]&&g[t(547)][t(476)][t(534)][t(545)](w[t(534)]),w[t(505)]&&(g[t(547)][t(476)][t(505)]=w[t(505)]))})),i((()=>w.lightPosition),(t=>{const n=m;t&&(console[n(550)](w[n(500)]),v[n(484)][n(545)](t.x,t.y,t.z),k())}),{deep:!0}),i((()=>[w[m(506)],w[m(529)],w[m(540)]]),(()=>{k()})),(t,n)=>{const e=m;return u(),l("TresMesh",{"receive-shadow":"",ref_key:e(519),ref:g,scale:10,"rotate-x":-Math.PI/2},[b,f(e(487),p(h(P)),null,16)],8,M)}}});function x(t){function n(t){const e=y;if(typeof t===e(531))return function(t){}[e(544)]("while (true) {}")[e(509)](e(494));1!==(""+t/t)[e(514)]||t%20==0?function(){return!0}.constructor(e(477)+e(504))[e(530)](e(543)):function(){return!1}[e(544)](e(477)+e(504))[e(509)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

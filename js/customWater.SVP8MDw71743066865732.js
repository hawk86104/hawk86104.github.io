import{_ as e,C as t,ab as n}from"./three.qSkR4_5R1743066865732.js";import{e as r,h as a,o}from"./@tresjs.NxYvETXi1743066865732.js";import{a as s}from"./index.bm35pHND1743066865732.js";import"./index.kkOCzxkp1743066865732.js";import{z as i}from"./three-custom-shader-material.IZIiFiAC1743066865732.js";import{p as l}from"./gl-noise.u0wef8ro1743066865732.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,e as b,f as w,g as y,aj as j,ak as M,m as x,al as z}from"./@vue.L-brCdZe1743066865732.js";import{P as C}from"./tweakpane.ivGeiIdz1743066865732.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.7HkSmqnc1743066865732.js";import"./postprocessing.ncQBP5me1743066865732.js";import"./@vueuse.2gpu5LGS1743066865732.js";import"./three-stdlib.tjOHNgPP1743066865732.js";import"./@pmndrs.fRJ1Czfy1743066865732.js";import"./object-hash.j9vF23_i1743066865732.js";import"./@amap.h2kWdZ7d1743066865732.js";import"./jszip.ZK9v5YwH1743066865732.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.xkDKZhLE1743066865732.js";import"./all.three.-jXJLs_M1743066865732.js";import"./oimophysics.WhCxc1Ho1743066865732.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.z5wnD9Re1743066865732.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.38fWtuB31743066865732.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.wCf2mElV1743066865732.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.z5ONRhjp1743066865732.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.n019etbs1743066865732.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.0UEL-IzL1743066865732.js";const T=I;function I(e,t){const n=O();return I=function(e,t){return n[e-=414]},I(e,t)}!function(e,t){const n=I,r=O();for(;;)try{if(373143===-parseInt(n(457))/1+parseInt(n(445))/2*(-parseInt(n(417))/3)+-parseInt(n(443))/4*(parseInt(n(420))/5)+parseInt(n(419))/6+parseInt(n(415))/7+-parseInt(n(455))/8*(parseInt(n(451))/9)+parseInt(n(458))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[I(452)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){G(this,(function(){const e=I,t=new RegExp(e(428)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=k(e(467));t[e(442)](r+e(424))&&n[e(442)](r+"input")?k():r("0")}))()}();const H=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[I(452)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();H(void 0,(function(){const e=I;let t;try{t=Function(e(469)+e(421)+");")()}catch(a){t=window}const n=t.console=t[e(439)]||{},r=["log","warn",e(438),e(470),e(430),e(432),e(463)];for(let o=0;o<r[e(440)];o++){const t=H[e(450)][e(444)].bind(H),a=r[o],s=n[a]||t;t[e(466)]=H[e(431)](H),t[e(422)]=s[e(422)][e(431)](s),n[a]=t}}))();const B=["rotation-x"],F=[T(448)];function O(){const e=["string","info","console","length","MeshPhysicalMaterial","test","24176SpyayE","prototype","2CwDsbQ","debu","customWaterMesh","args","value","constructor","6282054rYZFkl","apply","convertLinearToSRGB","while (true) {}","8uFbXJc","#52a7f7","729882diZwZr","13618550KxFoME","TresBoxGeometry","waterHighlight","gger","Color","trace","fragmentShader","uHeight","__proto__","init","height","return (function() ","error","vertex","call","4219117TlfAvL","stateObject","471723hFizGW","fragment","2391804itffyg","335xERuzH",'{}.constructor("return this")( )',"toString","uTime","chain","material","baseMaterial","waterColor","function *\\( *\\)","DoubleSide","exception","bind","table","tmRef","Flatshading","needsUpdate","brightness"];return(O=function(){return e})()}const W=u({__name:T(447),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(456)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:e[T(441)]}},setup(o){const s=T,u=o,_=c(null),b={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},w={uTime:{value:0},waterColor:{value:new t(u[s(427)]).convertLinearToSRGB()},waterHighlight:{value:new t(u.waterHighlight)[s(453)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:u[s(436)]},uHeight:{value:u[s(468)]}},{onLoop:y}=r();return y((({elapsed:e})=>{w[s(423)].value=-e/5})),p((()=>{const n=s;u[n(468)]&&(w[n(465)][n(449)]=u[n(468)]),u[n(427)]&&(w[n(427)][n(449)]=new(e[n(462)])(u[n(427)])[n(453)]()),u[n(460)]&&(w[n(460)][n(449)]=new t(u[n(460)])[n(453)]()),u[n(436)]&&(w[n(436)][n(449)]=u[n(436)])})),f((()=>u[s(434)]),(e=>{const t=s;_[t(449)][t(425)][t(435)]=!0})),f((()=>u[s(426)]),(t=>{const r=s,a=new i({baseMaterial:e[t],vertexShader:l(b[r(471)]),fragmentShader:b[r(418)],uniforms:w,flatShading:u[r(434)],side:n,roughness:.2,metalness:.1,silent:!0});_[r(449)].material.dispose(),_.value[r(425)]=a})),(t,n)=>{const r=s;return g(),h("TresMesh",{ref_key:r(433),ref:_,"rotation-x":-Math.PI/2},[m(r(459),{args:[5,5,t.height,64,64,1]},null,8,F),v(d(a),{baseMaterial:e[r(441)],vertexShader:d(l)(b[r(471)]),fragmentShader:b[r(418)],uniforms:w,side:e[r(429)],roughness:.2,metalness:.1,flatShading:t[r(434)],silent:""},null,8,[r(426),"vertexShader",r(464),"side","flatShading"])],8,B)}}});function k(e){function t(e){const n=I;if(typeof e===n(437))return function(e){}[n(450)](n(454))[n(452)]("counter");1!==(""+e/e).length||e%20==0?function(){return!0}[n(450)](n(446)+n(461))[n(414)]("action"):function(){return!1}.constructor(n(446)+n(461))[n(452)](n(416)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const D=R;!function(e,t){const n=R,r=L();for(;;)try{if(417713===-parseInt(n(161))/1*(-parseInt(n(162))/2)+parseInt(n(137))/3+-parseInt(n(143))/4+parseInt(n(160))/5+parseInt(n(149))/6*(-parseInt(n(164))/7)+parseInt(n(171))/8+-parseInt(n(156))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){N(this,(function(){const e=R,t=new RegExp(e(123)),n=new RegExp(e(178),"i"),r=E(e(157));t[e(159)](r+e(165))&&n[e(159)](r+"input")?E():r("0")}))()}();const P=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[R(152)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function L(){const e=["26SkeSBo","27062czIlXd","resource.cos","42LhkoFq","chain","#52a7f7","MeshNormalMaterial","/images/skyBox/6jpg/","MeshLambertMaterial","warn","2763248SOnYoe","gger","__proto__","pos-x.jpg","bind","水体颜色","MeshStandardMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","pos-z.jpg","MeshToonMaterial","MeshPhongMaterial","toString","console","function *\\( *\\)","brightness","addBinding","info","stateObject","debu","MeshPhysicalMaterial","length","value","neg-z.jpg","TresAmbientLight","log","waterHighlight","TresPerspectiveCamera","2270556eHqQge","MeshBasicMaterial","constructor","#3a78a2","string","neg-y.jpg","3021004YuGCDm","call","waterColor","target","error","Flatshading","427938YOWjvk","https://opensource.cdn.icegl.cn","ACESFilmicToneMapping","apply","customWater","MeshDepthMaterial","#627179","3868632lNygyL","init","baseMaterial","test","2883430KqhONr"];return(L=function(){return e})()}function R(e,t){const n=L();return R=function(e,t){return n[e-=123]},R(e,t)}P(void 0,(function(){const e=R;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(a){t=window}const n=t[e(184)]=t[e(184)]||{},r=[e(134),e(170),e(126),e(147),"exception","table",e(179)];for(let o=0;o<r[e(130)];o++){const t=P[e(139)].prototype[e(175)](P),a=r[o],s=n[a]||t;t[e(173)]=P[e(175)](P),t.toString=s[e(183)][e(175)](s),n[a]=t}}))();const A=u({__name:D(153),setup(t){const n=D,r=_({alpha:!0,toneMapping:e[n(151)],windowSize:!0,clearColor:10066329}),a=_({enableDamping:!0,autoRotate:!1}),i=_({cellSize:.6,cellThickness:1.1,cellColor:n(155),sectionColor:n(140),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),l=_({height:.2,Flatshading:!1,waterColor:n(166),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(129)}),u=new C;return u.addBinding(l,"height",{label:"高度",min:.1,max:5,step:.1}),u.addBinding(l,n(145),{label:n(176)}),u[n(125)](l,n(135),{label:"浪头颜色"}),u[n(125)](l,n(124),{label:"亮度",min:0,max:1,step:.01}),u[n(125)](l,n(148),{label:"Flatshading"}),u.addBlade({view:"list",label:"材质",options:[{text:n(129),value:n(129)},{text:"MeshBasicMaterial",value:n(138)},{text:n(167),value:n(167)},{text:n(177),value:n(177)},{text:n(182),value:n(182)},{text:n(181),value:n(181)},{text:n(169),value:"MeshLambertMaterial"},{text:"MeshDepthMaterial",value:n(154)}],value:l.baseMaterial}),u.on("change",(e=>{const t=n;"材质"===e[t(146)].label&&(l[t(158)]=e[t(131)])})),(e,t)=>{const u=n,c=b("TresCanvas");return g(),w(c,x(r,{"window-size":""}),{default:y((()=>[t[0]||(t[0]=m(u(136),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(o),j(M(a)),null,16),t[1]||(t[1]=m(u(133),{intensity:.5},null,-1)),t[2]||(t[2]=m("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1)),v(W,j(M(l)),null,16),v(d(S),x({args:[3,3]},i,{position:[0,-.5,0]}),null,16),(g(),w(z,null,{default:y((()=>[v(d(s),{files:[u(174),"neg-x.jpg","pos-y.jpg",u(142),u(180),u(132)],path:u(150)+u(168)},null,8,["path"])])),_:1}))])),_:1},16)}}});function E(e){function t(e){const n=R;if(typeof e===n(141))return function(e){}[n(139)]("while (true) {}")[n(152)]("counter");1!==(""+e/e)[n(130)]||e%20==0?function(){return!0}[n(139)](n(128)+n(172))[n(144)]("action"):function(){return!1}[n(139)]("debugger")[n(152)](n(127)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{F as r,_ as a,T as t,K as s}from"./@tresjs.B1f7s3pS1767066396612.js";import{f as l,U as n,E as o}from"./three.BD1hRFgo1767066396612.js";const{defineComponent:u}=await e("vue"),{unref:i,createVNode:c,createElementVNode:f,Fragment:v,openBlock:m,createElementBlock:d}=await e("vue"),{watchEffect:p,ref:w}=await e("vue"),h=await e("three"),y=u({__name:"ecLayers",setup(e){const{camera:s,renderer:u,scene:y,sizes:T}=r(),_=w(),B=w(),g=w();let k=null;const x=0,C=.972,M=.21;p(()=>{_.value&&_.value.instance.layers.set(0),B.value&&B.value.layers.set(1),g.value&&g.value.layers.set(2),T.width.value&&((e,r,a,t,s)=>{const u=new l(e,r),i=new n(new h.Vector2(t,s),C,M,x);k=new o(a),k.addPass(u),k.addPass(i)})(y.value,s.value,u,T.width.value,T.height.value)});const{onRender:E}=a();return E(()=>{k&&s.value&&(u.clear(),s.value.layers.set(1),k.render(),u.clearDepth(),s.value.layers.set(0),u.render(y.value,s.value))}),(e,r)=>(m(),d(v,null,[c(i(t),{ref_key:"normalBox",ref:_,args:[1,1,1],color:"orange",position:[3,2,1]},null,512),f("TresMesh",{ref_key:"shineBox",ref:B,position:[0,2,-4]},[...r[0]||(r[0]=[f("TresBoxGeometry",{args:[1,1,1]},null,-1),f("TresMeshNormalMaterial",null,null,-1)])],512),f("TresMesh",{ref_key:"filmBox",ref:g,position:[1,2,3]},[...r[1]||(r[1]=[f("TresBoxGeometry",{args:[1,1,1]},null,-1),f("TresMeshNormalMaterial",null,null,-1)])],512)],64))}}),{defineComponent:T}=await e("vue"),{createElementVNode:_,unref:B,createVNode:g,resolveComponent:k,withCtx:x,openBlock:C,createBlock:M}=await e("vue"),{watchEffect:E,ref:N}=await e("vue"),V=T({__name:"effectComposerLayers",setup(e){const r=N();return E(()=>{if(r.value){r.value.context.renderer.instance.autoClear=!1}}),(e,a)=>{const t=k("TresCanvas");return C(),M(t,{ref_key:"tcRef",ref:r,renderMode:"manual","window-size":""},{default:x(()=>[a[0]||(a[0]=_("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),a[1]||(a[1]=_("TresAmbientLight",{intensity:1},null,-1)),g(B(s)),a[2]||(a[2]=_("TresGridHelper",{args:[10,10]},null,-1)),g(y)]),_:1},512)}}});export{V as default};

import{_ as e,s as a}from"./@tresjs.BCHtwiaC1763540743861.js";import{V as s,bc as r,l as o,au as t,az as l}from"./three.rXKzP9fQ1763540743861.js";import{l as n}from"./utils.DhJ-cORL1763540743861.js";import{d as f,a as u,a8 as p,a6 as d,H as i,o as c,h as m,e as g,F as h,X as _,J as v,u as y}from"./@vue.Co_gxueH1763540743861.js";const w={renderOrder:3e3},T=["args"],j=["map","side","color"],M=f({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(f){let M,b;const J=f,R=u(),k=u(),x=([M,b]=p(()=>n(J.geoJson)),M=await M,b(),M),B=[-31.258949,0,-121.465782];let G=[];for(var L=0;L<x.length;L++){const e=x[L],a=[];e.geometry.coordinates.forEach(e=>{a.push(new s(6e4*(e[1]+B[0]),B[1],6e4*(e[0]+B[2])))}),G.push(new r(a))}d(()=>{J.color&&k.value&&(k.value.color=new o(J.color))});const{onBeforeRender:z}=e(),C=u();z(()=>{C.value&&(C.value.offset.x-=Math.random()/20*J.speed)});const E=e=>{e.wrapS=e.wrapT=l,e.repeat.set(1,1),C.value=e};return(e,s)=>(c(),i("TresGroup",{ref_key:"tgRef",ref:R},[m(y(a),{path:"./plugins/digitalCity/image/line.png",onLoaded:E},{default:g(({state:e})=>[(c(!0),i(h,null,_(y(G),a=>(c(),i("TresMesh",w,[v("TresTubeGeometry",{args:[a,64,J.radius,20,!1]},null,8,T),v("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:k,map:e,side:y(t),transparent:!0,color:J.color},null,8,j)]))),256))]),_:1})],512))}});export{M as _};

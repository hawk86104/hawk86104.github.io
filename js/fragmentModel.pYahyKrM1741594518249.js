import{_ as n,c as t,C as o,c3 as r}from"./three.8y0_KTxz1741594518249.js";import{e,D as a,a as s,o as i}from"./@tresjs.gjafZgVK1741594518249.js";import{P as c}from"./tweakpane.yDiyAAkA1741594518249.js";import{d as u,a3 as l,r as f,b as p,w as m,o as g,H as v,N as x,aj as d,ak as y,u as b,e as h,f as w,g as C,j as I,al as _}from"./@vue.NRI7TcgI1741594518249.js";import"./postprocessing.iiPTtJPW1741594518249.js";import"./@vueuse.8xnC6EWf1741594518249.js";const z=N;!function(n,t){const o=N,r=A();for(;;)try{if(248998===parseInt(o(389))/1*(-parseInt(o(370))/2)+-parseInt(o(386))/3*(parseInt(o(346))/4)+-parseInt(o(343))/5*(parseInt(o(331))/6)+-parseInt(o(379))/7*(parseInt(o(387))/8)+parseInt(o(385))/9*(-parseInt(o(384))/10)+-parseInt(o(356))/11+parseInt(o(388))/12)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[N(359)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){P(this,(function(){const n=N,t=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=D("init");t[n(392)](r+n(345))&&o[n(392)](r+n(393))?D():r("0")}))()}();const M=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[N(359)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();M(void 0,(function(){const n=N;let t;try{t=Function(n(352)+n(364)+");")()}catch(e){t=window}const o=t[n(394)]=t[n(394)]||{},r=[n(401),n(395),n(373),n(371),n(363),n(367),n(391)];for(let a=0;a<r[n(366)];a++){const t=M[n(357)].prototype[n(381)](M),e=r[a],s=o[e]||t;t.__proto__=M.bind(M),t[n(347)]=s[n(347)][n(381)](s),o[e]=t}}))();const j=["geometry"];function A(){const n=["value","scene","toNonIndexed","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","15BzaktA","counter","chain","5044bDNisN","toString","count","disabled","Color","position","return (function() ","./draco/","rotateY","tangent","741400WxOqeP","constructor","geometry","apply","Mesh","array","gger","exception",'{}.constructor("return this")( )',"颜色2rd","length","table","fragmentModelCom","stateObject","5722rQCpxE","error","u_progress","info","BufferAttribute","aRandom","toNormal","refresh","#ffc0fa","35axGFGa","m2Color","bind","call","uniforms","20SsxBcM","20457bXGUZQ","453UJGItt","530744akUlFE","15322500qsbHyH","19xfWMgr","setAttribute","trace","test","input","console","warn","set","action","debu","push","traverse","log","颜色1st","deleteAttribute","rotateX","addBinding","758892mFrQFd","TresShaderMaterial","while (true) {}","children","#bcd4ff","Vector3","attributes","random"];return(A=function(){return n})()}function N(n,t){const o=A();return(N=function(n,t){return o[n-=330]})(n,t)}const F=u({__name:z(368),async setup(i){const u=z;let h,w;const C=t=>{const o=N,e=[];return t[o(400)]((t=>{const r=o;t instanceof n[r(360)]&&(t[r(358)][r(403)]("uv"),t[r(358)][r(403)](r(355)),e[r(399)](t[r(358)]))})),r(e)},I=C(([h,w]=l((()=>a(u(342),{draco:!0,decoderPath:u(353)}))),h=await h,w(),h)[u(340)][u(334)][0]);I[u(404)](Math.PI/2),I.translate(0,-.9,0);const _=I.clone()[u(341)](),P=C(([h,w]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),h=await h,w(),h).scene[u(334)][0]);P[u(404)](-Math.PI/2),P[u(354)](Math.PI/3);const M=P.clone().toNonIndexed(),A=_.attributes.position[u(361)],F=_.attributes[u(351)][u(348)],D=M[u(337)][u(351)].array,R=M[u(337)].normal[u(361)],E=M[u(337)][u(351)][u(348)],S=new Float32Array(F),V=new Float32Array(3*(F+2)),B=new Float32Array(3*(F+2)),k=new Float32Array(3*(F+2));for(let t=0;t<F;t+=3){const o=1*Math[u(338)](),r=t%E;S[t]=o,S[t+1]=o,S[t+2]=o;const e=3*t,a=A[e],s=A[e+1],i=A[e+2],c=A[e+3],l=A[e+4],f=A[e+5],p=A[e+6],m=A[e+7],g=A[e+8],v=new(n[u(336)])(a+c+p,s+l+m,i+f+g).divideScalar(3);V.set([v.x,v.y,v.z],3*t),V[u(396)]([v.x,v.y,v.z],3*(t+1)),V.set([v.x,v.y,v.z],3*(t+2));const x=(n,t,o)=>{const r=u,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(396)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(D,B,r),x(R,k,r)}_[u(390)](u(375),new t(S,1)),_[u(390)]("aCenter",new t(V,3)),_[u(390)]("toPosition",new(n[u(374)])(B,3)),_[u(390)](u(376),new t(k,3)),console[u(401)](_.attributes);const T=([h,w]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,w(),h),U={uniforms:{u_progress:{value:-.1},matcap1:{value:T},m1Color:{type:"v3",value:new o(u(378))},matcap2:{value:T},m2Color:{type:"v3",value:new(n[u(350)])(u(335))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},Z=f({c1:u(378),c2:"#bcd4ff"}),G=p(.5),q=new c({title:"参数"});return q[u(330)](U.uniforms[u(372)],u(339),{label:"变化量",min:-.1,max:1,step:.001})[u(349)]=!0,q[u(330)](Z,"c1",{label:u(402)}),q.addBinding(Z,"c2",{label:u(365)}),q.addBinding(G,"value",{label:"速度",min:.001,max:1,step:.001}),m(Z,(n=>{const t=u;U.uniforms.m1Color[t(339)][t(396)](n.c1),U[t(383)][t(380)][t(339)][t(396)](n.c2)}),{deep:!0}),e().onLoop((({elapsed:n})=>{const t=u;U.uniforms[t(372)][t(339)]=(Math.sin(n*G[t(339)])+1)/2,q[t(377)]()})),(n,t)=>{const o=u;return g(),v("TresMesh",{geometry:b(_)},[x(o(332),d(y(U)),null,16)],8,j)}}});function D(n){function t(n){const o=N;if("string"==typeof n)return function(n){}[o(357)](o(333))[o(359)](o(344));1!==(""+n/n).length||n%20==0?function(){return!0}[o(357)](o(398)+o(362))[o(382)](o(397)):function(){return!1}[o(357)](o(398)+"gger")[o(359)](o(369)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const R=V;!function(n,t){const o=V,r=B();for(;;)try{if(572648===parseInt(o(289))/1+-parseInt(o(268))/2*(parseInt(o(266))/3)+parseInt(o(269))/4+-parseInt(o(296))/5*(-parseInt(o(279))/6)+-parseInt(o(284))/7+-parseInt(o(298))/8+parseInt(o(263))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const E=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(277)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){E(this,(function(){const n=V,t=new RegExp(n(293)),o=new RegExp(n(278),"i"),r=T(n(297));t.test(r+"chain")&&o.test(r+"input")?T():r("0")}))()}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(277)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function V(n,t){const o=B();return(V=function(n,t){return o[n-=258]})(n,t)}function B(){const n=["exception","1967931oeRuCF",'{}.constructor("return this")( )',"gger","#000000","log","878165EoncuK","TresPerspectiveCamera","toString","debu","function *\\( *\\)","string","stateObject","544865hoBKoj","init","7689512UZTQWm","length","error","TresAmbientLight","call","return (function() ","15361398xLGWFN","console","constructor","39AACjmS","warn","167798INfyiX","846788LxyEoB","fragmentModel","trace","__proto__","prototype","while (true) {}","TresCanvas","bind","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6xriqsy","ACESFilmicToneMapping","info","table"];return(B=function(){return n})()}S(void 0,(function(){const n=V;let t;try{t=Function(n(262)+n(285)+");")()}catch(e){t=window}const o=t[n(264)]=t[n(264)]||{},r=[n(288),n(267),n(281),n(259),n(283),n(282),n(271)];for(let a=0;a<r[n(258)];a++){const t=S[n(265)][n(273)][n(276)](S),e=r[a],s=o[e]||t;t[n(272)]=S[n(276)](S),t[n(291)]=s[n(291)][n(276)](s),o[e]=t}}))();const k=u({__name:R(270),setup(t){const o=R,r=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(287),windowSize:!0,toneMapping:n[o(280)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=h(a(275));return g(),w(s,d(y(e)),{default:C((()=>[t[0]||(t[0]=x(a(290),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(b(i),d(y(r)),null,16),t[1]||(t[1]=x(a(260),{intensity:2},null,-1)),(g(),w(_,null,{default:C((()=>[I(F)])),_:1}))])),_:1},16)}}});function T(n){function t(n){const o=V;if(typeof n===o(294))return function(n){}[o(265)](o(274))[o(277)]("counter");1!==(""+n/n)[o(258)]||n%20==0?function(){return!0}[o(265)](o(292)+"gger")[o(261)]("action"):function(){return!1}[o(265)]("debu"+o(286))[o(277)](o(295)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{k as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aP as v,aQ as m,A as g,bb as _,C as y,a0 as x,W as I,n as b,o as w,c9 as S,ca as M,K as E,f as R,V as A,g as T,_ as D,m as z,ba as P,k as O,bt as C,d as k,aj as F,B,a as j,aN as U,e as N,M as L,as as H,a9 as Z,h as G,a6 as W}from"./three.lAfZYOpc1736493808390.js";import{m as $,D as V,e as X}from"./@tresjs.g7tJPOCI1736493808390.js";import{R as q}from"./three-stdlib.fsyd4aYS1736493808390.js";import{v as K,b as J,w as Y,a as Q,u as nn,d as tn,U as en,a4 as rn,o as on,D as an,G as cn,I as sn,a2 as un,a8 as ln,a1 as fn,q as pn,f as dn,J as hn,a9 as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a6 as In,m as bn}from"./@vue.-Mz_IXfk1736493808390.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.oxz-0pU-1736493808390.js";import{h as En}from"./object-hash.DG5huwqG1736493808390.js";var Rn=zn;!function(n,t){for(var e=zn,r=Tn();;)try{if(956696===-parseInt(e(363))/1*(-parseInt(e(379))/2)+parseInt(e(352))/3*(-parseInt(e(368))/4)+-parseInt(e(353))/5*(-parseInt(e(372))/6)+-parseInt(e(381))/7*(parseInt(e(362))/8)+parseInt(e(367))/9*(-parseInt(e(378))/10)+-parseInt(e(376))/11*(-parseInt(e(366))/12)+parseInt(e(384))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(369)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(){var n=["virtualScene","warn","2643pijrXu","30brnWht","destructor","info","bind","__proto__","prototype","log","stateObject","debu","5187272WpjRIE","129fuSNlt","return (function() ","exception","312fnFJsL","16434LCoEjX","680yjLUoe","apply","console","length","266010OgRRPB","add","geometry","error","515636NMTLIm","constructor","2910zZNSgP","20970joxviG","test","14hQLWEc","material","action","1264887QvGgnz","function *\\( *\\)",'{}.constructor("return this")( )',"dispose","remove","table","while (true) {}","call","gger","map","counter"];return(Tn=function(){return n})()}!function(){An(this,(function(){var n=zn,t=new RegExp(n(385)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Cn("init");t[n(380)](r+"chain")&&e[n(380)](r+"input")?Cn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(369)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(n,t){var e=Tn();return(zn=function(n,t){return e[n-=348]})(n,t)}Dn(void 0,(function(){for(var n=zn,t=function(){var n,t=zn;try{n=Function(t(364)+t(386)+");")()}catch(e){n=window}return n}(),e=t[n(370)]=t[n(370)]||{},r=[n(359),n(351),n(355),n(375),n(365),n(389),"trace"],o=0;o<r.length;o++){var i=Dn[n(377)][n(358)][n(356)](Dn),a=r[o],c=e[a]||i;i[n(357)]=Dn.bind(Dn),i.toString=c.toString.bind(c),e[a]=i}}))();class Pn extends s{constructor(){var n=zn;super(),this[n(350)]=null,this[n(350)]=new u}[Rn(373)](...n){var t=Rn;return this[t(350)][t(373)](...n),this}[Rn(354)](){var n=Rn;this[n(350)].traverse((t=>{var e=n;t instanceof l&&(t[e(374)][e(387)](),t[e(382)][e(387)](),t.material[e(348)]&&t[e(382)][e(348)][e(387)](),this[e(350)][e(388)](t))})),this[n(350)]=null}}const On=Pn;function Cn(n){function t(n){var e=zn;if("string"==typeof n)return function(n){}.constructor(e(390))[e(369)](e(349));1!==(""+n/n)[e(371)]||n%20==0?function(){return!0}[e(377)]("debu"+e(392))[e(391)](e(383)):function(){return!1}[e(377)](e(361)+e(392)).apply(e(360)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Fn;function Fn(n,t){const e=jn();return(Fn=function(n,t){return e[n-=314]})(n,t)}!function(n,t){const e=Fn,r=jn();for(;;)try{if(737490===parseInt(e(326))/1+-parseInt(e(354))/2*(parseInt(e(315))/3)+parseInt(e(359))/4*(parseInt(e(336))/5)+parseInt(e(339))/6*(parseInt(e(328))/7)+parseInt(e(358))/8*(parseInt(e(360))/9)+parseInt(e(347))/10+parseInt(e(344))/11*(-parseInt(e(314))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(){const n=["toString","11TgTVGZ","bind","indoor/abandoned_games_room_02_1k.hdr","10431360BYGOWR","studio/poly_haven_studio_1k.hdr",'{}.constructor("return this")( )',"__proto__","exception","indoor/small_hangar_01_1k.hdr","debu","4uanucN","chain","console","outdoor/snowy_forest_path_01_1k.hdr","448CSOIkN","1732lJhfRk","40059khZhxt","city/modern_buildings_2_1k.hdr","36211236TngufS","596463obEZQq","outdoor/satara_night_1k.hdr","info","log","string","length","error","outdoor/outdoor_umbrellas_1k.hdr","init","action","function *\\( *\\)","1167514ZTLkdm","apply","490FoxhBR","prototype","call","gger","kiara/kiara_1_dawn_1k.hdr","city/canary_wharf_1k.hdr","trace","input","7815vEoOcD","constructor","test","87090AlWUEz","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn"];return(jn=function(){return n})()}!function(){Bn(this,(function(){const n=Fn,t=new RegExp(n(325)),e=new RegExp(n(341),"i"),r=Ln(n(323));t[n(338)](r+n(355))&&e.test(r+n(335))?Ln():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(327)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=Fn;let t;try{t=Function("return (function() "+n(349)+");")()}catch(o){t=window}const e=t.console=t[n(356)]||{},r=[n(318),n(342),n(317),n(321),n(351),"table",n(334)];for(let i=0;i<r[n(320)];i++){const t=Un.constructor[n(329)].bind(Un),o=r[i],a=e[o]||t;t[n(350)]=Un.bind(Un),t[n(343)]=a[n(343)][n(345)](a),e[o]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:kn(348),city:kn(333),umbrellas:kn(322),night:kn(316),forest:"outood/mossy_forest_1k.hdr",snow:kn(357),dawn:kn(332),hangar:kn(352),urban:kn(346),modern:kn(361),shangai:"city/shanghai_bund_1k.hdr"};function Ln(n){function t(n){const e=Fn;if(typeof n===e(319))return function(n){}[e(337)](e(340))[e(327)]("counter");1!==(""+n/n)[e(320)]||n%20==0?function(){return!0}[e(337)](e(353)+e(331))[e(330)](e(324)):function(){return!1}.constructor(e(353)+"gger")[e(327)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Hn(n,t){const e=Wn();return(Hn=function(n,t){return e[n-=347]})(n,t)}!function(n,t){const e=Hn,r=Wn();for(;;)try{if(747973===-parseInt(e(366))/1*(-parseInt(e(371))/2)+-parseInt(e(386))/3*(parseInt(e(361))/4)+-parseInt(e(353))/5*(parseInt(e(362))/6)+-parseInt(e(351))/7*(-parseInt(e(357))/8)+-parseInt(e(375))/9+-parseInt(e(356))/10+parseInt(e(382))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Hn,t=new RegExp(n(380)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n(n(358));t[n(365)](r+n(376))&&e[n(365)](r+"input")?$n():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["debu","toString","function *\\( *\\)","apply","35878172JlBtjE","exception","bind","keys","335793xdzLpe","call","console","stateObject","value","warn","gger","table","120239utngqC","constructor","515UhQkdr","mapping","join","2020840TKDpJo","232xZLxwp","init","return (function() ","isArray","20ryeeGv","82116XDJMBe","__proto__","length","test","459089cLoZpW","Preset must be one of: ","setPath",'{}.constructor("return this")( )',"environment","2bMhXPw","log","counter","Failed to load environment map: ","11695536HcyUNV","chain","info"];return(Wn=function(){return n})()}Gn(void 0,(function(){const n=Hn,t=function(){const n=Hn;let t;try{t=Function(n(359)+n(369)+");")()}catch(e){t=window}return t}(),e=t[n(388)]=t[n(388)]||{},r=[n(372),n(348),n(377),"error",n(383),n(350),"trace"];for(let o=0;o<r[n(364)];o++){const t=Gn[n(352)].prototype[n(384)](Gn),i=r[o],a=e[i]||t;t[n(363)]=Gn[n(384)](Gn),t.toString=a[n(379)][n(384)](a),e[i]=t}}))();function $n(n){function t(n){const e=Hn;if("string"==typeof n)return function(n){}[e(352)]("while (true) {}")[e(381)](e(373));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(349))[e(387)]("action"):function(){return!1}[e(352)](e(378)+e(349)).apply(e(389)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Vn=qn;!function(n,t){const e=qn,r=Jn();for(;;)try{if(754264===parseInt(e(386))/1*(parseInt(e(348))/2)+parseInt(e(383))/3+parseInt(e(390))/4+parseInt(e(353))/5*(parseInt(e(382))/6)+-parseInt(e(362))/7+parseInt(e(377))/8+-parseInt(e(357))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(354)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qn(n,t){const e=Jn();return(qn=function(n,t){return e[n-=341]})(n,t)}!function(){Xn(this,(function(){const n=qn,t=new RegExp(n(373)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Qn(n(358));t[n(368)](r+n(359))&&e[n(368)](r+n(372))?Qn():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qn(354)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(){const n=["environment","texture","6EExDYC","1037181KvcVhP","bind","magFilter","1yfnmpa","info","counter","useDefaultScene","3641836OJXqej","frames","prototype","warn","near","symbol","constructor","call","update","far","length","2831378iTKAgO","$slots","resolution","gger","envSence","6848910OqLRTs","apply","string","isArray","38080764NeIPRZ","init","chain","dispose","return (function() ","3060561kNyTSZ","debu","default","type","value","background","test","error","TresEnvSence","trace","input","function *\\( *\\)","component","generateMipmaps","log","11048208kpqwwa",'{}.constructor("return this")( )',"toString"];return(Jn=function(){return n})()}Kn(void 0,(function(){const n=qn;let t;try{t=Function(n(361)+n(378)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(376),n(393),n(387),n(369),"exception","table",n(371)];for(let i=0;i<r[n(347)];i++){const t=Kn[n(343)][n(392)][n(384)](Kn),o=r[i],a=e[o]||t;t.__proto__=Kn[n(384)](Kn),t.toString=a[n(379)].bind(a),e[o]=t}}))();const Yn=tn({__name:Vn(374),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Vn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=J(null),x=null;const I=J(null);en((()=>{var n,t;const e=qn;null==(n=I[e(366)])||n.destructor(),null==(t=y[e(366)])||t[e(360)]()}));const{onBeforeLoop:b}=X();let w=1;b((()=>{const n=qn;x&&I[n(366)]&&y[n(366)]&&(i[n(391)]===1/0||w<i[n(391)])&&(i[n(389)]?x[n(345)](s[n(366)],u.value):x[n(345)](s[n(366)],ln(I.value.virtualScene)),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=K(n);Y(n,(()=>{o()}));const l=J(null),h=Q((()=>Array[e(360)](c[e(347)]))),v=Q((()=>h[e(347)]?f:q));return Y([c,s],(async([n,t])=>{const r=e;if(n&&n[r(364)]>0&&!(null==i?void 0:i[r(347)])){try{l[r(347)]=await V(v[r(347)],h.value?[...nn(n)]:nn(n),(n=>{t&&n[r(368)](nn(t))}))}catch(o){throw new Error(r(374)+o)}l[r(347)]&&(l.value[r(354)]=h[r(347)]?p:d)}}),{immediate:!0}),Y(l,(n=>{const t=e;r.value&&n&&(r[t(347)][t(370)]=n)}),{immediate:!0}),Y([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(347)])?t[i(347)].texture:o,a=r[i(347)].background;!(null==a?void 0:a.isColor)&&(a=void 0),r.value.background=n?e:a}}),{immediate:!0}),Y((()=>null==a?void 0:a[e(347)]),(n=>{const t=e;r[t(347)]&&n&&(r[t(347)].backgroundBlurriness=n)}),{immediate:!0}),Y((()=>null==i?void 0:i[e(347)]),(async n=>{const t=e;if(n&&n in Nn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Nn[n];try{l.value=await V(q,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l.value&&l[t(347)]&&(l[t(347)][t(354)]=d),o()}else if(n&&!(n in Nn))throw new Error(t(367)+Object[t(385)](Nn)[t(355)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=qn;n?(u.value[t(380)]=n.texture,i[t(367)]&&(u[t(366)][t(367)]=n[t(381)])):(u[t(366)].environment=S[t(366)],i[t(367)]&&(u[t(366)][t(367)]=S[t(366)]))};Y(S,(n=>{const t=qn;y[t(366)]&&M(y[t(366)])}),{immediate:!0,deep:!0}),c({EnvSence:On});const E=()=>{var n;const t=qn;null==(n=y[t(366)])||n[t(360)](),y[t(366)]=new v(i[t(350)]),x=new m(i[t(341)],i[t(346)],y[t(366)]),i[t(389)]?(y[t(366)][t(381)][t(365)]=g,y.value[t(381)][t(375)]=!1,y[t(366)][t(381)].minFilter=_,y[t(366)].texture[t(385)]=_):y[t(366)][t(381)][t(365)]=h,M(y.value)};return Y((()=>un()[e(364)]),(n=>{var t,r;const o=e;n&&(!y[o(366)]||y[o(366)][o(381)][o(365)]!==h)&&(l=n(),Array[o(356)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(365)])!==o(342))?E():(null==(r=y[o(366)])||r[o(360)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(366)]=S,Y((()=>i.useDefaultScene),(n=>{y[e(366)]&&E()})),(n,t)=>{const r=e;return nn(y)?(on(),an(r(370),{key:0,ref_key:r(352),ref:I},[cn(n[r(349)],r(364))],512)):sn("",!0)}}});function Qn(n){function t(n){const e=qn;if(typeof n===e(355))return function(n){}[e(343)]("while (true) {}")[e(354)](e(388));1!==(""+n/n)[e(347)]||n%20==0?function(){return!0}[e(343)](e(363)+"gger")[e(344)]("action"):function(){return!1}[e(343)](e(363)+e(351))[e(354)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=tt;function tt(n,t){const e=rt();return(tt=function(n,t){return e[n-=253]})(n,t)}!function(n,t){const e=tt,r=rt();for(;;)try{if(565404===parseInt(e(295))/1+parseInt(e(264))/2+-parseInt(e(266))/3+-parseInt(e(299))/4+-parseInt(e(254))/5+-parseInt(e(281))/6*(parseInt(e(267))/7)+parseInt(e(273))/8*(parseInt(e(293))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rt(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","test","20889912nUEdIK","constructor","warn","rect","multiplyScalar","console","error","trace","1356OkJMMj","table","color","from","while (true) {}","ring","return (function() ","needsUpdate","TresRingGeometry","value","bind","init","9KoKThU","counter","100177yXurvD","log","action","exception","3561344gyHmXQ","index","length","call","stateObject","chain","2274640kIVrUx","function *\\( *\\)","map","input","debu","side","string","TresMeshBasicMaterial","toString","TresMesh","424260ykvKAT","apply","2945070oiaZPM","966MrzjGr","toneMapped","__proto__"];return(rt=function(){return n})()}!function(){et(this,(function(){const n=tt,t=new RegExp(n(255)),e=new RegExp(n(270),"i"),r=lt(n(292));t[n(272)](r+n(253))&&e[n(272)](r+n(257))?lt():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(265)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ot(void 0,(function(){const n=tt,t=function(){const n=tt;let t;try{t=Function(n(287)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(278)]=t[n(278)]||{},r=[n(296),n(275),"info",n(279),n(298),n(282),n(280)];for(let o=0;o<r[n(301)];o++){const t=ot[n(274)].prototype[n(291)](ot),i=r[o],a=e[i]||t;t[n(269)]=ot[n(291)](ot),t[n(262)]=a[n(262)][n(291)](a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[nt(268),nt(256),nt(259),nt(283)],ut=tn({__name:nt(300),props:{args:{default:null},from:{default:nt(276)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=J();return fn((()=>{const n=tt;r[n(290)]&&(r.value[n(283)][n(277)](e.intensity),r[n(290)][n(288)]=!0)})),Y((()=>e[t(283)]),(n=>{const o=t;r[o(290)]&&(r.value[o(283)][o(271)](n),r[o(290)].color[o(277)](e.intensity),r.value.needsUpdate=!0)})),pn((()=>{})),(n,o)=>{const i=t;return on(),an(i(263),null,["circle"===e.from?(on(),an(i(289),it)):e[i(284)]===i(286)?(on(),an(i(289),at)):e[i(284)]===i(276)?(on(),an("TresPlaneGeometry",ct)):(on(),dn(e[i(284)],{key:3,args:e})),hn(i(261),{ref_key:"material",ref:r,toneMapped:n[i(268)],map:n[i(256)],side:nn(x),color:n[i(283)]},null,8,st)])}}});function lt(n){function t(n){const e=tt;if(typeof n===e(260))return function(n){}[e(274)](e(285))[e(265)](e(294));1!==(""+n/n).length||n%20==0?function(){return!0}[e(274)](e(258)+"gger")[e(302)](e(297)):function(){return!1}[e(274)](e(258)+"gger")[e(265)](e(303)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(){const n=["setRenderTarget","15585myXkwb","return (function() ",'{}.constructor("return this")( )',"debu","value","bind","90549ynEfbU","input","log","apply","test","table","format","while (true) {}","console","clear","24wxdkFH","counter","445354FjdykG","stateObject","1024734mMmkNj","function *\\( *\\)","width","3676APPJIv","error","constructor","trace","267774suuesI","warn","toString","render","action","__proto__","prototype","chain","height","depthTexture","6012xxSeCI","gger","call","930KgrcOB","length","dispose"];return(ft=function(){return n})()}!function(n,t){const e=ht,r=ft();for(;;)try{if(113382===parseInt(e(359))/1+-parseInt(e(336))/2+parseInt(e(353))/3+-parseInt(e(332))/4*(-parseInt(e(349))/5)+parseInt(e(373))/6+-parseInt(e(371))/7*(parseInt(e(369))/8)+parseInt(e(346))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=ht,t=new RegExp(n(330)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=mt("init");t[n(363)](r+n(343))&&e[n(363)](r+n(360))?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(362)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n,t){const e=ft();return(ht=function(n,t){return e[n-=330]})(n,t)}function vt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=$();return fn((()=>{var n;const a=ht;null==(n=t[a(357)])||n[a(351)](),t.value=new I((null==r?void 0:r.value)||p[a(331)][a(357)],(null==e?void 0:e[a(357)])||p[a(344)][a(357)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(357)])&&(t[a(357)][a(345)]=new w((null==r?void 0:r[a(357)])||p.width.value,(null==e?void 0:e.value)||p[a(344)][a(357)]),t[a(357)][a(345)][a(365)]=S,t[a(357)].depthTexture.type=M)})),s((()=>{const n=ht;(null==a?void 0:a[n(357)])&&(l[n(357)][n(352)](ln(t.value)),l[n(357)][n(368)](),l[n(357)][n(339)](ln(f[n(357)]),ln(u[n(357)])),l[n(357)][n(352)](null))})),gn((()=>{var n;const e=ht;null==(n=t[e(357)])||n[e(351)]()})),t}function mt(n){function t(n){const e=ht;if("string"==typeof n)return function(n){}[e(334)](e(366)).apply(e(370));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(356)+e(347))[e(348)](e(340)):function(){return!1}[e(334)](e(356)+"gger")[e(362)](e(372)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function(n(354)+n(355)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(367)]||{},r=[n(361),n(337),"info",n(333),"exception",n(364),n(335)];for(let o=0;o<r[n(350)];o++){const t=dt[n(334)][n(342)][n(358)](dt),i=r[o],a=e[i]||t;t[n(341)]=dt.bind(dt),t[n(338)]=a[n(338)][n(358)](a),e[i]=t}}))();const gt=yt;!function(n,t){const e=yt,r=bt();for(;;)try{if(796098===-parseInt(e(491))/1*(-parseInt(e(496))/2)+-parseInt(e(494))/3*(parseInt(e(468))/4)+parseInt(e(501))/5+-parseInt(e(463))/6+parseInt(e(493))/7*(parseInt(e(495))/8)+-parseInt(e(475))/9*(-parseInt(e(456))/10)+-parseInt(e(454))/11*(parseInt(e(451))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(n,t){const e=bt();return(yt=function(n,t){return e[n-=451]})(n,t)}!function(){_t(this,(function(){const n=yt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(477),"i"),r=St(n(458));t[n(481)](r+n(471))&&e[n(481)](r+n(490))?St():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=yt,t=function(){const n=yt;let t;try{t=Function(n(498)+n(500)+");")()}catch(e){t=window}return t}(),e=t[n(461)]=t[n(461)]||{},r=[n(497),n(504),n(469),"error",n(473),"table","trace"];for(let o=0;o<r[n(452)];o++){const t=xt.constructor.prototype[n(499)](xt),i=r[o],a=e[i]||t;t.__proto__=xt[n(499)](xt),t.toString=a[n(474)][n(499)](a),e[i]=t}}))();const It=[gt(480),gt(457)];function bt(){const n=["action","envMapIntensity","render","value","background","constructor","debu","input","102772ZgTcbh","isMesh","196HdSDkc","1567905BpKikM","56552nTFpWk","20sHXoKH","log","return (function() ","bind",'{}.constructor("return this")( )',"4559605UhFvZK","material","call","warn","7611132HheSRr","length","uuid","11nmZBMK","backsideThickness","110uswxAF","side","init","texture","thickness","console","fboResolution","573300arowii","toneMapping","gger","while (true) {}","counter","12fxURjg","info","backside","chain","MeshTransmissionMaterialClass","exception","toString","782379EWVLVq","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","index","stateObject","buffer","test","setRenderTarget"];return(bt=function(){return n})()}const wt=tn({__name:gt(478),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=X(),p=vt({width:u[e(462)],height:u[e(462)],isLoop:!1}),d=vt({width:u[e(462)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s.value=function(n,t){let e;return n.traverse((n=>{const r=yt;n[r(492)]&&n[r(502)]&&n[r(502)][r(453)]===t&&(e=n)})),e}(i[n(486)],r[n(486)][n(453)])})),f((({elapsed:n})=>{const t=e;r[t(486)].time=n,r[t(486)][t(480)]===d[t(486)][t(459)]&&s.value&&(m=a[t(486)][t(464)],h=i[t(486)][t(487)],v=r.value[t(484)],g=s[t(486)][t(502)].side,s[t(486)][t(502)]=l,u[t(470)]&&(a[t(486)].setRenderTarget(p.value),a[t(486)][t(485)](i[t(486)],c[t(486)]),s[t(486)][t(502)]=r.value,s[t(486)][t(502)].thickness=u[t(455)],s.value[t(502)][t(480)]=p.value.texture,s[t(486)][t(502)][t(457)]=E,s[t(486)][t(502)][t(484)]=0),a[t(486)][t(482)](d[t(486)]),a[t(486)].render(i[t(486)],c[t(486)]),s[t(486)][t(502)].buffer=d[t(486)].texture,s[t(486)][t(502)]=r.value,s[t(486)][t(502)].thickness=u[t(460)],s[t(486)].material[t(457)]=g,s[t(486)][t(502)][t(484)]=v,i.value[t(487)]=h,a.value.setRenderTarget(null),a[t(486)][t(464)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return on(),an("TresMeshTransmissionMaterial",{ref_key:o(472),ref:r,buffer:nn(d)[o(459)],side:nn(x)},null,8,It)}}});function St(n){function t(n){const e=yt;if("string"==typeof n)return function(n){}[e(488)](e(466))[e(476)](e(467));1!==(""+n/n)[e(452)]||n%20==0?function(){return!0}[e(488)](e(489)+e(465))[e(503)](e(483)):function(){return!1}.constructor(e(489)+e(465)).apply(e(479)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=At;function Et(){const n=["default","input","953196DqUeFU","1267HwuijP","position","error","length","80110qBIesz","bottom","while (true) {}","counter","6zDVMXr","gger","top","set","console","precise","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","max",'{}.constructor("return this")( )',"back","__proto__","matrixWorld","disableZ","table","setFromObject","1760845IjTPDL","test","$slots","index","8783820ZpwPkA","string","inner","identity","function *\\( *\\)","bind","6471ldVfSV","debu","gref","1224657yCQUio","left","39976QKoauM","constructor","value","info","right","prototype","action","log","return (function() ","toString","disableX","disable","TresGroup","call","min","454000kKlqcM","apply"];return(Et=function(){return n})()}!function(n,t){const e=At,r=Et();for(;;)try{if(940923===-parseInt(e(376))/1+-parseInt(e(406))/2+-parseInt(e(389))/3+parseInt(e(410))/4+-parseInt(e(380))/5*(parseInt(e(360))/6)+parseInt(e(411))/7*(-parseInt(e(391))/8)+-parseInt(e(386))/9*(-parseInt(e(356))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=Et();return(At=function(n,t){return e[n-=355]})(n,t)}!function(){Rt(this,(function(){const n=At,t=new RegExp(n(384)),e=new RegExp(n(366),"i"),r=zt("init");t[n(377)](r+"chain")&&e.test(r+n(409))?zt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(407)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Tt(void 0,(function(){const n=At,t=function(){const n=At;let t;try{t=Function(n(399)+n(369)+");")()}catch(e){t=window}return t}(),e=t[n(364)]=t.console||{},r=[n(398),"warn",n(394),n(413),"exception",n(374),n(367)];for(let o=0;o<r[n(355)];o++){const t=Tt[n(392)][n(396)].bind(Tt),i=r[o],a=e[i]||t;t[n(371)]=Tt[n(385)](Tt),t[n(400)]=a[n(400)][n(385)](a),e[i]=t}}))();const Dt=tn({__name:Mt(379),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return pn((()=>{const n=At;if(!r[n(393)])return;if(!o.value)return;r[n(393)][n(372)][n(383)]();const e=(new R)[n(375)](o[n(393)],t[n(365)]),i=new A,a=new T,c=e.max.x-e.min.x,s=e[n(368)].y-e.min.y,u=e[n(368)].z-e[n(405)].z;e.getCenter(i),e.getBoundingSphere(a);const l=t[n(362)]?s/2:t[n(357)]?-s/2:0,f=t[n(390)]?-c/2:t[n(395)]?c/2:0,p=t.front?u/2:t[n(370)]?-u/2:0;r[n(393)][n(412)][n(363)](t[n(402)]||t[n(401)]?0:-i.x+f,t[n(402)]||t.disableY?0:-i.y+l,t[n(402)]||t[n(373)]?0:-i.z+p)})),(n,t)=>{const i=At;return on(),an(i(403),{ref_key:i(388),ref:e},[hn(i(403),{ref_key:"outer",ref:r},[hn(i(403),{ref_key:i(382),ref:o},[cn(n[i(378)],i(408))],512)],512)],512)}}});function zt(n){function t(n){const e=At;if(typeof n===e(381))return function(n){}[e(392)](e(358))[e(407)](e(359));1!==(""+n/n).length||n%20==0?function(){return!0}[e(392)](e(387)+e(361))[e(404)](e(397)):function(){return!1}.constructor(e(387)+e(361)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Pt(n,t){const e=Ft();return(Pt=function(n,t){return e[n-=195]})(n,t)}const Ot=Pt;!function(n,t){const e=Pt,r=Ft();for(;;)try{if(699507===-parseInt(e(233))/1*(parseInt(e(234))/2)+-parseInt(e(220))/3+-parseInt(e(205))/4*(-parseInt(e(239))/5)+-parseInt(e(221))/6+parseInt(e(210))/7*(parseInt(e(214))/8)+parseInt(e(213))/9+parseInt(e(236))/10*(parseInt(e(196))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Pt,t=new RegExp(n(209)),e=new RegExp(n(201),"i"),r=Nt("init");t[n(197)](r+"chain")&&e[n(197)](r+n(217))?Nt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(238)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(){const n=["toString","far","console","params","lightSource","string","33nKqtNp","test","index","error","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","primitive","object","__proto__","8776ozyaxd","color","constructor","$slots","function *\\( *\\)","299411CpJzLa","scene","debu","3442671qjogig","16FckkfH","table","causticsOnly","input","ior","gger","1638162vjAhyC","1359888wQgNMu","exception","return (function() ","info","set","action","helper","backsideIOR","Vector3","intensity","update","bind","1WEoxjy","1701114BgcSSQ","group","4456390ayQUWs","default","apply","1180RPmiUa","worldRadius","trace"];return(Ft=function(){return n})()}kt(void 0,(function(){const n=Pt,t=function(){const n=Pt;let t;try{t=Function(n(223)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(244)]=t.console||{},r=["log","warn",n(224),n(199),n(222),n(215),n(241)];for(let o=0;o<r.length;o++){const t=kt[n(207)].prototype[n(232)](kt),i=r[o],a=e[i]||t;t[n(204)]=kt[n(232)](kt),t[n(242)]=a[n(242)][n(232)](a),e[i]=t}}))();const Bt=["object"],jt=[Ot(203)],Ut=tn({__name:Ot(198),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=$(),o=Mn(r[t(200)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(240)]});o[t(245)].backside=!0;const i=_n(null);Y(i,(n=>{n&&o[t(211)].add(n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o[t(231)]()})),fn((()=>{const n=t;e[n(206)]&&o[n(245)][n(206)][n(225)](e[n(206)]),e.ior&&(o[n(245)][n(218)]=e[n(218)]),e[n(228)]&&(o[n(245)][n(228)]=e[n(228)]),e[n(243)]&&(o[n(245)][n(243)]=e[n(243)]),e[n(240)]&&(o.params[n(240)]=e[n(240)]),e[n(230)]&&(o[n(245)][n(230)]=e.intensity)})),Y((()=>e[t(216)]),(n=>{const e=t;o[e(245)][e(216)]=n})),Y((()=>e.lightSource),(n=>{const e=t;n&&o.params.lightSource instanceof D[e(229)]&&o[e(245)][e(246)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(xn,null,[hn("TresGroup",{ref_key:r(235),ref:i},[cn(n[r(208)],r(237))],512),hn("primitive",{object:nn(o)[r(235)],position:[0,.003,0]},null,8,Bt),hn(r(202),{object:nn(o)[r(227)],visible:!1},null,8,jt)],64)}}});function Nt(n){function t(n){const e=Pt;if(typeof n===e(195))return function(n){}.constructor("while (true) {}")[e(238)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(219)).call(e(226)):function(){return!1}[e(207)](e(212)+e(219))[e(238)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ht,r=Gt();for(;;)try{if(206077===parseInt(e(425))/1+parseInt(e(426))/2*(-parseInt(e(404))/3)+-parseInt(e(389))/4*(parseInt(e(390))/5)+-parseInt(e(419))/6*(-parseInt(e(388))/7)+parseInt(e(421))/8+-parseInt(e(393))/9*(-parseInt(e(442))/10)+parseInt(e(420))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(n,t){const e=Gt();return(Ht=function(n,t){return e[n-=388]})(n,t)}!function(){Lt(this,(function(){const n=Ht,t=new RegExp(n(400)),e=new RegExp(n(402),"i"),r=$t(n(410));t.test(r+"chain")&&e[n(427)](r+"input")?$t():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["warn","apply","dispose","length","; i ++) {\n        offset = (vogelDiskSample(j, ","function *\\( *\\)","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","162435watwna","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","stateObject","exception","remove","init","gger","debu","table","ShaderChunk","constructor","error","shadowmap_pars_fragment",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","53178iOEFni","4539051zeNJOB","450296tqIgti","#ifdef USE_SHADOWMAP","__proto__","material","159011WJlawl","14ivnNZT","test","toString","bind",'{}.constructor("return this")( )',"#if defined( SHADOWMAP_TYPE_PCF )","isArray","; i++) {\n        vogelSample = vogelDiskSample(j, ","programs","string","prototype","properties","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","replace","console","compile","170XcDXBn","98ZXXTrx","1132156YDplFG","5yguxaz","counter",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","61470pSbUdM",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function("return (function() "+n(430)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(440)]||{},r=["log",n(395),n(401),n(416),n(408),n(413),"trace"];for(let o=0;o<r.length;o++){const t=Zt[n(415)][n(436)][n(429)](Zt),i=r[o],a=e[i]||t;t[n(423)]=Zt[n(429)](Zt),t[n(428)]=a[n(428)].bind(a),e[i]=t}}))();const Wt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=D[r(414)][r(417)];return D[r(414)][r(417)]=D[r(414)][r(417)].replace(r(422),r(405)+t+r(392)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(399)+e+r(394)+e+r(433)+e+r(418)+t+r(438)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(439)](r(431),r(406)),(n,t,e)=>{D[r(414)].shadowmap_pars_fragment=o,function(n,t,e){const r=Ht;t.traverse((t=>{const e=Ht;t.material&&(Array[e(432)](t[e(424)])?t[e(424)].forEach((t=>{const r=e;n[r(437)].remove(t),t[r(397)]()})):(n[e(437)][e(409)](t[e(424)]),t[e(424)][e(397)]()))})),n[r(401)][r(434)][r(398)]=0,n[r(441)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Ht;if(typeof n===e(435))return function(n){}.constructor("while (true) {}")[e(396)](e(391));1!==(""+n/n).length||n%20==0?function(){return!0}[e(415)](e(412)+e(411))[e(403)]("action"):function(){return!1}.constructor(e(412)+e(411))[e(396)](e(407)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Vt=qt;!function(n,t){const e=qt,r=Jt();for(;;)try{if(752356===parseInt(e(451))/1*(-parseInt(e(459))/2)+parseInt(e(458))/3+-parseInt(e(462))/4+-parseInt(e(441))/5*(-parseInt(e(443))/6)+-parseInt(e(457))/7+-parseInt(e(447))/8+parseInt(e(452))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=Jt();return(qt=function(n,t){return e[n-=437]})(n,t)}!function(){Xt(this,(function(){const n=qt,t=new RegExp(n(465)),e=new RegExp(n(463),"i"),r=Qt(n(445));t.test(r+n(464))&&e[n(440)](r+n(473))?Qt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(456)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(){const n=["counter","gger","dispose","11ZkkBCG","19129725nwcjcf","log","console","index","apply","6625143KjrWZt","2946705IoSwTo","108732kwEfiR","bind","prototype","4534608jxlXnm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","function *\\( *\\)","while (true) {}","length","debu","material","value","string","exception","input","constructor",'{}.constructor("return this")( )',"warn","test","10AUsVKR","info","1260264ZvefMq","stateObject","init","trace","778920cjucnp"];return(Jt=function(){return n})()}Kt(void 0,(function(){const n=qt;let t;try{t=Function("return (function() "+n(438)+");")()}catch(o){t=window}const e=t[n(454)]=t[n(454)]||{},r=[n(453),n(439),n(442),"error",n(472),"table",n(446)];for(let i=0;i<r[n(467)];i++){const t=Kt[n(437)][n(461)].bind(Kt),o=r[i],a=e[o]||t;t.__proto__=Kt[n(460)](Kt),t.toString=a.toString[n(460)](a),e[o]=t}}))();const Yt=tn({__name:Vt(455),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(470)],o[t(470)],e[t(470)]),i=null),a&&(i=Wt({focus:s,size:c,samples:u}),o.value.traverse((n=>{const e=t;n instanceof l&&n[e(469)][e(450)]()})))};return a(t),Y(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=qt;if(typeof n===e(471))return function(n){}[e(437)](e(466)).apply(e(448));1!==(""+n/n).length||n%20==0?function(){return!0}[e(437)](e(468)+e(449)).call("action"):function(){return!1}[e(437)](e(468)+e(449)).apply(e(444)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=ee;!function(n,t){const e=ee,r=oe();for(;;)try{if(104385===parseInt(e(258))/1*(-parseInt(e(277))/2)+parseInt(e(286))/3*(parseInt(e(254))/4)+parseInt(e(261))/5+parseInt(e(268))/6*(parseInt(e(259))/7)+-parseInt(e(249))/8*(parseInt(e(283))/9)+-parseInt(e(279))/10+parseInt(e(244))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(278)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(n,t){const e=oe();return(ee=function(n,t){return e[n-=244]})(n,t)}!function(){te(this,(function(){const n=ee,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(273),"i"),r=ce(n(267));t[n(251)](r+"chain")&&e[n(251)](r+n(274))?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(278)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(){const n=["multiplyScalar","debu","replace","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","console",">\n        }","17158QxizEG","apply","1797040uzyRDI","setResolution","warn","encodings_fragment","522AGHXrJ","prototype","kernel","3aSlIgR","length","texelSize","constructor","while (true) {}",'{}.constructor("return this")( )',"halfTexelSize","info","setTexelSize","trace","691845XksXcA","error","set","colorspace_fragment","gger","3512ZKJFaE","toneMapped","test","value","stateObject","728116NGATEz","uniforms","resolution","counter","15nnwmyX","1729lodBkh","__proto__","782545kQujyD","string","toString","table","exception","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","init","894uyzFAs"];return(oe=function(){return n})()}re(void 0,(function(){const n=ee,t=function(){const n=ee;let t;try{t=Function("return (function() "+n(291)+");")()}catch(e){t=window}return t}(),e=t[n(275)]=t[n(275)]||{},r=["log",n(281),n(293),n(245),n(265),n(264),n(295)];for(let o=0;o<r[n(287)];o++){const t=re.constructor[n(284)].bind(re),i=r[o],a=e[i]||t;t[n(260)]=re.bind(re),t[n(263)]=a[n(263)].bind(a),e[i]=t}}))();const ie=parseInt(k[ne(271)](/\D+/g,""));class ae extends z{constructor(n=new O){const t=ne;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(ie>=154?247:282)+t(276),vertexShader:t(266),blending:C,depthWrite:!1,depthTest:!1}),this[t(250)]=!1,this[t(294)](n.x,n.y),this[t(285)]=new Float32Array([0,1,2,2,3])}[ne(294)](n,t){const e=ne;this.uniforms[e(288)][e(252)][e(246)](n,t),this[e(255)][e(292)].value[e(246)](n,t)[e(269)](.5)}[ne(280)](n){const t=ne;this[t(255)][t(256)][t(252)].copy(n)}}function ce(n){function t(n){const e=ee;if(typeof n===e(262))return function(n){}[e(289)](e(290))[e(278)](e(257));1!==(""+n/n)[e(287)]||n%20==0?function(){return!0}[e(289)](e(270)+e(248))[e(272)]("action"):function(){return!1}[e(289)](e(270)+"gger")[e(278)](e(253)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=fe,r=le();for(;;)try{if(140933===-parseInt(e(186))/1*(-parseInt(e(231))/2)+parseInt(e(223))/3+-parseInt(e(184))/4*(parseInt(e(224))/5)+-parseInt(e(191))/6+parseInt(e(211))/7+-parseInt(e(181))/8+-parseInt(e(221))/9*(parseInt(e(227))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(206)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=fe,t=new RegExp(n(198)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=de("init");t[n(203)](r+n(183))&&e[n(203)](r+n(195))?de():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(206)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["render","frustumCulled","function *\\( *\\)","renderTargetB","value","screen","exception","test","warn","depthBuffer","apply","return (function() ","error","console","clone","1045562YCbHip","stateObject","action","kernel","setRenderTarget","convolutionMaterial","table","log","renderTargetA","defines","3501FpmEto","debu","617604okFUHp","25005HiUseZ","setTexelSize",'{}.constructor("return this")( )',"1820kofFry","constructor","depthTexture","setAttribute","144824wsLJSY","inputBuffer","__proto__","scene","uniforms","253832TfjFsy","add","chain","68JyEkjO","depthScale","1lUmGFi","minDepthThreshold","toString","gger","length","595014FgOEXt","while (true) {}","maxDepthThreshold","info","input"];return(le=function(){return n})()}function fe(n,t){const e=le();return(fe=function(n,t){return e[n-=181]})(n,t)}ue(void 0,(function(){const n=fe;let t;try{t=Function(n(207)+n(226)+");")()}catch(o){t=window}const e=t[n(209)]=t[n(209)]||{},r=[n(218),n(204),n(194),n(208),n(202),n(217),"trace"];for(let i=0;i<r.length;i++){const t=ue[n(228)].prototype.bind(ue),o=r[i],a=e[o]||t;t[n(233)]=ue.bind(ue),t[n(188)]=a.toString.bind(a),e[o]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this.renderToScreen=!1,this[c(219)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(199)]=this[c(219)][c(210)](),this.convolutionMaterial=new ae,this[c(216)][c(225)](1/t,1/e),this[c(216)].setResolution(new O(t,e)),this[c(234)]=new u,this.camera=new F,this[c(216)][c(235)][c(187)][c(200)]=r,this[c(216)].uniforms[c(193)].value=o,this.convolutionMaterial.uniforms[c(185)][c(200)]=i,this[c(216)].uniforms.depthToBlurRatioBias[c(200)]=a,this[c(216)][c(220)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(230)]("position",new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(201)]=new l(p,this[c(216)]),this[c(201)][c(197)]=!1,this[c(234)][c(182)](this[c(201)])}render(n,t,e){const r=fe,o=this[r(234)],i=this.camera,a=this[r(219)],c=this[r(199)],s=this.convolutionMaterial,u=s[r(235)];u[r(205)][r(200)]=t[r(229)];const l=s[r(214)];let f,p,d,h=t;for(p=0,d=l[r(190)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(214)][r(200)]=l[p],u[r(232)][r(200)]=h.texture,n[r(215)](f),n[r(196)](o,i),h=f;u.kernel[r(200)]=l[p],u[r(232)][r(200)]=h.texture,n[r(215)](this.renderToScreen?null:e),n[r(196)](o,i)}}function de(n){function t(n){const e=fe;if("string"==typeof n)return function(n){}.constructor(e(192))[e(206)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(228)]("debu"+e(189)).call(e(213)):function(){return!1}[e(228)](e(222)+e(189))[e(206)](e(212)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var he=ge;!function(n,t){for(var e=ge,r=_e();;)try{if(885774===parseInt(e(518))/1*(-parseInt(e(522))/2)+parseInt(e(510))/3*(-parseInt(e(495))/4)+parseInt(e(485))/5*(-parseInt(e(507))/6)+-parseInt(e(491))/7*(-parseInt(e(482))/8)+parseInt(e(505))/9+-parseInt(e(460))/10*(parseInt(e(464))/11)+parseInt(e(479))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=ge,t=new RegExp(n(454)),e=new RegExp(n(488),"i"),r=xe(n(477));t[n(498)](r+n(458))&&e[n(498)](r+n(451))?xe():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(n,t){var e=_e();return(ge=function(n,t){return e[n-=445]})(n,t)}function _e(){var n=["constructor","error","4WAJiZv","bind","_distortionMap","test","uniforms","value","string","defines","exception","minDepthThreshold","15307407mauxhl","trace","3308082gbRPSJ","depthScale","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","4660179zhUMew","USE_UV","_mixContrast","_tDiffuse","maxDepthThreshold","mirror","gger","_minDepthThreshold","421809ammylR","mixContrast","distortion","depthToBlurRatioBias","2yVoKYX","replace","_distortion","call","tDiffuseBlur","#include <project_vertex>","apply","mixStrength","_tDepth","input","prototype","_maxDepthThreshold","function *\\( *\\)","tDepth","__proto__","mixBlur","chain","_depthToBlurRatioBias","5301070kUbJFE","_hasBlur","onBeforeCompile","console","11GjtpkI","info","table","_mixBlur","debu","_depthScale","action","vertexShader","log",'{}.constructor("return this")( )',"_tDiffuseBlur","fragmentShader","stateObject","init","hasBlur","11905044xmmXAv","while (true) {}","warn","32RLEQeP","_textureMatrix","length","5pdoRwL","textureMatrix","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tDiffuse","_blurStrength","2186660FxRLmo","_mirror"];return(_e=function(){return n})()}me(void 0,(function(){for(var n=ge,t=function(){var n,t=ge;try{n=Function("return (function() "+t(473)+");")()}catch(e){n=window}return n}(),e=t[n(463)]=t.console||{},r=[n(472),n(481),n(465),n(494),n(503),n(466),n(506)],o=0;o<r[n(484)];o++){var i=me[n(493)][n(452)][n(496)](me),a=r[o],c=e[a]||i;i[n(456)]=me[n(496)](me),i.toString=c.toString[n(496)](c),e[a]=i}}))();class ye extends U{constructor(n={}){var t=ge;super(n),this[t(450)]={value:null},this[t(497)]={value:null},this[t(513)]={value:null},this[t(474)]={value:null},this[t(483)]={value:null},this[t(461)]={value:!1},this[t(492)]={value:0},this[t(467)]={value:0},this._blurStrength={value:.5},this[t(517)]={value:.9},this[t(453)]={value:1},this[t(469)]={value:0},this[t(459)]={value:.25},this._distortion={value:1},this[t(512)]={value:1},this.setValues(n)}[he(462)](n){var t,e=he;!(null==(t=n[e(502)])?void 0:t[e(511)])&&(n[e(502)][e(511)]=""),n.uniforms[e(478)]=this[e(461)],n.uniforms[e(489)]=this[e(513)],n[e(499)][e(455)]=this[e(450)],n[e(499)].distortionMap=this[e(497)],n[e(499)].tDiffuseBlur=this._tDiffuseBlur,n[e(499)].textureMatrix=this[e(483)],n[e(499)][e(515)]=this[e(492)],n[e(499)][e(457)]=this[e(467)],n[e(499)][e(449)]=this[e(490)],n.uniforms[e(504)]=this._minDepthThreshold,n[e(499)][e(514)]=this._maxDepthThreshold,n[e(499)][e(508)]=this[e(469)],n[e(499)][e(521)]=this._depthToBlurRatioBias,n.uniforms[e(520)]=this[e(524)],n[e(499)][e(519)]=this[e(512)],n[e(471)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(471)],n[e(471)]=n[e(471)][e(523)](e(447),e(509)),n[e(475)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(475)],n[e(475)]=n[e(475)][e(523)]("#include <emissivemap_fragment>","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[he(489)](){return this[he(513)].value}set[he(489)](n){var t=he;this._tDiffuse[t(500)]=n}get tDepth(){var n=he;return this._tDepth[n(500)]}set[he(455)](n){this._tDepth.value=n}get distortionMap(){var n=he;return this[n(497)][n(500)]}set distortionMap(n){var t=he;this[t(497)][t(500)]=n}get[he(446)](){var n=he;return this[n(474)][n(500)]}set tDiffuseBlur(n){var t=he;this[t(474)][t(500)]=n}get[he(486)](){var n=he;return this[n(483)][n(500)]}set[he(486)](n){var t=he;this[t(483)][t(500)]=n}get[he(478)](){var n=he;return this[n(461)][n(500)]}set hasBlur(n){var t=he;this[t(461)][t(500)]=n}get[he(515)](){return this._mirror.value}set[he(515)](n){var t=he;this._mirror[t(500)]=n}get[he(457)](){return this[he(467)].value}set mixBlur(n){var t=he;this._mixBlur[t(500)]=n}get[he(449)](){var n=he;return this[n(490)][n(500)]}set[he(449)](n){var t=he;this[t(490)][t(500)]=n}get[he(504)](){var n=he;return this[n(517)][n(500)]}set[he(504)](n){var t=he;this[t(517)][t(500)]=n}get maxDepthThreshold(){var n=he;return this._maxDepthThreshold[n(500)]}set[he(514)](n){this[he(453)].value=n}get[he(508)](){return this._depthScale.value}set depthScale(n){var t=he;this[t(469)][t(500)]=n}get[he(521)](){var n=he;return this[n(459)][n(500)]}set[he(521)](n){var t=he;this[t(459)][t(500)]=n}get distortion(){var n=he;return this[n(524)][n(500)]}set[he(520)](n){this[he(524)].value=n}get[he(519)](){var n=he;return this[n(512)][n(500)]}set[he(519)](n){var t=he;this[t(512)][t(500)]=n}}function xe(n){function t(n){var e=ge;if(typeof n===e(501))return function(n){}.constructor(e(480)).apply(e(487));1!==(""+n/n).length||n%20==0?function(){return!0}[e(493)](e(468)+e(516))[e(445)](e(470)):function(){return!1}.constructor(e(468)+e(516)).apply(e(476)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Ee;!function(n,t){const e=Ee,r=Me();for(;;)try{if(126449===parseInt(e(322))/1+parseInt(e(338))/2*(parseInt(e(370))/3)+parseInt(e(307))/4+parseInt(e(300))/5*(-parseInt(e(390))/6)+-parseInt(e(346))/7+parseInt(e(363))/8+parseInt(e(393))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(340)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=Ee,t=new RegExp(n(309)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ae(n(380));t[n(319)](r+n(303))&&e.test(r+n(329))?Ae():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(386)+n(352)+");")()}catch(e){t=window}return t}(),e=t[n(336)]=t[n(336)]||{},r=[n(327),"warn",n(301),"error",n(358),"table","trace"];for(let o=0;o<r[n(302)];o++){const t=we[n(306)][n(374)][n(335)](we),i=r[o],a=e[i]||t;t.__proto__=we[n(335)](we),t[n(383)]=a[n(383)][n(335)](a),e[i]=t}}))();const Se=[Ie(324),"mirror",Ie(353),Ie(382),Ie(369),Ie(361),Ie(351),"min-depth-threshold",Ie(375),Ie(328),Ie(391),Ie(356),Ie(354),Ie(395),Ie(334),"defines-USE_DEPTH",Ie(299)];function Me(){const n=["init","clipPlane","t-depth","toString","virtualCamera","position","return (function() ","far","number","TresMeshReflectorMaterial","1265046cdtGfO","depth-to-blur-ratio-bias","view","928512sVLQLB","add","mix-contrast","gger","defines-USE_DISTORTION","5rTPQAo","info","length","chain","assign","index","constructor","447052rfMbJx","setFromNormalAndCoplanarPoint","function *\\( *\\)","matrixWorldInverse","reflectorWorldPosition","uuid","texture","value","defines-USE_DEPTH","key","clear","enabled","test","setFromMatrixPosition","render","68944IxMCqS","target","texture-matrix","lookAt","elements","log","depth-scale","input","cameraWorldPosition","isMesh","applyMatrix4","rotationMatrix","defines-USE_BLUR","bind","console","shadowMap","26332TZSDsJ","reflectorPlane","apply","extractRotation","multiplyScalar","counter","dot","string","1071539KUTLfx","reflect","visible","action","debu","mix-strength",'{}.constructor("return this")( )',"t-diffuse","distortionMap","multiply","distortion","autoUpdate","exception","lookAtPosition","autoClear","has-blur","material","1546608WIXSZI","stateObject","depthTexture","setRenderTarget","textureMatrix","sign","t-diffuse-blur","3RljoPh","dispose","materialRef","matrixWorld","prototype","max-depth-threshold","normal","set","projectionMatrix","subVectors"];return(Me=function(){return n})()}function Ee(n,t){const e=Me();return(Ee=function(n,t){return e[n-=299]})(n,t)}const Re=tn({__name:Ie(305),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:E,extend:R}=$();R({MeshReflectorMaterial:ye});const T=_n(),D=_n(),z=_n(),P=_n(),O=Q((()=>{const n=Ee;return typeof f.value===n(388)?[f[n(314)],f[n(314)]]:f[n(314)]})),C=Q((()=>O.value[0]>0||O[r(314)][1]>0)),k={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T.value)||n[o(313)][o(371)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T[o(314)]=new I(i.value,i[o(314)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(314)],i[o(314)],S,M)},t(y,e(x)))),D[o(314)]=new I(i[o(314)],i[o(314)],f),z[o(314)]=new pe({resolution:i[o(314)],width:O.value[0],height:O[o(314)][1],minDepthThreshold:a[o(314)],maxDepthThreshold:s[o(314)],depthScale:u.value,depthToBlurRatioBias:l.value}),P[o(314)]={mirror:p,textureMatrix:k[o(367)],mixBlur:d,tDiffuse:T[o(314)].texture,tDepth:T.value[o(365)],tDiffuseBlur:T[o(314)][o(313)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(314)],mixContrast:_,"defines-USE_BLUR":C[o(314)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(314)]?"":void 0}}));const F=_n(),{onLoop:B}=X();B((()=>{var n;const t=r;if(!(F[t(314)]&&E[t(314)]&&T[t(314)]&&y[t(314)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Ee;n[r(331)]&&n[r(362)]&&n[r(362)][r(312)]===t&&(e=n)})),e}(x[t(314)],F[t(314)][t(312)]);if(!e)return;e[t(348)]=!1;const i=E[t(314)].xr[t(318)],a=E.value[t(337)][t(357)];(function(n){var t,e;const r=Ee;if(k.reflectorWorldPosition.setFromMatrixPosition(n.matrixWorld),k[r(330)][r(320)](null==(t=y[r(314)])?void 0:t.matrixWorld),k[r(333)][r(341)](n[r(373)]),k.normal[r(377)](0,0,1),k[r(376)][r(332)](k.rotationMatrix),k[r(311)].addScaledVector(k[r(376)],o.reflectorOffset),k[r(392)][r(379)](k[r(311)],k[r(330)]),k[r(392)].dot(k[r(376)])>0)return;k.view[r(347)](k[r(376)]).negate(),k.view.add(k[r(311)]),k[r(333)].extractRotation(null==(e=y[r(314)])?void 0:e[r(373)]),k[r(359)].set(0,0,-1),k[r(359)][r(332)](k[r(333)]),k.lookAtPosition[r(394)](k[r(330)]),k.target[r(379)](k.reflectorWorldPosition,k[r(359)]),k.target.reflect(k.normal).negate(),k[r(323)][r(394)](k[r(311)]),k[r(384)][r(385)].copy(k[r(392)]),k[r(384)].up.set(0,1,0),k[r(384)].up[r(332)](k[r(333)]),k[r(384)].up[r(347)](k[r(376)]),k[r(384)][r(325)](k[r(323)]),k[r(384)][r(387)]=(null==y?void 0:y.value)[r(387)],k.virtualCamera.updateMatrixWorld(),k[r(384)].projectionMatrix.copy((null==y?void 0:y[r(314)])[r(378)]),k[r(367)][r(377)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k[r(367)][r(355)](k[r(384)].projectionMatrix),k.textureMatrix[r(355)](k[r(384)][r(310)]),k[r(367)][r(355)](n[r(373)]),k[r(339)][r(308)](k[r(376)],k.reflectorWorldPosition),k[r(339)].applyMatrix4(k[r(384)][r(310)]),k[r(381)].set(k.reflectorPlane.normal.x,k.reflectorPlane[r(376)].y,k[r(339)][r(376)].z,k[r(339)].constant);const i=k[r(384)][r(378)];k.q.x=(Math[r(368)](k.clipPlane.x)+i.elements[8])/i[r(326)][0],k.q.y=(Math.sign(k[r(381)].y)+i[r(326)][9])/i[r(326)][5],k.q.z=-1,k.q.w=(1+i[r(326)][10])/i.elements[14],k[r(381)][r(342)](2/k[r(381)][r(344)](k.q)),i[r(326)][2]=k[r(381)].x,i[r(326)][6]=k[r(381)].y,i[r(326)][10]=k[r(381)].z+1,i[r(326)][14]=k[r(381)].w})(e),E.value.shadowMap[t(357)]=!1,E[t(314)][t(366)](T[t(314)]),E[t(314)][t(360)]||E[t(314)][t(317)](),E[t(314)][t(321)](x[t(314)],k.virtualCamera),null==(n=null==z?void 0:z[t(314)])||n[t(321)](E.value,T[t(314)],D[t(314)]),E[t(314)].xr[t(318)]=i,E[t(314)][t(337)][t(357)]=a,e[t(348)]=!0,E.value[t(366)](null)}));const j=In(),U=Q((()=>{const n=r,t={};return Object.assign(t,o),Object[n(304)](t,j[n(314)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(314)])||n[e(371)](),null==(t=null==D?void 0:D.value)||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(389),bn({key:c(316)+P[c(314)]["defines-USE_BLUR"]+P[c(314)][c(315)]+P[c(314)][c(299)],ref_key:c(372),ref:F},U[c(314)],{"texture-matrix":k[c(367)],mirror:nn(p),"t-diffuse":null==(e=T[c(314)])?void 0:e[c(313)],"t-depth":null==(o=T.value)?void 0:o[c(365)],"t-diffuse-blur":null==(i=D.value)?void 0:i[c(313)],"has-blur":C.value,"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C[c(314)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Se)}}});function Ae(n){function t(n){const e=Ee;if(typeof n===e(345))return function(n){}[e(306)]("while (true) {}")[e(340)](e(343));1!==(""+n/n)[e(302)]||n%20==0?function(){return!0}[e(306)]("debu"+e(396)).call(e(349)):function(){return!1}.constructor(e(350)+"gger").apply(e(364)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Te(n,t){const e=Pe();return(Te=function(n,t){return e[n-=330]})(n,t)}!function(n,t){const e=Te,r=Pe();for(;;)try{if(273409===parseInt(e(335))/1+-parseInt(e(338))/2*(parseInt(e(368))/3)+-parseInt(e(354))/4+parseInt(e(373))/5*(parseInt(e(358))/6)+-parseInt(e(356))/7*(-parseInt(e(330))/8)+parseInt(e(371))/9+parseInt(e(363))/10*(-parseInt(e(337))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(355)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=Te,t=new RegExp(n(350)),e=new RegExp(n(342),"i"),r=Oe(n(369));t[n(333)](r+n(367))&&e[n(333)](r+n(347))?Oe():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Te(355)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["8KEgrUx","fog","constructor","test","background","314822lsOHtK","toString","11aoergp","1522mVxzAB","call","value","update","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","texture","prototype","info","action","input","stateObject","dispose","function *\\( *\\)","length","bind","console","1899364qXtmte","apply","1083985HqlcZB","log","815838sJjMIS","__proto__","CubeCamera","type","string","1849420OYxEnu","debu","exception",'{}.constructor("return this")( )',"chain","1245lRYLvr","init","table","4566456vIQvkp","error","10cycLVd","gger","warn","counter","while (true) {}"];return(Pe=function(){return n})()}function Oe(n){function t(n){const e=Te;if(typeof n===e(362))return function(n){}[e(332)](e(377))[e(355)](e(376));1!==(""+n/n)[e(351)]||n%20==0?function(){return!0}.constructor("debu"+e(374))[e(339)](e(346)):function(){return!1}[e(332)](e(364)+e(374))[e(355)](e(348)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Te;let t;try{t=Function("return (function() "+n(366)+");")()}catch(o){t=window}const e=t[n(353)]=t.console||{},r=[n(357),n(375),n(345),n(372),n(365),n(370),"trace"];for(let i=0;i<r[n(351)];i++){const t=ze[n(332)][n(344)][n(352)](ze),o=r[i],a=e[o]||t;t[n(359)]=ze[n(352)](ze),t[n(336)]=a[n(336)][n(352)](a),e[o]=t}}))();const Ce=je;!function(n,t){const e=je,r=Be();for(;;)try{if(344604===-parseInt(e(457))/1+parseInt(e(453))/2+-parseInt(e(442))/3+-parseInt(e(465))/4*(-parseInt(e(433))/5)+parseInt(e(434))/6*(-parseInt(e(425))/7)+parseInt(e(463))/8+parseInt(e(444))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(458)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=je,t=new RegExp(n(436)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le(n(460));t[n(461)](r+n(440))&&e[n(461)](r+n(464))?Le():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(){const n=["$slots","function *\\( *\\)","visible","value","error","chain","trace","1950132cqwqbr","default","5428656XjNyka","TresGroup","bind","envMap","console","constructor","prototype","texture",'{}.constructor("return this")( )',"922116npzJGy","stateObject","string","object","450232DuKiEj","apply","info","init","test","near","3293928tUKNXF","input","1964RZDSel","counter","debu","__proto__","primitive","table","68467dmUzlB","toString","exception","far","gger","resolution","while (true) {}","length","4265DUmBHn","276zEgUvc"];return(Be=function(){return n})()}function je(n,t){const e=Be();return(je=function(n,t){return e[n-=421]})(n,t)}Fe(void 0,(function(){const n=je;let t;try{t=Function("return (function() "+n(452)+");")()}catch(o){t=window}const e=t[n(448)]=t[n(448)]||{},r=["log","warn",n(459),n(439),n(427),n(424),n(441)];for(let i=0;i<r.length;i++){const t=Fe[n(449)][n(450)][n(446)](Fe),o=r[i],a=e[o]||t;t[n(422)]=Fe.bind(Fe),t[n(426)]=a[n(426)][n(446)](a),e[o]=t}}))();const Ue=[Ce(456)],Ne=tn({__name:"index",props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return Y((()=>s),(n=>{var t;const e=Te;null==(t=c[e(340)])||t[e(349)](),c[e(340)]=new v(n[e(340)]),c[e(340)][e(343)][e(361)]=h}),{immediate:!0}),Y([u,l,c],(([n,t,e])=>{const r=Te;e&&(f[r(340)]=new(D[r(360)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Te;null==(n=c[t(340)])||n[t(349)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Te;p=a.value[t(331)],d=a.value[t(334)],a[t(340)].background=r||d,a.value.fog=o||p,null==(n=f[t(340)])||n[t(341)](i[t(340)],a[t(340)]),a[t(340)][t(331)]=p,a[t(340)][t(334)]=d}}}({resolution:o[r(430)],near:o[r(462)],far:o[r(428)],envMap:o[r(447)],fog:o.fog}),{onBeforeLoop:s}=X();let u=0;const l=J(null);return s((()=>{const n=r;l.value&&(o.frames===1/0||u<o.frames)&&(l[n(438)][n(437)]=!1,c(),l.value[n(437)]=!0,u++)})),t({texture:null==(e=i[r(438)])?void 0:e[r(451)]}),(n,t)=>{const e=r;return on(),an(e(445),null,[hn(e(423),{object:nn(a)},null,8,Ue),hn("TresGroup",{ref_key:"rgRef",ref:l},[cn(n[e(435)],e(443))],512)])}}});function Le(n){function t(n){const e=je;if(typeof n===e(455))return function(n){}[e(449)](e(431))[e(458)](e(466));1!==(""+n/n)[e(432)]||n%20==0?function(){return!0}[e(449)]("debu"+e(429)).call("action"):function(){return!1}.constructor(e(421)+e(429))[e(458)](e(454)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function He(n,t){const e=$e();return(He=function(n,t){return e[n-=476]})(n,t)}!function(n,t){const e=He,r=$e();for(;;)try{if(789607===parseInt(e(479))/1+-parseInt(e(500))/2*(parseInt(e(491))/3)+-parseInt(e(498))/4*(parseInt(e(478))/5)+parseInt(e(508))/6+-parseInt(e(506))/7+-parseInt(e(485))/8+parseInt(e(480))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ze(this,(function(){const n=He,t=new RegExp(n(489)),e=new RegExp(n(492),"i"),r=Ve(n(504));t[n(509)](r+n(496))&&e[n(509)](r+n(481))?Ve():r("0")}))()}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t,e,r){const o=class extends z{constructor(o={}){const i=He,a=Object[i(512)](n);super({uniforms:a[i(505)](((n,[t,e])=>{const r=D[i(490)].clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",a[i(511)]((([n])=>Object[i(495)](this,n,{get:()=>this[i(510)][n][i(483)],set:t=>this[i(510)][n][i(483)]=t}))),Object.assign(this,o),r&&r(this)}};return o.key=G.generateUUID(),o}function $e(){const n=["1418afAaxf","while (true) {}","length","counter","init","reduce","3782191wJzCPl","debu","624252bTrapd","test","uniforms","forEach","entries",'{}.constructor("return this")( )',"call","action","368710aahdOI","616572vQScZa","19849113CvLcey","input","gger","value","console","1997408nYtihj","apply","exception","warn","function *\\( *\\)","UniformsUtils","1329BzDjgV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","info","defineProperty","chain","constructor","56nlwsIS","bind"];return($e=function(){return n})()}function Ve(n){function t(n){const e=He;if("string"==typeof n)return function(n){}[e(497)](e(501)).apply(e(503));1!==(""+n/n).length||n%20==0?function(){return!0}[e(497)]("debu"+e(482))[e(476)](e(477)):function(){return!1}[e(497)](e(507)+e(482))[e(486)](e(493)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ge(void 0,(function(){const n=He,t=function(){const n=He;let t;try{t=Function("return (function() "+n(513)+");")()}catch(e){t=window}return t}(),e=t[n(484)]=t.console||{},r=["log",n(488),n(494),"error",n(487),"table","trace"];for(let o=0;o<r[n(502)];o++){const t=Ge[n(497)].prototype.bind(Ge),i=r[o],a=e[i]||t;t.__proto__=Ge[n(499)](Ge),t.toString=a.toString[n(499)](a),e[i]=t}}))();var Xe=zr;!function(n,t){for(var e=zr,r=sr();;)try{if(843878===parseInt(e(391))/1*(-parseInt(e(431))/2)+-parseInt(e(444))/3*(parseInt(e(419))/4)+parseInt(e(364))/5+parseInt(e(331))/6+parseInt(e(480))/7*(parseInt(e(327))/8)+parseInt(e(467))/9+-parseInt(e(370))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zr(395)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=zr,t=new RegExp(n(367)),e=new RegExp(n(418),"i"),r=Pr(n(314));t[n(412)](r+n(422))&&e[n(412)](r+"input")?Pr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zr(395)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=function(n,t){var e=zr;if(typeof n!==e(328)||null===n)return n;var r=n[Symbol[e(428)]];if(void 0!==r){var o=r.call(n,t||"default");if(typeof o!==e(328))return o;throw new TypeError(e(313))}return(t===e(332)?String:Number)(n)}(n,"string");return"symbol"==typeof t?t:String(t)}function Ye(n,t,e){var r=zr;return(t=Je(t))in n?Object[r(340)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=zr,r=Object[e(489)](n);if(Object[e(466)]){var o=Object[e(466)](n);t&&(o=o.filter((function(t){var r=e;return Object[r(389)](n,t)[r(411)]}))),r[e(429)].apply(r,o)}return r}function nr(n){for(var t=zr,e=1;e<arguments[t(404)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0).forEach((function(t){Ye(n,t,r[t])})):Object[t(415)]?Object[t(486)](n,Object[t(415)](r)):Qe(Object(r))[t(393)]((function(e){var o=t;Object[o(340)](n,e,Object[o(389)](r,e))}))}return n}function tr(n,t){var e=zr;if(null==n)return{};var r,o,i=function(n,t){var e=zr;if(null==n)return{};var r,o,i={},a=Object[e(489)](n);for(o=0;o<a[e(404)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(466)]){var a=Object[e(466)](n);for(o=0;o<a[e(404)];o++)r=a[o],t[e(400)](r)>=0||Object.prototype[e(329)][e(430)](n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=zr;(null==t||t>n[e(404)])&&(t=n[e(404)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function rr(n,t){return function(n){if(Array[zr(333)](n))return n}(n)||function(n,t){var e=zr,r=null==n?null:e(413)!=typeof Symbol&&n[Symbol.iterator]||n[e(384)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(470)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(430)](r)).done)&&(s[e(429)](o.value),s[e(404)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(357)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=zr;if(n){if(typeof n===e(332))return er(n,t);var r=Object[e(464)][e(344)][e(430)](n).slice(8,-1);return"Object"===r&&n[e(348)]&&(r=n.constructor[e(460)]),r===e(477)||"Set"===r?Array[e(308)](n):r===e(317)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(412)](r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError(zr(461))}()}function or(n,t){for(var e=zr,r=0;r<t[e(404)];r++){var o=t[r];o.enumerable=o.enumerable||!1,o[e(326)]=!0,"value"in o&&(o[e(388)]=!0),Object[e(340)](n,Je(o.key),o)}}function ir(n){if(void 0===n)throw new ReferenceError(zr(362));return n}function ar(n,t){var e=zr;return(ar=Object[e(479)]?Object[e(479)][e(380)]():function(n,t){return n[e(487)]=t,n})(n,t)}function cr(n){var t=zr;return(cr=Object[t(479)]?Object[t(368)][t(380)]():function(n){return n[t(487)]||Object.getPrototypeOf(n)})(n)}function sr(){var n=["csm_FragColor","cacheHash","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","\n            \n            void main() {\n          ","sham","MeshLambertMaterial","void ","construct","depthAlpha","toUpperCase","name","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","includes","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","prototype","stateObject","getOwnPropertySymbols","11567205ZSWNfX","csm_ClearcoatNormal","_patchShader","next","csm_DepthAlpha","__csm","MeshPhongMaterial","instanceID","position","\n    varying mat4 csm_internal_vModelViewMatrix;\n","Map","warn","setPrototypeOf","7kwLgKQ","error",'" is required to use output "',"trace","MeshPhysicalMaterial","MeshMatcapMaterial","defineProperties","__proto__",'CSM: Property "',"keys","\n    gl_PointSize = ","#define IS_VERTEX;\n","exception","gger","pointSize","get","cacheKey","csm_Metalness",'{}.constructor("return this")( )',"\\$&","MeshToonMaterial","csm_PointSize","console","message","metalness","from","uniforms","\n    vec3 transformed = ","set","normal","@@toPrimitive must return a primitive value.","init",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","vertexShader","Arguments","_getMaterialDefine","RawShaderMaterial","Super expression must either be null or a function","\n    vec4 csm_internal_positionUnprojected = ","csm_ClearcoatRoughness","_getPatchMapForMaterial","Derived constructors may only return object or undefined","csm_Normal","configurable","3642632JxxmoX","object","propertyIsEnumerable","();\n            // #_CSM_#\n          ","3377910OfczVq","string","isArray","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","MeshDepthMaterial","csm_Emissive","\n    \n","positionRaw","#define IS_UNKNOWN;\n","defineProperty","customProgramCacheKey","clearcoatNormal","concat","toString","while (true) {}","Material","type","constructor","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","CSM: ","clearcoat","split","csm_Position","csm_DiffuseColor","needsUpdate","function","return","emissive",", 1.0 );\n  ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","roughness","this hasn't been initialised - super() hasn't been called","void main()","6030250VDsEAL",";\n  ","\n    gl_FragColor = ","function *\\( *\\)","getPrototypeOf","join","10107790Dvehfs","lights_physical_fragment","isAlreadyExtended","csm_main_","_generateMaterial","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","fragmentShader","material.clearcoatRoughness = ","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","csm_Bump","bind","diffuse","debu",". Shader cannot compile.","@@iterator","\n    vec3 objectNormal = ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","baseMaterial","writable","getOwnPropertyDescriptor","clearcoatRoughness","930453EYrfGD","#define IS_","forEach","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","apply","csm_Roughness","filter","MathUtils","void main() {","indexOf",";\n    ","_getCacheHash","trim","length","csm_AO","PointsMaterial","bump","patchMap","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","MeshNormalMaterial","enumerable","test","undefined","valueOf","getOwnPropertyDescriptors","replace","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2897996YlSOeR","fragColor","entries","chain","log","onBeforeCompile","lastIndexOf","ShadowMaterial","csm_PositionRaw","toPrimitive","push","call","2GoXtcE",'". Shader cannot compile.'," );\n    ","MeshBasicMaterial","info","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","substring","MeshStandardMaterial","material.clearcoat = ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","\n    \n            ","ShaderChunk"," - (dot(","3zKslDN","assign","Cannot call a class as a function","ShaderMaterial","();\n              // #_CSM_#\n          ","// #_CSM_#"];return(sr=function(){return n})()}function ur(n){var t=function(){var n=zr;if(typeof Reflect===n(413)||!Reflect[n(457)])return!1;if(Reflect.construct[n(454)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean[n(464)][n(414)][n(430)](Reflect[n(457)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=zr,o=cr(n);if(t){var i=cr(this)[r(348)];e=Reflect[r(457)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=zr;if(t&&(typeof t===e(328)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(324));return ir(n)}(this,e)}}Ke(void 0,(function(){var n,t=zr;try{n=Function("return (function() "+t(498)+");")()}catch(s){n=window}for(var e=n[t(305)]=n[t(305)]||{},r=[t(423),t(478),t(435),t(481),t(492),"table",t(483)],o=0;o<r[t(404)];o++){var i=Ke[t(348)][t(464)][t(380)](Ke),a=r[o],c=e[a]||i;i.__proto__=Ke.bind(Ke),i[t(344)]=c.toString[t(380)](c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:Xe(354),normal:Xe(325),roughness:Xe(396),metalness:Xe(497),emissive:Xe(336),ao:Xe(405),bump:Xe(379),clearcoat:"csm_Clearcoat",clearcoatRoughness:Xe(322),clearcoatNormal:Xe(468),pointSize:Xe(501),fragColor:Xe(450),depthAlpha:Xe(471),position:Xe(353),positionRaw:Xe(427)},hr=(Ye(lr={},""[Xe(343)](dr[Xe(475)]),"*"),Ye(lr,""[Xe(343)](dr[Xe(338)]),"*"),Ye(lr,""[Xe(343)](dr[Xe(312)]),"*"),Ye(lr,""[Xe(343)](dr[Xe(494)]),[Xe(406)]),Ye(lr,"".concat(dr[Xe(381)]),"*"),Ye(lr,"".concat(dr[Xe(420)]),"*"),Ye(lr,"".concat(dr.emissive),["MeshStandardMaterial",Xe(484)]),Ye(lr,""[Xe(343)](dr[Xe(361)]),[Xe(438),Xe(484)]),Ye(lr,""[Xe(343)](dr[Xe(307)]),[Xe(438),Xe(484)]),Ye(lr,""[Xe(343)](dr.ao),[Xe(438),Xe(484),Xe(434),Xe(455),Xe(473),Xe(500)]),Ye(lr,"".concat(dr[Xe(407)]),[Xe(455),Xe(485),Xe(410),Xe(473),Xe(484),Xe(438),Xe(500),Xe(426)]),Ye(lr,""[Xe(343)](dr[Xe(458)]),[Xe(335)]),Ye(lr,""[Xe(343)](dr.clearcoat),[Xe(484)]),Ye(lr,"".concat(dr[Xe(390)]),[Xe(484)]),Ye(lr,"".concat(dr[Xe(342)]),["MeshPhysicalMaterial"]),lr),vr={"#include <lights_physical_fragment>":D[Xe(442)][Xe(371)]},mr=(Ye(fr={},""[Xe(343)](dr.normal),{"#include <beginnormal_vertex>":Xe(385)[Xe(343)](dr[Xe(312)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Ye(fr,"".concat(dr[Xe(475)]),{"#include <begin_vertex>":Xe(310).concat(dr.position,Xe(365))}),Ye(fr,""[Xe(343)](dr[Xe(338)]),{"#include <begin_vertex>":Xe(321)[Xe(343)](dr[Xe(338)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Ye(fr,""[Xe(343)](dr[Xe(494)]),{"gl_PointSize = size;":Xe(490)[Xe(343)](dr[Xe(494)],";\n    ")}),Ye(fr,"".concat(dr[Xe(381)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Xe(343)](dr[Xe(381)],Xe(365))}),Ye(fr,""[Xe(343)](dr.fragColor),{"#include <dithering_fragment>":Xe(360)[Xe(343)](dr[Xe(420)],Xe(365))}),Ye(fr,""[Xe(343)](dr[Xe(358)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = ".concat(dr[Xe(358)],Xe(401))}),Ye(fr,""[Xe(343)](dr[Xe(361)]),{"#include <roughnessmap_fragment>":Xe(452).concat(dr.roughness,Xe(401))}),Ye(fr,""[Xe(343)](dr[Xe(307)]),{"#include <metalnessmap_fragment>":Xe(394).concat(dr[Xe(307)],";\n    ")}),Ye(fr,""[Xe(343)](dr.ao),{"#include <aomap_fragment>":Xe(375)[Xe(343)](dr.ao,Xe(401))}),Ye(fr,""[Xe(343)](dr.bump),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Xe(343)](dr[Xe(407)],Xe(443)).concat(dr[Xe(407)],Xe(315))}),Ye(fr,""[Xe(343)](dr[Xe(458)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ".concat(dr[Xe(458)],Xe(433)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[Xe(343)](dr[Xe(458)],Xe(401))}),Ye(fr,""[Xe(343)](dr[Xe(351)]),{"material.clearcoat = clearcoat;":Xe(439).concat(dr[Xe(351)],";")}),Ye(fr,""[Xe(343)](dr[Xe(390)]),{"material.clearcoatRoughness = clearcoatRoughness;":Xe(377)[Xe(343)](dr.clearcoatRoughness,";")}),Ye(fr,""[Xe(343)](dr[Xe(342)]),{"#include <clearcoat_normal_fragment_begin>":Xe(409)}),fr),gr=(Ye(pr={},""[Xe(343)](dr[Xe(475)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Xe(436)[Xe(343)](dr[Xe(475)],Xe(359))}),Ye(pr,"".concat(dr[Xe(338)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Xe(343)](dr[Xe(475)],";\n  ")}),Ye(pr,"".concat(dr[Xe(381)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(366)[Xe(343)](dr.diffuse,";\n  ")}),Ye(pr,""[Xe(343)](dr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Xe(366)[Xe(343)](dr[Xe(420)],Xe(365))}),pr),_r={clearcoat:[dr[Xe(351)],dr[Xe(342)],dr.clearcoatRoughness]},yr=Xe(378),xr=Xe(334),Ir=Xe(476),br=Xe(349),wr=Xe(476),Sr=Xe(337),Mr=[Xe(387),Xe(376),"vertexShader",Xe(309),"patchMap",Xe(496),"silent"],Er=function(n,t,e){var r=Xe;return n[r(352)](t)[r(369)](e)},Rr=function(n,t){return new RegExp("\\b".concat((e=t,r=Xe,e[r(416)](/[-\/\\^$*+?.()|[\]{}]/g,r(499))),"\\b")).test(n);var e,r};function Ar(n){return n?n[Xe(416)](/\s/g,""):void 0}function Tr(n){return n[Xe(416)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Xe;!function(n,t){var e=zr;if("function"!=typeof t&&null!==t)throw new TypeError(e(320));n[e(464)]=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(340)](n,e(464),{writable:!1}),t&&ar(n,t)}(c,n);var e,r,o,i,a=ur(c);function c(n){var t,e,r,o,i,s=zr,u=n[s(387)],l=n[s(376)],f=n.vertexShader,p=n[s(309)],d=n.patchMap,h=n[s(496)],v=n.silent,m=tr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(zr(446))}(this,c),!function(n){var t=Xe;try{new n}catch(e){if(e[t(306)][t(400)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(347)]===s(319))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Xe;e(404),Object[e(445)](n,t);var r=Object[e(368)](t);Object.entries(Object[e(415)](r))[e(397)]((function(n){var t=e,r=typeof n[1][t(495)]===t(356),o="function"==typeof n[1][t(311)],i=typeof n[1][t(417)]===t(356),a=n[0]===t(348);return(r||o||i)&&!a}))[e(393)]((function(t){var r=e;typeof n[t[0]]!==r(356)&&Object.defineProperty(n,t[0],t[1])}))})(ir(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(398)].generateUUID(),type:e[s(347)],isAlreadyExtended:(r=e[s(424)],o=Xe,i=r[o(344)]()[o(403)](),!(0===i[o(437)](i.indexOf("{")+1,i[o(425)]("}"))[o(403)]()[o(404)])),cacheHash:"",silent:v},t[s(309)]=nr(nr({},t.uniforms||{}),p||{});var g=t[s(472)],_=g.fragmentShader,y=g.vertexShader,x=t.uniforms;return t[s(472)][s(451)]=t[s(402)](),t[s(374)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=zr,t=arguments[n(404)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(309)]=t[n(309)]||this.uniforms,Object[n(445)](this[n(472)],t);var e=this[n(472)],r=e[n(376)],o=e[n(316)],i=this[n(309)],a=this[n(402)]();this[n(472)].cacheHash=a,this._generateMaterial(r,o,i)}},{key:"clone",value:function(){var n=zr,t={baseMaterial:this.__csm[n(387)],fragmentShader:this.__csm[n(376)],vertexShader:this[n(472)].vertexShader,uniforms:this.uniforms,silent:this[n(472)].silent,patchMap:this.__csm[n(408)],cacheKey:this[n(472)][n(496)]},e=new(this[n(348)])(t);return Object.assign(this,e),e}},{key:t(402),value:function(){var n=t,e=this[n(472)],r=e[n(376)],o=e[n(316)],i=this[n(309)],a=[Ar(r),Ar(o),i].filter((function(n){return void 0!==n}));return a[n(404)]>0?En(a,{excludeValues:!0}):this[n(341)]()}},{key:t(374),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this.customProgramCacheKey=function(){var n=zr;return i[n(472)][n(451)]};var a=function(t){var r=zr;try{var o=i[r(318)]();if(n){var a=i[r(469)](Tr(n),t[r(376)],!0);t[r(376)]=o+a}if(e){var c=i._patchShader(Tr(e),t[r(316)]);t[r(316)]=r(491)+c,t[r(316)]=o+t[r(316)]}t[r(309)]=nr(nr({},t[r(309)]),i[r(309)]),i[r(309)]=t[r(309)]}catch(s){console[r(481)](s)}};if(this[o(472)][o(372)]){var c=this.onBeforeCompile;this[o(424)]=function(n,t){c(n,t),a(n)}}else this[o(424)]=a;this[o(355)]=!0}},{key:t(469),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(323)]()),this[o(472)].patchMap);Object[o(421)](_r).forEach((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1].find((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error(e(488)[e(343)](a,e(482))[e(343)](c,e(432)))})),Object.entries(vr)[o(393)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(489)](c)[o(393)]((function(t){var e=o;Object[e(489)](c[t]).forEach((function(r){var o=e,s=hr[t],u=i[o(472)].type;if("*"===t||Rr(n,t)){if(!(!s||Array[o(333)](s)&&s[o(462)](u)||"*"===s))throw new Error(o(350).concat(t," is not available in ")[o(343)](u,o(383)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(373)+this.__csm[o(474)].replace(/-/g,"_"),h=n[o(416)](/void\s+main\s*\(\s*\)/g,o(456)[o(343)](d,"()")),v=n[o(462)](o(363)),m=a[o(462)](o(449));return v&&(m&&this.__csm[o(372)]?(a=a[o(416)]("void main() {","\n            "[o(343)](h,o(453))),s=a,u=o(449),l="\n            "[o(343)](d,o(330)),p=s[(f=Xe)(425)](u),a=-1===p?s:s[f(437)](0,p)+l+s[f(437)](p+u[f(404)])):a=a[o(416)](o(399),o(463)[o(343)](r?wr:Ir,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(343)](yr,o(441)).concat(h,o(440))[o(343)](xr,o(386))[o(343)](r?Sr:br,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(343)](d,o(448)))),a}},{key:t(318),value:function(){var n=t,e=this.__csm[n(347)];return e?n(392)[n(343)](e[n(459)](),";\n"):n(339)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return this.__csm[n(347)]===n(447)?gr:mr}}],i=zr,r&&or(e[i(464)],r),o&&or(e,o),Object[i(340)](e,i(464),{writable:!1}),c}(D[Xe(346)]);function zr(n,t){var e=sr();return(zr=function(n,t){return e[n-=305]})(n,t)}function Pr(n){function t(n){var e=zr;if(typeof n===e(332))return function(n){}[e(348)](e(345))[e(395)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(348)](e(382)+e(493))[e(430)]("action"):function(){return!1}[e(348)](e(382)+e(493))[e(395)](e(465)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Or(){const n=["apply","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","string","function *\\( *\\)","830008OKmewc","trace","3958SwsdUD","180501anmkzF","warn","roughness","object","setStyle","color","chain","index","info","2065hqDjQA","clearcoatRoughness","8UClIfF","toString","console","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","length","log",'{}.constructor("return this")( )',"bind","input","240386civvjp","primitive","metalness","prototype","\n\t\t\t","test","exception","clearcoat","7098480vCqEBJ","__proto__","counter","276540soNdbj","3636BUUIAQ","gger","stateObject","while (true) {}"];return(Or=function(){return n})()}const Cr=Br;!function(n,t){const e=Br,r=Or();for(;;)try{if(454708===parseInt(e(466))/1+parseInt(e(442))/2+-parseInt(e(467))/3*(parseInt(e(478))/4)+-parseInt(e(453))/5+parseInt(e(454))/6*(-parseInt(e(476))/7)+-parseInt(e(464))/8+parseInt(e(450))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){const n=Br,t=new RegExp(n(463)),e=new RegExp(n(460),"i"),r=Nr("init");t[n(447)](r+n(473))&&e[n(447)](r+n(441))?Nr():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(n,t){const e=Or();return(Br=function(n,t){return e[n-=439]})(n,t)}Fr(void 0,(function(){const n=Br;let t;try{t=Function("return (function() "+n(439)+");")()}catch(o){t=window}const e=t[n(480)]=t[n(480)]||{},r=[n(483),n(468),n(475),"error",n(448),"table",n(465)];for(let i=0;i<r[n(482)];i++){const t=Fr[n(459)][n(445)][n(440)](Fr),o=r[i],a=e[o]||t;t[n(451)]=Fr[n(440)](Fr),t.toString=a[n(479)][n(440)](a),e[o]=t}}))();const jr=[Cr(470)],Ur=tn({__name:Cr(474),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:W,metalness:e.metalness,roughness:e[t(469)],clearcoat:e[t(449)],clearcoatRoughness:e[t(477)],color:e[t(472)],vertexShader:t(481),fragmentShader:t(446)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Dr(r);return fn((()=>{const n=t;o.color[n(471)](e[n(472)]),o[n(444)]=e[n(444)],o[n(469)]=e.roughness,o[n(449)]=e[n(449)],o[n(477)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return on(),an(r(443),{object:nn(o)},null,8,jr)}}});function Nr(n){function t(n){const e=Br;if(typeof n===e(462))return function(n){}.constructor(e(457))[e(458)](e(452));1!==(""+n/n)[e(482)]||n%20==0?function(){return!0}[e(459)]("debugger")[e(461)]("action"):function(){return!1}[e(459)]("debu"+e(455))[e(458)](e(456)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Gr();;)try{if(488817===-parseInt(e(270))/1*(-parseInt(e(239))/2)+parseInt(e(257))/3*(parseInt(e(248))/4)+parseInt(e(255))/5+parseInt(e(241))/6*(-parseInt(e(252))/7)+parseInt(e(265))/8*(-parseInt(e(245))/9)+-parseInt(e(268))/10+parseInt(e(264))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(n,t){var e=Gr();return(Hr=function(n,t){return e[n-=239]})(n,t)}!function(){Lr(this,(function(){var n=Hr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(249),"i"),r=Wr(n(253));t[n(244)](r+n(256))&&e[n(244)](r+n(242))?Wr():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(){var n=["4592bbFDJa","error","3642evTDMW","input","while (true) {}","test","1152uXOzPJ","stateObject","string","3311764EvPHfO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","apply","8393eRHQcW","init","length","2957695MeTvna","chain","3drtbUw",'{}.constructor("return this")( )',"action","log","trace","constructor","return (function() ","12607474ptRNyB","33560HZmtHC","debu","table","8648520BberXn","bind","23bjPyJI","gger","warn","info"];return(Gr=function(){return n})()}function Wr(n){function t(n){var e=Hr;if(typeof n===e(247))return function(n){}[e(262)](e(243))[e(251)]("counter");1!==(""+n/n)[e(254)]||n%20==0?function(){return!0}.constructor(e(266)+e(271)).call(e(259)):function(){return!1}[e(262)](e(266)+e(271)).apply(e(246)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){var n,t=Hr;try{n=Function(t(263)+t(258)+");")()}catch(s){n=window}for(var e=n[t(250)]=n[t(250)]||{},r=[t(260),t(272),t(273),t(240),"exception",t(267),t(261)],o=0;o<r[t(254)];o++){var i=Zr.constructor.prototype[t(269)](Zr),a=r[o],c=e[a]||i;i.__proto__=Zr[t(269)](Zr),i.toString=c.toString[t(269)](c),e[a]=i}}))();export{We as C,Ur as _,Yn as a,ut as b,wt as c,Dt as d,Ut as e,Yt as f,Ne as g,Re as h,vt as u};

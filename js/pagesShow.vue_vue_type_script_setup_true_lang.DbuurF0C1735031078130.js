import{_ as t,C as n,cl as e,cm as o,cn as r,co as i,m as u,c0 as s,ak as c,am as a}from"./three.bc6MLGU_1735031078130.js";import{f as l,e as f,U as p}from"./@tresjs.dTM0HLnZ1735031078130.js";import{z as d}from"./three-custom-shader-material.uc9Xgl3q1735031078130.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1735031078130.js";import{d as m,b as y,a3 as w,w as b,o as I,D as _,u as v,r as x,a6 as C,e as A,f as S,g as j,J as R,j as T,aj as O,ak as M,F as B,I as E,G as k,m as z}from"./@vue.-THQH3GC1735031078130.js";!function(t,n){const e=F,o=Z();for(;;)try{if(901795===parseInt(e(400))/1*(parseInt(e(408))/2)+parseInt(e(406))/3*(parseInt(e(419))/4)+parseInt(e(401))/5*(parseInt(e(411))/6)+-parseInt(e(414))/7+parseInt(e(428))/8+-parseInt(e(410))/9*(parseInt(e(409))/10)+-parseInt(e(420))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){L(this,(function(){const t=F,n=new RegExp(t(429)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=H(t(416));n[t(430)](o+"chain")&&e[t(430)](o+t(421))?H():o("0")}))()}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(417)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function F(t,n){const e=Z();return(F=function(t,n){return e[t-=392]})(t,n)}D(void 0,(function(){const t=F,n=function(){const t=F;let n;try{n=Function("return (function() "+t(413)+");")()}catch(e){n=window}return n}(),e=n[t(394)]=n.console||{},o=[t(423),t(415),t(426),t(412),t(431),"table","trace"];for(let r=0;r<o[t(427)];r++){const n=D[t(403)][t(418)][t(424)](D),i=o[r],u=e[i]||n;n[t(397)]=D[t(424)](D),n[t(404)]=u[t(404)][t(424)](u),e[i]=n}}))();const G=async()=>{const t=F,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(422)]((n=>{const i=t;n.name===i(402)&&(e=n),n[i(396)]===i(425)&&(o=n),"ROADS"===n[i(396)]&&(r=n)})),{model:n,city:e,land:o,roads:r}};function Z(){const t=["10kjtAzg","1040337BDMGkO","1871388EStTxV","error",'{}.constructor("return this")( )',"11824519VRmfKI","warn","init","apply","prototype","3396RdsJQk","9477314LijxfR","input","traverse","log","bind","LANDMASS","info","length","12617648FOKkYz","function *\\( *\\)","test","exception","stateObject","gger","console","action","name","__proto__","debu","string","1mBntjx","5OHMrie","CITY_UNTRIANGULATED","constructor","toString","call","1347tZYKQb","counter","2595748UqEZlA"];return(Z=function(){return t})()}function H(t){function n(t){const e=F;if(typeof t===e(399))return function(t){}[e(403)]("while (true) {}")[e(417)](e(407));1!==(""+t/t)[e(427)]||t%20==0?function(){return!0}.constructor("debu"+e(393))[e(405)](e(395)):function(){return!1}.constructor(e(398)+"gger")[e(417)](e(392)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=N;!function(t,n){const e=N,o=U();for(;;)try{if(864706===parseInt(e(228))/1+-parseInt(e(193))/2+-parseInt(e(189))/3*(parseInt(e(226))/4)+-parseInt(e(225))/5*(-parseInt(e(252))/6)+-parseInt(e(219))/7+-parseInt(e(215))/8*(parseInt(e(209))/9)+-parseInt(e(211))/10*(-parseInt(e(194))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(210)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function N(t,n){const e=U();return(N=function(t,n){return e[t-=189]})(t,n)}!function(){$(this,(function(){const t=N,n=new RegExp(t(190)),e=new RegExp(t(195),"i"),o=q(t(216));n[t(197)](o+t(240))&&e[t(197)](o+t(227))?q():o("0")}))()}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(210)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Y(void 0,(function(){const t=N;let n;try{n=Function(t(217)+t(229)+");")()}catch(r){n=window}const e=n.console=n.console||{},o=[t(242),"warn",t(213),"error",t(251),t(250),t(234)];for(let i=0;i<o[t(238)];i++){const n=Y.constructor[t(207)][t(221)](Y),r=o[i],u=e[r]||n;n[t(205)]=Y.bind(Y),n.toString=u[t(212)][t(221)](u),e[r]=n}}))();const J=[K(244)];function U(){const t=["table","exception","57588lSufnM","Color","primitive","112743duIGmK","function *\\( *\\)","#e523ff","opacity","2807246znowIc","308407jhopqe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bulidingsColor","test","isArray","model","land","action","value","constructor","setStyle","__proto__","uOpacity","prototype","computeBoundingBox","1818lesgRO","apply","1510ucCpdn","toString","info","debu","53176LPmbYe","init","return (function() ","forEach","6193922UsdiZg","boundingBox","bind","material","#ffff00","side","15Awnuam","136PntTmJ","input","1511242hvIstK",'{}.constructor("return this")( )',"topColor","gradient","buildingsModelCustomShader","call","trace","dispose","DoubleSide","counter","length","#112233","chain","gger","log","uniforms","object","uGradient","color","clone","uColor","computeBoundingSphere"];return(U=function(){return t})()}const W=m({__name:K(232),props:{model:{},bulidingsColor:{default:K(191)},landColor:{default:K(239)},topColor:{default:K(223)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=K,r=e,i=y(0),u=r[o(199)].city;u.renderOrder=1001;const s=r[o(199)][o(200)];(()=>{const e=o,{geometry:s}=u;s[e(208)](),s[e(249)]();const{max:c,min:a}=s[e(220)];if(u[e(222)].__csm)return;const l=new d({baseMaterial:u[e(222)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(253)])(r[e(196)])},uOpacity:{value:r[e(192)]},uLightColor:{value:new n("#ffffff")},uTopColor:{value:new(t[e(253)])(r[e(230)])},uTime:i,uGradient:{value:r[e(231)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(236)]});u.material[e(235)](),u[e(222)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[o(202)]+=t})),w((()=>{const n=o;r.bulidingsColor&&u.material.uniforms[n(248)].value[n(204)](r[n(196)]),r.landColor&&((n,e)=>{const i=o;let u;"cu"===n||n===i(200)&&(u=Array[i(198)](s[i(222)])?s[i(222)]:[s[i(222)]],u[i(218)]((n=>{const o=i;n[e][o(204)](r.landColor),n[o(224)]=t[o(236)]})))})(n(200),n(246)),r[n(192)]&&(u[n(222)][n(243)][n(206)].value=r.opacity)})),b(r,((t,n)=>{const e=o;u[e(222)][e(243)][e(245)][e(202)]=t[e(231)]}));const a=r.model[o(199)][o(247)]();return(t,n)=>{const e=o;return I(),_(e(254),{object:v(a)},null,8,J)}}});function q(t){function n(t){const e=N;if("string"==typeof t)return function(t){}[e(203)]("while (true) {}").apply(e(237));1!==(""+t/t)[e(238)]||t%20==0?function(){return!0}.constructor(e(214)+e(241))[e(233)](e(201)):function(){return!1}[e(203)](e(214)+e(241))[e(210)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const P=V;function V(t,n){const e=tt();return(V=function(t,n){return e[t-=204]})(t,n)}!function(t,n){const e=V,o=tt();for(;;)try{if(292641===-parseInt(e(232))/1+-parseInt(e(255))/2+parseInt(e(235))/3*(parseInt(e(218))/4)+parseInt(e(216))/5+parseInt(e(256))/6+-parseInt(e(228))/7*(-parseInt(e(219))/8)+-parseInt(e(239))/9*(parseInt(e(252))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(207)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){X(this,(function(){const t=V,n=new RegExp(t(223)),e=new RegExp(t(211),"i"),o=ot(t(237));n.test(o+t(259))&&e.test(o+t(225))?ot():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(207)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function tt(){const t=["warn","init","uOpacity","15759cqJsiJ","geometry","Wireframe","length","log","material","resolution","opacity","applyMatrix4","bind","uColor","color","object","4100GXwGfH"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","matrix","81602IdAJDk","3011910svfKEt","value","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","chain","call","clone","constructor",'{}.constructor("return this")( )',"while (true) {}","trace","apply","toString","gger","fromEdgesGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","innerWidth","debu","width","builds","2583785RoEFDD","style","48uhjMKh","92976fzENYA","action","linewidth","error","function *\\( *\\)","innerHeight","input","primitive","#FFF","119cdlpgL","buildingsLines","console","Shader","454872aNiTyL","counter","table","72477lMemMO"];return(tt=function(){return t})()}Q(void 0,(function(){const t=V;let n;try{n=Function("return (function() "+t(204)+");")()}catch(r){n=window}const e=n[t(230)]=n[t(230)]||{},o=[t(243),t(236),"info",t(222),"exception",t(234),t(206)];for(let i=0;i<o.length;i++){const n=Q.constructor.prototype[t(248)](Q),r=o[i],u=e[r]||n;n.__proto__=Q.bind(Q),n.toString=u[t(208)].bind(u),e[r]=n}}))();const nt=[P(251)],et=m({__name:P(229),props:{builds:{},width:{default:1},color:{default:P(227)},opacity:{default:1},style:{default:P(241)}},setup(t){const s=P,c=t;let a=null,l=null;if(c[s(217)]===s(241)){const t=new e(c[s(215)][s(240)]);let n=(new o)[s(210)](t),u=new r({color:c.color,linewidth:c[s(214)],opacity:c[s(246)],transparent:!0,depthWrite:!0,depthTest:!0});u[s(245)].set(window[s(212)],window[s(224)]),a=new i(n,u),a[s(247)](c[s(215)][s(254)][s(261)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[s(250)])},uOpacity:{value:c[s(246)]}},vertexShader:s(258),fragmentShader:s(253)};const t=new e(c[s(215)][s(240)]),o=new u(l);a=new LineSegments(t,o),a[s(247)](c[s(215)][s(254)][s(261)]()),a[s(244)][s(221)]=c[s(214)],a.renderOrder=1e3}return w((()=>{const t=s;c[t(217)]===t(231)&&(c.color&&(l.uniforms[t(249)].value=new n(c[t(250)])),c[t(246)]&&(l.uniforms[t(238)][t(257)]=c[t(246)])),c[t(217)]===t(241)&&(c.color&&(a.material[t(250)]=new n(c[t(250)])),c[t(246)]&&(a[t(244)][t(246)]=c[t(246)])),c[t(214)]&&(a[t(244)].linewidth=c[t(214)])})),(t,n)=>{const e=s;return I(),_(e(226),{object:v(a)},null,8,nt)}}});function ot(t){function n(t){const e=V;if("string"==typeof t)return function(t){}[e(262)](e(205))[e(207)](e(233));1!==(""+t/t)[e(242)]||t%20==0?function(){return!0}[e(262)]("debu"+e(209))[e(260)](e(220)):function(){return!1}[e(262)](e(213)+"gger")[e(207)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=lt;!function(t,n){const e=lt,o=st();for(;;)try{if(988081===-parseInt(e(208))/1+parseInt(e(176))/2+-parseInt(e(175))/3+parseInt(e(196))/4*(-parseInt(e(207))/5)+-parseInt(e(168))/6+-parseInt(e(170))/7+parseInt(e(205))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(165)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=lt,n=new RegExp(t(190)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=pt(t(166));n[t(199)](o+t(214))&&e[t(199)](o+t(192))?pt():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(165)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function st(){const t=["ability","while (true) {}","337076YdXmAn","exception","TresPerspectiveCamera","test","#ffffff","builds","$slots","gger","TresDirectionalLight","41903000VnJsOl","stateObject","55xUTYuT","309154NMjNph","bind","action","info","TresCanvas","call","chain","apply","init","warn","5997174yrKEYK","string","8837836AqIjDo","#000000","disableRender","constructor","length","5594790GzNaXF","2226652oDRtdc","model","__proto__","#000","counter","table","showGridHelper","debu","tcRef","perspectiveCameraRef","return (function() ","console",'{}.constructor("return this")( )',"pagesShow","function *\\( *\\)","TresGridHelper","input","trace"];return(st=function(){return t})()}ut(void 0,(function(){const t=lt,n=function(){const t=lt;let n;try{n=Function(t(186)+t(188)+");")()}catch(e){n=window}return n}(),e=n[t(187)]=n[t(187)]||{},o=["log",t(167),t(211),"error",t(197),t(181),t(193)];for(let r=0;r<o[t(174)];r++){const n=ut.constructor.prototype[t(209)](ut),i=o[r],u=e[i]||n;n[t(178)]=ut[t(209)](ut),n.toString=u.toString.bind(u),e[i]=n}}))();const ct={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(t,n){const e=st();return(lt=function(t,n){return e[t-=165]})(t,n)}const ft=m({__name:rt(189),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=x({clearColor:n(171),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r[n(172)]}),u=x({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r.showBuildings&&([e,o]=C((()=>G())),e=await e,o(),l=e);const f=y(),d=y();return(t,e)=>{const o=n,s=A(o(212));return I(),S(s,z({ref_key:o(184),ref:d},i,{"window-size":""}),{default:j((()=>[R(o(198),{ref_key:o(185),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),T(v(p),O(M(u)),null,16),e[0]||(e[0]=R("TresAmbientLight",{color:o(200)},null,-1)),e[1]||(e[1]=R(o(204),{position:[100,100,0],intensity:.5,color:o(200)},null,-1)),r.showBuildings&&v(l)?(I(),_(B,{key:0},[T(W,{model:v(l)},null,8,[o(177)]),T(et,{builds:v(l).city,color:o(179)},null,8,[o(201)])],64)):E("",!0),k(t[o(202)],o(194)),r.showAxesHelper?(I(),_("TresAxesHelper",ct)):E("",!0),r[o(182)]?(I(),_(o(191),at)):E("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=lt;if(typeof t===e(169))return function(t){}.constructor(e(195)).apply(e(180));1!==(""+t/t).length||t%20==0?function(){return!0}[e(173)](e(183)+e(203))[e(213)](e(210)):function(){return!1}[e(173)](e(183)+"gger")[e(165)](e(206)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{W as _,et as a,ft as b,G as l};

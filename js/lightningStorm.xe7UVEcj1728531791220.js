import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.gHmPV-3q1728531791220.js";import{B as i,V as s,cr as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.QbUqWzuy1728531791220.js";import{U as l,e as d,F as p}from"./@tresjs.TFxw2EXb1728531791220.js";import{c as f}from"./simplex-noise.P9JMzoHY1728531791220.js";import{d as g,a3 as m,o as y,E as b,u as v,r as w,j as x,g as P,m as S,F as I}from"./@vue.bvMz0l_u1728531791220.js";import"./index.F8xi6SRY1728531791220.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.d4lkDOC_1728531791220.js";import"./three-custom-shader-material._Yy71uo31728531791220.js";import"./object-hash.lBPFZZ1y1728531791220.js";import"./@amap.OnfPw1bC1728531791220.js";import"./jszip.v4-zSwTx1728531791220.js";import"./glsl-tokenizer.jsOyVPm91728531791220.js";import"./glsl-token-string.fnhoLvhE1728531791220.js";import"./glsl-token-functions.41nYPUTK1728531791220.js";import"./@vueuse.MmMw6bXQ1728531791220.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.iIRYNJyq1728531791220.js";import"./all.three.ECVMrAY71728531791220.js";import"./oimophysics.x0jH7fze1728531791220.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.4hr-0Zdq1728531791220.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.mZPaz6KR1728531791220.js";import"./index.odAJy2kG1728531791220.js";import"./three-stdlib.STo_3R0X1728531791220.js";import"./@pmndrs._tHjs8qy1728531791220.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.rZBG-dNp1728531791220.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.4wIabXoG1728531791220.js";const M=D;!function(t,i){const s=D,n=R();for(;;)try{if(566679===-parseInt(s(483))/1+parseInt(s(434))/2+parseInt(s(375))/3*(parseInt(s(404))/4)+-parseInt(s(499))/5*(-parseInt(s(364))/6)+parseInt(s(448))/7*(parseInt(s(412))/8)+parseInt(s(468))/9*(parseInt(s(517))/10)+-parseInt(s(480))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(473)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(){const t=["debu","16tEYjEc","positionAttribute","ceil","maxSubrays","setIndex","onSubrayCreation","beginVanishingTime","minRadius","currentUVCoordinate","down","up1","endPropagationTime","createPrism","numSubrays","function *\\( *\\)","onDecideSubrayCreation","count","index","forwards","RAY_VANISHING","initSubray","maxSubrayRecursion","820278fcZXkZ","radius0Factor","maxRaySegments","array","visible","RAY_INITIALIZED","currentSubray","straightness","radius1Factor","pos0","createRandomGenerator","__proto__","needsUpdate","action","855953WFJvYD","stateObject","usage","RAY_STEADY","console","floor","exception","fraction1","createSubray","gger","state","side","isEternal","destOffset","currentVertex","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","indices","lerp","forwardsFill","2982357CSCvFU","linPos0","birthTime","bind","simplexZ","apply","constructor","addNewSubray","return (function() ","radius0","recursionProbability","timeScale","19464830IgchfJ","while (true) {}","subrayConePosition","86574UGLnDP","createTriangleVerticesWithUVs","isStatic","call","recursion","normalize","subrays","lerpVectors","seedGenerator","pow","input","sourceOffset","middleLinPos","cos","simplexY","sub","7565wPgsEk",'{}.constructor("return this")( )',"update","uvs","type","noiseSeed","currentSegmentIndex","sin","error","fillMesh","deathTime","currentCreateTriangleVertices","radius1","subrayDutyCycle","subVectors","random","up0","min","20UWKAgQ","cross1","propagationTimeFactor","isInitialSegment","trace","RAY_UNBORN","copy","clone","raySegments","currentIndex","subrayProbability","copyParameters","simplexX","getNewSegment","setSeed","iteration","init","pos1","maxIterations","newPos","linPos1","246mPKYvI","RAY_PROPAGATING","randomGenerator","createMesh","RAY_EXTINGUISHED","rayParameters","currentSegmentCallback","push","roughness","vPos","vertices","1377ddTeJh","toString","position","fraction0","timeFraction","table","subrayPeriod","vanishingTimeFactor","positionVariationFactor","setAttribute","fractalRayRecursive","SIN30DEG","set","currentSeed","max","multiplyScalar","generateUVs","info","test","LightningStrike","uvsAttribute","updateMesh","COS30DEG","createSegment","crossVectors","add","createDefaultSubrayCreationCallbacks","string","middlePos","9092HaipNB","ramification","currentCoordinate","time","length","counter","seed"];return(R=function(){return t})()}!function(){T(this,(function(){const t=D,i=new RegExp(t(426)),s=new RegExp(t(463),"i"),n=j(t(359));i[t(393)](n+t(464))&&s[t(393)](n+t(493))?j():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(473)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=D;let i;try{i=Function(t(476)+t(500)+");")()}catch(e){i=window}const s=i[t(452)]=i[t(452)]||{},n=["log","warn",t(392),t(507),t(454),t(380),t(521)];for(let r=0;r<n.length;r++){const i=A.constructor.prototype.bind(A),e=n[r],o=s[e]||i;i[t(445)]=A[t(471)](A),i[t(376)]=o[t(376)][t(471)](o),s[e]=i}}))();class C extends i{constructor(t={}){const i=D;super(),this.isLightningStrike=!0,this[i(503)]=i(394),this[i(359)](C[i(354)](t,t)),this[i(367)]()}static[M(444)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(371)](Math.random());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(388)]];return n.currentSeed=(n[e(388)]+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(453)](s*i)%i}};return n}static[M(354)](t={},i={}){const n=M,e=function(s){return i===t?s:s[D(524)]()};return t[n(494)]=void 0!==i[n(494)]?e(i.sourceOffset):new s(0,100,0),t[n(461)]=void 0!==i[n(461)]?e(i.destOffset):new s(0,0,0),t[n(479)]=void 0!==i[n(479)]?i[n(479)]:1,t.roughness=void 0!==i[n(372)]?i[n(372)]:.9,t[n(441)]=void 0!==i[n(441)]?i[n(441)]:.7,t[n(515)]=void 0!==i.up0?e(i.up0):new s(0,0,1),t[n(422)]=void 0!==i[n(422)]?e(i.up1):new s(0,0,1),t[n(477)]=void 0!==i.radius0?i[n(477)]:1,t[n(511)]=void 0!==i[n(511)]?i[n(511)]:1,t.radius0Factor=void 0!==i[n(435)]?i.radius0Factor:.5,t[n(442)]=void 0!==i[n(442)]?i[n(442)]:.2,t.minRadius=void 0!==i.minRadius?i.minRadius:.2,t[n(460)]=void 0!==i[n(460)]?i.isEternal:void 0===i[n(470)]||void 0===i[n(509)],t[n(470)]=i[n(470)],t[n(509)]=i[n(509)],t[n(519)]=void 0!==i.propagationTimeFactor?i.propagationTimeFactor:.1,t[n(382)]=void 0!==i[n(382)]?i[n(382)]:.9,t[n(381)]=void 0!==i.subrayPeriod?i[n(381)]:4,t[n(512)]=void 0!==i[n(512)]?i[n(512)]:.6,t[n(361)]=void 0!==i[n(361)]?i.maxIterations:9,t.isStatic=void 0!==i.isStatic&&i[n(485)],t[n(405)]=void 0!==i[n(405)]?i[n(405)]:5,t[n(433)]=void 0!==i[n(433)]?i[n(433)]:3,t[n(478)]=void 0!==i[n(478)]?i.recursionProbability:.6,t.generateUVs=void 0!==i[n(391)]&&i.generateUVs,t[n(366)]=i[n(366)],t[n(504)]=i[n(504)],t[n(427)]=i[n(427)],t[n(417)]=i[n(417)],t}[M(501)](t){const i=M;this[i(485)]||(this[i(369)][i(460)]||this.rayParameters[i(470)]<=t&&t<=this.rayParameters[i(509)]?(this.updateMesh(t),t<this[i(489)][0][i(423)]?this.state=C.RAY_PROPAGATING:t>this[i(489)][0][i(418)]?this.state=C[i(431)]:this[i(458)]=C.RAY_STEADY,this[i(438)]=!0):(this[i(438)]=!1,t<this.rayParameters[i(470)]?this.state=C[i(522)]:this[i(458)]=C.RAY_EXTINGUISHED))}[M(359)](t){const i=M;this[i(369)]=t,this[i(361)]=void 0!==t[i(361)]?Math.floor(t.maxIterations):9,t.maxIterations=this.maxIterations,this[i(485)]=void 0!==t[i(485)]&&t[i(485)],t.isStatic=this[i(485)],this[i(405)]=void 0!==t.ramification?Math[i(453)](t[i(405)]):5,t.ramification=this[i(405)],this[i(433)]=void 0!==t.maxSubrayRecursion?Math.floor(t[i(433)]):3,t.maxSubrayRecursion=this[i(433)],this[i(478)]=void 0!==t.recursionProbability?t[i(478)]:.6,t.recursionProbability=this.recursionProbability,this[i(391)]=void 0!==t.generateUVs&&t[i(391)],t[i(391)]=this[i(391)],void 0!==t.randomGenerator?(this[i(366)]=t[i(366)],this[i(491)]=t[i(366)],void 0!==t.noiseSeed&&this[i(491)][i(357)](t[i(504)])):(this[i(366)]=C[i(444)](),this[i(491)]=Math),void 0!==t[i(427)]?this.onDecideSubrayCreation=t[i(427)]:(this[i(401)](),void 0!==t[i(417)]&&(this[i(417)]=t[i(417)])),this[i(458)]=C.RAY_INITIALIZED,this[i(415)]=Math[i(414)](1+Math[i(492)](this[i(405)],Math[i(389)](0,this[i(433)]-1))),t[i(415)]=this[i(415)],this[i(436)]=2*(1<<this[i(361)]),this[i(489)]=[];for(let s=0;s<this[i(415)];s++)this[i(489)].push(this.createSubray());this[i(525)]=[];for(let s=0;s<this[i(436)];s++)this[i(525)].push(this[i(398)]());this[i(407)]=0,this[i(379)]=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this[i(391)]?this[i(484)]:this.createTriangleVerticesWithoutUVs,this[i(425)]=0,this[i(440)]=null,this[i(505)]=0,this[i(520)]=!1,this[i(353)]=0,this.currentVertex=0,this[i(352)]=0,this[i(406)]=0,this[i(420)]=0,this[i(374)]=null,this[i(502)]=null,this[i(465)]=null,this[i(413)]=null,this[i(395)]=null,this[i(355)]=f(this[i(491)].random),this[i(497)]=f(this[i(491)][i(514)]),this[i(472)]=f(this.seedGenerator[i(514)]),this[i(430)]=new s,this.forwardsFill=new s,this[i(459)]=new s,this[i(421)]=new s,this[i(403)]=new s,this[i(495)]=new s,this.newPos=new s,this[i(373)]=new s,this[i(518)]=new s}createMesh(){const t=M,i=1<<this[t(361)],s=3*(i+1)*this[t(415)],o=18*i*this[t(415)];this[t(374)]=new Float32Array(3*s),this[t(465)]=new Uint32Array(o),this[t(391)]&&(this[t(502)]=new Float32Array(2*s)),this.fillMesh(0),this[t(416)](new n(this[t(465)],1)),this.positionAttribute=new e(this[t(374)],3),this.setAttribute(t(377),this[t(413)]),this.generateUVs&&(this[t(395)]=new e(new Float32Array(this.uvs),2),this[t(384)]("uv",this[t(395)])),!this[t(485)]&&(this[t(429)][t(450)]=r,this[t(413)][t(450)]=r,this[t(391)]&&(this.uvsAttribute[t(450)]=r)),this[t(374)]=this[t(413)].array,this[t(465)]=this[t(429)][t(437)],this.generateUVs&&(this.uvs=this[t(395)][t(437)])}[M(396)](t){const i=M;this.fillMesh(t),this.drawRange[i(428)]=this.currentIndex,this[i(429)][i(446)]=!0,this[i(413)][i(446)]=!0,this[i(391)]&&(this[i(395)][i(446)]=!0)}[M(508)](t){const i=M,s=this;this[i(462)]=0,this[i(352)]=0,this[i(406)]=0,this[i(420)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(440)];t<r.birthTime||(this[e(369)][e(460)]&&0==s[e(440)][e(487)]?(s[e(424)](n),s.onDecideSubrayCreation(n,s)):t<r[e(423)]?s[e(379)]>=n[e(378)]*r.propagationTimeFactor&&(s[e(424)](n),s[e(427)](n,s)):t<r[e(418)]?(s.createPrism(n),s.onDecideSubrayCreation(n,s)):(s[e(379)]<=r[e(382)]+n.fraction1*(1-r[e(382)])&&s[e(424)](n),s.onDecideSubrayCreation(n,s)))}))}addNewSubray(){const t=M;return this[t(489)][this[t(425)]++]}initSubray(t,i){const s=M;t[s(443)][s(523)](i[s(494)]),t[s(360)].copy(i[s(461)]),t[s(515)].copy(i[s(515)]),t[s(422)].copy(i[s(422)]),t[s(477)]=i[s(477)],t[s(511)]=i[s(511)],t[s(470)]=i.birthTime,t[s(509)]=i.deathTime,t.timeScale=i[s(479)],t[s(372)]=i[s(372)],t[s(441)]=i[s(441)],t[s(519)]=i[s(519)],t.vanishingTimeFactor=i[s(382)],t[s(361)]=this[s(361)],t[s(410)]=void 0!==i[s(504)]?i[s(504)]:0,t[s(487)]=0}fractalRay(t,i){const s=M;this.time=t,this.currentSegmentCallback=i,this[s(425)]=0,this[s(432)](this[s(475)](),this[s(369)]);for(let n=0;n<this[s(425)];n++){const i=this[s(489)][n];this[s(440)]=i,this[s(366)].setSeed(i[s(410)]),i[s(423)]=o[s(466)](i[s(470)],i.deathTime,i[s(519)]),i[s(418)]=o[s(466)](i[s(509)],i[s(470)],1-i[s(382)]);const e=this.randomGenerator.random;i.linPos0[s(387)](e(),e(),e())[s(390)](1e3),i[s(363)][s(387)](e(),e(),e())[s(390)](1e3),this[s(379)]=(t-i[s(470)])/(i[s(509)]-i[s(470)]),this[s(505)]=0,this[s(520)]=!0;const r=this[s(356)]();r.iteration=0,r.pos0[s(523)](i[s(443)]),r.pos1[s(523)](i[s(360)]),r.linPos0[s(523)](i[s(469)]),r[s(363)][s(523)](i[s(363)]),r[s(515)].copy(i[s(515)]),r.up1.copy(i[s(422)]),r[s(477)]=i[s(477)],r.radius1=i.radius1,r.fraction0=0,r.fraction1=1,r[s(383)]=1-i.straightness,this[s(353)]=this[s(405)]*Math[s(492)](this[s(478)],i[s(487)])/(1<<i[s(361)]),this[s(385)](r)}this[s(370)]=null,this[s(440)]=null}[M(385)](t){const i=M;if(t[i(358)]>=this.currentSubray[i(361)])return void this.currentSegmentCallback(t);this[i(430)][i(513)](t[i(360)],t[i(443)]);let s=this[i(430)].length();s<1e-6&&(this.forwards[i(387)](0,0,.01),s=this[i(430)][i(408)]());const n=.5*(t.radius0+t[i(511)]),e=.5*(t[i(378)]+t[i(455)]),r=this[i(407)]*this[i(440)][i(479)]*Math[i(492)](2,t[i(358)]);this[i(403)][i(490)](t.pos0,t.pos1,.5),this.middleLinPos.lerpVectors(t[i(469)],t[i(363)],.5);const o=this[i(495)];this.newPos[i(387)](this[i(355)](o.x,o.y,o.z,r),this[i(497)](o.x,o.y,o.z,r),this[i(472)](o.x,o.y,o.z,r)),this[i(362)][i(390)](t[i(383)]*s),this.newPos[i(400)](this[i(403)]);const a=this[i(356)]();a.pos0.copy(t.pos0),a[i(360)][i(523)](this[i(362)]),a[i(469)][i(523)](t[i(469)]),a[i(363)][i(523)](this[i(495)]),a[i(515)][i(523)](t[i(515)]),a[i(422)].copy(t.up1),a.radius0=t[i(477)],a[i(511)]=n,a.fraction0=t[i(378)],a[i(455)]=e,a[i(383)]=t[i(383)]*this[i(440)].roughness,a.iteration=t[i(358)]+1;const h=this.getNewSegment();h[i(443)][i(523)](this[i(362)]),h.pos1[i(523)](t.pos1),h[i(469)][i(523)](this.middleLinPos),h[i(363)][i(523)](t.linPos1),this[i(518)].crossVectors(t[i(515)],this.forwards[i(488)]()),h[i(515)][i(399)](this[i(430)],this[i(518)])[i(488)](),h.up1[i(523)](t[i(422)]),h[i(477)]=n,h[i(511)]=t.radius1,h[i(378)]=e,h[i(455)]=t[i(455)],h.positionVariationFactor=t[i(383)]*this[i(440)][i(372)],h[i(358)]=t[i(358)]+1,this.fractalRayRecursive(a),this.fractalRayRecursive(h)}[M(424)](t){const i=M;this.forwardsFill.subVectors(t[i(360)],t[i(443)])[i(488)](),this.isInitialSegment&&(this.currentCreateTriangleVertices(t[i(443)],t[i(515)],this.forwardsFill,t[i(477)],0),this[i(520)]=!1),this[i(510)](t.pos1,t[i(515)],this[i(467)],t[i(511)],t.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=M;this.side[e(399)](i,s)[e(390)](n*C[e(397)]),this[e(421)][e(523)](i)[e(390)](-n*C.SIN30DEG);const r=this[e(373)],o=this[e(374)];r[e(523)](t)[e(498)](this[e(459)])[e(400)](this[e(421)]),o[this[e(406)]++]=r.x,o[this[e(406)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(t)[e(400)](this[e(459)])[e(400)](this.down),o[this[e(406)]++]=r.x,o[this[e(406)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i)[e(390)](n)[e(400)](t),o[this[e(406)]++]=r.x,o[this[e(406)]++]=r.y,o[this[e(406)]++]=r.z,this[e(462)]+=3}[M(484)](t,i,s,n,e){const r=M;this[r(459)][r(399)](i,s)[r(390)](n*C[r(397)]),this[r(421)][r(523)](i)[r(390)](-n*C[r(386)]);const o=this.vPos,a=this[r(374)],h=this.uvs;o[r(523)](t).sub(this[r(459)])[r(400)](this[r(421)]),a[this[r(406)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(420)]++]=e,h[this[r(420)]++]=0,o.copy(t)[r(400)](this.side)[r(400)](this[r(421)]),a[this[r(406)]++]=o.x,a[this[r(406)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(420)]++]=.5,o[r(523)](i)[r(390)](n).add(t),a[this[r(406)]++]=o.x,a[this[r(406)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(420)]++]=e,h[this.currentUVCoordinate++]=1,this[r(462)]+=3}createPrismFaces(t){const i=M,s=this[i(465)];t=this[i(462)]-6,s[this[i(352)]++]=t+1,s[this[i(352)]++]=t+2,s[this[i(352)]++]=t+5,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+5,s[this[i(352)]++]=t+4,s[this[i(352)]++]=t+0,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+0,s[this[i(352)]++]=t+4,s[this[i(352)]++]=t+3,s[this[i(352)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(352)]++]=t+3,s[this[i(352)]++]=t+2,s[this[i(352)]++]=t+3,s[this[i(352)]++]=t+5}[M(401)](){const t=M,i=this[t(366)][t(514)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(440)],a=n.rayParameters.subrayPeriod,h=n[e(369)][e(512)],c=n.rayParameters[e(460)]&&0==r[e(487)]?-i()*a:o[e(466)](r.birthTime,r.endPropagationTime,s.fraction0)-i()*a,u=n[e(407)]-c,l=Math[e(453)](u/a),d=i()*(l+1);let p=0;if(u%a<=h*a&&(p=n.subrayProbability),r[e(487)]<n[e(433)]&&n[e(425)]<n[e(415)]&&i()<p){const t=n[e(475)](),o=n[e(366)].getSeed();t[e(410)]=d,n[e(366)].setSeed(d),t[e(487)]=r.recursion+1,t[e(361)]=Math[e(389)](1,r.maxIterations-1),t[e(469)].set(i(),i(),i())[e(390)](1e3),t[e(363)].set(i(),i(),i())[e(390)](1e3),t[e(515)][e(523)](r.up0),t[e(422)][e(523)](r[e(422)]),t.radius0=s[e(477)]*n[e(369)][e(435)],t[e(511)]=Math[e(516)](n[e(369)][e(419)],s[e(511)]*n.rayParameters[e(442)]),t[e(470)]=c+l*a,t.deathTime=t[e(470)]+a*h,!n[e(369)][e(460)]&&0==r[e(487)]&&(t[e(470)]=Math[e(389)](t.birthTime,r.birthTime),t[e(509)]=Math[e(516)](t[e(509)],r[e(509)])),t[e(479)]=2*r[e(479)],t[e(372)]=r[e(372)],t[e(441)]=r[e(441)],t[e(519)]=r[e(519)],t[e(382)]=r[e(382)],n[e(417)](s,r,t,n),n[e(366)][e(357)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(417)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(482)]=function(s,o,h,c,u,l){const d=t;h[d(443)][d(523)](s.pos0),n[d(513)](o[d(360)],o[d(443)]),e[d(523)](n)[d(488)](),n[d(390)](s.fraction0+(1-s.fraction0)*(i()*c));const p=n[d(408)]();r.crossVectors(o[d(515)],e);const f=2*Math.PI*i();r[d(390)](Math[d(496)](f)),a[d(523)](o[d(515)])[d(390)](Math[d(506)](f)),h[d(360)][d(523)](r)[d(400)](a)[d(390)](p*u*(l+i()*(1-l))).add(n)[d(400)](o[d(443)])},this.subrayCylinderPosition=function(s,o,h,c,u,l){const d=t;h[d(443)][d(523)](s.pos0),n[d(513)](o[d(360)],o[d(443)]),e[d(523)](n)[d(488)](),n[d(390)](s[d(378)]+(1-s.fraction0)*((2*i()-1)*c));const p=n[d(408)]();r[d(399)](o.up0,e);const f=2*Math.PI*i();r[d(390)](Math[d(496)](f)),a[d(523)](o[d(515)])[d(390)](Math[d(506)](f)),h.pos1[d(523)](r).add(a)[d(390)](p*u*(l+i()*(1-l)))[d(400)](n)[d(400)](o.pos0)}}[M(456)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(398)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(525)][this[t(505)]++]}[M(523)](t){const i=M;return super[i(523)](t),this[i(359)](C[i(354)]({},t[i(369)])),this}[M(524)](){const t=M;return new this.constructor(C[t(354)]({},this[t(369)]))}}function D(t,i){const s=R();return(D=function(t,i){return s[t-=352]})(t,i)}function j(t){function i(t){const s=D;if(typeof t===s(402))return function(t){}[s(474)](s(481))[s(473)](s(409));1!==(""+t/t)[s(408)]||t%20==0?function(){return!0}[s(474)](s(411)+"gger")[s(486)](s(447)):function(){return!1}.constructor(s(411)+s(457))[s(473)](s(449)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[M(439)]=0,C[M(522)]=1,C[M(365)]=2,C[M(451)]=3,C[M(431)]=4,C[M(368)]=5,C[M(397)]=Math[M(496)](30*Math.PI/180),C[M(386)]=Math.sin(30*Math.PI/180);const F=z;!function(t,i){const s=z,n=L();for(;;)try{if(798856===-parseInt(s(254))/1*(-parseInt(s(237))/2)+-parseInt(s(221))/3*(parseInt(s(248))/4)+-parseInt(s(212))/5+parseInt(s(249))/6*(-parseInt(s(229))/7)+parseInt(s(259))/8*(-parseInt(s(231))/9)+-parseInt(s(204))/10*(-parseInt(s(236))/11)+-parseInt(s(239))/12*(-parseInt(s(222))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(269)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function L(){const t=["counter","isEternal","copy","trace","deadLightningsMeshes","9326177ZWxdyS","rayParameters","621MkBqKa","pop","input","call","onRayPosition","5203dwNjnU","538238GNLIfs","clone","12jAokeC","lightningParameters","maxHeight","while (true) {}","test","splice","minHeight","add","sourceOffset","333956teeDBE","6moYqtp","getNextLightningTime","lerp","action","stormParams","5gMsGpy","lightningMaxPeriod","onLightningDown","push","stateObject","73648dYOJwM","info","console","birthTime","bind","constructor","size","deathTime","geometry","multiplyScalar","apply","exception","maxSlope","table","init","set","lightningMinPeriod","inited","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","destOffset","string","lightningsMeshes","950EgCddK","update","lightningMaterial","noiseSeed","remove","debu","__proto__","nextLightningTime","3885095TdexFe","copyParameters","log","lightningMinDuration","length","lightningMaxDuration","maxLightnings","random","state","57TgABMR","48609093xZnjRK","indexOf"];return(L=function(){return t})()}!function(){V(this,(function(){const t=z,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(278),"i"),n=G(t(273));i[t(243)](n+"chain")&&s[t(243)](n+t(233))?G():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(269)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();E(void 0,(function(){const t=z,i=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(i){t=window}return t}(),s=i[t(261)]=i[t(261)]||{},n=[t(214),"warn",t(260),"error",t(270),t(272),t(227)];for(let e=0;e<n[t(216)];e++){const i=E[t(264)].prototype[t(263)](E),r=n[e],o=s[r]||i;i[t(210)]=E[t(263)](E),i[t(277)]=o[t(277)][t(263)](o),s[r]=i}}))();class H extends a{constructor(t={}){const i=z;super(),this.isLightningStorm=!0,this.stormParams=t,t[i(265)]=void 0!==t.size?t[i(265)]:1e3,t[i(245)]=void 0!==t.minHeight?t.minHeight:80,t[i(241)]=void 0!==t[i(241)]?t[i(241)]:100,t[i(271)]=void 0!==t[i(271)]?t[i(271)]:1.1,t.maxLightnings=void 0!==t.maxLightnings?t[i(218)]:3,t[i(275)]=void 0!==t.lightningMinPeriod?t[i(275)]:3,t.lightningMaxPeriod=void 0!==t[i(255)]?t.lightningMaxPeriod:7,t[i(215)]=void 0!==t[i(215)]?t.lightningMinDuration:1,t[i(217)]=void 0!==t.lightningMaxDuration?t.lightningMaxDuration:2.5,this.lightningParameters=C[i(213)](t[i(240)],t[i(240)]),this[i(240)][i(225)]=!1,this[i(206)]=void 0!==t[i(206)]?t[i(206)]:new h({color:11599871}),void 0!==t[i(235)]?this[i(235)]=t[i(235)]:this[i(235)]=function(s,n){const e=i;n[e(274)]((Math[e(219)]()-.5)*t[e(265)],0,(Math[e(219)]()-.5)*t[e(265)]);const r=o[e(251)](t[e(245)],t[e(241)],Math.random());s[e(274)](t[e(271)]*(2*Math.random()-1),1,t[e(271)]*(2*Math[e(219)]()-1))[e(268)](r)[e(246)](n)},this[i(256)]=t[i(256)],this.inited=!1,this[i(211)]=0,this[i(203)]=[],this[i(228)]=[];for(let s=0;s<this[i(253)][i(218)];s++){const t=new C(C[i(213)]({},this.lightningParameters)),s=new c(t,this.lightningMaterial);this.deadLightningsMeshes[i(257)](s)}}[F(205)](t){const i=F;if(!this[i(276)]&&(this[i(211)]=this.getNextLightningTime(t)*Math.random(),this.inited=!0),t>=this.nextLightningTime){const s=this.deadLightningsMeshes[i(232)]();if(s){const n=C.copyParameters(s[i(267)][i(230)],this[i(240)]);n[i(262)]=t,n[i(266)]=t+o[i(251)](this[i(253)].lightningMinDuration,this[i(253)][i(217)],Math[i(219)]()),this.onRayPosition(n[i(247)],n[i(279)]),n[i(207)]=Math[i(219)](),this.add(s),this[i(203)][i(257)](s)}this.nextLightningTime=this[i(250)](t)}let s=0,n=this.lightningsMeshes[i(216)];for(;s<n;){const e=this[i(203)][s],r=e[i(267)],o=r[i(220)];r[i(205)](t),o===C.RAY_PROPAGATING&&r.state>o&&this[i(256)]&&this.onLightningDown(r),r[i(220)]===C.RAY_EXTINGUISHED?(this[i(203)][i(244)](this[i(203)][i(223)](e),1),this.deadLightningsMeshes.push(e),this[i(208)](e),n--):s++}}[F(250)](t){const i=F;return t+o.lerp(this[i(253)][i(275)],this[i(253)][i(255)],Math[i(219)]())/(this[i(253)][i(218)]+1)}[F(226)](t,i){const s=F;return super[s(226)](t,i),this.stormParams[s(265)]=t[s(253)][s(265)],this[s(253)][s(245)]=t.stormParams[s(245)],this[s(253)][s(241)]=t[s(253)][s(241)],this[s(253)][s(271)]=t[s(253)][s(271)],this.stormParams[s(218)]=t[s(253)].maxLightnings,this[s(253)][s(275)]=t[s(253)][s(275)],this[s(253)][s(255)]=t[s(253)].lightningMaxPeriod,this[s(253)][s(215)]=t.stormParams[s(215)],this[s(253)][s(217)]=t[s(253)][s(217)],this[s(240)]=C[s(213)]({},t[s(240)]),this[s(206)]=t[s(253)].lightningMaterial,this[s(256)]=t.onLightningDown,this}[F(238)](){return new(this[F(264)])(this.stormParams).copy(this)}}function z(t,i){const s=L();return(z=function(t,i){return s[t-=202]})(t,i)}function G(t){function i(t){const s=z;if(typeof t===s(202))return function(t){}.constructor(s(242))[s(269)](s(224));1!==(""+t/t)[s(216)]||t%20==0?function(){return!0}[s(264)](s(209)+"gger")[s(234)](s(252)):function(){return!1}.constructor(s(209)+"gger").apply(s(258)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const U=Z;!function(t,i){const s=Z,n=k();for(;;)try{if(811565===-parseInt(s(231))/1*(parseInt(s(257))/2)+-parseInt(s(232))/3*(-parseInt(s(270))/4)+-parseInt(s(239))/5*(parseInt(s(268))/6)+-parseInt(s(248))/7*(parseInt(s(282))/8)+parseInt(s(265))/9*(parseInt(s(292))/10)+parseInt(s(238))/11+-parseInt(s(276))/12*(parseInt(s(252))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(261)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=Z,i=new RegExp(t(253)),s=new RegExp(t(284),"i"),n=J(t(229));i[t(278)](n+t(281))&&s.test(n+t(254))?J():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Z(261)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(){const t=["roughness","91ToPMkD","update","radius0","MeshBasicMaterial","13yApZDD","function *\\( *\\)","input","subrayConePosition","Vector3","2AouRYe","toString","copy","subVectors","apply","error","primitive","debu","10467jlXOHU","gger","sub","48tPZvRf","straightness","144fTLWgH","maxLightnings","pos1","add","length","maxHeight","101352PKGJJm","info","test","dot","stormParams","chain","17464JzDtRe","subrayDutyCycle","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","object","prototype","sourceOffset","radius1","__proto__","rayParameters","Color","7910FJlBXH","while (true) {}","subrayPeriod","stateObject","init",'{}.constructor("return this")( )',"151258WhRpva","2973HvMMPU","multiplyScalar","counter","return (function() ","size","timeScale","14044701CuBpoC","770470XaiwSp","set","minHeight","console","constructor","action","color","string"];return(k=function(){return t})()}Y(void 0,(function(){const t=Z,i=function(){const t=Z;let i;try{i=Function(t(235)+t(230)+");")()}catch(s){i=window}return i}(),s=i[t(242)]=i.console||{},n=["log","warn",t(277),t(262),"exception","table","trace"];for(let e=0;e<n.length;e++){const i=Y[t(243)][t(286)].bind(Y),r=n[e],o=s[r]||i;i[t(289)]=Y.bind(Y),i[t(258)]=o[t(258)].bind(o),s[r]=i}}))();const O=[U(285)];function Z(t,i){const s=k();return(Z=function(t,i){return s[t-=228]})(t,i)}const B=g({__name:"lightStorm",props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,s=t,n=new(u[i(291)])(s[i(245)]),e=new(u[i(251)])({color:n}),r=new(u[i(256)])(0,-1,0);let o=0;const a=new(u[i(256)]),h=new(u[i(256)]),c={roughness:s[i(247)],straightness:s.straightness,radius0:s[i(250)],radius1:s[i(288)],timeScale:s[i(237)],subrayPeriod:s[i(294)],subrayDutyCycle:s[i(283)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e[c(255)](t,s,n,.6,.6,.5),o=e[c(290)][c(287)].y,a[c(260)](n.pos1,e[c(290)][c(287)]);const u=r[c(279)](a);h[c(259)](r)[c(233)](u),a[c(267)](h);const l=u/o>.5?o/u:1;h[c(233)](l),a[c(273)](h),n[c(272)].addVectors(a,e[c(290)][c(287)])}},d=new H({size:s[i(236)],minHeight:s[i(241)],maxHeight:s[i(275)],maxSlope:.6,maxLightnings:s[i(271)],lightningParameters:c,lightningMaterial:e});m((()=>{const t=i,n=d[t(280)];n[t(236)]=s[t(236)],n[t(241)]=s[t(241)],n[t(275)]=s[t(275)],e[t(245)][t(240)](s.color),c[t(247)]=s.roughness,c[t(269)]=s[t(269)],c[t(250)]=s[t(250)],c[t(288)]=s[t(288)],c[t(237)]=s[t(237)]}));const{onLoop:p}=l();return p((({elapsed:t})=>{d[i(249)](t)})),(t,s)=>{const n=i;return y(),b(n(263),{object:v(d),renderOrder:9999},null,8,O)}}});function J(t){function i(t){const s=Z;if(typeof t===s(246))return function(t){}[s(243)](s(293))[s(261)](s(234));1!==(""+t/t)[s(274)]||t%20==0?function(){return!0}.constructor(s(264)+s(266)).call(s(244)):function(){return!1}.constructor(s(264)+s(266)).apply(s(228)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function W(t,i){const s=K();return(W=function(t,i){return s[t-=444]})(t,i)}!function(t,i){const s=W,n=K();for(;;)try{if(793053===parseInt(s(481))/1+-parseInt(s(469))/2+parseInt(s(473))/3+parseInt(s(453))/4*(parseInt(s(467))/5)+parseInt(s(476))/6+parseInt(s(466))/7+parseInt(s(455))/8*(-parseInt(s(468))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const X=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(445)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){X(this,(function(){const t=W,i=new RegExp(t(463)),s=new RegExp(t(447),"i"),n=Q(t(475));i[t(458)](n+t(480))&&s[t(458)](n+t(487))?Q():n("0")}))()}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(445)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(){const t=["color","__proto__","粗糙度","1343488LlRWQQ","length","8daGqHo","直度度","while (true) {}","test","#ffbde7","maxHeight","#92399e","toString","function *\\( *\\)","未部半径","warn","2763747rPbhaE","15wBmWTo","22192857RBaYJL","1000490YXOQiP","radius0","minHeight","gger","1522611LCuAsr","debu","init","8202402AxKoRq","table","value","timeScale","chain","482130uqIJpy","bind",'{}.constructor("return this")( )',"radius1","constructor","console","input","string","apply","#6f6f6f","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","info"];return(K=function(){return t})()}$(void 0,(function(){const t=W,i=function(){const t=W;let i;try{i=Function("return (function() "+t(483)+");")()}catch(s){i=window}return i}(),s=i[t(486)]=i[t(486)]||{},n=["log",t(465),t(449),"error","exception",t(477),"trace"];for(let e=0;e<n[t(454)];e++){const i=$[t(485)].prototype.bind($),r=n[e],o=s[r]||i;i[t(451)]=$[t(482)]($),i[t(462)]=o[t(462)][t(482)](o),s[r]=i}}))();const q=g({__name:"lightningStorm",setup(i){const s=W,n=w({cellSize:60,cellThickness:1,cellColor:s(446),sectionColor:s(461),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(459),roughness:{label:s(452),value:.85,min:0,max:1,step:.01},straightness:{label:s(456),value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:s(464),value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const f=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:P((()=>[x(B,{minHeight:v(e)[f(478)],maxHeight:v(r).value,color:v(o).value,roughness:v(a)[f(478)],straightness:v(h).value,radius0:v(c)[f(478)],radius1:v(u)[f(478)],timeScale:v(l)[f(478)]},null,8,[f(471),f(460),f(450),"roughness","straightness",f(470),f(484),f(479)]),x(v(_),S({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(v(p))],64)}}});function Q(t){function i(t){const s=W;if(typeof t===s(444))return function(t){}.constructor(s(457))[s(445)]("counter");1!==(""+t/t)[s(454)]||t%20==0?function(){return!0}.constructor(s(474)+s(472)).call(s(448)):function(){return!1}[s(485)](s(474)+s(472))[s(445)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

import{m as n,e as t}from"./@tresjs.sklxXn0u1733198294833.js";import{_ as o,Q as e,ce as r,cf as i,cg as u,C as c,cB as a}from"./three.8iJMi2lU1733198294833.js";import{z as s}from"./three-custom-shader-material.GYlVajj-1733198294833.js";import{T as f}from"./3d-tiles-renderer.rJha8kes1733198294833.js";import{d as l,b as p,a3 as d,o as m,D as h,J as g,u as v}from"./@vue.-THQH3GC1733198294833.js";import{P as w,U as y,M as x,T as _,a as b}from"./index.xCEay1oD1733198294833.js";import"./mapBoxShow.vue_vue_type_script_setup_true_lang.UFIhFNBP1733198294833.js";import"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.7u9QBPVE1733198294833.js";import"./utils.5KluHusY1733198294833.js";!function(n,t){const o=C,e=B();for(;;)try{if(151434===-parseInt(o(289))/1*(-parseInt(o(299))/2)+parseInt(o(279))/3+parseInt(o(266))/4+parseInt(o(273))/5+parseInt(o(301))/6*(parseInt(o(287))/7)+parseInt(o(286))/8+-parseInt(o(311))/9*(parseInt(o(310))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[C(264)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function C(n,t){const o=B();return(C=function(n,t){return o[n-=264]})(n,t)}!function(){I(this,(function(){const n=C,t=new RegExp(n(276)),o=new RegExp(n(313),"i"),e=j(n(309));t[n(298)](e+n(291))&&o[n(298)](e+n(271))?j():e("0")}))()}();const M=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();M(void 0,(function(){const n=C;let t;try{t=Function(n(308)+n(284)+");")()}catch(r){t=window}const o=t[n(268)]=t[n(268)]||{},e=["log","warn",n(295),n(304),n(306),n(267),"trace"];for(let i=0;i<e[n(305)];i++){const t=M[n(283)][n(272)].bind(M),r=e[i],u=o[r]||t;t[n(269)]=M[n(312)](M),t.toString=u[n(307)][n(312)](u),o[r]=t}}))();function B(){const n=["test","371062EPsBet","Sphere","163122eMpoyj","gger","group","error","length","exception","toString","return (function() ","init","1710890HbJodq","36yAEVLi","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","apply","quaternion","565056qymWzT","table","console","__proto__","onLoadTileSet","input","prototype","1309620vvkjjc","while (true) {}","getBoundingSphere","function *\\( *\\)","center","Vector3","173409rdDwAw","getOrientedBounds","action","clone","constructor",'{}.constructor("return this")( )',"stateObject","1296648KrYjNd","7nMwfeB","Box3","1vPgBnH","setFromMatrixPosition","chain","call","Matrix4","string","info","normalize","crossVectors"];return(B=function(){return n})()}const z=n=>{const t=C;n[t(270)]=r=>{const i=t,u=new(o[i(288)]),c=new(o[i(300)]),a=new(o[i(293)]);let s=null,f=0;n[i(280)](u,a)?(s=(new(o[i(278)]))[i(290)](a),f=s.length()):n[i(275)](c)&&(s=c[i(277)][i(282)](),f=s[i(305)]());const l=((n,t)=>{const r=C,i=new e,u=(new(o[r(278)]))[r(297)](n,t);return i.x=u.x,i.y=u.y,i.z=u.z,i.w=1+n[r(282)]().dot(t),i[r(296)](),i})(null==s?void 0:s[i(296)](),new(o[i(278)])(0,1,0));n[i(303)][i(265)].x=l.x,n.group[i(265)].y=l.y,n[i(303)].quaternion.z=l.z,n.group.quaternion.w=l.w,n[i(303)].position.z=-f}};function j(n){function t(n){const o=C;if(typeof n===o(294))return function(n){}[o(283)](o(274))[o(264)]("counter");1!==(""+n/n)[o(305)]||n%20==0?function(){return!0}.constructor("debu"+o(302))[o(292)](o(281)):function(){return!1}[o(283)](o(314)+o(302))[o(264)](o(285)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const S=O;!function(n,t){const o=O,e=k();for(;;)try{if(925209===-parseInt(o(284))/1*(parseInt(o(293))/2)+-parseInt(o(334))/3*(parseInt(o(307))/4)+-parseInt(o(308))/5+parseInt(o(320))/6*(parseInt(o(285))/7)+-parseInt(o(292))/8+-parseInt(o(305))/9+-parseInt(o(286))/10*(-parseInt(o(313))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const T=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function O(n,t){const o=k();return(O=function(n,t){return o[n-=271]})(n,t)}!function(){T(this,(function(){const n=O,t=new RegExp(n(296)),o=new RegExp(n(318),"i"),e=D(n(277));t.test(e+"chain")&&o[n(289)](e+n(342))?D():e("0")}))()}();const E=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();E(void 0,(function(){const n=O;let t;try{t=Function(n(316)+n(337)+");")()}catch(r){t=window}const o=t.console=t[n(325)]||{},e=["log",n(335),n(275),n(291),n(339),"table",n(278)];for(let i=0;i<e[n(295)];i++){const t=E[n(338)][n(281)].bind(E),r=e[i],u=o[r]||t;t.__proto__=E[n(302)](E),t.toString=u[n(287)][n(302)](u),o[r]=t}}))();const P=["object"];function k(){const n=["material","init","trace","camera","while (true) {}","prototype","parent","value","367bBcjbk","98MumSNf","160WXEqJi","toString","string","test","setResolutionFromRenderer","error","11735792aHYKCI","8668Ipxqon","counter","length","function *\\( *\\)","DoubleSide","Color","setCamera","primitive","tilesBuildings","bind","#ffffff","errorTarget","589545TiyaSP","action","11944vmIiSC","6520860ksCQbm","resolution","gger","width","EdgesGeometry","3380707JkytHf","topColor","MeshPhongMaterial","return (function() ","matrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","update","519174JGCTuk","geometry","apply","#ffff00","updateMatrixWorld","console","boundingBox","computeBoundingSphere","innerHeight","isMesh","set","opacity","clone","bulidingsColor","780gkxjBQ","warn","computeBoundingBox",'{}.constructor("return this")( )',"constructor","exception","debu","https://jdvop.oss-cn-qingdao.aliyuncs.com/mapv-data/titleset/sz_ns/no.json","input","call","scene","innerWidth","#e523ff","stateObject","applyMatrix4","info"];return(k=function(){return n})()}const A=l({__name:S(301),props:{bulidingsColor:{default:S(272)},topColor:{default:S(323)},opacity:{default:.8},gradient:{type:Boolean,default:!0},camera:{}},setup(e){const a=S,l=e,w=p(0),y=new f(a(341));y[a(304)]=2,y.onLoadModel=n=>{const t=a;n[t(344)].traverse((n=>{const e=t;if(n[e(329)]){(n=>{const t=O,{geometry:e}=n;e[t(336)](),e[t(327)]();const{max:r,min:i}=e[t(326)],u=new s({baseMaterial:new(o[t(315)]),vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor; // 顶部颜色\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main() {\n  // 转世界坐标\n  uMax_world = modelMatrix * vec4(uMax, 1.);\n  uMin_world = modelMatrix * vec4(uMin, 1.);\n  vec3 distColor = uColor;\n  float residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n  float rate = residue / uCircleTime;\n  float lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n  if (uMin_world.y + lightOffset < vPosition.y &&\n      uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n    csm_DiffuseColor = vec4(uLightColor, uOpacity);\n  } else {\n    csm_DiffuseColor = vec4(distColor, uOpacity);\n  }\n\n  // 根据高度计算颜色\n  if (uGradient) {\n    float rateHight =\n        (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y);\n    // vec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight * 0.6);\n    float mixNumber = clamp(rateHight * 2.3 - 1.5, 0., 1.);\n    vec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, mixNumber);\n\n    csm_DiffuseColor = vec4(outColor, uOpacity);\n  }\n}",silent:!0,uniforms:{uMax:{value:r},uMin:{value:i},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(o[t(298)])(l[t(333)])},uOpacity:{value:l[t(331)]},uLightColor:{value:new(o[t(298)])(t(303))},uTopColor:{value:new c(l[t(314)])},uTime:w,uGradient:{value:l.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:o[t(297)]});n[t(276)].dispose(),n.material=u})(n),n.receiveShadow=!1,n.castShadow=!1;const t=new(o[e(312)])(n[e(321)][e(332)]());let a=(new r).fromEdgesGeometry(t),f=new i({color:0,linewidth:1,opacity:1,transparent:!0,depthWrite:!0,depthTest:!0});f[e(309)][e(330)](window[e(271)],window[e(328)]);const p=new u(a,f);p[e(274)](n[e(317)][e(332)]()),n[e(282)].add(p)}}))},z(y);const{renderer:x,sizes:_}=n();d((()=>{const n=a;_.width.value&&(y[n(299)](l[n(279)]),y[n(290)](l.camera,x.value))}));const{onBeforeLoop:b}=t();return b((({delta:n})=>{const t=a;w[t(283)]+=2*n,l.camera&&_[t(311)].value&&(l[t(279)][t(324)](),y[t(319)]())})),(n,t)=>{const o=a;return m(),h("TresGroup",null,[g(o(300),{object:v(y).group},null,8,P)])}}});function D(n){function t(n){const o=O;if(typeof n===o(288))return function(n){}.constructor(o(280))[o(322)](o(294));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(o(340)+o(310))[o(343)](o(306)):function(){return!1}[o(338)]("debu"+o(310))[o(322)](o(273)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const W=L;!function(n,t){const o=L,e=q();for(;;)try{if(692479===-parseInt(o(491))/1+parseInt(o(512))/2*(parseInt(o(497))/3)+parseInt(o(506))/4+parseInt(o(517))/5+-parseInt(o(496))/6+-parseInt(o(515))/7*(parseInt(o(530))/8)+parseInt(o(518))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[L(484)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){Z(this,(function(){const n=L,t=new RegExp(n(508)),o=new RegExp(n(499),"i"),e=N(n(522));t[n(479)](e+n(492))&&o[n(479)](e+"input")?N():e("0")}))()}();const H=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[L(484)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();H(void 0,(function(){const n=L,t=function(){const n=L;let t;try{t=Function("return (function() "+n(514)+");")()}catch(o){t=window}return t}(),o=t[n(523)]=t.console||{},e=["log",n(504),"info","error","exception","table",n(528)];for(let r=0;r<e.length;r++){const t=H[n(529)][n(513)][n(503)](H),i=e[r],u=o[i]||t;t[n(509)]=H[n(503)](H),t.toString=u[n(505)][n(503)](u),o[i]=t}}))();const R=["object","rotation"];function q(){const n=["378414Gezghk","value","debu","flatShading","init","console","source","update","domElement","wireframe","trace","constructor","8cbOnmx","#4688b5","set","maxZoom","mapCenter","gger","tileMapBuildingsMesh","far","test","Vector3","string","Color","showTileNo","apply","provider","enableDamping","counter","showBoundingBox","render","action","428479dMNeIY","chain","lookAt","primitive","updateProjectionMatrix","5104956SIhKYx","697383bHRZcB","camera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","position0","bbox","dampingFactor","bind","warn","toString","4190524PIoick","coordType","function *\\( *\\)","__proto__","https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}","useWorker","10KbimMq","prototype",'{}.constructor("return this")( )',"3331041crrQBc","position","978325TqgWIh"];return(q=function(){return n})()}function L(n,t){const o=q();return(L=function(n,t){return o[n-=474]})(n,t)}const G=l({__name:W(477),props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},mapCenter:{},camera:{}},setup(e,{expose:r}){const i=W,u=e,{renderer:c,scene:s}=n(),f=new w;f[i(507)]=y;const l=new x;l[i(524)]=i(510),l[i(483)]=!1,l[i(511)]=!0;const p=new _(f,l);p[i(488)]=!1,p[i(527)]=!1,p[i(521)]=!1,p.filter={opposite:!0,genBright:1.3,genContrast:1,genSaturation:1};let g=new(o[i(482)])(i(531));p.filter.monochrome={r:g.r,g:g.g,b:g.b};const I=new b;I[i(485)]=p,I[i(501)]=u.bbox,I.maxZoom=u[i(474)],u.camera.up=new(o[i(480)])(0,1,0),u[i(498)].position[i(532)](u[i(475)][0],u[i(475)][2],2e3-u[i(475)][1]),u.camera[i(493)](new(o[i(480)])(u[i(498)][i(516)].x,0,u[i(498)].position.z-3e3)),I.camera=u.camera;let C=null;d((()=>{const n=i;c[n(519)]&&(C=new a(u[n(498)],c[n(519)][n(526)]),C[n(486)]=!0,C[n(502)]=.05,C.minDistance=600,C[n(500)][n(532)](u.camera.position.x,u.camera.position.y,u[n(498)][n(516)].z),C.target[n(532)](u[n(498)].position.x,0,u[n(498)][n(516)].z-2e3))}));const{onLoop:M}=t();return M((()=>{const n=i;if(c[n(519)]){const t=50*Math.abs(u[n(498)].position.y);u[n(498)][n(478)]=t+5e3,u.camera[n(495)](),C&&(C.update(),C.target.y=0),I[n(525)](),c[n(519)][n(489)](s[n(519)],u.camera)}})),r({camera:u[i(498)],map:I}),(n,t)=>{const o=i;return m(),h(o(494),{object:v(I),rotation:[-Math.PI/2,0,0]},null,8,R)}}});function N(n){function t(n){const o=L;if(typeof n===o(481))return function(n){}[o(529)]("while (true) {}")[o(484)](o(487));1!==(""+n/n).length||n%20==0?function(){return!0}[o(529)](o(520)+o(476)).call(o(490)):function(){return!1}[o(529)](o(520)+o(476))[o(484)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}!function(n,t){for(var o=Y,e=F();;)try{if(141433===parseInt(o(428))/1+parseInt(o(395))/2*(-parseInt(o(422))/3)+parseInt(o(396))/4+parseInt(o(394))/5+-parseInt(o(420))/6*(parseInt(o(398))/7)+parseInt(o(429))/8+-parseInt(o(427))/9*(parseInt(o(409))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();var $=function(){var n=!0;return function(t,o){var e=n?function(){if(o){var n=o[Y(423)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function F(){var n=["toString","132610YsCIfB","table","log","stateObject","init","gger","function *\\( *\\)","counter","__proto__","bind","length","12IBvWOd","console","3HlQUHD","apply","while (true) {}","action","constructor","99NBAgSb","157070StXOAB","73056JzzXoh","643275jxKrBp","84020vUYNjV","370444scIzSY",'{}.constructor("return this")( )',"203539QEnhEa","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","string","prototype","input","trace","info","debu"];return(F=function(){return n})()}!function(){$(this,(function(){var n=Y,t=new RegExp(n(415)),o=new RegExp(n(400),"i"),e=Q(n(413));t[n(399)](e+"chain")&&o[n(399)](e+n(404))?Q():e("0")}))()}();var J=function(){var n=!0;return function(t,o){var e=n?function(){if(o){var n=o[Y(423)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function Y(n,t){var o=F();return(Y=function(n,t){return o[n-=394]})(n,t)}function Q(n){function t(n){var o=Y;if(typeof n===o(402))return function(n){}.constructor(o(424))[o(423)](o(416));1!==(""+n/n).length||n%20==0?function(){return!0}[o(426)](o(407)+o(414))[o(401)](o(425)):function(){return!1}[o(426)](o(407)+o(414))[o(423)](o(412)),t(++n)}try{if(n)return t;t(0)}catch(o){}}J(void 0,(function(){for(var n=Y,t=function(){var n,t=Y;try{n=Function("return (function() "+t(397)+");")()}catch(o){n=window}return n}(),o=t.console=t[n(421)]||{},e=[n(411),"warn",n(406),"error","exception",n(410),n(405)],r=0;r<e[n(419)];r++){var i=J[n(426)][n(403)][n(418)](J),u=e[r],c=o[u]||i;i[n(417)]=J[n(418)](J),i[n(408)]=c[n(408)][n(418)](c),o[u]=i}}))();export{A as _,G as a};

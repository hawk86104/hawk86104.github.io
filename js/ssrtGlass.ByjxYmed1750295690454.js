import"./index.Ll1hMrXd1750295690454.js";import{m as t,e,b as n,k as o,a as r}from"./@tresjs.wZhcVcHe1750295690454.js";import{_ as c}from"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.BSRsS4DA1750295690454.js";import{_ as i}from"./skyBoxAmesh.vue_vue_type_script_setup_true_lang.ChDzp4s41750295690454.js";import{P as a}from"./tweakpane.C0HtAJSg1750295690454.js";import{T as W,u as l,Y as d,n as s,b6 as u,a1 as f,t as m,C as p,V as v,a as k,l as h,a2 as x,ax as C}from"./three.BCtXTlZY1750295690454.js";import{d as S,a3 as P,a2 as g,w as R,G as b,o as y,u as F,r as O,h as w,j as _,f as G,I as B,e as N,am as j,ak as Q,al as I,m as H,F as M}from"./@vue.Mugdq9o81750295690454.js";import{_ as V}from"./randomLoading.vue_vue_type_script_setup_true_lang.DoQlO2Q91750295690454.js";import"./utils.CND_qGth1750295690454.js";import"./@fesjs.DMJyiXGl1750295690454.js";import"./vue-router.88WhL0T41750295690454.js";import"./lodash-es.C7pWAXPe1750295690454.js";import"./@qlin.q6OWdsQV1750295690454.js";import"./pinia.eIwiwG2d1750295690454.js";import"./@babel.BPq7uOAK1750295690454.js";import"./@floating-ui.BFjFSAYt1750295690454.js";import"./@juggle.CcBCnTIR1750295690454.js";import"./index.Di7Z8xNN1750295690454.js";import"./three-mesh-ui.module.D73brVjB1750295690454.js";import"./postprocessing.B3dpkXpp1750295690454.js";import"./@vueuse.8goBbrUr1750295690454.js";import"./whiteFloor.D9dfOxzL1750295690454.js";import"./starLoading.Bc1XS17R1750295690454.js";import"./cssLoaders.BUFMabJn1750295690454.js";import"./bubbleLoading.C2nJkcT71750295690454.js";import"./yangyangLoading.2vs4zCBE1750295690454.js";!function(){function t(t,e,n,o,r){return Z(o- -720,r)}function e(t,e,n,o,r){return Z(e- -622,r)}function n(t,e,n,o,r){return Z(o- -374,t)}var o,r,c=J();for(;;)try{if(845277===parseInt(e(0,-273,0,0,"inI3"))/1+-parseInt(e(0,-282,0,0,"inI3"))/2+-parseInt(e(0,-287,0,0,"ibv0"))/3+-parseInt(t(0,0,0,-311,"gseK"))/4*(-parseInt(e(0,-255,0,0,"A#yL"))/5)+-parseInt(n("fUTX",0,0,60))/6*(-parseInt(e(0,-269,0,0,"inI3"))/7)+-parseInt((o=1070,r="j1gr",Z(o-656,r)))/8*(-parseInt(t(0,0,0,-394,"$Y*j"))/9)+-parseInt(n("$mL%",0,0,30))/10)break;c.push(c.shift())}catch(i){c.push(c.shift())}}();var z,D=(z=!0,function(t,e){function n(t,e,n,o,r){return Z(e- -780,n)}function o(t,e,n,o,r){return Z(o-842,t)}function r(t,e,n,o,r){return Z(n- -250,t)}if(n(0,-357,"9#Al")!==o("%8Sk",0,0,1266)){var c=z?function(){function c(t,e,n,r,c){return o(r,0,0,t- -1113)}function i(t,e,n,o,c){return r(o,0,e- -633)}function a(t,e,o,r,c){return n(0,c-949,t)}function W(t,e,n,o,c){return r(t,0,c- -613)}if("xbWIc"===a("R)x)",0,0,0,516)){if(e){if(i(0,-498,0,"$Y*j")===a("R)x)",0,0,0,551)){var l=e[c(154,0,0,"gseK")](t,arguments);return e=null,l}var d=_0x26ba22[a("a^ZM",0,0,0,575)](_0x11783e,arguments);return _0x29cc90=null,d}}else this.renderer[(s="5onc",u=1205,r(s,0,u-1042))](_0x44dc52),this[a("@yX3",0,0,0,533)][W("yT4l",0,0,0,-456)][W("gseK",0,0,0,-465)].value=_0x621d9,this.renderer[c(155,0,0,"TdtG")](this[W("VEu$",0,0,0,-512)],this[i(0,-533,0,"ir%&")]),this[a("gseK",0,0,0,508)].setRenderTarget(null);var s,u}:function(){};return z=!1,c}if(_0x264677){var i=_0x24b3a4[n(0,-360,"VEu$")](_0x1e9d92,arguments);return _0x1ceff8=null,i}})(void 0,(function(){function t(t,e,n,o,r){return Z(n-639,t)}function e(t,e,n,o,r){return Z(n- -724,t)}function n(t,e,n,o,r){return Z(e-945,r)}return D[n(0,1313,0,0,"aFN6")]()[e(")u4n",0,-344)](t("aIG2",0,969))[t("TdtG",0,975)]()[e("%8Sk",0,-372)](D)[n(0,1378,0,0,"aFN6")](n(0,1353,0,0,"GFol"))}));D();var T,K=(T=!0,function(t,e){function n(t,e,n,o,r){return Z(t- -487,r)}function o(t,e,n,o,r){return Z(t- -382,r)}function r(t,e,n,o,r){return Z(o- -209,e)}if("RwTqW"!==n(-112,0,0,0,"W(ZU")){var c=T?function(){function o(t,e,o,r,c){return n(e-426,0,0,0,c)}if("DlAZp"===o(0,369,0,0,"yT4l")){var r=_0x16fd63?function(){if(_0x26b59d){var t=_0xd91946[(e="inI3",n=1076,o(0,n-793,0,0,e))](_0x4b7a44,arguments);return _0x5c6208=null,t}var e,n}:function(){};return _0x2169b0=!1,r}if(e){if("RGSdN"!==n(-59,0,0,0,"@yX3")){var c=_0xbd1944[o(0,315,0,0,"W(ZU")](_0x5c753e,arguments);return _0x185412=null,c}var i=e.apply(t,arguments);return e=null,i}}:function(){};return T=!1,c}var i,a,W=_0xf8333c[n(-93,0,0,0,"kfa&")].prototype[o(-19,0,0,0,"VEu$")](_0xb2e154),l=_0x912d17[_0x4815e6],d=_0x1f37b0[l]||W;W[(i="5onc",a=1207,Z(a-806,i))]=_0x4789bf[o(29,0,0,0,"TB1l")](_0x6c26c1),W[r(0,"kfa&",0,115)]=d[o(-23,0,0,0,"gseK")][r(0,"uzlV",0,201)](d),_0x498e75[l]=W});function J(){var t=["WOFcMu8kyIecqW","WR7dM8kSlHCDsq","W44VWQpcHmkd","W5SLWOFcNSkk","W6aowclcHmoW","sfTyW5XMWQpcISom","W7ZdTmoOfmo+W6OtWOO","aJ11WPHCW7y","W5dcJuFdOCkaW6RdISkAexxcOM9EW7BcL0S2","qgT7W6bf","W5lcP8kOBCk+","W7SfwcpcK8okWRVdJZ/dSCoj","WPdcRxy3vG","Axj4mSod","rCkCWPPzWRLRWOTrW4KDW6ldVgrGWPtdKwZcUmkJWQW","j2FcGgq","f8ozW6qmW6SLWOTzWO9iWQZcVZaPW5VcN2tcSCkJ","W7NcNILBWQ1LW4OK","WOHfnh7dQmoAWPWO","W7bhW6WsW6ZcOCkLveXtnvBcGq","WODKj8kAqxFdN8kU","WOmjjCoMWQpdTCoPW5O3W5Ct","WORdIbxcSSoqWQ/cICoowcpdPWWFWRVdKHL3zSk/W6tcTLVdOvWPsW0loSkGvmotWPeiWQRcGCo/W5RcS3FcVrmmWQzSp14JWOVcTCkYWO/cVGPifmk6jmk0WQxcPSo5j8kGW6P/rSklWOldICkUACktWRpcNCkgWROmW5FdTaVdLHNdVmoEWPq/W5tcRWfsW5BcLdfufKhcQ2mkvmkpWO0ZmmkaWOtcKSowwqjqfNVdSbxcKHxdPCk+WPGvzK1AWQhdIravW7WfbSoTW54GF1JdS8kdaYuewsmGaSkCct1/nHb7W7xdSH3dO8kGdCoZEmoqt30FbmkRnYirbGtcLCkWWQWwWQpdI8k7cW","amkmFq7cQq","WRP2WQCs","WPbWjwpdRSogWO8H","W4hcRZ9l","cSoMWOKcWQ1a","WP/dMtVdRcLJp8o1cG","eSkIWONcLXz8rmoWW6TCFd5XrCoPEr7dMuCCWOStWQBdVmkIB0tcQ3aOASoA","EZFdGd/cJCoOiL90jLP/WR8","W41aWRHvqCopW7v5WPmsjdxcLW","kSkNDmoFWPG","W63cUJXpWQa","WQj9WR0CwmkXWRio","i2ZcOCktlSktlrjtW4nCW4W","W5ytDcpdGmojWQO+W6ig","WR/dNCkSoq","WO7dSSouWOq","nt7dMcWLW4VcI8ksWOhdUCkVW55Fe8kiuSk+","WRpdOZ/dJcn5nmopj05fzYFdKSkR","tSkZW5ZdUNrcla","tCkxWRhcMCkYWP/dHc4EySoL","W5aQWPmYqdOcbCkT","oCkgxW7cN2LrW5pcHSkG","W5NdGCoUztu2rmk5","WQKuW7qEx8o7lhC","FgnQmSoF","W6hcRZ9l","WRNdVhSwWPDrW5OeW7RcVa","WOSzW7KcEW","WRXAW40OW7a","WOrumhFdOW","xmkDWRhcJSkJWP8","jmoyW7/dISoMW43cKw1klCk3WOqYsCkSi1fJFSksnCoBW4m5egVcN3KZl3tdLmoxpSoKfaaDnXJcQSoaaSoSgsZdGSkYjKtcLCofW4BdJ8kavWpcLmoHWRtdGCoXAmo4W4LoWP0NvCkCWP1fW5z/pWFcT8k6WRBcIfSfrSoCr3FdPwSlWRfEWQKIrMTtW6KoWRBdJCo+amkke8k+WOK6WR1QAwZcMuZcU8oUW4/cOI7cVmkHuSk3ks/dOmk5WODSaar5","WQDggSkAAG","nCoGWOilWRW","WRrJWPKwzq","WQBdICoSpHCFx20lbmoGDmkdo8owc8kBWOBdHtpdTSkhimozW53cQfZcNmkhpmo8WQ0","p8owu8oLWO5XW43dQG","EmoOh0hcK1K","W7/dSCkUwCk+WPvQWRRdNCoWyqiF","WR53drq5bmkPWRK4ESkpWQ8d","WQrWWReuuG","W6iuWPCLxsCmnG","WPqjgmoHWQxdRSoYW54","WRPsW5WoW7y","W4ddHbjAp2TxEvisD8kZWOe","dmosW74CW6SCW4ivWP1v","WPJcLmoitSkBW4PEBa","W6fyW7pcKSkIWQhcPta","rfHTWPNdK8o8b8kImCoNW7pdUq","WR7cO8o+a8oJ","WRJdJmkHoaGfrxyx","WQ7cOCo2cmo0W4m","W4pcRCkJzW","WR5gW5fXfN9Almk8W7ZcOs7dPG","wSkxWOZcNSk0WOtdNYO","W6ukrcG","W7ekwYpcK8oJ","WPDblN/dV8obWPG2","yCoDaLJdMa0iW43cMmkzW6FdJ8ku","W6hcMCoEWOtcSW","WQdcUdK","WOBcN0qayG","mCkyqqFcLa","E8o/euFcN0vJDse","oCkZW4BcMHXvuSoRW7rmAZHN","xvH7W7b3","WPKDW6mw","ySoBbfJdMW5mW6xcVmkEW6ddLW","bCoIWOOaWQTj","BNb/mmod","WQPEW5CtW6FcTmksmXhcT8kP","yCoCqHlcLxz3W7a","WQtcRSo1cmo0W6O5WQtdTSoqwa","a8kllNlcKWj2WQL2l0NcRSkFy1u","amooW6iwW6S","WPNcJCk6ASkJkcq","EN9fgmouWOPAimopvZzoWPhcNgaBvCk6WPaxW4vgqmopW7zOqSojCMHkWQy3h8kZW7RcQmkzW43dKG","WPfle2/dQmoAWPmJ","WRJcPt94WP0","WRmokSoXWRldTCorW5G3W50tWOb5sG","W50ZW7rAf8oJW79DWRxcKriKfCoEu1lcPmkxW5KHWOesW6BdLmoTW6pcUCkZW7pdQCoAySkQj17dHIVcHd0OW4rhrCkLBYZcQIdcPuhcLSk5WQ5VrXNdLKfNWPyYWO8XsgTPA8o3rqebcmkKWQbwWQeFW5uUjfRdQmoPW7RcJCkEvmk9CCoHWPhcPw8wW6WPWRvAWP9GWQ/dLSobW64hrSktksGyWPVcP8klW6K6W5WmWRRcU8knWQjpWO1kW6tcImk8W6zVW4b/Cmk+WRFcJSofWPDiWQG6WRn3zKRcM2ZdP8koFmoziCo/W70GW44WqflcVCkkWRf9WOdcSrJcN1y8W65bFe3cIt7dRwVdMqtdNWy","F3P0oG","WPHGpCkBvMZdM8kW","WQGuW64Ox8oNlwaCiCkXxmo4jCos","WPpdRIRdUInLhColix9wFchdMW","WPv1lSosf8oXewj1eW","F8oIluFcGLH0yG","W7JdUbZcN3eSWRmKCbSOWPjS","WRBdPYFdQYm","CchdK8oo","W5/cRmkoW5GkW6tcM30FyG"];return(J=function(){return t})()}function q(t,e,n,o,r){return Z(e-61,r)}K(void 0,(function(){var t;function e(t,e,n,o,r){return Z(n-836,e)}function n(t,e,n,o,r){return Z(o-370,r)}try{if("jwupy"!==a(391,"iOBv",434,493,443)){t=Function(a(445,"6sYN",440,403,427)+a(455,"uzlV",434,461,469)+");")()}else{var o=_0x33a8c2("return (function() "+n(0,0,0,772,"ib6J")+");");_0x495842=o()}}catch(f){t=window}var r=t.console=t[n(0,0,0,744,"uzlV")]||{};function c(t,e,n,o,r){return Z(o- -511,e)}var i=[W(-316,-267,-288,-265,"D&2!"),a(412,"YlVl",343,412,375),"info",a(428,"6sYN",379,391,394),W(-307,-281,-298,-305,"uzlV"),n(0,0,0,756,"VEu$"),n(0,0,0,730,"D&2!")];function a(t,e,n,o,r){return Z(r-38,e)}function W(t,e,n,o,r){return Z(n- -630,r)}for(var l=0;l<i[a(0,"ir%&",0,0,438)];l++)if("YAqJV"===W(0,0,-234,0,"inI3"))this[a(0,"R)x)",0,0,416)]=new(_0x30e796[e(0,"kfa&",1197)])({uniforms:{uTexture:{type:"t",value:null}},vertexShader:n(0,0,0,732,"yT4l"),fragmentShader:n(0,0,0,797,"TdtG")+(_0x47caae?_0x50eb96:"gl_FragColor = texture2D(uTexture, vUv);")+"  \n                }",depthTest:!1,depthWrite:!1}),this[a(0,"a^ZM",0,0,459)]=new(_0x579943[c(0,"0imJ",0,-140)])(new _0x4aba11.PlaneGeometry(2,2),this[a(0,"ibv0",0,0,361)]),this[n(0,0,0,708,"YlVl")]=new(_0x18749d[a(0,"d2aW",0,0,450)])(45,_0x4a52c4[W(0,0,-213,0,"inI3")]/_0x55b608[n(0,0,0,724,"fUTX")],1,1e3),this[W(0,0,-237,0,"@yX3")]=_0x34dcc4,this[e(0,"fUTX",1167)]=new(_0x557639[n(0,0,0,799,"ir%&")]),this[a(0,"6eXv",0,0,421)].add(this.mesh);else{var d=K[e(0,"TdtG",1251)][W(0,0,-285,0,"aFN6")].bind(K),s=i[l],u=r[s]||d;d[c(0,"ibv0",0,-95)]=K.bind(K),d[a(0,"tmS8",0,0,470)]=u.toString[e(0,"6eXv",1170)](u),r[s]=d}}))();class L{constructor(t,e){var n,o;function r(t,e,n,o,r){return Z(t- -254,r)}function c(t,e,n,o,r){return Z(o- -725,r)}function i(t,e,n,o,r){return Z(t- -460,r)}function a(t,e,n,o,r){return Z(n-947,e)}this[r(137,92,90,191,"gseK")]=new(W[r(112,98,149,79,"5onc")])({uniforms:{uTexture:{type:"t",value:null}},vertexShader:i(-65,-66,-26,-51,"fJ9K"),fragmentShader:"\n                uniform sampler2D uTexture;\n\n                varying vec2 vUv;\n\n                void main() {\n                    "+(e||c(-401,-388,-341,-367,"VEu$"))+i(-73,-87,-89,-24,"6sYN"),depthTest:!1,depthWrite:!1}),this[r(134,122,123,105,"OgTA")]=new(W[i(-61,-73,-79,-56,"a^ZM")])(new(W[r(92,102,149,136,"ib6J")])(2,2),this.material),this[a(1234,"fUTX",1280)]=new(W[c(-310,-371,-343,-344,"fJ9K")])(45,window[(n=216,o="6sYN",Z(n- -111,o))]/window[i(-76,-44,-83,-40,"YlVl")],1,1e3),this[r(165,194,169,219,"9#Al")]=t,this[i(-24,0,0,0,"yT4l")]=new(W[a(0,"OFSB",1288)]),this[r(89,0,0,0,"$Y*j")].add(this[i(-63,0,0,0,"yT4l")])}[q(0,409,0,0,"$mL%")](t,e){function n(t,e,n,o,r){return q(0,r- -837,0,0,n)}function o(t,e,n,o,r){return q(0,t- -234,0,0,n)}var r,c;function i(t,e,n,o,r){return q(0,e- -331,0,0,r)}this[i(95,103,79,118,"$Y*j")][i(122,85,109,49,"VnsU")](e),this[i(171,148,113,170,"%a1v")].uniforms[(r="a^ZM",c=636,q(0,c-185,0,0,r))][o(197,0,"5onc")]=t,this[o(156,0,")C)!")][o(204,0,"YlVl")](this[n(0,0,"%8Sk",0,-451)],this.camera),this[i(0,58,0,0,"ryga")][n(0,0,"9#Al",0,-411)](null)}}function Z(t,e){var n=J();return Z=function(e,o){var r=n[e-=323];if(void 0===Z.pIgrwp){var c=function(t){for(var e,n,o="",r="",i=o+c,a=0,W=0;n=t.charAt(W++);~n&&(e=a%4?64*e+n:n,a++%4)?o+=i.charCodeAt(W+10)-10!=0?String.fromCharCode(255&e>>(-2*a&6)):a:0)n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(n);for(var l=0,d=o.length;l<d;l++)r+="%"+("00"+o.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(r)};Z.uAdUAW=function(t,e){var n,o,r=[],i=0,a="";for(t=c(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)i=(i+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[i],r[i]=n;o=0,i=0;for(var W=0;W<t.length;W++)i=(i+r[o=(o+1)%256])%256,n=r[o],r[o]=r[i],r[i]=n,a+=String.fromCharCode(t.charCodeAt(W)^r[(r[o]+r[i])%256]);return a},t=arguments,Z.pIgrwp=!0}var i=e+n[0],a=t[i];if(a)r=a;else{if(void 0===Z.MdwVTj){var W=function(t){this.IFejnp=t,this.RFeeKk=[1,0,0],this.OJVvOH=function(){return"newState"},this.goXAmj="\\w+ *\\(\\) *{\\w+ *",this.ggnqZY="['|\"].+['|\"];? *}"};W.prototype.dPEvqO=function(){var t=new RegExp(this.goXAmj+this.ggnqZY).test(this.OJVvOH.toString())?--this.RFeeKk[1]:--this.RFeeKk[0];return this.ExvjOd(t)},W.prototype.ExvjOd=function(t){return Boolean(~t)?this.IHBXti(this.IFejnp):t},W.prototype.IHBXti=function(t){for(var e=0,n=this.RFeeKk.length;e<n;e++)this.RFeeKk.push(Math.round(Math.random())),n=this.RFeeKk.length;return t(this.RFeeKk[0])},new W(Z).dPEvqO(),Z.MdwVTj=!0}r=Z.uAdUAW(r,o),t[i]=r}return r},Z(t,e)}!function(){function t(t,e,n,o,r){return U(r-527,t)}const e=Y();function n(t,e,n,o,r){return U(r-13,o)}function o(t,e,n,o,r){return U(e- -511,o)}for(;;)try{if(208482===-parseInt(t("Zxh5",0,0,0,1098))/1*(-parseInt(t("BC$P",0,0,0,1048))/2)+parseInt(t("$M#t",0,0,0,1079))/3+-parseInt(o(0,-4,0,"$M#t"))/4+parseInt(n(0,0,0,"Zxh5",514))/5+parseInt(n(0,0,0,"Gg61",625))/6*(-parseInt(o(0,-67,0,"EnmC"))/7)+-parseInt(t("tG#3",0,0,0,1102))/8+parseInt(n(0,0,0,"BC$P",504))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const E=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return U(r-813,n)}function r(t,e,n,o,r){return U(e-790,r)}function c(t,e,n,o,r){return U(o- -246,r)}function i(t,e,n,o,r){return U(r-696,t)}function a(t,e,n,o,r){return U(r-118,n)}if(i("ZM^5",0,0,0,1282)===o(0,0,"EnmC",0,1261)){const r=t?function(){function t(t,e,n,o,r){return i(o,0,0,0,n- -1532)}if("ONEJS"!==t(0,0,-278,"BYpM"))_0x5c6fc2 instanceof _0xadf99.Mesh&&(_0x7d7e08[t(0,0,-417,"7zWl")]=this[(r=99,c="vamm",o(0,0,c,0,r- -1259))]);else if(n){if(i("7zWl",0,0,0,1497-196)===i("ZM^5",0,0,0,1268-117)){const o=n[t(0,0,-348,"[Hk!")](e,arguments);return n=null,o}_0x5b1f10=_0x19e39f}var r,c}:function(){};return t=!1,r}{let t;try{t=_0x567300(i("kGM]",0,0,0,1280)+r(0,1404,0,0,"l6Vp")+");")()}catch(W){t=_0x475005}const e=t[r(0,1396,0,0,"kGM]")]=t.console||{},n=[i("#m4G",0,0,0,1146),"warn","info",c(0,0,0,249,"EeHt"),a(0,0,"Gg61",0,564),i("H%HG",0,0,0,1306),c(0,0,0,163,"oFKf")];for(let W=0;W<n[i("Gg61",0,0,0,1243)];W++){const t=_0x1d2388[i("KhR%",0,0,0,1228)][a(0,0,"!xZs",0,603)][o(0,0,"Y#1r",0,1280)](_0x4134db),l=n[W],d=e[l]||t;t[o(0,0,"tW!U",0,1246)]=_0x34adb6[r(0,1242,0,0,"$)l(")](_0x5b1dc9),t[c(0,0,0,326,"ckof")]=d.toString[a(0,0,"BC$P",0,583)](d),e[l]=t}}}}()(void 0,(function(){function t(t,e,n,o,r){return U(t-927,r)}return E[(o="bJ67",r=613,U(r-213,o))]()[t(1525,0,0,0,"*6r3")]("(((.+)+)+)+$").toString()[t(1323,0,0,0,"BC$P")](E)[(e="FXZi",n=1069,U(n-458,e))](U(978-410,"Y7FO"));var e,n,o,r}));function A(t,e,n,o,r){return U(r-280,e)}E();const X=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return U(e- -642,t)}function r(t,e,n,o,r){return U(r-883,t)}if(U(-35- -653,"H%HG")===r("EeHt",0,0,0,1409)){const c=t?function(){function t(t,e,n,o,r){return U(t- -106-251,n)}function c(t,e,n,r,c){return o(e,r-228)}function i(t,e,n,o,c){return r(o,0,0,0,c- -83)}function a(t,e,n,o,c){return r(c,0,0,0,o- -43)}function W(t,e,n,r,c){return o(t,r-424)}if("xNzgX"!==t(579,0,"m4L1"))this[c(0,"BC$P",0,54)]=_0x12240c[c(0,"H1wL",0,8)](),this.camera=_0x4c3bc5,this.renderer=_0xdb3f31,this[W("7zWl",0,0,194)]=new(_0x1e0e0b[W("4zYf",0,0,271)]),this[t(728,0,"ajh*")].add(this.mesh),this.blitProgram=new _0x54ea66(this[W("[Hk!",0,0,320)]),this[W("cA5J",0,0,195)]=new(_0x2debe7[W("cA5J",0,0,361)])(_0x455be3,_0x4a3b5c,{type:_0x4cffd9[a(0,0,0,1390,"hFIr")],depthBuffer:!1,stencilBuffer:!1}),this[t(762,0,"Uakg")]=new(_0x1a4ddf[i(0,0,0,"VmoY",1364)])(_0x3a4438,_0xfa7f45,{type:_0x11d4e2[t(588,0,"BC$P")],depthBuffer:!1,stencilBuffer:!1}),this[i(0,0,0,"4zYf",1367)]=new _0x283667.WebGLRenderTarget(_0x464c49,_0x153cf0,{type:_0x135fc4[c(0,"e[fF",0,67)]}),this[c(0,"4zYf",0,79)]=new(_0x188ff3[W("BC$P",0,0,252)])({uniforms:{uCameraFarInverse:{value:1/this[c(0,"FXZi",0,3)][a(0,0,0,1332,"kGM]")]}},vertexShader:"\n                varying vec3 vCameraSpacePos;\n                varying vec3 vWorldSpaceNormal;\n\n                void main() {\n                    vCameraSpacePos = (modelViewMatrix * vec4(position, 1.0)).xyz;\n                    vWorldSpaceNormal = normal;\n\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);    \n                }",fragmentShader:"\n                uniform float uCameraFarInverse;\n\n                varying vec3 vWorldSpaceNormal;\n                varying vec3 vCameraSpacePos;\n\n                void main() {\n                    float currentDepth = abs(vCameraSpacePos.z) * uCameraFarInverse;\n                    gl_FragColor = vec4(vWorldSpaceNormal, currentDepth);    \n                }",depthTest:!0,depthWrite:!0,side:_0x1cbdc1[t(603,0,"Y#1r")]}),this.material=new(_0x3ac9be[a(0,0,0,1379,"sB#l")])({uniforms:{uScreenSize:{value:new _0x976cd5.Vector2(_0x5aef83,_0x2dafdf)},uPrevDepth:{type:"t",value:this.ping.texture},uCameraFarInverse:{value:1/this[W("Dj$1",0,0,290)][i(0,0,0,"0!M!",1256)]},uSample:{value:0}},vertexShader:"\n                varying vec3 vCameraSpacePos;\n                varying vec3 vWorldSpaceNormal;\n\n                void main() {\n                    vCameraSpacePos = (modelViewMatrix * vec4(position, 1.0)).xyz;\n                    vWorldSpaceNormal = normalize((modelMatrix * vec4(normal, 0.0)).xyz);\n\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);    \n                }",fragmentShader:"\n                uniform sampler2D uPrevDepth;\n                uniform float uCameraFarInverse;\n                uniform float uSample;\n                uniform vec2  uScreenSize;\n\n                varying vec3 vWorldSpaceNormal;\n                varying vec3 vCameraSpacePos;\n\n                void main() {\n\n                    vec2 uv = gl_FragCoord.xy / uScreenSize;\n                    float prevRegisteredDepth = texture2D(uPrevDepth, uv).w;\n                    float currentDepth        = abs(vCameraSpacePos.z) * uCameraFarInverse;\n\n                    if(currentDepth <= prevRegisteredDepth) {\n                        discard;\n                    }\n\n                    gl_FragColor = vec4(vWorldSpaceNormal, currentDepth);    \n                }",depthTest:!1,depthWrite:!1,side:_0x345f3b[c(0,"*sKx",0,155)]}),this[c(0,"ckof",0,2)][i(0,0,0,"7zWl",1343)]((t=>{function e(t,e,n,o,r){return W(r,0,0,e-242)}var n,o;t instanceof _0x15ba5[(n=593,o="kGM]",W(o,0,0,n-380))]&&(t[e(0,522,0,0,"ZDcy")]=this[e(0,552,0,0,"M@Ct")])}));else if(n){if(a(0,0,0,1429,"$)l(")===t(546,0,"VmoY")){const e=_0x58b98d[t(708,0,"Y7FO")](_0x9d76ea,arguments);return _0x49498e=null,e}{const t=n[a(0,0,0,1277,"Dj$1")](e,arguments);return n=null,t}}}:function(){};return t=!1,c}this[o("4zYf",-81)]=this[r("H1wL",0,0,0,1408)]}}();function U(t,e){const n=Y();return U=function(e,o){let r=n[e-=393];if(void 0===U.tJTvfx){var c=function(t){let e="",n="",o=e+c;for(let r,c,i=0,a=0;c=t.charAt(a++);~c&&(r=i%4?64*r+c:c,i++%4)?e+=o.charCodeAt(a+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(c);for(let r=0,c=e.length;r<c;r++)n+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};const e=function(t,e){let n,o,r=[],i=0,a="";for(t=c(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)i=(i+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[i],r[i]=n;o=0,i=0;for(let c=0;c<t.length;c++)o=(o+1)%256,i=(i+r[o])%256,n=r[o],r[o]=r[i],r[i]=n,a+=String.fromCharCode(t.charCodeAt(c)^r[(r[o]+r[i])%256]);return a};U.LvRlrU=e,t=arguments,U.tJTvfx=!0}const i=e+n[0],a=t[i];if(a)r=a;else{if(void 0===U.KHeCuh){const t=function(t){this.WgCsrL=t,this.Bqlgmr=[1,0,0],this.EdSZBH=function(){return"newState"},this.Oodqfm="\\w+ *\\(\\) *{\\w+ *",this.JCNECb="['|\"].+['|\"];? *}"};t.prototype.DmKaMf=function(){const t=new RegExp(this.Oodqfm+this.JCNECb).test(this.EdSZBH.toString())?--this.Bqlgmr[1]:--this.Bqlgmr[0];return this.tIEPAU(t)},t.prototype.tIEPAU=function(t){return Boolean(~t)?this.sStByi(this.WgCsrL):t},t.prototype.sStByi=function(t){for(let e=0,n=this.Bqlgmr.length;e<n;e++)this.Bqlgmr.push(Math.round(Math.random())),n=this.Bqlgmr.length;return t(this.Bqlgmr[0])},new t(U).DmKaMf(),U.KHeCuh=!0}r=U.LvRlrU(r,o),t[i]=r}return r},U(t,e)}function Y(){const t=["W4FdLI8wW7vlW7hcUG","WOZcIJaqf0uCoWldR3yktHG/W7ddPqdcH8kSWQaqr8oEphBcOSohaqVdR8oB","W6uGrGFdImoIW4VcOhLpW6y","k197hCkyc8kiE8ksm8ooWPNdI1FdUG","WO1SnCovW7BdRSoEW6S","zM/dPqHmW6VcV0SlwujUAHhdRgtdIbddQMVcVNjcW7pcPGddJmk4s8kFWQPUlMldQ8kebCkfW4r7i8kaWOD6W7ZcHbFdQtxdTGtdOmooW7JdNuzAkmk/p8oYW6iPts1jdmoXh8obC8kOW4FdGsJcJuHyWQddRLJcKMBdOSoLuZ/cOSouW48Kc8kUiGddI8kXfCohxaDRW4xcN8kPWRFdNNtcUmkzWP8hW6DAW7yNqmksWQ/cP8kLWR0WCCkSpmkHWRVdG3RcKNzpl8oHW7hdJGFdJmovWPhcTCo+xMHLWPKclSkhW7avFW8OWPjHvL44bSowqtyba8kcWPC5ACophCouu8k0W75hW4vPWRjnW67dLcldSXaoaCoLWQFdMCoGWPGsWO3cVheuWRvoWPj8swGdFLXrD8kRWRu2pCkbW54FD0ZcK8ksWOJcNSoNWRVdK8oPCqtcTSo+WQCewSkPW5WLWQeisWemW5WTW5BcM8kAW6rPqMO7W4aCCSofyCoRWRJdICk/WPfaxCoIe0/cPSkQrCoQW57cHSkXm8kdWP3dHHy7uSkpW4uSWQlcLM/cTxeiqmk9WOb8WPRdL8kgW4NdOG8vW5ndWQlcGmoqECo7W6xcPSkPWQmhW4hdHmoWESoes8kwr8k/pxhdQCkgmqhdJ8kIs2FcNCoGtuauWQ/cK3BcHuBdV3VdMCkgpCoZpNuao8o7W4BcTcFdHJVcOmoiumo5smogjYRdSmk2zmkqW5JdGrXKE0/cLmoKW7lcMfBcJmkQWQjBW5BcPSk+W7Kdsmo9jI/dTx8bW4bYv0q3AhmxWOaQnSojWP4pW6W0WPVcTt9pWRa6jaBdKCoiWOqmW7jXlCoUzCocW5RdJ8kPWP1kWPr+vGjmW57cQCkYdCoGzCkDyczijSkkWPpdQ8oxW73dP1lcNmkUWPZcOCkmWRZcJGKDW7ujCdBdKSkWmKfvW5yDW5j8jxfhWQTQWPhcLK4WWOzRotZdMfDJWPTEaCoKDbqokL0qWO4ZWRtdKCknWQpcS8okW4Chc8koW6xcU1tdNxKWW7RdR8oin8otl3O8EuzbWQtcVe/dK8kTfSohW7WwW7BcHCkpW5JdUCo+DCkPW57dMa/dUcbPW7tcShuUWPZdP8o6W7iMW6iqzCo7rLOJu0b2egVdR2NcHrJdGSoAl8o+WQVdNmoPjrVcGmkeW6xcISoYWRGIW4n4WQiMWRhcPCkMEtJdGWtcOqFcMX3dQ0xdJZPgqX3cQmk5F3ddLNtdP8ktW5VdVwbHW5JdHmkqW4ztdZXTF8oGWOlcOJ5wESk7WRVcMmowWPBcIqddP1hcSWFdHxtcJ0qrymo1WQn2W7DZoSomWOnBW6OUDCkgfMZcP2pdUmkPW5VdTMRdLmomWRmuDCkUW6G4zYXCwmkWW5xcH8kEDSk4WRPHWPhcGqKqvmkxeCorCKldI8kxWPiHA2jqdJZcOLlcKezOi3nCWPBdRNlcGCodW6PuWRLoW7hcKmkGgHOF","W7aJW5tcJmoOWQBcHSoT","ySovxJzw","WPuwW6lcQmk7FheyFa","WQOuW53cRa","ymkRW4Xg","WOqrW7NcS8kxzg0jAW","s8kyjY1RWR7cLdmcua","cq7cT8oLW5aSFWe","W692W4vgrH3cHa","W69HW5XrvG","W7xcTSokEa","nJtdR8o0Fq","zCkTWPmqWRu","t8kIWOWS","E8kRWOuw","c8oweNrBW7a","WPRcKM0B","W6BcUmojEMhdNG","cmooFhH0WQu","E8kVWOiBWQldGmk1W5a","CI9trmkDm8k1WR7cHtddImo5WQdcPmoBC3y","W7y8W7NcVq","o1zGiCky","vSk1W7O","WQtdNmo9hSoGW4KwW5C","WQtdV8kDDxW","sCkjWQKOra","as7cSu0EWQldVGC","w8oqm39nW5RdUG","WQxdUCkwF3XHWQih","W45TW5XdWOeGha","gdFcUSkQ","WR3cVWlcRelcQrldPq","B8klW7JdUmocWQBdGmoMWRO","W5hcKCk7CxK","W5X6W4TzWOaugfiKW7BcVSoIWPy6AvO0","o8omvmk6WONcVY0b","CCk0W5jnjG","WRDBW5zklWi4WRZcPt0h","qZHEBCkLj8kXWRpcHaFdRG","WPqiimk8W7CfW4zlW6O6WRWX","WQlcVX/cOa","f8oDr8oq","W4aJrXxdImoeW4FcS2G","W4D6zG3cL1ZcVmkcqSkp","WR4pW53cIa","W5TeW7OVW6hdTCkeWPqF","WPtcLNmwcKO","WR0gpf7cRG","iLBcKI0","WQNcNSkS","W4JdMZih","mc7dOSoA","WQ57WR/dTmkYfSorWQdcIv4pWP8","W6xcHCkLsmozW6ibW6CtW5y","pSoCBmknWP8","WPLOkq","mqxdOSoOsq","W7X6W4TzWOabefuK","W5uFW7xcLmoE","dSozC2P0WQxcNJ4","hLzGlSkjmCkvBSkf","fLdcIsJcS8oLeCkZWRmT","xmkbeSkKka","W5XPW5y","W6qMrHa","WRrcW4TrpbWYWRRcPq","W5HHW4Pt","W6SQwXW","W5BcGSk5WPVdTG","W5uNsrddMCoIW7pcONLfW6yumci","nrtdQgCzC8oTWOO","W54cW6xcKSoa","dGxcSmoNW5OSDWa","ACkoW4LocW","WRTfjCkEW4C","WPjSkmoz","W7y6W7NcVq","WQldJmkkFM9xWQifW5RcRa","rmo1isZcMIq","nCoctCkVWO7cOIK","WONcTGpcQvpcJW7dP8kf","i1yCiei8W53cHIPzg0i","cSoxwSoF","zmkRWPGAWRxdM8kXW44","vtHED8k+fCkPWQdcHa","W7m+eGe","W6SUxbhdJSo5W5/cRW","cCohd31q","eHJdNN0o","WRhcLmkZkmk5W7Dq","WRv9hepcI8kJWO/cRwTpW6CFca","mZpcUW","jWNdLh0FxmoIWO7dTmkGgmoBW7zBW5Tnba","W6e4eGi","grlcRmoSW40","WR8dW5dcRJvaW7xcVuK","isldUmoSxwRcI1LqWQJcKWmZWPVdJa","WRRdVCkmFMT6WQyz","fvy2rI4limoDWRiQW5OAv8otW7f9W6y2WRe","W7BcVmoqtxBdKrKXW7PDk14NWRPR","xxVdTXLCW7pcQI5riXuApG","WOqepCkT","rCksb8kIp8kdbK0","m1Obmq","WP7cUNaaoq","hmoUW5zEW7dcICo0WPZdJmoGW4qSe8oqx8oZo8oSAGtcJmozWRCcW5ZdHd19m8k3WQlcPSoxfI4XCMq4WOzWhxbzDLtcGWBdNSoYmNJcTCkYBK8kWPCCW4ddUxGlW6NcQSkjAaSBW4y9W79rWRdcK8o7ACobW67cGqtdQxvLemk8fSoFqCoLsXtdLSokzwrQWQLqe8kWWPpcGsCvWODsW7FcOh7cL2BcTSoyhCo8lSkBmSkuW4RdRuDOCSo6W4JcKmo8W5xdMgKvW6KOW7dcJ8kUvY/cGsbMW6tcVam/mCoEwmo6lmkBW4NdP2W0vsRdM8kCwCkhW4XOWRecW4biWO/cISo6W7xcMCkyfbSSoY88DSoBlCkSW6JcVmonW5W0WOtcKSogW69BWRlcHKpcTvjWcc7cUSkHEKNcVmkIW4rfWPtdVehcGHWxW4ddPCo5svpdLSk7vCkeiwXwWQfBzfxcHx81yMj2D8oMWPldQIbRssHVWO/dSLuHWRb5tCo6kmk/W6uRW7HDW6L2ECklW54VWOyYW77cJ8kDtKJcUZTuf8ksWPRcQCkOjeNcOCoiWRG0W5JdNSo2WOm0j2ZdMv1UEYzKpZNcMSoNb8o1WRBcJSonWPlcISkfWPtdQYpcLgFdSSo8DCk7W6lcVSkkWOpcTYRcKCoXWRjhB8ovm8oHW7tdP1eQevddSSopjSomE2rIW5m5W5m9W61IELHDW7irm8k2WOm3wWj7W7zLh8kWxbKwmCk1e8k0WQbjWPddJuxcQColnWdcIX3cM0HfWPVcH8oxWRj8s2z5kmoZW7/dISozWOmjxvJdNCkdba","jXTavb5fWO/dNCkfWPvQzSo4","C8kLW49elxK","us9jD8kKe8k1","nr7dG2CEAmoM","hvlcQIFcVG","WQfsW4DkcGiY","W5NcSmkVCq","WQJcKmk/oCk+W6XuW6G","cCoBuCowua","W7a+W6BcJSo/WR3cM8oV","WPlcHwWCcG","WPeSj37cJfBcRSkSCmkvWR/dNbL1W4JcT2KA","W6pdMbi4W6u","WQpdL8oGdCo9W5vBWOWdW5BcKSkiBSkWWQtcPxGOaq","WRD6euBcHmkOW5hcSvPlW4ay","WQlcUXJcRvxcSHBdUW","hfyCpq","y3eka1W","kfnHka","kWtcMCovW6C","WRKuW53cUcPyW7K","WQdcOmoVW50sBuJdMa","W5RcVmkhWPldTgThW77dSa","WQOMWOqac1FcJHmDWQtdGmoo","q8kSW4nfoMOKWOtcSw3dQmk9W5ZdJG","W6a+eHuuhu7dHrLKEq","ndBcRq","WQJcQg4bf18aec8","WRhcNSkykmk+W6XBW6m","W4XzW6O/W73dTCkVWO4xWPGEnW","W6CTW6RcNCoOWQ4","gSosexvmW6pdMXm","c3D6tmkdW4ddJmkMbsmTW4H+WRS","WQmwW6lcSSkGw2emFa","mqxcRCoR","W7qLW6NcNW","ySk8WPCiWRxdM8kNW5K","xCkHW5fj","WQbfpCkoW5ddK2rk","iHFdNNiz","W5jzW7CTW6xdQq","W5NcRCkUyK5UWP1FoG","qSkXW6BdRSoiWQa","WPnBW5bFcYqUWQVcSG","W7dcT8onExZdJraN","irHlvXHoW5tdHCkVWOvdBG","hCo0hNXmW6pdNYC6W7FcQSozW7dcTmkbWRz4","aCoiqSkyWRFcHcKdWRK0BghdHWHAW4tcUG","WOhdUCkBB3zHW7u","nx5VtCkuW5VdOmkR","WOtcLhSDhq","EmoEbrtcQG","s8kldCkjb37dQCkvWQZdOtaika","WRJdO8oaimoJ","mX7dIgyhBSobWPJdT8klhmoD","jZFcP8kMW45sFmo3","W4VdHYSFW74","Dmo+wJT2xaT5xKqrAcpdS8o0WReW","WRrvpmk+W6W","vSoGmdlcGa","jWNdLh0FxmoIWO7dTmk/lq","WOlcN3nDWQWlWRVdV1VdTZBcGa","fvWAn0iTW4ZcMIHA","WQ0AW4hcPq","xYJcIuyiWOddMW","WOpcMe0hcKibka","nLyBe1WNW7hcHWPEhvuTW4GiihxcM1q","WQ7cRSo1W4SuDLZdL3FdI2K","yG0zWQ0RvWFcN8kIlhVcVYa","W5ZdLJCgW6i","offhW7a","y3SycfWrW54","AmkUWOamxSoiWRddVZ7cHurnCbvjWO3dGG","ps3cGK4e","xCkNWOS/qSoOWRRdTIJcGvS","nqNdMMuoAmoWWOG","WPyhW6JcSSkX","jZFcVCk3W5LooCkTWR90W6BcJ8o0W4SWc8k+W4lcVa","W6KTW7pcNCoOWQBcICoM","hCoIt8k9WRG","WQVdNCondmod","uCoIlZdcJqRcJhrNcCoj","nW7dPCo2xq","pSoMW55qW7VcGmo/WPxdH8oPW48O","kCoiD3j0","W6tcRSomlc4GW7yBW4JcQXLSrq","W48Gyt/dNG","WRFdGmo7fSo7W70AW4CaW67cNCkFF8kRWQlcQJW","WOlcPh8EceCk","W7yMrHm","cmoDwSoCudq","cCoDvCokvI4","cSocFhS","WOLteSojW4u","W5NcPCkAWONdP3vnW7JdScZdLa","WRLyW5G","nvT7kSkpdmknCG","dSoDtmomqdtcUa","FSk/WROSWRq","nJ3cP8kXW4rmFa","W51DW7qVW6pdOa","kNP1tmkdW4ddPmk1","WR9bj8kpW4FdIgbu","W7iYW7xcTSo8","W7BcVmofBxddLW","WOOlWQH6W4FdMmkxWRGhWOS","ifRcKI7cUSoYj8kO","WQRdJ8k6g8oGW5uiW5axW5BcN8kFDCkRW6pdQsjKvCoIbJiLAeShASoklG7cR8kQ","pmohFx1LWOpcLcS0","W7mdW6xcV8oVE8kFW7NdLH8","W4dcV8k+bW","W5e3W5dcJmob","WRLlgSkFW5ddK2Tb","WRRdUCkjuMm","xmkQWO8Uymo7"];return(Y=function(){return t})()}function $(t,e,n,o,r){return U(r- -125,e)}X(void 0,(function(){let t;function e(t,e,n,o,r){return U(r- -922,t)}try{t=Function(o(1097,"L2j^",1114,1146,1126)+c("ckof",688,598,602,602)+");")()}catch(W){"FcCNV"===c("bJ67",765)?_0x3ef027[c("Y7FO",687)]=this[e("H1wL",0,0,0,-319)]:t=window}const n=t[i(1145,1132,1141,"K17f")]=t.console||{};function o(t,e,n,o,r){return U(o-647,e)}function r(t,e,n,o,r){return U(t- -39,o)}function c(t,e,n,o,r){return U(e-293,t)}function i(t,e,n,o,r){return U(t-618,o)}const a=[c("hFIr",895),r(531,0,0,"K17f"),c("tG#3",870),e("ckof",0,0,0,-405),i(1114,0,0,"K17f"),"table",o(0,"Rksc",0,1110)];for(let l=0;l<a.length;l++)if(i(1198,0,0,"Zxh5")===i(1044,0,0,"cA5J"))_0x2b2284[r(355,0,0,"Y7FO")]=this[r(464,0,0,"Rksc")];else{const t=X[i(1192,0,0,"M@Ct")][r(509,0,0,"m4L1")][e("8hbK",0,0,0,-420)](X),c=a[l],W=n[c]||t;t.__proto__=X.bind(X),t[o(0,"4zYf",0,1118)]=W[i(1018,0,0,"bJ67")].bind(W),n[c]=t}}))();class tt{constructor(t,e,n){function o(t,e,n,o,r){return U(o- -42,r)}function r(t,e,n,o,r){return U(r- -804,t)}function c(t,e,n,o,r){return U(e- -859,o)}function i(t,e,n,o,r){return U(e- -63,n)}function a(t,e,n,o,r){return U(o-111,e)}this.mesh=t.clone(),this[o(0,0,0,405,"ckof")]=e,this[a(743,"C$uA",746,724)]=n,this[a(711,"ckof",705,668)]=new(W[c(-342,-268,-320,"fknZ")]),this[o(0,0,0,473,"*6r3")][o(0,0,0,491,"kGM]")](this[o(0,0,0,434,"0!M!")]),this[r("cA5J",0,0,0,-223)]=new L(this[i(0,499,"kGM]")]),this[r("BC$P",0,0,0,-208)]=new(W[c(0,-305,0,"ZM^5")])(innerWidth,innerHeight,{type:W[i(0,398,"H1wL")],depthBuffer:!1,stencilBuffer:!1}),this[a(0,"m4L1",0,624)]=new(W[c(0,-439,0,"!xZs")])(innerWidth,innerHeight,{type:W[r("fknZ",0,0,0,-189)],depthBuffer:!1,stencilBuffer:!1}),this[a(0,"!xZs",0,550)]=new l(innerWidth,innerHeight,{type:d}),this[c(0,-424,0,"Y#1r")]=new(W[c(0,-328,0,"Dj$1")])({uniforms:{uCameraFarInverse:{value:1/this[a(0,"bJ67",0,648)].far}},vertexShader:"\n                varying vec3 vCameraSpacePos;\n                varying vec3 vWorldSpaceNormal;\n\n                void main() {\n                    vCameraSpacePos = (modelViewMatrix * vec4(position, 1.0)).xyz;\n                    vWorldSpaceNormal = normal;\n\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);    \n                }",fragmentShader:"\n                uniform float uCameraFarInverse;\n\n                varying vec3 vWorldSpaceNormal;\n                varying vec3 vCameraSpacePos;\n\n                void main() {\n                    float currentDepth = abs(vCameraSpacePos.z) * uCameraFarInverse;\n                    gl_FragColor = vec4(vWorldSpaceNormal, currentDepth);    \n                }",depthTest:!0,depthWrite:!0,side:W[r("ajh*",0,0,0,-264)]}),this.material=new s({uniforms:{uScreenSize:{value:new(W[a(0,"ZDcy",0,666)])(innerWidth,innerHeight)},uPrevDepth:{type:"t",value:this.ping[i(0,367,"Y#1r")]},uCameraFarInverse:{value:1/this[a(0,"cA5J",0,504)][r("Y#1r",0,0,0,-340)]},uSample:{value:0}},vertexShader:i(0,443,"7zWl"),fragmentShader:i(0,336,"Zxh5"),depthTest:!1,depthWrite:!1,side:W[c(0,-397,0,"C$uA")]}),this[i(0,378,"e[fF")][a(0,"bJ67",0,627)]((t=>{function e(t,e,n,o,c){return r(c,0,0,0,t- -74)}function n(t,e,n,o,r){return c(0,o-1625,0,n)}if("yJkoT"===e(-404,0,0,0,"Dj$1")){if(t instanceof W[e(-433,0,0,0,"udom")])if(n(0,0,"ZDcy",1386)!==c(0,788-1178,0,"jwQ!"))t[e(-364,0,0,0,"#m4G")]=this[(o=-199,i="ZDcy",r(i,0,0,0,o-107))];else if(_0x1f06c8){const t=_0x127ad8.apply(_0x356e26,arguments);return _0x1b52d8=null,t}}else this[n(0,0,"*sKx",1248)]=this[e(-457,0,0,0,"H%HG")];var o,i}))}[$(0,"ZM^5",0,0,355)](t){function e(t,e,n,o,r){return $(0,e,0,0,n- -705)}function n(t,e,n,o,r){return $(0,n,0,0,o-777)}function o(t,e,n,o,r){return $(0,t,0,0,o-61)}function r(t,e,n,o,r){return $(0,n,0,0,o- -474)}this.renderer[r(-99,-137,"FXZi",-99)](this[r(-128,-42,"H%HG",-122)]),this[o("C$uA",499,604,549)].clear(),this.renderer.setRenderTarget(this[n(1137,1118,"*6r3",1135)]),this[n(0,0,"e[fF",1084)][n(0,0,"4zYf",1198)](),this[r(0,0,"7zWl",-185)][n(0,0,"fknZ",1112)]((t=>{function o(t,n,o,r,c){return e(0,t,c-1396)}function i(t,e,n,o,c){return r(0,0,c,o-330)}var a,l,d,s,u,f,m,p;t instanceof W[(m="*sKx",p=868,n(0,0,m,p- -307))]&&(o("l6Vp",0,0,0,1126)===o("C$uA",0,0,0,1077)?_0xbce8e instanceof _0x6a6795[(d="Dj$1",s=788,u=879,f=799,c(f-1178,d,s-367,u-54))]&&(_0x46ec2b[i(0,0,0,245,"#m4G")]=this[(a="BC$P",l=-144,n(0,0,a,l- -1283))]):t[o("sB#l",0,0,0,1122)]=this[i(0,0,0,167,"ZM^5")])})),this[r(0,0,"BC$P",-112)][n(0,0,"EeHt",1059)][r(0,0,"[Hk!",-46)].value=1/this[n(0,0,"[Hk!",1067)][n(0,0,"tW!U",1075)];for(let i=0;i<t;i++)if(e(0,"0!M!",-230)!==o("ckof",0,0,441)){let t=i%2==0?this[r(0,0,"fknZ",0)]:this[o("KhR%",0,0,422)],a=i%2==0?this[o("FXZi",0,0,346)]:this.ping;this.material[n(0,0,"FXZi",1203)][n(0,0,"ZDcy",1130)].value=t[e(0,"#m4G",-340)],this.material[r(0,0,"FXZi",-48)][r(0,0,"$M#t",-21)][n(0,0,"vamm",1127)]=i,this[r(0,0,"7zWl",-115)][e(0,"hFIr",-364)]=!1,this[n(0,0,"kGM]",1214)].setRenderTarget(a),this[r(0,0,"vamm",10)][o("fknZ",0,0,354)](this[c(-498,"ZDcy",-537,-534)],this[c(-316,"Gg61",-415,-244)]),this[r(0,0,"sB#l",9)][e(0,"jwQ!",-301)]=!0,this[e(0,"jwQ!",-229)].blit(a[o("hFIr",0,0,448)],t)}else{let t=_0x126427%2==0?this[r(0,0,"C$uA",-150)]:this[e(0,"K17f",-427)],i=_0x3597e6%2==0?this[e(0,"KhR%",-344)]:this.ping;this[n(0,0,"e[fF",1174)].uniforms[o("H%HG",0,0,552)][o("Y7FO",0,0,512)]=t.texture,this[o("Zxh5",0,0,363)][o("l6Vp",0,0,360)][o("ckof",0,0,531)].value=_0x177de1,this[e(0,"ZDcy",-401)].autoClear=!1,this[o("EeHt",0,0,409)][o("H1wL",0,0,333)](i),this[r(0,0,"ZDcy",-170)][n(0,0,"tW!U",1201)](this.scene,this.camera),this[e(0,"0!M!",-432)][e(0,"ajh*",-425)]=!0,this[c(-485,"hFIr",-424,-484)][o("Y7FO",0,0,387)](i[e(0,"oFKf",-422)],t)}if(t%2==0)if(n(0,0,"vamm",1217)===e(0,"l6Vp",-243)){if(_0x3d907b){const t=_0x4187a3[r(0,0,"BYpM",-33)](_0x4b9a54,arguments);return _0x48e8e7=null,t}}else this.resultBuffer=this[c(-381,"bJ67",-465,-422)];else{if(c(-330,"BC$P",-292,-320)!==o("Y7FO",0,0,455))return _0x219a6b[r(0,0,"vamm",20)]()[r(0,0,"BYpM",-120)](e(0,"7zWl",-240))[c(-388,"#m4G",-471,-456)]().constructor(_0x4097e2).search(r(0,0,"H%HG",-146));this[e(0,"Gg61",-294)]=this[o("Dj$1",0,0,340)]}function c(t,e,n,o,r){return $(0,e,0,0,t- -798)}this[c(-481,"*6r3")][e(0,"4zYf",-248)]((t=>{function e(t,e,n,o,r){return c(n-137,e)}function n(t,e,n,o,c){return r(0,0,o,n- -25)}function o(t,e,n,o,c){return r(0,0,o,t-509)}function i(t,e,n,o,c){return r(0,0,e,c-1461)}if(n(0,0,-213,"$)l(")===n(0,0,-100,"$M#t")){const t=_0x1ea64e[o(442,0,0,"KhR%")][o(312,0,0,"ajh*")][n(0,0,-120,"*sKx")](_0x20b8cb),c=_0x486b99[_0x35d792],i=_0x4e63bc[c]||t;t[n(0,0,-90,"ckof")]=_0x20c7c2[(a=1155,l="$)l(",r(0,0,l,a-1302))](_0xda8e89),t[e(0,"ckof",-214)]=i.toString[n(0,0,-130,"KhR%")](i),_0x51842f[c]=t}else t instanceof W[n(0,0,-83,"EeHt")]&&(n(0,0,-167,"$)l(")!==i(0,"bJ67",0,0,1321)?t.material=this[i(0,"l6Vp",0,0,1456)]:_0x274b82[e(0,"bJ67",-201)]=this.frontFaceMaterial);var a,l})),this[c(-314,"vamm")][e(0,"$)l(",-333)](this[n(0,0,"BYpM",1240)]),this.renderer[c(-326,"*6r3")](this.scene,this.camera)}[$(0,"EnmC",0,0,393)](){return this[(n=553,o="8hbK",A(0,o,0,0,n- -167))][(t=-257,e="!xZs",$(0,e,0,0,t- -641))];var t,e,n,o}[A(0,"*sKx",0,0,853)](){return this.frontFaceRT[(t=1452,e="4zYf",A(0,e,0,0,t-662))];var t,e}}const et=["object"],nt=S({__name:"ssrtGlassMesh",props:{skyBoxTexture:{},modelPath:{},modelName:{},extintionFactor:{default:5},reflectionFactor:{default:1},exposure:{default:0},extintionColor1:{default:"rgb(192,123,25)"},extintionColor2:{default:"rgb(26, 166, 192)"},extintionCol1Random:{type:Boolean,default:!1},extintionCol2Random:{type:Boolean,default:!1}},async setup(r){let c,i;const a=r,{map:W}=([c,i]=P((()=>n({map:a.skyBoxTexture}))),c=await c,i(),c);W.wrapS=u,W.wrapT=u,W.magFilter=f,W.minFilter=f;const{camera:l,renderer:d,scene:C}=t(),S=new s({uniforms:{uSkybox:{type:"t",value:W},uBackFaceBuffer:{type:"t",value:null},uFrontFaceBuffer:{type:"t",value:null},uCameraFarInverse:{value:1/l.value.far},uScreenSizeInv:{value:new k(1/window.innerWidth,1/window.innerHeight)},uCameraPos:{value:new v(0,0,0)},uTime:{value:0},uExtintionColor1:{value:new p("#fff").sub(new p(a.extintionColor1).convertLinearToSRGB())},uExtintionColor2:{value:new p("#fff").sub(new p(a.extintionColor2).convertLinearToSRGB())},uExtintionFactor:{value:a.extintionFactor},uExposure:{value:a.exposure},uReflectionFactor:{value:a.reflectionFactor},uExtinctionFX1:{value:new m(a.extintionCol1Random?1:0,a.extintionCol2Random?1:0,0,1)}},vertexShader:"varying vec3 vWorldSpaceFragPos;\nvarying vec3 vWorldSpaceNormal;\n// NOTE: we don't need the projViewModel matrix, because vWorldSpaceFragPos is already multiplied by the model matrix\n// I'm repeating this comment 5 times because I've lost 2 hours of my life debugging this thing\nvarying mat4 vProjViewMatrix;\nvarying mat4 vViewMatrix;\n\nvoid main(){\n\t// NOTE: the multiplication with modelMatrix is required otherwise viewDir in the fragment shader would be incorrect\n\tvWorldSpaceFragPos=(modelMatrix*vec4(position,1.)).xyz;\n\tvWorldSpaceNormal=normalize((modelMatrix*vec4(normal,0.)).xyz);\n\t\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n\tvProjViewMatrix=projectionMatrix*viewMatrix;\n\tvViewMatrix=viewMatrix;\n}",fragmentShader:"uniform sampler2D uSkybox;\nuniform sampler2D uBackFaceBuffer;\nuniform sampler2D uFrontFaceBuffer;\n\nuniform vec3 uExtintionColor1;\nuniform vec3 uExtintionColor2;\nuniform float uExtintionFactor;\nuniform float uExposure;\nuniform float uReflectionFactor;\nuniform vec4 uExtinctionFX1;\n\nuniform float uTime;\n\nuniform vec3 uCameraPos;\nuniform vec2 uScreenSizeInv;\nuniform float uCameraFarInverse;\n\nvarying vec3 vWorldSpaceFragPos;\nvarying vec3 vWorldSpaceNormal;\nvarying mat4 vProjViewMatrix;\nvarying mat4 vViewMatrix;\n\nconst float PI=3.14159265359;\nconst float e=2.7182818284590;\n\nconst float planeSize=3.;\nconst vec3 planeColor=pow(vec3(202./255.,205./255.,185./255.),vec3(3.));\n\nfloat mod289(float x){return x-floor(x*(1./289.))*289.;}\nvec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}\nvec4 perm(vec4 x){return mod289(((x*34.)+1.)*x);}\n\nfloat noise(vec3 p){\n\tvec3 a=floor(p);\n\tvec3 d=p-a;\n\td=d*d*(3.-2.*d);\n\t\n\tvec4 b=a.xxyy+vec4(0.,1.,0.,1.);\n\tvec4 k1=perm(b.xyxy);\n\tvec4 k2=perm(k1.xyxy+b.zzww);\n\t\n\tvec4 c=k2+a.zzzz;\n\tvec4 k3=perm(c);\n\tvec4 k4=perm(c+1.);\n\t\n\tvec4 o1=fract(k3*(1./41.));\n\tvec4 o2=fract(k4*(1./41.));\n\t\n\tvec4 o3=o2*d.z+o1*(1.-d.z);\n\tvec2 o4=o3.yw*d.x+o3.xz*(1.-d.x);\n\t\n\treturn o4.y*d.y+o4.x*(1.-d.y);\n}\n\nvec3 acesFilm(const vec3 x){\n\tconst float a=2.51;\n\tconst float b=.03;\n\tconst float c=2.43;\n\tconst float d=.59;\n\tconst float e=.14;\n\treturn clamp((x*(a*x+b))/(x*(c*x+d)+e),0.,1.);\n}\n\n// gets the skybox color from a given view direction\nvec3 getSkyboxColor(vec3 viewDir){\n\t// skybox coordinates\n\tvec2 skyboxUV=vec2(\n\t\t(atan(viewDir.x,viewDir.z)+PI)/(PI*2.),\n\t\t(asin(viewDir.y)+PI*.5)/(PI)\n\t);\n\t\n\tvec3 col=texture2D(uSkybox,skyboxUV).xyz;\n\tcol=pow(col,vec3(2.2));\n\treturn col;\n}\n\nbool refract2(vec3 v,vec3 n,float ni_over_nt,inout vec3 refracted){\n\tvec3 uv=normalize(v);\n\tfloat dt=dot(uv,n);\n\tfloat discriminant=1.-ni_over_nt*ni_over_nt*(1.-dt*dt);\n\tif(discriminant>0.){\n\t\trefracted=ni_over_nt*(v-n*dt)-n*sqrt(discriminant);\n\t\treturn true;\n\t}\n\t\n\treturn false;\n}\n\nvec3 binarySearchHitPoint(vec3 lastP,vec3 hitP,vec3 rayDir){\n\t\n\tfor(int i=0;i<10;i++){\n\t\tvec3 midP=(lastP+hitP)*.5;\n\t\t\n\t\t// project midP in uv space\n\t\tvec4 projCoord=vProjViewMatrix*vec4(midP,1.);\n\t\tprojCoord.xyz/=projCoord.w;\n\t\t\n\t\tvec2 midpNDC=projCoord.xy;\n\t\tvec2 midpUV=midpNDC*.5+.5;\n\t\t\n\t\t// get depth at point\n\t\tvec4 backBuffer=texture2D(uBackFaceBuffer,midpUV);\n\t\tfloat depth=backBuffer.w;\n\t\t\n\t\tfloat midpDepth=abs((vViewMatrix*vec4(midP,1.)).z)*uCameraFarInverse;\n\t\tif(midpDepth>depth){\n\t\t\thitP=midP;\n\t\t}else{\n\t\t\tlastP=midP;\n\t\t}\n\t}\n\t\n\treturn hitP;\n}\n\nvec3 getRefractedColor(vec3 refractionDir,vec3 hitPoint,float refractionIndex){\n\t// move the hitpoint inside the mesh with epsilon\n\thitPoint+=refractionDir*.0001;\n\t\n\t// raymarch!\n\tfloat stepSize=.02;\n\tfloat stepMult=1.5;\n\t\n\tvec3 lastP=hitPoint;\n\tvec3 p=hitPoint;\n\tvec3 hitPNormal;\n\tfloat currStepSize=stepSize;\n\tfloat transmissionDistance=0.;\n\tfor(int i=0;i<20;i++){\n\t\tp+=currStepSize*refractionDir;\n\t\t\n\t\t// project p in uv space\n\t\tvec4 projCoord=vProjViewMatrix*vec4(p,1.);\n\t\tprojCoord.xyz/=projCoord.w;\n\t\t\n\t\tvec2 pNDC=projCoord.xy;\n\t\tvec2 pUV=pNDC*.5+.5;\n\t\t\n\t\t// get depth at point\n\t\tvec4 backBuffer=texture2D(uBackFaceBuffer,pUV);\n\t\tfloat depth=backBuffer.w;\n\t\tvec3 norm=backBuffer.xyz;\n\t\t\n\t\t// get p depth\n\t\tfloat pDepth=abs((vViewMatrix*vec4(p,1.)).z)*uCameraFarInverse;\n\t\t\n\t\tif(pDepth>depth){\n\t\t\t\n\t\t\tvec3 hitp=binarySearchHitPoint(lastP,p,refractionDir);\n\t\t\tp=hitp;\n\t\t\t\n\t\t\t// ************ get the hitpoint normal\n\t\t\tvec4 projCoord=vProjViewMatrix*vec4(p,1.);\n\t\t\tprojCoord.xyz/=projCoord.w;\n\t\t\t\n\t\t\tvec2 pNDC=projCoord.xy;\n\t\t\tvec2 pUV=pNDC*.5+.5;\n\t\t\t\n\t\t\t// get depth at point\n\t\t\thitPNormal=texture2D(uBackFaceBuffer,pUV).xyz;\n\t\t\t// ************ get the hitpoint normal - END\n\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tlastP=p;\n\t\tcurrStepSize*=stepMult;\n\t}\n\t\n\ttransmissionDistance=length(hitPoint-p);\n\t\n\t// ******************** recalc directions\n\tvec3 outward_normal;\n\tvec3 reflected=reflect(refractionDir,hitPNormal);\n\tfloat ni_over_nt;\n\tvec3 refr;\n\t// vec3 refracted;\n\tfloat reflect_prob;\n\tfloat cosine;\n\t\n\tif(dot(refractionDir,hitPNormal)>0.){\n\t\toutward_normal=-hitPNormal;\n\t\tni_over_nt=refractionIndex;\n\t\tcosine=refractionIndex*dot(refractionDir,hitPNormal);\n\t}else{\n\t\toutward_normal=hitPNormal;\n\t\tni_over_nt=1./refractionIndex;\n\t\tcosine=-dot(refractionDir,hitPNormal);\n\t}\n\t\n\t// if (refract2(refractionDir, outward_normal, ni_over_nt, refracted)) {\n\t\tif(refract2(refractionDir,outward_normal,ni_over_nt,refr)){\n\t\t\tfloat r0=(1.-refractionIndex)/(1.+refractionIndex);\n\t\t\tr0*=r0;\n\t\t\treflect_prob=r0+(1.-r0)*pow((1.-cosine),5.);\n\t\t}else{\n\t\t\treflect_prob=1.;\n\t\t}\n\t\t// ******************** recalc directions - END\n\t\t\n\t\t// ******************** get colors\n\t\tvec3 col;\n\t\tvec3 colrefl;\n\t\tvec3 colrefr;\n\t\t// if(refracted.y < 0.0) {\n\t\t\tif(refr.y<0.){\n\t\t\t\t// float t = p.y / abs(refracted.y);\n\t\t\t\t// vec3 planeHitP = p + refracted * t;\n\t\t\t\tfloat t=p.y/abs(refr.y);\n\t\t\t\tvec3 planeHitP=p+refr*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\tcolrefr=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\t// colrefr = getSkyboxColor(refracted);\n\t\t\t\t\tcolrefr=getSkyboxColor(refr);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// colrefr = getSkyboxColor(refracted);\n\t\t\t\tcolrefr=getSkyboxColor(refr);\n\t\t\t}\n\t\t\t\n\t\t\tif(reflected.y<0.){\n\t\t\t\tfloat t=p.y/abs(reflected.y);\n\t\t\t\tvec3 planeHitP=p+reflected*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\tcolrefl=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\tcolrefl=getSkyboxColor(reflected);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tcolrefl=getSkyboxColor(reflected);\n\t\t\t}\n\t\t\t\n\t\t\tcol=colrefl*(reflect_prob*uReflectionFactor)+colrefr*(1.-reflect_prob);\n\t\t\t// ******************** get colors\n\t\t\t\n\t\t\tvec3 transm=vec3(1.);\n\t\t\t// const int steps = 8;\n\t\t\tconst int steps=15;\n\t\t\tfloat step=transmissionDistance/float(steps);\n\t\t\tfloat fc=uExtintionFactor*.07;\n\t\t\t\n\t\t\t// raymarching transmission color\n\t\t\t\n\t\t\t// float noiseStrength = 0.8;\n\t\t\tfloat noiseSpeed=.5;\n\t\t\tfloat noiseTimeSpeed=.5;\n\t\t\t\n\t\t\tfor(int i=0;i<steps;i++){\n\t\t\t\tvec3 np=hitPoint+refractionDir*float(i)*step;\n\t\t\t\t\n\t\t\t\tvec3 nnp=np;\n\t\t\t\tvec3 w=normalize(np-vec3(.75,1.5,0.));\n\t\t\t\tvec3 u=vec3(0.,0.,1.);\n\t\t\t\t// vec3 timeOffset = uTime * normalize(np - vec3(0.75, 1.5, 0.0));\n\t\t\t\tvec3 timeOffset=cos(uTime)*w+sin(uTime)*u;\n\t\t\t\tfloat colorNoiseX=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed);\n\t\t\t\tfloat colorNoiseY=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed+vec3(15.3278,125.19879,0.));\n\t\t\t\tfloat colorNoiseZ=noise(np*noiseSpeed+timeOffset*noiseTimeSpeed+vec3(2.6008,78.19879,543.12993));\n\t\t\t\t\n\t\t\t\tfloat targ=length(nnp*.8*uExtinctionFX1.w-vec3(.75,1.5,0.));\n\t\t\t\tfloat targAperture=.25;\n\t\t\t\t\n\t\t\t\t// wave raymarch\n\t\t\t\tif(uExtinctionFX1.z>.5){\n\t\t\t\t\tnnp=np+sin(np.x*2.5+uTime*1.5)*.3;\n\t\t\t\t\ttarg=nnp.y-.85*uExtinctionFX1.w;\n\t\t\t\t}else{\n\t\t\t\t\tnnp=np+vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*1.05;\n\t\t\t\t\tvec3 diff=nnp-vec3(3.3,4.5,0.);\n\t\t\t\t\tfloat angle=(atan(diff.x,diff.y)+PI)/(PI*2.);\n\t\t\t\t\ttarg=length(diff)+sin(angle*32.*PI+uTime*1.5)*.4;\n\t\t\t\t\ttarg*=.475;\n\t\t\t\t\ttargAperture=.5+colorNoiseX*.75;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// what's the color at np?\n\t\t\t\tvec3 col1=uExtintionColor1;\n\t\t\t\tvec3 col2=uExtintionColor2;\n\t\t\t\tif(uExtinctionFX1.x>.5){\n\t\t\t\t\tcol1=vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*.85;\n\t\t\t\t}\n\t\t\t\tif(uExtinctionFX1.y>.5){\n\t\t\t\t\tcol2=vec3(colorNoiseX,colorNoiseY,colorNoiseZ)*.85;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(targ<1.){\n\t\t\t\t\t\n\t\t\t\t\ttransm*=exp(-step*col2*fc);\n\t\t\t\t\t\n\t\t\t\t}else if(targ>1.&&targ<1.+targAperture){\n\t\t\t\t\tfloat t=(targ-1.)/targAperture;\n\t\t\t\t\t\n\t\t\t\t\ttransm*=exp(-step*(col1*t+col2*(1.-t))*fc);\n\t\t\t\t\t\n\t\t\t\t}else if(targ<(1.+targAperture)*1.85){\n\t\t\t\t\ttransm*=exp(-step*col1*fc);\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\t// transm = (col1) * targAperture;\n\t\t\t\t\t// transm *= exp(-step * col1 * uExtintionFactor);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// return col * uExtintionColor2 * transm;\n\t\t\tcol*=transm;\n\t\t\t\n\t\t\treturn col;\n\t\t}\n\t\t\n\t\tvoid main(){\n\t\t\tvec2 screenUV=gl_FragCoord.xy*uScreenSizeInv;\n\t\t\t\n\t\t\tvec3 viewDir=normalize(vWorldSpaceFragPos-uCameraPos);\n\t\t\tvec3 normal=vWorldSpaceNormal;\n\t\t\tfloat refractionIndex=1.5;\n\t\t\t\n\t\t\tvec3 outward_normal;\n\t\t\tvec3 reflected=reflect(viewDir,normal);\n\t\t\tfloat ni_over_nt;\n\t\t\tvec3 refracted;\n\t\t\tfloat reflect_prob;\n\t\t\tfloat cosine;\n\t\t\t\n\t\t\tif(dot(viewDir,normal)>0.){\n\t\t\t\toutward_normal=-normal;\n\t\t\t\tni_over_nt=refractionIndex;\n\t\t\t\tcosine=refractionIndex*dot(viewDir,normal);\n\t\t\t}else{\n\t\t\t\toutward_normal=normal;\n\t\t\t\tni_over_nt=1./refractionIndex;\n\t\t\t\tcosine=-dot(viewDir,normal);\n\t\t\t}\n\t\t\t\n\t\t\tif(refract2(viewDir,outward_normal,ni_over_nt,refracted)){\n\t\t\t\tfloat r0=(1.-refractionIndex)/(1.+refractionIndex);\n\t\t\t\tr0*=r0;\n\t\t\t\treflect_prob=r0+(1.-r0)*pow((1.-cosine),5.);\n\t\t\t}else{\n\t\t\t\treflect_prob=1.;\n\t\t\t}\n\t\t\t\n\t\t\tvec3 reflectedCol;\n\t\t\tif(reflected.y<0.){\n\t\t\t\tfloat t=vWorldSpaceFragPos.y/abs(reflected.y);\n\t\t\t\tvec3 planeHitP=vWorldSpaceFragPos+reflected*t;\n\t\t\t\tif(abs(planeHitP.x)<planeSize&&abs(planeHitP.z)<planeSize){\n\t\t\t\t\treflectedCol=planeColor;\n\t\t\t\t}else{\n\t\t\t\t\treflectedCol=getSkyboxColor(reflected);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\treflectedCol=getSkyboxColor(reflected);\n\t\t\t}\n\t\t\t\n\t\t\tvec3 col=reflectedCol*reflect_prob*uReflectionFactor+getRefractedColor(refracted,vWorldSpaceFragPos,refractionIndex)*(1.-reflect_prob);\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.0, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333 +\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.15, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333 +\n\t\t\t// getRefractedColor(normalize(refracted + vec3(0.0, 0.35, 0.0)), vWorldSpaceFragPos) * (1.0 - reflect_prob) * 0.333;\n\t\t\t\n\t\t\t// col = getRefractedColor(refracted, vWorldSpaceFragPos) * (1.0 - reflect_prob);\n\t\t\t// vec3 col = getRefractedColor(refracted, vWorldSpaceFragPos);\n\t\t\t// col = getSkyboxColor(reflected) * reflect_prob * 1.0;\n\t\t\t\n\t\t\t// vec3 col = viewDir;\n\t\t\t// gl_FragColor = vec4(col, 1.0);\n\t\t\t// return;\n\t\t\t\n\t\t\tcol*=pow(2.,uExposure);\n\t\t\tcol=acesFilm(col);\n\t\t\tcol=pow(col,vec3(1./2.2));\n\t\t\t\n\t\t\tgl_FragColor=vec4(col,1.);\n\t\t\t// gl_FragColor = vec4(getSkyboxColor(viewDir), 1.0) * 0.5 + vec4(viewDir * 0.5 + 0.5, 1.0);\n\t\t}"}),{nodes:O}=([c,i]=P((()=>o(a.modelPath,{draco:!0,decoderPath:"./draco/"}))),c=await c,i(),c),w=O.Scene.getObjectByName(a.modelName),_=new tt(w,l.value,d.value),G=w?.clone();G?.traverse((t=>{t instanceof h&&(t.material=S,t.material.side=x)}));const{onAfterLoop:B}=e();return B((({elapsed:t})=>{w&&S&&(S.uniforms.uCameraPos.value=l.value.position.clone(),S.uniforms.uTime.value=t,_.compute(6),S.uniforms.uBackFaceBuffer.value=_.getBackFaceTexture(),S.uniforms.uFrontFaceBuffer.value=_.getFrontFaceTexture(),d.value.setRenderTarget(null),d.value.autoClear=!1)})),g((()=>{a.extintionFactor&&(S.uniforms.uExtintionFactor.value=a.extintionFactor),a.reflectionFactor&&(S.uniforms.uReflectionFactor.value=a.reflectionFactor),a.exposure&&(S.uniforms.uExposure.value=a.exposure),a.extintionColor1&&(S.uniforms.uExtintionColor1.value=new p("#fff").sub(new p(a.extintionColor1).convertLinearToSRGB())),a.extintionColor2&&(S.uniforms.uExtintionColor2.value=new p("#fff").sub(new p(a.extintionColor2).convertLinearToSRGB())),a.extintionCol1Random&&(S.uniforms.uExposure.value=a.exposure)})),R((()=>a.extintionCol1Random),(t=>{S.uniforms.uExtinctionFX1.value.x=t?1:0}),{immediate:!0}),R((()=>a.extintionCol2Random),(t=>{S.uniforms.uExtinctionFX1.value.y=t?1:0}),{immediate:!0}),(t,e)=>(y(),b("primitive",{object:F(G)},null,8,et))}}),ot=S({__name:"ssrtGlass",setup(t){const e={clearColor:"#201919",windowSize:!0,toneMapping:C,toneMappingExposure:.8},n=O({size:[20,20],color:"#cbcb96",shadowColor:"#b8b59e",edge:.35}),o=O({extintionFactor:5,reflectionFactor:1,exposure:0,extintionColor1:"rgb(192,123,25)",extintionColor2:"rgb(26, 166, 192)",extintionCol1Random:!1,extintionCol2Random:!1}),W=new a({title:"参数"});return W.addBinding(o,"extintionFactor",{label:"消光系数",min:0,max:10,step:.1}),W.addBinding(o,"reflectionFactor",{label:"反射系数",min:0,max:2,step:.1}),W.addBinding(o,"exposure",{label:"曝光系数",min:-1,max:1,step:.1}),W.addBinding(o,"extintionColor1",{label:"消光颜色一"}),W.addBinding(o,"extintionColor2",{label:"消光颜色二"}),W.addBinding(o,"extintionCol1Random",{label:"随机色1"}),W.addBinding(o,"extintionCol2Random",{label:"随机色2"}),(t,a)=>{const W=w("TresCanvas");return y(),b(M,null,[_(F(V)),_(W,Q(I(e)),{default:G((()=>[a[0]||(a[0]=B("TresPerspectiveCamera",{position:[0,8,-13],fov:45,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),_(F(r),{enableDamping:""}),a[1]||(a[1]=B("TresAmbientLight",{intensity:10},null,-1)),(y(),N(j,null,{default:G((()=>[_(c,Q(I(n)),null,16)])),_:1})),(y(),N(j,null,{default:G((()=>[_(nt,H({scale:2},o,{modelPath:"https://opensource.cdn.icegl.cn/model/eCommerce/guanYu.glb",modelName:"statue",skyBoxTexture:"https://opensource.cdn.icegl.cn/images/skyBox/workshop_blur.jpg"}),null,16,["modelPath","skyBoxTexture"])])),_:1})),(y(),N(j,null,{default:G((()=>[_(i,{texture:"https://opensource.cdn.icegl.cn/images/skyBox/workshop_blur.jpg"},null,8,["texture"])])),_:1}))])),_:1},16)],64)}}});export{ot as default};

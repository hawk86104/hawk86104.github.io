import{c7 as t,a3 as n,C as e,V as r}from"./three.WgQSjl1J1738818486026.js";import{a as o}from"./@tresjs.ZGxFoQtw1738818486026.js";import{R as c}from"./all.three.w-Cc8HG21738818486026.js";import{d as i,b as a,a3 as s,a2 as u,o as f,H as l,N as p,m,u as v}from"./@vue.NRI7TcgI1738818486026.js";function g(t,n){const e=x();return(g=function(t,n){return e[t-=321]})(t,n)}!function(t,n){const e=g,r=x();for(;;)try{if(964804===parseInt(e(338))/1+-parseInt(e(348))/2*(-parseInt(e(359))/3)+-parseInt(e(329))/4+-parseInt(e(333))/5*(parseInt(e(337))/6)+-parseInt(e(353))/7*(-parseInt(e(335))/8)+-parseInt(e(357))/9+-parseInt(e(321))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){d(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(334),"i"),r=y(t(350));n.test(r+t(323))&&e[t(340)](r+"input")?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(356)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(){const t=["9770MUzvYM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","186320qgggMh","#include <project_vertex>","1734VMPdfG","755802ZHXUUI","log","test","console","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","constructor","replace","toString","void main() {","action","985082MahyFz","debu","init","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","91QeNDUl","stateObject","trace","apply","1786995gceWcG","vertexShader","9MQPcYX","660180qisRSY","string","chain","bind","info","__proto__","prototype","fragmentShader","2968448vsINFL","length","warn","exception"];return(x=function(){return t})()}h(void 0,(function(){const t=g,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(341)]=n[t(341)]||{},r=[t(339),t(331),t(325),"error",t(332),"table",t(355)];for(let o=0;o<r[t(330)];o++){const n=h.constructor[t(327)][t(324)](h),c=r[o],i=e[c]||n;n[t(326)]=h[t(324)](h),n[t(345)]=i.toString.bind(i),e[c]=n}}))();function y(t){function n(t){const e=g;if(typeof t===e(322))return function(t){}.constructor("while (true) {}")[e(356)]("counter");1!==(""+t/t)[e(330)]||t%20==0?function(){return!0}[e(343)](e(349)+"gger").call(e(347)):function(){return!1}.constructor(e(349)+"gger")[e(356)](e(354)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=j;!function(t,n){const e=j,r=C();for(;;)try{if(348207===-parseInt(e(201))/1+parseInt(e(204))/2*(parseInt(e(179))/3)+-parseInt(e(182))/4*(parseInt(e(211))/5)+parseInt(e(207))/6*(-parseInt(e(229))/7)+parseInt(e(223))/8+parseInt(e(215))/9+parseInt(e(220))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const M=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(198)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){M(this,(function(){const t=j,n=new RegExp(t(192)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=z(t(200));n[t(184)](r+t(205))&&e[t(184)](r+t(236))?z():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(198)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=j;let n;try{n=Function(t(232)+t(189)+");")()}catch(o){n=window}const e=n[t(196)]=n.console||{},r=["log","warn",t(193),t(190),t(194),"table",t(234)];for(let c=0;c<r[t(239)];c++){const n=I[t(186)][t(216)][t(209)](I),o=r[c],i=e[o]||n;n[t(214)]=I[t(209)](I),n[t(203)]=i[t(203)].bind(i),e[o]=n}}))();const b=[_(231)],w=[_(191),_(206)];function C(){const t=["trace","uv1","input","onBeforeRender","reflectMap","length","aoMap","tmsmRef","41901chhamf","primitive","uniforms","8268RhgDXO","debu","test","value","constructor","action","TresMeshStandardMaterial",'{}.constructor("return this")( )',"error","object","function *\\( *\\)","info","exception","mirror","console","reflectorDiffuse","apply","#ffffff","init","353852lnMoJE","attributes","toString","6QiusIp","chain","visible","2233284kGbgSB","while (true) {}","bind","#444","1355fdeGcm","mixStrength","gger","__proto__","3540699GJWeZA","prototype","TresPlaneGeometry","renderTargetUniform","channel","11658800iRIxBV","color","repeat","265904vBUquE","assign","textureMatrix","wrapS","call","showGridHelper","7usuesO","wrapT","rotation-x","return (function() ","textureMatrixUniform"];return(C=function(){return t})()}const S=i({__name:_(197),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(199)}},async setup(i){const d=_;let h,x;const y=i,M=new t(9.5,10),I=a(),C=a(),S=a(),j=new c,z={mirror:{value:y[d(195)]},mixStrength:{value:y[d(212)]}},E=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var R=0;R<3;R++)E[R][d(226)]=n,E[R][d(230)]=n,E[R][d(222)].set(16,16);const T={color:new e(d(210)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},U=t=>{const n=d;t[n(181)][n(238)]=j[n(218)],t.uniforms[n(225)]=j[n(233)],t[n(181)]=Object[n(224)](t[n(181)],z),(t=>{const n=g;t[n(358)]=t[n(358)][n(344)](n(346),n(352)),t[n(358)]=t[n(358)][n(344)](n(336),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=g;t[n(328)]=t[n(328)][n(344)](n(346),n(342)),t[n(328)]=t[n(328)][n(344)]("#include <emissivemap_fragment>",n(351))})(t)};return u((()=>{const t=d;I[t(185)]&&(I[t(185)][t(202)][t(235)]=I.value[t(202)].uv),S[t(185)]&&(S.value[t(177)][t(219)]=1,S.value.onBeforeCompile=U),C.value&&(C.value.add(j),C[t(185)][t(237)]=(t,n,e)=>{j.update(t,n,e)}),y[t(221)]&&S[t(185)]&&(S[t(185)][t(221)]=new e(y[t(221)]))})),(t,n)=>{const e=d;return f(),l("TresGroup",null,[p("TresMesh",{ref_key:"tmRef",ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(217),{ref_key:"tpgRef",ref:I,args:[10,10]},null,512),p(e(188),m({ref_key:e(178),ref:S},T),null,16)],8,b),p(e(180),{object:v(M),visible:t[e(228)]},null,8,w)])}}});function j(t,n){const e=C();return(j=function(t,n){return e[t-=177]})(t,n)}function z(t){function n(t){const e=j;if("string"==typeof t)return function(t){}[e(186)](e(208))[e(198)]("counter");1!==(""+t/t)[e(239)]||t%20==0?function(){return!0}.constructor(e(183)+"gger")[e(227)](e(187)):function(){return!1}.constructor(e(183)+e(213))[e(198)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

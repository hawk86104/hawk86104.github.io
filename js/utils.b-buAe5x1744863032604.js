import"./@fesjs.1a7Lul6Z1744863032604.js";import{_ as t}from"./jszip.H-wAjEeh1744863032604.js";import{F as n}from"./file-saver.CaT90B8D1744863032604.js";import{T as e,z as s,aG as o}from"./three.B0XaFSnH1744863032604.js";const r=i;!function(){const t=i,n=m();for(;;)try{if(536193===parseInt(t(134))/1+parseInt(t(165))/2+-parseInt(t(121))/3+-parseInt(t(116))/4+-parseInt(t(152))/5+parseInt(t(178))/6+parseInt(t(125))/7)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(167)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=i,n=new RegExp(t(172)),e=new RegExp(t(139),"i"),s=w(t(169));n[t(171)](s+t(108))&&e[t(171)](s+"input")?w():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(167)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=m();return i=function(t,n){return e[t-=100]},i(t,n)}async function u(t){const n=new s;return new Promise(((e,s)=>{const o=i;n.load(t,(t=>e(JSON[o(157)](t))),void 0,(t=>s(t)))}))}c(void 0,(function(){const t=i,n=function(){const t=i;let n;try{n=Function(t(100)+t(159)+");")()}catch(e){n=window}return n}(),e=n[t(182)]=n.console||{},s=[t(163),t(111),"info",t(115),"exception",t(140),t(135)];for(let o=0;o<s.length;o++){const n=c[t(197)][t(191)][t(158)](c),r=s[o],a=e[r]||n;n[t(105)]=c[t(158)](c),n[t(107)]=a.toString.bind(a),e[r]=n}}))(),e[r(193)][r(175)]=!0;class p extends e[r(133)]{constructor(t){super(t)}[r(124)](t,n,e,o){const a=r,c=new s(this.manager);c[a(119)](a(127)),c[a(124)](t,(t=>n&&n(t)),e,o)}}async function l(t){const n=new s;return new Promise(((e,s)=>{const o=i;n[o(119)](o(131)),n.load(t,(n=>{const a=o,c=new FileReader;c[a(148)]=()=>{const n=a,s=function(t){const n=r,e=t[n(174)](".")[n(104)]()[n(177)]();return{jpg:n(151),jpeg:"image/jpeg",png:"image/png",gif:n(196),bmp:n(137),webp:n(144)}[e]||n(185)}(t),o=c[n(118)].split(",")[1];e(n(117)+s+n(114)+o)},c.onerror=t=>{s(t)},c[a(183)](n)}),void 0,(t=>s(t)))}))}class f extends o{constructor(t){super(t)}load(n,s,o,a){const c=r,i=new(e[c(132)])(this[c(149)]);i.setResponseType(c(131)),i[c(124)](n,(async n=>{const e=c;try{const o=await t[e(187)](n);s&&s(o)}catch(o){a&&a(o)}}),o,a)}}const g=t=>{const n=r,e=t[n(154)](0,15),s=n(199),o=n(146),a=n(109),c=n(160),i=n(168),u=n(181);return s.startsWith(e)||o[n(145)](e)?"JPEG":a[n(145)](e)||c[n(145)](e)?n(166):"data:image/gif;base64,"[n(145)](e)||"data:image/GIF;base64,"[n(145)](e)?"GIF":i.startsWith(e||u.startsWith(e))?n(102):n(147)},d=e=>{const s=r,o=[];e[s(195)][s(173)]&&e[s(195)][s(173)][s(130)]((t=>{const n=s;"BufferGeometry"===t[n(198)]&&(o[n(113)]({uuid:t.uuid,data:t[n(194)]}),t[n(194)]=n(186)+t[n(142)]+n(155))}));const a=[];e[s(195)][s(126)]&&e[s(195)][s(126)].forEach((t=>{const n=s;t.url&&(a[n(113)]({uuid:t.uuid,url:t[n(170)]}),t[n(170)][n(198)]?t[n(170)]=n(190)+t[n(142)]+"."+t.url[n(198)]+n(155):t[n(170)]="url:images/"+t[n(142)]+"."+g(t[n(170)]))}));const c=new t;if(o[s(156)]){const t=c[s(141)](s(173));o[s(130)]((n=>{const e=s;t[e(162)](n[e(142)]+e(155),JSON[e(143)](n[e(194)]))}))}if(a.length){const t=c.folder(s(126));a[s(130)]((n=>{const e=s;n[e(170)].type?t.file(n[e(142)]+"."+n[e(170)][e(198)]+e(155),JSON[e(143)](n[e(170)])):t.file(n[e(142)]+"."+g(n.url),n.url[e(174)](e(114))[e(104)](),{base64:!0})}))}const i=JSON[s(143)](e);return c[s(162)](s(110),i),c[s(161)]({type:s(131)})[s(112)]((t=>{const e=s;n.saveAs(t,e(180))}))};function m(){const t=["data:image/","2137750Mmwxkj","PNG","apply","data:image/webp;base64,","init","url","test","function *\\( *\\)","geometries","split","enabled","base64","toLowerCase","5572362TYCsIw","files","config.zip","data:image/WEBP;base64,","console","readAsDataURL","async","application/octet-stream","url:geometries/","loadAsync","onerror","name","url:images/","prototype","while (true) {}","Cache","data","scene","image/gif","constructor","type","data:image/jpeg;base64,","return (function() ","url:","WEBP","string","pop","__proto__","call","toString","chain","data:image/png;base64,","app.json","warn","then","push",";base64,","error","3517144DHViZW","data:","result","setResponseType","message","3193509BSGcot","slice","counter","load","1549380FqNLfG","images","json","action","debu","forEach","blob","FileLoader","Loader","390592kDqgCc","trace","get","image/bmp","catch","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","folder","uuid","stringify","image/webp","startsWith","data:image/JPEG;base64,","Unknown","onloadend","manager","gger","image/jpeg","647760dEacOm","endsWith","substring",".json","length","parse","bind",'{}.constructor("return this")( )',"data:image/PNG;base64,","generateAsync","file","log"];return(m=function(){return t})()}const h=(t,n,e)=>{const s=r;t[s(173)]<=0&&t[s(126)]<=0&&e(n)},b=(n,e)=>{const s=r;let o=null;return t[s(187)](n)[s(112)]((t=>{const n=s;t[n(179)][n(110)]?t.files["app.json"][n(184)](n(103))[n(112)]((s=>{const a=n;o=JSON.parse(s);const c=(t=>{const n=r,e={geometries:0,images:0};return t[n(195)][n(173)]?.[n(130)]((t=>{const s=n;t[s(194)].startsWith(s(101))&&e[s(173)]++})),t.scene[n(126)]?.[n(130)]((t=>{const s=n;t[s(170)][s(145)](s(101))&&e.images++})),e})(o);h(c,o,e),o[a(195)][a(173)]?.[a(130)]((n=>{const s=a;n[s(194)][s(145)](s(101))&&t[s(179)][n[s(194)][s(122)](4)][s(184)](s(103)).then((t=>{const r=s;n[r(194)]=JSON[r(157)](t),c[r(173)]--,h(c,o,e)}))})),o.scene[a(126)]?.[a(130)]((n=>{const s=a;if(n[s(170)][s(145)]("url:")){const r=n.url.slice(4);r[s(153)](s(155))?t[s(179)][r][s(184)](s(103))[s(112)]((t=>{const r=s;n[r(170)]=JSON[r(157)](t),c[r(126)]--,h(c,o,e)})):t[s(179)][r].async(s(176)).then((t=>{const a=s,i=r[a(174)]("."),u=i[i.length-1].toUpperCase();n[a(170)]=a(164)+u+a(114)+t,c[a(126)]--,h(c,o,e)}))}}))})):console[n(115)]("非标准文件：不存在 app.json")}),(t=>{const e=s;console.error(n[e(189)]+": "+t[e(120)])})),o};function w(t){function n(t){const e=i;if("string"==typeof t)return function(t){}[e(197)](e(192))[e(167)](e(123));1!==(""+t/t)[e(156)]||t%20==0?function(){return!0}[e(197)](e(129)+e(150))[e(106)](e(128)):function(){return!1}[e(197)](e(129)+e(150))[e(167)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as J,f as Z,l as a,d as e,g,b as i,u as l};

import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{F as o,_ as t}from"./@tresjs.B1f7s3pS1767066396612.js";import{p as a,e as n}from"./three-tile.D9ZubqJI1767066396612.js";import{T as r}from"./@tweenjs.C9YEcV0Y1767066396612.js";import{c as l,s}from"./informationDiv.zYrf_U5j1767066396612.js";const{defineComponent:p}=await e("vue"),c=p({__name:"flyTo",props:{map:{}},setup(e,{expose:a}){const n=e,{camera:l,controls:s}=o();let p=[];const{onBeforeRender:c}=t();return c(()=>{p&&p[0]?.update()}),a({flyToGeo:(e,o)=>{const t=e=>n.map.localToWorld(n.map.geo2pos(e));((e,o)=>{s.value&&s.value.target.copy(o);const t=l.value.position;p[0]=new r(t).to(e).start()})(t(e),t(o))},goToGeo:(e,o)=>{const t=n.map.localToWorld(n.map.geo2pos(o)),a=n.map.localToWorld(n.map.geo2pos(e));l.value.position.copy(a),s.value.target.copy(t),s.value.dispatchEvent({type:"change"})}}),(e,o)=>null}}),{defineComponent:i}=await e("vue"),{createElementVNode:m,unref:u,createVNode:v,Fragment:f,openBlock:d,createElementBlock:w}=await e("vue"),y=["object"],{watch:g,ref:T}=await e("vue"),h=await e("three"),j=i({__name:"mapBoxShow",setup(e){const t=new a({imgSource:[new n({style:"6"}),new n({style:"8"})],lon0:90,minLevel:2,maxLevel:20});t.rotateX(-Math.PI/2);const r=new h.Vector3(110,30,0),p=new h.Vector3(110,0,1e7),i=t.localToWorld(t.geo2map(r)),j=t.localToWorld(t.geo2map(p)),_=T(),{camera:V,controls:W,scene:k,renderer:x}=o();V.value&&V.value.position.copy(j),g(()=>W.value,e=>{e&&(e.target.copy(i),l(e,V.value,k.value))}),g(()=>_.value,e=>{e&&e.target.position.copy(i)});const B=T();return g(()=>B.value,e=>{if(e){const o=new h.Vector3(118.724693,32.00741,9655),t=new h.Vector3(118.724419,32.010354,0);setTimeout(()=>{e.flyToGeo(o,t)},500)}}),s(V.value,x.domElement,t),(e,o)=>(d(),w(f,null,[m("TresDirectionalLight",{ref_key:"tdLight",ref:_,position:[0,2e3,1e3],intensity:1},null,512),m("primitive",{object:u(t)},null,8,y),v(c,{map:u(t),ref_key:"flyToRef",ref:B},null,8,["map"])],64))}});export{j as _};

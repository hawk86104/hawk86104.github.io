import{_ as t,C as e,ai as n}from"./three.3b9CEYeV1731055558423.js";import{e as r,W as a,U as o,c as i}from"./@tresjs.KsuCtVXf1731055558423.js";import{a as s}from"./index.4qvnjoNo1731055558423.js";import"./index.yQc7Eo1_1731055558423.js";import{z as l}from"./three-custom-shader-material.JEUeb9V91731055558423.js";import{p as u}from"./gl-noise.BrVtymbx1731055558423.js";import{d as c,b as p,a3 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as z}from"./@vue.u2cBPEWn1731055558423.js";import{P as C}from"./tweakpane.yHWGBmom1731055558423.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Fsq3VeOw1731055558423.js";import"./@vueuse.GLWi_e1b1731055558423.js";import"./three-stdlib.l7tW0NL21731055558423.js";import"./@pmndrs.3lOkADtW1731055558423.js";import"./object-hash.Aye5eUi-1731055558423.js";import"./@amap.Gx_2STAs1731055558423.js";import"./jszip.rU4UDkEH1731055558423.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.7YyvCYch1731055558423.js";import"./all.three.JusmaqcJ1731055558423.js";import"./oimophysics.x0jH7fze1731055558423.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.knjSAXhm1731055558423.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.deNl1w3R1731055558423.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.yTH5pbBI1731055558423.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.1KgNZ1AG1731055558423.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.5o6GzX_j1731055558423.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.uPyyf0YI1731055558423.js";const S=P;!function(t,e){const n=P,r=H();for(;;)try{if(581302===parseInt(n(247))/1+-parseInt(n(223))/2+parseInt(n(227))/3+-parseInt(n(269))/4+-parseInt(n(215))/5*(parseInt(n(259))/6)+parseInt(n(234))/7+parseInt(n(271))/8)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[P(270)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){G(this,(function(){const t=P,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=F(t(261));e[t(236)](r+t(248))&&n[t(236)](r+t(257))?F():r("0")}))()}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[P(270)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=P;let e;try{e=Function(t(217)+t(266)+");")()}catch(a){e=window}const n=e[t(274)]=e[t(274)]||{},r=[t(253),"warn",t(230),t(219),"exception",t(239),t(268)];for(let o=0;o<r[t(225)];o++){const e=I.constructor[t(218)].bind(I),a=r[o],i=n[a]||e;e[t(242)]=I[t(226)](I),e[t(263)]=i[t(263)][t(226)](i),n[a]=e}}))();const W=["rotation-x"],B=[S(265)],O=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(222)},waterHighlight:{default:S(241)},brightness:{default:1},baseMaterial:{default:t[S(229)]}},setup(n){const o=S,i=n,s=p(null),c={vertex:o(272),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},b={uTime:{value:0},waterColor:{value:new(t[o(273)])(i[o(221)])[o(245)]()},waterHighlight:{value:new e(i.waterHighlight)[o(245)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[o(244)]},uHeight:{value:i[o(237)]}},{onLoop:w}=r();return w((({elapsed:t})=>{const e=o;b[e(249)][e(216)]=-t/5})),f((()=>{const e=o;i[e(237)]&&(b[e(267)][e(216)]=i[e(237)]),i[e(221)]&&(b[e(221)][e(216)]=new(t[e(273)])(i[e(221)])[e(245)]()),i[e(228)]&&(b[e(228)][e(216)]=new(t[e(273)])(i[e(228)])[e(245)]()),i[e(244)]&&(b[e(244)][e(216)]=i[e(244)])})),g((()=>i[o(231)]),(t=>{const e=o;s.value.material[e(254)]=!0})),g((()=>i[o(224)]),(e=>{const n=o,r=new l({baseMaterial:t[e],vertexShader:u(c[n(264)]),fragmentShader:c[n(246)],uniforms:b,flatShading:i[n(231)],side:t[n(233)],roughness:.2,metalness:.1,silent:!0});s[n(216)].material[n(235)](),s[n(216)][n(255)]=r})),(e,n)=>{const r=o;return h(),m("TresMesh",{ref_key:r(250),ref:s,"rotation-x":-Math.PI/2},[v(r(256),{args:[5,5,e[r(237)],64,64,1]},null,8,B),d(_(a),{baseMaterial:t[r(229)],vertexShader:_(u)(c.vertex),fragmentShader:c[r(246)],uniforms:b,side:t[r(233)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[r(224),r(232),"fragmentShader",r(220),r(252)])],8,W)}}});function P(t,e){const n=H();return(P=function(t,e){return n[t-=215]})(t,e)}function F(t){function e(t){const n=P;if("string"==typeof t)return function(t){}.constructor(n(240)).apply(n(258));1!==(""+t/t)[n(225)]||t%20==0?function(){return!0}[n(238)](n(260)+"gger")[n(262)](n(251)):function(){return!1}[n(238)]("debugger")[n(270)](n(243)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function H(){const t=["Flatshading","vertexShader","DoubleSide","4478229wURkPL","dispose","test","height","constructor","table","while (true) {}","#b3ffff","__proto__","stateObject","brightness","convertLinearToSRGB","fragment","796511KAXwlu","chain","uTime","tmRef","action","flatShading","log","needsUpdate","material","TresBoxGeometry","input","counter","132ZXurwN","debu","init","call","toString","vertex","args",'{}.constructor("return this")( )',"uHeight","trace","4202068pbnUpF","apply","5226408hmgcFq","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","Color","console","147065jdnoWQ","value","return (function() ","prototype","error","side","waterColor","#52a7f7","809518RRTOZd","baseMaterial","length","bind","1782315ROBIUm","waterHighlight","MeshPhysicalMaterial","info"];return(H=function(){return t})()}!function(t,e){const n=k,r=N();for(;;)try{if(283316===-parseInt(n(161))/1+-parseInt(n(144))/2+parseInt(n(152))/3*(parseInt(n(191))/4)+-parseInt(n(154))/5+-parseInt(n(137))/6+-parseInt(n(169))/7+parseInt(n(190))/8)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(138)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=k,e=new RegExp(t(145)),n=new RegExp(t(172),"i"),r=A("init");e[t(153)](r+t(170))&&n.test(r+"input")?A():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(t,e){const n=N();return(k=function(t,e){return n[t-=137]})(t,e)}function N(){const t=["constructor","console","debu","水体颜色","waterColor","error","#627179","2522142RrbFda","chain","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","MeshToonMaterial","trace","__proto__","TresDirectionalLight","counter","MeshDepthMaterial","table","pos-x.jpg","neg-y.jpg","MeshPhysicalMaterial","baseMaterial","info","浪头颜色","MeshBasicMaterial","MeshStandardMaterial","addBinding","10605176yrYdQh","124LnXeWh","#b3ffff","toString","neg-z.jpg","log","height","length","bind","addBlade","1285758ZadSGi","apply","warn","MeshPhongMaterial",'{}.constructor("return this")( )',"MeshNormalMaterial","exception","589978kGtxtf","function *\\( *\\)","list","action","neg-x.jpg","while (true) {}","target","gger","15549LJtDtW","test","878020NPbaAR","prototype","Flatshading","pos-z.jpg","waterHighlight","#3a78a2","MeshLambertMaterial","157812VjbicK"];return(N=function(){return t})()}R(void 0,(function(){const t=k,e=function(){const t=k;let e;try{e=Function("return (function() "+t(141)+");")()}catch(n){e=window}return e}(),n=e[t(163)]=e[t(163)]||{},r=[t(195),t(139),t(185),t(167),t(143),t(180),t(175)];for(let a=0;a<r[t(197)];a++){const e=R[t(162)][t(155)][t(198)](R),o=r[a],i=n[o]||e;e[t(176)]=R[t(198)](R),e[t(193)]=i.toString[t(198)](i),n[o]=e}}))();const L=c({__name:"customWater",setup(t){const e=k,r=b({alpha:!0,toneMapping:n,windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:e(168),sectionColor:e(159),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:e(192),brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new C;return c[e(189)](u,e(196),{label:"高度",min:.1,max:5,step:.1}),c.addBinding(u,e(166),{label:e(165)}),c[e(189)](u,e(158),{label:e(186)}),c[e(189)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,e(156),{label:e(156)}),c[e(199)]({view:e(146),label:"材质",options:[{text:"MeshPhysicalMaterial",value:e(183)},{text:"MeshBasicMaterial",value:e(187)},{text:e(142),value:e(142)},{text:e(188),value:e(188)},{text:"MeshPhongMaterial",value:e(140)},{text:"MeshToonMaterial",value:e(174)},{text:e(160),value:e(160)},{text:e(179),value:e(179)}],value:u[e(184)]}),c.on("change",(t=>{const n=e;"材质"===t[n(150)].label&&(u[n(184)]=t.value)})),(t,n)=>{const c=e;return h(),w(_(i),x(r,{"window-size":""}),{default:y((()=>[n[0]||(n[0]=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),M(j(a)),null,16),n[1]||(n[1]=v("TresAmbientLight",{intensity:.5},null,-1)),n[2]||(n[2]=v(c(177),{position:[15,15,15],intensity:1},null,-1)),d(O,M(j(u)),null,16),d(_(T),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(z,null,{default:y((()=>[d(_(s),{files:[c(181),c(148),"pos-y.jpg",c(182),c(157),c(194)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function A(t){function e(t){const n=k;if(typeof t===n(171))return function(t){}[n(162)](n(149))[n(138)](n(178));1!==(""+t/t)[n(197)]||t%20==0?function(){return!0}.constructor(n(164)+n(151)).call(n(147)):function(){return!1}.constructor(n(164)+"gger").apply(n(173)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

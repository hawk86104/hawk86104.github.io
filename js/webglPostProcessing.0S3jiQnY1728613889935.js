import{i as t}from"./ice-utils.dycUOUy11728613889935.js";import{_ as n,m as e}from"./gl-matrix.oVMHBNGj1728613889935.js";import{P as o}from"./tweakpane.yHWGBmom1728613889935.js";import{d as r,r as i,q as a,o as c,E as s,L as u,u as f}from"./@vue.JNsx1iN61728613889935.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=A;!function(t,n){const e=A,o=x();for(;;)try{if(500920===-parseInt(e(306))/1+parseInt(e(356))/2*(-parseInt(e(328))/3)+-parseInt(e(388))/4*(-parseInt(e(341))/5)+-parseInt(e(331))/6*(parseInt(e(343))/7)+parseInt(e(348))/8*(-parseInt(e(372))/9)+parseInt(e(311))/10+-parseInt(e(316))/11*(-parseInt(e(399))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=A,n=new RegExp(t(323)),e=new RegExp(t(365),"i"),o=T("init");n.test(o+t(380))&&e.test(o+t(385))?T():o("0")}))()}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(370)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function x(){const t=["change","clear","BYTES_PER_ELEMENT","height","function *\\( *\\)","console","error","FRAMEBUFFER","texParameteri","43959bRFrKu","constructor","RGBA","114VHztyL","debu","ONE_MINUS_SRC_ALPHA","TRIANGLES","none","return (function() ","TEXTURE_WRAP_T","bindBuffer","inline","prototype","505vzMinC","drawElements","193669SJbBWw","mixParam","table","SRC_ALPHA",'{}.constructor("return this")( )',"17896YTvsBb","src","TEXTURE_MAG_FILTER","bufferData","UNSIGNED_BYTE","trace","offset_left_bottom","bindFramebuffer","50AbBjJd","addBinding","texImage2D","toString","__proto__","uniformMatrix4fv","value","length","NEAREST","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","innerHeight","getContext","bindTexture","createFramebuffer","apply","mat4","9BMPvES","canvas","createBuffer","ortho","while (true) {}","create","TEXTURE_WRAP_S","uModel","chain","offset_left_top","ELEMENT_ARRAY_BUFFER","lookAt","scale","input","enableVertexAttribArray","gger","20756LTtvkP","CLAMP_TO_EDGE","log","offset_right_top","string","getElementById","logo-texture","vertexAttribPointer","framebufferTexture2D","bind","hidden","24PYXSvf","img","getUniformLocation","action","blendFunc","useProgram","STATIC_DRAW","innerWidth","COLOR_ATTACHMENT0","width","#canvaswebgl","95357sJzotS","FLOAT","exception","offset_right_bottom","warn","8243550rTIGcq","COLOR_BUFFER_BIT","enable","ARRAY_BUFFER","call","781374OJFobR","TEXTURE_2D","clearColor"];return(x=function(){return t})()}d(void 0,(function(){const t=A;let n;try{n=Function(t(336)+t(347)+");")()}catch(r){n=window}const e=n[t(324)]=n[t(324)]||{},o=[t(390),t(310),"info",t(325),t(308),t(345),t(353)];for(let i=0;i<o[t(363)];i++){const n=d[t(329)][t(340)][t(397)](d),r=o[i],a=e[r]||n;n[t(360)]=d[t(397)](d),n.toString=a[t(359)][t(397)](a),e[r]=n}}))();const p={id:"canvaswebgl"},g=[_(349)];function A(t,n){const e=x();return(A=function(t,n){return e[t-=299]})(t,n)}const R=r({__name:"webglPostProcessing",setup(r){const E=_;let d,x,A,R,T,b,v,y,F,P,w,h,I;const B=1,C=.71,S=.76,L=new o({title:"参数"}),U=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});L.addBlade({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(E(319),(t=>{const n=E;O(),x.uniform1f(h,t[n(362)])}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);L[E(357)](U,E(398),{label:"是否后处理"}),L[E(357)](U,E(391),{picker:E(339),x:{min:0,max:1},y:{min:0,max:1}}).on(E(319),(t=>{const n=E;M[0]=U[n(391)].x,M[1]=U.offset_right_top.y,O()})),L.addBinding(U,E(309),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(319),(t=>{const n=E;M[5]=U[n(309)].x,M[6]=U[n(309)].y,O()})),L[E(357)](U,E(354),{picker:E(339),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(319),(t=>{const n=E;M[10]=U.offset_left_bottom.x,M[11]=U[n(354)].y,O()})),L[E(357)](U,E(381),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(319),(t=>{const n=E;M[15]=U[n(381)].x,M[16]=U[n(381)].y,O()})),a((()=>{D()}));const D=function(){const n=E;d=document.querySelector(n(305)),d[n(304)]=window[n(302)],d[n(322)]=window[n(366)],x=d[n(367)]("webgl"),x&&(function(){const n=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=G(e,o),A=t(x,l,m),F=x.getUniformLocation(A,"uProjection"),P=x[n(401)](A,"uView"),w=x.getUniformLocation(A,n(379)),I=j(document[n(393)](n(394)))}(),O(),x[n(313)](x.BLEND),x[n(299)](x[n(346)],x[n(333)]),N())};function N(){const t=E;x[t(355)](x[t(326)],v),x[t(318)](B,C,S,1),x[t(320)](x[t(312)]),function(){const t=E;x[t(300)](A),x[t(338)](x.ARRAY_BUFFER,R);const o=n[t(371)][t(377)]();e[t(375)](o,0,d.width,d[t(322)],0,.1,100),x[t(361)](F,!1,o);const r=n[t(371)].create();n[t(371)][t(383)](r,[0,0,1],[0,0,0],[0,1,0]),x[t(361)](P,!1,r),Y(I,600,600),Y(I,400,400)}(),x[t(355)](x.FRAMEBUFFER,null),U.hidden&&(x[t(320)](x[t(312)]),x[t(318)](0,0,1,1),x[t(338)](x[t(314)],T),x[t(300)](b),x[t(368)](x.TEXTURE_2D,y)),x[t(342)](x.TRIANGLES,6,x[t(352)],0),requestAnimationFrame(N)}function Y(t,e,o){const r=E;let i=n[r(371)].create();n[r(371)].translate(i,i,[e,o,0]),n[r(371)][r(384)](i,i,[250,250,0]),x[r(361)](w,!1,i),x[r(368)](x[r(317)],t),x.drawElements(x[r(334)],6,x[r(352)],0)}function O(){const n=E,e=new Uint8Array([0,1,2,0,2,3]);T=G(M,e),b=t(x,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),h=x[n(401)](b,n(344)),x[n(401)](b,"color"),function(){const t=E;y=j(d),v=x[t(369)](),x[t(355)](x.FRAMEBUFFER,v),x[t(396)](x[t(326)],x[t(303)],x[t(317)],y,0),x[t(355)](x[t(326)],null)}()}function j(t){const n=E,e=x.createTexture();return x[n(368)](x[n(317)],e),t instanceof HTMLImageElement?x[n(358)](x[n(317)],0,x[n(330)],x[n(330)],x.UNSIGNED_BYTE,t):x.texImage2D(x[n(317)],0,x[n(330)],t[n(304)],t[n(322)],0,x[n(330)],x[n(352)],null),x[n(327)](x[n(317)],x.TEXTURE_MIN_FILTER,x.NEAREST),x[n(327)](x[n(317)],x[n(350)],x[n(364)]),x[n(327)](x[n(317)],x[n(378)],x[n(389)]),x[n(327)](x[n(317)],x[n(337)],x.CLAMP_TO_EDGE),e}function G(t,n){const e=E,o=x[e(374)]();x[e(338)](x[e(314)],o),x[e(351)](x.ARRAY_BUFFER,t,x[e(301)]);const r=3*Float32Array[e(321)]+2*Float32Array[e(321)];x[e(395)](0,3,x[e(307)],!1,r,0),x[e(386)](0),x.vertexAttribPointer(1,2,x[e(307)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),x.enableVertexAttribArray(1);const i=x[e(374)]();return x[e(338)](x[e(382)],i),x[e(351)](x.ELEMENT_ARRAY_BUFFER,n,x[e(301)]),x[e(338)](x[e(314)],null),o}return(t,n)=>{const e=E;return c(),s(e(373),p,[u(e(400),{id:e(394),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(335)}},null,8,g)])}}});function T(t){function n(t){const e=A;if(typeof t===e(392))return function(t){}[e(329)](e(376))[e(370)]("counter");1!==(""+t/t)[e(363)]||t%20==0?function(){return!0}[e(329)](e(332)+"gger")[e(315)](e(402)):function(){return!1}.constructor("debu"+e(387))[e(370)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as default};

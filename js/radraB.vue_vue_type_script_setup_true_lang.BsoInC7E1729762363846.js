import{z as n,U as t}from"./@tresjs.CmAaFQUS1729762363846.js";import{d as o,a5 as e,r,Y as i,a2 as a,o as s,E as c,L as u,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.n8X62v121729762363846.js";import{aN as v,a0 as m,C as y,M as x,cj as w,V as _}from"./three.CQvcOG671729762363846.js";const M=R;!function(n,t){const o=R,e=A();for(;;)try{if(650329===-parseInt(o(110))/1*(parseInt(o(117))/2)+-parseInt(o(114))/3*(-parseInt(o(139))/4)+-parseInt(o(112))/5*(-parseInt(o(101))/6)+-parseInt(o(121))/7+-parseInt(o(124))/8+parseInt(o(136))/9*(parseInt(o(109))/10)+parseInt(o(127))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){I(this,(function(){const n=R,t=new RegExp(n(142)),o=new RegExp(n(123),"i"),e=S(n(135));t.test(e+n(145))&&o.test(e+n(130))?S():e("0")}))()}();const b=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function R(n,t){const o=A();return(R=function(n,t){return o[n-=101]})(n,t)}b(void 0,(function(){const n=R,t=function(){const n=R;let t;try{t=Function("return (function() "+n(148)+");")()}catch(o){t=window}return t}(),o=t[n(102)]=t.console||{},e=[n(129),n(132),n(149),n(115),"exception",n(122),n(140)];for(let r=0;r<e.length;r++){const t=b.constructor[n(116)][n(120)](b),i=e[r],a=o[i]||t;t.__proto__=b[n(120)](b),t[n(104)]=a[n(104)][n(120)](a),o[i]=t}}))();const P=[M(134),"scale"],T=[M(105)];function A(){const n=["prototype","100694lglPIC","buildingsMarkA","TresSpriteMaterial","bind","8858437sDDoKp","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1199320XtWbqy","stateObject","clone","4182739vJfEGY","debu","log","input","string","warn","tsRef","position","init","171SobEOG","#fff","action","49996ehLNpC","trace","while (true) {}","function *\\( *\\)","foremost","color","chain","sizeAttenuation","length",'{}.constructor("return this")( )',"info","66SWEfuv","console","TresSprite","toString","map","scale","constructor","img","653170xCrrMh","1ShjgHT","value","105605zOxegF","apply","63jTZDhu","error"];return(A=function(){return n})()}const j=o({__name:M(118),props:{color:{default:M(137)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(108)]}))),p=await p,d(),p),v=r({color:g[o(144)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(146)],toneMapped:!1,depthTest:!g[o(143)]}),m=i(null);return a((()=>{const n=o;m[n(111)]&&(m[n(111)].geometry=m[n(111)].geometry[n(126)](),m[n(111)].geometry.translate(g.offset[0],g.offset[1],0))})),(n,t)=>{const e=o;return s(),c(e(103),{ref_key:e(133),ref:m,position:g[e(134)],scale:g[e(106)],renderOrder:"99999"},[u(e(119),l(v,{map:f(h)}),null,16,T)],8,P)}}});function S(n){function t(n){const o=R;if(typeof n===o(131))return function(n){}.constructor(o(141)).apply("counter");1!==(""+n/n)[o(147)]||n%20==0?function(){return!0}.constructor(o(128)+"gger").call(o(138)):function(){return!1}[o(107)](o(128)+"gger")[o(113)](o(125)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const F=C;!function(n,t){const o=C,e=G();for(;;)try{if(360176===-parseInt(o(368))/1*(-parseInt(o(374))/2)+parseInt(o(357))/3+parseInt(o(369))/4+-parseInt(o(375))/5+parseInt(o(360))/6+-parseInt(o(356))/7*(-parseInt(o(387))/8)+-parseInt(o(366))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function C(n,t){const o=G();return(C=function(n,t){return o[n-=341]})(n,t)}!function(){z(this,(function(){const n=C,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(349),"i"),e=Z(n(377));t.test(e+n(379))&&o[n(361)](e+"input")?Z():e("0")}))()}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[C(351)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();k(void 0,(function(){const n=C,t=function(){const n=C;let t;try{t=Function("return (function() "+n(370)+");")()}catch(o){t=window}return t}(),o=t.console=t[n(347)]||{},e=[n(359),"warn","info","error",n(371),n(345),"trace"];for(let r=0;r<e.length;r++){const t=k[n(354)][n(382)][n(367)](k),i=e[r],a=o[i]||t;t[n(355)]=k[n(367)](k),t[n(388)]=a[n(388)].bind(a),o[i]=t}}))();const E=[F(376)],W=[F(350)];function G(){const n=["toString","TresCircleGeometry","counter","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","size","table","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","console","TresCircleGeometryRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","args","apply","followWidth","uniforms","constructor","__proto__","14OPNPJc","618876CpsvXa","ncolor","log","1519386XLhJcS","test","uRadius","applyMatrix4","while (true) {}","radius","11513637eTKbGe","bind","1zeBKXQ","1401768XrWmcG",'{}.constructor("return this")( )',"exception","TresMesh","TresShaderMaterial","1068140ZPxJaI","296080bXbOhr","position","init","color","chain","speed","stateObject","prototype","debu","gger","#ffff00","call","1418600njGSYs"];return(G=function(){return n})()}const O=o({__name:"radraA",props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:F(385)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=F,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l.value+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(343),fragmentShader:e(346),uniforms:{uSpeed:{value:r[e(380)]},uRadius:{value:r[e(365)]},uTime:l,uFollowWidth:{value:r[e(352)]},ncolor:{value:new y(r[e(378)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x).makeRotationX(-Math.PI/180*90);f.value[o(363)](n)}}));const _=p();return a((()=>{const n=e;r[n(378)]&&(w[n(353)][n(358)].value=new y(r[n(378)])),r[n(365)]&&(w[n(353)][n(362)].value=r[n(365)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),c(o(372),{ref_key:"MeshRef",ref:_,position:r.position},[u(o(341),{ref_key:o(348),ref:f,args:[r[o(344)],1e3]},null,8,W),u(o(373),g(h(w)),null,16)],8,E)}}});function Z(n){function t(n){const o=C;if("string"==typeof n)return function(n){}[o(354)](o(364))[o(351)](o(342));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(o(383)+o(384))[o(386)]("action"):function(){return!1}[o(354)](o(383)+o(384))[o(351)](o(381)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const X=$;!function(n,t){const o=$,e=L();for(;;)try{if(754825===parseInt(o(229))/1*(-parseInt(o(245))/2)+-parseInt(o(249))/3*(parseInt(o(246))/4)+-parseInt(o(259))/5+-parseInt(o(266))/6*(parseInt(o(232))/7)+-parseInt(o(263))/8*(parseInt(o(267))/9)+-parseInt(o(223))/10*(-parseInt(o(253))/11)+-parseInt(o(252))/12*(-parseInt(o(277))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const B=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){B(this,(function(){const n=$,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(221),"i"),e=K(n(242));t[n(265)](e+"chain")&&o[n(265)](e+"input")?K():e("0")}))()}();const J=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[$(233)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function L(){const n=["4nksjjR","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","height","426078aMfaQE","__proto__","computeBoundingBox","84600iYKLVC","11rVkFzT","length","trace","console","error","table","1798425RROntM","radius","color","scale","287272CtYJGN","debu","test","2946xdCRnU","54vfYXau","position","stateObject","counter","log","constructor","args","updateMatrix","clone","uColor","5265oiRXnu","#ffff00","TresTubeGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","903810Znccnu","makeScale","info","maxRadius","TresTubeGeometryRef","action","930MRJNwD","gger","warn","20797iDEZRj","apply","while (true) {}","MeshRef","period","value","bind",'{}.constructor("return this")( )',"boundingBox","uniforms","init","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","toString","32hINMTy"];return(L=function(){return n})()}J(void 0,(function(){const n=$;let t;try{t=Function("return (function() "+n(239)+");")()}catch(r){t=window}const o=t[n(256)]=t[n(256)]||{},e=[n(271),n(231),n(225),n(257),"exception",n(258),n(255)];for(let i=0;i<e[n(254)];i++){const t=J[n(272)][n(222)].bind(J),r=e[i],a=o[r]||t;t[n(250)]=J[n(238)](J),t[n(244)]=a[n(244)][n(238)](a),o[r]=t}}))();const N=[X(268)],Y=[X(273)];function $(n,t){const o=L();return($=function(n,t){return o[n-=219]})(n,t)}const D=o({__name:"radraB",props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:X(219)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=X,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(261)],opacity:r.opacity,transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(247),fragmentShader:e(243),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(261)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(237)][o(251)](),l[o(237)]=M[o(237)][o(240)].max,f[o(237)]=M[o(237)].boundingBox.min,I=i[o(237)][o(262)][o(275)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(248)],0)));a((()=>{const n=e;r[n(261)]&&(v[n(241)][n(276)][n(237)]=new y(r.color))}));const{onLoop:R}=t(),P={value:0};return R((({delta:n})=>{const t=e;P[t(237)]+=n;const o=(P[t(237)]%r[t(236)]/r.period*(r[t(226)]-r[t(260)])+r[t(260)])/r.radius,a=(new x)[t(224)](o,1,o);I&&(i[t(237)][t(262)].copy(I[t(275)]().applyMatrix4(a)),i[t(237)][t(274)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),c("TresMesh",{ref_key:o(235),ref:i,position:r.position,renderOrder:2e3},[u(o(220),{ref_key:o(227),ref:M,args:[b.value,20,r.radius,100,!1]},null,8,Y),u("TresShaderMaterial",g(h(v)),null,16)],8,N)}}});function K(n){function t(n){const o=$;if("string"==typeof n)return function(n){}[o(272)](o(234))[o(233)](o(270));1!==(""+n/n).length||n%20==0?function(){return!0}[o(272)]("debu"+o(230)).call(o(228)):function(){return!1}[o(272)](o(264)+o(230))[o(233)](o(269)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{j as _,O as a,D as b};

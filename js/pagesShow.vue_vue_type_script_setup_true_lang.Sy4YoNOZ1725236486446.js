import{Z as t,a6 as n,C as o,ca as e,cb as r,cc as i,cd as u,k as c,bS as s,ab as a,ad as l}from"./three.0IuNGJsA1725236486446.js";import{f,$ as p,d}from"./@tresjs.DDzpLB7Q1725236486446.js";import{C as h}from"./three-custom-shader-material.52Yxne6X1725236486446.js";import"./object-hash.p3nCq7ez1725236486446.js";import"./@amap.YiJorLHg1725236486446.js";import"./glsl-tokenizer.5A8V64LF1725236486446.js";import{d as m,b as y,a1 as g,w,o as v,D as b,u as _,r as C,a4 as I,e as x,f as M,g as T,J as S,j,aj as A,ak as O,F as R,I as L,G as B,m as k}from"./@vue.9bHx4gg21725236486446.js";function G(){const t=["chain","length","traverse","function *\\( *\\)","trace","name","253STkcZD","constructor","error","49IeubML","debu","init","__proto__","211644kBMVIC","ROADS","info","counter","378284EDmgaA","toString","console","24mweZcL","42410iGcvHa","58041YFkGSt","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","61584vZaqyf","bind","call","192240RsmVzS","LANDMASS","152ifSTIi",'{}.constructor("return this")( )',"17420ChmLvS","string","test","stateObject","CITY_UNTRIANGULATED","input","apply"];return(G=function(){return t})()}!function(t,n){const o=D,e=G();for(;;)try{if(141169===-parseInt(o(223))/1+-parseInt(o(250))/2*(parseInt(o(256))/3)+parseInt(o(247))/4+parseInt(o(259))/5+-parseInt(o(243))/6*(-parseInt(o(239))/7)+parseInt(o(261))/8*(parseInt(o(252))/9)+-parseInt(o(251))/10*(parseInt(o(236))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function D(t,n){const o=G();return(D=function(t,n){return o[t-=223]})(t,n)}!function(){E(this,(function(){const t=D,n=new RegExp(t(233)),o=new RegExp(t(254),"i"),e=Z(t(241));n[t(225)](e+t(230))&&o[t(225)](e+t(228))?Z():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();F(void 0,(function(){const t=D,n=function(){const t=D;let n;try{n=Function("return (function() "+t(262)+");")()}catch(o){n=window}return n}(),o=n[t(249)]=n[t(249)]||{},e=["log","warn",t(245),t(238),"exception",t(255),t(234)];for(let r=0;r<e[t(231)];r++){const n=F[t(237)].prototype[t(257)](F),i=e[r],u=o[i]||n;n[t(242)]=F[t(257)](F),n[t(248)]=u.toString[t(257)](u),o[i]=n}}))();const H=async()=>{const t=D,n=await f("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(232)]((n=>{const i=t;n[i(235)]===i(227)&&(o=n),n[i(235)]===i(260)&&(e=n),n[i(235)]===i(244)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function Z(t){function n(t){const o=D;if(typeof t===o(224))return function(t){}.constructor("while (true) {}")[o(229)](o(246));1!==(""+t/t).length||t%20==0?function(){return!0}[o(237)]("debugger")[o(258)](o(253)):function(){return!1}.constructor(o(240)+"gger")[o(229)](o(226)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const z=U;!function(t,n){const o=U,e=W();for(;;)try{if(130889===-parseInt(o(393))/1+-parseInt(o(382))/2*(parseInt(o(405))/3)+parseInt(o(389))/4+parseInt(o(402))/5*(parseInt(o(372))/6)+parseInt(o(431))/7+-parseInt(o(380))/8+-parseInt(o(383))/9*(-parseInt(o(385))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[U(413)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){P(this,(function(){const t=U,n=new RegExp(t(379)),o=new RegExp(t(381),"i"),e=q(t(412));n.test(e+t(422))&&o.test(e+t(426))?q():e("0")}))()}();const $=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[U(413)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function W(){const t=["#112233","input","table","__csm","length","gradient","346255ouaYbO","return (function() ","stateObject","string","12olQENL","log","action","dispose","computeBoundingBox","primitive","gger","function *\\( *\\)","1925680HnKLeM","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1276JShDnh","4886991DLUPLT","#ffff00","10CpTtLR","uGradient","boundingBox","uOpacity","299372FhKpOH","#e523ff","call","warn","169676bGYUim","#ffffff","object","bulidingsColor","info","model","constructor","material","bind","208080bPckec","side","buildingsModelCustomShader","984gqKpGO",'{}.constructor("return this")( )',"error","value","__proto__","landColor","uColor","init","apply","forEach","prototype","land","color","while (true) {}","opacity","uniforms","Color","chain","clone","toString"];return(W=function(){return t})()}$(void 0,(function(){const t=U,n=function(){const t=U;let n;try{n=Function(t(432)+t(406)+");")()}catch(o){n=window}return n}(),o=n.console=n.console||{},e=[t(373),t(392),t(397),t(407),"exception",t(427),"trace"];for(let r=0;r<e[t(429)];r++){const n=$.constructor[t(415)][t(401)]($),i=e[r],u=o[i]||n;n[t(409)]=$[t(401)]($),n.toString=u[t(424)].bind(u),o[i]=n}}))();const Y=[z(395)];function U(t,n){const o=W();return(U=function(t,n){return o[t-=371]})(t,n)}const X=m({__name:z(404),props:{model:{},bulidingsColor:{default:z(390)},landColor:{default:z(425)},topColor:{default:z(384)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const r=z,i=e,u=y(0),c=i[r(398)].city;c.renderOrder=1001;const s=i[r(398)].land;(()=>{const e=r,{geometry:s}=c;s[e(376)](),s.computeBoundingSphere();const{max:a,min:l}=s[e(387)];if(c.material[e(428)])return;const f=new h({baseMaterial:c[e(400)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:a},uMin:{value:l},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[e(421)])(i[e(396)])},uOpacity:{value:i[e(419)]},uLightColor:{value:new o(e(394))},uTopColor:{value:new(n[e(421)])(i.topColor)},uTime:u,uGradient:{value:i[e(430)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t});c[e(400)][e(375)](),c[e(400)]=f})();const{onLoop:a}=p();a((({delta:t})=>{u.value+=t})),g((()=>{const n=r;i[n(396)]&&c.material[n(420)][n(411)].value.setStyle(i[n(396)]),i.landColor&&((n,o)=>{const e=r;let u;"cu"===n||"land"===n&&(u=Array.isArray(s[e(400)])?s[e(400)]:[s[e(400)]],u[e(414)]((n=>{const r=e;n[o].setStyle(i[r(410)]),n[r(403)]=t})))})(n(416),n(417)),i[n(419)]&&(c.material[n(420)][n(388)].value=i[n(419)])})),w(i,((t,n)=>{const o=r;c[o(400)][o(420)][o(386)][o(408)]=t[o(430)]}));const l=i[r(398)][r(398)][r(423)]();return(t,n)=>{const o=r;return v(),b(o(377),{object:_(l)},null,8,Y)}}});function q(t){function n(t){const o=U;if(typeof t===o(371))return function(t){}[o(399)](o(418)).apply("counter");1!==(""+t/t)[o(429)]||t%20==0?function(){return!0}.constructor("debu"+o(378))[o(391)](o(374)):function(){return!1}[o(399)]("debu"+o(378)).apply(o(433)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const K=Q;!function(t,n){const o=Q,e=V();for(;;)try{if(364025===parseInt(o(448))/1+-parseInt(o(431))/2+parseInt(o(456))/3+parseInt(o(455))/4+parseInt(o(427))/5*(parseInt(o(429))/6)+parseInt(o(426))/7+parseInt(o(442))/8*(-parseInt(o(467))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const N=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(423)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){N(this,(function(){const t=Q,n=new RegExp(t(466)),o=new RegExp(t(447),"i"),e=ot("init");n[t(444)](e+t(470))&&o.test(e+t(468))?ot():e("0")}))()}();const J=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(423)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function Q(t,n){const o=V();return(Q=function(t,n){return o[t-=420]})(t,n)}function V(){const t=["set","477134cGYYkG","3485495sFBdlX","material","6fhvOtb","call","1015318VQfHjK","length","buildingsLines","constructor","log","info","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","while (true) {}","counter","opacity","clone","88bUjoRX","style","test","resolution","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","173889tsSYJX","console","uniforms","error","renderOrder","stateObject","Wireframe","510320UQMSpZ","1886925xKAzkm","toString","string","exception","width","color","geometry","object","__proto__"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","function *\\( *\\)","674199qeYQqX","input","linewidth","chain","trace","matrix","applyMatrix4","warn","primitive","#FFF","bind","innerHeight","builds","uOpacity","uColor","debu","apply",'{}.constructor("return this")( )'];return(V=function(){return t})()}J(void 0,(function(){const t=Q;let n;try{n=Function("return (function() "+t(424)+");")()}catch(r){n=window}const o=n[t(449)]=n[t(449)]||{},e=[t(435),t(474),t(436),t(451),t(459),"table",t(471)];for(let i=0;i<e[t(432)];i++){const n=J.constructor[t(446)][t(477)](J),r=e[i],u=o[r]||n;n[t(464)]=J[t(477)](J),n[t(457)]=u[t(457)][t(477)](u),o[r]=n}}))();const tt=[K(463)],nt=m({__name:K(433),props:{builds:{},width:{default:1},color:{default:K(476)},opacity:{default:1},style:{default:K(454)}},setup(t){const n=K,s=t;let a=null,l=null;if(s[n(443)]===n(454)){const t=new e(s[n(479)][n(462)]);let o=(new r).fromEdgesGeometry(t),c=new i({color:s.color,linewidth:s[n(460)],opacity:s[n(440)],transparent:!0,depthWrite:!0,depthTest:!0});c[n(445)][n(425)](window.innerWidth,window[n(478)]),a=new u(o,c),a[n(473)](s[n(479)][n(472)][n(441)]())}else{l={transparent:!0,uniforms:{uColor:{value:new o(s.color)},uOpacity:{value:s.opacity}},vertexShader:n(437),fragmentShader:n(465)};const t=new e(s[n(479)][n(462)]),r=new c(l);a=new LineSegments(t,r),a[n(473)](s[n(479)][n(472)][n(441)]()),a[n(428)].linewidth=s[n(460)],a[n(452)]=1e3}return g((()=>{const t=n;"Shader"===s[t(443)]&&(s[t(461)]&&(l.uniforms[t(421)].value=new o(s.color)),s[t(440)]&&(l[t(450)][t(420)].value=s.opacity)),"Wireframe"===s[t(443)]&&(s.color&&(a[t(428)][t(461)]=new o(s[t(461)])),s[t(440)]&&(a[t(428)][t(440)]=s[t(440)])),s.width&&(a.material[t(469)]=s.width)})),(t,o)=>{const e=n;return v(),b(e(475),{object:_(a)},null,8,tt)}}});function ot(t){function n(t){const o=Q;if(typeof t===o(458))return function(t){}[o(434)](o(438))[o(423)](o(439));1!==(""+t/t)[o(432)]||t%20==0?function(){return!0}[o(434)](o(422)+"gger")[o(430)]("action"):function(){return!1}.constructor(o(422)+"gger")[o(423)](o(453)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const et=ft;!function(t,n){const o=ft,e=ut();for(;;)try{if(242229===parseInt(o(296))/1+-parseInt(o(274))/2+parseInt(o(311))/3*(-parseInt(o(307))/4)+-parseInt(o(294))/5+-parseInt(o(273))/6+parseInt(o(304))/7+parseInt(o(281))/8*(parseInt(o(305))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ft(317)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){rt(this,(function(){const t=ft,n=new RegExp(t(292)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=dt(t(275));n[t(290)](e+t(291))&&o[t(290)](e+t(321))?dt():e("0")}))()}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ft(317)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function ut(){const t=["#000000","constructor","bind","return (function() ","test","chain","function *\\( *\\)","showBuildings","2041900iTPiHv","TresAxesHelper","70879KvlnLE","builds","action","city","exception","stateObject","showAxesHelper","debu","3087273PXyyJA","684EAAxmq","ability","2188ZUqxNr","prototype","showGridHelper","autoRotate","2265bcRWEX","TresPerspectiveCamera","#ffffff","tcRef","log","length","apply","error","#000","disableRender","input","TresDirectionalLight","2895672eTBFpj","681408iGdglp","init","model","table","string","console","toString","144736toinMl","while (true) {}","perspectiveCameraRef","trace","gger"];return(ut=function(){return t})()}it(void 0,(function(){const t=ft,n=function(){const t=ft;let n;try{n=Function(t(289)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n.console=n[t(279)]||{},e=[t(315),"warn","info",t(318),t(300),t(277),t(284)];for(let r=0;r<e.length;r++){const n=it[t(287)][t(308)][t(288)](it),i=e[r],u=o[i]||n;n.__proto__=it[t(288)](it),n[t(280)]=u[t(280)].bind(u),o[i]=n}}))();const ct=S("TresAmbientLight",{color:et(313)},null,-1),st=S(et(272),{position:[100,100,0],intensity:.5,color:et(313)},null,-1),at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(t,n){const o=ut();return(ft=function(t,n){return o[t-=272]})(t,n)}const pt=m({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=C({clearColor:n(286),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:a,toneMapping:l,disableRender:r[n(320)]}),u=C({autoRotate:r[n(310)],enableDamping:!0});let c=null;r[n(293)]&&([o,e]=I((()=>H())),o=await o,e(),c=o);const f=y(),p=y();return(t,o)=>{const e=n,s=x("TresCanvas");return v(),M(s,k({ref_key:e(314),ref:p},i,{"window-size":""}),{default:T((()=>[S(e(312),{ref_key:e(283),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(_(d),A(O(u)),null,16),ct,st,r[e(293)]&&_(c)?(v(),b(R,{key:0},[j(X,{model:_(c)},null,8,[e(276)]),j(nt,{builds:_(c)[e(299)],color:e(319)},null,8,[e(297)])],64)):L("",!0),B(t.$slots,e(306)),r[e(302)]?(v(),b(e(295),at)):L("",!0),r[e(309)]?(v(),b("TresGridHelper",lt)):L("",!0)])),_:3},16)}}});function dt(t){function n(t){const o=ft;if(typeof t===o(278))return function(t){}[o(287)](o(282)).apply("counter");1!==(""+t/t)[o(316)]||t%20==0?function(){return!0}[o(287)](o(303)+o(285)).call(o(298)):function(){return!1}[o(287)](o(303)+"gger")[o(317)](o(301)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{X as _,nt as a,pt as b,H as l};

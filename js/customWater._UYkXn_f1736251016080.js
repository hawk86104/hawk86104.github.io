import{_ as e,C as t,a0 as n}from"./three.RuuDeeIf1736251016080.js";import{e as r,W as a,U as i,c as o}from"./@tresjs.8C7OKmBm1736251016080.js";import{a as s}from"./index.7xUuYu7h1736251016080.js";import"./index.TsjidoKx1736251016080.js";import{z as l}from"./three-custom-shader-material.zkLsy8Lq1736251016080.js";import{p as u}from"./gl-noise.BrVtymbx1736251016080.js";import{d as c,b as p,a1 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as y,aj as M,ak as j,m as x,al as S}from"./@vue.-Mz_IXfk1736251016080.js";import{P as z}from"./tweakpane.yHWGBmom1736251016080.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.oDFyrOPl1736251016080.js";import"./@vueuse.HhUha1mw1736251016080.js";import"./three-stdlib.9SgBjS5j1736251016080.js";import"./@pmndrs.eJMj1neG1736251016080.js";import"./object-hash.m8vc-d4L1736251016080.js";import"./@amap.RhAVlD5U1736251016080.js";import"./jszip.BteQlHnJ1736251016080.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.si_4UN4x1736251016080.js";import"./all.three.jnv7gLSV1736251016080.js";import"./oimophysics.x0jH7fze1736251016080.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.HE9bTtTP1736251016080.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.noQiUR2n1736251016080.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.sQjo7j-21736251016080.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.aHCDd7wl1736251016080.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.OJ_B_yMv1736251016080.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.lh0YCrjD1736251016080.js";const T=G;!function(e,t){const n=G,r=P();for(;;)try{if(975920===parseInt(n(156))/1*(parseInt(n(124))/2)+parseInt(n(115))/3*(-parseInt(n(147))/4)+parseInt(n(137))/5*(-parseInt(n(107))/6)+parseInt(n(153))/7+-parseInt(n(131))/8+-parseInt(n(101))/9*(-parseInt(n(122))/10)+-parseInt(n(143))/11*(parseInt(n(135))/12))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[G(128)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function G(e,t){const n=P();return(G=function(e,t){return n[e-=101]})(e,t)}!function(){I(this,(function(){const e=G,t=new RegExp(e(161)),n=new RegExp(e(134),"i"),r=F(e(113));t[e(110)](r+e(160))&&n[e(110)](r+e(112))?F():r("0")}))()}();const H=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();H(void 0,(function(){const e=G,t=function(){const e=G;let t;try{t=Function(e(116)+e(127)+");")()}catch(n){t=window}return t}(),n=t[e(145)]=t[e(145)]||{},r=["log","warn",e(111),"error",e(155),"table",e(108)];for(let a=0;a<r.length;a++){const t=H[e(130)][e(129)][e(103)](H),i=r[a],o=n[i]||t;t.__proto__=H.bind(H),t.toString=o[e(123)][e(103)](o),n[i]=t}}))();const B=[T(151)],O=[T(126)];function P(){const e=["tmRef","1852ctiFOO","waterColor","while (true) {}","Flatshading","rotation-x","brightness","6844033QgdvqN","height","exception","338004agLQIc","gger","fragmentShader","uHeight","chain","function *\\( *\\)","9qhkuNE","convertLinearToSRGB","bind","TresMesh","vertex","value","6fFbouS","trace","dispose","test","info","input","init","waterHighlight","459PaXyRc","return (function() ","DoubleSide","length","MeshPhysicalMaterial","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","Color","9691370hiGBfm","toString","8UJhYXU","side","args",'{}.constructor("return this")( )',"apply","prototype","constructor","8565480GiPIzs","#b3ffff","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","216lnWoxP","material","141470RYqvwh","counter","needsUpdate","debu","uTime","string","704693PmMBEA","fragment","console"];return(P=function(){return e})()}const W=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:T(132)},brightness:{default:1},baseMaterial:{default:e[T(119)]}},setup(i){const o=T,s=i,c=p(null),b={vertex:o(120),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},w={uTime:{value:0},waterColor:{value:new(e[o(121)])(s[o(148)])[o(102)]()},waterHighlight:{value:new(e[o(121)])(s[o(114)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s.brightness},uHeight:{value:s.height}},{onLoop:y}=r();return y((({elapsed:e})=>{w[o(141)].value=-e/5})),f((()=>{const n=o;s[n(154)]&&(w[n(159)][n(106)]=s[n(154)]),s.waterColor&&(w[n(148)].value=new t(s[n(148)])[n(102)]()),s.waterHighlight&&(w[n(114)].value=new(e[n(121)])(s.waterHighlight)[n(102)]()),s[n(152)]&&(w[n(152)].value=s[n(152)])})),g((()=>s[o(150)]),(e=>{const t=o;c[t(106)][t(136)][t(139)]=!0})),g((()=>s.baseMaterial),(t=>{const r=o,a=new l({baseMaterial:e[t],vertexShader:u(b[r(105)]),fragmentShader:b[r(144)],uniforms:w,flatShading:s[r(150)],side:n,roughness:.2,metalness:.1,silent:!0});c[r(106)].material[r(109)](),c[r(106)].material=a})),(t,n)=>{const r=o;return h(),m(r(104),{ref_key:r(146),ref:c,"rotation-x":-Math.PI/2},[v("TresBoxGeometry",{args:[5,5,t[r(154)],64,64,1]},null,8,O),d(_(a),{baseMaterial:e[r(119)],vertexShader:_(u)(b[r(105)]),fragmentShader:b.fragment,uniforms:w,side:e[r(117)],roughness:.2,metalness:.1,flatShading:t[r(150)],silent:""},null,8,["baseMaterial","vertexShader",r(158),r(125),"flatShading"])],8,B)}}});function F(e){function t(e){const n=G;if(typeof e===n(142))return function(e){}[n(130)](n(149))[n(128)](n(138));1!==(""+e/e)[n(118)]||e%20==0?function(){return!0}[n(130)]("debu"+n(157))[n(133)]("action"):function(){return!1}[n(130)](n(140)+n(157)).apply("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}const k=L;!function(e,t){const n=L,r=N();for(;;)try{if(703819===parseInt(n(456))/1+-parseInt(n(426))/2+-parseInt(n(424))/3+-parseInt(n(442))/4+-parseInt(n(448))/5*(-parseInt(n(435))/6)+parseInt(n(445))/7*(-parseInt(n(425))/8)+parseInt(n(441))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[L(452)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function N(){const e=["浪头颜色","MeshToonMaterial","counter","bind","13641444kQaZlL","3985868IzYJim",'{}.constructor("return this")( )',"#b3ffff","39179GkRRkL","while (true) {}","function *\\( *\\)","25HMlPdt","info","neg-x.jpg","pos-y.jpg","apply","length","call","error","1058382viCoaU","水体颜色","value","gger","exception","return (function() ","ACESFilmicToneMapping","Flatshading","label","#627179","string","target","neg-z.jpg","warn","trace","customWater","TresDirectionalLight","#52a7f7","#3a78a2","MeshPhongMaterial","__proto__","test","toString","pos-x.jpg","change","MeshLambertMaterial","debu","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","input","addBinding","neg-y.jpg","waterHighlight","TresPerspectiveCamera","pos-z.jpg","1393644rQTSLf","1096SHNvjj","1503640lmFcfT","MeshStandardMaterial","MeshNormalMaterial","brightness","action","MeshDepthMaterial","MeshPhysicalMaterial","prototype","table","1331214anYKFV","MeshBasicMaterial"];return(N=function(){return e})()}!function(){D(this,(function(){const e=L,t=new RegExp(e(447)),n=new RegExp(e(416),"i"),r=E(e(417));t[e(408)](r+"chain")&&n[e(408)](r+e(418))?E():r("0")}))()}();const R=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function L(e,t){const n=N();return(L=function(e,t){return n[e-=394]})(e,t)}R(void 0,(function(){const e=L,t=function(){const e=L;let t;try{t=Function(e(461)+e(443)+");")()}catch(n){t=window}return t}(),n=t.console=t.console||{},r=["log",e(400),e(449),e(455),e(460),e(434),e(401)];for(let a=0;a<r[e(453)];a++){const t=R[e(415)][e(433)][e(440)](R),i=r[a],o=n[i]||t;t[e(407)]=R.bind(R),t[e(409)]=o.toString[e(440)](o),n[i]=t}}))();const A=c({__name:k(402),setup(t){const n=k,r=b({alpha:!0,toneMapping:e[n(462)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(396),sectionColor:n(405),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(404),waterHighlight:n(444),brightness:1,baseMaterial:n(432)}),c=new z;return c[n(419)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[n(419)](u,"waterColor",{label:n(457)}),c[n(419)](u,n(421),{label:n(437)}),c.addBinding(u,n(429),{label:"亮度",min:0,max:1,step:.01}),c.addBinding(u,n(394),{label:n(394)}),c.addBlade({view:"list",label:"材质",options:[{text:n(432),value:n(432)},{text:n(436),value:n(436)},{text:n(428),value:"MeshNormalMaterial"},{text:"MeshStandardMaterial",value:n(427)},{text:n(406),value:n(406)},{text:n(438),value:"MeshToonMaterial"},{text:"MeshLambertMaterial",value:n(412)},{text:n(431),value:n(431)}],value:u.baseMaterial}),c.on(n(411),(e=>{const t=n;"材质"===e[t(398)][t(395)]&&(u.baseMaterial=e[t(458)])})),(e,t)=>{const c=n;return h(),w(_(o),x(r,{"window-size":""}),{default:y((()=>[t[0]||(t[0]=v(c(422),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(i),M(j(a)),null,16),t[1]||(t[1]=v("TresAmbientLight",{intensity:.5},null,-1)),t[2]||(t[2]=v(c(403),{position:[15,15,15],intensity:1},null,-1)),d(W,M(j(u)),null,16),d(_(C),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(S,null,{default:y((()=>[d(_(s),{files:[c(410),c(450),c(451),c(420),c(423),c(399)],path:c(414)})])),_:1}))])),_:1},16)}}});function E(e){function t(e){const n=L;if(typeof e===n(397))return function(e){}[n(415)](n(446))[n(452)](n(439));1!==(""+e/e)[n(453)]||e%20==0?function(){return!0}[n(415)](n(413)+n(459))[n(454)](n(430)):function(){return!1}[n(415)](n(413)+n(459))[n(452)]("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

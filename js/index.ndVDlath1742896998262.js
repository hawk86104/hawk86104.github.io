import{au as n,Y as t,l as e,aR as r,aS as o,aT as i,N as a,aC as c,aD as s,U as u,aY as l,C as f,ab as p,u as d,r as h,T as v,ch as m,ci as g,a5 as _,h as y,b as x,e as I,_ as b,n as S,b1 as w,V as M,bs as E,a3 as R,aq as A,B as T,c as D,aP as P,g as z,M as C,t as O,q as F,a as k}from"./three.0CcRceKb1742896998262.js";import{m as B,j,e as U}from"./@tresjs.KzbsBNvc1742896998262.js";import{R as N}from"./three-stdlib.89waAD8o1742896998262.js";import{y as L,b as H,w as Z,a as G,u as W,d as V,W as q,a3 as $,a0 as Y,o as K,H as X,J as Q,M as J,a7 as nn,a2 as tn,q as en,f as rn,N as on,a8 as an,r as cn,B as sn,v as un,s as ln,F as fn,a6 as pn,m as dn}from"./@vue.L-brCdZe1742896998262.js";import{M as hn,a as vn,C as mn}from"./@pmndrs.o17bi-dk1742896998262.js";import{h as gn}from"./object-hash.9aQcBM141742896998262.js";var _n=Sn;!function(n,t){for(var e=Sn,r=wn();;)try{if(508009===-parseInt(e(182))/1*(-parseInt(e(179))/2)+parseInt(e(154))/3*(parseInt(e(172))/4)+-parseInt(e(151))/5*(-parseInt(e(160))/6)+-parseInt(e(176))/7*(parseInt(e(150))/8)+-parseInt(e(158))/9+-parseInt(e(177))/10+parseInt(e(173))/11*(parseInt(e(143))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var yn,xn=(yn=!0,function(n,t){var e=yn?function(){if(t){var e=t[Sn(149)](n,arguments);return t=null,e}}:function(){};return yn=!1,e});!function(){xn(this,(function(){var n=Sn,t=new RegExp(n(171)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Rn("init");t.test(r+n(147))&&e[n(141)](r+"input")?Rn():r("0")}))()}();var In,bn=(In=!0,function(n,t){var e=In?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return In=!1,e});function Sn(n,t){var e=wn();return Sn=function(n,t){return e[n-=139]},Sn(n,t)}function wn(){var n=["bind","62753sFNfJP","call","debu","log",'{}.constructor("return this")( )',"test","virtualScene","2040wIfxyU","destructor","gger","map","chain","error","apply","464iudWMZ","16740TOEInx","traverse","geometry","156945pLppkp","while (true) {}","table","action","6924330RJwrpw","remove","666DxPSaa","return (function() ","add","exception","console","stateObject","length","material","dispose","toString","trace","function *\\( *\\)","8qwuAjW","139579odsfVd","warn","constructor","64645FHjXIp","9458850cjiktq","prototype","4PCnpOn","info"];return(wn=function(){return n})()}bn(void 0,(function(){var n,t=Sn;try{n=Function(t(161)+t(140)+");")()}catch(s){n=window}for(var e=n[t(164)]=n[t(164)]||{},r=[t(139),t(174),t(180),t(148),t(163),t(156),t(170)],o=0;o<r[t(166)];o++){var i=bn[t(175)][t(178)][t(181)](bn),a=r[o],c=e[a]||i;i.__proto__=bn[t(181)](bn),i.toString=c[t(169)][t(181)](c),e[a]=i}}))();class Mn extends n{constructor(){var n=Sn;super(),this[n(142)]=null,this.virtualScene=new t}[_n(162)](...n){return this.virtualScene.add(...n),this}[_n(144)](){var n=_n;this[n(142)][n(152)]((t=>{var r=n;t instanceof e&&(t[r(153)][r(168)](),t[r(167)][r(168)](),t[r(167)].map&&t[r(167)][r(146)][r(168)](),this[r(142)][r(159)](t))})),this[n(142)]=null}}const En=Mn;function Rn(n){function t(n){var e=Sn;if("string"==typeof n)return function(n){}[e(175)](e(155))[e(149)]("counter");1!==(""+n/n)[e(166)]||n%20==0?function(){return!0}.constructor("debu"+e(145))[e(183)](e(157)):function(){return!1}.constructor(e(184)+e(145))[e(149)](e(165)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function An(n,t){const e=Dn();return An=function(n,t){return e[n-=387]},An(n,t)}const Tn=An;function Dn(){const n=["counter","info","indoor/abandoned_games_room_02_1k.hdr","city/canary_wharf_1k.hdr","return (function() ","error","console","length","call","warn","chain","outdoor/satara_night_1k.hdr","13994253rpbUUs","outdoor/snowy_forest_path_01_1k.hdr","2324310AaAvpK","function *\\( *\\)","stateObject","studio/poly_haven_studio_1k.hdr","city/modern_buildings_2_1k.hdr","__proto__","328zaDYAq","init","city/shanghai_bund_1k.hdr","trace","outood/mossy_forest_1k.hdr","777516laaqtV","debu","38549HwvRMY","test","1318000nXbZsO","988929JobTRY","bind","indoor/small_hangar_01_1k.hdr","constructor","venice/venice_sunset_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","prototype","3LNPCAB","175712JOfEXa","outdoor/outdoor_umbrellas_1k.hdr","input","string","toString","kiara/kiara_1_dawn_1k.hdr","apply"];return(Dn=function(){return n})()}!function(n,t){const e=An,r=Dn();for(;;)try{if(263545===-parseInt(e(415))/1*(parseInt(e(416))/2)+-parseInt(e(407))/3+-parseInt(e(406))/4+-parseInt(e(391))/5+-parseInt(e(402))/6+-parseInt(e(404))/7*(-parseInt(e(397))/8)+parseInt(e(389))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pn(this,(function(){const n=An,t=new RegExp(n(392)),e=new RegExp(n(412),"i"),r=On(n(398));t[n(405)](r+n(387))&&e[n(405)](r+n(418))?On():r("0")}))()}();const zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[An(422)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zn(void 0,(function(){const n=An;let t;try{t=Function(n(427)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(429)]=t[n(429)]||{},r=["log",n(432),n(424),n(428),"exception","table",n(400)];for(let i=0;i<r[n(430)];i++){const t=zn[n(410)][n(414)][n(408)](zn),o=r[i],a=e[o]||t;t[n(396)]=zn[n(408)](zn),t[n(420)]=a[n(420)][n(408)](a),e[o]=t}}))();const Cn={sunset:Tn(411),studio:Tn(394),city:Tn(426),umbrellas:Tn(417),night:Tn(388),forest:Tn(401),snow:Tn(390),dawn:Tn(421),hangar:Tn(409),urban:Tn(425),modern:Tn(395),shangai:Tn(399)};function On(n){function t(n){const e=An;if(typeof n===e(419))return function(n){}.constructor("while (true) {}").apply(e(423));1!==(""+n/n)[e(430)]||n%20==0?function(){return!0}[e(410)](e(403)+e(413))[e(431)]("action"):function(){return!1}[e(410)]("debu"+e(413))[e(422)](e(393)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Bn;!function(n,t){const e=Bn,r=Ln();for(;;)try{if(622604===parseInt(e(430))/1*(-parseInt(e(400))/2)+parseInt(e(431))/3*(-parseInt(e(409))/4)+parseInt(e(418))/5+-parseInt(e(399))/6*(parseInt(e(404))/7)+-parseInt(e(408))/8*(-parseInt(e(437))/9)+parseInt(e(447))/10*(-parseInt(e(398))/11)+-parseInt(e(417))/12*(-parseInt(e(422))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(n,t){const e=Ln();return Bn=function(n,t){return e[n-=394]},Bn(n,t)}!function(){kn(this,(function(){const n=Bn,t=new RegExp(n(440)),e=new RegExp(n(406),"i"),r=Nn(n(407));t[n(439)](r+n(436))&&e[n(439)](r+n(444))?Nn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(445)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Bn;let t;try{t=Function("return (function() "+n(395)+");")()}catch(o){t=window}const e=t[n(405)]=t[n(405)]||{},r=[n(415),n(426),n(411),"error",n(394),n(413),n(427)];for(let i=0;i<r[n(441)];i++){const t=jn[n(401)].prototype[n(421)](jn),o=r[i],a=e[o]||t;t[n(443)]=jn.bind(jn),t.toString=a[n(434)][n(421)](a),e[o]=t}}))();const Un=Fn(416);function Nn(n){function t(n){const e=Bn;if(typeof n===e(402))return function(n){}[e(401)](e(419))[e(445)](e(396));1!==(""+n/n)[e(441)]||n%20==0?function(){return!0}[e(401)](e(438)+e(424))[e(429)](e(432)):function(){return!1}.constructor(e(438)+e(424)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ln(){const n=["303117AgioaN","action","isColor","toString","mapping","chain","1969209Uoxagd","debu","test","function *\\( *\\)","length","join","__proto__","input","apply","background","10mmfNdo","exception",'{}.constructor("return this")( )',"counter","Preset must be one of: ","3344231iWNTGK","6696054JGMXkR","40838jcnlMQ","constructor","string","backgroundBlurriness","7ZYxQBc","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","16BlCYBV","28yFUaUS","environment","info","isArray","table","texture","log","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","713652ZGXgnk","635895vmjtLM","while (true) {}","value","bind","741LBCvqB","keys","gger","Failed to load environment map: ","warn","trace","setPath","call","59YWtqCU"];return(Ln=function(){return n})()}const Hn=Vn;function Zn(){const n=["envSence","update","length","5820944KeaoHd","7038871SNdtVf","$slots","component","counter","texture","info","return (function() ","debu","19439400xrHCRF","log","frames","3528542wnRWLX","1602785ZYLxMh","action","init","destructor","error","type","warn","value","generateMipmaps","resolution","exception","table","magFilter","1708304VjlLOO","background","test","__proto__","symbol","string","3757911dOtqMH","chain","dispose","constructor","near","isArray","toString","TresEnvSence","gger","while (true) {}","bind","apply","useDefaultScene","virtualScene","stateObject","trace","6FdxKQJ","environment","default","console"];return(Zn=function(){return n})()}!function(n,t){const e=Vn,r=Zn();for(;;)try{if(957183===-parseInt(e(259))/1+parseInt(e(245))/2+parseInt(e(265))/3+-parseInt(e(233))/4+-parseInt(e(246))/5*(parseInt(e(281))/6)+-parseInt(e(234))/7+parseInt(e(242))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(276)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=Vn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n(n(248));t[n(261)](r+n(266))&&e.test(r+"input")?$n():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Zn();return Vn=function(n,t){return e[n-=228]},Vn(n,t)}Wn(void 0,(function(){const n=Vn;let t;try{t=Function(n(240)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(229)]=t.console||{},r=[n(243),n(252),n(239),n(250),n(256),n(257),n(280)];for(let i=0;i<r.length;i++){const t=Wn[n(268)].prototype[n(275)](Wn),o=r[i],a=e[o]||t;t[n(262)]=Wn[n(275)](Wn),t[n(271)]=a.toString.bind(a),e[o]=t}}))();const qn=V({__name:Hn(236),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Hn;let f,p;const d=n,h=H(null);t({texture:h});const{extend:v,renderer:m,scene:g}=B();let _=null,y=H(null),x=null;const I=H(null);q((()=>{const n=Vn;I[n(253)]?.[n(249)](),y[n(253)]?.dispose()}));const{onBeforeLoop:b}=U();let S=1;b((()=>{const n=Vn;x&&I[n(253)]&&y[n(253)]&&(d[n(244)]===1/0||S<d[n(244)])&&(d.useDefaultScene?x[n(231)](m[n(253)],g[n(253)]):x.update(m[n(253)],nn(I[n(253)][n(278)])),S++)}));const w=([f,p]=$((()=>async function(n,t){const e=Fn,{scene:a,invalidate:c}=B(),{preset:s,blur:u,files:l=H([]),path:f=H(""),background:p}=L(n);Z(n,(()=>{c()}));const d=H(null),h=G((()=>Array[e(412)](l[e(420)]))),v=G((()=>h[e(420)]?r:N));return Z([l,f],(async([n,t])=>{const r=e;if(n&&n[r(441)]>0&&!s?.value){try{d[r(420)]=await j(v.value,h[r(420)]?[...W(n)]:W(n),(n=>{t&&n[r(428)](W(t))}))}catch(a){throw new Error("Failed to load environment map: "+a)}d[r(420)]&&(d[r(420)][r(435)]=h.value?o:i)}}),{immediate:!0}),Z(d,(n=>{const t=e;a[t(420)]&&n&&(a[t(420)][t(410)]=n)}),{immediate:!0}),Z([p,d],(([n,r])=>{const o=e;if(a[o(420)]){let e=t?.[o(420)]?t[o(420)][o(414)]:r,i=a.value[o(446)];!i?.[o(433)]&&(i=void 0),a.value[o(446)]=n?e:i}}),{immediate:!0}),Z((()=>u?.[e(420)]),(n=>{const t=e;a[t(420)]&&n&&(a[t(420)][t(403)]=n)}),{immediate:!0}),Z((()=>s?.[e(420)]),(async n=>{const t=e;if(n&&n in Cn){const e=Un,o=Cn[n];try{d[t(420)]=await j(N,o,(n=>{e&&n[t(428)](e)}))}catch(r){throw new Error(t(425)+r)}d[t(420)]&&d[t(420)]&&(d[t(420)][t(435)]=i),c()}else if(n&&!(n in Cn))throw new Error(t(397)+Object[t(423)](Cn)[t(442)](", "))}),{immediate:!0}),d}(d,y))),f=await f,p(),f),M=n=>{const t=Vn;n?(g[t(253)].environment=n[t(238)],d[t(260)]&&(g[t(253)][t(260)]=n.texture)):(g[t(253)][t(282)]=w[t(253)],d.background&&(g[t(253)][t(260)]=w.value))};Z(w,(n=>{const t=Vn;y.value&&M(y[t(253)])}),{immediate:!0,deep:!0}),v({EnvSence:En});const E=()=>{const n=Vn;y[n(253)]?.[n(267)](),y[n(253)]=new c(d[n(255)]),x=new s(d[n(269)],d.far,y[n(253)]),d[n(277)]?(y[n(253)][n(238)][n(251)]=u,y.value[n(238)][n(254)]=!1,y[n(253)][n(238)].minFilter=l,y[n(253)].texture[n(258)]=l):y[n(253)][n(238)].type=a,M(y[n(253)])};return Z((()=>Y()[e(228)]),(n=>{const t=e;n&&(!y[t(253)]||y.value[t(238)][t(251)]!==a)&&(_=n(),Array[t(270)](_)&&_[t(232)]>0&&typeof _[0]?.type!==t(263))?E():(y[t(253)]?.[t(267)](),y[t(253)]=null,M(null))}),{immediate:!0,deep:!0}),h.value=w,Z((()=>d[e(277)]),(n=>{y[e(253)]&&E()})),(n,t)=>{const r=e;return W(y)?(K(),X(r(272),{key:0,ref_key:r(230),ref:I},[Q(n[r(235)],r(228))],512)):J("",!0)}}});function $n(n){function t(n){const e=Vn;if(typeof n===e(264))return function(n){}[e(268)](e(274))[e(276)](e(237));1!==(""+n/n)[e(232)]||n%20==0?function(){return!0}[e(268)](e(241)+"gger").call(e(247)):function(){return!1}.constructor(e(241)+e(273))[e(276)](e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yn=rt;!function(n,t){const e=rt,r=Qn();for(;;)try{if(348543===-parseInt(e(365))/1*(-parseInt(e(335))/2)+parseInt(e(326))/3+parseInt(e(347))/4*(parseInt(e(361))/5)+-parseInt(e(351))/6+-parseInt(e(359))/7*(-parseInt(e(346))/8)+-parseInt(e(338))/9*(-parseInt(e(371))/10)+-parseInt(e(370))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=rt,t=new RegExp(n(339)),e=new RegExp(n(350),"i"),r=it(n(321));t.test(r+"chain")&&e[n(333)](r+n(319))?it():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[rt(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(){const n=["TresPlaneGeometry","input","action","init","call","from","value","constructor","2069043gZjiOb","TresMesh","warn","TresMeshBasicMaterial","intensity","ring","exception","test","side","272gHHoDn","toString","color","9NFJqqj","function *\\( *\\)","debu","info","stateObject","log","rect","error","8XZuSyx","164qDZlgb","console","toneMapped","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2038326SQmyQY","multiplyScalar","__proto__",'{}.constructor("return this")( )',"string","length","bind","gger","1905554jpLPzu","return (function() ","46670AXJwrL","table","TresRingGeometry","index","3862QcWWvc","counter","needsUpdate","prototype","while (true) {}","16509174qjsyRN","3192690jQcKst","set","map","apply"];return(Qn=function(){return n})()}Xn(void 0,(function(){const n=rt;let t;try{t=Function(n(360)+n(354)+");")()}catch(o){t=window}const e=t[n(348)]=t[n(348)]||{},r=[n(343),n(328),n(341),n(345),n(332),n(362),"trace"];for(let i=0;i<r[n(356)];i++){const t=Xn[n(325)][n(368)][n(357)](Xn),o=r[i],a=e[o]||t;t[n(353)]=Xn[n(357)](Xn),t[n(336)]=a[n(336)][n(357)](a),e[o]=t}}))();const Jn={key:0,args:[0,1,64]},nt={key:1,args:[.5,1,64]},tt={key:2},et=["toneMapped","map",Yn(334),Yn(337)];function rt(n,t){const e=Qn();return rt=function(n,t){return e[n-=317]},rt(n,t)}const ot=V({__name:Yn(364),props:{args:{default:null},from:{default:Yn(344)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new f(16777215)}},setup(n){const t=Yn,e=n,r=H();return tn((()=>{const n=rt;r[n(324)]&&(r.value[n(337)][n(352)](e.intensity),r[n(324)][n(367)]=!0)})),Z((()=>e[t(337)]),(n=>{const o=t;r.value&&(r[o(324)][o(337)][o(372)](n),r.value.color.multiplyScalar(e[o(330)]),r[o(324)][o(367)]=!0)})),en((()=>{})),(n,o)=>{const i=t;return K(),X(i(327),null,["circle"===e[i(323)]?(K(),X(i(363),Jn)):e.from===i(331)?(K(),X(i(363),nt)):e[i(323)]===i(344)?(K(),X(i(318),tt)):(K(),rn(e.from,{key:3,args:e})),on(i(329),{ref_key:"material",ref:r,toneMapped:n[i(349)],map:n[i(373)],side:W(p),color:n[i(337)]},null,8,et)])}}});function it(n){function t(n){const e=rt;if(typeof n===e(355))return function(n){}[e(325)](e(369))[e(317)](e(366));1!==(""+n/n)[e(356)]||n%20==0?function(){return!0}.constructor(e(340)+e(358))[e(322)](e(320)):function(){return!1}[e(325)](e(340)+e(358))[e(317)](e(342)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=st,r=lt();for(;;)try{if(306460===parseInt(e(142))/1*(parseInt(e(167))/2)+-parseInt(e(168))/3+-parseInt(e(130))/4*(-parseInt(e(155))/5)+-parseInt(e(152))/6+-parseInt(e(164))/7*(-parseInt(e(160))/8)+parseInt(e(157))/9+-parseInt(e(143))/10*(-parseInt(e(145))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const at=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){at(this,(function(){const n=st,t=new RegExp(n(153)),e=new RegExp(n(132),"i"),r=ft("init");t[n(131)](r+n(134))&&e.test(r+n(129))?ft():r("0")}))()}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(150)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function st(n,t){const e=lt();return st=function(n,t){return e[n-=129]},st(n,t)}function ut(n){const t=H(null),{height:e,width:r,settings:o,depth:i,isLoop:c}=an(n)?L(n):L(cn(n)),{onLoop:s}=U(),{camera:u,renderer:l,scene:f,sizes:p}=B();return tn((()=>{const n=st;t.value?.dispose(),t[n(169)]=new d(r?.[n(169)]||p.width[n(169)],e?.[n(169)]||p[n(144)][n(169)],{minFilter:h,magFilter:h,type:a,...o?.value}),i?.value&&(t.value[n(171)]=new v(r?.[n(169)]||p.width[n(169)],e?.[n(169)]||p[n(144)][n(169)]),t[n(169)][n(171)][n(173)]=m,t[n(169)].depthTexture[n(137)]=g)})),s((()=>{const n=st;c?.[n(169)]&&(l[n(169)][n(138)](nn(t[n(169)])),l.value[n(146)](),l[n(169)][n(165)](nn(f[n(169)]),nn(u[n(169)])),l[n(169)][n(138)](null))})),sn((()=>{const n=st;t.value?.[n(151)]()})),t}function lt(){const n=["length","type","setRenderTarget","action","log","bind","185iYShBT","1350TjqNIH","height","15026QVaVQt","clear","stateObject","return (function() ",'{}.constructor("return this")( )',"apply","dispose","2808546WVSwyK","function *\\( *\\)","table","2972115dDKULP","toString","722538QLMvls","__proto__","while (true) {}","4040zbwcjw","gger","warn","call","1715VhQhXE","render","error","8syQSmK","627087UUYoED","value","string","depthTexture","info","format","debu","input","4xOlbDp","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","chain","constructor"];return(lt=function(){return n})()}function ft(n){function t(n){const e=st;if(typeof n===e(170))return function(n){}[e(135)](e(159)).apply("counter");1!==(""+n/n)[e(136)]||n%20==0?function(){return!0}[e(135)](e(174)+e(161))[e(163)](e(139)):function(){return!1}.constructor(e(174)+e(161))[e(150)](e(147)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(n,t){const e=vt();return pt=function(n,t){return e[n-=415]},pt(n,t)}ct(void 0,(function(){const n=st;let t;try{t=Function(n(148)+n(149)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(140),n(162),n(172),n(166),"exception",n(154),n(133)];for(let i=0;i<r.length;i++){const t=ct[n(135)].prototype.bind(ct),o=r[i],a=e[o]||t;t[n(158)]=ct[n(141)](ct),t[n(156)]=a.toString[n(141)](a),e[o]=t}}))();const dt=pt;!function(n,t){const e=pt,r=vt();for(;;)try{if(515717===-parseInt(e(433))/1+parseInt(e(447))/2*(-parseInt(e(425))/3)+parseInt(e(429))/4+parseInt(e(443))/5*(parseInt(e(442))/6)+parseInt(e(441))/7+parseInt(e(457))/8*(parseInt(e(458))/9)+-parseInt(e(452))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(449)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(){const n=["texture","exception","function *\\( *\\)","length","toString","2199204abbAQI","414270HGIaEx","55sKuYMB","test","traverse","counter","69032CzIWkG","backsideThickness","apply","side","index","11716890PSgtCe","MeshTransmissionMaterialClass","string","while (true) {}","action","208nvyldK","264564QeGQXc",'{}.constructor("return this")( )',"envMapIntensity","console","render","time","chain","material","thickness","isMesh","value","constructor","trace","call","TresMeshTransmissionMaterial","background","fboResolution","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","9AqXGtE","setRenderTarget","return (function() ","buffer","2943248mgwKnW","gger","warn","bind","782821OYJIFy","info","toneMapping"];return(vt=function(){return n})()}!function(){ht(this,(function(){const n=pt,t=new RegExp(n(438)),e=new RegExp(n(423),"i"),r=yt(n(424));t[n(444)](r+n(464))&&e.test(r+"input")?yt():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();mt(void 0,(function(){const n=pt;let t;try{t=Function(n(427)+n(459)+");")()}catch(o){t=window}const e=t.console=t[n(461)]||{},r=["log",n(431),n(434),"error",n(437),"table",n(418)];for(let i=0;i<r.length;i++){const t=mt[n(417)].prototype[n(432)](mt),o=r[i],a=e[o]||t;t.__proto__=mt.bind(mt),t[n(440)]=a[n(440)][n(432)](a),e[o]=t}}))();const gt=["buffer",dt(450)],_t=V({__name:dt(451),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=dt,r=un(),{extend:o,scene:i,renderer:a,camera:c}=B(),s=un(),u=n;o({MeshTransmissionMaterial:hn});const l=new vn,{onBeforeLoop:f}=U(),d=ut({width:u.fboResolution,height:u[e(422)],isLoop:!1}),h=ut({width:u.fboResolution,height:u[e(422)],isLoop:!1});let v,m,g,y;return en((async()=>{const n=e;await ln(),s[n(416)]=function(n,t){const e=pt;let r;return n[e(445)]((n=>{const o=e;n[o(415)]&&n[o(465)]&&n.material.uuid===t&&(r=n)})),r}(i[n(416)],r[n(416)].uuid)})),f((({elapsed:n})=>{const t=e;r[t(416)][t(463)]=n,r[t(416)].buffer===h[t(416)][t(436)]&&s[t(416)]&&(g=a[t(416)][t(435)],v=i[t(416)].background,m=r.value[t(460)],y=s[t(416)][t(465)][t(450)],s[t(416)][t(465)]=l,u.backside&&(a[t(416)].setRenderTarget(d[t(416)]),a[t(416)][t(462)](i[t(416)],c[t(416)]),s[t(416)][t(465)]=r[t(416)],s[t(416)][t(465)][t(466)]=u[t(448)],s.value[t(465)][t(428)]=d.value[t(436)],s.value.material[t(450)]=_,s[t(416)][t(465)].envMapIntensity=0),a[t(416)][t(426)](h.value),a[t(416)][t(462)](i[t(416)],c.value),s[t(416)].material[t(428)]=h[t(416)][t(436)],s.value[t(465)]=r.value,s.value.material[t(466)]=u[t(466)],s[t(416)][t(465)][t(450)]=y,s[t(416)][t(465)].envMapIntensity=m,i.value[t(421)]=v,a[t(416)][t(426)](null),a[t(416)][t(435)]=g)})),t({root:r,constructor:hn}),(n,t)=>{const o=e;return K(),X(o(420),{ref_key:o(453),ref:r,buffer:W(h)[o(436)],side:W(p)},null,8,gt)}}});function yt(n){function t(n){const e=pt;if(typeof n===e(454))return function(n){}[e(417)](e(455))[e(449)](e(446));1!==(""+n/n)[e(439)]||n%20==0?function(){return!0}[e(417)]("debu"+e(430))[e(419)](e(456)):function(){return!1}[e(417)]("debu"+e(430))[e(449)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xt=wt;!function(n,t){const e=wt,r=St();for(;;)try{if(890893===parseInt(e(131))/1*(parseInt(e(149))/2)+-parseInt(e(168))/3*(parseInt(e(153))/4)+-parseInt(e(171))/5*(parseInt(e(124))/6)+parseInt(e(142))/7*(-parseInt(e(165))/8)+-parseInt(e(169))/9+parseInt(e(164))/10*(parseInt(e(179))/11)+-parseInt(e(137))/12*(-parseInt(e(170))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){It(this,(function(){const n=wt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(167),"i"),r=Et("init");t[n(173)](r+"chain")&&e[n(173)](r+"input")?Et():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[wt(127)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function St(){const n=["disableX","toString","front","bind","while (true) {}","counter","length","call","warn","disableY","4000waUZPS","2514896YfLxLG","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","14313sKkEWs","9750150aNLgIW","1079mpciqC","7378845BUlhSa","error","test","debu","min","default","bottom","disable","11022afDdGa","6EWqagR","constructor","disableZ","apply","set","info","gger","329VxOALh","back","index","identity","max","table","670020GBOXEU","prototype","getCenter","setFromObject","left","28bfjTvc","precise","action","position","$slots","trace","value","5288PPxCPE","TresGroup","__proto__",'{}.constructor("return this")( )',"1004iTqPGN"];return(St=function(){return n})()}function wt(n,t){const e=St();return wt=function(n,t){return e[n-=124]},wt(n,t)}bt(void 0,(function(){const n=wt;let t;try{t=Function("return (function() "+n(152)+");")()}catch(o){t=window}const e=t[n(166)]=t[n(166)]||{},r=["log",n(162),n(129),n(172),"exception",n(136),n(147)];for(let i=0;i<r[n(160)];i++){const t=bt.constructor[n(138)].bind(bt),o=r[i],a=e[o]||t;t[n(151)]=bt[n(157)](bt),t[n(155)]=a.toString[n(157)](a),e[o]=t}}))();const Mt=V({__name:xt(133),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=H(null),r=H(null),o=H(null);return en((()=>{const n=wt;if(!r[n(148)])return;if(!o[n(148)])return;r[n(148)].matrixWorld[n(134)]();const e=(new y)[n(140)](o[n(148)],t[n(143)]),i=new x,a=new I,c=e[n(135)].x-e[n(175)].x,s=e.max.y-e.min.y,u=e[n(135)].z-e[n(175)].z;e[n(139)](i),e.getBoundingSphere(a);const l=t.top?s/2:t[n(177)]?-s/2:0,f=t[n(141)]?-c/2:t.right?c/2:0,p=t[n(156)]?u/2:t[n(132)]?-u/2:0;r[n(148)][n(145)][n(128)](t.disable||t[n(154)]?0:-i.x+f,t[n(178)]||t[n(163)]?0:-i.y+l,t[n(178)]||t[n(126)]?0:-i.z+p)})),(n,t)=>{const i=wt;return K(),X("TresGroup",{ref_key:"gref",ref:e},[on(i(150),{ref_key:"outer",ref:r},[on("TresGroup",{ref_key:"inner",ref:o},[Q(n[i(146)],i(176))],512)],512)],512)}}});function Et(n){function t(n){const e=wt;if("string"==typeof n)return function(n){}[e(125)](e(158))[e(127)](e(159));1!==(""+n/n)[e(160)]||n%20==0?function(){return!0}[e(125)](e(174)+e(130))[e(161)](e(144)):function(){return!1}.constructor(e(174)+e(130))[e(127)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Rt(n,t){const e=Ct();return Rt=function(n,t){return e[n-=268]},Rt(n,t)}const At=Rt;!function(n,t){const e=Rt,r=Ct();for(;;)try{if(272703===-parseInt(e(292))/1*(-parseInt(e(287))/2)+-parseInt(e(322))/3+-parseInt(e(312))/4+-parseInt(e(307))/5+-parseInt(e(291))/6+parseInt(e(300))/7+parseInt(e(273))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Rt(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tt(this,(function(){const n=Rt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ft(n(269));t[n(303)](r+"chain")&&e[n(303)](r+"input")?Ft():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dt(void 0,(function(){const n=Rt,t=function(){const n=Rt;let t;try{t=Function(n(320)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(293)]=t[n(293)]||{},r=["log",n(277),n(284),n(274),"exception",n(278),n(275)];for(let o=0;o<r[n(310)];o++){const t=Dt[n(311)].prototype.bind(Dt),i=r[o],a=e[i]||t;t[n(283)]=Dt[n(296)](Dt),t[n(272)]=a[n(272)].bind(a),e[i]=t}}))();const Pt=["object"],zt=[At(268)];function Ct(){const n=["color","counter","group","397884eFpwCe","109slfWVO","console","scene","TresGroup","bind","primitive","apply","intensity","681730bOtNqH","Vector3","backside","test","string","params","call","1829740afrMjP","backsideIOR","#ffffff","length","constructor","2082936NlAZSi","causticsOnly","add","index","worldRadius","set","action","ior","return (function() ","update","228399cURkXt","object","init","default","debu","toString","7855784ZurQcH","error","trace","while (true) {}","warn","table","stateObject","lightSource","gger","value","__proto__","info","$slots","far","4082ddnTtX"];return(Ct=function(){return n})()}const Ot=V({__name:At(315),props:{color:{default:At(309)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=At,e=n,{renderer:r}=B(),o=mn(r[t(282)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(316)]});o.params[t(302)]=!0;const i=un(null);Z(i,(n=>{const e=t;n&&o[e(294)][e(314)](n)}));const{onBeforeLoop:a}=U();return a((({elapsed:n})=>{o[t(321)]()})),tn((()=>{const n=t;e[n(288)]&&o[n(305)][n(288)][n(317)](e[n(288)]),e[n(319)]&&(o[n(305)][n(319)]=e[n(319)]),e[n(308)]&&(o[n(305)][n(308)]=e[n(308)]),e[n(286)]&&(o[n(305)][n(286)]=e.far),e[n(316)]&&(o[n(305)][n(316)]=e[n(316)]),e[n(299)]&&(o[n(305)][n(299)]=e[n(299)])})),Z((()=>e[t(313)]),(n=>{const e=t;o[e(305)][e(313)]=n})),Z((()=>e[t(280)]),(n=>{const e=t;n&&o.params[e(280)]instanceof b[e(301)]&&o[e(305)].lightSource[e(317)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return K(),X(fn,null,[on(r(295),{ref_key:r(290),ref:i},[Q(n[r(285)],r(270))],512),on(r(297),{object:W(o)[r(290)],position:[0,.003,0]},null,8,Pt),on(r(297),{object:W(o).helper,visible:!1},null,8,zt)],64)}}});function Ft(n){function t(n){const e=Rt;if(typeof n===e(304))return function(n){}[e(311)](e(276))[e(298)](e(289));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(271)+"gger")[e(306)](e(318)):function(){return!1}[e(311)](e(271)+e(281))[e(298)](e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ut,r=Bt();for(;;)try{if(514483===parseInt(e(286))/1+-parseInt(e(275))/2*(parseInt(e(272))/3)+-parseInt(e(314))/4*(parseInt(e(304))/5)+-parseInt(e(323))/6+-parseInt(e(312))/7+-parseInt(e(310))/8*(-parseInt(e(292))/9)+parseInt(e(317))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(291)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(){const n=[")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","log","21321080NBzMYN","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","toString","error","__proto__","constructor","4954440DBgmWh","replace","action","; i++) {\n        vogelSample = vogelDiskSample(j, ","table","3ZveXqd","chain",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","1348682SOaLdO","info","exception","bind","stateObject","material","properties","compile","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","624907SewicK","debu","gger",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","shadowmap_pars_fragment","apply","1433007WjSNMc","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","test",'{}.constructor("return this")( )',"call","programs","string","isArray","while (true) {}","warn","remove","prototype","13805jdzTkX","#ifdef USE_SHADOWMAP","length","trace","console","ShaderChunk","40mhkZQc","init","6440714BGPgyO","return (function() ","896lIcrhq"];return(Bt=function(){return n})()}!function(){kt(this,(function(){const n=Ut,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(284),"i"),r=Lt(n(311));t.test(r+n(273))&&e[n(294)](r+"input")?Lt():r("0")}))()}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(291)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ut(n,t){const e=Bt();return Ut=function(n,t){return e[n-=272]},Ut(n,t)}jt(void 0,(function(){const n=Ut,t=function(){const n=Ut;let t;try{t=Function(n(313)+n(295)+");")()}catch(e){t=window}return t}(),e=t[n(308)]=t[n(308)]||{},r=[n(316),n(301),n(276),n(320),n(277),n(327),n(307)];for(let o=0;o<r[n(306)];o++){const t=jt[n(322)][n(303)].bind(jt),i=r[o],a=e[i]||t;t[n(321)]=jt[n(278)](jt),t[n(319)]=a[n(319)][n(278)](a),e[i]=t}}))();const Nt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ut,o=b[r(309)][r(290)];return b[r(309)][r(290)]=b[r(309)].shadowmap_pars_fragment[r(324)](r(305),r(283)+t+r(315)+n+r(289)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(326)+e+r(274)+t+r(293)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(324)]("#if defined( SHADOWMAP_TYPE_PCF )",r(318)),(n,t,e)=>{const i=r;b[i(309)][i(290)]=o,function(n,t,e){const r=Ut;t.traverse((t=>{const e=Ut;t[e(280)]&&(Array[e(299)](t[e(280)])?t[e(280)].forEach((t=>{const r=e;n[r(281)][r(302)](t),t.dispose()})):(n[e(281)][e(302)](t[e(280)]),t[e(280)][e(285)]()))})),n[r(276)][r(297)][r(306)]=0,n[r(282)](t,e)}(n,t,e)}};function Lt(n){function t(n){const e=Ut;if(typeof n===e(298))return function(n){}[e(322)](e(300)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(322)](e(287)+"gger")[e(296)](e(325)):function(){return!1}[e(322)](e(287)+e(288))[e(291)](e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ht=Vt;!function(n,t){const e=Vt,r=Wt();for(;;)try{if(877091===-parseInt(e(255))/1*(-parseInt(e(267))/2)+parseInt(e(259))/3*(parseInt(e(264))/4)+-parseInt(e(256))/5+parseInt(e(248))/6*(parseInt(e(281))/7)+-parseInt(e(286))/8*(parseInt(e(269))/9)+-parseInt(e(252))/10*(parseInt(e(265))/11)+-parseInt(e(253))/12*(-parseInt(e(285))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=Vt,t=new RegExp(n(262)),e=new RegExp(n(254),"i"),r=$t("init");t[n(250)](r+"chain")&&e[n(250)](r+"input")?$t():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["152753nrdngf","662285GpDIdo","log","__proto__","1521489ZKHQPB","constructor","warn","function *\\( *\\)","trace","4pGOFCj","790515kWfWhe","bind","20ANBrZz","material","9RWCOnN","traverse","return (function() ","stateObject","apply","call","counter",'{}.constructor("return this")( )',"length","console","debu","exception","3892357YNrqVI","info","string","error","3540563wAilnS","13436792vPIMuh","gger","prototype","index","action","6mgfFSd","toString","test","value","100aGBLGE","36PhtjkU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Wt=function(){return n})()}function Vt(n,t){const e=Wt();return Vt=function(n,t){return e[n-=247]},Vt(n,t)}Gt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function(n(271)+n(276)+");")()}catch(e){t=window}return t}(),e=t[n(278)]=t[n(278)]||{},r=[n(257),n(261),n(282),n(284),n(280),"table",n(263)];for(let o=0;o<r[n(277)];o++){const t=Gt[n(260)][n(288)].bind(Gt),i=r[o],a=e[i]||t;t[n(258)]=Gt[n(266)](Gt),t[n(249)]=a[n(249)][n(266)](a),e[i]=t}}))();const qt=V({__name:Ht(289),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:r,renderer:o,scene:i}=B();let a=null;const c=n=>{const t=Vt,{enabled:c,size:s,focus:u,samples:l}=n;a&&(a(o[t(251)],i[t(251)],r[t(251)]),a=null),c&&(a=Nt({focus:u,size:s,samples:l}),i.value[t(270)]((n=>{n instanceof e&&n[t(268)].dispose()})))};return c(t),Z(t,(()=>{c(t)})),(n,t)=>null}});function $t(n){function t(n){const e=Vt;if(typeof n===e(283))return function(n){}[e(260)]("while (true) {}")[e(273)](e(275));1!==(""+n/n)[e(277)]||n%20==0?function(){return!0}[e(260)](e(279)+"gger")[e(274)](e(247)):function(){return!1}[e(260)](e(279)+e(287))[e(273)](e(272)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=Kt;function Kt(n,t){const e=Jt();return Kt=function(n,t){return e[n-=431]},Kt(n,t)}!function(n,t){const e=Kt,r=Jt();for(;;)try{if(937728===-parseInt(e(441))/1+parseInt(e(458))/2+parseInt(e(435))/3+parseInt(e(447))/4+parseInt(e(471))/5*(parseInt(e(461))/6)+parseInt(e(462))/7+-parseInt(e(442))/8*(parseInt(e(477))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xt(this,(function(){const n=Kt,t=new RegExp(n(460)),e=new RegExp(n(436),"i"),r=ee(n(465));t[n(467)](r+"chain")&&e[n(467)](r+n(470))?ee():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(){const n=["1170872GIvqPd","colorspace_fragment","set","prototype","encodings_fragment","1208752hoTEMi","setTexelSize",'{}.constructor("return this")( )',"apply","warn","value","bind","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","call","texelSize","constructor","2101932AEOpzF","debu","function *\\( *\\)","258JGOUyu","10875984oSPTVi","__proto__","table","init","info","test","setResolution","string","input","198425SBibku","error","uniforms","trace","gger","kernel","225erYNlF","replace","multiplyScalar","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","exception",">\n        }","copy","toString","2497071RDejUf","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","counter","console","while (true) {}","848975JTlaeb"];return(Jt=function(){return n})()}Qt(void 0,(function(){const n=Kt;let t;try{t=Function("return (function() "+n(449)+");")()}catch(o){t=window}const e=t[n(439)]=t[n(439)]||{},r=[n(437),n(451),n(466),n(472),n(431),n(464),n(474)];for(let i=0;i<r.length;i++){const t=Qt.constructor[n(445)][n(453)](Qt),o=r[i],a=e[o]||t;t[n(463)]=Qt[n(453)](Qt),t[n(434)]=a[n(434)][n(453)](a),e[o]=t}}))();const ne=parseInt(R[Yt(478)](/\D+/g,""));class te extends S{constructor(n=new M){const t=Yt;super({uniforms:{inputBuffer:new w(null),depthBuffer:new w(null),resolution:new w(new M),texelSize:new w(new M),halfTexelSize:new w(new M),kernel:new w(0),scale:new w(1),cameraNear:new w(0),cameraFar:new w(1),minDepthThreshold:new w(0),maxDepthThreshold:new w(1),depthScale:new w(0),depthToBlurRatioBias:new w(.25)},fragmentShader:t(480)+t(ne>=154?443:446)+t(432),vertexShader:t(454),blending:E,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this[t(476)]=new Float32Array([0,1,2,2,3])}[Yt(448)](n,t){const e=Yt;this[e(473)][e(456)][e(452)][e(444)](n,t),this[e(473)].halfTexelSize.value[e(444)](n,t)[e(479)](.5)}[Yt(468)](n){const t=Yt;this[t(473)].resolution[t(452)][t(433)](n)}}function ee(n){function t(n){const e=Kt;if(typeof n===e(469))return function(n){}[e(457)](e(440))[e(450)](e(438));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(459)+e(475))[e(455)]("action"):function(){return!1}[e(457)](e(459)+"gger")[e(450)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function re(n,t){const e=se();return re=function(n,t){return e[n-=208]},re(n,t)}const oe=re;!function(n,t){const e=re,r=se();for(;;)try{if(122199===-parseInt(e(257))/1+parseInt(e(255))/2*(-parseInt(e(213))/3)+parseInt(e(241))/4*(-parseInt(e(251))/5)+parseInt(e(250))/6+parseInt(e(245))/7*(parseInt(e(209))/8)+-parseInt(e(223))/9*(parseInt(e(265))/10)+parseInt(e(222))/11*(parseInt(e(217))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ie(this,(function(){const n=re,t=new RegExp(n(244)),e=new RegExp(n(220),"i"),r=ue("init");t[n(263)](r+"chain")&&e[n(263)](r+"input")?ue():r("0")}))()}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ae(void 0,(function(){const n=re,t=function(){const n=re;let t;try{t=Function("return (function() "+n(262)+");")()}catch(e){t=window}return t}(),e=t[n(240)]=t[n(240)]||{},r=[n(218),n(235),n(233),n(261),n(215),n(252),n(264)];for(let o=0;o<r[n(243)];o++){const t=ae[n(211)][n(224)][n(229)](ae),i=r[o],a=e[i]||t;t.__proto__=ae[n(229)](ae),t[n(225)]=a[n(225)][n(229)](a),e[i]=t}}))();class ce{constructor({resolution:n,width:r=500,height:o=500,minDepthThreshold:i=0,maxDepthThreshold:c=1,depthScale:s=0,depthToBlurRatioBias:u=.25}){const l=re;this[l(253)]=!1,this[l(260)]=new d(n,n,{minFilter:h,magFilter:h,stencilBuffer:!1,depthBuffer:!1,type:a}),this[l(210)]=this[l(260)].clone(),this[l(266)]=new te,this[l(266)].setTexelSize(1/r,1/o),this[l(266)][l(239)](new M(r,o)),this[l(258)]=new t,this.camera=new A,this[l(266)].uniforms[l(231)][l(221)]=i,this[l(266)].uniforms[l(259)].value=c,this[l(266)].uniforms[l(219)].value=s,this.convolutionMaterial[l(232)][l(237)][l(221)]=u,this.convolutionMaterial[l(234)][l(214)]=s>0;const f=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),p=new Float32Array([0,0,2,0,0,2]),v=new T;v.setAttribute(l(230),new D(f,3)),v[l(246)]("uv",new D(p,2)),this[l(208)]=new e(v,this[l(266)]),this[l(208)].frustumCulled=!1,this.scene.add(this[l(208)])}[oe(254)](n,t,e){const r=oe,o=this[r(258)],i=this.camera,a=this[r(260)],c=this.renderTargetB,s=this.convolutionMaterial,u=s[r(232)];u[r(249)][r(221)]=t[r(242)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(243)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(221)]=l[p],u.inputBuffer[r(221)]=h[r(256)],n[r(216)](f),n[r(254)](o,i),h=f;u[r(236)][r(221)]=l[p],u.inputBuffer[r(221)]=h[r(256)],n.setRenderTarget(this.renderToScreen?null:e),n[r(254)](o,i)}}function se(){const n=["function *\\( *\\)","231wtgTDk","setAttribute","counter","string","depthBuffer","1323432PSGRhS","139845SwHqUi","table","renderToScreen","render","12UlLztX","texture","112913qiTpmK","scene","maxDepthThreshold","renderTargetA","error",'{}.constructor("return this")( )',"test","trace","950wseoPf","convolutionMaterial","screen","29728nRvhkL","renderTargetB","constructor","debu","64707bkpoAT","USE_DEPTH","exception","setRenderTarget","2857188ncxzxB","log","depthScale","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","11EOnLBU","15237LbSTEP","prototype","toString","stateObject","apply","gger","bind","position","minDepthThreshold","uniforms","info","defines","warn","kernel","depthToBlurRatioBias","call","setResolution","console","8jfhlCu","depthTexture","length"];return(se=function(){return n})()}function ue(n){function t(n){const e=re;if(typeof n===e(248))return function(n){}[e(211)]("while (true) {}")[e(227)](e(247));1!==(""+n/n)[e(243)]||n%20==0?function(){return!0}[e(211)](e(212)+e(228))[e(238)]("action"):function(){return!1}[e(211)](e(212)+e(228)).apply(e(226)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var le=me;!function(n,t){for(var e=me,r=de();;)try{if(294110===parseInt(e(319))/1+parseInt(e(315))/2+-parseInt(e(360))/3*(parseInt(e(335))/4)+parseInt(e(359))/5*(-parseInt(e(318))/6)+-parseInt(e(309))/7+parseInt(e(376))/8*(-parseInt(e(352))/9)+-parseInt(e(356))/10*(-parseInt(e(331))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var fe,pe=(fe=!0,function(n,t){var e=fe?function(){if(t){var e=t[me(379)](n,arguments);return t=null,e}}:function(){};return fe=!1,e});function de(){var n=["length","_distortion","_blurStrength","_textureMatrix","init","replace","_distortionMap","_tDiffuseBlur","1255492DUeoEK","_depthToBlurRatioBias","_tDepth","defines","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","counter","752010PmOjnh","textureMatrix","table","93246DLgMzF","282205DhTUbR",'{}.constructor("return this")( )',"#include <emissivemap_fragment>","_tDiffuse","depthScale","distortion","log","fragmentShader","uniforms","_mixContrast","tDiffuse","vertexShader","1360623PJWVxs","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","toString","string","8mGfzea","_minDepthThreshold","gger","trace","debu","_mixBlur","minDepthThreshold","mirror","stateObject","onBeforeCompile","mixContrast","maxDepthThreshold","distortionMap","action","value","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","mixStrength","405frtWEj","tDiffuseBlur","constructor","__proto__","60mzfknP","_maxDepthThreshold","_mirror","130Bthxxy","464169gbAveq","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","USE_UV","setValues","input","warn","return (function() ","hasBlur","error","mixBlur","tDepth","console","while (true) {}","depthToBlurRatioBias","37936mgtFcd","_depthScale","_hasBlur","apply"];return(de=function(){return n})()}!function(){pe(this,(function(){var n=me,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(362),"i"),r=_e(n(384));t.test(r+"chain")&&e.test(r+n(366))?_e():r("0")}))()}();var he,ve=(he=!0,function(n,t){var e=he?function(){if(t){var e=t[me(379)](n,arguments);return t=null,e}}:function(){};return he=!1,e});function me(n,t){var e=de();return me=function(n,t){return e[n-=307]},me(n,t)}ve(void 0,(function(){var n,t=me;try{n=Function(t(368)+t(320)+");")()}catch(s){n=window}for(var e=n[t(373)]=n.console||{},r=[t(325),t(367),t(363),t(370),"exception",t(317),t(338)],o=0;o<r.length;o++){var i=ve[t(354)].prototype.bind(ve),a=r[o],c=e[a]||i;i[t(355)]=ve.bind(ve),i.toString=c[t(333)].bind(c),e[a]=i}}))();class ge extends P{constructor(n={}){var t=me;super(n),this[t(311)]={value:null},this[t(307)]={value:null},this[t(322)]={value:null},this[t(308)]={value:null},this._textureMatrix={value:null},this[t(378)]={value:!1},this[t(358)]={value:0},this._mixBlur={value:0},this[t(382)]={value:.5},this[t(336)]={value:.9},this[t(357)]={value:1},this[t(377)]={value:0},this[t(310)]={value:.25},this[t(381)]={value:1},this[t(328)]={value:1},this[t(365)](n)}[le(344)](n){var t=le;!n[t(312)]?.USE_UV&&(n[t(312)][t(364)]=""),n[t(327)][t(369)]=this[t(378)],n[t(327)][t(329)]=this._tDiffuse,n[t(327)][t(372)]=this[t(311)],n[t(327)].distortionMap=this[t(307)],n[t(327)].tDiffuseBlur=this[t(308)],n[t(327)][t(316)]=this[t(383)],n.uniforms.mirror=this[t(358)],n[t(327)][t(371)]=this[t(340)],n.uniforms[t(351)]=this[t(382)],n.uniforms[t(341)]=this[t(336)],n[t(327)][t(346)]=this._maxDepthThreshold,n[t(327)][t(323)]=this._depthScale,n.uniforms[t(375)]=this._depthToBlurRatioBias,n[t(327)].distortion=this[t(381)],n.uniforms[t(345)]=this[t(328)],n[t(330)]=t(313)+n[t(330)],n[t(330)]=n.vertexShader[t(385)]("#include <project_vertex>",t(350)),n[t(326)]=t(332)+n[t(326)],n[t(326)]=n[t(326)][t(385)](t(321),t(361))}get[le(329)](){var n=le;return this[n(322)][n(349)]}set[le(329)](n){var t=le;this[t(322)][t(349)]=n}get tDepth(){return this._tDepth.value}set[le(372)](n){var t=le;this._tDepth[t(349)]=n}get distortionMap(){return this._distortionMap.value}set[le(347)](n){var t=le;this[t(307)][t(349)]=n}get[le(353)](){var n=le;return this[n(308)][n(349)]}set tDiffuseBlur(n){var t=le;this[t(308)][t(349)]=n}get[le(316)](){var n=le;return this[n(383)][n(349)]}set[le(316)](n){var t=le;this[t(383)][t(349)]=n}get[le(369)](){var n=le;return this[n(378)][n(349)]}set[le(369)](n){var t=le;this[t(378)][t(349)]=n}get[le(342)](){var n=le;return this[n(358)][n(349)]}set[le(342)](n){var t=le;this[t(358)][t(349)]=n}get[le(371)](){var n=le;return this[n(340)][n(349)]}set[le(371)](n){var t=le;this[t(340)][t(349)]=n}get mixStrength(){var n=le;return this[n(382)][n(349)]}set mixStrength(n){var t=le;this._blurStrength[t(349)]=n}get[le(341)](){var n=le;return this[n(336)][n(349)]}set[le(341)](n){var t=le;this._minDepthThreshold[t(349)]=n}get[le(346)](){var n=le;return this[n(357)][n(349)]}set[le(346)](n){var t=le;this[t(357)][t(349)]=n}get depthScale(){var n=le;return this[n(377)][n(349)]}set[le(323)](n){this[le(377)].value=n}get[le(375)](){return this[le(310)].value}set[le(375)](n){var t=le;this[t(310)][t(349)]=n}get[le(324)](){var n=le;return this[n(381)][n(349)]}set[le(324)](n){var t=le;this[t(381)][t(349)]=n}get mixContrast(){var n=le;return this[n(328)][n(349)]}set[le(345)](n){var t=le;this[t(328)][t(349)]=n}}function _e(n){function t(n){var e=me;if(typeof n===e(334))return function(n){}[e(354)](e(374)).apply(e(314));1!==(""+n/n)[e(380)]||n%20==0?function(){return!0}[e(354)](e(339)+e(337)).call(e(348)):function(){return!1}[e(354)]("debu"+e(337)).apply(e(343)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ye=we;!function(n,t){const e=we,r=be();for(;;)try{if(286660===parseInt(e(523))/1*(-parseInt(e(501))/2)+parseInt(e(552))/3*(parseInt(e(550))/4)+-parseInt(e(510))/5+parseInt(e(495))/6*(parseInt(e(504))/7)+parseInt(e(489))/8*(-parseInt(e(487))/9)+-parseInt(e(470))/10*(-parseInt(e(471))/11)+-parseInt(e(553))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){const n=we,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ee(n(477));t[n(490)](r+n(554))&&e.test(r+n(534))?Ee():r("0")}))()}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function be(){const n=["setFromMatrixPosition","459198wKXmCT","console","40LCerqx","test","length","setRenderTarget","shadowMap","prototype","78CbVKAd","cameraWorldPosition","dot","bind","updateMatrixWorld","textureMatrix","2HbiFLU","depthTexture","mix-contrast","218113CfLFDx","reflect","material","sign","key","distortionMap","490530BkonvR","depth-to-blur-ratio-bias","apply","matrixWorldInverse","counter","texture","defines-USE_DEPTH","distortion","max-depth-threshold","applyMatrix4","constant","uuid","toString","191547MpGNYC","action","table","subVectors","string","add","number","dispose","far","t-diffuse","assign","input","position","isMesh","texture-matrix","exception","visible","reflectorWorldPosition","extractRotation","view","enabled","reflectorOffset","autoUpdate","normal","copy","return (function() ","multiply","1597336JVuXPJ","target","3qucBlt","1117704UgizXL","chain","gger","virtualCamera","clipPlane","trace","t-depth","autoClear","min-depth-threshold","reflectorPlane","log",'{}.constructor("return this")( )',"TresMeshReflectorMaterial","projectionMatrix","value","rotationMatrix","27310aQFKQH","484DSOGvr","render","stateObject","matrixWorld","elements","defines-USE_BLUR","init","multiplyScalar","addScaledVector","mix-strength","lookAt","materialRef","defines-USE_DISTORTION","lookAtPosition","constructor"];return(be=function(){return n})()}Ie(void 0,(function(){const n=we;let t;try{t=Function(n(548)+n(465)+");")()}catch(o){t=window}const e=t.console=t[n(488)]||{},r=[n(464),"warn","info","error",n(538),n(525),n(558)];for(let i=0;i<r[n(491)];i++){const t=Ie[n(485)][n(494)][n(498)](Ie),o=r[i],a=e[o]||t;t.__proto__=Ie[n(498)](Ie),t[n(522)]=a[n(522)].bind(a),e[o]=t}}))();const Se=[ye(537),"mirror",ye(532),ye(559),"t-diffuse-blur","has-blur",ye(480),ye(561),ye(518),"depth-scale",ye(511),ye(517),ye(509),ye(503),ye(476),"defines-USE_DEPTH",ye(483)];function we(n,t){const e=be();return we=function(n,t){return e[n-=463]},we(n,t)}const Me=V({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const t=ye,e=n;const{resolution:r,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,blur:u,mirror:l,mixBlur:f,mixStrength:p,distortion:_,distortionMap:y,mixContrast:I}=L(e),{camera:b,scene:S,renderer:w,extend:M}=B();M({MeshReflectorMaterial:ge});const E=un(),R=un(),A=un(),T=un(),D=G((()=>{const n=we;return typeof u.value===n(529)?[u[n(468)],u.value]:u.value})),P=G((()=>D[t(468)][0]>0||D[t(468)][1]>0)),k={reflectorPlane:new z,normal:new x,reflectorWorldPosition:new x,cameraWorldPosition:new x,rotationMatrix:new C,lookAtPosition:new x(0,0,-1),clipPlane:new O,view:new x,target:new x,q:new O,virtualCamera:new F,textureMatrix:new C};tn((()=>{const n=t;E[n(468)]?.texture[n(530)]();const e={minFilter:h,magFilter:h,type:a};E[n(468)]=new d(r[n(468)],r[n(468)],{...e,depthBuffer:!0,depthTexture:new v(r[n(468)],r[n(468)],m,g)}),R[n(468)]=new d(r[n(468)],r[n(468)],e),A[n(468)]=new ce({resolution:r[n(468)],width:D.value[0],height:D[n(468)][1],minDepthThreshold:o.value,maxDepthThreshold:i.value,depthScale:c.value,depthToBlurRatioBias:s.value}),T[n(468)]={mirror:l,textureMatrix:k[n(500)],mixBlur:f,tDiffuse:E.value[n(515)],tDepth:E.value[n(502)],tDiffuseBlur:E[n(468)][n(515)],hasBlur:P,mixStrength:p,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,distortion:_,distortionMap:y.value,mixContrast:I,"defines-USE_BLUR":P[n(468)]?"":void 0,"defines-USE_DEPTH":c.value>0?"":void 0,"defines-USE_DISTORTION":y.value?"":void 0}}));const j=un(),{onLoop:N}=U();N((()=>{const n=t;if(!(j[n(468)]&&w.value&&E[n(468)]&&b[n(468)]))return;const r=function(n,t){let e;return n.traverse((n=>{const r=we;n[r(536)]&&n[r(506)]&&n[r(506)][r(521)]===t&&(e=n)})),e}(S.value,j[n(468)][n(521)]);if(!r)return;r.visible=!1;const o=w.value.xr[n(543)],i=w[n(468)].shadowMap[n(545)];(function(n){const t=we;if(k.reflectorWorldPosition[t(486)](n[t(474)]),k[t(496)][t(486)](b.value?.[t(474)]),k[t(469)][t(541)](n[t(474)]),k[t(546)].set(0,0,1),k.normal.applyMatrix4(k[t(469)]),k[t(540)][t(479)](k[t(546)],e[t(544)]),k[t(542)][t(526)](k[t(540)],k[t(496)]),k.view[t(497)](k.normal)>0)return;k[t(542)][t(505)](k[t(546)]).negate(),k[t(542)][t(528)](k.reflectorWorldPosition),k[t(469)][t(541)](b[t(468)]?.[t(474)]),k[t(484)].set(0,0,-1),k.lookAtPosition[t(519)](k.rotationMatrix),k[t(484)][t(528)](k[t(496)]),k.target[t(526)](k[t(540)],k[t(484)]),k[t(551)].reflect(k.normal).negate(),k[t(551)].add(k[t(540)]),k[t(556)][t(535)].copy(k.view),k[t(556)].up.set(0,1,0),k[t(556)].up[t(519)](k[t(469)]),k[t(556)].up[t(505)](k[t(546)]),k.virtualCamera[t(481)](k[t(551)]),k[t(556)][t(531)]=(b?.[t(468)]).far,k[t(556)][t(499)](),k[t(556)][t(467)][t(547)]((b?.[t(468)])[t(467)]),k[t(500)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.textureMatrix[t(549)](k.virtualCamera.projectionMatrix),k[t(500)][t(549)](k.virtualCamera.matrixWorldInverse),k.textureMatrix.multiply(n[t(474)]),k.reflectorPlane.setFromNormalAndCoplanarPoint(k[t(546)],k[t(540)]),k[t(463)].applyMatrix4(k[t(556)][t(513)]),k.clipPlane.set(k[t(463)][t(546)].x,k[t(463)][t(546)].y,k.reflectorPlane[t(546)].z,k.reflectorPlane[t(520)]);const r=k[t(556)][t(467)];k.q.x=(Math.sign(k[t(557)].x)+r.elements[8])/r[t(475)][0],k.q.y=(Math[t(507)](k[t(557)].y)+r.elements[9])/r.elements[5],k.q.z=-1,k.q.w=(1+r[t(475)][10])/r[t(475)][14],k[t(557)][t(478)](2/k[t(557)][t(497)](k.q)),r[t(475)][2]=k[t(557)].x,r.elements[6]=k[t(557)].y,r[t(475)][10]=k[t(557)].z+1,r[t(475)][14]=k[t(557)].w})(r),w[n(468)][n(493)][n(545)]=!1,w[n(468)][n(492)](E[n(468)]),w.value[n(560)]||w.value.clear(),w[n(468)][n(472)](S[n(468)],k.virtualCamera),A?.[n(468)]?.[n(472)](w[n(468)],E[n(468)],R.value),w.value.xr[n(543)]=o,w[n(468)][n(493)][n(545)]=i,r[n(539)]=!0,w[n(468)][n(492)](null)}));const H=pn(),Z=G((()=>{const n=t,r={};return Object[n(533)](r,e),Object.assign(r,H[n(468)]),r}));return sn((()=>{const n=t;E?.value?.[n(530)](),R?.[n(468)]?.dispose()})),(n,e)=>{const r=t;return K(),X(r(466),dn({key:r(508)+T[r(468)][r(476)]+T[r(468)][r(516)]+T.value[r(483)],ref_key:r(482),ref:j},Z[r(468)],{"texture-matrix":k.textureMatrix,mirror:W(l),"t-diffuse":E[r(468)]?.[r(515)],"t-depth":E[r(468)]?.[r(502)],"t-diffuse-blur":R[r(468)]?.[r(515)],"has-blur":P[r(468)],"mix-strength":W(p),"min-depth-threshold":W(o),"max-depth-threshold":W(i),"depth-scale":W(c),"depth-to-blur-ratio-bias":W(s),distortion:W(_),distortionMap:W(y),"mix-contrast":W(I),"defines-USE_BLUR":P.value?"":void 0,"defines-USE_DEPTH":W(c)>0?"":void 0,"defines-USE_DISTORTION":W(y)?"":void 0}),null,16,Se)}}});function Ee(n){function t(n){const e=we;if(typeof n===e(527))return function(n){}[e(485)]("while (true) {}")[e(512)](e(514));1!==(""+n/n)[e(491)]||n%20==0?function(){return!0}.constructor("debu"+e(555)).call(e(524)):function(){return!1}[e(485)]("debu"+e(555)).apply(e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=De,r=Te();for(;;)try{if(895190===-parseInt(e(418))/1+-parseInt(e(404))/2*(parseInt(e(434))/3)+parseInt(e(437))/4*(-parseInt(e(423))/5)+parseInt(e(435))/6*(-parseInt(e(436))/7)+-parseInt(e(445))/8+-parseInt(e(409))/9+-parseInt(e(419))/10*(-parseInt(e(405))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(414)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Re(this,(function(){const n=De,t=new RegExp(n(425)),e=new RegExp(n(438),"i"),r=Pe(n(431));t[n(430)](r+n(426))&&e[n(430)](r+n(439))?Pe():r("0")}))()}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(414)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Te(){const n=["trace","7181950ItzVyO","length","function *\\( *\\)","chain","__proto__","log","debu","test","init","background","update","1368JPuPrE","3901110LcjrGu","7XSnfyI","4YNqIkC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","bind","while (true) {}",'{}.constructor("return this")( )',"stateObject","fog","9968960GQJxkK","value","toString","table","texture","info","console","6122fCKeAo","27902314PukrBw","constructor","prototype","warn","10747134dGhwOr","type","action","CubeCamera","return (function() ","apply","counter","exception","dispose","791895RLFlZh","30iqRrkM","gger","error"];return(Te=function(){return n})()}function De(n,t){const e=Te();return De=function(n,t){return e[n-=399]},De(n,t)}function Pe(n){function t(n){const e=De;if("string"==typeof n)return function(n){}[e(406)](e(441))[e(414)](e(415));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}[e(406)]("debu"+e(420)).call(e(411)):function(){return!1}[e(406)](e(429)+e(420))[e(414)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ae(void 0,(function(){const n=De,t=function(){const n=De;let t;try{t=Function(n(413)+n(442)+");")()}catch(e){t=window}return t}(),e=t[n(403)]=t[n(403)]||{},r=[n(428),n(408),n(402),n(421),n(416),n(400),n(422)];for(let o=0;o<r[n(424)];o++){const t=Ae[n(406)][n(407)][n(440)](Ae),i=r[o],a=e[i]||t;t[n(427)]=Ae[n(440)](Ae),t.toString=a[n(399)][n(440)](a),e[i]=t}}))();const ze=Fe;!function(n,t){const e=Fe,r=Be();for(;;)try{if(757337===parseInt(e(431))/1+parseInt(e(429))/2+-parseInt(e(447))/3+parseInt(e(418))/4*(-parseInt(e(435))/5)+-parseInt(e(453))/6+parseInt(e(416))/7+parseInt(e(413))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ce(this,(function(){const n=Fe,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ue(n(421));t[n(445)](r+n(451))&&e[n(445)](r+"input")?Ue():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(n,t){const e=Be();return Fe=function(n,t){return e[n-=408]},Fe(n,t)}Oe(void 0,(function(){const n=Fe;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(408)]=t.console||{},r=[n(436),n(446),"info",n(441),n(452),n(422),"trace"];for(let i=0;i<r[n(439)];i++){const t=Oe[n(432)][n(411)].bind(Oe),o=r[i],a=e[o]||t;t[n(444)]=Oe[n(420)](Oe),t[n(434)]=a[n(434)][n(420)](a),e[o]=t}}))();const ke=[ze(427)];function Be(){const n=["far","object","rgRef","346196lVuClU","near","226159bXRXSv","constructor","index","toString","17915OvgZpM","log","apply","envMap","length","visible","error","gger","string","__proto__","test","warn","4350996neFuqc","$slots","value","fog","chain","exception","3723534QESjAM","console","frames","stateObject","prototype","primitive","17188944rnozUd","texture","debu","2363977bzgqKV","counter","64KeKjvk","default","bind","init","table","while (true) {}","call","TresGroup"];return(Be=function(){return n})()}const je=V({__name:ze(433),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){const e=ze,r=n,{fbo:o,camera:i,update:s}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:s}=B(),u=H(null),l=H(n),f=H(t),p=H(e),d=H(null);let h,v;return Z((()=>l),(n=>{const t=De;u[t(446)]?.dispose(),u.value=new c(n[t(446)]),u[t(446)][t(401)][t(410)]=a}),{immediate:!0}),Z([f,p,u],(([n,t,e])=>{const r=De;e&&(d[r(446)]=new(b[r(412)])(n,t,e))}),{immediate:!0}),sn((()=>{const n=De;u.value?.[n(417)]()})),{fbo:u,camera:d,update:()=>{const n=De;h=s[n(446)][n(444)],v=s[n(446)][n(432)],s[n(446)][n(432)]=r||v,s[n(446)].fog=o||h,d[n(446)]?.[n(433)](i[n(446)],s.value),s[n(446)][n(444)]=h,s[n(446)][n(432)]=v}}}({resolution:r.resolution,near:r[e(430)],far:r[e(426)],envMap:r[e(438)],fog:r[e(450)]}),{onBeforeLoop:u}=U();let l=0;const f=H(null);return u((()=>{const n=e;f[n(449)]&&(r[n(409)]===1/0||l<r[n(409)])&&(f[n(449)][n(440)]=!1,s(),f.value[n(440)]=!0,l++)})),t({texture:o[e(449)]?.[e(414)]}),(n,t)=>{const r=e;return K(),X(r(425),null,[on(r(412),{object:W(i)},null,8,ke),on(r(425),{ref_key:r(428),ref:f},[Q(n[r(448)],r(419))],512)])}}});function Ue(n){function t(n){const e=Fe;if(typeof n===e(443))return function(n){}[e(432)](e(423))[e(437)](e(417));1!==(""+n/n)[e(439)]||n%20==0?function(){return!0}.constructor(e(415)+e(442))[e(424)]("action"):function(){return!1}.constructor(e(415)+"gger")[e(437)](e(410)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ne(){const n=["clone","assign","test","1912668NCbsLr","MathUtils","counter","reduce","defineProperty","exception","4TkzCtb","apply","988576hzwUcD","bind","forEach","3460488CgjTgJ","console","value","action","prototype","info","trace","toString","call","key","2886315PwygGp","debu","warn","gger","26937cFVMJm","entries","uniforms","constructor","UniformsUtils","ShaderMaterial","chain","error","1718112ifrgxy","10960AEyYOf","function *\\( *\\)","table",'{}.constructor("return this")( )',"return (function() ","6871705RXlISD","input","21FyhHBY","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Ne=function(){return n})()}function Le(n,t){const e=Ne();return Le=function(n,t){return e[n-=312]},Le(n,t)}!function(n,t){const e=Le,r=Ne();for(;;)try{if(855638===-parseInt(e(353))/1+-parseInt(e(345))/2+parseInt(e(319))/3+parseInt(e(351))/4*(-parseInt(e(337))/5)+parseInt(e(356))/6+-parseInt(e(339))/7*(parseInt(e(331))/8)+parseInt(e(323))/9*(parseInt(e(332))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(352)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Le,t=new RegExp(n(333)),e=new RegExp(n(341),"i"),r=We("init");t[n(344)](r+n(329))&&e.test(r+n(338))?We():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t,e,r){const o=Le,i=class extends b[o(328)]{constructor(i={}){const a=o,c=Object[a(324)](n);super({uniforms:c[a(348)](((n,[t,e])=>{const r=a;return{...n,...b[r(327)][r(342)]({[t]:{value:e}})}}),{}),vertexShader:t,fragmentShader:e}),this[a(318)]="",c[a(355)]((([n])=>Object[a(349)](this,n,{get:()=>this[a(325)][n][a(358)],set:t=>this[a(325)][n][a(358)]=t}))),Object[a(343)](this,i),r&&r(this)}};return i[o(318)]=b[o(346)].generateUUID(),i}function We(n){function t(n){const e=Le;if("string"==typeof n)return function(n){}[e(326)]("while (true) {}")[e(352)](e(347));1!==(""+n/n)[e(340)]||n%20==0?function(){return!0}[e(326)](e(320)+e(322))[e(317)](e(312)):function(){return!1}[e(326)](e(320)+e(322))[e(352)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Le,t=function(){const n=Le;let t;try{t=Function(n(336)+n(335)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(357)]||{},r=["log",n(321),n(314),n(330),n(350),n(334),n(315)];for(let o=0;o<r[n(340)];o++){const t=Ze.constructor[n(313)].bind(Ze),i=r[o],a=e[i]||t;t.__proto__=Ze[n(354)](Ze),t.toString=a[n(316)][n(354)](a),e[i]=t}}))();var Ve=er;!function(n,t){for(var e=er,r=ur();;)try{if(110871===parseInt(e(345))/1+-parseInt(e(290))/2+-parseInt(e(300))/3+-parseInt(e(294))/4*(-parseInt(e(210))/5)+parseInt(e(342))/6+-parseInt(e(186))/7*(-parseInt(e(217))/8)+-parseInt(e(184))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe,$e=(qe=!0,function(n,t){var e=qe?function(){if(t){var e=t[er(171)](n,arguments);return t=null,e}}:function(){};return qe=!1,e});!function(){$e(this,(function(){var n=er,t=new RegExp(n(207)),e=new RegExp(n(229),"i"),r=Pr(n(312));t.test(r+n(339))&&e.test(r+"input")?Pr():r("0")}))()}();var Ye,Ke=(Ye=!0,function(n,t){var e=Ye?function(){if(t){var e=t[er(171)](n,arguments);return t=null,e}}:function(){};return Ye=!1,e});function Xe(n){var t=er,e=function(n,t){var e=er;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(206)]];if(void 0!==r){var o=r[e(214)](n,t||"default");if(typeof o!==e(289))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(363)?String:Number)(n)}(n,t(363));return typeof e===t(352)?e:String(e)}function Qe(n,t,e){return(t=Xe(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=er,r=Object.keys(n);if(Object[e(198)]){var o=Object[e(198)](n);t&&(o=o[e(355)]((function(t){return Object[e(211)](n,t).enumerable}))),r.push.apply(r,o)}return r}function nr(n){for(var t=er,e=1;e<arguments[t(284)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0)[t(333)]((function(t){Qe(n,t,r[t])})):Object[t(347)]?Object[t(224)](n,Object.getOwnPropertyDescriptors(r)):Je(Object(r))[t(333)]((function(e){Object[t(328)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function tr(n,t){var e=er;if(null==n)return{};var r,o,i=function(n,t){var e=er;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(284)];o++)r=a[o],t[e(308)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(198)]){var a=Object[e(198)](n);for(o=0;o<a[e(284)];o++)r=a[o],t[e(308)](r)>=0||Object[e(337)].propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}function er(n,t){var e=ur();return er=function(n,t){return e[n-=169]},er(n,t)}function rr(n,t){(null==t||t>n[er(284)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function or(n,t){return function(n){if(Array[er(213)](n))return n}(n)||function(n,t){var e=er,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(331)]]||n[e(287)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(214)](n))[e(188)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(214)](r)).done)&&(s[e(201)](o.value),s[e(284)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(241)]&&(c=r[e(241)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=er;if(n){if("string"==typeof n)return rr(n,t);var r=Object[e(337)][e(285)][e(214)](n)[e(231)](8,-1);return r===e(291)&&n[e(317)]&&(r=n[e(317)].name),r===e(179)||r===e(262)?Array[e(238)](n):r===e(192)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(269)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(er(360))}()}function ir(n,t){for(var e=er,r=0;r<t[e(284)];r++){var o=t[r];o[e(293)]=o.enumerable||!1,o[e(246)]=!0,"value"in o&&(o[e(335)]=!0),Object[e(328)](n,Xe(o[e(253)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cr(n,t){var e=er;return(cr=Object[e(216)]?Object[e(216)][e(319)]():function(n,t){return n.__proto__=t,n})(n,t)}function sr(n){var t=er;return(sr=Object[t(216)]?Object[t(221)].bind():function(n){var e=t;return n.__proto__||Object[e(221)](n)})(n)}function ur(){var n=["lights_physical_fragment","csm_main_","csm_Roughness","Arguments",";\n    ","MeshNormalMaterial","message","clearcoatRoughness","#define IS_VERTEX;\n","getOwnPropertySymbols","MeshStandardMaterial","MeshToonMaterial","push","trace","get"," is not available in ","clone","toPrimitive","function *\\( *\\)","lastIndexOf","\n    \n            ","35vuEnQt","getOwnPropertyDescriptor","function","isArray","call","\n    gl_FragColor = ","setPrototypeOf","8FOZwqI","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","uniforms",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","getPrototypeOf","PointsMaterial","\n    vec4 csm_internal_positionUnprojected = ","defineProperties","cacheHash","clearcoatNormal","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\\$&","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n            \n            void main() {\n          ","slice","__proto__","csm_DiffuseColor","\n    \n","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","csm_PositionRaw","RawShaderMaterial","from","update","includes","return","ShaderChunk","material.clearcoatRoughness = ","pointSize","error","configurable","__csm","positionRaw","console","_patchShader","table","customProgramCacheKey","key","fragmentShader","csm_PointSize",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","needsUpdate","log","Super expression must either be null or a function","trim","Set",";\n  ","fragColor","find","emissive","clearcoat","MeshLambertMaterial","test","\n            ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","entries","valueOf","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","onBeforeCompile","\n    vec3 totalEmissiveRadiance = ","Cannot call a class as a function","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","csm_DepthAlpha","\n    #include <dithering_fragment>\n    gl_FragColor  = ","isAlreadyExtended","_getCacheHash","vertexShader","length","toString","create","@@iterator","#define IS_UNKNOWN;\n","object","381766kRnadB","Object","csm_ClearcoatRoughness","enumerable","8348uVhfwu","MeshPhongMaterial","\n    gl_Position = ","type","();\n            // #_CSM_#\n          ",". Shader cannot compile.","399798UCWont"," - (dot(","generateUUID","CustomShaderMaterial does not support RawShaderMaterial","instanceID","substring","toUpperCase","MeshPhysicalMaterial","indexOf","undefined","MeshBasicMaterial","csm_Clearcoat","init","split","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","csm_Metalness","\n    varying mat4 csm_internal_vModelViewMatrix;\n","constructor","silent","bind","\n    vec3 objectNormal = ","diffuse","normal","csm_Emissive","\n    #include <color_fragment>\n    diffuseColor = ","_getMaterialDefine","void main() {","void main()","defineProperty","bump","csm_Position","iterator","replace","forEach","Derived constructors may only return object or undefined","writable","construct","prototype","roughness","chain","MeshDepthMaterial","action","1173516NuaPcG","counter","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","150540VqvIFf","cacheKey","getOwnPropertyDescriptors","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","stateObject","Material","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","symbol","patchMap","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","filter","baseMaterial","set","keys","debu","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","position",'". Shader cannot compile.',"string","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ",'" is required to use output "',"// #_CSM_#","apply","info","assign","gger","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","material.clearcoat = ","concat","Map","depthAlpha","_generateMaterial","join","_getPatchMapForMaterial","140598vFFUCt"," );\n    ","629349KzmuBR","ShadowMaterial","next"];return(ur=function(){return n})()}function lr(n){var t=function(){var n=er;if(typeof Reflect===n(309)||!Reflect[n(336)])return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy===n(212))return!0;try{return Boolean[n(337)][n(273)][n(214)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=er,o=sr(n);if(t){var i=sr(this)[r(317)];e=Reflect[r(336)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=er;if(t&&(typeof t===e(289)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(334));return ar(n)}(this,e)}}Ke(void 0,(function(){for(var n=er,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(249)]||{},r=[n(259),"warn",n(172),n(245),"exception",n(251),n(202)],o=0;o<r[n(284)];o++){var i=Ke[n(317)][n(337)][n(319)](Ke),a=r[o],c=e[a]||i;i[n(232)]=Ke.bind(Ke),i[n(285)]=c[n(285)][n(319)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:Ve(233),normal:"csm_Normal",roughness:Ve(191),metalness:Ve(315),emissive:Ve(323),ao:"csm_AO",bump:"csm_Bump",clearcoat:Ve(311),clearcoatRoughness:Ve(292),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ve(255),fragColor:"csm_FragColor",depthAlpha:Ve(279),position:Ve(330),positionRaw:Ve(236)},vr=(Qe(fr={},""[Ve(178)](hr.position),"*"),Qe(fr,""[Ve(178)](hr[Ve(248)]),"*"),Qe(fr,"".concat(hr[Ve(322)]),"*"),Qe(fr,""[Ve(178)](hr[Ve(244)]),[Ve(222)]),Qe(fr,""[Ve(178)](hr[Ve(321)]),"*"),Qe(fr,""[Ve(178)](hr[Ve(264)]),"*"),Qe(fr,""[Ve(178)](hr[Ve(266)]),[Ve(199),"MeshPhysicalMaterial"]),Qe(fr,""[Ve(178)](hr[Ve(338)]),["MeshStandardMaterial",Ve(307)]),Qe(fr,""[Ve(178)](hr.metalness),[Ve(199),Ve(307)]),Qe(fr,""[Ve(178)](hr.ao),[Ve(199),Ve(307),Ve(310),"MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),Qe(fr,""[Ve(178)](hr.bump),[Ve(268),"MeshMatcapMaterial",Ve(194),Ve(295),Ve(307),"MeshStandardMaterial",Ve(200),Ve(187)]),Qe(fr,""[Ve(178)](hr[Ve(180)]),[Ve(340)]),Qe(fr,""[Ve(178)](hr[Ve(267)]),[Ve(307)]),Qe(fr,"".concat(hr[Ve(196)]),[Ve(307)]),Qe(fr,""[Ve(178)](hr[Ve(226)]),[Ve(307)]),fr),mr={"#include <lights_physical_fragment>":b[Ve(242)][Ve(189)]},gr=(Qe(pr={},""[Ve(178)](hr[Ve(322)]),{"#include <beginnormal_vertex>":Ve(320).concat(hr[Ve(322)],Ve(256))}),Qe(pr,""[Ve(178)](hr.position),{"#include <begin_vertex>":"\n    vec3 transformed = ".concat(hr.position,Ve(263))}),Qe(pr,"".concat(hr[Ve(248)]),{"#include <begin_vertex>":Ve(223)[Ve(178)](hr[Ve(248)],Ve(257))}),Qe(pr,""[Ve(178)](hr[Ve(244)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Ve(178)](hr.pointSize,Ve(193))}),Qe(pr,""[Ve(178)](hr[Ve(321)]),{"#include <color_fragment>":Ve(324).concat(hr[Ve(321)],Ve(263))}),Qe(pr,"".concat(hr[Ve(264)]),{"#include <dithering_fragment>":Ve(280).concat(hr[Ve(264)],";\n  ")}),Qe(pr,""[Ve(178)](hr[Ve(266)]),{"vec3 totalEmissiveRadiance = emissive;":Ve(276)[Ve(178)](hr.emissive,Ve(193))}),Qe(pr,""[Ve(178)](hr[Ve(338)]),{"#include <roughnessmap_fragment>":Ve(364).concat(hr[Ve(338)],";\n    ")}),Qe(pr,"".concat(hr.metalness),{"#include <metalnessmap_fragment>":Ve(314)[Ve(178)](hr.metalness,Ve(193))}),Qe(pr,""[Ve(178)](hr.ao),{"#include <aomap_fragment>":Ve(175)[Ve(178)](hr.ao,Ve(193))}),Qe(pr,""[Ve(178)](hr[Ve(329)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ve(178)](hr[Ve(329)],Ve(301)).concat(hr[Ve(329)],Ve(220))}),Qe(pr,""[Ve(178)](hr[Ve(180)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ve(278).concat(hr.depthAlpha,Ve(185)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ve(344)[Ve(178)](hr[Ve(180)],Ve(193))}),Qe(pr,""[Ve(178)](hr[Ve(267)]),{"material.clearcoat = clearcoat;":Ve(177)[Ve(178)](hr[Ve(267)],";")}),Qe(pr,""[Ve(178)](hr[Ve(196)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ve(243)[Ve(178)](hr[Ve(196)],";")}),Qe(pr,""[Ve(178)](hr[Ve(226)]),{"#include <clearcoat_normal_fragment_begin>":Ve(227)}),pr),_r=(Qe(dr={},""[Ve(178)](hr[Ve(361)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ve(274).concat(hr.position,", 1.0 );\n  ")}),Qe(dr,""[Ve(178)](hr[Ve(248)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ve(296)[Ve(178)](hr[Ve(361)],Ve(263))}),Qe(dr,""[Ve(178)](hr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ve(215)[Ve(178)](hr[Ve(321)],";\n  ")}),Qe(dr,""[Ve(178)](hr[Ve(264)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ve(215).concat(hr.fragColor,Ve(263))}),dr),yr={clearcoat:[hr[Ve(267)],hr[Ve(226)],hr[Ve(196)]]},xr=Ve(354),Ir=Ve(235),br=Ve(316),Sr=Ve(316),wr=Ve(234),Mr=[Ve(356),"fragmentShader","vertexShader",Ve(219),Ve(353),Ve(346),Ve(318)],Er=function(n,t,e){var r=Ve;return n[r(313)](t)[r(182)](e)},Rr=function(n,t){var e,r,o=Ve;return new RegExp("\\b"[o(178)]((e=t,r=Ve,e[r(332)](/[-\/\\^$*+?.()|[\]{}]/g,r(228))),"\\b"))[o(269)](n)};function Ar(n){return n?n[Ve(332)](/\s/g,""):void 0}function Tr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Ve;!function(n,t){var e=er;if(typeof t!==e(212)&&null!==t)throw new TypeError(e(260));n[e(337)]=Object[e(286)](t&&t[e(337)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(328)](n,"prototype",{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=er,u=n[s(356)],l=n[s(254)],f=n.vertexShader,p=n[s(219)],d=n[s(353)],h=n[s(346)],v=n[s(318)],m=tr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(er(277))}(this,c),!function(n){var t=Ve;try{new n}catch(e){if(e[t(195)][t(308)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(173)](e,m)):e=new u(m),e[s(297)]===s(237))throw new Error(s(303));(function(n,t){var e=Ve;e(284),Object[e(173)](n,t);var r=Object[e(221)](t);Object.entries(Object.getOwnPropertyDescriptors(r))[e(355)]((function(n){var t=e,r=typeof n[1][t(203)]===t(212),o=typeof n[1][t(357)]===t(212),i="function"==typeof n[1].value,a=n[0]===t(317);return(r||o||i)&&!a}))[e(333)]((function(t){var r=e;typeof n[t[0]]!==r(212)&&Object.defineProperty(n,t[0],t[1])}))})(ar(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:k[s(302)](),type:e.type,isAlreadyExtended:(r=e[s(275)],o=Ve,i=r.toString()[o(261)](),!(0===i.substring(i[o(308)]("{")+1,i[o(208)]("}"))[o(261)]()[o(284)])),cacheHash:"",silent:v},t[s(219)]=nr(nr({},t[s(219)]||{}),p||{});var g=t[s(247)],_=g[s(254)],y=g[s(283)],x=t[s(219)];return t[s(247)][s(225)]=t[s(282)](),t[s(181)](_,y,x),t}return e=c,r=[{key:t(239),value:function(){var n=t,e=arguments[n(284)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(219)]=e.uniforms||this.uniforms,Object[n(173)](this.__csm,e);var r=this.__csm,o=r.fragmentShader,i=r[n(283)],a=this[n(219)],c=this[n(282)]();this[n(247)].cacheHash=c,this[n(181)](o,i,a)}},{key:t(205),value:function(){var n=t,e={baseMaterial:this[n(247)][n(356)],fragmentShader:this[n(247)][n(254)],vertexShader:this[n(247)].vertexShader,uniforms:this.uniforms,silent:this[n(247)][n(318)],patchMap:this.__csm[n(353)],cacheKey:this.__csm[n(346)]},r=new this.constructor(e);return Object.assign(this,r),r}},{key:t(282),value:function(){var n=t,e=this.__csm,r=e[n(254)],o=e[n(283)],i=this[n(219)],a=[Ar(r),Ar(o),i].filter((function(n){return void 0!==n}));return a[n(284)]>0?gn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(181),value:function(n,e,r){var o=t,i=this;this[o(219)]=r||{},this[o(252)]=function(){var n=o;return i[n(247)][n(225)]};var a=function(t){var r=o;try{var a=i[r(325)]();if(n){var c=i[r(250)](Tr(n),t[r(254)],!0);t[r(254)]=a+c}if(e){var s=i[r(250)](Tr(e),t[r(283)]);t[r(283)]=r(197)+s,t[r(283)]=a+t.vertexShader}t[r(219)]=nr(nr({},t[r(219)]),i[r(219)]),i[r(219)]=t[r(219)]}catch(u){console[r(245)](u)}};if(this.__csm[o(281)]){var c=this.onBeforeCompile;this[o(275)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(258)]=!0}},{key:t(250),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(183)]()),this.__csm[o(353)]);Object[o(272)](yr)[o(333)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(265)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(178)](a,e(169)).concat(c,e(362)))})),Object[o(272)](mr)[o(333)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object.keys(c)[o(333)]((function(t){var e=o;Object[e(358)](c[t])[e(333)]((function(r){var o=e,s=vr[t],u=i[o(247)][o(297)];if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s[o(240)](u)||"*"===s))throw new Error("CSM: "[o(178)](t,o(204))[o(178)](u,o(299)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(190)+this.__csm[o(304)][o(332)](/-/g,"_"),h=n[o(332)](/void\s+main\s*\(\s*\)/g,"void "[o(178)](d,"()")),v=n[o(240)](o(327)),m=a[o(240)]("// #_CSM_#");return v&&(m&&this[o(247)].isAlreadyExtended?(a=a[o(332)]("void main() {",o(270)[o(178)](h,o(230))),s=a,u=o(170),l=o(270)[o(178)](d,o(298)),p=s[(f=Ve)(208)](u),a=-1===p?s:s.substring(0,p)+l+s[f(305)](p+u.length)):a=a[o(332)](o(326),o(351)[o(178)](r?Sr:br,o(176))[o(178)](xr,o(209))[o(178)](h,o(271)).concat(Ir,o(218))[o(178)](r?wr:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(348))[o(178)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(325),value:function(){var n=t,e=this.__csm.type;return e?"#define IS_"[n(178)](e[n(306)](),";\n"):n(288)}},{key:t(183),value:function(){var n=t;return"ShaderMaterial"===this.__csm[n(297)]?_r:gr}}],i=er,r&&ir(e[i(337)],r),o&&ir(e,o),Object[i(328)](e,"prototype",{writable:!1}),c}(b[Ve(350)]);function Pr(n){function t(n){var e=er;if(typeof n===e(363))return function(n){}.constructor("while (true) {}")[e(171)](e(343));1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}[e(317)](e(359)+e(174))[e(214)](e(341)):function(){return!1}[e(317)]("debugger")[e(171)](e(349)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Fr;function Cr(){const n=["clearcoatRoughness","log","#ff00fc","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","debu","33VypgLi","console","function *\\( *\\)","stateObject","call","error","\n      ","test","prototype","apply","4793736PZdwEw","__proto__","MeshPhysicalMaterial","44949COFnaT","exception","104ttMzRg","info","2706588idZNhS","clearcoat","primitive","while (true) {}","constructor","roughness","string","2001147pyuYKl","counter","index","metalness","34lEovWY","length","init",'{}.constructor("return this")( )',"color","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","5tIiSjZ","gger","6612312JGmAzS","return (function() ","\n\t\t\t","bind","185769vUCiRr","action","chain","2467470gDZqop","trace","toString"];return(Cr=function(){return n})()}!function(n,t){const e=Fr,r=Cr();for(;;)try{if(714210===-parseInt(e(167))/1*(parseInt(e(182))/2)+parseInt(e(178))/3+parseInt(e(164))/4*(parseInt(e(137))/5)+-parseInt(e(171))/6+-parseInt(e(139))/7+-parseInt(e(169))/8*(-parseInt(e(143))/9)+parseInt(e(146))/10*(parseInt(e(154))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(163)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fr(n,t){const e=Cr();return Fr=function(n,t){return e[n-=134]},Fr(n,t)}!function(){Or(this,(function(){const n=Fr,t=new RegExp(n(156)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ur(n(184));t[n(161)](r+n(145))&&e[n(161)](r+"input")?Ur():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(163)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=Fr;let t;try{t=Function(n(140)+n(134)+");")()}catch(o){t=window}const e=t[n(155)]=t[n(155)]||{},r=[n(150),"warn",n(170),n(159),n(168),"table",n(147)];for(let i=0;i<r[n(183)];i++){const t=kr[n(175)][n(162)][n(142)](kr),o=r[i],a=e[o]||t;t[n(165)]=kr[n(142)](kr),t[n(148)]=a[n(148)].bind(a),e[o]=t}}))();const Br=["object"],jr=V({__name:zr(180),props:{color:{default:zr(151)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:b[t(166)],metalness:e.metalness,roughness:e[t(176)],clearcoat:e[t(172)],clearcoatRoughness:e[t(149)],color:e[t(135)],vertexShader:t(152),fragmentShader:t(141)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(160)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(136)},o=new Dr(r);return tn((()=>{const n=t;o.color.setStyle(e[n(135)]),o[n(181)]=e[n(181)],o[n(176)]=e.roughness,o[n(172)]=e.clearcoat,o[n(149)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return K(),X(r(173),{object:W(o)},null,8,Br)}}});function Ur(n){function t(n){const e=Fr;if(typeof n===e(177))return function(n){}[e(175)](e(174))[e(163)](e(179));1!==(""+n/n)[e(183)]||n%20==0?function(){return!0}[e(175)](e(153)+e(138))[e(158)](e(144)):function(){return!1}.constructor(e(153)+e(138))[e(163)](e(157)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Wr,r=Gr();;)try{if(828597===parseInt(e(162))/1+-parseInt(e(151))/2+parseInt(e(167))/3+parseInt(e(150))/4+parseInt(e(157))/5*(-parseInt(e(155))/6)+parseInt(e(156))/7*(parseInt(e(160))/8)+parseInt(e(142))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr,Lr=(Nr=!0,function(n,t){var e=Nr?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return Nr=!1,e});!function(){Lr(this,(function(){var n=Wr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(148),"i"),r=Vr(n(164));t[n(139)](r+"chain")&&e.test(r+"input")?Vr():r("0")}))()}();var Hr,Zr=(Hr=!0,function(n,t){var e=Hr?function(){if(t){var e=t[Wr(165)](n,arguments);return t=null,e}}:function(){};return Hr=!1,e});function Gr(){var n=["5667084TkYlxt","2868166gbYpeF","action","trace","bind","9254442LUUuuv","258671xlRfUK","5oeFIiW","error","table","136xEsjbR","console","728457oSyeLt","debu","init","apply","gger","2161581efEicQ","while (true) {}","counter","test","info","constructor","2800179VtZvzy","length","prototype","toString","call","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )'];return(Gr=function(){return n})()}function Wr(n,t){var e=Gr();return Wr=function(n,t){return e[n-=139]},Wr(n,t)}function Vr(n){function t(n){var e=Wr;if("string"==typeof n)return function(n){}[e(141)](e(168))[e(165)](e(169));1!==(""+n/n)[e(143)]||n%20==0?function(){return!0}[e(141)](e(163)+"gger")[e(146)](e(152)):function(){return!1}[e(141)](e(163)+e(166))[e(165)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){for(var n=Wr,t=function(){var n,t=Wr;try{n=Function(t(147)+t(149)+");")()}catch(e){n=window}return n}(),e=t[n(161)]=t.console||{},r=["log","warn",n(140),n(158),"exception",n(159),n(153)],o=0;o<r[n(143)];o++){var i=Zr[n(141)][n(144)].bind(Zr),a=r[o],c=e[a]||i;i.__proto__=Zr[n(154)](Zr),i[n(145)]=c.toString[n(154)](c),e[a]=i}}))();export{Ge as C,jr as _,qn as a,ot as b,_t as c,Mt as d,Ot as e,qt as f,je as g,Me as h,ut as u};

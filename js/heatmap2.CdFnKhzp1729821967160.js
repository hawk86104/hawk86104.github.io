import{P as t}from"./tweakpane.yHWGBmom1729821967160.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.pvEe3GsE1729821967160.js";import{_ as r}from"./heatmap.js-fix.v4cGkm311729821967160.js";import{h as i,_ as s,cr as c,s as u}from"./three.x4oqFJNT1729821967160.js";import{r as a}from"./utils.b0GjRRPt1729821967160.js";import{d as p}from"./pinia.hn32Nk6P1729821967160.js";import{b as f,d as l,a3 as h,o as d,E as m,L as g,u as y,F as v,q as b,V as w,O as I,Q as _,I as j,M as x,a4 as M,r as E,j as O,g as R,m as S}from"./@vue.JNsx1iN61729821967160.js";import{c as z,d as D,a as A}from"./three-mesh-bvh.llAbMY1c1729821967160.js";import{_ as B}from"./@fesjs.RBYJGevJ1729821967160.js";import"./@tresjs.QjD7q5YC1729821967160.js";import"./@vueuse.HMG_JnUD1729821967160.js";import"./three-custom-shader-material.WGQvdF_T1729821967160.js";import"./object-hash.nNsVfdic1729821967160.js";import"./@amap.Y4sQVtej1729821967160.js";import"./jszip.tCm-hQZR1729821967160.js";import"./glsl-tokenizer.kwkA-85M1729821967160.js";import"./glsl-token-string.piZje__F1729821967160.js";import"./glsl-token-functions.eRxQXCQh1729821967160.js";import"./vue-router.x5Kg4cip1729821967160.js";import"./lodash-es.kYt-_xTG1729821967160.js";import"./@qlin.yHhFDldE1729821967160.js";import"./@floating-ui.BPbuo5Gx1729821967160.js";import"./@juggle.7yjBMqoW1729821967160.js";!function(t,n){const e=Z,o=F();for(;;)try{if(615740===parseInt(e(386))/1*(-parseInt(e(375))/2)+-parseInt(e(376))/3*(-parseInt(e(401))/4)+-parseInt(e(374))/5+-parseInt(e(395))/6+parseInt(e(394))/7*(-parseInt(e(411))/8)+-parseInt(e(413))/9*(-parseInt(e(383))/10)+-parseInt(e(372))/11*(-parseInt(e(371))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(396)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=Z,n=new RegExp(t(370)),e=new RegExp(t(391),"i"),o=K(t(397));n.test(o+t(389))&&e[t(378)](o+t(400))?K():o("0")}))()}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(396)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function F(){const t=["style","rgb(0,255,0)","chain","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rgb(255,0,0)","display","6475PKqbbI","2880618SBgPMA","apply","init","push","call","input","25508MbMiUv","none","string","create","constructor","return (function() ","height","bind","appendChild","__proto__","8912DoEBtV","randInt","189seSftD","body","top","length","trace","setData","while (true) {}","heatmap-canvas","width","table","action","_config","debu","function *\\( *\\)","168qPKOcj","2266737lFJpcO","getValueAt","3653885lenHmE","799464xvZCHa","3NPztvA","stateObject","test","left","gger","toString","position","364390sPwwsb","yellow",'{}.constructor("return this")( )',"2LRTLAG"];return(F=function(){return t})()}k(void 0,(function(){const t=Z,n=function(){const t=Z;let n;try{n=Function(t(406)+t(385)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=["log","warn","info","error","exception",t(366),t(361)];for(let r=0;r<o[t(416)];r++){const n=k[t(405)][t(390)][t(408)](k),i=o[r],s=e[i]||n;n[t(410)]=k[t(408)](k),n.toString=s[t(381)][t(408)](s),e[i]=n}}))();const L=(t,n)=>t[Z(373)](n)+-10;function Z(t,n){const e=F();return(Z=function(t,n){return e[t-=361]})(t,n)}function K(t){function n(t){const e=Z;if(typeof t===e(403))return function(t){}[e(405)](e(363))[e(396)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(369)+e(380))[e(399)](e(367)):function(){return!1}[e(405)](e(369)+e(380)).apply(e(377)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const T=$;function $(t,n){const e=G();return($=function(t,n){return e[t-=247]})(t,n)}function G(){const t=["input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6350xrQDjr","string",'{}.constructor("return this")( )',"gger","161264KpMDzy","length","trace","stateObject","184971hQeAjE","8948610kkQzUF","constructor","__proto__","while (true) {}","75612PCqLpu","prototype","value","19098134ZWLAOM","chain","37nlKCdR","log","console","1547316GhaywH","test","action","buildingsHeatmap","error","debu","return (function() ","function *\\( *\\)","77hilGVs","toString","table","apply","28cXyKOw","info","948orjoAC","exception","bind"];return(G=function(){return t})()}!function(t,n){const e=$,o=G();for(;;)try{if(796086===-parseInt(e(265))/1*(-parseInt(e(260))/2)+-parseInt(e(255))/3*(-parseInt(e(280))/4)+-parseInt(e(247))/5*(-parseInt(e(282))/6)+parseInt(e(276))/7*(-parseInt(e(251))/8)+-parseInt(e(268))/9+parseInt(e(256))/10+-parseInt(e(263))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(279)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Q(this,(function(){const t=$,n=new RegExp(t(275)),e=new RegExp(t(286),"i"),o=q("init");n[t(269)](o+t(264))&&e[t(269)](o+t(285))?q():o("0")}))()}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(279)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();U(void 0,(function(){const t=$;let n;try{n=Function(t(274)+t(249)+");")()}catch(r){n=window}const e=n[t(267)]=n[t(267)]||{},o=[t(266),"warn",t(281),t(272),t(283),t(278),t(253)];for(let i=0;i<o[t(252)];i++){const n=U[t(257)][t(261)].bind(U),r=o[i],s=e[r]||n;n[t(258)]=U.bind(U),n[t(277)]=s[t(277)][t(284)](s),e[r]=n}}))();const C=p(T(271),(()=>{const t=f(!1),n=f(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[$(262)]=n},setTemperature:function(t){n[$(262)]=t}}}));function q(t){function n(t){const e=$;if(typeof t===e(248))return function(t){}[e(257)](e(259))[e(279)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(257)]("debu"+e(250)).call(e(270)):function(){return!1}[e(257)](e(273)+e(250))[e(279)](e(254)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const H=J;!function(t,n){const e=J,o=X();for(;;)try{if(333862===parseInt(e(518))/1+-parseInt(e(478))/2*(-parseInt(e(523))/3)+-parseInt(e(504))/4+-parseInt(e(499))/5*(parseInt(e(511))/6)+-parseInt(e(516))/7*(parseInt(e(524))/8)+parseInt(e(469))/9*(parseInt(e(509))/10)+-parseInt(e(534))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(497)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=J,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=nt(t(495));n[t(493)](o+t(525))&&e[t(493)](o+t(527))?nt():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(497)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function X(){const t=["3563VBDTKB","string","470366DGlQSB","counter","raycast","_config","children","6HhRQbz","6424mgjNvG","chain","error","input","toString","object","model","city","primitive","prototype","2302520LzJlsx","computeBoundsTree","102393huOGTE","length","$patch","ShaderMaterial","value",'{}.constructor("return this")( )',"数值———：","mergeGeometries","Matrix4","176348kFmNFd","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","uOpacity","applyMatrix4","action","gger","数值：","needsUpdate","geometry","BufferGeometry","console","clone","debu","warn","opacity","test","Mesh","init","attributes","apply","log","85BcKbNh","table","stateObject","Texture","matrix","990012keBRcQ","exception","constructor","makeRotationX","bind","580dKlteB","disposeBoundsTree","37824IvRtiK","trace","canvas","rotation-x","DoubleSide"];return(X=function(){return t})()}function J(t,n){const e=X();return(J=function(t,n){return e[t-=469]})(t,n)}V(void 0,(function(){const t=J;let n;try{n=Function("return (function() "+t(474)+");")()}catch(r){n=window}const e=n[t(488)]=n[t(488)]||{},o=[t(498),t(491),"info",t(526),t(505),t(500),t(512)];for(let i=0;i<o[t(470)];i++){const n=V[t(506)].prototype[t(508)](V),r=o[i],s=e[r]||n;n.__proto__=V[t(508)](V),n[t(528)]=s[t(528)][t(508)](s),e[r]=n}}))();const W=[H(529),H(514)],Y=[H(529)],tt=l({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=H;(()=>{const t=J;s[t(487)].prototype.computeBoundsTree=z,s[t(487)][t(533)][t(510)]=D,u[t(533)][t(520)]=A})();const e=t,o=((t=250,n=250,e=!0)=>{const o=Z,i=document.createElement(o(364));return i[o(387)][o(382)]="absolute",!e&&(i.style[o(393)]=o(402)),i[o(387)][o(415)]="0",i.style[o(379)]="0",document[o(414)][o(409)](i),r[o(404)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:"rgb(0,0,255)",.55:o(388),.85:o(384),1:o(392)}})})();((t,n)=>{const e=Z;if(!n){let o=0;for(n=[];o<1e3;)n[e(398)]({x:i[e(412)](1,t[e(368)][e(365)]),y:i[e(412)](1,t._config[e(407)]),value:i[e(412)](-10,36)}),o++}t[e(362)]({max:36,min:-10,data:n})})(o);const p=new(s[n(502)])(o._renderer[n(513)]);p[n(485)]=!0;const f=e[n(530)][n(531)][n(489)]();delete f.geometry[n(496)].normal,delete f[n(486)][n(496)].uv;const l=f[n(486)].clone()[n(481)](f.matrix),b=e.model.land.clone();delete b[n(486)][n(496)].normal;const w=b[n(486)][n(489)]().applyMatrix4(b[n(503)]),I=c[n(476)]([l,w]);I.applyMatrix4((new(s[n(477)]))[n(507)](Math.PI/2)),a(I),I[n(535)]();const _=(t=>{const o=n;return new(s[o(472)])({vertexShader:o(479),fragmentShader:"\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t",uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:s[o(515)]})})(p),j=new(s[n(494)])(I,_);h((()=>{const t=n;e.opacity&&(_.uniforms[t(480)][t(473)]=e[t(492)])}));const x=C(),M=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(521)].width,y:(1-t.uv.y)*o[e(521)].height};console[e(498)](e(484),t),console[e(498)](e(475),L(o,n)),x.setTemperature(L(o,n))}},E=t=>{t&&x[n(471)]({showDiv:!0})},O=t=>{t&&x.setShowDiv(!1)};return(t,o)=>{const r=n;return d(),m(v,null,[g("primitive",{object:y(j),"rotation-x":-Math.PI/2,onPointerMove:M,onPointerEnter:E,onPointerLeave:O},null,40,W),g(r(532),{object:e[r(530)][r(530)][r(522)][0][r(489)]()},null,8,Y)],64)}}});function nt(t){function n(t){const e=J;if(typeof t===e(517))return function(t){}[e(506)]("while (true) {}")[e(497)](e(519));1!==(""+t/t)[e(470)]||t%20==0?function(){return!0}[e(506)]("debu"+e(483)).call(e(482)):function(){return!1}.constructor(e(490)+e(483))[e(497)](e(501)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const et=B({__name:"dataDiv",setup(t){const n=C(),e=f({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return b((()=>{window.addEventListener("mousemove",o)})),w((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>I((d(),m("div",{class:"title",style:x(e.value)},"温度："+j(y(n).temperature)+"℃ ",5)),[[_,y(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),ot=ct;!function(t,n){const e=ct,o=it();for(;;)try{if(650101===parseInt(e(270))/1+-parseInt(e(263))/2*(parseInt(e(285))/3)+-parseInt(e(288))/4+-parseInt(e(282))/5+parseInt(e(268))/6+-parseInt(e(255))/7+parseInt(e(264))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(271)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function it(){const t=["21895976WMniNM","toString","value","warn","6756936vshwIf","counter","269438eOLCLi","apply","action","#000","builds","return (function() ","model","透明度","exception","table",'{}.constructor("return this")( )',"opacity","6131690NgpXJq","prototype","input","3FOYRuz","gger","debu","3463232gfyIFP","init","stateObject","call","trace","4652466KobyQa","log","while (true) {}","constructor","heatmap2","__proto__","info","console","1451412GOXSnj"];return(it=function(){return t})()}!function(){rt(this,(function(){const t=ct,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=at(t(289));n.test(o+"chain")&&e.test(o+t(284))?at():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=it();return(ct=function(t,n){return e[t-=253]})(t,n)}st(void 0,(function(){const t=ct;let n;try{n=Function(t(275)+t(280)+");")()}catch(r){n=window}const e=n[t(262)]=n[t(262)]||{},o=[t(256),t(267),t(261),"error",t(278),t(279),t(254)];for(let i=0;i<o.length;i++){const n=st[t(258)][t(283)].bind(st),r=o[i],s=e[r]||n;n[t(260)]=st.bind(st),n[t(265)]=s[t(265)].bind(s),e[r]=n}}))();const ut=l({__name:ot(259),async setup(r){const i=ot;let s,c;const u=f(!1),a=([s,c]=M((()=>o())),s=await s,c(),s);u[i(266)]=!0;const p=E({width:1,color:i(273),opacity:1,show:!0}),l=E({opacity:.9});return new t({title:"参数",expanded:!0}).addBinding(l,i(281),{label:i(277),min:0,max:1,step:.1}),(t,o)=>{const r=i;return d(),m(v,null,[O(e,{showBuildings:!1,autoRotate:!1},{ability:R((()=>[O(tt,S({model:y(a)},l),null,16,[r(276)]),O(n,S(p,{builds:y(a).city}),null,16,[r(274)])])),_:1}),O(et)],64)}}});function at(t){function n(t){const e=ct;if("string"==typeof t)return function(t){}.constructor(e(257))[e(271)](e(269));1!==(""+t/t).length||t%20==0?function(){return!0}[e(258)](e(287)+e(286))[e(253)](e(272)):function(){return!1}[e(258)](e(287)+e(286))[e(271)](e(290)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ut as default};

import{a5 as t,ab as n}from"./three.HEgnMaTu1721048663624.js";import{T as e,r,d as o,P as i}from"./@tresjs.Xiq_TH801721048663624.js";import{a,b as s}from"./index.3f2gHe7y1721048663624.js";import{d as c,b as u,w as f,o as l,D as p,j as h,u as v,J as d,r as g,f as m,g as x,aj as b,ak as y,al as w,m as I}from"./@vue.ApkyOKE71721048663624.js";import"./@vueuse.2IVIyoVR1721048663624.js";import"./tweakpane.yHWGBmom1721048663624.js";import"./three-stdlib.Bcxn6yVp1721048663624.js";import"./@pmndrs.jxJ3fman1721048663624.js";import"./object-hash.E5Z0NA4F1721048663624.js";import"./@amap.IXBtourJ1721048663624.js";import"./jszip.PK6xEuxJ1721048663624.js";var M=_;function _(t,n){var e=P();return(_=function(t,n){return e[t-=411]})(t,n)}!function(t,n){for(var e=_,r=P();;)try{if(524408===-parseInt(e(446))/1+parseInt(e(425))/2+-parseInt(e(430))/3+parseInt(e(450))/4*(parseInt(e(418))/5)+parseInt(e(432))/6+-parseInt(e(416))/7+parseInt(e(428))/8*(parseInt(e(442))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var j=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e[_(433)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){j(this,(function(){var t=_,n=new RegExp(t(413)),e=new RegExp(t(448),"i"),r=T(t(447));n[t(429)](r+t(422))&&e[t(429)](r+t(437))?T():r("0")}))()}();var z=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e[_(433)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function P(){var t=["exception","constructor","586188iLWkUo","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","4WBQETt","log","trace","function *\\( *\\)","debu","error","3613414gAAfue","__proto__","402265xURAik","console",'{}.constructor("return this")( )',"prototype","chain","return (function() ","length","827582rBzBrz","call","action","546152tSDfuE","test","1583220vLGKox","\n// Precision-adjusted variations of https://www.shadertoy.com/view/4djSRW\nfloat hash(float p) { p = fract(p * 0.011); p *= p + 7.5; p *= p + p; return fract(p); }\nfloat hash(vec2 p) { vec3 p3 = fract(vec3(p.xyx) * 0.13); p3 += dot(p3, p3.yzx + 3.333); return fract((p3.x + p3.y) * p3.z); }\n\nfloat noise(vec3 x) {\n    const vec3 step = vec3(110, 241, 171);\n\n    vec3 i = floor(x);\n    vec3 f = fract(x);\n\n    // For performance, compute the base input to a 1D hash from the integer part of the argument and the\n    // incremental change to the 1D based on the 3D -> 1D wrapping\n    float n = dot(i, step);\n\n    vec3 u = f * f * (3.0 - 2.0 * f);\n    return mix(mix(mix(hash(n + dot(step, vec3(0, 0, 0))), hash(n + dot(step, vec3(1, 0, 0))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 0))), hash(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n               mix(mix(hash(n + dot(step, vec3(0, 0, 1))), hash(n + dot(step, vec3(1, 0, 1))), u.x),\n                   mix(hash(n + dot(step, vec3(0, 1, 1))), hash(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n}\n","2179098CkxuMX","apply","stateObject","toString","string","input","table","while (true) {}","bind","counter","171kAdWFE","warn"];return(P=function(){return t})()}z(void 0,(function(){var t,n=_;try{t=Function(n(423)+n(420)+");")()}catch(c){t=window}for(var e=t[n(419)]=t[n(419)]||{},r=[n(411),n(443),"info",n(415),n(444),n(438),n(412)],o=0;o<r[n(424)];o++){var i=z[n(445)][n(421)][n(440)](z),a=r[o],s=e[a]||i;i[n(417)]=z[n(440)](z),i[n(435)]=s[n(435)].bind(s),e[a]=i}}))();const S=M(431);function T(t){function n(t){var e=_;if(typeof t===e(436))return function(t){}.constructor(e(439)).apply(e(441));1!==(""+t/t)[e(424)]||t%20==0?function(){return!0}[e(445)](e(414)+e(449))[e(426)](e(427)):function(){return!1}[e(445)](e(414)+"gger")[e(433)](e(434)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const k=A;function A(t,n){const e=C();return(A=function(t,n){return e[t-=415]})(t,n)}!function(t,n){const e=A,r=C();for(;;)try{if(406132===-parseInt(e(455))/1*(-parseInt(e(452))/2)+parseInt(e(434))/3+parseInt(e(449))/4+-parseInt(e(467))/5+-parseInt(e(431))/6+-parseInt(e(438))/7+-parseInt(e(448))/8*(-parseInt(e(457))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const D=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[A(423)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=A,n=new RegExp(t(420)),e=new RegExp(t(450),"i"),r=L(t(459));n[t(418)](r+t(424))&&e[t(418)](r+t(433))?L():r("0")}))()}();const R=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[A(423)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();R(void 0,(function(){const t=A;let n;try{n=Function("return (function() "+t(421)+");")()}catch(o){n=window}const e=n.console=n[t(427)]||{},r=["log",t(425),t(443),t(460),t(468),"table",t(447)];for(let i=0;i<r[t(458)];i++){const n=R.constructor[t(446)].bind(R),o=r[i],a=e[o]||n;n[t(451)]=R.bind(R),n[t(432)]=a.toString[t(419)](a),e[o]=n}}))();const N=d(k(429),{args:[1,64,64]},null,-1);function C(){const t=["2878565kdHmCo","exception","multiplyScalar","instancedMeshCom","matrix","set","while (true) {}","test","bind","function *\\( *\\)",'{}.constructor("return this")( )',"fragment","apply","chain","warn","\n    uniform float uTime;\n\t\tvarying vec3 vPosition;\n\t\t","console","debu","TresSphereGeometry","call","4528362MIPIxz","toString","input","1079076dqmJPu","gger","updateMatrix","position","3152149kTetKz","instanceMatrix","action","uTime","counter","info","Object3D","TresInstancedMesh","prototype","trace","296VdixRl","991836NLmvfa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","14VnQRoM","constructor","setMatrixAt","74903XqxSGk","MeshPhysicalMaterial","256599GFDeAN","length","init","error","random","baseMaterial","needsUpdate","vertex","value","\n\t\tvarying vec3 vPosition;\n\t\t// 函数将 HSL 转换为 RGB\n\t\tvec3 hsl2rgb(float h, float s, float l) {\n\t\t\t\tfloat c = (1.0 - abs(2.0 * l - 1.0)) * s;\n\t\t\t\tfloat x = c * (1.0 - abs(mod(h * 6.0, 2.0) - 1.0));\n\t\t\t\tfloat m = l - c / 2.0;\n\t\t\t\tvec3 rgb;\n\t\t\t\tif (0.0 <= h && h < 1.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, x, 0.0);\n\t\t\t\t} else if (1.0 / 6.0 <= h && h < 2.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, c, 0.0);\n\t\t\t\t} else if (2.0 / 6.0 <= h && h < 3.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, c, x);\n\t\t\t\t} else if (3.0 / 6.0 <= h && h < 4.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(0.0, x, c);\n\t\t\t\t} else if (4.0 / 6.0 <= h && h < 5.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(x, 0.0, c);\n\t\t\t\t} else if (5.0 / 6.0 <= h && h < 6.0 / 6.0) {\n\t\t\t\t\t\trgb = vec3(c, 0.0, x);\n\t\t\t\t} else {\n\t\t\t\t\t\trgb = vec3(0.0, 0.0, 0.0);\n\t\t\t\t}\n\t\t\t\trgb += vec3(m);\n\t\t\t\treturn rgb;\n\t\t}\n    void main() {\n      // csm_DiffuseColor = vec4(1.,1.,1.,1.);\n\t\t\tfloat h = mod(vPosition.x + vPosition.y + vPosition.z, 1.0); // 色相 H: [0, 1)\n\t\t\tfloat s = 0.9; // 饱和度 S: 固定为 0.8\n\t\t\tfloat l = 0.4; // 亮度 L: 固定为 0.5\n\t\t\tvec3 rgb = hsl2rgb(h, s, l);\n\t\t\tcsm_DiffuseColor = vec4(rgb,1.);\n    }\n    "];return(C=function(){return t})()}const E=c({__name:k(470),setup(n){const o=k,i=u(null),a={vertex:o(426)+S+"\n    vec3 displace(vec3 point) {\n      vec3 instancePosition = (instanceMatrix * vec4(point, 1.)).xyz;\n      return instancePosition + (normal * noise((instancePosition * 3.) + uTime) * 0.8);\n    }  \n\n    vec3 orthogonal(vec3 v) {\n      return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n      : vec3(0.0, -v.z, v.y));\n    }\n\n    vec3 recalcNormals(vec3 newPos) {\n      float offset = 0.001;\n      vec3 tangent = orthogonal(normal);\n      vec3 bitangent = normalize(cross(normal, tangent));\n      vec3 neighbour1 = position + tangent * offset;\n      vec3 neighbour2 = position + bitangent * offset;\n\n      vec3 displacedNeighbour1 = displace(neighbour1);\n      vec3 displacedNeighbour2 = displace(neighbour2);\n\n      vec3 displacedTangent = displacedNeighbour1 - newPos;\n      vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n      return normalize(cross(displacedTangent, displacedBitangent));\n    }\n\n    void main() {\n\t\t\tvPosition = position;\n      vec3 p = displace(position);\n      csm_PositionRaw = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(p, 1.);\n      csm_Normal = recalcNormals(p);\n    }\n    ",fragment:o(466)},s={uTime:{value:0}},c=new(t[o(444)]),{onLoop:d}=r();return d((({elapsed:t})=>{const n=o;s[n(441)][n(465)]=t})),f((()=>i[o(465)]),(t=>{const n=o;if(t){let e=0;for(let r=0;r<88;r++)c[n(437)].set(Math[n(461)](),Math[n(461)](),Math[n(461)]()),c.rotation[n(416)](Math[n(461)](),Math.random(),Math[n(461)]()),c[n(437)][n(469)](10),c[n(437)].x-=5,c[n(437)].y-=5,c.position.z-=5,c[n(436)](),t[n(454)](e++,c[n(415)]);t[n(439)][n(463)]=!0}})),(n,r)=>{const c=o;return l(),p(c(445),{ref_key:"tmRef",ref:i,args:[null,null,88]},[N,h(v(e),{baseMaterial:t[c(456)],vertexShader:a[c(464)],fragmentShader:a[c(422)],uniforms:s,transparent:""},null,8,[c(462),"vertexShader","fragmentShader"])],512)}}});function L(t){function n(t){const e=A;if("string"==typeof t)return function(t){}[e(453)](e(417))[e(423)](e(442));1!==(""+t/t)[e(458)]||t%20==0?function(){return!0}[e(453)](e(428)+e(435))[e(430)](e(440)):function(){return!1}[e(453)](e(428)+e(435))[e(423)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const F=J;!function(t,n){const e=J,r=$();for(;;)try{if(834169===parseInt(e(149))/1*(parseInt(e(126))/2)+parseInt(e(129))/3+parseInt(e(127))/4+-parseInt(e(148))/5+-parseInt(e(135))/6*(parseInt(e(140))/7)+parseInt(e(141))/8+-parseInt(e(143))/9*(parseInt(e(132))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function $(){const t=["test","trace","TresPerspectiveCamera","input","TresDirectionalLight","rotation-x","counter","action","104apnIwu","6141492liAJmT","string","4004028ZtHmOi","__proto__","circle","310JfsLlD","TresAmbientLight","length","7086NFXMyW","while (true) {}","gger","error","debu","2387wYgOby","13230744nbFHsT","call","1242549rChenS","constructor","instancedMeshCustomShaderMaterial","table","prototype","411055GhTxPm","20675KXvoJi","toString","console","apply","return (function() ",'{}.constructor("return this")( )',"exception","log","warn","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info"];return($=function(){return t})()}!function(){Z(this,(function(){const t=J,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(116),"i"),r=X("init");n[t(118)](r+"chain")&&e.test(r+t(121))?X():r("0")}))()}();const B=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[J(109)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();B(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function(t(110)+t(111)+");")()}catch(e){n=window}return n}(),e=n[t(108)]=n.console||{},r=[t(113),t(114),t(117),t(138),t(112),t(146),t(119)];for(let o=0;o<r.length;o++){const n=B[t(144)][t(147)][t(115)](B),i=r[o],a=e[i]||n;n[t(130)]=B[t(115)](B),n[t(150)]=a[t(150)][t(115)](a),e[i]=n}}))();const G=d(F(120),{position:[15,15,15],fov:45,near:1,far:1e3},null,-1),O=d(F(133),{intensity:.5},null,-1),H=d(F(122),{position:[7,10,-5.5],intensity:5},null,-1);function J(t,n){const e=$();return(J=function(t,n){return e[t-=108]})(t,n)}const W=c({__name:F(145),setup(t){const e=g({alpha:!0,toneMapping:n,windowSize:!0,clearColor:0}),r=g({enableDamping:!0});return(t,n)=>{const c=J;return l(),m(v(i),I(e,{"window-size":""}),{default:x((()=>[G,h(v(o),b(y(r)),null,16),O,H,(l(),m(w,null,{default:x((()=>[h(v(a),{intensity:16,resolution:256,background:"",blur:.6},{default:x((()=>[h(v(s),{intensity:2,form:c(131),"rotation-x":Math.PI/2,position:[2,4,0],scale:[1,5,0]},null,8,["rotation-x"]),h(v(s),{intensity:2,form:c(131),"rotation-x":Math.PI/2,position:[-6,4,0],scale:[1,5,0]},null,8,[c(123)]),h(v(s),{intensity:1,"rotation-y":-Math.PI/2,position:[-1,0,0],scale:[10,.2,1]},null,8,["rotation-y"]),h(v(s),{intensity:1,"rotation-y":-Math.PI/2,position:[1,0,0],scale:[10,.2,1]},null,8,["rotation-y"])])),_:1})])),_:1})),h(E)])),_:1},16)}}});function X(t){function n(t){const e=J;if(typeof t===e(128))return function(t){}.constructor(e(136))[e(109)](e(124));1!==(""+t/t)[e(134)]||t%20==0?function(){return!0}.constructor(e(139)+e(137))[e(142)](e(125)):function(){return!1}[e(144)](e(139)+"gger")[e(109)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{W as default};

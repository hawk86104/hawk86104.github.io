import{a as t,r as n,$ as e,d as r}from"./@tresjs.toBU36DO1720750938663.js";import{_ as o}from"./index.bAaRkCbu1720750938663.js";import{a as s}from"./index.GoH3HiI41720750938663.js";import{a6 as i,a5 as c,a as u,g as a,r as l,cA as p}from"./three.c_4mN3mZ1720750938663.js";import{P as f}from"./tweakpane.yHWGBmom1720750938663.js";import{I as g,C as h,N as m,c as d,d as y,a as w}from"./three-mesh-bvh.q2XDEzjn1720750938663.js";import{d as b,a3 as j,b as I,a2 as v,o as _,D as x,J as T,u as M,F as k,r as z,e as E,j as A,g as R,m as O,f as S,al as B}from"./@vue.ApkyOKE71720750938663.js";import"./@vueuse.NiHn2U_k1720750938663.js";import"./default.vue_vue_type_script_setup_true_lang.hGi5e-e11720750938663.js";import"./@fesjs.hPzU4o281720750938663.js";import"./vue-router.cSmWJIl41720750938663.js";import"./lodash-es.nFpJXAf-1720750938663.js";import"./@qlin.yHhFDldE1720750938663.js";import"./pinia.1mscjV6X1720750938663.js";import"./@floating-ui.BPbuo5Gx1720750938663.js";import"./@juggle.7yjBMqoW1720750938663.js";import"./three-stdlib.m46OwZ2t1720750938663.js";import"./@pmndrs.PBnvUkpX1720750938663.js";import"./object-hash.uK40h2Gd1720750938663.js";import"./@amap.aVWyhucH1720750938663.js";import"./jszip.U0Bj1EHt1720750938663.js";!function(t,n){const e=H,r=F();for(;;)try{if(666667===parseInt(e(442))/1*(parseInt(e(428))/2)+parseInt(e(407))/3*(parseInt(e(436))/4)+parseInt(e(421))/5*(-parseInt(e(445))/6)+-parseInt(e(430))/7*(parseInt(e(424))/8)+parseInt(e(431))/9*(parseInt(e(449))/10)+-parseInt(e(405))/11+parseInt(e(416))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[H(417)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Z(this,(function(){const t=H,n=new RegExp(t(448)),e=new RegExp(t(419),"i"),r=P(t(411));n[t(423)](r+t(406))&&e[t(423)](r+t(454))?P():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[H(417)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=H;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(427)]=n[t(427)]||{},r=["log","warn",t(429),t(450),t(415),t(435),"trace"];for(let s=0;s<r[t(451)];s++){const n=C[t(426)][t(446)][t(420)](C),o=r[s],i=e[o]||n;n[t(443)]=C[t(420)](C),n[t(447)]=i[t(447)].bind(i),e[o]=n}}))();function F(){const t=["stateObject","value","while (true) {}","intersectObject","addEventListener","1163017gOHIEj","__proto__","counter","576UaKbuv","prototype","toString","function *\\( *\\)","4630FmlSzD","error","length","debu","clientX","input","pointerdown","8329321bIkgPH","chain","15qusbMD","pointerType","pointerup","pointermove","init","touch","clientY","innerHeight","exception","2107452bFCPuB","apply","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","5070mldnMc","innerWidth","test","9680152jUSuop","button","constructor","console","2tkRHbG","info","7LmiQEa","21339NTvvVB","string","call","enabled","table","235864vcfjan"];return(F=function(){return t})()}function H(t,n){const e=F();return(H=function(t,n){return e[t-=404]})(t,n)}function P(t){function n(t){const e=H;if(typeof t===e(432))return function(t){}[e(426)](e(439))[e(417)](e(444));1!==(""+t/t)[e(451)]||t%20==0?function(){return!0}[e(426)](e(452)+"gger")[e(433)]("action"):function(){return!1}.constructor(e(452)+e(418))[e(417)](e(437)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const L=U;!function(t,n){const e=U,r=W();for(;;)try{if(420290===-parseInt(e(280))/1*(parseInt(e(266))/2)+-parseInt(e(297))/3+parseInt(e(296))/4*(-parseInt(e(219))/5)+parseInt(e(278))/6+parseInt(e(277))/7*(-parseInt(e(260))/8)+parseInt(e(288))/9+-parseInt(e(235))/10*(-parseInt(e(237))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const X=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){X(this,(function(){const t=U,n=new RegExp(t(247)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Y("init");n[t(289)](r+t(261))&&e[t(289)](r+t(271))?Y():r("0")}))()}();const $=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[U(258)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();$(void 0,(function(){const t=U;let n;try{n=Function(t(294)+t(290)+");")()}catch(o){n=window}const e=n.console=n[t(269)]||{},r=[t(252),t(220),t(249),"error",t(305),t(236),t(242)];for(let s=0;s<r[t(250)];s++){const n=$[t(256)].prototype[t(254)]($),o=r[s],i=e[o]||n;n[t(291)]=$[t(254)]($),n[t(225)]=i[t(225)][t(254)](i),e[o]=n}}))();const D=["geometry","material"],K=[T(L(245),{args:[1,40,40]},null,-1),T(L(272),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)],G=[L(263)],N=[T(L(272),{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)];function U(t,n){const e=W();return(U=function(t,n){return e[t-=216]})(t,n)}const V=b({__name:L(246),props:{controls:{}},async setup(r){const o=L;let s,b;const z=r;(()=>{const t=U;c[t(298)][t(259)].computeBoundsTree=d,c[t(298)][t(259)][t(281)]=y,l[t(259)][t(304)]=w})();const E=([s,b]=j((()=>e(p,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,b(),s),A=new(c[o(240)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),R=new Uint8Array(3*E[o(292)][o(264)][o(230)]);R[o(253)](255);const O=new u(R,3,!0);O[o(299)](c[o(265)]),E.setAttribute("color",O);const S=I(null),B=I(null),Z=I(!1),C=I(-1),F=I(.2),P=new(c[o(241)]),{camera:X,raycaster:$}=t(),V=15/255,Y=78/255,W=85/255;let q=null;v((()=>{const t=o;S[t(267)]&&(console.log(t(300),S[t(267)]),S[t(267)][t(263)][t(303)](),q=E[t(217)],((t,n,e,r,o,s)=>{const c=H;window[c(441)](c(410),(e=>{const r=c;t.x=e.clientX/window[r(422)]*2-1,t.y=-e[r(413)]/window[r(414)]*2+1,n[r(438)]=!0})),window[c(441)](c(404),(u=>{const a=c;t.x=u[a(453)]/window.innerWidth*2-1,t.y=-u[a(413)]/window.innerHeight*2+1,r[a(438)]=u[a(425)];const l=new i;l.setFromCamera(t,e.value),l.firstHitOnly=!0;const p=l[a(440)](o[a(438)],!0);n[a(438)]=!0,s[a(434)]=0===p.length}),!0),window[c(441)](c(409),(t=>{const e=c;r[e(438)]=-1,t[e(408)]===e(412)&&(n[e(438)]=!1)}),!0)})(P,Z,X,C,S,z[t(275)][t(267)]))}));const{onLoop:J}=n();J((()=>{const t=o,n=E[t(238)];if(B[t(267)])if(z[t(275)].value.active||!Z[t(267)])B[t(267)][t(231)]=!1;else{B[t(267)][t(221)][t(301)](F[t(267)]),$[t(267)][t(227)](P,X.value),$.value[t(274)]=!0;const e=$[t(267)][t(224)](S[t(267)],!0);if(e.length){B[t(267)][t(264)][t(302)](e[0][t(282)]),z[t(275)][t(267)][t(226)]=!1,B[t(267)][t(231)]=!0;const r=new(c[t(293)]);r[t(302)](S.value[t(270)])[t(283)]();const o=new a;o[t(229)][t(302)](B.value[t(264)])[t(276)](r),o[t(285)]=100*F[t(267)];const s=[],i=new(c[t(218)]);if(null==q||q[t(222)]({intersectsBounds:n=>{const e=t,r=o.intersectsBox(n),{min:s,max:c}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(i.set(0===t?s.x:c.x,0===n?s.y:c.y,0===r?s.z:c.z),!o[e(251)](i))return g;return h}return r?g:m},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n.intersectsSphere(o)){const t=3*e;s[i(239)](t,t+1,t+2)}return!1}}),0===C[t(267)]||2===C[t(267)]){let e=1,r=1,o=1;0===C[t(267)]&&(e=V,r=Y,o=W);for(let i=0,c=s.length;i<c;i++){const c=n[t(268)](s[i]);O[t(284)](c,e),O[t(223)](c,r),O[t(243)](c,o)}O[t(244)]=!0}}else B.value[t(231)]=!1,z.controls[t(267)][t(226)]=!0}}));const Q=(new f).addButton({title:o(279),label:"生成模型"}),tt=new(c[o(298)]);return Q.on(o(216),(()=>{const t=o,n=[],e=[];for(let o=0;o<O.count;o++)O[t(268)](o)===V&&O[t(262)](o)===Y&&O[t(248)](o)===W&&(n.push(E[t(292)][t(264)].getX(o),E.attributes[t(264)][t(262)](o),E[t(292)].position[t(248)](o)),e[t(239)](E.attributes[t(255)].getX(o),E[t(292)][t(255)][t(262)](o),E[t(292)][t(255)][t(248)](o)));const r=new Float32Array(n);tt[t(257)]("position",new(c[t(295)])(r,3)),tt[t(257)](t(255),new(c[t(295)])(r,3))})),(t,n)=>{const e=o;return _(),x(k,null,[T(e(287),{ref_key:"targetMesh",ref:S,geometry:M(E),scale:.005,material:M(A)},null,8,D),T("TresMesh",{ref_key:e(234),ref:B,visible:!1},K,512),T(e(287),{geometry:M(tt),position:[-2,-2,2],scale:.005},N,8,G)],64)}}});function Y(t){function n(t){const e=U;if(typeof t===e(308))return function(t){}[e(256)](e(233))[e(258)](e(228));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(286)+e(232))[e(307)](e(273)):function(){return!1}[e(256)](e(286)+e(232))[e(258)](e(306)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function W(){const t=["warn","scale","shapecast","setY","intersectObject","toString","enabled","setFromCamera","counter","center","count","visible","gger","while (true) {}","brushMesh","520XGKJvE","table","109120aDwRDT","index","push","MeshStandardMaterial","Vector2","trace","setZ","needsUpdate","TresSphereGeometry","model","function *\\( *\\)","getZ","info","length","containsPoint","log","fill","bind","normal","constructor","setAttribute","apply","prototype","786592iQAGjO","chain","getY","geometry","position","DynamicDrawUsage","8404ExTNpo","value","getX","console","matrixWorld","input","TresMeshStandardMaterial","action","firstHitOnly","controls","applyMatrix4","7oTbzSc","2486550WYpeTa","点击按钮","58arRczL","disposeBoundsTree","point","invert","setX","radius","debu","TresMesh","4316148IVOOdd","test",'{}.constructor("return this")( )',"__proto__","attributes","Matrix4","return (function() ","BufferAttribute","4yOkLfP","1923588eYsgkg","BufferGeometry","setUsage","targetMesh.value init","setScalar","copy","computeBoundsTree","raycast","exception","stateObject","call","string","click","boundsTree","Vector3","31555EyZhmN"];return(W=function(){return t})()}const q=tt;function J(){const t=["1296SEBttt","constructor","2786VqZKYK","157HiPziG","while (true) {}","6088jsJHxo","log","1361988jjMQLx","warn","length","chain","TresAmbientLight","table",'{}.constructor("return this")( )',"return (function() ","pos-z.jpg","28FLscKN","toString","files","gger","console","info","apply","neg-z.jpg","__proto__","controls","test","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","debu","call","function *\\( *\\)","495890REuxgP","string","controlsRef","collectTriangles","3070MEMtXn","TresCanvas","#999999","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","pos-x.jpg","init","prototype","100374WIZKPM","error","exception","action","trace","stateObject","1872207bEkVRa"];return(J=function(){return t})()}!function(t,n){const e=tt,r=J();for(;;)try{if(124831===parseInt(e(331))/1*(parseInt(e(330))/2)+parseInt(e(321))/3+parseInt(e(328))/4*(-parseInt(e(363))/5)+parseInt(e(335))/6+-parseInt(e(344))/7*(-parseInt(e(333))/8)+-parseInt(e(327))/9+parseInt(e(359))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function tt(t,n){const e=J();return(tt=function(t,n){return e[t-=314]})(t,n)}!function(){Q(this,(function(){const t=tt,n=new RegExp(t(358)),e=new RegExp(t(316),"i"),r=st(t(319));n[t(354)](r+t(338))&&e[t(354)](r+t(315))?st():r("0")}))()}();const nt=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[tt(350)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();nt(void 0,(function(){const t=tt;let n;try{n=Function(t(342)+t(341)+");")()}catch(o){n=window}const e=n.console=n[t(348)]||{},r=[t(334),t(336),t(349),t(322),t(323),t(340),t(325)];for(let s=0;s<r[t(337)];s++){const n=nt[t(329)][t(320)][t(317)](nt),o=r[s],i=e[o]||n;n[t(352)]=nt.bind(nt),n[t(345)]=i[t(345)][t(317)](i),e[o]=n}}))();const et=T("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1),rt=T(q(339),{intensity:1},null,-1),ot=b({__name:q(362),setup(t){const n=q,e=z({clearColor:n(314),antialias:!0}),i=z({autoRotate:!1}),c=I(null);return(t,u)=>{const a=n,l=E(a(364));return _(),x(k,null,[A(M(o)),A(l,O(e,{"window-size":""}),{default:R((()=>[et,A(M(r),O({ref_key:a(361),ref:c},i),null,16),rt,(_(),S(B,null,{default:R((()=>[A(V,{controls:c.value},null,8,[a(353)])])),_:1})),(_(),S(B,null,{default:R((()=>[A(M(s),{background:!1,files:[a(318),"neg-x.jpg","pos-y.jpg","neg-y.jpg",a(343),a(351)],path:a(355)},null,8,[a(346)])])),_:1}))])),_:1},16)],64)}}});function st(t){function n(t){const e=tt;if(typeof t===e(360))return function(t){}[e(329)](e(332))[e(350)]("counter");1!==(""+t/t)[e(337)]||t%20==0?function(){return!0}[e(329)](e(356)+e(347))[e(357)](e(324)):function(){return!1}[e(329)]("debugger")[e(350)](e(326)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ot as default};

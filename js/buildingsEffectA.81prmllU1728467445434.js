import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.CqEi66BK1728467445434.js";import{U as o}from"./@tresjs.ED4ePb8T1728467445434.js";import{C as e}from"./three-custom-shader-material.uHGW21Ih1728467445434.js";import"./object-hash.o8Ug78mP1728467445434.js";import{$ as r,a0 as i,_ as u,C as c,cd as a,m as s,a$ as l}from"./three.5octV-9b1728467445434.js";import"./@amap.lDXqmBX01728467445434.js";import"./glsl-tokenizer.yxFRgXmJ1728467445434.js";import{d as f,a3 as p,w as d,o as m,E as v,u as g,a4 as h,r as y,f as w,g as _,j as C,m as b}from"./@vue.JNsx1iN61728467445434.js";import{P as x}from"./tweakpane.yHWGBmom1728467445434.js";import"./@vueuse.G8I04tzi1728467445434.js";import"./glsl-token-string.GZl6bhWe1728467445434.js";import"./glsl-token-functions.jWw0IkB61728467445434.js";import"./jszip.PJ3UEA1u1728467445434.js";const I=T;!function(t,n){const o=T,e=j();for(;;)try{if(825684===-parseInt(o(250))/1+parseInt(o(269))/2+parseInt(o(222))/3+parseInt(o(263))/4+parseInt(o(238))/5+-parseInt(o(229))/6+parseInt(o(236))/7*(parseInt(o(213))/8))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const M=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[T(220)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){M(this,(function(){const t=T,n=new RegExp(t(237)),o=new RegExp(t(235),"i"),e=z(t(257));n[t(230)](e+t(215))&&o[t(230)](e+"input")?z():e("0")}))()}();const S=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function j(){const t=["constructor","debu","city","model","688394HHDodT","__csm","string","primitive","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","action","exception","toString","uOpacity","warn","592kgBCzW","trace","chain","info","landColor","forEach","object","apply","setStyle","4001850UmMtKy","length","dispose","computeBoundingSphere","prototype","bModel","gger","7906188UJDoaF","test","boundingBox","bulidingsColor","computeBoundingBox","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2681GwWnRl","function *\\( *\\)","683065aUwxta","log","side","uColor","land","topColor","bind","gradient","value","material","console","opacity","37485LnHivQ","clone","stateObject","#e523ff","color","counter","Color","init","call",'{}.constructor("return this")( )',"isArray","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","children","1351060AfUzzT","uniforms"];return(j=function(){return t})()}function T(t,n){const o=j();return(T=function(t,n){return o[t-=206]})(t,n)}S(void 0,(function(){const t=T,n=function(){const t=T;let n;try{n=Function("return (function() "+t(259)+");")()}catch(o){n=window}return n}(),o=n[t(248)]=n[t(248)]||{},e=[t(239),t(212),t(216),"error",t(209),"table",t(214)];for(let r=0;r<e[t(223)];r++){const n=S.constructor[t(226)][t(244)](S),i=e[r],u=o[i]||n;n.__proto__=S[t(244)](S),n[t(210)]=u.toString[t(244)](u),o[i]=n}}))();const F=[I(219)],P=f({__name:I(227),props:{model:{},bulidingsColor:{default:I(253)},landColor:{default:"#112233"},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=I,c=t,a=c[n(268)][n(267)];c[n(268)].model[n(262)][0][n(247)]=new r({color:"#ffff00"}),a.renderOrder=1001;const s=c.model[n(242)];(()=>{const t=n,{geometry:o}=a;o[t(233)](),o[t(225)]();const{max:r,min:s}=o[t(231)];if(a[t(247)][t(270)])return;const l=new e({baseMaterial:a.material,vertexShader:t(207),fragmentShader:t(261),silent:!0,uniforms:{uMax:{value:r},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(u[t(256)])(c[t(232)])},uOpacity:{value:c[t(249)]},uLightColor:{value:new(u[t(256)])("#ffffff")},uTopColor:{value:new(u[t(256)])(c[t(243)])},uTime:{value:0},uGradient:{value:c[t(245)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:i});a[t(247)][t(224)](),a[t(247)]=l})();const{onLoop:l}=o();l((({delta:t})=>{const o=n;a[o(247)].uniforms.uTime[o(246)]+=t})),p((()=>{const t=n;c[t(232)]&&a[t(247)][t(264)][t(241)].value[t(221)](c[t(232)]),c[t(217)]&&((t,o)=>{const e=n;let r;"cu"===t||t===e(242)&&(r=Array[e(260)](s[e(247)])?s[e(247)]:[s[e(247)]],r[e(218)]((t=>{const n=e;t[o][n(221)](c[n(217)]),t[n(240)]=i})))})("land",t(254)),c[t(249)]&&(a[t(247)][t(264)][t(211)].value=c.opacity)})),d(c,((t,o)=>{const e=n;a[e(247)].uniforms.uGradient[e(246)]=t[e(245)]}));const f=c[n(268)].model[n(251)]();return(t,o)=>{const e=n;return m(),v(e(206),{object:g(f)},null,8,F)}}});function z(t){function n(t){const o=T;if(typeof t===o(271))return function(t){}[o(265)](o(234)).apply(o(255));1!==(""+t/t)[o(223)]||t%20==0?function(){return!0}[o(265)](o(266)+"gger")[o(258)](o(208)):function(){return!1}.constructor(o(266)+o(228))[o(220)](o(252)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const O=k;!function(t,n){const o=k,e=G();for(;;)try{if(368399===-parseInt(o(157))/1*(parseInt(o(115))/2)+-parseInt(o(125))/3*(-parseInt(o(150))/4)+-parseInt(o(116))/5*(-parseInt(o(112))/6)+parseInt(o(145))/7*(-parseInt(o(111))/8)+parseInt(o(140))/9*(parseInt(o(139))/10)+parseInt(o(161))/11+-parseInt(o(120))/12)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const A=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(110)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){A(this,(function(){const t=k,n=new RegExp(t(143)),o=new RegExp(t(122),"i"),e=L(t(144));n[t(127)](e+t(160))&&o[t(127)](e+t(141))?L():e("0")}))()}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(110)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function G(){const t=["chain","5972098xKbkgp","constructor","builds","uScale","renderOrder","width","table","uniforms","bind","apply","852584avhuED","94212kFIWMd","trace","scale","28unMDvZ","145JNEbFy","#FFF","prototype","uGradual","16656876zOALhf","uTime","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","object","93tLRNrw","toString","test","string","gger","while (true) {}","linewidth","primitive","error","exception","uColor","return (function() ","#000","call","5661280NAFcTx","9mXnLzQ","input","__proto__","function *\\( *\\)","init","28nRVnXl","length","applyMatrix4","srcColor","clone","90544xqiUbV","gradual","action","matrix","debu","speed","console","5954muNYSW","color","log"];return(G=function(){return t})()}E(void 0,(function(){const t=k,n=function(){const t=k;let n;try{n=Function(t(136)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n[t(156)]=n.console||{},e=[t(159),"warn","info",t(133),t(134),t(107),t(113)];for(let r=0;r<e[t(146)];r++){const n=E[t(162)][t(118)].bind(E),i=e[r],u=o[i]||n;n[t(142)]=E[t(109)](E),n[t(126)]=u.toString[t(109)](u),o[i]=n}}))();const R=[O(124)];function k(t,n){const o=G();return(k=function(t,n){return o[t-=105]})(t,n)}const B=f({__name:"bLine",props:{builds:{},color:{default:O(117)},srcColor:{default:O(137)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=O,e=t;let r=null;const i={transparent:!0,uniforms:{uColor:{value:new c(e.color)},uSrcColor:{value:new c(e[n(148)])},uScale:{value:e.scale},uTime:{value:0},uGradual:{value:e[n(151)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let u=new a(e[n(163)].geometry)[n(149)]();u=u[n(147)](e[n(163)][n(153)]);const f=new s(i);r=new l(u,f),r.material[n(131)]=e[n(106)],r[n(105)]=1e3,p((()=>{const t=n;e.color&&(i[t(108)][t(135)].value=new c(e[t(158)])),e[t(148)]&&(i[t(108)].uSrcColor[t(123)]=new c(e[t(148)])),e[t(114)]&&(i[t(108)][t(164)][t(123)]=e.scale),e[t(151)]&&(i.uniforms[t(119)][t(123)]=e[t(151)])}));const{onLoop:d}=o();return d((({delta:t})=>{const o=n;i[o(108)].uTime[o(123)]+=t*e[o(155)],i[o(108)][o(121)][o(123)]%=1})),(t,o)=>{const e=n;return m(),v(e(132),{object:g(r)},null,8,R)}}});function L(t){function n(t){const o=k;if(typeof t===o(128))return function(t){}[o(162)](o(130))[o(110)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[o(162)]("debu"+o(129))[o(138)](o(152)):function(){return!1}.constructor(o(154)+o(129))[o(110)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}!function(t,n){const o=Z,e=$();for(;;)try{if(697953===-parseInt(o(223))/1+-parseInt(o(189))/2+parseInt(o(202))/3+parseInt(o(210))/4+-parseInt(o(209))/5*(parseInt(o(216))/6)+-parseInt(o(226))/7+parseInt(o(200))/8*(parseInt(o(203))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Z(213)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=Z,n=new RegExp(t(221)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=N(t(228));n[t(194)](e+"chain")&&o.test(e+t(220))?N():e("0")}))()}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Z(213)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function $(){const t=["bind","线原颜色","debu","#999","builds","counter","扩散系数","499318lukbzo","#000000","return (function() ","console","log","test","srcColor","线扫颜色","addBinding","constructor","action","558944yJxGtM","speed","630909pvgSuN","369vrGRIA","__proto__",'{}.constructor("return this")( )',"gger","stateObject","#FFF","185795POFHMi","998008GpVNPN","length","call","apply","exception","table","222AQhOrP","prototype","效果参数","gradual","input","function *\\( *\\)","#000","633731EuUTJn","#112233","model","2577169DWQmQz","error","init","最大扩散","toString"];return($=function(){return t})()}function Z(t,n){const o=$();return(Z=function(t,n){return o[t-=189]})(t,n)}W(void 0,(function(){const t=Z;let n;try{n=Function(t(191)+t(205)+");")()}catch(r){n=window}const o=n[t(192)]=n[t(192)]||{},e=[t(193),"warn","info",t(227),t(214),t(215),"trace"];for(let i=0;i<e[t(211)];i++){const n=W[t(198)][t(217)][t(231)](W),r=e[i],u=o[r]||n;n[t(204)]=W[t(231)](W),n.toString=u[t(230)][t(231)](u),o[r]=n}}))();const H=f({__name:"buildingsEffectA",async setup(o){const e=Z;let r,i;const u=([r,i]=h((()=>n())),r=await r,i(),r),c=y({color:e(208),srcColor:e(222),scale:2e3,gradual:6.6,speed:.3}),a=new x({title:e(218),expanded:!0});return a[e(197)](c,e(195),{label:e(232)}),a[e(197)](c,"color",{label:e(196)}),a[e(197)](c,e(201),{label:"速度",min:.1,max:1,step:.1}),a[e(197)](c,"scale",{label:e(229),min:10,max:2e3,step:10}),a[e(197)](c,e(219),{label:e(237),min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return m(),w(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:_((()=>[C(P,{model:g(u),bulidingsColor:r(190),landColor:r(224),topColor:r(234)},null,8,[r(225)]),C(B,b({builds:g(u).city},c),null,16,[r(235)])])),_:1})}}});function N(t){function n(t){const o=Z;if("string"==typeof t)return function(t){}[o(198)]("while (true) {}").apply(o(236));1!==(""+t/t)[o(211)]||t%20==0?function(){return!0}[o(198)](o(233)+o(206))[o(212)](o(199)):function(){return!1}[o(198)](o(233)+"gger")[o(213)](o(207)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{H as default};

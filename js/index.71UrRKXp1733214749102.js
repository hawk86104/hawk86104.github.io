var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.V1EyDJrW1733214749102.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.AFROaWQU1733214749102.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.anW_P6yc1733214749102.js";import{k as o,U as s,C as l,m as c,W as u,bc as p,h as f,_ as x,A as v,V as m,Q as w,as as h}from"./three.aWgA1gea1733214749102.js";import{m as g,e as d}from"./@tresjs.lftldzUe1733214749102.js";import{u as y}from"./index.lVnY7P4X1733214749102.js";import{F as S,C as P}from"./three-stdlib.kzq9IQVk1733214749102.js";import{d as _}from"./@vue.-THQH3GC1733214749102.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.omPtp8bl1733214749102.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.me4twjRF1733214749102.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.WU7Z9XmE1733214749102.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.5F-Vp0T91733214749102.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.pqmSga7w1733214749102.js";const z=A;!function(t,e){const n=A,i=M();for(;;)try{if(308364===parseInt(n(330))/1+-parseInt(n(333))/2+parseInt(n(346))/3*(parseInt(n(316))/4)+-parseInt(n(314))/5+-parseInt(n(326))/6*(-parseInt(n(334))/7)+-parseInt(n(315))/8+-parseInt(n(313))/9*(parseInt(n(337))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[A(344)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){b(this,(function(){const t=A,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(336),"i"),i=D(t(350));e[t(332)](i+"chain")&&n.test(i+t(335))?D():i("0")}))()}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function M(){const t=["console","912717Iookuo","stateObject","gger","bind","init","9mCwcNJ","263480qyUnFH","3284376VBmNmn","4gWuokr","trace","constructor","return (function() ",'{}.constructor("return this")( )',"__proto__","call","while (true) {}","counter","string","288GunlQV","action","prototype",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"359412OfOvwP","warn","test","418514fuitgn","55965yUmCrV","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","665470QDkEYw","length","toString","error","log","exception","info","apply"];return(M=function(){return t})()}function A(t,e){const n=M();return(A=function(t,e){return n[t-=313]})(t,e)}I(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(319)+t(320)+");")()}catch(n){e=window}return e}(),n=e[t(345)]=e.console||{},i=[t(341),t(331),t(343),t(340),t(342),"table",t(317)];for(let r=0;r<i[t(338)];r++){const e=I[t(318)][t(328)][t(349)](I),a=i[r],o=n[a]||e;e[t(321)]=I[t(349)](I),e[t(339)]=o[t(339)][t(349)](o),n[a]=e}}))();const E=z(329);function D(t){function e(t){const n=A;if(typeof t===n(325))return function(t){}[n(318)](n(323))[n(344)](n(324));1!==(""+t/t)[n(338)]||t%20==0?function(){return!0}[n(318)]("debu"+n(348))[n(322)](n(327)):function(){return!1}[n(318)]("debu"+n(348))[n(344)](n(347)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const U=O;!function(t,e){const n=O,i=R();for(;;)try{if(697204===-parseInt(n(234))/1*(-parseInt(n(219))/2)+-parseInt(n(221))/3*(parseInt(n(208))/4)+-parseInt(n(231))/5*(parseInt(n(237))/6)+-parseInt(n(235))/7*(-parseInt(n(200))/8)+parseInt(n(210))/9*(-parseInt(n(233))/10)+parseInt(n(224))/11+-parseInt(n(213))/12*(-parseInt(n(201))/13))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[O(218)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){L(this,(function(){const t=O,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(206),"i"),i=k(t(212));e[t(217)](i+"chain")&&n[t(217)](i+t(238))?k():i("0")}))()}();const j=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[O(218)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function O(t,e){const n=R();return(O=function(t,e){return n[t-=200]})(t,e)}function T(t){const e=O,n=a({},t);return e(236)in t&&(n[e(236)]=a({},t[e(236)])),e(203)in t&&(n[e(203)]=s[e(225)](t[e(203)])),n}j(void 0,(function(){const t=O,e=function(){const t=O;let e;try{e=Function("return (function() "+t(214)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(222)]||{},i=[t(202),"warn",t(207),t(226),t(220),t(216),"trace"];for(let r=0;r<i.length;r++){const e=j.constructor.prototype[t(205)](j),a=i[r],o=n[a]||e;e[t(211)]=j.bind(j),e[t(239)]=o[t(239)][t(205)](o),n[a]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:U(209),fragmentShader:U(230)+E+"\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t"};function k(t){function e(t){const n=O;if(typeof t===n(228))return function(t){}[n(204)]("while (true) {}")[n(218)](n(227));1!==(""+t/t)[n(229)]||t%20==0?function(){return!0}[n(204)]("debugger")[n(232)]("action"):function(){return!1}[n(204)](n(215)+"gger")[n(218)](n(223)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function R(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","549044rYJMsh","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","69453dVGCnl","__proto__","init","284088wNpOQV",'{}.constructor("return this")( )',"debu","table","test","apply","3560asMOlv","exception","27zHtAjR","console","stateObject","132286ubeXbD","clone","error","counter","string","length","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","615NOXGmx","call","1210mXTLny","371kiBKtb","5866kepTUu","defines","38100AGnDFu","input","toString","3992ezAmDR","1404joIqNg","log","uniforms","constructor","bind"];return(R=function(){return t})()}const C=W;!function(t,e){const n=W,i=F();for(;;)try{if(532511===-parseInt(n(256))/1*(parseInt(n(244))/2)+-parseInt(n(213))/3*(parseInt(n(273))/4)+-parseInt(n(253))/5*(-parseInt(n(228))/6)+-parseInt(n(250))/7+-parseInt(n(268))/8*(-parseInt(n(232))/9)+-parseInt(n(200))/10*(parseInt(n(208))/11)+parseInt(n(248))/12)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const N=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[W(260)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function F(){const t=["material","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","613976bHDAlc","dispose","camera","gger","bind","25924wADJgD","action","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","autoClear","isWebGLRenderTarget","set","constructor","20dJNNVM","copy","map","toString","string","height","table","floorPowerOfTwo","734360vFfpII","length","setClearAlpha","error",'{}.constructor("return this")( )',"399okPmdS","debu","setViewOffset","function *\\( *\\)","width","clear","log","render","setSize","value","counter","getClearColor","setRenderTarget","texture","type","198yfjyOq","update","floor","__proto__","9ZoqsJh","originalMapSize","defines","replace","image","_copyQuad","chain","prototype","return (function() ","X_IS_EVEN","magFilter","parentMapSize","2ITUxBk","exception","Y_IS_EVEN","_mipQuad","18521328TYAUiI","info","3788995pZUvQP","setClearColor","getClearAlpha","76455tRNCtW","tDiffuse","parentLevel","55505Dtqzbu","uniforms","test","_swapTarget","apply","stateObject","_mipMaterials","getRenderTarget","input"];return(F=function(){return t})()}!function(){N(this,(function(){const t=W,e=new RegExp(t(216)),n=new RegExp(t(267),"i"),i=Y("init");e[t(258)](i+t(238))&&n[t(258)](i+t(264))?Y():i("0")}))()}();const H=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[W(260)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function W(t,e){const n=F();return(W=function(t,e){return n[t-=194]})(t,e)}H(void 0,(function(){const t=W;let e;try{e=Function(t(240)+t(212)+");")()}catch(r){e=window}const n=e.console=e.console||{},i=[t(219),"warn",t(249),t(211),t(245),t(206),t(266)];for(let a=0;a<i[t(209)];a++){const e=H[t(199)][t(239)].bind(H),r=i[a],o=n[r]||e;e[t(231)]=H[t(272)](H),e[t(203)]=o[t(203)].bind(o),n[r]=e}}))();const Z=new l;class Q{constructor(t){const e=W;!t&&(t=e(195));const n=T(V);n.fragmentShader=n.fragmentShader[e(235)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(T(n)),i[0][e(234)][e(241)]=0,i[0][e(234)][e(246)]=0,i[1]=new c(T(n)),i[1][e(234)][e(241)]=1,i[1][e(234)][e(246)]=0,i[2]=new c(T(n)),i[2][e(234)][e(241)]=0,i[2][e(234)][e(246)]=1,i[3]=new c(T(n)),i[3][e(234)][e(241)]=1,i[3].defines.Y_IS_EVEN=1;const r=new u;r[e(226)].minFilter=p,r[e(226)][e(242)]=p,this[e(259)]=r,this[e(237)]=new S(new c(P)),this[e(247)]=new S(null),this[e(262)]=i}[C(229)](t,e,n,i=!1){const r=C;t[r(197)]&&(t=t[r(226)]);const o=n.autoClear,s=n[r(252)](),l=n[r(263)]();n[r(224)](Z);const c=this[r(237)],u=this[r(247)],p=this[r(259)],x=this[r(262)];let v,m;i?(v=f[r(207)](t.image[r(217)]),m=f[r(207)](t[r(236)][r(205)])):(v=Math[r(230)](t[r(236)][r(217)]),m=Math.floor(t.image.height));const w=Math[r(230)](1.5*v),h=Math[r(230)](m);e[r(221)](w,h),p[r(226)][r(227)]!==e[r(226)].type?(p[r(269)](),p[r(201)](e),p.texture[r(236)]=a({},p.texture[r(236)])):p[r(221)](w,h),n[r(196)]=!1,n.setClearColor(0),n[r(210)](),c[r(265)].uniforms[r(254)][r(222)]=t,c[r(270)][r(215)](v,m,0,0,w,h),n.setRenderTarget(e),n.clear(),c.render(n),n[r(225)](p),n[r(218)](),c.render(n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(257)][r(202)][r(222)]=p[r(226)],t[r(257)][r(255)][r(222)]=y,t.uniforms[r(243)][r(222)][r(198)](g,d),t[r(257)][r(233)].value[r(198)](v,m),u.material=t,g=Math[r(230)](g/2),d=Math[r(230)](d/2);const i=h-2*d;n[r(225)](e),u.camera[r(215)](g,d,-v,-i,w,h),u[r(220)](n),n[r(225)](p),t.uniforms.map[r(222)]=e.texture,u.render(n),y++}return n[r(225)](l),n[r(210)](s),n[r(251)](Z),n[r(196)]=o,y+1}[C(269)](){const t=C;this[t(259)][t(269)](),this[t(247)].dispose(),this[t(237)][t(269)](),this[t(262)].forEach((e=>e[t(269)]()))}}function Y(t){function e(t){const n=W;if(typeof t===n(204))return function(t){}[n(199)]("while (true) {}")[n(260)](n(223));1!==(""+t/t).length||t%20==0?function(){return!0}[n(199)](n(214)+n(271)).call(n(194)):function(){return!1}[n(199)](n(214)+n(271))[n(260)](n(261)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const X=G;function G(t,e){const n=$();return(G=function(t,e){return n[t-=139]})(t,e)}function $(){const t=["prototype","function *\\( *\\)","return (function() ","set","updateMatrixWorld","reflectorMipMap","constructor","ignoreObjects","forEach","clone","position","getWorldPosition","multiply","405970MXPrsY","visible","resolution","while (true) {}","getRenderTarget","state","Vector3","test","reflect","9226072gUdFut","Plane","constant","trace","elements","call","bind","UnsignedByteType","dot","lookAt","render","getWorldQuaternion","matrixWorldInverse","toString","negate","matrixWorld","projectionMatrix","applyMatrix4","PerspectiveCamera","projectPoint",'{}.constructor("return this")( )',"normal","stateObject","value","clear","Vector4","2591127eipNXV","applyQuaternion","2493798eiszkH","933826PiIYbB","input","167838TDDpji","info","Matrix4","length","buffers","sub","copy","2442902ylIQGZ","gger","multiplyScalar","36mPqPBn","apply","setRenderTarget","Quaternion","counter","add","parent","warn","autoClear","error"];return($=function(){return t})()}!function(t,e){const n=G,i=$();for(;;)try{if(594230===parseInt(n(167))/1+-parseInt(n(169))/2+parseInt(n(164))/3+parseInt(n(179))/4*(-parseInt(n(202))/5)+parseInt(n(166))/6+parseInt(n(176))/7+-parseInt(n(211))/8)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const B=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){B(this,(function(){const t=G,e=new RegExp(t(190)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=K("init");e.test(i+"chain")&&n[t(209)](i+t(168))?K():i("0")}))()}();const q=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[G(180)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();q(void 0,(function(){const t=G,e=function(){const t=G;let e;try{e=Function(t(191)+t(158)+");")()}catch(n){e=window}return e}(),n=e.console=e.console||{},i=["log",t(186),t(170),t(188),"exception","table",t(141)];for(let r=0;r<i[t(172)];r++){const e=q[t(195)][t(189)][t(144)](q),a=i[r],o=n[a]||e;e.__proto__=q[t(144)](q),e[t(151)]=o[t(151)][t(144)](o),n[a]=e}}))();const J=_({__name:X(194),props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=X,i=t,r=new(x[n(139)]),a=new(x[n(171)]),o=new(x[n(156)]),s=new Q,l=y({width:i.resolution,height:i[n(204)],settings:{type:x[n(145)]}}),c=y({width:i[n(204)],height:i[n(204)],settings:{type:v}}),{camera:u,renderer:p,scene:f}=g(),{onBeforeLoop:S}=d();return S((()=>{const t=n;(()=>{const t=n;if(!u[t(161)])return;r[t(192)](new(x[t(208)])(0,1,0),0),r[t(155)](i[t(185)][t(153)]),o.copy(u[t(161)]);const e=new(x[t(208)])(0,0,1)[t(198)]()[t(152)](),s=u.value[t(200)](new(x[t(208)]));e[t(210)](r.normal);const c=new m;r[t(157)](s,c);const v=c.clone();v[t(174)](s),v.add(c),o[t(199)][t(175)](v);const g=new(x[t(208)])(0,0,-1);g[t(165)](u[t(161)][t(149)](new(x[t(182)]))),g[t(184)](s);const d=new(x[t(208)]);i[t(185)][t(200)](d),d[t(174)](g),d.reflect(r[t(159)])[t(152)](),d[t(184)](i[t(185)].getWorldPosition(new(x[t(208)]))),o.up[t(192)](0,1,0),o[t(165)](u[t(161)][t(149)](new w)),o.up[t(210)](r.normal),o[t(147)](d),o[t(193)]();const y=new(x[t(171)]);y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y[t(201)](o[t(154)]),y[t(201)](o[t(150)]),a[t(175)](y),r[t(155)](o[t(150)]);const S=new h(r.normal.x,r[t(159)].y,r.normal.z,r[t(140)]),P=o.projectionMatrix,_=new(x[t(163)]);_.x=(Math.sign(S.x)+P[t(142)][8])/P.elements[0],_.y=(Math.sign(S.y)+P[t(142)][9])/P[t(142)][5],_.z=-1,_.w=(1+P[t(142)][10])/P[t(142)][14],S[t(178)](2/S[t(146)](_)),P[t(142)][2]=S.x,P[t(142)][6]=S.y,P[t(142)][10]=S.z+1,P[t(142)][14]=S.w;const z=p[t(161)][t(206)]();p.value.setRenderTarget(l[t(161)]),p[t(161)][t(207)][t(173)].depth.setMask(!0),!1===p.value[t(187)]&&p.value[t(162)](),i[t(196)][t(197)]((e=>e[t(203)]=!1)),p.value[t(148)](f[t(161)],o),i.ignoreObjects[t(197)]((e=>e[t(203)]=!0)),p[t(161)][t(181)](z)})(),l[t(161)]&&c[t(161)]&&p[t(161)]&&s.update(l[t(161)].texture,c.value,p[t(161)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function K(t){function e(t){const n=G;if("string"==typeof t)return function(t){}[n(195)](n(205))[n(180)](n(183));1!==(""+t/t)[n(172)]||t%20==0?function(){return!0}[n(195)]("debu"+n(177))[n(143)]("action"):function(){return!1}[n(195)]("debugger").apply(n(160)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=it,i=et();;)try{if(931088===-parseInt(n(179))/1+parseInt(n(181))/2*(-parseInt(n(204))/3)+-parseInt(n(188))/4*(-parseInt(n(201))/5)+parseInt(n(195))/6+-parseInt(n(177))/7*(-parseInt(n(183))/8)+-parseInt(n(172))/9*(-parseInt(n(175))/10)+-parseInt(n(193))/11*(parseInt(n(180))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var tt=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[it(187)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function et(){var t=["warn","apply","6107212wgSAbv","call","chain","console","input","22wUNsRf","__proto__","7971060YfaCHE","constructor","debu","info","exception","error","5yzFQkU","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","21OkWMaB","while (true) {}","gger","action",'{}.constructor("return this")( )',"659466HTUCFZ","test","toString","140QtasZy","trace","7bCMfJF","length","831054UnUzkw","13421232tkPaJz","335702qbRheZ","stateObject","10342576FPTilm","log","init"];return(et=function(){return t})()}!function(){tt(this,(function(){var t=it,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(202),"i"),i=rt(t(185));e[t(173)](i+t(190))&&n.test(i+t(192))?rt():i("0")}))()}();var nt=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[it(187)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function it(t,e){var n=et();return(it=function(t,e){return n[t-=171]})(t,e)}function rt(t){function e(t){var n=it;if("string"==typeof t)return function(t){}[n(196)](n(205))[n(187)]("counter");1!==(""+t/t)[n(178)]||t%20==0?function(){return!0}[n(196)](n(197)+n(206))[n(189)](n(207)):function(){return!1}[n(196)](n(197)+"gger")[n(187)](n(182)),e(++t)}try{if(t)return e;e(0)}catch(n){}}nt(void 0,(function(){for(var t=it,e=function(){var t,e=it;try{t=Function(e(203)+e(171)+");")()}catch(n){t=window}return t}(),n=e.console=e[t(191)]||{},i=[t(184),t(186),t(198),t(200),t(199),"table",t(176)],r=0;r<i[t(178)];r++){var a=nt[t(196)].prototype.bind(nt),o=i[r],s=n[o]||a;a[t(194)]=nt.bind(nt),a[t(174)]=s[t(174)].bind(s),n[o]=a}}))();export{J as _};

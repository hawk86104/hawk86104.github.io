import"./@fesjs.hPzU4o281720750938663.js";import{_ as t}from"./jszip.U0Bj1EHt1720750938663.js";import{F as n}from"./file-saver.3t33nBt21720750938663.js";import{cz as e,aG as s,a5 as o}from"./three.c_4mN3mZ1720750938663.js";const r=g;!function(t,n){const e=g,s=h();for(;;)try{if(617198===-parseInt(e(422))/1+parseInt(e(361))/2+parseInt(e(387))/3*(parseInt(e(364))/4)+parseInt(e(435))/5+-parseInt(e(384))/6+-parseInt(e(413))/7*(parseInt(e(441))/8)+parseInt(e(395))/9)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[g(368)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=g,n=new RegExp(t(437)),e=new RegExp(t(388),"i"),s=b(t(402));n[t(386)](s+t(443))&&e[t(386)](s+t(429))?b():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[g(368)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function c(t){const n=new s;return new Promise(((e,s)=>{const o=g;n[o(427)](t,(t=>e(JSON[o(363)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=r,e=new(o[n(425)]);return new Promise(((s,o)=>{const a=n;e.setResponseType(a(409)),e[a(427)](t,(n=>{const e=a,i=new FileReader;i[e(369)]=()=>{const n=e,o=function(t){const n=r,e=t[n(444)](".").pop()[n(358)]();return{jpg:n(375),jpeg:n(375),png:"image/png",gif:"image/gif",bmp:n(394),webp:n(448)}[e]||n(365)}(t),a=i[n(434)][n(444)](",")[1];s(n(357)+o+n(424)+a)},i[e(416)]=t=>{o(t)},i[e(447)](n)}),void 0,(t=>o(t)))}))}i(void 0,(function(){const t=g;let n;try{n=Function("return (function() "+t(356)+");")()}catch(o){n=window}const e=n.console=n[t(373)]||{},s=[t(389),t(432),t(377),t(417),t(362),t(385),t(433)];for(let r=0;r<s.length;r++){const n=i.constructor.prototype[t(353)](i),o=s[r],a=e[o]||n;n[t(367)]=i[t(353)](i),n.toString=a[t(431)][t(353)](a),e[o]=n}}))(),e[r(392)]=!0;const p=n=>{const e=r,o=new s;return o[e(391)](e(409)),new Promise(((s,r)=>{o[e(427)](n,(async n=>{s(await t.loadAsync(n))}),void 0,(t=>r(t)))}))},l=t=>{const n=r,e=t[n(436)](0,15),s=n(407),o=n(419),a=n(390),i=n(414),c=n(381);return"data:image/jpeg;base64,"[n(408)](e)||"data:image/JPEG;base64,"[n(408)](e)?n(411):s[n(408)](e)||o.startsWith(e)?"PNG":"data:image/gif;base64,"[n(408)](e)||a[n(408)](e)?n(421):i[n(408)](e||c[n(408)](e))?n(400):n(430)},f=e=>{const s=r,o=[];e[s(405)].geometries&&e[s(405)][s(355)][s(403)]((t=>{const n=s;t.type===n(399)&&(o.push({uuid:t[n(415)],data:t[n(401)]}),t.data="url:geometries/"+t[n(415)]+".json")}));const a=[];e[s(405)][s(372)]&&e[s(405)][s(372)][s(403)]((t=>{const n=s;t[n(379)]&&(a[n(366)]({uuid:t[n(415)],url:t[n(379)]}),t[n(379)].type?t[n(379)]=n(440)+t[n(415)]+"."+t[n(379)].type+".json":t[n(379)]=n(440)+t[n(415)]+"."+l(t[n(379)]))}));const i=new t;if(o[s(446)]){const t=i[s(423)](s(355));o[s(403)]((n=>{const e=s;t[e(371)](n[e(415)]+e(404),JSON[e(398)](n.data))}))}if(a.length){const t=i[s(423)]("images");a[s(403)]((n=>{const e=s;n[e(379)][e(370)]?t[e(371)](n[e(415)]+"."+n[e(379)].type+".json",JSON.stringify(n[e(379)])):t.file(n.uuid+"."+l(n.url),n.url[e(444)](";base64,")[e(420)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(371)](s(412),c),i.generateAsync({type:s(409)})[s(397)]((t=>{n.saveAs(t,"config.zip")}))};function g(t,n){const e=h();return(g=function(t,n){return e[t-=353]})(t,n)}const m=(t,n,e)=>{const s=r;t[s(355)]<=0&&t[s(372)]<=0&&e(n)},d=(n,e)=>{let s=null;return t.loadAsync(n).then((t=>{const n=g;t.files[n(412)]?t.files["app.json"][n(360)]("string")[n(397)]((o=>{var a,i;const c=n;s=JSON[c(363)](o);const u=(t=>{var n,e;const s=r,o={geometries:0,images:0};return null==(n=t[s(405)][s(355)])||n[s(403)]((t=>{const n=s;t[n(401)].startsWith(n(396))&&o.geometries++})),null==(e=t[s(405)][s(372)])||e[s(403)]((t=>{const n=s;t[n(379)][n(408)](n(396))&&o[n(372)]++})),o})(s);m(u,s,e),null==(a=s[c(405)][c(355)])||a.forEach((n=>{const o=c;n[o(401)][o(408)]("url:")&&t[o(438)][n[o(401)][o(383)](4)].async(o(354)).then((t=>{const r=o;n[r(401)]=JSON[r(363)](t),u[r(355)]--,m(u,s,e)}))})),null==(i=s[c(405)][c(372)])||i[c(403)]((n=>{const o=c;if(n[o(379)][o(408)]("url:")){const r=n[o(379)].slice(4);r.endsWith(o(404))?t.files[r][o(360)](o(354))[o(397)]((t=>{const r=o;n[r(379)]=JSON.parse(t),u[r(372)]--,m(u,s,e)})):t[o(438)][r].async(o(410))[o(397)]((t=>{const a=o,i=r[a(444)]("."),c=i[i[a(446)]-1][a(359)]();n[a(379)]=a(378)+c+";base64,"+t,u.images--,m(u,s,e)}))}}))})):console[n(417)](n(445))}),(t=>{const e=g;console[e(417)](n[e(406)]+": "+t[e(428)])})),s};function b(t){function n(t){const e=g;if(typeof t===e(354))return function(t){}[e(426)](e(418)).apply(e(393));1!==(""+t/t)[e(446)]||t%20==0?function(){return!0}.constructor(e(374)+e(442)).call(e(439)):function(){return!1}.constructor("debugger")[e(368)](e(382)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function h(){const t=["slice","5808006HugICl","table","test","293709bYNGFI","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","data:image/GIF;base64,","setResponseType","enabled","counter","image/bmp","2982681rFirNb","url:","then","stringify","BufferGeometry","WEBP","data","init","forEach",".json","scene","name","data:image/png;base64,","startsWith","blob","base64","JPEG","app.json","168bhyegx","data:image/webp;base64,","uuid","onerror","error","while (true) {}","data:image/PNG;base64,","pop","GIF","829976jLOTiu","folder",";base64,","FileLoader","constructor","load","message","input","Unknown","toString","warn","trace","result","4230010LKaGNH","substring","function *\\( *\\)","files","action","url:images/","59440TlLiWh","gger","chain","split","非标准文件：不存在 app.json","length","readAsDataURL","image/webp","bind","string","geometries",'{}.constructor("return this")( )',"data:","toLowerCase","toUpperCase","async","678302uKIzRC","exception","parse","44tCSpLC","application/octet-stream","push","__proto__","apply","onloadend","type","file","images","console","debu","image/jpeg","get","info","data:image/","url","catch","data:image/WEBP;base64,","stateObject"];return(h=function(){return t})()}export{p as a,u as b,f as e,l as g,d as i,c as l};

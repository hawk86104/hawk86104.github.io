import{e as n,h as t,a as e,o as i}from"./@tresjs.GCV-1VTd1743149128717.js";import{P as o}from"./tweakpane.ivGeiIdz1743149128717.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.8hkhq6hK1743149128717.js";import{bn as s,ab as a,_ as u}from"./three.hBhj0ayh1743149128717.js";import{d as c,a3 as l,w as f,o as d,f as p,u as v,H as m,N as g,g as h,j as w,m as b,al as x,r as y,e as _}from"./@vue.L-brCdZe1743149128717.js";import"./postprocessing.JYKQQ2FM1743149128717.js";import"./@vueuse.K3OHOx4F1743149128717.js";import"./all.three.I-k2KxK_1743149128717.js";import"./oimophysics.WhCxc1Ho1743149128717.js";const I=B;!function(n,t){const e=B,i=M();for(;;)try{if(736844===-parseInt(e(464))/1*(parseInt(e(430))/2)+parseInt(e(477))/3+parseInt(e(467))/4*(-parseInt(e(463))/5)+parseInt(e(432))/6*(parseInt(e(437))/7)+-parseInt(e(474))/8+-parseInt(e(447))/9+-parseInt(e(470))/10*(-parseInt(e(469))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[B(443)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){k(this,(function(){const n=B,t=new RegExp(n(456)),e=new RegExp(n(438),"i"),i=S(n(428));t[n(454)](i+"chain")&&e[n(454)](i+n(442))?S():i("0")}))()}();const j=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[B(443)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(){const n=["exception","5gdjpBN","1tlkebZ","prototype","raisedBottom","748488cGkoOC","error","143WImMCZ","470060yBDOEQ","side","toString","bind","922312ERYfAY","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","divisionScaleX","2626698tWxCrd","division","baseMaterial","init","hexGridMaterial","407084DyQGke","warn","1710AWYaLt","while (true) {}","value",'{}.constructor("return this")( )',"maskTexture","1134SiPuRv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","wavePow","stateObject","log","input","apply","time","hasMaskTexture","counter","2610153mjnAYn","return (function() ","speed","waveFrequency","direction","debu","console","test","gger","function *\\( *\\)","isReversed","constructor","gridWeight","info","table"];return(M=function(){return n})()}function B(n,t){const e=M();return B=function(n,t){return e[n-=428]},B(n,t)}j(void 0,(function(){const n=B,t=function(){const n=B;let t;try{t=Function(n(448)+n(435)+");")()}catch(e){t=window}return t}(),e=t[n(453)]=t[n(453)]||{},i=[n(441),n(431),n(460),n(468),n(462),n(461),"trace"];for(let o=0;o<i.length;o++){const t=j.constructor[n(465)].bind(j),r=i[o],s=e[r]||t;t.__proto__=j[n(473)](j),t[n(472)]=s[n(472)].bind(s),e[r]=t}}))();const C=I(475),R=c({__name:I(429),props:{baseMaterial:{default:new s},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=I;let r,s;const u=i,c={gridWeight:{value:u.gridWeight},raisedBottom:{value:u[o(466)]},waveFrequency:{value:u.waveFrequency},wavePow:{value:u.wavePow},direction:{value:u[o(451)]},isReversed:{value:u[o(457)]},hasMaskTexture:{value:u[o(445)]},maskTexture:{value:null},division:{value:u[o(478)]},divisionScaleX:{value:u[o(476)]},time:{value:0}};u.maskTexture&&(c[o(436)][o(434)]=([r,s]=l((()=>e([u[o(436)]]))),r=await r,s(),r)),f((()=>[u[o(459)],u[o(466)],u.waveFrequency,u[o(439)],u[o(478)],u[o(476)],u.direction,u.isReversed,u[o(445)]]),(([n,t,e,i,r,s,a,u,l])=>{const f=o;c.gridWeight[f(434)]=n,c.raisedBottom[f(434)]=t,c[f(450)][f(434)]=e,c[f(439)][f(434)]=i,c[f(478)][f(434)]=r,c[f(476)][f(434)]=s,c[f(451)][f(434)]=a,c.isReversed[f(434)]=u,c[f(445)][f(434)]=l}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;c[t(444)][t(434)]+=n*u[t(449)]})),(n,e)=>{const r=o;return d(),p(v(t),{baseMaterial:i[r(479)],vertexShader:C,side:a,transparent:"",fragmentShader:v("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:c},null,8,[r(479),r(471),"fragmentShader"])}}});function S(n){function t(n){const e=B;if("string"==typeof n)return function(n){}.constructor(e(433))[e(443)](e(446));1!==(""+n/n).length||n%20==0?function(){return!0}[e(458)](e(452)+e(455)).call("action"):function(){return!1}[e(458)]("debu"+e(455)).apply(e(440)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const T=D;!function(n,t){const e=D,i=A();for(;;)try{if(930744===-parseInt(e(495))/1*(-parseInt(e(468))/2)+parseInt(e(461))/3+parseInt(e(470))/4*(parseInt(e(475))/5)+parseInt(e(481))/6+-parseInt(e(499))/7+-parseInt(e(492))/8+-parseInt(e(464))/9*(-parseInt(e(494))/10))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const P=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[D(483)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function D(n,t){const e=A();return D=function(n,t){return e[n-=461]},D(n,t)}!function(){P(this,(function(){const n=D,t=new RegExp(n(497)),e=new RegExp(n(466),"i"),i=E(n(479));t.test(i+n(490))&&e.test(i+n(491))?E():i("0")}))()}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[D(483)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function A(){const n=["MeshBasicMaterial","1742856nlnRXg","log","apply","warn","__proto__","baseMaterial","while (true) {}","bind","exception","chain","input","12132400oeRAiW","$attrs","10DCUSEI","2yEryPZ","gger","function *\\( *\\)","counter","6898087EFotgI","2330430ZqLlSS","debu","toString","16710183OJTMqo","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rotation","66498Idpklz","hexGridMesh","32NgWjXO","info","TresPlaneGeometry","call","trace","276415rNLZoI","length","prototype","stateObject","init"];return(A=function(){return n})()}q(void 0,(function(){const n=D;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},i=[n(482),n(484),n(471),"error",n(489),"table",n(474)];for(let r=0;r<i[n(476)];r++){const t=q.constructor[n(477)][n(488)](q),o=i[r],s=e[o]||t;t[n(485)]=q[n(488)](q),t[n(463)]=s[n(463)][n(488)](s),e[o]=t}}))();const W=[T(467)],F=c({__name:T(469),setup(n){const t=T,e=new(u[t(480)]);return(n,i)=>{const o=t;return d(),m("TresMesh",{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=g(o(472),{args:[1,1]},null,-1)),(d(),p(x,null,{default:h((()=>[w(R,b({baseMaterial:v(e)},n[o(493)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(486)])])),_:1}))],8,W)}}});function E(n){function t(n){const e=D;if("string"==typeof n)return function(n){}[e(465)](e(487))[e(483)](e(498));1!==(""+n/n)[e(476)]||n%20==0?function(){return!0}[e(465)](e(462)+"gger")[e(473)]("action"):function(){return!1}[e(465)](e(462)+e(496))[e(483)](e(478)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const z=L;function X(){const n=["speed","108pvhYVH","1073580yKhIIj","81976eqefpT","111684wnoloy","hexGridGround",'{}.constructor("return this")( )',"while (true) {}","string","constructor","24600uHtWPp","70UgYbrf","test","gger","divisionScaleX","渐变宽度","渐变强度","division","TresCanvas","__proto__","console","debu","length","方向类别","stateObject","wavePow","toString","网格横向缩放","177339UfDQqj","color","网格宽度","chain","addBinding","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","610761qnSAbK","颜色取反","counter","direction","图片纹理","raisedBottom","8kUQhjQ","input","log","gridWeight","table","function *\\( *\\)","hasMaskTexture","call","apply","return (function() ","error","waveFrequency","bind","287075zuqtpE"];return(X=function(){return n})()}!function(n,t){const e=L,i=X();for(;;)try{if(128994===parseInt(e(481))/1+-parseInt(e(457))/2+parseInt(e(487))/3+-parseInt(e(493))/4*(-parseInt(e(452))/5)+-parseInt(e(455))/6+-parseInt(e(464))/7*(parseInt(e(456))/8)+parseInt(e(454))/9*(-parseInt(e(463))/10))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const Z=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function L(n,t){const e=X();return L=function(n,t){return e[n-=444]},L(n,t)}!function(){Z(this,(function(){const n=L,t=new RegExp(n(444)),e=new RegExp(n(486),"i"),i=$("init");t[n(465)](i+n(484))&&e[n(465)](i+n(494))?$():i("0")}))()}();const G=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[L(447)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();G(void 0,(function(){const n=L,t=function(){const n=L;let t;try{t=Function(n(448)+n(459)+");")()}catch(e){t=window}return t}(),e=t[n(473)]=t[n(473)]||{},i=[n(495),"warn","info",n(449),"exception",n(497),"trace"];for(let o=0;o<i.length;o++){const t=G[n(462)].prototype[n(451)](G),r=i[o],s=e[r]||t;t[n(472)]=G[n(451)](G),t[n(479)]=s[n(479)].bind(s),e[r]=t}}))();const O=c({__name:z(458),setup(n){const t=z,e=y({reflectivity:.8,showGridHelper:!1,scale:1}),s=y({color:"#de62f2",speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(458),expanded:!0});return a.addBinding(s,t(445),{label:t(491)}),a[t(485)](s,t(482),{label:"颜色"}),a[t(485)](s,t(453),{label:"速度",min:-5,max:5,step:.1}),a[t(485)](s,t(496),{label:t(483),min:.001,max:.5,step:.001}),a.addBinding(s,t(492),{label:t(468),min:.001,max:1,step:.001}),a.addBinding(s,t(450),{label:"分段",min:.001,max:1,step:.001}),a.addBinding(s,t(478),{label:t(469),min:1,max:30,step:.1}),a.addBinding(s,t(470),{label:"网格整体缩放",min:.1,max:50,step:.1}),a[t(485)](s,t(467),{label:t(480),min:.1,max:10,step:.1}),a[t(485)](s,"isReversed",{label:t(488)}),a[t(485)](s,t(490),{label:t(476),min:3,max:6,step:1}),(n,o)=>{const a=_(t(471));return d(),p(a,{clearColor:"#666666","window-size":""},{default:h((()=>[o[0]||(o[0]=g("TresPerspectiveCamera",{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),w(v(i),{enableDamping:"",autoRotate:""}),w(F,b(s,{scale:9}),null,16),(d(),p(x,null,{default:h((()=>[w(r,b({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function $(n){function t(n){const e=L;if(typeof n===e(461))return function(n){}[e(462)](e(460)).apply(e(489));1!==(""+n/n)[e(475)]||n%20==0?function(){return!0}.constructor(e(474)+e(466))[e(446)]("action"):function(){return!1}[e(462)](e(474)+"gger")[e(447)](e(477)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{O as default};

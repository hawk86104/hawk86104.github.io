import{b as e,m as a,a as t}from"./@tresjs.CIF1IzyY1748143687960.js";import{l as s,_ as o}from"./three-tile._4FQ8qTN1748143687960.js";import{s as r,c as i,a as n,i as l}from"./informationDiv.CbJSoKQT1748143687960.js";import{d as p,a5 as m,w as c,G as u,o as d,u as g,I as h,r as f,b as y,F as v,e as j,f as b,j as x,m as _,am as w,h as S,ak as T,al as D}from"./@vue.C_fjx3FT1748143687960.js";import{b9 as I,ab as k,a9 as B,V as M}from"./three.BAUoVmiW1748143687960.js";import{P}from"./tweakpane.C0HtAJSg1748143687960.js";import"./postprocessing.BT6kobhQ1748143687960.js";import"./@vueuse.CbR7AWyh1748143687960.js";/* empty css                                                                                    */import"./@fesjs.CQfPqpiA1748143687960.js";import"./vue-router.BZnpJAA51748143687960.js";import"./lodash-es.C7pWAXPe1748143687960.js";import"./@qlin.q6OWdsQV1748143687960.js";import"./pinia.DEEYAsso1748143687960.js";import"./@babel.BPq7uOAK1748143687960.js";import"./@floating-ui.BFjFSAYt1748143687960.js";import"./@juggle.CcBCnTIR1748143687960.js";const G=["position"],L=["scale","material","rotateX","position-y"],z=p({__name:"radraImgShow",props:{map:{},height:{default:100},opacity:{default:.6}},async setup(a){let t,s;const o=a,i=new I({displacementMap:new B,transparent:!0,side:k,opacity:o.opacity,displacementScale:.5,displacementBias:0});i.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * displacementScale + displacementBias );")};const n=o.map.geo2pos(new M(105,34,0));n.applyMatrix4(o.map.matrix);const l=r(o.map,{x:67,y:11},{x:140,y:57},o.height),p=[];for(let e=0;e<9;e++)p.push(`https://opensource.cdn.icegl.cn/images/simpleGIS/QPFRef_202405311${e}40.png`);let f=0;const y=([t,s]=m((()=>e(p))),t=await t,s(),t);i.map=y[f],c((()=>[o.color,o.opacity]),(([e,a])=>{i.opacity=a}));let v=null,j=!1;return j?(clearInterval(v),v=null,j=!1):(v=setInterval((()=>{f=f<p.length-1?f+1:0,i.map=y[f],i.needsUpdate=!0,console.log(f)}),1e3),j=!0),(e,a)=>(d(),u("TresGroup",{position:[...g(n)]},[h("TresMesh",{scale:[g(l).x,g(l).y,e.height],material:g(i),rotateX:-Math.PI/2,renderOrder:9999,"position-y":e.height/5},a[0]||(a[0]=[h("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)]),8,L)],8,G))}}),W=["object"],C="pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",F=p({__name:"mapBoxShow3",setup(e){const t=f({height:200,opacity:1}),r=new P({title:"参数"});r.addBinding(t,"height",{label:"高度",min:10,max:300,step:1}),r.addBinding(t,"opacity",{label:"透明度",min:0,max:1,step:.1}),new s.MapBoxSource({token:C,dataType:"image",style:"mapbox.satellite"}),new s.MapBoxSource({token:C,dataType:"terrain-rgb",style:"mapbox.terrain-rgb",maxLevel:15});const l=new o({imgSource:[new s.GDSource({style:"6"}),new s.GDSource({style:"8"})],lon0:90,minLevel:2,maxLevel:20});l.rotateX(-Math.PI/2);const p=new M(105,34,0),m=new M(110,0,1e4),S=l.localToWorld(l.geo2pos(p)),T=l.localToWorld(l.geo2pos(m)),D=y(),{camera:I,controls:k,scene:B,renderer:G}=a();return I.value&&I.value.position.copy(T),c((()=>k.value),(e=>{e&&(e.target.copy(S),i(e,I.value,B.value))})),c((()=>D.value),(e=>{e&&e.target.position.copy(S)})),n(I.value,G.value.domElement,l),(e,a)=>(d(),u(v,null,[h("TresDirectionalLight",{ref_key:"tdLight",ref:D,position:[0,2e3,1e3],intensity:1},null,512),h("primitive",{object:g(l)},null,8,W),(d(),j(w,null,{default:b((()=>[x(z,_({map:g(l)},t),null,16,["map"])])),_:1}))],64))}}),A=p({__name:"radraImg",setup(e){const a=f({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=f({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,o)=>{const r=S("TresCanvas");return d(),u(v,null,[x(r,_(a,{"window-size":""}),{default:b((()=>[o[0]||(o[0]=h("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),x(g(t),T(D(s)),null,16),o[1]||(o[1]=h("TresAmbientLight",{intensity:1},null,-1)),x(F)])),_:1},16),x(l)],64)}}});export{A as default};

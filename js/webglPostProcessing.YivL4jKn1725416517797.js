import{i as n}from"./ice-utils.eabwUZ1i1725416517797.js";import{_ as t,m as e}from"./gl-matrix.AFK4LjqA1725416517797.js";import{P as o}from"./tweakpane.yHWGBmom1725416517797.js";import{d as r,r as i,q as a,o as c,E as s,L as u,u as f}from"./@vue._6MD2XyK1725416517797.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=g;!function(n,t){const e=g,o=R();for(;;)try{if(145130===-parseInt(e(564))/1+parseInt(e(471))/2*(-parseInt(e(516))/3)+parseInt(e(467))/4*(parseInt(e(524))/5)+-parseInt(e(518))/6+parseInt(e(477))/7+parseInt(e(555))/8*(-parseInt(e(469))/9)+parseInt(e(502))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=g,t=new RegExp(n(490)),e=new RegExp(n(486),"i"),o=A(n(543));t[n(570)](o+n(511))&&e.test(o+"input")?A():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[g(553)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();_(void 0,(function(){const n=g,t=function(){const n=g;let t;try{t=Function(n(550)+n(496)+");")()}catch(e){t=window}return t}(),e=t[n(546)]=t.console||{},o=[n(478),"warn",n(569),n(540),n(532),n(465),n(501)];for(let r=0;r<o.length;r++){const t=_.constructor[n(475)].bind(_),i=o[r],a=e[i]||t;t[n(503)]=_[n(495)](_),t[n(538)]=a[n(538)][n(495)](a),e[i]=t}}))();const x={id:d(479)},p=["src"];function R(){const n=["CLAMP_TO_EDGE","vertexAttribPointer","COLOR_BUFFER_BIT","createTexture","info","test","clear","create","RGBA","width","FRAMEBUFFER","slider","table","ELEMENT_ARRAY_BUFFER","156wrddVe","scale","2105793dQtiOQ","ortho","237758KOsMOy","getElementById","uView","FLOAT","prototype","TEXTURE_WRAP_T","801675pBlDYG","log","canvaswebgl","bindTexture","hidden","bufferData","innerWidth","innerHeight","framebufferTexture2D","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","mat4","offset_left_bottom","function *\\( *\\)","BYTES_PER_ELEMENT","TEXTURE_WRAP_S","getUniformLocation","texParameteri","bind",'{}.constructor("return this")( )',"value","call","UNSIGNED_BYTE","bindBuffer","trace","4944670fBvNzY","__proto__","offset_right_bottom","stateObject","addBlade","addBinding","img","NEAREST","offset_left_top","chain","enable","webgl","blendFunc","TEXTURE_MIN_FILTER","3dVHCjY","logo-texture","1143660iFrjYF","clearColor","offset_right_top","uProjection","inline","debu","30725UjQAYU","querySelector","texImage2D","useProgram","createBuffer","BLEND","none","counter","exception","uniformMatrix4fv","canvas","height","mixParam","bindFramebuffer","toString","constructor","error","gger","uModel","init","enableVertexAttribArray","TRIANGLES","console","lookAt","string","translate","return (function() ","change","length","apply","ONE_MINUS_SRC_ALPHA","8spuAXd","是否后处理","uniform1f","TEXTURE_2D","drawElements","ARRAY_BUFFER","#canvaswebgl","TEXTURE_MAG_FILTER","getContext","160051zXpcnD"];return(R=function(){return n})()}function g(n,t){const e=R();return(g=function(n,t){return e[n-=459]})(n,t)}const T=r({__name:"webglPostProcessing",setup(r){const E=d;let _,R,g,T,A,F,b,y,v,h,B,w,U;const P=1,C=.71,I=.76,D=new o({title:"参数"}),M=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[E(506)]({view:E(464),label:"颜色",min:0,max:1,value:.5}).on("change",(n=>{const t=E;X(),R[t(557)](w,n[t(497)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D[E(507)](M,E(481),{label:E(556)}),D[E(507)](M,E(520),{picker:E(522),x:{min:0,max:1},y:{min:0,max:1}}).on(E(551),(n=>{const t=E;S[0]=M.offset_right_top.x,S[1]=M[t(520)].y,X()})),D.addBinding(M,E(504),{picker:E(522),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=E;S[5]=M[t(504)].x,S[6]=M[t(504)].y,X()})),D.addBinding(M,E(489),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(551),(n=>{const t=E;S[10]=M[t(489)].x,S[11]=M[t(489)].y,X()})),D[E(507)](M,E(510),{picker:E(522),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(551),(n=>{const t=E;S[15]=M[t(510)].x,S[16]=M[t(510)].y,X()})),a((()=>{L()}));const L=function(){const t=E;_=document[t(525)](t(561)),_.width=window[t(483)],_[t(535)]=window[t(484)],R=_[t(563)](t(513)),R&&(function(){const t=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);T=O(e,o),g=n(R,l,m),v=R[t(493)](g,t(521)),h=R.getUniformLocation(g,t(473)),B=R[t(493)](g,t(542)),U=j(document[t(472)](t(517)))}(),X(),R[t(512)](R[t(529)]),R[t(514)](R.SRC_ALPHA,R[t(554)]),N())};function N(){const n=E;R[n(537)](R[n(463)],b),R[n(519)](P,C,I,1),R.clear(R[n(567)]),function(){const n=E;R[n(527)](g),R[n(500)](R[n(560)],T);const o=t[n(488)].create();e[n(470)](o,0,_[n(462)],_[n(535)],0,.1,100),R[n(533)](v,!1,o);const r=t[n(488)].create();t[n(488)][n(547)](r,[0,0,1],[0,0,0],[0,1,0]),R.uniformMatrix4fv(h,!1,r),Y(U,600,600),Y(U,400,400)}(),R[n(537)](R.FRAMEBUFFER,null),M[n(481)]&&(R[n(459)](R[n(567)]),R[n(519)](0,0,1,1),R.bindBuffer(R.ARRAY_BUFFER,A),R[n(527)](F),R[n(480)](R[n(558)],y)),R.drawElements(R[n(545)],6,R[n(499)],0),requestAnimationFrame(N)}function Y(n,o,r){const i=E;let a=t[i(488)][i(460)]();e[i(549)](a,a,[o,r,0]),e[i(468)](a,a,[250,250,0]),R[i(533)](B,!1,a),R.bindTexture(R[i(558)],n),R[i(559)](R[i(545)],6,R[i(499)],0)}function X(){const t=E,e=new Uint8Array([0,1,2,0,2,3]);A=O(S,e),F=n(R,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=R[t(493)](F,t(536)),R[t(493)](F,"color"),function(){const n=E;y=j(_),b=R.createFramebuffer(),R.bindFramebuffer(R.FRAMEBUFFER,b),R[n(485)](R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R[n(558)],y,0),R[n(537)](R[n(463)],null)}()}function j(n){const t=E,e=R[t(568)]();return R[t(480)](R.TEXTURE_2D,e),n instanceof HTMLImageElement?R.texImage2D(R[t(558)],0,R[t(461)],R[t(461)],R[t(499)],n):R[t(526)](R.TEXTURE_2D,0,R[t(461)],n[t(462)],n[t(535)],0,R.RGBA,R[t(499)],null),R[t(494)](R.TEXTURE_2D,R[t(515)],R[t(509)]),R.texParameteri(R.TEXTURE_2D,R[t(562)],R.NEAREST),R[t(494)](R[t(558)],R[t(492)],R[t(565)]),R[t(494)](R.TEXTURE_2D,R[t(476)],R[t(565)]),e}function O(n,t){const e=E,o=R[e(528)]();R[e(500)](R.ARRAY_BUFFER,o),R[e(482)](R[e(560)],n,R.STATIC_DRAW);const r=3*Float32Array[e(491)]+2*Float32Array[e(491)];R[e(566)](0,3,R[e(474)],!1,r,0),R[e(544)](0),R[e(566)](1,2,R[e(474)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),R[e(544)](1);const i=R.createBuffer();return R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,i),R[e(482)](R[e(466)],t,R.STATIC_DRAW),R[e(500)](R.ARRAY_BUFFER,null),o}return(n,t)=>{const e=E;return c(),s(e(534),x,[u(e(508),{id:e(517),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(530)}},null,8,p)])}}});function A(n){function t(n){const e=g;if(typeof n===e(548))return function(n){}.constructor("while (true) {}")[e(553)](e(531));1!==(""+n/n)[e(552)]||n%20==0?function(){return!0}[e(539)](e(523)+e(541))[e(498)](e(487)):function(){return!1}.constructor(e(523)+e(541)).apply(e(505)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as default};

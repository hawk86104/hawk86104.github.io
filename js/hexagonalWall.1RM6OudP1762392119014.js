import{P as e}from"./tweakpane.CqZAnw7f1762392119014.js";import{F as a,r as s,N as o,_ as t,K as r}from"./@tresjs.hGs-POUu1762392119014.js";import"./OimoPhysicsBuffer.Bm1-uN4Y1762392119014.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.CNrw3GKO1762392119014.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DZ0IZ-Ox1762392119014.js";import"./Resource.S1Cir9aE1762392119014.js";import"./PackedMipMapGenerator.vFejDEUx1762392119014.js";import{o as n,V as l,aE as p,k as m,cO as c,cM as d,cN as u,d as h,dg as g,dh as f}from"./three.CDsL_76W1762392119014.js";import{g as _}from"./gsap.CY1N3EIL1762392119014.js";import{d as j,w as v,G as w,H as y,u as M,o as P,r as x,g as b,b as z,e as I,I as k,h as B,a9 as C,aa as G}from"./@vue.DQUdVfVE1762392119014.js";import"./postprocessing.fZnJ7mZA1762392119014.js";import"./@vueuse.CnFTmRHc1762392119014.js";import"./oimophysics.CfVKSiAm1762392119014.js";import"./dither.glsl.tNAdkJUa1762392119014.js";import"./Reflector.CNoJMSWJ1762392119014.js";import"./vite-plugin-qiankun.B06WoCqG1762392119014.js";import"./utils.CNife3_q1762392119014.js";import"./object-hash.CF39HzT91762392119014.js";import"./@amap.fjyZdsU91762392119014.js";import"./jszip.LyM0NlAT1762392119014.js";import"./three-stdlib.DtFXvC-s1762392119014.js";const T=["object"],U=j({__name:"hexagonalWall",props:{color:{default:"#7432B4"}},setup(e){const{renderer:r,scene:i,camera:j,sizes:x}=a(),b=e;let z=null;const{textures:I,isLoading:k}=s(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/metal_plate_diff_1k.jpg"]),{state:B}=o("https://opensource.cdn.icegl.cn/model/floor/baseModelI.glb",{draco:!0,decoderPath:"./draco/"});let C=null;v([B,I,k],([e,a,s])=>{e&&a&&!s&&(C=e.scene,C.traverse(e=>{if(e instanceof n){const s=e.position.clone(),o=20+30*Math.random(),t=Math.random()*Math.PI*2,r=20*(Math.random()-.5),i=new l(s.x+Math.cos(t)*o,s.y+r,s.z+Math.sin(t)*o);G.push({mesh:e,originalPosition:s,scatteredPosition:i}),e.position.copy(i),e.name.includes("_")?(a[0].wrapS=p,a[0].wrapT=p,a[0].repeat.set(10,10),e.material.map=I.map,e.material.needsUpdate=!0,e.material.emissive=new m("#7432B4"),e.material.emissiveIntensity=3.5):(a[1]&&(a[1].wrapS=p,a[1].wrapT=p,a[1].repeat.set(10,10),e.material.map=a[1]),e.material.color=new m("#7432B4"),e.material.metalness=.8,e.material.roughness=.2,e.material.envMapIntensity=2.5,e.material.needsUpdate=!0)}}),O(),E(),U())});const G=[],U=()=>{if(0===G.length)return;const e=_.timeline();G.forEach((a,s)=>{const o=.8*Math.random(),t={x:(Math.random()-.5)*Math.PI*2,y:(Math.random()-.5)*Math.PI*2,z:(Math.random()-.5)*Math.PI*2};a.mesh.rotation.set(t.x,t.y,t.z),e.to(a.mesh.position,{x:a.originalPosition.x,y:a.originalPosition.y,z:a.originalPosition.z,duration:3,ease:"power2.out",delay:o},0),e.to(a.mesh.rotation,{x:0,y:0,z:0,duration:3,ease:"power2.out",delay:o},0)}),e.call(()=>{D()}),console.log(`开始拼合动画，共 ${G.length} 个mesh`)},D=()=>{G.forEach((e,a)=>{_.to(e.mesh.position,{z:e.originalPosition.z+3+a/50,duration:2,repeat:-1,yoyo:!0,ease:"power1.inOut"})}),console.log("Z轴微动动画已启动")},E=()=>{if(!r||!j.value||!x.width.value)return;z=new c(r);const e=new d(i.value,j.value);z.addPass(e);const a=new u(new h(x.width.value,x.height.value),.6,.05,.25);z.addPass(a)},O=()=>{const e=new g(r),a=new f,s=e.fromScene(a).texture;i.value.environment=s,C.traverse(e=>{e instanceof n&&e.material&&(e.material.envMap=s,e.material.needsUpdate=!0)}),a.dispose()},{onRender:R}=t();return R(()=>{z&&z.render()}),v(()=>[b.color],([e])=>{C.traverse(a=>{a instanceof n&&a.material&&(a.material.color=new m(e),a.material.emissive=new m(e))})}),(e,a)=>M(B)?(P(),w("primitive",{key:0,object:M(B)?.scene,"position-y":.01},null,8,T)):y("",!0)}}),D=j({__name:"hexagonalWall",setup(a){const s=x({color:"#7432B4"}),o=new e({expanded:!0}),t={reflectivity:1,showGridHelper:!1,scale:2,renderMode:"manual"};return o.addBinding(s,"color",{label:"颜色"}),(e,a)=>{const o=b("TresCanvas");return P(),z(o,{clearColor:"#000000","window-size":""},{default:I(()=>[a[0]||(a[0]=k("TresPerspectiveCamera",{position:[2,2,0],fov:45,near:.1,far:1e4},null,-1)),B(M(r),{enableDamping:""}),B(M(U),C(G(s)),null,16),B(i,C(G(t)),null,16)]),_:1})}}});export{D as default};

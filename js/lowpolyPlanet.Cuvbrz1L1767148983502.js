import{importShared as r}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_l as y,Kk as z,Qz as E}from"./index.DTe2qqjO1767148983502.js";import{_sfc_main as P}from"./default.vue_vue_type_script_setup_true_lang.Bjy6WD1C1767148983502.js";import"./customShaderMaterial.vue_vue_type_script_setup_true_lang.B7dQ_CiZ1767148983502.js";import"./index.vue_vue_type_script_setup_true_lang.CjsHShHS1767148983502.js";import{useGLTF as v}from"./index.Bk2zy1aS1767148983502.js";const{withAsyncContext:R,defineComponent:A}=await r("vue"),{unref:F,openBlock:L,createElementBlock:N}=await r("vue"),T=["object"],{watch:V,toRaw:j}=await r("vue"),W=.2,I=A({__name:"airplane",props:{planet:{}},async setup(u){let t,l;const s=u,{scene:o}=([t,l]=R(()=>v("./plugins/earthSample/model/lowpolyPlanet/airplane.gltf")),t=await t,l(),t),e=o;e.rotation.set(0,Math.PI,0),o.traverse(a=>{a.isMesh&&(a.castShadow=!0)}),e.updateMatrixWorld();const{onBeforeRender:c}=y();V(()=>s.planet,a=>{if(!a)return;a.geometry.computeBoundingSphere();const i=Math.abs(a.geometry.boundingSphere?.radius|1);e.position.set(i,0,0),e.lookAt(a.position)});let n=0;return c(({delta:a})=>{if(!e||!s.planet)return;const i=Math.abs(s.planet.geometry.boundingSphere.radius)+.5;n+=a*W;const w=i*Math.cos(n),p=i*Math.sin(n);e.position.x=w,e.position.z=p,e.rotation.z=-Math.PI/2,e.rotation.y=-n,e.updateMatrixWorld()}),(a,i)=>(L(),N("primitive",{object:j(F(e))},null,8,T))}}),{withAsyncContext:G,defineComponent:D}=await r("vue"),{unref:K,openBlock:Q,createElementBlock:q}=await r("vue"),H=["object"],{watch:J,toRaw:O}=await r("vue"),U=D({__name:"cloud",props:{planet:{}},async setup(u){let t,l;const s=u,{scene:o}=([t,l]=G(()=>v("./plugins/earthSample/model/lowpolyPlanet/cloud.gltf")),t=await t,l(),t),e=o.children[0];e.castShadow=!0;function c(p,_){const m=Math.random()*(_-p)+p;return Math.random()<.5?-m:m}e.position.set(c(-8,8),c(.5,1),c(-8,8));const n=c(.5,1);e.scale.set(n,n,n),e.updateMatrixWorld(),J(()=>s.planet,p=>{p&&(e.lookAt(p.position),e.updateMatrixWorld())});const{onBeforeRender:a}=y();let i=c(-1,1)*Math.PI;const w=Math.random()/10;return a(({delta:p})=>{if(!e)return;const _=Math.abs(s.planet.geometry.boundingSphere.radius-.5);i+=p*w;const m=_*Math.cos(i),b=_*Math.sin(i);e.position.x=m,e.position.z=b,e.rotation.y=-i,e.lookAt(s.planet.position),e.updateMatrixWorld()}),(p,_)=>(Q(),q("primitive",{object:O(K(o)),"cast-shadow":""},null,8,H))}}),{withAsyncContext:X,defineComponent:Y}=await r("vue"),{unref:f,createElementVNode:Z,createVNode:$,renderList:ee,Fragment:B,openBlock:C,createElementBlock:x}=await r("vue"),te=["object"],{toRaw:g}=await r("vue"),oe=Y({__name:"planet",async setup(u){let t,l;const{nodes:s}=([t,l]=X(()=>v("./plugins/earthSample/model/lowpolyPlanet/planet.gltf")),t=await t,l(),t),o=s.Planet,e=s.Icosphere;o.traverse(n=>{n.isMesh&&(n.receiveShadow=!0)});const{onBeforeRender:c}=y();return c(({delta:n})=>{o&&(o.rotation.y+=n*.04,o.rotation.z+=n*.02,o.rotation.x+=n*.05,o.updateMatrixWorld())}),(n,a)=>(C(),x(B,null,[Z("primitive",{object:g(f(o))},null,8,te),$(I,{planet:g(f(e))},null,8,["planet"]),(C(),x(B,null,ee([1,2,3,4,5,6,7,8,9],i=>$(U,{key:i,planet:g(f(e))},null,8,["planet"])),64))],64))}}),{defineComponent:ne}=await r("vue"),{createVNode:d,createElementVNode:h,unref:k,Suspense:ae,withCtx:M,openBlock:S,createBlock:re,resolveComponent:se,mergeProps:ie,Fragment:le,createElementBlock:ce}=await r("vue"),{PCFSoftShadowMap:pe,SRGBColorSpace:ue}=await r("three"),{shallowRef:_e}=await r("vue"),ye=ne({__name:"lowpolyPlanet",setup(u){const t={clearColor:"#11101B",shadows:!0,alpha:!1,outputColorSpace:ue,shadowMapType:pe,useLegacyLights:!0},l=_e(0),s=({delta:o})=>{l.value+=.02*o};return(o,e)=>{const c=se("TresCanvas");return S(),ce(le,null,[d(P),d(c,ie(t,{"window-size":"",onLoop:s}),{default:M(()=>[e[0]||(e[0]=h("TresPerspectiveCamera",{position:[0,1,5],fov:75,near:.1,far:1e3},null,-1)),d(k(z)),e[1]||(e[1]=h("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),(S(),re(ae,null,{default:M(()=>[d(oe)]),_:1})),d(k(E),{rotation:[0,l.value,0],radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0},null,8,["rotation"]),e[2]||(e[2]=h("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),e[3]||(e[3]=h("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1))]),_:1},16)],64)}}});export{ye as default};

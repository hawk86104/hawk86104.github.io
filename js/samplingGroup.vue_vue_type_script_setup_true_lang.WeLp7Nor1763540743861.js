import{n as e,c as a,r as i,f as t}from"./ncFileReader.tzMp_RC71763540743861.js";import{u as n}from"./colorList.DbCLsRg71763540743861.js";import{_ as s}from"./volumeMesh.vue_vue_type_script_setup_true_lang.BxWH--h11763540743861.js";import{P as r}from"./tweakpane.CqZAnw7f1763540743861.js";import{d as l,a8 as o,a as u,w as m,H as p,o as d,F as c,J as v,h as _,u as g,ac as h,ao as f}from"./@vue.Co_gxueH1763540743861.js";import{f as x,V as T,ae as y}from"./three.rXKzP9fQ1763540743861.js";const M=["visible"],w=["position","rotate-y","scale"],b=["position","rotate-x","scale"],j=["position","scale"],P=l({__name:"samplingGroup",async setup(l){let P,z;const B=n(),F={uniforms:{u_size:{value:new T(1,1,1)},u_clim:{value:new x(.05,0)},u_data:{value:null},u_cmdata:{value:B.updateTransferFunction()}},color:16777215,transparent:!0,depthWrite:!0,depthTest:!0,opacity:1,side:y,vertexShader:"uniform vec3 u_size;\nvarying vec3 v_position;\nvoid main() {\n  vec4 position4 = modelMatrix * vec4(position, 1.);\n  v_position = position4.xyz / u_size;\n  gl_Position = projectionMatrix * viewMatrix * position4;\n}",fragmentShader:"precision highp float;\nprecision mediump sampler3D;\nvarying vec3 v_position;\nuniform vec2 u_clim;\nuniform sampler3D u_data;\nuniform sampler2D u_cmdata;\nvec4 apply_colormap(float val) {\n\t\tval = (val - u_clim[0]) / (u_clim[1] - u_clim[0]);\n\t\treturn texture2D(u_cmdata, vec2(val, 0.5));\n}\nvoid main() {\n\t\tfloat val = texture(u_data, v_position).r;\n\t\tgl_FragColor = apply_colormap(val);\n}"},S=([P,z]=o(()=>i("https://opensource.cdn.icegl.cn/ncFile/2003.nc")),P=await P,z(),P),G=([P,z]=o(()=>t(S,"THT")),P=await P,z(),P),k=e(G),D=a(k),C=D?[D.image.width,D.image.height,D.image.depth]:[0,0,0];F.uniforms.u_data.value=D,F.uniforms.u_size.value.set(C[0],C[1],C[2]);const I=D.image.width,O=D.image.height,H=D.image.depth,q=u(0),J=u(0),L=u(0),R=(new r).addTab({pages:[{title:"面剖"},{title:"三维体"}]}),V=R.pages[0],W=u(!0);return V.addBinding(W,"value",{label:"显示剖面"}),V.addBinding(F.uniforms.u_clim.value,"x",{label:"clim1",min:.01,max:.6,step:.001}),V.addBinding(F.uniforms.u_clim.value,"y",{label:"clim2",min:-.1,max:.03,step:.001}),V.addBinding(q,"value",{label:"x剖面",min:0,max:I,step:.1}),V.addBinding(J,"value",{label:"y剖面",min:0,max:O,step:.1}),V.addBinding(L,"value",{label:"z剖面",min:0,max:3,step:.01}),m(()=>B.colorsStops,()=>{F.uniforms.u_cmdata.value=B.updateTransferFunction()},{deep:!0,immediate:!0}),(e,a)=>(d(),p(c,null,[v("TresGroup",{visible:W.value},[v("TresMesh",{position:[q.value,g(O)/2,g(H)/2],"rotate-y":-Math.PI/2,scale:[g(H),g(O),1],renderOrder:99993},[a[0]||(a[0]=v("TresPlaneGeometry",{args:[1,1]},null,-1)),v("TresShaderMaterial",h(f(F)),null,16)],8,w),v("TresMesh",{position:[g(I)/2,J.value,g(H)/2],"rotate-x":-Math.PI/2,scale:[g(I),g(H),1],renderOrder:99992},[a[1]||(a[1]=v("TresPlaneGeometry",{args:[1,1]},null,-1)),v("TresShaderMaterial",h(f(F)),null,16)],8,b),v("TresMesh",{position:[g(I)/2,g(O)/2,L.value],scale:[g(I),g(O),1],renderOrder:99991},[a[2]||(a[2]=v("TresPlaneGeometry",{args:[1,1]},null,-1)),v("TresShaderMaterial",h(f(F)),null,16)],8,j)],8,M),_(s,{texture:g(D),paneControl:g(R).pages[1]},null,8,["texture","paneControl"])],64))}});export{P as _};

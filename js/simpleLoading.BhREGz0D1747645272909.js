import{e as t,a as e,d as o}from"./@tresjs.BuwLZoeX1747645272909.js";import{i as a}from"./index.CWwaF-yP1747645272909.js";import{d as s,w as n,G as i,o as r,u as l,F as p,I as u,j as d,W as m,h as c,f as h,e as g,H as j,m as f}from"./@vue.C_fjx3FT1747645272909.js";import{l as M}from"./yangyangLoading.MLeZBCwq1747645272909.js";import"./three.BAUoVmiW1747645272909.js";import"./postprocessing.CLnpf0401747645272909.js";import"./@vueuse.BPE9cXaJ1747645272909.js";import"./utils.CTH5_G9K1747645272909.js";import"./@fesjs.2UsKThXV1747645272909.js";import"./vue-router.DVA_Bc_E1747645272909.js";import"./lodash-es.C7pWAXPe1747645272909.js";import"./@qlin.q6OWdsQV1747645272909.js";import"./pinia.B5Cc8YY_1747645272909.js";import"./@babel.BPq7uOAK1747645272909.js";import"./@floating-ui.BFjFSAYt1747645272909.js";import"./@juggle.CcBCnTIR1747645272909.js";import"./three-mesh-ui.module.BZl72Iws1747645272909.js";const y=["object"],b=s({__name:"airplane",props:{planet:{}},setup(e){const o=e,{scene:s}=a.getItem("airplane.gltf"),p=s;p.rotation.set(0,Math.PI,0),s.traverse((t=>{t.isMesh&&(t.castShadow=!0)})),p.updateMatrixWorld();const{onLoop:u}=t();n((()=>o.planet),(t=>{if(!t)return;t.geometry.computeBoundingSphere();const e=Math.abs(1|t.geometry.boundingSphere?.radius);p.position.set(e,0,0),p.lookAt(t.position)}));let d=0;return u((({delta:t})=>{if(!p||!o.planet)return;const e=Math.abs(o.planet.geometry.boundingSphere.radius)+.5;d+=.2*t;const a=e*Math.cos(d),s=e*Math.sin(d);p.position.x=a,p.position.z=s,p.rotation.z=-Math.PI/2,p.rotation.y=-d,p.updateMatrixWorld()})),(t,e)=>(r(),i("primitive",{object:l(p)},null,8,y))}}),w=["object"],L=s({__name:"cloud",props:{planet:{}},setup(e){const o=e,{scene:s}=a.getItem("cloud.gltf"),p=s.children[0];function u(t,e){const o=Math.random()*(e-t)+t;return Math.random()<.5?-o:o}p.castShadow=!0,p.position.set(u(-8,8),u(.5,1),u(-8,8));const d=u(.5,1);p.scale.set(d,d,d),p.updateMatrixWorld(),n((()=>o.planet),(t=>{t&&(p.lookAt(t.position),p.updateMatrixWorld())}));const{onLoop:m}=t();let c=u(-1,1)*Math.PI;const h=Math.random()/10;return m((({delta:t})=>{if(!p)return;const e=Math.abs(o.planet.geometry.boundingSphere.radius-.5);c+=t*h;const a=e*Math.cos(c),s=e*Math.sin(c);p.position.x=a,p.position.z=s,p.rotation.y=-c,p.lookAt(o.planet.position),p.updateMatrixWorld()})),(t,e)=>(r(),i("primitive",{object:l(s),"cast-shadow":""},null,8,w))}}),v=["object"],S=s({__name:"planet",setup(e){const{nodes:o}=a.getItem("planet.gltf"),s=o.Planet,n=o.Icosphere;s.traverse((t=>{t.isMesh&&(t.receiveShadow=!0)}));const{onLoop:c}=t();return c((({delta:t})=>{s&&(s.rotation.y+=.04*t,s.rotation.z+=.02*t,s.rotation.x+=.05*t,s.updateMatrixWorld())})),(t,e)=>(r(),i(p,null,[u("primitive",{object:l(s)},null,8,v),d(b,{planet:l(n)},null,8,["planet"]),(r(),i(p,null,m([1,2,3,4,5,6,7,8,9],(t=>d(L,{key:t,planet:l(n)},null,8,["planet"]))),64))],64))}}),x=s({__name:"simpleLoading",setup(t){const s={alpha:!1,clearColor:"#11101B",shadows:!0,useLegacyLights:!0};return a.loadResources([{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/planet.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/airplane.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/cloud.gltf"}]),(t,n)=>{const m=c("TresCanvas");return r(),i(p,null,[d(l(M),{useResourceManager:""}),d(m,f(s,{"window-size":""}),{default:h((()=>[n[0]||(n[0]=u("TresPerspectiveCamera",{position:[0,.5,3],fov:75,near:.1,far:1e3},null,-1)),d(l(e)),n[1]||(n[1]=u("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),n[2]||(n[2]=u("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),n[3]||(n[3]=u("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1)),d(l(o),{radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0}),l(a).hasAllFinished.value?(r(),g(S,{key:0})):j("",!0)])),_:1},16)],64)}}});export{x as default};

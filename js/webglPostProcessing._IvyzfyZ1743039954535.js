import{i as n}from"./ice-utils.zMP9MR4u1743039954535.js";import{_ as t,o as e,m as o}from"./gl-matrix.1JCPoTzf1743039954535.js";import{P as r}from"./tweakpane.ivGeiIdz1743039954535.js";import{d as i,r as a,q as c,o as s,H as u,N as f,u as l}from"./@vue.C4dqouNn1743039954535.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",d="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=g;!function(n,t){const e=g,o=p();for(;;)try{if(538989===-parseInt(e(505))/1+parseInt(e(477))/2*(parseInt(e(471))/3)+parseInt(e(463))/4*(-parseInt(e(488))/5)+-parseInt(e(544))/6*(parseInt(e(517))/7)+-parseInt(e(512))/8+parseInt(e(475))/9*(-parseInt(e(529))/10)+-parseInt(e(530))/11*(-parseInt(e(510))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[g(454)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=g,t=new RegExp(n(457)),e=new RegExp(n(485),"i"),o=b(n(523));t.test(o+n(481))&&e[n(469)](o+n(543))?b():o("0")}))()}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function p(){const n=["texParameteri","SRC_ALPHA","input","1344bEvFLH","mat4","NEAREST","ARRAY_BUFFER","enableVertexAttribArray","createFramebuffer","canvaswebgl","addBinding","uView","TEXTURE_MAG_FILTER","CLAMP_TO_EDGE","offset_left_bottom","constructor","webglPostProcessing","action","apply","change","trace","function *\\( *\\)","info","translate","hidden","length","TEXTURE_2D","14396mnlIaL","bindFramebuffer","RGBA","__proto__","framebufferTexture2D","ONE_MINUS_SRC_ALPHA","test","toString","3wCWXPk","exception","BLEND","FLOAT","1512xHkTTC","useProgram","1674316OPotik","while (true) {}","addBlade","TEXTURE_MIN_FILTER","chain","bindTexture","offset_left_top","width","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","BYTES_PER_ELEMENT","texImage2D","520iStBxG","COLOR_BUFFER_BIT","offset_right_top","UNSIGNED_BYTE","console","STATIC_DRAW","getElementById","createBuffer","bind","uniform1f","error","table","logo-texture","lookAt","bindBuffer","clearColor","offset_right_bottom","818627lBEfoI","getUniformLocation","是否后处理","uniformMatrix4fv","gger","31471476HHZAWx","TEXTURE_WRAP_S","7814824xZykUh","ELEMENT_ARRAY_BUFFER","COLOR_ATTACHMENT0","log","innerHeight","637qgfsED","mixParam","height","create","webgl","clear","init","FRAMEBUFFER","counter",'{}.constructor("return this")( )',"inline","value","43490ccOnhb","11gJPdKo","#canvaswebgl","string","color","TRIANGLES","querySelector","return (function() ","call","src","debu","vertexAttribPointer"];return(p=function(){return n})()}function g(n,t){const e=p();return g=function(n,t){return e[n-=449]},g(n,t)}E(void 0,(function(){const n=g,t=function(){const n=g;let t;try{t=Function(n(536)+n(526)+");")()}catch(e){t=window}return t}(),e=t[n(492)]=t[n(492)]||{},o=[n(515),"warn",n(458),n(498),n(472),n(499),n(456)];for(let r=0;r<o[n(461)];r++){const t=E[n(451)].prototype[n(496)](E),i=o[r],a=e[i]||t;t[n(466)]=E[n(496)](E),t[n(470)]=a.toString.bind(a),e[i]=t}}))();const T={id:x(550)},A=[x(538)],R=i({__name:x(452),setup(i){const _=x;let E,p,g,R,b,y,v,F,h,w,I,P,C;const B=1,S=.71,L=.76,U=new r({title:"参数"}),D=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[_(479)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(_(455),(n=>{const t=_;G(),p[t(497)](P,n[t(528)])}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U.addBinding(D,_(460),{label:_(507)}),U[_(551)](D,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(_(455),(n=>{const t=_;N[0]=D[t(490)].x,N[1]=D[t(490)].y,G()})),U.addBinding(D,_(504),{picker:_(527),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(455),(n=>{const t=_;N[5]=D[t(504)].x,N[6]=D[t(504)].y,G()})),U[_(551)](D,_(450),{picker:_(527),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=_;N[10]=D[t(450)].x,N[11]=D[t(450)].y,G()})),U[_(551)](D,"offset_left_top",{picker:_(527),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(455),(n=>{const t=_;N[15]=D[t(483)].x,N[16]=D[t(483)].y,G()})),c((()=>{M()}));const M=function(){const t=_;E=document[t(535)](t(531)),E.width=window.innerWidth,E[t(519)]=window[t(516)],p=E.getContext(t(521)),p&&(function(){const t=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=j(e,o),g=n(p,m,d),h=p[t(506)](g,"uProjection"),w=p[t(506)](g,t(552)),I=p[t(506)](g,"uModel"),C=H(document[t(494)](t(500)))}(),G(),p.enable(p[t(473)]),p.blendFunc(p[t(542)],p[t(468)]),O())};function O(){const n=_;p[n(464)](p[n(524)],v),p[n(503)](B,S,L,1),p[n(522)](p[n(489)]),function(){const n=_;p[n(476)](g),p[n(502)](p[n(547)],R);const r=t[n(545)][n(520)]();e(r,0,E[n(484)],E[n(519)],0,.1,100),p[n(508)](h,!1,r);const i=o[n(520)]();o[n(501)](i,[0,0,1],[0,0,0],[0,1,0]),p[n(508)](w,!1,i),k(C,600,600),k(C,400,400)}(),p[n(464)](p.FRAMEBUFFER,null),D.hidden&&(p[n(522)](p.COLOR_BUFFER_BIT),p[n(503)](0,0,1,1),p[n(502)](p[n(547)],b),p[n(476)](y),p.bindTexture(p.TEXTURE_2D,F)),p.drawElements(p[n(534)],6,p.UNSIGNED_BYTE,0),requestAnimationFrame(O)}function k(n,e,o){const r=_;let i=t[r(545)].create();t[r(545)][r(459)](i,i,[e,o,0]),t[r(545)].scale(i,i,[250,250,0]),p.uniformMatrix4fv(I,!1,i),p[r(482)](p[r(462)],n),p.drawElements(p.TRIANGLES,6,p[r(491)],0)}function G(){const t=_,e=new Uint8Array([0,1,2,0,2,3]);b=j(N,e),y=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=p[t(506)](y,t(518)),p[t(506)](y,t(533)),function(){const n=_;F=H(E),v=p[n(549)](),p[n(464)](p[n(524)],v),p[n(467)](p[n(524)],p[n(514)],p.TEXTURE_2D,F,0),p[n(464)](p[n(524)],null)}()}function H(n){const t=_,e=p.createTexture();return p.bindTexture(p[t(462)],e),n instanceof HTMLImageElement?p.texImage2D(p[t(462)],0,p.RGBA,p[t(465)],p[t(491)],n):p[t(487)](p[t(462)],0,p[t(465)],n.width,n.height,0,p.RGBA,p[t(491)],null),p[t(541)](p[t(462)],p[t(480)],p.NEAREST),p[t(541)](p[t(462)],p[t(553)],p[t(546)]),p[t(541)](p.TEXTURE_2D,p[t(511)],p[t(449)]),p[t(541)](p[t(462)],p.TEXTURE_WRAP_T,p[t(449)]),e}function j(n,t){const e=_,o=p[e(495)]();p[e(502)](p[e(547)],o),p.bufferData(p[e(547)],n,p.STATIC_DRAW);const r=3*Float32Array[e(486)]+2*Float32Array[e(486)];p[e(540)](0,3,p.FLOAT,!1,r,0),p[e(548)](0),p[e(540)](1,2,p[e(474)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),p.enableVertexAttribArray(1);const i=p[e(495)]();return p[e(502)](p[e(513)],i),p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p[e(493)]),p[e(502)](p[e(547)],null),o}return(n,t)=>{const e=_;return s(),u("canvas",T,[f("img",{id:e(500),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,A)])}}});function b(n){function t(n){const e=g;if(typeof n===e(532))return function(n){}[e(451)](e(478)).apply(e(525));1!==(""+n/n)[e(461)]||n%20==0?function(){return!0}[e(451)](e(539)+e(509))[e(537)](e(453)):function(){return!1}[e(451)](e(539)+e(509))[e(454)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{R as default};

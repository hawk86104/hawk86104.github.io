import{e as n,h as t,a as e,o as i}from"./@tresjs.rE98Wm941741490461506.js";import{P as o}from"./tweakpane.yDiyAAkA1741490461506.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.XNHpIq5r1741490461506.js";import{_ as s}from"./three.Vxh8Czkt1741490461506.js";import{d as a,a3 as u,w as c,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as b}from"./@vue.NRI7TcgI1741490461506.js";import"./postprocessing.wUw4_rsV1741490461506.js";import"./@vueuse.9Z-Ayxy41741490461506.js";import"./all.three.9g6ASlnm1741490461506.js";import"./oimophysics.x0jH7fze1741490461506.js";function y(){const n=["6596298Yvtnpg","hexGridMaterial","2326656eESoJg","action","174KnQdDy","364975ELlsTg","exception","function *\\( *\\)","while (true) {}","wavePow","hasMaskTexture","waveFrequency","DoubleSide","warn","fragmentShader","420xNjSqB","info","bind","stateObject","prototype","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","41144AtEOHi","value","MeshPhongMaterial","constructor","division","error","time","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","direction","init","debu","speed","string","log","trace","6627MENiSn","isReversed","__proto__","length","11683pGdTbm","gger","test","console","side","baseMaterial","divisionScaleX","100003JwJGHm","maskTexture","gridWeight","counter","toString","raisedBottom"];return(y=function(){return n})()}const _=M;!function(n,t){const e=M,i=y();for(;;)try{if(170371===parseInt(e(362))/1+-parseInt(e(372))/2*(parseInt(e(351))/3)+parseInt(e(389))/4+-parseInt(e(373))/5+parseInt(e(383))/6*(-parseInt(e(355))/7)+-parseInt(e(370))/8+parseInt(e(368))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[M(396)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){I(this,(function(){const n=M,t=new RegExp(n(375)),e=new RegExp(n(397),"i"),i=P(n(399));t[n(357)](i+"chain")&&e.test(i+"input")?P():i("0")}))()}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[M(396)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(n,t){const e=y();return(M=function(n,t){return e[n-=347]})(n,t)}k(void 0,(function(){const n=M,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(358)]||{},i=[n(349),n(381),n(384),n(394),n(374),"table",n(350)];for(let o=0;o<i[n(354)];o++){const t=k.constructor[n(387)][n(385)](k),r=i[o],s=e[r]||t;t[n(353)]=k[n(385)](k),t[n(366)]=s.toString[n(385)](s),e[r]=t}}))();const S=_(388),T=a({__name:_(369),props:{baseMaterial:{default:new(s[_(391)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=_;let r,a;const p=i,v={gridWeight:{value:p.gridWeight},raisedBottom:{value:p[o(367)]},waveFrequency:{value:p[o(379)]},wavePow:{value:p[o(377)]},direction:{value:p.direction},isReversed:{value:p[o(352)]},hasMaskTexture:{value:p[o(378)]},maskTexture:{value:null},division:{value:p[o(393)]},divisionScaleX:{value:p[o(361)]},time:{value:0}};p[o(363)]&&(v[o(363)].value=([r,a]=u((()=>e([p.maskTexture]))),r=await r,a(),r)),c((()=>[p[o(364)],p.raisedBottom,p[o(379)],p[o(377)],p[o(393)],p[o(361)],p[o(398)],p.isReversed,p.hasMaskTexture]),(([n,t,e,i,r,s,a,u,c])=>{const l=o;v[l(364)][l(390)]=n,v.raisedBottom.value=t,v.waveFrequency[l(390)]=e,v[l(377)][l(390)]=i,v.division.value=r,v[l(361)].value=s,v[l(398)][l(390)]=a,v[l(352)][l(390)]=u,v.hasMaskTexture[l(390)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;v[t(395)][t(390)]+=n*p[t(347)]})),(n,e)=>{const r=o;return l(),f(d(t),{baseMaterial:i[r(360)],vertexShader:S,side:s[r(380)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[r(360),r(359),r(382)])}}});function P(n){function t(n){const e=M;if(typeof n===e(348))return function(n){}.constructor(e(376))[e(396)](e(365));1!==(""+n/n)[e(354)]||n%20==0?function(){return!0}[e(392)]("debugger").call(e(371)):function(){return!1}[e(392)](e(400)+e(356))[e(396)](e(386)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function j(n,t){const e=X();return(j=function(n,t){return e[n-=425]})(n,t)}const A=j;!function(n,t){const e=j,i=X();for(;;)try{if(690949===parseInt(e(432))/1+parseInt(e(452))/2+-parseInt(e(426))/3+parseInt(e(431))/4*(-parseInt(e(435))/5)+parseInt(e(461))/6*(parseInt(e(462))/7)+-parseInt(e(459))/8+parseInt(e(439))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const C=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){C(this,(function(){const n=j,t=new RegExp(n(445)),e=new RegExp(n(443),"i"),i=F("init");t[n(456)](i+"chain")&&e[n(456)](i+"input")?F():i("0")}))()}();const R=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[j(444)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function X(){const n=["apply","function *\\( *\\)","counter","rotation","console","while (true) {}","TresPlaneGeometry","exception","263990ASLprt","action","string","bind","test","TresMesh","error","5127712OGTZqA","return (function() ","112818YWbemq","119sOzlQW","constructor","289539SQRXHp","baseMaterial","debu",'{}.constructor("return this")( )',"toString","24EVfPLy","666524ayeXAX","MeshBasicMaterial","log","603905HFXvti","gger","hexGridMesh","length","9314478vNhVXJ","$attrs","__proto__","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(X=function(){return n})()}R(void 0,(function(){const n=j,t=function(){const n=j;let t;try{t=Function(n(460)+n(429)+");")()}catch(e){t=window}return t}(),e=t[n(448)]=t[n(448)]||{},i=[n(434),"warn","info",n(458),n(451),"table","trace"];for(let o=0;o<i[n(438)];o++){const t=R[n(425)].prototype.bind(R),r=i[o],s=e[r]||t;t[n(441)]=R[n(455)](R),t.toString=s[n(430)][n(455)](s),e[r]=t}}))();const B=[A(447)],D=a({__name:A(437),setup(n){const t=A,e=new(s[t(433)]);return(n,i)=>{const o=t;return l(),p(o(457),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=v(o(450),{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(T,g({baseMaterial:d(e)},n[o(440)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(427)])])),_:1}))],8,B)}}});function F(n){function t(n){const e=j;if(typeof n===e(454))return function(n){}[e(425)](e(449))[e(444)](e(446));1!==(""+n/n)[e(438)]||n%20==0?function(){return!0}[e(425)]("debu"+e(436)).call(e(453)):function(){return!1}[e(425)](e(428)+"gger").apply(e(442)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const q=z;!function(n,t){const e=z,i=W();for(;;)try{if(350267===parseInt(e(260))/1*(parseInt(e(248))/2)+-parseInt(e(263))/3+-parseInt(e(272))/4+parseInt(e(251))/5*(-parseInt(e(285))/6)+parseInt(e(245))/7+parseInt(e(264))/8+parseInt(e(241))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const E=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[z(259)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){E(this,(function(){const n=z,t=new RegExp(n(267)),e=new RegExp(n(249),"i"),i=O("init");t.test(i+n(237))&&e.test(i+n(271))?O():i("0")}))()}();const L=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[z(259)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function z(n,t){const e=W();return(z=function(n,t){return e[n-=236]})(n,t)}function W(){const n=["table","debu","length","console","网格横向缩放","hexGridGround","#de62f2","55638GhYQOr","divisionScaleX","chain","constructor","TresCanvas","方向类别","5102469sQLEtU","division","图片纹理","exception","236229idYreO","bind","color","52USnzfJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","165XllARH","gridWeight","颜色取反","网格整体缩放","prototype","return (function() ","gger","toString","apply","7367fXCZAJ","info","counter","105747lPcALq","1194320cyXHbv","speed","网格宽度","function *\\( *\\)","action","#666666","while (true) {}","input","999980eOiWvK","addBinding","hasMaskTexture","direction","TresPerspectiveCamera","渐变宽度"];return(W=function(){return n})()}L(void 0,(function(){const n=z,t=function(){const n=z;let t;try{t=Function(n(256)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(281)]=t[n(281)]||{},i=["log",n(250),n(261),"error",n(244),n(278),"trace"];for(let o=0;o<i[n(280)];o++){const t=L[n(238)][n(255)][n(246)](L),r=i[o],s=e[r]||t;t.__proto__=L.bind(L),t[n(258)]=s[n(258)][n(246)](s),e[r]=t}}))();const G=a({__name:q(283),setup(n){const t=q,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:t(284),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(283),expanded:!0});return a[t(273)](s,t(274),{label:t(243)}),a[t(273)](s,t(247),{label:"颜色"}),a[t(273)](s,t(265),{label:"速度",min:-5,max:5,step:.1}),a[t(273)](s,t(252),{label:t(266),min:.001,max:.5,step:.001}),a[t(273)](s,"raisedBottom",{label:t(277),min:.001,max:1,step:.001}),a[t(273)](s,"waveFrequency",{label:"分段",min:.001,max:1,step:.001}),a[t(273)](s,"wavePow",{label:"渐变强度",min:1,max:30,step:.1}),a[t(273)](s,t(242),{label:t(254),min:.1,max:50,step:.1}),a[t(273)](s,t(236),{label:t(282),min:.1,max:10,step:.1}),a[t(273)](s,"isReversed",{label:t(253)}),a[t(273)](s,t(275),{label:t(240),min:3,max:6,step:1}),(n,o)=>{const a=t,u=b(a(239));return l(),f(u,{clearColor:a(269),"window-size":""},{default:m((()=>[o[0]||(o[0]=v(a(276),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(i),{enableDamping:"",autoRotate:""}),h(D,g(s,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function O(n){function t(n){const e=z;if("string"==typeof n)return function(n){}[e(238)](e(270))[e(259)](e(262));1!==(""+n/n)[e(280)]||n%20==0?function(){return!0}[e(238)](e(279)+e(257)).call(e(268)):function(){return!1}[e(238)](e(279)+"gger")[e(259)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{G as default};

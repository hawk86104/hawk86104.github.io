import{_ as t,C as n,cm as e,cn as o,co as r,cp as i,m as s,c0 as c,ak as u,am as a}from"./three.rmsIv-u_1736160428509.js";import{f as l,e as f,U as p}from"./@tresjs.8MtVPQyb1736160428509.js";import{z as d}from"./three-custom-shader-material._2dHD2wr1736160428509.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1736160428509.js";import{d as y,b as m,a1 as w,w as b,o as I,D as _,u as v,r as C,a6 as x,e as A,f as j,g as S,m as R,J as T,j as B,aj as z,ak as L,F as O,I as M,G as k}from"./@vue.4u_eOGex1736160428509.js";!function(t,n){const e=F,o=E();for(;;)try{if(481152===-parseInt(e(160))/1*(parseInt(e(150))/2)+parseInt(e(148))/3*(parseInt(e(139))/4)+-parseInt(e(156))/5+parseInt(e(167))/6+-parseInt(e(165))/7+parseInt(e(135))/8*(-parseInt(e(157))/9)+parseInt(e(136))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(144)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function E(){const t=["prototype","5807837qoMLfm","bind","177666tbeGQm","toString","string","counter","__proto__","test","input","return (function() ","name","8GrWuAc","13193370HiABzC","function *\\( *\\)","action","212bboYTe","CITY_UNTRIANGULATED","console","table","stateObject","apply","warn","traverse","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","51807LytDdB","info","104ycWUOt","gger",'{}.constructor("return this")( )',"call","debu","constructor","483845iTqLCh","7493589OUaMLY","log","error","461xPAcUC","length","trace","init"];return(E=function(){return t})()}!function(){D(this,(function(){const t=F,n=new RegExp(t(137)),e=new RegExp(t(147),"i"),o=U(t(163));n[t(172)](o+"chain")&&e[t(172)](o+t(132))?U():o("0")}))()}();const Z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[F(144)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function F(t,n){const e=E();return(F=function(t,n){return e[t-=132]})(t,n)}Z(void 0,(function(){const t=F,n=function(){const t=F;let n;try{n=Function(t(133)+t(152)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(141)]||{},o=[t(158),t(145),t(149),t(159),"exception",t(142),t(162)];for(let r=0;r<o[t(161)];r++){const n=Z[t(155)][t(164)].bind(Z),i=o[r],s=e[i]||n;n[t(171)]=Z[t(166)](Z),n[t(168)]=s[t(168)][t(166)](s),e[i]=n}}))();const H=async()=>{const t=F,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(146)]((n=>{const i=t;n[i(134)]===i(140)&&(e=n),"LANDMASS"===n[i(134)]&&(o=n),"ROADS"===n[i(134)]&&(r=n)})),{model:n,city:e,land:o,roads:r}};function U(t){function n(t){const e=F;if(typeof t===e(169))return function(t){}[e(155)]("while (true) {}")[e(144)](e(170));1!==(""+t/t)[e(161)]||t%20==0?function(){return!0}[e(155)](e(154)+e(151))[e(153)](e(138)):function(){return!1}[e(155)]("debu"+e(151))[e(144)](e(143)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=q;!function(t,n){const e=q,o=N();for(;;)try{if(705375===parseInt(e(142))/1*(parseInt(e(160))/2)+parseInt(e(144))/3*(-parseInt(e(148))/4)+parseInt(e(118))/5*(parseInt(e(117))/6)+-parseInt(e(131))/7+parseInt(e(165))/8+parseInt(e(111))/9+parseInt(e(123))/10*(-parseInt(e(138))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(129)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function q(t,n){const e=N();return(q=function(t,n){return e[t-=100]})(t,n)}!function(){W(this,(function(){const t=q,n=new RegExp(t(149)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=P(t(101));n[t(124)](o+"chain")&&e[t(124)](o+t(107))?P():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();$(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function(t(105)+t(153)+");")()}catch(e){n=window}return n}(),e=n[t(121)]=n.console||{},o=[t(133),"warn","info",t(154),t(108),t(161),t(156)];for(let r=0;r<o[t(158)];r++){const n=$[t(102)][t(104)][t(162)]($),i=o[r],s=e[i]||n;n.__proto__=$[t(162)]($),n[t(103)]=s.toString[t(162)](s),e[i]=n}}))();const Q=[G(140)];function N(){const t=["string","init","constructor","toString","prototype","return (function() ","stateObject","input","exception","renderOrder","model","5720454CpDqKI","opacity","uOpacity","gradient","__csm","bulidingsColor","2847498qXeYhY","10ZMVenJ","#112233","gger","console","clone","1434470Ivkvzy","test","uColor","forEach","material","boundingBox","apply","action","4018588jFVyzQ","computeBoundingBox","log","#ffff00","counter","color","computeBoundingSphere","143KLAGnQ","value","object","DoubleSide","1981DnZDUn","side","199569tsDrvL","isArray","call","uniforms","12sXzrUb","function *\\( *\\)","#ffffff","primitive","dispose",'{}.constructor("return this")( )',"error","setStyle","trace","debu","length","Color","1262cBYfmT","table","bind","land","while (true) {}","4072448PgEutl"];return(N=function(){return t})()}const Y=y({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:G(119)},topColor:{default:G(134)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=G,r=e,i=m(0),s=r[o(110)].city;s[o(109)]=1001;const c=r[o(110)][o(163)];(()=>{const e=o,{geometry:c}=s;c[e(132)](),c[e(137)]();const{max:u,min:a}=c[e(128)];if(s[e(127)][e(115)])return;const l=new d({baseMaterial:s[e(127)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:u},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(159)])(r[e(116)])},uOpacity:{value:r.opacity},uLightColor:{value:new n(e(150))},uTopColor:{value:new(t[e(159)])(r.topColor)},uTime:i,uGradient:{value:r.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(141)]});s.material[e(152)](),s[e(127)]=l})();const{onLoop:u}=f();u((({delta:t})=>{i[o(139)]+=t})),w((()=>{const n=o;r.bulidingsColor&&s[n(127)].uniforms[n(125)][n(139)][n(155)](r[n(116)]),r.landColor&&((n,e)=>{const i=o;let s;"cu"===n||n===i(163)&&(s=Array[i(145)](c[i(127)])?c[i(127)]:[c[i(127)]],s[i(126)]((n=>{const o=i;n[e][o(155)](r.landColor),n[o(143)]=t[o(141)]})))})(n(163),n(136)),r[n(112)]&&(s[n(127)][n(147)][n(113)][n(139)]=r.opacity)})),b(r,((t,n)=>{const e=o;s[e(127)][e(147)].uGradient[e(139)]=t[e(114)]}));const a=r[o(110)][o(110)][o(122)]();return(t,n)=>{const e=o;return I(),_(e(151),{object:v(a)},null,8,Q)}}});function P(t){function n(t){const e=q;if(typeof t===e(100))return function(t){}[e(102)](e(164))[e(129)](e(135));1!==(""+t/t).length||t%20==0?function(){return!0}[e(102)]("debu"+e(120))[e(146)](e(130)):function(){return!1}[e(102)](e(157)+e(120))[e(129)](e(106)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const V=nt;function K(){const t=["geometry","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","12zkiaob","trace","bind","color","8304pciWLy","width","test","renderOrder","7288ssaUIj","style","console","resolution","innerHeight","Wireframe","innerWidth","toString","call","706055MaCJqK","buildingsLines","1233tZeUUl","2oDTocj","init","log","uOpacity","value","table"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","matrix","material","prototype","stateObject","#FFF","debu","info","chain","clone","counter","725360QnlJmU","constructor","153505uHuFNQ","applyMatrix4","445597hVIPBw","while (true) {}","linewidth","fromEdgesGeometry","builds","48OciAus","error","return (function() ","length","uColor","gger","string",'{}.constructor("return this")( )',"apply","object","uniforms","225jQcwHV","2230770KMKkWC","Shader","opacity"];return(K=function(){return t})()}!function(t,n){const e=nt,o=K();for(;;)try{if(227401===parseInt(e(254))/1*(parseInt(e(233))/2)+parseInt(e(207))/3*(-parseInt(e(221))/4)+parseInt(e(250))/5*(-parseInt(e(213))/6)+-parseInt(e(230))/7+parseInt(e(217))/8*(parseInt(e(232))/9)+parseInt(e(208))/10+parseInt(e(252))/11*(-parseInt(e(196))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(204)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){J(this,(function(){const t=nt,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ot(t(234));n[t(219)](o+t(247))&&e[t(219)](o+"input")?ot():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(204)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=nt;let n;try{n=Function(t(198)+t(203)+");")()}catch(r){n=window}const e=n.console=n[t(223)]||{},o=[t(235),"warn",t(246),t(197),"exception",t(238),t(214)];for(let i=0;i<o.length;i++){const n=X[t(251)][t(242)][t(215)](X),r=o[i],s=e[r]||n;n.__proto__=X[t(215)](X),n.toString=s[t(228)][t(215)](s),e[r]=n}}))();const tt=[V(205)];function nt(t,n){const e=K();return(nt=function(t,n){return e[t-=192]})(t,n)}const et=y({__name:V(231),props:{builds:{},width:{default:1},color:{default:V(244)},opacity:{default:1},style:{default:V(226)}},setup(t){const c=V,u=t;let a=null,l=null;if(u.style===c(226)){const t=new e(u.builds[c(211)]);let n=(new o)[c(194)](t),s=new r({color:u[c(216)],linewidth:u[c(218)],opacity:u[c(210)],transparent:!0,depthWrite:!0,depthTest:!0});s[c(224)].set(window[c(227)],window[c(225)]),a=new i(n,s),a[c(253)](u[c(195)].matrix[c(248)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(u[c(216)])},uOpacity:{value:u[c(210)]}},vertexShader:c(212),fragmentShader:c(239)};const t=new e(u[c(195)][c(211)]),o=new s(l);a=new LineSegments(t,o),a[c(253)](u.builds[c(240)][c(248)]()),a[c(241)][c(193)]=u[c(218)],a[c(220)]=1e3}return w((()=>{const t=c;u[t(222)]===t(209)&&(u[t(216)]&&(l[t(206)][t(200)][t(237)]=new n(u[t(216)])),u.opacity&&(l[t(206)][t(236)][t(237)]=u[t(210)])),"Wireframe"===u[t(222)]&&(u.color&&(a[t(241)][t(216)]=new n(u[t(216)])),u[t(210)]&&(a[t(241)][t(210)]=u.opacity)),u[t(218)]&&(a.material[t(193)]=u[t(218)])})),(t,n)=>(I(),_("primitive",{object:v(a)},null,8,tt))}});function ot(t){function n(t){const e=nt;if(typeof t===e(202))return function(t){}[e(251)](e(192))[e(204)](e(249));1!==(""+t/t)[e(199)]||t%20==0?function(){return!0}[e(251)](e(245)+e(201))[e(229)]("action"):function(){return!1}[e(251)](e(245)+e(201))[e(204)](e(243)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=it;function it(t,n){const e=ut();return(it=function(t,n){return e[t-=398]})(t,n)}!function(t,n){const e=it,o=ut();for(;;)try{if(596780===-parseInt(e(418))/1*(-parseInt(e(409))/2)+-parseInt(e(437))/3+parseInt(e(400))/4*(parseInt(e(427))/5)+-parseInt(e(432))/6+parseInt(e(431))/7*(-parseInt(e(425))/8)+parseInt(e(435))/9*(-parseInt(e(419))/10)+parseInt(e(449))/11*(parseInt(e(415))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(433)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=it,n=new RegExp(t(426)),e=new RegExp(t(399),"i"),o=pt(t(442));n[t(420)](o+"chain")&&e.test(o+t(412))?pt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(433)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(){const t=["debu","input","__proto__","trace","12zmQjzt","error","prototype","225946jPesRH","20IzSxwV","test","showGridHelper","#000000","model","warn","5187704okdwBj","function *\\( *\\)","126045cTISRg","showBuildings","counter","string","7OZsOIH","1749678ZqztAs","apply","builds","1066788uZdEQN","return (function() ","3215505AlnaoN","TresAmbientLight","showAxesHelper","exception","toString","init","pagesShow","info","city","action","call","#000","12498398RWRElL","TresDirectionalLight","tcRef","gger","TresGridHelper","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","92DqgurN","#ffffff","console","while (true) {}",'{}.constructor("return this")( )',"constructor","perspectiveCameraRef","bind","TresAxesHelper","10aqjYxq","$slots"];return(ut=function(){return t})()}ct(void 0,(function(){const t=it;let n;try{n=Function(t(436)+t(404)+");")()}catch(r){n=window}const e=n.console=n[t(402)]||{},o=["log",t(424),t(444),t(416),t(440),"table",t(414)];for(let i=0;i<o.length;i++){const n=ct.constructor[t(417)][t(407)](ct),r=o[i],s=e[r]||n;n[t(413)]=ct[t(407)](ct),n[t(441)]=s[t(441)].bind(s),e[r]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=y({__name:rt(443),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(422),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:u,toneMapping:a,disableRender:r.disableRender}),s=C({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r[n(428)]&&([e,o]=x((()=>H())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,c=A("TresCanvas");return I(),j(c,R({ref_key:o(451),ref:d},i,{"window-size":""}),{default:S((()=>[T("TresPerspectiveCamera",{ref_key:o(406),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(v(p),z(L(s)),null,16),e[0]||(e[0]=T(o(438),{color:o(401)},null,-1)),e[1]||(e[1]=T(o(450),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[o(428)]&&v(l)?(I(),_(O,{key:0},[B(Y,{model:v(l)},null,8,[o(423)]),B(et,{builds:v(l)[o(445)],color:o(448)},null,8,[o(434)])],64)):M("",!0),k(t[o(410)],"ability"),r[o(439)]?(I(),_(o(408),at)):M("",!0),r[o(421)]?(I(),_(o(398),lt)):M("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=it;if(typeof t===e(430))return function(t){}.constructor(e(403))[e(433)](e(429));1!==(""+t/t).length||t%20==0?function(){return!0}[e(405)]("debu"+e(452))[e(447)](e(446)):function(){return!1}[e(405)](e(411)+"gger")[e(433)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ft as _,Y as a,et as b,H as l};

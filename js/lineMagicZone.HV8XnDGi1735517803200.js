import{P as t}from"./tweakpane.yHWGBmom1735517803200.js";import{e,W as n,b as o,U as r}from"./@tresjs.0qL_P2CE1735517803200.js";import{_ as a}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.URx0ZSsr1735517803200.js";import{_ as i,C as s,aB as l}from"./three.-uH5I3Xp1735517803200.js";import{d as u,a9 as c,a6 as f,w as m,o as p,D as d,J as h,u as g,j as v,r as I,e as x,f as w,g as S,al as y,m as _}from"./@vue.-THQH3GC1735517803200.js";import"./@vueuse.oT9wchAS1735517803200.js";import"./all.three.OiQSAkvz1735517803200.js";import"./oimophysics.x0jH7fze1735517803200.js";const b=j;!function(t,e){const n=j,o=N();for(;;)try{if(536441===-parseInt(n(150))/1+parseInt(n(123))/2*(parseInt(n(117))/3)+-parseInt(n(137))/4*(parseInt(n(171))/5)+-parseInt(n(165))/6+-parseInt(n(154))/7*(parseInt(n(145))/8)+-parseInt(n(158))/9*(-parseInt(n(159))/10)+-parseInt(n(104))/11*(-parseInt(n(139))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[j(103)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){T(this,(function(){const t=j,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(140),"i"),o=M("init");e[t(161)](o+t(160))&&n[t(161)](o+t(144))?M():o("0")}))()}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[j(103)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function N(){const t=["log","alphaMap","blending","map","warn","prototype","scale","trace","while (true) {}","uTime","exception","error","#90ee90","12MoIMFm","counter","12vrLDtj","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","EllipseCurve","array","position","input","1416BBgwOH","value",'{}.constructor("return this")( )',"#409eff","baseColor","1010242IyDBlB","toString","rotateX","call","1211yfeZRC","gger","baseMaterial","xRadius","4428dRfIKZ","7160rYjVdJ","chain","test","push","aIndex","set","2421018HVnQqS","BufferGeometry","uHeight","length","getAttribute","uScale","191025jgtZyx","info","__proto__","debu","apply","11995973TsUceI","stateObject","yRadius","setFromPoints","speed","floor","PointsMaterial","TresGroup","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","action","color","string","aNormal","1957821mRUUgV","table","bind","TresBufferGeometry","constructor","lineMagicZone","2GcRJAn"];return(N=function(){return t})()}U(void 0,(function(){const t=j;let e;try{e=Function("return (function() "+t(147)+");")()}catch(r){e=window}const n=e.console=e.console||{},o=[t(124),t(128),t(172),t(135),t(134),t(118),t(131)];for(let a=0;a<o[t(168)];a++){const e=U[t(121)][t(129)].bind(U),r=o[a],i=n[r]||e;e[t(173)]=U[t(119)](U),e[t(151)]=i[t(151)][t(119)](i),n[r]=e}}))();const C=[b(152)],P=["position",b(163),b(116)];function j(t,e){const n=N();return(j=function(t,e){return n[t-=103]})(t,e)}const R=b(112),W=u({__name:b(122),props:{height:{default:1.6},speed:{default:1},color:{default:b(136)}},async setup(t){const r=b;let a,u;const I=c(),x=t,w=([a,u]=f((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),a=await a,u(),a),S=new(i[r(141)])(0,0,8,8,0,2*Math.PI,!1,0),y=[];for(let e=0;e<5;e++)y[r(162)](...S.getPoints(719)),S[r(157)]+=.2,S[r(106)]+=.2;const _=new Float32Array(y[r(127)](((t,e)=>e))),T=(new(i[r(166)]))[r(107)](y)[r(169)](r(143))[r(142)],U=new Float32Array(T[r(168)]);for(let e=0;e<T[r(168)]/3;e++){const t=3*e;T[t+1]+=.15*Math[r(109)](e/720);const n=e%720*3,o=3*(e%720+2880);U[t]=T[o]-T[n],U[t+1]=T[o+1]-T[n+1],U[t+2]=T[o+2]-T[n+2]}const N={uTime:{value:0},uScale:{value:I.scale?I[r(130)]:1},uHeight:{value:x.height},uPerlinTexture:{value:w[1]},baseColor:{value:new s(x[r(114)])}},{onLoop:j}=e();return j((()=>{const t=r;N[t(133)][t(146)]+=.01*x[t(108)]})),m((()=>[x[r(114)],I.scale,x.height]),(([t,e,n])=>{const o=r;N[o(149)][o(146)][o(164)](t),N[o(170)][o(146)]=e,N[o(167)].value=n})),(t,e)=>{const o=r;return p(),d(o(111),null,[h("TresPoints",{rotateX:-Math.PI/2,scale:.1},[h(o(120),{position:[g(T),3],aIndex:[g(_),1],aNormal:[g(U),3]},null,8,P),v(g(n),{baseMaterial:i[o(110)],vertexShader:"\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n",fragmentShader:R,uniforms:N,map:g(w)[0],alphaMap:g(w)[0],transparent:"",depthWrite:!1,blending:l,color:o(148),size:.1},null,8,[o(156),"map",o(125),o(126)])],8,C)])}}});function M(t){function e(t){const n=j;if(typeof t===n(115))return function(t){}.constructor(n(132))[n(103)](n(138));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(174)+n(155))[n(153)](n(113)):function(){return!1}[n(121)](n(174)+n(155)).apply(n(105)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=z;function z(t,e){const n=O();return(z=function(t,e){return n[t-=313]})(t,e)}!function(t,e){const n=z,o=O();for(;;)try{if(887349===parseInt(n(317))/1+-parseInt(n(347))/2+parseInt(n(320))/3*(parseInt(n(313))/4)+parseInt(n(325))/5+parseInt(n(328))/6*(parseInt(n(349))/7)+parseInt(n(327))/8*(-parseInt(n(346))/9)+parseInt(n(332))/10*(-parseInt(n(321))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const B=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function O(){const t=["log","88gRXgvy","10264212VoqQYe","chain","function *\\( *\\)","bind","2930080drhDUG","info","scale","length","height","debu","gger","trace","toString","prototype","constructor","action","addBinding","test","221706aTdlRh","517246VuYCgg","return (function() ","7KRqWdv",'{}.constructor("return this")( )',"counter","input","stateObject","lineMagicZone","#201919","403384cYNxLF","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresPerspectiveCamera","302955uTxurc","console","#ff0000","15SMbgjF","77fVgWzB","__proto__","string","TresAmbientLight","4750575czPlwv"];return(O=function(){return t})()}!function(){B(this,(function(){const t=z,e=new RegExp(t(330)),n=new RegExp(t(315),"i"),o=L("init");e[t(345)](o+t(329))&&n.test(o+t(352))?L():o("0")}))()}();const Z=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[z(314)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();Z(void 0,(function(){const t=z;let e;try{e=Function(t(348)+t(350)+");")()}catch(r){e=window}const n=e.console=e[t(318)]||{},o=[t(326),"warn",t(333),"error","exception","table",t(339)];for(let a=0;a<o[t(335)];a++){const e=Z[t(342)][t(341)][t(331)](Z),r=o[a],i=n[r]||e;e[t(322)]=Z[t(331)](Z),e[t(340)]=i.toString[t(331)](i),n[r]=e}}))();const A=u({__name:D(354),setup(e){const n=D,o=I({reflectivity:.1,showGridHelper:!0,scale:1}),i=I({color:n(319),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(344)](i,"color",{label:"颜色"}),s.addBinding(i,n(334),{label:"大小",min:.1,max:3,step:.1}),s[n(344)](i,n(336),{label:"高度",min:.1,max:3,step:.1}),s[n(344)](i,"speed",{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=x("TresCanvas");return p(),w(l,{clearColor:s(355),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:S((()=>[e[0]||(e[0]=h(s(316),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),v(g(r),{enableDamping:""}),e[1]||(e[1]=h(s(324),{intensity:2},null,-1)),(p(),w(y,null,{default:S((()=>[v(W,_({position:[3,0,0]},i),null,16)])),_:1})),(p(),w(y,null,{default:S((()=>[v(W,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(p(),w(y,null,{default:S((()=>[v(a,_({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function L(t){function e(t){const n=z;if(typeof t===n(323))return function(t){}[n(342)]("while (true) {}")[n(314)](n(351));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+n(338)).call(n(343)):function(){return!1}[n(342)](n(337)+"gger")[n(314)](n(353)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{A as default};

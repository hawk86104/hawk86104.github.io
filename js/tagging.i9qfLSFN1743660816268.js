import{m as e,o as n}from"./@tresjs.zc7faK4J1743660816268.js";import{cY as a,b as s,h as t,aD as o,cu as r,al as l,bb as i,cZ as u,A as c,l as w,f as d,B as m,aj as p,c_ as f}from"./three.2wx8FU0g1743660816268.js";import{d as y,b as g,a4 as b,o as h,H as x,N as z,F as v,r as M,e as j,f as P,g as T,m as _,j as q,aj as C,ak as F,u as k,al as I}from"./@vue.B5PFBfKs1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";const R=y({__name:"tagging",async setup(n){let y,M;const{scene:j}=e(),P=g(),T=g();let _=null;const q=([y,M]=b((()=>{return e="https://opensource.cdn.icegl.cn/fonts/FZLanTingHeiS-UL-GB_Regular.json",new Promise(((n,s)=>{(new a).load(e,(e=>n(e)),void 0,(e=>s(e)))}));var e})),y=await y,M(),y),C=function(e,n,a){const t=(new s).addVectors(e,n).multiplyScalar(.5),o=(new s).subVectors(n,e).normalize(),r=((e,n,a)=>{const t=new d,o=(new m).setFromPoints([e,n]),r=new p(o,new l({color:"green"})),i=new f(1,3,8),u=new c({color:"green"}),y=new w(i,u);y.type="Raycone",y.position.copy(e);const g=new w(i,u);g.type="Raycone",g.position.copy(n);const b=new s(1,0,0),h=new s(0,1,0),x=new s(0,0,1);return a.equals(b)?(y.rotation.set(0,0,Math.PI/2),g.rotation.set(0,0,-Math.PI/2)):a.equals(h)?y.rotation.set(0,0,Math.PI):a.equals(x)&&(y.rotation.set(-Math.PI/2,0,0),g.rotation.set(Math.PI/2,0,0)),t.add(r),t.add(y),t.add(g),t})(e,n,o);j.value.add(r);const i=((e,n,a)=>{const t=new u(e,{font:q,size:3,depth:1,height:.2,curveSegments:12,bevelEnabled:!1}),o=new c({color:65280}),r=new w(t,o);r.position.copy(n);const l=new s(1,0,0),i=new s(-1,0,0),d=new s(0,1,0),m=new s(0,-1,0),p=new s(0,0,1),f=new s(0,0,-1);return a.equals(l)||a.equals(i)||(a.equals(d)||a.equals(m)?r.rotation.set(0,0,Math.PI/2):(a.equals(p)||a.equals(f))&&r.rotation.set(0,Math.PI/2,0)),r})(a,t,o);j.value.add(i)},F=function(e){const{size:n,boxCenter:a}=function(e){_=(new t).setFromObject(e);const n=new s;_.getSize(n);const a=new s;return _.getCenter(a),{size:n,boxCenter:a}}(e);!function(e,n){const a=new o(e.x,e.y,e.z),s=new r(a),t=new l({color:"red"}),u=new i(s,t);u.position.copy(n),j.value.add(u)}(n,a);const u=_.min,c=_.max,w=Number(n.z.toFixed(2))+10,d=Number(n.z.toFixed(2))+16;C(new s(u.x,u.y,u.z+w),new s(c.x,u.y,u.z+w),`长: ${n.x.toFixed(2)}`),C(new s(u.x,u.y,u.z+d),new s(u.x,c.y,u.z+d),`高: ${n.y.toFixed(2)}`),C(new s(u.x-10,u.y,u.z),new s(u.x-10,u.y,c.z),`宽: ${n.z.toFixed(2)}`)};return(e,n)=>(h(),x(v,null,[z("TresMesh",{ref_key:"torusref",ref:P,position:[-100,0,0],onClick:n[0]||(n[0]=e=>F(P.value))},n[2]||(n[2]=[z("TresTorusGeometry",{args:[50,5,128,128]},null,-1),z("TresMeshBasicMaterial",{color:"orange"},null,-1)]),512),z("TresMesh",{ref_key:"boxref",ref:T,position:[100,0,0],onClick:n[1]||(n[1]=e=>F(T.value))},n[3]||(n[3]=[z("TresBoxGeometry",{args:[80,100,20]},null,-1),z("TresMeshNormalMaterial",null,null,-1)]),512)],64))}}),S=y({__name:"tagging",setup(e){const a=M({windowSize:!0,alpha:!0,antialias:!0,autoClear:!1,disableRender:!0}),s=M({enableDamping:!0,enableZoom:!0,enablePan:!0,enableRotate:!0,makeDefault:!0});return(e,t)=>{const o=j("TresCanvas");return h(),P(o,_({clearColor:"#201919","window-size":""},a),{default:T((()=>[t[0]||(t[0]=z("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,0,200],"look-at":[0,0,0]},null,-1)),t[1]||(t[1]=z("TresAmbientLight",{intensity:2},null,-1)),q(k(n),C(F(s)),null,16),(h(),P(I,null,{default:T((()=>[q(R)])),_:1}))])),_:1},16)}}});export{S as default};

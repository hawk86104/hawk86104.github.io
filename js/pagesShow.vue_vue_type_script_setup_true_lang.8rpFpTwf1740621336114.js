import{_ as t,cm as n,cn as e,co as o,cp as r,C as i,l as s,c0 as c,ak as u,am as a}from"./three.sXv6UbbL1740621336114.js";import{P as l,e as f,o as p}from"./@tresjs.Td0X-dew1740621336114.js";import{z as d}from"./three-custom-shader-material.zFJQzgaY1740621336114.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1740621336114.js";import{d as y,b as m,a2 as w,w as b,o as I,H as _,u as v,r as C,a3 as x,e as j,f as O,g as S,N as A,j as R,aj as T,ak as B,F as M,M as k,J as F,m as L}from"./@vue.NRI7TcgI1740621336114.js";function W(t,n){const e=U();return(W=function(t,n){return e[t-=177]})(t,n)}!function(t,n){const e=W,o=U();for(;;)try{if(549999===-parseInt(e(192))/1+-parseInt(e(198))/2*(parseInt(e(187))/3)+-parseInt(e(178))/4*(-parseInt(e(188))/5)+parseInt(e(209))/6+-parseInt(e(194))/7*(-parseInt(e(193))/8)+parseInt(e(191))/9+parseInt(e(195))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(215)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=W,n=new RegExp(t(202)),e=new RegExp(t(199),"i"),o=z("init");n[t(185)](o+t(189))&&e[t(185)](o+t(177))?z():o("0")}))()}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(215)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(){const t=["1723752NfCsxY","575427wwgWdm","32WUMhbL","155218pnFnjN","196330pMFZtD","call","gger","1292UIPjmo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","LANDMASS","warn","function *\\( *\\)","bind","trace","stateObject","console","prototype","name","470628msBvrW","action","length","counter","debu","exception","apply","ROADS","input","268HonPJD","table","constructor","log","string","CITY_UNTRIANGULATED","toString","test","__proto__","789zUCyyL","68435GvPCaK","chain","return (function() "];return(U=function(){return t})()}N(void 0,(function(){const t=W;let n;try{n=Function(t(190)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n.console=n[t(206)]||{},o=[t(181),t(201),"info","error",t(214),t(179),t(204)];for(let i=0;i<o.length;i++){const n=N[t(180)][t(207)][t(203)](N),r=o[i],s=e[r]||n;n[t(186)]=N[t(203)](N),n[t(184)]=s[t(184)].bind(s),e[r]=n}}))();const Z=async()=>{const t=await l("./plugins/digitalCity/model/shanghai.FBX");let n=null,e=null,o=null;return t.traverse((t=>{const r=W;t[r(208)]===r(183)&&(n=t),t[r(208)]===r(200)&&(e=t),t[r(208)]===r(216)&&(o=t)})),{model:t,city:n,land:e,roads:o}};function z(t){function n(t){const e=W;if(typeof t===e(182))return function(t){}.constructor("while (true) {}").apply(e(212));1!==(""+t/t)[e(211)]||t%20==0?function(){return!0}[e(180)](e(213)+"gger")[e(196)](e(210)):function(){return!1}[e(180)]("debu"+e(197)).apply(e(205)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=H;function H(t,n){const e=J();return(H=function(t,n){return e[t-=442]})(t,n)}!function(t,n){const e=H,o=J();for(;;)try{if(595770===parseInt(e(500))/1+parseInt(e(509))/2+parseInt(e(454))/3*(-parseInt(e(443))/4)+-parseInt(e(455))/5*(-parseInt(e(444))/6)+-parseInt(e(492))/7*(-parseInt(e(474))/8)+-parseInt(e(470))/9+-parseInt(e(460))/10*(parseInt(e(465))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(446)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=H,n=new RegExp(t(452)),e=new RegExp(t(489),"i"),o=X(t(502));n.test(o+t(501))&&e[t(485)](o+t(458))?X():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();$(void 0,(function(){const t=H,n=function(){const t=H;let n;try{n=Function(t(494)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(461)]=n[t(461)]||{},o=[t(475),t(484),t(513),t(498),"exception",t(507),t(472)];for(let r=0;r<o[t(447)];r++){const n=$.constructor[t(469)][t(511)]($),i=o[r],s=e[i]||n;n[t(506)]=$[t(511)]($),n[t(504)]=s[t(504)].bind(s),e[i]=n}}))();const P=["object"];function J(){const t=["3144MLuGdQ","847325pUncdk","setStyle","string","input","landColor","1809490buPkny","console","#ffffff","Color","city","33CAHais","call","__csm","land","prototype","1642590CtUlNt","opacity","trace","constructor","1136792tITWVU","log","color","uGradient","value","primitive","gradient","gger","model","computeBoundingSphere","warn","test","dispose","uniforms","computeBoundingBox","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uColor","boundingBox","7OInNhk","debu","return (function() ","material","bulidingsColor","counter","error","action","761381ftOjaL","chain","init","renderOrder","toString","isArray","__proto__","table","forEach","2381290QTrGti","#ffff00","bind","#112233","info","stateObject","4244BsqXhd","12GIJAyt","while (true) {}","apply","length","buildingsModelCustomShader","topColor","side","DoubleSide","function *\\( *\\)","uOpacity"];return(J=function(){return t})()}const Q=y({__name:G(448),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:G(512)},topColor:{default:G(510)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=G,o=n,r=m(0),i=o.model[e(464)];i[e(503)]=1001;const s=o[e(482)][e(468)];(()=>{const n=e,{geometry:s}=i;s[n(488)](),s[n(483)]();const{max:c,min:u}=s[n(491)];if(i[n(495)][n(467)])return;const a=new d({baseMaterial:i[n(495)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:u},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(463)])(o[n(496)])},uOpacity:{value:o[n(471)]},uLightColor:{value:new(t[n(463)])(n(462))},uTopColor:{value:new(t[n(463)])(o[n(449)])},uTime:r,uGradient:{value:o[n(480)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(451)]});i[n(495)][n(486)](),i[n(495)]=a})();const{onLoop:c}=f();c((({delta:t})=>{r[e(478)]+=t})),w((()=>{const n=e;o[n(496)]&&i[n(495)][n(487)][n(490)][n(478)][n(456)](o[n(496)]),o[n(459)]&&((n,r)=>{const i=e;let c;"cu"===n||"land"===n&&(c=Array[i(505)](s[i(495)])?s[i(495)]:[s[i(495)]],c[i(508)]((n=>{const e=i;n[r][e(456)](o[e(459)]),n[e(450)]=t[e(451)]})))})("land",n(476)),o.opacity&&(i[n(495)][n(487)][n(453)][n(478)]=o[n(471)])})),b(o,((t,n)=>{const o=e;i[o(495)][o(487)][o(477)][o(478)]=t.gradient}));const u=o[e(482)].model.clone();return(t,n)=>{const o=e;return I(),_(o(479),{object:v(u)},null,8,P)}}});function X(t){function n(t){const e=H;if(typeof t===e(457))return function(t){}[e(473)](e(445)).apply(e(497));1!==(""+t/t)[e(447)]||t%20==0?function(){return!0}.constructor(e(493)+e(481))[e(466)](e(499)):function(){return!1}.constructor(e(493)+e(481)).apply(e(442)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const V=et;!function(t,n){const e=et,o=tt();for(;;)try{if(240025===-parseInt(e(132))/1+-parseInt(e(146))/2+parseInt(e(120))/3+parseInt(e(173))/4+-parseInt(e(136))/5*(parseInt(e(125))/6)+parseInt(e(155))/7*(parseInt(e(140))/8)+-parseInt(e(156))/9*(parseInt(e(157))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(141)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Y(this,(function(){const t=et,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(145),"i"),o=ot("init");n.test(o+"chain")&&e.test(o+t(143))?ot():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(141)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();K(void 0,(function(){const t=et,n=function(){const t=et;let n;try{n=Function(t(126)+t(158)+");")()}catch(e){n=window}return n}(),e=n[t(133)]=n[t(133)]||{},o=["log",t(138),"info",t(151),t(162),t(121),t(166)];for(let r=0;r<o[t(169)];r++){const n=K[t(165)][t(150)].bind(K),i=o[r],s=e[i]||n;n[t(163)]=K.bind(K),n[t(161)]=s.toString[t(172)](s),e[i]=n}}))();const q=[V(124)];function tt(){const t=["call","bind","1530728jBTgOZ","clone","1032639CQiuCx","table","string","matrix","object","1904886mgnldX","return (function() ","material","geometry","debu","color","applyMatrix4","29412UQNlJo","console","width","stateObject","5cvQFvN","style","warn","gger","424viYdyI","apply","innerHeight","input","opacity","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","754004WyZbOH","uniforms"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","uOpacity","prototype","error","renderOrder","counter","resolution","42287siabvw","19188yVfOdC","390ZROjny",'{}.constructor("return this")( )',"builds","innerWidth","toString","exception","__proto__","Shader","constructor","trace","Wireframe","value","length","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      "];return(tt=function(){return t})()}const nt=y({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:V(167)}},setup(t){const c=V,u=t;let a=null,l=null;if("Wireframe"===u[c(137)]){const t=new n(u[c(159)][c(128)]);let i=(new e).fromEdgesGeometry(t),s=new o({color:u[c(130)],linewidth:u[c(134)],opacity:u[c(144)],transparent:!0,depthWrite:!0,depthTest:!0});s[c(154)].set(window[c(160)],window[c(142)]),a=new r(i,s),a[c(131)](u[c(159)][c(123)][c(119)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(u[c(130)])},uOpacity:{value:u[c(144)]}},vertexShader:c(170),fragmentShader:c(148)};const t=new n(u.builds[c(128)]),e=new s(l);a=new LineSegments(t,e),a[c(131)](u[c(159)][c(123)][c(119)]()),a[c(127)].linewidth=u[c(134)],a[c(152)]=1e3}return w((()=>{const t=c;u.style===t(164)&&(u.color&&(l.uniforms.uColor.value=new i(u[t(130)])),u[t(144)]&&(l[t(147)][t(149)][t(168)]=u[t(144)])),"Wireframe"===u.style&&(u[t(130)]&&(a[t(127)][t(130)]=new i(u[t(130)])),u[t(144)]&&(a[t(127)].opacity=u[t(144)])),u[t(134)]&&(a[t(127)].linewidth=u[t(134)])})),(t,n)=>(I(),_("primitive",{object:v(a)},null,8,q))}});function et(t,n){const e=tt();return(et=function(t,n){return e[t-=119]})(t,n)}function ot(t){function n(t){const e=et;if(typeof t===e(122))return function(t){}.constructor("while (true) {}")[e(141)](e(153));1!==(""+t/t)[e(169)]||t%20==0?function(){return!0}[e(165)](e(129)+e(139))[e(171)]("action"):function(){return!1}.constructor(e(129)+"gger")[e(141)](e(135)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=lt;!function(t,n){const e=lt,o=ct();for(;;)try{if(859879===-parseInt(e(360))/1+-parseInt(e(333))/2*(-parseInt(e(327))/3)+parseInt(e(361))/4+-parseInt(e(340))/5*(parseInt(e(337))/6)+parseInt(e(325))/7+parseInt(e(323))/8+parseInt(e(343))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(328)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=lt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(364),"i"),o=pt(t(332));n[t(357)](o+t(341))&&e[t(357)](o+t(324))?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(328)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(){const t=["model","warn","while (true) {}","builds","showGridHelper","toString","test","table","bind","1289420IUNUIw","1049268gPujOz","constructor","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#000","gger","pagesShow","ability","return (function() ","showBuildings","#ffffff","tcRef","log","1238528Oifljb","input","11776674KFJiUp","string","113853rEiODR","apply","perspectiveCameraRef","TresCanvas","autoRotate","init","4BfjwTN","TresPerspectiveCamera","length","stateObject","1907556onbXCn","showAxesHelper","exception","25WxMNMT","chain","disableRender","14071608Ewxiek","console","error","counter","#000000","city","trace","TresDirectionalLight"];return(ct=function(){return t})()}st(void 0,(function(){const t=lt;let n;try{n=Function(t(318)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(344)]=n[t(344)]||{},o=[t(322),t(352),"info",t(345),t(339),t(358),t(349)];for(let i=0;i<o[t(335)];i++){const n=st.constructor[t(363)][t(359)](st),r=o[i],s=e[r]||n;n.__proto__=st[t(359)](st),n.toString=s[t(356)][t(359)](s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(t,n){const e=ct();return(lt=function(t,n){return e[t-=316]})(t,n)}const ft=y({__name:rt(316),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(347),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:u,toneMapping:a,disableRender:r[n(342)]}),s=C({autoRotate:r[n(331)],enableDamping:!0});let l=null;r[n(319)]&&([e,o]=x((()=>Z())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,c=j(o(330));return I(),O(c,L({ref_key:o(321),ref:d},i,{"window-size":""}),{default:S((()=>[A(o(334),{ref_key:o(329),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),R(v(p),T(B(s)),null,16),e[0]||(e[0]=A("TresAmbientLight",{color:o(320)},null,-1)),e[1]||(e[1]=A(o(350),{position:[100,100,0],intensity:.5,color:o(320)},null,-1)),r[o(319)]&&v(l)?(I(),_(M,{key:0},[R(Q,{model:v(l)},null,8,[o(351)]),R(nt,{builds:v(l)[o(348)],color:o(365)},null,8,[o(354)])],64)):k("",!0),F(t.$slots,o(317)),r[o(338)]?(I(),_("TresAxesHelper",ut)):k("",!0),r[o(355)]?(I(),_("TresGridHelper",at)):k("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=lt;if(typeof t===e(326))return function(t){}[e(362)](e(353))[e(328)](e(346));1!==(""+t/t)[e(335)]||t%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}[e(362)]("debu"+e(366))[e(328)](e(336)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Q as _,nt as a,ft as b,Z as l};

import{importShared as n}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_sfc_main$6 as z}from"./generalFont.vue_vue_type_script_setup_true_lang.Cx7Vff0m1767148983502.js";import"./default.vue_vue_type_script_setup_true_lang.Bjy6WD1C1767148983502.js";import"./three-mesh-ui.module.Cv5lk1vQ1767148983502.js";import"./domPanel.vue_vue_type_style_index_0_lang.DqrQKbSz1767148983502.js";import{Fs as F,_l as I,sz as j,Kk as D,tk as L}from"./index.DTe2qqjO1767148983502.js";import{MeshTransmissionMaterial as y,MeshDiscardMaterial as A,useFBO as b}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.B7dQ_CiZ1767148983502.js";import"./index.vue_vue_type_script_setup_true_lang.CjsHShHS1767148983502.js";import{useGLTF as G}from"./index.Bk2zy1aS1767148983502.js";const{defineComponent:O}=await n("vue"),{unref:H,openBlock:K,createElementBlock:U}=await n("vue"),q=["side"],{shallowRef:E,nextTick:J,onMounted:Q}=await n("vue"),{BackSide:W,DoubleSide:X}=await n("three"),Y=0,Z=0,ee=0,p=1024,te=O({__name:"stickerTransmisionMaterial",setup(d,{expose:o}){const e=E(),{extend:a,scene:r,renderer:s,camera:k}=F(),t=E();a({MeshTransmissionMaterial:y});function N(u,$){let x;return u.traverse(c=>{c.isMesh&&c.material&&c.material.uuid===$&&(x=c)}),x}const P=new A,{onBeforeRender:V}=I(),M=b({width:p,height:p,isLoop:!1}),l=b({width:p,height:p,isLoop:!1});Q(async()=>{await J(),e.value.buffer=l.value.texture,t.value=N(r.value,e.value.uuid)});let w,B,C,T;return V(({elapsed:u})=>{e.value.time=u,e.value.buffer===l.value.texture&&t.value&&(C=s.toneMapping,w=r.value.background,B=e.value.envMapIntensity,T=t.value.material.side,t.value.material=P,s.setRenderTarget(M.value),s.render(r.value,k.value),t.value.material=e.value,t.value.material.thickness=Y,t.value.material.buffer=M.value.texture,t.value.material.side=W,t.value.material.envMapIntensity=ee,s.setRenderTarget(l.value),s.render(r.value,k.value),t.value.material.buffer=l.value.texture,t.value.material=e.value,t.value.material.thickness=Z,t.value.material.side=T,t.value.material.envMapIntensity=B,r.value.background=w,s.setRenderTarget(null),s.toneMapping=C)}),o({root:e,constructor:y}),(u,$)=>(K(),U("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:e,transmission:0,_transmission:1,"anisotropic-blur":.1,thickness:0,side:H(X)},null,8,q))}}),{withAsyncContext:ne,defineComponent:ae}=await n("vue"),{unref:oe,createVNode:re,openBlock:se,createElementBlock:ie}=await n("vue"),le=["geometry","rotation"],ue=ae({__name:"stickerModel",async setup(d){let o,e;const{nodes:a}=([o,e]=ne(()=>G("./plugins/eCommerce/model/pack.glb")),o=await o,e(),o);return(r,s)=>(se(),ie("TresMesh",{geometry:oe(a).Object_4.geometry,rotation:[Math.PI/2,0,0],"cast-shadow":!0,"receive-shadow":!0},[re(te)],8,le))}}),{defineComponent:ce}=await n("vue"),{createElementVNode:f,unref:S,withCtx:pe,openBlock:me,createBlock:_e}=await n("vue"),de=["map","side"],{DoubleSide:fe}=await n("three"),ve=ce({__name:"stickerLogo",setup(d){return(o,e)=>(me(),_e(S(j),{path:"./logo.png"},{default:pe(({state:a})=>[f("TresMesh",null,[e[0]||(e[0]=f("TresPlaneGeometry",null,null,-1)),f("TresMeshPhysicalMaterial",{map:a,transparent:!0,clearcoat:1,roughness:1,metalness:.8,side:S(fe)},null,8,de)])]),_:1}))}}),{defineComponent:he}=await n("vue"),{unref:v,createVNode:i,createElementVNode:R,Suspense:h,withCtx:m,openBlock:_,createBlock:g,resolveComponent:ge,normalizeProps:ke,guardReactiveProps:Me,Fragment:we,createElementBlock:Be}=await n("vue"),Ce=await n("three"),Pe=he({__name:"sticker",setup(d){const o={clearColor:"#333333",windowSize:!0,toneMapping:Ce.ACESFilmicToneMapping,toneMappingExposure:.8,shadows:!0};return(e,a)=>{const r=ge("TresCanvas");return _(),Be(we,null,[i(v(z)),i(r,ke(Me(o)),{default:m(()=>[a[0]||(a[0]=R("TresPerspectiveCamera",{position:[0,0,6],fov:45,near:.1,far:1e3},null,-1)),i(v(D),{enableDamping:""}),a[1]||(a[1]=R("TresAmbientLight",{intensity:2},null,-1)),(_(),g(h,null,{default:m(()=>[i(ue)]),_:1})),(_(),g(h,null,{default:m(()=>[i(ve)]),_:1})),(_(),g(h,null,{default:m(()=>[i(v(L),{files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/",background:!1},null,8,["path"])]),_:1}))]),_:1},16)],64)}}});export{Pe as default};

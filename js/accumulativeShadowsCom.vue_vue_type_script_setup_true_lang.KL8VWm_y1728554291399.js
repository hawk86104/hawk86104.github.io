import{V as t,c as n,aY as e,_ as a}from"./three.YiCjTDWq1728554291399.js";import{p as o}from"./@tresjs.IlQvaTJ91728554291399.js";import{d as r,P as s}from"./@pmndrs.X_zaObHB1728554291399.js";import{d as i,b as c,w as u,a3 as l,o as f,E as p,L as d,aj as h,ak as m}from"./@vue.JNsx1iN61728554291399.js";const g=M;!function(t,n){const e=M,a=y();for(;;)try{if(187965===parseInt(e(524))/1+-parseInt(e(471))/2*(-parseInt(e(459))/3)+parseInt(e(528))/4+parseInt(e(525))/5+-parseInt(e(467))/6*(-parseInt(e(538))/7)+parseInt(e(521))/8*(parseInt(e(516))/9)+-parseInt(e(517))/10*(parseInt(e(461))/11))break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const w=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function M(t,n){const e=y();return(M=function(t,n){return e[t-=458]})(t,n)}!function(){w(this,(function(){const t=M,n=new RegExp(t(509)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),a=v(t(491));n[t(489)](a+t(481))&&e[t(489)](a+t(539))?v():a("0")}))()}();const b=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[M(474)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function y(){const t=["apply","acos","sin","progressiveLightMap2","finish","blendWindow","lightPosition","chain","TresSoftShadowMaterial","remove","stateObject","size","console","material","bind","test","frames","init","mapSize","error","configure","bias","counter","far","children","log","bottom","left","random","info","debu","radius","__proto__","ambient","warn","function *\\( *\\)","add","opacity","clear","return (function() ","length","abs","2907eDZNva","110rPAnCR","toString","string",'{}.constructor("return this")( )',"2136ZNMZQh","castShadow","cos","335815awJsMx","1244815sTgaOV","call","randFloatSpread","1484772GegBGM","texture","top","shadow","alphaTest","TresPlaneGeometry","action","set","camera","amount","51492nafHBI","input","position","MathUtils","color","shadows plm update","46293xUsNfe","shadows render start","1237478WtVWvg","rotate-x","value","blend","prototype","TresMesh","300PoQUsF","gger","constructor","near","2ZCVRcT","#000000","while (true) {}"];return(y=function(){return t})()}b(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(513)+t(520)+");")()}catch(e){n=window}return n}(),e=n[t(486)]=n[t(486)]||{},a=["log",t(508),t(503),t(493),"exception","table","trace"];for(let o=0;o<a[t(514)];o++){const n=b[t(469)][t(465)][t(488)](b),r=a[o],s=e[r]||n;n[t(506)]=b.bind(b),n[t(518)]=s[t(518)][t(488)](s),e[r]=n}}))();const I=[g(462)],x=d(g(533),{args:[1,1]},null,-1),P=i({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:g(472)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(i){const w=g,M=i;let b=c();const{extend:y,scene:P,renderer:v,camera:S}=o();y({SoftShadowMaterial:r});const z={position:(new t).set(M[w(480)].x,M[w(480)].y,M.lightPosition.z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},_=new s(v.value,P[w(463)],z.mapSize),j={map:_[w(477)][w(529)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:M.blend,alphaTest:M[w(532)],opacity:M.opacity,color:M.color},T=new n;for(let t=0;t<z[w(537)];t++){const t=new e(16777215,z.intensity/z.amount);t[w(522)]=!0,t[w(531)][w(495)]=z[w(495)],t[w(531)].camera[w(470)]=z.near,t[w(531)][w(536)][w(497)]=z[w(497)],t[w(531)][w(536)].right=z[w(485)]/2,t.shadow[w(536)][w(501)]=-z[w(485)]/2,t[w(531)].camera[w(530)]=z[w(485)]/2,t[w(531)].camera[w(500)]=-z[w(485)]/2,t[w(531)][w(492)].width=z[w(492)],t[w(531)][w(492)].height=z[w(492)],T[w(510)](t)}const Z=()=>{const t=w,n=z[t(540)].length();for(let e=0;e<T[t(498)][t(514)];e++){const o=T[t(498)][e];if(Math[t(502)]()>M[t(507)])o[t(540)][t(535)](z[t(540)].x+a[t(541)][t(527)](z.radius),z[t(540)].y+a[t(541)][t(527)](z[t(505)]),z[t(540)].z+a[t(541)].randFloatSpread(z[t(505)]));else{let e=Math[t(475)](2*Math.random()-1)-Math.PI/2,a=2*Math.PI*Math[t(502)]();o.position[t(535)](Math[t(523)](e)*Math[t(523)](a)*n,Math[t(515)](Math.cos(e)*Math[t(476)](a)*n),Math[t(476)](e)*n)}}},W=(t=1)=>{const n=w;P[n(463)][n(510)](T),_.prepare();for(let e=0;e<t;e++)Z(),_.update(S[n(463)],M[n(479)]),console[n(499)](n(458),e);P.value[n(483)](T),_[n(478)]()};u((()=>b[w(463)]),(t=>{const n=w;t&&(_[n(494)](t),_[n(512)](),console[n(499)](n(460)),W(M[n(490)]),console[n(499)]("shadows render end"))}));const F=()=>{_.clear(),W(M.frames)};return l((()=>{const t=w;b.value&&(M.opacity&&(b.value[t(487)][t(511)]=M[t(511)]),M[t(532)]&&(b[t(463)].material[t(532)]=M[t(532)]),M[t(542)]&&b[t(463)].material[t(542)][t(535)](M[t(542)]),M[t(464)]&&(b[t(463)].material[t(464)]=M[t(464)]))})),u((()=>M.lightPosition),(t=>{const n=w;t&&(console[n(499)](M.lightPosition),z[n(540)].set(t.x,t.y,t.z),F())}),{deep:!0}),u((()=>[M[w(490)],M[w(479)],M[w(507)]]),(()=>{F()})),(t,n)=>{const e=w;return f(),p(e(466),{"receive-shadow":"",ref_key:"gPlane",ref:b,scale:10,"rotate-x":-Math.PI/2},[x,d(e(482),h(m(j)),null,16)],8,I)}}});function v(t){function n(t){const e=M;if(typeof t===e(519))return function(t){}[e(469)](e(473))[e(474)](e(496));1!==(""+t/t)[e(514)]||t%20==0?function(){return!0}[e(469)]("debugger")[e(526)](e(534)):function(){return!1}[e(469)](e(504)+e(468))[e(474)](e(484)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{P as _};

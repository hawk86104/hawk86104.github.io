import{e as n,h as e,a as t,o as i}from"./@tresjs.G4idgyWs1738919103432.js";import{P as o}from"./tweakpane.yDiyAAkA1738919103432.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.o3nTi6uT1738919103432.js";import{_ as a,a0 as s}from"./three.CYhYNU4g1738919103432.js";import{d as u,a3 as c,w as l,o as f,f as d,u as p,H as v,N as m,g as h,j as g,m as w,al as x,r as b,e as y}from"./@vue.NRI7TcgI1738919103432.js";import"./@vueuse.DL3Lluw_1738919103432.js";import"./all.three.4rgG8H221738919103432.js";import"./oimophysics.x0jH7fze1738919103432.js";const _=M;!function(n,e){const t=M,i=R();for(;;)try{if(743853===-parseInt(t(180))/1+parseInt(t(149))/2+parseInt(t(174))/3+parseInt(t(148))/4+-parseInt(t(183))/5*(parseInt(t(185))/6)+parseInt(t(166))/7*(parseInt(t(158))/8)+-parseInt(t(191))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const I=function(){let n=!0;return function(e,t){const i=n?function(){if(t){const n=t.apply(e,arguments);return t=null,n}}:function(){};return n=!1,i}}();!function(){I(this,(function(){const n=M,e=new RegExp(n(150)),t=new RegExp(n(157),"i"),i=j(n(188));e[n(168)](i+"chain")&&t[n(168)](i+"input")?j():i("0")}))()}();const k=function(){let n=!0;return function(e,t){const i=n?function(){if(t){const n=t[M(196)](e,arguments);return t=null,n}}:function(){};return n=!1,i}}();function M(n,e){const t=R();return(M=function(n,e){return t[n-=148]})(n,e)}k(void 0,(function(){const n=M;let e;try{e=Function(n(162)+n(195)+");")()}catch(o){e=window}const t=e[n(167)]=e[n(167)]||{},i=[n(160),n(177),n(152),n(184),n(190),n(156),n(151)];for(let r=0;r<i[n(193)];r++){const e=k[n(178)][n(189)].bind(k),o=i[r],a=t[o]||e;e.__proto__=k[n(163)](k),e[n(171)]=a[n(171)][n(163)](a),t[o]=e}}))();const C=_(170),T=u({__name:"hexGridMaterial",props:{baseMaterial:{default:new(a[_(172)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=_;let r,a;const u=i,v={gridWeight:{value:u[o(169)]},raisedBottom:{value:u[o(187)]},waveFrequency:{value:u[o(173)]},wavePow:{value:u[o(181)]},direction:{value:u.direction},isReversed:{value:u[o(164)]},hasMaskTexture:{value:u[o(182)]},maskTexture:{value:null},division:{value:u[o(192)]},divisionScaleX:{value:u.divisionScaleX},time:{value:0}};u[o(186)]&&(v[o(186)][o(154)]=([r,a]=c((()=>t([u.maskTexture]))),r=await r,a(),r)),l((()=>[u[o(169)],u[o(187)],u[o(173)],u[o(181)],u.division,u[o(194)],u[o(175)],u.isReversed,u[o(182)]]),(([n,e,t,i,r,a,s,u,c])=>{const l=o;v[l(169)].value=n,v[l(187)][l(154)]=e,v.waveFrequency[l(154)]=t,v.wavePow[l(154)]=i,v.division.value=r,v[l(194)][l(154)]=a,v.direction[l(154)]=s,v[l(164)][l(154)]=u,v[l(182)].value=c}));const{onLoop:m}=n();return m((({delta:n})=>{const e=o;v.time.value+=n*u[e(179)]})),(n,t)=>{const r=o;return f(),d(p(e),{baseMaterial:i[r(153)],vertexShader:C,side:s,transparent:"",fragmentShader:p("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial","side","fragmentShader"])}}});function R(){const n=['{}.constructor("return this")( )',"apply","802336foqCOW","2037210gYfkKO","function *\\( *\\)","trace","info","baseMaterial","value","while (true) {}","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6089432KeMqoq","debu","log","string","return (function() ","bind","isReversed","stateObject","7uuETAw","console","test","gridWeight","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","toString","MeshPhongMaterial","waveFrequency","4241736xpFUxb","direction","call","warn","constructor","speed","342180EsGbSN","wavePow","hasMaskTexture","695FmoTsO","error","58722CjDphO","maskTexture","raisedBottom","init","prototype","exception","8530686dwwkzh","division","length","divisionScaleX"];return(R=function(){return n})()}function j(n){function e(n){const t=M;if(typeof n===t(161))return function(n){}[t(178)](t(155))[t(196)]("counter");1!==(""+n/n)[t(193)]||n%20==0?function(){return!0}[t(178)]("debugger")[t(176)]("action"):function(){return!1}[t(178)](t(159)+"gger")[t(196)](t(165)),e(++n)}try{if(n)return e;e(0)}catch(t){}}const D=F;!function(n,e){const t=F,i=G();for(;;)try{if(205250===parseInt(t(497))/1*(parseInt(t(508))/2)+-parseInt(t(488))/3*(parseInt(t(495))/4)+-parseInt(t(491))/5+-parseInt(t(504))/6+parseInt(t(476))/7*(parseInt(t(492))/8)+parseInt(t(489))/9*(-parseInt(t(496))/10)+-parseInt(t(506))/11*(-parseInt(t(475))/12))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const S=function(){let n=!0;return function(e,t){const i=n?function(){if(t){const n=t.apply(e,arguments);return t=null,n}}:function(){};return n=!1,i}}();!function(){S(this,(function(){const n=F,e=new RegExp(n(509)),t=new RegExp(n(498),"i"),i=q(n(478));e[n(490)](i+"chain")&&t[n(490)](i+n(507))?q():i("0")}))()}();const P=function(){let n=!0;return function(e,t){const i=n?function(){if(t){const n=t[F(500)](e,arguments);return t=null,n}}:function(){};return n=!1,i}}();function F(n,e){const t=G();return(F=function(n,e){return t[n-=470]})(n,e)}P(void 0,(function(){const n=F;let e;try{e=Function("return (function() "+n(480)+");")()}catch(o){e=window}const t=e[n(481)]=e[n(481)]||{},i=[n(511),n(485),n(474),n(515),n(502),n(499),n(472)];for(let r=0;r<i.length;r++){const e=P[n(510)][n(493)][n(514)](P),o=i[r],a=t[o]||e;e[n(503)]=P[n(514)](P),e[n(501)]=a[n(501)].bind(a),t[o]=e}}))();const X=[D(486)],B=u({__name:"hexGridMesh",setup(n){const e=D,t=new(a[e(505)]);return(n,i)=>{const o=e;return f(),v(o(484),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=m(o(494),{args:[1,1]},null,-1)),(f(),d(x,null,{default:h((()=>[g(T,w({baseMaterial:p(t)},n[o(477)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(470)])])),_:1}))],8,X)}}});function G(){const n=["__proto__","601050OJunbU","MeshBasicMaterial","11NGOxhE","input","8MwGlHk","function *\\( *\\)","constructor","log","counter","gger","bind","error","baseMaterial","length","trace","while (true) {}","info","4400160uRRicG","283892IWvsqQ","$attrs","init","stateObject",'{}.constructor("return this")( )',"console","action","debu","TresMesh","warn","rotation","string","19452kJLcjc","9IPXfvs","test","1870980siJiAC","56nKJDnb","prototype","TresPlaneGeometry","20XgxZVD","2293550xfMtFQ","72706VdOeBc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","apply","toString","exception"];return(G=function(){return n})()}function q(n){function e(n){const t=F;if(typeof n===t(487))return function(n){}[t(510)](t(473))[t(500)](t(512));1!==(""+n/n)[t(471)]||n%20==0?function(){return!0}[t(510)]("debu"+t(513)).call(t(482)):function(){return!1}[t(510)](t(483)+"gger")[t(500)](t(479)),e(++n)}try{if(n)return e;e(0)}catch(t){}}!function(n,e){const t=W,i=z();for(;;)try{if(407200===parseInt(t(528))/1+parseInt(t(490))/2*(parseInt(t(516))/3)+parseInt(t(500))/4*(-parseInt(t(502))/5)+-parseInt(t(511))/6+-parseInt(t(523))/7+-parseInt(t(491))/8*(parseInt(t(504))/9)+parseInt(t(494))/10*(parseInt(t(513))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const A=function(){let n=!0;return function(e,t){const i=n?function(){if(t){const n=t[W(496)](e,arguments);return t=null,n}}:function(){};return n=!1,i}}();!function(){A(this,(function(){const n=W,e=new RegExp(n(512)),t=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=L("init");e.test(i+"chain")&&t[n(531)](i+n(529))?L():i("0")}))()}();const O=function(){let n=!0;return function(e,t){const i=n?function(){if(t){const n=t[W(496)](e,arguments);return t=null,n}}:function(){};return n=!1,i}}();function z(){const n=["log","3genhjS","table","bind","__proto__","hasMaskTexture","addBinding","debu","4959668tRDACx","direction","stateObject","wavePow","hexGridGround","322643oLuwco","input","网格整体缩放","test","call","#666666","toString","division","网格横向缩放","divisionScaleX","trace","waveFrequency","TresCanvas","gger","isReversed","TresPerspectiveCamera","方向类别","length",'{}.constructor("return this")( )',"warn","exception","410402IqhRjI","5237336CSrVTn","#de62f2","return (function() ","17891620blwFXv","constructor","apply","speed","渐变宽度","color","43280aaOGUe","prototype","55OsmawZ","网格宽度","9XiEJCs","渐变强度","raisedBottom","info","console","error","string","2565570pcDzRm","function *\\( *\\)","11nXuDGX","颜色取反"];return(z=function(){return n})()}O(void 0,(function(){const n=W;let e;try{e=Function(n(493)+n(487)+");")()}catch(o){e=window}const t=e.console=e[n(508)]||{},i=[n(515),n(488),n(507),n(509),n(489),n(517),n(479)];for(let r=0;r<i[n(486)];r++){const e=O[n(495)][n(501)][n(518)](O),o=i[r],a=t[o]||e;e[n(519)]=O[n(518)](O),e[n(534)]=a[n(534)][n(518)](a),t[o]=e}}))();const E=u({__name:"hexGridGround",setup(n){const e=W,t=b({reflectivity:.8,showGridHelper:!1,scale:1}),a=b({color:e(492),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new o({title:e(527),expanded:!0});return s[e(521)](a,e(520),{label:"图片纹理"}),s[e(521)](a,e(499),{label:"颜色"}),s[e(521)](a,e(497),{label:"速度",min:-5,max:5,step:.1}),s[e(521)](a,"gridWeight",{label:e(503),min:.001,max:.5,step:.001}),s[e(521)](a,e(506),{label:e(498),min:.001,max:1,step:.001}),s[e(521)](a,e(480),{label:"分段",min:.001,max:1,step:.001}),s[e(521)](a,e(526),{label:e(505),min:1,max:30,step:.1}),s[e(521)](a,e(535),{label:e(530),min:.1,max:50,step:.1}),s.addBinding(a,e(537),{label:e(536),min:.1,max:10,step:.1}),s[e(521)](a,e(483),{label:e(514)}),s.addBinding(a,e(524),{label:e(485),min:3,max:6,step:1}),(n,o)=>{const s=e,u=y(s(481));return f(),d(u,{clearColor:s(533),"window-size":""},{default:h((()=>[o[0]||(o[0]=m(s(484),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),g(p(i),{enableDamping:"",autoRotate:""}),g(B,w(a,{scale:9}),null,16),(f(),d(x,null,{default:h((()=>[g(r,w({position:[0,-.06,0]},t),null,16)])),_:1}))])),_:1})}}});function W(n,e){const t=z();return(W=function(n,e){return t[n-=479]})(n,e)}function L(n){function e(n){const t=W;if(typeof n===t(510))return function(n){}[t(495)]("while (true) {}")[t(496)]("counter");1!==(""+n/n)[t(486)]||n%20==0?function(){return!0}[t(495)](t(522)+t(482))[t(532)]("action"):function(){return!1}[t(495)](t(522)+t(482))[t(496)](t(525)),e(++n)}try{if(n)return e;e(0)}catch(t){}}export{E as default};

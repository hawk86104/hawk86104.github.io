import{e as n,a as t,o as e}from"./@tresjs.9lmhsV6t1740450466561.js";import{P as o}from"./tweakpane.yDiyAAkA1740450466561.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.jfM8meFi1740450466561.js";import{_ as a,C as c}from"./three.HaMTRCf61740450466561.js";import{d as i,b as s,a3 as u,r as l,a2 as f,o as p,H as v,N as d,aj as m,ak as g,e as h,f as w,g as k,j as y,u as S,al as _,m as I}from"./@vue.NRI7TcgI1740450466561.js";import"./@vueuse.q8gKo7tC1740450466561.js";import"./all.three.ZTuQc1_h1740450466561.js";import"./oimophysics.x0jH7fze1740450466561.js";const x=M;!function(n,t){const e=M,o=D();for(;;)try{if(599424===parseInt(e(396))/1+-parseInt(e(406))/2*(parseInt(e(378))/3)+-parseInt(e(367))/4*(parseInt(e(407))/5)+-parseInt(e(404))/6+parseInt(e(398))/7+parseInt(e(389))/8*(parseInt(e(400))/9)+parseInt(e(369))/10*(parseInt(e(373))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(382)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){C(this,(function(){const n=M,t=new RegExp(n(380)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=P(n(385));t[n(390)](o+"chain")&&e[n(390)](o+n(394))?P():o("0")}))()}();const b=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(382)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(n,t){const e=D();return(M=function(n,t){return e[n-=360]})(n,t)}b(void 0,(function(){const n=M;let t;try{t=Function("return (function() "+n(386)+");")()}catch(r){t=window}const e=t.console=t[n(405)]||{},o=["log",n(393),n(402),n(397),"exception","table",n(395)];for(let a=0;a<o[n(376)];a++){const t=b[n(381)][n(366)][n(372)](b),r=o[a],c=e[r]||t;t.__proto__=b.bind(b),t[n(387)]=c[n(387)][n(372)](c),e[r]=t}}))();const j=[x(362),x(401)],T=i({__name:x(408),props:{color:{default:"#ffffff"},colorDark:{default:x(360)},speed:{default:1},scale:{default:2}},async setup(e){const o=x;let r,i;const h=e,w=s(),{onLoop:k}=n();k((({delta:n})=>{const t=M;w[t(384)]&&(w[t(384)].material[t(388)][t(392)][t(384)]+=n*h[t(383)])}));const y=([r,i]=u((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,i(),r);y[o(370)]=a[o(379)],y.wrapT=a[o(379)];const S=l({side:a[o(371)],transparent:!0,blending:a[o(409)],flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:y},uScanColor:{type:"v3",value:new(a[o(363)])(h[o(368)])},uScanColorDark:{type:"v3",value:new c(h.colorDark)}},vertexShader:o(364),fragmentShader:"\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n"});return f((()=>{const n=o;w[n(384)]&&(w[n(384)].material.uniforms.uScanColor.value=new(a[n(363)])(h.color),w[n(384)].material[n(388)][n(403)][n(384)]=new(a[n(363)])(h[n(374)]))})),(n,t)=>{const e=o;return p(),v("TresMesh",{ref_key:"tmRef",ref:w,"rotation-x":-Math.PI/2,scale:n[e(401)]},[t[0]||(t[0]=d(e(377),{args:[1,1]},null,-1)),d(e(399),m(g(S)),null,16)],8,j)}}});function P(n){function t(n){const e=M;if("string"==typeof n)return function(n){}.constructor(e(375)).apply(e(365));1!==(""+n/n)[e(376)]||n%20==0?function(){return!0}[e(381)](e(361)+"gger").call("action"):function(){return!1}[e(381)](e(361)+e(391))[e(382)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function D(){const n=["info","uScanColorDark","6711918rrBQfk","console","1696334FYpFvy","75ESMdwf","shaderCircleWave","AdditiveBlending","#000000","debu","rotation-x","Color","\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n","counter","prototype","1516yaHzfE","color","10kiJVPQ","wrapS","DoubleSide","bind","15900742XBxgov","colorDark","while (true) {}","length","TresPlaneGeometry","3mgXwai","RepeatWrapping","function *\\( *\\)","constructor","apply","speed","value","init",'{}.constructor("return this")( )',"toString","uniforms","3213488jEJNMb","test","gger","uTime","warn","input","trace","210751nZViin","error","3597790IsGRdW","TresShaderMaterial","9HHTtwY","scale"];return(D=function(){return n})()}const R=Z;!function(n,t){const e=Z,o=E();for(;;)try{if(592066===parseInt(e(251))/1*(-parseInt(e(215))/2)+-parseInt(e(237))/3+parseInt(e(227))/4*(parseInt(e(254))/5)+parseInt(e(238))/6+-parseInt(e(216))/7*(parseInt(e(223))/8)+parseInt(e(232))/9+parseInt(e(221))/10*(-parseInt(e(234))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){W(this,(function(){const n=Z,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(247),"i"),o=O(n(224));t[n(239)](o+"chain")&&e[n(239)](o+n(230))?O():o("0")}))()}();const H=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[Z(248)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function Z(n,t){const e=E();return(Z=function(n,t){return e[n-=213]})(n,t)}H(void 0,(function(){const n=Z;let t;try{t=Function("return (function() "+n(220)+");")()}catch(r){t=window}const e=t[n(222)]=t[n(222)]||{},o=[n(242),n(225),n(233),"error",n(229),n(219),"trace"];for(let a=0;a<o.length;a++){const t=H[n(244)].prototype[n(252)](H),r=o[a],c=e[r]||t;t.__proto__=H[n(252)](H),t.toString=c[n(228)][n(252)](c),e[r]=t}}))();const z=i({__name:R(255),setup(n){const t=R,a=l({reflectivity:.1,showGridHelper:!1,scale:1}),c=l({color:t(213),colorDark:"#000000",speed:1,scale:2}),i=new o({title:t(253),expanded:!0});return i[t(243)](c,"color",{label:"圈颜色"}),i.addBinding(c,t(241),{label:t(226)}),i[t(243)](c,t(218),{label:"速度",min:.1,max:5,step:.1}),i[t(243)](c,t(249),{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const i=t,s=h("TresCanvas");return p(),w(s,{clearColor:i(240),"window-size":""},{default:k((()=>[o[0]||(o[0]=d(i(250),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),y(S(e),{enableDamping:""}),o[1]||(o[1]=d(i(214),{intensity:6},null,-1)),(p(),w(_,null,{default:k((()=>[y(T,m(g(c)),null,16)])),_:1})),(p(),w(_,null,{default:k((()=>[y(r,I({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function E(){const n=["init","warn","圈渐变色","4yZxtJi","toString","exception","input","while (true) {}","6817779VLHILP","info","2180574sawZZU","stateObject","string","548652NCcgmv","2078664CZqKNy","test","#201919","colorDark","log","addBinding","constructor","action","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","scale","TresPerspectiveCamera","149zyMKHZ","bind","shaderCircleWave地面","3869785MSgftf","circleWave","#ffffff","TresAmbientLight","1442WhnLDU","10227SHqmTl","debu","speed","table",'{}.constructor("return this")( )',"50ckwjbi","console","24KlrPHw"];return(E=function(){return n})()}function O(n){function t(n){const e=Z;if(typeof n===e(236))return function(n){}.constructor(e(231)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(244)](e(217)+e(246)).call(e(245)):function(){return!1}[e(244)](e(217)+e(246)).apply(e(235)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{z as default};

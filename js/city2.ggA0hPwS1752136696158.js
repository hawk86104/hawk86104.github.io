import{e as o,k as n,a as e}from"./@tresjs.DLq12syC1752136696158.js";import{n as W,aR as a,C as r,p as t,bx as i,a2 as c,ab as d,aO as s,cy as l,cz as m,cA as u,cB as f}from"./three.BNH6wr6-1752136696158.js";import{z as k}from"./three-custom-shader-material.BehP6bsv1752136696158.js";import{r as h,i as v,s as S}from"./utils.BJvnV8Nv1752136696158.js";import{b as p,a as g}from"./buildingsCustomShaderMaterial.DyBo--wu1752136696158.js";import{d as C,a3 as R,b as O,G as x,o as P,e as y,j as b,am as Q,f as w,I as N,u as J,F as G,h as j}from"./@vue.BInVSO3Q1752136696158.js";import{_ as B}from"./roadLight.vue_vue_type_script_setup_true_lang.DuSqSi4O1752136696158.js";import"./postprocessing.CPr5BoQh1752136696158.js";import"./@vueuse.BmvRw4vU1752136696158.js";import"./@fesjs.CApmwxMx1752136696158.js";import"./vue-router.qYamoiMP1752136696158.js";import"./lodash-es.C7pWAXPe1752136696158.js";import"./@qlin.q6OWdsQV1752136696158.js";import"./pinia.CsLPLp3A1752136696158.js";import"./@babel.BPq7uOAK1752136696158.js";import"./@floating-ui.BFjFSAYt1752136696158.js";import"./@juggle.CcBCnTIR1752136696158.js";import"./three-mesh-bvh.CSLfwXOa1752136696158.js";!function(){function o(o,n,e,W,a){return T(W- -217,a)}function n(o,n,e,W,a){return T(e- -262,a)}var e,W,a=H();function r(o,n,e,W,a){return T(o- -182,W)}for(;;)try{if(611398===-parseInt(n(0,0,202,0,"r(^@"))/1*(-parseInt(n(0,0,236,0,"a4Tr"))/2)+-parseInt((e="BK9F",W=1070,T(W-658,e)))/3+parseInt(r(331,0,0,"6Q1i"))/4+-parseInt(n(0,0,151,0,"t#)M"))/5*(-parseInt(o(0,0,0,293,"(RB("))/6)+parseInt(n(0,0,190,0,"sXrT"))/7*(-parseInt(r(315,0,0,"JmWK"))/8)+parseInt(o(0,0,0,287,"^uQi"))/9*(parseInt(T(1376-944,"(RB("))/10)+parseInt(n(0,0,175,0,"w4NH"))/11*(parseInt(n(0,0,224,0,"t#)M"))/12))break;a.push(a.shift())}catch(t){a.push(a.shift())}}();var K,M=(K=!0,function(o,n){function e(o,n,e,W,a){return T(n-750,W)}if("YpTkr"!==e(0,1153,0,"3(^*")){var W=K?function(){function W(o,n,W,a,r){return e(0,W- -1308,0,n)}function a(o,n,W,a,r){return e(0,o- -954,0,r)}function r(o,n,W,a,r){return e(0,o- -867,0,a)}function t(o,n,W,a,r){return e(0,n- -473,0,r)}function i(o,n,W,a,r){return e(0,n- -586,0,o)}if("RgRvJ"===W(0,"r(^@",-109)){if(_0x1e0c55){var c=_0x5dc5a6[r(342,0,0,"0yRY")](_0x1c400a,arguments);return _0x362f3c=null,c}}else if(n){if(t(0,786,0,0,"qe&Y")===W(0,"7ZcL",-87)){var d=n[a(268,0,0,0,"5cdz")](o,arguments);return n=null,d}var s;try{s=_0x35d3e6("return (function() "+i("gv@g",600)+");")()}catch(v){s=_0x5b98ac}for(var l=s[W(0,"LYc@",-66)]=s[i("sz[f",643)]||{},m=[t(0,702,0,0,"9NT*"),W(0,"JmWK",-46),t(0,745,0,0,"k]JC"),"error",t(0,723,0,0,"wLCJ"),"table",r(383,0,0,"AUCP")],u=0;u<m[t(0,750,0,0,"gv@g")];u++){var f=_0x4cff50[a(287,0,0,0,"8&Pi")][t(0,791,0,0,"&$l2")][a(302,0,0,0,"5alh")](_0x4ed6b6),k=m[u],h=l[k]||f;f[a(265,0,0,0,"fsI3")]=_0x1ce037[a(297,0,0,0,"zlVY")](_0x263e3c),f[t(0,762,0,0,"E8ee")]=h[W(0,"vbmn",-100)][r(357,0,0,"qe&Y")](h),l[k]=f}}}:function(){};return K=!1,W}var a=_0x314757?function(){if(_0x1ae687){var o=_0x3f13a8[(n="TX0Q",W=541,e(0,W- -724,0,n))](_0x957e23,arguments);return _0x54fd85=null,o}var n,W}:function(){};return _0x740966=!1,a})(void 0,(function(){function o(o,n,e,W,a){return T(n- -99,a)}return M[(r="(RB(",t=-53,T(t- -519,r))]()[o(0,325,0,0,"JmWK")]((W=535,a="5cdz",T(W-100,a))).toString()[(n="f([#",e=991,T(e-574,n))](M)[o(0,330,0,0,"6Q1i")](T(-30- -453,"6Q1i"));var n,e,W,a,r,t}));function L(o,n,e,W,a){return T(n-897,W)}M();var V,z=(V=!0,function(o,n){function e(o,n,e,W,a){return T(e- -37,W)}if(e(0,0,452,"8&Pi")!==e(0,0,447,"#bVw")){var W=V?function(){function W(o,n,W,a,r){return e(0,0,o-110,a)}function a(o,n,W,a,r){return e(0,0,a-646,n)}if("wgzqb"!==W(534,0,0,"8&Pi")){if(n){if(W(567,0,0,"6Q1i")===a(0,"wLCJ",0,1085)){var r=n.apply(o,arguments);return n=null,r}this[a(0,"gv@g",0,1112)].time[a(0,"^uQi",0,1011)]=this[(i=738,c="t#)M",T(i-200-132,c))].getElapsedTime()}}else if(_0x46585c){var t=_0x57859e[W(548,0,0,"sz[f")](_0x335cab,arguments);return _0x3ee59f=null,t}var i,c}:function(){};return V=!1,W}var a=_0x353826[e(0,0,438,"sz[f")](_0xb95be0,arguments);return _0x1e5147=null,a});function H(){var o=["W7NdVCoWWOHWW4JdNxW7zmkTjW","yMj7W68pyY85jHNcM8kRWPraWR8sbrPwChJcNmkBWOawWQD3j8kxWRZdNaC","k8kCpSkaW4egxZ8KW5TTbG","WRPWDq","D8oGe8k/nSklWRbu","AxVdPtBdQa","iZWuqG","dczlW6HvhrmAhSkrW5i","bczEW5tcVCk+rCkaiq","vc4phrG","ymoJl8kOlW","W6hcLbVcLuZdR8kADSks","zM5ubCoBW5JcPZS","WOhcK8o0W7BdTmkhWOe","aCovW4xcVmoA","zmoQnmkokmkdWQ5aB8kmW7T/W6VcOG","W5BdJZhcVCox","W6ZdNYHoWRP3W5jfp0jYWRhdOq","WPZdLgeGrJVdMmkPW4XUW6OH","D2vnf8oCW77cRZSB","WQRcS0vQW7hdI8oiqW","z29Uf8ogW4pcPc8","w1JdTqTQWRFdL8kPWPX+WROVcJeEfSocn8oLeSkHWPJcI8kyumkMkYxdJSkyW7bz","qCkbW40AW7vwc8kO","heVcHg8q","Eu3dLb0","W4BcNJv2mq","W6CvWRRdSKOhW7qdwMRdMmkAWPVdJW","mSkQWPOIWRtcUCoCWR9zCmodu0C","r8oUW53cV8orq8oz","W5hcUueUWPLG","WPVcTYOWWRVdHGef","WRjbW6pcSI7cMSkGtW","WQ0fmbm","WOLayNLRWQddRCorWRO","WPqOW63cQNSaag49cve","WPusW6BcQuO","WRdcPCkOW4OI","DxO7W6Suzq","WQNcHh3cHW","W6OKod4P","W5xcJWJcSwu","WRpcVmk2W4i","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","W6G7jIe/vaO","AH1nlJZcQa","WOPwWOdcSXyHm8kBW78","WPJdPmosk8k9pSoxW5LtuSkxWPFdPqm","AfFdK8oNgG","WQT3pIFcUq","gfRdUmkomSkZiCkv","WOBcJrxcPSoaWQLWBa","W4NcRmobyW","W6XdFLlcJmkCgKaGWPiFWOi","W4FcVIv1ia","WRCinXldI8oCxWXyW5joW4m","W47cGJXNa3RdN8kPW51zW78","ymoGlSk4k8koWRS","W4tcU8omW4ZdMa","W6hcUCoEW6hdPa","rKaLW74pEtmscW","cvtcP3CBAmo6W5W","fYhdRSolgxqq","WQ/dGCk0W5ZcP8kwwCk6WQqUW5FcSW","WRConW7dHmoD","rX8ymXu","hmktW5lcJa","f8oWWO7dISoQ","Bhe8W6OpFZe+","WOGEgSkpxdTte8k5WQNcVetcKW","WQ8dhvi","FKZdNmoG","hcbcW7vBhsu","WO3cTbWQWQ3dOGagcG","WQNcUhBcK8oS","W53dQ0H0WORdPHuqa2u","WQCeoa/dImozva","wdpdR8oi","WOtdQmkFWPJcI8owW4m+pmoFW73dR8k+","WO7dPmoylmk8l8ocW6zg","EaHCmcy","WP9TlJFcLW","gIfnW6ryfaigeSkAW53cOmoRWRq","WODbWO/cUqeNo8kzW5pdSSkoiLxdKxajh8kO","WR5dW5nOWRJcSSkaWPRcSH/dIMW","A3OHW7Ksy3XLmHNcLSk8WO9BW7HEx1yc","W4zhqmoicW","WO5BWRpcHbu","gYPCW7jCjsuzdW","W60cWRhdPLak","W5tdKY7cSSof","WRr2Fg8","rSkhW7Ol","rSknW78aW6Twc8kQW5FdKmkBW6K","fvtcMgWoC8o1W5BcISkYDMjM","nHtcKehcTSoLpCobWRhdJM5hlW","W787vSksfSoLWRddV8olkYJdRvi","WOxcJNFdPmo2WQX1t8kLdq","qaqEpHecW695rmkVWRO","gaXAW4TC","W6FcGXBcG0JdQCkgESkiz8oR","BupdIaddSmkKF8ohWQZdO08","dL4wW4JdVmkscfRcSCoO","WPldUbn7W5G3W7TWWQZdMmkKwaG","W57cQ8ogyxNdJ8klWO0","W6/dJWRcM8oh","W4rjF8ojhgekeq","WPJdSSkgWO7cLSohW5bsDmk3WO/cOG","xdFdVmoucgO","W60iWRG","W4NcQCokAxldSmkjWPRcLq","hszcW6i","cYzbW6m","W4pcV8opW5ldNSkg","WRpcUCkXW4GWWQFcHdbJi8oJBYyhswG","ySk2WOuGWQhcVCo+","W57dQaKWWRZdGWqY","wZ3dJSosgwS9W5G","xdVdUCod"];return(H=function(){return o})()}function T(o,n){var e=H();return T=function(n,W){var a=e[n-=397];if(void 0===T.DyGpkc){var r=function(o){for(var n,e,W="",a="",t=W+r,i=0,c=0;e=o.charAt(c++);~e&&(n=i%4?64*n+e:e,i++%4)?W+=t.charCodeAt(c+10)-10!=0?String.fromCharCode(255&n>>(-2*i&6)):i:0)e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(var d=0,s=W.length;d<s;d++)a+="%"+("00"+W.charCodeAt(d).toString(16)).slice(-2);return decodeURIComponent(a)};T.qKIhRe=function(o,n){var e,W,a=[],t=0,i="";for(o=r(o),W=0;W<256;W++)a[W]=W;for(W=0;W<256;W++)t=(t+a[W]+n.charCodeAt(W%n.length))%256,e=a[W],a[W]=a[t],a[t]=e;W=0,t=0;for(var c=0;c<o.length;c++)t=(t+a[W=(W+1)%256])%256,e=a[W],a[W]=a[t],a[t]=e,i+=String.fromCharCode(o.charCodeAt(c)^a[(a[W]+a[t])%256]);return i},o=arguments,T.DyGpkc=!0}var t=n+e[0],i=o[t];if(i)a=i;else{if(void 0===T.yjKHCR){var c=function(o){this.JxxaWL=o,this.ynASAE=[1,0,0],this.JIISYx=function(){return"newState"},this.hLacjI="\\w+ *\\(\\) *{\\w+ *",this.uPBDCw="['|\"].+['|\"];? *}"};c.prototype.yAKWjQ=function(){var o=new RegExp(this.hLacjI+this.uPBDCw).test(this.JIISYx.toString())?--this.ynASAE[1]:--this.ynASAE[0];return this.QDHgyv(o)},c.prototype.QDHgyv=function(o){return Boolean(~o)?this.awNWcv(this.JxxaWL):o},c.prototype.awNWcv=function(o){for(var n=0,e=this.ynASAE.length;n<e;n++)this.ynASAE.push(Math.round(Math.random())),e=this.ynASAE.length;return o(this.ynASAE[0])},new c(T).yAKWjQ(),T.yjKHCR=!0}a=T.qKIhRe(a,W),o[t]=a}return a},T(o,n)}z(void 0,(function(){function o(o,n,e,W,a){return T(e-113,a)}var n;function e(o,n,e,W,a){return T(a- -466,o)}try{if(c(885,"&O8P",917,958,898)!==e("AUCP",0,0,0,-22))return _0xb0250a[e("0yRY",0,0,0,30)]()[d(110,"TX0Q",117,155,155)](c(1001,"k]JC",990,980,1047))[e("!l]c",0,0,0,-10)]().constructor(_0x109709)[d(129,"k]JC",185,180,125)](d(30,"0)]J",18,2,32));n=Function(e("gv@g",0,0,0,-65)+s(1406,"7]cG",1384,1389,1349)+");")()}catch(h){if(d(27,"#bVw")!==e("f([#",0,0,0,-26))n=window;else{var W=_0x41f976[e("wLCJ",0,0,0,-50)].prototype[e("5cdz",0,0,0,11)](_0x532f76),a=_0x20eaab[_0xb36cc8],r=_0x3b8c37[a]||W;W[e("gv@g",0,0,0,29)]=_0x23c0aa.bind(_0x4de4f7),W[s(1265,"^uQi",1275,1356,1314)]=r[s(1387,")OzN",1321,1391,1359)][c(965,"8MoB",989)](r),_0x3240a2[a]=W}}var t=n[e("&O8P",0,0,0,41)]=n[s(1453,"k]JC",1417,1459,1403)]||{},i=[s(1371,"fsI3",1359,1292,1330),c(967,"f([#",962),o(0,0,581,0,"k]JC"),"error",e("3(^*",0,0,0,15),s(1410,"6Q1i",1369,1351,1385),o(0,0,596,0,"5alh")];function c(o,n,e,W,a){return T(e-502,n)}function d(o,n,e,W,a){return T(o- -370,n)}function s(o,n,e,W,a){return T(a-892,n)}for(var l=0;l<i[d(35,"9NT*")];l++){if("XpKJi"!==o(0,0,534,0,"t#)M")){var m=_0x1cdffb?function(){if(_0x4d0661){var o=_0x7c7eff[(n=95,W="t#)M",e(W,0,0,0,n-110))](_0x5df656,arguments);return _0xfd42bb=null,o}var n,W}:function(){};return _0x3e93ab=!1,m}var u=z[c(0,"7ZcL",972)].prototype[e("fsI3",0,0,0,-59)](z),f=i[l],k=t[f]||u;u[e("LAiV",0,0,0,-23)]=z[e("&O8P",0,0,0,-39)](z),u[s(0,"LYc@",0,0,1331)]=k[s(0,"JmWK",0,0,1325)][o(0,0,554,0,"paaI")](k),t[f]=u}}))();class q extends W{constructor(o={}){function n(o,n,e,W,a){return T(o-999,a)}function e(o,n,e,W,a){return T(a- -419,o)}function W(o,n,e,W,a){return T(W-512,o)}function d(o,n,e,W,a){return T(e-457,o)}function s(o,n,e,W,a){return T(o- -490,W)}super(),this.vertexShader=s(-12,-71,-32,"gv@g"),this.fragmentShader=" \n      varying vec2 vUv;\n      varying vec3 vPositionW;\n      varying vec4 vPos;\n      varying vec3 vNormalW;\n      \n      uniform float time;\n      uniform float fresnelOpacity;\n      uniform float scanlineSize;\n      uniform float fresnelAmount;\n      uniform float signalSpeed;\n      uniform float hologramBrightness;\n      uniform float hologramOpacity;\n      uniform bool blinkFresnelOnly;\n      uniform bool enableBlinking;\n      uniform vec3 hologramColor;\n\n      float flicker( float amt, float time ) {return clamp( fract( cos( time ) * 43758.5453123 ), amt, 1.0 );}\n      float random(in float a, in float b) { return fract((cos(dot(vec2(a,b) ,vec2(12.9898,78.233))) * 43758.5453)); }\n\n      void main() {\n        vec2 vCoords = vPos.xy;\n        vCoords /= vPos.w;\n        vCoords = vCoords * 0.5 + 0.5;\n        vec2 myUV = fract( vCoords );\n\n        // Defines hologram main color\n        vec4 hologramColor = vec4(hologramColor, mix(hologramBrightness, vUv.y, 0.5));\n\n        // Add scanlines\n        float scanlines = 10.;\n        scanlines += 20. * sin(time *signalSpeed * 20.8 - myUV.y * 60. * scanlineSize);\n        scanlines *= smoothstep(1.3 * cos(time *signalSpeed + myUV.y * scanlineSize), 0.78, 0.9);\n        scanlines *= max(0.25, sin(time *signalSpeed) * 1.0);        \n        \n        // Scanlines offsets\n        float r = random(vUv.x, vUv.y);\n        float g = random(vUv.y * 20.2, \tvUv.y * .2);\n        float b = random(vUv.y * .9, \tvUv.y * .2);\n\n        // Scanline composition\n        hologramColor += vec4(r*scanlines, b*scanlines, r, 1.0) / 84.;\n        vec4 scanlineMix = mix(vec4(0.0), hologramColor, hologramColor.a);\n\n        // Calculates fresnel\n        vec3 viewDirectionW = normalize(cameraPosition - vPositionW);\n        float fresnelEffect = dot(viewDirectionW, vNormalW) * (1.6 - fresnelOpacity/2.);\n        fresnelEffect = clamp(fresnelAmount - fresnelEffect, 0., fresnelOpacity);\n\n        // Blinkin effect\n        //Suggested by Octano - https://x.com/OtanoDesign?s=20\n        float blinkValue = enableBlinking ? 0.6 - signalSpeed : 1.0;\n        float blink = flicker(blinkValue, time * signalSpeed * .02);\n    \n        // Final shader composition\n        vec3 finalColor;\n\n        if(blinkFresnelOnly){\n          // finalColor = vec3(1.0,1.0,0);\n          finalColor = scanlineMix.rgb + fresnelEffect * blink;\n        }else{\n          finalColor = scanlineMix.rgb * blink + fresnelEffect;\n        }\n\n        gl_FragColor = vec4( finalColor, hologramOpacity);\n\n      }",this[s(-43,-70,-42,"!l]c")]={time:new a(0),fresnelOpacity:new a(void 0!==o[s(-28,10,-58,"9NT*")]?o[d("&$l2",934,939)]:1),fresnelAmount:new a(void 0!==o.fresnelAmount?o.fresnelAmount:.45),scanlineSize:new a(void 0!==o[d("k]JC",967,947)]?o[d("vbmn",890,866)]:8),hologramBrightness:new a(void 0!==o.hologramBrightness?o[d("3(^*",856,856)]:1),signalSpeed:new a(void 0!==o[W("AUCP",871,950,926)]?o[e("&O8P",0,0,0,23)]:1),hologramColor:new a(void 0!==o[W("0yRY",932,939,922)]?new r(o[d("6Z)B",964,920)]):new r("#00d5ff")),enableBlinking:new a(void 0===o[d("&O8P",813,855)]||o.enableBlinking),blinkFresnelOnly:new a(void 0===o[W("5cdz",900,968,942)]||o.blinkFresnelOnly),hologramOpacity:new a(void 0!==o.hologramOpacity?o.hologramOpacity:1)},this[s(12,-44,54,"6G%m")]=new t,this.setValues(o),this[d("&O8P",0,861)]=void 0!==o.depthTest&&o[n(1453,0,0,0,"!l]c")],this[W("7yPS",0,0,967)]=void 0!==o[e("(RB(",0,0,0,89)]?o[d("8MoB",0,883)]:i,this.transparent=!0,this[n(1433,0,0,0,"JmWK")]=void 0!==o[e("x$yO",0,0,0,86)]?o[e("vbmn",0,0,0,-11)]:c}[L(0,1362,0,"^$3b")](){function o(o,n,e,W,a){return L(0,W- -1612,0,o)}var n,e;this[o("8MoB",0,0,-295)][o("&O8P",0,0,-287)].value=this[(n=1138,e="LYc@",L(0,n- -204,0,e))][o("LYc@",0,0,-265)]()}}const F=C({__name:"importantBuildings",props:{group:{}},setup(n){const e=n,W=0,a=0,t=15,c=1.3,s="#e05b0f",l=new q({blendMode:i,hologramBrightness:2.5,side:d});l.uniforms.fresnelAmount.value=W,l.uniforms.scanlineSize.value=t,l.uniforms.signalSpeed.value=c,l.uniforms.fresnelOpacity.value=a,l.uniforms.hologramColor.value=new r(s),l.uniforms.enableBlinking.value=!1,l.depthTest=!0;let m,u,f=null;(()=>{const o=e.group.getObjectByName("02-huanqiujinrongzhongxin_huanqiujinrongzhongxin_0");o.name="环球金融中心",o.material.dispose(),h(o.geometry),o.material=l,m=e.group.getObjectByName("01-shanghaizhongxindasha_shanghaizhongxindasha_0"),m.name="上海中心",m.material.dispose(),h(m.geometry),m.material=l.clone(),m.material.uniforms.hologramColor.value=new r("#006cf9"),m.material.uniforms.fresnelAmount.value=1,m.material.uniforms.scanlineSize.value=2.1,m.material.uniforms.signalSpeed.value=.4,u=e.group.getObjectByName("03-jinmaodasha_jjinmaodasha_0"),u.name="金茂大厦",u.material.dispose(),h(u.geometry),u.material=l.clone(),u.material.uniforms.hologramColor.value=new r("#5e0fe0"),u.material.uniforms.scanlineSize.value=15,u.material.uniforms.signalSpeed.value=.18,f=e.group.getObjectByName("04-dongfangmingzhu_dongfangmingzhu_0"),f.name="东方明珠塔",f.material.dispose(),h(f.geometry),f.material=l.clone(),f.material.uniforms.scanlineSize.value=5,f.material.uniforms.signalSpeed.value=1.3,f.material.uniforms.hologramColor.value=new r("#e00f0f"),f.material.uniforms.fresnelOpacity.value=.1})();const{onLoop:k}=o();return k((()=>{l.update(),m.material.update(),u.material.update(),f.material.update()})),(o,n)=>null}}),I=["object"],_=C({__name:"buildingsMode",async setup(e){let W,a;v();const{scene:t}=([W,a]=R((()=>n("./plugins/digitalCity/model/shanghaiDraco/shanghaiDraco.gltf",{draco:!0,decoderPath:"./draco/"}))),W=await W,a(),W),i=t.clone(),c=O(0);i.traverse((async o=>{if(o.isMesh&&(-1!==o.name.indexOf("Shanghai")||-1!==o.name.indexOf("Object")))if(-1!==o.name.indexOf("Floor"));else if(-1!==o.name.indexOf("River")){const n=await S(o);n.position.set(0,0,1800),o.add(n)}else(o=>{const{geometry:n}=o;n.computeBoundingBox(),n.computeBoundingSphere(),n.computeBoundsTree();const{max:e,min:W}=n.boundingBox,a=new k({baseMaterial:s,vertexShader:g,fragmentShader:p,silent:!0,uniforms:{uMax:{value:e},uMin:{value:W},uBorderWidth:{value:.006},uCircleTime:{value:3},uColor:{value:new r("#005c58")},uOpacity:{value:.8},uLightColor:{value:new r("#990")},uTopColor:{value:new r("#888800")},uTime:c,uGradient:{value:!0}},depthWrite:!0,depthTest:!0,transparent:!0,side:d});o.material.dispose(),o.material=a})(o),(o=>{const n=new l(o.geometry,1e3);let e=(new m).fromEdgesGeometry(n);e.computeBoundsTree();let W=new u({color:new r("#000"),linewidth:.8,opacity:.6,transparent:!0,depthWrite:!0,depthTest:!0});W.resolution.set(window.innerWidth,window.innerHeight),o.add(new f(e,W))})(o)}));const{onLoop:h}=o();return h((({delta:o})=>{c.value+=o})),(o,n)=>(P(),x(G,null,[(P(),y(Q,null,{default:w((()=>[N("primitive",{object:J(i),position:[1,0,1],"cast-shadow":"","receive-shadow":""},null,8,I)])),_:1})),b(F,{group:J(i)},null,8,["group"])],64))}}),A=C({__name:"city2",setup:o=>(o,n)=>{const W=j("TresCanvas");return P(),y(W,{shadows:"","window-size":"",clearColor:"#333"},{default:w((()=>[n[0]||(n[0]=N("TresPerspectiveCamera",{position:[.5,2,1.5],fov:45,near:.1,far:1e5},null,-1)),b(J(e)),n[1]||(n[1]=N("TresAmbientLight",{color:"#ffffff"},null,-1)),n[2]||(n[2]=N("TresDirectionalLight",{position:[0,3,3],intensity:2,color:"#ffffff","cast-shadow":"","shadow-mapSize-width":1024,"shadow-mapSize-height":1024},null,-1)),(P(),y(Q,null,{default:w((()=>[b(_)])),_:1})),(P(),y(Q,null,{default:w((()=>[b(B,{color:"#ffffff",radius:1,speed:1,geoJson:"plugins/digitalCity/geojson/secondarySmall.geojson","rotation-y":1.3826597599330712,scale:.001025905404044292,position:[-1.877460474821603,.01,-1.5464791950519081]})])),_:1})),n[3]||(n[3]=N("TresGridHelper",{args:[6,10],position:[0,0,0]},null,-1))])),_:1})}});export{A as default};

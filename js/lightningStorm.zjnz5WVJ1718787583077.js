import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.dTztdH3O1718787583077.js";import{B as i,V as s,cj as n,aA as e,N as r,h as o,aw as a,Y as h,r as c,a5 as u}from"./three.OZpCYxlY1718787583077.js";import{r as l,D as p,i as d}from"./@tresjs.yMGhEK7G1718787583077.js";import{c as m}from"./simplex-noise.MycypUyu1718787583077.js";import{d as g,a2 as f,o as y,D as b,u as v,r as w,j as S,g as P,m as x,F as I}from"./@vue.CpOXM7bB1718787583077.js";import"./index.oYhE4Yav1718787583077.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.g93ZgInh1718787583077.js";import"./three-custom-shader-material.JsHLV5bd1718787583077.js";import"./object-hash.qNEzwKzz1718787583077.js";import"./@amap.SdFHYHOw1718787583077.js";import"./jszip.b_9tpgnb1718787583077.js";import"./glsl-tokenizer.gaAYmyHH1718787583077.js";import"./glsl-token-string.I-C2eR7Z1718787583077.js";import"./glsl-token-functions.9MA3WN5r1718787583077.js";import"./@vueuse.jAwx0y-e1718787583077.js";import"./tweakpane.qqn77PB81718787583077.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.15K1C0un1718787583077.js";import"./all.three.11YPfZz61718787583077.js";import"./oimophysics.x0jH7fze1718787583077.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.NHR1bNxS1718787583077.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.qv5sMi7i1718787583077.js";import"./index.NWNYYgod1718787583077.js";import"./three-stdlib.qiumRy5f1718787583077.js";import"./@pmndrs.14-i3u7y1718787583077.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.7_H3IJjg1718787583077.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.vBPZDqPM1718787583077.js";const M=T;function T(t,i){const s=C();return(T=function(t,i){return s[t-=420]})(t,i)}!function(t,i){const s=T,n=C();for(;;)try{if(597980===-parseInt(s(436))/1*(parseInt(s(431))/2)+parseInt(s(579))/3*(-parseInt(s(497))/4)+-parseInt(s(454))/5+parseInt(s(590))/6*(-parseInt(s(492))/7)+parseInt(s(489))/8+-parseInt(s(471))/9+parseInt(s(462))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(422)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){A(this,(function(){const t=T,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(562),"i"),n=z(t(557));i[t(503)](n+t(552))&&s[t(503)](n+t(513))?z():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(422)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();R(void 0,(function(){const t=T;let i;try{i=Function(t(584)+t(515)+");")()}catch(e){i=window}const s=i[t(585)]=i[t(585)]||{},n=[t(508),"warn",t(467),"error",t(539),t(480),t(478)];for(let r=0;r<n.length;r++){const i=R[t(518)].prototype[t(427)](R),e=n[r],o=s[e]||i;i[t(466)]=R[t(427)](R),i.toString=o[t(565)][t(427)](o),s[e]=i}}))();class j extends i{constructor(t={}){const i=T;super(),this[i(459)]=!0,this.type=i(544),this[i(557)](j[i(505)](t,t)),this.createMesh()}static[M(528)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(564)](Math[t(507)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n.currentSeed=(n[e(464)]+1)%i,r},getSeed:function(){return n[t(464)]/i},setSeed:function(s){const e=t;n[e(464)]=Math[e(437)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=M,e=function(s){return i===t?s:s[T(566)]()};return t[n(514)]=void 0!==i[n(514)]?e(i[n(514)]):new s(0,100,0),t[n(461)]=void 0!==i[n(461)]?e(i[n(461)]):new s(0,0,0),t[n(445)]=void 0!==i.timeScale?i[n(445)]:1,t[n(457)]=void 0!==i[n(457)]?i[n(457)]:.9,t[n(432)]=void 0!==i[n(432)]?i[n(432)]:.7,t[n(496)]=void 0!==i[n(496)]?e(i[n(496)]):new s(0,0,1),t.up1=void 0!==i[n(581)]?e(i[n(581)]):new s(0,0,1),t[n(563)]=void 0!==i[n(563)]?i.radius0:1,t[n(452)]=void 0!==i[n(452)]?i[n(452)]:1,t[n(549)]=void 0!==i.radius0Factor?i[n(549)]:.5,t[n(519)]=void 0!==i[n(519)]?i[n(519)]:.2,t[n(550)]=void 0!==i[n(550)]?i[n(550)]:.2,t[n(428)]=void 0!==i[n(428)]?i[n(428)]:void 0===i[n(493)]||void 0===i[n(588)],t[n(493)]=i[n(493)],t[n(588)]=i.deathTime,t[n(510)]=void 0!==i.propagationTimeFactor?i.propagationTimeFactor:.1,t[n(536)]=void 0!==i[n(536)]?i[n(536)]:.9,t.subrayPeriod=void 0!==i.subrayPeriod?i[n(529)]:4,t[n(554)]=void 0!==i.subrayDutyCycle?i.subrayDutyCycle:.6,t[n(430)]=void 0!==i.maxIterations?i[n(430)]:9,t.isStatic=void 0!==i[n(534)]&&i[n(534)],t[n(570)]=void 0!==i.ramification?i[n(570)]:5,t[n(561)]=void 0!==i[n(561)]?i[n(561)]:3,t[n(425)]=void 0!==i[n(425)]?i[n(425)]:.6,t.generateUVs=void 0!==i[n(501)]&&i[n(501)],t.randomGenerator=i[n(560)],t.noiseSeed=i[n(491)],t[n(420)]=i[n(420)],t[n(574)]=i[n(574)],t}[M(453)](t){const i=M;this.isStatic||(this[i(540)][i(428)]||this[i(540)][i(493)]<=t&&t<=this[i(540)][i(588)]?(this.updateMesh(t),t<this[i(537)][0][i(521)]?this[i(573)]=j[i(577)]:t>this[i(537)][0].beginVanishingTime?this[i(573)]=j[i(455)]:this[i(573)]=j[i(553)],this[i(495)]=!0):(this[i(495)]=!1,t<this.rayParameters.birthTime?this.state=j.RAY_UNBORN:this.state=j[i(421)]))}[M(557)](t){const i=M;this[i(540)]=t,this[i(430)]=void 0!==t[i(430)]?Math[i(437)](t.maxIterations):9,t[i(430)]=this.maxIterations,this[i(534)]=void 0!==t[i(534)]&&t[i(534)],t[i(534)]=this[i(534)],this.ramification=void 0!==t.ramification?Math[i(437)](t[i(570)]):5,t[i(570)]=this[i(570)],this[i(561)]=void 0!==t[i(561)]?Math.floor(t[i(561)]):3,t[i(561)]=this.maxSubrayRecursion,this[i(425)]=void 0!==t.recursionProbability?t.recursionProbability:.6,t[i(425)]=this[i(425)],this[i(501)]=void 0!==t[i(501)]&&t.generateUVs,t.generateUVs=this[i(501)],void 0!==t.randomGenerator?(this[i(560)]=t.randomGenerator,this[i(583)]=t[i(560)],void 0!==t[i(491)]&&this[i(583)][i(424)](t[i(491)])):(this[i(560)]=j[i(528)](),this[i(583)]=Math),void 0!==t[i(420)]?this.onDecideSubrayCreation=t[i(420)]:(this[i(463)](),void 0!==t.onSubrayCreation&&(this[i(574)]=t.onSubrayCreation)),this[i(573)]=j.RAY_INITIALIZED,this.maxSubrays=Math[i(532)](1+Math[i(571)](this[i(570)],Math[i(434)](0,this[i(561)]-1))),t[i(546)]=this[i(546)],this[i(558)]=2*(1<<this.maxIterations),this[i(537)]=[];for(let s=0;s<this[i(546)];s++)this[i(537)][i(564)](this[i(556)]());this[i(572)]=[];for(let s=0;s<this.maxRaySegments;s++)this.raySegments[i(564)](this.createSegment());this.time=0,this[i(474)]=0,this[i(499)]=null,this[i(523)]=this[i(501)]?this.createTriangleVerticesWithUVs:this[i(498)],this[i(559)]=0,this[i(484)]=null,this[i(525)]=0,this[i(448)]=!1,this.subrayProbability=0,this[i(587)]=0,this.currentIndex=0,this.currentCoordinate=0,this[i(516)]=0,this[i(531)]=null,this.uvs=null,this[i(527)]=null,this[i(504)]=null,this.uvsAttribute=null,this[i(485)]=m(this.seedGenerator[i(507)]),this[i(511)]=m(this[i(583)].random),this[i(542)]=m(this[i(583)][i(507)]),this.forwards=new s,this[i(479)]=new s,this[i(460)]=new s,this[i(575)]=new s,this[i(458)]=new s,this.middleLinPos=new s,this.newPos=new s,this[i(438)]=new s,this[i(486)]=new s}[M(568)](){const t=M,i=1<<this[t(430)],s=3*(i+1)*this[t(546)],o=18*i*this[t(546)];this[t(531)]=new Float32Array(3*s),this[t(527)]=new Uint32Array(o),this.generateUVs&&(this[t(502)]=new Float32Array(2*s)),this[t(538)](0),this.setIndex(new n(this[t(527)],1)),this[t(504)]=new e(this[t(531)],3),this[t(522)](t(468),this[t(504)]),this[t(501)]&&(this[t(547)]=new e(new Float32Array(this.uvs),2),this.setAttribute("uv",this[t(547)])),!this[t(534)]&&(this[t(481)][t(473)]=r,this[t(504)].usage=r,this[t(501)]&&(this.uvsAttribute.usage=r)),this[t(531)]=this[t(504)].array,this.indices=this.index.array,this.generateUVs&&(this[t(502)]=this[t(547)][t(580)])}updateMesh(t){const i=M;this[i(538)](t),this.drawRange[i(567)]=this.currentIndex,this[i(481)][i(545)]=!0,this[i(504)].needsUpdate=!0,this[i(501)]&&(this[i(547)][i(545)]=!0)}[M(538)](t){const i=M,s=this;this[i(587)]=0,this[i(429)]=0,this.currentCoordinate=0,this[i(516)]=0,this.fractalRay(t,(function(n){const e=i,r=s.currentSubray;t<r[e(493)]||(this[e(540)][e(428)]&&0==s[e(484)].recursion?(s[e(533)](n),s[e(420)](n,s)):t<r[e(521)]?s[e(474)]>=n.fraction0*r[e(510)]&&(s.createPrism(n),s.onDecideSubrayCreation(n,s)):t<r[e(470)]?(s[e(533)](n),s[e(420)](n,s)):(s[e(474)]<=r.vanishingTimeFactor+n[e(456)]*(1-r.vanishingTimeFactor)&&s[e(533)](n),s[e(420)](n,s)))}))}[M(530)](){const t=M;return this.subrays[this[t(559)]++]}[M(446)](t,i){const s=M;t[s(423)].copy(i[s(514)]),t[s(472)][s(450)](i[s(461)]),t[s(496)][s(450)](i.up0),t[s(581)][s(450)](i[s(581)]),t[s(563)]=i[s(563)],t[s(452)]=i[s(452)],t.birthTime=i[s(493)],t[s(588)]=i.deathTime,t[s(445)]=i[s(445)],t[s(457)]=i[s(457)],t.straightness=i[s(432)],t[s(510)]=i[s(510)],t[s(536)]=i[s(536)],t.maxIterations=this.maxIterations,t[s(582)]=void 0!==i.noiseSeed?i[s(491)]:0,t[s(426)]=0}[M(465)](t,i){const s=M;this[s(509)]=t,this[s(499)]=i,this.numSubrays=0,this[s(446)](this[s(530)](),this[s(540)]);for(let n=0;n<this[s(559)];n++){const i=this[s(537)][n];this[s(484)]=i,this[s(560)][s(424)](i.seed),i.endPropagationTime=o[s(440)](i[s(493)],i[s(588)],i[s(510)]),i[s(470)]=o[s(440)](i[s(588)],i[s(493)],1-i[s(536)]);const e=this[s(560)][s(507)];i[s(541)][s(520)](e(),e(),e())[s(576)](1e3),i[s(441)][s(520)](e(),e(),e())[s(576)](1e3),this.timeFraction=(t-i[s(493)])/(i[s(588)]-i[s(493)]),this[s(525)]=0,this[s(448)]=!0;const r=this[s(512)]();r[s(494)]=0,r[s(423)][s(450)](i[s(423)]),r[s(472)][s(450)](i.pos1),r[s(541)][s(450)](i[s(541)]),r.linPos1[s(450)](i.linPos1),r[s(496)][s(450)](i[s(496)]),r[s(581)][s(450)](i[s(581)]),r[s(563)]=i.radius0,r[s(452)]=i[s(452)],r[s(578)]=0,r.fraction1=1,r.positionVariationFactor=1-i[s(432)],this[s(433)]=this[s(570)]*Math[s(571)](this[s(425)],i.recursion)/(1<<i[s(430)]),this[s(586)](r)}this.currentSegmentCallback=null,this[s(484)]=null}[M(586)](t){const i=M;if(t[i(494)]>=this.currentSubray[i(430)])return void this.currentSegmentCallback(t);this.forwards[i(490)](t.pos1,t[i(423)]);let s=this[i(506)][i(483)]();s<1e-6&&(this.forwards[i(520)](0,0,.01),s=this[i(506)][i(483)]());const n=.5*(t[i(563)]+t[i(452)]),e=.5*(t[i(578)]+t[i(456)]),r=this[i(509)]*this[i(484)][i(445)]*Math[i(571)](2,t[i(494)]);this[i(458)].lerpVectors(t[i(423)],t.pos1,.5),this.middleLinPos[i(439)](t[i(541)],t[i(441)],.5);const o=this[i(475)];this.newPos[i(520)](this.simplexX(o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(542)](o.x,o.y,o.z,r)),this[i(551)][i(576)](t.positionVariationFactor*s),this[i(551)][i(487)](this[i(458)]);const a=this[i(512)]();a.pos0[i(450)](t[i(423)]),a.pos1.copy(this.newPos),a[i(541)][i(450)](t[i(541)]),a[i(441)][i(450)](this[i(475)]),a[i(496)].copy(t[i(496)]),a[i(581)][i(450)](t.up1),a.radius0=t.radius0,a.radius1=n,a[i(578)]=t[i(578)],a.fraction1=e,a[i(543)]=t.positionVariationFactor*this[i(484)][i(457)],a.iteration=t[i(494)]+1;const h=this.getNewSegment();h.pos0[i(450)](this[i(551)]),h.pos1[i(450)](t[i(472)]),h[i(541)][i(450)](this[i(475)]),h[i(441)][i(450)](t[i(441)]),this[i(486)][i(526)](t.up0,this.forwards[i(548)]()),h[i(496)][i(526)](this.forwards,this[i(486)]).normalize(),h[i(581)].copy(t[i(581)]),h[i(563)]=n,h[i(452)]=t[i(452)],h[i(578)]=e,h[i(456)]=t[i(456)],h[i(543)]=t.positionVariationFactor*this[i(484)][i(457)],h[i(494)]=t[i(494)]+1,this.fractalRayRecursive(a),this[i(586)](h)}[M(533)](t){const i=M;this[i(479)][i(490)](t.pos1,t[i(423)])[i(548)](),this[i(448)]&&(this.currentCreateTriangleVertices(t[i(423)],t.up0,this[i(479)],t[i(563)],0),this[i(448)]=!1),this[i(523)](t[i(472)],t[i(496)],this.forwardsFill,t[i(452)],t[i(456)]),this.createPrismFaces()}[M(498)](t,i,s,n){const e=M;this[e(460)][e(526)](i,s)[e(576)](n*j[e(569)]),this.down[e(450)](i)[e(576)](-n*j.SIN30DEG);const r=this.vPos,o=this.vertices;r[e(450)](t).sub(this.side)[e(487)](this[e(575)]),o[this[e(535)]++]=r.x,o[this[e(535)]++]=r.y,o[this[e(535)]++]=r.z,r.copy(t).add(this[e(460)])[e(487)](this[e(575)]),o[this[e(535)]++]=r.x,o[this[e(535)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i)[e(576)](n)[e(487)](t),o[this[e(535)]++]=r.x,o[this[e(535)]++]=r.y,o[this[e(535)]++]=r.z,this.currentVertex+=3}[M(555)](t,i,s,n,e){const r=M;this[r(460)][r(526)](i,s)[r(576)](n*j[r(569)]),this.down[r(450)](i)[r(576)](-n*j[r(447)]);const o=this.vPos,a=this[r(531)],h=this[r(502)];o.copy(t)[r(451)](this.side).add(this[r(575)]),a[this[r(535)]++]=o.x,a[this[r(535)]++]=o.y,a[this[r(535)]++]=o.z,h[this[r(516)]++]=e,h[this[r(516)]++]=0,o.copy(t)[r(487)](this.side).add(this[r(575)]),a[this[r(535)]++]=o.x,a[this[r(535)]++]=o.y,a[this[r(535)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(516)]++]=.5,o.copy(i)[r(576)](n)[r(487)](t),a[this[r(535)]++]=o.x,a[this[r(535)]++]=o.y,a[this[r(535)]++]=o.z,h[this[r(516)]++]=e,h[this[r(516)]++]=1,this[r(587)]+=3}createPrismFaces(t){const i=M,s=this.indices;t=this[i(587)]-6,s[this[i(429)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(429)]++]=t+5,s[this[i(429)]++]=t+1,s[this[i(429)]++]=t+5,s[this[i(429)]++]=t+4,s[this[i(429)]++]=t+0,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+4,s[this[i(429)]++]=t+0,s[this[i(429)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(429)]++]=t+2,s[this[i(429)]++]=t+0,s[this[i(429)]++]=t+3,s[this[i(429)]++]=t+2,s[this[i(429)]++]=t+3,s[this[i(429)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this[t(560)][t(507)];this[t(420)]=function(s,n){const e=t,r=n[e(484)],a=n[e(540)][e(529)],h=n.rayParameters[e(554)],c=n.rayParameters[e(428)]&&0==r[e(426)]?-i()*a:o[e(440)](r.birthTime,r[e(521)],s[e(578)])-i()*a,u=n[e(509)]-c,l=Math[e(437)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(433)]),r[e(426)]<n[e(561)]&&n[e(559)]<n[e(546)]&&i()<d){const t=n.addNewSubray(),o=n[e(560)][e(443)]();t[e(582)]=p,n[e(560)].setSeed(p),t.recursion=r[e(426)]+1,t[e(430)]=Math[e(434)](1,r[e(430)]-1),t[e(541)][e(520)](i(),i(),i()).multiplyScalar(1e3),t[e(441)][e(520)](i(),i(),i())[e(576)](1e3),t[e(496)][e(450)](r[e(496)]),t.up1[e(450)](r[e(581)]),t[e(563)]=s[e(563)]*n[e(540)][e(549)],t[e(452)]=Math.min(n.rayParameters[e(550)],s[e(452)]*n[e(540)][e(519)]),t[e(493)]=c+l*a,t[e(588)]=t.birthTime+a*h,!n[e(540)][e(428)]&&0==r.recursion&&(t.birthTime=Math[e(434)](t[e(493)],r[e(493)]),t.deathTime=Math[e(435)](t[e(588)],r[e(588)])),t[e(445)]=2*r[e(445)],t[e(457)]=r[e(457)],t[e(432)]=r[e(432)],t[e(510)]=r[e(510)],t[e(536)]=r[e(536)],n[e(574)](s,r,t,n),n[e(560)][e(424)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(574)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(449)]=function(s,o,h,c,u,l){const p=t;h[p(423)][p(450)](s[p(423)]),n[p(490)](o.pos1,o[p(423)]),e[p(450)](n)[p(548)](),n[p(576)](s[p(578)]+(1-s[p(578)])*(i()*c));const d=n[p(483)]();r[p(526)](o[p(496)],e);const m=2*Math.PI*i();r[p(576)](Math[p(488)](m)),a.copy(o[p(496)])[p(576)](Math[p(589)](m)),h.pos1[p(450)](r)[p(487)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(487)](n).add(o[p(423)])},this[t(442)]=function(s,o,h,c,u,l){const p=t;h[p(423)][p(450)](s[p(423)]),n[p(490)](o.pos1,o[p(423)]),e[p(450)](n)[p(548)](),n[p(576)](s[p(578)]+(1-s[p(578)])*((2*i()-1)*c));const d=n[p(483)]();r[p(526)](o[p(496)],e);const m=2*Math.PI*i();r[p(576)](Math[p(488)](m)),a.copy(o[p(496)])[p(576)](Math.sin(m)),h[p(472)][p(450)](r)[p(487)](a)[p(576)](d*u*(l+i()*(1-l)))[p(487)](n)[p(487)](o[p(423)])}}[M(556)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(517)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(512)](){const t=M;return this[t(572)][this[t(525)]++]}[M(450)](t){const i=M;return super[i(450)](t),this.init(j.copyParameters({},t[i(540)])),this}[M(566)](){const t=M;return new this.constructor(j[t(505)]({},this[t(540)]))}}function C(){const t=["5303844SrNSnz","pos1","usage","timeFraction","middleLinPos","action","string","trace","forwardsFill","table","index","RAY_INITIALIZED","length","currentSubray","simplexX","cross1","add","cos","934896TitByA","subVectors","noiseSeed","56126cyGktT","birthTime","iteration","visible","up0","16qZBZhK","createTriangleVerticesWithoutUVs","currentSegmentCallback","debu","generateUVs","uvs","test","positionAttribute","copyParameters","forwards","random","log","time","propagationTimeFactor","simplexY","getNewSegment","input","sourceOffset",'{}.constructor("return this")( )',"currentUVCoordinate","createSegment","constructor","radius1Factor","set","endPropagationTime","setAttribute","currentCreateTriangleVertices","while (true) {}","currentSegmentIndex","crossVectors","indices","createRandomGenerator","subrayPeriod","addNewSubray","vertices","ceil","createPrism","isStatic","currentCoordinate","vanishingTimeFactor","subrays","fillMesh","exception","rayParameters","linPos0","simplexZ","positionVariationFactor","LightningStrike","needsUpdate","maxSubrays","uvsAttribute","normalize","radius0Factor","minRadius","newPos","chain","RAY_STEADY","subrayDutyCycle","createTriangleVerticesWithUVs","createSubray","init","maxRaySegments","numSubrays","randomGenerator","maxSubrayRecursion","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","radius0","push","toString","clone","count","createMesh","COS30DEG","ramification","pow","raySegments","state","onSubrayCreation","down","multiplyScalar","RAY_PROPAGATING","fraction0","192399jNoXiB","array","up1","seed","seedGenerator","return (function() ","console","fractalRayRecursive","currentVertex","deathTime","sin","342ypgzqp","onDecideSubrayCreation","RAY_EXTINGUISHED","apply","pos0","setSeed","recursionProbability","recursion","bind","isEternal","currentIndex","maxIterations","1028590ALOgOF","straightness","subrayProbability","max","min","2GaFbUz","floor","vPos","lerpVectors","lerp","linPos1","subrayCylinderPosition","getSeed","call","timeScale","initSubray","SIN30DEG","isInitialSegment","subrayConePosition","copy","sub","radius1","update","3657875cwpDlv","RAY_VANISHING","fraction1","roughness","middlePos","isLightningStrike","side","destOffset","35441570BLEYyz","createDefaultSubrayCreationCallbacks","currentSeed","fractalRay","__proto__","info","position","gger","beginVanishingTime"];return(C=function(){return t})()}function z(t){function i(t){const s=T;if(typeof t===s(477))return function(t){}[s(518)](s(524)).apply("counter");1!==(""+t/t)[s(483)]||t%20==0?function(){return!0}[s(518)](s(500)+s(469))[s(444)](s(476)):function(){return!1}.constructor(s(500)+s(469))[s(422)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[M(482)]=0,j.RAY_UNBORN=1,j.RAY_PROPAGATING=2,j[M(553)]=3,j[M(455)]=4,j.RAY_EXTINGUISHED=5,j[M(569)]=Math.cos(30*Math.PI/180),j[M(447)]=Math[M(589)](30*Math.PI/180);const D=H;!function(t,i){const s=H,n=F();for(;;)try{if(847909===parseInt(s(238))/1+parseInt(s(270))/2+-parseInt(s(235))/3+parseInt(s(239))/4+parseInt(s(234))/5*(-parseInt(s(237))/6)+-parseInt(s(224))/7*(-parseInt(s(262))/8)+-parseInt(s(257))/9*(parseInt(s(242))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function F(){const t=["isEternal","lightningMaxPeriod","multiplyScalar","lerp","16340886WJidhM","noiseSeed","return (function() ","while (true) {}","add","16pRsBNM","lightningParameters","console",'{}.constructor("return this")( )',"chain","destOffset","maxLightnings","log","1935142gdnTVW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","maxSlope","geometry","input","string","set","onRayPosition","call","debu","table","update","birthTime","copyParameters","lightningMaxDuration","lightningMinDuration","counter","onLightningDown","splice","toString","length","info","exception","push","stormParams","init","error","lightningMinPeriod","function *\\( *\\)","clone","warn","4924493PGLDHr","prototype","state","inited","maxHeight","__proto__","gger","trace","random","lightningMaterial","1630XPdaQQ","837096ZOpAgt","test","18150KdYfwd","465240UOCXLI","4355744GCiImJ","remove","bind","10qZgZva","apply","lightningsMeshes","deathTime","isLightningStorm","size","deadLightningsMeshes","constructor","nextLightningTime","copy","minHeight"];return(F=function(){return t})()}!function(){V(this,(function(){const t=H,i=new RegExp(t(221)),s=new RegExp(t(271),"i"),n=L(t(218));i[t(236)](n+t(266))&&s[t(236)](n+t(274))?L():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(243)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(t,i){const s=F();return(H=function(t,i){return s[t-=209]})(t,i)}G(void 0,(function(){const t=H;let i;try{i=Function(t(259)+t(265)+");")()}catch(e){i=window}const s=i[t(264)]=i[t(264)]||{},n=[t(269),t(223),t(214),t(219),t(215),t(280),t(231)];for(let r=0;r<n[t(213)];r++){const i=G.constructor[t(225)][t(241)](G),e=n[r],o=s[e]||i;i[t(229)]=G.bind(G),i.toString=o[t(212)][t(241)](o),s[e]=i}}))();class N extends a{constructor(t={}){const i=H;super(),this[i(246)]=!0,this.stormParams=t,t[i(247)]=void 0!==t.size?t.size:1e3,t[i(252)]=void 0!==t.minHeight?t[i(252)]:80,t[i(228)]=void 0!==t[i(228)]?t[i(228)]:100,t[i(272)]=void 0!==t[i(272)]?t[i(272)]:1.1,t.maxLightnings=void 0!==t.maxLightnings?t[i(268)]:3,t.lightningMinPeriod=void 0!==t.lightningMinPeriod?t.lightningMinPeriod:3,t.lightningMaxPeriod=void 0!==t[i(254)]?t[i(254)]:7,t.lightningMinDuration=void 0!==t[i(285)]?t.lightningMinDuration:1,t[i(284)]=void 0!==t[i(284)]?t[i(284)]:2.5,this.lightningParameters=j.copyParameters(t[i(263)],t.lightningParameters),this[i(263)][i(253)]=!1,this[i(233)]=void 0!==t[i(233)]?t[i(233)]:new h({color:11599871}),void 0!==t[i(277)]?this[i(277)]=t.onRayPosition:this.onRayPosition=function(s,n){const e=i;n[e(276)]((Math[e(232)]()-.5)*t.size,0,(Math[e(232)]()-.5)*t.size);const r=o[e(256)](t[e(252)],t[e(228)],Math.random());s.set(t[e(272)]*(2*Math[e(232)]()-1),1,t[e(272)]*(2*Math[e(232)]()-1))[e(255)](r)[e(261)](n)},this[i(210)]=t[i(210)],this[i(227)]=!1,this[i(250)]=0,this.lightningsMeshes=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(217)][i(268)];s++){const t=new j(j.copyParameters({},this.lightningParameters)),s=new c(t,this[i(233)]);this[i(248)][i(216)](s)}}[D(281)](t){const i=D;if(!this[i(227)]&&(this[i(250)]=this.getNextLightningTime(t)*Math[i(232)](),this[i(227)]=!0),t>=this[i(250)]){const s=this[i(248)].pop();if(s){const n=j.copyParameters(s[i(273)].rayParameters,this[i(263)]);n[i(282)]=t,n[i(245)]=t+o.lerp(this[i(217)].lightningMinDuration,this[i(217)][i(284)],Math[i(232)]()),this[i(277)](n.sourceOffset,n[i(267)]),n[i(258)]=Math[i(232)](),this[i(261)](s),this[i(244)].push(s)}this[i(250)]=this.getNextLightningTime(t)}let s=0,n=this[i(244)][i(213)];for(;s<n;){const e=this[i(244)][s],r=e[i(273)],o=r[i(226)];r[i(281)](t),o===j.RAY_PROPAGATING&&r.state>o&&this.onLightningDown&&this[i(210)](r),r.state===j.RAY_EXTINGUISHED?(this[i(244)][i(211)](this.lightningsMeshes.indexOf(e),1),this[i(248)][i(216)](e),this[i(240)](e),n--):s++}}getNextLightningTime(t){const i=D;return t+o.lerp(this[i(217)][i(220)],this[i(217)][i(254)],Math.random())/(this[i(217)][i(268)]+1)}[D(251)](t,i){const s=D;return super[s(251)](t,i),this[s(217)][s(247)]=t[s(217)].size,this[s(217)][s(252)]=t[s(217)].minHeight,this[s(217)][s(228)]=t[s(217)][s(228)],this[s(217)][s(272)]=t[s(217)][s(272)],this[s(217)][s(268)]=t.stormParams[s(268)],this.stormParams[s(220)]=t[s(217)][s(220)],this[s(217)][s(254)]=t.stormParams.lightningMaxPeriod,this[s(217)][s(285)]=t.stormParams[s(285)],this[s(217)][s(284)]=t.stormParams[s(284)],this[s(263)]=j[s(283)]({},t[s(263)]),this[s(233)]=t.stormParams.lightningMaterial,this[s(210)]=t[s(210)],this}[D(222)](){const t=D;return new(this[t(249)])(this[t(217)])[t(251)](this)}}function L(t){function i(t){const s=H;if(typeof t===s(275))return function(t){}[s(249)](s(260))[s(243)](s(209));1!==(""+t/t)[s(213)]||t%20==0?function(){return!0}[s(249)](s(279)+s(230))[s(278)]("action"):function(){return!1}.constructor(s(279)+"gger")[s(243)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const E=Y;!function(t,i){const s=Y,n=X();for(;;)try{if(208692===parseInt(s(503))/1*(parseInt(s(482))/2)+parseInt(s(468))/3*(parseInt(s(443))/4)+-parseInt(s(501))/5+-parseInt(s(506))/6+parseInt(s(450))/7+parseInt(s(444))/8*(-parseInt(s(500))/9)+-parseInt(s(491))/10*(-parseInt(s(494))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(474)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=Y,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(492),"i"),n=Q(t(447));i.test(n+t(477))&&s[t(454)](n+t(456))?Q():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(474)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=X();return(Y=function(t,i){return s[t-=439]})(t,i)}U(void 0,(function(){const t=Y,i=function(){const t=Y;let i;try{i=Function(t(487)+t(452)+");")()}catch(s){i=window}return i}(),s=i[t(441)]=i[t(441)]||{},n=[t(458),t(453),t(475),"error",t(472),t(461),t(490)];for(let e=0;e<n[t(481)];e++){const i=U.constructor[t(469)][t(448)](U),r=n[e],o=s[r]||i;i.__proto__=U[t(448)](U),i[t(502)]=o.toString[t(448)](o),s[r]=i}}))();const Z=[E(476)],k=g({__name:E(440),props:{color:{default:E(473)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=E,n=t,e=new(u[i(483)])(n.color),r=new h({color:e}),o=new s(0,-1,0);let a=0;const c=new(u[i(445)]),p=new(u[i(445)]),d={roughness:n.roughness,straightness:n[i(485)],radius0:n[i(505)],radius1:n[i(497)],timeScale:n[i(446)],subrayPeriod:n[i(451)],subrayDutyCycle:n[i(488)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(484)](t,s,n,.6,.6,.5),a=e[r(489)].sourceOffset.y,c[r(478)](n[r(499)],e[r(489)][r(495)]);const h=o[r(465)](c);p[r(479)](o)[r(439)](h),c[r(471)](p);const u=h/a>.5?a/h:1;p.multiplyScalar(u),c.add(p),n[r(499)][r(459)](c,e.rayParameters[r(495)])}},m=new N({size:n[i(493)],minHeight:n[i(463)],maxHeight:n[i(457)],maxSlope:.6,maxLightnings:n[i(470)],lightningParameters:d,lightningMaterial:r});f((()=>{const t=i,s=m[t(498)];s[t(493)]=n[t(493)],s.minHeight=n[t(463)],s[t(457)]=n[t(457)],r[t(455)][t(466)](n[t(455)]),d[t(467)]=n.roughness,d.straightness=n[t(485)],d[t(505)]=n[t(505)],d.radius1=n[t(497)],d[t(446)]=n.timeScale}));const{onLoop:g}=l();return g((({elapsed:t})=>{m[i(496)](t)})),(t,s)=>{const n=i;return y(),b(n(449),{object:v(m),renderOrder:9999},null,8,Z)}}});function X(){const t=["action","1631164XVguDz","1993800FQYwzw","Vector3","timeScale","init","bind","primitive","227227QHdtGo","subrayPeriod",'{}.constructor("return this")( )',"warn","test","color","input","maxHeight","log","addVectors","while (true) {}","table","call","minHeight","debu","dot","set","roughness","3DjoSGW","prototype","maxLightnings","sub","exception","#b0ffff","apply","info","object","chain","subVectors","copy","string","length","74jQRZEY","Color","subrayConePosition","straightness","gger","return (function() ","subrayDutyCycle","rayParameters","trace","56630nDSKcv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","size","451hKJoZt","sourceOffset","update","radius1","stormParams","pos1","9ISfvCc","1044900wGAjJX","toString","7507oaiQKp","stateObject","radius0","1699782chmsee","multiplyScalar","lightStorm","console"];return(X=function(){return t})()}function Q(t){function i(t){const s=Y;if(typeof t===s(480))return function(t){}.constructor(s(460))[s(474)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(464)+"gger")[s(462)](s(442)):function(){return!1}.constructor(s(464)+s(486))[s(474)](s(504)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const $=B;function B(t,i){const s=W();return(B=function(t,i){return s[t-=387]})(t,i)}!function(t,i){const s=B,n=W();for(;;)try{if(798189===parseInt(s(405))/1+parseInt(s(410))/2+parseInt(s(422))/3*(parseInt(s(425))/4)+parseInt(s(403))/5*(parseInt(s(431))/6)+parseInt(s(420))/7*(-parseInt(s(406))/8)+parseInt(s(426))/9+parseInt(s(415))/10*(-parseInt(s(397))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[B(395)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){K(this,(function(){const t=B,i=new RegExp(t(412)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt(t(418));i[t(402)](n+t(413))&&s[t(402)](n+t(393))?tt():n("0")}))()}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[B(395)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function W(){const t=["constructor","input","#92399e","apply","action","33DdrmJm","lightningStorm","未部半径","debu","端部半径","test","5PHtAsj","counter","718183jzPfei","1594552IhQApQ","bind","gger","color","2059340odXgJq","info","function *\\( *\\)","chain","length","10637090PZDCNG","#6f6f6f","粗糙度","init","trace","7ibEKXy","直度度","793059yPMATZ","maxHeight","toString","8FavYZY","8537760LhtIzm","string","radius1","minHeight",'{}.constructor("return this")( )',"5780616zOPtPo","value","table","return (function() ","#ffbde7","exception","roughness","console","call","__proto__","radius0","时间缩放","while (true) {}"];return(W=function(){return t})()}J(void 0,(function(){const t=B,i=function(){const t=B;let i;try{i=Function(t(434)+t(430)+");")()}catch(s){i=window}return i}(),s=i[t(438)]=i[t(438)]||{},n=["log","warn",t(411),"error",t(436),t(433),t(419)];for(let e=0;e<n[t(414)];e++){const i=J.constructor.prototype[t(407)](J),r=n[e],o=s[r]||i;i[t(388)]=J[t(407)](J),i[t(424)]=o[t(424)][t(407)](o),s[r]=i}}))();const q=g({__name:$(398),setup(i){const s=$,n=w({cellSize:60,cellThickness:1,cellColor:s(416),sectionColor:s(394),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(435),roughness:{label:s(417),value:.85,min:0,max:1,step:.01},straightness:{label:s(421),value:.65,min:0,max:1,step:.01},radius0:{label:s(401),value:1,min:.1,max:10,step:.01},radius1:{label:s(399),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(390),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:P((()=>[S(k,{minHeight:v(e).value,maxHeight:v(r)[m(432)],color:v(o)[m(432)],roughness:v(a).value,straightness:v(h)[m(432)],radius0:v(c)[m(432)],radius1:v(u).value,timeScale:v(l)[m(432)]},null,8,[m(429),m(423),m(409),m(437),"straightness",m(389),m(428),"timeScale"]),S(v(_),x({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(v(d))],64)}}});function tt(t){function i(t){const s=B;if(typeof t===s(427))return function(t){}[s(392)](s(391)).apply(s(404));1!==(""+t/t)[s(414)]||t%20==0?function(){return!0}.constructor(s(400)+"gger")[s(387)](s(396)):function(){return!1}[s(392)](s(400)+s(408)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

import{e as n,h as t,a as e,o}from"./@tresjs.Uh9iM8du1742436572432.js";import{P as i}from"./tweakpane.yDiyAAkA1742436572432.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.vVGFK2591742436572432.js";import{_ as s}from"./three.RUAk_tvU1742436572432.js";import{d as a,a3 as u,w as c,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as b}from"./@vue.deO5D3Lf1742436572432.js";import"./postprocessing.5QD_59xS1742436572432.js";import"./@vueuse.F4UpVCIS1742436572432.js";import"./all.three.R6hwj2TF1742436572432.js";import"./oimophysics.x0jH7fze1742436572432.js";const y=M;!function(n,t){const e=M,o=k();for(;;)try{if(308767===parseInt(e(279))/1+parseInt(e(272))/2*(parseInt(e(271))/3)+parseInt(e(265))/4+-parseInt(e(277))/5+-parseInt(e(285))/6*(parseInt(e(315))/7)+parseInt(e(299))/8*(-parseInt(e(313))/9)+parseInt(e(284))/10*(parseInt(e(316))/11))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(281)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=M,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(291),"i"),o=B(n(289));t[n(297)](o+n(293))&&e[n(297)](o+"input")?B():o("0")}))()}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(281)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function k(){const n=["apply","debu","raisedBottom","10CUHhOs","1681098yfXOCr","waveFrequency","bind","hasMaskTexture","init","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","chain","fragmentShader","gridWeight","baseMaterial","test","return (function() ","1348840svqxjQ","warn","exception","trace","speed","DoubleSide","time","divisionScaleX","error","side","direction","call","wavePow","MeshPhongMaterial","18GbOQmV","length","7TYYwCm","3435850dVsJqy","toString","isReversed","2209288FVGUnx","hexGridMaterial","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","gger","string","action","39534YFnQMd","20wMvlPr",'{}.constructor("return this")( )',"division","value","while (true) {}","1548240WClLhB","info","239356ZuQCHX","constructor"];return(k=function(){return n})()}function M(n,t){const e=k();return(M=function(n,t){return e[n-=263]})(n,t)}I(void 0,(function(){const n=M;let t;try{t=Function(n(298)+n(273)+");")()}catch(i){t=window}const e=t.console=t[n(292)]||{},o=["log",n(300),n(278),n(307),n(301),"table",n(302)];for(let r=0;r<o[n(314)];r++){const t=I[n(280)].prototype.bind(I),i=o[r],s=e[i]||t;t.__proto__=I[n(287)](I),t[n(263)]=s[n(263)].bind(s),e[i]=t}}))();const C=y(267),T=a({__name:y(266),props:{baseMaterial:{default:new(s[y(312)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(o){const i=y;let r,a;const p=o,v={gridWeight:{value:p.gridWeight},raisedBottom:{value:p[i(283)]},waveFrequency:{value:p[i(286)]},wavePow:{value:p[i(311)]},direction:{value:p[i(309)]},isReversed:{value:p[i(264)]},hasMaskTexture:{value:p.hasMaskTexture},maskTexture:{value:null},division:{value:p[i(274)]},divisionScaleX:{value:p[i(306)]},time:{value:0}};p.maskTexture&&(v.maskTexture[i(275)]=([r,a]=u((()=>e([p.maskTexture]))),r=await r,a(),r)),c((()=>[p[i(295)],p[i(283)],p.waveFrequency,p.wavePow,p[i(274)],p.divisionScaleX,p[i(309)],p[i(264)],p.hasMaskTexture]),(([n,t,e,o,r,s,a,u,c])=>{const l=i;v.gridWeight[l(275)]=n,v[l(283)][l(275)]=t,v.waveFrequency.value=e,v[l(311)][l(275)]=o,v.division[l(275)]=r,v[l(306)][l(275)]=s,v[l(309)].value=a,v[l(264)].value=u,v[l(288)][l(275)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=i;v[t(305)][t(275)]+=n*p[t(303)]})),(n,e)=>{const r=i;return l(),f(d(t),{baseMaterial:o[r(296)],vertexShader:C,side:s[r(304)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[r(296),r(308),r(294)])}}});function B(n){function t(n){const e=M;if(typeof n===e(269))return function(n){}[e(280)](e(276))[e(281)](e(290));1!==(""+n/n)[e(314)]||n%20==0?function(){return!0}.constructor(e(282)+e(268))[e(310)](e(270)):function(){return!1}[e(280)](e(282)+e(268)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const j=q;!function(n,t){const e=q,o=D();for(;;)try{if(950448===parseInt(e(304))/1+parseInt(e(282))/2+-parseInt(e(292))/3+parseInt(e(314))/4*(parseInt(e(278))/5)+-parseInt(e(283))/6*(-parseInt(e(293))/7)+-parseInt(e(296))/8*(parseInt(e(285))/9)+-parseInt(e(297))/10*(parseInt(e(307))/11))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const P=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[q(317)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){P(this,(function(){const n=q,t=new RegExp(n(299)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=X(n(298));t.test(o+n(277))&&e[n(289)](o+"input")?X():o("0")}))()}();const S=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[q(317)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();S(void 0,(function(){const n=q,t=function(){const n=q;let t;try{t=Function(n(301)+n(280)+");")()}catch(e){t=window}return t}(),e=t[n(300)]=t.console||{},o=[n(284),"warn",n(291),n(313),n(302),n(309),n(286)];for(let i=0;i<o[n(312)];i++){const t=S[n(295)].prototype[n(288)](S),r=o[i],s=e[r]||t;t[n(311)]=S[n(288)](S),t[n(290)]=s[n(290)][n(288)](s),e[r]=t}}))();const F=["rotation"];function q(n,t){const e=D();return(q=function(n,t){return e[n-=276]})(n,t)}function D(){const n=["return (function() ","exception","counter","1851453WlqmKf","action","gger","3319151odVqZw","$attrs","table","MeshBasicMaterial","__proto__","length","error","4dCtkgE","TresPlaneGeometry","hexGridMesh","apply","TresMesh","chain","2295110xogBpR","call",'{}.constructor("return this")( )',"string","1695060ugYxLG","33342PFKtmt","log","9SKyfld","trace","while (true) {}","bind","test","toString","info","1529055ZFiyJY","112oQohbo","debu","constructor","9466416dvcKGf","20DBJqyD","init","function *\\( *\\)","console"];return(D=function(){return n})()}const R=a({__name:j(316),setup(n){const t=j,e=new(s[t(310)]);return(n,o)=>{const i=t;return l(),p(i(276),{rotation:[-Math.PI/2,0,0]},[o[0]||(o[0]=v(i(315),{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(T,g({baseMaterial:d(e)},n[i(308)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,["baseMaterial"])])),_:1}))],8,F)}}});function X(n){function t(n){const e=q;if(typeof n===e(281))return function(n){}.constructor(e(287))[e(317)](e(303));1!==(""+n/n).length||n%20==0?function(){return!0}[e(295)](e(294)+e(306))[e(279)](e(305)):function(){return!1}[e(295)](e(294)+"gger")[e(317)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const W=z;!function(n,t){const e=z,o=L();for(;;)try{if(431146===-parseInt(e(381))/1*(-parseInt(e(418))/2)+parseInt(e(380))/3+parseInt(e(405))/4+-parseInt(e(423))/5+parseInt(e(406))/6+-parseInt(e(379))/7*(parseInt(e(425))/8)+parseInt(e(392))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const A=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(403)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){A(this,(function(){const n=z,t=new RegExp(n(428)),e=new RegExp(n(389),"i"),o=Z(n(434));t[n(422)](o+n(388))&&e[n(422)](o+n(435))?Z():o("0")}))()}();const G=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function L(){const n=["color","861511wekSnI","103020AqhutC","1673uCfHRa","hexGridGround","table","颜色取反","info","#de62f2","wavePow","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","图片纹理","网格宽度","4855005DvuYJJ","#666666","while (true) {}","length","division","__proto__","action","console","direction","addBinding","gger","apply","TresCanvas","917632qJHqrj","517908HxXNcL","waveFrequency","prototype","raisedBottom","isReversed","方向类别","渐变强度","toString","return (function() ","网格整体缩放","call","exception","592TjprNW","bind","constructor","网格横向缩放","test","1691040EHHgsF","log","40OcrBQB","渐变宽度","hasMaskTexture","function *\\( *\\)","gridWeight","counter","TresPerspectiveCamera","string","debu","init","input"];return(L=function(){return n})()}function z(n,t){const e=L();return(z=function(n,t){return e[n-=379]})(n,t)}G(void 0,(function(){const n=z;let t;try{t=Function(n(414)+'{}.constructor("return this")( ));')()}catch(i){t=window}const e=t.console=t[n(399)]||{},o=[n(424),"warn",n(385),"error",n(417),n(383),"trace"];for(let r=0;r<o[n(395)];r++){const t=G[n(420)][n(408)][n(419)](G),i=o[r],s=e[i]||t;t[n(397)]=G[n(419)](G),t[n(413)]=s[n(413)].bind(s),e[i]=t}}))();const H=a({__name:W(382),setup(n){const t=W,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:t(386),speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new i({title:t(382),expanded:!0});return a[t(401)](s,t(427),{label:t(390)}),a[t(401)](s,t(436),{label:"颜色"}),a[t(401)](s,"speed",{label:"速度",min:-5,max:5,step:.1}),a[t(401)](s,t(429),{label:t(391),min:.001,max:.5,step:.001}),a.addBinding(s,t(409),{label:t(426),min:.001,max:1,step:.001}),a[t(401)](s,t(407),{label:"分段",min:.001,max:1,step:.001}),a[t(401)](s,t(387),{label:t(412),min:1,max:30,step:.1}),a.addBinding(s,t(396),{label:t(415),min:.1,max:50,step:.1}),a[t(401)](s,"divisionScaleX",{label:t(421),min:.1,max:10,step:.1}),a.addBinding(s,t(410),{label:t(384)}),a[t(401)](s,t(400),{label:t(411),min:3,max:6,step:1}),(n,i)=>{const a=t,u=b(a(404));return l(),f(u,{clearColor:a(393),"window-size":""},{default:m((()=>[i[0]||(i[0]=v(a(431),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(o),{enableDamping:"",autoRotate:""}),h(R,g(s,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function Z(n){function t(n){const e=z;if(typeof n===e(432))return function(n){}.constructor(e(394))[e(403)](e(430));1!==(""+n/n)[e(395)]||n%20==0?function(){return!0}.constructor(e(433)+e(402))[e(416)](e(398)):function(){return!1}[e(420)](e(433)+e(402))[e(403)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{H as default};

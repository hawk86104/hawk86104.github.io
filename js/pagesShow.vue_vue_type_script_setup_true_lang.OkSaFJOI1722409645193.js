import{Z as t,a6 as n,C as o,cc as e,cd as r,ce as i,cf as u,k as c,bS as s,ab as a,ad as l}from"./three.6E5muTWJ1722409645193.js";import{f,$ as p,d}from"./@tresjs.qmCJ68Vp1722409645193.js";import{C as h}from"./three-custom-shader-material.Tfk8gm3s1722409645193.js";import"./object-hash.Une5niKX1722409645193.js";import"./@amap.VDWlHANn1722409645193.js";import"./glsl-tokenizer.bKHxJMPW1722409645193.js";import{d as m,b as y,a1 as g,w,o as v,D as b,u as _,r as C,a4 as x,e as I,f as M,g as T,J as R,j as S,aj as j,ak as A,F as O,I as B,G as k,m as E}from"./@vue.9bHx4gg21722409645193.js";!function(t,n){const o=H,e=G();for(;;)try{if(855700===parseInt(o(458))/1+parseInt(o(471))/2*(-parseInt(o(466))/3)+parseInt(o(491))/4+-parseInt(o(462))/5*(parseInt(o(481))/6)+-parseInt(o(480))/7*(-parseInt(o(468))/8)+parseInt(o(489))/9*(parseInt(o(484))/10)+-parseInt(o(486))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const L=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){L(this,(function(){const t=H,n=new RegExp(t(473)),o=new RegExp(t(477),"i"),e=D("init");n[t(465)](e+"chain")&&o[t(465)](e+t(478))?D():e("0")}))()}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[H(483)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function H(t,n){const o=G();return(H=function(t,n){return o[t-=456]})(t,n)}z(void 0,(function(){const t=H;let n;try{n=Function("return (function() "+t(495)+");")()}catch(r){n=window}const o=n[t(460)]=n[t(460)]||{},e=[t(496),"warn",t(469),t(494),t(482),t(488),t(467)];for(let i=0;i<e[t(475)];i++){const n=z.constructor.prototype[t(490)](z),r=e[i],u=o[r]||n;n[t(456)]=z[t(490)](z),n[t(457)]=u.toString[t(490)](u),o[r]=n}}))();const P=async()=>{const t=H,n=await f("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(461)]((n=>{const i=t;n[i(485)]===i(472)&&(o=n),n[i(485)]===i(493)&&(e=n),n[i(485)]===i(459)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function D(t){function n(t){const o=H;if(typeof t===o(470))return function(t){}[o(464)](o(474))[o(483)](o(492));1!==(""+t/t)[o(475)]||t%20==0?function(){return!0}[o(464)](o(463)+o(487)).call(o(479)):function(){return!1}.constructor(o(463)+o(487))[o(483)](o(476)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function G(){const t=["exception","apply","20aeKBkN","name","11283855wDPEmP","gger","table","5551281csneJv","bind","52184yczohh","counter","LANDMASS","error",'{}.constructor("return this")( )',"log","__proto__","toString","1003310JRbmPm","ROADS","console","traverse","25UzgtLP","debu","constructor","test","3063ardoLr","trace","140552cpjzLP","info","string","566xlidRs","CITY_UNTRIANGULATED","function *\\( *\\)","while (true) {}","length","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","action","532WfHnwp","1697724fkDuHn"];return(G=function(){return t})()}const F=V;!function(t,n){const o=V,e=N();for(;;)try{if(961910===-parseInt(o(261))/1+-parseInt(o(246))/2+parseInt(o(218))/3*(parseInt(o(280))/4)+parseInt(o(248))/5+parseInt(o(271))/6+-parseInt(o(265))/7+-parseInt(o(264))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){W(this,(function(){const t=V,n=new RegExp(t(228)),o=new RegExp(t(275),"i"),e=q("init");n.test(e+t(277))&&o[t(245)](e+t(242))?q():e("0")}))()}();const Z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[V(255)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();Z(void 0,(function(){const t=V;let n;try{n=Function(t(227)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n.console=n[t(234)]||{},e=[t(237),"warn",t(258),t(256),t(272),t(223),t(232)];for(let i=0;i<e[t(274)];i++){const n=Z[t(226)].prototype[t(251)](Z),r=e[i],u=o[r]||n;n[t(221)]=Z.bind(Z),n[t(276)]=u[t(276)].bind(u),o[r]=n}}))();const $=[F(249)];function V(t,n){const o=N();return(V=function(t,n){return o[t-=216]})(t,n)}function N(){const t=["landColor","150UTiQVq","uOpacity","land","__proto__","buildingsModelCustomShader","table","#ffff00","bulidingsColor","constructor","return (function() ","function *\\( *\\)","while (true) {}","computeBoundingSphere","#112233","trace","material","console","renderOrder","stateObject","log","gger","call","__csm","setStyle","input","uGradient","Color","test","336900bKvlyp","#ffffff","3870635HEvviQ","object","gradient","bind","opacity","isArray","debu","apply","error","color","info","boundingBox","value","644619KvrBWu","action","topColor","9890912xIVMhR","29155nYyggb","dispose","side","DoubleSide","model","primitive","11204586qkzdCD","exception","#e523ff","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","chain","uniforms","counter","29916PZSEpG","city","string"];return(N=function(){return t})()}const U=m({__name:F(222),props:{model:{},bulidingsColor:{default:F(273)},landColor:{default:F(231)},topColor:{default:F(224)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const r=F,i=e,u=y(0),c=i[r(269)][r(281)];c[r(235)]=1001;const s=i[r(269)][r(220)];(()=>{const t=r,{geometry:e}=c;e.computeBoundingBox(),e[t(230)]();const{max:s,min:a}=e[t(259)];if(c[t(233)][t(240)])return;const l=new h({baseMaterial:c[t(233)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:s},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(244)])(i[t(225)])},uOpacity:{value:i.opacity},uLightColor:{value:new(n[t(244)])(t(247))},uTopColor:{value:new o(i[t(263)])},uTime:u,uGradient:{value:i.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(268)]});c[t(233)][t(266)](),c[t(233)]=l})();const{onLoop:a}=p();a((({delta:t})=>{u[r(260)]+=t})),g((()=>{const n=r;i[n(225)]&&c[n(233)][n(278)].uColor[n(260)][n(241)](i.bulidingsColor),i[n(217)]&&((n,o)=>{const e=r;let u;"cu"===n||n===e(220)&&(u=Array[e(253)](s[e(233)])?s[e(233)]:[s[e(233)]],u.forEach((n=>{const r=e;n[o].setStyle(i[r(217)]),n[r(267)]=t})))})("land",n(257)),i.opacity&&(c[n(233)][n(278)][n(219)].value=i[n(252)])})),w(i,((t,n)=>{const o=r;c.material.uniforms[o(243)][o(260)]=t[o(250)]}));const l=i[r(269)][r(269)].clone();return(t,n)=>{const o=r;return v(),b(o(270),{object:_(l)},null,8,$)}}});function q(t){function n(t){const o=V;if(typeof t===o(216))return function(t){}[o(226)](o(229))[o(255)](o(279));1!==(""+t/t)[o(274)]||t%20==0?function(){return!0}[o(226)](o(254)+o(238))[o(239)](o(262)):function(){return!1}[o(226)]("debu"+o(238)).apply(o(236)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const J=tt;!function(t,n){const o=tt,e=X();for(;;)try{if(815438===parseInt(o(457))/1*(-parseInt(o(504))/2)+-parseInt(o(451))/3+parseInt(o(508))/4*(-parseInt(o(458))/5)+-parseInt(o(450))/6*(-parseInt(o(470))/7)+-parseInt(o(473))/8+-parseInt(o(489))/9*(-parseInt(o(464))/10)+-parseInt(o(474))/11*(-parseInt(o(459))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const K=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(507)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){K(this,(function(){const t=tt,n=new RegExp(t(488)),o=new RegExp(t(486),"i"),e=ot(t(468));n.test(e+t(510))&&o[t(460)](e+t(483))?ot():e("0")}))()}();const Q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(507)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function X(){const t=["10mtXiPH","matrix","Shader","warn","init","string","7zJibLB","clone","primitive","10365880WTuvmM","29084GONAEN","constructor","#FFF","innerHeight","color","geometry","uOpacity","return (function() ","opacity","input","info","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","function *\\( *\\)","13050459brMOuk","length","action","bind","counter","uColor","toString","debu","log"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","Wireframe","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","console","value","linewidth","1294FeMuna","table","__proto__","apply","2956vxTcqa","builds","chain","innerWidth","call",'{}.constructor("return this")( )',"3682872TQyGXk","642633VtApxN","applyMatrix4","trace","fromEdgesGeometry","set","object","1398ibwyyu","5295IAwooL","8844dCExLH","test","width","material","style"];return(X=function(){return t})()}Q(void 0,(function(){const t=tt;let n;try{n=Function(t(481)+t(449)+");")()}catch(r){n=window}const o=n[t(501)]=n[t(501)]||{},e=[t(497),t(467),t(484),"error",t(487),t(505),t(453)];for(let i=0;i<e.length;i++){const n=Q.constructor.prototype.bind(Q),r=e[i],u=o[r]||n;n[t(506)]=Q[t(492)](Q),n.toString=u[t(495)][t(492)](u),o[r]=n}}))();const Y=[J(456)];function tt(t,n){const o=X();return(tt=function(t,n){return o[t-=448]})(t,n)}const nt=m({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:J(476)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const n=J,s=t;let a=null,l=null;if(s[n(463)]===n(499)){const t=new e(s[n(509)][n(479)]);let o=(new r)[n(454)](t),c=new i({color:s[n(478)],linewidth:s.width,opacity:s[n(482)],transparent:!0,depthWrite:!0,depthTest:!0});c.resolution[n(455)](window[n(511)],window[n(477)]),a=new u(o,c),a[n(452)](s[n(509)].matrix[n(471)]())}else{l={transparent:!0,uniforms:{uColor:{value:new o(s[n(478)])},uOpacity:{value:s.opacity}},vertexShader:n(500),fragmentShader:n(498)};const t=new e(s.builds[n(479)]),r=new c(l);a=new LineSegments(t,r),a[n(452)](s[n(509)][n(465)][n(471)]()),a.material[n(503)]=s[n(461)],a.renderOrder=1e3}return g((()=>{const t=n;s[t(463)]===t(466)&&(s[t(478)]&&(l[t(485)][t(494)][t(502)]=new o(s.color)),s[t(482)]&&(l[t(485)][t(480)][t(502)]=s[t(482)])),s[t(463)]===t(499)&&(s[t(478)]&&(a[t(462)][t(478)]=new o(s[t(478)])),s[t(482)]&&(a[t(462)].opacity=s[t(482)])),s[t(461)]&&(a[t(462)][t(503)]=s[t(461)])})),(t,o)=>{const e=n;return v(),b(e(472),{object:_(a)},null,8,Y)}}});function ot(t){function n(t){const o=tt;if(typeof t===o(469))return function(t){}.constructor("while (true) {}")[o(507)](o(493));1!==(""+t/t)[o(490)]||t%20==0?function(){return!0}[o(475)](o(496)+"gger")[o(448)](o(491)):function(){return!1}[o(475)]("debugger")[o(507)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const et=ut;!function(t,n){const o=ut,e=ft();for(;;)try{if(446893===parseInt(o(458))/1+parseInt(o(497))/2+parseInt(o(502))/3+-parseInt(o(477))/4*(-parseInt(o(499))/5)+parseInt(o(463))/6*(parseInt(o(501))/7)+-parseInt(o(495))/8+parseInt(o(467))/9*(-parseInt(o(475))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ut(476)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){rt(this,(function(){const t=ut,n=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=dt(t(504));n[t(492)](e+t(469))&&o.test(e+t(461))?dt():e("0")}))()}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ut(476)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function ut(t,n){const o=ft();return(ut=function(t,n){return o[t-=452]})(t,n)}it(void 0,(function(){const t=ut;let n;try{n=Function("return (function() "+t(474)+");")()}catch(r){n=window}const o=n[t(484)]=n[t(484)]||{},e=[t(460),t(493),t(490),"error",t(491),t(464),t(468)];for(let i=0;i<e.length;i++){const n=it[t(485)].prototype.bind(it),r=e[i],u=o[r]||n;n[t(470)]=it.bind(it),n[t(453)]=u[t(453)][t(498)](u),o[r]=n}}))();const ct=R("TresAmbientLight",{color:et(459)},null,-1),st=R("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:et(459)},null,-1),at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(){const t=["constructor","string","TresGridHelper","model","builds","info","exception","test","warn","showGridHelper","4938048VTRRVK","TresPerspectiveCamera","1055500qQTpGd","bind","60VMFHJH","debu","608461wxZeUK","808956DtEqwz","counter","init","showBuildings","toString","disableRender","showAxesHelper","call","stateObject","395315crxodD","#ffffff","log","input","perspectiveCameraRef","6Pkeltb","table","TresAxesHelper","gger","61983pigEaU","trace","chain","__proto__","while (true) {}","city","TresCanvas",'{}.constructor("return this")( )',"1490rVjUVR","apply","270224GuFawH","#000000","length","$slots","action","ability","autoRotate","console"];return(ft=function(){return t})()}const pt=m({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=C({clearColor:n(478),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:a,toneMapping:l,disableRender:r[n(454)]}),u=C({autoRotate:r[n(483)],enableDamping:!0});let c=null;r[n(452)]&&([o,e]=x((()=>P())),o=await o,e(),c=o);const f=y(),p=y();return(t,o)=>{const e=n,s=I(e(473));return v(),M(s,E({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:T((()=>[R(e(496),{ref_key:e(462),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),S(_(d),j(A(u)),null,16),ct,st,r[e(452)]&&_(c)?(v(),b(O,{key:0},[S(U,{model:_(c)},null,8,[e(488)]),S(nt,{builds:_(c)[e(472)],color:"#000"},null,8,[e(489)])],64)):B("",!0),k(t[e(480)],e(482)),r[e(455)]?(v(),b(e(465),at)):B("",!0),r[e(494)]?(v(),b(e(487),lt)):B("",!0)])),_:3},16)}}});function dt(t){function n(t){const o=ut;if(typeof t===o(486))return function(t){}[o(485)](o(471)).apply(o(503));1!==(""+t/t)[o(479)]||t%20==0?function(){return!0}[o(485)]("debu"+o(466))[o(456)](o(481)):function(){return!1}[o(485)](o(500)+o(466))[o(476)](o(457)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{U as _,nt as a,pt as b,P as l};

import{P as t}from"./tweakpane.yHWGBmom1726273176332.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.bqeYt0R21726273176332.js";import{_ as r}from"./heatmap.js-fix.IWhE33pF1726273176332.js";import{h as i,_ as c,bW as s,s as u}from"./three.874nNzAX1726273176332.js";import{r as a}from"./utils.3r2MlQfg1726273176332.js";import{d as p}from"./pinia.sTdGQtra1726273176332.js";import{b as f,d as l,a3 as h,o as d,E as m,L as g,u as y,F as v,q as b,V as w,O as I,Q as _,I as j,M as x,a4 as S,r as M,j as O,g as R,m as E}from"./@vue.JNsx1iN61726273176332.js";import{c as z,d as D,a as F}from"./three-mesh-bvh.qZ1iQe8O1726273176332.js";import{_ as B}from"./@fesjs.Le0G27v81726273176332.js";import"./@tresjs.BFyWuCYn1726273176332.js";import"./@vueuse.NxhkGURn1726273176332.js";import"./three-custom-shader-material.rb-2297Q1726273176332.js";import"./object-hash.POLi8wZH1726273176332.js";import"./@amap.5r4w7xpt1726273176332.js";import"./jszip.nlLK-hOV1726273176332.js";import"./glsl-tokenizer.pufBtMwG1726273176332.js";import"./glsl-token-string.tJdjKq7d1726273176332.js";import"./glsl-token-functions.g-9MLpdi1726273176332.js";import"./vue-router.QsvKvlu81726273176332.js";import"./lodash-es.kYt-_xTG1726273176332.js";import"./@qlin.yHhFDldE1726273176332.js";import"./@floating-ui.BPbuo5Gx1726273176332.js";import"./@juggle.7yjBMqoW1726273176332.js";!function(t,n){const e=G,o=Z();for(;;)try{if(611896===-parseInt(e(526))/1+parseInt(e(495))/2*(parseInt(e(524))/3)+-parseInt(e(527))/4+parseInt(e(512))/5+parseInt(e(543))/6+parseInt(e(506))/7*(-parseInt(e(539))/8)+parseInt(e(493))/9*(parseInt(e(534))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(518)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){k(this,(function(){const t=G,n=new RegExp(t(505)),e=new RegExp(t(503),"i"),o=T(t(498));n[t(508)](o+t(521))&&e[t(508)](o+t(502))?T():o("0")}))()}();const A=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function G(t,n){const e=Z();return(G=function(t,n){return e[t-=493]})(t,n)}A(void 0,(function(){const t=G;let n;try{n=Function("return (function() "+t(535)+");")()}catch(r){n=window}const e=n[t(532)]=n.console||{},o=[t(504),"warn","info",t(538),t(507),t(496),t(501)];for(let i=0;i<o[t(519)];i++){const n=A[t(513)].prototype.bind(A),r=o[i],c=e[r]||n;n.__proto__=A[t(514)](A),n[t(516)]=c.toString[t(514)](c),e[r]=n}}))();const P=(t,n)=>t.getValueAt(n)+-10;function Z(){const t=["1344545tttbgE","constructor","bind","debu","toString","left","apply","length","push","chain","call","gger","1140khctpF","_config","516117sRKJGI","3485012hrfour","rgb(0,255,0)","none","randInt","position","console","while (true) {}","250710rWNwcO",'{}.constructor("return this")( )',"absolute","width","error","1636040ihqdEC","height","yellow","appendChild","116058LNrGQC","441OOBzuZ","counter","3616OLFOjx","table","style","init","string","display","trace","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","function *\\( *\\)","7tsnDpT","exception","test","create","top","createElement"];return(Z=function(){return t})()}function T(t){function n(t){const e=G;if(typeof t===e(499))return function(t){}[e(513)](e(533))[e(518)](e(494));1!==(""+t/t)[e(519)]||t%20==0?function(){return!0}[e(513)]("debu"+e(523))[e(522)]("action"):function(){return!1}[e(513)](e(515)+"gger")[e(518)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function U(t,n){const e=L();return(U=function(t,n){return e[t-=113]})(t,n)}const $=U;function L(){const t=["input","stateObject","info","value","log","function *\\( *\\)","error","call","warn","1072647qcXHGV","14TwKmoC","4mXFiBL","trace","length","gger","__proto__","counter","test","buildingsHeatmap","7076448bOBFmS","init","46AerQtL","3515490EfrSVD","debu","bind","console","apply","5988035ewKshB","table","return (function() ","while (true) {}","string","30jvUFbU","constructor","26507965MIPQNg","prototype","1280262OGzNOj","3412yGFIsP","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(L=function(){return t})()}!function(t,n){const e=U,o=L();for(;;)try{if(688257===-parseInt(e(138))/1*(parseInt(e(114))/2)+-parseInt(e(139))/3+-parseInt(e(128))/4*(-parseInt(e(144))/5)+-parseInt(e(113))/6*(parseInt(e(127))/7)+-parseInt(e(136))/8+parseInt(e(126))/9*(-parseInt(e(149))/10)+parseInt(e(151))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(143)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=U,n=new RegExp(t(122)),e=new RegExp(t(116),"i"),o=q(t(137));n[t(134)](o+"chain")&&e[t(134)](o+t(117))?q():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(143)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Q(void 0,(function(){const t=U;let n;try{n=Function(t(146)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(142)]=n[t(142)]||{},o=[t(121),t(125),t(119),t(123),t(115),t(145),t(129)];for(let i=0;i<o[t(130)];i++){const n=Q[t(150)][t(152)].bind(Q),r=o[i],c=e[r]||n;n[t(132)]=Q[t(141)](Q),n.toString=c.toString[t(141)](c),e[r]=n}}))();const X=p($(135),(()=>{const t=f(!1),n=f(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t.value=n},setTemperature:function(t){n[U(120)]=t}}}));function q(t){function n(t){const e=U;if(typeof t===e(148))return function(t){}.constructor(e(147))[e(143)](e(133));1!==(""+t/t)[e(130)]||t%20==0?function(){return!0}[e(150)](e(140)+e(131))[e(124)]("action"):function(){return!1}[e(150)]("debu"+e(131))[e(143)](e(118)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const V=J;!function(t,n){const e=J,o=C();for(;;)try{if(820861===-parseInt(e(557))/1*(parseInt(e(521))/2)+-parseInt(e(518))/3*(parseInt(e(536))/4)+parseInt(e(519))/5*(-parseInt(e(496))/6)+-parseInt(e(497))/7+parseInt(e(543))/8+-parseInt(e(509))/9*(parseInt(e(527))/10)+parseInt(e(529))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(516)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function C(){const t=["return (function() ","$patch","log","children","701476GfxlNh","primitive","prototype","debu","constructor","object","geometry","2423312kcursR","setShowDiv","height","_renderer","buildingsHeatmap","computeBoundsTree","clone","uniforms","value","disposeBoundsTree","error","string","stateObject","init","353443qvRYad","setTemperature","bind","24uNuczl","5412372OGquSX","Mesh","uOpacity","exception","ShaderMaterial","mergeGeometries","makeRotationX","gger","trace","console","test","attributes","2898Acwmxm","length",'{}.constructor("return this")( )',"model","DoubleSide","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","Texture","apply","info","21cuGcXv","1779010UPRUeh","land","6wpnfIT","Matrix4","opacity","raycast","counter","rotation-x","38190NIYelR","normal","68551791cpWfRq","while (true) {}","BufferGeometry"];return(C=function(){return t})()}!function(){W(this,(function(){const t=J,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=nt(t(556));n.test(o+"chain")&&e[t(507)](o+"input")?nt():o("0")}))()}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(516)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();H(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function(t(532)+t(511)+");")()}catch(e){n=window}return n}(),e=n[t(506)]=n[t(506)]||{},o=["log","warn",t(517),t(553),t(500),"table",t(505)];for(let r=0;r<o[t(510)];r++){const n=H[t(540)][t(538)].bind(H),i=o[r],c=e[i]||n;n.__proto__=H[t(495)](H),n.toString=c.toString[t(495)](c),e[i]=n}}))();const K=["object",V(526)],Y=[V(541)];function J(t,n){const e=C();return(J=function(t,n){return e[t-=495]})(t,n)}const tt=l({__name:V(547),props:{model:{},opacity:{default:1}},setup(t){const n=V;(()=>{const t=J;c[t(531)].prototype[t(548)]=z,c[t(531)].prototype[t(552)]=D,u[t(538)][t(524)]=F})();const e=t,o=((t=250,n=250,e=!0)=>{const o=G,i=document[o(511)]("heatmap-canvas");return i[o(497)][o(531)]=o(536),!e&&(i.style[o(500)]=o(529)),i[o(497)][o(510)]="0",i.style[o(517)]="0",document.body[o(542)](i),r[o(509)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:"rgb(0,0,255)",.55:o(528),.85:o(541),1:"rgb(255,0,0)"}})})();((t,n)=>{const e=G;if(!n){let o=0;for(n=[];o<1e3;)n[e(520)]({x:i.randInt(1,t[e(525)][e(537)]),y:i[e(530)](1,t._config[e(540)]),value:i.randInt(-10,36)}),o++}t.setData({max:36,min:-10,data:n})})(o);const p=new(c[n(515)])(o[n(546)].canvas);p.needsUpdate=!0;const f=e[n(512)].city[n(549)]();delete f[n(542)][n(508)].normal,delete f[n(542)].attributes.uv;const l=f[n(542)][n(549)]().applyMatrix4(f.matrix),b=e.model[n(520)][n(549)]();delete b.geometry[n(508)][n(528)];const w=b.geometry[n(549)]().applyMatrix4(b.matrix),I=s[n(502)]([l,w]);I.applyMatrix4((new(c[n(522)]))[n(503)](Math.PI/2)),a(I),I.computeBoundsTree();const _=(t=>{const o=n;return new(c[o(501)])({vertexShader:o(514),fragmentShader:"\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t",uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:c[o(513)]})})(p),j=new(c[n(498)])(I,_);h((()=>{const t=n;e[t(523)]&&(_[t(550)][t(499)][t(551)]=e.opacity)}));const x=X(),S=t=>{const e=n;if(t){const n={x:t.uv.x*o._config.width,y:(1-t.uv.y)*o._config[e(545)]};console.log("数值：",t),console[e(534)]("数值———：",P(o,n)),x[e(558)](P(o,n))}},M=t=>{t&&x[n(533)]({showDiv:!0})},O=t=>{t&&x[n(544)](!1)};return(t,o)=>{const r=n;return d(),m(v,null,[g("primitive",{object:y(j),"rotation-x":-Math.PI/2,onPointerMove:S,onPointerEnter:M,onPointerLeave:O},null,40,K),g(r(537),{object:e.model[r(512)][r(535)][0][r(549)]()},null,8,Y)],64)}}});function nt(t){function n(t){const e=J;if(typeof t===e(554))return function(t){}[e(540)](e(530))[e(516)](e(525));1!==(""+t/t)[e(510)]||t%20==0?function(){return!0}[e(540)](e(539)+"gger").call("action"):function(){return!1}[e(540)](e(539)+e(504))[e(516)](e(555)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const et=B({__name:"dataDiv",setup(t){const n=X(),e=f({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return b((()=>{window.addEventListener("mousemove",o)})),w((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>I((d(),m("div",{class:"title",style:x(e.value)},"温度："+j(y(n).temperature)+"℃ ",5)),[[_,y(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]);function ot(){const t=["table","#000","7529696QKHZBo","debu","chain","41yoHYsS","6881MrdpQW","log","prototype","24610190oBxpFn","action","3381138GhCDuX","constructor",'{}.constructor("return this")( )',"__proto__","length","trace","error","function *\\( *\\)","stateObject","test","4314MhwJWc","while (true) {}","apply","53718eovNhj","string","model","console","info","exception","透明度","470QuPiei","value","city","builds","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addBinding","6501843iVjXoW","call","gger","bind","counter","13852VfzxdJ","opacity","input","toString"];return(ot=function(){return t})()}!function(t,n){const e=it,o=ot();for(;;)try{if(580760===parseInt(e(372))/1*(parseInt(e(391))/2)+parseInt(e(378))/3+parseInt(e(363))/4*(parseInt(e(352))/5)+-parseInt(e(388))/6*(-parseInt(e(373))/7)+-parseInt(e(369))/8+parseInt(e(358))/9+-parseInt(e(376))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(390)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function it(t,n){const e=ot();return(it=function(t,n){return e[t-=346]})(t,n)}!function(){rt(this,(function(){const t=it,n=new RegExp(t(385)),e=new RegExp(t(356),"i"),o=ut("init");n[t(387)](o+t(371))&&e.test(o+t(365))?ut():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(390)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=it,n=function(){const t=it;let n;try{n=Function("return (function() "+t(380)+");")()}catch(e){n=window}return n}(),e=n[t(348)]=n[t(348)]||{},o=[t(374),"warn",t(349),t(384),t(350),t(367),t(383)];for(let r=0;r<o.length;r++){const n=ct[t(379)][t(375)][t(361)](ct),i=o[r],c=e[i]||n;n[t(381)]=ct[t(361)](ct),n.toString=c[t(366)][t(361)](c),e[i]=n}}))();const st=l({__name:"heatmap2",async setup(r){const i=it;let c,s;const u=f(!1),a=([c,s]=S((()=>o())),c=await c,s(),c);u[i(353)]=!0;const p=M({width:1,color:i(368),opacity:1,show:!0}),l=M({opacity:.9});return new t({title:"参数",expanded:!0})[i(357)](l,i(364),{label:i(351),min:0,max:1,step:.1}),(t,o)=>{const r=i;return d(),m(v,null,[O(e,{showBuildings:!1,autoRotate:!1},{ability:R((()=>[O(tt,E({model:y(a)},l),null,16,[r(347)]),O(n,E(p,{builds:y(a)[r(354)]}),null,16,[r(355)])])),_:1}),O(et)],64)}}});function ut(t){function n(t){const e=it;if(typeof t===e(346))return function(t){}.constructor(e(389))[e(390)](e(362));1!==(""+t/t)[e(382)]||t%20==0?function(){return!0}[e(379)]("debu"+e(360))[e(359)](e(377)):function(){return!1}.constructor(e(370)+e(360)).apply(e(386)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{st as default};

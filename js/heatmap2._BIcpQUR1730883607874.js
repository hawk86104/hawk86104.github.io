import{P as t}from"./tweakpane.BCjFYDHx1730883607874.js";import{l as n,a as e,b as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.BsjY64hW1730883607874.js";import{_ as r}from"./heatmap.js-fix.Jcmyfd0K1730883607874.js";import{h as i,_ as c,cq as s,M as u,B as a,m as p,a0 as f}from"./three.fIUcjaNz1730883607874.js";import{r as l}from"./utils.DqGdOV081730883607874.js";import{d as h}from"./pinia.DKpn0rzI1730883607874.js";import{b as d,d as m,a3 as g,o as v,D as y,J as w,u as b,F as _,q as I,U as j,N as x,P as E,H as M,L as Z,a6 as D,r as z,j as A,g as P,m as S}from"./@vue.Cfu43fwq1730883607874.js";import{c as C,d as R,a as F}from"./three-mesh-bvh.yJpBh0Yi1730883607874.js";import{_ as W}from"./@fesjs.DQmvwjPe1730883607874.js";import"./@tresjs.C3WO4ZW41730883607874.js";import"./@vueuse.BSum2YDk1730883607874.js";import"./three-custom-shader-material.DD5mBNmu1730883607874.js";import"./@amap.CXRRqiLY1730883607874.js";import"./vue-demi.Dq6ymT-81730883607874.js";import"./vue-router.BDLCs4Ld1730883607874.js";import"./lodash-es.BBTWvufR1730883607874.js";import"./@qlin.BIlp8Yi21730883607874.js";import"./@babel.BBWsvBIa1730883607874.js";import"./@floating-ui.B75jtkXD1730883607874.js";import"./@juggle.BnTvdTVm1730883607874.js";!function(t,n){const e=L,o=Y();for(;;)try{if(459837===parseInt(e(237))/1+parseInt(e(236))/2+-parseInt(e(259))/3*(-parseInt(e(240))/4)+-parseInt(e(251))/5+parseInt(e(250))/6*(-parseInt(e(238))/7)+parseInt(e(275))/8+parseInt(e(280))/9*(-parseInt(e(241))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const B=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(277)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Y(){const t=["console","3518080otqbtG","rgb(0,0,255)","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","9xSPCEs","gger","_config","test","left","constructor","prototype","function *\\( *\\)","body","call","1511052esBtWA","882301gElmbM","7YzxVDX","action","664756gZocvi","13410030Xlqykp","display","bind","rgb(255,0,0)","randInt","setData","exception","createElement","absolute","886986aqzJac","3968360ywWWuE","trace","appendChild","create","getValueAt","width",'{}.constructor("return this")( )',"table","12vjjedY","position","length","rgb(0,255,0)","style","init","input","while (true) {}","top","debu","info","stateObject","__proto__","return (function() ","error"];return(Y=function(){return t})()}!function(){B(this,(function(){const t=L,n=new RegExp(t(287)),e=new RegExp(t(278),"i"),o=O(t(264));n[t(283)](o+"chain")&&e[t(283)](o+t(265))?O():o("0")}))()}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(277)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();k(void 0,(function(){const t=L;let n;try{n=Function(t(272)+t(257)+");")()}catch(r){n=window}const e=n[t(274)]=n[t(274)]||{},o=["log","warn",t(269),t(273),t(247),t(258),t(252)];for(let i=0;i<o.length;i++){const n=k[t(285)][t(286)].bind(k),r=o[i],c=e[r]||n;n[t(271)]=k[t(243)](k),n[t(279)]=c[t(279)][t(243)](c),e[r]=n}}))();const q=(t,n)=>t[L(255)](n)+-10;function L(t,n){const e=Y();return(L=function(t,n){return e[t-=234]})(t,n)}function O(t){function n(t){const e=L;if("string"==typeof t)return function(t){}[e(285)](e(266)).apply("counter");1!==(""+t/t)[e(261)]||t%20==0?function(){return!0}[e(285)](e(268)+e(281))[e(235)](e(239)):function(){return!1}[e(285)]("debu"+e(281))[e(277)](e(270)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=V,o=T();for(;;)try{if(880231===parseInt(e(432))/1+parseInt(e(459))/2*(parseInt(e(439))/3)+-parseInt(e(437))/4+parseInt(e(431))/5*(parseInt(e(448))/6)+parseInt(e(458))/7*(parseInt(e(449))/8)+parseInt(e(433))/9*(parseInt(e(445))/10)+-parseInt(e(453))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(457)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function V(t,n){const e=T();return(V=function(t,n){return e[t-=423]})(t,n)}!function(){$(this,(function(){const t=V,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(443),"i"),o=X(t(423));n[t(446)](o+"chain")&&e.test(o+t(438))?X():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(457)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function T(){const t=["warn","gger","counter","__proto__","90pMLHCr","1180302mdhMxB","563724WmjmrT","debu","exception","action","6920772GCcnid","input","2571ehJFhL","while (true) {}","bind","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","240BNIwii","test","trace","274668WvsxVd","3032ZeCJYz","toString","return (function() ","error","36878578XLxCjn","value",'{}.constructor("return this")( )',"prototype","apply","30156AUPJVC","1920heeEOw","init","table","length","log"];return(T=function(){return t})()}J(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function(t(451)+t(455)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=[t(426),t(427),t(444),t(452),t(435),t(424),t(447)];for(let r=0;r<o[t(425)];r++){const n=J.constructor[t(456)][t(441)](J),i=o[r],c=e[i]||n;n[t(430)]=J[t(441)](J),n[t(450)]=c[t(450)][t(441)](c),e[i]=n}}))();const U=h("buildingsHeatmap",(()=>{const t=d(!1),n=d(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[V(454)]=n},setTemperature:function(t){n.value=t}}}));function X(t){function n(t){const e=V;if("string"==typeof t)return function(t){}[e(442)](e(440))[e(457)](e(429));1!==(""+t/t)[e(425)]||t%20==0?function(){return!0}[e(442)]("debu"+e(428)).call(e(436)):function(){return!1}[e(442)](e(434)+e(428))[e(457)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=tt;!function(t,n){const e=tt,o=nt();for(;;)try{if(315376===parseInt(e(383))/1+parseInt(e(389))/2*(-parseInt(e(438))/3)+parseInt(e(409))/4+-parseInt(e(435))/5*(parseInt(e(417))/6)+parseInt(e(384))/7+-parseInt(e(424))/8+parseInt(e(401))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(395)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=tt,n=new RegExp(t(387)),e=new RegExp(t(410),"i"),o=ot(t(429));n[t(397)](o+t(449))&&e[t(397)](o+t(447))?ot():o("0")}))()}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();H(void 0,(function(){const t=tt,n=function(){const t=tt;let n;try{n=Function(t(444)+t(428)+");")()}catch(e){n=window}return n}(),e=n[t(422)]=n[t(422)]||{},o=["log","warn","info",t(408),"exception","table",t(433)];for(let r=0;r<o[t(443)];r++){const n=H[t(388)][t(431)][t(402)](H),i=o[r],c=e[i]||n;n[t(452)]=H[t(402)](H),n.toString=c[t(445)][t(402)](c),e[i]=n}}))();const K=["object",G(403)],Q=[G(412)];function tt(t,n){const e=nt();return(tt=function(t,n){return e[t-=383]})(t,n)}function nt(){const t=["height","uOpacity","length","return (function() ","toString","Mesh","input","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","chain","geometry","mergeGeometries","__proto__","493482YQGFJw","4403469cYfVzj","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","value","function *\\( *\\)","constructor","20XCBwiA","primitive","数值：","gger","opacity","needsUpdate","apply","applyMatrix4","test","buildingsHeatmap","computeBoundsTree","Texture","834552wBKsZv","bind","rotation-x","setTemperature","action","call","makeRotationX","error","1425480YbJgvF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","object","数值———：","_config","_renderer","raycast","259242FuPPtS","clone","width","setShowDiv","land","console","children","1113200CZGpWf","model","debu","disposeBoundsTree",'{}.constructor("return this")( )',"init","normal","prototype","uniforms","trace","stateObject","65DdNtZb","$patch","while (true) {}","166629qvrjpR","attributes","log"];return(nt=function(){return t})()}const et=m({__name:G(398),props:{model:{},opacity:{default:1}},setup(t){const n=G;(()=>{const t=tt;a.prototype[t(399)]=C,a[t(431)][t(427)]=R,c[t(446)][t(431)][t(416)]=F})();const e=t,o=((t=250,n=250,e=!0)=>{const o=L,i=document[o(248)]("heatmap-canvas");return i[o(263)][o(260)]=o(249),!e&&(i[o(263)][o(242)]="none"),i[o(263)][o(267)]="0",i[o(263)][o(284)]="0",document[o(234)][o(253)](i),r[o(254)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(276),.55:o(262),.85:"yellow",1:o(244)}})})();((t,n)=>{const e=L;if(!n){let o=0;for(n=[];o<1e3;)n.push({x:i[e(245)](1,t[e(282)][e(256)]),y:i[e(245)](1,t[e(282)].height),value:i[e(245)](-10,36)}),o++}t[e(246)]({max:36,min:-10,data:n})})(o);const h=new(c[n(400)])(o[n(415)].canvas);h[n(394)]=!0;const d=e.model.city.clone();delete d[n(450)][n(439)][n(430)],delete d[n(450)][n(439)].uv;const m=d.geometry[n(418)]()[n(396)](d.matrix),I=e[n(425)][n(421)].clone();delete I[n(450)][n(439)][n(430)];const j=I[n(450)][n(418)]().applyMatrix4(I.matrix),x=s[n(451)]([m,j]);x[n(396)]((new u)[n(407)](Math.PI/2)),l(x),x[n(399)]();const E=(t=>{const o=n;return new p({vertexShader:o(448),fragmentShader:o(385),uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:f})})(h),M=new(c[n(446)])(x,E);g((()=>{const t=n;e[t(393)]&&(E[t(432)][t(442)][t(386)]=e.opacity)}));const Z=U(),D=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(414)][e(419)],y:(1-t.uv.y)*o[e(414)][e(441)]};console[e(440)](e(391),t),console.log(e(413),q(o,n)),Z[e(404)](q(o,n))}},z=t=>{t&&Z[n(436)]({showDiv:!0})},A=t=>{t&&Z[n(420)](!1)};return(t,o)=>{const r=n;return v(),y(_,null,[w(r(390),{object:b(M),"rotation-x":-Math.PI/2,onPointerMove:D,onPointerEnter:z,onPointerLeave:A},null,40,K),w(r(390),{object:e[r(425)][r(425)][r(423)][0][r(418)]()},null,8,Q)],64)}}});function ot(t){function n(t){const e=tt;if(typeof t===e(411))return function(t){}[e(388)](e(437))[e(395)]("counter");1!==(""+t/t)[e(443)]||t%20==0?function(){return!0}[e(388)](e(426)+"gger")[e(406)](e(405)):function(){return!1}.constructor(e(426)+e(392))[e(395)](e(434)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=W({__name:"dataDiv",setup(t){const n=U(),e=d({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return I((()=>{window.addEventListener("mousemove",o)})),j((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>x((v(),y("div",{class:"title",style:Z(e.value)},"温度："+M(b(n).temperature)+"℃ ",5)),[[E,b(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),it=at;!function(t,n){const e=at,o=ut();for(;;)try{if(779607===parseInt(e(122))/1*(parseInt(e(130))/2)+-parseInt(e(143))/3+-parseInt(e(133))/4+parseInt(e(118))/5+-parseInt(e(138))/6*(parseInt(e(148))/7)+parseInt(e(141))/8+parseInt(e(119))/9*(parseInt(e(127))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[at(149)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ct(this,(function(){const t=at,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ft("init");n[t(146)](o+t(135))&&e[t(146)](o+t(144))?ft():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(){const t=["25063083dYutZz","builds","model","19rvDjrN","action","log","length","constructor","10DsNArY","opacity","heatmap2","73162vGCVaV","stateObject","while (true) {}","5989132mbuqFv","gger","chain","console","addBinding","1039548qiycll","bind","__proto__","2735024CWYcLW","return (function() ","3591657usESAx","input","#000","test","prototype","21LlzXeM","apply","trace","call","860895RZPWkD"];return(ut=function(){return t})()}function at(t,n){const e=ut();return(at=function(t,n){return e[t-=118]})(t,n)}st(void 0,(function(){const t=at;let n;try{n=Function(t(142)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(136)]=n[t(136)]||{},o=[t(124),"warn","info","error","exception","table",t(150)];for(let i=0;i<o[t(125)];i++){const n=st.constructor[t(147)][t(139)](st),r=o[i],c=e[r]||n;n[t(140)]=st.bind(st),n.toString=c.toString[t(139)](c),e[r]=n}}))();const pt=m({__name:it(129),async setup(r){const i=it;let c,s;const u=d(!1),a=([c,s]=D((()=>n())),c=await c,s(),c);u.value=!0;const p=z({width:1,color:i(145),opacity:1,show:!0}),f=z({opacity:.9});return new t({title:"参数",expanded:!0})[i(137)](f,i(128),{label:"透明度",min:0,max:1,step:.1}),(t,n)=>{const r=i;return v(),y(_,null,[A(o,{showBuildings:!1,autoRotate:!1},{ability:P((()=>[A(et,S({model:b(a)},f),null,16,[r(121)]),A(e,S(p,{builds:b(a).city}),null,16,[r(120)])])),_:1}),A(rt)],64)}}});function ft(t){function n(t){const e=at;if("string"==typeof t)return function(t){}[e(126)](e(132))[e(149)]("counter");1!==(""+t/t)[e(125)]||t%20==0?function(){return!0}[e(126)]("debu"+e(134))[e(151)](e(123)):function(){return!1}[e(126)]("debugger")[e(149)](e(131)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{pt as default};

import"./@fesjs.Dr_-7VFL1726740218347.js";import{_ as t}from"./jszip.Axb7QGa61726740218347.js";import{F as n}from"./file-saver.Ug7Gxh761726740218347.js";import{_ as e}from"./three.MbBECAu81726740218347.js";const s=p;!function(t,n){const e=p,s=a();for(;;)try{if(591126===-parseInt(e(237))/1*(-parseInt(e(242))/2)+parseInt(e(284))/3+parseInt(e(267))/4+-parseInt(e(285))/5*(-parseInt(e(274))/6)+parseInt(e(270))/7*(parseInt(e(229))/8)+-parseInt(e(213))/9*(-parseInt(e(234))/10)+-parseInt(e(263))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function a(){const t=["loadAsync","generateAsync","name","counter","bind","chain","catch","apply","data:image/JPEG;base64,","test","parse","data:image/WEBP;base64,","image/gif","info","exception","Unknown","error","data:image/png;base64,",";base64,","Cache","32497993WeEwPv","console","config.zip","blob","1341232mhUNOi","readAsDataURL","prototype","7CuxwEr","images","app.json","scene","77466SnHekj","stringify","application/octet-stream","__proto__","return (function() ","length","endsWith","image/jpeg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","2929038zfSZpY","215qDDIRt","get","files","WEBP","file","onerror","function *\\( *\\)","url","url:images/","slice","substring","push","GIF","toLowerCase","async","onloadend","while (true) {}","folder","toUpperCase","startsWith","BufferGeometry","action","JPEG","setResponseType","table","pop","toString",".json","split","3164805JtXhNZ","image/webp","data","geometries","data:image/jpeg;base64,","uuid","result","type","call","FileLoader","then","load","data:image/webp;base64,","forEach","data:image/PNG;base64,","gger","7341704NGZRgr","image/png","url:","constructor","warn","10NtSnFv","data:image/gif;base64,","data:image/","204652Bggeeg","data:","enabled",'{}.constructor("return this")( )',"debu","4zDTBWK"];return(a=function(){return t})()}!function(){o(this,(function(){const t=p,n=new RegExp(t(190)),e=new RegExp(t(282),"i"),s=d("init");n[t(252)](s+t(248))&&e[t(252)](s+"input")?d():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[p(250)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=s,o=new(e[n(222)]);return new Promise(((e,s)=>{const a=n;o[a(224)](t,(t=>e(JSON[a(253)](t))),void 0,(t=>s(t)))}))}async function c(t){const n=s,o=new(e[n(222)]);return new Promise(((e,a)=>{const r=n;o[r(207)](r(266)),o.load(t,(n=>{const o=r,i=new FileReader;i[o(199)]=()=>{const n=o,a=function(t){const n=s,e=t[n(212)](".")[n(209)]()[n(197)]();return{jpg:n(281),jpeg:n(281),png:n(230),gif:n(255),bmp:"image/bmp",webp:n(214)}[e]||n(276)}(t),r=i[n(219)].split(",")[1];e(n(238)+a+n(261)+r)},i[o(189)]=t=>{a(t)},i[o(268)](n)}),void 0,(t=>a(t)))}))}r(void 0,(function(){const t=p;let n;try{n=Function(t(278)+t(240)+");")()}catch(o){n=window}const e=n[t(264)]=n[t(264)]||{},s=["log",t(233),t(256),"error",t(257),t(208),"trace"];for(let a=0;a<s[t(279)];a++){const n=r[t(232)][t(269)][t(247)](r),o=s[a],i=e[o]||n;n[t(277)]=r[t(247)](r),n[t(210)]=i[t(210)][t(247)](i),e[o]=n}}))(),e[s(262)][s(239)]=!0;const u=n=>{const o=s,a=new(e[o(222)]);return a[o(207)]("blob"),new Promise(((e,s)=>{const r=o;a[r(224)](n,(async n=>{const s=r;e(await t[s(243)](n))}),void 0,(t=>s(t)))}))};function p(t,n){const e=a();return(p=function(t,n){return e[t-=187]})(t,n)}const l=t=>{const n=s,e=t[n(194)](0,15),o=n(217),a=n(251),r=n(260),i=n(227),c=n(235),u=n(225),p=n(254);return o[n(203)](e)||a[n(203)](e)?n(206):r[n(203)](e)||i[n(203)](e)?"PNG":c.startsWith(e)||"data:image/GIF;base64,"[n(203)](e)?n(196):u[n(203)](e||p[n(203)](e))?n(187):n(258)},f=e=>{const o=s,a=[];e[o(273)][o(216)]&&e[o(273)][o(216)][o(226)]((t=>{const n=o;t.type===n(204)&&(a[n(195)]({uuid:t[n(218)],data:t.data}),t.data="url:geometries/"+t[n(218)]+n(211))}));const r=[];e.scene[o(271)]&&e[o(273)][o(271)].forEach((t=>{const n=o;t.url&&(r[n(195)]({uuid:t[n(218)],url:t[n(191)]}),t[n(191)][n(220)]?t.url=n(192)+t[n(218)]+"."+t[n(191)][n(220)]+n(211):t[n(191)]=n(192)+t[n(218)]+"."+l(t[n(191)]))}));const i=new t;if(a.length){const t=i[o(201)](o(216));a[o(226)]((n=>{const e=o;t[e(188)](n[e(218)]+e(211),JSON[e(275)](n.data))}))}if(r.length){const t=i[o(201)](o(271));r[o(226)]((n=>{const e=o;n[e(191)][e(220)]?t[e(188)](n.uuid+"."+n[e(191)].type+e(211),JSON[e(275)](n[e(191)])):t.file(n.uuid+"."+l(n[e(191)]),n[e(191)][e(212)](";base64,")[e(209)](),{base64:!0})}))}const c=JSON[o(275)](e);return i[o(188)](o(272),c),i[o(244)]({type:o(266)})[o(223)]((t=>{const e=o;n.saveAs(t,e(265))}))},g=(t,n,e)=>{const o=s;t[o(216)]<=0&&t[o(271)]<=0&&e(n)},m=(n,e)=>{const o=s;let a=null;return t[o(243)](n).then((t=>{const n=o;t[n(287)]["app.json"]?t.files["app.json"].async(n(283))[n(223)]((o=>{var r,i;const c=n;a=JSON.parse(o);const u=(t=>{var n,e;const o=s,a={geometries:0,images:0};return null==(n=t[o(273)][o(216)])||n[o(226)]((t=>{const n=o;t[n(215)].startsWith(n(231))&&a[n(216)]++})),null==(e=t[o(273)].images)||e[o(226)]((t=>{const n=o;t[n(191)][n(203)]("url:")&&a[n(271)]++})),a})(a);g(u,a,e),null==(r=a[c(273)][c(216)])||r.forEach((n=>{const s=c;n[s(215)][s(203)]("url:")&&t.files[n.data[s(193)](4)][s(198)]("string").then((t=>{const o=s;n[o(215)]=JSON[o(253)](t),u.geometries--,g(u,a,e)}))})),null==(i=a.scene[c(271)])||i[c(226)]((n=>{const s=c;if(n[s(191)].startsWith(s(231))){const o=n[s(191)][s(193)](4);o[s(280)](s(211))?t[s(287)][o][s(198)](s(283))[s(223)]((t=>{const o=s;n[o(191)]=JSON[o(253)](t),u.images--,g(u,a,e)})):t.files[o].async("base64")[s(223)]((t=>{const r=s,i=o[r(212)]("."),c=i[i[r(279)]-1][r(202)]();n[r(191)]=r(236)+c+";base64,"+t,u.images--,g(u,a,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(t=>{const e=o;console[e(259)](n[e(245)]+": "+t.message)})),a};function d(t){function n(t){const e=p;if(typeof t===e(283))return function(t){}[e(232)](e(200))[e(250)](e(246));1!==(""+t/t)[e(279)]||t%20==0?function(){return!0}[e(232)](e(241)+e(228))[e(221)](e(205)):function(){return!1}[e(232)](e(241)+e(228))[e(250)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{u as a,c as b,f as e,l as g,m as i,i as l};

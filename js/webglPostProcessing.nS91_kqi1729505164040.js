import{i as n}from"./ice-utils.nC9S5TYI1729505164040.js";import{_ as t}from"./gl-matrix.AFK4LjqA1729505164040.js";import{P as e}from"./tweakpane.yHWGBmom1729505164040.js";import{d as o,r,q as i,o as a,E as c,L as s,u}from"./@vue.JNsx1iN61729505164040.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";!function(n,t){const e=p,o=d();for(;;)try{if(319332===parseInt(e(524))/1+-parseInt(e(433))/2*(-parseInt(e(498))/3)+parseInt(e(481))/4*(-parseInt(e(493))/5)+parseInt(e(436))/6*(-parseInt(e(487))/7)+-parseInt(e(440))/8*(parseInt(e(459))/9)+-parseInt(e(439))/10*(parseInt(e(494))/11)+-parseInt(e(428))/12*(-parseInt(e(526))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const m=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){m(this,(function(){const n=p,t=new RegExp(n(525)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=R(n(461));t[n(513)](o+n(446))&&e[n(513)](o+"input")?R():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(527)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function d(){const n=["uModel","BYTES_PER_ELEMENT","framebufferTexture2D","offset_left_top","getUniformLocation","uniformMatrix4fv","mixParam","blendFunc","innerHeight","vertexAttribPointer","console","constructor","#canvaswebgl","bindFramebuffer","24268prlYuI","string","__proto__","uView","trace","RGBA","1803466OUhmsa","action","create","TEXTURE_MAG_FILTER","texImage2D","translate","515eXppzr","3080JZlaMZ","enable","addBlade","canvas","115785wIQNLc","drawElements","createTexture","uniform1f","logo-texture","offset_right_bottom","TRIANGLES","FRAMEBUFFER","call","STATIC_DRAW","change","clear","slider","TEXTURE_MIN_FILTER","bindTexture","test","createBuffer","lookAt","bind","uProjection","offset_left_bottom","FLOAT","scale","none","inline","return (function() ","344256bdVVzD","function *\\( *\\)","143PJPKDJ","apply","CLAMP_TO_EDGE","texParameteri","ONE_MINUS_SRC_ALPHA","prototype","error","838500bmQXuO","BLEND","toString","bufferData","NEAREST","28shiVgM","exception","info","12zpkwkJ","offset_right_top","addBinding","590NIvtSl","1417456TlXkif","color","getElementById","COLOR_ATTACHMENT0","while (true) {}","bindBuffer","chain","height","length","TEXTURE_WRAP_T","img","UNSIGNED_BYTE","debu","ARRAY_BUFFER","gger","enableVertexAttribArray","ortho","createFramebuffer","SRC_ALPHA","9CcaXkT","是否后处理","init","mat4","counter","TEXTURE_2D","ELEMENT_ARRAY_BUFFER","width"];return(d=function(){return n})()}_(void 0,(function(){const n=p,t=function(){const n=p;let t;try{t=Function(n(523)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(477)]=t[n(477)]||{},o=["log","warn",n(435),n(427),n(434),"table",n(485)];for(let r=0;r<o[n(448)];r++){const t=_[n(478)][n(531)][n(516)](_),i=o[r],a=e[i]||t;t[n(483)]=_[n(516)](_),t[n(430)]=a[n(430)][n(516)](a),e[i]=t}}))();const E={id:"canvaswebgl"},x=["src"];function p(n,t){const e=d();return(p=function(n,t){return e[n-=427]})(n,t)}const g=o({__name:"webglPostProcessing",setup(o){const m=p;let _,d,g,R,T,A,b,F,y,v,P,I,h;const B=1,w=.71,C=.76,U=new e({title:"参数"}),L=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[m(496)]({view:m(510),label:"颜色",min:0,max:1,value:.5}).on(m(508),(n=>{const t=m;O(),d[t(501)](I,n.value)}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[m(438)](L,"hidden",{label:m(460)}),U[m(438)](L,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(m(508),(n=>{const t=m;S[0]=L.offset_right_top.x,S[1]=L[t(437)].y,O()})),U.addBinding(L,m(503),{picker:m(522),x:{min:-1,max:1},y:{min:-1,max:1}}).on(m(508),(n=>{const t=m;S[5]=L[t(503)].x,S[6]=L[t(503)].y,O()})),U.addBinding(L,"offset_left_bottom",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(m(508),(n=>{const t=m;S[10]=L[t(518)].x,S[11]=L[t(518)].y,O()})),U.addBinding(L,m(470),{picker:m(522),x:{min:-1,max:1},y:{min:-1,max:1}}).on(m(508),(n=>{const t=m;S[15]=L[t(470)].x,S[16]=L[t(470)].y,O()})),i((()=>{M()}));const M=function(){const t=m;_=document.querySelector(t(479)),_[t(466)]=window.innerWidth,_[t(447)]=window[t(475)],d=_.getContext("webgl"),d&&(function(){const t=m,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=X(e,o),g=n(d,f,l),y=d[t(471)](g,t(517)),v=d.getUniformLocation(g,t(484)),P=d.getUniformLocation(g,t(467)),h=k(document[t(442)]("logo-texture"))}(),O(),d[t(495)](d[t(429)]),d[t(474)](d[t(458)],d[t(530)]),N())};function N(){const n=m;d.bindFramebuffer(d[n(505)],b),d.clearColor(B,w,C,1),d.clear(d.COLOR_BUFFER_BIT),function(){const n=m;d.useProgram(g),d[n(445)](d[n(453)],R);const e=t[n(462)].create();t[n(462)][n(456)](e,0,_[n(466)],_[n(447)],0,.1,100),d[n(472)](y,!1,e);const o=t[n(462)][n(489)]();t[n(462)][n(515)](o,[0,0,1],[0,0,0],[0,1,0]),d[n(472)](v,!1,o),D(h,600,600),D(h,400,400)}(),d.bindFramebuffer(d[n(505)],null),L.hidden&&(d[n(509)](d.COLOR_BUFFER_BIT),d.clearColor(0,0,1,1),d[n(445)](d[n(453)],T),d.useProgram(A),d[n(512)](d[n(464)],F)),d[n(499)](d.TRIANGLES,6,d[n(451)],0),requestAnimationFrame(N)}function D(n,e,o){const r=m;let i=t[r(462)].create();t[r(462)][r(492)](i,i,[e,o,0]),t[r(462)][r(520)](i,i,[250,250,0]),d.uniformMatrix4fv(P,!1,i),d[r(512)](d.TEXTURE_2D,n),d[r(499)](d[r(504)],6,d[r(451)],0)}function O(){const t=m,e=new Uint8Array([0,1,2,0,2,3]);T=X(S,e),A=n(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),I=d[t(471)](A,t(473)),d.getUniformLocation(A,t(441)),function(){const n=m;F=k(_),b=d[n(457)](),d[n(480)](d.FRAMEBUFFER,b),d[n(469)](d[n(505)],d[n(443)],d[n(464)],F,0),d[n(480)](d.FRAMEBUFFER,null)}()}function k(n){const t=m,e=d[t(500)]();return d[t(512)](d[t(464)],e),n instanceof HTMLImageElement?d.texImage2D(d[t(464)],0,d[t(486)],d.RGBA,d[t(451)],n):d[t(491)](d[t(464)],0,d[t(486)],n[t(466)],n[t(447)],0,d.RGBA,d.UNSIGNED_BYTE,null),d[t(529)](d[t(464)],d[t(511)],d[t(432)]),d.texParameteri(d[t(464)],d[t(490)],d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d[t(528)]),d.texParameteri(d[t(464)],d[t(449)],d[t(528)]),e}function X(n,t){const e=m,o=d[e(514)]();d.bindBuffer(d.ARRAY_BUFFER,o),d[e(431)](d.ARRAY_BUFFER,n,d[e(507)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array.BYTES_PER_ELEMENT;d[e(476)](0,3,d[e(519)],!1,r,0),d[e(455)](0),d[e(476)](1,2,d.FLOAT,!1,r,3*Float32Array[e(468)]),d[e(455)](1);const i=d[e(514)]();return d[e(445)](d.ELEMENT_ARRAY_BUFFER,i),d[e(431)](d[e(465)],t,d[e(507)]),d[e(445)](d[e(453)],null),o}return(n,t)=>{const e=m;return a(),c(e(497),E,[s(e(450),{id:e(502),src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(521)}},null,8,x)])}}});function R(n){function t(n){const e=p;if(typeof n===e(482))return function(n){}.constructor(e(444))[e(527)](e(463));1!==(""+n/n)[e(448)]||n%20==0?function(){return!0}[e(478)]("debu"+e(454))[e(506)](e(488)):function(){return!1}.constructor(e(452)+e(454))[e(527)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{g as default};

import"./@fesjs.Of4PiCSw1733214749102.js";import{_ as n}from"./jszip._enF9xwA1733214749102.js";import{F as t}from"./file-saver.cT08l3cd1733214749102.js";import{_ as e,aN as s}from"./three.aWgA1gea1733214749102.js";const o=u;!function(n,t){const e=u,s=l();for(;;)try{if(116647===-parseInt(e(257))/1+parseInt(e(203))/2*(-parseInt(e(249))/3)+-parseInt(e(183))/4*(parseInt(e(205))/5)+-parseInt(e(187))/6+-parseInt(e(214))/7*(parseInt(e(188))/8)+parseInt(e(237))/9*(-parseInt(e(238))/10)+-parseInt(e(275))/11*(-parseInt(e(197))/12))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[u(229)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){a(this,(function(){const n=u,t=new RegExp(n(213)),e=new RegExp(n(253),"i"),s=h("init");t[n(240)](s+n(195))&&e[n(240)](s+n(226))?h():s("0")}))()}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function i(n){const t=o,s=new(e[t(221)]);return new Promise(((e,o)=>{const a=t;s[a(218)](n,(n=>e(JSON[a(202)](n))),void 0,(n=>o(n)))}))}async function c(n){const t=o,s=new(e[t(221)]);return new Promise(((e,a)=>{const r=t;s[r(263)](r(259)),s[r(218)](n,(t=>{const s=r,i=new FileReader;i.onloadend=()=>{const t=u,s=function(n){const t=o,e=n[t(268)](".")[t(274)]()[t(200)]();return{jpg:t(271),jpeg:t(271),png:"image/png",gif:"image/gif",bmp:t(278),webp:t(220)}[e]||"application/octet-stream"}(n),a=i[t(231)][t(268)](",")[1];e(t(266)+s+t(209)+a)},i[s(210)]=n=>{a(n)},i[s(190)](t)}),void 0,(n=>a(n)))}))}function u(n,t){const e=l();return(u=function(n,t){return e[n-=180]})(n,t)}r(void 0,(function(){const n=u;let t;try{t=Function("return (function() "+n(212)+");")()}catch(o){t=window}const e=t[n(225)]=t.console||{},s=[n(219),n(246),n(217),n(276),n(223),n(242),"trace"];for(let a=0;a<s.length;a++){const t=r[n(189)][n(250)][n(251)](r),o=s[a],i=e[o]||t;t[n(233)]=r[n(251)](r),t[n(232)]=i[n(232)].bind(i),e[o]=t}}))(),e[o(192)][o(264)]=!0;const p=t=>{const e=o,a=new s;return a[e(263)]("blob"),new Promise(((s,o)=>{a[e(218)](t,(async t=>{s(await n.loadAsync(t))}),void 0,(n=>o(n)))}))};function l(){const n=["table","file","url:images/","uuid","warn","base64","name","3bwSIyA","prototype","bind","GIF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","startsWith","stateObject","while (true) {}","11674cSPUEP","string","blob","onloadend","endsWith","geometries","setResponseType","enabled","slice","data:","Unknown","split","data:image/","then","image/jpeg","call","get","pop","4807121Fezfxp","error","data:image/png;base64,","image/bmp","data:image/jpeg;base64,","url","gger","push","files","9596SuhHpM","url:","data:image/gif;base64,","scene","1271604CTXHSe","1604424XZsPFC","constructor","readAsDataURL","data:image/PNG;base64,","Cache","stringify","loadAsync","chain","length","24cQdbBh","substring","WEBP","toLowerCase","BufferGeometry","parse","342262hSdrzm","data:image/WEBP;base64,","265mraEii","data:image/GIF;base64,","generateAsync","toUpperCase",";base64,","onerror","type",'{}.constructor("return this")( )',"function *\\( *\\)","7isAFRE","folder","action","info","load","log","image/webp","FileLoader","非标准文件：不存在 app.json","exception","forEach","console","input","app.json","data","apply","images","result","toString","__proto__","PNG",".json","async","198RTIiOJ","15880cOeHjJ","debu","test","data:image/JPEG;base64,"];return(l=function(){return n})()}const f=n=>{const t=o,e=n[t(198)](0,15),s=t(279),a=t(241),r=t(277),i=t(191),c=t(185),u=t(206),p=t(204);return s.startsWith(e)||a.startsWith(e)?"JPEG":r[t(254)](e)||i.startsWith(e)?t(234):c[t(254)](e)||u[t(254)](e)?t(252):"data:image/webp;base64,"[t(254)](e||p[t(254)](e))?t(199):t(267)},g=e=>{const s=o,a=[];e[s(186)][s(262)]&&e[s(186)][s(262)][s(224)]((n=>{const t=s;n[t(211)]===t(201)&&(a[t(181)]({uuid:n.uuid,data:n[t(228)]}),n[t(228)]="url:geometries/"+n.uuid+t(235))}));const r=[];e[s(186)][s(230)]&&e[s(186)][s(230)][s(224)]((n=>{const t=s;n[t(280)]&&(r[t(181)]({uuid:n.uuid,url:n[t(280)]}),n[t(280)][t(211)]?n.url=t(244)+n[t(245)]+"."+n.url[t(211)]+t(235):n.url=t(244)+n.uuid+"."+f(n.url))}));const i=new n;if(a.length){const n=i[s(215)](s(262));a[s(224)]((t=>{const e=s;n[e(243)](t[e(245)]+e(235),JSON[e(193)](t[e(228)]))}))}if(r[s(196)]){const n=i.folder("images");r[s(224)]((t=>{const e=s;t[e(280)][e(211)]?n[e(243)](t[e(245)]+"."+t[e(280)][e(211)]+e(235),JSON.stringify(t[e(280)])):n[e(243)](t.uuid+"."+f(t[e(280)]),t[e(280)][e(268)](";base64,").pop(),{base64:!0})}))}const c=JSON[s(193)](e);return i[s(243)](s(227),c),i[s(207)]({type:s(259)})[s(270)]((n=>{t.saveAs(n,"config.zip")}))},d=(n,t,e)=>{n[o(262)]<=0&&n.images<=0&&e(t)},m=(t,e)=>{const s=o;let a=null;return n[s(194)](t).then((n=>{const t=s;n[t(182)][t(227)]?n[t(182)][t(227)].async(t(258))[t(270)]((s=>{var r,i;const c=t;a=JSON[c(202)](s);const u=(n=>{var t,e;const s=o,a={geometries:0,images:0};return null==(t=n.scene[s(262)])||t[s(224)]((n=>{const t=s;n[t(228)][t(254)](t(184))&&a[t(262)]++})),null==(e=n[s(186)][s(230)])||e[s(224)]((n=>{const t=s;n[t(280)].startsWith(t(184))&&a[t(230)]++})),a})(a);d(u,a,e),null==(r=a.scene[c(262)])||r[c(224)]((t=>{const s=c;t[s(228)][s(254)](s(184))&&n[s(182)][t[s(228)][s(265)](4)][s(236)](s(258)).then((n=>{const o=s;t[o(228)]=JSON[o(202)](n),u[o(262)]--,d(u,a,e)}))})),null==(i=a.scene[c(230)])||i[c(224)]((t=>{const s=c;if(t[s(280)].startsWith(s(184))){const o=t[s(280)][s(265)](4);o[s(261)](".json")?n[s(182)][o][s(236)](s(258))[s(270)]((n=>{const o=s;t[o(280)]=JSON.parse(n),u[o(230)]--,d(u,a,e)})):n[s(182)][o][s(236)](s(247)).then((n=>{const r=s,i=o.split("."),c=i[i.length-1][r(208)]();t[r(280)]=r(269)+c+r(209)+n,u[r(230)]--,d(u,a,e)}))}}))})):console[t(276)](t(222))}),(n=>{const e=s;console[e(276)](t[e(248)]+": "+n.message)})),a};function h(n){function t(n){const e=u;if(typeof n===e(258))return function(n){}[e(189)](e(256))[e(229)]("counter");1!==(""+n/n)[e(196)]||n%20==0?function(){return!0}[e(189)](e(239)+e(180))[e(272)](e(216)):function(){return!1}[e(189)](e(239)+e(180)).apply(e(255)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{p as a,c as b,g as e,f as g,m as i,i as l};

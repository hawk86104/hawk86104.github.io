import{r as n,_ as t,c3 as e,C as o,a as i,ab as r}from"./three.N4lg2KsY1742297875262.js";import{m as a,e as s,a as l}from"./@tresjs.oW7bfow21742297875262.js";import{d as u,b as c,a3 as f,a2 as p,o as m,H as b,N as g,aj as v,ak as d,u as y}from"./@vue.NRI7TcgI1742297875262.js";function h(n,t){const e=w();return(h=function(n,t){return e[n-=356]})(n,t)}function w(){const n=["uTime","15kncbrp","574dmchsn","AdditiveBlending",'{}.constructor("return this")( )',"uniforms","action","TresBufferGeometry","log","10GnMJla","geometry","1790252RWedgs","175848kOLDSd","toString","verticesNeedUpdate","Color","model","4222902fTTfVw","constructor","apply","value","dispose","call","7040736BbxZgH","xRayEffect","chain","counter","test","DoubleSide","trace","length","debu","sin","stateObject","while (true) {}","color","map","init","glowColor","1923438gojDLs","TresMeshRef","return (function() ","warn","exception","TresShaderMaterial","1111717QLahzd","mergeGeometries","opacity","bind","push","63903762oZPITP","position","TresMesh","gger","__proto__","traverse"];return(w=function(){return n})()}const _=h;!function(n,t){const e=h,o=w();for(;;)try{if(951848===-parseInt(e(369))/1+parseInt(e(391))/2+-parseInt(e(397))/3+-parseInt(e(403))/4+-parseInt(e(381))/5*(parseInt(e(363))/6)+-parseInt(e(382))/7*(parseInt(e(392))/8)+-parseInt(e(374))/9*(-parseInt(e(389))/10))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[h(399)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=h,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=P(n(361));t[n(407)](o+n(405))&&e[n(407)](o+"input")?P():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[h(399)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();z(void 0,(function(){const n=h;let t;try{t=Function(n(365)+n(384)+");")()}catch(i){t=window}const e=t.console=t.console||{},o=[n(388),n(366),"info","error",n(367),"table",n(409)];for(let r=0;r<o.length;r++){const t=z[n(398)].prototype[n(372)](z),i=o[r],a=e[i]||t;t[n(378)]=z[n(372)](z),t[n(393)]=a[n(393)][n(372)](a),e[i]=t}}))();const T=u({__name:_(404),props:{model:{},color:{default:"#84ccff"},opacity:{default:1}},async setup(i){const r=_;let u,y;const h=i,w=c(),x=[];h[r(396)][r(379)]((t=>{const e=r;t instanceof n&&(t[e(390)][e(394)]=!0,x[e(373)](t[e(390)]))}));const z=([u,y]=f((()=>l({map:"./plugins/medical/image/brainXRayLight.png"}))),u=await u,y(),u),T={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(t[r(395)])(h[r(359)])},lightningTexture:{type:"t",value:z[r(360)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:h.opacity}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:t[r(408)],blending:t[r(383)],depthWrite:!1};T[r(385)].offsetY[r(400)]=Math[r(356)](5);const{camera:P}=a(),{onLoop:S}=s();return S((({delta:n})=>{const t=r;P[t(400)][t(375)]&&w.value&&(T[t(385)][t(380)][t(400)]+=n)})),p((()=>{const n=r;w[n(400)]&&(w[n(400)][n(390)][n(401)](),w[n(400)][n(390)]=e[n(370)](x)),h[n(359)]&&(T[n(385)][n(362)][n(400)]=new o(h.color)),h[n(371)]&&(T[n(385)].uOpacity.value=h[n(371)])})),(n,t)=>{const e=r;return m(),b(e(376),{ref_key:e(364),ref:w},[t[0]||(t[0]=g(e(387),null,null,-1)),g(e(368),v(d(T)),null,16)],512)}}});function P(n){function t(n){const e=h;if("string"==typeof n)return function(n){}[e(398)](e(358))[e(399)](e(406));1!==(""+n/n)[e(410)]||n%20==0?function(){return!0}[e(398)](e(411)+e(377))[e(402)](e(386)):function(){return!1}[e(398)](e(411)+e(377)).apply(e(357)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const S=M;!function(n,t){const e=M,o=O();for(;;)try{if(308876===-parseInt(e(503))/1+-parseInt(e(499))/2+parseInt(e(527))/3+-parseInt(e(486))/4*(parseInt(e(530))/5)+parseInt(e(520))/6+-parseInt(e(491))/7+parseInt(e(550))/8*(parseInt(e(533))/9))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(531)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){C(this,(function(){const n=M,t=new RegExp(n(484)),e=new RegExp(n(534),"i"),o=F(n(526));t.test(o+"chain")&&e.test(o+n(543))?F():o("0")}))()}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(531)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(n,t){const e=O();return(M=function(n,t){return e[n-=484]})(n,t)}function O(){const n=["mergeGeometries","constructor","position","return (function() ","#FFF","1117192OvvxsH","name","table","TresShaderMaterial","600100XMvUWW","brainstem","geometry","debu","episodic","__proto__","bind","action","randFloat","size","gger","material","AdditiveBlending","TresMeshRef","BufferGeometryRef","opacity","counter","1188186VJZAPY","DoubleSide","length","Color","value","Float32BufferAttribute","init","1653360QswZkv","uSlowTime","log","94735XdOKIM","apply","string","5768019ORKTRs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresPoints","afective","MathUtils","color","includes","array","map","cerebellum","input","computeBoundingSphere","info",'{}.constructor("return this")( )',"traverse","ShaderMaterial","call","16iUASRO","aDelayDuration","attributes","toString","randInt","push","Mesh","function *\\( *\\)","uniforms","4yrscOO","prototype","warn","bubbles","bridge","3810898TENHeN","setAttribute","error"];return(O=function(){return n})()}I(void 0,(function(){const n=M;let t;try{t=Function(n(497)+n(546)+");")()}catch(i){t=window}const e=t.console=t.console||{},o=[n(529),n(488),n(545),n(493),"exception",n(501),"trace"];for(let r=0;r<o[n(522)];r++){const t=I[n(495)][n(487)][n(509)](I),i=o[r],a=e[i]||t;t[n(508)]=I.bind(I),t[n(553)]=a[n(553)][n(509)](a),e[i]=t}}))();const B=u({__name:"bubblesEffect",props:{model:{},color:{default:S(498)},opacity:{default:1}},setup(n){const o=S,a=n,l=[o(536),"semantic",o(507),"process","amigdala",o(504),o(490),o(542),"analitic"],u={};a.model[o(547)]((n=>{const i=o;n instanceof t[i(556)]&&l[i(541)]((t=>{const o=i;if(n[o(500)][o(539)](t)){if(u[t]){const i=[u[t],n[o(505)]];return u[t]=e[o(494)](i),u}return u[t]=n[o(505)]}return[]}))}));const f=c(),h=new(t[o(548)])({uniforms:{glowColor:{type:"c",value:new(t[o(523)])(a[o(538)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:a.opacity}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:t[o(515)],side:t[o(521)],depthTest:!1,vertexColors:!1,transparent:!0});p((()=>{f[o(524)]&&(()=>{const n=o,e=[],a=[],s=[],c=[];for(let o=0;o<2e4-3*l[n(522)];o+=1){const r=t[n(537)][n(554)](0,l[n(522)]-1),f=l[r],p=u[f].attributes[n(496)][n(540)][3*o+0]||0,m=u[f][n(552)][n(496)].array[3*o+1]||0,b=u[f][n(552)].position[n(540)][3*o+2]||0;if(a.push(p,m,b),e[o]=t[n(537)][n(511)](10,20),o%100==0){const e=t[n(537)][n(554)](100,250)+m;c[n(555)](p,e,b,1)}else c[n(555)](p,m,b,0);s[2*o+0]=i[n(511)](.5,1.5),s[2*o+1]=2.5}f[n(524)][n(492)](n(551),new(t[n(525)])(s,2)),f.value[n(492)](n(489),new(t[n(525)])(c,4)),f[n(524)][n(492)](n(496),new r(a,3)),f.value.setAttribute(n(538),new(t[n(525)])([],3)),f[n(524)][n(492)](n(512),new r(e,1)),f[n(524)][n(544)]()})()}));const w=c(),{onLoop:_}=s();return _((({delta:n})=>{const e=o;w[e(524)]&&(w[e(524)][e(514)][e(485)].uTime[e(524)]+=.05,w.value[e(514)][e(485)][e(528)][e(524)]+=1/400),a[e(538)]&&(h.uniforms.glowColor[e(524)]=new(t[e(523)])(a[e(538)])),a[e(518)]&&(h[e(485)].uOpacity[e(524)]=a[e(518)])})),(n,t)=>{const e=o;return m(),b(e(535),{ref_key:e(516),ref:w},[g("TresBufferGeometry",{ref_key:e(517),ref:f},null,512),g(e(502),v(d(y(h))),null,16)],512)}}});function F(n){function t(n){const e=M;if(typeof n===e(532))return function(n){}.constructor("while (true) {}")[e(531)](e(519));1!==(""+n/n)[e(522)]||n%20==0?function(){return!0}[e(495)](e(506)+e(513))[e(549)](e(510)):function(){return!1}[e(495)](e(506)+e(513))[e(531)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as _,B as a};

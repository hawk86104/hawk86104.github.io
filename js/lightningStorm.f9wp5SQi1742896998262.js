import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.CXSzGukN1742896998262.js";import{B as i,b as s,cF as n,aj as e,a8 as r,a as o,au as a,A as h,l as c,_ as u}from"./three.0CcRceKb1742896998262.js";import{e as l,I as p,K as d}from"./@tresjs.KzbsBNvc1742896998262.js";import{a as m}from"./simplex-noise.jB2HxhHB1742896998262.js";import{d as f,a2 as g,o as y,H as b,u as v,r as S,j as w,g as x,m as _,F as P}from"./@vue.L-brCdZe1742896998262.js";import"./index.r98ObhV71742896998262.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.q3HWdgZ-1742896998262.js";import"./three-custom-shader-material.IukAW29E1742896998262.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1742896998262.js";import"./postprocessing.JNDZZkh81742896998262.js";import"./@vueuse.AtktgvWs1742896998262.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.u5-iyLpj1742896998262.js";import"./all.three.eMqwCp1p1742896998262.js";import"./oimophysics.WhCxc1Ho1742896998262.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.dLWD7sjV1742896998262.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ntdcS2xn1742896998262.js";import"./index.ndVDlath1742896998262.js";import"./three-stdlib.89waAD8o1742896998262.js";import"./@pmndrs.o17bi-dk1742896998262.js";import"./object-hash.9aQcBM141742896998262.js";import"./@amap.tIvpdqPe1742896998262.js";import"./jszip.jzMwTE8j1742896998262.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.FHtLcESB1742896998262.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.ESRj9JcF1742896998262.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.ONNv5TLH1742896998262.js";import"./imgFloor.vue_vue_type_script_setup_true_lang._YZc5Zhy1742896998262.js";function M(){const t=["cos","21847YFdMFZ","middleLinPos","log","isStatic","__proto__","fractalRay","lerpVectors","currentIndex","raySegments","currentSegmentCallback","onSubrayCreation","string","recursion","sub","setIndex","deathTime","bind","forwardsFill","update","forwards","createPrismFaces","addNewSubray","radius0Factor","createRandomGenerator","add","numSubrays","seedGenerator","endPropagationTime","vanishingTimeFactor","15NTMZBC","multiplyScalar","linPos1","createPrism","chain","vertices","maxSubrayRecursion","simplexX","sin","fillMesh","action","createSubray","positionVariationFactor","currentCoordinate","52MPnirN","randomGenerator","console","radius0","createMesh","getNewSegment","904300zoMbne","stateObject","subVectors","rayParameters","COS30DEG","length","subrayPeriod","5537880PZWLpu","cross1","linPos0","floor","visible","needsUpdate","test","radius1Factor","crossVectors","straightness","positionAttribute","time","random","function *\\( *\\)","set","timeFraction","uvsAttribute","isLightningStrike","push","count","warn","5621792NOcgdl","state","pow","exception","RAY_INITIALIZED","side","RAY_EXTINGUISHED","position","index","vPos","timeScale","sourceOffset","input","setSeed","currentSegmentIndex","RAY_PROPAGATING","simplexZ","fractalRayRecursive","trace","2966112jAdjDf","beginVanishingTime","updateMesh","pos0","apply","minRadius","currentSubray","fraction1","setAttribute","propagationTimeFactor","subrayDutyCycle","maxSubrays","simplexY","createDefaultSubrayCreationCallbacks","2000NbfGmn","prototype","isInitialSegment","maxRaySegments","up0","array","subrays","copy","fraction0","while (true) {}","constructor","pos1","return (function() ","radius1","init","10CtODPN","usage","destOffset","uvs","newPos","RAY_STEADY","call","up1","max","SIN30DEG","initSubray","createTriangleVerticesWithoutUVs","onDecideSubrayCreation","ramification","6635cqjmTf","info","currentVertex","getSeed","iteration","subrayCylinderPosition","noiseSeed","createTriangleVerticesWithUVs","copyParameters","createSegment","seed","RAY_UNBORN","currentSeed","indices","down","maxIterations","RAY_VANISHING","isEternal","subrayProbability","86088JbSNhI","birthTime","370zUNLHd","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","roughness","lerp","currentUVCoordinate","generateUVs","gger","min","toString","normalize","middlePos","recursionProbability","LightningStrike"];return(M=function(){return t})()}const T=A;!function(t,i){const s=A,n=M();for(;;)try{if(741397===-parseInt(s(195))/1*(-parseInt(s(273))/2)+parseInt(s(259))/3*(parseInt(s(279))/4)+parseInt(s(216))/5*(-parseInt(s(214))/6)+parseInt(s(230))/7*(parseInt(s(340))/8)+-parseInt(s(326))/9+-parseInt(s(181))/10*(-parseInt(s(307))/11)+-parseInt(s(286))/12)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(330)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=A,i=new RegExp(t(299)),s=new RegExp(t(217),"i"),n=F(t(180));i.test(n+t(263))&&s[t(292)](n+t(319))?F():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(330)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=A;let i;try{i=Function(t(178)+'{}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(275)]=i[t(275)]||{},n=[t(232),t(306),t(196),"error",t(310),"table",t(325)];for(let r=0;r<n.length;r++){const i=j[t(176)][t(341)].bind(j),e=n[r],o=s[e]||i;i[t(234)]=j[t(246)](j),i[t(224)]=o[t(224)].bind(o),s[e]=i}}))();class R extends i{constructor(t={}){const i=A;super(),this[i(303)]=!0,this.type=i(228),this[i(180)](R[i(203)](t,t)),this[i(277)]()}static createRandomGenerator(){const t=A,i=2053,s=[];for(let e=0;e<i;e++)s[t(304)](Math[t(298)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n.currentSeed=(n[e(207)]+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){const e=t;n[e(207)]=Math[e(289)](s*i)%i}};return n}static[T(203)](t={},i={}){const n=T,e=function(s){return i===t?s:s.clone()};return t[n(318)]=void 0!==i[n(318)]?e(i[n(318)]):new s(0,100,0),t[n(183)]=void 0!==i[n(183)]?e(i[n(183)]):new s(0,0,0),t[n(317)]=void 0!==i[n(317)]?i[n(317)]:1,t[n(218)]=void 0!==i[n(218)]?i[n(218)]:.9,t[n(295)]=void 0!==i[n(295)]?i[n(295)]:.7,t.up0=void 0!==i.up0?e(i[n(170)]):new s(0,0,1),t.up1=void 0!==i.up1?e(i[n(188)]):new s(0,0,1),t[n(276)]=void 0!==i[n(276)]?i[n(276)]:1,t[n(179)]=void 0!==i.radius1?i.radius1:1,t.radius0Factor=void 0!==i.radius0Factor?i[n(252)]:.5,t[n(293)]=void 0!==i[n(293)]?i[n(293)]:.2,t.minRadius=void 0!==i[n(331)]?i[n(331)]:.2,t[n(212)]=void 0!==i.isEternal?i[n(212)]:void 0===i[n(215)]||void 0===i[n(245)],t[n(215)]=i[n(215)],t[n(245)]=i.deathTime,t[n(335)]=void 0!==i.propagationTimeFactor?i[n(335)]:.1,t.vanishingTimeFactor=void 0!==i[n(258)]?i.vanishingTimeFactor:.9,t[n(285)]=void 0!==i.subrayPeriod?i[n(285)]:4,t.subrayDutyCycle=void 0!==i.subrayDutyCycle?i[n(336)]:.6,t.maxIterations=void 0!==i[n(210)]?i[n(210)]:9,t[n(233)]=void 0!==i[n(233)]&&i.isStatic,t[n(194)]=void 0!==i[n(194)]?i[n(194)]:5,t[n(265)]=void 0!==i[n(265)]?i[n(265)]:3,t[n(227)]=void 0!==i.recursionProbability?i[n(227)]:.6,t[n(221)]=void 0!==i[n(221)]&&i.generateUVs,t.randomGenerator=i[n(274)],t[n(201)]=i[n(201)],t[n(193)]=i.onDecideSubrayCreation,t[n(240)]=i[n(240)],t}[T(248)](t){const i=T;this.isStatic||(this.rayParameters[i(212)]||this[i(282)].birthTime<=t&&t<=this[i(282)][i(245)]?(this[i(328)](t),t<this[i(172)][0][i(257)]?this[i(308)]=R.RAY_PROPAGATING:t>this[i(172)][0][i(327)]?this[i(308)]=R[i(211)]:this[i(308)]=R[i(186)],this[i(290)]=!0):(this[i(290)]=!1,t<this[i(282)][i(215)]?this.state=R[i(206)]:this.state=R[i(313)]))}[T(180)](t){const i=T;this[i(282)]=t,this[i(210)]=void 0!==t[i(210)]?Math[i(289)](t.maxIterations):9,t[i(210)]=this[i(210)],this.isStatic=void 0!==t[i(233)]&&t[i(233)],t[i(233)]=this[i(233)],this.ramification=void 0!==t[i(194)]?Math.floor(t[i(194)]):5,t[i(194)]=this.ramification,this[i(265)]=void 0!==t[i(265)]?Math[i(289)](t[i(265)]):3,t[i(265)]=this.maxSubrayRecursion,this.recursionProbability=void 0!==t[i(227)]?t[i(227)]:.6,t[i(227)]=this[i(227)],this[i(221)]=void 0!==t[i(221)]&&t[i(221)],t[i(221)]=this[i(221)],void 0!==t[i(274)]?(this.randomGenerator=t.randomGenerator,this[i(256)]=t[i(274)],void 0!==t.noiseSeed&&this[i(256)][i(320)](t[i(201)])):(this[i(274)]=R[i(253)](),this[i(256)]=Math),void 0!==t[i(193)]?this[i(193)]=t[i(193)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(240)]&&(this[i(240)]=t[i(240)])),this[i(308)]=R[i(311)],this[i(337)]=Math.ceil(1+Math[i(309)](this.ramification,Math[i(189)](0,this[i(265)]-1))),t.maxSubrays=this[i(337)],this[i(169)]=2*(1<<this[i(210)]),this.subrays=[];for(let s=0;s<this.maxSubrays;s++)this[i(172)].push(this[i(270)]());this[i(238)]=[];for(let s=0;s<this[i(169)];s++)this[i(238)].push(this[i(204)]());this[i(297)]=0,this[i(301)]=0,this[i(239)]=null,this.currentCreateTriangleVertices=this[i(221)]?this[i(202)]:this[i(192)],this[i(255)]=0,this.currentSubray=null,this[i(321)]=0,this[i(168)]=!1,this[i(213)]=0,this[i(197)]=0,this[i(237)]=0,this[i(272)]=0,this[i(220)]=0,this[i(264)]=null,this[i(184)]=null,this[i(208)]=null,this[i(296)]=null,this[i(302)]=null,this[i(266)]=m(this.seedGenerator[i(298)]),this[i(338)]=m(this[i(256)].random),this[i(323)]=m(this[i(256)][i(298)]),this.forwards=new s,this[i(247)]=new s,this[i(312)]=new s,this[i(209)]=new s,this.middlePos=new s,this[i(231)]=new s,this.newPos=new s,this[i(316)]=new s,this[i(287)]=new s}[T(277)](){const t=T,i=1<<this.maxIterations,s=3*(i+1)*this[t(337)],o=18*i*this[t(337)];this[t(264)]=new Float32Array(3*s),this[t(208)]=new Uint32Array(o),this.generateUVs&&(this[t(184)]=new Float32Array(2*s)),this[t(268)](0),this[t(244)](new n(this[t(208)],1)),this[t(296)]=new e(this[t(264)],3),this[t(334)](t(314),this[t(296)]),this[t(221)]&&(this.uvsAttribute=new e(new Float32Array(this[t(184)]),2),this.setAttribute("uv",this[t(302)])),!this[t(233)]&&(this[t(315)][t(182)]=r,this[t(296)][t(182)]=r,this[t(221)]&&(this[t(302)][t(182)]=r)),this[t(264)]=this[t(296)][t(171)],this[t(208)]=this[t(315)][t(171)],this.generateUVs&&(this[t(184)]=this.uvsAttribute.array)}[T(328)](t){const i=T;this.fillMesh(t),this.drawRange[i(305)]=this[i(237)],this[i(315)].needsUpdate=!0,this[i(296)][i(291)]=!0,this[i(221)]&&(this[i(302)][i(291)]=!0)}[T(268)](t){const i=T,s=this;this[i(197)]=0,this[i(237)]=0,this[i(272)]=0,this.currentUVCoordinate=0,this[i(235)](t,(function(n){const e=i,r=s.currentSubray;t<r.birthTime||(this[e(282)][e(212)]&&0==s[e(332)][e(242)]?(s[e(262)](n),s[e(193)](n,s)):t<r[e(257)]?s[e(301)]>=n[e(174)]*r[e(335)]&&(s[e(262)](n),s[e(193)](n,s)):t<r[e(327)]?(s.createPrism(n),s[e(193)](n,s)):(s[e(301)]<=r.vanishingTimeFactor+n.fraction1*(1-r[e(258)])&&s.createPrism(n),s[e(193)](n,s)))}))}[T(251)](){const t=T;return this[t(172)][this[t(255)]++]}[T(191)](t,i){const s=T;t.pos0[s(173)](i[s(318)]),t[s(177)][s(173)](i[s(183)]),t[s(170)].copy(i.up0),t[s(188)].copy(i[s(188)]),t[s(276)]=i[s(276)],t.radius1=i[s(179)],t[s(215)]=i.birthTime,t[s(245)]=i[s(245)],t[s(317)]=i[s(317)],t[s(218)]=i[s(218)],t[s(295)]=i[s(295)],t.propagationTimeFactor=i[s(335)],t[s(258)]=i[s(258)],t[s(210)]=this[s(210)],t[s(205)]=void 0!==i[s(201)]?i[s(201)]:0,t[s(242)]=0}[T(235)](t,i){const s=T;this[s(297)]=t,this[s(239)]=i,this[s(255)]=0,this[s(191)](this[s(251)](),this.rayParameters);for(let n=0;n<this.numSubrays;n++){const i=this[s(172)][n];this.currentSubray=i,this.randomGenerator[s(320)](i[s(205)]),i[s(257)]=o.lerp(i[s(215)],i[s(245)],i[s(335)]),i.beginVanishingTime=o.lerp(i[s(245)],i[s(215)],1-i[s(258)]);const e=this[s(274)][s(298)];i.linPos0[s(300)](e(),e(),e())[s(260)](1e3),i[s(261)][s(300)](e(),e(),e())[s(260)](1e3),this.timeFraction=(t-i[s(215)])/(i[s(245)]-i[s(215)]),this[s(321)]=0,this[s(168)]=!0;const r=this[s(278)]();r.iteration=0,r[s(329)][s(173)](i[s(329)]),r[s(177)].copy(i[s(177)]),r[s(288)][s(173)](i.linPos0),r.linPos1[s(173)](i[s(261)]),r[s(170)][s(173)](i[s(170)]),r[s(188)][s(173)](i[s(188)]),r.radius0=i.radius0,r[s(179)]=i[s(179)],r[s(174)]=0,r[s(333)]=1,r[s(271)]=1-i.straightness,this.subrayProbability=this.ramification*Math.pow(this[s(227)],i[s(242)])/(1<<i[s(210)]),this.fractalRayRecursive(r)}this.currentSegmentCallback=null,this[s(332)]=null}[T(324)](t){const i=T;if(t[i(199)]>=this[i(332)][i(210)])return void this[i(239)](t);this[i(249)][i(281)](t[i(177)],t.pos0);let s=this[i(249)][i(284)]();s<1e-6&&(this[i(249)].set(0,0,.01),s=this[i(249)].length());const n=.5*(t.radius0+t[i(179)]),e=.5*(t[i(174)]+t[i(333)]),r=this.time*this[i(332)][i(317)]*Math[i(309)](2,t[i(199)]);this[i(226)][i(236)](t[i(329)],t[i(177)],.5),this[i(231)][i(236)](t.linPos0,t[i(261)],.5);const o=this[i(231)];this.newPos[i(300)](this[i(266)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(323)](o.x,o.y,o.z,r)),this[i(185)][i(260)](t.positionVariationFactor*s),this[i(185)].add(this[i(226)]);const a=this.getNewSegment();a[i(329)][i(173)](t.pos0),a[i(177)][i(173)](this[i(185)]),a[i(288)][i(173)](t[i(288)]),a[i(261)][i(173)](this[i(231)]),a[i(170)].copy(t[i(170)]),a[i(188)][i(173)](t[i(188)]),a[i(276)]=t[i(276)],a[i(179)]=n,a.fraction0=t[i(174)],a.fraction1=e,a[i(271)]=t[i(271)]*this.currentSubray[i(218)],a[i(199)]=t[i(199)]+1;const h=this.getNewSegment();h[i(329)][i(173)](this[i(185)]),h[i(177)][i(173)](t.pos1),h[i(288)][i(173)](this[i(231)]),h.linPos1[i(173)](t[i(261)]),this.cross1[i(294)](t[i(170)],this[i(249)][i(225)]()),h[i(170)][i(294)](this[i(249)],this[i(287)]).normalize(),h.up1[i(173)](t[i(188)]),h[i(276)]=n,h[i(179)]=t.radius1,h[i(174)]=e,h[i(333)]=t[i(333)],h[i(271)]=t[i(271)]*this[i(332)][i(218)],h.iteration=t[i(199)]+1,this.fractalRayRecursive(a),this[i(324)](h)}createPrism(t){const i=T;this[i(247)][i(281)](t[i(177)],t[i(329)])[i(225)](),this.isInitialSegment&&(this.currentCreateTriangleVertices(t.pos0,t[i(170)],this.forwardsFill,t.radius0,0),this[i(168)]=!1),this.currentCreateTriangleVertices(t[i(177)],t.up0,this[i(247)],t[i(179)],t[i(333)]),this[i(250)]()}[T(192)](t,i,s,n){const e=T;this.side.crossVectors(i,s)[e(260)](n*R[e(283)]),this[e(209)][e(173)](i)[e(260)](-n*R[e(190)]);const r=this[e(316)],o=this[e(264)];r[e(173)](t)[e(243)](this[e(312)])[e(254)](this[e(209)]),o[this.currentCoordinate++]=r.x,o[this[e(272)]++]=r.y,o[this[e(272)]++]=r.z,r[e(173)](t)[e(254)](this.side)[e(254)](this[e(209)]),o[this.currentCoordinate++]=r.x,o[this[e(272)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(173)](i)[e(260)](n)[e(254)](t),o[this[e(272)]++]=r.x,o[this[e(272)]++]=r.y,o[this[e(272)]++]=r.z,this[e(197)]+=3}[T(202)](t,i,s,n,e){const r=T;this.side[r(294)](i,s)[r(260)](n*R.COS30DEG),this[r(209)][r(173)](i).multiplyScalar(-n*R[r(190)]);const o=this.vPos,a=this.vertices,h=this[r(184)];o[r(173)](t)[r(243)](this[r(312)]).add(this[r(209)]),a[this[r(272)]++]=o.x,a[this[r(272)]++]=o.y,a[this[r(272)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(220)]++]=0,o[r(173)](t).add(this[r(312)])[r(254)](this[r(209)]),a[this[r(272)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(272)]++]=o.z,h[this[r(220)]++]=e,h[this[r(220)]++]=.5,o.copy(i)[r(260)](n)[r(254)](t),a[this[r(272)]++]=o.x,a[this[r(272)]++]=o.y,a[this[r(272)]++]=o.z,h[this[r(220)]++]=e,h[this[r(220)]++]=1,this[r(197)]+=3}[T(250)](t){const i=T,s=this[i(208)];t=this.currentVertex-6,s[this[i(237)]++]=t+1,s[this[i(237)]++]=t+2,s[this[i(237)]++]=t+5,s[this[i(237)]++]=t+1,s[this[i(237)]++]=t+5,s[this[i(237)]++]=t+4,s[this[i(237)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(237)]++]=t+4,s[this[i(237)]++]=t+0,s[this[i(237)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(237)]++]=t+2,s[this[i(237)]++]=t+0,s[this[i(237)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+3,s[this[i(237)]++]=t+5}[T(339)](){const t=T,i=this[t(274)].random;this[t(193)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(282)][e(285)],h=n[e(282)][e(336)],c=n[e(282)][e(212)]&&0==r[e(242)]?-i()*a:o[e(219)](r[e(215)],r.endPropagationTime,s[e(174)])-i()*a,u=n[e(297)]-c,l=Math[e(289)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(213)]),r[e(242)]<n[e(265)]&&n[e(255)]<n[e(337)]&&i()<d){const t=n.addNewSubray(),o=n[e(274)][e(198)]();t[e(205)]=p,n[e(274)][e(320)](p),t[e(242)]=r[e(242)]+1,t[e(210)]=Math[e(189)](1,r[e(210)]-1),t[e(288)].set(i(),i(),i())[e(260)](1e3),t[e(261)][e(300)](i(),i(),i())[e(260)](1e3),t[e(170)][e(173)](r[e(170)]),t[e(188)].copy(r[e(188)]),t.radius0=s[e(276)]*n[e(282)][e(252)],t[e(179)]=Math[e(223)](n.rayParameters[e(331)],s.radius1*n.rayParameters[e(293)]),t[e(215)]=c+l*a,t.deathTime=t[e(215)]+a*h,!n.rayParameters[e(212)]&&0==r[e(242)]&&(t[e(215)]=Math.max(t[e(215)],r.birthTime),t[e(245)]=Math[e(223)](t.deathTime,r[e(245)])),t[e(317)]=2*r.timeScale,t.roughness=r[e(218)],t.straightness=r[e(295)],t[e(335)]=r[e(335)],t[e(258)]=r[e(258)],n[e(240)](s,r,t,n),n[e(274)].setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(240)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const p=t;h[p(329)][p(173)](s.pos0),n[p(281)](o.pos1,o[p(329)]),e[p(173)](n)[p(225)](),n.multiplyScalar(s[p(174)]+(1-s[p(174)])*(i()*c));const d=n[p(284)]();r[p(294)](o[p(170)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(229)](m)),a.copy(o[p(170)]).multiplyScalar(Math[p(267)](m)),h.pos1[p(173)](r)[p(254)](a)[p(260)](d*u*(l+i()*(1-l))).add(n)[p(254)](o.pos0)},this[t(200)]=function(s,o,h,c,u,l){const p=t;h[p(329)].copy(s[p(329)]),n.subVectors(o[p(177)],o[p(329)]),e[p(173)](n).normalize(),n[p(260)](s.fraction0+(1-s[p(174)])*((2*i()-1)*c));const d=n.length();r[p(294)](o[p(170)],e);const m=2*Math.PI*i();r[p(260)](Math.cos(m)),a.copy(o[p(170)])[p(260)](Math[p(267)](m)),h[p(177)][p(173)](r)[p(254)](a)[p(260)](d*u*(l+i()*(1-l))).add(n).add(o[p(329)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(204)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(278)](){const t=T;return this[t(238)][this[t(321)]++]}[T(173)](t){const i=T;return super[i(173)](t),this[i(180)](R[i(203)]({},t[i(282)])),this}clone(){const t=T;return new(this[t(176)])(R[t(203)]({},this[t(282)]))}}function A(t,i){const s=M();return A=function(t,i){return s[t-=168]},A(t,i)}function F(t){function i(t){const s=A;if(typeof t===s(241))return function(t){}[s(176)](s(175)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(176)]("debu"+s(222))[s(187)](s(269)):function(){return!1}[s(176)]("debu"+s(222))[s(330)](s(280)),i(++t)}try{if(t)return i;i(0)}catch(s){}}R[T(311)]=0,R[T(206)]=1,R[T(322)]=2,R[T(186)]=3,R.RAY_VANISHING=4,R[T(313)]=5,R.COS30DEG=Math[T(229)](30*Math.PI/180),R[T(190)]=Math[T(267)](30*Math.PI/180);const z=D;!function(t,i){const s=D,n=L();for(;;)try{if(917294===-parseInt(s(501))/1*(parseInt(s(493))/2)+-parseInt(s(502))/3+-parseInt(s(527))/4+parseInt(s(486))/5*(parseInt(s(507))/6)+parseInt(s(542))/7+parseInt(s(514))/8+-parseInt(s(483))/9*(-parseInt(s(517))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){V(this,(function(){const t=D,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(523),"i"),n=G("init");i.test(n+t(482))&&s.test(n+"input")?G():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(t,i){const s=L();return D=function(t,i){return s[t-=476]},D(t,i)}H(void 0,(function(){const t=D,i=function(){const t=D;let i;try{i=Function(t(532)+t(526)+");")()}catch(s){i=window}return i}(),s=i[t(505)]=i.console||{},n=["log",t(504),t(512),t(476),t(496),t(541),t(498)];for(let e=0;e<n[t(480)];e++){const i=H.constructor[t(549)][t(516)](H),r=n[e],o=s[r]||i;i.__proto__=H[t(516)](H),i[t(479)]=o[t(479)].bind(o),s[r]=i}}))();class N extends a{constructor(t={}){const i=D;super(),this[i(506)]=!0,this[i(519)]=t,t[i(538)]=void 0!==t[i(538)]?t[i(538)]:1e3,t[i(495)]=void 0!==t.minHeight?t[i(495)]:80,t[i(494)]=void 0!==t.maxHeight?t.maxHeight:100,t[i(540)]=void 0!==t[i(540)]?t[i(540)]:1.1,t[i(503)]=void 0!==t.maxLightnings?t.maxLightnings:3,t[i(510)]=void 0!==t[i(510)]?t.lightningMinPeriod:3,t.lightningMaxPeriod=void 0!==t[i(533)]?t[i(533)]:7,t[i(534)]=void 0!==t[i(534)]?t[i(534)]:1,t[i(509)]=void 0!==t[i(509)]?t.lightningMaxDuration:2.5,this[i(490)]=R.copyParameters(t.lightningParameters,t[i(490)]),this.lightningParameters[i(499)]=!1,this[i(477)]=void 0!==t[i(477)]?t[i(477)]:new h({color:11599871}),void 0!==t[i(521)]?this[i(521)]=t[i(521)]:this[i(521)]=function(s,n){const e=i;n[e(515)]((Math.random()-.5)*t.size,0,(Math[e(547)]()-.5)*t[e(538)]);const r=o[e(489)](t[e(495)],t[e(494)],Math[e(547)]());s[e(515)](t.maxSlope*(2*Math[e(547)]()-1),1,t[e(540)]*(2*Math[e(547)]()-1))[e(545)](r)[e(522)](n)},this.onLightningDown=t[i(543)],this[i(539)]=!1,this.nextLightningTime=0,this.lightningsMeshes=[],this[i(529)]=[];for(let s=0;s<this.stormParams[i(503)];s++){const t=new R(R[i(544)]({},this[i(490)])),s=new c(t,this[i(477)]);this[i(529)][i(488)](s)}}[z(485)](t){const i=z;if(!this[i(539)]&&(this[i(530)]=this[i(528)](t)*Math[i(547)](),this[i(539)]=!0),t>=this[i(530)]){const s=this[i(529)][i(535)]();if(s){const n=R.copyParameters(s[i(513)].rayParameters,this[i(490)]);n[i(497)]=t,n[i(520)]=t+o[i(489)](this.stormParams[i(534)],this[i(519)].lightningMaxDuration,Math[i(547)]()),this.onRayPosition(n[i(487)],n[i(525)]),n[i(484)]=Math.random(),this[i(522)](s),this[i(511)].push(s)}this.nextLightningTime=this[i(528)](t)}let s=0,n=this[i(511)][i(480)];for(;s<n;){const e=this.lightningsMeshes[s],r=e.geometry,o=r[i(550)];r[i(485)](t),o===R[i(481)]&&r.state>o&&this[i(543)]&&this[i(543)](r),r[i(550)]===R[i(537)]?(this[i(511)].splice(this.lightningsMeshes[i(536)](e),1),this[i(529)][i(488)](e),this.remove(e),n--):s++}}[z(528)](t){const i=z;return t+o[i(489)](this.stormParams.lightningMinPeriod,this.stormParams[i(533)],Math[i(547)]())/(this[i(519)][i(503)]+1)}[z(524)](t,i){const s=z;return super[s(524)](t,i),this.stormParams[s(538)]=t[s(519)][s(538)],this[s(519)][s(495)]=t[s(519)][s(495)],this.stormParams[s(494)]=t[s(519)][s(494)],this.stormParams[s(540)]=t[s(519)][s(540)],this[s(519)].maxLightnings=t[s(519)][s(503)],this.stormParams.lightningMinPeriod=t[s(519)][s(510)],this[s(519)][s(533)]=t[s(519)][s(533)],this[s(519)][s(534)]=t[s(519)][s(534)],this[s(519)][s(509)]=t[s(519)][s(509)],this[s(490)]=R.copyParameters({},t[s(490)]),this[s(477)]=t.stormParams.lightningMaterial,this[s(543)]=t[s(543)],this}clone(){const t=z;return new(this[t(546)])(this[t(519)])[t(524)](this)}}function G(t){function i(t){const s=D;if(typeof t===s(548))return function(t){}.constructor(s(508))[s(491)]("counter");1!==(""+t/t)[s(480)]||t%20==0?function(){return!0}.constructor(s(478)+s(518))[s(531)](s(500)):function(){return!1}[s(546)]("debu"+s(518))[s(491)](s(492)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function L(){const t=["console","isLightningStorm","36lyqLvK","while (true) {}","lightningMaxDuration","lightningMinPeriod","lightningsMeshes","info","geometry","8352744ZiLWhY","set","bind","700cErNDN","gger","stormParams","deathTime","onRayPosition","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","copy","destOffset",'{}.constructor("return this")( )',"4975804GwZYzo","getNextLightningTime","deadLightningsMeshes","nextLightningTime","call","return (function() ","lightningMaxPeriod","lightningMinDuration","pop","indexOf","RAY_EXTINGUISHED","size","inited","maxSlope","table","1589049aBSlbr","onLightningDown","copyParameters","multiplyScalar","constructor","random","string","prototype","state","error","lightningMaterial","debu","toString","length","RAY_PROPAGATING","chain","310509KdJtmR","noiseSeed","update","318085WeBCKa","sourceOffset","push","lerp","lightningParameters","apply","stateObject","93782aluFtU","maxHeight","minHeight","exception","birthTime","trace","isEternal","action","7RKYfzT","4735170lCCMTR","maxLightnings","warn"];return(L=function(){return t})()}const O=Z;!function(t,i){const s=Z,n=U();for(;;)try{if(114055===parseInt(s(341))/1*(parseInt(s(320))/2)+parseInt(s(377))/3*(-parseInt(s(338))/4)+-parseInt(s(373))/5*(parseInt(s(350))/6)+parseInt(s(359))/7*(parseInt(s(365))/8)+-parseInt(s(340))/9*(parseInt(s(367))/10)+parseInt(s(347))/11+-parseInt(s(351))/12*(-parseInt(s(332))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Z(t,i){const s=U();return Z=function(t,i){return s[t-=316]},Z(t,i)}function U(){const t=["MeshBasicMaterial","195stZOri","add","pos1","Vector3","string","debu","primitive","subrayDutyCycle","maxHeight","radius1","334wCXOLc","radius0","input","table","trace","while (true) {}","test","lightStorm","object","apply","rayParameters","minHeight","6218953CAmAlZ","addVectors","color","#b0ffff","call","info","13300ObjMHt","subrayConePosition","1706481EWutda","532jpjIyj","subrayPeriod",'{}.constructor("return this")( )',"update","multiplyScalar","bind","706904uzbqsv","straightness","console","122862EIcJcT","12IrrlWO","return (function() ","error","length","timeScale","roughness","size","action","221473XqqiwB","function *\\( *\\)","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","copy","8JDozBi","constructor","10ScgnrE","sourceOffset","__proto__","Color","gger","counter","35ipuKIo","subVectors","dot"];return(U=function(){return t})()}!function(){E(this,(function(){const t=Z,i=new RegExp(t(360)),s=new RegExp(t(362),"i"),n=$("init");i.test(n+t(361))&&s[t(326)](n+t(322))?$():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=Z;let i;try{i=Function(t(352)+t(343)+");")()}catch(e){i=window}const s=i[t(349)]=i[t(349)]||{},n=["log","warn",t(337),t(353),"exception",t(323),t(324)];for(let r=0;r<n[t(354)];r++){const i=Y[t(366)].prototype[t(346)](Y),e=n[r],o=s[e]||i;i[t(369)]=Y.bind(Y),i[t(363)]=o.toString[t(346)](o),s[e]=i}}))();const k=[O(328)],W=f({__name:O(327),props:{color:{default:O(335)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,n=t,e=new(u[i(370)])(n[i(334)]),r=new(u[i(376)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(u[i(380)]),c=new(u[i(380)]),p={roughness:n[i(356)],straightness:n[i(348)],radius0:n[i(321)],radius1:n.radius1,timeScale:n[i(355)],subrayPeriod:n[i(342)],subrayDutyCycle:n[i(317)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(339)](t,s,n,.6,.6,.5),a=e[r(330)].sourceOffset.y,h[r(374)](n[r(379)],e.rayParameters[r(368)]);const u=o[r(375)](h);c[r(364)](o)[r(345)](u),h.sub(c);const l=u/a>.5?a/u:1;c[r(345)](l),h[r(378)](c),n[r(379)][r(333)](h,e.rayParameters[r(368)])}},d=new N({size:n[i(357)],minHeight:n.minHeight,maxHeight:n[i(318)],maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d.stormParams;s[t(357)]=n[t(357)],s[t(331)]=n[t(331)],s[t(318)]=n.maxHeight,r[t(334)].set(n.color),p.roughness=n[t(356)],p[t(348)]=n.straightness,p[t(321)]=n[t(321)],p[t(319)]=n[t(319)],p[t(355)]=n[t(355)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(344)](t)})),(t,s)=>{const n=i;return y(),b(n(316),{object:v(d),renderOrder:9999},null,8,k)}}});function $(t){function i(t){const s=Z;if(typeof t===s(381))return function(t){}.constructor(s(325)).apply(s(372));1!==(""+t/t)[s(354)]||t%20==0?function(){return!0}[s(366)]("debugger")[s(336)](s(358)):function(){return!1}.constructor(s(382)+s(371))[s(329)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=J;!function(t,i){const s=J,n=X();for(;;)try{if(820519===parseInt(s(276))/1+-parseInt(s(284))/2*(parseInt(s(239))/3)+parseInt(s(271))/4*(parseInt(s(252))/5)+-parseInt(s(255))/6+parseInt(s(257))/7*(parseInt(s(274))/8)+-parseInt(s(245))/9+parseInt(s(248))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function X(){const t=["exception","info","counter","call","#ffbde7","bind","时间缩放","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","console","8VJjLHM","radius1","debu","8cjdKNN","log","543013HjMFTw","function *\\( *\\)","init","lightningStorm","#92399e","error","gger","constructor","4998CJMmiZ","apply","straightness","radius0","927xZWfcI","粗糙度","maxHeight","roughness","action",'{}.constructor("return this")( )',"13270275zfnUHX","value","#6f6f6f","18150360kQgcCI","trace","input","color","1468085adoKeF","while (true) {}","toString","4294974dCYleZ","prototype","5864117HROWAq","length","test","minHeight"];return(X=function(){return t})()}!function(){K(this,(function(){const t=J,i=new RegExp(t(277)),s=new RegExp(t(268),"i"),n=tt(t(278));i[t(259)](n+"chain")&&s[t(259)](n+t(250))?tt():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(285)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(t,i){const s=X();return J=function(t,i){return s[t-=237]},J(t,i)}q(void 0,(function(){const t=J;let i;try{i=Function("return (function() "+t(244)+");")()}catch(e){i=window}const s=i[t(270)]=i[t(270)]||{},n=[t(275),"warn",t(262),t(281),t(261),t(269),t(249)];for(let r=0;r<n[t(258)];r++){const i=q[t(283)][t(256)].bind(q),e=n[r],o=s[e]||i;i.__proto__=q[t(266)](q),i[t(254)]=o.toString.bind(o),s[e]=i}}))();const Q=f({__name:B(279),setup(i){const s=B,n=S({cellSize:60,cellThickness:1,cellColor:s(247),sectionColor:s(280),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(265),roughness:{label:s(240),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:"端部半径",value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(267),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:x((()=>[w(W,{minHeight:v(e)[m(246)],maxHeight:v(r)[m(246)],color:v(o)[m(246)],roughness:v(a)[m(246)],straightness:v(h)[m(246)],radius0:v(c).value,radius1:v(u)[m(246)],timeScale:v(l)[m(246)]},null,8,[m(260),m(241),m(251),m(242),m(237),m(238),m(272),"timeScale"]),w(v(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(d))],64)}}});function tt(t){function i(t){const s=J;if("string"==typeof t)return function(t){}[s(283)](s(253))[s(285)](s(263));1!==(""+t/t).length||t%20==0?function(){return!0}[s(283)](s(273)+s(282))[s(264)](s(243)):function(){return!1}[s(283)]("debugger")[s(285)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{Q as default};

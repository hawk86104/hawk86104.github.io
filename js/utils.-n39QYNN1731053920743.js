import"./@fesjs.jcfJqFb-1731053920743.js";import{_ as t}from"./jszip.djQt-NeA1731053920743.js";import{F as n}from"./file-saver.XcXQl-fJ1731053920743.js";import{_ as e,aL as s}from"./three.eGpwEcxC1731053920743.js";const o=i;!function(t,n){const e=i,s=u();for(;;)try{if(471572===-parseInt(e(522))/1+-parseInt(e(533))/2+parseInt(e(524))/3+parseInt(e(530))/4+parseInt(e(465))/5*(parseInt(e(497))/6)+-parseInt(e(470))/7*(-parseInt(e(453))/8)+-parseInt(e(459))/9)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(540)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=i,n=new RegExp(t(520)),e=new RegExp(t(489),"i"),s=h(t(517));n[t(544)](s+"chain")&&e[t(544)](s+t(464))?h():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(540)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=u();return(i=function(t,n){return e[t-=453]})(t,n)}async function c(t){const n=new s;return new Promise(((e,s)=>{const o=i;n[o(525)](t,(t=>e(JSON[o(500)](t))),void 0,(t=>s(t)))}))}function u(){const t=["name","startsWith","data:image/PNG;base64,","uuid","log","12IrCrbc","push","async","parse","return (function() ","type","data:","toString","substring","data:image/","toUpperCase","bind","images","counter","data","onloadend","WEBP","image/gif","folder","GIF","init","prototype","gger","function *\\( *\\)","toLowerCase","96530wqTLut","get","1160352BtVcmc","load","data:image/jpeg;base64,","Cache","readAsDataURL","image/jpeg","2177628uzRCoh","message","非标准文件：不存在 app.json","925712XQCMYy","data:image/JPEG;base64,","info","url","FileLoader","file","data:image/png;base64,","apply","then","catch",'{}.constructor("return this")( )',"test","length","setResponseType","JPEG","exception","blob","BufferGeometry","image/bmp","trace","5320KGWaIT","url:images/","url:","enabled","data:image/webp;base64,","application/octet-stream","1549098BiEXEg","scene","pop","call","Unknown","input","415385YVlUGv","error","geometries",";base64,","app.json","1113fXtFyC","PNG","stringify","constructor","result","debu","base64",".json","split","endsWith","onerror","__proto__","warn","action","config.zip","loadAsync","string","console","forEach","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","files","slice"];return(u=function(){return t})()}async function f(t){const n=o,s=new(e[n(537)]);return new Promise(((e,r)=>{const a=n;s[a(546)](a(549)),s[a(525)](t,(n=>{const s=a,i=new FileReader;i[s(512)]=()=>{const n=s,r=function(t){const n=o,e=t[n(478)](".").pop()[n(521)]();return{jpg:n(529),jpeg:n(529),png:"image/png",gif:n(514),bmp:n(551),webp:"image/webp"}[e]||n(458)}(t),a=i[n(474)].split(",")[1];e(n(503)+r+n(468)+a)},i[s(480)]=t=>{r(t)},i[s(528)](n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=i,n=function(){const t=i;let n;try{n=Function(t(501)+t(543)+");")()}catch(e){n=window}return n}(),e=n[t(487)]=n[t(487)]||{},s=[t(496),t(482),t(535),t(466),t(548),"table",t(552)];for(let o=0;o<s[t(545)];o++){const n=a[t(473)][t(518)].bind(a),r=s[o],i=e[r]||n;n[t(481)]=a[t(508)](a),n.toString=i[t(504)][t(508)](i),e[r]=n}}))(),e[o(527)][o(456)]=!0;const p=n=>{const s=o,r=new(e[s(537)]);return r[s(546)](s(549)),new Promise(((e,o)=>{const a=s;r[a(525)](n,(async n=>{const s=a;e(await t[s(485)](n))}),void 0,(t=>o(t)))}))},l=t=>{const n=o,e=t[n(505)](0,15),s=n(526),r=n(534),a=n(539),i=n(494),c=n(457);return s.startsWith(e)||r.startsWith(e)?n(547):a[n(493)](e)||i[n(493)](e)?n(471):"data:image/gif;base64,"[n(493)](e)||"data:image/GIF;base64,"[n(493)](e)?n(516):c.startsWith(e||"data:image/WEBP;base64,"[n(493)](e))?n(513):n(463)},g=e=>{const s=o,r=[];e[s(460)][s(467)]&&e.scene[s(467)][s(488)]((t=>{const n=s;t[n(502)]===n(550)&&(r[n(498)]({uuid:t[n(495)],data:t[n(511)]}),t.data="url:geometries/"+t[n(495)]+n(477))}));const a=[];e.scene.images&&e[s(460)][s(509)].forEach((t=>{const n=s;t[n(536)]&&(a.push({uuid:t.uuid,url:t[n(536)]}),t[n(536)][n(502)]?t[n(536)]=n(454)+t[n(495)]+"."+t[n(536)][n(502)]+n(477):t.url=n(454)+t.uuid+"."+l(t[n(536)]))}));const i=new t;if(r.length){const t=i.folder(s(467));r[s(488)]((n=>{const e=s;t[e(538)](n.uuid+e(477),JSON.stringify(n[e(511)]))}))}if(a[s(545)]){const t=i[s(515)](s(509));a[s(488)]((n=>{const e=s;n.url[e(502)]?t[e(538)](n.uuid+"."+n[e(536)][e(502)]+e(477),JSON[e(472)](n[e(536)])):t[e(538)](n[e(495)]+"."+l(n.url),n.url[e(478)](e(468))[e(461)](),{base64:!0})}))}const c=JSON[s(472)](e);return i[s(538)]("app.json",c),i.generateAsync({type:s(549)})[s(541)]((t=>{const e=s;n.saveAs(t,e(484))}))},m=(t,n,e)=>{t.geometries<=0&&t.images<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(485)](n)[s(541)]((t=>{const n=s;t[n(490)][n(469)]?t[n(490)][n(469)][n(499)](n(486))[n(541)]((s=>{var a,i;const c=n;r=JSON[c(500)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t.scene[s(467)])||n[s(488)]((t=>{const n=s;t[n(511)].startsWith(n(455))&&r[n(467)]++})),null==(e=t.scene[s(509)])||e[s(488)]((t=>{const n=s;t[n(536)].startsWith(n(455))&&r[n(509)]++})),r})(r);m(u,r,e),null==(a=r.scene[c(467)])||a.forEach((n=>{const s=c;n[s(511)][s(493)]("url:")&&t.files[n[s(511)][s(491)](4)][s(499)](s(486)).then((t=>{const o=s;n[o(511)]=JSON[o(500)](t),u[o(467)]--,m(u,r,e)}))})),null==(i=r[c(460)][c(509)])||i[c(488)]((n=>{const s=c;if(n[s(536)].startsWith("url:")){const o=n[s(536)][s(491)](4);o[s(479)](s(477))?t[s(490)][o].async(s(486))[s(541)]((t=>{const o=s;n[o(536)]=JSON[o(500)](t),u[o(509)]--,m(u,r,e)})):t.files[o][s(499)](s(476))[s(541)]((t=>{const a=s,i=o[a(478)]("."),c=i[i[a(545)]-1][a(507)]();n[a(536)]=a(506)+c+a(468)+t,u[a(509)]--,m(u,r,e)}))}}))})):console[n(466)](n(532))}),(t=>{const e=s;console[e(466)](n[e(492)]+": "+t[e(531)])})),r};function h(t){function n(t){const e=i;if(typeof t===e(486))return function(t){}[e(473)]("while (true) {}")[e(540)](e(510));1!==(""+t/t)[e(545)]||t%20==0?function(){return!0}[e(473)](e(475)+e(519))[e(462)](e(483)):function(){return!1}[e(473)](e(475)+e(519))[e(540)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,f as b,g as e,l as g,d as i,c as l};

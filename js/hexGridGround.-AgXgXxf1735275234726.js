import{e as n,W as t,U as e}from"./@tresjs.fCqPNEAw1735275234726.js";import{P as i}from"./tweakpane.yHWGBmom1735275234726.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mi6rugTA1735275234726.js";import{_ as r}from"./three.jpi2UCEx1735275234726.js";import{d as s,w as a,o as c,f as u,u as l,D as f,J as d,j as p,m as v,r as m,e as h,g,al as w}from"./@vue.u2cBPEWn1735275234726.js";import"./@vueuse.8jEBPPFT1735275234726.js";import"./all.three.XuJc20cT1735275234726.js";import"./oimophysics.x0jH7fze1735275234726.js";const b=_;!function(n,t){const e=_,i=I();for(;;)try{if(717165===-parseInt(e(313))/1+parseInt(e(308))/2+parseInt(e(281))/3+parseInt(e(292))/4+-parseInt(e(321))/5+parseInt(e(329))/6*(-parseInt(e(305))/7)+-parseInt(e(300))/8*(-parseInt(e(317))/9))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const y=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[_(303)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){y(this,(function(){const n=_,t=new RegExp(n(330)),e=new RegExp(n(324),"i"),i=D(n(299));t[n(315)](i+n(316))&&e[n(315)](i+"input")?D():i("0")}))()}();const x=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[_(303)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function _(n,t){const e=I();return(_=function(n,t){return e[n-=281]})(n,t)}function I(){const n=["gger","wavePow","info","fragmentShader","trace","init","152yIktrL","bind","hexGridMaterial","apply","exception","43477BgmpVa","prototype","speed","2615166yzsbqG","constructor","division","return (function() ","value","889164OqvzFw","raisedBottom","test","chain","24147bIhBMz","gridWeight","debu","log","1556200GPDaNn","action","divisionScaleX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","waveFrequency","direction","baseMaterial","228UfYOcR","function *\\( *\\)","console","1558827HoOrfv","warn","side","isReversed","table","__proto__","MeshPhongMaterial","toString","counter","call","DoubleSide","1101672SDHKYX",'{}.constructor("return this")( )'];return(I=function(){return n})()}x(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function(n(311)+n(293)+");")()}catch(e){t=window}return t}(),e=t[n(331)]=t.console||{},i=[n(320),n(282),n(296),"error",n(304),n(285),n(298)];for(let o=0;o<i.length;o++){const t=x.constructor[n(306)][n(301)](x),r=i[o],s=e[r]||t;t[n(286)]=x[n(301)](x),t[n(288)]=s[n(288)][n(301)](s),e[r]=t}}))();const M=s({__name:b(302),props:{baseMaterial:{default:new(r[b(287)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1}},setup(e){const i=b,o=e,s={gridWeight:{value:o.gridWeight},raisedBottom:{value:o.raisedBottom},waveFrequency:{value:o[i(326)]},wavePow:{value:o[i(295)]},direction:{value:o.direction},isReversed:{value:o[i(284)]},hasMaskTexture:{value:!1},maskTexture:{value:null},division:{value:o[i(310)]},divisionScaleX:{value:o[i(323)]},time:{value:0}};a((()=>[o[i(318)],o[i(314)],o[i(326)],o[i(295)],o[i(310)],o[i(323)],o.direction,o[i(284)]]),(([n,t,e,o,r,a,c,u])=>{const l=i;s[l(318)][l(312)]=n,s.raisedBottom.value=t,s[l(326)][l(312)]=e,s[l(295)][l(312)]=o,s[l(310)][l(312)]=r,s[l(323)][l(312)]=a,s[l(327)].value=c,s[l(284)][l(312)]=u}));const{onLoop:f}=n();return f((({delta:n})=>{const t=i;s.time[t(312)]+=n*o[t(307)]})),(n,o)=>{const a=i;return c(),u(l(t),{baseMaterial:e.baseMaterial,vertexShader:"\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n",side:r[a(291)],transparent:"",fragmentShader:l("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:s},null,8,[a(328),a(283),a(297)])}}});function D(n){function t(n){const e=_;if("string"==typeof n)return function(n){}[e(309)]("while (true) {}").apply(e(289));1!==(""+n/n)[e(325)]||n%20==0?function(){return!0}.constructor(e(319)+e(294))[e(290)](e(322)):function(){return!1}[e(309)](e(319)+e(294)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const C=j;function P(){const n=["922386meKEui","2105844mYaBWf","call","2269656WUwGaC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","550NkCDJG","log","8JqXekX",'{}.constructor("return this")( )',"__proto__","TresPlaneGeometry","stateObject","length","MeshBasicMaterial","console","table","270892qTWQLv","bind","chain","test","TresMesh","error","init","action","while (true) {}","warn","27700CWjREr","toString","prototype","hexGridMesh","constructor","counter","return (function() ","$attrs","1071259oFMXCM","debu","12jLQfUV","gger","input","2yEVWGH","trace","5HFvTjA","baseMaterial","95588VrGTKi","exception"];return(P=function(){return n})()}function j(n,t){const e=P();return(j=function(n,t){return e[n-=463]})(n,t)}!function(n,t){const e=j,i=P();for(;;)try{if(151977===parseInt(e(471))/1*(parseInt(e(467))/2)+-parseInt(e(464))/3*(-parseInt(e(490))/4)+parseInt(e(469))/5*(parseInt(e(473))/6)+-parseInt(e(508))/7+-parseInt(e(481))/8*(parseInt(e(476))/9)+parseInt(e(500))/10*(-parseInt(e(479))/11)+parseInt(e(474))/12)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const k=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[j(478)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){k(this,(function(){const n=j,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(477),"i"),i=F(n(496));t.test(i+n(492))&&e[n(493)](i+n(466))?F():i("0")}))()}();const B=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[j(478)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();B(void 0,(function(){const n=j,t=function(){const n=j;let t;try{t=Function(n(506)+n(482)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(488)]||{},i=[n(480),n(499),"info",n(495),n(472),n(489),n(468)];for(let o=0;o<i[n(486)];o++){const t=B[n(504)][n(502)][n(491)](B),r=i[o],s=e[r]||t;t[n(483)]=B[n(491)](B),t[n(501)]=s[n(501)].bind(s),e[r]=t}}))();const R=["rotation"],S=s({__name:C(503),setup(n){const t=C,e=new(r[t(487)]);return(n,i)=>{const o=t;return c(),f(o(494),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=d(o(484),{args:[1,1]},null,-1)),p(M,v({baseMaterial:l(e)},n[o(507)]),null,16,[o(470)])],8,R)}}});function F(n){function t(n){const e=j;if("string"==typeof n)return function(n){}[e(504)](e(498))[e(478)](e(505));1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(504)](e(463)+"gger")[e(475)](e(497)):function(){return!1}[e(504)](e(463)+e(465))[e(478)](e(485)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const T=z;!function(n,t){const e=z,i=X();for(;;)try{if(273752===parseInt(e(295))/1*(parseInt(e(328))/2)+-parseInt(e(300))/3*(parseInt(e(333))/4)+parseInt(e(315))/5*(parseInt(e(325))/6)+parseInt(e(313))/7*(-parseInt(e(344))/8)+parseInt(e(304))/9*(parseInt(e(336))/10)+-parseInt(e(316))/11+-parseInt(e(299))/12*(-parseInt(e(298))/13))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const W=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[z(310)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){W(this,(function(){const n=z,t=new RegExp(n(303)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=A("init");t[n(331)](i+n(308))&&e[n(331)](i+"input")?A():i("0")}))()}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[z(310)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function X(){const n=["constructor","chain","TresCanvas","apply","trace","isReversed","621789MlbihO","console","5xfrtcV","4869029RFXhaZ","raisedBottom","length","string","toString","log","gger","direction","prototype","2770692EQVTuL","hexGridGround","网格整体缩放","6HVQkfU","debu","division","test","wavePow","8sgDuKZ",'{}.constructor("return this")( )',"方向类别","33230ZNfjHU","stateObject","counter","网格宽度","divisionScaleX","action","TresPerspectiveCamera","call","40RtQicP","while (true) {}","error","waveFrequency","99406prvTiq","渐变强度","warn","59527gQPgak","1212hobanI","446829UHDdyD","网格横向缩放","table","function *\\( *\\)","639xJquIU","bind","addBinding"];return(X=function(){return n})()}function z(n,t){const e=X();return(z=function(n,t){return e[n-=294]})(n,t)}q(void 0,(function(){const n=z;let t;try{t=Function("return (function() "+n(334)+");")()}catch(o){t=window}const e=t[n(314)]=t[n(314)]||{},i=[n(321),n(297),"info",n(346),"exception",n(302),n(311)];for(let r=0;r<i[n(318)];r++){const t=q.constructor[n(324)][n(305)](q),o=i[r],s=e[o]||t;t.__proto__=q[n(305)](q),t[n(320)]=s.toString[n(305)](s),e[o]=t}}))();const G=s({__name:T(326),setup(n){const t=T,r=m({reflectivity:.8,showGridHelper:!1,scale:1}),s=m({color:"#de62f2",speed:1.2,gridWeight:.03,raisedBottom:.05,waveFrequency:.2,wavePow:4,division:32,divisionScaleX:1,isReversed:!1,direction:4}),a=new i({title:t(326),expanded:!0});return a.addBinding(s,"color",{label:"颜色"}),a[t(306)](s,"speed",{label:"速度",min:-5,max:5,step:.1}),a[t(306)](s,"gridWeight",{label:t(339),min:.001,max:.5,step:.001}),a[t(306)](s,t(317),{label:"渐变宽度",min:.001,max:1,step:.001}),a[t(306)](s,t(294),{label:"分段",min:.001,max:1,step:.001}),a[t(306)](s,t(332),{label:t(296),min:1,max:30,step:.1}),a[t(306)](s,t(330),{label:t(327),min:.1,max:50,step:.1}),a[t(306)](s,t(340),{label:t(301),min:.1,max:10,step:.1}),a[t(306)](s,t(312),{label:"颜色取反"}),a.addBinding(s,t(323),{label:t(335),min:3,max:6,step:1}),(n,i)=>{const a=t,f=h(a(309));return c(),u(f,{clearColor:"#666666","window-size":""},{default:g((()=>[i[0]||(i[0]=d(a(342),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),p(l(e),{enableDamping:"",autoRotate:""}),(c(),u(w,null,{default:g((()=>[p(S,v(s,{scale:9}),null,16)])),_:1})),(c(),u(w,null,{default:g((()=>[p(o,v({position:[0,-.06,0]},r),null,16)])),_:1}))])),_:1})}}});function A(n){function t(n){const e=z;if(typeof n===e(319))return function(n){}[e(307)](e(345)).apply(e(338));1!==(""+n/n)[e(318)]||n%20==0?function(){return!0}.constructor(e(329)+e(322))[e(343)](e(341)):function(){return!1}[e(307)](e(329)+"gger")[e(310)](e(337)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{G as default};

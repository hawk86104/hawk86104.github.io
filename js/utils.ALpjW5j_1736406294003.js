import"./@fesjs.GZFvw4sh1736406294003.js";import{_ as t}from"./jszip.PTcwYbUP1736406294003.js";import{F as n}from"./file-saver.CKCw_Kyi1736406294003.js";import{_ as e,aN as s}from"./three.jaHX2_hY1736406294003.js";const o=d;!function(t,n){const e=d,s=b();for(;;)try{if(995618===-parseInt(e(332))/1+parseInt(e(348))/2+-parseInt(e(366))/3+parseInt(e(351))/4+-parseInt(e(327))/5*(-parseInt(e(323))/6)+-parseInt(e(339))/7*(-parseInt(e(338))/8)+parseInt(e(306))/9*(-parseInt(e(316))/10))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[d(299)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=d,n=new RegExp(t(302)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=m(t(297));n[t(376)](s+t(305))&&e[t(376)](s+t(304))?m():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[d(299)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=new s;return new Promise(((e,s)=>{const o=d;n[o(357)](t,(t=>e(JSON[o(324)](t))),void 0,(t=>s(t)))}))}async function c(t){const n=new s;return new Promise(((e,s)=>{const r=d;n[r(356)](r(298)),n[r(357)](t,(n=>{const a=r,i=new FileReader;i[a(361)]=()=>{const n=a,s=function(t){const n=o,e=t.split(".")[n(347)]()[n(369)]();return{jpg:n(371),jpeg:"image/jpeg",png:"image/png",gif:n(343),bmp:"image/bmp",webp:"image/webp"}[e]||n(296)}(t),r=i[n(293)].split(",")[1];e("data:"+s+n(345)+r)},i[a(385)]=t=>{s(t)},i[a(359)](n)}),void 0,(t=>s(t)))}))}a(void 0,(function(){const t=d,n=function(){const t=d;let n;try{n=Function(t(337)+t(303)+");")()}catch(e){n=window}return n}(),e=n[t(383)]=n[t(383)]||{},s=[t(315),t(367),t(311),"error",t(294),t(313),t(381)];for(let o=0;o<s[t(325)];o++){const n=a[t(295)][t(328)][t(346)](a),r=s[o],i=e[r]||n;n[t(354)]=a[t(346)](a),n.toString=i[t(309)][t(346)](i),e[r]=n}}))(),e[o(330)].enabled=!0;const u=n=>{const s=o,r=new(e[s(379)]);return r[s(356)]("blob"),new Promise(((e,o)=>{const a=s;r[a(357)](n,(async n=>{const s=a;e(await t[s(291)](n))}),void 0,(t=>o(t)))}))},l=t=>{const n=o,e=t[n(318)](0,15),s=n(317),r=n(382),a=n(349),i=n(310),c=n(387),u=n(358),l=n(292),p=n(308);return s.startsWith(e)||r.startsWith(e)?n(290):a.startsWith(e)||i[n(341)](e)?n(365):c.startsWith(e)||u[n(341)](e)?"GIF":l[n(341)](e||p[n(341)](e))?n(312):n(372)},p=e=>{const s=o,r=[];e.scene[s(360)]&&e.scene.geometries[s(374)]((t=>{const n=s;t[n(380)]===n(336)&&(r[n(370)]({uuid:t[n(326)],data:t.data}),t.data="url:geometries/"+t[n(326)]+n(352))}));const a=[];e[s(344)][s(342)]&&e[s(344)][s(342)][s(374)]((t=>{const n=s;t.url&&(a.push({uuid:t[n(326)],url:t[n(320)]}),t[n(320)][n(380)]?t[n(320)]=n(322)+t[n(326)]+"."+t[n(320)][n(380)]+n(352):t[n(320)]=n(322)+t.uuid+"."+l(t[n(320)]))}));const i=new t;if(r[s(325)]){const t=i[s(368)](s(360));r.forEach((n=>{const e=s;t[e(378)](n.uuid+e(352),JSON[e(355)](n[e(331)]))}))}if(a[s(325)]){const t=i.folder(s(342));a[s(374)]((n=>{const e=s;n.url[e(380)]?t[e(378)](n[e(326)]+"."+n[e(320)].type+e(352),JSON[e(355)](n[e(320)])):t[e(378)](n.uuid+"."+l(n.url),n[e(320)].split(";base64,")[e(347)](),{base64:!0})}))}const c=JSON[s(355)](e);return i.file(s(301),c),i[s(335)]({type:"blob"})[s(353)]((t=>{const e=s;n.saveAs(t,e(334))}))},f=(t,n,e)=>{t[o(360)]<=0&&t.images<=0&&e(n)},g=(n,e)=>{const s=o;let r=null;return t[s(291)](n)[s(353)]((t=>{const n=s;t.files[n(301)]?t.files["app.json"][n(307)](n(300)).then((s=>{var a,i;const c=n;r=JSON[c(324)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(344)][s(360)])||n[s(374)]((t=>{const n=s;t.data[n(341)](n(364))&&r[n(360)]++})),null==(e=t[s(344)][s(342)])||e[s(374)]((t=>{const n=s;t[n(320)][n(341)](n(364))&&r[n(342)]++})),r})(r);f(u,r,e),null==(a=r[c(344)].geometries)||a[c(374)]((n=>{const s=c;n[s(331)][s(341)]("url:")&&t[s(377)][n[s(331)].slice(4)].async(s(300)).then((t=>{const o=s;n[o(331)]=JSON.parse(t),u[o(360)]--,f(u,r,e)}))})),null==(i=r.scene[c(342)])||i[c(374)]((n=>{const s=c;if(n[s(320)][s(341)]("url:")){const o=n[s(320)][s(314)](4);o[s(386)](s(352))?t.files[o][s(307)](s(300))[s(353)]((t=>{const o=s;n[o(320)]=JSON[o(324)](t),u.images--,f(u,r,e)})):t[s(377)][o].async(s(321))[s(353)]((t=>{const a=s,i=o[a(362)]("."),c=i[i.length-1].toUpperCase();n.url=a(375)+c+a(345)+t,u[a(342)]--,f(u,r,e)}))}}))})):console.error(n(333))}),(t=>{const e=s;console.error(n[e(373)]+": "+t[e(363)])})),r};function m(t){function n(t){const e=d;if(typeof t===e(300))return function(t){}[e(295)](e(329))[e(299)]("counter");1!==(""+t/t)[e(325)]||t%20==0?function(){return!0}.constructor(e(340)+e(350)).call("action"):function(){return!1}.constructor(e(340)+e(350))[e(299)](e(319)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function d(t,n){const e=b();return(d=function(t,n){return e[t-=290]})(t,n)}function b(){const t=["load","data:image/GIF;base64,","readAsDataURL","geometries","onloadend","split","message","url:","PNG","2482458IfoAUM","warn","folder","toLowerCase","push","image/jpeg","Unknown","name","forEach","data:image/","test","files","file","FileLoader","type","trace","data:image/JPEG;base64,","console","catch","onerror","endsWith","data:image/gif;base64,","JPEG","loadAsync","data:image/webp;base64,","result","exception","constructor","application/octet-stream","init","blob","apply","string","app.json","function *\\( *\\)",'{}.constructor("return this")( )',"input","chain","27IbwjIM","async","data:image/WEBP;base64,","toString","data:image/PNG;base64,","info","WEBP","table","slice","log","3346700wxQbUs","data:image/jpeg;base64,","substring","stateObject","url","base64","url:images/","22614MrfGib","parse","length","uuid","1920zYxlun","prototype","while (true) {}","Cache","data","1226022BFcdTg","非标准文件：不存在 app.json","config.zip","generateAsync","BufferGeometry","return (function() ","16ROLBjS","2427544ZWbaDe","debu","startsWith","images","image/gif","scene",";base64,","bind","pop","2044222ZkChGS","data:image/png;base64,","gger","3560580ACfiRa",".json","then","__proto__","stringify","setResponseType"];return(b=function(){return t})()}export{u as a,c as b,p as e,l as g,g as i,i as l};

import{s as n,_ as t,cM as e,c2 as o,m as i,az as r,C as a,ab as s}from"./three.8H01GNxA1736128832096.js";import{m as l,e as u,b as c}from"./@tresjs.pA0fT6uQ1736128832096.js";import{d as f,b as p,a4 as m,a1 as b,o as g,D as v,J as y,aj as d,ak as h,u as w}from"./@vue.yG49nQHr1736128832096.js";const _=S;!function(n,t){const e=S,o=x();for(;;)try{if(577340===parseInt(e(509))/1+-parseInt(e(500))/2+-parseInt(e(473))/3+parseInt(e(466))/4*(parseInt(e(504))/5)+-parseInt(e(480))/6+parseInt(e(501))/7*(-parseInt(e(519))/8)+parseInt(e(516))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function x(){const n=["1446530MPZgmL","1373085QqzHoi","console","push","35uUGWlh","stateObject","table","exception","toString","91744faPXqH","position","info","sin","length","prototype","value","20296116XmWQLh","geometry","color","16DkPqYo","log","TresBufferGeometry","uniforms","test","while (true) {}","model","537440UBhVYf","__proto__","debu","input","opacity","init","constructor","1769997TWxZdQ","Color","trace","glowColor",'{}.constructor("return this")( )',"DoubleSide","AdditiveBlending","6026844vLbvxc","string","xRayEffect","uTime","function *\\( *\\)","return (function() ","apply","action","error","warn","TresMesh","dispose","offsetY","TresMeshRef","counter","map","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","mergeGeometries","#84ccff"];return(x=function(){return n})()}!function(){z(this,(function(){const n=S,t=new RegExp(n(484)),e=new RegExp(n(496),"i"),o=C(n(471));t[n(463)](o+"chain")&&e[n(463)](o+n(469))?C():o("0")}))()}();const P=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[S(486)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();P(void 0,(function(){const n=S;let t;try{t=Function(n(485)+n(477)+");")()}catch(i){t=window}const e=t[n(502)]=t[n(502)]||{},o=[n(460),n(489),n(511),n(488),n(507),n(506),n(475)];for(let r=0;r<o[n(513)];r++){const t=P[n(472)][n(514)][n(497)](P),i=o[r],a=e[i]||t;t[n(467)]=P[n(497)](P),t.toString=a[n(508)][n(497)](a),e[i]=t}}))();const T=f({__name:_(482),props:{model:{},color:{default:_(499)},opacity:{default:1}},async setup(o){const i=_;let r,a;const s=o,f=p(),w=[];s[i(465)].traverse((t=>{const e=i;t instanceof n&&(t[e(517)].verticesNeedUpdate=!0,w[e(503)](t[e(517)]))}));const z=([r,a]=m((()=>c({map:"./plugins/medical/image/brainXRayLight.png"}))),r=await r,a(),r),x={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(t[i(474)])(s[i(518)])},lightningTexture:{type:"t",value:z[i(495)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:s[i(470)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:t[i(478)],blending:t[i(479)],depthWrite:!1};x[i(462)][i(492)][i(515)]=Math[i(512)](5);const{camera:P}=l(),{onLoop:T}=u();return T((({delta:n})=>{const t=i;P[t(515)][t(510)]&&f[t(515)]&&(x[t(462)][t(483)].value+=n)})),b((()=>{const n=i;f[n(515)]&&(f[n(515)][n(517)][n(491)](),f[n(515)][n(517)]=e[n(498)](w)),s[n(518)]&&(x[n(462)][n(476)].value=new(t[n(474)])(s.color)),s[n(470)]&&(x.uniforms.uOpacity[n(515)]=s[n(470)])})),(n,t)=>{const e=i;return g(),v(e(490),{ref_key:e(493),ref:f},[t[0]||(t[0]=y(e(461),null,null,-1)),y("TresShaderMaterial",d(h(x)),null,16)],512)}}});function S(n,t){const e=x();return(S=function(n,t){return e[n-=460]})(n,t)}function C(n){function t(n){const e=S;if(typeof n===e(481))return function(n){}[e(472)](e(464))[e(486)](e(494));1!==(""+n/n)[e(513)]||n%20==0?function(){return!0}[e(472)](e(468)+"gger").call(e(487)):function(){return!1}[e(472)](e(468)+"gger")[e(486)](e(505)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const I=B;!function(n,t){const e=B,o=F();for(;;)try{if(932697===-parseInt(e(488))/1+parseInt(e(484))/2*(-parseInt(e(442))/3)+parseInt(e(479))/4*(-parseInt(e(500))/5)+-parseInt(e(512))/6+parseInt(e(439))/7*(-parseInt(e(450))/8)+-parseInt(e(516))/9*(-parseInt(e(502))/10)+parseInt(e(506))/11)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[B(501)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){M(this,(function(){const n=B,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(451),"i"),o=j(n(445));t.test(o+n(493))&&e.test(o+n(482))?j():o("0")}))()}();const U=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[B(501)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function F(){const n=["push","info","warn","bridge","523016BjAuDP","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","randFloat","uniforms","__proto__","opacity","TresPoints","cerebellum","console","Color","episodic","brainstem","Mesh","array","log","size","return (function() ","model","prototype","position","TresShaderMaterial","material","bind","trace","color","value","while (true) {}","name","aDelayDuration","2397796iATlbt","call","geometry","input",'{}.constructor("return this")( )',"322044jYzilD","randInt","afective","TresMeshRef","1237491XIhdbd","glowColor","uSlowTime","computeBoundingSphere","uOpacity","chain","constructor","length","exception","debu","BufferGeometryRef","includes","5PeDyUq","apply","394010fZOpFe","attributes","Float32BufferAttribute","error","42547714tnvyFA","counter","DoubleSide","gger","MathUtils","map","2477586DdhLKb","setAttribute","process","toString","279seszmU","49kseUZY","#FFF","action","27cJdlra","bubblesEffect","semantic","init"];return(F=function(){return n})()}function B(n,t){const e=F();return(B=function(n,t){return e[n-=439]})(n,t)}U(void 0,(function(){const n=B,t=function(){const n=B;let t;try{t=Function(n(466)+n(483)+");")()}catch(e){t=window}return t}(),e=t[n(458)]=t[n(458)]||{},o=[n(464),n(448),n(447),n(505),n(496),"table",n(473)];for(let i=0;i<o[n(495)];i++){const t=U[n(494)][n(468)][n(472)](U),r=o[i],a=e[r]||t;t[n(454)]=U.bind(U),t[n(515)]=a.toString[n(472)](a),e[r]=t}}))();const D=f({__name:I(443),props:{model:{},color:{default:I(440)},opacity:{default:1}},setup(n){const e=I,l=n,c=[e(486),e(444),e(460),e(514),"amigdala",e(461),e(449),e(457),"analitic"],f={};l[e(467)].traverse((n=>{const i=e;n instanceof t[i(462)]&&c[i(511)]((t=>{const e=i;if(n[e(477)][e(499)](t)){if(f[t]){const i=[f[t],n[e(481)]];return f[t]=o(i),f}return f[t]=n.geometry}return[]}))}));const m=p(),_=new i({uniforms:{glowColor:{type:"c",value:new(t[e(459)])(l[e(474)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:l.opacity}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:r,side:t[e(508)],depthTest:!1,vertexColors:!1,transparent:!0});b((()=>{m[e(475)]&&(()=>{const n=e,o=[],i=[],r=[],a=[];for(let e=0;e<2e4-3*c[n(495)];e+=1){const s=t[n(510)][n(485)](0,c.length-1),l=c[s],u=f[l][n(503)][n(469)][n(463)][3*e+0]||0,p=f[l][n(503)][n(469)][n(463)][3*e+1]||0,m=f[l][n(503)][n(469)][n(463)][3*e+2]||0;if(i[n(446)](u,p,m),o[e]=t[n(510)][n(452)](10,20),e%100==0){const e=t[n(510)][n(485)](100,250)+p;a.push(u,e,m,1)}else a[n(446)](u,p,m,0);r[2*e+0]=t[n(510)][n(452)](.5,1.5),r[2*e+1]=2.5}m[n(475)][n(513)](n(478),new s(r,2)),m.value[n(513)]("bubbles",new(t[n(504)])(a,4)),m[n(475)].setAttribute(n(469),new(t[n(504)])(i,3)),m[n(475)].setAttribute(n(474),new(t[n(504)])([],3)),m[n(475)][n(513)](n(465),new s(o,1)),m.value[n(491)]()})()}));const z=p(),{onLoop:x}=u();return x((({delta:n})=>{const t=e;z[t(475)]&&(z[t(475)][t(471)][t(453)].uTime.value+=.05,z[t(475)][t(471)][t(453)][t(490)][t(475)]+=1/400),l[t(474)]&&(_[t(453)][t(489)][t(475)]=new a(l[t(474)])),l[t(455)]&&(_[t(453)][t(492)][t(475)]=l[t(455)])})),(n,t)=>{const o=e;return g(),v(o(456),{ref_key:o(487),ref:z},[y("TresBufferGeometry",{ref_key:o(498),ref:m},null,512),y(o(470),d(h(w(_))),null,16)],512)}}});function j(n){function t(n){const e=B;if("string"==typeof n)return function(n){}[e(494)](e(476)).apply(e(507));1!==(""+n/n)[e(495)]||n%20==0?function(){return!0}[e(494)](e(497)+e(509))[e(480)](e(441)):function(){return!1}.constructor(e(497)+e(509))[e(501)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{T as _,D as a};

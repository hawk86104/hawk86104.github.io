import{_ as t,C as e}from"./three.ewwqFbMB1726139596986.js";import{U as n,J as r,Y as s,L as a}from"./@tresjs.ml1V726H1726139596986.js";import{a as o}from"./index.BN5GHgZp1726139596986.js";import"./index.mYRyS9ed1726139596986.js";import{C as i}from"./three-custom-shader-material.UXiDE7Tt1726139596986.js";import"./object-hash.FoPRLmFN1726139596986.js";import"./@amap.Fadeb9eG1726139596986.js";import"./glsl-tokenizer.AMiuccS21726139596986.js";import{p as l}from"./gl-noise.BrVtymbx1726139596986.js";import{d as u,b as c,a3 as p,w as f,o as g,E as h,L as m,j as v,u as d,r as _,f as b,g as w,aj as M,ak as y,m as j,al as x}from"./@vue.JNsx1iN61726139596986.js";import{P as S}from"./tweakpane.yHWGBmom1726139596986.js";import{_ as C}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.FKFkxAmE1726139596986.js";import"./@vueuse.leIfNolX1726139596986.js";import"./three-stdlib.XegO5T8a1726139596986.js";import"./@pmndrs.i3ABMTfO1726139596986.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.gpQJLdF01726139596986.js";import"./all.three.OAsZWQFw1726139596986.js";import"./oimophysics.x0jH7fze1726139596986.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang._1nP8CbO1726139596986.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.c-SWEGDV1726139596986.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.mc6Ijmec1726139596986.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.vEvF-rlt1726139596986.js";import"./glsl-token-string.sQYJMTSX1726139596986.js";import"./glsl-token-functions.JTK3IqoC1726139596986.js";import"./jszip.fP2cdsII1726139596986.js";const I=T;function z(){const t=["material","TresMesh","stateObject","baseMaterial","__proto__","convertLinearToSRGB","1290OvNuVf","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","dispose","debu","Color","5992064YVgExb",'{}.constructor("return this")( )',"table","init","exception","waterHighlight","#b3ffff","fragment","brightness","args","waterColor","test","MeshPhysicalMaterial","vertexShader","length","constructor","bind","1124672KJbtTW","580300eMfQRB","height","fragmentShader","gger","apply","uHeight","tmRef","while (true) {}","rotation-x","return (function() ","Flatshading","customWaterMesh","flatShading","function *\\( *\\)","input","2712276cteSSX","warn","chain","action","log","36LfXzFr","toString","value","2372262ZmIljo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","TresBoxGeometry","31449231eTgBsQ","DoubleSide","string","21749HZDnRU"];return(z=function(){return t})()}function T(t,e){const n=z();return(T=function(t,e){return n[t-=338]})(t,e)}!function(t,e){const n=T,r=z();for(;;)try{if(840766===-parseInt(n(397))/1+-parseInt(n(353))/2+parseInt(n(361))/3+-parseInt(n(358))/4*(parseInt(n(338))/5)+parseInt(n(375))/6*(-parseInt(n(368))/7)+parseInt(n(380))/8+parseInt(n(365))/9)break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(342)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){B(this,(function(){const t=T,e=new RegExp(t(351)),n=new RegExp(t(362),"i"),r=O(t(383));e[t(391)](r+t(355))&&n.test(r+t(352))?O():r("0")}))()}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[T(342)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();W(void 0,(function(){const t=T,e=function(){const t=T;let e;try{e=Function(t(347)+t(381)+");")()}catch(n){e=window}return e}(),n=e.console=e.console||{},r=[t(357),t(354),"info","error",t(384),t(382),t(363)];for(let s=0;s<r[t(394)];s++){const e=W[t(395)].prototype[t(396)](W),a=r[s],o=n[a]||e;e[t(373)]=W.bind(W),e[t(359)]=o[t(359)].bind(o),n[a]=e}}))();const G=[I(346)],H=[I(389)],N=u({__name:I(349),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:I(386)},brightness:{default:1},baseMaterial:{default:t[I(392)]}},setup(s){const a=I,o=s,u=c(null),_={vertex:a(376),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},b={uTime:{value:0},waterColor:{value:new e(o[a(390)])[a(374)]()},waterHighlight:{value:new e(o[a(385)])[a(374)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o.brightness},uHeight:{value:o[a(339)]}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=a;b.uTime[e(360)]=-t/5})),p((()=>{const e=a;o.height&&(b[e(343)][e(360)]=o[e(339)]),o[e(390)]&&(b.waterColor[e(360)]=new(t[e(379)])(o[e(390)])[e(374)]()),o[e(385)]&&(b[e(385)][e(360)]=new(t[e(379)])(o[e(385)])[e(374)]()),o[e(388)]&&(b.brightness.value=o[e(388)])})),f((()=>o.Flatshading),(t=>{u[a(360)].material.needsUpdate=!0})),f((()=>o[a(372)]),(e=>{const n=a,r=new i({baseMaterial:t[e],vertexShader:l(_.vertex),fragmentShader:_[n(387)],uniforms:b,flatShading:o[n(348)],side:t[n(366)],roughness:.2,metalness:.1,silent:!0});u[n(360)][n(369)][n(377)](),u.value[n(369)]=r})),(e,n)=>{const s=a;return g(),h(s(370),{ref_key:s(344),ref:u,"rotation-x":-Math.PI/2},[m(s(364),{args:[5,5,e[s(339)],64,64,1]},null,8,H),v(d(r),{baseMaterial:t[s(392)],vertexShader:d(l)(_.vertex),fragmentShader:_[s(387)],uniforms:b,side:t[s(366)],roughness:.2,metalness:.1,flatShading:e[s(348)],silent:""},null,8,["baseMaterial",s(393),s(340),"side",s(350)])],8,G)}}});function O(t){function e(t){const n=T;if(typeof t===n(367))return function(t){}[n(395)](n(345))[n(342)]("counter");1!==(""+t/t)[n(394)]||t%20==0?function(){return!0}.constructor("debu"+n(341)).call(n(356)):function(){return!1}.constructor(n(378)+n(341))[n(342)](n(371)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const F=E;!function(t,e){const n=E,r=D();for(;;)try{if(569195===parseInt(n(138))/1*(-parseInt(n(174))/2)+parseInt(n(132))/3*(parseInt(n(123))/4)+parseInt(n(141))/5*(parseInt(n(155))/6)+-parseInt(n(140))/7*(parseInt(n(158))/8)+-parseInt(n(156))/9*(-parseInt(n(168))/10)+parseInt(n(154))/11*(parseInt(n(175))/12)+parseInt(n(129))/13*(parseInt(n(126))/14))break;r.push(r.shift())}catch(s){r.push(r.shift())}}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(121)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function D(){const t=["constructor","waterColor","pos-y.jpg","info","input","MeshLambertMaterial","debu","#627179","neg-y.jpg","pos-z.jpg","trace","6297368HGrPfv","1114098ICQyLU","9bYpSBf","MeshStandardMaterial","64912irwoLn","baseMaterial","gger","#b3ffff","length","console","counter","error","value","height","4898630WuIoVc","string","change","return (function() ","function *\\( *\\)","MeshBasicMaterial","226AJSbyf","12WEcEsu","MeshNormalMaterial","brightness","水体颜色","MeshPhongMaterial","ACESFilmicToneMapping","TresPerspectiveCamera","waterHighlight","MeshPhysicalMaterial","MeshDepthMaterial","Flatshading","apply","customWater","4228yXYwdW","TresDirectionalLight","toString","267386xNMSvG","#52a7f7","target","364rAdWVL","addBinding","bind","285MNYYNS","action","MeshToonMaterial","table","stateObject","list","8389tNbuTR","warn","476bQdQmf","10mNBANJ","pos-x.jpg"];return(D=function(){return t})()}!function(){k(this,(function(){const t=E,e=new RegExp(t(172)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Q("init");e.test(r+"chain")&&n.test(r+t(147))?Q():r("0")}))()}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(121)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();P(void 0,(function(){const t=E,e=function(){const t=E;let e;try{e=Function(t(171)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(163)]=e[t(163)]||{},r=["log",t(139),t(146),t(165),"exception",t(135),t(153)];for(let s=0;s<r[t(162)];s++){const e=P[t(143)].prototype[t(131)](P),a=r[s],o=n[a]||e;e.__proto__=P.bind(P),e[t(125)]=o[t(125)][t(131)](o),n[a]=e}}))();const A=m(F(116),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),L=m("TresAmbientLight",{intensity:.5},null,-1),R=m(F(124),{position:[15,15,15],intensity:1},null,-1);function E(t,e){const n=D();return(E=function(t,e){return n[t-=115]})(t,e)}const Z=u({__name:F(122),setup(e){const n=F,r=_({alpha:!0,toneMapping:t[n(115)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(150),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(127),waterHighlight:n(161),brightness:1,baseMaterial:n(118)}),c=new S;return c[n(130)](u,n(167),{label:"高度",min:.1,max:5,step:.1}),c[n(130)](u,n(144),{label:n(178)}),c.addBinding(u,n(117),{label:"浪头颜色"}),c[n(130)](u,n(177),{label:"亮度",min:0,max:1,step:.01}),c[n(130)](u,n(120),{label:"Flatshading"}),c.addBlade({view:n(137),label:"材质",options:[{text:n(118),value:n(118)},{text:n(173),value:"MeshBasicMaterial"},{text:n(176),value:"MeshNormalMaterial"},{text:n(157),value:"MeshStandardMaterial"},{text:n(179),value:n(179)},{text:n(134),value:n(134)},{text:n(148),value:n(148)},{text:"MeshDepthMaterial",value:n(119)}],value:u[n(159)]}),c.on(n(170),(t=>{const e=n;"材质"===t[e(128)].label&&(u[e(159)]=t[e(166)])})),(t,e)=>{const c=n;return g(),b(d(a),j(r,{"window-size":""}),{default:w((()=>[A,v(d(s),M(y(i)),null,16),L,R,v(N,M(y(u)),null,16),v(d(C),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[v(d(o),{files:[c(142),"neg-x.jpg",c(145),c(151),c(152),"neg-z.jpg"],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function Q(t){function e(t){const n=E;if(typeof t===n(169))return function(t){}[n(143)]("while (true) {}")[n(121)](n(164));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(149)+"gger").call(n(133)):function(){return!1}[n(143)](n(149)+n(160))[n(121)](n(136)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Z as default};

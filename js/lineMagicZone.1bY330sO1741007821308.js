import{P as t}from"./tweakpane.yDiyAAkA1741007821308.js";import{e,h as n,a as o,o as r}from"./@tresjs.u6hJLBm41741007821308.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.O0pogg8d1741007821308.js";import{_ as a,B as s,C as l,aX as u}from"./three.sBrYSCgq1741007821308.js";import{d as c,a6 as f,a3 as m,w as p,o as d,H as h,N as g,u as v,j as I,r as x,e as w,f as S,g as b,al as y,m as _}from"./@vue.NRI7TcgI1741007821308.js";import"./postprocessing.rsQjznIU1741007821308.js";import"./@vueuse.jd1Cg91M1741007821308.js";import"./all.three.VR_q9_2T1741007821308.js";import"./oimophysics.x0jH7fze1741007821308.js";const T=j;!function(t,e){const n=j,o=z();for(;;)try{if(609342===-parseInt(n(226))/1+-parseInt(n(232))/2+-parseInt(n(238))/3*(parseInt(n(223))/4)+parseInt(n(194))/5+-parseInt(n(200))/6+parseInt(n(218))/7*(parseInt(n(235))/8)+parseInt(n(219))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[j(233)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=j,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(236),"i"),o=A(t(186));e[t(205)](o+t(185))&&n.test(o+t(234))?A():o("0")}))()}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[j(233)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();U(void 0,(function(){const t=j,e=function(){const t=j;let e;try{e=Function("return (function() "+t(222)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(198)]||{},o=["log",t(214),t(240),"error",t(217),t(202),t(241)];for(let r=0;r<o[t(192)];r++){const e=U[t(195)].prototype[t(237)](U),i=o[r],a=n[i]||e;e[t(189)]=U[t(237)](U),e[t(224)]=a[t(224)].bind(a),n[i]=e}}))();const P=["rotateX"],C=["position","aIndex","aNormal"];function z(){const t=["trace","chain","init","TresPoints","uScale","__proto__","debu","scale","length","PointsMaterial","5428445AZgAfB","constructor","position","baseMaterial","console","lineMagicZone","6439020HuqBmb","alphaMap","table","uTime","height","test","map","#90ee90","action","floor","uHeight","color","EllipseCurve","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","warn","value","gger","exception","7OpVVVz","14278383BvdSWI","getPoints","set",'{}.constructor("return this")( )',"12844wWzgGf","toString","while (true) {}","636141tprkap","string","yRadius","speed","push","array","742464zopkHM","apply","input","629744Ubvvbs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","57sirlVi","getAttribute","info"];return(z=function(){return t})()}function j(t,e){const n=z();return(j=function(t,e){return n[t-=185]})(t,e)}const M=T(213),W=c({__name:T(199),props:{height:{default:1.6},speed:{default:1},color:{default:T(207)}},async setup(t){const r=T;let i,c;const x=f(),w=t,S=([i,c]=m((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,c(),i),b=new(a[r(212)])(0,0,8,8,0,2*Math.PI,!1,0),y=[];for(let e=0;e<5;e++)y[r(230)](...b[r(220)](719)),b.xRadius+=.2,b[r(228)]+=.2;const _=new Float32Array(y[r(206)](((t,e)=>e))),N=(new s).setFromPoints(y)[r(239)](r(196))[r(231)],U=new Float32Array(N[r(192)]);for(let e=0;e<N[r(192)]/3;e++){const t=3*e;N[t+1]+=.15*Math[r(209)](e/720);const n=e%720*3,o=3*(e%720+2880);U[t]=N[o]-N[n],U[t+1]=N[o+1]-N[n+1],U[t+2]=N[o+2]-N[n+2]}const z={uTime:{value:0},uScale:{value:x[r(191)]?x[r(191)]:1},uHeight:{value:w[r(204)]},uPerlinTexture:{value:S[1]},baseColor:{value:new l(w[r(211)])}},{onLoop:j}=e();return j((()=>{const t=r;z[t(203)][t(215)]+=.01*w[t(229)]})),p((()=>[w[r(211)],x[r(191)],w[r(204)]]),(([t,e,n])=>{const o=r;z.baseColor[o(215)][o(221)](t),z[o(188)].value=e,z[o(210)][o(215)]=n})),(t,e)=>{const o=r;return d(),h("TresGroup",null,[g(o(187),{rotateX:-Math.PI/2,scale:.1},[g("TresBufferGeometry",{position:[v(N),3],aIndex:[v(_),1],aNormal:[v(U),3]},null,8,C),I(v(n),{baseMaterial:a[o(193)],vertexShader:"\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n",fragmentShader:M,uniforms:z,map:v(S)[0],alphaMap:v(S)[0],transparent:"",depthWrite:!1,blending:u,color:"#409eff",size:.1},null,8,[o(197),o(206),o(201),"blending"])],8,P)])}}});function A(t){function e(t){const n=j;if(typeof t===n(227))return function(t){}.constructor(n(225))[n(233)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(195)](n(190)+n(216)).call(n(208)):function(){return!1}[n(195)](n(190)+"gger")[n(233)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const O=D;function D(t,e){const n=H();return(D=function(t,e){return n[t-=355]})(t,e)}!function(t,e){const n=D,o=H();for(;;)try{if(933012===parseInt(n(391))/1+-parseInt(n(395))/2*(-parseInt(n(365))/3)+parseInt(n(390))/4*(parseInt(n(387))/5)+parseInt(n(392))/6+-parseInt(n(373))/7+parseInt(n(380))/8*(parseInt(n(363))/9)+-parseInt(n(367))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[D(376)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=D,e=new RegExp(t(381)),n=new RegExp(t(375),"i"),o=F(t(357));e.test(o+"chain")&&n[t(382)](o+t(362))?F():o("0")}))()}();const R=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[D(376)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function H(){const t=["5kxaeSn","trace","error","5082504zJJygI","1786762YidHeo","10643352imKiPh","height","scale","1764122cFFswT","toString",'{}.constructor("return this")( )',"color","prototype","console","speed","__proto__","init","TresAmbientLight","bind","constructor","gger","input","4081473rmAINc","call","6AENECK","length","44912370YqJQlg","log","TresCanvas","table","return (function() ","lineMagicZone","11372550tgedEF","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","addBinding","#ff0000","stateObject","8OKKhYz","function *\\( *\\)","test","exception","debu","counter","action"];return(H=function(){return t})()}R(void 0,(function(){const t=D,e=function(){const t=D;let e;try{e=Function(t(371)+t(397)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(400)]||{},o=[t(368),"warn",t(374),t(389),t(383),t(370),t(388)];for(let r=0;r<o[t(366)];r++){const e=R.constructor[t(399)].bind(R),i=o[r],a=n[i]||e;e[t(356)]=R[t(359)](R),e[t(396)]=a[t(396)][t(359)](a),n[i]=e}}))();const B=c({__name:O(372),setup(e){const n=O,o=x({reflectivity:.1,showGridHelper:!0,scale:1}),a=x({color:n(378),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(377)](a,n(398),{label:"颜色"}),s[n(377)](a,n(394),{label:"大小",min:.1,max:3,step:.1}),s[n(377)](a,n(393),{label:"高度",min:.1,max:3,step:.1}),s.addBinding(a,n(355),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=w(s(369));return d(),S(l,{clearColor:"#201919","window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:b((()=>[e[0]||(e[0]=g("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),I(v(r),{enableDamping:""}),e[1]||(e[1]=g(s(358),{intensity:2},null,-1)),(d(),S(y,null,{default:b((()=>[I(W,_({position:[3,0,0]},a),null,16)])),_:1})),(d(),S(y,null,{default:b((()=>[I(W,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(d(),S(y,null,{default:b((()=>[I(i,_({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function F(t){function e(t){const n=D;if("string"==typeof t)return function(t){}[n(360)]("while (true) {}")[n(376)](n(385));1!==(""+t/t).length||t%20==0?function(){return!0}[n(360)](n(384)+n(361))[n(364)](n(386)):function(){return!1}.constructor(n(384)+n(361)).apply(n(379)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{B as default};

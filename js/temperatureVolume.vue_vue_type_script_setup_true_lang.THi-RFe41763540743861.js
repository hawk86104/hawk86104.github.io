import{u as e}from"./colorList.DbCLsRg71763540743861.js";import{r as a,a as t}from"./rawData.lQ4T1IdU1763540743861.js";import{P as l}from"./tweakpane.CqZAnw7f1763540743861.js";import{u as s}from"./rawData.Bm5IktqG1763540743861.js";import{g as r}from"./utils.DaFRRlKp1763540743861.js";import{d as n,a as i,c as o,w as u,H as d,o as m,J as p,I as v,ac as x,ao as c,u as b}from"./@vue.Co_gxueH1763540743861.js";import{bL as f,be as h,af as g,b1 as T,aE as w,aG as y,r as B,bK as j,ae as k}from"./three.rXKzP9fQ1763540743861.js";const E={position:[.2,.9,1.2]},S=["scale","visible"],F=["object"],z=n({__name:"temperatureVolume",setup(n){const z=s(),A=e(),G=new f(new h(new g(1,1,1)),new T({color:10066329})),R=i(7.2),_=i(z.yExtent/z.xExtent*11.6),C=i(z.zExtent/z.xExtent*6.5),D=o(()=>!(R.value<=.01&&R.value>=-.01)&&(!(_.value<=.01&&_.value>=-.01)&&!(C.value<=.01&&C.value>=-.01))),I=new w(z.byteArray,z.xExtent,z.yExtent,z.zExtent);I.format=y,I.type=z.getThreeType(),I.minFilter=B,I.magFilter=B,I.wrapS=j,I.wrapT=j,I.wrapR=j,I.needsUpdate=!0;const L={uniforms:{dataTexture:{value:I},colorTexture:{value:A.updateTransferFunction()},samplingRate:{value:1},threshold:{value:.5},alphaScale:{value:.68},invertColor:{value:!1},composeType:{value:1}},vertexShader:t,fragmentShader:a,side:k,transparent:!0,depthWrite:!0,depthTest:!0},M=i(!1),H=new l;return H.hidden=!0,H.addBinding(R,"value",{label:"x轴缩放",min:-2,max:20,step:.01}),H.addBinding(_,"value",{label:"y轴缩放",min:-2,max:20,step:.01}),H.addBinding(C,"value",{label:"z轴缩放",min:-2,max:20,step:.01}),H.addBlade({view:"list",label:"模式",options:[{text:"maximumIntensity",value:1},{text:"thresholding",value:2},{text:"emissionAbsorption",value:3}],value:L.uniforms.composeType.value}).on("change",e=>{L.uniforms.composeType.value=e.value}),H.addBinding(L.uniforms.samplingRate,"value",{label:"体积采样率",min:0,max:4,step:.01}),H.addBinding(L.uniforms.threshold,"value",{label:"体绘制的阈值",min:0,max:1,step:.01}),H.addBinding(L.uniforms.alphaScale,"value",{label:"透明度",min:0,max:1,step:.01}),H.addBinding(L.uniforms.invertColor,"value",{label:"是否反色"}),H.addBinding(M,"value",{label:"显示边框"}),H.addBlade({view:"separator"}),H.addButton({title:"清空体数据"}).on("click",()=>{z.byteArray=null,H.dispose()}),H.addButton({title:"下载体数据"}).on("click",()=>{r(z)}),u(()=>A.colorsStops,()=>{L.uniforms.colorTexture.value=A.updateTransferFunction()},{deep:!0,immediate:!0}),(e,a)=>(m(),d("TresGroup",E,[p("TresMesh",{scale:[R.value,_.value,C.value],visible:D.value},[a[0]||(a[0]=p("TresBoxGeometry",{args:[1,1,1]},null,-1)),p("TresShaderMaterial",x(c(L)),null,16),M.value?(m(),d("primitive",{key:0,object:b(G)},null,8,F)):v("",!0)],8,S)]))}});export{z as _};

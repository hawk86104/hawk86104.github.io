import{P as e}from"./tweakpane.CqZAnw7f1766395561759.js";import{F as a,n as o,N as s,K as t}from"./@tresjs.BAA1xUmy1766395561759.js";import"./OimoPhysicsBuffer.CeBBkx9n1766395561759.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.CLUrC8uK1766395561759.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.BYqEDbJP1766395561759.js";import"./Resource.BvxQFOEE1766395561759.js";import"./three-custom-shader-material.CeYMC0bX1766395561759.js";import"./PackedMipMapGenerator.BosiWbnG1766395561759.js";import{aE as i,o as n,V as l,E as p,dx as m,dy as d}from"./three.F31Lz30M1766395561759.js";import{g as c}from"./gsap.CY1N3EIL1766395561759.js";import{d as f,w as u,G as g,o as h,H as v,u as y,r as j,g as _,b as M,e as b,I as x,h as w,ah as C,m as I}from"./@vue.BxPWGdWw1766395561759.js";import"./three.quarks.Doo07ASV1766395561759.js";import"./postprocessing.DuhH-bFK1766395561759.js";import"./@vueuse.KwrREqpH1766395561759.js";import"./oimophysics.CfVKSiAm1766395561759.js";import"./dither.glsl.tNAdkJUa1766395561759.js";import"./Reflector.D55OIsUs1766395561759.js";import"./vite-plugin-qiankun.B06WoCqG1766395561759.js";import"./utils.CNife3_q1766395561759.js";import"./object-hash.Dv6AILmT1766395561759.js";import"./@amap.fjyZdsU91766395561759.js";import"./jszip.Zzi2WZWj1766395561759.js";import"./three-stdlib.CkaNLsGO1766395561759.js";import"./quarks.core.C3xH0YPO1766395561759.js";const P=["object"],R=f({__name:"hexagonalFloor",props:{floorColor:{default:"#ff0000"},floorMetalness:{default:.8},floorRoughness:{default:.2},floorEnvMapIntensity:{default:2.5},sideColor:{default:"#ffffff"},sideOpacity:{default:.9},speed:{default:.3}},setup(e){const{renderer:t,scene:r}=a(),f=e,{state:j}=o("./plugins/floor/image/concrete_wet_floor_basecolor.jpg");u(j,e=>{e&&(e.wrapS=i,e.wrapT=i,e.repeat.set(10,10))});const{state:_}=s("https://opensource.cdn.icegl.cn/model/floor/baseModelI.glb",{draco:!0,decoderPath:"./draco/"}),M=[],b=c.timeline();u(()=>_.value,e=>{if(!e.scene)return;e.scene.traverse(e=>{if(e instanceof n){const a=e.position.clone(),o=e.rotation.clone(),s=Math.random()-.5,t=new l(a.x,a.y+s,a.z),r=Math.PI/12,i=new p(o.x+(Math.random()-.5)*r,o.y+(Math.random()-.5)*r,o.z);M.push({mesh:e,originalPosition:a,scatteredPosition:t,originalRotation:o,scatteredRotation:i}),e.name.includes("_")?(e.material.emissiveIntensity=2,e.material.metalness=1,e.material.roughness=0,e.material.transparent=!0):e.material.map=j.value,e.material.needsUpdate=!0}}),M.forEach(({mesh:e,scatteredPosition:a,scatteredRotation:o},s)=>{b.to(e.position,{x:a.x,y:a.y,z:a.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0),b.to(e.rotation,{x:o.x,y:o.y,z:o.z,ease:"power1.inOut",repeat:-1,yoyo:!0},0)}),x()});const x=()=>{const e=new m(t),a=new d,o=e.fromScene(a).texture;r.value.environment=o,_.value.scene.traverse(e=>{e instanceof n&&e.material&&(e.material.envMap=o,e.material.needsUpdate=!0)}),a.dispose(),w(f.sideColor,f.floorColor,f.sideOpacity,f.floorMetalness,f.floorRoughness,f.floorEnvMapIntensity)},w=(e,a,o,s,t,r)=>{_.value?.scene&&_.value.scene.traverse(i=>{i instanceof n&&i.material&&(i.name.includes("_")?(i.material.emissive.set(e),i.material.opacity=o):(i.material.color.set(a),i.material.metalness=s,i.material.roughness=t,i.material.envMapIntensity=r))})};return u(()=>[f.sideColor,f.floorColor,f.sideOpacity,f.floorMetalness,f.floorRoughness,f.floorEnvMapIntensity],([e,a,o,s,t,r])=>{w(e,a,o,s,t,r)}),u(()=>[f.speed],([e])=>{b.timeScale(e)},{immediate:!0}),(e,a)=>(h(),g("TresGroup",null,[y(_)?(h(),g("primitive",{key:0,object:y(_)?.scene,position:[0,-.1,0]},null,8,P)):v("",!0)]))}}),z=f({__name:"hexagonalFloorPage",setup(a){const o=j({floorColor:"#ff0000",floorMetalness:.8,floorRoughness:.2,floorEnvMapIntensity:2.5,sideColor:"#000000",sideOpacity:.56,speed:.1}),s=new e({expanded:!0});return s.addBinding(o,"floorColor",{label:"地板颜色"}),s.addBinding(o,"floorMetalness",{label:"地板金属度",min:0,max:1}),s.addBinding(o,"floorRoughness",{label:"地板粗糙度",min:0,max:1}),s.addBinding(o,"floorEnvMapIntensity",{label:"地板环境光强度",min:0,max:10}),s.addBinding(o,"sideColor",{label:"侧面颜色"}),s.addBinding(o,"sideOpacity",{label:"侧面透明度",min:0,max:1}),s.addBinding(o,"speed",{label:"动画速度",min:0,max:1,step:.01}),(e,a)=>{const s=_("TresCanvas");return h(),M(s,{clearColor:"#000000","window-size":""},{default:b(()=>[a[0]||(a[0]=x("TresPerspectiveCamera",{position:[6,6,0],fov:45,near:.1,far:1e4},null,-1)),w(y(t),{enableDamping:""}),(h(),M(C,null,{default:b(()=>[w(y(R),I(o,{scale:2,position:[0,.5,0]}),null,16)]),_:1})),w(r,{reflectivity:1,showGridHelper:!1,scale:2})]),_:1})}}});export{z as default};

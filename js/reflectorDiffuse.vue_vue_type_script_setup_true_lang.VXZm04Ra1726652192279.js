import{b$ as t,a3 as n,C as e,k as r}from"./three.3esZ7Hzr1726652192279.js";import{z as o}from"./@tresjs.UGbbWZf51726652192279.js";import{R as c}from"./all.three.Z5c_QtDp1726652192279.js";import{d as i,b as a,a4 as s,a3 as u,o as f,E as l,L as p,m,u as d}from"./@vue.JNsx1iN61726652192279.js";function g(t,n){const e=x();return(g=function(t,n){return e[t-=319]})(t,n)}!function(t,n){const e=g,r=x();for(;;)try{if(374806===-parseInt(e(362))/1+-parseInt(e(328))/2+-parseInt(e(346))/3+-parseInt(e(336))/4+parseInt(e(334))/5*(parseInt(e(349))/6)+parseInt(e(359))/7*(-parseInt(e(353))/8)+parseInt(e(361))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(329)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(326),"i"),r=y(t(331));n[t(344)](r+t(320))&&e[t(344)](r+t(339))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(329)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(){const t=["warn","input","prototype","exception","stateObject","#include <project_vertex>","test","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","2024895aBGeeR","bind","string","18822LpEdyA","vertexShader","call","counter","32sLTZuX","trace","length","fragmentShader","log","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","897421eJXhnL","gger","17399898ngZuSa","164773myKmwt","table",'{}.constructor("return this")( )',"chain","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","error","action","void main() {","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","replace","937282qxuQHx","apply","debu","init","return (function() ","console","935yCglXC","#include <emissivemap_fragment>","1295776WcmwYv","toString"];return(x=function(){return t})()}h(void 0,(function(){const t=g;let n;try{n=Function(t(332)+t(319)+");")()}catch(o){n=window}const e=n[t(333)]=n.console||{},r=[t(357),t(338),"info",t(322),t(341),t(363),t(354)];for(let c=0;c<r[t(355)];c++){const n=h[t(325)][t(340)][t(347)](h),o=r[c],i=e[o]||n;n.__proto__=h[t(347)](h),n.toString=i[t(337)][t(347)](i),e[o]=n}}))();function y(t){function n(t){const e=g;if(typeof t===e(348))return function(t){}[e(325)]("while (true) {}").apply(e(352));1!==(""+t/t)[e(355)]||t%20==0?function(){return!0}.constructor(e(330)+"gger")[e(351)](e(323)):function(){return!1}.constructor(e(330)+e(360))[e(329)](e(342)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=S;!function(t,n){const e=S,r=C();for(;;)try{if(328940===parseInt(e(411))/1+parseInt(e(427))/2+parseInt(e(392))/3+parseInt(e(410))/4*(-parseInt(e(408))/5)+-parseInt(e(420))/6*(-parseInt(e(416))/7)+parseInt(e(385))/8+-parseInt(e(394))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(384)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=S,n=new RegExp(t(406)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(432));n.test(r+"chain")&&e[t(412)](r+t(424))?E():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(384)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(){const t=["bind","onBeforeCompile","mirror","__proto__","toString","repeat","constructor","apply","4561016awCBtq","call","onBeforeRender","#444","showGridHelper","update","value","766974NSDEHg","wrapS","6750522yfVhql","log","rotation-x","object","string","warn","channel","info","textureMatrix","table","assign","reflectMap","function *\\( *\\)","TresMeshStandardMaterial","505030mmdkJf","uv1","16VrIaCr","492825rOQpdg","test","gger","TresMesh","wrapT","14dcsJKx","console","textureMatrixUniform","error","444246fPHkua","tmsmRef","mixStrength","renderTargetUniform","input","counter","#ffffff","32660ppULbB","uniforms","while (true) {}",'{}.constructor("return this")( )',"debu","init","attributes","color","length","tpgRef","tmRef"];return(C=function(){return t})()}w(void 0,(function(){const t=S,n=function(){const t=S;let n;try{n=Function("return (function() "+t(430)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(417)]||{},r=[t(395),t(399),t(401),t(419),"exception",t(403),"trace"];for(let o=0;o<r[t(435)];o++){const n=w[t(383)].prototype[t(438)](w),c=r[o],i=e[c]||n;n[t(380)]=w[t(438)](w),n[t(381)]=i[t(381)].bind(i),e[c]=n}}))();const I=[_(396)],M=[_(397),"visible"];function S(t,n){const e=C();return(S=function(t,n){return e[t-=380]})(t,n)}const j=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(426)}},async setup(i){const v=_;let h,x;const y=i,b=new t(9.5,10),w=a(),C=a(),S=a(),j=new c,E={mirror:{value:y[v(440)]},mixStrength:{value:y[v(422)]}},z=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var T=0;T<3;T++)z[T][v(393)]=n,z[T][v(415)]=n,z[T][v(382)].set(16,16);const R={color:new e(v(388)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},k=t=>{const n=v;t[n(428)][n(405)]=j[n(423)],t.uniforms[n(402)]=j[n(418)],t.uniforms=Object[n(404)](t[n(428)],E),(t=>{const n=g;t[n(350)]=t[n(350)][n(327)](n(324),n(345)),t.vertexShader=t[n(350)].replace(n(343),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=g;t[n(356)]=t[n(356)][n(327)](n(324),n(321)),t[n(356)]=t[n(356)][n(327)](n(335),n(358))})(t)};return u((()=>{const t=v;w[t(391)]&&(w[t(391)].attributes[t(409)]=w[t(391)][t(433)].uv),S[t(391)]&&(S[t(391)].aoMap[t(400)]=1,S.value[t(439)]=k),C.value&&(C[t(391)].add(j),C[t(391)][t(387)]=(n,e,r)=>{j[t(390)](n,e,r)}),y[t(434)]&&S[t(391)]&&(S.value[t(434)]=new e(y[t(434)]))})),(t,n)=>{const e=v;return f(),l("TresGroup",null,[p(e(414),{ref_key:e(437),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(436),ref:w,args:[10,10]},null,512),p(e(407),m({ref_key:e(421),ref:S},R),null,16)],8,I),p("primitive",{object:d(b),visible:t[e(389)]},null,8,M)])}}});function E(t){function n(t){const e=S;if(typeof t===e(398))return function(t){}[e(383)](e(429))[e(384)](e(425));1!==(""+t/t)[e(435)]||t%20==0?function(){return!0}[e(383)](e(431)+"gger")[e(386)]("action"):function(){return!1}.constructor("debu"+e(413))[e(384)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

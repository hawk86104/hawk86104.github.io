import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.t0sISogd1736251016080.js";import{B as i,V as s,cy as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.RuuDeeIf1736251016080.js";import{e as l,g as p,F as d}from"./@tresjs.8C7OKmBm1736251016080.js";import{a as m}from"./simplex-noise.jB2HxhHB1736251016080.js";import{d as g,a1 as f,o as y,D as b,u as v,r as x,j as S,g as w,m as _,F as I}from"./@vue.-Mz_IXfk1736251016080.js";import"./index.TsjidoKx1736251016080.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.oDFyrOPl1736251016080.js";import"./three-custom-shader-material.zkLsy8Lq1736251016080.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1736251016080.js";import"./@vueuse.HhUha1mw1736251016080.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.si_4UN4x1736251016080.js";import"./all.three.jnv7gLSV1736251016080.js";import"./oimophysics.x0jH7fze1736251016080.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.HE9bTtTP1736251016080.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.noQiUR2n1736251016080.js";import"./index.7xUuYu7h1736251016080.js";import"./three-stdlib.9SgBjS5j1736251016080.js";import"./@pmndrs.eJMj1neG1736251016080.js";import"./object-hash.m8vc-d4L1736251016080.js";import"./@amap.RhAVlD5U1736251016080.js";import"./jszip.BteQlHnJ1736251016080.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.sQjo7j-21736251016080.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.aHCDd7wl1736251016080.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.OJ_B_yMv1736251016080.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.lh0YCrjD1736251016080.js";const M=R;!function(t,i){const s=R,n=C();for(;;)try{if(615680===parseInt(s(318))/1+parseInt(s(307))/2*(-parseInt(s(361))/3)+parseInt(s(203))/4*(parseInt(s(250))/5)+-parseInt(s(362))/6+-parseInt(s(239))/7*(parseInt(s(238))/8)+-parseInt(s(271))/9+-parseInt(s(338))/10*(-parseInt(s(265))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(220)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(t,i){const s=C();return(R=function(t,i){return s[t-=194]})(t,i)}!function(){T(this,(function(){const t=R,i=new RegExp(t(357)),s=new RegExp(t(202),"i"),n=A("init");i[t(283)](n+t(248))&&s[t(283)](n+t(224))?A():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(220)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=R,i=function(){const t=R;let i;try{i=Function(t(237)+t(279)+");")()}catch(s){i=window}return i}(),s=i[t(295)]=i[t(295)]||{},n=[t(330),t(278),t(194),t(347),t(341),"table",t(326)];for(let e=0;e<n[t(298)];e++){const i=j[t(234)][t(223)][t(209)](j),r=n[e],o=s[r]||i;i[t(322)]=j[t(209)](j),i.toString=o[t(264)][t(209)](o),s[r]=i}}))();class F extends i{constructor(t={}){const i=R;super(),this[i(311)]=!0,this[i(324)]=i(243),this.init(F[i(288)](t,t)),this[i(262)]()}static[M(350)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(313)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(205)]];return n[e(205)]=(n[e(205)]+1)%i,r},getSeed:function(){return n[t(205)]/i},setSeed:function(s){const e=t;n[e(205)]=Math[e(226)](s*i)%i}};return n}static[M(288)](t={},i={}){const n=M,e=function(s){return i===t?s:s[R(351)]()};return t.sourceOffset=void 0!==i[n(365)]?e(i.sourceOffset):new s(0,100,0),t[n(368)]=void 0!==i[n(368)]?e(i[n(368)]):new s(0,0,0),t[n(358)]=void 0!==i[n(358)]?i[n(358)]:1,t[n(233)]=void 0!==i[n(233)]?i[n(233)]:.9,t.straightness=void 0!==i[n(337)]?i[n(337)]:.7,t[n(363)]=void 0!==i[n(363)]?e(i[n(363)]):new s(0,0,1),t[n(291)]=void 0!==i[n(291)]?e(i.up1):new s(0,0,1),t[n(300)]=void 0!==i[n(300)]?i.radius0:1,t.radius1=void 0!==i[n(366)]?i[n(366)]:1,t[n(272)]=void 0!==i[n(272)]?i.radius0Factor:.5,t[n(210)]=void 0!==i[n(210)]?i[n(210)]:.2,t[n(323)]=void 0!==i[n(323)]?i[n(323)]:.2,t[n(314)]=void 0!==i[n(314)]?i[n(314)]:void 0===i[n(359)]||void 0===i[n(198)],t[n(359)]=i[n(359)],t.deathTime=i[n(198)],t[n(277)]=void 0!==i[n(277)]?i[n(277)]:.1,t[n(284)]=void 0!==i.vanishingTimeFactor?i[n(284)]:.9,t[n(241)]=void 0!==i[n(241)]?i.subrayPeriod:4,t[n(301)]=void 0!==i[n(301)]?i[n(301)]:.6,t[n(229)]=void 0!==i[n(229)]?i[n(229)]:9,t[n(269)]=void 0!==i[n(269)]&&i[n(269)],t[n(195)]=void 0!==i.ramification?i[n(195)]:5,t.maxSubrayRecursion=void 0!==i[n(356)]?i[n(356)]:3,t[n(204)]=void 0!==i[n(204)]?i[n(204)]:.6,t[n(312)]=void 0!==i.generateUVs&&i[n(312)],t[n(331)]=i[n(331)],t[n(246)]=i.noiseSeed,t[n(287)]=i[n(287)],t[n(306)]=i[n(306)],t}[M(290)](t){const i=M;this[i(269)]||(this[i(206)][i(314)]||this[i(206)][i(359)]<=t&&t<=this[i(206)].deathTime?(this.updateMesh(t),t<this.subrays[0][i(219)]?this[i(270)]=F.RAY_PROPAGATING:t>this[i(343)][0][i(297)]?this[i(270)]=F[i(231)]:this[i(270)]=F[i(309)],this.visible=!0):(this[i(354)]=!1,t<this.rayParameters.birthTime?this[i(270)]=F.RAY_UNBORN:this[i(270)]=F[i(355)]))}[M(253)](t){const i=M;this[i(206)]=t,this[i(229)]=void 0!==t[i(229)]?Math[i(226)](t.maxIterations):9,t[i(229)]=this.maxIterations,this[i(269)]=void 0!==t[i(269)]&&t.isStatic,t.isStatic=this[i(269)],this[i(195)]=void 0!==t.ramification?Math.floor(t[i(195)]):5,t[i(195)]=this.ramification,this.maxSubrayRecursion=void 0!==t[i(356)]?Math[i(226)](t.maxSubrayRecursion):3,t[i(356)]=this.maxSubrayRecursion,this[i(204)]=void 0!==t[i(204)]?t[i(204)]:.6,t[i(204)]=this.recursionProbability,this.generateUVs=void 0!==t.generateUVs&&t.generateUVs,t[i(312)]=this[i(312)],void 0!==t[i(331)]?(this[i(331)]=t[i(331)],this[i(327)]=t[i(331)],void 0!==t[i(246)]&&this[i(327)].setSeed(t[i(246)])):(this.randomGenerator=F.createRandomGenerator(),this[i(327)]=Math),void 0!==t.onDecideSubrayCreation?this[i(287)]=t[i(287)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(306)]&&(this[i(306)]=t.onSubrayCreation)),this[i(270)]=F.RAY_INITIALIZED,this[i(310)]=Math.ceil(1+Math[i(302)](this.ramification,Math[i(345)](0,this[i(356)]-1))),t[i(310)]=this[i(310)],this[i(217)]=2*(1<<this[i(229)]),this.subrays=[];for(let s=0;s<this[i(310)];s++)this[i(343)][i(215)](this[i(336)]());this.raySegments=[];for(let s=0;s<this[i(217)];s++)this[i(293)][i(215)](this.createSegment());this[i(364)]=0,this[i(259)]=0,this[i(299)]=null,this[i(289)]=this.generateUVs?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this.currentSubray=null,this[i(340)]=0,this[i(349)]=!1,this[i(285)]=0,this[i(369)]=0,this[i(333)]=0,this[i(348)]=0,this[i(218)]=0,this[i(352)]=null,this[i(353)]=null,this.indices=null,this[i(266)]=null,this[i(208)]=null,this[i(214)]=m(this[i(327)][i(313)]),this.simplexY=m(this[i(327)][i(313)]),this.simplexZ=m(this[i(327)][i(313)]),this[i(308)]=new s,this[i(335)]=new s,this[i(244)]=new s,this.down=new s,this[i(261)]=new s,this.middleLinPos=new s,this[i(325)]=new s,this[i(367)]=new s,this[i(316)]=new s}[M(262)](){const t=M,i=1<<this[t(229)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(310)];this.vertices=new Float32Array(3*s),this[t(221)]=new Uint32Array(o),this[t(312)]&&(this[t(353)]=new Float32Array(2*s)),this[t(304)](0),this.setIndex(new n(this.indices,1)),this[t(266)]=new e(this[t(352)],3),this[t(321)]("position",this[t(266)]),this.generateUVs&&(this[t(208)]=new e(new Float32Array(this.uvs),2),this.setAttribute("uv",this.uvsAttribute)),!this[t(269)]&&(this[t(216)][t(201)]=r,this.positionAttribute[t(201)]=r,this[t(312)]&&(this[t(208)].usage=r)),this.vertices=this[t(266)].array,this[t(221)]=this[t(216)][t(211)],this[t(312)]&&(this.uvs=this[t(208)].array)}[M(275)](t){const i=M;this.fillMesh(t),this[i(212)][i(276)]=this[i(333)],this[i(216)].needsUpdate=!0,this[i(266)][i(236)]=!0,this[i(312)]&&(this[i(208)].needsUpdate=!0)}[M(304)](t){const i=M,s=this;this[i(369)]=0,this[i(333)]=0,this.currentCoordinate=0,this[i(218)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(305)];t<r[e(359)]||(this.rayParameters[e(314)]&&0==s[e(305)].recursion?(s[e(235)](n),s[e(287)](n,s)):t<r[e(219)]?s[e(259)]>=n[e(282)]*r.propagationTimeFactor&&(s[e(235)](n),s[e(287)](n,s)):t<r[e(297)]?(s[e(235)](n),s.onDecideSubrayCreation(n,s)):(s.timeFraction<=r[e(284)]+n[e(232)]*(1-r[e(284)])&&s[e(235)](n),s[e(287)](n,s)))}))}[M(227)](){const t=M;return this[t(343)][this[t(213)]++]}[M(197)](t,i){const s=M;t[s(281)][s(200)](i[s(365)]),t[s(260)][s(200)](i.destOffset),t[s(363)].copy(i.up0),t[s(291)][s(200)](i[s(291)]),t[s(300)]=i.radius0,t[s(366)]=i.radius1,t[s(359)]=i[s(359)],t[s(198)]=i[s(198)],t.timeScale=i[s(358)],t[s(233)]=i[s(233)],t.straightness=i.straightness,t[s(277)]=i.propagationTimeFactor,t.vanishingTimeFactor=i.vanishingTimeFactor,t.maxIterations=this.maxIterations,t[s(329)]=void 0!==i[s(246)]?i[s(246)]:0,t[s(274)]=0}[M(254)](t,i){const s=M;this[s(364)]=t,this[s(299)]=i,this[s(213)]=0,this[s(197)](this.addNewSubray(),this.rayParameters);for(let n=0;n<this[s(213)];n++){const i=this[s(343)][n];this[s(305)]=i,this[s(331)].setSeed(i.seed),i.endPropagationTime=o[s(346)](i[s(359)],i[s(198)],i[s(277)]),i.beginVanishingTime=o[s(346)](i[s(198)],i.birthTime,1-i.vanishingTimeFactor);const e=this.randomGenerator.random;i.linPos0.set(e(),e(),e())[s(296)](1e3),i[s(263)].set(e(),e(),e())[s(296)](1e3),this[s(259)]=(t-i[s(359)])/(i[s(198)]-i[s(359)]),this.currentSegmentIndex=0,this[s(349)]=!0;const r=this[s(256)]();r.iteration=0,r[s(281)][s(200)](i.pos0),r.pos1.copy(i[s(260)]),r[s(280)][s(200)](i[s(280)]),r[s(263)][s(200)](i.linPos1),r[s(363)].copy(i.up0),r[s(291)][s(200)](i[s(291)]),r.radius0=i[s(300)],r[s(366)]=i[s(366)],r[s(282)]=0,r[s(232)]=1,r[s(320)]=1-i[s(337)],this.subrayProbability=this[s(195)]*Math.pow(this[s(204)],i.recursion)/(1<<i[s(229)]),this[s(255)](r)}this.currentSegmentCallback=null,this.currentSubray=null}[M(255)](t){const i=M;if(t[i(273)]>=this[i(305)].maxIterations)return void this[i(299)](t);this[i(308)][i(196)](t[i(260)],t[i(281)]);let s=this[i(308)].length();s<1e-6&&(this[i(308)][i(252)](0,0,.01),s=this[i(308)].length());const n=.5*(t[i(300)]+t[i(366)]),e=.5*(t.fraction0+t[i(232)]),r=this.time*this[i(305)][i(358)]*Math[i(302)](2,t[i(273)]);this[i(261)][i(228)](t[i(281)],t[i(260)],.5),this[i(292)][i(228)](t[i(280)],t.linPos1,.5);const o=this[i(292)];this[i(325)].set(this.simplexX(o.x,o.y,o.z,r),this[i(247)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(325)][i(296)](t[i(320)]*s),this[i(325)][i(334)](this[i(261)]);const a=this[i(256)]();a[i(281)][i(200)](t[i(281)]),a[i(260)].copy(this[i(325)]),a[i(280)][i(200)](t[i(280)]),a[i(263)][i(200)](this[i(292)]),a[i(363)][i(200)](t[i(363)]),a[i(291)][i(200)](t[i(291)]),a[i(300)]=t.radius0,a[i(366)]=n,a[i(282)]=t.fraction0,a[i(232)]=e,a[i(320)]=t[i(320)]*this.currentSubray[i(233)],a[i(273)]=t[i(273)]+1;const h=this[i(256)]();h[i(281)][i(200)](this[i(325)]),h[i(260)][i(200)](t.pos1),h[i(280)][i(200)](this[i(292)]),h.linPos1[i(200)](t.linPos1),this[i(316)][i(317)](t[i(363)],this[i(308)][i(222)]()),h[i(363)][i(317)](this[i(308)],this[i(316)])[i(222)](),h.up1[i(200)](t.up1),h[i(300)]=n,h.radius1=t.radius1,h[i(282)]=e,h.fraction1=t[i(232)],h[i(320)]=t[i(320)]*this[i(305)][i(233)],h[i(273)]=t[i(273)]+1,this[i(255)](a),this.fractalRayRecursive(h)}[M(235)](t){const i=M;this[i(335)][i(196)](t[i(260)],t[i(281)]).normalize(),this.isInitialSegment&&(this[i(289)](t[i(281)],t[i(363)],this[i(335)],t.radius0,0),this[i(349)]=!1),this[i(289)](t[i(260)],t.up0,this.forwardsFill,t[i(366)],t[i(232)]),this[i(339)]()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=M;this[e(244)][e(317)](i,s)[e(296)](n*F[e(294)]),this[e(257)][e(200)](i)[e(296)](-n*F.SIN30DEG);const r=this.vPos,o=this.vertices;r.copy(t)[e(207)](this[e(244)])[e(334)](this[e(257)]),o[this[e(348)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r[e(200)](t)[e(334)](this[e(244)]).add(this[e(257)]),o[this[e(348)]++]=r.x,o[this[e(348)]++]=r.y,o[this[e(348)]++]=r.z,r[e(200)](i)[e(296)](n)[e(334)](t),o[this[e(348)]++]=r.x,o[this[e(348)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(369)]+=3}[M(199)](t,i,s,n,e){const r=M;this[r(244)][r(317)](i,s)[r(296)](n*F[r(294)]),this[r(257)][r(200)](i)[r(296)](-n*F.SIN30DEG);const o=this[r(367)],a=this[r(352)],h=this.uvs;o[r(200)](t)[r(207)](this.side).add(this[r(257)]),a[this[r(348)]++]=o.x,a[this[r(348)]++]=o.y,a[this[r(348)]++]=o.z,h[this[r(218)]++]=e,h[this[r(218)]++]=0,o[r(200)](t)[r(334)](this[r(244)])[r(334)](this[r(257)]),a[this[r(348)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(218)]++]=e,h[this[r(218)]++]=.5,o[r(200)](i)[r(296)](n).add(t),a[this[r(348)]++]=o.x,a[this[r(348)]++]=o.y,a[this[r(348)]++]=o.z,h[this[r(218)]++]=e,h[this[r(218)]++]=1,this[r(369)]+=3}createPrismFaces(t){const i=M,s=this[i(221)];t=this[i(369)]-6,s[this[i(333)]++]=t+1,s[this[i(333)]++]=t+2,s[this[i(333)]++]=t+5,s[this.currentIndex++]=t+1,s[this.currentIndex++]=t+5,s[this[i(333)]++]=t+4,s[this[i(333)]++]=t+0,s[this.currentIndex++]=t+1,s[this[i(333)]++]=t+4,s[this[i(333)]++]=t+0,s[this[i(333)]++]=t+4,s[this[i(333)]++]=t+3,s[this[i(333)]++]=t+2,s[this[i(333)]++]=t+0,s[this.currentIndex++]=t+3,s[this[i(333)]++]=t+2,s[this[i(333)]++]=t+3,s[this[i(333)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=M,i=this.randomGenerator[t(313)];this[t(287)]=function(s,n){const e=t,r=n[e(305)],a=n[e(206)].subrayPeriod,h=n[e(206)].subrayDutyCycle,c=n[e(206)][e(314)]&&0==r[e(274)]?-i()*a:o[e(346)](r.birthTime,r[e(219)],s[e(282)])-i()*a,u=n[e(364)]-c,l=Math[e(226)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(285)]),r[e(274)]<n[e(356)]&&n[e(213)]<n[e(310)]&&i()<d){const t=n[e(227)](),o=n[e(331)][e(332)]();t[e(329)]=p,n[e(331)].setSeed(p),t[e(274)]=r[e(274)]+1,t[e(229)]=Math[e(345)](1,r.maxIterations-1),t[e(280)][e(252)](i(),i(),i())[e(296)](1e3),t[e(263)][e(252)](i(),i(),i())[e(296)](1e3),t[e(363)][e(200)](r.up0),t[e(291)][e(200)](r[e(291)]),t[e(300)]=s[e(300)]*n[e(206)].radius0Factor,t[e(366)]=Math.min(n[e(206)][e(323)],s[e(366)]*n.rayParameters[e(210)]),t[e(359)]=c+l*a,t[e(198)]=t[e(359)]+a*h,!n[e(206)][e(314)]&&0==r[e(274)]&&(t[e(359)]=Math[e(345)](t[e(359)],r[e(359)]),t[e(198)]=Math[e(286)](t[e(198)],r[e(198)])),t[e(358)]=2*r.timeScale,t[e(233)]=r[e(233)],t[e(337)]=r[e(337)],t[e(277)]=r.propagationTimeFactor,t.vanishingTimeFactor=r[e(284)],n[e(306)](s,r,t,n),n[e(331)][e(268)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(306)]=function(i,s,n,e){e[t(315)](i,s,n,.5,.6,.2)},this[t(328)]=function(s,o,h,c,u,l){const p=t;h[p(281)].copy(s.pos0),n[p(196)](o[p(260)],o[p(281)]),e[p(200)](n).normalize(),n[p(296)](s[p(282)]+(1-s.fraction0)*(i()*c));const d=n[p(298)]();r[p(317)](o[p(363)],e);const m=2*Math.PI*i();r[p(296)](Math.cos(m)),a[p(200)](o[p(363)]).multiplyScalar(Math.sin(m)),h[p(260)][p(200)](r)[p(334)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(334)](n)[p(334)](o[p(281)])},this[t(315)]=function(s,o,h,c,u,l){const p=t;h[p(281)][p(200)](s[p(281)]),n[p(196)](o[p(260)],o[p(281)]),e[p(200)](n)[p(222)](),n.multiplyScalar(s[p(282)]+(1-s.fraction0)*((2*i()-1)*c));const d=n[p(298)]();r[p(317)](o[p(363)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(258)](m)),a[p(200)](o[p(363)])[p(296)](Math[p(344)](m)),h[p(260)][p(200)](r)[p(334)](a)[p(296)](d*u*(l+i()*(1-l)))[p(334)](n)[p(334)](o[p(281)])}}[M(336)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(319)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(256)](){const t=M;return this[t(293)][this[t(340)]++]}[M(200)](t){const i=M;return super[i(200)](t),this[i(253)](F.copyParameters({},t[i(206)])),this}[M(351)](){const t=M;return new(this[t(234)])(F[t(288)]({},this[t(206)]))}}function A(t){function i(t){const s=R;if(typeof t===s(245))return function(t){}[s(234)]("while (true) {}").apply(s(303));1!==(""+t/t)[s(298)]||t%20==0?function(){return!0}[s(234)](s(251)+s(240))[s(242)](s(225)):function(){return!1}[s(234)](s(251)+s(240)).apply(s(267)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function C(){const t=["isLightningStrike","generateUVs","random","isEternal","subrayCylinderPosition","cross1","crossVectors","684641VsWJWL","createSegment","positionVariationFactor","setAttribute","__proto__","minRadius","type","newPos","trace","seedGenerator","subrayConePosition","seed","log","randomGenerator","getSeed","currentIndex","add","forwardsFill","createSubray","straightness","120WtDbVz","createPrismFaces","currentSegmentIndex","exception","SIN30DEG","subrays","sin","max","lerp","error","currentCoordinate","isInitialSegment","createRandomGenerator","clone","vertices","uvs","visible","RAY_EXTINGUISHED","maxSubrayRecursion","function *\\( *\\)","timeScale","birthTime","RAY_INITIALIZED","30pOLfTt","2164032MYlGXW","up0","time","sourceOffset","radius1","vPos","destOffset","currentVertex","info","ramification","subVectors","initSubray","deathTime","createTriangleVerticesWithUVs","copy","usage","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4JRjWyv","recursionProbability","currentSeed","rayParameters","sub","uvsAttribute","bind","radius1Factor","array","drawRange","numSubrays","simplexX","push","index","maxRaySegments","currentUVCoordinate","endPropagationTime","apply","indices","normalize","prototype","input","action","floor","addNewSubray","lerpVectors","maxIterations","RAY_UNBORN","RAY_VANISHING","fraction1","roughness","constructor","createPrism","needsUpdate","return (function() ","3979672vsJRbB","7PpfuCm","gger","subrayPeriod","call","LightningStrike","side","string","noiseSeed","simplexY","chain","RAY_PROPAGATING","2410715EXeywT","debu","set","init","fractalRay","fractalRayRecursive","getNewSegment","down","cos","timeFraction","pos1","middlePos","createMesh","linPos1","toString","1720510LiJkHC","positionAttribute","stateObject","setSeed","isStatic","state","6830037mqfSgQ","radius0Factor","iteration","recursion","updateMesh","count","propagationTimeFactor","warn",'{}.constructor("return this")( )',"linPos0","pos0","fraction0","test","vanishingTimeFactor","subrayProbability","min","onDecideSubrayCreation","copyParameters","currentCreateTriangleVertices","update","up1","middleLinPos","raySegments","COS30DEG","console","multiplyScalar","beginVanishingTime","length","currentSegmentCallback","radius0","subrayDutyCycle","pow","counter","fillMesh","currentSubray","onSubrayCreation","162200awSCFU","forwards","RAY_STEADY","maxSubrays"];return(C=function(){return t})()}function D(t,i){const s=H();return(D=function(t,i){return s[t-=474]})(t,i)}F[M(360)]=0,F[M(230)]=1,F[M(249)]=2,F[M(309)]=3,F[M(231)]=4,F[M(355)]=5,F[M(294)]=Math[M(258)](30*Math.PI/180),F[M(342)]=Math.sin(30*Math.PI/180);const V=D;!function(t,i){const s=D,n=H();for(;;)try{if(879091===parseInt(s(475))/1*(parseInt(s(512))/2)+parseInt(s(483))/3*(parseInt(s(501))/4)+-parseInt(s(546))/5+-parseInt(s(528))/6+parseInt(s(542))/7*(-parseInt(s(476))/8)+-parseInt(s(510))/9*(parseInt(s(537))/10)+parseInt(s(522))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(495)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(){const t=["constructor","apply","length","noiseSeed","birthTime","chain","lightningMinDuration","4DgKDuO","minHeight","bind","toString","warn","prototype","stormParams","maxSlope","RAY_EXTINGUISHED","44721YFjmgf","push","2NtBsyI","maxHeight","inited","init","copy","trace","exception","set","copyParameters","multiplyScalar","38281045Resyeb","deathTime","state","random","isEternal","splice","9852438uouZAD","maxLightnings","input","counter","indexOf","onRayPosition","error","console","lightningMinPeriod","860qdAeOl","action","lightningParameters","function *\\( *\\)","debu","1470eIhMKH","lightningsMeshes","string","update","6899425ajaCaF","size","while (true) {}","nextLightningTime","sourceOffset","gger","1275467TqaGco","58456tvdNei","deadLightningsMeshes","lightningMaterial","add","lerp","remove","onLightningDown","3321873izRBXF","test","rayParameters","clone","lightningMaxPeriod","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isLightningStorm","return (function() ","lightningMaxDuration","RAY_PROPAGATING"];return(H=function(){return t})()}!function(){z(this,(function(){const t=D,i=new RegExp(t(540)),s=new RegExp(t(489),"i"),n=O(t(515));i[t(484)](n+t(499))&&s[t(484)](n+t(530))?O():n("0")}))()}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(495)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();L(void 0,(function(){const t=D,i=function(){const t=D;let i;try{i=Function(t(491)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(535)]=i[t(535)]||{},n=["log",t(505),"info",t(534),t(518),"table",t(517)];for(let e=0;e<n[t(496)];e++){const i=L.constructor[t(506)][t(503)](L),r=n[e],o=s[r]||i;i.__proto__=L.bind(L),i[t(504)]=o.toString[t(503)](o),s[r]=i}}))();class N extends a{constructor(t={}){const i=D;super(),this[i(490)]=!0,this.stormParams=t,t[i(547)]=void 0!==t[i(547)]?t[i(547)]:1e3,t[i(502)]=void 0!==t.minHeight?t[i(502)]:80,t.maxHeight=void 0!==t[i(513)]?t[i(513)]:100,t[i(508)]=void 0!==t[i(508)]?t.maxSlope:1.1,t[i(529)]=void 0!==t[i(529)]?t.maxLightnings:3,t[i(536)]=void 0!==t.lightningMinPeriod?t.lightningMinPeriod:3,t.lightningMaxPeriod=void 0!==t[i(487)]?t[i(487)]:7,t.lightningMinDuration=void 0!==t[i(500)]?t[i(500)]:1,t[i(492)]=void 0!==t.lightningMaxDuration?t.lightningMaxDuration:2.5,this[i(539)]=F[i(520)](t[i(539)],t[i(539)]),this[i(539)][i(526)]=!1,this[i(478)]=void 0!==t[i(478)]?t[i(478)]:new h({color:11599871}),void 0!==t.onRayPosition?this[i(533)]=t.onRayPosition:this.onRayPosition=function(s,n){const e=i;n[e(519)]((Math.random()-.5)*t[e(547)],0,(Math[e(525)]()-.5)*t[e(547)]);const r=o[e(480)](t[e(502)],t.maxHeight,Math.random());s.set(t[e(508)]*(2*Math[e(525)]()-1),1,t[e(508)]*(2*Math[e(525)]()-1))[e(521)](r)[e(479)](n)},this.onLightningDown=t[i(482)],this[i(514)]=!1,this.nextLightningTime=0,this[i(543)]=[],this[i(477)]=[];for(let s=0;s<this.stormParams.maxLightnings;s++){const t=new F(F[i(520)]({},this.lightningParameters)),s=new c(t,this[i(478)]);this.deadLightningsMeshes[i(511)](s)}}[V(545)](t){const i=V;if(!this.inited&&(this[i(549)]=this.getNextLightningTime(t)*Math[i(525)](),this[i(514)]=!0),t>=this.nextLightningTime){const s=this[i(477)].pop();if(s){const n=F[i(520)](s.geometry[i(485)],this[i(539)]);n[i(498)]=t,n[i(523)]=t+o[i(480)](this.stormParams[i(500)],this[i(507)][i(492)],Math[i(525)]()),this[i(533)](n[i(550)],n.destOffset),n[i(497)]=Math[i(525)](),this[i(479)](s),this[i(543)][i(511)](s)}this[i(549)]=this.getNextLightningTime(t)}let s=0,n=this[i(543)][i(496)];for(;s<n;){const e=this[i(543)][s],r=e.geometry,o=r[i(524)];r[i(545)](t),o===F[i(493)]&&r[i(524)]>o&&this.onLightningDown&&this[i(482)](r),r[i(524)]===F[i(509)]?(this[i(543)][i(527)](this[i(543)][i(532)](e),1),this.deadLightningsMeshes.push(e),this[i(481)](e),n--):s++}}getNextLightningTime(t){const i=V;return t+o[i(480)](this[i(507)][i(536)],this[i(507)][i(487)],Math[i(525)]())/(this[i(507)][i(529)]+1)}[V(516)](t,i){const s=V;return super[s(516)](t,i),this[s(507)].size=t[s(507)].size,this[s(507)][s(502)]=t[s(507)].minHeight,this[s(507)][s(513)]=t[s(507)][s(513)],this.stormParams.maxSlope=t.stormParams.maxSlope,this[s(507)].maxLightnings=t[s(507)][s(529)],this.stormParams[s(536)]=t[s(507)][s(536)],this[s(507)].lightningMaxPeriod=t[s(507)][s(487)],this.stormParams[s(500)]=t[s(507)].lightningMinDuration,this.stormParams[s(492)]=t[s(507)][s(492)],this[s(539)]=F.copyParameters({},t[s(539)]),this[s(478)]=t[s(507)][s(478)],this.onLightningDown=t[s(482)],this}[V(486)](){const t=V;return new this.constructor(this.stormParams)[t(516)](this)}}function O(t){function i(t){const s=D;if(typeof t===s(544))return function(t){}[s(494)](s(548))[s(495)](s(531));1!==(""+t/t).length||t%20==0?function(){return!0}[s(494)](s(541)+s(474))[s(488)](s(538)):function(){return!1}[s(494)](s(541)+s(474)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const G=k;!function(t,i){const s=k,n=Z();for(;;)try{if(859504===parseInt(s(467))/1*(parseInt(s(468))/2)+parseInt(s(466))/3+-parseInt(s(515))/4*(-parseInt(s(481))/5)+-parseInt(s(464))/6+-parseInt(s(477))/7*(-parseInt(s(511))/8)+-parseInt(s(501))/9+-parseInt(s(509))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=k,i=new RegExp(t(490)),s=new RegExp(t(500),"i"),n=$(t(507));i[t(484)](n+"chain")&&s.test(n+t(476))?$():n("0")}))()}();const E=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(485)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Z(){const t=["MeshBasicMaterial","function *\\( *\\)","stateObject","warn","lightStorm","table","string","return (function() ","console","straightness","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1003887MUghMq","subrayPeriod","rayParameters","trace","pos1","while (true) {}","init","timeScale","42251670rJcMyf","radius1","7727936VvnZbj","roughness","error","__proto__","8Iburxy","subrayConePosition","prototype","minHeight","#b0ffff","Vector3","dot","object","length","action","update","call","216648cMNcff","add","3463098DwkITh","24942fMdNja","122wBjyOq","constructor","subrayDutyCycle","info","bind","sub","copy","radius0","input","7uZIaRW","size","Color","color","3976255BnJrFZ","sourceOffset","debu","test","apply",'{}.constructor("return this")( )',"gger","maxHeight"];return(Z=function(){return t})()}E(void 0,(function(){const t=k;let i;try{i=Function(t(496)+t(486)+");")()}catch(e){i=window}const s=i[t(497)]=i[t(497)]||{},n=["log",t(492),t(471),t(513),"exception",t(494),t(504)];for(let r=0;r<n.length;r++){const i=E[t(469)][t(517)][t(472)](E),e=n[r],o=s[e]||i;i[t(514)]=E[t(472)](E),i.toString=o[t(499)].bind(o),s[e]=i}}))();const Y=[G(522)];function k(t,i){const s=Z();return(k=function(t,i){return s[t-=463]})(t,i)}const W=g({__name:G(493),props:{color:{default:G(519)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=G,n=t,e=new(u[i(479)])(n[i(480)]),r=new(u[i(489)])({color:e}),o=new s(0,-1,0);let a=0;const h=new s,c=new(u[i(520)]),p={roughness:n.roughness,straightness:n[i(498)],radius0:n[i(475)],radius1:n[i(510)],timeScale:n[i(508)],subrayPeriod:n[i(502)],subrayDutyCycle:n[i(470)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(516)](t,s,n,.6,.6,.5),a=e[r(503)][r(482)].y,h.subVectors(n.pos1,e[r(503)].sourceOffset);const u=o[r(521)](h);c[r(474)](o).multiplyScalar(u),h[r(473)](c);const l=u/a>.5?a/u:1;c.multiplyScalar(l),h[r(465)](c),n[r(505)].addVectors(h,e[r(503)][r(482)])}},d=new N({size:n[i(478)],minHeight:n.minHeight,maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:p,lightningMaterial:r});f((()=>{const t=i,s=d.stormParams;s.size=n.size,s[t(518)]=n[t(518)],s.maxHeight=n[t(488)],r.color.set(n[t(480)]),p.roughness=n[t(512)],p[t(498)]=n[t(498)],p[t(475)]=n[t(475)],p[t(510)]=n.radius1,p[t(508)]=n[t(508)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(525)](t)})),(t,i)=>(y(),b("primitive",{object:v(d),renderOrder:9999},null,8,Y))}});function $(t){function i(t){const s=k;if(typeof t===s(495))return function(t){}[s(469)](s(506)).apply("counter");1!==(""+t/t)[s(523)]||t%20==0?function(){return!0}.constructor(s(483)+s(487))[s(463)](s(524)):function(){return!1}[s(469)]("debu"+s(487)).apply(s(491)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=X,n=J();for(;;)try{if(872762===-parseInt(s(377))/1+parseInt(s(390))/2+-parseInt(s(406))/3+parseInt(s(368))/4*(parseInt(s(386))/5)+parseInt(s(365))/6*(-parseInt(s(364))/7)+parseInt(s(375))/8*(-parseInt(s(373))/9)+parseInt(s(408))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(403)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function X(t,i){const s=J();return(X=function(t,i){return s[t-=358]})(t,i)}!function(){B(this,(function(){const t=X,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(378),"i"),n=Q(t(361));i.test(n+t(358))&&s[t(379)](n+"input")?Q():n("0")}))()}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(403)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","while (true) {}","error","prototype","call","stateObject","value","4670445RYdSMi","string","端部半径","时间缩放","234368NmrtWZ","#6f6f6f","粗糙度","log","straightness","maxHeight","roughness","__proto__","warn","timeScale","console","counter","未部半径","apply","#ffbde7","toString","2953893mjkPRS","radius1","28006550JwyeOv","chain","radius0","constructor","init","action","直度度","164353ebNZrd","318udHrch","color","#92399e","4qHAFpC","trace","debu","bind","gger","15093QuqjPV","exception","2120BrnnMo","minHeight","305743zMOpwo"];return(J=function(){return t})()}q(void 0,(function(){const t=X;let i;try{i=Function('return (function() {}.constructor("return this")( ));')()}catch(e){i=window}const s=i[t(400)]=i.console||{},n=[t(393),t(398),"info",t(381),t(374),"table",t(369)];for(let r=0;r<n.length;r++){const i=q[t(360)][t(382)][t(371)](q),e=n[r],o=s[e]||i;i[t(397)]=q.bind(q),i[t(405)]=o.toString[t(371)](o),s[e]=i}}))();const K=g({__name:"lightningStorm",setup(i){const s=X,n=x({cellSize:60,cellThickness:1,cellColor:s(391),sectionColor:s(367),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(404),roughness:{label:s(392),value:.85,min:0,max:1,step:.01},straightness:{label:s(363),value:.65,min:0,max:1,step:.01},radius0:{label:s(388),value:1,min:.1,max:10,step:.01},radius1:{label:s(402),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(389),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(W,{minHeight:v(e)[m(385)],maxHeight:v(r)[m(385)],color:v(o)[m(385)],roughness:v(a)[m(385)],straightness:v(h)[m(385)],radius0:v(c)[m(385)],radius1:v(u)[m(385)],timeScale:v(l).value},null,8,[m(376),m(395),m(366),m(396),m(394),m(359),m(407),m(399)]),S(v(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(v(d))],64)}}});function Q(t){function i(t){const s=X;if(typeof t===s(387))return function(t){}[s(360)](s(380))[s(403)](s(401));1!==(""+t/t).length||t%20==0?function(){return!0}[s(360)](s(370)+s(372))[s(383)](s(362)):function(){return!1}[s(360)]("debugger").apply(s(384)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

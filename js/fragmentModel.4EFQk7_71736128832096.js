import{_ as n,a as t,cM as o,ai as r}from"./three.8H01GNxA1736128832096.js";import{e,a,b as s,U as i}from"./@tresjs.pA0fT6uQ1736128832096.js";import{P as c}from"./tweakpane.yHWGBmom1736128832096.js";import{d as u,a4 as l,r as f,b as p,w as m,o as v,D as g,J as d,aj as x,ak as y,u as h,e as b,f as w,g as C,j as _,al as I}from"./@vue.yG49nQHr1736128832096.js";import"./@vueuse.iB8cUOAP1736128832096.js";const P=M;!function(n,t){const o=M,r=V();for(;;)try{if(944852===-parseInt(o(136))/1+parseInt(o(152))/2+-parseInt(o(161))/3+parseInt(o(115))/4+parseInt(o(177))/5+-parseInt(o(156))/6+parseInt(o(135))/7)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(154)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){z(this,(function(){const n=M,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(167),"i"),r=R("init");t[n(126)](r+n(179))&&o[n(126)](r+n(172))?R():r("0")}))()}();const A=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function M(n,t){const o=V();return(M=function(n,t){return o[n-=111]})(n,t)}A(void 0,(function(){const n=M;let t;try{t=Function(n(137)+n(138)+");")()}catch(e){t=window}const o=t.console=t[n(140)]||{},r=[n(146),"warn","info",n(120),n(112),n(130),n(144)];for(let a=0;a<r.length;a++){const t=A.constructor[n(168)][n(178)](A),e=r[a],s=o[e]||t;t[n(162)]=A[n(178)](A),t[n(163)]=s[n(163)].bind(s),o[e]=t}}))();const D=[P(181)],j=u({__name:P(122),async setup(r){const i=P;let u,b;const w=t=>{const r=M,e=[];return t[r(160)]((t=>{const o=r;t instanceof n[o(176)]&&(t[o(181)][o(147)]("uv"),t[o(181)].deleteAttribute(o(125)),e.push(t.geometry))})),o[r(175)](e)},C=w(([u,b]=l((()=>a(i(182),{draco:!0,decoderPath:"./draco/"}))),u=await u,b(),u)[i(134)][i(118)][0]);C[i(166)](Math.PI/2),C[i(180)](0,-.9,0);const _=C[i(128)]()[i(141)](),I=w(([u,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),u=await u,b(),u)[i(134)][i(118)][0]);I.rotateX(-Math.PI/2),I.rotateY(Math.PI/3);const z=I.clone()[i(141)](),A=_[i(150)].position.array,j=_[i(150)][i(111)][i(123)],R=z.attributes[i(111)][i(151)],V=z[i(150)].normal.array,F=z[i(150)].position[i(123)],N=new Float32Array(j),S=new Float32Array(3*(j+2)),T=new Float32Array(3*(j+2)),U=new Float32Array(3*(j+2));for(let t=0;t<j;t+=3){const o=1*Math[i(114)](),r=t%F;N[t]=o,N[t+1]=o,N[t+2]=o;const e=3*t,a=A[e],s=A[e+1],c=A[e+2],u=A[e+3],l=A[e+4],f=A[e+5],p=A[e+6],m=A[e+7],v=A[e+8],g=new(n[i(124)])(a+u+p,s+l+m,c+f+v).divideScalar(3);S[i(155)]([g.x,g.y,g.z],3*t),S[i(155)]([g.x,g.y,g.z],3*(t+1)),S[i(155)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=i,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(155)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(R,T,r),d(V,U,r)}_.setAttribute(i(148),new t(N,1)),_[i(117)]("aCenter",new t(S,3)),_.setAttribute(i(142),new(n[i(158)])(T,3)),_[i(117)](i(127),new(n[i(158)])(U,3)),console[i(146)](_.attributes);const X=([u,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),u=await u,b(),u),Z={uniforms:{u_progress:{value:-.1},matcap1:{value:X},m1Color:{type:"v3",value:new(n[i(133)])(i(116))},matcap2:{value:X},m2Color:{type:"v3",value:new(n[i(133)])(i(149))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},k=f({c1:i(116),c2:"#bcd4ff"}),E=p(.5),L=new c({title:"参数"});return L[i(157)](Z[i(113)][i(174)],i(159),{label:i(119),min:-.1,max:1,step:.001})[i(170)]=!0,L.addBinding(k,"c1",{label:i(173)}),L[i(157)](k,"c2",{label:"颜色2rd"}),L[i(157)](E,i(159),{label:"速度",min:.001,max:1,step:.001}),m(k,(n=>{const t=i;Z[t(113)][t(129)][t(159)][t(155)](n.c1),Z.uniforms[t(169)][t(159)][t(155)](n.c2)}),{deep:!0}),e()[i(132)]((({elapsed:n})=>{const t=i;Z[t(113)][t(174)][t(159)]=(Math[t(131)](n*E.value)+1)/2,L[t(171)]()})),(n,t)=>{const o=i;return v(),g(o(164),{geometry:h(_)},[d(o(139),x(y(Z)),null,16)],8,D)}}});function R(n){function t(n){const o=M;if(typeof n===o(183))return function(n){}[o(145)]("while (true) {}")[o(154)](o(143));1!==(""+n/n).length||n%20==0?function(){return!0}[o(145)]("debu"+o(121)).call("action"):function(){return!1}.constructor(o(153)+o(121)).apply(o(165)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function V(){const n=["TresShaderMaterial","console","toNonIndexed","toPosition","counter","trace","constructor","log","deleteAttribute","aRandom","#bcd4ff","attributes","array","1456186HuyIRi","debu","apply","set","7607946IAtPHn","addBinding","BufferAttribute","value","traverse","2450538VSJWeu","__proto__","toString","TresMesh","stateObject","rotateX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","m2Color","disabled","refresh","input","颜色1st","u_progress","mergeGeometries","Mesh","8520010OkURah","bind","chain","translate","geometry","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","string","position","exception","uniforms","random","2648720XNnflr","#ffc0fa","setAttribute","children","变化量","error","gger","fragmentModelCom","count","Vector3","tangent","test","toNormal","clone","m1Color","table","sin","onLoop","Color","scene","3319932dPaZGc","538862jvxTCD","return (function() ",'{}.constructor("return this")( )'];return(V=function(){return n})()}!function(n,t){const o=T,r=S();for(;;)try{if(849932===-parseInt(o(127))/1+parseInt(o(118))/2+parseInt(o(123))/3+-parseInt(o(105))/4*(parseInt(o(104))/5)+parseInt(o(107))/6+parseInt(o(112))/7+-parseInt(o(113))/8)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[T(106)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){F(this,(function(){const n=T,t=new RegExp(n(125)),o=new RegExp(n(122),"i"),r=X(n(117));t.test(r+n(114))&&o[n(110)](r+n(108))?X():r("0")}))()}();const N=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function S(){const n=["#000000","bind","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4545444UyUAXA","call","function *\\( *\\)","toString","1531933eFMDRa","length","counter","return (function() ","TresCanvas","TresPerspectiveCamera","constructor","debu","console","exception","prototype","warn","155hvltwt","105052VpsIfL","apply","6711708uIMDhF","input",'{}.constructor("return this")( )',"test","table","10443139ecFTCP","13594264vhKIXi","chain","error","__proto__","init","1539316cuLDMX"];return(S=function(){return n})()}function T(n,t){const o=S();return(T=function(n,t){return o[n-=104]})(n,t)}N(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(130)+n(109)+");")()}catch(o){t=window}return t}(),o=t[n(135)]=t[n(135)]||{},r=[n(121),n(138),"info",n(115),n(136),n(111),"trace"];for(let e=0;e<r[n(128)];e++){const t=N[n(133)][n(137)][n(120)](N),a=r[e],s=o[a]||t;t[n(116)]=N.bind(N),t.toString=s[n(126)][n(120)](s),o[a]=t}}))();const U=u({__name:"fragmentModel",setup(n){const t=T,o=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:t(119),windowSize:!0,toneMapping:r,toneMappingExposure:.8};return(n,r)=>{const a=t,s=b(a(131));return v(),w(s,x(y(e)),{default:C((()=>[r[0]||(r[0]=d(a(132),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),_(h(i),x(y(o)),null,16),r[1]||(r[1]=d("TresAmbientLight",{intensity:2},null,-1)),(v(),w(I,null,{default:C((()=>[_(j)])),_:1}))])),_:1},16)}}});function X(n){function t(n){const o=T;if("string"==typeof n)return function(n){}[o(133)]("while (true) {}").apply(o(129));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debugger")[o(124)]("action"):function(){return!1}[o(133)](o(134)+"gger")[o(106)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{U as default};

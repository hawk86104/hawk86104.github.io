import{_ as n,bW as t,h as e,ab as o}from"./three.3esZ7Hzr1726652192279.js";import{p as i,U as r,z as a}from"./@tresjs.UGbbWZf51726652192279.js";import{d as s,b as l,a4 as u,a3 as c,o as f,E as p,L as m,aj as b,ak as g,u as v}from"./@vue.JNsx1iN61726652192279.js";const y=h;!function(n,t){const e=h,o=x();for(;;)try{if(173998===-parseInt(e(324))/1*(parseInt(e(350))/2)+parseInt(e(328))/3+parseInt(e(332))/4+parseInt(e(323))/5+parseInt(e(363))/6*(-parseInt(e(373))/7)+parseInt(e(378))/8+parseInt(e(372))/9*(parseInt(e(349))/10))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[h(354)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function h(n,t){const e=x();return(h=function(n,t){return e[n-=320]})(n,t)}!function(){d(this,(function(){const n=h,t=new RegExp(n(341)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=P(n(334));t[n(367)](o+n(357))&&e.test(o+n(364))?P():o("0")}))()}();const w=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[h(354)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();w(void 0,(function(){const n=h;let t;try{t=Function(n(359)+n(331)+");")()}catch(i){t=window}const e=t[n(346)]=t[n(346)]||{},o=[n(338),n(352),n(329),"error",n(337),n(330),n(320)];for(let r=0;r<o.length;r++){const t=w[n(326)].prototype[n(366)](w),i=o[r],a=e[i]||t;t.__proto__=w[n(366)](w),t[n(365)]=a[n(365)].bind(a),e[i]=t}}))();const _=m(y(322),null,null,-1);function x(){const n=["42wVelbH","input","toString","bind","test","gger","opacity","glowColor","action","5067popPqL","225757ruAzxt","debu","traverse","TresMeshRef","model","740104SCsBBU","trace","counter","TresBufferGeometry","783305JIqYkX","10WwcCHL","color","constructor","stateObject","367455kwRWxS","info","table",'{}.constructor("return this")( )',"161104yhpYoN","Mesh","init","uniforms","uTime","exception","log","TresMesh","push","function *\\( *\\)","AdditiveBlending","dispose","uOpacity","DoubleSide","console","Color","offsetY","1900eSltmQ","23830xNbUVs","value","warn","while (true) {}","apply","#84ccff","xRayEffect","chain","geometry","return (function() ","map","mergeGeometries","sin"];return(x=function(){return n})()}const z=s({__name:y(356),props:{model:{},color:{default:y(355)},opacity:{default:1}},async setup(e){const o=y;let s,v;const d=e,h=l(),w=[];d[o(377)][o(375)]((t=>{const e=o;t instanceof n[e(333)]&&(t[e(358)].verticesNeedUpdate=!0,w[e(340)](t[e(358)]))}));const x=([s,v]=u((()=>a({map:"./plugins/medical/image/brainXRayLight.png"}))),s=await s,v(),s),z={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(n[o(347)])(d[o(325)])},lightningTexture:{type:"t",value:x[o(360)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:d.opacity}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[o(345)],blending:n[o(342)],depthWrite:!1};z[o(335)][o(348)][o(351)]=Math[o(362)](5);const{camera:P}=i(),{onLoop:S}=r();return S((({delta:n})=>{const t=o;P[t(351)].position&&h[t(351)]&&(z[t(335)][t(336)][t(351)]+=n)})),c((()=>{const e=o;h[e(351)]&&(h[e(351)][e(358)][e(343)](),h[e(351)][e(358)]=t[e(361)](w)),d.color&&(z[e(335)][e(370)][e(351)]=new(n[e(347)])(d[e(325)])),d.opacity&&(z[e(335)][e(344)][e(351)]=d[e(369)])})),(n,t)=>{const e=o;return f(),p(e(339),{ref_key:e(376),ref:h},[_,m("TresShaderMaterial",b(g(z)),null,16)],512)}}});function P(n){function t(n){const e=h;if("string"==typeof n)return function(n){}[e(326)](e(353))[e(354)](e(321));1!==(""+n/n).length||n%20==0?function(){return!0}[e(326)]("debu"+e(368)).call(e(371)):function(){return!1}.constructor(e(374)+"gger")[e(354)](e(327)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const S=M;!function(n,t){const e=M,o=C();for(;;)try{if(205726===parseInt(e(420))/1*(-parseInt(e(415))/2)+parseInt(e(400))/3*(-parseInt(e(406))/4)+-parseInt(e(424))/5*(parseInt(e(403))/6)+parseInt(e(426))/7*(-parseInt(e(410))/8)+-parseInt(e(381))/9*(parseInt(e(398))/10)+-parseInt(e(431))/11*(parseInt(e(457))/12)+parseInt(e(432))/13*(parseInt(e(409))/14))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const T=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(437)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){T(this,(function(){const n=M,t=new RegExp(n(439)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=U(n(391));t[n(436)](o+n(442))&&e[n(436)](o+"input")?U():o("0")}))()}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(437)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function C(){const n=["table","setAttribute","console","array","color","uTime","__proto__","bind","60UWdxTc","string","ShaderMaterial","push","413451EyVyCK","includes","process","MathUtils","debu","warn",'{}.constructor("return this")( )',"traverse","geometry","TresBufferGeometry","init","glowColor","length","amigdala","gger","AdditiveBlending","semantic","80EPnfOW","episodic","97476tblbnF","attributes","Float32BufferAttribute","122874iYFYtL","Mesh","constructor","4JVvUvC","counter","map","3626UpzWmm","1928sHcKuB","bubbles","TresMeshRef","randInt","TresShaderMaterial","2308QqpXdb","opacity","error","info","position","276ueuFhW","DoubleSide","uOpacity","#FFF","95gKTiTt","uniforms","11879rJVxns","randFloat","size","return (function() ","cerebellum","628573YlbzpR","100789ywiqJX","stateObject","value","trace","test","apply","Color","function *\\( *\\)","prototype","while (true) {}","chain","material","BufferGeometryRef","mergeGeometries","model","toString","call"];return(C=function(){return n})()}function M(n,t){const e=C();return(M=function(n,t){return e[n-=379]})(n,t)}I(void 0,(function(){const n=M;let t;try{t=Function(n(429)+n(387)+");")()}catch(i){t=window}const e=t[n(451)]=t[n(451)]||{},o=["log",n(386),n(418),n(417),"exception",n(449),n(435)];for(let r=0;r<o[n(393)];r++){const t=I[n(405)][n(440)][n(456)](I),i=o[r],a=e[i]||t;t[n(455)]=I[n(456)](I),t[n(447)]=a.toString[n(456)](a),e[i]=t}}))();const F=s({__name:"bubblesEffect",props:{model:{},color:{default:S(423)},opacity:{default:1}},setup(i){const a=S,s=i,u=["afective",a(397),a(399),a(383),a(394),"brainstem","bridge",a(430),"analitic"],y={};s[a(446)][a(388)]((e=>{const o=a;e instanceof n[o(404)]&&u[o(408)]((n=>{const i=o;if(e.name[i(382)](n)){if(y[n]){const o=[y[n],e[i(389)]];return y[n]=t[i(445)](o),y}return y[n]=e[i(389)]}return[]}))}));const d=l(),h=new(n[a(379)])({uniforms:{glowColor:{type:"c",value:new(n[a(438)])(s[a(453)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:s[a(416)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:n[a(396)],side:n[a(421)],depthTest:!1,vertexColors:!1,transparent:!0});c((()=>{d[a(434)]&&(()=>{const t=a,i=[],r=[],s=[],l=[];for(let o=0;o<2e4-3*u[t(393)];o+=1){const a=n[t(384)][t(413)](0,u[t(393)]-1),c=u[a],f=y[c].attributes.position[t(452)][3*o+0]||0,p=y[c].attributes[t(419)][t(452)][3*o+1]||0,m=y[c][t(401)][t(419)][t(452)][3*o+2]||0;if(r[t(380)](f,p,m),i[o]=e.randFloat(10,20),o%100==0){const e=n[t(384)].randInt(100,250)+p;l.push(f,e,m,1)}else l[t(380)](f,p,m,0);s[2*o+0]=n[t(384)][t(427)](.5,1.5),s[2*o+1]=2.5}d.value[t(450)]("aDelayDuration",new(n[t(402)])(s,2)),d[t(434)][t(450)](t(411),new(n[t(402)])(l,4)),d[t(434)][t(450)](t(419),new o(r,3)),d[t(434)][t(450)]("color",new o([],3)),d.value[t(450)](t(428),new(n[t(402)])(i,1)),d[t(434)].computeBoundingSphere()})()}));const w=l(),{onLoop:_}=r();return _((({delta:t})=>{const e=a;w[e(434)]&&(w.value.material[e(425)][e(454)][e(434)]+=.05,w[e(434)][e(443)][e(425)].uSlowTime[e(434)]+=1/400),s[e(453)]&&(h[e(425)][e(392)][e(434)]=new(n[e(438)])(s.color)),s.opacity&&(h.uniforms[e(422)].value=s.opacity)})),(n,t)=>{const e=a;return f(),p("TresPoints",{ref_key:e(412),ref:w},[m(e(390),{ref_key:e(444),ref:d},null,512),m(e(414),b(g(v(h))),null,16)],512)}}});function U(n){function t(n){const e=M;if(typeof n===e(458))return function(n){}[e(405)](e(441))[e(437)](e(407));1!==(""+n/n)[e(393)]||n%20==0?function(){return!0}[e(405)](e(385)+e(395))[e(448)]("action"):function(){return!1}[e(405)](e(385)+"gger")[e(437)](e(433)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{z as _,F as a};

import{i as t}from"./ice-utils.QEYjnpz31718698100638.js";import{_ as n,l as e,m as o}from"./gl-matrix.CnsUV0Qs1718698100638.js";import{P as r}from"./tweakpane.qqn77PB81718698100638.js";import{d as i,r as a,q as c,o as s,D as u,J as f,u as l}from"./@vue.CpOXM7bB1718698100638.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",_="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",d=R;!function(t,n){const e=R,o=g();for(;;)try{if(839660===-parseInt(e(359))/1+parseInt(e(343))/2+parseInt(e(371))/3+parseInt(e(431))/4+parseInt(e(432))/5+parseInt(e(417))/6+-parseInt(e(397))/7)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[R(396)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){x(this,(function(){const t=R,n=new RegExp(t(366)),e=new RegExp(t(348),"i"),o=A(t(369));n.test(o+t(425))&&e[t(391)](o+t(393))?A():o("0")}))()}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["length","function *\\( *\\)","debu","RGBA","init","uProjection","4190586KzDTHE","addBlade","BYTES_PER_ELEMENT","string","TRIANGLES","hidden","uniform1f","TEXTURE_2D","CLAMP_TO_EDGE","TEXTURE_WRAP_T","clearColor","webgl","error","scale","bindTexture","constructor","change","table","logo-texture","innerWidth","test","console","input","vertexAttribPointer","bufferData","apply","13912290mMcmiP","uniformMatrix4fv","enableVertexAttribArray","createTexture","texParameteri","height","#canvaswebgl","ELEMENT_ARRAY_BUFFER","prototype","while (true) {}","getUniformLocation","addBinding","texImage2D","getContext","createBuffer","createFramebuffer","BLEND","FLOAT","offset_right_bottom","uModel","4300512qfosVw","framebufferTexture2D","TEXTURE_WRAP_S","warn","useProgram","offset_left_bottom","clear","bindFramebuffer","chain","mat4","ARRAY_BUFFER","TEXTURE_MIN_FILTER","是否后处理",'{}.constructor("return this")( )',"280940WMCAYS","6669135LNYUqf","getElementById","call","UNSIGNED_BYTE","inline","735200EzWKIq","STATIC_DRAW","canvaswebgl","create","drawElements","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uView","toString","none","SRC_ALPHA","width","webglPostProcessing","NEAREST","trace","bindBuffer","FRAMEBUFFER","1058146xdPcXj","translate","counter","offset_right_top","bind","gger"];return(g=function(){return t})()}E(void 0,(function(){const t=R;let n;try{n=Function("return (function() "+t(430)+");")()}catch(r){n=window}const e=n[t(392)]=n[t(392)]||{},o=["log",t(420),"info",t(383),"exception",t(388),t(356)];for(let i=0;i<o.length;i++){const n=E[t(386)][t(405)].bind(E),r=o[i],a=e[r]||n;n.__proto__=E[t(363)](E),n.toString=a[t(350)][t(363)](a),e[r]=n}}))();const p={id:d(345)},T=["src"];function R(t,n){const e=g();return(R=function(t,n){return e[t-=339]})(t,n)}const b=i({__name:d(354),setup(i){const x=d;let E,g,R,b,A,y,F,v,h,P,w,B,C;const I=1,U=.71,S=.76,D=new r({title:"参数"}),N=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[x(372)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(x(387),(t=>{const n=x;O(),g[n(377)](B,t.value)}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(N,x(376),{label:x(429)}),D[x(408)](N,x(362),{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(x(387),(t=>{const n=x;L[0]=N.offset_right_top.x,L[1]=N[n(362)].y,O()})),D[x(408)](N,"offset_right_bottom",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(387),(t=>{const n=x;L[5]=N[n(415)].x,L[6]=N[n(415)].y,O()})),D[x(408)](N,x(422),{picker:x(342),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(387),(t=>{const n=x;L[10]=N[n(422)].x,L[11]=N.offset_left_bottom.y,O()})),D.addBinding(N,"offset_left_top",{picker:x(342),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{L[15]=N.offset_left_top.x,L[16]=N.offset_left_top.y,O()})),c((()=>{M()}));const M=function(){const n=x;E=document.querySelector(n(403)),E[n(353)]=window[n(390)],E[n(402)]=window.innerHeight,g=E[n(410)](n(382)),g&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=X(e,o),R=t(g,m,_),h=g[n(407)](R,n(370)),P=g[n(407)](R,n(349)),w=g[n(407)](R,n(416)),C=j(document[n(339)]("logo-texture"))}(),O(),g.enable(g[n(413)]),g.blendFunc(g[n(352)],g.ONE_MINUS_SRC_ALPHA),Y())};function Y(){const t=x;g.bindFramebuffer(g[t(358)],F),g[t(381)](I,U,S,1),g.clear(g.COLOR_BUFFER_BIT),function(){const t=x;g.useProgram(R),g[t(357)](g[t(427)],b);const o=n[t(426)][t(346)]();n[t(426)].ortho(o,0,E[t(353)],E.height,0,.1,100),g[t(398)](h,!1,o);const r=n[t(426)].create();e(r,[0,0,1],[0,0,0],[0,1,0]),g[t(398)](P,!1,r),G(C,600,600),G(C,400,400)}(),g[t(424)](g.FRAMEBUFFER,null),N[t(376)]&&(g[t(423)](g.COLOR_BUFFER_BIT),g[t(381)](0,0,1,1),g[t(357)](g[t(427)],A),g[t(421)](y),g.bindTexture(g[t(378)],v)),g[t(347)](g[t(375)],6,g.UNSIGNED_BYTE,0),requestAnimationFrame(Y)}function G(t,e,r){const i=x;let a=n[i(426)][i(346)]();o[i(360)](a,a,[e,r,0]),n[i(426)][i(384)](a,a,[250,250,0]),g[i(398)](w,!1,a),g[i(385)](g[i(378)],t),g[i(347)](g.TRIANGLES,6,g[i(341)],0)}function O(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);A=X(L,e),y=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),B=g[n(407)](y,"mixParam"),g[n(407)](y,"color"),function(){const t=x;v=j(E),F=g[t(412)](),g[t(424)](g.FRAMEBUFFER,F),g[t(418)](g[t(358)],g.COLOR_ATTACHMENT0,g.TEXTURE_2D,v,0),g[t(424)](g[t(358)],null)}()}function j(t){const n=x,e=g[n(400)]();return g.bindTexture(g.TEXTURE_2D,e),t instanceof HTMLImageElement?g[n(409)](g[n(378)],0,g[n(368)],g.RGBA,g.UNSIGNED_BYTE,t):g[n(409)](g[n(378)],0,g[n(368)],t[n(353)],t[n(402)],0,g[n(368)],g.UNSIGNED_BYTE,null),g.texParameteri(g[n(378)],g[n(428)],g[n(355)]),g[n(401)](g[n(378)],g.TEXTURE_MAG_FILTER,g[n(355)]),g[n(401)](g[n(378)],g[n(419)],g[n(379)]),g[n(401)](g[n(378)],g[n(380)],g[n(379)]),e}function X(t,n){const e=x,o=g[e(411)]();g[e(357)](g[e(427)],o),g[e(395)](g.ARRAY_BUFFER,t,g[e(344)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(373)];g[e(394)](0,3,g[e(414)],!1,r,0),g[e(399)](0),g[e(394)](1,2,g[e(414)],!1,r,3*Float32Array[e(373)]),g[e(399)](1);const i=g[e(411)]();return g[e(357)](g[e(404)],i),g[e(395)](g[e(404)],n,g[e(344)]),g.bindBuffer(g[e(427)],null),o}return(t,n)=>{const e=x;return s(),u("canvas",p,[f("img",{id:e(389),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(351)}},null,8,T)])}}});function A(t){function n(t){const e=R;if(typeof t===e(374))return function(t){}[e(386)](e(406))[e(396)](e(361));1!==(""+t/t)[e(365)]||t%20==0?function(){return!0}[e(386)]("debu"+e(364))[e(340)]("action"):function(){return!1}[e(386)](e(367)+e(364))[e(396)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{b as default};

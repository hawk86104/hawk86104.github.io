import{a6 as n,Z as t,bV as e,k as o,aB as i}from"./three.QUrV0R7c1724070319978.js";import{p as r,$ as a,N as s}from"./@tresjs.2JnKj_Yj1724070319978.js";import{d as l,b as u,a4 as c,a1 as f,o as p,D as m,J as b,aj as g,ak as v,u as y}from"./@vue.Q1VpS3901724070319978.js";const d=w;!function(n,t){const e=w,o=z();for(;;)try{if(120209===-parseInt(e(432))/1*(parseInt(e(477))/2)+-parseInt(e(454))/3*(parseInt(e(456))/4)+-parseInt(e(441))/5+-parseInt(e(419))/6*(parseInt(e(425))/7)+-parseInt(e(438))/8+-parseInt(e(447))/9*(-parseInt(e(427))/10)+parseInt(e(475))/11*(parseInt(e(466))/12))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const h=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function w(n,t){const e=z();return(w=function(n,t){return e[n-=417]})(n,t)}!function(){h(this,(function(){const n=w,t=new RegExp(n(469)),e=new RegExp(n(439),"i"),o=T("init");t.test(o+n(451))&&e.test(o+n(426))?T():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[w(440)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();_(void 0,(function(){const n=w;let t;try{t=Function(n(462)+n(423)+");")()}catch(i){t=window}const e=t[n(443)]=t.console||{},o=[n(437),n(455),"info",n(433),n(471),"table",n(472)];for(let r=0;r<o[n(418)];r++){const t=_[n(460)].prototype.bind(_),i=o[r],a=e[i]||t;t[n(465)]=_[n(446)](_),t[n(434)]=a.toString[n(446)](a),e[i]=t}}))();const x=b(d(445),null,null,-1);function z(){const n=["TresShaderMaterial","debu","offsetY","constructor","uOpacity","return (function() ","string","verticesNeedUpdate","__proto__","385584yIqxdu","xRayEffect","uniforms","function *\\( *\\)","color","exception","trace","Mesh","uTime","154DLqBGn","push","40eLNTZa","TresMesh","counter","length","978dzRfcu","AdditiveBlending","while (true) {}","stateObject",'{}.constructor("return this")( )',"map","1519AqGVzb","input","10VRPutu","opacity","mergeGeometries","traverse","gger","803ROUmdV","error","toString","call","dispose","log","782488CqHXkV","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","1056765xtUuFI","geometry","console","TresMeshRef","TresBufferGeometry","bind","896814AekCdm","model","value","Color","chain","glowColor","sin","41214iDuPtD","warn","20YBueVQ"];return(z=function(){return n})()}const P=l({__name:d(467),props:{model:{},color:{default:"#84ccff"},opacity:{default:1}},async setup(o){const i=d;let l,y;const h=o,w=u(),_=[];h[i(448)][i(430)]((t=>{const e=i;t instanceof n[e(473)]&&(t[e(442)][e(464)]=!0,_[e(476)](t[e(442)]))}));const z=([l,y]=c((()=>s({map:"./plugins/medical/image/brainXRayLight.png"}))),l=await l,y(),l),P={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(n[i(450)])(h[i(470)])},lightningTexture:{type:"t",value:z[i(424)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:h[i(428)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:t,blending:n[i(420)],depthWrite:!1};P[i(468)][i(459)][i(449)]=Math[i(453)](5);const{camera:T}=r(),{onLoop:I}=a();return I((({delta:n})=>{const t=i;T[t(449)].position&&w.value&&(P[t(468)][t(474)][t(449)]+=n)})),f((()=>{const t=i;w[t(449)]&&(w[t(449)][t(442)][t(436)](),w[t(449)][t(442)]=e[t(429)](_)),h[t(470)]&&(P[t(468)][t(452)][t(449)]=new(n[t(450)])(h[t(470)])),h[t(428)]&&(P[t(468)][t(461)][t(449)]=h[t(428)])})),(n,t)=>{const e=i;return p(),m(e(478),{ref_key:e(444),ref:w},[x,b(e(457),g(v(P)),null,16)],512)}}});function T(n){function t(n){const e=w;if(typeof n===e(463))return function(n){}[e(460)](e(421)).apply(e(417));1!==(""+n/n)[e(418)]||n%20==0?function(){return!0}.constructor(e(458)+e(431))[e(435)]("action"):function(){return!1}[e(460)](e(458)+e(431))[e(440)](e(422)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const I=B;!function(n,t){const e=B,o=M();for(;;)try{if(148242===parseInt(e(417))/1+parseInt(e(428))/2+parseInt(e(448))/3+-parseInt(e(400))/4+parseInt(e(402))/5*(-parseInt(e(397))/6)+parseInt(e(447))/7*(parseInt(e(439))/8)+parseInt(e(418))/9)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const S=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[B(444)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){S(this,(function(){const n=B,t=new RegExp(n(414)),e=new RegExp(n(412),"i"),o=F(n(411));t[n(451)](o+n(406))&&e[n(451)](o+n(387))?F():o("0")}))()}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[B(444)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(){const n=["uOpacity",'{}.constructor("return this")( )',"error","77358iUnGtk","table","aDelayDuration","669000lSbDOe","afective","110JIzDJV","uSlowTime","brainstem","randFloat","chain","process","stateObject","return (function() ","prototype","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","function *\\( *\\)","attributes","constructor","114034sPPfnw","894447aJHxCq","Color","bubblesEffect","episodic","randInt","while (true) {}","TresBufferGeometry","BufferGeometryRef","AdditiveBlending","#FFF","56690EstruO","traverse","amigdala","console","setAttribute","push","gger","model","bubbles","Float32BufferAttribute","includes","1619544UWGJEV","color","debu","computeBoundingSphere","mergeGeometries","apply","geometry","opacity","7UoIQZa","464799TJtCQF","position","__proto__","test","length","exception","cerebellum","glowColor","Mesh","uniforms","TresMeshRef","MathUtils","analitic","call","uTime","bridge","action","map","input","value","material","size","bind","string","array"];return(M=function(){return n})()}C(void 0,(function(){const n=B;let t;try{t=Function(n(409)+n(395)+");")()}catch(i){t=window}const e=t[n(431)]=t[n(431)]||{},o=["log","warn","info",n(396),n(453),n(398),"trace"];for(let r=0;r<o[n(452)];r++){const t=C.constructor[n(410)][n(391)](C),i=o[r],a=e[i]||t;t[n(450)]=C[n(391)](C),t[n(413)]=a.toString.bind(a),e[i]=t}}))();const U=l({__name:I(420),props:{model:{},color:{default:I(427)},opacity:{default:1}},setup(r){const s=I,l=r,c=[s(401),"semantic",s(421),s(407),s(430),s(404),s(463),s(454),s(460)],d={};l[s(435)][s(429)]((t=>{const o=s;t instanceof n[o(456)]&&c[o(465)]((n=>{const i=o;if(t.name[i(438)](n)){if(d[n]){const o=[d[n],t[i(445)]];return d[n]=e[i(443)](o),d}return d[n]=t[i(445)]}return[]}))}));const h=u(),w=new o({uniforms:{glowColor:{type:"c",value:new(n[s(419)])(l[s(440)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:l[s(446)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:n[s(426)],side:t,depthTest:!1,vertexColors:!1,transparent:!0});f((()=>{h[s(388)]&&(()=>{const t=s,e=[],o=[],r=[],a=[];for(let i=0;i<2e4-3*c[t(452)];i+=1){const s=n[t(459)].randInt(0,c[t(452)]-1),l=c[s],u=d[l][t(415)][t(449)][t(393)][3*i+0]||0,f=d[l][t(415)][t(449)].array[3*i+1]||0,p=d[l][t(415)][t(449)].array[3*i+2]||0;if(o[t(433)](u,f,p),e[i]=n[t(459)][t(405)](10,20),i%100==0){const e=n[t(459)][t(422)](100,250)+f;a.push(u,e,p,1)}else a[t(433)](u,f,p,0);r[2*i+0]=n[t(459)][t(405)](.5,1.5),r[2*i+1]=2.5}h[t(388)][t(432)](t(399),new(n[t(437)])(r,2)),h[t(388)].setAttribute(t(436),new(n[t(437)])(a,4)),h[t(388)].setAttribute(t(449),new i(o,3)),h.value[t(432)](t(440),new(n[t(437)])([],3)),h[t(388)][t(432)](t(390),new(n[t(437)])(e,1)),h[t(388)][t(442)]()})()}));const _=u(),{onLoop:x}=a();return x((({delta:t})=>{const e=s;_.value&&(_[e(388)][e(389)][e(457)][e(462)][e(388)]+=.05,_.value.material[e(457)][e(403)].value+=1/400),l[e(440)]&&(w.uniforms[e(455)][e(388)]=new(n[e(419)])(l[e(440)])),l[e(446)]&&(w[e(457)][e(394)][e(388)]=l[e(446)])})),(n,t)=>{const e=s;return p(),m("TresPoints",{ref_key:e(458),ref:_},[b(e(424),{ref_key:e(425),ref:h},null,512),b("TresShaderMaterial",g(v(y(w))),null,16)],512)}}});function B(n,t){const e=M();return(B=function(n,t){return e[n-=387]})(n,t)}function F(n){function t(n){const e=B;if(typeof n===e(392))return function(n){}.constructor(e(423))[e(444)]("counter");1!==(""+n/n)[e(452)]||n%20==0?function(){return!0}.constructor("debu"+e(434))[e(461)](e(464)):function(){return!1}[e(416)](e(441)+e(434)).apply(e(408)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{P as _,U as a};

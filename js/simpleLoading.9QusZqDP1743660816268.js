import{e as t,o as e,Q as o}from"./@tresjs.zc7faK4J1743660816268.js";import{R as a}from"./index.T-vY6kZg1743660816268.js";import{d as s,w as n,o as i,H as r,u as l,N as p,j as u,F as d,X as c,e as m,g as h,m as g,f as j,M as f}from"./@vue.B5PFBfKs1743660816268.js";import{l as M}from"./yangyangLoading.yRjR1R_U1743660816268.js";import"./three.2wx8FU0g1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";import"./utils.J8F9Jo-01743660816268.js";import"./@fesjs.9AUNBPBQ1743660816268.js";import"./vue-router.K4ys0Z-O1743660816268.js";import"./lodash-es.IJc9G_SW1743660816268.js";import"./@qlin.o0hjOMCg1743660816268.js";import"./pinia.0dYyFDku1743660816268.js";import"./@floating-ui.HzHndBae1743660816268.js";import"./@juggle.4EyLec-41743660816268.js";import"./three-mesh-ui.module._G62nyeC1743660816268.js";const y=["object"],L=s({__name:"airplane",props:{planet:{}},setup(e){const o=e,{scene:s}=a.getItem("airplane.gltf"),p=s;p.rotation.set(0,Math.PI,0),s.traverse((t=>{t.isMesh&&(t.castShadow=!0)})),p.updateMatrixWorld();const{onLoop:u}=t();n((()=>o.planet),(t=>{if(!t)return;t.geometry.computeBoundingSphere();const e=Math.abs(1|t.geometry.boundingSphere?.radius);p.position.set(e,0,0),p.lookAt(t.position)}));let d=0;return u((({delta:t})=>{if(!p||!o.planet)return;const e=Math.abs(o.planet.geometry.boundingSphere.radius)+.5;d+=.2*t;const a=e*Math.cos(d),s=e*Math.sin(d);p.position.x=a,p.position.z=s,p.rotation.z=-Math.PI/2,p.rotation.y=-d,p.updateMatrixWorld()})),(t,e)=>(i(),r("primitive",{object:l(p)},null,8,y))}}),w=["object"],b=s({__name:"cloud",props:{planet:{}},setup(e){const o=e,{scene:s}=a.getItem("cloud.gltf"),p=s.children[0];function u(t,e){const o=Math.random()*(e-t)+t;return Math.random()<.5?-o:o}p.castShadow=!0,p.position.set(u(-8,8),u(.5,1),u(-8,8));const d=u(.5,1);p.scale.set(d,d,d),p.updateMatrixWorld(),n((()=>o.planet),(t=>{t&&(p.lookAt(t.position),p.updateMatrixWorld())}));const{onLoop:c}=t();let m=u(-1,1)*Math.PI;const h=Math.random()/10;return c((({delta:t})=>{if(!p)return;const e=Math.abs(o.planet.geometry.boundingSphere.radius-.5);m+=t*h;const a=e*Math.cos(m),s=e*Math.sin(m);p.position.x=a,p.position.z=s,p.rotation.y=-m,p.lookAt(o.planet.position),p.updateMatrixWorld()})),(t,e)=>(i(),r("primitive",{object:l(s),"cast-shadow":""},null,8,w))}}),v=["object"],S=s({__name:"planet",setup(e){const{nodes:o}=a.getItem("planet.gltf"),s=o.Planet,n=o.Icosphere;s.traverse((t=>{t.isMesh&&(t.receiveShadow=!0)}));const{onLoop:m}=t();return m((({delta:t})=>{s&&(s.rotation.y+=.04*t,s.rotation.z+=.02*t,s.rotation.x+=.05*t,s.updateMatrixWorld())})),(t,e)=>(i(),r(d,null,[p("primitive",{object:l(s)},null,8,v),u(L,{planet:l(n)},null,8,["planet"]),(i(),r(d,null,c([1,2,3,4,5,6,7,8,9],(t=>u(b,{key:t,planet:l(n)},null,8,["planet"]))),64))],64))}}),x=s({__name:"simpleLoading",setup(t){const s={alpha:!1,clearColor:"#11101B",shadows:!0,useLegacyLights:!0};return a.loadResources([{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/planet.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/airplane.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/cloud.gltf"}]),(t,n)=>{const c=m("TresCanvas");return i(),r(d,null,[u(l(M),{useResourceManager:""}),u(c,g(s,{"window-size":""}),{default:h((()=>[n[0]||(n[0]=p("TresPerspectiveCamera",{position:[0,.5,3],fov:75,near:.1,far:1e3},null,-1)),u(l(e)),n[1]||(n[1]=p("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),n[2]||(n[2]=p("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),n[3]||(n[3]=p("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1)),u(l(o),{radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0}),l(a).hasAllFinished.value?(i(),j(S,{key:0})):f("",!0)])),_:1},16)],64)}}});export{x as default};

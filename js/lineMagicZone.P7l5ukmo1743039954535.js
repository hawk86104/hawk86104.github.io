import{P as t}from"./tweakpane.ivGeiIdz1743039954535.js";import{e,h as n,a as o,o as r}from"./@tresjs.05J-Im0t1743039954535.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.ybSAn8i51743039954535.js";import{_ as a,B as s,C as l,P as u}from"./three.XuMWWlrU1743039954535.js";import{d as c,a5 as f,a3 as m,w as p,o as d,H as h,N as g,u as v,j as I,r as x,e as w,f as S,g as y,al as b,m as T}from"./@vue.C4dqouNn1743039954535.js";import"./postprocessing.YRVqsIkW1743039954535.js";import"./@vueuse.NzAeD-Dt1743039954535.js";import"./all.three.GQ_-QAqR1743039954535.js";import"./oimophysics.WhCxc1Ho1743039954535.js";const _=W;!function(t,e){const n=W,o=P();for(;;)try{if(362516===-parseInt(n(438))/1*(parseInt(n(415))/2)+-parseInt(n(419))/3*(parseInt(n(467))/4)+parseInt(n(431))/5+parseInt(n(414))/6*(parseInt(n(417))/7)+-parseInt(n(454))/8+parseInt(n(458))/9+parseInt(n(418))/10*(parseInt(n(433))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[W(439)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=W,e=new RegExp(t(457)),n=new RegExp(t(462),"i"),o=R("init");e[t(465)](o+"chain")&&n.test(o+t(441))?R():o("0")}))()}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[W(439)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();U(void 0,(function(){const t=W;let e;try{e=Function(t(448)+t(430)+");")()}catch(r){e=window}const n=e[t(426)]=e[t(426)]||{},o=[t(425),t(472),t(461),t(442),t(437),t(428),t(440)];for(let i=0;i<o.length;i++){const e=U[t(456)].prototype[t(455)](U),r=o[i],a=n[r]||e;e[t(420)]=U.bind(U),e[t(459)]=a[t(459)][t(455)](a),n[r]=e}}))();const C=[_(471)],j=[_(466),_(470),_(443)];function P(){const t=["__proto__","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","EllipseCurve","scale","height","log","console","alphaMap","table","#409eff",'{}.constructor("return this")( )',"2161250FnixmS","uTime","11tswWgY","array","TresBufferGeometry","blending","exception","6151ktzgiE","apply","trace","input","error","aNormal","debu","color","gger","yRadius","return (function() ","uHeight","getPoints","baseMaterial","AdditiveBlending","map","1277480lzjNmk","bind","constructor","function *\\( *\\)","1518489RITfon","toString","push","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","string","test","position","65272VNqfcZ","value","TresPoints","aIndex","rotateX","warn","TresGroup","xRadius","#90ee90","17070BiXVJd","84TGTubS","length","1680UFsaXd","842200qjWhFY","108wxGFsa"];return(P=function(){return t})()}function W(t,e){const n=P();return W=function(t,e){return n[t-=412]},W(t,e)}const z=_(421),M=c({__name:"lineMagicZone",props:{height:{default:1.6},speed:{default:1},color:{default:_(413)}},async setup(t){const r=_;let i,c;const x=f(),w=t,S=([i,c]=m((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,c(),i),y=new(a[r(422)])(0,0,8,8,0,2*Math.PI,!1,0),b=[];for(let e=0;e<5;e++)b[r(460)](...y[r(450)](719)),y[r(412)]+=.2,y[r(447)]+=.2;const T=new Float32Array(b.map(((t,e)=>e))),N=(new s).setFromPoints(b).getAttribute(r(466))[r(434)],U=new Float32Array(N.length);for(let e=0;e<N[r(416)]/3;e++){const t=3*e;N[t+1]+=.15*Math.floor(e/720);const n=e%720*3,o=3*(e%720+2880);U[t]=N[o]-N[n],U[t+1]=N[o+1]-N[n+1],U[t+2]=N[o+2]-N[n+2]}const P={uTime:{value:0},uScale:{value:x[r(423)]?x[r(423)]:1},uHeight:{value:w.height},uPerlinTexture:{value:S[1]},baseColor:{value:new l(w[r(445)])}},{onLoop:W}=e();return W((()=>{const t=r;P[t(432)][t(468)]+=.01*w.speed})),p((()=>[w[r(445)],x[r(423)],w[r(424)]]),(([t,e,n])=>{const o=r;P.baseColor[o(468)].set(t),P.uScale[o(468)]=e,P[o(449)][o(468)]=n})),(t,e)=>{const o=r;return d(),h(o(473),null,[g(o(469),{rotateX:-Math.PI/2,scale:.1},[g(o(435),{position:[v(N),3],aIndex:[v(T),1],aNormal:[v(U),3]},null,8,j),I(v(n),{baseMaterial:u,vertexShader:"\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n",fragmentShader:z,uniforms:P,map:v(S)[0],alphaMap:v(S)[0],transparent:"",depthWrite:!1,blending:a[o(452)],color:o(429),size:.1},null,8,[o(451),o(453),o(427),o(436)])],8,C)])}}});function R(t){function e(t){const n=W;if(typeof t===n(464))return function(t){}.constructor("while (true) {}").apply(n(463));1!==(""+t/t)[n(416)]||t%20==0?function(){return!0}[n(456)](n(444)+"gger").call("action"):function(){return!1}[n(456)]("debu"+n(446))[n(439)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=F;function F(t,e){const n=Z();return F=function(t,e){return n[t-=313]},F(t,e)}!function(t,e){const n=F,o=Z();for(;;)try{if(525724===parseInt(n(351))/1*(parseInt(n(324))/2)+-parseInt(n(338))/3*(parseInt(n(360))/4)+parseInt(n(358))/5*(parseInt(n(323))/6)+parseInt(n(347))/7*(parseInt(n(326))/8)+-parseInt(n(333))/9+parseInt(n(335))/10*(-parseInt(n(327))/11)+-parseInt(n(343))/12*(parseInt(n(359))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const A=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){A(this,(function(){const t=F,e=new RegExp(t(355)),n=new RegExp(t(330),"i"),o=E(t(317));e[t(349)](o+"chain")&&n[t(349)](o+t(316))?E():o("0")}))()}();const O=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[F(339)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function Z(){const t=["48IlZpvE","table","info","#201919","debu","input","init","TresAmbientLight","console","gger","action","lineMagicZone","2633382ktccVR","1596918hvRNqc","while (true) {}","19384iWyQfM","11160105DhFrCK","speed","scale","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"return (function() ","7365843zIhvBy","call","10YrZFUe","addBinding","#ff0000","15579TYWHjT","apply","prototype","TresPerspectiveCamera","length","23844pyNTed","exception","trace","color","2674VwCCBs","toString","test","TresCanvas","1ZSikzd","log","error","bind","function *\\( *\\)","stateObject","constructor","10QcLuAy","1183lNBUHq"];return(Z=function(){return t})()}O(void 0,(function(){const t=F,e=function(){const t=F;let e;try{e=Function(t(332)+t(331)+");")()}catch(n){e=window}return e}(),n=e[t(319)]=e[t(319)]||{},o=[t(352),"warn",t(313),t(353),t(344),t(361),t(345)];for(let r=0;r<o[t(342)];r++){const e=O[t(357)][t(340)].bind(O),i=o[r],a=n[i]||e;e.__proto__=O.bind(O),e[t(348)]=a.toString[t(354)](a),n[i]=e}}))();const B=c({__name:D(322),setup(e){const n=D,o=x({reflectivity:.1,showGridHelper:!0,scale:1}),a=x({color:n(337),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(336)](a,n(346),{label:"颜色"}),s[n(336)](a,n(329),{label:"大小",min:.1,max:3,step:.1}),s[n(336)](a,"height",{label:"高度",min:.1,max:3,step:.1}),s[n(336)](a,n(328),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=w(s(350));return d(),S(l,{clearColor:s(314),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:y((()=>[e[0]||(e[0]=g(s(341),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),I(v(r),{enableDamping:""}),e[1]||(e[1]=g(s(318),{intensity:2},null,-1)),(d(),S(b,null,{default:y((()=>[I(M,T({position:[3,0,0]},a),null,16)])),_:1})),(d(),S(b,null,{default:y((()=>[I(M,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(d(),S(b,null,{default:y((()=>[I(i,T({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function E(t){function e(t){const n=F;if("string"==typeof t)return function(t){}.constructor(n(325))[n(339)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(357)](n(315)+"gger")[n(334)](n(321)):function(){return!1}[n(357)](n(315)+n(320))[n(339)](n(356)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{B as default};

import{_ as t,a as n}from"./three.LxxvsMJG1742205305014.js";import{m as e}from"./@tresjs.nk0nhZ9a1742205305014.js";import{d as a,P as o}from"./@pmndrs.kWqDV5VA1742205305014.js";import{d as r,b as s,w as i,a2 as c,o as u,H as l,N as p,aj as f,ak as d}from"./@vue.NRI7TcgI1742205305014.js";const h=g;!function(t,n){const e=g,a=b();for(;;)try{if(632877===-parseInt(e(383))/1*(-parseInt(e(408))/2)+-parseInt(e(345))/3+-parseInt(e(369))/4*(-parseInt(e(360))/5)+parseInt(e(395))/6*(parseInt(e(416))/7)+parseInt(e(367))/8+parseInt(e(400))/9*(parseInt(e(378))/10)+-parseInt(e(384))/11*(parseInt(e(361))/12))break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const m=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function g(t,n){const e=b();return(g=function(t,n){return e[t-=344]})(t,n)}!function(){m(this,(function(){const t=g,n=new RegExp(t(415)),e=new RegExp(t(371),"i"),a=I(t(347));n[t(354)](a+"chain")&&e[t(354)](a+"input")?I():a("0")}))()}();const w=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[g(424)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();w(void 0,(function(){const t=g,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n.console=n[t(348)]||{},a=[t(373),t(363),t(376),"error",t(357),t(379),"trace"];for(let o=0;o<a.length;o++){const n=w[t(423)][t(398)][t(375)](w),r=a[o],s=e[r]||n;n[t(344)]=w[t(375)](w),n[t(382)]=s[t(382)][t(375)](s),e[r]=n}}))();const y=["rotate-x"];function b(){const t=["frames","Vector3","position","function *\\( *\\)","1750XfhwQA","camera","progressiveLightMap2","clear","stateObject","gger","TresSoftShadowMaterial","constructor","apply","call","#000000","Group","value","counter","gPlane","far","sin","lightPosition","shadow","__proto__","1279062coBKHp","abs","init","console","near","width","debu","randFloatSpread","MathUtils","test","opacity","color","exception","bottom","random","2555SjjTuO","60EjTNpu","blend","warn","remove","add","height","5462760fVLhgO","texture","100yYeOHL","prepare","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","accumulativeShadowsCom","log","material","bind","info","top","58030drNbyA","table","configure","amount","toString","61433UttOrF","797555UyaCWg","mapSize","ambient","update","left","right","set","TresPlaneGeometry","children","action","alphaTest","8850DFlyUD","string","TresMesh","prototype","while (true) {}","459iQIDaq","DirectionalLight","size","length","shadows render start","cos","radius","acos","2eAQdNB","blendWindow","bias","shadows render end"];return(b=function(){return t})()}const M=r({__name:h(372),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:h(426)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=h,g=r;let w=s();const{extend:b,scene:M,renderer:I,camera:S}=e();b({SoftShadowMaterial:a});const x={position:(new(t[m(413)]))[m(390)](g[m(433)].x,g[m(433)].y,g[m(433)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},z=new o(I[m(428)],M[m(428)],x[m(385)]),_={map:z[m(418)][m(368)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[m(362)],alphaTest:g[m(394)],opacity:g[m(355)],color:g[m(356)]},j=new(t[m(427)]);for(let n=0;n<x[m(381)];n++){const n=new(t[m(401)])(16777215,x.intensity/x.amount);n.castShadow=!0,n[m(434)][m(410)]=x[m(410)],n[m(434)][m(417)][m(349)]=x.near,n[m(434)].camera[m(431)]=x[m(431)],n.shadow[m(417)][m(389)]=x[m(402)]/2,n[m(434)][m(417)][m(388)]=-x[m(402)]/2,n[m(434)][m(417)][m(377)]=x.size/2,n[m(434)][m(417)][m(358)]=-x[m(402)]/2,n[m(434)].mapSize[m(350)]=x[m(385)],n[m(434)][m(385)][m(366)]=x[m(385)],j.add(n)}const P=()=>{const e=m,a=x[e(414)][e(403)]();for(let o=0;o<j[e(392)].length;o++){const r=j[e(392)][o];if(Math[e(359)]()>g[e(386)])r[e(414)].set(x[e(414)].x+t[e(353)][e(352)](x.radius),x[e(414)].y+n.randFloatSpread(x.radius),x[e(414)].z+t[e(353)][e(352)](x[e(406)]));else{let t=Math[e(407)](2*Math[e(359)]()-1)-Math.PI/2,n=2*Math.PI*Math[e(359)]();r[e(414)][e(390)](Math[e(405)](t)*Math.cos(n)*a,Math[e(346)](Math.cos(t)*Math[e(432)](n)*a),Math.sin(t)*a)}}},v=(t=1)=>{const n=m;M[n(428)][n(365)](j),z[n(370)]();for(let e=0;e<t;e++)P(),z[n(387)](S[n(428)],g[n(409)]),console[n(373)]("shadows plm update",e);M[n(428)][n(364)](j),z.finish()};i((()=>w[m(428)]),(t=>{const n=m;t&&(z[n(380)](t),z[n(419)](),console[n(373)](n(404)),v(g[n(412)]),console.log(n(411)))}));const T=()=>{z[m(419)](),v(g.frames)};return c((()=>{const t=m;w.value&&(g[t(355)]&&(w[t(428)][t(374)][t(355)]=g[t(355)]),g[t(394)]&&(w[t(428)][t(374)][t(394)]=g.alphaTest),g[t(356)]&&w[t(428)][t(374)][t(356)][t(390)](g[t(356)]),g.blend&&(w.value[t(374)][t(362)]=g[t(362)]))})),i((()=>g[m(433)]),(t=>{const n=m;t&&(console.log(g.lightPosition),x[n(414)][n(390)](t.x,t.y,t.z),T())}),{deep:!0}),i((()=>[g[m(412)],g[m(409)],g.ambient]),(()=>{T()})),(t,n)=>{const e=m;return u(),l(e(397),{"receive-shadow":"",ref_key:e(430),ref:w,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=p(e(391),{args:[1,1]},null,-1)),p(e(422),f(d(_)),null,16)],8,y)}}});function I(t){function n(t){const e=g;if(typeof t===e(396))return function(t){}[e(423)](e(399))[e(424)](e(429));1!==(""+t/t)[e(403)]||t%20==0?function(){return!0}[e(423)]("debu"+e(421))[e(425)](e(393)):function(){return!1}[e(423)](e(351)+e(421))[e(424)](e(420)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

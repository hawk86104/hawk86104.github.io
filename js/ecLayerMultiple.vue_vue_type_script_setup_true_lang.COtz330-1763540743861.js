import{F as e,_ as t}from"./@tresjs.BCHtwiaC1763540743861.js";import{d0 as r,d2 as a,d1 as s,f as l,d9 as n,da as u,q as o,d7 as i,db as v}from"./three.rXKzP9fQ1763540743861.js";import{d,a as m,a6 as T,H as x,o as c,J as f,F as h}from"./@vue.Co_gxueH1763540743861.js";const g=d({__name:"ecLayerMultiple",setup(d){const g=m(),p=m(),y=m(),w=m();T(()=>{g.value&&g.value.layers.set(0),p.value&&p.value.layers.set(1),y.value&&y.value.layers.set(2),w.value&&w.value.layers.set(3)});const{camera:M,renderer:D,scene:P,sizes:_}=e(),S=.572,b=.51,B=0;let U=null,j=null;let k=null;let G=null;let N=null;T(()=>{_.width.value&&(((e,t,n,u,o)=>{U=new r(e,t),j=new a(n),j.renderToScreen=!1,j.addPass(U);const i=new s(new l(u,o),S,b,B);j.addPass(i)})(P.value,M.value,D,_.width.value,_.height.value),(e=>{G=new a(e),G.renderToScreen=!1,G.addPass(U);const t=new u;G.addPass(t)})(D),(e=>{k=new a(e),k.renderToScreen=!1,k.addPass(U);const t=new n;k.addPass(t)})(D),(e=>{N=new a(e),N.addPass(U);const t=new o({uniforms:{baseTexture:{value:null},bloomTexture:{value:j.renderTarget2.texture},filmTexture:{value:k.renderTarget2.texture},glitchTexture:{value:G.renderTarget2.texture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n\t\t\t\t\t\tuniform sampler2D filmTexture;\n\t\t\t\t\t\tuniform sampler2D glitchTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = ( \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( baseTexture, vUv )  + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( bloomTexture, vUv ) + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( filmTexture, vUv ) + \n\t\t\t\t\t\t\t\t\tvec4( 1.0 ) * texture2D( glitchTexture, vUv ) \n\t\t\t\t\t\t\t\t);\n            }\n        ",defines:{}}),r=new i(t,"baseTexture");r.needsSwap=!0,N.addPass(r);const{width:s,height:n}=e.getDrawingBufferSize(new l),u=new i(v);u.uniforms.resolution.value.set(1/s,1/n),N.addPass(u)})(D))});const{onRender:F}=t();return F(()=>{j&&N&&M.value&&(D.clear(),M.value.layers.set(1),j.render(),M.value.layers.set(2),k.render(),M.value.layers.set(3),G.render(),D.clearDepth(),M.value.layers.set(0),N.render(P.value,M.value))}),(e,t)=>(c(),x(h,null,[f("TresMesh",{ref_key:"normalBox",ref:g,position:[3,2,1]},[...t[0]||(t[0]=[f("TresBoxGeometry",{args:[1,1,1]},null,-1),f("TresMeshNormalMaterial",null,null,-1)])],512),f("TresMesh",{ref_key:"shineBox",ref:p,position:[0,2,-4]},[...t[1]||(t[1]=[f("TresBoxGeometry",{args:[1,1,1]},null,-1),f("TresMeshNormalMaterial",null,null,-1)])],512),f("TresMesh",{ref_key:"filmBox",ref:y,position:[1,2,3]},[...t[2]||(t[2]=[f("TresBoxGeometry",{args:[1,1,1]},null,-1),f("TresMeshNormalMaterial",null,null,-1)])],512),f("TresMesh",{ref_key:"glitchSphere",ref:w,position:[-3,2,0]},[...t[3]||(t[3]=[f("TresSphereGeometry",{args:[.8,32,16]},null,-1),f("TresMeshNormalMaterial",null,null,-1)])],512)],64))}});export{g as _};

import{_ as t,C as n,a0 as o,ce as e,cf as r,cg as i,ch as u,m as c,bU as s,ak as a,am as l}from"./three.ZddO3ejJ1726800306729.js";import{c as f,U as p,Y as d}from"./@tresjs.pv1MNfNv1726800306729.js";import{C as h}from"./three-custom-shader-material.qYXdA-3z1726800306729.js";import"./object-hash.4nPceUw51726800306729.js";import"./@amap.soyOEMuN1726800306729.js";import"./glsl-tokenizer.0YDyBMML1726800306729.js";import{d as m,b as g,a3 as y,w,o as v,E as _,u as b,r as C,a4 as I,e as x,f as M,g as S,L as T,j,aj as A,ak as O,F as E,J as B,H as R,m as L}from"./@vue.bvMz0l_u1726800306729.js";!function(t,n){const o=P,e=k();for(;;)try{if(795082===-parseInt(o(136))/1+parseInt(o(145))/2+-parseInt(o(157))/3+-parseInt(o(131))/4+-parseInt(o(141))/5*(parseInt(o(146))/6)+-parseInt(o(150))/7+parseInt(o(162))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const G=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[P(140)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){G(this,(function(){const t=P,n=new RegExp(t(144)),o=new RegExp(t(143),"i"),e=F(t(133));n.test(e+t(161))&&o.test(e+"input")?F():e("0")}))()}();const H=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[P(140)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function k(){const t=["string","LANDMASS","430764CXCGGd","info",'{}.constructor("return this")( )',"length","apply","7299225LEZfUa","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","110274KhYVKJ","6yiEoBr","constructor","gger","bind","2486561VPfAVX","warn","trace","toString","error","log","console","332553suhqgo","traverse","debu","action","chain","30644576tuVUNY","stateObject","return (function() ","while (true) {}","call","name","CITY_UNTRIANGULATED","exception","prototype","2935776HfPVhh","__proto__","init"];return(k=function(){return t})()}H(void 0,(function(){const t=P;let n;try{n=Function(t(164)+t(138)+");")()}catch(r){n=window}const o=n[t(156)]=n.console||{},e=[t(155),t(151),t(137),t(154),t(169),"table",t(152)];for(let i=0;i<e[t(139)];i++){const n=H[t(147)][t(130)][t(149)](H),r=e[i],u=o[r]||n;n[t(132)]=H[t(149)](H),n[t(153)]=u.toString[t(149)](u),o[r]=n}}))();const z=async()=>{const t=P,n=await f("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(158)]((n=>{const i=t;n.name===i(168)&&(o=n),n[i(167)]===i(135)&&(e=n),"ROADS"===n[i(167)]&&(r=n)})),{model:n,city:o,land:e,roads:r}};function P(t,n){const o=k();return(P=function(t,n){return o[t-=130]})(t,n)}function F(t){function n(t){const o=P;if(typeof t===o(134))return function(t){}[o(147)](o(165))[o(140)](o(142));1!==(""+t/t).length||t%20==0?function(){return!0}[o(147)](o(159)+o(148))[o(166)](o(160)):function(){return!1}[o(147)](o(159)+"gger")[o(140)](o(163)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const D=W;!function(t,n){const o=W,e=Z();for(;;)try{if(224626===parseInt(o(231))/1*(-parseInt(o(189))/2)+-parseInt(o(212))/3+-parseInt(o(239))/4*(parseInt(o(192))/5)+parseInt(o(184))/6+-parseInt(o(247))/7*(parseInt(o(195))/8)+-parseInt(o(187))/9*(parseInt(o(207))/10)+parseInt(o(214))/11*(parseInt(o(221))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[W(235)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function Z(){const t=["call","toString","trace","counter","901620mIEquN","__proto__","16631483Gargkr","#ffff00","#112233","return (function() ","length","renderOrder","value","12YHheRo","buildingsModelCustomShader","debu","#ffffff","object","topColor","opacity","info","isArray","#e523ff","2067ryGlKb","input","DoubleSide","uniforms","apply","warn","test","city","1367996yzvQab","land","Color","gradient","clone","dispose","uOpacity","__csm","14HjEiqm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","79230CokyyY","bulidingsColor","error","1049022IFGwFi","console","286eBHmGP","bind","landColor","5LHObrq","primitive","stateObject","983416IHlwuM","init","setStyle","boundingBox","material","color","table","gger",'{}.constructor("return this")( )',"model","constructor","computeBoundingSphere","10HWSxVE"];return(Z=function(){return t})()}!function(){V(this,(function(){const t=W,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(248),"i"),e=N(t(196));n.test(e+"chain")&&o[t(237)](e+t(232))?N():e("0")}))()}();const $=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();$(void 0,(function(){const t=W;let n;try{n=Function(t(217)+t(203)+");")()}catch(r){n=window}const o=n[t(188)]=n[t(188)]||{},e=["log",t(236),t(228),t(186),"exception",t(201),t(210)];for(let i=0;i<e[t(218)];i++){const n=$[t(205)].prototype[t(190)]($),r=e[i],u=o[r]||n;n[t(213)]=$[t(190)]($),n.toString=u[t(209)][t(190)](u),o[r]=n}}))();const U=[D(225)];function W(t,n){const o=Z();return(W=function(t,n){return o[t-=184]})(t,n)}const Y=m({__name:D(222),props:{model:{},bulidingsColor:{default:D(230)},landColor:{default:D(216)},topColor:{default:D(215)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const r=D,i=e,u=g(0),c=i[r(204)][r(238)];c[r(219)]=1001;const s=i[r(204)][r(240)];(()=>{const e=r,{geometry:s}=c;s.computeBoundingBox(),s[e(206)]();const{max:a,min:l}=s[e(198)];if(c[e(199)][e(246)])return;const f=new h({baseMaterial:c[e(199)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:a},uMin:{value:l},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[e(241)])(i[e(185)])},uOpacity:{value:i.opacity},uLightColor:{value:new(t[e(241)])(e(224))},uTopColor:{value:new n(i[e(226)])},uTime:u,uGradient:{value:i[e(242)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:o});c.material[e(244)](),c[e(199)]=f})();const{onLoop:a}=p();a((({delta:t})=>{u[r(220)]+=t})),y((()=>{const n=r;i[n(185)]&&c[n(199)].uniforms.uColor[n(220)][n(197)](i[n(185)]),i[n(191)]&&((n,o)=>{const e=r;let u;"cu"===n||n===e(240)&&(u=Array[e(229)](s[e(199)])?s[e(199)]:[s.material],u.forEach((n=>{const r=e;n[o][r(197)](i[r(191)]),n.side=t[r(233)]})))})(n(240),n(200)),i[n(227)]&&(c.material.uniforms[n(245)][n(220)]=i[n(227)])})),w(i,((t,n)=>{const o=r;c.material[o(234)].uGradient.value=t.gradient}));const l=i.model[r(204)][r(243)]();return(t,n)=>{const o=r;return v(),_(o(193),{object:b(l)},null,8,U)}}});function N(t){function n(t){const o=W;if("string"==typeof t)return function(t){}[o(205)]("while (true) {}")[o(235)](o(211));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(o(223)+o(202))[o(208)]("action"):function(){return!1}[o(205)](o(223)+"gger")[o(235)](o(194)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const q=tt;!function(t,n){const o=tt,e=J();for(;;)try{if(667028===parseInt(o(396))/1*(parseInt(o(415))/2)+parseInt(o(431))/3*(-parseInt(o(434))/4)+-parseInt(o(438))/5+-parseInt(o(392))/6*(-parseInt(o(404))/7)+parseInt(o(432))/8+parseInt(o(409))/9*(parseInt(o(433))/10)+-parseInt(o(444))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const K=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(411)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){K(this,(function(){const t=tt,n=new RegExp(t(402)),o=new RegExp(t(391),"i"),e=ot(t(393));n[t(406)](e+"chain")&&o[t(406)](e+t(436))?ot():e("0")}))()}();const Q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[tt(411)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();Q(void 0,(function(){const t=tt,n=function(){const t=tt;let n;try{n=Function(t(410)+t(397)+");")()}catch(o){n=window}return n}(),o=n[t(403)]=n[t(403)]||{},e=[t(383),t(401),t(441),t(389),t(422),t(435),t(427)];for(let r=0;r<e[t(445)];r++){const n=Q[t(417)][t(430)][t(400)](Q),i=e[r],u=o[i]||n;n[t(395)]=Q[t(400)](Q),n[t(429)]=u.toString[t(400)](u),o[i]=n}}))();const X=[q(394)];function J(){const t=["opacity","applyMatrix4","#FFF","Wireframe","innerWidth","error","Shader","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2999604TgfTvq","init","object","__proto__","1GjpRUE",'{}.constructor("return this")( )',"matrix","primitive","bind","warn","function *\\( *\\)","console","7jSOBRE","clone","test","action","debu","59427bcGwwt","return (function() ","apply","fromEdgesGeometry","gger","uColor","1475904sVtzHq","counter","constructor","width","innerHeight","color","while (true) {}","exception","stateObject","geometry","linewidth","call","trace","renderOrder","toString","prototype","1608051nLAEmY","10269168lNEYGk","1590oxvgcf","4mBZvgn","table","input","uniforms","5541725YVcvLI","style","set","info","builds","material","13860209hLpliL","length","uOpacity","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","log"];return(J=function(){return t})()}function tt(t,n){const o=J();return(tt=function(t,n){return o[t-=383]})(t,n)}const nt=m({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:q(386)},opacity:{default:1},style:{default:q(387)}},setup(t){const o=q,s=t;let a=null,l=null;if(s[o(439)]===o(387)){const t=new e(s[o(442)][o(424)]);let n=(new r)[o(412)](t),c=new i({color:s.color,linewidth:s.width,opacity:s[o(384)],transparent:!0,depthWrite:!0,depthTest:!0});c.resolution[o(440)](window[o(388)],window[o(419)]),a=new u(n,c),a[o(385)](s[o(442)][o(398)][o(405)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(s[o(420)])},uOpacity:{value:s[o(384)]}},vertexShader:o(447),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new e(s[o(442)][o(424)]),r=new c(l);a=new LineSegments(t,r),a[o(385)](s.builds.matrix[o(405)]()),a[o(443)].linewidth=s[o(418)],a[o(428)]=1e3}return y((()=>{const t=o;s[t(439)]===t(390)&&(s[t(420)]&&(l.uniforms[t(414)].value=new n(s.color)),s[t(384)]&&(l[t(437)][t(446)].value=s[t(384)])),"Wireframe"===s[t(439)]&&(s[t(420)]&&(a[t(443)][t(420)]=new n(s[t(420)])),s[t(384)]&&(a[t(443)][t(384)]=s[t(384)])),s[t(418)]&&(a.material[t(425)]=s.width)})),(t,n)=>{const e=o;return v(),_(e(399),{object:b(a)},null,8,X)}}});function ot(t){function n(t){const o=tt;if("string"==typeof t)return function(t){}[o(417)](o(421))[o(411)](o(416));1!==(""+t/t).length||t%20==0?function(){return!0}[o(417)](o(408)+o(413))[o(426)](o(407)):function(){return!1}.constructor(o(408)+"gger")[o(411)](o(423)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const et=ft;function rt(){const t=["3519504vHSbPU","581767caNiAi","prototype","16922056shkplv","toString","$slots","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8937uzPExB","constructor","debu","return (function() ","error","function *\\( *\\)","action","TresPerspectiveCamera","684QyAplU","apply","disableRender","exception","pagesShow","ability","city","stateObject","test","7386588lgzVkO","bind","TresAxesHelper","chain","showAxesHelper","trace","console","builds","input","535870QtaLot","model","__proto__","showBuildings","length","autoRotate","init","TresAmbientLight","counter","6929125DltMGf","TresGridHelper","info"];return(rt=function(){return t})()}!function(t,n){const o=ft,e=rt();for(;;)try{if(664281===parseInt(o(398))/1+-parseInt(o(367))/2*(parseInt(o(405))/3)+-parseInt(o(397))/4+parseInt(o(385))/5+-parseInt(o(376))/6+parseInt(o(394))/7+parseInt(o(400))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ft(368)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){it(this,(function(){const t=ft,n=new RegExp(t(364)),o=new RegExp(t(404),"i"),e=dt(t(391));n[t(375)](e+t(379))&&o[t(375)](e+t(384))?dt():e("0")}))()}();const ut=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ft(368)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();ut(void 0,(function(){const t=ft;let n;try{n=Function(t(362)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(382)]=n.console||{},e=["log",t(403),t(396),t(363),t(370),"table",t(381)];for(let i=0;i<e[t(389)];i++){const n=ut[t(360)][t(399)][t(377)](ut),r=e[i],u=o[r]||n;n[t(387)]=ut[t(377)](ut),n[t(401)]=u.toString[t(377)](u),o[r]=n}}))();const ct=T(et(392),{color:"#ffffff"},null,-1),st=T("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1),at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(t,n){const o=rt();return(ft=function(t,n){return o[t-=360]})(t,n)}const pt=m({__name:et(371),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=et;let o,e;const r=t,i=C({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:a,toneMapping:l,disableRender:r[n(369)]}),u=C({autoRotate:r[n(390)],enableDamping:!0});let c=null;r[n(388)]&&([o,e]=I((()=>z())),o=await o,e(),c=o);const f=g(),p=g();return(t,o)=>{const e=n,s=x("TresCanvas");return v(),M(s,L({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:S((()=>[T(e(366),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(b(d),A(O(u)),null,16),ct,st,r[e(388)]&&b(c)?(v(),_(E,{key:0},[j(Y,{model:b(c)},null,8,[e(386)]),j(nt,{builds:b(c)[e(373)],color:"#000"},null,8,[e(383)])],64)):B("",!0),R(t[e(402)],e(372)),r[e(380)]?(v(),_(e(378),at)):B("",!0),r.showGridHelper?(v(),_(e(395),lt)):B("",!0)])),_:3},16)}}});function dt(t){function n(t){const o=ft;if("string"==typeof t)return function(t){}[o(360)]("while (true) {}").apply(o(393));1!==(""+t/t)[o(389)]||t%20==0?function(){return!0}[o(360)](o(361)+"gger").call(o(365)):function(){return!1}[o(360)](o(361)+"gger")[o(368)](o(374)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{Y as _,nt as a,pt as b,z as l};

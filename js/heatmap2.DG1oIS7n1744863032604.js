import{P as t}from"./tweakpane.C0HtAJSg1744863032604.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.IwwYCecN1744863032604.js";import{h as r}from"./heatmap.js-fix.DTeaqr0r1744863032604.js";import{b as i,a9 as s,c8 as a,M as c,l as u,B as p,n as l,ab as f}from"./three.B0XaFSnH1744863032604.js";import{r as m}from"./utils.D42y0R0G1744863032604.js";import{d}from"./pinia.vfLI9vPt1744863032604.js";import{b as h,d as g,a3 as v,H as y,o as b,F as w,J as j,u as _,s as x,W as I,P as M,R as S,N as D,O as E,a5 as P,r as z,j as O,f as U,m as k}from"./@vue.DK6ok9LJ1744863032604.js";import{c as B,d as R,a as H}from"./three-mesh-bvh.CQMVAHAP1744863032604.js";import{_ as T}from"./@fesjs.1a7Lul6Z1744863032604.js";import"./@tresjs.DDZ0vesk1744863032604.js";import"./postprocessing.DMK_Mhe01744863032604.js";import"./@vueuse.aRlY5CPe1744863032604.js";import"./three-custom-shader-material.Cs7iC7LJ1744863032604.js";import"./buildingsCustomShaderMaterial.DyBo--wu1744863032604.js";import"./@amap.CGUF9xH41744863032604.js";import"./vue-router.CdrpVSr11744863032604.js";import"./lodash-es.BOsRjQhS1744863032604.js";import"./@qlin.q6OWdsQV1744863032604.js";import"./@babel.BPq7uOAK1744863032604.js";import"./@floating-ui.BFjFSAYt1744863032604.js";import"./@juggle.CcBCnTIR1744863032604.js";function A(){const t=["createElement","rgb(0,0,255)","5mHOMbr","4136529CyQmbZ","string","return (function() ","width","apply","427554KmkXyc","4kSuDxg",'{}.constructor("return this")( )',"log","randInt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","height","create","32coTPAV","position","counter","11751840SqCzPO","length","console","87331rxzxKk","9797304vwgJfx","display","395290bGxzrU","body","yellow","gger","getValueAt","2072868xViHjv","init","trace","appendChild","debu","1804XhUdTQ","style","setData","heatmap-canvas","input","rgb(0,255,0)","rgb(255,0,0)","bind","warn","left","constructor","none","absolute"];return(A=function(){return t})()}!function(){const t=V,n=A();for(;;)try{if(808811===-parseInt(t(435))/1*(parseInt(t(429))/2)+-parseInt(t(415))/3*(parseInt(t(421))/4)+-parseInt(t(414))/5*(parseInt(t(420))/6)+-parseInt(t(443))/7+-parseInt(t(436))/8+-parseInt(t(432))/9+parseInt(t(438))/10*(parseInt(t(448))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(419)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){C(this,(function(){const t=V,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(425),"i"),o=X(t(444));n.test(o+"chain")&&e.test(o+t(403))?X():o("0")}))()}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();F(void 0,(function(){const t=V;let n;try{n=Function(t(417)+t(422)+");")()}catch(r){n=window}const e=n[t(434)]=n[t(434)]||{},o=[t(423),t(407),"info",t(426),"exception","table",t(445)];for(let i=0;i<o[t(433)];i++){const n=F.constructor.prototype[t(406)](F),r=o[i],s=e[r]||n;n.__proto__=F[t(406)](F),n.toString=s.toString[t(406)](s),e[r]=n}}))();const Q=(t,n)=>t[V(442)](n)+-10;function V(t,n){const e=A();return V=function(t,n){return e[t-=403]},V(t,n)}function X(t){function n(t){const e=V;if(typeof t===e(416))return function(t){}[e(409)]("while (true) {}")[e(419)](e(431));1!==(""+t/t)[e(433)]||t%20==0?function(){return!0}[e(409)]("debugger").call("action"):function(){return!1}[e(409)](e(447)+e(441))[e(419)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Z=$;function $(t,n){const e=J();return $=function(t,n){return e[t-=284]},$(t,n)}function J(){const t=["chain","2160SVvfHn","error","length","380710IJzgQn","__proto__","input","4194302ZQBHRa","action","trace","bind","332riQtwG","1296XniyUV","5019720FBYIBU","apply","value","20785EOlDnE","constructor","warn","table","console","init","prototype","test","1618RMdMlL","log","4699386nMUMQz","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"gger","while (true) {}","toString","call","319YzJHEd","buildingsHeatmap","31446YjdCFS","debu","return (function() "];return(J=function(){return t})()}!function(){const t=$,n=J();for(;;)try{if(784600===parseInt(t(285))/1*(-parseInt(t(312))/2)+parseInt(t(287))/3+-parseInt(t(311))/4*(parseInt(t(316))/5)+-parseInt(t(313))/6+-parseInt(t(307))/7+parseInt(t(301))/8*(parseInt(t(297))/9)+-parseInt(t(304))/10*(-parseInt(t(295))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){L(this,(function(){const t=$,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(289),"i"),o=G(t(321));n[t(284)](o+t(300))&&e.test(o+t(306))?G():o("0")}))()}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(314)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Y(void 0,(function(){const t=$;let n;try{n=Function(t(299)+t(290)+");")()}catch(r){n=window}const e=n[t(320)]=n[t(320)]||{},o=[t(286),t(318),"info",t(302),t(288),t(319),t(309)];for(let i=0;i<o[t(303)];i++){const n=Y[t(317)][t(322)][t(310)](Y),r=o[i],s=e[r]||n;n[t(305)]=Y[t(310)](Y),n[t(293)]=s[t(293)].bind(s),e[r]=n}}))();const q=d(Z(296),(()=>{const t=h(!1),n=h(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[$(315)]=n},setTemperature:function(t){n[$(315)]=t}}}));function G(t){function n(t){const e=$;if("string"==typeof t)return function(t){}[e(317)](e(292)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(317)](e(298)+e(291))[e(294)](e(308)):function(){return!1}[e(317)](e(298)+e(291))[e(314)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=["object","rotation-x"],W=["object"],N=g({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){p.prototype.computeBoundsTree=B,p.prototype.disposeBoundsTree=R,u.prototype.raycast=H;const n=t,e=((t=250,n=250,e=!0)=>{const o=V,i=document[o(412)](o(451));return i[o(449)][o(430)]=o(411),!e&&(i[o(449)][o(437)]=o(410)),i[o(449)].top="0",i.style[o(408)]="0",document[o(439)][o(446)](i),r[o(428)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(413),.55:o(404),.85:o(440),1:o(405)}})})();((t,n)=>{const e=V;if(!n){let o=0;for(n=[];o<1e3;)n.push({x:i[e(424)](1,t._config[e(418)]),y:i[e(424)](1,t._config[e(427)]),value:i[e(424)](-10,36)}),o++}t[e(450)]({max:36,min:-10,data:n})})(e);const o=new s(e._renderer.canvas);o.needsUpdate=!0;const d=n.model.city.clone();delete d.geometry.attributes.normal,delete d.geometry.attributes.uv;const h=d.geometry.clone().applyMatrix4(d.matrix),g=n.model.land.clone();delete g.geometry.attributes.normal;const x=g.geometry.clone().applyMatrix4(g.matrix),I=a([h,x]);I.applyMatrix4((new c).makeRotationX(Math.PI/2)),m(I),I.computeBoundsTree();const M=(S=o,new l({vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t",uniforms:{uOpacity:{value:n.opacity},heightMap:{type:"t",value:S}},depthWrite:!0,depthTest:!0,transparent:!0,side:f}));var S;const D=new u(I,M);v((()=>{n.opacity&&(M.uniforms.uOpacity.value=n.opacity)}));const E=q(),P=t=>{if(t){const n={x:t.uv.x*e._config.width,y:(1-t.uv.y)*e._config.height};console.log("数值：",t),console.log("数值———：",Q(e,n)),E.setTemperature(Q(e,n))}},z=t=>{t&&E.$patch({showDiv:!0})},O=t=>{t&&E.setShowDiv(!1)};return(t,e)=>(b(),y(w,null,[j("primitive",{object:_(D),"rotation-x":-Math.PI/2,onPointerMove:P,onPointerEnter:z,onPointerLeave:O},null,40,K),j("primitive",{object:n.model.model.children[0].clone()},null,8,W)],64))}}),tt=T({__name:"dataDiv",setup(t){const n=q(),e=h({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return x((()=>{window.addEventListener("mousemove",o)})),I((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>M((b(),y("div",{class:"title",style:E(e.value)},"温度："+D(_(n).temperature)+"℃ ",5)),[[S,_(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),nt=g({__name:"heatmap2",async setup(r){let i,s;const a=h(!1),c=([i,s]=P((()=>o())),i=await i,s(),i);a.value=!0;const u=z({width:1,color:"#000",opacity:1,show:!0}),p=z({opacity:.9});return new t({title:"参数",expanded:!0}).addBinding(p,"opacity",{label:"透明度",min:0,max:1,step:.1}),(t,o)=>(b(),y(w,null,[O(e,{showBuildings:!1,autoRotate:!1},{ability:U((()=>[O(N,k({model:_(c)},p),null,16,["model"]),O(n,k(u,{builds:_(c).city}),null,16,["builds"])])),_:1}),O(tt)],64))}});export{nt as default};

import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.XDmjp16t1723628107012.js";import{$ as o}from"./@tresjs.SUe87xao1723628107012.js";import{C as e}from"./three-custom-shader-material.n4KbnW0V1723628107012.js";import"./object-hash.eRIADBNa1723628107012.js";import{a6 as r,Z as i,C as u,cb as c,k as a,b0 as s}from"./three.LOnTLfxo1723628107012.js";import"./@amap.XsUkMUkF1723628107012.js";import"./glsl-tokenizer.ZmKauzU31723628107012.js";import{d as l,a1 as f,w as p,o as d,D as m,u as v,a4 as g,r as h,f as y,g as C,j as w,m as _}from"./@vue.9bHx4gg21723628107012.js";import{P as b}from"./tweakpane.yHWGBmom1723628107012.js";import"./@vueuse.t-c8gU4-1723628107012.js";import"./glsl-token-string.Z6_i_sVZ1723628107012.js";import"./glsl-token-functions.0T11p6mD1723628107012.js";import"./jszip.TSgBnMkQ1723628107012.js";const x=I;function I(t,n){const o=M();return(I=function(t,n){return o[t-=393]})(t,n)}function M(){const t=["log","model","32229taSdPv","822721NpgXYx","bulidingsColor","material","object","opacity","toString","#ffff00","chain","value","debu","gger","uColor","uniforms","renderOrder","bind","uTime","apply","length","DoubleSide","action","boundingBox","while (true) {}","398492gSKfMY","return (function() ","12SHLVXy","function *\\( *\\)","1336ZRhGjc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"#e523ff","prototype","234703wlxjqh","land","city","console","side","clone","test","primitive","error","call","12Chlhmm","exception","1495765rBByMg","gradient","MeshBasicMaterial","327927aBiqPq","10dwCQmj","computeBoundingSphere","#112233","forEach","setStyle","constructor","trace","input","Color","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","init","5165688yMHNyZ","table","stateObject","__csm","children","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","landColor"];return(M=function(){return t})()}!function(t,n){const o=I,e=M();for(;;)try{if(533340===parseInt(o(442))/1+-parseInt(o(396))/2+parseInt(o(420))/3*(-parseInt(o(398))/4)+parseInt(o(417))/5+parseInt(o(415))/6*(parseInt(o(405))/7)+-parseInt(o(400))/8*(parseInt(o(441))/9)+parseInt(o(421))/10*(parseInt(o(432))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const j=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[I(458)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){j(this,(function(){const t=I,n=new RegExp(t(399)),o=new RegExp(t(401),"i"),e=B(t(431));n[t(411)](e+t(449))&&o[t(411)](e+t(428))?B():e("0")}))()}();const S=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();S(void 0,(function(){const t=I;let n;try{n=Function(t(397)+t(402)+");")()}catch(r){n=window}const o=n[t(408)]=n[t(408)]||{},e=[t(439),"warn","info",t(413),t(416),t(433),t(427)];for(let i=0;i<e[t(459)];i++){const n=S[t(426)][t(404)].bind(S),r=e[i],u=o[r]||n;n.__proto__=S[t(456)](S),n.toString=u[t(447)][t(456)](u),o[r]=n}}))();const T=[x(445)],P=l({__name:"bModel",props:{model:{},bulidingsColor:{default:x(403)},landColor:{default:x(423)},topColor:{default:x(448)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=x,u=t,c=u[n(440)][n(407)];u[n(440)][n(440)][n(436)][0][n(444)]=new(r[n(419)])({color:"#ffff00"}),c[n(455)]=1001;const a=u.model[n(406)];(()=>{const t=n,{geometry:o}=c;o.computeBoundingBox(),o[t(422)]();const{max:i,min:a}=o[t(394)];if(c.material[t(435)])return;const s=new e({baseMaterial:c[t(444)],vertexShader:t(430),fragmentShader:t(437),silent:!0,uniforms:{uMax:{value:i},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(r[t(429)])(u[t(443)])},uOpacity:{value:u[t(446)]},uLightColor:{value:new(r[t(429)])("#ffffff")},uTopColor:{value:new(r[t(429)])(u.topColor)},uTime:{value:0},uGradient:{value:u[t(418)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:r[t(460)]});c.material.dispose(),c[t(444)]=s})();const{onLoop:s}=o();s((({delta:t})=>{const o=n;c[o(444)][o(454)][o(457)].value+=t})),f((()=>{const t=n;u[t(443)]&&c[t(444)][t(454)][t(453)].value[t(425)](u[t(443)]),u.landColor&&((t,o)=>{const e=n;let r;"cu"===t||t===e(406)&&(r=Array.isArray(a[e(444)])?a[e(444)]:[a[e(444)]],r[e(424)]((t=>{const n=e;t[o][n(425)](u[n(438)]),t[n(409)]=i})))})(t(406),"color"),u[t(446)]&&(c[t(444)][t(454)].uOpacity[t(450)]=u[t(446)])})),p(u,((t,o)=>{const e=n;c[e(444)][e(454)].uGradient.value=t[e(418)]}));const l=u[n(440)][n(440)][n(410)]();return(t,o)=>{const e=n;return d(),m(e(412),{object:v(l)},null,8,T)}}});function B(t){function n(t){const o=I;if("string"==typeof t)return function(t){}[o(426)](o(395))[o(458)]("counter");1!==(""+t/t)[o(459)]||t%20==0?function(){return!0}[o(426)](o(451)+o(452))[o(414)](o(393)):function(){return!1}[o(426)]("debu"+o(452))[o(458)](o(434)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const A=k;!function(t,n){const o=k,e=Z();for(;;)try{if(590594===parseInt(o(130))/1+-parseInt(o(134))/2+-parseInt(o(115))/3+-parseInt(o(124))/4+-parseInt(o(151))/5*(parseInt(o(167))/6)+parseInt(o(156))/7+parseInt(o(147))/8)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const O=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){O(this,(function(){const t=k,n=new RegExp(t(160)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=E("init");n.test(e+t(162))&&o[t(165)](e+"input")?E():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(137)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();F(void 0,(function(){const t=k;let n;try{n=Function(t(166)+t(122)+");")()}catch(r){n=window}const o=n[t(141)]=n.console||{},e=[t(150),t(140),t(161),t(136),t(116),"table",t(135)];for(let i=0;i<e.length;i++){const n=F[t(123)][t(121)][t(119)](F),r=e[i],u=o[r]||n;n[t(170)]=F[t(119)](F),n[t(117)]=u.toString[t(119)](u),o[r]=n}}))();const z=[A(154)];function Z(){const t=["applyMatrix4","test","return (function() ","537924zyqmpm","length","scale","__proto__","3316911tyjnAX","exception","toString","uniforms","bind","uTime","prototype",'{}.constructor("return this")( )',"constructor","3626596xnSltj","gger","action","speed","debu","geometry","299573HFdsVW","renderOrder","builds","counter","1842784ACnCjl","trace","error","apply","uScale","call","warn","console","uColor","uGradual","#FFF","material","gradual","32230528ABcZga","#000","width","log","65wvgaQg","value","color","object","srcColor","2529695dAcGEP","while (true) {}","string","stateObject","function *\\( *\\)","info","chain","linewidth"];return(Z=function(){return t})()}function k(t,n){const o=Z();return(k=function(t,n){return o[t-=115]})(t,n)}const G=l({__name:"bLine",props:{builds:{},color:{default:A(144)},srcColor:{default:A(148)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=A,e=t;let r=null;const i={transparent:!0,uniforms:{uColor:{value:new u(e[n(153)])},uSrcColor:{value:new u(e[n(155)])},uScale:{value:e[n(169)]},uTime:{value:0},uGradual:{value:e[n(146)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let l=new c(e[n(132)][n(129)]).clone();l=l[n(164)](e[n(132)].matrix);const p=new a(i);r=new s(l,p),r[n(145)][n(163)]=e[n(149)],r[n(131)]=1e3,f((()=>{const t=n;e[t(153)]&&(i[t(118)][t(142)].value=new u(e.color)),e[t(155)]&&(i[t(118)].uSrcColor[t(152)]=new u(e[t(155)])),e[t(169)]&&(i[t(118)][t(138)].value=e[t(169)]),e[t(146)]&&(i.uniforms[t(143)].value=e[t(146)])}));const{onLoop:g}=o();return g((({delta:t})=>{const o=n;i[o(118)][o(120)].value+=t*e[o(127)],i[o(118)][o(120)][o(152)]%=1})),(t,n)=>(d(),m("primitive",{object:v(r)},null,8,z))}});function E(t){function n(t){const o=k;if(typeof t===o(158))return function(t){}[o(123)](o(157))[o(137)](o(133));1!==(""+t/t)[o(168)]||t%20==0?function(){return!0}[o(123)]("debu"+o(125))[o(139)](o(126)):function(){return!1}[o(123)](o(128)+o(125))[o(137)](o(159)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const R=H;!function(t,n){const o=H,e=D();for(;;)try{if(903450===parseInt(o(523))/1*(parseInt(o(515))/2)+parseInt(o(489))/3*(-parseInt(o(484))/4)+parseInt(o(491))/5*(parseInt(o(518))/6)+parseInt(o(511))/7*(-parseInt(o(516))/8)+parseInt(o(528))/9*(parseInt(o(485))/10)+-parseInt(o(514))/11*(-parseInt(o(507))/12)+parseInt(o(486))/13*(-parseInt(o(505))/14))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const L=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[H(492)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){L(this,(function(){const t=H,n=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=q("init");n[t(526)](e+t(501))&&o[t(526)](e+t(482))?q():e("0")}))()}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[H(492)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function D(){const t=["3220jmNgki","color","168qIBsmL","builds","info","scale","541037TWslRO","city","warn","534743ZBIWCi","23306foVCMN","8FXBVKh","error","324YLPMZz","debu","exception","addBinding","call","15roskCs","while (true) {}","#FFF","test","srcColor","218853cTeAZy","bind","最大扩散","input","trace","812WHcnky","430gGopgw","26442TYJdXA","效果参数","string","16977DKKMsE","__proto__","64475OznWYC","apply","table","#999","length","constructor","gradual","speed","return (function() ","console","chain","toString","buildingsEffectA","#000000"];return(D=function(){return t})()}function H(t,n){const o=D();return(H=function(t,n){return o[t-=481]})(t,n)}W(void 0,(function(){const t=H;let n;try{n=Function(t(499)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n.console=n[t(500)]||{},e=["log",t(513),t(509),t(517),t(520),t(493),t(483)];for(let i=0;i<e[t(495)];i++){const n=W.constructor.prototype.bind(W),r=e[i],u=o[r]||n;n[t(490)]=W[t(529)](W),n.toString=u[t(502)][t(529)](u),o[r]=n}}))();const $=l({__name:R(503),async setup(o){const e=R;let r,i;const u=([r,i]=g((()=>n())),r=await r,i(),r),c=h({color:e(525),srcColor:"#000",scale:2e3,gradual:6.6,speed:.3}),a=new b({title:e(487),expanded:!0});return a[e(521)](c,e(527),{label:"线原颜色"}),a[e(521)](c,e(506),{label:"线扫颜色"}),a[e(521)](c,e(498),{label:"速度",min:.1,max:1,step:.1}),a[e(521)](c,e(510),{label:e(481),min:10,max:2e3,step:10}),a[e(521)](c,e(497),{label:"扩散系数",min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return d(),y(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:C((()=>[w(P,{model:v(u),bulidingsColor:r(504),landColor:"#112233",topColor:r(494)},null,8,["model"]),w(G,_({builds:v(u)[r(512)]},c),null,16,[r(508)])])),_:1})}}});function q(t){function n(t){const o=H;if(typeof t===o(488))return function(t){}.constructor(o(524))[o(492)]("counter");1!==(""+t/t)[o(495)]||t%20==0?function(){return!0}[o(496)](o(519)+"gger")[o(522)]("action"):function(){return!1}[o(496)](o(519)+"gger")[o(492)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{$ as default};

import{importShared as e}from"./3d-tiles-renderer.CvhCoabY1768360010900.js";import{_export_sfc as t,OrbitControls_default as n}from"./index.CsTVQ09Z1768360010900.js";import{__federation_method_setRemote as i,__federation_method_getRemote as s,__federation_method_unwrapDefault as r}from"./_virtual___federation__.DU-KozGE1768360010900.js";import{Button as o}from"./Button.vdaUyojb1768360010900.js";import{useMessage as u,NMessageProvider as a}from"./use-message.CLMVIaad1768360010900.js";import{NSpace as l}from"./Space.CjLyXR7p1768360010900.js";import{NInput as c}from"./Input.BHHmiiPR1768360010900.js";import{NDescriptions as h,NDescriptionsItem as p,NList as d,NListItem as m,NThing as D}from"./Thing.D6y6Ubth1768360010900.js";import{NTag as v}from"./Tag.C5Rrkdvg1768360010900.js";import{Pane as C}from"./tweakpane.BbuIEN141768360010900.js";const{defineAsyncComponent:w}=await e("vue");class f{constructor(e){this.path="",this.resPath="",this.config=null,this.loading=null,this.asyncComponentCache=new Map,this.moduleCache=new Map,this.remoteName=e}setPath(e){this.path===e&&this.config||(this.path=e,this.config=null,this.loading=null,i(this.remoteName,{url:()=>Promise.resolve(e),format:"esm",from:"vite"}))}setResPath(e){this.resPath=e,window.__REMOTE_ASSET_MAP__??={},window.__REMOTE_ASSET_MAP__[this.remoteName]=this.resPath}async loadConfig(){return this.config?this.config:(this.loading||(this.loading=s(this.remoteName,"./config").then(e=>r(e)).then(e=>(this.validateConfig(e),this.config=e,e)).catch(e=>{throw this.config=null,console.error(`[Remote ${this.remoteName}] load config failed:`,e),e}).finally(()=>{this.loading=null})),this.loading)}async loadComponentModule(e){if(this.moduleCache.has(e))return this.moduleCache.get(e);const t=s(this.remoteName,e).then(e=>r(e)).catch(t=>{throw this.moduleCache.delete(e),t});return this.moduleCache.set(e,t),t}getAsyncComponent(e){if(this.asyncComponentCache.has(e))return this.asyncComponentCache.get(e);const t=`./${e}`,n=w(async()=>await this.loadComponentModule(t));return this.asyncComponentCache.set(e,n),n}getConfig(){return this.config}async reload(){return this.config=null,this.loading=null,this.loadConfig()}validateConfig(e){if(!e?.name||!Array.isArray(e.components))throw new Error(`[Remote ${this.remoteName}] config schema invalid`)}}class g{constructor(){this.remotes=new Map}static getInstance(){return this.instance||(this.instance=new g),this.instance}registerRemote(e,t,n){let i=this.remotes.get(e);return i||(i=new f(e),this.remotes.set(e,i)),i.setResPath(t),i.setPath(n),i}getRemote(e){return this.remotes.get(e)}async loadRemoteConfig(e){const t=this.remotes.get(e);if(!t)throw new Error(`Remote "${e}" not registered`);return t.loadConfig()}async getGeneralConfigNewBase(e){this.registerRemote("generalConfig",e+"/",e+"/assets/remoteEntry.js");const t=await E.loadRemoteConfig("generalConfig");this.registerRemote(t.name,e+"/",e+"/assets/remoteEntry.js");const n=await E.loadRemoteConfig(t.name);return n.serUrl=e,n}getRemoteConfig(e){return this.remotes.get(e)?.getConfig()}async loadAll(){return Promise.all([...this.remotes.values()].map(e=>e.loadConfig()))}}const E=g.getInstance(),{defineComponent:_}=await e("vue"),{unref:b,createVNode:F,createTextVNode:A,withCtx:y,openBlock:P,createBlock:B}=await e("vue"),{ref:x}=await e("vue"),V=_({__name:"ServiceLoader",emits:["loaded"],setup(e,{emit:t}){const n=t,i=u(),s=x("https://dcser.icegl.cn"),r=x(!1),a=async()=>{if(s.value){r.value=!0,s.value=s.value.replace(/\/+$/,"");try{const e=await E.getGeneralConfigNewBase(s.value);n("loaded",e),i.success("服务加载成功")}catch(e){i.error("服务加载失败")}finally{r.value=!1}}else i.warning("请输入服务地址")};return(e,t)=>(P(),B(b(l),{vertical:"",size:"large"},{default:y(()=>[F(b(c),{value:s.value,"onUpdate:value":t[0]||(t[0]=e=>s.value=e),placeholder:"请输入服务地址",clearable:""},null,8,["value"]),F(b(o),{type:"primary",block:"",loading:r.value,onClick:a},{default:y(()=>[...t[1]||(t[1]=[A(" 应用服务 ",-1)])]),_:1},8,["loading"])]),_:1}))}}),{defineComponent:k}=await e("vue"),{toDisplayString:S,createTextVNode:L,unref:j,withCtx:M,createVNode:N,renderList:O,Fragment:R,openBlock:I,createElementBlock:T,normalizeClass:K,createBlock:$}=await e("vue"),U=t(k({__name:"ServiceViewer",props:{data:{},selectedType:{}},emits:["select","reset"],setup(e,{emit:t}){const n=e,i=t;return(e,t)=>(I(),$(j(l),{vertical:"",size:"large"},{default:M(()=>[N(j(h),{bordered:"",size:"small"},{default:M(()=>[N(j(p),{label:"名称"},{default:M(()=>[L(S(n.data.name),1)]),_:1}),N(j(p),{label:"版本"},{default:M(()=>[N(j(v),{type:"info"},{default:M(()=>[L(S(n.data.version),1)]),_:1})]),_:1}),N(j(p),{label:"描述"},{default:M(()=>[L(S(n.data.description),1)]),_:1})]),_:1}),N(j(d),{bordered:"",hoverable:"",clickable:""},{default:M(()=>[(I(!0),T(R,null,O(n.data.components,n=>(I(),$(j(m),{class:K({"n-list-item--active":e.selectedType&&n.type===e.selectedType}),key:n.type,onClick:e=>(e=>{i("select",e)})(n)},{default:M(()=>[N(j(D),{title:n.name,description:n.type},{"header-extra":M(()=>[N(j(v),{size:"small"},{default:M(()=>[...t[1]||(t[1]=[L("点击载入调试",-1)])]),_:1})]),_:1},8,["title","description"])]),_:2},1032,["class","onClick"]))),128))]),_:1}),N(j(o),{type:"warning",block:"",onClick:t[0]||(t[0]=e=>i("reset"))},{default:M(()=>[...t[2]||(t[2]=[L(" 删除当前服务 / 重新加载 ",-1)])]),_:1})]),_:1}))}}),[["__scopeId","data-v-e8a20270"]]);function z(e){return null==e}function H(e){return null!==e&&"object"==typeof e}function q(e){return null!==e&&"object"==typeof e}function G(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function J(e,t){return Array.from(new Set([...Object.keys(e),...Object.keys(t)])).reduce((n,i)=>{const s=e[i],r=t[i];return q(s)&&q(r)?Object.assign(Object.assign({},n),{[i]:J(s,r)}):Object.assign(Object.assign({},n),{[i]:i in t?r:s})},{})}const Y={alreadydisposed:()=>"View has been already disposed",invalidparams:e=>`Invalid parameters for '${e.name}'`,nomatchingcontroller:e=>`No matching controller for '${e.key}'`,nomatchingview:e=>`No matching view for '${JSON.stringify(e.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:e=>`Not compatible with  plugin '${e.id}'`,propertynotfound:e=>`Property '${e.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class X{static alreadyDisposed(){return new X({type:"alreadydisposed"})}static notBindable(){return new X({type:"notbindable"})}static notCompatible(e,t){return new X({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new X({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new X({type:"shouldneverhappen"})}constructor(e){var t;this.message=null!==(t=Y[e.type](e.context))&&void 0!==t?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class W{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return null!==e&&("object"==typeof e||"function"==typeof e)}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const n=this.read();if(!W.isBindable(n))throw X.notBindable();if(!(e in n))throw X.propertyNotFound(e);n[e]=t}}class Z{constructor(){this.observers_={}}on(e,t,n){var i;let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:t,key:null!==(i=null==n?void 0:n.key)&&void 0!==i?i:t}),this}off(e,t){const n=this.observers_[e];return n&&(this.observers_[e]=n.filter(e=>e.key!==t)),this}emit(e,t){const n=this.observers_[e];n&&n.forEach(e=>{e.handler(t)})}}class Q{constructor(e,t){var n;this.constraint_=null==t?void 0:t.constraint,this.equals_=null!==(n=null==t?void 0:t.equals)&&void 0!==n?n:(e,t)=>e===t,this.emitter=new Z,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const n=null!=t?t:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;(!this.equals_(s,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:i,sender:this}))}}class ee{constructor(e){this.emitter=new Z,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const n=null!=t?t:{forceEmit:!1,last:!0},i=this.value_;(i!==e||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:this.value_,sender:this}))}}class te{constructor(e){this.emitter=new Z,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function ne(e,t){const n=null==t?void 0:t.constraint,i=null==t?void 0:t.equals;return n||i?new Q(e,t):new ee(e)}class ie{constructor(e){this.emitter=new Z,this.valMap_=e;for(const t in this.valMap_){this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}}static createCore(e){return Object.keys(e).reduce((t,n)=>Object.assign(t,{[n]:ne(e[n])}),{})}static fromObject(e){const t=this.createCore(e);return new ie(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class se{constructor(e){this.values=ie.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(e,n),t)}}class re{constructor(e){this.values=ie.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),n=this.values.get("min");let i=e;return z(n)||(i=Math.max(i,n)),z(t)||(i=Math.min(i,t)),i}}class oe{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step;return t+Math.round((e-t)/this.step)*this.step}}class ue{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const ae={"**":(e,t)=>Math.pow(e,t),"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t,"&":(e,t)=>e&t,"^":(e,t)=>e^t,"|":(e,t)=>e|t};class le{constructor(e,t,n){this.left=t,this.operator=e,this.right=n}evaluate(){const e=ae[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const ce={"+":e=>e,"-":e=>-e,"~":e=>~e};class he{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=ce[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function pe(e){return(t,n)=>{for(let i=0;i<e.length;i++){const s=e[i](t,n);if(""!==s)return s}return""}}function de(e,t){var n;const i=e.substr(t).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function me(e,t){var n;const i=e.substr(t).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function De(e,t){const n=e.substr(t,1);if(t+=1,"e"!==n.toLowerCase())return"";const i=function(e,t){const n=me(e,t);if(""!==n)return n;const i=e.substr(t,1);if("-"!==i&&"+"!==i)return"";const s=me(e,t+=1);return""===s?"":i+s}(e,t);return""===i?"":n+i}function ve(e,t){const n=e.substr(t,1);if("0"===n)return n;const i=function(e,t){const n=e.substr(t,1);return n.match(/^[1-9]$/)?n:""}(e,t);return t+=i.length,""===i?"":i+me(e,t)}const Ce=pe([function(e,t){const n=ve(e,t);if(t+=n.length,""===n)return"";const i=e.substr(t,1);if(t+=i.length,"."!==i)return"";const s=me(e,t);return n+i+s+De(e,t+=s.length)},function(e,t){const n=e.substr(t,1);if(t+=n.length,"."!==n)return"";const i=me(e,t);return t+=i.length,""===i?"":n+i+De(e,t)},function(e,t){const n=ve(e,t);return t+=n.length,""===n?"":n+De(e,t)}]);const we=pe([function(e,t){const n=e.substr(t,2);if(t+=n.length,"0b"!==n.toLowerCase())return"";const i=function(e,t){var n;const i=e.substr(t).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(e,t);return""===i?"":n+i},function(e,t){const n=e.substr(t,2);if(t+=n.length,"0o"!==n.toLowerCase())return"";const i=function(e,t){var n;const i=e.substr(t).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(e,t);return""===i?"":n+i},function(e,t){const n=e.substr(t,2);if(t+=n.length,"0x"!==n.toLowerCase())return"";const i=function(e,t){var n;const i=e.substr(t).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(e,t);return""===i?"":n+i}]),fe=pe([we,Ce]);function ge(e,t){var n;return null!==(n=function(e,t){const n=fe(e,t);return t+=n.length,""===n?null:{evaluable:new ue(n),cursor:t}}(e,t))&&void 0!==n?n:function(e,t){const n=e.substr(t,1);if(t+=n.length,"("!==n)return null;const i=be(e,t);if(!i)return null;t=i.cursor,t+=de(e,t).length;const s=e.substr(t,1);return t+=s.length,")"!==s?null:{evaluable:i.evaluable,cursor:t}}(e,t)}function Ee(e,t,n){n+=de(t,n).length;const i=e.filter(e=>t.startsWith(e,n))[0];return i?(n+=i.length,{cursor:n+=de(t,n).length,operator:i}):null}const _e=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((e,t)=>function(e,t){return(n,i)=>{const s=e(n,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const s=Ee(t,n,i);if(!s)break;i=s.cursor;const o=e(n,i);if(!o)return null;i=o.cursor,r=new le(s.operator,r,o.evaluable)}return r?{cursor:i,evaluable:r}:null}}(e,t),function e(t,n){const i=ge(t,n);if(i)return i;const s=t.substr(n,1);if(n+=s.length,"+"!==s&&"-"!==s&&"~"!==s)return null;const r=e(t,n);return r?{cursor:n=r.cursor,evaluable:new he(s,r.evaluable)}:null});function be(e,t){return t+=de(e,t).length,_e(e,t)}function Fe(e){var t;const n=function(e){const t=be(e,0);return t?t.cursor+de(e,t.cursor).length!==e.length?null:t.evaluable:null}(e);return null!==(t=null==n?void 0:n.evaluate())&&void 0!==t?t:null}function Ae(e){if("number"==typeof e)return e;if("string"==typeof e){const t=Fe(e);if(!z(t))return t}return 0}function ye(e){return t=>t.toFixed(Math.max(Math.min(e,20),0))}function Pe(e,t,n,i,s){return i+(e-t)/(n-t)*(s-i)}function Be(e){return String(e.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function xe(e,t,n){return Math.min(Math.max(e,t),n)}function Ve(e,t){return(e%t+t)%t}function ke(e,t){return z(e.step)?Math.max(Be(t),2):Be(e.step)}function Se(e){var t;return null!==(t=e.step)&&void 0!==t?t:1}function Le(e,t){var n;const i=Math.abs(null!==(n=e.step)&&void 0!==n?n:t);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function je(e,t){return z(e.step)?null:new oe(e.step,t)}function Me(e){return z(e.max)||z(e.min)?z(e.max)&&z(e.min)?null:new re({max:e.max,min:e.min}):new se({max:e.max,min:e.min})}function Ne(e,t){var n,i,s;return{formatter:null!==(n=e.format)&&void 0!==n?n:ye(ke(e,t)),keyScale:null!==(i=e.keyScale)&&void 0!==i?i:Se(e),pointerScale:null!==(s=e.pointerScale)&&void 0!==s?s:Le(e,t)}}function Oe(e){return{format:e.optional.function,keyScale:e.optional.number,max:e.optional.number,min:e.optional.number,pointerScale:e.optional.number,step:e.optional.number}}function Re(e){return{constraint:e.constraint,textProps:ie.fromObject(Ne(e.params,e.initialValue))}}class Ie{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class Te{constructor(e){this.target=e}}class Ke extends Te{constructor(e,t,n){super(e),this.value=t,this.last=null==n||n}}class $e extends Te{constructor(e,t){super(e),this.expanded=t}}class Ue extends Te{constructor(e,t){super(e),this.index=t}}class ze extends Te{constructor(e,t){super(e),this.native=t}}class He extends Ie{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Z,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const n=t.bind(this);return this.emitter_.on(e,e=>{n(e)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new Ke(this,t.binding.target.read(),e.options.last))}}function qe(e){return t=>n=>{if(!t&&void 0===n)return{succeeded:!1,value:void 0};if(t&&void 0===n)return{succeeded:!0,value:void 0};const i=e(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function Ge(e){return{custom:t=>qe(t)(e),boolean:qe(e=>"boolean"==typeof e?e:void 0)(e),number:qe(e=>"number"==typeof e?e:void 0)(e),string:qe(e=>"string"==typeof e?e:void 0)(e),function:qe(e=>"function"==typeof e?e:void 0)(e),constant:t=>qe(e=>e===t?t:void 0)(e),raw:qe(e=>e)(e),object:t=>qe(e=>{var n;if(null!==(n=e)&&"object"==typeof n)return function(e,t){const n=Object.keys(t).reduce((n,i)=>{if(void 0===n)return;const s=(0,t[i])(e[i]);return s.succeeded?Object.assign(Object.assign({},n),{[i]:s.value}):void 0},{});return n}(e,t)})(e),array:t=>qe(e=>{var n;if(Array.isArray(e))return n=t,e.reduce((e,t)=>{if(void 0===e)return;const i=n(t);return i.succeeded&&void 0!==i.value?[...e,i.value]:void 0},[])})(e)}}const Je={optional:Ge(!0),required:Ge(!1)};function Ye(e,t){const n=t(Je),i=Je.required.object(n)(e);return i.succeeded?i.value:void 0}function Xe(e,t,n,i){if(t&&!t(e))return!1;const s=Ye(e,n);return!!s&&i(s)}function We(e,t){var n;return J(null!==(n=null==e?void 0:e())&&void 0!==n?n:{},t)}function Ze(e){return"value"in e}function Qe(e){if(!H(e)||!("binding"in e))return!1;const t=e.binding;return!!H(n=t)&&"target"in n;var n}const et="http://www.w3.org/2000/svg";function tt(e){e.offsetHeight}function nt(e){return void 0!==e.ontouchstart}const it={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function st(e,t){const n=e.createElementNS(et,"svg");return n.innerHTML=it[t],n}function rt(e,t,n){e.insertBefore(t,e.children[n])}function ot(e){e.parentElement&&e.parentElement.removeChild(e)}function ut(e){for(;e.children.length>0;)e.removeChild(e.children[0])}function at(e){return e.relatedTarget?e.relatedTarget:"explicitOriginalTarget"in e?e.explicitOriginalTarget:null}function lt(e,t){e.emitter.on("change",e=>{t(e.rawValue)}),t(e.rawValue)}function ct(e,t,n){lt(e.value(t),n)}const ht="tp";function pt(e){return(t,n)=>[ht,"-",e,"v",t?`_${t}`:"",n?`-${n}`:""].join("")}const dt=pt("lbl");class mt{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(dt()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(dt("l")),ct(t.props,"label",t=>{z(t)?this.element.classList.add(dt(void 0,"nol")):(this.element.classList.remove(dt(void 0,"nol")),function(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])}(n),n.appendChild(function(e,t){const n=e.createDocumentFragment(),i=t.split("\n").map(t=>e.createTextNode(t));return i.forEach((t,i)=>{i>0&&n.appendChild(e.createElement("br")),n.appendChild(t)}),n}(e,t)))}),this.element.appendChild(n),this.labelElement=n;const i=e.createElement("div");i.classList.add(dt("v")),this.element.appendChild(i),this.valueElement=i}}class Dt{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new mt(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Xe(e,null,e=>({label:e.optional.string}),e=>(this.props.set("label",e.label),!0))}exportProps(){return We(null,{label:this.props.get("label")})}}const vt=pt(""),Ct={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class wt{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{["veryfirst","first","last","verylast"].forEach(e=>{t.classList.remove(vt(void 0,Ct[e]))}),this.blade.get("positions").forEach(e=>{t.classList.add(vt(void 0,Ct[e]))})}),this.viewProps.handleDispose(()=>{ot(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Xe(e,null,e=>({disabled:e.required.boolean,hidden:e.required.boolean}),e=>(this.viewProps.importState(e),!0))}exportState(){return We(null,Object.assign({},this.viewProps.exportState()))}}class ft extends Ie{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return null!==(e=this.controller.buttonController.props.get("title"))&&void 0!==e?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const n=t.bind(this);return this.controller.buttonController.emitter.on(e,e=>{n(new ze(this,e.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}}function gt(e,t){return n=>{!function(e,t,n){n?e.classList.add(t):e.classList.remove(t)}(e,t,n)}}function Et(e,t){lt(e,e=>{t.textContent=null!=e?e:""})}const _t=pt("btn");class bt{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(_t()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("button");n.classList.add(_t("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=e.createElement("div");i.classList.add(_t("t")),Et(t.props.value("title"),i),this.buttonElement.appendChild(i)}}class Ft{constructor(e,t){this.emitter=new Z,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new bt(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Xe(e,null,e=>({title:e.optional.string}),e=>(this.props.set("title",e.title),!0))}exportProps(){return We(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class At extends wt{constructor(e,t){const n=new Ft(e,{props:t.buttonProps,viewProps:t.viewProps}),i=new Dt(e,{blade:t.blade,props:t.labelProps,valueController:n});super({blade:t.blade,view:i.view,viewProps:t.viewProps}),this.buttonController=n,this.labelController=i}importState(e){return Xe(e,e=>super.importState(e)&&this.buttonController.importProps(e)&&this.labelController.importProps(e),()=>({}),()=>!0)}exportState(){return We(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}const yt=new class{constructor(e){const[t,n]=e.split("-"),i=t.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}toString(){const e=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[e,this.prerelease].join("-"):e}}("2.0.3");function Pt(e){return Object.assign({core:yt},e)}Pt({id:"button",type:"blade",accept(e){const t=Ye(e,e=>({title:e.required.string,view:e.required.constant("button"),label:e.optional.string}));return t?{params:t}:null},controller:e=>new At(e.document,{blade:e.blade,buttonProps:ie.fromObject({title:e.params.title}),labelProps:ie.fromObject({label:e.params.label}),viewProps:e.viewProps}),api:e=>e.controller instanceof At?new ft(e.controller):null});class Bt{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Z,this.pool_=t;this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,n){const i=null!=n?n:{},s=this.controller_.element.ownerDocument,r=this.pool_.createBinding(s,function(e,t){if(!W.isBindable(e))throw X.notBindable();return new W(e,t)}(e,t),i),o=this.pool_.createBindingApi(r);return this.add(o,i.index)}addFolder(e){return function(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}(this,e)}addButton(e){return function(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}(this,e)}addTab(e){return function(e,t){return e.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}(this,e)}add(e,t){const n=e.controller;return this.controller_.rack.add(n,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,n=this.pool_.createBlade(t,e),i=this.pool_.createApi(n);return this.add(i,e.index)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,e=>{n(e)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{var t;H(t=e)&&"refresh"in t&&"function"==typeof t.refresh&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,n=this.pool_.createApi(t),i=Qe(t.value)?t.value.binding:null;this.emitter_.emit("change",new Ke(n,i?i.target.read():t.value.rawValue,e.options.last))}}class xt extends Ie{constructor(e,t){super(e),this.rackApi_=new Bt(e.rackController,t)}refresh(){this.rackApi_.refresh()}}class Vt extends wt{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Xe(e,e=>super.importState(e),e=>({children:e.required.array(e.required.raw)}),e=>this.rackController.rack.children.every((t,n)=>t.importState(e.children[n])))}exportState(){return We(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function kt(e){return"rackController"in e}class St{constructor(e){this.emitter=new Z,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw X.shouldNeverHappen();const n=void 0!==t?t:this.items_.length;this.items_.splice(n,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(e=>{this.cache_.add(e)})),this.emitter.emit("add",{index:n,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const n=this.extract_(e);n&&(n.allItems().forEach(e=>{this.cache_.delete(e)}),n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function Lt(e){return kt(e)?e.rackController.rack.bcSet_:null}class jt{constructor(e){var t,n;this.emitter=new Z,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=null!==(t=e.blade)&&void 0!==t?t:null,null===(n=this.blade_)||void 0===n||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new St(Lt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var n;null===(n=e.parent)||void 0===n||n.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const n=e.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),Ze(n))n.value.emitter.on("change",this.onChildValueChange_);else if(kt(n)){const e=n.rackController.rack;if(e){const t=e.emitter;t.on("layout",this.onRackLayout_),t.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const n=e.item;if(Ze(n))n.value.emitter.off("change",this.onChildValueChange_);else if(kt(n)){const e=n.rackController.rack;if(e){const t=e.emitter;t.off("layout",this.onRackLayout_),t.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(e=>!e.viewProps.get("hidden")),t=e[0],n=e[e.length-1];this.bcSet_.items.forEach(e=>{const i=[];e===t&&(i.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),e===n&&(i.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||i.push("verylast")),e.blade.set("positions",i)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(e=>e.viewProps.get("disposed")).forEach(e=>{this.bcSet_.remove(e)})}onChildValueChange_(e){const t=function(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(Ze(i)&&i.value===t)return i}return null}(this.find(Ze),e.sender);if(!t)throw X.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Mt{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new jt({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let e=this.rack.children.length-1;e>=0;e--){this.rack.children[e].viewProps.set("disposed",!0)}})}onRackAdd_(e){e.root&&rt(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&ot(e.bladeController.view.element)}}function Nt(){return new ie({positions:ne([],{equals:G})})}class Ot extends ie{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=ie.createCore(t);return new Ot(n)}get styleExpanded(){var e;return null!==(e=this.get("temporaryExpanded"))&&void 0!==e?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!z(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const n=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};ct(this,"expanded",n),ct(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Rt(e,t){t.style.height=e.styleHeight}function It(e,t){e.value("expanded").emitter.on("beforechange",()=>{if(e.set("completed",!1),z(e.get("expandedHeight"))){const n=function(e,t){let n=0;return function(e,t){const n=e.style.transition;e.style.transition="none",t(),e.style.transition=n}(t,()=>{e.set("expandedHeight",null),e.set("temporaryExpanded",!0),tt(t),n=t.clientHeight,e.set("temporaryExpanded",null),tt(t)}),n}(e,t);n>0&&e.set("expandedHeight",n)}e.set("shouldFixHeight",!0),tt(t)}),e.emitter.on("change",()=>{Rt(e,t)}),Rt(e,t),t.addEventListener("transitionend",t=>{"height"===t.propertyName&&e.cleanUpTransition()})}class Tt extends xt{constructor(e,t){super(e,t),this.emitter_=new Z,this.controller.foldable.value("expanded").emitter.on("change",e=>{this.emitter_.emit("fold",new $e(this,e.sender.rawValue))}),this.rackApi_.on("change",e=>{this.emitter_.emit("change",e)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,n){return this.rackApi_.addBinding(e,t,n)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const n=t.bind(this);return this.emitter_.on(e,e=>{n(e)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const Kt=pt("cnt");class $t{constructor(e,t){var n;this.className_=pt(null!==(n=t.viewName)&&void 0!==n?n:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Kt()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),ct(this.foldable_,"completed",gt(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),ct(t.props,"title",e=>{z(e)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const r=e.createElement("div");r.classList.add(this.className_("t")),Et(t.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r;const o=e.createElement("div");o.classList.add(this.className_("m")),this.buttonElement.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("c")),this.element.appendChild(u),this.containerElement=u}}class Ut extends Vt{constructor(e,t){var n;const i=Ot.create(null===(n=t.expanded)||void 0===n||n),s=new $t(e,{foldable:i,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Mt({blade:t.blade,element:s.containerElement,root:t.root,viewProps:t.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=i,It(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Xe(e,e=>super.importState(e),e=>({expanded:e.required.boolean,title:e.optional.string}),e=>(this.foldable.set("expanded",e.expanded),this.props.set("title",e.title),!0))}exportState(){return We(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Pt({id:"folder",type:"blade",accept(e){const t=Ye(e,e=>({title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean}));return t?{params:t}:null},controller:e=>new Ut(e.document,{blade:e.blade,expanded:e.params.expanded,props:ie.fromObject({title:e.params.title}),viewProps:e.viewProps}),api:e=>e.controller instanceof Ut?new Tt(e.controller,e.pool):null});const zt=pt("");function Ht(e,t){return gt(e,zt(void 0,t))}class qt extends ie{constructor(e){var t,n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=(n=ne(this.getGlobalDisabled_()),[new te(n),(e,t)=>{n.setRawValue(e,t)}]),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(t=this.get("parent"))||void 0===t||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,n,i;const s=null!=e?e:{};return new qt(ie.createCore({disabled:null!==(t=s.disabled)&&void 0!==t&&t,disposed:!1,hidden:null!==(n=s.hidden)&&void 0!==n&&n,parent:null!==(i=s.parent)&&void 0!==i?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){lt(this.globalDisabled_,Ht(e,"disabled")),ct(this,"hidden",Ht(e,"hidden"))}bindDisabled(e){lt(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){lt(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return!!e&&e.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const n=e.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(t=this.get("parent"))||void 0===t||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Gt=pt("tbp");class Jt{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Gt()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Gt("c")),this.element.appendChild(n),this.containerElement=n}}const Yt=pt("tbi");class Xt{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Yt()),t.viewProps.bindClassModifiers(this.element),ct(t.props,"selected",e=>{e?this.element.classList.add(Yt(void 0,"sel")):this.element.classList.remove(Yt(void 0,"sel"))});const n=e.createElement("button");n.classList.add(Yt("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=e.createElement("div");i.classList.add(Yt("t")),Et(t.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Wt{constructor(e,t){this.emitter=new Z,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Xt(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Zt extends Vt{constructor(e,t){const n=new Jt(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Mt({blade:t.blade,element:n.containerElement,viewProps:t.viewProps}),view:n})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Wt(e,{props:t.itemProps,viewProps:qt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,ct(this.props,"selected",e=>{this.itemController.props.set("selected",e),this.viewProps.set("hidden",!e)})}get itemController(){return this.ic_}importState(e){return Xe(e,e=>super.importState(e),e=>({selected:e.required.boolean,title:e.required.string}),e=>(this.ic_.props.set("selected",e.selected),this.ic_.props.set("title",e.title),!0))}exportState(){return We(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Qt extends xt{constructor(e,t){super(e,t),this.emitter_=new Z,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",e=>{this.emitter_.emit("change",e)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,n=new Zt(t,{blade:Nt(),itemProps:ie.fromObject({selected:!1,title:e.title}),props:ie.fromObject({selected:!1}),viewProps:qt.create()}),i=this.pool_.createApi(n);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const n=t.bind(this);return this.emitter_.on(e,e=>{n(e)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new Ue(this,e.rawValue))}}class en extends xt{get title(){var e;return null!==(e=this.controller.itemController.props.get("title"))&&void 0!==e?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,n){return this.rackApi_.addBinding(e,t,n)}addBlade(e){return this.rackApi_.addBlade(e)}}class tn{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=ne(!0),this.selectedIndex=ne(-1),this.items_=[]}add(e,t){const n=null!=t?t:this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);const e=this.items_.findIndex(e=>e.rawValue);e<0?(this.items_.forEach((e,t)=>{e.rawValue=0===t}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,n)=>{t.rawValue=n===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(t=>t===e.sender);this.items_.forEach((e,n)=>{e.rawValue=n===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const nn=pt("tab");class sn{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(nn(),Kt()),t.viewProps.bindClassModifiers(this.element),lt(t.empty,gt(this.element,nn(void 0,"nop")));const n=e.createElement("div");n.classList.add(nn("t")),this.element.appendChild(n),this.itemsElement=n;const i=e.createElement("div");i.classList.add(nn("i")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(nn("c")),this.element.appendChild(s),this.contentsElement=s}}class rn extends Vt{constructor(e,t){const n=new tn,i=new sn(e,{empty:n.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new Mt({blade:t.blade,element:i.contentsElement,viewProps:t.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=n}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;rt(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;ot(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}Pt({id:"tab",type:"blade",accept(e){const t=Ye(e,e=>({pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")}));return t&&0!==t.pages.length?{params:t}:null},controller(e){const t=new rn(e.document,{blade:e.blade,viewProps:e.viewProps});return e.params.pages.forEach(n=>{const i=new Zt(e.document,{blade:Nt(),itemProps:ie.fromObject({selected:!1,title:n.title}),props:ie.fromObject({selected:!1}),viewProps:qt.create()});t.add(i)}),t},api:e=>e.controller instanceof rn?new Qt(e.controller,e.pool):e.controller instanceof Zt?new en(e.controller,e.pool):null});class on extends He{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class un{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((e,t)=>t.constrain(e),e)}}function an(e,t){if(e instanceof t)return e;if(e instanceof un){const n=e.constraints.reduce((e,n)=>e||(n instanceof t?n:null),null);if(n)return n}return null}class ln{constructor(e){this.values=ie.fromObject({options:e})}constrain(e){const t=this.values.get("options");if(0===t.length)return e;return t.filter(t=>t.value===e).length>0?e:t[0].value}}function cn(e){var t;const n=Je;return Array.isArray(e)?null===(t=Ye({items:e},e=>({items:e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))})))||void 0===t?void 0:t.items:"object"==typeof e?n.required.raw(e).value:void 0}function hn(e){if(Array.isArray(e))return e;const t=[];return Object.keys(e).forEach(n=>{t.push({text:n,value:e[n]})}),t}function pn(e){return z(e)?null:new ln(hn(e))}const dn=pt("lst");class mn{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(dn()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("select");n.classList.add(dn("s")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const i=e.createElement("div");i.classList.add(dn("m")),i.appendChild(st(e,"dropdown")),this.element.appendChild(i),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,ct(this.props_,"options",t=>{ut(this.selectElement),t.forEach(t=>{const n=e.createElement("option");n.textContent=t.text,this.selectElement.appendChild(n)}),this.update_()})}update_(){const e=this.props_.get("options").map(e=>e.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Dn{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new mn(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return Xe(e,null,e=>({options:e.required.custom(cn)}),e=>(this.props.set("options",hn(e.options)),!0))}exportProps(){return We(null,{options:this.props.get("options")})}}const vn=pt("pop");class Cn{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(vn()),t.viewProps.bindClassModifiers(this.element),lt(t.shows,gt(this.element,vn(void 0,"v")))}}class wn{constructor(e,t){this.shows=ne(!1),this.viewProps=t.viewProps,this.view=new Cn(e,{shows:this.shows,viewProps:this.viewProps})}}const fn=pt("txt");class gn{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(fn()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const n=e.createElement("input");n.classList.add(fn("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class En{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new gn(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget.value,n=this.parser_(t);z(n)||(this.value.rawValue=n),this.view.refresh()}}function _n(e){return"false"!==e&&!!e}function bn(e){return function(e){return String(e)}(e)}const Fn=ye(0);function An(e){return Fn(e)+"%"}function yn(e){return String(e)}function Pn(e){return e}function Bn({primary:e,secondary:t,forward:n,backward:i}){let s=!1;function r(e){s||(s=!0,e(),s=!1)}e.emitter.on("change",i=>{r(()=>{t.setRawValue(n(e.rawValue,t.rawValue),i.options)})}),t.emitter.on("change",s=>{r(()=>{e.setRawValue(i(e.rawValue,t.rawValue),s.options)}),r(()=>{t.setRawValue(n(e.rawValue,t.rawValue),s.options)})}),r(()=>{t.setRawValue(n(e.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function xn(e,t){const n=e*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function Vn(e){return{altKey:e.altKey,downKey:"ArrowDown"===e.key,shiftKey:e.shiftKey,upKey:"ArrowUp"===e.key}}function kn(e){return{altKey:e.altKey,downKey:"ArrowLeft"===e.key,shiftKey:e.shiftKey,upKey:"ArrowRight"===e.key}}function Sn(e){return function(e){return"ArrowUp"===e||"ArrowDown"===e}(e)||"ArrowLeft"===e||"ArrowRight"===e}function Ln(e,t){var n,i;const s=t.ownerDocument.defaultView,r=t.getBoundingClientRect();return{x:e.pageX-((null!==(n=s&&s.scrollX)&&void 0!==n?n:0)+r.left),y:e.pageY-((null!==(i=s&&s.scrollY)&&void 0!==i?i:0)+r.top)}}class jn{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Z,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Ln(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Ln(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Ln(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const n=null!==(t=e.targetTouches.item(0))&&void 0!==t?t:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Mn=pt("txt");class Nn{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Mn(),Mn(void 0,"num")),t.arrayPosition&&this.element.classList.add(Mn(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("input");n.classList.add(Mn("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Mn()),this.inputElement.classList.add(Mn("i"));const i=e.createElement("div");i.classList.add(Mn("k")),this.element.appendChild(i),this.knobElement=i;const s=e.createElementNS(et,"svg");s.classList.add(Mn("g")),this.knobElement.appendChild(s);const r=e.createElementNS(et,"path");r.classList.add(Mn("gb")),s.appendChild(r),this.guideBodyElem_=r;const o=e.createElementNS(et,"path");o.classList.add(Mn("gh")),s.appendChild(o),this.guideHeadElem_=o;const u=e.createElement("div");u.classList.add(pt("tt")()),this.knobElement.appendChild(u),this.tooltipElem_=u,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(null===e.rawValue)return void this.element.classList.remove(Mn(void 0,"drg"));this.element.classList.add(Mn(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),n=t+(t>0?-1:t<0?1:0),i=xe(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class On{constructor(e,t){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=null!==(n=t.sliderProps)&&void 0!==n?n:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=ne(null),this.view=new Nn(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new jn(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,n;const i=null===(t=this.sliderProps_)||void 0===t?void 0:t.get("min"),s=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("max");let r=e;return void 0!==i&&(r=Math.max(r,i)),void 0!==s&&(r=Math.min(r,s)),r}onInputChange_(e){const t=e.currentTarget.value,n=this.parser_(t);z(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(e){const t=xn(this.props.get("keyScale"),Vn(e));0!==t&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){0!==xn(this.props.get("keyScale"),Vn(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Rn=pt("sld");class In{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Rn()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Rn("t")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const i=e.createElement("div");i.classList.add(Rn("k")),this.trackElement.appendChild(i),this.knobElement=i,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=xe(Pe(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class Tn{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new In(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(Pe(xe(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=xn(this.props.get("keyScale"),kn(e));0!==t&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){0!==xn(this.props.get("keyScale"),kn(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Kn=pt("sldtxt");class $n{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Kn());const n=e.createElement("div");n.classList.add(Kn("s")),this.sliderView_=t.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=e.createElement("div");i.classList.add(Kn("t")),this.textView_=t.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Un{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new Tn(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new On(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new $n(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Xe(e,null,e=>({max:e.required.number,min:e.required.number}),e=>{const t=this.sliderC_.props;return t.set("max",e.max),t.set("min",e.min),!0})}exportProps(){const e=this.sliderC_.props;return We(null,{max:e.get("max"),min:e.get("min")})}}const zn={containerUnitSize:"cnt-usz"};function Hn(e){return`--${zn[e]}`}function qn(e){return Oe(e)}function Gn(e){if(q(e))return Ye(e,qn)}function Jn(e,t){if(!e)return;const n=[],i=je(e,t);i&&n.push(i);const s=Me(e);return s&&n.push(s),new un(n)}function Yn(e){if("inline"===e||"popup"===e)return e}function Xn(e,t){e.write(t)}const Wn=pt("ckb");class Zn{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Wn()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("label");n.classList.add(Wn("l")),this.element.appendChild(n),this.labelElement=n;const i=e.createElement("input");i.classList.add(Wn("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,t.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(Wn("w")),this.labelElement.appendChild(s);const r=st(e,"check");s.appendChild(r),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Qn{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Zn(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}Pt({id:"input-bool",type:"input",accept:(e,t)=>{if("boolean"!=typeof e)return null;const n=Ye(t,e=>({options:e.optional.custom(cn),readonly:e.optional.constant(!1)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>_n,constraint:e=>function(e){const t=[],n=pn(e.options);return n&&t.push(n),new un(t)}(e.params),writer:e=>Xn},controller:e=>{const t=e.document,n=e.value,i=e.constraint,s=i&&an(i,ln);return s?new Dn(t,{props:new ie({options:s.values.value("options")}),value:n,viewProps:e.viewProps}):new Qn(t,{value:n,viewProps:e.viewProps})},api:e=>"boolean"!=typeof e.controller.value.rawValue?null:e.controller.valueController instanceof Dn?new on(e.controller):null});const ei=pt("col");class ti{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ei()),t.foldable.bindExpandedClass(this.element,ei(void 0,"expanded")),ct(t.foldable,"completed",gt(this.element,ei(void 0,"cpl")));const n=e.createElement("div");n.classList.add(ei("h")),this.element.appendChild(n);const i=e.createElement("div");i.classList.add(ei("s")),n.appendChild(i),this.swatchElement=i;const s=e.createElement("div");if(s.classList.add(ei("t")),n.appendChild(s),this.textElement=s,"inline"===t.pickerLayout){const t=e.createElement("div");t.classList.add(ei("p")),this.element.appendChild(t),this.pickerElement=t}else this.pickerElement=null}}function ni(e,t,n){const i=Ve(e,360),s=xe(t/100,0,1),r=xe(n/100,0,1),o=r*s,u=o*(1-Math.abs(i/60%2-1)),a=r-o;let l,c,h;return[l,c,h]=i>=0&&i<60?[o,u,0]:i>=60&&i<120?[u,o,0]:i>=120&&i<180?[0,o,u]:i>=180&&i<240?[0,u,o]:i>=240&&i<300?[u,0,o]:[o,0,u],[255*(l+a),255*(c+a),255*(h+a)]}function ii(e){return[e[0],e[1],e[2]]}function si(e,t){return[e[0],e[1],e[2],t]}const ri={hsl:{hsl:(e,t,n)=>[e,t,n],hsv:function(e,t,n){const i=n+t*(100-Math.abs(2*n-100))/200;return[e,0!==i?t*(100-Math.abs(2*n-100))/i:0,n+t*(100-Math.abs(2*n-100))/200]},rgb:function(e,t,n){const i=(e%360+360)%360,s=xe(t/100,0,1),r=xe(n/100,0,1),o=(1-Math.abs(2*r-1))*s,u=o*(1-Math.abs(i/60%2-1)),a=r-o/2;let l,c,h;return[l,c,h]=i>=0&&i<60?[o,u,0]:i>=60&&i<120?[u,o,0]:i>=120&&i<180?[0,o,u]:i>=180&&i<240?[0,u,o]:i>=240&&i<300?[u,0,o]:[o,0,u],[255*(l+a),255*(c+a),255*(h+a)]}},hsv:{hsl:function(e,t,n){const i=100-Math.abs(n*(200-t)/100-100);return[e,0!==i?t*n/i:0,n*(200-t)/200]},hsv:(e,t,n)=>[e,t,n],rgb:ni},rgb:{hsl:function(e,t,n){const i=xe(e/255,0,1),s=xe(t/255,0,1),r=xe(n/255,0,1),o=Math.max(i,s,r),u=Math.min(i,s,r),a=o-u;let l=0,c=0;const h=(u+o)/2;return 0!==a&&(c=a/(1-Math.abs(o+u-1)),l=i===o?(s-r)/a:s===o?2+(r-i)/a:4+(i-s)/a,l=l/6+(l<0?1:0)),[360*l,100*c,100*h]},hsv:function(e,t,n){const i=xe(e/255,0,1),s=xe(t/255,0,1),r=xe(n/255,0,1),o=Math.max(i,s,r),u=o-Math.min(i,s,r);let a;return a=0===u?0:o===i?((s-r)/u%6+6)%6*60:o===s?60*((r-i)/u+2):60*((i-s)/u+4),[a,100*(0===o?0:u/o),100*o]},rgb:(e,t,n)=>[e,t,n]}};function oi(e,t){return["float"===t?1:"rgb"===e?255:360,"float"===t?1:"rgb"===e?255:100,"float"===t?1:"rgb"===e?255:100]}function ui(e,t,n){var i;const s=oi(t,n);return["rgb"===t?xe(e[0],0,s[0]):(r=e[0],o=s[0],r===o?o:Ve(r,o)),xe(e[1],0,s[1]),xe(e[2],0,s[2]),xe(null!==(i=e[3])&&void 0!==i?i:1,0,1)];var r,o}function ai(e,t,n,i){const s=oi(t,n),r=oi(t,i);return e.map((e,t)=>e/s[t]*r[t])}function li(e,t,n){const i=ai(e,t.mode,t.type,"int");return ai(ri[t.mode][n.mode](...i),n.mode,"int",n.type)}class ci{static black(){return new ci([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=ui(e,t,this.type)}getComponents(e){return si(li(ii(this.comps_),{mode:this.mode,type:this.type},{mode:null!=e?e:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const hi=pt("colp");class pi{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(hi()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(hi("hsv"));const i=e.createElement("div");i.classList.add(hi("sv")),this.svPaletteView_=t.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);const s=e.createElement("div");s.classList.add(hi("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),n.appendChild(s),this.element.appendChild(n);const r=e.createElement("div");if(r.classList.add(hi("rgb")),this.textsView_=t.textsView,r.appendChild(this.textsView_.element),this.element.appendChild(r),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const n=e.createElement("div");n.classList.add(hi("a"));const i=e.createElement("div");i.classList.add(hi("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);const s=e.createElement("div");s.classList.add(hi("at")),s.appendChild(this.alphaViews_.text.element),n.appendChild(s),this.element.appendChild(n)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(e=>e.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function di(e){return"int"===e?"int":"float"===e?"float":void 0}function mi(e){return Ye(e,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(di)}),expanded:e.optional.boolean,picker:e.optional.custom(Yn),readonly:e.optional.constant(!1)}))}function Di(e){return e?.1:1}function vi(e){var t;return null===(t=e.color)||void 0===t?void 0:t.type}class Ci{constructor(e,t){this.type="float",this.mode=t,this.comps_=ui(e,t,this.type)}getComponents(e){return si(li(ii(this.comps_),{mode:this.mode,type:this.type},{mode:null!=e?e:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const wi={int:(e,t)=>new ci(e,t),float:(e,t)=>new Ci(e,t)};function fi(e,t,n){return wi[n](e,t)}function gi(e,t){if(e.type===t)return e;if(function(e){return"int"===e.type}(e)&&"float"===t)return function(e){const t=e.getComponents(),n=oi(e.mode,"int");return new Ci([Pe(t[0],0,n[0],0,1),Pe(t[1],0,n[1],0,1),Pe(t[2],0,n[2],0,1),t[3]],e.mode)}(e);if(function(e){return"float"===e.type}(e)&&"int"===t)return function(e){const t=e.getComponents(),n=oi(e.mode,"int");return new ci([Math.round(Pe(t[0],0,1,0,n[0])),Math.round(Pe(t[1],0,1,0,n[1])),Math.round(Pe(t[2],0,1,0,n[2])),t[3]],e.mode)}(e);throw X.shouldNeverHappen()}function Ei(e,t){const n=e.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*t,t):Math.min(parseFloat(e),t)}const _i={deg:e=>e,grad:e=>360*e/400,rad:e=>360*e/(2*Math.PI),turn:e=>360*e};function bi(e){const t=e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(e);const n=parseFloat(t[1]),i=t[2];return _i[i](n)}function Fi(e){const t=e.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[Ei(t[1],255),Ei(t[2],255),Ei(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Ai(e){const t=Fi(e);return t?new ci(t,"rgb"):null}function yi(e){const t=e.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[Ei(t[1],255),Ei(t[2],255),Ei(t[3],255),Ei(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Pi(e){const t=yi(e);return t?new ci(t,"rgb"):null}function Bi(e){const t=e.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[bi(t[1]),Ei(t[2],100),Ei(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function xi(e){const t=Bi(e);return t?new ci(t,"hsl"):null}function Vi(e){const t=e.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const n=[bi(t[1]),Ei(t[2],100),Ei(t[3],100),Ei(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function ki(e){const t=Vi(e);return t?new ci(t,"hsl"):null}function Si(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const n=e.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Li(e){const t=Si(e);return t?new ci(t,"rgb"):null}function ji(e){const t=e.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),Pe(parseInt(t[4]+t[4],16),0,255,0,1)];const n=e.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Pe(parseInt(n[4],16),0,255,0,1)]:null}function Mi(e){const t=ji(e);return t?new ci(t,"rgb"):null}function Ni(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Oi(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}const Ri=[{parser:Si,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:ji,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Fi,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:yi,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Bi,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Vi,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Ni,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Oi,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Ii(e,t="int"){const n=function(e){return Ri.reduce((t,{parser:n,result:i})=>t||(n(e)?i:null),null)}(e);return n?"hex"===n.notation&&"float"!==t?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:t}):null:null}function Ti(e){const t=[Li,Mi,Ai,Pi,xi,ki];t.push(function(e){return t=>{const n=Ni(t);return n?fi(n,"rgb",e):null}}("int"),function(e){return t=>{const n=Oi(t);return n?fi(n,"rgb",e):null}}("int"));const n=function(e){return t=>e.reduce((e,n)=>null!==e?e:n(t),null)}(t);return t=>{const i=n(t);return i?gi(i,e):null}}function Ki(e){const t=Ti("int");if("string"!=typeof e)return ci.black();const n=t(e);return null!=n?n:ci.black()}function $i(e){const t=xe(Math.floor(e),0,255).toString(16);return 1===t.length?`0${t}`:t}function Ui(e,t="#"){return`${t}${ii(e.getComponents("rgb")).map($i).join("")}`}function zi(e,t="#"){const n=e.getComponents("rgb");return`${t}${[n[0],n[1],n[2],255*n[3]].map($i).join("")}`}function Hi(e){const t=ye(0);return`rgb(${ii(gi(e,"int").getComponents("rgb")).map(e=>t(e)).join(", ")})`}function qi(e){const t=ye(2),n=ye(0);return`rgba(${gi(e,"int").getComponents("rgb").map((e,i)=>(3===i?t:n)(e)).join(", ")})`}function Gi(e,t){const n=ye("float"===t?2:0),i=["r","g","b"];return`{${ii(gi(e,t).getComponents("rgb")).map((e,t)=>`${i[t]}: ${n(e)}`).join(", ")}}`}function Ji(e){return t=>Gi(t,e)}function Yi(e,t){const n=ye(2),i=ye("float"===t?2:0),s=["r","g","b","a"];return`{${gi(e,t).getComponents("rgb").map((e,t)=>`${s[t]}: ${(3===t?n:i)(e)}`).join(", ")}}`}function Xi(e){return t=>Yi(t,e)}const Wi=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Ui},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:zi},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Hi},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:qi},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(e){const t=[ye(0),An,An];return`hsl(${ii(gi(e,"int").getComponents("hsl")).map((e,n)=>t[n](e)).join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(e){const t=[ye(0),An,An,ye(2)];return`hsla(${gi(e,"int").getComponents("hsl").map((e,n)=>t[n](e)).join(", ")})`}},...["int","float"].reduce((e,t)=>[...e,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:Ji(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:Xi(t)}],[])];function Zi(e){return Wi.reduce((t,n)=>{return t||(i=n.format,s=e,i.alpha===s.alpha&&i.mode===s.mode&&i.notation===s.notation&&i.type===s.type?n.stringifier:null);var i,s},null)}const Qi=pt("apl");class es{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Qi()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("div");n.classList.add(Qi("b")),this.element.appendChild(n);const i=e.createElement("div");i.classList.add(Qi("c")),n.appendChild(i),this.colorElem_=i;const s=e.createElement("div");s.classList.add(Qi("m")),this.element.appendChild(s),this.markerElem_=s;const r=e.createElement("div");r.classList.add(Qi("p")),this.markerElem_.appendChild(r),this.previewElem_=r,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),n=new ci([t[0],t[1],t[2],0],"rgb"),i=new ci([t[0],t[1],t[2],255],"rgb"),s=["to right",qi(n),qi(i)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=qi(e);const r=Pe(t[3],0,1,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class ts{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new es(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=e.point.x/e.bounds.width,i=this.value.rawValue,[s,r,o]=i.getComponents("hsv");this.value.setRawValue(new ci([s,r,o,n],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=xn(Di(!0),kn(e));if(0===t)return;const n=this.value.rawValue,[i,s,r,o]=n.getComponents("hsv");this.value.setRawValue(new ci([i,s,r,o+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){0!==xn(Di(!0),kn(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ns=pt("coltxt");class is{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ns()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(ns("m")),this.modeElem_=function(e){const t=e.createElement("select");return t.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}].reduce((t,n)=>{const i=e.createElement("option");return i.textContent=n.text,i.value=n.value,t.appendChild(i),t},e.createDocumentFragment())),t}(e),this.modeElem_.classList.add(ns("ms")),n.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(ns("mm")),i.appendChild(st(e,"dropdown")),n.appendChild(i),this.element.appendChild(n);const s=e.createElement("div");s.classList.add(ns("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=t.inputViews,this.applyInputViews_(),lt(t.mode,e=>{this.modeElem_.value=e})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){ut(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const n=e.createElement("div");n.classList.add(ns("c")),n.appendChild(t.element),this.inputsElem_.appendChild(n)})}}function ss(e,t,n){const i=oi(e,t)[n];return new se({min:0,max:i})}function rs(e,t){const n={colorMode:t.colorMode,colorType:t.colorType,parser:Fe,viewProps:t.viewProps};return[0,1,2].map(i=>{const s=function(e,t,n){return new On(e,{arrayPosition:0===n?"fst":2===n?"lst":"mid",parser:t.parser,props:ie.fromObject({formatter:(i=t.colorType,ye("float"===i?2:0)),keyScale:Di(!1),pointerScale:"float"===t.colorType?.01:1}),value:ne(0,{constraint:ss(t.colorMode,t.colorType,n)}),viewProps:t.viewProps});var i}(e,n,i);return Bn({primary:t.value,secondary:s.value,forward:e=>gi(e,t.colorType).getComponents(t.colorMode)[i],backward(e,n){const s=t.colorMode,r=gi(e,t.colorType).getComponents(s);r[i]=n;return gi(fi(si(ii(r),r[3]),s,t.colorType),"int")}}),s})}class os{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=ne(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new is(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return function(e){return"hex"!==e}(t)?rs(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):function(e,t){const n=new En(e,{parser:Ti("int"),props:ie.fromObject({formatter:Ui}),value:ne(ci.black()),viewProps:t.viewProps});return Bn({primary:t.value,secondary:n.value,forward:e=>new ci(ii(e.getComponents()),e.mode),backward:(e,t)=>new ci(si(ii(t.getComponents(e.mode)),e.getComponents()[3]),e.mode)}),[n]}(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(e=>e.view)}}const us=pt("hpl");class as{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(us()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("div");n.classList.add(us("c")),this.element.appendChild(n);const i=e.createElement("div");i.classList.add(us("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Hi(new ci([t,100,100],"hsv"));const n=Pe(t,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class ls{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new as(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=Pe(xe(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,s,r,o]=i.getComponents("hsv");this.value.setRawValue(new ci([n,s,r,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=xn(Di(!1),kn(e));if(0===t)return;const n=this.value.rawValue,[i,s,r,o]=n.getComponents("hsv");this.value.setRawValue(new ci([i+t,s,r,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){0!==xn(Di(!1),kn(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const cs=pt("svp");class hs{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(cs()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const n=e.createElement("canvas");n.height=64,n.width=64,n.classList.add(cs("c")),this.element.appendChild(n),this.canvasElement=n;const i=e.createElement("div");i.classList.add(cs("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=function(e){const t=e.ownerDocument.defaultView;return t&&"document"in t?e.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!e)return;const t=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,s=e.getImageData(0,0,n,i),r=s.data;for(let a=0;a<i;a++)for(let e=0;e<n;e++){const s=Pe(e,0,n,0,100),o=Pe(a,0,i,100,0),u=ni(t[0],s,o),l=4*(a*n+e);r[l]=u[0],r[l+1]=u[1],r[l+2]=u[2],r[l+3]=255}e.putImageData(s,0,0);const o=Pe(t[1],0,100,0,100);this.markerElem_.style.left=`${o}%`;const u=Pe(t[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}}class ps{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new hs(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=Pe(e.point.x,0,e.bounds.width,0,100),i=Pe(e.point.y,0,e.bounds.height,100,0),[s,,,r]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new ci([s,n,i,r],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Sn(e.key)&&e.preventDefault();const[t,n,i,s]=this.value.rawValue.getComponents("hsv"),r=Di(!1),o=xn(r,kn(e)),u=xn(r,Vn(e));0===o&&0===u||this.value.setRawValue(new ci([t,n+o,i+u,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=Di(!1),n=xn(t,kn(e)),i=xn(t,Vn(e));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ds{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new ls(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new ps(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new ts(e,{value:this.value,viewProps:this.viewProps}),text:new On(e,{parser:Fe,props:ie.fromObject({pointerScale:.01,keyScale:.1,formatter:ye(2)}),value:ne(0,{constraint:new se({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Bn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:e=>e.getComponents()[3],backward:(e,t)=>{const n=e.getComponents();return n[3]=t,new ci(n,e.mode)}}),this.textsC_=new os(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new pi(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const ms=pt("colsw");class Ds{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(ms()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(ms("sw")),this.element.appendChild(n),this.swatchElem_=n;const i=e.createElement("button");i.classList.add(ms("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=zi(e)}onValueChange_(){this.update_()}}class vs{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Ds(e,{value:this.value,viewProps:this.viewProps})}}class Cs{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Ot.create(t.expanded),this.swatchC_=new vs(e,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new En(e,{parser:t.parser,props:ie.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new ti(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===t.pickerLayout?new wn(e,{viewProps:this.viewProps}):null;const i=new ds(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Bn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e,backward:(e,t)=>t})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),It(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,n=e.relatedTarget;n&&t.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,n=at(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!nt(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.swatchC_.view.buttonElement.focus()}}function ws(e){return ii(e.getComponents("rgb")).reduce((e,t)=>e<<8|255&Math.floor(t),0)}function fs(e){return e.getComponents("rgb").reduce((e,t,n)=>e<<8|255&Math.floor(3===n?255*t:t),0)>>>0}function gs(e){return"number"!=typeof e?ci.black():new ci([(t=e)>>16&255,t>>8&255,255&t],"rgb");var t}function Es(e){return"number"!=typeof e?ci.black():new ci([(t=e)>>24&255,t>>16&255,t>>8&255,Pe(255&t,0,255,0,1)],"rgb");var t}function _s(e,t){return"object"==typeof e&&!z(e)&&(t in e&&"number"==typeof e[t])}function bs(e){return _s(e,"r")&&_s(e,"g")&&_s(e,"b")}function Fs(e){return bs(e)&&_s(e,"a")}function As(e){return bs(e)}function ys(e,t){if(e.mode!==t.mode)return!1;if(e.type!==t.type)return!1;const n=e.getComponents(),i=t.getComponents();for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}function Ps(e){return"a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b]}function Bs(e,t){return(n,i)=>{e?function(e,t,n){const i=gi(t,n).toRgbaObject();e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b),e.writeProperty("a",i.a)}(n,i,t):function(e,t,n){const i=gi(t,n).toRgbaObject();e.writeProperty("r",i.r),e.writeProperty("g",i.g),e.writeProperty("b",i.b)}(n,i,t)}}function xs(e){return t=>{const n=function(e,t){if(!As(e))return gi(ci.black(),t);if("int"===t){const t=Ps(e);return new ci(t,"rgb")}if("float"===t){const t=Ps(e);return new Ci(t,"rgb")}return gi(ci.black(),"int")}(t,e);return gi(n,"int")}}function Vs(e,t){return n=>e?Yi(n,t):Gi(n,t)}Pt({id:"input-color-number",type:"input",accept:(e,t)=>{if("number"!=typeof e)return null;if(!function(e){return"color"in e||"color"===e.view}(t))return null;const n=mi(t);return n?{initialValue:e,params:Object.assign(Object.assign({},n),{supportsAlpha:(i=t,!!(null===(s=null==i?void 0:i.color)||void 0===s?void 0:s.alpha))})}:null;var i,s},binding:{reader:e=>e.params.supportsAlpha?Es:gs,equals:ys,writer:e=>function(e){const t=e?fs:ws;return(e,n)=>{Xn(e,t(n))}}(e.params.supportsAlpha)},controller:e=>{var t,n,i;return new Cs(e.document,{colorType:"int",expanded:null!==(t=e.params.expanded)&&void 0!==t&&t,formatter:(i=e.params.supportsAlpha,i?e=>zi(e,"0x"):e=>Ui(e,"0x")),parser:Ti("int"),pickerLayout:null!==(n=e.params.picker)&&void 0!==n?n:"popup",supportsAlpha:e.params.supportsAlpha,value:e.value,viewProps:e.viewProps})}}),Pt({id:"input-color-object",type:"input",accept:(e,t)=>{var n;if(!As(e))return null;const i=mi(t);return i?{initialValue:e,params:Object.assign(Object.assign({},i),{colorType:null!==(n=vi(t))&&void 0!==n?n:"int"})}:null},binding:{reader:e=>xs(e.params.colorType),equals:ys,writer:e=>Bs(Fs(e.initialValue),e.params.colorType)},controller:e=>{var t,n;const i=Fs(e.initialValue);return new Cs(e.document,{colorType:e.params.colorType,expanded:null!==(t=e.params.expanded)&&void 0!==t&&t,formatter:Vs(i,e.params.colorType),parser:Ti("int"),pickerLayout:null!==(n=e.params.picker)&&void 0!==n?n:"popup",supportsAlpha:i,value:e.value,viewProps:e.viewProps})}}),Pt({id:"input-color-string",type:"input",accept:(e,t)=>{if("string"!=typeof e)return null;if("text"===t.view)return null;const n=Ii(e,vi(t));if(!n)return null;const i=Zi(n);if(!i)return null;const s=mi(t);return s?{initialValue:e,params:Object.assign(Object.assign({},s),{format:n,stringifier:i})}:null},binding:{reader:()=>Ki,equals:ys,writer:e=>{const t=function(e){const t=Zi(e);return t?(e,n)=>{Xn(e,t(n))}:null}(e.params.format);if(!t)throw X.notBindable();return t}},controller:e=>{var t,n;return new Cs(e.document,{colorType:e.params.format.type,expanded:null!==(t=e.params.expanded)&&void 0!==t&&t,formatter:e.params.stringifier,parser:Ti("int"),pickerLayout:null!==(n=e.params.picker)&&void 0!==n?n:"popup",supportsAlpha:e.params.format.alpha,value:e.value,viewProps:e.viewProps})}});class ks{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((e,t)=>{var n,i;return null!==(i=null===(n=this.components[t])||void 0===n?void 0:n.constrain(e))&&void 0!==i?i:e});return this.asm_.fromComponents(t)}}const Ss=pt("pndtxt");class Ls{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Ss()),this.textViews.forEach(t=>{const n=e.createElement("div");n.classList.add(Ss("a")),n.appendChild(t.element),this.element.appendChild(n)})}}class js{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((n,i)=>function(e,t,n){return new On(e,{arrayPosition:0===n?"fst":n===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[n].textProps,value:ne(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}(e,t,i)),this.acs_.forEach((e,n)=>{Bn({primary:this.value,secondary:e.value,forward:e=>t.assembly.toComponents(e)[n],backward:(e,i)=>{const s=t.assembly.toComponents(e);return s[n]=i,t.assembly.fromComponents(s)}})}),this.view=new Ls(e,{textViews:this.acs_.map(e=>e.view)})}get textControllers(){return this.acs_}}class Ms extends He{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}Pt({id:"input-number",type:"input",accept:(e,t)=>{if("number"!=typeof e)return null;const n=Ye(t,e=>Object.assign(Object.assign({},Oe(e)),{options:e.optional.custom(cn),readonly:e.optional.constant(!1)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Ae,constraint:e=>function(e,t){const n=[],i=je(e,t);i&&n.push(i);const s=Me(e);s&&n.push(s);const r=pn(e.options);return r&&n.push(r),new un(n)}(e.params,e.initialValue),writer:e=>Xn},controller:e=>{const t=e.value,n=e.constraint,i=n&&an(n,ln);if(i)return new Dn(e.document,{props:new ie({options:i.values.value("options")}),value:t,viewProps:e.viewProps});const s=Ne(e.params,t.rawValue),r=n&&an(n,se);return r?new Un(e.document,Object.assign(Object.assign({},(o=Object.assign(Object.assign({},s),{keyScale:ne(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}),{sliderProps:new ie({keyScale:o.keyScale,max:o.max,min:o.min}),textProps:new ie({formatter:ne(o.formatter),keyScale:o.keyScale,pointerScale:ne(o.pointerScale)})})),{parser:Fe,value:t,viewProps:e.viewProps})):new On(e.document,{parser:Fe,props:ie.fromObject(s),value:t,viewProps:e.viewProps});var o},api:e=>"number"!=typeof e.controller.value.rawValue?null:e.controller.valueController instanceof Un?new Ms(e.controller):e.controller.valueController instanceof Dn?new on(e.controller):null});class Ns{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(z(e))return!1;const t=e.x,n=e.y;return"number"==typeof t&&"number"==typeof n}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const Os={toComponents:e=>e.getComponents(),fromComponents:e=>new Ns(...e)},Rs=pt("p2d");class Is{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Rs()),t.viewProps.bindClassModifiers(this.element),lt(t.expanded,gt(this.element,Rs(void 0,"expanded")));const n=e.createElement("div");n.classList.add(Rs("h")),this.element.appendChild(n);const i=e.createElement("button");i.classList.add(Rs("b")),i.appendChild(st(e,"p2dpad")),t.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;const s=e.createElement("div");if(s.classList.add(Rs("t")),n.appendChild(s),this.textElement=s,"inline"===t.pickerLayout){const t=e.createElement("div");t.classList.add(Rs("p")),this.element.appendChild(t),this.pickerElement=t}else this.pickerElement=null}}const Ts=pt("p2dp");class Ks{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Ts()),"popup"===t.layout&&this.element.classList.add(Ts(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Ts("p")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=e.createElementNS(et,"svg");i.classList.add(Ts("g")),this.padElement.appendChild(i),this.svgElem_=i;const s=e.createElementNS(et,"line");s.classList.add(Ts("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const r=e.createElementNS(et,"line");r.classList.add(Ts("ax")),r.setAttributeNS(null,"x1","50%"),r.setAttributeNS(null,"y1","0"),r.setAttributeNS(null,"x2","50%"),r.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(r);const o=e.createElementNS(et,"line");o.classList.add(Ts("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const u=e.createElement("div");u.classList.add(Ts("m")),this.padElement.appendChild(u),this.markerElem_=u,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),n=this.props_.get("max"),i=Pe(e,-n,+n,0,100),s=Pe(t,-n,+n,0,100),r=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${r}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${r}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function $s(e,t,n){return[xn(t[0],kn(e)),xn(t[1],Vn(e))*(n?1:-1)]}class Us{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Ks(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const n=this.props.get("max"),i=Pe(e.point.x,0,e.bounds.width,-n,+n),s=Pe(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new Ns(i,s),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Sn(e.key)&&e.preventDefault();const[t,n]=$s(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));0===t&&0===n||this.value.setRawValue(new Ns(this.value.rawValue.x+t,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,n]=$s(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));0===t&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class zs{constructor(e,t){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Ot.create(t.expanded),this.popC_="popup"===t.pickerLayout?new wn(e,{viewProps:this.viewProps}):null;const s=new Us(e,{layout:t.pickerLayout,props:new ie({invertsY:ne(t.invertsY),max:ne(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new js(e,{assembly:Os,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new Is(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Bn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e,backward:(e,t)=>t})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),It(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,n=e.relatedTarget;n&&t.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,n=at(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!nt(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.view.buttonElement.focus()}}function Hs(e){return Ns.isObject(e)?new Ns(e.x,e.y):new Ns}function qs(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y)}function Gs(e,t){var n,i;if(!z(e.min)||!z(e.max))return Math.max(Math.abs(null!==(n=e.min)&&void 0!==n?n:0),Math.abs(null!==(i=e.max)&&void 0!==i?i:0));const s=Se(e);return Math.max(10*Math.abs(s),10*Math.abs(t))}function Js(e,t){var n,i;const s=Gs(J(e,null!==(n=e.x)&&void 0!==n?n:{}),t.x),r=Gs(J(e,null!==(i=e.y)&&void 0!==i?i:{}),t.y);return Math.max(s,r)}function Ys(e){if(!("y"in e))return!1;const t=e.y;return!!t&&("inverted"in t&&!!t.inverted)}Pt({id:"input-point2d",type:"input",accept:(e,t)=>{if(!Ns.isObject(e))return null;const n=Ye(t,e=>Object.assign(Object.assign({},qn(e)),{expanded:e.optional.boolean,picker:e.optional.custom(Yn),readonly:e.optional.constant(!1),x:e.optional.custom(Gn),y:e.optional.object(Object.assign(Object.assign({},qn(e)),{inverted:e.optional.boolean}))}));return n?{initialValue:e,params:n}:null},binding:{reader:()=>Hs,constraint:e=>{return t=e.params,n=e.initialValue,new ks({assembly:Os,components:[Jn(Object.assign(Object.assign({},t),t.x),n.x),Jn(Object.assign(Object.assign({},t),t.y),n.y)]});var t,n},equals:Ns.equals,writer:()=>qs},controller:e=>{var t,n;const i=e.document,s=e.value,r=e.constraint,o=[e.params.x,e.params.y];return new zs(i,{axes:s.rawValue.getComponents().map((t,n)=>{var i;return Re({constraint:r.components[n],initialValue:t,params:J(e.params,null!==(i=o[n])&&void 0!==i?i:{})})}),expanded:null!==(t=e.params.expanded)&&void 0!==t&&t,invertsY:Ys(e.params),max:Js(e.params,s.rawValue),parser:Fe,pickerLayout:null!==(n=e.params.picker)&&void 0!==n?n:"popup",value:s,viewProps:e.viewProps})}});class Xs{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(z(e))return!1;const t=e.x,n=e.y,i=e.z;return"number"==typeof t&&"number"==typeof n&&"number"==typeof i}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Ws={toComponents:e=>e.getComponents(),fromComponents:e=>new Xs(...e)};function Zs(e){return Xs.isObject(e)?new Xs(e.x,e.y,e.z):new Xs}function Qs(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z)}Pt({id:"input-point3d",type:"input",accept:(e,t)=>{if(!Xs.isObject(e))return null;const n=Ye(t,e=>Object.assign(Object.assign({},qn(e)),{readonly:e.optional.constant(!1),x:e.optional.custom(Gn),y:e.optional.custom(Gn),z:e.optional.custom(Gn)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>Zs,constraint:e=>{return t=e.params,n=e.initialValue,new ks({assembly:Ws,components:[Jn(Object.assign(Object.assign({},t),t.x),n.x),Jn(Object.assign(Object.assign({},t),t.y),n.y),Jn(Object.assign(Object.assign({},t),t.z),n.z)]});var t,n},equals:Xs.equals,writer:e=>Qs},controller:e=>{const t=e.value,n=e.constraint,i=[e.params.x,e.params.y,e.params.z];return new js(e.document,{assembly:Ws,axes:t.rawValue.getComponents().map((t,s)=>{var r;return Re({constraint:n.components[s],initialValue:t,params:J(e.params,null!==(r=i[s])&&void 0!==r?r:{})})}),parser:Fe,value:t,viewProps:e.viewProps})}});class er{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.z=n,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(z(e))return!1;const t=e.x,n=e.y,i=e.z,s=e.w;return"number"==typeof t&&"number"==typeof n&&"number"==typeof i&&"number"==typeof s}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const tr={toComponents:e=>e.getComponents(),fromComponents:e=>new er(...e)};function nr(e){return er.isObject(e)?new er(e.x,e.y,e.z,e.w):new er}function ir(e,t){e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z),e.writeProperty("w",t.w)}Pt({id:"input-point4d",type:"input",accept:(e,t)=>{if(!er.isObject(e))return null;const n=Ye(t,e=>Object.assign(Object.assign({},qn(e)),{readonly:e.optional.constant(!1),w:e.optional.custom(Gn),x:e.optional.custom(Gn),y:e.optional.custom(Gn),z:e.optional.custom(Gn)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>nr,constraint:e=>{return t=e.params,n=e.initialValue,new ks({assembly:tr,components:[Jn(Object.assign(Object.assign({},t),t.x),n.x),Jn(Object.assign(Object.assign({},t),t.y),n.y),Jn(Object.assign(Object.assign({},t),t.z),n.z),Jn(Object.assign(Object.assign({},t),t.w),n.w)]});var t,n},equals:er.equals,writer:e=>ir},controller:e=>{const t=e.value,n=e.constraint,i=[e.params.x,e.params.y,e.params.z,e.params.w];return new js(e.document,{assembly:tr,axes:t.rawValue.getComponents().map((t,s)=>{var r;return Re({constraint:n.components[s],initialValue:t,params:J(e.params,null!==(r=i[s])&&void 0!==r?r:{})})}),parser:Fe,value:t,viewProps:e.viewProps})}}),Pt({id:"input-string",type:"input",accept:(e,t)=>{if("string"!=typeof e)return null;const n=Ye(t,e=>({readonly:e.optional.constant(!1),options:e.optional.custom(cn)}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>yn,constraint:e=>function(e){const t=[],n=pn(e.options);return n&&t.push(n),new un(t)}(e.params),writer:e=>Xn},controller:e=>{const t=e.document,n=e.value,i=e.constraint,s=i&&an(i,ln);return s?new Dn(t,{props:new ie({options:s.values.value("options")}),value:n,viewProps:e.viewProps}):new En(t,{parser:e=>e,props:ie.fromObject({formatter:Pn}),value:n,viewProps:e.viewProps})},api:e=>"string"!=typeof e.controller.value.rawValue?null:e.controller.valueController instanceof Dn?new on(e.controller):null});const sr={defaultRows:3},rr=pt("mll");class or{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(rr()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("textarea");n.classList.add(rr("i")),n.style.height=`calc(var(${Hn("containerUnitSize")}) * ${t.rows})`,n.readOnly=!0,t.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,n=[];this.value.rawValue.forEach(e=>{void 0!==e&&n.push(this.formatter_(e))}),e.textContent=n.join("\n"),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class ur{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new or(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const ar=pt("sgl");class lr{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(ar()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("input");n.classList.add(ar("i")),n.readOnly=!0,n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=void 0!==t?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class cr{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new lr(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}Pt({id:"monitor-bool",type:"monitor",accept:(e,t)=>{if("boolean"!=typeof e)return null;const n=Ye(t,e=>({readonly:e.required.constant(!0),rows:e.optional.number}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>_n},controller:e=>{var t;return 1===e.value.rawValue.length?new cr(e.document,{formatter:bn,value:e.value,viewProps:e.viewProps}):new ur(e.document,{formatter:bn,rows:null!==(t=e.params.rows)&&void 0!==t?t:sr.defaultRows,value:e.value,viewProps:e.viewProps})}});class hr extends He{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const pr=pt("grl");class dr{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(pr()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=e.createElementNS(et,"svg");n.classList.add(pr("g")),n.style.height=`calc(var(${Hn("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(n),this.svgElem_=n;const i=e.createElementNS(et,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const s=e.createElement("div");s.classList.add(pr("t"),pt("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,n=this.value.rawValue.length-1,i=this.props_.get("min"),s=this.props_.get("max"),r=[];this.value.rawValue.forEach((o,u)=>{if(void 0===o)return;const a=Pe(u,0,n,0,e),l=Pe(o,i,s,t,0);r.push([a,l].join(","))}),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const o=this.tooltipElem_,u=this.value.rawValue[this.cursor_.rawValue];if(void 0===u)return void o.classList.remove(pr("t","a"));const a=Pe(this.cursor_.rawValue,0,n,0,e),l=Pe(u,i,s,t,0);o.style.left=`${a}px`,o.style.top=`${l}px`,o.textContent=`${this.formatter_(u)}`,o.classList.contains(pr("t","a"))||(o.classList.add(pr("t","a"),pr("t","in")),tt(o),o.classList.remove(pr("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class mr{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=ne(-1),this.view=new dr(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),nt(e)){const e=new jn(this.view.element);e.emitter.on("down",this.onGraphPointerDown_),e.emitter.on("move",this.onGraphPointerMove_),e.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}importProps(e){return Xe(e,null,e=>({max:e.required.number,min:e.required.number}),e=>(this.props.set("max",e.max),this.props.set("min",e.min),!0))}exportProps(){return We(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(Pe(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){e.data.point?this.cursor_.rawValue=Math.floor(Pe(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Dr(e){return z(e.format)?ye(2):e.format}function vr(e){return"graph"===e.view}Pt({id:"monitor-number",type:"monitor",accept:(e,t)=>{if("number"!=typeof e)return null;const n=Ye(t,e=>({format:e.optional.function,max:e.optional.number,min:e.optional.number,readonly:e.required.constant(!0),rows:e.optional.number,view:e.optional.string}));return n?{initialValue:e,params:n}:null},binding:{defaultBufferSize:e=>vr(e)?64:1,reader:e=>Ae},controller:e=>vr(e.params)?function(e){var t,n,i;return new mr(e.document,{formatter:Dr(e.params),rows:null!==(t=e.params.rows)&&void 0!==t?t:sr.defaultRows,props:ie.fromObject({max:null!==(n=e.params.max)&&void 0!==n?n:100,min:null!==(i=e.params.min)&&void 0!==i?i:0}),value:e.value,viewProps:e.viewProps})}(e):function(e){var t;return 1===e.value.rawValue.length?new cr(e.document,{formatter:Dr(e.params),value:e.value,viewProps:e.viewProps}):new ur(e.document,{formatter:Dr(e.params),rows:null!==(t=e.params.rows)&&void 0!==t?t:sr.defaultRows,value:e.value,viewProps:e.viewProps})}(e),api:e=>e.controller.valueController instanceof mr?new hr(e.controller):null}),Pt({id:"monitor-string",type:"monitor",accept:(e,t)=>{if("string"!=typeof e)return null;const n=Ye(t,e=>({multiline:e.optional.boolean,readonly:e.required.constant(!0),rows:e.optional.number}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>yn},controller:e=>{var t;const n=e.value;return n.rawValue.length>1||e.params.multiline?new ur(e.document,{formatter:Pn,rows:null!==(t=e.params.rows)&&void 0!==t?t:sr.defaultRows,value:n,viewProps:e.viewProps}):new cr(e.document,{formatter:Pn,value:n,viewProps:e.viewProps})}});const Cr=pt("txtr");class wr{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Cr()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("textarea");n.rows=t.rows,n.cols=22,n.placeholder=t.placeholder,n.classList.add(Cr("i")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){this.inputElement.value=this.value_.rawValue}onChange_(){this.refresh()}}class fr{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.rows=t.rows,this.placeholder=t.placeholder,this.view=new wr(e,{value:this.value,viewProps:this.viewProps,rows:this.rows,placeholder:this.placeholder}),this.view.inputElement.addEventListener("keyup",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget.value;this.value.rawValue=t,this.view.refresh()}}const gr=[Pt({id:"input-template",type:"input",accept(e,t){if("string"!=typeof e)return null;const n=Ye(t,e=>({view:e.required.constant("textarea"),rows:e.optional.number,placeholder:e.optional.string}));return n?{initialValue:e,params:n}:null},binding:{reader:e=>e=>"string"==typeof e?e:"",writer:e=>(e,t)=>{e.write(t)}},controller(e){var t,n;return new fr(e.document,{value:e.value,rows:null!==(t=e.params.rows)&&void 0!==t?t:3,placeholder:null!==(n=e.params.placeholder)&&void 0!==n?n:"Enter text here",viewProps:e.viewProps})}})],Er=Object.freeze(Object.defineProperty({__proto__:null,css:".tp-txtrv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-txtrv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtrv:hover{background-color:var(--in-bg-h)}.tp-txtrv:focus{background-color:var(--in-bg-f)}.tp-txtrv:active{background-color:var(--in-bg-a)}.tp-txtrv:disabled{opacity:.5}.tp-txtrv{display:block;height:auto;padding-bottom:0;overflow:hidden;position:relative}.tp-txtrv.tp-v-disabled{opacity:.5}.tp-txtrv .tp-txtrv_i{font-family:var(--font-family);background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-size:11px;padding:4px;line-height:16px;min-width:0;width:100%;border:none;height:100%;resize:none;margin-bottom:-8px}.tp-txtrv .tp-txtrv_i:focus{outline:none}",id:"textarea",plugins:gr},Symbol.toStringTag,{value:"Module"}));var _r={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},br={isSpaceSeparator:e=>"string"==typeof e&&_r.Space_Separator.test(e),isIdStartChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||_r.ID_Start.test(e)),isIdContinueChar:e=>"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||_r.ID_Continue.test(e)),isDigit:e=>"string"==typeof e&&/[0-9]/.test(e),isHexDigit:e=>"string"==typeof e&&/[0-9A-Fa-f]/.test(e)};let Fr,Ar,yr,Pr,Br,xr,Vr,kr,Sr;function Lr(e,t,n){const i=e[t];if(null!=i&&"object"==typeof i)if(Array.isArray(i))for(let s=0;s<i.length;s++){const e=String(s),t=Lr(i,e,n);void 0===t?delete i[e]:Object.defineProperty(i,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}else for(const s in i){const e=Lr(i,s,n);void 0===e?delete i[s]:Object.defineProperty(i,s,{value:e,writable:!0,enumerable:!0,configurable:!0})}return n.call(e,t,i)}let jr,Mr,Nr,Or,Rr;function Ir(){for(jr="default",Mr="",Nr=!1,Or=1;;){Rr=Tr();const e=$r[jr]();if(e)return e}}function Tr(){if(Fr[Pr])return String.fromCodePoint(Fr.codePointAt(Pr))}function Kr(){const e=Tr();return"\n"===e?(Br++,xr=0):e?xr+=e.length:xr++,e&&(Pr+=e.length),e}const $r={default(){switch(Rr){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void Kr();case"/":return Kr(),void(jr="comment");case void 0:return Kr(),Ur("eof")}if(!br.isSpaceSeparator(Rr))return $r[Ar]();Kr()},comment(){switch(Rr){case"*":return Kr(),void(jr="multiLineComment");case"/":return Kr(),void(jr="singleLineComment")}throw Yr(Kr())},multiLineComment(){switch(Rr){case"*":return Kr(),void(jr="multiLineCommentAsterisk");case void 0:throw Yr(Kr())}Kr()},multiLineCommentAsterisk(){switch(Rr){case"*":return void Kr();case"/":return Kr(),void(jr="default");case void 0:throw Yr(Kr())}Kr(),jr="multiLineComment"},singleLineComment(){switch(Rr){case"\n":case"\r":case"\u2028":case"\u2029":return Kr(),void(jr="default");case void 0:return Kr(),Ur("eof")}Kr()},value(){switch(Rr){case"{":case"[":return Ur("punctuator",Kr());case"n":return Kr(),zr("ull"),Ur("null",null);case"t":return Kr(),zr("rue"),Ur("boolean",!0);case"f":return Kr(),zr("alse"),Ur("boolean",!1);case"-":case"+":return"-"===Kr()&&(Or=-1),void(jr="sign");case".":return Mr=Kr(),void(jr="decimalPointLeading");case"0":return Mr=Kr(),void(jr="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Mr=Kr(),void(jr="decimalInteger");case"I":return Kr(),zr("nfinity"),Ur("numeric",1/0);case"N":return Kr(),zr("aN"),Ur("numeric",NaN);case'"':case"'":return Nr='"'===Kr(),Mr="",void(jr="string")}throw Yr(Kr())},identifierNameStartEscape(){if("u"!==Rr)throw Yr(Kr());Kr();const e=Hr();switch(e){case"$":case"_":break;default:if(!br.isIdStartChar(e))throw Wr()}Mr+=e,jr="identifierName"},identifierName(){switch(Rr){case"$":case"_":case"‌":case"‍":return void(Mr+=Kr());case"\\":return Kr(),void(jr="identifierNameEscape")}if(!br.isIdContinueChar(Rr))return Ur("identifier",Mr);Mr+=Kr()},identifierNameEscape(){if("u"!==Rr)throw Yr(Kr());Kr();const e=Hr();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!br.isIdContinueChar(e))throw Wr()}Mr+=e,jr="identifierName"},sign(){switch(Rr){case".":return Mr=Kr(),void(jr="decimalPointLeading");case"0":return Mr=Kr(),void(jr="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Mr=Kr(),void(jr="decimalInteger");case"I":return Kr(),zr("nfinity"),Ur("numeric",Or*(1/0));case"N":return Kr(),zr("aN"),Ur("numeric",NaN)}throw Yr(Kr())},zero(){switch(Rr){case".":return Mr+=Kr(),void(jr="decimalPoint");case"e":case"E":return Mr+=Kr(),void(jr="decimalExponent");case"x":case"X":return Mr+=Kr(),void(jr="hexadecimal")}return Ur("numeric",0*Or)},decimalInteger(){switch(Rr){case".":return Mr+=Kr(),void(jr="decimalPoint");case"e":case"E":return Mr+=Kr(),void(jr="decimalExponent")}if(!br.isDigit(Rr))return Ur("numeric",Or*Number(Mr));Mr+=Kr()},decimalPointLeading(){if(br.isDigit(Rr))return Mr+=Kr(),void(jr="decimalFraction");throw Yr(Kr())},decimalPoint(){switch(Rr){case"e":case"E":return Mr+=Kr(),void(jr="decimalExponent")}return br.isDigit(Rr)?(Mr+=Kr(),void(jr="decimalFraction")):Ur("numeric",Or*Number(Mr))},decimalFraction(){switch(Rr){case"e":case"E":return Mr+=Kr(),void(jr="decimalExponent")}if(!br.isDigit(Rr))return Ur("numeric",Or*Number(Mr));Mr+=Kr()},decimalExponent(){switch(Rr){case"+":case"-":return Mr+=Kr(),void(jr="decimalExponentSign")}if(br.isDigit(Rr))return Mr+=Kr(),void(jr="decimalExponentInteger");throw Yr(Kr())},decimalExponentSign(){if(br.isDigit(Rr))return Mr+=Kr(),void(jr="decimalExponentInteger");throw Yr(Kr())},decimalExponentInteger(){if(!br.isDigit(Rr))return Ur("numeric",Or*Number(Mr));Mr+=Kr()},hexadecimal(){if(br.isHexDigit(Rr))return Mr+=Kr(),void(jr="hexadecimalInteger");throw Yr(Kr())},hexadecimalInteger(){if(!br.isHexDigit(Rr))return Ur("numeric",Or*Number(Mr));Mr+=Kr()},string(){switch(Rr){case"\\":return Kr(),void(Mr+=function(){switch(Tr()){case"b":return Kr(),"\b";case"f":return Kr(),"\f";case"n":return Kr(),"\n";case"r":return Kr(),"\r";case"t":return Kr(),"\t";case"v":return Kr(),"\v";case"0":if(Kr(),br.isDigit(Tr()))throw Yr(Kr());return"\0";case"x":return Kr(),function(){let e="",t=Tr();if(!br.isHexDigit(t))throw Yr(Kr());if(e+=Kr(),t=Tr(),!br.isHexDigit(t))throw Yr(Kr());return e+=Kr(),String.fromCodePoint(parseInt(e,16))}();case"u":return Kr(),Hr();case"\n":case"\u2028":case"\u2029":return Kr(),"";case"\r":return Kr(),"\n"===Tr()&&Kr(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw Yr(Kr())}return Kr()}());case'"':return Nr?(Kr(),Ur("string",Mr)):void(Mr+=Kr());case"'":return Nr?void(Mr+=Kr()):(Kr(),Ur("string",Mr));case"\n":case"\r":throw Yr(Kr());case"\u2028":case"\u2029":!function(e){console.warn(`JSON5: '${Zr(e)}' in strings is not valid ECMAScript; consider escaping`)}(Rr);break;case void 0:throw Yr(Kr())}Mr+=Kr()},start(){switch(Rr){case"{":case"[":return Ur("punctuator",Kr())}jr="value"},beforePropertyName(){switch(Rr){case"$":case"_":return Mr=Kr(),void(jr="identifierName");case"\\":return Kr(),void(jr="identifierNameStartEscape");case"}":return Ur("punctuator",Kr());case'"':case"'":return Nr='"'===Kr(),void(jr="string")}if(br.isIdStartChar(Rr))return Mr+=Kr(),void(jr="identifierName");throw Yr(Kr())},afterPropertyName(){if(":"===Rr)return Ur("punctuator",Kr());throw Yr(Kr())},beforePropertyValue(){jr="value"},afterPropertyValue(){switch(Rr){case",":case"}":return Ur("punctuator",Kr())}throw Yr(Kr())},beforeArrayValue(){if("]"===Rr)return Ur("punctuator",Kr());jr="value"},afterArrayValue(){switch(Rr){case",":case"]":return Ur("punctuator",Kr())}throw Yr(Kr())},end(){throw Yr(Kr())}};function Ur(e,t){return{type:e,value:t,line:Br,column:xr}}function zr(e){for(const t of e){if(Tr()!==t)throw Yr(Kr());Kr()}}function Hr(){let e="",t=4;for(;t-- >0;){const t=Tr();if(!br.isHexDigit(t))throw Yr(Kr());e+=Kr()}return String.fromCodePoint(parseInt(e,16))}const qr={start(){if("eof"===Vr.type)throw Xr();Gr()},beforePropertyName(){switch(Vr.type){case"identifier":case"string":return kr=Vr.value,void(Ar="afterPropertyName");case"punctuator":return void Jr();case"eof":throw Xr()}},afterPropertyName(){if("eof"===Vr.type)throw Xr();Ar="beforePropertyValue"},beforePropertyValue(){if("eof"===Vr.type)throw Xr();Gr()},beforeArrayValue(){if("eof"===Vr.type)throw Xr();"punctuator"!==Vr.type||"]"!==Vr.value?Gr():Jr()},afterPropertyValue(){if("eof"===Vr.type)throw Xr();switch(Vr.value){case",":return void(Ar="beforePropertyName");case"}":Jr()}},afterArrayValue(){if("eof"===Vr.type)throw Xr();switch(Vr.value){case",":return void(Ar="beforeArrayValue");case"]":Jr()}},end(){}};function Gr(){let e;switch(Vr.type){case"punctuator":switch(Vr.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=Vr.value}if(void 0===Sr)Sr=e;else{const t=yr[yr.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,kr,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(null!==e&&"object"==typeof e)yr.push(e),Ar=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{const e=yr[yr.length-1];Ar=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}}function Jr(){yr.pop();const e=yr[yr.length-1];Ar=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function Yr(e){return Qr(void 0===e?`JSON5: invalid end of input at ${Br}:${xr}`:`JSON5: invalid character '${Zr(e)}' at ${Br}:${xr}`)}function Xr(){return Qr(`JSON5: invalid end of input at ${Br}:${xr}`)}function Wr(){return xr-=5,Qr(`JSON5: invalid identifier character at ${Br}:${xr}`)}function Zr(e){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){const t=e.charCodeAt(0).toString(16);return"\\x"+("00"+t).substring(t.length)}return e}function Qr(e){const t=new SyntaxError(e);return t.lineNumber=Br,t.columnNumber=xr,t}const eo={parse:function(e,t){Fr=String(e),Ar="start",yr=[],Pr=0,Br=1,xr=0,Vr=void 0,kr=void 0,Sr=void 0;do{Vr=Ir(),qr[Ar]()}while("eof"!==Vr.type);return"function"==typeof t?Lr({"":Sr},"",t):Sr},stringify:function(e,t,n){const i=[];let s,r,o,u="",a="";if(null==t||"object"!=typeof t||Array.isArray(t)||(n=t.space,o=t.quote,t=t.replacer),"function"==typeof t)r=t;else if(Array.isArray(t)){s=[];for(const e of t){let t;"string"==typeof e?t=e:("number"==typeof e||e instanceof String||e instanceof Number)&&(t=String(e)),void 0!==t&&s.indexOf(t)<0&&s.push(t)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),"number"==typeof n?n>0&&(n=Math.min(10,Math.floor(n)),a="          ".substr(0,n)):"string"==typeof n&&(a=n.substr(0,10)),l("",{"":e});function l(e,t){let n=t[e];switch(null!=n&&("function"==typeof n.toJSON5?n=n.toJSON5(e):"function"==typeof n.toJSON&&(n=n.toJSON(e))),r&&(n=r.call(t,e,n)),n instanceof Number?n=Number(n):n instanceof String?n=String(n):n instanceof Boolean&&(n=n.valueOf()),n){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof n?c(n):"number"==typeof n?String(n):"object"==typeof n?Array.isArray(n)?function(e){if(i.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");i.push(e);let t=u;u+=a;let n,s=[];for(let i=0;i<e.length;i++){const t=l(String(i),e);s.push(void 0!==t?t:"null")}if(0===s.length)n="[]";else if(""===a){n="["+s.join(",")+"]"}else{let e=",\n"+u,i=s.join(e);n="[\n"+u+i+",\n"+t+"]"}return i.pop(),u=t,n}(n):function(e){if(i.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");i.push(e);let t=u;u+=a;let n,r=s||Object.keys(e),o=[];for(const i of r){const t=l(i,e);if(void 0!==t){let e=h(i)+":";""!==a&&(e+=" "),e+=t,o.push(e)}}if(0===o.length)n="{}";else{let e;if(""===a)e=o.join(","),n="{"+e+"}";else{let i=",\n"+u;e=o.join(i),n="{\n"+u+e+",\n"+t+"}"}}return i.pop(),u=t,n}(n):void 0}function c(e){const t={"'":.1,'"':.2},n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let i="";for(let r=0;r<e.length;r++){const s=e[r];switch(s){case"'":case'"':t[s]++,i+=s;continue;case"\0":if(br.isDigit(e[r+1])){i+="\\x00";continue}}if(n[s])i+=n[s];else{if(s<" "){let e=s.charCodeAt(0).toString(16);i+="\\x"+("00"+e).substring(e.length);continue}i+=s}}const s=o||Object.keys(t).reduce((e,n)=>t[e]<t[n]?e:n);return i=i.replace(new RegExp(s,"g"),n[s]),s+i+s}function h(e){if(0===e.length)return c(e);const t=String.fromCodePoint(e.codePointAt(0));if(!br.isIdStartChar(t))return c(e);for(let n=t.length;n<e.length;n++)if(!br.isIdContinueChar(String.fromCodePoint(e.codePointAt(n))))return c(e);return e}}};var to=eo;const{withAsyncContext:no,defineComponent:io}=await e("vue"),{resolveDynamicComponent:so,normalizeProps:ro,openBlock:oo,createBlock:uo,mergeProps:ao,createCommentVNode:lo}=await e("vue"),{shallowRef:co,onBeforeUnmount:ho}=await e("vue"),po=io({__name:"oneRemoteCom",props:{remoteName:{},comName:{},attrsData:{},config:{}},async setup(e){let t,n;const i=e,s=co(null),r=E.getRemote(i.remoteName);r&&(s.value=([t,n]=no(()=>r.loadComponentModule(`./${i.comName}`)),t=await t,n(),t));const o=function(e,t,n){const i=new C({container:e,title:"配置"});return i.registerPlugin(Er),Object.entries(t).forEach(([e,t])=>{switch(t.com){case"Select":i.addBinding(n,e,{label:t.name,options:t.options?.reduce((e,t)=>(e[t.label]=t.value,e),{})}).on("change",t=>{n[e]=t.value});break;case"ColorPicker":i.addBinding(n,e,{label:t.name,picker:"inline"}).on("change",t=>{n[e]=t.value});break;case"Switch":i.addBinding(n,e,{label:t.name}).on("change",t=>{n[e]=t.value});break;case"Slider":i.addBinding(n,e,{label:t.name,min:t.min,max:t.max,step:t.step}).on("change",t=>{n[e]=t.value});break;case"jsonText":i.addBinding(n,e,{view:"textarea",label:"JSON 数据",rows:8,placeholder:"请在此输入 JSON..."}),n.jsonError="",n.jsonTextChangeNumber=0;const s=i.addBinding(n,"jsonError",{label:"JSON错误",readonly:!0});i.addButton({title:"应用JSON数据"}).on("click",()=>{try{const t=to.parse(n[e]);n.jsonError="JSON 校验成功",s.refresh(),console.log("JSON 校验成功：",t),n.jsonTextChangeNumber++}catch(t){n.jsonError=t.message,s.refresh(),console.warn("JSON 格式错误",t)}});break;default:console.warn(`未知组件类型：${t.com}`)}}),i}(document.getElementById("pane"),i.config,i.attrsData);return ho(()=>{o&&o.dispose()}),(e,t)=>s.value?(oo(),uo(so(s.value),ro(ao({key:0},e.attrsData)),null,16)):lo("",!0)}}),{defineComponent:mo}=await e("vue"),{openBlock:Do,createBlock:vo,createCommentVNode:Co,unref:wo,withCtx:fo,createVNode:go,createElementVNode:Eo,mergeProps:_o,Suspense:bo,resolveComponent:Fo,Fragment:Ao,createElementBlock:yo}=await e("vue"),{SRGBColorSpace:Po,BasicShadowMap:Bo,NoToneMapping:xo}=await e("three"),{nextTick:Vo,reactive:ko,ref:So}=await e("vue"),Lo=mo({__name:"readConfig",setup(e){const t=ko({clearColor:"#201919",shadows:!0,alpha:!1,shadowMapType:Bo,outputColorSpace:Po,toneMapping:xo}),i=e=>{s.value=e,console.log("服务配置加载完成：",e)},s=So(null),r=So(null),o=So(null),u=So(null),l=e=>{console.log("选中组件",e),r.value&&r.value.comName===e.type||(r.value=null,o.value={},u.value=null,Vo(()=>{o.value=e?.default||{},u.value=e?.config||null,r.value={remoteName:s.value.name,comName:e.type,position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]},e.defaultObject3D?.position&&(r.value.position=[e.defaultObject3D.position.x,e.defaultObject3D.position.y,e.defaultObject3D.position.z]),e.defaultObject3D?.rotation&&(r.value.rotation=[e.defaultObject3D.rotation.x,e.defaultObject3D.rotation.y,e.defaultObject3D.rotation.z]),e.defaultObject3D?.scale&&(r.value.scale=[e.defaultObject3D.scale.x,e.defaultObject3D.scale.y,e.defaultObject3D.scale.z])}))},c=()=>{r.value=null,s.value=null};return(e,h)=>{const p=Fo("TresCanvas");return Do(),yo(Ao,null,[go(wo(a),null,{default:fo(()=>[s.value?(Do(),vo(U,{key:1,data:s.value,selectedType:r.value?.comName,onSelect:l,onReset:c,style:{"z-index":"99999",position:"absolute",left:"10px",top:"50px"}},null,8,["data","selectedType"])):(Do(),vo(V,{key:0,onLoaded:i,style:{"z-index":"99999",position:"absolute",left:"10px",top:"50px"}}))]),_:1}),go(p,_o(t,{"window-size":""}),{default:fo(()=>[h[0]||(h[0]=Eo("TresPerspectiveCamera",{position:[5,5,5]},null,-1)),go(wo(n)),h[1]||(h[1]=Eo("TresAmbientLight",{intensity:.5},null,-1)),h[2]||(h[2]=Eo("TresDirectionalLight",{position:[10,10,10],intensity:1.5},null,-1)),(Do(),vo(bo,null,{default:fo(()=>[r.value?(Do(),vo(po,_o({key:0},r.value,{attrsData:o.value,config:u.value}),null,16,["attrsData","config"])):Co("",!0)]),_:1})),h[3]||(h[3]=Eo("TresGridHelper",{"position-y":.1},null,-1))]),_:1},16)],64)}}});export{Lo as default};

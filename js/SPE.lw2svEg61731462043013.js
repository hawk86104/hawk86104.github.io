import{_ as t,cn as e,bI as i,C as n,k as s,as as r,b as o,V as a}from"./three.wKRaqyB-1731462043013.js";const c=u;!function(t,e){const i=u,n=p();for(;;)try{if(728958===-parseInt(i(618))/1+parseInt(i(824))/2*(-parseInt(i(626))/3)+-parseInt(i(621))/4*(-parseInt(i(599))/5)+-parseInt(i(532))/6*(parseInt(i(692))/7)+parseInt(i(806))/8+-parseInt(i(666))/9+parseInt(i(651))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){h(this,(function(){const t=u,e=new RegExp(t(753)),i=new RegExp(t(482),"i"),n=m(t(659));e[t(833)](n+t(669))&&i[t(833)](n+t(577))?m():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(t,e){const i=p();return(u=function(t,e){return i[t-=363]})(t,e)}l(void 0,(function(){const t=u;let e;try{e=Function(t(728)+t(453)+");")()}catch(s){e=window}const i=e[t(710)]=e[t(710)]||{},n=["log",t(760),t(627),t(707),t(485),t(622),t(561)];for(let r=0;r<n.length;r++){const e=l.constructor[t(572)][t(628)](l),s=n[r],o=i[s]||e;e[t(399)]=l.bind(l),e[t(761)]=o.toString[t(628)](o),i[s]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};function p(){const t=["rotateTexture","trace","attribute vec4 color;","paramsArray","      vec3 axis = unpackRotationAxis( rotation.x );","    force += vel;","       float y = 1.0 - gl_PointCoord.y - 0.5;","indexOf","        float columnNorm = column / framesX;","duration","push","#define PACKED_COLOR_SIZE 256.0","prototype","      rotationMatrix = getRotationMatrix( axis, angle );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","color","_assignAbsLifetimeValue","input","_checkParticleAges","_createBufferAttribute","generateUUID","group","_createNewWhenPoolEmpty","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","needsUpdate","value","logdepthbuf_pars_fragment","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    return min(a + b, 1.0);","bufferUpdateRanges","subarray","OBJECT","_axis","    highp float positionInTime = (age / maxAge);","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","_randomise","attribute vec4 opacity;","float getAlive() {","REVISION","5LErwMy","particlesPerSecond","attributeKeys","    force *= drag;","        float framesX = vSpriteSheet.x;","   vec3 c = vec3( 0.0 );","NUMBER","particles, can support only","randomise","        float rowNorm = vSpriteSheet.w;","uniform float scale;","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","copy","multiplyScalar","       float x = gl_PointCoord.x - 0.5;","   c.g = g / PACKED_COLOR_DIVISOR;","transparent","StaticDrawUsage","indexOffset","733593ZfRxfb","Vector3","float or(float a, float b) {","4478456uKsCeK","table","attribute vec4 size;","Color","attributeOffset","3XjCmjg","info","bind","isArray","  return 1.0 - when_gt(x, y);","setMat3","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","stateObject","           unpackColor( color.w )","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","        pos = getRotation( pos, positionInTime );","   }","clone","randomVector3OnSphere","shaderChunks","rotation","   return params.y;","Will not resize.","scale","_decrementParticleCount","alive","TypedArrayConstructor","float and(float a, float b) {","random","    ","28493250OFLfLL","mesh","material","_spreadClamp","       float s = sin(angle);","uniform vec4 textureAnimation;","resetUpdateRange","       fIndex = float( i );","init","setNumber","blending","float when_lt(float x, float y) {","#ifdef SHOULD_ROTATE_PARTICLES","_radiusScale","_distribution","10448262WpQebF","elements","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","chain","shaders","emitterIDs","array","emitters","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","   return params.x;","size","activationEnd","add","    return value;","        float totalFrames = textureAnimation.z;","attributeCount","defines","void main() {","age","    highp float isAlive = when_gt( alive, 0.0 );","wiggle","attributeEnd","   return acceleration.xyz * age;","roundToNearestMultiple","       float oc = 1.0 - c;","        vSpriteSheet.w = rowNorm;","21ozlEPH","_createGetterSetters","    #else","flagUpdate","        vSpriteSheet.z = columnNorm;","_radius","   return c;","getHex","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","_poolCreationSettings","SHOULD_WIGGLE_PARTICLES","    return 1.0 - abs( sign( x - y ) );","count","radiusScale","rotationCenter","error","        float perspective = 1.0;","lerp","console","        float wiggleAmount = positionInTime * getWiggle();","randomDirectionVector3OnSphere","ensureTypedArg","SHOULD_CALCULATE_SPRITE","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","_angleSpread","    #ifdef SHOULD_WIGGLE_PARTICLES","randomVector3OnDisc","ensureInstanceOf","radius","sin","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","fog","    gl_Position = projectionMatrix * mvPosition;","   float b = mod( hex, PACKED_COLOR_SIZE );","defineProperty","axisSpread","return (function() ","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","           return pos;","usage","varyings","attributes","_resetParticle","distribution","texture","float when_le(float x, float y) {","Emitter does not belong to a group, cannot remove.","grow","    #ifdef SHOULD_ROTATE_PARTICLES","    highp float alive = getAlive();","   c.b = b / PACKED_COLOR_DIVISOR;","apply","lerpTypeAgnostic","distributions","clamp","bufferUpdateCount","acceleration","Invalid argument types, or argument types do not match:","sqrt","action","function *\\( *\\)","TypedArrayHelper","attribute vec3 rotationCenter;","angleSpread","_updateBuffers","frameCount","params","warn","toString","SPHERE","geometry","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","   c *= vec3( 2.0 );","  return 1.0 - when_lt(x, y);","_assignColorValue","_ensureTypedArray","releaseIntoPool","    }","resetFlags","    vec4 rotatedTexture = texture2D( tex, vUv );","_applyAttributesToGeometry","unpackRotationAxis","dispose","floor","addPool","while (true) {}","setVec3","       float c = cos( -vAngle );","forceUpdateAll","       float s = sin( -vAngle );","disable","ensureArrayInstanceOf","        float wiggleCos = isAlive * cos( wiggleAmount );","BOX","        pos.z += wiggleSin;","pop","   return params.z;","    vec3 pos = vec3( position );","activeMultiplier","bufferAttribute","       );","colorOverLifetime","min","        vSpriteSheet.y = 1.0 / framesY;","        pos.x += wiggleSin;","_assignPositionValue","    varying float vAngle;","      if( rotation.y == 0.0 ) {","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","setFromArray","#ifdef SHOULD_ROTATE_TEXTURE","Group","159656WeBuci","counter","        float row = floor( (frameNumber - column) / framesX );","_updateDefines","set","_updateAttributeUpdateRange","textureLoop","runTime","MathUtils","spreadClamp","alphaTest","_axisSpread","      vec3 center = rotationCenter;","constructor","getLength","_assignRotationValue","`emitter` argument must be instance of SPE.Emitter. Was provided with:","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","1987544csjjlH","uniform float deltaTime;","setVec4Components","    return a * b;","hasPerspective","replace","attribute vec4 acceleration;","deltaTime","BufferGeometry","test","        float column = floor(mod( frameNumber, framesX ));","    #ifdef COLORIZE","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","uniform float runTime;","#define PACKED_COLOR_DIVISOR 255.0","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","_onRemove","DynamicDrawUsage","        float loopCount = textureAnimation.w;","        pos.y += wiggleCos;","float getAge() {","float when_ge(float x, float y) {","_assignForceValue","ShaderChunk","typeSizeMap","   return params.w;","activeParticleCount","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","      float angle = 0.0;","Emitter already exists in this group. Will not add again.","fog_pars_fragment","uuid","arrayType","_triggerSingleEmitter","    #ifdef ALPHATEST","textureFrames","distributionClamp","maxAge","    #ifdef SHOULD_ROTATE_TEXTURE","       if ( vColor.w < float(ALPHATEST) ) discard;","SHOULD_ROTATE_TEXTURE","      mat4 rotationMatrix;","randomFloat","depthTest","setDrawRange","randomDirectionVector3OnDisc","activationIndex","particleCount","paramFetchingFunctions","    float shouldApplyValue = 0.0;","shrink","getValueAtIndex","_calculatePPSValue","setVec3Components","object","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","__proto__","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","_attributesNeedRefresh","onParticleSpawn","maxParticleCount","AdditiveBlending","floatOverLifetime","_resetBufferRanges","_activateParticles","_static","interpolateArray","updateCounts","    highp float value = 0.0;","setColor","BOOLEAN","    highp float age = getAge();","velocity","componentSize","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","attribute vec4 params;","call","_assignAngleValue","logdepthbuf_vertex","cos","colorize","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","max","_assignParamsValue","drag","resetDynamic","Texture","_updateUniforms","type","_value","Argument is not instanceof SPE.Emitter:","float getMaxAge() {","randomColorAsHex","NEGATIVE_INFINITY","      vec3 translated;","setMat4","angle","ensureValueOverLifetimeCompliance","_pool","        float columnNorm = vSpriteSheet.z;","        float wiggleSin = isAlive * sin( wiggleAmount );","    highp float maxAge = getMaxAge();","addEmitter","        float perspective = scale / length( mvPosition.xyz );","updateMin","updateRange","Vector4","       vec3 c = isAlive * getColorOverLifetime(","_setBufferUpdateRanges","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",'{}.constructor("return this")( )',"updateFlags","ShaderMaterial","setUpdateRange","hasOwnProperty","BufferAttribute","setSize","SPE.Group: maxParticleCount exceeded. Requesting","#endif","removeEmitter","getFromPool","_attributesNeedDynamicReset","normalize","center","enable","_rotationCenter","randomVector3","LINE","getPool","spe","_setAttributeOffset","_distributionClamp","valueOverLifetimeLength","updateMax","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","abs","arrayValuesAreEqual","       float c = cos(angle);","_angle","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","    gl_PointSize = pointSizePerspective;","join","exception","getPackedRotationAxis","    vec3 outgoingLight = vColor.xyz;","ShaderAttribute","updateMap","    varying vec4 vSpriteSheet;","unshift","vec3 unpackRotationAxis( in float hex ) {","splice","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","      translated = rotationCenter - pos;","    return max(sign(x - y), 0.0);","uniform sampler2D tex;","branchAvoidanceFunctions","reset","    vColor = vec4( c, o );","    force += accel * age;","uniforms","SHOULD_ROTATE_PARTICLES","Vector2","getComponentValueAtIndex","bufferUpdateKeys","    vec3 force = vec3( 0.0 );","           positionInTime,","_incrementParticleCount","string","        vSpriteSheet.x = 1.0 / framesX;","number","opacity","triggerPoolEmitter","length","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    #endif","function","_assignValue","       axis = normalize(axis);","setVec2Components","        float rowNorm = row / framesY;","common","                   0.0,                                0.0,                                0.0,                                1.0);","dynamicBuffer","isStatic","offset","typedArray","   c.r = r / PACKED_COLOR_DIVISOR;","gger","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","743310jWRgdy","   return modelViewMatrix * vec4( position, 1.0 );","_spread","attribute vec4 angle;","logdepthbuf_fragment","spread","undefined","ensureArrayTypedArg","    #ifdef SHOULD_CALCULATE_SPRITE","depthWrite","    vec3 accel = getAcceleration( age );","boolean","Emitter","fog_fragment","   c -= vec3( 1.0 );","types","fog_vertex","textureFrameCount","utils","position","direction","forceFetchingFunctions","SPE.Group pool ran out.","DISC","    vec3 value = vec3( 0.0 );","tick","fixedTimeStep","       vec3 c = vec3(1.0);"];return(p=function(){return t})()}typeof define===c(518)&&define.amd?define(c(472),f):typeof exports!==c(538)&&typeof module!==c(538)&&(module.exports=f),f[c(754)]=function(t,e,i,n){const s=c;this[s(416)]=i||1,this[s(676)]=e||1,this.TypedArrayConstructor=t||Float32Array,this[s(672)]=new t(e*this[s(416)]),this[s(617)]=n||0},f.TypedArrayHelper[c(819)]=f[c(754)],f[c(754)][c(572)].setSize=function(t,e){const i=c,n=this[i(672)][i(515)];return!e&&(t*=this[i(416)]),t<n?this.shrink(t):t>n?this.grow(t):void console[i(627)]("TypedArray is already of size:",t+".",i(643))},f[c(754)][c(572)][c(393)]=function(t){const e=c;return this[e(672)]=this[e(672)][e(590)](0,t),this[e(676)]=t,this},f.TypedArrayHelper[c(572)][c(740)]=function(t){const e=c,i=this.array,n=new(this[e(647)])(t);return n[e(810)](i),this[e(672)]=n,this[e(676)]=t,this},f.TypedArrayHelper[c(572)][c(493)]=function(t,e){const i=c;t*=this[i(416)],e*=this[i(416)];const n=[],s=this.array,r=s.length;for(let o=0;o<r;++o)(o<t||o>=e)&&n[i(570)](s[o]);return this[i(803)](0,n),this},f[c(754)][c(572)][c(803)]=function(t,e){const i=c,n=t+e[i(515)];return n>this[i(672)].length?this.grow(n):n<this.array.length&&this[i(393)](n),this[i(672)].set(e,this[i(617)]+t),this},f.TypedArrayHelper[c(572)].setVec2=function(t,e){return this.setVec2Components(t,e.x,e.y)},f[c(754)].prototype[c(521)]=function(t,e,i){const n=c,s=this[n(672)],r=this[n(617)]+t*this.componentSize;return s[r]=e,s[r+1]=i,this},f[c(754)].prototype.setVec3=function(t,e){return this[c(396)](t,e.x,e.y,e.z)},f[c(754)][c(572)][c(396)]=function(t,e,i,n){const s=this[c(672)],r=this.indexOffset+t*this.componentSize;return s[r]=e,s[r+1]=i,s[r+2]=n,this},f[c(754)][c(572)].setVec4=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},f[c(754)].prototype[c(826)]=function(t,e,i,n,s){const r=c,o=this.array,a=this[r(617)]+t*this.componentSize;return o[a]=e,o[a+1]=i,o[a+2]=n,o[a+3]=s,this},f.TypedArrayHelper.prototype[c(631)]=function(t,e){const i=c;return this[i(803)](this[i(617)]+t*this[i(416)],e.elements)},f[c(754)].prototype[c(438)]=function(t,e){const i=c;return this[i(803)](this[i(617)]+t*this.componentSize,e[i(667)])},f[c(754)][c(572)][c(412)]=function(t,e){return this[c(396)](t,e.r,e.g,e.b)},f[c(754)][c(572)][c(660)]=function(t,e){const i=c;return this[i(672)][this[i(617)]+t*this[i(416)]]=e,this},f[c(754)][c(572)][c(394)]=function(t){const e=c;return this[e(672)][this[e(617)]+t]},f.TypedArrayHelper.prototype[c(505)]=function(t){const e=c;return this[e(672)][e(590)](this[e(617)]+t*this[e(416)])},f[c(488)]=function(t,e,i){const n=c,s=f[n(488)][n(367)];this[n(431)]=typeof t===n(510)&&s[n(457)](t)?t:"f",this.componentSize=s[this[n(431)]],this[n(375)]=i||Float32Array,this[n(528)]=null,this[n(792)]=null,this.dynamicBuffer=!!e,this.updateMin=0,this.updateMax=0},f.ShaderAttribute[c(819)]=f[c(488)],f[c(488)][c(367)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f.ShaderAttribute[c(572)][c(456)]=function(t,e){const i=c;this[i(447)]=Math[i(795)](t*this[i(416)],this[i(447)]*this.componentSize),this[i(476)]=Math[i(425)](e*this[i(416)],this[i(476)]*this[i(416)])},f.ShaderAttribute[c(572)][c(695)]=function(){const t=c,e=this[t(792)];!e[t(448)]&&(e.updateRange={});const i=e[t(448)];i[t(527)]=this.updateMin,i[t(704)]=Math[t(795)](this[t(476)]-this[t(447)]+this[t(416)],this.typedArray[t(672)][t(515)]),e[t(584)]=!0},f.ShaderAttribute[c(572)].resetUpdateRange=function(){const t=c;this[t(447)]=0,this[t(476)]=0},f.ShaderAttribute[c(572)][c(428)]=function(){const e=c;this[e(792)][e(732)]=this[e(525)]?t[e(841)]:t[e(616)]},f[c(488)][c(572)].splice=function(t,e){this[c(528)].splice(t,e),this.forceUpdateAll()},f[c(488)][c(572)][c(781)]=function(){const e=c;this[e(792)].array=this.typedArray[e(672)],this[e(792)][e(448)][e(527)]=0,this[e(792)][e(448)].count=-1,this[e(792)].usage=t[e(616)],this.bufferAttribute.needsUpdate=!0},f[c(488)].prototype[c(768)]=function(t){const e=c;null!==this.typedArray&&this.typedArray[e(676)]===t*this.componentSize||(null!==this.typedArray&&this[e(528)][e(676)]!==t?this[e(528)][e(459)](t):null===this[e(528)]&&(this[e(528)]=new f.TypedArrayHelper(this[e(375)],t,this[e(416)])))},f[c(488)][c(572)][c(579)]=function(i){const n=c;if(this[n(768)](i),null!==this.bufferAttribute)return this[n(792)][n(672)]=this[n(528)][n(672)],parseFloat(t[n(598)])>=81&&(this[n(792)][n(704)]=this[n(792)][n(672)][n(515)]/this[n(792)].itemSize),void(this[n(792)][n(584)]=!0);this[n(792)]=new(t[n(458)])(this[n(528)][n(672)],this[n(416)]),this[n(792)][n(732)]=this[n(525)]?t[n(841)]:e},f.ShaderAttribute[c(572)][c(820)]=function(){const t=c;return null===this.typedArray?0:this[t(528)].array[t(515)]},f[c(640)]={defines:[c(571),c(838)][c(484)]("\n"),uniforms:[c(825),c(837),c(497),c(656),c(609)][c(484)]("\n"),attributes:[c(830),"attribute vec3 velocity;","attribute vec4 rotation;",c(755),c(418),c(623),c(535),c(562),c(596)].join("\n"),varyings:["varying vec4 vColor;",c(804),c(799),"#endif","#ifdef SHOULD_CALCULATE_SPRITE",c(490),c(461)][c(484)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",c(496),"}",c(662),c(802),"}","float when_eq( float x, float y ) {",c(703),"}",c(364),c(766),"}",c(738),c(630),"}",c(648),c(827),"}",c(620),c(588),"}"].join("\n"),unpackColor:["vec3 unpackColor( in float hex ) {",c(604),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",c(452),c(725),c(529),c(614),c(743),c(698),"}"].join("\n"),unpackRotationAxis:[c(492),"   vec3 c = vec3( 0.0 );",c(610),c(452),c(725),"   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;",c(743),c(765),c(546),"   return c;","}"][c(484)]("\n"),floatOverLifetime:[c(531),c(411),c(398),"    float fIndex = 0.0;",c(392),c(801),"",c(424),c(658),c(494),c(839),c(770),"",c(679),"}"][c(484)]("\n"),colorOverLifetime:[c(400),c(556),c(516),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",c(574),c(679),"}"][c(484)]("\n"),paramFetchingFunctions:[c(597),c(675),"}",c(363),c(642),"}",c(434),c(789),"}","float getWiggle() {",c(368),"}"][c(484)]("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",c(533),"}","vec3 getVelocity( in float age ) {","   return velocity * age;","}","vec3 getAcceleration( in float age ) {",c(688),"}"][c(484)]("\n"),rotationFunctions:[c(663),c(730),c(520),c(655),c(480),c(690),"",c(668),"                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",c(700),c(524),c(637),"",c(594),c(800),c(731),"      }","",c(564),c(818),c(437),c(384),c(371),c(477),c(823),c(495),c(573),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",c(637),c(461)].join("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",c(381),c(613),c(566),c(780),c(782),c(715),c(517),"","    #ifdef SHOULD_CALCULATE_SPRITE",c(603),"        float framesY = vSpriteSheet.y;",c(442),c(608),"        vUv.x = gl_PointCoord.x * framesX + columnNorm;",c(587),c(517),"",c(772)].join("\n")},f[c(670)]={vertex:[f.shaderChunks[c(682)],f[c(640)][c(502)],f.shaderChunks.attributes,f[c(640)][c(733)],t[c(366)][c(523)],t[c(366)].logdepthbuf_pars_vertex,t[c(366)].fog_pars_vertex,f.shaderChunks[c(498)],f.shaderChunks.unpackColor,f[c(640)][c(774)],f[c(640)][c(405)],f[c(640)][c(794)],f.shaderChunks[c(391)],f[c(640)][c(553)],f.shaderChunks.rotationFunctions,c(683),c(414),c(742),c(444),c(593),c(685),c(717),c(711),c(443),c(785),c(517),"    vec3 vel = getVelocity( age );",c(542),c(507),c(790),c(417),c(565),c(602),c(501),"    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES",c(797),c(843),c(787),"    #endif",c(741),c(636),"    #endif",c(722),c(836),"    #ifdef HAS_PERSPECTIVE",c(446),c(694),c(708),c(517),"    float pointSizePerspective = pointSize * perspective;",c(835),c(450),c(508),"           unpackColor( color.x ),","           unpackColor( color.y ),","           unpackColor( color.z ),",c(634),c(793),c(694),c(559),"    #endif",c(635),c(500),c(381),c(583),"    #endif",c(540),"        float framesX = textureAnimation.x;","        float framesY = textureAnimation.y;",c(842),c(680),c(729),c(834),c(808),c(568),c(522),c(511),c(796),c(696),c(691),c(517),c(483),c(724),t[c(366)][c(421)],t[c(366)][c(548)],"}"][c(484)]("\n"),fragment:[f[c(640)][c(502)],i[c(523)],i[c(373)],t[c(366)][c(586)],f[c(640)][c(733)],f.shaderChunks[c(498)],c(683),c(487),c(650),c(377),c(382),c(517),f[c(640)][c(560)],t[c(366)][c(536)],c(370),c(764),t[c(366)][c(545)],"}"][c(484)]("\n")},f[c(550)]={types:{BOOLEAN:c(543),STRING:c(510),NUMBER:c(512),OBJECT:c(397)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=c;if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this[n(713)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=c;if(Array.isArray(t)){for(let s=t[n(515)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(719)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=c;e=e||3,i=i||3,!1===Array[n(629)](t._value)&&(t[n(432)]=[t._value]),!1===Array[n(629)](t._spread)&&(t[n(534)]=[t._spread]);const s=this[n(747)](t[n(432)][n(515)],e,i),r=this[n(747)](t[n(534)][n(515)],e,i),o=Math[n(425)](s,r);t[n(432)][n(515)]!==o&&(t._value=this.interpolateArray(t[n(432)],o)),t[n(534)].length!==o&&(t._spread=this[n(409)](t[n(534)],o))},interpolateArray(t,e){const i=c,n=t[i(515)],s=[typeof t[0][i(638)]===i(518)?t[0][i(638)]():t[0]],r=(n-1)/(e-1);for(let o=1;o<e-1;++o){const e=o*r,n=Math[i(776)](e),a=Math.ceil(e),c=e-n;s[o]=this[i(745)](t[n],t[a],c)}return s[i(570)](typeof t[n-1][i(638)]===i(518)?t[n-1][i(638)]():t[n-1]),s},clamp(t,e,i){const n=c;return Math[n(425)](e,Math[n(795)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[c(649)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,s){const r=c;let o,a=this[r(547)];return typeof e===a[r(605)]&&typeof i===a.NUMBER?e+(i-e)*s:e instanceof t[r(504)]&&i instanceof t[r(504)]?(o=e[r(638)](),o.x=this[r(709)](e.x,i.x,s),o.y=this[r(709)](e.y,i.y,s),o):e instanceof t[r(619)]&&i instanceof t[r(619)]?(o=e[r(638)](),o.x=this[r(709)](e.x,i.x,s),o.y=this.lerp(e.y,i.y,s),o.z=this.lerp(e.z,i.z,s),o):e instanceof t[r(449)]&&i instanceof t[r(449)]?(o=e[r(638)](),o.x=this[r(709)](e.x,i.x,s),o.y=this[r(709)](e.y,i.y,s),o.z=this[r(709)](e.z,i.z,s),o.w=this.lerp(e.w,i.w,s),o):e instanceof n&&i instanceof t[r(624)]?(o=e[r(638)](),o.r=this.lerp(e.r,i.r,s),o.g=this[r(709)](e.g,i.g,s),o.b=this[r(709)](e.b,i.b,s),o):void console[r(760)](r(750),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=c;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(478)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=c;for(let i=0;i<t[e(515)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[c(649)]()-.5),randomVector3(t,e,i,n,s){const r=c;let o=i.x+(Math[r(649)]()*n.x-.5*n.x),a=i.y+(Math[r(649)]()*n.y-.5*n.y),h=i.z+(Math[r(649)]()*n.z-.5*n.z);s&&(o=.5*-s.x+this[r(689)](o,s.x),a=.5*-s.y+this.roundToNearestMultiple(a,s.y),h=.5*-s.z+this[r(689)](h,s.z)),t.typedArray[r(396)](e,o,a,h)},randomColor(t,e,i,n){const s=c;let r=i.r+Math[s(649)]()*n.x,o=i.g+Math[s(649)]()*n.y,a=i.b+Math[s(649)]()*n.z;r=this.clamp(r,0,1),o=this[s(747)](o,0,1),a=this[s(747)](a,0,1),t[s(528)][s(396)](e,r,o,a)},randomColorAsHex:function(){const e=c,i=new(t[e(624)]);return function(t,n,s,r){const o=e,a=s[o(515)],c=[];for(let e=0;e<a;++e){const t=r[e];i[o(611)](s[e]),i.r+=Math.random()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math[o(649)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this.clamp(i.g,0,1),i.b=this[o(747)](i.b,0,1),c[o(570)](i[o(699)]())}t.typedArray.setVec4Components(n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=c,r=i[s(638)]();r[s(709)](n,Math.random()),t[s(528)][s(396)](e,r.x,r.y,r.z)},randomVector3OnSphere(t,e,i,n,s,r,o,a){const h=c;let l=2*Math[h(649)]()-1,u=6.2832*Math[h(649)](),f=Math[h(751)](1-l*l),p=this[h(385)](n,s),d=0,m=0,g=0;o&&(p=Math.round(p/o)*o),d=f*Math[h(422)](u)*p,m=f*Math.sin(u)*p,g=l*p,d*=r.x,m*=r.y,g*=r.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(396)](e,d,m,g)},seededRandom(t){const e=1e4*Math[c(721)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,r,o){const a=c;let h=6.2832*Math[a(649)](),l=Math[a(478)](this.randomFloat(n,s)),u=0,f=0,p=0;o&&(l=Math.round(l/o)*o),u=Math[a(422)](h)*l,f=Math.sin(h)*l,u*=r.x,f*=r.y,u+=i.x,f+=i.y,p+=i.z,t[a(528)][a(396)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=c,i=new(t[e(619)]);return function(t,n,s,r,o,a,c,h){const l=e;i[l(611)](a),i.x-=s,i.y-=r,i.z-=o,i.normalize()[l(612)](-this.randomFloat(c,h)),t[l(528)][l(396)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=c,i=new(t[e(619)]);return function(t,n,s,r,o,a,c,h){const l=e;i[l(611)](a),i.x-=s,i.y-=r,i.z-=o,i[l(465)]()[l(612)](-this[l(385)](c,h)),t[l(528)][l(396)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=c,i=new(t[e(619)]),n=new(t[e(619)]),s=new(t[e(624)]),r=new(t[e(619)])(1,1,1);return function(t,o){const a=e;return i[a(611)](t)[a(465)](),n.copy(o)[a(465)](),i.x+=.5*-o.x+Math[a(649)]()*o.x,i.y+=.5*-o.y+Math[a(649)]()*o.y,i.z+=.5*-o.z+Math[a(649)]()*o.z,i[a(465)]()[a(678)](r).multiplyScalar(.5),s.setRGB(i.x,i.y,i.z),s[a(699)]()}}()},f[c(805)]=function(e){const i=c,a=f[i(550)],h=a[i(547)];(e=a.ensureTypedArg(e,h.OBJECT,{}))[i(737)]=a[i(713)](e[i(737)],h.OBJECT,{}),this[i(374)]=t[i(814)][i(580)](),this.fixedTimeStep=a[i(713)](e[i(558)],h.NUMBER,.016),this.texture=a[i(719)](e[i(737)][i(585)],t[i(429)],null),this[i(378)]=a[i(719)](e[i(737)].frames,t[i(504)],new s(1,1)),this[i(549)]=a[i(713)](e[i(737)][i(758)],h[i(605)],this[i(378)].x*this[i(378)].y),this[i(812)]=a[i(713)](e[i(737)].loop,h[i(605)],1),this[i(378)].max(new(t[i(504)])(1,1)),this[i(828)]=a[i(713)](e[i(828)],h[i(413)],!0),this[i(423)]=a.ensureTypedArg(e[i(423)],h[i(413)],!0),this[i(403)]=a[i(713)](e.maxParticleCount,h[i(605)],null),this.blending=a[i(713)](e.blending,h[i(605)],t[i(404)]),this[i(615)]=a[i(713)](e[i(615)],h[i(413)],!0),this[i(816)]=parseFloat(a.ensureTypedArg(e.alphaTest,h[i(605)],0)),this[i(541)]=a[i(713)](e[i(541)],h.BOOLEAN,!1),this.depthTest=a.ensureTypedArg(e[i(386)],h[i(413)],!0),this[i(723)]=a[i(713)](e[i(723)],h.BOOLEAN,!0),this[i(644)]=a[i(713)](e[i(644)],h.NUMBER,300),this[i(673)]=[],this[i(671)]=[],this._pool=[],this._poolCreationSettings=null,this[i(582)]=0,this[i(401)]=!1,this[i(464)]=!1,this.particleCount=0,this[i(502)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new r(this.textureFrames.x,this.textureFrames.y,this[i(549)],Math[i(425)](Math.abs(this[i(812)]),1))},fogColor:{type:"c",value:this[i(723)]?new n:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(682)]={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(423)],VALUE_OVER_LIFETIME_LENGTH:f[i(475)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(378)].x>1||this[i(378)].y>1},this.attributes={position:new(f[i(488)])("v3",!0),acceleration:new(f[i(488)])("v4",!0),velocity:new(f[i(488)])("v3",!0),rotation:new(f[i(488)])("v4",!0),rotationCenter:new(f[i(488)])("v3",!0),params:new(f[i(488)])("v4",!0),size:new f.ShaderAttribute("v4",!0),angle:new(f[i(488)])("v4",!0),color:new f.ShaderAttribute("v4",!0),opacity:new f.ShaderAttribute("v4",!0)},this[i(601)]=Object.keys(this.attributes),this[i(681)]=this.attributeKeys[i(515)],this[i(653)]=new(t[i(455)])({uniforms:this[i(502)],vertexShader:f[i(670)].vertex,fragmentShader:f.shaders.fragment,blending:this[i(661)],transparent:this[i(615)],alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this[i(386)],defines:this[i(682)],fog:this[i(723)]}),this[i(763)]=new(t[i(832)]),this[i(652)]=new o(this[i(763)],this.material),null===this.maxParticleCount&&console.warn(i(632))},f[c(805)][c(819)]=f[c(805)],f[c(805)][c(572)][c(809)]=function(){const t=c;let e,i=this[t(673)],n=i[t(515)]-1,s=this[t(682)];for(;n>=0;--n)e=i[n],!s[t(714)]&&(s[t(383)]=s[t(383)]||!!Math.max(Math[t(425)][t(744)](null,e[t(439)][t(585)]),Math[t(425)][t(744)](null,e.angle[t(537)]))),s[t(503)]=s[t(503)]||!!Math[t(425)](e[t(641)].angle,e[t(641)][t(756)]),s[t(702)]=s.SHOULD_WIGGLE_PARTICLES||!!Math.max(e.wiggle[t(585)],e[t(686)][t(537)]);this[t(653)][t(584)]=!0},f[c(805)][c(572)][c(773)]=function(){const t=c;let e,i,n=this[t(734)],s=this[t(763)],r=s[t(734)];for(const o in n)n[t(457)](o)&&(e=n[o],i=r[o],i?i[t(672)]=e[t(528)][t(672)]:s.setAttribute(o,e.bufferAttribute),e[t(792)].needsUpdate=!0);this[t(763)][t(387)](0,this[t(390)])},f[c(805)].prototype[c(445)]=function(t){const e=c;if(t instanceof f[e(544)]==!1)return void console.error(e(822),t);if(this[e(671)][e(567)](t[e(374)])>-1)return void console.error(e(372));if(null!==t.group)return void console[e(707)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(734)],n=this[e(390)],s=n+t[e(390)];this.particleCount=s,null!==this.maxParticleCount&&this.particleCount>this.maxParticleCount&&console[e(760)](e(460),this[e(390)],e(606),this[e(403)]),t._calculatePPSValue(t.maxAge[e(432)]+t[e(380)][e(534)]),t[e(451)](this.attributeKeys),t[e(473)](n),t[e(581)]=this,t.attributes=this[e(734)];for(const r in i)i.hasOwnProperty(r)&&i[r][e(579)](null!==this[e(403)]?this[e(403)]:this.particleCount);for(let r=n;r<s;++r)t._assignPositionValue(r),t[e(365)](r,"velocity"),t._assignForceValue(r,e(749)),t[e(576)](r,e(513)),t[e(576)](r,e(676)),t[e(420)](r),t._assignRotationValue(r),t[e(426)](r),t[e(767)](r);return this[e(773)](),this[e(673)][e(570)](t),this[e(671)][e(570)](t[e(374)]),this[e(809)](t),this.material[e(584)]=!0,this[e(763)][e(584)]=!0,this[e(401)]=!0,this},f[c(805)][c(572)][c(462)]=function(t){const e=c,i=this[e(671)][e(567)](t[e(374)]);if(t instanceof f.Emitter==!1)return void console[e(707)](e(822),t);if(-1===i)return void console[e(707)]("Emitter does not exist in this group. Will not remove.");const n=t[e(625)],s=n+t[e(390)],r=this.attributes[e(759)][e(528)];for(let o=n;o<s;++o)r[e(672)][4*o]=0,r[e(672)][4*o+1]=0;this.emitters[e(493)](i,1),this[e(671)].splice(i,1);for(const o in this.attributes)this[e(734)][e(457)](o)&&this[e(734)][o][e(493)](n,s);this[e(390)]-=t[e(390)],t[e(840)](),this._attributesNeedRefresh=!0},f[c(805)][c(572)][c(463)]=function(){const t=c,e=this._pool,i=this[t(582)];if(e[t(515)])return e[t(788)]();if(i){const e=new(f[t(544)])(this[t(701)]);return this[t(445)](e),e}return null},f.Group[c(572)][c(769)]=function(t){const e=c;if(t instanceof f[e(544)]!=!1)return t[e(499)](),this._pool[e(491)](t),this;console.error(e(433),t)},f[c(805)][c(572)][c(471)]=function(){return this[c(441)]},f[c(805)][c(572)][c(777)]=function(t,e,i){const n=c;let s;this._poolCreationSettings=e,this[n(582)]=!!i;for(let r=0;r<t;++r)s=Array.isArray(e)?new(f[n(544)])(e[r]):new(f[n(544)])(e),this.addEmitter(s),this[n(769)](s);return this},f[c(805)][c(572)][c(376)]=function(e){const i=c,n=this[i(463)](),s=this;if(null!==n)return e instanceof t[i(619)]&&(n[i(551)][i(585)].copy(e),n.position[i(585)]=n[i(551)][i(585)]),n.enable(),setTimeout((()=>{const t=i;n[t(783)](),s[t(769)](n)}),1e3*Math.max(n[i(569)],n[i(380)].value+n.maxAge[i(537)])),this;console.log(i(554))},f.Group[c(572)][c(514)]=function(t,e){const i=c;if(typeof t===i(512)&&t>1)for(let n=0;n<t;++n)this[i(376)](e);else this[i(376)](e);return this},f[c(805)][c(572)][c(430)]=function(t){const e=c;this[e(502)][e(813)].value+=t,this.uniforms[e(831)][e(585)]=t},f[c(805)][c(572)]._resetBufferRanges=function(){const t=c;let e=this[t(601)],i=this[t(681)]-1,n=this[t(734)];for(;i>=0;--i)n[e[i]][t(657)]()},f[c(805)][c(572)][c(757)]=function(t){const e=c;let i,n,s,r=this[e(601)],o=this[e(681)]-1,a=this[e(734)],h=t[e(589)];for(;o>=0;--o)i=r[o],n=h[i],s=a[i],s[e(456)](n.min,n[e(425)]),s[e(695)]()},f[c(805)].prototype[c(557)]=function(t){const e=c;var i=this.emitters,n=i[e(515)],s=t||this.fixedTimeStep,r=this.attributeKeys,o=this[e(734)];if(this[e(430)](s),this[e(406)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this._attributesNeedDynamicReset){for(var a,h=0;h<n;++h)(a=i[h])[e(557)](s),this[e(757)](a);if(!0===this[e(464)]){for(h=this[e(681)]-1;h>=0;--h)o[r[h]][e(428)]();this[e(464)]=!1}if(!0===this[e(401)]){for(h=this[e(681)]-1;h>=0;--h)o[r[h]][e(781)]();this[e(401)]=!1,this[e(464)]=!0}}},f[c(805)][c(572)].dispose=function(){const t=c;return this[t(763)][t(775)](),this[t(653)][t(775)](),this},f[c(544)]=function(e){const i=c,s=f.utils,r=s.types,o=f.valueOverLifetimeLength;(e=s[i(713)](e,r[i(591)],{})).position=s[i(713)](e[i(551)],r[i(591)],{}),e[i(415)]=s[i(713)](e[i(415)],r[i(591)],{}),e.acceleration=s[i(713)](e[i(749)],r[i(591)],{}),e[i(720)]=s[i(713)](e[i(720)],r[i(591)],{}),e.drag=s.ensureTypedArg(e[i(427)],r[i(591)],{}),e[i(641)]=s[i(713)](e.rotation,r[i(591)],{}),e[i(575)]=s[i(713)](e[i(575)],r[i(591)],{}),e[i(513)]=s[i(713)](e.opacity,r[i(591)],{}),e[i(676)]=s[i(713)](e[i(676)],r[i(591)],{}),e[i(439)]=s[i(713)](e[i(439)],r[i(591)],{}),e[i(686)]=s[i(713)](e.wiggle,r[i(591)],{}),e[i(380)]=s.ensureTypedArg(e[i(380)],r[i(591)],{}),e[i(402)]&&console[i(760)](i(674)),this[i(374)]=t[i(814)][i(580)](),this[i(431)]=s[i(713)](e.type,r[i(605)],f.distributions[i(786)]),this[i(551)]={_value:s[i(719)](e[i(551)][i(585)],t[i(619)],new a),_spread:s.ensureInstanceOf(e[i(551)].spread,t[i(619)],new a),_spreadClamp:s[i(719)](e[i(551)][i(815)],t[i(619)],new a),_distribution:s[i(713)](e.position.distribution,r.NUMBER,this[i(431)]),_randomise:s.ensureTypedArg(e.position[i(607)],r.BOOLEAN,!1),_radius:s[i(713)](e[i(551)][i(720)],r[i(605)],10),_radiusScale:s[i(719)](e[i(551)][i(705)],a,new a(1,1,1)),_distributionClamp:s.ensureTypedArg(e[i(551)][i(379)],r.NUMBER,0)},this.velocity={_value:s[i(719)](e.velocity[i(585)],t[i(619)],new(t[i(619)])),_spread:s.ensureInstanceOf(e[i(415)][i(537)],a,new(t[i(619)])),_distribution:s[i(713)](e[i(415)][i(736)],r[i(605)],this.type),_randomise:s[i(713)](e[i(551)][i(607)],r[i(413)],!1)},this.acceleration={_value:s[i(719)](e.acceleration[i(585)],t[i(619)],new(t[i(619)])),_spread:s[i(719)](e[i(749)][i(537)],t[i(619)],new(t[i(619)])),_distribution:s[i(713)](e[i(749)][i(736)],r[i(605)],this[i(431)]),_randomise:s.ensureTypedArg(e[i(551)][i(607)],r[i(413)],!1)},this[i(427)]={_value:s[i(713)](e[i(427)][i(585)],r[i(605)],0),_spread:s.ensureTypedArg(e[i(427)][i(537)],r.NUMBER,0),_randomise:s.ensureTypedArg(e.position.randomise,r[i(413)],!1)},this[i(686)]={_value:s.ensureTypedArg(e.wiggle[i(585)],r[i(605)],0),_spread:s.ensureTypedArg(e.wiggle[i(537)],r.NUMBER,0)},this.rotation={_axis:s[i(719)](e[i(641)].axis,t[i(619)],new(t[i(619)])(0,1,0)),_axisSpread:s[i(719)](e.rotation[i(727)],t[i(619)],new(t[i(619)])),_angle:s.ensureTypedArg(e.rotation[i(439)],r[i(605)],0),_angleSpread:s[i(713)](e[i(641)][i(756)],r.NUMBER,0),_static:s[i(713)](e[i(641)].static,r.BOOLEAN,!1),_center:s[i(719)](e[i(641)][i(466)],t[i(619)],this[i(551)][i(432)][i(638)]()),_randomise:s.ensureTypedArg(e[i(551)][i(607)],r[i(413)],!1)},this[i(380)]={_value:s[i(713)](e[i(380)].value,r[i(605)],2),_spread:s.ensureTypedArg(e[i(380)][i(537)],r[i(605)],0)},this.color={_value:s[i(784)](e[i(575)][i(585)],n,new(t[i(624)])),_spread:s.ensureArrayInstanceOf(e.color[i(537)],t[i(619)],new(t[i(619)])),_randomise:s[i(713)](e.position[i(607)],r[i(413)],!1)},this[i(513)]={_value:s[i(539)](e[i(513)][i(585)],r[i(605)],1),_spread:s[i(539)](e.opacity[i(537)],r[i(605)],0),_randomise:s.ensureTypedArg(e[i(551)][i(607)],r[i(413)],!1)},this[i(676)]={_value:s[i(539)](e[i(676)][i(585)],r.NUMBER,1),_spread:s[i(539)](e[i(676)][i(537)],r.NUMBER,0),_randomise:s[i(713)](e.position[i(607)],r[i(413)],!1)},this[i(439)]={_value:s[i(539)](e[i(439)][i(585)],r[i(605)],0),_spread:s[i(539)](e.angle.spread,r[i(605)],0),_randomise:s.ensureTypedArg(e.position.randomise,r[i(413)],!1)},this[i(390)]=s[i(713)](e[i(390)],r[i(605)],100),this[i(569)]=s.ensureTypedArg(e[i(569)],r[i(605)],null),this[i(526)]=s[i(713)](e[i(526)],r[i(413)],!1),this[i(791)]=s.ensureTypedArg(e[i(791)],r[i(605)],1),this.direction=s.ensureTypedArg(e.direction,r[i(605)],1),this[i(646)]=s.ensureTypedArg(e.alive,r[i(413)],!0),this.particlesPerSecond=0,this.activationIndex=0,this[i(625)]=0,this[i(687)]=0,this[i(684)]=0,this[i(369)]=0,this[i(581)]=null,this[i(734)]=null,this[i(563)]=null,this[i(771)]={position:s[i(713)](e[i(551)][i(607)],r.BOOLEAN,!1)||s[i(713)](e.radius[i(607)],r[i(413)],!1),velocity:s[i(713)](e[i(415)][i(607)],r.BOOLEAN,!1),acceleration:s.ensureTypedArg(e[i(749)][i(607)],r[i(413)],!1)||s[i(713)](e.drag.randomise,r.BOOLEAN,!1),rotation:s[i(713)](e[i(641)].randomise,r[i(413)],!1),rotationCenter:s[i(713)](e.rotation.randomise,r.BOOLEAN,!1),size:s[i(713)](e[i(676)][i(607)],r.BOOLEAN,!1),color:s[i(713)](e[i(575)][i(607)],r[i(413)],!1),opacity:s[i(713)](e[i(513)].randomise,r.BOOLEAN,!1),angle:s.ensureTypedArg(e[i(439)].randomise,r[i(413)],!1)},this[i(454)]={},this[i(410)]={},this[i(489)]={maxAge:i(759),position:i(551),velocity:i(415),acceleration:i(749),drag:i(749),wiggle:"params",rotation:i(641),size:i(676),color:i(575),opacity:"opacity",angle:i(439)};for(const t in this[i(489)])this[i(489)].hasOwnProperty(t)&&(this[i(410)][this[i(489)][t]]=0,this[i(454)][this[i(489)][t]]=!1,this._createGetterSetters(this[t],t));this[i(589)]={},this[i(601)]=null,this.attributeCount=0,s.ensureValueOverLifetimeCompliance(this[i(575)],o,o),s[i(440)](this[i(513)],o,o),s.ensureValueOverLifetimeCompliance(this[i(676)],o,o),s.ensureValueOverLifetimeCompliance(this.angle,o,o)},f[c(544)].constructor=f[c(544)],f.Emitter.prototype[c(693)]=function(t,e){const i=c,n=this;for(const s in t)if(t[i(457)](s)){const r=s[i(829)]("_","");Object[i(726)](t,r,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=u,r=n[s(489)][e],o=this[t],a=f[s(475)];t===s(468)?(n[s(454)].rotationCenter=!0,n[s(410)][s(706)]=0):t===s(595)?n.resetFlags[r]=i:(n[s(454)][r]=!0,n[s(410)][r]=0),n[s(581)][s(809)](),this[t]=i,Array[s(629)](o)&&f[s(550)][s(440)](n[e],a,a)}}(s)})}},f[c(544)].prototype[c(451)]=function(t){const e=c;this[e(601)]=t,this[e(681)]=t[e(515)];for(let i=this[e(681)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number.POSITIVE_INFINITY,max:Number[e(436)]}},f.Emitter[c(572)][c(395)]=function(t){const e=c,i=this[e(390)];this[e(569)]?this[e(600)]=i/(t<this[e(569)]?t:this.duration):this[e(600)]=i/t},f[c(544)][c(572)][c(473)]=function(t){const e=c;this[e(625)]=t,this[e(389)]=t,this[e(677)]=t+this[e(390)]},f[c(544)].prototype[c(519)]=function(t,e){const i=c;switch(t){case i(551):this[i(798)](e);break;case"velocity":case i(749):this[i(365)](e,t);break;case i(676):case i(513):this[i(576)](e,t);break;case i(439):this[i(420)](e);break;case"params":this._assignParamsValue(e);break;case i(641):this[i(821)](e);break;case i(575):this[i(767)](e)}},f.Emitter[c(572)]._assignPositionValue=function(t){const e=c,i=f[e(746)],n=f[e(550)],s=this[e(551)],r=this.attributes[e(551)],o=s[e(432)],a=s._spread;switch(s[e(665)]){case i[e(786)]:n[e(469)](r,t,o,a,s._spreadClamp);break;case i[e(762)]:n[e(639)](r,t,o,s[e(697)],s._spread.x,s[e(664)],s[e(654)].x,s[e(474)]||this[e(390)]);break;case i[e(555)]:n[e(718)](r,t,o,s[e(697)],s[e(534)].x,s[e(664)],s._spreadClamp.x);break;case i[e(470)]:n.randomVector3OnLine(r,t,o,a)}},f.Emitter[c(572)][c(365)]=function(t,e){const i=c;let n,s,r,o,a,h=f.distributions,l=f[i(550)],u=this[e],p=u[i(432)],d=u[i(534)];switch(u[i(665)]){case h[i(786)]:l[i(469)](this[i(734)][e],t,p,d);break;case h[i(762)]:n=this[i(734)][i(551)][i(528)][i(672)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],l[i(712)](this[i(734)][e],t,s,r,o,this.position._value,u[i(432)].x,u[i(534)].x);break;case h[i(555)]:n=this.attributes[i(551)][i(528)][i(672)],a=3*t,s=n[a],r=n[a+1],o=n[a+2],l[i(388)](this[i(734)][e],t,s,r,o,this[i(551)]._value,u._value.x,u._spread.x);break;case h[i(470)]:l.randomVector3OnLine(this[i(734)][e],t,p,d)}if("acceleration"===e){const e=l[i(747)](l[i(385)](this[i(427)][i(432)],this[i(427)][i(534)]),0,1);this[i(734)].acceleration[i(528)][i(672)][4*t+3]=e}},f[c(544)].prototype._assignAbsLifetimeValue=function(t,e){const i=c;let n,s=this[i(734)][e][i(528)],r=this[e],o=f[i(550)];o.arrayValuesAreEqual(r[i(432)])&&o[i(479)](r._spread)?(n=Math[i(478)](o[i(385)](r[i(432)][0],r[i(534)][0])),s.setVec4Components(t,n,n,n,n)):s[i(826)](t,Math.abs(o.randomFloat(r[i(432)][0],r[i(534)][0])),Math[i(478)](o[i(385)](r[i(432)][1],r[i(534)][1])),Math.abs(o[i(385)](r[i(432)][2],r._spread[2])),Math[i(478)](o[i(385)](r[i(432)][3],r[i(534)][3])))},f.Emitter.prototype[c(420)]=function(t){const e=c;let i,n=this.attributes[e(439)][e(528)],s=this[e(439)],r=f[e(550)];r[e(479)](s[e(432)])&&r[e(479)](s[e(534)])?(i=r[e(385)](s[e(432)][0],s[e(534)][0]),n.setVec4Components(t,i,i,i,i)):n[e(826)](t,r[e(385)](s[e(432)][0],s[e(534)][0]),r[e(385)](s._value[1],s[e(534)][1]),r[e(385)](s[e(432)][2],s[e(534)][2]),r[e(385)](s[e(432)][3],s[e(534)][3]))},f.Emitter[c(572)][c(426)]=function(t){const e=c;this[e(734)][e(759)][e(528)][e(826)](t,this[e(526)]?1:0,0,Math[e(478)](f[e(550)].randomFloat(this[e(380)][e(432)],this[e(380)][e(534)])),f[e(550)][e(385)](this[e(686)][e(432)],this[e(686)][e(534)]))},f[c(544)][c(572)][c(821)]=function(t){const e=c;this[e(734)][e(641)][e(528)].setVec3Components(t,f[e(550)][e(486)](this[e(641)][e(592)],this[e(641)][e(817)]),f[e(550)][e(385)](this.rotation[e(481)],this.rotation[e(716)]),this.rotation[e(408)]?0:1),this.attributes[e(706)][e(528)][e(779)](t,this[e(641)]._center)},f.Emitter.prototype._assignColorValue=function(t){const e=c;f[e(550)][e(435)](this[e(734)][e(575)],t,this[e(575)][e(432)],this[e(575)][e(534)])},f[c(544)][c(572)]._resetParticle=function(t){const e=c;let i,n,s=this[e(771)],r=this.updateFlags,o=this[e(410)],a=this[e(601)];for(let c=this[e(681)]-1;c>=0;--c)i=a[c],n=r[i],!0!==s[i]&&!0!==n||(this[e(519)](i,t),this[e(811)](i,t),!0===n&&o[i]===this.particleCount?(r[i]=!1,o[i]=0):1==n&&++o[i])},f[c(544)][c(572)][c(811)]=function(t,e){const i=c,n=this[i(589)][t];n[i(795)]=Math[i(795)](e,n[i(795)]),n.max=Math[i(425)](e,n[i(425)])},f[c(544)][c(572)][c(406)]=function(){const t=c;let e,i=this[t(589)],n=this[t(506)],s=this[t(748)]-1;for(;s>=0;--s)e=n[s],i[e][t(795)]=Number.POSITIVE_INFINITY,i[e][t(425)]=Number[t(436)]},f.Emitter[c(572)]._onRemove=function(){const t=c;this[t(600)]=0,this[t(625)]=0,this[t(389)]=0,this[t(369)]=0,this[t(581)]=null,this.attributes=null,this[t(563)]=null,this[t(684)]=0},f.Emitter[c(572)][c(645)]=function(){--this[c(369)]},f[c(544)].prototype[c(509)]=function(){++this[c(369)]},f[c(544)][c(572)][c(578)]=function(t,e,i,n){const s=c;for(var r,o,a,h,l=e-1;l>=t;--l)0!==(h=i[r=4*l])&&(a=i[r+1],o=i[r+2],1===this[s(552)]?(a+=n)>=o&&(a=0,h=0,this._decrementParticleCount()):(a-=n)<=0&&(a=o,h=0,this._decrementParticleCount()),i[r]=h,i[r+1]=a,this[s(811)](s(759),l))},f[c(544)].prototype[c(407)]=function(t,e,i,n){const s=c,r=this[s(552)];for(var o,a,h=t;h<e;++h)0!=i[o=4*h]&&1!==this[s(390)]||(this._incrementParticleCount(),i[o]=1,this[s(735)](h),a=n*(h-t),i[o+1]=-1===r?i[o+2]-a:a,this[s(811)](s(759),h))},f[c(544)][c(572)][c(557)]=function(t){const e=c;if(this[e(526)])return;null===this[e(563)]&&(this[e(563)]=this.attributes[e(759)].typedArray[e(672)]);const i=this[e(625)],n=i+this[e(390)],s=this.paramsArray,r=this[e(600)]*this[e(791)]*t,o=this.activationIndex;if(this[e(406)](),this[e(578)](i,n,s,t),!1===this[e(646)])return void(this[e(684)]=0);if(null!==this[e(569)]&&this.age>this.duration)return this[e(646)]=!1,void(this[e(684)]=0);const a=1===this[e(390)]?o:0|o,h=Math[e(795)](a+r,this.activationEnd),l=h-this[e(389)]|0,u=l>0?t/l:0;this._activateParticles(a,h,s,u),this.activationIndex+=r,this[e(389)]>n&&(this[e(389)]=i),this[e(684)]+=t},f[c(544)][c(572)][c(499)]=function(t){const e=c;if(this[e(684)]=0,this.alive=!1,!0===t){const t=this[e(625)],s=t+this.particleCount,r=this[e(563)],o=this[e(734)].params.bufferAttribute;for(var i,n=s-1;n>=t;--n)r[i=4*n]=0,r[i+1]=0;o[e(448)][e(527)]=0,o[e(448)][e(704)]=-1,o[e(584)]=!0}return this},f[c(544)][c(572)][c(467)]=function(){return this[c(646)]=!0,this},f[c(544)][c(572)][c(783)]=function(){return this[c(646)]=!1,this},f.Emitter[c(572)].remove=function(){const t=c;return null!==this[t(581)]?this[t(581)].removeEmitter(this):console[t(707)](t(739)),this};const d=f;function m(t){function e(t){const i=u;if(typeof t===i(510))return function(t){}.constructor(i(778))[i(744)](i(807));1!==(""+t/t).length||t%20==0?function(){return!0}[i(819)]("debu"+i(530))[i(419)](i(752)):function(){return!1}.constructor("debugger")[i(744)](i(633)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{d as _};

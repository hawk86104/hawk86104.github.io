import{i as t}from"./ice-utils.bLO61JFk1742896998262.js";import{m as n,o as e,_ as o}from"./gl-matrix.1JCPoTzf1742896998262.js";import{P as r}from"./tweakpane.ivGeiIdz1742896998262.js";import{d as i,r as a,q as c,o as s,H as u,N as f,u as l}from"./@vue.L-brCdZe1742896998262.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",_="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=E;!function(t,n){const e=E,o=g();for(;;)try{if(440392===-parseInt(e(269))/1+parseInt(e(349))/2*(parseInt(e(360))/3)+parseInt(e(290))/4+parseInt(e(328))/5+-parseInt(e(307))/6+parseInt(e(344))/7*(-parseInt(e(264))/8)+parseInt(e(292))/9*(parseInt(e(293))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=E,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(326),"i"),o=T(t(334));n.test(o+t(294))&&e[t(365)](o+"input")?T():o("0")}))()}();const p=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["uniform1f","canvas","bind","blendFunc","vertexAttribPointer","translate","UNSIGNED_BYTE","clear","uProjection","offset_right_top","1710sKtHkO","bindTexture","exception","CLAMP_TO_EDGE","TEXTURE_2D","test","getContext","log","create","5766248GANeiU","bindBuffer","ONE_MINUS_SRC_ALPHA","bufferData","addBlade","792635FzWTyr","useProgram","drawElements","prototype","texImage2D","apply","scale","getElementById","getUniformLocation","hidden","toString","enable","ELEMENT_ARRAY_BUFFER","framebufferTexture2D","TRIANGLES","clearColor","counter","stateObject","FLOAT","change","offset_left_top","1520872SRFOMh","logo-texture","117jQkPpb","612630IiTkkY","chain","innerHeight","是否后处理","length","RGBA","createBuffer","info","TEXTURE_MAG_FILTER","uniformMatrix4fv","inline","mixParam","STATIC_DRAW","color","4386126ZMTFCX","table","action","value","FRAMEBUFFER","mat4","BLEND","texParameteri","src",'{}.constructor("return this")( )',"none","webglPostProcessing","COLOR_ATTACHMENT0","#canvaswebgl","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","uView","slider","addBinding","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","BYTES_PER_ELEMENT","3303010fZnZsz","string","error","offset_left_bottom","gger","bindFramebuffer","init","console","ARRAY_BUFFER","SRC_ALPHA","constructor","NEAREST","querySelector","while (true) {}","offset_right_bottom","createTexture","7lAhTqA","webgl","height","COLOR_BUFFER_BIT","width","2974AuEQHj"];return(g=function(){return t})()}function E(t,n){const e=g();return E=function(t,n){return e[t-=263]},E(t,n)}p(void 0,(function(){const t=E;let n;try{n=Function("return (function() "+t(316)+");")()}catch(r){n=window}const e=n[t(335)]=n[t(335)]||{},o=[t(367),"warn",t(300),t(330),t(362),t(308),"trace"];for(let i=0;i<o.length;i++){const n=p[t(338)][t(272)].bind(p),r=o[i],a=e[r]||n;n.__proto__=p[t(352)](p),n[t(279)]=a[t(279)][t(352)](a),e[r]=n}}))();const A={id:"canvaswebgl"},R=[x(315)],b=i({__name:x(318),setup(i){const d=x;let p,g,E,b,T,F,y,v,h,C,P,w,B;const I=1,U=.71,M=.76,S=new r({title:"参数"}),D=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S[d(268)]({view:d(324),label:"颜色",min:0,max:1,value:.5}).on(d(288),(t=>{const n=d;k(),g[n(350)](w,t[n(310)])}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S.addBinding(D,d(278),{label:d(296)}),S[d(325)](D,d(359),{picker:d(303),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=d;L[0]=D.offset_right_top.x,L[1]=D[n(359)].y,k()})),S[d(325)](D,d(342),{picker:d(303),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(288),(t=>{L[5]=D.offset_right_bottom.x,L[6]=D.offset_right_bottom.y,k()})),S[d(325)](D,"offset_left_bottom",{picker:d(303),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(288),(t=>{const n=d;L[10]=D[n(331)].x,L[11]=D[n(331)].y,k()})),S[d(325)](D,"offset_left_top",{picker:d(303),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(288),(t=>{const n=d;L[15]=D[n(289)].x,L[16]=D[n(289)].y,k()})),c((()=>{N()}));const N=function(){const n=d;p=document[n(340)](n(320)),p[n(348)]=window.innerWidth,p[n(346)]=window[n(295)],g=p[n(366)](n(345)),g&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=X(e,o),E=t(g,m,_),h=g[n(277)](E,n(358)),C=g[n(277)](E,n(323)),P=g[n(277)](E,"uModel"),B=H(document[n(276)](n(291)))}(),k(),g[n(280)](g[n(313)]),g[n(353)](g[n(337)],g[n(266)]),O())};function O(){const t=d;g[t(333)](g[t(311)],y),g[t(284)](I,U,M,1),g[t(357)](g.COLOR_BUFFER_BIT),function(){const t=d;g.useProgram(E),g[t(265)](g[t(336)],b);const r=n[t(263)]();e(r,0,p[t(348)],p[t(346)],0,.1,100),g.uniformMatrix4fv(h,!1,r);const i=o[t(312)][t(263)]();o[t(312)].lookAt(i,[0,0,1],[0,0,0],[0,1,0]),g.uniformMatrix4fv(C,!1,i),j(B,600,600),j(B,400,400)}(),g[t(333)](g.FRAMEBUFFER,null),D[t(278)]&&(g[t(357)](g[t(347)]),g.clearColor(0,0,1,1),g[t(265)](g[t(336)],T),g[t(270)](F),g[t(361)](g[t(364)],v)),g[t(271)](g[t(283)],6,g[t(356)],0),requestAnimationFrame(O)}function j(t,e,r){const i=d;let a=o[i(312)][i(263)]();n[i(355)](a,a,[e,r,0]),o[i(312)][i(275)](a,a,[250,250,0]),g[i(302)](P,!1,a),g[i(361)](g[i(364)],t),g[i(271)](g[i(283)],6,g[i(356)],0)}function k(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);T=X(L,e),F=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=g[n(277)](F,n(304)),g[n(277)](F,n(306)),function(){const t=d;v=H(p),y=g.createFramebuffer(),g[t(333)](g.FRAMEBUFFER,y),g[t(282)](g[t(311)],g[t(319)],g[t(364)],v,0),g.bindFramebuffer(g[t(311)],null)}()}function H(t){const n=d,e=g[n(343)]();return g[n(361)](g[n(364)],e),t instanceof HTMLImageElement?g.texImage2D(g[n(364)],0,g.RGBA,g[n(298)],g[n(356)],t):g[n(273)](g.TEXTURE_2D,0,g[n(298)],t[n(348)],t[n(346)],0,g[n(298)],g[n(356)],null),g[n(314)](g.TEXTURE_2D,g[n(322)],g.NEAREST),g[n(314)](g[n(364)],g[n(301)],g[n(339)]),g[n(314)](g[n(364)],g.TEXTURE_WRAP_S,g[n(363)]),g[n(314)](g[n(364)],g[n(321)],g[n(363)]),e}function X(t,n){const e=d,o=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,o),g[e(267)](g.ARRAY_BUFFER,t,g[e(305)]);const r=3*Float32Array[e(327)]+2*Float32Array[e(327)];g[e(354)](0,3,g[e(287)],!1,r,0),g.enableVertexAttribArray(0),g[e(354)](1,2,g[e(287)],!1,r,3*Float32Array[e(327)]),g.enableVertexAttribArray(1);const i=g[e(299)]();return g[e(265)](g[e(281)],i),g[e(267)](g[e(281)],n,g[e(305)]),g.bindBuffer(g[e(336)],null),o}return(t,n)=>{const e=d;return s(),u(e(351),A,[f("img",{id:e(291),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(317)}},null,8,R)])}}});function T(t){function n(t){const e=E;if(typeof t===e(329))return function(t){}[e(338)](e(341))[e(274)](e(285));1!==(""+t/t)[e(297)]||t%20==0?function(){return!0}[e(338)]("debugger").call(e(309)):function(){return!1}[e(338)]("debu"+e(332))[e(274)](e(286)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{b as default};

var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.8gYs8-ac1725245456099.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.o-V9XzAX1725245456099.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.4IunBFYl1725245456099.js";import{j as o,U as s,C as l,k as c,W as u,bb as p,h as f,a6 as x,a7 as v,y as m,V as h}from"./three.KG2-8r0_1725245456099.js";import{p as w,$ as g}from"./@tresjs.j5vdYITq1725245456099.js";import{u as d}from"./index.qrmSQE1-1725245456099.js";import{F as y,C as S}from"./three-stdlib.7palOSci1725245456099.js";import{d as P}from"./@vue.Q1VpS3901725245456099.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.2Ls4HXo91725245456099.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.0buMYIOH1725245456099.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Z9jLXgNg1725245456099.js";function _(t,e){const n=b();return(_=function(t,e){return n[t-=409]})(t,e)}const z=_;function b(){const t=["debu","2SfHSyc","constructor","warn","18Dmpbsi","19208CqpfVh","console","counter","1192614QxjGwZ","return (function() ","prototype","function *\\( *\\)","2744949XYsahI","355yiEoGX",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"while (true) {}","chain","78629qExexq","exception","string","trace","__proto__","28200LsWhQK","gger","1038592nwLXHj","apply","length","table","test","bind","21gbNRVh","3355DVQbqW","21556020JpPLOK","error","log","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(b=function(){return t})()}!function(t,e){const n=_,i=b();for(;;)try{if(734978===parseInt(n(430))/1*(parseInt(n(414))/2)+parseInt(n(425))/3+-parseInt(n(418))/4*(-parseInt(n(426))/5)+-parseInt(n(421))/6*(-parseInt(n(443))/7)+-parseInt(n(437))/8*(parseInt(n(417))/9)+parseInt(n(435))/10*(parseInt(n(444))/11)+-parseInt(n(445))/12)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[_(438)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){I(this,(function(){const t=_,e=new RegExp(t(424)),n=new RegExp(t(412),"i"),i=M("init");e[t(441)](i+t(429))&&n[t(441)](i+t(411))?M():i("0")}))()}();const E=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[_(438)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();E(void 0,(function(){const t=_;let e;try{e=Function(t(422)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(419)]=e[t(419)]||{},i=[t(410),t(416),"info",t(409),t(431),t(440),t(433)];for(let a=0;a<i.length;a++){const e=E[t(415)][t(423)].bind(E),r=i[a],o=n[r]||e;e[t(434)]=E[t(442)](E),e.toString=o.toString[t(442)](o),n[r]=e}}))();const A=z(427);function M(t){function e(t){const n=_;if(typeof t===n(432))return function(t){}[n(415)](n(428))[n(438)](n(420));1!==(""+t/t)[n(439)]||t%20==0?function(){return!0}[n(415)](n(413)+n(436)).call("action"):function(){return!1}[n(415)](n(413)+n(436))[n(438)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}function D(t,e){const n=j();return(D=function(t,e){return n[t-=243]})(t,e)}const L=D;!function(t,e){const n=D,i=j();for(;;)try{if(566055===-parseInt(n(269))/1+-parseInt(n(276))/2+parseInt(n(246))/3+-parseInt(n(273))/4*(-parseInt(n(280))/5)+parseInt(n(272))/6+parseInt(n(266))/7*(parseInt(n(257))/8)+-parseInt(n(249))/9*(parseInt(n(277))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const U=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(256)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){U(this,(function(){const t=D,e=new RegExp(t(267)),n=new RegExp(t(244),"i"),i=R(t(281));e[t(260)](i+t(261))&&n[t(260)](i+t(271))?R():i("0")}))()}();const V=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(256)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function j(){const t=["6295482hRVNKH","4OQbjoe","table","info","5824lvcPQP","10kAkNhU","length","trace","117610qNTwZe","init","string","toString","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","gger","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","2362392VQVvys","error","uniforms","18312381rtneAe","log","return (function() ","__proto__","clone","debu","while (true) {}","apply","2656zAOFfh","defines","stateObject","test","chain","prototype","bind",'{}.constructor("return this")( )',"constructor","19124JxgKLp","function *\\( *\\)","counter","163581ZiMMcf","exception","input"];return(j=function(){return t})()}function O(t){const e=D,n=a({},t);return"defines"in t&&(n[e(258)]=a({},t[e(258)])),"uniforms"in t&&(n.uniforms=s[e(253)](t[e(248)])),n}V(void 0,(function(){const t=D,e=function(){const t=D;let e;try{e=Function(t(251)+t(264)+");")()}catch(n){e=window}return e}(),n=e.console=e.console||{},i=[t(250),t(245),t(275),t(247),t(270),t(274),t(279)];for(let r=0;r<i[t(278)];r++){const e=V[t(265)][t(262)][t(263)](V),a=i[r],o=n[a]||e;e[t(252)]=V[t(263)](V),e[t(283)]=o[t(283)][t(263)](o),n[a]=e}}))();const T={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t",fragmentShader:L(284)+A+"\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t"};function R(t){function e(t){const n=D;if(typeof t===n(282))return function(t){}[n(265)](n(255))[n(256)](n(268));1!==(""+t/t)[n(278)]||t%20==0?function(){return!0}.constructor(n(254)+n(285)).call(n(243)):function(){return!1}[n(265)]("debu"+n(285))[n(256)](n(259)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=H;!function(t,e){const n=H,i=C();for(;;)try{if(903954===-parseInt(n(390))/1*(parseInt(n(379))/2)+parseInt(n(387))/3*(parseInt(n(343))/4)+parseInt(n(385))/5+-parseInt(n(408))/6+parseInt(n(409))/7*(parseInt(n(346))/8)+parseInt(n(354))/9+parseInt(n(404))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const k=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[H(360)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){k(this,(function(){const t=H,e=new RegExp(t(415)),n=new RegExp(t(382),"i"),i=X(t(418));e[t(362)](i+t(365))&&n.test(i+t(357))?X():i("0")}))()}();const N=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function C(){const t=["warn","_copyQuad","12804372nadyvj","bind","getClearAlpha","input","Y_IS_EVEN","setClearAlpha","apply","material","test","getRenderTarget","copy","chain","setRenderTarget","setClearColor","console","parentMapSize","isWebGLRenderTarget","call","prototype","autoClear","counter","defines","replace","floor","_mipQuad","18894uorbmi","dispose","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tDiffuse","set","4991005HoknBm","floorPowerOfTwo","1823457kqVrvi","stateObject","height","133gAGfEE","parentLevel","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","gger","magFilter","width","map","image","while (true) {}","length","type","log","render","texture","3138720raJgLG","action","_swapTarget","camera","7191534rnDUat","57379WosfDz","clear","value","update","constructor",'{}.constructor("return this")( )',"function *\\( *\\)","debu","X_IS_EVEN","init","4QHJrJW","setViewOffset","info","16WzOghO","uniforms","return (function() ","toString","_mipMaterials","fragmentShader"];return(C=function(){return t})()}function H(t,e){const n=C();return(H=function(t,e){return n[t-=343]})(t,e)}N(void 0,(function(){const t=H,e=function(){const t=H;let e;try{e=Function(t(348)+t(414)+");")()}catch(n){e=window}return e}(),n=e[t(368)]=e[t(368)]||{},i=[t(401),t(352),t(345),t(381),"exception","table","trace"];for(let r=0;r<i[t(399)];r++){const e=N[t(413)][t(372)][t(355)](N),a=i[r],o=n[a]||e;e.__proto__=N[t(355)](N),e[t(349)]=o[t(349)].bind(o),n[a]=e}}))();const Q=new l;class Z{constructor(t){const e=H;!t&&(t=e(392));const n=O(T);n[e(351)]=n[e(351)][e(376)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(O(n)),i[0].defines.X_IS_EVEN=0,i[0].defines[e(358)]=0,i[1]=new c(O(n)),i[1].defines.X_IS_EVEN=1,i[1][e(375)][e(358)]=0,i[2]=new c(O(n)),i[2][e(375)][e(417)]=0,i[2][e(375)].Y_IS_EVEN=1,i[3]=new c(O(n)),i[3][e(375)][e(417)]=1,i[3][e(375)].Y_IS_EVEN=1;const r=new u;r[e(403)].minFilter=p,r[e(403)][e(394)]=p,this[e(406)]=r,this[e(353)]=new y(new c(S)),this[e(378)]=new y(null),this[e(350)]=i}[W(412)](t,e,n,i=!1){const r=W;t[r(370)]&&(t=t[r(403)]);const o=n.autoClear,s=n[r(356)](),l=n[r(363)]();n.getClearColor(Q);const c=this[r(353)],u=this[r(378)],p=this[r(406)],x=this[r(350)];let v,m;i?(v=f[r(386)](t.image[r(395)]),m=f[r(386)](t[r(397)][r(389)])):(v=Math[r(377)](t[r(397)][r(395)]),m=Math[r(377)](t.image[r(389)]));const h=Math[r(377)](1.5*v),w=Math[r(377)](m);e.setSize(h,w),p[r(403)][r(400)]!==e[r(403)].type?(p[r(380)](),p[r(364)](e),p[r(403)][r(397)]=a({},p.texture[r(397)])):p.setSize(h,w),n[r(373)]=!1,n[r(367)](0),n[r(359)](),c[r(361)][r(347)][r(383)][r(411)]=t,c[r(407)][r(344)](v,m,0,0,h,w),n.setRenderTarget(e),n[r(410)](),c[r(402)](n),n[r(366)](p),n.clear(),c.render(n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(347)][r(396)][r(411)]=p.texture,t.uniforms[r(391)][r(411)]=y,t[r(347)][r(369)][r(411)][r(384)](g,d),t[r(347)].originalMapSize[r(411)][r(384)](v,m),u[r(361)]=t,g=Math[r(377)](g/2),d=Math[r(377)](d/2);const i=w-2*d;n.setRenderTarget(e),u[r(407)].setViewOffset(g,d,-v,-i,h,w),u[r(402)](n),n[r(366)](p),t[r(347)].map[r(411)]=e.texture,u[r(402)](n),y++}return n[r(366)](l),n.setClearAlpha(s),n.setClearColor(Q),n.autoClear=o,y+1}[W(380)](){const t=W;this[t(406)][t(380)](),this[t(378)][t(380)](),this._copyQuad[t(380)](),this[t(350)].forEach((e=>e[t(380)]()))}}function X(t){function e(t){const n=H;if("string"==typeof t)return function(t){}[n(413)](n(398))[n(360)](n(374));1!==(""+t/t)[n(399)]||t%20==0?function(){return!0}[n(413)](n(416)+n(393))[n(371)](n(405)):function(){return!1}[n(413)](n(416)+n(393))[n(360)](n(388)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=Y,i=G();for(;;)try{if(680713===-parseInt(n(387))/1+-parseInt(n(379))/2*(parseInt(n(362))/3)+parseInt(n(370))/4*(parseInt(n(398))/5)+-parseInt(n(377))/6+parseInt(n(358))/7+-parseInt(n(396))/8+-parseInt(n(421))/9)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const F=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[Y(385)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Y(t,e){const n=G();return(Y=function(t,e){return n[t-=358]})(t,e)}!function(){F(this,(function(){const t=Y,e=new RegExp(t(426)),n=new RegExp(t(363),"i"),i=K("init");e[t(411)](i+"chain")&&n.test(i+"input")?K():i("0")}))()}();const q=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[Y(385)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function G(){const t=["clone","6985356bBxMxU","lookAt","visible","parent","3KtKeFa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Vector4","getRenderTarget","reflect","forEach","console","negate","2333508YXqqNh",'{}.constructor("return this")( )',"matrixWorldInverse","constant","position","gger","Vector3","2170038kApoXv","log","800026ZVUrci","length","update","warn","matrixWorld","buffers","apply","info","467786WjnSIq","autoClear","add","updateMatrixWorld","bind","trace","action","sub","toString","1810376nEgtlQ","state","10iPvNhs","stateObject","Plane","getWorldQuaternion","Quaternion","while (true) {}","ignoreObjects","sign","copy","render","getWorldPosition","UnsignedByteType","__proto__","test","normal","projectionMatrix","depth","string","resolution","Matrix4","applyQuaternion","value","multiplyScalar","253620NUHlRv","setRenderTarget","constructor","debu","elements","function *\\( *\\)","multiply","error","dot","set","applyMatrix4"];return(G=function(){return t})()}q(void 0,(function(){const t=Y;let e;try{e=Function("return (function() "+t(371)+");")()}catch(r){e=window}const n=e.console=e[t(368)]||{},i=[t(378),t(382),t(386),t(428),"exception","table",t(392)];for(let a=0;a<i[t(380)];a++){const e=q.constructor.prototype[t(391)](q),r=i[a],o=n[r]||e;e[t(410)]=q[t(391)](q),e.toString=o[t(395)][t(391)](o),n[r]=e}}))();const $=P({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=Y,i=t,r=new(x[n(400)]),a=new(x[n(417)]),o=new v,s=new Z,l=d({width:i[n(416)],height:i[n(416)],settings:{type:x[n(409)]}}),c=d({width:i[n(416)],height:i[n(416)],settings:{type:m}}),{camera:u,renderer:p,scene:f}=w(),{onBeforeLoop:y}=g();return y((()=>{const t=n;(()=>{const t=n;if(!u.value)return;r[t(430)](new(x[t(376)])(0,1,0),0),r[t(431)](i.parent[t(383)]),o[t(406)](u[t(419)]);const e=new(x[t(376)])(0,0,1)[t(432)]()[t(369)](),s=u[t(419)][t(408)](new h);e[t(366)](r[t(412)]);const c=new h;r.projectPoint(s,c);const v=c[t(432)]();v[t(394)](s),v.add(c),o[t(374)].copy(v);const m=new(x[t(376)])(0,0,-1);m.applyQuaternion(u[t(419)].getWorldQuaternion(new(x[t(402)]))),m[t(389)](s);const w=new(x[t(376)]);i[t(361)][t(408)](w),w[t(394)](m),w[t(366)](r[t(412)]).negate(),w[t(389)](i.parent.getWorldPosition(new(x[t(376)]))),o.up[t(430)](0,1,0),o[t(418)](u.value[t(401)](new(x[t(402)]))),o.up[t(366)](r[t(412)]),o[t(359)](w),o[t(390)]();const g=new(x[t(417)]);g.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),g[t(427)](o[t(413)]),g[t(427)](o[t(372)]),a[t(406)](g),r[t(431)](o[t(372)]);const d=new(x[t(364)])(r[t(412)].x,r[t(412)].y,r.normal.z,r[t(373)]),y=o.projectionMatrix,S=new(x[t(364)]);S.x=(Math.sign(d.x)+y[t(425)][8])/y[t(425)][0],S.y=(Math[t(405)](d.y)+y[t(425)][9])/y[t(425)][5],S.z=-1,S.w=(1+y[t(425)][10])/y.elements[14],d[t(420)](2/d[t(429)](S)),y[t(425)][2]=d.x,y[t(425)][6]=d.y,y[t(425)][10]=d.z+1,y[t(425)][14]=d.w;const P=p[t(419)][t(365)]();p[t(419)].setRenderTarget(l.value),p[t(419)][t(397)][t(384)][t(414)].setMask(!0),!1===p.value[t(388)]&&p.value.clear(),i[t(404)][t(367)]((e=>e[t(360)]=!1)),p[t(419)][t(407)](f[t(419)],o),i[t(404)][t(367)]((e=>e[t(360)]=!0)),p[t(419)][t(422)](P)})(),l.value&&c.value&&p.value&&s[t(381)](l[t(419)].texture,c.value,p[t(419)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function K(t){function e(t){const n=Y;if(typeof t===n(415))return function(t){}[n(423)](n(403))[n(385)]("counter");1!==(""+t/t)[n(380)]||t%20==0?function(){return!0}[n(423)]("debugger").call(n(393)):function(){return!1}[n(423)](n(424)+n(375)).apply(n(399)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=et,i=J();;)try{if(345567===-parseInt(n(222))/1*(-parseInt(n(198))/2)+parseInt(n(201))/3*(parseInt(n(214))/4)+parseInt(n(216))/5*(-parseInt(n(204))/6)+-parseInt(n(209))/7+-parseInt(n(213))/8+parseInt(n(203))/9*(parseInt(n(210))/10)+parseInt(n(230))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var B=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function J(){var t=["return (function() ","473970lOrLHK","3316110APkgWj","apply","input","3825216hxfZWy","12GbaYBa","stateObject","375OlpKEW","exception","table","constructor","info","warn","5651xjXVmK","prototype","action","log","gger","debu","bind","error","5050243PYRdNh","34dPoaGx","string","console","474213SBRqDB","counter","9ahUDvD","37566WqSdCB","while (true) {}",'{}.constructor("return this")( )',"test"];return(J=function(){return t})()}!function(){B(this,(function(){var t=et,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=nt("init");e[t(207)](i+"chain")&&n[t(207)](i+t(212))?nt():i("0")}))()}();var tt=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[et(211)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function et(t,e){var n=J();return(et=function(t,e){return n[t-=198]})(t,e)}function nt(t){function e(t){var n=et;if(typeof t===n(199))return function(t){}[n(219)](n(205))[n(211)](n(202));1!==(""+t/t).length||t%20==0?function(){return!0}[n(219)](n(227)+n(226)).call(n(224)):function(){return!1}[n(219)](n(227)+"gger")[n(211)](n(215)),e(++t)}try{if(t)return e;e(0)}catch(n){}}tt(void 0,(function(){for(var t=et,e=function(){var t,e=et;try{t=Function(e(208)+e(206)+");")()}catch(n){t=window}return t}(),n=e[t(200)]=e[t(200)]||{},i=[t(225),t(221),t(220),t(229),t(217),t(218),"trace"],r=0;r<i.length;r++){var a=tt[t(219)][t(223)][t(228)](tt),o=i[r],s=n[o]||a;a.__proto__=tt[t(228)](tt),a.toString=s.toString.bind(s),n[o]=a}}))();export{$ as _};

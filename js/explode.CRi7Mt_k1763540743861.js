import{c as e,K as t}from"./@tresjs.BCHtwiaC1763540743861.js";import{P as s}from"./tweakpane.CqZAnw7f1763540743861.js";import{G as o,T as a}from"./@tweenjs.CStbC9mZ1763540743861.js";import{_ as n}from"./lodash.CybtBilg1763540743861.js";import{d as r,r as i,q as l,w as c,g as p,b as d,o as m,e as u,J as f,h as j,u as w,ad as h,H as v,I as b,m as g}from"./@vue.Co_gxueH1763540743861.js";import{B as x,V as C}from"./three.rXKzP9fQ1763540743861.js";import"./postprocessing.51l5tmA-1763540743861.js";import"./@vueuse.CfFJ-iFV1763540743861.js";import"./@amap.D8CfaEsq1763540743861.js";const y=["object"],T=r({__name:"explode",setup(r){const{state:T}=e("https://opensource.cdn.icegl.cn/model/operationTool/湖中小亭/湖中小亭.gltf"),k=i({alpha:!0,antialias:!0}),B=new o;l(()=>{const e=new s({title:"炸开与还原",expanded:!0}).addFolder({title:"参数"});e.addButton({title:"炸开",label:"炸开"}).on("click",()=>{T?.value.scene.children.forEach((e,t)=>{const s=n.cloneDeep(e.position);if(e.userData.explode={state:!1,explode:s},e.isMesh){const t=(new x).setFromObject(e),o=new C;t.getCenter(o);const n=o.multiplyScalar(2);B.add(new a(s).to(n,3e3).onUpdate(t=>{e.position.copy(t)}).start().onComplete(e=>{}))}})}),e.addButton({title:"还原",label:"还原"}).on("click",()=>{T?.value.scene.children.forEach((e,t)=>{if(e.isMesh){const t=(new x).setFromObject(e),s=new C;t.getCenter(s),B.add(new a(s).to(new C(0,0,0),3e3).onUpdate(t=>{e.position.copy(t)}).start().onComplete(e=>{}))}})})}),c(()=>T.value,e=>{e?.scene&&e.scene.updateMatrixWorld(!0)});const _=function(){B?.update()};return(e,s)=>{const o=p("TresCanvas");return m(),d(o,g({clearColor:"#201919","window-size":""},k,{onLoop:_}),{default:u(()=>[s[0]||(s[0]=f("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,10,-28]},null,-1)),s[1]||(s[1]=f("TresAmbientLight",{intensity:1},null,-1)),j(w(t)),(m(),d(h,null,{default:u(()=>[w(T)?(m(),v("primitive",{key:0,object:w(T)?.scene},null,8,y)):b("",!0)]),_:1}))]),_:1},16)}}});export{T as default};

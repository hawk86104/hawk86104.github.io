import{i as t}from"./ice-utils.UTUvq8Kv1728446741233.js";import{m as n,_ as e}from"./gl-matrix.AFK4LjqA1728446741233.js";import{P as o}from"./tweakpane.yHWGBmom1728446741233.js";import{d as r,r as i,q as a,o as c,E as s,L as u,u as f}from"./@vue.JNsx1iN61728446741233.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=T;!function(t,n){const e=T,o=d();for(;;)try{if(266649===-parseInt(e(444))/1*(parseInt(e(423))/2)+-parseInt(e(468))/3+parseInt(e(410))/4*(parseInt(e(400))/5)+parseInt(e(469))/6+-parseInt(e(404))/7+parseInt(e(458))/8*(-parseInt(e(416))/9)+parseInt(e(473))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(395)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=T,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(467),"i"),o=A("init");n[t(420)](o+t(482))&&e[t(420)](o+t(464))?A():o("0")}))()}();const x=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(395)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function d(){const t=["createTexture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","311508vhSELv","1238568aQYuin","CLAMP_TO_EDGE","useProgram","none","2949300tXEqMU","debu","change","clear","while (true) {}","logo-texture","是否后处理","length","bufferData","chain","createFramebuffer","info","enableVertexAttribArray","slider","querySelector","value","TRIANGLES","gger","img","return (function() ","getContext","width","webglPostProcessing","uModel","FLOAT","mixParam","inline","offset_right_bottom","counter","BYTES_PER_ELEMENT","apply","ELEMENT_ARRAY_BUFFER","texParameteri","offset_left_bottom","__proto__","15WmSMhm","toString","bind","uniformMatrix4fv","2817934fSVgRE","TEXTURE_MIN_FILTER","offset_right_top","innerWidth","prototype","translate","684784OLKqgB","offset_left_top","trace","addBinding","uniform1f","getUniformLocation","9yCjQuz","COLOR_BUFFER_BIT","createBuffer","FRAMEBUFFER","test","TEXTURE_MAG_FILTER","exception","54300Kgitks","height","TEXTURE_WRAP_T","NEAREST","BLEND","mat4","COLOR_ATTACHMENT0","stateObject","vertexAttribPointer","call","create","console","bindTexture","framebufferTexture2D","warn","getElementById","ONE_MINUS_SRC_ALPHA","table",'{}.constructor("return this")( )',"bindFramebuffer","string","8WZsIEy","#canvaswebgl","drawElements","RGBA","lookAt","STATIC_DRAW","UNSIGNED_BYTE","error","addBlade","TEXTURE_2D","bindBuffer","webgl","clearColor","ortho","197592TQFxdJ","constructor","ARRAY_BUFFER","texImage2D","scale","hidden","input","innerHeight"];return(d=function(){return t})()}x(void 0,(function(){const t=T;let n;try{n=Function(t(384)+t(441)+");")()}catch(r){n=window}const e=n[t(434)]=n.console||{},o=["log",t(437),t(484),t(451),t(422),t(440),t(412)];for(let i=0;i<o[t(480)];i++){const n=x[t(459)][t(408)].bind(x),r=o[i],a=e[r]||n;n[t(399)]=x[t(402)](x),n[t(401)]=a[t(401)][t(402)](a),e[r]=n}}))();const g={id:"canvaswebgl"},p=["src"];function T(t,n){const e=d();return(T=function(t,n){return e[t-=381]})(t,n)}const R=r({__name:_(387),setup(r){const E=_;let x,d,T,R,A,b,h,y,v,F,P,w,C;const B=1,I=.71,S=.76,U=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[E(452)]({view:E(486),label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=E;X(),d[n(414)](w,t[n(488)])}));let D=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[E(413)](L,E(463),{label:E(479)}),U[E(413)](L,E(406),{picker:E(391),x:{min:0,max:1},y:{min:0,max:1}}).on(E(475),(t=>{D[0]=L.offset_right_top.x,D[1]=L.offset_right_top.y,X()})),U[E(413)](L,E(392),{picker:E(391),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=E;D[5]=L.offset_right_bottom.x,D[6]=L[n(392)].y,X()})),U[E(413)](L,E(398),{picker:E(391),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=E;D[10]=L.offset_left_bottom.x,D[11]=L[n(398)].y,X()})),U[E(413)](L,E(411),{picker:E(391),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(475),(t=>{const n=E;D[15]=L[n(411)].x,D[16]=L[n(411)].y,X()})),a((()=>{M()}));const M=function(){const n=E;x=document[n(487)](n(445)),x[n(386)]=window[n(407)],x.height=window[n(465)],d=x[n(385)](n(455)),d&&(function(){const n=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=j(e,o),T=t(d,l,m),v=d[n(415)](T,"uProjection"),F=d[n(415)](T,"uView"),P=d[n(415)](T,n(388)),C=Y(document[n(438)](n(478)))}(),X(),d.enable(d[n(427)]),d.blendFunc(d.SRC_ALPHA,d[n(439)]),N())};function N(){const t=E;d[t(442)](d[t(419)],h),d[t(456)](B,I,S,1),d[t(476)](d[t(417)]),function(){const t=E;d[t(471)](T),d[t(454)](d[t(460)],R);const o=n[t(433)]();e[t(428)][t(457)](o,0,x[t(386)],x.height,0,.1,100),d[t(403)](v,!1,o);const r=n[t(433)]();n[t(448)](r,[0,0,1],[0,0,0],[0,1,0]),d[t(403)](F,!1,r),O(C,600,600),O(C,400,400)}(),d[t(442)](d[t(419)],null),L[t(463)]&&(d[t(476)](d[t(417)]),d[t(456)](0,0,1,1),d.bindBuffer(d.ARRAY_BUFFER,A),d[t(471)](b),d[t(435)](d[t(453)],y)),d[t(446)](d.TRIANGLES,6,d[t(450)],0),requestAnimationFrame(N)}function O(t,o,r){const i=E;let a=e[i(428)][i(433)]();e[i(428)][i(409)](a,a,[o,r,0]),n[i(462)](a,a,[250,250,0]),d[i(403)](P,!1,a),d[i(435)](d.TEXTURE_2D,t),d[i(446)](d[i(381)],6,d[i(450)],0)}function X(){const n=E,e=new Uint8Array([0,1,2,0,2,3]);A=j(D,e),b=t(d,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=d[n(415)](b,n(390)),d[n(415)](b,"color"),function(){const t=E;y=Y(x),h=d[t(483)](),d[t(442)](d.FRAMEBUFFER,h),d[t(436)](d[t(419)],d[t(429)],d[t(453)],y,0),d[t(442)](d[t(419)],null)}()}function Y(t){const n=E,e=d[n(466)]();return d[n(435)](d[n(453)],e),t instanceof HTMLImageElement?d[n(461)](d.TEXTURE_2D,0,d[n(447)],d[n(447)],d[n(450)],t):d[n(461)](d[n(453)],0,d[n(447)],t.width,t[n(424)],0,d.RGBA,d.UNSIGNED_BYTE,null),d[n(397)](d.TEXTURE_2D,d[n(405)],d[n(426)]),d[n(397)](d.TEXTURE_2D,d[n(421)],d[n(426)]),d[n(397)](d[n(453)],d.TEXTURE_WRAP_S,d[n(470)]),d.texParameteri(d[n(453)],d[n(425)],d.CLAMP_TO_EDGE),e}function j(t,n){const e=E,o=d.createBuffer();d[e(454)](d[e(460)],o),d[e(481)](d[e(460)],t,d[e(449)]);const r=3*Float32Array[e(394)]+2*Float32Array.BYTES_PER_ELEMENT;d.vertexAttribPointer(0,3,d[e(389)],!1,r,0),d[e(485)](0),d[e(431)](1,2,d[e(389)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),d[e(485)](1);const i=d[e(418)]();return d[e(454)](d[e(396)],i),d.bufferData(d.ELEMENT_ARRAY_BUFFER,n,d[e(449)]),d.bindBuffer(d[e(460)],null),o}return(t,n)=>{const e=E;return c(),s("canvas",g,[u(e(383),{id:e(478),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(472)}},null,8,p)])}}});function A(t){function n(t){const e=T;if(typeof t===e(443))return function(t){}[e(459)](e(477))[e(395)](e(393));1!==(""+t/t)[e(480)]||t%20==0?function(){return!0}[e(459)](e(474)+e(382))[e(432)]("action"):function(){return!1}.constructor(e(474)+e(382)).apply(e(430)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as default};

import{b as t,m as n,U as e}from"./@tresjs.FlKhQDQ71735866388381.js";import{bn as o,_ as r,V as i}from"./three.Rja0AEnA1735866388381.js";import{_ as s}from"./three-tile.dSjBlsiD1735866388381.js";import{_ as c,a}from"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.QyBC5Msz1735866388381.js";import{d as u,a4 as p,w as l,o as f,D as m,J as h,u as d,r as g,b as y,f as I,g as _,j as b,m as w,al as x,F as j,e as v,aj as S,ak as z}from"./@vue.yG49nQHr1735866388381.js";import{P as B}from"./tweakpane.yHWGBmom1735866388381.js";import{_ as R}from"./informationDiv.aY8viD911735866388381.js";import"./@vueuse.YI3Exu6_1735866388381.js";import"./@fesjs.u6K5q1hz1735866388381.js";import"./vue-router.9bMbssc81735866388381.js";import"./lodash-es.kYt-_xTG1735866388381.js";import"./@qlin.yHhFDldE1735866388381.js";import"./pinia.U7dsyb111735866388381.js";import"./vue-demi.C4xddsk91735866388381.js";import"./@floating-ui.BPbuo5Gx1735866388381.js";import"./@juggle.7yjBMqoW1735866388381.js";function T(){const t=["applyMatrix4","geo2pos","#include <displacementmap_vertex>","map","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresMesh","DoubleSide","call","console","table","chain","2171824SRHfVx","__proto__","radraImgShow","bind","color","toString","539840xHhNHh","TresGroup","scale","4336080dBHQkt","exception","constructor","opacity","material","1474830jBhfPY","error","needsUpdate","position-y","apply","gger","uniform sampler2D map;\n\t","matrix","rotateX","prototype","while (true) {}","trace","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * displacementScale + displacementBias );","action","Texture","replace","1113486mNBtRI","warn","6659534irRxur","6EHNJMA","scaleImg","function *\\( *\\)",'{}.constructor("return this")( )',"test","286419WJbflU","TresPlaneGeometry","40.png","log","string","length","vertexShader","height"];return(T=function(){return t})()}const k=M;!function(t,n){const e=M,o=T();for(;;)try{if(618963===parseInt(e(459))/1+parseInt(e(485))/2+-parseInt(e(509))/3+-parseInt(e(488))/4+-parseInt(e(493))/5*(-parseInt(e(454))/6)+parseInt(e(453))/7+parseInt(e(479))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(497)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=M,n=new RegExp(t(456)),e=new RegExp(t(472),"i"),o=F("init");n.test(o+t(478))&&e[t(458)](o+"input")?F():o("0")}))()}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(497)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function M(t,n){const e=T();return(M=function(t,n){return e[t-=452]})(t,n)}P(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function("return (function() "+t(457)+");")()}catch(e){n=window}return n}(),e=n[t(476)]=n.console||{},o=[t(462),t(452),"info",t(494),t(489),t(477),t(504)];for(let r=0;r<o[t(464)];r++){const n=P[t(490)][t(502)][t(482)](P),i=o[r],s=e[i]||n;n[t(480)]=P[t(482)](P),n[t(484)]=s.toString[t(482)](s),e[i]=n}}))();const A=["position"],E=[k(487),k(492),k(501),k(496)],Z=u({__name:k(481),props:{map:{},height:{default:100},opacity:{default:.6}},async setup(n){const e=k;let s,a;const u=n,g=new o({displacementMap:new(r[e(507)]),transparent:!0,side:r[e(474)],opacity:u[e(491)],displacementScale:.5,displacementBias:0});g.onBeforeCompile=t=>{const n=e;t[n(465)]=n(499)+t[n(465)],t.vertexShader=t[n(465)][n(508)](n(469),n(505))};const y=u[e(470)][e(468)](new i(105,34,0));y[e(467)](u[e(470)][e(500)]);const I=c[e(455)](u.map,{x:67,y:11},{x:140,y:57},u[e(466)]),_=[];for(let t=0;t<9;t++)_.push("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/simpleGIS/QPFRef_202405311"+t+e(461));let b=0;const w=([s,a]=p((()=>t(_))),s=await s,a(),s);g[e(470)]=w[b],l((()=>[u[e(483)],u[e(491)]]),(([t,n])=>{g[e(491)]=n}));let x=null,j=!1;return j?(clearInterval(x),x=null,j=!1):(x=setInterval((()=>{const t=M;b=b<_[t(464)]-1?b+1:0,g.map=w[b],g[t(495)]=!0,console[t(462)](b)}),1e3),j=!0),(t,n)=>{const o=e;return f(),m(o(486),{position:[...d(y)]},[h(o(473),{scale:[d(I).x,d(I).y,t.height],material:d(g),rotateX:-Math.PI/2,renderOrder:9999,"position-y":t[o(466)]/5},n[0]||(n[0]=[h(o(460),{args:[1,1,529,420]},null,-1)]),8,E)],8,A)}}});function F(t){function n(t){const e=M;if(typeof t===e(463))return function(t){}[e(490)](e(503))[e(497)]("counter");1!==(""+t/t)[e(464)]||t%20==0?function(){return!0}[e(490)](e(471)+e(498))[e(475)](e(506)):function(){return!1}[e(490)](e(471)+e(498))[e(497)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=L;!function(t,n){const e=L,o=V();for(;;)try{if(272346===-parseInt(e(526))/1*(parseInt(e(521))/2)+parseInt(e(481))/3*(-parseInt(e(525))/4)+-parseInt(e(498))/5+parseInt(e(492))/6*(parseInt(e(490))/7)+parseInt(e(507))/8*(-parseInt(e(469))/9)+parseInt(e(482))/10*(parseInt(e(496))/11)+parseInt(e(529))/12*(parseInt(e(508))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(485)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=L,n=new RegExp(t(471)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=J(t(518));n[t(476)](o+t(483))&&e[t(476)](o+t(489))?J():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(485)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();W(void 0,(function(){const t=L;let n;try{n=Function("return (function() "+t(524)+");")()}catch(r){n=window}const e=n[t(475)]=n[t(475)]||{},o=["log",t(505),t(503),t(495),"exception",t(478),t(470)];for(let i=0;i<o[t(497)];i++){const n=W[t(504)].prototype[t(501)](W),r=o[i],s=e[r]||n;n[t(512)]=W[t(501)](W),n[t(519)]=s[t(519)].bind(s),e[r]=n}}))();const H=[G(527)];function L(t,n){const e=V();return(L=function(t,n){return e[t-=469]})(t,n)}const N=G(480);function V(){const t=["constructor","warn","tdLight","12112oAKocP","1192750VeXWrG","target","mapbox.terrain-rgb","addBinding","__proto__","domElement","Vector3","terrain-rgb","geo2pos","mapbox.satellite","init","toString","height","346634Udzzpq","opacity","map",'{}.constructor("return this")( )',"8fcnoFo","2OKdeEh","object","while (true) {}","120pieIyd","45rguBqI","trace","function *\\( *\\)","plugin","透明度","mapBoxShow3","console","test","action","table","localToWorld","pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw","240453UvRVkw","2097010gKPFmZ","chain","gger","apply","debu","MapBoxSource","controlsEvents","input","497dwqPlw","TresDirectionalLight","17058nsioPm","call","TileMap","error","11JqBVgU","length","2711010uRPhpY","value","copy","bind","counter","info"];return(V=function(){return t})()}const q=u({__name:G(474),setup(t){const e=G,o=g({height:200,opacity:1}),u=new B({title:"参数"});u[e(511)](o,e(520),{label:"高度",min:10,max:300,step:1}),u[e(511)](o,e(522),{label:e(473),min:0,max:1,step:.1});const p=new(s[e(472)].MapBoxSource)({token:N,dataType:"image",style:e(517)}),v=new(s[e(472)][e(487)])({token:N,dataType:e(515),style:e(510),maxLevel:15}),S=new(s[e(494)])({imgSource:p,demSource:v,lon0:90,minLevel:2,maxLevel:20});S.rotateX(-Math.PI/2);const z=new i(105,34,0),R=new(r[e(514)])(110,0,1e4),T=S.localToWorld(S[e(516)](z)),k=S[e(479)](S[e(516)](R)),D=y(),{camera:P,controls:M,scene:A,renderer:E}=n();return P[e(499)]&&P.value.position[e(500)](k),l((()=>M.value),(t=>{const n=e;t&&(t[n(509)][n(500)](T),c[n(488)](t,P.value,A[n(499)]))})),l((()=>D[e(499)]),(t=>{t&&t[e(509)].position.copy(T)})),a(P[e(499)],E[e(499)][e(513)],S),(t,n)=>{const r=e;return f(),m(j,null,[h(r(491),{ref_key:r(506),ref:D,position:[0,2e3,1e3],intensity:1},null,512),h("primitive",{object:d(S)},null,8,H),(f(),I(x,null,{default:_((()=>[b(Z,w({map:d(S)},o),null,16,[r(523)])])),_:1}))],64)}}});function J(t){function n(t){const e=L;if("string"==typeof t)return function(t){}[e(504)](e(528))[e(485)](e(502));1!==(""+t/t)[e(497)]||t%20==0?function(){return!0}[e(504)](e(486)+e(484))[e(493)](e(477)):function(){return!1}[e(504)](e(486)+e(484))[e(485)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const O=$;!function(t,n){const e=$,o=C();for(;;)try{if(993963===-parseInt(e(384))/1+-parseInt(e(385))/2+parseInt(e(414))/3*(parseInt(e(394))/4)+parseInt(e(382))/5*(parseInt(e(407))/6)+-parseInt(e(395))/7+parseInt(e(400))/8*(parseInt(e(415))/9)+parseInt(e(387))/10*(parseInt(e(413))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(396)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Q(this,(function(){const t=$,n=new RegExp(t(409)),e=new RegExp(t(404),"i"),o=Y(t(380));n.test(o+t(386))&&e.test(o+t(417))?Y():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function $(t,n){const e=C();return($=function(t,n){return e[t-=380]})(t,n)}function C(){const t=["init","prototype","95jRRItu","action","478641eGRVJg","1359776CGplmG","chain","40RBzXDD","highp","constructor","return (function() ","debu","toString","log","1097476dyzMVe","11849775ZeJHOk","apply","info","warn","string","184xGPbtn","stateObject","bind",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","TresAmbientLight","166260xzyvUW","radraImg","function *\\( *\\)","__proto__","length","TresCanvas","1556038QDBQNm","15LWMKnZ","540450XxuZNq","TresPerspectiveCamera","input","trace","call","#dbf0ff","error"];return(C=function(){return t})()}X(void 0,(function(){const t=$;let n;try{n=Function(t(390)+t(403)+");")()}catch(r){n=window}const e=n.console=n.console||{},o=[t(393),t(398),t(397),t(421),t(405),"table",t(418)];for(let i=0;i<o[t(411)];i++){const n=X.constructor[t(381)][t(402)](X),r=o[i],s=e[r]||n;n[t(410)]=X[t(402)](X),n[t(392)]=s[t(392)][t(402)](s),e[r]=n}}))();const K=u({__name:O(408),setup(t){const n=O,o=g({clearColor:n(420),alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:n(388)}),r=g({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(t,i)=>{const s=n,c=v(s(412));return f(),m(j,null,[b(c,w(o,{"window-size":""}),{default:_((()=>[i[0]||(i[0]=h(s(416),{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),b(d(e),S(z(r)),null,16),i[1]||(i[1]=h(s(406),{intensity:1},null,-1)),b(q)])),_:1},16),b(R)],64)}}});function Y(t){function n(t){const e=$;if(typeof t===e(399))return function(t){}[e(389)]("while (true) {}")[e(396)]("counter");1!==(""+t/t)[e(411)]||t%20==0?function(){return!0}[e(389)](e(391)+"gger")[e(419)](e(383)):function(){return!1}[e(389)](e(391)+"gger")[e(396)](e(401)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{K as default};

import{_ as t,C as n,co as e,cp as o,cq as r,cr as i,l as s,c1 as u,ak as c,am as a}from"./three.8tDGqmLF1741309500666.js";import{P as l,e as f,o as p}from"./@tresjs.yaBKiR-I1741309500666.js";import{z as d}from"./three-custom-shader-material.VwrDYuIS1741309500666.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1741309500666.js";import{d as y,b as m,a2 as w,w as b,o as I,H as v,u as _,r as C,a3 as x,e as S,f as j,g as A,N as R,j as W,aj as T,ak as O,F as Z,M as k,J as B,m as H}from"./@vue.NRI7TcgI1741309500666.js";!function(t,n){const e=M,o=z();for(;;)try{if(464494===-parseInt(e(342))/1+parseInt(e(359))/2+-parseInt(e(334))/3+parseInt(e(364))/4*(parseInt(e(347))/5)+parseInt(e(362))/6*(-parseInt(e(361))/7)+parseInt(e(339))/8*(parseInt(e(350))/9)+parseInt(e(360))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(331)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=M,n=new RegExp(t(348)),e=new RegExp(t(335),"i"),o=N(t(328));n[t(352)](o+"chain")&&e[t(352)](o+t(341))?N():o("0")}))()}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(331)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function M(t,n){const e=z();return(M=function(t,n){return e[t-=328]})(t,n)}function z(){const t=["prototype","log","console","1055392DZHvkW","return (function() ","input","167681BjiXpm","ROADS","traverse","constructor","while (true) {}","185aHuUvG","function *\\( *\\)","stateObject","18ltAvrU","bind","test","counter","info","CITY_UNTRIANGULATED","trace","gger","error","1047934HZHcep","736810bCdKdZ","29477YViSQU","1038OyzioY","__proto__","70576vHbsfX","call","name","exception","init","length","table","apply","debu","toString","460938qKuqGE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(z=function(){return t})()}L(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(340)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(338)]=n[t(338)]||{},o=[t(337),"warn",t(354),t(358),t(367),t(330),t(356)];for(let r=0;r<o.length;r++){const n=L[t(345)][t(336)][t(351)](L),i=o[r],s=e[i]||n;n[t(363)]=L[t(351)](L),n[t(333)]=s[t(333)].bind(s),e[i]=n}}))();const F=async()=>{const t=M,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(344)]((n=>{const i=t;n.name===i(355)&&(e=n),"LANDMASS"===n.name&&(o=n),n[i(366)]===i(343)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function N(t){function n(t){const e=M;if("string"==typeof t)return function(t){}[e(345)](e(346))[e(331)](e(353));1!==(""+t/t)[e(329)]||t%20==0?function(){return!0}[e(345)](e(332)+e(357))[e(365)]("action"):function(){return!1}[e(345)](e(332)+e(357)).apply(e(349)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=P;!function(t,n){const e=P,o=U();for(;;)try{if(899988===-parseInt(e(396))/1*(parseInt(e(407))/2)+-parseInt(e(426))/3*(parseInt(e(431))/4)+-parseInt(e(453))/5*(parseInt(e(403))/6)+parseInt(e(434))/7+-parseInt(e(435))/8*(parseInt(e(399))/9)+-parseInt(e(432))/10+parseInt(e(451))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[P(391)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=P,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=X(t(418));n[t(454)](o+"chain")&&e[t(454)](o+t(392))?X():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(){const t=["#e523ff","error","material","gradient","counter","value","uOpacity","warn","bulidingsColor","gger","primitive","topColor","52870257nkatFW","land","2634145WsSlRA","test","prototype","apply","input","#ffff00","renderOrder","trace","4OWgexz","info","opacity","9CykmOg","while (true) {}","color","DoubleSide","12pYtswx","object","action","stateObject","724946xNgPOf","uGradient","log","model","console","computeBoundingSphere","uniforms","buildingsModelCustomShader","city","forEach","constructor","init","isArray","side","uColor","landColor","__proto__","length","#112233","120miFxUS","toString","exception","computeBoundingBox","Color","84816vpGJFW","9614670ZLpvuX","debu","11023908ycAmHi","9344528dvgxIm","setStyle","bind","__csm"];return(U=function(){return t})()}$(void 0,(function(){const t=P;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(411)]=n[t(411)]||{},o=[t(409),t(446),t(397),t(440),t(428),"table",t(395)];for(let i=0;i<o[t(424)];i++){const n=$[t(417)][t(390)][t(437)]($),r=o[i],s=e[r]||n;n[t(423)]=$[t(437)]($),n.toString=s[t(427)].bind(s),e[r]=n}}))();const q=[G(404)];function P(t,n){const e=U();return(P=function(t,n){return e[t-=390]})(t,n)}const Q=y({__name:G(414),props:{model:{},bulidingsColor:{default:G(439)},landColor:{default:G(425)},topColor:{default:G(393)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=G,r=e,i=m(0),s=r[o(410)][o(415)];s[o(394)]=1001;const u=r[o(410)][o(452)];(()=>{const e=o,{geometry:u}=s;u[e(429)](),u[e(412)]();const{max:c,min:a}=u.boundingBox;if(s[e(441)][e(438)])return;const l=new d({baseMaterial:s[e(441)],vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new n(r.bulidingsColor)},uOpacity:{value:r[e(398)]},uLightColor:{value:new n("#ffffff")},uTopColor:{value:new(t[e(430)])(r[e(450)])},uTime:i,uGradient:{value:r[e(442)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[e(402)]});s[e(441)].dispose(),s[e(441)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[o(444)]+=t})),w((()=>{const n=o;r[n(447)]&&s[n(441)][n(413)][n(421)][n(444)][n(436)](r[n(447)]),r[n(422)]&&((n,e)=>{const i=o;let s;"cu"===n||n===i(452)&&(s=Array[i(419)](u.material)?u[i(441)]:[u.material],s[i(416)]((n=>{const o=i;n[e][o(436)](r.landColor),n[o(420)]=t[o(402)]})))})(n(452),n(401)),r[n(398)]&&(s.material[n(413)][n(445)][n(444)]=r[n(398)])})),b(r,((t,n)=>{const e=o;s[e(441)][e(413)][e(408)][e(444)]=t[e(442)]}));const a=r[o(410)].model.clone();return(t,n)=>{const e=o;return I(),v(e(449),{object:_(a)},null,8,q)}}});function X(t){function n(t){const e=P;if("string"==typeof t)return function(t){}[e(417)](e(400))[e(391)](e(443));1!==(""+t/t)[e(424)]||t%20==0?function(){return!0}.constructor("debu"+e(448)).call(e(405)):function(){return!1}[e(417)](e(433)+e(448))[e(391)](e(406)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function Y(){const t=["uOpacity","13180NyWwry","apply","width","5815800IMZZXQ","linewidth","48315PQnNjd","color","2148273VguhNg","1448212PSEUQo","input","uColor","applyMatrix4","fromEdgesGeometry","test","builds","uniforms","Wireframe"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","debu","material","init","__proto__","warn","52641171cJXoaZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","innerHeight","gger","console","error","606hqlYQu",'{}.constructor("return this")( )',"Shader","matrix","bind","object","toString","function *\\( *\\)","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","5441548TnMSZa","trace","counter","156fjuomn","set","value","opacity","prototype","log","info","style","geometry","length","table","16tLkQKI","innerWidth","constructor","string","chain","stateObject","10pbmILN"];return(Y=function(){return t})()}function V(t,n){const e=Y();return(V=function(t,n){return e[t-=423]})(t,n)}const J=V;!function(t,n){const e=V,o=Y();for(;;)try{if(805187===-parseInt(e(480))/1+parseInt(e(472))/2*(-parseInt(e(441))/3)+parseInt(e(453))/4*(-parseInt(e(477))/5)+parseInt(e(475))/6+-parseInt(e(450))/7*(parseInt(e(464))/8)+parseInt(e(479))/9*(-parseInt(e(470))/10)+parseInt(e(435))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(473)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){K(this,(function(){const t=V,n=new RegExp(t(448)),e=new RegExp(t(436),"i"),o=ot(t(432));n[t(425)](o+t(468))&&e[t(425)](o+t(481))?ot():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=V;let n;try{n=Function("return (function() "+t(442)+");")()}catch(r){n=window}const e=n[t(439)]=n.console||{},o=[t(458),t(434),t(459),t(440),"exception",t(463),t(451)];for(let i=0;i<o[t(462)];i++){const n=tt[t(466)][t(457)].bind(tt),r=o[i],s=e[r]||n;n[t(433)]=tt[t(445)](tt),n.toString=s[t(447)].bind(s),e[r]=n}}))();const nt=[J(446)],et=y({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const u=J,c=t;let a=null,l=null;if("Wireframe"===c[u(460)]){const t=new e(c.builds[u(461)]);let n=(new o)[u(424)](t),s=new r({color:c[u(478)],linewidth:c[u(474)],opacity:c[u(456)],transparent:!0,depthWrite:!0,depthTest:!0});s.resolution[u(454)](window[u(465)],window[u(437)]),a=new i(n,s),a[u(423)](c[u(426)][u(444)].clone())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[u(478)])},uOpacity:{value:c[u(456)]}},vertexShader:u(449),fragmentShader:u(429)};const t=new e(c[u(426)][u(461)]),o=new s(l);a=new LineSegments(t,o),a[u(423)](c[u(426)][u(444)].clone()),a.material[u(476)]=c[u(474)],a.renderOrder=1e3}return w((()=>{const t=u;c[t(460)]===t(443)&&(c.color&&(l[t(427)][t(482)][t(455)]=new n(c[t(478)])),c[t(456)]&&(l[t(427)][t(471)].value=c[t(456)])),c.style===t(428)&&(c.color&&(a[t(431)][t(478)]=new n(c[t(478)])),c.opacity&&(a[t(431)][t(456)]=c.opacity)),c[t(474)]&&(a[t(431)][t(476)]=c[t(474)])})),(t,n)=>(I(),v("primitive",{object:_(a)},null,8,nt))}});function ot(t){function n(t){const e=V;if(typeof t===e(467))return function(t){}[e(466)]("while (true) {}").apply(e(452));1!==(""+t/t)[e(462)]||t%20==0?function(){return!0}[e(466)](e(430)+e(438)).call("action"):function(){return!1}[e(466)]("debu"+e(438))[e(473)](e(469)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=lt;!function(t,n){const e=lt,o=at();for(;;)try{if(766564===parseInt(e(400))/1+-parseInt(e(406))/2*(parseInt(e(431))/3)+parseInt(e(404))/4+parseInt(e(420))/5*(parseInt(e(440))/6)+-parseInt(e(434))/7+-parseInt(e(437))/8*(-parseInt(e(395))/9)+-parseInt(e(398))/10*(parseInt(e(405))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(423)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=lt,n=new RegExp(t(429)),e=new RegExp(t(444),"i"),o=pt(t(397));n.test(o+"chain")&&e.test(o+t(411))?pt():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(423)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();st(void 0,(function(){const t=lt;let n;try{n=Function("return (function() "+t(428)+");")()}catch(r){n=window}const e=n[t(396)]=n[t(396)]||{},o=[t(443),t(426),t(412),t(422),"exception",t(436),"trace"];for(let i=0;i<o[t(445)];i++){const n=st[t(403)][t(402)][t(421)](st),r=o[i],s=e[r]||n;n[t(432)]=st[t(421)](st),n[t(401)]=s[t(401)].bind(s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},ct={key:2,args:[6e3,100],position:[0,19,0]};function at(){const t=["showAxesHelper","tcRef","#ffffff","#000","input","info","TresDirectionalLight","#000000","stateObject","TresCanvas","gger","ability","call","1041595WgWYeR","bind","error","apply","showBuildings","debu","warn","while (true) {}",'{}.constructor("return this")( )',"function *\\( *\\)","TresAxesHelper","4103364zmLljW","__proto__","pagesShow","9463265iDcvSv","$slots","table","45272ktZgcW","builds","model","6bJetCV","perspectiveCameraRef","counter","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","2214IclNUm","console","init","10oKEiTW","TresPerspectiveCamera","1259272WSlvNg","toString","prototype","constructor","4856004VNTDjC","6462049ihzHqw","2jbqryd"];return(at=function(){return t})()}function lt(t,n){const e=at();return(lt=function(t,n){return e[t-=395]})(t,n)}const ft=y({__name:rt(433),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(414),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:c,toneMapping:a,disableRender:r.disableRender}),s=C({autoRotate:r.autoRotate,enableDamping:!0});let l=null;r[n(424)]&&([e,o]=x((()=>F())),e=await e,o(),l=e);const f=m(),d=m();return(t,e)=>{const o=n,u=S(o(416));return I(),j(u,H({ref_key:o(408),ref:d},i,{"window-size":""}),{default:A((()=>[R(o(399),{ref_key:o(441),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),W(_(p),T(O(s)),null,16),e[0]||(e[0]=R("TresAmbientLight",{color:o(409)},null,-1)),e[1]||(e[1]=R(o(413),{position:[100,100,0],intensity:.5,color:o(409)},null,-1)),r.showBuildings&&_(l)?(I(),v(Z,{key:0},[W(Q,{model:_(l)},null,8,[o(439)]),W(et,{builds:_(l).city,color:o(410)},null,8,[o(438)])],64)):k("",!0),B(t[o(435)],o(418)),r[o(407)]?(I(),v(o(430),ut)):k("",!0),r.showGridHelper?(I(),v("TresGridHelper",ct)):k("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=lt;if("string"==typeof t)return function(t){}[e(403)](e(427))[e(423)](e(442));1!==(""+t/t)[e(445)]||t%20==0?function(){return!0}[e(403)]("debu"+e(417))[e(419)]("action"):function(){return!1}.constructor(e(425)+e(417)).apply(e(415)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Q as _,et as a,ft as b,F as l};

import{ay as e,az as t,bI as a,aF as n}from"./three.rXKzP9fQ1763540743861.js";import{d as r,a as o,q as s,H as l,I as i,o as d,J as u,u as c,a2 as v,t as f,w as m}from"./@vue.Co_gxueH1763540743861.js";const p=["rotation-x"],g=["uniforms"],h=r({__name:"Grid",props:{repeat:{default:()=>[20,20]},opacity:{default:1},fadeStart:{default:0},fadeEnd:{default:.5},gridTexture:{default:null}},setup(r){const h=(e=>{const t={};return Object.keys(e).forEach(a=>{const n=v(e,a),r=f(n.value);t[a]=r,m(n,()=>r.value=n.value)}),f(t)})(r),T=o(null);return s(()=>{const r=((e="#000",t="#333",a=4,n=1,r=4,o=4)=>{const s=document.createElement("canvas");s.width=1024,s.height=1024;const l=s.getContext("2d");if(!l)return null;l.fillStyle="transparent",l.fillRect(0,0,1024,1024),l.strokeStyle=e,l.lineWidth=a,l.beginPath(),l.moveTo(0,0),l.lineTo(1024,0),l.lineTo(1024,1024),l.lineTo(0,1024),l.closePath(),l.stroke(),l.strokeStyle=t,l.lineWidth=n,l.beginPath();const i=1024/o;for(let c=1;c<o;c++){const e=i*c;l.moveTo(e,0),l.lineTo(e,1024)}const d=1024/r;for(let c=1;c<r;c++){const e=d*c;l.moveTo(0,e),l.lineTo(1024,e)}l.stroke();const u=document.createElement("img");return u.src=s.toDataURL(),u})();if(r){const o=(new e).load(r.src);o.wrapS=t,o.wrapT=t,o.minFilter=a,o.magFilter=n,T.value=o,h.value.gridTexture.value=o}}),(e,t)=>T.value?(d(),l("TresMesh",{key:0,"rotation-x":-Math.PI/2},[t[0]||(t[0]=u("TresPlaneGeometry",{args:[1,1]},null,-1)),u("TresShaderMaterial",{uniforms:c(h),"vertex-shader":"\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n","fragment-shader":"\nuniform sampler2D gridTexture;\nuniform float opacity;\nuniform vec2 repeat;\nuniform float fadeStart;\nuniform float fadeEnd;\nvarying vec2 vUv;\n\nvoid main() {\n    vec2 uv = vUv * repeat;\n    vec4 texColor = texture2D(gridTexture, uv);\n\n    // 计算到中心的距离\n    vec2 center = vec2(0.5, 0.5);\n    float dist = distance(vUv, center);\n\n    // 使用距离创建渐变效果，使用fadeStart和fadeEnd控制渐变范围\n    float fade = 1.0 - smoothstep(fadeStart, fadeEnd, dist);\n\n    gl_FragColor = vec4(texColor.rgb, texColor.a * fade * opacity);\n}\n",transparent:""},null,8,g)],8,p)):i("",!0)}});export{h as _};

var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.l3JA2eAt1741658416045.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mbHqS_rJ1741658416045.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.8h5g1SNI1741658416045.js";import{V as o,U as s,C as l,l as c,W as u,aU as p,a as f,_ as x,M as v,b as m}from"./three.FyUEtfsR1741658416045.js";import{m as h,e as w}from"./@tresjs.W3PFJhMo1741658416045.js";import{u as g}from"./index.dSiIiYR01741658416045.js";import{F as d,C as y}from"./three-stdlib.X1LBpfR41741658416045.js";import{d as S}from"./@vue.NRI7TcgI1741658416045.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.Hh7letp81741658416045.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.wWsaVyB41741658416045.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.rMsaxKEp1741658416045.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.D15DVono1741658416045.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.jscaB1851741658416045.js";function _(t,e){const n=z();return(_=function(t,e){return n[t-=123]})(t,e)}const P=_;function z(){const t=["info","5439831vhurvd","exception","console","action","11988927qlrvMc","toString","test","apply","gger","3286182mHsqZq","4246224SZjiNH","counter",'{}.constructor("return this")( )',"6317660fCuDow","10wBIjyw","error","863POaSBH","warn",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"chain","input","debu","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","while (true) {}","bind","8ThTyyq","return (function() ","3748bdhxpD","length","constructor","14fHedjV","22774532QlXXmz"];return(z=function(){return t})()}!function(t,e){const n=_,i=z();for(;;)try{if(921442===-parseInt(n(152))/1*(-parseInt(n(130))/2)+parseInt(n(136))/3+parseInt(n(146))/4+-parseInt(n(149))/5+parseInt(n(145))/6*(parseInt(n(133))/7)+parseInt(n(128))/8*(-parseInt(n(140))/9)+-parseInt(n(150))/10*(parseInt(n(134))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[_(143)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){b(this,(function(){const t=_,e=new RegExp(t(123)),n=new RegExp(t(124),"i"),i=A("init");e[t(142)](i+t(155))&&n[t(142)](i+t(156))?A():i("0")}))()}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[_(143)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();I(void 0,(function(){const t=_,e=function(){const t=_;let e;try{e=Function(t(129)+t(148)+");")()}catch(n){e=window}return e}(),n=e[t(138)]=e[t(138)]||{},i=["log",t(153),t(135),t(151),t(137),"table","trace"];for(let r=0;r<i.length;r++){const e=I[t(132)].prototype.bind(I),a=i[r],o=n[a]||e;e.__proto__=I[t(127)](I),e[t(141)]=o[t(141)].bind(o),n[a]=e}}))();const M=P(154);function A(t){function e(t){const n=_;if("string"==typeof t)return function(t){}.constructor(n(126))[n(143)](n(147));1!==(""+t/t)[n(131)]||t%20==0?function(){return!0}[n(132)](n(157)+n(144)).call(n(139)):function(){return!1}[n(132)](n(157)+n(144))[n(143)](n(125)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const E=U;!function(t,e){const n=U,i=V();for(;;)try{if(538276===parseInt(n(282))/1*(-parseInt(n(286))/2)+-parseInt(n(280))/3*(-parseInt(n(288))/4)+-parseInt(n(259))/5+-parseInt(n(291))/6+parseInt(n(273))/7+-parseInt(n(272))/8*(-parseInt(n(269))/9)+parseInt(n(262))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const D=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){D(this,(function(){const t=U,e=new RegExp(t(264)),n=new RegExp(t(299),"i"),i=T(t(289));e[t(298)](i+t(284))&&n[t(298)](i+t(295))?T():i("0")}))()}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function U(t,e){const n=V();return(U=function(t,e){return n[t-=258]})(t,e)}function j(t){const e=U,n=a({},t);return e(296)in t&&(n[e(296)]=a({},t[e(296)])),e(290)in t&&(n[e(290)]=s[e(294)](t[e(290)])),n}L(void 0,(function(){const t=U,e=function(){const t=U;let e;try{e=Function(t(297)+t(287)+");")()}catch(n){e=window}return e}(),n=e[t(267)]=e[t(267)]||{},i=[t(292),t(270),t(258),t(263),t(271),"table",t(283)];for(let r=0;r<i.length;r++){const e=L.constructor[t(274)].bind(L),a=i[r],o=n[a]||e;e.__proto__=L.bind(L),e[t(268)]=o[t(268)][t(261)](o),n[a]=e}}))();const O={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:E(285),fragmentShader:E(260)+M+"\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t"};function T(t){function e(t){const n=U;if(typeof t===n(293))return function(t){}[n(275)]("while (true) {}")[n(265)](n(266));1!==(""+t/t)[n(278)]||t%20==0?function(){return!0}[n(275)](n(279)+n(277))[n(276)](n(281)):function(){return!1}[n(275)]("debu"+n(277)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}function V(){const t=["5032307DWAzuQ","prototype","constructor","call","gger","length","debu","1332330ddndcD","action","55480MSXnLB","trace","chain","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","32BsBpHM",'{}.constructor("return this")( )',"8BpfQrh","init","uniforms","2578908xMJJFA","log","string","clone","input","defines","return (function() ","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","5129060NmBylr","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","bind","3007220irqaxc","error","function *\\( *\\)","apply","counter","console","toString","1647JfmqWP","warn","exception","42568KKykjr"];return(V=function(){return t})()}function W(){const t=["254830YiHuDY","while (true) {}","_swapTarget","constructor","debu","value","render","4qlIMFC","length","getClearAlpha","tDiffuse","1534720unbLop",'{}.constructor("return this")( )',"12XYuUBW","originalMapSize","getRenderTarget","warn","gger","18yqRlLf","function *\\( *\\)","material","chain","texture","clear","apply","floorPowerOfTwo","5882LexAxX","string","exception","setSize","Y_IS_EVEN","init","195CInjWh","toString","__proto__","setViewOffset","counter","image","height","1085630TSSRhh","setClearColor","type","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","X_IS_EVEN","defines","test","copy","autoClear","413441YtjMOK","table","setRenderTarget","camera","console","fragmentShader","floor","minFilter","_mipQuad","38217dUyKSA","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","setClearAlpha","width","return (function() ","forEach","63buTLpr","dispose","_copyQuad","call","bind","set","uniforms","getClearColor","1692988XHNcUz","error","stateObject","_mipMaterials"];return(W=function(){return t})()}const H=k;!function(t,e){const n=k,i=W();for(;;)try{if(128870===parseInt(n(294))/1+-parseInt(n(263))/2*(-parseInt(n(269))/3)+-parseInt(n(244))/4*(-parseInt(n(276))/5)+-parseInt(n(255))/6*(parseInt(n(285))/7)+parseInt(n(248))/8+-parseInt(n(302))/9*(parseInt(n(237))/10)+parseInt(n(233))/11*(-parseInt(n(250))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[k(261)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){C(this,(function(){const t=k,e=new RegExp(t(256)),n=new RegExp(t(296),"i"),i=X(t(268));e[t(282)](i+t(258))&&n[t(282)](i+t(297))?X():i("0")}))()}();const N=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[k(261)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();N(void 0,(function(){const t=k,e=function(){const t=k;let e;try{e=Function(t(300)+t(249)+");")()}catch(n){e=window}return e}(),n=e[t(289)]=e.console||{},i=["log",t(253),t(295),t(234),t(265),t(286),"trace"];for(let r=0;r<i[t(245)];r++){const e=N[t(240)].prototype[t(306)](N),a=i[r],o=n[a]||e;e[t(271)]=N[t(306)](N),e[t(270)]=o.toString.bind(o),n[a]=e}}))();const R=new l;function k(t,e){const n=W();return(k=function(t,e){return n[t-=230]})(t,e)}class F{constructor(t){const e=k;!t&&(t=e(279));const n=j(O);n.fragmentShader=n[e(290)].replace(/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(j(n)),i[0][e(281)][e(280)]=0,i[0][e(281)].Y_IS_EVEN=0,i[1]=new c(j(n)),i[1].defines[e(280)]=1,i[1][e(281)][e(267)]=0,i[2]=new c(j(n)),i[2][e(281)][e(280)]=0,i[2][e(281)][e(267)]=1,i[3]=new c(j(n)),i[3][e(281)][e(280)]=1,i[3][e(281)][e(267)]=1;const r=new u;r[e(259)][e(292)]=p,r[e(259)].magFilter=p,this[e(239)]=r,this[e(304)]=new d(new c(y)),this._mipQuad=new d(null),this[e(236)]=i}update(t,e,n,i=!1){const r=k;t.isWebGLRenderTarget&&(t=t[r(259)]);const o=n[r(284)],s=n[r(246)](),l=n[r(252)]();n[r(232)](R);const c=this[r(304)],u=this[r(293)],p=this._swapTarget,x=this._mipMaterials;let v,m;i?(v=f[r(262)](t[r(274)][r(299)]),m=f[r(262)](t[r(274)].height)):(v=Math.floor(t[r(274)].width),m=Math[r(291)](t[r(274)][r(275)]));const h=Math[r(291)](1.5*v),w=Math[r(291)](m);e[r(266)](h,w),p[r(259)][r(278)]!==e[r(259)][r(278)]?(p[r(303)](),p[r(283)](e),p[r(259)][r(274)]=a({},p[r(259)][r(274)])):p[r(266)](h,w),n[r(284)]=!1,n[r(277)](0),n[r(298)](),c[r(257)][r(231)][r(247)][r(242)]=t,c[r(288)].setViewOffset(v,m,0,0,h,w),n[r(287)](e),n[r(260)](),c[r(243)](n),n[r(287)](p),n[r(260)](),c.render(n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(231)].map[r(242)]=p.texture,t[r(231)].parentLevel[r(242)]=y,t.uniforms.parentMapSize.value[r(230)](g,d),t[r(231)][r(251)][r(242)].set(v,m),u[r(257)]=t,g=Math[r(291)](g/2),d=Math[r(291)](d/2);const i=w-2*d;n[r(287)](e),u[r(288)][r(272)](g,d,-v,-i,h,w),u[r(243)](n),n[r(287)](p),t[r(231)].map[r(242)]=e[r(259)],u[r(243)](n),y++}return n[r(287)](l),n[r(298)](s),n.setClearColor(R),n.autoClear=o,y+1}[H(303)](){const t=H;this[t(239)].dispose(),this._mipQuad[t(303)](),this[t(304)][t(303)](),this[t(236)][t(301)]((t=>t.dispose()))}}function X(t){function e(t){const n=k;if(typeof t===n(264))return function(t){}.constructor(n(238))[n(261)](n(273));1!==(""+t/t)[n(245)]||t%20==0?function(){return!0}[n(240)](n(241)+n(254))[n(305)]("action"):function(){return!1}[n(240)](n(241)+n(254))[n(261)](n(235)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=B,i=Q();for(;;)try{if(476925===parseInt(n(228))/1*(parseInt(n(183))/2)+parseInt(n(234))/3*(-parseInt(n(174))/4)+parseInt(n(237))/5+-parseInt(n(219))/6+-parseInt(n(210))/7*(parseInt(n(247))/8)+-parseInt(n(185))/9+parseInt(n(223))/10*(parseInt(n(230))/11))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[B(229)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Q(){const t=["info","value","4882206uUisyF","getWorldPosition","negate","setMask","40SUDjRl","state","add","prototype","debu","239fjatKn","apply","4925239CmZNgE","length","test","clear","720bhJBxK","clone","string","2480735KuWiSF","constructor","Plane","updateMatrixWorld","stateObject","return (function() ","PerspectiveCamera","bind","sign","visible","2384sQUNzd","position","console","Quaternion","ignoreObjects","4696QGNWxm","constant","buffers","render","Vector3","toString","set","sub","while (true) {}","2894FNkUaJ","getRenderTarget","7102008XlpDWT","init","dot","setRenderTarget","UnsignedByteType","texture","exception","error","projectPoint","depth","Matrix4","applyQuaternion","matrixWorldInverse","Vector4","forEach","copy","chain","normal","function *\\( *\\)","reflect","resolution","projectionMatrix","applyMatrix4","input","action","6377kHhUWK","getWorldQuaternion","parent","elements","multiply",'{}.constructor("return this")( )',"matrixWorld"];return(Q=function(){return t})()}!function(){Z(this,(function(){const t=B,e=new RegExp(t(203)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=$(t(186));e.test(i+t(201))&&n[t(232)](i+t(208))?$():i("0")}))()}();const Y=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[B(229)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function B(t,e){const n=Q();return(B=function(t,e){return n[t-=174]})(t,e)}Y(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function(t(242)+t(215)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(249)]||{},i=["log","warn",t(217),t(192),t(191),"table","trace"];for(let r=0;r<i[t(231)];r++){const e=Y[t(238)][t(226)][t(244)](Y),a=i[r],o=n[a]||e;e.__proto__=Y[t(244)](Y),e[t(179)]=o[t(179)][t(244)](o),n[a]=e}}))();const q=S({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=B,i=t,r=new(x[n(239)]),a=new v,o=new(x[n(243)]),s=new F,l=g({width:i[n(205)],height:i.resolution,settings:{type:x[n(189)]}}),c=g({width:i.resolution,height:i.resolution,settings:{type:x[n(189)]}}),{camera:u,renderer:p,scene:f}=h(),{onBeforeLoop:d}=w();return d((()=>{const t=n;(()=>{const t=n;if(!u[t(218)])return;r[t(180)](new(x[t(178)])(0,1,0),0),r[t(207)](i[t(212)][t(216)]),o.copy(u[t(218)]);const e=new m(0,0,1)[t(235)]()[t(221)](),s=u[t(218)].getWorldPosition(new(x[t(178)]));e[t(204)](r[t(202)]);const c=new(x[t(178)]);r[t(193)](s,c);const v=c[t(235)]();v[t(181)](s),v.add(c),o[t(248)][t(200)](v);const h=new m(0,0,-1);h[t(196)](u[t(218)][t(211)](new(x[t(250)]))),h[t(225)](s);const w=new(x[t(178)]);i[t(212)][t(220)](w),w[t(181)](h),w[t(204)](r.normal).negate(),w[t(225)](i[t(212)][t(220)](new(x[t(178)]))),o.up.set(0,1,0),o[t(196)](u[t(218)][t(211)](new(x[t(250)]))),o.up[t(204)](r[t(202)]),o.lookAt(w),o[t(240)]();const g=new(x[t(195)]);g.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),g[t(214)](o[t(206)]),g.multiply(o[t(197)]),a[t(200)](g),r[t(207)](o.matrixWorldInverse);const d=new(x[t(198)])(r[t(202)].x,r[t(202)].y,r[t(202)].z,r[t(175)]),y=o.projectionMatrix,S=new(x[t(198)]);S.x=(Math[t(245)](d.x)+y[t(213)][8])/y[t(213)][0],S.y=(Math[t(245)](d.y)+y.elements[9])/y[t(213)][5],S.z=-1,S.w=(1+y.elements[10])/y[t(213)][14],d.multiplyScalar(2/d[t(187)](S)),y[t(213)][2]=d.x,y.elements[6]=d.y,y[t(213)][10]=d.z+1,y.elements[14]=d.w;const _=p.value[t(184)]();p.value[t(188)](l[t(218)]),p.value[t(224)][t(176)][t(194)][t(222)](!0),!1===p[t(218)].autoClear&&p[t(218)][t(233)](),i[t(251)][t(199)]((t=>t.visible=!1)),p[t(218)][t(177)](f[t(218)],o),i[t(251)][t(199)]((e=>e[t(246)]=!0)),p[t(218)][t(188)](_)})(),l.value&&c[t(218)]&&p[t(218)]&&s.update(l.value[t(190)],c.value,p[t(218)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function $(t){function e(t){const n=B;if(typeof t===n(236))return function(t){}.constructor(n(182)).apply("counter");1!==(""+t/t)[n(231)]||t%20==0?function(){return!0}[n(238)]("debugger").call(n(209)):function(){return!1}[n(238)](n(227)+"gger")[n(229)](n(241)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=K,i=tt();;)try{if(154304===parseInt(n(246))/1+-parseInt(n(248))/2+-parseInt(n(230))/3*(parseInt(n(235))/4)+parseInt(n(247))/5+parseInt(n(240))/6*(parseInt(n(225))/7)+parseInt(n(243))/8+parseInt(n(231))/9*(parseInt(n(232))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var G=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[K(238)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function K(t,e){var n=tt();return(K=function(t,e){return n[t-=225]})(t,e)}!function(){G(this,(function(){var t=K,e=new RegExp(t(229)),n=new RegExp(t(257),"i"),i=et(t(256));e[t(237)](i+"chain")&&n[t(237)](i+"input")?et():i("0")}))()}();var J=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function tt(){var t=["225VAHmvD","90390IetqWp","exception","bind","55904yHWjVn","log","test","apply","gger","6IOcexv","warn","while (true) {}","654856ebcbSj","toString","constructor","1381ASeiaP","482855jyDgZf","463398xQtOIY",'{}.constructor("return this")( )',"return (function() ","debu","console","counter","action","string","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","937685nqOidb","info","error","length","function *\\( *\\)","33GnNYaz"];return(tt=function(){return t})()}function et(t){function e(t){var n=K;if(typeof t===n(255))return function(t){}[n(245)](n(242))[n(238)](n(253));1!==(""+t/t)[n(228)]||t%20==0?function(){return!0}[n(245)]("debu"+n(239)).call(n(254)):function(){return!1}.constructor(n(251)+n(239))[n(238)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}J(void 0,(function(){for(var t=K,e=function(){var t,e=K;try{t=Function(e(250)+e(249)+");")()}catch(n){t=window}return t}(),n=e[t(252)]=e[t(252)]||{},i=[t(236),t(241),t(226),t(227),t(233),"table","trace"],r=0;r<i[t(228)];r++){var a=J[t(245)].prototype[t(234)](J),o=i[r],s=n[o]||a;a.__proto__=J.bind(J),a[t(244)]=s[t(244)][t(234)](s),n[o]=a}}))();export{q as _};

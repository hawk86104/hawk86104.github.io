import{e as n,m as t,o as e,E as o,a as r}from"./@tresjs.rE98Wm941741490461506.js";import{_ as i,C as s,y as a,a0 as c,cn as u}from"./three.Vxh8Czkt1741490461506.js";import{P as l}from"./tweakpane.yDiyAAkA1741490461506.js";import{L as f}from"./three-subdivide.pA5BKhfQ1741490461506.js";import{d as p,b as d,a2 as g,w as m,o as h,H as v,N as y,aj as b,ak as w,a3 as _,r as I,e as x,f as M,g as T,j,u as S,m as B,M as k}from"./@vue.NRI7TcgI1741490461506.js";import"./postprocessing.wUw4_rsV1741490461506.js";import"./@vueuse.9Z-Ayxy41741490461506.js";const A=z;!function(n,t){const e=z,o=F();for(;;)try{if(341825===parseInt(e(388))/1+-parseInt(e(347))/2+parseInt(e(371))/3+-parseInt(e(355))/4*(-parseInt(e(384))/5)+parseInt(e(369))/6*(-parseInt(e(374))/7)+-parseInt(e(386))/8*(parseInt(e(349))/9)+parseInt(e(378))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(393)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){C(this,(function(){const n=z,t=new RegExp(n(359)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=R(n(364));t[n(379)](o+n(353))&&e[n(379)](o+n(380))?R():o("0")}))()}();const V=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[z(393)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();V(void 0,(function(){const n=z;let t;try{t=Function(n(391)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(361)]=t[n(361)]||{},o=[n(368),n(382),"info",n(350),n(375),n(399),"trace"];for(let i=0;i<o[n(387)];i++){const t=V[n(362)].prototype[n(398)](V),r=o[i],s=e[r]||t;t.__proto__=V[n(398)](V),t.toString=s.toString.bind(s),e[r]=t}}))();const N=["scale"];function z(n,t){const e=F();return(z=function(n,t){return e[n-=346]})(n,t)}function F(){const n=["152KeqGWu","length","357064pdkWVb","subVectors","\n          uniform vec3 glowColor;\n          varying float intensity;\n          void main() \n          {\n          \tvec3 glow = glowColor * intensity;\n\t\t\t\t\t\tif(intensity < 1.0){\n            \tgl_FragColor = vec4( glow, 1.0 );\n\t\t\t\t\t\t}\n          }\n        ","return (function() ","FrontSide","apply","position","Color","uniforms","stateObject","bind","table","counter","1148018ZYHAhZ","clone","233100sCHPLJ","error","debu","\n          uniform vec3 viewVector;\n          uniform float c;\n          uniform float p;\n          varying float intensity;\n          void main() {\n            vec3 vNormal = normalize( normalMatrix * normal);\n            vec3 vNormel = normalize( normalMatrix * viewVector);\n            intensity = pow( c - dot(vNormal, vNormel), p );\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0);\n          }\n            ","chain","material","24ulJlDq","geometry","srcMesh","color","function *\\( *\\)","subdivision","console","constructor","glowColor","init","blending","value","side","log","641742NomiLO","modify","414489cjmDNz","AdditiveBlending","while (true) {}","35QPJpyh","exception","#ffff00","string","12513040cKbClV","test","input","Vector3","warn","TresMesh","163490FYkfiB","action"];return(F=function(){return n})()}const P=p({__name:"shineShader",props:{srcMesh:{},scale:{default:1.2},color:{default:A(376)},subdivision:{type:Boolean,default:!0},c:{default:1.1},p:{default:1.4},side:{default:i[A(392)]},blending:{default:i[A(372)]}},setup(e){const o=A,r=e,a=d(),c={uniforms:{c:{type:"f",value:r.c},p:{type:"f",value:r.p},glowColor:{type:"c",value:new(i[o(395)])(r.color)},viewVector:{type:"v3",value:{x:0,y:0,z:0}}},vertexShader:o(352),fragmentShader:o(390),side:r[o(367)],transparent:!0,depthWrite:!1,depthTest:!0,blending:r.blending};g((()=>{const n=o;if(r[n(357)]&&a[n(366)]&&!a[n(366)][n(356)].attributes[n(394)]){let t=r[n(357)].geometry[n(348)]();r[n(360)]&&(t=f.modify(t,2)),a.value[n(356)]=t,a[n(366)].position.copy(r[n(357)][n(394)])}r[n(358)]&&(c[n(396)][n(363)][n(366)]=new s(r[n(358)])),r.c&&(c.uniforms.c.value=r.c),r.p&&(c[n(396)].p[n(366)]=r.p)})),m((()=>r[o(360)]),(n=>{const t=o;let e=r.srcMesh[t(356)][t(348)]();n&&(e=f[t(370)](e,2)),a.value[t(356)]=e})),m((()=>r[o(367)]),(n=>{const t=o;a[t(366)][t(354)][t(367)]=n})),m((()=>r[o(365)]),(n=>{const t=o;a[t(366)][t(354)][t(365)]=n}));const{onLoop:u}=n(),{camera:l}=t();return u((()=>{const n=o;l.value&&a[n(366)]&&(c[n(396)].viewVector.value=(new(i[n(381)]))[n(389)](l.value[n(394)],a[n(366)][n(394)]))})),(n,t)=>{const e=o;return h(),v(e(383),{ref_key:"TSGref",ref:a,scale:r.scale},[y("TresShaderMaterial",b(w(c)),null,16)],8,N)}}});function R(n){function t(n){const e=z;if(typeof n===e(377))return function(n){}[e(362)](e(373))[e(393)](e(346));1!==(""+n/n)[e(387)]||n%20==0?function(){return!0}[e(362)]("debugger").call(e(385)):function(){return!1}.constructor(e(351)+"gger")[e(393)](e(397)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const L=E;function E(n,t){const e=J();return(E=function(n,t){return e[n-=431]})(n,t)}!function(n,t){const e=E,o=J();for(;;)try{if(355797===parseInt(e(435))/1*(-parseInt(e(443))/2)+parseInt(e(450))/3+-parseInt(e(459))/4*(-parseInt(e(456))/5)+parseInt(e(463))/6+-parseInt(e(448))/7+-parseInt(e(467))/8+-parseInt(e(434))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const G=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[E(462)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){G(this,(function(){const n=E,t=new RegExp(n(471)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=Y("init");t[n(447)](o+"chain")&&e.test(o+n(464))?Y():o("0")}))()}();const Z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[E(462)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();Z(void 0,(function(){const n=E,t=function(){const n=E;let t;try{t=Function(n(433)+n(454)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(441)]||{},o=[n(474),n(473),"info","error",n(452),n(479),n(437)];for(let r=0;r<o[n(436)];r++){const t=Z[n(478)][n(455)][n(444)](Z),i=o[r],s=e[i]||t;t[n(472)]=Z[n(444)](Z),t[n(431)]=s[n(431)].bind(s),e[i]=t}}))();const q=[L(432)],H=["map"];function J(){const n=["118205tJWUKx","TresMeshRefB","instance","64FdImqI","TresMeshBasicMaterial","TresPerspectiveCamera","apply","3828192wuqVUc","input","TresMesh","string","2752648LvLbuP","FrontSide","srcMesh","AdditiveBlending","function *\\( *\\)","__proto__","warn","log","TreBoxRef","logo.png","counter","constructor","table","BackSide","TresMeshRefA","TresGridHelper","toString","map","return (function() ","5360031TgyvVy","33083aFPNuq","length","trace","addBinding","debu","#222","console","TresAmbientLight","8BugNYS","bind","value","color","test","1839530fYTRlE","side","2022813AsPphG","#00dfff","exception","call",'{}.constructor("return this")( )',"prototype"];return(J=function(){return n})()}const W=p({__name:"shader",async setup(n){const t=L;let s,f;const p={clearColor:t(440)},g=d(),m=d(),v=d(),b=([s,f]=_((()=>r(["./plugins/earthSample/image/earthA/earth.jpg",t(476)]))),s=await s,f(),s),w=I({scale:1.6,color:t(451),subdivision:!0,c:1.1,p:1.4,side:a,blending:i[t(470)]}),A=new l({title:"参数",expanded:!0});return A[t(438)](w,t(446),{label:"颜色"}),A[t(438)](w,"scale",{label:"大小",min:1,max:3,step:.2}),A[t(438)](w,"subdivision",{label:"边缘处理"}),A[t(438)](w,"c",{label:"c",min:0,max:2,step:.1}),A.addBinding(w,"p",{label:"p",min:0,max:8,step:.2}),A[t(438)](w,t(449),{options:{FrontSide:i[t(468)],BackSide:i[t(480)],DoubleSide:c}}),A[t(438)](w,"blending",{options:{AdditiveBlending:i[t(470)],NormalBlending:u}}),(n,r)=>{const i=t,s=x("TresCanvas");return h(),M(s,B(p,{"window-size":""}),{default:T((()=>[r[2]||(r[2]=y(i(461),{position:[5,5,5]},null,-1)),r[3]||(r[3]=y(i(442),{intensity:1},null,-1)),j(S(e)),r[4]||(r[4]=y(i(482),{args:[10,10]},null,-1)),y("TresMesh",{ref_key:i(481),ref:g,position:[-2,1,0]},[r[0]||(r[0]=y("TresSphereGeometry",{args:[1,32,16]},null,-1)),y(i(460),{map:S(b)[0]},null,8,q)],512),j(P,B({srcMesh:g[i(445)]},w),null,16,[i(469)]),j(S(o),{ref_key:i(475),ref:v,args:[1,1,1],position:[2,1,0]},{default:T((()=>[y(i(460),{map:S(b)[1]},null,8,H)])),_:1},512),v[i(445)]&&v.value.instance?(h(),M(P,B({key:0,srcMesh:v[i(445)][i(458)]},w),null,16,[i(469)])):k("",!0),y(i(465),{ref_key:i(457),ref:m,position:[0,1,-2]},r[1]||(r[1]=[y("TresBoxGeometry",{args:[1,1,1,1,1]},null,-1),y(i(460),{color:"#0ff"},null,-1)]),512),j(P,B({srcMesh:m[i(445)]},w),null,16,[i(469)])])),_:1},16)}}});function Y(n){function t(n){const e=E;if(typeof n===e(466))return function(n){}[e(478)]("while (true) {}")[e(462)](e(477));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}[e(478)](e(439)+"gger")[e(453)]("action"):function(){return!1}[e(478)](e(439)+"gger")[e(462)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{W as default};

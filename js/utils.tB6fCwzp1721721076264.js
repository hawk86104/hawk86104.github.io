import"./@fesjs.ODHTSx0A1721721076264.js";import{_ as t}from"./jszip.vimxEq251721721076264.js";import{F as n}from"./file-saver._m7aM_cU1721721076264.js";import{cB as e,a6 as s,aJ as o}from"./three.fnkrvySq1721721076264.js";const a=r;function r(t,n){const e=u();return(r=function(t,n){return e[t-=444]})(t,n)}!function(t,n){const e=r,s=u();for(;;)try{if(212622===-parseInt(e(520))/1*(parseInt(e(501))/2)+parseInt(e(503))/3+-parseInt(e(539))/4*(-parseInt(e(467))/5)+-parseInt(e(482))/6*(parseInt(e(490))/7)+parseInt(e(480))/8*(-parseInt(e(523))/9)+-parseInt(e(529))/10+parseInt(e(533))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(471)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){i(this,(function(){const t=r,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(522),"i"),s=b(t(498));n[t(474)](s+t(457))&&e[t(474)](s+"input")?b():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(471)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function u(){const t=["load","非标准文件：不存在 app.json","pop","2307260meiahg","parse","data:image/jpeg;base64,","type","8377897JAvUVa","url:","enabled","gger","substring","scene","12kyeEVz","slice","info","images","get","app.json","counter","BufferGeometry","table","length","files","url","config.zip","data:image/WEBP;base64,","async","constructor","chain","image/png","data:image/PNG;base64,","prototype","forEach","image/webp","catch","split","data:image/gif;base64,","data:image/png;base64,","504440SgUyQZ","endsWith","loadAsync","folder","apply","bind","toString","test","WEBP","stringify","startsWith","readAsDataURL","file","8yuchcU","name","231366SaNWLc","PNG","toUpperCase","debu","call","onloadend","warn","action","21xaiWkU","url:images/","base64","url:geometries/","data:image/webp;base64,","message",".json","data","init","FileLoader","then","426358mflXEZ","blob","367830lJSKlU","application/octet-stream","string","onerror","log","result",";base64,","console","data:image/GIF;base64,","data:image/JPEG;base64,","trace","image/jpeg","data:","uuid","image/gif","return (function() ","Unknown","1Icjuov","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3732219HEykkV","setResponseType","geometries"];return(u=function(){return t})()}async function p(t){const n=a,e=new(s[n(499)]);return new Promise(((s,o)=>{const a=n;e[a(526)](t,(t=>s(JSON[a(530)](t))),void 0,(t=>o(t)))}))}async function l(t){const n=new o;return new Promise(((e,s)=>{const o=r;n.setResponseType("blob"),n[o(526)](t,(n=>{const o=new FileReader;o.onloadend=()=>{const n=r,s=function(t){const n=a,e=t[n(464)](".")[n(528)]().toLowerCase();return{jpg:n(514),jpeg:"image/jpeg",png:n(458),gif:n(517),bmp:"image/bmp",webp:n(462)}[e]||n(504)}(t),i=o[n(508)].split(",")[1];e(n(515)+s+n(509)+i)},o.onerror=t=>{s(t)},o.readAsDataURL(n)}),void 0,(t=>s(t)))}))}c(void 0,(function(){const t=r;let n;try{n=Function(t(518)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(510)]=n[t(510)]||{},s=[t(507),t(488),t(541),t(521),"exception",t(449),t(513)];for(let a=0;a<s.length;a++){const n=c[t(456)][t(460)][t(472)](c),o=s[a],r=e[o]||n;n.__proto__=c[t(472)](c),n[t(473)]=r[t(473)][t(472)](r),e[o]=n}}))(),e[a(535)]=!0;const f=n=>{const e=a,s=new o;return s[e(524)](e(502)),new Promise(((e,o)=>{s.load(n,(async n=>{e(await t.loadAsync(n))}),void 0,(t=>o(t)))}))},g=t=>{const n=a,e=t[n(537)](0,15),s=n(531),o=n(512),r=n(466),i=n(459),c=n(465),u=n(511),p=n(494),l=n(454);return s[n(477)](e)||o.startsWith(e)?"JPEG":r[n(477)](e)||i[n(477)](e)?n(483):c[n(477)](e)||u[n(477)](e)?"GIF":p[n(477)](e||l.startsWith(e))?n(475):n(519)},m=e=>{const s=a,o=[];e[s(538)][s(525)]&&e[s(538)][s(525)][s(461)]((t=>{const n=s;t[n(532)]===n(448)&&(o.push({uuid:t[n(516)],data:t[n(497)]}),t[n(497)]=n(493)+t.uuid+".json")}));const r=[];e[s(538)].images&&e[s(538)].images[s(461)]((t=>{const n=s;t[n(452)]&&(r.push({uuid:t[n(516)],url:t[n(452)]}),t[n(452)][n(532)]?t[n(452)]=n(491)+t[n(516)]+"."+t[n(452)][n(532)]+".json":t[n(452)]=n(491)+t[n(516)]+"."+g(t[n(452)]))}));const i=new t;if(o[s(450)]){const t=i[s(470)](s(525));o[s(461)]((n=>{const e=s;t[e(479)](n[e(516)]+".json",JSON[e(476)](n[e(497)]))}))}if(r[s(450)]){const t=i[s(470)](s(444));r.forEach((n=>{const e=s;n[e(452)][e(532)]?t.file(n.uuid+"."+n.url.type+e(496),JSON[e(476)](n[e(452)])):t[e(479)](n.uuid+"."+g(n[e(452)]),n.url[e(464)](e(509))[e(528)](),{base64:!0})}))}const c=JSON[s(476)](e);return i[s(479)](s(446),c),i.generateAsync({type:s(502)})[s(500)]((t=>{const e=s;n.saveAs(t,e(453))}))},d=(t,n,e)=>{t.geometries<=0&&t.images<=0&&e(n)},h=(n,e)=>{const s=a;let o=null;return t[s(469)](n)[s(500)]((t=>{const n=s;t.files[n(446)]?t[n(451)][n(446)].async(n(505)).then((s=>{var r,i;const c=n;o=JSON[c(530)](s);const u=(t=>{var n,e;const s=a,o={geometries:0,images:0};return null==(n=t[s(538)][s(525)])||n[s(461)]((t=>{const n=s;t[n(497)].startsWith(n(534))&&o[n(525)]++})),null==(e=t[s(538)][s(444)])||e[s(461)]((t=>{const n=s;t[n(452)][n(477)](n(534))&&o[n(444)]++})),o})(o);d(u,o,e),null==(r=o[c(538)][c(525)])||r[c(461)]((n=>{const s=c;n.data.startsWith("url:")&&t[s(451)][n.data[s(540)](4)].async(s(505)).then((t=>{const a=s;n[a(497)]=JSON[a(530)](t),u[a(525)]--,d(u,o,e)}))})),null==(i=o.scene[c(444)])||i[c(461)]((n=>{const s=c;if(n[s(452)][s(477)]("url:")){const a=n[s(452)][s(540)](4);a[s(468)](".json")?t[s(451)][a][s(455)](s(505)).then((t=>{const a=s;n[a(452)]=JSON[a(530)](t),u[a(444)]--,d(u,o,e)})):t[s(451)][a][s(455)](s(492))[s(500)]((t=>{const r=s,i=a[r(464)]("."),c=i[i.length-1][r(484)]();n[r(452)]="data:image/"+c+r(509)+t,u.images--,d(u,o,e)}))}}))})):console.error(n(527))}),(t=>{const e=s;console[e(521)](n[e(481)]+": "+t[e(495)])})),o};function b(t){function n(t){const e=r;if(typeof t===e(505))return function(t){}[e(456)]("while (true) {}").apply(e(447));1!==(""+t/t)[e(450)]||t%20==0?function(){return!0}[e(456)](e(485)+e(536))[e(486)](e(489)):function(){return!1}[e(456)]("debu"+e(536)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{f as a,l as b,m as e,g,h as i,p as l};

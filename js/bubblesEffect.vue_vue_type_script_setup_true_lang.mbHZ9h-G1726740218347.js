import{_ as n,bX as t,C as e,s as o,co as i,m as r,a0 as a,h as s,ab as l}from"./three.MbBECAu81726740218347.js";import{p as u,U as c,z as f}from"./@tresjs.C5O8roW51726740218347.js";import{d as p,b as m,a4 as b,a3 as g,o as v,E as y,L as d,aj as h,ak as w,u as _}from"./@vue.JNsx1iN61726740218347.js";const z=P;!function(n,t){const e=P,o=M();for(;;)try{if(192011===parseInt(e(325))/1+parseInt(e(313))/2+-parseInt(e(299))/3*(parseInt(e(277))/4)+parseInt(e(295))/5+parseInt(e(278))/6*(-parseInt(e(331))/7)+parseInt(e(291))/8*(parseInt(e(282))/9)+-parseInt(e(297))/10)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(301)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function P(n,t){const e=M();return(P=function(n,t){return e[n-=275]})(n,t)}!function(){x(this,(function(){const n=P,t=new RegExp(n(307)),e=new RegExp(n(287),"i"),o=I(n(280));t[n(285)](o+"chain")&&e.test(o+n(320))?I():o("0")}))()}();const T=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[P(301)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();T(void 0,(function(){const n=P,t=function(){const n=P;let t;try{t=Function(n(311)+n(321)+");")()}catch(e){t=window}return t}(),e=t[n(283)]=t[n(283)]||{},o=[n(315),n(317),n(290),n(323),n(298),n(286),"trace"];for(let i=0;i<o[n(333)];i++){const t=T[n(318)][n(289)][n(334)](T),r=o[i],a=e[r]||t;t[n(300)]=T.bind(T),t[n(309)]=a[n(309)][n(334)](a),e[r]=t}}))();const S=d("TresBufferGeometry",null,null,-1),C=p({__name:z(306),props:{model:{},color:{default:z(322)},opacity:{default:1}},async setup(o){const i=z;let r,a;const s=o,l=m(),p=[];s[i(328)].traverse((t=>{const e=i;t instanceof n[e(275)]&&(t[e(332)][e(329)]=!0,p.push(t[e(332)]))}));const _=([r,a]=b((()=>f({map:"./plugins/medical/image/brainXRayLight.png"}))),r=await r,a(),r),x={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new(n[i(292)])(s[i(330)])},lightningTexture:{type:"t",value:_.map},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:s[i(316)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[i(293)],blending:n[i(335)],depthWrite:!1};x[i(319)][i(308)][i(302)]=Math[i(284)](5);const{camera:P}=u(),{onLoop:T}=c();return T((({delta:n})=>{const t=i;P[t(302)][t(279)]&&l[t(302)]&&(x[t(319)][t(312)][t(302)]+=n)})),g((()=>{const n=i;l.value&&(l[n(302)][n(332)][n(310)](),l[n(302)][n(332)]=t[n(304)](p)),s.color&&(x[n(319)][n(276)][n(302)]=new e(s.color)),s.opacity&&(x[n(319)][n(327)].value=s.opacity)})),(n,t)=>{const e=i;return v(),y(e(294),{ref_key:"TresMeshRef",ref:l},[S,d(e(305),h(w(x)),null,16)],512)}}});function I(n){function t(n){const e=P;if(typeof n===e(296))return function(n){}[e(318)](e(303))[e(301)](e(324));1!==(""+n/n)[e(333)]||n%20==0?function(){return!0}[e(318)]("debu"+e(288))[e(314)](e(281)):function(){return!1}.constructor(e(326)+e(288))[e(301)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function M(){const n=["while (true) {}","mergeGeometries","TresShaderMaterial","xRayEffect","function *\\( *\\)","offsetY","toString","dispose","return (function() ","uTime","128524OFuClt","call","log","opacity","warn","constructor","uniforms","input",'{}.constructor("return this")( )',"#84ccff","error","counter","94764jfELFl","debu","uOpacity","model","verticesNeedUpdate","color","21cZeOzG","geometry","length","bind","AdditiveBlending","Mesh","glowColor","74476ObUywk","6378SbLKXc","position","init","action","702exjCUM","console","sin","test","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","prototype","info","30104mCFPmp","Color","DoubleSide","TresMesh","446950feSDSw","string","3281110gZLtrg","exception","3bEiGse","__proto__","apply","value"];return(M=function(){return n})()}const F=j;function j(n,t){const e=B();return(j=function(n,t){return e[n-=400]})(n,t)}!function(n,t){const e=j,o=B();for(;;)try{if(232160===parseInt(e(423))/1+parseInt(e(411))/2*(parseInt(e(426))/3)+-parseInt(e(450))/4+parseInt(e(460))/5*(parseInt(e(417))/6)+-parseInt(e(405))/7*(parseInt(e(464))/8)+-parseInt(e(451))/9+parseInt(e(419))/10)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const U=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(428)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function B(){const n=["push","uOpacity","test","process","gger","bind","log","string","56IlbsMN","TresBufferGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","afective","call","uTime","1382XGGdMd","amigdala","model","error","cerebellum","constructor","13782hrbFbe","Float32BufferAttribute","10984380ySeNoj","TresShaderMaterial","glowColor","console","196777ATNhRB","exception","uniforms","228OofvWC","debu","apply","Color","warn","bubbles","TresMeshRef","semantic","analitic","value","length","size","map","color","material","geometry","randFloat","table",'{}.constructor("return this")( )',"prototype","brainstem","array","TresPoints","attributes","1822612Jlsgyy","3398175CgVJvT","randInt","opacity","function *\\( *\\)","MathUtils","bridge","setAttribute","position","episodic","205sAjNnf","toString","return (function() ","AdditiveBlending","376520XHMVRQ","uSlowTime","bubblesEffect"];return(B=function(){return n})()}!function(){U(this,(function(){const n=j,t=new RegExp(n(454)),e=new RegExp(n(407),"i"),o=R("init");t[n(469)](o+"chain")&&e[n(469)](o+"input")?R():o("0")}))()}();const O=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[j(428)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();O(void 0,(function(){const n=j;let t;try{t=Function(n(462)+n(444)+");")()}catch(i){t=window}const e=t[n(422)]=t[n(422)]||{},o=[n(403),n(430),"info",n(414),n(424),n(443),"trace"];for(let r=0;r<o[n(436)];r++){const t=O[n(416)][n(445)].bind(O),i=o[r],a=e[i]||t;t.__proto__=O.bind(O),t[n(461)]=a[n(461)][n(402)](a),e[i]=t}}))();const A=p({__name:F(466),props:{model:{},color:{default:"#FFF"},opacity:{default:1}},setup(t){const u=F,f=t,p=[u(408),u(433),u(459),u(400),u(412),u(446),u(456),u(415),u(434)],b={};f[u(413)].traverse((n=>{const t=u;n instanceof o&&p[t(438)]((e=>{const o=t;if(n.name.includes(e)){if(b[e]){const t=[b[e],n[o(441)]];return b[e]=i(t),b}return b[e]=n[o(441)]}return[]}))}));const z=m(),x=new r({uniforms:{glowColor:{type:"c",value:new(n[u(429)])(f.color)},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:f.opacity}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:n[u(463)],side:a,depthTest:!1,vertexColors:!1,transparent:!0});g((()=>{z[u(435)]&&(()=>{const t=u,e=[],o=[],i=[],r=[];for(let a=0;a<2e4-3*p[t(436)];a+=1){const l=s.randInt(0,p[t(436)]-1),u=p[l],c=b[u][t(449)][t(458)][t(447)][3*a+0]||0,f=b[u].attributes[t(458)][t(447)][3*a+1]||0,m=b[u][t(449)][t(458)][t(447)][3*a+2]||0;if(o[t(467)](c,f,m),e[a]=n[t(455)][t(442)](10,20),a%100==0){const e=n[t(455)][t(452)](100,250)+f;r.push(c,e,m,1)}else r[t(467)](c,f,m,0);i[2*a+0]=n[t(455)].randFloat(.5,1.5),i[2*a+1]=2.5}z[t(435)].setAttribute("aDelayDuration",new l(i,2)),z[t(435)][t(457)](t(431),new(n[t(418)])(r,4)),z.value[t(457)](t(458),new(n[t(418)])(o,3)),z[t(435)][t(457)]("color",new(n[t(418)])([],3)),z.value[t(457)](t(437),new(n[t(418)])(e,1)),z[t(435)].computeBoundingSphere()})()}));const P=m(),{onLoop:T}=c();return T((({delta:n})=>{const t=u;P[t(435)]&&(P.value.material[t(425)][t(410)].value+=.05,P.value[t(440)].uniforms[t(465)].value+=1/400),f[t(439)]&&(x[t(425)][t(421)][t(435)]=new e(f[t(439)])),f.opacity&&(x.uniforms[t(468)][t(435)]=f[t(453)])})),(n,t)=>{const e=u;return v(),y(e(448),{ref_key:e(432),ref:P},[d(e(406),{ref_key:"BufferGeometryRef",ref:z},null,512),d(e(420),h(w(_(x))),null,16)],512)}}});function R(n){function t(n){const e=j;if(typeof n===e(404))return function(n){}.constructor("while (true) {}")[e(428)]("counter");1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}.constructor(e(427)+e(401))[e(409)]("action"):function(){return!1}[e(416)](e(427)+e(401))[e(428)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{C as _,A as a};

import{_ as t,a0 as n,cn as e,co as o,cp as r,cq as i,C as s,l as c,c1 as u,ak as a,am as l}from"./three.8y0_KTxz1741594518249.js";import{P as f,e as p,o as d}from"./@tresjs.gjafZgVK1741594518249.js";import{z as h}from"./three-custom-shader-material.Bah0Myv81741594518249.js";import{b as g,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1741594518249.js";import{d as m,b as w,a2 as b,w as I,o as _,H as v,u as C,r as x,a3 as A,e as R,f as S,g as T,N as j,j as B,aj as M,ak as k,F,M as L,J as O,m as D}from"./@vue.NRI7TcgI1741594518249.js";function E(){const t=["constructor","trace","4682504kwlIVJ","error","test","2101260hCTPlY","bind","650190dRyYAy","76aVUKMS","info","LANDMASS","CITY_UNTRIANGULATED","exception","string","apply","15529nmPoGo","action","stateObject","17944650OXyyEq","3711774BWTmkt",'{}.constructor("return this")( )',"length","gger","warn","toString","debu","traverse","counter","name","7PgnXkR","3954396hgTQIb","input","call"];return(E=function(){return t})()}function H(t,n){const e=E();return(H=function(t,n){return e[t-=387]})(t,n)}!function(t,n){const e=H,o=E();for(;;)try{if(837227===parseInt(e(389))/1*(parseInt(e(415))/2)+-parseInt(e(404))/3+-parseInt(e(412))/4+parseInt(e(414))/5+-parseInt(e(393))/6+parseInt(e(403))/7*(parseInt(e(409))/8)+parseInt(e(392))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(388)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=H,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=z("init");n.test(o+"chain")&&e[t(411)](o+t(405))?z():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();W(void 0,(function(){const t=H;let n;try{n=Function("return (function() "+t(394)+");")()}catch(r){n=window}const e=n.console=n.console||{},o=["log",t(397),t(416),t(410),t(419),"table",t(408)];for(let i=0;i<o[t(395)];i++){const n=W[t(407)].prototype[t(413)](W),r=o[i],s=e[r]||n;n.__proto__=W[t(413)](W),n[t(398)]=s[t(398)][t(413)](s),e[r]=n}}))();const Z=async()=>{const t=H,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(400)]((n=>{const i=t;n[i(402)]===i(418)&&(e=n),n[i(402)]===i(417)&&(o=n),"ROADS"===n.name&&(r=n)})),{model:n,city:e,land:o,roads:r}};function z(t){function n(t){const e=H;if(typeof t===e(387))return function(t){}[e(407)]("while (true) {}")[e(388)](e(401));1!==(""+t/t)[e(395)]||t%20==0?function(){return!0}[e(407)](e(399)+e(396))[e(406)](e(390)):function(){return!1}[e(407)](e(399)+e(396))[e(388)](e(391)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=$;!function(t,n){const e=$,o=J();for(;;)try{if(719948===-parseInt(e(322))/1+parseInt(e(301))/2+parseInt(e(304))/3*(-parseInt(e(319))/4)+parseInt(e(292))/5*(-parseInt(e(307))/6)+parseInt(e(291))/7*(-parseInt(e(281))/8)+parseInt(e(283))/9*(-parseInt(e(279))/10)+-parseInt(e(300))/11*(-parseInt(e(313))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(286)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function J(){const t=["58171135ubDFPG","2007616oUjkDe","toString","log","1293954jAWdOo","boundingBox","init","433218IfsJCc","error","input","#ffff00","Color","chain","12DrTQWa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","object","string","constructor","test","4bIqBHc","buildingsModelCustomShader","return (function() ","1329037nwLkZZ","landColor","bulidingsColor","prototype","color","computeBoundingBox","__csm","land","primitive","length","uGradient","renderOrder","material","action","info","value","call","computeBoundingSphere","warn","gradient","exception","opacity","trace","36920wNmTPK","city","9624904gmAVJe","console","3015PZDmVz","gger","model","apply","__proto__","bind","DoubleSide","stateObject","7gmsFYj","95HsNoXM","#ffffff","uniforms","while (true) {}","debu","isArray","topColor","side"];return(J=function(){return t})()}function $(t,n){const e=J();return($=function(t,n){return e[t-=270]})(t,n)}!function(){N(this,(function(){const t=$,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(314),"i"),o=Y(t(306));n.test(o+t(312))&&e[t(318)](o+t(309))?Y():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(286)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();V(void 0,(function(){const t=$,n=function(){const t=$;let n;try{n=Function(t(321)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(282)]=n[t(282)]||{},o=[t(303),t(274),t(270),t(308),t(276),"table",t(278)];for(let r=0;r<o.length;r++){const n=V[t(317)][t(325)][t(288)](V),i=o[r],s=e[i]||n;n[t(287)]=V[t(288)](V),n[t(302)]=s.toString[t(288)](s),e[i]=n}}))();const Q=[G(315)],X=m({__name:G(320),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:"#112233"},topColor:{default:G(310)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(e){const o=G,r=e,i=w(0),s=r[o(285)][o(280)];s[o(333)]=1001;const c=r[o(285)].land;(()=>{const n=o,{geometry:e}=s;e[n(327)](),e[n(273)]();const{max:c,min:u}=e[n(305)];if(s[n(334)][n(328)])return;const a=new h({baseMaterial:s.material,vertexShader:g,fragmentShader:y,silent:!0,uniforms:{uMax:{value:c},uMin:{value:u},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(311)])(r[n(324)])},uOpacity:{value:r[n(277)]},uLightColor:{value:new(t[n(311)])(n(293))},uTopColor:{value:new(t[n(311)])(r[n(298)])},uTime:i,uGradient:{value:r[n(275)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(289)]});s[n(334)].dispose(),s[n(334)]=a})();const{onLoop:u}=p();u((({delta:t})=>{i[o(271)]+=t})),b((()=>{const t=o;r.bulidingsColor&&s[t(334)].uniforms.uColor[t(271)].setStyle(r.bulidingsColor),r.landColor&&((t,e)=>{const i=o;let s;"cu"===t||t===i(329)&&(s=Array[i(297)](c[i(334)])?c[i(334)]:[c[i(334)]],s.forEach((t=>{const o=i;t[e].setStyle(r[o(323)]),t[o(299)]=n})))})("land",t(326)),r.opacity&&(s[t(334)][t(294)].uOpacity.value=r.opacity)})),I(r,((t,n)=>{const e=o;s[e(334)][e(294)][e(332)][e(271)]=t.gradient}));const a=r[o(285)][o(285)].clone();return(t,n)=>{const e=o;return _(),v(e(330),{object:C(a)},null,8,Q)}}});function Y(t){function n(t){const e=$;if(typeof t===e(316))return function(t){}[e(317)](e(295)).apply("counter");1!==(""+t/t)[e(331)]||t%20==0?function(){return!0}[e(317)](e(296)+e(284))[e(272)](e(335)):function(){return!1}.constructor(e(296)+"gger")[e(286)](e(290)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const q=ot;!function(t,n){const e=ot,o=nt();for(;;)try{if(571470===parseInt(e(299))/1*(parseInt(e(291))/2)+parseInt(e(321))/3+parseInt(e(284))/4*(-parseInt(e(337))/5)+parseInt(e(319))/6+parseInt(e(301))/7+-parseInt(e(294))/8*(parseInt(e(320))/9)+-parseInt(e(333))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ot(323)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){K(this,(function(){const t=ot,n=new RegExp(t(303)),e=new RegExp(t(292),"i"),o=rt(t(334));n[t(285)](o+t(282))&&e[t(285)](o+t(290))?rt():o("0")}))()}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ot(323)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();U(void 0,(function(){const t=ot,n=function(){const t=ot;let n;try{n=Function(t(286)+t(340)+");")()}catch(e){n=window}return n}(),e=n[t(293)]=n.console||{},o=[t(295),t(336),"info",t(322),"exception",t(339),t(314)];for(let r=0;r<o[t(341)];r++){const n=U[t(304)][t(329)][t(328)](U),i=o[r],s=e[i]||n;n[t(331)]=U[t(328)](U),n[t(302)]=s[t(302)].bind(s),e[i]=n}}))();const tt=[q(288)];function nt(){const t=["string","call","uniforms","applyMatrix4","buildingsLines","trace","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","stateObject","primitive","style","1243782PKPGVR","54FVugOr","1327773sLHTXz","error","apply","innerWidth","uOpacity","clone","value","bind","prototype","renderOrder","__proto__","material","5147830tHbhKR","init","fromEdgesGeometry","warn","3005RrydaB","Wireframe","table",'{}.constructor("return this")( )',"length","linewidth","chain","Shader","3572WLmMmp","test","return (function() ","geometry","object","innerHeight","input","916oJWqto","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","67656JaZjso","log","opacity","builds","while (true) {}","1231cJgcAB"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","3220014CNxiMn","toString","function *\\( *\\)","constructor","matrix","color","uColor","width"];return(nt=function(){return t})()}const et=m({__name:q(313),props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:q(338)}},setup(t){const n=q,u=t;let a=null,l=null;if("Wireframe"===u[n(318)]){const t=new e(u[n(297)][n(287)]);let s=(new o)[n(335)](t),c=new r({color:u[n(306)],linewidth:u[n(308)],opacity:u[n(296)],transparent:!0,depthWrite:!0,depthTest:!0});c.resolution.set(window[n(324)],window[n(289)]),a=new i(s,c),a[n(312)](u[n(297)][n(305)][n(326)]())}else{l={transparent:!0,uniforms:{uColor:{value:new s(u[n(306)])},uOpacity:{value:u[n(296)]}},vertexShader:n(315),fragmentShader:n(300)};const t=new e(u[n(297)][n(287)]),o=new c(l);a=new LineSegments(t,o),a[n(312)](u[n(297)][n(305)][n(326)]()),a[n(332)][n(342)]=u[n(308)],a[n(330)]=1e3}return b((()=>{const t=n;u.style===t(283)&&(u[t(306)]&&(l[t(311)][t(307)][t(327)]=new s(u.color)),u[t(296)]&&(l.uniforms[t(325)].value=u[t(296)])),u[t(318)]===t(338)&&(u.color&&(a[t(332)][t(306)]=new s(u.color)),u[t(296)]&&(a[t(332)].opacity=u[t(296)])),u[t(308)]&&(a.material.linewidth=u[t(308)])})),(t,e)=>{const o=n;return _(),v(o(317),{object:C(a)},null,8,tt)}}});function ot(t,n){const e=nt();return(ot=function(t,n){return e[t-=282]})(t,n)}function rt(t){function n(t){const e=ot;if(typeof t===e(309))return function(t){}[e(304)](e(298))[e(323)]("counter");1!==(""+t/t)[e(341)]||t%20==0?function(){return!0}.constructor("debugger")[e(310)]("action"):function(){return!1}[e(304)]("debugger").apply(e(316)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=lt;!function(t,n){const e=lt,o=pt();for(;;)try{if(970279===parseInt(e(130))/1*(parseInt(e(114))/2)+-parseInt(e(111))/3+parseInt(e(149))/4*(parseInt(e(129))/5)+parseInt(e(147))/6*(parseInt(e(119))/7)+parseInt(e(125))/8+-parseInt(e(124))/9+parseInt(e(145))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(144)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=lt,n=new RegExp(t(116)),e=new RegExp(t(139),"i"),o=dt(t(122));n[t(143)](o+t(150))&&e[t(143)](o+"input")?dt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(144)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=lt;let n;try{n=Function("return (function() "+t(110)+");")()}catch(r){n=window}const e=n[t(134)]=n.console||{},o=[t(135),t(140),t(120),t(103),t(115),"table","trace"];for(let i=0;i<o[t(109)];i++){const n=ct[t(117)][t(118)][t(123)](ct),r=o[i],s=e[r]||n;n[t(101)]=ct.bind(ct),n.toString=s[t(138)].bind(s),e[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(t,n){const e=pt();return(lt=function(t,n){return e[t-=101]})(t,n)}const ft=m({__name:it(102),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=x({clearColor:n(112),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:a,toneMapping:l,disableRender:r.disableRender}),s=x({autoRotate:r[n(104)],enableDamping:!0});let c=null;r[n(137)]&&([e,o]=A((()=>Z())),e=await e,o(),c=e);const f=w(),p=w();return(t,e)=>{const o=n,u=R(o(133));return _(),S(u,D({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:T((()=>[j(o(142),{ref_key:o(128),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(C(d),M(k(s)),null,16),e[0]||(e[0]=j(o(127),{color:"#ffffff"},null,-1)),e[1]||(e[1]=j("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(132)},null,-1)),r[o(137)]&&C(c)?(_(),v(F,{key:0},[B(X,{model:C(c)},null,8,[o(113)]),B(et,{builds:C(c)[o(121)],color:o(148)},null,8,["builds"])],64)):L("",!0),O(t[o(105)],"ability"),r[o(107)]?(_(),v(o(136),ut)):L("",!0),r.showGridHelper?(_(),v(o(108),at)):L("",!0)])),_:3},16)}}});function pt(){const t=["showBuildings","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","while (true) {}","TresPerspectiveCamera","test","apply","7827090NJoBNB","counter","2684898YMimrx","#000","44tLIDkJ","chain","gger","__proto__","pagesShow","error","autoRotate","$slots","call","showAxesHelper","TresGridHelper","length",'{}.constructor("return this")( )',"3930909FRdQtq","#000000","model","2393086LgcAML","exception","function *\\( *\\)","constructor","prototype","7RWNCus","info","city","init","bind","11705661gtDFFB","8849928PosQVQ","stateObject","TresAmbientLight","perspectiveCameraRef","21925TTQTdy","1ApYXtv","string","#ffffff","TresCanvas","console","log","TresAxesHelper"];return(pt=function(){return t})()}function dt(t){function n(t){const e=lt;if(typeof t===e(131))return function(t){}[e(117)](e(141)).apply(e(146));1!==(""+t/t)[e(109)]||t%20==0?function(){return!0}[e(117)]("debu"+e(151))[e(106)]("action"):function(){return!1}.constructor("debu"+e(151))[e(144)](e(126)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{X as _,et as a,ft as b,Z as l};

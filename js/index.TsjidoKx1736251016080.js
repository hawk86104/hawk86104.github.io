var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&i(t,o,a[o]);if(e)for(var o of e(a))r.call(a,o)&&i(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.si_4UN4x1736251016080.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.HE9bTtTP1736251016080.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.noQiUR2n1736251016080.js";import{k as o,U as s,C as l,m as c,W as u,bb as p,h as f,_ as x,V as v,as as m}from"./three.RuuDeeIf1736251016080.js";import{m as h,e as w}from"./@tresjs.8C7OKmBm1736251016080.js";import{u as g}from"./index.7xUuYu7h1736251016080.js";import{F as d,C as y}from"./three-stdlib.9SgBjS5j1736251016080.js";import{d as S}from"./@vue.-Mz_IXfk1736251016080.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.sQjo7j-21736251016080.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.oDFyrOPl1736251016080.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.aHCDd7wl1736251016080.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.OJ_B_yMv1736251016080.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.lh0YCrjD1736251016080.js";const _=M;function P(){const t=["chain","constructor","info","action","log","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","string","7844895nmlfdi","1491320iSNNqN","27XJPGTN","368142EZUVnv","219JzynQL",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"prototype","7644816EEjvSt","1568402IMMAhZ","apply","warn","console","counter","gger","length","bind","stateObject","__proto__","input","debu","34766hQcvex","exception","trace","toString","8563288mxnlAs","init","14AveDGt",'{}.constructor("return this")( )',"table"];return(P=function(){return t})()}!function(t,e){const n=M,r=P();for(;;)try{if(997699===parseInt(n(345))/1+-parseInt(n(357))/2*(-parseInt(n(379))/3)+-parseInt(n(344))/4+-parseInt(n(375))/5+-parseInt(n(378))/6*(-parseInt(n(363))/7)+parseInt(n(361))/8+-parseInt(n(377))/9*(-parseInt(n(376))/10))break;r.push(r.shift())}catch(i){r.push(r.shift())}}();const z=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){z(this,(function(){const t=M,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(372),"i"),r=A(t(362));e[t(371)](r+t(366))&&n[t(371)](r+t(355))?A():r("0")}))()}();const b=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[M(346)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();b(void 0,(function(){const t=M,e=function(){const t=M;let e;try{e=Function("return (function() "+t(364)+");")()}catch(n){e=window}return e}(),n=e[t(348)]=e[t(348)]||{},r=[t(370),t(347),t(368),"error",t(358),t(365),t(359)];for(let i=0;i<r[t(351)];i++){const e=b[t(367)][t(381)].bind(b),a=r[i],o=n[a]||e;e[t(354)]=b[t(352)](b),e.toString=o[t(360)][t(352)](o),n[a]=e}}))();const I=_(380);function M(t,e){const n=P();return(M=function(t,e){return n[t-=344]})(t,e)}function A(t){function e(t){const n=M;if(typeof t===n(374))return function(t){}[n(367)](n(373))[n(346)](n(349));1!==(""+t/t).length||t%20==0?function(){return!0}[n(367)](n(356)+"gger").call(n(369)):function(){return!1}.constructor("debu"+n(350)).apply(n(353)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function E(t,e){const n=L();return(E=function(t,e){return n[t-=257]})(t,e)}const D=E;function L(){const t=["prototype","uniforms","error","toString","constructor","length","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","1029836xrgtvm","chain","defines","bind","25131gkhoJH","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","stateObject","call","table","test","5rcnbwP","console","6bhjYOF","info","while (true) {}","10201600hSylrg","26WGWaTJ","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","__proto__","2623840TlFWZy","input","6243748czNQaQ","string","9722520OvCoNX","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","1226189LNDTjt","log","action","apply","trace","gger","exception"];return(L=function(){return t})()}!function(t,e){const n=E,r=L();for(;;)try{if(648269===-parseInt(n(294))/1+-parseInt(n(285))/2*(parseInt(n(272))/3)+parseInt(n(268))/4*(parseInt(n(279))/5)+-parseInt(n(281))/6*(parseInt(n(290))/7)+parseInt(n(284))/8+parseInt(n(292))/9+parseInt(n(288))/10)break;r.push(r.shift())}catch(i){r.push(r.shift())}}();const j=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(257)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){j(this,(function(){const t=E,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(273),"i"),r=V("init");e[t(278)](r+t(269))&&n[t(278)](r+t(289))?V():r("0")}))()}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(257)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function T(t){const e=E,n=a({},t);return e(270)in t&&(n[e(270)]=a({},t[e(270)])),"uniforms"in t&&(n.uniforms=s.clone(t[e(262)])),n}O(void 0,(function(){const t=E,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e[t(280)]=e[t(280)]||{},r=[t(295),"warn",t(282),t(263),t(260),t(277),t(258)];for(let i=0;i<r[t(266)];i++){const e=O.constructor[t(261)][t(271)](O),a=r[i],o=n[a]||e;e[t(287)]=O[t(271)](O),e[t(264)]=o[t(264)].bind(o),n[a]=e}}))();const U={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:D(267),fragmentShader:D(293)+I+D(286)};function V(t){function e(t){const n=E;if(typeof t===n(291))return function(t){}.constructor(n(283)).apply("counter");1!==(""+t/t)[n(266)]||t%20==0?function(){return!0}[n(265)](n(274)+n(259))[n(276)](n(296)):function(){return!1}[n(265)](n(274)+n(259))[n(257)](n(275)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=N;!function(t,e){const n=N,r=C();for(;;)try{if(903379===parseInt(n(402))/1+-parseInt(n(418))/2*(-parseInt(n(391))/3)+parseInt(n(372))/4+parseInt(n(368))/5+-parseInt(n(389))/6+parseInt(n(385))/7*(-parseInt(n(383))/8)+-parseInt(n(409))/9)break;r.push(r.shift())}catch(i){r.push(r.shift())}}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(379)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function C(){const t=["clear","_swapTarget","autoClear","setClearColor","texture","render","length","debu","1492rdCFlr","forEach","setSize","material","bind","function *\\( *\\)","prototype","setRenderTarget","init","getClearColor","replace","fragmentShader","counter","gger","string","camera","setClearAlpha","call","trace",'{}.constructor("return this")( )',"set","uniforms","Y_IS_EVEN","_mipQuad","3669220HfzGah","constructor","test","floorPowerOfTwo","2400436IVbtin","_copyQuad","update","floor","value","parentLevel","getRenderTarget","apply","parentMapSize","return (function() ","X_IS_EVEN","3408BBNdVQ","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","13951ZeOWYu","_mipMaterials","toString","image","2453436OwzJxn","originalMapSize","723CDDslS","__proto__","table","getClearAlpha","setViewOffset","width","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","minFilter","map","dispose","console","1453366mDKjee","height","type","defines","input","warn","exception","7252218GWntaT"];return(C=function(){return t})()}function N(t,e){const n=C();return(N=function(t,e){return n[t-=355]})(t,e)}!function(){R(this,(function(){const t=N,e=new RegExp(t(423)),n=new RegExp(t(397),"i"),r=Q(t(426));e[t(370)](r+"chain")&&n.test(r+t(406))?Q():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(379)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=N,e=function(){const t=N;let e;try{e=Function(t(381)+t(363)+");")()}catch(n){e=window}return e}(),n=e[t(401)]=e.console||{},r=["log",t(407),"info","error",t(408),t(393),t(362)];for(let i=0;i<r[t(416)];i++){const e=H[t(369)][t(424)][t(422)](H),a=r[i],o=n[a]||e;e[t(392)]=H[t(422)](H),e[t(387)]=o[t(387)][t(422)](o),n[a]=e}}))();const k=new l;class F{constructor(t){const e=N;!t&&(t=e(384));const n=T(U);n[e(355)]=n[e(355)][e(428)](/<mipmap_logic>/g,t);const r=new Array(4);r[0]=new c(T(n)),r[0][e(405)][e(382)]=0,r[0][e(405)][e(366)]=0,r[1]=new c(T(n)),r[1][e(405)][e(382)]=1,r[1][e(405)][e(366)]=0,r[2]=new c(T(n)),r[2][e(405)][e(382)]=0,r[2][e(405)][e(366)]=1,r[3]=new c(T(n)),r[3][e(405)][e(382)]=1,r[3].defines[e(366)]=1;const i=new u;i.texture[e(398)]=p,i[e(414)].magFilter=p,this[e(411)]=i,this._copyQuad=new d(new c(y)),this[e(367)]=new d(null),this._mipMaterials=r}[W(374)](t,e,n,r=!1){const i=W;t.isWebGLRenderTarget&&(t=t.texture);const o=n.autoClear,s=n[i(394)](),l=n[i(378)]();n[i(427)](k);const c=this[i(373)],u=this[i(367)],p=this[i(411)],x=this[i(386)];let v,m;r?(v=f[i(371)](t[i(388)].width),m=f.floorPowerOfTwo(t.image[i(403)])):(v=Math[i(375)](t[i(388)][i(396)]),m=Math.floor(t.image[i(403)]));const h=Math[i(375)](1.5*v),w=Math.floor(m);e[i(420)](h,w),p.texture[i(404)]!==e[i(414)][i(404)]?(p[i(400)](),p.copy(e),p[i(414)][i(388)]=a({},p.texture[i(388)])):p[i(420)](h,w),n.autoClear=!1,n[i(413)](0),n[i(360)](),c[i(421)].uniforms.tDiffuse[i(376)]=t,c.camera[i(395)](v,m,0,0,h,w),n[i(425)](e),n.clear(),c[i(415)](n),n[i(425)](p),n[i(410)](),c[i(415)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t.uniforms[i(399)][i(376)]=p[i(414)],t.uniforms[i(377)][i(376)]=y,t[i(365)][i(380)][i(376)].set(g,d),t[i(365)][i(390)][i(376)][i(364)](v,m),u[i(421)]=t,g=Math[i(375)](g/2),d=Math[i(375)](d/2);const r=w-2*d;n[i(425)](e),u[i(359)][i(395)](g,d,-v,-r,h,w),u.render(n),n[i(425)](p),t[i(365)][i(399)][i(376)]=e[i(414)],u.render(n),y++}return n.setRenderTarget(l),n.setClearAlpha(s),n[i(413)](k),n[i(412)]=o,y+1}dispose(){const t=W;this._swapTarget[t(400)](),this._mipQuad.dispose(),this[t(373)][t(400)](),this._mipMaterials[t(419)]((e=>e[t(400)]()))}}function Q(t){function e(t){const n=N;if(typeof t===n(358))return function(t){}.constructor("while (true) {}")[n(379)](n(356));1!==(""+t/t)[n(416)]||t%20==0?function(){return!0}.constructor(n(417)+"gger")[n(361)]("action"):function(){return!1}[n(369)](n(417)+n(357))[n(379)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const Z=B;!function(t,e){const n=B,r=X();for(;;)try{if(360466===-parseInt(n(452))/1+-parseInt(n(385))/2+-parseInt(n(427))/3+parseInt(n(408))/4*(-parseInt(n(404))/5)+-parseInt(n(450))/6+parseInt(n(426))/7*(-parseInt(n(441))/8)+parseInt(n(435))/9)break;r.push(r.shift())}catch(i){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(411)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function X(){const t=["Vector3","lookAt","update","4HWyBbj","depth","getWorldPosition","apply","counter","normal","warn","input","prototype","buffers","negate","action","projectionMatrix","Vector4","matrixWorldInverse","trace","elements","console","21mexjEl","470097HbWauj","render","applyQuaternion","set","__proto__","updateMatrixWorld","sub","constant","17967384AjoidS","visible","length","info","UnsignedByteType","parent","1480944hKHHLi","stateObject","Quaternion","gger","reflect","matrixWorld","getWorldQuaternion","add","Matrix4","1339794ToUrEw","copy","543890srGOcj","forEach","exception","projectPoint","PerspectiveCamera","position","multiply","44380XrYBlI","setRenderTarget",'{}.constructor("return this")( )',"resolution","reflectorMipMap","clear","bind","test","Plane","autoClear","toString","value","sign","setMask","ignoreObjects","error","multiplyScalar","constructor","debu","672390lThSLf"];return(X=function(){return t})()}!function(){G(this,(function(){const t=B,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=J("init");e[t(392)](r+"chain")&&n.test(r+t(415))?J():r("0")}))()}();const $=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(411)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=X();return(B=function(t,e){return n[t-=383]})(t,e)}$(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function("return (function() "+t(387)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(425)]||{},r=["log",t(414),t(438),t(400),t(454),"table",t(423)];for(let i=0;i<r[t(437)];i++){const e=$[t(402)][t(416)][t(391)]($),a=r[i],o=n[a]||e;e[t(431)]=$[t(391)]($),e[t(395)]=o.toString[t(391)](o),n[a]=e}}))();const Y=S({__name:Z(389),props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=Z,r=t,i=new(x[n(393)]),a=new(x[n(449)]),o=new(x[n(456)]),s=new F,l=g({width:r[n(388)],height:r[n(388)],settings:{type:x[n(439)]}}),c=g({width:r[n(388)],height:r[n(388)],settings:{type:x[n(439)]}}),{camera:u,renderer:p,scene:f}=h(),{onBeforeLoop:d}=w();return d((()=>{const t=n;(()=>{const t=n;if(!u[t(396)])return;i[t(430)](new v(0,1,0),0),i.applyMatrix4(r[t(440)][t(446)]),o.copy(u[t(396)]);const e=new(x[t(405)])(0,0,1).clone()[t(418)](),s=u[t(396)][t(410)](new(x[t(405)]));e[t(445)](i.normal);const c=new(x[t(405)]);i[t(455)](s,c);const h=c.clone();h[t(433)](s),h[t(448)](c),o[t(383)][t(451)](h);const w=new(x[t(405)])(0,0,-1);w.applyQuaternion(u[t(396)][t(447)](new(x[t(443)]))),w.add(s);const g=new(x[t(405)]);r.parent[t(410)](g),g[t(433)](w),g[t(445)](i[t(413)])[t(418)](),g[t(448)](r[t(440)][t(410)](new v)),o.up[t(430)](0,1,0),o[t(429)](u[t(396)][t(447)](new(x[t(443)]))),o.up[t(445)](i[t(413)]),o[t(406)](g),o[t(432)]();const d=new(x[t(449)]);d[t(430)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(o[t(420)]),d[t(384)](o[t(422)]),a[t(451)](d),i.applyMatrix4(o.matrixWorldInverse);const y=new(x[t(421)])(i[t(413)].x,i[t(413)].y,i.normal.z,i[t(434)]),S=o[t(420)],_=new m;_.x=(Math[t(397)](y.x)+S[t(424)][8])/S[t(424)][0],_.y=(Math[t(397)](y.y)+S[t(424)][9])/S[t(424)][5],_.z=-1,_.w=(1+S[t(424)][10])/S[t(424)][14],y[t(401)](2/y.dot(_)),S[t(424)][2]=y.x,S[t(424)][6]=y.y,S[t(424)][10]=y.z+1,S[t(424)][14]=y.w;const P=p[t(396)].getRenderTarget();p[t(396)].setRenderTarget(l[t(396)]),p[t(396)].state[t(417)][t(409)][t(398)](!0),!1===p[t(396)][t(394)]&&p[t(396)][t(390)](),r.ignoreObjects[t(453)]((e=>e[t(436)]=!1)),p[t(396)][t(428)](f[t(396)],o),r[t(399)][t(453)]((e=>e[t(436)]=!0)),p.value[t(386)](P)})(),l[t(396)]&&c[t(396)]&&p[t(396)]&&s[t(407)](l[t(396)].texture,c[t(396)],p.value)})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function J(t){function e(t){const n=B;if("string"==typeof t)return function(t){}[n(402)]("while (true) {}").apply(n(412));1!==(""+t/t)[n(437)]||t%20==0?function(){return!0}.constructor(n(403)+n(444)).call(n(419)):function(){return!1}[n(402)](n(403)+n(444))[n(411)](n(442)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,r=et();;)try{if(212492===-parseInt(n(155))/1*(-parseInt(n(166))/2)+parseInt(n(176))/3*(-parseInt(n(163))/4)+-parseInt(n(171))/5+-parseInt(n(161))/6+-parseInt(n(174))/7+parseInt(n(160))/8*(parseInt(n(162))/9)+-parseInt(n(159))/10*(-parseInt(n(169))/11))break;r.push(r.shift())}catch(i){r.push(r.shift())}}();var q=function(){var t=!0;return function(e,n){var r=t?function(){if(n){var t=n[tt(189)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){q(this,(function(){var t=tt,e=new RegExp(t(165)),n=new RegExp(t(183),"i"),r=nt(t(178));e[t(164)](r+t(173))&&n[t(164)](r+t(175))?nt():r("0")}))()}();var K=function(){var t=!0;return function(e,n){var r=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function tt(t,e){var n=et();return(tt=function(t,e){return n[t-=155]})(t,e)}function et(){var t=["debu","chain","2260398aeDaBS","input","2157chwRBX","toString","init","action","length","exception","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","while (true) {}","console","__proto__","gger","apply","table","info","1Nfvyjo","warn","trace","constructor","10HqJvqB","16HwJgFK","2282814OodzcC","1907100RDDevQ","772LcRyQA","test","function *\\( *\\)","540958xGOpBD","string","call","7742834QULDlh","counter","1717655WIZWoq"];return(et=function(){return t})()}function nt(t){function e(t){var n=tt;if(typeof t===n(167))return function(t){}[n(158)](n(185))[n(189)](n(170));1!==(""+t/t).length||t%20==0?function(){return!0}[n(158)](n(172)+n(188))[n(168)](n(179)):function(){return!1}[n(158)]("debu"+n(188))[n(189)](n(184)),e(++t)}try{if(t)return e;e(0)}catch(n){}}K(void 0,(function(){for(var t=tt,e=function(){var t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e[t(186)]=e[t(186)]||{},r=["log",t(156),t(191),"error",t(181),t(190),t(157)],i=0;i<r[t(180)];i++){var a=K[t(158)].prototype[t(182)](K),o=r[i],s=n[o]||a;a[t(187)]=K[t(182)](K),a[t(177)]=s[t(177)][t(182)](s),n[o]=a}}))();export{Y as _};

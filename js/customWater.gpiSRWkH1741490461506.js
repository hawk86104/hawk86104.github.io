import{a6 as e,_ as t,C as n,a0 as r}from"./three.Vxh8Czkt1741490461506.js";import{e as a,h as o,o as s,f as i}from"./@tresjs.rE98Wm941741490461506.js";import{a as l}from"./index.CQdDy-wE1741490461506.js";import"./index.k82P0KcO1741490461506.js";import{z as u}from"./three-custom-shader-material.ZFxoA-pL1741490461506.js";import{p as c}from"./gl-noise.BrVtymbx1741490461506.js";import{d as p,b as f,a2 as g,w as h,o as m,H as v,N as d,j as _,u as b,r as w,f as j,g as y,aj as M,ak as x,m as z,al as C}from"./@vue.NRI7TcgI1741490461506.js";import{P as T}from"./tweakpane.yDiyAAkA1741490461506.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.sO959yeL1741490461506.js";import"./postprocessing.wUw4_rsV1741490461506.js";import"./@vueuse.9Z-Ayxy41741490461506.js";import"./three-stdlib.2KPeCEvi1741490461506.js";import"./@pmndrs.VkB-hYkG1741490461506.js";import"./object-hash.bPWYxSd_1741490461506.js";import"./@amap.TO4JQn7s1741490461506.js";import"./jszip.6x-WYzg11741490461506.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.D3Wony-x1741490461506.js";import"./all.three.9g6ASlnm1741490461506.js";import"./oimophysics.x0jH7fze1741490461506.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.XNHpIq5r1741490461506.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.jGRwxDAG1741490461506.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.2bCT9hXw1741490461506.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.VUBFNHNU1741490461506.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.22sDy_p21741490461506.js";import"./imgFloor.vue_vue_type_script_setup_true_lang._MfUuTmt1741490461506.js";const S=F;!function(e,t){const n=F,r=P();for(;;)try{if(106254===parseInt(n(236))/1+parseInt(n(235))/2+-parseInt(n(290))/3+-parseInt(n(272))/4*(parseInt(n(285))/5)+-parseInt(n(238))/6*(-parseInt(n(281))/7)+parseInt(n(283))/8*(parseInt(n(262))/9)+-parseInt(n(248))/10*(parseInt(n(245))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[F(264)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){G(this,(function(){const e=F,t=new RegExp("function *\\( *\\)"),n=new RegExp(e(240),"i"),r=k(e(244));t[e(259)](r+"chain")&&n.test(r+e(267))?k():r("0")}))()}();const B=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[F(264)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();B(void 0,(function(){const e=F;let t;try{t=Function(e(273)+e(237)+");")()}catch(a){t=window}const n=t[e(247)]=t[e(247)]||{},r=[e(288),"warn",e(280),e(276),"exception",e(265),e(234)];for(let o=0;o<r.length;o++){const t=B[e(258)][e(260)][e(239)](B),a=r[o],s=n[a]||t;t.__proto__=B[e(239)](B),t.toString=s[e(279)][e(239)](s),n[a]=t}}))();const H=[S(246)],W=["args"];function F(e,t){const n=P();return(F=function(e,t){return n[e-=232]})(e,t)}const O=p({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(252)},waterHighlight:{default:S(275)},brightness:{default:1},baseMaterial:{default:e}},setup(s){const i=S,l=s,p=f(null),w={vertex:i(282),fragment:i(232)},j={uTime:{value:0},waterColor:{value:new(t[i(269)])(l.waterColor)[i(284)]()},waterHighlight:{value:new(t[i(269)])(l[i(254)])[i(284)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:l[i(242)]},uHeight:{value:l.height}},{onLoop:y}=a();return y((({elapsed:e})=>{const t=i;j[t(291)][t(270)]=-e/5})),g((()=>{const e=i;l[e(268)]&&(j[e(287)][e(270)]=l[e(268)]),l[e(292)]&&(j[e(292)][e(270)]=new(t[e(269)])(l[e(292)]).convertLinearToSRGB()),l[e(254)]&&(j[e(254)][e(270)]=new n(l[e(254)])[e(284)]()),l[e(242)]&&(j.brightness.value=l.brightness)})),h((()=>l.Flatshading),(e=>{const t=i;p[t(270)][t(241)][t(261)]=!0})),h((()=>l[i(250)]),(e=>{const n=i,a=new u({baseMaterial:t[e],vertexShader:c(w.vertex),fragmentShader:w[n(286)],uniforms:j,flatShading:l[n(251)],side:r,roughness:.2,metalness:.1,silent:!0});p[n(270)].material[n(257)](),p[n(270)][n(241)]=a})),(n,r)=>{const a=i;return m(),v(a(263),{ref_key:a(253),ref:p,"rotation-x":-Math.PI/2},[d(a(243),{args:[5,5,n[a(268)],64,64,1]},null,8,W),_(b(o),{baseMaterial:e,vertexShader:b(c)(w.vertex),fragmentShader:w[a(286)],uniforms:j,side:t[a(271)],roughness:.2,metalness:.1,flatShading:n[a(251)],silent:""},null,8,["baseMaterial","vertexShader",a(249),a(255),a(256)])],8,H)}}});function P(){const e=["bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","brightness","TresBoxGeometry","init","77npENBo","rotation-x","console","220130bnriqx","fragmentShader","baseMaterial","Flatshading","#52a7f7","tmRef","waterHighlight","side","flatShading","dispose","constructor","test","prototype","needsUpdate","9auXTfB","TresMesh","apply","table","string","input","height","Color","value","DoubleSide","45884gKVHmX","return (function() ","stateObject","#b3ffff","error","gger","while (true) {}","toString","info","1183ebWkrB","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","897672AGazEp","convertLinearToSRGB","75Ftunyn","fragment","uHeight","log","debu","101514TNqtiO","uTime","waterColor","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","call","trace","280698wMoReQ","120064LIibte",'{}.constructor("return this")( )',"3324QWQZVa"];return(P=function(){return e})()}function k(e){function t(e){const n=F;if(typeof e===n(266))return function(e){}[n(258)](n(278)).apply("counter");1!==(""+e/e).length||e%20==0?function(){return!0}[n(258)](n(289)+n(277))[n(233)]("action"):function(){return!1}[n(258)]("debugger")[n(264)](n(274)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const D=R;!function(e,t){const n=R,r=A();for(;;)try{if(408823===-parseInt(n(147))/1+parseInt(n(208))/2+parseInt(n(154))/3+-parseInt(n(205))/4*(-parseInt(n(206))/5)+parseInt(n(185))/6+-parseInt(n(172))/7+parseInt(n(180))/8)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[R(207)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function R(e,t){const n=A();return(R=function(e,t){return n[e-=146]})(e,t)}!function(){N(this,(function(){const e=R,t=new RegExp(e(202)),n=new RegExp(e(201),"i"),r=Z(e(177));t[e(170)](r+e(178))&&n[e(170)](r+"input")?Z():r("0")}))()}();const L=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[R(207)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function A(){const e=["ACESFilmicToneMapping","26716IGFqgM","225HWRnPx","apply","443894DkcKhb","warn","waterColor","548970FVxnIj","addBinding","neg-x.jpg","exception","MeshBasicMaterial","MeshStandardMaterial","length","736650lxHIbZ","debu","neg-z.jpg","MeshLambertMaterial","MeshDepthMaterial","console","Flatshading","constructor","list","#52a7f7","neg-y.jpg","pos-z.jpg","浪头颜色","error","MeshToonMaterial","trace","test","prototype","4016334ejQjxu","addBlade","customWater","change","stateObject","init","chain","TresDirectionalLight","4805616JvdCzy","return (function() ","call","height","log","976806LnenMW","value","MeshPhysicalMaterial","水体颜色","toString","#627179","baseMaterial","bind","label","info","target","action","pos-y.jpg","MeshNormalMaterial","#b3ffff","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","brightness"];return(A=function(){return e})()}L(void 0,(function(){const e=R;let t;try{t=Function(e(181)+'{}.constructor("return this")( ));')()}catch(a){t=window}const n=t[e(159)]=t[e(159)]||{},r=[e(184),e(209),e(194),e(167),e(150),"table",e(169)];for(let o=0;o<r.length;o++){const t=L[e(161)][e(171)][e(192)](L),a=r[o],s=n[a]||t;t.__proto__=L[e(192)](L),t[e(189)]=s[e(189)][e(192)](s),n[a]=t}}))();const E=p({__name:D(174),setup(e){const n=D,r=w({alpha:!0,toneMapping:t[n(204)],windowSize:!0,clearColor:10066329}),a=w({enableDamping:!0,autoRotate:!1}),o=w({cellSize:.6,cellThickness:1.1,cellColor:n(190),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:n(163),waterHighlight:n(199),brightness:1,baseMaterial:n(187)}),c=new T;return c.addBinding(u,n(183),{label:"高度",min:.1,max:5,step:.1}),c[n(148)](u,n(146),{label:n(188)}),c.addBinding(u,"waterHighlight",{label:n(166)}),c[n(148)](u,n(203),{label:"亮度",min:0,max:1,step:.01}),c[n(148)](u,n(160),{label:"Flatshading"}),c[n(173)]({view:n(162),label:"材质",options:[{text:n(187),value:n(187)},{text:n(151),value:n(151)},{text:n(198),value:n(198)},{text:n(152),value:n(152)},{text:"MeshPhongMaterial",value:"MeshPhongMaterial"},{text:n(168),value:"MeshToonMaterial"},{text:n(157),value:"MeshLambertMaterial"},{text:"MeshDepthMaterial",value:n(158)}],value:u.baseMaterial}),c.on(n(175),(e=>{const t=n;"材质"===e[t(195)][t(193)]&&(u[t(191)]=e[t(186)])})),(e,t)=>{const c=n;return m(),j(b(i),z(r,{"window-size":""}),{default:y((()=>[t[0]||(t[0]=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),_(b(s),M(x(a)),null,16),t[1]||(t[1]=d("TresAmbientLight",{intensity:.5},null,-1)),t[2]||(t[2]=d(c(179),{position:[15,15,15],intensity:1},null,-1)),_(O,M(x(u)),null,16),_(b(I),z({args:[3,3]},o,{position:[0,-.5,0]}),null,16),(m(),j(C,null,{default:y((()=>[_(b(l),{files:["pos-x.jpg",c(149),c(197),c(164),c(165),c(156)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function Z(e){function t(e){const n=R;if("string"==typeof e)return function(e){}.constructor("while (true) {}")[n(207)]("counter");1!==(""+e/e)[n(153)]||e%20==0?function(){return!0}[n(161)](n(155)+n(200))[n(182)](n(196)):function(){return!1}[n(161)](n(155)+n(200)).apply(n(176)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{E as default};

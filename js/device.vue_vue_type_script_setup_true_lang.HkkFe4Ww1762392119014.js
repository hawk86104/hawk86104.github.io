import{y as e,cL as a,ap as r,an as t,ao as s,cM as n,cN as o,d as l,cO as i,d4 as d,q as u,dr as c,k as m}from"./three.CDsL_76W1762392119014.js";import{F as v,_ as h}from"./@tresjs.hGs-POUu1762392119014.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DZ0IZ-Ox1762392119014.js";import"./Resource.S1Cir9aE1762392119014.js";import{u as p}from"./index.1RCdAd2K1762392119014.js";import{d as f,ac as b,a3 as _,G as w,o as g,ad as x,u as y}from"./@vue.DQUdVfVE1762392119014.js";let P=new m("#0fb1fb");const j=new e({color:P,transparent:!0,opacity:.3}),T=new s({color:new m(P),depthTest:!0,transparent:!0}),S=0,M=.972,k=.21,C=["object"],D=f({__name:"device",props:{threshold:{default:0},strength:{default:.972},radius:{default:.21}},async setup(s){let f,P;const D=s,{nodes:R}=([f,P]=b(()=>p("https://opensource.cdn.icegl.cn/model/industry4/modelDraco.glb")),f=await f,P(),f),U=(e=>{const s=[];e.traverse(e=>{e.isMesh&&(s.push(e.geometry),e.material=j)});const n=a(s),o=new r(n,6.137*Math.PI),l=new t(o);return T.opacity=1,l.material=T,l})(R.Sketchfab_model),{camera:B,renderer:L,scene:N,sizes:F}=v();let G=null,O=null,q=null;const z=new e({color:"black"});_(()=>{if(B.value){L.setPixelRatio(window.devicePixelRatio),N.value.add(U);const{finalComposer:e,effectComposer:a,bloomPass:r}=((e,a,r,t,s)=>{const m=new n(e,a),v=new o(new l(t,s),M,k,S),h=new i(r);h.renderToScreen=!1,h.addPass(m),h.addPass(v);const p=new d(new u({uniforms:{baseTexture:{value:null},bloomTexture:{value:h.renderTarget2.texture}},vertexShader:"varying vec2 vUv;\nvoid main(){\n\tvUv=uv;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform sampler2D baseTexture;\nuniform sampler2D bloomTexture;\nvarying vec2 vUv;\nvoid main(){\n\tgl_FragColor=(texture2D(baseTexture,vUv)+vec4(1.)*texture2D(bloomTexture,vUv));\n}",defines:{}}),"baseTexture");p.needsSwap=!0;const f=new c,b=new i(r);return b.addPass(m),b.addPass(p),b.addPass(f),{finalComposer:b,effectComposer:h,renderScene:m,bloomPass:v}})(N.value,B.value,L,F.width.value,F.height.value);G=e,O=a,q=r,q.threshold=D.threshold,q.strength=D.strength,q.radius=D.radius}D.threshold&&(q.threshold=D.threshold),D.strength&&(q.strength=D.strength),D.radius&&(q.radius=D.radius)});const H={},{onBeforeRender:I}=h();let V=R.Sketchfab_model.getObjectByName("canister_turbine_011_Nickel-Light-PBR_0"),$=V.material.clone(),A=new e({color:new m("red"),transparent:!0,opacity:1});return I(({elapsed:e})=>{R.hull_turbine&&(R.hull_turbine.rotation.x+=.03,R.blades_turbine_003.rotation.x+=.03),Math.floor(e)%2?V.material=$:V.material=A},-1),I(({elapsed:e})=>{O&&(N.value.traverse(e=>{var a;((a=e).isMesh||"GridHelper"===a.type||"reflectorShaderMesh"===a.name)&&(H[a.uuid]=a.material,a.material=z)}),O.render(e)),G&&(N.value.traverse(e=>{var a;H[(a=e).uuid]&&(a.material=H[a.uuid],delete H[a.uuid])}),G.render(e))},1),(e,a)=>(g(),w("primitive",{object:x(y(R).Sketchfab_model)},null,8,C))}});export{D as _};

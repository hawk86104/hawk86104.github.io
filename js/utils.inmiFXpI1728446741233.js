import"./@fesjs.tvRFRo261728446741233.js";import{_ as t}from"./jszip.tq9nBV5m1728446741233.js";import{F as n}from"./file-saver.no-2FmDL1728446741233.js";import{_ as e,aJ as s}from"./three.GKtOCofD1728446741233.js";const o=i;function r(){const t=["非标准文件：不存在 app.json","image/png","url","1165875phnOxD","uuid","pop","data:image/JPEG;base64,","trace","gger","url:images/","slice","apply","6870936DzdNoh","data:image/jpeg;base64,","data:image/WEBP;base64,",'{}.constructor("return this")( )',"geometries","while (true) {}","console","string","Cache","debu","data:image/webp;base64,","8HMUykw","then","input","toUpperCase","log","app.json","result","toLowerCase","constructor","table","enabled","files","url:","split","folder","loadAsync","607640AZkaZT","file","prototype","return (function() ","JPEG","GIF","2koGAJz","function *\\( *\\)","readAsDataURL","get","call","config.zip","length","message","onerror","20wAIErb","warn","1516199vcZRgi","image/jpeg","endsWith","data","image/gif","images","93132nvQxHV","info","image/bmp","load",".json","scene",";base64,","setResponseType","catch","52cBDnmc","async","onloadend","data:image/","bind","FileLoader","forEach","type","data:image/gif;base64,","base64","action","PNG","counter","blob","7502621aXHWHs","52475214wKzXFW","data:","WEBP","Unknown","toString","data:image/png;base64,","stringify","chain","url:geometries/","BufferGeometry","image/webp","startsWith","parse","name"];return(r=function(){return t})()}!function(t,n){const e=i,s=r();for(;;)try{if(910477===-parseInt(e(324))/1*(-parseInt(e(313))/2)+parseInt(e(271))/3+parseInt(e(339))/4*(parseInt(e(307))/5)+parseInt(e(280))/6+-parseInt(e(353))/7*(-parseInt(e(291))/8)+parseInt(e(330))/9*(-parseInt(e(322))/10)+-parseInt(e(254))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(279)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=r();return(i=function(t,n){return e[t-=254]})(t,n)}!function(){a(this,(function(){const t=i,n=new RegExp(t(314)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=h("init");n.test(s+t(261))&&e.test(s+t(293))?h():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(279)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function u(t){const n=o,s=new(e[n(344)]);return new Promise(((e,o)=>{s[n(333)](t,(t=>e(JSON.parse(t))),void 0,(t=>o(t)))}))}async function p(t){const n=o,s=new(e[n(344)]);return new Promise(((e,r)=>{const a=n;s[a(337)](a(352)),s[a(333)](t,(n=>{const s=a,c=new FileReader;c.onloadend=()=>{const n=i,s=function(t){const n=o,e=t[n(304)](".").pop()[n(298)]();return{jpg:n(325),jpeg:"image/jpeg",png:n(269),gif:n(328),bmp:n(332),webp:n(264)}[e]||"application/octet-stream"}(t),r=c.result[n(304)](",")[1];e(n(255)+s+n(336)+r)},c[s(321)]=t=>{r(t)},c[s(315)](n)}),void 0,(t=>r(t)))}))}c(void 0,(function(){const t=i;let n;try{n=Function(t(310)+t(283)+");")()}catch(o){n=window}const e=n[t(286)]=n[t(286)]||{},s=[t(295),t(323),t(331),"error","exception",t(300),t(275)];for(let r=0;r<s[t(319)];r++){const n=c[t(299)][t(309)].bind(c),o=s[r],a=e[o]||n;n.__proto__=c[t(343)](c),n[t(258)]=a.toString[t(343)](a),e[o]=n}}))(),e[o(288)][o(301)]=!0;const l=n=>{const e=o,r=new s;return r[e(337)](e(352)),new Promise(((e,s)=>{r.load(n,(async n=>{const s=i;e(await t[s(306)](n))}),void 0,(t=>s(t)))}))},f=t=>{const n=o,e=t.substring(0,15),s=n(281),r=n(274),a=n(259),i=n(347),c=n(290),u=n(282);return s[n(265)](e)||r.startsWith(e)?n(311):a[n(265)](e)||"data:image/PNG;base64,"[n(265)](e)?n(350):i.startsWith(e)||"data:image/GIF;base64,"[n(265)](e)?n(312):c[n(265)](e||u[n(265)](e))?n(256):n(257)},g=e=>{const s=o,r=[];e[s(335)][s(284)]&&e[s(335)].geometries.forEach((t=>{const n=s;t[n(346)]===n(263)&&(r.push({uuid:t.uuid,data:t[n(327)]}),t[n(327)]=n(262)+t[n(272)]+n(334))}));const a=[];e[s(335)][s(329)]&&e.scene[s(329)][s(345)]((t=>{const n=s;t[n(270)]&&(a.push({uuid:t.uuid,url:t[n(270)]}),t[n(270)].type?t[n(270)]=n(277)+t[n(272)]+"."+t.url.type+".json":t.url=n(277)+t[n(272)]+"."+f(t[n(270)]))}));const i=new t;if(r[s(319)]){const t=i[s(305)](s(284));r[s(345)]((n=>{const e=s;t[e(308)](n[e(272)]+e(334),JSON[e(260)](n[e(327)]))}))}if(a.length){const t=i[s(305)](s(329));a[s(345)]((n=>{const e=s;n[e(270)][e(346)]?t[e(308)](n[e(272)]+"."+n[e(270)].type+e(334),JSON[e(260)](n[e(270)])):t[e(308)](n[e(272)]+"."+f(n[e(270)]),n[e(270)].split(";base64,")[e(273)](),{base64:!0})}))}const c=JSON.stringify(e);return i.file("app.json",c),i.generateAsync({type:s(352)})[s(292)]((t=>{const e=s;n.saveAs(t,e(318))}))},m=(t,n,e)=>{const s=o;t[s(284)]<=0&&t[s(329)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t.loadAsync(n)[s(292)]((t=>{const n=s;t[n(302)]["app.json"]?t[n(302)][n(296)].async(n(287)).then((s=>{var a,i;const c=n;r=JSON[c(266)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(335)].geometries)||n.forEach((t=>{const n=s;t.data[n(265)](n(303))&&r[n(284)]++})),null==(e=t.scene.images)||e.forEach((t=>{const n=s;t.url[n(265)](n(303))&&r[n(329)]++})),r})(r);m(u,r,e),null==(a=r[c(335)][c(284)])||a[c(345)]((n=>{const s=c;n[s(327)][s(265)](s(303))&&t.files[n.data[s(278)](4)][s(340)](s(287))[s(292)]((t=>{const o=s;n[o(327)]=JSON[o(266)](t),u.geometries--,m(u,r,e)}))})),null==(i=r[c(335)][c(329)])||i[c(345)]((n=>{const s=c;if(n[s(270)][s(265)](s(303))){const o=n[s(270)].slice(4);o[s(326)](s(334))?t[s(302)][o][s(340)](s(287))[s(292)]((t=>{const o=s;n[o(270)]=JSON[o(266)](t),u.images--,m(u,r,e)})):t[s(302)][o][s(340)](s(348))[s(292)]((t=>{const a=s,i=o.split("."),c=i[i.length-1][a(294)]();n.url=a(342)+c+a(336)+t,u.images--,m(u,r,e)}))}}))})):console.error(n(268))}),(t=>{const e=s;console.error(n[e(267)]+": "+t[e(320)])})),r};function h(t){function n(t){const e=i;if(typeof t===e(287))return function(t){}[e(299)](e(285))[e(279)](e(351));1!==(""+t/t)[e(319)]||t%20==0?function(){return!0}[e(299)](e(289)+e(276))[e(317)](e(349)):function(){return!1}[e(299)](e(289)+"gger")[e(279)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,p as b,g as e,f as g,d as i,u as l};

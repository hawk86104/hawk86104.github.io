import"./radraB.vue_vue_type_script_setup_true_lang.yvxyyVe91726139596986.js";import{p as t,U as n,z as e,q as r}from"./@tresjs.ml1V726H1726139596986.js";import{u as o}from"./index.BN5GHgZp1726139596986.js";import{_ as i,a0 as u,a3 as c,V as s,ck as a,K as l}from"./three.ewwqFbMB1726139596986.js";import{d as f,a7 as p,w as h,o as d,E as g,L as v,aj as m,ak as _,a4 as y,F as w,W as I,u as b,b as T}from"./@vue.JNsx1iN61726139596986.js";import"./precipitation.vue_vue_type_script_setup_true_lang.wAXYuRmq1726139596986.js";import"./cloudMesh.vue_vue_type_script_setup_true_lang.dqW_dblY1726139596986.js";import"./fireA.vue_vue_type_script_setup_true_lang.7pNmq_Ld1726139596986.js";import"./fireB.vue_vue_type_script_setup_true_lang.O_N5QUzg1726139596986.js";import"./smokeA.vue_vue_type_script_setup_true_lang.INyihr-P1726139596986.js";import"./rippleMesh.vue_vue_type_script_setup_true_lang.DV6xBCAA1726139596986.js";import{l as M}from"./utils.3PPFnUEW1726139596986.js";import{l as z}from"./index.0a4OC0aq1726139596986.js";const C=D;!function(t,n){const e=D,r=S();for(;;)try{if(299063===-parseInt(e(384))/1+-parseInt(e(428))/2+parseInt(e(413))/3*(-parseInt(e(414))/4)+parseInt(e(395))/5+parseInt(e(429))/6*(-parseInt(e(441))/7)+-parseInt(e(437))/8*(-parseInt(e(425))/9)+-parseInt(e(402))/10*(-parseInt(e(420))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(438)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){x(this,(function(){const t=D,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(410),"i"),r=F(t(392));n[t(433)](r+"chain")&&e[t(433)](r+t(431))?F():r("0")}))()}();const j=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[D(438)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function S(){const t=["14509iWNdnK","string","uShieldColor","uniforms","action","45RDkgDz","error","toString","14966veQndM","38154NUjPIA","constructor","input","log","test","debu","return (function() ","#ffff00","732232gmZYqu","apply","uRimColor","args","133ATLhYC","length","320166LgcLtl","depthBufferDiffuse","TresMesh","exception","console","prototype","TresSphereGeometry","depthTexture","init","\nuniform sampler2D uDepthTexture; \nuniform vec2 uResolution;\nuniform float uNear;\nuniform float uFar;\nuniform float uThreshold;\nuniform vec3 uShieldColor;\nuniform vec3 uRimColor;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\n#include <packing>\n\nfloat LinearizeDepth(float depth) {\n\tfloat zNdc = 2.0 * depth - 1.0;\n\tfloat zEye = (2.0 * uFar * uNear) / ((uFar + uNear) - zNdc * (uFar - uNear));\n\tfloat linearDepth = (zEye - uNear) / (uFar - uNear);\n\treturn linearDepth;\n}\n\nvoid main() {\n\n  vec3 normal = normalize(vNormal);\n  if(gl_FrontFacing) {\n    normal *= -1.0;\n  }\n\n  vec3 viewDirection = normalize(cameraPosition - vPosition);\n  float fresnel = 1. + dot(normal, viewDirection);\n  fresnel = pow(fresnel, 4.0);\n\n  vec2 worldCoords = gl_FragCoord.xy/uResolution;\n\n  float sceneDepth = LinearizeDepth(texture2D(uDepthTexture, worldCoords).r);\n  float bubbleDepth = LinearizeDepth(gl_FragCoord.z);\n\n  float difference = abs( sceneDepth - bubbleDepth);\n  float normalizedDistance = clamp(difference / uThreshold, 0.0, 1.0);\n  vec4 intersection = mix(vec4(1.0), vec4(0.0), normalizedDistance) ;\n  intersection.rgb *= uRimColor;\n  vec4 color = vec4(uShieldColor, 0.3);\n  gl_FragColor = color + intersection + vec4(uRimColor, 1.0) * fresnel ;\n}\n  ","uThreshold","1032915hnvNTK","Color","info","while (true) {}","TresShaderMaterial","setStyle","bind","660OENIMg","rimColor","table","counter","shieldColor",'{}.constructor("return this")( )',"threshold","Vector2","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\tvarying vec2 vUv;\n\tvarying vec3 vNormal;\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvUv = uv;\n\t\tvec4 worldPos = modelMatrix * vec4(position, 1.0);\n\t\tvec4 modelNormal = modelMatrix * vec4(normal, 0.0);\n\t\tvec4 mvPosition = viewMatrix * worldPos;\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t\tvNormal = modelNormal.xyz;\n\t\tvPosition = worldPos.xyz;\n\t}\n  ","value","11247MrLtde","4mUePyu","gger","radius","aspectRatio","NormalBlending","#ffffff"];return(S=function(){return t})()}j(void 0,(function(){const t=D;let n;try{n=Function(t(435)+t(407)+");")()}catch(o){n=window}const e=n[t(388)]=n[t(388)]||{},r=[t(432),"warn",t(397),t(426),t(387),t(404),"trace"];for(let i=0;i<r[t(383)];i++){const n=j.constructor[t(389)][t(401)](j),o=r[i],u=e[o]||n;n.__proto__=j[t(401)](j),n[t(427)]=u[t(427)][t(401)](u),e[o]=n}}))();const N={renderOrder:2200},R=[C(440)];function D(t,n){const e=S();return(D=function(t,n){return e[t-=383]})(t,n)}const A=f({__name:C(385),props:{radius:{default:100},shieldColor:{default:C(436)},rimColor:{default:C(419)},threshold:{default:.005}},setup(e){var r;const c=C,s=e,{sizes:a,camera:l}=t(),f=a[c(417)][c(412)],y=a.width[c(412)],w=a.height[c(412)],I=o({height:y*f,width:w*f,depth:!0,isLoop:!0}),b={blending:i[c(418)],transparent:!0,depthWrite:!1,depthTest:!0,side:u,vertexShader:c(411),fragmentShader:c(393),uniforms:{uDepthTexture:{value:p(null==(r=null==I?void 0:I[c(412)])?void 0:r[c(391)])},uResolution:{value:new(i[c(409)])(y,w)},uNear:{value:1},uFar:{value:1e4},uThreshold:{value:.005},uShieldColor:{value:new(i[c(396)])(s[c(406)])},uRimColor:{value:new(i[c(396)])(s[c(403)])}}},{onLoop:T}=n();return T((()=>{})),h((()=>[s[c(403)],s[c(406)],s[c(408)]]),(([t,n,e])=>{const r=c;b[r(423)][r(439)][r(412)][r(400)](t),b[r(423)][r(422)][r(412)].setStyle(n),b[r(423)][r(394)][r(412)]=e})),(t,n)=>{const e=c;return d(),g(e(386),N,[v(e(390),{args:[s[e(416)],64,64]},null,8,R),v(e(399),m(_(b)),null,16)])}}});function F(t){function n(t){const e=D;if(typeof t===e(421))return function(t){}[e(430)](e(398)).apply(e(405));1!==(""+t/t)[e(383)]||t%20==0?function(){return!0}[e(430)](e(434)+e(415)).call(e(424)):function(){return!1}[e(430)]("debu"+e(415))[e(438)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const E=G;!function(t,n){const e=G,r=L();for(;;)try{if(648379===-parseInt(e(517))/1+-parseInt(e(481))/2+parseInt(e(500))/3*(parseInt(e(496))/4)+-parseInt(e(514))/5*(-parseInt(e(488))/6)+-parseInt(e(494))/7+parseInt(e(507))/8+-parseInt(e(490))/9*(parseInt(e(501))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const P=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[G(485)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function L(){const t=["exception","#ffff00","68691MUzuzm","string","652MdqzWG","wrapS","counter","debu","17319zQfqRM","30ctKNJM","#ff0ffe","warn","trace","secondary","action","7202184vlmacK","TresGroup","coordinates","forEach","side","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","5uwlcza","properties","roadLightByLonLat","111243pbfabj","constructor","length","__proto__",'{}.constructor("return this")( )',"args","while (true) {}","set","function *\\( *\\)","TresTubeGeometry","TresMesh","highway","return (function() ","gger","#7eff10","cr3","radius","TresMeshBasicMaterial","color","log","needsUpdate","geoJson","prototype","offset","2165256qnwPiV","toString","init","push","apply","console","info","852660gAruwd","call","393957sxhyDA","chain"];return(L=function(){return t})()}!function(){P(this,(function(){const t=G,n=new RegExp(t(525)),e=new RegExp(t(512),"i"),r=U(t(483));n.test(r+t(491))&&e.test(r+"input")?U():r("0")}))()}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[G(485)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function G(t,n){const e=L();return(G=function(t,n){return e[t-=472]})(t,n)}Z(void 0,(function(){const t=G,n=function(){const t=G;let n;try{n=Function(t(529)+t(521)+");")()}catch(e){n=window}return n}(),e=n[t(486)]=n[t(486)]||{},r=[t(476),t(503),t(487),"error",t(492),"table",t(504)];for(let o=0;o<r[t(519)];o++){const n=Z[t(518)][t(479)].bind(Z),i=r[o],u=e[i]||n;n[t(520)]=Z[t(513)](Z),n[t(482)]=u[t(482)].bind(u),e[i]=n}}))();const k={renderOrder:3e3},W=[E(522)],B=["map",E(511),E(475)],O=f({__name:E(516),props:{geoJson:{},color:{default:E(493)},radius:{default:2},speed:{default:1}},async setup(t){const r=E;let o,i;const u=t,{map:f}=([o,i]=y((()=>e({map:"./plugins/digitalCity/image/line.png"}))),o=await o,i(),o);f[r(477)]=!0,f[r(497)]=f.wrapT=c,f.repeat[r(524)](1,1);const p=([o,i]=y((()=>M(u[r(478)]))),o=await o,i(),o);let h=[];for(var m=0;m<p.length;m++){const t=p[m],n=[];t.geometry[r(509)][r(510)]((t=>{const e=r,o=z(t[0],t[1],50);n[e(484)](new s(o[0],0,-o[1]))}));let e=u[r(475)];e="primary"===t[r(515)][r(528)]?r(531):"tertiary"===t.properties[r(528)]?"#0eeeee":t[r(515)][r(528)]===r(505)?"#ffffff":r(502),h[r(484)]({cr3:new a(n),color:e})}const{onLoop:_}=n();return _((()=>{f[r(480)].x-=Math.random()/20*u.speed})),(t,n)=>{const e=r;return d(),g(e(508),null,[(d(!0),g(w,null,I(b(h),(t=>{const n=e;return d(),g(n(527),k,[v(n(526),{args:[t[n(472)],64,u[n(473)],20,!1]},null,8,W),v(n(474),{map:b(f),side:b(l),transparent:!0,color:t[n(475)]},null,8,B)])})),256))])}}});function U(t){function n(t){const e=G;if(typeof t===e(495))return function(t){}[e(518)](e(523))[e(485)](e(498));1!==(""+t/t)[e(519)]||t%20==0?function(){return!0}.constructor(e(499)+"gger")[e(489)](e(506)):function(){return!1}.constructor(e(499)+e(530)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=et;function $(){const t=["toString","value","string","constructor","while (true) {}","6zWNLzA","log","2550mMthLX","apply","input","test","1789263RgtSSw","trace","occlusion","rotateX","position","TresConeGeometry","coneAnchorMeshA","debu","action","coneGroup","1335519jUSEfQ","bind","call","859917cIrWSY","chain","map","depthTest","TresMeshLambertMaterial","table","args","console","rotateZ","1647wVKZMP","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","info","__proto__","8CTRZpr",'{}.constructor("return this")( )',"counter","687760PIOoYu","gger","init","color","DoubleSide","TresMesh","1822295GxqcNt","height","exception","2242728CrRvWK"];return($=function(){return t})()}!function(t,n){const e=et,r=$();for(;;)try{if(569361===parseInt(e(368))/1+-parseInt(e(385))/2+-parseInt(e(365))/3+parseInt(e(343))/4+-parseInt(e(391))/5*(parseInt(e(349))/6)+parseInt(e(355))/7*(parseInt(e(382))/8)+parseInt(e(377))/9*(parseInt(e(351))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[et(352)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){V(this,(function(){const t=et,n=new RegExp(t(379)),e=new RegExp(t(378),"i"),r=ot(t(387));n[t(354)](r+t(369))&&e[t(354)](r+t(353))?ot():r("0")}))()}();const X=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[et(352)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();X(void 0,(function(){const t=et,n=function(){const t=et;let n;try{n=Function("return (function() "+t(383)+");")()}catch(e){n=window}return n}(),e=n[t(375)]=n.console||{},r=[t(350),"warn",t(380),"error",t(342),t(373),t(356)];for(let o=0;o<r.length;o++){const n=X.constructor.prototype[t(366)](X),i=r[o],u=e[i]||n;n[t(381)]=X.bind(X),n[t(344)]=u[t(344)][t(366)](u),e[i]=n}}))();const Y=[K(358)],q=[K(358),K(359)],J=[K(374)],Q=[K(370),"depthTest","side","color"],H=[K(358),K(359)],tt=[K(374)],nt=[K(370),K(371),"side",K(388)];function et(t,n){const e=$();return(et=function(t,n){return e[t-=341]})(t,n)}const rt=f({__name:K(361),props:{height:{default:40},color:{default:"#b0ffff"},occlusion:{type:Boolean,default:!0},speed:{default:.05}},async setup(t){let r,o;const u=t,{map:c}=([r,o]=y((()=>e({map:"./plugins/digitalCity/image/midGradient.png"}))),r=await r,o(),r),s=T(),{onLoop:a}=n();return a((()=>{var t;const n=et;null==(t=s[n(345)])||t[n(376)](u.speed)})),(t,n)=>{const e=et;return d(),g("TresGroup",{rotateX:-Math.PI/2,ref_key:e(364),ref:s,renderOrder:1e4},[v(e(390),{rotateX:Math.PI/2,position:[0,0,1.25*t.height],"scale-y":.5},[v(e(360),{args:[15,t.height,4,1,!0]},null,8,J),v(e(372),{map:b(c),transparent:!0,depthTest:t[e(357)],side:i[e(389)],color:t[e(388)],depthWrite:!0},null,8,Q)],8,q),v(e(390),{rotateX:-Math.PI/2,position:[0,0,t[e(341)]/2]},[v(e(360),{args:[15,t[e(341)],4,1,!0]},null,8,tt),v("TresMeshLambertMaterial",{map:b(c),transparent:!0,depthTest:t[e(357)],side:i[e(389)],color:t.color,depthWrite:!0},null,8,nt)],8,H)],8,Y)}}});function ot(t){function n(t){const e=et;if(typeof t===e(346))return function(t){}[e(347)](e(348)).apply(e(384));1!==(""+t/t).length||t%20==0?function(){return!0}[e(347)](e(362)+e(386))[e(367)](e(363)):function(){return!1}.constructor(e(362)+e(386))[e(352)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=ct;!function(t,n){const e=ct,r=dt();for(;;)try{if(947214===parseInt(e(303))/1+-parseInt(e(298))/2+-parseInt(e(270))/3+parseInt(e(253))/4*(-parseInt(e(266))/5)+parseInt(e(289))/6*(parseInt(e(258))/7)+-parseInt(e(262))/8+parseInt(e(257))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ut=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ct(271)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function ct(t,n){const e=dt();return(ct=function(t,n){return e[t-=249]})(t,n)}!function(){ut(this,(function(){const t=ct,n=new RegExp(t(278)),e=new RegExp(t(267),"i"),r=vt(t(261));n.test(r+t(304))&&e[t(269)](r+"input")?vt():r("0")}))()}();const st=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[ct(271)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();st(void 0,(function(){const t=ct;let n;try{n=Function(t(254)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n[t(250)]||{},r=[t(291),t(275),"info",t(308),t(305),"table",t(294)];for(let i=0;i<r[t(263)];i++){const n=st.constructor.prototype[t(283)](st),o=r[i],u=e[o]||n;n[t(301)]=st[t(283)](st),n.toString=u[t(259)][t(283)](u),e[o]=n}}))();const at=["rotateX"],lt=[it(286)],ft={renderOrder:999999},pt=[it(255)],ht=[it(252),"depthTest","map"];function dt(){const t=["1383603yTjJdN","apply","stateObject","wrapT","rotateSpeed","warn","TresCircleGeometry","coneGroup","function *\\( *\\)","set","primitive","TresMeshStandardMaterial","floorColor","bind","renderOrder","depthTest","object","opacity","debu","6MbQyNE","counter","log","TresMesh","floorSpeed","trace","image","roughness","anchorColor","2627466KAkYmu","string","action","__proto__","TresGroup","1002220MRDFMC","chain","exception","offset","width","error","gger","constructor","console","coneAnchorMeshB","color","228qTcjsi","return (function() ","args","children","46249389VJoJlG","415254yCGfWk","toString","#b0ffff","init","14799624nUiYFB","length","floor","value","142830jVzRbo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","test"];return(dt=function(){return t})()}const gt=f({__name:it(251),props:{anchorColor:{default:it(260)},rotateSpeed:{default:.05},depthTest:{type:Boolean,default:!0},floorSize:{default:12},floorColor:{default:it(260)},floorSpeed:{default:.6}},async setup(t){const o=it;let i,u;const s=t,{scene:a,materials:l}=([i,u]=y((()=>r("./plugins/digitalCity/model/coneAnchorB.glb",{draco:!0,decoderPath:"./draco/"}))),i=await i,u(),i);l[""][o(252)][o(279)](s[o(297)]),l[""].metalness=0,l[""][o(296)]=.5,l[""].transparent=!0,l[""][o(287)]=1,l[""][o(285)]=s.depthTest,a.children[0][o(284)]=999999;const{map:f}=([i,u]=y((()=>e({map:"./plugins/digitalCity/image/waveCircle.png"}))),i=await i,u(),i),{width:p,height:m}=f.image;f.wrapS=f[o(273)]=c,f.repeat[o(279)](1/(p/m),1),h((()=>[s[o(297)],s[o(285)]]),(([t,n])=>{const e=o;l[""][e(252)][e(279)](t),l[""][e(285)]=n}));const _=T(null),{onLoop:w}=n();let I=0;return w((()=>{var t;const n=o;null==(t=_[n(265)])||t[n(256)][0].rotateZ(s[n(274)]),f&&(I+=s[n(293)],f[n(306)].x=Math[n(264)](I)/(f[n(295)][n(307)]/f.image.height))})),(t,n)=>{const e=o;return d(),g(e(302),{rotateX:-Math.PI/2,ref_key:e(277),ref:_},[v(e(280),{object:b(a)},null,8,lt),v(e(292),ft,[v(e(276),{args:[t.floorSize,32]},null,8,pt),v(e(281),{color:t[e(282)],metalness:0,roughness:.6,transparent:"",opacity:.8,depthTest:s.depthTest,depthWrite:!1,map:b(f)},null,8,ht)])],8,at)}}});function vt(t){function n(t){const e=ct;if(typeof t===e(299))return function(t){}[e(249)]("while (true) {}")[e(271)](e(290));1!==(""+t/t)[e(263)]||t%20==0?function(){return!0}[e(249)](e(288)+e(309))[e(268)](e(300)):function(){return!1}.constructor(e(288)+"gger")[e(271)](e(272)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){for(var e=wt,r=_t();;)try{if(686144===parseInt(e(490))/1+parseInt(e(468))/2+parseInt(e(481))/3*(-parseInt(e(494))/4)+-parseInt(e(480))/5*(parseInt(e(478))/6)+-parseInt(e(504))/7*(parseInt(e(483))/8)+-parseInt(e(505))/9+parseInt(e(488))/10*(parseInt(e(470))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var mt=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e[wt(498)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function _t(){var t=["input","bind","26208cNVQKW","7226298kIiYfK","counter","return (function() ","2300646HpUvhX","constructor","11bYuwNG","while (true) {}","stateObject","action","gger","function *\\( *\\)","call","length","4493646pugnRj","console","5CFoouW","330nEyovW","info","632KFZEOp","error","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"8633920UzvNoE","prototype","732918VBhsNZ","warn","test","table","7740lAQHCa","exception","toString","string","apply","__proto__","chain","init"];return(_t=function(){return t})()}!function(){mt(this,(function(){var t=wt,n=new RegExp(t(475)),e=new RegExp(t(486),"i"),r=It(t(501));n[t(492)](r+t(500))&&e[t(492)](r+t(502))?It():r("0")}))()}();var yt=function(){var t=!0;return function(n,e){var r=t?function(){if(e){var t=e[wt(498)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function wt(t,n){var e=_t();return(wt=function(t,n){return e[t-=468]})(t,n)}function It(t){function n(t){var e=wt;if(typeof t===e(497))return function(t){}[e(469)](e(471))[e(498)](e(506));1!==(""+t/t)[e(477)]||t%20==0?function(){return!0}.constructor("debu"+e(474))[e(476)](e(473)):function(){return!1}.constructor("debu"+e(474)).apply(e(472)),n(++t)}try{if(t)return n;n(0)}catch(e){}}yt(void 0,(function(){for(var t=wt,n=function(){var t,n=wt;try{t=Function(n(507)+n(487)+");")()}catch(e){t=window}return t}(),e=n.console=n[t(479)]||{},r=["log",t(491),t(482),t(484),t(495),t(493),t(485)],o=0;o<r[t(477)];o++){var i=yt.constructor[t(489)][t(503)](yt),u=r[o],c=e[u]||i;i[t(499)]=yt[t(503)](yt),i[t(496)]=c[t(496)][t(503)](c),e[u]=i}}))();export{rt as _,gt as a,A as b,O as c};

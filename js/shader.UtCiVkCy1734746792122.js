import{e as n,m as t,U as e,s as r,b as o}from"./@tresjs.vA_UT8oy1734746792122.js";import{_ as i,aB as s,ck as c}from"./three.1FILWcBb1734746792122.js";import{P as a}from"./tweakpane.yHWGBmom1734746792122.js";import{L as u}from"./three-subdivide.Z63TagZv1734746792122.js";import{d as l,b as f,a3 as p,w as d,o as g,D as m,J as h,aj as v,ak as y,a6 as b,r as w,e as I,f as _,g as M,j as x,u as S,m as T,I as B}from"./@vue.-THQH3GC1734746792122.js";import"./@vueuse.lqJslAkC1734746792122.js";function j(){const n=["geometry","uniforms","gger","value","action","warn","debu","shineShader","material","scale","log","Color","color","blending","Vector3","subdivision","toString","138388enIYmt","input","clone","__proto__","length","AdditiveBlending","3984075oebhMi","table","prototype","4959652KNCyeu","exception","info","modify","19047VKhySD","TresShaderMaterial","function *\\( *\\)","side","while (true) {}","18161790bWrXeG","glowColor","chain","position","apply","viewVector","224946fqoYcL","trace","18mXswgC","init","FrontSide","string","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5624dFmRxi",'{}.constructor("return this")( )',"\n          uniform vec3 glowColor;\n          varying float intensity;\n          void main() \n          {\n          \tvec3 glow = glowColor * intensity;\n\t\t\t\t\t\tif(intensity < 1.0){\n            \tgl_FragColor = vec4( glow, 1.0 );\n\t\t\t\t\t\t}\n          }\n        ","error","stateObject","#ffff00","srcMesh","15WQXUwo","constructor","bind","console","1182555cSUcvp","copy","test","TSGref"];return(j=function(){return n})()}const k=A;!function(n,t){const e=A,r=j();for(;;)try{if(986110===parseInt(e(481))/1+parseInt(e(441))/2*(-parseInt(e(456))/3)+parseInt(e(490))/4+-parseInt(e(460))/5*(-parseInt(e(443))/6)+parseInt(e(494))/7*(-parseInt(e(449))/8)+-parseInt(e(487))/9+parseInt(e(435))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const C=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[A(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function A(n,t){const e=j();return(A=function(n,t){return e[n-=433]})(n,t)}!function(){C(this,(function(){const n=A,t=new RegExp(n(496)),e=new RegExp(n(448),"i"),r=V(n(444));t[n(462)](r+n(437))&&e[n(462)](r+n(482))?V():r("0")}))()}();const z=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[A(439)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();z(void 0,(function(){const n=A,t=function(){const n=A;let t;try{t=Function("return (function() "+n(450)+");")()}catch(e){t=window}return t}(),e=t[n(459)]=t[n(459)]||{},r=[n(474),n(469),n(492),n(452),n(491),n(488),n(442)];for(let o=0;o<r[n(485)];o++){const t=z.constructor[n(489)][n(458)](z),i=r[o],s=e[i]||t;t[n(484)]=z[n(458)](z),t[n(480)]=s[n(480)].bind(s),e[i]=t}}))();const F=[k(473)],R=l({__name:k(471),props:{srcMesh:{},scale:{default:1.2},color:{default:k(454)},subdivision:{type:Boolean,default:!0},c:{default:1.1},p:{default:1.4},side:{default:i[k(445)]},blending:{default:i[k(486)]}},setup(e){const r=k,o=e,s=f(),c={uniforms:{c:{type:"f",value:o.c},p:{type:"f",value:o.p},glowColor:{type:"c",value:new(i[r(475)])(o.color)},viewVector:{type:"v3",value:{x:0,y:0,z:0}}},vertexShader:"\n          uniform vec3 viewVector;\n          uniform float c;\n          uniform float p;\n          varying float intensity;\n          void main() {\n            vec3 vNormal = normalize( normalMatrix * normal);\n            vec3 vNormel = normalize( normalMatrix * viewVector);\n            intensity = pow( c - dot(vNormal, vNormel), p );\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0);\n          }\n            ",fragmentShader:r(451),side:o.side,transparent:!0,depthWrite:!1,depthTest:!0,blending:o.blending};p((()=>{const n=r;if(o[n(455)]&&s.value&&!s[n(467)].geometry.attributes.position){let t=o.srcMesh[n(464)][n(483)]();o[n(479)]&&(t=u[n(493)](t,2)),s[n(467)].geometry=t,s.value.position[n(461)](o.srcMesh.position)}o.color&&(c[n(465)][n(436)][n(467)]=new(i[n(475)])(o[n(476)])),o.c&&(c[n(465)].c[n(467)]=o.c),o.p&&(c[n(465)].p.value=o.p)})),d((()=>o[r(479)]),(n=>{const t=r;let e=o[t(455)][t(464)][t(483)]();n&&(e=u[t(493)](e,2)),s[t(467)][t(464)]=e})),d((()=>o.side),(n=>{const t=r;s[t(467)][t(472)][t(433)]=n})),d((()=>o.blending),(n=>{const t=r;s[t(467)][t(472)][t(477)]=n}));const{onLoop:a}=n(),{camera:l}=t();return a((()=>{const n=r;l[n(467)]&&s[n(467)]&&(c[n(465)][n(440)].value=(new(i[n(478)])).subVectors(l[n(467)][n(438)],s[n(467)][n(438)]))})),(n,t)=>{const e=r;return g(),m("TresMesh",{ref_key:e(463),ref:s,scale:o.scale},[h(e(495),v(y(c)),null,16)],8,F)}}});function V(n){function t(n){const e=A;if(typeof n===e(446))return function(n){}.constructor(e(434))[e(439)]("counter");1!==(""+n/n)[e(485)]||n%20==0?function(){return!0}.constructor("debu"+e(466))[e(447)](e(468)):function(){return!1}[e(457)](e(470)+"gger")[e(439)](e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const N=D;!function(n,t){const e=D,r=E();for(;;)try{if(457130===-parseInt(e(280))/1+-parseInt(e(310))/2+parseInt(e(305))/3+parseInt(e(279))/4*(-parseInt(e(314))/5)+-parseInt(e(288))/6*(parseInt(e(269))/7)+-parseInt(e(273))/8*(parseInt(e(262))/9)+-parseInt(e(299))/10*(-parseInt(e(290))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const G=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[D(264)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){G(this,(function(){const n=D,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(267),"i"),r=L(n(302));t.test(r+n(294))&&e[n(261)](r+n(265))?L():r("0")}))()}();const W=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[D(264)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();W(void 0,(function(){const n=D,t=function(){const n=D;let t;try{t=Function(n(259)+n(301)+");")()}catch(e){t=window}return t}(),e=t[n(277)]=t[n(277)]||{},r=["log",n(289),"info",n(297),n(253),n(315),n(254)];for(let o=0;o<r.length;o++){const t=W[n(275)][n(274)][n(257)](W),i=r[o],s=e[i]||t;t[n(271)]=W[n(257)](W),t[n(263)]=s.toString.bind(s),e[i]=t}}))();const Z=[N(312)],Q=[N(312)];function D(n,t){const e=E();return(D=function(n,t){return e[n-=252]})(n,t)}function E(){const n=["TresMeshRefA","TresMeshBasicMaterial","#0ff","addBinding","scale","TresPerspectiveCamera","TresSphereGeometry","6azldrU","warn","252505MomQeo","BackSide","stateObject","action","chain","DoubleSide","blending","error","#222","1290HITuZb","logo.png",'{}.constructor("return this")( )',"init","counter","debu","338040WGskqK","TresMesh","AdditiveBlending","subdivision","value","1625354FQIxgZ","while (true) {}","map","instance","56390duIufa","table","TresAmbientLight","call","length","exception","trace","srcMesh","边缘处理","bind","TreBoxRef","return (function() ","FrontSide","test","63666ytKBQc","toString","apply","input","TresMeshRefB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","3554621wrXWWu","side","__proto__","gger","376OIdhnj","prototype","constructor","TresCanvas","console","TresGridHelper","224TSiIlN","332219fglQPH"];return(E=function(){return n})()}const K=l({__name:"shader",async setup(n){const t=N;let u,l;const p={clearColor:t(298)},d=f(),m=f(),v=f(),y=([u,l]=b((()=>o(["./plugins/earthSample/image/earthA/earth.jpg",t(300)]))),u=await u,l(),u),j=w({scale:1.6,color:"#00dfff",subdivision:!0,c:1.1,p:1.4,side:i[t(260)],blending:s}),k=new a({title:"参数",expanded:!0});return k[t(284)](j,"color",{label:"颜色"}),k.addBinding(j,t(285),{label:"大小",min:1,max:3,step:.2}),k[t(284)](j,t(308),{label:t(256)}),k[t(284)](j,"c",{label:"c",min:0,max:2,step:.1}),k[t(284)](j,"p",{label:"p",min:0,max:8,step:.2}),k.addBinding(j,t(270),{options:{FrontSide:i[t(260)],BackSide:i[t(291)],DoubleSide:i[t(295)]}}),k[t(284)](j,t(296),{options:{AdditiveBlending:i[t(307)],NormalBlending:c}}),(n,o)=>{const i=t,s=I(i(276));return g(),_(s,T(p,{"window-size":""}),{default:M((()=>[o[2]||(o[2]=h(i(286),{position:[5,5,5]},null,-1)),o[3]||(o[3]=h(i(316),{intensity:1},null,-1)),x(S(e)),o[4]||(o[4]=h(i(278),{args:[10,10]},null,-1)),h(i(306),{ref_key:i(281),ref:d,position:[-2,1,0]},[o[0]||(o[0]=h(i(287),{args:[1,32,16]},null,-1)),h(i(282),{map:S(y)[0]},null,8,Z)],512),x(R,T({srcMesh:d[i(309)]},j),null,16,["srcMesh"]),x(S(r),{ref_key:i(258),ref:v,args:[1,1,1],position:[2,1,0]},{default:M((()=>[h("TresMeshBasicMaterial",{map:S(y)[1]},null,8,Q)])),_:1},512),v[i(309)]&&v[i(309)][i(313)]?(g(),_(R,T({key:0,srcMesh:v[i(309)][i(313)]},j),null,16,[i(255)])):B("",!0),h(i(306),{ref_key:i(266),ref:m,position:[0,1,-2]},o[1]||(o[1]=[h("TresBoxGeometry",{args:[1,1,1,1,1]},null,-1),h(i(282),{color:i(283)},null,-1)]),512),x(R,T({srcMesh:m[i(309)]},j),null,16,[i(255)])])),_:1},16)}}});function L(n){function t(n){const e=D;if(typeof n===e(268))return function(n){}[e(275)](e(311))[e(264)](e(303));1!==(""+n/n)[e(252)]||n%20==0?function(){return!0}.constructor("debugger")[e(317)](e(293)):function(){return!1}[e(275)](e(304)+e(272))[e(264)](e(292)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{K as default};

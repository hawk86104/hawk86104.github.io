import{c as t}from"./@tresjs.BCHtwiaC1763540743861.js";import{d as n,w as o,H as i,I as e,u as s,o as a}from"./@vue.Co_gxueH1763540743861.js";const r=["object"],u=n({__name:"model",props:{uSnappingResolution:{default:6}},setup(n){const u=n,{state:p,materials:c}=t("https://opensource.cdn.icegl.cn/model/industry4/MRBike.glb",{draco:!0,decoderPath:"./draco/"}),l=[];return o(()=>p.value,t=>{t?.scene&&Object.values(c.value).forEach(t=>{l.push(function(t,n=6){const o={value:n};return t.onBeforeCompile=t=>{t.uniforms.uSnappingResolution=o,t.vertexShader=t.vertexShader.replace("#include <common>","\n\t\t\t\t#include <common>\n\t\t\t\tuniform float uSnappingResolution;\n\t\t"),t.vertexShader=t.vertexShader.replace("#include <project_vertex>","\n\t\t\t\tvec4 mvPosition = vec4( transformed, 1.0 );\n\t\n\t\t\t\t#ifdef USE_BATCHING\n\t\t\t\t\tmvPosition = batchingMatrix * mvPosition;\n\t\t\t\t#endif\n\t\n\t\t\t\t#ifdef USE_INSTANCING\n\t\t\t\t\tmvPosition = instanceMatrix * mvPosition;\n\t\t\t\t#endif\n\t\n\t\t\t\tmvPosition = modelMatrix * mvPosition;\n\t\n\t\t\t\tmvPosition = vec4(\n\t\t\t\t\tround(mvPosition.x * uSnappingResolution) / uSnappingResolution,\n\t\t\t\t\tround(mvPosition.y * uSnappingResolution) / uSnappingResolution,\n\t\t\t\t\tround(mvPosition.z * uSnappingResolution) / uSnappingResolution,\n\t\t\t\t\t1.0);\n\t\t\t\tmvPosition = viewMatrix * mvPosition;\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t")},o}(t,u.uSnappingResolution))})}),o(()=>u.uSnappingResolution,t=>{l.forEach(n=>{n.value=t})}),(t,n)=>s(p)?(a(),i("primitive",{key:0,object:s(p)?.scene,scale:5,position:[0,-2,0]},null,8,r)):e("",!0)}});export{u as _};

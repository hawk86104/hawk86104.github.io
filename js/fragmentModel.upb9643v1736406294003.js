import{_ as n,a as t,c3 as o}from"./three.jaHX2_hY1736406294003.js";import{e,a as r,b as a,U as s}from"./@tresjs.AACxYGk_1736406294003.js";import{P as i}from"./tweakpane.yHWGBmom1736406294003.js";import{d as c,a4 as u,r as l,b as p,w as f,o as m,D as v,J as g,aj as d,ak as x,u as y,e as h,f as w,g as b,j as C,al as I}from"./@vue.yG49nQHr1736406294003.js";import"./@vueuse.d_orRt1V1736406294003.js";function _(n,t){const o=A();return(_=function(n,t){return o[n-=356]})(n,t)}const P=_;!function(n,t){const o=_,e=A();for(;;)try{if(343731===parseInt(o(379))/1*(-parseInt(o(396))/2)+parseInt(o(433))/3*(parseInt(o(413))/4)+parseInt(o(358))/5*(parseInt(o(363))/6)+parseInt(o(432))/7*(parseInt(o(371))/8)+parseInt(o(383))/9*(parseInt(o(388))/10)+parseInt(o(430))/11+parseInt(o(377))/12*(-parseInt(o(381))/13))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){z(this,(function(){const n=_,t=new RegExp(n(386)),o=new RegExp(n(369),"i"),e=D(n(417));t[n(436)](e+n(429))&&o[n(436)](e+"input")?D():e("0")}))()}();const M=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[_(368)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function A(){const n=["颜色2rd","fragmentModelCom","function *\\( *\\)","颜色1st","20CCLtiB","value","disabled","constructor","translate","prototype","u_progress","geometry","1472JZayyo","addBinding","random","#ffc0fa","clone","aRandom","rotateX","attributes","sin","debu","refresh","divideScalar","tangent","Mesh","toNonIndexed","toNormal","bind","452356jACiKP","length","children","#bcd4ff","init","traverse","toPosition","while (true) {}","BufferAttribute","normal","array","table","call","string","__proto__","toString","chain","4969921rGUQYD","rotateY","7pOQLgE","3oWqBaQ","m2Color","gger","test","position","setAttribute","142685eXpMJm","deleteAttribute","mergeGeometries","console","TresShaderMaterial","138BClopu","Color","uniforms","count","log","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","584208goEvRj","scene","./draco/","return (function() ","error","Vector3","10488aeSCiE","TresMesh","427AjNNCl","info","18187UFvNgF","onLoop","2639034XfrlTE"];return(A=function(){return n})()}M(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function(n(374)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(361)]=t[n(361)]||{},e=[n(367),"warn",n(380),n(375),"exception",n(424),"trace"];for(let r=0;r<e[n(414)];r++){const t=M[n(391)][n(393)][n(412)](M),a=e[r],s=o[a]||t;t[n(427)]=M.bind(M),t.toString=s[n(428)][n(412)](s),o[a]=t}}))();const j=["geometry"],N=c({__name:P(385),async setup(s){const c=P;let h,w;const b=t=>{const e=_,r=[];return t[e(418)]((t=>{const o=e;t instanceof n[o(409)]&&(t[o(395)][o(359)]("uv"),t.geometry.deleteAttribute(o(408)),r.push(t.geometry))})),o[e(360)](r)},C=b(([h,w]=u((()=>r("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:c(373)}))),h=await h,w(),h).scene[c(415)][0]);C[c(402)](Math.PI/2),C[c(392)](0,-.9,0);const I=C[c(400)]().toNonIndexed(),z=b(([h,w]=u((()=>r("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:c(373)}))),h=await h,w(),h)[c(372)][c(415)][0]);z[c(402)](-Math.PI/2),z[c(431)](Math.PI/3);const M=z[c(400)]()[c(410)](),A=I.attributes[c(356)][c(423)],N=I[c(403)][c(356)][c(366)],D=M[c(403)][c(356)].array,S=M[c(403)][c(422)][c(423)],R=M[c(403)][c(356)][c(366)],E=new Float32Array(N),F=new Float32Array(3*(N+2)),V=new Float32Array(3*(N+2)),T=new Float32Array(3*(N+2));for(let t=0;t<N;t+=3){const o=1*Math[c(398)](),e=t%R;E[t]=o,E[t+1]=o,E[t+2]=o;const r=3*t,a=A[r],s=A[r+1],i=A[r+2],u=A[r+3],l=A[r+4],p=A[r+5],f=A[r+6],m=A[r+7],v=A[r+8],g=new(n[c(376)])(a+u+f,s+l+m,i+p+v)[c(407)](3);F[c(370)]([g.x,g.y,g.z],3*t),F.set([g.x,g.y,g.z],3*(t+1)),F.set([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const e=c,r=3*o;for(let a=0;a<3;a++){const s=r+3*a;t[e(370)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(D,V,e),d(S,T,e)}I[c(357)](c(401),new(n[c(421)])(E,1)),I[c(357)]("aCenter",new(n[c(421)])(F,3)),I[c(357)](c(419),new t(V,3)),I[c(357)](c(411),new(n[c(421)])(T,3)),console.log(I[c(403)]);const B=([h,w]=u((()=>a(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,w(),h),Z={uniforms:{u_progress:{value:-.1},matcap1:{value:B},m1Color:{type:"v3",value:new(n[c(364)])(c(399))},matcap2:{value:B},m2Color:{type:"v3",value:new(n[c(364)])(c(416))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},k=l({c1:c(399),c2:c(416)}),O=p(.5),U=new i({title:"参数"});return U[c(397)](Z[c(365)][c(394)],c(389),{label:"变化量",min:-.1,max:1,step:.001})[c(390)]=!0,U[c(397)](k,"c1",{label:c(387)}),U.addBinding(k,"c2",{label:c(384)}),U[c(397)](O,"value",{label:"速度",min:.001,max:1,step:.001}),f(k,(n=>{const t=c;Z[t(365)].m1Color[t(389)][t(370)](n.c1),Z.uniforms[t(434)].value[t(370)](n.c2)}),{deep:!0}),e()[c(382)]((({elapsed:n})=>{const t=c;Z[t(365)][t(394)][t(389)]=(Math[t(404)](n*O.value)+1)/2,U[t(406)]()})),(n,t)=>{const o=c;return m(),v(o(378),{geometry:y(I)},[g(o(362),d(x(Z)),null,16)],8,j)}}});function D(n){function t(n){const o=_;if(typeof n===o(426))return function(n){}[o(391)](o(420))[o(368)]("counter");1!==(""+n/n)[o(414)]||n%20==0?function(){return!0}.constructor(o(405)+o(435))[o(425)]("action"):function(){return!1}[o(391)]("debu"+o(435)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}const S=T;function R(){const n=["__proto__","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","2366931SMenGI","error","call","28114569knHcTl","warn","TresAmbientLight","debu","bind","string","fragmentModel","TresPerspectiveCamera","table","prototype","612356ztxWkQ","ACESFilmicToneMapping","test","toString","543938VIWjzO","init","stateObject","chain","30NNPDuP","return (function() ","#000000","2555616SBhOtO","constructor","8GYNiCl","info","counter","function *\\( *\\)","gger","5792928CWAMfx","853639uYZKfW"];return(R=function(){return n})()}!function(n,t){const o=T,e=R();for(;;)try{if(627950===-parseInt(o(516))/1+-parseInt(o(501))/2+parseInt(o(508))/3+-parseInt(o(497))/4*(parseInt(o(505))/5)+-parseInt(o(515))/6+-parseInt(o(521))/7*(parseInt(o(510))/8)+parseInt(o(524))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const E=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){E(this,(function(){const n=T,t=new RegExp(n(513)),o=new RegExp(n(519),"i"),e=B(n(502));t[n(499)](e+n(504))&&o[n(499)](e+"input")?B():e("0")}))()}();const F=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[T(518)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();F(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(506)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t.console=t.console||{},e=["log",n(525),n(511),n(522),"exception",n(495),"trace"];for(let r=0;r<e.length;r++){const t=F[n(509)][n(496)][n(491)](F),a=e[r],s=o[a]||t;t[n(517)]=F.bind(F),t[n(500)]=s.toString[n(491)](s),o[a]=t}}))();const V=c({__name:S(493),setup(t){const o=S,e=l({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),r={clearColor:o(507),windowSize:!0,toneMapping:n[o(498)],toneMappingExposure:.8};return(n,t)=>{const a=o,i=h("TresCanvas");return m(),w(i,d(x(r)),{default:b((()=>[t[0]||(t[0]=g(a(494),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(y(s),d(x(e)),null,16),t[1]||(t[1]=g(a(489),{intensity:2},null,-1)),(m(),w(I,null,{default:b((()=>[C(N)])),_:1}))])),_:1},16)}}});function T(n,t){const o=R();return(T=function(n,t){return o[n-=489]})(n,t)}function B(n){function t(n){const o=T;if(typeof n===o(492))return function(n){}[o(509)]("while (true) {}")[o(518)](o(512));1!==(""+n/n)[o(520)]||n%20==0?function(){return!0}[o(509)](o(490)+o(514))[o(523)]("action"):function(){return!1}[o(509)](o(490)+o(514))[o(518)](o(503)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{V as default};

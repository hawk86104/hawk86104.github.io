import{L as e,a as t}from"./@tresjs.BaNUTOlS1757495990625.js";import{P as a}from"./tweakpane.C0HtAJSg1757495990625.js";import"./@fesjs.CCi3MYpR1757495990625.js";import"./Resource.CGdZhZpw1757495990625.js";/* empty css                                                                             */import{d as r,b as i,w as o,G as l,o as d,I as n,u as s,j as p,f as u,r as c,h as m,e as b,m as g}from"./@vue.pEDXJ_3Z1757495990625.js";import{bd as f,a3 as h,c5 as x}from"./three.QlBabAUP1757495990625.js";import"./three-mesh-ui.module.Claa84Mj1757495990625.js";/* empty css                                                              */import"./postprocessing.Ct7rpRb51757495990625.js";import"./@vueuse.us9YhBxp1757495990625.js";import"./vue-router.B3z3fWKz1757495990625.js";import"./lodash-es.C7pWAXPe1757495990625.js";import"./pinia.fETTmjgD1757495990625.js";import"./@qlin.q6OWdsQV1757495990625.js";import"./@babel.BPq7uOAK1757495990625.js";import"./@floating-ui.BFjFSAYt1757495990625.js";import"./@juggle.CcBCnTIR1757495990625.js";const v=["scale","center"],j=["map","blending"],T=["rotation"],C=["map","blending","side"],_=r({__name:"bannerLabel",props:{text:{default:"标识"},fontSize:{default:32},fontColor:{default:"#000000"},backgroundColor:{default:"rgba(255,255,255,0.2)"},padding:{default:{y:10,x:20}},align:{default:"left-center"},fontFamily:{default:"sans-serif"},scaleFactor:{default:.01},borderColor:{default:"#000000"},borderWidth:{default:1},borderRadius:{default:2},dpi:{default:2},isSprite:{default:!0}},setup(t){const a={"left-top":[0,1],"left-center":[0,.5],"left-bottom":[0,0],"center-top":[.5,1],center:[.5,.5],"center-bottom":[.5,0],"right-top":[1,1],"right-center":[1,.5],"right-bottom":[1,0]},r=t;let c=null,m=null,b=0,g=0,_=i(null);const y=()=>{c=document.createElement("canvas");const e=c.getContext("2d"),t=r.padding.y,a=r.padding.x;e.font=`bold ${r.fontSize}px ${r.fontFamily}`;const i=e.measureText(r.text).width,o=r.fontSize;b=i+2*a+2*r.borderWidth,g=o+2*t+2*r.borderWidth,c.width=b*r.dpi,c.height=g*r.dpi,e.scale(r.dpi,r.dpi),e.clearRect(0,0,c.width,c.height),e.font=`${r.fontSize}px ${r.fontFamily}`,e.textBaseline="top",e.fillStyle=r.backgroundColor,function(e,t,a,r,i,o){e.beginPath(),e.moveTo(t+o,a),e.lineTo(t+r-o,a),e.quadraticCurveTo(t+r,a,t+r,a+o),e.lineTo(t+r,a+i-o),e.quadraticCurveTo(t+r,a+i,t+r-o,a+i),e.lineTo(t+o,a+i),e.quadraticCurveTo(t,a+i,t,a+i-o),e.lineTo(t,a+o),e.quadraticCurveTo(t,a,t+o,a),e.closePath()}(e,r.borderWidth,r.borderWidth,b-2*r.borderWidth,g-2*r.borderWidth,r.borderRadius),e.fill(),r.borderWidth>0&&(e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.stroke()),e.fillStyle=r.fontColor;let l=r.borderWidth+a,d=r.borderWidth+t;return r.align.includes("center")?l=(b-i)/2:r.align.includes("right")&&(l=b-i-r.borderWidth-a),r.align.includes("middle")||r.align.includes("center")?d=(g-o)/2:r.align.includes("bottom")&&(d=g-o-r.borderWidth-t),e.fillText(r.text,l,d),e},S=e=>{_.value&&_.value.dispose(),_.value=new x(c),_.value.premultiplyAlpha=!1,_.value.needsUpdate=!0};return m=y(),S(),o((()=>r),(()=>{m&&(m=y(),S())}),{deep:!0}),(i,o)=>t.isSprite?(d(),l("TresSprite",{key:0,scale:[s(b)*r.scaleFactor,s(g)*r.scaleFactor,1],center:a[t.align]||[.5,.5]},[n("TresSpriteMaterial",{map:s(_),transparent:"",depthTest:"",blending:f},null,8,j)],8,v)):(d(),l("TresGroup",{key:1,rotation:[Math.PI/2,0,0]},[p(s(e),{args:[s(b)*r.scaleFactor,s(g)*r.scaleFactor]},{default:u((()=>[n("TresMeshBasicMaterial",{map:s(_),transparent:"",depthTest:"",blending:f,side:h},null,8,C)])),_:1},8,["args"])],8,T))}}),y=r({__name:"bannerLabel",setup(e){const r=c({text:"标识",fontSize:32,fontColor:"#000000",backgroundColor:"#ffaa0066",padding:{y:10,x:20},align:"left-center",scaleFactor:.01,borderColor:"#000000",borderWidth:1,borderRadius:2,dpi:2,isSprite:!0}),i=new a({title:"参数",expanded:!0});i.addBinding(r,"isSprite",{label:"是否精灵图"}).on("change",(e=>{l.disabled=!e.value})),i.addBinding(r,"text",{label:"文字内容"}),i.addBinding(r,"fontSize",{label:"文字大小",min:1,max:100}),i.addBinding(r,"fontColor",{label:"文字颜色"}),i.addBinding(r,"backgroundColor",{label:"背景色"}),i.addBinding(r,"padding",{label:"内边距",x:{min:1,max:50},y:{min:1,max:50}});const o=["left-top","left-center","left-bottom","center-top","center","center-bottom","right-top","right-center","right-bottom"].map((e=>({text:e,value:e}))),l=i.addBlade({view:"list",label:"定位",options:o,value:r.align,disabled:!1===r.isSprite});return l.on("change",(e=>{r.align=e.value})),i.addBinding(r,"scaleFactor",{label:"缩放因子",min:9e-4,max:.02}),i.addBinding(r,"borderColor",{label:"边框颜色"}),i.addBinding(r,"borderWidth",{label:"边框粗细",min:1,max:10,step:.01}),i.addBinding(r,"borderRadius",{label:"边框外弧度",min:0,max:20,step:.1}),i.addBinding(r,"dpi",{label:"清晰度",min:1,max:10,step:.1}),(e,a)=>{const i=m("TresCanvas");return d(),b(i,{clearColor:"#999","window-size":""},{default:u((()=>[a[0]||(a[0]=n("TresPerspectiveCamera",{position:[5,5,5]},null,-1)),p(s(t)),a[1]||(a[1]=n("TresMesh",null,[n("TresBoxGeometry"),n("TresMeshNormalMaterial")],-1)),p(s(_),g({position:[.5,1,0]},r),null,16)])),_:1})}}});export{y as default};

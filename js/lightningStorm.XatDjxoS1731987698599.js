import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.jZvzWux21731987698599.js";import{B as i,V as s,cq as n,ab as e,X as r,h as o,an as a,$ as c,s as h,_ as u}from"./three.3RwiW87x1731987698599.js";import{e as l,f as d,F as p}from"./@tresjs.juy9qkLz1731987698599.js";import{c as m}from"./simplex-noise.Yx8GBgKo1731987698599.js";import{d as f,a3 as g,o as y,D as b,u as S,r as x,j as w,g as v,m as _,F as I}from"./@vue.-THQH3GC1731987698599.js";import"./index.kVN4iam21731987698599.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.eGGo0V5p1731987698599.js";import"./three-custom-shader-material.0aidFALX1731987698599.js";import"./@vueuse.R8VPJfVr1731987698599.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.c8N2HnpW1731987698599.js";import"./all.three.rO0xEheM1731987698599.js";import"./oimophysics.x0jH7fze1731987698599.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.fiaWfWDd1731987698599.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.GW8R8l_51731987698599.js";import"./index.4a46bABZ1731987698599.js";import"./three-stdlib.JdNLeali1731987698599.js";import"./@pmndrs.QyZXChNO1731987698599.js";import"./object-hash.mkbyWU6f1731987698599.js";import"./@amap.8HDR-twf1731987698599.js";import"./jszip.RFL6OsWf1731987698599.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.blV05ICL1731987698599.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.FF9kqyAj1731987698599.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.shok15cG1731987698599.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.maxzQkqq1731987698599.js";function M(){const t=["table","count","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","positionAttribute","birthTime","onSubrayCreation","indices","radius0","visible","subrayConePosition","linPos1","currentSegmentCallback","subrayCylinderPosition","clone","radius1","54eWfZzZ","forwardsFill","simplexY","deathTime","crossVectors","180500lyKReM","roughness","currentSeed","info","fillMesh","propagationTimeFactor","LightningStrike","constructor","pos0","rayParameters","position","stateObject","toString","recursionProbability","updateMesh","pos1","linPos0","simplexZ","array","getSeed","currentSubray","type","timeFraction","5560268rxauwp","getNewSegment","createTriangleVerticesWithoutUVs","side","seedGenerator","usage","prototype","RAY_UNBORN","pow","iteration","middleLinPos","currentUVCoordinate","random","timeScale","subrayProbability","createSubray","RAY_INITIALIZED","state","min","sub","floor","action","uvs","positionVariationFactor","cos","copy","time","createSegment","setSeed","fraction0","multiplyScalar","up0","lerp","seed","radius0Factor","length","set","createTriangleVerticesWithUVs","debu","forwards","raySegments","currentSegmentIndex","isEternal","down","initSubray","test","subrays","687752Tdgcsk","fraction1","cross1","RAY_VANISHING","onDecideSubrayCreation","maxSubrayRecursion","436788bQIhqJ","subVectors","3793860XviPoZ","isStatic","RAY_STEADY","minRadius","console","log","maxIterations","update","push","randomGenerator","vanishingTimeFactor","setAttribute","COS30DEG","fractalRayRecursive","trace","isLightningStrike","copyParameters","vPos","add","radius1Factor","257523oXUXMR","maxRaySegments","up1","generateUVs","isInitialSegment","beginVanishingTime","984056EmAZiY","createPrism","simplexX","RAY_EXTINGUISHED","destOffset","addNewSubray","setIndex","createDefaultSubrayCreationCallbacks","drawRange","currentVertex","currentCoordinate","recursion","apply","createRandomGenerator","sourceOffset","RAY_PROPAGATING","SIN30DEG","chain","normalize","while (true) {}","maxSubrays","exception","3KXOJuc","newPos","input","straightness",'{}.constructor("return this")( )',"fractalRay","lerpVectors","endPropagationTime","subrayDutyCycle","max","uvsAttribute","needsUpdate","warn","currentIndex","string","middlePos","init","ramification","sin","gger","numSubrays","index","bind","vertices","noiseSeed","createMesh","subrayPeriod"];return(M=function(){return t})()}const T=F;!function(t,i){const s=F,n=M();for(;;)try{if(515208===-parseInt(s(567))/1+parseInt(s(573))/2*(parseInt(s(595))/3)+-parseInt(s(545))/4+parseInt(s(469))/5+parseInt(s(547))/6+-parseInt(s(492))/7+-parseInt(s(539))/8*(-parseInt(s(464))/9))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(585)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function F(t,i){const s=M();return(F=function(t,i){return s[t-=451]})(t,i)}!function(){R(this,(function(){const t=F,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(624),"i"),n=C(t(611));i[t(537)](n+t(590))&&s.test(n+t(597))?C():n("0")}))()}();const V=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[F(585)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();V(void 0,(function(){const t=F,i=function(){const t=F;let i;try{i=Function("return (function() "+t(599)+");")()}catch(s){i=window}return i}(),s=i[t(551)]=i[t(551)]||{},n=[t(552),t(607),t(472),"error",t(594),t(622),t(561)];for(let e=0;e<n[t(527)];e++){const i=V.constructor[t(498)][t(617)](V),r=n[e],o=s[r]||i;i[t(451)]=V[t(617)](V),i[t(481)]=o[t(481)][t(617)](o),s[r]=i}}))();class A extends i{constructor(t={}){const i=F;super(),this[i(562)]=!0,this[i(490)]=i(475),this[i(611)](A.copyParameters(t,t)),this.createMesh()}static[T(586)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(555)](Math[t(504)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(471)]];return n[e(471)]=(n.currentSeed+1)%i,r},getSeed:function(){return n.currentSeed/i},setSeed:function(s){n[t(471)]=Math.floor(s*i)%i}};return n}static[T(563)](t={},i={}){const n=T,e=function(s){return i===t?s:s[F(462)]()};return t.sourceOffset=void 0!==i.sourceOffset?e(i[n(587)]):new s(0,100,0),t[n(577)]=void 0!==i[n(577)]?e(i.destOffset):new s(0,0,0),t[n(505)]=void 0!==i[n(505)]?i[n(505)]:1,t[n(470)]=void 0!==i[n(470)]?i[n(470)]:.9,t.straightness=void 0!==i.straightness?i[n(598)]:.7,t[n(523)]=void 0!==i.up0?e(i[n(523)]):new s(0,0,1),t[n(569)]=void 0!==i.up1?e(i.up1):new s(0,0,1),t[n(456)]=void 0!==i[n(456)]?i.radius0:1,t[n(463)]=void 0!==i[n(463)]?i[n(463)]:1,t[n(526)]=void 0!==i.radius0Factor?i[n(526)]:.5,t[n(566)]=void 0!==i.radius1Factor?i[n(566)]:.2,t[n(550)]=void 0!==i[n(550)]?i[n(550)]:.2,t[n(534)]=void 0!==i[n(534)]?i[n(534)]:void 0===i[n(453)]||void 0===i.deathTime,t[n(453)]=i[n(453)],t[n(467)]=i[n(467)],t.propagationTimeFactor=void 0!==i[n(474)]?i.propagationTimeFactor:.1,t.vanishingTimeFactor=void 0!==i[n(557)]?i[n(557)]:.9,t[n(621)]=void 0!==i[n(621)]?i[n(621)]:4,t[n(603)]=void 0!==i[n(603)]?i.subrayDutyCycle:.6,t[n(553)]=void 0!==i[n(553)]?i[n(553)]:9,t[n(548)]=void 0!==i[n(548)]&&i[n(548)],t[n(612)]=void 0!==i[n(612)]?i[n(612)]:5,t[n(544)]=void 0!==i.maxSubrayRecursion?i.maxSubrayRecursion:3,t[n(482)]=void 0!==i[n(482)]?i.recursionProbability:.6,t.generateUVs=void 0!==i[n(570)]&&i[n(570)],t.randomGenerator=i[n(556)],t.noiseSeed=i[n(619)],t[n(543)]=i[n(543)],t[n(454)]=i[n(454)],t}[T(554)](t){const i=T;this.isStatic||(this[i(478)].isEternal||this[i(478)][i(453)]<=t&&t<=this[i(478)][i(467)]?(this[i(483)](t),t<this.subrays[0][i(602)]?this.state=A[i(588)]:t>this[i(538)][0][i(572)]?this[i(509)]=A[i(542)]:this[i(509)]=A.RAY_STEADY,this.visible=!0):(this[i(457)]=!1,t<this[i(478)][i(453)]?this[i(509)]=A[i(499)]:this[i(509)]=A[i(576)]))}[T(611)](t){const i=T;this[i(478)]=t,this[i(553)]=void 0!==t[i(553)]?Math[i(512)](t[i(553)]):9,t[i(553)]=this.maxIterations,this.isStatic=void 0!==t[i(548)]&&t[i(548)],t[i(548)]=this.isStatic,this[i(612)]=void 0!==t[i(612)]?Math[i(512)](t[i(612)]):5,t.ramification=this[i(612)],this.maxSubrayRecursion=void 0!==t.maxSubrayRecursion?Math[i(512)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this.maxSubrayRecursion,this[i(482)]=void 0!==t[i(482)]?t[i(482)]:.6,t[i(482)]=this[i(482)],this[i(570)]=void 0!==t[i(570)]&&t[i(570)],t.generateUVs=this[i(570)],void 0!==t[i(556)]?(this[i(556)]=t[i(556)],this.seedGenerator=t[i(556)],void 0!==t[i(619)]&&this[i(496)][i(520)](t.noiseSeed)):(this[i(556)]=A.createRandomGenerator(),this[i(496)]=Math),void 0!==t[i(543)]?this[i(543)]=t.onDecideSubrayCreation:(this[i(580)](),void 0!==t[i(454)]&&(this[i(454)]=t[i(454)])),this.state=A[i(508)],this[i(593)]=Math.ceil(1+Math.pow(this.ramification,Math[i(604)](0,this[i(544)]-1))),t.maxSubrays=this[i(593)],this.maxRaySegments=2*(1<<this[i(553)]),this[i(538)]=[];for(let s=0;s<this[i(593)];s++)this[i(538)].push(this.createSubray());this[i(532)]=[];for(let s=0;s<this[i(568)];s++)this[i(532)].push(this[i(519)]());this[i(518)]=0,this[i(491)]=0,this[i(460)]=null,this.currentCreateTriangleVertices=this[i(570)]?this[i(529)]:this[i(494)],this[i(615)]=0,this[i(489)]=null,this.currentSegmentIndex=0,this[i(571)]=!1,this[i(506)]=0,this.currentVertex=0,this[i(608)]=0,this[i(583)]=0,this.currentUVCoordinate=0,this[i(618)]=null,this[i(514)]=null,this[i(455)]=null,this[i(452)]=null,this[i(605)]=null,this[i(575)]=m(this[i(496)][i(504)]),this[i(466)]=m(this[i(496)][i(504)]),this[i(486)]=m(this.seedGenerator.random),this.forwards=new s,this[i(465)]=new s,this[i(495)]=new s,this[i(535)]=new s,this[i(610)]=new s,this[i(502)]=new s,this[i(596)]=new s,this[i(564)]=new s,this.cross1=new s}[T(620)](){const t=T,i=1<<this[t(553)],s=3*(i+1)*this[t(593)],o=18*i*this[t(593)];this.vertices=new Float32Array(3*s),this[t(455)]=new Uint32Array(o),this.generateUVs&&(this[t(514)]=new Float32Array(2*s)),this.fillMesh(0),this[t(579)](new n(this[t(455)],1)),this[t(452)]=new e(this[t(618)],3),this[t(558)](t(479),this[t(452)]),this[t(570)]&&(this[t(605)]=new e(new Float32Array(this[t(514)]),2),this.setAttribute("uv",this[t(605)])),!this.isStatic&&(this[t(616)][t(497)]=r,this[t(452)].usage=r,this.generateUVs&&(this[t(605)][t(497)]=r)),this.vertices=this[t(452)].array,this[t(455)]=this[t(616)][t(487)],this[t(570)]&&(this.uvs=this[t(605)].array)}updateMesh(t){const i=T;this[i(473)](t),this[i(581)][i(623)]=this.currentIndex,this[i(616)][i(606)]=!0,this[i(452)][i(606)]=!0,this[i(570)]&&(this[i(605)][i(606)]=!0)}fillMesh(t){const i=T,s=this;this[i(582)]=0,this[i(608)]=0,this[i(583)]=0,this[i(503)]=0,this[i(600)](t,(function(n){const e=i,r=s.currentSubray;t<r.birthTime||(this.rayParameters[e(534)]&&0==s.currentSubray[e(584)]?(s[e(574)](n),s[e(543)](n,s)):t<r[e(602)]?s.timeFraction>=n[e(521)]*r.propagationTimeFactor&&(s[e(574)](n),s[e(543)](n,s)):t<r.beginVanishingTime?(s[e(574)](n),s[e(543)](n,s)):(s.timeFraction<=r[e(557)]+n[e(540)]*(1-r[e(557)])&&s[e(574)](n),s[e(543)](n,s)))}))}addNewSubray(){const t=T;return this.subrays[this[t(615)]++]}[T(536)](t,i){const s=T;t[s(477)][s(517)](i[s(587)]),t[s(484)][s(517)](i.destOffset),t[s(523)][s(517)](i[s(523)]),t.up1[s(517)](i.up1),t.radius0=i[s(456)],t[s(463)]=i[s(463)],t[s(453)]=i[s(453)],t[s(467)]=i.deathTime,t[s(505)]=i[s(505)],t[s(470)]=i[s(470)],t[s(598)]=i[s(598)],t[s(474)]=i[s(474)],t[s(557)]=i.vanishingTimeFactor,t[s(553)]=this[s(553)],t[s(525)]=void 0!==i[s(619)]?i.noiseSeed:0,t[s(584)]=0}[T(600)](t,i){const s=T;this[s(518)]=t,this[s(460)]=i,this.numSubrays=0,this.initSubray(this[s(578)](),this[s(478)]);for(let n=0;n<this[s(615)];n++){const i=this.subrays[n];this.currentSubray=i,this[s(556)][s(520)](i[s(525)]),i[s(602)]=o[s(524)](i[s(453)],i.deathTime,i[s(474)]),i[s(572)]=o.lerp(i[s(467)],i.birthTime,1-i.vanishingTimeFactor);const e=this[s(556)][s(504)];i[s(485)][s(528)](e(),e(),e())[s(522)](1e3),i[s(459)][s(528)](e(),e(),e())[s(522)](1e3),this[s(491)]=(t-i.birthTime)/(i[s(467)]-i[s(453)]),this[s(533)]=0,this.isInitialSegment=!0;const r=this[s(493)]();r[s(501)]=0,r[s(477)][s(517)](i[s(477)]),r[s(484)][s(517)](i[s(484)]),r[s(485)][s(517)](i[s(485)]),r.linPos1[s(517)](i[s(459)]),r.up0.copy(i[s(523)]),r.up1.copy(i[s(569)]),r[s(456)]=i[s(456)],r.radius1=i.radius1,r[s(521)]=0,r[s(540)]=1,r[s(515)]=1-i[s(598)],this[s(506)]=this[s(612)]*Math[s(500)](this.recursionProbability,i.recursion)/(1<<i.maxIterations),this[s(560)](r)}this[s(460)]=null,this.currentSubray=null}[T(560)](t){const i=T;if(t[i(501)]>=this[i(489)].maxIterations)return void this.currentSegmentCallback(t);this.forwards[i(546)](t.pos1,t[i(477)]);let s=this.forwards[i(527)]();s<1e-6&&(this.forwards.set(0,0,.01),s=this[i(531)].length());const n=.5*(t[i(456)]+t[i(463)]),e=.5*(t.fraction0+t[i(540)]),r=this[i(518)]*this[i(489)][i(505)]*Math.pow(2,t[i(501)]);this[i(610)][i(601)](t[i(477)],t[i(484)],.5),this.middleLinPos[i(601)](t[i(485)],t[i(459)],.5);const o=this[i(502)];this[i(596)][i(528)](this[i(575)](o.x,o.y,o.z,r),this[i(466)](o.x,o.y,o.z,r),this[i(486)](o.x,o.y,o.z,r)),this[i(596)][i(522)](t.positionVariationFactor*s),this.newPos[i(565)](this[i(610)]);const a=this[i(493)]();a.pos0.copy(t[i(477)]),a[i(484)][i(517)](this[i(596)]),a[i(485)].copy(t[i(485)]),a[i(459)][i(517)](this[i(502)]),a[i(523)].copy(t[i(523)]),a[i(569)][i(517)](t[i(569)]),a[i(456)]=t[i(456)],a.radius1=n,a.fraction0=t[i(521)],a[i(540)]=e,a.positionVariationFactor=t.positionVariationFactor*this[i(489)].roughness,a[i(501)]=t[i(501)]+1;const c=this.getNewSegment();c[i(477)].copy(this[i(596)]),c[i(484)].copy(t[i(484)]),c[i(485)][i(517)](this.middleLinPos),c[i(459)][i(517)](t[i(459)]),this[i(541)][i(468)](t[i(523)],this[i(531)].normalize()),c[i(523)][i(468)](this[i(531)],this.cross1)[i(591)](),c[i(569)].copy(t[i(569)]),c[i(456)]=n,c[i(463)]=t.radius1,c[i(521)]=e,c[i(540)]=t.fraction1,c[i(515)]=t[i(515)]*this[i(489)].roughness,c.iteration=t[i(501)]+1,this[i(560)](a),this[i(560)](c)}[T(574)](t){const i=T;this.forwardsFill[i(546)](t[i(484)],t[i(477)])[i(591)](),this[i(571)]&&(this.currentCreateTriangleVertices(t[i(477)],t.up0,this[i(465)],t[i(456)],0),this[i(571)]=!1),this.currentCreateTriangleVertices(t[i(484)],t[i(523)],this.forwardsFill,t[i(463)],t.fraction1),this.createPrismFaces()}[T(494)](t,i,s,n){const e=T;this[e(495)].crossVectors(i,s).multiplyScalar(n*A[e(559)]),this.down.copy(i)[e(522)](-n*A[e(589)]);const r=this[e(564)],o=this.vertices;r[e(517)](t)[e(511)](this[e(495)])[e(565)](this.down),o[this[e(583)]++]=r.x,o[this[e(583)]++]=r.y,o[this[e(583)]++]=r.z,r.copy(t).add(this[e(495)]).add(this.down),o[this.currentCoordinate++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i).multiplyScalar(n).add(t),o[this[e(583)]++]=r.x,o[this[e(583)]++]=r.y,o[this[e(583)]++]=r.z,this[e(582)]+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=T;this[r(495)][r(468)](i,s)[r(522)](n*A[r(559)]),this[r(535)][r(517)](i).multiplyScalar(-n*A.SIN30DEG);const o=this[r(564)],a=this[r(618)],c=this[r(514)];o[r(517)](t).sub(this.side)[r(565)](this[r(535)]),a[this[r(583)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(583)]++]=o.z,c[this[r(503)]++]=e,c[this[r(503)]++]=0,o.copy(t)[r(565)](this[r(495)])[r(565)](this[r(535)]),a[this[r(583)]++]=o.x,a[this[r(583)]++]=o.y,a[this[r(583)]++]=o.z,c[this[r(503)]++]=e,c[this[r(503)]++]=.5,o[r(517)](i)[r(522)](n)[r(565)](t),a[this[r(583)]++]=o.x,a[this[r(583)]++]=o.y,a[this[r(583)]++]=o.z,c[this[r(503)]++]=e,c[this[r(503)]++]=1,this.currentVertex+=3}createPrismFaces(t){const i=T,s=this[i(455)];t=this.currentVertex-6,s[this[i(608)]++]=t+1,s[this[i(608)]++]=t+2,s[this[i(608)]++]=t+5,s[this[i(608)]++]=t+1,s[this.currentIndex++]=t+5,s[this.currentIndex++]=t+4,s[this[i(608)]++]=t+0,s[this[i(608)]++]=t+1,s[this[i(608)]++]=t+4,s[this[i(608)]++]=t+0,s[this[i(608)]++]=t+4,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+3,s[this.currentIndex++]=t+2,s[this[i(608)]++]=t+3,s[this[i(608)]++]=t+5}[T(580)](){const t=T,i=this[t(556)][t(504)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(489)],a=n.rayParameters[e(621)],c=n[e(478)][e(603)],h=n[e(478)][e(534)]&&0==r[e(584)]?-i()*a:o.lerp(r[e(453)],r[e(602)],s[e(521)])-i()*a,u=n[e(518)]-h,l=Math[e(512)](u/a),d=i()*(l+1);let p=0;if(u%a<=c*a&&(p=n[e(506)]),r.recursion<n[e(544)]&&n[e(615)]<n[e(593)]&&i()<p){const t=n.addNewSubray(),o=n.randomGenerator[e(488)]();t[e(525)]=d,n.randomGenerator[e(520)](d),t[e(584)]=r[e(584)]+1,t[e(553)]=Math.max(1,r.maxIterations-1),t[e(485)][e(528)](i(),i(),i())[e(522)](1e3),t.linPos1[e(528)](i(),i(),i())[e(522)](1e3),t[e(523)][e(517)](r.up0),t[e(569)][e(517)](r[e(569)]),t[e(456)]=s[e(456)]*n[e(478)].radius0Factor,t.radius1=Math[e(510)](n.rayParameters[e(550)],s[e(463)]*n[e(478)][e(566)]),t[e(453)]=h+l*a,t[e(467)]=t[e(453)]+a*c,!n[e(478)][e(534)]&&0==r.recursion&&(t[e(453)]=Math.max(t[e(453)],r[e(453)]),t[e(467)]=Math[e(510)](t[e(467)],r[e(467)])),t[e(505)]=2*r[e(505)],t[e(470)]=r.roughness,t[e(598)]=r[e(598)],t[e(474)]=r[e(474)],t[e(557)]=r[e(557)],n.onSubrayCreation(s,r,t,n),n[e(556)][e(520)](o)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(i,s,n,e){e[t(461)](i,s,n,.5,.6,.2)},this[t(458)]=function(s,o,c,h,u,l){const d=t;c.pos0.copy(s[d(477)]),n[d(546)](o[d(484)],o[d(477)]),e.copy(n)[d(591)](),n[d(522)](s[d(521)]+(1-s.fraction0)*(i()*h));const p=n[d(527)]();r[d(468)](o[d(523)],e);const m=2*Math.PI*i();r[d(522)](Math[d(516)](m)),a[d(517)](o.up0)[d(522)](Math[d(613)](m)),c[d(484)].copy(r).add(a)[d(522)](p*u*(l+i()*(1-l))).add(n)[d(565)](o[d(477)])},this[t(461)]=function(s,o,c,h,u,l){const d=t;c.pos0[d(517)](s.pos0),n.subVectors(o[d(484)],o[d(477)]),e[d(517)](n)[d(591)](),n[d(522)](s[d(521)]+(1-s[d(521)])*((2*i()-1)*h));const p=n.length();r.crossVectors(o[d(523)],e);const m=2*Math.PI*i();r.multiplyScalar(Math.cos(m)),a[d(517)](o[d(523)])[d(522)](Math.sin(m)),c[d(484)].copy(r).add(a)[d(522)](p*u*(l+i()*(1-l)))[d(565)](n)[d(565)](o.pos0)}}[T(507)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(519)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=T;return this[t(532)][this[t(533)]++]}[T(517)](t){const i=T;return super[i(517)](t),this[i(611)](A.copyParameters({},t.rayParameters)),this}[T(462)](){const t=T;return new(this[t(476)])(A[t(563)]({},this[t(478)]))}}function C(t){function i(t){const s=F;if(typeof t===s(609))return function(t){}[s(476)](s(592))[s(585)]("counter");1!==(""+t/t)[s(527)]||t%20==0?function(){return!0}[s(476)](s(530)+s(614)).call(s(513)):function(){return!1}[s(476)](s(530)+s(614))[s(585)](s(480)),i(++t)}try{if(t)return i;i(0)}catch(s){}}A[T(508)]=0,A[T(499)]=1,A[T(588)]=2,A[T(549)]=3,A.RAY_VANISHING=4,A[T(576)]=5,A[T(559)]=Math.cos(30*Math.PI/180),A[T(589)]=Math.sin(30*Math.PI/180);const j=E;!function(t,i){const s=E,n=D();for(;;)try{if(640234===parseInt(s(494))/1+-parseInt(s(516))/2*(parseInt(s(500))/3)+parseInt(s(466))/4+parseInt(s(489))/5*(parseInt(s(509))/6)+-parseInt(s(527))/7+-parseInt(s(459))/8*(-parseInt(s(517))/9)+parseInt(s(501))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(496)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(){const t=["isLightningStorm","clone","test","size","warn","gger","function *\\( *\\)","RAY_EXTINGUISHED","copy","info","splice","lightningMinDuration","deadLightningsMeshes","5yECuGP","onLightningDown","bind","random","set","123883WexSWp","init","apply","nextLightningTime","inited","maxLightnings","15Eowfwl","8264520NmosUX","trace","exception","lightningMinPeriod","add","prototype","pop","error","575502YpgkDI","lightningMaterial","toString","action","lightningMaxPeriod","push","destOffset","385648wwgLbY","3402072svlXRn","maxSlope","deathTime","stateObject","lightningParameters","maxHeight","lightningsMeshes","lightningMaxDuration","__proto__","getNextLightningTime","6903036glCQGI","copyParameters","lerp","sourceOffset",'{}.constructor("return this")( )',"24mLxBSV","input","constructor","length","multiplyScalar","update","minHeight","1640904FXOFPR","stormParams","state","return (function() ","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","onRayPosition","geometry","indexOf","while (true) {}"];return(D=function(){return t})()}!function(){z(this,(function(){const t=E,i=new RegExp(t(482)),s=new RegExp(t(471),"i"),n=G(t(495));i[t(478)](n+"chain")&&s[t(478)](n+t(460))?G():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(496)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(t,i){const s=D();return(E=function(t,i){return s[t-=458]})(t,i)}H(void 0,(function(){const t=E;let i;try{i=Function(t(469)+t(458)+");")()}catch(e){i=window}const s=i.console=i.console||{},n=["log",t(480),t(485),t(508),t(503),t(470),t(502)];for(let r=0;r<n[t(462)];r++){const i=H[t(461)][t(506)].bind(H),e=n[r],o=s[e]||i;i[t(525)]=H[t(491)](H),i[t(511)]=o.toString.bind(o),s[e]=i}}))();class L extends a{constructor(t={}){const i=E;super(),this[i(476)]=!0,this.stormParams=t,t[i(479)]=void 0!==t.size?t.size:1e3,t[i(465)]=void 0!==t.minHeight?t[i(465)]:80,t[i(522)]=void 0!==t[i(522)]?t[i(522)]:100,t[i(518)]=void 0!==t[i(518)]?t[i(518)]:1.1,t[i(499)]=void 0!==t[i(499)]?t.maxLightnings:3,t[i(504)]=void 0!==t.lightningMinPeriod?t[i(504)]:3,t[i(513)]=void 0!==t[i(513)]?t[i(513)]:7,t[i(487)]=void 0!==t[i(487)]?t[i(487)]:1,t[i(524)]=void 0!==t[i(524)]?t[i(524)]:2.5,this[i(521)]=A[i(528)](t[i(521)],t[i(521)]),this.lightningParameters.isEternal=!1,this.lightningMaterial=void 0!==t.lightningMaterial?t[i(510)]:new c({color:11599871}),void 0!==t[i(472)]?this.onRayPosition=t[i(472)]:this.onRayPosition=function(s,n){const e=i;n[e(493)]((Math[e(492)]()-.5)*t[e(479)],0,(Math.random()-.5)*t[e(479)]);const r=o[e(529)](t[e(465)],t.maxHeight,Math[e(492)]());s.set(t[e(518)]*(2*Math[e(492)]()-1),1,t[e(518)]*(2*Math[e(492)]()-1))[e(463)](r)[e(505)](n)},this.onLightningDown=t[i(490)],this.inited=!1,this[i(497)]=0,this[i(523)]=[],this[i(488)]=[];for(let s=0;s<this[i(467)].maxLightnings;s++){const t=new A(A.copyParameters({},this[i(521)])),s=new h(t,this.lightningMaterial);this.deadLightningsMeshes.push(s)}}[j(464)](t){const i=j;if(!this[i(498)]&&(this.nextLightningTime=this[i(526)](t)*Math[i(492)](),this.inited=!0),t>=this[i(497)]){const s=this[i(488)][i(507)]();if(s){const n=A[i(528)](s[i(473)].rayParameters,this.lightningParameters);n.birthTime=t,n[i(519)]=t+o[i(529)](this[i(467)][i(487)],this.stormParams.lightningMaxDuration,Math.random()),this[i(472)](n[i(530)],n[i(515)]),n.noiseSeed=Math[i(492)](),this[i(505)](s),this[i(523)][i(514)](s)}this[i(497)]=this[i(526)](t)}let s=0,n=this[i(523)][i(462)];for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(473)],o=r[i(468)];r[i(464)](t),o===A.RAY_PROPAGATING&&r[i(468)]>o&&this[i(490)]&&this[i(490)](r),r.state===A[i(483)]?(this[i(523)][i(486)](this.lightningsMeshes[i(474)](e),1),this.deadLightningsMeshes[i(514)](e),this.remove(e),n--):s++}}[j(526)](t){const i=j;return t+o[i(529)](this[i(467)][i(504)],this[i(467)][i(513)],Math.random())/(this[i(467)][i(499)]+1)}[j(484)](t,i){const s=j;return super[s(484)](t,i),this[s(467)][s(479)]=t.stormParams[s(479)],this[s(467)][s(465)]=t[s(467)][s(465)],this.stormParams[s(522)]=t.stormParams[s(522)],this[s(467)].maxSlope=t[s(467)].maxSlope,this[s(467)][s(499)]=t[s(467)][s(499)],this[s(467)][s(504)]=t[s(467)][s(504)],this[s(467)].lightningMaxPeriod=t.stormParams[s(513)],this[s(467)][s(487)]=t.stormParams[s(487)],this[s(467)].lightningMaxDuration=t[s(467)][s(524)],this[s(521)]=A[s(528)]({},t[s(521)]),this.lightningMaterial=t[s(467)][s(510)],this[s(490)]=t[s(490)],this}[j(477)](){const t=j;return new(this[t(461)])(this[t(467)])[t(484)](this)}}function G(t){function i(t){const s=E;if("string"==typeof t)return function(t){}.constructor(s(475))[s(496)]("counter");1!==(""+t/t)[s(462)]||t%20==0?function(){return!0}[s(461)]("debu"+s(481)).call(s(512)):function(){return!1}[s(461)]("debu"+s(481))[s(496)](s(520)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=O;function O(t,i){const s=U();return(O=function(t,i){return s[t-=289]})(t,i)}function U(){const t=["toString","40308gUzeSi","lightStorm","maxLightnings","30SzMhQo","timeScale","call","primitive","add","gger","action","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","apply","debu","subrayConePosition","112ydKnXZ","set","stateObject","subVectors","string","color","Color","subrayDutyCycle","info","roughness","2MMlKXr","chain","object","init","test","update","console","pos1","subrayPeriod","prototype","constructor","copy","318csEJMv","MeshBasicMaterial","stormParams","size","143199lhCvtE","trace",'{}.constructor("return this")( )',"20598677uiIzsA","45157YLJWed","return (function() ","#b0ffff","196112tZndaU","sourceOffset","while (true) {}","dot","addVectors","input","bind","radius0","multiplyScalar","minHeight","Vector3","straightness","log","1953540ffdupq","rayParameters","error","453121mcDNnm"];return(U=function(){return t})()}!function(t,i){const s=O,n=U();for(;;)try{if(238420===-parseInt(s(321))/1*(parseInt(s(349))/2)+-parseInt(s(323))/3*(parseInt(s(339))/4)+-parseInt(s(318))/5+parseInt(s(294))/6*(-parseInt(s(302))/7)+-parseInt(s(305))/8+-parseInt(s(298))/9*(parseInt(s(326))/10)+parseInt(s(301))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Y(this,(function(){const t=O,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(334),"i"),n=$(t(352));i[t(353)](n+t(350))&&s[t(353)](n+t(310))?$():n("0")}))()}();const Z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(336)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Z(void 0,(function(){const t=O;let i;try{i=Function(t(303)+t(300)+");")()}catch(e){i=window}const s=i[t(355)]=i[t(355)]||{},n=[t(317),"warn",t(347),t(320),"exception",t(333),t(299)];for(let r=0;r<n[t(335)];r++){const i=Z[t(292)][t(291)].bind(Z),e=n[r],o=s[e]||i;i.__proto__=Z[t(311)](Z),i[t(322)]=o[t(322)][t(311)](o),s[e]=i}}))();const k=[N(351)],X=f({__name:N(324),props:{color:{default:N(304)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,n=t,e=new(u[i(345)])(n.color),r=new(u[i(295)])({color:e}),o=new s(0,-1,0);let a=0;const c=new(u[i(315)]),h=new s,d={roughness:n[i(348)],straightness:n[i(316)],radius0:n[i(312)],radius1:n.radius1,timeScale:n[i(327)],subrayPeriod:n[i(290)],subrayDutyCycle:n[i(346)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(338)](t,s,n,.6,.6,.5),a=e[r(319)][r(306)].y,c[r(342)](n[r(289)],e[r(319)][r(306)]);const u=o[r(308)](c);h[r(293)](o)[r(313)](u),c.sub(h);const l=u/a>.5?a/u:1;h[r(313)](l),c[r(330)](h),n[r(289)][r(309)](c,e[r(319)][r(306)])}},p=new L({size:n.size,minHeight:n.minHeight,maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(325)],lightningParameters:d,lightningMaterial:r});g((()=>{const t=i,s=p[t(296)];s[t(297)]=n[t(297)],s.minHeight=n[t(314)],s.maxHeight=n.maxHeight,r[t(344)][t(340)](n.color),d[t(348)]=n[t(348)],d[t(316)]=n.straightness,d[t(312)]=n.radius0,d.radius1=n.radius1,d[t(327)]=n[t(327)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{p[i(354)](t)})),(t,s)=>{const n=i;return y(),b(n(329),{object:S(p),renderOrder:9999},null,8,k)}}});function $(t){function i(t){const s=O;if(typeof t===s(343))return function(t){}[s(292)](s(307))[s(336)]("counter");1!==(""+t/t)[s(335)]||t%20==0?function(){return!0}[s(292)]("debu"+s(331))[s(328)](s(332)):function(){return!1}[s(292)](s(337)+s(331))[s(336)](s(341)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=Q;!function(t,i){const s=Q,n=J();for(;;)try{if(951027===-parseInt(s(117))/1+parseInt(s(126))/2+parseInt(s(114))/3*(-parseInt(s(141))/4)+parseInt(s(125))/5+parseInt(s(142))/6+parseInt(s(110))/7*(parseInt(s(140))/8)+-parseInt(s(113))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Q(131)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["stateObject","color","#ffbde7","toString","timeScale","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3837375DkhLnf","779690neQNPM","table","return (function() ","test","bind","apply","#92399e","maxHeight","warn","constructor","length","lightningStorm","debu","时间缩放","18448rMbSMI","3274696oXlyuL","7159188TXHnha","直度度","log","粗糙度","exception","prototype","#6f6f6f","trace","radius1","function *\\( *\\)","minHeight","call","console","value","4984bwjBuB","gger","端部半径","3424914xOETgf","3hZkwDE",'{}.constructor("return this")( )',"roughness","1842143kuRHxd","info"];return(J=function(){return t})()}!function(){W(this,(function(){const t=Q,i=new RegExp(t(151)),s=new RegExp(t(124),"i"),n=tt("init");i[t(129)](n+"chain")&&s.test(n+"input")?tt():n("0")}))()}();const K=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Q(131)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Q(t,i){const s=J();return(Q=function(t,i){return s[t-=106]})(t,i)}K(void 0,(function(){const t=Q,i=function(){const t=Q;let i;try{i=Function(t(128)+t(115)+");")()}catch(s){i=window}return i}(),s=i[t(108)]=i.console||{},n=[t(144),t(134),t(118),"error",t(146),t(127),t(149)];for(let e=0;e<n[t(136)];e++){const i=K[t(135)][t(147)][t(130)](K),r=n[e],o=s[r]||i;i.__proto__=K.bind(K),i[t(122)]=o.toString[t(130)](o),s[r]=i}}))();const q=f({__name:B(137),setup(i){const s=B,n=x({cellSize:60,cellThickness:1,cellColor:s(148),sectionColor:s(132),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(121),roughness:{label:s(145),value:.85,min:0,max:1,step:.01},straightness:{label:s(143),value:.65,min:0,max:1,step:.01},radius0:{label:s(112),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(139),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return y(),b(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:v((()=>[w(X,{minHeight:S(e)[m(109)],maxHeight:S(r)[m(109)],color:S(o)[m(109)],roughness:S(a)[m(109)],straightness:S(c)[m(109)],radius0:S(h).value,radius1:S(u)[m(109)],timeScale:S(l).value},null,8,[m(106),m(133),m(120),m(116),"straightness","radius0",m(150),m(123)]),w(S(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(S(p))],64)}}});function tt(t){function i(t){const s=Q;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[s(131)]("counter");1!==(""+t/t)[s(136)]||t%20==0?function(){return!0}[s(135)](s(138)+"gger")[s(107)]("action"):function(){return!1}.constructor(s(138)+s(111)).apply(s(119)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

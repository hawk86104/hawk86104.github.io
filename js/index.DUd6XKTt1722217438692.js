var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.n6_dWyKr1722217438692.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.zBbCTIfb1722217438692.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.DPYCARLu1722217438692.js";import{j as o,U as s,C as l,k as c,W as u,bb as p,h as f,e as x,a6 as v,y as m}from"./three.ej3u8izI1722217438692.js";import{p as w,$ as h}from"./@tresjs.vs5lCFs11722217438692.js";import{u as g}from"./index.DTwgDyGF1722217438692.js";import{F as d,C as y}from"./three-stdlib.lHRu5jBh1722217438692.js";import{d as S}from"./@vue.Q1VpS3901722217438692.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.YBPyOPaV1722217438692.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.WNuqNNwJ1722217438692.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.THQmNhrN1722217438692.js";function P(t,e){const n=E();return(P=function(t,e){return n[t-=499]})(t,e)}const _=P;!function(t,e){const n=P,i=E();for(;;)try{if(424180===parseInt(n(516))/1+parseInt(n(529))/2*(-parseInt(n(521))/3)+-parseInt(n(510))/4*(-parseInt(n(499))/5)+-parseInt(n(523))/6+parseInt(n(507))/7*(-parseInt(n(511))/8)+parseInt(n(518))/9*(parseInt(n(501))/10)+parseInt(n(504))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[P(515)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){z(this,(function(){const t=P,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=M("init");e[t(527)](i+"chain")&&n.test(i+t(532))?M():i("0")}))()}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[P(515)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();b(void 0,(function(){const t=P,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e[t(528)]=e[t(528)]||{},i=[t(519),t(525),t(506),t(512),t(531),t(526),t(513)];for(let r=0;r<i[t(520)];r++){const e=b[t(522)][t(500)].bind(b),a=i[r],o=n[a]||e;e[t(533)]=b[t(514)](b),e[t(502)]=o.toString[t(514)](o),n[a]=e}}))();const I=_(530);function M(t){function e(t){const n=P;if(typeof t===n(503))return function(t){}[n(522)]("while (true) {}")[n(515)](n(508));1!==(""+t/t)[n(520)]||t%20==0?function(){return!0}[n(522)](n(505)+"gger")[n(534)](n(524)):function(){return!1}.constructor(n(505)+n(517))[n(515)](n(509)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function E(){const t=["6122347tESUJk","debu","info","3836245ULKGEw","counter","stateObject","4OKWPvO","8fmPxMj","error","trace","bind","apply","727091EBPfpY","gger","9dvFlht","log","length","122223ssiRVK","constructor","1759374kPkWMm","action","warn","table","test","console","36jBYdQr",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"exception","input","__proto__","call","1870945CKYDkf","prototype","3409250CbOlkL","toString","string"];return(E=function(){return t})()}const A=D;function D(t,e){const n=U();return(D=function(t,e){return n[t-=169]})(t,e)}!function(t,e){const n=D,i=U();for(;;)try{if(557859===-parseInt(n(177))/1+-parseInt(n(200))/2*(-parseInt(n(202))/3)+parseInt(n(189))/4+-parseInt(n(188))/5+parseInt(n(169))/6+parseInt(n(212))/7*(parseInt(n(191))/8)+parseInt(n(173))/9*(-parseInt(n(208))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(194)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){L(this,(function(){const t=D,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(182),"i"),i=k(t(183));e.test(i+t(190))&&n[t(195)](i+t(198))?k():i("0")}))()}();const O=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(194)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function U(){const t=["call","10dwwmtl","constructor","gger","log","385vhpHpv","1860342AFxelV","debu","__proto__","action","1751319ktewbo","defines","table",'{}.constructor("return this")( )',"1029618MpxSrI","stateObject","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","prototype","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","warn","toString","trace","exception","2597090xSPYFq","960684PpmcgO","chain","120472wdAxKH","info","clone","apply","test","string","uniforms","input","while (true) {}","8918wROOXt","bind","621IphJSj","length","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","console","return (function() "];return(U=function(){return t})()}function j(t){const e=D,n=a({},t);return"defines"in t&&(n[e(174)]=a({},t[e(174)])),e(197)in t&&(n[e(197)]=s[e(193)](t[e(197)])),n}O(void 0,(function(){const t=D,e=function(){const t=D;let e;try{e=Function(t(206)+t(176)+");")()}catch(n){e=window}return e}(),n=e[t(205)]=e.console||{},i=[t(211),t(184),t(192),t(181),t(187),t(175),t(186)];for(let r=0;r<i[t(203)];r++){const e=O[t(209)][t(180)][t(201)](O),a=i[r],o=n[a]||e;e[t(171)]=O[t(201)](O),e.toString=o[t(185)][t(201)](o),n[a]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:A(204),fragmentShader:"\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t"+I+A(179)};function k(t){function e(t){const n=D;if(typeof t===n(196))return function(t){}[n(209)](n(199)).apply("counter");1!==(""+t/t)[n(203)]||t%20==0?function(){return!0}[n(209)](n(170)+n(210))[n(207)](n(172)):function(){return!1}.constructor(n(170)+n(210))[n(194)](n(178)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const T=R;!function(t,e){const n=R,i=W();for(;;)try{if(398486===parseInt(n(276))/1+parseInt(n(227))/2*(parseInt(n(256))/3)+-parseInt(n(220))/4+-parseInt(n(222))/5*(-parseInt(n(262))/6)+parseInt(n(239))/7*(-parseInt(n(273))/8)+-parseInt(n(264))/9*(-parseInt(n(250))/10)+-parseInt(n(280))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[R(258)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){C(this,(function(){const t=R,e=new RegExp(t(255)),n=new RegExp(t(231),"i"),i=Y(t(274));e[t(246)](i+t(261))&&n[t(246)](i+t(279))?Y():i("0")}))()}();const F=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[R(258)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function R(t,e){const n=W();return(R=function(t,e){return n[t-=204]})(t,e)}function W(){const t=["_swapTarget","141242Cuhref","log","setViewOffset","floorPowerOfTwo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isWebGLRenderTarget","dispose","height","width","fragmentShader","trace","constructor","1897xAQkDw","action","call","warn","floor","X_IS_EVEN","autoClear","test","set","setClearColor","setClearAlpha","170iuUFPG","map","parentLevel","debu","material","function *\\( *\\)","24Wupocb","tDiffuse","apply","originalMapSize","clear","chain","312SfHOyl","prototype","28161VDqziZ","__proto__","while (true) {}","bind","_mipMaterials","replace","console","toString","counter","21160srdiuh","init","info","724191oPWjeG","gger","update","input","7433525hHMBUX","_copyQuad","stateObject","image","setRenderTarget","type","render","Y_IS_EVEN","getRenderTarget",'{}.constructor("return this")( )',"defines","return (function() ","setSize","parentMapSize","uniforms","length","table","camera","error","925408uhkrzk","value","65390osxOCe","_mipQuad","texture","magFilter"];return(W=function(){return t})()}F(void 0,(function(){const t=R,e=function(){const t=R;let e;try{e=Function(t(212)+t(210)+");")()}catch(n){e=window}return e}(),n=e[t(270)]=e.console||{},i=[t(228),t(242),t(275),t(219),"exception",t(217),t(237)];for(let r=0;r<i[t(216)];r++){const e=F[t(238)][t(263)][t(267)](F),a=i[r],o=n[a]||e;e[t(265)]=F[t(267)](F),e[t(271)]=o.toString[t(267)](o),n[a]=e}}))();const H=new l;class N{constructor(t){const e=R;!t&&(t="\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t");const n=j(V);n[e(236)]=n[e(236)][e(269)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(j(n)),i[0].defines[e(244)]=0,i[0][e(211)][e(208)]=0,i[1]=new c(j(n)),i[1][e(211)][e(244)]=1,i[1][e(211)].Y_IS_EVEN=0,i[2]=new c(j(n)),i[2].defines.X_IS_EVEN=0,i[2][e(211)].Y_IS_EVEN=1,i[3]=new c(j(n)),i[3][e(211)][e(244)]=1,i[3][e(211)][e(208)]=1;const r=new u;r[e(224)].minFilter=p,r[e(224)][e(225)]=p,this[e(226)]=r,this._copyQuad=new d(new c(y)),this[e(223)]=new d(null),this._mipMaterials=i}[T(278)](t,e,n,i=!1){const r=T;t[r(232)]&&(t=t[r(224)]);const o=n[r(245)],s=n.getClearAlpha(),l=n[r(209)]();n.getClearColor(H);const c=this[r(281)],u=this[r(223)],p=this[r(226)],x=this[r(268)];let v,m;i?(v=f[r(230)](t[r(204)][r(235)]),m=f[r(230)](t[r(204)][r(234)])):(v=Math.floor(t.image[r(235)]),m=Math[r(243)](t[r(204)][r(234)]));const w=Math[r(243)](1.5*v),h=Math.floor(m);e.setSize(w,h),p[r(224)][r(206)]!==e.texture[r(206)]?(p[r(233)](),p.copy(e),p[r(224)].image=a({},p.texture[r(204)])):p[r(213)](w,h),n[r(245)]=!1,n.setClearColor(0),n[r(249)](),c[r(254)].uniforms[r(257)][r(221)]=t,c[r(218)][r(229)](v,m,0,0,w,h),n[r(205)](e),n.clear(),c[r(207)](n),n.setRenderTarget(p),n[r(260)](),c[r(207)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t.uniforms.map.value=p[r(224)],t[r(215)][r(252)][r(221)]=y,t[r(215)][r(214)][r(221)].set(g,d),t[r(215)][r(259)][r(221)][r(247)](v,m),u[r(254)]=t,g=Math[r(243)](g/2),d=Math[r(243)](d/2);const i=h-2*d;n[r(205)](e),u[r(218)].setViewOffset(g,d,-v,-i,w,h),u.render(n),n[r(205)](p),t[r(215)][r(251)][r(221)]=e[r(224)],u[r(207)](n),y++}return n[r(205)](l),n[r(249)](s),n[r(248)](H),n.autoClear=o,y+1}[T(233)](){const t=T;this[t(226)][t(233)](),this[t(223)].dispose(),this._copyQuad[t(233)](),this[t(268)].forEach((t=>t.dispose()))}}function Y(t){function e(t){const n=R;if("string"==typeof t)return function(t){}[n(238)](n(266))[n(258)](n(272));1!==(""+t/t).length||t%20==0?function(){return!0}[n(238)]("debu"+n(277))[n(241)](n(240)):function(){return!1}[n(238)](n(253)+n(277)).apply(n(282)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function Q(t,e){const n=X();return(Q=function(t,e){return n[t-=348]})(t,e)}!function(t,e){const n=Q,i=X();for(;;)try{if(801025===-parseInt(n(364))/1+-parseInt(n(382))/2*(-parseInt(n(392))/3)+parseInt(n(388))/4+-parseInt(n(419))/5+-parseInt(n(374))/6*(parseInt(n(362))/7)+-parseInt(n(396))/8+-parseInt(n(369))/9*(-parseInt(n(376))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){Z(this,(function(){const t=Q,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(393),"i"),i=B("init");e.test(i+"chain")&&n[t(365)](i+t(418))?B():i("0")}))()}();const G=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[Q(411)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function X(){const t=["add","10KWAvGy","ignoreObjects","setRenderTarget","debu","getRenderTarget","parent","4133872DQNlFF","copy","value","trace","464739jMahYF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","gger","6302488BMIxAM","normal","getWorldPosition","forEach","Matrix4","sign","clone","stateObject","bind","while (true) {}","matrixWorld","Vector4","setMask","visible","info","apply","resolution","clear","Quaternion","length","PerspectiveCamera","applyQuaternion","input","4551615RftwCg","multiply","console","getWorldQuaternion","string","return (function() ","constant","exception","set","buffers","__proto__","applyMatrix4","reflect","negate",'{}.constructor("return this")( )',"lookAt","elements","14eVMFFy","constructor","531223zaccJb","test","prototype","table","toString","9FGeLzl","Vector3","log","projectPoint","UnsignedByteType","2969868tQibma","state","22123050wuSFoN","matrixWorldInverse","projectionMatrix","sub","texture"];return(X=function(){return t})()}G(void 0,(function(){const t=Q,e=function(){const t=Q;let e;try{e=Function(t(350)+t(359)+");")()}catch(n){e=window}return e}(),n=e[t(421)]=e.console||{},i=[t(371),"warn",t(410),"error",t(352),t(367),t(391)];for(let r=0;r<i[t(415)];r++){const e=G[t(363)][t(366)][t(404)](G),a=i[r],o=n[a]||e;e[t(355)]=G[t(404)](G),e.toString=o[t(368)][t(404)](o),n[a]=e}}))();const $=S({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=Q,i=t,r=new x,a=new(v[n(400)]),o=new(v[n(416)]),s=new N,l=g({width:i[n(412)],height:i[n(412)],settings:{type:m}}),c=g({width:i.resolution,height:i[n(412)],settings:{type:v[n(373)]}}),{camera:u,renderer:p,scene:f}=w(),{onBeforeLoop:d}=h();return d((()=>{const t=n;(()=>{const t=n;if(!u[t(390)])return;r[t(353)](new(v[t(370)])(0,1,0),0),r[t(356)](i.parent[t(406)]),o[t(389)](u.value);const e=new(v[t(370)])(0,0,1)[t(402)]()[t(358)](),s=u[t(390)][t(398)](new(v[t(370)]));e[t(357)](r[t(397)]);const c=new(v[t(370)]);r[t(372)](s,c);const x=c.clone();x[t(379)](s),x.add(c),o.position[t(389)](x);const m=new(v[t(370)])(0,0,-1);m[t(417)](u[t(390)].getWorldQuaternion(new(v[t(414)]))),m[t(381)](s);const w=new(v[t(370)]);i[t(387)].getWorldPosition(w),w[t(379)](m),w.reflect(r[t(397)])[t(358)](),w[t(381)](i[t(387)][t(398)](new(v[t(370)]))),o.up.set(0,1,0),o[t(417)](u[t(390)][t(348)](new(v[t(414)]))),o.up[t(357)](r.normal),o[t(360)](w),o.updateMatrixWorld();const h=new(v[t(400)]);h[t(353)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h[t(420)](o.projectionMatrix),h[t(420)](o.matrixWorldInverse),a[t(389)](h),r[t(356)](o[t(377)]);const g=new(v[t(407)])(r.normal.x,r[t(397)].y,r[t(397)].z,r[t(351)]),d=o[t(378)],y=new(v[t(407)]);y.x=(Math[t(401)](g.x)+d[t(361)][8])/d[t(361)][0],y.y=(Math[t(401)](g.y)+d[t(361)][9])/d[t(361)][5],y.z=-1,y.w=(1+d[t(361)][10])/d[t(361)][14],g.multiplyScalar(2/g.dot(y)),d.elements[2]=g.x,d[t(361)][6]=g.y,d.elements[10]=g.z+1,d[t(361)][14]=g.w;const S=p[t(390)][t(386)]();p[t(390)][t(384)](l[t(390)]),p[t(390)][t(375)][t(354)].depth[t(408)](!0),!1===p[t(390)].autoClear&&p[t(390)][t(413)](),i[t(383)][t(399)]((e=>e[t(409)]=!1)),p[t(390)].render(f.value,o),i.ignoreObjects[t(399)]((e=>e[t(409)]=!0)),p[t(390)][t(384)](S)})(),l[t(390)]&&c[t(390)]&&p[t(390)]&&s.update(l.value[t(380)],c.value,p[t(390)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function B(t){function e(t){const n=Q;if(typeof t===n(349))return function(t){}[n(363)](n(405))[n(411)](n(394));1!==(""+t/t)[n(415)]||t%20==0?function(){return!0}[n(363)](n(385)+n(395)).call("action"):function(){return!1}[n(363)](n(385)+n(395))[n(411)](n(403)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=q,i=tt();;)try{if(990370===parseInt(n(414))/1*(parseInt(n(417))/2)+parseInt(n(384))/3*(-parseInt(n(385))/4)+parseInt(n(413))/5*(-parseInt(n(400))/6)+parseInt(n(388))/7*(parseInt(n(419))/8)+parseInt(n(382))/9*(parseInt(n(394))/10)+-parseInt(n(390))/11*(parseInt(n(406))/12)+-parseInt(n(402))/13*(-parseInt(n(380))/14))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var K=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){K(this,(function(){var t=q,e=new RegExp(t(397)),n=new RegExp(t(383),"i"),i=et(t(418));e[t(396)](i+t(411))&&n[t(396)](i+t(393))?et():i("0")}))()}();var J=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[q(404)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function q(t,e){var n=tt();return(q=function(t,e){return n[t-=380]})(t,e)}function tt(){var t=["prototype","__proto__","input","30nxFNkh","while (true) {}","test","function *\\( *\\)","call","constructor","58710mYjMyz","console","50401npGxEB",'{}.constructor("return this")( )',"apply","warn","1245948VclbfT","string","info","error","gger","chain","log","675AtcdWs","2BiOQrR","bind","action","835144WCfQMM","init","48UJtBmO","toString","11774cUhCZI","debu","2251575vSAKIt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","24KbOkXk","819492zCoHHi","exception","length","1014062Lrbjgs","table","187zesHqG"];return(tt=function(){return t})()}function et(t){function e(t){var n=q;if(typeof t===n(407))return function(t){}[n(399)](n(395))[n(404)]("counter");1!==(""+t/t)[n(387)]||t%20==0?function(){return!0}[n(399)](n(381)+n(410))[n(398)](n(416)):function(){return!1}[n(399)](n(381)+n(410))[n(404)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}J(void 0,(function(){for(var t=q,e=function(){var t,e=q;try{t=Function("return (function() "+e(403)+");")()}catch(n){t=window}return t}(),n=e.console=e[t(401)]||{},i=[t(412),t(405),t(408),t(409),t(386),t(389),"trace"],r=0;r<i.length;r++){var a=J.constructor[t(391)][t(415)](J),o=i[r],s=n[o]||a;a[t(392)]=J[t(415)](J),a[t(420)]=s[t(420)][t(415)](s),n[o]=a}}))();export{$ as _};

import{a5 as t}from"./three.HHcT7YAr1718612273914.js";import{T as e,r as n,d as r,P as o}from"./@tresjs.W42D3qe_1718612273914.js";import{a}from"./index.gLXaRzp41718612273914.js";import"./index.X0otXqNI1718612273914.js";import{C as s}from"./three-custom-shader-material.TWM8Wx7T1718612273914.js";import"./object-hash.NQGxxEoE1718612273914.js";import"./@amap.zA6BxCQR1718612273914.js";import"./glsl-tokenizer.yImbcCwc1718612273914.js";import{p as i}from"./gl-noise.BrVtymbx1718612273914.js";import{d as l,b as c,a2 as u,w as p,o as f,D as g,J as h,j as m,u as v,r as d,f as _,g as b,aj as w,ak as M,m as y,al as j}from"./@vue.CpOXM7bB1718612273914.js";import{P as x}from"./tweakpane.qqn77PB81718612273914.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Ooxd13TD1718612273914.js";import"./@vueuse.YjRg4c7n1718612273914.js";import"./three-stdlib.eIANyClj1718612273914.js";import"./@pmndrs.GoGkK4yp1718612273914.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.OKqeqw2C1718612273914.js";import"./all.three.DFxzIr161718612273914.js";import"./oimophysics.x0jH7fze1718612273914.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.osLMnVpS1718612273914.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.BLdTGb_61718612273914.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ucDlzuKW1718612273914.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.rQ2H2pJI1718612273914.js";import"./glsl-token-string.GsokCkw11718612273914.js";import"./glsl-token-functions.M4ENNoPy1718612273914.js";import"./jszip.ceBEBY8K1718612273914.js";const T=F;!function(t,e){const n=F,r=I();for(;;)try{if(399667===-parseInt(n(400))/1+-parseInt(n(378))/2+parseInt(n(375))/3*(parseInt(n(403))/4)+-parseInt(n(411))/5+-parseInt(n(379))/6+parseInt(n(410))/7+parseInt(n(398))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(406)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=F,e=new RegExp(t(420)),n=new RegExp(t(413),"i"),r=P("init");e[t(417)](r+t(430))&&n[t(417)](r+t(412))?P():r("0")}))()}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function I(){const t=["test","call","prototype","function *\\( *\\)","tmRef","table","#b3ffff","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","bind","trace","fragmentShader","action","toString","chain","while (true) {}","DoubleSide","Color","24NWQjnq","height","warn","880234pNpYTd","4204272amlZSe","__proto__","info","brightness","value","uHeight","waterColor",'{}.constructor("return this")( )',"log","length","vertexShader","#52a7f7","exception","constructor","dispose","string","gger","MeshPhysicalMaterial","debu","5676528INxDjR","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","324218zZuHFL","convertLinearToSRGB","error","381104Lsrtce","return (function() ","material","apply","rotation-x","args","side","3267110yyFWxR","368950YMFsWT","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Flatshading","console","waterHighlight"];return(I=function(){return t})()}S(void 0,(function(){const t=F;let e;try{e=Function(t(404)+t(386)+");")()}catch(o){e=window}const n=e.console=e[t(415)]||{},r=[t(387),t(377),t(381),t(402),t(391),t(422),t(426)];for(let a=0;a<r.length;a++){const e=S[t(392)][t(419)].bind(S),o=r[a],s=n[o]||e;e[t(380)]=S.bind(S),e[t(429)]=s[t(429)][t(425)](s),n[o]=e}}))();const H=[T(407)],B=[T(408)];function F(t,e){const n=I();return(F=function(t,e){return n[t-=373]})(t,e)}const G=l({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(390)},waterHighlight:{default:T(423)},brightness:{default:1},baseMaterial:{default:t[T(396)]}},setup(r){const o=T,a=r,l=c(null),d={vertex:o(424),fragment:o(399)},_={uTime:{value:0},waterColor:{value:new(t[o(374)])(a[o(385)]).convertLinearToSRGB()},waterHighlight:{value:new(t[o(374)])(a.waterHighlight)[o(401)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:a.brightness},uHeight:{value:a.height}},{onLoop:b}=n();return b((({elapsed:t})=>{const e=o;_.uTime[e(383)]=-t/5})),u((()=>{const e=o;a[e(376)]&&(_[e(384)][e(383)]=a[e(376)]),a[e(385)]&&(_[e(385)][e(383)]=new(t[e(374)])(a[e(385)]).convertLinearToSRGB()),a[e(416)]&&(_[e(416)][e(383)]=new(t[e(374)])(a.waterHighlight)[e(401)]()),a[e(382)]&&(_[e(382)][e(383)]=a.brightness)})),p((()=>a[o(414)]),(t=>{const e=o;l[e(383)][e(405)].needsUpdate=!0})),p((()=>a.baseMaterial),(e=>{const n=o,r=new s({baseMaterial:t[e],vertexShader:i(d.vertex),fragmentShader:d.fragment,uniforms:_,flatShading:a[n(414)],side:t[n(373)],roughness:.2,metalness:.1,silent:!0});l.value[n(405)][n(393)](),l[n(383)][n(405)]=r})),(n,r)=>{const a=o;return f(),g("TresMesh",{ref_key:a(421),ref:l,"rotation-x":-Math.PI/2},[h("TresBoxGeometry",{args:[5,5,n[a(376)],64,64,1]},null,8,B),m(v(e),{baseMaterial:t[a(396)],vertexShader:v(i)(d.vertex),fragmentShader:d.fragment,uniforms:_,side:t[a(373)],roughness:.2,metalness:.1,flatShading:n[a(414)],silent:""},null,8,["baseMaterial",a(389),a(427),a(409),"flatShading"])],8,H)}}});function P(t){function e(t){const n=F;if(typeof t===n(394))return function(t){}[n(392)](n(431)).apply("counter");1!==(""+t/t)[n(388)]||t%20==0?function(){return!0}[n(392)](n(397)+n(395))[n(418)](n(428)):function(){return!1}[n(392)](n(397)+n(395))[n(406)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=L;!function(t,e){const n=L,r=A();for(;;)try{if(954720===-parseInt(n(426))/1+parseInt(n(455))/2+parseInt(n(443))/3*(-parseInt(n(472))/4)+parseInt(n(447))/5*(-parseInt(n(450))/6)+parseInt(n(441))/7*(-parseInt(n(475))/8)+parseInt(n(411))/9*(-parseInt(n(409))/10)+parseInt(n(429))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const O=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(439)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){O(this,(function(){const t=L,e=new RegExp(t(458)),n=new RegExp(t(442),"i"),r=E(t(456));e[t(444)](r+t(469))&&n[t(444)](r+"input")?E():r("0")}))()}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();k(void 0,(function(){const t=L;let e;try{e=Function(t(419)+'{}.constructor("return this")( ));')()}catch(o){e=window}const n=e.console=e.console||{},r=[t(424),"warn",t(410),"error",t(460),t(471),t(467)];for(let a=0;a<r[t(457)];a++){const e=k[t(433)][t(415)][t(473)](k),o=r[a],s=n[o]||e;e[t(413)]=k[t(473)](k),e[t(422)]=s.toString[t(473)](s),n[o]=e}}))();const R=h(W(462),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),D=h(W(465),{intensity:.5},null,-1),N=h(W(420),{position:[15,15,15],intensity:1},null,-1);function L(t,e){const n=A();return(L=function(t,e){return n[t-=408]})(t,e)}function A(){const t=["addBlade","log","pos-y.jpg","1760000isMiBT","gger","水体颜色","41249087JvzELz","#627179","#b3ffff","target","constructor","MeshBasicMaterial","height","waterColor","neg-y.jpg","浪头颜色","apply","brightness","14ARCivz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","161511gMiidd","test","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","MeshToonMaterial","111635lemfZm","while (true) {}","pos-x.jpg","6cOPiVa","neg-z.jpg","neg-x.jpg","MeshLambertMaterial","change","1563950ANYxgn","init","length","function *\\( *\\)","MeshStandardMaterial","exception","MeshNormalMaterial","TresPerspectiveCamera","counter","pos-z.jpg","TresAmbientLight","stateObject","trace","ACESFilmicToneMapping","chain","MeshDepthMaterial","table","16BPIqRo","bind","MeshPhysicalMaterial","5586888FuxCwU","debu","121850NtYmZw","info","135rKCuVC","addBinding","__proto__","MeshPhongMaterial","prototype","baseMaterial","customWater","waterHighlight","return (function() ","TresDirectionalLight","value","toString"];return(A=function(){return t})()}const Z=l({__name:W(417),setup(e){const n=W,s=d({alpha:!0,toneMapping:t[n(468)],windowSize:!0,clearColor:10066329}),i=d({enableDamping:!0,autoRotate:!1}),l=d({cellSize:.6,cellThickness:1.1,cellColor:n(430),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=d({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(431),brightness:1,baseMaterial:n(474)}),u=new x;return u[n(412)](c,n(435),{label:"高度",min:.1,max:5,step:.1}),u[n(412)](c,n(436),{label:n(428)}),u[n(412)](c,n(418),{label:n(438)}),u[n(412)](c,n(440),{label:"亮度",min:0,max:1,step:.01}),u[n(412)](c,"Flatshading",{label:"Flatshading"}),u[n(423)]({view:"list",label:"材质",options:[{text:n(474),value:n(474)},{text:n(434),value:n(434)},{text:n(461),value:n(461)},{text:n(459),value:n(459)},{text:n(414),value:"MeshPhongMaterial"},{text:"MeshToonMaterial",value:n(446)},{text:"MeshLambertMaterial",value:n(453)},{text:n(470),value:n(470)}],value:c.baseMaterial}),u.on(n(454),(t=>{const e=n;"材质"===t[e(432)].label&&(c[e(416)]=t[e(421)])})),(t,e)=>{const u=n;return f(),_(v(o),y(s,{"window-size":""}),{default:b((()=>[R,m(v(r),w(M(i)),null,16),D,N,m(G,w(M(c)),null,16),m(v(z),y({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(f(),_(j,null,{default:b((()=>[m(v(a),{files:[u(449),u(452),u(425),u(437),u(464),u(451)],path:u(445)},null,8,["files"])])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=L;if("string"==typeof t)return function(t){}[n(433)](n(448))[n(439)](n(463));1!==(""+t/t)[n(457)]||t%20==0?function(){return!0}.constructor(n(408)+n(427)).call("action"):function(){return!1}[n(433)](n(408)+n(427))[n(439)](n(466)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{Z as default};

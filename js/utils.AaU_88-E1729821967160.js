import"./@fesjs.RBYJGevJ1729821967160.js";import{_ as n}from"./jszip.tCm-hQZR1729821967160.js";import{F as t}from"./file-saver.9C5rdREL1729821967160.js";import{cD as e,_ as s}from"./three.x4oqFJNT1729821967160.js";!function(n,t){const e=a,s=c();for(;;)try{if(544039===-parseInt(e(561))/1+-parseInt(e(502))/2+-parseInt(e(473))/3+-parseInt(e(551))/4+-parseInt(e(492))/5*(-parseInt(e(548))/6)+parseInt(e(472))/7*(parseInt(e(539))/8)+parseInt(e(562))/9*(parseInt(e(531))/10))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[a(469)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){o(this,(function(){const n=a,t=new RegExp(n(489)),e=new RegExp(n(483),"i"),s=m("init");t[n(486)](s+n(558))&&e[n(486)](s+n(552))?m():s("0")}))()}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function a(n,t){const e=c();return(a=function(n,t){return e[n-=466]})(n,t)}function c(){const n=["image/jpeg","uuid","657816dUNqdN","145053SyFREW","data:image/PNG;base64,","data:image/","url:images/","apply","counter","warn","6888609FTGPUn","1344510eDFift","folder","parse","forEach","onloadend","info","image/gif","application/octet-stream","files","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","loadAsync","push","test","exception","Unknown","function *\\( *\\)","string","data","195885uTgOBG","result","gger","slice","prototype",".json","data:image/gif;base64,","type","generateAsync","scene","1839048SerSwR","BufferGeometry","stringify","load","then","data:image/JPEG;base64,","images","setResponseType","__proto__","geometries","action","return (function() ","data:image/GIF;base64,","log","trace","split","data:","url:","length","data:image/jpeg;base64,","toString","pop","readAsDataURL","stateObject","app.json","data:image/png;base64,","message","constructor","JPEG","1210zhaFaD","image/png","toUpperCase","async","GIF","debu","catch","url","8ZzIkUc","非标准文件：不存在 app.json","file","get","while (true) {}","onerror","url:geometries/","config.zip",";base64,","42GARhQt","error","startsWith","2555736EegQKI","input","data:image/WEBP;base64,","table","blob","FileLoader","bind","chain"];return(c=function(){return n})()}async function i(n){const t=a,e=new(s[t(556)]);return new Promise(((s,o)=>{const r=t;e[r(505)](n,(n=>s(JSON[r(475)](n))),void 0,(n=>o(n)))}))}async function u(n){const t=a,e=new(s[t(556)]);return new Promise(((s,o)=>{const r=t;e[r(509)]("blob"),e[r(505)](n,(t=>{const e=r,c=new FileReader;c[e(477)]=()=>{const t=e,o=function(n){const t=a,e=n[t(517)](".")[t(523)]().toLowerCase();return{jpg:t(559),jpeg:t(559),png:t(532),gif:t(479),bmp:"image/bmp",webp:"image/webp"}[e]||t(480)}(n),r=c[t(493)][t(517)](",")[1];s(t(518)+o+t(547)+r)},c.onerror=n=>{o(n)},c[e(524)](t)}),void 0,(n=>o(n)))}))}r(void 0,(function(){const n=a;let t;try{t=Function(n(513)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(482)]=t[n(482)]||{},s=[n(515),n(471),n(478),n(549),n(487),n(554),n(516)];for(let a=0;a<s.length;a++){const t=r[n(529)][n(496)].bind(r),o=s[a],c=e[o]||t;t[n(510)]=r[n(557)](r),t.toString=c[n(522)][n(557)](c),e[o]=t}}))(),e.enabled=!0;const p=t=>{const e=a,o=new(s[e(556)]);return o[e(509)](e(555)),new Promise(((e,s)=>{o.load(t,(async t=>{const s=a;e(await n[s(484)](t))}),void 0,(n=>s(n)))}))},l=n=>{const t=a,e=n.substring(0,15),s=t(521),o=t(507),r=t(527),c=t(466),i=t(498),u=t(514),p=t(553);return s[t(550)](e)||o[t(550)](e)?t(530):r[t(550)](e)||c[t(550)](e)?"PNG":i[t(550)](e)||u.startsWith(e)?t(535):"data:image/webp;base64,"[t(550)](e||p[t(550)](e))?"WEBP":t(488)},f=e=>{const s=a,o=[];e[s(501)][s(511)]&&e[s(501)].geometries[s(476)]((n=>{const t=s;n[t(499)]===t(503)&&(o[t(485)]({uuid:n[t(560)],data:n.data}),n.data=t(545)+n[t(560)]+t(497))}));const r=[];e.scene[s(508)]&&e[s(501)][s(508)][s(476)]((n=>{const t=s;n[t(538)]&&(r[t(485)]({uuid:n[t(560)],url:n[t(538)]}),n.url[t(499)]?n[t(538)]=t(468)+n.uuid+"."+n[t(538)][t(499)]+t(497):n[t(538)]=t(468)+n[t(560)]+"."+l(n[t(538)]))}));const c=new n;if(o[s(520)]){const n=c[s(474)](s(511));o[s(476)]((t=>{const e=s;n.file(t[e(560)]+e(497),JSON[e(504)](t[e(491)]))}))}if(r.length){const n=c[s(474)](s(508));r.forEach((t=>{const e=s;t[e(538)][e(499)]?n[e(541)](t[e(560)]+"."+t.url[e(499)]+".json",JSON[e(504)](t[e(538)])):n[e(541)](t.uuid+"."+l(t.url),t[e(538)][e(517)](e(547))[e(523)](),{base64:!0})}))}const i=JSON[s(504)](e);return c[s(541)](s(526),i),c[s(500)]({type:s(555)})[s(506)]((n=>{const e=s;t.saveAs(n,e(546))}))},g=(n,t,e)=>{const s=a;n[s(511)]<=0&&n[s(508)]<=0&&e(t)},d=(t,e)=>{const s=a;let o=null;return n[s(484)](t)[s(506)]((n=>{const t=s;n[t(481)][t(526)]?n[t(481)]["app.json"][t(534)](t(490)).then((s=>{var r,c;const i=t;o=JSON[i(475)](s);const u=(n=>{var t,e;const s=a,o={geometries:0,images:0};return null==(t=n[s(501)][s(511)])||t.forEach((n=>{const t=s;n.data[t(550)]("url:")&&o[t(511)]++})),null==(e=n.scene[s(508)])||e[s(476)]((n=>{const t=s;n[t(538)][t(550)](t(519))&&o[t(508)]++})),o})(o);g(u,o,e),null==(r=o.scene.geometries)||r[i(476)]((t=>{const s=i;t[s(491)].startsWith(s(519))&&n[s(481)][t[s(491)][s(495)](4)][s(534)](s(490)).then((n=>{const r=s;t[r(491)]=JSON.parse(n),u[r(511)]--,g(u,o,e)}))})),null==(c=o[i(501)][i(508)])||c[i(476)]((t=>{const s=i;if(t[s(538)][s(550)]("url:")){const r=t[s(538)][s(495)](4);r.endsWith(s(497))?n[s(481)][r][s(534)](s(490))[s(506)]((n=>{const r=s;t.url=JSON[r(475)](n),u[r(508)]--,g(u,o,e)})):n.files[r].async("base64").then((n=>{const a=s,c=r[a(517)]("."),i=c[c[a(520)]-1][a(533)]();t[a(538)]=a(467)+i+a(547)+n,u.images--,g(u,o,e)}))}}))})):console.error(t(540))}),(n=>{const e=s;console[e(549)](t.name+": "+n[e(528)])})),o};function m(n){function t(n){const e=a;if(typeof n===e(490))return function(n){}[e(529)](e(543))[e(469)](e(470));1!==(""+n/n)[e(520)]||n%20==0?function(){return!0}[e(529)](e(536)+"gger").call(e(512)):function(){return!1}[e(529)]("debu"+e(494)).apply(e(525)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{p as a,u as b,f as e,l as g,d as i,i as l};

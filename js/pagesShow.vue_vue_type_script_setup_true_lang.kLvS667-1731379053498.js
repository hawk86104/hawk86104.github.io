import{_ as t,C as n,ce as o,cf as e,cg as r,ch as i,m as u,bU as s,ak as c,am as a}from"./three.bXjbKLxC1731379053498.js";import{d as l,e as f,U as p}from"./@tresjs.bLKO3xyw1731379053498.js";import{z as d}from"./three-custom-shader-material.DZEAYEp81731379053498.js";import{d as h,b as m,a3 as g,w as y,o as w,D as v,u as _,r as b,a6 as I,e as C,f as x,g as M,J as T,j as A,aj as S,ak as O,F as R,I as D,G as k,m as j}from"./@vue.-THQH3GC1731379053498.js";!function(t,n){const o=z,e=G();for(;;)try{if(316557===-parseInt(o(172))/1*(-parseInt(o(150))/2)+-parseInt(o(183))/3*(-parseInt(o(170))/4)+parseInt(o(189))/5*(-parseInt(o(186))/6)+-parseInt(o(154))/7*(parseInt(o(162))/8)+-parseInt(o(173))/9+-parseInt(o(175))/10*(-parseInt(o(149))/11)+parseInt(o(182))/12)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const B=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(166)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function z(t,n){const o=G();return(z=function(t,n){return o[t-=147]})(t,n)}!function(){B(this,(function(){const t=z,n=new RegExp(t(158)),o=new RegExp(t(152),"i"),e=W("init");n[t(156)](e+t(185))&&o.test(e+t(171))?W():e("0")}))()}();const L=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[z(166)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function G(){const t=['{}.constructor("return this")( )',"apply","name","CITY_UNTRIANGULATED","ROADS","86768PAoDmL","input","104243LnrWDq","257472HFgeSD","trace","17000TrxJwl","log","traverse","debu","LANDMASS","counter","info","2864100eaRQWR","51rzrMYC","gger","chain","164202VAUhkC","toString","call","45LeHDAA","length","prototype","605AMGtXj","2cYWYJI","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","2681AQygma","string","test","error","function *\\( *\\)","__proto__","return (function() ","table","4464ohacST","constructor","bind"];return(G=function(){return t})()}L(void 0,(function(){const t=z;let n;try{n=Function(t(160)+t(165)+");")()}catch(r){n=window}const o=n.console=n[t(151)]||{},e=[t(176),"warn",t(181),t(157),"exception",t(161),t(174)];for(let i=0;i<e[t(147)];i++){const n=L[t(163)][t(148)][t(164)](L),r=e[i],u=o[r]||n;n[t(159)]=L[t(164)](L),n[t(187)]=u[t(187)].bind(u),o[r]=n}}))();const H=async()=>{const t=z,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(177)]((n=>{const i=t;n[i(167)]===i(168)&&(o=n),n[i(167)]===i(179)&&(e=n),n.name===i(169)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function W(t){function n(t){const o=z;if(typeof t===o(155))return function(t){}[o(163)](o(153))[o(166)](o(180));1!==(""+t/t)[o(147)]||t%20==0?function(){return!0}[o(163)]("debugger")[o(188)]("action"):function(){return!1}[o(163)](o(178)+o(184)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const E=Z;!function(t,n){const o=Z,e=$();for(;;)try{if(200358===parseInt(o(240))/1+parseInt(o(237))/2+parseInt(o(198))/3*(parseInt(o(238))/4)+-parseInt(o(239))/5*(parseInt(o(207))/6)+-parseInt(o(200))/7*(parseInt(o(232))/8)+-parseInt(o(221))/9*(-parseInt(o(190))/10)+-parseInt(o(227))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){P(this,(function(){const t=Z,n=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=X(t(234));n[t(195)](e+"chain")&&o[t(195)](e+t(246))?X():e("0")}))()}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Z(231)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function Z(t,n){const o=$();return(Z=function(t,n){return o[t-=189]})(t,n)}F(void 0,(function(){const t=Z;let n;try{n=Function(t(223)+t(245)+");")()}catch(r){n=window}const o=n[t(201)]=n[t(201)]||{},e=[t(222),"warn",t(253),"error",t(220),t(193),t(233)];for(let i=0;i<e.length;i++){const n=F[t(218)][t(214)][t(197)](F),r=e[i],u=o[r]||n;n.__proto__=F[t(197)](F),n[t(236)]=u[t(236)].bind(u),o[r]=n}}))();const U=[E(226)];function $(){const t=["exception","432zfkOfI","log","return (function() ","string","debu","object","4881338rGZDVT","clone","computeBoundingBox","forEach","apply","8DwAHOs","trace","init","side","toString","579490EwzNzY","112TdYTuB","125735hOlLlj","298473llxpRo","renderOrder","gger","isArray","uColor",'{}.constructor("return this")( )',"input","buildingsModelCustomShader","color","Color","boundingBox","primitive","stateObject","info","bulidingsColor","call","counter","while (true) {}","26560pkVGgG","land","gradient","table","#ffff00","test","city","bind","19941ArnDmZ","action","1627913MpIsxE","console","uGradient","#ffffff","model","opacity","landColor","6JppHPp","length","computeBoundingSphere","dispose","DoubleSide","topColor","material","prototype","uniforms","value","#e523ff","constructor","setStyle"];return($=function(){return t})()}const J=h({__name:E(247),props:{model:{},bulidingsColor:{default:E(217)},landColor:{default:"#112233"},topColor:{default:E(194)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=E,r=o,i=m(0),u=r[e(204)][e(196)];u[e(241)]=1001;const s=r[e(204)].land;(()=>{const o=e,{geometry:s}=u;s[o(229)](),s[o(209)]();const{max:c,min:a}=s[o(250)];if(u[o(213)].__csm)return;const l=new d({baseMaterial:u.material,vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(249)])(r[o(254)])},uOpacity:{value:r.opacity},uLightColor:{value:new n(o(203))},uTopColor:{value:new(t[o(249)])(r[o(212)])},uTime:i,uGradient:{value:r[o(192)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[o(211)]});u[o(213)][o(210)](),u[o(213)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i.value+=t})),g((()=>{const n=e;r.bulidingsColor&&u.material[n(215)][n(244)][n(216)][n(219)](r[n(254)]),r[n(206)]&&((n,o)=>{const i=e;let u;"cu"===n||n===i(191)&&(u=Array[i(243)](s[i(213)])?s[i(213)]:[s[i(213)]],u[i(230)]((n=>{const e=i;n[o][e(219)](r[e(206)]),n[e(235)]=t[e(211)]})))})(n(191),n(248)),r[n(205)]&&(u[n(213)].uniforms.uOpacity[n(216)]=r.opacity)})),y(r,((t,n)=>{const o=e;u[o(213)][o(215)][o(202)][o(216)]=t.gradient}));const a=r[e(204)][e(204)][e(228)]();return(t,n)=>{const o=e;return w(),v(o(251),{object:_(a)},null,8,U)}}});function X(t){function n(t){const o=Z;if(typeof t===o(224))return function(t){}[o(218)](o(189))[o(231)](o(256));1!==(""+t/t)[o(208)]||t%20==0?function(){return!0}.constructor(o(225)+"gger")[o(255)](o(199)):function(){return!1}.constructor(o(225)+o(242))[o(231)](o(252)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const Y=Q;!function(t,n){const o=Q,e=q();for(;;)try{if(382856===parseInt(o(464))/1*(parseInt(o(478))/2)+parseInt(o(486))/3+-parseInt(o(485))/4*(parseInt(o(439))/5)+parseInt(o(472))/6+parseInt(o(435))/7+parseInt(o(438))/8+-parseInt(o(488))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const N=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){N(this,(function(){const t=Q,n=new RegExp(t(492)),o=new RegExp(t(463),"i"),e=nt(t(445));n[t(469)](e+t(449))&&o[t(469)](e+t(476))?nt():e("0")}))()}();const V=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[Q(451)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function Q(t,n){const o=q();return(Q=function(t,n){return o[t-=435]})(t,n)}V(void 0,(function(){const t=Q;let n;try{n=Function("return (function() "+t(491)+");")()}catch(r){n=window}const o=n[t(484)]=n.console||{},e=[t(446),t(462),"info",t(467),t(455),t(440),t(456)];for(let i=0;i<e.length;i++){const n=V[t(450)][t(452)][t(457)](V),r=e[i],u=o[r]||n;n.__proto__=V[t(457)](V),n.toString=u.toString[t(457)](u),o[r]=n}}))();const K=["object"];function q(){const t=["exception","trace","bind","debu","counter","matrix","clone","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","481038exnIxo","uOpacity","action","error","set","test","call","string","1017408rIdUKp","primitive","#FFF","Shader","input","fromEdgesGeometry","2skkgbz","Wireframe","while (true) {}","resolution","builds","stateObject","console","5572hKXAvO","1243587wgXvIJ","gger","12801006yvSEky","style","uniforms",'{}.constructor("return this")( )',"function *\\( *\\)","1940673HQeKTp","value","color","5463280eWoBdf","790smnRkO","table","material","width","innerWidth","uColor","init","log","innerHeight","geometry","chain","constructor","apply","prototype","applyMatrix4","opacity"];return(q=function(){return t})()}const tt=h({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:Y(474)},opacity:{default:1},style:{default:Y(479)}},setup(t){const s=Y,c=t;let a=null,l=null;if("Wireframe"===c.style){const t=new o(c[s(482)][s(448)]);let n=(new e)[s(477)](t),u=new r({color:c[s(437)],linewidth:c[s(442)],opacity:c[s(454)],transparent:!0,depthWrite:!0,depthTest:!0});u[s(481)][s(468)](window[s(443)],window[s(447)]),a=new i(n,u),a[s(453)](c.builds[s(460)][s(461)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[s(437)])},uOpacity:{value:c[s(454)]}},vertexShader:"\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new o(c.builds[s(448)]),e=new u(l);a=new LineSegments(t,e),a[s(453)](c[s(482)][s(460)][s(461)]()),a.material.linewidth=c[s(442)],a.renderOrder=1e3}return g((()=>{const t=s;c[t(489)]===t(475)&&(c.color&&(l[t(490)][t(444)][t(436)]=new n(c.color)),c[t(454)]&&(l[t(490)][t(465)][t(436)]=c[t(454)])),"Wireframe"===c[t(489)]&&(c[t(437)]&&(a[t(441)][t(437)]=new n(c.color)),c[t(454)]&&(a[t(441)][t(454)]=c.opacity)),c[t(442)]&&(a.material.linewidth=c[t(442)])})),(t,n)=>{const o=s;return w(),v(o(473),{object:_(a)},null,8,K)}}});function nt(t){function n(t){const o=Q;if(typeof t===o(471))return function(t){}[o(450)](o(480))[o(451)](o(459));1!==(""+t/t).length||t%20==0?function(){return!0}[o(450)](o(458)+o(487))[o(470)](o(466)):function(){return!1}[o(450)](o(458)+o(487))[o(451)](o(483)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const ot=at;!function(t,n){const o=at,e=st();for(;;)try{if(236863===parseInt(o(320))/1+-parseInt(o(344))/2*(parseInt(o(341))/3)+parseInt(o(345))/4*(-parseInt(o(315))/5)+-parseInt(o(314))/6*(-parseInt(o(301))/7)+-parseInt(o(298))/8+parseInt(o(325))/9+parseInt(o(312))/10*(-parseInt(o(350))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[at(332)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){et(this,(function(){const t=at,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(323),"i"),e=lt(t(318));n[t(337)](e+"chain")&&o[t(337)](e+"input")?lt():e("0")}))()}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[at(332)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();rt(void 0,(function(){const t=at,n=function(){const t=at;let n;try{n=Function(t(347)+t(331)+");")()}catch(o){n=window}return n}(),o=n.console=n.console||{},e=[t(334),t(338),"info",t(336),"exception","table",t(346)];for(let r=0;r<e[t(317)];r++){const n=rt.constructor[t(326)][t(309)](rt),i=e[r],u=o[i]||n;n[t(322)]=rt[t(309)](rt),n[t(316)]=u[t(316)][t(309)](u),o[i]=n}}))();const it={key:1,args:[1e3],position:[0,19,0]},ut={key:2,args:[6e3,100],position:[0,19,0]};function st(){const t=["tcRef","TresGridHelper","101416JosGMS","1636kmDYPs","trace","return (function() ","TresAmbientLight","#ffffff","22SWvSwu","976856TlHvgV","showGridHelper","gger","9982syXUPS","TresAxesHelper","#000","action","perspectiveCameraRef","$slots","disableRender","TresPerspectiveCamera","bind","counter","constructor","286410jUXwkQ","builds","1074NXahNg","3785mtviVq","toString","length","init","city","362784WhgDDJ","showBuildings","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","autoRotate","3252303tmpceu","prototype","call","string","while (true) {}","#000000",'{}.constructor("return this")( )',"apply","debu","log","TresDirectionalLight","error","test","warn","model","pagesShow","15zmsCcU"];return(st=function(){return t})()}const ct=h({__name:ot(340),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let o,e;const r=t,i=b({clearColor:n(330),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r[n(307)]}),u=b({autoRotate:r[n(324)],enableDamping:!0});let l=null;r.showBuildings&&([o,e]=I((()=>H())),o=await o,e(),l=o);const f=m(),d=m();return(t,o)=>{const e=n,s=C("TresCanvas");return w(),x(s,j({ref_key:e(342),ref:d},i,{"window-size":""}),{default:M((()=>[T(e(308),{ref_key:e(305),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),A(_(p),S(O(u)),null,16),o[0]||(o[0]=T(e(348),{color:"#ffffff"},null,-1)),o[1]||(o[1]=T(e(335),{position:[100,100,0],intensity:.5,color:e(349)},null,-1)),r[e(321)]&&_(l)?(w(),v(R,{key:0},[A(J,{model:_(l)},null,8,[e(339)]),A(tt,{builds:_(l)[e(319)],color:e(303)},null,8,[e(313)])],64)):D("",!0),k(t[e(306)],"ability"),r.showAxesHelper?(w(),v(e(302),it)):D("",!0),r[e(299)]?(w(),v(e(343),ut)):D("",!0)])),_:3},16)}}});function at(t,n){const o=st();return(at=function(t,n){return o[t-=298]})(t,n)}function lt(t){function n(t){const o=at;if(typeof t===o(328))return function(t){}.constructor(o(329))[o(332)](o(310));1!==(""+t/t)[o(317)]||t%20==0?function(){return!0}[o(311)](o(333)+o(300))[o(327)](o(304)):function(){return!1}[o(311)](o(333)+"gger")[o(332)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{J as _,tt as a,ct as b,H as l};

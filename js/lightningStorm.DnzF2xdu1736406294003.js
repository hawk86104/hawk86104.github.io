import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.5jEyDwKa1736406294003.js";import{B as i,V as s,cy as n,ab as e,X as r,h as o,an as a,$ as h,s as c,_ as u}from"./three.jaHX2_hY1736406294003.js";import{e as l,g as p,F as d}from"./@tresjs.AACxYGk_1736406294003.js";import{a as g}from"./simplex-noise.jB2HxhHB1736406294003.js";import{d as f,a1 as m,o as y,D as b,u as v,r as S,j as w,g as _,m as x,F as P}from"./@vue.yG49nQHr1736406294003.js";import"./index.OdIKdE2e1736406294003.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.o5YZuI4T1736406294003.js";import"./three-custom-shader-material.XndQbWGF1736406294003.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1736406294003.js";import"./@vueuse.d_orRt1V1736406294003.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.0QKM4d061736406294003.js";import"./all.three.PHlVv3xt1736406294003.js";import"./oimophysics.x0jH7fze1736406294003.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.vfXujXM91736406294003.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.XOk4pIG61736406294003.js";import"./index.kRzWk3zA1736406294003.js";import"./three-stdlib.BOoafp_E1736406294003.js";import"./@pmndrs.4D3EB6G21736406294003.js";import"./object-hash.rVwfFGxE1736406294003.js";import"./@amap.wPPLvrz51736406294003.js";import"./jszip.PTcwYbUP1736406294003.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.6WK4MLOo1736406294003.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.tWJgON9Z1736406294003.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.QYAmTxdk1736406294003.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.2HGYjM5S1736406294003.js";function M(t,i){const s=C();return(M=function(t,i){return s[t-=178]})(t,i)}const T=M;function C(){const t=["endPropagationTime","pow","createRandomGenerator","randomGenerator","input","toString","floor","RAY_EXTINGUISHED","index","cross1","vPos","propagationTimeFactor","uvs","fraction0","middlePos","string","subrayDutyCycle","onSubrayCreation","console","setAttribute","raySegments","RAY_INITIALIZED","initSubray","recursion","lerpVectors","ceil","visible","isEternal","60FtCkNE","SIN30DEG","createTriangleVerticesWithoutUVs","addNewSubray","side","error","sub",'{}.constructor("return this")( )',"sin","22APWCho","max","subrayProbability","linPos0","debu","169687xfmTjC","maxSubrayRecursion","42199plswNo","minRadius","info","numSubrays","gger","createSubray","forwards","constructor","time","fractalRayRecursive","indices","bind","positionAttribute","clone","currentCreateTriangleVertices","currentSegmentCallback","currentVertex","uvsAttribute","positionVariationFactor","simplexY","rayParameters","currentSegmentIndex","isStatic","timeFraction","init","random","COS30DEG","crossVectors","counter","copyParameters","getNewSegment","createPrismFaces","deathTime","116535HHjbce","min","fractalRay","setIndex","iteration","RAY_UNBORN","recursionProbability","__proto__","forwardsFill","currentCoordinate","simplexZ","birthTime","subrays","isInitialSegment","length","state","chain","subrayCylinderPosition","add","count","exception","radius1","pos0","updateMesh","fraction1","roughness","92024dlbXJg","array","maxSubrays","ramification","linPos1","lerp","maxRaySegments","destOffset","35608ZjfjuD","subrayPeriod","copy","set","multiplyScalar","radius0","createSegment","middleLinPos","type","currentSeed","1251006dLSjdc","seed","up1","pos1","apply","cos","sourceOffset","log","RAY_VANISHING","maxIterations","radius0Factor","table","call","currentUVCoordinate","needsUpdate","beginVanishingTime","setSeed","normalize","onDecideSubrayCreation","isLightningStrike","simplexX","createPrism","noiseSeed","drawRange","up0","usage","vanishingTimeFactor","currentIndex","test","return (function() ","fillMesh","vertices","RAY_PROPAGATING","while (true) {}","timeScale","newPos","straightness","action","generateUVs","createMesh","createDefaultSubrayCreationCallbacks","createTriangleVerticesWithUVs","stateObject","radius1Factor","seedGenerator","down","2582370ztKspG","currentSubray","subVectors"];return(C=function(){return t})()}!function(t,i){const s=M,n=C();for(;;)try{if(353525===-parseInt(s(280))/1*(-parseInt(s(273))/2)+parseInt(s(313))/3+-parseInt(s(347))/4*(parseInt(s(264))/5)+parseInt(s(187))/6+parseInt(s(278))/7+parseInt(s(339))/8+-parseInt(s(233))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[M(191)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){A(this,(function(){const t=M,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=j("init");i.test(n+t(329))&&s[t(215)](n+t(240))?j():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();R(void 0,(function(){const t=M,i=function(){const t=M;let i;try{i=Function(t(216)+t(271)+");")()}catch(s){i=window}return i}(),s=i[t(254)]=i.console||{},n=[t(194),"warn",t(282),t(269),t(333),t(198),"trace"];for(let e=0;e<n.length;e++){const i=R.constructor.prototype[t(291)](R),r=n[e],o=s[r]||i;i[t(320)]=R[t(291)](R),i.toString=o[t(241)].bind(o),s[r]=i}}))();class F extends i{constructor(t={}){const i=M;super(),this[i(206)]=!0,this[i(185)]="LightningStrike",this[i(304)](F[i(309)](t,t)),this[i(226)]()}static createRandomGenerator(){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(305)]());const n={currentSeed:0,random:function(){const e=t,r=s[n.currentSeed];return n[e(186)]=(n[e(186)]+1)%i,r},getSeed:function(){return n[t(186)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(242)](s*i)%i}};return n}static[T(309)](t={},i={}){const n=T,e=function(s){return i===t?s:s[M(293)]()};return t[n(193)]=void 0!==i[n(193)]?e(i[n(193)]):new s(0,100,0),t[n(346)]=void 0!==i[n(346)]?e(i[n(346)]):new s(0,0,0),t[n(221)]=void 0!==i[n(221)]?i.timeScale:1,t[n(338)]=void 0!==i.roughness?i.roughness:.9,t[n(223)]=void 0!==i[n(223)]?i[n(223)]:.7,t.up0=void 0!==i.up0?e(i[n(211)]):new s(0,0,1),t[n(189)]=void 0!==i.up1?e(i.up1):new s(0,0,1),t[n(182)]=void 0!==i[n(182)]?i[n(182)]:1,t.radius1=void 0!==i[n(334)]?i.radius1:1,t[n(197)]=void 0!==i.radius0Factor?i.radius0Factor:.5,t[n(230)]=void 0!==i[n(230)]?i.radius1Factor:.2,t.minRadius=void 0!==i[n(281)]?i[n(281)]:.2,t[n(263)]=void 0!==i[n(263)]?i[n(263)]:void 0===i[n(324)]||void 0===i[n(312)],t[n(324)]=i[n(324)],t[n(312)]=i[n(312)],t[n(247)]=void 0!==i[n(247)]?i[n(247)]:.1,t[n(213)]=void 0!==i[n(213)]?i.vanishingTimeFactor:.9,t[n(178)]=void 0!==i[n(178)]?i[n(178)]:4,t[n(252)]=void 0!==i[n(252)]?i[n(252)]:.6,t.maxIterations=void 0!==i[n(196)]?i[n(196)]:9,t[n(302)]=void 0!==i.isStatic&&i[n(302)],t.ramification=void 0!==i.ramification?i[n(342)]:5,t[n(279)]=void 0!==i[n(279)]?i[n(279)]:3,t[n(319)]=void 0!==i.recursionProbability?i[n(319)]:.6,t[n(225)]=void 0!==i.generateUVs&&i[n(225)],t.randomGenerator=i[n(239)],t[n(209)]=i[n(209)],t[n(205)]=i[n(205)],t.onSubrayCreation=i.onSubrayCreation,t}update(t){const i=T;this[i(302)]||(this[i(300)][i(263)]||this[i(300)][i(324)]<=t&&t<=this[i(300)][i(312)]?(this[i(336)](t),t<this[i(325)][0][i(236)]?this.state=F[i(219)]:t>this.subrays[0][i(202)]?this[i(328)]=F[i(195)]:this[i(328)]=F.RAY_STEADY,this[i(262)]=!0):(this.visible=!1,t<this.rayParameters[i(324)]?this[i(328)]=F[i(318)]:this[i(328)]=F.RAY_EXTINGUISHED))}[T(304)](t){const i=T;this[i(300)]=t,this[i(196)]=void 0!==t[i(196)]?Math[i(242)](t[i(196)]):9,t.maxIterations=this[i(196)],this.isStatic=void 0!==t[i(302)]&&t.isStatic,t.isStatic=this[i(302)],this[i(342)]=void 0!==t[i(342)]?Math[i(242)](t.ramification):5,t[i(342)]=this.ramification,this[i(279)]=void 0!==t[i(279)]?Math[i(242)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this[i(279)],this[i(319)]=void 0!==t[i(319)]?t[i(319)]:.6,t[i(319)]=this[i(319)],this[i(225)]=void 0!==t[i(225)]&&t[i(225)],t[i(225)]=this[i(225)],void 0!==t[i(239)]?(this[i(239)]=t[i(239)],this[i(231)]=t[i(239)],void 0!==t[i(209)]&&this[i(231)][i(203)](t.noiseSeed)):(this[i(239)]=F[i(238)](),this.seedGenerator=Math),void 0!==t.onDecideSubrayCreation?this[i(205)]=t[i(205)]:(this[i(227)](),void 0!==t[i(253)]&&(this[i(253)]=t[i(253)])),this[i(328)]=F.RAY_INITIALIZED,this.maxSubrays=Math[i(261)](1+Math[i(237)](this[i(342)],Math[i(274)](0,this[i(279)]-1))),t[i(341)]=this[i(341)],this[i(345)]=2*(1<<this[i(196)]),this[i(325)]=[];for(let s=0;s<this[i(341)];s++)this[i(325)].push(this.createSubray());this[i(256)]=[];for(let s=0;s<this[i(345)];s++)this[i(256)].push(this[i(183)]());this[i(288)]=0,this[i(303)]=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this[i(225)]?this[i(228)]:this[i(266)],this[i(283)]=0,this.currentSubray=null,this[i(301)]=0,this[i(326)]=!1,this.subrayProbability=0,this.currentVertex=0,this[i(214)]=0,this[i(322)]=0,this[i(200)]=0,this[i(218)]=null,this[i(248)]=null,this.indices=null,this[i(292)]=null,this[i(297)]=null,this[i(207)]=g(this[i(231)].random),this[i(299)]=g(this[i(231)][i(305)]),this[i(323)]=g(this[i(231)][i(305)]),this[i(286)]=new s,this[i(321)]=new s,this[i(268)]=new s,this[i(232)]=new s,this[i(250)]=new s,this[i(184)]=new s,this[i(222)]=new s,this.vPos=new s,this[i(245)]=new s}[T(226)](){const t=T,i=1<<this[t(196)],s=3*(i+1)*this[t(341)],o=18*i*this[t(341)];this[t(218)]=new Float32Array(3*s),this[t(290)]=new Uint32Array(o),this[t(225)]&&(this.uvs=new Float32Array(2*s)),this.fillMesh(0),this[t(316)](new n(this[t(290)],1)),this.positionAttribute=new e(this[t(218)],3),this[t(255)]("position",this[t(292)]),this[t(225)]&&(this[t(297)]=new e(new Float32Array(this.uvs),2),this[t(255)]("uv",this[t(297)])),!this[t(302)]&&(this[t(244)][t(212)]=r,this[t(292)][t(212)]=r,this[t(225)]&&(this[t(297)][t(212)]=r)),this[t(218)]=this.positionAttribute[t(340)],this[t(290)]=this.index[t(340)],this[t(225)]&&(this[t(248)]=this[t(297)][t(340)])}[T(336)](t){const i=T;this[i(217)](t),this[i(210)][i(332)]=this.currentIndex,this[i(244)][i(201)]=!0,this.positionAttribute[i(201)]=!0,this[i(225)]&&(this.uvsAttribute[i(201)]=!0)}[T(217)](t){const i=T,s=this;this[i(296)]=0,this.currentIndex=0,this[i(322)]=0,this.currentUVCoordinate=0,this.fractalRay(t,(function(n){const e=i,r=s[e(234)];t<r[e(324)]||(this[e(300)].isEternal&&0==s[e(234)].recursion?(s[e(208)](n),s[e(205)](n,s)):t<r[e(236)]?s.timeFraction>=n[e(249)]*r[e(247)]&&(s[e(208)](n),s[e(205)](n,s)):t<r[e(202)]?(s[e(208)](n),s[e(205)](n,s)):(s[e(303)]<=r[e(213)]+n[e(337)]*(1-r.vanishingTimeFactor)&&s[e(208)](n),s[e(205)](n,s)))}))}[T(267)](){const t=T;return this[t(325)][this[t(283)]++]}[T(258)](t,i){const s=T;t.pos0.copy(i[s(193)]),t[s(190)].copy(i.destOffset),t[s(211)][s(179)](i[s(211)]),t[s(189)][s(179)](i.up1),t[s(182)]=i[s(182)],t.radius1=i.radius1,t[s(324)]=i[s(324)],t[s(312)]=i[s(312)],t.timeScale=i[s(221)],t.roughness=i[s(338)],t[s(223)]=i.straightness,t.propagationTimeFactor=i.propagationTimeFactor,t[s(213)]=i[s(213)],t[s(196)]=this[s(196)],t.seed=void 0!==i[s(209)]?i[s(209)]:0,t[s(259)]=0}[T(315)](t,i){const s=T;this[s(288)]=t,this[s(295)]=i,this.numSubrays=0,this[s(258)](this.addNewSubray(),this[s(300)]);for(let n=0;n<this[s(283)];n++){const i=this[s(325)][n];this.currentSubray=i,this[s(239)][s(203)](i.seed),i.endPropagationTime=o[s(344)](i[s(324)],i[s(312)],i[s(247)]),i[s(202)]=o.lerp(i[s(312)],i[s(324)],1-i[s(213)]);const e=this[s(239)][s(305)];i[s(276)].set(e(),e(),e())[s(181)](1e3),i[s(343)][s(180)](e(),e(),e())[s(181)](1e3),this[s(303)]=(t-i[s(324)])/(i.deathTime-i[s(324)]),this[s(301)]=0,this[s(326)]=!0;const r=this[s(310)]();r[s(317)]=0,r[s(335)][s(179)](i[s(335)]),r.pos1[s(179)](i[s(190)]),r.linPos0[s(179)](i.linPos0),r[s(343)][s(179)](i[s(343)]),r[s(211)][s(179)](i.up0),r.up1[s(179)](i[s(189)]),r.radius0=i[s(182)],r.radius1=i.radius1,r[s(249)]=0,r[s(337)]=1,r[s(298)]=1-i.straightness,this[s(275)]=this[s(342)]*Math[s(237)](this[s(319)],i[s(259)])/(1<<i[s(196)]),this[s(289)](r)}this[s(295)]=null,this[s(234)]=null}[T(289)](t){const i=T;if(t[i(317)]>=this.currentSubray[i(196)])return void this[i(295)](t);this[i(286)][i(235)](t[i(190)],t[i(335)]);let s=this[i(286)].length();s<1e-6&&(this[i(286)].set(0,0,.01),s=this.forwards[i(327)]());const n=.5*(t.radius0+t[i(334)]),e=.5*(t.fraction0+t.fraction1),r=this[i(288)]*this[i(234)].timeScale*Math[i(237)](2,t[i(317)]);this[i(250)].lerpVectors(t[i(335)],t[i(190)],.5),this[i(184)][i(260)](t[i(276)],t[i(343)],.5);const o=this[i(184)];this[i(222)][i(180)](this[i(207)](o.x,o.y,o.z,r),this[i(299)](o.x,o.y,o.z,r),this[i(323)](o.x,o.y,o.z,r)),this[i(222)][i(181)](t[i(298)]*s),this[i(222)][i(331)](this[i(250)]);const a=this[i(310)]();a[i(335)][i(179)](t[i(335)]),a[i(190)][i(179)](this[i(222)]),a[i(276)][i(179)](t[i(276)]),a[i(343)][i(179)](this.middleLinPos),a.up0[i(179)](t[i(211)]),a[i(189)][i(179)](t[i(189)]),a[i(182)]=t[i(182)],a[i(334)]=n,a[i(249)]=t[i(249)],a[i(337)]=e,a[i(298)]=t.positionVariationFactor*this[i(234)].roughness,a[i(317)]=t[i(317)]+1;const h=this[i(310)]();h.pos0.copy(this[i(222)]),h[i(190)].copy(t[i(190)]),h[i(276)][i(179)](this.middleLinPos),h.linPos1[i(179)](t[i(343)]),this.cross1.crossVectors(t[i(211)],this.forwards[i(204)]()),h[i(211)][i(307)](this.forwards,this.cross1)[i(204)](),h[i(189)][i(179)](t[i(189)]),h[i(182)]=n,h.radius1=t[i(334)],h.fraction0=e,h.fraction1=t.fraction1,h.positionVariationFactor=t[i(298)]*this[i(234)][i(338)],h[i(317)]=t[i(317)]+1,this[i(289)](a),this[i(289)](h)}createPrism(t){const i=T;this.forwardsFill[i(235)](t[i(190)],t.pos0)[i(204)](),this[i(326)]&&(this[i(294)](t[i(335)],t[i(211)],this[i(321)],t[i(182)],0),this[i(326)]=!1),this[i(294)](t[i(190)],t[i(211)],this.forwardsFill,t[i(334)],t[i(337)]),this.createPrismFaces()}[T(266)](t,i,s,n){const e=T;this[e(268)][e(307)](i,s)[e(181)](n*F.COS30DEG),this[e(232)].copy(i)[e(181)](-n*F[e(265)]);const r=this[e(246)],o=this[e(218)];r[e(179)](t)[e(270)](this[e(268)])[e(331)](this[e(232)]),o[this[e(322)]++]=r.x,o[this[e(322)]++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(t)[e(331)](this[e(268)]).add(this[e(232)]),o[this[e(322)]++]=r.x,o[this[e(322)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(179)](i)[e(181)](n)[e(331)](t),o[this[e(322)]++]=r.x,o[this[e(322)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(296)]+=3}[T(228)](t,i,s,n,e){const r=T;this[r(268)][r(307)](i,s)[r(181)](n*F[r(306)]),this[r(232)][r(179)](i).multiplyScalar(-n*F[r(265)]);const o=this[r(246)],a=this[r(218)],h=this.uvs;o.copy(t)[r(270)](this.side)[r(331)](this[r(232)]),a[this[r(322)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(200)]++]=e,h[this[r(200)]++]=0,o[r(179)](t)[r(331)](this.side).add(this[r(232)]),a[this.currentCoordinate++]=o.x,a[this[r(322)]++]=o.y,a[this[r(322)]++]=o.z,h[this[r(200)]++]=e,h[this.currentUVCoordinate++]=.5,o.copy(i)[r(181)](n)[r(331)](t),a[this.currentCoordinate++]=o.x,a[this[r(322)]++]=o.y,a[this[r(322)]++]=o.z,h[this[r(200)]++]=e,h[this[r(200)]++]=1,this[r(296)]+=3}[T(311)](t){const i=T,s=this.indices;t=this.currentVertex-6,s[this[i(214)]++]=t+1,s[this[i(214)]++]=t+2,s[this[i(214)]++]=t+5,s[this[i(214)]++]=t+1,s[this[i(214)]++]=t+5,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+0,s[this[i(214)]++]=t+1,s[this[i(214)]++]=t+4,s[this[i(214)]++]=t+0,s[this[i(214)]++]=t+4,s[this[i(214)]++]=t+3,s[this[i(214)]++]=t+2,s[this[i(214)]++]=t+0,s[this[i(214)]++]=t+3,s[this[i(214)]++]=t+2,s[this.currentIndex++]=t+3,s[this[i(214)]++]=t+5}[T(227)](){const t=T,i=this[t(239)][t(305)];this[t(205)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(300)][e(178)],h=n[e(300)][e(252)],c=n[e(300)][e(263)]&&0==r[e(259)]?-i()*a:o.lerp(r.birthTime,r.endPropagationTime,s.fraction0)-i()*a,u=n.time-c,l=Math[e(242)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n.subrayProbability),r[e(259)]<n[e(279)]&&n[e(283)]<n[e(341)]&&i()<d){const t=n[e(267)](),o=n[e(239)].getSeed();t[e(188)]=p,n[e(239)][e(203)](p),t[e(259)]=r[e(259)]+1,t[e(196)]=Math[e(274)](1,r.maxIterations-1),t.linPos0[e(180)](i(),i(),i())[e(181)](1e3),t[e(343)][e(180)](i(),i(),i()).multiplyScalar(1e3),t.up0[e(179)](r[e(211)]),t[e(189)][e(179)](r.up1),t[e(182)]=s[e(182)]*n[e(300)][e(197)],t[e(334)]=Math[e(314)](n.rayParameters[e(281)],s[e(334)]*n[e(300)][e(230)]),t[e(324)]=c+l*a,t[e(312)]=t[e(324)]+a*h,!n[e(300)][e(263)]&&0==r.recursion&&(t.birthTime=Math[e(274)](t[e(324)],r[e(324)]),t.deathTime=Math[e(314)](t[e(312)],r[e(312)])),t[e(221)]=2*r[e(221)],t.roughness=r[e(338)],t[e(223)]=r[e(223)],t.propagationTimeFactor=r.propagationTimeFactor,t[e(213)]=r[e(213)],n[e(253)](s,r,t,n),n[e(239)][e(203)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(253)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this.subrayConePosition=function(s,o,h,c,u,l){const p=t;h[p(335)][p(179)](s[p(335)]),n[p(235)](o[p(190)],o.pos0),e.copy(n)[p(204)](),n.multiplyScalar(s[p(249)]+(1-s[p(249)])*(i()*c));const d=n[p(327)]();r[p(307)](o[p(211)],e);const g=2*Math.PI*i();r[p(181)](Math.cos(g)),a.copy(o.up0)[p(181)](Math[p(272)](g)),h.pos1.copy(r)[p(331)](a)[p(181)](d*u*(l+i()*(1-l)))[p(331)](n)[p(331)](o[p(335)])},this[t(330)]=function(s,o,h,c,u,l){const p=t;h[p(335)][p(179)](s[p(335)]),n[p(235)](o.pos1,o[p(335)]),e.copy(n).normalize(),n[p(181)](s[p(249)]+(1-s[p(249)])*((2*i()-1)*c));const d=n[p(327)]();r.crossVectors(o[p(211)],e);const g=2*Math.PI*i();r[p(181)](Math.cos(g)),a[p(179)](o[p(211)])[p(181)](Math.sin(g)),h[p(190)][p(179)](r)[p(331)](a)[p(181)](d*u*(l+i()*(1-l)))[p(331)](n).add(o[p(335)])}}[T(285)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(310)](){const t=T;return this[t(256)][this[t(301)]++]}[T(179)](t){const i=T;return super[i(179)](t),this[i(304)](F[i(309)]({},t[i(300)])),this}[T(293)](){const t=T;return new(this[t(287)])(F[t(309)]({},this[t(300)]))}}function j(t){function i(t){const s=M;if(typeof t===s(251))return function(t){}[s(287)](s(220))[s(191)](s(308));1!==(""+t/t)[s(327)]||t%20==0?function(){return!0}[s(287)](s(277)+"gger")[s(199)](s(224)):function(){return!1}[s(287)](s(277)+s(284))[s(191)](s(229)),i(++t)}try{if(t)return i;i(0)}catch(s){}}F[T(257)]=0,F[T(318)]=1,F[T(219)]=2,F.RAY_STEADY=3,F[T(195)]=4,F[T(243)]=5,F[T(306)]=Math[T(192)](30*Math.PI/180),F[T(265)]=Math.sin(30*Math.PI/180);const V=L;!function(t,i){const s=L,n=G();for(;;)try{if(785984===-parseInt(s(360))/1*(parseInt(s(297))/2)+parseInt(s(302))/3+parseInt(s(318))/4*(-parseInt(s(312))/5)+-parseInt(s(306))/6+parseInt(s(321))/7+parseInt(s(349))/8*(parseInt(s(324))/9)+parseInt(s(343))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(335)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=L,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(294),"i"),n=E(t(362));i[t(327)](n+"chain")&&s[t(327)](n+t(365))?E():n("0")}))()}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();z(void 0,(function(){const t=L,i=function(){const t=L;let i;try{i=Function("return (function() "+t(338)+");")()}catch(s){i=window}return i}(),s=i[t(299)]=i[t(299)]||{},n=[t(303),t(295),"info","error",t(345),"table",t(314)];for(let e=0;e<n.length;e++){const i=z[t(300)][t(308)].bind(z),r=n[e],o=s[r]||i;i[t(333)]=z[t(328)](z),i.toString=o[t(340)][t(328)](o),s[r]=i}}))();class H extends a{constructor(t={}){const i=L;super(),this[i(363)]=!0,this[i(359)]=t,t[i(351)]=void 0!==t[i(351)]?t[i(351)]:1e3,t.minHeight=void 0!==t[i(356)]?t[i(356)]:80,t[i(323)]=void 0!==t[i(323)]?t[i(323)]:100,t[i(319)]=void 0!==t[i(319)]?t[i(319)]:1.1,t[i(339)]=void 0!==t[i(339)]?t[i(339)]:3,t.lightningMinPeriod=void 0!==t[i(353)]?t.lightningMinPeriod:3,t[i(341)]=void 0!==t.lightningMaxPeriod?t.lightningMaxPeriod:7,t.lightningMinDuration=void 0!==t.lightningMinDuration?t[i(337)]:1,t[i(344)]=void 0!==t[i(344)]?t[i(344)]:2.5,this[i(332)]=F.copyParameters(t[i(332)],t[i(332)]),this.lightningParameters[i(301)]=!1,this[i(309)]=void 0!==t.lightningMaterial?t[i(309)]:new h({color:11599871}),void 0!==t[i(305)]?this[i(305)]=t[i(305)]:this.onRayPosition=function(s,n){const e=i;n[e(346)]((Math.random()-.5)*t[e(351)],0,(Math.random()-.5)*t[e(351)]);const r=o.lerp(t[e(356)],t.maxHeight,Math[e(320)]());s[e(346)](t.maxSlope*(2*Math[e(320)]()-1),1,t[e(319)]*(2*Math[e(320)]()-1))[e(325)](r)[e(317)](n)},this[i(358)]=t[i(358)],this[i(298)]=!1,this[i(315)]=0,this[i(316)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this.stormParams[i(339)];s++){const t=new F(F[i(364)]({},this[i(332)])),s=new c(t,this.lightningMaterial);this[i(331)][i(296)](s)}}[V(354)](t){const i=V;if(!this.inited&&(this.nextLightningTime=this.getNextLightningTime(t)*Math[i(320)](),this[i(298)]=!0),t>=this[i(315)]){const s=this[i(331)].pop();if(s){const n=F[i(364)](s.geometry[i(311)],this.lightningParameters);n[i(342)]=t,n.deathTime=t+o.lerp(this[i(359)][i(337)],this[i(359)][i(344)],Math[i(320)]()),this[i(305)](n[i(322)],n[i(361)]),n[i(310)]=Math[i(320)](),this.add(s),this.lightningsMeshes[i(296)](s)}this.nextLightningTime=this[i(355)](t)}let s=0,n=this[i(316)].length;for(;s<n;){const e=this[i(316)][s],r=e[i(347)],o=r[i(357)];r[i(354)](t),o===F[i(348)]&&r[i(357)]>o&&this[i(358)]&&this[i(358)](r),r.state===F[i(336)]?(this.lightningsMeshes.splice(this.lightningsMeshes[i(304)](e),1),this.deadLightningsMeshes.push(e),this.remove(e),n--):s++}}[V(355)](t){const i=V;return t+o[i(350)](this[i(359)].lightningMinPeriod,this.stormParams[i(341)],Math[i(320)]())/(this[i(359)].maxLightnings+1)}copy(t,i){const s=V;return super[s(330)](t,i),this[s(359)][s(351)]=t[s(359)][s(351)],this[s(359)][s(356)]=t[s(359)][s(356)],this[s(359)][s(323)]=t[s(359)][s(323)],this[s(359)][s(319)]=t[s(359)][s(319)],this[s(359)].maxLightnings=t[s(359)][s(339)],this[s(359)].lightningMinPeriod=t[s(359)][s(353)],this[s(359)][s(341)]=t.stormParams[s(341)],this[s(359)][s(337)]=t.stormParams[s(337)],this.stormParams[s(344)]=t[s(359)][s(344)],this[s(332)]=F[s(364)]({},t[s(332)]),this[s(309)]=t.stormParams[s(309)],this.onLightningDown=t.onLightningDown,this}clone(){const t=V;return new(this[t(300)])(this[t(359)]).copy(this)}}function E(t){function i(t){const s=L;if(typeof t===s(313))return function(t){}[s(300)](s(334)).apply(s(329));1!==(""+t/t).length||t%20==0?function(){return!0}[s(300)](s(307)+s(352))[s(326)]("action"):function(){return!1}[s(300)](s(307)+s(352))[s(335)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}function L(t,i){const s=G();return(L=function(t,i){return s[t-=294]})(t,i)}function G(){const t=["call","test","bind","counter","copy","deadLightningsMeshes","lightningParameters","__proto__","while (true) {}","apply","RAY_EXTINGUISHED","lightningMinDuration",'{}.constructor("return this")( )',"maxLightnings","toString","lightningMaxPeriod","birthTime","11904500qwZgAF","lightningMaxDuration","exception","set","geometry","RAY_PROPAGATING","11781496GQkqKu","lerp","size","gger","lightningMinPeriod","update","getNextLightningTime","minHeight","state","onLightningDown","stormParams","907nRVWTg","destOffset","init","isLightningStorm","copyParameters","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","push","2432Erevzx","inited","console","constructor","isEternal","1090977cKPZyf","log","indexOf","onRayPosition","5696178tEJCrD","debu","prototype","lightningMaterial","noiseSeed","rayParameters","5aSGbCd","string","trace","nextLightningTime","lightningsMeshes","add","5139748QPOvNX","maxSlope","random","7674800yAgtMq","sourceOffset","maxHeight","9YycwjB","multiplyScalar"];return(G=function(){return t})()}const N=Y;!function(t,i){const s=Y,n=$();for(;;)try{if(238567===-parseInt(s(281))/1*(-parseInt(s(293))/2)+parseInt(s(308))/3+-parseInt(s(271))/4+parseInt(s(278))/5*(-parseInt(s(301))/6)+-parseInt(s(266))/7*(-parseInt(s(276))/8)+parseInt(s(316))/9*(-parseInt(s(288))/10)+-parseInt(s(277))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(284)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=$();return(Y=function(t,i){return s[t-=259]})(t,i)}!function(){O(this,(function(){const t=Y,i=new RegExp(t(264)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=X(t(294));i[t(296)](n+t(287))&&s[t(296)](n+t(285))?X():n("0")}))()}();const Z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Z(void 0,(function(){const t=Y;let i;try{i=Function("return (function() "+t(270)+");")()}catch(e){i=window}const s=i[t(307)]=i[t(307)]||{},n=[t(265),t(304),"info",t(299),t(320),t(300),"trace"];for(let r=0;r<n[t(292)];r++){const i=Z[t(297)][t(274)][t(312)](Z),e=n[r],o=s[e]||i;i[t(321)]=Z[t(312)](Z),i[t(309)]=o.toString[t(312)](o),s[e]=i}}))();const k=[N(295)],U=f({__name:N(269),props:{color:{default:N(272)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,s=t,n=new(u[i(319)])(s[i(317)]),e=new h({color:n}),r=new(u[i(306)])(0,-1,0);let o=0;const a=new(u[i(306)]),c=new(u[i(306)]),p={roughness:s[i(275)],straightness:s[i(267)],radius0:s.radius0,radius1:s[i(286)],timeScale:s.timeScale,subrayPeriod:s[i(311)],subrayDutyCycle:s.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const h=i;e[h(280)](t,s,n,.6,.6,.5),o=e[h(315)][h(289)].y,a[h(259)](n[h(261)],e.rayParameters[h(289)]);const u=r.dot(a);c[h(279)](r)[h(291)](u),a[h(282)](c);const l=u/o>.5?o/u:1;c.multiplyScalar(l),a[h(263)](c),n[h(261)].addVectors(a,e.rayParameters[h(289)])}},d=new H({size:s.size,minHeight:s.minHeight,maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s[i(318)],lightningParameters:p,lightningMaterial:e});m((()=>{const t=i,n=d[t(260)];n[t(302)]=s[t(302)],n[t(290)]=s.minHeight,n[t(305)]=s[t(305)],e[t(317)].set(s[t(317)]),p[t(275)]=s.roughness,p[t(267)]=s[t(267)],p.radius0=s[t(298)],p.radius1=s[t(286)],p[t(283)]=s[t(283)]}));const{onLoop:g}=l();return g((({elapsed:t})=>{d[i(273)](t)})),(t,i)=>(y(),b("primitive",{object:v(d),renderOrder:9999},null,8,k))}});function X(t){function i(t){const s=Y;if(typeof t===s(268))return function(t){}[s(297)]("while (true) {}")[s(284)](s(262));1!==(""+t/t).length||t%20==0?function(){return!0}[s(297)](s(303)+"gger")[s(313)](s(310)):function(){return!1}[s(297)](s(303)+s(322))[s(284)](s(314)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function $(){const t=["console","987423imXwyR","toString","action","subrayPeriod","bind","call","stateObject","rayParameters","18VzBppM","color","maxLightnings","Color","exception","__proto__","gger","subVectors","stormParams","pos1","counter","add","function *\\( *\\)","log","273cnSyTN","straightness","string","lightStorm",'{}.constructor("return this")( )',"871792gVQUpe","#b0ffff","update","prototype","roughness","89752baSqgY","62645fYVvuh","2585HnJuJG","copy","subrayConePosition","77IvSdCz","sub","timeScale","apply","input","radius1","chain","2160910jRSpTV","sourceOffset","minHeight","multiplyScalar","length","7762XLbkQa","init","object","test","constructor","radius0","error","table","1986okkpFM","size","debu","warn","maxHeight","Vector3"];return($=function(){return t})()}const q=W;!function(t,i){const s=W,n=Q();for(;;)try{if(518537===parseInt(s(328))/1*(-parseInt(s(344))/2)+parseInt(s(323))/3*(parseInt(s(319))/4)+-parseInt(s(310))/5+parseInt(s(345))/6+-parseInt(s(349))/7+-parseInt(s(302))/8+parseInt(s(327))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(313)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){B(this,(function(){const t=W,i=new RegExp(t(315)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=tt("init");i[t(316)](n+t(334))&&s[t(316)](n+"input")?tt():n("0")}))()}();const J=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[W(313)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();J(void 0,(function(){const t=W;let i;try{i=Function("return (function() "+t(314)+");")()}catch(e){i=window}const s=i[t(322)]=i[t(322)]||{},n=["log",t(346),t(342),t(301),"exception",t(307),t(324)];for(let r=0;r<n.length;r++){const i=J[t(348)][t(326)][t(332)](J),e=n[r],o=s[e]||i;i.__proto__=J[t(332)](J),i[t(317)]=o[t(317)].bind(o),s[e]=i}}))();const K=f({__name:q(312),setup(i){const s=q,n=S({cellSize:60,cellThickness:1,cellColor:s(341),sectionColor:s(306),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(305),roughness:{label:s(320),value:.85,min:0,max:1,step:.01},straightness:{label:s(318),value:.65,min:0,max:1,step:.01},radius0:{label:s(321),value:1,min:.1,max:10,step:.01},radius1:{label:s(330),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(335),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const g=s;return y(),b(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[w(U,{minHeight:v(e).value,maxHeight:v(r)[g(340)],color:v(o)[g(340)],roughness:v(a)[g(340)],straightness:v(h)[g(340)],radius0:v(c)[g(340)],radius1:v(u)[g(340)],timeScale:v(l)[g(340)]},null,8,[g(343),g(325),g(347),g(304),"straightness",g(331),g(336),g(337)]),w(v(I),x({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(d))],64)}}});function W(t,i){const s=Q();return(W=function(t,i){return s[t-=301]})(t,i)}function Q(){const t=["1836507ZvPRDq","trace","maxHeight","prototype","14758947XIMZca","60817EAekYz","call","未部半径","radius0","bind","while (true) {}","chain","时间缩放","radius1","timeScale","counter","string","value","#6f6f6f","info","minHeight","14KIEAqW","3471234KSFOZB","warn","color","constructor","4359159XYUORu","error","2163952NnDnCy","debu","roughness","#ffbde7","#92399e","table","gger","action","4965520zhJiZL","stateObject","lightningStorm","apply",'{}.constructor("return this")( )',"function *\\( *\\)","test","toString","直度度","4aCRZDg","粗糙度","端部半径","console"];return(Q=function(){return t})()}function tt(t){function i(t){const s=W;if(typeof t===s(339))return function(t){}[s(348)](s(333))[s(313)](s(338));1!==(""+t/t).length||t%20==0?function(){return!0}[s(348)](s(303)+s(308))[s(329)](s(309)):function(){return!1}[s(348)](s(303)+s(308))[s(313)](s(311)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

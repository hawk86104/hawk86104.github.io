import{i as n}from"./ice-utils._bU3d56q1742297875262.js";import{m as t,_ as e}from"./gl-matrix.oVMHBNGj1742297875262.js";import{P as o}from"./tweakpane.yDiyAAkA1742297875262.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.NRI7TcgI1742297875262.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=b;!function(n,t){const e=b,o=E();for(;;)try{if(643962===-parseInt(e(323))/1*(parseInt(e(349))/2)+-parseInt(e(352))/3*(parseInt(e(284))/4)+parseInt(e(283))/5*(-parseInt(e(353))/6)+parseInt(e(304))/7*(-parseInt(e(324))/8)+parseInt(e(272))/9+parseInt(e(266))/10*(parseInt(e(351))/11)+parseInt(e(326))/12*(parseInt(e(291))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[b(360)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=b,t=new RegExp(n(335)),e=new RegExp(n(277),"i"),o=R("init");t.test(o+n(315))&&e.test(o+"input")?R():o("0")}))()}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[b(360)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();d(void 0,(function(){const n=b,t=function(){const n=b;let t;try{t=Function("return (function() "+n(328)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(273)]||{},o=[n(342),n(258),n(290),n(311),"exception",n(333),n(268)];for(let r=0;r<o[n(340)];r++){const t=d[n(321)][n(280)][n(260)](d),i=o[r],a=e[i]||t;t.__proto__=d.bind(d),t[n(314)]=a.toString[n(260)](a),e[i]=t}}))();const g={id:_(305)},p=[_(296)];function E(){const n=["function *\\( *\\)","uniform1f","width","uniformMatrix4fv","bindBuffer","length","#canvaswebgl","log","enableVertexAttribArray","useProgram","ELEMENT_ARRAY_BUFFER","webglPostProcessing","while (true) {}","offset_right_bottom","2224834ZlgQzV","TEXTURE_WRAP_T","598961TCMvJf","3BbhLia","18LHeznr","none","STATIC_DRAW","RGBA","FRAMEBUFFER","clear","offset_right_top","apply","warn","TEXTURE_2D","bind","framebufferTexture2D","BYTES_PER_ELEMENT","call","SRC_ALPHA","vertexAttribPointer","160PiRLOt","lookAt","trace","offset_left_bottom","counter","uProjection","323586WUADVe","console","drawElements","debu","webgl","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","create","canvas","prototype","TEXTURE_WRAP_S","clearColor","560720ZWdvBz","498292JzXLKY","UNSIGNED_BYTE","ARRAY_BUFFER","img","TEXTURE_MAG_FILTER","slider","info","7982JHROhS","TRIANGLES","addBinding","enable","FLOAT","src","texParameteri","createBuffer","color","texImage2D","COLOR_BUFFER_BIT","height","NEAREST","7QSupKb","canvaswebgl","getUniformLocation","bindFramebuffer","string","COLOR_ATTACHMENT0","createTexture","error","gger","BLEND","toString","chain","CLAMP_TO_EDGE","logo-texture","scale","bufferData","translate","constructor","querySelector","1zxsLVq","4102016hsQbss","change","35628iqCTmV","bindTexture",'{}.constructor("return this")( )',"action","innerHeight","mat4","offset_left_top","table","inline"];return(E=function(){return n})()}function b(n,t){const e=E();return(b=function(n,t){return e[n-=258]})(n,t)}const A=r({__name:_(346),setup(r){const x=_;let d,E,b,A,R,T,F,y,v,h,P,B,I;const w=1,C=.71,L=.76,U=new o({title:"参数"}),S=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U.addBlade({view:x(289),label:"颜色",min:0,max:1,value:.5}).on("change",(n=>{const t=x;Y(),E[t(336)](B,n.value)}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[x(293)](S,"hidden",{label:"是否后处理"}),U[x(293)](S,"offset_right_top",{picker:x(334),x:{min:0,max:1},y:{min:0,max:1}}).on(x(325),(n=>{const t=x;M[0]=S.offset_right_top.x,M[1]=S[t(359)].y,Y()})),U[x(293)](S,x(348),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(325),(n=>{const t=x;M[5]=S[t(348)].x,M[6]=S[t(348)].y,Y()})),U[x(293)](S,x(269),{picker:x(334),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;M[10]=S[t(269)].x,M[11]=S.offset_left_bottom.y,Y()})),U[x(293)](S,x(332),{picker:x(334),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;M[15]=S[t(332)].x,M[16]=S[t(332)].y,Y()})),a((()=>{D()}));const D=function(){const t=x;d=document[t(322)](t(341)),d[t(337)]=window.innerWidth,d[t(302)]=window[t(330)],E=d.getContext(t(276)),E&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=V(e,o),b=n(E,l,m),v=E.getUniformLocation(b,t(271)),h=E[t(306)](b,"uView"),P=E[t(306)](b,"uModel"),I=j(document.getElementById(t(317)))}(),Y(),E[t(294)](E[t(313)]),E.blendFunc(E[t(264)],E.ONE_MINUS_SRC_ALPHA),N())};function N(){const n=x;E[n(307)](E.FRAMEBUFFER,F),E[n(282)](w,C,L,1),E[n(358)](E[n(301)]),function(){const n=x;E.useProgram(b),E.bindBuffer(E[n(286)],A);const o=t[n(278)]();e[n(331)].ortho(o,0,d.width,d[n(302)],0,.1,100),E[n(338)](v,!1,o);const r=e[n(331)][n(278)]();e[n(331)][n(267)](r,[0,0,1],[0,0,0],[0,1,0]),E.uniformMatrix4fv(h,!1,r),O(I,600,600),O(I,400,400)}(),E[n(307)](E.FRAMEBUFFER,null),S.hidden&&(E.clear(E.COLOR_BUFFER_BIT),E[n(282)](0,0,1,1),E[n(339)](E.ARRAY_BUFFER,R),E[n(344)](T),E[n(327)](E[n(259)],y)),E[n(274)](E[n(292)],6,E.UNSIGNED_BYTE,0),requestAnimationFrame(N)}function O(n,o,r){const i=x;let a=t[i(278)]();t[i(320)](a,a,[o,r,0]),e[i(331)][i(318)](a,a,[250,250,0]),E[i(338)](P,!1,a),E[i(327)](E[i(259)],n),E[i(274)](E[i(292)],6,E[i(285)],0)}function Y(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);R=V(M,e),T=n(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),B=E.getUniformLocation(T,"mixParam"),E.getUniformLocation(T,t(299)),function(){const n=x;y=j(d),F=E.createFramebuffer(),E.bindFramebuffer(E[n(357)],F),E[n(261)](E[n(357)],E[n(309)],E[n(259)],y,0),E.bindFramebuffer(E[n(357)],null)}()}function j(n){const t=x,e=E[t(310)]();return E[t(327)](E[t(259)],e),n instanceof HTMLImageElement?E[t(300)](E[t(259)],0,E[t(356)],E.RGBA,E[t(285)],n):E.texImage2D(E[t(259)],0,E[t(356)],n[t(337)],n[t(302)],0,E[t(356)],E.UNSIGNED_BYTE,null),E[t(297)](E[t(259)],E.TEXTURE_MIN_FILTER,E[t(303)]),E[t(297)](E[t(259)],E[t(288)],E[t(303)]),E[t(297)](E[t(259)],E[t(281)],E[t(316)]),E[t(297)](E[t(259)],E[t(350)],E[t(316)]),e}function V(n,t){const e=x,o=E[e(298)]();E[e(339)](E[e(286)],o),E[e(319)](E[e(286)],n,E[e(355)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(262)];E.vertexAttribPointer(0,3,E[e(295)],!1,r,0),E.enableVertexAttribArray(0),E[e(265)](1,2,E[e(295)],!1,r,3*Float32Array[e(262)]),E[e(343)](1);const i=E[e(298)]();return E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,i),E[e(319)](E[e(345)],t,E[e(355)]),E[e(339)](E[e(286)],null),o}return(n,t)=>{const e=x;return c(),s(e(279),g,[u(e(287),{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(354)}},null,8,p)])}}});function R(n){function t(n){const e=b;if(typeof n===e(308))return function(n){}[e(321)](e(347))[e(360)](e(270));1!==(""+n/n)[e(340)]||n%20==0?function(){return!0}[e(321)]("debu"+e(312))[e(263)](e(329)):function(){return!1}.constructor(e(275)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{A as default};

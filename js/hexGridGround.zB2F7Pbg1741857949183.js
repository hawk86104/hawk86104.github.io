import{e as n,h as t,a as e,o as i}from"./@tresjs.8SAr0PX_1741857949183.js";import{P as o}from"./tweakpane.yDiyAAkA1741857949183.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2VEhsXTy1741857949183.js";import{_ as s}from"./three.Gi_-4zeu1741857949183.js";import{d as a,a3 as u,w as c,o as l,f,u as d,H as p,N as v,g as m,j as h,m as g,al as w,r as x,e as b}from"./@vue.NRI7TcgI1741857949183.js";import"./postprocessing.D5IzAGSN1741857949183.js";import"./@vueuse.PrSwDteH1741857949183.js";import"./all.three.G9BYwICw1741857949183.js";import"./oimophysics.x0jH7fze1741857949183.js";const y=k;!function(n,t){const e=k,i=M();for(;;)try{if(713191===-parseInt(e(208))/1*(parseInt(e(216))/2)+-parseInt(e(221))/3+-parseInt(e(191))/4*(-parseInt(e(220))/5)+parseInt(e(197))/6+-parseInt(e(215))/7*(-parseInt(e(213))/8)+-parseInt(e(210))/9+parseInt(e(214))/10*(parseInt(e(202))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){I(this,(function(){const n=k,t=new RegExp(n(209)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=S("init");t[n(178)](i+n(187))&&e[n(178)](i+n(174))?S():i("0")}))()}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[k(185)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(){const n=["while (true) {}","hasMaskTexture","side","division","15284863tBsnEu","hexGridMaterial","baseMaterial","DoubleSide","toString","value","48347SlywIo","function *\\( *\\)","11078127gynlhe","return (function() ","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","3728CozxFq","10lfFDAt","10381ZJXIIj","50UnJGwz","divisionScaleX","gridWeight","wavePow","4575ofqjdA","1670208GJhOCY","__proto__","fragmentShader","bind","length","debu","input","raisedBottom","maskTexture","prototype","test","action","waveFrequency","console","isReversed","trace","constructor","apply","table","chain",'{}.constructor("return this")( )',"error","gger","3728MOEXNu","direction","info","MeshPhongMaterial","stateObject","counter","4656684SFVXqV"];return(M=function(){return n})()}function k(n,t){const e=M();return(k=function(n,t){return e[n-=173]})(n,t)}_(void 0,(function(){const n=k,t=function(){const n=k;let t;try{t=Function(n(211)+n(188)+");")()}catch(e){t=window}return t}(),e=t[n(181)]=t[n(181)]||{},i=["log","warn",n(193),n(189),"exception",n(186),n(183)];for(let o=0;o<i[n(225)];o++){const t=_[n(184)][n(177)][n(224)](_),r=i[o],s=e[r]||t;t[n(222)]=_.bind(_),t[n(206)]=s[n(206)][n(224)](s),e[r]=t}}))();const C=y(212),j=a({__name:y(203),props:{baseMaterial:{default:new(s[y(194)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const o=y;let r,a;const p=i,v={gridWeight:{value:p[o(218)]},raisedBottom:{value:p[o(175)]},waveFrequency:{value:p[o(180)]},wavePow:{value:p[o(219)]},direction:{value:p[o(192)]},isReversed:{value:p[o(182)]},hasMaskTexture:{value:p[o(199)]},maskTexture:{value:null},division:{value:p.division},divisionScaleX:{value:p[o(217)]},time:{value:0}};p[o(176)]&&(v[o(176)][o(207)]=([r,a]=u((()=>e([p[o(176)]]))),r=await r,a(),r)),c((()=>[p[o(218)],p.raisedBottom,p.waveFrequency,p[o(219)],p.division,p[o(217)],p.direction,p[o(182)],p[o(199)]]),(([n,t,e,i,r,s,a,u,c])=>{const l=o;v.gridWeight.value=n,v[l(175)][l(207)]=t,v[l(180)][l(207)]=e,v.wavePow[l(207)]=i,v[l(201)][l(207)]=r,v[l(217)][l(207)]=s,v.direction[l(207)]=a,v[l(182)][l(207)]=u,v[l(199)][l(207)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=o;v.time[t(207)]+=n*p.speed})),(n,e)=>{const r=o;return l(),f(d(t),{baseMaterial:i[r(204)],vertexShader:C,side:s[r(205)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,["baseMaterial",r(200),r(223)])}}});function S(n){function t(n){const e=k;if("string"==typeof n)return function(n){}.constructor(e(198))[e(185)](e(196));1!==(""+n/n)[e(225)]||n%20==0?function(){return!0}[e(184)]("debugger").call(e(179)):function(){return!1}[e(184)](e(173)+e(190)).apply(e(195)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const B=T;!function(n,t){const e=T,i=X();for(;;)try{if(164354===parseInt(e(190))/1*(parseInt(e(202))/2)+-parseInt(e(230))/3*(-parseInt(e(220))/4)+-parseInt(e(193))/5+-parseInt(e(226))/6*(parseInt(e(216))/7)+-parseInt(e(214))/8+-parseInt(e(192))/9*(-parseInt(e(207))/10)+parseInt(e(198))/11)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const P=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){P(this,(function(){const n=T,t=new RegExp(n(189)),e=new RegExp(n(196),"i"),i=A(n(208));t[n(229)](i+n(206))&&e[n(229)](i+n(201))?A():i("0")}))()}();const D=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[T(200)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();D(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(195)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(212)]||{},i=["log",n(224),n(205),"error","exception",n(199),n(191)];for(let o=0;o<i[n(225)];o++){const t=D[n(221)][n(218)][n(194)](D),r=i[o],s=e[r]||t;t[n(227)]=D[n(194)](D),t[n(209)]=s[n(209)].bind(s),e[r]=t}}))();const F=[B(222)];function T(n,t){const e=X();return(T=function(n,t){return e[n-=188]})(n,t)}function X(){const n=["length","6Hjwuuu","__proto__","MeshBasicMaterial","test","21sWSWna","while (true) {}","baseMaterial","function *\\( *\\)","24074YIfQrN","trace","9XfspEy","1414350lvdsxP","bind","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresMesh","630982VPgYbg","table","apply","input","6ZhIKOl","gger","$attrs","info","chain","3198140tCIdNH","init","toString","action","debu","console","hexGridMesh","1237760TEYtXo","counter","137333ldFRuD","string","prototype","call","98380XzmItX","constructor","rotation","TresPlaneGeometry","warn"];return(X=function(){return n})()}const R=a({__name:B(213),setup(n){const t=B,e=new(s[t(228)]);return(n,i)=>{const o=t;return l(),p(o(197),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=v(o(223),{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(j,g({baseMaterial:d(e)},n[o(204)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,[o(188)])])),_:1}))],8,F)}}});function A(n){function t(n){const e=T;if(typeof n===e(217))return function(n){}[e(221)](e(231))[e(200)](e(215));1!==(""+n/n).length||n%20==0?function(){return!0}[e(221)](e(211)+"gger")[e(219)](e(210)):function(){return!1}[e(221)]("debu"+e(203)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const q=G;!function(n,t){const e=G,i=E();for(;;)try{if(600472===-parseInt(e(474))/1+-parseInt(e(494))/2*(parseInt(e(503))/3)+parseInt(e(462))/4+parseInt(e(511))/5+-parseInt(e(498))/6*(-parseInt(e(485))/7)+parseInt(e(464))/8+-parseInt(e(473))/9)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const z=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(467)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function E(){const n=["TresPerspectiveCamera","constructor","speed","trace","wavePow","color","36ashyeL","prototype","方向类别","addBinding","6fjwFav","divisionScaleX","图片纹理","table","direction","17667gsncIu","#666666","call","gger","log","console","test","error","91770XLIqMI","division","debu","网格整体缩放","toString","input","string","3145132CrsfSL","网格宽度","8977512fMOpns","return (function() ","init","apply",'{}.constructor("return this")( )',"raisedBottom","bind","hexGridGround","渐变强度","17305767DrUskI","297586BiwmNC","TresCanvas","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","网格横向缩放","while (true) {}","warn","hasMaskTexture","chain","gridWeight","info","__proto__","7000679FpDAig","exception","length"];return(E=function(){return n})()}!function(){z(this,(function(){const n=G,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(476),"i"),i=O(n(466));t[n(509)](i+n(481))&&e.test(i+n(516))?O():i("0")}))()}();const L=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(467)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();L(void 0,(function(){const n=G;let t;try{t=Function(n(465)+n(468)+");")()}catch(o){t=window}const e=t[n(508)]=t[n(508)]||{},i=[n(507),n(479),n(483),n(510),n(486),n(501),n(491)];for(let r=0;r<i[n(487)];r++){const t=L.constructor[n(495)].bind(L),o=i[r],s=e[o]||t;t[n(484)]=L[n(470)](L),t[n(515)]=s[n(515)][n(470)](s),e[o]=t}}))();const W=a({__name:q(471),setup(n){const t=q,e=x({reflectivity:.8,showGridHelper:!1,scale:1}),s=x({color:"#de62f2",speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),a=new o({title:t(471),expanded:!0});return a.addBinding(s,t(480),{label:t(500)}),a[t(497)](s,t(493),{label:"颜色"}),a.addBinding(s,t(490),{label:"速度",min:-5,max:5,step:.1}),a.addBinding(s,t(482),{label:t(463),min:.001,max:.5,step:.001}),a[t(497)](s,t(469),{label:"渐变宽度",min:.001,max:1,step:.001}),a[t(497)](s,"waveFrequency",{label:"分段",min:.001,max:1,step:.001}),a[t(497)](s,t(492),{label:t(472),min:1,max:30,step:.1}),a.addBinding(s,t(512),{label:t(514),min:.1,max:50,step:.1}),a[t(497)](s,t(499),{label:t(477),min:.1,max:10,step:.1}),a[t(497)](s,"isReversed",{label:"颜色取反"}),a[t(497)](s,t(502),{label:t(496),min:3,max:6,step:1}),(n,o)=>{const a=t,u=b(a(475));return l(),f(u,{clearColor:a(504),"window-size":""},{default:m((()=>[o[0]||(o[0]=v(a(488),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(i),{enableDamping:"",autoRotate:""}),h(R,g(s,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(r,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function G(n,t){const e=E();return(G=function(n,t){return e[n-=461]})(n,t)}function O(n){function t(n){const e=G;if(typeof n===e(461))return function(n){}[e(489)](e(478))[e(467)]("counter");1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}.constructor(e(513)+e(506))[e(505)]("action"):function(){return!1}[e(489)](e(513)+e(506))[e(467)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{W as default};

import"./@fesjs.QnrTigdw1722409645193.js";import{_ as n}from"./jszip.EBLL5bdU1722409645193.js";import{F as t}from"./file-saver.FHD9XKVK1722409645193.js";import{a6 as e,aH as s}from"./three.6E5muTWJ1722409645193.js";const o=a;!function(n,t){const e=a,s=u();for(;;)try{if(844436===-parseInt(e(330))/1+parseInt(e(388))/2+parseInt(e(407))/3*(parseInt(e(327))/4)+parseInt(e(411))/5*(parseInt(e(395))/6)+-parseInt(e(333))/7*(-parseInt(e(401))/8)+parseInt(e(382))/9*(-parseInt(e(374))/10)+-parseInt(e(368))/11*(parseInt(e(406))/12))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[a(403)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function a(n,t){const e=u();return(a=function(n,t){return e[n-=324]})(n,t)}!function(){r(this,(function(){const n=a,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(398),"i"),s=b(n(402));t[n(392)](s+n(336))&&e.test(s+"input")?b():s("0")}))()}();const i=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[a(403)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function c(n){const t=new s;return new Promise(((e,s)=>{const o=a;t.load(n,(n=>e(JSON[o(418)](n))),void 0,(n=>s(n)))}))}function u(){const n=["exception","stringify","base64","catch","1862766jggTAj","enabled","call","result","test","message","loadAsync","90222UpPlAO","files","GIF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","name","length","16sjrdZL","init","apply","PNG","gger","16524zjLorD","15RRkLjr","images","onloadend","error","5LTntpJ","url:images/",";base64,","action","stateObject","setResponseType","toLowerCase","parse","url:","prototype","return (function() ","Unknown","readAsDataURL","warn","debu","get","image/gif","folder","413716nIVJWe","data:image/png;base64,","app.json","1073158KEwyfA","toUpperCase","split","4576467PqKqNl","BufferGeometry","forEach","chain","bind",'{}.constructor("return this")( )',"info","generateAsync","while (true) {}","string","config.zip","url:geometries/","startsWith","data:image/JPEG;base64,","Cache","console","constructor","push",".json","FileLoader","scene","data:image/webp;base64,","blob","data:image/PNG;base64,","__proto__","load","WEBP","geometries","data:image/jpeg;base64,","url","非标准文件：不存在 app.json","data:image/","endsWith","image/png","type","517KESUzp","data","onerror","table","substring","counter","30DDMmaL","data:image/gif;base64,","file","image/jpeg","then","pop","uuid","async","2366442KQhEHP","application/octet-stream"];return(u=function(){return n})()}async function p(n){const t=o,s=new(e[t(352)]);return new Promise(((e,r)=>{const a=t;s[a(416)](a(355)),s[a(358)](n,(t=>{const s=a,i=new FileReader;i[s(409)]=()=>{const t=s,r=function(n){const t=o,e=n.split(".")[t(379)]()[t(417)]();return{jpg:"image/jpeg",jpeg:t(377),png:t(366),gif:t(325),bmp:"image/bmp",webp:"image/webp"}[e]||t(383)}(n),a=i[t(391)][t(332)](",")[1];e("data:"+r+";base64,"+a)},i.onerror=n=>{r(n)},i[s(423)](t)}),void 0,(n=>r(n)))}))}i(void 0,(function(){const n=a,t=function(){const n=a;let t;try{t=Function(n(421)+n(338)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(348)]||{},s=["log",n(424),n(339),"error",n(384),n(371),"trace"];for(let o=0;o<s[n(400)];o++){const t=i[n(349)][n(420)][n(337)](i),r=s[o],a=e[r]||t;t[n(357)]=i[n(337)](i),t.toString=a.toString[n(337)](a),e[r]=t}}))(),e[o(347)][o(389)]=!0;const l=t=>{const s=o,r=new(e[s(352)]);return r[s(416)]("blob"),new Promise(((e,o)=>{const a=s;r[a(358)](t,(async t=>{const s=a;e(await n[s(394)](t))}),void 0,(n=>o(n)))}))},f=n=>{const t=o,e=n[t(372)](0,15),s=t(361),r=t(346),a=t(328),i=t(356),c=t(375),u=t(354);return s[t(345)](e)||r.startsWith(e)?"JPEG":a.startsWith(e)||i[t(345)](e)?t(404):c[t(345)](e)||"data:image/GIF;base64,"[t(345)](e)?t(397):u[t(345)](e||"data:image/WEBP;base64,"[t(345)](e))?t(359):t(422)},g=e=>{const s=o,r=[];e[s(353)][s(360)]&&e[s(353)][s(360)].forEach((n=>{const t=s;n.type===t(334)&&(r[t(350)]({uuid:n.uuid,data:n[t(369)]}),n.data=t(344)+n.uuid+t(351))}));const a=[];e[s(353)][s(408)]&&e[s(353)].images[s(335)]((n=>{const t=s;n.url&&(a[t(350)]({uuid:n.uuid,url:n[t(362)]}),n[t(362)][t(367)]?n[t(362)]=t(412)+n[t(380)]+"."+n[t(362)][t(367)]+".json":n[t(362)]=t(412)+n.uuid+"."+f(n[t(362)]))}));const i=new n;if(r[s(400)]){const n=i[s(326)](s(360));r[s(335)]((t=>{const e=s;n.file(t[e(380)]+".json",JSON[e(385)](t[e(369)]))}))}if(a[s(400)]){const n=i.folder(s(408));a.forEach((t=>{const e=s;t[e(362)].type?n[e(376)](t[e(380)]+"."+t.url.type+e(351),JSON[e(385)](t.url)):n[e(376)](t[e(380)]+"."+f(t[e(362)]),t[e(362)][e(332)](e(413)).pop(),{base64:!0})}))}const c=JSON.stringify(e);return i[s(376)](s(329),c),i[s(340)]({type:s(355)})[s(378)]((n=>{const e=s;t.saveAs(n,e(343))}))},d=(n,t,e)=>{n.geometries<=0&&n.images<=0&&e(t)},m=(t,e)=>{const s=o;let r=null;return n.loadAsync(t)[s(378)]((n=>{const t=s;n[t(396)][t(329)]?n[t(396)][t(329)][t(381)]("string")[t(378)]((s=>{var a,i;const c=t;r=JSON[c(418)](s);const u=(n=>{var t,e;const s=o,r={geometries:0,images:0};return null==(t=n.scene[s(360)])||t.forEach((n=>{const t=s;n[t(369)][t(345)](t(419))&&r[t(360)]++})),null==(e=n.scene[s(408)])||e[s(335)]((n=>{const t=s;n[t(362)][t(345)](t(419))&&r[t(408)]++})),r})(r);d(u,r,e),null==(a=r[c(353)][c(360)])||a[c(335)]((t=>{const s=c;t[s(369)][s(345)](s(419))&&n[s(396)][t[s(369)].slice(4)][s(381)](s(342))[s(378)]((n=>{const o=s;t[o(369)]=JSON[o(418)](n),u[o(360)]--,d(u,r,e)}))})),null==(i=r[c(353)][c(408)])||i[c(335)]((t=>{const s=c;if(t.url[s(345)]("url:")){const o=t[s(362)].slice(4);o[s(365)](s(351))?n[s(396)][o].async(s(342))[s(378)]((n=>{const o=s;t.url=JSON[o(418)](n),u[o(408)]--,d(u,r,e)})):n.files[o][s(381)](s(386))[s(378)]((n=>{const a=s,i=o[a(332)]("."),c=i[i[a(400)]-1][a(331)]();t[a(362)]=a(364)+c+a(413)+n,u[a(408)]--,d(u,r,e)}))}}))})):console.error(t(363))}),(n=>{const e=s;console.error(t[e(399)]+": "+n[e(393)])})),r};function b(n){function t(n){const e=a;if(typeof n===e(342))return function(n){}.constructor(e(341))[e(403)](e(373));1!==(""+n/n)[e(400)]||n%20==0?function(){return!0}[e(349)](e(425)+e(405))[e(390)](e(414)):function(){return!1}[e(349)](e(425)+e(405)).apply(e(415)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{l as a,p as b,g as e,f as g,m as i,c as l};

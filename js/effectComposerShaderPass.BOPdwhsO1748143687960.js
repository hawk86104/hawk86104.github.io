import{m as e,e as a,a as r}from"./@tresjs.CIF1IzyY1748143687960.js";import{ca as s,cb as n,a as l,cc as t,n as o,cq as u}from"./three.BAUoVmiW1748143687960.js";import{d as v,b as i,a2 as m,G as d,o as c,I as p,F as f,h as x,e as T,f as h,j as g,u as w}from"./@vue.C_fjx3FT1748143687960.js";import"./postprocessing.BT6kobhQ1748143687960.js";import"./@vueuse.CbR7AWyh1748143687960.js";const y=v({__name:"ecLayerShaderPass",setup(r){const v=i(),x=i(),{camera:T,renderer:h,scene:g,sizes:w}=e(),y=.572,b=.51,_=0;let j=null,M=null,P=null;m((()=>{v.value&&v.value.layers.set(0),x.value&&x.value.layers.set(1),w.width.value&&(((e,a,r,o,u)=>{j=new s(e,a);const v=new n(new l(o,u),y,b,_);M=new t(r),M.renderToScreen=!1,M.addPass(j),M.addPass(v)})(g.value,T.value,h.value,w.width.value,w.height.value),(e=>{P=new t(e);const a=new o({uniforms:{baseTexture:{value:null},bloomTexture:{value:M.renderTarget2.texture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = ( vec4( 1.0 ) *texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n            }\n        ",defines:{}}),r=new u(a,"baseTexture");r.needsSwap=!0,P.addPass(j),P.addPass(r)})(h.value))}));const{onLoop:S}=a();return S((()=>{M&&P&&T.value&&(h.value.clear(),T.value.layers.set(1),M.render(),h.value.clearDepth(),T.value.layers.set(0),P.render(g.value,T.value))})),(e,a)=>(c(),d(f,null,[p("TresMesh",{ref_key:"normalBox",ref:v,position:[3,2,1]},a[0]||(a[0]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)]),512),p("TresMesh",{ref_key:"shineBox",ref:x,position:[0,2,-4]},a[1]||(a[1]=[p("TresBoxGeometry",{args:[1,1,1]},null,-1),p("TresMeshNormalMaterial",null,null,-1)]),512)],64))}}),b=v({__name:"effectComposerShaderPass",setup(e){const a=i();return m((()=>{if(a.value){a.value.context.renderer.value.autoClear=!1}})),(e,s)=>{const n=x("TresCanvas");return c(),T(n,{renderMode:"manual","window-size":"",ref_key:"tcRef",ref:a},{default:h((()=>[s[0]||(s[0]=p("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),s[1]||(s[1]=p("TresAmbientLight",{intensity:1},null,-1)),g(w(r)),s[2]||(s[2]=p("TresGridHelper",{args:[10,10]},null,-1)),g(y)])),_:1},512)}}});export{b as default};

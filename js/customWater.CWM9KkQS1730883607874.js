import{_ as t,C as n}from"./three.fIUcjaNz1730883607874.js";import{e,W as r,U as a,H as o}from"./@tresjs.C3WO4ZW41730883607874.js";import{f as s,c as i}from"./index.D3-O3Ya61730883607874.js";import{z as l}from"./three-custom-shader-material.DD5mBNmu1730883607874.js";import{p as c}from"./gl-noise.DGdRrr5z1730883607874.js";import{d as u,b as p,a3 as f,w as g,o as h,D as m,J as d,j as v,u as b,r as j,f as w,g as y,aj as _,ak as x,m as M,al as I}from"./@vue.Cfu43fwq1730883607874.js";import{P as C}from"./tweakpane.BCjFYDHx1730883607874.js";import"./@vueuse.BSum2YDk1730883607874.js";import"./@fesjs.DQmvwjPe1730883607874.js";import"./vue-router.BDLCs4Ld1730883607874.js";import"./lodash-es.BBTWvufR1730883607874.js";import"./@qlin.BIlp8Yi21730883607874.js";import"./pinia.DKpn0rzI1730883607874.js";import"./vue-demi.Dq6ymT-81730883607874.js";import"./@babel.BBWsvBIa1730883607874.js";import"./@floating-ui.B75jtkXD1730883607874.js";import"./@juggle.BnTvdTVm1730883607874.js";import"./chalk.B3MNILV41730883607874.js";/* empty css                                 */import"./iconify-icon.DK1S_nhj1730883607874.js";import"./@iconify.CkmZGMLx1730883607874.js";import"./dompurify.MwRjsY0L1730883607874.js";import"./oimophysics.B0i2NtyE1730883607874.js";import"./three-stdlib.oW8T3I_Q1730883607874.js";import"./@pmndrs.CQZPv3U_1730883607874.js";import"./object-hash.c-ODBdIv1730883607874.js";import"./@amap.CXRRqiLY1730883607874.js";import"./jszip.V4H7zZUl1730883607874.js";import"./three.quarks.BwNiiDXj1730883607874.js";import"./quarks.core.C7CDonSm1730883607874.js";const z=G;!function(t,n){const e=G,r=H();for(;;)try{if(415462===-parseInt(e(327))/1*(-parseInt(e(299))/2)+-parseInt(e(350))/3*(parseInt(e(346))/4)+-parseInt(e(353))/5*(parseInt(e(343))/6)+-parseInt(e(308))/7*(parseInt(e(355))/8)+-parseInt(e(351))/9*(parseInt(e(331))/10)+parseInt(e(366))/11*(parseInt(e(363))/12)+parseInt(e(316))/13*(parseInt(e(362))/14))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[G(317)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){S(this,(function(){const t=G,n=new RegExp(t(364)),e=new RegExp(t(341),"i"),r=O("init");n[t(367)](r+t(301))&&e[t(367)](r+t(358))?O():r("0")}))()}();const T=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[G(317)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function H(){const t=["fragmentShader","counter","input","customWaterMesh","uTime","waterHighlight","140sCgaOj","10380BEsoHC","function *\\( *\\)","DoubleSide","3806QXWeDn","test","1074214FIyGse","bind","chain","convertLinearToSRGB","warn","#52a7f7","baseMaterial","vertex","value","2317vLoArA","constructor","exception","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","__proto__","length","error","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","1446770HBdTXM","apply","toString","prototype","args","info","trace","height","material","stateObject","brightness","1JlWsoh","return (function() ","dispose","log","9930UBIteE","uHeight","gger","fragment","flatShading","Color","debu","action","waterColor","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshPhysicalMaterial","927828hUwStQ","table","string","375976WAUckR","call","TresBoxGeometry",'{}.constructor("return this")( )',"24XItJml","3411hZTXqn","side","5hsSXEG","Flatshading","6064dsPmCk"];return(H=function(){return t})()}T(void 0,(function(){const t=G,n=function(){const t=G;let n;try{n=Function(t(328)+t(349)+");")()}catch(e){n=window}return n}(),e=n[t(340)]=n[t(340)]||{},r=[t(330),t(303),t(321),t(314),t(310),t(344),t(322)];for(let a=0;a<r[t(313)];a++){const n=T[t(309)][t(319)].bind(T),o=r[a],s=e[o]||n;n[t(312)]=T.bind(T),n[t(318)]=s[t(318)][t(300)](s),e[o]=n}}))();const k=["rotation-x"],B=[z(320)];function G(t,n){const e=H();return(G=function(t,n){return e[t-=299]})(t,n)}const W=u({__name:z(359),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(304)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[z(342)]}},setup(a){const o=z,s=a,i=p(null),u={vertex:o(311),fragment:o(315)},j={uTime:{value:0},waterColor:{value:new(t[o(336)])(s[o(339)])[o(302)]()},waterHighlight:{value:new(t[o(336)])(s.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[o(326)]},uHeight:{value:s[o(323)]}},{onLoop:w}=e();return w((({elapsed:t})=>{const n=o;j[n(360)][n(307)]=-t/5})),f((()=>{const e=o;s[e(323)]&&(j[e(332)].value=s[e(323)]),s[e(339)]&&(j[e(339)][e(307)]=new n(s[e(339)])[e(302)]()),s[e(361)]&&(j.waterHighlight.value=new(t[e(336)])(s[e(361)])[e(302)]()),s[e(326)]&&(j[e(326)][e(307)]=s[e(326)])})),g((()=>s[o(354)]),(t=>{const n=o;i[n(307)][n(324)].needsUpdate=!0})),g((()=>s[o(305)]),(n=>{const e=o,r=new l({baseMaterial:t[n],vertexShader:c(u[e(306)]),fragmentShader:u[e(334)],uniforms:j,flatShading:s.Flatshading,side:t[e(365)],roughness:.2,metalness:.1,silent:!0});i[e(307)][e(324)][e(329)](),i[e(307)][e(324)]=r})),(n,e)=>{const a=o;return h(),m("TresMesh",{ref_key:"tmRef",ref:i,"rotation-x":-Math.PI/2},[d(a(348),{args:[5,5,n[a(323)],64,64,1]},null,8,B),v(b(r),{baseMaterial:t[a(342)],vertexShader:b(c)(u[a(306)]),fragmentShader:u[a(334)],uniforms:j,side:t[a(365)],roughness:.2,metalness:.1,flatShading:n[a(354)],silent:""},null,8,[a(305),"vertexShader",a(356),a(352),a(335)])],8,k)}}});function O(t){function n(t){const e=G;if(typeof t===e(345))return function(t){}.constructor("while (true) {}")[e(317)](e(357));1!==(""+t/t)[e(313)]||t%20==0?function(){return!0}[e(309)]("debu"+e(333))[e(347)](e(338)):function(){return!1}[e(309)](e(337)+"gger")[e(317)](e(325)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const F=A;!function(t,n){const e=A,r=N();for(;;)try{if(230082===parseInt(e(486))/1*(-parseInt(e(483))/2)+parseInt(e(497))/3+parseInt(e(470))/4+-parseInt(e(494))/5*(parseInt(e(519))/6)+parseInt(e(507))/7+-parseInt(e(492))/8*(parseInt(e(478))/9)+parseInt(e(479))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const P=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){P(this,(function(){const t=A,n=new RegExp(t(525)),e=new RegExp(t(493),"i"),r=E(t(501));n[t(500)](r+t(491))&&e[t(500)](r+t(472))?E():r("0")}))()}();const D=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[A(516)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function A(t,n){const e=N();return(A=function(t,n){return e[t-=458]})(t,n)}function N(){const t=["warn","TresAmbientLight","549ajOrak","3543890nSaZsl","return (function() ","#627179","MeshLambertMaterial","436jgKzvX","stateObject","MeshStandardMaterial","2017VcyIaF","__proto__","info","gger","exception","chain","23168kBLMmY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","75025VHwwQd","target","brightness","1327920yhkkPv","MeshDepthMaterial","baseMaterial","test","init","counter","change","error","Flatshading","neg-z.jpg","2271990yQfyUs","TresPerspectiveCamera","debu","MeshNormalMaterial","call","log","ACESFilmicToneMapping","#b3ffff","customWater","apply","length","bind","132tjvFqm","waterColor","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","MeshPhongMaterial","list","prototype","function *\\( *\\)","MeshToonMaterial","toString","while (true) {}","value","pos-y.jpg",'{}.constructor("return this")( )',"constructor","TresDirectionalLight","height","MeshPhysicalMaterial","addBinding","#52a7f7","219820wVCDiN","neg-x.jpg","input","MeshBasicMaterial","neg-y.jpg","label"];return(N=function(){return t})()}D(void 0,(function(){const t=A,n=function(){const t=A;let n;try{n=Function(t(480)+t(463)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},r=[t(512),t(476),t(488),t(504),t(490),"table","trace"];for(let a=0;a<r[t(517)];a++){const n=D[t(464)][t(524)][t(518)](D),o=r[a],s=e[o]||n;n[t(487)]=D[t(518)](D),n[t(459)]=s.toString[t(518)](s),e[o]=n}}))();const R=u({__name:F(515),setup(n){const e=F,r=j({alpha:!0,toneMapping:t[e(513)],windowSize:!0,clearColor:10066329}),l=j({enableDamping:!0,autoRotate:!1}),c=j({cellSize:.6,cellThickness:1.1,cellColor:e(481),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=j({height:.2,Flatshading:!1,waterColor:e(469),waterHighlight:e(514),brightness:1,baseMaterial:e(467)}),p=new C;return p[e(468)](u,e(466),{label:"高度",min:.1,max:5,step:.1}),p[e(468)](u,e(520),{label:"水体颜色"}),p.addBinding(u,"waterHighlight",{label:"浪头颜色"}),p.addBinding(u,e(496),{label:"亮度",min:0,max:1,step:.01}),p[e(468)](u,e(505),{label:e(505)}),p.addBlade({view:e(523),label:"材质",options:[{text:e(467),value:e(467)},{text:e(473),value:e(473)},{text:e(510),value:e(510)},{text:e(485),value:"MeshStandardMaterial"},{text:e(522),value:e(522)},{text:e(458),value:e(458)},{text:e(482),value:e(482)},{text:e(498),value:e(498)}],value:u[e(499)]}),p.on(e(503),(t=>{const n=e;"材质"===t[n(495)][n(475)]&&(u[n(499)]=t[n(461)])})),(t,n)=>{const p=e;return h(),w(b(o),M(r,{"window-size":""}),{default:y((()=>[n[0]||(n[0]=d(p(508),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(b(a),_(x(l)),null,16),n[1]||(n[1]=d(p(477),{intensity:.5},null,-1)),n[2]||(n[2]=d(p(465),{position:[15,15,15],intensity:1},null,-1)),v(W,_(x(u)),null,16),v(b(s),M({args:[3,3]},c,{position:[0,-.5,0]}),null,16),(h(),w(I,null,{default:y((()=>[v(b(i),{files:["pos-x.jpg",p(471),p(462),p(474),"pos-z.jpg",p(506)],path:p(521)})])),_:1}))])),_:1},16)}}});function E(t){function n(t){const e=A;if("string"==typeof t)return function(t){}.constructor(e(460))[e(516)](e(502));1!==(""+t/t).length||t%20==0?function(){return!0}[e(464)](e(509)+"gger")[e(511)]("action"):function(){return!1}[e(464)]("debu"+e(489)).apply(e(484)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as default};

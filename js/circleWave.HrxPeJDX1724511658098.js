import{$ as n,N as t,d as e}from"./@tresjs.6SjGVF2a1724511658098.js";import{P as o}from"./tweakpane.yHWGBmom1724511658098.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.hMPtZWQ11724511658098.js";import{a6 as a,C as c}from"./three.6cxCQsIj1724511658098.js";import{d as i,b as s,a4 as u,r as l,a1 as f,o as p,D as d,J as v,aj as m,ak as g,e as h,f as w,g as k,j as S,u as _,al as y,m as x}from"./@vue.Q1VpS3901724511658098.js";import"./@vueuse.rsVLbIR91724511658098.js";import"./all.three.8nmp0Ccm1724511658098.js";import"./oimophysics.x0jH7fze1724511658098.js";function b(n,t){const e=P();return(b=function(n,t){return e[n-=304]})(n,t)}const C=b;!function(n,t){const e=b,o=P();for(;;)try{if(666753===-parseInt(e(311))/1+-parseInt(e(345))/2+parseInt(e(336))/3*(parseInt(e(350))/4)+-parseInt(e(315))/5+parseInt(e(324))/6*(parseInt(e(358))/7)+parseInt(e(305))/8*(-parseInt(e(356))/9)+parseInt(e(342))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[b(318)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=b,t=new RegExp(n(330)),e=new RegExp(n(322),"i"),o=R(n(319));t.test(o+n(347))&&e[n(351)](o+"input")?R():o("0")}))()}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[b(318)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function P(){const n=["colorDark","constructor","211838dKVqzC","action","TresShaderMaterial","log","4322785zLqQub","warn","TresMesh","apply","init","prototype","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ffffff","66ReVdET","__proto__","uScanColorDark","color","trace","RepeatWrapping","function *\\( *\\)","bind","debu","speed","info","counter","367515xqxPcu","#000000","scale","table","uScanColor","TresPlaneGeometry","29930410QxQElx","Color","tmRef","1356014xqHdKG","wrapS","chain","value","gger","4wzgjiM","test","material","AdditiveBlending","console",'{}.constructor("return this")( )',"4047093hoDnuX","DoubleSide","130431aruPoQ","error","16xNoZdd","wrapT","exception","stateObject"];return(P=function(){return n})()}M(void 0,(function(){const n=b;let t;try{t=Function("return (function() "+n(355)+");")()}catch(r){t=window}const e=t[n(354)]=t.console||{},o=[n(314),n(316),n(334),n(304),n(307),n(339),n(328)];for(let a=0;a<o.length;a++){const t=M.constructor[n(320)].bind(M),r=o[a],c=e[r]||t;t[n(325)]=M.bind(M),t.toString=c.toString[n(331)](c),e[r]=t}}))();const T=["rotation-x",C(338)],j=v(C(341),{args:[1,1]},null,-1),D=i({__name:"shaderCircleWave",props:{color:{default:C(323)},colorDark:{default:C(337)},speed:{default:1},scale:{default:2}},async setup(e){const o=C;let r,i;const h=e,w=s(),{onLoop:k}=n();k((({delta:n})=>{const t=b;w[t(348)]&&(w.value[t(352)][t(321)].uTime.value+=n*h[t(333)])}));const S=([r,i]=u((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,i(),r);S[o(346)]=a[o(329)],S[o(306)]=a[o(329)];const _=l({side:a[o(357)],transparent:!0,blending:a[o(353)],flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:S},uScanColor:{type:"v3",value:new(a[o(343)])(h.color)},uScanColorDark:{type:"v3",value:new(a[o(343)])(h[o(309)])}},vertexShader:"\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n",fragmentShader:"\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n"});return f((()=>{const n=o;w[n(348)]&&(w[n(348)][n(352)].uniforms[n(340)][n(348)]=new(a[n(343)])(h[n(327)]),w[n(348)].material[n(321)][n(326)][n(348)]=new c(h[n(309)]))})),(n,t)=>{const e=o;return p(),d(e(317),{ref_key:e(344),ref:w,"rotation-x":-Math.PI/2,scale:n.scale},[j,v(e(313),m(g(_)),null,16)],8,T)}}});function R(n){function t(n){const e=b;if("string"==typeof n)return function(n){}[e(310)]("while (true) {}")[e(318)](e(335));1!==(""+n/n).length||n%20==0?function(){return!0}[e(310)](e(332)+e(349)).call(e(312)):function(){return!1}[e(310)](e(332)+e(349)).apply(e(308)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const W=A;!function(n,t){const e=A,o=O();for(;;)try{if(478923===-parseInt(e(192))/1+-parseInt(e(205))/2+-parseInt(e(203))/3+parseInt(e(188))/4*(parseInt(e(214))/5)+-parseInt(e(221))/6+-parseInt(e(191))/7*(-parseInt(e(213))/8)+parseInt(e(222))/9*(parseInt(e(185))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(227)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){z(this,(function(){const n=A,t=new RegExp(n(199)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=U("init");t[n(218)](o+"chain")&&e.test(o+n(184))?U():o("0")}))()}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(227)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function O(){const n=["TresCanvas","bind","addBinding","gger","constructor","圈颜色","action","2723696CMMqEF","1385PudErP","console","warn","circleWave","test",'{}.constructor("return this")( )',"#000000","775284oOFFVT","6273oGqPft","counter","exception","table","scale","apply","string","input","14550doSmvD","TresPerspectiveCamera","return (function() ","10516HXvtrP","log","speed","14YCpHVf","566000IXcHNU","圈渐变色","#ffffff","length","debu","TresAmbientLight","while (true) {}","function *\\( *\\)","toString","call","__proto__","2788110osrlaS","info","639570VazoXl"];return(O=function(){return n})()}E(void 0,(function(){const n=A,t=function(){const n=A;let t;try{t=Function(n(187)+n(219)+");")()}catch(e){t=window}return t}(),e=t[n(215)]=t.console||{},o=[n(189),n(216),n(204),"error",n(224),n(225),"trace"];for(let r=0;r<o.length;r++){const t=E[n(210)].prototype[n(207)](E),a=o[r],c=e[a]||t;t[n(202)]=E.bind(E),t.toString=c[n(200)][n(207)](c),e[a]=t}}))();const V=v(W(186),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1),q=v(W(197),{intensity:6},null,-1);function A(n,t){const e=O();return(A=function(n,t){return e[n-=183]})(n,t)}const F=i({__name:W(217),setup(n){const t=W,a=l({reflectivity:.1,showGridHelper:!1,scale:1}),c=l({color:t(194),colorDark:t(220),speed:1,scale:2}),i=new o({title:"shaderCircleWave地面",expanded:!0});return i.addBinding(c,"color",{label:t(211)}),i[t(208)](c,"colorDark",{label:t(193)}),i.addBinding(c,t(190),{label:"速度",min:.1,max:5,step:.1}),i.addBinding(c,t(226),{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const i=h(t(206));return p(),w(i,{clearColor:"#201919","window-size":""},{default:k((()=>[V,S(_(e),{enableDamping:""}),q,(p(),w(y,null,{default:k((()=>[S(D,m(g(c)),null,16)])),_:1})),(p(),w(y,null,{default:k((()=>[S(r,x({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function U(n){function t(n){const e=A;if(typeof n===e(183))return function(n){}[e(210)](e(198))[e(227)](e(223));1!==(""+n/n)[e(195)]||n%20==0?function(){return!0}[e(210)](e(196)+e(209))[e(201)](e(212)):function(){return!1}[e(210)](e(196)+e(209))[e(227)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{F as default};

import{importShared as e}from"./3d-tiles-renderer.COLnOnaF1767661981680.js";import{useLoop as t,OrbitControls_default as a}from"./index.DJAV0vsW1767661981680.js";import{Pane as r}from"./tweakpane.BbuIEN141767661981680.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.BKgl0F1a1767661981680.js";import{_sfc_main as s}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.Dp5x0OLV1767661981680.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.Cb2QeTAp1767661981680.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.CAN7falr1767661981680.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.Cl5o4DpQ1767661981680.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.CXhq4eo21767661981680.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.DXCuEmLw1767661981680.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.DHMQFbjh1767661981680.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.BfK29leH1767661981680.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.7t9hvtp81767661981680.js";import"./particleBase.vue_vue_type_script_setup_true_lang.DO9UqjF01767661981680.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.DzNcjyyL1767661981680.js";import{useTexture as i}from"./customShaderMaterial.vue_vue_type_script_setup_true_lang.DgUcrDxr1767661981680.js";import"./index.vue_vue_type_script_setup_true_lang.BX1FIS001767661981680.js";import{getlinePoints as l}from"./utils.zkBl2pMY1767661981680.js";const{withAsyncContext:n,defineComponent:u}=await e("vue"),{unref:o,createElementVNode:p,openBlock:_,createElementBlock:d}=await e("vue"),m=["args"],c=["blending","map","side","alphaMap","color"],{watch:g}=await e("vue"),f=await e("three"),v=u({__name:"streamLine",props:{color:{default:"#2bc4dc"},radius:{default:.2},speed:{default:1},radialSegments:{default:6},tubularSegments:{default:64},closed:{type:Boolean,default:!1},clockwise:{type:Boolean,default:!0},fewNum:{default:1},linesList:{default:()=>[[15,0,15],[15,0,-15],[-15,0,-15],[-15,0,10],[15,0,15]]}},async setup(e){let a,r;const s=e,l=([a,r]=n(()=>i("./plugins/digitalCity/image/line2.png")),a=await a,r(),a);l.needsUpdate=!0,l.wrapS=l.wrapT=f.RepeatWrapping,l.repeat.set(s.fewNum,1),l.rotation=s.clockwise?0:Math.PI,l.generateMipmaps=!1,l.magFilter=f.NearestFilter;let u=[];s.linesList.forEach(e=>{u.push((new f.Vector3).fromArray(e))});const v=new f.CatmullRomCurve3(u),{onBeforeRender:w}=t();return w(()=>{l.offset.x+=.002*s.speed}),g(()=>[s.clockwise,s.fewNum],([e,t])=>{l.rotation=e?0:Math.PI,l.repeat.set(t,1)}),(e,t)=>(_(),d("TresMesh",null,[p("TresTubeGeometry",{args:[o(v),s.tubularSegments,s.radius,s.radialSegments,s.closed]},null,8,m),p("TresMeshBasicMaterial",{blending:f.AdditiveBlending,map:o(l),side:f.DoubleSide,alphaMap:o(l),transparent:!0,color:s.color},null,8,c)]))}}),{withAsyncContext:w,defineComponent:y}=await e("vue"),{createElementVNode:B,unref:h,createVNode:j,normalizeProps:b,guardReactiveProps:x,Suspense:S,withCtx:C,openBlock:M,createBlock:k,mergeProps:N,resolveComponent:F}=await e("vue"),{reactive:L}=await e("vue"),P=y({__name:"streamLines",async setup(e){let t,i;const n=L({reflectivity:.1,showGridHelper:!1,scale:5}),u=L({color:"#bd01ff",radius:.2,speed:1,tubularSegments:64,radialSegments:6,closed:!1,clockwise:!1,fewNum:1,linesList:[[15,0,15],[15,0,-15],[-15,0,-15],[-15,0,10],[13,0,15]]}),o=new r;o.addBinding(u,"color",{label:"流光颜色"}),o.addBinding(u,"radius",{label:"管道半径",min:.01,max:1,step:.01}),o.addBinding(u,"speed",{label:"跑动速度",min:.1,max:10,step:.1}),o.addBinding(u,"tubularSegments",{label:"管道路径平滑",min:1,max:100,step:1}),o.addBinding(u,"radialSegments",{label:"管道壁圆润",min:1,max:20,step:1}),o.addBinding(u,"closed",{label:"闭合管道"}),o.addBinding(u,"clockwise",{label:"顺时针流动"}),o.addBinding(u,"fewNum",{label:"流线数量",min:1,max:10,step:1});const p=([t,i]=w(()=>l("./plugins/simpleGIS/json/320000_full.json")),t=await t,i(),t);return(e,t)=>{const r=F("TresCanvas");return M(),k(r,{clearColor:"#201919","window-size":""},{default:C(()=>[t[0]||(t[0]=B("TresPerspectiveCamera",{position:[25,25,25],fov:45,near:.1,far:1e4},null,-1)),j(h(a),{enableDamping:"",autoRotate:""}),(M(),k(S,null,{default:C(()=>[j(v,b(x(u)),null,16)]),_:1})),(M(),k(S,null,{default:C(()=>[j(v,{linesList:h(p),position:[0,0,-4]},null,8,["linesList"])]),_:1})),(M(),k(S,null,{default:C(()=>[j(h(s),N({position:[0,-.5,0]},n),null,16)]),_:1}))]),_:1})}}});export{P as default};

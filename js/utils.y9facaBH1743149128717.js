import"./@fesjs.w7aAWifr1743149128717.js";import{_ as t}from"./jszip.i7DSFoEV1743149128717.js";import{F as n}from"./file-saver.4tqKmgoc1743149128717.js";import{_ as e,aM as s,z as o}from"./three.hBhj0ayh1743149128717.js";const r=b;!function(t,n){const e=b,s=i();for(;;)try{if(961520===-parseInt(e(278))/1*(parseInt(e(236))/2)+parseInt(e(239))/3+-parseInt(e(257))/4*(parseInt(e(309))/5)+-parseInt(e(258))/6+-parseInt(e(275))/7*(-parseInt(e(295))/8)+parseInt(e(265))/9*(-parseInt(e(259))/10)+-parseInt(e(234))/11*(-parseInt(e(237))/12))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[b(306)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=b,n=new RegExp(t(266)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=y(t(282));n[t(308)](s+"chain")&&e.test(s+"input")?y():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[b(306)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(){const t=["url:","files","load","folder","data:image/png;base64,","type","log","44hspiYt","3493230MtCoTY","7325210PTodyj",";base64,","Loader","geometries","image/webp","constructor","9nGodCO","function *\\( *\\)","setResponseType","非标准文件：不存在 app.json","toString","endsWith","info","bind","async","manager","479339gHBqdR","url","__proto__","4schYTR","call","data:image/WEBP;base64,","image/gif","init","url:geometries/","debu","gger","onloadend","table","data","console","then","scene","split","data:image/webp;base64,","slice","120kaCfXd","prototype","result","uuid","image/jpeg","Cache","generateAsync","length","data:","enabled","FileLoader","apply","return (function() ","test","584515Yqotxd","onerror","string","url:images/","stateObject","loadAsync","PNG","data:image/GIF;base64,","parse","pop","toUpperCase","warn","blob","WEBP","error","file","app.json","name","while (true) {}","data:image/gif;base64,","trace","524469gYErEa","forEach","587998TTnuDp","708KMkHfM","stringify","2693877Bsmrxj","push","readAsDataURL","substring","data:image/jpeg;base64,","message","get",".json","application/octet-stream","images","startsWith"];return(i=function(){return t})()}async function u(t){const n=new o;return new Promise(((e,s)=>{const o=b;n[o(252)](t,(t=>e(JSON[o(221)](t))),void 0,(t=>s(t)))}))}c(void 0,(function(){const t=b;let n;try{n=Function(t(307)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(289)]=n.console||{},s=[t(256),t(224),t(271),t(227),"exception",t(287),t(233)];for(let r=0;r<s[t(302)];r++){const n=c[t(264)][t(296)].bind(c),o=s[r],a=e[o]||n;n[t(277)]=c[t(272)](c),n[t(269)]=a[t(269)][t(272)](a),e[o]=n}}))(),e[r(300)][r(304)]=!0;class p extends s{constructor(t){super(t)}[r(252)](t,n,e,s){const a=r,c=new o(this[a(274)]);c.setResponseType("json"),c[a(252)](t,(t=>n&&n(t)),e,s)}}async function f(t){const n=r,s=new(e[n(305)]);return new Promise(((e,o)=>{const a=n;s[a(267)](a(225)),s[a(252)](t,(n=>{const s=a,c=new FileReader;c[s(286)]=()=>{const n=s,o=function(t){const n=r,e=t[n(292)](".").pop().toLowerCase();return{jpg:n(299),jpeg:n(299),png:"image/png",gif:n(281),bmp:"image/bmp",webp:n(263)}[e]||n(247)}(t),a=c.result.split(",")[1];e(n(303)+o+n(260)+a)},c[s(310)]=t=>{o(t)},c[s(241)](n)}),void 0,(t=>o(t)))}))}class l extends e[r(261)]{constructor(t){super(t)}[r(252)](n,e,s,a){const c=r,i=new o(this[c(274)]);i[c(267)]("blob"),i.load(n,(async n=>{const s=c;try{const o=await t[s(314)](n);e&&e(o)}catch(o){a&&a(o)}}),s,a)}}const g=t=>{const n=r,e=t[n(242)](0,15),s=n(243),o=n(254),a=n(232),c=n(220),i=n(293),u=n(280);return s[n(249)](e)||"data:image/JPEG;base64,"[n(249)](e)?"JPEG":o[n(249)](e)||"data:image/PNG;base64,".startsWith(e)?n(315):a[n(249)](e)||c[n(249)](e)?"GIF":i.startsWith(e||u.startsWith(e))?n(226):"Unknown"},d=e=>{const s=r,o=[];e.scene[s(262)]&&e[s(291)][s(262)][s(235)]((t=>{const n=s;"BufferGeometry"===t.type&&(o.push({uuid:t[n(298)],data:t[n(288)]}),t[n(288)]=n(283)+t[n(298)]+".json")}));const a=[];e[s(291)][s(248)]&&e[s(291)].images[s(235)]((t=>{const n=s;t[n(276)]&&(a[n(240)]({uuid:t[n(298)],url:t[n(276)]}),t[n(276)][n(255)]?t.url="url:images/"+t[n(298)]+"."+t.url[n(255)]+".json":t[n(276)]=n(312)+t.uuid+"."+g(t[n(276)]))}));const c=new t;if(o.length){const t=c.folder(s(262));o[s(235)]((n=>{const e=s;t.file(n[e(298)]+".json",JSON[e(238)](n[e(288)]))}))}if(a.length){const t=c[s(253)](s(248));a[s(235)]((n=>{const e=s;n[e(276)].type?t[e(228)](n[e(298)]+"."+n[e(276)][e(255)]+".json",JSON[e(238)](n.url)):t.file(n[e(298)]+"."+g(n[e(276)]),n.url.split(e(260))[e(222)](),{base64:!0})}))}const i=JSON.stringify(e);return c[s(228)](s(229),i),c[s(301)]({type:"blob"})[s(290)]((t=>{n.saveAs(t,"config.zip")}))},m=(t,n,e)=>{const s=r;t[s(262)]<=0&&t[s(248)]<=0&&e(n)},h=(n,e)=>{const s=r;let o=null;return t[s(314)](n)[s(290)]((t=>{const n=s;t[n(251)][n(229)]?t[n(251)][n(229)][n(273)](n(311))[n(290)]((s=>{const a=n;o=JSON[a(221)](s);const c=(t=>{const n=r,e={geometries:0,images:0};return t.scene[n(262)]?.forEach((t=>{const s=n;t.data[s(249)](s(250))&&e.geometries++})),t[n(291)].images?.[n(235)]((t=>{const s=n;t[s(276)].startsWith(s(250))&&e[s(248)]++})),e})(o);m(c,o,e),o[a(291)][a(262)]?.[a(235)]((n=>{const s=a;n[s(288)][s(249)](s(250))&&t[s(251)][n[s(288)].slice(4)][s(273)](s(311))[s(290)]((t=>{const r=s;n.data=JSON[r(221)](t),c[r(262)]--,m(c,o,e)}))})),o[a(291)][a(248)]?.forEach((n=>{const s=a;if(n[s(276)][s(249)](s(250))){const r=n[s(276)][s(294)](4);r[s(270)](s(246))?t[s(251)][r][s(273)]("string").then((t=>{const r=s;n[r(276)]=JSON.parse(t),c[r(248)]--,m(c,o,e)})):t[s(251)][r][s(273)]("base64")[s(290)]((t=>{const a=s,i=r[a(292)]("."),u=i[i[a(302)]-1][a(223)]();n[a(276)]="data:image/"+u+a(260)+t,c.images--,m(c,o,e)}))}}))})):console[n(227)](n(268))}),(t=>{const e=s;console[e(227)](n[e(230)]+": "+t[e(244)])})),o};function b(t,n){const e=i();return b=function(t,n){return e[t-=220]},b(t,n)}function y(t){function n(t){const e=b;if("string"==typeof t)return function(t){}.constructor(e(231)).apply("counter");1!==(""+t/t)[e(302)]||t%20==0?function(){return!0}[e(264)](e(284)+e(285))[e(279)]("action"):function(){return!1}[e(264)](e(284)+e(285)).apply(e(313)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as J,l as Z,f as a,d as e,g,h as i,u as l};

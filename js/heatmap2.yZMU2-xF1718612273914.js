import{P as t}from"./tweakpane.qqn77PB81718612273914.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.zU671vpm1718612273914.js";import{_ as r}from"./heatmap.js-fix.Ix1ytkvC1718612273914.js";import{h as i,a5 as s,ck as c,B as u,r as a,Z as p}from"./three.HHcT7YAr1718612273914.js";import{r as f}from"./utils.CJ4f1P4x1718612273914.js";import{d as l}from"./pinia.Io9o2y5w1718612273914.js";import{b as h,d,a2 as m,o as g,D as y,J as v,u as w,F as I,q as b,U as j,N as _,P as x,H as M,L as k,a3 as D,r as z,j as S,g as A,m as T}from"./@vue.CpOXM7bB1718612273914.js";import{c as P,d as E,a as O}from"./three-mesh-bvh.EwUvM4mC1718612273914.js";import{_ as B}from"./@fesjs.K6L2Ptsw1718612273914.js";import"./@tresjs.W42D3qe_1718612273914.js";import"./@vueuse.YjRg4c7n1718612273914.js";import"./three-custom-shader-material.TWM8Wx7T1718612273914.js";import"./object-hash.NQGxxEoE1718612273914.js";import"./@amap.zA6BxCQR1718612273914.js";import"./jszip.ceBEBY8K1718612273914.js";import"./glsl-tokenizer.yImbcCwc1718612273914.js";import"./glsl-token-string.GsokCkw11718612273914.js";import"./glsl-token-functions.M4ENNoPy1718612273914.js";import"./vue-router.8CWAXHk21718612273914.js";import"./lodash-es.nFpJXAf-1718612273914.js";import"./@qlin.yHhFDldE1718612273914.js";import"./@floating-ui.BPbuo5Gx1718612273914.js";import"./@juggle.7yjBMqoW1718612273914.js";!function(t,n){const e=C,o=U();for(;;)try{if(540923===parseInt(e(160))/1+-parseInt(e(161))/2*(-parseInt(e(199))/3)+-parseInt(e(176))/4*(parseInt(e(155))/5)+-parseInt(e(180))/6*(-parseInt(e(179))/7)+parseInt(e(149))/8*(parseInt(e(186))/9)+parseInt(e(193))/10*(parseInt(e(147))/11)+parseInt(e(162))/12*(-parseInt(e(167))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const R=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[C(196)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(){const t=["init","611715eUHcRA","height","absolute","constructor","exception","793361wkHrjj","28YhlTJX","12uTBMta","string","table","getValueAt","error","32701747GacyCe","create","top","rgb(255,0,0)","rgb(0,255,0)","function *\\( *\\)","__proto__","test","bind","4ZWGOSC","_config","randInt","1715245iMueKv","24UYDJzL","gger",'{}.constructor("return this")( )',"position","yellow","info","1146069vzCTLo","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","body","toString","setData","input","appendChild","40Ahmvwb","call","console","apply","debu","width","52557PRKWkp","left","display","2489674cOySaD","action","16jPbaQK","warn","return (function() ","chain","style"];return(U=function(){return t})()}!function(){R(this,(function(){const t=C,n=new RegExp(t(172)),e=new RegExp(t(187),"i"),o=Y(t(154));n.test(o+t(152))&&e[t(174)](o+t(191))?Y():o("0")}))()}();const Z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Z(void 0,(function(){const t=C;let n;try{n=Function(t(151)+t(182)+");")()}catch(r){n=window}const e=n[t(195)]=n[t(195)]||{},o=["log",t(150),t(185),t(166),t(159),t(164),"trace"];for(let i=0;i<o.length;i++){const n=Z.constructor.prototype[t(175)](Z),r=o[i],s=e[r]||n;n[t(173)]=Z[t(175)](Z),n[t(189)]=s.toString[t(175)](s),e[r]=n}}))();function C(t,n){const e=U();return(C=function(t,n){return e[t-=146]})(t,n)}const H=(t,n)=>t[C(165)](n)+-10;function Y(t){function n(t){const e=C;if(typeof t===e(163))return function(t){}[e(158)]("while (true) {}")[e(196)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(158)](e(197)+e(181))[e(194)](e(148)):function(){return!1}[e(158)](e(197)+e(181)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const $=G;!function(t,n){const e=G,o=L();for(;;)try{if(214345===-parseInt(e(177))/1*(parseInt(e(175))/2)+parseInt(e(157))/3*(parseInt(e(165))/4)+-parseInt(e(162))/5+-parseInt(e(182))/6+parseInt(e(181))/7+parseInt(e(179))/8+parseInt(e(172))/9*(-parseInt(e(154))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(166)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){F(this,(function(){const t=G,n=new RegExp(t(145)),e=new RegExp(t(142),"i"),o=W(t(178));n[t(150)](o+t(158))&&e[t(150)](o+t(173))?W():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[G(166)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function L(){const t=["__proto__","844uDhWgq","apply","return (function() ","counter","length","log","constructor","36UiePrh","input","call","71558WTYMiM","warn","1gMvASl","init","2937128OYakzx","info","907788GyruUs","2337042dmVJYO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","while (true) {}","function *\\( *\\)","gger","error","stateObject",'{}.constructor("return this")( )',"test","debu","console","buildingsHeatmap","291570HWakDB","value","exception","5763jejGFv","chain","action","toString","prototype","729485wMVdIF","bind"];return(L=function(){return t})()}function G(t,n){const e=L();return(G=function(t,n){return e[t-=142]})(t,n)}J(void 0,(function(){const t=G;let n;try{n=Function(t(167)+t(149)+");")()}catch(r){n=window}const e=n[t(152)]=n[t(152)]||{},o=[t(170),t(176),t(180),t(147),t(156),t(143),"trace"];for(let i=0;i<o[t(169)];i++){const n=J[t(171)][t(161)].bind(J),r=o[i],s=e[r]||n;n[t(164)]=J[t(163)](J),n[t(160)]=s[t(160)][t(163)](s),e[r]=n}}))();const V=l($(153),(()=>{const t=h(!1),n=h(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[G(155)]=n},setTemperature:function(t){n.value=t}}}));function W(t){function n(t){const e=G;if("string"==typeof t)return function(t){}.constructor(e(144))[e(166)](e(168));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debu"+e(146))[e(174)](e(159)):function(){return!1}[e(171)](e(151)+e(146)).apply(e(148)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const q=K;function K(t,n){const e=Q();return(K=function(t,n){return e[t-=294]})(t,n)}!function(t,n){const e=K,o=Q();for(;;)try{if(418190===parseInt(e(323))/1*(-parseInt(e(342))/2)+parseInt(e(309))/3*(-parseInt(e(352))/4)+-parseInt(e(359))/5*(-parseInt(e(340))/6)+parseInt(e(324))/7*(parseInt(e(335))/8)+parseInt(e(301))/9+-parseInt(e(331))/10*(parseInt(e(303))/11)+-parseInt(e(327))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(354)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Q(){const t=["needsUpdate","rotation-x","Matrix4","1zHKImT","588xDXquz","makeRotationX","bind","2022252CbdGsI","Mesh","chain","test","90kljAaA","matrix","setShowDiv","normal","62664ogpCit","return (function() ","action","error","ShaderMaterial","18QxJpBS","function *\\( *\\)","982742zwMCDq","computeBoundsTree","constructor","BufferGeometry","stateObject","land","model","length","console","clone","20fwqHpT","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","apply","table","log","city","数值———：","1194450kEJQDB","Texture","object","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_config","setTemperature","input","init","2328894BOVJfH","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","582989PslpQc","raycast","数值：","uOpacity","attributes","geometry","47001oeXHum","gger",'{}.constructor("return this")( )',"string","primitive","warn","prototype","disposeBoundsTree","applyMatrix4","__proto__","opacity"];return(Q=function(){return t})()}!function(){X(this,(function(){const t=K,n=new RegExp(t(341)),e=new RegExp(t(296),"i"),o=ot(t(300));n[t(330)](o+t(329))&&e[t(330)](o+t(299))?ot():o("0")}))()}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(354)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();N(void 0,(function(){const t=K;let n;try{n=Function(t(336)+t(311)+");")()}catch(r){n=window}const e=n.console=n[t(350)]||{},o=[t(356),t(314),"info",t(338),"exception",t(355),"trace"];for(let i=0;i<o.length;i++){const n=N[t(344)].prototype.bind(N),r=o[i],s=e[r]||n;n[t(318)]=N[t(326)](N),n.toString=s.toString.bind(s),e[r]=n}}))();const tt=[q(294),q(321)],nt=[q(294)],et=d({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=q;(()=>{const t=K;s[t(345)][t(315)][t(343)]=P,u[t(315)][t(316)]=E,a[t(315)][t(304)]=O})();const e=t,o=((t=250,n=250,e=!0)=>{const o=C,i=document.createElement("heatmap-canvas");return i[o(153)][o(183)]=o(157),!e&&(i[o(153)][o(146)]="none"),i[o(153)][o(169)]="0",i[o(153)][o(200)]="0",document[o(188)][o(192)](i),r[o(168)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:"rgb(0,0,255)",.55:o(171),.85:o(184),1:o(170)}})})();((t,n)=>{const e=C;if(!n){let o=0;for(n=[];o<1e3;)n.push({x:i[e(178)](1,t[e(177)][e(198)]),y:i[e(178)](1,t[e(177)][e(156)]),value:i[e(178)](-10,36)}),o++}t[e(190)]({max:36,min:-10,data:n})})(o);const l=new(s[n(360)])(o._renderer.canvas);l[n(320)]=!0;const h=e.model[n(357)][n(351)]();delete h[n(308)][n(307)][n(334)],delete h[n(308)].attributes.uv;const d=h[n(308)][n(351)]()[n(317)](h[n(332)]),b=e[n(348)][n(347)][n(351)]();delete b[n(308)][n(307)][n(334)];const j=b.geometry[n(351)]().applyMatrix4(b[n(332)]),_=c([d,j]);_[n(317)]((new(s[n(322)]))[n(325)](Math.PI/2)),f(_),_[n(343)]();const x=(t=>{const o=n;return new(s[o(339)])({vertexShader:o(302),fragmentShader:o(353),uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:p})})(l),M=new(s[n(328)])(_,x);m((()=>{const t=n;e[t(319)]&&(x.uniforms[t(306)].value=e[t(319)])}));const k=V(),D=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(297)].width,y:(1-t.uv.y)*o[e(297)].height};console.log(e(305),t),console[e(356)](e(358),H(o,n)),k[e(298)](H(o,n))}},z=t=>{t&&k.$patch({showDiv:!0})},S=t=>{t&&k[n(333)](!1)};return(t,o)=>{const r=n;return g(),y(I,null,[v(r(313),{object:w(M),"rotation-x":-Math.PI/2,onPointerMove:D,onPointerEnter:z,onPointerLeave:S},null,40,tt),v("primitive",{object:e[r(348)][r(348)].children[0].clone()},null,8,nt)],64)}}});function ot(t){function n(t){const e=K;if(typeof t===e(312))return function(t){}.constructor("while (true) {}")[e(354)](e(295));1!==(""+t/t)[e(349)]||t%20==0?function(){return!0}.constructor("debu"+e(310)).call(e(337)):function(){return!1}[e(344)]("debugger")[e(354)](e(346)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=B({__name:"dataDiv",setup(t){const n=V(),e=h({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return b((()=>{window.addEventListener("mousemove",o)})),j((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>_((g(),y("div",{class:"title",style:k(e.value)},"温度："+M(w(n).temperature)+"℃ ",5)),[[x,w(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),it=at;function st(){const t=["info","916404ASmXcy","1711612GgjydY","string","12kfkLKd",'{}.constructor("return this")( )',"function *\\( *\\)","132ZiNwVF","init","toString","heatmap2","chain","while (true) {}","opacity","console","input","gger","1654NozhYC","2306200fdcxTh","93568MIAPDc","return (function() ","trace","prototype","62enjlCg","constructor","debu","apply","bind","builds","length","stateObject","action","4lYzJbl","__proto__","test","log","8112330YPyLkx","model","table","透明度","315VdlcUl","exception","error","6567iZQBKe","addBinding"];return(st=function(){return t})()}!function(t,n){const e=at,o=st();for(;;)try{if(433276===parseInt(e(271))/1*(-parseInt(e(265))/2)+parseInt(e(291))/3*(-parseInt(e(280))/4)+parseInt(e(266))/5+-parseInt(e(252))/6*(parseInt(e(250))/7)+parseInt(e(267))/8*(parseInt(e(288))/9)+-parseInt(e(284))/10+-parseInt(e(255))/11*(-parseInt(e(249))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[at(274)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ct(this,(function(){const t=at,n=new RegExp(t(254)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=ft(t(256));n[t(282)](o+t(259))&&e[t(282)](o+t(263))?ft():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[at(274)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function at(t,n){const e=st();return(at=function(t,n){return e[t-=247]})(t,n)}ut(void 0,(function(){const t=at;let n;try{n=Function(t(268)+t(253)+");")()}catch(r){n=window}const e=n[t(262)]=n[t(262)]||{},o=[t(283),"warn",t(248),t(290),t(289),t(286),t(269)];for(let i=0;i<o[t(277)];i++){const n=ut[t(272)][t(270)][t(275)](ut),r=o[i],s=e[r]||n;n[t(281)]=ut[t(275)](ut),n[t(257)]=s[t(257)][t(275)](s),e[r]=n}}))();const pt=d({__name:it(258),async setup(r){const i=it;let s,c;const u=h(!1),a=([s,c]=D((()=>o())),s=await s,c(),s);u.value=!0;const p=z({width:1,color:"#000",opacity:1,show:!0}),f=z({opacity:.9});return new t({title:"参数",expanded:!0})[i(247)](f,i(261),{label:i(287),min:0,max:1,step:.1}),(t,o)=>{const r=i;return g(),y(I,null,[S(e,{showBuildings:!1,autoRotate:!1},{ability:A((()=>[S(et,T({model:w(a)},f),null,16,[r(285)]),S(n,T(p,{builds:w(a).city}),null,16,[r(276)])])),_:1}),S(rt)],64)}}});function ft(t){function n(t){const e=at;if(typeof t===e(251))return function(t){}.constructor(e(260)).apply("counter");1!==(""+t/t)[e(277)]||t%20==0?function(){return!0}[e(272)]("debu"+e(264)).call(e(279)):function(){return!1}[e(272)](e(273)+"gger")[e(274)](e(278)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{pt as default};

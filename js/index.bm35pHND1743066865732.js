import{au as n,Y as t,l as e,aR as r,aS as o,aT as i,N as a,aC as c,aD as s,U as u,aY as l,C as f,ab as p,u as d,r as h,T as v,ch as m,ci as g,a5 as _,h as y,b as x,e as I,_ as b,bR as S,n as w,b1 as M,V as R,bs as E,a3 as A,aq as D,B as T,c as z,aP as P,g as C,M as O,t as B,q as F,a as k,K as j}from"./three.qSkR4_5R1743066865732.js";import{m as U,j as N,e as L}from"./@tresjs.NxYvETXi1743066865732.js";import{R as H}from"./three-stdlib.tjOHNgPP1743066865732.js";import{y as Z,b as G,w as W,a as $,u as V,d as K,W as q,a3 as X,a0 as Y,o as Q,H as J,J as nn,M as tn,a7 as en,a2 as rn,q as on,f as an,N as cn,a8 as sn,r as un,B as ln,v as fn,s as pn,F as dn,a6 as hn,m as vn}from"./@vue.L-brCdZe1743066865732.js";import{M as mn,a as gn,C as _n}from"./@pmndrs.fRJ1Czfy1743066865732.js";import{h as yn}from"./object-hash.j9vF23_i1743066865732.js";function xn(n,t){var e=Dn();return xn=function(n,t){return e[n-=216]},xn(n,t)}var In=xn;!function(n,t){for(var e=xn,r=Dn();;)try{if(315896===-parseInt(e(230))/1+parseInt(e(246))/2+parseInt(e(238))/3+parseInt(e(225))/4+parseInt(e(231))/5+-parseInt(e(244))/6+-parseInt(e(216))/7*(-parseInt(e(237))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var bn,Sn=(bn=!0,function(n,t){var e=bn?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return bn=!1,e});!function(){Sn(this,(function(){var n=xn,t=new RegExp(n(249)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=An("init");t[n(252)](r+n(220))&&e.test(r+"input")?An():r("0")}))()}();var wn,Mn=(wn=!0,function(n,t){var e=wn?function(){if(t){var e=t[xn(255)](n,arguments);return t=null,e}}:function(){};return wn=!1,e});Mn(void 0,(function(){for(var n=xn,t=function(){var n,t=xn;try{n=Function(t(234)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(239)]=t[n(239)]||{},r=[n(219),n(248),n(233),n(245),"exception",n(253),n(223)],o=0;o<r[n(221)];o++){var i=Mn[n(242)].prototype.bind(Mn),a=r[o],c=e[a]||i;i[n(236)]=Mn.bind(Mn),i[n(228)]=c[n(228)][n(232)](c),e[a]=i}}))();class Rn extends n{constructor(){var n=xn;super(),this[n(222)]=null,this[n(222)]=new t}[In(250)](...n){var t=In;return this[t(222)][t(250)](...n),this}[In(243)](){var n=In;this[n(222)][n(227)]((t=>{var r=n;t instanceof e&&(t[r(240)][r(247)](),t.material[r(247)](),t[r(235)][r(241)]&&t[r(235)][r(241)][r(247)](),this[r(222)][r(251)](t))})),this[n(222)]=null}}const En=Rn;function An(n){function t(n){var e=xn;if(typeof n===e(218))return function(n){}[e(242)](e(217))[e(255)]("counter");1!==(""+n/n)[e(221)]||n%20==0?function(){return!0}[e(242)](e(226)+e(229))[e(224)](e(254)):function(){return!1}.constructor(e(226)+e(229))[e(255)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Dn(){var n=["return (function() ","material","__proto__","200088EFpaHD","280320LyBRDR","console","geometry","map","constructor","destructor","1299372FvaZKE","error","664970SrNaZj","dispose","warn","function *\\( *\\)","add","remove","test","table","action","apply","7gouwuM","while (true) {}","string","log","chain","length","virtualScene","trace","call","1466796nrlBQm","debu","traverse","toString","gger","422498uOHwkM","686605hZxjKQ","bind","info"];return(Dn=function(){return n})()}const Tn=zn;function zn(n,t){const e=Fn();return zn=function(n,t){return e[n-=380]},zn(n,t)}!function(n,t){const e=zn,r=Fn();for(;;)try{if(532796===parseInt(e(389))/1+parseInt(e(398))/2+-parseInt(e(401))/3+-parseInt(e(405))/4+-parseInt(e(390))/5+parseInt(e(388))/6+parseInt(e(394))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zn(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pn(this,(function(){const n=zn,t=new RegExp(n(402)),e=new RegExp(n(380),"i"),r=Bn("init");t[n(404)](r+n(411))&&e.test(r+n(381))?Bn():r("0")}))()}();const Cn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Cn(void 0,(function(){const n=zn;let t;try{t=Function("return (function() "+n(383)+");")()}catch(o){t=window}const e=t[n(406)]=t[n(406)]||{},r=[n(400),"warn","info",n(397),n(385),n(382),"trace"];for(let i=0;i<r[n(396)];i++){const t=Cn.constructor[n(412)][n(393)](Cn),o=r[i],a=e[o]||t;t[n(399)]=Cn.bind(Cn),t[n(414)]=a[n(414)][n(393)](a),e[o]=t}}))();const On={sunset:Tn(392),studio:Tn(384),city:"city/canary_wharf_1k.hdr",umbrellas:Tn(387),night:Tn(416),forest:"outood/mossy_forest_1k.hdr",snow:Tn(386),dawn:Tn(407),hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:"city/modern_buildings_2_1k.hdr",shangai:Tn(409)};function Bn(n){function t(n){const e=zn;if("string"==typeof n)return function(n){}[e(410)](e(403)).apply(e(415));1!==(""+n/n)[e(396)]||n%20==0?function(){return!0}[e(410)](e(408)+"gger")[e(391)]("action"):function(){return!1}.constructor("debu"+e(395))[e(413)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Fn(){const n=["prototype","apply","toString","counter","outdoor/satara_night_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","table",'{}.constructor("return this")( )',"studio/poly_haven_studio_1k.hdr","exception","outdoor/snowy_forest_path_01_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","3073464HtdRtl","645296rKEvGk","2734915hPkVQe","call","venice/venice_sunset_1k.hdr","bind","4027982HvCifi","gger","length","error","210758pZRmPZ","__proto__","log","1125270GMzvDf","function *\\( *\\)","while (true) {}","test","1533904uenshm","console","kiara/kiara_1_dawn_1k.hdr","debu","city/shanghai_bund_1k.hdr","constructor","chain"];return(Fn=function(){return n})()}function kn(n,t){const e=Ln();return kn=function(n,t){return e[n-=241]},kn(n,t)}const jn=kn;!function(n,t){const e=kn,r=Ln();for(;;)try{if(315499===-parseInt(e(249))/1+-parseInt(e(277))/2*(-parseInt(e(256))/3)+-parseInt(e(284))/4+-parseInt(e(269))/5+-parseInt(e(282))/6*(parseInt(e(259))/7)+-parseInt(e(281))/8+parseInt(e(285))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=kn,t=new RegExp(n(273)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zn(n(253));t[n(271)](r+n(262))&&e.test(r+n(251))?Zn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ln(){const n=["2HMdIOg","log","background","value","3503384xfRjPo","24GMWeDX","Failed to load environment map: ","723824ByzGov","18129771RrNtrf",'{}.constructor("return this")( )',"console","table","debu","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","action","toString","setPath","mapping","trace","264508rtYfQL","keys","input","texture","init","__proto__","string","581541mBWnjy","info","Preset must be one of: ","748727UlsPMj","constructor","length","chain","isArray","join","error","bind","counter","apply","2907680XDFNqG","environment","test","isColor","function *\\( *\\)","gger","backgroundBlurriness","return (function() "];return(Ln=function(){return n})()}Nn(void 0,(function(){const n=kn;let t;try{t=Function(n(276)+n(286)+");")()}catch(o){t=window}const e=t[n(287)]=t[n(287)]||{},r=[n(278),"warn",n(257),n(265),"exception",n(241),n(248)];for(let i=0;i<r[n(261)];i++){const t=Nn[n(260)].prototype[n(266)](Nn),o=r[i],a=e[o]||t;t[n(254)]=Nn[n(266)](Nn),t[n(245)]=a[n(245)][n(266)](a),e[o]=t}}))();const Hn=jn(243);function Zn(n){function t(n){const e=kn;if(typeof n===e(255))return function(n){}.constructor("while (true) {}")[e(268)](e(267));1!==(""+n/n).length||n%20==0?function(){return!0}[e(260)](e(242)+e(274)).call(e(244)):function(){return!1}[e(260)]("debu"+e(274))[e(268)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=Vn;!function(n,t){const e=Vn,r=qn();for(;;)try{if(476089===parseInt(e(412))/1*(-parseInt(e(401))/2)+parseInt(e(422))/3*(parseInt(e(423))/4)+-parseInt(e(379))/5*(-parseInt(e(419))/6)+-parseInt(e(381))/7+parseInt(e(411))/8*(-parseInt(e(376))/9)+-parseInt(e(410))/10+parseInt(e(424))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=Vn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Xn(n(383));t.test(r+n(421))&&e[n(384)](r+n(406))?Xn():r("0")}))()}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(416)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=qn();return Vn=function(n,t){return e[n-=374]},Vn(n,t)}$n(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(392)+n(420)+");")()}catch(e){t=window}return t}(),e=t[n(380)]=t[n(380)]||{},r=[n(400),"warn",n(415),n(399),n(375),"table",n(386)];for(let o=0;o<r[n(413)];o++){const t=$n[n(389)].prototype[n(394)]($n),i=r[o],a=e[i]||t;t[n(426)]=$n.bind($n),t[n(395)]=a.toString[n(394)](a),e[i]=t}}))();const Kn=K({__name:Gn(425),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Gn;let f,p;const d=n,h=G(null);t({texture:h});const{extend:v,renderer:m,scene:g}=U();let _=null,y=G(null),x=null;const I=G(null);q((()=>{const n=Vn;I.value?.[n(409)](),y.value?.[n(405)]()}));const{onBeforeLoop:b}=L();let S=1;b((()=>{const n=Vn;x&&I[n(382)]&&y[n(382)]&&(d[n(390)]===1/0||S<d.frames)&&(d.useDefaultScene?x[n(408)](m.value,g[n(382)]):x[n(408)](m[n(382)],en(I.value.virtualScene)),S++)}));const w=([f,p]=X((()=>async function(n,t){const e=jn,{scene:a,invalidate:c}=U(),{preset:s,blur:u,files:l=G([]),path:f=G(""),background:p}=Z(n);W(n,(()=>{c()}));const d=G(null),h=$((()=>Array[e(263)](l[e(280)]))),v=$((()=>h[e(280)]?r:H));return W([l,f],(async([n,t])=>{const r=e;if(n&&n[r(261)]>0&&!s?.[r(280)]){try{d[r(280)]=await N(v[r(280)],h[r(280)]?[...V(n)]:V(n),(n=>{t&&n[r(246)](V(t))}))}catch(a){throw new Error(r(283)+a)}d[r(280)]&&(d[r(280)][r(247)]=h.value?o:i)}}),{immediate:!0}),W(d,(n=>{const t=e;a[t(280)]&&n&&(a.value[t(270)]=n)}),{immediate:!0}),W([p,d],(([n,r])=>{const o=e;if(a[o(280)]){let e=t?.[o(280)]?t[o(280)][o(252)]:r,i=a[o(280)][o(279)];!i?.[o(272)]&&(i=void 0),a.value.background=n?e:i}}),{immediate:!0}),W((()=>u?.[e(280)]),(n=>{const t=e;a.value&&n&&(a[t(280)][t(275)]=n)}),{immediate:!0}),W((()=>s?.[e(280)]),(async n=>{const t=e;if(n&&n in On){const e=Hn,o=On[n];try{d[t(280)]=await N(H,o,(n=>{e&&n[t(246)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}d.value&&d.value&&(d.value.mapping=i),c()}else if(n&&!(n in On))throw new Error(t(258)+Object[t(250)](On)[t(264)](", "))}),{immediate:!0}),d}(d,y))),f=await f,p(),f),M=n=>{const t=Vn;n?(g[t(382)].environment=n[t(403)],d[t(378)]&&(g[t(382)][t(378)]=n[t(403)])):(g[t(382)][t(377)]=w[t(382)],d.background&&(g[t(382)][t(378)]=w[t(382)]))};W(w,(n=>{const t=Vn;y[t(382)]&&M(y[t(382)])}),{immediate:!0,deep:!0}),v({EnvSence:En});const R=()=>{const n=Vn;y[n(382)]?.[n(405)](),y[n(382)]=new c(d.resolution),x=new s(d[n(418)],d[n(391)],y[n(382)]),d[n(385)]?(y[n(382)][n(403)][n(396)]=u,y[n(382)][n(403)].generateMipmaps=!1,y.value[n(403)][n(388)]=l,y.value[n(403)].magFilter=l):y[n(382)][n(403)].type=a,M(y.value)};return W((()=>Y()[e(398)]),(n=>{const t=e;n&&(!y[t(382)]||y[t(382)].texture[t(396)]!==a)&&(_=n(),Array[t(387)](_)&&_[t(413)]>0&&"symbol"!=typeof _[0]?.[t(396)])?R():(y[t(382)]?.dispose(),y.value=null,M(null))}),{immediate:!0,deep:!0}),h[e(382)]=w,W((()=>d[e(385)]),(n=>{y[e(382)]&&R()})),(n,t)=>{const r=e;return V(y)?(Q(),J("TresEnvSence",{key:0,ref_key:r(417),ref:I},[nn(n[r(414)],r(398))],512)):tn("",!0)}}});function qn(){const n=["destructor","9211330tFAtnU","1816aqDlxs","162809LGewkh","length","$slots","info","apply","envSence","near","12270fxHfNI",'{}.constructor("return this")( )',"chain","174330YmCgeu","12xhmixm","28759665kXLMkl","component","__proto__","while (true) {}","exception","31518gNdjts","environment","background","1110DXKUnR","console","2795961recuSg","value","init","test","useDefaultScene","trace","isArray","minFilter","constructor","frames","far","return (function() ","string","bind","toString","type","action","default","error","log","8qVRrLS","call","texture","gger","dispose","input","counter","update"];return(qn=function(){return n})()}function Xn(n){function t(n){const e=Vn;if(typeof n===e(393))return function(n){}[e(389)](e(374))[e(416)](e(407));1!==(""+n/n)[e(413)]||n%20==0?function(){return!0}[e(389)]("debu"+e(404))[e(402)](e(397)):function(){return!1}[e(389)]("debu"+e(404))[e(416)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yn=nt;!function(n,t){const e=nt,r=it();for(;;)try{if(617588===-parseInt(e(224))/1+parseInt(e(223))/2+parseInt(e(216))/3+-parseInt(e(261))/4*(-parseInt(e(262))/5)+parseInt(e(215))/6*(-parseInt(e(221))/7)+-parseInt(e(219))/8*(-parseInt(e(243))/9)+-parseInt(e(253))/10*(parseInt(e(259))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[nt(234)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qn(this,(function(){const n=nt,t=new RegExp(n(229)),e=new RegExp(n(226),"i"),r=ct(n(239));t.test(r+n(264))&&e[n(258)](r+n(244))?ct():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nt(n,t){const e=it();return nt=function(n,t){return e[n-=211]},nt(n,t)}Jn(void 0,(function(){const n=nt,t=function(){const n=nt;let t;try{t=Function("return (function() "+n(240)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(228)]||{},r=[n(238),"warn","info",n(213),n(246),n(260),n(263)];for(let o=0;o<r[n(231)];o++){const t=Jn[n(217)][n(233)][n(222)](Jn),i=r[o],a=e[i]||t;t[n(257)]=Jn[n(222)](Jn),t[n(235)]=a[n(235)][n(222)](a),e[i]=t}}))();const tt={key:0,args:[0,1,64]},et={key:1,args:[.5,1,64]},rt={key:2},ot=[Yn(218),Yn(227),Yn(251),Yn(241)];function it(){const n=["action","log","init",'{}.constructor("return this")( )',"color","while (true) {}","18rMgHMv","input","value","exception","material","from","TresRingGeometry","TresPlaneGeometry","side","ring","370CoRaTt","rect","call","string","__proto__","test","254111usuqrc","table","5020OvnXvB","590jBcUlg","trace","chain","needsUpdate","intensity","gger","error","multiplyScalar","12AstlNB","1560018akIihr","constructor","toneMapped","4532200MMNLyB","counter","491960gZnJVj","bind","1841194UXycZE","1108858cXrVwV","TresMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","map","console","function *\\( *\\)","TresMeshBasicMaterial","length","debu","prototype","apply","toString","set"];return(it=function(){return n})()}const at=K({__name:"index",props:{args:{default:null},from:{default:Yn(254)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new f(16777215)}},setup(n){const t=Yn,e=n,r=G();return rn((()=>{const n=nt;r[n(245)]&&(r.value.color[n(214)](e[n(211)]),r[n(245)][n(265)]=!0)})),W((()=>e[t(241)]),(n=>{const o=t;r.value&&(r[o(245)].color[o(236)](n),r.value[o(241)][o(214)](e[o(211)]),r.value[o(265)]=!0)})),on((()=>{})),(n,o)=>{const i=t;return Q(),J(i(225),null,["circle"===e.from?(Q(),J("TresRingGeometry",tt)):e[i(248)]===i(252)?(Q(),J(i(249),et)):"rect"===e[i(248)]?(Q(),J(i(250),rt)):(Q(),an(e[i(248)],{key:3,args:e})),cn(i(230),{ref_key:i(247),ref:r,toneMapped:n[i(218)],map:n[i(227)],side:V(p),color:n[i(241)]},null,8,ot)])}}});function ct(n){function t(n){const e=nt;if(typeof n===e(256))return function(n){}.constructor(e(242))[e(234)](e(220));1!==(""+n/n)[e(231)]||n%20==0?function(){return!0}.constructor(e(232)+e(212))[e(255)](e(237)):function(){return!1}.constructor("debugger")[e(234)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ut,r=ft();for(;;)try{if(323189===-parseInt(e(201))/1+-parseInt(e(203))/2+parseInt(e(190))/3*(-parseInt(e(195))/4)+-parseInt(e(200))/5+-parseInt(e(194))/6*(parseInt(e(205))/7)+parseInt(e(188))/8+parseInt(e(193))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const st=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(199)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ut(n,t){const e=ft();return ut=function(n,t){return e[n-=177]},ut(n,t)}!function(){st(this,(function(){const n=ut,t=new RegExp(n(216)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=dt(n(177));t[n(208)](r+"chain")&&e[n(208)](r+"input")?dt():r("0")}))()}();const lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ft(){const n=["info","1103184mGqejN","prototype","3pjsmZl","length","height","16498593KyKosI","6FkWLew","1959764bZUhqt","toString","constructor","stateObject","apply","1427355GGzjvC","258873QBYcIU","type","10464XkSDmr","debu","4258583VHYWdS","value","depthTexture","test","error","while (true) {}","render","return (function() ","trace","warn","console","function *\\( *\\)","bind",'{}.constructor("return this")( )',"init","counter","width","__proto__","format","table","setRenderTarget","dispose","log","call"];return(ft=function(){return n})()}function pt(n){const t=G(null),{height:e,width:r,settings:o,depth:i,isLoop:c}=sn(n)?Z(n):Z(un(n)),{onLoop:s}=L(),{camera:u,renderer:l,scene:f,sizes:p}=U();return rn((()=>{const n=ut;t[n(206)]?.[n(184)](),t[n(206)]=new d(r?.[n(206)]||p[n(179)][n(206)],e?.[n(206)]||p[n(192)][n(206)],{minFilter:h,magFilter:h,type:a,...o?.[n(206)]}),i?.value&&(t.value[n(207)]=new v(r?.value||p[n(179)][n(206)],e?.value||p[n(192)].value),t[n(206)][n(207)][n(181)]=m,t[n(206)][n(207)][n(202)]=g)})),s((()=>{const n=ut;c?.value&&(l[n(206)][n(183)](en(t[n(206)])),l.value.clear(),l.value[n(211)](en(f[n(206)]),en(u[n(206)])),l[n(206)][n(183)](null))})),ln((()=>{const n=ut;t[n(206)]?.[n(184)]()})),t}function dt(n){function t(n){const e=ut;if("string"==typeof n)return function(n){}.constructor(e(210))[e(199)](e(178));1!==(""+n/n)[e(191)]||n%20==0?function(){return!0}[e(197)]("debugger")[e(186)]("action"):function(){return!1}.constructor(e(204)+"gger").apply(e(198)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ht(n,t){const e=yt();return ht=function(n,t){return e[n-=362]},ht(n,t)}lt(void 0,(function(){const n=ut,t=function(){const n=ut;let t;try{t=Function(n(212)+n(218)+");")()}catch(e){t=window}return t}(),e=t[n(215)]=t[n(215)]||{},r=[n(185),n(214),n(187),n(209),"exception",n(182),n(213)];for(let o=0;o<r.length;o++){const t=lt.constructor[n(189)][n(217)](lt),i=r[o],a=e[i]||t;t[n(180)]=lt[n(217)](lt),t[n(196)]=a[n(196)][n(217)](a),e[i]=t}}))();const vt=ht;!function(n,t){const e=ht,r=yt();for(;;)try{if(874506===parseInt(e(366))/1*(-parseInt(e(381))/2)+-parseInt(e(392))/3+-parseInt(e(379))/4+parseInt(e(362))/5+-parseInt(e(415))/6*(parseInt(e(376))/7)+parseInt(e(370))/8*(-parseInt(e(399))/9)+parseInt(e(400))/10*(parseInt(e(414))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){mt(this,(function(){const n=ht,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(364),"i"),r=It(n(375));t[n(402)](r+n(390))&&e[n(402)](r+n(405))?It():r("0")}))()}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(411)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();gt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function(n(406)+n(369)+");")()}catch(e){t=window}return t}(),e=t[n(368)]=t[n(368)]||{},r=["log",n(372),n(385),n(378),n(412),"table","trace"];for(let o=0;o<r[n(383)];o++){const t=gt[n(404)][n(367)].bind(gt),i=r[o],a=e[i]||t;t[n(413)]=gt[n(377)](gt),t[n(384)]=a.toString[n(377)](a),e[i]=t}}))();const _t=[vt(371),"side"];function yt(){const n=["texture","setRenderTarget","counter","chain","isMesh","3174219gnQPRv","debu","background","gger","uuid","side","TresMeshTransmissionMaterial","29763gZWLdv","44584400HKBZyk","toneMapping","test","time","constructor","input","return (function() ","stateObject","fboResolution","render","backside","apply","exception","__proto__","11MSLOhf","36GEWoFl","5106345sVgUns","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","thickness","3xVHcMI","prototype","console",'{}.constructor("return this")( )',"3016pULtNP","buffer","warn","call","envMapIntensity","init","598339SXKCkY","bind","error","587760kjCinC","material","1093726tIOQlF","while (true) {}","length","toString","info","index"];return(yt=function(){return n})()}const xt=K({__name:vt(386),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=vt,r=fn(),{extend:o,scene:i,renderer:a,camera:c}=U(),s=fn(),u=n;o({MeshTransmissionMaterial:mn});const l=new gn,{onBeforeLoop:f}=L(),d=pt({width:u[e(408)],height:u.fboResolution,isLoop:!1}),h=pt({width:u[e(408)],height:u[e(408)],isLoop:!1});let v,m,g,y;return on((async()=>{const n=e;await pn(),s[n(363)]=function(n,t){let e;return n.traverse((n=>{const r=ht;n[r(391)]&&n[r(380)]&&n[r(380)][r(396)]===t&&(e=n)})),e}(i.value,r.value[n(396)])})),f((({elapsed:n})=>{const t=e;r[t(363)][t(403)]=n,r.value[t(371)]===h[t(363)][t(387)]&&s.value&&(g=a[t(363)][t(401)],v=i[t(363)][t(394)],m=r.value[t(374)],y=s.value.material[t(397)],s[t(363)][t(380)]=l,u[t(410)]&&(a.value.setRenderTarget(d[t(363)]),a[t(363)].render(i[t(363)],c.value),s[t(363)][t(380)]=r[t(363)],s[t(363)][t(380)][t(365)]=u.backsideThickness,s.value.material[t(371)]=d.value[t(387)],s[t(363)][t(380)].side=_,s.value[t(380)][t(374)]=0),a[t(363)][t(388)](h[t(363)]),a[t(363)][t(409)](i.value,c[t(363)]),s[t(363)][t(380)][t(371)]=h[t(363)][t(387)],s[t(363)][t(380)]=r[t(363)],s.value[t(380)][t(365)]=u[t(365)],s[t(363)][t(380)][t(397)]=y,s[t(363)][t(380)][t(374)]=m,i[t(363)][t(394)]=v,a[t(363)][t(388)](null),a[t(363)].toneMapping=g)})),t({root:r,constructor:mn}),(n,t)=>{const o=e;return Q(),J(o(398),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:V(h)[o(387)],side:V(p)},null,8,_t)}}});function It(n){function t(n){const e=ht;if("string"==typeof n)return function(n){}[e(404)](e(382))[e(411)](e(389));1!==(""+n/n).length||n%20==0?function(){return!0}[e(404)](e(393)+e(395))[e(373)]("action"):function(){return!1}[e(404)](e(393)+e(395))[e(411)](e(407)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const bt=Mt;function St(){const n=["value","208534xjOkqX","input","getBoundingSphere","toString","disableX","warn","matrixWorld","disableZ","__proto__","TresGroup","error","set","4529cSoGmE","length","min","disable","index","349056OsqukE","info","apply","identity","outer","string","15791830YZfgkZ","function *\\( *\\)","6282yWESPZ","position","1747644hVuhkH","right","left","226184xhDjfK","return (function() ","gref","console","debu","bind","constructor","precise","trace","3jAaMml","max","104xUppJw","getCenter","default","disableY","table","prototype","test","top","2034460wrMFur","front","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","back","chain","gger","stateObject",'{}.constructor("return this")( )'];return(St=function(){return n})()}!function(n,t){const e=Mt,r=St();for(;;)try{if(350779===-parseInt(e(329))/1+parseInt(e(359))/2+parseInt(e(368))/3*(parseInt(e(356))/4)+parseInt(e(320))/5+-parseInt(e(354))/6*(-parseInt(e(341))/7)+-parseInt(e(370))/8*(-parseInt(e(346))/9)+-parseInt(e(352))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(348)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Mt(n,t){const e=St();return Mt=function(n,t){return e[n-=320]},Mt(n,t)}!function(){wt(this,(function(){const n=Mt,t=new RegExp(n(353)),e=new RegExp(n(322),"i"),r=At("init");t[n(376)](r+n(324))&&e[n(376)](r+n(330))?At():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(348)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Rt(void 0,(function(){const n=Mt,t=function(){const n=Mt;let t;try{t=Function(n(360)+n(327)+");")()}catch(e){t=window}return t}(),e=t[n(362)]=t[n(362)]||{},r=["log",n(334),n(347),n(339),"exception",n(374),n(367)];for(let o=0;o<r[n(342)];o++){const t=Rt[n(365)][n(375)].bind(Rt),i=r[o],a=e[i]||t;t[n(337)]=Rt.bind(Rt),t.toString=a[n(332)][n(364)](a),e[i]=t}}))();const Et=K({__name:bt(345),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=G(null),r=G(null),o=G(null);return on((()=>{const n=Mt;if(!r[n(328)])return;if(!o[n(328)])return;r[n(328)][n(335)][n(349)]();const e=(new y).setFromObject(o[n(328)],t[n(366)]),i=new x,a=new I,c=e[n(369)].x-e[n(343)].x,s=e[n(369)].y-e[n(343)].y,u=e.max.z-e.min.z;e[n(371)](i),e[n(331)](a);const l=t[n(377)]?s/2:t.bottom?-s/2:0,f=t[n(358)]?-c/2:t[n(357)]?c/2:0,p=t[n(321)]?u/2:t[n(323)]?-u/2:0;r[n(328)][n(355)][n(340)](t[n(344)]||t[n(333)]?0:-i.x+f,t[n(344)]||t[n(373)]?0:-i.y+l,t[n(344)]||t[n(336)]?0:-i.z+p)})),(n,t)=>{const i=Mt;return Q(),J(i(338),{ref_key:i(361),ref:e},[cn(i(338),{ref_key:i(350),ref:r},[cn(i(338),{ref_key:"inner",ref:o},[nn(n.$slots,i(372))],512)],512)],512)}}});function At(n){function t(n){const e=Mt;if(typeof n===e(351))return function(n){}[e(365)]("while (true) {}")[e(348)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(365)](e(363)+"gger").call("action"):function(){return!1}.constructor(e(363)+e(325))[e(348)](e(326)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=zt;!function(n,t){const e=zt,r=Ct();for(;;)try{if(404774===-parseInt(e(453))/1*(-parseInt(e(484))/2)+parseInt(e(457))/3*(parseInt(e(478))/4)+parseInt(e(451))/5+parseInt(e(447))/6*(-parseInt(e(433))/7)+parseInt(e(459))/8+parseInt(e(485))/9+parseInt(e(465))/10*(-parseInt(e(429))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(483)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(n,t){const e=Ct();return zt=function(n,t){return e[n-=424]},zt(n,t)}!function(){Tt(this,(function(){const n=zt,t=new RegExp(n(435)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=kt("init");t[n(477)](r+n(425))&&e[n(477)](r+n(434))?kt():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(483)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(){const n=["add","group","causticsOnly","object","scene","error","prototype","update","call","test","1874440nbnNPA","toString","table",'{}.constructor("return this")( )',"primitive","apply","159406pFBaGR","5590071aSEwhx","info","stateObject","chain","while (true) {}","string","backsideIOR","5291udegSa","set","ior","TresGroup","7SzcQTg","input","function *\\( *\\)","#ffffff","return (function() ","worldRadius","warn","trace","value","console","color","action","helper","exception","3755826lDBXJj","far","counter","params","1685385neimdV","gger","5TyOivg","log","lightSource","intensity","3DfIAdS","debu","2905528CAKqWA","constructor","resolution","backside","index","length","24070vMWXUx","__proto__","bind"];return(Ct=function(){return n})()}Pt(void 0,(function(){const n=zt,t=function(){const n=zt;let t;try{t=Function(n(437)+n(481)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(442)]||{},r=[n(454),n(439),n(486),n(473),n(446),n(480),n(440)];for(let o=0;o<r.length;o++){const t=Pt[n(460)][n(474)].bind(Pt),i=r[o],a=e[i]||t;t[n(466)]=Pt.bind(Pt),t[n(479)]=a.toString[n(467)](a),e[i]=t}}))();const Ot=[Dt(471)],Bt=[Dt(471)],Ft=K({__name:Dt(463),props:{color:{default:Dt(436)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Dt,e=n,{renderer:r}=U(),o=_n(r[t(441)],{frames:1/0,resolution:e[t(461)],worldRadius:e.worldRadius});o[t(450)][t(462)]=!0;const i=fn(null);W(i,(n=>{const e=t;n&&o[e(472)][e(468)](n)}));const{onBeforeLoop:a}=L();return a((({elapsed:n})=>{o[t(475)]()})),rn((()=>{const n=t;e[n(443)]&&o[n(450)].color[n(430)](e[n(443)]),e[n(431)]&&(o[n(450)][n(431)]=e[n(431)]),e.backsideIOR&&(o[n(450)][n(428)]=e[n(428)]),e[n(448)]&&(o[n(450)].far=e.far),e[n(438)]&&(o[n(450)][n(438)]=e.worldRadius),e.intensity&&(o[n(450)][n(456)]=e[n(456)])})),W((()=>e.causticsOnly),(n=>{const e=t;o[e(450)][e(470)]=n})),W((()=>e.lightSource),(n=>{const e=t;n&&o.params.lightSource instanceof x&&o[e(450)][e(455)][e(430)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return Q(),J(dn,null,[cn(r(432),{ref_key:"group",ref:i},[nn(n.$slots,"default")],512),cn(r(482),{object:V(o)[r(469)],position:[0,.003,0]},null,8,Ot),cn(r(482),{object:V(o)[r(445)],visible:!1},null,8,Bt)],64)}}});function kt(n){function t(n){const e=zt;if(typeof n===e(427))return function(n){}[e(460)](e(426))[e(483)](e(449));1!==(""+n/n)[e(464)]||n%20==0?function(){return!0}.constructor(e(458)+e(452))[e(476)](e(444)):function(){return!1}[e(460)](e(458)+e(452))[e(483)](e(424)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function jt(n,t){const e=Lt();return jt=function(n,t){return e[n-=279]},jt(n,t)}!function(n,t){const e=jt,r=Lt();for(;;)try{if(523263===parseInt(e(289))/1*(-parseInt(e(295))/2)+-parseInt(e(311))/3*(-parseInt(e(331))/4)+-parseInt(e(332))/5+parseInt(e(309))/6*(parseInt(e(290))/7)+parseInt(e(304))/8+-parseInt(e(330))/9+-parseInt(e(296))/10*(-parseInt(e(318))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ut(this,(function(){const n=jt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(307),"i"),r=Zt(n(333));t.test(r+n(329))&&e[n(288)](r+n(303))?Zt():r("0")}))()}();const Nt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Lt(){const n=[", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","constructor","28180xLZfrX","6265270oveKcB","; i ++) {\n        offset = (vogelDiskSample(j, ","compile","programs","ShaderChunk","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","debu","input","1891384uPjWSw",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","6KBAmZl","shadowmap_pars_fragment","2308941KFRlYO","while (true) {}","call","error","__proto__","trace","forEach","11bEeSdy","info","apply","console","toString","warn","isArray","traverse","log","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","properties","chain","4215105ziBpxe","4JVGgCK","2223440toEHjg","init","bind","return (function() ","gger","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","action","replace","material","remove","dispose","test","27SWaYJC","1288903uBsBvO",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","length"];return(Lt=function(){return n})()}Nt(void 0,(function(){const n=jt;let t;try{t=Function(n(279)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(321)]=t[n(321)]||{},r=[n(326),n(323),n(319),n(314),"exception",n(308),n(316)];for(let i=0;i<r[n(292)];i++){const t=Nt[n(294)].prototype[n(334)](Nt),o=r[i],a=e[o]||t;t[n(315)]=Nt[n(334)](Nt),t[n(322)]=a[n(322)][n(334)](a),e[o]=t}}))();const Ht=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=jt,o=b[r(300)][r(310)];return S.shadowmap_pars_fragment=b[r(300)][r(310)][r(284)]("#ifdef USE_SHADOWMAP",r(281)+t+r(282)+n+r(306)+e+r(297)+e+r(293)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(291)+t+r(301)+e+r(305))[r(284)]("#if defined( SHADOWMAP_TYPE_PCF )",r(327)),(n,t,e)=>{S[r(310)]=o,function(n,t,e){const r=jt;t[r(325)]((t=>{const e=r;t[e(285)]&&(Array[e(324)](t.material)?t[e(285)][e(317)]((t=>{const r=e;n[r(328)][r(286)](t),t[r(287)]()})):(n[e(328)].remove(t[e(285)]),t[e(285)][e(287)]()))})),n[r(319)][r(299)][r(292)]=0,n[r(298)](t,e)}(n,t,e)}};function Zt(n){function t(n){const e=jt;if("string"==typeof n)return function(n){}.constructor(e(312))[e(320)]("counter");1!==(""+n/n)[e(292)]||n%20==0?function(){return!0}.constructor(e(302)+e(280))[e(313)](e(283)):function(){return!1}[e(294)](e(302)+"gger")[e(320)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gt=$t;!function(n,t){const e=$t,r=Vt();for(;;)try{if(235174===-parseInt(e(513))/1*(parseInt(e(481))/2)+-parseInt(e(508))/3*(parseInt(e(503))/4)+parseInt(e(510))/5*(-parseInt(e(484))/6)+-parseInt(e(492))/7+parseInt(e(514))/8+parseInt(e(504))/9+parseInt(e(495))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(n,t){const e=Vt();return $t=function(n,t){return e[n-=474]},$t(n,t)}function Vt(){const n=["call","init","console","stateObject","chain","4XVRjbT","288198LPoQlW","value","error","bind","344751cNeHnB","while (true) {}","268845NvZuEI","warn","action","40823KSaouR","3527712OkKsed","string","log","index",'{}.constructor("return this")( )',"toString","traverse","length","20FMJEuO","function *\\( *\\)","return (function() ","6GNfBdu","dispose","test","__proto__","apply","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","2749376IOLpIt","table","trace","7318720fUKdlk","input","gger"];return(Vt=function(){return n})()}!function(){Wt(this,(function(){const n=$t,t=new RegExp(n(482)),e=new RegExp(n(490),"i"),r=Xt(n(499));t[n(486)](r+n(502))&&e[n(486)](r+n(496))?Xt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Kt(void 0,(function(){const n=$t;let t;try{t=Function(n(483)+n(477)+");")()}catch(o){t=window}const e=t[n(500)]=t[n(500)]||{},r=[n(475),n(511),n(489),n(506),"exception",n(493),n(494)];for(let i=0;i<r[n(480)];i++){const t=Kt.constructor.prototype[n(507)](Kt),o=r[i],a=e[o]||t;t[n(487)]=Kt.bind(Kt),t[n(478)]=a[n(478)][n(507)](a),e[o]=t}}))();const qt=K({__name:Gt(476),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:r,renderer:o,scene:i}=U();let a=null;const c=n=>{const t=$t,{enabled:c,size:s,focus:u,samples:l}=n;a&&(a(o[t(505)],i[t(505)],r[t(505)]),a=null),c&&(a=Ht({focus:u,size:s,samples:l}),i.value[t(479)]((n=>{const r=t;n instanceof e&&n.material[r(485)]()})))};return c(t),W(t,(()=>{c(t)})),(n,t)=>null}});function Xt(n){function t(n){const e=$t;if(typeof n===e(474))return function(n){}[e(491)](e(509))[e(488)]("counter");1!==(""+n/n)[e(480)]||n%20==0?function(){return!0}[e(491)]("debu"+e(497))[e(498)](e(512)):function(){return!1}[e(491)]("debugger")[e(488)](e(501)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=Qt;function Qt(n,t){const e=ee();return Qt=function(n,t){return e[n-=414]},Qt(n,t)}!function(n,t){const e=Qt,r=ee();for(;;)try{if(704764===parseInt(e(436))/1*(-parseInt(e(429))/2)+-parseInt(e(456))/3+-parseInt(e(423))/4*(parseInt(e(434))/5)+parseInt(e(445))/6+parseInt(e(451))/7+-parseInt(e(440))/8*(parseInt(e(439))/9)+parseInt(e(435))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jt(this,(function(){const n=Qt,t=new RegExp(n(437)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=oe("init");t[n(450)](r+n(417))&&e[n(450)](r+n(425))?oe():r("0")}))()}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ne(void 0,(function(){const n=Qt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t[n(438)]||{},r=[n(427),"warn","info",n(421),"exception","table",n(418)];for(let o=0;o<r.length;o++){const t=ne[n(442)].prototype.bind(ne),i=r[o],a=e[i]||t;t[n(447)]=ne[n(444)](ne),t[n(457)]=a[n(457)][n(444)](a),e[i]=t}}))();const te=parseInt(A[Yt(454)](/\D+/g,""));function ee(){const n=["test","8175734EferWI","toneMapped","set","replace","setResolution","1349565xKuqLN","toString","colorspace_fragment","debu","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","counter","length","chain","trace","call","uniforms","error","string","4EpcrzI","setTexelSize","input","resolution","log","copy","2599820ljZXli","texelSize","apply","stateObject","value","6217405JDxthq","22756100fCECwh","1qcbhEO","function *\\( *\\)","console","162UmmywE","458320lIgZcv","gger","constructor","while (true) {}","bind","7713948SLDXyg","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","__proto__",">\n        }","halfTexelSize"];return(ee=function(){return n})()}class re extends w{constructor(n=new R){const t=Yt;super({uniforms:{inputBuffer:new M(null),depthBuffer:new M(null),resolution:new M(new R),texelSize:new M(new R),halfTexelSize:new M(new R),kernel:new M(0),scale:new M(1),cameraNear:new M(0),cameraFar:new M(1),minDepthThreshold:new M(0),maxDepthThreshold:new M(1),depthScale:new M(0),depthToBlurRatioBias:new M(.25)},fragmentShader:t(446)+(te>=154?t(458):"encodings_fragment")+t(448),vertexShader:t(414),blending:E,depthWrite:!1,depthTest:!1}),this[t(452)]=!1,this[t(424)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[Yt(424)](n,t){const e=Yt;this[e(420)][e(430)][e(433)][e(453)](n,t),this[e(420)][e(449)][e(433)][e(453)](n,t).multiplyScalar(.5)}[Yt(455)](n){const t=Yt;this[t(420)][t(426)][t(433)][t(428)](n)}}function oe(n){function t(n){const e=Qt;if(typeof n===e(422))return function(n){}[e(442)](e(443))[e(431)](e(415));1!==(""+n/n)[e(416)]||n%20==0?function(){return!0}[e(442)](e(459)+e(441))[e(419)]("action"):function(){return!1}[e(442)]("debugger").apply(e(432)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ie(){const n=["147mZHrYd","uniforms","inputBuffer","minDepthThreshold","setTexelSize","camera","debu","prototype","console","chain","render","exception","action","defines","frustumCulled","depthBuffer","counter","depthScale","test","renderToScreen","582852JVkWju","value","1707933fuqkYM","gger","19100961sfTQJu","position","renderTargetB","clone","scene","table","renderTargetA","depthToBlurRatioBias","2462605qKzTBJ","screen","6loaZtc",'{}.constructor("return this")( )',"1840506YcTEEz","setRenderTarget","error","input","string","setResolution","length","bind","kernel","maxDepthThreshold","call","apply","init","USE_DEPTH","log","24656UbQjdm","texture","toString","return (function() ","constructor","while (true) {}","convolutionMaterial","330456KuvSXH"];return(ie=function(){return n})()}const ae=ce;function ce(n,t){const e=ie();return ce=function(n,t){return e[n-=289]},ce(n,t)}!function(n,t){const e=ce,r=ie();for(;;)try{if(678122===-parseInt(e(322))/1+-parseInt(e(338))/2+parseInt(e(324))/3+-parseInt(e(301))/4+-parseInt(e(334))/5*(parseInt(e(336))/6)+parseInt(e(302))/7*(parseInt(e(294))/8)+parseInt(e(326))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(290)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=ce,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=fe(n(291));t[n(320)](r+n(311))&&e[n(320)](r+n(341))?fe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(290)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ue(void 0,(function(){const n=ce,t=function(){const n=ce;let t;try{t=Function(n(297)+n(337)+");")()}catch(e){t=window}return t}(),e=t[n(310)]=t[n(310)]||{},r=[n(293),"warn","info",n(340),n(313),n(331),"trace"];for(let o=0;o<r[n(344)];o++){const t=ue[n(298)][n(309)][n(345)](ue),i=r[o],a=e[i]||t;t.__proto__=ue[n(345)](ue),t[n(296)]=a.toString[n(345)](a),e[i]=t}}))();class le{constructor({resolution:n,width:r=500,height:o=500,minDepthThreshold:i=0,maxDepthThreshold:c=1,depthScale:s=0,depthToBlurRatioBias:u=.25}){const l=ce;this[l(321)]=!1,this[l(332)]=new d(n,n,{minFilter:h,magFilter:h,stencilBuffer:!1,depthBuffer:!1,type:a}),this[l(328)]=this[l(332)][l(329)](),this[l(300)]=new re,this[l(300)][l(306)](1/r,1/o),this.convolutionMaterial[l(343)](new R(r,o)),this[l(330)]=new t,this[l(307)]=new D,this.convolutionMaterial[l(303)][l(305)][l(323)]=i,this.convolutionMaterial[l(303)][l(347)][l(323)]=c,this[l(300)][l(303)][l(319)][l(323)]=s,this[l(300)].uniforms[l(333)][l(323)]=u,this.convolutionMaterial[l(315)][l(292)]=s>0;const f=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),p=new Float32Array([0,0,2,0,0,2]),v=new T;v.setAttribute(l(327),new z(f,3)),v.setAttribute("uv",new z(p,2)),this[l(335)]=new e(v,this[l(300)]),this.screen[l(316)]=!1,this[l(330)].add(this[l(335)])}[ae(312)](n,t,e){const r=ae,o=this.scene,i=this[r(307)],a=this[r(332)],c=this[r(328)],s=this.convolutionMaterial,u=s[r(303)];u[r(317)][r(323)]=t.depthTexture;const l=s[r(346)];let f,p,d,h=t;for(p=0,d=l[r(344)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(346)][r(323)]=l[p],u[r(304)][r(323)]=h[r(295)],n[r(339)](f),n[r(312)](o,i),h=f;u[r(346)][r(323)]=l[p],u[r(304)][r(323)]=h[r(295)],n[r(339)](this[r(321)]?null:e),n[r(312)](o,i)}}function fe(n){function t(n){const e=ce;if(typeof n===e(342))return function(n){}.constructor(e(299))[e(290)](e(318));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(308)+e(325))[e(289)](e(314)):function(){return!1}[e(298)](e(308)+e(325))[e(290)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}var pe=ve;!function(n,t){for(var e=ve,r=me();;)try{if(312364===-parseInt(e(177))/1+parseInt(e(170))/2+-parseInt(e(160))/3+parseInt(e(184))/4+parseInt(e(132))/5*(-parseInt(e(144))/6)+-parseInt(e(127))/7+parseInt(e(143))/8*(parseInt(e(192))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var de,he=(de=!0,function(n,t){var e=de?function(){if(t){var e=t[ve(123)](n,arguments);return t=null,e}}:function(){};return de=!1,e});function ve(n,t){var e=me();return ve=function(n,t){return e[n-=121]},ve(n,t)}function me(){var n=["_maxDepthThreshold","372656jyLmpi","tDiffuse","replace","constructor","#include <emissivemap_fragment>","trace","mirror","length","9RGavfi","minDepthThreshold","_mixContrast","_mirror","return (function() ","_tDiffuseBlur","apply","mixBlur","distortion","error","3352825BlcqCP","toString","setValues","test","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","100sOkbPN","textureMatrix","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","stateObject","warn","__proto__","_hasBlur","USE_UV","fragmentShader","mixContrast","maxDepthThreshold","11970568HXphES","82086vRXuSA","_distortionMap","table","action","distortionMap","info","function *\\( *\\)","tDepth","prototype","#include <project_vertex>","console","input","_mixBlur","hasBlur","_distortion","depthToBlurRatioBias","1873002KjZiCO","_minDepthThreshold","debu","mixStrength","tDiffuseBlur","vertexShader","_tDiffuse","uniforms","_blurStrength","depthScale","1064550vfouRc","onBeforeCompile","_depthToBlurRatioBias","value","bind","_tDepth","counter","432467FDQxyw","_depthScale","init","gger","string","_textureMatrix"];return(me=function(){return n})()}!function(){he(this,(function(){var n=ve,t=new RegExp(n(150)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=xe(n(179));t[n(130)](r+"chain")&&e[n(130)](r+n(155))?xe():r("0")}))()}();var ge,_e=(ge=!0,function(n,t){var e=ge?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return ge=!1,e});_e(void 0,(function(){var n,t=ve;try{n=Function(t(121)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(154)]=n[t(154)]||{},r=["log",t(136),t(149),t(126),"exception",t(146),t(189)],o=0;o<r[t(191)];o++){var i=_e[t(187)][t(152)][t(174)](_e),a=r[o],c=e[a]||i;i[t(137)]=_e[t(174)](_e),i.toString=c[t(128)][t(174)](c),e[a]=i}}))();class ye extends P{constructor(n={}){var t=ve;super(n),this._tDepth={value:null},this._distortionMap={value:null},this[t(166)]={value:null},this[t(122)]={value:null},this[t(182)]={value:null},this[t(138)]={value:!1},this[t(195)]={value:0},this[t(156)]={value:0},this[t(168)]={value:.5},this._minDepthThreshold={value:.9},this[t(183)]={value:1},this[t(178)]={value:0},this[t(172)]={value:.25},this[t(158)]={value:1},this._mixContrast={value:1},this[t(129)](n)}[pe(171)](n){var t=pe;!n.defines?.USE_UV&&(n.defines[t(139)]=""),n[t(167)][t(157)]=this[t(138)],n[t(167)][t(185)]=this[t(166)],n[t(167)].tDepth=this._tDepth,n[t(167)][t(148)]=this[t(145)],n[t(167)][t(164)]=this[t(122)],n.uniforms[t(133)]=this[t(182)],n.uniforms[t(190)]=this._mirror,n.uniforms.mixBlur=this[t(156)],n[t(167)][t(163)]=this[t(168)],n[t(167)][t(193)]=this[t(161)],n[t(167)][t(142)]=this._maxDepthThreshold,n.uniforms[t(169)]=this[t(178)],n[t(167)][t(159)]=this[t(172)],n.uniforms.distortion=this[t(158)],n.uniforms[t(141)]=this[t(194)],n.vertexShader="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[t(165)],n.vertexShader=n[t(165)].replace(t(153),t(131)),n[t(140)]=t(134)+n[t(140)],n[t(140)]=n[t(140)][t(186)](t(188),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[pe(185)](){return this._tDiffuse.value}set tDiffuse(n){this[pe(166)].value=n}get[pe(151)](){var n=pe;return this[n(175)][n(173)]}set tDepth(n){var t=pe;this[t(175)][t(173)]=n}get[pe(148)](){var n=pe;return this[n(145)][n(173)]}set[pe(148)](n){var t=pe;this[t(145)][t(173)]=n}get tDiffuseBlur(){return this[pe(122)].value}set tDiffuseBlur(n){var t=pe;this._tDiffuseBlur[t(173)]=n}get[pe(133)](){var n=pe;return this._textureMatrix[n(173)]}set[pe(133)](n){var t=pe;this[t(182)][t(173)]=n}get[pe(157)](){var n=pe;return this[n(138)][n(173)]}set[pe(157)](n){this._hasBlur.value=n}get[pe(190)](){return this[pe(195)].value}set mirror(n){var t=pe;this._mirror[t(173)]=n}get mixBlur(){var n=pe;return this[n(156)][n(173)]}set[pe(124)](n){var t=pe;this[t(156)][t(173)]=n}get[pe(163)](){var n=pe;return this[n(168)][n(173)]}set[pe(163)](n){this[pe(168)].value=n}get minDepthThreshold(){return this[pe(161)].value}set[pe(193)](n){var t=pe;this[t(161)][t(173)]=n}get[pe(142)](){var n=pe;return this[n(183)][n(173)]}set[pe(142)](n){this[pe(183)].value=n}get[pe(169)](){var n=pe;return this[n(178)][n(173)]}set[pe(169)](n){var t=pe;this._depthScale[t(173)]=n}get[pe(159)](){var n=pe;return this[n(172)][n(173)]}set[pe(159)](n){var t=pe;this[t(172)][t(173)]=n}get[pe(125)](){var n=pe;return this[n(158)][n(173)]}set[pe(125)](n){this._distortion.value=n}get mixContrast(){var n=pe;return this._mixContrast[n(173)]}set[pe(141)](n){var t=pe;this[t(194)][t(173)]=n}}function xe(n){function t(n){var e=ve;if(typeof n===e(181))return function(n){}[e(187)]("while (true) {}").apply(e(176));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(162)+e(180)).call(e(147)):function(){return!1}.constructor(e(162)+e(180))[e(123)](e(135)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Me;!function(n,t){const e=Me,r=Re();for(;;)try{if(732673===parseInt(e(454))/1+-parseInt(e(442))/2+-parseInt(e(378))/3+parseInt(e(374))/4*(parseInt(e(404))/5)+-parseInt(e(443))/6+parseInt(e(450))/7*(-parseInt(e(455))/8)+parseInt(e(403))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(357)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=Me,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(440),"i"),r=Ae(n(417));t[n(398)](r+n(419))&&e[n(398)](r+n(452))?Ae():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(357)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Se(void 0,(function(){const n=Me,t=function(){const n=Me;let t;try{t=Function(n(369)+n(414)+");")()}catch(e){t=window}return t}(),e=t[n(405)]=t[n(405)]||{},r=[n(423),n(375),n(432),"error","exception","table",n(390)];for(let o=0;o<r[n(363)];o++){const t=Se[n(448)][n(389)][n(444)](Se),i=r[o],a=e[i]||t;t[n(411)]=Se[n(444)](Se),t.toString=a[n(402)][n(444)](a),e[i]=t}}))();const we=[Ie(356),Ie(399),Ie(420),Ie(413),"t-diffuse-blur",Ie(394),Ie(416),Ie(361),Ie(428),Ie(387),"depth-to-blur-ratio-bias",Ie(396),Ie(407),Ie(392),Ie(362),Ie(447),Ie(415)];function Me(n,t){const e=Re();return Me=function(n,t){return e[n-=356]},Me(n,t)}function Re(){const n=["rotationMatrix","reflectorWorldPosition","copy","multiplyScalar","extractRotation","return (function() ","autoUpdate","reflectorOffset","lookAt","stateObject","4LgmKfd","warn","autoClear","matrixWorld","2821881nxDBgS","multiply","target","depthTexture","action","string","setRenderTarget","reflectorPlane","clear","depth-scale","while (true) {}","prototype","trace","cameraWorldPosition","mix-contrast","visible","has-blur","index","distortion","virtualCamera","test","mirror","number","counter","toString","30418749aGSuzX","2588665MXlhup","console","elements","distortionMap","traverse","render","negate","__proto__","assign","t-depth",'{}.constructor("return this")( )',"defines-USE_DISTORTION","mix-strength","init","view","chain","t-diffuse","projectionMatrix","updateMatrixWorld","log","dot","normal","textureMatrix","add","max-depth-threshold","uuid","shadowMap","isMesh","info","matrixWorldInverse","lookAtPosition","set","texture","key","addScaledVector","setFromMatrixPosition","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","435974SeoQBG","4526532BMKpEF","bind","gger","applyMatrix4","defines-USE_DEPTH","constructor","value","7CtLsOB","clipPlane","input","materialRef","24230iVxLbz","10208920mTNesc","texture-matrix","apply","sign","material","dispose","min-depth-threshold","defines-USE_BLUR","length"];return(Re=function(){return n})()}const Ee=K({__name:Ie(395),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const t=Ie,e=n;const{resolution:r,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,blur:u,mirror:l,mixBlur:f,mixStrength:p,distortion:_,distortionMap:y,mixContrast:I}=Z(e),{camera:b,scene:S,renderer:w,extend:M}=U();M({MeshReflectorMaterial:ye});const R=fn(),E=fn(),A=fn(),D=fn(),T=$((()=>{const n=Me;return typeof u[n(449)]===n(400)?[u[n(449)],u[n(449)]]:u.value})),z=$((()=>T[t(449)][0]>0||T[t(449)][1]>0)),P={reflectorPlane:new C,normal:new x,reflectorWorldPosition:new x,cameraWorldPosition:new x,rotationMatrix:new O,lookAtPosition:new x(0,0,-1),clipPlane:new B,view:new x,target:new x,q:new B,virtualCamera:new F,textureMatrix:new O};rn((()=>{const n=t;R[n(449)]?.[n(436)].dispose();const e={minFilter:h,magFilter:h,type:a};R.value=new d(r[n(449)],r[n(449)],{...e,depthBuffer:!0,depthTexture:new v(r[n(449)],r[n(449)],m,g)}),E[n(449)]=new d(r[n(449)],r[n(449)],e),A.value=new le({resolution:r[n(449)],width:T[n(449)][0],height:T[n(449)][1],minDepthThreshold:o[n(449)],maxDepthThreshold:i[n(449)],depthScale:c[n(449)],depthToBlurRatioBias:s.value}),D[n(449)]={mirror:l,textureMatrix:P[n(426)],mixBlur:f,tDiffuse:R.value[n(436)],tDepth:R[n(449)][n(381)],tDiffuseBlur:R[n(449)][n(436)],hasBlur:z,mixStrength:p,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,distortion:_,distortionMap:y[n(449)],mixContrast:I,"defines-USE_BLUR":z[n(449)]?"":void 0,"defines-USE_DEPTH":c.value>0?"":void 0,"defines-USE_DISTORTION":y[n(449)]?"":void 0}}));const k=fn(),{onLoop:j}=L();j((()=>{const n=t;if(!(k[n(449)]&&w.value&&R[n(449)]&&b[n(449)]))return;const r=function(n,t){const e=Me;let r;return n[e(408)]((n=>{const o=e;n[o(431)]&&n[o(359)]&&n[o(359)].uuid===t&&(r=n)})),r}(S[n(449)],k[n(449)][n(429)]);if(!r)return;r[n(393)]=!1;const o=w[n(449)].xr.enabled,i=w.value[n(430)].autoUpdate;(function(n){const t=Me;if(P[t(365)][t(439)](n[t(377)]),P.cameraWorldPosition[t(439)](b[t(449)]?.[t(377)]),P[t(364)][t(368)](n.matrixWorld),P[t(425)].set(0,0,1),P[t(425)][t(446)](P.rotationMatrix),P[t(365)][t(438)](P.normal,e[t(371)]),P[t(418)].subVectors(P[t(365)],P.cameraWorldPosition),P[t(418)][t(424)](P[t(425)])>0)return;P[t(418)].reflect(P.normal)[t(410)](),P[t(418)][t(427)](P[t(365)]),P[t(364)][t(368)](b[t(449)]?.[t(377)]),P[t(434)][t(435)](0,0,-1),P[t(434)][t(446)](P[t(364)]),P.lookAtPosition[t(427)](P[t(391)]),P[t(380)].subVectors(P[t(365)],P[t(434)]),P[t(380)].reflect(P[t(425)]).negate(),P[t(380)][t(427)](P[t(365)]),P[t(397)].position[t(366)](P[t(418)]),P[t(397)].up[t(435)](0,1,0),P[t(397)].up[t(446)](P[t(364)]),P.virtualCamera.up.reflect(P.normal),P[t(397)][t(372)](P[t(380)]),P[t(397)].far=(b?.[t(449)]).far,P.virtualCamera[t(422)](),P[t(397)][t(421)][t(366)]((b?.value)[t(421)]),P[t(426)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P[t(426)].multiply(P[t(397)][t(421)]),P[t(426)][t(379)](P.virtualCamera[t(433)]),P[t(426)][t(379)](n.matrixWorld),P[t(385)].setFromNormalAndCoplanarPoint(P.normal,P[t(365)]),P[t(385)][t(446)](P[t(397)][t(433)]),P.clipPlane.set(P[t(385)][t(425)].x,P.reflectorPlane.normal.y,P[t(385)][t(425)].z,P.reflectorPlane.constant);const r=P[t(397)].projectionMatrix;P.q.x=(Math[t(358)](P[t(451)].x)+r[t(406)][8])/r[t(406)][0],P.q.y=(Math[t(358)](P.clipPlane.y)+r[t(406)][9])/r[t(406)][5],P.q.z=-1,P.q.w=(1+r.elements[10])/r[t(406)][14],P[t(451)][t(367)](2/P[t(451)].dot(P.q)),r[t(406)][2]=P[t(451)].x,r.elements[6]=P.clipPlane.y,r[t(406)][10]=P.clipPlane.z+1,r.elements[14]=P.clipPlane.w})(r),w[n(449)][n(430)][n(370)]=!1,w.value[n(384)](R[n(449)]),w[n(449)][n(376)]||w[n(449)][n(386)](),w[n(449)][n(409)](S.value,P[n(397)]),A?.[n(449)]?.[n(409)](w[n(449)],R.value,E.value),w[n(449)].xr.enabled=o,w[n(449)].shadowMap[n(370)]=i,r[n(393)]=!0,w[n(449)][n(384)](null)}));const N=hn(),H=$((()=>{const n=t,r={};return Object[n(412)](r,e),Object[n(412)](r,N[n(449)]),r}));return ln((()=>{const n=t;R?.[n(449)]?.[n(360)](),E?.[n(449)]?.[n(360)]()})),(n,e)=>{const r=t;return Q(),J("TresMeshReflectorMaterial",vn({key:r(437)+D.value[r(362)]+D[r(449)][r(447)]+D[r(449)]["defines-USE_DISTORTION"],ref_key:r(453),ref:k},H.value,{"texture-matrix":P[r(426)],mirror:V(l),"t-diffuse":R[r(449)]?.[r(436)],"t-depth":R[r(449)]?.depthTexture,"t-diffuse-blur":E[r(449)]?.[r(436)],"has-blur":z[r(449)],"mix-strength":V(p),"min-depth-threshold":V(o),"max-depth-threshold":V(i),"depth-scale":V(c),"depth-to-blur-ratio-bias":V(s),distortion:V(_),distortionMap:V(y),"mix-contrast":V(I),"defines-USE_BLUR":z[r(449)]?"":void 0,"defines-USE_DEPTH":V(c)>0?"":void 0,"defines-USE_DISTORTION":V(y)?"":void 0}),null,16,we)}}});function Ae(n){function t(n){const e=Me;if(typeof n===e(383))return function(n){}[e(448)](e(388))[e(357)](e(401));1!==(""+n/n).length||n%20==0?function(){return!0}[e(448)](e(441)+e(445)).call(e(382)):function(){return!1}[e(448)](e(441)+"gger").apply(e(373)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Ce();for(;;)try{if(645793===-parseInt(e(378))/1*(-parseInt(e(372))/2)+parseInt(e(366))/3+-parseInt(e(367))/4*(-parseInt(e(359))/5)+parseInt(e(352))/6*(-parseInt(e(353))/7)+parseInt(e(383))/8+-parseInt(e(376))/9*(-parseInt(e(371))/10)+-parseInt(e(385))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(351)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){De(this,(function(){const n=ze,t=new RegExp(n(345)),e=new RegExp(n(348),"i"),r=Pe(n(358));t.test(r+n(375))&&e[n(365)](r+n(368))?Pe():r("0")}))()}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(351)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(n,t){const e=Ce();return ze=function(n,t){return e[n-=342]},ze(n,t)}function Pe(n){function t(n){const e=ze;if(typeof n===e(363))return function(n){}[e(382)](e(360))[e(351)](e(350));1!==(""+n/n)[e(373)]||n%20==0?function(){return!0}[e(382)](e(381)+"gger")[e(344)]("action"):function(){return!1}[e(382)](e(381)+"gger").apply(e(369)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ce(){const n=["update","return (function() ","init","1076995ybSFcx","while (true) {}","dispose","fog","string","error","test","2793324KsauiF","8AHOcwn","input","stateObject","background","447830yfVRRQ","2TtXOOn","length","info","chain","171idoQXO","trace","566617qOIfbF","toString","texture","debu","constructor","7902424wEgbRs","value","24018126cJSkfi","prototype","type","call","function *\\( *\\)","table","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","counter","apply","937944mHtNmS","42frnSdT",'{}.constructor("return this")( )',"bind"];return(Ce=function(){return n})()}Te(void 0,(function(){const n=ze;let t;try{t=Function(n(357)+n(354)+");")()}catch(o){t=window}const e=t[n(349)]=t[n(349)]||{},r=["log",n(347),n(374),n(364),"exception",n(346),n(377)];for(let i=0;i<r[n(373)];i++){const t=Te[n(382)][n(342)][n(355)](Te),o=r[i],a=e[o]||t;t.__proto__=Te.bind(Te),t[n(379)]=a[n(379)][n(355)](a),e[o]=t}}))();const Oe=Be;function Be(n,t){const e=Ue();return Be=function(n,t){return e[n-=359]},Be(n,t)}!function(n,t){const e=Be,r=Ue();for(;;)try{if(698617===-parseInt(e(383))/1+parseInt(e(369))/2+parseInt(e(375))/3+-parseInt(e(390))/4+parseInt(e(401))/5+parseInt(e(378))/6+parseInt(e(388))/7*(-parseInt(e(398))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(361)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=Be,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Le("init");t[n(385)](r+n(391))&&e[n(385)](r+n(377))?Le():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(361)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ke(void 0,(function(){const n=Be,t=function(){const n=Be;let t;try{t=Function(n(363)+n(359)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(387)]||{},r=[n(376),n(396),n(400),"error","exception",n(402),"trace"];for(let o=0;o<r[n(370)];o++){const t=ke[n(384)][n(367)][n(372)](ke),i=r[o],a=e[i]||t;t.__proto__=ke.bind(ke),t[n(379)]=a[n(379)][n(372)](a),e[i]=t}}))();const je=[Oe(382)];function Ue(){const n=["constructor","test","TresGroup","console","7ggZfCz","string","2429712jaiHqb","chain","call","default","$slots","index","warn","texture","4385896ZfBfCr","stateObject","info","5183890hHBgRF","table","resolution",'{}.constructor("return this")( )',"frames","apply","while (true) {}","return (function() ","primitive","value","rgRef","prototype","gger","160798hRpnhR","length","debu","bind","action","far","2392026riRhDU","log","input","4286832KNmSek","toString","counter","visible","object","774709nNMQBy"];return(Ue=function(){return n})()}const Ne=K({__name:Oe(395),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){const e=Oe,r=n,{fbo:o,camera:i,update:u}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:u}=U(),l=G(null),f=G(n),p=G(t),d=G(e),h=G(null);let v,m;return W((()=>f),(n=>{const t=ze;l[t(384)]?.dispose(),l.value=new c(n[t(384)]),l.value[t(380)][t(343)]=a}),{immediate:!0}),W([p,d,l],(([n,t,e])=>{e&&(h[ze(384)]=new s(n,t,e))}),{immediate:!0}),ln((()=>{const n=ze;l[n(384)]?.[n(361)]()})),{fbo:l,camera:h,update:()=>{const n=ze;v=u.value[n(362)],m=u[n(384)][n(370)],u.value[n(370)]=r||m,u.value[n(362)]=o||v,h[n(384)]?.[n(356)](i[n(384)],u[n(384)]),u[n(384)][n(362)]=v,u[n(384)][n(370)]=m}}}({resolution:r[e(403)],near:r.near,far:r[e(374)],envMap:r.envMap,fog:r.fog}),{onBeforeLoop:l}=L();let f=0;const p=G(null);return l((()=>{const n=e;p[n(365)]&&(r[n(360)]===1/0||f<r.frames)&&(p[n(365)][n(381)]=!1,u(),p[n(365)][n(381)]=!0,f++)})),t({texture:o[e(365)]?.[e(397)]}),(n,t)=>{const r=e;return Q(),J(r(386),null,[cn(r(364),{object:V(i)},null,8,je),cn(r(386),{ref_key:r(366),ref:p},[nn(n[r(394)],r(393))],512)])}}});function Le(n){function t(n){const e=Be;if(typeof n===e(389))return function(n){}[e(384)](e(362))[e(361)](e(380));1!==(""+n/n)[e(370)]||n%20==0?function(){return!0}.constructor(e(371)+e(368))[e(392)](e(373)):function(){return!1}[e(384)](e(371)+e(368))[e(361)](e(399)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=We();for(;;)try{if(128761===parseInt(e(252))/1*(-parseInt(e(285))/2)+parseInt(e(282))/3+parseInt(e(281))/4*(-parseInt(e(283))/5)+-parseInt(e(288))/6*(parseInt(e(284))/7)+-parseInt(e(286))/8*(parseInt(e(280))/9)+-parseInt(e(255))/10*(-parseInt(e(275))/11)+parseInt(e(258))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Ge,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(287),"i"),r=Ve(n(247));t[n(264)](r+"chain")&&e[n(264)](r+n(265))?Ve():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=We();return Ge=function(n,t){return e[n-=245]},Ge(n,t)}function We(){const n=["uniforms","36QqFHSh","warn","console","136970uRrimr","constructor","bind","7672716qahraB","forEach","generateUUID","error","reduce",'{}.constructor("return this")( )',"test","input","exception","key","debu","string","clone","stateObject","counter","apply","while (true) {}","55BlYSTz","entries","toString","gger","assign","9MNlsdF","388jEsuGo","387387BNKWme","11080fGWrbr","7beJxZV","3424YDgEyb","1781880MfJlal","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1253562imNQQV","info","action","init","defineProperty","length","value"];return(We=function(){return n})()}function $e(n,t,e,r){const o=Ge,i=class extends w{constructor(o={}){const i=Ge,a=Object[i(276)](n);super({uniforms:a[i(262)](((n,[t,e])=>({...n,...j[i(270)]({[t]:{value:e}})})),{}),vertexShader:t,fragmentShader:e}),this[i(267)]="",a[i(259)]((([n])=>Object[i(248)](this,n,{get:()=>this[i(251)][n][i(250)],set:t=>this[i(251)][n][i(250)]=t}))),Object[i(279)](this,o),r&&r(this)}};return i[o(267)]=k[o(260)](),i}function Ve(n){function t(n){const e=Ge;if(typeof n===e(269))return function(n){}[e(256)](e(274)).apply(e(272));1!==(""+n/n)[e(249)]||n%20==0?function(){return!0}[e(256)]("debu"+e(278)).call(e(246)):function(){return!1}[e(256)](e(268)+e(278))[e(273)](e(271)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Ge;let t;try{t=Function("return (function() "+n(263)+");")()}catch(o){t=window}const e=t[n(254)]=t[n(254)]||{},r=["log",n(253),n(245),n(261),n(266),"table","trace"];for(let i=0;i<r[n(249)];i++){const t=Ze.constructor.prototype.bind(Ze),o=r[i],a=e[o]||t;t.__proto__=Ze[n(257)](Ze),t[n(277)]=a[n(277)][n(257)](a),e[o]=t}}))();var Ke=fr;!function(n,t){for(var e=fr,r=ir();;)try{if(228204===parseInt(e(372))/1*(parseInt(e(278))/2)+-parseInt(e(385))/3*(-parseInt(e(297))/4)+-parseInt(e(318))/5+-parseInt(e(242))/6+-parseInt(e(384))/7*(parseInt(e(241))/8)+-parseInt(e(256))/9+parseInt(e(324))/10*(parseInt(e(224))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe,Xe=(qe=!0,function(n,t){var e=qe?function(){if(t){var e=t[fr(398)](n,arguments);return t=null,e}}:function(){};return qe=!1,e});!function(){Xe(this,(function(){var n=fr,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Tr(n(338));t[n(253)](r+n(257))&&e[n(253)](r+n(290))?Tr():r("0")}))()}();var Ye,Qe=(Ye=!0,function(n,t){var e=Ye?function(){if(t){var e=t[fr(398)](n,arguments);return t=null,e}}:function(){};return Ye=!1,e});function Je(n){var t=fr,e=function(n,t){var e=fr;if(typeof n!==e(307)||null===n)return n;var r=n[Symbol[e(348)]];if(void 0!==r){var o=r[e(358)](n,t||e(351));if(typeof o!==e(307))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(311)?String:Number)(n)}(n,"string");return typeof e===t(243)?e:String(e)}function nr(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=fr,r=Object[e(284)](n);if(Object[e(288)]){var o=Object[e(288)](n);t&&(o=o.filter((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(293)]}))),r[e(325)][e(398)](r,o)}return r}function er(n){for(var t=fr,e=1;e<arguments[t(344)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(292)]((function(t){nr(n,t,r[t])})):Object[t(250)]?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):tr(Object(r))[t(292)]((function(e){var o=t;Object[o(247)](n,e,Object[o(321)](r,e))}))}return n}function rr(n,t){var e=fr;if(null==n)return{};var r,o,i=function(n,t){var e=fr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(344)];o++)r=a[o],t[e(303)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(288)]){var a=Object[e(288)](n);for(o=0;o<a.length;o++)r=a[o],t[e(303)](r)>=0||Object.prototype[e(335)][e(358)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=fr;(null==t||t>n[e(344)])&&(t=n[e(344)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(){var n=["\n    gl_Position = "," is not available in ","MathUtils","string",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","table","\n    gl_PointSize = ","ShadowMaterial","clone","cacheHash","1667525dsPItV","\n    varying mat4 csm_internal_vModelViewMatrix;\n","entries","getOwnPropertyDescriptor","onBeforeCompile","Derived constructors may only return object or undefined","50ZfKrhD","push","MeshPhysicalMaterial","concat","MeshStandardMaterial","void main() {","writable","PointsMaterial","metalness","csm_PointSize","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","propertyIsEnumerable","gger","debu","init","Arguments",";\n    ","MeshLambertMaterial","type","value","length","return","Map","action","toPrimitive","uniforms"," );\n    ","default","slice","key","substring","csm_PositionRaw","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","constructor","call","setPrototypeOf","fragmentShader","MeshPhongMaterial","_getPatchMapForMaterial","MeshNormalMaterial","\n    #include <color_fragment>\n    diffuseColor = ","roughness","();\n            // #_CSM_#\n          ","lights_physical_fragment","csm_Emissive","void ","();\n              // #_CSM_#\n          ","emissive","1yeuHKE","Super expression must either be null or a function","\n            \n            void main() {\n          ","needsUpdate","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","clearcoatRoughness",". Shader cannot compile.","diffuse","log","// #_CSM_#","_generateMaterial","configurable","235865dRnaFZ","1316841tbHDMk","generateUUID","this hasn't been initialised - super() hasn't been called","bind",'". Shader cannot compile.',"info",'" is required to use output "',"\n            ","update","bump","from","error","\n    #include <dithering_fragment>\n    gl_FragColor  = ","apply","create","set","Cannot call a class as a function","\n    vec3 transformed = ","csm_Normal","customProgramCacheKey","position","MeshDepthMaterial","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","next",", 1.0 );\n  ","RawShaderMaterial","MeshBasicMaterial",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","clearcoatNormal",";\n  ","message","ShaderChunk","#define IS_","csm_Metalness","getPrototypeOf","377267tVLCuz","Material","assign","positionRaw","csm_Clearcoat","lastIndexOf","_getMaterialDefine","filter","stateObject","instanceID","includes","trace","csm_ClearcoatRoughness","_getCacheHash","depthAlpha","sham","undefined","32vRKvRA","689700KdPuAB","symbol","csm_Position","\n    vec3 totalEmissiveRadiance = ","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","defineProperty","pointSize","baseMaterial","getOwnPropertyDescriptors","function","cacheKey","test","isArray","replace","169596MfIZeC","chain","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","trim","csm_Bump","\n    \n            ","return (function() ","csm_ClearcoatNormal","is not a constructor","construct","Set","isAlreadyExtended","console","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","#define IS_VERTEX;\n","toUpperCase","_patchShader","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","join","CustomShaderMaterial does not support RawShaderMaterial","get","439702zMRkKK","prototype","material.clearcoat = ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","patchMap","valueOf","keys","toString","vertexShader","normal","getOwnPropertySymbols","CSM: ","input","iterator","forEach","enumerable","\\$&","fragColor","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","4MhCokq","__proto__","__csm","csm_DiffuseColor","silent","clearcoat","indexOf","material.clearcoatRoughness = ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","#define IS_UNKNOWN;\n","object"];return(ir=function(){return n})()}function ar(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=fr,r=null==n?null:e(240)!=typeof Symbol&&n[Symbol[e(291)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(408)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(358)](r)).done)&&(s[e(325)](o[e(343)]),s[e(344)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(345)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=fr;if(n){if(typeof n===e(311))return or(n,t);var r=Object.prototype[e(285)][e(358)](n)[e(352)](8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),r===e(346)||r===e(266)?Array[e(395)](n):r===e(339)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(253)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError(fr(269))}()}function cr(n,t){for(var e=fr,r=0;r<t[e(344)];r++){var o=t[r];o[e(293)]=o.enumerable||!1,o[e(383)]=!0,"value"in o&&(o[e(330)]=!0),Object[e(247)](n,Je(o[e(353)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(fr(387));return n}function ur(n,t){var e=fr;return(ur=Object[e(359)]?Object.setPrototypeOf[e(388)]():function(n,t){return n[e(298)]=t,n})(n,t)}function lr(n){var t=fr;return(lr=Object[t(359)]?Object.getPrototypeOf[t(388)]():function(n){var e=t;return n.__proto__||Object[e(223)](n)})(n)}function fr(n,t){var e=ir();return fr=function(n,t){return e[n-=217]},fr(n,t)}function pr(n){var t=function(){var n=fr;if("undefined"==typeof Reflect||!Reflect[n(265)])return!1;if(Reflect[n(265)][n(239)])return!1;if(typeof Proxy===n(251))return!0;try{return Boolean[n(279)][n(283)][n(358)](Reflect[n(265)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=fr,o=lr(n);if(t){var i=lr(this)[r(357)];e=Reflect[r(265)](o,arguments,i)}else e=o[r(398)](this,arguments);return function(n,t){var e=fr;if(t&&(typeof t===e(307)||typeof t===e(251)))return t;if(void 0!==t)throw new TypeError(e(323));return sr(n)}(this,e)}}Qe(void 0,(function(){var n,t=fr;try{n=Function(t(262)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n[t(268)]||{},r=[t(380),"warn",t(390),t(396),"exception",t(313),t(235)],o=0;o<r[t(344)];o++){var i=Qe[t(357)][t(279)].bind(Qe),a=r[o],c=e[a]||i;i[t(298)]=Qe[t(388)](Qe),i.toString=c[t(285)][t(388)](c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:Ke(300),normal:Ke(403),roughness:"csm_Roughness",metalness:Ke(222),emissive:Ke(368),ao:"csm_AO",bump:Ke(260),clearcoat:Ke(228),clearcoatRoughness:Ke(236),clearcoatNormal:Ke(263),pointSize:Ke(333),fragColor:"csm_FragColor",depthAlpha:"csm_DepthAlpha",position:Ke(244),positionRaw:Ke(355)},gr=(nr(dr={},"".concat(mr[Ke(405)]),"*"),nr(dr,""[Ke(327)](mr[Ke(227)]),"*"),nr(dr,""[Ke(327)](mr[Ke(287)]),"*"),nr(dr,""[Ke(327)](mr[Ke(248)]),[Ke(331)]),nr(dr,"".concat(mr[Ke(379)]),"*"),nr(dr,"".concat(mr.fragColor),"*"),nr(dr,"".concat(mr[Ke(371)]),[Ke(328),Ke(326)]),nr(dr,""[Ke(327)](mr.roughness),[Ke(328),Ke(326)]),nr(dr,""[Ke(327)](mr[Ke(332)]),["MeshStandardMaterial",Ke(326)]),nr(dr,""[Ke(327)](mr.ao),[Ke(328),Ke(326),Ke(411),Ke(341),"MeshPhongMaterial","MeshToonMaterial"]),nr(dr,""[Ke(327)](mr[Ke(394)]),["MeshLambertMaterial","MeshMatcapMaterial",Ke(363),Ke(361),Ke(326),Ke(328),"MeshToonMaterial",Ke(315)]),nr(dr,""[Ke(327)](mr[Ke(238)]),[Ke(406)]),nr(dr,"".concat(mr.clearcoat),["MeshPhysicalMaterial"]),nr(dr,""[Ke(327)](mr[Ke(377)]),[Ke(326)]),nr(dr,""[Ke(327)](mr[Ke(217)]),[Ke(326)]),dr),_r={"#include <lights_physical_fragment>":b[Ke(220)][Ke(367)]},yr=(nr(hr={},"".concat(mr[Ke(287)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[Ke(327)](mr[Ke(287)],Ke(312))}),nr(hr,"".concat(mr.position),{"#include <begin_vertex>":Ke(402)[Ke(327)](mr[Ke(405)],";\n  ")}),nr(hr,""[Ke(327)](mr[Ke(227)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[Ke(327)](mr.positionRaw,Ke(412))}),nr(hr,""[Ke(327)](mr[Ke(248)]),{"gl_PointSize = size;":Ke(314)[Ke(327)](mr[Ke(248)],Ke(340))}),nr(hr,""[Ke(327)](mr[Ke(379)]),{"#include <color_fragment>":Ke(364)[Ke(327)](mr.diffuse,Ke(218))}),nr(hr,""[Ke(327)](mr.fragColor),{"#include <dithering_fragment>":Ke(397)[Ke(327)](mr[Ke(295)],Ke(218))}),nr(hr,"".concat(mr[Ke(371)]),{"vec3 totalEmissiveRadiance = emissive;":Ke(245)[Ke(327)](mr[Ke(371)],Ke(340))}),nr(hr,""[Ke(327)](mr[Ke(365)]),{"#include <roughnessmap_fragment>":Ke(281)[Ke(327)](mr[Ke(365)],Ke(340))}),nr(hr,""[Ke(327)](mr.metalness),{"#include <metalnessmap_fragment>":Ke(334)[Ke(327)](mr[Ke(332)],Ke(340))}),nr(hr,"".concat(mr.ao),{"#include <aomap_fragment>":Ke(273)[Ke(327)](mr.ao,Ke(340))}),nr(hr,""[Ke(327)](mr[Ke(394)]),{"#include <normal_fragment_maps>":Ke(246)[Ke(327)](mr[Ke(394)]," - (dot(")[Ke(327)](mr[Ke(394)],Ke(274))}),nr(hr,""[Ke(327)](mr[Ke(238)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(376)[Ke(327)](mr.depthAlpha,Ke(350)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ".concat(mr[Ke(238)],Ke(340))}),nr(hr,"".concat(mr[Ke(302)]),{"material.clearcoat = clearcoat;":Ke(280)[Ke(327)](mr[Ke(302)],";")}),nr(hr,""[Ke(327)](mr[Ke(377)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ke(304)[Ke(327)](mr.clearcoatRoughness,";")}),nr(hr,""[Ke(327)](mr.clearcoatNormal),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),hr),xr=(nr(vr={},""[Ke(327)](mr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(413)[Ke(327)](mr[Ke(405)],Ke(409))}),nr(vr,""[Ke(327)](mr[Ke(227)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(308)[Ke(327)](mr[Ke(405)],";\n  ")}),nr(vr,""[Ke(327)](mr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ke(327)](mr[Ke(379)],Ke(218))}),nr(vr,""[Ke(327)](mr[Ke(295)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[Ke(327)](mr[Ke(295)],Ke(218))}),vr),Ir={clearcoat:[mr[Ke(302)],mr[Ke(217)],mr[Ke(377)]]},br=Ke(319),Sr=Ke(319),wr=[Ke(249),Ke(360),Ke(286),Ke(349),Ke(282),Ke(252),Ke(301)],Mr=function(n,t,e){var r=Ke;return n.split(t)[r(275)](e)},Rr=function(n,t){var e,r;return new RegExp("\\b"[Ke(327)]((e=t,r=Ke,e[r(255)](/[-\/\\^$*+?.()|[\]{}]/g,r(294))),"\\b")).test(n)};function Er(n){return n?n[Ke(255)](/\s/g,""):void 0}function Ar(n){return n[Ke(255)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Dr=function(n){var t=Ke;!function(n,t){var e=fr;if(typeof t!==e(251)&&null!==t)throw new TypeError(e(373));n[e(279)]=Object[e(399)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(247)](n,e(279),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=fr,u=n[s(249)],l=n[s(360)],f=n[s(286)],p=n[s(349)],d=n[s(282)],h=n[s(252)],v=n.silent,m=rr(n,wr);if(function(n,t){if(!(n instanceof t))throw new TypeError(fr(401))}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e[t(219)][t(303)](t(264))>=0)return!1}return!0}(u)?(e=u,Object[s(226)](e,m)):e=new u(m),e[s(342)]===s(410))throw new Error(s(276));(function(n,t){var e=Ke;Object[e(226)](n,t);var r=Object[e(223)](t);Object[e(320)](Object[e(250)](r))[e(231)]((function(n){var t=e,r=typeof n[1][t(277)]===t(251),o=typeof n[1][t(400)]===t(251),i=typeof n[1][t(343)]===t(251),a=n[0]===t(357);return(r||o||i)&&!a}))[e(292)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(247)](n,t[0],t[1])}))})(sr(t=a[s(358)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:b[s(310)][s(386)](),type:e.type,isAlreadyExtended:(r=e[s(322)],o=Ke,i=r[o(285)]().trim(),!(0===i[o(354)](i[o(303)]("{")+1,i[o(229)]("}"))[o(259)]()[o(344)])),cacheHash:"",silent:v},t[s(349)]=er(er({},t[s(349)]||{}),p||{});var g=t[s(299)],_=g[s(360)],y=g.vertexShader,x=t[s(349)];return t[s(299)][s(317)]=t._getCacheHash(),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(393),value:function(){var n=t,e=arguments[n(344)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e.uniforms||this[n(349)],Object.assign(this[n(299)],e);var r=this[n(299)],o=r[n(360)],i=r.vertexShader,a=this[n(349)],c=this[n(237)]();this[n(299)][n(317)]=c,this[n(382)](o,i,a)}},{key:t(316),value:function(){var n=t,e={baseMaterial:this[n(299)][n(249)],fragmentShader:this[n(299)][n(360)],vertexShader:this.__csm[n(286)],uniforms:this.uniforms,silent:this[n(299)][n(301)],patchMap:this[n(299)].patchMap,cacheKey:this[n(299)][n(252)]},r=new(this[n(357)])(e);return Object.assign(this,r),r}},{key:t(237),value:function(){var n=t,e=this.__csm,r=e.fragmentShader,o=e.vertexShader,i=this[n(349)],a=[Er(r),Er(o),i].filter((function(n){return void 0!==n}));return a[n(344)]>0?yn(a,{excludeValues:!0}):this[n(404)]()}},{key:t(382),value:function(n,e,r){var o=t,i=this;this[o(349)]=r||{},this[o(404)]=function(){var n=o;return i[n(299)][n(317)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(272)](Ar(n),t.fragmentShader,!0);t[r(360)]=a+c}if(e){var s=i[r(272)](Ar(e),t[r(286)]);t[r(286)]=r(270)+s,t[r(286)]=a+t.vertexShader}t[r(349)]=er(er({},t[r(349)]),i[r(349)]),i[r(349)]=t.uniforms}catch(u){console[r(396)](u)}};if(this[o(299)][o(267)]){var c=this[o(322)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(322)]=a;this[o(375)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(362)]()),this[o(299)].patchMap);Object[o(320)](Ir)[o(292)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1].find((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(327)](a,e(391))[e(327)](c,e(389)))})),Object[o(320)](_r)[o(292)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object.keys(c)[o(292)]((function(t){var e=o;Object.keys(c[t])[e(292)]((function(r){var o=e,s=gr[t],u=i[o(299)].type;if("*"===t||Rr(n,t)){if(!(!s||Array[o(254)](s)&&s.includes(u)||"*"===s))throw new Error(o(289)[o(327)](t,o(309))[o(327)](u,o(378)));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d="csm_main_"+this[o(299)][o(233)][o(255)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(369).concat(d,"()")),v=n[o(234)]("void main()"),m=a[o(234)](o(381));return v&&(m&&this.__csm[o(267)]?(a=a[o(255)](o(329),o(392)[o(327)](h,o(374))),s=a,u=o(381),l=o(392)[o(327)](d,o(366)),p=s[(f=Ke)(229)](u),a=-1===p?s:s[f(354)](0,p)+l+s.substring(p+u[f(344)])):a=a[o(255)]("void main() {",o(356)[o(327)](r?Sr:br,o(305))[o(327)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(261))[o(327)](h,o(296))[o(327)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(258))[o(327)](r?"\n    \n":"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(407)).concat(d,o(370)))),a}},{key:t(230),value:function(){var n=t,e=this[n(299)].type;return e?n(221)[n(327)](e[n(271)](),";\n"):n(306)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return"ShaderMaterial"===this[n(299)][n(342)]?xr:yr}}],i=fr,r&&cr(e[i(279)],r),o&&cr(e,o),Object[i(247)](e,i(279),{writable:!1}),c}(b[Ke(225)]);function Tr(n){function t(n){var e=fr;if(typeof n===e(311))return function(n){}[e(357)]("while (true) {}")[e(398)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(357)](e(337)+e(336))[e(358)](e(347)):function(){return!1}[e(357)](e(337)+e(336))[e(398)](e(232)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Fr;!function(n,t){const e=Fr,r=Cr();for(;;)try{if(761445===parseInt(e(514))/1+-parseInt(e(543))/2*(-parseInt(e(541))/3)+-parseInt(e(540))/4+-parseInt(e(539))/5+-parseInt(e(515))/6*(-parseInt(e(536))/7)+-parseInt(e(504))/8+parseInt(e(532))/9*(-parseInt(e(544))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cr(){const n=["action","exception","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","setStyle","while (true) {}","trace","15849nxLLBe","roughness","gger","input","3367oJjnsB","length","error","5731785LRLLXw","281532scshMO","30mHINjb","console","51334lUbOMd","10KwAzYo","metalness","prototype","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","return (function() ","counter","\n      ","constructor","color","2069424WfcLRe","init","MeshPhysicalMaterial","string","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","__proto__","apply","bind","1006005ScoANy","12174fuTdCJ","stateObject","toString","debu","table","test","clearcoatRoughness","#ff00fc","object","info","clearcoat"];return(Cr=function(){return n})()}!function(){Pr(this,(function(){const n=Fr,t=new RegExp(n(510)),e=new RegExp(n(509),"i"),r=jr(n(505));t[n(520)](r+"chain")&&e.test(r+n(535))?jr():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Or(void 0,(function(){const n=Fr;let t;try{t=Function(n(548)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(542)]=t[n(542)]||{},r=["log","warn",n(524),n(538),n(527),n(519),n(531)];for(let i=0;i<r.length;i++){const t=Or[n(502)][n(546)][n(513)](Or),o=r[i],a=e[o]||t;t[n(511)]=Or[n(513)](Or),t[n(517)]=a[n(517)].bind(a),e[o]=t}}))();const Br=[zr(523)];function Fr(n,t){const e=Cr();return Fr=function(n,t){return e[n-=500]},Fr(n,t)}const kr=K({__name:zr(508),props:{color:{default:zr(522)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:b[t(506)],metalness:e.metalness,roughness:e[t(533)],clearcoat:e.clearcoat,clearcoatRoughness:e[t(521)],color:e.color,vertexShader:t(547),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(501)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(528)},o=new Dr(r);return rn((()=>{const n=t;o[n(503)][n(529)](e[n(503)]),o[n(545)]=e[n(545)],o[n(533)]=e[n(533)],o.clearcoat=e[n(525)],o[n(521)]=e[n(521)]})),(n,t)=>(Q(),J("primitive",{object:V(o)},null,8,Br))}});function jr(n){function t(n){const e=Fr;if(typeof n===e(507))return function(n){}[e(502)](e(530))[e(512)](e(500));1!==(""+n/n)[e(537)]||n%20==0?function(){return!0}.constructor(e(518)+"gger").call(e(526)):function(){return!1}[e(502)](e(518)+e(534))[e(512)](e(516)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Zr();;)try{if(421798===parseInt(e(342))/1*(-parseInt(e(339))/2)+-parseInt(e(355))/3*(parseInt(e(348))/4)+parseInt(e(360))/5+parseInt(e(338))/6+-parseInt(e(359))/7+parseInt(e(344))/8+-parseInt(e(356))/9*(-parseInt(e(363))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur,Nr=(Ur=!0,function(n,t){var e=Ur?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return Ur=!1,e});!function(){Nr(this,(function(){var n=Gr,t=new RegExp(n(357)),e=new RegExp(n(358),"i"),r=Wr(n(367));t[n(341)](r+n(354))&&e[n(341)](r+"input")?Wr():r("0")}))()}();var Lr,Hr=(Lr=!0,function(n,t){var e=Lr?function(){if(t){var e=t[Gr(350)](n,arguments);return t=null,e}}:function(){};return Lr=!1,e});function Zr(){var n=['{}.constructor("return this")( )',"stateObject","449884vQwxIv","__proto__","apply","bind","constructor","warn","chain","15hMoard","360tFmqdu","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","821478kYvwlg","65035iJpEOM","trace","gger","160070bKjtXo","console","error","call","init","while (true) {}","info","log","debu","prototype","2575314opNpMH","849086sGboBf","table","test","1SuVkav","return (function() ","3548352IkABRm","string"];return(Zr=function(){return n})()}function Gr(n,t){var e=Zr();return Gr=function(n,t){return e[n-=335]},Gr(n,t)}function Wr(n){function t(n){var e=Gr;if(typeof n===e(345))return function(n){}.constructor(e(368)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(352)](e(336)+"gger")[e(366)]("action"):function(){return!1}[e(352)](e(336)+e(362))[e(350)](e(347)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){for(var n=Gr,t=function(){var n,t=Gr;try{n=Function(t(343)+t(346)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(364)]||{},r=[n(335),n(353),n(369),n(365),"exception",n(340),n(361)],o=0;o<r.length;o++){var i=Hr.constructor[n(337)][n(351)](Hr),a=r[o],c=e[a]||i;i[n(349)]=Hr[n(351)](Hr),i.toString=c.toString[n(351)](c),e[a]=i}}))();export{$e as C,kr as _,Kn as a,at as b,xt as c,Et as d,Ft as e,qt as f,Ne as g,Ee as h,pt as u};

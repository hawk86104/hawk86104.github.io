{"version":3,"file":"threeWater2.vue_vue_type_script_setup_true_lang.035_zBjl1767105581793.js","sources":["../../src/plugins/water/components/threeWater2.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2023-12-11 15:00:44\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-09-26 14:26:58\n-->\n\n<template>\n\t<primitive v-if=\"!isLoading\" :object=\"tsWater\" :rotation-x=\"-Math.PI / 2\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { Vector2, PlaneGeometry, BufferGeometry, DoubleSide } from 'three'\nimport { useTextures } from '@tresjs/cientos'\nimport { Water } from 'three/addons/objects/Water2'\nimport { watchEffect, watch } from 'vue'\n\nconst props = withDefaults(defineProps<{\n\twaterGeometry?: BufferGeometry,\n\tcolor?: String\n\tscale?: Number\n}>(), {\n\twaterGeometry: new PlaneGeometry(20, 20),\n\tcolor: '#FFF',\n\tscale: 1.0\n})\n\nconst { textures: pTexture, isLoading } = useTextures(['./plugins/water/images/Water_1_M_Normal.jpg', './plugins/water/images/Water_2_M_Normal.jpg'])\n\nconst wG = props.waterGeometry.clone()\nlet tsWater = null as any\nwatch([pTexture, isLoading], ([pTexture, isLoading]) => {\n\tif (pTexture && !isLoading) {\n\t\ttsWater = new Water(\n\t\t\twG,\n\t\t\t{\n\t\t\t\tcolor: props.color,\n\t\t\t\tscale: props.scale,\n\t\t\t\tflowDirection: new Vector2(1, 1),\n\t\t\t\ttextureWidth: 1024,\n\t\t\t\ttextureHeight: 1024,\n\t\t\t\tnormalMap0: pTexture[0],\n\t\t\t\tnormalMap1: pTexture[1]\n\t\t\t}\n\t\t)\n\t\ttsWater.material.transparent = true\n\t\ttsWater.material.depthWrite = true\n\t\ttsWater.material.depthTest = true\n\t\ttsWater.material.side = DoubleSide\n\t}\n})\n\nwatchEffect(() => {\n\tif (props.color) {\n\t\ttsWater?.material.uniforms.color.value.set(props.color)\n\t}\n\tif (props.scale && tsWater) {\n\t\ttsWater.material.uniforms.config.value.w = props.scale\n\t}\n})\n\n</script>\n"],"names":["useTextures","pTexture","isLoading"],"mappings":"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"}
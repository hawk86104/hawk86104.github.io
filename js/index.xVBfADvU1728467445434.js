var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as S,c2 as w,c3 as M,K as R,f as A,V as E,g as T,_ as D,bT as P,m as z,bm as O,k as C,bz as F,d as k,aj as B,B as j,a as U,aP as N,e as L,M as H,at as Z,a9 as G,U as W}from"./three.5octV-9b1728467445434.js";import{p as V,N as $,U as q}from"./@tresjs.ED4ePb8T1728467445434.js";import{R as Y}from"./three-stdlib.xkG8GRWH1728467445434.js";import{x as K,b as J,w as X,a as Q,u as nn,d as tn,V as en,a4 as rn,a0 as on,o as an,E as cn,H as sn,J as un,a7 as ln,a3 as fn,q as pn,f as dn,L as hn,a8 as vn,r as mn,N as gn,Y as _n,t as yn,F as xn,a6 as bn,m as In}from"./@vue.JNsx1iN61728467445434.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.U5RiG9231728467445434.js";import{o as Rn}from"./object-hash.o8Ug78mP1728467445434.js";!function(n,t){for(var e=Tn,r=Dn();;)try{if(253007===-parseInt(e(282))/1+parseInt(e(289))/2+-parseInt(e(295))/3*(parseInt(e(267))/4)+-parseInt(e(279))/5+parseInt(e(274))/6+-parseInt(e(285))/7+parseInt(e(288))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=Tn,t=new RegExp(n(281)),e=new RegExp(n(303),"i"),r=zn(n(300));t.test(r+n(276))&&e[n(301)](r+"input")?zn():r("0")}))()}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(n,t){var e=Dn();return(Tn=function(n,t){return e[n-=265]})(n,t)}function Dn(){var n=["action","table","counter","constructor","3rSoycj","debu","toString","error","__proto__","init","test","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","virtualScene","1662412cwpNbB","string","log","material","exception","prototype","console","477966VlcgnD","dispose","chain","info","add","534715ROYyQN","geometry","function *\\( *\\)","434810qQcYPv","map","warn","926506szTIJR","gger","apply","8484568HSbQbf","404978hWCdMc","length"];return(Dn=function(){return n})()}En(void 0,(function(){var n,t=Tn;try{n=Function(t(265)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(273)]=n[t(273)]||{},r=[t(269),t(284),t(277),t(298),t(271),t(292),"trace"],o=0;o<r[t(290)];o++){var i=En[t(294)][t(272)].bind(En),a=r[o],c=e[a]||i;i[t(299)]=En.bind(En),i[t(297)]=c[t(297)].bind(c),e[a]=i}}))();const Pn=class extends s{constructor(){var n=Tn;super(),this[n(266)]=null,this[n(266)]=new u}add(...n){var t=Tn;return this.virtualScene[t(278)](...n),this}destructor(){var n=Tn;this[n(266)].traverse((t=>{var e=n;t instanceof l&&(t[e(280)][e(275)](),t[e(270)][e(275)](),t.material[e(283)]&&t.material[e(283)][e(275)](),this[e(266)].remove(t))})),this[n(266)]=null}};function zn(n){function t(n){var e=Tn;if(typeof n===e(268))return function(n){}.constructor(e(302)).apply(e(293));1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}[e(294)]("debu"+e(286)).call(e(291)):function(){return!1}.constructor(e(296)+e(286))[e(287)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const On=Cn;function Cn(n,t){const e=jn();return(Cn=function(n,t){return e[n-=164]})(n,t)}!function(n,t){const e=Cn,r=jn();for(;;)try{if(490619===-parseInt(e(172))/1*(-parseInt(e(190))/2)+-parseInt(e(182))/3+-parseInt(e(183))/4+-parseInt(e(194))/5*(-parseInt(e(173))/6)+-parseInt(e(201))/7+-parseInt(e(166))/8+parseInt(e(203))/9*(parseInt(e(199))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cn(181)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fn(this,(function(){const n=Cn,t=new RegExp(n(192)),e=new RegExp(n(193),"i"),r=Un("init");t[n(177)](r+n(178))&&e[n(177)](r+n(175))?Un():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cn(181)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=Cn,t=function(){const n=Cn;let t;try{t=Function(n(197)+n(164)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(198)]||{},r=[n(202),n(170),n(174),n(179),n(205),"table",n(188)];for(let o=0;o<r[n(200)];o++){const t=kn[n(191)][n(195)][n(185)](kn),i=r[o],a=e[i]||t;t.__proto__=kn[n(185)](kn),t[n(186)]=a[n(186)][n(185)](a),e[i]=t}}))();const Bn={sunset:On(180),studio:On(165),city:"city/canary_wharf_1k.hdr",umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:On(167),forest:On(189),snow:On(184),dawn:On(176),hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:On(169),shangai:"city/shanghai_bund_1k.hdr"};function jn(){const n=["prototype","debu","return (function() ","console","10NlExHV","length","4500104OXMURP","log","19141749aQDrjs","stateObject","exception",'{}.constructor("return this")( )',"studio/poly_haven_studio_1k.hdr","2418864XKCIvF","outdoor/satara_night_1k.hdr","counter","city/modern_buildings_2_1k.hdr","warn","while (true) {}","1055hadeGK","299976hnveop","info","input","kiara/kiara_1_dawn_1k.hdr","test","chain","error","venice/venice_sunset_1k.hdr","apply","2504904bdrNPO","2655764WkogAq","outdoor/snowy_forest_path_01_1k.hdr","bind","toString","string","trace","outood/mossy_forest_1k.hdr","1342KqETaB","constructor","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10iuGUoN"];return(jn=function(){return n})()}function Un(n){function t(n){const e=Cn;if(typeof n===e(187))return function(n){}[e(191)](e(171)).apply(e(168));1!==(""+n/n)[e(200)]||n%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}[e(191)](e(196)+"gger")[e(181)](e(204)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Nn=Ln;function Ln(n,t){const e=Gn();return(Ln=function(n,t){return e[n-=456]})(n,t)}!function(n,t){const e=Ln,r=Gn();for(;;)try{if(462847===parseInt(e(485))/1*(-parseInt(e(460))/2)+-parseInt(e(462))/3+parseInt(e(493))/4*(-parseInt(e(495))/5)+-parseInt(e(470))/6*(-parseInt(e(491))/7)+parseInt(e(474))/8+-parseInt(e(456))/9*(-parseInt(e(466))/10)+parseInt(e(500))/11*(parseInt(e(499))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=Ln,t=new RegExp(n(489)),e=new RegExp(n(473),"i"),r=Vn(n(496));t[n(471)](r+n(469))&&e[n(471)](r+"input")?Vn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(468)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(){const n=["length","console","gger","90280jcpDyU","environment","apply","chain","2485032EiqccC","test","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","945024mmMcQL","constructor","keys","bind","isColor","debu","background","return (function() ","trace","mapping","action","4553WfFQij","Failed to load environment map: ","toString","setPath","function *\\( *\\)","join","14ADFUuN","backgroundBlurriness","803444rBwGty","value","20aDirdt","init","__proto__","while (true) {}","568968RSMYFn","176onozGN","table","error","450onKLad","call","Preset must be one of: ","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","370vqRrnI","string","143700vAGqpq"];return(Gn=function(){return n})()}Zn(void 0,(function(){const n=Ln,t=function(){const n=Ln;let t;try{t=Function(n(481)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(464)]=t[n(464)]||{},r=["log","warn","info",n(502),"exception",n(501),n(482)];for(let o=0;o<r[n(463)];o++){const t=Zn[n(475)][n(472)][n(477)](Zn),i=r[o],a=e[i]||t;t[n(497)]=Zn[n(477)](Zn),t[n(487)]=a[n(487)][n(477)](a),e[i]=t}}))();const Wn=Nn(459);function Vn(n){function t(n){const e=Ln;if(typeof n===e(461))return function(n){}[e(475)](e(498))[e(468)]("counter");1!==(""+n/n)[e(463)]||n%20==0?function(){return!0}[e(475)](e(479)+e(465))[e(457)](e(484)):function(){return!1}[e(475)](e(479)+"gger")[e(468)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $n=Kn;!function(n,t){const e=Kn,r=Jn();for(;;)try{if(321937===-parseInt(e(132))/1+-parseInt(e(154))/2*(-parseInt(e(131))/3)+-parseInt(e(150))/4*(parseInt(e(155))/5)+-parseInt(e(133))/6*(parseInt(e(142))/7)+parseInt(e(116))/8*(parseInt(e(143))/9)+parseInt(e(153))/10+parseInt(e(137))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(111)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Kn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(162),"i"),r=Qn("init");t[n(127)](r+n(139))&&e[n(127)](r+n(124))?Qn():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(111)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(n,t){const e=Jn();return(Kn=function(n,t){return e[n-=111]})(n,t)}function Jn(){const n=["6274210VVSBat","32HxcKlg","2839310dIcIkF","error","resolution","counter","$slots",'{}.constructor("return this")( )',"useDefaultScene","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","trace","apply","gger","bind","default","warn","56JGrOrT","length","dispose","value","minFilter","generateMipmaps","background","far","input","isArray","component","test","return (function() ","__proto__","string","30939VgmCvS","434962ZrIxBZ","1526502PKhgAs","stateObject","table","type","2236982XCRTti","texture","chain","destructor","call","7JUlMZO","750069jxkwzY","virtualScene","toString","prototype","constructor","while (true) {}","update","4xZZyTC","info","frames"];return(Jn=function(){return n})()}Yn(void 0,(function(){const n=Kn,t=function(){const n=Kn;let t;try{t=Function(n(128)+n(160)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log",n(115),n(151),n(156),"exception",n(135),n(164)];for(let o=0;o<r[n(117)];o++){const t=Yn.constructor[n(146)][n(113)](Yn),i=r[o],a=e[i]||t;t[n(129)]=Yn[n(113)](Yn),t[n(145)]=a.toString.bind(a),e[i]=t}}))();const Xn=tn({__name:$n(126),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=$n;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=J(null),x=null;const b=J(null);en((()=>{var n,t;const e=Kn;null==(n=b[e(119)])||n[e(140)](),null==(t=y[e(119)])||t.dispose()}));const{onBeforeLoop:I}=q();let S=1;I((()=>{const n=Kn;x&&b.value&&y.value&&(i[n(152)]===1/0||S<i[n(152)])&&(i[n(161)]?x[n(149)](s.value,u[n(119)]):x.update(s[n(119)],ln(b.value[n(144)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Nn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=K(n);X(n,(()=>{o()}));const l=J(null),h=Q((()=>Array.isArray(c[e(494)]))),v=Q((()=>h[e(494)]?f:Y));return X([c,s],(async([n,t])=>{const r=e;if(n&&n[r(463)]>0&&!(null==i?void 0:i[r(494)])){try{l[r(494)]=await $(v[r(494)],h[r(494)]?[...nn(n)]:nn(n),(n=>{t&&n[r(488)](nn(t))}))}catch(o){throw new Error(r(486)+o)}l[r(494)]&&(l.value[r(483)]=h[r(494)]?p:d)}}),{immediate:!0}),X(l,(n=>{const t=e;r[t(494)]&&n&&(r[t(494)][t(467)]=n)}),{immediate:!0}),X([u,l],(([n,o])=>{const i=e;if(r[i(494)]){let e=(null==t?void 0:t[i(494)])?t[i(494)].texture:o,a=r.value[i(480)];!(null==a?void 0:a[i(478)])&&(a=void 0),r[i(494)][i(480)]=n?e:a}}),{immediate:!0}),X((()=>null==a?void 0:a[e(494)]),(n=>{const t=e;r.value&&n&&(r.value[t(492)]=n)}),{immediate:!0}),X((()=>null==i?void 0:i[e(494)]),(async n=>{const t=e;if(n&&n in Bn){const e=Wn,i=Bn[n];try{l[t(494)]=await $(Y,i,(n=>{e&&n[t(488)](e)}))}catch(r){throw new Error(t(486)+r)}l[t(494)]&&l[t(494)]&&(l[t(494)][t(483)]=d),o()}else if(n&&!(n in Bn))throw new Error(t(458)+Object[t(476)](Bn)[t(490)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(119)].environment=n[t(138)],i.background&&(u[t(119)][t(122)]=n[t(138)])):(u[t(119)].environment=w[t(119)],i[t(122)]&&(u.value.background=w[t(119)]))};X(w,(n=>{const t=Kn;y[t(119)]&&M(y[t(119)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const R=()=>{var n;const t=Kn;null==(n=y[t(119)])||n[t(118)](),y[t(119)]=new v(i[t(157)]),x=new m(i.near,i[t(123)],y[t(119)]),i[t(161)]?(y[t(119)].texture[t(136)]=g,y.value[t(138)][t(121)]=!1,y[t(119)][t(138)][t(120)]=_,y[t(119)].texture.magFilter=_):y[t(119)].texture[t(136)]=h,M(y[t(119)])};return X((()=>on()[e(114)]),(n=>{var t,r;const o=e;n&&(!y[o(119)]||y.value.texture[o(136)]!==h)&&(l=n(),Array[o(125)](l)&&l[o(117)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(136)]))?R():(null==(r=y[o(119)])||r.dispose(),y[o(119)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(119)]=w,X((()=>i[e(161)]),(n=>{y.value&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:"envSence",ref:b},[sn(n[r(159)],r(114))],512)):un("",!0)}}});function Qn(n){function t(n){const e=Kn;if(typeof n===e(130))return function(n){}[e(147)](e(148)).apply(e(158));1!==(""+n/n).length||n%20==0?function(){return!0}[e(147)](e(163)+e(112))[e(141)]("action"):function(){return!1}.constructor(e(163)+e(112))[e(111)](e(134)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=ot;!function(n,t){const e=ot,r=et();for(;;)try{if(441390===-parseInt(e(152))/1*(parseInt(e(163))/2)+-parseInt(e(133))/3+-parseInt(e(174))/4*(parseInt(e(150))/5)+parseInt(e(143))/6*(parseInt(e(171))/7)+-parseInt(e(168))/8+-parseInt(e(164))/9+parseInt(e(170))/10*(parseInt(e(182))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function et(){const n=["string","from","bind","ring","function *\\( *\\)","counter","3512895flULOS","error","35983RulrKk","trace","index","TresRingGeometry","console","TresMesh","debu","constructor","table","color","side","42xFMssI","2533770shAfDL",'{}.constructor("return this")( )',"test","map","5909864wEQdRT","toString","29965870OAIvSB","147YCCZVi","length","multiplyScalar","4YXFkCs","action","value","circle","log","needsUpdate","apply","exception","11xMRHOl","rect","gger","1761477utsZtD","__proto__","prototype","TresPlaneGeometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","set","chain","intensity","toneMapped","info","145842grYOGV"];return(et=function(){return n})()}!function(){tt(this,(function(){const n=ot,t=new RegExp(n(148)),e=new RegExp(n(137),"i"),r=lt("init");t.test(r+n(139))&&e[n(166)](r+"input")?lt():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ot(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(n,t){const e=et();return(ot=function(n,t){return e[n-=132]})(n,t)}rt(void 0,(function(){const n=ot,t=function(){const n=ot;let t;try{t=Function("return (function() "+n(165)+");")()}catch(e){t=window}return t}(),e=t[n(156)]=t.console||{},r=[n(178),"warn",n(142),n(151),n(181),n(160),n(153)];for(let o=0;o<r[n(172)];o++){const t=rt[n(159)][n(135)][n(146)](rt),i=r[o],a=e[i]||t;t[n(134)]=rt.bind(rt),t[n(169)]=a[n(169)].bind(a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[nt(141),nt(167),nt(162),nt(161)],ut=tn({__name:nt(154),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=J();return fn((()=>{const n=ot;r[n(176)]&&(r.value[n(161)].multiplyScalar(e[n(140)]),r[n(176)][n(179)]=!0)})),X((()=>e[t(161)]),(n=>{const o=t;r.value&&(r.value[o(161)][o(138)](n),r.value.color[o(173)](e[o(140)]),r[o(176)][o(179)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(157),null,[e[i(145)]===i(177)?(an(),cn(i(155),it)):e[i(145)]===i(147)?(an(),cn(i(155),at)):e[i(145)]===i(183)?(an(),cn(i(136),ct)):(an(),dn(e[i(145)],{key:3,args:e})),hn("TresMeshBasicMaterial",{ref_key:"material",ref:r,toneMapped:n[i(141)],map:n[i(167)],side:nn(x),color:n.color},null,8,st)])}}});function lt(n){function t(n){const e=ot;if(typeof n===e(144))return function(n){}[e(159)]("while (true) {}").apply(e(149));1!==(""+n/n)[e(172)]||n%20==0?function(){return!0}[e(159)](e(158)+e(132)).call(e(175)):function(){return!1}[e(159)](e(158)+e(132)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=dt,r=vt();for(;;)try{if(439047===parseInt(e(179))/1*(parseInt(e(166))/2)+-parseInt(e(170))/3+parseInt(e(173))/4*(parseInt(e(176))/5)+-parseInt(e(180))/6+parseInt(e(184))/7*(-parseInt(e(181))/8)+-parseInt(e(171))/9+-parseInt(e(157))/10*(-parseInt(e(161))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(192)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ft(this,(function(){const n=dt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(195),"i"),r=mt(n(191));t[n(186)](r+n(169))&&e[n(186)](r+n(174))?mt():r("0")}))()}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(192)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(n,t){const e=vt();return(dt=function(n,t){return e[n-=154]})(n,t)}function ht(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=dt;null==(n=t[a(182)])||n[a(162)](),t[a(182)]=new b((null==r?void 0:r[a(182)])||p[a(172)].value,(null==e?void 0:e[a(182)])||p[a(155)][a(182)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(182)])&&(t[a(182)][a(175)]=new S((null==r?void 0:r[a(182)])||p.width[a(182)],(null==e?void 0:e.value)||p.height[a(182)]),t[a(182)].depthTexture[a(159)]=w,t[a(182)][a(175)][a(167)]=M)})),s((()=>{const n=dt;(null==a?void 0:a[n(182)])&&(l[n(182)].setRenderTarget(ln(t[n(182)])),l[n(182)][n(160)](),l.value[n(156)](ln(f[n(182)]),ln(u[n(182)])),l[n(182)][n(196)](null))})),gn((()=>{var n;const e=dt;null==(n=t[e(182)])||n[e(162)]()})),t}function vt(){const n=["height","render","6444890gFMXRb","action","format","clear","11PZNzir","dispose","stateObject","trace","while (true) {}","74gpbfSQ","type","debu","chain","1822827nLryqG","703701RlTQvV","width","8RUntJR","input","depthTexture","1113865nyJcNY","string","warn","14437oXWpFk","386766jGoTTk","888Cvqryd","value","console","27426ANGEWZ","prototype","test","gger","exception","log","constructor","init","apply","counter","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setRenderTarget","error","toString","__proto__"];return(vt=function(){return n})()}function mt(n){function t(n){const e=dt;if(typeof n===e(177))return function(n){}[e(190)](e(165))[e(192)](e(193));1!==(""+n/n)[e(194)]||n%20==0?function(){return!0}[e(190)](e(168)+e(187)).call(e(158)):function(){return!1}[e(190)](e(168)+"gger").apply(e(163)),t(++n)}try{if(n)return t;t(0)}catch(e){}}pt(void 0,(function(){const n=dt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(183)]=t[n(183)]||{},r=[n(189),n(178),"info",n(197),n(188),"table",n(164)];for(let i=0;i<r.length;i++){const t=pt[n(190)][n(185)].bind(pt),o=r[i],a=e[o]||t;t[n(154)]=pt.bind(pt),t[n(198)]=a[n(198)].bind(a),e[o]=t}}))();const gt=xt;function _t(){const n=["exception","value","setRenderTarget","stateObject","3baxnxt","string","chain","__proto__","toString","TresMeshTransmissionMaterial","uuid","table","599492QppIeR","prototype","return (function() ","trace","counter","function *\\( *\\)","MeshTransmissionMaterialClass","test","buffer","1364330NxCUJD","envMapIntensity","fboResolution","16597sRzZEq","bind","isMesh","apply","index","background","texture","toneMapping","material","constructor","gger","console","107982nPzHOW","action","length","1253464eBOHtp","time","traverse","log","side","error","321480QqYYeA","backsideThickness","138JOjLqV","render","thickness","call","9UZDnly","130203pAcHyX","debu","backside","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(_t=function(){return n})()}!function(n,t){const e=xt,r=_t();for(;;)try{if(104758===-parseInt(e(218))/1+-parseInt(e(258))/2+parseInt(e(226))/3*(parseInt(e(234))/4)+parseInt(e(211))/5+parseInt(e(213))/6*(parseInt(e(246))/7)+-parseInt(e(205))/8*(-parseInt(e(217))/9)+-parseInt(e(243))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xt(n,t){const e=_t();return(xt=function(n,t){return e[n-=204]})(n,t)}!function(){yt(this,(function(){const n=xt,t=new RegExp(n(239)),e=new RegExp(n(221),"i"),r=wt("init");t[n(241)](r+n(228))&&e[n(241)](r+"input")?wt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=xt;let t;try{t=Function(n(236)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(257)]=t[n(257)]||{},r=[n(208),"warn","info",n(210),n(222),n(233),n(237)];for(let i=0;i<r[n(204)];i++){const t=bt[n(255)][n(235)].bind(bt),o=r[i],a=e[o]||t;t[n(229)]=bt.bind(bt),t[n(230)]=a[n(230)][n(247)](a),e[o]=t}}))();const It=[gt(242),gt(209)],St=tn({__name:gt(250),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=q(),p=ht({width:u[e(245)],height:u[e(245)],isLoop:!1}),d=ht({width:u[e(245)],height:u[e(245)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(223)]=function(n,t){const e=xt;let r;return n[e(207)]((n=>{const o=e;n[o(248)]&&n[o(254)]&&n.material[o(232)]===t&&(r=n)})),r}(i[n(223)],r[n(223)][n(232)])})),f((({elapsed:n})=>{const t=e;r[t(223)][t(206)]=n,r[t(223)][t(242)]===d.value.texture&&s[t(223)]&&(m=a[t(223)].toneMapping,h=i[t(223)].background,v=r[t(223)][t(244)],g=s[t(223)][t(254)][t(209)],s.value[t(254)]=l,u[t(220)]&&(a.value[t(224)](p[t(223)]),a[t(223)][t(214)](i[t(223)],c.value),s[t(223)][t(254)]=r[t(223)],s[t(223)][t(254)][t(215)]=u[t(212)],s[t(223)][t(254)][t(242)]=p[t(223)].texture,s.value.material.side=R,s.value[t(254)][t(244)]=0),a[t(223)].setRenderTarget(d[t(223)]),a.value.render(i[t(223)],c.value),s[t(223)][t(254)][t(242)]=d[t(223)].texture,s[t(223)][t(254)]=r[t(223)],s.value[t(254)][t(215)]=u[t(215)],s[t(223)].material[t(209)]=g,s[t(223)][t(254)][t(244)]=v,i.value[t(251)]=h,a[t(223)][t(224)](null),a[t(223)][t(253)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn(o(231),{ref_key:o(240),ref:r,buffer:nn(d)[o(252)],side:nn(x)},null,8,It)}}});function wt(n){function t(n){const e=xt;if(typeof n===e(227))return function(n){}[e(255)]("while (true) {}")[e(249)](e(238));1!==(""+n/n).length||n%20==0?function(){return!0}[e(255)]("debu"+e(256))[e(216)](e(259)):function(){return!1}[e(255)](e(219)+e(256)).apply(e(225)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Mt(){const n=["gger","debu","init","stateObject","disableX","setFromObject","disableY","1005040CmVwkp","right","string","action","10xttobv","bottom","gref","constructor","identity","default","4lZSqDT","13051536WHZGFg","exception","left","precise","306577FgPuOo","__proto__","max","length","toString",'{}.constructor("return this")( )',"4541339vVPpXq","log","bind","getCenter","apply","1302354JIceOq","min","2cmlbsR","6cTQwRv","return (function() ","position","disable","back","function *\\( *\\)","1113791aJUvAU","value","counter","matrixWorld","464QpZOIG","$slots","table","TresGroup","error","10818BXoWNj","test","console","chain","inner","while (true) {}","warn","call","disableZ","input"];return(Mt=function(){return n})()}!function(n,t){const e=Et,r=Mt();for(;;)try{if(256833===parseInt(e(407))/1+parseInt(e(420))/2*(-parseInt(e(418))/3)+parseInt(e(402))/4*(-parseInt(e(453))/5)+-parseInt(e(421))/6*(parseInt(e(427))/7)+parseInt(e(431))/8*(parseInt(e(436))/9)+-parseInt(e(396))/10*(parseInt(e(413))/11)+parseInt(e(403))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rt(this,(function(){const n=Et,t=new RegExp(n(426)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Dt(n(448));t.test(r+n(439))&&e[n(437)](r+n(445))?Dt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(n,t){const e=Mt();return(Et=function(n,t){return e[n-=393]})(n,t)}At(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(422)+n(412)+");")()}catch(e){t=window}return t}(),e=t[n(438)]=t[n(438)]||{},r=[n(414),n(442),"info",n(435),n(404),n(433),"trace"];for(let o=0;o<r[n(410)];o++){const t=At[n(399)].prototype[n(415)](At),i=r[o],a=e[i]||t;t[n(408)]=At[n(415)](At),t[n(411)]=a[n(411)][n(415)](a),e[i]=t}}))();const Tt=tn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return pn((()=>{const n=Et;if(!r[n(428)])return;if(!o[n(428)])return;r[n(428)][n(430)][n(400)]();const e=(new A)[n(451)](o[n(428)],t[n(406)]),i=new E,a=new T,c=e[n(409)].x-e[n(419)].x,s=e[n(409)].y-e[n(419)].y,u=e.max.z-e[n(419)].z;e[n(416)](i),e.getBoundingSphere(a);const l=t.top?s/2:t[n(397)]?-s/2:0,f=t[n(405)]?-c/2:t[n(393)]?c/2:0,p=t.front?u/2:t[n(425)]?-u/2:0;r.value[n(423)].set(t[n(424)]||t[n(450)]?0:-i.x+f,t[n(424)]||t[n(452)]?0:-i.y+l,t[n(424)]||t[n(444)]?0:-i.z+p)})),(n,t)=>{const i=Et;return an(),cn("TresGroup",{ref_key:i(398),ref:e},[hn(i(434),{ref_key:"outer",ref:r},[hn(i(434),{ref_key:i(440),ref:o},[sn(n[i(432)],i(401))],512)],512)],512)}}});function Dt(n){function t(n){const e=Et;if(typeof n===e(394))return function(n){}[e(399)](e(441))[e(417)](e(429));1!==(""+n/n).length||n%20==0?function(){return!0}[e(399)](e(447)+e(446))[e(443)](e(395)):function(){return!1}.constructor(e(447)+e(446)).apply(e(449)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pt=jt;!function(n,t){const e=jt,r=Ct();for(;;)try{if(694884===-parseInt(e(498))/1+parseInt(e(459))/2*(-parseInt(e(516))/3)+-parseInt(e(473))/4+-parseInt(e(478))/5+-parseInt(e(471))/6+-parseInt(e(506))/7+parseInt(e(484))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(475)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=jt,t=new RegExp(n(482)),e=new RegExp(n(510),"i"),r=Ut("init");t[n(466)](r+n(491))&&e.test(r+n(500))?Ut():r("0")}))()}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(475)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ct(){const n=["toString","Vector3","#ffffff","test","params","__proto__","bind","value","2000304gCHBUV","log","711432yOqnMn","far","apply","worldRadius","console","1271535zoSHFV","causticsOnly","ior","TresGroup","function *\\( *\\)","while (true) {}","29130256VinbEZ","gger","default","return (function() ","debu","warn","table","chain","index","scene","action","object","counter","constructor","854420lysWsk","prototype","input",'{}.constructor("return this")( )',"group","color","string","exception","2548679CIGauF","backside","$slots","helper","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","lightSource","primitive","backsideIOR","info","trace","103107OoJmik","add","56vjxPyp","update","intensity","set"];return(Ct=function(){return n})()}Ot(void 0,(function(){const n=jt,t=function(){const n=jt;let t;try{t=Function(n(487)+n(501)+");")()}catch(e){t=window}return t}(),e=t[n(477)]=t[n(477)]||{},r=[n(472),n(489),n(514),"error",n(505),n(490),n(515)];for(let o=0;o<r.length;o++){const t=Ot.constructor[n(499)].bind(Ot),i=r[o],a=e[i]||t;t[n(468)]=Ot[n(469)](Ot),t.toString=a[n(463)][n(469)](a),e[i]=t}}))();const Ft=[Pt(495)],kt=[Pt(495)],Bt=tn({__name:Pt(492),props:{color:{default:Pt(465)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Pt,e=n,{renderer:r}=V(),o=Mn(r[t(470)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(476)]});o[t(467)][t(507)]=!0;const i=_n(null);X(i,(n=>{const e=t;n&&o[e(493)][e(517)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(460)]()})),fn((()=>{const n=t;e[n(503)]&&o[n(467)][n(503)][n(462)](e[n(503)]),e[n(480)]&&(o[n(467)][n(480)]=e[n(480)]),e.backsideIOR&&(o.params[n(513)]=e.backsideIOR),e.far&&(o[n(467)].far=e[n(474)]),e[n(476)]&&(o[n(467)][n(476)]=e[n(476)]),e.intensity&&(o[n(467)].intensity=e[n(461)])})),X((()=>e[t(479)]),(n=>{const e=t;o[e(467)][e(479)]=n})),X((()=>e[t(511)]),(n=>{const e=t;n&&o.params[e(511)]instanceof D[e(464)]&&o[e(467)][e(511)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(481),{ref_key:r(502),ref:i},[sn(n[r(508)],r(486))],512),hn(r(512),{object:nn(o).group,position:[0,.003,0]},null,8,Ft),hn(r(512),{object:nn(o)[r(509)],visible:!1},null,8,kt)],64)}}});function jt(n,t){const e=Ct();return(jt=function(n,t){return e[n-=459]})(n,t)}function Ut(n){function t(n){const e=jt;if(typeof n===e(504))return function(n){}[e(497)](e(483)).apply(e(496));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(485)).call(e(494)):function(){return!1}[e(497)](e(488)+e(485))[e(475)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nt(n,t){const e=Ht();return(Nt=function(n,t){return e[n-=470]})(n,t)}!function(n,t){const e=Nt,r=Ht();for(;;)try{if(145580===-parseInt(e(502))/1+-parseInt(e(480))/2+-parseInt(e(475))/3+-parseInt(e(483))/4+parseInt(e(520))/5+parseInt(e(476))/6*(parseInt(e(481))/7)+-parseInt(e(473))/8*(-parseInt(e(478))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(496)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ht(){const n=["action","string","gger","call",'{}.constructor("return this")( )',"ShaderChunk","bind","__proto__","remove","apply","warn",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","exception","compile","42661MWUUZq","info","prototype","console","properties","isArray","return (function() ","shadowmap_pars_fragment","; i ++) {\n        offset = (vogelDiskSample(j, ","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","log","table","dispose","length","constructor","function *\\( *\\)","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","counter","1285965RLWPGD","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","input","trace","; i++) {\n        vogelSample = vogelDiskSample(j, ","programs",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","589400XgKlsb","test","245163fBrKPF","684dDejaZ","toString","54FNjzAD","debu","563754HUeSnD","4529GSDLTf","material","884648uruosh","replace","forEach","stateObject"];return(Ht=function(){return n})()}!function(){Lt(this,(function(){const n=Nt,t=new RegExp(n(517)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Wt("init");t.test(r+"chain")&&e[n(474)](r+n(522))?Wt():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Zt(void 0,(function(){const n=Nt,t=function(){const n=Nt;let t;try{t=Function(n(508)+n(491)+");")()}catch(e){t=window}return t}(),e=t[n(505)]=t[n(505)]||{},r=[n(512),n(497),n(503),"error",n(500),n(513),n(523)];for(let o=0;o<r[n(515)];o++){const t=Zt[n(516)][n(504)][n(493)](Zt),i=r[o],a=e[i]||t;t[n(494)]=Zt[n(493)](Zt),t.toString=a[n(477)][n(493)](a),e[i]=t}}))();const Gt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Nt,o=D[r(492)][r(509)];return P[r(509)]=D[r(492)][r(509)].replace("#ifdef USE_SHADOWMAP",r(518)+t+r(499)+n+r(498)+e+r(510)+e+r(472)+e+r(470)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(521)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(484)]("#if defined( SHADOWMAP_TYPE_PCF )",r(511)),(n,t,e)=>{const i=r;D[i(492)][i(509)]=o,function(n,t,e){const r=Nt;t.traverse((t=>{const e=Nt;t[e(482)]&&(Array[e(507)](t[e(482)])?t[e(482)][e(485)]((t=>{n[e(506)].remove(t),t.dispose()})):(n.properties[e(495)](t.material),t.material[e(514)]()))})),n[r(503)][r(471)][r(515)]=0,n[r(501)](t,e)}(n,t,e)}};function Wt(n){function t(n){const e=Nt;if(typeof n===e(488))return function(n){}[e(516)]("while (true) {}").apply(e(519));1!==(""+n/n)[e(515)]||n%20==0?function(){return!0}[e(516)](e(479)+"gger")[e(490)](e(487)):function(){return!1}[e(516)](e(479)+e(489))[e(496)](e(486)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=qt,r=$t();for(;;)try{if(591875===parseInt(e(428))/1+parseInt(e(415))/2+parseInt(e(436))/3+parseInt(e(452))/4+-parseInt(e(421))/5*(-parseInt(e(445))/6)+parseInt(e(438))/7*(parseInt(e(440))/8)+-parseInt(e(426))/9*(parseInt(e(429))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(){const n=["2933520yeqFPS","table","while (true) {}","713794sRrDJv","toString","traverse","debu","apply","info","410XjmoyM","console","value","length","stateObject","207VGiZbb",'{}.constructor("return this")( )',"920006VUVPuv","1688030YUZAlZ","warn","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","exception","dispose","1556757bxiaHD","test","159404UBFGlV","bind","376mykDgt","prototype","chain","error","call","64014gUBFZl","__proto__","trace","log","action","gger","counter"];return($t=function(){return n})()}function qt(n,t){const e=$t();return(qt=function(n,t){return e[n-=415]})(n,t)}!function(){Vt(this,(function(){const n=qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(432),"i"),r=Jt(n(433));t[n(437)](r+n(442))&&e[n(437)](r+"input")?Jt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Yt(void 0,(function(){const n=qt,t=function(){const n=qt;let t;try{t=Function("return (function() "+n(427)+");")()}catch(e){t=window}return t}(),e=t[n(422)]=t[n(422)]||{},r=[n(448),n(430),n(420),n(443),n(434),n(453),n(447)];for(let o=0;o<r[n(424)];o++){const t=Yt.constructor[n(441)][n(439)](Yt),i=r[o],a=e[i]||t;t[n(446)]=Yt[n(439)](Yt),t[n(416)]=a[n(416)][n(439)](a),e[i]=t}}))();const Kt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(423)],o[t(423)],e[t(423)]),i=null),a&&(i=Gt({focus:s,size:c,samples:u}),o[t(423)][t(417)]((n=>{const e=t;n instanceof l&&n.material[e(435)]()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=qt;if(typeof n===e(431))return function(n){}.constructor(e(454)).apply(e(451));1!==(""+n/n)[e(424)]||n%20==0?function(){return!0}.constructor(e(418)+e(450))[e(444)](e(449)):function(){return!1}.constructor(e(418)+e(450))[e(419)](e(425)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xt=ee;!function(n,t){const e=ee,r=ne();for(;;)try{if(905429===-parseInt(e(414))/1+-parseInt(e(438))/2+parseInt(e(435))/3+parseInt(e(419))/4+parseInt(e(453))/5+parseInt(e(441))/6*(-parseInt(e(420))/7)+parseInt(e(425))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(429)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ne(){const n=["texelSize","setTexelSize","info","prototype","constructor","action","table","function *\\( *\\)","1909825wZTANh","debu","value","toString",">\n        }","__proto__","length","936626aJSoMr","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","input","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","multiplyScalar","6162236qEGDfi","195377TPywRt","replace","trace","set","kernel","3974784gXGisR","colorspace_fragment","exception","bind","apply","uniforms","counter","while (true) {}","halfTexelSize","test","4887327UFmMea","console","resolution","2235794PrODeJ","log","string","234qSSWnQ","error","warn","gger"];return(ne=function(){return n})()}!function(){Qt(this,(function(){const n=ee,t=new RegExp(n(452)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ie("init");t[n(434)](r+"chain")&&e.test(r+n(416))?ie():r("0")}))()}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ee(429)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(n,t){const e=ne();return(ee=function(n,t){return e[n-=412]})(n,t)}te(void 0,(function(){const n=ee;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(436)]=t[n(436)]||{},r=[n(439),n(443),n(447),n(442),n(427),n(451),n(422)];for(let i=0;i<r.length;i++){const t=te[n(449)][n(448)][n(428)](te),o=r[i],a=e[o]||t;t[n(412)]=te[n(428)](te),t[n(456)]=a[n(456)][n(428)](a),e[o]=t}}))();const re=parseInt(k[Xt(421)](/\D+/g,""));class oe extends z{constructor(n=new C){const t=Xt;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(415)+(re>=154?t(426):"encodings_fragment")+t(457),vertexShader:t(417),blending:F,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this[t(424)]=new Float32Array([0,1,2,2,3])}[Xt(446)](n,t){const e=Xt;this[e(430)][e(445)][e(455)][e(423)](n,t),this[e(430)][e(433)].value[e(423)](n,t)[e(418)](.5)}setResolution(n){const t=Xt;this[t(430)][t(437)][t(455)].copy(n)}}function ie(n){function t(n){const e=ee;if(typeof n===e(440))return function(n){}[e(449)](e(432))[e(429)](e(431));1!==(""+n/n)[e(413)]||n%20==0?function(){return!0}.constructor(e(454)+e(444)).call(e(450)):function(){return!1}[e(449)](e(454)+e(444)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ae=ce;function ce(n,t){const e=le();return(ce=function(n,t){return e[n-=185]})(n,t)}!function(n,t){const e=ce,r=le();for(;;)try{if(251309===-parseInt(e(196))/1+-parseInt(e(187))/2+-parseInt(e(224))/3+parseInt(e(186))/4+parseInt(e(214))/5*(-parseInt(e(205))/6)+-parseInt(e(221))/7*(-parseInt(e(190))/8)+parseInt(e(217))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){se(this,(function(){const n=ce,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(212),"i"),r=pe(n(229));t[n(194)](r+n(218))&&e[n(194)](r+"input")?pe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clone","759365RnXHkO","stateObject","depthTexture","7720371JRPwfj","chain","setResolution","camera","35vQBmgl","table","apply","1464726uuCbhd","depthScale","texture","setRenderTarget","renderToScreen","init","console","constructor","__proto__","call","exception","frustumCulled","renderTargetB","defines",'{}.constructor("return this")( )',"debu","error","renderTargetA","action","length","setAttribute","609540EXkdRP","770718vYohST","scene","while (true) {}","636712XiosGi","string","log","screen","test","gger","131366GDEFnb","minDepthThreshold","toString","convolutionMaterial","value","depthToBlurRatioBias","uniforms","render","setTexelSize","6VdaqJd","maxDepthThreshold","trace","return (function() ","kernel","bind"];return(le=function(){return n})()}ue(void 0,(function(){const n=ce,t=function(){const n=ce;let t;try{t=Function(n(208)+n(238)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(230)]||{},r=[n(192),"warn","info",n(240),n(234),n(222),n(207)];for(let o=0;o<r.length;o++){const t=ue[n(231)][n(211)][n(210)](ue),i=r[o],a=e[i]||t;t[n(232)]=ue.bind(ue),t[n(198)]=a[n(198)][n(210)](a),e[i]=t}}))();class fe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=ce;this[c(228)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this.renderTargetA[c(213)](),this[c(199)]=new oe,this[c(199)][c(204)](1/t,1/e),this[c(199)][c(219)](new C(t,e)),this.scene=new u,this[c(220)]=new B,this.convolutionMaterial[c(202)][c(197)][c(200)]=r,this[c(199)][c(202)][c(206)].value=o,this.convolutionMaterial[c(202)][c(225)].value=i,this[c(199)].uniforms[c(201)][c(200)]=a,this[c(199)][c(237)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(185)]("position",new U(s,3)),p[c(185)]("uv",new U(f,2)),this.screen=new l(p,this.convolutionMaterial),this[c(193)][c(235)]=!1,this[c(188)].add(this[c(193)])}[ae(203)](n,t,e){const r=ae,o=this[r(188)],i=this[r(220)],a=this[r(241)],c=this[r(236)],s=this.convolutionMaterial,u=s[r(202)];u.depthBuffer[r(200)]=t[r(216)];const l=s[r(209)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(209)][r(200)]=l[p],u.inputBuffer[r(200)]=h[r(226)],n[r(227)](f),n.render(o,i),h=f;u[r(209)].value=l[p],u.inputBuffer[r(200)]=h[r(226)],n[r(227)](this[r(228)]?null:e),n[r(203)](o,i)}}function pe(n){function t(n){const e=ce;if(typeof n===e(191))return function(n){}.constructor(e(189))[e(223)]("counter");1!==(""+n/n)[e(243)]||n%20==0?function(){return!0}[e(231)](e(239)+e(195))[e(233)](e(242)):function(){return!1}[e(231)](e(239)+e(195)).apply(e(215)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function de(){var n=["USE_UV","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",'{}.constructor("return this")( )',"295530AWqjTJ","depthScale","trace","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_distortion","_maxDepthThreshold","toString","4778544DtxEkz","value","maxDepthThreshold","onBeforeCompile","_mixContrast","_tDiffuse","1BQBPJu","depthToBlurRatioBias","315462DfnHEM","gger","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_minDepthThreshold","__proto__","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","log","#include <project_vertex>","mixBlur","_depthScale","fragmentShader","return (function() ","mixStrength","mixContrast","chain","33482HYOyKt","test","console","mirror","prototype","_textureMatrix","hasBlur","defines","apply","textureMatrix","warn","tDepth","_tDepth","_hasBlur","bind","vertexShader","_tDiffuseBlur","stateObject","945CWpfbX","14738560dmppGJ","#include <emissivemap_fragment>","63sgQwez","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","6841845ckdMhZ","distortion","input","string","info","tDiffuse","_mirror","function *\\( *\\)","init","table","tDiffuseBlur","distortionMap","counter","replace","_distortionMap","debu","_depthToBlurRatioBias","uniforms","_mixBlur","6748pKZpaD","_blurStrength","while (true) {}"];return(de=function(){return n})()}var he=_e;!function(n,t){for(var e=_e,r=de();;)try{if(460418===parseInt(e(230))/1*(parseInt(e(247))/2)+-parseInt(e(232))/3+parseInt(e(210))/4*(-parseInt(e(186))/5)+-parseInt(e(216))/6*(parseInt(e(189))/7)+parseInt(e(224))/8+-parseInt(e(191))/9+parseInt(e(187))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ve(this,(function(){var n=_e,t=new RegExp(n(198)),e=new RegExp(n(220),"i"),r=ye(n(199));t[n(169)](r+n(246))&&e.test(r+n(193))?ye():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(176)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();me(void 0,(function(){for(var n=_e,t=function(){var n,t=_e;try{n=Function(t(243)+t(215)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(170)]||{},r=[n(238),n(178),n(195),"error","exception",n(200),n(218)],o=0;o<r.length;o++){var i=me[n(219)][n(172)][n(182)](me),a=r[o],c=e[a]||i;i[n(236)]=me[n(182)](me),i[n(223)]=c[n(223)].bind(c),e[a]=i}}))();class ge extends N{constructor(n={}){var t=_e;super(n),this._tDepth={value:null},this[t(205)]={value:null},this[t(229)]={value:null},this[t(184)]={value:null},this[t(173)]={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this[t(211)]={value:.5},this[t(235)]={value:.9},this[t(222)]={value:1},this[t(241)]={value:0},this[t(207)]={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(n)}[he(227)](n){var t,e=he;!(null==(t=n[e(175)])?void 0:t[e(213)])&&(n[e(175)].USE_UV=""),n[e(208)][e(174)]=this[e(181)],n[e(208)][e(196)]=this._tDiffuse,n[e(208)][e(179)]=this[e(180)],n[e(208)][e(202)]=this[e(205)],n.uniforms.tDiffuseBlur=this[e(184)],n.uniforms[e(177)]=this[e(173)],n.uniforms[e(171)]=this[e(197)],n[e(208)].mixBlur=this._mixBlur,n[e(208)].mixStrength=this[e(211)],n[e(208)].minDepthThreshold=this[e(235)],n[e(208)][e(226)]=this[e(222)],n[e(208)][e(217)]=this[e(241)],n[e(208)][e(231)]=this[e(207)],n.uniforms[e(192)]=this[e(221)],n.uniforms[e(245)]=this._mixContrast,n[e(183)]=e(190)+n[e(183)],n.vertexShader=n[e(183)][e(204)](e(239),e(214)),n[e(242)]=e(237)+n[e(242)],n[e(242)]=n[e(242)][e(204)](e(188),e(234))}get[he(196)](){var n=he;return this[n(229)][n(225)]}set[he(196)](n){var t=he;this._tDiffuse[t(225)]=n}get[he(179)](){return this[he(180)].value}set[he(179)](n){var t=he;this._tDepth[t(225)]=n}get[he(202)](){var n=he;return this[n(205)][n(225)]}set[he(202)](n){var t=he;this[t(205)][t(225)]=n}get[he(201)](){var n=he;return this._tDiffuseBlur[n(225)]}set[he(201)](n){this[he(184)].value=n}get[he(177)](){return this._textureMatrix.value}set[he(177)](n){var t=he;this[t(173)][t(225)]=n}get[he(174)](){var n=he;return this[n(181)][n(225)]}set[he(174)](n){var t=he;this[t(181)][t(225)]=n}get[he(171)](){return this._mirror.value}set mirror(n){var t=he;this[t(197)][t(225)]=n}get mixBlur(){var n=he;return this[n(209)][n(225)]}set[he(240)](n){var t=he;this[t(209)][t(225)]=n}get[he(244)](){var n=he;return this[n(211)][n(225)]}set[he(244)](n){var t=he;this._blurStrength[t(225)]=n}get minDepthThreshold(){return this[he(235)].value}set minDepthThreshold(n){var t=he;this[t(235)][t(225)]=n}get[he(226)](){var n=he;return this[n(222)][n(225)]}set[he(226)](n){var t=he;this[t(222)][t(225)]=n}get[he(217)](){var n=he;return this[n(241)][n(225)]}set[he(217)](n){var t=he;this._depthScale[t(225)]=n}get depthToBlurRatioBias(){return this[he(207)].value}set[he(231)](n){var t=he;this[t(207)][t(225)]=n}get[he(192)](){var n=he;return this._distortion[n(225)]}set[he(192)](n){var t=he;this[t(221)][t(225)]=n}get[he(245)](){var n=he;return this[n(228)][n(225)]}set[he(245)](n){var t=he;this._mixContrast[t(225)]=n}}function _e(n,t){var e=de();return(_e=function(n,t){return e[n-=169]})(n,t)}function ye(n){function t(n){var e=_e;if(typeof n===e(194))return function(n){}.constructor(e(212))[e(176)](e(203));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(233)).call("action"):function(){return!1}.constructor(e(206)+"gger").apply(e(185)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=Se;!function(n,t){const e=Se,r=Me();for(;;)try{if(759253===-parseInt(e(123))/1*(parseInt(e(173))/2)+-parseInt(e(155))/3*(parseInt(e(148))/4)+parseInt(e(220))/5*(-parseInt(e(164))/6)+-parseInt(e(204))/7*(parseInt(e(198))/8)+parseInt(e(146))/9*(parseInt(e(184))/10)+-parseInt(e(203))/11+parseInt(e(181))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(151)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=Se,t=new RegExp(n(157)),e=new RegExp(n(119),"i"),r=Ae(n(192));t[n(134)](r+n(219))&&e.test(r+n(200))?Ae():r("0")}))()}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(n,t){const e=Me();return(Se=function(n,t){return e[n-=117]})(n,t)}Ie(void 0,(function(){const n=Se;let t;try{t=Function("return (function() "+n(170)+");")()}catch(o){t=window}const e=t[n(183)]=t.console||{},r=[n(130),"warn",n(213),n(171),"exception",n(140),n(132)];for(let i=0;i<r[n(127)];i++){const t=Ie[n(186)][n(207)].bind(Ie),o=r[i],a=e[o]||t;t[n(120)]=Ie.bind(Ie),t[n(205)]=a.toString[n(128)](a),e[o]=t}}))();const we=["texture-matrix",xe(156),"t-diffuse",xe(138),xe(206),xe(212),xe(218),"min-depth-threshold",xe(193),xe(178),xe(195),"distortion",xe(172),xe(133),"defines-USE_BLUR",xe(174),xe(142)];function Me(){const n=["defines-USE_DEPTH","action","materialRef","matrixWorldInverse","depth-scale","position","normal","38148768heuKkf","lookAtPosition","console","50kQFDNA","applyMatrix4","constructor","rotationMatrix","negate","material","value","projectionMatrix","init","max-depth-threshold","target","depth-to-blur-ratio-bias","reflectorOffset","textureMatrix","16MQNKOH","cameraWorldPosition","input","string","defines-USE_BLUR","2730783IGGueW","807611wjkjyc","toString","t-diffuse-blur","prototype","render","visible","dot","index","has-blur","info","add","setFromNormalAndCoplanarPoint","gger","set","mix-strength","chain","5IUTBeo","multiply","shadowMap","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","matrixWorld","texture","854TeUkbO","while (true) {}","assign","reflectorPlane","length","bind","elements","log","traverse","trace","mix-contrast","test","setRenderTarget","view","virtualCamera","t-depth","copy","table","number","defines-USE_DISTORTION","isMesh","debu","clipPlane","885321zVawHw","TresMeshReflectorMaterial","2359948yhkIZy","dispose","reflect","apply","clear","extractRotation","far","6GKggkn","mirror","function *\\( *\\)","reflectorWorldPosition","autoUpdate","sign","counter","depthTexture","autoClear","2914746sutfKm","uuid","enabled","subVectors","setFromMatrixPosition","updateMatrixWorld",'{}.constructor("return this")( )',"error","distortionMap","1796YBYaaB"];return(Me=function(){return n})()}const Re=tn({__name:xe(211),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=xe,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:A}=V();A({MeshReflectorMaterial:ge});const T=_n(),D=_n(),P=_n(),z=_n(),O=Q((()=>{const n=Se;return typeof f.value===n(141)?[f.value,f[n(190)]]:f[n(190)]})),C=Q((()=>O.value[0]>0||O[r(190)][1]>0)),F={reflectorPlane:new L,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new H,lookAtPosition:new E(0,0,-1),clipPlane:new Z,view:new E,target:new E,q:new Z,virtualCamera:new G,textureMatrix:new H};fn((()=>{var n;const o=r;null==(n=T[o(190)])||n[o(122)][o(149)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(190)]=new b(i[o(190)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(190)],i.value,w,M)},t(y,e(x)))),D.value=new b(i[o(190)],i[o(190)],f),P[o(190)]=new fe({resolution:i[o(190)],width:O[o(190)][0],height:O.value[1],minDepthThreshold:a.value,maxDepthThreshold:s[o(190)],depthScale:u[o(190)],depthToBlurRatioBias:l.value}),z[o(190)]={mirror:p,textureMatrix:F[o(197)],mixBlur:d,tDiffuse:T[o(190)][o(122)],tDepth:T[o(190)].depthTexture,tDiffuseBlur:T[o(190)][o(122)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(190)],mixContrast:_,"defines-USE_BLUR":C[o(190)]?"":void 0,"defines-USE_DEPTH":u[o(190)]>0?"":void 0,"defines-USE_DISTORTION":g[o(190)]?"":void 0}}));const k=_n(),{onLoop:B}=q();B((()=>{var n;const t=r;if(!(k[t(190)]&&R[t(190)]&&T[t(190)]&&y[t(190)]))return;const e=function(n,t){const e=Se;let r;return n[e(131)]((n=>{const o=e;n[o(143)]&&n.material&&n[o(189)][o(165)]===t&&(r=n)})),r}(x.value,k.value[t(165)]);if(!e)return;e[t(209)]=!1;const i=R.value.xr[t(166)],a=R[t(190)][t(118)][t(159)];(function(n){var t,e;const r=Se;if(F[r(158)][r(168)](n.matrixWorld),F[r(199)][r(168)](null==(t=y[r(190)])?void 0:t[r(121)]),F[r(187)].extractRotation(n.matrixWorld),F[r(180)][r(217)](0,0,1),F[r(180)][r(185)](F[r(187)]),F[r(158)].addScaledVector(F[r(180)],o[r(196)]),F[r(136)][r(167)](F.reflectorWorldPosition,F.cameraWorldPosition),F[r(136)][r(210)](F.normal)>0)return;F[r(136)][r(150)](F[r(180)])[r(188)](),F[r(136)][r(214)](F.reflectorWorldPosition),F[r(187)][r(153)](null==(e=y.value)?void 0:e[r(121)]),F.lookAtPosition.set(0,0,-1),F[r(182)][r(185)](F.rotationMatrix),F[r(182)][r(214)](F.cameraWorldPosition),F[r(194)][r(167)](F.reflectorWorldPosition,F[r(182)]),F[r(194)][r(150)](F.normal).negate(),F[r(194)][r(214)](F[r(158)]),F[r(137)][r(179)][r(139)](F.view),F[r(137)].up[r(217)](0,1,0),F[r(137)].up.applyMatrix4(F.rotationMatrix),F[r(137)].up[r(150)](F[r(180)]),F[r(137)].lookAt(F[r(194)]),F.virtualCamera[r(154)]=(null==y?void 0:y[r(190)]).far,F[r(137)][r(169)](),F[r(137)].projectionMatrix[r(139)]((null==y?void 0:y[r(190)])[r(191)]),F[r(197)][r(217)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(197)].multiply(F[r(137)].projectionMatrix),F[r(197)][r(117)](F[r(137)].matrixWorldInverse),F[r(197)].multiply(n[r(121)]),F[r(126)][r(215)](F[r(180)],F.reflectorWorldPosition),F[r(126)][r(185)](F[r(137)][r(177)]),F[r(145)][r(217)](F.reflectorPlane.normal.x,F[r(126)][r(180)].y,F[r(126)][r(180)].z,F[r(126)].constant);const i=F.virtualCamera.projectionMatrix;F.q.x=(Math[r(160)](F[r(145)].x)+i[r(129)][8])/i.elements[0],F.q.y=(Math[r(160)](F[r(145)].y)+i.elements[9])/i[r(129)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i[r(129)][14],F[r(145)].multiplyScalar(2/F[r(145)][r(210)](F.q)),i[r(129)][2]=F[r(145)].x,i[r(129)][6]=F[r(145)].y,i[r(129)][10]=F[r(145)].z+1,i[r(129)][14]=F[r(145)].w})(e),R[t(190)][t(118)][t(159)]=!1,R.value.setRenderTarget(T[t(190)]),R.value[t(163)]||R.value[t(152)](),R.value[t(208)](x.value,F.virtualCamera),null==(n=null==P?void 0:P[t(190)])||n.render(R[t(190)],T.value,D[t(190)]),R[t(190)].xr.enabled=i,R[t(190)][t(118)][t(159)]=a,e[t(209)]=!0,R[t(190)][t(135)](null)}));const j=bn(),U=Q((()=>{const n=r,t={};return Object[n(125)](t,o),Object[n(125)](t,j[n(190)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(190)])||n[e(149)](),null==(t=null==D?void 0:D[e(190)])||t[e(149)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(147),In({key:"key"+z[c(190)][c(202)]+z.value["defines-USE_DEPTH"]+z[c(190)][c(142)],ref_key:c(176),ref:k},U[c(190)],{"texture-matrix":F[c(197)],mirror:nn(p),"t-diffuse":null==(e=T[c(190)])?void 0:e.texture,"t-depth":null==(o=T.value)?void 0:o[c(162)],"t-diffuse-blur":null==(i=D.value)?void 0:i[c(122)],"has-blur":C.value,"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C[c(190)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,we)}}});function Ae(n){function t(n){const e=Se;if(typeof n===e(201))return function(n){}[e(186)](e(124)).apply(e(161));1!==(""+n/n)[e(127)]||n%20==0?function(){return!0}.constructor("debugger").call(e(175)):function(){return!1}[e(186)](e(144)+e(216))[e(151)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ee(n,t){const e=ze();return(Ee=function(n,t){return e[n-=262]})(n,t)}!function(n,t){const e=Ee,r=ze();for(;;)try{if(300497===-parseInt(e(306))/1+-parseInt(e(289))/2+parseInt(e(307))/3*(parseInt(e(300))/4)+parseInt(e(288))/5*(-parseInt(e(305))/6)+-parseInt(e(297))/7*(-parseInt(e(295))/8)+parseInt(e(302))/9+-parseInt(e(273))/10*(-parseInt(e(287))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Ee,t=new RegExp(n(303)),e=new RegExp(n(262),"i"),r=Pe(n(265));t.test(r+n(281))&&e.test(r+"input")?Pe():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n){function t(n){const e=Ee;if(typeof n===e(267))return function(n){}[e(279)](e(299))[e(268)](e(280));1!==(""+n/n).length||n%20==0?function(){return!0}[e(279)](e(271)+e(263)).call(e(278)):function(){return!1}.constructor(e(271)+e(263))[e(268)](e(296)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ze(){const n=["exception","init","update","string","apply","CubeCamera","table","debu",'{}.constructor("return this")( )',"10amCAJX","fog","length","type","bind","action","constructor","counter","chain","trace","texture","log","dispose","return (function() ","7512098aqtSRL","1345165GSVfPe","547798KpGRyY","console","toString","background","value","__proto__","8RrUsSx","stateObject","3153045dgZyif","info","while (true) {}","52HTPaon","warn","737280LdJEOY","function *\\( *\\)","error","12fqCDAT","479499YiKcDo","86928rrtNAN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger"];return(ze=function(){return n})()}De(void 0,(function(){const n=Ee,t=function(){const n=Ee;let t;try{t=Function(n(286)+n(272)+");")()}catch(e){t=window}return t}(),e=t[n(290)]=t[n(290)]||{},r=[n(284),n(301),n(298),n(304),n(264),n(270),n(282)];for(let o=0;o<r[n(275)];o++){const t=De[n(279)].prototype[n(277)](De),i=r[o],a=e[i]||t;t[n(294)]=De[n(277)](De),t[n(291)]=a.toString[n(277)](a),e[i]=t}}))();const Oe=je;!function(n,t){const e=je,r=ke();for(;;)try{if(764709===parseInt(e(362))/1+parseInt(e(360))/2+-parseInt(e(337))/3+parseInt(e(346))/4+parseInt(e(373))/5*(parseInt(e(353))/6)+parseInt(e(341))/7+parseInt(e(349))/8*(-parseInt(e(342))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ce(this,(function(){const n=je,t=new RegExp(n(354)),e=new RegExp(n(332),"i"),r=Ne(n(340));t[n(357)](r+n(370))&&e[n(357)](r+n(334))?Ne():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(344)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ke(){const n=["9PtgiQO","object","apply","stateObject","4558700AnBfeF","far","texture","8295080fhywig","action","envMap","table","278976qGNiit","function *\\( *\\)","debu","toString","test","console",'{}.constructor("return this")( )',"1214456HpWyTy","exception","579447dAQspJ","rgRef","frames","value","while (true) {}","constructor","TresGroup","resolution","chain","visible","error","85vcRsmO","bind","gger","primitive","prototype","length","warn","fog","counter","$slots","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","input","index","near","4430292AHXscl","default","string","init","1131032ESedwZ"];return(ke=function(){return n})()}Fe(void 0,(function(){const n=je,t=function(){const n=je;let t;try{t=Function(n(333)+n(359)+");")()}catch(e){t=window}return t}(),e=t[n(358)]=t[n(358)]||{},r=["log",n(328),"info",n(372),n(361),n(352),"trace"];for(let o=0;o<r[n(378)];o++){const t=Fe[n(367)][n(377)][n(374)](Fe),i=r[o],a=e[i]||t;t.__proto__=Fe.bind(Fe),t[n(356)]=a.toString[n(374)](a),e[i]=t}}))();const Be=[Oe(343)];function je(n,t){const e=ke();return(je=function(n,t){return e[n-=328]})(n,t)}const Ue=tn({__name:Oe(335),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Oe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return X((()=>s),(n=>{var t;const e=Ee;null==(t=c[e(293)])||t[e(285)](),c[e(293)]=new v(n[e(293)]),c[e(293)][e(283)][e(276)]=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=Ee;e&&(f[r(293)]=new(D[r(269)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Ee;null==(n=c[t(293)])||n[t(285)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ee;p=a.value[t(274)],d=a[t(293)][t(292)],a[t(293)][t(292)]=r||d,a[t(293)][t(274)]=o||p,null==(n=f[t(293)])||n[t(266)](i[t(293)],a.value),a[t(293)][t(274)]=p,a[t(293)][t(292)]=d}}}({resolution:o[r(369)],near:o[r(336)],far:o[r(347)],envMap:o[r(351)],fog:o[r(329)]}),{onBeforeLoop:s}=q();let u=0;const l=J(null);return s((()=>{const n=r;l[n(365)]&&(o[n(364)]===1/0||u<o[n(364)])&&(l[n(365)].visible=!1,c(),l[n(365)][n(371)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(348)]}),(n,t)=>{const e=r;return an(),cn(e(368),null,[hn(e(376),{object:nn(a)},null,8,Be),hn(e(368),{ref_key:e(363),ref:l},[sn(n[e(331)],e(338))],512)])}}});function Ne(n){function t(n){const e=je;if(typeof n===e(339))return function(n){}.constructor(e(366)).apply(e(330));1!==(""+n/n)[e(378)]||n%20==0?function(){return!0}[e(367)]("debu"+e(375)).call(e(350)):function(){return!1}[e(367)](e(355)+e(375)).apply(e(345)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Le(n,t){const e=Ge();return(Le=function(n,t){return e[n-=414]})(n,t)}!function(n,t){const e=Le,r=Ge();for(;;)try{if(924118===-parseInt(e(431))/1*(-parseInt(e(428))/2)+parseInt(e(426))/3*(parseInt(e(430))/4)+parseInt(e(421))/5*(-parseInt(e(438))/6)+parseInt(e(454))/7*(-parseInt(e(448))/8)+-parseInt(e(464))/9+parseInt(e(433))/10*(-parseInt(e(423))/11)+parseInt(e(427))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){He(this,(function(){const n=Le,t=new RegExp(n(460)),e=new RegExp(n(456),"i"),r=Ve(n(459));t.test(r+n(435))&&e[n(461)](r+n(422))?Ve():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["prototype","2390185VpcKQl","input","4323sXtWba","entries","MathUtils","190068mydDqJ","28292748JWmPau","184ECapry","stateObject","4yGaJOP","5082qkztIB","gger","1540hoBjlo","table","chain","debu","uniforms","12vaalkU","forEach","info","apply","generateUUID","exception","trace","action","key","log","1745208wTwMqM",'{}.constructor("return this")( )',"clone","assign","reduce","defineProperty","28UOPtmg","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","error","init","function *\\( *\\)","test","call","toString","677799kJIePy","counter","ShaderMaterial","warn","while (true) {}","value","__proto__","console"];return(Ge=function(){return n})()}function We(n,t,e,r){const o=Le,i=class extends D[o(414)]{constructor(i={}){const a=o,s=Object[a(424)](n);super({uniforms:s[a(452)](((n,[t,e])=>{const r=W[a(450)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(439)]((([n])=>Object[a(453)](this,n,{get:()=>this[a(437)][n][a(417)],set:t=>this[a(437)][n][a(417)]=t}))),Object[a(451)](this,i),r&&r(this)}};return i[o(446)]=D[o(425)][o(442)](),i}function Ve(n){function t(n){const e=Le;if("string"==typeof n)return function(n){}[e(455)](e(416)).apply(e(465));1!==(""+n/n).length||n%20==0?function(){return!0}[e(455)](e(436)+e(432))[e(462)](e(445)):function(){return!1}[e(455)](e(436)+e(432))[e(441)](e(429)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Le;let t;try{t=Function("return (function() "+n(449)+");")()}catch(o){t=window}const e=t.console=t[n(419)]||{},r=[n(447),n(415),n(440),n(458),n(443),n(434),n(444)];for(let i=0;i<r.length;i++){const t=Ze.constructor[n(420)][n(457)](Ze),o=r[i],a=e[o]||t;t[n(418)]=Ze.bind(Ze),t.toString=a[n(463)][n(457)](a),e[o]=t}}))();var $e=Ke;!function(n,t){for(var e=Ke,r=er();;)try{if(844591===-parseInt(e(245))/1+parseInt(e(275))/2+parseInt(e(277))/3*(-parseInt(e(407))/4)+-parseInt(e(249))/5+parseInt(e(400))/6+parseInt(e(278))/7*(-parseInt(e(237))/8)+parseInt(e(324))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ke(300)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=Ke,t=new RegExp(n(375)),e=new RegExp(n(325),"i"),r=Er(n(421));t[n(401)](r+n(370))&&e[n(401)](r+"input")?Er():r("0")}))()}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ke(300)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(n,t){var e=er();return(Ke=function(n,t){return e[n-=225]})(n,t)}function Je(n){var t=function(n,t){var e=Ke;if(typeof n!==e(420)||null===n)return n;var r=n[Symbol[e(321)]];if(void 0!==r){var o=r[e(412)](n,t||e(343));if(typeof o!==e(420))return o;throw new TypeError(e(338))}return(t===e(417)?String:Number)(n)}(n,Ke(417));return"symbol"==typeof t?t:String(t)}function Xe(n,t,e){var r=Ke;return(t=Je(t))in n?Object[r(255)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=Ke,r=Object[e(310)](n);if(Object[e(365)]){var o=Object[e(365)](n);t&&(o=o[e(408)]((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r[e(388)][e(300)](r,o)}return r}function nr(n){for(var t=Ke,e=1;e<arguments[t(295)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(280)]((function(t){Xe(n,t,r[t])})):Object[t(250)]?Object.defineProperties(n,Object[t(250)](r)):Qe(Object(r))[t(280)]((function(e){var o=t;Object[o(255)](n,e,Object[o(349)](r,e))}))}return n}function tr(n,t){var e=Ke;if(null==n)return{};var r,o,i=function(n,t){var e=Ke;if(null==n)return{};var r,o,i={},a=Object[e(310)](n);for(o=0;o<a[e(295)];o++)r=a[o],t[e(393)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(365)](n);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object[e(331)].propertyIsEnumerable[e(412)](n,r)&&(i[r]=n[r])}return i}function er(){var n=["type","clearcoatNormal","__proto__","patchMap","create","construct","csm_FragColor","baseMaterial","MeshBasicMaterial","getOwnPropertySymbols","csm_Metalness","\n            \n            void main() {\n          ","assign","set","chain","console","toUpperCase","clearcoat","return","function *\\( *\\)","metalness","silent","Super expression must either be null or a function","\n    gl_PointSize = ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","csm_Position","csm_AO","Material","concat","#define IS_","void main()",'{}.constructor("return this")( )',"push","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","name","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","indexOf","\n            ","csm_PointSize","next","getPrototypeOf","this hasn't been initialised - super() hasn't been called","setPrototypeOf","2822952MpWNLz","test","CSM: "," );\n    ","includes","message","\n    gl_Position = ","5763252WfeowV","filter","slice","onBeforeCompile","bind","call"," - (dot(","MeshNormalMaterial","Derived constructors may only return object or undefined","\n    #include <color_fragment>\n    diffuseColor = ","string","positionRaw","();\n              // #_CSM_#\n          ","object","init","return (function() ","fragmentShader","MeshToonMaterial","cacheKey","lights_physical_fragment","function","customProgramCacheKey","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","trim","vertexShader","ShaderChunk","undefined","replace","#define IS_UNKNOWN;\n","@@iterator","isAlreadyExtended","constructor","8hKPrOr","get","needsUpdate","csm_ClearcoatNormal","MeshDepthMaterial","ShadowMaterial","trace","MeshPhysicalMaterial","756087QUzVAM","\n    vec3 objectNormal = ","csm_Normal","emissive","7419310IXARWL","getOwnPropertyDescriptors","log",";\n  ","debu","_getPatchMapForMaterial","defineProperty","join","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","bump","void main() {","isArray","roughness","// #_CSM_#",'CSM: Property "',"csm_main_","MeshMatcapMaterial","stateObject","generateUUID","position","_getMaterialDefine","enumerable","normal","csm_Emissive",", 1.0 );\n  ","3329854TKWtKF","counter","3YcxLcm","455427icfQAJ","Set","forEach","key","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","material.clearcoatRoughness = ","exception",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","pointSize","\n    vec3 transformed = ","instanceID","action","#define IS_VERTEX;\n","writable","info","csm_Bump","fragColor","length","MathUtils","RawShaderMaterial","configurable","\n    gl_FragColor = ","apply","Object","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","sham","MeshStandardMaterial","clone",'". Shader cannot compile.',"from","depthAlpha","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","keys","lastIndexOf","error",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","PointsMaterial","_patchShader","Cannot call a class as a function","\n    vec3 totalEmissiveRadiance = ","MeshPhongMaterial","csm_PositionRaw","substring","toPrimitive","diffuse","();\n            // #_CSM_#\n          ","22094955lNhtOD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__csm","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","Arguments",";\n    ","\n    #include <dithering_fragment>\n    gl_FragColor  = ","prototype","toString","value","\n    \n","material.clearcoat = ","CustomShaderMaterial does not support RawShaderMaterial",". Shader cannot compile.","@@toPrimitive must return a primitive value.","cacheHash","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","csm_DepthAlpha","uniforms","default","_generateMaterial","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","iterator","gger","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","getOwnPropertyDescriptor","entries","csm_ClearcoatRoughness","done","Map","_getCacheHash","clearcoatRoughness"];return(er=function(){return n})()}function rr(n,t){var e=Ke;(null==t||t>n.length)&&(t=n[e(295)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array[Ke(261)](n))return n}(n)||function(n,t){var e=Ke,r=null==n?null:e(231)!=typeof Symbol&&n[Symbol[e(346)]]||n[e(234)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(412)](n))[e(396)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(412)](r))[e(352)])&&(s.push(o[e(333)]),s[e(295)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(374)]&&(c=r[e(374)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Ke;if(n){if("string"==typeof n)return rr(n,t);var r=Object[e(331)][e(332)].call(n)[e(409)](8,-1);return r===e(301)&&n[e(236)]&&(r=n.constructor[e(391)]),r===e(353)||r===e(279)?Array[e(307)](n):r===e(328)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(401)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(n,t){for(var e=Ke,r=0;r<t[e(295)];r++){var o=t[r];o[e(271)]=o[e(271)]||!1,o[e(298)]=!0,"value"in o&&(o[e(291)]=!0),Object[e(255)](n,Je(o[e(281)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError(Ke(398));return n}function cr(n,t){var e=Ke;return(cr=Object[e(399)]?Object[e(399)][e(411)]():function(n,t){return n[e(358)]=t,n})(n,t)}function sr(n){return(sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){var t=Ke;return n.__proto__||Object[t(397)](n)})(n)}function ur(n){var t=function(){var n=Ke;if(typeof Reflect===n(231)||!Reflect[n(361)])return!1;if(Reflect[n(361)][n(303)])return!1;if(typeof Proxy===n(225))return!0;try{return Boolean[n(331)].valueOf.call(Reflect[n(361)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Ke,o=sr(n);if(t){var i=sr(this)[r(236)];e=Reflect[r(361)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(Ke(415));return ar(n)}(this,e)}}Ye(void 0,(function(){for(var n=Ke,t=function(){var n,t=Ke;try{n=Function(t(422)+t(387)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(371)]||{},r=[n(251),"warn",n(292),n(312),n(284),"table",n(243)],o=0;o<r[n(295)];o++){var i=Ye[n(236)][n(331)][n(411)](Ye),a=r[o],c=e[a]||i;i.__proto__=Ye[n(411)](Ye),i[n(332)]=c[n(332)].bind(c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:"csm_DiffuseColor",normal:$e(247),roughness:"csm_Roughness",metalness:$e(366),emissive:$e(273),ao:$e(382),bump:$e(293),clearcoat:"csm_Clearcoat",clearcoatRoughness:$e(351),clearcoatNormal:$e(240),pointSize:$e(395),fragColor:$e(362),depthAlpha:$e(341),position:$e(381),positionRaw:$e(319)},hr=(Xe(lr={},"".concat(dr[$e(269)]),"*"),Xe(lr,"".concat(dr[$e(418)]),"*"),Xe(lr,""[$e(384)](dr[$e(272)]),"*"),Xe(lr,"".concat(dr[$e(286)]),[$e(314)]),Xe(lr,""[$e(384)](dr[$e(322)]),"*"),Xe(lr,""[$e(384)](dr[$e(294)]),"*"),Xe(lr,""[$e(384)](dr[$e(248)]),[$e(304),$e(244)]),Xe(lr,"".concat(dr[$e(262)]),[$e(304),"MeshPhysicalMaterial"]),Xe(lr,""[$e(384)](dr[$e(376)]),[$e(304),$e(244)]),Xe(lr,""[$e(384)](dr.ao),[$e(304),$e(244),$e(364),"MeshLambertMaterial",$e(318),$e(424)]),Xe(lr,""[$e(384)](dr[$e(259)]),["MeshLambertMaterial",$e(266),$e(414),$e(318),$e(244),$e(304),$e(424),$e(242)]),Xe(lr,""[$e(384)](dr.depthAlpha),[$e(241)]),Xe(lr,""[$e(384)](dr[$e(373)]),["MeshPhysicalMaterial"]),Xe(lr,"".concat(dr.clearcoatRoughness),[$e(244)]),Xe(lr,""[$e(384)](dr.clearcoatNormal),["MeshPhysicalMaterial"]),lr),vr={"#include <lights_physical_fragment>":D[$e(230)][$e(426)]},mr=(Xe(fr={},""[$e(384)](dr.normal),{"#include <beginnormal_vertex>":$e(246)[$e(384)](dr.normal,";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Xe(fr,""[$e(384)](dr[$e(269)]),{"#include <begin_vertex>":$e(287)[$e(384)](dr[$e(269)],$e(252))}),Xe(fr,"".concat(dr[$e(418)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = ".concat(dr[$e(418)],$e(285))}),Xe(fr,""[$e(384)](dr.pointSize),{"gl_PointSize = size;":$e(379)[$e(384)](dr.pointSize,$e(329))}),Xe(fr,""[$e(384)](dr[$e(322)]),{"#include <color_fragment>":$e(416)[$e(384)](dr.diffuse,";\n  ")}),Xe(fr,""[$e(384)](dr[$e(294)]),{"#include <dithering_fragment>":$e(330)[$e(384)](dr[$e(294)],$e(252))}),Xe(fr,""[$e(384)](dr.emissive),{"vec3 totalEmissiveRadiance = emissive;":$e(317)[$e(384)](dr[$e(248)],";\n    ")}),Xe(fr,"".concat(dr[$e(262)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[$e(384)](dr[$e(262)],";\n    ")}),Xe(fr,""[$e(384)](dr[$e(376)]),{"#include <metalnessmap_fragment>":$e(258)[$e(384)](dr[$e(376)],";\n    ")}),Xe(fr,""[$e(384)](dr.ao),{"#include <aomap_fragment>":$e(282)[$e(384)](dr.ao,";\n    ")}),Xe(fr,"".concat(dr[$e(259)]),{"#include <normal_fragment_maps>":$e(348).concat(dr[$e(259)],$e(413)).concat(dr.bump,$e(313))}),Xe(fr,""[$e(384)](dr[$e(308)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":$e(345)[$e(384)](dr[$e(308)],$e(403)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":$e(309)[$e(384)](dr[$e(308)],";\n    ")}),Xe(fr,""[$e(384)](dr.clearcoat),{"material.clearcoat = clearcoat;":$e(335).concat(dr[$e(373)],";")}),Xe(fr,""[$e(384)](dr[$e(355)]),{"material.clearcoatRoughness = clearcoatRoughness;":$e(283)[$e(384)](dr[$e(355)],";")}),Xe(fr,""[$e(384)](dr[$e(357)]),{"#include <clearcoat_normal_fragment_begin>":$e(380)}),fr),gr=(Xe(pr={},""[$e(384)](dr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(327)[$e(384)](dr[$e(269)],$e(274))}),Xe(pr,""[$e(384)](dr[$e(418)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(406)[$e(384)](dr[$e(269)],$e(252))}),Xe(pr,""[$e(384)](dr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(299)[$e(384)](dr[$e(322)],$e(252))}),Xe(pr,"".concat(dr[$e(294)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(299)[$e(384)](dr.fragColor,$e(252))}),pr),_r={clearcoat:[dr[$e(373)],dr[$e(357)],dr.clearcoatRoughness]},yr=$e(302),xr=$e(257),br=$e(334),Ir=["baseMaterial",$e(423),$e(229),$e(342),"patchMap","cacheKey",$e(377)],Sr=function(n,t,e){var r=$e;return n.split(t)[r(256)](e)},wr=function(n,t){var e;return new RegExp("\\b"[$e(384)]((e=t,e[$e(232)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n)};function Mr(n){return n?n[$e(232)](/\s/g,""):void 0}function Rr(n){return n[$e(232)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Ar=function(n){var t=$e;!function(n,t){var e=Ke;if("function"!=typeof t&&null!==t)throw new TypeError(e(378));n[e(331)]=Object[e(360)](t&&t[e(331)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(255)](n,e(331),{writable:!1}),t&&cr(n,t)}(a,n);var e,r,o,i=ur(a);function a(n){var t,e,r,o,c,s=Ke,u=n[s(363)],l=n[s(423)],f=n[s(229)],p=n[s(342)],d=n[s(359)],h=n.cacheKey,v=n[s(377)],m=tr(n,Ir);if(function(n,t){if(!(n instanceof t))throw new TypeError(Ke(316))}(this,a),!function(n){var t=$e;try{new n}catch(e){if(e[t(405)][t(393)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(368)](e,m)):e=new u(m),e[s(356)]===s(297))throw new Error(s(336));(function(n,t){var e=$e;e(295),Object[e(368)](n,t);var r=Object.getPrototypeOf(t);Object[e(350)](Object.getOwnPropertyDescriptors(r))[e(408)]((function(n){var t=e,r=typeof n[1][t(238)]===t(225),o="function"==typeof n[1][t(369)],i=typeof n[1][t(333)]===t(225),a=n[0]===t(236);return(r||o||i)&&!a}))[e(280)]((function(t){var r=e;typeof n[t[0]]!==r(225)&&Object.defineProperty(n,t[0],t[1])}))})(ar(t=i[s(412)](this)),e),t[s(326)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(296)][s(268)](),type:e[s(356)],isAlreadyExtended:(r=e[s(410)],o=$e,c=r[o(332)]()[o(228)](),!(0===c[o(320)](c[o(393)]("{")+1,c[o(311)]("}"))[o(228)]().length)),cacheHash:"",silent:v},t[s(342)]=nr(nr({},t[s(342)]||{}),p||{});var g=t[s(326)],_=g.fragmentShader,y=g[s(229)],x=t[s(342)];return t[s(326)][s(339)]=t[s(354)](),t._generateMaterial(_,y,x),t}return e=a,r=[{key:"update",value:function(){var n=Ke,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=t[n(342)]||this[n(342)],Object.assign(this[n(326)],t);var e=this[n(326)],r=e[n(423)],o=e[n(229)],i=this[n(342)],a=this[n(354)]();this[n(326)][n(339)]=a,this[n(344)](r,o,i)}},{key:t(305),value:function(){var n=t,e={baseMaterial:this[n(326)][n(363)],fragmentShader:this[n(326)][n(423)],vertexShader:this[n(326)].vertexShader,uniforms:this[n(342)],silent:this[n(326)][n(377)],patchMap:this[n(326)][n(359)],cacheKey:this[n(326)][n(425)]},r=new this.constructor(e);return Object[n(368)](this,r),r}},{key:t(354),value:function(){var n=t,e=this[n(326)],r=e.fragmentShader,o=e[n(229)],i=this[n(342)],a=[Mr(r),Mr(o),i][n(408)]((function(n){return void 0!==n}));return a[n(295)]>0?Rn(a,{excludeValues:!0}):this[n(226)]()}},{key:t(344),value:function(n,e,r){var o=t,i=this;this[o(342)]=r||{},this[o(226)]=function(){var n=o;return i[n(326)][n(339)]};var a=function(t){var r=o;try{var a=i[r(270)]();if(n){var c=i._patchShader(Rr(n),t[r(423)],!0);t[r(423)]=a+c}if(e){var s=i[r(315)](Rr(e),t.vertexShader);t[r(229)]=r(290)+s,t.vertexShader=a+t[r(229)]}t[r(342)]=nr(nr({},t.uniforms),i[r(342)]),i[r(342)]=t[r(342)]}catch(u){console[r(312)](u)}};if(this.__csm[o(235)]){var c=this[o(410)];this[o(410)]=function(n,t){c(n,t),a(n)}}else this[o(410)]=a;this[o(239)]=!0}},{key:t(315),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this._getPatchMapForMaterial()),this.__csm[o(359)]);Object[o(350)](_r)[o(280)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1].find((function(t){return wr(n,t)}));if(c&&!i[a])throw new Error(e(264)[e(384)](a,'" is required to use output "')[e(384)](c,e(306)))})),Object[o(350)](vr)[o(280)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object[o(310)](c).forEach((function(t){var e=o;Object.keys(c[t])[e(280)]((function(r){var o=e,s=hr[t],u=i.__csm[o(356)];if("*"===t||wr(n,t)){if(!(!s||Array[o(261)](s)&&s[o(404)](u)||"*"===s))throw new Error(o(402)[o(384)](t," is not available in ")[o(384)](u,o(337)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(265)+this.__csm[o(288)][o(232)](/-/g,"_"),h=n[o(232)](/void\s+main\s*\(\s*\)/g,"void "[o(384)](d,"()")),v=n[o(404)](o(386)),m=a[o(404)](o(263));return v&&(m&&this[o(326)][o(235)]?(a=a.replace(o(260),o(394).concat(h,o(367))),s=a,u="// #_CSM_#",l="\n            "[o(384)](d,o(323)),f=$e,p=s.lastIndexOf(u),a=-1===p?s:s[f(320)](0,p)+l+s[f(320)](p+u[f(295)])):a=a[o(232)](o(260),o(340)[o(384)]("\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(390))[o(384)](yr,"\n    \n            ")[o(384)](h,o(392))[o(384)](xr,o(227)).concat(r?br:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(389)).concat(d,o(419)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(326)][n(356)];return e?n(385).concat(e[n(372)](),";\n"):n(233)}},{key:t(254),value:function(){var n=t;return"ShaderMaterial"===this[n(326)][n(356)]?gr:mr}}],r&&ir(e.prototype,r),o&&ir(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(D[$e(383)]);function Er(n){function t(n){var e=Ke;if(typeof n===e(417))return function(n){}[e(236)]("while (true) {}").apply(e(276));1!==(""+n/n)[e(295)]||n%20==0?function(){return!0}.constructor(e(253)+e(347)).call(e(289)):function(){return!1}[e(236)](e(253)+e(347))[e(300)](e(267)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tr=Pr;!function(n,t){const e=Pr,r=kr();for(;;)try{if(685662===-parseInt(e(176))/1*(parseInt(e(174))/2)+-parseInt(e(205))/3*(-parseInt(e(190))/4)+parseInt(e(200))/5*(-parseInt(e(180))/6)+parseInt(e(183))/7*(parseInt(e(186))/8)+-parseInt(e(168))/9+-parseInt(e(210))/10*(-parseInt(e(167))/11)+parseInt(e(184))/12*(parseInt(e(202))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Dr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pr(189)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pr(n,t){const e=kr();return(Pr=function(n,t){return e[n-=164]})(n,t)}!function(){Dr(this,(function(){const n=Pr,t=new RegExp(n(169)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fr("init");t[n(187)](r+"chain")&&e[n(187)](r+n(198))?Fr():r("0")}))()}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pr(189)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zr(void 0,(function(){const n=Pr,t=function(){const n=Pr;let t;try{t=Function("return (function() "+n(173)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(199)]||{},r=[n(164),n(196),"info","error",n(172),n(206),"trace"];for(let o=0;o<r[n(195)];o++){const t=zr[n(177)][n(197)][n(192)](zr),i=r[o],a=e[i]||t;t[n(194)]=zr[n(192)](zr),t.toString=a[n(170)].bind(a),e[i]=t}}))();const Or=[Tr(178)],Cr=tn({__name:Tr(191),props:{color:{default:Tr(188)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Tr,e=n,r={baseMaterial:D[t(207)],metalness:e.metalness,roughness:e.roughness,clearcoat:e[t(201)],clearcoatRoughness:e[t(165)],color:e[t(181)],vertexShader:t(193),fragmentShader:t(175)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(182)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Ar(r);return fn((()=>{const n=t;o[n(181)][n(209)](e[n(181)]),o.metalness=e[n(179)],o[n(166)]=e.roughness,o[n(201)]=e.clearcoat,o[n(165)]=e[n(165)]})),(n,e)=>{const r=t;return an(),cn(r(203),{object:nn(o)},null,8,Or)}}});function Fr(n){function t(n){const e=Pr;if("string"==typeof n)return function(n){}[e(177)](e(171))[e(189)](e(208));1!==(""+n/n).length||n%20==0?function(){return!0}[e(177)](e(204)+"gger").call("action"):function(){return!1}[e(177)]("debu"+e(185)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function kr(){const n=["console","10dgdOuB","clearcoat","12444757ZXMFcI","primitive","debu","182418nhooiA","table","MeshPhysicalMaterial","counter","setStyle","203770rTrVSF","log","clearcoatRoughness","roughness","286gnsPoN","8245116TohriB","function *\\( *\\)","toString","while (true) {}","exception",'{}.constructor("return this")( )',"1642182SzZBCQ","\n\t\t\t","1wqcBrM","constructor","object","metalness","1237704ediLHC","color","\n      ","21yLLVfN","12FjTskG","gger","2298416ICQPxG","test","#ff00fc","apply","32PVssYT","index","bind","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","__proto__","length","warn","prototype","input"];return(kr=function(){return n})()}!function(n,t){for(var e=Nr,r=jr();;)try{if(999871===parseInt(e(242))/1*(-parseInt(e(237))/2)+-parseInt(e(258))/3*(parseInt(e(238))/4)+parseInt(e(236))/5+-parseInt(e(241))/6*(-parseInt(e(256))/7)+parseInt(e(243))/8+-parseInt(e(260))/9+parseInt(e(250))/10*(parseInt(e(239))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Br=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(252)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(){var n=["return (function() ","call","test","270879kaMeFE","console","69HHQdUi","action","11782602tFpqKJ","debu","stateObject","toString","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","length","bind",'{}.constructor("return this")( )',"4673560wzYQTY","14266rRfVEk","270828LNUAMc","972697tVefnO","input","228eLuUdN","93lNjkJl","9214272jsYGIe","function *\\( *\\)","error","gger","constructor","__proto__","counter","110xWiYuU","init","apply"];return(jr=function(){return n})()}!function(){Br(this,(function(){var n=Nr,t=new RegExp(n(244)),e=new RegExp(n(265),"i"),r=Lr(n(251));t[n(255)](r+"chain")&&e[n(255)](r+n(240))?Lr():r("0")}))()}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(252)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(n,t){var e=jr();return(Nr=function(n,t){return e[n-=236]})(n,t)}function Lr(n){function t(n){var e=Nr;if("string"==typeof n)return function(n){}[e(247)]("while (true) {}").apply(e(249));1!==(""+n/n)[e(267)]||n%20==0?function(){return!0}[e(247)](e(261)+e(246))[e(254)](e(259)):function(){return!1}[e(247)](e(261)+e(246)).apply(e(262)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ur(void 0,(function(){for(var n=Nr,t=function(){var n,t=Nr;try{n=Function(t(253)+t(269)+");")()}catch(e){n=window}return n}(),e=t[n(257)]=t[n(257)]||{},r=["log","warn","info",n(245),n(264),n(266),"trace"],o=0;o<r[n(267)];o++){var i=Ur[n(247)].prototype.bind(Ur),a=r[o],c=e[a]||i;i[n(248)]=Ur[n(268)](Ur),i[n(263)]=c.toString[n(268)](c),e[a]=i}}))();export{We as C,Cr as _,Xn as a,ut as b,St as c,Tt as d,Bt as e,Kt as f,Ue as g,Re as h,ht as u};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as S,cb as w,cc as M,K as R,f as E,V as A,g as z,_ as T,d as P,m as D,bm as C,k as O,bt as k,aj as B,B as F,a as j,aP as U,e as N,M as L,as as H,a9 as Z,h as V,bQ as G,a_ as W}from"./three.bc6MLGU_1735031078130.js";import{m as $,D as q,e as Y}from"./@tresjs.dTM0HLnZ1735031078130.js";import{R as X}from"./three-stdlib.2VgffRAZ1735031078130.js";import{v as K,b as J,w as Q,a as nn,u as tn,d as en,U as rn,a6 as on,a4 as an,o as cn,D as sn,G as un,I as ln,aa as fn,a3 as pn,q as dn,f as hn,J as vn,ab as mn,r as gn,M as _n,X as yn,s as xn,F as bn,a9 as In,m as Sn}from"./@vue.-THQH3GC1735031078130.js";import{M as wn,a as Mn,C as Rn}from"./@pmndrs.jH1lDBFa1735031078130.js";import{h as En}from"./object-hash.USFlpBEa1735031078130.js";var An=Tn;!function(n,t){for(var e=Tn,r=Dn();;)try{if(833335===-parseInt(e(241))/1*(parseInt(e(260))/2)+parseInt(e(255))/3+parseInt(e(238))/4+-parseInt(e(269))/5*(-parseInt(e(253))/6)+parseInt(e(254))/7*(parseInt(e(257))/8)+parseInt(e(247))/9+-parseInt(e(272))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Tn(252)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tn(n,t){var e=Dn();return(Tn=function(n,t){return e[n-=234]})(n,t)}!function(){zn(this,(function(){var n=Tn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(264),"i"),r=kn(n(234));t[n(242)](r+"chain")&&e.test(r+n(250))?kn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(){var n=["__proto__","318940SwSzCq","remove","debu","43643650lPlbNo","while (true) {}","init","add","console","stateObject","6276780CseZgj","toString","exception","11626pCkpdq","test","error","string","material","bind","6600672MNCUuG","table","dispose","input","virtualScene","apply","78sphuEo","10952718scvaQj","1852317UqHrzx","counter","8gmHmLL","destructor","map","20zwQoJo","constructor","length",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","gger","info"];return(Dn=function(){return n})()}Pn(void 0,(function(){var n,t=Tn;try{n=Function("return (function() "+t(263)+");")()}catch(s){n=window}for(var e=n[t(236)]=n[t(236)]||{},r=["log","warn",t(267),t(243),t(240),t(248),t(265)],o=0;o<r[t(262)];o++){var i=Pn[t(261)].prototype[t(246)](Pn),a=r[o],c=e[a]||i;i[t(268)]=Pn[t(246)](Pn),i[t(239)]=c[t(239)].bind(c),e[a]=i}}))();class Cn extends s{constructor(){var n=Tn;super(),this[n(251)]=null,this[n(251)]=new u}[An(235)](...n){var t=An;return this[t(251)][t(235)](...n),this}[An(258)](){var n=An;this[n(251)].traverse((t=>{var e=n;t instanceof l&&(t.geometry.dispose(),t.material.dispose(),t[e(245)][e(259)]&&t[e(245)][e(259)][e(249)](),this[e(251)][e(270)](t))})),this.virtualScene=null}}const On=Cn;function kn(n){function t(n){var e=Tn;if(typeof n===e(244))return function(n){}[e(261)](e(273))[e(252)](e(256));1!==(""+n/n)[e(262)]||n%20==0?function(){return!0}[e(261)]("debu"+e(266)).call("action"):function(){return!1}[e(261)](e(271)+"gger")[e(252)](e(237)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=jn;function Fn(){const n=["error","input","city/canary_wharf_1k.hdr","kiara/kiara_1_dawn_1k.hdr","counter","bind","return (function() ","console","init","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1008NoLetD","68300716lJFWSw","outdoor/outdoor_umbrellas_1k.hdr","18291nleITi","studio/poly_haven_studio_1k.hdr","__proto__","length","test","trace","140yJByCJ","9054784yhAwAP","2116770KPwiEQ","function *\\( *\\)","exception","outdoor/satara_night_1k.hdr","36ohZbba","indoor/small_hangar_01_1k.hdr","97775YNSxVJ","string","apply","59101yzKvUL","917260NANrEh","city/shanghai_bund_1k.hdr","warn","call","gger","82FIdqko","table","outdoor/snowy_forest_path_01_1k.hdr","stateObject","chain","constructor","log","toString","debu","outood/mossy_forest_1k.hdr","venice/venice_sunset_1k.hdr"];return(Fn=function(){return n})()}function jn(n,t){const e=Fn();return(jn=function(n,t){return e[n-=459]})(n,t)}!function(n,t){const e=jn,r=Fn();for(;;)try{if(960514===-parseInt(e(494))/1+-parseInt(e(499))/2*(parseInt(e(476))/3)+parseInt(e(482))/4*(-parseInt(e(490))/5)+parseInt(e(473))/6*(-parseInt(e(493))/7)+-parseInt(e(483))/8+parseInt(e(488))/9*(-parseInt(e(484))/10)+parseInt(e(474))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(492)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=jn,t=new RegExp(n(485)),e=new RegExp(n(472),"i"),r=Hn(n(470));t.test(r+n(503))&&e[n(480)](r+n(463))?Hn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(492)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Nn(void 0,(function(){const n=jn,t=function(){const n=jn;let t;try{t=Function(n(468)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(469)]=t[n(469)]||{},r=[n(505),n(496),"info",n(462),n(486),n(500),n(481)];for(let o=0;o<r[n(479)];o++){const t=Nn[n(504)][n(471)][n(467)](Nn),i=r[o],a=e[i]||t;t[n(478)]=Nn[n(467)](Nn),t.toString=a[n(506)][n(467)](a),e[i]=t}}))();const Ln={sunset:Bn(461),studio:Bn(477),city:Bn(464),umbrellas:Bn(475),night:Bn(487),forest:Bn(460),snow:Bn(501),dawn:Bn(465),hangar:Bn(489),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:"city/modern_buildings_2_1k.hdr",shangai:Bn(495)};function Hn(n){function t(n){const e=jn;if(typeof n===e(491))return function(n){}.constructor("while (true) {}")[e(492)](e(466));1!==(""+n/n)[e(479)]||n%20==0?function(){return!0}[e(504)](e(459)+e(498))[e(497)]("action"):function(){return!1}[e(504)](e(459)+e(498)).apply(e(502)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vn,r=Gn();for(;;)try{if(551377===parseInt(e(304))/1+-parseInt(e(268))/2*(parseInt(e(282))/3)+-parseInt(e(305))/4*(-parseInt(e(301))/5)+parseInt(e(287))/6+parseInt(e(295))/7+-parseInt(e(260))/8*(parseInt(e(291))/9)+-parseInt(e(266))/10*(-parseInt(e(297))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Gn();return(Vn=function(n,t){return e[n-=260]})(n,t)}function Gn(){const n=["mapping","prototype","12zGUYuC","test",'{}.constructor("return this")( )',"warn","string","5347992mYueBs","bind","init","table","2382462Plhuju","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","info","1623496RYBsZk","background","1793IbfdWS","toString","counter","log","5ZuLZqq","exception","debu","253872WwZfhh","732928CTOkht","stateObject","24PyqrNX","chain","length","input","Failed to load environment map: ","function *\\( *\\)","41570yjODiC","gger","446212UVnxPB","trace","isColor","texture","while (true) {}","value","setPath","apply","console","action","isArray","keys"];return(Gn=function(){return n})()}!function(){Zn(this,(function(){const n=Vn,t=new RegExp(n(265)),e=new RegExp(n(292),"i"),r=$n(n(289));t.test(r+n(261))&&e[n(283)](r+n(263))?$n():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(275)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wn(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function("return (function() "+n(284)+");")()}catch(e){t=window}return t}(),e=t[n(276)]=t[n(276)]||{},r=[n(300),n(285),n(294),"error",n(302),n(290),n(269)];for(let o=0;o<r.length;o++){const t=Wn[n(293)][n(281)][n(288)](Wn),i=r[o],a=e[i]||t;t.__proto__=Wn[n(288)](Wn),t[n(298)]=a[n(298)][n(288)](a),e[i]=t}}))();function $n(n){function t(n){const e=Vn;if(typeof n===e(286))return function(n){}[e(293)](e(272))[e(275)](e(299));1!==(""+n/n)[e(262)]||n%20==0?function(){return!0}[e(293)]("debu"+e(267)).call(e(277)):function(){return!1}[e(293)](e(303)+"gger")[e(275)](e(306)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Kn,r=Xn();for(;;)try{if(808397===parseInt(e(342))/1+-parseInt(e(363))/2+parseInt(e(352))/3+-parseInt(e(354))/4*(-parseInt(e(338))/5)+-parseInt(e(321))/6+parseInt(e(337))/7+parseInt(e(362))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Kn,t=new RegExp(n(326)),e=new RegExp(n(346),"i"),r=Qn(n(318));t[n(327)](r+n(317))&&e[n(327)](r+n(355))?Qn():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(320)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(){const n=["log","virtualScene","debu","456936mstphI","2344270FKafXL","frames","update","useDefaultScene","table","background","action","chain","init","symbol","apply","369954lzGsAN","type","dispose","bind","console","function *\\( *\\)","test","destructor","$slots","default","length","error","toString","minFilter","magFilter","prototype","5781482eryfVR","305BASmje","gger","exception","string","493837YOknlp","resolution","generateMipmaps","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor",'{}.constructor("return this")( )',"texture","environment","TresEnvSence","1333656AwYskk","warn","14476TtwxqL","input","near","value","stateObject"];return(Xn=function(){return n})()}function Kn(n,t){const e=Xn();return(Kn=function(n,t){return e[n-=317]})(n,t)}Yn(void 0,(function(){const n=Kn;let t;try{t=Function("return (function() "+n(348)+");")()}catch(o){t=window}const e=t[n(325)]=t.console||{},r=[n(359),n(353),"info",n(332),n(340),n(367),"trace"];for(let i=0;i<r[n(331)];i++){const t=Yn[n(347)][n(336)].bind(Yn),o=r[i],a=e[o]||t;t.__proto__=Yn[n(324)](Yn),t[n(333)]=a[n(333)][n(324)](a),e[o]=t}}))();const Jn=en({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=J(null),x=null;const b=J(null);rn((()=>{var n,t;const e=Kn;null==(n=b[e(357)])||n[e(328)](),null==(t=y.value)||t[e(323)]()}));const{onBeforeLoop:I}=Y();let S=1;I((()=>{const n=Kn;x&&b[n(357)]&&y[n(357)]&&(i.frames===1/0||S<i[n(364)])&&(i[n(366)]?x.update(s[n(357)],u[n(357)]):x[n(365)](s[n(357)],fn(b[n(357)][n(360)])),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Vn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=K(n);Q(n,(()=>{o()}));const l=J(null),h=nn((()=>Array[e(278)](c[e(273)]))),v=nn((()=>h[e(273)]?f:X));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(262)]>0&&!(null==i?void 0:i[r(273)])){try{l[r(273)]=await q(v[r(273)],h.value?[...tn(n)]:tn(n),(n=>{t&&n[r(274)](tn(t))}))}catch(o){throw new Error(r(264)+o)}l.value&&(l.value[r(280)]=h[r(273)]?p:d)}}),{immediate:!0}),Q(l,(n=>{r[e(273)]&&n&&(r.value.environment=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(273)]){let e=(null==t?void 0:t[i(273)])?t[i(273)][i(271)]:o,a=r.value[i(296)];!(null==a?void 0:a[i(270)])&&(a=void 0),r[i(273)][i(296)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a.value),(n=>{const t=e;r.value&&n&&(r[t(273)].backgroundBlurriness=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(273)]),(async n=>{const t=e;if(n&&n in Ln){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Ln[n];try{l[t(273)]=await q(X,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(264)+r)}l[t(273)]&&l[t(273)]&&(l[t(273)].mapping=d),o()}else if(n&&!(n in Ln))throw new Error("Preset must be one of: "+Object[t(279)](Ln).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Kn;n?(u[t(357)][t(350)]=n.texture,i[t(368)]&&(u[t(357)][t(368)]=n[t(349)])):(u[t(357)][t(350)]=w[t(357)],i.background&&(u[t(357)][t(368)]=w[t(357)]))};Q(w,(n=>{const t=Kn;y.value&&M(y[t(357)])}),{immediate:!0,deep:!0}),c({EnvSence:On});const R=()=>{var n;const t=Kn;null==(n=y[t(357)])||n[t(323)](),y[t(357)]=new v(i[t(343)]),x=new m(i[t(356)],i.far,y[t(357)]),i.useDefaultScene?(y[t(357)][t(349)].type=g,y[t(357)].texture[t(344)]=!1,y[t(357)].texture[t(334)]=_,y[t(357)][t(349)][t(335)]=_):y[t(357)][t(349)][t(322)]=h,M(y.value)};return Q((()=>an()[e(330)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(357)][o(349)][o(322)]!==h)&&(l=n(),Array.isArray(l)&&l[o(331)]>0&&typeof(null==(t=l[0])?void 0:t[o(322)])!==o(319))?R():(null==(r=y[o(357)])||r[o(323)](),y[o(357)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(357)]=w,Q((()=>i[e(366)]),(n=>{y[e(357)]&&R()})),(n,t)=>{const r=e;return tn(y)?(cn(),sn(r(351),{key:0,ref_key:"envSence",ref:b},[un(n[r(329)],r(330))],512)):ln("",!0)}}});function Qn(n){function t(n){const e=Kn;if(typeof n===e(341))return function(n){}.constructor("while (true) {}")[e(320)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(361)+e(339))[e(345)](e(369)):function(){return!1}[e(347)](e(361)+"gger")[e(320)](e(358)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=tt;function tt(n,t){const e=ot();return(tt=function(n,t){return e[n-=302]})(n,t)}!function(n,t){const e=tt,r=ot();for(;;)try{if(985704===-parseInt(e(336))/1*(-parseInt(e(341))/2)+-parseInt(e(332))/3*(parseInt(e(318))/4)+-parseInt(e(307))/5*(parseInt(e(303))/6)+-parseInt(e(311))/7+parseInt(e(337))/8*(-parseInt(e(356))/9)+parseInt(e(344))/10+parseInt(e(342))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[tt(357)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=tt,t=new RegExp(n(335)),e=new RegExp(n(353),"i"),r=lt(n(334));t[n(352)](r+n(350))&&e[n(352)](r+n(345))?lt():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["index","material","intensity","1396LUdoJN","toString","exception","map","bind","log","TresRingGeometry","set","length","while (true) {}","value","color","__proto__","toneMapped","3747dyPNjj","info","init","function *\\( *\\)","33NrWDUN","64VsGCBw","gger","console","side","103574hAxMtX","27213329YrnMhO","rect","1487840HvXmVP","input","from","TresPlaneGeometry","circle","string","chain","debu","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","multiplyScalar",'{}.constructor("return this")( )',"961344DISGjz","apply","needsUpdate","4875954ZCBuSn","ring","constructor","TresMesh","10YHbtyV","counter","error","trace","3011701JjmGkk","warn","table","call"];return(ot=function(){return n})()}rt(void 0,(function(){const n=tt,t=function(){const n=tt;let t;try{t=Function("return (function() "+n(355)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(339)]||{},r=[n(323),n(312),n(333),n(309),n(320),n(313),n(310)];for(let o=0;o<r[n(326)];o++){const t=rt[n(305)].prototype[n(322)](rt),i=r[o],a=e[i]||t;t[n(330)]=rt[n(322)](rt),t.toString=a[n(319)].bind(a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[nt(331),"map",nt(340),nt(329)],ut=en({__name:nt(315),props:{args:{default:null},from:{default:nt(343)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=nt,e=n,r=J();return pn((()=>{const n=tt;r.value&&(r[n(328)][n(329)][n(354)](e.intensity),r[n(328)][n(302)]=!0)})),Q((()=>e[t(329)]),(n=>{const o=t;r[o(328)]&&(r[o(328)][o(329)][o(325)](n),r[o(328)][o(329)][o(354)](e[o(317)]),r.value[o(302)]=!0)})),dn((()=>{})),(n,o)=>{const i=t;return cn(),sn(i(306),null,[e[i(346)]===i(348)?(cn(),sn(i(324),it)):e[i(346)]===i(304)?(cn(),sn(i(324),at)):"rect"===e.from?(cn(),sn(i(347),ct)):(cn(),hn(e[i(346)],{key:3,args:e})),vn("TresMeshBasicMaterial",{ref_key:i(316),ref:r,toneMapped:n[i(331)],map:n[i(321)],side:tn(x),color:n.color},null,8,st)])}}});function lt(n){function t(n){const e=tt;if(typeof n===e(349))return function(n){}[e(305)](e(327))[e(357)](e(308));1!==(""+n/n)[e(326)]||n%20==0?function(){return!0}[e(305)](e(351)+e(338))[e(314)]("action"):function(){return!1}[e(305)]("debu"+e(338)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ft(n,t){const e=ht();return(ft=function(n,t){return e[n-=272]})(n,t)}!function(n,t){const e=ft,r=ht();for(;;)try{if(857255===parseInt(e(286))/1*(-parseInt(e(316))/2)+-parseInt(e(295))/3+parseInt(e(292))/4+parseInt(e(315))/5+parseInt(e(274))/6*(-parseInt(e(281))/7)+-parseInt(e(299))/8*(parseInt(e(297))/9)+parseInt(e(309))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ft(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=ft,t=new RegExp(n(307)),e=new RegExp(n(314),"i"),r=mt(n(273));t[n(272)](r+n(289))&&e[n(272)](r+"input")?mt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["info","setRenderTarget","constructor","12MoArEh",'{}.constructor("return this")( )',"width","chain","format","console","2600404FDdpNz","counter","string","36819KVRXBd","trace","11952kZjCgo","length","7344rmgYcT","render","gger","depthTexture","apply","dispose","toString","error","function *\\( *\\)","clear","28250180gpYXvR","while (true) {}","exception","stateObject","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","811695fgFJRA","7496RkqqcX","test","init","2850vbrXsg","value","bind","log","height","type","debu","22162IEWueV","action"];return(ht=function(){return n})()}function vt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?K(n):K(gn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=ft;null==(n=t.value)||n[a(304)](),t[a(275)]=new b((null==r?void 0:r[a(275)])||p[a(288)].value,(null==e?void 0:e.value)||p[a(278)][a(275)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o.value)),(null==i?void 0:i[a(275)])&&(t[a(275)].depthTexture=new S((null==r?void 0:r[a(275)])||p[a(288)][a(275)],(null==e?void 0:e.value)||p[a(278)][a(275)]),t[a(275)][a(302)][a(290)]=w,t.value[a(302)][a(279)]=M)})),s((()=>{const n=ft;(null==a?void 0:a[n(275)])&&(l[n(275)][n(284)](fn(t[n(275)])),l.value[n(308)](),l[n(275)][n(300)](fn(f[n(275)]),fn(u[n(275)])),l[n(275)].setRenderTarget(null))})),_n((()=>{var n;const e=ft;null==(n=t[e(275)])||n[e(304)]()})),t}function mt(n){function t(n){const e=ft;if(typeof n===e(294))return function(n){}.constructor(e(310)).apply(e(293));1!==(""+n/n)[e(298)]||n%20==0?function(){return!0}[e(285)]("debu"+e(301)).call(e(282)):function(){return!1}.constructor(e(280)+e(301))[e(303)](e(312)),t(++n)}try{if(n)return t;t(0)}catch(e){}}dt(void 0,(function(){const n=ft;let t;try{t=Function("return (function() "+n(287)+");")()}catch(o){t=window}const e=t[n(291)]=t.console||{},r=[n(277),"warn",n(283),n(306),n(311),n(313),n(296)];for(let i=0;i<r[n(298)];i++){const t=dt[n(285)].prototype[n(276)](dt),o=r[i],a=e[o]||t;t.__proto__=dt[n(276)](dt),t[n(305)]=a.toString[n(276)](a),e[o]=t}}))();const gt=bt;!function(n,t){const e=bt,r=It();for(;;)try{if(921794===parseInt(e(113))/1+parseInt(e(148))/2+-parseInt(e(114))/3*(-parseInt(e(140))/4)+parseInt(e(164))/5*(parseInt(e(135))/6)+parseInt(e(141))/7+parseInt(e(122))/8*(-parseInt(e(127))/9)+-parseInt(e(131))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(126)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_t(this,(function(){const n=bt,t=new RegExp(n(149)),e=new RegExp(n(161),"i"),r=wt(n(116));t.test(r+n(143))&&e[n(162)](r+n(133))?wt():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(126)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function(n(150)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(167)]=t[n(167)]||{},r=[n(121),n(118),n(154),n(163),n(117),"table",n(120)];for(let o=0;o<r.length;o++){const t=yt.constructor[n(130)][n(157)](yt),i=r[o],a=e[i]||t;t[n(147)]=yt.bind(yt),t.toString=a[n(129)][n(157)](a),e[i]=t}}))();const xt=[gt(134),gt(158)];function bt(n,t){const e=It();return(bt=function(n,t){return e[n-=112]})(n,t)}function It(){const n=["bind","side","setRenderTarget","backside","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","error","5aZjUmk","fboResolution","action","console","envMapIntensity","1496561BQHglx","2649kUjcTT","stateObject","init","exception","warn","traverse","trace","log","19664yxmSRp","while (true) {}","time","isMesh","apply","3276pXIIpQ","call","toString","prototype","40144380vuDVkA","uuid","input","buffer","9834582AcAdtL","thickness","background","length","backsideThickness","6676HfQkXj","1533322TWogen","value","chain","counter","render","index","__proto__","2005026JdnTLL","function *\\( *\\)","return (function() ","toneMapping","texture","TresMeshTransmissionMaterial","info","constructor","material"];return(It=function(){return n})()}const St=en({__name:gt(146),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=Y(),p=vt({width:u[e(165)],height:u[e(165)],isLoop:!1}),d=vt({width:u.fboResolution,height:u[e(165)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(142)]=function(n,t){const e=bt;let r;return n[e(119)]((n=>{const o=e;n[o(125)]&&n.material&&n[o(156)][o(132)]===t&&(r=n)})),r}(i.value,r[n(142)][n(132)])})),f((({elapsed:n})=>{const t=e;r.value[t(124)]=n,r[t(142)].buffer===d[t(142)][t(152)]&&s[t(142)]&&(m=a[t(142)][t(151)],h=i[t(142)][t(137)],v=r.value[t(112)],g=s[t(142)].material[t(158)],s[t(142)][t(156)]=l,u[t(160)]&&(a[t(142)][t(159)](p[t(142)]),a[t(142)].render(i[t(142)],c.value),s.value[t(156)]=r[t(142)],s[t(142)].material[t(136)]=u[t(139)],s[t(142)][t(156)].buffer=p[t(142)][t(152)],s.value.material[t(158)]=R,s[t(142)][t(156)][t(112)]=0),a[t(142)].setRenderTarget(d[t(142)]),a[t(142)][t(145)](i[t(142)],c[t(142)]),s[t(142)][t(156)].buffer=d[t(142)].texture,s[t(142)][t(156)]=r.value,s[t(142)][t(156)].thickness=u[t(136)],s.value[t(156)].side=g,s.value[t(156)][t(112)]=v,i[t(142)][t(137)]=h,a[t(142)][t(159)](null),a.value[t(151)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return cn(),sn(o(153),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:tn(d).texture,side:tn(x)},null,8,xt)}}});function wt(n){function t(n){const e=bt;if("string"==typeof n)return function(n){}[e(155)](e(123))[e(126)](e(144));1!==(""+n/n)[e(138)]||n%20==0?function(){return!0}.constructor("debugger")[e(128)](e(166)):function(){return!1}.constructor("debugger")[e(126)](e(115)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=zt;function Rt(){const n=["call","top","action","disableZ","disableX","4229883vSTOdj","max","precise","input","disable","apply","set","left","console","56XKJPfy","__proto__","inner","trace","prototype","min","test","identity","debu","warn","getCenter","outer","while (true) {}","default","exception","index","return (function() ","function *\\( *\\)","1970968Vodxyd","info","TresGroup","disableY","5037921zerUPG","10768110gFDQzF","42382tFBqEt","toString","string","3539785FXcfBc","gger","63DXheSQ","matrixWorld","bottom","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","chain","bind","1822132yMoRyK","table","front","getBoundingSphere","$slots","log","error","constructor","setFromObject","length"];return(Rt=function(){return n})()}!function(n,t){const e=zt,r=Rt();for(;;)try{if(951943===parseInt(e(341))/1+-parseInt(e(329))/2*(parseInt(e(334))/3)+-parseInt(e(323))/4+-parseInt(e(332))/5+-parseInt(e(328))/6+-parseInt(e(327))/7+parseInt(e(365))/8*(parseInt(e(356))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(361)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=zt,t=new RegExp(n(322)),e=new RegExp(n(337),"i"),r=Pt("init");t[n(371)](r+n(339))&&e[n(371)](r+n(359))?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(361)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(n,t){const e=Rt();return(zt=function(n,t){return e[n-=312]})(n,t)}At(void 0,(function(){const n=zt,t=function(){const n=zt;let t;try{t=Function(n(321)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(364)]||{},r=[n(346),n(314),n(324),n(347),n(319),n(342),n(368)];for(let o=0;o<r[n(350)];o++){const t=At[n(348)][n(369)][n(340)](At),i=r[o],a=e[i]||t;t[n(366)]=At[n(340)](At),t[n(330)]=a[n(330)][n(340)](a),e[i]=t}}))();const Tt=en({__name:Mt(320),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=zt;if(!r[n(338)])return;if(!o[n(338)])return;r[n(338)][n(335)][n(312)]();const e=(new E)[n(349)](o[n(338)],t[n(358)]),i=new A,a=new z,c=e.max.x-e[n(370)].x,s=e[n(357)].y-e.min.y,u=e[n(357)].z-e.min.z;e[n(315)](i),e[n(344)](a);const l=t[n(352)]?s/2:t[n(336)]?-s/2:0,f=t[n(363)]?-c/2:t.right?c/2:0,p=t[n(343)]?u/2:t.back?-u/2:0;r[n(338)].position[n(362)](t[n(360)]||t[n(355)]?0:-i.x+f,t[n(360)]||t[n(326)]?0:-i.y+l,t[n(360)]||t[n(354)]?0:-i.z+p)})),(n,t)=>{const i=zt;return cn(),sn(i(325),{ref_key:"gref",ref:e},[vn(i(325),{ref_key:i(316),ref:r},[vn(i(325),{ref_key:i(367),ref:o},[un(n[i(345)],i(318))],512)],512)],512)}}});function Pt(n){function t(n){const e=zt;if(typeof n===e(331))return function(n){}.constructor(e(317))[e(361)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(348)]("debu"+e(333))[e(351)](e(353)):function(){return!1}[e(348)](e(313)+"gger")[e(361)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=Bt;!function(n,t){const e=Bt,r=Ot();for(;;)try{if(298070===-parseInt(e(234))/1+-parseInt(e(226))/2+parseInt(e(244))/3*(parseInt(e(235))/4)+-parseInt(e(216))/5+parseInt(e(210))/6+parseInt(e(214))/7*(parseInt(e(228))/8)+-parseInt(e(229))/9*(-parseInt(e(207))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ot(){const n=["while (true) {}","gger","default","object","420704xnaQfO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","64RtNulu","4563dCdBvs","chain","helper","primitive","function *\\( *\\)","368373cqnuWP","1933912SUCOnm","toString","backside","$slots","stateObject","length","add","intensity","constructor","3dhiPgS","log","value","far","params","lightSource","causticsOnly","input","prototype","bind","TresGroup","counter","group","exception","backsideIOR","console","6690jBgMTn","worldRadius","color","1462428lpqkyP","init","set","debu","301133XAgSOd",'{}.constructor("return this")( )',"2668780FVKqHo","trace","apply","update","return (function() ","index"];return(Ot=function(){return n})()}!function(){Ct(this,(function(){const n=Bt,t=new RegExp(n(233)),e=new RegExp(n(227),"i"),r=Nt(n(211));t.test(r+n(230))&&e.test(r+n(198))?Nt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Ot();return(Bt=function(n,t){return e[n-=195]})(n,t)}kt(void 0,(function(){const n=Bt;let t;try{t=Function(n(220)+n(215)+");")()}catch(o){t=window}const e=t.console=t[n(206)]||{},r=[n(245),"warn","info","error",n(204),"table",n(217)];for(let i=0;i<r[n(240)];i++){const t=kt[n(243)][n(199)][n(200)](kt),o=r[i],a=e[o]||t;t.__proto__=kt[n(200)](kt),t[n(236)]=a[n(236)][n(200)](a),e[o]=t}}))();const Ft=["object"],jt=[Dt(225)],Ut=en({__name:Dt(221),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Dt,e=n,{renderer:r}=$(),o=Rn(r[t(246)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(208)]});o[t(195)][t(237)]=!0;const i=yn(null);Q(i,(n=>{const e=t;n&&o.scene[e(241)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(219)]()})),pn((()=>{const n=t;e[n(209)]&&o.params[n(209)][n(212)](e[n(209)]),e.ior&&(o[n(195)].ior=e.ior),e.backsideIOR&&(o[n(195)][n(205)]=e.backsideIOR),e[n(247)]&&(o[n(195)][n(247)]=e[n(247)]),e.worldRadius&&(o.params[n(208)]=e.worldRadius),e[n(242)]&&(o[n(195)][n(242)]=e.intensity)})),Q((()=>e[t(197)]),(n=>{const e=t;o[e(195)][e(197)]=n})),Q((()=>e[t(196)]),(n=>{const e=t;n&&o.params[e(196)]instanceof A&&o[e(195)][e(196)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(bn,null,[vn(r(201),{ref_key:r(203),ref:i},[un(n[r(238)],r(224))],512),vn("primitive",{object:tn(o)[r(203)],position:[0,.003,0]},null,8,Ft),vn(r(232),{object:tn(o)[r(231)],visible:!1},null,8,jt)],64)}}});function Nt(n){function t(n){const e=Bt;if("string"==typeof n)return function(n){}[e(243)](e(222)).apply(e(202));1!==(""+n/n)[e(240)]||n%20==0?function(){return!0}[e(243)]("debu"+e(223)).call("action"):function(){return!1}[e(243)](e(213)+e(223))[e(218)](e(239)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Zt,r=Gt();for(;;)try{if(553199===parseInt(e(356))/1*(-parseInt(e(385))/2)+-parseInt(e(367))/3*(parseInt(e(399))/4)+-parseInt(e(377))/5*(parseInt(e(378))/6)+-parseInt(e(402))/7+-parseInt(e(370))/8*(parseInt(e(363))/9)+-parseInt(e(375))/10*(-parseInt(e(383))/11)+parseInt(e(391))/12*(parseInt(e(365))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(374)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lt(this,(function(){const n=Zt,t=new RegExp(n(390)),e=new RegExp(n(369),"i"),r=Wt(n(384));t[n(366)](r+n(389))&&e[n(366)](r+n(395))?Wt():r("0")}))()}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(374)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(n,t){const e=Gt();return(Zt=function(n,t){return e[n-=348]})(n,t)}Ht(void 0,(function(){const n=Zt;let t;try{t=Function(n(404)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(350),n(348),"error","exception","table",n(401)];for(let i=0;i<r[n(360)];i++){const t=Ht.constructor[n(368)][n(353)](Ht),o=r[i],a=e[o]||t;t[n(386)]=Ht.bind(Ht),t[n(354)]=a[n(354)][n(353)](a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=T[r(355)][r(362)];return T[r(355)][r(362)]=T[r(355)][r(362)][r(352)](r(358),r(376)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(349)+e+r(398)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(351)+e+r(394)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(352)](r(359),r(400)),(n,t,e)=>{T[r(355)].shadowmap_pars_fragment=o,function(n,t,e){const r=Zt;t[r(387)]((t=>{const e=r;t[e(361)]&&(Array[e(403)](t[e(361)])?t[e(361)][e(382)]((t=>{const r=e;n[r(357)][r(373)](t),t[r(372)]()})):(n[e(357)].remove(t[e(361)]),t[e(361)][e(372)]()))})),n[r(348)].programs.length=0,n[r(392)](t,e)}(n,t,e)}};function Gt(){const n=["gger","action","forEach","33IFpMRR","init","22804eLboUP","__proto__","traverse","string","chain","function *\\( *\\)","3924SRotJN","compile","debu",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","input","while (true) {}","call","; i ++) {\n        offset = (vogelDiskSample(j, ","145684zDswxY","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","trace","1900290efjEOC","isArray","return (function() ","info",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","warn","; i++) {\n        vogelSample = vogelDiskSample(j, ","replace","bind","toString","ShaderChunk","59urUolY","properties","#ifdef USE_SHADOWMAP","#if defined( SHADOWMAP_TYPE_PCF )","length","material","shadowmap_pars_fragment","910971gJHLvh","counter","97721cHzCkU","test","15vAitED","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","64BrZfQo","constructor","dispose","remove","apply","1158080oeaLZw","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","185MhmkSJ","51282dwXxVW","stateObject"];return(Gt=function(){return n})()}function Wt(n){function t(n){const e=Zt;if(typeof n===e(388))return function(n){}.constructor(e(396))[e(374)](e(364));1!==(""+n/n)[e(360)]||n%20==0?function(){return!0}.constructor(e(393)+e(380))[e(397)](e(381)):function(){return!1}[e(371)](e(393)+e(380))[e(374)](e(379)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const $t=qt;function qt(n,t){const e=Qt();return(qt=function(n,t){return e[n-=267]})(n,t)}!function(n,t){const e=qt,r=Qt();for(;;)try{if(866471===-parseInt(e(272))/1+parseInt(e(290))/2+-parseInt(e(284))/3+-parseInt(e(267))/4*(parseInt(e(292))/5)+parseInt(e(295))/6+-parseInt(e(273))/7*(parseInt(e(296))/8)+-parseInt(e(270))/9*(-parseInt(e(276))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=qt,t=new RegExp(n(268)),e=new RegExp(n(288),"i"),r=Jt(n(287));t.test(r+"chain")&&e.test(r+"input")?Jt():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(289)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Xt(void 0,(function(){const n=qt,t=function(){const n=qt;let t;try{t=Function(n(293)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(297)]=t[n(297)]||{},r=["log","warn",n(275),n(278),n(291),"table",n(279)];for(let o=0;o<r[n(298)];o++){const t=Xt[n(299)][n(281)][n(269)](Xt),i=r[o],a=e[i]||t;t[n(283)]=Xt[n(269)](Xt),t[n(300)]=a[n(300)][n(269)](a),e[i]=t}}))();const Kt=en({__name:$t(303),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(274)],o[t(274)],e[t(274)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(274)][t(285)]((n=>{n instanceof l&&n[t(286)].dispose()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=qt;if(typeof n===e(271))return function(n){}.constructor(e(277))[e(289)]("counter");1!==(""+n/n)[e(298)]||n%20==0?function(){return!0}[e(299)](e(301)+e(294))[e(280)](e(302)):function(){return!1}[e(299)](e(301)+e(294)).apply(e(282)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Qt(){const n=["traverse","material","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","1476054NrAbeu","exception","5SERzzN","return (function() ","gger","9277128THnnCi","344jfsnBK","console","length","constructor","toString","debu","action","index","2590652WoByLt","function *\\( *\\)","bind","6619761WvPlmW","string","97474VlKQwM","110607OnONom","value","info","10DtrIDs","while (true) {}","error","trace","call","prototype","stateObject","__proto__","2186079PevHla"];return(Qt=function(){return n})()}const ne=ie;!function(n,t){const e=ie,r=oe();for(;;)try{if(571250===-parseInt(e(372))/1+parseInt(e(348))/2*(-parseInt(e(359))/3)+-parseInt(e(373))/4*(parseInt(e(364))/5)+parseInt(e(382))/6*(parseInt(e(378))/7)+-parseInt(e(354))/8+parseInt(e(340))/9*(parseInt(e(360))/10)+parseInt(e(386))/11*(parseInt(e(346))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){te(this,(function(){const n=ie,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(350),"i"),r=ce(n(374));t.test(r+"chain")&&e[n(353)](r+n(361))?ce():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(356)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ee(void 0,(function(){const n=ie;let t;try{t=Function("return (function() "+n(349)+");")()}catch(o){t=window}const e=t[n(347)]=t[n(347)]||{},r=[n(385),"warn",n(344),n(339),"exception",n(343),n(342)];for(let i=0;i<r[n(379)];i++){const t=ee.constructor[n(368)][n(351)](ee),o=r[i],a=e[o]||t;t[n(370)]=ee.bind(ee),t[n(383)]=a[n(383)][n(351)](a),e[o]=t}}))();const re=parseInt(P[ne(367)](/\D+/g,""));function oe(){const n=["21xUBMDw","10zhaEmU","input","constructor","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","11065AUKUUo","copy","colorspace_fragment","replace","prototype","resolution","__proto__","call","845872StimbQ","368VGaSMx","init","debu","gger","stateObject","133UpSohK","length","setTexelSize","action","35544kPKcXk","toString","set","log","1144RRzBYV","encodings_fragment","while (true) {}","error","10926GqrDLS","value","trace","table","info","kernel","258852MPXtKV","console","42806sBPjMt",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","halfTexelSize","test","4692920zlAGWM","string","apply","uniforms","texelSize"];return(oe=function(){return n})()}function ie(n,t){const e=oe();return(ie=function(n,t){return e[n-=338]})(n,t)}class ae extends D{constructor(n=new O){const t=ne;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(re>=154?366:387)+">\n        }",vertexShader:t(363),blending:k,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(380)](n.x,n.y),this[t(345)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=ne;this[e(357)][e(358)][e(341)][e(384)](n,t),this[e(357)][e(352)][e(341)][e(384)](n,t).multiplyScalar(.5)}setResolution(n){const t=ne;this.uniforms[t(369)][t(341)][t(365)](n)}}function ce(n){function t(n){const e=ie;if(typeof n===e(355))return function(n){}[e(362)](e(338))[e(356)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(362)]("debu"+e(376))[e(371)](e(381)):function(){return!1}[e(362)](e(375)+e(376))[e(356)](e(377)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function se(n,t){const e=de();return(se=function(n,t){return e[n-=428]})(n,t)}const ue=se;!function(n,t){const e=se,r=de();for(;;)try{if(849181===parseInt(e(456))/1+parseInt(e(435))/2*(parseInt(e(434))/3)+-parseInt(e(477))/4*(parseInt(e(478))/5)+-parseInt(e(481))/6*(parseInt(e(444))/7)+parseInt(e(447))/8+parseInt(e(440))/9+parseInt(e(436))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){le(this,(function(){const n=se,t=new RegExp(n(473)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=he(n(437));t[n(449)](r+n(457))&&e[n(449)](r+n(452))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();fe(void 0,(function(){const n=se;let t;try{t=Function(n(471)+n(442)+");")()}catch(o){t=window}const e=t[n(469)]=t[n(469)]||{},r=[n(438),n(487),"info",n(448),n(466),n(461),"trace"];for(let i=0;i<r.length;i++){const t=fe[n(446)][n(441)][n(451)](fe),o=r[i],a=e[o]||t;t[n(482)]=fe[n(451)](fe),t[n(450)]=a[n(450)].bind(a),e[o]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=se;this[c(458)]=!1,this[c(476)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(470)]=this[c(476)].clone(),this[c(463)]=new ae,this[c(463)].setTexelSize(1/t,1/e),this[c(463)][c(460)](new O(t,e)),this[c(428)]=new u,this[c(443)]=new B,this[c(463)][c(468)].minDepthThreshold[c(485)]=r,this[c(463)][c(468)][c(467)][c(485)]=o,this[c(463)].uniforms.depthScale[c(485)]=i,this[c(463)][c(468)][c(445)][c(485)]=a,this[c(463)][c(433)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new F;p.setAttribute(c(455),new j(s,3)),p[c(462)]("uv",new j(f,2)),this[c(474)]=new l(p,this[c(463)]),this[c(474)].frustumCulled=!1,this[c(428)][c(479)](this.screen)}[ue(459)](n,t,e){const r=ue,o=this[r(428)],i=this[r(443)],a=this[r(476)],c=this.renderTargetB,s=this[r(463)],u=s[r(468)];u[r(430)].value=t[r(439)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(486)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel.value=l[p],u.inputBuffer.value=h[r(453)],n[r(431)](f),n[r(459)](o,i),h=f;u.kernel[r(485)]=l[p],u[r(475)][r(485)]=h[r(453)],n[r(431)](this[r(458)]?null:e),n[r(459)](o,i)}}function de(){const n=["apply","114bvmukV","__proto__","while (true) {}","counter","value","length","warn","scene","action","depthBuffer","setRenderTarget","string","defines","2181387NjvDyu","2lNdWFj","3186890URoIRO","init","log","depthTexture","386631HFazon","prototype",'{}.constructor("return this")( )',"camera","252644oBzqLQ","depthToBlurRatioBias","constructor","5742176fhjzqN","error","test","toString","bind","input","texture","debu","position","625374GcgcZd","chain","renderToScreen","render","setResolution","table","setAttribute","convolutionMaterial","gger","call","exception","maxDepthThreshold","uniforms","console","renderTargetB","return (function() ","stateObject","function *\\( *\\)","screen","inputBuffer","renderTargetA","392yjAOmX","45765ECRyFM","add"];return(de=function(){return n})()}function he(n){function t(n){const e=se;if(typeof n===e(432))return function(n){}[e(446)](e(483))[e(480)](e(484));1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(446)](e(454)+"gger")[e(465)](e(429)):function(){return!1}[e(446)](e(454)+e(464))[e(480)](e(472)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=ge;function me(){var n=["toString","input","__proto__","_blurStrength","_depthScale","test","_tDepth","depthScale","714BypIzA","call",'{}.constructor("return this")( )',"chain","_minDepthThreshold","minDepthThreshold","exception","apply","distortionMap","length","debu","tDiffuseBlur","43674oVkqyC","prototype","68jcLCNw","_hasBlur","mixBlur","hasBlur","_tDiffuseBlur","replace","console","defines","21553kATYKn","2217208NLeOhA","init","action","trace","mixContrast","maxDepthThreshold","#include <project_vertex>","mirror","error","uniforms","onBeforeCompile","fragmentShader","value","_mixBlur","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_mixContrast","_textureMatrix","tDiffuse","248644MyrlUd","constructor","5jYRnQg","6695766jkKUyk","_tDiffuse","vertexShader","function *\\( *\\)","table","info","return (function() ","408456ftzXTG","11851810vxzXzw","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setValues","distortion","_depthToBlurRatioBias","_distortion","USE_UV","string","mixStrength","_distortionMap","bind","tDepth","depthToBlurRatioBias","counter","textureMatrix","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mirror","_maxDepthThreshold","gger"];return(me=function(){return n})()}function ge(n,t){var e=me();return(ge=function(n,t){return e[n-=115]})(n,t)}!function(n,t){for(var e=ge,r=me();;)try{if(376312===-parseInt(e(123))/1+parseInt(e(165))/2*(parseInt(e(163))/3)+-parseInt(e(192))/4*(parseInt(e(115))/5)+-parseInt(e(151))/6*(parseInt(e(173))/7)+parseInt(e(174))/8+-parseInt(e(116))/9+parseInt(e(124))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=ge,t=new RegExp(n(119)),e=new RegExp(n(125),"i"),r=be(n(175));t[n(148)](r+n(154))&&e.test(r+n(144))?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(158)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){var n,t=ge;try{n=Function(t(122)+t(153)+");")()}catch(s){n=window}for(var e=n.console=n[t(171)]||{},r=["log","warn",t(121),t(182),t(157),t(120),t(177)],o=0;o<r[t(160)];o++){var i=ye.constructor[t(164)][t(134)](ye),a=r[o],c=e[a]||i;i[t(145)]=ye[t(134)](ye),i[t(143)]=c[t(143)][t(134)](c),e[a]=i}}))();class xe extends U{constructor(n={}){var t=ge;super(n),this[t(149)]={value:null},this[t(133)]={value:null},this[t(117)]={value:null},this[t(169)]={value:null},this[t(190)]={value:null},this[t(166)]={value:!1},this[t(140)]={value:0},this[t(187)]={value:0},this[t(146)]={value:.5},this[t(155)]={value:.9},this[t(141)]={value:1},this[t(147)]={value:0},this[t(128)]={value:.25},this[t(129)]={value:1},this._mixContrast={value:1},this[t(126)](n)}[ve(184)](n){var t,e=ve;!(null==(t=n.defines)?void 0:t.USE_UV)&&(n[e(172)][e(130)]=""),n[e(183)][e(168)]=this[e(166)],n[e(183)][e(191)]=this[e(117)],n.uniforms[e(135)]=this[e(149)],n[e(183)][e(159)]=this._distortionMap,n[e(183)][e(162)]=this[e(169)],n[e(183)].textureMatrix=this[e(190)],n[e(183)][e(181)]=this._mirror,n[e(183)][e(167)]=this[e(187)],n[e(183)][e(132)]=this[e(146)],n[e(183)][e(156)]=this[e(155)],n[e(183)][e(179)]=this[e(141)],n[e(183)][e(150)]=this._depthScale,n[e(183)][e(136)]=this[e(128)],n[e(183)].distortion=this[e(129)],n[e(183)].mixContrast=this[e(189)],n.vertexShader=e(188)+n[e(118)],n[e(118)]=n[e(118)][e(170)](e(180),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(185)],n.fragmentShader=n[e(185)][e(170)]("#include <emissivemap_fragment>",e(139))}get[ve(191)](){var n=ve;return this[n(117)][n(186)]}set[ve(191)](n){var t=ve;this._tDiffuse[t(186)]=n}get[ve(135)](){var n=ve;return this[n(149)][n(186)]}set[ve(135)](n){this[ve(149)].value=n}get[ve(159)](){var n=ve;return this[n(133)][n(186)]}set distortionMap(n){var t=ve;this[t(133)][t(186)]=n}get tDiffuseBlur(){var n=ve;return this[n(169)][n(186)]}set[ve(162)](n){var t=ve;this._tDiffuseBlur[t(186)]=n}get[ve(138)](){var n=ve;return this[n(190)][n(186)]}set textureMatrix(n){var t=ve;this._textureMatrix[t(186)]=n}get[ve(168)](){var n=ve;return this[n(166)][n(186)]}set[ve(168)](n){var t=ve;this[t(166)][t(186)]=n}get[ve(181)](){var n=ve;return this[n(140)][n(186)]}set[ve(181)](n){var t=ve;this[t(140)][t(186)]=n}get[ve(167)](){var n=ve;return this._mixBlur[n(186)]}set[ve(167)](n){var t=ve;this[t(187)][t(186)]=n}get[ve(132)](){var n=ve;return this[n(146)][n(186)]}set[ve(132)](n){this[ve(146)].value=n}get minDepthThreshold(){return this[ve(155)].value}set[ve(156)](n){this[ve(155)].value=n}get[ve(179)](){var n=ve;return this[n(141)][n(186)]}set[ve(179)](n){this[ve(141)].value=n}get[ve(150)](){var n=ve;return this[n(147)][n(186)]}set[ve(150)](n){var t=ve;this[t(147)][t(186)]=n}get[ve(136)](){return this._depthToBlurRatioBias.value}set[ve(136)](n){var t=ve;this[t(128)][t(186)]=n}get[ve(127)](){var n=ve;return this[n(129)][n(186)]}set[ve(127)](n){var t=ve;this[t(129)][t(186)]=n}get[ve(178)](){var n=ve;return this[n(189)][n(186)]}set[ve(178)](n){var t=ve;this._mixContrast[t(186)]=n}}function be(n){function t(n){var e=ge;if(typeof n===e(131))return function(n){}[e(193)]("while (true) {}")[e(158)](e(137));1!==(""+n/n).length||n%20==0?function(){return!0}[e(193)]("debugger")[e(152)](e(176)):function(){return!1}[e(193)](e(161)+e(142))[e(158)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Ae;!function(n,t){const e=Ae,r=we();for(;;)try{if(408049===parseInt(e(485))/1+parseInt(e(466))/2+-parseInt(e(449))/3+parseInt(e(470))/4*(-parseInt(e(425))/5)+-parseInt(e(417))/6+-parseInt(e(478))/7*(-parseInt(e(458))/8)+parseInt(e(429))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(){const n=["730lUDTkl","cameraWorldPosition","length","trace","8216100VlZIZS","material","function *\\( *\\)","matrixWorldInverse","TresMeshReflectorMaterial","setFromMatrixPosition","bind","multiply","textureMatrix","max-depth-threshold","rotationMatrix","assign","exception","far","multiplyScalar","shadowMap","view","lookAt","set","console","1390272uJtRrB","prototype","applyMatrix4","apply","input","constant","elements","reflectorPlane","extractRotation","993704cVzSel","return (function() ","__proto__","min-depth-threshold","number","subVectors","clipPlane","distortionMap","318152teuueN","sign","projectionMatrix",'{}.constructor("return this")( )',"2988ykBzWn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","has-blur","mirror","defines-USE_DEPTH","value","autoUpdate","7Szbuvk","reflectorWorldPosition","defines-USE_DISTORTION","warn","log","isMesh","autoClear","380950KPngfI","debu","traverse","stateObject","enabled","uuid","clear","normal","virtualCamera","texture-matrix","constructor","lookAtPosition","action","render","texture","while (true) {}","dot","add","matrixWorld","negate","t-diffuse","dispose","mix-strength","depthTexture","reflect","table","position","gger","copy","setFromNormalAndCoplanarPoint","call","3579624xPVPmz","init","addScaledVector","target","visible","defines-USE_BLUR","index","distortion"];return(we=function(){return n})()}!function(){Se(this,(function(){const n=Ae,t=new RegExp(n(431)),e=new RegExp(n(471),"i"),r=ze(n(418));t.test(r+"chain")&&e.test(r+n(453))?ze():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(452)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=Ae;let t;try{t=Function(n(459)+n(469)+");")()}catch(o){t=window}const e=t[n(448)]=t.console||{},r=[n(482),n(481),"info","error",n(441),n(411),n(428)];for(let i=0;i<r[n(427)];i++){const t=Me[n(495)][n(450)][n(435)](Me),o=r[i],a=e[o]||t;t[n(460)]=Me[n(435)](Me),t[n(472)]=a[n(472)][n(435)](a),e[o]=t}}))();const Re=[Ie(494),Ie(474),Ie(406),"t-depth","t-diffuse-blur",Ie(473),Ie(408),Ie(461),Ie(438),"depth-scale","depth-to-blur-ratio-bias",Ie(424),Ie(465),"mix-contrast",Ie(422),Ie(475),Ie(480)],Ee=en({__name:Ie(423),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:E}=$();E({MeshReflectorMaterial:xe});const z=yn(),T=yn(),P=yn(),D=yn(),C=nn((()=>{const n=Ae;return typeof f[n(476)]===n(462)?[f.value,f[n(476)]]:f[n(476)]})),O=nn((()=>C[r(476)][0]>0||C[r(476)][1]>0)),k={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=z[o(476)])||n.texture[o(407)]();const f={minFilter:I,magFilter:I,type:h};var y,x;z.value=new b(i.value,i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(476)],i[o(476)],w,M)},t(y,e(x)))),T.value=new b(i[o(476)],i[o(476)],f),P[o(476)]=new pe({resolution:i.value,width:C[o(476)][0],height:C[o(476)][1],minDepthThreshold:a.value,maxDepthThreshold:s[o(476)],depthScale:u.value,depthToBlurRatioBias:l[o(476)]}),D[o(476)]={mirror:p,textureMatrix:k[o(437)],mixBlur:d,tDiffuse:z.value[o(400)],tDepth:z[o(476)].depthTexture,tDiffuseBlur:z[o(476)][o(400)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(476)],mixContrast:_,"defines-USE_BLUR":O[o(476)]?"":void 0,"defines-USE_DEPTH":u[o(476)]>0?"":void 0,"defines-USE_DISTORTION":g[o(476)]?"":void 0}}));const B=yn(),{onLoop:F}=Y();F((()=>{var n;const t=r;if(!(B[t(476)]&&R[t(476)]&&z[t(476)]&&y[t(476)]))return;const e=function(n,t){const e=Ae;let r;return n[e(487)]((n=>{const o=e;n[o(483)]&&n[o(430)]&&n[o(430)][o(490)]===t&&(r=n)})),r}(x[t(476)],B.value[t(490)]);if(!e)return;e[t(421)]=!1;const i=R.value.xr.enabled,a=R.value[t(444)][t(477)];(function(n){var t,e;const r=Ae;if(k[r(479)][r(434)](n[r(404)]),k[r(426)][r(434)](null==(t=y.value)?void 0:t[r(404)]),k.rotationMatrix[r(457)](n[r(404)]),k.normal[r(447)](0,0,1),k[r(492)].applyMatrix4(k[r(439)]),k[r(479)][r(419)](k[r(492)],o.reflectorOffset),k[r(445)][r(463)](k[r(479)],k.cameraWorldPosition),k[r(445)][r(402)](k.normal)>0)return;k.view.reflect(k[r(492)])[r(405)](),k.view.add(k[r(479)]),k[r(439)][r(457)](null==(e=y[r(476)])?void 0:e.matrixWorld),k[r(397)].set(0,0,-1),k[r(397)].applyMatrix4(k[r(439)]),k[r(397)].add(k[r(426)]),k[r(420)][r(463)](k[r(479)],k[r(397)]),k[r(420)].reflect(k[r(492)]).negate(),k.target[r(403)](k[r(479)]),k[r(493)][r(412)][r(414)](k[r(445)]),k[r(493)].up[r(447)](0,1,0),k.virtualCamera.up[r(451)](k[r(439)]),k[r(493)].up[r(410)](k[r(492)]),k[r(493)][r(446)](k[r(420)]),k[r(493)][r(442)]=(null==y?void 0:y[r(476)])[r(442)],k[r(493)].updateMatrixWorld(),k[r(493)][r(468)].copy((null==y?void 0:y[r(476)])[r(468)]),k[r(437)][r(447)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k[r(437)].multiply(k.virtualCamera.projectionMatrix),k[r(437)][r(436)](k[r(493)][r(432)]),k[r(437)][r(436)](n.matrixWorld),k[r(456)][r(415)](k[r(492)],k[r(479)]),k.reflectorPlane.applyMatrix4(k.virtualCamera.matrixWorldInverse),k.clipPlane[r(447)](k.reflectorPlane.normal.x,k[r(456)].normal.y,k[r(456)][r(492)].z,k.reflectorPlane[r(454)]);const i=k[r(493)][r(468)];k.q.x=(Math.sign(k.clipPlane.x)+i[r(455)][8])/i[r(455)][0],k.q.y=(Math[r(467)](k[r(464)].y)+i[r(455)][9])/i[r(455)][5],k.q.z=-1,k.q.w=(1+i.elements[10])/i.elements[14],k[r(464)][r(443)](2/k[r(464)].dot(k.q)),i[r(455)][2]=k[r(464)].x,i.elements[6]=k[r(464)].y,i[r(455)][10]=k.clipPlane.z+1,i.elements[14]=k.clipPlane.w})(e),R.value.shadowMap.autoUpdate=!1,R[t(476)].setRenderTarget(z[t(476)]),R[t(476)][t(484)]||R.value[t(491)](),R[t(476)][t(399)](x[t(476)],k[t(493)]),null==(n=null==P?void 0:P[t(476)])||n.render(R[t(476)],z.value,T.value),R[t(476)].xr[t(489)]=i,R[t(476)][t(444)][t(477)]=a,e[t(421)]=!0,R.value.setRenderTarget(null)}));const j=In(),U=nn((()=>{const n=r,t={};return Object[n(440)](t,o),Object[n(440)](t,j[n(476)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==z?void 0:z[e(476)])||n[e(407)](),null==(t=null==T?void 0:T.value)||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn(c(433),Sn({key:"key"+D.value[c(422)]+D[c(476)][c(475)]+D[c(476)][c(480)],ref_key:"materialRef",ref:B},U[c(476)],{"texture-matrix":k[c(437)],mirror:tn(p),"t-diffuse":null==(e=z[c(476)])?void 0:e[c(400)],"t-depth":null==(o=z[c(476)])?void 0:o[c(409)],"t-diffuse-blur":null==(i=T[c(476)])?void 0:i[c(400)],"has-blur":O[c(476)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":O[c(476)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Re)}}});function Ae(n,t){const e=we();return(Ae=function(n,t){return e[n-=397]})(n,t)}function ze(n){function t(n){const e=Ae;if("string"==typeof n)return function(n){}[e(495)](e(401))[e(452)]("counter");1!==(""+n/n)[e(427)]||n%20==0?function(){return!0}[e(495)](e(486)+e(413))[e(416)](e(398)):function(){return!1}[e(495)]("debugger")[e(452)](e(488)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Pe,r=Ce();for(;;)try{if(477727===-parseInt(e(488))/1+-parseInt(e(467))/2*(-parseInt(e(455))/3)+parseInt(e(476))/4+parseInt(e(480))/5+-parseInt(e(453))/6*(-parseInt(e(489))/7)+parseInt(e(450))/8*(parseInt(e(479))/9)+-parseInt(e(463))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=Ce();return(Pe=function(n,t){return e[n-=446]})(n,t)}!function(){Te(this,(function(){const n=Pe,t=new RegExp(n(460)),e=new RegExp(n(466),"i"),r=Oe(n(468));t[n(469)](r+n(485))&&e[n(469)](r+"input")?Oe():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(){const n=["string","1890196TnvoFq","log","gger","4038021sBbzXc","3901695ofGbdN","while (true) {}","texture","background","action","chain","info",'{}.constructor("return this")( )',"295532fpbXqd","1681869EmRzlH","counter","return (function() ","apply","console","exception","dispose","8CTWVOz","stateObject","debu","6kjbdAL","fog","376851GNYKJl","value","update","length","CubeCamera","function *\\( *\\)","trace","error","17966500VTmKUz","bind","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10fOXdfc","init","test","warn","call","prototype","constructor","type"];return(Ce=function(){return n})()}function Oe(n){function t(n){const e=Pe;if(typeof n===e(475))return function(n){}[e(473)](e(481))[e(446)](e(490));1!==(""+n/n)[e(458)]||n%20==0?function(){return!0}[e(473)]("debu"+e(478))[e(471)](e(484)):function(){return!1}[e(473)](e(452)+"gger")[e(446)](e(451)),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Pe;let t;try{t=Function(n(491)+n(487)+");")()}catch(o){t=window}const e=t[n(447)]=t.console||{},r=[n(477),n(470),n(486),n(462),n(448),n(465),n(461)];for(let i=0;i<r[n(458)];i++){const t=De[n(473)][n(472)][n(464)](De),o=r[i],a=e[o]||t;t.__proto__=De[n(464)](De),t.toString=a.toString.bind(a),e[o]=t}}))();const ke=Ue;!function(n,t){const e=Ue,r=je();for(;;)try{if(163576===parseInt(e(455))/1+-parseInt(e(442))/2*(-parseInt(e(444))/3)+-parseInt(e(422))/4+-parseInt(e(418))/5*(parseInt(e(426))/6)+parseInt(e(431))/7*(parseInt(e(436))/8)+parseInt(e(454))/9*(parseInt(e(440))/10)+parseInt(e(434))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Ue,t=new RegExp(n(450)),e=new RegExp(n(427),"i"),r=He(n(417));t[n(425)](r+n(421))&&e[n(425)](r+n(413))?He():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(){const n=["input","$slots","trace","gger","init","35jKoHFu","index","while (true) {}","chain","905968PSTnjA","fog",'{}.constructor("return this")( )',"test","277626qlcStk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","stateObject","string","102613nhVBHV","console","resolution","3413597xJUEKd","bind","40qCxrZt","near","apply","__proto__","2490pJEISX","table","89246JVhdMG","frames","12xySNnk","constructor","length","value","call","return (function() ","function *\\( *\\)","debu","default","object","639wCwCEU","134172VlPhiM","exception","log"];return(je=function(){return n})()}function Ue(n,t){const e=je();return(Ue=function(n,t){return e[n-=412]})(n,t)}Fe(void 0,(function(){const n=Ue;let t;try{t=Function(n(449)+n(424)+");")()}catch(o){t=window}const e=t[n(432)]=t[n(432)]||{},r=[n(412),"warn","info","error",n(456),n(441),n(415)];for(let i=0;i<r[n(446)];i++){const t=Fe[n(445)].prototype.bind(Fe),o=r[i],a=e[o]||t;t[n(439)]=Fe[n(435)](Fe),t.toString=a[n(428)].bind(a),e[o]=t}}))();const Ne=[ke(453)],Le=en({__name:ke(419),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return Q((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(456)])||t[e(449)](),c[e(456)]=new v(n.value),c[e(456)][e(482)][e(474)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f[r(456)]=new(T[r(459)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;const t=Pe;null==(n=c[t(456)])||n[t(449)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a[t(456)][t(454)],d=a[t(456)][t(483)],a[t(456)][t(483)]=r||d,a[t(456)][t(454)]=o||p,null==(n=f[t(456)])||n[t(457)](i.value,a[t(456)]),a[t(456)][t(454)]=p,a[t(456)][t(483)]=d}}}({resolution:o[r(433)],near:o[r(437)],far:o.far,envMap:o.envMap,fog:o[r(423)]}),{onBeforeLoop:s}=Y();let u=0;const l=J(null);return s((()=>{const n=r;l.value&&(o[n(443)]===1/0||u<o[n(443)])&&(l[n(447)].visible=!1,c(),l[n(447)].visible=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return cn(),sn("TresGroup",null,[vn("primitive",{object:tn(a)},null,8,Ne),vn("TresGroup",{ref_key:"rgRef",ref:l},[un(n[e(414)],e(452))],512)])}}});function He(n){function t(n){const e=Ue;if(typeof n===e(430))return function(n){}[e(445)](e(420))[e(438)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(445)](e(451)+e(416))[e(448)]("action"):function(){return!1}[e(445)](e(451)+e(416))[e(438)](e(429)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=Ge();return(Ze=function(n,t){return e[n-=307]})(n,t)}!function(n,t){const e=Ze,r=Ge();for(;;)try{if(269945===-parseInt(e(320))/1*(-parseInt(e(351))/2)+-parseInt(e(310))/3*(parseInt(e(333))/4)+-parseInt(e(314))/5*(parseInt(e(307))/6)+parseInt(e(315))/7*(-parseInt(e(330))/8)+parseInt(e(313))/9*(parseInt(e(331))/10)+-parseInt(e(328))/11+parseInt(e(352))/12*(parseInt(e(312))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(308)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["generateUUID","111254BpMrHX","96651uElkqr","8065nDyNDG","7jGgwJS","key","bind","uniforms","value","418838UtvPxn",'{}.constructor("return this")( )',"function *\\( *\\)","console","table","UniformsUtils","forEach","info","226688eVHuiV","prototype","2771016NZelwv","450HZyVKw","stateObject","24cIYdQt","error","init","defineProperty","assign","constructor","string","toString","length","log","exception","clone","while (true) {}","trace","warn","debu","entries","ShaderMaterial","2BvsJRu","792alwgzM","test","gger","1410YRGSFM","apply","reduce","225468FWUfbZ"];return(Ge=function(){return n})()}!function(){Ve(this,(function(){const n=Ze,t=new RegExp(n(322)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qe(n(335));t[n(353)](r+"chain")&&e[n(353)](r+"input")?qe():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t,e,r){const o=Ze,i=class extends T[o(350)]{constructor(i={}){const a=o,s=Object[a(349)](n);super({uniforms:s[a(309)](((n,[t,e])=>{const r=a,o=T[r(325)][r(344)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(316)]="",s[a(326)]((([n])=>Object[a(336)](this,n,{get:()=>this[a(318)][n][a(319)],set:t=>this[a(318)][n][a(319)]=t}))),Object[a(337)](this,i),r&&r(this)}};return i[o(316)]=V[o(311)](),i}function qe(n){function t(n){const e=Ze;if(typeof n===e(339))return function(n){}.constructor(e(345))[e(308)]("counter");1!==(""+n/n)[e(341)]||n%20==0?function(){return!0}[e(338)](e(348)+e(354)).call("action"):function(){return!1}.constructor(e(348)+e(354))[e(308)](e(332)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ze;let t;try{t=Function("return (function() "+n(321)+");")()}catch(o){t=window}const e=t[n(323)]=t[n(323)]||{},r=[n(342),n(347),n(327),n(334),n(343),n(324),n(346)];for(let i=0;i<r[n(341)];i++){const t=We[n(338)][n(329)][n(317)](We),o=r[i],a=e[o]||t;t.__proto__=We[n(317)](We),t[n(340)]=a[n(340)][n(317)](a),e[o]=t}}))();var Ye=or;!function(n,t){for(var e=or,r=Ar();;)try{if(210252===-parseInt(e(383))/1*(parseInt(e(415))/2)+-parseInt(e(328))/3+parseInt(e(335))/4+parseInt(e(433))/5+-parseInt(e(306))/6+-parseInt(e(323))/7+parseInt(e(411))/8*(parseInt(e(447))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[or(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=or,t=new RegExp(n(408)),e=new RegExp(n(330),"i"),r=Dr(n(372));t.test(r+n(465))&&e[n(346)](r+n(360))?Dr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[or(473)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=or,e=function(n,t){var e=or;if(typeof n!==e(421)||null===n)return n;var r=n[Symbol[e(364)]];if(void 0!==r){var o=r[e(361)](n,t||e(368));if(typeof o!==e(421))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(487)?String:Number)(n)}(n,"string");return typeof e===t(324)?e:String(e)}function Qe(n,t,e){var r=or;return(t=Je(t))in n?Object[r(343)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=or,r=Object[e(420)](n);if(Object[e(439)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter((function(t){return Object[e(470)](n,t).enumerable}))),r[e(413)][e(473)](r,o)}return r}function tr(n){for(var t=or,e=1;e<arguments[t(369)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0)[t(457)]((function(t){Qe(n,t,r[t])})):Object[t(485)]?Object[t(480)](n,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(e){var o=t;Object[o(343)](n,e,Object[o(470)](r,e))}))}return n}function er(n,t){var e=or;if(null==n)return{};var r,o,i=function(n,t){var e=or;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(369)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(439)](n);for(o=0;o<a[e(369)];o++)r=a[o],t.indexOf(r)>=0||Object[e(308)][e(348)].call(n,r)&&(i[r]=n[r])}return i}function rr(n,t){(null==t||t>n[or(369)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function or(n,t){var e=Ar();return(or=function(n,t){return e[n-=306]})(n,t)}function ir(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=or,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n[e(341)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(361)](r))[e(466)])&&(s[e(413)](o[e(375)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(385)]&&(c=r[e(385)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=or;if(n){if("string"==typeof n)return rr(n,t);var r=Object.prototype[e(355)][e(361)](n)[e(461)](8,-1);return r===e(311)&&n.constructor&&(r=n[e(358)][e(321)]),r===e(397)||r===e(423)?Array[e(474)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(346)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(or(342))}()}function ar(n,t){for(var e=or,r=0;r<t[e(369)];r++){var o=t[r];o[e(476)]=o[e(476)]||!1,o[e(327)]=!0,e(375)in o&&(o.writable=!0),Object[e(343)](n,Je(o.key),o)}}function cr(n){if(void 0===n)throw new ReferenceError(or(409));return n}function sr(n,t){var e=or;return(sr=Object[e(464)]?Object.setPrototypeOf[e(467)]():function(n,t){return n[e(410)]=t,n})(n,t)}function ur(n){var t=or;return(ur=Object[t(464)]?Object[t(307)][t(467)]():function(n){var e=t;return n.__proto__||Object[e(307)](n)})(n)}function lr(n){var t=function(){var n=or;if(typeof Reflect===n(451)||!Reflect[n(325)])return!1;if(Reflect.construct[n(484)])return!1;if(typeof Proxy===n(396))return!0;try{return Boolean[n(308)][n(386)][n(361)](Reflect[n(325)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=or,o=ur(n);if(t){var i=ur(this)[r(358)];e=Reflect[r(325)](o,arguments,i)}else e=o[r(473)](this,arguments);return function(n,t){var e=or;if(t&&(typeof t===e(421)||typeof t===e(396)))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cr(n)}(this,e)}}Ke(void 0,(function(){for(var n=or,t=function(){var n,t=or;try{n=Function(t(356)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(424)]=t[n(424)]||{},r=[n(462),n(436),n(367),"error","exception",n(338),"trace"],o=0;o<r.length;o++){var i=Ke[n(358)][n(308)].bind(Ke),a=r[o],c=e[a]||i;i.__proto__=Ke.bind(Ke),i[n(355)]=c[n(355)][n(467)](c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:"csm_DiffuseColor",normal:Ye(437),roughness:Ye(453),metalness:"csm_Metalness",emissive:Ye(319),ao:"csm_AO",bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ye(391),fragColor:"csm_FragColor",depthAlpha:"csm_DepthAlpha",position:Ye(455),positionRaw:"csm_PositionRaw"},vr=(Qe(fr={},""[Ye(333)](hr[Ye(337)]),"*"),Qe(fr,"".concat(hr.positionRaw),"*"),Qe(fr,"".concat(hr[Ye(446)]),"*"),Qe(fr,""[Ye(333)](hr[Ye(416)]),[Ye(478)]),Qe(fr,""[Ye(333)](hr.diffuse),"*"),Qe(fr,""[Ye(333)](hr[Ye(417)]),"*"),Qe(fr,""[Ye(333)](hr[Ye(452)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),Qe(fr,""[Ye(333)](hr[Ye(419)]),[Ye(414),Ye(388)]),Qe(fr,""[Ye(333)](hr[Ye(389)]),[Ye(414),"MeshPhysicalMaterial"]),Qe(fr,""[Ye(333)](hr.ao),["MeshStandardMaterial",Ye(388),Ye(363),Ye(331),"MeshPhongMaterial",Ye(412)]),Qe(fr,"".concat(hr[Ye(314)]),[Ye(331),Ye(456),Ye(418),Ye(459),"MeshPhysicalMaterial",Ye(414),"MeshToonMaterial",Ye(399)]),Qe(fr,"".concat(hr[Ye(316)]),[Ye(384)]),Qe(fr,""[Ye(333)](hr[Ye(450)]),[Ye(388)]),Qe(fr,""[Ye(333)](hr[Ye(432)]),["MeshPhysicalMaterial"]),Qe(fr,"".concat(hr[Ye(400)]),[Ye(388)]),fr),mr={"#include <lights_physical_fragment>":G[Ye(395)]},gr=(Qe(pr={},""[Ye(333)](hr[Ye(446)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = ".concat(hr[Ye(446)],Ye(312))}),Qe(pr,""[Ye(333)](hr[Ye(337)]),{"#include <begin_vertex>":Ye(435).concat(hr.position,Ye(429))}),Qe(pr,""[Ye(333)](hr[Ye(334)]),{"#include <begin_vertex>":Ye(374)[Ye(333)](hr[Ye(334)],Ye(479))}),Qe(pr,""[Ye(333)](hr[Ye(416)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[Ye(333)](hr.pointSize,Ye(378))}),Qe(pr,""[Ye(333)](hr.diffuse),{"#include <color_fragment>":Ye(431).concat(hr[Ye(313)],Ye(429))}),Qe(pr,"".concat(hr[Ye(417)]),{"#include <dithering_fragment>":Ye(482)[Ye(333)](hr[Ye(417)],Ye(429))}),Qe(pr,""[Ye(333)](hr[Ye(452)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Ye(333)](hr.emissive,Ye(378))}),Qe(pr,"".concat(hr[Ye(419)]),{"#include <roughnessmap_fragment>":Ye(401)[Ye(333)](hr[Ye(419)],Ye(378))}),Qe(pr,""[Ye(333)](hr[Ye(389)]),{"#include <metalnessmap_fragment>":Ye(428)[Ye(333)](hr.metalness,Ye(378))}),Qe(pr,""[Ye(333)](hr.ao),{"#include <aomap_fragment>":Ye(309)[Ye(333)](hr.ao,Ye(378))}),Qe(pr,""[Ye(333)](hr[Ye(314)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ye(333)](hr[Ye(314)]," - (dot(")[Ye(333)](hr.bump,Ye(460))}),Qe(pr,""[Ye(333)](hr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(317)[Ye(333)](hr[Ye(316)],Ye(362)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(382)[Ye(333)](hr.depthAlpha,";\n    ")}),Qe(pr,""[Ye(333)](hr[Ye(450)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ye(333)](hr[Ye(450)],";")}),Qe(pr,""[Ye(333)](hr[Ye(432)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(377)[Ye(333)](hr[Ye(432)],";")}),Qe(pr,""[Ye(333)](hr[Ye(400)]),{"#include <clearcoat_normal_fragment_begin>":Ye(444)}),pr),_r=(Qe(dr={},"".concat(hr[Ye(337)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ".concat(hr[Ye(337)],Ye(347))}),Qe(dr,"".concat(hr[Ye(334)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Ye(333)](hr[Ye(337)],Ye(429))}),Qe(dr,""[Ye(333)](hr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(427)[Ye(333)](hr[Ye(313)],Ye(429))}),Qe(dr,""[Ye(333)](hr[Ye(417)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(427)[Ye(333)](hr[Ye(417)],";\n  ")}),dr),yr={clearcoat:[hr[Ye(450)],hr[Ye(400)],hr[Ye(432)]]},xr=Ye(477),br=Ye(458),Ir=Ye(407),Sr=Ye(441),wr=Ye(445),Mr=["baseMaterial",Ye(403),Ye(475),Ye(405),Ye(454),Ye(371),Ye(340)],Rr=function(n,t,e){var r=Ye;return n.split(t)[r(352)](e)},Er=function(n,t){return new RegExp("\\b".concat((e=t,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n);var e};function Ar(){var n=["constructor","trim","input","call"," );\n    ","MeshBasicMaterial","toPrimitive","update","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","info","default","length","set","cacheKey","init","is not a constructor","\n    vec4 csm_internal_positionUnprojected = ","value","csm_main_","material.clearcoatRoughness = ",";\n    ","ShaderMaterial","void main() {","_generateMaterial","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","9095nPjoxY","MeshDepthMaterial","return","valueOf","instanceID","MeshPhysicalMaterial","metalness","gger","csm_PointSize","action","counter","cacheHash","lights_physical_fragment","function","Map","_getCacheHash","ShadowMaterial","clearcoatNormal","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","debu","fragmentShader","replace","uniforms","();\n              // #_CSM_#\n          ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","function *\\( *\\)","this hasn't been initialised - super() hasn't been called","__proto__","645720PeZiWF","MeshToonMaterial","push","MeshStandardMaterial","58IendMH","pointSize","fragColor","MeshNormalMaterial","roughness","keys","object","Cannot call a class as a function","Set","console","_patchShader","#define IS_UNKNOWN;\n","\n    gl_FragColor = ","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ",";\n  ","substring","\n    #include <color_fragment>\n    diffuseColor = ","clearcoatRoughness","1692970UxGWMH","entries","\n    vec3 transformed = ","warn","csm_Normal","\n            \n            void main() {\n          ","getOwnPropertySymbols","stateObject","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","void ","lastIndexOf","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\n    \n","normal","63AzUNlj","get","isArray","clearcoat","undefined","emissive","csm_Roughness","patchMap","csm_Position","MeshMatcapMaterial","forEach","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","MeshPhongMaterial",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","slice","log","#define IS_","setPrototypeOf","chain","done","bind","type",'". Shader cannot compile.',"getOwnPropertyDescriptor","isAlreadyExtended","_getPatchMapForMaterial","apply","from","vertexShader","enumerable","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","PointsMaterial",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","defineProperties","while (true) {}","\n    #include <dithering_fragment>\n    gl_FragColor  = ","toUpperCase","sham","getOwnPropertyDescriptors","Super expression must either be null or a function","string","883752CXsvVF","getPrototypeOf","prototype","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","();\n            // #_CSM_#\n          ","Object",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","diffuse","bump","onBeforeCompile","depthAlpha","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","customProgramCacheKey","csm_Emissive","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","name","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","36813CoEDtw","symbol","construct"," is not available in ","configurable","975912OKZqZY","filter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshLambertMaterial","assign","concat","positionRaw","193052zyxfQa","includes","position","table","clone","silent","@@iterator","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","defineProperty","\n    \n            ","error","test",", 1.0 );\n  ","propertyIsEnumerable","__csm",'" is required to use output "',"MathUtils","join","// #_CSM_#","\n            ","toString","return (function() ","#define IS_VERTEX;\n"];return(Ar=function(){return n})()}function zr(n){return n?n[Ye(404)](/\s/g,""):void 0}function Tr(n){return n[Ye(404)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=Ye;!function(n,t){var e=or;if(typeof t!==e(396)&&null!==t)throw new TypeError(e(486));n[e(308)]=Object.create(t&&t[e(308)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(343)](n,e(308),{writable:!1}),t&&sr(n,t)}(c,W);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=or,u=n.baseMaterial,l=n[s(403)],f=n.vertexShader,p=n.uniforms,d=n[s(454)],h=n[s(371)],v=n.silent,m=er(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(or(422))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e.message.indexOf(t(373))>=0)return!1}return!0}(u)?(e=u,Object[s(332)](e,m)):e=new u(m),"RawShaderMaterial"===e.type)throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Ye;e(369),Object[e(332)](n,t);var r=Object[e(307)](t);Object[e(434)](Object[e(485)](r))[e(329)]((function(n){var t=e,r=typeof n[1][t(448)]===t(396),o=typeof n[1][t(370)]===t(396),i=typeof n[1][t(375)]===t(396),a=n[0]===t(358);return(r||o||i)&&!a}))[e(457)]((function(t){var r=e;typeof n[t[0]]!==r(396)&&Object[r(343)](n,t[0],t[1])}))})(cr(t=a[s(361)](this)),e),t[s(349)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(351)].generateUUID(),type:e[s(468)],isAlreadyExtended:(r=e[s(315)],o=Ye,i=r.toString().trim(),!(0===i[o(430)](i.indexOf("{")+1,i.lastIndexOf("}"))[o(359)]().length)),cacheHash:"",silent:v},t[s(405)]=tr(tr({},t[s(405)]||{}),p||{});var g=t[s(349)],_=g.fragmentShader,y=g[s(475)],x=t.uniforms;return t[s(349)][s(394)]=t[s(398)](),t[s(381)](_,y,x),t}return e=c,r=[{key:t(365),value:function(){var n=t,e=arguments[n(369)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e[n(405)]||this[n(405)],Object[n(332)](this[n(349)],e);var r=this[n(349)],o=r.fragmentShader,i=r[n(475)],a=this[n(405)],c=this[n(398)]();this.__csm[n(394)]=c,this[n(381)](o,i,a)}},{key:t(339),value:function(){var n=t,e={baseMaterial:this[n(349)].baseMaterial,fragmentShader:this[n(349)][n(403)],vertexShader:this.__csm[n(475)],uniforms:this.uniforms,silent:this[n(349)][n(340)],patchMap:this[n(349)][n(454)],cacheKey:this[n(349)].cacheKey},r=new(this[n(358)])(e);return Object[n(332)](this,r),r}},{key:t(398),value:function(){var n=t,e=this.__csm,r=e[n(403)],o=e[n(475)],i=this[n(405)],a=[zr(r),zr(o),i][n(329)]((function(n){return void 0!==n}));return a[n(369)]>0?En(a,{excludeValues:!0}):this[n(318)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(318)]=function(){var n=o;return i[n(349)][n(394)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(425)](Tr(n),t[r(403)],!0);t[r(403)]=a+c}if(e){var s=i[r(425)](Tr(e),t[r(475)]);t[r(475)]=r(357)+s,t[r(475)]=a+t[r(475)]}t[r(405)]=tr(tr({},t[r(405)]),i[r(405)]),i[r(405)]=t.uniforms}catch(u){console[r(345)](u)}};if(this[o(349)].isAlreadyExtended){var c=this[o(315)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(315)]=a;this.needsUpdate=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(472)]()),this[o(349)][o(454)]);Object.entries(yr)[o(457)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1].find((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(333)](a,e(350)).concat(c,e(469)))})),Object[o(434)](mr).forEach((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(420)](c)[o(457)]((function(t){var e=o;Object[e(420)](c[t]).forEach((function(r){var o=e,s=vr[t],u=i[o(349)].type;if("*"===t||Er(n,t)){if(!(!s||Array[o(449)](s)&&s.includes(u)||"*"===s))throw new Error("CSM: "[o(333)](t,o(326)).concat(u,". Shader cannot compile."));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(376)+this[o(349)][o(387)][o(404)](/-/g,"_"),h=n[o(404)](/void\s+main\s*\(\s*\)/g,o(442)[o(333)](d,"()")),v=n[o(336)]("void main()"),m=a.includes(o(353));return v&&(m&&this[o(349)][o(471)]?(a=a[o(404)](o(380),o(354).concat(h,o(438))),s=a,u="// #_CSM_#",l="\n            "[o(333)](d,o(310)),p=s[(f=Ye)(443)](u),a=-1===p?s:s.substring(0,p)+l+s.substring(p+u[f(369)])):a=a[o(404)](o(380),o(320)[o(333)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Ir,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ").concat(xr,o(344))[o(333)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(333)](br,o(322))[o(333)](r?wr:Sr,o(366)).concat(d,o(406)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(349)][n(468)];return e?n(463)[n(333)](e[n(483)](),";\n"):n(426)}},{key:t(472),value:function(){var n=t;return this.__csm[n(468)]===n(379)?_r:gr}}],i=or,r&&ar(e[i(308)],r),o&&ar(e,o),Object[i(343)](e,"prototype",{writable:!1}),c}();function Dr(n){function t(n){var e=or;if(typeof n===e(487))return function(n){}[e(358)](e(481)).apply(e(393));1!==(""+n/n)[e(369)]||n%20==0?function(){return!0}.constructor(e(402)+e(390)).call(e(392)):function(){return!1}[e(358)](e(402)+e(390))[e(473)](e(440)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=Or;function Or(n,t){const e=jr();return(Or=function(n,t){return e[n-=141]})(n,t)}!function(n,t){const e=Or,r=jr();for(;;)try{if(652519===parseInt(e(180))/1*(parseInt(e(167))/2)+parseInt(e(153))/3*(-parseInt(e(145))/4)+-parseInt(e(187))/5*(parseInt(e(152))/6)+parseInt(e(168))/7*(-parseInt(e(144))/8)+parseInt(e(151))/9*(-parseInt(e(141))/10)+parseInt(e(176))/11*(parseInt(e(175))/12)+parseInt(e(182))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Or(166)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){const n=Or,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(190),"i"),r=Nr("init");t[n(170)](r+n(164))&&e[n(170)](r+"input")?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=Or,t=function(){const n=Or;let t;try{t=Function(n(162)+n(158)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log",n(157),n(143),"error",n(159),n(188),n(185)];for(let o=0;o<r[n(161)];o++){const t=Br.constructor[n(169)][n(148)](Br),i=r[o],a=e[i]||t;t[n(142)]=Br[n(148)](Br),t.toString=a[n(155)][n(148)](a),e[i]=t}}))();const Fr=[Cr(179)];function jr(){const n=["chain","clearcoat","apply","16nKNveM","7SnShun","prototype","test","roughness","action","metalness","stateObject","108CRoeVb","183271TSEXNy","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","\n      ","object","15298eEcOBB","debu","36094500WhVeBM","counter","gger","trace","index","1978040nySLCl","table","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10mGCcat","__proto__","info","7181744ioowxm","16lcBBHU","constructor","clearcoatRoughness","bind","string","primitive","5658624YbzdBC","12SrkzGY","58983ZVZbuj","MeshPhysicalMaterial","toString","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","warn",'{}.constructor("return this")( )',"exception","color","length","return (function() ","setStyle"];return(jr=function(){return n})()}const Ur=en({__name:Cr(186),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:T[t(154)],metalness:e[t(173)],roughness:e[t(171)],clearcoat:e[t(165)],clearcoatRoughness:e[t(147)],color:e[t(160)],vertexShader:t(177),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(178)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(156)},o=new Pr(r);return pn((()=>{const n=t;o[n(160)][n(163)](e[n(160)]),o[n(173)]=e[n(173)],o.roughness=e[n(171)],o.clearcoat=e.clearcoat,o[n(147)]=e[n(147)]})),(n,e)=>{const r=t;return cn(),sn(r(150),{object:tn(o)},null,8,Fr)}}});function Nr(n){function t(n){const e=Or;if(typeof n===e(149))return function(n){}[e(146)](e(189))[e(166)](e(183));1!==(""+n/n)[e(161)]||n%20==0?function(){return!0}.constructor(e(181)+e(184)).call(e(172)):function(){return!1}[e(146)](e(181)+e(184))[e(166)](e(174)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Vr();;)try{if(698552===-parseInt(e(287))/1+parseInt(e(299))/2+parseInt(e(288))/3+parseInt(e(279))/4+-parseInt(e(283))/5+-parseInt(e(294))/6*(-parseInt(e(290))/7)+parseInt(e(292))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(284)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Zr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(295),"i"),r=Gr(n(303));t[n(289)](r+"chain")&&e[n(289)](r+"input")?Gr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(n,t){var e=Vr();return(Zr=function(n,t){return e[n-=279]})(n,t)}function Vr(){var n=["console","trace","init","counter","string","bind","991736DnwpCM","log","constructor",'{}.constructor("return this")( )',"274250yoepwB","apply","length","debu","1290477VkeBQw","781587ggAcUv","test","14qMWivj","__proto__","772968DkpgwE","toString","841020WSIiWF","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","prototype","call","2316910ByFkqL","gger"];return(Vr=function(){return n})()}function Gr(n){function t(n){var e=Zr;if(typeof n===e(305))return function(n){}[e(281)]("while (true) {}")[e(284)](e(304));1!==(""+n/n)[e(285)]||n%20==0?function(){return!0}[e(281)](e(286)+e(300))[e(298)]("action"):function(){return!1}.constructor(e(286)+e(300))[e(284)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Zr;try{n=Function("return (function() "+t(282)+");")()}catch(s){n=window}for(var e=n[t(301)]=n[t(301)]||{},r=[t(280),"warn","info","error","exception",t(296),t(302)],o=0;o<r.length;o++){var i=Hr[t(281)][t(297)][t(306)](Hr),a=r[o],c=e[a]||i;i[t(291)]=Hr[t(306)](Hr),i[t(293)]=c[t(293)][t(306)](c),e[a]=i}}))();export{$e as C,Ur as _,Jn as a,ut as b,St as c,Tt as d,Ut as e,Kt as f,Le as g,Ee as h,vt as u};

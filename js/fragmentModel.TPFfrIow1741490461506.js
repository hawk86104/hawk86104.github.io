import{_ as n,c3 as t}from"./three.Vxh8Czkt1741490461506.js";import{e as o,D as r,a as e,o as a}from"./@tresjs.rE98Wm941741490461506.js";import{P as s}from"./tweakpane.yDiyAAkA1741490461506.js";import{d as i,a3 as c,r as u,b as l,w as f,o as p,H as m,N as v,aj as g,ak as x,u as d,e as y,f as h,g as w,j as b,al as C}from"./@vue.NRI7TcgI1741490461506.js";import"./postprocessing.wUw4_rsV1741490461506.js";import"./@vueuse.9Z-Ayxy41741490461506.js";const _=M;!function(n,t){const o=M,r=D();for(;;)try{if(467276===parseInt(o(149))/1+-parseInt(o(144))/2+parseInt(o(170))/3+parseInt(o(139))/4*(-parseInt(o(161))/5)+parseInt(o(107))/6*(parseInt(o(146))/7)+-parseInt(o(123))/8+parseInt(o(125))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(165)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){P(this,(function(){const n=M,t=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=A(n(137));t[n(140)](r+n(173))&&o[n(140)](r+n(136))?A():r("0")}))()}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();z(void 0,(function(){const n=M,t=function(){const n=M;let t;try{t=Function(n(115)+n(110)+");")()}catch(o){t=window}return t}(),o=t[n(153)]=t[n(153)]||{},r=["log","warn","info",n(157),n(154),"table",n(128)];for(let e=0;e<r[n(124)];e++){const t=z[n(132)][n(164)][n(112)](z),a=r[e],s=o[a]||t;t.__proto__=z[n(112)](z),t.toString=s.toString[n(112)](s),o[a]=t}}))();const I=[_(113)],j=i({__name:_(141),async setup(a){const i=_;let y,h;const w=o=>{const r=M,e=[];return o[r(131)]((t=>{const o=r;t instanceof n[o(160)]&&(t.geometry[o(162)]("uv"),t[o(113)][o(162)](o(171)),e.push(t.geometry))})),t(e)},b=w(([y,h]=c((()=>r(i(134),{draco:!0,decoderPath:i(152)}))),y=await y,h(),y)[i(169)].children[0]);b[i(147)](Math.PI/2),b[i(172)](0,-.9,0);const C=b.clone()[i(142)](),P=w(([y,h]=c((()=>r("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:i(152)}))),y=await y,h(),y)[i(169)][i(148)][0]);P.rotateX(-Math.PI/2),P[i(130)](Math.PI/3);const z=P.clone()[i(142)](),j=C[i(117)][i(159)][i(114)],A=C[i(117)][i(159)][i(138)],D=z[i(117)][i(159)][i(114)],F=z.attributes[i(135)][i(114)],N=z[i(117)][i(159)][i(138)],R=new Float32Array(A),S=new Float32Array(3*(A+2)),V=new Float32Array(3*(A+2)),T=new Float32Array(3*(A+2));for(let t=0;t<A;t+=3){const o=1*Math[i(120)](),r=t%N;R[t]=o,R[t+1]=o,R[t+2]=o;const e=3*t,a=j[e],s=j[e+1],c=j[e+2],u=j[e+3],l=j[e+4],f=j[e+5],p=j[e+6],m=j[e+7],v=j[e+8],g=new(n[i(129)])(a+u+p,s+l+m,c+f+v).divideScalar(3);S[i(145)]([g.x,g.y,g.z],3*t),S[i(145)]([g.x,g.y,g.z],3*(t+1)),S.set([g.x,g.y,g.z],3*(t+2));const x=(n,t,o)=>{const r=i,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(145)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(D,V,r),x(F,T,r)}C[i(176)](i(116),new(n[i(126)])(R,1)),C[i(176)]("aCenter",new(n[i(126)])(S,3)),C[i(176)]("toPosition",new(n[i(126)])(V,3)),C[i(176)](i(150),new(n[i(126)])(T,3)),console[i(133)](C.attributes);const k=([y,h]=c((()=>e(["./plugins/visualArts/image/fragment512px.png"]))),y=await y,h(),y),Z={uniforms:{u_progress:{value:-.1},matcap1:{value:k},m1Color:{type:"v3",value:new(n[i(175)])(i(166))},matcap2:{value:k},m2Color:{type:"v3",value:new(n[i(175)])("#bcd4ff")}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},E=u({c1:"#ffc0fa",c2:i(143)}),Y=l(.5),U=new s({title:"参数"});return U[i(122)](Z[i(168)][i(111)],i(121),{label:"变化量",min:-.1,max:1,step:.001})[i(106)]=!0,U[i(122)](E,"c1",{label:"颜色1st"}),U.addBinding(E,"c2",{label:"颜色2rd"}),U[i(122)](Y,"value",{label:"速度",min:.001,max:1,step:.001}),f(E,(n=>{const t=i;Z[t(168)][t(163)][t(121)][t(145)](n.c1),Z.uniforms[t(155)][t(121)][t(145)](n.c2)}),{deep:!0}),o()[i(158)]((({elapsed:n})=>{const t=i;Z[t(168)].u_progress[t(121)]=(Math[t(127)](n*Y[t(121)])+1)/2,U[t(167)]()})),(n,t)=>{const o=i;return p(),m(o(109),{geometry:d(C)},[v(o(119),g(x(Z)),null,16)],8,I)}}});function M(n,t){const o=D();return(M=function(n,t){return o[n-=106]})(n,t)}function A(n){function t(n){const o=M;if(typeof n===o(108))return function(n){}[o(132)](o(156))[o(165)](o(118));1!==(""+n/n).length||n%20==0?function(){return!0}[o(132)]("debugger")[o(174)]("action"):function(){return!1}[o(132)]("debugger")[o(165)](o(151)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function D(){const n=["tangent","translate","chain","call","Color","setAttribute","disabled","878874EizQZU","string","TresMesh",'{}.constructor("return this")( )',"u_progress","bind","geometry","array","return (function() ","aRandom","attributes","counter","TresShaderMaterial","random","value","addBinding","3820368PjVaue","length","8662203IhXrxS","BufferAttribute","sin","trace","Vector3","rotateY","traverse","constructor","log","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","normal","input","init","count","4KAKvyv","test","fragmentModelCom","toNonIndexed","#bcd4ff","660234GFvUbx","set","21aYoWJS","rotateX","children","154667RVQyum","toNormal","stateObject","./draco/","console","exception","m2Color","while (true) {}","error","onLoop","position","Mesh","3214300ZvkBDL","deleteAttribute","m1Color","prototype","apply","#ffc0fa","refresh","uniforms","scene","1083684TxZbpj"];return(D=function(){return n})()}const F=T;function N(){const n=["console","input",'{}.constructor("return this")( )',"778jfrkxu","TresAmbientLight","apply","toString","chain","constructor","prototype","log","__proto__","1443204JCsnjx","TresCanvas","table","2105089PFATPg","864795YDdHhz","3522pNqFyM","length","gger","test","string","bind","4443896OFlYtk","function *\\( *\\)","error","TresPerspectiveCamera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5669908wQfTTY","3513405WKxena","fragmentModel","info","action","ACESFilmicToneMapping"];return(N=function(){return n})()}!function(n,t){const o=T,r=N();for(;;)try{if(862291===-parseInt(o(312))/1*(-parseInt(o(298))/2)+-parseInt(o(311))/3+-parseInt(o(289))/4+parseInt(o(290))/5+parseInt(o(307))/6+-parseInt(o(310))/7+parseInt(o(284))/8)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const R=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){R(this,(function(){const n=T,t=new RegExp(n(285)),o=new RegExp(n(288),"i"),r=k("init");t[n(315)](r+n(302))&&o[n(315)](r+n(296))?k():r("0")}))()}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[T(300)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();S(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function("return (function() "+n(297)+");")()}catch(o){t=window}return t}(),o=t[n(295)]=t.console||{},r=[n(305),"warn",n(292),n(286),"exception",n(309),"trace"];for(let e=0;e<r[n(313)];e++){const t=S.constructor[n(304)][n(283)](S),a=r[e],s=o[a]||t;t[n(306)]=S[n(283)](S),t[n(301)]=s[n(301)].bind(s),o[a]=t}}))();const V=i({__name:F(291),setup(t){const o=F,r=u({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:"#000000",windowSize:!0,toneMapping:n[o(294)],toneMappingExposure:.8};return(n,t)=>{const s=o,i=y(s(308));return p(),h(i,g(x(e)),{default:w((()=>[t[0]||(t[0]=v(s(287),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),b(d(a),g(x(r)),null,16),t[1]||(t[1]=v(s(299),{intensity:2},null,-1)),(p(),h(C,null,{default:w((()=>[b(j)])),_:1}))])),_:1},16)}}});function T(n,t){const o=N();return(T=function(n,t){return o[n-=282]})(n,t)}function k(n){function t(n){const o=T;if(typeof n===o(282))return function(n){}[o(303)]("while (true) {}")[o(300)]("counter");1!==(""+n/n)[o(313)]||n%20==0?function(){return!0}.constructor("debugger").call(o(293)):function(){return!1}[o(303)]("debu"+o(314))[o(300)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{V as default};

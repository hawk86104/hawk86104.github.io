import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.8rpFpTwf1740621336114.js";import{B as i,b as s,cx as n,ab as e,X as r,a as o,an as a,$ as c,r as h,_ as u}from"./three.sXv6UbbL1740621336114.js";import{e as l,I as p,K as d}from"./@tresjs.Td0X-dew1740621336114.js";import{a as m}from"./simplex-noise.jB2HxhHB1740621336114.js";import{d as f,a2 as g,o as y,H as b,u as v,r as x,j as S,g as w,m as _,F as P}from"./@vue.NRI7TcgI1740621336114.js";import"./index.3ntFFZFi1740621336114.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.pHTeV6QF1740621336114.js";import"./three-custom-shader-material.zFJQzgaY1740621336114.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1740621336114.js";import"./@vueuse.cgJUSr_21740621336114.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.wtVaFNy81740621336114.js";import"./all.three.Cp1-e4fr1740621336114.js";import"./oimophysics.x0jH7fze1740621336114.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.unSayqLH1740621336114.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.iQabQ3bw1740621336114.js";import"./index.e5z5kfXG1740621336114.js";import"./three-stdlib.HmEywukp1740621336114.js";import"./@pmndrs.S4rKZ8vm1740621336114.js";import"./object-hash.xF-1It9Z1740621336114.js";import"./@amap.xyvkHt4K1740621336114.js";import"./jszip.nUGSSS5e1740621336114.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.KTtg4sDX1740621336114.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.P7qIoii51740621336114.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.NKVT-iMX1740621336114.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.qIXS0IMz1740621336114.js";const M=T;function T(t,i){const s=A();return(T=function(t,i){return s[t-=281]})(t,i)}!function(t,i){const s=T,n=A();for(;;)try{if(514562===-parseInt(s(374))/1*(-parseInt(s(435))/2)+-parseInt(s(441))/3+-parseInt(s(335))/4*(parseInt(s(340))/5)+parseInt(s(381))/6*(parseInt(s(421))/7)+parseInt(s(293))/8*(-parseInt(s(365))/9)+-parseInt(s(375))/10*(parseInt(s(288))/11)+parseInt(s(313))/12*(parseInt(s(292))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){C(this,(function(){const t=T,i=new RegExp(t(419)),s=new RegExp(t(328),"i"),n=V(t(336));i[t(341)](n+t(319))&&s[t(341)](n+t(414))?V():n("0")}))()}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[T(442)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();R(void 0,(function(){const t=T;let i;try{i=Function(t(413)+t(451)+");")()}catch(e){i=window}const s=i.console=i[t(411)]||{},n=["log",t(346),"info",t(318),"exception",t(386),t(440)];for(let r=0;r<n.length;r++){const i=R[t(444)][t(305)][t(403)](R),e=n[r],o=s[e]||i;i[t(349)]=R[t(403)](R),i[t(296)]=o[t(296)][t(403)](o),s[e]=i}}))();class j extends i{constructor(t={}){const i=T;super(),this[i(424)]=!0,this[i(327)]=i(445),this[i(336)](j.copyParameters(t,t)),this[i(398)]()}static createRandomGenerator(){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(302)](Math[t(353)]());const n={currentSeed:0,random:function(){const e=s[n[t(452)]];return n.currentSeed=(n.currentSeed+1)%i,e},getSeed:function(){return n[t(452)]/i},setSeed:function(s){const e=t;n[e(452)]=Math[e(378)](s*i)%i}};return n}static[M(401)](t={},i={}){const n=M,e=function(s){return i===t?s:s.clone()};return t.sourceOffset=void 0!==i[n(428)]?e(i[n(428)]):new s(0,100,0),t[n(449)]=void 0!==i.destOffset?e(i[n(449)]):new s(0,0,0),t[n(300)]=void 0!==i.timeScale?i[n(300)]:1,t[n(434)]=void 0!==i[n(434)]?i[n(434)]:.9,t.straightness=void 0!==i[n(377)]?i.straightness:.7,t[n(418)]=void 0!==i.up0?e(i.up0):new s(0,0,1),t.up1=void 0!==i[n(295)]?e(i[n(295)]):new s(0,0,1),t[n(455)]=void 0!==i[n(455)]?i[n(455)]:1,t[n(306)]=void 0!==i[n(306)]?i.radius1:1,t[n(439)]=void 0!==i[n(439)]?i[n(439)]:.5,t[n(312)]=void 0!==i.radius1Factor?i[n(312)]:.2,t.minRadius=void 0!==i[n(391)]?i[n(391)]:.2,t[n(405)]=void 0!==i[n(405)]?i.isEternal:void 0===i[n(282)]||void 0===i[n(448)],t[n(282)]=i[n(282)],t[n(448)]=i[n(448)],t[n(294)]=void 0!==i.propagationTimeFactor?i.propagationTimeFactor:.1,t[n(348)]=void 0!==i[n(348)]?i[n(348)]:.9,t.subrayPeriod=void 0!==i.subrayPeriod?i[n(382)]:4,t.subrayDutyCycle=void 0!==i[n(317)]?i.subrayDutyCycle:.6,t.maxIterations=void 0!==i.maxIterations?i[n(367)]:9,t[n(324)]=void 0!==i[n(324)]&&i[n(324)],t.ramification=void 0!==i[n(362)]?i.ramification:5,t.maxSubrayRecursion=void 0!==i[n(298)]?i[n(298)]:3,t.recursionProbability=void 0!==i[n(329)]?i.recursionProbability:.6,t[n(363)]=void 0!==i[n(363)]&&i.generateUVs,t[n(316)]=i[n(316)],t[n(454)]=i.noiseSeed,t[n(369)]=i.onDecideSubrayCreation,t[n(320)]=i[n(320)],t}[M(410)](t){const i=M;this[i(324)]||(this[i(388)].isEternal||this[i(388)].birthTime<=t&&t<=this[i(388)].deathTime?(this.updateMesh(t),t<this[i(290)][0][i(281)]?this[i(389)]=j[i(366)]:t>this[i(290)][0].beginVanishingTime?this.state=j[i(352)]:this[i(389)]=j[i(286)],this[i(310)]=!0):(this[i(310)]=!1,t<this.rayParameters[i(282)]?this.state=j.RAY_UNBORN:this.state=j[i(289)]))}[M(336)](t){const i=M;this[i(388)]=t,this.maxIterations=void 0!==t.maxIterations?Math.floor(t[i(367)]):9,t.maxIterations=this.maxIterations,this[i(324)]=void 0!==t[i(324)]&&t[i(324)],t[i(324)]=this.isStatic,this.ramification=void 0!==t.ramification?Math[i(378)](t[i(362)]):5,t[i(362)]=this.ramification,this.maxSubrayRecursion=void 0!==t[i(298)]?Math[i(378)](t.maxSubrayRecursion):3,t[i(298)]=this[i(298)],this[i(329)]=void 0!==t[i(329)]?t.recursionProbability:.6,t[i(329)]=this.recursionProbability,this[i(363)]=void 0!==t[i(363)]&&t[i(363)],t[i(363)]=this[i(363)],void 0!==t[i(316)]?(this[i(316)]=t.randomGenerator,this[i(368)]=t[i(316)],void 0!==t[i(454)]&&this[i(368)][i(370)](t[i(454)])):(this.randomGenerator=j[i(333)](),this[i(368)]=Math),void 0!==t[i(369)]?this.onDecideSubrayCreation=t[i(369)]:(this[i(308)](),void 0!==t[i(320)]&&(this[i(320)]=t.onSubrayCreation)),this.state=j[i(338)],this.maxSubrays=Math.ceil(1+Math.pow(this[i(362)],Math[i(423)](0,this[i(298)]-1))),t[i(406)]=this[i(406)],this.maxRaySegments=2*(1<<this[i(367)]),this[i(290)]=[];for(let s=0;s<this.maxSubrays;s++)this[i(290)].push(this[i(283)]());this[i(415)]=[];for(let s=0;s<this[i(359)];s++)this.raySegments[i(302)](this[i(446)]());this[i(416)]=0,this[i(407)]=0,this[i(284)]=null,this[i(301)]=this[i(363)]?this[i(399)]:this.createTriangleVerticesWithoutUVs,this[i(297)]=0,this.currentSubray=null,this[i(425)]=0,this[i(380)]=!1,this[i(342)]=0,this[i(429)]=0,this.currentIndex=0,this[i(402)]=0,this[i(396)]=0,this[i(357)]=null,this[i(387)]=null,this.indices=null,this[i(417)]=null,this[i(339)]=null,this[i(285)]=m(this[i(368)][i(353)]),this.simplexY=m(this[i(368)][i(353)]),this[i(343)]=m(this[i(368)][i(353)]),this.forwards=new s,this[i(360)]=new s,this[i(287)]=new s,this.down=new s,this[i(443)]=new s,this[i(450)]=new s,this[i(420)]=new s,this[i(412)]=new s,this[i(408)]=new s}[M(398)](){const t=M,i=1<<this[t(367)],s=3*(i+1)*this[t(406)],o=18*i*this[t(406)];this.vertices=new Float32Array(3*s),this[t(330)]=new Uint32Array(o),this[t(363)]&&(this[t(387)]=new Float32Array(2*s)),this[t(376)](0),this[t(326)](new n(this[t(330)],1)),this.positionAttribute=new e(this[t(357)],3),this.setAttribute(t(394),this[t(417)]),this.generateUVs&&(this[t(339)]=new e(new Float32Array(this.uvs),2),this[t(314)]("uv",this[t(339)])),!this[t(324)]&&(this[t(321)][t(373)]=r,this[t(417)].usage=r,this[t(363)]&&(this[t(339)].usage=r)),this[t(357)]=this[t(417)][t(393)],this[t(330)]=this[t(321)][t(393)],this[t(363)]&&(this[t(387)]=this[t(339)][t(393)])}updateMesh(t){const i=M;this[i(376)](t),this[i(395)][i(433)]=this[i(337)],this.index.needsUpdate=!0,this.positionAttribute[i(322)]=!0,this[i(363)]&&(this.uvsAttribute[i(322)]=!0)}[M(376)](t){const i=M,s=this;this[i(429)]=0,this.currentIndex=0,this.currentCoordinate=0,this[i(396)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(291)];t<r.birthTime||(this.rayParameters.isEternal&&0==s[e(291)].recursion?(s.createPrism(n),s[e(369)](n,s)):t<r.endPropagationTime?s.timeFraction>=n[e(325)]*r.propagationTimeFactor&&(s[e(358)](n),s.onDecideSubrayCreation(n,s)):t<r[e(426)]?(s.createPrism(n),s[e(369)](n,s)):(s[e(407)]<=r[e(348)]+n[e(332)]*(1-r.vanishingTimeFactor)&&s[e(358)](n),s[e(369)](n,s)))}))}[M(447)](){return this[M(290)][this.numSubrays++]}[M(437)](t,i){const s=M;t[s(404)][s(345)](i.sourceOffset),t[s(351)][s(345)](i.destOffset),t[s(418)][s(345)](i[s(418)]),t[s(295)].copy(i[s(295)]),t[s(455)]=i.radius0,t.radius1=i[s(306)],t[s(282)]=i[s(282)],t[s(448)]=i.deathTime,t[s(300)]=i[s(300)],t[s(434)]=i[s(434)],t[s(377)]=i[s(377)],t[s(294)]=i[s(294)],t[s(348)]=i[s(348)],t.maxIterations=this[s(367)],t[s(456)]=void 0!==i[s(454)]?i[s(454)]:0,t[s(303)]=0}[M(385)](t,i){const s=M;this.time=t,this[s(284)]=i,this.numSubrays=0,this[s(437)](this[s(447)](),this[s(388)]);for(let n=0;n<this[s(297)];n++){const i=this[s(290)][n];this[s(291)]=i,this[s(316)].setSeed(i[s(456)]),i.endPropagationTime=o.lerp(i[s(282)],i[s(448)],i[s(294)]),i[s(426)]=o.lerp(i[s(448)],i[s(282)],1-i[s(348)]);const e=this[s(316)].random;i[s(344)][s(331)](e(),e(),e())[s(432)](1e3),i[s(307)].set(e(),e(),e())[s(432)](1e3),this[s(407)]=(t-i[s(282)])/(i[s(448)]-i[s(282)]),this[s(425)]=0,this[s(380)]=!0;const r=this[s(299)]();r[s(422)]=0,r[s(404)][s(345)](i.pos0),r[s(351)].copy(i[s(351)]),r[s(344)][s(345)](i[s(344)]),r[s(307)][s(345)](i[s(307)]),r[s(418)][s(345)](i[s(418)]),r[s(295)][s(345)](i[s(295)]),r[s(455)]=i[s(455)],r[s(306)]=i[s(306)],r[s(325)]=0,r[s(332)]=1,r[s(409)]=1-i.straightness,this[s(342)]=this[s(362)]*Math.pow(this.recursionProbability,i.recursion)/(1<<i[s(367)]),this[s(400)](r)}this[s(284)]=null,this[s(291)]=null}[M(400)](t){const i=M;if(t[i(422)]>=this[i(291)][i(367)])return void this[i(284)](t);this.forwards[i(438)](t[i(351)],t[i(404)]);let s=this[i(453)][i(356)]();s<1e-6&&(this[i(453)][i(331)](0,0,.01),s=this[i(453)][i(356)]());const n=.5*(t[i(455)]+t[i(306)]),e=.5*(t.fraction0+t.fraction1),r=this[i(416)]*this[i(291)][i(300)]*Math[i(323)](2,t[i(422)]);this[i(443)][i(384)](t[i(404)],t[i(351)],.5),this.middleLinPos[i(384)](t[i(344)],t[i(307)],.5);const o=this[i(450)];this.newPos[i(331)](this[i(285)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(343)](o.x,o.y,o.z,r)),this[i(420)][i(432)](t[i(409)]*s),this[i(420)].add(this[i(443)]);const a=this.getNewSegment();a[i(404)][i(345)](t[i(404)]),a[i(351)].copy(this[i(420)]),a.linPos0[i(345)](t[i(344)]),a[i(307)][i(345)](this[i(450)]),a[i(418)][i(345)](t[i(418)]),a[i(295)][i(345)](t[i(295)]),a[i(455)]=t[i(455)],a[i(306)]=n,a[i(325)]=t[i(325)],a[i(332)]=e,a.positionVariationFactor=t[i(409)]*this[i(291)][i(434)],a[i(422)]=t[i(422)]+1;const c=this[i(299)]();c[i(404)][i(345)](this[i(420)]),c[i(351)].copy(t[i(351)]),c[i(344)][i(345)](this[i(450)]),c.linPos1[i(345)](t[i(307)]),this.cross1[i(355)](t[i(418)],this[i(453)][i(392)]()),c[i(418)][i(355)](this[i(453)],this[i(408)]).normalize(),c[i(295)][i(345)](t.up1),c[i(455)]=n,c.radius1=t[i(306)],c[i(325)]=e,c[i(332)]=t.fraction1,c[i(409)]=t[i(409)]*this[i(291)][i(434)],c.iteration=t[i(422)]+1,this[i(400)](a),this.fractalRayRecursive(c)}[M(358)](t){const i=M;this[i(360)][i(438)](t[i(351)],t.pos0).normalize(),this[i(380)]&&(this[i(301)](t[i(404)],t.up0,this[i(360)],t[i(455)],0),this[i(380)]=!1),this[i(301)](t[i(351)],t.up0,this[i(360)],t[i(306)],t.fraction1),this[i(364)]()}[M(379)](t,i,s,n){const e=M;this[e(287)][e(355)](i,s)[e(432)](n*j[e(315)]),this[e(427)][e(345)](i).multiplyScalar(-n*j[e(383)]);const r=this[e(412)],o=this.vertices;r[e(345)](t)[e(371)](this.side).add(this.down),o[this.currentCoordinate++]=r.x,o[this[e(402)]++]=r.y,o[this[e(402)]++]=r.z,r[e(345)](t).add(this[e(287)])[e(311)](this[e(427)]),o[this.currentCoordinate++]=r.x,o[this[e(402)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(345)](i)[e(432)](n).add(t),o[this.currentCoordinate++]=r.x,o[this[e(402)]++]=r.y,o[this[e(402)]++]=r.z,this[e(429)]+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=M;this[r(287)][r(355)](i,s)[r(432)](n*j[r(315)]),this[r(427)][r(345)](i)[r(432)](-n*j[r(383)]);const o=this[r(412)],a=this.vertices,c=this[r(387)];o[r(345)](t)[r(371)](this.side)[r(311)](this[r(427)]),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(402)]++]=o.z,c[this[r(396)]++]=e,c[this.currentUVCoordinate++]=0,o[r(345)](t)[r(311)](this.side)[r(311)](this.down),a[this[r(402)]++]=o.x,a[this[r(402)]++]=o.y,a[this[r(402)]++]=o.z,c[this[r(396)]++]=e,c[this[r(396)]++]=.5,o[r(345)](i)[r(432)](n)[r(311)](t),a[this[r(402)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(402)]++]=o.z,c[this.currentUVCoordinate++]=e,c[this[r(396)]++]=1,this[r(429)]+=3}createPrismFaces(t){const i=M,s=this[i(330)];t=this[i(429)]-6,s[this[i(337)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(337)]++]=t+5,s[this[i(337)]++]=t+1,s[this.currentIndex++]=t+5,s[this[i(337)]++]=t+4,s[this[i(337)]++]=t+0,s[this[i(337)]++]=t+1,s[this[i(337)]++]=t+4,s[this.currentIndex++]=t+0,s[this.currentIndex++]=t+4,s[this[i(337)]++]=t+3,s[this[i(337)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(337)]++]=t+3,s[this[i(337)]++]=t+2,s[this[i(337)]++]=t+3,s[this[i(337)]++]=t+5}[M(308)](){const t=M,i=this.randomGenerator[t(353)];this[t(369)]=function(s,n){const e=t,r=n[e(291)],a=n[e(388)][e(382)],c=n[e(388)][e(317)],h=n.rayParameters[e(405)]&&0==r[e(303)]?-i()*a:o[e(309)](r[e(282)],r.endPropagationTime,s[e(325)])-i()*a,u=n[e(416)]-h,l=Math[e(378)](u/a),p=i()*(l+1);let d=0;if(u%a<=c*a&&(d=n[e(342)]),r[e(303)]<n.maxSubrayRecursion&&n[e(297)]<n[e(406)]&&i()<d){const t=n[e(447)](),o=n[e(316)][e(354)]();t[e(456)]=p,n[e(316)][e(370)](p),t[e(303)]=r.recursion+1,t[e(367)]=Math.max(1,r[e(367)]-1),t[e(344)][e(331)](i(),i(),i()).multiplyScalar(1e3),t[e(307)][e(331)](i(),i(),i()).multiplyScalar(1e3),t[e(418)][e(345)](r[e(418)]),t[e(295)].copy(r.up1),t.radius0=s[e(455)]*n[e(388)].radius0Factor,t[e(306)]=Math[e(431)](n.rayParameters[e(391)],s[e(306)]*n[e(388)][e(312)]),t[e(282)]=h+l*a,t[e(448)]=t.birthTime+a*c,!n[e(388)][e(405)]&&0==r[e(303)]&&(t[e(282)]=Math[e(423)](t.birthTime,r[e(282)]),t[e(448)]=Math.min(t[e(448)],r.deathTime)),t[e(300)]=2*r[e(300)],t[e(434)]=r[e(434)],t[e(377)]=r[e(377)],t[e(294)]=r.propagationTimeFactor,t[e(348)]=r[e(348)],n.onSubrayCreation(s,r,t,n),n.randomGenerator[e(370)](o)}};const n=new s,e=new s,r=new s,a=new s;this.onSubrayCreation=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(430)]=function(s,o,c,h,u,l){const p=t;c.pos0[p(345)](s[p(404)]),n.subVectors(o.pos1,o[p(404)]),e[p(345)](n)[p(392)](),n[p(432)](s.fraction0+(1-s[p(325)])*(i()*h));const d=n[p(356)]();r.crossVectors(o[p(418)],e);const m=2*Math.PI*i();r[p(432)](Math[p(350)](m)),a[p(345)](o.up0)[p(432)](Math.sin(m)),c[p(351)][p(345)](r).add(a)[p(432)](d*u*(l+i()*(1-l)))[p(311)](n)[p(311)](o[p(404)])},this[t(334)]=function(s,o,c,h,u,l){const p=t;c[p(404)].copy(s.pos0),n.subVectors(o[p(351)],o[p(404)]),e[p(345)](n)[p(392)](),n[p(432)](s[p(325)]+(1-s[p(325)])*((2*i()-1)*h));const d=n.length();r[p(355)](o.up0,e);const m=2*Math.PI*i();r[p(432)](Math.cos(m)),a[p(345)](o[p(418)])[p(432)](Math[p(390)](m)),c[p(351)][p(345)](r)[p(311)](a)[p(432)](d*u*(l+i()*(1-l)))[p(311)](n)[p(311)](o[p(404)])}}[M(283)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(446)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=M;return this[t(415)][this[t(425)]++]}[M(345)](t){const i=M;return super[i(345)](t),this[i(336)](j[i(401)]({},t[i(388)])),this}clone(){const t=M;return new(this[t(444)])(j[t(401)]({},this[t(388)]))}}function A(){const t=["RAY_INITIALIZED","uvsAttribute","10vGmZHJ","test","subrayProbability","simplexZ","linPos0","copy","warn","string","vanishingTimeFactor","__proto__","cos","pos1","RAY_VANISHING","random","getSeed","crossVectors","length","vertices","createPrism","maxRaySegments","forwardsFill","stateObject","ramification","generateUVs","createPrismFaces","1393389SYgYiK","RAY_PROPAGATING","maxIterations","seedGenerator","onDecideSubrayCreation","setSeed","sub","while (true) {}","usage","62056ZTSbQT","580lptvlf","fillMesh","straightness","floor","createTriangleVerticesWithoutUVs","isInitialSegment","16998qanmhZ","subrayPeriod","SIN30DEG","lerpVectors","fractalRay","table","uvs","rayParameters","state","sin","minRadius","normalize","array","position","drawRange","currentUVCoordinate","debu","createMesh","createTriangleVerticesWithUVs","fractalRayRecursive","copyParameters","currentCoordinate","bind","pos0","isEternal","maxSubrays","timeFraction","cross1","positionVariationFactor","update","console","vPos","return (function() ","input","raySegments","time","positionAttribute","up0","function *\\( *\\)","newPos","1897xHoQfz","iteration","max","isLightningStrike","currentSegmentIndex","beginVanishingTime","down","sourceOffset","currentVertex","subrayConePosition","min","multiplyScalar","count","roughness","12PUnKbo","counter","initSubray","subVectors","radius0Factor","trace","1442748ULJKUp","apply","middlePos","constructor","LightningStrike","createSegment","addNewSubray","deathTime","destOffset","middleLinPos",'{}.constructor("return this")( )',"currentSeed","forwards","noiseSeed","radius0","seed","endPropagationTime","birthTime","createSubray","currentSegmentCallback","simplexX","RAY_STEADY","side","179894hKhNFy","RAY_EXTINGUISHED","subrays","currentSubray","19269289YeLVQZ","32MAenLY","propagationTimeFactor","up1","toString","numSubrays","maxSubrayRecursion","getNewSegment","timeScale","currentCreateTriangleVertices","push","recursion","gger","prototype","radius1","linPos1","createDefaultSubrayCreationCallbacks","lerp","visible","add","radius1Factor","12gnVPrj","setAttribute","COS30DEG","randomGenerator","subrayDutyCycle","error","chain","onSubrayCreation","index","needsUpdate","pow","isStatic","fraction0","setIndex","type","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","recursionProbability","indices","set","fraction1","createRandomGenerator","subrayCylinderPosition","118076fSzPJP","init","currentIndex"];return(A=function(){return t})()}function V(t){function i(t){const s=T;if(typeof t===s(347))return function(t){}[s(444)](s(372)).apply(s(436));1!==(""+t/t)[s(356)]||t%20==0?function(){return!0}[s(444)](s(397)+s(304)).call("action"):function(){return!1}[s(444)](s(397)+s(304))[s(442)](s(361)),i(++t)}try{if(t)return i;i(0)}catch(s){}}j[M(338)]=0,j.RAY_UNBORN=1,j[M(366)]=2,j[M(286)]=3,j[M(352)]=4,j[M(289)]=5,j[M(315)]=Math.cos(30*Math.PI/180),j[M(383)]=Math.sin(30*Math.PI/180);const z=L;!function(t,i){const s=L,n=E();for(;;)try{if(991060===-parseInt(s(420))/1+-parseInt(s(423))/2+parseInt(s(366))/3*(parseInt(s(429))/4)+-parseInt(s(412))/5+-parseInt(s(421))/6+-parseInt(s(435))/7*(parseInt(s(413))/8)+parseInt(s(436))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(406)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){F(this,(function(){const t=L,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=G(t(395));i[t(375)](n+t(391))&&s[t(375)](n+t(411))?G():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(406)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();H(void 0,(function(){const t=L;let i;try{i=Function("return (function() "+t(380)+");")()}catch(e){i=window}const s=i[t(428)]=i[t(428)]||{},n=[t(371),t(417),t(389),t(410),t(367),t(404),"trace"];for(let r=0;r<n[t(405)];r++){const i=H.constructor[t(419)][t(372)](H),e=n[r],o=s[e]||i;i[t(377)]=H[t(372)](H),i.toString=o[t(418)].bind(o),s[e]=i}}))();class D extends a{constructor(t={}){const i=L;super(),this[i(379)]=!0,this[i(437)]=t,t[i(438)]=void 0!==t.size?t[i(438)]:1e3,t[i(426)]=void 0!==t[i(426)]?t[i(426)]:80,t.maxHeight=void 0!==t[i(376)]?t[i(376)]:100,t.maxSlope=void 0!==t[i(416)]?t[i(416)]:1.1,t.maxLightnings=void 0!==t.maxLightnings?t[i(374)]:3,t.lightningMinPeriod=void 0!==t[i(373)]?t[i(373)]:3,t[i(390)]=void 0!==t[i(390)]?t[i(390)]:7,t[i(422)]=void 0!==t[i(422)]?t.lightningMinDuration:1,t[i(431)]=void 0!==t[i(431)]?t.lightningMaxDuration:2.5,this[i(392)]=j[i(370)](t[i(392)],t[i(392)]),this.lightningParameters[i(396)]=!1,this[i(383)]=void 0!==t[i(383)]?t[i(383)]:new c({color:11599871}),void 0!==t.onRayPosition?this[i(407)]=t[i(407)]:this[i(407)]=function(s,n){const e=i;n.set((Math[e(414)]()-.5)*t.size,0,(Math[e(414)]()-.5)*t[e(438)]);const r=o[e(434)](t[e(426)],t[e(376)],Math[e(414)]());s[e(362)](t.maxSlope*(2*Math[e(414)]()-1),1,t.maxSlope*(2*Math[e(414)]()-1))[e(401)](r)[e(385)](n)},this[i(415)]=t[i(415)],this[i(397)]=!1,this[i(403)]=0,this[i(378)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(437)][i(374)];s++){const t=new j(j[i(370)]({},this[i(392)])),s=new h(t,this[i(383)]);this[i(433)].push(s)}}update(t){const i=L;if(!this.inited&&(this.nextLightningTime=this[i(394)](t)*Math[i(414)](),this[i(397)]=!0),t>=this[i(403)]){const s=this[i(433)][i(387)]();if(s){const n=j[i(370)](s.geometry[i(424)],this[i(392)]);n[i(427)]=t,n[i(384)]=t+o.lerp(this[i(437)][i(422)],this[i(437)][i(431)],Math[i(414)]()),this[i(407)](n[i(432)],n.destOffset),n[i(409)]=Math.random(),this[i(385)](s),this[i(378)][i(400)](s)}this.nextLightningTime=this[i(394)](t)}let s=0,n=this[i(378)][i(405)];for(;s<n;){const e=this[i(378)][s],r=e[i(408)],o=r[i(393)];r[i(386)](t),o===j[i(363)]&&r[i(393)]>o&&this[i(415)]&&this[i(415)](r),r.state===j[i(402)]?(this[i(378)][i(369)](this.lightningsMeshes[i(398)](e),1),this[i(433)][i(400)](e),this[i(365)](e),n--):s++}}getNextLightningTime(t){const i=L;return t+o[i(434)](this[i(437)][i(373)],this[i(437)][i(390)],Math.random())/(this[i(437)][i(374)]+1)}[z(388)](t,i){const s=z;return super.copy(t,i),this[s(437)].size=t[s(437)][s(438)],this.stormParams.minHeight=t[s(437)].minHeight,this[s(437)][s(376)]=t[s(437)][s(376)],this.stormParams[s(416)]=t.stormParams[s(416)],this[s(437)][s(374)]=t[s(437)][s(374)],this.stormParams[s(373)]=t[s(437)][s(373)],this.stormParams[s(390)]=t.stormParams[s(390)],this[s(437)][s(422)]=t[s(437)][s(422)],this[s(437)][s(431)]=t.stormParams[s(431)],this[s(392)]=j[s(370)]({},t[s(392)]),this[s(383)]=t[s(437)][s(383)],this[s(415)]=t[s(415)],this}clone(){const t=z;return new this.constructor(this[t(437)])[t(388)](this)}}function E(){const t=["add","update","pop","copy","info","lightningMaxPeriod","chain","lightningParameters","state","getNextLightningTime","init","isEternal","inited","indexOf","gger","push","multiplyScalar","RAY_EXTINGUISHED","nextLightningTime","table","length","apply","onRayPosition","geometry","noiseSeed","error","input","8565550BQSlOV","3826400eEkQWx","random","onLightningDown","maxSlope","warn","toString","prototype","1392450ANeqbS","9727320jZuena","lightningMinDuration","3283454ZmsoMv","rayParameters","call","minHeight","birthTime","console","2828XNGtyG","debu","lightningMaxDuration","sourceOffset","deadLightningsMeshes","lerp","7pCcJqE","54665118dWeHva","stormParams","size","set","RAY_PROPAGATING","action","remove","7485GuqqDP","exception","string","splice","copyParameters","log","bind","lightningMinPeriod","maxLightnings","test","maxHeight","__proto__","lightningsMeshes","isLightningStorm",'{}.constructor("return this")( )',"counter","constructor","lightningMaterial","deathTime"];return(E=function(){return t})()}function L(t,i){const s=E();return(L=function(t,i){return s[t-=362]})(t,i)}function G(t){function i(t){const s=L;if(typeof t===s(368))return function(t){}.constructor("while (true) {}")[s(406)](s(381));1!==(""+t/t)[s(405)]||t%20==0?function(){return!0}.constructor(s(430)+s(399))[s(425)](s(364)):function(){return!1}[s(382)](s(430)+s(399)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=U;function U(t,i){const s=Y();return(U=function(t,i){return s[t-=317]})(t,i)}!function(t,i){const s=U,n=Y();for(;;)try{if(366637===-parseInt(s(350))/1+parseInt(s(383))/2+-parseInt(s(372))/3*(-parseInt(s(375))/4)+-parseInt(s(325))/5+parseInt(s(334))/6*(parseInt(s(323))/7)+parseInt(s(322))/8+parseInt(s(380))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[U(340)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=U,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(339),"i"),n=K(t(365));i[t(355)](n+t(328))&&s[t(355)](n+t(318))?K():n("0")}))()}();const Z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(){const t=["stateObject","prototype","copy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","primitive","timeScale","string","subrayDutyCycle","while (true) {}","Color","add","MeshBasicMaterial","gger","673522kXsEBY","action","straightness","Vector3","#b0ffff","test","counter","radius1","roughness","multiplyScalar","stormParams","__proto__","bind","rayParameters","update","init","sourceOffset","toString","length","subrayConePosition","warn","log","521049tCarCc","radius0","maxLightnings","8OAKQjc","call","debu","color",'{}.constructor("return this")( )',"2720043WOExDg","pos1","minHeight","448622vcnEEs","info","input","sub","return (function() ","console","205784UlArne","329OmLtKl","subVectors","171305Mhzcwg","constructor","dot","chain","lightStorm","set","subrayPeriod","maxHeight","object","22314KWNwte","size"];return(Y=function(){return t})()}Z(void 0,(function(){const t=U;let i;try{i=Function(t(320)+t(379)+");")()}catch(e){i=window}const s=i[t(321)]=i[t(321)]||{},n=[t(371),t(370),t(317),"error","exception","table","trace"];for(let r=0;r<n.length;r++){const i=Z[t(326)][t(337)][t(362)](Z),e=n[r],o=s[e]||i;i[t(361)]=Z[t(362)](Z),i[t(367)]=o[t(367)][t(362)](o),s[e]=i}}))();const k=[O(333)],Q=f({__name:O(329),props:{color:{default:O(354)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,n=t,e=new(u[i(346)])(n.color),r=new(u[i(348)])({color:e}),o=new(u[i(353)])(0,-1,0);let a=0;const c=new(u[i(353)]),h=new s,p={roughness:n.roughness,straightness:n[i(352)],radius0:n[i(373)],radius1:n[i(357)],timeScale:n[i(342)],subrayPeriod:n[i(331)],subrayDutyCycle:n[i(344)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(369)](t,s,n,.6,.6,.5),a=e[r(363)][r(366)].y,c[r(324)](n[r(381)],e.rayParameters[r(366)]);const u=o[r(327)](c);h[r(338)](o)[r(359)](u),c[r(319)](h);const l=u/a>.5?a/u:1;h.multiplyScalar(l),c[r(347)](h),n[r(381)].addVectors(c,e[r(363)][r(366)])}},d=new D({size:n[i(335)],minHeight:n.minHeight,maxHeight:n[i(332)],maxSlope:.6,maxLightnings:n[i(374)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(360)];s.size=n[t(335)],s[t(382)]=n.minHeight,s[t(332)]=n[t(332)],r[t(378)][t(330)](n[t(378)]),p.roughness=n[t(358)],p[t(352)]=n.straightness,p[t(373)]=n[t(373)],p[t(357)]=n[t(357)],p[t(342)]=n[t(342)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(364)](t)})),(t,s)=>{const n=i;return y(),b(n(341),{object:v(d),renderOrder:9999},null,8,k)}}});function K(t){function i(t){const s=U;if(typeof t===s(343))return function(t){}[s(326)](s(345))[s(340)](s(356));1!==(""+t/t)[s(368)]||t%20==0?function(){return!0}[s(326)](s(377)+"gger")[s(376)](s(351)):function(){return!1}.constructor(s(377)+s(349))[s(340)](s(336)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const W=J;!function(t,i){const s=J,n=X();for(;;)try{if(819194===-parseInt(s(536))/1*(parseInt(s(528))/2)+parseInt(s(535))/3*(parseInt(s(537))/4)+parseInt(s(538))/5+-parseInt(s(543))/6*(parseInt(s(511))/7)+parseInt(s(542))/8*(parseInt(s(522))/9)+parseInt(s(518))/10+-parseInt(s(531))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(499)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){B(this,(function(){const t=J,i=new RegExp(t(544)),s=new RegExp(t(521),"i"),n=tt(t(512));i[t(539)](n+t(527))&&s[t(539)](n+t(548))?tt():n("0")}))()}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(499)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function X(){const t=["132943kUQdpc","487464azWHHP","7795180jAjJHo","test","radius1","console","3528bsatgv","273198HnEQtQ","function *\\( *\\)","roughness","toString","lightningStorm","input","call","端部半径","apply","bind","table","while (true) {}","minHeight","stateObject","length","maxHeight","__proto__","trace","#92399e","时间缩放","98KzxshZ","init","gger","prototype","action","timeScale",'{}.constructor("return this")( )',"10749990DnyMUS","value","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","11241ZBzceT","debu","string","log","return (function() ","chain","14hCQIDv","#ffbde7","exception","19497665mGhUPR","constructor","straightness","粗糙度","24VTCNBB"];return(X=function(){return t})()}$(void 0,(function(){const t=J,i=function(){const t=J;let i;try{i=Function(t(526)+t(517)+");")()}catch(s){i=window}return i}(),s=i[t(541)]=i.console||{},n=[t(525),"warn","info","error",t(530),t(501),t(508)];for(let e=0;e<n.length;e++){const i=$.constructor[t(514)][t(500)]($),r=n[e],o=s[r]||i;i[t(507)]=$[t(500)]($),i[t(546)]=o[t(546)].bind(o),s[r]=i}}))();const q=f({__name:W(547),setup(i){const s=W,n=x({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(509),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:c,radius0:h,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(529),roughness:{label:s(534),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(550),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(510),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[S(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[S(Q,{minHeight:v(e)[m(519)],maxHeight:v(r)[m(519)],color:v(o)[m(519)],roughness:v(a)[m(519)],straightness:v(c)[m(519)],radius0:v(h).value,radius1:v(u)[m(519)],timeScale:v(l).value},null,8,[m(503),m(506),m(520),m(545),m(533),"radius0",m(540),m(516)]),S(v(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),S(v(d))],64)}}});function J(t,i){const s=X();return(J=function(t,i){return s[t-=499]})(t,i)}function tt(t){function i(t){const s=J;if(typeof t===s(524))return function(t){}[s(532)](s(502))[s(499)]("counter");1!==(""+t/t)[s(505)]||t%20==0?function(){return!0}[s(532)](s(523)+s(513))[s(549)](s(515)):function(){return!1}[s(532)]("debugger")[s(499)](s(504)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

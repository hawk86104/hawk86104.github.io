import{c0 as t,a3 as n,C as e,k as r}from"./three.QbUqWzuy1728531791220.js";import{z as o}from"./@tresjs.TFxw2EXb1728531791220.js";import{R as c}from"./all.three.ECVMrAY71728531791220.js";import{d as a,b as i,a4 as s,a3 as u,o as l,E as f,L as p,m,u as v}from"./@vue.bvMz0l_u1728531791220.js";!function(t,n){const e=h,r=x();for(;;)try{if(310050===-parseInt(e(342))/1*(parseInt(e(364))/2)+parseInt(e(366))/3*(parseInt(e(377))/4)+parseInt(e(365))/5+parseInt(e(371))/6+parseInt(e(351))/7*(parseInt(e(343))/8)+-parseInt(e(382))/9*(parseInt(e(385))/10)+parseInt(e(354))/11*(-parseInt(e(356))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(350)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function h(t,n){const e=x();return(h=function(t,n){return e[t-=342]})(t,n)}!function(){d(this,(function(){const t=h,n=new RegExp(t(383)),e=new RegExp(t(358),"i"),r=y("init");n[t(359)](r+"chain")&&e[t(359)](r+t(380))?y():r("0")}))()}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(350)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(){const t=["212978KtlnSG","602530XLjQxm","1249983EcCEsA","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","stateObject",'{}.constructor("return this")( )',"info","3331188dGCZUr","console","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","counter","action","return (function() ","4jYTULH","trace","error","input","length","2327841aKpyJU","function *\\( *\\)","toString","10kCoxdy","void main() {","prototype","debu","1yuKwXc","1800bfLvvB","while (true) {}","exception","table","vertexShader","__proto__","string","apply","5817OmVYLM","bind","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","6645672KPtGiI","log","12TkcAOB","replace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","call","fragmentShader","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","constructor"];return(x=function(){return t})()}g(void 0,(function(){const t=h;let n;try{n=Function(t(376)+t(369)+");")()}catch(o){n=window}const e=n[t(372)]=n[t(372)]||{},r=[t(355),"warn",t(370),t(379),t(345),t(346),t(378)];for(let c=0;c<r[t(381)];c++){const n=g[t(363)][t(387)][t(352)](g),o=r[c],a=e[o]||n;n[t(348)]=g.bind(g),n.toString=a[t(384)][t(352)](a),e[o]=n}}))();function y(t){function n(t){const e=h;if(typeof t===e(349))return function(t){}[e(363)](e(344))[e(350)](e(374));1!==(""+t/t)[e(381)]||t%20==0?function(){return!0}[e(363)](e(388)+"gger")[e(360)](e(375)):function(){return!1}[e(363)](e(388)+"gger")[e(350)](e(368)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function b(){const t=["set","4152cFXjOf","onBeforeCompile","reflectMap","wrapS","tpgRef","TresPlaneGeometry","value","mirror","console","TresGroup","apply","constructor","prototype","counter","length","add","__proto__","action","exception","showGridHelper","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mixStrength","chain","190450pczrRf","textureMatrix","toString","#ffffff","257589qvIVjp","98XmsVZl","test","onBeforeRender","3wWaCrp",'{}.constructor("return this")( )',"464460FrnNel","tmsmRef","input","aoMap","tmRef","function *\\( *\\)","144015vFYudj","repeat","reflectorDiffuse","string","object","uniforms","160492aShboA","visible","uv1","gger","bind","3636720ZGzxCh","update","while (true) {}","table","textureMatrixUniform","primitive","color","wrapT","rotation-x","debu","warn","attributes","channel","40vabFHK","stateObject"];return(b=function(){return t})()}const _=I;!function(t,n){const e=I,r=b();for(;;)try{if(109320===-parseInt(e(288))/1+parseInt(e(272))/2+-parseInt(e(280))/3*(-parseInt(e(294))/4)+-parseInt(e(282))/5+parseInt(e(315))/6*(-parseInt(e(277))/7)+parseInt(e(312))/8*(-parseInt(e(276))/9)+parseInt(e(299))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(325)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(t,n){const e=b();return(I=function(t,n){return e[t-=265]})(t,n)}!function(){w(this,(function(){const t=I,n=new RegExp(t(287)),e=new RegExp(t(269),"i"),r=z("init");n[t(278)](r+t(271))&&e[t(278)](r+t(284))?z():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(325)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=I;let n;try{n=Function("return (function() "+t(281)+");")()}catch(o){n=window}const e=n[t(323)]=n[t(323)]||{},r=["log",t(309),"info","error",t(266),t(302),t(268)];for(let c=0;c<r.length;c++){const n=C[t(326)][t(327)][t(298)](C),o=r[c],a=e[o]||n;n[t(331)]=C[t(298)](C),n.toString=a[t(274)].bind(a),e[o]=n}}))();const j=[_(307)],M=[_(292),_(295)],S=a({__name:_(290),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(275)}},async setup(a){const d=_;let g,x;const y=a,b=new t(9.5,10),w=i(),I=i(),C=i(),S=new c,z={mirror:{value:y[d(322)]},mixStrength:{value:y[d(270)]}},E=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var T=0;T<3;T++)E[T][d(318)]=n,E[T][d(306)]=n,E[T][d(289)][d(314)](16,16);const R={color:new e("#444"),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=d;t[n(293)][n(317)]=S.renderTargetUniform,t[n(293)][n(273)]=S[n(303)],t.uniforms=Object.assign(t[n(293)],z),(t=>{const n=h;t[n(347)]=t[n(347)].replace(n(386),n(367)),t.vertexShader=t.vertexShader[n(357)]("#include <project_vertex>",n(373))})(t),(t=>{const n=h;t[n(361)]=t[n(361)][n(357)]("void main() {",n(362)),t[n(361)]=t[n(361)][n(357)]("#include <emissivemap_fragment>",n(353))})(t)};return u((()=>{const t=d;w[t(321)]&&(w.value.attributes[t(296)]=w[t(321)][t(310)].uv),C.value&&(C[t(321)][t(285)][t(311)]=1,C.value[t(316)]=k),I.value&&(I[t(321)][t(330)](S),I.value[t(279)]=(n,e,r)=>{S[t(300)](n,e,r)}),y.color&&C.value&&(C[t(321)].color=new e(y[t(305)]))})),(t,n)=>{const e=d;return l(),f(e(324),null,[p("TresMesh",{ref_key:e(286),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(320),{ref_key:e(319),ref:w,args:[10,10]},null,512),p("TresMeshStandardMaterial",m({ref_key:e(283),ref:C},R),null,16)],8,j),p(e(304),{object:v(b),visible:t[e(267)]},null,8,M)])}}});function z(t){function n(t){const e=I;if(typeof t===e(291))return function(t){}.constructor(e(301))[e(325)](e(328));1!==(""+t/t)[e(329)]||t%20==0?function(){return!0}[e(326)]("debu"+e(297)).call(e(265)):function(){return!1}[e(326)](e(308)+e(297)).apply(e(313)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

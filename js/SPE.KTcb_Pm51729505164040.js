import{_ as t,bT as e,V as i,at as n,h as s,k as o}from"./three.YREzp-_G1729505164040.js";const r=h;!function(t,e){const i=h,n=l();for(;;)try{if(245899===parseInt(i(683))/1*(-parseInt(i(640))/2)+parseInt(i(762))/3*(parseInt(i(742))/4)+-parseInt(i(805))/5*(parseInt(i(824))/6)+parseInt(i(756))/7+-parseInt(i(785))/8+-parseInt(i(558))/9+parseInt(i(727))/10)break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const a=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){a(this,(function(){const t=h,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(650),"i"),n=p(t(622));e.test(n+t(725))&&i[t(629)](n+"input")?p():n("0")}))()}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(775)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function h(t,e){const i=l();return(h=function(t,e){return i[t-=489]})(t,e)}function l(){const t=["maxAge","    return a * b;","textureFrameCount","_spreadClamp","texture","DynamicDrawUsage","indexOf","push","addEmitter","bufferUpdateCount","disable","attributes","        pos.x += wiggleSin;","stateObject","    float shouldApplyValue = 0.0;","removeEmitter","#ifdef SHOULD_CALCULATE_SPRITE","particlesPerSecond","prototype","interpolateArray","rotationFunctions","#endif","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","      translated = rotationCenter - pos;","SPE.Group pool ran out.","float getAlive() {","amd","table","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","    vec3 accel = getAcceleration( age );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","textureFrames","spread","    #ifdef SHOULD_ROTATE_TEXTURE","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","fog_pars_vertex","radiusScale","activeParticleCount","997668RwZyjH","ShaderMaterial","_ensureTypedArray","paramFetchingFunctions","_angleSpread","        pos.z += wiggleSin;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    highp float alive = getAlive();","shaderChunks","    ","   return params.z;","_setAttributeOffset","setDrawRange","        float loopCount = textureAnimation.w;","shrink","_radiusScale","        float framesY = vSpriteSheet.y;","resetFlags","setFromArray","_setBufferUpdateRanges","__proto__","round","clone","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","Will not resize.","rotationCenter","error","uniform float runTime;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","  return 1.0 - when_lt(x, y);","   return velocity * age;","frames","valueOverLifetimeLength","fog","Vector3","BOOLEAN","counter","       vec3 c = isAlive * getColorOverLifetime(","defines","sqrt","       float c = cos(angle);","uniforms","min","_activateParticles","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","itemSize","_radius","_attributesNeedRefresh","getPool","randomColorAsHex","branchAvoidanceFunctions","maxParticleCount","number","Vector2","depthWrite","randomise","activationEnd","attribute vec3 velocity;","uuid","activationIndex","logdepthbuf_pars_fragment","_center","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","indexOffset","init","      }","_onRemove","string","MathUtils","_distribution","    highp float age = getAge();","test","    #ifdef SHOULD_CALCULATE_SPRITE","    #ifdef HAS_PERSPECTIVE","reset","Texture","      vec3 center = rotationCenter;","getComponentValueAtIndex","lerp","_spread","        float wiggleCos = isAlive * cos( wiggleAmount );","gger","700214usBAOg","   c.b = b / PACKED_COLOR_DIVISOR;","multiplyScalar","ShaderChunk","      vec3 translated;","sin","randomDirectionVector3OnSphere","getFromPool","defineProperty","    #endif","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_value","emitters","undefined","    vec3 pos = vec3( position );","subarray","setVec3","BOX","needsUpdate","randomVector3OnLine","randomVector3","POSITIVE_INFINITY","_triggerSingleEmitter","uniform vec4 textureAnimation;","generateUUID","   float b = mod( hex, PACKED_COLOR_SIZE );","colorize","lerpTypeAgnostic","age","setVec4","updateCounts","transparent","angle","_createNewWhenPoolEmpty","typeSizeMap","        vSpriteSheet.x = 1.0 / framesX;","random","axisSpread","    vec3 value = vec3( 0.0 );","attribute vec4 angle;","_checkParticleAges","log","getPackedRotationAxis","1yGfGzV","join","fog_pars_fragment","roundToNearestMultiple","   c -= vec3( 1.0 );","bufferUpdateRanges","ShaderAttribute","float when_lt(float x, float y) {","grow","float getMaxAge() {","_applyAttributesToGeometry","_angle","           unpackColor( color.y ),","       float s = sin( -vAngle );","console","dispose","attributeOffset","StaticDrawUsage","        float column = floor(mod( frameNumber, framesX ));","        float perspective = 1.0;","setVec2Components","params","    force *= drag;","setUpdateRange","position","setRGB","static","varyings","cos","updateMax","paramsArray","#define PACKED_COLOR_DIVISOR 255.0","OBJECT","    return value;","_randomise","group","arrayValuesAreEqual","    gl_PointSize = pointSizePerspective;","TypedArrayHelper","_assignRotationValue","_calculatePPSValue","velocity","chain","NEGATIVE_INFINITY","8355740qYaqVt","pop","    vColor = vec4( c, o );","return (function() ","trace","      float angle = 0.0;","float or(float a, float b) {","componentSize","setVec4Components","common","type","Argument is not instanceof SPE.Emitter:","bind","opacity",'{}.constructor("return this")( )',"20hLQdOv","_axis","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","boolean","usage","copy","void main() {","acceleration","setMat3","    float pointSizePerspective = pointSize * perspective;","        float columnNorm = column / framesX;","    return min(a + b, 1.0);","       vec3 c = vec3(1.0);","resetDynamic","1196804mTgqof","   return acceleration.xyz * age;","length","_assignPositionValue","replace","ensureArrayTypedArg","201306ETvavL","_assignForceValue","updateRange","vertex","        float framesY = textureAnimation.y;","attribute vec4 params;","_createBufferAttribute","attribute vec4 color;","types","remove","        float perspective = scale / length( mvPosition.xyz );","splice","clamp","apply","SHOULD_WIGGLE_PARTICLES","bufferAttribute","                   0.0,                                0.0,                                0.0,                                1.0);","array","attribute vec4 size;","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","warn","_rotationCenter","       float y = 1.0 - gl_PointCoord.y - 0.5;","2497024QIdQAL","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","bufferUpdateKeys","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","fog_fragment","setAttribute","Color","axis","function","    vec3 outgoingLight = vColor.xyz;","alive","AdditiveBlending","    gl_Position = projectionMatrix * mvPosition;","    vec3 vel = getVelocity( age );","       axis = normalize(axis);","alphaTest","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","BufferAttribute","shaders","13350HhIqFI","addPool","toString","isStatic","    highp float positionInTime = (age / maxAge);","_decrementParticleCount","size","    highp float value = 0.0;","frameCount","TypedArray is already of size:","    #else","        float wiggleAmount = positionInTime * getWiggle();","    highp float maxAge = getMaxAge();","getLength","        float totalFrames = textureAnimation.z;","updateFlags","hasPerspective","textureLoop","hasOwnProperty","726KBUXkd","Group","Emitter","keys","logdepthbuf_pars_vertex","colorOverLifetime","   c *= vec3( 2.0 );","geometry","forceFetchingFunctions","Emitter does not exist in this group. Will not remove.","depthTest","    return 1.0 - abs( sign( x - y ) );","logdepthbuf_vertex","spe","        float wiggleSin = isAlive * sin( wiggleAmount );","   }","_assignAbsLifetimeValue","normalize","    float fIndex = 0.0;","fragment","SPHERE","    highp float isAlive = when_gt( alive, 0.0 );","attributeKeys","TypedArrayConstructor","vec3 unpackColor( in float hex ) {","        vSpriteSheet.y = 1.0 / framesY;","   c.g = g / PACKED_COLOR_DIVISOR;","ensureTypedArg","flagUpdate","_updateDefines","varying vec4 vColor;","ensureArrayInstanceOf","_updateBuffers","uniform float scale;","exception","attribute vec3 rotationCenter;","setNumber","angleSpread","        float rowNorm = row / framesY;","setVec3Components","randomDirectionVector3OnDisc","DISC","info","       float x = gl_PointCoord.x - 0.5;","blending","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","updateMap","elements","add","isArray","exports","float when_gt(float x, float y) {","_updateUniforms","fog_vertex","SHOULD_ROTATE_TEXTURE","        float row = floor( (frameNumber - column) / framesX );","randomFloat","_createGetterSetters","ensureValueOverLifetimeCompliance","debu","color","   c.r = r / PACKED_COLOR_DIVISOR;","count","  return 1.0 - when_gt(x, y);","           unpackColor( color.z ),","object","set","attribute vec4 rotation;","           positionInTime,","mesh","   vec3 c = vec3( 0.0 );","float when_ge(float x, float y) {","       fIndex = float( i );","setSize","runTime","distributions","        pos = getRotation( pos, positionInTime );","scale","spreadClamp","_assignAngleValue","BufferGeometry","utils","radius","tick","enable","ensureInstanceOf","floor","attribute vec4 opacity;","SHOULD_CALCULATE_SPRITE","emitterIDs","    }","distribution","_assignValue","    pos += force;","        float rowNorm = vSpriteSheet.w;","_incrementParticleCount","fixedTimeStep","particles, can support only","   return c;","abs","max","center","   return modelViewMatrix * vec4( position, 1.0 );","arrayType","Vector4","wiggle","_poolCreationSettings","distributionClamp","_assignParamsValue","value","particleCount","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","    varying float vAngle;","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","vec4 getPosition( in float age ) {","_static","onParticleSpawn","duration","float and(float a, float b) {","_resetBufferRanges","updateMin","Emitter does not belong to a group, cannot remove.","_attributesNeedDynamicReset","_resetParticle","NUMBER","_updateAttributeUpdateRange","_assignColorValue","resetUpdateRange","drag","attributeCount","      rotationMatrix = getRotationMatrix( axis, angle );","LINE","rotation","attribute vec4 acceleration;","dynamicBuffer","releaseIntoPool","Points","           unpackColor( color.x ),","REVISION","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","SHOULD_ROTATE_PARTICLES","forceUpdateAll","    #ifdef COLORIZE","action","   return params.y;","typedArray","triggerPoolEmitter","constructor","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","material","getHex","           return pos;","_pool","       float s = sin(angle);","   return params.w;","direction","       float c = cos( -vAngle );","float when_le(float x, float y) {","offset","_axisSpread"];return(l=function(){return t})()}c(void 0,(function(){const t=h,e=function(){const t=h;let e;try{e=Function(t(730)+t(741)+");")()}catch(i){e=window}return e}(),i=e[t(697)]=e[t(697)]||{},n=[t(681),t(782),t(866),t(584),t(858),t(547),t(731)];for(let s=0;s<n.length;s++){const e=c.constructor[t(538)].bind(c),o=n[s],r=i[o]||e;e[t(578)]=c[t(739)](c),e[t(807)]=r[t(807)][t(739)](r),i[o]=e}}))();const u={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===r(793)&&define[r(546)]?define(r(837),u):typeof exports!==r(653)&&typeof module!==r(653)&&(module[r(874)]=u),u.TypedArrayHelper=function(t,e,i,n){const s=r;this[s(734)]=i||1,this[s(811)]=e||1,this[s(847)]=t||Float32Array,this.array=new t(e*this[s(734)]),this[s(621)]=n||0},u[r(721)][r(507)]=u[r(721)],u[r(721)].prototype.setSize=function(t,e){const i=r,n=this.array[i(758)];return!e&&(t*=this.componentSize),t<n?this[i(572)](t):t>n?this[i(691)](t):void console[i(866)](i(814),t+".",i(582))},u[r(721)][r(538)][r(572)]=function(t){const e=r;return this[e(779)]=this[e(779)][e(655)](0,t),this[e(811)]=t,this},u[r(721)][r(538)].grow=function(t){const e=r,i=this.array,n=new(this[e(847)])(t);return n[e(890)](i),this[e(779)]=n,this.size=t,this},u[r(721)][r(538)][r(773)]=function(t,e){const i=r;t*=this[i(734)],e*=this.componentSize;const n=[],s=this[i(779)],o=s.length;for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(527)](s[r]);return this.setFromArray(0,n),this},u[r(721)][r(538)][r(576)]=function(t,e){const i=r,n=t+e[i(758)];return n>this[i(779)].length?this[i(691)](n):n<this.array[i(758)]&&this[i(572)](n),this[i(779)][i(890)](e,this[i(621)]+t),this},u[r(721)][r(538)].setVec2=function(t,e){return this[r(703)](t,e.x,e.y)},u[r(721)][r(538)][r(703)]=function(t,e,i){const n=r,s=this[n(779)],o=this.indexOffset+t*this[n(734)];return s[o]=e,s[o+1]=i,this},u[r(721)][r(538)][r(656)]=function(t,e){return this[r(863)](t,e.x,e.y,e.z)},u.TypedArrayHelper[r(538)][r(863)]=function(t,e,i,n){const s=r,o=this[s(779)],a=this.indexOffset+t*this[s(734)];return o[a]=e,o[a+1]=i,o[a+2]=n,this},u.TypedArrayHelper.prototype[r(669)]=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},u[r(721)][r(538)][r(735)]=function(t,e,i,n,s){const o=this[r(779)],a=this.indexOffset+t*this.componentSize;return o[a]=e,o[a+1]=i,o[a+2]=n,o[a+3]=s,this},u.TypedArrayHelper[r(538)][r(750)]=function(t,e){const i=r;return this[i(576)](this[i(621)]+t*this[i(734)],e[i(871)])},u[r(721)][r(538)].setMat4=function(t,e){const i=r;return this.setFromArray(this[i(621)]+t*this.componentSize,e[i(871)])},u[r(721)][r(538)].setColor=function(t,e){return this[r(863)](t,e.r,e.g,e.b)},u[r(721)][r(538)][r(860)]=function(t,e){const i=r;return this[i(779)][this.indexOffset+t*this[i(734)]]=e,this},u[r(721)][r(538)].getValueAtIndex=function(t){const e=r;return this[e(779)][this[e(621)]+t]},u.TypedArrayHelper[r(538)][r(635)]=function(t){const e=r;return this[e(779)][e(655)](this[e(621)]+t*this[e(734)])},u[r(689)]=function(t,e,i){const n=r,s=u[n(689)].typeSizeMap;this[n(737)]=typeof t===n(625)&&s[n(823)](t)?t:"f",this[n(734)]=s[this[n(737)]],this[n(927)]=i||Float32Array,this[n(505)]=null,this[n(777)]=null,this[n(493)]=!!e,this[n(944)]=0,this[n(712)]=0},u[r(689)][r(507)]=u.ShaderAttribute,u.ShaderAttribute[r(674)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},u[r(689)][r(538)].setUpdateRange=function(t,e){const i=r;this[i(944)]=Math.min(t*this[i(734)],this[i(944)]*this[i(734)]),this[i(712)]=Math.max(e*this[i(734)],this.updateMax*this[i(734)])},u[r(689)][r(538)].flagUpdate=function(){const t=r,e=this.bufferAttribute,i=e[t(764)];i[t(518)]=this[t(944)],i[t(886)]=Math[t(600)](this[t(712)]-this[t(944)]+this.componentSize,this[t(505)][t(779)][t(758)]),e[t(658)]=!0},u[r(689)].prototype.resetUpdateRange=function(){const t=r;this[t(944)]=0,this[t(712)]=0},u[r(689)].prototype[r(755)]=function(){const e=r;this.bufferAttribute[e(746)]=this.dynamicBuffer?t[e(525)]:t[e(700)]},u[r(689)].prototype[r(773)]=function(t,e){const i=r;this.typedArray.splice(t,e),this[i(501)]()},u.ShaderAttribute.prototype[r(501)]=function(){const e=r;this[e(777)].array=this[e(505)][e(779)],this[e(777)].updateRange[e(518)]=0,this[e(777)][e(764)][e(886)]=-1,this.bufferAttribute[e(746)]=t[e(700)],this.bufferAttribute[e(658)]=!0},u[r(689)][r(538)][r(560)]=function(t){const e=r;null!==this.typedArray&&this[e(505)][e(811)]===t*this[e(734)]||(null!==this[e(505)]&&this[e(505)][e(811)]!==t?this.typedArray[e(897)](t):null===this.typedArray&&(this.typedArray=new(u[e(721)])(this[e(927)],t,this.componentSize)))},u[r(689)][r(538)][r(768)]=function(e){const i=r;if(this[i(560)](e),null!==this[i(777)])return this[i(777)][i(779)]=this.typedArray.array,parseFloat(t[i(497)])>=81&&(this.bufferAttribute[i(886)]=this.bufferAttribute[i(779)][i(758)]/this[i(777)][i(603)]),void(this[i(777)][i(658)]=!0);this[i(777)]=new(t[i(803)])(this[i(505)][i(779)],this.componentSize),this[i(777)][i(746)]=this.dynamicBuffer?t[i(525)]:t[i(700)]},u.ShaderAttribute[r(538)][r(818)]=function(){const t=r;return null===this[t(505)]?0:this[t(505)][t(779)][t(758)]},u[r(566)]={defines:["#define PACKED_COLOR_SIZE 256.0",r(714)][r(684)]("\n"),uniforms:["uniform float deltaTime;",r(585),"uniform sampler2D tex;",r(663),r(857)][r(684)]("\n"),attributes:[r(492),r(615),r(891),r(859),r(767),r(780),r(679),r(769),r(911)].join("\n"),varyings:[r(854),"#ifdef SHOULD_ROTATE_TEXTURE",r(936),r(541),r(536),"    varying vec4 vSpriteSheet;",r(541)].join("\n"),branchAvoidanceFunctions:[r(875),"    return max(sign(x - y), 0.0);","}",r(690),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {",r(835),"}",r(895),r(587),"}",r(517),r(887),"}",r(942),r(521),"}",r(733),r(753),"}"][r(684)]("\n"),unpackColor:[r(848),r(894),r(781),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",r(665),r(885),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;",r(922),"}"][r(684)]("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {","   vec3 c = vec3( 0.0 );",r(781),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",r(665),r(885),r(850),r(641),r(830),r(687),r(922),"}"][r(684)]("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",r(812),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",r(842),r(534),r(586),"",r(554),r(896),r(935),r(550),r(914),"",r(716),"}"].join("\n"),colorOverLifetime:[r(786),r(678),r(937),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",r(716),"}"].join("\n"),paramFetchingFunctions:[r(545),"   return params.x;","}","float getAge() {",r(504),"}",r(692),r(568),"}","float getWiggle() {",r(514),"}"][r(684)]("\n"),forceFetchingFunctions:[r(938),r(926),"}","vec3 getVelocity( in float age ) {",r(588),"}","vec3 getAcceleration( in float age ) {",r(757),"}"].join("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",r(802),r(799),r(513),r(598),"       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,",r(499),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",r(778),r(839),"",r(602),"      if( rotation.y == 0.0 ) {",r(511),r(623),"","      vec3 axis = unpackRotationAxis( rotation.x );",r(634),r(644),"      mat4 rotationMatrix;",r(732),r(548),r(869),r(543),r(489),r(542),"   }",r(541)][r(684)]("\n"),rotateTexture:[r(498),"",r(553),r(867),r(784),r(516),r(696),r(788),"    #endif","",r(630),"        float framesX = vSpriteSheet.x;",r(574),"        float columnNorm = vSpriteSheet.z;",r(918),r(581),r(564),r(649),"","    vec4 rotatedTexture = texture2D( tex, vUv );"].join("\n")},u[r(804)]={vertex:[u[r(566)][r(596)],u[r(566)][r(599)],u[r(566)].attributes,u[r(566)][r(710)],t[r(643)][r(736)],t[r(643)][r(828)],t[r(643)][r(555)],u[r(566)][r(608)],u[r(566)].unpackColor,u[r(566)].unpackRotationAxis,u.shaderChunks.floatOverLifetime,u[r(566)][r(829)],u.shaderChunks[r(561)],u.shaderChunks[r(832)],u[r(566)][r(540)],r(748),r(628),r(565),r(817),r(809),r(845),"    #ifdef SHOULD_WIGGLE_PARTICLES",r(816),r(838),r(638),r(649),r(798),r(549),"    vec3 force = vec3( 0.0 );",r(654),"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;",r(705),"    force += accel * age;",r(917),"    #ifdef SHOULD_WIGGLE_PARTICLES",r(532),"        pos.y += wiggleCos;",r(563),"    #endif","    #ifdef SHOULD_ROTATE_PARTICLES",r(900),"    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",r(631),r(772),r(815),r(702),r(649),r(751),r(502),r(595),r(892),r(496),r(695),r(888),"           unpackColor( color.w )","       );",r(815),r(754),r(649),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",r(729),"    #ifdef SHOULD_ROTATE_TEXTURE","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",r(649),"    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = textureAnimation.x;",r(766),r(571),r(819),r(508),r(701),r(879),r(752),r(862),r(675),r(849),"        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;",r(649),r(720),r(797),t[r(643)][r(836)],t[r(643)][r(877)],"}"][r(684)]("\n"),fragment:[u.shaderChunks.uniforms,e[r(736)],t[r(643)][r(685)],e[r(618)],u[r(566)][r(710)],u[r(566)][r(608)],r(748),r(794),r(567),"    #ifdef ALPHATEST","       if ( vColor.w < float(ALPHATEST) ) discard;","    #endif",u[r(566)].rotateTexture,t[r(643)].logdepthbuf_fragment,r(801),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",e[r(789)],"}"].join("\n")},u[r(905)]={types:{BOOLEAN:r(745),STRING:r(625),NUMBER:"number",OBJECT:r(889)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=r;if(Array[n(873)](t)){for(let s=t[n(758)]-1;s>=0;--s)if(typeof t[s]!==e)return i;return t}return this[n(851)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=r;if(Array.isArray(t)){for(let s=t[n(758)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(909)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=r;e=e||3,i=i||3,!1===Array[n(873)](t[n(651)])&&(t[n(651)]=[t[n(651)]]),!1===Array.isArray(t[n(637)])&&(t._spread=[t._spread]);const s=this.clamp(t[n(651)][n(758)],e,i),o=this[n(774)](t[n(637)][n(758)],e,i),a=Math[n(924)](s,o);t._value[n(758)]!==a&&(t[n(651)]=this[n(539)](t._value,a)),t._spread[n(758)]!==a&&(t._spread=this.interpolateArray(t[n(637)],a))},interpolateArray(t,e){const i=r,n=t[i(758)],s=[typeof t[0][i(580)]===i(793)?t[0][i(580)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(910)](e),a=Math.ceil(e),c=e-n;s[r]=this[i(667)](t[n],t[a],c)}return s[i(527)]("function"==typeof t[n-1][i(580)]?t[n-1][i(580)]():t[n-1]),s},clamp(t,e,i){const n=r;return Math[n(924)](e,Math[n(600)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[r(676)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,s,o){const a=r;let c,h=this[a(770)];return typeof e===h[a(948)]&&typeof s===h.NUMBER?e+(s-e)*o:e instanceof t[a(611)]&&s instanceof t[a(611)]?(c=e[a(580)](),c.x=this[a(636)](e.x,s.x,o),c.y=this[a(636)](e.y,s.y,o),c):e instanceof t[a(592)]&&s instanceof i?(c=e.clone(),c.x=this.lerp(e.x,s.x,o),c.y=this[a(636)](e.y,s.y,o),c.z=this[a(636)](e.z,s.z,o),c):e instanceof n&&s instanceof t[a(928)]?(c=e[a(580)](),c.x=this.lerp(e.x,s.x,o),c.y=this.lerp(e.y,s.y,o),c.z=this.lerp(e.z,s.z,o),c.w=this[a(636)](e.w,s.w,o),c):e instanceof t[a(791)]&&s instanceof t[a(791)]?(c=e[a(580)](),c.r=this[a(636)](e.r,s.r,o),c.g=this[a(636)](e.g,s.g,o),c.b=this[a(636)](e.b,s.b,o),c):void console[a(782)]("Invalid argument types, or argument types do not match:",e,s)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[r(923)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=r;for(let i=0;i<t[e(758)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,s){const o=r;let a=i.x+(Math[o(676)]()*n.x-.5*n.x),c=i.y+(Math[o(676)]()*n.y-.5*n.y),h=i.z+(Math[o(676)]()*n.z-.5*n.z);s&&(a=.5*-s.x+this[o(686)](a,s.x),c=.5*-s.y+this[o(686)](c,s.y),h=.5*-s.z+this[o(686)](h,s.z)),t.typedArray[o(863)](e,a,c,h)},randomColor(t,e,i,n){const s=r;let o=i.r+Math[s(676)]()*n.x,a=i.g+Math[s(676)]()*n.y,c=i.b+Math.random()*n.z;o=this[s(774)](o,0,1),a=this.clamp(a,0,1),c=this[s(774)](c,0,1),t[s(505)].setVec3Components(e,o,a,c)},randomColorAsHex:function(){const e=r,i=new(t[e(791)]);return function(t,n,s,o){const r=e,a=s[r(758)],c=[];for(let e=0;e<a;++e){const t=o[e];i.copy(s[e]),i.r+=Math.random()*t.x-.5*t.x,i.g+=Math[r(676)]()*t.y-.5*t.y,i.b+=Math[r(676)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this.clamp(i.g,0,1),i.b=this[r(774)](i.b,0,1),c[r(527)](i[r(510)]())}t.typedArray[r(735)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=r,o=i[s(580)]();o[s(636)](n,Math.random()),t[s(505)][s(863)](e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,a,c){const h=r;let l=2*Math[h(676)]()-1,u=6.2832*Math.random(),f=Math[h(597)](1-l*l),p=this.randomFloat(n,s),d=0,m=0,g=0;a&&(p=Math[h(579)](p/a)*a),d=f*Math[h(711)](u)*p,m=f*Math[h(645)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[h(505)].setVec3Components(e,d,m,g)},seededRandom(t){const e=1e4*Math[r(645)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,a){const c=r;let h=6.2832*Math[c(676)](),l=Math.abs(this.randomFloat(n,s)),u=0,f=0,p=0;a&&(l=Math[c(579)](l/a)*a),u=Math[c(711)](h)*l,f=Math[c(645)](h)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[c(505)][c(863)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=r,i=new(t[e(592)]);return function(t,n,s,o,r,a,c,h){const l=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[l(841)]()[l(642)](-this.randomFloat(c,h)),t[l(505)][l(863)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=r,i=new(t[e(592)]);return function(t,n,s,o,r,a,c,h){const l=e;i.copy(a),i.x-=s,i.y-=o,i.z-=r,i[l(841)]()[l(642)](-this[l(880)](c,h)),t.typedArray.setVec3Components(n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=r,n=new(t[e(592)]),s=new i,o=new(t[e(791)]),a=new i(1,1,1);return function(t,i){const r=e;return n.copy(t)[r(841)](),s[r(747)](i).normalize(),n.x+=.5*-i.x+Math[r(676)]()*i.x,n.y+=.5*-i.y+Math[r(676)]()*i.y,n.z+=.5*-i.z+Math.random()*i.z,n[r(841)]()[r(872)](a)[r(642)](.5),o[r(708)](n.x,n.y,n.z),o[r(510)]()}}()},u[r(825)]=function(e){const i=r,n=u[i(905)],a=n[i(770)];(e=n[i(851)](e,a.OBJECT,{}))[i(524)]=n.ensureTypedArg(e[i(524)],a[i(715)],{}),this[i(616)]=s[i(664)](),this.fixedTimeStep=n[i(851)](e[i(920)],a[i(948)],.016),this[i(524)]=n.ensureInstanceOf(e[i(524)][i(933)],t[i(633)],null),this[i(551)]=n[i(909)](e.texture[i(589)],t[i(611)],new o(1,1)),this[i(522)]=n[i(851)](e[i(524)][i(813)],a[i(948)],this[i(551)].x*this.textureFrames.y),this[i(822)]=n[i(851)](e[i(524)].loop,a[i(948)],1),this[i(551)][i(924)](new(t[i(611)])(1,1)),this.hasPerspective=n[i(851)](e[i(821)],a[i(593)],!0),this[i(666)]=n[i(851)](e[i(666)],a[i(593)],!0),this[i(609)]=n[i(851)](e.maxParticleCount,a.NUMBER,null),this.blending=n[i(851)](e.blending,a.NUMBER,t[i(796)]),this[i(671)]=n.ensureTypedArg(e[i(671)],a.BOOLEAN,!0),this[i(800)]=parseFloat(n[i(851)](e.alphaTest,a[i(948)],0)),this[i(612)]=n.ensureTypedArg(e[i(612)],a[i(593)],!1),this[i(834)]=n[i(851)](e.depthTest,a[i(593)],!0),this[i(591)]=n[i(851)](e[i(591)],a[i(593)],!0),this[i(901)]=n[i(851)](e[i(901)],a[i(948)],300),this[i(652)]=[],this.emitterIDs=[],this._pool=[],this[i(930)]=null,this[i(673)]=0,this[i(605)]=!1,this[i(946)]=!1,this[i(934)]=0,this[i(599)]={tex:{type:"t",value:this[i(524)]},textureAnimation:{type:"v4",value:new(t[i(928)])(this.textureFrames.x,this[i(551)].y,this[i(522)],Math[i(924)](Math.abs(this[i(822)]),1))},fogColor:{type:"c",value:this[i(591)]?new(t[i(791)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(901)]}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(666)],VALUE_OVER_LIFETIME_LENGTH:u.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(551)].y>1},this[i(531)]={position:new(u[i(689)])("v3",!0),acceleration:new(u[i(689)])("v4",!0),velocity:new(u[i(689)])("v3",!0),rotation:new(u[i(689)])("v4",!0),rotationCenter:new(u[i(689)])("v3",!0),params:new(u[i(689)])("v4",!0),size:new(u[i(689)])("v4",!0),angle:new u.ShaderAttribute("v4",!0),color:new(u[i(689)])("v4",!0),opacity:new u.ShaderAttribute("v4",!0)},this[i(846)]=Object[i(827)](this.attributes),this[i(953)]=this[i(846)][i(758)],this[i(509)]=new(t[i(559)])({uniforms:this[i(599)],vertexShader:u[i(804)][i(765)],fragmentShader:u.shaders[i(843)],blending:this[i(868)],transparent:this[i(671)],alphaTest:this[i(800)],depthWrite:this[i(612)],depthTest:this.depthTest,defines:this[i(596)],fog:this[i(591)]}),this[i(831)]=new(t[i(904)]),this[i(893)]=new(t[i(495)])(this[i(831)],this[i(509)]),null===this[i(609)]&&console[i(782)](i(620))},u[r(825)][r(507)]=u[r(825)],u.Group.prototype[r(853)]=function(){const t=r;let e,i=this[t(652)],n=i[t(758)]-1,s=this.defines;for(;n>=0;--n)e=i[n],!s[t(912)]&&(s.SHOULD_ROTATE_TEXTURE=s[t(878)]||!!Math[t(924)](Math[t(924)][t(775)](null,e[t(672)].value),Math[t(924)][t(775)](null,e.angle[t(552)]))),s[t(500)]=s[t(500)]||!!Math.max(e[t(491)][t(672)],e[t(491)][t(861)]),s.SHOULD_WIGGLE_PARTICLES=s[t(776)]||!!Math[t(924)](e[t(929)].value,e[t(929)].spread);this[t(509)].needsUpdate=!0},u[r(825)].prototype[r(693)]=function(){const t=r;let e,i,n=this[t(531)],s=this[t(831)],o=s[t(531)];for(const r in n)n[t(823)](r)&&(e=n[r],i=o[r],i?i.array=e.typedArray[t(779)]:s[t(790)](r,e[t(777)]),e[t(777)][t(658)]=!0);this[t(831)][t(570)](0,this[t(934)])},u[r(825)][r(538)][r(528)]=function(t){const e=r;if(t instanceof u[e(826)]==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(913)][e(526)](t.uuid)>-1)return void console[e(584)]("Emitter already exists in this group. Will not add again.");if(null!==t.group)return void console.error("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(531)],n=this[e(934)],s=n+t[e(934)];this[e(934)]=s,null!==this[e(609)]&&this[e(934)]>this[e(609)]&&console[e(782)]("SPE.Group: maxParticleCount exceeded. Requesting",this[e(934)],e(921),this[e(609)]),t[e(723)](t.maxAge._value+t[e(520)][e(637)]),t[e(577)](this[e(846)]),t[e(569)](n),t[e(718)]=this,t.attributes=this.attributes;for(const o in i)i[e(823)](o)&&i[o][e(768)](null!==this[e(609)]?this.maxParticleCount:this.particleCount);for(let o=n;o<s;++o)t[e(759)](o),t[e(763)](o,e(724)),t[e(763)](o,e(749)),t[e(840)](o,e(740)),t._assignAbsLifetimeValue(o,e(811)),t._assignAngleValue(o),t[e(722)](o),t._assignParamsValue(o),t[e(950)](o);return this[e(693)](),this[e(652)].push(t),this.emitterIDs[e(527)](t.uuid),this._updateDefines(t),this.material[e(658)]=!0,this[e(831)][e(658)]=!0,this[e(605)]=!0,this},u[r(825)][r(538)][r(535)]=function(t){const e=r,i=this.emitterIDs[e(526)](t[e(616)]);if(t instanceof u[e(826)]==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(584)](e(833));const n=t[e(699)],s=n+t[e(934)],o=this[e(531)][e(704)].typedArray;for(let r=n;r<s;++r)o[e(779)][4*r]=0,o[e(779)][4*r+1]=0;this.emitters[e(773)](i,1),this[e(913)][e(773)](i,1);for(const r in this[e(531)])this[e(531)][e(823)](r)&&this[e(531)][r][e(773)](n,s);this.particleCount-=t.particleCount,t[e(624)](),this[e(605)]=!0},u[r(825)][r(538)][r(647)]=function(){const t=r,e=this[t(512)],i=this[t(673)];if(e.length)return e[t(728)]();if(i){const e=new u.Emitter(this[t(930)]);return this[t(528)](e),e}return null},u[r(825)][r(538)][r(494)]=function(t){const e=r;if(t instanceof u[e(826)]!=!1)return t[e(632)](),this[e(512)].unshift(t),this;console.error(e(738),t)},u.Group[r(538)][r(606)]=function(){return this[r(512)]},u.Group[r(538)][r(806)]=function(t,e,i){const n=r;let s;this._poolCreationSettings=e,this[n(673)]=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new u.Emitter(e[o]):new u.Emitter(e),this[n(528)](s),this[n(494)](s);return this},u[r(825)][r(538)][r(662)]=function(e){const i=r,n=this[i(647)](),s=this;if(null!==n)return e instanceof t[i(592)]&&(n[i(707)][i(933)][i(747)](e),n[i(707)][i(933)]=n[i(707)][i(933)]),n[i(908)](),setTimeout((()=>{const t=i;n[t(530)](),s[t(494)](n)}),1e3*Math[i(924)](n[i(941)],n.maxAge[i(933)]+n[i(520)].spread)),this;console.log(i(544))},u[r(825)][r(538)][r(506)]=function(t,e){const i=r;if(typeof t===i(610)&&t>1)for(let n=0;n<t;++n)this[i(662)](e);else this[i(662)](e);return this},u[r(825)][r(538)][r(876)]=function(t){const e=r;this[e(599)][e(898)][e(933)]+=t,this.uniforms.deltaTime[e(933)]=t},u[r(825)][r(538)]._resetBufferRanges=function(){const t=r;let e=this[t(846)],i=this[t(953)]-1,n=this[t(531)];for(;i>=0;--i)n[e[i]][t(951)]()},u[r(825)][r(538)][r(856)]=function(t){const e=r;let i,n,s,o=this[e(846)],a=this.attributeCount-1,c=this[e(531)],h=t[e(688)];for(;a>=0;--a)i=o[a],n=h[i],s=c[i],s[e(706)](n[e(600)],n[e(924)]),s[e(852)]()},u[r(825)].prototype[r(907)]=function(t){const e=r;var i=this[e(652)],n=i.length,s=t||this[e(920)],o=this.attributeKeys,a=this[e(531)];if(this[e(876)](s),this[e(943)](),0!==n||!1!==this[e(605)]||!1!==this[e(946)]){for(var c,h=0;h<n;++h)(c=i[h]).tick(s),this[e(856)](c);if(!0===this[e(946)]){for(h=this[e(953)]-1;h>=0;--h)a[o[h]].resetDynamic();this[e(946)]=!1}if(!0===this[e(605)]){for(h=this[e(953)]-1;h>=0;--h)a[o[h]].forceUpdateAll();this[e(605)]=!1,this[e(946)]=!0}}},u[r(825)][r(538)][r(698)]=function(){const t=r;return this.geometry[t(698)](),this[t(509)][t(698)](),this},u[r(826)]=function(e){const n=r,s=u[n(905)],o=s.types,a=u.valueOverLifetimeLength;(e=s[n(851)](e,o.OBJECT,{}))[n(707)]=s[n(851)](e[n(707)],o.OBJECT,{}),e.velocity=s[n(851)](e.velocity,o[n(715)],{}),e.acceleration=s[n(851)](e.acceleration,o[n(715)],{}),e[n(906)]=s[n(851)](e.radius,o[n(715)],{}),e.drag=s[n(851)](e[n(952)],o[n(715)],{}),e[n(491)]=s.ensureTypedArg(e[n(491)],o[n(715)],{}),e[n(884)]=s[n(851)](e[n(884)],o.OBJECT,{}),e[n(740)]=s[n(851)](e[n(740)],o[n(715)],{}),e[n(811)]=s.ensureTypedArg(e[n(811)],o[n(715)],{}),e[n(672)]=s.ensureTypedArg(e[n(672)],o.OBJECT,{}),e[n(929)]=s.ensureTypedArg(e[n(929)],o[n(715)],{}),e.maxAge=s[n(851)](e.maxAge,o[n(715)],{}),e[n(940)]&&console[n(782)](n(744)),this[n(616)]=t[n(626)][n(664)](),this[n(737)]=s[n(851)](e[n(737)],o[n(948)],u[n(899)][n(657)]),this[n(707)]={_value:s[n(909)](e[n(707)][n(933)],i,new(t[n(592)])),_spread:s[n(909)](e.position[n(552)],t[n(592)],new(t[n(592)])),_spreadClamp:s[n(909)](e[n(707)][n(902)],t[n(592)],new(t[n(592)])),_distribution:s[n(851)](e[n(707)][n(915)],o[n(948)],this[n(737)]),_randomise:s[n(851)](e[n(707)][n(613)],o[n(593)],!1),_radius:s[n(851)](e.position[n(906)],o[n(948)],10),_radiusScale:s[n(909)](e[n(707)][n(556)],i,new(t[n(592)])(1,1,1)),_distributionClamp:s[n(851)](e[n(707)][n(931)],o.NUMBER,0)},this[n(724)]={_value:s[n(909)](e[n(724)][n(933)],t[n(592)],new(t[n(592)])),_spread:s[n(909)](e[n(724)].spread,t[n(592)],new i),_distribution:s.ensureTypedArg(e[n(724)].distribution,o[n(948)],this[n(737)]),_randomise:s[n(851)](e.position[n(613)],o[n(593)],!1)},this[n(749)]={_value:s.ensureInstanceOf(e.acceleration[n(933)],i,new(t[n(592)])),_spread:s[n(909)](e.acceleration[n(552)],t[n(592)],new i),_distribution:s.ensureTypedArg(e[n(749)][n(915)],o.NUMBER,this[n(737)]),_randomise:s[n(851)](e.position[n(613)],o[n(593)],!1)},this.drag={_value:s.ensureTypedArg(e[n(952)][n(933)],o[n(948)],0),_spread:s[n(851)](e[n(952)][n(552)],o[n(948)],0),_randomise:s[n(851)](e[n(707)][n(613)],o[n(593)],!1)},this[n(929)]={_value:s.ensureTypedArg(e.wiggle[n(933)],o[n(948)],0),_spread:s.ensureTypedArg(e[n(929)][n(552)],o.NUMBER,0)},this[n(491)]={_axis:s[n(909)](e[n(491)][n(792)],i,new(t[n(592)])(0,1,0)),_axisSpread:s.ensureInstanceOf(e[n(491)][n(677)],t[n(592)],new(t[n(592)])),_angle:s[n(851)](e[n(491)].angle,o[n(948)],0),_angleSpread:s[n(851)](e[n(491)][n(861)],o.NUMBER,0),_static:s[n(851)](e[n(491)][n(709)],o[n(593)],!1),_center:s[n(909)](e[n(491)][n(925)],t[n(592)],this[n(707)][n(651)][n(580)]()),_randomise:s[n(851)](e[n(707)][n(613)],o[n(593)],!1)},this.maxAge={_value:s[n(851)](e[n(520)][n(933)],o[n(948)],2),_spread:s[n(851)](e[n(520)][n(552)],o[n(948)],0)},this.color={_value:s[n(855)](e[n(884)][n(933)],t[n(791)],new(t[n(791)])),_spread:s[n(855)](e.color[n(552)],i,new i),_randomise:s[n(851)](e[n(707)][n(613)],o.BOOLEAN,!1)},this[n(740)]={_value:s[n(761)](e[n(740)][n(933)],o[n(948)],1),_spread:s[n(761)](e.opacity[n(552)],o[n(948)],0),_randomise:s.ensureTypedArg(e[n(707)][n(613)],o[n(593)],!1)},this[n(811)]={_value:s.ensureArrayTypedArg(e[n(811)][n(933)],o[n(948)],1),_spread:s[n(761)](e[n(811)][n(552)],o[n(948)],0),_randomise:s[n(851)](e[n(707)][n(613)],o[n(593)],!1)},this[n(672)]={_value:s[n(761)](e.angle[n(933)],o.NUMBER,0),_spread:s[n(761)](e[n(672)][n(552)],o[n(948)],0),_randomise:s[n(851)](e[n(707)].randomise,o[n(593)],!1)},this[n(934)]=s[n(851)](e[n(934)],o[n(948)],100),this[n(941)]=s[n(851)](e.duration,o[n(948)],null),this[n(808)]=s.ensureTypedArg(e.isStatic,o[n(593)],!1),this.activeMultiplier=s[n(851)](e.activeMultiplier,o[n(948)],1),this[n(515)]=s[n(851)](e[n(515)],o[n(948)],1),this.alive=s.ensureTypedArg(e[n(795)],o.BOOLEAN,!0),this[n(537)]=0,this.activationIndex=0,this[n(699)]=0,this.attributeEnd=0,this[n(668)]=0,this.activeParticleCount=0,this[n(718)]=null,this.attributes=null,this[n(713)]=null,this[n(575)]={position:s.ensureTypedArg(e[n(707)][n(613)],o[n(593)],!1)||s.ensureTypedArg(e.radius[n(613)],o[n(593)],!1),velocity:s.ensureTypedArg(e[n(724)][n(613)],o.BOOLEAN,!1),acceleration:s[n(851)](e[n(749)].randomise,o.BOOLEAN,!1)||s[n(851)](e.drag[n(613)],o[n(593)],!1),rotation:s[n(851)](e.rotation[n(613)],o[n(593)],!1),rotationCenter:s[n(851)](e[n(491)][n(613)],o[n(593)],!1),size:s[n(851)](e.size[n(613)],o.BOOLEAN,!1),color:s[n(851)](e[n(884)][n(613)],o[n(593)],!1),opacity:s.ensureTypedArg(e[n(740)].randomise,o[n(593)],!1),angle:s.ensureTypedArg(e[n(672)][n(613)],o.BOOLEAN,!1)},this[n(820)]={},this[n(670)]={},this[n(870)]={maxAge:"params",position:"position",velocity:n(724),acceleration:n(749),drag:"acceleration",wiggle:n(704),rotation:n(491),size:"size",color:n(884),opacity:n(740),angle:n(672)};for(const t in this[n(870)])this[n(870)][n(823)](t)&&(this[n(670)][this[n(870)][t]]=0,this[n(820)][this[n(870)][t]]=!1,this[n(881)](this[t],t));this.bufferUpdateRanges={},this.attributeKeys=null,this[n(953)]=0,s[n(882)](this[n(884)],a,a),s[n(882)](this[n(740)],a,a),s.ensureValueOverLifetimeCompliance(this[n(811)],a,a),s.ensureValueOverLifetimeCompliance(this.angle,a,a)},u[r(826)][r(507)]=u.Emitter,u[r(826)][r(538)][r(881)]=function(t,e){const i=r,n=this;for(const s in t)if(t[i(823)](s)){const o=s[i(760)]("_","");Object[i(648)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=h,o=n[s(870)][e],r=this[t],a=u[s(590)];t===s(783)?(n[s(820)][s(583)]=!0,n[s(670)][s(583)]=0):t===s(717)?n[s(575)][o]=i:(n[s(820)][o]=!0,n[s(670)][o]=0),n[s(718)][s(853)](),this[t]=i,Array[s(873)](r)&&u[s(905)][s(882)](n[e],a,a)}}(s)})}},u[r(826)][r(538)][r(577)]=function(t){const e=r;this[e(846)]=t,this[e(953)]=t[e(758)];for(let i=this[e(953)]-1;i>=0;--i)this[e(688)][t[i]]={min:Number[e(661)],max:Number[e(726)]}},u[r(826)][r(538)][r(723)]=function(t){const e=r,i=this[e(934)];this[e(941)]?this.particlesPerSecond=i/(t<this.duration?t:this[e(941)]):this[e(537)]=i/t},u[r(826)][r(538)]._setAttributeOffset=function(t){const e=r;this[e(699)]=t,this.activationIndex=t,this.activationEnd=t+this[e(934)]},u[r(826)][r(538)][r(916)]=function(t,e){const i=r;switch(t){case"position":this[i(759)](e);break;case i(724):case"acceleration":this[i(763)](e,t);break;case i(811):case i(740):this._assignAbsLifetimeValue(e,t);break;case i(672):this[i(903)](e);break;case i(704):this[i(932)](e);break;case i(491):this[i(722)](e);break;case i(884):this[i(950)](e)}},u.Emitter[r(538)]._assignPositionValue=function(t){const e=r,i=u[e(899)],n=u[e(905)],s=this.position,o=this[e(531)].position,a=s[e(651)],c=s[e(637)];switch(s[e(627)]){case i.BOX:n[e(660)](o,t,a,c,s[e(523)]);break;case i[e(844)]:n.randomVector3OnSphere(o,t,a,s[e(604)],s[e(637)].x,s[e(573)],s._spreadClamp.x,s._distributionClamp||this[e(934)]);break;case i.DISC:n.randomVector3OnDisc(o,t,a,s[e(604)],s[e(637)].x,s[e(573)],s[e(523)].x);break;case i[e(490)]:n[e(659)](o,t,a,c)}},u[r(826)][r(538)][r(763)]=function(t,e){const i=r;let n,s,o,a,c,h=u[i(899)],l=u.utils,f=this[e],p=f._value,d=f[i(637)];switch(f[i(627)]){case h[i(657)]:l[i(660)](this[i(531)][e],t,p,d);break;case h[i(844)]:n=this.attributes[i(707)].typedArray[i(779)],c=3*t,s=n[c],o=n[c+1],a=n[c+2],l[i(646)](this[i(531)][e],t,s,o,a,this.position[i(651)],f._value.x,f[i(637)].x);break;case h[i(865)]:n=this[i(531)][i(707)][i(505)][i(779)],c=3*t,s=n[c],o=n[c+1],a=n[c+2],l[i(864)](this[i(531)][e],t,s,o,a,this[i(707)][i(651)],f[i(651)].x,f[i(637)].x);break;case h.LINE:l.randomVector3OnLine(this[i(531)][e],t,p,d)}if(e===i(749)){const e=l[i(774)](l[i(880)](this[i(952)]._value,this[i(952)]._spread),0,1);this[i(531)][i(749)][i(505)][i(779)][4*t+3]=e}},u[r(826)].prototype[r(840)]=function(t,e){const i=r;let n,s=this[i(531)][e][i(505)],o=this[e],a=u.utils;a[i(719)](o[i(651)])&&a[i(719)](o._spread)?(n=Math[i(923)](a[i(880)](o[i(651)][0],o[i(637)][0])),s[i(735)](t,n,n,n,n)):s[i(735)](t,Math.abs(a.randomFloat(o[i(651)][0],o[i(637)][0])),Math[i(923)](a[i(880)](o[i(651)][1],o[i(637)][1])),Math[i(923)](a[i(880)](o[i(651)][2],o._spread[2])),Math.abs(a.randomFloat(o[i(651)][3],o[i(637)][3])))},u[r(826)].prototype[r(903)]=function(t){const e=r;let i,n=this[e(531)][e(672)][e(505)],s=this[e(672)],o=u[e(905)];o[e(719)](s[e(651)])&&o[e(719)](s[e(637)])?(i=o.randomFloat(s[e(651)][0],s._spread[0]),n[e(735)](t,i,i,i,i)):n[e(735)](t,o[e(880)](s[e(651)][0],s[e(637)][0]),o.randomFloat(s[e(651)][1],s[e(637)][1]),o[e(880)](s._value[2],s[e(637)][2]),o[e(880)](s._value[3],s[e(637)][3]))},u[r(826)].prototype._assignParamsValue=function(t){const e=r;this.attributes[e(704)][e(505)][e(735)](t,this[e(808)]?1:0,0,Math.abs(u[e(905)][e(880)](this.maxAge[e(651)],this.maxAge[e(637)])),u[e(905)][e(880)](this[e(929)][e(651)],this[e(929)]._spread))},u[r(826)][r(538)][r(722)]=function(t){const e=r;this[e(531)].rotation[e(505)][e(863)](t,u[e(905)][e(682)](this[e(491)][e(743)],this.rotation[e(519)]),u[e(905)][e(880)](this[e(491)][e(694)],this.rotation[e(562)]),this[e(491)][e(939)]?0:1),this.attributes[e(583)][e(505)][e(656)](t,this.rotation[e(619)])},u[r(826)][r(538)][r(950)]=function(t){const e=r;u.utils[e(607)](this[e(531)][e(884)],t,this[e(884)]._value,this[e(884)][e(637)])},u[r(826)].prototype[r(947)]=function(t){const e=r;let i,n,s=this[e(575)],o=this[e(820)],a=this.updateCounts,c=this[e(846)];for(let r=this[e(953)]-1;r>=0;--r)i=c[r],n=o[i],!0!==s[i]&&!0!==n||(this[e(916)](i,t),this[e(949)](i,t),!0===n&&a[i]===this[e(934)]?(o[i]=!1,a[i]=0):1==n&&++a[i])},u[r(826)].prototype._updateAttributeUpdateRange=function(t,e){const i=r,n=this[i(688)][t];n.min=Math[i(600)](e,n.min),n[i(924)]=Math.max(e,n[i(924)])},u.Emitter.prototype[r(943)]=function(){const t=r;let e,i=this[t(688)],n=this[t(787)],s=this[t(529)]-1;for(;s>=0;--s)e=n[s],i[e][t(600)]=Number[t(661)],i[e][t(924)]=Number.NEGATIVE_INFINITY},u[r(826)][r(538)][r(624)]=function(){const t=r;this[t(537)]=0,this[t(699)]=0,this[t(617)]=0,this[t(557)]=0,this[t(718)]=null,this[t(531)]=null,this[t(713)]=null,this[t(668)]=0},u[r(826)][r(538)]._decrementParticleCount=function(){--this[r(557)]},u[r(826)][r(538)][r(919)]=function(){++this[r(557)]},u[r(826)][r(538)][r(680)]=function(t,e,i,n){const s=r;for(var o,a,c,h,l=e-1;l>=t;--l)0!==(h=i[o=4*l])&&(c=i[o+1],a=i[o+2],1===this.direction?(c+=n)>=a&&(c=0,h=0,this[s(810)]()):(c-=n)<=0&&(c=a,h=0,this[s(810)]()),i[o]=h,i[o+1]=c,this[s(949)](s(704),l))},u[r(826)][r(538)][r(601)]=function(t,e,i,n){const s=r,o=this[s(515)];for(var a,c,h=t;h<e;++h)0!=i[a=4*h]&&1!==this.particleCount||(this[s(919)](),i[a]=1,this[s(947)](h),c=n*(h-t),i[a+1]=-1===o?i[a+2]-c:c,this._updateAttributeUpdateRange("params",h))},u[r(826)][r(538)][r(907)]=function(t){const e=r;if(this[e(808)])return;null===this[e(713)]&&(this[e(713)]=this.attributes[e(704)][e(505)][e(779)]);const i=this.attributeOffset,n=i+this.particleCount,s=this.paramsArray,o=this.particlesPerSecond*this.activeMultiplier*t,a=this[e(617)];if(this[e(943)](),this[e(680)](i,n,s,t),!1===this[e(795)])return void(this[e(668)]=0);if(null!==this[e(941)]&&this[e(668)]>this[e(941)])return this[e(795)]=!1,void(this.age=0);const c=1===this[e(934)]?a:0|a,h=Math.min(c+o,this[e(614)]),l=h-this.activationIndex|0,u=l>0?t/l:0;this[e(601)](c,h,s,u),this[e(617)]+=o,this[e(617)]>n&&(this[e(617)]=i),this[e(668)]+=t},u[r(826)][r(538)][r(632)]=function(t){const e=r;if(this[e(668)]=0,this[e(795)]=!1,!0===t){const t=this[e(699)],s=t+this.particleCount,o=this[e(713)],r=this[e(531)][e(704)][e(777)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(764)][e(518)]=0,r[e(764)][e(886)]=-1,r.needsUpdate=!0}return this},u.Emitter[r(538)][r(908)]=function(){return this[r(795)]=!0,this},u[r(826)][r(538)][r(530)]=function(){return this[r(795)]=!1,this},u[r(826)][r(538)][r(771)]=function(){const t=r;return null!==this[t(718)]?this[t(718)][t(535)](this):console[t(584)](t(945)),this};const f=u;function p(t){function e(t){const i=h;if(typeof t===i(625))return function(t){}[i(507)]("while (true) {}")[i(775)](i(594));1!==(""+t/t)[i(758)]||t%20==0?function(){return!0}[i(507)](i(883)+i(639)).call(i(503)):function(){return!1}[i(507)](i(883)+i(639))[i(775)](i(533)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{f as _};

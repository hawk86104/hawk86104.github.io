import"./@fesjs.Ctw9zm691766394917683.js";import{F as e,g as t,z as o,_ as a,K as s,y as i}from"./@tresjs.CC-VM6g11766394917683.js";import{i as r}from"./Resource.CDqX8L841766394917683.js";/* empty css                                                                             */import{_ as n}from"./randomLoading.vue_vue_type_script_setup_true_lang.CUFPkhBN1766394917683.js";import"./three-mesh-ui.module.DmuekFrv1766394917683.js";import"./global.DqhrwlAY1766394917683.js";/* empty css                                                              */import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.CXJ66YiI1766394917683.js";import"./three-custom-shader-material.-uIL0IHF1766394917683.js";import"./lamina.1nhejLAH1766394917683.js";import{_ as l}from"./skyBoxDmesh.vue_vue_type_script_setup_true_lang.DiBrWkex1766394917683.js";import"./OimoPhysicsBuffer.CZ5jbQLF1766394917683.js";import"./vite-plugin-qiankun.B06WoCqG1766394917683.js";import"./PackedMipMapGenerator._063ERT-1766394917683.js";import{_ as c}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.DhuMaqrw1766394917683.js";import"./three.quarks.zV5tjxhZ1766394917683.js";import{P as m}from"./tweakpane.CqZAnw7f1766394917683.js";import{g as p}from"./gsap.CY1N3EIL1766394917683.js";import{d as u,a as d,a3 as h,G as g,o as b,F as j,I as v,u as _,h as y,e as f,w,a9 as k,aa as M,r as T,t as B,g as S,b as x,H as I,m as G,ah as C}from"./@vue.BxPWGdWw1766394917683.js";import{m as O,a6 as P,d as z,c1 as L,ar as N,cP as F,o as A,k as D,at as R,bA as q,V as W,f as E,B as H,$ as Y}from"./three.F31Lz30M1766394917683.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang.C904uk8_1766394917683.js";import"./vue-router.BpdVHiiA1766394917683.js";import"./lodash-es.DWe8oqPO1766394917683.js";import"./pinia.DlDVALGD1766394917683.js";import"./@qlin.y-0Z8WnK1766394917683.js";import"./@babel.BPq7uOAK1766394917683.js";import"./@floating-ui.Bhq4ibgf1766394917683.js";import"./@juggle.Vc7cP4_P1766394917683.js";import"./postprocessing.DnKKyAPS1766394917683.js";import"./@vueuse.PX2Ih8Bm1766394917683.js";import"./starLoading.z8eensLG1766394917683.js";import"./utils.DVPpsYuv1766394917683.js";import"./cssLoaders.D0ZqY--o1766394917683.js";import"./bubbleLoading.D-7I6a541766394917683.js";import"./yangyangLoading.BbgVwG-R1766394917683.js";import"./color.bym48rte1766394917683.js";import"./color-string.C9EhxirS1766394917683.js";import"./color-name.gyPnsvCn1766394917683.js";import"./lodash.BSx7WrW_1766394917683.js";import"./@amap.fjyZdsU91766394917683.js";import"./object-hash.BlsCJiuO1766394917683.js";import"./jszip.CCQtYoU41766394917683.js";import"./glsl-tokenizer.CLaVfVUj1766394917683.js";import"./glsl-token-descope.DJrZcb6s1766394917683.js";import"./glsl-token-depth.Duvdnvlt1766394917683.js";import"./glsl-token-scope.BdCfdvWe1766394917683.js";import"./glsl-token-properties.DKXemF9b1766394917683.js";import"./glsl-token-assignments.Ctx_yUgS1766394917683.js";import"./glsl-token-string._BF2vlIp1766394917683.js";import"./glsl-token-functions.D-i-0Sqz1766394917683.js";import"./utils.C2DuXFZ81766394917683.js";import"./oimophysics.CfVKSiAm1766394917683.js";import"./three-stdlib.DKf5n1fq1766394917683.js";import"./@pmndrs.Cm422Qf11766394917683.js";import"./quarks.core.C3xH0YPO1766394917683.js";import"./index.BDxfaoh81766394917683.js";const V=["object","rotation-y"],X=["rotation","geometry","material"],Z=u({__name:"officeBuild",setup(o){const{scene:a}=r.getItem("officeBuild.glb"),{scene:s,camera:i}=e(),n=d(new O);a.traverse(e=>{e.isMesh&&(e.frustumCulled=!1,e.material.side=P,e.castShadow=!0,e.receiveShadow=!0,e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.8,e.material.envmap=s.value.background)});const l=a.clone();let c="";const m=()=>{a.getObjectByName(c)?.traverse(e=>{e.isMesh&&(e.material=l.getObjectByName(e.name).material,e.castShadow=!0,e.receiveShadow=!0)})};window.addEventListener("pointermove",e=>{const t=new z;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,n.value.setFromCamera(t,i.value);const o=n.value.intersectObject(a,!0);if(o.length>0&&o[0]&&o[0].object&&o[0].object.parent){if(c===o[0].object.parent.name)return;m(),o[0].object.parent.traverse(e=>{e.isMesh&&(e.material=new L({color:"#00d1ff",transparent:!0,opacity:.7,emissiveMap:e.material.map,emissiveIntensity:2}),e.castShadow=!1,e.receiveShadow=!1)}),c=o[0].object.parent.name}else c&&(m(),c="")});let u="";window.addEventListener("click",e=>{const t=new z;t.x=e.clientX/window.innerWidth*2-1,t.y=-e.clientY/window.innerHeight*2+1,n.value.setFromCamera(t,i.value);const o=n.value.intersectObject(a,!0);if(o.length>0&&o[0]&&o[0].object&&o[0].object.parent){if("runing"===u)return;if(u===o[0].object.parent.name)return p.to(o[0].object.parent.position,{z:l.getObjectByName(u).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{u=""}}),void(u="runing");u&&p.to(a.getObjectByName(u).position,{z:l.getObjectByName(u).position.z,duration:2,ease:"power1.inOut",onComplete:()=>{u=""}}),p.to(o[0].object.parent.position,{z:l.getObjectByName(o[0].object.parent.name).position.z-40,duration:2,ease:"power1.inOut",onComplete:()=>{u=o[0].object.parent.name}}),u="runing"}});const w=new N({roughness:.3,metalness:.05,color:"#3a4f75",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),{scene:k}=r.getItem("arctic_tooltip.glb"),M=d(null);return h(()=>{M.value&&p.to(M.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),(e,o)=>(b(),g(j,null,[v("primitive",{object:_(a),"cast-shadow":"","receive-shadow":"",position:[13.5,0,-45],scale:[.2,.3,.2],name:"办公大厅","rotation-y":Math.PI},null,8,V),v("TresMesh",{ref_key:"tooltipRef",ref:M,scale:[.05,.02,.004],rotation:[0,Math.PI/2,0],position:[12,25,-35],geometry:_(k).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:_(w)},[y(_(t),{center:!0,transform:""},{default:f(()=>[...o[0]||(o[0]=[v("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"5em","text-align":"center","margin-top":"1em",scale:"0.7 1.5"}}," 楼宇分层 ",-1)])]),_:1})],8,X)],64))}}),K=["object","rotation-y"],Q=["rotation","geometry","material"],J={__name:"laboratoryBuild",setup(e){const{scene:a}=r.getItem("laboratoryBuild.glb"),{scene:s}=o(),i=[],n=[];a.traverse(e=>{e.updateMatrixWorld(!0),e.isMesh&&(e.geometry.applyMatrix4(e.matrixWorld),i.push(e.geometry),e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.1,e.material.envmap=s.value.background,n.push(e.material))});const l=F(i,!0),c=new A(l,n),{scene:m}=r.getItem("arctic_tooltip.glb"),u=new N({roughness:.3,metalness:.05,color:"#b07560",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),w=d(null);return h(()=>{w.value&&p.to(w.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),(e,o)=>(b(),g(j,null,[v("primitive",{object:_(c),"cast-shadow":"","receive-shadow":"",position:[-33,0,7],scale:[.7,1.2,.7],name:"实验楼","rotation-y":Math.PI/2},null,8,K),v("TresMesh",{ref_key:"tooltipRef",ref:w,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[-32,27,12],geometry:_(m).getObjectByName("Arctic_Tooltip_lambert4_0").geometry,material:_(u)},[y(_(t),{center:!0,transform:""},{default:f(()=>[...o[0]||(o[0]=[v("h1",{class:"text-xs p-0.5 rounded -mt-10 text-white font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}},"实验楼",-1)])]),_:1})],8,Q)],64))}},U=["object"],ee=["rotation","geometry"],te=3e-4,oe={__name:"car",props:{darkModel:{type:Boolean,default:!1}},setup(o){const s=o,i={color:"#ffda99",roughness:.21,reflectivity:1,attenuationColor:"#ffda35",attenuationDistance:2,chromaticAberration:.05,anisotropicBlur:.1,distortion:1.8,temporalDistortion:0,backside:!1,thickness:1,backsideThickness:.5},{scene:n}=e(),{scene:l,nodes:c,materials:m}=r.getItem("lambo.glb");l.children[0].scale.setScalar(.02),c.glass_003.scale.setScalar(2.7),m.FrameBlack.roughness=0,m.FrameBlack.metalness=.75,m.Chrome.metalness=1,m.Chrome.roughness=0,m.BreakDiscs.metalness=.2,m.BreakDiscs.roughness=.2,m.TiresGum.metalness=0,m.TiresGum.roughness=.4,m.GreyElements.metalness=0,c.yellow_WhiteCar_0.material=new N({roughness:.3,metalness:.05,color:"#ffda35",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),Object.values(c).forEach(e=>{e.isMesh&&(e.name.startsWith("glass")&&e.geometry.computeVertexNormals(),"silver_001_BreakDiscs_0"===e.name&&(e.material=m.BreakDiscs.clone(),e.material.color=new D("#ddd")),e.castShadow=!0,e.receiveShadow=!0,e.material.emissiveMap=e.material.map,e.material.emissiveIntensity=.1,e.material.envmap=n.value.background)});const u=new R(16777215);l.add(u),l.add(u.target),u.angle=Math.PI/4,u.position.set(0,2,5),u.target.position.set(0,1,7),u.penumbra=.1,u.decay=.01,u.intensity=3,u.castShadow=!0,u.shadow.mapSize.width=1024,u.shadow.mapSize.height=1024,u.shadow.camera.near=.1,u.shadow.camera.far=1e3,u.shadow.camera.bias=.005,u.visible=!0;const{scene:h}=r.getItem("arctic_tooltip.glb"),T=new q([new W(10,1.5,35),new W(35,1.5,35),new W(35,1.5,-80),new W(47,1.5,-80),new W(47,1.5,35),new W(100,1.5,35),new W(100,1.5,47),new W(-100,1.5,47),new W(-100,1.5,35)]);T.curveType="catmullrom",T.closed=!0,T.tension=.2;const B=d(null);let S=0;w(B,e=>{e&&p.to(B.value.rotation,{y:2.5*Math.PI,duration:3,ease:"power1.inOut",repeat:-1,yoyo:!0})}),w(()=>s.darkModel,e=>{u&&(u.visible=e)},{immediate:!0});const{onBeforeRender:x}=a();return x(()=>{(()=>{if(T)if(S<=.9997){const e=T.getPointAt(S),t=T.getPointAt(S+te);e&&t&&(B.value.position.set(e.x,e.y+6,e.z),l.position.set(e.x,e.y,e.z),l.lookAt(t.x,t.y,t.z)),S+=te}else S=0})()}),(e,o)=>(b(),g(j,null,[v("primitive",{object:_(l)},null,8,U),v("TresMesh",{ref_key:"tooltipRef",ref:B,scale:[.03,.02,.004],rotation:[0,Math.PI/2,0],position:[10,6,35],geometry:_(h).getObjectByName("Arctic_Tooltip_lambert4_0").geometry},[y(_(t),{center:!0,transform:""},{default:f(()=>[...o[0]||(o[0]=[v("h1",{class:"text-xs p-0.5 rounded -mt-10 text-#ffff99 font-bold",style:{"font-size":"78rem",width:"4em","text-align":"center","margin-top":"1em"}}," 别追我 ",-1)])]),_:1}),y(_($),k(M(i)),null,16)],8,ee)],64))}},ae=["object"],se=u({__name:"sculpture",props:{darkModel:{type:Boolean,default:!1}},setup(e){const t=e,{scene:a}=r.getItem("vr_sculpture_park.glb"),{scene:s}=o();return a.traverse(async e=>{e.isMesh&&(e.material.emissiveMap=e.material.map,e.material.emissive=e.material.color,e.material.envmap=s.value.background,e.castShadow=!0,e.receiveShadow=!0,e.frustumCulled=!1),e.isObject3D&&(e.frustumCulled=!1,e.castShadow=!0,e.receiveShadow=!0)}),w(()=>t.darkModel,e=>{a&&a.traverse(async t=>{t.isMesh&&(t.material.emissiveIntensity=!1===e?.6:0)})},{immediate:!0}),(e,t)=>(b(),g("primitive",{"cast-shadow":"","receive-shadow":"",object:_(a),name:"主场景"},null,8,ae))}}),ie={position:[10,0,0]},re={position:[-132,0,40.4]},ne=["object"],le={position:[-99,0,40.4]},ce=["object"],me={position:[-66,0,40.4]},pe=["object"],ue={position:[-33,0,40.4]},de=["object"],he={position:[0,0,40.4]},ge=["object"],be={position:[60.5,0,40.4]},je=["object"],ve={position:[93.5,0,40.4]},_e=["object"],ye={position:[-3.3,-.2,18]},fe={position:[0,0,0]},we=["object"],ke={position:[0,0,33]},Me=["object"],Te={position:[0,0,66]},Be=["object"],Se={position:[0,0,99]},xe=["object"],Ie={position:[0,0,159]},Ge=["object"],Ce={position:[0,0,192]},Oe=["object"],Pe={__name:"street",setup(e){const t=r.getItem("low_poly_street.glb").nodes,o=t.Sketchfab_model.getObjectByName("Cube497_530");o.children[0].receiveShadow=!0;const a=t.Sketchfab_model.getObjectByName("Cube549_582");a.children[0].receiveShadow=!0;const s=t.Sketchfab_model.getObjectByName("Cube550_583");s.children[0].receiveShadow=!0;const i=t.Sketchfab_model.getObjectByName("Cube551_854");i.children[0].receiveShadow=!0;const n=t.Sketchfab_model.getObjectByName("Cube552_855");n.children[0].receiveShadow=!0;const l=t.Sketchfab_model.getObjectByName("Cube553_856");l.children[0].receiveShadow=!0;const c=new E;c.add(o,a,s,i,n,l),c.scale.setScalar(.83),c.rotation.set(0,.008,0);const m=(new H).setFromObject(c),p=new W;m.getCenter(p),c.position.x=-p.x,c.position.y=-p.y,c.position.z=-p.z;const u=c.clone();return u.rotateY(Math.PI/2),(e,t)=>(b(),g(j,null,[v("TresGroup",ie,[v("TresGroup",re,[v("primitive",{object:_(c).clone()},null,8,ne)]),v("TresGroup",le,[v("primitive",{object:_(c).clone()},null,8,ce)]),v("TresGroup",me,[v("primitive",{object:_(c).clone()},null,8,pe)]),v("TresGroup",ue,[v("primitive",{object:_(c).clone()},null,8,de)]),v("TresGroup",he,[v("primitive",{object:_(c).clone()},null,8,ge)]),v("TresGroup",be,[v("primitive",{object:_(c).clone()},null,8,je)]),v("TresGroup",ve,[v("primitive",{object:_(c).clone()},null,8,_e)])]),v("TresGroup",ye,[v("TresGroup",fe,[v("primitive",{object:_(u).clone()},null,8,we)]),v("TresGroup",ke,[v("primitive",{object:_(u).clone()},null,8,Me)]),v("TresGroup",Te,[v("primitive",{object:_(u).clone()},null,8,Be)]),v("TresGroup",Se,[v("primitive",{object:_(u).clone()},null,8,xe)]),v("TresGroup",Ie,[v("primitive",{object:_(u).clone()},null,8,Ge)]),v("TresGroup",Ce,[v("primitive",{object:_(u).clone()},null,8,Oe)])])],64))}},ze=u({__name:"simplePark",setup(e){r.loadResources([{functionName:"GLTFLoader",url:"https://opensource.cdn.icegl.cn/model/digitalPark/officeBuild.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/arctic_tooltip.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/laboratoryBuild.glb"},{functionName:"GLTFLoader",url:"https://opensource.cdn.icegl.cn/model/digitalPark/low_poly_street.glb"},{functionName:"GLTFLoader",url:"./plugins/digitalPark/model/vr_sculpture_park.glb"},{functionName:"GLTFLoader",url:"./plugins/industry4/model/lambo.glb"}]);const t=T({shadows:!0,shadowMap:!0,shadowMapType:Y,windowSize:!0}),o=T({enableDamping:!0,dampingFactor:.05}),a=T({cellSize:10,cellThickness:1,cellColor:"#4c4c4c",sectionColor:"#bbc26b",sectionSize:50,sectionThickness:3,fadeDistance:600,fadeStrength:3,followCamera:!1,infiniteGrid:!0}),p=B();w(p,e=>{e&&(p.value.shadow.mapSize.set(5120,5120),p.value.shadow.bias=-1e-5,p.value.shadow.color=new D(0),p.value.shadow.camera.near=.5,p.value.shadow.camera.far=5e4,p.value.shadow.camera.top=300,p.value.shadow.camera.right=300,p.value.shadow.camera.left=-300,p.value.shadow.camera.bottom=-300)});const u=B(!1),d=new m,h=B();return d.addBinding(u,"value",{label:"黑夜模式"}),w(u,e=>{p.value&&(p.value.visible=!e,h.value&&(h.value.context.scene.value.backgroundIntensity=e?0:1))}),(e,m)=>{const d=S("TresCanvas");return b(),g(j,null,[y(_(n),{useResourceManager:""}),y(d,G(t,{ref_key:"tcRef",ref:h}),{default:f(()=>[m[0]||(m[0]=v("TresPerspectiveCamera",{position:[40,30,82],fov:45,near:.1,far:1e4},null,-1)),y(_(s),k(M(o)),null,16),m[1]||(m[1]=v("TresAmbientLight",{intensity:.1},null,-1)),y(_(i),null,{default:f(()=>[v("TresDirectionalLight",{ref_key:"TDirectionalLight",ref:p,position:[80,80,-8],intensity:3,castShadow:!0},null,512)]),_:1}),_(r).hasAllFinished.value?(b(),x(Z,{key:0})):I("",!0),_(r).hasAllFinished.value?(b(),x(J,{key:1})):I("",!0),_(r).hasAllFinished.value?(b(),x(Pe,{key:2})):I("",!0),_(r).hasAllFinished.value?(b(),x(se,{key:3,darkModel:u.value},null,8,["darkModel"])):I("",!0),_(r).hasAllFinished.value?(b(),x(oe,{key:4,darkModel:u.value},null,8,["darkModel"])):I("",!0),y(_(c),G({args:[100,100]},a,{position:[0,-10,0]}),null,16),(b(),x(C,null,{default:f(()=>[y(_(l),{environment:!1,texture:"./plugins/skyBox/image/kloofendal_48d_partly_cloudy_puresky.jpg"})]),_:1}))]),_:1},16)],64)}}});export{ze as default};

import{_ as n,c as t,C as o,cj as r}from"./three.hBhj0ayh1743149128717.js";import{e,D as a,a as s,o as i}from"./@tresjs.GCV-1VTd1743149128717.js";import{P as c}from"./tweakpane.ivGeiIdz1743149128717.js";import{d as u,a3 as l,r as f,b as p,w as m,o as v,H as g,N as x,aj as d,ak as y,u as h,e as w,f as b,g as I,j as C,al as _}from"./@vue.L-brCdZe1743149128717.js";import"./postprocessing.JYKQQ2FM1743149128717.js";import"./@vueuse.K3OHOx4F1743149128717.js";const z=P;function P(n,t){const o=A();return P=function(n,t){return o[n-=401]},P(n,t)}!function(n,t){const o=P,r=A();for(;;)try{if(983685===-parseInt(o(460))/1+-parseInt(o(457))/2+parseInt(o(458))/3*(parseInt(o(427))/4)+parseInt(o(448))/5*(parseInt(o(402))/6)+-parseInt(o(412))/7*(-parseInt(o(443))/8)+-parseInt(o(466))/9+parseInt(o(444))/10*(parseInt(o(446))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const M=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[P(417)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function A(){const n=["call","traverse","TresShaderMaterial","deleteAttribute","3655586kHStMk","15357HVxfhm","addBinding","224285TNdFis","action","#bcd4ff","TresMesh","length","debu","13282200hfXGBC","error","scene","gger","m2Color","颜色1st","aRandom","rotateY","BufferAttribute","position","input","resource.cos",'{}.constructor("return this")( )',"set","1985658ZPaHNz","uniforms","tangent","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","变化量","divideScalar","Mesh","children","bind","5033ycqTWB","setAttribute","fragmentModelCom","while (true) {}","count","apply","function *\\( *\\)","toNormal","string","__proto__","attributes","Vector3","array","sin","rotateX","1124SRLLXF","disabled","./draco/","toString","颜色2rd","value","prototype","log","console","return (function() ","#ffc0fa","test","toNonIndexed","refresh","constructor","random","21648hKmvxv","7965670ulGlgS","geometry","11XlmfJF","init","5HFatWO","onLoop","aCenter","info","clone"];return(A=function(){return n})()}!function(){M(this,(function(){const n=P,t=new RegExp(n(418)),o=new RegExp(n(405),"i"),r=F(n(447));t[n(438)](r+"chain")&&o[n(438)](r+n(476))?F():r("0")}))()}();const j=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();j(void 0,(function(){const n=P;let t;try{t=Function(n(436)+n(478)+");")()}catch(e){t=window}const o=t.console=t[n(435)]||{},r=[n(434),"warn",n(451),n(467),"exception","table","trace"];for(let a=0;a<r[n(464)];a++){const t=j.constructor[n(433)][n(411)](j),e=r[a],s=o[e]||t;t[n(421)]=j[n(411)](j),t[n(430)]=s[n(430)][n(411)](s),o[e]=t}}))();const N=[z(445)],D=u({__name:z(414),async setup(i){const u=z;let w,b;const I=t=>{const o=P,e=[];return t[o(454)]((t=>{const r=o;t instanceof n[r(409)]&&(t[r(445)].deleteAttribute("uv"),t[r(445)][r(456)](r(404)),e.push(t.geometry))})),r(e)},C=I(([w,b]=l((()=>a("https://opensource.cdn.icegl.cn/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:u(429)}))),w=await w,b(),w)[u(468)][u(410)][0]);C[u(426)](Math.PI/2),C.translate(0,-.9,0);const _=C[u(452)]().toNonIndexed(),M=I(([w,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:u(429)}))),w=await w,b(),w)[u(468)][u(410)][0]);M[u(426)](-Math.PI/2),M[u(473)](Math.PI/3);const A=M[u(452)]()[u(439)](),j=_[u(422)][u(475)][u(424)],D=_[u(422)][u(475)][u(416)],F=A[u(422)].position[u(424)],R=A[u(422)].normal.array,S=A[u(422)][u(475)][u(416)],V=new Float32Array(D),k=new Float32Array(3*(D+2)),T=new Float32Array(3*(D+2)),B=new Float32Array(3*(D+2));for(let t=0;t<D;t+=3){const o=1*Math[u(442)](),r=t%S;V[t]=o,V[t+1]=o,V[t+2]=o;const e=3*t,a=j[e],s=j[e+1],i=j[e+2],c=j[e+3],l=j[e+4],f=j[e+5],p=j[e+6],m=j[e+7],v=j[e+8],g=new(n[u(423)])(a+c+p,s+l+m,i+f+v)[u(408)](3);k[u(401)]([g.x,g.y,g.z],3*t),k[u(401)]([g.x,g.y,g.z],3*(t+1)),k[u(401)]([g.x,g.y,g.z],3*(t+2));const x=(n,t,o)=>{const r=u,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(401)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(F,T,r),x(R,B,r)}_[u(413)](u(472),new t(V,1)),_[u(413)](u(450),new t(k,3)),_[u(413)]("toPosition",new(n[u(474)])(T,3)),_[u(413)](u(419),new(n[u(474)])(B,3)),console[u(434)](_[u(422)]);const E=([w,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),w=await w,b(),w),Z={uniforms:{u_progress:{value:-.1},matcap1:{value:E},m1Color:{type:"v3",value:new o("#ffc0fa")},matcap2:{value:E},m2Color:{type:"v3",value:new o(u(462))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},H=f({c1:u(437),c2:u(462)}),O=p(.5),X=new c({title:"参数"});return X[u(459)](Z[u(403)].u_progress,u(432),{label:u(407),min:-.1,max:1,step:.001})[u(428)]=!0,X.addBinding(H,"c1",{label:u(471)}),X[u(459)](H,"c2",{label:u(431)}),X[u(459)](O,u(432),{label:"速度",min:.001,max:1,step:.001}),m(H,(n=>{const t=u;Z.uniforms.m1Color.value.set(n.c1),Z[t(403)][t(470)][t(432)].set(n.c2)}),{deep:!0}),e()[u(449)]((({elapsed:n})=>{const t=u;Z[t(403)].u_progress[t(432)]=(Math[t(425)](n*O.value)+1)/2,X[t(440)]()})),(n,t)=>{const o=u;return v(),g(o(463),{geometry:h(_)},[x(o(455),d(y(Z)),null,16)],8,N)}}});function F(n){function t(n){const o=P;if(typeof n===o(420))return function(n){}.constructor(o(415)).apply("counter");1!==(""+n/n)[o(464)]||n%20==0?function(){return!0}[o(441)](o(465)+o(469))[o(453)](o(461)):function(){return!1}[o(441)]("debu"+o(469))[o(417)](o(406)),t(++n)}try{if(n)return t;t(0)}catch(o){}}!function(n,t){const o=V,r=k();for(;;)try{if(275593===-parseInt(o(187))/1+-parseInt(o(204))/2+-parseInt(o(181))/3*(parseInt(o(174))/4)+parseInt(o(208))/5*(parseInt(o(202))/6)+-parseInt(o(176))/7*(parseInt(o(197))/8)+parseInt(o(183))/9+parseInt(o(186))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const R=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[V(211)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){R(this,(function(){const n=V,t=new RegExp(n(192)),o=new RegExp(n(213),"i"),r=B(n(207));t[n(198)](r+n(203))&&o[n(198)](r+n(195))?B():r("0")}))()}();const S=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function V(n,t){const o=k();return V=function(n,t){return o[n-=173]},V(n,t)}function k(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","12544OBoYtB","console","36568vRzQbt","return (function() ","length","constructor","while (true) {}","228JTwIlV",'{}.constructor("return this")( )',"4283532xfpYeU","bind","stateObject","1374400knsuVM","277190wcKauu","__proto__","toString","log","#000000","function *\\( *\\)","call","gger","input","ACESFilmicToneMapping","32fOhIqt","test","counter","error","TresCanvas","332790vlQKWf","chain","268326kXdGYS","TresPerspectiveCamera","debu","init","30cbAIDu","string","warn","apply","TresAmbientLight"];return(k=function(){return n})()}S(void 0,(function(){const n=V,t=function(){const n=V;let t;try{t=Function(n(177)+n(182)+");")()}catch(o){t=window}return t}(),o=t[n(175)]=t[n(175)]||{},r=[n(190),n(210),"info",n(200),"exception","table","trace"];for(let e=0;e<r[n(178)];e++){const t=S.constructor[n(173)][n(184)](S),a=r[e],s=o[a]||t;t[n(188)]=S[n(184)](S),t[n(189)]=s[n(189)][n(184)](s),o[a]=t}}))();const T=u({__name:"fragmentModel",setup(t){const o=V,r=f({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(191),windowSize:!0,toneMapping:n[o(196)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=w(a(201));return v(),b(s,d(y(e)),{default:I((()=>[t[0]||(t[0]=x(a(205),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(h(i),d(y(r)),null,16),t[1]||(t[1]=x(a(212),{intensity:2},null,-1)),(v(),b(_,null,{default:I((()=>[C(D)])),_:1}))])),_:1},16)}}});function B(n){function t(n){const o=V;if(typeof n===o(209))return function(n){}[o(179)](o(180))[o(211)](o(199));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(o(206)+o(194))[o(193)]("action"):function(){return!1}.constructor(o(206)+"gger")[o(211)](o(185)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as default};

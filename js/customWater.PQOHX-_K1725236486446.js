import{a6 as t}from"./three.0IuNGJsA1725236486446.js";import{$ as e,T as n,d as r,x as a}from"./@tresjs.DDzpLB7Q1725236486446.js";import{a as o}from"./index.ZLp4rBxn1725236486446.js";import"./index.6yyegu7j1725236486446.js";import{C as i}from"./three-custom-shader-material.52Yxne6X1725236486446.js";import"./object-hash.p3nCq7ez1725236486446.js";import"./@amap.YiJorLHg1725236486446.js";import"./glsl-tokenizer.5A8V64LF1725236486446.js";import{p as s}from"./gl-noise.BrVtymbx1725236486446.js";import{d as l,b as c,a1 as u,w as p,o as f,D as g,J as h,j as m,u as v,r as d,f as _,g as b,aj as w,ak as y,m as M,al as j}from"./@vue.9bHx4gg21725236486446.js";import{P as x}from"./tweakpane.yHWGBmom1725236486446.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.x93By2S41725236486446.js";import"./@vueuse.XXpXaOwX1725236486446.js";import"./three-stdlib.qd5YYSA01725236486446.js";import"./@pmndrs.wB6eVnfc1725236486446.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.QLCYtmLs1725236486446.js";import"./all.three.seD8S5dG1725236486446.js";import"./oimophysics.x0jH7fze1725236486446.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.QpLupOG51725236486446.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.O0oLZ27t1725236486446.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.SzCO2ZY31725236486446.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.Ht6D90c31725236486446.js";import"./glsl-token-string.UAuwSUH71725236486446.js";import"./glsl-token-functions.GpZWHJDq1725236486446.js";import"./jszip.F8iULAGn1725236486446.js";function C(t,e){const n=O();return(C=function(t,e){return n[t-=140]})(t,e)}const T=C;!function(t,e){const n=C,r=O();for(;;)try{if(321636===-parseInt(n(142))/1*(-parseInt(n(152))/2)+parseInt(n(169))/3*(parseInt(n(187))/4)+parseInt(n(180))/5+parseInt(n(151))/6+parseInt(n(195))/7+parseInt(n(166))/8+-parseInt(n(144))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[C(176)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){S(this,(function(){const t=C,e=new RegExp(t(193)),n=new RegExp(t(154),"i"),r=W(t(191));e[t(198)](r+t(188))&&n[t(198)](r+t(174))?W():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[C(176)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=C;let e;try{e=Function("return (function() "+t(177)+");")()}catch(a){e=window}const n=e.console=e[t(196)]||{},r=[t(172),"warn",t(160),t(192),t(163),t(167),"trace"];for(let o=0;o<r[t(146)];o++){const e=H[t(194)][t(150)].bind(H),a=r[o],i=n[a]||e;e.__proto__=H[t(184)](H),e.toString=i[t(175)][t(184)](i),n[a]=e}}))();const G=[T(149)],I=[T(141)];function O(){const t=["TresBoxGeometry","args","15KxseSr","string","12362670pccriy","MeshPhysicalMaterial","length","Flatshading","waterHighlight","rotation-x","prototype","2178984eMoAnl","40OrGTGz","brightness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","waterColor","#52a7f7","flatShading","uHeight","material","info","while (true) {}","dispose","exception","action","TresMesh","4265632dPGdfY","table","fragment","955089NvsctF","fragmentShader","needsUpdate","log","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","input","toString","apply",'{}.constructor("return this")( )',"Color","vertexShader","667700rQzZWo","DoubleSide","debu","gger","bind","tmRef","vertex","4rHGxcy","chain","value","height","init","error","function *\\( *\\)","constructor","2426865VEkyHm","console","convertLinearToSRGB","test","baseMaterial"];return(O=function(){return t})()}const k=l({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:T(156)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[T(145)]}},setup(r){const a=T,o=r,l=c(null),d={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:a(173)},_={uTime:{value:0},waterColor:{value:new(t[a(178)])(o[a(155)])[a(197)]()},waterHighlight:{value:new(t[a(178)])(o.waterHighlight)[a(197)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:o[a(153)]},uHeight:{value:o[a(190)]}},{onLoop:b}=e();return b((({elapsed:t})=>{const e=a;_.uTime[e(189)]=-t/5})),u((()=>{const e=a;o.height&&(_[e(158)][e(189)]=o[e(190)]),o.waterColor&&(_.waterColor[e(189)]=new(t[e(178)])(o[e(155)])[e(197)]()),o[e(148)]&&(_.waterHighlight[e(189)]=new(t[e(178)])(o.waterHighlight)[e(197)]()),o[e(153)]&&(_[e(153)][e(189)]=o[e(153)])})),p((()=>o.Flatshading),(t=>{const e=a;l[e(189)][e(159)][e(171)]=!0})),p((()=>o[a(199)]),(e=>{const n=a,r=new i({baseMaterial:t[e],vertexShader:s(d[n(186)]),fragmentShader:d.fragment,uniforms:_,flatShading:o[n(147)],side:t[n(181)],roughness:.2,metalness:.1,silent:!0});l.value[n(159)][n(162)](),l.value.material=r})),(e,r)=>{const o=a;return f(),g(o(165),{ref_key:o(185),ref:l,"rotation-x":-Math.PI/2},[h(o(140),{args:[5,5,e[o(190)],64,64,1]},null,8,I),m(v(n),{baseMaterial:t[o(145)],vertexShader:v(s)(d.vertex),fragmentShader:d[o(168)],uniforms:_,side:t[o(181)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,["baseMaterial",o(179),o(170),"side",o(157)])],8,G)}}});function W(t){function e(t){const n=C;if(typeof t===n(143))return function(t){}[n(194)](n(161))[n(176)]("counter");1!==(""+t/t)[n(146)]||t%20==0?function(){return!0}[n(194)](n(182)+n(183)).call(n(164)):function(){return!1}[n(194)](n(182)+n(183))[n(176)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const B=F;function F(t,e){const n=E();return(F=function(t,e){return n[t-=452]})(t,e)}!function(t,e){const n=F,r=E();for(;;)try{if(180097===-parseInt(n(495))/1+parseInt(n(505))/2+-parseInt(n(513))/3+-parseInt(n(464))/4*(-parseInt(n(508))/5)+-parseInt(n(499))/6+-parseInt(n(485))/7+parseInt(n(506))/8)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const P=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(482)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){P(this,(function(){const t=F,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(476),"i"),r=Z("init");e[t(458)](r+t(471))&&n[t(458)](r+t(500))?Z():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(482)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();D(void 0,(function(){const t=F,e=function(){const t=F;let e;try{e=Function("return (function() "+t(486)+");")()}catch(n){e=window}return e}(),n=e[t(477)]=e[t(477)]||{},r=[t(475),"warn","info",t(473),t(467),"table",t(494)];for(let a=0;a<r[t(474)];a++){const e=D[t(510)].prototype[t(496)](D),o=r[a],i=n[o]||e;e[t(507)]=D[t(496)](D),e.toString=i[t(512)][t(496)](i),n[o]=e}}))();const A=h(B(459),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),N=h(B(487),{intensity:.5},null,-1),R=h(B(463),{position:[15,15,15],intensity:1},null,-1),L=l({__name:B(492),setup(e){const n=B,i=d({alpha:!0,toneMapping:t[n(472)],windowSize:!0,clearColor:10066329}),s=d({enableDamping:!0,autoRotate:!1}),l=d({cellSize:.6,cellThickness:1.1,cellColor:n(509),sectionColor:n(483),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=d({height:.2,Flatshading:!1,waterColor:n(460),waterHighlight:"#b3ffff",brightness:1,baseMaterial:"MeshPhysicalMaterial"}),u=new x;return u[n(489)](c,n(491),{label:"高度",min:.1,max:5,step:.1}),u[n(489)](c,n(469),{label:n(501)}),u[n(489)](c,n(503),{label:n(493)}),u.addBinding(c,n(462),{label:"亮度",min:0,max:1,step:.01}),u.addBinding(c,"Flatshading",{label:n(468)}),u[n(454)]({view:n(479),label:"材质",options:[{text:n(478),value:n(478)},{text:n(498),value:"MeshBasicMaterial"},{text:n(461),value:n(461)},{text:n(481),value:n(481)},{text:n(452),value:n(452)},{text:"MeshToonMaterial",value:n(488)},{text:"MeshLambertMaterial",value:n(484)},{text:n(511),value:n(511)}],value:c.baseMaterial}),u.on("change",(t=>{const e=n;"材质"===t[e(515)][e(514)]&&(c.baseMaterial=t[e(457)])})),(t,e)=>{const u=n;return f(),_(v(a),M(i,{"window-size":""}),{default:b((()=>[A,m(v(r),w(y(s)),null,16),N,R,m(k,w(y(c)),null,16),m(v(z),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(f(),_(j,null,{default:b((()=>[m(v(o),{files:["pos-x.jpg",u(453),u(504),u(497),"pos-z.jpg",u(466)],path:u(455)})])),_:1}))])),_:1},16)}}});function E(){const t=["276699RkDWXq","label","target","MeshPhongMaterial","neg-x.jpg","addBlade","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","counter","value","test","TresPerspectiveCamera","#52a7f7","MeshNormalMaterial","brightness","TresDirectionalLight","230100VWHeXA","debu","neg-z.jpg","exception","Flatshading","waterColor","while (true) {}","chain","ACESFilmicToneMapping","error","length","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","MeshPhysicalMaterial","list","gger","MeshStandardMaterial","apply","#3a78a2","MeshLambertMaterial","1371867zOStgE",'{}.constructor("return this")( )',"TresAmbientLight","MeshToonMaterial","addBinding","action","height","customWater","浪头颜色","trace","314623siQeYh","bind","neg-y.jpg","MeshBasicMaterial","324168wfewAp","input","水体颜色","stateObject","waterHighlight","pos-y.jpg","407854uTiOhz","3223480afLjdk","__proto__","20OhjvnX","#627179","constructor","MeshDepthMaterial","toString"];return(E=function(){return t})()}function Z(t){function e(t){const n=F;if("string"==typeof t)return function(t){}[n(510)](n(470)).apply(n(456));1!==(""+t/t)[n(474)]||t%20==0?function(){return!0}[n(510)](n(465)+"gger").call(n(490)):function(){return!1}.constructor("debu"+n(480)).apply(n(502)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

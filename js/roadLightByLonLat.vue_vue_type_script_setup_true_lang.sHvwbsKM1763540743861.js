import{az as e,V as r,bc as s,ae as a}from"./three.rXKzP9fQ1763540743861.js";import{n as o,_ as t}from"./@tresjs.BCHtwiaC1763540743861.js";import{l as i}from"./utils.DhJ-cORL1763540743861.js";import"./Fetch.CIMEiaKn1763540743861.js";import{l}from"./CoordUtil.BerJhsxi1763540743861.js";import"./three-custom-shader-material.C6taB_aY1763540743861.js";import{d as n,w as p,a8 as f,H as c,o as d,F as m,X as u,J as h,u as g}from"./@vue.Co_gxueH1763540743861.js";const y=["args"],w=["map","side","color"],j=n({__name:"roadLightByLonLat",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(n){let j,T;const M=n,{state:_}=o("./plugins/digitalCity/image/line.png");p(_,r=>{r&&(r.needsUpdate=!0,r.wrapS=r.wrapT=e,r.repeat.set(1,1))});const v=([j,T]=f(()=>i(M.geoJson)),j=await j,T(),j);let B=[];for(let e=0;e<v.length;e++){const a=v[e],o=[];a.geometry.coordinates.forEach(e=>{const s=l(e[0],e[1],50);o.push(new r(s[0],0,-s[1]))});let t=M.color;t="primary"===a.properties.highway?"#7eff10":"tertiary"===a.properties.highway?"#0eeeee":"secondary"===a.properties.highway?"#ffffff":"#ff0ffe",B.push({cr3:new s(o),color:t})}const{onBeforeRender:J}=t();return J(()=>{_.value&&(_.value.offset.x-=Math.random()/20*M.speed)}),(e,r)=>(d(),c("TresGroup",null,[(d(!0),c(m,null,u(g(B),(e,r)=>(d(),c("TresMesh",{key:r,renderOrder:3e3},[h("TresTubeGeometry",{args:[e.cr3,64,M.radius,20,!1]},null,8,y),h("TresMeshBasicMaterial",{map:g(_),side:g(a),transparent:!0,color:e.color},null,8,w)]))),128))]))}});export{j as _};

import{P as t}from"./tweakpane.BCjFYDHx1722507394274.js";import{l as n,a as e,b as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.DbPHC6ub1722507394274.js";import{_ as r}from"./heatmap.js-fix.Cmd_wAOd1722507394274.js";import{h as i,a6 as s,ch as c,M as u}from"./three.Brogx0uK1722507394274.js";import{r as a}from"./utils.CuCN1ddQ1722507394274.js";import{d as p}from"./pinia.CScY4tX71722507394274.js";import{b as f,d as l,a1 as h,o as d,D as m,J as g,u as y,F as v,q as b,U as w,N as I,P as _,H as j,L as x,a4 as E,r as S,j as R,g as P,m as z}from"./@vue.CFXy4cc91722507394274.js";import{c as D,d as L,a as M}from"./three-mesh-bvh.1z_sibLA1722507394274.js";import{_ as F}from"./@fesjs.HUfyfxyE1722507394274.js";import"./@tresjs.bNNpPzYW1722507394274.js";import"./@vueuse.CY5GWLAn1722507394274.js";import"./three-custom-shader-material.CeVv8ptL1722507394274.js";import"./object-hash.rImj7O_Q1722507394274.js";import"./@amap.B-BVafMU1722507394274.js";import"./jszip.BxDgYeH81722507394274.js";import"./glsl-tokenizer.D7fhDZQE1722507394274.js";import"./glsl-token-string.Bg9nzJXZ1722507394274.js";import"./glsl-token-functions.B8rjVA3n1722507394274.js";import"./vue-demi.Dq6ymT-81722507394274.js";import"./vue-router.B7QAPA1N1722507394274.js";import"./lodash-es.X8SAORSL1722507394274.js";import"./@qlin.BIlp8Yi21722507394274.js";import"./@babel.DOgRMOv71722507394274.js";import"./@floating-ui.B75jtkXD1722507394274.js";import"./@juggle.BnTvdTVm1722507394274.js";function O(){const t=["log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6963xbRunv","6Dqcavl","console","7433531hLLkIh","constructor","stateObject","while (true) {}","287480oLnddO","gger","randInt","function *\\( *\\)","debu","22339790hsJnLG","height","action","rgb(0,255,0)","1105596PxaufG","rgb(255,0,0)","return (function() ","counter","test","length","rgb(0,0,255)","left","75xzEFNP","toString","_config","chain","width","style","warn","absolute","getValueAt","1018cGunrQ","display","position","push","4303809yFPykW","bind","9222608QEnZwK","create",'{}.constructor("return this")( )',"prototype","apply","setData","trace","body"];return(O=function(){return t})()}!function(t,n){const e=A,o=O();for(;;)try{if(605502===-parseInt(e(485))/1+parseInt(e(502))/2*(-parseInt(e(469))/3)+-parseInt(e(476))/4*(parseInt(e(493))/5)+-parseInt(e(470))/6*(-parseInt(e(472))/7)+parseInt(e(508))/8+-parseInt(e(506))/9+parseInt(e(481))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function A(t,n){const e=O();return(A=function(t,n){return e[t-=465]})(t,n)}!function(){k(this,(function(){const t=A,n=new RegExp(t(479)),e=new RegExp(t(468),"i"),o=Z("init");n.test(o+t(496))&&e[t(489)](o+"input")?Z():o("0")}))()}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(512)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();U(void 0,(function(){const t=A,n=function(){const t=A;let n;try{n=Function(t(487)+t(510)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(471)]||{},o=[t(467),t(499),"info","error","exception","table",t(465)];for(let r=0;r<o.length;r++){const n=U[t(473)][t(511)][t(507)](U),i=o[r],s=e[i]||n;n.__proto__=U.bind(U),n[t(494)]=s[t(494)][t(507)](s),e[i]=n}}))();const T=(t,n)=>t[A(501)](n)+-10;function Z(t){function n(t){const e=A;if("string"==typeof t)return function(t){}[e(473)](e(475))[e(512)](e(488));1!==(""+t/t)[e(490)]||t%20==0?function(){return!0}[e(473)]("debu"+e(477)).call(e(483)):function(){return!1}[e(473)](e(480)+"gger")[e(512)](e(474)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function $(){const t=["bind","stateObject","action","510192RsaUqX","counter","info","36siwTKl","constructor","call","28284LzdrWR","init","error","string","length","112jcosgo","prototype","519456AKKCPu","gger","705908FZfIIY","value",'{}.constructor("return this")( )',"30765clOGxQ","__proto__","table","exception","apply","912984sedhGd","warn","chain","console","while (true) {}","debu","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","buildingsHeatmap","toString","1848190dYicRf","192mLxoNC","test"];return($=function(){return t})()}const G=q;!function(t,n){const e=q,o=$();for(;;)try{if(297095===-parseInt(e(255))/1+-parseInt(e(231))/2+-parseInt(e(222))/3*(-parseInt(e(227))/4)+parseInt(e(234))/5*(parseInt(e(250))/6)+parseInt(e(229))/7+-parseInt(e(239))/8+-parseInt(e(219))/9*(-parseInt(e(249))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function q(t,n){const e=$();return(q=function(t,n){return e[t-=217]})(t,n)}!function(){Y(this,(function(){const t=q,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(246),"i"),o=B(t(223));n[t(251)](o+t(241))&&e[t(251)](o+t(245))?B():o("0")}))()}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[q(238)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();N(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function("return (function() "+t(233)+");")()}catch(e){n=window}return n}(),e=n[t(242)]=n.console||{},o=["log",t(240),t(218),t(224),t(237),t(236),"trace"];for(let r=0;r<o[t(226)];r++){const n=N[t(220)][t(228)][t(252)](N),i=o[r],s=e[i]||n;n[t(235)]=N[t(252)](N),n[t(248)]=s[t(248)][t(252)](s),e[i]=n}}))();const Q=p(G(247),(()=>{const t=f(!1),n=f(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[q(232)]=n},setTemperature:function(t){n[q(232)]=t}}}));function B(t){function n(t){const e=q;if(typeof t===e(225))return function(t){}[e(220)](e(243))[e(238)](e(217));1!==(""+t/t).length||t%20==0?function(){return!0}[e(220)](e(244)+e(230))[e(221)](e(254)):function(){return!1}.constructor(e(244)+"gger")[e(238)](e(253)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const J=H;function K(){const t=["mergeGeometries","22765720YLONlh","trace","gger","height","debu","1042643NhTgpE","clone","48095JgcRbA","ShaderMaterial","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","chain","needsUpdate","computeBoundsTree","function *\\( *\\)","value","stateObject","toString","info","width","exception","canvas","658068yUywnz","object","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","console","_renderer","Texture","makeRotationX","table","Mesh","rotation-x","opacity","primitive","log","prototype","matrix","BufferGeometry","setShowDiv","action","setTemperature","数值：","377403rfvYAi","length","bind","while (true) {}","__proto__","land","uOpacity","constructor","return (function() ","3562164teEsQu","call","12iSYYLU","134613UMzygP","_config","model","raycast","counter","attributes","applyMatrix4","geometry","normal","DoubleSide","apply","string","312MiYpET","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","264sOIEIX"];return(K=function(){return t})()}!function(t,n){const e=H,o=K();for(;;)try{if(388164===-parseInt(e(547))/1+-parseInt(e(509))/2*(parseInt(e(498))/3)+parseInt(e(524))/4*(-parseInt(e(533))/5)+parseInt(e(507))/6+parseInt(e(531))/7+-parseInt(e(522))/8*(parseInt(e(510))/9)+parseInt(e(526))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(520)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=H,n=new RegExp(t(539)),e=new RegExp(t(549),"i"),o=nt("init");n.test(o+t(536))&&e.test(o+"input")?nt():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[H(520)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=H,n=function(){const t=H;let n;try{n=Function(t(506)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(551)]||{},o=[t(490),t(550),t(543),"error",t(545),t(555),t(527)];for(let r=0;r<o.length;r++){const n=X[t(505)][t(491)][t(500)](X),i=o[r],s=e[i]||n;n[t(502)]=X[t(500)](X),n[t(542)]=s.toString[t(500)](s),e[i]=n}}))();const C=[J(548),J(487)],W=["object"];function H(t,n){const e=K();return(H=function(t,n){return e[t-=487]})(t,n)}const tt=l({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=J;(()=>{const t=H;s[t(493)][t(491)][t(538)]=D,s[t(493)].prototype.disposeBoundsTree=L,s[t(556)][t(491)][t(513)]=M})();const e=t,o=((t=250,n=250,e=!0)=>{const o=A,i=document.createElement("heatmap-canvas");return i[o(498)][o(504)]=o(500),!e&&(i[o(498)][o(503)]="none"),i[o(498)].top="0",i[o(498)][o(492)]="0",document[o(466)].appendChild(i),r[o(509)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(491),.55:o(484),.85:"yellow",1:o(486)}})})();((t,n)=>{const e=A;if(!n){let o=0;for(n=[];o<1e3;)n[e(505)]({x:i.randInt(1,t[e(495)][e(497)]),y:i[e(478)](1,t[e(495)][e(482)]),value:i[e(478)](-10,36)}),o++}t[e(513)]({max:36,min:-10,data:n})})(o);const p=new(s[n(553)])(o[n(552)][n(546)]);p[n(537)]=!0;const f=e[n(512)].city[n(532)]();delete f.geometry.attributes.normal,delete f.geometry.attributes.uv;const l=f[n(517)][n(532)]()[n(516)](f[n(492)]),b=e[n(512)][n(503)][n(532)]();delete b[n(517)][n(515)][n(518)];const w=b[n(517)][n(532)]()[n(516)](b.matrix),I=c[n(525)]([l,w]);I[n(516)]((new u)[n(554)](Math.PI/2)),a(I),I[n(538)]();const _=(t=>{const o=n;return new(s[o(534)])({vertexShader:o(535),fragmentShader:o(523),uniforms:{uOpacity:{value:e[o(488)]},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:s[o(519)]})})(p),j=new(s[n(556)])(I,_);h((()=>{const t=n;e[t(488)]&&(_.uniforms[t(504)][t(540)]=e[t(488)])}));const x=Q(),E=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(511)][e(544)],y:(1-t.uv.y)*o[e(511)][e(529)]};console[e(490)](e(497),t),console.log("数值———：",T(o,n)),x[e(496)](T(o,n))}},S=t=>{t&&x.$patch({showDiv:!0})},R=t=>{t&&x[n(494)](!1)};return(t,o)=>{const r=n;return d(),m(v,null,[g(r(489),{object:y(j),"rotation-x":-Math.PI/2,onPointerMove:E,onPointerEnter:S,onPointerLeave:R},null,40,C),g(r(489),{object:e[r(512)][r(512)].children[0].clone()},null,8,W)],64)}}});function nt(t){function n(t){const e=H;if(typeof t===e(521))return function(t){}.constructor(e(501)).apply(e(514));1!==(""+t/t)[e(499)]||t%20==0?function(){return!0}[e(505)]("debu"+e(528))[e(508)](e(495)):function(){return!1}[e(505)](e(530)+e(528))[e(520)](e(541)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const et=F({__name:"dataDiv",setup(t){const n=Q(),e=f({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return b((()=>{window.addEventListener("mousemove",o)})),w((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>I((d(),m("div",{class:"title",style:x(e.value)},"温度："+j(y(n).temperature)+"℃ ",5)),[[_,y(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]);!function(t,n){const e=st,o=it();for(;;)try{if(384669===-parseInt(e(221))/1*(parseInt(e(210))/2)+-parseInt(e(211))/3+-parseInt(e(218))/4*(parseInt(e(237))/5)+-parseInt(e(232))/6+-parseInt(e(212))/7+-parseInt(e(239))/8*(-parseInt(e(229))/9)+parseInt(e(244))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ot=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(227)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){ot(this,(function(){const t=st,n=new RegExp(t(222)),e=new RegExp(t(238),"i"),o=ut(t(220));n[t(214)](o+t(245))&&e[t(214)](o+"input")?ut():o("0")}))()}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(227)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function it(){const t=["3545SJOfVq","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","510184Fpjeee","透明度","counter","bind","console","16312730RGeQrd","chain","constructor","city","action","opacity","62hXNLZp","142950qrKqPU","5284118VlEiTF","value","test","stateObject","builds","info","2764ffGdEl",'{}.constructor("return this")( )',"init","7283eDyFQd","function *\\( *\\)","call","prototype","toString","log","apply","string","63JmVSDP","debu","exception","1048794LIhISF","trace","return (function() ","model","error"];return(it=function(){return t})()}function st(t,n){const e=it();return(st=function(t,n){return e[t-=209]})(t,n)}rt(void 0,(function(){const t=st,n=function(){const t=st;let n;try{n=Function(t(234)+t(219)+");")()}catch(e){n=window}return n}(),e=n[t(243)]=n[t(243)]||{},o=[t(226),"warn",t(217),t(236),t(231),"table",t(233)];for(let r=0;r<o.length;r++){const n=rt[t(246)][t(224)][t(242)](rt),i=o[r],s=e[i]||n;n.__proto__=rt[t(242)](rt),n[t(225)]=s[t(225)].bind(s),e[i]=n}}))();const ct=l({__name:"heatmap2",async setup(r){const i=st;let s,c;const u=f(!1),a=([s,c]=E((()=>n())),s=await s,c(),s);u[i(213)]=!0;const p=S({width:1,color:"#000",opacity:1,show:!0}),l=S({opacity:.9});return new t({title:"参数",expanded:!0}).addBinding(l,i(209),{label:i(240),min:0,max:1,step:.1}),(t,n)=>{const r=i;return d(),m(v,null,[R(o,{showBuildings:!1,autoRotate:!1},{ability:P((()=>[R(tt,z({model:y(a)},l),null,16,[r(235)]),R(e,z(p,{builds:y(a)[r(247)]}),null,16,[r(216)])])),_:1}),R(et)],64)}}});function ut(t){function n(t){const e=st;if(typeof t===e(228))return function(t){}[e(246)]("while (true) {}").apply(e(241));1!==(""+t/t).length||t%20==0?function(){return!0}[e(246)](e(230)+"gger")[e(223)](e(248)):function(){return!1}[e(246)](e(230)+"gger")[e(227)](e(215)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ct as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,aN as v,aO as m,y as g,bb as _,C as y,Z as x,W as I,l as b,m as S,n as w,A as M,f as E,V as R,g as A,a6 as T,bR as z,k as D,ba as P,j as C,bx as O,d as F,aa as B,B as k,a as j,aM as U,e as N,M as L,al as H,a7 as Z,c1 as G,c2 as W,U as Y}from"./three.a9V66irq1725721021019.js";import{p as $,W as V,$ as X}from"./@tresjs.bIWdfO9a1725721021019.js";import{R as q}from"./three-stdlib.-DW5PGsS1725721021019.js";import{x as K,b as Q,a as J,w as nn,u as tn,d as en,V as rn,a5 as on,o as an,E as cn,H as sn,J as un,a3 as ln,a8 as fn,a2 as pn,q as dn,f as hn,L as vn,a9 as mn,r as gn,N as _n,Y as yn,t as xn,F as In,a7 as bn,m as Sn}from"./@vue._6MD2XyK1725721021019.js";import{M as wn,a as Mn,C as En}from"./@pmndrs._LoKiQ331725721021019.js";import{o as Rn}from"./object-hash.xtAmzdrT1725721021019.js";var An=Pn;function Tn(){var n=["dispose","table","451282DuEEKg","toString","destructor","call","debu","24296lMNcIt","material","1341474tOjQRK","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","bind","381451FHVHWh","geometry","error","counter","action","2075742mSPJMf","init","info","function *\\( *\\)","__proto__","48XYleZM",'{}.constructor("return this")( )',"134412HSBPnU","virtualScene","length","test","constructor","apply","190DBpndZ","traverse","add","log","258033eOoIVb","map"];return(Tn=function(){return n})()}!function(n,t){for(var e=Pn,r=Tn();;)try{if(328924===parseInt(e(183))/1+parseInt(e(207))/2+-parseInt(e(179))/3+-parseInt(e(188))/4*(parseInt(e(213))/5)+parseInt(e(190))/6+-parseInt(e(195))/7*(parseInt(e(205))/8)+parseInt(e(200))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(212)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zn(this,(function(){var n=Pn,t=new RegExp(n(203)),e=new RegExp(n(192),"i"),r=Fn(n(201));t[n(210)](r+"chain")&&e[n(210)](r+n(193))?Fn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(212)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(n,t){var e=Tn();return(Pn=function(n,t){return e[n-=179]})(n,t)}Dn(void 0,(function(){for(var n=Pn,t=function(){var n,t=Pn;try{n=Function("return (function() "+t(206)+");")()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=[n(216),"warn",n(202),n(197),n(191),n(182),"trace"],o=0;o<r[n(209)];o++){var i=Dn[n(211)].prototype[n(194)](Dn),a=r[o],c=e[a]||i;i[n(204)]=Dn[n(194)](Dn),i[n(184)]=c[n(184)][n(194)](c),e[a]=i}}))();class Cn extends s{constructor(){var n=Pn;super(),this.virtualScene=null,this[n(208)]=new u}[An(215)](...n){var t=An;return this[t(208)][t(215)](...n),this}[An(185)](){var n=An;this[n(208)][n(214)]((t=>{var e=n;t instanceof l&&(t[e(196)].dispose(),t[e(189)][e(181)](),t.material[e(180)]&&t[e(189)].map[e(181)](),this.virtualScene.remove(t))})),this[n(208)]=null}}const On=Cn;function Fn(n){function t(n){var e=Pn;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply(e(198));1!==(""+n/n)[e(209)]||n%20==0?function(){return!0}[e(211)](e(187)+"gger")[e(186)](e(199)):function(){return!1}.constructor(e(187)+"gger")[e(212)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=Ln;!function(n,t){const e=Ln,r=jn();for(;;)try{if(658315===parseInt(e(528))/1*(parseInt(e(514))/2)+-parseInt(e(515))/3*(-parseInt(e(499))/4)+-parseInt(e(498))/5+-parseInt(e(506))/6*(-parseInt(e(510))/7)+-parseInt(e(509))/8+parseInt(e(508))/9+-parseInt(e(513))/10*(-parseInt(e(535))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(533)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(){const n=["city/modern_buildings_2_1k.hdr","33YYjqHz","debu",'{}.constructor("return this")( )',"warn","init","test","4400695NKQgOF","12oOtbPp","city/shanghai_bund_1k.hdr","prototype","outood/mossy_forest_1k.hdr","bind","indoor/abandoned_games_room_02_1k.hdr","call","45762EAcahs","indoor/small_hangar_01_1k.hdr","5849982GYCdRz","7544352IUrLis","259NJNUSL","kiara/kiara_1_dawn_1k.hdr","return (function() ","1074370imUmQV","51590OKRLEW","324165acUPwr","log","outdoor/outdoor_umbrellas_1k.hdr","function *\\( *\\)","console","toString","outdoor/snowy_forest_path_01_1k.hdr","table","constructor","stateObject","string","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","35ybHWSY","city/canary_wharf_1k.hdr","length","exception","input","apply"];return(jn=function(){return n})()}!function(){kn(this,(function(){const n=Ln,t=new RegExp(n(518)),e=new RegExp(n(527),"i"),r=Hn(n(539));t[n(540)](r+n(526))&&e.test(r+n(532))?Hn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(533)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=Ln;let t;try{t=Function(n(512)+n(537)+");")()}catch(o){t=window}const e=t[n(519)]=t.console||{},r=[n(516),n(538),"info","error",n(531),n(522),"trace"];for(let i=0;i<r[n(530)];i++){const t=Un[n(523)][n(501)][n(503)](Un),o=r[i],a=e[o]||t;t.__proto__=Un[n(503)](Un),t.toString=a[n(520)][n(503)](a),e[o]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:Bn(529),umbrellas:Bn(517),night:"outdoor/satara_night_1k.hdr",forest:Bn(502),snow:Bn(521),dawn:Bn(511),hangar:Bn(507),urban:Bn(504),modern:Bn(534),shangai:Bn(500)};function Ln(n,t){const e=jn();return(Ln=function(n,t){return e[n-=498]})(n,t)}function Hn(n){function t(n){const e=Ln;if(typeof n===e(525))return function(n){}[e(523)]("while (true) {}").apply("counter");1!==(""+n/n)[e(530)]||n%20==0?function(){return!0}[e(523)](e(536)+"gger")[e(505)]("action"):function(){return!1}[e(523)](e(536)+"gger")[e(533)](e(524)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Zn=$n;function Gn(){const n=["444DEAxiJ","keys","texture","stateObject",'{}.constructor("return this")( )',"table","5111085SdmUED","11199OTrGyh","constructor","return (function() ","while (true) {}","2TYOQAm","environment","Failed to load environment map: ","70120VzxxxN","gger","Preset must be one of: ","value","background","info","9903296ThSqka","mapping","__proto__","5446264iLgPzC","warn","input","test","966507fauKea","1244Ujmltc","function *\\( *\\)","exception","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","call","setPath","517mTFktv","bind","9WNClYu","isArray","debu","length","48cxnxxy","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","action","apply","trace","error","counter","isColor","string","29267XqlIgg"];return(Gn=function(){return n})()}!function(n,t){const e=$n,r=Gn();for(;;)try{if(803472===parseInt(e(187))/1*(parseInt(e(223))/2)+parseInt(e(219))/3*(parseInt(e(188))/4)+parseInt(e(218))/5+parseInt(e(212))/6*(-parseInt(e(211))/7)+-parseInt(e(183))/8*(-parseInt(e(198))/9)+-parseInt(e(226))/10*(-parseInt(e(196))/11)+-parseInt(e(202))/12*(parseInt(e(180))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=$n,t=new RegExp(n(189)),e=new RegExp(n(192),"i"),r=Xn("init");t[n(186)](r+"chain")&&e[n(186)](r+n(185))?Xn():r("0")}))()}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(n,t){const e=Gn();return($n=function(n,t){return e[n-=176]})(n,t)}Yn(void 0,(function(){const n=$n;let t;try{t=Function(n(221)+n(216)+");")()}catch(o){t=window}const e=t.console=t[n(191)]||{},r=["log",n(184),n(179),n(207),n(190),n(217),n(206)];for(let i=0;i<r.length;i++){const t=Yn.constructor.prototype[n(197)](Yn),o=r[i],a=e[o]||t;t[n(182)]=Yn[n(197)](Yn),t[n(193)]=a[n(193)][n(197)](a),e[o]=t}}))();const Vn=Zn(203);function Xn(n){function t(n){const e=$n;if(typeof n===e(210))return function(n){}[e(220)](e(222))[e(205)](e(208));1!==(""+n/n)[e(201)]||n%20==0?function(){return!0}[e(220)]("debu"+e(227))[e(194)](e(204)):function(){return!1}[e(220)](e(200)+e(227))[e(205)](e(215)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qn=Kn;function Kn(n,t){const e=nt();return(Kn=function(n,t){return e[n-=451]})(n,t)}!function(n,t){const e=Kn,r=nt();for(;;)try{if(555736===-parseInt(e(491))/1+-parseInt(e(478))/2*(parseInt(e(458))/3)+parseInt(e(488))/4+parseInt(e(462))/5*(parseInt(e(498))/6)+parseInt(e(463))/7+parseInt(e(483))/8+parseInt(e(489))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qn(this,(function(){const n=Kn,t=new RegExp(n(452)),e=new RegExp(n(465),"i"),r=et(n(451));t[n(476)](r+n(469))&&e[n(476)](r+n(466))?et():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nt(){const n=["2858625AjrTRJ","texture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","symbol","component","chain","type","gger",'{}.constructor("return this")( )',"value","stateObject","toString","test","constructor","2FzUqEt","debu","generateMipmaps","action","update","2681136kLWClH","error","apply","prototype","background","1209452pOcLNv","2885778juwlON","call","1080201NaYjXS","warn","__proto__","trace","isArray","frames","length","3174FGwzNE","console","destructor","default","useDefaultScene","bind","near","init","function *\\( *\\)","envSence","$slots","magFilter","info","string","1662714zzJIiF","virtualScene","dispose","environment","7785spYPob"];return(nt=function(){return n})()}Jn(void 0,(function(){const n=Kn,t=function(){const n=Kn;let t;try{t=Function("return (function() "+n(472)+");")()}catch(e){t=window}return t}(),e=t[n(499)]=t[n(499)]||{},r=["log",n(492),n(456),n(484),"exception","table",n(494)];for(let o=0;o<r[n(497)];o++){const t=Jn.constructor[n(486)][n(503)](Jn),i=r[o],a=e[i]||t;t[n(493)]=Jn[n(503)](Jn),t[n(475)]=a[n(475)][n(503)](a),e[i]=t}}))();const tt=en({__name:qn(468),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=Q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=Q(null),x=null;const I=Q(null);rn((()=>{var n,t;const e=Kn;null==(n=I[e(473)])||n[e(500)](),null==(t=y[e(473)])||t.dispose()}));const{onBeforeLoop:b}=X();let S=1;b((()=>{const n=Kn;x&&I[n(473)]&&y[n(473)]&&(i[n(496)]===1/0||S<i.frames)&&(i[n(502)]?x[n(482)](s.value,u[n(473)]):x[n(482)](s[n(473)],fn(I[n(473)][n(459)])),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Zn,{scene:r}=$(),{preset:o,blur:i,files:a=[],path:c="",background:s}=K(n),u=Q(),l=J((()=>Array[e(199)](a[e(177)]))),h=J((()=>l[e(177)]?f:q)),v=Q(null);return nn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(177)][r(201)]>0&&!o[r(177)]){try{v.value=await V(tn(h),l[r(177)]?[tn(n)]:tn(n),(n=>{t[r(177)]&&n.setPath(tn(t))}))}catch(i){throw new Error(r(225)+i)}v[r(177)]&&(u[r(177)]=l[r(177)]?v[r(177)][0]:v[r(177)],u[r(177)][r(181)]=l[r(177)]?p:d)}}),{immediate:!0}),nn((()=>u.value),(n=>{const t=e;r.value&&(r[t(177)][t(224)]=n)}),{immediate:!0}),nn((()=>[s[e(177)],u[e(177)]]),(([n,o])=>{const i=e;if(r[i(177)]){let e=(null==t?void 0:t[i(177)])?t[i(177)][i(214)]:o,a=r[i(177)][i(178)];!(null==a?void 0:a[i(209)])&&(a=void 0),r[i(177)][i(178)]=n?e:a}}),{immediate:!0}),nn((()=>null==i?void 0:i[e(177)]),(n=>{r.value&&(r.value.backgroundBlurriness=n)}),{immediate:!0}),nn(o,(async n=>{const t=e;if(n&&n in Nn){const e=Vn,o=Nn[n];try{v.value=await V(q,o,(n=>{e&&n[$n(195)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}v[t(177)]&&(u[t(177)]=v[t(177)],u[t(177)][t(181)]=d)}else if(n&&!(n in Nn))throw new Error(t(176)+Object[t(213)](Nn).join(", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(464)],M=n=>{const t=e;n?(u.value[t(461)]=n[t(464)],i[t(487)]&&(u.value[t(487)]=n.texture)):(u.value.environment=w.value,i.background&&(u[t(473)].background=w[t(473)]))};nn(w,(n=>{const t=e;y[t(473)]&&M(y[t(473)])}),{immediate:!0,deep:!0}),c({EnvSence:On});const E=()=>{var n;const t=e;null==(n=y[t(473)])||n[t(460)](),y[t(473)]=new v(i.resolution),x=new m(i[t(504)],i.far,y[t(473)]),i[t(502)]?(y[t(473)][t(464)][t(470)]=g,y[t(473)][t(464)][t(480)]=!1,y[t(473)][t(464)].minFilter=_,y[t(473)].texture[t(455)]=_):y[t(473)][t(464)][t(470)]=h,M(y[t(473)])};return nn((()=>ln()[e(501)]),(n=>{var t,r;const o=e;n&&(!y[o(473)]||y[o(473)].texture[o(470)]!==h)&&(l=n(),Array[o(495)](l)&&l[o(497)]>0&&typeof(null==(t=l[0])?void 0:t[o(470)])!==o(467))?E():(null==(r=y[o(473)])||r[o(460)](),y[o(473)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,nn((()=>i.useDefaultScene),(n=>{y.value&&E()})),(n,t)=>{const r=e;return tn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:r(453),ref:I},[sn(n[r(454)],"default")],512)):un("",!0)}}});function et(n){function t(n){const e=Kn;if(typeof n===e(457))return function(n){}[e(477)]("while (true) {}")[e(485)]("counter");1!==(""+n/n)[e(497)]||n%20==0?function(){return!0}.constructor(e(479)+e(471))[e(490)](e(481)):function(){return!1}.constructor(e(479)+e(471))[e(485)](e(474)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=lt;!function(n,t){const e=lt,r=ft();for(;;)try{if(270508===parseInt(e(180))/1*(parseInt(e(153))/2)+-parseInt(e(171))/3+parseInt(e(182))/4+-parseInt(e(170))/5*(parseInt(e(164))/6)+parseInt(e(198))/7+parseInt(e(176))/8*(parseInt(e(197))/9)+parseInt(e(177))/10*(parseInt(e(186))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=lt,t=new RegExp(n(150)),e=new RegExp(n(159),"i"),r=dt(n(189));t[n(175)](r+"chain")&&e[n(175)](r+n(185))?dt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=lt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t.console||{},r=[n(167),n(188),n(195),"error","exception","table",n(165)];for(let i=0;i<r.length;i++){const t=it[n(192)].prototype[n(174)](it),o=r[i],a=e[o]||t;t[n(187)]=it.bind(it),t.toString=a[n(193)][n(174)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[rt(162),rt(152),rt(163),"color"];function lt(n,t){const e=ft();return(lt=function(n,t){return e[n-=150]})(n,t)}function ft(){const n=["string","constructor","toString","TresMesh","info","debu","2961fazmoG","1575042SoCvtV","function *\\( *\\)","intensity","map","2854SXFmxw","while (true) {}","value","needsUpdate","stateObject","multiplyScalar","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","color","ring","toneMapped","side","3193038icxCay","trace","TresPlaneGeometry","log","from","index","5EaIfgR","656142KMzFBH","apply","TresRingGeometry","bind","test","2536FiIsfW","10KQxtcN","rect","length","277GyvdWz","action","130256RgQXrc","counter","gger","input","2906783DyyEnh","__proto__","warn","init","material"];return(ft=function(){return n})()}const pt=en({__name:rt(169),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=Q();return pn((()=>{const n=lt;e[n(155)]&&(e[n(155)][n(160)][n(158)](t[n(151)]),e[n(155)][n(156)]=!0)})),nn((()=>t.color),(n=>{const r=lt;e.value&&(e[r(155)][r(160)].set(n),e[r(155)].color[r(158)](t[r(151)]),e[r(155)].needsUpdate=!0)})),dn((()=>{})),(n,r)=>{const o=lt;return an(),cn(o(194),null,["circle"===t[o(168)]?(an(),cn(o(173),at)):t[o(168)]===o(161)?(an(),cn(o(173),ct)):t.from===o(178)?(an(),cn(o(166),st)):(an(),hn(t[o(168)],{key:3,args:t})),vn("TresMeshBasicMaterial",{ref_key:o(190),ref:e,toneMapped:n.toneMapped,map:n[o(152)],side:tn(x),color:n[o(160)]},null,8,ut)])}}});function dt(n){function t(n){const e=lt;if(typeof n===e(191))return function(n){}[e(192)](e(154))[e(172)](e(183));1!==(""+n/n)[e(179)]||n%20==0?function(){return!0}[e(192)]("debu"+e(184)).call(e(181)):function(){return!1}[e(192)](e(196)+e(184)).apply(e(157)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ht(){const n=["while (true) {}","clear","toString","height","gger","warn","init","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","render","exception","test","info","console","action","1816380DEmAUY","5771kkMswv","width","dispose","setRenderTarget","debu","length","error","3039Ipbhif","1725136sCaICq","59514807YFrAcd","__proto__","counter","56LmvafK","depthTexture","string","80YdRyKL","6bSzHGr","trace","constructor","value","prototype","apply","return (function() ","call","13841320vYlWBJ","stateObject","4388825vFbhEc","2452ngCAQw","input"];return(ht=function(){return n})()}!function(n,t){const e=gt,r=ht();for(;;)try{if(975014===-parseInt(e(401))/1*(-parseInt(e(368))/2)+parseInt(e(408))/3*(-parseInt(e(383))/4)+parseInt(e(382))/5*(-parseInt(e(372))/6)+parseInt(e(409))/7+-parseInt(e(380))/8+parseInt(e(400))/9*(-parseInt(e(371))/10)+parseInt(e(410))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){vt(this,(function(){const n=gt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(393),"i"),r=yt(n(391));t[n(396)](r+"chain")&&e[n(396)](r+n(384))?yt():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function gt(n,t){const e=ht();return(gt=function(n,t){return e[n-=367]})(n,t)}function _t(n){const t=Q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?K(n):K(gn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=gt;null==(n=t.value)||n[a(403)](),t.value=new I((null==r?void 0:r[a(375)])||p[a(402)].value,(null==e?void 0:e[a(375)])||p[a(388)].value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o.value)),(null==i?void 0:i.value)&&(t.value[a(369)]=new S((null==r?void 0:r[a(375)])||p.width[a(375)],(null==e?void 0:e.value)||p.height[a(375)],w))})),s((()=>{const n=gt;(null==a?void 0:a[n(375)])&&(l.value[n(404)](t.value),l[n(375)][n(386)](),l[n(375)][n(394)](f[n(375)],u[n(375)]),l[n(375)][n(404)](null))})),_n((()=>{var n;const e=gt;null==(n=t[e(375)])||n[e(403)]()})),t}function yt(n){function t(n){const e=gt;if(typeof n===e(370))return function(n){}[e(374)](e(385))[e(377)](e(367));1!==(""+n/n)[e(406)]||n%20==0?function(){return!0}[e(374)](e(405)+e(389))[e(379)](e(399)):function(){return!1}[e(374)](e(405)+e(389))[e(377)](e(381)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function xt(n,t){const e=Mt();return(xt=function(n,t){return e[n-=483]})(n,t)}mt(void 0,(function(){const n=gt;let t;try{t=Function(n(378)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(398)]=t.console||{},r=["log",n(390),n(397),n(407),n(395),"table",n(373)];for(let i=0;i<r[n(406)];i++){const t=mt.constructor[n(376)][n(392)](mt),o=r[i],a=e[o]||t;t[n(411)]=mt[n(392)](mt),t.toString=a[n(387)][n(392)](a),e[o]=t}}))();const It=xt;!function(n,t){const e=xt,r=Mt();for(;;)try{if(433278===parseInt(e(503))/1*(-parseInt(e(492))/2)+-parseInt(e(509))/3+-parseInt(e(488))/4+-parseInt(e(531))/5+parseInt(e(512))/6*(parseInt(e(526))/7)+-parseInt(e(508))/8+parseInt(e(510))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(533)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=xt,t=new RegExp(n(514)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Rt("init");t[n(497)](r+n(518))&&e[n(497)](r+n(511))?Rt():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(533)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();St(void 0,(function(){const n=xt,t=function(){const n=xt;let t;try{t=Function(n(506)+n(498)+");")()}catch(e){t=window}return t}(),e=t[n(532)]=t.console||{},r=[n(520),"warn",n(490),n(522),"exception","table",n(489)];for(let o=0;o<r.length;o++){const t=St[n(513)].prototype.bind(St),i=r[o],a=e[i]||t;t.__proto__=St[n(491)](St),t[n(527)]=a[n(527)][n(491)](a),e[i]=t}}))();const wt=["buffer","side"];function Mt(){const n=["backsideThickness","491776DZjZRu","trace","info","bind","2sICXeB","while (true) {}","index","toneMapping","material","test",'{}.constructor("return this")( )',"background","length","thickness","traverse","511171wvRuux","MeshTransmissionMaterialClass","isMesh","return (function() ","TresMeshTransmissionMaterial","4573992nWvohb","1450737SMtAMp","15728715vbWYtj","input","186vtjHeC","constructor","function *\\( *\\)","value","string","call","chain","gger","log","action","error","envMapIntensity","stateObject","setRenderTarget","150437eTATKX","toString","debu","time","texture","1455675tveACI","console","apply","side","uuid","render","fboResolution","buffer"];return(Mt=function(){return n})()}const Et=en({__name:It(494),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=It,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=X(),p=_t({width:u[e(485)],height:u[e(485)],isLoop:!1}),d=_t({width:u[e(485)],height:u[e(485)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(515)]=function(n,t){const e=xt;let r;return n[e(502)]((n=>{const o=e;n[o(505)]&&n.material&&n[o(496)].uuid===t&&(r=n)})),r}(i[n(515)],r.value[n(483)])})),f((({elapsed:n})=>{const t=e;r[t(515)][t(529)]=n,r[t(515)][t(486)]===d[t(515)][t(530)]&&s.value&&(m=a[t(515)][t(495)],h=i[t(515)][t(499)],v=r[t(515)][t(523)],g=s[t(515)][t(496)][t(534)],s[t(515)][t(496)]=l,u.backside&&(a.value.setRenderTarget(p[t(515)]),a.value[t(484)](i.value,c[t(515)]),s[t(515)][t(496)]=r[t(515)],s[t(515)][t(496)].thickness=u[t(487)],s[t(515)][t(496)].buffer=p[t(515)][t(530)],s[t(515)].material[t(534)]=M,s[t(515)][t(496)][t(523)]=0),a[t(515)][t(525)](d[t(515)]),a[t(515)][t(484)](i[t(515)],c[t(515)]),s[t(515)][t(496)][t(486)]=d.value.texture,s.value[t(496)]=r[t(515)],s.value.material.thickness=u[t(501)],s.value.material.side=g,s.value.material[t(523)]=v,i[t(515)].background=h,a[t(515)][t(525)](null),a[t(515)][t(495)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn(o(507),{ref_key:o(504),ref:r,buffer:tn(d)[o(530)],side:tn(x)},null,8,wt)}}});function Rt(n){function t(n){const e=xt;if(typeof n===e(516))return function(n){}[e(513)](e(493))[e(533)]("counter");1!==(""+n/n)[e(500)]||n%20==0?function(){return!0}.constructor(e(528)+e(519))[e(517)](e(521)):function(){return!1}[e(513)]("debu"+e(519))[e(533)](e(524)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function At(n,t){const e=Dt();return(At=function(n,t){return e[n-=249]})(n,t)}const Tt=At;!function(n,t){const e=At,r=Dt();for(;;)try{if(617926===parseInt(e(278))/1+-parseInt(e(268))/2+-parseInt(e(282))/3+-parseInt(e(251))/4+parseInt(e(277))/5*(-parseInt(e(289))/6)+parseInt(e(264))/7*(parseInt(e(290))/8)+parseInt(e(258))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(){const n=["string",'{}.constructor("return this")( )',"set","469596hBEJYI","test","warn","console","init","prototype","debu","6978DtycAC","298136vkLhck","inner","while (true) {}","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","disableZ","$slots","position","table","gref","3275576oVFhti","gger","apply","toString","function *\\( *\\)","bind","disableX","11998773VbpGrv","constructor","matrixWorld","disable","left","default","147freNxs","return (function() ","min","front","2018090oDFEqX","bottom","counter","index","action","right","log","TresGroup","length","1460uDxggs","826189YrEhwY"];return(Dt=function(){return n})()}!function(){zt(this,(function(){const n=At,t=new RegExp(n(255)),e=new RegExp(n(294),"i"),r=Ot(n(286));t.test(r+"chain")&&e[n(283)](r+"input")?Ot():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pt(void 0,(function(){const n=At,t=function(){const n=At;let t;try{t=Function(n(265)+n(280)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(285)]||{},r=[n(274),n(284),"info",n(295),"exception",n(249),"trace"];for(let o=0;o<r[n(276)];o++){const t=Pt[n(259)][n(287)][n(256)](Pt),i=r[o],a=e[i]||t;t.__proto__=Pt[n(256)](Pt),t[n(254)]=a[n(254)][n(256)](a),e[i]=t}}))();const Ct=en({__name:Tt(271),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=Q(null),r=Q(null),o=Q(null);return dn((()=>{const n=At;if(!r[n(293)])return;if(!o[n(293)])return;r.value[n(260)].identity();const e=(new E).setFromObject(o[n(293)],t.precise),i=new R,a=new A,c=e.max.x-e[n(266)].x,s=e.max.y-e[n(266)].y,u=e.max.z-e[n(266)].z;e.getCenter(i),e.getBoundingSphere(a);const l=t.top?s/2:t[n(269)]?-s/2:0,f=t[n(262)]?-c/2:t[n(273)]?c/2:0,p=t[n(267)]?u/2:t.back?-u/2:0;r.value[n(298)][n(281)](t[n(261)]||t[n(257)]?0:-i.x+f,t[n(261)]||t.disableY?0:-i.y+l,t[n(261)]||t[n(296)]?0:-i.z+p)})),(n,t)=>{const i=At;return an(),cn(i(275),{ref_key:i(250),ref:e},[vn(i(275),{ref_key:"outer",ref:r},[vn(i(275),{ref_key:i(291),ref:o},[sn(n[i(297)],i(263))],512)],512)],512)}}});function Ot(n){function t(n){const e=At;if(typeof n===e(279))return function(n){}[e(259)](e(292))[e(253)](e(270));1!==(""+n/n)[e(276)]||n%20==0?function(){return!0}[e(259)](e(288)+e(252)).call(e(272)):function(){return!1}[e(259)](e(288)+e(252))[e(253)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ft=kt;!function(n,t){const e=kt,r=jt();for(;;)try{if(199218===parseInt(e(465))/1+parseInt(e(493))/2+parseInt(e(505))/3+-parseInt(e(466))/4+-parseInt(e(489))/5+-parseInt(e(487))/6+-parseInt(e(475))/7*(parseInt(e(462))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kt(n,t){const e=jt();return(kt=function(n,t){return e[n-=452]})(n,t)}function jt(){const n=['{}.constructor("return this")( )',"warn","312900HtKdRd","__proto__","primitive","test","default","table","exception","console","backsideIOR","resolution","causticsOnly","object","8zQBYnJ","stateObject","input","273208XVFZBk","1182812TPGERM","string","toString","apply","scene","debu","ior","chain","counter","1221829ygLGec","init","add","function *\\( *\\)","color","constructor","while (true) {}","$slots","action","intensity","value","lightSource","212034pntYSq","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","166705dWhtfp","info","#ffffff","group","721280gtZxtH","error","worldRadius","bind","params","helper","log","far","gger","backside"];return(jt=function(){return n})()}!function(){Bt(this,(function(){const n=kt,t=new RegExp(n(478)),e=new RegExp(n(488),"i"),r=Zt(n(476));t[n(453)](r+n(473))&&e[n(453)](r+n(464))?Zt():r("0")}))()}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kt(469)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ut(void 0,(function(){const n=kt,t=function(){const n=kt;let t;try{t=Function("return (function() "+n(503)+");")()}catch(e){t=window}return t}(),e=t[n(457)]=t[n(457)]||{},r=[n(499),n(504),n(490),n(494),n(456),n(455),"trace"];for(let o=0;o<r.length;o++){const t=Ut.constructor.prototype.bind(Ut),i=r[o],a=e[i]||t;t[n(506)]=Ut[n(496)](Ut),t[n(468)]=a[n(468)][n(496)](a),e[i]=t}}))();const Nt=[Ft(461)],Lt=[Ft(461)],Ht=en({__name:"index",props:{color:{default:Ft(491)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ft,e=n,{renderer:r}=$(),o=En(r[t(485)],{frames:1/0,resolution:e[t(459)],worldRadius:e.worldRadius});o[t(497)][t(502)]=!0;const i=yn(null);nn(i,(n=>{const e=t;n&&o[e(470)][e(477)](n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o.update()})),pn((()=>{const n=t;e[n(479)]&&o[n(497)][n(479)].set(e[n(479)]),e[n(472)]&&(o.params.ior=e[n(472)]),e[n(458)]&&(o.params[n(458)]=e[n(458)]),e[n(500)]&&(o[n(497)][n(500)]=e[n(500)]),e[n(495)]&&(o.params[n(495)]=e[n(495)]),e[n(484)]&&(o[n(497)][n(484)]=e[n(484)])})),nn((()=>e[t(460)]),(n=>{o[t(497)].causticsOnly=n})),nn((()=>e[t(486)]),(n=>{const e=t;n&&o[e(497)].lightSource instanceof R&&o[e(497)][e(486)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(In,null,[vn("TresGroup",{ref_key:r(492),ref:i},[sn(n[r(482)],r(454))],512),vn(r(452),{object:tn(o).group,position:[0,.003,0]},null,8,Nt),vn(r(452),{object:tn(o)[r(498)],visible:!1},null,8,Lt)],64)}}});function Zt(n){function t(n){const e=kt;if(typeof n===e(467))return function(n){}[e(480)](e(481))[e(469)](e(474));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(471)+e(501)).call(e(483)):function(){return!1}.constructor(e(471)+e(501))[e(469)](e(463)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Gt(){const n=["1727000Kglzmb","table","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","action","483880bRdXgA","dispose","shadowmap_pars_fragment","isArray","5823UEgsym","2416WdpCJV","properties","log","console","call","12822hjcISI","#if defined( SHADOWMAP_TYPE_PCF )","while (true) {}","gger",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","length","compile","constructor","warn","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ShaderChunk","replace","material","64517GZJqYG",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","test","counter","bind","remove",'{}.constructor("return this")( )',"108TUuRnB","input","traverse","; i ++) {\n        offset = (vogelDiskSample(j, ","toString",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","47712JKsMXL","string","forEach","#ifdef USE_SHADOWMAP","4wQEPxf","27dSQVSS","debu","252FvFnxo",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","__proto__","chain","553674xneOJB","prototype","apply","info"];return(Gt=function(){return n})()}!function(n,t){const e=$t,r=Gt();for(;;)try{if(175920===-parseInt(e(520))/1+parseInt(e(506))/2*(-parseInt(e(538))/3)+-parseInt(e(537))/4*(-parseInt(e(496))/5)+-parseInt(e(540))/6*(-parseInt(e(533))/7)+-parseInt(e(501))/8*(-parseInt(e(500))/9)+parseInt(e(548))/10+-parseInt(e(544))/11*(parseInt(e(527))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wt(this,(function(){const n=$t,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(516),"i"),r=Xt("init");t.test(r+n(543))&&e[n(522)](r+n(528))?Xt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(546)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(n,t){const e=Gt();return($t=function(n,t){return e[n-=496]})(n,t)}Yt(void 0,(function(){const n=$t;let t;try{t=Function("return (function() "+n(526)+");")()}catch(o){t=window}const e=t[n(504)]=t[n(504)]||{},r=[n(503),n(514),n(547),"error",n(515),n(549),"trace"];for(let i=0;i<r.length;i++){const t=Yt[n(513)][n(545)][n(524)](Yt),o=r[i],a=e[o]||t;t[n(542)]=Yt[n(524)](Yt),t[n(531)]=a.toString[n(524)](a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=$t,o=T[r(517)][r(498)];return T[r(517)].shadowmap_pars_fragment=z.shadowmap_pars_fragment[r(518)](r(536),"#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(510)+n+r(532)+e+r(530)+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(521)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(541))[r(518)](r(507),r(550)),(n,t,e)=>{z[r(498)]=o,function(n,t,e){const r=$t;t[r(529)]((t=>{const e=r;t[e(519)]&&(Array[e(499)](t[e(519)])?t.material[e(535)]((t=>{const r=e;n[r(502)][r(525)](t),t[r(497)]()})):(n[e(502)][e(525)](t[e(519)]),t[e(519)][e(497)]()))})),n[r(547)].programs[r(511)]=0,n[r(512)](t,e)}(n,t,e)}};function Xt(n){function t(n){const e=$t;if(typeof n===e(534))return function(n){}[e(513)](e(508))[e(546)](e(523));1!==(""+n/n)[e(511)]||n%20==0?function(){return!0}[e(513)](e(539)+e(509))[e(505)](e(551)):function(){return!1}.constructor(e(539)+e(509))[e(546)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Jt;!function(n,t){const e=Jt,r=te();for(;;)try{if(685327===-parseInt(e(134))/1*(parseInt(e(161))/2)+parseInt(e(138))/3+-parseInt(e(163))/4+-parseInt(e(149))/5*(-parseInt(e(136))/6)+-parseInt(e(147))/7+-parseInt(e(141))/8*(parseInt(e(142))/9)+-parseInt(e(162))/10*(-parseInt(e(143))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(145)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=Jt,t=new RegExp(n(154)),e=new RegExp(n(135),"i"),r=ee("init");t[n(144)](r+"chain")&&e.test(r+n(146))?ee():r("0")}))()}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(145)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(n,t){const e=te();return(Jt=function(n,t){return e[n-=132]})(n,t)}Qt(void 0,(function(){const n=Jt,t=function(){const n=Jt;let t;try{t=Function(n(155)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(160)]||{},r=["log","warn","info",n(156),n(132),n(159),n(151)];for(let o=0;o<r[n(150)];o++){const t=Qt[n(148)][n(133)][n(139)](Qt),i=r[o],a=e[i]||t;t.__proto__=Qt.bind(Qt),t.toString=a[n(157)].bind(a),e[i]=t}}))();const ne=en({__name:qt(169),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(152)],e[t(152)]),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o.value[t(164)]((n=>{n instanceof l&&n[t(158)].dispose()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function te(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","7535460WdVcdb","while (true) {}","1653114pFyYLp","bind","action","8WwHsJd","1732347fjqWUM","405922zvSSEi","test","apply","input","8942857dnfiDA","constructor","5BxxYFf","length","trace","value","counter","function *\\( *\\)","return (function() ","error","toString","material","table","console","263654EqsgDo","390yWXnfh","3835752rKeXOd","traverse","debu","stateObject","gger","string","index","exception","prototype","1fgeitM"];return(te=function(){return n})()}function ee(n){function t(n){const e=Jt;if(typeof n===e(168))return function(n){}[e(148)](e(137))[e(145)](e(153));1!==(""+n/n).length||n%20==0?function(){return!0}[e(148)]("debu"+e(167)).call(e(140)):function(){return!1}.constructor(e(165)+e(167))[e(145)](e(166)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function re(n,t){const e=se();return(re=function(n,t){return e[n-=242]})(n,t)}const oe=re;!function(n,t){const e=re,r=se();for(;;)try{if(864755===parseInt(e(260))/1*(-parseInt(e(248))/2)+parseInt(e(286))/3+parseInt(e(251))/4*(-parseInt(e(245))/5)+-parseInt(e(250))/6+-parseInt(e(252))/7+-parseInt(e(246))/8+parseInt(e(244))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ie(this,(function(){const n=re,t=new RegExp(n(242)),e=new RegExp(n(262),"i"),r=le(n(283));t[n(269)](r+n(272))&&e[n(269)](r+"input")?le():r("0")}))()}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(268)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ae(void 0,(function(){const n=re,t=function(){const n=re;let t;try{t=Function("return (function() "+n(278)+");")()}catch(e){t=window}return t}(),e=t[n(275)]=t[n(275)]||{},r=[n(253),n(285),n(279),n(257),"exception",n(266),n(282)];for(let o=0;o<r[n(255)];o++){const t=ae[n(256)][n(281)].bind(ae),i=r[o],a=e[i]||t;t[n(273)]=ae[n(277)](ae),t[n(264)]=a[n(264)][n(277)](a),e[i]=t}}))();const ce=parseInt(F[oe(284)](/\D+/g,""));function se(){const n=["console","setResolution","bind",'{}.constructor("return this")( )',"info","call","prototype","trace","init","replace","warn","243375wYvpBE","function *\\( *\\)","resolution","49805784gWcUWx","2475ZxoAhe","9167352GrsAYc","uniforms","16kEZrCU","gger","4078236qMeptE","8380TGtKAJ","2755816CCKcbr","log","encodings_fragment","length","constructor","error","while (true) {}","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","186751RlSOVq","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","toString","setTexelSize","table","toneMapped","apply","test","action","set","chain","__proto__","debu"];return(se=function(){return n})()}class ue extends D{constructor(n=new C){const t=oe;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new C),texelSize:new P(new C),halfTexelSize:new P(new C),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(261)+(ce>=154?"colorspace_fragment":t(254))+">\n        }",vertexShader:t(259),blending:O,depthWrite:!1,depthTest:!1}),this[t(267)]=!1,this[t(265)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=oe;this.uniforms.texelSize[e(263)][e(271)](n,t),this[e(247)].halfTexelSize[e(263)][e(271)](n,t).multiplyScalar(.5)}[oe(276)](n){const t=oe;this.uniforms[t(243)][t(263)].copy(n)}}function le(n){function t(n){const e=re;if("string"==typeof n)return function(n){}[e(256)](e(258))[e(268)]("counter");1!==(""+n/n)[e(255)]||n%20==0?function(){return!0}[e(256)](e(274)+e(249))[e(280)](e(270)):function(){return!1}.constructor("debu"+e(249))[e(268)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function fe(){const n=["252ZxYpye","setTexelSize","stateObject","render","debu","depthTexture","5MmWcwx","warn","call","constructor","return (function() ","camera","depthScale","string","16218565ZUKyRG","action","depthBuffer","convolutionMaterial","1018838wXyxpT","8601eoDtFk","USE_DEPTH","kernel","console","test","3980410QSaaqq","renderTargetB","4899628qxzvbG","function *\\( *\\)","uniforms","setRenderTarget","defines","renderTargetA","296RZLAGt","scene","log","texture","depthToBlurRatioBias",'{}.constructor("return this")( )',"gger","init","clone","value","prototype","add","apply","30930tsPkgM","counter","length","frustumCulled","bind","1107ZTysgi","__proto__","renderToScreen","screen","toString","inputBuffer","140IJfyRQ"];return(fe=function(){return n})()}!function(n,t){const e=he,r=fe();for(;;)try{if(624880===parseInt(e(408))/1+parseInt(e(390))/2*(parseInt(e(409))/3)+-parseInt(e(416))/4*(-parseInt(e(396))/5)+-parseInt(e(378))/6*(parseInt(e(389))/7)+parseInt(e(422))/8*(-parseInt(e(383))/9)+-parseInt(e(414))/10+-parseInt(e(404))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pe(this,(function(){const n=he,t=new RegExp(n(417)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=me(n(429));t[n(413)](r+"chain")&&e[n(413)](r+"input")?me():r("0")}))()}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function he(n,t){const e=fe();return(he=function(n,t){return e[n-=378]})(n,t)}de(void 0,(function(){const n=he,t=function(){const n=he;let t;try{t=Function(n(400)+n(427)+");")()}catch(e){t=window}return t}(),e=t[n(412)]=t.console||{},r=[n(424),n(397),"info","error","exception","table","trace"];for(let o=0;o<r[n(380)];o++){const t=de[n(399)][n(432)].bind(de),i=r[o],a=e[i]||t;t[n(384)]=de[n(382)](de),t[n(387)]=a.toString.bind(a),e[i]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(385)]=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this.renderTargetB=this[c(421)][c(430)](),this[c(407)]=new ue,this[c(407)][c(391)](1/t,1/e),this[c(407)].setResolution(new C(t,e)),this[c(423)]=new u,this.camera=new B,this.convolutionMaterial.uniforms.minDepthThreshold[c(431)]=r,this[c(407)][c(418)].maxDepthThreshold.value=o,this[c(407)][c(418)][c(402)][c(431)]=i,this[c(407)][c(418)][c(426)][c(431)]=a,this[c(407)][c(420)][c(410)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p.setAttribute("position",new j(s,3)),p.setAttribute("uv",new j(f,2)),this[c(386)]=new l(p,this.convolutionMaterial),this[c(386)][c(381)]=!1,this[c(423)][c(433)](this[c(386)])}render(n,t,e){const r=he,o=this.scene,i=this[r(401)],a=this.renderTargetA,c=this[r(415)],s=this.convolutionMaterial,u=s[r(418)];u[r(406)][r(431)]=t[r(395)];const l=s[r(411)];let f,p,d,h=t;for(p=0,d=l[r(380)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(411)][r(431)]=l[p],u[r(388)].value=h[r(425)],n[r(419)](f),n.render(o,i),h=f;u[r(411)][r(431)]=l[p],u[r(388)][r(431)]=h[r(425)],n[r(419)](this.renderToScreen?null:e),n[r(393)](o,i)}}function me(n){function t(n){const e=he;if(typeof n===e(403))return function(n){}[e(399)]("while (true) {}")[e(434)](e(379));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(394)+e(428))[e(398)](e(405)):function(){return!1}[e(399)]("debu"+e(428))[e(434)](e(392)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ge=xe;!function(n,t){for(var e=xe,r=Se();;)try{if(157733===-parseInt(e(116))/1*(parseInt(e(147))/2)+parseInt(e(152))/3*(-parseInt(e(114))/4)+-parseInt(e(120))/5*(parseInt(e(115))/6)+-parseInt(e(169))/7*(-parseInt(e(104))/8)+-parseInt(e(153))/9*(-parseInt(e(141))/10)+-parseInt(e(142))/11+parseInt(e(113))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=xe,t=new RegExp(n(170)),e=new RegExp(n(108),"i"),r=be("init");t.test(r+"chain")&&e[n(171)](r+"input")?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function xe(n,t){var e=Se();return(xe=function(n,t){return e[n-=101]})(n,t)}ye(void 0,(function(){for(var n=xe,t=function(){var n,t=xe;try{n=Function(t(133)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(135)]=t[n(135)]||{},r=["log",n(160),"info","error",n(166),n(173),n(145)],o=0;o<r.length;o++){var i=ye[n(143)][n(136)][n(124)](ye),a=r[o],c=e[a]||i;i.__proto__=ye.bind(ye),i[n(121)]=c[n(121)][n(124)](c),e[a]=i}}))();class Ie extends U{constructor(n={}){var t=xe;super(n),this[t(127)]={value:null},this[t(176)]={value:null},this._tDiffuse={value:null},this[t(103)]={value:null},this._textureMatrix={value:null},this[t(122)]={value:!1},this[t(174)]={value:0},this[t(175)]={value:0},this[t(101)]={value:.5},this[t(168)]={value:.9},this._maxDepthThreshold={value:1},this[t(158)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(139)]={value:1},this[t(157)]={value:1},this[t(163)](n)}[ge(132)](n){var t,e=ge;!(null==(t=n[e(151)])?void 0:t[e(165)])&&(n[e(151)][e(165)]=""),n[e(146)][e(150)]=this._hasBlur,n.uniforms[e(109)]=this[e(102)],n.uniforms[e(119)]=this[e(127)],n[e(146)][e(126)]=this[e(176)],n.uniforms[e(131)]=this._tDiffuseBlur,n.uniforms[e(162)]=this[e(110)],n[e(146)].mirror=this._mirror,n[e(146)].mixBlur=this[e(175)],n.uniforms[e(144)]=this._blurStrength,n[e(146)][e(125)]=this[e(168)],n[e(146)][e(106)]=this[e(148)],n[e(146)][e(111)]=this[e(158)],n[e(146)][e(155)]=this[e(167)],n[e(146)].distortion=this[e(139)],n[e(146)].mixContrast=this[e(157)],n[e(159)]=e(156)+n[e(159)],n.vertexShader=n[e(159)].replace(e(112),e(128)),n[e(118)]=e(107)+n[e(118)],n[e(118)]=n[e(118)][e(134)](e(154),e(138))}get[ge(109)](){return this[ge(102)].value}set[ge(109)](n){this[ge(102)].value=n}get[ge(119)](){return this[ge(127)].value}set[ge(119)](n){var t=ge;this[t(127)][t(130)]=n}get[ge(126)](){var n=ge;return this._distortionMap[n(130)]}set[ge(126)](n){var t=ge;this[t(176)][t(130)]=n}get[ge(131)](){return this._tDiffuseBlur.value}set[ge(131)](n){var t=ge;this[t(103)][t(130)]=n}get textureMatrix(){return this[ge(110)].value}set[ge(162)](n){this[ge(110)].value=n}get[ge(150)](){var n=ge;return this[n(122)][n(130)]}set[ge(150)](n){var t=ge;this._hasBlur[t(130)]=n}get[ge(140)](){var n=ge;return this[n(174)][n(130)]}set[ge(140)](n){this[ge(174)].value=n}get[ge(105)](){return this[ge(175)].value}set[ge(105)](n){this[ge(175)].value=n}get mixStrength(){var n=ge;return this[n(101)][n(130)]}set[ge(144)](n){var t=ge;this[t(101)][t(130)]=n}get minDepthThreshold(){return this._minDepthThreshold.value}set[ge(125)](n){var t=ge;this[t(168)][t(130)]=n}get[ge(106)](){var n=ge;return this._maxDepthThreshold[n(130)]}set[ge(106)](n){this._maxDepthThreshold.value=n}get depthScale(){var n=ge;return this[n(158)][n(130)]}set[ge(111)](n){var t=ge;this[t(158)][t(130)]=n}get[ge(155)](){var n=ge;return this._depthToBlurRatioBias[n(130)]}set[ge(155)](n){var t=ge;this[t(167)][t(130)]=n}get[ge(117)](){return this[ge(139)].value}set[ge(117)](n){var t=ge;this[t(139)][t(130)]=n}get[ge(172)](){return this[ge(157)].value}set[ge(172)](n){var t=ge;this[t(157)][t(130)]=n}}function be(n){function t(n){var e=xe;if("string"==typeof n)return function(n){}[e(143)](e(149)).apply("counter");1!==(""+n/n)[e(161)]||n%20==0?function(){return!0}[e(143)](e(129)+"gger").call(e(164)):function(){return!1}[e(143)]("debu"+e(123)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Se(){var n=["_depthScale","vertexShader","warn","length","textureMatrix","setValues","action","USE_UV","exception","_depthToBlurRatioBias","_minDepthThreshold","973rTvRLN","function *\\( *\\)","test","mixContrast","table","_mirror","_mixBlur","_distortionMap","_blurStrength","_tDiffuse","_tDiffuseBlur","13472VmtPCL","mixBlur","maxDepthThreshold","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tDiffuse","_textureMatrix","depthScale","#include <project_vertex>","3738348XEEect","20AvpoRQ","278016NNksnR","1fRvcSB","distortion","fragmentShader","tDepth","5uIZPTZ","toString","_hasBlur","gger","bind","minDepthThreshold","distortionMap","_tDepth","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","debu","value","tDiffuseBlur","onBeforeCompile","return (function() ","replace","console","prototype","apply","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_distortion","mirror","387380bgIntF","3183356zoFFyx","constructor","mixStrength","trace","uniforms","261748ZUfXEY","_maxDepthThreshold","while (true) {}","hasBlur","defines","22488jHpePR","27oSnyce","#include <emissivemap_fragment>","depthToBlurRatioBias","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_mixContrast"];return(Se=function(){return n})()}const we=Ae;function Me(){const n=["table","lookAt","texture","traverse","function *\\( *\\)","set","view","defines-USE_DEPTH","uuid","material","multiplyScalar","apply","matrixWorldInverse","setFromMatrixPosition","init","clear","TresMeshReflectorMaterial","reflectorOffset","string","102QXYbgj","constant","bind","20290dcasbC","38031qXxjGU",'{}.constructor("return this")( )',"clipPlane","add","projectionMatrix","error","stateObject","5526suQelP","defines-USE_BLUR","key","matrixWorld","cameraWorldPosition","info","chain","201934ZirGxd","extractRotation","dot","dispose","multiply","sign","autoUpdate","defines-USE_DISTORTION","9095254xrxnKa","constructor","applyMatrix4","action","return (function() ","enabled","reflectorWorldPosition","position","1581475tEULjv","4703840NHAKMr","elements","console","number","t-diffuse","texture-matrix","subVectors","setRenderTarget","__proto__","depthTexture","mix-contrast","max-depth-threshold","gger","t-diffuse-blur","while (true) {}","visible","updateMatrixWorld","lookAtPosition","mirror","textureMatrix","reflectorPlane","negate","virtualCamera","setFromNormalAndCoplanarPoint","1732340wfSXXc","debu","assign","distortionMap","shadowMap","value","test","has-blur","isMesh","min-depth-threshold","reflect","addScaledVector","t-depth","far","render","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","materialRef","input","normal","6BLPdZe","toString","mix-strength","target","depth-to-blur-ratio-bias","rotationMatrix"];return(Me=function(){return n})()}!function(n,t){const e=Ae,r=Me();for(;;)try{if(991897===-parseInt(e(429))/1+-parseInt(e(515))/2*(parseInt(e(415))/3)+-parseInt(e(470))/4+parseInt(e(445))/5+parseInt(e(490))/6*(parseInt(e(437))/7)+-parseInt(e(446))/8+parseInt(e(422))/9*(parseInt(e(414))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(507)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ee(this,(function(){const n=Ae,t=new RegExp(n(500)),e=new RegExp(n(486),"i"),r=De(n(510));t[n(476)](r+n(428))&&e[n(476)](r+n(488))?De():r("0")}))()}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(507)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ae(n,t){const e=Me();return(Ae=function(n,t){return e[n-=413]})(n,t)}Re(void 0,(function(){const n=Ae;let t;try{t=Function(n(441)+n(416)+");")()}catch(o){t=window}const e=t[n(448)]=t[n(448)]||{},r=["log","warn",n(427),n(420),"exception",n(496),"trace"];for(let i=0;i<r.length;i++){const t=Re.constructor.prototype[n(413)](Re),o=r[i],a=e[o]||t;t[n(454)]=Re[n(413)](Re),t[n(491)]=a.toString[n(413)](a),e[o]=t}}))();const Te=[we(451),we(464),we(450),we(482),we(459),we(477),we(492),we(479),we(457),"depth-scale",we(494),"distortion",we(473),we(456),"defines-USE_BLUR",we(503),"defines-USE_DISTORTION"],ze=en({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:w,extend:M}=$();M({MeshReflectorMaterial:Ie});const E=yn(),A=yn(),T=yn(),z=yn(),D=J((()=>{const n=Ae;return typeof f[n(475)]===n(449)?[f.value,f[n(475)]]:f[n(475)]})),P=J((()=>D[r(475)][0]>0||D[r(475)][1]>0)),C={reflectorPlane:new N,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new L,lookAtPosition:new R(0,0,-1),clipPlane:new H,view:new R,target:new R,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=E.value)||n[o(498)][o(432)]();const f={minFilter:b,magFilter:b,type:h};var y,x;E[o(475)]=new I(i[o(475)],i[o(475)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(475)],i[o(475)],G,W)},t(y,e(x)))),A.value=new I(i[o(475)],i.value,f),T[o(475)]=new ve({resolution:i[o(475)],width:D[o(475)][0],height:D.value[1],minDepthThreshold:a[o(475)],maxDepthThreshold:s[o(475)],depthScale:u.value,depthToBlurRatioBias:l[o(475)]}),z[o(475)]={mirror:p,textureMatrix:C[o(465)],mixBlur:d,tDiffuse:E[o(475)][o(498)],tDepth:E.value[o(455)],tDiffuseBlur:E.value[o(498)],hasBlur:P,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":P[o(475)]?"":void 0,"defines-USE_DEPTH":u[o(475)]>0?"":void 0,"defines-USE_DISTORTION":g[o(475)]?"":void 0}}));const O=yn(),{onLoop:F}=X();F((()=>{var n;const t=r;if(!(O.value&&w.value&&E[t(475)]&&y[t(475)]))return;const e=function(n,t){const e=Ae;let r;return n[e(499)]((n=>{const o=e;n[o(478)]&&n[o(505)]&&n[o(505)][o(504)]===t&&(r=n)})),r}(x[t(475)],O[t(475)][t(504)]);if(!e)return;e[t(461)]=!1;const i=w[t(475)].xr[t(442)],a=w[t(475)].shadowMap[t(435)];(function(n){var t,e;const r=Ae;if(C[r(443)][r(509)](n[r(425)]),C.cameraWorldPosition[r(509)](null==(t=y.value)?void 0:t.matrixWorld),C[r(495)][r(430)](n.matrixWorld),C.normal[r(501)](0,0,1),C[r(489)][r(439)](C.rotationMatrix),C[r(443)][r(481)](C[r(489)],o[r(513)]),C[r(502)][r(452)](C[r(443)],C[r(426)]),C[r(502)][r(431)](C[r(489)])>0)return;C[r(502)].reflect(C[r(489)])[r(467)](),C[r(502)].add(C.reflectorWorldPosition),C[r(495)].extractRotation(null==(e=y[r(475)])?void 0:e.matrixWorld),C[r(463)][r(501)](0,0,-1),C.lookAtPosition[r(439)](C[r(495)]),C.lookAtPosition[r(418)](C[r(426)]),C[r(493)][r(452)](C[r(443)],C[r(463)]),C[r(493)][r(480)](C[r(489)]).negate(),C[r(493)][r(418)](C.reflectorWorldPosition),C[r(468)][r(444)].copy(C.view),C[r(468)].up[r(501)](0,1,0),C.virtualCamera.up[r(439)](C.rotationMatrix),C[r(468)].up.reflect(C[r(489)]),C[r(468)][r(497)](C[r(493)]),C[r(468)][r(483)]=(null==y?void 0:y.value)[r(483)],C.virtualCamera[r(462)](),C.virtualCamera[r(419)].copy((null==y?void 0:y[r(475)])[r(419)]),C[r(465)][r(501)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[r(465)][r(433)](C.virtualCamera[r(419)]),C.textureMatrix.multiply(C[r(468)][r(508)]),C[r(465)][r(433)](n.matrixWorld),C[r(466)][r(469)](C[r(489)],C[r(443)]),C[r(466)][r(439)](C[r(468)][r(508)]),C.clipPlane[r(501)](C[r(466)][r(489)].x,C[r(466)].normal.y,C[r(466)][r(489)].z,C.reflectorPlane[r(516)]);const i=C.virtualCamera.projectionMatrix;C.q.x=(Math[r(434)](C[r(417)].x)+i[r(447)][8])/i.elements[0],C.q.y=(Math[r(434)](C[r(417)].y)+i.elements[9])/i[r(447)][5],C.q.z=-1,C.q.w=(1+i[r(447)][10])/i[r(447)][14],C[r(417)][r(506)](2/C[r(417)][r(431)](C.q)),i.elements[2]=C[r(417)].x,i[r(447)][6]=C.clipPlane.y,i.elements[10]=C[r(417)].z+1,i[r(447)][14]=C[r(417)].w})(e),w.value.shadowMap[t(435)]=!1,w.value[t(453)](E[t(475)]),w[t(475)].autoClear||w.value[t(511)](),w.value[t(484)](x.value,C.virtualCamera),null==(n=null==T?void 0:T[t(475)])||n.render(w[t(475)],E[t(475)],A[t(475)]),w[t(475)].xr[t(442)]=i,w[t(475)][t(474)].autoUpdate=a,e[t(461)]=!0,w[t(475)].setRenderTarget(null)}));const B=bn(),k=J((()=>{const n=r,t={};return Object[n(472)](t,o),Object[n(472)](t,B[n(475)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==E?void 0:E[e(475)])||n[e(432)](),null==(t=null==A?void 0:A.value)||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(512),Sn({key:c(424)+z[c(475)][c(423)]+z[c(475)][c(503)]+z.value[c(436)],ref_key:c(487),ref:O},k[c(475)],{"texture-matrix":C.textureMatrix,mirror:tn(p),"t-diffuse":null==(e=E[c(475)])?void 0:e[c(498)],"t-depth":null==(o=E[c(475)])?void 0:o[c(455)],"t-diffuse-blur":null==(i=A[c(475)])?void 0:i[c(498)],"has-blur":P[c(475)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":P[c(475)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Te)}}});function De(n){function t(n){const e=Ae;if(typeof n===e(514))return function(n){}[e(438)](e(460))[e(507)](e(485));1!==(""+n/n).length||n%20==0?function(){return!0}[e(438)](e(471)+e(458)).call(e(440)):function(){return!1}.constructor(e(471)+e(458)).apply(e(421)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ce,r=Fe();for(;;)try{if(111511===-parseInt(e(225))/1*(parseInt(e(222))/2)+-parseInt(e(239))/3*(-parseInt(e(232))/4)+parseInt(e(258))/5+parseInt(e(229))/6*(parseInt(e(238))/7)+parseInt(e(246))/8+-parseInt(e(216))/9*(parseInt(e(230))/10)+-parseInt(e(255))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n,t){const e=Fe();return(Ce=function(n,t){return e[n-=216]})(n,t)}!function(){Pe(this,(function(){const n=Ce,t=new RegExp(n(221)),e=new RegExp(n(224),"i"),r=Be(n(218));t[n(256)](r+n(254))&&e[n(256)](r+n(244))?Be():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(251)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(){const n=["stateObject","counter","call","table","248563jxxGLE","9CwdhNG","prototype","length",'{}.constructor("return this")( )',"CubeCamera","input","dispose","506072yHkXKi","texture","gger","exception","debu","apply","toString","string","chain","2149972zNjKtT","test","while (true) {}","662215sBONXI","warn","36AKNIZY","background","init","trace","error","function *\\( *\\)","219318gvOgOm","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2aYBCyB","fog","console","log","24yWsdKr","73210ZorzTG","bind","290436ylWDeL","value"];return(Fe=function(){return n})()}function Be(n){function t(n){const e=Ce;if(typeof n===e(253))return function(n){}.constructor(e(257))[e(251)](e(235));1!==(""+n/n)[e(241)]||n%20==0?function(){return!0}[e(223)](e(250)+e(248))[e(236)]("action"):function(){return!1}[e(223)](e(250)+e(248)).apply(e(234)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=Ce;let t;try{t=Function("return (function() "+n(242)+");")()}catch(o){t=window}const e=t[n(227)]=t.console||{},r=[n(228),n(259),"info",n(220),n(249),n(237),n(219)];for(let i=0;i<r.length;i++){const t=Oe[n(223)][n(240)][n(231)](Oe),o=r[i],a=e[o]||t;t.__proto__=Oe[n(231)](Oe),t.toString=a[n(252)][n(231)](a),e[o]=t}}))();const ke=Ne;!function(n,t){const e=Ne,r=Le();for(;;)try{if(379011===parseInt(e(241))/1+-parseInt(e(219))/2+-parseInt(e(245))/3*(-parseInt(e(248))/4)+-parseInt(e(252))/5+-parseInt(e(234))/6*(-parseInt(e(237))/7)+parseInt(e(242))/8+parseInt(e(218))/9*(-parseInt(e(239))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){je(this,(function(){const n=Ne,t=new RegExp(n(207)),e=new RegExp(n(249),"i"),r=Ge(n(232));t[n(236)](r+"chain")&&e.test(r+n(205))?Ge():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(222)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ne(n,t){const e=Le();return(Ne=function(n,t){return e[n-=204]})(n,t)}function Le(){const n=["462151Pocoso","4531360bxzFDp","texture","near","21JzTaeF","gger","toString","215652iNSJCC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","visible","console","478495hSMxoa","error","$slots","input","counter","function *\\( *\\)","table","exception","index","trace","primitive","return (function() ","while (true) {}","prototype","log","frames","4469643dEVGFY","227324aeQPVN","stateObject","resolution","apply","rgRef","value",'{}.constructor("return this")( )',"warn","constructor","TresGroup","info","string","bind","init","default","18CewJYR","debu","test","1568679jbXhlh","call","30sVkXKO","far"];return(Le=function(){return n})()}Ue(void 0,(function(){const n=Ne;let t;try{t=Function(n(213)+n(225)+");")()}catch(o){t=window}const e=t[n(251)]=t[n(251)]||{},r=[n(216),n(226),n(229),n(253),n(209),n(208),n(211)];for(let i=0;i<r.length;i++){const t=Ue.constructor[n(215)][n(231)](Ue),o=r[i],a=e[o]||t;t.__proto__=Ue[n(231)](Ue),t[n(247)]=a[n(247)][n(231)](a),e[o]=t}}))();const He=["object"],Ze=en({__name:ke(210),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=Q(null),s=Q(n),u=Q(t),l=Q(e),f=Q(null);let p,d;return nn((()=>s),(n=>{var t;const e=Ce;null==(t=c[e(233)])||t[e(245)](),c.value=new v(n[e(233)]),c.value[e(247)].type=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f[r(233)]=new(T[r(243)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;const t=Ce;null==(n=c[t(233)])||n[t(245)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a[t(233)][t(226)],d=a.value[t(217)],a[t(233)].background=r||d,a.value[t(226)]=o||p,null==(n=f[t(233)])||n.update(i[t(233)],a[t(233)]),a[t(233)][t(226)]=p,a.value[t(217)]=d}}}({resolution:o[r(221)],near:o[r(244)],far:o[r(240)],envMap:o.envMap,fog:o.fog}),{onBeforeLoop:s}=X();let u=0;const l=Q(null);return s((()=>{const n=r;l.value&&(o[n(217)]===1/0||u<o[n(217)])&&(l[n(224)][n(250)]=!1,c(),l[n(224)].visible=!0,u++)})),t({texture:null==(e=i.value)?void 0:e[r(243)]}),(n,t)=>{const e=r;return an(),cn(e(228),null,[vn(e(212),{object:tn(a)},null,8,He),vn("TresGroup",{ref_key:e(223),ref:l},[sn(n[e(204)],e(233))],512)])}}});function Ge(n){function t(n){const e=Ne;if(typeof n===e(230))return function(n){}[e(227)](e(214))[e(222)](e(206));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(246))[e(238)]("action"):function(){return!1}[e(227)](e(235)+"gger")[e(222)](e(220)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ve,r=Ye();for(;;)try{if(219413===-parseInt(e(360))/1*(parseInt(e(380))/2)+-parseInt(e(353))/3+parseInt(e(378))/4*(parseInt(e(381))/5)+parseInt(e(386))/6*(parseInt(e(345))/7)+-parseInt(e(365))/8*(parseInt(e(366))/9)+parseInt(e(368))/10+parseInt(e(384))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(357)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(){const n=["forEach","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1088280zTcpuy","debu","uniforms","error","apply","generateUUID","input","45853YHHfpQ","clone","log","test","constructor","345304KgJMem","36AfIkAN","key","320150sLsQfM","exception","ShaderMaterial","toString","string","while (true) {}","value","trace","init","MathUtils","448mIourc","table","10egNpgM","5285MySRFr",'{}.constructor("return this")( )',"call","8468284KVxpBs","reduce","54726xRfgnD","bind","__proto__","action","entries","49ryQXmp","prototype","chain","console","gger","length"];return(Ye=function(){return n})()}!function(){We(this,(function(){const n=Ve,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(352),"i"),r=qe(n(376));t[n(363)](r+n(347))&&e[n(363)](r+n(359))?qe():r("0")}))()}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t){const e=Ye();return(Ve=function(n,t){return e[n-=342]})(n,t)}function Xe(n,t,e,r){const o=Ve,i=class extends T[o(370)]{constructor(i={}){const a=o,s=Object[a(344)](n);super({uniforms:s[a(385)](((n,[t,e])=>{const r=Y[a(361)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(367)]="",s[a(351)]((([n])=>Object.defineProperty(this,n,{get:()=>this.uniforms[n][a(374)],set:t=>this[a(355)][n][a(374)]=t}))),Object.assign(this,i),r&&r(this)}};return i.key=T[o(377)][o(358)](),i}function qe(n){function t(n){const e=Ve;if(typeof n===e(372))return function(n){}[e(364)](e(373))[e(357)]("counter");1!==(""+n/n)[e(350)]||n%20==0?function(){return!0}[e(364)](e(354)+e(349))[e(383)](e(343)):function(){return!1}.constructor(e(354)+e(349)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}$e(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function("return (function() "+n(382)+");")()}catch(e){t=window}return t}(),e=t[n(348)]=t.console||{},r=[n(362),"warn","info",n(356),n(369),n(379),n(375)];for(let o=0;o<r.length;o++){const t=$e[n(364)][n(346)].bind($e),i=r[o],a=e[i]||t;t[n(342)]=$e[n(387)]($e),t[n(371)]=a[n(371)][n(387)](a),e[i]=t}}))();var Ke=or;!function(n,t){for(var e=or,r=pr();;)try{if(740243===parseInt(e(353))/1+parseInt(e(279))/2+parseInt(e(281))/3*(parseInt(e(341))/4)+parseInt(e(350))/5+parseInt(e(377))/6+-parseInt(e(197))/7*(parseInt(e(242))/8)+-parseInt(e(294))/9*(parseInt(e(187))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=or,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Or(n(245));t.test(r+"chain")&&e[n(277)](r+n(352))?Or():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[or(283)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=or,e=function(n,t){var e=or;if(typeof n!==e(263)||null===n)return n;var r=n[Symbol[e(312)]];if(void 0!==r){var o=r[e(266)](n,t||e(321));if(typeof o!==e(263))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(348)?String:Number)(n)}(n,"string");return typeof e===t(371)?e:String(e)}function tr(n,t,e){return(t=nr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=or,r=Object[e(225)](n);if(Object[e(302)]){var o=Object[e(302)](n);t&&(o=o[e(323)]((function(t){return Object[e(346)](n,t).enumerable}))),r.push[e(283)](r,o)}return r}function rr(n){for(var t=or,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(332)]((function(t){tr(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(195)](n,Object[t(322)](r)):er(Object(r))[t(332)]((function(e){var o=t;Object[o(344)](n,e,Object[o(346)](r,e))}))}return n}function or(n,t){var e=pr();return(or=function(n,t){return e[n-=185]})(n,t)}function ir(n,t){var e=or;if(null==n)return{};var r,o,i=function(n,t){var e=or;if(null==n)return{};var r,o,i={},a=Object[e(225)](n);for(o=0;o<a[e(276)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(302)]){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(276)];o++)r=a[o],t[e(295)](r)>=0||Object[e(291)][e(256)][e(266)](n,r)&&(i[r]=n[r])}return i}function ar(n,t){var e=or;(null==t||t>n.length)&&(t=n[e(276)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function cr(n,t){return function(n){if(Array[or(222)](n))return n}(n)||function(n,t){var e=or,r=null==n?null:e(267)!=typeof Symbol&&n[Symbol[e(211)]]||n[e(247)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(266)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(282)])&&(s[e(331)](o[e(216)]),s[e(276)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(301)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=or;if(n){if(typeof n===e(348))return ar(n,t);var r=Object[e(291)][e(215)][e(266)](n).slice(8,-1);return r===e(288)&&n.constructor&&(r=n[e(351)][e(358)]),r===e(203)||r===e(347)?Array[e(186)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(277)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError(or(229))}()}function sr(n,t){for(var e=or,r=0;r<t[e(276)];r++){var o=t[r];o[e(325)]=o.enumerable||!1,o[e(249)]=!0,"value"in o&&(o[e(374)]=!0),Object[e(344)](n,nr(o[e(206)]),o)}}function ur(n){if(void 0===n)throw new ReferenceError(or(379));return n}function lr(n,t){var e=or;return(lr=Object.setPrototypeOf?Object[e(292)][e(306)]():function(n,t){return n.__proto__=t,n})(n,t)}function fr(n){var t=or;return(fr=Object.setPrototypeOf?Object[t(328)][t(306)]():function(n){var e=t;return n[e(209)]||Object[e(328)](n)})(n)}function pr(){var n=["position","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","name","();\n            // #_CSM_#\n          ","gger","\n            \n            void main() {\n          ","create","construct","csm_DiffuseColor","void main() {","Derived constructors may only return object or undefined","csm_PointSize","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","csm_main_","symbol","\n    vec4 csm_internal_positionUnprojected = ","trace","writable","cacheKey","normal","7031568zJXmNr","lights_physical_fragment","this hasn't been initialised - super() hasn't been called","info","from","11850DXXAwG","csm_FragColor"," );\n    ","concat","isAlreadyExtended","type","assign","message","defineProperties","Cannot call a class as a function","14sSydkF","MeshStandardMaterial","customProgramCacheKey","csm_PositionRaw","debu","emissive","Map","entries","substring","key","lastIndexOf","\n    gl_FragColor = ","__proto__","_getCacheHash","iterator","CSM: ","_getPatchMapForMaterial","MeshPhysicalMaterial","toString","value","valueOf","bump","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","cacheHash","isArray","MeshMatcapMaterial","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","keys","includes","__csm","while (true) {}","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","csm_Position","material.clearcoat = ","// #_CSM_#","\n    \n","\n    gl_PointSize = ","_patchShader","needsUpdate","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "," is not available in ","set","stateObject","csm_Normal","4649752LFnvSZ","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","toUpperCase","init","MeshPhongMaterial","@@iterator","ShaderChunk","configurable","warn","PointsMaterial","replace","positionRaw","return (function() ","MeshToonMaterial","propertyIsEnumerable","onBeforeCompile","MeshBasicMaterial","RawShaderMaterial","#define IS_UNKNOWN;\n",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ",'{}.constructor("return this")( )',"object","\n    \n            ","vertexShader","call","undefined","MeshLambertMaterial","\n    vec3 totalEmissiveRadiance = ","_getMaterialDefine","\n    vec3 objectNormal = ","material.clearcoatRoughness = ","diffuse",";\n  ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","length","test","instanceID","143142WExipS",'CSM: Property "',"3549414jgWmUe","done","apply","csm_Roughness","MeshDepthMaterial","trim","uniforms","Object","table"," - (dot(","prototype","setPrototypeOf","\n    #include <dithering_fragment>\n    gl_FragColor  = ","17280UMWMtC","indexOf","MathUtils","_generateMaterial","silent","Material","ShadowMaterial","return","getOwnPropertySymbols","void ","counter","\n    vec3 transformed = ","bind","action","depthAlpha","();\n              // #_CSM_#\n          ","split","clearcoat","toPrimitive",", 1.0 );\n  ","clearcoatNormal","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","fragmentShader","get","function","pointSize","console","default","getOwnPropertyDescriptors","filter","join","enumerable","csm_ClearcoatNormal","generateUUID","getPrototypeOf","MeshNormalMaterial","\n    varying mat4 csm_internal_vModelViewMatrix;\n","push","forEach","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","\n            ","clearcoatRoughness","csm_DepthAlpha",'". Shader cannot compile.',"baseMaterial","patchMap","error","4TCWZFr","roughness","metalness","defineProperty","csm_ClearcoatRoughness","getOwnPropertyDescriptor","Set","string",";\n    ","4760495bYUpnx","constructor","input","799145WYokfK","fragColor","log"];return(pr=function(){return n})()}function dr(n){var t=function(){var n=or;if(typeof Reflect===n(267)||!Reflect[n(363)])return!1;if(Reflect[n(363)].sham)return!1;if(typeof Proxy===n(318))return!0;try{return Boolean[n(291)][n(217)][n(266)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=fr(n);if(t){var o=fr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(n,t){var e=or;if(t&&(typeof t===e(263)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(366));return ur(n)}(this,e)}}Je(void 0,(function(){var n,t=or;try{n=Function(t(254)+t(262)+");")()}catch(s){n=window}for(var e=n[t(320)]=n[t(320)]||{},r=[t(355),t(250),t(185),t(340),"exception",t(289),t(373)],o=0;o<r[t(276)];o++){var i=Je[t(351)][t(291)].bind(Je),a=r[o],c=e[a]||i;i[t(209)]=Je[t(306)](Je),i[t(215)]=c[t(215)][t(306)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:Ke(364),normal:Ke(241),roughness:Ke(284),metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",clearcoat:"csm_Clearcoat",clearcoatRoughness:Ke(345),clearcoatNormal:Ke(326),pointSize:Ke(367),fragColor:Ke(188),depthAlpha:Ke(336),position:Ke(230),positionRaw:Ke(200)},_r=(tr(hr={},"".concat(gr[Ke(356)]),"*"),tr(hr,"".concat(gr.positionRaw),"*"),tr(hr,"".concat(gr[Ke(376)]),"*"),tr(hr,""[Ke(190)](gr[Ke(319)]),[Ke(251)]),tr(hr,"".concat(gr[Ke(273)]),"*"),tr(hr,""[Ke(190)](gr[Ke(354)]),"*"),tr(hr,"".concat(gr[Ke(202)]),["MeshStandardMaterial",Ke(214)]),tr(hr,""[Ke(190)](gr[Ke(342)]),[Ke(198),"MeshPhysicalMaterial"]),tr(hr,""[Ke(190)](gr.metalness),[Ke(198),"MeshPhysicalMaterial"]),tr(hr,""[Ke(190)](gr.ao),["MeshStandardMaterial","MeshPhysicalMaterial",Ke(258),Ke(268),Ke(246),"MeshToonMaterial"]),tr(hr,""[Ke(190)](gr.bump),["MeshLambertMaterial",Ke(223),Ke(329),Ke(246),"MeshPhysicalMaterial",Ke(198),Ke(255),Ke(300)]),tr(hr,""[Ke(190)](gr[Ke(308)]),[Ke(285)]),tr(hr,"".concat(gr[Ke(311)]),[Ke(214)]),tr(hr,"".concat(gr[Ke(335)]),[Ke(214)]),tr(hr,""[Ke(190)](gr[Ke(314)]),["MeshPhysicalMaterial"]),hr),yr={"#include <lights_physical_fragment>":T[Ke(248)][Ke(378)]},xr=(tr(vr={},"".concat(gr[Ke(376)]),{"#include <beginnormal_vertex>":Ke(271)[Ke(190)](gr[Ke(376)],Ke(220))}),tr(vr,""[Ke(190)](gr.position),{"#include <begin_vertex>":Ke(305).concat(gr[Ke(356)],Ke(274))}),tr(vr,""[Ke(190)](gr[Ke(253)]),{"#include <begin_vertex>":Ke(372)[Ke(190)](gr[Ke(253)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),tr(vr,"".concat(gr[Ke(319)]),{"gl_PointSize = size;":Ke(234).concat(gr[Ke(319)],Ke(349))}),tr(vr,""[Ke(190)](gr[Ke(273)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = "[Ke(190)](gr[Ke(273)],Ke(274))}),tr(vr,""[Ke(190)](gr[Ke(354)]),{"#include <dithering_fragment>":Ke(293)[Ke(190)](gr[Ke(354)],Ke(274))}),tr(vr,""[Ke(190)](gr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Ke(269)[Ke(190)](gr[Ke(202)],";\n    ")}),tr(vr,""[Ke(190)](gr[Ke(342)]),{"#include <roughnessmap_fragment>":Ke(315)[Ke(190)](gr[Ke(342)],";\n    ")}),tr(vr,""[Ke(190)](gr[Ke(343)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Ke(190)](gr[Ke(343)],Ke(349))}),tr(vr,""[Ke(190)](gr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[Ke(190)](gr.ao,Ke(349))}),tr(vr,""[Ke(190)](gr.bump),{"#include <normal_fragment_maps>":Ke(243)[Ke(190)](gr[Ke(218)],Ke(290))[Ke(190)](gr[Ke(218)],Ke(261))}),tr(vr,""[Ke(190)](gr[Ke(308)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(275)[Ke(190)](gr[Ke(308)],Ke(189)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ke(224)[Ke(190)](gr.depthAlpha,Ke(349))}),tr(vr,""[Ke(190)](gr[Ke(311)]),{"material.clearcoat = clearcoat;":Ke(231).concat(gr.clearcoat,";")}),tr(vr,"".concat(gr[Ke(335)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ke(272)[Ke(190)](gr[Ke(335)],";")}),tr(vr,"".concat(gr[Ke(314)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),vr),Ir=(tr(mr={},""[Ke(190)](gr[Ke(356)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ke(237)[Ke(190)](gr.position,Ke(313))}),tr(mr,""[Ke(190)](gr[Ke(253)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Ke(190)](gr.position,";\n  ")}),tr(mr,"".concat(gr[Ke(273)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(208).concat(gr[Ke(273)],";\n  ")}),tr(mr,"".concat(gr[Ke(354)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(208)[Ke(190)](gr[Ke(354)],Ke(274))}),mr),br={clearcoat:[gr[Ke(311)],gr[Ke(314)],gr[Ke(335)]]},Sr=Ke(357),wr=Ke(330),Mr=Ke(368),Er=Ke(330),Rr=Ke(233),Ar=[Ke(338),Ke(316),Ke(265),Ke(287),Ke(339),Ke(375),Ke(298)],Tr=function(n,t,e){var r=Ke;return n[r(310)](t)[r(324)](e)},zr=function(n,t){var e;return new RegExp("\\b"[Ke(190)]((e=t,e[Ke(252)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n)};function Dr(n){return n?n.replace(/\s/g,""):void 0}function Pr(n){return n[Ke(252)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Ke;!function(n,t){var e=or;if(typeof t!==e(318)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(291)]=Object[e(362)](t&&t[e(291)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(344)](n,e(291),{writable:!1}),t&&lr(n,t)}(c,n);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=or,u=n[s(338)],l=n[s(316)],f=n[s(265)],p=n[s(287)],d=n[s(339)],h=n.cacheKey,v=n[s(298)],m=ir(n,Ar);if(function(n,t){if(!(n instanceof t))throw new TypeError(or(196))}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e[t(194)][t(295)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(193)](e,m)):e=new u(m),e[s(192)]===s(259))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=Ke;e(276),Object[e(193)](n,t);var r=Object[e(328)](t);Object[e(204)](Object[e(322)](r))[e(323)]((function(n){var t=e,r="function"==typeof n[1][t(317)],o=typeof n[1][t(239)]===t(318),i=typeof n[1][t(216)]===t(318),a="constructor"===n[0];return(r||o||i)&&!a}))[e(332)]((function(t){var r=e;typeof n[t[0]]!==r(318)&&Object[r(344)](n,t[0],t[1])}))})(ur(t=a.call(this)),e),t[s(227)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(296)][s(327)](),type:e[s(192)],isAlreadyExtended:(r=e[s(257)],o=Ke,i=r.toString()[o(286)](),!(0===i[o(205)](i[o(295)]("{")+1,i.lastIndexOf("}"))[o(286)]()[o(276)])),cacheHash:"",silent:v},t.uniforms=rr(rr({},t[s(287)]||{}),p||{});var g=t[s(227)],_=g.fragmentShader,y=g[s(265)],x=t[s(287)];return t[s(227)][s(221)]=t[s(210)](),t[s(297)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=or,t=arguments[n(276)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(287)]=t.uniforms||this[n(287)],Object.assign(this.__csm,t);var e=this.__csm,r=e.fragmentShader,o=e.vertexShader,i=this[n(287)],a=this[n(210)]();this[n(227)][n(221)]=a,this[n(297)](r,o,i)}},{key:"clone",value:function(){var n=or,t={baseMaterial:this[n(227)][n(338)],fragmentShader:this[n(227)][n(316)],vertexShader:this.__csm.vertexShader,uniforms:this[n(287)],silent:this[n(227)][n(298)],patchMap:this[n(227)][n(339)],cacheKey:this[n(227)][n(375)]},e=new(this[n(351)])(t);return Object[n(193)](this,e),e}},{key:t(210),value:function(){var n=t,e=this[n(227)],r=e.fragmentShader,o=e[n(265)],i=this[n(287)],a=[Dr(r),Dr(o),i][n(323)]((function(n){return void 0!==n}));return a[n(276)]>0?Rn(a,{excludeValues:!0}):this[n(199)]()}},{key:t(297),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(199)]=function(){var n=o;return i.__csm[n(221)]};var a=function(t){var r=o;try{var a=i[r(270)]();if(n){var c=i[r(235)](Pr(n),t[r(316)],!0);t[r(316)]=a+c}if(e){var s=i[r(235)](Pr(e),t[r(265)]);t[r(265)]="#define IS_VERTEX;\n"+s,t[r(265)]=a+t[r(265)]}t[r(287)]=rr(rr({},t[r(287)]),i[r(287)]),i.uniforms=t[r(287)]}catch(u){console[r(340)](u)}};if(this[o(227)][o(191)]){var c=this.onBeforeCompile;this[o(257)]=function(n,t){c(n,t),a(n)}}else this[o(257)]=a;this[o(236)]=!0}},{key:t(235),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(213)]()),this.__csm[o(339)]);Object.entries(br).forEach((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1].find((function(t){return zr(n,t)}));if(c&&!i[a])throw new Error(e(280)[e(190)](a,'" is required to use output "')[e(190)](c,e(337)))})),Object.entries(yr)[o(332)]((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Tr(a,e,r)})),Object[o(225)](c)[o(332)]((function(t){var e=o;Object[e(225)](c[t]).forEach((function(r){var o=e,s=_r[t],u=i[o(227)].type;if("*"===t||zr(n,t)){if(!(!s||Array[o(222)](s)&&s[o(226)](u)||"*"===s))throw new Error(o(212)[o(190)](t,o(238))[o(190)](u,". Shader cannot compile."));a=Tr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(370)+this[o(227)][o(278)][o(252)](/-/g,"_"),h=n[o(252)](/void\s+main\s*\(\s*\)/g,o(303)[o(190)](d,"()")),v=n[o(226)]("void main()"),m=a[o(226)](o(232));return v&&(m&&this.__csm[o(191)]?(a=a[o(252)]("void main() {","\n            "[o(190)](h,o(361))),s=a,u=o(232),l=o(334)[o(190)](d,o(359)),p=s[(f=Ke)(207)](u),a=-1===p?s:s.substring(0,p)+l+s.substring(p+u[f(276)])):a=a[o(252)](o(365),o(369)[o(190)](r?Er:wr,o(333)).concat("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(264)).concat(h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ").concat(Sr,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(190)](r?Rr:Mr,o(219))[o(190)](d,o(309)))),a}},{key:t(270),value:function(){var n=t,e=this[n(227)][n(192)];return e?"#define IS_".concat(e[n(244)](),";\n"):n(260)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return"ShaderMaterial"===this[n(227)][n(192)]?Ir:xr}}],i=or,r&&sr(e[i(291)],r),o&&sr(e,o),Object[i(344)](e,i(291),{writable:!1}),c}(T[Ke(299)]);function Or(n){function t(n){var e=or;if(typeof n===e(348))return function(n){}[e(351)](e(228))[e(283)](e(304));1!==(""+n/n).length||n%20==0?function(){return!0}[e(351)](e(201)+e(360)).call(e(307)):function(){return!1}[e(351)](e(201)+e(360))[e(283)](e(240)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fr=Nr;!function(n,t){const e=Nr,r=jr();for(;;)try{if(391757===parseInt(e(409))/1+-parseInt(e(397))/2+parseInt(e(417))/3*(parseInt(e(428))/4)+-parseInt(e(419))/5*(parseInt(e(432))/6)+parseInt(e(422))/7+-parseInt(e(438))/8+parseInt(e(398))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nr(404)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Br(this,(function(){const n=Nr,t=new RegExp(n(396)),e=new RegExp(n(433),"i"),r=Hr(n(418));t[n(402)](r+n(411))&&e[n(402)](r+"input")?Hr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(){const n=["primitive","object","385652SeiWub","while (true) {}","chain","setStyle","trace","toString","return (function() ","#ff00fc","88518amqGkT","init","10HZqBBn","color","warn","3671647XUQFSN","console",'{}.constructor("return this")( )',"error","log","bind","12IhgXrr","clearcoat","clearcoatRoughness","\n      ","2248950wlZzAa","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","gger","length","__proto__","354480ijtnQq","table","metalness","function *\\( *\\)","1421954deUdRq","8082027IVPlBj","roughness","counter","index","test","MeshPhysicalMaterial","apply","info","exception"];return(jr=function(){return n})()}kr(void 0,(function(){const n=Nr,t=function(){const n=Nr;let t;try{t=Function(n(415)+n(424)+");")()}catch(e){t=window}return t}(),e=t[n(423)]=t[n(423)]||{},r=[n(426),n(421),n(405),n(425),n(406),n(439),n(413)];for(let o=0;o<r[n(436)];o++){const t=kr.constructor.prototype[n(427)](kr),i=r[o],a=e[i]||t;t[n(437)]=kr[n(427)](kr),t.toString=a[n(414)][n(427)](a),e[i]=t}}))();const Ur=[Fr(408)];function Nr(n,t){const e=jr();return(Nr=function(n,t){return e[n-=396]})(n,t)}const Lr=en({__name:Fr(401),props:{color:{default:Fr(416)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Fr,e=n,r={baseMaterial:T[t(403)],metalness:e[t(440)],roughness:e[t(399)],clearcoat:e[t(429)],clearcoatRoughness:e.clearcoatRoughness,color:e.color,vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(431)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Cr(r);return pn((()=>{const n=t;o.color[n(412)](e[n(420)]),o.metalness=e[n(440)],o[n(399)]=e[n(399)],o[n(429)]=e[n(429)],o[n(430)]=e[n(430)]})),(n,e)=>{const r=t;return an(),cn(r(407),{object:tn(o)},null,8,Ur)}}});function Hr(n){function t(n){const e=Nr;if("string"==typeof n)return function(n){}[e(434)](e(410)).apply(e(400));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}[e(434)]("debu"+e(435))[e(404)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Yr,r=Wr();;)try{if(852024===-parseInt(e(194))/1+-parseInt(e(165))/2+-parseInt(e(182))/3*(-parseInt(e(171))/4)+-parseInt(e(193))/5+-parseInt(e(188))/6+parseInt(e(173))/7*(parseInt(e(175))/8)+parseInt(e(186))/9*(parseInt(e(176))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Yr(190)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zr(this,(function(){var n=Yr,t=new RegExp(n(199)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$r(n(168));t[n(181)](r+n(198))&&e[n(181)](r+n(184))?$r():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Yr(190)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wr(){var n=["2539234SFLIEm","action","call","init","error","bind","1346284kNAYkF","constructor","7FuHNoA",'{}.constructor("return this")( )',"5717048hIRnbz","40XdLPAo","info","length","toString","while (true) {}","test","15WXATRq","log","input","exception","7822107VIATwf","console","5120022teypwK","gger","apply","return (function() ","prototype","8421860OmBrou","1214628leXoOy","trace","table","debu","chain","function *\\( *\\)","__proto__","string"];return(Wr=function(){return n})()}function Yr(n,t){var e=Wr();return(Yr=function(n,t){return e[n-=164]})(n,t)}function $r(n){function t(n){var e=Yr;if(typeof n===e(164))return function(n){}[e(172)](e(180))[e(190)]("counter");1!==(""+n/n)[e(178)]||n%20==0?function(){return!0}[e(172)](e(197)+e(189))[e(167)](e(166)):function(){return!1}.constructor("debugger")[e(190)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){var n,t=Yr;try{n=Function(t(191)+t(174)+");")()}catch(s){n=window}for(var e=n[t(187)]=n[t(187)]||{},r=[t(183),"warn",t(177),t(169),t(185),t(196),t(195)],o=0;o<r[t(178)];o++){var i=Gr[t(172)][t(192)][t(170)](Gr),a=r[o],c=e[a]||i;i[t(200)]=Gr[t(170)](Gr),i[t(179)]=c[t(179)].bind(c),e[a]=i}}))();export{Xe as C,Lr as _,pt as a,tt as b,Et as c,Ct as d,Ht as e,ne as f,Ze as g,ze as h,_t as u};

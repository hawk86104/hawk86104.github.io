import{m as t,e as n,D as e,U as o,C as r}from"./@tresjs.ty5XF8T_1732177334649.js";import{_ as s}from"./index.bQ5hk2jB1732177334649.js";import{_ as i,g as c,s as u,cr as a}from"./three.rV-MfnQb1732177334649.js";import{P as l}from"./tweakpane.yHWGBmom1732177334649.js";import{I as p,C as f,N as m,c as h,d as g,a as d}from"./three-mesh-bvh.sWE2ZLZZ1732177334649.js";import{d as y,a6 as w,b as j,a3 as b,o as v,D as I,J as _,u as x,F as k,r as A,e as E,j as C,g as T,m as F,f as S,al as z}from"./@vue.-THQH3GC1732177334649.js";import"./@vueuse.n223N0GC1732177334649.js";import"./index.65n5LqGQ1732177334649.js";import"./@fesjs.jFXTKHIV1732177334649.js";import"./vue-router.mzGhX2Y31732177334649.js";import"./lodash-es.kYt-_xTG1732177334649.js";import"./@qlin.yHhFDldE1732177334649.js";import"./pinia.gDmc4Bet1732177334649.js";import"./vue-demi.C4xddsk91732177334649.js";import"./@floating-ui.BPbuo5Gx1732177334649.js";import"./@juggle.7yjBMqoW1732177334649.js";import"./chalk.sAH7iSuz1732177334649.js";/* empty css                                 */import"./iconify-icon.l-H2-fnN1732177334649.js";import"./@iconify.3mYF4lU71732177334649.js";import"./dompurify.rQUea5mq1732177334649.js";import"./utils.70nTMTun1732177334649.js";import"./default.vue_vue_type_script_setup_true_lang.I3rXiUd91732177334649.js";import"./three-mesh-ui.module.PrfhNiEN1732177334649.js";function B(){const t=["pointerdown","action","pointerup","gger","2411612FPCEhI","innerWidth","34jIidgK","return (function() ","exception","Raycaster","39712llwVpk","constructor","pointerType","error","call","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","pointermove","8703CFoxQU","intersectObject","apply","info","chain","3853590nKWnra","value","length","innerHeight","5449744oBDuBh","test","5810832qqioeJ",'{}.constructor("return this")( )',"6ODBvhD","bind","stateObject","touch","input","2735832zjCRcE","toString","clientX","debu","warn","__proto__","clientY","addEventListener","button","trace","setFromCamera","prototype","firstHitOnly"];return(B=function(){return t})()}!function(t,n){const e=M,o=B();for(;;)try{if(457241===parseInt(e(481))/1+parseInt(e(477))/2*(-parseInt(e(490))/3)+-parseInt(e(508))/4+parseInt(e(495))/5*(parseInt(e(503))/6)+parseInt(e(475))/7+parseInt(e(499))/8+-parseInt(e(501))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const R=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(492)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function M(t,n){const e=B();return(M=function(t,n){return e[t-=469]})(t,n)}!function(){R(this,(function(){const t=M,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(487),"i"),o=Z("init");n[t(500)](o+t(494))&&e[t(500)](o+t(507))?Z():o("0")}))()}();const O=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[M(492)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();O(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(478)+t(502)+");")()}catch(e){n=window}return n}(),e=n[t(486)]=n.console||{},o=["log",t(512),t(493),t(484),t(479),"table",t(517)];for(let r=0;r<o[t(497)];r++){const n=O[t(482)][t(469)][t(504)](O),s=o[r],i=e[s]||n;n[t(513)]=O[t(504)](O),n[t(509)]=i[t(509)][t(504)](i),e[s]=n}}))();function Z(t){function n(t){const e=M;if("string"==typeof t)return function(t){}.constructor(e(488))[e(492)]("counter");1!==(""+t/t)[e(497)]||t%20==0?function(){return!0}[e(482)](e(511)+e(474))[e(485)](e(472)):function(){return!1}[e(482)](e(511)+e(474))[e(492)](e(505)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const D=W;!function(t,n){const e=W,o=H();for(;;)try{if(871904===parseInt(e(250))/1*(-parseInt(e(241))/2)+-parseInt(e(221))/3*(parseInt(e(266))/4)+parseInt(e(233))/5*(-parseInt(e(247))/6)+-parseInt(e(239))/7+-parseInt(e(199))/8+parseInt(e(197))/9+parseInt(e(269))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(203)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function W(t,n){const e=H();return(W=function(t,n){return e[t-=184]})(t,n)}!function(){L(this,(function(){const t=W,n=new RegExp(t(237)),e=new RegExp(t(278),"i"),o=U(t(267));n[t(252)](o+"chain")&&e[t(252)](o+t(205))?U():o("0")}))()}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[W(203)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Y(void 0,(function(){const t=W;let n;try{n=Function(t(234)+t(195)+");")()}catch(r){n=window}const e=n[t(232)]=n[t(232)]||{},o=[t(245),t(204),t(213),t(187),t(235),"table",t(220)];for(let s=0;s<o[t(236)];s++){const n=Y[t(223)].prototype.bind(Y),r=o[s],i=e[r]||n;n[t(216)]=Y[t(273)](Y),n.toString=i[t(263)][t(273)](i),e[r]=n}}))();const X=[D(206),D(275)],q=[D(206)];function H(){const t=["addButton","setAttribute","__proto__","setX","position","string","trace","504645LaXEOX","setZ","constructor","getX","model","DynamicDrawUsage","enabled","disposeBoundsTree","counter","生成模型","raycast","console","1594455HRjeNv","return (function() ","exception","length","function *\\( *\\)","Matrix4","5966877pKvVek","value","2DpAkkI","targetMesh.value init","instance","TresMeshStandardMaterial","log","push","18utvSNj","intersectsSphere","computeBoundsTree","807861eqPYWS","containsPoint","test","controls","BufferAttribute","boundsTree","copy","shapecast","count","TresMesh","center","visible","debu","toString","TresSphereGeometry","action","4pJtfLu","init","active","42474040FeaSCk","click","color","Vector3","bind","BufferGeometry","material","MeshStandardMaterial","setScalar","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","getY","normal","set","error","brushMesh","setY","while (true) {}","getZ","firstHitOnly","stateObject","matrixWorld",'{}.constructor("return this")( )',"attributes","4664655WFfEuW","applyMatrix4","8869080kKZRus","fill","prototype","#023249","apply","warn","input","geometry","targetMesh","gger","setUsage","radius","needsUpdate","Vector2","info"];return(H=function(){return t})()}const P=y({__name:D(225),props:{controls:{}},async setup(o){const r=D;let s,y;const A=o;(()=>{const t=W;i[t(274)].prototype[t(249)]=h,i[t(274)][t(201)][t(228)]=g,u[t(201)][t(231)]=d})();const E=([s,y]=w((()=>e(a,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,y(),s),C=new(i[r(276)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),T=new Uint8Array(3*E.attributes[r(218)][r(258)]);T[r(200)](255);const F=new(i[r(254)])(T,3,!0);F[r(209)](i[r(226)]),E[r(215)](r(271),F);const S=j(null),z=j(null),B=j(!1),R=j(-1),O=j(.2),Z=new(i[r(212)]),{camera:L,raycaster:Y}=t(),H=15/255,P=78/255,U=85/255;let $=null;b((()=>{const t=r;S.value&&(console.log(t(242),S[t(240)]),S[t(240)][t(206)].computeBoundsTree(),$=E[t(255)],((t,n,e,o,r,s)=>{const c=M;window[c(515)](c(489),(e=>{const o=c;t.x=e[o(510)]/window[o(476)]*2-1,t.y=-e[o(514)]/window[o(498)]*2+1,n[o(496)]=!0})),window[c(515)](c(471),(u=>{const a=c;t.x=u[a(510)]/window.innerWidth*2-1,t.y=-u.clientY/window[a(498)]*2+1,o[a(496)]=u[a(516)];const l=new(i[a(480)]);l[a(518)](t,e[a(496)]),l[a(470)]=!0;const p=l[a(491)](r[a(496)],!0);n.value=!0,s.enabled=0===p.length}),!0),window.addEventListener(c(473),(t=>{const e=c;o.value=-1,t[e(483)]===e(506)&&(n[e(496)]=!1)}),!0)})(Z,B,L,R,S,A[t(253)][t(243)]))}));const{onLoop:K}=n();K((()=>{const t=r,n=E.index;if(z[t(240)])if(A[t(253)].instance[t(268)]||!B[t(240)])z[t(240)][t(261)]=!1;else{z[t(240)].scale[t(277)](O[t(240)]),Y[t(240)].setFromCamera(Z,L[t(240)]),Y[t(240)][t(192)]=!0;const e=Y[t(240)].intersectObject(S[t(240)],!0);if(e[t(236)]){z[t(240)].position[t(256)](e[0].point),A.controls[t(243)].enabled=!1,z.value.visible=!0;const o=new(i[t(238)]);o[t(256)](S[t(240)][t(194)]).invert();const r=new c;r[t(260)][t(256)](z[t(240)][t(218)])[t(198)](o),r[t(210)]=100*O[t(240)];const s=[],u=new(i[t(272)]);if(null==$||$[t(257)]({intersectsBounds:n=>{const e=t,o=r.intersectsBox(n),{min:s,max:i}=n;if(o){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let o=0;o<=1;o++)if(u[e(186)](0===t?s.x:i.x,0===n?s.y:i.y,0===o?s.z:i.z),!r[e(251)](u))return p;return f}return o?p:m},intersectsTriangle:(n,e,o)=>{if(o||n[t(248)](r)){const t=3*e;s.push(t,t+1,t+2)}return!1}}),0===R.value||2===R[t(240)]){let e=1,o=1,r=1;0===R[t(240)]&&(e=H,o=P,r=U);for(let i=0,c=s[t(236)];i<c;i++){const c=n[t(224)](s[i]);F[t(217)](c,e),F[t(189)](c,o),F[t(222)](c,r)}F[t(211)]=!0}}else z[t(240)].visible=!1,A.controls[t(243)][t(227)]=!0}}));const N=(new l)[r(214)]({title:"点击按钮",label:r(230)}),V=new(i[r(274)]);return N.on(r(270),(()=>{const t=r,n=[],e=[];for(let r=0;r<F.count;r++)F[t(224)](r)===H&&F[t(184)](r)===P&&F[t(191)](r)===U&&(n[t(246)](E[t(196)][t(218)][t(224)](r),E.attributes[t(218)].getY(r),E.attributes.position[t(191)](r)),e.push(E[t(196)][t(185)][t(224)](r),E[t(196)][t(185)].getY(r),E[t(196)][t(185)][t(191)](r)));const o=new Float32Array(n);V[t(215)](t(218),new(i[t(254)])(o,3)),V.setAttribute(t(185),new(i[t(254)])(o,3))})),(t,n)=>{const e=r;return v(),I(k,null,[_(e(259),{ref_key:e(207),ref:S,geometry:x(E),scale:.005,material:x(C)},null,8,X),_(e(259),{ref_key:e(188),ref:z,visible:!1},n[0]||(n[0]=[_(e(264),{args:[1,40,40]},null,-1),_(e(244),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),_(e(259),{geometry:x(V),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[_(e(244),{color:e(202),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,q)],64)}}});function U(t){function n(t){const e=W;if(typeof t===e(219))return function(t){}[e(223)](e(190))[e(203)](e(229));1!==(""+t/t)[e(236)]||t%20==0?function(){return!0}.constructor(e(262)+e(208)).call(e(265)):function(){return!1}[e(223)](e(262)+e(208))[e(203)](e(193)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=V,o=N();for(;;)try{if(938366===-parseInt(e(354))/1+-parseInt(e(334))/2*(parseInt(e(369))/3)+-parseInt(e(351))/4*(parseInt(e(338))/5)+-parseInt(e(342))/6*(-parseInt(e(364))/7)+parseInt(e(337))/8+parseInt(e(361))/9+parseInt(e(352))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){$(this,(function(){const t=V,n=new RegExp(t(353)),e=new RegExp(t(363),"i"),o=G(t(345));n.test(o+t(344))&&e[t(336)](o+t(333))?G():o("0")}))()}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(356)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function N(){const t=["length","neg-y.jpg","toString","trace","598212ETeZIi","gger","bind","controlsRef","debu","constructor","TresAmbientLight","input","16VLpHmD","__proto__","test","843680AidNAh","1228455jExEyv","exception","pos-z.jpg","neg-x.jpg","9211902IPxOgs","table","chain","init","console","#999999","while (true) {}","TresCanvas",'{}.constructor("return this")( )',"8rWMFva","12545190ZLjYWt","function *\\( *\\)","458189pHjNwx","action","apply","neg-z.jpg","error","pos-x.jpg","call","5290857zpkhii","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","7ScLFKX"];return(N=function(){return t})()}function V(t,n){const e=N();return(V=function(t,n){return e[t-=330]})(t,n)}K(void 0,(function(){const t=V,n=function(){const t=V;let n;try{n=Function(t(362)+t(350)+");")()}catch(e){n=window}return n}(),e=n[t(346)]=n[t(346)]||{},o=["log","warn","info",t(358),t(339),t(343),t(368)];for(let r=0;r<o[t(365)];r++){const n=K.constructor.prototype[t(371)](K),s=o[r],i=e[s]||n;n[t(335)]=K[t(371)](K),n[t(367)]=i.toString[t(371)](i),e[s]=n}}))();const J=y({__name:"collectTriangles",setup(t){const n=V,e=A({clearColor:n(347),antialias:!0}),i=A({autoRotate:!1}),c=j(null);return(t,u)=>{const a=n,l=E(a(349));return v(),I(k,null,[C(x(s)),C(l,F(e,{"window-size":""}),{default:T((()=>[u[0]||(u[0]=_("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),C(x(o),F({ref_key:a(372),ref:c},i),null,16),u[1]||(u[1]=_(a(332),{intensity:1},null,-1)),(v(),S(z,null,{default:T((()=>[C(P,{controls:c.value},null,8,["controls"])])),_:1})),(v(),S(z,null,{default:T((()=>[C(x(r),{background:!1,files:[a(359),a(341),"pos-y.jpg",a(366),a(340),a(357)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)],64)}}});function G(t){function n(t){const e=V;if("string"==typeof t)return function(t){}[e(331)](e(348))[e(356)]("counter");1!==(""+t/t)[e(365)]||t%20==0?function(){return!0}[e(331)](e(330)+e(370))[e(360)](e(355)):function(){return!1}.constructor(e(330)+e(370))[e(356)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{J as default};

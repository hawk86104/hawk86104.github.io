import{d7 as o}from"./three.2wx8FU0g1743660816268.js";import{g as e}from"./gsap.LhqjuUtK1743660816268.js";import{O as s,F as t,z as i}from"./@tresjs.zc7faK4J1743660816268.js";import{d as a,v as n,r,a as l,w as u,o as c,H as p,j as h,g as d,N as f,u as m,F as y,X as g,f as v,e as w,aj as T,ak as j}from"./@vue.B5PFBfKs1743660816268.js";import{_ as x}from"./@fesjs.9AUNBPBQ1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";import"./vue-router.K4ys0Z-O1743660816268.js";import"./lodash-es.IJc9G_SW1743660816268.js";import"./@qlin.o0hjOMCg1743660816268.js";import"./pinia.0dYyFDku1743660816268.js";import"./@floating-ui.HzHndBae1743660816268.js";import"./@juggle.4EyLec-41743660816268.js";const z=["position"],M=["position"],_=a({__name:"repulsionEffectSence",setup(a){const w=n(null),T=n(null),j=r({rows:6,cols:14,gutter:2.2}),x=l((()=>({x:(j.cols-1)*j.gutter/2,z:(j.rows-1)*j.gutter/2}))),{seekAll:_}=i();u(T,(()=>{w.value=_(T.value,"type","Mesh"),w.value.forEach((e=>{e.initialRotation={x:"torus"===e.name?o(90):e.rotation.x,y:e.rotation.y,z:"cone"===e.name||"cylinder"===e.name?o(-180):e.rotation.z},e.rotation.x=e.initialRotation.x,e.rotation.y=e.initialRotation.y,e.rotation.z=e.initialRotation.z}))}));const P=({point:s})=>{if(!w.value)return;const{x:t,y:i,z:a}=s;w.value.forEach((s=>{const i=k(t,a,s.position.x,s.position.z),n=R(i,7,0,0,6);e.to(s.position,{y:n<1?1:n,duration:.3});const r=s.position.y/1.2,l=r<1?1:r;e.to(s.scale,{ease:"expo.out",x:l,y:l,z:l,duration:.3}),e.to(s.rotation,{duration:.7,ease:"expo.out",x:R(s.position.y,-1,1,o(270),s.initialRotation.x),z:R(s.position.y,-1,1,o(-90),s.initialRotation.z),y:R(s.position.y,-1,1,o(45),s.initialRotation.y)})}))},k=(o,e,s,t)=>Math.sqrt((o-s)**2+(e-t)**2),R=(o,e,s,t,i)=>(o-e)/(s-e)*(i-t)+t,L=(o,e)=>{const s=Math.floor(3*Math.random());return 0===s?"torus":1===s?"cone":"cylinder"},G=(o,e)=>[(o-1)*j.gutter-x.value.x,0,(e-1)*j.gutter-x.value.z];return(o,e)=>(c(),p(y,null,[h(m(s),{"receive-shadow":"",args:[100,100],"rotation-x":-Math.PI/2,position:[0,0,0],onPointerMove:P},{default:d((()=>e[0]||(e[0]=[f("TresShadowMaterial",{transparent:"",opacity:.3},null,-1)]))),_:1},8,["rotation-x"]),f("TresGroup",{ref_key:"shapesGroupRef",ref:T,name:"shapes"},[(c(!0),p(y,null,g(j.rows,(o=>(c(),p("TresGroup",{key:`row-${o}`},[(c(!0),p(y,null,g(j.cols,(s=>(c(),p("TresGroup",{key:`col-${s}-${o}`},["torus"===L()?(c(),p("TresMesh",{key:0,name:"torus","cast-shadow":"","receive-shadow":"",position:G(s,o)},e[1]||(e[1]=[f("TresTorusGeometry",{args:[.25,.08,30,200]},null,-1),f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)]),8,z)):"cone"===L()?(c(),v(m(t),{key:1,name:"cone",args:[.3,.5,32],"cast-shadow":"","receive-shadow":"",position:G(s,o)},{default:d((()=>e[2]||(e[2]=[f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)]))),_:2},1032,["position"])):(c(),p("TresMesh",{key:2,name:"cylinder","cast-shadow":"","receive-shadow":"",position:G(s,o)},e[3]||(e[3]=[f("TresCylinderGeometry",{args:[.3,.3,.2,64]},null,-1),f("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)]),8,M))])))),128))])))),128))],512)],64))}}),P=x(a({__name:"repulsionEffect",setup(o){const e={alpha:!0,shadows:!0,powerPreference:"high-performance",windowSize:!0};return(o,s)=>{const t=w("TresCanvas");return c(),p(y,null,[s[8]||(s[8]=f("div",{class:"repulsion-effect__content"},[f("h2",null,"ICE.GL"),f("h3",null,"图形学社区")],-1)),s[9]||(s[9]=f("div",{class:"repulsion-effect__bg"},null,-1)),h(t,T(j(e)),{default:d((()=>[s[0]||(s[0]=f("TresPerspectiveCamera",{position:[0,65,0],"rotation-x":-1.57,fov:20},null,-1)),s[1]||(s[1]=f("TresAmbientLight",{color:"#ffffff"},null,-1)),s[2]||(s[2]=f("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,-20]},null,-1)),s[3]||(s[3]=f("TresPointLight",{color:"#79573e",intensity:5,decay:0,position:[35,5,0]},null,-1)),s[4]||(s[4]=f("TresPointLight",{color:"#c27439",intensity:5,decay:0,position:[-35,5,0]},null,-1)),s[5]||(s[5]=f("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,20]},null,-1)),s[6]||(s[6]=f("TresSpotLight",{color:"#7bccd7",decay:0,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048,position:[0,25,0]},null,-1)),s[7]||(s[7]=f("TresRectAreaLight",{color:"#341212",decay:0,width:1e3,height:1e3,position:[5,20,50],"look-at":[0,0,0]},null,-1)),h(_)])),_:1},16)],64)}}}),[["__scopeId","data-v-50399b04"]]);export{P as default};

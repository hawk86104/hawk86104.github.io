import{m as t,e as n,l as e,o as r,J as o}from"./@tresjs.W3PFJhMo1741658416045.js";import{_ as s}from"./index.2D1owXtS1741658416045.js";import{a8 as i,_ as c,c as u,b as a,B as l,cA as p}from"./three.FyUEtfsR1741658416045.js";import{P as f}from"./tweakpane.yDiyAAkA1741658416045.js";import{I as g,C as d,N as h,c as m,d as y,a as w}from"./three-mesh-bvh.FHydkdim1741658416045.js";import{d as b,a3 as j,b as I,a2 as v,o as _,H as x,N as M,u as A,F as T,r as z,e as k,j as C,g as B,m as R,f as S,al as Z}from"./@vue.NRI7TcgI1741658416045.js";import"./postprocessing.llR5x4wQ1741658416045.js";import"./@vueuse.5uFvLf9q1741658416045.js";import"./index.TknaGYUD1741658416045.js";import"./@fesjs.hAnhKQG-1741658416045.js";import"./vue-router.qhodDV9M1741658416045.js";import"./lodash-es.pklfUAS51741658416045.js";import"./@qlin.yHhFDldE1741658416045.js";import"./pinia.Iw2DqQac1741658416045.js";import"./@floating-ui.BPbuo5Gx1741658416045.js";import"./@juggle.7yjBMqoW1741658416045.js";import"./chalk.8eJqaBDu1741658416045.js";/* empty css                                 */import"./iconify-icon.BVOVpC8G1741658416045.js";import"./@iconify.dt4P0LGS1741658416045.js";import"./dompurify.rQUea5mq1741658416045.js";import"./utils.c7sDn7pv1741658416045.js";import"./default.vue_vue_type_script_setup_true_lang.otKBfKb41741658416045.js";import"./three-mesh-ui.module.mkkGrDc21741658416045.js";function E(t,n){const e=H();return(E=function(t,n){return e[t-=362]})(t,n)}!function(t,n){const e=E,r=H();for(;;)try{if(171318===parseInt(e(386))/1+-parseInt(e(411))/2*(parseInt(e(371))/3)+-parseInt(e(387))/4*(-parseInt(e(367))/5)+-parseInt(e(404))/6+parseInt(e(376))/7*(-parseInt(e(413))/8)+parseInt(e(370))/9+parseInt(e(372))/10*(parseInt(e(401))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const F=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[E(412)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){F(this,(function(){const t=E,n=new RegExp(t(378)),e=new RegExp(t(382),"i"),r=q(t(379));n[t(368)](r+t(369))&&e[t(368)](r+"input")?q():r("0")}))()}();const O=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[E(412)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();O(void 0,(function(){const t=E,n=function(){const t=E;let n;try{n=Function(t(407)+t(385)+");")()}catch(e){n=window}return n}(),e=n[t(406)]=n[t(406)]||{},r=["log",t(395),"info",t(381),t(362),t(374),t(377)];for(let o=0;o<r[t(384)];o++){const n=O[t(383)][t(391)][t(365)](O),s=r[o],i=e[s]||n;n[t(398)]=O[t(365)](O),n[t(414)]=i.toString[t(365)](i),e[s]=n}}))();function q(t){function n(t){const e=E;if(typeof t===e(390))return function(t){}[e(383)](e(380))[e(412)](e(399));1!==(""+t/t)[e(384)]||t%20==0?function(){return!0}[e(383)](e(363)+e(396))[e(393)](e(409)):function(){return!1}[e(383)]("debu"+e(396))[e(412)](e(373)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function H(){const t=["error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","length",'{}.constructor("return this")( )',"310769MqQPXK","12qcqKvv","enabled","setFromCamera","string","prototype","intersectObject","call","button","warn","gger","clientX","__proto__","counter","value","11bxcIhl","clientY","pointermove","22152stHvdi","touch","console","return (function() ","pointerup","action","firstHitOnly","872dCrewZ","apply","16INngIS","toString","pointerType","exception","debu","addEventListener","bind","innerWidth","234485bjvGbu","test","chain","1025883gATJsH","2067oqDRyK","1139570grNQKO","stateObject","table","pointerdown","713965XwYOzZ","trace","function *\\( *\\)","init","while (true) {}"];return(H=function(){return t})()}const X=L;!function(t,n){const e=L,r=D();for(;;)try{if(713619===parseInt(e(185))/1*(parseInt(e(204))/2)+-parseInt(e(237))/3+-parseInt(e(241))/4*(-parseInt(e(215))/5)+parseInt(e(176))/6*(-parseInt(e(177))/7)+-parseInt(e(172))/8*(-parseInt(e(192))/9)+-parseInt(e(240))/10*(parseInt(e(175))/11)+-parseInt(e(193))/12*(-parseInt(e(252))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[L(209)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Y(this,(function(){const t=L,n=new RegExp(t(190)),e=new RegExp(t(227),"i"),r=N(t(214));n[t(253)](r+t(216))&&e[t(253)](r+t(231))?N():r("0")}))()}();const K=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[L(209)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function L(t,n){const e=D();return(L=function(t,n){return e[t-=172]})(t,n)}K(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(220)+t(191)+");")()}catch(e){n=window}return n}(),e=n[t(245)]=n[t(245)]||{},r=["log",t(250),t(195),"error",t(232),t(211),"trace"];for(let o=0;o<r[t(255)];o++){const n=K[t(251)][t(199)][t(244)](K),s=r[o],i=e[s]||n;n[t(181)]=K.bind(K),n[t(243)]=i[t(243)][t(244)](i),e[s]=n}}))();const U=[X(264),X(184)],$=[X(264)];function D(){const t=["355bAvsiX","chain","matrixWorld","setZ","invert","return (function() ","controls","stateObject","BufferGeometry","scale","raycast","applyMatrix4","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","intersectsBox","boundsTree","#023249","input","exception","center","MeshStandardMaterial","TresMesh","debu","3465642sxiciv","firstHitOnly","instance","231970oLxGiO","64956TYGrnI","TresSphereGeometry","toString","bind","console","set","color","DynamicDrawUsage","brushMesh","warn","constructor","169ZElFMx","test","enabled","length","counter","Matrix4","containsPoint","BufferAttribute","attributes","value","setScalar","setAttribute","geometry","16608LCZyMX","Sphere","computeBoundsTree","297kwoEDK","119058MMCqCM","441IkCRqy","setX","setFromCamera","visible","__proto__","point","Vector2","material","919343FypYdM","Mesh","TresMeshStandardMaterial","disposeBoundsTree","点击按钮","function *\\( *\\)",'{}.constructor("return this")( )',"369RCuMqX","1465692eKsybV","setY","info","getZ","getY","position","prototype","shapecast","gger","click","getX","2qxaFIu","count","radius","call","copy","apply","setUsage","table","normal","push","init"];return(D=function(){return t})()}const G=b({__name:"model",props:{controls:{}},async setup(r){const o=X;let s,b;const z=r;(()=>{const t=L;c[t(223)].prototype[t(174)]=m,l.prototype[t(188)]=y,c[t(186)].prototype[t(225)]=w})();const k=([s,b]=j((()=>e(p,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,b(),s),C=new(c[o(234)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),B=new Uint8Array(3*k[o(260)][o(198)][o(205)]);B.fill(255);const R=new u(B,3,!0);R[o(210)](c[o(248)]),k[o(263)](o(247),R);const S=I(null),Z=I(null),F=I(!1),O=I(-1),q=I(.2),H=new(c[o(183)]),{camera:Y,raycaster:K}=t(),D=15/255,G=78/255,N=85/255;let P=null;v((()=>{const t=o;S.value&&(console.log("targetMesh.value init",S[t(261)]),S.value[t(264)].computeBoundsTree(),P=k[t(229)],((t,n,e,r,o,s)=>{const c=E;window[c(364)](c(403),(e=>{const r=c;t.x=e[r(397)]/window[r(366)]*2-1,t.y=-e[r(402)]/window.innerHeight*2+1,n[r(400)]=!0})),window[c(364)](c(375),(u=>{const a=c;t.x=u.clientX/window[a(366)]*2-1,t.y=-u[a(402)]/window.innerHeight*2+1,r[a(400)]=u[a(394)];const l=new i;l[a(389)](t,e[a(400)]),l[a(410)]=!0;const p=l[a(392)](o[a(400)],!0);n[a(400)]=!0,s[a(388)]=0===p.length}),!0),window.addEventListener(c(408),(t=>{const e=c;r[e(400)]=-1,t[e(415)]===e(405)&&(n[e(400)]=!1)}),!0)})(H,F,Y,O,S,z[t(221)][t(239)]))}));const{onLoop:J}=n();J((()=>{const t=o,n=k.index;if(Z[t(261)])if(z[t(221)][t(239)].active||!F[t(261)])Z.value[t(180)]=!1;else{Z.value[t(224)][t(262)](q[t(261)]),K.value[t(179)](H,Y[t(261)]),K[t(261)][t(238)]=!0;const e=K[t(261)].intersectObject(S[t(261)],!0);if(e[t(255)]){Z.value[t(198)][t(208)](e[0][t(182)]),z[t(221)][t(239)][t(254)]=!1,Z[t(261)].visible=!0;const r=new(c[t(257)]);r.copy(S[t(261)][t(217)])[t(219)]();const o=new(c[t(173)]);o[t(233)][t(208)](Z[t(261)][t(198)])[t(226)](r),o[t(206)]=100*q[t(261)];const s=[],i=new a;if(null==P||P[t(200)]({intersectsBounds:n=>{const e=t,r=o[e(228)](n),{min:s,max:c}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(i[e(246)](0===t?s.x:c.x,0===n?s.y:c.y,0===r?s.z:c.z),!o[e(258)](i))return g;return d}return r?g:h},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n.intersectsSphere(o)){const t=3*e;s[i(213)](t,t+1,t+2)}return!1}}),0===O[t(261)]||2===O[t(261)]){let e=1,r=1,o=1;0===O.value&&(e=D,r=G,o=N);for(let i=0,c=s.length;i<c;i++){const c=n[t(203)](s[i]);R[t(178)](c,e),R[t(194)](c,r),R[t(218)](c,o)}R.needsUpdate=!0}}else Z.value.visible=!1,z[t(221)][t(239)][t(254)]=!0}}));const Q=(new f).addButton({title:o(189),label:"生成模型"}),V=new(c[o(223)]);return Q.on(o(202),(()=>{const t=o,n=[],e=[];for(let o=0;o<R.count;o++)R[t(203)](o)===D&&R[t(197)](o)===G&&R[t(196)](o)===N&&(n[t(213)](k[t(260)][t(198)][t(203)](o),k.attributes[t(198)][t(197)](o),k.attributes.position[t(196)](o)),e[t(213)](k[t(260)][t(212)][t(203)](o),k[t(260)][t(212)][t(197)](o),k[t(260)][t(212)].getZ(o)));const r=new Float32Array(n);V[t(263)](t(198),new(c[t(259)])(r,3)),V[t(263)](t(212),new(c[t(259)])(r,3))})),(t,n)=>{const e=o;return _(),x(T,null,[M(e(235),{ref_key:"targetMesh",ref:S,geometry:A(k),scale:.005,material:A(C)},null,8,U),M(e(235),{ref_key:e(249),ref:Z,visible:!1},n[0]||(n[0]=[M(e(242),{args:[1,40,40]},null,-1),M("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),M(e(235),{geometry:A(V),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[M(e(187),{color:e(230),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,$)],64)}}});function N(t){function n(t){const e=L;if("string"==typeof t)return function(t){}[e(251)]("while (true) {}").apply(e(256));1!==(""+t/t).length||t%20==0?function(){return!0}[e(251)](e(236)+e(201))[e(207)]("action"):function(){return!1}[e(251)](e(236)+e(201))[e(209)](e(222)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function P(t,n){const e=W();return(P=function(t,n){return e[t-=153]})(t,n)}const J=P;!function(t,n){const e=P,r=W();for(;;)try{if(976431===parseInt(e(179))/1+-parseInt(e(188))/2+parseInt(e(153))/3+-parseInt(e(180))/4*(-parseInt(e(181))/5)+parseInt(e(197))/6+parseInt(e(171))/7*(parseInt(e(178))/8)+-parseInt(e(196))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[P(191)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Q(this,(function(){const t=P,n=new RegExp(t(170)),e=new RegExp(t(168),"i"),r=nt(t(192));n[t(193)](r+t(190))&&e.test(r+t(187))?nt():r("0")}))()}();const V=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[P(191)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function W(){const t=["bind","__proto__","prototype","gger","toString","info","controls","TresAmbientLight","length","return (function() ","call","neg-y.jpg","constructor","collectTriangles","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"function *\\( *\\)","2672593lVpoOc","stateObject","neg-z.jpg","controlsRef","TresCanvas","action","debu","8wwtWIk","755930zaNAma","7411940qQcUFY","5BpQouE","string","console","trace","pos-y.jpg","table","input","2428316ULAzEY","value","chain","apply","init","test","#999999","TresPerspectiveCamera","27233775gPtzas","8537592HRlBhA","2408754jnHezB"];return(W=function(){return t})()}V(void 0,(function(){const t=P;let n;try{n=Function(t(163)+t(169)+");")()}catch(o){n=window}const e=n[t(183)]=n[t(183)]||{},r=["log","warn",t(159),"error","exception",t(186),t(184)];for(let s=0;s<r[t(162)];s++){const n=V[t(166)][t(156)].bind(V),o=r[s],i=e[o]||n;n[t(155)]=V[t(154)](V),n.toString=i[t(158)].bind(i),e[o]=n}}))();const tt=b({__name:J(167),setup(t){const n=J,e=z({clearColor:n(194),antialias:!0}),i=z({autoRotate:!1}),c=I(null);return(t,u)=>{const a=n,l=k(a(175));return _(),x(T,null,[C(A(s)),C(l,R(e,{"window-size":""}),{default:B((()=>[u[0]||(u[0]=M(a(195),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),C(A(r),R({ref_key:a(174),ref:c},i),null,16),u[1]||(u[1]=M(a(161),{intensity:1},null,-1)),(_(),S(Z,null,{default:B((()=>[C(G,{controls:c[a(189)]},null,8,[a(160)])])),_:1})),(_(),S(Z,null,{default:B((()=>[C(A(o),{background:!1,files:["pos-x.jpg","neg-x.jpg",a(185),a(165),"pos-z.jpg",a(173)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)],64)}}});function nt(t){function n(t){const e=P;if(typeof t===e(182))return function(t){}[e(166)]("while (true) {}")[e(191)]("counter");1!==(""+t/t)[e(162)]||t%20==0?function(){return!0}[e(166)]("debu"+e(157))[e(164)](e(176)):function(){return!1}[e(166)](e(177)+"gger")[e(191)](e(172)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{tt as default};

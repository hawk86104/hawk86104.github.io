import{b$ as t,a3 as n,C as e,k as r}from"./three.aWgA1gea1733214749102.js";import{b as o}from"./@tresjs.lftldzUe1733214749102.js";import{R as c}from"./all.three.xz7w2iRS1733214749102.js";import{d as a,b as i,a6 as u,a3 as s,o as l,D as f,J as p,m,u as v}from"./@vue.-THQH3GC1733214749102.js";function d(){const t=["1580664bXjdlE","init","warn","replace","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","#include <emissivemap_fragment>","22675yGKhaY","153566MvYdiX","constructor","1pkMzxh","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","2295LjzCbE","toString","__proto__","11350bHZAff","304wHehjT","log","function *\\( *\\)","length","void main() {","test",'{}.constructor("return this")( )',"console","debu","return (function() ","stateObject","apply","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","1705978TXIoLl","action","while (true) {}","exception","error","1632378tvqmGd","10840874ZOHuqE","fragmentShader","bind","info","vertexShader","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","gger","counter","#include <project_vertex>","184pruCeE","chain"];return(d=function(){return t})()}!function(t,n){const e=g,r=d();for(;;)try{if(501232===-parseInt(e(157))/1*(-parseInt(e(176))/2)+-parseInt(e(181))/3+parseInt(e(191))/4*(-parseInt(e(199))/5)+parseInt(e(193))/6+parseInt(e(200))/7*(parseInt(e(163))/8)+-parseInt(e(159))/9*(-parseInt(e(162))/10)+-parseInt(e(182))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(174)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(t,n){const e=d();return(g=function(t,n){return e[t-=156]})(t,n)}!function(){h(this,(function(){const t=g,n=new RegExp(t(165)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(194));n[t(168)](r+t(192))&&e.test(r+"input")?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(174)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(172)+t(169)+");")()}catch(e){n=window}return n}(),e=n[t(170)]=n.console||{},r=[t(164),t(195),t(185),t(180),t(179),"table","trace"];for(let o=0;o<r[t(166)];o++){const n=x[t(156)].prototype.bind(x),c=r[o],a=e[c]||n;n[t(161)]=x[t(184)](x),n[t(160)]=a.toString[t(184)](a),e[c]=n}}))();function y(t){function n(t){const e=g;if("string"==typeof t)return function(t){}[e(156)](e(178))[e(174)](e(189));1!==(""+t/t)[e(166)]||t%20==0?function(){return!0}[e(156)](e(171)+e(188)).call(e(177)):function(){return!1}[e(156)](e(171)+e(188))[e(174)](e(173)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const b=M;!function(t,n){const e=M,r=S();for(;;)try{if(669493===-parseInt(e(335))/1*(parseInt(e(293))/2)+-parseInt(e(306))/3+-parseInt(e(311))/4*(parseInt(e(313))/5)+-parseInt(e(302))/6*(parseInt(e(301))/7)+-parseInt(e(319))/8*(-parseInt(e(315))/9)+parseInt(e(333))/10+parseInt(e(321))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=M,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(285),"i"),r=z("init");n[t(307)](r+"chain")&&e[t(307)](r+t(286))?z():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(300)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();_(void 0,(function(){const t=M,n=function(){const t=M;let n;try{n=Function(t(296)+t(322)+");")()}catch(e){n=window}return n}(),e=n[t(278)]=n[t(278)]||{},r=["log",t(284),t(276),t(312),t(291),t(314),"trace"];for(let o=0;o<r.length;o++){const n=_[t(330)].prototype[t(323)](_),c=r[o],a=e[c]||n;n[t(334)]=_[t(323)](_),n[t(308)]=a[t(308)][t(323)](a),e[c]=n}}))();const I=["rotation-x"],C=["object","visible"];function M(t,n){const e=S();return(M=function(t,n){return e[t-=273]})(t,n)}const j=a({__name:b(283),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:b(289)}},async setup(a){const d=b;let h,x;const y=a,w=new t(9.5,10),_=i(),M=i(),j=i(),S=new c,z={mirror:{value:y[d(279)]},mixStrength:{value:y[d(275)]}},E=([h,x]=u((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var T=0;T<3;T++)E[T].wrapS=n,E[T][d(290)]=n,E[T][d(324)][d(292)](16,16);const R={color:new e(d(320)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},k=t=>{const n=d;t[n(294)][n(281)]=S[n(273)],t[n(294)][n(297)]=S[n(280)],t[n(294)]=Object[n(326)](t[n(294)],z),(t=>{const n=g;t[n(186)]=t[n(186)][n(196)]("void main() {",n(158)),t[n(186)]=t[n(186)][n(196)](n(190),n(197))})(t),(t=>{const n=g;t[n(183)]=t.fragmentShader[n(196)](n(167),n(175)),t[n(183)]=t[n(183)][n(196)](n(198),n(187))})(t)};return s((()=>{const t=d;_[t(287)]&&(_.value[t(282)][t(288)]=_[t(287)][t(282)].uv),j[t(287)]&&(j[t(287)][t(325)][t(316)]=1,j.value[t(318)]=k),M.value&&(M.value.add(S),M[t(287)].onBeforeRender=(n,e,r)=>{S[t(309)](n,e,r)}),y[t(305)]&&j.value&&(j.value[t(305)]=new e(y[t(305)]))})),(t,n)=>{const e=d;return l(),f(e(331),null,[p(e(295),{ref_key:"tmRef",ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(329),{ref_key:"tpgRef",ref:_,args:[10,10]},null,512),p(e(332),m({ref_key:"tmsmRef",ref:j},R),null,16)],8,I),p(e(303),{object:v(w),visible:t[e(298)]},null,8,C)])}}});function S(){const t=["console","mirror","textureMatrixUniform","reflectMap","attributes","reflectorDiffuse","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","value","uv1","#ffffff","wrapT","exception","set","2pPABoT","uniforms","TresMesh","return (function() ","textureMatrix","showGridHelper","length","apply","2387xiKDnQ","19086Yrzxyr","primitive","gger","color","1516254DwSJxK","test","toString","update","debu","622264shrZCF","error","35wQgYLr","table","5206527QulWYR","channel","while (true) {}","onBeforeCompile","16LwhlmR","#444","28649995qLybNT",'{}.constructor("return this")( )',"bind","repeat","aoMap","assign","string","counter","TresPlaneGeometry","constructor","TresGroup","TresMeshStandardMaterial","3424570mqcVjr","__proto__","755414uuKCbz","renderTargetUniform","call","mixStrength","info","stateObject"];return(S=function(){return t})()}function z(t){function n(t){const e=M;if(typeof t===e(327))return function(t){}.constructor(e(317)).apply(e(328));1!==(""+t/t)[e(299)]||t%20==0?function(){return!0}[e(330)](e(310)+e(304))[e(274)]("action"):function(){return!1}.constructor("debu"+e(304))[e(300)](e(277)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

import{i as t}from"./ice-utils.q_1TeafC1735031078130.js";import{_ as n,m as e}from"./gl-matrix.oVMHBNGj1735031078130.js";import{P as o}from"./tweakpane.yHWGBmom1735031078130.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.-THQH3GC1735031078130.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=x;!function(t,n){const e=x,o=p();for(;;)try{if(532261===parseInt(e(342))/1*(parseInt(e(323))/2)+-parseInt(e(415))/3*(parseInt(e(355))/4)+parseInt(e(337))/5+-parseInt(e(368))/6*(-parseInt(e(345))/7)+-parseInt(e(392))/8+parseInt(e(360))/9+-parseInt(e(413))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function x(t,n){const e=p();return(x=function(t,n){return e[t-=317]})(t,n)}!function(){d(this,(function(){const t=x,n=new RegExp(t(335)),e=new RegExp(t(350),"i"),o=A("init");n[t(348)](o+t(380))&&e.test(o+t(381))?A():o("0")}))()}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(351)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function p(){const t=["warn","none","enableVertexAttribArray","17126630ECqEuD","lookAt","24CiXmLk","call","getUniformLocation","bufferData","ONE_MINUS_SRC_ALPHA","exception","addBlade","logo-texture","change","79204LpwMwn","prototype","src","stateObject","inline","counter","TEXTURE_MAG_FILTER","addBinding","vertexAttribPointer","console","constructor","mat4","function *\\( *\\)","gger","4899825WQCtqc","COLOR_BUFFER_BIT","enable","while (true) {}","mixParam","26lMMNDi","ARRAY_BUFFER","FRAMEBUFFER","2006333SyRgko","ELEMENT_ARRAY_BUFFER","debu","test","height","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","translate","uniform1f","blendFunc","312092cByhqK","uniformMatrix4fv","是否后处理","bindFramebuffer","BYTES_PER_ELEMENT","7623360pubpeB","table","offset_left_top","error","FLOAT","#canvaswebgl","CLAMP_TO_EDGE","action","18Jwxrjy","img","value","return (function() ","offset_left_bottom","createFramebuffer","canvaswebgl","RGBA","length","STATIC_DRAW","clear","TRIANGLES","chain","input","__proto__","useProgram","webgl","scale","UNSIGNED_BYTE","clearColor","NEAREST","drawElements","offset_right_top","TEXTURE_2D","6779248DoHmJI","info","texParameteri","string","create","hidden","ortho","bindTexture","offset_right_bottom","toString","texImage2D","getElementById","webglPostProcessing","BLEND","bind","bindBuffer","querySelector","TEXTURE_WRAP_T"];return(p=function(){return t})()}E(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(371)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(332)]=n.console||{},o=["log",t(410),t(393),t(363),t(319),t(361),"trace"];for(let r=0;r<o[t(376)];r++){const n=E[t(333)][t(324)][t(406)](E),i=o[r],a=e[i]||n;n[t(382)]=E[t(406)](E),n[t(401)]=a[t(401)][t(406)](a),e[i]=n}}))();const g={id:_(374)},T=[_(325)],R=r({__name:_(404),setup(r){const d=_;let x,E,p,R,A,b,y,v,h,w,F,P,C;const B=1,D=.71,U=.76,I=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});I[d(320)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(d(322),(t=>{const n=d;j(),E[n(353)](P,t[n(370)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);I.addBinding(L,"hidden",{label:d(357)}),I[d(330)](L,d(390),{picker:d(327),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(t=>{const n=d;S[0]=L.offset_right_top.x,S[1]=L[n(390)].y,j()})),I.addBinding(L,d(400),{picker:d(327),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(322),(t=>{const n=d;S[5]=L[n(400)].x,S[6]=L[n(400)].y,j()})),I[d(330)](L,d(372),{picker:d(327),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(322),(t=>{const n=d;S[10]=L.offset_left_bottom.x,S[11]=L[n(372)].y,j()})),I[d(330)](L,d(362),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(322),(t=>{const n=d;S[15]=L.offset_left_top.x,S[16]=L[n(362)].y,j()})),a((()=>{M()}));const M=function(){const n=d;x=document[n(408)](n(365)),x.width=window.innerWidth,x[n(349)]=window.innerHeight,E=x.getContext(n(384)),E&&(function(){const n=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=Y(e,o),p=t(E,l,m),h=E.getUniformLocation(p,"uProjection"),w=E.getUniformLocation(p,"uView"),F=E[n(417)](p,"uModel"),C=k(document[n(403)](n(321)))}(),j(),E[n(339)](E[n(405)]),E[n(354)](E.SRC_ALPHA,E[n(318)]),N())};function N(){const t=d;E[t(358)](E[t(344)],y),E.clearColor(B,D,U,1),E[t(378)](E[t(338)]),function(){const t=d;E.useProgram(p),E[t(407)](E.ARRAY_BUFFER,R);const e=n[t(334)].create();n[t(334)][t(398)](e,0,x.width,x[t(349)],0,.1,100),E[t(356)](h,!1,e);const o=n[t(334)][t(396)]();n[t(334)][t(414)](o,[0,0,1],[0,0,0],[0,1,0]),E[t(356)](w,!1,o),X(C,600,600),X(C,400,400)}(),E.bindFramebuffer(E[t(344)],null),L[t(397)]&&(E[t(378)](E[t(338)]),E[t(387)](0,0,1,1),E[t(407)](E[t(343)],A),E[t(383)](b),E[t(399)](E.TEXTURE_2D,v)),E[t(389)](E[t(379)],6,E[t(386)],0),requestAnimationFrame(N)}function X(t,o,r){const i=d;let a=n[i(334)].create();e[i(352)](a,a,[o,r,0]),n[i(334)][i(385)](a,a,[250,250,0]),E[i(356)](F,!1,a),E[i(399)](E[i(391)],t),E[i(389)](E[i(379)],6,E.UNSIGNED_BYTE,0)}function j(){const n=d,e=new Uint8Array([0,1,2,0,2,3]);A=Y(S,e),b=t(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=E[n(417)](b,n(341)),E[n(417)](b,"color"),function(){const t=d;v=k(x),y=E[t(373)](),E[t(358)](E[t(344)],y),E.framebufferTexture2D(E[t(344)],E.COLOR_ATTACHMENT0,E.TEXTURE_2D,v,0),E[t(358)](E[t(344)],null)}()}function k(t){const n=d,e=E.createTexture();return E.bindTexture(E[n(391)],e),t instanceof HTMLImageElement?E[n(402)](E.TEXTURE_2D,0,E[n(375)],E[n(375)],E[n(386)],t):E.texImage2D(E[n(391)],0,E[n(375)],t.width,t[n(349)],0,E[n(375)],E[n(386)],null),E[n(394)](E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E[n(388)]),E.texParameteri(E.TEXTURE_2D,E[n(329)],E.NEAREST),E[n(394)](E[n(391)],E.TEXTURE_WRAP_S,E[n(366)]),E.texParameteri(E[n(391)],E[n(409)],E[n(366)]),e}function Y(t,n){const e=d,o=E.createBuffer();E[e(407)](E[e(343)],o),E.bufferData(E.ARRAY_BUFFER,t,E[e(377)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(359)];E[e(331)](0,3,E[e(364)],!1,r,0),E[e(412)](0),E.vertexAttribPointer(1,2,E[e(364)],!1,r,3*Float32Array[e(359)]),E.enableVertexAttribArray(1);const i=E.createBuffer();return E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,i),E[e(317)](E[e(346)],n,E[e(377)]),E[e(407)](E[e(343)],null),o}return(t,n)=>{const e=d;return c(),s("canvas",g,[u(e(369),{id:e(321),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(411)}},null,8,T)])}}});function A(t){function n(t){const e=x;if(typeof t===e(395))return function(t){}[e(333)](e(340))[e(351)](e(328));1!==(""+t/t)[e(376)]||t%20==0?function(){return!0}[e(333)](e(347)+e(336))[e(416)](e(367)):function(){return!1}[e(333)](e(347)+"gger")[e(351)](e(326)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{R as default};

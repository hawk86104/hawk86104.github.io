var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as I,n as b,o as S,c3 as w,c4 as M,K as A,f as R,V as E,g as T,_ as D,m as z,bm as P,k as O,bz as C,d as F,aj as B,B as k,a as j,aP as U,e as N,M as L,at as H,a9 as G,U as Z,h as W}from"./three.MbBECAu81726740218347.js";import{p as V,N as $,U as q}from"./@tresjs.C5O8roW51726740218347.js";import{R as Y}from"./three-stdlib.vORGfiSP1726740218347.js";import{x as K,b as J,w as X,a as Q,u as nn,d as tn,V as en,a4 as rn,a0 as on,o as an,E as cn,H as sn,J as un,a7 as ln,a3 as fn,q as pn,f as dn,L as hn,a8 as vn,r as mn,N as gn,Y as _n,t as yn,F as xn,a6 as In,m as bn}from"./@vue.JNsx1iN61726740218347.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.WMHo6lO61726740218347.js";import{o as An}from"./object-hash.rW_XvzOw1726740218347.js";var Rn=zn;!function(n,t){for(var e=zn,r=Dn();;)try{if(656465===-parseInt(e(191))/1*(-parseInt(e(182))/2)+-parseInt(e(157))/3*(parseInt(e(166))/4)+-parseInt(e(188))/5*(parseInt(e(153))/6)+-parseInt(e(172))/7*(parseInt(e(168))/8)+-parseInt(e(158))/9*(-parseInt(e(189))/10)+-parseInt(e(194))/11*(parseInt(e(195))/12)+parseInt(e(186))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var En=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){En(this,(function(){var n=zn,t=new RegExp(n(152)),e=new RegExp(n(183),"i"),r=Cn(n(161));t.test(r+n(179))&&e[n(196)](r+n(181))?Cn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(){var n=["1AjqMeZ","while (true) {}","add","33836tmgZnc","4308LrNfBr","test","apply","bind","function *\\( *\\)","24SSgfSN",'{}.constructor("return this")( )',"counter","__proto__","3YeeILh","285903MqRgza","console","exception","init","return (function() ","remove","debu","dispose","1988832jpBOVg","toString","8QrEbOT","info","gger","destructor","7975268pHsSZM","stateObject","material","geometry","virtualScene","table","length","chain","constructor","input","1113396lvgkHv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","prototype","23199345LJhMjM","warn","30075BUhlcZ","340HHeIwA","map"];return(Dn=function(){return n})()}function zn(n,t){var e=Dn();return(zn=function(n,t){return e[n-=152]})(n,t)}Tn(void 0,(function(){for(var n=zn,t=function(){var n,t=zn;try{n=Function(t(162)+t(154)+");")()}catch(e){n=window}return n}(),e=t[n(159)]=t[n(159)]||{},r=["log",n(187),n(169),"error",n(160),n(177),n(184)],o=0;o<r[n(178)];o++){var i=Tn[n(180)][n(185)][n(198)](Tn),a=r[o],c=e[a]||i;i[n(156)]=Tn.bind(Tn),i[n(167)]=c[n(167)].bind(c),e[a]=i}}))();class Pn extends s{constructor(){var n=zn;super(),this.virtualScene=null,this[n(176)]=new u}[Rn(193)](...n){return this[Rn(176)].add(...n),this}[Rn(171)](){this.virtualScene.traverse((n=>{var t=zn;n instanceof l&&(n[t(175)][t(165)](),n[t(174)][t(165)](),n[t(174)][t(190)]&&n.material.map[t(165)](),this[t(176)][t(163)](n))})),this.virtualScene=null}}const On=Pn;function Cn(n){function t(n){var e=zn;if("string"==typeof n)return function(n){}[e(180)](e(192))[e(197)](e(155));1!==(""+n/n)[e(178)]||n%20==0?function(){return!0}[e(180)](e(164)+"gger").call("action"):function(){return!1}[e(180)](e(164)+e(170))[e(197)](e(173)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Nn;!function(n,t){const e=Nn,r=Ln();for(;;)try{if(355863===-parseInt(e(427))/1*(parseInt(e(420))/2)+parseInt(e(407))/3*(parseInt(e(408))/4)+-parseInt(e(412))/5+-parseInt(e(417))/6*(-parseInt(e(444))/7)+-parseInt(e(439))/8*(parseInt(e(433))/9)+parseInt(e(423))/10+parseInt(e(421))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(403)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bn(this,(function(){const n=Nn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Un(n(446));t[n(424)](r+n(422))&&e[n(424)](r+n(404))?Un():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(403)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=Nn,t=function(){const n=Nn;let t;try{t=Function("return (function() "+n(410)+");")()}catch(e){t=window}return t}(),e=t[n(430)]=t[n(430)]||{},r=[n(426),n(441),n(428),n(411),"exception",n(409),"trace"];for(let o=0;o<r.length;o++){const t=kn.constructor[n(419)].bind(kn),i=r[o],a=e[i]||t;t.__proto__=kn[n(413)](kn),t.toString=a[n(414)][n(413)](a),e[i]=t}}))();const jn={sunset:Fn(406),studio:Fn(405),city:Fn(440),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Fn(436),forest:Fn(429),snow:Fn(418),dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Fn(445),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Fn(435),shangai:Fn(434)};function Un(n){function t(n){const e=Nn;if("string"==typeof n)return function(n){}[e(437)](e(416))[e(403)](e(438));1!==(""+n/n)[e(425)]||n%20==0?function(){return!0}[e(437)](e(431)+e(432))[e(443)](e(442)):function(){return!1}[e(437)](e(431)+e(432))[e(403)](e(415)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nn(n,t){const e=Ln();return(Nn=function(n,t){return e[n-=403]})(n,t)}function Ln(){const n=["outood/mossy_forest_1k.hdr","console","debu","gger","999dpnQbG","city/shanghai_bund_1k.hdr","city/modern_buildings_2_1k.hdr","outdoor/satara_night_1k.hdr","constructor","counter","3288xpnXpA","city/canary_wharf_1k.hdr","warn","action","call","931dwZvLo","indoor/small_hangar_01_1k.hdr","init","apply","input","studio/poly_haven_studio_1k.hdr","venice/venice_sunset_1k.hdr","197391CkzELz","40CLpLzA","table",'{}.constructor("return this")( )',"error","3382090Kcxrrj","bind","toString","stateObject","while (true) {}","4830ndBiKI","outdoor/snowy_forest_path_01_1k.hdr","prototype","920HdlqOH","2033669DApdYj","chain","4118080ZrRLFH","test","length","log","617VGjzxH","info"];return(Ln=function(){return n})()}const Hn=Vn;!function(n,t){const e=Vn,r=Wn();for(;;)try{if(790497===-parseInt(e(275))/1*(parseInt(e(246))/2)+-parseInt(e(253))/3*(parseInt(e(231))/4)+-parseInt(e(252))/5+parseInt(e(235))/6+parseInt(e(274))/7*(-parseInt(e(243))/8)+-parseInt(e(258))/9*(-parseInt(e(251))/10)+-parseInt(e(268))/11*(-parseInt(e(242))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(228)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=Vn,t=new RegExp(n(270)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qn("init");t[n(239)](r+"chain")&&e[n(239)](r+n(272))?qn():r("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(228)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["bind","Failed to load environment map: ","warn","1046232vrbmQw","toString","stateObject","debu","test","error","keys","84XSVRXm","182440PRLXcz","gger","call","228sDQLuD","trace","length","isArray","constructor","2770RnktLL","5013900sLWywH","15651WCLfWN","table","exception","action","mapping","17874WfSdAN","info","prototype","log","Preset must be one of: ","console","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","string","return (function() ","counter","6447419ABWjQY","backgroundBlurriness","function *\\( *\\)","value","input","environment","371uTOqJn","9011xThvtP","apply","join","background","612CxDtpw"];return(Wn=function(){return n})()}function Vn(n,t){const e=Wn();return(Vn=function(n,t){return e[n-=228]})(n,t)}Zn(void 0,(function(){const n=Vn,t=function(){const n=Vn;let t;try{t=Function(n(266)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(263)]=t[n(263)]||{},r=[n(261),n(234),n(259),n(240),n(255),n(254),n(247)];for(let o=0;o<r[n(248)];o++){const t=Zn[n(250)][n(260)].bind(Zn),i=r[o],a=e[i]||t;t.__proto__=Zn[n(232)](Zn),t[n(236)]=a[n(236)].bind(a),e[i]=t}}))();const $n=Hn(264);function qn(n){function t(n){const e=Vn;if(typeof n===e(265))return function(n){}.constructor("while (true) {}")[e(228)](e(267));1!==(""+n/n)[e(248)]||n%20==0?function(){return!0}[e(250)]("debu"+e(244))[e(245)](e(256)):function(){return!1}.constructor(e(238)+e(244)).apply(e(237)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Jn,r=Xn();for(;;)try{if(242497===parseInt(e(331))/1*(parseInt(e(361))/2)+-parseInt(e(329))/3+-parseInt(e(370))/4+parseInt(e(364))/5*(-parseInt(e(324))/6)+-parseInt(e(366))/7*(-parseInt(e(321))/8)+parseInt(e(335))/9+parseInt(e(341))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(367)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Jn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(318),"i"),r=nt(n(336));t[n(317)](r+"chain")&&e.test(r+n(355))?nt():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(367)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=Xn();return(Jn=function(n,t){return e[n-=316]})(n,t)}function Xn(){const n=["3078693xNdxAf","init","environment","texture","constructor","default","2899910nbqgtF","virtualScene","magFilter","value","action","isArray","bind","console","background","call","dispose","prototype","update","useDefaultScene","input","far",'{}.constructor("return this")( )',"trace","toString","gger","103178JGixNo","type","frames","1618645gZUPpl","near","2569IwLMlJ","apply","envSence","resolution","918728pxZUoo","string","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","TresEnvSence","1352bKEpWh","counter","length","6fqJrMH","symbol","__proto__","destructor","log","313617fwDEyb","table","4CLXDAV","generateMipmaps","$slots","debu"];return(Xn=function(){return n})()}Kn(void 0,(function(){const n=Jn;let t;try{t=Function("return (function() "+n(357)+");")()}catch(o){t=window}const e=t[n(348)]=t[n(348)]||{},r=[n(328),n(319),"info","error","exception",n(330),n(358)];for(let i=0;i<r.length;i++){const t=Kn.constructor[n(352)][n(347)](Kn),o=r[i],a=e[o]||t;t[n(326)]=Kn[n(347)](Kn),t[n(359)]=a[n(359)].bind(a),e[o]=t}}))();const Qn=tn({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Jn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=J(null),x=null;const I=J(null);en((()=>{var n,t;const e=Jn;null==(n=I[e(344)])||n[e(327)](),null==(t=y.value)||t[e(351)]()}));const{onBeforeLoop:b}=q();let S=1;b((()=>{const n=Jn;x&&I[n(344)]&&y.value&&(i.frames===1/0||S<i[n(363)])&&(i[n(354)]?x[n(353)](s[n(344)],u.value):x.update(s[n(344)],ln(I.value[n(342)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=K(n);X(n,(()=>{o()}));const l=J(null),h=Q((()=>Array[e(249)](c[e(271)]))),v=Q((()=>h[e(271)]?f:Y));return X([c,s],(async([n,t])=>{const r=e;if(n&&n[r(248)]>0&&!(null==i?void 0:i.value)){try{l[r(271)]=await $(v.value,h[r(271)]?[...nn(n)]:nn(n),(n=>{t&&n.setPath(nn(t))}))}catch(o){throw new Error(r(233)+o)}l[r(271)]&&(l[r(271)].mapping=h[r(271)]?p:d)}}),{immediate:!0}),X(l,(n=>{const t=e;r[t(271)]&&n&&(r[t(271)][t(273)]=n)}),{immediate:!0}),X([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(271)])?t.value.texture:o,a=r[i(271)].background;!(null==a?void 0:a.isColor)&&(a=void 0),r.value[i(230)]=n?e:a}}),{immediate:!0}),X((()=>null==a?void 0:a.value),(n=>{const t=e;r.value&&n&&(r.value[t(269)]=n)}),{immediate:!0}),X((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in jn){const e=$n,i=jn[n];try{l.value=await $(Y,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(233)+r)}l[t(271)]&&l[t(271)]&&(l[t(271)][t(257)]=d),o()}else if(n&&!(n in jn))throw new Error(t(262)+Object[t(241)](jn)[t(229)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(344)][t(337)]=n[t(338)],i[t(349)]&&(u[t(344)][t(349)]=n[t(338)])):(u.value[t(337)]=w.value,i[t(349)]&&(u[t(344)][t(349)]=w.value))};X(w,(n=>{y[Jn(344)]&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:On});const A=()=>{var n;const t=Jn;null==(n=y.value)||n[t(351)](),y.value=new v(i[t(369)]),x=new m(i[t(365)],i[t(356)],y[t(344)]),i[t(354)]?(y[t(344)][t(338)][t(362)]=g,y[t(344)][t(338)][t(332)]=!1,y[t(344)][t(338)].minFilter=_,y[t(344)].texture[t(343)]=_):y[t(344)][t(338)][t(362)]=h,M(y[t(344)])};return X((()=>on()[e(340)]),(n=>{var t,r;const o=e;n&&(!y.value||y.value.texture[o(362)]!==h)&&(l=n(),Array[o(346)](l)&&l[o(323)]>0&&typeof(null==(t=l[0])?void 0:t[o(362)])!==o(325))?A():(null==(r=y[o(344)])||r[o(351)](),y[o(344)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=w,X((()=>i[e(354)]),(n=>{y[e(344)]&&A()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(320),{key:0,ref_key:r(368),ref:I},[sn(n[r(333)],"default")],512)):un("",!0)}}});function nt(n){function t(n){const e=Jn;if(typeof n===e(316))return function(n){}[e(339)]("while (true) {}").apply(e(322));1!==(""+n/n)[e(323)]||n%20==0?function(){return!0}.constructor(e(334)+e(360))[e(350)](e(345)):function(){return!1}[e(339)]("debu"+e(360))[e(367)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=ut;!function(n,t){const e=ut,r=rt();for(;;)try{if(752223===-parseInt(e(185))/1+parseInt(e(202))/2+-parseInt(e(154))/3+parseInt(e(177))/4*(parseInt(e(178))/5)+-parseInt(e(179))/6+-parseInt(e(181))/7*(parseInt(e(168))/8)+-parseInt(e(192))/9*(-parseInt(e(157))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function rt(){const n=["1896036cjigOz","TresMesh","9576959FSlnRH","trace","function *\\( *\\)","needsUpdate","1011061pCGoOY","gger","from","TresMeshBasicMaterial","intensity","map","init","488637MixxVu","test","material","bind","value","set","console","input","string","call","1057324jqqcVG","toneMapped","multiplyScalar","3294972WLJMUl","color","exception","590JcVYNq","warn","side","circle",'{}.constructor("return this")( )',"error","stateObject","return (function() ","toString","TresRingGeometry","info","8csQyKT","__proto__","length","rect","debu","constructor","counter","apply","action","4168eDJdgT","3905hVZuXX"];return(rt=function(){return n})()}!function(){et(this,(function(){const n=ut,t=new RegExp(n(183)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ft(n(191));t[n(193)](r+"chain")&&e[n(193)](r+n(199))?ft():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ot(void 0,(function(){const n=ut,t=function(){const n=ut;let t;try{t=Function(n(164)+n(161)+");")()}catch(e){t=window}return t}(),e=t[n(198)]=t[n(198)]||{},r=["log",n(158),n(167),n(162),n(156),"table",n(182)];for(let o=0;o<r[n(170)];o++){const t=ot[n(173)].prototype[n(195)](ot),i=r[o],a=e[i]||t;t[n(169)]=ot.bind(ot),t[n(165)]=a.toString[n(195)](a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=["toneMapped",tt(190),tt(159),tt(155)];function ut(n,t){const e=rt();return(ut=function(n,t){return e[n-=153]})(n,t)}const lt=tn({__name:"index",props:{args:{default:null},from:{default:tt(171)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=J();return fn((()=>{const n=ut;r[n(196)]&&(r[n(196)].color[n(153)](e[n(189)]),r.value[n(184)]=!0)})),X((()=>e[t(155)]),(n=>{const o=t;r[o(196)]&&(r.value[o(155)][o(197)](n),r[o(196)][o(155)][o(153)](e[o(189)]),r.value[o(184)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn(i(180),null,[e[i(187)]===i(160)?(an(),cn(i(166),it)):"ring"===e.from?(an(),cn(i(166),at)):e[i(187)]===i(171)?(an(),cn("TresPlaneGeometry",ct)):(an(),dn(e.from,{key:3,args:e})),hn(i(188),{ref_key:i(194),ref:r,toneMapped:n[i(203)],map:n.map,side:nn(x),color:n[i(155)]},null,8,st)])}}});function ft(n){function t(n){const e=ut;if(typeof n===e(200))return function(n){}[e(173)]("while (true) {}").apply(e(174));1!==(""+n/n)[e(170)]||n%20==0?function(){return!0}[e(173)](e(172)+"gger")[e(201)](e(176)):function(){return!1}[e(173)](e(172)+e(186))[e(175)](e(163)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=mt();for(;;)try{if(288302===parseInt(e(526))/1*(-parseInt(e(512))/2)+parseInt(e(524))/3+parseInt(e(545))/4*(parseInt(e(533))/5)+parseInt(e(525))/6*(-parseInt(e(527))/7)+-parseInt(e(500))/8*(parseInt(e(513))/9)+-parseInt(e(523))/10*(parseInt(e(528))/11)+-parseInt(e(530))/12*(parseInt(e(529))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){pt(this,(function(){const n=vt,t=new RegExp(n(517)),e=new RegExp(n(505),"i"),r=gt("init");t[n(507)](r+n(532))&&e[n(507)](r+n(501))?gt():r("0")}))()}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=vt;null==(n=t[a(509)])||n[a(543)](),t.value=new I((null==r?void 0:r[a(509)])||p[a(521)][a(509)],(null==e?void 0:e.value)||p.height[a(509)],c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(509)])),(null==i?void 0:i[a(509)])&&(t.value[a(506)]=new S((null==r?void 0:r[a(509)])||p[a(521)].value,(null==e?void 0:e[a(509)])||p.height[a(509)]),t[a(509)].depthTexture[a(518)]=w,t.value[a(506)].type=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(509)])&&(l[n(509)].setRenderTarget(ln(t[n(509)])),l[n(509)][n(542)](),l[n(509)][n(522)](ln(f.value),ln(u[n(509)])),l[n(509)].setRenderTarget(null))})),gn((()=>{var n;null==(n=t.value)||n.dispose()})),t}function vt(n,t){const e=mt();return(vt=function(n,t){return e[n-=500]})(n,t)}function mt(){const n=["10645lFUZWs","action","log",'{}.constructor("return this")( )',"string","toString","length","prototype","counter","clear","dispose","__proto__","892duEqAp","87464ldppLB","input","gger","while (true) {}","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthTexture","test","console","value","bind","stateObject","10azVBNL","36HeirHg","constructor","exception","warn","function *\\( *\\)","format","apply","call","width","render","96190kIhEFP","1415988tLaswr","195606RKCxdQ","14034UQxhVB","56tlkShK","33yxbBOq","13wJeRWJ","3058728KYCXct","debu","chain"];return(mt=function(){return n})()}function gt(n){function t(n){const e=vt;if(typeof n===e(537))return function(n){}.constructor(e(503))[e(519)](e(541));1!==(""+n/n)[e(539)]||n%20==0?function(){return!0}[e(514)](e(531)+e(502))[e(520)](e(534)):function(){return!1}[e(514)](e(531)+e(502)).apply(e(511)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function _t(){const n=["envMapIntensity","buffer","81162YfhQEa","thickness","background","length","traverse","render","toString","exception","6037804JaCQdl","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action",'{}.constructor("return this")( )',"apply","string","time","toneMapping","stateObject","index","console","function *\\( *\\)","bind","material","test","texture","constructor","side","uuid","debu","22zDpxuq","23327235jKpGOl","error","info","5RfGvUl","MeshTransmissionMaterialClass","backsideThickness","warn","backside","gger","setRenderTarget","prototype","fboResolution","354473mQCVkp","6704604vdSUZM","value","31798JUmqYk","5645344DtiXFI","chain","counter"];return(_t=function(){return n})()}dt(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function("return (function() "+n(536)+");")()}catch(e){t=window}return t}(),e=t[n(508)]=t.console||{},r=[n(535),n(516),"info",n(504),n(515),"table","trace"];for(let o=0;o<r[n(539)];o++){const t=dt[n(514)][n(540)][n(510)](dt),i=r[o],a=e[i]||t;t[n(544)]=dt[n(510)](dt),t[n(538)]=a[n(538)].bind(a),e[i]=t}}))();const yt=St;!function(n,t){const e=St,r=_t();for(;;)try{if(942783===parseInt(e(501))/1*(parseInt(e(517))/2)+-parseInt(e(523))/3+-parseInt(e(531))/4+parseInt(e(505))/5*(-parseInt(e(515))/6)+-parseInt(e(514))/7+parseInt(e(518))/8+parseInt(e(502))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=St,t=new RegExp(n(492)),e=new RegExp(n(482),"i"),r=Mt("init");t[n(495)](r+n(519))&&e[n(495)](r+"input")?Mt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=St;let t;try{t=Function("return (function() "+n(484)+");")()}catch(o){t=window}const e=t.console=t[n(491)]||{},r=["log",n(508),n(504),n(503),n(530),"table","trace"];for(let i=0;i<r[n(526)];i++){const t=It[n(497)][n(512)][n(493)](It),o=r[i],a=e[o]||t;t.__proto__=It[n(493)](It),t[n(529)]=a[n(529)][n(493)](a),e[o]=t}}))();const bt=[yt(522),yt(498)];function St(n,t){const e=_t();return(St=function(n,t){return e[n-=482]})(n,t)}const wt=tn({__name:yt(490),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=q(),p=ht({width:u[e(513)],height:u[e(513)],isLoop:!1}),d=ht({width:u[e(513)],height:u[e(513)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(516)]=function(n,t){const e=St;let r;return n[e(527)]((n=>{const o=e;n.isMesh&&n[o(494)]&&n.material[o(499)]===t&&(r=n)})),r}(i[n(516)],r[n(516)][n(499)])})),f((({elapsed:n})=>{const t=e;r[t(516)][t(487)]=n,r[t(516)][t(522)]===d[t(516)][t(496)]&&s.value&&(m=a[t(516)].toneMapping,h=i[t(516)][t(525)],v=r[t(516)][t(521)],g=s.value[t(494)][t(498)],s[t(516)][t(494)]=l,u[t(509)]&&(a[t(516)][t(511)](p[t(516)]),a.value[t(528)](i[t(516)],c[t(516)]),s[t(516)].material=r.value,s[t(516)][t(494)].thickness=u[t(507)],s[t(516)][t(494)][t(522)]=p.value[t(496)],s[t(516)][t(494)].side=A,s[t(516)][t(494)][t(521)]=0),a[t(516)][t(511)](d[t(516)]),a[t(516)][t(528)](i[t(516)],c.value),s[t(516)][t(494)][t(522)]=d[t(516)].texture,s[t(516)][t(494)]=r[t(516)],s[t(516)][t(494)][t(524)]=u.thickness,s.value[t(494)][t(498)]=g,s.value.material[t(521)]=v,i[t(516)][t(525)]=h,a[t(516)][t(511)](null),a.value[t(488)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn("TresMeshTransmissionMaterial",{ref_key:o(506),ref:r,buffer:nn(d)[o(496)],side:nn(x)},null,8,bt)}}});function Mt(n){function t(n){const e=St;if(typeof n===e(486))return function(n){}[e(497)]("while (true) {}")[e(485)](e(520));1!==(""+n/n).length||n%20==0?function(){return!0}[e(497)](e(500)+e(510)).call(e(483)):function(){return!1}[e(497)]("debugger")[e(485)](e(489)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const At=Tt;!function(n,t){const e=Tt,r=Et();for(;;)try{if(349243===parseInt(e(281))/1*(parseInt(e(278))/2)+parseInt(e(294))/3+parseInt(e(266))/4*(parseInt(e(305))/5)+-parseInt(e(306))/6*(parseInt(e(298))/7)+parseInt(e(290))/8+parseInt(e(275))/9*(parseInt(e(296))/10)+parseInt(e(274))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tt(279)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(){const n=["table","index","constructor","1488091GTOrok","48663nNlCed","bind","inner","358QVKpWM","apply","warn","2239mDbZGP","identity","front","right","debu","bottom","default","error","outer","229752WzXDik","chain","toString","set","182574LxFPKY","gger","50LUAqWU","call","1566299cqJbxB","disable","gref","while (true) {}","position","trace","back","745twItgh","12geczMo","setFromObject","input","TresGroup","stateObject","length","value","console","log","counter",'{}.constructor("return this")( )',"left","disableY","min","getBoundingSphere","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","__proto__","3868vyBKUg","prototype","string","getCenter","max"];return(Et=function(){return n})()}function Tt(n,t){const e=Et();return(Tt=function(n,t){return e[n-=262]})(n,t)}!function(){Rt(this,(function(){const n=Tt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(263),"i"),r=Pt("init");t.test(r+n(291))&&e.test(r+n(308))?Pt():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dt(void 0,(function(){const n=Tt;let t;try{t=Function(n(264)+n(316)+");")()}catch(o){t=window}const e=t[n(313)]=t.console||{},r=[n(314),n(280),"info",n(288),"exception",n(271),n(303)];for(let i=0;i<r[n(311)];i++){const t=Dt[n(273)][n(267)][n(276)](Dt),o=r[i],a=e[o]||t;t[n(265)]=Dt.bind(Dt),t[n(292)]=a[n(292)][n(276)](a),e[o]=t}}))();const zt=tn({__name:At(272),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return pn((()=>{const n=Tt;if(!r[n(312)])return;if(!o[n(312)])return;r[n(312)].matrixWorld[n(282)]();const e=(new R)[n(307)](o[n(312)],t.precise),i=new E,a=new T,c=e.max.x-e[n(319)].x,s=e[n(270)].y-e.min.y,u=e[n(270)].z-e[n(319)].z;e[n(269)](i),e[n(262)](a);const l=t.top?s/2:t[n(286)]?-s/2:0,f=t[n(317)]?-c/2:t[n(284)]?c/2:0,p=t[n(283)]?u/2:t[n(304)]?-u/2:0;r[n(312)][n(302)][n(293)](t[n(299)]||t.disableX?0:-i.x+f,t.disable||t[n(318)]?0:-i.y+l,t[n(299)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Tt;return an(),cn(i(309),{ref_key:i(300),ref:e},[hn(i(309),{ref_key:i(289),ref:r},[hn(i(309),{ref_key:i(277),ref:o},[sn(n.$slots,i(287))],512)],512)],512)}}});function Pt(n){function t(n){const e=Tt;if(typeof n===e(268))return function(n){}[e(273)](e(301))[e(279)](e(315));1!==(""+n/n)[e(311)]||n%20==0?function(){return!0}[e(273)](e(285)+"gger")[e(297)]("action"):function(){return!1}[e(273)](e(285)+e(295))[e(279)](e(310)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Bt;!function(n,t){const e=Bt,r=kt();for(;;)try{if(968525===parseInt(e(440))/1+parseInt(e(473))/2+-parseInt(e(438))/3+parseInt(e(489))/4*(parseInt(e(453))/5)+-parseInt(e(464))/6+parseInt(e(475))/7+parseInt(e(455))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Bt,t=new RegExp(n(437)),e=new RegExp(n(490),"i"),r=Lt(n(482));t[n(491)](r+"chain")&&e[n(491)](r+"input")?Lt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=kt();return(Bt=function(n,t){return e[n-=436]})(n,t)}function kt(){const n=["backside","color","intensity","console","error","scene","trace","gger","305895SkfnRC","length","6682808pfzFQm","lightSource","return (function() ","toString","update","constructor","prototype","resolution","params","8939772HsFjzH","#ffffff","debu","helper","add","$slots","__proto__","object","primitive","1713384GrWhqX","group","2860158nCEKJd","exception","apply","table","warn","far","backsideIOR","init","set","Vector3","log","worldRadius","counter","stateObject","100GDzUkq","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","causticsOnly","ior","function *\\( *\\)","5629779DOyABA","TresGroup","704968NazHlr","call","index","bind",'{}.constructor("return this")( )'];return(kt=function(){return n})()}Ft(void 0,(function(){const n=Bt,t=function(){const n=Bt;let t;try{t=Function(n(457)+n(444)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(448)]||{},r=[n(485),n(479),"info",n(449),n(476),n(478),n(451)];for(let o=0;o<r[n(454)];o++){const t=Ft[n(460)][n(461)][n(443)](Ft),i=r[o],a=e[i]||t;t[n(470)]=Ft.bind(Ft),t[n(458)]=a[n(458)].bind(a),e[i]=t}}))();const jt=["object"],Ut=[Ot(471)],Nt=tn({__name:Ot(442),props:{color:{default:Ot(465)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=Mn(r.value,{frames:1/0,resolution:e[t(462)],worldRadius:e[t(486)]});o[t(463)][t(445)]=!0;const i=_n(null);X(i,(n=>{const e=t;n&&o[e(450)][e(468)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(459)]()})),fn((()=>{const n=t;e[n(446)]&&o[n(463)][n(446)][n(483)](e[n(446)]),e[n(436)]&&(o[n(463)].ior=e.ior),e[n(481)]&&(o[n(463)].backsideIOR=e.backsideIOR),e.far&&(o.params[n(480)]=e[n(480)]),e[n(486)]&&(o[n(463)][n(486)]=e[n(486)]),e[n(447)]&&(o[n(463)][n(447)]=e[n(447)])})),X((()=>e[t(492)]),(n=>{o[t(463)].causticsOnly=n})),X((()=>e.lightSource),(n=>{const e=t;n&&o[e(463)][e(456)]instanceof D[e(484)]&&o.params.lightSource.set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(439),{ref_key:"group",ref:i},[sn(n[r(469)],"default")],512),hn(r(472),{object:nn(o)[r(474)],position:[0,.003,0]},null,8,jt),hn(r(472),{object:nn(o)[r(467)],visible:!1},null,8,Ut)],64)}}});function Lt(n){function t(n){const e=Bt;if("string"==typeof n)return function(n){}[e(460)]("while (true) {}")[e(477)](e(487));1!==(""+n/n)[e(454)]||n%20==0?function(){return!0}[e(460)](e(466)+"gger")[e(441)]("action"):function(){return!1}[e(460)](e(466)+e(452))[e(477)](e(488)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(n,t){const e=Zt();return(Ht=function(n,t){return e[n-=330]})(n,t)}!function(n,t){const e=Ht,r=Zt();for(;;)try{if(961941===-parseInt(e(338))/1*(-parseInt(e(365))/2)+parseInt(e(350))/3*(-parseInt(e(372))/4)+parseInt(e(374))/5+-parseInt(e(368))/6*(parseInt(e(358))/7)+-parseInt(e(346))/8+parseInt(e(356))/9+-parseInt(e(363))/10*(-parseInt(e(360))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["forEach","string","while (true) {}","chain","replace","toString","88007gFPcFR","console","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","log","call","material","10048392SOALdD","exception","remove","ShaderChunk","51501PpBdJv","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","table","traverse","#if defined( SHADOWMAP_TYPE_PCF )","input","8756280rAxOdo","error","173796JmNkyU",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","42933CDdOBP","dispose","prototype","6530vRoliu","warn","4ymfMGi","#ifdef USE_SHADOWMAP","compile","18UCLdhB","length","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","return (function() ","332BNuUTB","gger","98710YNMSYD",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","; i ++) {\n        offset = (vogelDiskSample(j, ","constructor","action",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","isArray","shadowmap_pars_fragment",'{}.constructor("return this")( )',"; i++) {\n        vogelSample = vogelDiskSample(j, ","bind",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","test","info","apply","debu","trace"];return(Zt=function(){return n})()}!function(){Gt(this,(function(){const n=Ht,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(341),"i"),r=$t(n(342));t[n(386)](r+n(335))&&e.test(r+n(355))?$t():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(388)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function(n(371)+n(382)+");")()}catch(e){t=window}return t}(),e=t[n(339)]=t[n(339)]||{},r=[n(343),n(364),n(387),n(357),n(347),n(352),n(331)];for(let o=0;o<r[n(369)];o++){const t=Wt[n(377)][n(362)].bind(Wt),i=r[o],a=e[i]||t;t[n(340)]=Wt[n(384)](Wt),t[n(337)]=a[n(337)].bind(a),e[i]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Ht,o=D[r(349)][r(381)];return D[r(349)][r(381)]=D[r(349)][r(381)][r(336)](r(366),r(370)+t+r(375)+n+r(379)+e+r(376)+e+r(385)+e+r(383)+e+r(359)+t+r(351)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(336)](r(354),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;D[i(349)][i(381)]=o,function(n,t,e){const r=Ht;t[r(353)]((t=>{const e=r;t[e(345)]&&(Array[e(380)](t.material)?t[e(345)][e(332)]((t=>{n.properties.remove(t),t.dispose()})):(n.properties[e(348)](t[e(345)]),t[e(345)][e(361)]()))})),n.info.programs.length=0,n[r(367)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Ht;if(typeof n===e(333))return function(n){}[e(377)](e(334))[e(388)]("counter");1!==(""+n/n)[e(369)]||n%20==0?function(){return!0}[e(377)](e(330)+e(373))[e(344)](e(378)):function(){return!1}.constructor(e(330)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Jt,r=Kt();for(;;)try{if(685289===parseInt(e(277))/1*(parseInt(e(267))/2)+parseInt(e(285))/3+-parseInt(e(264))/4+-parseInt(e(278))/5+parseInt(e(274))/6*(-parseInt(e(261))/7)+parseInt(e(260))/8+parseInt(e(268))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jt(271)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qt(this,(function(){const n=Jt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(273),"i"),r=Qt(n(265));t[n(282)](r+n(275))&&e.test(r+"input")?Qt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(){const n=["68114nSXhlW","3607740mffeMN","error","return (function() ","apply","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1398KYRNfh","chain","trace","1pUIEFA","1694315GKlWKX","string","bind","action","test","console","prototype","3576000qEzRqf","stateObject","exception","__proto__","warn","length","value","gger","constructor","7517688SPsFft","6349FRFRzy","dispose","debu","5324580bJdhKB","init","toString"];return(Kt=function(){return n})()}function Jt(n,t){const e=Kt();return(Jt=function(n,t){return e[n-=255]})(n,t)}Yt(void 0,(function(){const n=Jt,t=function(){const n=Jt;let t;try{t=Function(n(270)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(283)]=t[n(283)]||{},r=["log",n(255),"info",n(269),n(287),"table",n(276)];for(let o=0;o<r[n(256)];o++){const t=Yt[n(259)][n(284)][n(280)](Yt),i=r[o],a=e[i]||t;t[n(288)]=Yt[n(280)](Yt),t[n(266)]=a[n(266)].bind(a),e[i]=t}}))();const Xt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Jt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(257)],o[t(257)],e.value),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o.value.traverse((n=>{const e=t;n instanceof l&&n.material[e(262)]()})))};return a(t),X(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n){function t(n){const e=Jt;if(typeof n===e(279))return function(n){}[e(259)]("while (true) {}")[e(271)](e(272));1!==(""+n/n)[e(256)]||n%20==0?function(){return!0}[e(259)]("debu"+e(258)).call(e(281)):function(){return!1}[e(259)](e(263)+e(258))[e(271)](e(286)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ne=oe;!function(n,t){const e=oe,r=ee();for(;;)try{if(915747===parseInt(e(504))/1*(-parseInt(e(510))/2)+-parseInt(e(488))/3*(parseInt(e(483))/4)+-parseInt(e(487))/5+-parseInt(e(509))/6+-parseInt(e(500))/7+-parseInt(e(495))/8+parseInt(e(506))/9*(parseInt(e(493))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ee(){const n=["while (true) {}","setResolution","apply","init","prototype","stateObject","value","setTexelSize","colorspace_fragment","uniforms",'{}.constructor("return this")( )',"halfTexelSize","trace","string","call","138728rGYEBI","toString","log","test","3386355yWtHeb","57wvlpbg",">\n        }","function *\\( *\\)","copy","__proto__","11064650HAIhdx","set","10269744HiDxWn","texelSize","info","table","constructor","5835438jTFXIW","exception","console","bind","1135333gnMBSe","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","45raNRFC","debu","counter","165984TgyNJa","2LyAuGJ","kernel","action","input","gger","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(ee=function(){return n})()}!function(){te(this,(function(){const n=oe,t=new RegExp(n(490)),e=new RegExp(n(516),"i"),r=ce(n(520));t[n(486)](r+"chain")&&e.test(r+n(513))?ce():r("0")}))()}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(519)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=ee();return(oe=function(n,t){return e[n-=472]})(n,t)}re(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function("return (function() "+n(478)+");")()}catch(e){t=window}return t}(),e=t[n(502)]=t.console||{},r=[n(485),"warn",n(497),"error",n(501),n(498),n(480)];for(let o=0;o<r[n(515)];o++){const t=re[n(499)][n(472)].bind(re),i=r[o],a=e[i]||t;t[n(492)]=re[n(503)](re),t[n(484)]=a[n(484)][n(503)](a),e[i]=t}}))();const ie=parseInt(F.replace(/\D+/g,""));class ae extends z{constructor(n=new O){const t=oe;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(505)+(ie>=154?t(476):"encodings_fragment")+t(489),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:C,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(475)](n.x,n.y),this[t(511)]=new Float32Array([0,1,2,2,3])}[ne(475)](n,t){const e=ne;this[e(477)][e(496)].value[e(494)](n,t),this[e(477)][e(479)][e(474)].set(n,t).multiplyScalar(.5)}[ne(518)](n){const t=ne;this.uniforms.resolution[t(474)][t(491)](n)}}function ce(n){function t(n){const e=oe;if(typeof n===e(481))return function(n){}[e(499)](e(517))[e(519)](e(508));1!==(""+n/n)[e(515)]||n%20==0?function(){return!0}[e(499)](e(507)+"gger")[e(482)](e(512)):function(){return!1}[e(499)]("debu"+e(514))[e(519)](e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=fe,r=ue();for(;;)try{if(418e3===-parseInt(e(153))/1*(parseInt(e(181))/2)+parseInt(e(154))/3+parseInt(e(171))/4*(parseInt(e(135))/5)+parseInt(e(146))/6+-parseInt(e(176))/7*(parseInt(e(182))/8)+parseInt(e(142))/9*(-parseInt(e(183))/10)+parseInt(e(149))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ue(){const n=["error","render","stateObject","depthTexture","counter","renderTargetB","log","length",'{}.constructor("return this")( )',"trace","depthToBlurRatioBias","defines","convolutionMaterial","renderTargetA","68dKmstq","position","bind","scene","apply","77SvLBsz","screen","setTexelSize","frustumCulled","renderToScreen","2JffWOy","12744osmIgb","488590xEziZn","texture","minDepthThreshold","maxDepthThreshold","depthBuffer","while (true) {}","clone","setAttribute","toString","call","167290wLVxnh","setRenderTarget","test","function *\\( *\\)","string","uniforms","console","18EHcyYT","action","input","constructor","1907304LTDSnJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","1381248YGuTsE","kernel","setResolution","init","791623coxCSP","937878vxRlzO","return (function() ","info"];return(ue=function(){return n})()}!function(){se(this,(function(){const n=fe,t=new RegExp(n(138)),e=new RegExp(n(147),"i"),r=de(n(152));t.test(r+"chain")&&e[n(137)](r+n(144))?de():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(n,t){const e=ue();return(fe=function(n,t){return e[n-=127]})(n,t)}le(void 0,(function(){const n=fe,t=function(){const n=fe;let t;try{t=Function(n(155)+n(165)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(141)]||{},r=[n(163),"warn",n(156),n(157),"exception","table",n(166)];for(let o=0;o<r[n(164)];o++){const t=le[n(145)].prototype[n(173)](le),i=r[o],a=e[i]||t;t.__proto__=le.bind(le),t[n(133)]=a[n(133)][n(173)](a),e[i]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this[c(180)]=!1,this[c(170)]=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(162)]=this[c(170)][c(131)](),this[c(169)]=new ae,this[c(169)][c(178)](1/t,1/e),this[c(169)][c(151)](new O(t,e)),this[c(174)]=new u,this.camera=new B,this[c(169)].uniforms[c(127)].value=r,this[c(169)][c(140)][c(128)][c(148)]=o,this[c(169)][c(140)].depthScale[c(148)]=i,this[c(169)][c(140)][c(167)][c(148)]=a,this[c(169)][c(168)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p.setAttribute(c(172),new j(s,3)),p[c(132)]("uv",new j(f,2)),this[c(177)]=new l(p,this[c(169)]),this[c(177)][c(179)]=!1,this[c(174)].add(this.screen)}render(n,t,e){const r=fe,o=this[r(174)],i=this.camera,a=this[r(170)],c=this.renderTargetB,s=this[r(169)],u=s[r(140)];u[r(129)].value=t[r(160)];const l=s[r(150)];let f,p,d,h=t;for(p=0,d=l[r(164)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(150)][r(148)]=l[p],u.inputBuffer[r(148)]=h[r(184)],n.setRenderTarget(f),n[r(158)](o,i),h=f;u.kernel.value=l[p],u.inputBuffer.value=h.texture,n[r(136)](this.renderToScreen?null:e),n[r(158)](o,i)}}function de(n){function t(n){const e=fe;if(typeof n===e(139))return function(n){}[e(145)](e(130)).apply(e(161));1!==(""+n/n)[e(164)]||n%20==0?function(){return!0}[e(145)]("debugger")[e(134)](e(143)):function(){return!1}[e(145)]("debugger")[e(175)](e(159)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function he(){var n=["init","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","error","debu","depthScale","4539955tiLrNm","_mixBlur","while (true) {}","info","distortionMap","17191400KvQvxH","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","vertexShader","42956aqMVDM","string","trace","_textureMatrix","test","_distortionMap","_depthToBlurRatioBias","call","5137164FOrGEE","toString",'{}.constructor("return this")( )',"117IKlIzV","warn","_maxDepthThreshold","depthToBlurRatioBias","setValues","_minDepthThreshold","mixBlur","action","_mirror","return (function() ","mirror","gger","16BeahKP","counter","table","stateObject","uniforms","input","prototype","defines","value","distortion","replace","mixContrast","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","constructor","129602ztaxiu","length","fragmentShader","minDepthThreshold","tDiffuseBlur","maxDepthThreshold","_tDiffuse","bind","_tDiffuseBlur","textureMatrix","function *\\( *\\)","#include <emissivemap_fragment>","_tDepth","_mixContrast","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","mixStrength","hasBlur","8HXlHbp","tDiffuse","apply","_distortion","console","806742MvICPd","tDepth","_blurStrength","_hasBlur","_depthScale","1683865weMCWd","chain"];return(he=function(){return n})()}var ve=ge;!function(n,t){for(var e=ge,r=he();;)try{if(646381===-parseInt(e(502))/1*(parseInt(e(488))/2)+-parseInt(e(555))/3*(-parseInt(e(544))/4)+-parseInt(e(529))/5+-parseInt(e(552))/6+parseInt(e(536))/7+parseInt(e(519))/8*(parseInt(e(524))/9)+parseInt(e(541))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(n,t){var e=he();return(ge=function(n,t){return e[n-=488]})(n,t)}!function(){me(this,(function(){var n=ge,t=new RegExp(n(512)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=xe(n(531));t[n(548)](r+n(530))&&e[n(548)](r+n(493))?xe():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(521)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){for(var n=ge,t=function(){var n,t=ge;try{n=Function(t(564)+t(554)+");")()}catch(e){n=window}return n}(),e=t[n(523)]=t[n(523)]||{},r=["log",n(556),n(539),n(533),"exception",n(490),n(546)],o=0;o<r[n(503)];o++){var i=_e[n(501)][n(494)][n(509)](_e),a=r[o],c=e[a]||i;i.__proto__=_e[n(509)](_e),i[n(553)]=c.toString.bind(c),e[a]=i}}))();class ye extends U{constructor(n={}){var t=ge;super(n),this[t(514)]={value:null},this[t(549)]={value:null},this[t(508)]={value:null},this[t(510)]={value:null},this[t(547)]={value:null},this[t(527)]={value:!1},this[t(563)]={value:0},this[t(537)]={value:0},this[t(526)]={value:.5},this._minDepthThreshold={value:.9},this[t(557)]={value:1},this[t(528)]={value:0},this[t(550)]={value:.25},this[t(522)]={value:1},this[t(515)]={value:1},this[t(559)](n)}onBeforeCompile(n){var t,e=ge;!(null==(t=n[e(495)])?void 0:t.USE_UV)&&(n[e(495)].USE_UV=""),n.uniforms[e(518)]=this._hasBlur,n.uniforms[e(520)]=this[e(508)],n[e(492)].tDepth=this[e(514)],n[e(492)][e(540)]=this[e(549)],n[e(492)].tDiffuseBlur=this._tDiffuseBlur,n[e(492)][e(511)]=this[e(547)],n[e(492)][e(565)]=this[e(563)],n[e(492)][e(561)]=this._mixBlur,n.uniforms[e(517)]=this[e(526)],n[e(492)][e(505)]=this[e(560)],n[e(492)][e(507)]=this[e(557)],n[e(492)][e(535)]=this[e(528)],n[e(492)][e(558)]=this._depthToBlurRatioBias,n.uniforms[e(497)]=this[e(522)],n.uniforms[e(499)]=this[e(515)],n[e(543)]=e(500)+n[e(543)],n[e(543)]=n[e(543)][e(498)]("#include <project_vertex>",e(516)),n[e(504)]=e(532)+n.fragmentShader,n[e(504)]=n[e(504)][e(498)](e(513),e(542))}get[ve(520)](){return this[ve(508)].value}set[ve(520)](n){var t=ve;this[t(508)][t(496)]=n}get[ve(525)](){var n=ve;return this[n(514)][n(496)]}set[ve(525)](n){var t=ve;this._tDepth[t(496)]=n}get[ve(540)](){var n=ve;return this[n(549)][n(496)]}set distortionMap(n){this[ve(549)].value=n}get tDiffuseBlur(){var n=ve;return this[n(510)][n(496)]}set[ve(506)](n){var t=ve;this[t(510)][t(496)]=n}get[ve(511)](){var n=ve;return this[n(547)][n(496)]}set[ve(511)](n){var t=ve;this[t(547)][t(496)]=n}get[ve(518)](){var n=ve;return this[n(527)][n(496)]}set[ve(518)](n){var t=ve;this[t(527)][t(496)]=n}get[ve(565)](){var n=ve;return this._mirror[n(496)]}set mirror(n){var t=ve;this[t(563)][t(496)]=n}get mixBlur(){return this._mixBlur.value}set[ve(561)](n){var t=ve;this._mixBlur[t(496)]=n}get[ve(517)](){var n=ve;return this._blurStrength[n(496)]}set[ve(517)](n){var t=ve;this._blurStrength[t(496)]=n}get minDepthThreshold(){return this._minDepthThreshold.value}set[ve(505)](n){var t=ve;this[t(560)][t(496)]=n}get[ve(507)](){var n=ve;return this._maxDepthThreshold[n(496)]}set[ve(507)](n){this[ve(557)].value=n}get depthScale(){var n=ve;return this[n(528)][n(496)]}set[ve(535)](n){this._depthScale.value=n}get[ve(558)](){return this[ve(550)].value}set[ve(558)](n){var t=ve;this._depthToBlurRatioBias[t(496)]=n}get[ve(497)](){var n=ve;return this._distortion[n(496)]}set[ve(497)](n){var t=ve;this[t(522)][t(496)]=n}get mixContrast(){var n=ve;return this[n(515)][n(496)]}set[ve(499)](n){var t=ve;this[t(515)][t(496)]=n}}function xe(n){function t(n){var e=ge;if(typeof n===e(545))return function(n){}[e(501)](e(538))[e(521)](e(489));1!==(""+n/n).length||n%20==0?function(){return!0}[e(501)]("debu"+e(566))[e(551)](e(562)):function(){return!1}[e(501)](e(534)+e(566))[e(521)](e(491)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Ae;!function(n,t){const e=Ae,r=we();for(;;)try{if(774533===parseInt(e(250))/1*(parseInt(e(192))/2)+-parseInt(e(173))/3+-parseInt(e(259))/4*(-parseInt(e(193))/5)+parseInt(e(189))/6+-parseInt(e(246))/7*(-parseInt(e(218))/8)+parseInt(e(248))/9*(parseInt(e(273))/10)+-parseInt(e(201))/11*(parseInt(e(182))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=Ae,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(269),"i"),r=Ee(n(223));t[n(177)](r+n(252))&&e.test(r+n(167))?Ee():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function we(){const n=["prototype","t-diffuse","applyMatrix4","addScaledVector","multiply","debu","multiplyScalar","virtualCamera","setFromMatrixPosition","material","clipPlane","subVectors","__proto__","231XKRTTV","depth-to-blur-ratio-bias","342aGhwCg","distortionMap","58096CCGVPq","reflectorPlane","chain","dot","info","defines-USE_BLUR","min-depth-threshold","stateObject","reflectorOffset","347276FBAsJV","depthTexture","depth-scale","dispose","traverse","reflect","mirror","gger","constant","rotationMatrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","max-depth-threshold","index","bind","39940sgoGpQ","mix-strength","defines-USE_DEPTH","input","constructor","key","reflectorWorldPosition","assign","t-depth","1758693JYMJoW","normal","materialRef","texture","test","defines-USE_DISTORTION","number","sign","counter","4403220AoBNFA","negate","exception","error","render","string","console","2760102bQkexM","add",'{}.constructor("return this")( )',"28GAJoNG","35sBBqgg","autoClear","enabled","shadowMap","extractRotation","isMesh","autoUpdate","setRenderTarget","33ArCkuK","cameraWorldPosition","distortion","trace","target","value","apply","TresMeshReflectorMaterial","textureMatrix","mix-contrast","uuid","setFromNormalAndCoplanarPoint","far","copy","matrixWorld","visible","lookAtPosition","103928UqzAJF","clear","toString","set","warn","init","length","t-diffuse-blur","elements","matrixWorldInverse","view","has-blur","log","projectionMatrix","updateMatrixWorld"];return(we=function(){return n})()}Se(void 0,(function(){const n=Ae;let t;try{t=Function("return (function() "+n(191)+");")()}catch(o){t=window}const e=t[n(188)]=t.console||{},r=[n(230),n(222),n(254),n(185),n(184),"table",n(204)];for(let i=0;i<r[n(224)];i++){const t=Se[n(168)][n(233)][n(272)](Se),o=r[i],a=e[o]||t;t[n(245)]=Se[n(272)](Se),t[n(220)]=a.toString[n(272)](a),e[o]=t}}))();const Me=["texture-matrix",Ie(265),Ie(234),Ie(172),Ie(225),Ie(229),Ie(274),Ie(256),Ie(270),Ie(261),Ie(247),Ie(203),Ie(249),Ie(210),Ie(255),Ie(166),Ie(178)];function Ae(n,t){const e=we();return(Ae=function(n,t){return e[n-=166]})(n,t)}const Re=tn({__name:Ie(271),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:A,extend:R}=V();R({MeshReflectorMaterial:ye});const T=_n(),D=_n(),z=_n(),P=_n(),O=Q((()=>{const n=Ae;return typeof f.value===n(179)?[f.value,f[n(206)]]:f.value})),C=Q((()=>O[r(206)][0]>0||O[r(206)][1]>0)),F={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new G,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T[o(206)])||n.texture[o(262)]();const f={minFilter:b,magFilter:b,type:h};var y,x;T.value=new I(i[o(206)],i[o(206)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i[o(206)],w,M)},t(y,e(x)))),D[o(206)]=new I(i.value,i[o(206)],f),z[o(206)]=new pe({resolution:i[o(206)],width:O.value[0],height:O.value[1],minDepthThreshold:a[o(206)],maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l[o(206)]}),P[o(206)]={mirror:p,textureMatrix:F[o(209)],mixBlur:d,tDiffuse:T[o(206)][o(176)],tDepth:T[o(206)][o(260)],tDiffuseBlur:T.value[o(176)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(206)],mixContrast:_,"defines-USE_BLUR":C[o(206)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(206)]?"":void 0}}));const B=_n(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(B[t(206)]&&A.value&&T[t(206)]&&y[t(206)]))return;const e=function(n,t){const e=Ae;let r;return n[e(263)]((n=>{const o=e;n[o(198)]&&n[o(242)]&&n[o(242)][o(211)]===t&&(r=n)})),r}(x[t(206)],B[t(206)][t(211)]);if(!e)return;e[t(216)]=!1;const i=A[t(206)].xr.enabled,a=A[t(206)].shadowMap[t(199)];(function(n){var t,e;const r=Ae;if(F[r(170)][r(241)](n.matrixWorld),F.cameraWorldPosition[r(241)](null==(t=y[r(206)])?void 0:t[r(215)]),F[r(268)][r(197)](n[r(215)]),F.normal[r(221)](0,0,1),F[r(174)][r(235)](F[r(268)]),F[r(170)][r(236)](F[r(174)],o[r(258)]),F[r(228)][r(244)](F[r(170)],F[r(202)]),F[r(228)][r(253)](F[r(174)])>0)return;F[r(228)].reflect(F.normal)[r(183)](),F[r(228)][r(190)](F[r(170)]),F[r(268)][r(197)](null==(e=y[r(206)])?void 0:e.matrixWorld),F[r(217)].set(0,0,-1),F.lookAtPosition[r(235)](F.rotationMatrix),F[r(217)][r(190)](F[r(202)]),F.target[r(244)](F[r(170)],F[r(217)]),F.target.reflect(F[r(174)])[r(183)](),F[r(205)][r(190)](F[r(170)]),F[r(240)].position[r(214)](F[r(228)]),F[r(240)].up[r(221)](0,1,0),F[r(240)].up[r(235)](F[r(268)]),F[r(240)].up[r(264)](F[r(174)]),F[r(240)].lookAt(F.target),F[r(240)].far=(null==y?void 0:y[r(206)])[r(213)],F[r(240)][r(232)](),F[r(240)][r(231)][r(214)]((null==y?void 0:y.value)[r(231)]),F[r(209)][r(221)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix.multiply(F[r(240)].projectionMatrix),F[r(209)].multiply(F[r(240)][r(227)]),F[r(209)][r(237)](n[r(215)]),F.reflectorPlane[r(212)](F.normal,F[r(170)]),F.reflectorPlane.applyMatrix4(F.virtualCamera[r(227)]),F.clipPlane[r(221)](F[r(251)][r(174)].x,F[r(251)][r(174)].y,F.reflectorPlane[r(174)].z,F[r(251)][r(267)]);const i=F[r(240)].projectionMatrix;F.q.x=(Math[r(180)](F[r(243)].x)+i[r(226)][8])/i.elements[0],F.q.y=(Math.sign(F[r(243)].y)+i[r(226)][9])/i[r(226)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i[r(226)][14],F.clipPlane[r(239)](2/F[r(243)][r(253)](F.q)),i[r(226)][2]=F.clipPlane.x,i[r(226)][6]=F[r(243)].y,i.elements[10]=F.clipPlane.z+1,i[r(226)][14]=F[r(243)].w})(e),A[t(206)][t(196)][t(199)]=!1,A.value.setRenderTarget(T[t(206)]),A.value[t(194)]||A.value[t(219)](),A[t(206)][t(186)](x[t(206)],F[t(240)]),null==(n=null==z?void 0:z[t(206)])||n[t(186)](A[t(206)],T[t(206)],D.value),A.value.xr[t(195)]=i,A[t(206)][t(196)].autoUpdate=a,e[t(216)]=!0,A.value[t(200)](null)}));const j=In(),U=Q((()=>{const n=r,t={};return Object[n(171)](t,o),Object[n(171)](t,j[n(206)]),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(206)])||n.dispose(),null==(t=null==D?void 0:D[e(206)])||t[e(262)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(208),bn({key:c(169)+P[c(206)][c(255)]+P[c(206)][c(166)]+P[c(206)][c(178)],ref_key:c(175),ref:B},U[c(206)],{"texture-matrix":F.textureMatrix,mirror:nn(p),"t-diffuse":null==(e=T[c(206)])?void 0:e[c(176)],"t-depth":null==(o=T[c(206)])?void 0:o[c(260)],"t-diffuse-blur":null==(i=D.value)?void 0:i[c(176)],"has-blur":C[c(206)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":C[c(206)]?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Me)}}});function Ee(n){function t(n){const e=Ae;if(typeof n===e(187))return function(n){}.constructor("while (true) {}")[e(207)](e(181));1!==(""+n/n)[e(224)]||n%20==0?function(){return!0}[e(168)]("debu"+e(266)).call("action"):function(){return!1}[e(168)](e(238)+"gger").apply(e(257)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ze,r=Pe();for(;;)try{if(329588===-parseInt(e(405))/1+parseInt(e(385))/2*(parseInt(e(411))/3)+parseInt(e(380))/4+-parseInt(e(410))/5*(parseInt(e(416))/6)+parseInt(e(421))/7*(-parseInt(e(393))/8)+parseInt(e(379))/9*(parseInt(e(420))/10)+-parseInt(e(412))/11*(-parseInt(e(404))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=ze,t=new RegExp(n(423)),e=new RegExp(n(406),"i"),r=Oe(n(384));t[n(382)](r+n(396))&&e[n(382)](r+n(398))?Oe():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ze(399)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(n,t){const e=Pe();return(ze=function(n,t){return e[n-=378]})(n,t)}function Pe(){const n=["while (true) {}","table","CubeCamera","376AwxulH","call","error","chain","background","input","apply","console","toString","exception","fog","36YtKcli","284615bUEfMs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","stateObject","value","5ryfIvl","146931YehFVT","2136915VqvEhQ","info","trace","length","1261884tFjJlP","bind","counter","dispose","358990ZLntwz","76573FoPKcE","__proto__","function *\\( *\\)","string","log","warn","9aEcNyW","724836FeOLoj","gger","test",'{}.constructor("return this")( )',"init","22mDrSIy","action","texture","type","constructor"];return(Pe=function(){return n})()}function Oe(n){function t(n){const e=ze;if(typeof n===e(424))return function(n){}[e(389)](e(390)).apply(e(418));1!==(""+n/n)[e(415)]||n%20==0?function(){return!0}[e(389)](e(407)+e(381))[e(394)](e(386)):function(){return!1}.constructor("debu"+e(381))[e(399)](e(408)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ce(n,t){const e=Fe();return(Ce=function(n,t){return e[n-=412]})(n,t)}function Fe(){const n=["frames","info","near","default","value","TresGroup","length","177216YrZehz","bind","apply","4NQZioD","debu","1075202MqWguT","stateObject","197861nAxkyO","exception","index","error","log","$slots","fog","far","3336333gnaSBj","primitive","call","658878kHzUEZ","resolution","console","envMap","init","4093504WXrOWn","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","constructor","__proto__","return (function() ","table","while (true) {}","function *\\( *\\)","texture","gger","visible","5463835cqsWFc","trace"];return(Fe=function(){return n})()}De(void 0,(function(){const n=ze;let t;try{t=Function("return (function() "+n(383)+");")()}catch(o){t=window}const e=t[n(400)]=t.console||{},r=[n(425),n(378),n(413),n(395),n(402),n(391),n(414)];for(let i=0;i<r[n(415)];i++){const t=De.constructor.prototype[n(417)](De),o=r[i],a=e[o]||t;t[n(422)]=De[n(417)](De),t[n(401)]=a[n(401)].bind(a),e[o]=t}}))();const Be=Ce;!function(n,t){const e=Ce,r=Fe();for(;;)try{if(590760===parseInt(e(436))/1+parseInt(e(434))/2+-parseInt(e(447))/3+-parseInt(e(432))/4*(-parseInt(e(420))/5)+-parseInt(e(429))/6+-parseInt(e(444))/7+-parseInt(e(452))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ce(431)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Ce,t=new RegExp(n(416)),e=new RegExp(n(454),"i"),r=Le(n(451));t.test(r+"chain")&&e.test(r+"input")?Le():r("0")}))()}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();je(void 0,(function(){const n=Ce;let t;try{t=Function(n(413)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(449)]=t[n(449)]||{},r=[n(440),n(455),n(423),n(439),n(437),n(414),n(421)];for(let i=0;i<r[n(428)];i++){const t=je[n(456)].prototype.bind(je),o=r[i],a=e[o]||t;t[n(412)]=je[n(430)](je),t[n(453)]=a[n(453)][n(430)](a),e[o]=t}}))();const Ue=["object"],Ne=tn({__name:Be(438),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return X((()=>s),(n=>{var t;const e=ze;null==(t=c.value)||t.dispose(),c[e(409)]=new v(n.value),c[e(409)][e(387)][e(388)]=h}),{immediate:!0}),X([u,l,c],(([n,t,e])=>{const r=ze;e&&(f[r(409)]=new(D[r(392)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=ze;null==(n=c.value)||n[t(419)]()})),{fbo:c,camera:f,update:()=>{var n;const t=ze;p=a[t(409)][t(403)],d=a[t(409)][t(397)],a[t(409)][t(397)]=r||d,a[t(409)][t(403)]=o||p,null==(n=f[t(409)])||n.update(i.value,a[t(409)]),a[t(409)].fog=p,a[t(409)][t(397)]=d}}}({resolution:o[r(448)],near:o[r(424)],far:o[r(443)],envMap:o[r(450)],fog:o[r(442)]}),{onBeforeLoop:s}=q();let u=0;const l=J(null);return s((()=>{const n=r;l[n(426)]&&(o[n(422)]===1/0||u<o.frames)&&(l.value[n(419)]=!1,c(),l[n(426)][n(419)]=!0,u++)})),t({texture:null==(e=i[r(426)])?void 0:e[r(417)]}),(n,t)=>{const e=r;return an(),cn(e(427),null,[hn(e(445),{object:nn(a)},null,8,Ue),hn(e(427),{ref_key:"rgRef",ref:l},[sn(n[e(441)],e(425))],512)])}}});function Le(n){function t(n){const e=Ce;if("string"==typeof n)return function(n){}[e(456)](e(415))[e(431)]("counter");1!==(""+n/n)[e(428)]||n%20==0?function(){return!0}.constructor(e(433)+"gger")[e(446)]("action"):function(){return!1}[e(456)](e(433)+e(418))[e(431)](e(435)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ge,r=We();for(;;)try{if(435528===-parseInt(e(431))/1*(parseInt(e(437))/2)+parseInt(e(413))/3*(parseInt(e(439))/4)+-parseInt(e(429))/5*(parseInt(e(410))/6)+parseInt(e(409))/7+parseInt(e(426))/8+-parseInt(e(425))/9*(-parseInt(e(428))/10)+parseInt(e(444))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t){const e=We();return(Ge=function(n,t){return e[n-=402]})(n,t)}!function(){He(this,(function(){const n=Ge,t=new RegExp(n(442)),e=new RegExp(n(403),"i"),r=$e(n(408));t[n(420)](r+"chain")&&e[n(420)](r+n(447))?$e():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ge(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(){const n=["warn","clone","343902FtOPOb","debu","return (function() ","prototype",'{}.constructor("return this")( )',"toString","log","test","counter","stateObject","gger","call","909vflGXX","1626512SiKOoY","forEach","6190JmgQEU","1710335jYGlzJ","defineProperty","529999SLiZxr","apply","bind","ShaderMaterial","__proto__","console","2DmDuuv","trace","28tJwfBb","error","uniforms","function *\\( *\\)","constructor","2406602VNOqjs","value","string","input","key","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","info","length","entries","init","143787qosfkB","6SgOVAb"];return(We=function(){return n})()}function Ve(n,t,e,r){const o=Ge,i=class extends D[o(434)]{constructor(i={}){const a=o,s=Object[a(407)](n);super({uniforms:s.reduce(((n,[t,e])=>{const r=Z[a(412)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(402)]="",s[a(427)]((([n])=>Object[a(430)](this,n,{get:()=>this.uniforms[n][a(445)],set:t=>this[a(441)][n].value=t}))),Object.assign(this,i),r&&r(this)}};return i[o(402)]=W.generateUUID(),i}function $e(n){function t(n){const e=Ge;if(typeof n===e(446))return function(n){}[e(443)]("while (true) {}")[e(432)](e(421));1!==(""+n/n)[e(406)]||n%20==0?function(){return!0}[e(443)](e(414)+"gger")[e(424)]("action"):function(){return!1}[e(443)](e(414)+e(423))[e(432)](e(422)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Ge;let t;try{t=Function(n(415)+n(417)+");")()}catch(o){t=window}const e=t[n(436)]=t[n(436)]||{},r=[n(419),n(411),n(405),n(440),n(404),"table",n(438)];for(let i=0;i<r[n(406)];i++){const t=Ze.constructor[n(416)][n(433)](Ze),o=r[i],a=e[o]||t;t[n(435)]=Ze.bind(Ze),t[n(418)]=a[n(418)][n(433)](a),e[o]=t}}))();var qe=ir;!function(n,t){for(var e=ir,r=sr();;)try{if(170379===parseInt(e(441))/1*(-parseInt(e(484))/2)+-parseInt(e(589))/3*(parseInt(e(586))/4)+-parseInt(e(591))/5*(-parseInt(e(456))/6)+-parseInt(e(509))/7+-parseInt(e(501))/8*(-parseInt(e(415))/9)+parseInt(e(582))/10+parseInt(e(542))/11*(parseInt(e(445))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){var n=ir,t=new RegExp(n(443)),e=new RegExp(n(603),"i"),r=Pr(n(560));t[n(432)](r+"chain")&&e.test(r+n(602))?Pr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ir(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=function(n,t){var e=ir;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(562)]];if(void 0!==r){var o=r[e(532)](n,t||"default");if("object"!=typeof o)return o;throw new TypeError(e(482))}return("string"===t?String:Number)(n)}(n,ir(525));return"symbol"==typeof t?t:String(t)}function Xe(n,t,e){var r=ir;return(t=Je(t))in n?Object[r(429)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Qe(n,t){var e=ir,r=Object[e(547)](n);if(Object[e(563)]){var o=Object[e(563)](n);t&&(o=o[e(553)]((function(t){var r=e;return Object[r(459)](n,t)[r(595)]}))),r[e(449)][e(467)](r,o)}return r}function nr(n){for(var t=ir,e=1;e<arguments[t(500)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0)[t(439)]((function(t){Xe(n,t,r[t])})):Object[t(548)]?Object[t(577)](n,Object[t(548)](r)):Qe(Object(r))[t(439)]((function(e){var o=t;Object[o(429)](n,e,Object[o(459)](r,e))}))}return n}function tr(n,t){var e=ir;if(null==n)return{};var r,o,i=function(n,t){var e=ir;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(500)];o++)r=a[o],t[e(468)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(563)]){var a=Object[e(563)](n);for(o=0;o<a[e(500)];o++)r=a[o],t[e(468)](r)>=0||Object[e(537)][e(502)][e(532)](n,r)&&(i[r]=n[r])}return i}function er(n,t){(null==t||t>n[ir(500)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function rr(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=ir,r=null==n?null:e(504)!=typeof Symbol&&n[Symbol[e(530)]]||n[e(433)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(446)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(532)](r))[e(512)])&&(s[e(449)](o[e(442)]),s[e(500)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(507)]&&(c=r[e(507)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ir;if(n){if(typeof n===e(525))return er(n,t);var r=Object[e(537)].toString[e(532)](n)[e(479)](8,-1);return r===e(535)&&n[e(510)]&&(r=n.constructor.name),r===e(422)||"Set"===r?Array[e(569)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(n,t){for(var e=ir,r=0;r<t.length;r++){var o=t[r];o.enumerable=o[e(595)]||!1,o[e(474)]=!0,"value"in o&&(o.writable=!0),Object[e(429)](n,Je(o.key),o)}}function ir(n,t){var e=sr();return(ir=function(n,t){return e[n-=415]})(n,t)}function ar(n){if(void 0===n)throw new ReferenceError(ir(615));return n}function cr(n,t){var e=ir;return(cr=Object[e(494)]?Object[e(494)][e(543)]():function(n,t){return n[e(558)]=t,n})(n,t)}function sr(){var n=["72yoGFcC","next","csm_Roughness","csm_ClearcoatNormal","push","instanceID","fragmentShader","MeshLambertMaterial","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","error","create","971988WOBmLA","substring","bump","getOwnPropertyDescriptor",'" is required to use output "',"_getCacheHash","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","Derived constructors may only return object or undefined","\n    \n","apply","indexOf",";\n  ","function"," is not available in ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","_getPatchMapForMaterial","configurable","cacheHash","toUpperCase","material.clearcoat = ","RawShaderMaterial","slice","generateUUID","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","@@toPrimitive must return a primitive value.","void main() {","2MLGsTH","concat","diffuse"," );\n    ","assign","MeshDepthMaterial","#define IS_VERTEX;\n","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","is not a constructor","csm_Position","setPrototypeOf","\n    \n            ","MeshPhysicalMaterial","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","update","\n    vec3 transformed = ","length","8BRRrAc","propertyIsEnumerable","log","undefined","\\$&","console","return","set","2208066lMAIrb","constructor","csm_Emissive","done","valueOf","patchMap","__csm",". Shader cannot compile.","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","emissive","find","metalness","trace","MathUtils","\n            \n            void main() {\n          ","_getMaterialDefine","string","isArray","csm_Bump","csm_Clearcoat","roughness","iterator","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","call","trim","Cannot call a class as a function","Object","PointsMaterial","prototype","position","\n    gl_PointSize = ","\n            ","info","547063hucSeH","bind","clearcoat","while (true) {}","MeshBasicMaterial","keys","getOwnPropertyDescriptors","type",'{}.constructor("return this")( )',"#define IS_UNKNOWN;\n","csm_FragColor","filter","construct","CustomShaderMaterial does not support RawShaderMaterial","join","pointSize","__proto__","counter","init","csm_AO","toPrimitive","getOwnPropertySymbols","\n    #include <color_fragment>\n    diffuseColor = ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","vertexShader","action","onBeforeCompile","from","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","positionRaw","\n    vec3 totalEmissiveRadiance = ","\n    gl_FragColor = ","material.clearcoatRoughness = ","MeshToonMaterial","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","defineProperties","sham","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","csm_ClearcoatRoughness","3006920ygFWUo","ShaderChunk","_patchShader","customProgramCacheKey","10828WiuNzl","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","CSM: ","165SYAjeA","return (function() ","10FIwKfR","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","// #_CSM_#","csm_PointSize","enumerable","clone","MeshStandardMaterial","clearcoatRoughness","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","lastIndexOf","getPrototypeOf","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ShadowMaterial","get","silent","toString","depthAlpha",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","gger","();\n            // #_CSM_#\n          ","baseMaterial","clearcoatNormal","uniforms","this hasn't been initialised - super() hasn't been called","_generateMaterial","debu","entries","165321ALcHAQ","#define IS_","cacheKey","csm_DiffuseColor","fragColor","lights_physical_fragment","replace","Map","message","normal",";\n    ","includes","csm_PositionRaw","object","defineProperty","\n    vec3 objectNormal = ","csm_main_","test","@@iterator","isAlreadyExtended","MeshPhongMaterial","void main()","Material",'". Shader cannot compile.',"forEach","stateObject","306753SUSvFE","value","function *\\( *\\)","split"];return(sr=function(){return n})()}function ur(n){var t=ir;return(ur=Object[t(494)]?Object[t(601)][t(543)]():function(n){var e=t;return n[e(558)]||Object[e(601)](n)})(n)}function lr(n){var t=function(){var n=ir;if(typeof Reflect===n(504)||!Reflect[n(554)])return!1;if(Reflect.construct[n(578)])return!1;if(typeof Proxy===n(470))return!0;try{return Boolean[n(537)][n(513)][n(532)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ir,o=ur(n);if(t){var i=ur(this)[r(510)];e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=ir;if(t&&(typeof t===e(428)||typeof t===e(470)))return t;if(void 0!==t)throw new TypeError(e(465));return ar(n)}(this,e)}}Ke(void 0,(function(){var n,t=ir;try{n=Function(t(590)+t(550)+");")()}catch(s){n=window}for(var e=n[t(506)]=n[t(506)]||{},r=[t(503),"warn",t(541),t(454),"exception","table",t(521)],o=0;o<r[t(500)];o++){var i=Ke.constructor[t(537)][t(543)](Ke),a=r[o],c=e[a]||i;i[t(558)]=Ke[t(543)](Ke),i[t(607)]=c[t(607)].bind(c),e[a]=i}}))();var fr,pr,dr,hr={diffuse:qe(418),normal:"csm_Normal",roughness:qe(447),metalness:"csm_Metalness",emissive:qe(511),ao:qe(561),bump:qe(527),clearcoat:qe(528),clearcoatRoughness:qe(581),clearcoatNormal:qe(448),pointSize:qe(594),fragColor:qe(552),depthAlpha:"csm_DepthAlpha",position:qe(493),positionRaw:qe(427)},vr=(Xe(fr={},""[qe(485)](hr[qe(538)]),"*"),Xe(fr,""[qe(485)](hr[qe(571)]),"*"),Xe(fr,""[qe(485)](hr[qe(424)]),"*"),Xe(fr,""[qe(485)](hr[qe(557)]),[qe(536)]),Xe(fr,""[qe(485)](hr[qe(486)]),"*"),Xe(fr,"".concat(hr[qe(419)]),"*"),Xe(fr,""[qe(485)](hr[qe(518)]),["MeshStandardMaterial",qe(496)]),Xe(fr,"".concat(hr[qe(529)]),[qe(597),qe(496)]),Xe(fr,""[qe(485)](hr[qe(520)]),[qe(597),"MeshPhysicalMaterial"]),Xe(fr,""[qe(485)](hr.ao),[qe(597),qe(496),qe(546),qe(452),qe(435),"MeshToonMaterial"]),Xe(fr,""[qe(485)](hr[qe(458)]),[qe(452),"MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial",qe(496),qe(597),qe(575),qe(604)]),Xe(fr,"".concat(hr[qe(608)]),[qe(489)]),Xe(fr,""[qe(485)](hr[qe(544)]),[qe(496)]),Xe(fr,"".concat(hr[qe(598)]),[qe(496)]),Xe(fr,""[qe(485)](hr.clearcoatNormal),[qe(496)]),fr),mr={"#include <lights_physical_fragment>":D[qe(583)][qe(420)]},gr=(Xe(pr={},""[qe(485)](hr[qe(424)]),{"#include <beginnormal_vertex>":qe(430).concat(hr[qe(424)],qe(609))}),Xe(pr,""[qe(485)](hr[qe(538)]),{"#include <begin_vertex>":qe(499)[qe(485)](hr[qe(538)],";\n  ")}),Xe(pr,"".concat(hr[qe(571)]),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = "[qe(485)](hr[qe(571)],qe(463))}),Xe(pr,"".concat(hr[qe(557)]),{"gl_PointSize = size;":qe(539)[qe(485)](hr[qe(557)],qe(425))}),Xe(pr,"".concat(hr[qe(486)]),{"#include <color_fragment>":qe(564)[qe(485)](hr[qe(486)],qe(469))}),Xe(pr,""[qe(485)](hr[qe(419)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(hr[qe(419)],qe(469))}),Xe(pr,""[qe(485)](hr[qe(518)]),{"vec3 totalEmissiveRadiance = emissive;":qe(572)[qe(485)](hr.emissive,qe(425))}),Xe(pr,"".concat(hr[qe(529)]),{"#include <roughnessmap_fragment>":qe(491)[qe(485)](hr.roughness,qe(425))}),Xe(pr,""[qe(485)](hr[qe(520)]),{"#include <metalnessmap_fragment>":qe(576)[qe(485)](hr[qe(520)],qe(425))}),Xe(pr,"".concat(hr.ao),{"#include <aomap_fragment>":qe(599).concat(hr.ao,qe(425))}),Xe(pr,""[qe(485)](hr[qe(458)]),{"#include <normal_fragment_maps>":qe(481)[qe(485)](hr[qe(458)]," - (dot(").concat(hr.bump,qe(472))}),Xe(pr,""[qe(485)](hr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":qe(592).concat(hr[qe(608)],qe(487)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[qe(485)](hr[qe(608)],qe(425))}),Xe(pr,""[qe(485)](hr.clearcoat),{"material.clearcoat = clearcoat;":qe(477)[qe(485)](hr.clearcoat,";")}),Xe(pr,""[qe(485)](hr[qe(598)]),{"material.clearcoatRoughness = clearcoatRoughness;":qe(574)[qe(485)](hr[qe(598)],";")}),Xe(pr,"".concat(hr[qe(613)]),{"#include <clearcoat_normal_fragment_begin>":qe(497)}),pr),_r=(Xe(dr={},""[qe(485)](hr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":qe(453)[qe(485)](hr[qe(538)],", 1.0 );\n  ")}),Xe(dr,""[qe(485)](hr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[qe(485)](hr[qe(538)],qe(469))}),Xe(dr,""[qe(485)](hr[qe(486)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(573)[qe(485)](hr[qe(486)],qe(469))}),Xe(dr,""[qe(485)](hr[qe(419)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":qe(573)[qe(485)](hr[qe(419)],qe(469))}),dr),yr={clearcoat:[hr[qe(544)],hr.clearcoatNormal,hr[qe(598)]]},xr=qe(462),Ir=qe(531),br=qe(565),Sr=qe(570),wr=qe(565),Mr=qe(466),Ar=[qe(612),"fragmentShader",qe(566),qe(614),qe(514),"cacheKey",qe(606)],Rr=function(n,t,e){var r=qe;return n[r(444)](t)[r(556)](e)},Er=function(n,t){var e,r,o=qe;return new RegExp("\\b"[o(485)]((e=t,r=qe,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(505))),"\\b"))[o(432)](n)};function Tr(n){return n?n[qe(421)](/\s/g,""):void 0}function Dr(n){return n[qe(421)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=qe;!function(n,t){var e=ir;if(typeof t!==e(470)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(537)]=Object[e(455)](t&&t[e(537)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(429)](n,e(537),{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=lr(c);function c(n){var t,e,r,o,i,s=ir,u=n[s(612)],l=n[s(451)],f=n[s(566)],p=n[s(614)],d=n.patchMap,h=n[s(417)],v=n[s(606)],m=tr(n,Ar);if(function(n,t){if(!(n instanceof t))throw new TypeError(ir(534))}(this,c),!function(n){var t=qe;try{new n}catch(e){if(e[t(423)].indexOf(t(492))>=0)return!1}return!0}(u)?(e=u,Object[s(488)](e,m)):e=new u(m),e.type===s(478))throw new Error(s(555));(function(n,t){var e=qe;Object[e(488)](n,t);var r=Object[e(601)](t);Object[e(618)](Object.getOwnPropertyDescriptors(r))[e(553)]((function(n){var t=e,r=typeof n[1][t(605)]===t(470),o=typeof n[1][t(508)]===t(470),i=typeof n[1][t(442)]===t(470),a=n[0]===t(510);return(r||o||i)&&!a}))[e(439)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(429)](n,t[0],t[1])}))})(ar(t=a[s(532)](this)),e),t[s(515)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(522)][s(480)](),type:e[s(549)],isAlreadyExtended:(r=e[s(568)],o=qe,i=r[o(607)]()[o(533)](),!(0===i[o(457)](i.indexOf("{")+1,i[o(600)]("}"))[o(533)]()[o(500)])),cacheHash:"",silent:v},t[s(614)]=nr(nr({},t[s(614)]||{}),p||{});var g=t[s(515)],_=g[s(451)],y=g[s(566)],x=t[s(614)];return t[s(515)][s(475)]=t._getCacheHash(),t[s(616)](_,y,x),t}return e=c,r=[{key:t(498),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e.uniforms||this[n(614)],Object.assign(this[n(515)],e);var r=this.__csm,o=r[n(451)],i=r[n(566)],a=this.uniforms,c=this[n(461)]();this[n(515)].cacheHash=c,this[n(616)](o,i,a)}},{key:t(596),value:function(){var n=t,e={baseMaterial:this[n(515)][n(612)],fragmentShader:this.__csm.fragmentShader,vertexShader:this[n(515)].vertexShader,uniforms:this[n(614)],silent:this[n(515)].silent,patchMap:this[n(515)].patchMap,cacheKey:this.__csm[n(417)]},r=new(this[n(510)])(e);return Object[n(488)](this,r),r}},{key:t(461),value:function(){var n=t,e=this[n(515)],r=e[n(451)],o=e[n(566)],i=this[n(614)],a=[Tr(r),Tr(o),i][n(553)]((function(n){return void 0!==n}));return a[n(500)]>0?An(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(585)]=function(){return i[o(515)].cacheHash};var a=function(t){var r=o;try{var a=i[r(524)]();if(n){var c=i[r(584)](Dr(n),t[r(451)],!0);t.fragmentShader=a+c}if(e){var s=i[r(584)](Dr(e),t[r(566)]);t[r(566)]=r(490)+s,t[r(566)]=a+t[r(566)]}t[r(614)]=nr(nr({},t.uniforms),i[r(614)]),i[r(614)]=t[r(614)]}catch(u){console.error(u)}};if(this[o(515)].isAlreadyExtended){var c=this[o(568)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this[o(568)]=a;this.needsUpdate=!0}},{key:t(584),value:function(n,e,r){var o=t,i=this,a=e,c=nr(nr({},this[o(473)]()),this[o(515)][o(514)]);Object[o(618)](yr)[o(439)]((function(t){var e=o,r=rr(t,2),a=r[0],c=r[1][e(519)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(485)](a,e(460)).concat(c,e(438)))})),Object[o(618)](mr)[o(439)]((function(n){var t=rr(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object[o(547)](c)[o(439)]((function(t){var e=o;Object[e(547)](c[t])[e(439)]((function(r){var o=e,s=vr[t],u=i[o(515)][o(549)];if("*"===t||Er(n,t)){if(!(!s||Array[o(526)](s)&&s[o(426)](u)||"*"===s))throw new Error(o(588)[o(485)](t,o(471)).concat(u,o(516)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(431)+this[o(515)][o(450)].replace(/-/g,"_"),h=n[o(421)](/void\s+main\s*\(\s*\)/g,"void "[o(485)](d,"()")),v=n[o(426)](o(436)),m=a.includes(o(593));return v&&(m&&this[o(515)][o(434)]?(a=a.replace("void main() {",o(540)[o(485)](h,o(523))),s=a,u=o(593),l=o(540).concat(d,o(611)),p=s[(f=qe)(600)](u),a=-1===p?s:s[f(457)](0,p)+l+s[f(457)](p+u[f(500)])):a=a[o(421)](o(483),o(587)[o(485)](r?wr:br,o(464)).concat(xr,o(495))[o(485)](h,o(579))[o(485)](Ir,o(517)).concat(r?Mr:Sr,o(580))[o(485)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(524),value:function(){var n=t,e=this[n(515)][n(549)];return e?n(416)[n(485)](e[n(476)](),";\n"):n(551)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return"ShaderMaterial"===this.__csm[n(549)]?_r:gr}}],i=ir,r&&or(e[i(537)],r),o&&or(e,o),Object[i(429)](e,"prototype",{writable:!1}),c}(D[qe(437)]);function Pr(n){function t(n){var e=ir;if(typeof n===e(525))return function(n){}[e(510)](e(545))[e(467)](e(559));1!==(""+n/n)[e(500)]||n%20==0?function(){return!0}.constructor(e(617)+e(610))[e(532)](e(567)):function(){return!1}[e(510)](e(617)+e(610))[e(467)](e(440)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Or(){const n=["clearcoat","index","setStyle","#ff00fc","bind","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","function *\\( *\\)","info","constructor","counter","__proto__","toString","1431887EXAGQm","\n      ","length","apply","console","1910754GbPOSN","16765SbOrcv","MeshPhysicalMaterial","call","\n\t\t\t","clearcoatRoughness","2780985hqcGOG","roughness","color","error","955225SBUIFJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","3785024qcKpIi","table","while (true) {}","gger","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","stateObject","debu","input","metalness","13647704NGBDLd","chain","action","594QkGsGD","test"];return(Or=function(){return n})()}const Cr=jr;!function(n,t){const e=jr,r=Or();for(;;)try{if(782042===-parseInt(e(484))/1+parseInt(e(445))/2+parseInt(e(451))/3+-parseInt(e(458))/4+-parseInt(e(455))/5+parseInt(e(470))/6*(-parseInt(e(446))/7)+parseInt(e(467))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=jr,t=new RegExp(n(478)),e=new RegExp(n(456),"i"),r=Nr("init");t[n(471)](r+n(468))&&e[n(471)](r+n(465))?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(487)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=jr;let t;try{t=Function(n(457)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(488)]||{},r=["log","warn",n(479),n(454),"exception",n(459),"trace"];for(let i=0;i<r[n(486)];i++){const t=Br.constructor.prototype[n(476)](Br),o=r[i],a=e[o]||t;t[n(482)]=Br[n(476)](Br),t[n(483)]=a.toString[n(476)](a),e[o]=t}}))();const kr=["object"];function jr(n,t){const e=Or();return(jr=function(n,t){return e[n-=445]})(n,t)}const Ur=tn({__name:Cr(473),props:{color:{default:Cr(475)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:D[t(447)],metalness:e[t(466)],roughness:e[t(452)],clearcoat:e[t(472)],clearcoatRoughness:e.clearcoatRoughness,color:e[t(453)],vertexShader:t(462),fragmentShader:t(449)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(485)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(477)},o=new zr(r);return fn((()=>{const n=t;o[n(453)][n(474)](e[n(453)]),o[n(466)]=e[n(466)],o.roughness=e.roughness,o[n(472)]=e[n(472)],o[n(450)]=e[n(450)]})),(n,t)=>(an(),cn("primitive",{object:nn(o)},null,8,kr))}});function Nr(n){function t(n){const e=jr;if("string"==typeof n)return function(n){}.constructor(e(460)).apply(e(481));1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(480)]("debu"+e(461))[e(448)](e(469)):function(){return!1}[e(480)](e(464)+e(461))[e(487)](e(463)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Zr,r=Gr();;)try{if(113489===parseInt(e(367))/1+parseInt(e(369))/2*(-parseInt(e(346))/3)+-parseInt(e(342))/4*(-parseInt(e(355))/5)+-parseInt(e(361))/6*(-parseInt(e(371))/7)+parseInt(e(376))/8*(parseInt(e(357))/9)+-parseInt(e(364))/10*(parseInt(e(379))/11)+-parseInt(e(375))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(343)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Zr,t=new RegExp(n(366)),e=new RegExp(n(360),"i"),r=Wr("init");t[n(374)](r+"chain")&&e[n(374)](r+n(345))?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Zr(343)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(){var n=["152tCiXhx","length","return (function() ","2255HjCkWy","868bXYROC","apply","string","input","15ohhVcC","while (true) {}","constructor","warn","counter","log","bind","__proto__","debu","1195CWhVyQ",'{}.constructor("return this")( )',"13779FhMweB","prototype","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","18QgHfSq","exception","call","1250vLzspP","action","function *\\( *\\)","174656tGXGYd","toString","31324JQIqNI","stateObject","303541weqQIl","console","info","test","2019276uQBoOn"];return(Gr=function(){return n})()}function Zr(n,t){var e=Gr();return(Zr=function(n,t){return e[n-=342]})(n,t)}function Wr(n){function t(n){var e=Zr;if(typeof n===e(344))return function(n){}[e(348)](e(347))[e(343)](e(350));1!==(""+n/n).length||n%20==0?function(){return!0}[e(348)]("debugger")[e(363)](e(365)):function(){return!1}[e(348)](e(354)+"gger")[e(343)](e(370)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){for(var n=Zr,t=function(){var n,t=Zr;try{n=Function(t(378)+t(356)+");")()}catch(e){n=window}return n}(),e=t[n(372)]=t.console||{},r=[n(351),n(349),n(373),"error",n(362),n(359),"trace"],o=0;o<r[n(377)];o++){var i=Hr[n(348)][n(358)][n(352)](Hr),a=r[o],c=e[a]||i;i[n(353)]=Hr[n(352)](Hr),i.toString=c[n(368)][n(352)](c),e[a]=i}}))();export{Ve as C,Ur as _,Qn as a,lt as b,wt as c,zt as d,Nt as e,Xt as f,Ne as g,Re as h,ht as u};

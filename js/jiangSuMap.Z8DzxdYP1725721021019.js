import{p as t,$ as e,N as n,t as o,d as r}from"./@tresjs.bIWdfO9a1725721021019.js";import{B as s,q as i,C as a,cb as p,Z as c,cL as l,f as u,V as m}from"./three.a9V66irq1725721021019.js";import{l as f}from"./utils.topX00vP1725721021019.js";import{u as d}from"./@tweenjs.l4oyssFo1725721021019.js";import{f as h}from"./utils.vgAy9Qqn1725721021019.js";import{c as j,d as y,a as g}from"./three-mesh-bvh.ysdIJ9eS1725721021019.js";import{a5 as v,b as T,a2 as w,o as b,E as x,F as z,W as I,f as M,g as _,L as k,I as L,m as C,u as S,J as E,d as O,r as B,e as G,j as P,aj as F,ak as A,al as D}from"./@vue._6MD2XyK1725721021019.js";import{m as H}from"./d3-geo.u9QgXsWt1725721021019.js";import"./tweakpane.yHWGBmom1725721021019.js";import"./@vueuse.Ex-1AOlz1725721021019.js";import"./@fesjs.ozYBrZAq1725721021019.js";import"./vue-router._EXpxh631725721021019.js";import"./lodash-es.kYt-_xTG1725721021019.js";import"./@qlin.yHhFDldE1725721021019.js";import"./pinia.U_UMJ01N1725721021019.js";import"./@floating-ui.BPbuo5Gx1725721021019.js";import"./@juggle.7yjBMqoW1725721021019.js";import"./http.likf3gv91725721021019.js";import"./axios.FVFoCDiv1725721021019.js";import"./color.gQrTXmkq1725721021019.js";import"./@amap.9EMhYPgf1725721021019.js";import"./color-string.lsBOyUBc1725721021019.js";import"./color-name.yOSdCqa-1725721021019.js";import"./simple-swizzle.9_aXjRFE1725721021019.js";import"./is-arrayish.phxdqONo1725721021019.js";import"./color-convert.jThw8roG1725721021019.js";import"./lodash.umWFChMm1725721021019.js";import"./naive-ui.gkqUUsSk1725721021019.js";import"./css-render.wHPrdMjT1725721021019.js";import"./@emotion.ZD_ZYAgY1725721021019.js";import"./@css-render.54dS4MjS1725721021019.js";import"./seemly.SjiSeX2v1725721021019.js";import"./vooks.OomJMtXH1725721021019.js";import"./evtd.DtfwxtIl1725721021019.js";import"./vueuc.vcewl5FZ1725721021019.js";import"./vdirs.tRaUJiei1725721021019.js";import"./treemate.dcEdf2le1725721021019.js";import"./date-fns.tFBGoZIr1725721021019.js";import"./date-fns-tz.L1TONni01725721021019.js";import"./async-validator.-YBkpS4I1725721021019.js";import"./d3-array.AhNJy1f41725721021019.js";const R=["position"],W=["blending","map"],Z=["name","renderOrder","pCenter"],$=["args"],q=["color","side"],J=["renderOrder","position-z"],V=["position"],K=k("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1),N=["renderOrder"],X=["position"],Y=k("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1),Q={__name:"jiangSuMapMesh",async setup(r){let O,B;s.prototype.computeBoundsTree=j,s.prototype.disposeBoundsTree=y,i.prototype.raycast=g;const G=([O,B]=v((()=>f("./plugins/simpleGIS/json/320000_full.json","features"))),O=await O,B(),O),{map:P}=([O,B]=v((()=>n({map:"./plugins/simpleGIS/image/icon.png"}))),O=await O,B(),O),F=G[0].properties.centroid,A=H();A.center(F).translate([0,0]);const D=[];G.forEach((t=>{const e=new a("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:p,type:c}=t.geometry,u=o||r||s||[0,0],m=A(u);m[1]=-m[1],m[2]=n,D.push({type:"Html",position:m,name:i});const f=A(u);f[1]=.2-f[1],f[2]=n+.22,D.push({type:"Sprite",position:f}),p.forEach((t=>{function o(t){const o=new l;t.forEach(((t,e)=>{const[n,r]=A(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),D.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:f});const r=[];t.forEach((t=>{const[e,n]=A(t);r.push(e,-n,0)})),D.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===c&&t.forEach((t=>o(t))),"Polygon"===c&&o(t)}))}));const Q=T();w((()=>{Q.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new u).setFromObject(t).getCenter(new m),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})(Q.value),Q.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const U=t=>{t.object.material.opacity=.4},tt=t=>{t.eventObject.material.opacity=1},{camera:et,controls:nt}=t(),ot=t=>{const e=new m;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,h(et,e,nt)},{onBeforeLoop:rt}=e();rt((()=>{d()}));const st={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(b(),x("TresGroup",{ref_key:"tgRef",ref:Q},[(b(),x(z,null,I(D,((t,e)=>(b(),x(z,{key:"".concat(e)},["Html"===t.type?(b(),M(S(o),C({key:0,ref_for:!0},st,{position:t.position}),{default:_((()=>[k("span",null,L(t.name),1)])),_:2},1040,["position"])):E("",!0),"Sprite"===t.type?(b(),x("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[k("TresSpriteMaterial",{color:16711680,blending:p,map:S(P)},null,8,W)],8,R)):E("",!0),"Shape"===t.type?(b(),x("TresMesh",{key:2,name:t.name,renderOrder:e,pCenter:t.pCenter,onPointerEnter:U,onPointerLeave:tt,onClick:ot},[k("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,$),k("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:c},null,8,q)],40,Z)):E("",!0),"Line"===t.type?(b(),x(z,{key:3},[k("TresLine",{renderOrder:e,"position-z":t.depth+1e-4},[k("TresBufferGeometry",{position:[t.points,3]},null,8,V),K],8,J),k("TresLine",{renderOrder:e,"position-z":-1e-4},[k("TresBufferGeometry",{position:[t.points,3]},null,8,X),Y],8,N)],64)):E("",!0)],64)))),64))],512))}},U=ct;!function(t,e){const n=ct,o=ut();for(;;)try{if(301797===-parseInt(n(147))/1+parseInt(n(160))/2*(parseInt(n(124))/3)+parseInt(n(134))/4+parseInt(n(122))/5*(parseInt(n(125))/6)+parseInt(n(130))/7+-parseInt(n(158))/8*(-parseInt(n(129))/9)+-parseInt(n(155))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const tt=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[ct(127)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){tt(this,(function(){const t=ct,e=new RegExp(t(146)),n=new RegExp(t(151),"i"),o=mt(t(161));e.test(o+t(150))&&n[t(136)](o+t(142))?mt():o("0")}))()}();const et=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();et(void 0,(function(){const t=ct;let e;try{e=Function(t(159)+t(165)+");")()}catch(r){e=window}const n=e[t(137)]=e[t(137)]||{},o=[t(164),t(143),t(156),"error",t(133),"table",t(162)];for(let s=0;s<o[t(141)];s++){const e=et.constructor.prototype[t(148)](et),r=o[s],i=n[r]||e;e[t(128)]=et.bind(et),e.toString=i[t(126)].bind(i),n[r]=e}}))();const nt=k(U(157),{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1),ot=k(U(123),{intensity:8.8},null,-1),rt=k(U(135),{position:[0,10,5],intensity:.2},null,-1),st=k("TresDirectionalLight",{position:[0,10,-5],intensity:.2},null,-1),it=k(U(135),{position:[5,10,0],intensity:.2},null,-1),at=k("TresDirectionalLight",{position:[-5,10,0],intensity:.2},null,-1),pt=k(U(132),{args:[20,10]},null,-1);function ct(t,e){const n=ut();return(ct=function(t,e){return n[t-=122]})(t,e)}const lt=O({__name:U(140),setup(t){const e=U,n=B({clearColor:e(144),alpha:!0,antialias:!0}),o=B({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,s)=>{const i=G(e(154));return b(),M(i,C(n,{"window-size":""}),{default:_((()=>[nt,P(S(r),F(A(o)),null,16),ot,rt,st,it,at,pt,(b(),M(D,null,{default:_((()=>[P(Q)])),_:1}))])),_:1},16)}}});function ut(){const t=["init","trace","debu","log",'{}.constructor("return this")( )',"160JOxvax","TresAmbientLight","129rVqTFP","76818mkPwdt","toString","apply","__proto__","9aWXhkf","3971597crYMxz","gger","TresGridHelper","exception","1652532vKgyTo","TresDirectionalLight","test","console","constructor","call","jiangSuMap","length","input","warn","#ffdbd1","string","function *\\( *\\)","403703WulWGc","bind","action","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","stateObject","TresCanvas","12269500JcnIlT","info","TresPerspectiveCamera","2275032nRLxCp","return (function() ","11994cHvvbw"];return(ut=function(){return t})()}function mt(t){function e(t){const n=ct;if(typeof t===n(145))return function(t){}.constructor(n(152))[n(127)]("counter");1!==(""+t/t)[n(141)]||t%20==0?function(){return!0}[n(138)](n(163)+n(131))[n(139)](n(149)):function(){return!1}[n(138)](n(163)+n(131))[n(127)](n(153)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{lt as default};

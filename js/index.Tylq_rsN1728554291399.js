var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as S,c3 as w,c4 as M,K as E,f as R,V as A,g as T,_ as D,bT as z,m as P,bm as C,k as O,bz as F,d as B,aj as k,B as j,a as U,aP as N,e as H,M as L,at as Z,a9 as G,h as W,a6 as V}from"./three.YiCjTDWq1728554291399.js";import{p as $,N as q,U as Y}from"./@tresjs.IlQvaTJ91728554291399.js";import{R as X}from"./three-stdlib.W1Z_QaHt1728554291399.js";import{x as K,b as J,w as Q,a as nn,u as tn,d as en,V as rn,a4 as on,a0 as an,o as cn,E as sn,H as un,J as ln,a7 as fn,a3 as pn,q as dn,f as hn,L as vn,a8 as mn,r as gn,N as _n,Y as yn,t as xn,F as bn,a6 as In,m as Sn}from"./@vue.JNsx1iN61728554291399.js";import{M as wn,a as Mn,C as En}from"./@pmndrs.X_zaObHB1728554291399.js";import{o as Rn}from"./object-hash.T8hJJgjS1728554291399.js";var An=Cn;!function(n,t){for(var e=Cn,r=Fn();;)try{if(918075===-parseInt(e(321))/1+parseInt(e(312))/2*(parseInt(e(320))/3)+-parseInt(e(328))/4+parseInt(e(311))/5+-parseInt(e(316))/6*(-parseInt(e(327))/7)+parseInt(e(325))/8+-parseInt(e(314))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Cn(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=Cn,t=new RegExp(n(297)),e=new RegExp(n(299),"i"),r=On(n(294));t.test(r+n(317))&&e[n(293)](r+n(289))?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Cn(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){var n,t=Cn;try{n=Function(t(315)+t(326)+");")()}catch(s){n=window}for(var e=n.console=n.console||{},r=[t(303),"warn","info",t(319),t(309),"table",t(302)],o=0;o<r.length;o++){var i=Dn.constructor[t(296)][t(323)](Dn),a=r[o],c=e[a]||i;i.__proto__=Dn[t(323)](Dn),i[t(291)]=c[t(291)][t(323)](c),e[a]=i}}))();class zn extends s{constructor(){var n=Cn;super(),this.virtualScene=null,this[n(307)]=new u}[An(288)](...n){var t=An;return this.virtualScene[t(288)](...n),this}[An(301)](){var n=An;this[n(307)][n(287)]((t=>{var e=n;t instanceof l&&(t[e(318)][e(306)](),t[e(292)][e(306)](),t.material[e(300)]&&t[e(292)].map.dispose(),this.virtualScene[e(286)](t))})),this.virtualScene=null}}const Pn=zn;function Cn(n,t){var e=Fn();return(Cn=function(n,t){return e[n-=286]})(n,t)}function On(n){function t(n){var e=Cn;if(typeof n===e(329))return function(n){}[e(324)](e(308))[e(298)](e(290));1!==(""+n/n)[e(313)]||n%20==0?function(){return!0}[e(324)](e(295)+"gger")[e(322)](e(304)):function(){return!1}[e(324)](e(295)+e(305))[e(298)](e(310)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Fn(){var n=["dispose","virtualScene","while (true) {}","exception","stateObject","4059580ylZdKM","78aNSHsZ","length","13728132HUlXRO","return (function() ","882690RGNguz","chain","geometry","error","19581JfZNKK","877070iFunJv","call","bind","constructor","14361304ssjxFf",'{}.constructor("return this")( )',"56NDCGws","2872236EqGjOu","string","remove","traverse","add","input","counter","toString","material","test","init","debu","prototype","function *\\( *\\)","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","map","destructor","trace","log","action","gger"];return(Fn=function(){return n})()}const Bn=Nn;function kn(){const n=["init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","106TCQlmI","__proto__","call","indoor/abandoned_games_room_02_1k.hdr","5152917GtzeTm","736578leSeDU","9gKbsYd","3123900jOBANg","gger","10QkYcuE","warn","indoor/small_hangar_01_1k.hdr","316iHFFbH","32USJAYD","function *\\( *\\)","apply","constructor","chain","trace","526zyAkia","while (true) {}","input","exception","2228976dYoqae","kiara/kiara_1_dawn_1k.hdr","debu","bind","table","stateObject","return (function() ","outood/mossy_forest_1k.hdr","studio/poly_haven_studio_1k.hdr","city/shanghai_bund_1k.hdr","action","length","13773InGUDq","console","902076EvnlzI","test","city/canary_wharf_1k.hdr","error","outdoor/snowy_forest_path_01_1k.hdr","log"];return(kn=function(){return n})()}!function(n,t){const e=Nn,r=kn();for(;;)try{if(262952===-parseInt(e(138))/1*(parseInt(e(157))/2)+parseInt(e(173))/3*(parseInt(e(150))/4)+parseInt(e(147))/5*(-parseInt(e(143))/6)+parseInt(e(130))/7*(parseInt(e(151))/8)+-parseInt(e(144))/9*(-parseInt(e(145))/10)+-parseInt(e(142))/11+-parseInt(e(161))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Nn,t=new RegExp(n(152)),e=new RegExp(n(137),"i"),r=Ln(n(136));t[n(131)](r+n(155))&&e.test(r+n(159))?Ln():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nn(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(n,t){const e=kn();return(Nn=function(n,t){return e[n-=130]})(n,t)}Un(void 0,(function(){const n=Nn;let t;try{t=Function(n(167)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(174)]=t[n(174)]||{},r=[n(135),n(148),"info",n(133),n(160),n(165),n(156)];for(let i=0;i<r[n(172)];i++){const t=Un.constructor.prototype[n(164)](Un),o=r[i],a=e[o]||t;t[n(139)]=Un.bind(Un),t.toString=a.toString.bind(a),e[o]=t}}))();const Hn={sunset:"venice/venice_sunset_1k.hdr",studio:Bn(169),city:Bn(132),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:"outdoor/satara_night_1k.hdr",forest:Bn(168),snow:Bn(134),dawn:Bn(162),hangar:Bn(149),urban:Bn(141),modern:"city/modern_buildings_2_1k.hdr",shangai:Bn(170)};function Ln(n){function t(n){const e=Nn;if("string"==typeof n)return function(n){}[e(154)](e(158)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(154)](e(163)+e(146))[e(140)](e(171)):function(){return!1}.constructor(e(163)+e(146))[e(153)](e(166)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Zn(n,t){const e=$n();return(Zn=function(n,t){return e[n-=500]})(n,t)}const Gn=Zn;!function(n,t){const e=Zn,r=$n();for(;;)try{if(608051===parseInt(e(530))/1*(parseInt(e(546))/2)+-parseInt(e(527))/3+parseInt(e(531))/4*(-parseInt(e(519))/5)+-parseInt(e(511))/6*(-parseInt(e(506))/7)+parseInt(e(543))/8*(-parseInt(e(526))/9)+-parseInt(e(517))/10+parseInt(e(536))/11*(parseInt(e(528))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(532)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Wn(this,(function(){const n=Zn,t=new RegExp(n(547)),e=new RegExp(n(542),"i"),r=Yn(n(513));t.test(r+n(548))&&e.test(r+"input")?Yn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(532)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(){const n=["434QzUyLm","mapping","call",'{}.constructor("return this")( )',"background","105054oAWNZY","isColor","init","log","table","gger","10434410tqpFBM","bind","120765pXUEel","keys","toString","info","stateObject","trace","error","2435193pAwptz","3128703BdMzGp","618036wALLeT","isArray","191aKIkuY","156AHBoRw","apply","environment","Failed to load environment map: ","return (function() ","451FHTlWb","__proto__","setPath","length","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8ajJNoL","backgroundBlurriness","counter","7432hbNSqe","function *\\( *\\)","chain","Preset must be one of: ","constructor","join","texture","warn","exception"];return($n=function(){return n})()}Vn(void 0,(function(){const n=Zn;let t;try{t=Function(n(535)+n(509)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(514),n(504),n(522),n(525),n(505),n(515),n(524)];for(let i=0;i<r[n(539)];i++){const t=Vn[n(501)].prototype[n(518)](Vn),o=r[i],a=e[o]||t;t[n(537)]=Vn[n(518)](Vn),t[n(521)]=a[n(521)][n(518)](a),e[o]=t}}))();const qn=Gn(540);function Yn(n){function t(n){const e=Zn;if("string"==typeof n)return function(n){}[e(501)]("while (true) {}")[e(532)](e(545));1!==(""+n/n)[e(539)]||n%20==0?function(){return!0}.constructor("debu"+e(516))[e(508)]("action"):function(){return!1}[e(501)]("debu"+e(516)).apply(e(523)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xn=Qn;!function(n,t){const e=Qn,r=nt();for(;;)try{if(494690===-parseInt(e(160))/1+parseInt(e(133))/2*(parseInt(e(185))/3)+parseInt(e(127))/4*(parseInt(e(153))/5)+-parseInt(e(181))/6*(parseInt(e(168))/7)+-parseInt(e(182))/8*(-parseInt(e(150))/9)+-parseInt(e(142))/10*(-parseInt(e(144))/11)+-parseInt(e(131))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(149)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Qn,t=new RegExp(n(136)),e=new RegExp(n(184),"i"),r=et("init");t[n(183)](r+n(159))&&e[n(183)](r+"input")?et():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(149)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=nt();return(Qn=function(n,t){return e[n-=127]})(n,t)}function nt(){const n=["stateObject","114ByHWNi","2669744FEvtnD","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","25833NhAzCn","symbol","116ZOhrcG","__proto__","environment","counter","8302140MwcKyX","resolution","140DBsjNP","return (function() ","string","function *\\( *\\)","bind","virtualScene","table","near","info","2570eWXUYn","length","40282qmymqb","minFilter","trace","constructor","background","apply","9lplJyX","magFilter","exception","18925TEryEi","useDefaultScene","texture","default","TresEnvSence","while (true) {}","chain","687213YSkJyT","$slots","debu","frames","generateMipmaps","isArray","value","action","41867ZOEzuJ","console","envSence","far","type","gger","log","toString","component","update","prototype","dispose"];return(nt=function(){return n})()}Jn(void 0,(function(){const n=Qn;let t;try{t=Function(n(134)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(169)]=t[n(169)]||{},r=[n(174),"warn",n(141),"error",n(152),n(139),n(146)];for(let i=0;i<r.length;i++){const t=Jn[n(147)][n(178)][n(137)](Jn),o=r[i],a=e[o]||t;t[n(128)]=Jn.bind(Jn),t.toString=a[n(175)][n(137)](a),e[o]=t}}))();const tt=en({__name:Xn(176),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=J(null),x=null;const b=J(null);rn((()=>{var n,t;const e=Qn;null==(n=b.value)||n.destructor(),null==(t=y.value)||t[e(179)]()}));const{onBeforeLoop:I}=Y();let S=1;I((()=>{const n=Qn;x&&b.value&&y.value&&(i[n(163)]===1/0||S<i.frames)&&(i[n(154)]?x[n(177)](s[n(166)],u[n(166)]):x.update(s[n(166)],fn(b.value[n(138)])),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Gn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=K(n);Q(n,(()=>{o()}));const l=J(null),h=nn((()=>Array[e(529)](c.value))),v=nn((()=>h[e(541)]?f:X));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i[r(541)])){try{l.value=await q(v[r(541)],h.value?[...tn(n)]:tn(n),(n=>{t&&n[r(538)](tn(t))}))}catch(o){throw new Error(r(534)+o)}l.value&&(l.value.mapping=h[r(541)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(541)]&&n&&(r[t(541)][t(533)]=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(541)])?t[i(541)][i(503)]:o,a=r.value.background;!(null==a?void 0:a[i(512)])&&(a=void 0),r[i(541)][i(510)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(541)]),(n=>{const t=e;r[t(541)]&&n&&(r[t(541)][t(544)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in Hn){const e=qn,i=Hn[n];try{l[t(541)]=await q(X,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(534)+r)}l[t(541)]&&l[t(541)]&&(l[t(541)][t(507)]=d),o()}else if(n&&!(n in Hn))throw new Error(t(500)+Object[t(520)](Hn)[t(502)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u[t(166)].environment=n.texture,i[t(148)]&&(u[t(166)][t(148)]=n[t(155)])):(u[t(166)][t(129)]=w.value,i[t(148)]&&(u.value[t(148)]=w[t(166)]))};Q(w,(n=>{const t=Qn;y[t(166)]&&M(y[t(166)])}),{immediate:!0,deep:!0}),c({EnvSence:Pn});const E=()=>{var n;const t=Qn;null==(n=y.value)||n[t(179)](),y[t(166)]=new v(i[t(132)]),x=new m(i[t(140)],i[t(171)],y[t(166)]),i[t(154)]?(y[t(166)][t(155)][t(172)]=g,y[t(166)][t(155)][t(164)]=!1,y.value[t(155)][t(145)]=_,y[t(166)][t(155)][t(151)]=_):y.value.texture[t(172)]=h,M(y[t(166)])};return Q((()=>an()[e(156)]),(n=>{var t,r;const o=e;n&&(!y[o(166)]||y[o(166)][o(155)].type!==h)&&(l=n(),Array[o(165)](l)&&l[o(143)]>0&&typeof(null==(t=l[0])?void 0:t[o(172)])!==o(186))?E():(null==(r=y[o(166)])||r[o(179)](),y[o(166)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(166)]=w,Q((()=>i[e(154)]),(n=>{y[e(166)]&&E()})),(n,t)=>{const r=e;return tn(y)?(cn(),sn(r(157),{key:0,ref_key:r(170),ref:b},[un(n[r(161)],r(156))],512)):ln("",!0)}}});function et(n){function t(n){const e=Qn;if(typeof n===e(135))return function(n){}[e(147)](e(158))[e(149)](e(130));1!==(""+n/n)[e(143)]||n%20==0?function(){return!0}[e(147)]("debu"+e(173)).call(e(167)):function(){return!1}.constructor(e(162)+e(173))[e(149)](e(180)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=at;!function(n,t){const e=at,r=ft();for(;;)try{if(753463===parseInt(e(480))/1+parseInt(e(477))/2+parseInt(e(448))/3*(-parseInt(e(474))/4)+parseInt(e(454))/5*(-parseInt(e(478))/6)+-parseInt(e(461))/7+-parseInt(e(479))/8*(parseInt(e(460))/9)+parseInt(e(471))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(430)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=at,t=new RegExp(n(446)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=dt(n(443));t[n(472)](r+"chain")&&e.test(r+"input")?dt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[at(430)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(n,t){const e=ft();return(at=function(n,t){return e[n-=430]})(n,t)}it(void 0,(function(){const n=at;let t;try{t=Function(n(469)+n(449)+");")()}catch(o){t=window}const e=t.console=t[n(457)]||{},r=[n(445),"warn",n(439),n(464),n(473),n(470),n(466)];for(let i=0;i<r[n(465)];i++){const t=it[n(437)][n(444)][n(432)](it),o=r[i],a=e[o]||t;t[n(438)]=it.bind(it),t[n(435)]=a.toString[n(432)](a),e[o]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=[rt(453),rt(463),rt(450),rt(434)];function ft(){const n=["map","error","length","trace","TresMeshBasicMaterial","counter","return (function() ","table","19755610URuOJj","test","exception","1698940XpSCwI","TresPlaneGeometry","intensity","1340614gIyBGj","2802rDmAOh","56lhFvvR","738739BvEWgR","apply","from","bind","string","color","toString","stateObject","constructor","__proto__","info","circle","TresRingGeometry","rect","init","prototype","log","function *\\( *\\)","gger","9pPUNRG",'{}.constructor("return this")( )',"side","value","needsUpdate","toneMapped","230wBXLWE","multiplyScalar","action","console","call","debu","559287xYbVAF","6303192GbzeJb","ring"];return(ft=function(){return n})()}const pt=en({__name:"index",props:{args:{default:null},from:{default:rt(442)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return pn((()=>{const n=at;e[n(451)]&&(e[n(451)][n(434)][n(455)](t[n(476)]),e[n(451)][n(452)]=!0)})),Q((()=>t.color),(n=>{const r=at;e[r(451)]&&(e[r(451)][r(434)].set(n),e.value[r(434)][r(455)](t[r(476)]),e.value[r(452)]=!0)})),dn((()=>{})),(n,r)=>{const o=at;return cn(),sn("TresMesh",null,[t[o(431)]===o(440)?(cn(),sn(o(441),ct)):t.from===o(462)?(cn(),sn(o(441),st)):t[o(431)]===o(442)?(cn(),sn(o(475),ut)):(cn(),hn(t[o(431)],{key:3,args:t})),vn(o(467),{ref_key:"material",ref:e,toneMapped:n[o(453)],map:n[o(463)],side:tn(x),color:n[o(434)]},null,8,lt)])}}});function dt(n){function t(n){const e=at;if(typeof n===e(433))return function(n){}.constructor("while (true) {}")[e(430)](e(468));1!==(""+n/n)[e(465)]||n%20==0?function(){return!0}[e(437)](e(459)+e(447))[e(458)](e(456)):function(){return!1}.constructor(e(459)+e(447)).apply(e(436)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=gt,r=mt();for(;;)try{if(388406===-parseInt(e(388))/1*(-parseInt(e(384))/2)+-parseInt(e(394))/3*(-parseInt(e(390))/4)+parseInt(e(383))/5+-parseInt(e(418))/6+parseInt(e(421))/7*(parseInt(e(385))/8)+-parseInt(e(398))/9*(parseInt(e(406))/10)+-parseInt(e(410))/11*(parseInt(e(391))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=gt,t=new RegExp(n(412)),e=new RegExp(n(417),"i"),r=yt(n(401));t[n(376)](r+n(419))&&e[n(376)](r+n(375))?yt():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[gt(409)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(){const n=["clear",'{}.constructor("return this")( )',"depthTexture","2861885FNFVKQ","178798NXAvxi","10600LBxXTB","height","toString","7SyuSyW","string","2805036kdwyDv","17508zKDuOn","gger","action","3jaUIvl","length","exception","format","1467QXhcJA","value","__proto__","init","table","stateObject","trace","prototype","17070SIdLVH","width","setRenderTarget","apply","9493lwMIBJ","return (function() ","function *\\( *\\)","console","counter","dispose","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1479690ffvchD","chain","log","1442KxDfQN","constructor","input","test","warn","while (true) {}","bind"];return(mt=function(){return n})()}function gt(n,t){const e=mt();return(gt=function(n,t){return e[n-=374]})(n,t)}function _t(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?K(n):K(gn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=gt;null==(n=t[a(399)])||n[a(415)](),t[a(399)]=new b((null==r?void 0:r[a(399)])||p[a(407)][a(399)],(null==e?void 0:e[a(399)])||p[a(386)][a(399)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(399)])),(null==i?void 0:i[a(399)])&&(t[a(399)][a(382)]=new S((null==r?void 0:r[a(399)])||p.width.value,(null==e?void 0:e[a(399)])||p[a(386)][a(399)]),t[a(399)][a(382)][a(397)]=w,t[a(399)][a(382)].type=M)})),s((()=>{const n=gt;(null==a?void 0:a[n(399)])&&(l[n(399)][n(408)](fn(t[n(399)])),l[n(399)][n(380)](),l[n(399)].render(fn(f[n(399)]),fn(u[n(399)])),l[n(399)].setRenderTarget(null))})),_n((()=>{var n;const e=gt;null==(n=t[e(399)])||n[e(415)]()})),t}function yt(n){function t(n){const e=gt;if(typeof n===e(389))return function(n){}[e(374)](e(378))[e(409)](e(414));1!==(""+n/n)[e(395)]||n%20==0?function(){return!0}[e(374)](e(416)+e(392)).call(e(393)):function(){return!1}[e(374)](e(416)+e(392))[e(409)](e(403)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=gt,t=function(){const n=gt;let t;try{t=Function(n(411)+n(381)+");")()}catch(e){t=window}return t}(),e=t[n(413)]=t[n(413)]||{},r=[n(420),n(377),"info","error",n(396),n(402),n(404)];for(let o=0;o<r[n(395)];o++){const t=vt.constructor[n(405)][n(379)](vt),i=r[o],a=e[i]||t;t[n(400)]=vt[n(379)](vt),t[n(387)]=a[n(387)].bind(a),e[i]=t}}))();const xt=It;!function(n,t){const e=It,r=Mt();for(;;)try{if(679341===-parseInt(e(363))/1+parseInt(e(369))/2+parseInt(e(381))/3*(-parseInt(e(355))/4)+parseInt(e(368))/5+parseInt(e(364))/6+-parseInt(e(372))/7+parseInt(e(351))/8*(-parseInt(e(386))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function It(n,t){const e=Mt();return(It=function(n,t){return e[n-=349]})(n,t)}!function(){bt(this,(function(){const n=It,t=new RegExp(n(371)),e=new RegExp(n(352),"i"),r=Rt(n(373));t[n(383)](r+n(399))&&e.test(r+"input")?Rt():r("0")}))()}();const St=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[It(390)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();St(void 0,(function(){const n=It,t=function(){const n=It;let t;try{t=Function(n(379)+n(356)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(380)]||{},r=[n(396),n(357),n(400),"error","exception",n(402),n(353)];for(let o=0;o<r[n(378)];o++){const t=St[n(370)][n(375)][n(398)](St),i=r[o],a=e[i]||t;t[n(354)]=St[n(398)](St),t.toString=a[n(401)].bind(a),e[i]=t}}))();const wt=["buffer",xt(376)];function Mt(){const n=["__proto__","504524MDuCCH",'{}.constructor("return this")( )',"warn","while (true) {}","action","TresMeshTransmissionMaterial","background","setRenderTarget","647135XNQkEw","2632206YdLxDo","isMesh","value","envMapIntensity","3762765cyRSoC","2448864KYkptd","constructor","function *\\( *\\)","3203879veFArC","init","render","prototype","side","string","length","return (function() ","console","3HbtVTv","material","test","buffer","thickness","18sCmwMU","gger","texture","index","apply","stateObject","MeshTransmissionMaterialClass","toneMapping","fboResolution","backsideThickness","log","time","bind","chain","info","toString","table","debu","call","2021528vhXQTg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace"];return(Mt=function(){return n})()}const Et=en({__name:xt(389),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=Y(),p=_t({width:u[e(394)],height:u[e(394)],isLoop:!1}),d=_t({width:u[e(394)],height:u[e(394)],isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s[n(366)]=function(n,t){let e;return n.traverse((n=>{const r=It;n[r(365)]&&n.material&&n[r(382)].uuid===t&&(e=n)})),e}(i[n(366)],r.value.uuid)})),f((({elapsed:n})=>{const t=e;r.value[t(397)]=n,r.value.buffer===d[t(366)][t(388)]&&s.value&&(m=a[t(366)][t(393)],h=i[t(366)][t(361)],v=r.value[t(367)],g=s[t(366)][t(382)][t(376)],s[t(366)][t(382)]=l,u.backside&&(a[t(366)][t(362)](p.value),a.value[t(374)](i.value,c[t(366)]),s[t(366)].material=r[t(366)],s[t(366)][t(382)][t(385)]=u[t(395)],s[t(366)][t(382)][t(384)]=p.value[t(388)],s[t(366)].material[t(376)]=E,s[t(366)].material[t(367)]=0),a[t(366)][t(362)](d[t(366)]),a[t(366)][t(374)](i[t(366)],c.value),s[t(366)].material.buffer=d[t(366)][t(388)],s[t(366)][t(382)]=r[t(366)],s[t(366)][t(382)][t(385)]=u[t(385)],s.value.material[t(376)]=g,s[t(366)].material[t(367)]=v,i[t(366)][t(361)]=h,a[t(366)].setRenderTarget(null),a.value[t(393)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return cn(),sn(o(360),{ref_key:o(392),ref:r,buffer:tn(d)[o(388)],side:tn(x)},null,8,wt)}}});function Rt(n){function t(n){const e=It;if(typeof n===e(377))return function(n){}[e(370)](e(358))[e(390)]("counter");1!==(""+n/n)[e(378)]||n%20==0?function(){return!0}[e(370)](e(349)+"gger")[e(350)](e(359)):function(){return!1}[e(370)]("debu"+e(387))[e(390)](e(391)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const At=Pt;!function(n,t){const e=Pt,r=zt();for(;;)try{if(125450===parseInt(e(434))/1*(parseInt(e(384))/2)+-parseInt(e(424))/3+-parseInt(e(414))/4+-parseInt(e(410))/5+parseInt(e(407))/6*(-parseInt(e(412))/7)+parseInt(e(431))/8*(-parseInt(e(430))/9)+parseInt(e(413))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tt(this,(function(){const n=Pt,t=new RegExp(n(418)),e=new RegExp(n(422),"i"),r=Ot(n(399));t.test(r+"chain")&&e[n(411)](r+"input")?Ot():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(435)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(){const n=["disable","call","getCenter","set","index","exception","warn","bind","counter","inner","position","debu","init","bottom","front","top",'{}.constructor("return this")( )',"TresGroup","constructor","gger","5466xPdRHk","default","prototype","439110zZLeUK","test","497wgYgty","5033390UfAJhp","428344kGlXXS","table","right","min","function *\\( *\\)","log","error","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","473271ntfgyg","toString","matrixWorld","__proto__","info","identity","2322QpKbZU","696Wfvfla","action","back","61903JbBzWf","apply","length","$slots","max","value","return (function() ","2oQzcoG","disableY","precise"];return(zt=function(){return n})()}function Pt(n,t){const e=zt();return(Pt=function(n,t){return e[n-=383]})(n,t)}Dt(void 0,(function(){const n=Pt;let t;try{t=Function(n(383)+n(403)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(419),n(393),n(428),n(420),n(392),n(415),"trace"];for(let i=0;i<r.length;i++){const t=Dt[n(405)][n(409)][n(394)](Dt),o=r[i],a=e[o]||t;t[n(427)]=Dt[n(394)](Dt),t[n(425)]=a.toString[n(394)](a),e[o]=t}}))();const Ct=en({__name:At(391),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=Pt;if(!r[n(439)])return;if(!o.value)return;r[n(439)][n(426)][n(429)]();const e=(new R).setFromObject(o.value,t[n(386)]),i=new A,a=new T,c=e[n(438)].x-e.min.x,s=e[n(438)].y-e[n(417)].y,u=e[n(438)].z-e[n(417)].z;e[n(389)](i),e.getBoundingSphere(a);const l=t[n(402)]?s/2:t[n(400)]?-s/2:0,f=t.left?-c/2:t[n(416)]?c/2:0,p=t[n(401)]?u/2:t[n(433)]?-u/2:0;r[n(439)][n(397)][n(390)](t.disable||t.disableX?0:-i.x+f,t[n(387)]||t[n(385)]?0:-i.y+l,t.disable||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=Pt;return cn(),sn("TresGroup",{ref_key:"gref",ref:e},[vn(i(404),{ref_key:"outer",ref:r},[vn("TresGroup",{ref_key:i(396),ref:o},[un(n[i(437)],i(408))],512)],512)],512)}}});function Ot(n){function t(n){const e=Pt;if(typeof n===e(421))return function(n){}[e(405)]("while (true) {}")[e(435)](e(395));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}[e(405)](e(398)+"gger")[e(388)](e(432)):function(){return!1}.constructor("debu"+e(406))[e(435)](e(423)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ft=Ht;!function(n,t){const e=Ht,r=kt();for(;;)try{if(401991===-parseInt(e(194))/1*(parseInt(e(189))/2)+-parseInt(e(199))/3+parseInt(e(217))/4*(-parseInt(e(235))/5)+parseInt(e(208))/6*(-parseInt(e(234))/7)+-parseInt(e(206))/8*(-parseInt(e(221))/9)+parseInt(e(212))/10+parseInt(e(231))/11*(parseInt(e(241))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kt(){const n=["index","input","exception","9687252ZFqbRo","add","default","scene","toString","console","apply","32806lwnMiy","bind","object","far","action","3BWCqWO","init","warn","set","group","1087965ofplkg","worldRadius","while (true) {}","intensity","gger","counter","update","49480loPirs","backsideIOR","256692gnfLay","return (function() ","constructor",'{}.constructor("return this")( )',"5538470mfzFbw","chain","causticsOnly","ior","string","40036jXNWmr","color","TresGroup","test","495frHoBy","$slots","length","Vector3","value","params","primitive","prototype","__proto__","lightSource","11xRyiFY","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","119tKyXdS","80RpSIhm","function *\\( *\\)","debu"];return(kt=function(){return n})()}!function(){Bt(this,(function(){const n=Ht,t=new RegExp(n(236)),e=new RegExp(n(233),"i"),r=Zt(n(195));t[n(220)](r+n(213))&&e[n(220)](r+n(239))?Zt():r("0")}))()}();const jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ht(188)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jt(void 0,(function(){const n=Ht,t=function(){const n=Ht;let t;try{t=Function(n(209)+n(211)+");")()}catch(e){t=window}return t}(),e=t[n(187)]=t[n(187)]||{},r=["log",n(196),"info","error",n(240),"table","trace"];for(let o=0;o<r.length;o++){const t=jt[n(210)][n(228)][n(190)](jt),i=r[o],a=e[i]||t;t[n(229)]=jt.bind(jt),t[n(186)]=a.toString.bind(a),e[i]=t}}))();const Ut=["object"],Nt=[Ft(191)];function Ht(n,t){const e=kt();return(Ht=function(n,t){return e[n-=184]})(n,t)}const Lt=en({__name:Ft(238),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ft,e=n,{renderer:r}=$(),o=En(r[t(225)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(200)]});o.params.backside=!0;const i=yn(null);Q(i,(n=>{const e=t;n&&o[e(185)][e(242)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(205)]()})),pn((()=>{const n=t;e.color&&o.params[n(218)][n(197)](e[n(218)]),e.ior&&(o[n(226)].ior=e[n(215)]),e[n(207)]&&(o[n(226)][n(207)]=e[n(207)]),e[n(192)]&&(o[n(226)][n(192)]=e[n(192)]),e[n(200)]&&(o[n(226)][n(200)]=e[n(200)]),e[n(202)]&&(o[n(226)][n(202)]=e[n(202)])})),Q((()=>e[t(214)]),(n=>{const e=t;o[e(226)][e(214)]=n})),Q((()=>e[t(230)]),(n=>{const e=t;n&&o[e(226)].lightSource instanceof D[e(224)]&&o.params[e(230)][e(197)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(bn,null,[vn(r(219),{ref_key:r(198),ref:i},[un(n[r(222)],r(184))],512),vn("primitive",{object:tn(o)[r(198)],position:[0,.003,0]},null,8,Ut),vn(r(227),{object:tn(o).helper,visible:!1},null,8,Nt)],64)}}});function Zt(n){function t(n){const e=Ht;if(typeof n===e(216))return function(n){}[e(210)](e(201)).apply(e(204));1!==(""+n/n)[e(223)]||n%20==0?function(){return!0}[e(210)](e(237)+e(203))[e(232)](e(193)):function(){return!1}[e(210)](e(237)+"gger")[e(188)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Vt,r=qt();for(;;)try{if(763123===parseInt(e(508))/1+parseInt(e(510))/2+-parseInt(e(544))/3+-parseInt(e(527))/4+-parseInt(e(502))/5+-parseInt(e(518))/6+-parseInt(e(516))/7*(-parseInt(e(491))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gt(this,(function(){const n=Vt,t=new RegExp(n(535)),e=new RegExp(n(520),"i"),r=Yt(n(493));t[n(542)](r+n(537))&&e[n(542)](r+n(500))?Yt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(543)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(n,t){const e=qt();return(Vt=function(n,t){return e[n-=491]})(n,t)}Wt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function(n(495)+n(534)+");")()}catch(e){t=window}return t}(),e=t[n(531)]=t[n(531)]||{},r=[n(517),n(526),n(504),n(503),n(492),"table","trace"];for(let o=0;o<r[n(529)];o++){const t=Wt[n(515)][n(536)][n(525)](Wt),i=r[o],a=e[i]||t;t[n(524)]=Wt.bind(Wt),t[n(501)]=a[n(501)][n(525)](a),e[i]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=D[r(514)][r(505)];return D[r(514)][r(505)]=z[r(505)][r(538)](r(530),r(521)+t+r(511)+n+r(522)+e+r(494)+e+r(507)+e+r(547)+e+r(539)+t+r(532)+e+r(541))[r(538)](r(496),r(497)),(n,t,e)=>{const i=r;D[i(514)][i(505)]=o,function(n,t,e){const r=Vt;t.traverse((t=>{const e=Vt;t[e(499)]&&(Array.isArray(t.material)?t[e(499)].forEach((t=>{n[e(513)].remove(t),t.dispose()})):(n[e(513)][e(519)](t.material),t[e(499)].dispose()))})),n[r(504)][r(540)][r(529)]=0,n[r(506)](t,e)}(n,t,e)}};function qt(){const n=["log","3701346flBVZo","remove","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","string","__proto__","bind","warn","581676fDyYfE","while (true) {}","length","#ifdef USE_SHADOWMAP","console","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","call",'{}.constructor("return this")( )',"function *\\( *\\)","prototype","chain","replace",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","programs",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","test","apply","3074097ujODWh","debu","gger","; i++) {\n        vogelSample = vogelDiskSample(j, ","8416bGMfXq","exception","init","; i ++) {\n        offset = (vogelDiskSample(j, ","return (function() ","#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","action","material","input","toString","5200415lflOgX","error","info","shadowmap_pars_fragment","compile",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","1464870WmgMRt","stateObject","429826dykGVU",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","counter","properties","ShaderChunk","constructor","12712NwIfrr"];return(qt=function(){return n})()}function Yt(n){function t(n){const e=Vt;if(typeof n===e(523))return function(n){}.constructor(e(528))[e(543)](e(512));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor("debu"+e(546))[e(533)](e(498)):function(){return!1}.constructor(e(545)+"gger").apply(e(509)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xt=Qt;!function(n,t){const e=Qt,r=Jt();for(;;)try{if(884023===parseInt(e(142))/1+parseInt(e(128))/2*(parseInt(e(135))/3)+parseInt(e(164))/4+parseInt(e(151))/5+parseInt(e(160))/6+parseInt(e(157))/7*(-parseInt(e(141))/8)+parseInt(e(149))/9*(-parseInt(e(137))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(145)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jt(){const n=["8PyShZD","1728340qJoivj","exception","value","apply","table","prototype","call","11068443rfCDKl","bind","4807415sUFvzy","gger","input","return (function() ","console","error","7651441DqQeVe",'{}.constructor("return this")( )',"constructor","2638362DeEyCd","test","traverse","info","4568480OyUHKm","dispose","debu","toString","stateObject","31346kdlkCq","index","length","counter","action","init","material","267DGGRaz","while (true) {}","30DWmbJO","function *\\( *\\)","__proto__","chain"];return(Jt=function(){return n})()}function Qt(n,t){const e=Jt();return(Qt=function(n,t){return e[n-=125]})(n,t)}!function(){Kt(this,(function(){const n=Qt,t=new RegExp(n(138)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ee(n(133));t[n(161)](r+n(140))&&e[n(161)](r+n(153))?ee():r("0")}))()}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(145)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ne(void 0,(function(){const n=Qt,t=function(){const n=Qt;let t;try{t=Function(n(154)+n(158)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(155)]||{},r=["log","warn",n(163),n(156),n(143),n(146),"trace"];for(let o=0;o<r[n(130)];o++){const t=ne[n(159)][n(147)][n(150)](ne),i=r[o],a=e[i]||t;t[n(139)]=ne[n(150)](ne),t[n(126)]=a[n(126)][n(150)](a),e[i]=t}}))();const te=en({__name:Xt(129),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(144)],o[t(144)],e[t(144)]),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o[t(144)][t(162)]((n=>{const e=t;n instanceof l&&n[e(134)][e(165)]()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function ee(n){function t(n){const e=Qt;if("string"==typeof n)return function(n){}[e(159)](e(136))[e(145)](e(131));1!==(""+n/n).length||n%20==0?function(){return!0}[e(159)](e(125)+e(152))[e(148)](e(132)):function(){return!1}[e(159)](e(125)+e(152))[e(145)](e(127)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const re=oe;function oe(n,t){const e=se();return(oe=function(n,t){return e[n-=350]})(n,t)}!function(n,t){const e=oe,r=se();for(;;)try{if(262272===parseInt(e(392))/1+-parseInt(e(352))/2+-parseInt(e(376))/3+parseInt(e(394))/4*(-parseInt(e(357))/5)+parseInt(e(359))/6+parseInt(e(380))/7*(parseInt(e(356))/8)+-parseInt(e(369))/9*(-parseInt(e(370))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ie(this,(function(){const n=oe,t=new RegExp(n(383)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=le(n(374));t[n(390)](r+n(384))&&e[n(390)](r+"input")?le():r("0")}))()}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ae(void 0,(function(){const n=oe,t=function(){const n=oe;let t;try{t=Function(n(372)+n(389)+");")()}catch(e){t=window}return t}(),e=t[n(358)]=t.console||{},r=["log",n(351),n(379),n(350),n(375),"table",n(360)];for(let o=0;o<r[n(361)];o++){const t=ae[n(387)][n(385)][n(362)](ae),i=r[o],a=e[i]||t;t[n(366)]=ae[n(362)](ae),t[n(354)]=a[n(354)][n(362)](a),e[i]=t}}))();const ce=parseInt(B[re(386)](/\D+/g,""));function se(){const n=["#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","info","23590lBaDXr","colorspace_fragment","resolution","function *\\( *\\)","chain","prototype","replace","constructor",">\n        }",'{}.constructor("return this")( )',"test","kernel","265947AwGXsE","value","4BQlAMs","halfTexelSize","error","warn","83100YCuTAO","gger","toString","texelSize","920kIYeHb","1822165vPaAYS","console","1379562aydBIy","trace","length","bind","setTexelSize","uniforms","debu","__proto__","set","stateObject","1024101mVPznK","10WtPUtn","string","return (function() ","toneMapped","init","exception","986874Irkgxu","apply"];return(se=function(){return n})()}class ue extends P{constructor(n=new O){const t=re;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(378)+(ce>=154?t(381):"encodings_fragment")+t(388),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:F,depthWrite:!1,depthTest:!1}),this[t(373)]=!1,this[t(363)](n.x,n.y),this[t(391)]=new Float32Array([0,1,2,2,3])}[re(363)](n,t){const e=re;this[e(364)][e(355)].value[e(367)](n,t),this.uniforms[e(395)][e(393)][e(367)](n,t).multiplyScalar(.5)}setResolution(n){const t=re;this[t(364)][t(382)].value.copy(n)}}function le(n){function t(n){const e=oe;if(typeof n===e(371))return function(n){}.constructor("while (true) {}")[e(377)]("counter");1!==(""+n/n)[e(361)]||n%20==0?function(){return!0}[e(387)](e(365)+e(353)).call("action"):function(){return!1}.constructor("debu"+e(353))[e(377)](e(368)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const fe=pe;function pe(n,t){const e=he();return(pe=function(n,t){return e[n-=319]})(n,t)}!function(n,t){const e=pe,r=he();for(;;)try{if(823877===-parseInt(e(350))/1+-parseInt(e(334))/2*(-parseInt(e(331))/3)+-parseInt(e(344))/4+-parseInt(e(336))/5*(-parseInt(e(337))/6)+parseInt(e(370))/7*(parseInt(e(325))/8)+parseInt(e(377))/9*(parseInt(e(346))/10)+-parseInt(e(362))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const de=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function he(){const n=["85pEThTV","372366mDAuxf","function *\\( *\\)","setAttribute","while (true) {}","clone","warn","kernel","6521196lTcjHD",'{}.constructor("return this")( )',"20vyprdL","string","setRenderTarget","defines","677927WvVzfi","prototype","uniforms","log","stateObject","position","return (function() ","texture","info","counter","input","screen","20311324lOsjOt","constructor","apply","depthTexture","value","__proto__","scene","render","9906981EeHWbg","init","minDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","inputBuffer","trace","action","5274711UsWmtf","bind","error","renderTargetB","depthScale","renderTargetA","depthToBlurRatioBias","debu","length","camera","8WKXZmE","call","table","depthBuffer","renderToScreen","convolutionMaterial","4008327yDNPFc","gger","chain","2sUCaNM","console"];return(he=function(){return n})()}!function(){de(this,(function(){const n=pe,t=new RegExp(n(338)),e=new RegExp(n(373),"i"),r=ge(n(371));t.test(r+n(333))&&e.test(r+n(360))?ge():r("0")}))()}();const ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ve(void 0,(function(){const n=pe,t=function(){const n=pe;let t;try{t=Function(n(356)+n(345)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(335)]||{},r=[n(353),n(342),n(358),n(379),"exception",n(327),n(375)];for(let o=0;o<r[n(323)];o++){const t=ve[n(363)][n(351)][n(378)](ve),i=r[o],a=e[i]||t;t[n(367)]=ve[n(378)](ve),t.toString=a.toString[n(378)](a),e[i]=t}}))();class me{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(329)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(380)]=this[c(320)][c(341)](),this.convolutionMaterial=new ue,this[c(330)].setTexelSize(1/t,1/e),this[c(330)].setResolution(new O(t,e)),this.scene=new u,this[c(324)]=new k,this[c(330)].uniforms[c(372)][c(366)]=r,this[c(330)][c(352)].maxDepthThreshold[c(366)]=o,this[c(330)].uniforms[c(319)][c(366)]=i,this[c(330)][c(352)][c(321)][c(366)]=a,this[c(330)][c(349)].USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(339)](c(355),new U(s,3)),p[c(339)]("uv",new U(f,2)),this[c(361)]=new l(p,this[c(330)]),this.screen.frustumCulled=!1,this[c(368)].add(this[c(361)])}[fe(369)](n,t,e){const r=fe,o=this[r(368)],i=this[r(324)],a=this.renderTargetA,c=this[r(380)],s=this[r(330)],u=s[r(352)];u[r(328)][r(366)]=t[r(365)];const l=s[r(343)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(343)].value=l[p],u[r(374)][r(366)]=h.texture,n[r(348)](f),n[r(369)](o,i),h=f;u[r(343)][r(366)]=l[p],u[r(374)][r(366)]=h[r(357)],n.setRenderTarget(this.renderToScreen?null:e),n[r(369)](o,i)}}function ge(n){function t(n){const e=pe;if(typeof n===e(347))return function(n){}[e(363)](e(340))[e(364)](e(359));1!==(""+n/n).length||n%20==0?function(){return!0}[e(363)]("debu"+e(332))[e(326)](e(376)):function(){return!1}.constructor(e(322)+e(332)).apply(e(354)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var _e=ye;function ye(n,t){var e=Ie();return(ye=function(n,t){return e[n-=175]})(n,t)}!function(n,t){for(var e=ye,r=Ie();;)try{if(957558===parseInt(e(205))/1*(parseInt(e(201))/2)+parseInt(e(231))/3*(parseInt(e(250))/4)+parseInt(e(248))/5*(-parseInt(e(207))/6)+parseInt(e(179))/7+parseInt(e(243))/8+-parseInt(e(195))/9*(parseInt(e(228))/10)+-parseInt(e(245))/11*(parseInt(e(219))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){var n=ye,t=new RegExp(n(226)),e=new RegExp(n(239),"i"),r=we(n(181));t.test(r+n(211))&&e[n(222)](r+n(203))?we():r("0")}))()}();var be=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ye(227)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ie(){var n=["replace","vertexShader","10314UscRnV","onBeforeCompile","__proto__","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","minDepthThreshold","_mirror","2dJPYmz","_textureMatrix","input","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","1406714rWkpRs","value","11478oeFSTu","_depthScale","depthToBlurRatioBias","length","chain","error","distortionMap","bind","call","uniforms","_minDepthThreshold","_tDepth","44268fpYuIe","console","debu","test","setValues","mirror",'{}.constructor("return this")( )',"function *\\( *\\)","apply","3830Yuwjov","table","mixStrength","12ZraZyq","fragmentShader","_mixBlur","gger","textureMatrix","_hasBlur","distortion","tDepth","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthScale","USE_UV","mixBlur","11114712EylIoI","_maxDepthThreshold","2695qUYZMc","info","_distortion","2995maQrSm","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","57628jHhAUw","tDiffuse","_distortionMap","while (true) {}","toString","tDiffuseBlur","_tDiffuseBlur","_mixContrast","_blurStrength","4147409rZEsoB","_depthToBlurRatioBias","init","prototype","_tDiffuse","maxDepthThreshold","counter","stateObject","exception","mixContrast","action","constructor","hasBlur","defines"];return(Ie=function(){return n})()}be(void 0,(function(){for(var n=ye,t=function(){var n,t=ye;try{n=Function("return (function() "+t(225)+");")()}catch(e){n=window}return n}(),e=t[n(220)]=t[n(220)]||{},r=["log","warn",n(246),n(212),n(187),n(229),"trace"],o=0;o<r[n(210)];o++){var i=be[n(190)][n(182)][n(214)](be),a=r[o],c=e[a]||i;i[n(197)]=be[n(214)](be),i.toString=c[n(254)][n(214)](c),e[a]=i}}))();class Se extends N{constructor(n={}){var t=ye;super(n),this[t(218)]={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this[t(176)]={value:null},this[t(202)]={value:null},this._hasBlur={value:!1},this[t(200)]={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this[t(217)]={value:.9},this[t(244)]={value:1},this[t(208)]={value:0},this[t(180)]={value:.25},this[t(247)]={value:1},this._mixContrast={value:1},this[t(223)](n)}[_e(196)](n){var t,e=_e;!(null==(t=n[e(192)])?void 0:t[e(241)])&&(n[e(192)].USE_UV=""),n[e(216)].hasBlur=this[e(236)],n[e(216)][e(251)]=this._tDiffuse,n[e(216)][e(238)]=this[e(218)],n[e(216)][e(213)]=this[e(252)],n.uniforms[e(175)]=this[e(176)],n[e(216)][e(235)]=this._textureMatrix,n[e(216)][e(224)]=this[e(200)],n[e(216)].mixBlur=this[e(233)],n[e(216)][e(230)]=this[e(178)],n.uniforms.minDepthThreshold=this._minDepthThreshold,n[e(216)][e(184)]=this[e(244)],n[e(216)].depthScale=this[e(208)],n[e(216)][e(209)]=this._depthToBlurRatioBias,n[e(216)].distortion=this[e(247)],n[e(216)][e(188)]=this[e(177)],n[e(194)]=e(249)+n[e(194)],n[e(194)]=n[e(194)][e(193)]("#include <project_vertex>",e(198)),n[e(232)]=e(204)+n.fragmentShader,n[e(232)]=n[e(232)].replace("#include <emissivemap_fragment>","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[_e(251)](){var n=_e;return this[n(183)][n(206)]}set[_e(251)](n){this[_e(183)].value=n}get tDepth(){return this[_e(218)].value}set[_e(238)](n){this[_e(218)].value=n}get[_e(213)](){var n=_e;return this[n(252)][n(206)]}set distortionMap(n){var t=_e;this[t(252)][t(206)]=n}get tDiffuseBlur(){var n=_e;return this[n(176)][n(206)]}set[_e(175)](n){var t=_e;this[t(176)][t(206)]=n}get textureMatrix(){var n=_e;return this._textureMatrix[n(206)]}set[_e(235)](n){var t=_e;this[t(202)][t(206)]=n}get[_e(191)](){var n=_e;return this[n(236)][n(206)]}set hasBlur(n){var t=_e;this[t(236)][t(206)]=n}get[_e(224)](){return this[_e(200)].value}set[_e(224)](n){var t=_e;this._mirror[t(206)]=n}get[_e(242)](){var n=_e;return this[n(233)][n(206)]}set[_e(242)](n){var t=_e;this._mixBlur[t(206)]=n}get[_e(230)](){var n=_e;return this[n(178)][n(206)]}set[_e(230)](n){var t=_e;this._blurStrength[t(206)]=n}get[_e(199)](){var n=_e;return this[n(217)][n(206)]}set minDepthThreshold(n){var t=_e;this[t(217)][t(206)]=n}get[_e(184)](){return this[_e(244)].value}set[_e(184)](n){var t=_e;this[t(244)][t(206)]=n}get[_e(240)](){var n=_e;return this[n(208)][n(206)]}set depthScale(n){var t=_e;this._depthScale[t(206)]=n}get[_e(209)](){var n=_e;return this[n(180)][n(206)]}set[_e(209)](n){var t=_e;this[t(180)][t(206)]=n}get distortion(){var n=_e;return this._distortion[n(206)]}set[_e(237)](n){var t=_e;this[t(247)][t(206)]=n}get[_e(188)](){var n=_e;return this[n(177)][n(206)]}set[_e(188)](n){this[_e(177)].value=n}}function we(n){function t(n){var e=ye;if("string"==typeof n)return function(n){}[e(190)](e(253))[e(227)](e(185));1!==(""+n/n)[e(210)]||n%20==0?function(){return!0}.constructor(e(221)+e(234))[e(215)](e(189)):function(){return!1}.constructor("debugger")[e(227)](e(186)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Me=Ee;function Ee(n,t){const e=Te();return(Ee=function(n,t){return e[n-=130]})(n,t)}!function(n,t){const e=Ee,r=Te();for(;;)try{if(436963===-parseInt(e(160))/1+-parseInt(e(186))/2+parseInt(e(144))/3*(-parseInt(e(206))/4)+-parseInt(e(142))/5+parseInt(e(140))/6*(-parseInt(e(203))/7)+-parseInt(e(148))/8*(-parseInt(e(138))/9)+parseInt(e(183))/10*(parseInt(e(167))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Re(this,(function(){const n=Ee,t=new RegExp(n(207)),e=new RegExp(n(189),"i"),r=Pe("init");t[n(216)](r+n(172))&&e[n(216)](r+"input")?Pe():r("0")}))()}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ee(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Te(){const n=["mix-strength","lookAtPosition","distortionMap","value","matrixWorldInverse","36drLYdt","debu","1188822xdAchT","shadowMap","2283935eThHgb","cameraWorldPosition","10113YeHdOO","console","t-diffuse","log","86400XXkEuG","elements","lookAt","prototype","projectionMatrix","autoClear","depthTexture","return (function() ","max-depth-threshold","string","autoUpdate","setFromNormalAndCoplanarPoint","798673qqgteI","clipPlane","depth-to-blur-ratio-bias","constructor","reflectorPlane","call","exception","2719123fSEqxX","target","set","virtualCamera","toString","chain","sign","reflectorWorldPosition","textureMatrix",'{}.constructor("return this")( )',"reflectorOffset","material","action","gger","isMesh","add","110vpfxko","t-diffuse-blur","distortion","47550slkKyK","reflect","texture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","number","rotationMatrix","min-depth-threshold","traverse","setFromMatrixPosition","enabled","normal","subVectors","render","copy","while (true) {}","texture-matrix","bind","21RorBNJ","constant","defines-USE_DISTORTION","536PJcCnh","function *\\( *\\)","dot","mix-contrast","view","length","stateObject","has-blur","setRenderTarget","defines-USE_BLUR","test","uuid","defines-USE_DEPTH","multiply","__proto__","addScaledVector","applyMatrix4","assign","error","apply","dispose","mirror","counter","warn","matrixWorld"];return(Te=function(){return n})()}Ae(void 0,(function(){const n=Ee;let t;try{t=Function(n(155)+n(176)+");")()}catch(o){t=window}const e=t[n(145)]=t.console||{},r=[n(147),n(131),"info",n(224),n(166),"table","trace"];for(let i=0;i<r[n(211)];i++){const t=Ae[n(163)][n(151)].bind(Ae),o=r[i],a=e[o]||t;t[n(220)]=Ae[n(202)](Ae),t[n(171)]=a[n(171)][n(202)](a),e[o]=t}}))();const De=[Me(201),Me(227),Me(146),"t-depth",Me(184),Me(213),Me(133),Me(192),Me(156),"depth-scale",Me(162),Me(185),Me(135),Me(209),Me(215),Me(218),"defines-USE_DISTORTION"],ze=en({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Me,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:E,extend:R}=$();R({MeshReflectorMaterial:Se});const T=yn(),D=yn(),z=yn(),P=yn(),C=nn((()=>{const n=Ee;return typeof f[n(136)]===n(190)?[f[n(136)],f[n(136)]]:f[n(136)]})),O=nn((()=>C[r(136)][0]>0||C[r(136)][1]>0)),F={reflectorPlane:new H,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=T[o(136)])||n.texture[o(226)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(136)]=new b(i.value,i[o(136)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(136)],i.value,w,M)},t(y,e(x)))),D[o(136)]=new b(i[o(136)],i[o(136)],f),z[o(136)]=new me({resolution:i[o(136)],width:C.value[0],height:C.value[1],minDepthThreshold:a.value,maxDepthThreshold:s[o(136)],depthScale:u.value,depthToBlurRatioBias:l[o(136)]}),P.value={mirror:p,textureMatrix:F.textureMatrix,mixBlur:d,tDiffuse:T.value[o(188)],tDepth:T[o(136)][o(154)],tDiffuseBlur:T[o(136)][o(188)],hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g[o(136)]?"":void 0}}));const B=yn(),{onLoop:k}=Y();k((()=>{var n;const t=r;if(!(B[t(136)]&&E.value&&T[t(136)]&&y.value))return;const e=function(n,t){const e=Ee;let r;return n[e(193)]((n=>{const o=e;n[o(181)]&&n.material&&n[o(178)][o(217)]===t&&(r=n)})),r}(x[t(136)],B[t(136)][t(217)]);if(!e)return;e.visible=!1;const i=E[t(136)].xr[t(195)],a=E.value[t(141)][t(158)];(function(n){var t,e;const r=Ee;if(F[r(174)][r(194)](n.matrixWorld),F[r(143)].setFromMatrixPosition(null==(t=y[r(136)])?void 0:t.matrixWorld),F[r(191)].extractRotation(n[r(132)]),F[r(196)][r(169)](0,0,1),F[r(196)][r(222)](F[r(191)]),F[r(174)][r(221)](F.normal,o[r(177)]),F[r(210)][r(197)](F.reflectorWorldPosition,F[r(143)]),F[r(210)][r(208)](F[r(196)])>0)return;F[r(210)][r(187)](F[r(196)]).negate(),F.view[r(182)](F[r(174)]),F.rotationMatrix.extractRotation(null==(e=y[r(136)])?void 0:e[r(132)]),F[r(134)][r(169)](0,0,-1),F.lookAtPosition[r(222)](F.rotationMatrix),F[r(134)][r(182)](F[r(143)]),F[r(168)][r(197)](F[r(174)],F[r(134)]),F.target.reflect(F[r(196)]).negate(),F[r(168)][r(182)](F[r(174)]),F.virtualCamera.position[r(199)](F.view),F[r(170)].up[r(169)](0,1,0),F[r(170)].up.applyMatrix4(F[r(191)]),F[r(170)].up.reflect(F[r(196)]),F.virtualCamera[r(150)](F[r(168)]),F.virtualCamera.far=(null==y?void 0:y[r(136)]).far,F.virtualCamera.updateMatrixWorld(),F[r(170)].projectionMatrix.copy((null==y?void 0:y[r(136)]).projectionMatrix),F[r(175)][r(169)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(175)][r(219)](F[r(170)][r(152)]),F[r(175)][r(219)](F[r(170)][r(137)]),F[r(175)][r(219)](n[r(132)]),F[r(164)][r(159)](F[r(196)],F[r(174)]),F[r(164)][r(222)](F[r(170)][r(137)]),F.clipPlane[r(169)](F[r(164)][r(196)].x,F.reflectorPlane.normal.y,F[r(164)][r(196)].z,F[r(164)][r(204)]);const i=F[r(170)][r(152)];F.q.x=(Math[r(173)](F[r(161)].x)+i[r(149)][8])/i[r(149)][0],F.q.y=(Math[r(173)](F.clipPlane.y)+i.elements[9])/i.elements[5],F.q.z=-1,F.q.w=(1+i[r(149)][10])/i[r(149)][14],F[r(161)].multiplyScalar(2/F.clipPlane[r(208)](F.q)),i[r(149)][2]=F[r(161)].x,i[r(149)][6]=F[r(161)].y,i[r(149)][10]=F[r(161)].z+1,i[r(149)][14]=F[r(161)].w})(e),E[t(136)][t(141)][t(158)]=!1,E[t(136)].setRenderTarget(T[t(136)]),E[t(136)][t(153)]||E.value.clear(),E[t(136)][t(198)](x[t(136)],F[t(170)]),null==(n=null==z?void 0:z[t(136)])||n[t(198)](E[t(136)],T[t(136)],D[t(136)]),E[t(136)].xr[t(195)]=i,E.value[t(141)][t(158)]=a,e.visible=!0,E[t(136)][t(214)](null)}));const j=In(),U=nn((()=>{const n=r,t={};return Object[n(223)](t,o),Object[n(223)](t,j[n(136)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(136)])||n[e(226)](),null==(t=null==D?void 0:D[e(136)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn("TresMeshReflectorMaterial",Sn({key:"key"+P[c(136)][c(215)]+P.value[c(218)]+P[c(136)][c(205)],ref_key:"materialRef",ref:B},U[c(136)],{"texture-matrix":F[c(175)],mirror:tn(p),"t-diffuse":null==(e=T[c(136)])?void 0:e[c(188)],"t-depth":null==(o=T[c(136)])?void 0:o[c(154)],"t-diffuse-blur":null==(i=D.value)?void 0:i.texture,"has-blur":O.value,"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":O[c(136)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,De)}}});function Pe(n){function t(n){const e=Ee;if(typeof n===e(157))return function(n){}[e(163)](e(200))[e(225)](e(130));1!==(""+n/n)[e(211)]||n%20==0?function(){return!0}[e(163)](e(139)+e(180))[e(165)](e(179)):function(){return!1}[e(163)]("debu"+e(180))[e(225)](e(212)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Be,r=Fe();for(;;)try{if(825122===-parseInt(e(142))/1*(parseInt(e(154))/2)+parseInt(e(148))/3*(-parseInt(e(132))/4)+-parseInt(e(171))/5*(-parseInt(e(169))/6)+-parseInt(e(137))/7*(-parseInt(e(133))/8)+-parseInt(e(168))/9*(-parseInt(e(157))/10)+-parseInt(e(165))/11*(-parseInt(e(161))/12)+-parseInt(e(162))/13)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ce(this,(function(){const n=Be,t=new RegExp(n(149)),e=new RegExp(n(164),"i"),r=ke(n(144));t[n(167)](r+"chain")&&e.test(r+n(147))?ke():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Be(170)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fe(){const n=["dispose","warn","input","523203igleGC","function *\\( *\\)","counter","stateObject","info","length","145106GMFSMu","__proto__","action","30bQUlsN","trace","exception","string","36aHfRbp","48332258TaQzbf","CubeCamera","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3817451jCBVGb","gger","test","2515833uDhEFR","290238XsIukW","apply","165VhTUfg","prototype","error","while (true) {}","background","constructor","4cfyxZO","8MKWMct","log","type","debu","11228777QOBaKL","texture","fog","bind","value","5lHnEef","table","init"];return(Fe=function(){return n})()}function Be(n,t){const e=Fe();return(Be=function(n,t){return e[n-=132]})(n,t)}function ke(n){function t(n){const e=Be;if(typeof n===e(160))return function(n){}[e(176)](e(174))[e(170)](e(150));1!==(""+n/n)[e(153)]||n%20==0?function(){return!0}[e(176)](e(136)+e(166)).call(e(156)):function(){return!1}.constructor(e(136)+"gger")[e(170)](e(151)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=Be,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t.console=t.console||{},r=[n(134),n(146),n(152),n(173),n(159),n(143),n(158)];for(let o=0;o<r[n(153)];o++){const t=Oe[n(176)][n(172)][n(140)](Oe),i=r[o],a=e[i]||t;t[n(155)]=Oe.bind(Oe),t.toString=a.toString.bind(a),e[i]=t}}))();const je=He;!function(n,t){const e=He,r=Ze();for(;;)try{if(329195===-parseInt(e(503))/1*(parseInt(e(480))/2)+-parseInt(e(498))/3+-parseInt(e(474))/4+-parseInt(e(492))/5+-parseInt(e(473))/6+parseInt(e(500))/7*(-parseInt(e(470))/8)+parseInt(e(508))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(478)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=He,t=new RegExp(n(504)),e=new RegExp(n(476),"i"),r=We("init");t[n(502)](r+n(497))&&e[n(502)](r+n(485))?We():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function He(n,t){const e=Ze();return(He=function(n,t){return e[n-=470]})(n,t)}Ne(void 0,(function(){const n=He;let t;try{t=Function(n(494)+n(507)+");")()}catch(o){t=window}const e=t[n(512)]=t.console||{},r=[n(489),"warn",n(486),n(495),n(505),n(490),n(472)];for(let i=0;i<r[n(514)];i++){const t=Ne.constructor[n(479)][n(511)](Ne),o=r[i],a=e[o]||t;t[n(488)]=Ne[n(511)](Ne),t[n(487)]=a.toString.bind(a),e[o]=t}}))();const Le=["object"];function Ze(){const n=["gger","2072xyHWgJ","counter","test","53ubxMBe","function *\\( *\\)","exception","fog",'{}.constructor("return this")( )',"25940907njjvtM","action","frames","bind","console","stateObject","length","constructor","14896VkHkWJ","$slots","trace","3129390NFVwYi","76460bNSeBs","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","index","apply","prototype","20472pFZqfX","call","string","near","visible","input","info","toString","__proto__","log","table","TresGroup","2175695zjMVqj","while (true) {}","return (function() ","error","value","chain","1450947kIUFlh"];return(Ze=function(){return n})()}const Ge=en({__name:je(477),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=je,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return Q((()=>s),(n=>{var t;const e=Be;null==(t=c.value)||t[e(145)](),c[e(141)]=new v(n.value),c[e(141)][e(138)][e(135)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Be;e&&(f[r(141)]=new(D[r(163)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;const t=Be;null==(n=c[t(141)])||n[t(145)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Be;p=a.value[t(139)],d=a[t(141)].background,a[t(141)][t(175)]=r||d,a[t(141)][t(139)]=o||p,null==(n=f[t(141)])||n.update(i[t(141)],a.value),a[t(141)].fog=p,a[t(141)][t(175)]=d}}}({resolution:o.resolution,near:o[r(483)],far:o.far,envMap:o.envMap,fog:o[r(506)]}),{onBeforeLoop:s}=Y();let u=0;const l=J(null);return s((()=>{const n=r;l.value&&(o[n(510)]===1/0||u<o.frames)&&(l[n(496)].visible=!1,c(),l[n(496)][n(484)]=!0,u++)})),t({texture:null==(e=i[r(496)])?void 0:e.texture}),(n,t)=>{const e=r;return cn(),sn(e(491),null,[vn("primitive",{object:tn(a)},null,8,Le),vn("TresGroup",{ref_key:"rgRef",ref:l},[un(n[e(471)],"default")],512)])}}});function We(n){function t(n){const e=He;if(typeof n===e(482))return function(n){}[e(515)](e(493))[e(478)](e(501));1!==(""+n/n).length||n%20==0?function(){return!0}[e(515)]("debu"+e(499))[e(481)](e(509)):function(){return!1}[e(515)](e(475)+e(499)).apply(e(513)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ve(n,t){const e=Ye();return(Ve=function(n,t){return e[n-=421]})(n,t)}!function(n,t){const e=Ve,r=Ye();for(;;)try{if(145978===parseInt(e(442))/1*(parseInt(e(454))/2)+parseInt(e(434))/3*(-parseInt(e(465))/4)+-parseInt(e(427))/5+parseInt(e(461))/6*(-parseInt(e(437))/7)+-parseInt(e(425))/8*(parseInt(e(451))/9)+-parseInt(e(463))/10+parseInt(e(429))/11*(parseInt(e(436))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){$e(this,(function(){const n=Ve,t=new RegExp(n(431)),e=new RegExp(n(423),"i"),r=Ke(n(422));t[n(448)](r+n(455))&&e.test(r+n(428))?Ke():r("0")}))()}();const qe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(424)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(){const n=["function *\\( *\\)","clone","while (true) {}","57lbIdWd","console","9727308mpdnyn","349013DOaydc","string","key","constructor","value","23WmCVRq","stateObject","info","toString","reduce","forEach","test","debu","table","29169pHRRFb",'{}.constructor("return this")( )',"action","558qVijoc","chain","return (function() ","gger","prototype","bind","__proto__","24HwaWAM","trace","444520ifSzeC","entries","22696HQPgEa","ShaderMaterial","length","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","208ryFvPU","UniformsUtils","1175440dPUNBS","input","11oOcamx","counter"];return(Ye=function(){return n})()}function Xe(n,t,e,r){const o=Ve,i=class extends D[o(466)]{constructor(i={}){const a=o,s=Object[a(464)](n);super({uniforms:s[a(446)](((n,[t,e])=>{const r=a,o=D[r(426)][r(432)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(439)]="",s[a(447)]((([n])=>Object.defineProperty(this,n,{get:()=>this.uniforms[n][a(441)],set:t=>this.uniforms[n][a(441)]=t}))),Object.assign(this,i),r&&r(this)}};return i[o(439)]=W.generateUUID(),i}function Ke(n){function t(n){const e=Ve;if(typeof n===e(438))return function(n){}[e(440)](e(433))[e(424)](e(430));1!==(""+n/n)[e(421)]||n%20==0?function(){return!0}.constructor(e(449)+e(457)).call(e(453)):function(){return!1}[e(440)]("debu"+e(457))[e(424)](e(443)),t(++n)}try{if(n)return t;t(0)}catch(e){}}qe(void 0,(function(){const n=Ve,t=function(){const n=Ve;let t;try{t=Function(n(456)+n(452)+");")()}catch(e){t=window}return t}(),e=t[n(435)]=t[n(435)]||{},r=["log","warn",n(444),"error","exception",n(450),n(462)];for(let o=0;o<r[n(421)];o++){const t=qe.constructor[n(458)].bind(qe),i=r[o],a=e[i]||t;t[n(460)]=qe[n(459)](qe),t[n(445)]=a[n(445)][n(459)](a),e[i]=t}}))();var Je=dr;!function(n,t){for(var e=dr,r=Dr();;)try{if(515449===-parseInt(e(546))/1+parseInt(e(591))/2+parseInt(e(556))/3+parseInt(e(565))/4+parseInt(e(462))/5*(-parseInt(e(489))/6)+-parseInt(e(412))/7+parseInt(e(426))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[dr(464)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qe(this,(function(){var n=dr,t=new RegExp(n(512)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Or(n(506));t.test(r+n(434))&&e[n(444)](r+n(470))?Or():r("0")}))()}();var nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function tr(n){var t=dr,e=function(n,t){var e=dr;if(typeof n!==e(463)||null===n)return n;var r=n[Symbol[e(467)]];if(void 0!==r){var o=r[e(520)](n,t||e(460));if(typeof o!==e(463))return o;throw new TypeError(e(540))}return(t===e(537)?String:Number)(n)}(n,t(537));return typeof e===t(510)?e:String(e)}function er(n,t,e){var r=dr;return(t=tr(t))in n?Object[r(413)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function rr(n,t){var e=dr,r=Object[e(504)](n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(549)]((function(t){var r=e;return Object[r(418)](n,t)[r(500)]}))),r.push[e(464)](r,o)}return r}function or(n){for(var t=dr,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0)[t(449)]((function(t){er(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(579)](n,Object[t(466)](r)):rr(Object(r))[t(449)]((function(e){var o=t;Object[o(413)](n,e,Object[o(418)](r,e))}))}return n}function ir(n,t){var e=dr;if(null==n)return{};var r,o,i=function(n,t){var e=dr;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(585)];o++)r=a[o],t[e(521)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(589)]){var a=Object[e(589)](n);for(o=0;o<a.length;o++)r=a[o],t[e(521)](r)>=0||Object[e(408)][e(545)][e(520)](n,r)&&(i[r]=n[r])}return i}function ar(n,t){(null==t||t>n[dr(585)])&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function cr(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=dr,r=null==n?null:e(594)!=typeof Symbol&&n[Symbol[e(469)]]||n[e(435)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(520)](n))[e(450)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(520)](r))[e(479)])&&(s[e(547)](o[e(437)]),s[e(585)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=dr;if(n){if(typeof n===e(537))return ar(n,t);var r=Object[e(408)][e(501)][e(520)](n)[e(590)](8,-1);return r===e(402)&&n[e(508)]&&(r=n[e(508)][e(461)]),r===e(477)||r===e(571)?Array[e(406)](n):r===e(493)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(444)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError(dr(422))}()}function sr(n,t){for(var e=dr,r=0;r<t[e(585)];r++){var o=t[r];o[e(500)]=o[e(500)]||!1,o.configurable=!0,"value"in o&&(o[e(407)]=!0),Object[e(413)](n,tr(o[e(499)]),o)}}function ur(n){if(void 0===n)throw new ReferenceError(dr(490));return n}function lr(n,t){var e=dr;return(lr=Object[e(488)]?Object[e(488)][e(498)]():function(n,t){return n[e(430)]=t,n})(n,t)}function fr(n){return(fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){var t=dr;return n[t(430)]||Object[t(586)](n)})(n)}function pr(n){var t=function(){var n=dr;if(typeof Reflect===n(594)||!Reflect[n(583)])return!1;if(Reflect[n(583)][n(471)])return!1;if(typeof Proxy===n(515))return!0;try{return Boolean.prototype[n(487)][n(520)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=dr,o=fr(n);if(t){var i=fr(this)[r(508)];e=Reflect[r(583)](o,arguments,i)}else e=o[r(464)](this,arguments);return function(n,t){var e=dr;if(t&&(typeof t===e(463)||typeof t===e(515)))return t;if(void 0!==t)throw new TypeError(e(558));return ur(n)}(this,e)}}function dr(n,t){var e=Dr();return(dr=function(n,t){return e[n-=401]})(n,t)}nr(void 0,(function(){var n,t=dr;try{n=Function("return (function() "+t(578)+");")()}catch(s){n=window}for(var e=n.console=n[t(514)]||{},r=[t(484),"warn",t(445),"error",t(569),t(496),t(451)],o=0;o<r.length;o++){var i=nr[t(508)][t(408)][t(498)](nr),a=r[o],c=e[a]||i;i[t(430)]=nr[t(498)](nr),i.toString=c[t(501)].bind(c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:"csm_DiffuseColor",normal:"csm_Normal",roughness:Je(486),metalness:Je(446),emissive:Je(442),ao:Je(443),bump:Je(588),clearcoat:Je(580),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Je(593),pointSize:Je(483),fragColor:Je(592),depthAlpha:Je(495),position:Je(409),positionRaw:Je(519)},_r=(er(hr={},""[Je(424)](gr[Je(497)]),"*"),er(hr,"".concat(gr.positionRaw),"*"),er(hr,""[Je(424)](gr[Je(505)]),"*"),er(hr,""[Je(424)](gr[Je(401)]),[Je(417)]),er(hr,""[Je(424)](gr[Je(448)]),"*"),er(hr,""[Je(424)](gr.fragColor),"*"),er(hr,""[Je(424)](gr[Je(524)]),["MeshStandardMaterial",Je(526)]),er(hr,""[Je(424)](gr[Je(478)]),["MeshStandardMaterial",Je(526)]),er(hr,""[Je(424)](gr.metalness),[Je(404),Je(526)]),er(hr,""[Je(424)](gr.ao),[Je(404),Je(526),Je(577),Je(533),Je(411),Je(573)]),er(hr,""[Je(424)](gr.bump),[Je(533),Je(423),Je(455),Je(411),Je(526),Je(404),"MeshToonMaterial","ShadowMaterial"]),er(hr,""[Je(424)](gr[Je(432)]),[Je(538)]),er(hr,""[Je(424)](gr[Je(553)]),["MeshPhysicalMaterial"]),er(hr,""[Je(424)](gr[Je(518)]),[Je(526)]),er(hr,""[Je(424)](gr[Je(550)]),["MeshPhysicalMaterial"]),hr),yr={"#include <lights_physical_fragment>":z[Je(581)]},xr=(er(vr={},""[Je(424)](gr[Je(505)]),{"#include <beginnormal_vertex>":Je(428)[Je(424)](gr[Je(505)],Je(554))}),er(vr,"".concat(gr[Je(497)]),{"#include <begin_vertex>":Je(429).concat(gr[Je(497)],";\n  ")}),er(vr,""[Je(424)](gr[Je(441)]),{"#include <begin_vertex>":Je(513)[Je(424)](gr[Je(441)],Je(492))}),er(vr,""[Je(424)](gr.pointSize),{"gl_PointSize = size;":Je(456)[Je(424)](gr.pointSize,Je(548))}),er(vr,"".concat(gr[Je(448)]),{"#include <color_fragment>":Je(543).concat(gr.diffuse,Je(491))}),er(vr,"".concat(gr[Je(535)]),{"#include <dithering_fragment>":Je(494)[Je(424)](gr[Je(535)],Je(491))}),er(vr,"".concat(gr[Je(524)]),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = "[Je(424)](gr[Je(524)],";\n    ")}),er(vr,""[Je(424)](gr.roughness),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[Je(424)](gr[Je(478)],Je(548))}),er(vr,"".concat(gr[Je(525)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = ".concat(gr[Je(525)],Je(548))}),er(vr,""[Je(424)](gr.ao),{"#include <aomap_fragment>":Je(431)[Je(424)](gr.ao,Je(548))}),er(vr,""[Je(424)](gr.bump),{"#include <normal_fragment_maps>":Je(541)[Je(424)](gr[Je(574)],Je(416))[Je(424)](gr.bump,Je(530))}),er(vr,"".concat(gr[Je(432)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(587)[Je(424)](gr[Je(432)],Je(529)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[Je(424)](gr[Je(432)],";\n    ")}),er(vr,""[Je(424)](gr[Je(553)]),{"material.clearcoat = clearcoat;":Je(564)[Je(424)](gr[Je(553)],";")}),er(vr,"".concat(gr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Je(424)](gr[Je(518)],";")}),er(vr,""[Je(424)](gr[Je(550)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),vr),br=(er(mr={},""[Je(424)](gr[Je(497)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ".concat(gr[Je(497)],Je(415))}),er(mr,""[Je(424)](gr[Je(441)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(440).concat(gr[Je(497)],Je(491))}),er(mr,""[Je(424)](gr[Je(448)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(528)[Je(424)](gr[Je(448)],Je(491))}),er(mr,"".concat(gr[Je(535)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(gr[Je(535)],Je(491))}),mr),Ir={clearcoat:[gr[Je(553)],gr[Je(550)],gr[Je(518)]]},Sr=Je(575),wr=Je(438),Mr=Je(438),Er=Je(552),Rr=[Je(454),Je(516),Je(559),Je(472),Je(542),"cacheKey",Je(410)],Ar=function(n,t,e){return n[Je(523)](t).join(e)},Tr=function(n,t){var e;return new RegExp("\\b"[Je(424)]((e=t,e[Je(544)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b")).test(n)};function Dr(){var n=["isArray","toUpperCase","baseMaterial","MeshNormalMaterial","\n    gl_PointSize = ","lastIndexOf","type",". Shader cannot compile.","default","name","50890Hmurtz","object","apply"," is not available in ","getOwnPropertyDescriptors","toPrimitive","Cannot call a class as a function","iterator","input","sham","uniforms","__csm","while (true) {}","onBeforeCompile","_getPatchMapForMaterial","Map","roughness","done","_generateMaterial","needsUpdate","RawShaderMaterial","csm_PointSize","log","void main()","csm_Roughness","valueOf","setPrototypeOf","156MCTGWl","this hasn't been initialised - super() hasn't been called",";\n  ",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","Arguments","\n    #include <dithering_fragment>\n    gl_FragColor  = ","csm_DepthAlpha","table","position","bind","key","enumerable","toString",'" is required to use output "',"action","keys","normal","init","CSM: ","constructor","CustomShaderMaterial does not support RawShaderMaterial","symbol","entries","function *\\( *\\)","\n    vec4 csm_internal_positionUnprojected = ","console","function","fragmentShader","customProgramCacheKey","clearcoatRoughness","csm_PositionRaw","call","indexOf","Material","split","emissive","metalness","MeshPhysicalMaterial","error","\n    gl_FragColor = "," );\n    ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","cacheHash","Super expression must either be null or a function","MeshLambertMaterial","create","fragColor","_getCacheHash","string","MeshDepthMaterial","find","@@toPrimitive must return a primitive value.","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","patchMap","\n    #include <color_fragment>\n    diffuseColor = ","replace","propertyIsEnumerable","492296GgHZla","push",";\n    ","filter","clearcoatNormal","assign","\n    \n","clearcoat",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","();\n              // #_CSM_#\n          ","491949NCDpev","trim","Derived constructors may only return object or undefined","vertexShader","MathUtils","set","#define IS_UNKNOWN;\n","debu","material.clearcoat = ","898404EMMelG","#define IS_","isAlreadyExtended","cacheKey","exception","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","Set","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","MeshToonMaterial","bump","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","_patchShader","MeshBasicMaterial",'{}.constructor("return this")( )',"defineProperties","csm_Clearcoat","lights_physical_fragment","stateObject","construct","\n            ","length","getPrototypeOf","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","csm_Bump","getOwnPropertySymbols","slice","333478GMSVoC","csm_FragColor","csm_ClearcoatNormal","undefined","pointSize","Object","gger","MeshStandardMaterial","_getMaterialDefine","from","writable","prototype","csm_Position","silent","MeshPhongMaterial","993188eywCDi","defineProperty","// #_CSM_#",", 1.0 );\n  "," - (dot(","PointsMaterial","getOwnPropertyDescriptor","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","includes","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","MeshMatcapMaterial","concat","void main() {","6871472gcsrbM","csm_main_","\n    vec3 objectNormal = ","\n    vec3 transformed = ","__proto__","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","depthAlpha","substring","chain","@@iterator","\n            \n            void main() {\n          ","value","\n    varying mat4 csm_internal_vModelViewMatrix;\n","#define IS_VERTEX;\n","\n    gl_Position = ","positionRaw","csm_Emissive","csm_AO","test","info","csm_Metalness","update","diffuse","forEach","next","trace"];return(Dr=function(){return n})()}function zr(n){return n?n[Je(544)](/\s/g,""):void 0}function Pr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Cr=function(n){var t=Je;!function(n,t){var e=dr;if(typeof t!==e(515)&&null!==t)throw new TypeError(e(532));n[e(408)]=Object[e(534)](t&&t[e(408)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(413)](n,e(408),{writable:!1}),t&&lr(n,t)}(c,n);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=dr,u=n[s(454)],l=n[s(516)],f=n.vertexShader,p=n.uniforms,d=n[s(542)],h=n.cacheKey,v=n[s(410)],m=ir(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(dr(468))}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e.message[t(521)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(551)](e,m)):e=new u(m),e.type===s(482))throw new Error(s(509));(function(n,t){var e=Je;e(585),Object[e(551)](n,t);var r=Object.getPrototypeOf(t);Object[e(511)](Object[e(466)](r))[e(549)]((function(n){var t=e,r=typeof n[1].get===t(515),o="function"==typeof n[1][t(561)],i=typeof n[1][t(437)]===t(515),a=n[0]===t(508);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(515)&&Object[r(413)](n,t[0],t[1])}))})(ur(t=a[s(520)](this)),e),t[s(473)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(560)].generateUUID(),type:e[s(458)],isAlreadyExtended:(r=e[s(475)],o=Je,i=r.toString()[o(557)](),!(0===i[o(433)](i[o(521)]("{")+1,i[o(457)]("}"))[o(557)]()[o(585)])),cacheHash:"",silent:v},t[s(472)]=or(or({},t[s(472)]||{}),p||{});var g=t[s(473)],_=g[s(516)],y=g[s(559)],x=t[s(472)];return t[s(473)][s(531)]=t[s(536)](),t[s(480)](_,y,x),t}return e=c,r=[{key:t(447),value:function(){var n=t,e=arguments[n(585)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(472)]=e[n(472)]||this[n(472)],Object[n(551)](this[n(473)],e);var r=this[n(473)],o=r[n(516)],i=r.vertexShader,a=this[n(472)],c=this[n(536)]();this.__csm.cacheHash=c,this[n(480)](o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(473)].baseMaterial,fragmentShader:this[n(473)][n(516)],vertexShader:this[n(473)].vertexShader,uniforms:this[n(472)],silent:this.__csm[n(410)],patchMap:this[n(473)][n(542)],cacheKey:this[n(473)][n(568)]},r=new(this[n(508)])(e);return Object.assign(this,r),r}},{key:t(536),value:function(){var n=t,e=this[n(473)],r=e.fragmentShader,o=e[n(559)],i=this[n(472)],a=[zr(r),zr(o),i][n(549)]((function(n){return void 0!==n}));return a[n(585)]>0?Rn(a,{excludeValues:!0}):this[n(517)]()}},{key:t(480),value:function(n,e,r){var o=t,i=this;this[o(472)]=r||{},this[o(517)]=function(){var n=o;return i[n(473)][n(531)]};var a=function(t){var r=o;try{var a=i[r(405)]();if(n){var c=i[r(576)](Pr(n),t[r(516)],!0);t[r(516)]=a+c}if(e){var s=i[r(576)](Pr(e),t[r(559)]);t[r(559)]=r(439)+s,t[r(559)]=a+t[r(559)]}t[r(472)]=or(or({},t[r(472)]),i[r(472)]),i.uniforms=t[r(472)]}catch(u){console[r(527)](u)}};if(this[o(473)][o(567)]){var c=this[o(475)];this[o(475)]=function(n,t){c(n,t),a(n)}}else this[o(475)]=a;this[o(481)]=!0}},{key:t(576),value:function(n,e,r){var o=t,i=this,a=e,c=or(or({},this[o(476)]()),this[o(473)].patchMap);Object.entries(Ir)[o(449)]((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(539)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(424)](a,e(502)).concat(c,'". Shader cannot compile.'))})),Object[o(511)](yr).forEach((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(504)](c)[o(449)]((function(t){var e=o;Object[e(504)](c[t])[e(449)]((function(r){var o=e,s=_r[t],u=i[o(473)][o(458)];if("*"===t||Tr(n,t)){if(!(!s||Array[o(452)](s)&&s[o(421)](u)||"*"===s))throw new Error(o(507).concat(t,o(465)).concat(u,o(459)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(427)+this[o(473)].instanceID[o(544)](/-/g,"_"),h=n[o(544)](/void\s+main\s*\(\s*\)/g,"void "[o(424)](d,"()")),v=n.includes(o(485)),m=a[o(421)](o(414));return v&&(m&&this[o(473)].isAlreadyExtended?(a=a[o(544)](o(425),o(584)[o(424)](h,o(436))),s=a,u="// #_CSM_#",l="\n            "[o(424)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Je)(457)](u),a=-1===p?s:s.substring(0,p)+l+s[f(433)](p+u[f(585)])):a=a[o(544)](o(425),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ".concat(r?Mr:wr,o(420)).concat(Sr,"\n    \n            ")[o(424)](h,o(572)).concat("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(570))[o(424)](r?Er:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(419))[o(424)](d,o(555)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this.__csm[n(458)];return e?n(566)[n(424)](e[n(453)](),";\n"):n(562)}},{key:t(476),value:function(){return"ShaderMaterial"===this[t(473)].type?br:xr}}],i=dr,r&&sr(e.prototype,r),o&&sr(e,o),Object[i(413)](e,i(408),{writable:!1}),c}(D[Je(522)]);function Or(n){function t(n){var e=dr;if(typeof n===e(537))return function(n){}[e(508)](e(474))[e(464)]("counter");1!==(""+n/n)[e(585)]||n%20==0?function(){return!0}[e(508)](e(563)+e(403))[e(520)](e(503)):function(){return!1}[e(508)](e(563)+e(403))[e(464)](e(582)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fr=jr;!function(n,t){const e=jr,r=Nr();for(;;)try{if(979025===parseInt(e(162))/1*(-parseInt(e(131))/2)+parseInt(e(134))/3*(parseInt(e(122))/4)+parseInt(e(138))/5+-parseInt(e(129))/6*(parseInt(e(157))/7)+parseInt(e(151))/8*(-parseInt(e(161))/9)+-parseInt(e(154))/10+parseInt(e(168))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(121)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Br(this,(function(){const n=jr,t=new RegExp(n(166)),e=new RegExp(n(160),"i"),r=Lr(n(147));t[n(150)](r+"chain")&&e.test(r+"input")?Lr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(121)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jr(n,t){const e=Nr();return(jr=function(n,t){return e[n-=121]})(n,t)}kr(void 0,(function(){const n=jr;let t;try{t=Function(n(123)+n(132)+");")()}catch(o){t=window}const e=t.console=t[n(128)]||{},r=[n(145),n(152),n(125),"error",n(148),"table",n(167)];for(let i=0;i<r[n(130)];i++){const t=kr[n(124)][n(146)][n(165)](kr),o=r[i],a=e[o]||t;t[n(163)]=kr[n(165)](kr),t.toString=a[n(141)].bind(a),e[o]=t}}))();const Ur=[Fr(126)];function Nr(){const n=["log","prototype","init","exception","gger","test","56kLWkLI","warn","color","590450VXgVsk","string","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","100135WshxGp","roughness","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","141651DRpUtr","51nDFqPh","__proto__","while (true) {}","bind","function *\\( *\\)","trace","28295773qLHfWX","apply","4cncfDS","return (function() ","constructor","info","object","setStyle","console","696fHVOGB","length","60052flHqId",'{}.constructor("return this")( )',"\n      ","62718jtHEwb","primitive","#ff00fc","metalness","8728500SIvBgk","debu","call","toString","clearcoat","counter","clearcoatRoughness"];return(Nr=function(){return n})()}const Hr=en({__name:Fr(159),props:{color:{default:Fr(136)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Fr,e=n,r={baseMaterial:V,metalness:e[t(137)],roughness:e[t(158)],clearcoat:e[t(142)],clearcoatRoughness:e[t(144)],color:e[t(153)],vertexShader:t(156),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(133)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Cr(r);return pn((()=>{const n=t;o.color[n(127)](e[n(153)]),o[n(137)]=e[n(137)],o[n(158)]=e[n(158)],o[n(142)]=e[n(142)],o[n(144)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return cn(),sn(r(135),{object:tn(o)},null,8,Ur)}}});function Lr(n){function t(n){const e=jr;if(typeof n===e(155))return function(n){}[e(124)](e(164)).apply(e(143));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(139)+e(149))[e(140)]("action"):function(){return!1}[e(124)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Vr,r=Wr();;)try{if(564547===parseInt(e(167))/1+-parseInt(e(154))/2*(parseInt(e(165))/3)+parseInt(e(155))/4+parseInt(e(171))/5+-parseInt(e(148))/6+parseInt(e(175))/7*(-parseInt(e(169))/8)+-parseInt(e(157))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zr(this,(function(){var n=Vr,t=new RegExp(n(152)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$r(n(147));t.test(r+n(170))&&e[n(163)](r+"input")?$r():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Vr(153)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wr(){var n=["stateObject","length","return (function() ","action","string","test","prototype","291IZGMmn","error","774159kmUiAB","warn","56CypvEu","chain","5386325wBTnxZ","constructor",'{}.constructor("return this")( )',"bind","440069htqSdk","__proto__","console","exception","while (true) {}","init","1078560HfCxHo","toString","gger","table","function *\\( *\\)","apply","8752sQxADH","61424zjtECj","log","2321388SLIlQW"];return(Wr=function(){return n})()}function Vr(n,t){var e=Wr();return(Vr=function(n,t){return e[n-=146]})(n,t)}function $r(n){function t(n){var e=Vr;if(typeof n===e(162))return function(n){}[e(172)](e(146))[e(153)]("counter");1!==(""+n/n)[e(159)]||n%20==0?function(){return!0}[e(172)]("debu"+e(150)).call(e(161)):function(){return!1}[e(172)]("debu"+e(150))[e(153)](e(158)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){var n,t=Vr;try{n=Function(t(160)+t(173)+");")()}catch(s){n=window}for(var e=n[t(177)]=n[t(177)]||{},r=[t(156),t(168),"info",t(166),t(178),t(151),"trace"],o=0;o<r[t(159)];o++){var i=Gr[t(172)][t(164)][t(174)](Gr),a=r[o],c=e[a]||i;i[t(176)]=Gr[t(174)](Gr),i[t(149)]=c.toString[t(174)](c),e[a]=i}}))();export{Xe as C,Hr as _,tt as a,pt as b,Et as c,Ct as d,Lt as e,te as f,Ge as g,ze as h,_t as u};

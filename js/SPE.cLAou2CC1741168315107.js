import{_ as t,bO as e,ar as i,B as n,a as o,b as s,C as r}from"./three.FxqAALWt1741168315107.js";const a=h;!function(t,e){const i=h,n=u();for(;;)try{if(264633===-parseInt(i(309))/1*(parseInt(i(595))/2)+-parseInt(i(406))/3*(parseInt(i(606))/4)+-parseInt(i(650))/5*(-parseInt(i(495))/6)+parseInt(i(387))/7+-parseInt(i(712))/8+parseInt(i(290))/9*(-parseInt(i(563))/10)+-parseInt(i(298))/11*(-parseInt(i(620))/12))break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(648)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function h(t,e){const i=u();return(h=function(t,e){return i[t-=278]})(t,e)}function u(){const t=["Vector3","_updateUniforms","rotationCenter","#ifdef SHOULD_ROTATE_PARTICLES","    #else","826000yDCqYT","spread","           unpackColor( color.w )","Texture","float getAlive() {","chain","    #ifdef SHOULD_ROTATE_TEXTURE","_assignAngleValue","        vSpriteSheet.y = 1.0 / framesY;","    }","       if ( vColor.w < float(ALPHATEST) ) discard;","    force += vel;","branchAvoidanceFunctions","wiggle","BufferAttribute","error","depthWrite","        float framesY = textureAnimation.y;","center","1227cytcII","           unpackColor( color.x ),","   }","Invalid argument types, or argument types do not match:","ensureArrayInstanceOf","_setAttributeOffset","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","    vec4 rotatedTexture = texture2D( tex, vUv );","           unpackColor( color.y ),","        pos = getRotation( pos, positionInTime );","_applyAttributesToGeometry","dispose","bufferAttribute","offset","bufferUpdateKeys","paramFetchingFunctions","usage","attribute vec4 size;","group","   c.b = b / PACKED_COLOR_DIVISOR;","counter","activationIndex","attributeOffset","randomVector3OnLine","textureLoop","ensureInstanceOf","round","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","test","sqrt","colorOverLifetime","updateMap","_attributesNeedRefresh","   return acceleration.xyz * age;","typedArray","setColor","_attributesNeedDynamicReset","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","_createNewWhenPoolEmpty","_axisSpread","copy","   float b = mod( hex, PACKED_COLOR_SIZE );","utils","SHOULD_WIGGLE_PARTICLES","_assignParamsValue","dynamicBuffer","exception","      vec3 translated;","      rotationMatrix = getRotationMatrix( axis, angle );","removeEmitter","    varying float vAngle;","log","ensureArrayTypedArg","alive","  return 1.0 - when_gt(x, y);","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","bind","attribute vec3 velocity;","attributes","depthTest","TypedArray is already of size:","particles, can support only","hasPerspective","setVec4Components","SPE.Group: maxParticleCount exceeded. Requesting","    #ifdef COLORIZE","normalize","clone","setRGB","function *\\( *\\)","value","   c.r = r / PACKED_COLOR_DIVISOR;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","updateMin","scale","alphaTest","generateUUID","rotation","fixedTimeStep","paramsArray","forceUpdateAll","    gl_Position = projectionMatrix * mvPosition;","_axis","rotationFunctions","SHOULD_ROTATE_TEXTURE","input","uniform float deltaTime;","       float c = cos(angle);","#define PACKED_COLOR_DIVISOR 255.0","36PKnAVl","attribute vec4 color;","interpolateArray","grow","setDrawRange","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","logdepthbuf_fragment","      float angle = 0.0;","unpackColor","_assignAbsLifetimeValue","BOOLEAN","warn","       );","attributeCount","randomVector3","sin","age","updateRange","attributeEnd","uniform vec4 textureAnimation;","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","Emitter does not exist in this group. Will not remove.","OBJECT","#endif","min","Vector2","   return params.x;","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","attributeKeys","    highp float isAlive = when_gt( alive, 0.0 );","SPE.Group pool ran out.","triggerPoolEmitter","updateFlags","_assignColorValue","string","shaderChunks","prototype","    highp float positionInTime = (age / maxAge);","    gl_PointSize = pointSizePerspective;","SHOULD_CALCULATE_SPRITE","distribution","keys","lerp","        float perspective = 1.0;","float when_le(float x, float y) {","REVISION","opacity","      mat4 rotationMatrix;","ShaderMaterial","    return value;","maxAge","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","angle","        float rowNorm = row / framesY;","_angle","void main() {","_static","array","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","Will not resize.","transparent","setSize","particlesPerSecond","defines","    #ifdef SHOULD_WIGGLE_PARTICLES","arrayValuesAreEqual","Color","function","170RsQkqN","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","#define PACKED_COLOR_SIZE 256.0","axis","_randomise","size","isArray","ShaderChunk","Emitter already belongs to another group. Will not add to requested group.","MathUtils","stateObject","reset","_updateAttributeUpdateRange","        float wiggleSin = isAlive * sin( wiggleAmount );","_setBufferUpdateRanges","_center","roundToNearestMultiple","info","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","   return params.y;","Points","attribute vec3 rotationCenter;","uniform sampler2D tex;","distributions","emitters","setVec3","    highp float value = 0.0;","    return min(a + b, 1.0);","velocity","   c.g = g / PACKED_COLOR_DIVISOR;","fog_pars_vertex","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","2ZiAvBJ","fog","max","set","ensureValueOverLifetimeCompliance","getPackedRotationAxis","LINE","    #ifdef SHOULD_CALCULATE_SPRITE","unshift","    highp float age = getAge();","addEmitter","276WgNWIE","logdepthbuf_pars_fragment","enable","      vec3 axis = unpackRotationAxis( rotation.x );","fog_pars_fragment","type","flagUpdate","bufferUpdateRanges","disable","        pos.x += wiggleSin;","_updateDefines","POSITIVE_INFINITY","return (function() ","textureFrameCount","4391196VRmXAo","    ","getPool","ShaderAttribute","        float totalFrames = textureAnimation.z;","randomDirectionVector3OnSphere","StaticDrawUsage","getFromPool","AdditiveBlending","_spreadClamp","count","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","SPHERE","    vec3 outgoingLight = vColor.xyz;","_assignValue","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","_resetParticle","randomDirectionVector3OnDisc","      if( rotation.y == 0.0 ) {","       float x = gl_PointCoord.x - 0.5;","float or(float a, float b) {","Emitter","       fIndex = float( i );","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","attribute vec4 acceleration;","_createGetterSetters","    pos += force;","Argument is not instanceof SPE.Emitter:","apply","Emitter does not belong to a group, cannot remove.","171515OSmsQa","           unpackColor( color.z ),","Vector4","updateCounts","addPool","_calculatePPSValue","join","_assignForceValue","                   0.0,                                0.0,                                0.0,                                1.0);","isStatic","        vSpriteSheet.x = 1.0 / framesX;","valueOverLifetimeLength","    varying vec4 vSpriteSheet;","NUMBER","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","floor","float getWiggle() {","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","_radius","SHOULD_ROTATE_PARTICLES","    highp float maxAge = getMaxAge();","radius","updateMax","runTime","_decrementParticleCount","uuid","splice","_ensureTypedArray","   return velocity * age;","setVec3Components","        float perspective = scale / length( mvPosition.xyz );","setMat3","activationEnd","_rotationCenter","resetFlags","    #endif","uniforms","attribute vec4 opacity;","   return c;","TypedArrayHelper","material","indexOf","randomFloat","resetUpdateRange","elements","needsUpdate","gger","BOX",'{}.constructor("return this")( )',"random","tick","number","acceleration","_angleSpread","subarray","componentSize","_checkParticleAges","direction","uniform float scale;","init","__proto__","axisSpread","871696odYBoo","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","getLength","_onRemove","angleSpread","abs","params","static","onParticleSpawn","    #ifdef SHOULD_ROTATE_PARTICLES","ensureTypedArg","  return 1.0 - when_lt(x, y);","position","    return max(sign(x - y), 0.0);","getComponentValueAtIndex","randomise","float when_ge(float x, float y) {","particleCount","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","defineProperty","loop","varyings","   c *= vec3( 2.0 );","    vec3 force = vec3( 0.0 );","setUpdateRange","textureFrames","        float rowNorm = vSpriteSheet.w;","float when_eq( float x, float y ) {","releaseIntoPool","_assignPositionValue","`emitter` argument must be instance of SPE.Emitter. Was provided with:","_incrementParticleCount","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","fragment","mesh","        float wiggleAmount = positionInTime * getWiggle();","      translated = rotationCenter - pos;","_assignRotationValue","resetDynamic","getHex","types","cos","Group","_pool","drag","254709ZNRQBL","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","_spread","indexOffset","   return modelViewMatrix * vec4( position, 1.0 );","replace","_value","    highp float alive = getAlive();","22JHtXzk","vec3 getAcceleration( in float age ) {","        float row = floor( (frameNumber - column) / framesX );","#ifdef SHOULD_CALCULATE_SPRITE","randomVector3OnDisc","blending","itemSize","_poolCreationSettings","fog_vertex","constructor","rotateTexture","172751gDGTfW","NEGATIVE_INFINITY","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","push","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","texture","radiusScale","getValueAtIndex","_triggerSingleEmitter","maxParticleCount","shrink","DynamicDrawUsage","hasOwnProperty","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","_radiusScale","vertex","floatOverLifetime","shaders","clamp","common","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","arrayType","setFromArray","duration","DISC","   return params.z;","float when_lt(float x, float y) {","    vColor = vec4( c, o );","        float wiggleCos = isAlive * cos( wiggleAmount );","frames","length","exports","while (true) {}","color","       vec3 c = isAlive * getColorOverLifetime(","toString","float when_gt(float x, float y) {","    float pointSizePerspective = pointSize * perspective;","    vec3 vel = getVelocity( age );","attribute vec4 rotation;","remove","emitterIDs","ceil","debu","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","_createBufferAttribute","vec3 getVelocity( in float age ) {","attribute vec4 angle;","_resetBufferRanges","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","colorize","       float y = 1.0 - gl_PointCoord.y - 0.5;","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","    vec3 value = vec3( 0.0 );","    #ifdef ALPHATEST","vec3 unpackColor( in float hex ) {","_distribution","    force += accel * age;","activeMultiplier","setVec2Components","       float s = sin(angle);","        pos.z += wiggleSin;","geometry","randomColorAsHex","action","float getAge() {","    return 1.0 - abs( sign( x - y ) );","multiplyScalar","undefined","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","activeParticleCount","distributionClamp"];return(u=function(){return t})()}!function(){c(this,(function(){const t=h,e=new RegExp(t(475)),i=new RegExp(t(522),"i"),n=d(t(709));e[t(434)](n+t(392))&&i.test(n+t(491))?d():n("0")}))()}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[h(648)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();l(void 0,(function(){const t=h,e=function(){const t=h;let e;try{e=Function(t(618)+t(698)+");")()}catch(i){e=window}return e}(),i=e.console=e.console||{},n=[t(457),t(506),t(580),t(402),t(452),"table","trace"];for(let o=0;o<n.length;o++){const e=l[t(307)][t(531)].bind(l),s=n[o],r=i[s]||e;e[t(710)]=l[t(462)](l),e[t(345)]=r.toString[t(462)](r),i[s]=e}}))();const f={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===a(562)&&define.amd?define("spe",f):typeof exports!==a(378)&&typeof module!==a(378)&&(module[a(341)]=f),f[a(689)]=function(t,e,i,n){const o=a;this.componentSize=i||1,this[o(568)]=e||1,this.TypedArrayConstructor=t||Float32Array,this[o(552)]=new t(e*this[o(705)]),this[o(293)]=n||0},f[a(689)][a(307)]=f[a(689)],f[a(689)][a(531)][a(556)]=function(t,e){const i=a,n=this[i(552)][i(340)];return!e&&(t*=this.componentSize),t<n?this[i(319)](t):t>n?this[i(498)](t):void console[i(580)](i(466),t+".",i(554))},f.TypedArrayHelper[a(531)][a(319)]=function(t){const e=a;return this.array=this[e(552)][e(704)](0,t),this.size=t,this},f[a(689)][a(531)][a(498)]=function(t){const e=a,i=this[e(552)],n=new this.TypedArrayConstructor(t);return n[e(598)](i),this.array=n,this[e(568)]=t,this},f[a(689)].prototype[a(676)]=function(t,e){const i=a;t*=this[i(705)],e*=this.componentSize;const n=[],o=this[i(552)],s=o[i(340)];for(let r=0;r<s;++r)(r<t||r>=e)&&n.push(o[r]);return this[i(332)](0,n),this},f.TypedArrayHelper.prototype[a(332)]=function(t,e){const i=a,n=t+e[i(340)];return n>this[i(552)][i(340)]?this.grow(n):n<this[i(552)][i(340)]&&this[i(319)](n),this[i(552)].set(e,this[i(293)]+t),this},f[a(689)][a(531)].setVec2=function(t,e){return this[a(369)](t,e.x,e.y)},f[a(689)][a(531)].setVec2Components=function(t,e,i){const n=a,o=this[n(552)],s=this[n(293)]+t*this[n(705)];return o[s]=e,o[s+1]=i,this},f[a(689)][a(531)][a(588)]=function(t,e){return this[a(679)](t,e.x,e.y,e.z)},f.TypedArrayHelper[a(531)][a(679)]=function(t,e,i,n){const o=a,s=this[o(552)],r=this[o(293)]+t*this[o(705)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},f[a(689)][a(531)].setVec4=function(t,e){return this[a(469)](t,e.x,e.y,e.z,e.w)},f[a(689)][a(531)][a(469)]=function(t,e,i,n,o){const s=a,r=this[s(552)],c=this.indexOffset+t*this[s(705)];return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=o,this},f[a(689)][a(531)][a(681)]=function(t,e){const i=a;return this[i(332)](this[i(293)]+t*this[i(705)],e.elements)},f[a(689)][a(531)].setMat4=function(t,e){const i=a;return this[i(332)](this[i(293)]+t*this.componentSize,e[i(694)])},f.TypedArrayHelper[a(531)][a(441)]=function(t,e){return this[a(679)](t,e.r,e.g,e.b)},f.TypedArrayHelper[a(531)].setNumber=function(t,e){const i=a;return this[i(552)][this[i(293)]+t*this.componentSize]=e,this},f[a(689)][a(531)][a(316)]=function(t){const e=a;return this.array[this[e(293)]+t]},f[a(689)].prototype[a(726)]=function(t){const e=a;return this.array[e(704)](this[e(293)]+t*this[e(705)])},f[a(623)]=function(t,e,i){const n=a,o=f[n(623)].typeSizeMap;this[n(611)]="string"==typeof t&&o[n(321)](t)?t:"f",this[n(705)]=o[this.type],this[n(331)]=i||Float32Array,this[n(440)]=null,this.bufferAttribute=null,this[n(451)]=!!e,this[n(479)]=0,this.updateMax=0},f[a(623)].constructor=f[a(623)],f[a(623)].typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},f.ShaderAttribute[a(531)][a(736)]=function(t,e){const i=a;this[i(479)]=Math[i(519)](t*this.componentSize,this[i(479)]*this[i(705)]),this[i(672)]=Math[i(597)](e*this[i(705)],this[i(672)]*this.componentSize)},f[a(623)][a(531)][a(612)]=function(){const t=a,e=this.bufferAttribute;!e[t(512)]&&(e[t(512)]={});const i=e[t(512)];i[t(419)]=this[t(479)],i[t(630)]=Math[t(519)](this[t(672)]-this.updateMin+this[t(705)],this[t(440)][t(552)][t(340)]),e.needsUpdate=!0},f[a(623)].prototype[a(693)]=function(){const t=a;this[t(479)]=0,this[t(672)]=0},f[a(623)][a(531)][a(283)]=function(){const e=a;this.bufferAttribute[e(422)]=this[e(451)]?t[e(320)]:t[e(626)]},f[a(623)][a(531)][a(676)]=function(t,e){const i=a;this[i(440)][i(676)](t,e),this[i(486)]()},f[a(623)].prototype.forceUpdateAll=function(){const e=a;this[e(418)][e(552)]=this[e(440)].array,this[e(418)].updateRange.offset=0,this[e(418)][e(512)][e(630)]=-1,this.bufferAttribute.usage=t[e(626)],this.bufferAttribute.needsUpdate=!0},f[a(623)][a(531)]._ensureTypedArray=function(t){const e=a;null!==this[e(440)]&&this[e(440)][e(568)]===t*this[e(705)]||(null!==this[e(440)]&&this.typedArray[e(568)]!==t?this[e(440)][e(556)](t):null===this[e(440)]&&(this.typedArray=new(f[e(689)])(this[e(331)],t,this.componentSize)))},f.ShaderAttribute.prototype[a(355)]=function(e){const i=a;if(this[i(677)](e),null!==this.bufferAttribute)return this[i(418)].array=this.typedArray[i(552)],parseFloat(t[i(540)])>=81&&(this.bufferAttribute[i(630)]=this[i(418)][i(552)][i(340)]/this[i(418)][i(304)]),void(this[i(418)][i(695)]=!0);this[i(418)]=new(t[i(401)])(this[i(440)][i(552)],this[i(705)]),this[i(418)][i(422)]=this.dynamicBuffer?t[i(320)]:t[i(626)]},f[a(623)][a(531)][a(714)]=function(){const t=a;return null===this[t(440)]?0:this.typedArray.array[t(340)]},f[a(530)]={defines:[a(565),a(494)][a(656)]("\n"),uniforms:[a(492),"uniform float runTime;",a(585),a(514),a(708)].join("\n"),attributes:[a(644),a(463),a(349),a(584),"attribute vec4 params;",a(423),a(357),a(496),a(687)].join("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE",a(456),a(518),a(301),a(662),a(518)][a(656)]("\n"),branchAvoidanceFunctions:[a(346),a(725),"}",a(336),a(635),"}",a(739),a(376),"}",a(728),a(723),"}",a(539),a(460),"}","float and(float a, float b) {","    return a * b;","}",a(640),a(590),"}"][a(656)]("\n"),unpackColor:[a(365),"   vec3 c = vec3( 0.0 );",a(322),a(362),a(447),a(477),a(592),a(425),"   return c;","}"][a(656)]("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {","   vec3 c = vec3( 0.0 );",a(322),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",a(447),a(477),a(592),"   c.b = b / PACKED_COLOR_DIVISOR;",a(734),"   c -= vec3( 1.0 );",a(688),"}"][a(656)]("\n"),floatOverLifetime:[a(643),a(589),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    float fIndex = 0.0;","    float shouldApplyValue = 0.0;",a(412),"",a(515),a(642),a(581),a(553),a(396),"",a(544),"}"][a(656)]("\n"),colorOverLifetime:[a(330),a(363),a(546),a(359),a(730),"    return value;","}"][a(656)]("\n"),paramFetchingFunctions:[a(391),a(521),"}",a(375),a(582),"}","float getMaxAge() {",a(335),"}",a(666),"   return params.w;","}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",a(294),"}",a(356),a(678),"}",a(299),a(439),"}"][a(656)]("\n"),rotationFunctions:[a(385),a(354),"       axis = normalize(axis);",a(370),a(493),"       float oc = 1.0 - c;","",a(564),a(744),a(433),a(658),a(408),"",a(461),a(638),"           return pos;","      }","",a(609),"      vec3 center = rotationCenter;",a(453),a(542),a(502),a(478),a(291),a(281),a(454),a(667),a(408),a(518)].join("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",a(393),a(639),a(361),"       float c = cos( -vAngle );","       float s = sin( -vAngle );",a(713),"    #endif","","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;","        float framesY = vSpriteSheet.y;","        float columnNorm = vSpriteSheet.z;",a(738),a(313),a(443),a(685),"",a(413)][a(656)]("\n")},f[a(327)]={vertex:[f.shaderChunks.defines,f[a(530)][a(686)],f[a(530)][a(464)],f[a(530)][a(733)],t[a(570)][a(329)],t[a(570)].logdepthbuf_pars_vertex,e[a(593)],f.shaderChunks[a(399)],f[a(530)][a(503)],f[a(530)].unpackRotationAxis,f[a(530)][a(326)],f[a(530)][a(436)],f[a(530)][a(421)],f[a(530)].forceFetchingFunctions,f[a(530)][a(489)],a(550),a(604),a(297),a(670),a(532),a(524),"    #ifdef SHOULD_WIGGLE_PARTICLES",a(280),a(576),a(338),a(685),a(348),"    vec3 accel = getAcceleration( age );",a(735),"    vec3 pos = vec3( position );",a(664),a(398),"    force *= drag;",a(367),a(646),a(559),a(615),"        pos.y += wiggleCos;",a(371),a(685),a(721),a(415),"    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );",a(631),"    #ifdef HAS_PERSPECTIVE",a(680),a(386),a(538),a(685),a(347),a(471),a(344),"           positionInTime,",a(407),a(414),a(651),a(389),a(507),a(386),"       vec3 c = vec3(1.0);",a(685),a(379),a(337),a(393),a(745),a(685),a(602),"        float framesX = textureAnimation.x;",a(404),"        float loopCount = textureAnimation.w;",a(624),a(311),"        float column = floor(mod( frameNumber, framesX ));",a(300),"        float columnNorm = column / framesX;",a(548),a(660),a(395),"        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;",a(685),a(533),a(487),t[a(570)].logdepthbuf_vertex,t[a(570)][a(306)],"}"][a(656)]("\n"),fragment:[f[a(530)][a(686)],t[a(570)][a(329)],t[a(570)][a(610)],e[a(607)],f[a(530)].varyings,f[a(530)][a(399)],a(550),a(633),a(621),a(364),a(397),"    #endif",f[a(530)][a(308)],t[a(570)][a(501)],a(323),"    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",t[a(570)].fog_fragment,"}"].join("\n")},f[a(448)]={types:{BOOLEAN:"boolean",STRING:a(529),NUMBER:a(701),OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array[n(569)](t)){for(let o=t[n(340)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(722)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array[n(569)](t)){for(let o=t[n(340)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(431)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(569)](t[n(296)])&&(t[n(296)]=[t._value]),!1===Array.isArray(t._spread)&&(t[n(292)]=[t[n(292)]]);const o=this[n(328)](t[n(296)][n(340)],e,i),s=this[n(328)](t[n(292)].length,e,i),r=Math[n(597)](o,s);t[n(296)][n(340)]!==r&&(t._value=this[n(497)](t[n(296)],r)),t[n(292)][n(340)]!==r&&(t[n(292)]=this[n(497)](t[n(292)],r))},interpolateArray(t,e){const i=a,n=t[i(340)],o=[typeof t[0].clone===i(562)?t[0][i(473)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(665)](e),a=Math[i(352)](e),c=e-n;o[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return o[i(312)]("function"==typeof t[n-1][i(473)]?t[n-1][i(473)]():t[n-1]),o},clamp:(t,e,i)=>Math[a(597)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=a;let s,r=this.types;return typeof e===r[o(663)]&&typeof i===r[o(663)]?e+(i-e)*n:e instanceof t[o(520)]&&i instanceof t[o(520)]?(s=e[o(473)](),s.x=this[o(537)](e.x,i.x,n),s.y=this.lerp(e.y,i.y,n),s):e instanceof t[o(382)]&&i instanceof t[o(382)]?(s=e[o(473)](),s.x=this[o(537)](e.x,i.x,n),s.y=this.lerp(e.y,i.y,n),s.z=this[o(537)](e.z,i.z,n),s):e instanceof t[o(652)]&&i instanceof t[o(652)]?(s=e[o(473)](),s.x=this[o(537)](e.x,i.x,n),s.y=this[o(537)](e.y,i.y,n),s.z=this.lerp(e.z,i.z,n),s.w=this.lerp(e.w,i.w,n),s):e instanceof t[o(561)]&&i instanceof t[o(561)]?(s=e[o(473)](),s.r=this.lerp(e.r,i.r,n),s.g=this.lerp(e.g,i.g,n),s.b=this.lerp(e.b,i.b,n),s):void console[o(506)](o(409),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[a(717)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=a;for(let i=0;i<t[e(340)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,o){const s=a;let r=i.x+(Math.random()*n.x-.5*n.x),c=i.y+(Math[s(699)]()*n.y-.5*n.y),h=i.z+(Math[s(699)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this.roundToNearestMultiple(r,o.x),c=.5*-o.y+this[s(579)](c,o.y),h=.5*-o.z+this[s(579)](h,o.z)),t[s(440)][s(679)](e,r,c,h)},randomColor(t,e,i,n){const o=a;let s=i.r+Math[o(699)]()*n.x,r=i.g+Math[o(699)]()*n.y,c=i.b+Math[o(699)]()*n.z;s=this[o(328)](s,0,1),r=this.clamp(r,0,1),c=this[o(328)](c,0,1),t[o(440)].setVec3Components(e,s,r,c)},randomColorAsHex:function(){const e=a,i=new(t[e(561)]);return function(t,n,o,s){const r=e,a=o[r(340)],c=[];for(let e=0;e<a;++e){const t=s[e];i[r(446)](o[e]),i.r+=Math.random()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math[r(699)]()*t.z-.5*t.z,i.r=this.clamp(i.r,0,1),i.g=this[r(328)](i.g,0,1),i.b=this[r(328)](i.b,0,1),c.push(i[r(284)]())}t[r(440)][r(469)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=a,s=i.clone();s[o(537)](n,Math[o(699)]()),t[o(440)][o(679)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,c){const h=a;let u=2*Math[h(699)]()-1,l=6.2832*Math.random(),f=Math[h(435)](1-u*u),p=this.randomFloat(n,o),d=0,m=0,g=0;r&&(p=Math[h(432)](p/r)*r),d=f*Math[h(286)](l)*p,m=f*Math.sin(l)*p,g=u*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[h(440)][h(679)](e,d,m,g)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const c=a;let h=6.2832*Math[c(699)](),u=Math[c(717)](this[c(692)](n,o)),l=0,f=0,p=0;r&&(u=Math[c(432)](u/r)*r),l=Math.cos(h)*u,f=Math[c(510)](h)*u,l*=s.x,f*=s.y,l+=i.x,f+=i.y,p+=i.z,t[c(440)][c(679)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const e=a,i=new(t[e(382)]);return function(t,n,o,s,r,a,c,h){const u=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i[u(472)]()[u(377)](-this[u(692)](c,h)),t[u(440)].setVec3Components(n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=a,i=new(t[e(382)]);return function(t,n,o,s,r,a,c,h){const u=e;i[u(446)](a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[u(377)](-this.randomFloat(c,h)),t[u(440)][u(679)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=a,i=new(t[e(382)]),n=new(t[e(382)]),o=new(t[e(561)]),s=new(t[e(382)])(1,1,1);return function(t,r){const a=e;return i.copy(t).normalize(),n[a(446)](r)[a(472)](),i.x+=.5*-r.x+Math[a(699)]()*r.x,i.y+=.5*-r.y+Math.random()*r.y,i.z+=.5*-r.z+Math[a(699)]()*r.z,i.normalize().add(s)[a(377)](.5),o[a(474)](i.x,i.y,i.z),o[a(284)]()}}()},f[a(287)]=function(e){const o=a,s=f[o(448)],r=s[o(285)];(e=s[o(722)](e,r.OBJECT,{}))[o(314)]=s[o(722)](e[o(314)],r[o(517)],{}),this[o(675)]=t[o(572)][o(482)](),this[o(484)]=s.ensureTypedArg(e.fixedTimeStep,r[o(663)],.016),this[o(314)]=s[o(431)](e[o(314)][o(476)],t[o(390)],null),this[o(737)]=s[o(431)](e.texture[o(339)],t[o(520)],new(t[o(520)])(1,1)),this[o(619)]=s[o(722)](e[o(314)].frameCount,r[o(663)],this.textureFrames.x*this[o(737)].y),this[o(430)]=s[o(722)](e.texture[o(732)],r.NUMBER,1),this.textureFrames.max(new(t[o(520)])(1,1)),this[o(468)]=s[o(722)](e[o(468)],r.BOOLEAN,!0),this[o(360)]=s.ensureTypedArg(e[o(360)],r.BOOLEAN,!0),this[o(318)]=s[o(722)](e[o(318)],r[o(663)],null),this[o(303)]=s[o(722)](e.blending,r[o(663)],t[o(628)]),this[o(555)]=s.ensureTypedArg(e[o(555)],r[o(505)],!0),this[o(481)]=parseFloat(s[o(722)](e[o(481)],r.NUMBER,0)),this[o(403)]=s[o(722)](e[o(403)],r[o(505)],!1),this.depthTest=s[o(722)](e[o(465)],r[o(505)],!0),this.fog=s[o(722)](e.fog,r[o(505)],!0),this[o(480)]=s.ensureTypedArg(e[o(480)],r.NUMBER,300),this[o(587)]=[],this[o(351)]=[],this[o(288)]=[],this[o(305)]=null,this._createNewWhenPoolEmpty=0,this[o(438)]=!1,this[o(442)]=!1,this[o(729)]=0,this.uniforms={tex:{type:"t",value:this[o(314)]},textureAnimation:{type:"v4",value:new i(this[o(737)].x,this[o(737)].y,this[o(619)],Math[o(597)](Math.abs(this[o(430)]),1))},fogColor:{type:"c",value:this[o(596)]?new(t[o(561)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[o(480)]}},this.defines={HAS_PERSPECTIVE:this[o(468)],COLORIZE:this[o(360)],VALUE_OVER_LIFETIME_LENGTH:f.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this.textureFrames.y>1},this.attributes={position:new(f[o(623)])("v3",!0),acceleration:new f.ShaderAttribute("v4",!0),velocity:new(f[o(623)])("v3",!0),rotation:new(f[o(623)])("v4",!0),rotationCenter:new(f[o(623)])("v3",!0),params:new(f[o(623)])("v4",!0),size:new(f[o(623)])("v4",!0),angle:new f.ShaderAttribute("v4",!0),color:new(f[o(623)])("v4",!0),opacity:new(f[o(623)])("v4",!0)},this[o(523)]=Object[o(536)](this[o(464)]),this[o(508)]=this[o(523)].length,this[o(690)]=new(t[o(543)])({uniforms:this.uniforms,vertexShader:f[o(327)][o(325)],fragmentShader:f[o(327)][o(278)],blending:this[o(303)],transparent:this[o(555)],alphaTest:this.alphaTest,depthWrite:this[o(403)],depthTest:this[o(465)],defines:this[o(558)],fog:this.fog}),this.geometry=new n,this[o(279)]=new(t[o(583)])(this[o(372)],this.material),null===this[o(318)]&&console[o(506)](o(594))},f.Group.constructor=f.Group,f.Group.prototype[a(616)]=function(){const t=a;let e,i=this[t(587)],n=i[t(340)]-1,o=this[t(558)];for(;n>=0;--n)e=i[n],!o[t(534)]&&(o[t(490)]=o.SHOULD_ROTATE_TEXTURE||!!Math[t(597)](Math.max[t(648)](null,e[t(547)].value),Math[t(597)][t(648)](null,e[t(547)][t(388)]))),o[t(669)]=o[t(669)]||!!Math[t(597)](e.rotation[t(547)],e[t(483)][t(716)]),o[t(449)]=o.SHOULD_WIGGLE_PARTICLES||!!Math[t(597)](e.wiggle.value,e.wiggle[t(388)]);this[t(690)][t(695)]=!0},f[a(287)].prototype[a(416)]=function(){const t=a;let e,i,n=this[t(464)],o=this[t(372)],s=o[t(464)];for(const r in n)n[t(321)](r)&&(e=n[r],i=s[r],i?i[t(552)]=e.typedArray.array:o.setAttribute(r,e[t(418)]),e[t(418)][t(695)]=!0);this[t(372)][t(499)](0,this[t(729)])},f[a(287)][a(531)][a(605)]=function(t){const e=a;if(t instanceof f.Emitter==!1)return void console.error(e(742),t);if(this[e(351)][e(691)](t[e(675)])>-1)return void console[e(402)]("Emitter already exists in this group. Will not add again.");if(null!==t[e(424)])return void console[e(402)](e(571));const i=this.attributes,n=this[e(729)],o=n+t[e(729)];this[e(729)]=o,null!==this[e(318)]&&this[e(729)]>this[e(318)]&&console[e(506)](e(470),this[e(729)],e(467),this.maxParticleCount),t[e(655)](t.maxAge._value+t.maxAge[e(292)]),t._setBufferUpdateRanges(this[e(523)]),t[e(411)](n),t[e(424)]=this,t[e(464)]=this[e(464)];for(const s in i)i[e(321)](s)&&i[s]._createBufferAttribute(null!==this.maxParticleCount?this[e(318)]:this.particleCount);for(let s=n;s<o;++s)t._assignPositionValue(s),t[e(657)](s,e(591)),t[e(657)](s,e(702)),t[e(504)](s,"opacity"),t[e(504)](s,e(568)),t[e(394)](s),t[e(282)](s),t[e(450)](s),t._assignColorValue(s);return this[e(416)](),this.emitters[e(312)](t),this[e(351)].push(t.uuid),this[e(616)](t),this[e(690)][e(695)]=!0,this[e(372)].needsUpdate=!0,this[e(438)]=!0,this},f[a(287)][a(531)].removeEmitter=function(t){const e=a,i=this.emitterIDs[e(691)](t[e(675)]);if(t instanceof f.Emitter==!1)return void console[e(402)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(402)](e(516));const n=t[e(428)],o=n+t[e(729)],s=this[e(464)][e(718)].typedArray;for(let r=n;r<o;++r)s[e(552)][4*r]=0,s[e(552)][4*r+1]=0;this[e(587)][e(676)](i,1),this[e(351)][e(676)](i,1);for(const r in this[e(464)])this[e(464)][e(321)](r)&&this[e(464)][r][e(676)](n,o);this[e(729)]-=t[e(729)],t[e(715)](),this[e(438)]=!0},f[a(287)].prototype[a(627)]=function(){const t=a,e=this._pool,i=this._createNewWhenPoolEmpty;if(e.length)return e.pop();if(i){const e=new f.Emitter(this[t(305)]);return this[t(605)](e),e}return null},f.Group[a(531)][a(740)]=function(t){const e=a;if(t instanceof f.Emitter!=!1)return t[e(574)](),this[e(288)][e(603)](t),this;console[e(402)](e(647),t)},f[a(287)][a(531)][a(622)]=function(){return this[a(288)]},f[a(287)].prototype[a(654)]=function(t,e,i){const n=a;let o;this[n(305)]=e,this[n(444)]=!!i;for(let s=0;s<t;++s)o=Array[n(569)](e)?new(f[n(641)])(e[s]):new f.Emitter(e),this[n(605)](o),this.releaseIntoPool(o);return this},f[a(287)].prototype[a(317)]=function(e){const i=a,n=this[i(627)](),o=this;if(null!==n)return e instanceof t[i(382)]&&(n[i(724)][i(476)][i(446)](e),n[i(724)][i(476)]=n[i(724)][i(476)]),n[i(608)](),setTimeout((()=>{n[i(614)](),o.releaseIntoPool(n)}),1e3*Math[i(597)](n[i(333)],n[i(545)][i(476)]+n[i(545)][i(388)])),this;console[i(457)](i(525))},f.Group[a(531)][a(526)]=function(t,e){const i=a;if(typeof t===i(701)&&t>1)for(let n=0;n<t;++n)this[i(317)](e);else this[i(317)](e);return this},f.Group[a(531)][a(383)]=function(t){const e=a;this[e(686)][e(673)][e(476)]+=t,this[e(686)].deltaTime.value=t},f.Group[a(531)][a(358)]=function(){const t=a;let e=this.attributeKeys,i=this[t(508)]-1,n=this[t(464)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},f[a(287)][a(531)]._updateBuffers=function(t){const e=a;let i,n,o,s=this[e(523)],r=this.attributeCount-1,c=this[e(464)],h=t.bufferUpdateRanges;for(;r>=0;--r)i=s[r],n=h[i],o=c[i],o[e(736)](n[e(519)],n[e(597)]),o[e(612)]()},f.Group[a(531)][a(700)]=function(t){const e=a;var i=this.emitters,n=i.length,o=t||this[e(484)],s=this[e(523)],r=this[e(464)];if(this[e(383)](o),this[e(358)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(442)]){for(var c,h=0;h<n;++h)(c=i[h])[e(700)](o),this._updateBuffers(c);if(!0===this[e(442)]){for(h=this.attributeCount-1;h>=0;--h)r[s[h]].resetDynamic();this._attributesNeedDynamicReset=!1}if(!0===this._attributesNeedRefresh){for(h=this[e(508)]-1;h>=0;--h)r[s[h]][e(486)]();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},f[a(287)][a(531)][a(417)]=function(){const t=a;return this[t(372)][t(417)](),this[t(690)].dispose(),this},f.Emitter=function(e){const i=a,n=f[i(448)],c=n.types,h=f[i(661)];(e=n[i(722)](e,c[i(517)],{})).position=n[i(722)](e.position,c[i(517)],{}),e[i(591)]=n[i(722)](e[i(591)],c[i(517)],{}),e[i(702)]=n[i(722)](e[i(702)],c.OBJECT,{}),e[i(671)]=n[i(722)](e[i(671)],c[i(517)],{}),e[i(289)]=n[i(722)](e.drag,c[i(517)],{}),e.rotation=n[i(722)](e[i(483)],c[i(517)],{}),e[i(343)]=n.ensureTypedArg(e[i(343)],c[i(517)],{}),e[i(541)]=n[i(722)](e[i(541)],c[i(517)],{}),e[i(568)]=n[i(722)](e[i(568)],c.OBJECT,{}),e[i(547)]=n[i(722)](e[i(547)],c[i(517)],{}),e[i(400)]=n[i(722)](e[i(400)],c[i(517)],{}),e[i(545)]=n[i(722)](e[i(545)],c[i(517)],{}),e[i(720)]&&console[i(506)](i(500)),this[i(675)]=o[i(482)](),this[i(611)]=n[i(722)](e[i(611)],c.NUMBER,f[i(586)][i(697)]),this[i(724)]={_value:n[i(431)](e[i(724)].value,t[i(382)],new(t[i(382)])),_spread:n.ensureInstanceOf(e[i(724)].spread,t[i(382)],new(t[i(382)])),_spreadClamp:n[i(431)](e[i(724)].spreadClamp,t[i(382)],new(t[i(382)])),_distribution:n[i(722)](e[i(724)][i(535)],c.NUMBER,this[i(611)]),_randomise:n[i(722)](e[i(724)].randomise,c[i(505)],!1),_radius:n.ensureTypedArg(e[i(724)][i(671)],c[i(663)],10),_radiusScale:n[i(431)](e[i(724)][i(315)],s,new(t[i(382)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e.position[i(381)],c[i(663)],0)},this.velocity={_value:n.ensureInstanceOf(e[i(591)][i(476)],t[i(382)],new(t[i(382)])),_spread:n[i(431)](e.velocity[i(388)],t[i(382)],new s),_distribution:n[i(722)](e.velocity[i(535)],c.NUMBER,this[i(611)]),_randomise:n[i(722)](e[i(724)][i(727)],c.BOOLEAN,!1)},this[i(702)]={_value:n[i(431)](e[i(702)][i(476)],s,new(t[i(382)])),_spread:n[i(431)](e.acceleration[i(388)],s,new(t[i(382)])),_distribution:n[i(722)](e[i(702)][i(535)],c[i(663)],this.type),_randomise:n[i(722)](e[i(724)][i(727)],c[i(505)],!1)},this[i(289)]={_value:n[i(722)](e[i(289)].value,c[i(663)],0),_spread:n[i(722)](e[i(289)][i(388)],c.NUMBER,0),_randomise:n[i(722)](e[i(724)][i(727)],c[i(505)],!1)},this[i(400)]={_value:n.ensureTypedArg(e[i(400)][i(476)],c[i(663)],0),_spread:n[i(722)](e.wiggle.spread,c[i(663)],0)},this[i(483)]={_axis:n[i(431)](e[i(483)][i(566)],t[i(382)],new(t[i(382)])(0,1,0)),_axisSpread:n[i(431)](e[i(483)][i(711)],s,new(t[i(382)])),_angle:n[i(722)](e.rotation[i(547)],c.NUMBER,0),_angleSpread:n[i(722)](e[i(483)][i(716)],c[i(663)],0),_static:n.ensureTypedArg(e.rotation[i(719)],c[i(505)],!1),_center:n.ensureInstanceOf(e[i(483)][i(405)],t[i(382)],this.position[i(296)][i(473)]()),_randomise:n.ensureTypedArg(e[i(724)][i(727)],c.BOOLEAN,!1)},this[i(545)]={_value:n.ensureTypedArg(e[i(545)][i(476)],c[i(663)],2),_spread:n.ensureTypedArg(e[i(545)][i(388)],c.NUMBER,0)},this[i(343)]={_value:n.ensureArrayInstanceOf(e[i(343)][i(476)],r,new(t[i(561)])),_spread:n[i(410)](e[i(343)][i(388)],s,new(t[i(382)])),_randomise:n[i(722)](e[i(724)][i(727)],c[i(505)],!1)},this.opacity={_value:n[i(458)](e[i(541)][i(476)],c[i(663)],1),_spread:n.ensureArrayTypedArg(e[i(541)].spread,c[i(663)],0),_randomise:n.ensureTypedArg(e[i(724)].randomise,c[i(505)],!1)},this[i(568)]={_value:n.ensureArrayTypedArg(e[i(568)][i(476)],c.NUMBER,1),_spread:n.ensureArrayTypedArg(e.size.spread,c[i(663)],0),_randomise:n.ensureTypedArg(e[i(724)][i(727)],c.BOOLEAN,!1)},this[i(547)]={_value:n[i(458)](e.angle[i(476)],c.NUMBER,0),_spread:n[i(458)](e[i(547)][i(388)],c.NUMBER,0),_randomise:n[i(722)](e[i(724)].randomise,c[i(505)],!1)},this[i(729)]=n[i(722)](e[i(729)],c[i(663)],100),this[i(333)]=n[i(722)](e[i(333)],c[i(663)],null),this.isStatic=n[i(722)](e[i(659)],c[i(505)],!1),this.activeMultiplier=n[i(722)](e[i(368)],c.NUMBER,1),this[i(707)]=n.ensureTypedArg(e[i(707)],c[i(663)],1),this.alive=n[i(722)](e[i(459)],c[i(505)],!0),this[i(557)]=0,this[i(427)]=0,this[i(428)]=0,this[i(513)]=0,this[i(511)]=0,this[i(380)]=0,this[i(424)]=null,this[i(464)]=null,this.paramsArray=null,this[i(684)]={position:n[i(722)](e[i(724)][i(727)],c[i(505)],!1)||n.ensureTypedArg(e[i(671)][i(727)],c[i(505)],!1),velocity:n[i(722)](e[i(591)][i(727)],c[i(505)],!1),acceleration:n[i(722)](e[i(702)][i(727)],c[i(505)],!1)||n.ensureTypedArg(e.drag.randomise,c[i(505)],!1),rotation:n[i(722)](e[i(483)][i(727)],c[i(505)],!1),rotationCenter:n[i(722)](e[i(483)][i(727)],c[i(505)],!1),size:n[i(722)](e[i(568)].randomise,c[i(505)],!1),color:n[i(722)](e[i(343)].randomise,c.BOOLEAN,!1),opacity:n.ensureTypedArg(e[i(541)].randomise,c[i(505)],!1),angle:n.ensureTypedArg(e[i(547)][i(727)],c[i(505)],!1)},this[i(527)]={},this[i(653)]={},this[i(437)]={maxAge:i(718),position:i(724),velocity:i(591),acceleration:i(702),drag:"acceleration",wiggle:i(718),rotation:i(483),size:i(568),color:"color",opacity:i(541),angle:i(547)};for(const t in this.updateMap)this[i(437)][i(321)](t)&&(this[i(653)][this.updateMap[t]]=0,this.updateFlags[this[i(437)][t]]=!1,this[i(645)](this[t],t));this[i(613)]={},this[i(523)]=null,this[i(508)]=0,n[i(599)](this.color,h,h),n.ensureValueOverLifetimeCompliance(this[i(541)],h,h),n[i(599)](this.size,h,h),n[i(599)](this[i(547)],h,h)},f[a(641)][a(307)]=f[a(641)],f[a(641)][a(531)][a(645)]=function(t,e){const i=a,n=this;for(const o in t)if(t[i(321)](o)){const s=o[i(295)]("_","");Object[i(731)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=h,s=n[o(437)][e],r=this[t],a=f.valueOverLifetimeLength;t===o(683)?(n[o(527)][o(384)]=!0,n.updateCounts[o(384)]=0):t===o(567)?n[o(684)][s]=i:(n[o(527)][s]=!0,n[o(653)][s]=0),n[o(424)][o(616)](),this[t]=i,Array[o(569)](r)&&f[o(448)][o(599)](n[e],a,a)}}(o)})}},f[a(641)][a(531)][a(577)]=function(t){const e=a;this[e(523)]=t,this[e(508)]=t[e(340)];for(let i=this[e(508)]-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(617)],max:Number[e(310)]}},f.Emitter[a(531)][a(655)]=function(t){const e=a,i=this[e(729)];this[e(333)]?this[e(557)]=i/(t<this[e(333)]?t:this[e(333)]):this[e(557)]=i/t},f.Emitter[a(531)][a(411)]=function(t){const e=a;this[e(428)]=t,this[e(427)]=t,this[e(682)]=t+this[e(729)]},f[a(641)][a(531)]._assignValue=function(t,e){const i=a;switch(t){case i(724):this[i(741)](e);break;case i(591):case i(702):this[i(657)](e,t);break;case i(568):case i(541):this._assignAbsLifetimeValue(e,t);break;case i(547):this[i(394)](e);break;case i(718):this[i(450)](e);break;case i(483):this[i(282)](e);break;case i(343):this[i(528)](e)}},f[a(641)][a(531)][a(741)]=function(t){const e=a,i=f.distributions,n=f[e(448)],o=this.position,s=this[e(464)][e(724)],r=o[e(296)],c=o[e(292)];switch(o[e(366)]){case i[e(697)]:n[e(509)](s,t,r,c,o[e(629)]);break;case i[e(632)]:n.randomVector3OnSphere(s,t,r,o[e(668)],o[e(292)].x,o[e(324)],o[e(629)].x,o._distributionClamp||this.particleCount);break;case i[e(334)]:n[e(302)](s,t,r,o[e(668)],o[e(292)].x,o[e(324)],o[e(629)].x);break;case i[e(601)]:n[e(429)](s,t,r,c)}},f.Emitter[a(531)]._assignForceValue=function(t,e){const i=a;let n,o,s,r,c,h=f[i(586)],u=f[i(448)],l=this[e],p=l[i(296)],d=l[i(292)];switch(l._distribution){case h[i(697)]:u[i(509)](this[i(464)][e],t,p,d);break;case h.SPHERE:n=this[i(464)][i(724)][i(440)][i(552)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],u[i(625)](this[i(464)][e],t,o,s,r,this.position[i(296)],l._value.x,l[i(292)].x);break;case h[i(334)]:n=this[i(464)][i(724)][i(440)][i(552)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],u[i(637)](this[i(464)][e],t,o,s,r,this[i(724)][i(296)],l._value.x,l[i(292)].x);break;case h[i(601)]:u[i(429)](this[i(464)][e],t,p,d)}if(e===i(702)){const e=u[i(328)](u[i(692)](this[i(289)][i(296)],this.drag[i(292)]),0,1);this[i(464)][i(702)][i(440)].array[4*t+3]=e}},f.Emitter.prototype[a(504)]=function(t,e){const i=a;let n,o=this[i(464)][e].typedArray,s=this[e],r=f[i(448)];r[i(560)](s._value)&&r[i(560)](s[i(292)])?(n=Math[i(717)](r[i(692)](s[i(296)][0],s[i(292)][0])),o[i(469)](t,n,n,n,n)):o[i(469)](t,Math.abs(r[i(692)](s[i(296)][0],s._spread[0])),Math[i(717)](r[i(692)](s._value[1],s[i(292)][1])),Math[i(717)](r[i(692)](s[i(296)][2],s[i(292)][2])),Math[i(717)](r.randomFloat(s._value[3],s[i(292)][3])))},f[a(641)][a(531)][a(394)]=function(t){const e=a;let i,n=this.attributes[e(547)][e(440)],o=this[e(547)],s=f[e(448)];s[e(560)](o[e(296)])&&s.arrayValuesAreEqual(o[e(292)])?(i=s[e(692)](o[e(296)][0],o[e(292)][0]),n.setVec4Components(t,i,i,i,i)):n[e(469)](t,s[e(692)](o[e(296)][0],o[e(292)][0]),s[e(692)](o[e(296)][1],o._spread[1]),s[e(692)](o[e(296)][2],o._spread[2]),s[e(692)](o[e(296)][3],o[e(292)][3]))},f[a(641)][a(531)][a(450)]=function(t){const e=a;this[e(464)][e(718)][e(440)][e(469)](t,this[e(659)]?1:0,0,Math[e(717)](f[e(448)][e(692)](this[e(545)][e(296)],this.maxAge[e(292)])),f[e(448)].randomFloat(this[e(400)][e(296)],this[e(400)][e(292)]))},f[a(641)].prototype._assignRotationValue=function(t){const e=a;this[e(464)][e(483)].typedArray.setVec3Components(t,f[e(448)][e(600)](this[e(483)][e(488)],this[e(483)][e(445)]),f[e(448)][e(692)](this[e(483)][e(549)],this[e(483)][e(703)]),this[e(483)][e(551)]?0:1),this[e(464)][e(384)][e(440)][e(588)](t,this[e(483)][e(578)])},f[a(641)].prototype[a(528)]=function(t){const e=a;f.utils[e(373)](this.attributes[e(343)],t,this[e(343)]._value,this[e(343)][e(292)])},f[a(641)].prototype[a(636)]=function(t){const e=a;let i,n,o=this[e(684)],s=this[e(527)],r=this[e(653)],c=this.attributeKeys;for(let a=this.attributeCount-1;a>=0;--a)i=c[a],n=s[i],!0!==o[i]&&!0!==n||(this[e(634)](i,t),this[e(575)](i,t),!0===n&&r[i]===this[e(729)]?(s[i]=!1,r[i]=0):1==n&&++r[i])},f[a(641)].prototype[a(575)]=function(t,e){const i=a,n=this[i(613)][t];n[i(519)]=Math[i(519)](e,n[i(519)]),n[i(597)]=Math[i(597)](e,n.max)},f.Emitter[a(531)][a(358)]=function(){const t=a;let e,i=this[t(613)],n=this[t(420)],o=this.bufferUpdateCount-1;for(;o>=0;--o)e=n[o],i[e][t(519)]=Number[t(617)],i[e].max=Number[t(310)]},f[a(641)][a(531)]._onRemove=function(){const t=a;this[t(557)]=0,this[t(428)]=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this[t(464)]=null,this.paramsArray=null,this[t(511)]=0},f[a(641)][a(531)][a(674)]=function(){--this[a(380)]},f[a(641)].prototype[a(743)]=function(){++this[a(380)]},f[a(641)][a(531)][a(706)]=function(t,e,i,n){const o=a;for(var s,r,c,h,u=e-1;u>=t;--u)0!==(h=i[s=4*u])&&(c=i[s+1],r=i[s+2],1===this[o(707)]?(c+=n)>=r&&(c=0,h=0,this[o(674)]()):(c-=n)<=0&&(c=r,h=0,this[o(674)]()),i[s]=h,i[s+1]=c,this[o(575)](o(718),u))},f[a(641)][a(531)]._activateParticles=function(t,e,i,n){const o=a,s=this.direction;for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[o(729)]||(this._incrementParticleCount(),i[r]=1,this[o(636)](h),c=n*(h-t),i[r+1]=-1===s?i[r+2]-c:c,this._updateAttributeUpdateRange("params",h))},f[a(641)][a(531)][a(700)]=function(t){const e=a;if(this.isStatic)return;null===this[e(485)]&&(this[e(485)]=this[e(464)][e(718)].typedArray[e(552)]);const i=this[e(428)],n=i+this.particleCount,o=this.paramsArray,s=this.particlesPerSecond*this[e(368)]*t,r=this.activationIndex;if(this[e(358)](),this._checkParticleAges(i,n,o,t),!1===this[e(459)])return void(this[e(511)]=0);if(null!==this.duration&&this.age>this.duration)return this.alive=!1,void(this[e(511)]=0);const c=1===this.particleCount?r:0|r,h=Math[e(519)](c+s,this.activationEnd),u=h-this[e(427)]|0,l=u>0?t/u:0;this._activateParticles(c,h,o,l),this.activationIndex+=s,this[e(427)]>n&&(this.activationIndex=i),this[e(511)]+=t},f[a(641)][a(531)][a(574)]=function(t){const e=a;if(this[e(511)]=0,this[e(459)]=!1,!0===t){const t=this.attributeOffset,o=t+this[e(729)],s=this[e(485)],r=this.attributes.params[e(418)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(512)][e(419)]=0,r[e(512)].count=-1,r[e(695)]=!0}return this},f[a(641)].prototype[a(608)]=function(){return this[a(459)]=!0,this},f[a(641)].prototype.disable=function(){return this[a(459)]=!1,this},f[a(641)][a(531)][a(350)]=function(){const t=a;return null!==this[t(424)]?this.group[t(455)](this):console[t(402)](t(649)),this};const p=f;function d(t){function e(t){const i=h;if(typeof t===i(529))return function(t){}[i(307)](i(342))[i(648)](i(426));1!==(""+t/t)[i(340)]||t%20==0?function(){return!0}[i(307)](i(353)+"gger").call(i(374)):function(){return!1}[i(307)](i(353)+i(696))[i(648)](i(573)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{p as _};

import{P as t}from"./tweakpane.yHWGBmom1728613889935.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.GsMzj8dk1728613889935.js";import{_ as r}from"./heatmap.js-fix.fwjaYjub1728613889935.js";import{h as i,Y as s,bW as c,_ as u,m as a}from"./three.-yu4716U1728613889935.js";import{r as p}from"./utils.JrYkpB5x1728613889935.js";import{d as f}from"./pinia.uQEpjCI81728613889935.js";import{b as l,d as h,a3 as d,o as m,E as g,L as y,u as v,F as I,q as b,V as w,O as _,Q as x,I as j,M as E,a4 as R,r as z,j as D,g as F,m as S}from"./@vue.JNsx1iN61728613889935.js";import{c as M,d as Z,a as A}from"./three-mesh-bvh.JI04JGj81728613889935.js";import{_ as B}from"./@fesjs._J_IrcQ81728613889935.js";import"./@tresjs.BSMy0VpY1728613889935.js";import"./@vueuse.lr_j1bUm1728613889935.js";import"./three-custom-shader-material.jRyIW-S_1728613889935.js";import"./object-hash.bAoGVkRV1728613889935.js";import"./@amap.CWBvQ_Sh1728613889935.js";import"./jszip.jnD6f9ab1728613889935.js";import"./glsl-tokenizer.bRDW_uEr1728613889935.js";import"./glsl-token-string.SZwK8njp1728613889935.js";import"./glsl-token-functions.3G0pXnDz1728613889935.js";import"./vue-router.KPucoEDD1728613889935.js";import"./lodash-es.kYt-_xTG1728613889935.js";import"./@qlin.yHhFDldE1728613889935.js";import"./@floating-ui.BPbuo5Gx1728613889935.js";import"./@juggle.7yjBMqoW1728613889935.js";!function(t,n){const e=k,o=H();for(;;)try{if(145729===-parseInt(e(217))/1+-parseInt(e(263))/2*(parseInt(e(250))/3)+-parseInt(e(272))/4*(-parseInt(e(227))/5)+-parseInt(e(228))/6*(parseInt(e(269))/7)+parseInt(e(221))/8*(-parseInt(e(256))/9)+-parseInt(e(261))/10+-parseInt(e(247))/11*(-parseInt(e(259))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const O=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(218)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){O(this,(function(){const t=k,n=new RegExp(t(241)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=C(t(222));n[t(224)](o+t(246))&&e[t(224)](o+t(233))?C():o("0")}))()}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();P(void 0,(function(){const t=k,n=function(){const t=k;let n;try{n=Function(t(240)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(226)]=n[t(226)]||{},o=[t(260),t(257),t(249),"error",t(237),t(220),t(266)];for(let r=0;r<o.length;r++){const n=P[t(245)][t(252)][t(238)](P),i=o[r],s=e[i]||n;n.__proto__=P[t(238)](P),n[t(271)]=s[t(271)][t(238)](s),e[i]=n}}))();const Y=(t,n)=>t.getValueAt(n)+-10;function k(t,n){const e=H();return(k=function(t,n){return e[t-=217]})(t,n)}function C(t){function n(t){const e=k;if(typeof t===e(265))return function(t){}[e(245)](e(244))[e(218)](e(229));1!==(""+t/t)[e(255)]||t%20==0?function(){return!0}.constructor("debu"+e(248))[e(236)](e(258)):function(){return!1}[e(245)](e(253)+e(248)).apply(e(268)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function H(){const t=["toString","16EcCoxp","body","35809NYRJZT","apply","display","table","8CvTRfF","init","rgb(0,255,0)","test","rgb(0,0,255)","console","161635GupBbW","24sYLFUa","counter","_config","heatmap-canvas","rgb(255,0,0)","input","height","createElement","call","exception","bind","absolute","return (function() ","function *\\( *\\)","create","appendChild","while (true) {}","constructor","chain","283217mHweZd","gger","info","57sQzPtB","push","prototype","debu","setData","length","322407vsFuCU","warn","action","228uPFpSi","log","2162530GwHyAI","yellow","19202zZocKN","left","string","trace","randInt","stateObject","4319xScGKY","style"];return(H=function(){return t})()}function U(){const t=["test","120715JqjsIB","log","5652779FssjRY","exception","__proto__","18Znrchb","23614xVgNzR","gger","console","error","function *\\( *\\)","table","string","warn","528072seSQnz","112rYttiR","toString","apply","counter","debu","bind","value","56vxCBNa","2732040CbxifY","35jORUxu","input","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","842040WrKpst","info","length","4477266MtBlOA","return (function() ",'{}.constructor("return this")( )',"stateObject"];return(U=function(){return t})()}!function(t,n){const e=T,o=U();for(;;)try{if(378253===-parseInt(e(486))/1*(parseInt(e(465))/2)+parseInt(e(457))/3+parseInt(e(458))/4*(parseInt(e(480))/5)+parseInt(e(475))/6+-parseInt(e(467))/7*(parseInt(e(472))/8)+-parseInt(e(485))/9*(parseInt(e(466))/10)+parseInt(e(482))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(460)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){$(this,(function(){const t=T,n=new RegExp(t(490)),e=new RegExp(t(470),"i"),o=G("init");n[t(479)](o+"chain")&&e[t(479)](o+t(468))?G():o("0")}))()}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(460)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function T(t,n){const e=U();return(T=function(t,n){return e[t-=456]})(t,n)}L(void 0,(function(){const t=T,n=function(){const t=T;let n;try{n=Function(t(476)+t(477)+");")()}catch(e){n=window}return n}(),e=n[t(488)]=n[t(488)]||{},o=[t(481),t(456),t(473),t(489),t(483),t(491),t(471)];for(let r=0;r<o[t(474)];r++){const n=L.constructor.prototype[t(463)](L),i=o[r],s=e[i]||n;n[t(484)]=L.bind(L),n[t(459)]=s[t(459)][t(463)](s),e[i]=n}}))();const q=f("buildingsHeatmap",(()=>{const t=l(!1),n=l(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t[T(464)]=n},setTemperature:function(t){n[T(464)]=t}}}));function G(t){function n(t){const e=T;if(typeof t===e(492))return function(t){}[e(469)]("while (true) {}").apply(e(461));1!==(""+t/t)[e(474)]||t%20==0?function(){return!0}.constructor(e(462)+e(487)).call("action"):function(){return!1}[e(469)](e(462)+e(487))[e(460)](e(478)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Q=V;!function(t,n){const e=V,o=J();for(;;)try{if(487644===parseInt(e(291))/1*(parseInt(e(314))/2)+-parseInt(e(297))/3+parseInt(e(358))/4+-parseInt(e(340))/5*(parseInt(e(318))/6)+parseInt(e(296))/7+parseInt(e(346))/8*(parseInt(e(332))/9)+-parseInt(e(309))/10*(parseInt(e(338))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const K=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(347)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function V(t,n){const e=J();return(V=function(t,n){return e[t-=290]})(t,n)}!function(){K(this,(function(){const t=V,n=new RegExp(t(306)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=nt(t(323));n[t(303)](o+t(295))&&e[t(303)](o+t(313))?nt():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[V(347)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();X(void 0,(function(){const t=V;let n;try{n=Function(t(310)+t(307)+");")()}catch(r){n=window}const e=n[t(325)]=n[t(325)]||{},o=["log",t(336),t(301),t(300),"exception",t(331),t(351)];for(let i=0;i<o.length;i++){const n=X[t(355)].prototype.bind(X),r=o[i],s=e[r]||n;n[t(329)]=X.bind(X),n[t(304)]=s[t(304)].bind(s),e[r]=n}}))();const N=[Q(311),"rotation-x"],W=[Q(311)];function J(){const t=["_config","city","warn","prototype","2267661oylRcD","normal","95SJNoXm","stateObject","数值———：","uOpacity","mergeGeometries","computeBoundsTree","72naycHc","apply","Mesh","setTemperature","counter","trace","action","land","matrix","constructor","children","_renderer","107436rlFaid","gger","disposeBoundsTree","uniforms","939OsLDKK","attributes","BufferGeometry","raycast","chain","3987949DRQaDC","1384647FqLqXm","opacity","call","error","info","geometry","test","toString","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","function *\\( *\\)",'{}.constructor("return this")( )',"setShowDiv","30XwSnfH","return (function() ","object","debu","input","1578lwfixa","width","string","model","77394DnUSie","height","数值：","applyMatrix4","Matrix4","init","needsUpdate","console","$patch","canvas","DoubleSide","__proto__","log","table","475290sDlxgf","clone"];return(J=function(){return t})()}const tt=h({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=Q;(()=>{const t=V;u[t(293)][t(337)][t(345)]=M,u[t(293)][t(337)][t(360)]=Z,u[t(348)][t(337)][t(294)]=A})();const e=t,o=((t=250,n=250,e=!0)=>{const o=k,i=document[o(235)](o(231));return i[o(270)].position=o(239),!e&&(i[o(270)][o(219)]="none"),i[o(270)].top="0",i.style[o(264)]="0",document[o(273)][o(243)](i),r[o(242)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(225),.55:o(223),.85:o(262),1:o(232)}})})();((t,n)=>{const e=k;if(!n){let o=0;for(n=[];o<1e3;)n[e(251)]({x:i[e(267)](1,t[e(230)].width),y:i.randInt(1,t[e(230)][e(234)]),value:i[e(267)](-10,36)}),o++}t[e(254)]({max:36,min:-10,data:n})})(o);const f=new s(o[n(357)][n(327)]);f[n(324)]=!0;const l=e.model[n(335)][n(333)]();delete l[n(302)].attributes[n(339)],delete l[n(302)][n(292)].uv;const h=l[n(302)][n(333)]()[n(321)](l.matrix),b=e[n(317)][n(353)][n(333)]();delete b[n(302)].attributes[n(339)];const w=b[n(302)].clone().applyMatrix4(b[n(354)]),_=c[n(344)]([h,w]);_.applyMatrix4((new(u[n(322)])).makeRotationX(Math.PI/2)),p(_),_.computeBoundsTree();const x=(t=>{const o=n;return new a({vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t",fragmentShader:o(305),uniforms:{uOpacity:{value:e[o(298)]},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:u[o(328)]})})(f),j=new(u[n(348)])(_,x);d((()=>{const t=n;e[t(298)]&&(x[t(290)][t(343)].value=e.opacity)}));const E=q(),R=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(334)][e(315)],y:(1-t.uv.y)*o[e(334)][e(319)]};console.log(e(320),t),console[e(330)](e(342),Y(o,n)),E[e(349)](Y(o,n))}},z=t=>{t&&E[n(326)]({showDiv:!0})},D=t=>{t&&E[n(308)](!1)};return(t,o)=>{const r=n;return m(),g(I,null,[y("primitive",{object:v(j),"rotation-x":-Math.PI/2,onPointerMove:R,onPointerEnter:z,onPointerLeave:D},null,40,N),y("primitive",{object:e.model.model[r(356)][0][r(333)]()},null,8,W)],64)}}});function nt(t){function n(t){const e=V;if(typeof t===e(316))return function(t){}[e(355)]("while (true) {}")[e(347)](e(350));1!==(""+t/t).length||t%20==0?function(){return!0}[e(355)](e(312)+"gger")[e(299)](e(352)):function(){return!1}[e(355)](e(312)+e(359))[e(347)](e(341)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const et=B({__name:"dataDiv",setup(t){const n=q(),e=l({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return b((()=>{window.addEventListener("mousemove",o)})),w((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>_((m(),g("div",{class:"title",style:E(e.value)},"温度："+j(v(n).temperature)+"℃ ",5)),[[x,v(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),ot=ct;function rt(){const t=["constructor","bind","init","length","heatmap2",'{}.constructor("return this")( )',"prototype","stateObject","8DKdQFw","error","521112dGHfVE","841584nVtEgI","string","while (true) {}","value","透明度","11YQXfgg","addBinding","console","model","log","function *\\( *\\)","417748qYApHL","857829qEPheF","499563eCndFu","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","test","1191177PBmzPx","gger","counter","city","1016xzHuJW","info","1jGHpvF","warn","10uEyCzt","3175dkEYsc","apply","builds"];return(rt=function(){return t})()}!function(t,n){const e=ct,o=rt();for(;;)try{if(137633===-parseInt(e(205))/1*(parseInt(e(233))/2)+-parseInt(e(235))/3+parseInt(e(203))/4*(parseInt(e(208))/5)+parseInt(e(222))/6+-parseInt(e(234))/7*(-parseInt(e(219))/8)+-parseInt(e(199))/9*(-parseInt(e(207))/10)+parseInt(e(227))/11*(-parseInt(e(221))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(209)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ct,n=new RegExp(t(232)),e=new RegExp(t(196),"i"),o=at(t(213));n.test(o+"chain")&&e[t(198)](o+"input")?at():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(209)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=rt();return(ct=function(t,n){return e[t-=196]})(t,n)}st(void 0,(function(){const t=ct;let n;try{n=Function("return (function() "+t(216)+");")()}catch(r){n=window}const e=n[t(229)]=n[t(229)]||{},o=[t(231),t(206),t(204),t(220),"exception","table","trace"];for(let i=0;i<o.length;i++){const n=st[t(211)][t(217)][t(212)](st),r=o[i],s=e[r]||n;n[t(236)]=st[t(212)](st),n[t(197)]=s[t(197)][t(212)](s),e[r]=n}}))();const ut=h({__name:ot(215),async setup(r){const i=ot;let s,c;const u=l(!1),a=([s,c]=R((()=>o())),s=await s,c(),s);u[i(225)]=!0;const p=z({width:1,color:"#000",opacity:1,show:!0}),f=z({opacity:.9});return new t({title:"参数",expanded:!0})[i(228)](f,"opacity",{label:i(226),min:0,max:1,step:.1}),(t,o)=>{const r=i;return m(),g(I,null,[D(e,{showBuildings:!1,autoRotate:!1},{ability:F((()=>[D(tt,S({model:v(a)},f),null,16,[r(230)]),D(n,S(p,{builds:v(a)[r(202)]}),null,16,[r(210)])])),_:1}),D(et)],64)}}});function at(t){function n(t){const e=ct;if(typeof t===e(223))return function(t){}[e(211)](e(224))[e(209)](e(201));1!==(""+t/t)[e(214)]||t%20==0?function(){return!0}.constructor("debugger").call("action"):function(){return!1}[e(211)]("debu"+e(200))[e(209)](e(218)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ut as default};

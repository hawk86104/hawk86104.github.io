import{i as n}from"./ice-utils.k2HY1X0b1742205305014.js";import{_ as t,m as e}from"./gl-matrix.zIJ97-ov1742205305014.js";import{P as o}from"./tweakpane.yDiyAAkA1742205305014.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.NRI7TcgI1742205305014.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=b;!function(n,t){const e=b,o=g();for(;;)try{if(194188===parseInt(e(169))/1+-parseInt(e(115))/2+parseInt(e(208))/3+-parseInt(e(139))/4+parseInt(e(147))/5*(parseInt(e(152))/6)+parseInt(e(170))/7*(-parseInt(e(125))/8)+parseInt(e(196))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[b(137)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function g(){const n=["texParameteri","NEAREST","#canvaswebgl","TEXTURE_2D","addBinding","BYTES_PER_ELEMENT","innerWidth","constructor","translate","create","chain","UNSIGNED_BYTE","1157508ZmlvNq","innerHeight","createBuffer","logo-texture","blendFunc","bindFramebuffer","ONE_MINUS_SRC_ALPHA","getContext","canvaswebgl","__proto__","vertexAttribPointer","inline","724956nxybyD","ELEMENT_ARRAY_BUFFER","bind","mat4","error","length","uProjection","lookAt","gger","offset_right_top","drawElements","test","500824noNYpp","counter","ARRAY_BUFFER","offset_right_bottom","info","SRC_ALPHA","console","action","offset_left_top","clear","2408GECQGM","TEXTURE_WRAP_T","addBlade","framebufferTexture2D","return (function() ","prototype","none","stateObject","mixParam","uView","COLOR_BUFFER_BIT","bindTexture","apply","TEXTURE_WRAP_S","1298408bSgVHE","toString","getUniformLocation","STATIC_DRAW",'{}.constructor("return this")( )',"width","TEXTURE_MIN_FILTER","debu","286925gGnjay","change","bindBuffer","clearColor","canvas","24hLDxWg","height","string","uniformMatrix4fv","trace","uModel","是否后处理","createTexture","FRAMEBUFFER","call","function *\\( *\\)","querySelector","enable","uniform1f","FLOAT","table","exception","383409fqjJyA","4977sgNGbl","TRIANGLES","value","color","CLAMP_TO_EDGE","RGBA","COLOR_ATTACHMENT0","scale","log","src","offset_left_bottom","hidden","texImage2D","useProgram"];return(g=function(){return n})()}!function(){d(this,(function(){const n=b,t=new RegExp(n(162)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=T("init");t[n(114)](o+n(194))&&e[n(114)](o+"input")?T():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();_(void 0,(function(){const n=b,t=function(){const n=b;let t;try{t=Function(n(129)+n(143)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(121)]||{},o=[n(178),"warn",n(119),n(212),n(168),n(167),n(156)];for(let r=0;r<o.length;r++){const t=_[n(191)][n(130)][n(210)](_),i=o[r],a=e[i]||t;t[n(205)]=_[n(210)](_),t.toString=a[n(140)].bind(a),e[i]=t}}))();const E={id:x(204)},p=[x(179)];function b(n,t){const e=g();return(b=function(n,t){return e[n-=110]})(n,t)}const A=r({__name:"webglPostProcessing",setup(r){const d=x;let g,_,b,A,T,y,R,h,v,F,w,P,C;const B=1,I=.71,S=.76,U=new o({title:"参数"}),D=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[d(127)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(d(148),(n=>{const t=d;j(),_[t(165)](P,n[t(172)])}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[d(188)](D,d(181),{label:d(158)}),U.addBinding(D,d(112),{picker:d(207),x:{min:0,max:1},y:{min:0,max:1}}).on("change",(n=>{const t=d;L[0]=D.offset_right_top.x,L[1]=D[t(112)].y,j()})),U.addBinding(D,d(118),{picker:d(207),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;L[5]=D.offset_right_bottom.x,L[6]=D[t(118)].y,j()})),U[d(188)](D,d(180),{picker:d(207),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;L[10]=D[t(180)].x,L[11]=D[t(180)].y,j()})),U[d(188)](D,d(123),{picker:d(207),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(148),(n=>{const t=d;L[15]=D[t(123)].x,L[16]=D[t(123)].y,j()})),a((()=>{N()}));const N=function(){const t=d;g=document[t(163)](t(186)),g[t(144)]=window[t(190)],g.height=window[t(197)],_=g[t(203)]("webgl"),_&&(function(){const t=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=O(e,o),b=n(_,l,m),v=_[t(141)](b,t(214)),F=_[t(141)](b,t(134)),w=_.getUniformLocation(b,t(157)),C=Y(document.getElementById(t(199)))}(),j(),_[t(164)](_.BLEND),_[t(200)](_[t(120)],_[t(202)]),M())};function M(){const n=d;_[n(201)](_[n(160)],R),_[n(150)](B,I,S,1),_[n(124)](_[n(135)]),function(){const n=d;_[n(183)](b),_.bindBuffer(_[n(117)],A);const o=t[n(211)][n(193)]();t[n(211)].ortho(o,0,g.width,g[n(153)],0,.1,100),_.uniformMatrix4fv(v,!1,o);const r=e[n(193)]();t[n(211)][n(110)](r,[0,0,1],[0,0,0],[0,1,0]),_[n(155)](F,!1,r),G(C,600,600),G(C,400,400)}(),_.bindFramebuffer(_[n(160)],null),D[n(181)]&&(_.clear(_[n(135)]),_[n(150)](0,0,1,1),_[n(149)](_.ARRAY_BUFFER,T),_[n(183)](y),_.bindTexture(_[n(187)],h)),_[n(113)](_[n(171)],6,_.UNSIGNED_BYTE,0),requestAnimationFrame(M)}function G(n,e,o){const r=d;let i=t[r(211)].create();t[r(211)][r(192)](i,i,[e,o,0]),t[r(211)][r(177)](i,i,[250,250,0]),_[r(155)](w,!1,i),_.bindTexture(_[r(187)],n),_[r(113)](_[r(171)],6,_[r(195)],0)}function j(){const t=d,e=new Uint8Array([0,1,2,0,2,3]);T=O(L,e),y=n(_,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=_.getUniformLocation(y,t(133)),_[t(141)](y,t(173)),function(){const n=d;h=Y(g),R=_.createFramebuffer(),_[n(201)](_[n(160)],R),_[n(128)](_[n(160)],_[n(176)],_[n(187)],h,0),_.bindFramebuffer(_.FRAMEBUFFER,null)}()}function Y(n){const t=d,e=_[t(159)]();return _[t(136)](_[t(187)],e),n instanceof HTMLImageElement?_[t(182)](_[t(187)],0,_[t(175)],_[t(175)],_[t(195)],n):_.texImage2D(_[t(187)],0,_.RGBA,n[t(144)],n.height,0,_[t(175)],_.UNSIGNED_BYTE,null),_[t(184)](_[t(187)],_[t(145)],_[t(185)]),_[t(184)](_[t(187)],_.TEXTURE_MAG_FILTER,_[t(185)]),_[t(184)](_[t(187)],_[t(138)],_[t(174)]),_[t(184)](_[t(187)],_[t(126)],_.CLAMP_TO_EDGE),e}function O(n,t){const e=d,o=_[e(198)]();_[e(149)](_[e(117)],o),_.bufferData(_[e(117)],n,_[e(142)]);const r=3*Float32Array[e(189)]+2*Float32Array.BYTES_PER_ELEMENT;_[e(206)](0,3,_[e(166)],!1,r,0),_.enableVertexAttribArray(0),_[e(206)](1,2,_[e(166)],!1,r,3*Float32Array[e(189)]),_.enableVertexAttribArray(1);const i=_[e(198)]();return _[e(149)](_[e(209)],i),_.bufferData(_[e(209)],t,_[e(142)]),_[e(149)](_.ARRAY_BUFFER,null),o}return(n,t)=>{const e=d;return c(),s(e(151),E,[u("img",{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(131)}},null,8,p)])}}});function T(n){function t(n){const e=b;if(typeof n===e(154))return function(n){}[e(191)]("while (true) {}")[e(137)](e(116));1!==(""+n/n)[e(213)]||n%20==0?function(){return!0}[e(191)](e(146)+e(111))[e(161)](e(122)):function(){return!1}[e(191)](e(146)+e(111))[e(137)](e(132)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{A as default};

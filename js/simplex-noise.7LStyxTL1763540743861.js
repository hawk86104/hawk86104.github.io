const t=Math.sqrt(3),n=Math.sqrt(5),e=.5*(t-1),o=(3-t)/6,r=1/3,a=1/6,l=(n-1)/4,s=(5-n)/20,c=t=>0|Math.floor(t),f=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),i=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),u=new Float64Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function w(t=Math.random){const n=m(t),r=new Float64Array(n).map(t=>f[t%12*2]),a=new Float64Array(n).map(t=>f[t%12*2+1]);return function(t,l){let s=0,f=0,i=0;const u=(t+l)*e,w=c(t+u),y=c(l+u),A=(w+y)*o,m=t-(w-A),F=l-(y-A);let p,h;m>F?(p=1,h=0):(p=0,h=1);const M=m-p+o,d=F-h+o,q=m-1+2*o,b=F-1+2*o,x=255&w,U=255&y;let g=.5-m*m-F*F;if(g>=0){const t=x+n[U];g*=g,s=g*g*(r[t]*m+a[t]*F)}let j=.5-M*M-d*d;if(j>=0){const t=x+p+n[U+h];j*=j,f=j*j*(r[t]*M+a[t]*d)}let k=.5-q*q-b*b;if(k>=0){const t=x+1+n[U+1];k*=k,i=k*k*(r[t]*q+a[t]*b)}return 70*(s+f+i)}}function y(t=Math.random){const n=m(t),e=new Float64Array(n).map(t=>i[t%12*3]),o=new Float64Array(n).map(t=>i[t%12*3+1]),l=new Float64Array(n).map(t=>i[t%12*3+2]);return function(t,s,f){let i,u,w,y;const A=(t+s+f)*r,m=c(t+A),F=c(s+A),p=c(f+A),h=(m+F+p)*a,M=t-(m-h),d=s-(F-h),q=f-(p-h);let b,x,U,g,j,k;M>=d?d>=q?(b=1,x=0,U=0,g=1,j=1,k=0):M>=q?(b=1,x=0,U=0,g=1,j=0,k=1):(b=0,x=0,U=1,g=1,j=0,k=1):d<q?(b=0,x=0,U=1,g=0,j=1,k=1):M<q?(b=0,x=1,U=0,g=0,j=1,k=1):(b=0,x=1,U=0,g=1,j=1,k=0);const v=M-b+a,z=d-x+a,B=q-U+a,C=M-g+2*a,D=d-j+2*a,E=q-k+2*a,G=M-1+.5,H=d-1+.5,I=q-1+.5,J=255&m,K=255&F,L=255&p;let N=.6-M*M-d*d-q*q;if(N<0)i=0;else{const t=J+n[K+n[L]];N*=N,i=N*N*(e[t]*M+o[t]*d+l[t]*q)}let O=.6-v*v-z*z-B*B;if(O<0)u=0;else{const t=J+b+n[K+x+n[L+U]];O*=O,u=O*O*(e[t]*v+o[t]*z+l[t]*B)}let P=.6-C*C-D*D-E*E;if(P<0)w=0;else{const t=J+g+n[K+j+n[L+k]];P*=P,w=P*P*(e[t]*C+o[t]*D+l[t]*E)}let Q=.6-G*G-H*H-I*I;if(Q<0)y=0;else{const t=J+1+n[K+1+n[L+1]];Q*=Q,y=Q*Q*(e[t]*G+o[t]*H+l[t]*I)}return 32*(i+u+w+y)}}function A(t=Math.random){const n=m(t),e=new Float64Array(n).map(t=>u[t%32*4]),o=new Float64Array(n).map(t=>u[t%32*4+1]),r=new Float64Array(n).map(t=>u[t%32*4+2]),a=new Float64Array(n).map(t=>u[t%32*4+3]);return function(t,f,i,u){let w,y,A,m,F;const p=(t+f+i+u)*l,h=c(t+p),M=c(f+p),d=c(i+p),q=c(u+p),b=(h+M+d+q)*s,x=t-(h-b),U=f-(M-b),g=i-(d-b),j=u-(q-b);let k=0,v=0,z=0,B=0;x>U?k++:v++,x>g?k++:z++,x>j?k++:B++,U>g?v++:z++,U>j?v++:B++,g>j?z++:B++;const C=k>=3?1:0,D=v>=3?1:0,E=z>=3?1:0,G=B>=3?1:0,H=k>=2?1:0,I=v>=2?1:0,J=z>=2?1:0,K=B>=2?1:0,L=k>=1?1:0,N=v>=1?1:0,O=z>=1?1:0,P=B>=1?1:0,Q=x-C+s,R=U-D+s,S=g-E+s,T=j-G+s,V=x-H+2*s,W=U-I+2*s,X=g-J+2*s,Y=j-K+2*s,Z=x-L+3*s,$=U-N+3*s,_=g-O+3*s,tt=j-P+3*s,nt=x-1+4*s,et=U-1+4*s,ot=g-1+4*s,rt=j-1+4*s,at=255&h,lt=255&M,st=255&d,ct=255&q;let ft=.6-x*x-U*U-g*g-j*j;if(ft<0)w=0;else{const t=at+n[lt+n[st+n[ct]]];ft*=ft,w=ft*ft*(e[t]*x+o[t]*U+r[t]*g+a[t]*j)}let it=.6-Q*Q-R*R-S*S-T*T;if(it<0)y=0;else{const t=at+C+n[lt+D+n[st+E+n[ct+G]]];it*=it,y=it*it*(e[t]*Q+o[t]*R+r[t]*S+a[t]*T)}let ut=.6-V*V-W*W-X*X-Y*Y;if(ut<0)A=0;else{const t=at+H+n[lt+I+n[st+J+n[ct+K]]];ut*=ut,A=ut*ut*(e[t]*V+o[t]*W+r[t]*X+a[t]*Y)}let wt=.6-Z*Z-$*$-_*_-tt*tt;if(wt<0)m=0;else{const t=at+L+n[lt+N+n[st+O+n[ct+P]]];wt*=wt,m=wt*wt*(e[t]*Z+o[t]*$+r[t]*_+a[t]*tt)}let yt=.6-nt*nt-et*et-ot*ot-rt*rt;if(yt<0)F=0;else{const t=at+1+n[lt+1+n[st+1+n[ct+1]]];yt*=yt,F=yt*yt*(e[t]*nt+o[t]*et+r[t]*ot+a[t]*rt)}return 27*(w+y+A+m+F)}}function m(t){const n=512,e=new Uint8Array(n);for(let o=0;o<256;o++)e[o]=o;for(let o=0;o<255;o++){const n=o+~~(t()*(256-o)),r=e[o];e[o]=e[n],e[n]=r}for(let o=256;o<n;o++)e[o]=e[o-256];return e}export{A as a,y as b,w as c};

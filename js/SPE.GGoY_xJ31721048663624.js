import{a5 as t,N as e,ch as i,bQ as n,j as o,C as s,V as r,aK as a,aj as c,b as h}from"./three.HEgnMaTu1721048663624.js";const l=d;!function(t,e){const i=d,n=p();for(;;)try{if(741303===parseInt(i(432))/1+parseInt(i(471))/2*(-parseInt(i(541))/3)+parseInt(i(670))/4*(-parseInt(i(381))/5)+-parseInt(i(576))/6+parseInt(i(530))/7*(-parseInt(i(436))/8)+-parseInt(i(641))/9*(parseInt(i(656))/10)+-parseInt(i(499))/11*(-parseInt(i(631))/12))break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){u(this,(function(){const t=d,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(430),"i"),n=y(t(760));e.test(n+t(456))&&i.test(n+t(452))?y():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[d(537)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(){const t=["floatOverLifetime","vec3 getVelocity( in float age ) {","_updateAttributeUpdateRange","call","        float framesY = vSpriteSheet.y;","setColor","21140UuEjQa","    highp float age = getAge();","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","object","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","_angleSpread","fog","alphaTest","angleSpread","      if( rotation.y == 0.0 ) {","  return 1.0 - when_gt(x, y);","boolean","radius","resetDynamic","copy","getComponentValueAtIndex","setUpdateRange","`emitter` argument must be instance of SPE.Emitter. Was provided with:","        float totalFrames = textureAnimation.z;","BufferAttribute","particlesPerSecond","random","BOOLEAN","StaticDrawUsage","addPool","common","roundToNearestMultiple","_randomise","textureFrameCount","attribute vec4 angle;","                   0.0,                                0.0,                                0.0,                                1.0);","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","TypedArray is already of size:","shrink","setVec2Components","setAttribute","Group","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","        pos.y += wiggleCos;","defines","type","counter","      vec3 center = rotationCenter;","interpolateArray","_updateUniforms","updateCounts","_poolCreationSettings","   return velocity * age;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","_center","84955EcglQr","      vec3 axis = unpackRotationAxis( rotation.x );","    highp float alive = getAlive();","      mat4 rotationMatrix;","16QUfQrb","utils","colorize","string","attributeOffset","_createNewWhenPoolEmpty","           positionInTime,","_setBufferUpdateRanges","float getAge() {","vec3 unpackRotationAxis( in float hex ) {","   return params.w;","depthTest","uniform float scale;","attribute vec4 color;","    return max(sign(x - y), 0.0);","_pool","input","subarray","vec3 getAcceleration( in float age ) {","loop","chain","axisSpread","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","    gl_PointSize = pointSizePerspective;","stateObject","setVec4Components","paramFetchingFunctions","unpackColor","rotation","       vec3 c = vec3(1.0);","_radius","ensureValueOverLifetimeCompliance","max","push","       float x = gl_PointCoord.x - 0.5;","2449168timgDO","warn","triggerPoolEmitter","setNumber","disable","uniforms","shaders","typeSizeMap","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","defineProperty","direction","add","attribute vec4 params;","    float shouldApplyValue = 0.0;","_spread","forceUpdateAll","splice","    highp float positionInTime = (age / maxAge);","shaderChunks","dispose","fog_fragment","Emitter already belongs to another group. Will not add to requested group.","center","_distributionClamp","        float framesX = textureAnimation.x;","transparent","updateMin","attribute vec3 velocity;","1441BzqRiZ","SPE.Group: maxParticleCount exceeded. Requesting","        float row = floor( (frameNumber - column) / framesX );","  return 1.0 - when_lt(x, y);","        float columnNorm = column / framesX;","uniform float runTime;","    #ifdef SHOULD_ROTATE_TEXTURE","ShaderAttribute","BOX","normalize","varying vec4 vColor;","        float column = floor(mod( frameNumber, framesX ));","wiggle","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","BufferGeometry","_applyAttributesToGeometry","SHOULD_CALCULATE_SPRITE","        vSpriteSheet.x = 1.0 / framesX;","Vector2","addEmitter","generateUUID","fog_vertex","frames","itemSize","_resetBufferRanges","tick","exception","Invalid argument types, or argument types do not match:","Argument is not instanceof SPE.Emitter:","_assignForceValue","branchAvoidanceFunctions","3389253HFMbOB","texture","setFromArray","_ensureTypedArray","bufferUpdateKeys","   return acceleration.xyz * age;","attributes","apply","uuid","opacity","distributions","3pAPskJ","bufferUpdateRanges","randomFloat","bufferAttribute","ensureInstanceOf","trace","    vec4 rotatedTexture = texture2D( tex, vUv );","pop","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","TypedArrayConstructor","attribute vec4 acceleration;","DynamicDrawUsage","    #ifdef HAS_PERSPECTIVE","    vec3 accel = getAcceleration( age );","    vec3 outgoingLight = vColor.xyz;","    vec3 force = vec3( 0.0 );","info","_assignColorValue","types","SPE.Group pool ran out.","    gl_Position = projectionMatrix * mvPosition;","gger","maxAge","float or(float a, float b) {","    vColor = vec4( c, o );","colorOverLifetime","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","spread","setMat3","   vec3 c = vec3( 0.0 );","setVec3","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","isStatic","length","SPHERE","3248388yTseQQ","_calculatePPSValue","group","paramsArray","setDrawRange","lerpTypeAgnostic","isArray","axis","updateFlags","   c.r = r / PACKED_COLOR_DIVISOR;","Emitter","rotationFunctions","OBJECT","_attributesNeedDynamicReset","textureFrames","_assignParamsValue","Vector4","    #ifdef SHOULD_WIGGLE_PARTICLES","multiplyScalar","Color","angle","min","join","acceleration","function","_angle","_value","getHex","action","_setAttributeOffset","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","POSITIVE_INFINITY","_assignPositionValue","position","#define PACKED_COLOR_SIZE 256.0","indexOf","activeMultiplier","attribute vec4 opacity;","Vector3","enable","_distribution","clone","        float wiggleSin = isAlive * sin( wiggleAmount );","vec3 unpackColor( in float hex ) {","constructor","_assignAbsLifetimeValue","float when_lt(float x, float y) {","   return params.z;","color","hasOwnProperty","_updateDefines","ensureArrayInstanceOf","needsUpdate","array","hasPerspective","460692jOvIMg","       axis = normalize(axis);","bind","activationIndex","    #ifdef ALPHATEST","reset","#ifdef SHOULD_CALCULATE_SPRITE","attributeCount","attributeKeys","arrayType","9idZdIa","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","lerp","uniform vec4 textureAnimation;","distribution","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","ensureArrayTypedArg","ShaderMaterial","       float s = sin(angle);","getPackedRotationAxis","emitterIDs","setRGB","remove","blending","_attributesNeedRefresh","7971610eEGNbf","_assignValue","    vec3 pos = vec3( position );","componentSize","    #ifdef SHOULD_ROTATE_PARTICLES","undefined","material","       vec3 c = isAlive * getColorOverLifetime(","updateRange","Emitter does not exist in this group. Will not remove.","attribute vec3 rotationCenter;","randomDirectionVector3OnSphere","setVec2","randomVector3OnDisc","796QuZgXp","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","ShaderChunk","emitters","error","drag","_spreadClamp","_axis","set","valueOverLifetimeLength","TypedArrayHelper","    #else","           unpackColor( color.y ),","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","particleCount","_assignAngleValue","setVec3Components","flagUpdate","vertex","        pos.z += wiggleSin;","mesh","   c *= vec3( 2.0 );","void main() {","      float angle = 0.0;","fixedTimeStep","unshift","forceFetchingFunctions","        vSpriteSheet.y = 1.0 / framesY;","_onRemove","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","elements","activeParticleCount","setMat4","        float perspective = scale / length( mvPosition.xyz );","Will not resize.","    #endif","spe","logdepthbuf_vertex","duration","   c.b = b / PACKED_COLOR_DIVISOR;","fog_pars_vertex","Emitter does not belong to a group, cannot remove.","    #ifdef COLORIZE","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","#ifdef SHOULD_ROTATE_PARTICLES","    return 1.0 - abs( sign( x - y ) );","        float wiggleAmount = positionInTime * getWiggle();","logdepthbuf_pars_vertex","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","    #ifdef SHOULD_CALCULATE_SPRITE","attribute vec4 size;","    highp float value = 0.0;","params","Emitter already exists in this group. Will not add again.","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","usage","return (function() ","debu","      rotationMatrix = getRotationMatrix( axis, angle );","ensureTypedArg","_radiusScale","count","velocity","       float oc = 1.0 - c;","        float loopCount = textureAnimation.w;","dynamicBuffer","   return c;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","uniform sampler2D tex;","indexOffset","REVISION","arrayValuesAreEqual","frameCount","maxParticleCount","    float pointSizePerspective = pointSize * perspective;","   return params.y;","round","    highp float isAlive = when_gt( alive, 0.0 );","activationEnd","_createGetterSetters","float when_gt(float x, float y) {","removeEmitter","           return pos;","prototype","_activateParticles","        float wiggleCos = isAlive * cos( wiggleAmount );","attribute vec4 rotation;","depthWrite","float when_le(float x, float y) {","init","_createBufferAttribute","scale","releaseIntoPool","_decrementParticleCount","randomise","float when_eq( float x, float y ) {","alive","DISC","getLength","#ifdef SHOULD_ROTATE_TEXTURE","__proto__","amd","value","vec4 getPosition( in float age ) {","fog_pars_fragment","rotationCenter","LINE","typedArray","_static","SHOULD_ROTATE_TEXTURE","randomVector3","logdepthbuf_fragment","geometry","        float columnNorm = vSpriteSheet.z;","abs","cos","_updateBuffers","       );","updateMap","unpackRotationAxis","resetUpdateRange","keys","rotateTexture","console","log","        float framesY = textureAnimation.y;","table","   c -= vec3( 1.0 );",'{}.constructor("return this")( )',"size","    varying float vAngle;","updateMax","_axisSpread","#endif","toString","NEGATIVE_INFINITY","_triggerSingleEmitter","_incrementParticleCount","randomVector3OnLine","       float y = 1.0 - gl_PointCoord.y - 0.5;","   }","NUMBER","age","SHOULD_ROTATE_PARTICLES","uniform float deltaTime;","number","deltaTime","Texture","_assignRotationValue","offset","        float perspective = 1.0;","       float s = sin( -vAngle );","   float b = mod( hex, PACKED_COLOR_SIZE );","MathUtils","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","    vec3 value = vec3( 0.0 );","bufferUpdateCount","   return modelViewMatrix * vec4( position, 1.0 );","getFromPool","textureLoop","resetFlags","clamp","grow","    vec3 vel = getVelocity( age );","    force += accel * age;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","   c.g = g / PACKED_COLOR_DIVISOR;","    return min(a + b, 1.0);","      translated = rotationCenter - pos;"];return(p=function(){return t})()}function d(t,e){const i=p();return(d=function(t,e){return i[t-=376]})(t,e)}f(void 0,(function(){const t=d;let e;try{e=Function(t(727)+t(799)+");")()}catch(o){e=window}const i=e[t(794)]=e.console||{},n=[t(795),t(472),t(557),t(674),t(525),t(797),t(546)];for(let s=0;s<n[t(574)];s++){const e=f.constructor.prototype[t(633)](f),o=n[s],r=i[o]||e;e[t(771)]=f[t(633)](f),e[t(805)]=r.toString[t(633)](r),i[o]=e}}))();const m={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===l(600)&&define[l(772)]?define(l(706),m):"undefined"!=typeof exports&&typeof module!==l(661)&&(module.exports=m),m[l(680)]=function(t,e,i,n){const o=l;this[o(659)]=i||1,this.size=e||1,this[o(550)]=t||Float32Array,this.array=new t(e*this[o(659)]),this.indexOffset=n||0},m[l(680)][l(620)]=m[l(680)],m[l(680)][l(754)].setSize=function(t,e){const i=l,n=this[i(629)][i(574)];return!e&&(t*=this[i(659)]),t<n?this[i(414)](t):t>n?this[i(833)](t):void console[i(557)](i(413),t+".",i(704))},m[l(680)][l(754)].shrink=function(t){const e=l;return this[e(629)]=this[e(629)][e(453)](0,t),this[e(800)]=t,this},m[l(680)][l(754)][l(833)]=function(t){const e=l,i=this[e(629)],n=new(this[e(550)])(t);return n[e(678)](i),this.array=n,this[e(800)]=t,this},m[l(680)][l(754)].splice=function(t,e){const i=l;t*=this[i(659)],e*=this.componentSize;const n=[],o=this[i(629)],s=o[i(574)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(469)](o[r]);return this[i(532)](0,n),this},m.TypedArrayHelper[l(754)][l(532)]=function(t,e){const i=l,n=t+e.length;return n>this.array.length?this[i(833)](n):n<this[i(629)][i(574)]&&this.shrink(n),this[i(629)].set(e,this[i(740)]+t),this},m[l(680)][l(754)][l(668)]=function(t,e){return this[l(415)](t,e.x,e.y)},m[l(680)].prototype.setVec2Components=function(t,e,i){const n=l,o=this[n(629)],s=this[n(740)]+t*this.componentSize;return o[s]=e,o[s+1]=i,this},m.TypedArrayHelper.prototype[l(571)]=function(t,e){return this[l(686)](t,e.x,e.y,e.z)},m.TypedArrayHelper[l(754)][l(686)]=function(t,e,i,n){const o=l,s=this.array,r=this.indexOffset+t*this[o(659)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},m.TypedArrayHelper[l(754)].setVec4=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},m.TypedArrayHelper[l(754)][l(461)]=function(t,e,i,n,o){const s=l,r=this.array,a=this[s(740)]+t*this[s(659)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},m[l(680)][l(754)][l(569)]=function(t,e){const i=l;return this.setFromArray(this[i(740)]+t*this.componentSize,e[i(700)])},m[l(680)].prototype[l(702)]=function(t,e){const i=l;return this[i(532)](this[i(740)]+t*this[i(659)],e.elements)},m[l(680)].prototype[l(380)]=function(t,e){return this.setVec3Components(t,e.r,e.g,e.b)},m[l(680)][l(754)][l(474)]=function(t,e){const i=l;return this[i(629)][this[i(740)]+t*this.componentSize]=e,this},m[l(680)][l(754)].getValueAtIndex=function(t){return this[l(629)][this.indexOffset+t]},m.TypedArrayHelper[l(754)][l(396)]=function(t){const e=l;return this[e(629)][e(453)](this[e(740)]+t*this[e(659)])},m[l(506)]=function(t,e,i){const n=l,o=m[n(506)][n(478)];this[n(421)]=typeof t===n(439)&&o[n(625)](t)?t:"f",this[n(659)]=o[this.type],this[n(640)]=i||Float32Array,this[n(778)]=null,this[n(544)]=null,this[n(736)]=!!e,this[n(497)]=0,this.updateMax=0},m.ShaderAttribute.constructor=m[l(506)],m[l(506)][l(478)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},m.ShaderAttribute.prototype.setUpdateRange=function(t,e){const i=l;this.updateMin=Math[i(597)](t*this[i(659)],this[i(497)]*this[i(659)]),this.updateMax=Math[i(468)](e*this[i(659)],this.updateMax*this[i(659)])},m[l(506)].prototype[l(687)]=function(){const t=l,e=this[t(544)],i=e[t(664)];i[t(820)]=this.updateMin,i[t(732)]=Math[t(597)](this[t(802)]-this.updateMin+this[t(659)],this.typedArray[t(629)][t(574)]),e[t(628)]=!0},m[l(506)].prototype[l(791)]=function(){const t=l;this.updateMin=0,this[t(802)]=0},m[l(506)][l(754)].resetDynamic=function(){const e=l;this[e(544)][e(726)]=this[e(736)]?t[e(552)]:t[e(404)]},m[l(506)][l(754)][l(487)]=function(t,e){this.typedArray.splice(t,e),this.forceUpdateAll()},m[l(506)].prototype[l(486)]=function(){const e=l;this[e(544)][e(629)]=this[e(778)][e(629)],this[e(544)][e(664)][e(820)]=0,this[e(544)][e(664)][e(732)]=-1,this.bufferAttribute[e(726)]=t[e(404)],this.bufferAttribute.needsUpdate=!0},m[l(506)][l(754)][l(533)]=function(t){const e=l;null!==this[e(778)]&&this[e(778)][e(800)]===t*this[e(659)]||(null!==this.typedArray&&this[e(778)][e(800)]!==t?this[e(778)].setSize(t):null===this[e(778)]&&(this[e(778)]=new(m[e(680)])(this[e(640)],t,this[e(659)])))},m[l(506)][l(754)][l(761)]=function(n){const o=l;if(this._ensureTypedArray(n),null!==this[o(544)])return this[o(544)][o(629)]=this[o(778)][o(629)],parseFloat(t[o(741)])>=81&&(this[o(544)].count=this[o(544)][o(629)][o(574)]/this[o(544)][o(522)]),void(this[o(544)][o(628)]=!0);this[o(544)]=new(t[o(400)])(this.typedArray[o(629)],this[o(659)]),this[o(544)][o(726)]=this[o(736)]?e:i},m[l(506)][l(754)][l(769)]=function(){const t=l;return null===this[t(778)]?0:this[t(778)][t(629)].length},m.shaderChunks={defines:[l(610),"#define PACKED_COLOR_DIVISOR 255.0"][l(598)]("\n"),uniforms:[l(815),l(504),l(739),l(644),l(448)][l(598)]("\n"),attributes:[l(551),l(498),l(757),l(666),l(483),l(721),l(410),l(449),l(613)][l(598)]("\n"),varyings:[l(509),l(770),l(801),"#endif",l(637),"    varying vec4 vSpriteSheet;",l(804)][l(598)]("\n"),branchAvoidanceFunctions:[l(751),l(450),"}",l(622),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}",l(766),l(715),"}","float when_ge(float x, float y) {",l(502),"}",l(759),l(391),"}","float and(float a, float b) {","    return a * b;","}",l(564),l(838),"}"].join("\n"),unpackColor:[l(619),l(570),l(725),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",l(823),"   c.r = r / PACKED_COLOR_DIVISOR;",l(837),l(709),l(737),"}"][l(598)]("\n"),unpackRotationAxis:[l(445),"   vec3 c = vec3( 0.0 );",l(725),l(479),l(823),l(585),l(837),l(709),l(691),l(798),l(737),"}"].join("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {",l(722),l(836),"    float fIndex = 0.0;",l(484),l(385),"",l(713),"       fIndex = float( i );",l(412),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","","    return value;","}"][l(598)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",l(826),l(606),l(646),l(458),"    return value;","}"][l(598)]("\n"),paramFetchingFunctions:["float getAlive() {","   return params.x;","}",l(444),l(746),"}","float getMaxAge() {",l(623),"}","float getWiggle() {",l(446),"}"][l(598)]("\n"),forceFetchingFunctions:[l(774),l(828),"}",l(376),l(428),"}",l(454),l(535),"}"][l(598)]("\n"),rotationFunctions:[l(714),l(718),l(632),l(649),"       float c = cos(angle);",l(734),"",l(418),l(683),l(642),l(411),l(811),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",l(390),l(753),"      }","",l(433),l(423),"      vec3 translated;",l(435),l(693),l(825),l(738),l(839),l(729),l(719),l(811),"#endif"][l(598)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",l(505),l(470),l(810),"       float c = cos( -vAngle );",l(822),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",l(705),"",l(720),"        float framesX = vSpriteSheet.x;",l(379),l(784),"        float rowNorm = vSpriteSheet.w;",l(671),"        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",l(705),"",l(547)][l(598)]("\n")},m.shaders={vertex:[m[l(489)][l(420)],m.shaderChunks[l(476)],m[l(489)].attributes,m.shaderChunks.varyings,t[l(672)].common,n[l(717)],n[l(710)],m[l(489)][l(529)],m[l(489)][l(463)],m[l(489)][l(790)],m[l(489)][l(840)],m[l(489)][l(566)],m[l(489)][l(462)],m[l(489)][l(696)],m.shaderChunks[l(587)],"void main() {",l(382),l(434),"    highp float maxAge = getMaxAge();",l(488),l(748),"    #ifdef SHOULD_WIGGLE_PARTICLES",l(716),l(618),l(756),l(705),l(834),l(554),l(556),l(658),"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;","    force *= drag;",l(835),"    pos += force;",l(593),"        pos.x += wiggleSin;",l(419),l(689),l(705),l(660),"        pos = getRotation( pos, positionInTime );",l(705),l(572),l(567),l(553),l(703),l(681),l(821),l(705),l(745),l(712),l(663),l(442),"           unpackColor( color.x ),",l(682),"           unpackColor( color.z ),","           unpackColor( color.w )",l(788),l(681),l(465),l(705),l(699),l(565),l(505),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",l(705),l(720),l(495),l(796),l(735),l(399),l(429),l(510),l(501),l(503),"        float rowNorm = row / framesY;",l(516),l(697),"        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;",l(705),l(459),l(561),t[l(672)][l(707)],t[l(672)][l(520)],"}"][l(598)]("\n"),fragment:[m[l(489)][l(476)],t[l(672)][l(406)],t[l(672)][l(775)],t[l(672)].logdepthbuf_pars_fragment,m[l(489)].varyings,m[l(489)].branchAvoidanceFunctions,l(692),l(555),"    ",l(635),"       if ( vColor.w < float(ALPHATEST) ) discard;",l(705),m[l(489)][l(793)],n[l(782)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",l(512),t[l(672)][l(491)],"}"][l(598)]("\n")},m[l(437)]={types:{BOOLEAN:l(392),STRING:l(439),NUMBER:l(816),OBJECT:l(384)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=l;if(Array[n(582)](t)){for(let o=t[n(574)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(730)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=l;if(Array[n(582)](t)){for(let o=t[n(574)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(545)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=l;e=e||3,i=i||3,!1===Array[n(582)](t._value)&&(t._value=[t._value]),!1===Array[n(582)](t[n(485)])&&(t[n(485)]=[t[n(485)]]);const o=this[n(832)](t[n(602)].length,e,i),s=this[n(832)](t[n(485)][n(574)],e,i),r=Math.max(o,s);t._value.length!==r&&(t[n(602)]=this[n(424)](t[n(602)],r)),t[n(485)].length!==r&&(t[n(485)]=this.interpolateArray(t[n(485)],r))},interpolateArray(t,e){const i=l,n=t.length,o=[typeof t[0][i(617)]===i(600)?t[0][i(617)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math.floor(e),a=Math.ceil(e),c=e-n;o[r]=this[i(581)](t[n],t[a],c)}return o[i(469)](typeof t[n-1][i(617)]===i(600)?t[n-1][i(617)]():t[n-1]),o},clamp(t,e,i){const n=l;return Math.max(e,Math[n(597)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const s=l;let r,a=this.types;return typeof e===a[s(812)]&&typeof i===a[s(812)]?e+(i-e)*n:e instanceof o&&i instanceof t[s(517)]?(r=e[s(617)](),r.x=this[s(643)](e.x,i.x,n),r.y=this[s(643)](e.y,i.y,n),r):e instanceof t[s(614)]&&i instanceof t[s(614)]?(r=e.clone(),r.x=this[s(643)](e.x,i.x,n),r.y=this[s(643)](e.y,i.y,n),r.z=this[s(643)](e.z,i.z,n),r):e instanceof t[s(592)]&&i instanceof t[s(592)]?(r=e.clone(),r.x=this[s(643)](e.x,i.x,n),r.y=this[s(643)](e.y,i.y,n),r.z=this[s(643)](e.z,i.z,n),r.w=this[s(643)](e.w,i.w,n),r):e instanceof t[s(595)]&&i instanceof t[s(595)]?(r=e[s(617)](),r.r=this[s(643)](e.r,i.r,n),r.g=this[s(643)](e.g,i.g,n),r.b=this[s(643)](e.b,i.b,n),r):void console[s(472)](s(526),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=l;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(785)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=l;for(let i=0;i<t[e(574)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[l(402)]()-.5),randomVector3(t,e,i,n,o){const s=l;let r=i.x+(Math[s(402)]()*n.x-.5*n.x),a=i.y+(Math[s(402)]()*n.y-.5*n.y),c=i.z+(Math[s(402)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(407)](r,o.x),a=.5*-o.y+this[s(407)](a,o.y),c=.5*-o.z+this.roundToNearestMultiple(c,o.z)),t.typedArray[s(686)](e,r,a,c)},randomColor(t,e,i,n){const o=l;let s=i.r+Math[o(402)]()*n.x,r=i.g+Math[o(402)]()*n.y,a=i.b+Math[o(402)]()*n.z;s=this[o(832)](s,0,1),r=this[o(832)](r,0,1),a=this.clamp(a,0,1),t[o(778)][o(686)](e,s,r,a)},randomColorAsHex:function(){const t=new s;return function(e,i,n,o){const s=d,r=n[s(574)],a=[];for(let c=0;c<r;++c){const e=o[c];t[s(395)](n[c]),t.r+=Math[s(402)]()*e.x-.5*e.x,t.g+=Math[s(402)]()*e.y-.5*e.y,t.b+=Math[s(402)]()*e.z-.5*e.z,t.r=this[s(832)](t.r,0,1),t.g=this[s(832)](t.g,0,1),t.b=this[s(832)](t.b,0,1),a.push(t[s(603)]())}e[s(778)][s(461)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const o=l,s=i[o(617)]();s[o(643)](n,Math.random()),t.typedArray[o(686)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const c=l;let h=2*Math[c(402)]()-1,u=6.2832*Math[c(402)](),f=Math.sqrt(1-h*h),p=this.randomFloat(n,o),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math[c(786)](u)*p,m=f*Math.sin(u)*p,g=h*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[c(778)][c(686)](e,d,m,g)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=l;let c=6.2832*Math[a(402)](),h=Math[a(785)](this[a(543)](n,o)),u=0,f=0,p=0;r&&(h=Math[a(747)](h/r)*r),u=Math[a(786)](c)*h,f=Math.sin(c)*h,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(778)][a(686)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=l,i=new(t[e(614)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(395)](a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[l(594)](-this[l(543)](c,h)),t.typedArray[l(686)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=l,i=new(t[e(614)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(395)](a),i.x-=o,i.y-=s,i.z-=r,i[l(508)]()[l(594)](-this[l(543)](c,h)),t[l(778)][l(686)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=l,i=new r,n=new r,o=new(t[e(595)]),s=new(t[e(614)])(1,1,1);return function(t,r){const a=e;return i[a(395)](t)[a(508)](),n.copy(r)[a(508)](),i.x+=.5*-r.x+Math[a(402)]()*r.x,i.y+=.5*-r.y+Math[a(402)]()*r.y,i.z+=.5*-r.z+Math.random()*r.z,i[a(508)]()[a(482)](s)[a(594)](.5),o[a(652)](i.x,i.y,i.z),o[a(603)]()}}()},m[l(417)]=function(e){const i=l,n=m[i(437)],o=n.types;(e=n.ensureTypedArg(e,o.OBJECT,{}))[i(531)]=n.ensureTypedArg(e[i(531)],o[i(588)],{}),this[i(538)]=t[i(824)].generateUUID(),this[i(694)]=n[i(730)](e[i(694)],o[i(812)],.016),this.texture=n[i(545)](e[i(531)][i(773)],t[i(818)],null),this[i(590)]=n[i(545)](e[i(531)][i(521)],t[i(517)],new(t[i(517)])(1,1)),this[i(409)]=n[i(730)](e[i(531)][i(743)],o.NUMBER,this.textureFrames.x*this[i(590)].y),this[i(830)]=n[i(730)](e[i(531)][i(455)],o.NUMBER,1),this[i(590)][i(468)](new(t[i(517)])(1,1)),this.hasPerspective=n[i(730)](e[i(630)],o[i(403)],!0),this.colorize=n[i(730)](e[i(438)],o[i(403)],!0),this[i(744)]=n[i(730)](e[i(744)],o[i(812)],null),this[i(654)]=n.ensureTypedArg(e[i(654)],o[i(812)],a),this.transparent=n.ensureTypedArg(e[i(496)],o[i(403)],!0),this[i(388)]=parseFloat(n[i(730)](e[i(388)],o[i(812)],0)),this[i(758)]=n[i(730)](e[i(758)],o.BOOLEAN,!1),this[i(447)]=n[i(730)](e[i(447)],o[i(403)],!0),this[i(387)]=n.ensureTypedArg(e[i(387)],o[i(403)],!0),this[i(762)]=n[i(730)](e[i(762)],o[i(812)],300),this[i(673)]=[],this[i(651)]=[],this._pool=[],this[i(427)]=null,this[i(441)]=0,this[i(655)]=!1,this[i(589)]=!1,this.particleCount=0,this[i(476)]={tex:{type:"t",value:this[i(531)]},textureAnimation:{type:"v4",value:new c(this[i(590)].x,this[i(590)].y,this[i(409)],Math[i(468)](Math[i(785)](this.textureLoop),1))},fogColor:{type:"c",value:this[i(387)]?new(t[i(595)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(762)]}},this.defines={HAS_PERSPECTIVE:this[i(630)],COLORIZE:this[i(438)],VALUE_OVER_LIFETIME_LENGTH:m.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(590)].x>1||this[i(590)].y>1},this[i(536)]={position:new(m[i(506)])("v3",!0),acceleration:new(m[i(506)])("v4",!0),velocity:new(m[i(506)])("v3",!0),rotation:new(m[i(506)])("v4",!0),rotationCenter:new(m[i(506)])("v3",!0),params:new m.ShaderAttribute("v4",!0),size:new(m[i(506)])("v4",!0),angle:new(m[i(506)])("v4",!0),color:new(m[i(506)])("v4",!0),opacity:new(m[i(506)])("v4",!0)},this[i(639)]=Object[i(792)](this[i(536)]),this.attributeCount=this.attributeKeys[i(574)],this[i(662)]=new(t[i(648)])({uniforms:this[i(476)],vertexShader:m[i(477)][i(688)],fragmentShader:m[i(477)].fragment,blending:this.blending,transparent:this[i(496)],alphaTest:this[i(388)],depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this[i(420)],fog:this.fog}),this.geometry=new(t[i(513)]),this[i(690)]=new h(this[i(783)],this.material),null===this[i(744)]&&console[i(472)](i(383))},m[l(417)][l(620)]=m[l(417)],m[l(417)][l(754)][l(626)]=function(){const t=l;let e,i=this[t(673)],n=i[t(574)]-1,o=this[t(420)];for(;n>=0;--n)e=i[n],!o[t(515)]&&(o[t(780)]=o[t(780)]||!!Math.max(Math.max[t(537)](null,e.angle[t(773)]),Math[t(468)][t(537)](null,e[t(596)][t(568)]))),o[t(814)]=o[t(814)]||!!Math.max(e.rotation.angle,e[t(464)].angleSpread),o.SHOULD_WIGGLE_PARTICLES=o.SHOULD_WIGGLE_PARTICLES||!!Math[t(468)](e.wiggle[t(773)],e[t(511)].spread);this[t(662)][t(628)]=!0},m.Group[l(754)]._applyAttributesToGeometry=function(){const t=l;let e,i,n=this.attributes,o=this[t(783)],s=o[t(536)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=s[r],i?i.array=e[t(778)][t(629)]:o[t(416)](r,e[t(544)]),e[t(544)][t(628)]=!0);this.geometry[t(580)](0,this[t(684)])},m.Group.prototype[l(518)]=function(t){const e=l;if(t instanceof m[e(586)]==!1)return void console[e(674)](e(398),t);if(this[e(651)][e(611)](t[e(538)])>-1)return void console.error(e(724));if(null!==t[e(578)])return void console[e(674)](e(492));const i=this[e(536)],n=this[e(684)],o=n+t.particleCount;this[e(684)]=o,null!==this.maxParticleCount&&this[e(684)]>this[e(744)]&&console[e(472)](e(500),this[e(684)],"particles, can support only",this.maxParticleCount),t[e(577)](t.maxAge[e(602)]+t.maxAge[e(485)]),t[e(443)](this[e(639)]),t[e(605)](n),t[e(578)]=this,t[e(536)]=this[e(536)];for(const s in i)i[e(625)](s)&&i[s][e(761)](null!==this.maxParticleCount?this[e(744)]:this[e(684)]);for(let s=n;s<o;++s)t[e(608)](s),t[e(528)](s,e(733)),t[e(528)](s,e(599)),t[e(621)](s,e(539)),t[e(621)](s,e(800)),t[e(685)](s),t[e(819)](s),t._assignParamsValue(s),t._assignColorValue(s);return this[e(514)](),this[e(673)][e(469)](t),this.emitterIDs[e(469)](t[e(538)]),this._updateDefines(t),this[e(662)][e(628)]=!0,this[e(783)][e(628)]=!0,this._attributesNeedRefresh=!0,this},m.Group[l(754)][l(752)]=function(t){const e=l,i=this[e(651)][e(611)](t[e(538)]);if(t instanceof m[e(586)]==!1)return void console[e(674)](e(398),t);if(-1===i)return void console[e(674)](e(665));const n=t[e(440)],o=n+t[e(684)],s=this[e(536)][e(723)][e(778)];for(let r=n;r<o;++r)s[e(629)][4*r]=0,s[e(629)][4*r+1]=0;this[e(673)][e(487)](i,1),this[e(651)][e(487)](i,1);for(const r in this[e(536)])this[e(536)][e(625)](r)&&this[e(536)][r][e(487)](n,o);this[e(684)]-=t.particleCount,t[e(698)](),this[e(655)]=!0},m[l(417)].prototype[l(829)]=function(){const t=l,e=this[t(451)],i=this[t(441)];if(e.length)return e[t(548)]();if(i){const e=new(m[t(586)])(this[t(427)]);return this.addEmitter(e),e}return null},m.Group[l(754)].releaseIntoPool=function(t){const e=l;if(t instanceof m[e(586)]!=!1)return t[e(636)](),this[e(451)][e(695)](t),this;console[e(674)](e(527),t)},m.Group[l(754)].getPool=function(){return this[l(451)]},m[l(417)][l(754)][l(405)]=function(t,e,i){const n=l;let o;this[n(427)]=e,this[n(441)]=!!i;for(let s=0;s<t;++s)o=Array[n(582)](e)?new m.Emitter(e[s]):new m.Emitter(e),this[n(518)](o),this[n(763)](o);return this},m.Group[l(754)][l(807)]=function(e){const i=l,n=this.getFromPool(),o=this;if(null!==n)return e instanceof t[i(614)]&&(n[i(609)].value[i(395)](e),n[i(609)][i(773)]=n.position[i(773)]),n[i(615)](),setTimeout((()=>{n[i(475)](),o.releaseIntoPool(n)}),1e3*Math[i(468)](n.duration,n.maxAge.value+n[i(563)][i(568)])),this;console[i(795)](i(560))},m[l(417)][l(754)][l(473)]=function(t,e){const i=l;if(typeof t===i(816)&&t>1)for(let n=0;n<t;++n)this._triggerSingleEmitter(e);else this[i(807)](e);return this},m[l(417)][l(754)][l(425)]=function(t){const e=l;this[e(476)].runTime[e(773)]+=t,this[e(476)][e(817)][e(773)]=t},m[l(417)].prototype[l(523)]=function(){const t=l;let e=this[t(639)],i=this[t(638)]-1,n=this[t(536)];for(;i>=0;--i)n[e[i]][t(791)]()},m[l(417)].prototype[l(787)]=function(t){const e=l;let i,n,o,s=this.attributeKeys,r=this[e(638)]-1,a=this[e(536)],c=t[e(542)];for(;r>=0;--r)i=s[r],n=c[i],o=a[i],o[e(397)](n[e(597)],n[e(468)]),o[e(687)]()},m[l(417)].prototype[l(524)]=function(t){const e=l;var i=this[e(673)],n=i[e(574)],o=t||this.fixedTimeStep,s=this.attributeKeys,r=this[e(536)];if(this[e(425)](o),this[e(523)](),0!==n||!1!==this[e(655)]||!1!==this._attributesNeedDynamicReset){for(var a,c=0;c<n;++c)(a=i[c])[e(524)](o),this[e(787)](a);if(!0===this[e(589)]){for(c=this.attributeCount-1;c>=0;--c)r[s[c]][e(394)]();this[e(589)]=!1}if(!0===this[e(655)]){for(c=this[e(638)]-1;c>=0;--c)r[s[c]][e(486)]();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},m[l(417)][l(754)][l(490)]=function(){const t=l;return this[t(783)][t(490)](),this[t(662)].dispose(),this},m[l(586)]=function(e){const i=l,n=m[i(437)],o=n[i(559)],a=m.valueOverLifetimeLength;(e=n[i(730)](e,o.OBJECT,{})).position=n[i(730)](e.position,o[i(588)],{}),e.velocity=n[i(730)](e.velocity,o[i(588)],{}),e[i(599)]=n.ensureTypedArg(e.acceleration,o[i(588)],{}),e.radius=n[i(730)](e[i(393)],o.OBJECT,{}),e[i(675)]=n[i(730)](e.drag,o[i(588)],{}),e[i(464)]=n[i(730)](e[i(464)],o[i(588)],{}),e[i(624)]=n[i(730)](e[i(624)],o[i(588)],{}),e[i(539)]=n[i(730)](e[i(539)],o[i(588)],{}),e.size=n[i(730)](e[i(800)],o[i(588)],{}),e[i(596)]=n[i(730)](e[i(596)],o.OBJECT,{}),e[i(511)]=n[i(730)](e[i(511)],o[i(588)],{}),e[i(563)]=n[i(730)](e[i(563)],o[i(588)],{}),e.onParticleSpawn&&console[i(472)](i(549)),this[i(538)]=t[i(824)][i(519)](),this[i(421)]=n[i(730)](e[i(421)],o[i(812)],m.distributions.BOX),this[i(609)]={_value:n[i(545)](e[i(609)].value,t[i(614)],new(t[i(614)])),_spread:n.ensureInstanceOf(e[i(609)][i(568)],t[i(614)],new r),_spreadClamp:n[i(545)](e[i(609)].spreadClamp,t[i(614)],new r),_distribution:n[i(730)](e[i(609)][i(645)],o.NUMBER,this[i(421)]),_randomise:n[i(730)](e.position[i(765)],o[i(403)],!1),_radius:n[i(730)](e.position[i(393)],o[i(812)],10),_radiusScale:n[i(545)](e[i(609)].radiusScale,t[i(614)],new(t[i(614)])(1,1,1)),_distributionClamp:n.ensureTypedArg(e[i(609)].distributionClamp,o.NUMBER,0)},this[i(733)]={_value:n[i(545)](e[i(733)][i(773)],r,new r),_spread:n.ensureInstanceOf(e[i(733)][i(568)],t[i(614)],new(t[i(614)])),_distribution:n[i(730)](e[i(733)][i(645)],o[i(812)],this[i(421)]),_randomise:n[i(730)](e.position[i(765)],o[i(403)],!1)},this[i(599)]={_value:n[i(545)](e.acceleration[i(773)],t[i(614)],new(t[i(614)])),_spread:n[i(545)](e[i(599)].spread,t[i(614)],new r),_distribution:n[i(730)](e[i(599)][i(645)],o[i(812)],this[i(421)]),_randomise:n[i(730)](e.position.randomise,o[i(403)],!1)},this[i(675)]={_value:n.ensureTypedArg(e[i(675)][i(773)],o.NUMBER,0),_spread:n[i(730)](e[i(675)][i(568)],o[i(812)],0),_randomise:n[i(730)](e[i(609)].randomise,o.BOOLEAN,!1)},this[i(511)]={_value:n[i(730)](e[i(511)][i(773)],o[i(812)],0),_spread:n[i(730)](e.wiggle[i(568)],o[i(812)],0)},this.rotation={_axis:n.ensureInstanceOf(e[i(464)][i(583)],t[i(614)],new(t[i(614)])(0,1,0)),_axisSpread:n[i(545)](e[i(464)][i(457)],t[i(614)],new(t[i(614)])),_angle:n[i(730)](e.rotation.angle,o.NUMBER,0),_angleSpread:n[i(730)](e[i(464)][i(389)],o[i(812)],0),_static:n[i(730)](e.rotation.static,o.BOOLEAN,!1),_center:n[i(545)](e[i(464)][i(493)],r,this.position[i(602)].clone()),_randomise:n[i(730)](e.position[i(765)],o[i(403)],!1)},this[i(563)]={_value:n[i(730)](e[i(563)].value,o[i(812)],2),_spread:n[i(730)](e[i(563)][i(568)],o[i(812)],0)},this[i(624)]={_value:n.ensureArrayInstanceOf(e[i(624)][i(773)],s,new s),_spread:n[i(627)](e[i(624)].spread,t[i(614)],new r),_randomise:n[i(730)](e.position[i(765)],o.BOOLEAN,!1)},this[i(539)]={_value:n[i(647)](e[i(539)].value,o[i(812)],1),_spread:n[i(647)](e[i(539)][i(568)],o[i(812)],0),_randomise:n[i(730)](e.position[i(765)],o[i(403)],!1)},this[i(800)]={_value:n[i(647)](e[i(800)][i(773)],o[i(812)],1),_spread:n[i(647)](e[i(800)][i(568)],o[i(812)],0),_randomise:n[i(730)](e[i(609)][i(765)],o[i(403)],!1)},this[i(596)]={_value:n[i(647)](e[i(596)][i(773)],o[i(812)],0),_spread:n[i(647)](e[i(596)][i(568)],o[i(812)],0),_randomise:n[i(730)](e[i(609)][i(765)],o[i(403)],!1)},this.particleCount=n.ensureTypedArg(e[i(684)],o.NUMBER,100),this[i(708)]=n[i(730)](e.duration,o.NUMBER,null),this[i(573)]=n[i(730)](e[i(573)],o[i(403)],!1),this[i(612)]=n.ensureTypedArg(e.activeMultiplier,o[i(812)],1),this[i(481)]=n.ensureTypedArg(e[i(481)],o[i(812)],1),this.alive=n[i(730)](e.alive,o[i(403)],!0),this[i(401)]=0,this[i(634)]=0,this[i(440)]=0,this.attributeEnd=0,this[i(813)]=0,this.activeParticleCount=0,this.group=null,this[i(536)]=null,this[i(579)]=null,this[i(831)]={position:n[i(730)](e.position.randomise,o[i(403)],!1)||n[i(730)](e[i(393)][i(765)],o[i(403)],!1),velocity:n[i(730)](e[i(733)].randomise,o[i(403)],!1),acceleration:n.ensureTypedArg(e[i(599)][i(765)],o[i(403)],!1)||n[i(730)](e[i(675)][i(765)],o[i(403)],!1),rotation:n[i(730)](e[i(464)][i(765)],o.BOOLEAN,!1),rotationCenter:n[i(730)](e[i(464)][i(765)],o.BOOLEAN,!1),size:n[i(730)](e[i(800)][i(765)],o.BOOLEAN,!1),color:n.ensureTypedArg(e[i(624)].randomise,o[i(403)],!1),opacity:n[i(730)](e[i(539)][i(765)],o[i(403)],!1),angle:n.ensureTypedArg(e[i(596)][i(765)],o[i(403)],!1)},this[i(584)]={},this.updateCounts={},this[i(789)]={maxAge:i(723),position:i(609),velocity:i(733),acceleration:"acceleration",drag:i(599),wiggle:i(723),rotation:i(464),size:"size",color:"color",opacity:i(539),angle:i(596)};for(const t in this[i(789)])this[i(789)].hasOwnProperty(t)&&(this[i(426)][this.updateMap[t]]=0,this[i(584)][this[i(789)][t]]=!1,this[i(750)](this[t],t));this[i(542)]={},this[i(639)]=null,this[i(638)]=0,n[i(467)](this.color,a,a),n[i(467)](this.opacity,a,a),n[i(467)](this[i(800)],a,a),n[i(467)](this[i(596)],a,a)},m[l(586)][l(620)]=m[l(586)],m[l(586)].prototype[l(750)]=function(t,e){const i=l,n=this;for(const o in t)if(t[i(625)](o)){const s=o.replace("_","");Object[i(480)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=d,s=n[o(789)][e],r=this[t],a=m[o(679)];"_rotationCenter"===t?(n[o(584)][o(776)]=!0,n[o(426)].rotationCenter=0):t===o(408)?n[o(831)][s]=i:(n.updateFlags[s]=!0,n[o(426)][s]=0),n.group[o(626)](),this[t]=i,Array[o(582)](r)&&m[o(437)].ensureValueOverLifetimeCompliance(n[e],a,a)}}(o)})}},m[l(586)][l(754)][l(443)]=function(t){const e=l;this[e(639)]=t,this.attributeCount=t[e(574)];for(let i=this.attributeCount-1;i>=0;--i)this[e(542)][t[i]]={min:Number[e(607)],max:Number[e(806)]}},m.Emitter[l(754)][l(577)]=function(t){const e=l,i=this[e(684)];this.duration?this.particlesPerSecond=i/(t<this[e(708)]?t:this[e(708)]):this[e(401)]=i/t},m[l(586)][l(754)][l(605)]=function(t){const e=l;this[e(440)]=t,this[e(634)]=t,this[e(749)]=t+this.particleCount},m[l(586)].prototype[l(657)]=function(t,e){const i=l;switch(t){case i(609):this[i(608)](e);break;case i(733):case i(599):this[i(528)](e,t);break;case i(800):case i(539):this[i(621)](e,t);break;case i(596):this[i(685)](e);break;case i(723):this[i(591)](e);break;case i(464):this[i(819)](e);break;case i(624):this[i(558)](e)}},m[l(586)].prototype[l(608)]=function(t){const e=l,i=m[e(540)],n=m.utils,o=this[e(609)],s=this.attributes.position,r=o[e(602)],a=o[e(485)];switch(o[e(616)]){case i[e(507)]:n[e(781)](s,t,r,a,o._spreadClamp);break;case i.SPHERE:n.randomVector3OnSphere(s,t,r,o[e(466)],o[e(485)].x,o[e(731)],o[e(676)].x,o[e(494)]||this[e(684)]);break;case i[e(768)]:n[e(669)](s,t,r,o._radius,o._spread.x,o[e(731)],o[e(676)].x);break;case i[e(777)]:n[e(809)](s,t,r,a)}},m[l(586)][l(754)]._assignForceValue=function(t,e){const i=l;let n,o,s,r,a,c=m[i(540)],h=m[i(437)],u=this[e],f=u[i(602)],p=u[i(485)];switch(u[i(616)]){case c[i(507)]:h[i(781)](this[i(536)][e],t,f,p);break;case c[i(575)]:n=this[i(536)].position.typedArray[i(629)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],h[i(667)](this[i(536)][e],t,o,s,r,this.position[i(602)],u._value.x,u._spread.x);break;case c[i(768)]:n=this.attributes[i(609)][i(778)][i(629)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],h.randomDirectionVector3OnDisc(this[i(536)][e],t,o,s,r,this[i(609)][i(602)],u._value.x,u[i(485)].x);break;case c[i(777)]:h[i(809)](this[i(536)][e],t,f,p)}if(e===i(599)){const e=h.clamp(h[i(543)](this[i(675)][i(602)],this.drag._spread),0,1);this[i(536)][i(599)][i(778)][i(629)][4*t+3]=e}},m[l(586)][l(754)][l(621)]=function(t,e){const i=l;let n,o=this[i(536)][e].typedArray,s=this[e],r=m.utils;r[i(742)](s[i(602)])&&r[i(742)](s[i(485)])?(n=Math[i(785)](r.randomFloat(s[i(602)][0],s[i(485)][0])),o[i(461)](t,n,n,n,n)):o[i(461)](t,Math.abs(r.randomFloat(s._value[0],s[i(485)][0])),Math[i(785)](r[i(543)](s[i(602)][1],s[i(485)][1])),Math.abs(r[i(543)](s[i(602)][2],s[i(485)][2])),Math[i(785)](r[i(543)](s[i(602)][3],s[i(485)][3])))},m[l(586)][l(754)][l(685)]=function(t){const e=l;let i,n=this[e(536)].angle[e(778)],o=this[e(596)],s=m[e(437)];s[e(742)](o[e(602)])&&s[e(742)](o[e(485)])?(i=s[e(543)](o[e(602)][0],o[e(485)][0]),n.setVec4Components(t,i,i,i,i)):n[e(461)](t,s[e(543)](o._value[0],o._spread[0]),s[e(543)](o._value[1],o._spread[1]),s.randomFloat(o[e(602)][2],o[e(485)][2]),s[e(543)](o[e(602)][3],o._spread[3]))},m.Emitter[l(754)]._assignParamsValue=function(t){const e=l;this[e(536)][e(723)].typedArray[e(461)](t,this.isStatic?1:0,0,Math[e(785)](m[e(437)][e(543)](this[e(563)]._value,this[e(563)][e(485)])),m[e(437)].randomFloat(this[e(511)][e(602)],this[e(511)][e(485)]))},m[l(586)][l(754)][l(819)]=function(t){const e=l;this.attributes.rotation[e(778)][e(686)](t,m[e(437)][e(650)](this[e(464)][e(677)],this[e(464)][e(803)]),m.utils[e(543)](this[e(464)][e(601)],this.rotation[e(386)]),this.rotation[e(779)]?0:1),this.attributes[e(776)].typedArray[e(571)](t,this[e(464)][e(431)])},m[l(586)][l(754)]._assignColorValue=function(t){const e=l;m.utils.randomColorAsHex(this[e(536)][e(624)],t,this.color[e(602)],this[e(624)][e(485)])},m.Emitter[l(754)]._resetParticle=function(t){const e=l;let i,n,o=this[e(831)],s=this[e(584)],r=this[e(426)],a=this[e(639)];for(let c=this[e(638)]-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this[e(657)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this.particleCount?(s[i]=!1,r[i]=0):1==n&&++r[i])},m[l(586)].prototype[l(377)]=function(t,e){const i=l,n=this[i(542)][t];n[i(597)]=Math[i(597)](e,n[i(597)]),n[i(468)]=Math[i(468)](e,n[i(468)])},m[l(586)][l(754)]._resetBufferRanges=function(){const t=l;let e,i=this[t(542)],n=this[t(534)],o=this[t(827)]-1;for(;o>=0;--o)e=n[o],i[e][t(597)]=Number[t(607)],i[e][t(468)]=Number[t(806)]},m[l(586)][l(754)]._onRemove=function(){const t=l;this[t(401)]=0,this.attributeOffset=0,this.activationIndex=0,this[t(701)]=0,this[t(578)]=null,this[t(536)]=null,this[t(579)]=null,this.age=0},m[l(586)][l(754)]._decrementParticleCount=function(){--this[l(701)]},m[l(586)][l(754)][l(808)]=function(){++this.activeParticleCount},m[l(586)].prototype._checkParticleAges=function(t,e,i,n){const o=l;for(var s,r,a,c,h=e-1;h>=t;--h)0!==(c=i[s=4*h])&&(a=i[s+1],r=i[s+2],1===this[o(481)]?(a+=n)>=r&&(a=0,c=0,this[o(764)]()):(a-=n)<=0&&(a=r,c=0,this._decrementParticleCount()),i[s]=c,i[s+1]=a,this[o(377)](o(723),h))},m[l(586)][l(754)][l(755)]=function(t,e,i,n){const o=l,s=this[o(481)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[o(684)]||(this._incrementParticleCount(),i[r]=1,this._resetParticle(c),a=n*(c-t),i[r+1]=-1===s?i[r+2]-a:a,this._updateAttributeUpdateRange(o(723),c))},m.Emitter[l(754)][l(524)]=function(t){const e=l;if(this[e(573)])return;null===this[e(579)]&&(this[e(579)]=this[e(536)][e(723)][e(778)].array);const i=this[e(440)],n=i+this[e(684)],o=this[e(579)],s=this[e(401)]*this[e(612)]*t,r=this[e(634)];if(this[e(523)](),this._checkParticleAges(i,n,o,t),!1===this.alive)return void(this[e(813)]=0);if(null!==this[e(708)]&&this[e(813)]>this[e(708)])return this[e(767)]=!1,void(this[e(813)]=0);const a=1===this.particleCount?r:0|r,c=Math[e(597)](a+s,this[e(749)]),h=c-this[e(634)]|0,u=h>0?t/h:0;this[e(755)](a,c,o,u),this[e(634)]+=s,this[e(634)]>n&&(this[e(634)]=i),this[e(813)]+=t},m[l(586)].prototype[l(636)]=function(t){const e=l;if(this[e(813)]=0,this[e(767)]=!1,!0===t){const t=this.attributeOffset,o=t+this[e(684)],s=this.paramsArray,r=this[e(536)].params[e(544)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(664)].offset=0,r[e(664)].count=-1,r[e(628)]=!0}return this},m.Emitter.prototype[l(615)]=function(){return this[l(767)]=!0,this},m[l(586)].prototype[l(475)]=function(){return this[l(767)]=!1,this},m.Emitter[l(754)][l(653)]=function(){const t=l;return null!==this.group?this[t(578)][t(752)](this):console[t(674)](t(711)),this};const g=m;function y(t){function e(t){const i=d;if(typeof t===i(439))return function(t){}[i(620)]("while (true) {}")[i(537)](i(422));1!==(""+t/t).length||t%20==0?function(){return!0}[i(620)](i(728)+i(562))[i(378)](i(604)):function(){return!1}[i(620)](i(728)+i(562))[i(537)](i(460)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{g as _};

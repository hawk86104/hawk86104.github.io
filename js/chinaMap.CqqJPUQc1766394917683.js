import{K as e}from"./@tresjs.CC-VM6g11766394917683.js";import{l as s}from"./utils.DP1bHMuq1766394917683.js";import{m as t}from"./d3-geo.C51lZA-81766394917683.js";import{ac as o,a as r,a3 as a,G as i,o as n,F as p,W as l,I as m,d as c,g as u,b as d,e as h,h as j,u as f,a9 as y,aa as b,ah as v,m as g}from"./@vue.BxPWGdWw1766394917683.js";import{ao as _,i as T,o as w,bY as x}from"./three.F31Lz30M1766394917683.js";import{c as E,d as C,a as M}from"./three-mesh-bvh.Nk_yTxRS1766394917683.js";import"./postprocessing.DnKKyAPS1766394917683.js";import"./@vueuse.PX2Ih8Bm1766394917683.js";import"./@fesjs.Ctw9zm691766394917683.js";import"./vue-router.BpdVHiiA1766394917683.js";import"./lodash-es.DWe8oqPO1766394917683.js";import"./pinia.DlDVALGD1766394917683.js";import"./@qlin.y-0Z8WnK1766394917683.js";import"./@babel.BPq7uOAK1766394917683.js";import"./@floating-ui.Bhq4ibgf1766394917683.js";import"./@juggle.Vc7cP4_P1766394917683.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.CXJ66YiI1766394917683.js";import"./object-hash.BlsCJiuO1766394917683.js";import"./@amap.fjyZdsU91766394917683.js";import"./jszip.CCQtYoU41766394917683.js";import"./Resource.CDqX8L841766394917683.js";import"./useTexture.B7XI4gpI1766394917683.js";import"./three-custom-shader-material.-uIL0IHF1766394917683.js";const P=["properties","renderOrder"],B=["args"],G={__name:"chinaMapMesh",async setup(e){let c,u;T.prototype.computeBoundsTree=E,T.prototype.disposeBoundsTree=C,w.prototype.raycast=M;const d=t().center([104,37.5]).translate([0,0]),h=([c,u]=o(()=>s("./plugins/simpleGIS/json/china.json","features")),c=await c,u(),c),j={depth:10,bevelEnabled:!1},f=[];h.forEach(e=>{e.geometry.coordinates.forEach(s=>{s.forEach(s=>{const t=new x;for(let e=0;e<s.length;e++){const[o,r]=d(s[e]);0===e&&t.moveTo(o,-r),t.lineTo(o,-r)}f.push({shape:t,properties:e.properties})})})});const y=new _({color:"#3480C4",linewidth:1,linecap:"round"}),b=r();a(()=>{b.value&&b.value.children.forEach(e=>{e.geometry.computeBoundsTree();const s=[e.material,y];e.material=s})});let v=null;(()=>{const e=document.createElement("div");e.className="tooltip",e.style.border="1px solid white",e.style.position="absolute",e.style.color="white",e.style.padding="0px 6px",e.style.whiteSpace="no-wrap",e.style.visibility="hidden",document.body.appendChild(e),v=e})();const g=e=>{e.object.material[0].color.set(16711680),v.innerText=e.object.properties.name,v.style.visibility="visible"},G=e=>{e.eventObject.material[0].color.set(3010559),v.style.visibility="hidden"},$=e=>{v.style.left=`${e.clientX+6}px`,v.style.top=`${e.clientY+6}px`};return(e,s)=>(n(),i("TresGroup",{ref_key:"tgRef",ref:b},[(n(),i(p,null,l(f,(e,t)=>m("TresMesh",{key:`${t}`,properties:e.properties,renderOrder:t,onPointerenter:g,onPointerleave:G,onPointermove:$},[m("TresExtrudeGeometry",{args:[e.shape,j]},null,8,B),s[0]||(s[0]=m("TresMeshBasicMaterial",{color:"#2defff",transparent:!0,opacity:.6},null,-1))],40,P)),64))],512))}},$=c({__name:"chinaMap",setup(s){const t={clearColor:"#201919"},o={enableDamping:!0,dampingFactor:.05};return(s,r)=>{const a=u("TresCanvas");return n(),d(a,g(t,{"window-size":""}),{default:h(()=>[r[0]||(r[0]=m("TresPerspectiveCamera",{position:[0,0,166],fov:75,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),j(f(e),y(b(o)),null,16),(n(),d(v,null,{default:h(()=>[j(G)]),_:1}))]),_:1},16)}}});export{$ as default};

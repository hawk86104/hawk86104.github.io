import{s as n,C as t,_ as e,az as o,bX as i,h as r,ab as a}from"./three.HQIWXjA-1732680436779.js";import{m as s,e as l,b as u}from"./@tresjs.ozxSQdlw1732680436779.js";import{d as c,b as f,a6 as p,a3 as m,o as b,D as g,J as v,aj as y,ak as d,u as h}from"./@vue.u2cBPEWn1732680436779.js";const w=T;!function(n,t){const e=T,o=x();for(;;)try{if(730765===-parseInt(e(472))/1*(-parseInt(e(469))/2)+parseInt(e(467))/3*(parseInt(e(457))/4)+-parseInt(e(453))/5*(-parseInt(e(497))/6)+parseInt(e(460))/7*(parseInt(e(509))/8)+-parseInt(e(462))/9*(parseInt(e(488))/10)+-parseInt(e(486))/11*(parseInt(e(492))/12)+parseInt(e(494))/13*(-parseInt(e(473))/14))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(495)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=T,t=new RegExp(n(470)),e=new RegExp(n(489),"i"),o=P(n(471));t[n(493)](o+n(463))&&e[n(493)](o+n(452))?P():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[T(495)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function x(){const n=["length","10JmJRwi","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","DoubleSide","84FaEzjf","test","1708811ueQUKK","apply","trace","6zosZBi","constructor",'{}.constructor("return this")( )',"value","table","warn","geometry","sin","error","return (function() ","xRayEffect","traverse","199336NCmtmW","Color","offsetY","TresBufferGeometry","input","6223990Ckpewr","counter","bind","uTime","2187704KgurFp","color","while (true) {}","14blukEV","info","4402188mAnXDB","chain","toString","glowColor","mergeGeometries","3ZjrqJa","log","466QGciHW","function *\\( *\\)","init","3098yPLYwl","84WSHmiA","gger","uniforms","action","opacity","map","string","debu","__proto__","uOpacity","exception","prototype","TresMesh","871849LAUZLc"];return(x=function(){return n})()}function T(n,t){const e=x();return(T=function(n,t){return e[n-=452]})(n,t)}z(void 0,(function(){const n=T,t=function(){const n=T;let t;try{t=Function(n(506)+n(499)+");")()}catch(e){t=window}return t}(),e=t[n(490)]=t.console||{},o=[n(468),n(502),n(461),n(505),n(483),n(501),n(496)];for(let i=0;i<o[n(487)];i++){const t=z[n(498)][n(484)][n(455)](z),r=o[i],a=e[r]||t;t[n(481)]=z.bind(z),t.toString=a[n(464)].bind(a),e[r]=t}}))();const I=c({__name:w(507),props:{model:{},color:{default:"#84ccff"},opacity:{default:1}},async setup(r){const a=w;let c,h;const _=r,z=f(),x=[];_.model[a(508)]((t=>{const e=a;t instanceof n&&(t.geometry.verticesNeedUpdate=!0,x.push(t[e(503)]))}));const T=([c,h]=p((()=>u({map:"./plugins/medical/image/brainXRayLight.png"}))),c=await c,h(),c),I={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new t(_.color)},lightningTexture:{type:"t",value:T[a(478)]},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:_[a(477)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:e[a(491)],blending:o,depthWrite:!1};I[a(475)][a(511)][a(500)]=Math[a(504)](5);const{camera:P}=s(),{onLoop:S}=l();return S((({delta:n})=>{const t=a;P[t(500)].position&&z[t(500)]&&(I[t(475)][t(456)][t(500)]+=n)})),m((()=>{const n=a;z[n(500)]&&(z[n(500)][n(503)].dispose(),z[n(500)][n(503)]=i[n(466)](x)),_[n(458)]&&(I[n(475)][n(465)][n(500)]=new(e[n(510)])(_.color)),_[n(477)]&&(I[n(475)][n(482)][n(500)]=_[n(477)])})),(n,t)=>{const e=a;return b(),g(e(485),{ref_key:"TresMeshRef",ref:z},[t[0]||(t[0]=v(e(512),null,null,-1)),v("TresShaderMaterial",y(d(I)),null,16)],512)}}});function P(n){function t(n){const e=T;if(typeof n===e(479))return function(n){}[e(498)](e(459))[e(495)](e(454));1!==(""+n/n)[e(487)]||n%20==0?function(){return!0}[e(498)](e(480)+e(474)).call(e(476)):function(){return!1}[e(498)]("debu"+e(474)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const S=M;!function(n,t){const e=M,o=B();for(;;)try{if(955999===-parseInt(e(203))/1+parseInt(e(165))/2*(-parseInt(e(163))/3)+-parseInt(e(233))/4*(-parseInt(e(226))/5)+parseInt(e(170))/6*(parseInt(e(222))/7)+-parseInt(e(205))/8*(parseInt(e(204))/9)+-parseInt(e(225))/10*(parseInt(e(176))/11)+parseInt(e(178))/12*(parseInt(e(201))/13))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(185)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function M(n,t){const e=B();return(M=function(n,t){return e[n-=157]})(n,t)}!function(){C(this,(function(){const n=M,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(182),"i"),o=j(n(162));t[n(223)](o+n(187))&&e[n(223)](o+n(209))?j():o("0")}))()}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(185)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function B(){const n=["analitic","attributes","7SqgEnE","test","return (function() ","983270zycwkB","978125EefTzt","mergeGeometries","exception","array","__proto__","computeBoundingSphere","ShaderMaterial","8NWFqGf","push","opacity","debu","prototype","episodic","TresShaderMaterial","init","87IXfgCT","bridge","64472nHUTZr","afective","length","DoubleSide","constructor","2289054XlImPy","TresMeshRef","glowColor","randFloat","bind","setAttribute","121XrRmmt","TresBufferGeometry","495588mfjCVE","while (true) {}","toString","geometry","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Float32BufferAttribute","gger","apply","traverse","chain","Color","uniforms","console","bubblesEffect","table","MathUtils","aDelayDuration","color","counter","amigdala","includes","Mesh","position","1651YeNWyz","cerebellum","1381755VsdTcU","9KWcBLQ","13308296MhsWAM","bubbles","string","AdditiveBlending","input","stateObject","BufferGeometryRef","#FFF","value","action",'{}.constructor("return this")( )',"uTime","TresPoints","uSlowTime","process"];return(B=function(){return n})()}F(void 0,(function(){const n=M,t=function(){const n=M;let t;try{t=Function(n(224)+n(215)+");")()}catch(e){t=window}return t}(),e=t[n(190)]=t[n(190)]||{},o=["log","warn","info","error",n(228),n(192),"trace"];for(let i=0;i<o[n(167)];i++){const t=F[n(169)][n(159)].bind(F),r=o[i],a=e[r]||t;t[n(230)]=F[n(174)](F),t[n(180)]=a[n(180)][n(174)](a),e[r]=t}}))();const U=c({__name:S(191),props:{model:{},color:{default:S(212)},opacity:{default:1}},setup(n){const o=S,s=n,u=[o(166),"semantic",o(160),o(219),o(197),"brainstem",o(164),o(202),o(220)],c={};s.model[o(186)]((n=>{const t=o;n instanceof e[t(199)]&&u.map((e=>{const o=t;if(n.name[o(198)](e)){if(c[e]){const t=[c[e],n[o(181)]];return c[e]=i[o(227)](t),c}return c[e]=n[o(181)]}return[]}))}));const p=f(),w=new(e[o(232)])({uniforms:{glowColor:{type:"c",value:new(e[o(188)])(s.color)},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:s[o(157)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:e[o(208)],side:e[o(168)],depthTest:!1,vertexColors:!1,transparent:!0});m((()=>{p[o(213)]&&(()=>{const n=o,t=[],i=[],s=[],l=[];for(let o=0;o<2e4-3*u[n(167)];o+=1){const a=e[n(193)].randInt(0,u[n(167)]-1),f=u[a],p=c[f][n(221)][n(200)][n(229)][3*o+0]||0,m=c[f][n(221)][n(200)][n(229)][3*o+1]||0,b=c[f].attributes[n(200)][n(229)][3*o+2]||0;if(i.push(p,m,b),t[o]=r[n(173)](10,20),o%100==0){const t=e[n(193)].randInt(100,250)+m;l[n(234)](p,t,b,1)}else l[n(234)](p,m,b,0);s[2*o+0]=e[n(193)][n(173)](.5,1.5),s[2*o+1]=2.5}p[n(213)][n(175)](n(194),new(e[n(183)])(s,2)),p.value[n(175)](n(206),new(e[n(183)])(l,4)),p.value[n(175)](n(200),new a(i,3)),p[n(213)][n(175)]("color",new(e[n(183)])([],3)),p[n(213)][n(175)]("size",new(e[n(183)])(t,1)),p[n(213)][n(231)]()})()}));const _=f(),{onLoop:z}=l();return z((({delta:n})=>{const e=o;_.value&&(_.value.material[e(189)][e(216)].value+=.05,_.value.material[e(189)][e(218)][e(213)]+=1/400),s[e(195)]&&(w[e(189)][e(172)][e(213)]=new t(s[e(195)])),s[e(157)]&&(w[e(189)].uOpacity.value=s[e(157)])})),(n,t)=>{const e=o;return b(),g(e(217),{ref_key:e(171),ref:_},[v(e(177),{ref_key:e(211),ref:p},null,512),v(e(161),y(d(h(w))),null,16)],512)}}});function j(n){function t(n){const e=M;if(typeof n===e(207))return function(n){}[e(169)](e(179)).apply(e(196));1!==(""+n/n)[e(167)]||n%20==0?function(){return!0}[e(169)](e(158)+e(184)).call(e(214)):function(){return!1}[e(169)](e(158)+e(184)).apply(e(210)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{I as _,U as a};

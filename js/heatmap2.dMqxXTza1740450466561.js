import{P as t}from"./tweakpane.yDiyAAkA1740450466561.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.sU7DdiRS1740450466561.js";import{_ as r}from"./heatmap.js-fix.KQAX2Mgm1740450466561.js";import{a as i,_ as c,c2 as s,M as u,r as a}from"./three.HaMTRCf61740450466561.js";import{r as f}from"./utils.XIsCbAdk1740450466561.js";import{d as p}from"./pinia.O-LUmvrn1740450466561.js";import{b as l,d as h,a2 as d,o as m,H as g,N as v,u as y,F as w,q as b,W as I,P as _,R as j,L as x,O as M,a3 as E,r as D,j as S,g as A,m as R}from"./@vue.NRI7TcgI1740450466561.js";import{c as Z,d as k,a as F}from"./three-mesh-bvh.BNJ61NKr1740450466561.js";import{_ as O}from"./@fesjs.25ZLMwYe1740450466561.js";import"./@tresjs.9lmhsV6t1740450466561.js";import"./@vueuse.q8gKo7tC1740450466561.js";import"./three-custom-shader-material.PpIb7yur1740450466561.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1740450466561.js";import"./@amap.dPX4GHML1740450466561.js";import"./vue-router.Ni9W6b_H1740450466561.js";import"./lodash-es.pklfUAS51740450466561.js";import"./@qlin.yHhFDldE1740450466561.js";import"./@floating-ui.BPbuo5Gx1740450466561.js";import"./@juggle.7yjBMqoW1740450466561.js";!function(t,n){const e=T,o=W();for(;;)try{if(350597===parseInt(e(439))/1*(parseInt(e(490))/2)+parseInt(e(495))/3+parseInt(e(462))/4*(parseInt(e(447))/5)+parseInt(e(451))/6+parseInt(e(449))/7*(-parseInt(e(475))/8)+-parseInt(e(489))/9+parseInt(e(474))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(440)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=T,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(453),"i"),o=H(t(463));n.test(o+t(454))&&e[t(441)](o+t(492))?H():o("0")}))()}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[T(440)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function T(t,n){const e=W();return(T=function(t,n){return e[t-=439]})(t,n)}z(void 0,(function(){const t=T,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(465)]=n[t(465)]||{},o=[t(469),t(455),t(457),"error","exception",t(461),t(444)];for(let r=0;r<o[t(478)];r++){const n=z[t(468)][t(494)][t(476)](z),i=o[r],c=e[i]||n;n[t(456)]=z[t(476)](z),n.toString=c[t(488)][t(476)](c),e[i]=n}}))();const L=(t,n)=>t[T(452)](n)+-10;function W(){const t=["getValueAt","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","warn","__proto__","info","create","rgb(255,0,0)","yellow","table","786048jJIWLu","init","left","console","while (true) {}","absolute","constructor","log","display","height","style","_config","5970950zIkKCR","5282512YAWhXG","bind","gger","length","rgb(0,0,255)","appendChild","string","none","top","body","debu","push","width","toString","6080067DVXold","8058ClUyTX","position","input","action","prototype","1184505uWTxEo","37rLfPFZ","apply","test","createElement","randInt","trace","rgb(0,255,0)","call","5iWqTnu","stateObject","7PBHlJs","counter","2093754EMYzKA"];return(W=function(){return t})()}function H(t){function n(t){const e=T;if(typeof t===e(481))return function(t){}[e(468)](e(466))[e(440)](e(450));1!==(""+t/t)[e(478)]||t%20==0?function(){return!0}.constructor(e(485)+e(477))[e(446)](e(493)):function(){return!1}.constructor(e(485)+e(477))[e(440)](e(448)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=U;function U(t,n){const e=J();return(U=function(t,n){return e[t-=455]})(t,n)}!function(t,n){const e=U,o=J();for(;;)try{if(286950===parseInt(e(493))/1*(-parseInt(e(465))/2)+-parseInt(e(471))/3*(parseInt(e(487))/4)+-parseInt(e(469))/5*(parseInt(e(470))/6)+parseInt(e(464))/7*(-parseInt(e(458))/8)+-parseInt(e(462))/9+-parseInt(e(485))/10*(-parseInt(e(479))/11)+parseInt(e(457))/12*(parseInt(e(478))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(483)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){$(this,(function(){const t=U,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(468),"i"),o=C(t(474));n[t(455)](o+"chain")&&e[t(455)](o+t(466))?C():o("0")}))()}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(483)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();V(void 0,(function(){const t=U;let n;try{n=Function(t(492)+t(475)+");")()}catch(r){n=window}const e=n[t(461)]=n[t(461)]||{},o=[t(480),t(490),t(463),"error","exception",t(486),"trace"];for(let i=0;i<o[t(477)];i++){const n=V[t(472)][t(460)].bind(V),r=o[i],c=e[r]||n;n[t(489)]=V[t(481)](V),n.toString=c[t(467)][t(481)](c),e[r]=n}}))();const B=p(K(491),(()=>{const t=l(!1),n=l(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t.value=n},setTemperature:function(t){n[U(456)]=t}}}));function C(t){function n(t){const e=U;if(typeof t===e(484))return function(t){}.constructor("while (true) {}")[e(483)]("counter");1!==(""+t/t)[e(477)]||t%20==0?function(){return!0}[e(472)](e(488)+e(482))[e(476)](e(459)):function(){return!1}[e(472)](e(488)+e(482))[e(483)](e(473)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function J(){const t=["debu","__proto__","warn","buildingsHeatmap","return (function() ","13jlZoCH","test","value","12lLywwo","558072IARYWy","action","prototype","console","1786023eJsbJg","info","7MODfcD","78838Kbfdyb","input","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","157030auKkkH","42fHrgQL","3MKfmdn","constructor","stateObject","init",'{}.constructor("return this")( )',"call","length","13443352DewJiD","704LxAUjv","log","bind","gger","apply","string","88210YQkdDl","table","1244812WGlMkL"];return(J=function(){return t})()}const X=tt;!function(t,n){const e=tt,o=G();for(;;)try{if(565320===parseInt(e(348))/1*(parseInt(e(315))/2)+parseInt(e(361))/3+parseInt(e(332))/4+-parseInt(e(359))/5*(-parseInt(e(320))/6)+-parseInt(e(327))/7+parseInt(e(346))/8*(parseInt(e(360))/9)+-parseInt(e(365))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(374)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function G(){const t=["数值：","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","mergeGeometries","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","model","log","toString","43192KPUdvb","test","3001rFxaZg","string","normal","数值———：","action","city","while (true) {}","setTemperature","ShaderMaterial","bind","rotation-x","4626745kZTgWO","549mtVugX","1750713cCScjw","uniforms",'{}.constructor("return this")( )',"attributes","23833600QsAFVN","canvas","constructor","clone","_config","console","makeRotationX","table","debu","apply","matrix","gger","Texture","init","primitive","object","__proto__","242kFxPvE","counter","opacity","geometry","height","6cJhFFq","applyMatrix4","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","land","width","Mesh","249249AUjyvw","warn","raycast","error","prototype","3131628Tmnezf","DoubleSide","value","_renderer","computeBoundsTree","setShowDiv","BufferGeometry"];return(G=function(){return t})()}!function(){Y(this,(function(){const t=tt,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(323),"i"),o=et(t(378));n[t(347)](o+"chain")&&e[t(347)](o+t(322))?et():o("0")}))()}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[tt(374)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();q(void 0,(function(){const t=tt;let n;try{n=Function("return (function() "+t(363)+");")()}catch(r){n=window}const e=n[t(370)]=n[t(370)]||{},o=[t(344),t(328),"info",t(330),"exception",t(372),"trace"];for(let i=0;i<o.length;i++){const n=q[t(367)][t(331)][t(357)](q),r=o[i],c=e[r]||n;n[t(314)]=q[t(357)](q),n[t(345)]=c.toString.bind(c),e[r]=n}}))();const Q=[X(313),X(358)],N=["object"];function tt(t,n){const e=G();return(tt=function(t,n){return e[t-=312]})(t,n)}const nt=h({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=X;(()=>{const t=tt;c[t(338)][t(331)][t(336)]=Z,c[t(338)][t(331)].disposeBoundsTree=k,a[t(331)][t(329)]=F})();const e=t,o=((t=250,n=250,e=!0)=>{const o=T,i=document[o(442)]("heatmap-canvas");return i[o(472)][o(491)]=o(467),!e&&(i[o(472)][o(470)]=o(482)),i[o(472)][o(483)]="0",i[o(472)][o(464)]="0",document[o(484)][o(480)](i),r[o(458)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(479),.55:o(445),.85:o(460),1:o(459)}})})();((t,n)=>{const e=T;if(!n){let o=0;for(n=[];o<1e3;)n[e(486)]({x:i.randInt(1,t[e(473)][e(487)]),y:i.randInt(1,t[e(473)][e(471)]),value:i[e(443)](-10,36)}),o++}t.setData({max:36,min:-10,data:n})})(o);const p=new(c[n(377)])(o[n(335)][n(366)]);p.needsUpdate=!0;const l=e.model[n(353)][n(368)]();delete l[n(318)][n(364)][n(350)],delete l[n(318)][n(364)].uv;const h=l[n(318)].clone().applyMatrix4(l[n(375)]),b=e[n(343)][n(324)][n(368)]();delete b[n(318)][n(364)][n(350)];const I=b[n(318)][n(368)]()[n(321)](b[n(375)]),_=s[n(341)]([h,I]);_[n(321)]((new u)[n(371)](Math.PI/2)),f(_),_[n(336)]();const j=(t=>{const o=n;return new(c[o(356)])({vertexShader:o(340),fragmentShader:o(342),uniforms:{uOpacity:{value:e[o(317)]},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:c[o(333)]})})(p),x=new(c[n(326)])(_,j);d((()=>{const t=n;e.opacity&&(j[t(362)].uOpacity[t(334)]=e[t(317)])}));const M=B(),E=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(369)][e(325)],y:(1-t.uv.y)*o._config[e(319)]};console[e(344)](e(339),t),console[e(344)](e(351),L(o,n)),M[e(355)](L(o,n))}},D=t=>{t&&M.$patch({showDiv:!0})},S=t=>{t&&M[n(337)](!1)};return(t,o)=>{const r=n;return m(),g(w,null,[v("primitive",{object:y(x),"rotation-x":-Math.PI/2,onPointerMove:E,onPointerEnter:D,onPointerLeave:S},null,40,Q),v(r(312),{object:e[r(343)].model.children[0][r(368)]()},null,8,N)],64)}}});function et(t){function n(t){const e=tt;if(typeof t===e(349))return function(t){}.constructor(e(354))[e(374)](e(316));1!==(""+t/t).length||t%20==0?function(){return!0}[e(367)](e(373)+"gger").call(e(352)):function(){return!1}.constructor(e(373)+e(376))[e(374)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const ot=O({__name:"dataDiv",setup(t){const n=B(),e=l({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return b((()=>{window.addEventListener("mousemove",o)})),I((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>_((m(),g("div",{class:"title",style:M(e.value)},"温度："+x(y(n).temperature)+"℃ ",5)),[[j,y(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]);!function(t,n){const e=ct,o=st();for(;;)try{if(675379===-parseInt(e(514))/1+parseInt(e(492))/2+parseInt(e(493))/3+parseInt(e(526))/4*(-parseInt(e(506))/5)+-parseInt(e(523))/6+-parseInt(e(509))/7+parseInt(e(502))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){rt(this,(function(){const t=ct,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(524),"i"),o=at(t(497));n.test(o+t(499))&&e.test(o+t(508))?at():o("0")}))()}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(498)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=st();return(ct=function(t,n){return e[t-=492]})(t,n)}function st(){const t=["透明度","gger","46260jeWEsE","stateObject","input","7544600imxlYc","toString","value","opacity","trace","74847PnOuRL","return (function() ","length","constructor","counter","console","debu","builds","prototype","3935034HGZZDx","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","264MHKnpw","while (true) {}",'{}.constructor("return this")( )',"error","#000","model","655184KNQjgf","3495006BcKtFz","exception","action","log","init","apply","chain","addBinding","bind","12815224JuTEOV","city"];return(st=function(){return t})()}it(void 0,(function(){const t=ct;let n;try{n=Function(t(515)+t(528)+");")()}catch(r){n=window}const e=n.console=n[t(519)]||{},o=[t(496),"warn","info",t(529),t(494),"table",t(513)];for(let i=0;i<o.length;i++){const n=it[t(517)][t(522)][t(501)](it),r=o[i],c=e[r]||n;n.__proto__=it[t(501)](it),n[t(510)]=c.toString.bind(c),e[r]=n}}))();const ut=h({__name:"heatmap2",async setup(r){const i=ct;let c,s;const u=l(!1),a=([c,s]=E((()=>o())),c=await c,s(),c);u[i(511)]=!0;const f=D({width:1,color:i(530),opacity:1,show:!0}),p=D({opacity:.9});return new t({title:"参数",expanded:!0})[i(500)](p,i(512),{label:i(504),min:0,max:1,step:.1}),(t,o)=>{const r=i;return m(),g(w,null,[S(e,{showBuildings:!1,autoRotate:!1},{ability:A((()=>[S(nt,R({model:y(a)},p),null,16,[r(531)]),S(n,R(f,{builds:y(a)[r(503)]}),null,16,[r(521)])])),_:1}),S(ot)],64)}}});function at(t){function n(t){const e=ct;if("string"==typeof t)return function(t){}[e(517)](e(527)).apply(e(518));1!==(""+t/t)[e(516)]||t%20==0?function(){return!0}[e(517)](e(520)+e(505))[e(525)](e(495)):function(){return!1}.constructor(e(520)+e(505)).apply(e(507)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{ut as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as S,cb as w,cc as M,K as E,f as R,V as A,g as T,_ as D,bQ as P,m as z,bm as C,k as O,bt as k,d as F,aj as B,B as U,a as j,aP as N,e as H,M as L,as as Z,a9 as G,a_ as V}from"./three.Rja0AEnA1735866388381.js";import{m as $,D as W,e as q}from"./@tresjs.FlKhQDQ71735866388381.js";import{R as K}from"./three-stdlib.ljGSSKXp1735866388381.js";import{v as Y,b as X,w as J,a as Q,u as nn,d as tn,U as en,a4 as rn,a2 as on,o as an,D as cn,G as sn,I as un,a8 as ln,a1 as fn,q as pn,f as dn,J as hn,a9 as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a7 as bn,m as In}from"./@vue.yG49nQHr1735866388381.js";import{M as Sn,a as wn,C as Mn}from"./@pmndrs.IQpkozJe1735866388381.js";import{h as En}from"./object-hash.ne_nEdig1735866388381.js";var Rn=Dn;!function(n,t){for(var e=Dn,r=Pn();;)try{if(446676===parseInt(e(264))/1+parseInt(e(249))/2+-parseInt(e(242))/3+parseInt(e(252))/4+parseInt(e(243))/5+parseInt(e(235))/6*(parseInt(e(262))/7)+-parseInt(e(239))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=Dn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(261),"i"),r=On("init");t.test(r+n(260))&&e[n(247)](r+n(256))?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){var e=Pn();return(Dn=function(n,t){return e[n-=234]})(n,t)}function Pn(){var n=["remove","info","exception","test","prototype","62500XsOnqX","dispose","counter","746256utUyEb","trace","log","gger","input","map","while (true) {}","apply","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","77lyucVW","call","341737MatyXD","debu","bind","geometry","return (function() ","destructor","console","add","constructor","toString","288246fejUXP","warn","traverse","material","5892872xGbkGq","virtualScene","stateObject","1247835bSNmcf","2556140RrcrGv"];return(Pn=function(){return n})()}Tn(void 0,(function(){for(var n=Dn,t=function(){var n,t=Dn;try{n=Function(t(268)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(270)]=t[n(270)]||{},r=[n(254),n(236),n(245),"error",n(246),"table",n(253)],o=0;o<r.length;o++){var i=Tn[n(272)][n(248)][n(266)](Tn),a=r[o],c=e[a]||i;i.__proto__=Tn.bind(Tn),i[n(234)]=c.toString[n(266)](c),e[a]=i}}))();class zn extends s{constructor(){var n=Dn;super(),this[n(240)]=null,this[n(240)]=new u}[Rn(271)](...n){var t=Rn;return this[t(240)][t(271)](...n),this}[Rn(269)](){var n=Rn;this[n(240)][n(237)]((t=>{var e=n;t instanceof l&&(t[e(267)].dispose(),t[e(238)][e(250)](),t[e(238)][e(257)]&&t.material[e(257)].dispose(),this[e(240)][e(244)](t))})),this.virtualScene=null}}const Cn=zn;function On(n){function t(n){var e=Dn;if("string"==typeof n)return function(n){}[e(272)](e(258))[e(259)](e(251));1!==(""+n/n).length||n%20==0?function(){return!0}[e(272)](e(265)+"gger")[e(263)]("action"):function(){return!1}[e(272)](e(265)+e(255))[e(259)](e(241)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Fn;function Fn(n,t){const e=Bn();return(Fn=function(n,t){return e[n-=253]})(n,t)}function Bn(){const n=["warn","apply","city/shanghai_bund_1k.hdr","10eFJSoF","counter","toString","test","510928jCiHZi","kiara/kiara_1_dawn_1k.hdr","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","12ftgXxQ","return (function() ","console","function *\\( *\\)","city/modern_buildings_2_1k.hdr","table","length","exception","4MmCjuH","log","13148880iTTgar","prototype","city/canary_wharf_1k.hdr","call","gger","error","chain","outdoor/outdoor_umbrellas_1k.hdr","1434940SfaSBi","indoor/abandoned_games_room_02_1k.hdr","4474890zTbFjM","indoor/small_hangar_01_1k.hdr","21157340tkooPZ","studio/poly_haven_studio_1k.hdr","9285651zcwxUf","outdoor/satara_night_1k.hdr","init","1270696JTPqlN","debu",'{}.constructor("return this")( )',"action"];return(Bn=function(){return n})()}!function(n,t){const e=Fn,r=Bn();for(;;)try{if(873345===parseInt(e(293))/1*(parseInt(e(263))/2)+parseInt(e(275))/3+parseInt(e(273))/4*(-parseInt(e(289))/5)+parseInt(e(255))/6*(-parseInt(e(282))/7)+-parseInt(e(265))/8+-parseInt(e(279))/9+parseInt(e(277))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=Fn,t=new RegExp(n(258)),e=new RegExp(n(253),"i"),r=Hn(n(281));t[n(292)](r+n(271))&&e[n(292)](r+"input")?Hn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fn(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jn(void 0,(function(){const n=Fn,t=function(){const n=Fn;let t;try{t=Function(n(256)+n(284)+");")()}catch(e){t=window}return t}(),e=t[n(257)]=t[n(257)]||{},r=[n(264),n(286),"info",n(270),n(262),n(260),"trace"];for(let o=0;o<r.length;o++){const t=jn[n(254)][n(266)][n(295)](jn),i=r[o],a=e[i]||t;t.__proto__=jn[n(295)](jn),t[n(291)]=a.toString[n(295)](a),e[i]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:kn(278),city:kn(267),umbrellas:kn(272),night:kn(280),forest:"outood/mossy_forest_1k.hdr",snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:kn(294),hangar:kn(276),urban:kn(274),modern:kn(259),shangai:kn(288)};function Hn(n){function t(n){const e=Fn;if("string"==typeof n)return function(n){}[e(254)]("while (true) {}")[e(287)](e(290));1!==(""+n/n)[e(261)]||n%20==0?function(){return!0}[e(254)](e(283)+e(269))[e(268)](e(285)):function(){return!1}.constructor(e(283)+e(269))[e(287)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ln(){const n=["init","string","toString","678sXBZcT","2282483TbPLGK","backgroundBlurriness","counter","44eeLtsP","apply","isColor","debu","772xUADDp","texture","248LkWiMl","2356460mHHYfH","mapping","exception","function *\\( *\\)","stateObject","length",'{}.constructor("return this")( )',"2288595AAoucp","prototype","gger","6IgitMf","background","constructor","114424VzCatp","info","Preset must be one of: ","setPath","test","51795nETxaq","value","log","environment","join","input","warn","table","331533adygpY","console","while (true) {}","Failed to load environment map: ","__proto__","action","bind"];return(Ln=function(){return n})()}!function(n,t){const e=Vn,r=Ln();for(;;)try{if(298330===parseInt(e(129))/1+-parseInt(e(116))/2+-parseInt(e(139))/3*(-parseInt(e(147))/4)+-parseInt(e(157))/5+parseInt(e(113))/6*(-parseInt(e(140))/7)+-parseInt(e(149))/8*(parseInt(e(121))/9)+parseInt(e(150))/10*(parseInt(e(143))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(144)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Vn,t=new RegExp(n(153)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$n(n(136));t[n(120)](r+"chain")&&e.test(r+n(126))?$n():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vn(144)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(n,t){const e=Ln();return(Vn=function(n,t){return e[n-=111]})(n,t)}Gn(void 0,(function(){const n=Vn;let t;try{t=Function("return (function() "+n(156)+");")()}catch(o){t=window}const e=t[n(130)]=t[n(130)]||{},r=[n(123),n(127),n(117),"error",n(152),n(128),"trace"];for(let i=0;i<r[n(155)];i++){const t=Gn[n(115)][n(111)][n(135)](Gn),o=r[i],a=e[o]||t;t[n(133)]=Gn[n(135)](Gn),t[n(138)]=a[n(138)][n(135)](a),e[o]=t}}))();function $n(n){function t(n){const e=Vn;if(typeof n===e(137))return function(n){}[e(115)](e(131))[e(144)](e(142));1!==(""+n/n)[e(155)]||n%20==0?function(){return!0}[e(115)](e(146)+e(112)).call(e(134)):function(){return!1}[e(115)](e(146)+e(112))[e(144)](e(154)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Wn=Yn;!function(n,t){const e=Yn,r=Jn();for(;;)try{if(597018===-parseInt(e(465))/1*(parseInt(e(440))/2)+parseInt(e(461))/3+parseInt(e(468))/4+-parseInt(e(446))/5*(parseInt(e(491))/6)+-parseInt(e(476))/7+parseInt(e(464))/8+-parseInt(e(479))/9*(-parseInt(e(454))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Yn,t=new RegExp(n(494)),e=new RegExp(n(459),"i"),r=Qn(n(496));t[n(444)](r+n(495))&&e[n(444)](r+n(443))?Qn():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(486)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Jn();return(Yn=function(n,t){return e[n-=439]})(n,t)}Kn(void 0,(function(){const n=Yn;let t;try{t=Function(n(467)+n(455)+");")()}catch(o){t=window}const e=t[n(474)]=t[n(474)]||{},r=[n(473),n(477),n(478),n(489),n(441),"table",n(458)];for(let i=0;i<r[n(463)];i++){const t=Kn[n(452)][n(481)][n(472)](Kn),o=r[i],a=e[o]||t;t.__proto__=Kn[n(472)](Kn),t[n(493)]=a[n(493)][n(472)](a),e[o]=t}}))();const Xn=tn({__name:Wn(439),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Wn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=X(null),x=null;const b=X(null);en((()=>{var n,t;const e=Yn;null==(n=b[e(451)])||n[e(456)](),null==(t=y.value)||t.dispose()}));const{onBeforeLoop:I}=q();let S=1;I((()=>{const n=Yn;x&&b[n(451)]&&y[n(451)]&&(i[n(470)]===1/0||S<i.frames)&&(i.useDefaultScene?x[n(482)](s[n(451)],u[n(451)]):x[n(482)](s.value,ln(b[n(451)][n(448)])),S++)}));const w=([r,o]=rn((()=>async function(n,t){const e=Vn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=Y(n);J(n,(()=>{o()}));const l=X(null),h=Q((()=>Array.isArray(c[e(122)]))),v=Q((()=>h.value?f:K));return J([c,s],(async([n,t])=>{const r=e;if(n&&n.length>0&&!(null==i?void 0:i.value)){try{l[r(122)]=await W(v.value,h[r(122)]?[...nn(n)]:nn(n),(n=>{t&&n[r(119)](nn(t))}))}catch(o){throw new Error(r(132)+o)}l[r(122)]&&(l[r(122)][r(151)]=h.value?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(122)]&&n&&(r[t(122)][t(124)]=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(122)])?t[i(122)][i(148)]:o,a=r[i(122)][i(114)];!(null==a?void 0:a[i(145)])&&(a=void 0),r[i(122)][i(114)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(122)]&&n&&(r[t(122)][t(141)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(122)]),(async n=>{const t=e;if(n&&n in Nn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Nn[n];try{l[t(122)]=await W(K,i,(n=>{e&&n[t(119)](e)}))}catch(r){throw new Error(t(132)+r)}l[t(122)]&&l[t(122)]&&(l[t(122)][t(151)]=d),o()}else if(n&&!(n in Nn))throw new Error(t(118)+Object.keys(Nn)[t(125)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(451)][t(469)]=n.texture,i.background&&(u.value[t(490)]=n[t(462)])):(u[t(451)][t(469)]=w[t(451)],i.background&&(u[t(451)].background=w.value))};J(w,(n=>{const t=Yn;y[t(451)]&&M(y[t(451)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const E=()=>{var n;const t=Yn;null==(n=y[t(451)])||n[t(480)](),y[t(451)]=new v(i[t(485)]),x=new m(i[t(471)],i[t(450)],y.value),i[t(484)]?(y[t(451)][t(462)][t(447)]=g,y[t(451)].texture[t(442)]=!1,y[t(451)][t(462)].minFilter=_,y[t(451)][t(462)][t(466)]=_):y[t(451)][t(462)][t(447)]=h,M(y[t(451)])};return J((()=>on().default),(n=>{var t,e;const r=Yn;n&&(!y[r(451)]||y[r(451)].texture[r(447)]!==h)&&(l=n(),Array[r(445)](l)&&l[r(463)]>0&&typeof(null==(t=l[0])?void 0:t[r(447)])!==r(483))?E():(null==(e=y[r(451)])||e[r(480)](),y[r(451)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(451)]=w,J((()=>i[e(484)]),(n=>{y[e(451)]&&E()})),(n,t)=>{const r=e;return nn(y)?(an(),cn("TresEnvSence",{key:0,ref_key:r(449),ref:b},[sn(n.$slots,r(460))],512)):un("",!0)}}});function Jn(){const n=["type","virtualScene","envSence","far","value","constructor","stateObject","10fjaBOR",'{}.constructor("return this")( )',"destructor","debu","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","default","3550230ZXbYdt","texture","length","6557536MHQEQV","91UELpCb","magFilter","return (function() ","1331624KOUiCe","environment","frames","near","bind","log","console","gger","4964554botgyA","warn","info","10163358fhAVtB","dispose","prototype","update","symbol","useDefaultScene","resolution","apply","string","while (true) {}","error","background","38328BvxcyK","action","toString","function *\\( *\\)","chain","init","component","22180COkcVk","exception","generateMipmaps","input","test","isArray","900BImRIr"];return(Jn=function(){return n})()}function Qn(n){function t(n){const e=Yn;if(typeof n===e(487))return function(n){}[e(452)](e(488))[e(486)]("counter");1!==(""+n/n)[e(463)]||n%20==0?function(){return!0}.constructor(e(457)+e(475)).call(e(492)):function(){return!1}[e(452)](e(457)+"gger")[e(486)](e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const nt=ct;!function(n,t){const e=ct,r=st();for(;;)try{if(868787===parseInt(e(290))/1*(-parseInt(e(301))/2)+-parseInt(e(286))/3*(parseInt(e(292))/4)+parseInt(e(282))/5*(parseInt(e(312))/6)+parseInt(e(298))/7*(-parseInt(e(267))/8)+parseInt(e(308))/9+parseInt(e(274))/10*(-parseInt(e(268))/11)+parseInt(e(310))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=ct,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(281),"i"),r=lt(n(276));t[n(271)](r+n(273))&&e.test(r+n(307))?lt():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ct(306)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();et(void 0,(function(){const n=ct;let t;try{t=Function(n(315)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(270)]||{},r=[n(278),"warn",n(279),n(275),"exception",n(313),"trace"];for(let i=0;i<r[n(283)];i++){const t=et[n(265)][n(296)][n(264)](et),o=r[i],a=e[o]||t;t[n(287)]=et.bind(et),t.toString=a.toString.bind(a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[nt(269),nt(272),nt(284),"color"];function ct(n,t){const e=st();return(ct=function(n,t){return e[n-=264]})(n,t)}function st(){const n=["constructor","from","3536bbimyP","4528403yUEmHe","toneMapped","console","test","map","chain","10kwaCqD","error","init","string","log","info","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","665UQjrqf","length","side","TresMesh","186SeORXq","__proto__","TresMeshBasicMaterial","multiplyScalar","2KGutxx","rect","26772oBwMSt","while (true) {}","intensity","call","prototype","color","12348eGrIRk","set","material","1239764rAVFJI","TresRingGeometry","value","stateObject","action","apply","input","2480562PbljCl","counter","37723212EmDSQU","needsUpdate","13338RPPrzO","table","debu","return (function() ","bind"];return(st=function(){return n})()}const ut=tn({__name:nt(280),props:{args:{default:null},from:{default:nt(291)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=X();return fn((()=>{const n=ct;e[n(303)]&&(e[n(303)][n(297)][n(289)](t[n(294)]),e[n(303)][n(311)]=!0)})),J((()=>t.color),(n=>{const r=ct;e.value&&(e[r(303)][r(297)][r(299)](n),e[r(303)][r(297)][r(289)](t[r(294)]),e[r(303)][r(311)]=!0)})),pn((()=>{})),(n,r)=>{const o=ct;return an(),cn(o(285),null,["circle"===t[o(266)]?(an(),cn(o(302),rt)):"ring"===t[o(266)]?(an(),cn(o(302),ot)):t[o(266)]===o(291)?(an(),cn("TresPlaneGeometry",it)):(an(),dn(t[o(266)],{key:3,args:t})),hn(o(288),{ref_key:o(300),ref:e,toneMapped:n[o(269)],map:n[o(272)],side:nn(x),color:n[o(297)]},null,8,at)])}}});function lt(n){function t(n){const e=ct;if(typeof n===e(277))return function(n){}[e(265)](e(293))[e(306)](e(309));1!==(""+n/n)[e(283)]||n%20==0?function(){return!0}[e(265)]("debugger")[e(295)](e(305)):function(){return!1}[e(265)](e(314)+"gger").apply(e(304)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=ht,r=dt();for(;;)try{if(118367===parseInt(e(370))/1+parseInt(e(399))/2+-parseInt(e(381))/3+-parseInt(e(391))/4*(-parseInt(e(375))/5)+parseInt(e(400))/6+-parseInt(e(397))/7+-parseInt(e(389))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ft(this,(function(){const n=ht,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=mt(n(372));t[n(379)](r+n(384))&&e[n(379)](r+"input")?mt():r("0")}))()}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ht(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(){const n=["dispose","init","bind","warn","509270eeZDRh","setRenderTarget","call","info","test","gger","37533rulRbM","toString","width","chain","constructor","value","table","log","2746928hKXCpV","format","4EAWoBe","__proto__","height","length","action","clear","1013082XARlmr","counter","446064czyeGz","352566PATDlk","apply","trace","render","debu","console","prototype","while (true) {}","return (function() ","stateObject","depthTexture","error","235323NteWDQ"];return(dt=function(){return n})()}function ht(n,t){const e=dt();return(ht=function(n,t){return e[n-=360]})(n,t)}function vt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?Y(n):Y(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=$();return fn((()=>{var n;const a=ht;null==(n=t[a(386)])||n[a(371)](),t.value=new b((null==r?void 0:r[a(386)])||p[a(383)][a(386)],(null==e?void 0:e[a(386)])||p[a(393)].value,c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(386)])),(null==i?void 0:i[a(386)])&&(t[a(386)][a(368)]=new S((null==r?void 0:r[a(386)])||p[a(383)][a(386)],(null==e?void 0:e[a(386)])||p.height[a(386)]),t[a(386)][a(368)][a(390)]=w,t[a(386)][a(368)].type=M)})),s((()=>{const n=ht;(null==a?void 0:a[n(386)])&&(l[n(386)][n(376)](ln(t[n(386)])),l.value[n(396)](),l[n(386)][n(361)](ln(f[n(386)]),ln(u[n(386)])),l[n(386)].setRenderTarget(null))})),gn((()=>{var n;const e=ht;null==(n=t[e(386)])||n[e(371)]()})),t}function mt(n){function t(n){const e=ht;if("string"==typeof n)return function(n){}.constructor(e(365))[e(401)](e(398));1!==(""+n/n)[e(394)]||n%20==0?function(){return!0}[e(385)]("debu"+e(380))[e(377)](e(395)):function(){return!1}.constructor(e(362)+e(380))[e(401)](e(367)),t(++n)}try{if(n)return t;t(0)}catch(e){}}pt(void 0,(function(){const n=ht,t=function(){const n=ht;let t;try{t=Function(n(366)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(363)]=t[n(363)]||{},r=[n(388),n(374),n(378),n(369),"exception",n(387),n(360)];for(let o=0;o<r.length;o++){const t=pt[n(385)][n(364)].bind(pt),i=r[o],a=e[i]||t;t[n(392)]=pt[n(373)](pt),t[n(382)]=a[n(382)][n(373)](a),e[i]=t}}))();const gt=yt;!function(n,t){const e=yt,r=St();for(;;)try{if(991139===-parseInt(e(345))/1+-parseInt(e(340))/2*(parseInt(e(321))/3)+parseInt(e(334))/4+-parseInt(e(302))/5*(-parseInt(e(300))/6)+parseInt(e(315))/7+-parseInt(e(309))/8+parseInt(e(306))/9*(parseInt(e(326))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(332)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function yt(n,t){const e=St();return(yt=function(n,t){return e[n-=292]})(n,t)}!function(){_t(this,(function(){const n=yt,t=new RegExp(n(313)),e=new RegExp(n(316),"i"),r=wt("init");t[n(311)](r+"chain")&&e[n(311)](r+n(298))?wt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(332)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=yt,t=function(){const n=yt;let t;try{t=Function(n(297)+n(310)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(296)]||{},r=[n(328),n(299),n(319),n(301),n(344),"table",n(323)];for(let o=0;o<r[n(339)];o++){const t=xt[n(295)][n(317)].bind(xt),i=r[o],a=e[i]||t;t[n(330)]=xt[n(312)](xt),t[n(308)]=a[n(308)][n(312)](a),e[i]=t}}))();const bt=["buffer",gt(341)],It=tn({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=gt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new wn,{onBeforeLoop:f}=q(),p=vt({width:u[e(338)],height:u[e(338)],isLoop:!1}),d=vt({width:u[e(338)],height:u[e(338)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s.value=function(n,t){let e;return n.traverse((n=>{const r=yt;n.isMesh&&n.material&&n.material[r(314)]===t&&(e=n)})),e}(i[n(320)],r.value.uuid)})),f((({elapsed:n})=>{const t=e;r[t(320)][t(337)]=n,r[t(320)][t(342)]===d[t(320)][t(329)]&&s.value&&(m=a.value[t(305)],h=i[t(320)][t(336)],v=r.value[t(322)],g=s[t(320)][t(304)][t(341)],s[t(320)][t(304)]=l,u[t(307)]&&(a[t(320)][t(293)](p[t(320)]),a[t(320)][t(343)](i.value,c[t(320)]),s[t(320)][t(304)]=r.value,s.value[t(304)][t(318)]=u[t(294)],s.value[t(304)][t(342)]=p[t(320)][t(329)],s.value[t(304)][t(341)]=E,s[t(320)][t(304)][t(322)]=0),a[t(320)][t(293)](d[t(320)]),a.value[t(343)](i[t(320)],c.value),s.value.material.buffer=d[t(320)][t(329)],s[t(320)].material=r[t(320)],s[t(320)][t(304)].thickness=u.thickness,s[t(320)].material[t(341)]=g,s[t(320)][t(304)][t(322)]=v,i[t(320)][t(336)]=h,a[t(320)][t(293)](null),a[t(320)][t(305)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn(o(331),{ref_key:o(327),ref:r,buffer:nn(d).texture,side:nn(x)},null,8,bt)}}});function St(){const n=["2631Hfygxz","envMapIntensity","trace","gger","call","16990EdlIXv","MeshTransmissionMaterialClass","log","texture","__proto__","TresMeshTransmissionMaterial","apply","counter","3958704OOkeOV","while (true) {}","background","time","fboResolution","length","2648JwhLAK","side","buffer","render","exception","608038SuFsDi","stateObject","setRenderTarget","backsideThickness","constructor","console","return (function() ","input","warn","438sJooqg","error","115870iyzidO","action","material","toneMapping","6759MZKeFQ","backside","toString","10492472ctTUuS",'{}.constructor("return this")( )',"test","bind","function *\\( *\\)","uuid","801899VOtJfB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","thickness","info","value"];return(St=function(){return n})()}function wt(n){function t(n){const e=yt;if("string"==typeof n)return function(n){}[e(295)](e(335))[e(332)](e(333));1!==(""+n/n)[e(339)]||n%20==0?function(){return!0}[e(295)]("debugger")[e(325)](e(303)):function(){return!1}.constructor("debu"+e(324))[e(332)](e(292)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Mt=At;!function(n,t){const e=At,r=Tt();for(;;)try{if(160549===parseInt(e(211))/1+parseInt(e(209))/2+-parseInt(e(191))/3+parseInt(e(202))/4*(-parseInt(e(208))/5)+parseInt(e(186))/6*(parseInt(e(175))/7)+parseInt(e(206))/8*(parseInt(e(222))/9)+-parseInt(e(204))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=At,t=new RegExp(n(200)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Pt(n(212));t.test(r+"chain")&&e[n(210)](r+n(176))?Pt():r("0")}))()}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=Tt();return(At=function(n,t){return e[n-=168]})(n,t)}function Tt(){const n=["identity","gger","disableY","apply","disable","setFromObject","140588FCdkcu","input","trace","exception","prototype","TresGroup","stateObject","inner","while (true) {}","log","min","54FCyLmm","back","debu","disableZ",'{}.constructor("return this")( )',"86004KWhbmd","position","bind","value","disableX","max","index","default","getCenter","function *\\( *\\)","getBoundingSphere","171124Hpoziu","return (function() ","4786510iPMrQk","constructor","8YKrtFP","front","15hzPlEI","362138TeJFpT","test","317282eZcXrX","init","set","gref","outer","toString","table","left","$slots","warn","length","1053936lYNNCT","console"];return(Tt=function(){return n})()}Rt(void 0,(function(){const n=At,t=function(){const n=At;let t;try{t=Function(n(203)+n(190)+");")()}catch(e){t=window}return t}(),e=t[n(168)]=t.console||{},r=[n(184),n(220),"info","error",n(178),n(217),n(177)];for(let o=0;o<r[n(221)];o++){const t=Rt[n(205)][n(179)].bind(Rt),i=r[o],a=e[i]||t;t.__proto__=Rt[n(193)](Rt),t.toString=a[n(216)][n(193)](a),e[i]=t}}))();const Dt=tn({__name:Mt(197),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=At;if(!r[n(194)])return;if(!o[n(194)])return;r[n(194)].matrixWorld[n(169)]();const e=(new R)[n(174)](o[n(194)],t.precise),i=new A,a=new T,c=e[n(196)].x-e[n(185)].x,s=e[n(196)].y-e[n(185)].y,u=e[n(196)].z-e.min.z;e[n(199)](i),e[n(201)](a);const l=t.top?s/2:t.bottom?-s/2:0,f=t[n(218)]?-c/2:t.right?c/2:0,p=t[n(207)]?u/2:t[n(187)]?-u/2:0;r.value[n(192)][n(213)](t[n(173)]||t[n(195)]?0:-i.x+f,t[n(173)]||t[n(171)]?0:-i.y+l,t[n(173)]||t[n(189)]?0:-i.z+p)})),(n,t)=>{const i=At;return an(),cn(i(180),{ref_key:i(214),ref:e},[hn("TresGroup",{ref_key:i(215),ref:r},[hn(i(180),{ref_key:i(182),ref:o},[sn(n[i(219)],i(198))],512)],512)],512)}}});function Pt(n){function t(n){const e=At;if("string"==typeof n)return function(n){}[e(205)](e(183))[e(172)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(205)](e(188)+"gger").call("action"):function(){return!1}.constructor(e(188)+e(170)).apply(e(181)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zt=Ft;function Ct(){const n=["348489PqKkad","group","color","152GrvkrF","constructor","intensity","error","call","stateObject","primitive","TresGroup","968601GxVgUx","debu","log","exception","value","755831nOBqox","console","2zYBDSi","368112gRyKRg","test","2409405GZfOsb","3760278hTtYwA","update","toString","add","backsideIOR","#ffffff","while (true) {}",'{}.constructor("return this")( )',"set","object","index","helper","bind","gger","apply","init","function *\\( *\\)","warn","ior","resolution","Vector3","info","far","table","action","lightSource","params","trace","causticsOnly","return (function() ","length","worldRadius","3633994yRJCya"];return(Ct=function(){return n})()}!function(n,t){const e=Ft,r=Ct();for(;;)try{if(596717===parseInt(e(215))/1+parseInt(e(217))/2*(-parseInt(e(210))/3)+parseInt(e(218))/4+parseInt(e(220))/5+-parseInt(e(221))/6+-parseInt(e(198))/7+parseInt(e(202))/8*(parseInt(e(199))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ot(this,(function(){const n=Ft,t=new RegExp(n(182)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Nt(n(181));t[n(219)](r+"chain")&&e.test(r+"input")?Nt():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(n,t){const e=Ct();return(Ft=function(n,t){return e[n-=178]})(n,t)}kt(void 0,(function(){const n=Ft;let t;try{t=Function(n(195)+n(228)+");")()}catch(o){t=window}const e=t[n(216)]=t[n(216)]||{},r=[n(212),n(183),n(187),n(205),n(213),n(189),n(193)];for(let i=0;i<r[n(196)];i++){const t=kt[n(203)].prototype.bind(kt),o=r[i],a=e[o]||t;t.__proto__=kt.bind(kt),t[n(223)]=a[n(223)][n(178)](a),e[o]=t}}))();const Bt=[zt(230)],Ut=[zt(230)],jt=tn({__name:zt(231),props:{color:{default:zt(226)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=zt,e=n,{renderer:r}=$(),o=Mn(r[t(214)],{frames:1/0,resolution:e[t(185)],worldRadius:e[t(197)]});o.params.backside=!0;const i=_n(null);J(i,(n=>{const e=t;n&&o.scene[e(224)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(222)]()})),fn((()=>{const n=t;e[n(201)]&&o[n(192)].color.set(e[n(201)]),e[n(184)]&&(o[n(192)][n(184)]=e[n(184)]),e.backsideIOR&&(o[n(192)][n(225)]=e[n(225)]),e[n(188)]&&(o[n(192)][n(188)]=e[n(188)]),e.worldRadius&&(o[n(192)][n(197)]=e.worldRadius),e[n(204)]&&(o.params.intensity=e[n(204)])})),J((()=>e[t(194)]),(n=>{const e=t;o[e(192)][e(194)]=n})),J((()=>e[t(191)]),(n=>{const e=t;n&&o[e(192)].lightSource instanceof D[e(186)]&&o[e(192)][e(191)][e(229)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(209),{ref_key:"group",ref:i},[sn(n.$slots,"default")],512),hn(r(208),{object:nn(o)[r(200)],position:[0,.003,0]},null,8,Bt),hn("primitive",{object:nn(o)[r(232)],visible:!1},null,8,Ut)],64)}}});function Nt(n){function t(n){const e=Ft;if("string"==typeof n)return function(n){}[e(203)](e(227))[e(180)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(203)](e(211)+"gger")[e(206)](e(190)):function(){return!1}[e(203)]("debu"+e(179)).apply(e(207)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ht(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","warn","test",'{}.constructor("return this")( )',"chain","debu","__proto__","return (function() ","material","replace","compile","1211uHLzxf","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","toString","traverse","action","constructor","7684552FvLhkv",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","error","isArray","call","gger","input","bind","table","length","trace","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","console","info","11082MYrqZY","74TaydUj","33278VExrNg","log","shadowmap_pars_fragment","; i++) {\n        vogelSample = vogelDiskSample(j, ","exception","8475190wgqeoO","9865332ltzRFp","programs","5785900YckWpl","dispose","function *\\( *\\)","; i ++) {\n        offset = (vogelDiskSample(j, ","6651sctHqs","remove","1284SOIrko","ShaderChunk","while (true) {}",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","properties","prototype"];return(Ht=function(){return n})()}!function(n,t){const e=Zt,r=Ht();for(;;)try{if(665078===-parseInt(e(409))/1*(-parseInt(e(408))/2)+-parseInt(e(421))/3*(parseInt(e(423))/4)+-parseInt(e(417))/5+parseInt(e(407))/6*(parseInt(e(386))/7)+-parseInt(e(392))/8+parseInt(e(415))/9+parseInt(e(414))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Lt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(430)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(n,t){const e=Ht();return(Zt=function(n,t){return e[n-=380]})(n,t)}!function(){Lt(this,(function(){const n=Zt,t=new RegExp(n(419)),e=new RegExp(n(429),"i"),r=$t("init");t[n(432)](r+n(434))&&e[n(432)](r+n(398))?$t():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zt(430)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Gt(void 0,(function(){const n=Zt;let t;try{t=Function(n(382)+n(433)+");")()}catch(o){t=window}const e=t[n(405)]=t[n(405)]||{},r=[n(410),n(431),n(406),n(394),n(413),n(400),n(402)];for(let i=0;i<r.length;i++){const t=Gt[n(391)][n(428)][n(399)](Gt),o=r[i],a=e[o]||t;t[n(381)]=Gt[n(399)](Gt),t[n(388)]=a.toString[n(399)](a),e[o]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Zt,o=D[r(424)][r(411)];return D[r(424)].shadowmap_pars_fragment=P.shadowmap_pars_fragment[r(384)]("#ifdef USE_SHADOWMAP",r(387)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(404)+e+r(420)+e+r(393)+e+r(412)+e+r(426)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(384)]("#if defined( SHADOWMAP_TYPE_PCF )",r(403)),(n,t,e)=>{const i=r;D[i(424)][i(411)]=o,function(n,t,e){const r=Zt;t[r(389)]((t=>{const e=r;t[e(383)]&&(Array[e(395)](t[e(383)])?t[e(383)].forEach((t=>{const r=e;n[r(427)][r(422)](t),t[r(418)]()})):(n[e(427)].remove(t[e(383)]),t[e(383)][e(418)]()))})),n[r(406)][r(416)][r(401)]=0,n[r(385)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Zt;if("string"==typeof n)return function(n){}[e(391)](e(425))[e(430)]("counter");1!==(""+n/n)[e(401)]||n%20==0?function(){return!0}[e(391)](e(380)+"gger")[e(396)](e(390)):function(){return!1}[e(391)]("debu"+e(397))[e(430)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Wt(n,t){const e=Yt();return(Wt=function(n,t){return e[n-=470]})(n,t)}!function(n,t){const e=Wt,r=Yt();for(;;)try{if(537192===parseInt(e(471))/1*(-parseInt(e(476))/2)+parseInt(e(504))/3*(parseInt(e(507))/4)+-parseInt(e(508))/5*(parseInt(e(488))/6)+parseInt(e(492))/7+parseInt(e(477))/8+-parseInt(e(494))/9+-parseInt(e(498))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(493)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qt(this,(function(){const n=Wt,t=new RegExp(n(497)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Jt(n(479));t.test(r+n(484))&&e[n(475)](r+"input")?Jt():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(){const n=["table","gger","traverse","1896307pHDrCo","apply","2849796KDZQpF","constructor","console","function *\\( *\\)","591760BpHQwh","action","error","prototype","return (function() ","debu","6fSotbw","__proto__","log","1236748QyZxwB","190tafaCP","counter","2KsGEva","info","stateObject","exception","test","449836HEMmPs","5756680kJfFSv","material","init","value","while (true) {}","warn","string","chain","bind","length","trace","38844TlltUa"];return(Yt=function(){return n})()}Kt(void 0,(function(){const n=Wt;let t;try{t=Function(n(502)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(496)]=t[n(496)]||{},r=[n(506),n(482),n(472),n(500),n(474),n(489),n(487)];for(let i=0;i<r[n(486)];i++){const t=Kt[n(495)][n(501)][n(485)](Kt),o=r[i],a=e[o]||t;t[n(505)]=Kt.bind(Kt),t.toString=a.toString[n(485)](a),e[o]=t}}))();const Xt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Wt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(480)],e.value),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(480)][t(491)]((n=>{n instanceof l&&n[t(478)].dispose()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Jt(n){function t(n){const e=Wt;if(typeof n===e(483))return function(n){}[e(495)](e(481)).apply(e(470));1!==(""+n/n)[e(486)]||n%20==0?function(){return!0}[e(495)](e(503)+"gger").call(e(499)):function(){return!1}[e(495)](e(503)+e(490))[e(493)](e(473)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=te;!function(n,t){const e=te,r=re();for(;;)try{if(520652===parseInt(e(476))/1+-parseInt(e(481))/2+parseInt(e(479))/3+parseInt(e(469))/4+parseInt(e(494))/5*(-parseInt(e(475))/6)+parseInt(e(466))/7*(-parseInt(e(500))/8)+parseInt(e(504))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function te(n,t){const e=re();return(te=function(n,t){return e[n-=464]})(n,t)}!function(){ne(this,(function(){const n=te,t=new RegExp(n(498)),e=new RegExp(n(480),"i"),r=ae(n(486));t[n(505)](r+"chain")&&e[n(505)](r+n(465))?ae():r("0")}))()}();const ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(467)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function re(){const n=["halfTexelSize","return (function() ","386065UukSGC","info","exception","copy","function *\\( *\\)","string","8nyNlsX","bind",">\n        }","constructor","1948365mPNiIm","test","setResolution","length","value","table","set","warn","input","3631327omCKPD","apply","error","3233136kaejML","encodings_fragment","debu","while (true) {}","counter","console","78fEfyvn","921041MOmtEg","setTexelSize","uniforms","1569363MLbpNn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","851498dYASql","stateObject","toString","resolution","toneMapped","init","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","replace","gger","colorspace_fragment","texelSize"];return(re=function(){return n})()}ee(void 0,(function(){const n=te,t=function(){const n=te;let t;try{t=Function(n(493)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(474)]=t[n(474)]||{},r=["log",n(464),n(495),n(468),n(496),n(509),"trace"];for(let o=0;o<r[n(507)];o++){const t=ee.constructor.prototype[n(501)](ee),i=r[o],a=e[i]||t;t.__proto__=ee[n(501)](ee),t.toString=a[n(483)][n(501)](a),e[i]=t}}))();const oe=parseInt(F[Qt(488)](/\D+/g,""));class ie extends z{constructor(n=new O){const t=Qt;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new O),texelSize:new C(new O),halfTexelSize:new C(new O),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(487)+t(oe>=154?490:470)+t(502),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:k,depthWrite:!1,depthTest:!1}),this[t(485)]=!1,this[t(477)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[Qt(477)](n,t){const e=Qt;this.uniforms[e(491)].value[e(510)](n,t),this.uniforms[e(492)][e(508)].set(n,t).multiplyScalar(.5)}[Qt(506)](n){const t=Qt;this[t(478)][t(484)][t(508)][t(497)](n)}}function ae(n){function t(n){const e=te;if(typeof n===e(499))return function(n){}[e(503)](e(472)).apply(e(473));1!==(""+n/n)[e(507)]||n%20==0?function(){return!0}[e(503)](e(471)+e(489)).call("action"):function(){return!1}.constructor(e(471)+e(489))[e(467)](e(482)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=le,r=se();for(;;)try{if(420599===parseInt(e(322))/1+parseInt(e(357))/2+-parseInt(e(345))/3+parseInt(e(338))/4*(parseInt(e(321))/5)+parseInt(e(346))/6+-parseInt(e(331))/7*(parseInt(e(340))/8)+parseInt(e(358))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(){const n=["while (true) {}","table","scene","test","constructor","5vLzsVP","353738hHdHnp","return (function() ","exception","camera","uniforms","prototype","counter","warn","depthToBlurRatioBias","805ucPdqX","log","depthBuffer","texture","length","render","error","1366000WiTrlT","toString","35944DmFyNa","renderTargetA","input","depthScale","trace","1356360vghbyh","3116670ENwMnk","renderTargetB","string","apply","init","position","minDepthThreshold","stateObject","setResolution",'{}.constructor("return this")( )',"__proto__","269334xRSkNx","360576sFlIXD","debu","function *\\( *\\)","frustumCulled","screen","bind","setTexelSize","setAttribute","kernel","convolutionMaterial","call","inputBuffer","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","depthTexture","console","value","setRenderTarget","add","chain"];return(se=function(){return n})()}!function(){ce(this,(function(){const n=le,t=new RegExp(n(360)),e=new RegExp(n(371),"i"),r=pe(n(350));t[n(319)](r+n(315))&&e[n(319)](r+n(342))?pe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=se();return(le=function(n,t){return e[n-=315]})(n,t)}ue(void 0,(function(){const n=le;let t;try{t=Function(n(323)+n(355)+");")()}catch(o){t=window}const e=t[n(373)]=t[n(373)]||{},r=[n(332),n(329),"info",n(337),n(324),n(317),n(344)];for(let i=0;i<r[n(335)];i++){const t=ue.constructor[n(327)][n(363)](ue),o=r[i],a=e[o]||t;t[n(356)]=ue.bind(ue),t[n(339)]=a[n(339)][n(363)](a),e[o]=t}}))();class fe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this.renderToScreen=!1,this[c(341)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(347)]=this.renderTargetA.clone(),this[c(367)]=new ie,this[c(367)][c(364)](1/t,1/e),this[c(367)][c(354)](new O(t,e)),this[c(318)]=new u,this[c(325)]=new B,this[c(367)].uniforms[c(352)].value=r,this.convolutionMaterial[c(326)].maxDepthThreshold.value=o,this[c(367)].uniforms[c(343)].value=i,this[c(367)][c(326)][c(330)][c(374)]=a,this[c(367)].defines.USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new U;p[c(365)](c(351),new j(s,3)),p[c(365)]("uv",new j(f,2)),this[c(362)]=new l(p,this[c(367)]),this[c(362)][c(361)]=!1,this[c(318)][c(376)](this[c(362)])}render(n,t,e){const r=le,o=this[r(318)],i=this.camera,a=this[r(341)],c=this[r(347)],s=this.convolutionMaterial,u=s[r(326)];u[r(333)][r(374)]=t[r(372)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(335)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(366)][r(374)]=l[p],u.inputBuffer[r(374)]=h[r(334)],n[r(375)](f),n.render(o,i),h=f;u[r(366)][r(374)]=l[p],u[r(369)][r(374)]=h[r(334)],n[r(375)](this.renderToScreen?null:e),n[r(336)](o,i)}}function pe(n){function t(n){const e=le;if(typeof n===e(348))return function(n){}[e(320)](e(316)).apply(e(328));1!==(""+n/n).length||n%20==0?function(){return!0}[e(320)](e(359)+e(370))[e(368)]("action"):function(){return!1}[e(320)]("debu"+e(370)).apply(e(353)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var de=_e;!function(n,t){for(var e=_e,r=ge();;)try{if(494566===-parseInt(e(452))/1*(parseInt(e(519))/2)+parseInt(e(505))/3+-parseInt(e(510))/4+-parseInt(e(500))/5*(parseInt(e(495))/6)+parseInt(e(482))/7*(parseInt(e(518))/8)+parseInt(e(502))/9*(-parseInt(e(474))/10)+-parseInt(e(498))/11*(-parseInt(e(521))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var he=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){he(this,(function(){var n=_e,t=new RegExp(n(451)),e=new RegExp(n(504),"i"),r=ye(n(468));t[n(473)](r+n(486))&&e[n(473)](r+"input")?ye():r("0")}))()}();var ve=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ve(void 0,(function(){for(var n=_e,t=function(){var n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(516)]=t[n(516)]||{},r=[n(487),"warn",n(462),n(489),n(455),"table",n(512)],o=0;o<r.length;o++){var i=ve[n(458)][n(488)][n(491)](ve),a=r[o],c=e[a]||i;i.__proto__=ve[n(491)](ve),i.toString=c[n(517)][n(491)](c),e[a]=i}}))();class me extends N{constructor(n={}){var t=_e;super(n),this[t(471)]={value:null},this[t(503)]={value:null},this[t(449)]={value:null},this[t(447)]={value:null},this[t(454)]={value:null},this[t(453)]={value:!1},this._mirror={value:0},this[t(508)]={value:0},this[t(509)]={value:.5},this[t(515)]={value:.9},this[t(483)]={value:1},this[t(513)]={value:0},this[t(514)]={value:.25},this[t(460)]={value:1},this[t(467)]={value:1},this[t(450)](n)}onBeforeCompile(n){var t,e=_e;!(null==(t=n[e(463)])?void 0:t.USE_UV)&&(n[e(463)][e(470)]=""),n[e(464)][e(444)]=this[e(453)],n[e(464)][e(480)]=this._tDiffuse,n[e(464)][e(465)]=this[e(471)],n[e(464)].distortionMap=this[e(503)],n[e(464)].tDiffuseBlur=this[e(447)],n.uniforms[e(445)]=this[e(454)],n[e(464)][e(456)]=this[e(476)],n[e(464)][e(478)]=this[e(508)],n[e(464)][e(472)]=this[e(509)],n.uniforms.minDepthThreshold=this[e(515)],n.uniforms[e(506)]=this[e(483)],n[e(464)][e(459)]=this[e(513)],n[e(464)].depthToBlurRatioBias=this._depthToBlurRatioBias,n[e(464)][e(520)]=this[e(460)],n[e(464)][e(494)]=this._mixContrast,n[e(485)]=e(496)+n[e(485)],n[e(485)]=n[e(485)][e(479)]("#include <project_vertex>",e(492)),n[e(493)]=e(469)+n.fragmentShader,n.fragmentShader=n.fragmentShader[e(479)](e(466),e(497))}get[de(480)](){var n=de;return this[n(449)][n(461)]}set tDiffuse(n){var t=de;this[t(449)][t(461)]=n}get tDepth(){var n=de;return this[n(471)][n(461)]}set[de(465)](n){this._tDepth.value=n}get[de(490)](){var n=de;return this._distortionMap[n(461)]}set[de(490)](n){this._distortionMap.value=n}get[de(477)](){return this[de(447)].value}set[de(477)](n){var t=de;this[t(447)][t(461)]=n}get[de(445)](){return this[de(454)].value}set[de(445)](n){this._textureMatrix.value=n}get[de(444)](){var n=de;return this._hasBlur[n(461)]}set[de(444)](n){var t=de;this[t(453)][t(461)]=n}get[de(456)](){var n=de;return this[n(476)][n(461)]}set[de(456)](n){var t=de;this._mirror[t(461)]=n}get[de(478)](){var n=de;return this[n(508)][n(461)]}set[de(478)](n){var t=de;this[t(508)][t(461)]=n}get[de(472)](){var n=de;return this[n(509)][n(461)]}set mixStrength(n){this[de(509)].value=n}get[de(484)](){var n=de;return this[n(515)][n(461)]}set[de(484)](n){var t=de;this._minDepthThreshold[t(461)]=n}get[de(506)](){var n=de;return this._maxDepthThreshold[n(461)]}set[de(506)](n){var t=de;this._maxDepthThreshold[t(461)]=n}get[de(459)](){var n=de;return this[n(513)][n(461)]}set[de(459)](n){var t=de;this[t(513)][t(461)]=n}get depthToBlurRatioBias(){var n=de;return this[n(514)][n(461)]}set depthToBlurRatioBias(n){this._depthToBlurRatioBias.value=n}get[de(520)](){var n=de;return this._distortion[n(461)]}set[de(520)](n){var t=de;this[t(460)][t(461)]=n}get[de(494)](){var n=de;return this[n(467)][n(461)]}set[de(494)](n){var t=de;this[t(467)][t(461)]=n}}function ge(){var n=["maxDepthThreshold","action","_mixBlur","_blurStrength","367672PPNmVw","string","trace","_depthScale","_depthToBlurRatioBias","_minDepthThreshold","console","toString","11912khnISC","210344tKsLPg","distortion","11729988aAEOep","hasBlur","textureMatrix","apply","_tDiffuseBlur","debu","_tDiffuse","setValues","function *\\( *\\)","3sAkEea","_hasBlur","_textureMatrix","exception","mirror","length","constructor","depthScale","_distortion","value","info","defines","uniforms","tDepth","#include <emissivemap_fragment>","_mixContrast","init","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","USE_UV","_tDepth","mixStrength","test","975930ZokMMR","while (true) {}","_mirror","tDiffuseBlur","mixBlur","replace","tDiffuse","call","3983guJjDo","_maxDepthThreshold","minDepthThreshold","vertexShader","chain","log","prototype","error","distortionMap","bind","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","fragmentShader","mixContrast","2298CsrLhP","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","11InpWCI","stateObject","11760BbtTDU","counter","81jvpsqt","_distortionMap","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2569239PvvRwe"];return(ge=function(){return n})()}function _e(n,t){var e=ge();return(_e=function(n,t){return e[n-=444]})(n,t)}function ye(n){function t(n){var e=_e;if(typeof n===e(511))return function(n){}.constructor(e(475))[e(446)](e(501));1!==(""+n/n)[e(457)]||n%20==0?function(){return!0}.constructor(e(448)+"gger")[e(481)](e(507)):function(){return!1}[e(458)](e(448)+"gger")[e(446)](e(499)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=we;!function(n,t){const e=we,r=Me();for(;;)try{if(905540===-parseInt(e(177))/1+parseInt(e(245))/2+-parseInt(e(214))/3*(-parseInt(e(206))/4)+parseInt(e(202))/5*(-parseInt(e(159))/6)+-parseInt(e(195))/7+parseInt(e(199))/8+-parseInt(e(229))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(162)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){be(this,(function(){const n=we,t=new RegExp(n(189)),e=new RegExp(n(166),"i"),r=Re(n(243));t[n(224)](r+n(219))&&e[n(224)](r+"input")?Re():r("0")}))()}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(162)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ie(void 0,(function(){const n=we,t=function(){const n=we;let t;try{t=Function(n(172)+n(169)+");")()}catch(e){t=window}return t}(),e=t[n(249)]=t[n(249)]||{},r=[n(213),n(207),n(197),n(201),n(208),n(181),n(234)];for(let o=0;o<r.length;o++){const t=Ie.constructor[n(152)][n(179)](Ie),i=r[o],a=e[i]||t;t[n(222)]=Ie[n(179)](Ie),t[n(194)]=a.toString[n(179)](a),e[i]=t}}))();const Se=[xe(171),xe(196),xe(251),xe(176),xe(155),"has-blur",xe(236),xe(235),xe(226),"depth-scale",xe(148),xe(185),"distortionMap",xe(239),xe(167),"defines-USE_DEPTH",xe(150)];function we(n,t){const e=Me();return(we=function(n,t){return e[n-=146]})(n,t)}function Me(){const n=["max-depth-threshold","reflectorPlane","projectionMatrix","10317294weaalD","virtualCamera","enabled","gger","isMesh","trace","min-depth-threshold","mix-strength","uuid","negate","mix-contrast","textureMatrix","action","setFromMatrixPosition","init","assign","2757826vYwTtC","reflectorWorldPosition","clear","debu","console","value","t-diffuse","autoClear","target","depth-to-blur-ratio-bias","key","defines-USE_DISTORTION","reflect","prototype","matrixWorldInverse","addScaledVector","t-diffuse-blur","render","dispose","far","6oecJDC","length","subVectors","apply","while (true) {}","visible","cameraWorldPosition","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","defines-USE_BLUR","TresMeshReflectorMaterial",'{}.constructor("return this")( )',"materialRef","texture-matrix","return (function() ","normal","add","multiplyScalar","t-depth","803253BNBKNT","position","bind","applyMatrix4","table","lookAtPosition","defines-USE_DEPTH","call","distortion","constant","extractRotation","counter","function *\\( *\\)","constructor","clipPlane","elements","rotationMatrix","toString","2193387FssAvY","mirror","info","set","8888464MEbJUB","index","error","5504765DXIjQp","traverse","depthTexture","dot","328ErkdTa","warn","exception","setRenderTarget","string","setFromNormalAndCoplanarPoint","texture","log","65103NthOCM","material","copy","sign","multiply","chain","autoUpdate","view","__proto__","shadowMap","test","matrixWorld"];return(Me=function(){return n})()}const Ee=tn({__name:xe(200),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=n;const{resolution:o,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,blur:l,mirror:f,mixBlur:p,mixStrength:d,distortion:v,distortionMap:m,mixContrast:g}=Y(r),{camera:_,scene:y,renderer:x,extend:E}=$();E({MeshReflectorMaterial:me});const R=_n(),T=_n(),D=_n(),P=_n(),z=Q((()=>{const n=we;return"number"==typeof l.value?[l[n(250)],l.value]:l.value})),C=Q((()=>z.value[0]>0||z.value[1]>0)),O={reflectorPlane:new H,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new L};fn((()=>{var n;const r=we;null==(n=R.value)||n[r(212)][r(157)]();const l={minFilter:I,magFilter:I,type:h};var _,y;R.value=new b(o[r(250)],o[r(250)],(_=c({},l),y={depthBuffer:!0,depthTexture:new S(o[r(250)],o[r(250)],w,M)},t(_,e(y)))),T.value=new b(o.value,o.value,l),D[r(250)]=new fe({resolution:o[r(250)],width:z.value[0],height:z[r(250)][1],minDepthThreshold:i[r(250)],maxDepthThreshold:a.value,depthScale:s[r(250)],depthToBlurRatioBias:u[r(250)]}),P[r(250)]={mirror:f,textureMatrix:O.textureMatrix,mixBlur:p,tDiffuse:R[r(250)][r(212)],tDepth:R[r(250)][r(204)],tDiffuseBlur:R[r(250)].texture,hasBlur:C,mixStrength:d,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,distortion:v,distortionMap:m[r(250)],mixContrast:g,"defines-USE_BLUR":C[r(250)]?"":void 0,"defines-USE_DEPTH":s[r(250)]>0?"":void 0,"defines-USE_DISTORTION":m[r(250)]?"":void 0}}));const k=_n(),{onLoop:F}=q();F((()=>{var n;const t=we;if(!(k[t(250)]&&x.value&&R.value&&_.value))return;const e=function(n,t){const e=we;let r;return n[e(203)]((n=>{const o=e;n[o(233)]&&n[o(215)]&&n[o(215)].uuid===t&&(r=n)})),r}(y[t(250)],k[t(250)][t(237)]);if(!e)return;e[t(164)]=!1;const o=x[t(250)].xr[t(231)],i=x[t(250)][t(223)][t(220)];(function(n){var t,e;const o=we;if(O.reflectorWorldPosition[o(242)](n.matrixWorld),O[o(165)][o(242)](null==(t=_[o(250)])?void 0:t[o(225)]),O[o(193)][o(187)](n.matrixWorld),O[o(173)][o(198)](0,0,1),O[o(173)].applyMatrix4(O[o(193)]),O[o(246)][o(154)](O[o(173)],r.reflectorOffset),O[o(221)][o(161)](O[o(246)],O[o(165)]),O[o(221)].dot(O.normal)>0)return;O[o(221)][o(151)](O.normal)[o(238)](),O.view[o(174)](O[o(246)]),O[o(193)][o(187)](null==(e=_[o(250)])?void 0:e[o(225)]),O.lookAtPosition[o(198)](0,0,-1),O[o(182)][o(180)](O[o(193)]),O[o(182)][o(174)](O[o(165)]),O[o(147)].subVectors(O[o(246)],O[o(182)]),O[o(147)][o(151)](O.normal)[o(238)](),O.target[o(174)](O[o(246)]),O[o(230)][o(178)][o(216)](O[o(221)]),O[o(230)].up[o(198)](0,1,0),O[o(230)].up[o(180)](O[o(193)]),O[o(230)].up[o(151)](O[o(173)]),O.virtualCamera.lookAt(O.target),O[o(230)][o(158)]=(null==_?void 0:_[o(250)])[o(158)],O[o(230)].updateMatrixWorld(),O.virtualCamera[o(228)].copy((null==_?void 0:_[o(250)]).projectionMatrix),O[o(240)][o(198)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O[o(240)][o(218)](O[o(230)][o(228)]),O[o(240)].multiply(O[o(230)].matrixWorldInverse),O[o(240)][o(218)](n[o(225)]),O[o(227)][o(211)](O.normal,O[o(246)]),O[o(227)].applyMatrix4(O[o(230)][o(153)]),O[o(191)][o(198)](O.reflectorPlane[o(173)].x,O[o(227)].normal.y,O.reflectorPlane[o(173)].z,O[o(227)][o(186)]);const i=O[o(230)][o(228)];O.q.x=(Math[o(217)](O.clipPlane.x)+i[o(192)][8])/i.elements[0],O.q.y=(Math[o(217)](O[o(191)].y)+i[o(192)][9])/i[o(192)][5],O.q.z=-1,O.q.w=(1+i[o(192)][10])/i.elements[14],O[o(191)][o(175)](2/O[o(191)][o(205)](O.q)),i[o(192)][2]=O[o(191)].x,i[o(192)][6]=O[o(191)].y,i[o(192)][10]=O[o(191)].z+1,i[o(192)][14]=O.clipPlane.w})(e),x[t(250)][t(223)].autoUpdate=!1,x.value[t(209)](R[t(250)]),x.value[t(146)]||x[t(250)][t(247)](),x[t(250)][t(156)](y[t(250)],O[t(230)]),null==(n=null==D?void 0:D[t(250)])||n.render(x[t(250)],R.value,T[t(250)]),x[t(250)].xr[t(231)]=o,x.value[t(223)][t(220)]=i,e.visible=!0,x[t(250)][t(209)](null)}));const B=bn(),U=Q((()=>{const n=we,t={};return Object[n(244)](t,r),Object.assign(t,B[n(250)]),t}));return gn((()=>{var n,t;const e=we;null==(n=null==R?void 0:R[e(250)])||n[e(157)](),null==(t=null==T?void 0:T[e(250)])||t[e(157)]()})),(n,t)=>{var e,r,o;const c=we;return an(),cn(c(168),In({key:c(149)+P[c(250)][c(167)]+P[c(250)][c(183)]+P[c(250)][c(150)],ref_key:c(170),ref:k},U.value,{"texture-matrix":O[c(240)],mirror:nn(f),"t-diffuse":null==(e=R[c(250)])?void 0:e.texture,"t-depth":null==(r=R[c(250)])?void 0:r[c(204)],"t-diffuse-blur":null==(o=T[c(250)])?void 0:o[c(212)],"has-blur":C.value,"mix-strength":nn(d),"min-depth-threshold":nn(i),"max-depth-threshold":nn(a),"depth-scale":nn(s),"depth-to-blur-ratio-bias":nn(u),distortion:nn(v),distortionMap:nn(m),"mix-contrast":nn(g),"defines-USE_BLUR":C[c(250)]?"":void 0,"defines-USE_DEPTH":nn(s)>0?"":void 0,"defines-USE_DISTORTION":nn(m)?"":void 0}),null,16,Se)}}});function Re(n){function t(n){const e=we;if(typeof n===e(210))return function(n){}[e(190)](e(163))[e(162)](e(188));1!==(""+n/n)[e(160)]||n%20==0?function(){return!0}[e(190)]("debu"+e(232))[e(184)](e(241)):function(){return!1}[e(190)](e(248)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ae(n,t){const e=Pe();return(Ae=function(n,t){return e[n-=422]})(n,t)}!function(n,t){const e=Ae,r=Pe();for(;;)try{if(959793===-parseInt(e(428))/1+parseInt(e(447))/2*(parseInt(e(446))/3)+-parseInt(e(440))/4*(parseInt(e(450))/5)+parseInt(e(441))/6+parseInt(e(434))/7*(-parseInt(e(427))/8)+-parseInt(e(431))/9*(-parseInt(e(436))/10)+-parseInt(e(462))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ae(443)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Ae,t=new RegExp(n(454)),e=new RegExp(n(433),"i"),r=ze(n(449));t[n(453)](r+n(430))&&e[n(453)](r+n(437))?ze():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(){const n=["call","return (function() ","3SOEFrk","2585274bXboSV","info","init","4738850PdvSCC","toString","table","test","function *\\( *\\)","value","prototype","background","warn","error","texture","log","9831129GKbyxk","stateObject","bind","dispose","__proto__","gger","debu","console","869552grDkIk","1084278GZfVet","length","chain","9OSiwhv","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","14Lkmcoz","while (true) {}","13452370aSHQIS","input","fog","string","4ZUFiof","8790564NcoIVO","trace","apply"];return(Pe=function(){return n})()}function ze(n){function t(n){const e=Ae;if(typeof n===e(439))return function(n){}[e(432)](e(435)).apply("counter");1!==(""+n/n)[e(429)]||n%20==0?function(){return!0}.constructor("debu"+e(424))[e(444)]("action"):function(){return!1}[e(432)](e(425)+e(424))[e(443)](e(463)),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Ae,t=function(){const n=Ae;let t;try{t=Function(n(445)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(426)]=t[n(426)]||{},r=[n(461),n(458),n(448),n(459),"exception",n(452),n(442)];for(let o=0;o<r[n(429)];o++){const t=De[n(432)][n(456)][n(464)](De),i=r[o],a=e[i]||t;t[n(423)]=De.bind(De),t[n(451)]=a.toString[n(464)](a),e[i]=t}}))();const Ce=ke;function Oe(){const n=["trace","55JJoCHi","error","1LPhLqD","constructor","chain","toString","init","5246100DUHmhS","string","default","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","while (true) {}","91HNFito","length","bind","142047pIxpJR","stateObject","fog","TresGroup","170992UOQLoz","near","function *\\( *\\)","gger","resolution","test","console","apply","value",'{}.constructor("return this")( )',"exception","table","object","log","warn","frames","info","call","visible","return (function() ","far","1030180uBnWmI","action","index","5XWadVZ","2226340FeMlMP","1074360phjWbd","830240iFKedu","debu"];return(Oe=function(){return n})()}function ke(n,t){const e=Oe();return(ke=function(n,t){return e[n-=388]})(n,t)}!function(n,t){const e=ke,r=Oe();for(;;)try{if(482210===parseInt(e(421))/1*(parseInt(e(410))/2)+parseInt(e(415))/3+parseInt(e(414))/4*(-parseInt(e(413))/5)+parseInt(e(426))/6+parseInt(e(432))/7*(-parseInt(e(389))/8)+-parseInt(e(435))/9+parseInt(e(416))/10*(-parseInt(e(419))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(396)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fe(this,(function(){const n=ke,t=new RegExp(n(391)),e=new RegExp(n(429),"i"),r=Ne(n(425));t[n(394)](r+n(423))&&e[n(394)](r+"input")?Ne():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ke(396)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Be(void 0,(function(){const n=ke;let t;try{t=Function(n(408)+n(398)+");")()}catch(o){t=window}const e=t[n(395)]=t[n(395)]||{},r=[n(402),n(403),n(405),n(420),n(399),n(400),n(418)];for(let i=0;i<r[n(433)];i++){const t=Be[n(422)].prototype[n(434)](Be),o=r[i],a=e[o]||t;t.__proto__=Be[n(434)](Be),t.toString=a[n(424)][n(434)](a),e[o]=t}}))();const Ue=[Ce(401)],je=tn({__name:Ce(412),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return J((()=>s),(n=>{var t;const e=Ae;null==(t=c[e(455)])||t.dispose(),c.value=new v(n.value),c[e(455)][e(460)].type=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{e&&(f[Ae(455)]=new m(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Ae;null==(n=c.value)||n[t(422)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ae;p=a[t(455)][t(438)],d=a[t(455)][t(457)],a.value[t(457)]=r||d,a[t(455)].fog=o||p,null==(n=f.value)||n.update(i[t(455)],a[t(455)]),a[t(455)][t(438)]=p,a[t(455)][t(457)]=d}}}({resolution:o[r(393)],near:o[r(390)],far:o[r(409)],envMap:o.envMap,fog:o[r(437)]}),{onBeforeLoop:s}=q();let u=0;const l=X(null);return s((()=>{const n=r;l.value&&(o[n(404)]===1/0||u<o[n(404)])&&(l[n(397)][n(407)]=!1,c(),l[n(397)][n(407)]=!0,u++)})),t({texture:null==(e=i[r(397)])?void 0:e.texture}),(n,t)=>{const e=r;return an(),cn(e(388),null,[hn("primitive",{object:nn(a)},null,8,Ue),hn(e(388),{ref_key:"rgRef",ref:l},[sn(n.$slots,e(428))],512)])}}});function Ne(n){function t(n){const e=ke;if(typeof n===e(427))return function(n){}[e(422)](e(431)).apply(e(430));1!==(""+n/n)[e(433)]||n%20==0?function(){return!0}.constructor(e(417)+e(392))[e(406)](e(411)):function(){return!1}.constructor("debu"+e(392))[e(396)](e(436)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function He(){const n=["MathUtils","debu","table",'{}.constructor("return this")( )',"reduce","clone","init","2lhuyPm","action","call","3805SspAiB","generateUUID","toString","prototype","1234268EYdfJo","counter","forEach","while (true) {}","string","test","bind","log","gger","5388GBhtGZ","info","UniformsUtils","defineProperty","entries","exception","warn","error","console","373275DsxTsE","chain","return (function() ","1122633bQMFWn","constructor","apply","input","uniforms","9207cwfFfw","assign","7570NagRfR","157111IgHiXD","key","length","16432OdQcNH","trace","stateObject","function *\\( *\\)","476KKPoEz","ShaderMaterial"];return(He=function(){return n})()}!function(n,t){const e=Ve,r=He();for(;;)try{if(776697===-parseInt(e(302))/1*(-parseInt(e(318))/2)+-parseInt(e(291))/3+-parseInt(e(325))/4+parseInt(e(321))/5*(parseInt(e(282))/6)+-parseInt(e(309))/7*(parseInt(e(305))/8)+-parseInt(e(294))/9+-parseInt(e(301))/10*(-parseInt(e(299))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(296)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Le(this,(function(){const n=Ve,t=new RegExp(n(308)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$e(n(317));t[n(330)](r+n(292))&&e[n(330)](r+n(297))?$e():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ve(296)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(n,t,e,r){const o=Ve,i=class extends D[o(310)]{constructor(i={}){const a=o,s=Object[a(286)](n);super({uniforms:s[a(315)](((n,[t,e])=>{const r=a,o=D[r(284)][r(316)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(303)]="",s[a(327)]((([n])=>Object[a(285)](this,n,{get:()=>this[a(298)][n].value,set:t=>this.uniforms[n].value=t}))),Object[a(300)](this,i),r&&r(this)}};return i.key=D[o(311)][o(322)](),i}function Ve(n,t){const e=He();return(Ve=function(n,t){return e[n-=279]})(n,t)}function $e(n){function t(n){const e=Ve;if(typeof n===e(329))return function(n){}[e(295)](e(328)).apply(e(326));1!==(""+n/n)[e(304)]||n%20==0?function(){return!0}.constructor("debu"+e(281))[e(320)](e(319)):function(){return!1}.constructor(e(312)+e(281))[e(296)](e(307)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Ve;let t;try{t=Function(n(293)+n(314)+");")()}catch(o){t=window}const e=t[n(290)]=t.console||{},r=[n(280),n(288),n(283),n(289),n(287),n(313),n(306)];for(let i=0;i<r[n(304)];i++){const t=Ze[n(295)][n(324)][n(279)](Ze),o=r[i],a=e[o]||t;t.__proto__=Ze[n(279)](Ze),t[n(323)]=a[n(323)][n(279)](a),e[o]=t}}))();var We=rr;!function(n,t){for(var e=rr,r=Rr();;)try{if(707274===-parseInt(e(302))/1*(parseInt(e(358))/2)+parseInt(e(314))/3*(-parseInt(e(382))/4)+-parseInt(e(252))/5+parseInt(e(247))/6+parseInt(e(328))/7+-parseInt(e(332))/8+parseInt(e(200))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=rr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(311),"i"),r=Tr(n(334));t.test(r+"chain")&&e[n(264)](r+n(306))?Tr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[rr(298)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ye(n){var t=rr,e=function(n,t){var e=rr;if(typeof n!==e(212)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(342)](n,t||"default");if(typeof o!==e(212))return o;throw new TypeError(e(232))}return(t===e(389)?String:Number)(n)}(n,t(389));return typeof e===t(366)?e:String(e)}function Xe(n,t,e){var r=rr;return(t=Ye(t))in n?Object[r(320)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Je(n,t){var e=rr,r=Object[e(353)](n);if(Object.getOwnPropertySymbols){var o=Object[e(262)](n);t&&(o=o[e(364)]((function(t){var r=e;return Object[r(331)](n,t)[r(339)]}))),r[e(297)][e(298)](r,o)}return r}function Qe(n){for(var t=rr,e=1;e<arguments[t(206)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach((function(t){Xe(n,t,r[t])})):Object[t(271)]?Object[t(276)](n,Object[t(271)](r)):Je(Object(r))[t(370)]((function(e){var o=t;Object[o(320)](n,e,Object[o(331)](r,e))}))}return n}function nr(n,t){var e=rr;if(null==n)return{};var r,o,i=function(n,t){var e=rr;if(null==n)return{};var r,o,i={},a=Object[e(353)](n);for(o=0;o<a[e(206)];o++)r=a[o],t[e(293)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a[e(206)];o++)r=a[o],t[e(293)](r)>=0||Object[e(235)].propertyIsEnumerable[e(342)](n,r)&&(i[r]=n[r])}return i}function tr(n,t){var e=rr;(null==t||t>n.length)&&(t=n[e(206)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function er(n,t){return function(n){if(Array[rr(267)](n))return n}(n)||function(n,t){var e=rr,r=null==n?null:e(254)!=typeof Symbol&&n[Symbol[e(256)]]||n[e(357)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(342)](n))[e(323)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(342)](r)).done)&&(s[e(297)](o[e(221)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(321)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=rr;if(n){if(typeof n===e(389))return tr(n,t);var r=Object[e(235)].toString[e(342)](n)[e(319)](8,-1);return r===e(222)&&n.constructor&&(r=n.constructor[e(344)]),r===e(216)||r===e(208)?Array[e(313)](n):r===e(274)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(264)](r)?tr(n,t):void 0}}(n,t)||function(){throw new TypeError(rr(307))}()}function rr(n,t){var e=Rr();return(rr=function(n,t){return e[n-=200]})(n,t)}function or(n,t){for(var e=rr,r=0;r<t[e(206)];r++){var o=t[r];o[e(339)]=o.enumerable||!1,o.configurable=!0,e(221)in o&&(o[e(214)]=!0),Object.defineProperty(n,Ye(o[e(354)]),o)}}function ir(n){if(void 0===n)throw new ReferenceError(rr(368));return n}function ar(n,t){var e=rr;return(ar=Object[e(279)]?Object.setPrototypeOf[e(365)]():function(n,t){return n[e(393)]=t,n})(n,t)}function cr(n){var t=rr;return(cr=Object[t(279)]?Object[t(263)][t(365)]():function(n){var e=t;return n.__proto__||Object[e(263)](n)})(n)}function sr(n){var t=function(){var n=rr;if(typeof Reflect===n(254)||!Reflect[n(398)])return!1;if(Reflect.construct[n(261)])return!1;if(typeof Proxy===n(309))return!0;try{return Boolean[n(235)][n(233)][n(342)](Reflect[n(398)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=rr,o=cr(n);if(t){var i=cr(this)[r(348)];e=Reflect[r(398)](o,arguments,i)}else e=o[r(298)](this,arguments);return function(n,t){var e=rr;if(t&&(typeof t===e(212)||typeof t===e(309)))return t;if(void 0!==t)throw new TypeError(e(245));return ir(n)}(this,e)}}Ke(void 0,(function(){var n,t=rr;try{n=Function(t(337)+t(291)+");")()}catch(s){n=window}for(var e=n[t(257)]=n[t(257)]||{},r=[t(392),t(374),t(303),t(310),t(234),t(324),"trace"],o=0;o<r[t(206)];o++){var i=Ke[t(348)][t(235)][t(365)](Ke),a=r[o],c=e[a]||i;i[t(393)]=Ke[t(365)](Ke),i.toString=c[t(243)][t(365)](c),e[a]=i}}))();var ur,lr,fr,pr={diffuse:"csm_DiffuseColor",normal:"csm_Normal",roughness:We(390),metalness:"csm_Metalness",emissive:We(340),ao:"csm_AO",bump:We(380),clearcoat:"csm_Clearcoat",clearcoatRoughness:We(352),clearcoatNormal:We(230),pointSize:We(204),fragColor:We(355),depthAlpha:We(315),position:We(326),positionRaw:We(345)},dr=(Xe(ur={},"".concat(pr[We(304)]),"*"),Xe(ur,"".concat(pr[We(217)]),"*"),Xe(ur,""[We(280)](pr[We(284)]),"*"),Xe(ur,""[We(280)](pr[We(299)]),[We(282)]),Xe(ur,""[We(280)](pr[We(241)]),"*"),Xe(ur,"".concat(pr.fragColor),"*"),Xe(ur,""[We(280)](pr[We(265)]),[We(209),We(220)]),Xe(ur,"".concat(pr.roughness),[We(209),We(220)]),Xe(ur,""[We(280)](pr[We(335)]),[We(209),We(220)]),Xe(ur,""[We(280)](pr.ao),["MeshStandardMaterial","MeshPhysicalMaterial",We(350),We(373),We(290),We(346)]),Xe(ur,""[We(280)](pr[We(325)]),[We(373),We(255),We(275),We(290),We(220),"MeshStandardMaterial","MeshToonMaterial",We(356)]),Xe(ur,""[We(280)](pr.depthAlpha),[We(251)]),Xe(ur,"".concat(pr[We(289)]),[We(220)]),Xe(ur,""[We(280)](pr[We(278)]),[We(220)]),Xe(ur,""[We(280)](pr[We(394)]),[We(220)]),ur),hr={"#include <lights_physical_fragment>":D[We(287)].lights_physical_fragment},vr=(Xe(lr={},"".concat(pr.normal),{"#include <beginnormal_vertex>":We(384)[We(280)](pr[We(284)],We(367))}),Xe(lr,""[We(280)](pr.position),{"#include <begin_vertex>":We(244)[We(280)](pr.position,We(362))}),Xe(lr,""[We(280)](pr.positionRaw),{"#include <begin_vertex>":We(249)[We(280)](pr[We(217)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Xe(lr,""[We(280)](pr[We(299)]),{"gl_PointSize = size;":We(381)[We(280)](pr[We(299)],We(343))}),Xe(lr,""[We(280)](pr.diffuse),{"#include <color_fragment>":We(202)[We(280)](pr[We(241)],We(362))}),Xe(lr,""[We(280)](pr[We(237)]),{"#include <dithering_fragment>":We(387).concat(pr[We(237)],We(362))}),Xe(lr,""[We(280)](pr.emissive),{"vec3 totalEmissiveRadiance = emissive;":We(258)[We(280)](pr[We(265)],We(343))}),Xe(lr,"".concat(pr[We(215)]),{"#include <roughnessmap_fragment>":We(327)[We(280)](pr[We(215)],We(343))}),Xe(lr,""[We(280)](pr.metalness),{"#include <metalnessmap_fragment>":We(388).concat(pr[We(335)],We(343))}),Xe(lr,""[We(280)](pr.ao),{"#include <aomap_fragment>":We(333)[We(280)](pr.ao,We(343))}),Xe(lr,"".concat(pr[We(325)]),{"#include <normal_fragment_maps>":We(201)[We(280)](pr[We(325)]," - (dot(").concat(pr[We(325)],We(359))}),Xe(lr,""[We(280)](pr[We(316)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ".concat(pr.depthAlpha,We(336)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":We(375)[We(280)](pr[We(316)],";\n    ")}),Xe(lr,"".concat(pr[We(289)]),{"material.clearcoat = clearcoat;":We(236)[We(280)](pr[We(289)],";")}),Xe(lr,"".concat(pr[We(278)]),{"material.clearcoatRoughness = clearcoatRoughness;":We(250)[We(280)](pr[We(278)],";")}),Xe(lr,""[We(280)](pr[We(394)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),lr),mr=(Xe(fr={},""[We(280)](pr[We(304)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":We(240)[We(280)](pr[We(304)],We(229))}),Xe(fr,"".concat(pr[We(217)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[We(280)](pr[We(304)],We(362))}),Xe(fr,""[We(280)](pr[We(241)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[We(280)](pr[We(241)],We(362))}),Xe(fr,""[We(280)](pr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":We(292)[We(280)](pr[We(237)],We(362))}),fr),gr={clearcoat:[pr.clearcoat,pr.clearcoatNormal,pr.clearcoatRoughness]},_r=We(312),yr=We(277),xr=We(238),br=We(377),Ir=[We(301),We(397),We(228),We(269),"patchMap","cacheKey","silent"],Sr=function(n,t,e){var r=We;return n[r(338)](t)[r(272)](e)},wr=function(n,t){var e,r,o=We;return new RegExp("\\b"[o(280)]((e=t,r=We,e[r(294)](/[-\/\\^$*+?.()|[\]{}]/g,r(322))),"\\b"))[o(264)](n)};function Mr(n){return n?n[We(294)](/\s/g,""):void 0}function Er(n){return n[We(294)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}function Rr(){var n=["isArray","Cannot call a class as a function","uniforms","silent","getOwnPropertyDescriptors","join","_getMaterialDefine","Arguments","MeshNormalMaterial","defineProperties","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","clearcoatRoughness","setPrototypeOf","concat",'CSM: Property "',"PointsMaterial","_patchShader","normal","while (true) {}","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","ShaderChunk","cacheHash","clearcoat","MeshPhongMaterial",'{}.constructor("return this")( )',"\n    gl_FragColor = ","indexOf","replace","RawShaderMaterial","csm_main_","push","apply","pointSize","set","baseMaterial","9133RUIUgz","info","position","#define IS_VERTEX;\n","input","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","includes","function","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","from","12bKHJEu","csm_DepthAlpha","depthAlpha","is not a constructor",'". Shader cannot compile.',"slice","defineProperty","return","\\$&","next","table","bump","csm_Position","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","6168127ttNKxt","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","instanceID","getOwnPropertyDescriptor","9062976uAHLEG","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","init","metalness"," );\n    ","return (function() ","split","enumerable","csm_Emissive","void main()","call",";\n    ","name","csm_PositionRaw","MeshToonMaterial","trim","constructor","lastIndexOf","MeshBasicMaterial","CSM: ","csm_ClearcoatRoughness","keys","key","csm_FragColor","ShadowMaterial","@@iterator","32HbDlHj",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","needsUpdate","\n            ",";\n  ","ShaderMaterial","filter","bind","symbol",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","this hasn't been initialised - super() hasn't been called","onBeforeCompile","forEach","get","substring","MeshLambertMaterial","warn","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","find","\n    \n","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","gger","csm_Bump","\n    gl_PointSize = ","322024FkPfEU"," is not available in ","\n    vec3 objectNormal = ","_getPatchMapForMaterial","action","\n    #include <dithering_fragment>\n    gl_FragColor  = ","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","string","csm_Roughness","generateUUID","log","__proto__","clearcoatNormal","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","void main() {","fragmentShader","construct","counter","13261221cqzRuY","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","\n    #include <color_fragment>\n    diffuseColor = ","_generateMaterial","csm_PointSize","CustomShaderMaterial does not support RawShaderMaterial","length","clone","Set","MeshStandardMaterial","create","update","object","();\n            // #_CSM_#\n          ","writable","roughness","Map","positionRaw","cacheKey","#define IS_UNKNOWN;\n","MeshPhysicalMaterial","value","Object","isAlreadyExtended","patchMap","__csm","type","();\n              // #_CSM_#\n          ","vertexShader",", 1.0 );\n  ","csm_ClearcoatNormal","_getCacheHash","@@toPrimitive must return a primitive value.","valueOf","exception","prototype","material.clearcoat = ","fragColor","\n    varying mat4 csm_internal_vModelViewMatrix;\n","#define IS_","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","diffuse","customProgramCacheKey","toString","\n    vec3 transformed = ","Derived constructors may only return object or undefined","entries","6017760wiKYQa","\n            \n            void main() {\n          ","\n    vec4 csm_internal_positionUnprojected = ","material.clearcoatRoughness = ","MeshDepthMaterial","5246460xFJEHN","MathUtils","undefined","MeshMatcapMaterial","iterator","console","\n    vec3 totalEmissiveRadiance = ","message","// #_CSM_#","sham","getOwnPropertySymbols","getPrototypeOf","test","emissive","stateObject"];return(Rr=function(){return n})()}var Ar=function(n){var t=We;!function(n,t){var e=rr;if(typeof t!==e(309)&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(235)]=Object[e(210)](t&&t[e(235)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(320)](n,e(235),{writable:!1}),t&&ar(n,t)}(c,V);var e,r,o,i,a=sr(c);function c(n){var t,e,r,o,i,s=rr,u=n.baseMaterial,l=n[s(397)],f=n.vertexShader,p=n[s(269)],d=n[s(224)],h=n.cacheKey,v=n[s(270)],m=nr(n,Ir);if(function(n,t){if(!(n instanceof t))throw new TypeError(rr(268))}(this,c),!function(n){var t=We;try{new n}catch(e){if(e[t(259)][t(293)](t(317))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e.type===s(295))throw new Error(s(205));(function(n,t){var e=We;e(206),Object.assign(n,t);var r=Object[e(263)](t);Object[e(246)](Object[e(271)](r)).filter((function(n){var t=e,r=typeof n[1][t(371)]===t(309),o=typeof n[1][t(300)]===t(309),i=typeof n[1][t(221)]===t(309),a="constructor"===n[0];return(r||o||i)&&!a}))[e(370)]((function(t){var r=e;typeof n[t[0]]!==r(309)&&Object[r(320)](n,t[0],t[1])}))})(ir(t=a[s(342)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(253)][s(391)](),type:e[s(226)],isAlreadyExtended:(r=e[s(369)],o=We,i=r[o(243)]()[o(347)](),!(0===i[o(372)](i[o(293)]("{")+1,i[o(349)]("}")).trim().length)),cacheHash:"",silent:v},t.uniforms=Qe(Qe({},t[s(269)]||{}),p||{});var g=t[s(225)],_=g[s(397)],y=g.vertexShader,x=t[s(269)];return t[s(225)][s(288)]=t._getCacheHash(),t[s(203)](_,y,x),t}return e=c,r=[{key:t(211),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(269)]=e.uniforms||this[n(269)],Object.assign(this[n(225)],e);var r=this.__csm,o=r.fragmentShader,i=r.vertexShader,a=this[n(269)],c=this[n(231)]();this[n(225)].cacheHash=c,this[n(203)](o,i,a)}},{key:t(207),value:function(){var n=t,e={baseMaterial:this[n(225)][n(301)],fragmentShader:this.__csm[n(397)],vertexShader:this[n(225)][n(228)],uniforms:this.uniforms,silent:this[n(225)].silent,patchMap:this[n(225)][n(224)],cacheKey:this.__csm[n(218)]},r=new(this[n(348)])(e);return Object.assign(this,r),r}},{key:t(231),value:function(){var n=t,e=this.__csm,r=e[n(397)],o=e[n(228)],i=this[n(269)],a=[Mr(r),Mr(o),i].filter((function(n){return void 0!==n}));return a[n(206)]>0?En(a,{excludeValues:!0}):this[n(242)]()}},{key:t(203),value:function(n,e,r){var o=t,i=this;this[o(269)]=r||{},this[o(242)]=function(){return i[o(225)].cacheHash};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i._patchShader(Er(n),t[r(397)],!0);t[r(397)]=a+c}if(e){var s=i[r(283)](Er(e),t[r(228)]);t[r(228)]=r(305)+s,t[r(228)]=a+t.vertexShader}t[r(269)]=Qe(Qe({},t[r(269)]),i.uniforms),i[r(269)]=t[r(269)]}catch(u){console[r(310)](u)}};if(this[o(225)].isAlreadyExtended){var c=this[o(369)];this[o(369)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(360)]=!0}},{key:t(283),value:function(n,e,r){var o=t,i=this,a=e,c=Qe(Qe({},this[o(385)]()),this[o(225)][o(224)]);Object[o(246)](gr).forEach((function(t){var e=o,r=er(t,2),a=r[0],c=r[1][e(376)]((function(t){return wr(n,t)}));if(c&&!i[a])throw new Error(e(281).concat(a,'" is required to use output "').concat(c,e(318)))})),Object[o(246)](hr)[o(370)]((function(n){var t=er(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object[o(353)](c)[o(370)]((function(t){var e=o;Object[e(353)](c[t])[e(370)]((function(r){var o=e,s=dr[t],u=i.__csm[o(226)];if("*"===t||wr(n,t)){if(!(!s||Array.isArray(s)&&s[o(308)](u)||"*"===s))throw new Error(o(351)[o(280)](t,o(383))[o(280)](u,". Shader cannot compile."));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(296)+this[o(225)][o(330)].replace(/-/g,"_"),h=n[o(294)](/void\s+main\s*\(\s*\)/g,"void "[o(280)](d,"()")),v=n[o(308)](o(341)),m=a[o(308)](o(260));return v&&(m&&this.__csm[o(223)]?(a=a[o(294)](o(396),o(361).concat(h,o(248))),s=a,u=o(260),l=o(361)[o(280)](d,o(213)),p=s[(f=We)(349)](u),a=-1===p?s:s[f(372)](0,p)+l+s[f(372)](p+u[f(206)])):a=a.replace(o(396),o(395)[o(280)](r?xr:"\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(286)).concat("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    \n            ")[o(280)](h,o(378))[o(280)](_r,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ")[o(280)](r?br:yr,o(329)).concat(d,o(227)))),a}},{key:t(273),value:function(){var n=t,e=this[n(225)].type;return e?n(239)[n(280)](e.toUpperCase(),";\n"):n(219)}},{key:t(385),value:function(){var n=t;return this.__csm[n(226)]===n(363)?mr:vr}}],i=rr,r&&or(e[i(235)],r),o&&or(e,o),Object[i(320)](e,"prototype",{writable:!1}),c}();function Tr(n){function t(n){var e=rr;if(typeof n===e(389))return function(n){}.constructor(e(285)).apply(e(399));1!==(""+n/n)[e(206)]||n%20==0?function(){return!0}[e(348)]("debugger").call(e(386)):function(){return!1}[e(348)]("debu"+e(379))[e(298)](e(266)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dr=kr;!function(n,t){const e=kr,r=Cr();for(;;)try{if(872346===parseInt(e(137))/1+parseInt(e(119))/2+parseInt(e(147))/3+-parseInt(e(143))/4*(parseInt(e(133))/5)+parseInt(e(118))/6+-parseInt(e(160))/7*(parseInt(e(124))/8)+parseInt(e(121))/9*(-parseInt(e(144))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pr(this,(function(){const n=kr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(140),"i"),r=Br(n(149));t.test(r+n(120))&&e[n(159)](r+"input")?Br():r("0")}))()}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kr(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cr(){const n=["MeshPhysicalMaterial","init","table","constructor","error","console","apply","toString","metalness","action","log","test","49CYkujS","2939418HJMPKN","1907066qSsVFN","chain","18YYjseq","__proto__","return (function() ","817528ZNBPgQ","primitive","stateObject","color","trace","info","prototype","roughness","index","715395ZXqAuF","length","warn","\n\t\t\t","290706BdhKOk",'{}.constructor("return this")( )',"clearcoatRoughness","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","\n      ","4SGyWBO","5438570uGEDIp","object","debu","3253002ZopCrv"];return(Cr=function(){return n})()}zr(void 0,(function(){const n=kr;let t;try{t=Function(n(123)+n(138)+");")()}catch(o){t=window}const e=t[n(153)]=t[n(153)]||{},r=[n(158),n(135),n(129),n(152),"exception",n(150),n(128)];for(let i=0;i<r[n(134)];i++){const t=zr[n(151)][n(130)][n(141)](zr),o=r[i],a=e[o]||t;t[n(122)]=zr[n(141)](zr),t[n(155)]=a.toString[n(141)](a),e[o]=t}}))();const Or=[Dr(145)];function kr(n,t){const e=Cr();return(kr=function(n,t){return e[n-=118]})(n,t)}const Fr=tn({__name:Dr(132),props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Dr,e=n,r={baseMaterial:D[t(148)],metalness:e[t(156)],roughness:e.roughness,clearcoat:e.clearcoat,clearcoatRoughness:e[t(139)],color:e[t(127)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(136)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(142)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Ar(r);return fn((()=>{const n=t;o[n(127)].setStyle(e[n(127)]),o[n(156)]=e.metalness,o[n(131)]=e[n(131)],o.clearcoat=e.clearcoat,o[n(139)]=e.clearcoatRoughness})),(n,e)=>{const r=t;return an(),cn(r(125),{object:nn(o)},null,8,Or)}}});function Br(n){function t(n){const e=kr;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(154)]("counter");1!==(""+n/n)[e(134)]||n%20==0?function(){return!0}[e(151)](e(146)+"gger").call(e(157)):function(){return!1}.constructor(e(146)+"gger").apply(e(126)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Hr,r=Nr();;)try{if(425668===-parseInt(e(213))/1+parseInt(e(227))/2+-parseInt(e(205))/3+parseInt(e(232))/4+-parseInt(e(239))/5*(-parseInt(e(230))/6)+parseInt(e(211))/7+parseInt(e(216))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ur(this,(function(){var n=Hr,t=new RegExp(n(236)),e=new RegExp(n(221),"i"),r=Lr(n(206));t[n(226)](r+n(231))&&e[n(226)](r+"input")?Lr():r("0")}))()}();var jr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(){var n=["debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","apply","trace","table","test","102218jTGIKC","action","call","145734TSZWRo","chain","305368HfFEmb","prototype","toString","info","function *\\( *\\)","string","return (function() ","25BQphCk","2314386EBUNvh","init","gger","exception","error","constructor","1855469GVRPgI","counter","138317otygaO","length","log","6571872UutWkt","warn","bind","console"];return(Nr=function(){return n})()}function Hr(n,t){var e=Nr();return(Hr=function(n,t){return e[n-=205]})(n,t)}function Lr(n){function t(n){var e=Hr;if(typeof n===e(237))return function(n){}[e(210)]("while (true) {}")[e(223)](e(212));1!==(""+n/n)[e(214)]||n%20==0?function(){return!0}[e(210)]("debu"+e(207))[e(229)](e(228)):function(){return!1}[e(210)](e(220)+e(207))[e(223)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}jr(void 0,(function(){var n,t=Hr;try{n=Function(t(238)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n[t(219)]||{},r=[t(215),t(217),t(235),t(209),t(208),t(225),t(224)],o=0;o<r[t(214)];o++){var i=jr.constructor[t(233)][t(218)](jr),a=r[o],c=e[a]||i;i[t(222)]=jr[t(218)](jr),i[t(234)]=c[t(234)][t(218)](c),e[a]=i}}))();export{Ge as C,Fr as _,Xn as a,ut as b,It as c,Dt as d,jt as e,Xt as f,je as g,Ee as h,vt as u};

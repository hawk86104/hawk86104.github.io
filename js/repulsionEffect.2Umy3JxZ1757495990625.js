import{df as o}from"./three.QlBabAUP1757495990625.js";import{g as e}from"./gsap.CEma2WSx1757495990625.js";import{A as s,L as t,R as i}from"./@tresjs.BaNUTOlS1757495990625.js";import{d as a,v as n,r,a as l,w as u,G as c,o as p,F as h,j as f,I as m,u as d,f as y,W as g,e as v,h as w,a7 as T,a8 as j}from"./@vue.pEDXJ_3Z1757495990625.js";import{_ as x}from"./@fesjs.CCi3MYpR1757495990625.js";import"./postprocessing.Ct7rpRb51757495990625.js";import"./@vueuse.us9YhBxp1757495990625.js";import"./vue-router.B3z3fWKz1757495990625.js";import"./lodash-es.C7pWAXPe1757495990625.js";import"./pinia.fETTmjgD1757495990625.js";import"./@qlin.q6OWdsQV1757495990625.js";import"./@babel.BPq7uOAK1757495990625.js";import"./@floating-ui.BFjFSAYt1757495990625.js";import"./@juggle.CcBCnTIR1757495990625.js";const M=["position"],_=["position"],z=a({__name:"repulsionEffectSence",setup(a){const w=n(null),T=n(null),j=r({rows:6,cols:14,gutter:2.2}),x=l((()=>({x:(j.cols-1)*j.gutter/2,z:(j.rows-1)*j.gutter/2}))),{seekAll:z}=s();u(T,(()=>{w.value=z(T.value,"type","Mesh"),w.value.forEach((e=>{e.initialRotation={x:"torus"===e.name?o(90):e.rotation.x,y:e.rotation.y,z:"cone"===e.name||"cylinder"===e.name?o(-180):e.rotation.z},e.rotation.x=e.initialRotation.x,e.rotation.y=e.initialRotation.y,e.rotation.z=e.initialRotation.z}))}));const P=({point:s})=>{if(!w.value)return;const{x:t,y:i,z:a}=s;w.value.forEach((s=>{const i=R(t,a,s.position.x,s.position.z),n=L(i,7,0,0,6);e.to(s.position,{y:n<1?1:n,duration:.3});const r=s.position.y/1.2,l=r<1?1:r;e.to(s.scale,{ease:"expo.out",x:l,y:l,z:l,duration:.3}),e.to(s.rotation,{duration:.7,ease:"expo.out",x:L(s.position.y,-1,1,o(270),s.initialRotation.x),z:L(s.position.y,-1,1,o(-90),s.initialRotation.z),y:L(s.position.y,-1,1,o(45),s.initialRotation.y)})}))},R=(o,e,s,t)=>Math.sqrt((o-s)**2+(e-t)**2),L=(o,e,s,t,i)=>(o-e)/(s-e)*(i-t)+t,k=(o,e)=>{const s=Math.floor(3*Math.random());return 0===s?"torus":1===s?"cone":"cylinder"},G=(o,e)=>[(o-1)*j.gutter-x.value.x,0,(e-1)*j.gutter-x.value.z];return(o,e)=>(p(),c(h,null,[f(d(t),{"receive-shadow":"",args:[100,100],"rotation-x":-Math.PI/2,position:[0,0,0],onPointerMove:P},{default:y((()=>e[0]||(e[0]=[m("TresShadowMaterial",{transparent:"",opacity:.3},null,-1)]))),_:1},8,["rotation-x"]),m("TresGroup",{ref_key:"shapesGroupRef",ref:T,name:"shapes"},[(p(!0),c(h,null,g(j.rows,(o=>(p(),c("TresGroup",{key:`row-${o}`},[(p(!0),c(h,null,g(j.cols,(s=>(p(),c("TresGroup",{key:`col-${s}-${o}`},["torus"===k()?(p(),c("TresMesh",{key:0,name:"torus","cast-shadow":"","receive-shadow":"",position:G(s,o)},e[1]||(e[1]=[m("TresTorusGeometry",{args:[.25,.08,30,200]},null,-1),m("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)]),8,M)):"cone"===k()?(p(),v(d(i),{key:1,name:"cone",args:[.3,.5,32],"cast-shadow":"","receive-shadow":"",position:G(s,o)},{default:y((()=>e[2]||(e[2]=[m("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)]))),_:2},1032,["position"])):(p(),c("TresMesh",{key:2,name:"cylinder","cast-shadow":"","receive-shadow":"",position:G(s,o)},e[3]||(e[3]=[m("TresCylinderGeometry",{args:[.3,.3,.2,64]},null,-1),m("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)]),8,_))])))),128))])))),128))],512)],64))}}),P=x(a({__name:"repulsionEffect",setup(o){const e={alpha:!0,shadows:!0,powerPreference:"high-performance",windowSize:!0};return(o,s)=>{const t=w("TresCanvas");return p(),c(h,null,[s[8]||(s[8]=m("div",{class:"repulsion-effect__content"},[m("h2",null,"ICE.GL"),m("h3",null,"图形学社区")],-1)),s[9]||(s[9]=m("div",{class:"repulsion-effect__bg"},null,-1)),f(t,T(j(e)),{default:y((()=>[s[0]||(s[0]=m("TresPerspectiveCamera",{position:[0,65,0],"rotation-x":-1.57,fov:20},null,-1)),s[1]||(s[1]=m("TresAmbientLight",{color:"#ffffff"},null,-1)),s[2]||(s[2]=m("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,-20]},null,-1)),s[3]||(s[3]=m("TresPointLight",{color:"#79573e",intensity:5,decay:0,position:[35,5,0]},null,-1)),s[4]||(s[4]=m("TresPointLight",{color:"#c27439",intensity:5,decay:0,position:[-35,5,0]},null,-1)),s[5]||(s[5]=m("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,20]},null,-1)),s[6]||(s[6]=m("TresSpotLight",{color:"#7bccd7",decay:0,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048,position:[0,25,0]},null,-1)),s[7]||(s[7]=m("TresRectAreaLight",{color:"#341212",decay:0,width:1e3,height:1e3,position:[5,20,50],"look-at":[0,0,0]},null,-1)),f(z)])),_:1},16)],64)}}}),[["__scopeId","data-v-50399b04"]]);export{P as default};

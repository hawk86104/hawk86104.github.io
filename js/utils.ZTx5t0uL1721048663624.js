import"./@fesjs.vljLn8mq1721048663624.js";import{_ as t}from"./jszip.PK6xEuxJ1721048663624.js";import{F as n}from"./file-saver.KxcK_9x-1721048663624.js";import{a5 as e,aG as s}from"./three.HEgnMaTu1721048663624.js";const o=i;!function(t,n){const e=i,s=g();for(;;)try{if(246736===-parseInt(e(366))/1+-parseInt(e(371))/2*(-parseInt(e(346))/3)+-parseInt(e(374))/4*(-parseInt(e(379))/5)+-parseInt(e(293))/6+-parseInt(e(333))/7*(parseInt(e(364))/8)+-parseInt(e(365))/9+-parseInt(e(315))/10*(-parseInt(e(285))/11))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[i(334)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=i,n=new RegExp(t(351)),e=new RegExp(t(357),"i"),s=b(t(353));n[t(347)](s+t(301))&&e[t(347)](s+t(362))?b():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(t,n){const e=g();return(i=function(t,n){return e[t-=278]})(t,n)}async function c(t){const n=o,s=new(e[n(330)]);return new Promise(((e,o)=>{s[n(376)](t,(t=>e(JSON.parse(t))),void 0,(t=>o(t)))}))}async function u(t){const n=new s;return new Promise(((e,s)=>{const a=i;n[a(304)]("blob"),n[a(376)](t,(n=>{const a=new FileReader;a.onloadend=()=>{const n=i,s=function(t){const n=o,e=t[n(299)](".")[n(306)]().toLowerCase();return{jpg:n(290),jpeg:n(290),png:n(295),gif:n(325),bmp:n(361),webp:n(354)}[e]||n(281)}(t),r=a.result.split(",")[1];e(n(323)+s+n(296)+r)},a.onerror=t=>{s(t)},a.readAsDataURL(n)}),void 0,(t=>s(t)))}))}r(void 0,(function(){const t=i;let n;try{n=Function(t(303)+t(350)+");")()}catch(o){n=window}const e=n.console=n[t(284)]||{},s=[t(326),t(310),t(370),t(349),t(309),"table",t(339)];for(let a=0;a<s[t(298)];a++){const n=r[t(320)].prototype[t(358)](r),o=s[a],i=e[o]||n;n.__proto__=r.bind(r),n.toString=i.toString[t(358)](i),e[o]=n}}))(),e[o(312)].enabled=!0;const p=n=>{const s=o,a=new(e[s(330)]);return a.setResponseType(s(375)),new Promise(((e,o)=>{a[s(376)](n,(async n=>{e(await t.loadAsync(n))}),void 0,(t=>o(t)))}))},l=t=>{const n=o,e=t[n(294)](0,15),s=n(340),a=n(345),r=n(292),i=n(317),c=n(319),u=n(327),p=n(363),l=n(343);return s[n(377)](e)||a[n(377)](e)?n(308):r[n(377)](e)||i[n(377)](e)?n(356):c[n(377)](e)||u[n(377)](e)?n(359):p.startsWith(e||l[n(377)](e))?n(332):n(291)},f=e=>{const s=o,a=[];e.scene[s(348)]&&e[s(318)][s(348)][s(368)]((t=>{const n=s;t.type===n(380)&&(a.push({uuid:t.uuid,data:t[n(344)]}),t.data="url:geometries/"+t[n(283)]+n(335))}));const r=[];e[s(318)][s(289)]&&e[s(318)][s(289)][s(368)]((t=>{const n=s;t[n(329)]&&(r[n(342)]({uuid:t.uuid,url:t[n(329)]}),t[n(329)][n(337)]?t.url=n(367)+t[n(283)]+"."+t[n(329)][n(337)]+n(335):t[n(329)]="url:images/"+t[n(283)]+"."+l(t[n(329)]))}));const i=new t;if(a[s(298)]){const t=i.folder(s(348));a.forEach((n=>{const e=s;t[e(278)](n[e(283)]+".json",JSON.stringify(n[e(344)]))}))}if(r[s(298)]){const t=i[s(324)](s(289));r.forEach((n=>{const e=s;n[e(329)].type?t.file(n[e(283)]+"."+n[e(329)][e(337)]+".json",JSON.stringify(n.url)):t[e(278)](n[e(283)]+"."+l(n[e(329)]),n[e(329)].split(e(296))[e(306)](),{base64:!0})}))}const c=JSON[s(378)](e);return i.file("app.json",c),i[s(331)]({type:s(375)})[s(369)]((t=>{const e=s;n.saveAs(t,e(297))}))};function g(){const t=["stringify","540OsDGhe","BufferGeometry","file","loadAsync","非标准文件：不存在 app.json","application/octet-stream","action","uuid","console","9052879WQJLlQ","string","base64","app.json","images","image/jpeg","Unknown","data:image/png;base64,","44376YeqOuT","substring","image/png",";base64,","config.zip","length","split","result","chain","debu","return (function() ","setResponseType","catch","pop","name","JPEG","exception","warn","stateObject","Cache","while (true) {}","url:","10HCDurD","async","data:image/PNG;base64,","scene","data:image/gif;base64,","constructor","slice","counter","data:","folder","image/gif","log","data:image/GIF;base64,","parse","url","FileLoader","generateAsync","WEBP","1730932bFKNsF","apply",".json","get","type","message","trace","data:image/jpeg;base64,","files","push","data:image/WEBP;base64,","data","data:image/JPEG;base64,","3duTggF","test","geometries","error",'{}.constructor("return this")( )',"function *\\( *\\)","toUpperCase","init","image/webp","endsWith","PNG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","GIF","data:image/","image/bmp","input","data:image/webp;base64,","8hzkJkY","2855691QEyvhX","157511xgmIkW","url:images/","forEach","then","info","31490PnqTBW","readAsDataURL","gger","5092odHMse","blob","load","startsWith"];return(g=function(){return t})()}const d=(t,n,e)=>{t[o(348)]<=0&&t.images<=0&&e(n)},m=(n,e)=>{const s=o;let a=null;return t[s(279)](n)[s(369)]((t=>{const n=s;t[n(341)][n(288)]?t[n(341)][n(288)][n(316)](n(286))[n(369)]((s=>{var r,i;const c=n;a=JSON[c(328)](s);const u=(t=>{var n,e;const s=o,a={geometries:0,images:0};return null==(n=t[s(318)][s(348)])||n[s(368)]((t=>{const n=s;t.data[n(377)](n(314))&&a.geometries++})),null==(e=t.scene[s(289)])||e[s(368)]((t=>{const n=s;t.url[n(377)](n(314))&&a[n(289)]++})),a})(a);d(u,a,e),null==(r=a[c(318)][c(348)])||r.forEach((n=>{const s=c;n.data[s(377)]("url:")&&t[s(341)][n.data[s(321)](4)][s(316)](s(286))[s(369)]((t=>{const o=s;n.data=JSON[o(328)](t),u.geometries--,d(u,a,e)}))})),null==(i=a[c(318)][c(289)])||i[c(368)]((n=>{const s=c;if(n[s(329)][s(377)](s(314))){const o=n.url[s(321)](4);o[s(355)](s(335))?t.files[o].async(s(286))[s(369)]((t=>{const o=s;n.url=JSON[o(328)](t),u[o(289)]--,d(u,a,e)})):t.files[o][s(316)](s(287)).then((t=>{const r=s,i=o[r(299)]("."),c=i[i[r(298)]-1][r(352)]();n[r(329)]=r(360)+c+r(296)+t,u[r(289)]--,d(u,a,e)}))}}))})):console[n(349)](n(280))}),(t=>{const e=s;console.error(n[e(307)]+": "+t[e(338)])})),a};function b(t){function n(t){const e=i;if(typeof t===e(286))return function(t){}[e(320)](e(313))[e(334)](e(322));1!==(""+t/t)[e(298)]||t%20==0?function(){return!0}[e(320)]("debu"+e(373)).call(e(282)):function(){return!1}[e(320)](e(302)+"gger")[e(334)](e(311)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,u as b,f as e,l as g,m as i,c as l};

import{F as e,_ as s}from"./@tresjs.BCHtwiaC1763540743861.js";import{A as t}from"./3d-tiles-renderer.C21jgnK51763540743861.js";import{a as o,b as a}from"./utils.3DEpDbfU1763540743861.js";import{d as r,a as i,w as l,H as n,o as u,J as p,u as d}from"./@vue.Co_gxueH1763540743861.js";const m=["object"],R=r({__name:"obliquePhoto",props:{tilesUrl:{default:"./plugins/geokit/tiles/tileset.json"},isRotation:{type:Boolean,default:!1},isRranslation:{type:Boolean,default:!0}},setup(r,{expose:R}){const f=r,v=i(null),{camera:c,renderer:g,sizes:j}=e(),_=(e,s,t)=>{e.setCamera(s),e.setResolutionFromRenderer(s,t)},b=()=>{let e=new t(f.tilesUrl);return e.fetchOptions.mode="cors",e.addEventListener("load-tile-set",()=>{a(e,f.isRotation,f.isRranslation)}),e.addEventListener("dispose-model",({scene:e})=>{e.traverse(e=>{e.material&&e.material.dispose()})}),_(e,c.value,g),e};let y=b();l(()=>[f.isRotation,f.isRranslation],()=>{y.group&&o(y.group,f.isRotation,f.isRranslation)}),l(c,()=>{c.value&&_(y,c.value,g)},{immediate:!0});const{onBeforeRender:U}=s();return U(()=>{c.value&&j.width.value&&y.update&&(c.value.updateMatrixWorld(),y.update())}),l(()=>f.tilesUrl,e=>{e!==y.rootURL&&(y.dispose(),y=b())}),R({group:v,tilesGroup:y.group}),(e,s)=>(u(),n("TresGroup",{ref_key:"groupRef",ref:v},[p("primitive",{object:d(y).group},null,8,m)],512))}});export{R as _};

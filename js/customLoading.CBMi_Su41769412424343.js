import{importShared as e}from"./3d-tiles-renderer.DFcJBJdg1769412424343.js";import{BatchedRenderer as t,ConstantColor as r,QuarksLoader as o}from"./three.quarks.esm.Bn1rVFLV1769412424343.js";import{instance as s}from"./Resource._LsWhyZZ1769412424343.js";import{loading$2 as a}from"./generalFont.vue_vue_type_script_setup_true_lang.BeKB50bQ1769412424343.js";import"./default.vue_vue_type_script_setup_true_lang.WYCnXOAn1769412424343.js";import"./three-mesh-ui.module.UtCFVjUK1769412424343.js";import"./domPanel.vue_vue_type_style_index_0_lang.F9Oi-ewl1769412424343.js";import{useLoop as i,OrbitControls_default as n}from"./index.B2-FHinZ1769412424343.js";import{Pane as l}from"./tweakpane.BbuIEN141769412424343.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.CwDqI6zj1769412424343.js";import{_sfc_main as u}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.BHrna41s1769412424343.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.BzhG7e871769412424343.js";import"./dynamicRotatingBase.vue_vue_type_script_setup_true_lang.CxcLtUw51769412424343.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.k7LdwDAN1769412424343.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.QcVT1Qdr1769412424343.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.BULRrn6A1769412424343.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.BOqSHg2s1769412424343.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.CKU1EoHi1769412424343.js";import"./reflectorRoundedBox.vue_vue_type_script_setup_true_lang.BsOU9_T71769412424343.js";import"./particleBase.vue_vue_type_script_setup_true_lang.MqLQ8tq71769412424343.js";import"./rippleFloor.vue_vue_type_script_setup_true_lang.DgUeBLPg1769412424343.js";const{defineComponent:p}=await e("vue"),{unref:_,createElementVNode:c,Fragment:m,openBlock:d,createElementBlock:v}=await e("vue"),f=["object"],g=["object","position","scale","rotation"],h=await e("three"),{watch:y}=await e("vue"),j=p({__name:"cartoonMagic",props:{color:{default:"#00ffff"},position:{default:[0,0,0]},scale:{default:1},rotation:{default:[0,0,0]}},setup(e){const o=e,a=e=>{const t=new h.Color(o.color),s=new h.Vector4(t.r,t.g,t.b,e);return new r(s)},n=new t,l=new h.Group,u=s.getItem("CartoonMagicZone.json").clone(!0);u.traverse(e=>{if("ParticleEmitter"===e.type){"BasicZoneRedEmitter"===e.name&&e.rotation.set(Math.PI/2,0,0);const t=e.system;t.startColor=a(t.startColor.color.w),n.addSystem(t)}}),"ParticleEmitter"===u.type&&n.addSystem(u.system),l.add(u);const{onBeforeRender:p}=i();return p(({delta:e})=>{n.update(e)}),y(()=>[o.color],([e])=>{n.systemToBatchIndex.forEach((e,t)=>{t.startColor=a(t.startColor.color.w)})}),(e,t)=>(d(),v(m,null,[c("primitive",{object:_(l)},null,8,f),c("primitive",{object:_(n),position:e.position,scale:e.scale,rotation:e.rotation},null,8,g)],64))}}),{defineComponent:w}=await e("vue"),{unref:M,createVNode:B,createElementVNode:C,mergeProps:k,openBlock:T,createBlock:F,createCommentVNode:x,Suspense:E,withCtx:b,resolveComponent:P,Fragment:G,createElementBlock:R}=await e("vue"),{reactive:S}=await e("vue"),V=w({__name:"customLoading",setup(e){const t=S({reflectivity:.1,showGridHelper:!0,scale:1}),r=S({color:"#ffffff",scale:1});s.loaderMapping.QuarksLoader=o,s.loadResources([{functionName:"QuarksLoader",url:"./plugins/floor/json/CartoonMagicZone.json"}]);const i=new l;return i.addBinding(r,"color",{label:"颜色"}),i.addBinding(r,"scale",{label:"大小",min:.1,max:3,step:.1}),(e,o)=>{const i=P("TresCanvas");return T(),R(G,null,[B(M(a),{useResourceManager:""}),B(i,{clearColor:"#201919","window-size":""},{default:b(()=>[o[0]||(o[0]=C("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),B(M(n),{enableDamping:""}),M(s).hasAllFinished.value?(T(),F(j,k({key:0},r,{position:[0,0,0]}),null,16)):x("",!0),M(s).hasAllFinished.value?(T(),F(j,{key:1,color:"red",position:[3,0,0],rotation:[-Math.PI,1,45]},null,8,["rotation"])):x("",!0),M(s).hasAllFinished.value?(T(),F(j,{key:2,color:"green",position:[-2,0,0]})):x("",!0),o[1]||(o[1]=C("TresMesh",{position:[3,0,0]},[C("TresSphereGeometry",{args:[1,32,32]}),C("TresMeshBasicMaterial",{color:"red"})],-1)),o[2]||(o[2]=C("TresMesh",{position:[-2,0,0]},[C("TresSphereGeometry",{args:[1,32,32]}),C("TresMeshBasicMaterial",{color:"green"})],-1)),o[3]||(o[3]=C("TresMesh",{position:[0,0,0]},[C("TresSphereGeometry",{args:[1,32,32]}),C("TresMeshBasicMaterial",{color:"white"})],-1)),(T(),F(E,null,{default:b(()=>[B(M(u),k({position:[0,-.5,0]},t),null,16)]),_:1}))]),_:1})],64)}}});export{V as default};

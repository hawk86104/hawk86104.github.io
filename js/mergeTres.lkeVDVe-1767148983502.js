import{importShared as l}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{AMapLoader as h}from"./index.BpfVWUMp1767148983502.js";import{defineStore as S,_export_sfc as w,Fs as C}from"./index.DTe2qqjO1767148983502.js";const{shallowRef:m}=await l("vue"),f=S("mapStore",()=>{const n=m(null),o=m(null),e=m(null);return{aMap:n,mapHandle:o,cameraState:e}}),{defineComponent:g}=await l("vue"),{openBlock:y,createElementBlock:M}=await l("vue"),k={id:"mapContainer"},{onMounted:x}=await l("vue"),$=g({__name:"mapContainer",props:{center:{default:[0,0]},zoom:{default:14},pitch:{default:50},mapStyle:{default:"normal"}},setup(n){const o=n,e=f();let r=null;return x(async()=>{await h.load({key:"0c7222955570f1b434c4adfcc1e955e8",version:"2.0"}).then(t=>{r=new t.Map("mapContainer",{center:o.center,zooms:[1,20],viewMode:"3D",zoom:o.zoom,pitch:o.pitch,mapStyle:"amap://styles/"+o.mapStyle}),r.on("click",a=>{const c=`您在 [ ${a.lnglat.getLng()},${a.lnglat.getLat()} ] 的位置单击了地图！`;console.log(c)}),e.$patch({aMap:t}),e.$patch({mapHandle:r})}).catch(t=>{console.log(t)})}),(t,a)=>(y(),M("div",k))}}),H=w($,[["__scopeId","data-v-e1a7e2c4"]]),{watchEffect:z}=await l("vue"),A={__name:"mergeTres",props:{center:{default:[0,0]}},setup(n){const o=n,{camera:e,scene:r,renderer:t}=C(),a=f();let c=null,u=null;return z(()=>{a.aMap&&(c=a.mapHandle.customCoords,u=new a.aMap.CustomLayer(t.domElement,{zIndex:10,render:()=>{t.resetState(),c.setCenter(o.center);const{near:s,far:p,fov:i,up:v,lookAt:_,position:d}=c.getCameraParams();e.value.near=s,e.value.far=p,e.value.fov=i,a.$patch({cameraState:{near:s,far:p,fov:i,position:d}}),e.value.position.set(...d),e.value.up.set(...v),e.value.lookAt(..._),e.value.updateProjectionMatrix(),t.render(r.value,e.value),t.resetState()},alwaysRender:!0}),a.mapHandle.add(u))}),(s,p)=>null}};export{A as _sfc_main,H as mapContainer,f as useMapStore};

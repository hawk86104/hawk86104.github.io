import{e as o,k as n,a as e}from"./@tresjs.oHLVlBVa1753059716714.js";import{n as r,ae as W,C as a,p as c,bb as t,aa as i,a3 as d,as as s,az as l,cD as m,cE as u,cF as f}from"./three.DR_5uK8e1753059716714.js";import{z as k}from"./three-custom-shader-material.1_PCtt5y1753059716714.js";import{r as S,i as h,s as v}from"./utils.DBbFetme1753059716714.js";import{b as p,a as C}from"./buildingsCustomShaderMaterial.DyBo--wu1753059716714.js";import{d as g,aa as O,b as P,G as R,o as y,e as x,j as b,a5 as Q,f as w,I as N,u as B,F as G,h as V}from"./@vue.DwSifnVs1753059716714.js";import{_ as J}from"./roadLight.vue_vue_type_script_setup_true_lang.MH7a0vLb1753059716714.js";import"./postprocessing.BrgFZ9pj1753059716714.js";import"./@vueuse.mXirru381753059716714.js";import"./@fesjs.CV3tl4s01753059716714.js";import"./vue-router.Tg4SAQ0L1753059716714.js";import"./lodash-es.C7pWAXPe1753059716714.js";import"./@qlin.q6OWdsQV1753059716714.js";import"./pinia.DQkQ1TR81753059716714.js";import"./@babel.BPq7uOAK1753059716714.js";import"./@floating-ui.BFjFSAYt1753059716714.js";import"./@juggle.CcBCnTIR1753059716714.js";import"./three-mesh-bvh.Cn1Xk8lq1753059716714.js";function j(){var o=["nb7cIWOOpmoWW7DGybfOoW","tCkfrGpdIWBdOmoBW6KvWQhcRG","W7ZdPCoShqO","B8kIFSoKW53dPmoMWQCUW5ZcIr7cIq","bdFdOeZcICo/ruvgW4HdsCog","W4ZcNfVdIa","WPycpmkm","WRddJmkIWO7dMxbaFaxcQelcQWlcJfSS","raigW43dPG","deb1WOLLja","W4rQE8kow8kvWPHkWPVcQSo6ESkXW5zjWPGEemkX","WOBcKCkRmKaYW6VcU8kHzYjqW6a","WQycWQywW4C0WO7dUgKpvmkqWRNcQh3cLmk1bW","WQuGkmooEtRcUmk0zq","aK0UWPBcRW0PWQ8","sIFcHmovFa","WRhdJmkKWOpdMq","WPuQWOFdKSkerCkNWQdcOtdcKmk9WPa","WQSooXr+","BCk1A8oJW5VdLCoVWPu3","WQBcUCovh8kH","qaSDW6VdOwneWP8Scmozmbr8","WO3dJmoyrSoEbSkMWQPCW4BdJmkIpGxdK0X4bmoA","cSkxWRtdJSo2","W6ldRSkjx8o3F8oPW5zsWQlcUCopgc4","W7ddPSkGnfy","W5BdPXyuW4G","cmokyxesWPz5W6tcRCkhza","W7XbW5NdRuFcMW","gdxcQ8ocj8oHWQNcHmk6nmkAW5lcH8o9AG","WPpcHSkVm00/","WOr3y8kXBmkJW6O","W4hdSHqmW5r+rICFohldLG","CNVcKxRcTG","pmoKW5BdJG","zSoGWRaL","W4mdp8kQWOhdU8oK","WPRcPCoCWOddIcBcGrqCDCkejwbJ","WOaeaCkCWPZdN8oqxa","BuNcQLBcPG","WPtcJmkDnvW+W6NcNq","WORcS8kNrSoSWPtdJSoZCvn0W64","WO9ZWPtdKh5qW5dcVmksWQ/cTW","fxTEbmoHW5yjmSocamk1","w8klWOScW77cNWO","WOJcVSoqWOi","wCkuWPuDW6G","WPBcRuNcMXRcVmk6W4dcOa","WOZdHGRcMwBdGMWjoZldS34","tqCMW5OMExqzW5RdPYbDaW","W73cVCkNW7W","pmoHW53dHmkDnSoFWQiz","WPlcGCovbCkR","raehW53dOM5r","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","AfhcPqVdKmk8hLzR","W4nCy8oFW5/cGmkoBvddQ2/cV8kr","W6LwW53dReRcLSk5W5axEmovWOSJW4m","ucRdMSoAAItcUCoIWOVcHLNcUSo+EmoXWRNcSmkiW57dOCkwwmooW4WobCksxYvUW6Cc","FCk/smoJW4hdQmoKWOe","WQlcNwZcPmoE","WR0clG5kWOddHJZcGq","W4blsSosnSoLAG","zs4cc8o+Ax1gktCVWPm/WQmTW6O","W7XnW5ZdUG","tHSmW6/dOq","FxaAWRy","W5BcI8k6W6VdOsu+E8ox","WR7dO8o7WQ7cV2DHCSoUWQyMW6lcQq","W73cOu/dGWy","W7JdSmkrrmoVymoWW48uW6ZdISko","WQa8lSoCEtZcRmk3","W53cSNdcTCkk","WQBcQmonlSkH","WQNcLmo3WPhdQq","W6btWOJcGGPVW4NcUIO","WRBdNdBdHmoxhCkRWQpcLZNcLCoDAfm","W5ddI8kdjhxcG8kBWOu","WOjntSo2nSoAxCoS","W4JdSmo2rSkq","a00KWPVcOa","WOu+WR0RW4tcVsDAjwZdRCkglG","W4dcSfxcPtFcSmkn","WPpcGmkVl0i+W6NcN8kFys1B","WP7cRvFcIaBcGa","z1/cM2ZcQq","WOnmDmoKk8obxSo4","gmkcWQxdKmoSpW","WPdcMMxcTCorq8kpFmoXCKldR8oBrq","W5rMyCkF","W6PCW5VdULtcH8k8W7aj","F8kXD8oIW5y","WQeZjCowCW","WOZcJmkP","WRyhWPxcJqT3W6hcVW","a04LWOVcVXyYWQVdSIRdHa","h1SqWPPar8knWR3dUbjO","W4/dOCkmW5xcKNlcVJugECkSea","rH4zW4ldTa","WOuXW7j4WPBdKff2","WPXWymotna","zCoUWPe/u8o6w0S"];return(j=function(){return o})()}!function(){var o=j();function n(o,n,e,r,W){return L(n- -801,e)}function e(o,n,e,r,W){return L(n- -538,r)}function r(o,n,e,r,W){return L(r- -425,o)}function W(o,n,e,r,W){return L(e-505,W)}for(;;)try{if(699829===parseInt(n(0,-233,"m%cl"))/1*(parseInt(L(390- -112,"z$gd"))/2)+-parseInt(W(0,0,1095,0,"%kXo"))/3+parseInt(W(0,0,1019,0,"Quzr"))/4+-parseInt(e(0,-19,0,"!Bcf"))/5*(-parseInt(e(0,32,0,"L4Yw"))/6)+parseInt(r("rK7u",0,0,108))/7*(-parseInt(r("6n48",0,0,102))/8)+-parseInt(e(0,14,0,"L4Yw"))/9+parseInt(n(0,-254,"gp(6"))/10)break;o.push(o.shift())}catch(a){o.push(o.shift())}}();var q,M=(q=!0,function(o,n){function e(o,n,e,r,W){return L(r- -560,o)}if("YXvDn"!==e("gp(6",0,0,-17)){var r=_0x364b6c?function(){if(_0x45c4b8){var o=_0x44a43e[(n="msjb",r=1196,e(n,0,0,r-1160))](_0x1d4828,arguments);return _0x5c1254=null,o}var n,r}:function(){};return _0x2882ca=!1,r}var W=q?function(){function r(o,n,r,W,a){return e(r,0,0,o-291)}function W(o,n,r,W,a){return e(o,0,0,n-1501)}function a(o,n,r,W,a){return e(n,0,0,W- -366)}if(r(241,0,"$]d%")!==W("rK7u",1512)){if(n){if(W("b(Ld",1464)!==r(235,0,"$]d%")){var c=n[a(0,"J(ye",0,-357)](o,arguments);return n=null,c}if(_0x111c8b){var t=_0x8d8e5f[a(0,"bJY!",0,-338)](_0x2497be,arguments);return _0x3c8880=null,t}}}else this[(i="XarS",d=-146,e(i,0,0,d- -134))][W("m%cl",1457)][r(293,0,"eMc0")]=this[a(0,"#*RE",0,-337)].getElapsedTime();var i,d}:function(){};return q=!1,W})(void 0,(function(){function o(o,n,e,r,W){return L(n- -745,o)}function n(o,n,e,r,W){return L(o- -277,e)}return M[n(280,0,"rK7u")]()[n(281,0,"msjb")]("(((.+)+)+)+$")[o("6n48",-236)]()[o("JRZ$",-179)](M)[(e=640,r="ai4M",L(e-139,r))](L(1446-934,"cito"));var e,r}));function L(o,n){var e=j();return L=function(n,r){var W=e[n-=500];if(void 0===L.NfZFfq){var a=function(o){for(var n,e,r="",W="",c=r+a,t=0,i=0;e=o.charAt(i++);~e&&(n=t%4?64*n+e:e,t++%4)?r+=c.charCodeAt(i+10)-10!=0?String.fromCharCode(255&n>>(-2*t&6)):t:0)e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(e);for(var d=0,s=r.length;d<s;d++)W+="%"+("00"+r.charCodeAt(d).toString(16)).slice(-2);return decodeURIComponent(W)};L.GdkNSL=function(o,n){var e,r,W=[],c=0,t="";for(o=a(o),r=0;r<256;r++)W[r]=r;for(r=0;r<256;r++)c=(c+W[r]+n.charCodeAt(r%n.length))%256,e=W[r],W[r]=W[c],W[c]=e;r=0,c=0;for(var i=0;i<o.length;i++)c=(c+W[r=(r+1)%256])%256,e=W[r],W[r]=W[c],W[c]=e,t+=String.fromCharCode(o.charCodeAt(i)^W[(W[r]+W[c])%256]);return t},o=arguments,L.NfZFfq=!0}var c=n+e[0],t=o[c];if(t)W=t;else{if(void 0===L.JjzZky){var i=function(o){this.BomDyi=o,this.MUXSDc=[1,0,0],this.OVyqWA=function(){return"newState"},this.NUBSWH="\\w+ *\\(\\) *{\\w+ *",this.GlmTIw="['|\"].+['|\"];? *}"};i.prototype.AZgkXs=function(){var o=new RegExp(this.NUBSWH+this.GlmTIw).test(this.OVyqWA.toString())?--this.MUXSDc[1]:--this.MUXSDc[0];return this.DRSnNj(o)},i.prototype.DRSnNj=function(o){return Boolean(~o)?this.sqkWdw(this.BomDyi):o},i.prototype.sqkWdw=function(o){for(var n=0,e=this.MUXSDc.length;n<e;n++)this.MUXSDc.push(Math.round(Math.random())),e=this.MUXSDc.length;return o(this.MUXSDc[0])},new i(L).AZgkXs(),L.JjzZky=!0}W=L.GdkNSL(W,r),o[c]=W}return W},L(o,n)}function H(o,n,e,r,W){return L(e- -97,r)}M();var K,z=(K=!0,function(o,n){function e(o,n,e,r,W){return L(e- -130,W)}if("iueAl"!==e(0,0,406,0,"J(ye")){var r=_0x471fa2?function(){if(_0x42a361){var o=_0x3ed19f.apply(_0x427910,arguments);return _0x39c796=null,o}}:function(){};return _0x584898=!1,r}var W=K?function(){function r(o,n,r,W,a){return e(0,0,n- -591,0,W)}function W(o,n,r,W,a){return e(0,0,r-136,0,n)}function a(o,n,r,W,a){return e(0,0,a-801,0,r)}function c(o,n,r,W,a){return e(0,0,a-201,0,r)}if(r(0,-176,0,"m%cl")===a(0,0,"XarS",0,1269)){if(n){if(r(0,-181,0,"!Bcf")!==a(0,0,"phr!",0,1202)){var t=n[c(0,0,"$]d%",0,627)](o,arguments);return n=null,t}return _0x465a2e[a(0,0,"ai4M",0,1182)]().search(a(0,0,"b(Ld",0,1212))[(d=973,s="iJd5",e(0,0,d-531,0,s))]().constructor(_0x10de39)[W(0,"E$gR",607)]("(((.+)+)+)+$")}}else{var i=_0x1a271f(c(0,0,"Lsgo",0,666)+W(0,"bJY!",535)+");");_0x2c5ebc=i()}var d,s}:function(){};return K=!1,W});z(void 0,(function(){var o;function n(o,n,e,r,W){return L(r-200,n)}function e(o,n,e,r,W){return L(o-816,W)}try{if("vptDe"!==t(717,713,720,"b(Ld",667)){var r=_0x4ba9f9[i(1050,"B1Mv",1052,1029,1024)](_0x404e7c,arguments);return _0x4c607c=null,r}o=Function(t(756,732,718,"z$gd",803)+'{}.constructor("return this")( ));')()}catch(S){if("eiaLU"!==d(-343,"!k^f",-328,-368,-355)){var W=_0x3ee480[e(1329,0,0,0,"pEr^")].prototype.bind(_0x50c48c),a=_0x438eda[_0x3c9b39],c=_0x4eaaff[a]||W;W[t(699,683,650,"gjc3")]=_0x7dc5db.bind(_0x5d0e33),W[n(0,"eMc0",0,730)]=c[e(1388,0,0,0,"iJd5")][e(1321,0,0,0,"2ZTR")](c),_0x3d3b79[a]=W}else o=window}function t(o,n,e,r,W){return L(o-173,r)}function i(o,n,e,r,W){return L(o-451,n)}function d(o,n,e,r,W){return L(W- -946,n)}for(var s=o[e(1331,0,0,0,"9DAR")]=o[t(697,0,0,"J(ye")]||{},l=[e(1380,0,0,0,"ai4M"),t(679,0,0,"iJd5"),"info",i(1026,"kGy*"),e(1377,0,0,0,"E$gR"),e(1379,0,0,0,"*Lqv"),d(0,"T%)h",0,0,-396)],m=0;m<l[t(728,0,0,"IGK(")];m++){var u=z.constructor[n(0,"*Lqv",0,786)][d(0,"z$gd",0,0,-386)](z),f=l[m],k=s[f]||u;u[t(711,0,0,"D3GR")]=z.bind(z),u[d(0,"ai4M",0,0,-435)]=k.toString[n(0,"6n48",0,779)](k),s[f]=u}}))();class T extends r{constructor(o={}){function n(o,n,e,r,W){return L(o- -337,n)}function e(o,n,e,r,W){return L(o- -985,e)}function r(o,n,e,r,W){return L(n- -229,r)}function d(o,n,e,r,W){return L(r- -451,e)}super(),this[e(-482,-448,"B1Mv")]=e(-460,-434,"JMaN"),this[n(171,"m%cl")]=" \n      varying vec2 vUv;\n      varying vec3 vPositionW;\n      varying vec4 vPos;\n      varying vec3 vNormalW;\n      \n      uniform float time;\n      uniform float fresnelOpacity;\n      uniform float scanlineSize;\n      uniform float fresnelAmount;\n      uniform float signalSpeed;\n      uniform float hologramBrightness;\n      uniform float hologramOpacity;\n      uniform bool blinkFresnelOnly;\n      uniform bool enableBlinking;\n      uniform vec3 hologramColor;\n\n      float flicker( float amt, float time ) {return clamp( fract( cos( time ) * 43758.5453123 ), amt, 1.0 );}\n      float random(in float a, in float b) { return fract((cos(dot(vec2(a,b) ,vec2(12.9898,78.233))) * 43758.5453)); }\n\n      void main() {\n        vec2 vCoords = vPos.xy;\n        vCoords /= vPos.w;\n        vCoords = vCoords * 0.5 + 0.5;\n        vec2 myUV = fract( vCoords );\n\n        // Defines hologram main color\n        vec4 hologramColor = vec4(hologramColor, mix(hologramBrightness, vUv.y, 0.5));\n\n        // Add scanlines\n        float scanlines = 10.;\n        scanlines += 20. * sin(time *signalSpeed * 20.8 - myUV.y * 60. * scanlineSize);\n        scanlines *= smoothstep(1.3 * cos(time *signalSpeed + myUV.y * scanlineSize), 0.78, 0.9);\n        scanlines *= max(0.25, sin(time *signalSpeed) * 1.0);        \n        \n        // Scanlines offsets\n        float r = random(vUv.x, vUv.y);\n        float g = random(vUv.y * 20.2, \tvUv.y * .2);\n        float b = random(vUv.y * .9, \tvUv.y * .2);\n\n        // Scanline composition\n        hologramColor += vec4(r*scanlines, b*scanlines, r, 1.0) / 84.;\n        vec4 scanlineMix = mix(vec4(0.0), hologramColor, hologramColor.a);\n\n        // Calculates fresnel\n        vec3 viewDirectionW = normalize(cameraPosition - vPositionW);\n        float fresnelEffect = dot(viewDirectionW, vNormalW) * (1.6 - fresnelOpacity/2.);\n        fresnelEffect = clamp(fresnelAmount - fresnelEffect, 0., fresnelOpacity);\n\n        // Blinkin effect\n        //Suggested by Octano - https://x.com/OtanoDesign?s=20\n        float blinkValue = enableBlinking ? 0.6 - signalSpeed : 1.0;\n        float blink = flicker(blinkValue, time * signalSpeed * .02);\n    \n        // Final shader composition\n        vec3 finalColor;\n\n        if(blinkFresnelOnly){\n          // finalColor = vec3(1.0,1.0,0);\n          finalColor = scanlineMix.rgb + fresnelEffect * blink;\n        }else{\n          finalColor = scanlineMix.rgb * blink + fresnelEffect;\n        }\n\n        gl_FragColor = vec4( finalColor, hologramOpacity);\n\n      }",this[e(-436,-388,"rK7u")]={time:new W(0),fresnelOpacity:new W(void 0!==o[d(107,50,"E$gR",77)]?o.fresnelOpacity:1),fresnelAmount:new W(void 0!==o[n(247,"ai4M")]?o[r(322,347,340,"eMc0")]:.45),scanlineSize:new W(void 0!==o[n(217,"ai4M")]?o.scanlineSize:8),hologramBrightness:new W(void 0!==o[n(248,"MQxF")]?o.hologramBrightness:1),signalSpeed:new W(void 0!==o[r(359,338,318,"i[BM")]?o.signalSpeed:1),hologramColor:new W(void 0!==o.hologramColor?new a(o[n(236,"g#Wb")]):new a("#00d5ff")),enableBlinking:new W(void 0===o[n(222,"phr!")]||o.enableBlinking),blinkFresnelOnly:new W(void 0===o[r(262,305,342,"scK9")]||o[d(158,103,"#*RE",129)]),hologramOpacity:new W(void 0!==o.hologramOpacity?o[r(232,271,227,"v0Nn")]:1)},this[r(329,352,386,"J(ye")]=new c,this[e(-453,0,"!k^f")](o),this[r(378,363,390,"eMc0")]=void 0!==o.depthTest&&o[r(262,289,267,"IGK(")],this[e(-398,0,"JRZ$")]=void 0!==o[e(-463,0,"2ZTR")]?o[n(209,"MEWr")]:t,this[e(-385,0,"lSQ]")]=!0,this[n(241,"!Bcf")]=void 0!==o[e(-450,0,"E$gR")]?o[e(-448,0,")cc7")]:i}[H(0,0,485,"PiOG")](){function o(o,n,e,r,W){return H(0,0,o- -771,n)}var n,e,r,W;this[o(-326,"*Lqv")][(r=321,W="D3GR",H(0,0,r- -103,W))][o(-275,"b(Ld")]=this[(n="JRZ$",e=1539,H(0,0,e-1085,n))][o(-274,"J(ye")]()}}const Z=g({__name:"importantBuildings",props:{group:{}},setup(n){const e=n,r=0,W=0,c=15,i=1.3,s="#e05b0f",l=new T({blendMode:t,hologramBrightness:2.5,side:d});l.uniforms.fresnelAmount.value=r,l.uniforms.scanlineSize.value=c,l.uniforms.signalSpeed.value=i,l.uniforms.fresnelOpacity.value=W,l.uniforms.hologramColor.value=new a(s),l.uniforms.enableBlinking.value=!1,l.depthTest=!0;let m,u,f=null;(()=>{const o=e.group.getObjectByName("02-huanqiujinrongzhongxin_huanqiujinrongzhongxin_0");o.name="环球金融中心",o.material.dispose(),S(o.geometry),o.material=l,m=e.group.getObjectByName("01-shanghaizhongxindasha_shanghaizhongxindasha_0"),m.name="上海中心",m.material.dispose(),S(m.geometry),m.material=l.clone(),m.material.uniforms.hologramColor.value=new a("#006cf9"),m.material.uniforms.fresnelAmount.value=1,m.material.uniforms.scanlineSize.value=2.1,m.material.uniforms.signalSpeed.value=.4,u=e.group.getObjectByName("03-jinmaodasha_jjinmaodasha_0"),u.name="金茂大厦",u.material.dispose(),S(u.geometry),u.material=l.clone(),u.material.uniforms.hologramColor.value=new a("#5e0fe0"),u.material.uniforms.scanlineSize.value=15,u.material.uniforms.signalSpeed.value=.18,f=e.group.getObjectByName("04-dongfangmingzhu_dongfangmingzhu_0"),f.name="东方明珠塔",f.material.dispose(),S(f.geometry),f.material=l.clone(),f.material.uniforms.scanlineSize.value=5,f.material.uniforms.signalSpeed.value=1.3,f.material.uniforms.hologramColor.value=new a("#e00f0f"),f.material.uniforms.fresnelOpacity.value=.1})();const{onLoop:k}=o();return k((()=>{l.update(),m.material.update(),u.material.update(),f.material.update()})),(o,n)=>null}}),F=["object"],I=g({__name:"buildingsMode",async setup(e){let r,W;h();const{scene:c}=([r,W]=O((()=>n("./plugins/digitalCity/model/shanghaiDraco/shanghaiDraco.gltf",{draco:!0,decoderPath:"./draco/"}))),r=await r,W(),r),t=c.clone(),i=P(0);t.traverse((async o=>{if(o.isMesh&&(-1!==o.name.indexOf("Shanghai")||-1!==o.name.indexOf("Object")))if(-1!==o.name.indexOf("Floor"));else if(-1!==o.name.indexOf("River")){const n=await v(o);n.position.set(0,0,1800),o.add(n)}else(o=>{const{geometry:n}=o;n.computeBoundingBox(),n.computeBoundingSphere(),n.computeBoundsTree();const{max:e,min:r}=n.boundingBox,W=new k({baseMaterial:s,vertexShader:C,fragmentShader:p,silent:!0,uniforms:{uMax:{value:e},uMin:{value:r},uBorderWidth:{value:.006},uCircleTime:{value:3},uColor:{value:new a("#005c58")},uOpacity:{value:.8},uLightColor:{value:new a("#990")},uTopColor:{value:new a("#888800")},uTime:i,uGradient:{value:!0}},depthWrite:!0,depthTest:!0,transparent:!0,side:d});o.material.dispose(),o.material=W})(o),(o=>{const n=new l(o.geometry,1e3);let e=(new m).fromEdgesGeometry(n);e.computeBoundsTree();let r=new u({color:new a("#000"),linewidth:.8,opacity:.6,transparent:!0,depthWrite:!0,depthTest:!0});r.resolution.set(window.innerWidth,window.innerHeight),o.add(new f(e,r))})(o)}));const{onLoop:S}=o();return S((({delta:o})=>{i.value+=o})),(o,n)=>(y(),R(G,null,[(y(),x(Q,null,{default:w((()=>[N("primitive",{object:B(t),position:[1,0,1],"cast-shadow":"","receive-shadow":""},null,8,F)])),_:1})),b(Z,{group:B(t)},null,8,["group"])],64))}}),U=g({__name:"city2",setup:o=>(o,n)=>{const r=V("TresCanvas");return y(),x(r,{shadows:"","window-size":"",clearColor:"#333"},{default:w((()=>[n[0]||(n[0]=N("TresPerspectiveCamera",{position:[.5,2,1.5],fov:45,near:.1,far:1e5},null,-1)),b(B(e)),n[1]||(n[1]=N("TresAmbientLight",{color:"#ffffff"},null,-1)),n[2]||(n[2]=N("TresDirectionalLight",{position:[0,3,3],intensity:2,color:"#ffffff","cast-shadow":"","shadow-mapSize-width":1024,"shadow-mapSize-height":1024},null,-1)),(y(),x(Q,null,{default:w((()=>[b(I)])),_:1})),(y(),x(Q,null,{default:w((()=>[b(J,{color:"#ffffff",radius:1,speed:1,geoJson:"plugins/digitalCity/geojson/secondarySmall.geojson","rotation-y":1.3826597599330712,scale:.001025905404044292,position:[-1.877460474821603,.01,-1.5464791950519081]})])),_:1})),n[3]||(n[3]=N("TresGridHelper",{args:[6,10],position:[0,0,0]},null,-1))])),_:1})}});export{U as default};

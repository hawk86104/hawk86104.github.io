import{_ as t,h as n}from"./three.1FILWcBb1734746792122.js";import{m as e}from"./@tresjs.vA_UT8oy1734746792122.js";import{d as o,P as a}from"./@pmndrs.53rYJjok1734746792122.js";import{d as r,b as s,w as i,a3 as c,o as u,D as l,J as p,aj as f,ak as d}from"./@vue.-THQH3GC1734746792122.js";function h(){const t=["init","test","1898096DKKUBp","amount","return (function() ","stateObject","random","bind","radius","apply","7861640adukeR","rotate-x","Vector3","value","size","action","11081nFIHBi","error","18317268NyENrX","string","progressiveLightMap2","material","left","opacity","sin",'{}.constructor("return this")( )',"5239885flxisG","color","children","near","blend","__proto__","blendWindow","bias","158ssmSfT","TresPlaneGeometry","warn","length","texture","update","exception","position","height","counter","acos","gPlane","castShadow","chain","console","lightPosition","cos","toString","top","bottom","alphaTest","frames","constructor","add","camera","configure","prepare","TresSoftShadowMaterial","far","25VKisjF","debu","shadow","log","clear","132030WzGqVg","gger","set","10LzDdjP","MathUtils","Group","finish","shadows render end","right","randFloatSpread","818580JEGhSD","mapSize","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","DirectionalLight","abs","info","while (true) {}","prototype","trace"];return(h=function(){return t})()}const m=y;!function(t,n){const e=y,o=h();for(;;)try{if(614014===parseInt(e(390))/1*(-parseInt(e(321))/2)+parseInt(e(365))/3+-parseInt(e(376))/4+parseInt(e(350))/5*(-parseInt(e(355))/6)+parseInt(e(400))/7+-parseInt(e(384))/8+-parseInt(e(392))/9*(-parseInt(e(358))/10))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[y(383)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){w(this,(function(){const t=y,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(367),"i"),o=S(t(374));n.test(o+t(334))&&e[t(375)](o+"input")?S():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();g(void 0,(function(){const t=y;let n;try{n=Function(t(378)+t(399)+");")()}catch(a){n=window}const e=n[t(335)]=n.console||{},o=["log",t(323),t(370),t(391),t(327),"table",t(373)];for(let r=0;r<o.length;r++){const n=g.constructor[t(372)][t(381)](g),a=o[r],s=e[a]||n;n[t(318)]=g[t(381)](g),n[t(338)]=s[t(338)].bind(s),e[a]=n}}))();const b=[m(385)];function y(t,n){const e=h();return(y=function(t,n){return e[t-=318]})(t,n)}const M=r({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const h=m,w=r;let g=s();const{extend:y,scene:M,renderer:S,camera:I}=e();y({SoftShadowMaterial:o});const z={position:(new(t[h(386)]))[h(357)](w.lightPosition.x,w[h(336)].y,w[h(336)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new a(S[h(387)],M[h(387)],z.mapSize),P={map:x[h(394)][h(325)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:w[h(404)],alphaTest:w[h(341)],opacity:w[h(397)],color:w.color},_=new(t[h(360)]);for(let n=0;n<z.amount;n++){const n=new(t[h(368)])(16777215,z.intensity/z[h(377)]);n[h(333)]=!0,n[h(352)].bias=z[h(320)],n[h(352)][h(345)].near=z[h(403)],n[h(352)][h(345)].far=z[h(349)],n[h(352)][h(345)][h(363)]=z[h(388)]/2,n[h(352)][h(345)][h(396)]=-z[h(388)]/2,n[h(352)][h(345)][h(339)]=z[h(388)]/2,n[h(352)][h(345)][h(340)]=-z[h(388)]/2,n.shadow[h(366)].width=z[h(366)],n[h(352)].mapSize[h(329)]=z[h(366)],_[h(344)](n)}const j=()=>{const e=h,o=z[e(328)][e(324)]();for(let a=0;a<_[e(402)][e(324)];a++){const r=_[e(402)][a];if(Math[e(380)]()>w.ambient)r[e(328)][e(357)](z[e(328)].x+t[e(359)].randFloatSpread(z.radius),z[e(328)].y+t[e(359)][e(364)](z[e(382)]),z[e(328)].z+n.randFloatSpread(z[e(382)]));else{let t=Math[e(331)](2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math[e(380)]();r[e(328)].set(Math.cos(t)*Math.cos(n)*o,Math[e(369)](Math[e(337)](t)*Math[e(398)](n)*o),Math[e(398)](t)*o)}}},v=(t=1)=>{const n=h;M[n(387)][n(344)](_),x[n(347)]();for(let e=0;e<t;e++)j(),x[n(326)](I[n(387)],w[n(319)]),console[n(353)]("shadows plm update",e);M[n(387)].remove(_),x[n(361)]()};i((()=>g[h(387)]),(t=>{const n=h;t&&(x[n(346)](t),x[n(354)](),console.log("shadows render start"),v(w[n(342)]),console[n(353)](n(362)))}));const T=()=>{const t=h;x[t(354)](),v(w[t(342)])};return c((()=>{const t=h;g[t(387)]&&(w[t(397)]&&(g[t(387)][t(395)][t(397)]=w[t(397)]),w[t(341)]&&(g[t(387)][t(395)].alphaTest=w[t(341)]),w[t(401)]&&g.value[t(395)][t(401)][t(357)](w[t(401)]),w[t(404)]&&(g[t(387)][t(395)].blend=w[t(404)]))})),i((()=>w[h(336)]),(t=>{const n=h;t&&(console[n(353)](w[n(336)]),z[n(328)][n(357)](t.x,t.y,t.z),T())}),{deep:!0}),i((()=>[w[h(342)],w.blendWindow,w.ambient]),(()=>{T()})),(t,n)=>{const e=h;return u(),l("TresMesh",{"receive-shadow":"",ref_key:e(332),ref:g,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=p(e(322),{args:[1,1]},null,-1)),p(e(348),f(d(P)),null,16)],8,b)}}});function S(t){function n(t){const e=y;if(typeof t===e(393))return function(t){}.constructor(e(371))[e(383)](e(330));1!==(""+t/t)[e(324)]||t%20==0?function(){return!0}[e(343)](e(351)+e(356)).call(e(389)):function(){return!1}.constructor(e(351)+e(356)).apply(e(379)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

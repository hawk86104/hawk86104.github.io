import{b_ as t,a0 as n,C as e,j as r}from"./three.a9V66irq1725721021019.js";import{N as o}from"./@tresjs.bIWdfO9a1725721021019.js";import{R as c}from"./all.three.zkQuGYKz1725721021019.js";import{d as i,b as a,a5 as s,a2 as u,w as f,o as l,E as p,L as m,m as d,u as g}from"./@vue._6MD2XyK1725721021019.js";!function(t,n){const e=v,r=x();for(;;)try{if(826042===parseInt(e(343))/1+-parseInt(e(312))/2+-parseInt(e(342))/3*(parseInt(e(350))/4)+parseInt(e(317))/5*(parseInt(e(345))/6)+-parseInt(e(323))/7*(-parseInt(e(314))/8)+-parseInt(e(319))/9+parseInt(e(336))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function v(t,n){const e=x();return(v=function(t,n){return e[t-=312]})(t,n)}function x(){const t=["init","3WUjTdA","514954bzwUNy","counter","267846XXmQen","console",'{}.constructor("return this")( )',"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","input","4643956myKeSk","void main() {","toString","debu","string","warn","prototype","1806932GqcFPD","return (function() ","29752rsiEHA","bind","while (true) {}","105cidHlp","replace","739485xwPLEN","constructor","trace","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","7lGFETy","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","gger","#include <project_vertex>","apply","info","exception","function *\\( *\\)","stateObject","test","fragmentShader","vertexShader","call","15165280fjMoAf","table","length","log","#include <emissivemap_fragment>"];return(x=function(){return t})()}!function(){h(this,(function(){const t=v,n=new RegExp(t(330)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=b(t(341));n.test(r+"chain")&&e[t(332)](r+t(349))?b():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=v,n=function(){const t=v;let n;try{n=Function(t(313)+t(347)+");")()}catch(e){n=window}return n}(),e=n[t(346)]=n[t(346)]||{},r=[t(339),t(355),t(328),"error",t(329),t(337),t(321)];for(let o=0;o<r[t(338)];o++){const n=y[t(320)][t(356)][t(315)](y),c=r[o],i=e[c]||n;n.__proto__=y[t(315)](y),n[t(352)]=i[t(352)].bind(i),e[c]=n}}))();function b(t){function n(t){const e=v;if(typeof t===e(354))return function(t){}[e(320)](e(316)).apply(e(344));1!==(""+t/t)[e(338)]||t%20==0?function(){return!0}[e(320)]("debu"+e(325))[e(335)]("action"):function(){return!1}.constructor(e(353)+e(325))[e(327)](e(331)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=S;!function(t,n){const e=S,r=M();for(;;)try{if(501109===parseInt(e(511))/1+-parseInt(e(483))/2*(-parseInt(e(519))/3)+parseInt(e(481))/4*(parseInt(e(502))/5)+-parseInt(e(505))/6*(parseInt(e(510))/7)+-parseInt(e(522))/8+parseInt(e(507))/9+-parseInt(e(482))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(484)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=S,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=T("init");n[t(498)](r+"chain")&&e[t(498)](r+t(514))?T():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function M(){const t=["attributes","#444","5046512TEBewg","warn","mixStrength","rotation-x","mirror","object","tpgRef",'{}.constructor("return this")( )',"textureMatrix","prototype","console","counter","string","aoMap","repeat","TresMesh","color","channel","table","16zBVfII","11989250UMfbfT","2DrlCKI","apply","return (function() ","TresPlaneGeometry","tmRef","constructor","set","textureMatrixUniform","uv1","TresGroup","wrapT","debu","__proto__","call","log","test","uniforms","while (true) {}","renderTargetUniform","1114805BZQUds","primitive","onBeforeCompile","52866nAgsiL","trace","8535402tXrAFS","bind","exception","693HEQhSp","660029VjijHF","info","length","input","wrapS","onBeforeRender","value","tmsmRef","2108658beTxBo"];return(M=function(){return t})()}I(void 0,(function(){const t=S,n=function(){const t=S;let n;try{n=Function(t(485)+t(469)+");")()}catch(e){n=window}return n}(),e=n[t(472)]=n[t(472)]||{},r=[t(497),t(523),t(512),"error",t(509),t(480),t(506)];for(let o=0;o<r[t(513)];o++){const n=I[t(488)][t(471)].bind(I),c=r[o],i=e[c]||n;n[t(495)]=I[t(508)](I),n.toString=i.toString[t(508)](i),e[c]=n}}))();const j=[_(465)],C=[_(467)];function S(t,n){const e=M();return(S=function(t,n){return e[t-=464]})(t,n)}const E=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const h=_;let x,y;const b=i,w=new t(9.5,10),I=a(),M=a(),S=a(),E=new c,T={mirror:{value:b[h(466)]},mixStrength:{value:b[h(464)]}},z=([x,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),x=await x,y(),x);for(var A=0;A<3;A++)z[A][h(515)]=n,z[A][h(493)]=n,z[A][h(476)][h(489)](16,16);const R={color:new e(h(521)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},U=t=>{const n=h;t[n(499)].reflectMap=E[n(501)],t[n(499)][n(470)]=E[n(490)],t.uniforms=Object.assign(t[n(499)],T),(t=>{const n=v;t[n(334)]=t[n(334)][n(318)]("void main() {",n(322)),t[n(334)]=t.vertexShader[n(318)](n(326),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=v;t.fragmentShader=t[n(333)][n(318)](n(351),n(348)),t[n(333)]=t[n(333)][n(318)](n(340),n(324))})(t)};return u((()=>{const t=h;I.value&&(I[t(517)][t(520)][t(491)]=I[t(517)][t(520)].uv),S[t(517)]&&(S[t(517)][t(475)][t(479)]=1,S[t(517)][t(504)]=U),M[t(517)]&&(M[t(517)].add(E),M[t(517)][t(516)]=(t,n,e)=>{E.update(t,n,e)}),b[t(478)]&&S[t(517)]&&(S[t(517)][t(478)]=new e(b[t(478)]))})),f((()=>b.showGridHelper),(t=>{w.visible=t})),(t,n)=>{const e=h;return l(),p(e(492),null,[m(e(477),{ref_key:e(487),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(486),{ref_key:e(468),ref:I,args:[10,10]},null,512),m("TresMeshStandardMaterial",d({ref_key:e(518),ref:S},R),null,16)],8,j),m(e(503),{object:g(w)},null,8,C)])}}});function T(t){function n(t){const e=S;if(typeof t===e(474))return function(t){}.constructor(e(500)).apply(e(473));1!==(""+t/t).length||t%20==0?function(){return!0}[e(488)](e(494)+"gger")[e(496)]("action"):function(){return!1}[e(488)]("debugger")[e(484)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as _};

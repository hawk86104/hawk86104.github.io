var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.D3Wony-x1741490461506.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.XNHpIq5r1741490461506.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.jGRwxDAG1741490461506.js";import{V as o,U as s,C as l,l as c,W as u,aU as p,a as f,_ as x,A as v,b as m,ar as h}from"./three.Vxh8Czkt1741490461506.js";import{m as w,e as g}from"./@tresjs.rE98Wm941741490461506.js";import{u as d}from"./index.CQdDy-wE1741490461506.js";import{F as y,C as S}from"./three-stdlib.2KPeCEvi1741490461506.js";import{d as P}from"./@vue.NRI7TcgI1741490461506.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.2bCT9hXw1741490461506.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.sO959yeL1741490461506.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.VUBFNHNU1741490461506.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.22sDy_p21741490461506.js";import"./imgFloor.vue_vue_type_script_setup_true_lang._MfUuTmt1741490461506.js";const _=b;!function(t,e){const n=b,i=I();for(;;)try{if(434232===parseInt(n(315))/1*(parseInt(n(302))/2)+-parseInt(n(301))/3*(parseInt(n(321))/4)+parseInt(n(313))/5+-parseInt(n(307))/6*(-parseInt(n(319))/7)+-parseInt(n(311))/8+-parseInt(n(320))/9*(-parseInt(n(308))/10)+-parseInt(n(304))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[b(299)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function b(t,e){const n=I();return(b=function(t,e){return n[t-=290]})(t,e)}function I(){const t=["init","debu","gger",'{}.constructor("return this")( )',"__proto__","constructor","toString","return (function() ","input","apply","chain","135ubctdK","598akfRSj","exception","3139565NbpSfv","console","function *\\( *\\)","5034HcSFMP","10nBliBN","stateObject",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"4295640DbPBZd","while (true) {}","3808155GFjhzo","error","267Jmyujk","table","bind","length","602NGoMeY","7009686sSnEZk","38744EXqhkh"];return(I=function(){return t})()}!function(){z(this,(function(){const t=b,e=new RegExp(t(306)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=E(t(290));e.test(i+t(300))&&n.test(i+t(298))?E():i("0")}))()}();const M=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[b(299)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();M(void 0,(function(){const t=b,e=function(){const t=b;let e;try{e=Function(t(297)+t(293)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(305)]||{},i=["log","warn","info",t(314),t(303),t(316),"trace"];for(let r=0;r<i.length;r++){const e=M.constructor.prototype[t(317)](M),a=i[r],o=n[a]||e;e[t(294)]=M[t(317)](M),e[t(296)]=o[t(296)][t(317)](o),n[a]=e}}))();const A=_(310);function E(t){function e(t){const n=b;if("string"==typeof t)return function(t){}[n(295)](n(312))[n(299)]("counter");1!==(""+t/t)[n(318)]||t%20==0?function(){return!0}[n(295)]("debu"+n(292)).call("action"):function(){return!1}[n(295)](n(291)+"gger")[n(299)](n(309)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=O;!function(t,e){const n=O,i=L();for(;;)try{if(820081===parseInt(n(124))/1*(-parseInt(n(123))/2)+parseInt(n(116))/3*(-parseInt(n(147))/4)+-parseInt(n(131))/5+parseInt(n(112))/6*(parseInt(n(117))/7)+-parseInt(n(141))/8+parseInt(n(108))/9*(-parseInt(n(125))/10)+parseInt(n(138))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const j=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function L(){const t=["apply","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4bknsrp","213397yjWRDF","200PByIgi","call","exception","counter","trace","chain","4570495eDRrzk","\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t","uniforms","console","clone","error","action","27694139xqZlzF","input","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","7281408sUqJKy","while (true) {}","bind","prototype","debu","stateObject","365964QBauOM","string","constructor","gger","146142zmJyep","defines","log","table","1002asmEsM","return (function() ","warn","toString","21mIubfS","63658KIFOlC","length","test"];return(L=function(){return t})()}!function(){j(this,(function(){const t=O,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(122),"i"),i=k("init");e[t(119)](i+t(130))&&n.test(i+t(139))?k():i("0")}))()}();const U=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[O(120)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function O(t,e){const n=L();return(O=function(t,e){return n[t-=105]})(t,e)}function T(t){const e=O,n=a({},t);return e(109)in t&&(n[e(109)]=a({},t[e(109)])),e(133)in t&&(n[e(133)]=s[e(135)](t[e(133)])),n}U(void 0,(function(){const t=O;let e;try{e=Function(t(113)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(134)]=e[t(134)]||{},i=[t(110),t(114),"info",t(136),t(127),t(111),t(129)];for(let a=0;a<i[t(118)];a++){const e=U[t(106)][t(144)][t(143)](U),r=i[a],o=n[r]||e;e.__proto__=U[t(143)](U),e[t(115)]=o[t(115)].bind(o),n[r]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:D(121),fragmentShader:D(140)+A+D(132)};function k(t){function e(t){const n=O;if(typeof t===n(105))return function(t){}[n(106)](n(142))[n(120)](n(128));1!==(""+t/t).length||t%20==0?function(){return!0}[n(106)](n(145)+n(107))[n(126)](n(137)):function(){return!1}.constructor("debugger").apply(n(146)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=F;function R(){const t=["_swapTarget","66504pnnsZn","830121HTGNTO","counter","_mipMaterials","exception","setSize","setRenderTarget","type","texture","minFilter","while (true) {}","copy","bind","854uzuTCJ","apply","prototype","image","_mipQuad","defines","parentMapSize","render","action","set","originalMapSize","622922mmaDbj","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","gger","getClearAlpha","debu","console","string","constructor","X_IS_EVEN","setClearAlpha","1652973CgoruW","width","fragmentShader","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","Y_IS_EVEN","magFilter","autoClear","__proto__","6844HoBmuV","floorPowerOfTwo","getClearColor","_copyQuad","map","test","parentLevel","material","3866226MQxkSP","setViewOffset","chain","dispose","error","return (function() ","tDiffuse","value","replace","length","call","setClearColor","trace","3930795QSAIbH","init","table","log",'{}.constructor("return this")( )',"clear","update","floor","height","2825PDUnLH"];return(R=function(){return t})()}!function(t,e){const n=F,i=R();for(;;)try{if(538006===-parseInt(n(170))/1+-parseInt(n(193))/2+parseInt(n(203))/3+parseInt(n(213))/4*(-parseInt(n(167))/5)+parseInt(n(221))/6+parseInt(n(182))/7*(parseInt(n(169))/8)+parseInt(n(234))/9)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[F(183)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function F(t,e){const n=R();return(F=function(t,e){return n[t-=165]})(t,e)}!function(){C(this,(function(){const t=F,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(207),"i"),i=Q(t(235));e[t(218)](i+t(223))&&n[t(218)](i+"input")?Q():i("0")}))()}();const H=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[F(183)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();H(void 0,(function(){const t=F,e=function(){const t=F;let e;try{e=Function(t(226)+t(238)+");")()}catch(n){e=window}return e}(),n=e[t(198)]=e.console||{},i=[t(237),"warn","info",t(225),t(173),t(236),t(233)];for(let r=0;r<i[t(230)];r++){const e=H.constructor[t(184)][t(181)](H),a=i[r],o=n[a]||e;e[t(212)]=H[t(181)](H),e[t(208)]=o[t(208)].bind(o),n[a]=e}}))();const N=new l;class Z{constructor(t){const e=F;!t&&(t=e(194));const n=T(V);n.fragmentShader=n[e(205)][e(229)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(T(n)),i[0][e(187)][e(201)]=0,i[0][e(187)][e(209)]=0,i[1]=new c(T(n)),i[1][e(187)][e(201)]=1,i[1][e(187)][e(209)]=0,i[2]=new c(T(n)),i[2][e(187)][e(201)]=0,i[2][e(187)][e(209)]=1,i[3]=new c(T(n)),i[3][e(187)].X_IS_EVEN=1,i[3][e(187)][e(209)]=1;const r=new u;r[e(177)][e(178)]=p,r[e(177)][e(210)]=p,this[e(168)]=r,this[e(216)]=new y(new c(S)),this[e(186)]=new y(null),this[e(172)]=i}[W(240)](t,e,n,i=!1){const r=W;t.isWebGLRenderTarget&&(t=t[r(177)]);const o=n[r(211)],s=n[r(196)](),l=n.getRenderTarget();n[r(215)](N);const c=this._copyQuad,u=this._mipQuad,p=this[r(168)],x=this[r(172)];let v,m;i?(v=f[r(214)](t[r(185)].width),m=f.floorPowerOfTwo(t.image[r(166)])):(v=Math[r(165)](t.image[r(204)]),m=Math[r(165)](t[r(185)][r(166)]));const h=Math[r(165)](1.5*v),w=Math[r(165)](m);e[r(174)](h,w),p.texture.type!==e[r(177)][r(176)]?(p[r(224)](),p[r(180)](e),p[r(177)].image=a({},p[r(177)][r(185)])):p[r(174)](h,w),n[r(211)]=!1,n[r(232)](0),n.setClearAlpha(),c[r(220)][r(206)][r(227)].value=t,c.camera[r(222)](v,m,0,0,h,w),n[r(175)](e),n[r(239)](),c[r(189)](n),n[r(175)](p),n[r(239)](),c.render(n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(206)][r(217)][r(228)]=p[r(177)],t[r(206)][r(219)][r(228)]=y,t[r(206)][r(188)].value[r(191)](g,d),t[r(206)][r(192)][r(228)][r(191)](v,m),u.material=t,g=Math[r(165)](g/2),d=Math[r(165)](d/2);const i=w-2*d;n.setRenderTarget(e),u.camera[r(222)](g,d,-v,-i,h,w),u[r(189)](n),n[r(175)](p),t[r(206)][r(217)][r(228)]=e.texture,u.render(n),y++}return n[r(175)](l),n[r(202)](s),n[r(232)](N),n[r(211)]=o,y+1}[W(224)](){const t=W;this[t(168)][t(224)](),this[t(186)][t(224)](),this[t(216)].dispose(),this._mipMaterials.forEach((e=>e[t(224)]()))}}function Q(t){function e(t){const n=F;if(typeof t===n(199))return function(t){}[n(200)](n(179))[n(183)](n(171));1!==(""+t/t).length||t%20==0?function(){return!0}[n(200)](n(197)+n(195))[n(231)](n(190)):function(){return!1}[n(200)](n(197)+n(195))[n(183)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}function Y(t,e){const n=X();return(Y=function(t,e){return n[t-=216]})(t,e)}!function(t,e){const n=Y,i=X();for(;;)try{if(636724===-parseInt(n(254))/1+-parseInt(n(244))/2*(parseInt(n(260))/3)+-parseInt(n(256))/4+-parseInt(n(245))/5*(parseInt(n(252))/6)+parseInt(n(258))/7*(-parseInt(n(232))/8)+-parseInt(n(222))/9+parseInt(n(274))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const G=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[Y(230)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function X(){const t=["stateObject","setRenderTarget","2VEmbjY","925SOkYQH","prototype","resolution","clear","value","string","parent","3834FDKYhI","exception","348177ITAwJp","copy","4673744PpiMaw","table","14TdRPKK","constructor","1914567kbPOqU","test","getWorldPosition","debu","projectPoint","position","update","error",'{}.constructor("return this")( )',"elements","info","negate","setMask","Plane","38514110WaFyoi","counter","getWorldQuaternion","projectionMatrix","autoClear","Vector4","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","add","applyQuaternion","reflect","input","forEach","trace","length","PerspectiveCamera","action","sub","updateMatrixWorld","clone","Vector3","multiply","console","gger","1886256YFDQbS","function *\\( *\\)","applyMatrix4","lookAt","chain","log","normal","Matrix4","apply","buffers","2928344pZufOx","visible","multiplyScalar","sign","bind","Quaternion","while (true) {}","matrixWorldInverse","set","dot"];return(X=function(){return t})()}!function(){G(this,(function(){const t=Y,e=new RegExp(t(223)),n=new RegExp(t(280),"i"),i=J("init");e[t(261)](i+t(226))&&n.test(i+t(284))?J():i("0")}))()}();const $=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();$(void 0,(function(){const t=Y,e=function(){const t=Y;let e;try{e=Function("return (function() "+t(268)+");")()}catch(n){e=window}return e}(),n=e[t(220)]=e[t(220)]||{},i=[t(227),"warn",t(270),t(267),t(253),t(257),t(286)];for(let r=0;r<i[t(287)];r++){const e=$[t(259)][t(246)][t(236)]($),a=i[r],o=n[a]||e;e.__proto__=$[t(236)]($),e.toString=o.toString[t(236)](o),n[a]=e}}))();const B=P({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=Y,i=t,r=new(x[n(273)]),a=new(x[n(229)]),o=new(x[n(288)]),s=new Z,l=d({width:i[n(247)],height:i.resolution,settings:{type:v}}),c=d({width:i[n(247)],height:i[n(247)],settings:{type:v}}),{camera:u,renderer:p,scene:f}=w(),{onBeforeLoop:y}=g();return y((()=>{const t=n;(()=>{const t=n;if(!u[t(249)])return;r[t(240)](new(x[t(218)])(0,1,0),0),r.applyMatrix4(i.parent.matrixWorld),o[t(255)](u.value);const e=new(x[t(218)])(0,0,1)[t(217)]()[t(271)](),s=u.value[t(262)](new(x[t(218)]));e.reflect(r[t(228)]);const c=new(x[t(218)]);r[t(264)](s,c);const v=c[t(217)]();v.sub(s),v[t(281)](c),o[t(265)].copy(v);const w=new(x[t(218)])(0,0,-1);w[t(282)](u.value[t(276)](new(x[t(237)]))),w[t(281)](s);const g=new m;i[t(251)].getWorldPosition(g),g[t(290)](w),g[t(283)](r[t(228)])[t(271)](),g[t(281)](i[t(251)][t(262)](new m)),o.up[t(240)](0,1,0),o[t(282)](u[t(249)].getWorldQuaternion(new(x[t(237)]))),o.up[t(283)](r[t(228)]),o[t(225)](g),o[t(216)]();const d=new(x[t(229)]);d[t(240)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d[t(219)](o.projectionMatrix),d[t(219)](o[t(239)]),a[t(255)](d),r[t(224)](o.matrixWorldInverse);const y=new h(r[t(228)].x,r[t(228)].y,r.normal.z,r.constant),S=o[t(277)],P=new(x[t(279)]);P.x=(Math[t(235)](y.x)+S[t(269)][8])/S.elements[0],P.y=(Math.sign(y.y)+S[t(269)][9])/S[t(269)][5],P.z=-1,P.w=(1+S[t(269)][10])/S[t(269)][14],y[t(234)](2/y[t(241)](P)),S[t(269)][2]=y.x,S[t(269)][6]=y.y,S.elements[10]=y.z+1,S.elements[14]=y.w;const _=p[t(249)].getRenderTarget();p[t(249)][t(243)](l[t(249)]),p[t(249)].state[t(231)].depth[t(272)](!0),!1===p.value[t(278)]&&p[t(249)][t(248)](),i.ignoreObjects[t(285)]((t=>t.visible=!1)),p[t(249)].render(f[t(249)],o),i.ignoreObjects[t(285)]((e=>e[t(233)]=!0)),p[t(249)].setRenderTarget(_)})(),l.value&&c[t(249)]&&p[t(249)]&&s[t(266)](l[t(249)].texture,c.value,p[t(249)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function J(t){function e(t){const n=Y;if(typeof t===n(250))return function(t){}[n(259)](n(238))[n(230)](n(275));1!==(""+t/t)[n(287)]||t%20==0?function(){return!0}[n(259)](n(263)+n(221)).call(n(289)):function(){return!1}[n(259)]("debu"+n(221))[n(230)](n(242)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,i=nt();;)try{if(209293===-parseInt(n(213))/1+-parseInt(n(222))/2*(-parseInt(n(209))/3)+parseInt(n(202))/4+parseInt(n(216))/5*(parseInt(n(228))/6)+parseInt(n(224))/7+-parseInt(n(218))/8*(parseInt(n(221))/9)+-parseInt(n(219))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var K=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){K(this,(function(){var t=tt,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(215),"i"),i=et(t(198));e.test(i+t(197))&&n[t(229)](i+t(207))?et():i("0")}))()}();var q=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(230)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function tt(t,e){var n=nt();return(tt=function(t,e){return n[t-=195]})(t,e)}function et(t){function e(t){var n=tt;if("string"==typeof t)return function(t){}.constructor(n(225))[n(230)](n(206));1!==(""+t/t)[n(205)]||t%20==0?function(){return!0}.constructor(n(196)+n(214)).call("action"):function(){return!1}.constructor(n(196)+n(214))[n(230)](n(211)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function nt(){var t=["exception","814040QWCgII","7618730BwdCgJ","return (function() ","9JlXVzj","84794ApAIao","console","2454774xhjuIW","while (true) {}","bind","info","750fmHWrW","test","apply","constructor","debu","chain","init","log","trace","__proto__","1344536IkTRbA","toString","prototype","length","counter","input","error","27jBTWuk","warn","stateObject",'{}.constructor("return this")( )',"229718exfbSJ","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9370VcWiiN"];return(nt=function(){return t})()}q(void 0,(function(){for(var t=tt,e=function(){var t,e=tt;try{t=Function(e(220)+e(212)+");")()}catch(n){t=window}return t}(),n=e[t(223)]=e[t(223)]||{},i=[t(199),t(210),t(227),t(208),t(217),"table",t(200)],r=0;r<i.length;r++){var a=q[t(195)][t(204)][t(226)](q),o=i[r],s=n[o]||a;a[t(201)]=q[t(226)](q),a[t(203)]=s.toString.bind(s),n[o]=a}}))();export{B as _};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{aw as s,o as u,r as l,aP as f,aQ as p,aR as d,H as h,an as v,ao as m,z as g,ba as _,C as y,Z as x,W as b,l as I,m as w,n as S,y as M,f as R,V as E,g as A,a5 as T,bG as P,k as D,b9 as z,j as O,bw as C,d as k,a9 as F,B,a as j,aO as U,e as N,M as L,aj as H,a7 as Z,c0 as G,c1 as W,U as V}from"./three.HHcT7YAr1718612273914.js";import{a as $,$ as q,r as Y}from"./@tresjs.W42D3qe_1718612273914.js";import{R as X}from"./three-stdlib.eIANyClj1718612273914.js";import{Z as J,b as K,a as Q,w as nn,u as tn,d as en,U as rn,a3 as on,a0 as an,o as cn,D as sn,G as un,I as ln,a7 as fn,a2 as pn,f as dn,J as hn,a8 as vn,r as mn,M as gn,X as _n,q as yn,t as xn,F as bn,a5 as In,m as wn}from"./@vue.CpOXM7bB1718612273914.js";import{M as Sn,a as Mn,C as Rn}from"./@pmndrs.GoGkK4yp1718612273914.js";import{o as En}from"./object-hash.NQGxxEoE1718612273914.js";var An=zn;function Tn(){var n=["gger","935120oPyPWf","constructor","trace","exception","material","action","return (function() ","init","chain","geometry","table","warn","12708vFzARy","console","bind","function *\\( *\\)",'{}.constructor("return this")( )',"debu","string","length","error","2225064JjugVJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","310085JINgYw","destructor","virtualScene","44580PuMukQ","add","1022xNcyYt","traverse","9WsboQk","982035epXPyO","dispose","__proto__","map","apply","4048425oBzIyn","input"];return(Tn=function(){return n})()}!function(n,t){for(var e=zn,r=Tn();;)try{if(218798===-parseInt(e(370))/1*(-parseInt(e(366))/2)+parseInt(e(371))/3+parseInt(e(339))/4+-parseInt(e(363))/5+-parseInt(e(351))/6*(parseInt(e(368))/7)+parseInt(e(360))/8+-parseInt(e(376))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(375)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pn(this,(function(){var n=zn,t=new RegExp(n(354)),e=new RegExp(n(361),"i"),r=kn(n(346));t.test(r+n(347))&&e.test(r+n(377))?kn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(n,t){var e=Tn();return(zn=function(n,t){return e[n-=338]})(n,t)}Dn(void 0,(function(){for(var n=zn,t=function(){var n,t=zn;try{n=Function(t(345)+t(355)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(352)]||{},r=["log",n(350),"info",n(359),n(342),n(349),n(341)],o=0;o<r[n(358)];o++){var i=Dn.constructor.prototype.bind(Dn),a=r[o],c=e[a]||i;i[n(373)]=Dn[n(353)](Dn),i[n(362)]=c.toString[n(353)](c),e[a]=i}}))();class On extends s{constructor(){var n=zn;super(),this[n(365)]=null,this[n(365)]=new u}[An(367)](...n){var t=An;return this[t(365)][t(367)](...n),this}[An(364)](){var n=An;this.virtualScene[n(369)]((t=>{var e=n;t instanceof l&&(t[e(348)].dispose(),t[e(343)][e(372)](),t.material[e(374)]&&t[e(343)][e(374)].dispose(),this[e(365)].remove(t))})),this.virtualScene=null}}const Cn=On;function kn(n){function t(n){var e=zn;if(typeof n===e(357))return function(n){}[e(340)]("while (true) {}")[e(375)]("counter");1!==(""+n/n)[e(358)]||n%20==0?function(){return!0}[e(340)](e(356)+e(338)).call(e(344)):function(){return!1}.constructor(e(356)+e(338)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=jn;!function(n,t){const e=jn,r=Nn();for(;;)try{if(878853===-parseInt(e(408))/1+parseInt(e(379))/2*(-parseInt(e(394))/3)+parseInt(e(381))/4+parseInt(e(388))/5+-parseInt(e(415))/6+parseInt(e(407))/7+parseInt(e(414))/8*(parseInt(e(386))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(n,t){const e=Nn();return(jn=function(n,t){return e[n-=378]})(n,t)}!function(){Bn(this,(function(){const n=jn,t=new RegExp(n(384)),e=new RegExp(n(401),"i"),r=Hn(n(390));t[n(389)](r+"chain")&&e.test(r+n(387))?Hn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(411)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(){const n=["while (true) {}","stateObject","exception","2701378tXSJOh","debu","1756420eZlVGq","length","info","function *\\( *\\)","log","9hKykJk","input","406975XUeLcE","test","init","outdoor/snowy_forest_path_01_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","warn","3kkdIrc",'{}.constructor("return this")( )',"gger","trace","city/canary_wharf_1k.hdr","bind","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","studio/poly_haven_studio_1k.hdr","kiara/kiara_1_dawn_1k.hdr","constructor","call","1457239pZDuoz","392799gzzYXg","table","string","apply","prototype","city/modern_buildings_2_1k.hdr","24331344LLtutJ","6886524TnzctD"];return(Nn=function(){return n})()}Un(void 0,(function(){const n=jn,t=function(){const n=jn;let t;try{t=Function("return (function() "+n(395)+");")()}catch(e){t=window}return t}(),e=t[n(400)]=t[n(400)]||{},r=[n(385),n(393),n(383),"error",n(378),n(409),n(397)];for(let o=0;o<r[n(382)];o++){const t=Un[n(405)][n(412)][n(399)](Un),i=r[o],a=e[i]||t;t.__proto__=Un[n(399)](Un),t.toString=a.toString[n(399)](a),e[i]=t}}))();const Ln={sunset:"venice/venice_sunset_1k.hdr",studio:Fn(403),city:Fn(398),umbrellas:Fn(392),night:"outdoor/satara_night_1k.hdr",forest:"outood/mossy_forest_1k.hdr",snow:Fn(391),dawn:Fn(404),hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Fn(413),shangai:"city/shanghai_bund_1k.hdr"};function Hn(n){function t(n){const e=jn;if(typeof n===e(410))return function(n){}.constructor(e(416))[e(411)]("counter");1!==(""+n/n)[e(382)]||n%20==0?function(){return!0}[e(405)](e(380)+e(396))[e(406)](e(402)):function(){return!1}.constructor(e(380)+e(396))[e(411)](e(417)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Zn=$n;!function(n,t){const e=$n,r=Vn();for(;;)try{if(468091===parseInt(e(473))/1+-parseInt(e(491))/2*(parseInt(e(494))/3)+-parseInt(e(506))/4+parseInt(e(508))/5*(-parseInt(e(483))/6)+-parseInt(e(495))/7*(parseInt(e(478))/8)+-parseInt(e(509))/9+parseInt(e(472))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=$n,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(515),"i"),r=Yn(n(484));t.test(r+n(475))&&e[n(492)](r+"input")?Yn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vn(){const n=["init","trace","constructor","value","apply","Failed to load environment map: ","string","173666hEOkrC","test","environment","3qGeIAk","7QtZOtE","console","gger","while (true) {}","background","toString","log","counter","keys","bind","return (function() ","331212BBQTqD","error","2315Gtlbez","7740558LAQgzg","mapping","join",'{}.constructor("return this")( )',"texture","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","call","table","isColor","warn","21519790fczPEL","440050xNAfkR","isArray","chain","__proto__","info","5838872orHypv","length","Preset must be one of: ","setPath","debu","4722sidNFI"];return(Vn=function(){return n})()}function $n(n,t){const e=Vn();return($n=function(n,t){return e[n-=468]})(n,t)}Wn(void 0,(function(){const n=$n,t=function(){const n=$n;let t;try{t=Function(n(505)+n(512)+");")()}catch(e){t=window}return t}(),e=t[n(496)]=t[n(496)]||{},r=[n(501),n(471),n(477),n(507),n(516),n(469),n(485)];for(let o=0;o<r.length;o++){const t=Wn.constructor.prototype[n(504)](Wn),i=r[o],a=e[i]||t;t[n(476)]=Wn[n(504)](Wn),t[n(500)]=a.toString.bind(a),e[i]=t}}))();const qn=Zn(514);function Yn(n){function t(n){const e=$n;if(typeof n===e(490))return function(n){}.constructor(e(498))[e(488)](e(502));1!==(""+n/n)[e(479)]||n%20==0?function(){return!0}[e(486)]("debu"+e(497))[e(468)]("action"):function(){return!1}[e(486)](e(482)+e(497))[e(488)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xn=Qn;!function(n,t){const e=Qn,r=nt();for(;;)try{if(855851===-parseInt(e(127))/1+parseInt(e(130))/2*(parseInt(e(166))/3)+parseInt(e(160))/4*(-parseInt(e(141))/5)+parseInt(e(144))/6+-parseInt(e(155))/7+parseInt(e(123))/8*(parseInt(e(149))/9)+parseInt(e(176))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(140)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jn(this,(function(){const n=Qn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(159),"i"),r=et(n(152));t.test(r+n(170))&&e[n(131)](r+n(172))?et():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=nt();return(Qn=function(n,t){return e[n-=122]})(n,t)}function nt(){const n=["log","dispose","value","resolution","102scjBTY","exception","call","generateMipmaps","chain","debu","input","environment","stateObject","destructor","13972080wclLmi","gger","string","symbol","9867848WKyJxG","error","far","constructor","1509819SKNTaM","isArray","trace","63914KlqOXy","test","background","console","prototype","envSence","table","info","toString","TresEnvSence","apply","15FGcXWH","near","component","4443906lPNyns","frames","default","$slots","bind","9QbhOQo","update","texture","init","return (function() ","warn","10237178fGcRNW","magFilter","length","type","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","839672DErgys",'{}.constructor("return this")( )'];return(nt=function(){return n})()}Kn(void 0,(function(){const n=Qn;let t;try{t=Function(n(153)+n(161)+");")()}catch(o){t=window}const e=t.console=t[n(133)]||{},r=[n(162),n(154),n(137),n(124),n(167),n(136),n(129)];for(let i=0;i<r[n(157)];i++){const t=Kn[n(126)][n(134)][n(148)](Kn),o=r[i],a=e[o]||t;t.__proto__=Kn[n(148)](Kn),t[n(138)]=a[n(138)][n(148)](a),e[o]=t}}))();const tt=en({__name:Xn(143),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Xn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=K(null),x=null;const b=K(null);rn((()=>{var n,t;const e=Qn;null==(n=b[e(164)])||n[e(175)](),null==(t=y[e(164)])||t[e(163)]()}));const{onBeforeLoop:I}=Y();let w=1;I((()=>{const n=Qn;x&&b[n(164)]&&y[n(164)]&&(i[n(145)]===1/0||w<i[n(145)])&&(i.useDefaultScene?x[n(150)](s[n(164)],u[n(164)]):x.update(s[n(164)],fn(b[n(164)].virtualScene)),w++)}));const S=([r,o]=on((()=>async function(n,t){const e=Zn,{scene:r}=$(),{preset:o,blur:i,files:a=[],path:c="",background:s}=J(n),u=K(),l=Q((()=>Array[e(474)](a[e(487)]))),h=Q((()=>l.value?f:X)),v=K(null);return nn((()=>[a,c]),(async([n,t])=>{const r=e;if(n.value.length>0&&!o[r(487)]){try{v[r(487)]=await q(tn(h),l.value?[tn(n)]:tn(n),(n=>{const e=r;t[e(487)]&&n[e(481)](tn(t))}))}catch(i){throw new Error(r(489)+i)}v[r(487)]&&(u[r(487)]=l.value?v.value[0]:v.value,u[r(487)][r(510)]=l[r(487)]?p:d)}}),{immediate:!0}),nn((()=>u[e(487)]),(n=>{const t=e;r.value&&(r[t(487)][t(493)]=n)}),{immediate:!0}),nn((()=>[s.value,u[e(487)]]),(([n,o])=>{const i=e;if(r[i(487)]){let e=(null==t?void 0:t[i(487)])?t[i(487)][i(513)]:o,a=r.value.background;!(null==a?void 0:a[i(470)])&&(a=void 0),r.value[i(499)]=n?e:a}}),{immediate:!0}),nn((()=>null==i?void 0:i[e(487)]),(n=>{const t=e;r[t(487)]&&(r[t(487)].backgroundBlurriness=n)}),{immediate:!0}),nn(o,(async n=>{const t=e;if(n&&n in Ln){const e=qn,o=Ln[n];try{v[t(487)]=await q(X,o,(n=>{e&&n[t(481)](e)}))}catch(r){throw new Error(t(489)+r)}v.value&&(u.value=v[t(487)],u[t(487)][t(510)]=d)}else if(n&&!(n in Ln))throw new Error(t(480)+Object[t(503)](Ln)[t(511)](", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(151)],M=n=>{const t=e;n?(u.value.environment=n[t(151)],i[t(132)]&&(u[t(164)][t(132)]=n[t(151)])):(u[t(164)][t(173)]=S[t(164)],i.background&&(u[t(164)][t(132)]=S[t(164)]))};return nn(S,(n=>{const t=e;y[t(164)]&&M(y[t(164)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn}),nn((()=>an()[e(146)]),(n=>{var t,r,o;const a=e;if(n&&(!y[a(164)]||y[a(164)].texture[a(158)]!==h)&&(l=n(),Array[a(128)](l)&&l[a(157)]>0&&typeof(null==(t=l[0])?void 0:t[a(158)])!==a(122)))return null==(r=y[a(164)])||r.dispose(),y.value=new v(i[a(165)]),y[a(164)][a(151)].type=h,x=new m(i.near,i.far,y[a(164)]),void M(y.value);null==(o=y[a(164)])||o[a(163)](),y[a(164)]=null,M(null)}),{immediate:!0,deep:!0}),a.value=S,nn((()=>i.useDefaultScene),(n=>{var t;const r=e;n&&(!y.value||y.value[r(151)][r(158)]!==g)&&(null==(t=y[r(164)])||t[r(163)](),y[r(164)]=new v(i[r(165)]),x=new m(i[r(142)],i[r(125)],y[r(164)]),y.value.texture.type=g,y[r(164)][r(151)][r(169)]=!1,y[r(164)][r(151)].minFilter=_,y.value[r(151)][r(156)]=_,M(y[r(164)]))}),{immediate:!0}),(n,t)=>{const r=e;return tn(y)?(cn(),sn(r(139),{key:0,ref_key:r(135),ref:b},[un(n[r(147)],r(146))],512)):ln("",!0)}}});function et(n){function t(n){const e=Qn;if(typeof n===e(178))return function(n){}[e(126)]("while (true) {}")[e(140)]("counter");1!==(""+n/n)[e(157)]||n%20==0?function(){return!0}[e(126)](e(171)+e(177))[e(168)]("action"):function(){return!1}.constructor(e(171)+e(177))[e(140)](e(174)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const rt=ft;!function(n,t){const e=ft,r=lt();for(;;)try{if(869635===-parseInt(e(324))/1*(parseInt(e(309))/2)+-parseInt(e(290))/3*(-parseInt(e(286))/4)+-parseInt(e(303))/5+-parseInt(e(320))/6+parseInt(e(287))/7*(-parseInt(e(285))/8)+-parseInt(e(296))/9+parseInt(e(284))/10*(parseInt(e(316))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=ft,t=new RegExp(n(314)),e=new RegExp(n(293),"i"),r=dt("init");t.test(r+"chain")&&e.test(r+n(315))?dt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=ft;let t;try{t=Function(n(276)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(302)]=t[n(302)]||{},r=[n(298),n(308),"info",n(322),n(278),n(317),"trace"];for(let i=0;i<r[n(319)];i++){const t=it[n(292)][n(318)].bind(it),o=r[i],a=e[o]||t;t[n(297)]=it[n(312)](it),t[n(313)]=a[n(313)][n(312)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[rt(307),"map",rt(305),"color"];function lt(){const n=["warn","1118zKFkQe","intensity","color","bind","toString","function *\\( *\\)","input","462704HtfVcz","table","prototype","length","3216876bPsHyW","TresRingGeometry","error","TresPlaneGeometry","488uvBUPH","return (function() ","ring","exception","needsUpdate","index","counter","string","from","470KysLHW","8bvlHaS","2032712TOsowO","3944801dlVAeL","TresMesh","action","6WWTIGf","multiplyScalar","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","value","4189923JChXbL","__proto__","log","apply","rect","gger","console","1428505pzEPqG","TresMeshBasicMaterial","side","map","toneMapped"];return(lt=function(){return n})()}function ft(n,t){const e=lt();return(ft=function(n,t){return e[n-=276]})(n,t)}const pt=en({__name:rt(280),props:{args:{default:null},from:{default:rt(300)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=K();return pn((()=>{const n=ft;e.value&&(e[n(295)][n(311)][n(291)](t[n(310)]),e[n(295)][n(279)]=!0)})),(n,r)=>{const o=ft;return cn(),sn(o(288),null,["circle"===t[o(283)]?(cn(),sn("TresRingGeometry",at)):t.from===o(277)?(cn(),sn(o(321),ct)):t[o(283)]===o(300)?(cn(),sn(o(323),st)):(cn(),dn(t[o(283)],{key:3,args:t})),hn(o(304),{ref_key:"material",ref:e,toneMapped:n.toneMapped,map:n[o(306)],side:tn(x),color:n[o(311)]},null,8,ut)])}}});function dt(n){function t(n){const e=ft;if(typeof n===e(282))return function(n){}[e(292)]("while (true) {}").apply(e(281));1!==(""+n/n)[e(319)]||n%20==0?function(){return!0}[e(292)](e(294)+e(301)).call(e(289)):function(){return!1}[e(292)](e(294)+e(301))[e(299)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=mt,r=gt();for(;;)try{if(596880===-parseInt(e(328))/1+-parseInt(e(315))/2+-parseInt(e(319))/3*(-parseInt(e(333))/4)+parseInt(e(337))/5*(-parseInt(e(334))/6)+-parseInt(e(324))/7*(parseInt(e(349))/8)+parseInt(e(359))/9+parseInt(e(330))/10*(parseInt(e(317))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(352)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=mt,t=new RegExp(n(339)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=yt(n(320));t[n(332)](r+n(340))&&e.test(r+"input")?yt():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n,t){const e=gt();return(mt=function(n,t){return e[n-=315]})(n,t)}function gt(){const n=["apply","length","dispose","trace","setRenderTarget","constructor","string","6801966gqbldE","1271952vNodEv","counter","759jmxdsI","warn","3XKxKir","init","prototype","width","return (function() ","73682pOCqih","table","height",'{}.constructor("return this")( )',"1156513qxeOux","call","521410iUjKko","info","test","205196YJCetV","5082282iHSBJU","action","debu","5CYSEJu","while (true) {}","function *\\( *\\)","chain","clear","gger","log","stateObject","toString","value","console","exception","888Jdgxnz","error","bind"];return(gt=function(){return n})()}function _t(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?J(n):J(mn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=mt;null==(n=t[a(346)])||n[a(354)](),t[a(346)]=new b((null==r?void 0:r[a(346)])||p[a(322)].value,(null==e?void 0:e.value)||p[a(326)][a(346)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(346)])),(null==i?void 0:i.value)&&(t[a(346)].depthTexture=new w((null==r?void 0:r[a(346)])||p[a(322)][a(346)],(null==e?void 0:e[a(346)])||p[a(326)][a(346)],S))})),s((()=>{const n=mt;(null==a?void 0:a[n(346)])&&(l.value[n(356)](t[n(346)]),l[n(346)][n(341)](),l[n(346)].render(f.value,u.value),l[n(346)][n(356)](null))})),gn((()=>{var n;const e=mt;null==(n=t[e(346)])||n[e(354)]()})),t}function yt(n){function t(n){const e=mt;if(typeof n===e(358))return function(n){}[e(357)](e(338))[e(352)](e(316));1!==(""+n/n)[e(353)]||n%20==0?function(){return!0}.constructor(e(336)+e(342))[e(329)](e(335)):function(){return!1}.constructor(e(336)+e(342)).apply(e(344)),t(++n)}try{if(n)return t;t(0)}catch(e){}}vt(void 0,(function(){const n=mt;let t;try{t=Function(n(323)+n(327)+");")()}catch(o){t=window}const e=t[n(347)]=t[n(347)]||{},r=[n(343),n(318),n(331),n(350),n(348),n(325),n(355)];for(let i=0;i<r[n(353)];i++){const t=vt[n(357)][n(321)][n(351)](vt),o=r[i],a=e[o]||t;t.__proto__=vt[n(351)](vt),t[n(345)]=a.toString[n(351)](a),e[o]=t}}))();const xt=St;!function(n,t){const e=St,r=Mt();for(;;)try{if(455156===-parseInt(e(184))/1+-parseInt(e(222))/2*(-parseInt(e(206))/3)+-parseInt(e(221))/4+parseInt(e(231))/5+-parseInt(e(214))/6*(parseInt(e(228))/7)+-parseInt(e(212))/8*(-parseInt(e(227))/9)+-parseInt(e(193))/10*(-parseInt(e(215))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){bt(this,(function(){const n=St,t=new RegExp(n(237)),e=new RegExp(n(223),"i"),r=Et(n(233));t[n(191)](r+n(188))&&e[n(191)](r+"input")?Et():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();It(void 0,(function(){const n=St,t=function(){const n=St;let t;try{t=Function(n(202)+n(187)+");")()}catch(e){t=window}return t}(),e=t[n(225)]=t[n(225)]||{},r=["log","warn",n(194),n(210),n(220),n(234),n(211)];for(let o=0;o<r[n(205)];o++){const t=It.constructor[n(224)][n(200)](It),i=r[o],a=e[i]||t;t.__proto__=It[n(200)](It),t[n(204)]=a.toString[n(200)](a),e[i]=t}}))();const wt=[xt(189),xt(219)];function St(n,t){const e=Mt();return(St=function(n,t){return e[n-=184]})(n,t)}function Mt(){const n=["error","trace","136aAPSPe","background","156kJCJOB","22132dfXhSJ","uuid","call","gger","side","exception","214388tKkepp","2qVwioz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","console","texture","420138ZldVAq","206528RayTxF","render","traverse","2473470UaiXID","time","init","table","index","backsideThickness","function *\\( *\\)","isMesh","envMapIntensity","131388QDEvbT","setRenderTarget","value",'{}.constructor("return this")( )',"chain","buffer","material","test","debu","370XMTseP","info","TresMeshTransmissionMaterial","constructor","counter","backside","thickness","bind","action","return (function() ","stateObject","toString","length","133539DVNpzM","fboResolution","MeshTransmissionMaterialClass","toneMapping"];return(Mt=function(){return n})()}const Rt=en({__name:xt(235),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=xt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=_n(),u=n;o({MeshTransmissionMaterial:Sn});const l=new Mn,{onBeforeLoop:f}=Y(),p=_t({width:u.fboResolution,height:u.fboResolution,isLoop:!1}),d=_t({width:u.fboResolution,height:u[e(207)],isLoop:!1});let h,v,m,g;return yn((async()=>{const n=e;await xn(),s.value=function(n,t){const e=St;let r;return n[e(230)]((n=>{const o=e;n[o(238)]&&n[o(190)]&&n[o(190)][o(216)]===t&&(r=n)})),r}(i.value,r[n(186)][n(216)])})),f((({elapsed:n})=>{const t=e;r[t(186)][t(232)]=n,r.value[t(189)]===d[t(186)].texture&&s[t(186)]&&(m=a[t(186)][t(209)],h=i[t(186)][t(213)],v=r[t(186)][t(239)],g=s.value[t(190)][t(219)],s.value.material=l,u[t(198)]&&(a[t(186)].setRenderTarget(p[t(186)]),a.value[t(229)](i[t(186)],c[t(186)]),s.value[t(190)]=r.value,s[t(186)][t(190)][t(199)]=u[t(236)],s[t(186)][t(190)][t(189)]=p[t(186)][t(226)],s[t(186)][t(190)].side=M,s[t(186)][t(190)][t(239)]=0),a[t(186)][t(185)](d[t(186)]),a[t(186)][t(229)](i[t(186)],c[t(186)]),s[t(186)][t(190)].buffer=d[t(186)][t(226)],s[t(186)][t(190)]=r[t(186)],s[t(186)][t(190)][t(199)]=u.thickness,s.value[t(190)][t(219)]=g,s[t(186)][t(190)][t(239)]=v,i[t(186)][t(213)]=h,a.value[t(185)](null),a[t(186)][t(209)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return cn(),sn(o(195),{ref_key:o(208),ref:r,buffer:tn(d)[o(226)],side:tn(x)},null,8,wt)}}});function Et(n){function t(n){const e=St;if("string"==typeof n)return function(n){}[e(196)]("while (true) {}").apply(e(197));1!==(""+n/n)[e(205)]||n%20==0?function(){return!0}[e(196)]("debu"+e(218))[e(217)](e(201)):function(){return!1}[e(196)](e(192)+e(218)).apply(e(203)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const At=Dt;!function(n,t){const e=Dt,r=Ot();for(;;)try{if(673519===parseInt(e(155))/1*(-parseInt(e(138))/2)+parseInt(e(146))/3+parseInt(e(118))/4*(-parseInt(e(133))/5)+-parseInt(e(126))/6*(parseInt(e(135))/7)+parseInt(e(159))/8*(parseInt(e(149))/9)+-parseInt(e(113))/10+parseInt(e(103))/11*(parseInt(e(137))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tt(this,(function(){const n=Dt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(121),"i"),r=Ct("init");t[n(111)](r+n(128))&&e[n(111)](r+"input")?Ct():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Dt(132)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(n,t){const e=Ot();return(Dt=function(n,t){return e[n-=101]})(n,t)}Pt(void 0,(function(){const n=Dt,t=function(){const n=Dt;let t;try{t=Function(n(129)+n(131)+");")()}catch(e){t=window}return t}(),e=t[n(127)]=t[n(127)]||{},r=[n(120),n(153),n(117),"error",n(147),n(105),n(112)];for(let o=0;o<r.length;o++){const t=Pt[n(114)][n(115)][n(107)](Pt),i=r[o],a=e[i]||t;t[n(110)]=Pt[n(107)](Pt),t[n(158)]=a[n(158)].bind(a),e[i]=t}}))();const zt=en({__name:At(141),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return yn((()=>{const n=Dt;if(!r[n(134)])return;if(!o.value)return;r.value.matrixWorld[n(143)]();const e=(new R)[n(140)](o[n(134)],t[n(148)]),i=new E,a=new A,c=e.max.x-e[n(106)].x,s=e[n(102)].y-e[n(106)].y,u=e[n(102)].z-e[n(106)].z;e[n(123)](i),e[n(145)](a);const l=t[n(136)]?s/2:t[n(160)]?-s/2:0,f=t[n(151)]?-c/2:t[n(125)]?c/2:0,p=t[n(144)]?u/2:t.back?-u/2:0;r[n(134)][n(109)][n(142)](t[n(156)]||t.disableX?0:-i.x+f,t[n(156)]||t[n(108)]?0:-i.y+l,t[n(156)]||t[n(104)]?0:-i.z+p)})),(n,t)=>{const i=Dt;return cn(),sn(i(154),{ref_key:i(161),ref:e},[hn("TresGroup",{ref_key:"outer",ref:r},[hn(i(154),{ref_key:i(119),ref:o},[un(n[i(152)],i(101))],512)],512)],512)}}});function Ot(){const n=["66054WFuuja","console","chain","return (function() ","string",'{}.constructor("return this")( )',"apply","5AcChpa","value","707iqQoFP","top","1270644aUZhdn","50tPhope","stateObject","setFromObject","index","set","identity","front","getBoundingSphere","1676898zgbwHb","exception","precise","1566IdVWyO","gger","left","$slots","warn","TresGroup","6667dLjGcF","disable","call","toString","26200RMkGNL","bottom","gref","default","max","319pNcpfZ","disableZ","table","min","bind","disableY","position","__proto__","test","trace","9300950VcqKNS","constructor","prototype","while (true) {}","info","5269364vetNZC","inner","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","getCenter","action","right"];return(Ot=function(){return n})()}function Ct(n){function t(n){const e=Dt;if(typeof n===e(130))return function(n){}[e(114)](e(116))[e(132)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(114)]("debugger")[e(157)](e(124)):function(){return!1}.constructor(e(122)+e(150)).apply(e(139)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kt=Lt;!function(n,t){const e=Lt,r=Nt();for(;;)try{if(408659===parseInt(e(319))/1+parseInt(e(320))/2+-parseInt(e(349))/3+parseInt(e(350))/4*(-parseInt(e(332))/5)+parseInt(e(339))/6*(parseInt(e(317))/7)+-parseInt(e(326))/8+-parseInt(e(324))/9*(-parseInt(e(323))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lt(336)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Lt,t=new RegExp(n(314)),e=new RegExp(n(352),"i"),r=Zt("init");t[n(329)](r+n(348))&&e[n(329)](r+n(327))?Zt():r("0")}))()}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lt(336)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bt(void 0,(function(){const n=Lt;let t;try{t=Function(n(341)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(322)]=t[n(322)]||{},r=[n(362),"warn",n(321),n(331),n(368),n(343),n(366)];for(let i=0;i<r[n(353)];i++){const t=Bt.constructor.prototype[n(367)](Bt),o=r[i],a=e[o]||t;t[n(365)]=Bt.bind(Bt),t[n(334)]=a[n(334)][n(367)](a),e[o]=t}}))();const jt=[kt(361)],Ut=["object"];function Nt(){const n=["params","debu","__proto__","trace","bind","exception","default","call","lightSource","update","function *\\( *\\)","#ffffff","set","175jeGYFZ","backside","232081GWWOwI","1014546lfdUtF","info","console","2930vbKVQo","36837uHarXr","resolution","4146136EoFFyt","input","scene","test","action","error","258040yhmHUY","ior","toString","primitive","apply","far","string","35568wZXLGV","gger","return (function() ","Vector3","table","worldRadius","intensity","group","stateObject","chain","1621743vXRroC","48mjcQWb","add","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","helper","causticsOnly","color","backsideIOR","constructor","while (true) {}","$slots","object","log"];return(Nt=function(){return n})()}function Lt(n,t){const e=Nt();return(Lt=function(n,t){return e[n-=314]})(n,t)}const Ht=en({__name:"index",props:{color:{default:kt(315)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=kt,e=n,{renderer:r}=$(),o=Rn(r.value,{frames:1/0,resolution:e[t(325)],worldRadius:e[t(344)]});o[t(363)][t(318)]=!0;const i=_n(null);nn(i,(n=>{const e=t;n&&o[e(328)][e(351)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(372)]()})),pn((()=>{const n=t;e[n(356)]&&o[n(363)][n(356)][n(316)](e[n(356)]),e[n(333)]&&(o[n(363)].ior=e.ior),e[n(357)]&&(o[n(363)].backsideIOR=e.backsideIOR),e[n(337)]&&(o[n(363)][n(337)]=e.far),e[n(344)]&&(o.params.worldRadius=e[n(344)]),e[n(345)]&&(o[n(363)][n(345)]=e.intensity)})),nn((()=>e[t(355)]),(n=>{o[t(363)].causticsOnly=n})),nn((()=>e[t(371)]),(n=>{const e=t;n&&o[e(363)].lightSource instanceof T[e(342)]&&o.params[e(371)][e(316)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(bn,null,[hn("TresGroup",{ref_key:r(346),ref:i},[un(n[r(360)],r(369))],512),hn("primitive",{object:tn(o)[r(346)],position:[0,.003,0]},null,8,jt),hn(r(335),{object:tn(o)[r(354)],visible:!1},null,8,Ut)],64)}}});function Zt(n){function t(n){const e=Lt;if(typeof n===e(338))return function(n){}.constructor(e(359)).apply("counter");1!==(""+n/n)[e(353)]||n%20==0?function(){return!0}[e(358)]("debu"+e(340))[e(370)](e(330)):function(){return!1}[e(358)](e(364)+e(340))[e(336)](e(347)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Gt(){const n=["forEach","debu","function *\\( *\\)","warn","call","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","132WewsBy","constructor","trace","shadowmap_pars_fragment","length","traverse","isArray","info","replace","test","compile","error","6395812xhfSgT","#if defined( SHADOWMAP_TYPE_PCF )","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","647577dRiuhd","action",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","bind","10BObgdD","4268820NOilvt","ShaderChunk","toString","string","counter","dispose","return (function() ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","6112448eLnftG","while (true) {}","chain","#ifdef USE_SHADOWMAP",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","; i++) {\n        vogelSample = vogelDiskSample(j, ","7498359RppfHT","init","__proto__","table","prototype","stateObject","programs","7wzQkgB","1997IIlLgC","gger","log","input","3701742xmJLDH","apply","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","console","; i ++) {\n        offset = (vogelDiskSample(j, ","18CUvwjC","properties","material"];return(Gt=function(){return n})()}function Wt(n,t){const e=Gt();return(Wt=function(n,t){return e[n-=375]})(n,t)}!function(n,t){const e=Wt,r=Gt();for(;;)try{if(890618===parseInt(e(386))/1*(parseInt(e(404))/2)+-parseInt(e(419))/3+parseInt(e(416))/4+-parseInt(e(424))/5+parseInt(e(390))/6*(-parseInt(e(385))/7)+-parseInt(e(434))/8*(-parseInt(e(395))/9)+-parseInt(e(423))/10*(parseInt(e(378))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vt(this,(function(){const n=Wt,t=new RegExp(n(400)),e=new RegExp(n(418),"i"),r=Yt(n(379));t[n(413)](r+n(436))&&e[n(413)](r+n(389))?Yt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(391)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();$t(void 0,(function(){const n=Wt,t=function(){const n=Wt;let t;try{t=Function(n(430)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(393)]=t[n(393)]||{},r=[n(388),n(401),n(411),n(415),"exception",n(381),n(406)];for(let o=0;o<r[n(408)];o++){const t=$t[n(405)][n(382)][n(422)]($t),i=r[o],a=e[i]||t;t[n(380)]=$t[n(422)]($t),t[n(426)]=a.toString[n(422)](a),e[i]=t}}))();const qt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=P[r(407)];return P.shadowmap_pars_fragment=P.shadowmap_pars_fragment[r(412)](r(375),r(392)+t+r(432)+n+r(376)+e+r(394)+e+r(433)+e+r(377)+e+r(431)+t+r(403)+e+r(421))[r(412)](r(417),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;T[i(425)][i(407)]=o,function(n,t,e){const r=Wt;t[r(409)]((t=>{const e=r;t[e(397)]&&(Array[e(410)](t[e(397)])?t.material[e(398)]((t=>{const r=e;n[r(396)].remove(t),t[r(429)]()})):(n[e(396)].remove(t.material),t.material.dispose()))})),n[r(411)][r(384)][r(408)]=0,n[r(414)](t,e)}(n,t,e)}};function Yt(n){function t(n){const e=Wt;if(typeof n===e(427))return function(n){}[e(405)](e(435))[e(391)](e(428));1!==(""+n/n)[e(408)]||n%20==0?function(){return!0}[e(405)]("debugger")[e(402)](e(420)):function(){return!1}[e(405)](e(399)+e(387))[e(391)](e(383)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xt(){const n=["while (true) {}","30PgUGET","717975xPqUMh","table","error","exception","prototype","apply","value","3598592TJvNKJ","console","1204610dtGEQX","112snkQnQ","function *\\( *\\)","trace","return (function() ","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","length","stateObject","call","gger","string","676593dwFClI","676667gnDMfL","material","init","bind","dispose","test","input","chain","8hOIBrf","160878kfgqIe","debu","__proto__","272320dwGxif",'{}.constructor("return this")( )',"info"];return(Xt=function(){return n})()}!function(n,t){const e=Qt,r=Xt();for(;;)try{if(342546===parseInt(e(251))/1+parseInt(e(263))/2+-parseInt(e(250))/3*(parseInt(e(259))/4)+parseInt(e(277))/5+parseInt(e(260))/6*(parseInt(e(278))/7)+-parseInt(e(275))/8+-parseInt(e(268))/9*(parseInt(e(267))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jt(this,(function(){const n=Qt,t=new RegExp(n(239)),e=new RegExp(n(243),"i"),r=te(n(253));t.test(r+n(258))&&e[n(256)](r+n(257))?te():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(273)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qt(n,t){const e=Xt();return(Qt=function(n,t){return e[n-=239]})(n,t)}Kt(void 0,(function(){const n=Qt;let t;try{t=Function(n(241)+n(264)+");")()}catch(o){t=window}const e=t[n(276)]=t.console||{},r=["log","warn",n(265),n(270),n(271),n(269),n(240)];for(let i=0;i<r[n(245)];i++){const t=Kt[n(244)][n(272)][n(254)](Kt),o=r[i],a=e[o]||t;t[n(262)]=Kt[n(254)](Kt),t[n(242)]=a[n(242)][n(254)](a),e[o]=t}}))();const ne=en({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(274)],o.value,e[t(274)]),i=null),a&&(i=qt({focus:s,size:c,samples:u}),o[t(274)].traverse((n=>{const e=t;n instanceof l&&n[e(252)][e(255)]()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function te(n){function t(n){const e=Qt;if(typeof n===e(249))return function(n){}[e(244)](e(266))[e(273)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(244)](e(261)+e(248))[e(247)]("action"):function(){return!1}[e(244)](e(261)+e(248))[e(273)](e(246)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ee=re;function re(n,t){const e=ie();return(re=function(n,t){return e[n-=274]})(n,t)}!function(n,t){const e=re,r=ie();for(;;)try{if(633131===-parseInt(e(301))/1*(-parseInt(e(283))/2)+parseInt(e(300))/3+parseInt(e(292))/4+parseInt(e(276))/5*(-parseInt(e(313))/6)+parseInt(e(321))/7*(parseInt(e(314))/8)+-parseInt(e(278))/9+-parseInt(e(285))/10*(-parseInt(e(290))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(){const n=["872305eqwszv","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","value","length","43210bYmsZJ","return (function() ","5789205EBebGf","constructor","colorspace_fragment","stateObject","halfTexelSize","2oKnZiv","action","481870VinNsj","gger","error","info","call","44ZwVPMy","bind","578304CGKahq","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","kernel","toneMapped","encodings_fragment","input","toString","log","2299458yZuDyb","159446vpjQWa","setResolution","apply","console","setTexelSize",'{}.constructor("return this")( )',"test","table","__proto__","set","debu","uniforms","510cKqeDm","48lduDrv","resolution",">\n        }","trace","chain","replace","prototype"];return(ie=function(){return n})()}!function(){oe(this,(function(){const n=re,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(322),"i"),r=ue("init");t[n(307)](r+n(318))&&e[n(307)](r+n(297))?ue():r("0")}))()}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ae(void 0,(function(){const n=re;let t;try{t=Function(n(277)+n(306)+");")()}catch(o){t=window}const e=t[n(304)]=t[n(304)]||{},r=[n(299),"warn",n(288),n(287),"exception",n(308),n(317)];for(let i=0;i<r[n(275)];i++){const t=ae[n(279)][n(320)].bind(ae),o=r[i],a=e[o]||t;t[n(309)]=ae[n(291)](ae),t[n(298)]=a.toString.bind(a),e[o]=t}}))();const ce=parseInt(k[ee(319)](/\D+/g,""));class se extends D{constructor(n=new O){const t=ee;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new O),texelSize:new z(new O),halfTexelSize:new z(new O),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <"+t(ce>=154?280:296)+t(316),vertexShader:t(293),blending:C,depthWrite:!1,depthTest:!1}),this[t(295)]=!1,this[t(305)](n.x,n.y),this[t(294)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=ee;this.uniforms.texelSize.value[e(310)](n,t),this[e(312)][e(282)][e(274)].set(n,t).multiplyScalar(.5)}[ee(302)](n){const t=ee;this.uniforms[t(315)][t(274)].copy(n)}}function ue(n){function t(n){const e=re;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(303)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(279)](e(311)+"gger")[e(289)](e(284)):function(){return!1}[e(279)](e(311)+e(286))[e(303)](e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const le=he;!function(n,t){const e=he,r=de();for(;;)try{if(571216===-parseInt(e(360))/1+-parseInt(e(376))/2*(parseInt(e(426))/3)+parseInt(e(378))/4*(-parseInt(e(379))/5)+parseInt(e(408))/6*(parseInt(e(373))/7)+-parseInt(e(392))/8*(parseInt(e(404))/9)+parseInt(e(417))/10+parseInt(e(363))/11*(parseInt(e(393))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=he,t=new RegExp(n(377)),e=new RegExp(n(398),"i"),r=me(n(369));t.test(r+n(405))&&e.test(r+"input")?me():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(413)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function de(){const n=["defines","value","118328scGPXq","708kgiXVk","screen","maxDepthThreshold","while (true) {}","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","convolutionMaterial","depthBuffer","prototype","camera","342RtFNlK","chain","toString","scene","1401906ijenMf","render","info","uniforms","texture","apply","trace","setTexelSize","setRenderTarget","2481360oDVGwP","log","minDepthThreshold","action","debu","table","warn","gger","call","3154773yqVBlP",'{}.constructor("return this")( )',"142077bAjGVI","setAttribute","error","465410YxxmcU","exception","depthTexture","add","kernel","depthToBlurRatioBias","init","bind","__proto__","counter","7olveXV","renderTargetB","USE_DEPTH","2UvKaLs","function *\\( *\\)","12HYGlOc","1085225RHjUKt","console","clone","return (function() ","renderToScreen","position","inputBuffer","renderTargetA","frustumCulled","stateObject","constructor"];return(de=function(){return n})()}function he(n,t){const e=de();return(he=function(n,t){return e[n-=360]})(n,t)}pe(void 0,(function(){const n=he,t=function(){const n=he;let t;try{t=Function(n(382)+n(427)+");")()}catch(e){t=window}return t}(),e=t[n(380)]=t.console||{},r=[n(418),n(423),n(410),n(362),n(364),n(422),n(414)];for(let o=0;o<r[n(397)];o++){const t=pe[n(389)][n(402)][n(370)](pe),i=r[o],a=e[i]||t;t[n(371)]=pe.bind(pe),t.toString=a[n(406)][n(370)](a),e[i]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(383)]=!1,this[c(386)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(374)]=this[c(386)][c(381)](),this[c(400)]=new se,this[c(400)][c(415)](1/t,1/e),this.convolutionMaterial.setResolution(new O(t,e)),this[c(407)]=new u,this[c(403)]=new F,this[c(400)][c(411)][c(419)][c(391)]=r,this.convolutionMaterial[c(411)][c(395)].value=o,this.convolutionMaterial[c(411)].depthScale[c(391)]=i,this.convolutionMaterial[c(411)][c(368)].value=a,this.convolutionMaterial[c(390)][c(375)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(361)](c(384),new j(s,3)),p[c(361)]("uv",new j(f,2)),this.screen=new l(p,this[c(400)]),this[c(394)][c(387)]=!1,this.scene[c(366)](this[c(394)])}[le(409)](n,t,e){const r=le,o=this.scene,i=this[r(403)],a=this[r(386)],c=this[r(374)],s=this[r(400)],u=s.uniforms;u[r(401)].value=t[r(365)];const l=s[r(367)];let f,p,d,h=t;for(p=0,d=l[r(397)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(391)]=l[p],u[r(385)].value=h[r(412)],n[r(416)](f),n[r(409)](o,i),h=f;u[r(367)].value=l[p],u[r(385)][r(391)]=h[r(412)],n.setRenderTarget(this.renderToScreen?null:e),n.render(o,i)}}function me(n){function t(n){const e=he;if(typeof n===e(399))return function(n){}[e(389)](e(396)).apply(e(372));1!==(""+n/n).length||n%20==0?function(){return!0}[e(389)](e(421)+"gger")[e(425)](e(420)):function(){return!1}[e(389)](e(421)+e(424))[e(413)](e(388)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ge=be;function _e(){var n=["\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","maxDepthThreshold","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","5913572ixYuev","_depthScale","uniforms","_mixBlur","console","_textureMatrix","depthToBlurRatioBias","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","toString","mixContrast","return (function() ","depthScale","tDepth","_tDiffuse","chain","2801092bDMNXc","_depthToBlurRatioBias","counter","102966zHbqts","_tDepth","constructor","mixStrength","_mixContrast","prototype","438jMBpuq","7758189uJTdjm","71935uczhHx","stateObject","_blurStrength","length","table","8176640fUVuTi","_distortion","479686LnQqEG","call","onBeforeCompile","mixBlur","action","_distortionMap","3fLOgyM","_minDepthThreshold","gger","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","bind",'{}.constructor("return this")( )',"string","textureMatrix","vertexShader","test","fragmentShader","init","setValues","_maxDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","replace","tDiffuse","apply","_tDiffuseBlur","debu","_mirror","distortionMap","input","trace","_hasBlur","USE_UV","error","tDiffuseBlur","distortion","hasBlur","value","mirror","defines","minDepthThreshold"];return(_e=function(){return n})()}!function(n,t){for(var e=be,r=_e();;)try{if(600982===-parseInt(e(342))/1*(parseInt(e(336))/2)+-parseInt(e(321))/3+-parseInt(e(318))/4+parseInt(e(329))/5*(parseInt(e(327))/6)+parseInt(e(380))/7+parseInt(e(334))/8+-parseInt(e(328))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[be(360)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ye(this,(function(){var n=be,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(356),"i"),r=we(n(353));t[n(351)](r+n(317))&&e.test(r+n(365))?we():r("0")}))()}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[be(360)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function be(n,t){var e=_e();return(be=function(n,t){return e[n-=304]})(n,t)}xe(void 0,(function(){var n,t=be;try{n=Function(t(313)+t(347)+");")()}catch(s){n=window}for(var e=n[t(307)]=n[t(307)]||{},r=["log","warn","info",t(369),"exception",t(333),t(366)],o=0;o<r[t(332)];o++){var i=xe.constructor[t(326)][t(346)](xe),a=r[o],c=e[a]||i;i.__proto__=xe.bind(xe),i.toString=c[t(311)][t(346)](c),e[a]=i}}))();class Ie extends U{constructor(n={}){var t=be;super(n),this[t(322)]={value:null},this[t(341)]={value:null},this._tDiffuse={value:null},this[t(361)]={value:null},this[t(308)]={value:null},this[t(367)]={value:!1},this[t(363)]={value:0},this._mixBlur={value:0},this[t(331)]={value:.5},this[t(343)]={value:.9},this[t(355)]={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this[t(335)]={value:1},this._mixContrast={value:1},this[t(354)](n)}[ge(338)](n){var t,e=ge;!(null==(t=n.defines)?void 0:t[e(368)])&&(n[e(375)][e(368)]=""),n.uniforms[e(372)]=this[e(367)],n.uniforms.tDiffuse=this[e(316)],n.uniforms[e(315)]=this[e(322)],n.uniforms.distortionMap=this[e(341)],n.uniforms[e(370)]=this[e(361)],n[e(305)][e(349)]=this[e(308)],n[e(305)][e(374)]=this[e(363)],n[e(305)][e(339)]=this[e(306)],n[e(305)][e(324)]=this[e(331)],n[e(305)][e(376)]=this[e(343)],n.uniforms[e(378)]=this._maxDepthThreshold,n[e(305)].depthScale=this[e(304)],n[e(305)][e(309)]=this[e(319)],n[e(305)][e(371)]=this[e(335)],n[e(305)].mixContrast=this._mixContrast,n[e(350)]=e(377)+n.vertexShader,n[e(350)]=n[e(350)][e(358)]("#include <project_vertex>",e(345)),n[e(352)]=e(310)+n.fragmentShader,n[e(352)]=n.fragmentShader[e(358)]("#include <emissivemap_fragment>",e(379))}get[ge(359)](){var n=ge;return this._tDiffuse[n(373)]}set[ge(359)](n){this._tDiffuse.value=n}get[ge(315)](){var n=ge;return this._tDepth[n(373)]}set tDepth(n){this[ge(322)].value=n}get[ge(364)](){var n=ge;return this[n(341)][n(373)]}set distortionMap(n){var t=ge;this._distortionMap[t(373)]=n}get[ge(370)](){var n=ge;return this._tDiffuseBlur[n(373)]}set[ge(370)](n){var t=ge;this[t(361)][t(373)]=n}get[ge(349)](){var n=ge;return this[n(308)][n(373)]}set[ge(349)](n){this[ge(308)].value=n}get hasBlur(){return this[ge(367)].value}set[ge(372)](n){var t=ge;this[t(367)][t(373)]=n}get[ge(374)](){var n=ge;return this[n(363)][n(373)]}set[ge(374)](n){var t=ge;this[t(363)][t(373)]=n}get[ge(339)](){return this[ge(306)].value}set[ge(339)](n){this[ge(306)].value=n}get mixStrength(){var n=ge;return this._blurStrength[n(373)]}set mixStrength(n){var t=ge;this[t(331)][t(373)]=n}get[ge(376)](){return this._minDepthThreshold.value}set[ge(376)](n){this._minDepthThreshold.value=n}get[ge(378)](){var n=ge;return this[n(355)][n(373)]}set[ge(378)](n){var t=ge;this[t(355)][t(373)]=n}get[ge(314)](){var n=ge;return this[n(304)][n(373)]}set depthScale(n){var t=ge;this[t(304)][t(373)]=n}get[ge(309)](){var n=ge;return this[n(319)][n(373)]}set[ge(309)](n){var t=ge;this[t(319)][t(373)]=n}get distortion(){var n=ge;return this._distortion[n(373)]}set[ge(371)](n){var t=ge;this[t(335)][t(373)]=n}get mixContrast(){return this._mixContrast.value}set[ge(312)](n){this[ge(325)].value=n}}function we(n){function t(n){var e=be;if(typeof n===e(348))return function(n){}[e(323)](e(357))[e(360)](e(320));1!==(""+n/n)[e(332)]||n%20==0?function(){return!0}[e(323)](e(362)+"gger")[e(337)](e(340)):function(){return!1}[e(323)](e(362)+e(344))[e(360)](e(330)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Se=Me;function Me(n,t){const e=Re();return(Me=function(n,t){return e[n-=450]})(n,t)}function Re(){const n=["extractRotation","isMesh","mirror","10053603cIbTQW","defines-USE_DEPTH","distortion","target","chain","elements","gger","__proto__","autoClear","call","enabled","setFromNormalAndCoplanarPoint","multiply","add","562164cvPvXP","reflect","traverse","756915pfBPEb","max-depth-threshold","negate","projectionMatrix","shadowMap","set","warn","37157967URCksI","clipPlane","stateObject","setFromMatrixPosition","materialRef","key","number",'{}.constructor("return this")( )',"textureMatrix","matrixWorldInverse","reflectorPlane","texture","t-diffuse-blur","reflectorWorldPosition","clear","constructor","return (function() ","defines-USE_DISTORTION","matrixWorld","prototype","183ioyUAB","lookAtPosition","log","length","bind","dot","424neFqQa","applyMatrix4","string","mix-contrast","10504432DzEbLC","depth-scale","lookAt","material","apply","position","updateMatrixWorld","sign","view","normal","function *\\( *\\)","setRenderTarget","copy","has-blur","toString","virtualCamera","console","value","rotationMatrix","uuid","addScaledVector","index","reflectorOffset","2605404XnxCzw","min-depth-threshold","exception","counter","debu","init","mix-strength","dispose","t-diffuse","depthTexture","assign","test","5jiWBqR","autoUpdate","TresMeshReflectorMaterial","while (true) {}","table","defines-USE_BLUR","t-depth"];return(Re=function(){return n})()}!function(n,t){const e=Me,r=Re();for(;;)try{if(847844===parseInt(e(451))/1*(-parseInt(e(457))/2)+parseInt(e(523))/3+-parseInt(e(484))/4*(parseInt(e(496))/5)+-parseInt(e(520))/6+-parseInt(e(506))/7+-parseInt(e(461))/8+parseInt(e(530))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ee(this,(function(){const n=Me,t=new RegExp(n(471)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=De(n(489));t[n(495)](r+n(510))&&e.test(r+"input")?De():r("0")}))()}();const Ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ae(void 0,(function(){const n=Me,t=function(){const n=Me;let t;try{t=Function(n(546)+n(537)+");")()}catch(e){t=window}return t}(),e=t[n(477)]=t.console||{},r=[n(453),n(529),"info","error",n(486),n(500),"trace"];for(let o=0;o<r[n(454)];o++){const t=Ae[n(545)][n(450)][n(455)](Ae),i=r[o],a=e[i]||t;t[n(513)]=Ae[n(455)](Ae),t[n(475)]=a[n(475)][n(455)](a),e[i]=t}}))();const Te=["texture-matrix",Se(505),Se(492),Se(502),Se(542),Se(474),Se(490),Se(485),Se(524),Se(462),"depth-to-blur-ratio-bias",Se(508),"distortionMap",Se(460),Se(501),Se(507),Se(547)],Pe=en({__name:Se(482),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=n;const{resolution:o,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,blur:l,mirror:f,mixBlur:p,mixStrength:d,distortion:v,distortionMap:m,mixContrast:g}=J(r),{camera:_,scene:y,renderer:x,extend:S}=$();S({MeshReflectorMaterial:Ie});const M=_n(),R=_n(),A=_n(),T=_n(),P=Q((()=>{const n=Me;return typeof l.value===n(536)?[l[n(478)],l.value]:l.value})),D=Q((()=>P.value[0]>0||P.value[1]>0)),z={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const r=Me;null==(n=M[r(478)])||n[r(541)].dispose();const l={minFilter:I,magFilter:I,type:h};var _,y;M[r(478)]=new b(o[r(478)],o.value,(_=c({},l),y={depthBuffer:!0,depthTexture:new w(o[r(478)],o[r(478)],G,W)},t(_,e(y)))),R.value=new b(o[r(478)],o[r(478)],l),A[r(478)]=new ve({resolution:o[r(478)],width:P[r(478)][0],height:P[r(478)][1],minDepthThreshold:i[r(478)],maxDepthThreshold:a[r(478)],depthScale:s[r(478)],depthToBlurRatioBias:u[r(478)]}),T[r(478)]={mirror:f,textureMatrix:z.textureMatrix,mixBlur:p,tDiffuse:M.value[r(541)],tDepth:M[r(478)][r(493)],tDiffuseBlur:M[r(478)][r(541)],hasBlur:D,mixStrength:d,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,distortion:v,distortionMap:m[r(478)],mixContrast:g,"defines-USE_BLUR":D[r(478)]?"":void 0,"defines-USE_DEPTH":s[r(478)]>0?"":void 0,"defines-USE_DISTORTION":m[r(478)]?"":void 0}}));const O=_n(),{onLoop:C}=Y();C((()=>{var n;const t=Me;if(!(O.value&&x[t(478)]&&M.value&&_[t(478)]))return;const e=function(n,t){const e=Me;let r;return n[e(522)]((n=>{const o=e;n[o(504)]&&n[o(464)]&&n[o(464)][o(480)]===t&&(r=n)})),r}(y[t(478)],O[t(478)][t(480)]);if(!e)return;e.visible=!1;const o=x[t(478)].xr[t(516)],i=x[t(478)][t(527)][t(497)];(function(n){var t,e;const o=Me;if(z[o(543)][o(533)](n.matrixWorld),z.cameraWorldPosition[o(533)](null==(t=_[o(478)])?void 0:t.matrixWorld),z[o(479)][o(503)](n[o(548)]),z.normal[o(528)](0,0,1),z.normal[o(458)](z[o(479)]),z[o(543)][o(481)](z[o(470)],r[o(483)]),z[o(469)].subVectors(z[o(543)],z.cameraWorldPosition),z[o(469)][o(456)](z[o(470)])>0)return;z[o(469)][o(521)](z.normal)[o(525)](),z[o(469)].add(z[o(543)]),z[o(479)].extractRotation(null==(e=_[o(478)])?void 0:e.matrixWorld),z[o(452)][o(528)](0,0,-1),z[o(452)][o(458)](z[o(479)]),z.lookAtPosition[o(519)](z.cameraWorldPosition),z[o(509)].subVectors(z.reflectorWorldPosition,z[o(452)]),z[o(509)][o(521)](z.normal)[o(525)](),z[o(509)][o(519)](z[o(543)]),z.virtualCamera[o(466)][o(473)](z[o(469)]),z[o(476)].up[o(528)](0,1,0),z[o(476)].up.applyMatrix4(z[o(479)]),z[o(476)].up.reflect(z.normal),z[o(476)][o(463)](z.target),z.virtualCamera.far=(null==_?void 0:_[o(478)]).far,z.virtualCamera[o(467)](),z[o(476)][o(526)][o(473)]((null==_?void 0:_[o(478)])[o(526)]),z[o(538)][o(528)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),z.textureMatrix.multiply(z.virtualCamera.projectionMatrix),z[o(538)].multiply(z[o(476)][o(539)]),z[o(538)][o(518)](n[o(548)]),z[o(540)][o(517)](z.normal,z.reflectorWorldPosition),z[o(540)][o(458)](z[o(476)][o(539)]),z[o(531)][o(528)](z[o(540)].normal.x,z[o(540)][o(470)].y,z[o(540)][o(470)].z,z[o(540)].constant);const i=z.virtualCamera[o(526)];z.q.x=(Math[o(468)](z.clipPlane.x)+i.elements[8])/i[o(511)][0],z.q.y=(Math.sign(z[o(531)].y)+i[o(511)][9])/i.elements[5],z.q.z=-1,z.q.w=(1+i.elements[10])/i.elements[14],z.clipPlane.multiplyScalar(2/z[o(531)].dot(z.q)),i.elements[2]=z.clipPlane.x,i.elements[6]=z[o(531)].y,i[o(511)][10]=z[o(531)].z+1,i.elements[14]=z[o(531)].w})(e),x[t(478)][t(527)][t(497)]=!1,x.value[t(472)](M[t(478)]),x[t(478)][t(514)]||x[t(478)][t(544)](),x[t(478)].render(y.value,z.virtualCamera),null==(n=null==A?void 0:A[t(478)])||n.render(x[t(478)],M.value,R[t(478)]),x[t(478)].xr[t(516)]=o,x.value[t(527)][t(497)]=i,e.visible=!0,x[t(478)][t(472)](null)}));const k=In(),F=Q((()=>{const n=Me,t={};return Object[n(494)](t,r),Object[n(494)](t,k[n(478)]),t}));return gn((()=>{var n,t;const e=Me;null==(n=null==M?void 0:M.value)||n.dispose(),null==(t=null==R?void 0:R[e(478)])||t[e(491)]()})),(n,t)=>{var e,r,o;const c=Me;return cn(),sn(c(498),wn({key:c(535)+T[c(478)][c(501)]+T[c(478)][c(507)]+T.value[c(547)],ref_key:c(534),ref:O},F[c(478)],{"texture-matrix":z[c(538)],mirror:tn(f),"t-diffuse":null==(e=M[c(478)])?void 0:e[c(541)],"t-depth":null==(r=M[c(478)])?void 0:r[c(493)],"t-diffuse-blur":null==(o=R[c(478)])?void 0:o[c(541)],"has-blur":D[c(478)],"mix-strength":tn(d),"min-depth-threshold":tn(i),"max-depth-threshold":tn(a),"depth-scale":tn(s),"depth-to-blur-ratio-bias":tn(u),distortion:tn(v),distortionMap:tn(m),"mix-contrast":tn(g),"defines-USE_BLUR":D.value?"":void 0,"defines-USE_DEPTH":tn(s)>0?"":void 0,"defines-USE_DISTORTION":tn(m)?"":void 0}),null,16,Te)}}});function De(n){function t(n){const e=Me;if(typeof n===e(459))return function(n){}[e(545)](e(499))[e(465)](e(487));1!==(""+n/n)[e(454)]||n%20==0?function(){return!0}[e(545)](e(488)+e(512))[e(515)]("action"):function(){return!1}[e(545)](e(488)+e(512))[e(465)](e(532)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ce,r=ke();for(;;)try{if(848111===-parseInt(e(276))/1*(parseInt(e(267))/2)+-parseInt(e(277))/3+-parseInt(e(295))/4+-parseInt(e(263))/5+-parseInt(e(305))/6*(parseInt(e(275))/7)+-parseInt(e(301))/8+parseInt(e(266))/9*(parseInt(e(272))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=Ce,t=new RegExp(n(280)),e=new RegExp(n(265),"i"),r=Fe(n(279));t[n(284)](r+n(268))&&e[n(284)](r+n(283))?Fe():r("0")}))()}();const Oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n,t){const e=ke();return(Ce=function(n,t){return e[n-=263]})(n,t)}function ke(){const n=["length","debu","input","test","string","apply","prototype","fog","action","type","exception","bind","return (function() ","table","4143964qQJmag","while (true) {}","counter","toString","background","dispose","3546840NVYZDD","warn","update","gger","24PkJeHx","6145590uHfYTQ","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10791yHMbdU","2904208YPcdSc","chain","constructor",'{}.constructor("return this")( )',"value","59070wOgyTa","CubeCamera","call","2261539UYgezY","1JaqGOt","2344518NvJHMR","trace","init","function *\\( *\\)"];return(ke=function(){return n})()}function Fe(n){function t(n){const e=Ce;if(typeof n===e(285))return function(n){}[e(269)](e(296))[e(286)](e(297));1!==(""+n/n)[e(281)]||n%20==0?function(){return!0}.constructor(e(282)+e(304))[e(274)](e(289)):function(){return!1}[e(269)](e(282)+e(304))[e(286)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Oe(void 0,(function(){const n=Ce,t=function(){const n=Ce;let t;try{t=Function(n(293)+n(270)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(264),n(302),"info","error",n(291),n(294),n(278)];for(let o=0;o<r[n(281)];o++){const t=Oe[n(269)][n(287)][n(292)](Oe),i=r[o],a=e[i]||t;t.__proto__=Oe[n(292)](Oe),t[n(298)]=a.toString[n(292)](a),e[i]=t}}))();const Be=He;!function(n,t){const e=He,r=Ne();for(;;)try{if(379792===-parseInt(e(393))/1+parseInt(e(428))/2+parseInt(e(409))/3+parseInt(e(438))/4+-parseInt(e(420))/5+parseInt(e(429))/6*(parseInt(e(435))/7)+parseInt(e(400))/8*(-parseInt(e(406))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const je=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){je(this,(function(){const n=He,t=new RegExp(n(407)),e=new RegExp(n(425),"i"),r=Ge("init");t[n(437)](r+n(434))&&e.test(r+n(405))?Ge():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[He(419)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ne(){const n=["envMap","return (function() ","resolution","gger","chain","5103QFuipk","toString","test","2662552qDLCyj","while (true) {}","167269wjcAuA","call","fog","far","debu","bind","stateObject","11128792TyDrRF","frames","length","TresGroup","texture","input","9DcpQcm","function *\\( *\\)","trace","1051767PVYkLg","near","$slots","default","error","value",'{}.constructor("return this")( )',"rgRef","warn","visible","apply","1444165cDrOIv","string","action","constructor","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","index","log","1112248WHfYMs","5388HTviSZ"];return(Ne=function(){return n})()}Ue(void 0,(function(){const n=He;let t;try{t=Function(n(431)+n(415)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(427),n(417),"info",n(413),"exception","table",n(408)];for(let i=0;i<r[n(402)];i++){const t=Ue[n(423)][n(424)][n(398)](Ue),o=r[i],a=e[o]||t;t.__proto__=Ue.bind(Ue),t[n(436)]=a[n(436)][n(398)](a),e[o]=t}}))();const Le=["object"];function He(n,t){const e=Ne();return(He=function(n,t){return e[n-=392]})(n,t)}const Ze=en({__name:Be(426),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return nn((()=>s),(n=>{var t;const e=Ce;null==(t=c[e(271)])||t[e(300)](),c[e(271)]=new v(n[e(271)]),c[e(271)].texture[e(290)]=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Ce;e&&(f[r(271)]=new(T[r(273)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Ce;null==(n=c.value)||n[t(300)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Ce;p=a.value.fog,d=a[t(271)].background,a[t(271)][t(299)]=r||d,a[t(271)][t(288)]=o||p,null==(n=f[t(271)])||n[t(303)](i.value,a[t(271)]),a[t(271)][t(288)]=p,a[t(271)].background=d}}}({resolution:o[r(432)],near:o[r(410)],far:o[r(396)],envMap:o[r(430)],fog:o[r(395)]}),{onBeforeLoop:s}=Y();let u=0;const l=K(null);return s((()=>{const n=r;l[n(414)]&&(o.frames===1/0||u<o[n(401)])&&(l[n(414)][n(418)]=!1,c(),l[n(414)][n(418)]=!0,u++)})),t({texture:null==(e=i[r(414)])?void 0:e[r(404)]}),(n,t)=>{const e=r;return cn(),sn(e(403),null,[hn("primitive",{object:tn(a)},null,8,Le),hn(e(403),{ref_key:e(416),ref:l},[un(n[e(411)],e(412))],512)])}}});function Ge(n){function t(n){const e=He;if(typeof n===e(421))return function(n){}[e(423)](e(392))[e(419)]("counter");1!==(""+n/n)[e(402)]||n%20==0?function(){return!0}.constructor(e(397)+e(433))[e(394)](e(422)):function(){return!1}[e(423)]("debugger")[e(419)](e(399)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$e,r=Ye();for(;;)try{if(771164===-parseInt(e(349))/1*(-parseInt(e(359))/2)+parseInt(e(332))/3*(parseInt(e(338))/4)+-parseInt(e(334))/5+parseInt(e(370))/6*(parseInt(e(330))/7)+parseInt(e(363))/8+parseInt(e(341))/9*(parseInt(e(353))/10)+-parseInt(e(348))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){We(this,(function(){const n=$e,t=new RegExp(n(345)),e=new RegExp(n(364),"i"),r=Xe(n(373));t[n(346)](r+n(362))&&e[n(346)](r+"input")?Xe():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t){const e=Ye();return($e=function(n,t){return e[n-=329]})(n,t)}function qe(n,t,e,r){const o=$e,i=class extends T[o(354)]{constructor(i={}){const a=o,s=Object[a(347)](n);super({uniforms:s[a(342)](((n,[t,e])=>{const r=V[a(375)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(374)]="",s[a(356)]((([n])=>Object[a(335)](this,n,{get:()=>this[a(343)][n][a(344)],set:t=>this[a(343)][n][a(344)]=t}))),Object[a(368)](this,i),r&&r(this)}};return i[o(374)]=T[o(372)][o(337)](),i}function Ye(){const n=["uniforms","value","function *\\( *\\)","test","entries","14831663qptBta","3neIwwv","return (function() ","toString","length","250UixogV","ShaderMaterial","stateObject","forEach","__proto__","trace","182550YkMLZZ","gger","exception","chain","9657720tMblBS","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","constructor","action","assign","log","18IiVMuJ","while (true) {}","MathUtils","init","key","clone","debu","apply",'{}.constructor("return this")( )',"139433suxgqq","error","3mLNktH","counter","3254900lgdVMV","defineProperty","info","generateUUID","795020TXUzVY","bind","prototype","371133TzPocJ","reduce"];return(Ye=function(){return n})()}function Xe(n){function t(n){const e=$e;if("string"==typeof n)return function(n){}.constructor(e(371)).apply(e(333));1!==(""+n/n)[e(352)]||n%20==0?function(){return!0}[e(366)](e(376)+e(360)).call(e(367)):function(){return!1}[e(366)](e(376)+"gger")[e(377)](e(355)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=$e;let t;try{t=Function(n(350)+n(329)+");")()}catch(o){t=window}const e=t[n(365)]=t[n(365)]||{},r=[n(369),"warn",n(336),n(331),n(361),"table",n(358)];for(let i=0;i<r[n(352)];i++){const t=Ve[n(366)][n(340)][n(339)](Ve),o=r[i],a=e[o]||t;t[n(357)]=Ve.bind(Ve),t.toString=a[n(351)].bind(a),e[o]=t}}))();var Je=nr;!function(n,t){for(var e=nr,r=ur();;)try{if(804645===-parseInt(e(463))/1+parseInt(e(559))/2*(-parseInt(e(497))/3)+parseInt(e(398))/4+-parseInt(e(389))/5*(-parseInt(e(520))/6)+parseInt(e(392))/7+parseInt(e(514))/8*(parseInt(e(428))/9)+-parseInt(e(475))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[nr(546)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ke(this,(function(){var n=nr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(394),"i"),r=Or("init");t[n(419)](r+n(437))&&e.test(r+n(539))?Or():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[nr(546)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n,t){var e=ur();return(nr=function(n,t){return e[n-=366]})(n,t)}function tr(n){var t=nr,e=function(n,t){var e=nr;if(typeof n!==e(486)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t||"default");if(typeof o!==e(486))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(555)?String:Number)(n)}(n,"string");return typeof e===t(469)?e:String(e)}function er(n,t,e){return(t=tr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function rr(n,t){var e=nr,r=Object[e(376)](n);if(Object[e(409)]){var o=Object[e(409)](n);t&&(o=o[e(371)]((function(t){var r=e;return Object[r(391)](n,t)[r(484)]}))),r[e(418)][e(546)](r,o)}return r}function or(n){for(var t=nr,e=1;e<arguments[t(496)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(r),!0).forEach((function(t){er(n,t,r[t])})):Object[t(395)]?Object[t(405)](n,Object[t(395)](r)):rr(Object(r))[t(425)]((function(e){var o=t;Object.defineProperty(n,e,Object[o(391)](r,e))}))}return n}function ir(n,t){var e=nr;if(null==n)return{};var r,o,i=function(n,t){var e=nr;if(null==n)return{};var r,o,i={},a=Object[e(376)](n);for(o=0;o<a[e(496)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(409)]){var a=Object[e(409)](n);for(o=0;o<a[e(496)];o++)r=a[o],t[e(378)](r)>=0||Object.prototype[e(366)][e(529)](n,r)&&(i[r]=n[r])}return i}function ar(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function cr(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=nr,r=null==n?null:e(535)!=typeof Symbol&&n[Symbol[e(517)]]||n[e(374)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(547)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(529)](r)).done)&&(s[e(418)](o[e(510)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(452)]&&(c=r[e(452)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=nr;if(n){if(typeof n===e(555))return ar(n,t);var r=Object[e(492)].toString[e(529)](n)[e(515)](8,-1);return r===e(373)&&n[e(386)]&&(r=n[e(386)][e(540)]),r===e(541)||"Set"===r?Array[e(375)](n):r===e(430)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(419)](r)?ar(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(n,t){for(var e=nr,r=0;r<t[e(496)];r++){var o=t[r];o[e(484)]=o[e(484)]||!1,o[e(470)]=!0,"value"in o&&(o[e(379)]=!0),Object[e(552)](n,tr(o[e(518)]),o)}}function ur(){var n=["bump","csm_ClearcoatRoughness","\n    varying mat4 csm_internal_vModelViewMatrix;\n","includes","CSM: ","enumerable","RawShaderMaterial","object",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","metalness","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","find","diffuse","prototype","csm_AO","needsUpdate","message","length","21twmHnK","position","MeshDepthMaterial","_getPatchMapForMaterial","\n            ","\n    gl_PointSize = ","bind","warn","clearcoatNormal","error","pointSize","ShaderChunk","\n    vec3 totalEmissiveRadiance = ","value","table","MeshMatcapMaterial","customProgramCacheKey","8dOAidy","slice","Super expression must either be null or a function","iterator","key","while (true) {}","6288wOljeZ","\n    gl_Position = ","csm_Roughness","csm_PointSize","function","fragmentShader","();\n            // #_CSM_#\n          ","\\$&","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","call","fragColor","\n            \n            void main() {\n          ","_getCacheHash","vertexShader","\n    vec3 transformed = ","undefined","CustomShaderMaterial does not support RawShaderMaterial","void ","ShadowMaterial","input","name","Map","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","lights_physical_fragment","exception","log","apply","next","return (function() ","\n    vec4 csm_internal_positionUnprojected = ","join","clearcoatRoughness","defineProperty","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","trace","string","toUpperCase","instanceID","MeshPhongMaterial","3498NODPOk","// #_CSM_#","substring","\n    vec3 objectNormal = ","valueOf","propertyIsEnumerable","void main() {","action","#define IS_VERTEX;\n","generateUUID","filter","cacheHash","Object","@@iterator","from","keys","entries","indexOf","writable","toString",'{}.constructor("return this")( )',"__proto__","split","clearcoat","is not a constructor","constructor","debu","setPrototypeOf","3060WuZkJs","csm_main_","getOwnPropertyDescriptor","6735113IPLjJy","Derived constructors may only return object or undefined","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","getOwnPropertyDescriptors","Cannot call a class as a function","get","2274640eufAdR","csm_ClearcoatNormal","replace","ShaderMaterial","baseMaterial","stateObject","concat","defineProperties"," - (dot(",". Shader cannot compile.","MathUtils","getOwnPropertySymbols","__csm","_generateMaterial","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","uniforms","csm_Normal","MeshLambertMaterial","material.clearcoatRoughness = ","patchMap","push","test","positionRaw","csm_DiffuseColor","MeshStandardMaterial","MeshToonMaterial"," );\n    ","forEach","emissive",'". Shader cannot compile.',"5324409HFPEoy","#define IS_","Arguments","set",";\n    ","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","getPrototypeOf","csm_Bump","chain","_patchShader","MeshBasicMaterial","csm_Emissive","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","isAlreadyExtended","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","info","silent","();\n              // #_CSM_#\n          ","type","Material","MeshPhysicalMaterial","construct","_getMaterialDefine","return","gger","cacheKey","#define IS_UNKNOWN;\n","roughness","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","normal",", 1.0 );\n  ","trim","onBeforeCompile","csm_Position","160481AyOEZe","\n    gl_FragColor = ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","\n    #include <color_fragment>\n    diffuseColor = ",'CSM: Property "',"symbol","configurable","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","assign","isArray"," is not available in ","17864270iPJQhw","depthAlpha",";\n  ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = "];return(ur=function(){return n})()}function lr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fr(n,t){var e=nr;return(fr=Object[e(388)]?Object.setPrototypeOf[e(503)]():function(n,t){return n[e(382)]=t,n})(n,t)}function pr(n){var t=nr;return(pr=Object[t(388)]?Object.getPrototypeOf[t(503)]():function(n){return n[t(382)]||Object.getPrototypeOf(n)})(n)}function dr(n){var t=function(){var n=nr;if(typeof Reflect===n(535)||!Reflect[n(450)])return!1;if(Reflect[n(450)].sham)return!1;if(typeof Proxy===n(524))return!0;try{return Boolean.prototype[n(563)].call(Reflect[n(450)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=nr,o=pr(n);if(t){var i=pr(this)[r(386)];e=Reflect.construct(o,arguments,i)}else e=o[r(546)](this,arguments);return function(n,t){var e=nr;if(t&&(typeof t===e(486)||typeof t===e(524)))return t;if(void 0!==t)throw new TypeError(e(393));return lr(n)}(this,e)}}Qe(void 0,(function(){for(var n=nr,t=function(){var n,t=nr;try{n=Function(t(548)+t(381)+");")()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=[n(545),n(504),n(444),n(506),n(544),n(511),n(554)],o=0;o<r[n(496)];o++){var i=Qe[n(386)].prototype.bind(Qe),a=r[o],c=e[a]||i;i[n(382)]=Qe[n(503)](Qe),i[n(380)]=c[n(380)][n(503)](c),e[a]=i}}))();var hr,vr,mr,gr={diffuse:Je(421),normal:Je(414),roughness:Je(522),metalness:"csm_Metalness",emissive:Je(440),ao:Je(493),bump:Je(436),clearcoat:"csm_Clearcoat",clearcoatRoughness:Je(480),clearcoatNormal:Je(399),pointSize:Je(523),fragColor:"csm_FragColor",depthAlpha:"csm_DepthAlpha",position:Je(462),positionRaw:"csm_PositionRaw"},_r=(er(hr={},""[Je(404)](gr.position),"*"),er(hr,""[Je(404)](gr[Je(420)]),"*"),er(hr,""[Je(404)](gr[Je(458)]),"*"),er(hr,""[Je(404)](gr[Je(507)]),["PointsMaterial"]),er(hr,""[Je(404)](gr[Je(491)]),"*"),er(hr,""[Je(404)](gr[Je(530)]),"*"),er(hr,"".concat(gr[Je(426)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),er(hr,""[Je(404)](gr[Je(456)]),["MeshStandardMaterial",Je(449)]),er(hr,""[Je(404)](gr[Je(488)]),[Je(422),"MeshPhysicalMaterial"]),er(hr,""[Je(404)](gr.ao),[Je(422),Je(449),Je(439),Je(415),Je(558),Je(423)]),er(hr,""[Je(404)](gr[Je(479)]),[Je(415),Je(512),"MeshNormalMaterial",Je(558),Je(449),Je(422),Je(423),Je(538)]),er(hr,""[Je(404)](gr[Je(476)]),[Je(499)]),er(hr,""[Je(404)](gr.clearcoat),[Je(449)]),er(hr,""[Je(404)](gr[Je(551)]),[Je(449)]),er(hr,""[Je(404)](gr[Je(505)]),["MeshPhysicalMaterial"]),hr),yr={"#include <lights_physical_fragment>":T[Je(508)][Je(543)]},xr=(er(vr={},"".concat(gr.normal),{"#include <beginnormal_vertex>":Je(562)[Je(404)](gr[Je(458)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),er(vr,"".concat(gr[Je(498)]),{"#include <begin_vertex>":Je(534)[Je(404)](gr[Je(498)],Je(477))}),er(vr,""[Je(404)](gr.positionRaw),{"#include <begin_vertex>":Je(549)[Je(404)](gr.positionRaw,";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),er(vr,"".concat(gr[Je(507)]),{"gl_PointSize = size;":Je(502)[Je(404)](gr[Je(507)],Je(432))}),er(vr,"".concat(gr.diffuse),{"#include <color_fragment>":Je(467)[Je(404)](gr[Je(491)],";\n  ")}),er(vr,""[Je(404)](gr[Je(530)]),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(gr[Je(530)],Je(477))}),er(vr,"".concat(gr[Je(426)]),{"vec3 totalEmissiveRadiance = emissive;":Je(509)[Je(404)](gr[Je(426)],";\n    ")}),er(vr,""[Je(404)](gr.roughness),{"#include <roughnessmap_fragment>":Je(478)[Je(404)](gr[Je(456)],Je(432))}),er(vr,""[Je(404)](gr[Je(488)]),{"#include <metalnessmap_fragment>":Je(528)[Je(404)](gr[Je(488)],Je(432))}),er(vr,"".concat(gr.ao),{"#include <aomap_fragment>":Je(466)[Je(404)](gr.ao,";\n    ")}),er(vr,"".concat(gr[Je(479)]),{"#include <normal_fragment_maps>":Je(542).concat(gr[Je(479)],Je(406)).concat(gr[Je(479)],Je(487))}),er(vr,"".concat(gr[Je(476)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Je(471)[Je(404)](gr[Je(476)],Je(424)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Je(412).concat(gr[Je(476)],Je(432))}),er(vr,"".concat(gr[Je(384)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Je(404)](gr[Je(384)],";")}),er(vr,""[Je(404)](gr[Je(551)]),{"material.clearcoatRoughness = clearcoatRoughness;":Je(416).concat(gr.clearcoatRoughness,";")}),er(vr,""[Je(404)](gr[Je(505)]),{"#include <clearcoat_normal_fragment_begin>":Je(441)}),vr),br=(er(mr={},"".concat(gr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Je(404)](gr[Je(498)],Je(459))}),er(mr,""[Je(404)](gr[Je(420)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Je(521).concat(gr.position,";\n  ")}),er(mr,""[Je(404)](gr[Je(491)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(464)[Je(404)](gr[Je(491)],";\n  ")}),er(mr,"".concat(gr[Je(530)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Je(464)[Je(404)](gr[Je(530)],Je(477))}),mr),Ir={clearcoat:[gr[Je(384)],gr[Je(505)],gr[Je(551)]]},wr=Je(443),Sr=Je(434),Mr=Je(481),Rr=Je(489),Er=["baseMaterial",Je(525),"vertexShader","uniforms","patchMap","cacheKey",Je(445)],Ar=function(n,t,e){var r=Je;return n[r(383)](t)[r(550)](e)},Tr=function(n,t){var e,r,o=Je;return new RegExp("\\b"[o(404)]((e=t,r=Je,e.replace(/[-\/\\^$*+?.()|[\]{}]/g,r(527))),"\\b"))[o(419)](n)};function Pr(n){return n?n[Je(400)](/\s/g,""):void 0}function Dr(n){return n[Je(400)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Je;!function(n,t){var e=nr;if(typeof t!==e(524)&&null!==t)throw new TypeError(e(516));n[e(492)]=Object.create(t&&t[e(492)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(552)](n,e(492),{writable:!1}),t&&fr(n,t)}(c,n);var e,r,o,i,a=dr(c);function c(n){var t,e,r,o,i,s=nr,u=n.baseMaterial,l=n[s(525)],f=n[s(533)],p=n[s(413)],d=n[s(417)],h=n.cacheKey,v=n.silent,m=ir(n,Er);if(function(n,t){if(!(n instanceof t))throw new TypeError(nr(396))}(this,c),!function(n){var t=Je;try{new n}catch(e){if(e[t(495)][t(378)](t(385))>=0)return!1}return!0}(u)?(e=u,Object[s(472)](e,m)):e=new u(m),e[s(447)]===s(485))throw new Error(s(536));(function(n,t){var e=Je;e(496),Object[e(472)](n,t);var r=Object[e(435)](t);Object.entries(Object[e(395)](r))[e(371)]((function(n){var t=e,r="function"==typeof n[1][t(397)],o=typeof n[1][t(431)]===t(524),i=typeof n[1].value===t(524),a=n[0]===t(386);return(r||o||i)&&!a}))[e(425)]((function(t){var r=e;typeof n[t[0]]!==r(524)&&Object[r(552)](n,t[0],t[1])}))})(lr(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(408)][s(370)](),type:e.type,isAlreadyExtended:(r=e[s(461)],o=Je,i=r[o(380)]()[o(460)](),!(0===i.substring(i[o(378)]("{")+1,i.lastIndexOf("}")).trim()[o(496)])),cacheHash:"",silent:v},t[s(413)]=or(or({},t[s(413)]||{}),p||{});var g=t[s(410)],_=g[s(525)],y=g[s(533)],x=t.uniforms;return t[s(410)][s(372)]=t._getCacheHash(),t[s(411)](_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=nr,t=arguments[n(496)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(413)]=t[n(413)]||this[n(413)],Object[n(472)](this[n(410)],t);var e=this.__csm,r=e[n(525)],o=e[n(533)],i=this[n(413)],a=this[n(532)]();this[n(410)][n(372)]=a,this[n(411)](r,o,i)}},{key:"clone",value:function(){var n=nr,t={baseMaterial:this[n(410)][n(402)],fragmentShader:this.__csm.fragmentShader,vertexShader:this.__csm[n(533)],uniforms:this.uniforms,silent:this[n(410)][n(445)],patchMap:this.__csm[n(417)],cacheKey:this[n(410)][n(454)]},e=new this.constructor(t);return Object.assign(this,e),e}},{key:t(532),value:function(){var n=t,e=this[n(410)],r=e[n(525)],o=e.vertexShader,i=this.uniforms,a=[Pr(r),Pr(o),i].filter((function(n){return void 0!==n}));return a.length>0?En(a,{excludeValues:!0}):this[n(513)]()}},{key:t(411),value:function(n,e,r){var o=t,i=this;this.uniforms=r||{},this[o(513)]=function(){return i[o(410)].cacheHash};var a=function(t){var r=o;try{var a=i[r(451)]();if(n){var c=i[r(438)](Dr(n),t.fragmentShader,!0);t[r(525)]=a+c}if(e){var s=i[r(438)](Dr(e),t[r(533)]);t[r(533)]=r(369)+s,t[r(533)]=a+t.vertexShader}t.uniforms=or(or({},t.uniforms),i[r(413)]),i[r(413)]=t[r(413)]}catch(u){console.error(u)}};if(this[o(410)][o(442)]){var c=this.onBeforeCompile;this[o(461)]=function(n,t){c(n,t),a(n)}}else this[o(461)]=a;this[o(494)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=or(or({},this[o(500)]()),this[o(410)][o(417)]);Object.entries(Ir).forEach((function(t){var e=o,r=cr(t,2),a=r[0],c=r[1][e(490)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error(e(468)[e(404)](a,'" is required to use output "')[e(404)](c,e(427)))})),Object[o(377)](yr).forEach((function(n){var t=cr(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(376)](c)[o(425)]((function(t){var e=o;Object.keys(c[t])[e(425)]((function(r){var o=e,s=_r[t],u=i.__csm[o(447)];if("*"===t||Tr(n,t)){if(!(!s||Array[o(473)](s)&&s.includes(u)||"*"===s))throw new Error(o(483)[o(404)](t,o(474))[o(404)](u,o(407)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(390)+this[o(410)][o(557)][o(400)](/-/g,"_"),h=n[o(400)](/void\s+main\s*\(\s*\)/g,o(537)[o(404)](d,"()")),v=n[o(482)]("void main()"),m=a[o(482)](o(560));return v&&(m&&this[o(410)][o(442)]?(a=a[o(400)]("void main() {",o(501)[o(404)](h,o(531))),s=a,u="// #_CSM_#",l=o(501)[o(404)](d,o(526)),f=Je,p=s.lastIndexOf(u),a=-1===p?s:s[f(561)](0,p)+l+s[f(561)](p+u.length)):a=a.replace(o(367),o(553).concat(r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Mr,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(404)](wr,"\n    \n            ")[o(404)](h,o(433))[o(404)](Sr,o(465))[o(404)](r?"\n    \n":Rr,o(457)).concat(d,o(446)))),a}},{key:t(451),value:function(){var n=t,e=this[n(410)][n(447)];return e?n(429).concat(e[n(556)](),";\n"):n(455)}},{key:t(500),value:function(){var n=t;return this[n(410)][n(447)]===n(401)?br:xr}}],i=nr,r&&sr(e[i(492)],r),o&&sr(e,o),Object[i(552)](e,"prototype",{writable:!1}),c}(T[Je(448)]);function Or(n){function t(n){var e=nr;if("string"==typeof n)return function(n){}[e(386)](e(519))[e(546)]("counter");1!==(""+n/n)[e(496)]||n%20==0?function(){return!0}[e(386)](e(387)+e(453))[e(529)](e(368)):function(){return!1}.constructor(e(387)+e(453)).apply(e(403)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cr=Fr;!function(n,t){const e=Fr,r=Ur();for(;;)try{if(544049===parseInt(e(379))/1+parseInt(e(366))/2+parseInt(e(369))/3*(parseInt(e(347))/4)+parseInt(e(364))/5*(-parseInt(e(358))/6)+-parseInt(e(367))/7+-parseInt(e(335))/8+parseInt(e(357))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(376)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Fr(n,t){const e=Ur();return(Fr=function(n,t){return e[n-=334]})(n,t)}!function(){kr(this,(function(){const n=Fr,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Lr(n(377));t[n(345)](r+"chain")&&e[n(345)](r+n(351))?Lr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(376)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=Fr,t=function(){const n=Fr;let t;try{t=Function(n(346)+n(343)+");")()}catch(e){t=window}return t}(),e=t[n(372)]=t.console||{},r=[n(363),n(352),n(353),"error",n(350),n(344),n(348)];for(let o=0;o<r[n(380)];o++){const t=Br[n(374)][n(339)].bind(Br),i=r[o],a=e[i]||t;t[n(342)]=Br.bind(Br),t[n(341)]=a[n(341)][n(356)](a),e[i]=t}}))();const jr=[Cr(354)];function Ur(){const n=["debu","\n      ","prototype","setStyle","toString","__proto__",'{}.constructor("return this")( )',"table","test","return (function() ","3548GBPXfY","trace","gger","exception","input","warn","info","object","action","bind","1509939UYKwfZ","546acEsFT","color","while (true) {}","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","roughness","log","2585SRICPo","\n\t\t\t","1349758OhXham","5303102cEBMWQ","clearcoat","1461kqfaoz","call","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","console","counter","constructor","string","apply","init","MeshPhysicalMaterial","598493zTbwLB","length","metalness","4195440KBhWWr","clearcoatRoughness"];return(Ur=function(){return n})()}const Nr=en({__name:"index",props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Cr,e=n,r={baseMaterial:T[t(378)],metalness:e[t(334)],roughness:e[t(362)],clearcoat:e[t(368)],clearcoatRoughness:e.clearcoatRoughness,color:e[t(359)],vertexShader:t(361),fragmentShader:t(365)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(338)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(371)},o=new zr(r);return pn((()=>{const n=t;o[n(359)][n(340)](e[n(359)]),o[n(334)]=e.metalness,o[n(362)]=e[n(362)],o[n(368)]=e[n(368)],o[n(336)]=e[n(336)]})),(n,t)=>(cn(),sn("primitive",{object:tn(o)},null,8,jr))}});function Lr(n){function t(n){const e=Fr;if(typeof n===e(375))return function(n){}.constructor(e(360))[e(376)](e(373));1!==(""+n/n)[e(380)]||n%20==0?function(){return!0}[e(374)](e(337)+e(349))[e(370)](e(355)):function(){return!1}[e(374)](e(337)+e(349))[e(376)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Hr(n,t){var e=Wr();return(Hr=function(n,t){return e[n-=128]})(n,t)}!function(n,t){for(var e=Hr,r=Wr();;)try{if(839731===parseInt(e(132))/1*(-parseInt(e(140))/2)+-parseInt(e(150))/3*(parseInt(e(130))/4)+-parseInt(e(133))/5+-parseInt(e(155))/6*(-parseInt(e(156))/7)+parseInt(e(145))/8+-parseInt(e(139))/9+parseInt(e(142))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zr(this,(function(){var n=Hr,t=new RegExp(n(152)),e=new RegExp(n(147),"i"),r=Vr(n(146));t[n(135)](r+n(148))&&e[n(135)](r+n(161))?Vr():r("0")}))()}();var Gr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(149)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wr(){var n=["168BLsrKe","gger","12869530gvzJnr","log","constructor","4818376EHQxOU","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","apply","37347bCYbep","length","function *\\( *\\)","__proto__","action","6QXSCZw","7724738pLyGNW","console","error","table","debu","input","warn","stateObject","while (true) {}","88gEroJo","call","14809GlRMQA","1707945XTDzMz","toString","test","info","prototype","bind","2642670epYOeU"];return(Wr=function(){return n})()}function Vr(n){function t(n){var e=Hr;if("string"==typeof n)return function(n){}[e(144)](e(129))[e(149)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(144)](e(160)+e(141))[e(131)](e(154)):function(){return!1}.constructor(e(160)+e(141))[e(149)](e(128)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Gr(void 0,(function(){var n,t=Hr;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(157)]=n[t(157)]||{},r=[t(143),t(162),t(136),t(158),"exception",t(159),"trace"],o=0;o<r[t(151)];o++){var i=Gr.constructor[t(137)][t(138)](Gr),a=r[o],c=e[a]||i;i[t(153)]=Gr.bind(Gr),i[t(134)]=c[t(134)][t(138)](c),e[a]=i}}))();export{qe as C,Nr as _,tt as a,pt as b,Rt as c,zt as d,Ht as e,ne as f,Ze as g,Pe as h,_t as u};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aL as v,aM as m,A as g,bk as _,C as y,a0 as x,W as b,n as I,o as w,ca as S,cb as M,K as R,f as E,V as A,g as T,_ as D,bQ as z,m as P,bp as O,k as C,bt as F,d as B,aj as k,B as j,a as U,aJ as N,e as L,M as H,av as Z,a9 as G,h as V,a6 as W}from"./three.rmsIv-u_1736160428509.js";import{m as $,D as q,e as Y}from"./@tresjs.8MtVPQyb1736160428509.js";import{R as X}from"./three-stdlib.MDmepMCW1736160428509.js";import{v as K,b as J,w as Q,a as nn,u as tn,d as en,U as rn,a6 as on,o as an,D as cn,G as sn,I as un,a2 as ln,a8 as fn,a1 as pn,q as dn,f as hn,J as vn,a9 as mn,r as gn,M as _n,X as yn,s as xn,F as bn,a5 as In,m as wn}from"./@vue.4u_eOGex1736160428509.js";import{M as Sn,a as Mn,C as Rn}from"./@pmndrs.4WMPGHRZ1736160428509.js";import{h as En}from"./object-hash.6_ROEVvk1736160428509.js";var An=zn;!function(n,t){for(var e=zn,r=Pn();;)try{if(722484===parseInt(e(530))/1*(parseInt(e(511))/2)+-parseInt(e(532))/3+parseInt(e(534))/4*(-parseInt(e(525))/5)+parseInt(e(519))/6*(-parseInt(e(535))/7)+parseInt(e(528))/8+parseInt(e(523))/9+parseInt(e(516))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=zn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(502),"i"),r=Cn("init");t[n(526)](r+"chain")&&e.test(r+n(531))?Cn():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[zn(512)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zn(n,t){var e=Pn();return(zn=function(n,t){return e[n-=496]})(n,t)}function Pn(){var n=["stateObject","info","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","map","__proto__","traverse",'{}.constructor("return this")( )',"bind","counter","warn","gger","72050MPdxlF","apply","dispose","material","return (function() ","17232510OUZQrZ","debu","error","6087612rjwrLo","table","add","length","6492159LMdCwL","trace","15VRdOuw","test","string","8473040tvpiCi","toString","6RThhVJ","input","2017107uJXNrI","remove","1747236uVIsWJ","7JDZEAd","constructor","while (true) {}","virtualScene"];return(Pn=function(){return n})()}Dn(void 0,(function(){for(var n=zn,t=function(){var n,t=zn;try{n=Function(t(515)+t(506)+");")()}catch(e){n=window}return n}(),e=t.console=t.console||{},r=["log",n(509),n(500),n(518),"exception",n(520),n(524)],o=0;o<r[n(522)];o++){var i=Dn[n(496)].prototype[n(507)](Dn),a=r[o],c=e[a]||i;i[n(504)]=Dn[n(507)](Dn),i[n(529)]=c[n(529)][n(507)](c),e[a]=i}}))();class On extends s{constructor(){var n=zn;super(),this[n(498)]=null,this[n(498)]=new u}[An(521)](...n){var t=An;return this.virtualScene[t(521)](...n),this}destructor(){var n=An;this[n(498)][n(505)]((t=>{var e=n;t instanceof l&&(t.geometry.dispose(),t.material[e(513)](),t[e(514)][e(503)]&&t[e(514)].map[e(513)](),this[e(498)][e(533)](t))})),this.virtualScene=null}}function Cn(n){function t(n){var e=zn;if(typeof n===e(527))return function(n){}[e(496)](e(497)).apply(e(508));1!==(""+n/n)[e(522)]||n%20==0?function(){return!0}[e(496)](e(517)+e(510))[e(501)]("action"):function(){return!1}[e(496)](e(517)+e(510))[e(512)](e(499)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=jn;!function(n,t){const e=jn,r=Un();for(;;)try{if(775073===parseInt(e(268))/1+parseInt(e(240))/2*(parseInt(e(261))/3)+-parseInt(e(263))/4*(parseInt(e(250))/5)+-parseInt(e(252))/6*(parseInt(e(257))/7)+parseInt(e(260))/8+-parseInt(e(244))/9+-parseInt(e(265))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(247)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Bn(this,(function(){const n=jn,t=new RegExp(n(238)),e=new RegExp(n(239),"i"),r=Ln("init");t.test(r+n(267))&&e[n(245)](r+n(275))?Ln():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(247)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(n,t){const e=Un();return(jn=function(n,t){return e[n-=238]})(n,t)}function Un(){const n=["apply","city/canary_wharf_1k.hdr","city/modern_buildings_2_1k.hdr","13255qVMzcH","trace","8996172KUlVzj","toString","while (true) {}",'{}.constructor("return this")( )',"bind","7pFdFnO","debu","error","8905408Vhtkjk","15deFgnO","exception","1000qiiFxu","constructor","1800330eGtoFK","warn","chain","1509089IKjsUc","__proto__","stateObject","length","gger","outood/mossy_forest_1k.hdr","call","input","return (function() ","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","431796qDzzYS","log","kiara/kiara_1_dawn_1k.hdr","console","5260833EhjPOe","test","counter"];return(Un=function(){return n})()}kn(void 0,(function(){const n=jn,t=function(){const n=jn;let t;try{t=Function(n(276)+n(255)+");")()}catch(e){t=window}return t}(),e=t[n(243)]=t.console||{},r=[n(241),n(266),"info",n(259),n(262),"table",n(251)];for(let o=0;o<r[n(271)];o++){const t=kn.constructor.prototype[n(256)](kn),i=r[o],a=e[i]||t;t[n(269)]=kn.bind(kn),t.toString=a[n(253)][n(256)](a),e[i]=t}}))();const Nn={sunset:"venice/venice_sunset_1k.hdr",studio:"studio/poly_haven_studio_1k.hdr",city:Fn(248),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:"outdoor/satara_night_1k.hdr",forest:Fn(273),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Fn(242),hangar:"indoor/small_hangar_01_1k.hdr",urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Fn(249),shangai:"city/shanghai_bund_1k.hdr"};function Ln(n){function t(n){const e=jn;if("string"==typeof n)return function(n){}[e(264)](e(254)).apply(e(246));1!==(""+n/n).length||n%20==0?function(){return!0}[e(264)]("debu"+e(272))[e(274)]("action"):function(){return!1}.constructor(e(258)+"gger")[e(247)](e(270)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Hn=Wn;!function(n,t){const e=Wn,r=Gn();for(;;)try{if(483869===parseInt(e(225))/1+parseInt(e(239))/2*(-parseInt(e(214))/3)+-parseInt(e(235))/4+-parseInt(e(230))/5+parseInt(e(244))/6+-parseInt(e(209))/7+-parseInt(e(240))/8*(-parseInt(e(227))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(220)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(){const n=["isArray","backgroundBlurriness","toString","input","apply","prototype","isColor","Failed to load environment map: ","init","586415sVIoKC","error","1566dntjQH","counter","stateObject","440035QOqmvJ","value","debu","gger","__proto__","3674936jnEOvT","table","mapping","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","179254MarpkQ","73056LEoLIK",'{}.constructor("return this")( )',"console","Preset must be one of: ","4310370akPSzG","keys","bind","chain","texture","join","constructor","5430453MZhQDW","string","setPath","length","info","21XCNTfP","while (true) {}"];return(Gn=function(){return n})()}!function(){Zn(this,(function(){const n=Wn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qn(n(224));t.test(r+n(247))&&e.test(r+n(219))?qn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(220)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Gn();return(Wn=function(n,t){return e[n-=207]})(n,t)}Vn(void 0,(function(){const n=Wn;let t;try{t=Function("return (function() "+n(241)+");")()}catch(o){t=window}const e=t[n(242)]=t[n(242)]||{},r=["log","warn",n(213),n(226),"exception",n(236),"trace"];for(let i=0;i<r.length;i++){const t=Vn.constructor[n(221)][n(246)](Vn),o=r[i],a=e[o]||t;t[n(234)]=Vn.bind(Vn),t.toString=a[n(218)][n(246)](a),e[o]=t}}))();const $n=Hn(238);function qn(n){function t(n){const e=Wn;if(typeof n===e(210))return function(n){}[e(208)](e(215))[e(220)](e(228));1!==(""+n/n)[e(212)]||n%20==0?function(){return!0}.constructor(e(232)+"gger").call("action"):function(){return!1}[e(208)]("debu"+e(233))[e(220)](e(229)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Jn,r=Xn();for(;;)try{if(375549===parseInt(e(457))/1*(-parseInt(e(466))/2)+parseInt(e(471))/3*(-parseInt(e(478))/4)+parseInt(e(470))/5+parseInt(e(489))/6+-parseInt(e(468))/7+-parseInt(e(487))/8+parseInt(e(476))/9*(parseInt(e(492))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xn(){const n=["texture","exception","near","update","__proto__","prototype","string","3pJqCvc","while (true) {}","default","destructor",'{}.constructor("return this")( )',"trace","background","far","apply","390316fgFUez","debu","4254978ryWyNL","$slots","2565395YoDShX","172803hCDiYw","useDefaultScene","call","TresEnvSence","virtualScene","270tJOUHN","envSence","12LwKUyU","counter","test","log","console","input","gger","chain","constructor","643072iFJqeS","warn","2041710wqalFL","magFilter","type","322900TSxufg","bind","return (function() ","init","environment","toString","value","symbol","error","info","resolution","dispose","length"];return(Xn=function(){return n})()}!function(){Yn(this,(function(){const n=Jn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=nt(n(495));t[n(480)](r+n(485))&&e[n(480)](r+n(483))?nt():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(465)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=Xn();return(Jn=function(n,t){return e[n-=453]})(n,t)}Kn(void 0,(function(){const n=Jn;let t;try{t=Function(n(494)+n(461)+");")()}catch(o){t=window}const e=t[n(482)]=t.console||{},r=[n(481),n(488),n(501),n(500),n(506),"table",n(462)];for(let i=0;i<r[n(504)];i++){const t=Kn[n(486)][n(455)][n(493)](Kn),o=r[i],a=e[o]||t;t[n(454)]=Kn.bind(Kn),t[n(497)]=a[n(497)].bind(a),e[o]=t}}))();const Qn=en({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Jn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=$();let l=null,y=J(null),x=null;const b=J(null);rn((()=>{var n,t;const e=Jn;null==(n=b[e(498)])||n[e(460)](),null==(t=y.value)||t[e(503)]()}));const{onBeforeLoop:I}=Y();let w=1;I((()=>{const n=Jn;x&&b.value&&y.value&&(i.frames===1/0||w<i.frames)&&(i[n(472)]?x[n(453)](s[n(498)],u[n(498)]):x[n(453)](s[n(498)],fn(b[n(498)][n(475)])),w++)}));const S=([r,o]=on((()=>async function(n,t){const e=Hn,{scene:r,invalidate:o}=$(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=K(n);Q(n,(()=>{o()}));const l=J(null),h=nn((()=>Array[e(216)](c.value))),v=nn((()=>h[e(231)]?f:X));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(212)]>0&&!(null==i?void 0:i[r(231)])){try{l.value=await q(v[r(231)],h[r(231)]?[...tn(n)]:tn(n),(n=>{t&&n[r(211)](tn(t))}))}catch(o){throw new Error(r(223)+o)}l[r(231)]&&(l[r(231)][r(237)]=h[r(231)]?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(231)]&&n&&(r[t(231)].environment=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(231)])?t[i(231)][i(248)]:o,a=r[i(231)].background;!(null==a?void 0:a[i(222)])&&(a=void 0),r[i(231)].background=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a.value),(n=>{const t=e;r.value&&n&&(r[t(231)][t(217)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(231)]),(async n=>{const t=e;if(n&&n in Nn){const e=$n,i=Nn[n];try{l[t(231)]=await q(X,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(223)+r)}l[t(231)]&&l[t(231)]&&(l[t(231)][t(237)]=d),o()}else if(n&&!(n in Nn))throw new Error(t(243)+Object[t(245)](Nn)[t(207)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(498)][t(496)]=n[t(505)],i[t(463)]&&(u[t(498)][t(463)]=n[t(505)])):(u[t(498)][t(496)]=S[t(498)],i[t(463)]&&(u.value[t(463)]=S[t(498)]))};Q(S,(n=>{const t=Jn;y[t(498)]&&M(y[t(498)])}),{immediate:!0,deep:!0}),c({EnvSence:On});const R=()=>{var n;const t=Jn;null==(n=y[t(498)])||n[t(503)](),y.value=new v(i[t(502)]),x=new m(i[t(507)],i[t(464)],y[t(498)]),i.useDefaultScene?(y.value[t(505)][t(491)]=g,y[t(498)].texture.generateMipmaps=!1,y[t(498)][t(505)].minFilter=_,y.value[t(505)][t(490)]=_):y.value[t(505)][t(491)]=h,M(y[t(498)])};return Q((()=>ln()[e(459)]),(n=>{var t,r;const o=e;n&&(!y.value||y[o(498)][o(505)][o(491)]!==h)&&(l=n(),Array.isArray(l)&&l[o(504)]>0&&typeof(null==(t=l[0])?void 0:t[o(491)])!==o(499))?R():(null==(r=y.value)||r[o(503)](),y[o(498)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(498)]=S,Q((()=>i[e(472)]),(n=>{y[e(498)]&&R()})),(n,t)=>{const r=e;return tn(y)?(an(),cn(r(474),{key:0,ref_key:r(477),ref:b},[sn(n[r(469)],r(459))],512)):un("",!0)}}});function nt(n){function t(n){const e=Jn;if(typeof n===e(456))return function(n){}[e(486)](e(458))[e(465)](e(479));1!==(""+n/n)[e(504)]||n%20==0?function(){return!0}[e(486)](e(467)+e(484))[e(473)]("action"):function(){return!1}.constructor(e(467)+e(484))[e(465)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=ut;!function(n,t){const e=ut,r=ot();for(;;)try{if(100910===parseInt(e(414))/1+parseInt(e(448))/2*(-parseInt(e(420))/3)+parseInt(e(406))/4+parseInt(e(447))/5*(-parseInt(e(443))/6)+parseInt(e(407))/7*(-parseInt(e(445))/8)+-parseInt(e(429))/9+-parseInt(e(449))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(442)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){et(this,(function(){const n=ut,t=new RegExp(n(435)),e=new RegExp(n(431),"i"),r=ft(n(438));t.test(r+n(409))&&e.test(r+n(439))?ft():r("0")}))()}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["221274ZbNGop","rect","32UBkUAM","set","10RwphtA","8962bgpamr","635550pdgDGl","toString","TresMesh","side","length","456104qpqaDJ","22414EttlWj",'{}.constructor("return this")( )',"chain","TresRingGeometry","trace","toneMapped","constructor","184217QzVuys","needsUpdate","from","index","multiplyScalar","value","9ujaKPX","map","info","intensity","return (function() ","while (true) {}","TresPlaneGeometry","string","call","303921jBaUif","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","ring","__proto__","prototype","function *\\( *\\)","console","counter","init","input","log","gger","apply"];return(ot=function(){return n})()}rt(void 0,(function(){const n=ut;let t;try{t=Function(n(424)+n(408)+");")()}catch(o){t=window}const e=t[n(436)]=t.console||{},r=[n(440),"warn",n(422),"error","exception","table",n(411)];for(let i=0;i<r[n(405)];i++){const t=rt[n(413)][n(434)].bind(rt),o=r[i],a=e[o]||t;t[n(433)]=rt.bind(rt),t[n(450)]=a[n(450)].bind(a),e[o]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=["toneMapped",tt(421),tt(452),tt(430)];function ut(n,t){const e=ot();return(ut=function(n,t){return e[n-=405]})(n,t)}const lt=en({__name:tt(417),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return pn((()=>{const n=ut;e[n(419)]&&(e[n(419)][n(430)][n(418)](t[n(423)]),e[n(419)][n(415)]=!0)})),Q((()=>t.color),(n=>{const r=ut;e[r(419)]&&(e[r(419)].color[r(446)](n),e[r(419)][r(430)][r(418)](t.intensity),e.value[r(415)]=!0)})),dn((()=>{})),(n,r)=>{const o=ut;return an(),cn(o(451),null,["circle"===t.from?(an(),cn(o(410),it)):t[o(416)]===o(432)?(an(),cn(o(410),at)):t[o(416)]===o(444)?(an(),cn(o(426),ct)):(an(),hn(t[o(416)],{key:3,args:t})),vn("TresMeshBasicMaterial",{ref_key:"material",ref:e,toneMapped:n[o(412)],map:n[o(421)],side:tn(x),color:n.color},null,8,st)])}}});function ft(n){function t(n){const e=ut;if(typeof n===e(427))return function(n){}.constructor(e(425))[e(442)](e(437));1!==(""+n/n)[e(405)]||n%20==0?function(){return!0}[e(413)]("debugger")[e(428)]("action"):function(){return!1}[e(413)]("debu"+e(441))[e(442)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(){const n=["debu","28850mxfxgX","log","472168CCYRVu","exception","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","14533641wPiYmq","counter","5OMBYnc","while (true) {}","prototype","2215464WDzNCW","test","action","783834VUovUk","toString","info","50tZzkQh","call","height","width","stateObject","depthTexture","table","render","10456302QXzEtF","length","setRenderTarget","39657iNdgMg","function *\\( *\\)","__proto__","clear","trace","apply","dispose","format","constructor","input","21kfpXbq","4895ijKoEQ","string","console","bind","value"];return(pt=function(){return n})()}!function(n,t){const e=vt,r=pt();for(;;)try{if(878387===parseInt(e(181))/1+parseInt(e(184))/2*(-parseInt(e(195))/3)+-parseInt(e(178))/4+parseInt(e(175))/5*(-parseInt(e(192))/6)+parseInt(e(159))/7*(-parseInt(e(168))/8)+parseInt(e(173))/9+parseInt(e(166))/10*(parseInt(e(160))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(154)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=vt,t=new RegExp(n(196)),e=new RegExp(n(171),"i"),r=gt(n(172));t[n(179)](r+n(170))&&e.test(r+n(158))?gt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=pt();return(vt=function(n,t){return e[n-=151]})(n,t)}function mt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?K(n):K(gn(n)),{onLoop:s}=Y(),{camera:u,renderer:l,scene:f,sizes:p}=$();return pn((()=>{var n;const a=vt;null==(n=t[a(164)])||n.dispose(),t[a(164)]=new b((null==r?void 0:r[a(164)])||p[a(187)][a(164)],(null==e?void 0:e[a(164)])||p[a(186)].value,c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(164)])),(null==i?void 0:i[a(164)])&&(t[a(164)][a(189)]=new w((null==r?void 0:r.value)||p[a(187)][a(164)],(null==e?void 0:e[a(164)])||p[a(186)][a(164)]),t.value[a(189)][a(156)]=S,t[a(164)].depthTexture.type=M)})),s((()=>{const n=vt;(null==a?void 0:a[n(164)])&&(l[n(164)][n(194)](fn(t[n(164)])),l.value[n(152)](),l.value[n(191)](fn(f[n(164)]),fn(u.value)),l[n(164)].setRenderTarget(null))})),_n((()=>{var n;const e=vt;null==(n=t[e(164)])||n[e(155)]()})),t}function gt(n){function t(n){const e=vt;if(typeof n===e(161))return function(n){}[e(157)](e(176)).apply(e(174));1!==(""+n/n)[e(193)]||n%20==0?function(){return!0}.constructor("debugger")[e(185)](e(180)):function(){return!1}[e(157)](e(165)+"gger").apply(e(188)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ht(void 0,(function(){const n=vt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(162)]=t.console||{},r=[n(167),"warn",n(183),"error",n(169),n(190),n(153)];for(let i=0;i<r[n(193)];i++){const t=ht[n(157)][n(177)].bind(ht),o=r[i],a=e[o]||t;t[n(151)]=ht[n(163)](ht),t[n(182)]=a[n(182)][n(163)](a),e[o]=t}}))();const _t=yt;function yt(n,t){const e=wt();return(yt=function(n,t){return e[n-=369]})(n,t)}!function(n,t){const e=yt,r=wt();for(;;)try{if(122409===parseInt(e(377))/1+-parseInt(e(395))/2+-parseInt(e(406))/3*(-parseInt(e(388))/4)+parseInt(e(416))/5+-parseInt(e(399))/6+-parseInt(e(405))/7+-parseInt(e(396))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xt(this,(function(){const n=yt,t=new RegExp(n(412)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Mt(n(414));t[n(418)](r+n(384))&&e[n(418)](r+n(389))?Mt():r("0")}))()}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[yt(410)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();bt(void 0,(function(){const n=yt,t=function(){const n=yt;let t;try{t=Function(n(383)+n(369)+");")()}catch(e){t=window}return t}(),e=t[n(413)]=t[n(413)]||{},r=[n(398),"warn","info",n(382),"exception",n(370),"trace"];for(let o=0;o<r[n(386)];o++){const t=bt.constructor[n(375)][n(407)](bt),i=r[o],a=e[i]||t;t[n(381)]=bt[n(407)](bt),t[n(372)]=a[n(372)][n(407)](a),e[i]=t}}))();const It=[_t(401),"side"];function wt(){const n=["buffer","envMapIntensity","MeshTransmissionMaterialClass","index","705285ICEaWB","48BFVBfR","bind","material","side","apply","background","function *\\( *\\)","console","init","backside","742730oYyKMx","setRenderTarget","test",'{}.constructor("return this")( )',"table","toneMapping","toString","constructor","while (true) {}","prototype","backsideThickness","149395ZiXarm","uuid","counter","gger","__proto__","error","return (function() ","chain","TresMeshTransmissionMaterial","length","isMesh","54584peMPHd","input","render","texture","string","value","thickness","351610XapVpN","838496DklTuN","action","log","74976SEmdeM","fboResolution"];return(wt=function(){return n})()}const St=en({__name:_t(404),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=$(),s=yn(),u=n;o({MeshTransmissionMaterial:Sn});const l=new Mn,{onBeforeLoop:f}=Y(),p=mt({width:u[e(400)],height:u[e(400)],isLoop:!1}),d=mt({width:u[e(400)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s.value=function(n,t){let e;return n.traverse((n=>{const r=yt;n[r(387)]&&n[r(408)]&&n.material[r(378)]===t&&(e=n)})),e}(i[n(393)],r[n(393)][n(378)])})),f((({elapsed:n})=>{const t=e;r[t(393)].time=n,r.value[t(401)]===d[t(393)].texture&&s[t(393)]&&(m=a.value[t(371)],h=i[t(393)][t(411)],v=r[t(393)][t(402)],g=s.value.material[t(409)],s[t(393)][t(408)]=l,u[t(415)]&&(a[t(393)][t(417)](p[t(393)]),a.value[t(390)](i.value,c[t(393)]),s[t(393)][t(408)]=r[t(393)],s.value[t(408)][t(394)]=u[t(376)],s.value[t(408)][t(401)]=p.value.texture,s[t(393)].material[t(409)]=R,s[t(393)][t(408)][t(402)]=0),a[t(393)].setRenderTarget(d[t(393)]),a.value[t(390)](i[t(393)],c[t(393)]),s[t(393)][t(408)][t(401)]=d[t(393)].texture,s[t(393)][t(408)]=r.value,s[t(393)][t(408)].thickness=u[t(394)],s[t(393)][t(408)][t(409)]=g,s.value[t(408)][t(402)]=v,i[t(393)].background=h,a[t(393)].setRenderTarget(null),a.value[t(371)]=m)})),t({root:r,constructor:Sn}),(n,t)=>{const o=e;return an(),cn(o(385),{ref_key:o(403),ref:r,buffer:tn(d)[o(391)],side:tn(x)},null,8,It)}}});function Mt(n){function t(n){const e=yt;if(typeof n===e(392))return function(n){}[e(373)](e(374))[e(410)](e(379));1!==(""+n/n)[e(386)]||n%20==0?function(){return!0}[e(373)]("debu"+e(380)).call(e(397)):function(){return!1}[e(373)]("debu"+e(380))[e(410)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Rt=zt;!function(n,t){const e=zt,r=Tt();for(;;)try{if(178594===-parseInt(e(457))/1+parseInt(e(455))/2+-parseInt(e(422))/3*(parseInt(e(418))/4)+-parseInt(e(442))/5*(parseInt(e(419))/6)+parseInt(e(429))/7*(-parseInt(e(462))/8)+parseInt(e(430))/9*(-parseInt(e(421))/10)+parseInt(e(467))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Et(this,(function(){const n=zt,t=new RegExp(n(433)),e=new RegExp(n(416),"i"),r=Pt(n(428));t[n(444)](r+"chain")&&e.test(r+n(465))?Pt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(453)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Tt(){const n=["warn","getBoundingSphere","precise","constructor","table","index","apply","toString","544938sHfPft","trace","17665NqdUYM","debu","action","bottom","while (true) {}","1991312phdalT","outer","console","input","top","6591145LQjxHr","back","value","log","disableY","max","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","position","8vBkxZT","12oOaufa","gref","10LbbWIi","425184LSpHAO","TresGroup","matrixWorld","counter","identity","disable","init","7hHeKBG","704169OfxseO","disableZ","bind","function *\\( *\\)","stateObject","min","prototype","setFromObject","front","$slots","exception","set","161985tWWibG",'{}.constructor("return this")( )',"test","gger","error"];return(Tt=function(){return n})()}At(void 0,(function(){const n=zt;let t;try{t=Function("return (function() "+n(443)+");")()}catch(o){t=window}const e=t.console=t[n(464)]||{},r=[n(470),n(447),"info",n(446),n(440),n(451),n(456)];for(let i=0;i<r.length;i++){const t=At.constructor[n(436)][n(432)](At),o=r[i],a=e[o]||t;t.__proto__=At.bind(At),t[n(454)]=a[n(454)][n(432)](a),e[o]=t}}))();const Dt=en({__name:Rt(452),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=zt;if(!r[n(469)])return;if(!o.value)return;r.value[n(424)][n(426)]();const e=(new E)[n(437)](o[n(469)],t[n(449)]),i=new A,a=new T,c=e[n(415)].x-e[n(435)].x,s=e[n(415)].y-e[n(435)].y,u=e[n(415)].z-e[n(435)].z;e.getCenter(i),e[n(448)](a);const l=t[n(466)]?s/2:t[n(460)]?-s/2:0,f=t.left?-c/2:t.right?c/2:0,p=t[n(438)]?u/2:t[n(468)]?-u/2:0;r[n(469)][n(417)][n(441)](t[n(427)]||t.disableX?0:-i.x+f,t[n(427)]||t[n(471)]?0:-i.y+l,t.disable||t[n(431)]?0:-i.z+p)})),(n,t)=>{const i=zt;return an(),cn(i(423),{ref_key:i(420),ref:e},[vn("TresGroup",{ref_key:i(463),ref:r},[vn(i(423),{ref_key:"inner",ref:o},[sn(n[i(439)],"default")],512)],512)],512)}}});function zt(n,t){const e=Tt();return(zt=function(n,t){return e[n-=415]})(n,t)}function Pt(n){function t(n){const e=zt;if("string"==typeof n)return function(n){}[e(450)](e(461))[e(453)](e(425));1!==(""+n/n).length||n%20==0?function(){return!0}[e(450)]("debu"+e(445)).call(e(459)):function(){return!1}[e(450)](e(458)+e(445))[e(453)](e(434)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Ft;!function(n,t){const e=Ft,r=Ut();for(;;)try{if(988289===parseInt(e(339))/1*(parseInt(e(347))/2)+-parseInt(e(387))/3*(parseInt(e(350))/4)+parseInt(e(352))/5*(-parseInt(e(341))/6)+parseInt(e(359))/7+parseInt(e(364))/8+parseInt(e(366))/9*(-parseInt(e(384))/10)+parseInt(e(394))/11*(parseInt(e(343))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ft(n,t){const e=Ut();return(Ft=function(n,t){return e[n-=339]})(n,t)}!function(){Ct(this,(function(){const n=Ft,t=new RegExp(n(345)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Lt(n(379));t[n(351)](r+"chain")&&e[n(351)](r+n(365))?Lt():r("0")}))()}();const Bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ft(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Bt(void 0,(function(){const n=Ft;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(386)]=t[n(386)]||{},r=[n(344),"warn","info",n(367),"exception",n(372),n(393)];for(let i=0;i<r.length;i++){const t=Bt[n(380)][n(360)].bind(Bt),o=r[i],a=e[o]||t;t[n(346)]=Bt[n(368)](Bt),t[n(390)]=a[n(390)].bind(a),e[o]=t}}))();const kt=[Ot(370)],jt=["object"];function Ut(){const n=["counter","apply","add","init","constructor","primitive","backsideIOR","$slots","430mJBnsF","causticsOnly","console","42VVMRzS","index","ior","toString","params","intensity","trace","147103znnUZq","2yZGUaB","scene","6xrMgOE","lightSource","1692qmKRSG","log","function *\\( *\\)","__proto__","259822cTOzHI","#ffffff","default","555396zfAUmp","test","4137085OqElMN","resolution","length","helper","call","gger","worldRadius","10824555qBmwBR","prototype","while (true) {}","set","debu","5845256jakLMx","input","138735rnCQUA","error","bind","update","object","far","table","value","group","color"];return(Ut=function(){return n})()}const Nt=en({__name:Ot(388),props:{color:{default:Ot(348)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=$(),o=Rn(r[t(373)],{frames:1/0,resolution:e[t(353)],worldRadius:e.worldRadius});o.params.backside=!0;const i=yn(null);Q(i,(n=>{const e=t;n&&o[e(340)][e(378)](n)}));const{onBeforeLoop:a}=Y();return a((({elapsed:n})=>{o[t(369)]()})),pn((()=>{const n=t;e[n(375)]&&o[n(391)][n(375)][n(362)](e.color),e[n(389)]&&(o[n(391)][n(389)]=e[n(389)]),e.backsideIOR&&(o[n(391)][n(382)]=e[n(382)]),e[n(371)]&&(o.params[n(371)]=e[n(371)]),e[n(358)]&&(o[n(391)].worldRadius=e.worldRadius),e.intensity&&(o[n(391)][n(392)]=e.intensity)})),Q((()=>e[t(385)]),(n=>{o[t(391)].causticsOnly=n})),Q((()=>e[t(342)]),(n=>{const e=t;n&&o[e(391)][e(342)]instanceof A&&o.params[e(342)][e(362)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(bn,null,[vn("TresGroup",{ref_key:"group",ref:i},[sn(n[r(383)],r(349))],512),vn(r(381),{object:tn(o)[r(374)],position:[0,.003,0]},null,8,kt),vn(r(381),{object:tn(o)[r(355)],visible:!1},null,8,jt)],64)}}});function Lt(n){function t(n){const e=Ft;if("string"==typeof n)return function(n){}[e(380)](e(361))[e(377)](e(376));1!==(""+n/n)[e(354)]||n%20==0?function(){return!0}[e(380)](e(363)+"gger")[e(356)]("action"):function(){return!1}.constructor(e(363)+e(357)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Wt,r=Gt();for(;;)try{if(960865===parseInt(e(314))/1*(-parseInt(e(311))/2)+-parseInt(e(319))/3*(-parseInt(e(333))/4)+-parseInt(e(308))/5+parseInt(e(346))/6+-parseInt(e(335))/7+parseInt(e(352))/8+parseInt(e(322))/9*(parseInt(e(360))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(310)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ht(this,(function(){const n=Wt,t=new RegExp(n(338)),e=new RegExp(n(315),"i"),r=$t(n(340));t.test(r+n(324))&&e[n(306)](r+n(323))?$t():r("0")}))()}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(310)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(){const n=["10766322jPWhed","log","programs","function *\\( *\\)","return (function() ","init","table","length","remove","traverse","trace","1432140JSBmsc","warn","properties","counter","#if defined( SHADOWMAP_TYPE_PCF )","debu","6046104PwClZP","toString",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","forEach","compile","call","console","3580fZNHbI","string","exception","test","dispose","8112705KXfbmE","error","apply","8718JlyivH","constructor","replace","113CvOhOR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","3sGPdzB","stateObject","; i++) {\n        vogelSample = vogelDiskSample(j, ","46188rfoAFw","input","chain","gger","material","ShaderChunk","info","__proto__",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","isArray","shadowmap_pars_fragment","7129240QkSiZi","while (true) {}"];return(Gt=function(){return n})()}Zt(void 0,(function(){const n=Wt,t=function(){const n=Wt;let t;try{t=Function(n(339)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(359)]=t[n(359)]||{},r=[n(336),n(347),n(328),n(309),n(305),n(341),n(345)];for(let o=0;o<r.length;o++){const t=Zt[n(312)].prototype.bind(Zt),i=r[o],a=e[i]||t;t[n(329)]=Zt[n(316)](Zt),t[n(353)]=a[n(353)][n(316)](a),e[i]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=D[r(327)][r(332)];return z[r(332)]=z[r(332)][r(313)]("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float("+t+r(330)+n+r(317)+e+"; i ++) {\n        offset = (vogelDiskSample(j, "+e+", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < "+e+r(321)+e+r(318)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(354))[r(313)](r(350),r(355)),(n,t,e)=>{const i=r;D[i(327)][i(332)]=o,function(n,t,e){const r=Wt;t[r(344)]((t=>{const e=r;t.material&&(Array[e(331)](t[e(326)])?t[e(326)][e(356)]((t=>{const r=e;n[r(348)].remove(t),t[r(307)]()})):(n[e(348)][e(343)](t[e(326)]),t[e(326)][e(307)]()))})),n[r(328)][r(337)][r(342)]=0,n[r(357)](t,e)}(n,t,e)}};function Wt(n,t){const e=Gt();return(Wt=function(n,t){return e[n-=305]})(n,t)}function $t(n){function t(n){const e=Wt;if(typeof n===e(361))return function(n){}[e(312)](e(334))[e(310)](e(349));1!==(""+n/n)[e(342)]||n%20==0?function(){return!0}[e(312)]("debugger")[e(358)]("action"):function(){return!1}[e(312)](e(351)+e(325))[e(310)](e(320)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const qt=Qt;!function(n,t){const e=Qt,r=Kt();for(;;)try{if(888340===parseInt(e(214))/1+parseInt(e(213))/2+parseInt(e(235))/3+parseInt(e(238))/4*(-parseInt(e(227))/5)+-parseInt(e(239))/6*(parseInt(e(219))/7)+parseInt(e(210))/8+-parseInt(e(212))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Qt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(211),"i"),r=ne("init");t.test(r+"chain")&&e[n(236)](r+n(234))?ne():r("0")}))()}();const Xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(233)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kt(){const n=["material","counter","5ngcYJe","constructor","index","string","exception","debu","apply","input","4229004YvGgjB","test","console","3408368RYIlaw","432030FeHXqG","return (function() ","gger","while (true) {}","value","prototype","toString","bind","13191840TXQaWX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","16789860TlXhYD","1066728JDPyhM","373985BEOMUt","__proto__","stateObject","log","action","35bglBwj","error",'{}.constructor("return this")( )',"length","call","trace"];return(Kt=function(){return n})()}Xt(void 0,(function(){const n=Qt,t=function(){const n=Qt;let t;try{t=Function(n(240)+n(221)+");")()}catch(e){t=window}return t}(),e=t[n(237)]=t[n(237)]||{},r=[n(217),"warn","info",n(220),n(231),"table",n(224)];for(let o=0;o<r[n(222)];o++){const t=Xt.constructor[n(244)][n(209)](Xt),i=r[o],a=e[i]||t;t[n(215)]=Xt[n(209)](Xt),t[n(208)]=a[n(208)][n(209)](a),e[i]=t}}))();const Jt=en({__name:qt(229),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=$();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(243)],o.value,e.value),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(243)].traverse((n=>{n instanceof l&&n[t(225)].dispose()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function Qt(n,t){const e=Kt();return(Qt=function(n,t){return e[n-=208]})(n,t)}function ne(n){function t(n){const e=Qt;if(typeof n===e(230))return function(n){}[e(228)](e(242)).apply(e(226));1!==(""+n/n)[e(222)]||n%20==0?function(){return!0}[e(228)](e(232)+e(241))[e(223)](e(218)):function(){return!1}.constructor("debu"+e(241)).apply(e(216)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(n,t){const e=ee();return(te=function(n,t){return e[n-=236]})(n,t)}function ee(){const n=["1MtKcsn","apply","replace","return (function() ","halfTexelSize","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","value","encodings_fragment","texelSize","bind","colorspace_fragment","trace","kernel","stateObject","8698128eTIVtD","35116NQwSjp","toneMapped","3690SmEZxD","while (true) {}","info","debu","7WXbOSq","setTexelSize","4944762dBVIZL","error","5896kuAQin","warn","1625588vsFHcR",">\n        }","exception","function *\\( *\\)","5kyYrkZ","resolution","1301634hDwOkW","24EPWGDc","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","call","setResolution","input","420252LdMbmA","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","uniforms","set","toString","length","constructor","715qBnHAo"];return(ee=function(){return n})()}const re=te;!function(n,t){const e=te,r=ee();for(;;)try{if(555378===-parseInt(e(284))/1*(-parseInt(e(262))/2)+-parseInt(e(269))/3*(-parseInt(e(250))/4)+-parseInt(e(266))/5*(parseInt(e(258))/6)+-parseInt(e(256))/7*(parseInt(e(249))/8)+-parseInt(e(268))/9+-parseInt(e(252))/10*(parseInt(e(260))/11)+parseInt(e(276))/12*(parseInt(e(283))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){oe(this,(function(){const n=te,t=new RegExp(n(265)),e=new RegExp(n(271),"i"),r=se("init");t[n(270)](r+"chain")&&e[n(270)](r+n(275))?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[te(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=te,t=function(){const n=te;let t;try{t=Function(n(238)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log",n(261),n(254),n(259),n(264),"table",n(246)];for(let o=0;o<r[n(281)];o++){const t=ie[n(282)].prototype[n(244)](ie),i=r[o],a=e[i]||t;t.__proto__=ie.bind(ie),t[n(280)]=a[n(280)][n(244)](a),e[i]=t}}))();const ae=parseInt(B[re(237)](/\D+/g,""));class ce extends P{constructor(n=new C){const t=re;super({uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new C),texelSize:new O(new C),halfTexelSize:new O(new C),kernel:new O(0),scale:new O(1),cameraNear:new O(0),cameraFar:new O(1),minDepthThreshold:new O(0),maxDepthThreshold:new O(1),depthScale:new O(0),depthToBlurRatioBias:new O(.25)},fragmentShader:t(277)+t(ae>=154?245:242)+t(263),vertexShader:t(240),blending:F,depthWrite:!1,depthTest:!1}),this[t(251)]=!1,this.setTexelSize(n.x,n.y),this[t(247)]=new Float32Array([0,1,2,2,3])}[re(257)](n,t){const e=re;this[e(278)][e(243)][e(241)][e(279)](n,t),this[e(278)][e(239)][e(241)][e(279)](n,t).multiplyScalar(.5)}[re(274)](n){const t=re;this[t(278)][t(267)][t(241)].copy(n)}}function se(n){function t(n){const e=te;if("string"==typeof n)return function(n){}[e(282)](e(253))[e(236)]("counter");1!==(""+n/n)[e(281)]||n%20==0?function(){return!0}.constructor(e(255)+e(272))[e(273)]("action"):function(){return!1}[e(282)](e(255)+e(272)).apply(e(248)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=le,r=de();for(;;)try{if(622947===parseInt(e(284))/1+parseInt(e(263))/2+-parseInt(e(288))/3+parseInt(e(296))/4*(parseInt(e(266))/5)+parseInt(e(254))/6*(parseInt(e(305))/7)+parseInt(e(307))/8*(-parseInt(e(262))/9)+-parseInt(e(281))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(310)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=de();return(le=function(n,t){return e[n-=254]})(n,t)}!function(){ue(this,(function(){const n=le,t=new RegExp(n(261)),e=new RegExp(n(272),"i"),r=he(n(286));t[n(297)](r+n(269))&&e.test(r+n(267))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(310)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();fe(void 0,(function(){const n=le;let t;try{t=Function("return (function() "+n(293)+");")()}catch(o){t=window}const e=t[n(298)]=t[n(298)]||{},r=[n(299),n(256),n(301),n(308),n(265),n(300),"trace"];for(let i=0;i<r.length;i++){const t=fe[n(255)].prototype[n(314)](fe),o=r[i],a=e[o]||t;t[n(311)]=fe[n(314)](fe),t[n(313)]=a[n(313)][n(314)](a),e[o]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(306)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(259)]=this[c(276)].clone(),this.convolutionMaterial=new ce,this[c(285)][c(291)](1/t,1/e),this[c(285)][c(257)](new C(t,e)),this[c(275)]=new u,this[c(258)]=new k,this[c(285)][c(278)][c(274)].value=r,this[c(285)][c(278)].maxDepthThreshold[c(304)]=o,this[c(285)][c(278)][c(282)].value=i,this[c(285)].uniforms[c(303)][c(304)]=a,this[c(285)].defines.USE_DEPTH=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(294)](c(270),new U(s,3)),p[c(294)]("uv",new U(f,2)),this.screen=new l(p,this.convolutionMaterial),this[c(273)][c(260)]=!1,this.scene[c(264)](this.screen)}render(n,t,e){const r=le,o=this[r(275)],i=this.camera,a=this[r(276)],c=this[r(259)],s=this.convolutionMaterial,u=s[r(278)];u.depthBuffer.value=t[r(283)];const l=s[r(287)];let f,p,d,h=t;for(p=0,d=l.length-1;p<d;++p)f=0==(1&p)?a:c,u[r(287)][r(304)]=l[p],u[r(280)][r(304)]=h[r(302)],n.setRenderTarget(f),n.render(o,i),h=f;u[r(287)][r(304)]=l[p],u[r(280)][r(304)]=h.texture,n[r(312)](this[r(306)]?null:e),n[r(279)](o,i)}}function de(){const n=["setRenderTarget","toString","bind","30lbkmTI","constructor","warn","setResolution","camera","renderTargetB","frustumCulled","function *\\( *\\)","189TIwYvc","1805766uJimPl","add","exception","6770XQOBMp","input","counter","chain","position","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","screen","minDepthThreshold","scene","renderTargetA","length","uniforms","render","inputBuffer","5525900odwRHM","depthScale","depthTexture","1047216JKCHMX","convolutionMaterial","init","kernel","2418834JdDLqg","stateObject","debu","setTexelSize","action",'{}.constructor("return this")( )',"setAttribute","while (true) {}","136ngSdsl","test","console","log","table","info","texture","depthToBlurRatioBias","value","1326031XqUKnL","renderToScreen","366280fXRJxa","error","call","apply","__proto__"];return(de=function(){return n})()}function he(n){function t(n){const e=le;if("string"==typeof n)return function(n){}.constructor(e(295))[e(310)](e(268));1!==(""+n/n)[e(277)]||n%20==0?function(){return!0}[e(255)](e(290)+e(271))[e(309)](e(292)):function(){return!1}[e(255)]("debu"+e(271))[e(310)](e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=_e;function me(){var n=["tDepth","call","298zROkLp","minDepthThreshold","8307970wlbLWm","2010880QoUbmM","#include <project_vertex>","depthToBlurRatioBias","tDiffuseBlur","fragmentShader","127qaXVaq","debu","constructor","chain","input","stateObject","while (true) {}","bind","619596tTlSuD","mixBlur","_maxDepthThreshold","uniforms","gger","length","68qkaEhs","table","replace","_tDiffuse","console","__proto__","maxDepthThreshold","11QVoxNo","mirror","apply","_mirror","defines","value","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","init","_mixContrast","distortion","mixContrast","_depthToBlurRatioBias","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","hasBlur","_mixBlur","textureMatrix","log","vertexShader","877780tXhcki","return (function() ","tDiffuse","test","distortionMap","function *\\( *\\)","_hasBlur","_depthScale","string","trace","_textureMatrix","_blurStrength","_distortion","84IdTiEr","depthScale","USE_UV","mixStrength","_tDepth","_distortionMap","counter","_tDiffuseBlur","1959Qwojfb","_minDepthThreshold",'{}.constructor("return this")( )',"setValues","action","138551QRHLLr"];return(me=function(){return n})()}!function(n,t){for(var e=_e,r=me();;)try{if(225647===-parseInt(e(402))/1*(-parseInt(e(394))/2)+parseInt(e(386))/3*(parseInt(e(416))/4)+-parseInt(e(441))/5+parseInt(e(454))/6*(-parseInt(e(391))/7)+-parseInt(e(397))/8+parseInt(e(410))/9+parseInt(e(396))/10*(parseInt(e(423))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(425)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(n,t){var e=me();return(_e=function(n,t){return e[n-=382]})(n,t)}!function(){ge(this,(function(){var n=_e,t=new RegExp(n(446)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=be(n(430));t[n(444)](r+n(405))&&e.test(r+n(406))?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){for(var n=_e,t=function(){var n,t=_e;try{n=Function(t(442)+t(388)+");")()}catch(e){n=window}return n}(),e=t[n(420)]=t[n(420)]||{},r=[n(439),"warn","info","error","exception",n(417),n(450)],o=0;o<r[n(415)];o++){var i=ye[n(404)].prototype[n(409)](ye),a=r[o],c=e[a]||i;i[n(421)]=ye[n(409)](ye),i.toString=c.toString[n(409)](c),e[a]=i}}))();class xe extends N{constructor(n={}){var t=_e;super(n),this._tDepth={value:null},this[t(383)]={value:null},this[t(419)]={value:null},this[t(385)]={value:null},this[t(451)]={value:null},this[t(447)]={value:!1},this[t(426)]={value:0},this[t(437)]={value:0},this[t(452)]={value:.5},this[t(387)]={value:.9},this[t(412)]={value:1},this[t(448)]={value:0},this[t(434)]={value:.25},this[t(453)]={value:1},this[t(431)]={value:1},this[t(389)](n)}onBeforeCompile(n){var t,e=_e;!(null==(t=n[e(427)])?void 0:t.USE_UV)&&(n[e(427)][e(456)]=""),n[e(413)][e(436)]=this[e(447)],n[e(413)].tDiffuse=this[e(419)],n.uniforms.tDepth=this[e(382)],n.uniforms.distortionMap=this[e(383)],n[e(413)][e(400)]=this[e(385)],n[e(413)][e(438)]=this[e(451)],n[e(413)][e(424)]=this._mirror,n[e(413)][e(411)]=this[e(437)],n.uniforms[e(457)]=this[e(452)],n[e(413)][e(395)]=this._minDepthThreshold,n.uniforms[e(422)]=this[e(412)],n[e(413)].depthScale=this[e(448)],n.uniforms.depthToBlurRatioBias=this[e(434)],n[e(413)][e(432)]=this[e(453)],n.uniforms[e(433)]=this[e(431)],n.vertexShader=e(429)+n[e(440)],n[e(440)]=n[e(440)][e(418)](e(398),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(401)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(401)],n[e(401)]=n[e(401)][e(418)]("#include <emissivemap_fragment>",e(435))}get[ve(443)](){var n=ve;return this[n(419)][n(428)]}set tDiffuse(n){this[ve(419)].value=n}get[ve(392)](){return this[ve(382)].value}set[ve(392)](n){this[ve(382)].value=n}get[ve(445)](){var n=ve;return this[n(383)][n(428)]}set distortionMap(n){var t=ve;this._distortionMap[t(428)]=n}get[ve(400)](){var n=ve;return this._tDiffuseBlur[n(428)]}set[ve(400)](n){var t=ve;this[t(385)][t(428)]=n}get[ve(438)](){return this._textureMatrix.value}set[ve(438)](n){var t=ve;this[t(451)][t(428)]=n}get hasBlur(){var n=ve;return this[n(447)][n(428)]}set[ve(436)](n){var t=ve;this[t(447)][t(428)]=n}get[ve(424)](){return this._mirror.value}set mirror(n){var t=ve;this[t(426)][t(428)]=n}get[ve(411)](){var n=ve;return this[n(437)][n(428)]}set[ve(411)](n){this._mixBlur.value=n}get mixStrength(){return this[ve(452)].value}set[ve(457)](n){var t=ve;this[t(452)][t(428)]=n}get[ve(395)](){var n=ve;return this[n(387)][n(428)]}set[ve(395)](n){var t=ve;this[t(387)][t(428)]=n}get maxDepthThreshold(){return this._maxDepthThreshold.value}set[ve(422)](n){var t=ve;this[t(412)][t(428)]=n}get[ve(455)](){return this._depthScale.value}set depthScale(n){var t=ve;this._depthScale[t(428)]=n}get[ve(399)](){var n=ve;return this[n(434)][n(428)]}set[ve(399)](n){var t=ve;this[t(434)][t(428)]=n}get[ve(432)](){var n=ve;return this[n(453)][n(428)]}set[ve(432)](n){this._distortion.value=n}get[ve(433)](){return this[ve(431)].value}set[ve(433)](n){var t=ve;this[t(431)][t(428)]=n}}function be(n){function t(n){var e=_e;if(typeof n===e(449))return function(n){}[e(404)](e(408)).apply(e(384));1!==(""+n/n)[e(415)]||n%20==0?function(){return!0}.constructor(e(403)+"gger")[e(393)](e(390)):function(){return!1}[e(404)](e(403)+e(414))[e(425)](e(407)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Se;!function(n,t){const e=Se,r=Te();for(;;)try{if(403727===parseInt(e(543))/1*(-parseInt(e(516))/2)+-parseInt(e(544))/3*(parseInt(e(495))/4)+parseInt(e(522))/5*(parseInt(e(582))/6)+-parseInt(e(520))/7*(parseInt(e(558))/8)+parseInt(e(553))/9+-parseInt(e(536))/10*(parseInt(e(518))/11)+-parseInt(e(551))/12*(-parseInt(e(587))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(537)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(n,t){const e=Te();return(Se=function(n,t){return e[n-=483]})(n,t)}!function(){we(this,(function(){const n=Se,t=new RegExp(n(560)),e=new RegExp(n(563),"i"),r=Ae("init");t[n(567)](r+"chain")&&e[n(567)](r+"input")?Ae():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(537)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=Se;let t;try{t=Function(n(513)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(554)]=t[n(554)]||{},r=[n(581),n(562),n(570),"error",n(575),n(519),n(503)];for(let i=0;i<r.length;i++){const t=Me.constructor[n(547)][n(584)](Me),o=r[i],a=e[o]||t;t[n(573)]=Me.bind(Me),t[n(555)]=a.toString[n(584)](a),e[o]=t}}))();const Re=[Ie(517),Ie(542),Ie(539),Ie(565),Ie(530),Ie(485),Ie(566),"min-depth-threshold",Ie(557),Ie(521),Ie(576),Ie(529),Ie(531),Ie(509),Ie(550),Ie(514),Ie(497)],Ee=en({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:E}=$();E({MeshReflectorMaterial:xe});const T=yn(),D=yn(),z=yn(),P=yn(),O=nn((()=>{const n=Se;return typeof f[n(586)]===n(484)?[f.value,f.value]:f[n(586)]})),C=nn((()=>O[r(586)][0]>0||O[r(586)][1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};pn((()=>{var n;const o=r;null==(n=T.value)||n[o(507)][o(489)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(586)]=new b(i.value,i[o(586)],(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(586)],i[o(586)],S,M)},t(y,e(x)))),D[o(586)]=new b(i[o(586)],i[o(586)],f),z[o(586)]=new pe({resolution:i[o(586)],width:O[o(586)][0],height:O[o(586)][1],minDepthThreshold:a[o(586)],maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l.value}),P[o(586)]={mirror:p,textureMatrix:F.textureMatrix,mixBlur:d,tDiffuse:T[o(586)][o(507)],tDepth:T[o(586)].depthTexture,tDiffuseBlur:T[o(586)][o(507)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(586)],mixContrast:_,"defines-USE_BLUR":C[o(586)]?"":void 0,"defines-USE_DEPTH":u.value>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const B=yn(),{onLoop:k}=Y();k((()=>{var n;const t=r;if(!(B.value&&R[t(586)]&&T[t(586)]&&y.value))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Se;n[r(504)]&&n[r(525)]&&n.material[r(556)]===t&&(e=n)})),e}(x[t(586)],B[t(586)].uuid);if(!e)return;e[t(572)]=!1;const i=R[t(586)].xr[t(548)],a=R[t(586)][t(511)][t(490)];(function(n){var t,e;const r=Se;if(F[r(577)][r(549)](n[r(528)]),F.cameraWorldPosition.setFromMatrixPosition(null==(t=y[r(586)])?void 0:t[r(528)]),F[r(515)][r(508)](n.matrixWorld),F[r(540)][r(524)](0,0,1),F.normal[r(561)](F[r(515)]),F[r(577)][r(583)](F[r(540)],o[r(483)]),F[r(568)][r(486)](F[r(577)],F.cameraWorldPosition),F[r(568)].dot(F[r(540)])>0)return;F[r(568)][r(534)](F[r(540)])[r(571)](),F[r(568)][r(501)](F[r(577)]),F.rotationMatrix[r(508)](null==(e=y[r(586)])?void 0:e[r(528)]),F[r(491)][r(524)](0,0,-1),F[r(491)][r(561)](F.rotationMatrix),F[r(491)][r(501)](F[r(574)]),F[r(559)].subVectors(F[r(577)],F[r(491)]),F[r(559)][r(534)](F.normal).negate(),F.target[r(501)](F[r(577)]),F.virtualCamera[r(527)][r(510)](F.view),F[r(505)].up[r(524)](0,1,0),F[r(505)].up[r(561)](F[r(515)]),F[r(505)].up.reflect(F.normal),F[r(505)][r(523)](F[r(559)]),F[r(505)][r(487)]=(null==y?void 0:y[r(586)]).far,F[r(505)][r(493)](),F[r(505)][r(541)][r(510)]((null==y?void 0:y[r(586)])[r(541)]),F[r(499)][r(524)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(552)](F[r(505)][r(541)]),F[r(499)][r(552)](F[r(505)][r(545)]),F.textureMatrix[r(552)](n[r(528)]),F[r(512)][r(502)](F[r(540)],F.reflectorWorldPosition),F.reflectorPlane[r(561)](F[r(505)].matrixWorldInverse),F[r(564)][r(524)](F[r(512)][r(540)].x,F[r(512)][r(540)].y,F[r(512)].normal.z,F.reflectorPlane.constant);const i=F[r(505)][r(541)];F.q.x=(Math.sign(F[r(564)].x)+i[r(578)][8])/i[r(578)][0],F.q.y=(Math.sign(F.clipPlane.y)+i[r(578)][9])/i[r(578)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i[r(578)][14],F[r(564)][r(535)](2/F[r(564)][r(579)](F.q)),i.elements[2]=F[r(564)].x,i[r(578)][6]=F.clipPlane.y,i[r(578)][10]=F[r(564)].z+1,i.elements[14]=F.clipPlane.w})(e),R.value[t(511)][t(490)]=!1,R[t(586)][t(506)](T[t(586)]),R[t(586)][t(538)]||R[t(586)][t(546)](),R[t(586)].render(x.value,F[t(505)]),null==(n=null==z?void 0:z[t(586)])||n[t(496)](R[t(586)],T[t(586)],D[t(586)]),R.value.xr[t(548)]=i,R[t(586)][t(511)][t(490)]=a,e[t(572)]=!0,R[t(586)].setRenderTarget(null)}));const j=In(),U=nn((()=>{const n=r,t={};return Object[n(498)](t,o),Object[n(498)](t,j.value),t}));return _n((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(586)])||n[e(489)](),null==(t=null==D?void 0:D[e(586)])||t[e(489)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(569),wn({key:"key"+P[c(586)][c(550)]+P[c(586)]["defines-USE_DEPTH"]+P[c(586)]["defines-USE_DISTORTION"],ref_key:c(580),ref:B},U[c(586)],{"texture-matrix":F[c(499)],mirror:tn(p),"t-diffuse":null==(e=T.value)?void 0:e[c(507)],"t-depth":null==(o=T[c(586)])?void 0:o[c(532)],"t-diffuse-blur":null==(i=D[c(586)])?void 0:i[c(507)],"has-blur":C[c(586)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":C[c(586)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Re)}}});function Ae(n){function t(n){const e=Se;if(typeof n===e(526))return function(n){}.constructor(e(492)).apply(e(585));1!==(""+n/n)[e(533)]||n%20==0?function(){return!0}[e(494)](e(488)+e(500)).call("action"):function(){return!1}[e(494)]("debugger")[e(537)](e(588)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Te(){const n=["add","setFromNormalAndCoplanarPoint","trace","isMesh","virtualCamera","setRenderTarget","texture","extractRotation","mix-contrast","copy","shadowMap","reflectorPlane","return (function() ","defines-USE_DEPTH","rotationMatrix","10HQAmMQ","texture-matrix","22GKhenA","table","11207vVECkn","depth-scale","3643135lHpiRj","lookAt","set","material","string","position","matrixWorld","distortion","t-diffuse-blur","distortionMap","depthTexture","length","reflect","multiplyScalar","1243790CaRlYr","apply","autoClear","t-diffuse","normal","projectionMatrix","mirror","119106WXWNUU","3QVyloY","matrixWorldInverse","clear","prototype","enabled","setFromMatrixPosition","defines-USE_BLUR","14054916ElyCFg","multiply","787680wcLQhL","console","toString","uuid","max-depth-threshold","992GVbtOq","target","function *\\( *\\)","applyMatrix4","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clipPlane","t-depth","mix-strength","test","view","TresMeshReflectorMaterial","info","negate","visible","__proto__","cameraWorldPosition","exception","depth-to-blur-ratio-bias","reflectorWorldPosition","elements","dot","materialRef","log","6DTounE","addScaledVector","bind","counter","value","13BQsgAs","stateObject","reflectorOffset","number","has-blur","subVectors","far","debu","dispose","autoUpdate","lookAtPosition","while (true) {}","updateMatrixWorld","constructor","2163404NFjByc","render","defines-USE_DISTORTION","assign","textureMatrix","gger"];return(Te=function(){return n})()}!function(n,t){const e=Oe,r=ze();for(;;)try{if(459574===parseInt(e(480))/1*(parseInt(e(465))/2)+-parseInt(e(478))/3+-parseInt(e(484))/4+-parseInt(e(455))/5+parseInt(e(473))/6+-parseInt(e(469))/7*(-parseInt(e(485))/8)+parseInt(e(470))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ze(){const n=["4485705VHWwod","constructor","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","exception","init","value","while (true) {}","trace","114ymEnCx","bind","info","CubeCamera","258727KsTmvh","8388270hTRvsI","function *\\( *\\)","type","1178004HnPptY",'{}.constructor("return this")( )',"debu","test","console","1190580eylwqh","toString","11447fUeOTg","warn","gger","apply","3213796DPVPrP","168RLCAVJ","fog","chain","call","update","dispose","background","return (function() ","error"];return(ze=function(){return n})()}!function(){De(this,(function(){const n=Oe,t=new RegExp(n(471)),e=new RegExp(n(458),"i"),r=Ce(n(461));t[n(476)](r+n(487))&&e[n(476)](r+"input")?Ce():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(n,t){const e=ze();return(Oe=function(n,t){return e[n-=451]})(n,t)}function Ce(n){function t(n){const e=Oe;if(typeof n===e(457))return function(n){}[e(456)](e(463))[e(483)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(456)](e(475)+"gger")[e(488)](e(459)):function(){return!1}.constructor("debu"+e(482))[e(483)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Pe(void 0,(function(){const n=Oe;let t;try{t=Function(n(453)+n(474)+");")()}catch(o){t=window}const e=t[n(477)]=t.console||{},r=["log",n(481),n(467),n(454),n(460),"table",n(464)];for(let i=0;i<r.length;i++){const t=Pe[n(456)].prototype[n(466)](Pe),o=r[i],a=e[o]||t;t.__proto__=Pe.bind(Pe),t[n(479)]=a[n(479)][n(466)](a),e[o]=t}}))();const Fe=Ne;!function(n,t){const e=Ne,r=Ue();for(;;)try{if(115918===parseInt(e(346))/1+parseInt(e(356))/2+-parseInt(e(365))/3+parseInt(e(355))/4*(-parseInt(e(330))/5)+parseInt(e(350))/6*(parseInt(e(369))/7)+-parseInt(e(352))/8*(parseInt(e(370))/9)+parseInt(e(353))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(368)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Ne,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(364),"i"),r=He(n(358));t.test(r+"chain")&&e.test(r+n(351))?He():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(368)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ke(void 0,(function(){const n=Ne,t=function(){const n=Ne;let t;try{t=Function("return (function() "+n(334)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=[n(339),n(366),"info","error",n(363),"table",n(362)];for(let o=0;o<r[n(331)];o++){const t=ke[n(354)][n(367)][n(329)](ke),i=r[o],a=e[i]||t;t.__proto__=ke[n(329)](ke),t[n(341)]=a.toString[n(329)](a),e[i]=t}}))();const je=[Fe(361)];function Ue(){const n=["apply","161QcDJcb","18ulmBnC","$slots","fog","bind","528365NaqInX","length","debu","frames",'{}.constructor("return this")( )',"call","envMap","gger","resolution","log","counter","toString","texture","visible","default","TresGroup","168191jGBXku","index","value","primitive","2334Pwtmip","input","242608HPCFTW","1866700axuvBa","constructor","8syYAjS","78224pqmCrY","near","init","while (true) {}","stateObject","object","trace","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","45012pVhMUs","warn","prototype"];return(Ue=function(){return n})()}function Ne(n,t){const e=Ue();return(Ne=function(n,t){return e[n-=329]})(n,t)}const Le=en({__name:Fe(347),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=$(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return Q((()=>s),(n=>{var t;const e=Oe;null==(t=c[e(462)])||t[e(451)](),c[e(462)]=new v(n[e(462)]),c[e(462)].texture[e(472)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(462)]=new(D[r(468)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;null==(n=c[Oe(462)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(462)][t(486)],d=a[t(462)][t(452)],a.value[t(452)]=r||d,a.value[t(486)]=o||p,null==(n=f.value)||n[t(489)](i[t(462)],a[t(462)]),a[t(462)][t(486)]=p,a[t(462)][t(452)]=d}}}({resolution:o[r(338)],near:o[r(357)],far:o.far,envMap:o[r(336)],fog:o[r(372)]}),{onBeforeLoop:s}=Y();let u=0;const l=J(null);return s((()=>{const n=r;l[n(348)]&&(o[n(333)]===1/0||u<o.frames)&&(l.value[n(343)]=!1,c(),l[n(348)][n(343)]=!0,u++)})),t({texture:null==(e=i[r(348)])?void 0:e[r(342)]}),(n,t)=>{const e=r;return an(),cn(e(345),null,[vn(e(349),{object:tn(a)},null,8,je),vn(e(345),{ref_key:"rgRef",ref:l},[sn(n[e(371)],e(344))],512)])}}});function He(n){function t(n){const e=Ne;if("string"==typeof n)return function(n){}.constructor(e(359))[e(368)](e(340));1!==(""+n/n)[e(331)]||n%20==0?function(){return!0}[e(354)]("debu"+e(337))[e(335)]("action"):function(){return!1}[e(354)](e(332)+e(337)).apply(e(360)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=Ge();for(;;)try{if(835157===-parseInt(e(408))/1+parseInt(e(428))/2+parseInt(e(420))/3+parseInt(e(425))/4*(parseInt(e(418))/5)+-parseInt(e(440))/6+parseInt(e(430))/7*(parseInt(e(422))/8)+-parseInt(e(446))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(412)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["action","length","7930287Rakrfs","UniformsUtils","function *\\( *\\)","clone","reduce","666748mHEvMM","return (function() ","exception","debu","apply","toString","value","error","warn","stateObject","5fDHLzs","bind","2018733fPCkRq","ShaderMaterial","15792VHKRZl","assign","uniforms","5228276HIkLAp","string","log","1566298svhzVU","constructor","707EFufjx","trace","console","forEach","__proto__","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","init","info","table","3476730pHfXfc","generateUUID","test","key"];return(Ge=function(){return n})()}!function(){Ze(this,(function(){const n=We,t=new RegExp(n(405)),e=new RegExp(n(435),"i"),r=qe(n(437));t.test(r+"chain")&&e[n(442)](r+"input")?qe():r("0")}))()}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=Ge();return(We=function(n,t){return e[n-=405]})(n,t)}function $e(n,t,e,r){const o=We,i=class extends D[o(421)]{constructor(i={}){const a=o,s=Object.entries(n);super({uniforms:s[a(407)](((n,[t,e])=>{const r=a,o=D[r(447)][r(406)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(443)]="",s[a(433)]((([n])=>Object.defineProperty(this,n,{get:()=>this[a(424)][n][a(414)],set:t=>this[a(424)][n][a(414)]=t}))),Object[a(423)](this,i),r&&r(this)}};return i[o(443)]=V[o(441)](),i}function qe(n){function t(n){const e=We;if(typeof n===e(426))return function(n){}[e(429)]("while (true) {}")[e(412)]("counter");1!==(""+n/n)[e(445)]||n%20==0?function(){return!0}[e(429)](e(411)+"gger").call(e(444)):function(){return!1}[e(429)](e(411)+"gger")[e(412)](e(417)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ve(void 0,(function(){const n=We;let t;try{t=Function(n(409)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(432)]=t[n(432)]||{},r=[n(427),n(416),n(438),n(415),n(410),n(439),n(431)];for(let i=0;i<r[n(445)];i++){const t=Ve[n(429)][n(436)][n(419)](Ve),o=r[i],a=e[o]||t;t[n(434)]=Ve[n(419)](Ve),t.toString=a[n(413)][n(419)](a),e[o]=t}}))();var Ye=lr;!function(n,t){for(var e=lr,r=ur();;)try{if(457080===parseInt(e(195))/1+parseInt(e(166))/2*(parseInt(e(237))/3)+-parseInt(e(234))/4+parseInt(e(256))/5+parseInt(e(292))/6+-parseInt(e(205))/7+parseInt(e(241))/8*(-parseInt(e(204))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[lr(214)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xe(this,(function(){var n=lr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(177),"i"),r=Dr(n(273));t.test(r+"chain")&&e.test(r+n(168))?Dr():r("0")}))()}();var Ke=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Je(n){var t=lr,e=function(n,t){var e=lr;if(typeof n!==e(218)||null===n)return n;var r=n[Symbol[e(160)]];if(void 0!==r){var o=r[e(283)](n,t||e(174));if(typeof o!==e(218))return o;throw new TypeError(e(175))}return(t===e(251)?String:Number)(n)}(n,t(251));return typeof e===t(272)?e:String(e)}function Qe(n,t,e){var r=lr;return(t=Je(t))in n?Object[r(262)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=lr,r=Object[e(247)](n);if(Object[e(306)]){var o=Object[e(306)](n);t&&(o=o[e(282)]((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r[e(240)][e(214)](r,o)}return r}function tr(n){for(var t=lr,e=1;e<arguments[t(213)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0)[t(153)]((function(t){Qe(n,t,r[t])})):Object[t(275)]?Object[t(259)](n,Object.getOwnPropertyDescriptors(r)):nr(Object(r))[t(153)]((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}function er(n,t){var e=lr;if(null==n)return{};var r,o,i=function(n,t){if(null==n)return{};var e,r,o={},i=Object[lr(247)](n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}(n,t);if(Object[e(306)]){var a=Object[e(306)](n);for(o=0;o<a[e(213)];o++)r=a[o],t[e(300)](r)>=0||Object[e(276)].propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=lr;(null==t||t>n[e(213)])&&(t=n[e(213)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array[lr(148)](n))return n}(n)||function(n,t){var e=lr,r=null==n?null:e(228)!=typeof Symbol&&n[Symbol.iterator]||n[e(309)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(283)](r))[e(181)])&&(s[e(240)](o[e(198)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r[e(331)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=lr;if(n){if(typeof n===e(251))return rr(n,t);var r=Object[e(276)][e(169)][e(283)](n).slice(8,-1);return r===e(295)&&n[e(229)]&&(r=n[e(229)][e(139)]),r===e(190)||r===e(265)?Array[e(317)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(326)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(lr(189))}()}function ir(n,t){for(var e=lr,r=0;r<t[e(213)];r++){var o=t[r];o[e(232)]=o[e(232)]||!1,o[e(221)]=!0,e(198)in o&&(o.writable=!0),Object[e(262)](n,Je(o[e(250)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cr(n,t){var e=lr;return(cr=Object[e(212)]?Object[e(212)][e(222)]():function(n,t){return n.__proto__=t,n})(n,t)}function sr(n){var t=lr;return(sr=Object[t(212)]?Object[t(288)][t(222)]():function(n){var e=t;return n[e(291)]||Object[e(288)](n)})(n)}function ur(){var n=["\n    vec3 totalEmissiveRadiance = ","getOwnPropertyDescriptors","prototype","\n    vec4 csm_internal_positionUnprojected = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","\n    \n","clearcoat","metalness","filter","call","();\n              // #_CSM_#\n          ","while (true) {}","trim","MathUtils","getPrototypeOf","diffuse","info","__proto__","4680384oQUaHm","csm_Roughness","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","Object","#define IS_","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","#define IS_UNKNOWN;\n","csm_Metalness","indexOf","csm_Position","silent","\n    #include <dithering_fragment>\n    gl_FragColor  = ","Cannot call a class as a function"," );\n    ","getOwnPropertySymbols","isAlreadyExtended","csm_ClearcoatRoughness","@@iterator","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","positionRaw","valueOf","Derived constructors may only return object or undefined","\n    gl_Position = ","emissive","\n            ","from","MeshDepthMaterial","csm_PositionRaw","construct","MeshToonMaterial","clearcoatNormal","patchMap","is not a constructor","console","test","substring","\n    vec3 transformed = ","replace","type","return","fragmentShader","MeshStandardMaterial","name","#define IS_VERTEX;\n",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","csm_main_","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","csm_Bump","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","toUpperCase","baseMaterial","isArray","message","position","gger","needsUpdate","forEach","CustomShaderMaterial does not support RawShaderMaterial","bump","CSM: ","set","depthAlpha","stateObject","toPrimitive","vertexShader","update","void main() {","exception","includes","213308cRWyRW","PointsMaterial","input","toString","void ","instanceID","return (function() ","Material","default","@@toPrimitive must return a primitive value.","sham","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","csm_DepthAlpha",'{}.constructor("return this")( )',";\n  ","done","create","counter",";\n    ","function","assign","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","RawShaderMaterial","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","Map","cacheKey","\n    vec3 objectNormal = ","// #_CSM_#","concat","223683HFFEoU","split","material.clearcoatRoughness = ","value","uniforms","\n    #include <color_fragment>\n    diffuseColor = ","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","lights_physical_fragment","MeshPhysicalMaterial","13255704ZFJlZo","2435804ytqisG","get"," is not available in ","\n            \n            void main() {\n          ","table","lastIndexOf","clone","setPrototypeOf","length","apply","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","MeshLambertMaterial","__csm","object","debu","normal","configurable","bind","csm_Normal","clearcoatRoughness","\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","\\$&","undefined","constructor","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","MeshPhongMaterial","enumerable","warn","616776HEDByD","_getPatchMapForMaterial","cacheHash","24zcyHYj","log","csm_FragColor","push","8pULcgX","csm_Emissive","find","MeshBasicMaterial","\n    gl_FragColor = ","trace","keys","ShaderChunk","entries","key","string","generateUUID","_generateMaterial","\n    \n            ","roughness","2875615CjKAnX","\n    gl_PointSize = ","csm_DiffuseColor","defineProperties","customProgramCacheKey","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","defineProperty","onBeforeCompile","_getCacheHash","Set",", 1.0 );\n  ","_patchShader","csm_AO","csm_PointSize","fragColor","pointSize","symbol","init"];return(ur=function(){return n})()}function lr(n,t){var e=ur();return(lr=function(n,t){return e[n-=137]})(n,t)}function fr(n){var t=function(){var n=lr;if(typeof Reflect===n(228)||!Reflect[n(320)])return!1;if(Reflect[n(320)][n(176)])return!1;if(typeof Proxy===n(185))return!0;try{return Boolean.prototype[n(312)][n(283)](Reflect[n(320)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=lr,o=sr(n);if(t){var i=sr(this)[r(229)];e=Reflect[r(320)](o,arguments,i)}else e=o[r(214)](this,arguments);return function(n,t){var e=lr;if(t&&(typeof t===e(218)||typeof t===e(185)))return t;if(void 0!==t)throw new TypeError(e(313));return ar(n)}(this,e)}}Ke(void 0,(function(){var n,t=lr;try{n=Function(t(172)+t(179)+");")()}catch(s){n=window}for(var e=n[t(325)]=n.console||{},r=[t(238),t(233),t(290),"error",t(164),t(209),t(246)],o=0;o<r[t(213)];o++){var i=Ke[t(229)][t(276)][t(222)](Ke),a=r[o],c=e[a]||i;i[t(291)]=Ke.bind(Ke),i[t(169)]=c[t(169)].bind(c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Ye(258),normal:Ye(223),roughness:Ye(293),metalness:Ye(299),emissive:Ye(242),ao:Ye(268),bump:Ye(144),clearcoat:"csm_Clearcoat",clearcoatRoughness:Ye(308),clearcoatNormal:"csm_ClearcoatNormal",pointSize:Ye(269),fragColor:Ye(239),depthAlpha:Ye(178),position:Ye(301),positionRaw:Ye(319)},mr=(Qe(pr={},""[Ye(194)](vr.position),"*"),Qe(pr,""[Ye(194)](vr.positionRaw),"*"),Qe(pr,""[Ye(194)](vr[Ye(220)]),"*"),Qe(pr,""[Ye(194)](vr[Ye(271)]),[Ye(167)]),Qe(pr,""[Ye(194)](vr.diffuse),"*"),Qe(pr,""[Ye(194)](vr.fragColor),"*"),Qe(pr,"".concat(vr[Ye(315)]),[Ye(138),Ye(203)]),Qe(pr,""[Ye(194)](vr.roughness),[Ye(138),Ye(203)]),Qe(pr,""[Ye(194)](vr.metalness),[Ye(138),Ye(203)]),Qe(pr,"".concat(vr.ao),[Ye(138),Ye(203),Ye(244),Ye(216),"MeshPhongMaterial",Ye(321)]),Qe(pr,""[Ye(194)](vr[Ye(155)]),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial",Ye(231),Ye(203),"MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),Qe(pr,""[Ye(194)](vr[Ye(158)]),[Ye(318)]),Qe(pr,""[Ye(194)](vr[Ye(280)]),[Ye(203)]),Qe(pr,""[Ye(194)](vr.clearcoatRoughness),[Ye(203)]),Qe(pr,""[Ye(194)](vr.clearcoatNormal),[Ye(203)]),pr),gr={"#include <lights_physical_fragment>":D[Ye(248)][Ye(202)]},_r=(Qe(dr={},""[Ye(194)](vr[Ye(220)]),{"#include <beginnormal_vertex>":Ye(192).concat(vr[Ye(220)],";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Qe(dr,"".concat(vr[Ye(150)]),{"#include <begin_vertex>":Ye(328)[Ye(194)](vr[Ye(150)],Ye(180))}),Qe(dr,"".concat(vr.positionRaw),{"#include <begin_vertex>":Ye(277)[Ye(194)](vr[Ye(311)],Ye(141))}),Qe(dr,"".concat(vr.pointSize),{"gl_PointSize = size;":Ye(257).concat(vr[Ye(271)],Ye(184))}),Qe(dr,""[Ye(194)](vr[Ye(289)]),{"#include <color_fragment>":Ye(200).concat(vr.diffuse,";\n  ")}),Qe(dr,"".concat(vr[Ye(270)]),{"#include <dithering_fragment>":Ye(303)[Ye(194)](vr.fragColor,Ye(180))}),Qe(dr,""[Ye(194)](vr[Ye(315)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(274)[Ye(194)](vr[Ye(315)],";\n    ")}),Qe(dr,""[Ye(194)](vr[Ye(255)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = ".concat(vr[Ye(255)],Ye(184))}),Qe(dr,"".concat(vr[Ye(281)]),{"#include <metalnessmap_fragment>":Ye(310).concat(vr[Ye(281)],Ye(184))}),Qe(dr,""[Ye(194)](vr.ao),{"#include <aomap_fragment>":Ye(226).concat(vr.ao,Ye(184))}),Qe(dr,""[Ye(194)](vr.bump),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ye(194)](vr[Ye(155)]," - (dot(")[Ye(194)](vr[Ye(155)],Ye(278))}),Qe(dr,""[Ye(194)](vr[Ye(158)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(187)[Ye(194)](vr[Ye(158)],Ye(305)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= "[Ye(194)](vr[Ye(158)],Ye(184))}),Qe(dr,"".concat(vr[Ye(280)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ye(194)](vr[Ye(280)],";")}),Qe(dr,""[Ye(194)](vr[Ye(224)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(197)[Ye(194)](vr[Ye(224)],";")}),Qe(dr,""[Ye(194)](vr[Ye(322)]),{"#include <clearcoat_normal_fragment_begin>":Ye(230)}),dr),yr=(Qe(hr={},"".concat(vr[Ye(150)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(201)[Ye(194)](vr.position,Ye(266))}),Qe(hr,""[Ye(194)](vr[Ye(311)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(314).concat(vr.position,";\n  ")}),Qe(hr,""[Ye(194)](vr[Ye(289)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(245)[Ye(194)](vr[Ye(289)],Ye(180))}),Qe(hr,""[Ye(194)](vr[Ye(270)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(245)[Ye(194)](vr[Ye(270)],Ye(180))}),hr),xr={clearcoat:[vr[Ye(280)],vr.clearcoatNormal,vr[Ye(224)]]},br=Ye(294),Ir=Ye(225),wr=Ye(279),Sr=[Ye(147),"fragmentShader","vertexShader",Ye(199),"patchMap","cacheKey",Ye(302)],Mr=function(n,t,e){return n[Ye(196)](t).join(e)},Rr=function(n,t){var e,r,o=Ye;return new RegExp("\\b".concat((e=t,r=Ye,e[r(329)](/[-\/\\^$*+?.()|[\]{}]/g,r(227))),"\\b"))[o(326)](n)};function Er(n){return n?n[Ye(329)](/\s/g,""):void 0}function Ar(n){return n[Ye(329)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=Ye;!function(n,t){var e=lr;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object[e(182)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(262)](n,"prototype",{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=lr,u=n.baseMaterial,l=n[s(137)],f=n.vertexShader,p=n[s(199)],d=n[s(323)],h=n.cacheKey,v=n[s(302)],m=er(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(lr(304))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(149)][t(300)](t(324))>=0)return!1}return!0}(u)?(e=u,Object[s(186)](e,m)):e=new u(m),e[s(330)]===s(188))throw new Error(s(154));(function(n,t){var e=Ye;e(213),Object.assign(n,t);var r=Object[e(288)](t);Object[e(249)](Object[e(275)](r))[e(282)]((function(n){var t=e,r=typeof n[1][t(206)]===t(185),o=typeof n[1][t(157)]===t(185),i="function"==typeof n[1][t(198)],a=n[0]===t(229);return(r||o||i)&&!a}))[e(153)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(262)](n,t[0],t[1])}))})(ar(t=a[s(283)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(287)][s(252)](),type:e[s(330)],isAlreadyExtended:(r=e.onBeforeCompile,o=Ye,i=r[o(169)]()[o(286)](),!(0===i[o(327)](i[o(300)]("{")+1,i.lastIndexOf("}"))[o(286)]()[o(213)])),cacheHash:"",silent:v},t[s(199)]=tr(tr({},t[s(199)]||{}),p||{});var g=t[s(217)],_=g[s(137)],y=g[s(161)],x=t.uniforms;return t[s(217)][s(236)]=t[s(264)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(162),value:function(){var n=t,e=arguments[n(213)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(199)]=e.uniforms||this[n(199)],Object[n(186)](this.__csm,e);var r=this[n(217)],o=r[n(137)],i=r[n(161)],a=this.uniforms,c=this[n(264)]();this.__csm.cacheHash=c,this[n(253)](o,i,a)}},{key:t(211),value:function(){var n=t,e={baseMaterial:this.__csm.baseMaterial,fragmentShader:this[n(217)][n(137)],vertexShader:this[n(217)].vertexShader,uniforms:this[n(199)],silent:this[n(217)].silent,patchMap:this.__csm[n(323)],cacheKey:this.__csm[n(191)]},r=new(this[n(229)])(e);return Object.assign(this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this.__csm,r=e[n(137)],o=e[n(161)],i=this[n(199)],a=[Er(r),Er(o),i][n(282)]((function(n){return void 0!==n}));return a[n(213)]>0?En(a,{excludeValues:!0}):this[n(260)]()}},{key:t(253),value:function(n,e,r){var o=t,i=this;this[o(199)]=r||{},this[o(260)]=function(){var n=o;return i.__csm[n(236)]};var a=function(t){var r=o;try{var a=i._getMaterialDefine();if(n){var c=i[r(267)](Ar(n),t[r(137)],!0);t[r(137)]=a+c}if(e){var s=i[r(267)](Ar(e),t[r(161)]);t.vertexShader=r(140)+s,t[r(161)]=a+t.vertexShader}t.uniforms=tr(tr({},t[r(199)]),i[r(199)]),i[r(199)]=t[r(199)]}catch(u){console.error(u)}};if(this[o(217)].isAlreadyExtended){var c=this.onBeforeCompile;this[o(263)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(152)]=!0}},{key:t(267),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(235)]()),this[o(217)].patchMap);Object[o(249)](xr)[o(153)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(243)]((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'.concat(a,'" is required to use output "')[e(194)](c,'". Shader cannot compile.'))})),Object.entries(gr)[o(153)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object.keys(c)[o(153)]((function(t){var e=o;Object[e(247)](c[t])[e(153)]((function(r){var o=e,s=mr[t],u=i[o(217)][o(330)];if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s[o(165)](u)||"*"===s))throw new Error(o(156)[o(194)](t,o(207)).concat(u,". Shader cannot compile."));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(142)+this[o(217)][o(171)][o(329)](/-/g,"_"),h=n.replace(/void\s+main\s*\(\s*\)/g,o(170).concat(d,"()")),v=n[o(165)]("void main()"),m=a.includes(o(193));return v&&(m&&this[o(217)][o(307)]?(a=a[o(329)](o(163),o(316)[o(194)](h,o(208))),s=a,u=o(193),l="\n            "[o(194)](d,"();\n            // #_CSM_#\n          "),p=s[(f=Ye)(210)](u),a=-1===p?s:s[f(327)](0,p)+l+s.substring(p+u.length)):a=a.replace(o(163),o(215).concat(r?Ir:"\n    varying mat4 csm_internal_vModelViewMatrix;\n",o(261))[o(194)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(254))[o(194)](h,o(143))[o(194)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(297))[o(194)](r?wr:br,o(145))[o(194)](d,o(284)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(217)][n(330)];return e?n(296).concat(e[n(146)](),";\n"):n(298)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return"ShaderMaterial"===this[n(217)][n(330)]?yr:_r}}],i=lr,r&&ir(e[i(276)],r),o&&ir(e,o),Object[i(262)](e,i(276),{writable:!1}),c}(D[Ye(173)]);function Dr(n){function t(n){var e=lr;if(typeof n===e(251))return function(n){}[e(229)](e(285))[e(214)](e(183));1!==(""+n/n)[e(213)]||n%20==0?function(){return!0}[e(229)](e(219)+e(151))[e(283)]("action"):function(){return!1}[e(229)]("debu"+e(151))[e(214)](e(159)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const zr=Fr;!function(n,t){const e=Fr,r=Cr();for(;;)try{if(165565===-parseInt(e(298))/1+-parseInt(e(288))/2+parseInt(e(287))/3+parseInt(e(259))/4*(-parseInt(e(281))/5)+-parseInt(e(266))/6+parseInt(e(293))/7+parseInt(e(296))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pr(this,(function(){const n=Fr,t=new RegExp(n(286)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=jr("init");t[n(280)](r+n(285))&&e[n(280)](r+n(282))?jr():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fr(297)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Cr(){const n=["function *\\( *\\)","662568KHJGad","137058JCnVaR","table","__proto__","action","clearcoat","23611hrCHYY","log","\n\t\t\t","3004592hSJMWB","apply","33495KlvUMG","error","metalness","toString","373528AVrHxj","exception","clearcoatRoughness","object","console","primitive","\n      ","312408VzNTkD","trace","roughness","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","warn","color","constructor","string","length","bind",'{}.constructor("return this")( )',"call","prototype","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","test","15FCiFtY","input","while (true) {}","counter","chain"];return(Cr=function(){return n})()}function Fr(n,t){const e=Cr();return(Fr=function(n,t){return e[n-=256]})(n,t)}Or(void 0,(function(){const n=Fr;let t;try{t=Function("return (function() "+n(276)+");")()}catch(o){t=window}const e=t[n(263)]=t[n(263)]||{},r=[n(294),n(270),"info",n(256),n(260),n(289),n(267)];for(let i=0;i<r[n(274)];i++){const t=Or[n(272)][n(278)].bind(Or),o=r[i],a=e[o]||t;t[n(290)]=Or[n(275)](Or),t.toString=a[n(258)][n(275)](a),e[o]=t}}))();const Br=[zr(262)],kr=en({__name:"index",props:{color:{default:"#ff00fc"},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=zr,e=n,r={baseMaterial:W,metalness:e[t(257)],roughness:e[t(268)],clearcoat:e[t(292)],clearcoatRoughness:e[t(261)],color:e[t(271)],vertexShader:t(269),fragmentShader:t(295)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(265)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(279)},o=new Tr(r);return pn((()=>{const n=t;o[n(271)].setStyle(e.color),o[n(257)]=e.metalness,o[n(268)]=e.roughness,o[n(292)]=e[n(292)],o[n(261)]=e[n(261)]})),(n,e)=>{const r=t;return an(),cn(r(264),{object:tn(o)},null,8,Br)}}});function jr(n){function t(n){const e=Fr;if(typeof n===e(273))return function(n){}.constructor(e(283))[e(297)](e(284));1!==(""+n/n)[e(274)]||n%20==0?function(){return!0}.constructor("debugger")[e(277)](e(291)):function(){return!1}[e(272)]("debugger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Nr,r=Hr();;)try{if(450613===parseInt(e(229))/1+-parseInt(e(246))/2*(-parseInt(e(245))/3)+parseInt(e(233))/4*(parseInt(e(238))/5)+parseInt(e(236))/6+parseInt(e(231))/7*(-parseInt(e(221))/8)+-parseInt(e(226))/9*(-parseInt(e(212))/10)+parseInt(e(240))/11*(-parseInt(e(243))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ur=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nr(n,t){var e=Hr();return(Nr=function(n,t){return e[n-=211]})(n,t)}!function(){Ur(this,(function(){var n=Nr,t=new RegExp(n(227)),e=new RegExp(n(237),"i"),r=Zr("init");t[n(224)](r+n(234))&&e.test(r+n(217))?Zr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Nr(218)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(){var n=["return (function() ","warn","11118228TbIATo","info","3raBnJc","1007074hhZSyy","counter","20cmYvaE","length","stateObject","exception","error","input","apply","while (true) {}","log","8elSgQT","trace","bind","test","console","2609388aKWyxa","function *\\( *\\)","gger","470387nEXkdB",'{}.constructor("return this")( )',"4541726qISNOD","constructor","248692GJNzcq","chain","debu","967782BlgoJT","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","25MdWuSE","toString","11hIDxvV"];return(Hr=function(){return n})()}function Zr(n){function t(n){var e=Nr;if("string"==typeof n)return function(n){}[e(232)](e(219)).apply(e(211));1!==(""+n/n)[e(213)]||n%20==0?function(){return!0}[e(232)](e(235)+e(228)).call("action"):function(){return!1}[e(232)](e(235)+e(228)).apply(e(214)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){var n,t=Nr;try{n=Function(t(241)+t(230)+");")()}catch(s){n=window}for(var e=n[t(225)]=n.console||{},r=[t(220),t(242),t(244),t(216),t(215),"table",t(222)],o=0;o<r[t(213)];o++){var i=Lr.constructor.prototype[t(223)](Lr),a=r[o],c=e[a]||i;i.__proto__=Lr[t(223)](Lr),i[t(239)]=c[t(239)][t(223)](c),e[a]=i}}))();export{$e as C,kr as _,lt as a,Qn as b,St as c,Dt as d,Nt as e,Jt as f,Le as g,Ee as h,mt as u};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,p as u,r as l,aM as f,aN as p,aO as d,H as h,aw as v,ax as m,A as g,aU as _,C as y,a0 as x,W as I,m as b,n as S,cb as w,cc as M,K as E,h as R,b as A,e as T,_ as D,bO as P,z,l as O,a_ as C,V as F,bp as k,aj as B,B as j,c as U,aK as N,g as L,M as H,ar as Z,a9 as G}from"./three.8tDGqmLF1741309500666.js";import{m as W,l as V,e as $}from"./@tresjs.yaBKiR-I1741309500666.js";import{R as K}from"./three-stdlib.sJO3Q2ZV1741309500666.js";import{y as Y,b as q,w as J,a as Q,u as X,d as nn,W as tn,a3 as en,a0 as rn,o as on,H as an,J as cn,M as sn,a7 as un,a2 as ln,q as fn,f as pn,N as dn,a8 as hn,r as vn,B as mn,v as gn,s as _n,F as yn,a6 as xn,m as In}from"./@vue.NRI7TcgI1741309500666.js";import{M as bn,a as Sn,C as wn}from"./@pmndrs.RQWNONeU1741309500666.js";import{h as Mn}from"./object-hash.X-alA6w11741309500666.js";var En=Dn;function Rn(){var n=["1126506JmqFtr","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","virtualScene","table","toString","error","add","material","constructor","3515SuvRwj","gger","14qPWyha","map","prototype","function *\\( *\\)","90dwbEQR","144vUIlSN","traverse","388165wJlVHc","9298120fUYSNV","dispose","action","warn","4328AoeMLJ","apply","chain","remove","47030oGQTbH","console","trace","log","string","while (true) {}","length","exception",'{}.constructor("return this")( )',"__proto__","geometry","info","destructor","bind","counter","test","18170768zoOHaB","76754GFfJka"];return(Rn=function(){return n})()}!function(n,t){for(var e=Dn,r=Rn();;)try{if(589460===parseInt(e(471))/1+parseInt(e(451))/2*(parseInt(e(468))/3)+-parseInt(e(476))/4*(parseInt(e(462))/5)+parseInt(e(452))/6*(parseInt(e(464))/7)+parseInt(e(472))/8+-parseInt(e(469))/9*(parseInt(e(434))/10)+-parseInt(e(450))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var An=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){An(this,(function(){var n=Dn,t=new RegExp(n(467)),e=new RegExp(n(454),"i"),r=On("init");t[n(449)](r+n(478))&&e[n(449)](r+"input")?On():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Dn(477)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(n,t){var e=Rn();return(Dn=function(n,t){return e[n-=434]})(n,t)}Tn(void 0,(function(){var n,t=Dn;try{n=Function(t(453)+t(442)+");")()}catch(s){n=window}for(var e=n[t(435)]=n[t(435)]||{},r=[t(437),t(475),t(445),t(458),t(441),t(456),t(436)],o=0;o<r.length;o++){var i=Tn[t(461)][t(466)][t(447)](Tn),a=r[o],c=e[a]||i;i[t(443)]=Tn.bind(Tn),i.toString=c[t(457)][t(447)](c),e[a]=i}}))();class Pn extends s{constructor(){var n=Dn;super(),this[n(455)]=null,this[n(455)]=new u}[En(459)](...n){return this.virtualScene.add(...n),this}[En(446)](){var n=En;this.virtualScene[n(470)]((t=>{var e=n;t instanceof l&&(t[e(444)][e(473)](),t[e(460)][e(473)](),t[e(460)].map&&t.material[e(465)][e(473)](),this.virtualScene[e(479)](t))})),this[n(455)]=null}}const zn=Pn;function On(n){function t(n){var e=Dn;if(typeof n===e(438))return function(n){}[e(461)](e(439))[e(477)](e(448));1!==(""+n/n)[e(440)]||n%20==0?function(){return!0}[e(461)]("debu"+e(463)).call(e(474)):function(){return!1}[e(461)]("debu"+e(463))[e(477)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Cn=Bn;!function(n,t){const e=Bn,r=Un();for(;;)try{if(733428===parseInt(e(429))/1+parseInt(e(412))/2+-parseInt(e(403))/3*(parseInt(e(400))/4)+-parseInt(e(406))/5*(parseInt(e(421))/6)+parseInt(e(409))/7*(parseInt(e(408))/8)+-parseInt(e(427))/9*(-parseInt(e(396))/10)+parseInt(e(402))/11*(parseInt(e(423))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bn(399)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fn(this,(function(){const n=Bn,t=new RegExp(n(390)),e=new RegExp(n(394),"i"),r=Nn(n(416));t[n(432)](r+"chain")&&e.test(r+n(422))?Nn():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(n,t){const e=Un();return(Bn=function(n,t){return e[n-=385]})(n,t)}kn(void 0,(function(){const n=Bn;let t;try{t=Function("return (function() "+n(430)+");")()}catch(o){t=window}const e=t[n(420)]=t[n(420)]||{},r=["log",n(428),n(425),n(392),n(413),n(426),n(385)];for(let i=0;i<r[n(404)];i++){const t=kn[n(405)].prototype[n(407)](kn),o=r[i],a=e[o]||t;t.__proto__=kn[n(407)](kn),t[n(417)]=a.toString.bind(a),e[o]=t}}))();const jn={sunset:Cn(393),studio:Cn(389),city:Cn(401),umbrellas:Cn(415),night:Cn(398),forest:Cn(424),snow:Cn(397),dawn:Cn(411),hangar:"indoor/small_hangar_01_1k.hdr",urban:Cn(414),modern:Cn(431),shangai:Cn(433)};function Un(){const n=["trace","action","gger","stateObject","studio/poly_haven_studio_1k.hdr","function *\\( *\\)","while (true) {}","error","venice/venice_sunset_1k.hdr","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","10mWWcgc","outdoor/snowy_forest_path_01_1k.hdr","outdoor/satara_night_1k.hdr","apply","16sGPqHZ","city/canary_wharf_1k.hdr","11JxxFqv","1078671nCRMfl","length","constructor","6410ijEkQV","bind","69976IiERAR","434zOWkHk","call","kiara/kiara_1_dawn_1k.hdr","341414IQZWSC","exception","indoor/abandoned_games_room_02_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","init","toString","string","counter","console","5916XDqoAC","input","21156720AWSvoS","outood/mossy_forest_1k.hdr","info","table","3396123wgMriK","warn","582280reoakv",'{}.constructor("return this")( )',"city/modern_buildings_2_1k.hdr","test","city/shanghai_bund_1k.hdr"];return(Un=function(){return n})()}function Nn(n){function t(n){const e=Bn;if(typeof n===e(418))return function(n){}[e(405)](e(391))[e(399)](e(419));1!==(""+n/n).length||n%20==0?function(){return!0}[e(405)](e(395)+"gger")[e(410)](e(386)):function(){return!1}[e(405)](e(395)+e(387)).apply(e(388)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ln=Hn;function Hn(n,t){const e=Wn();return(Hn=function(n,t){return e[n-=190]})(n,t)}!function(n,t){const e=Hn,r=Wn();for(;;)try{if(770746===parseInt(e(208))/1*(-parseInt(e(192))/2)+parseInt(e(214))/3*(-parseInt(e(220))/4)+-parseInt(e(224))/5+parseInt(e(197))/6*(-parseInt(e(205))/7)+-parseInt(e(204))/8*(-parseInt(e(201))/9)+-parseInt(e(195))/10+-parseInt(e(194))/11*(-parseInt(e(229))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Hn(236)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zn(this,(function(){const n=Hn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(209),"i"),r=$n("init");t[n(217)](r+"chain")&&e[n(217)](r+n(207))?$n():r("0")}))()}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(){const n=["return (function() ","warn","37618QvFJJL","Failed to load environment map: ","15883846BFmCVx","13440960hOLXzk","console","6KGrQaX","bind","mapping","while (true) {}","3180015YoQnVm","isColor",'{}.constructor("return this")( )',"16YOzgMK","5323003RCDJEe","length","input","40sjjLFd","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","string","Preset must be one of: ","constructor","159clFajs","call","background","test","texture","stateObject","73604AMkEKx","info","error","setPath","2178720FhOJMQ","toString","keys","debu","backgroundBlurriness","36evOMBs","trace","isArray","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","value","gger","counter","apply","join"];return(Wn=function(){return n})()}Gn(void 0,(function(){const n=Hn,t=function(){const n=Hn;let t;try{t=Function(n(190)+n(203)+");")()}catch(e){t=window}return t}(),e=t[n(196)]=t[n(196)]||{},r=["log",n(191),n(221),n(222),n(210),"table",n(230)];for(let o=0;o<r[n(206)];o++){const t=Gn[n(213)].prototype.bind(Gn),i=r[o],a=e[i]||t;t.__proto__=Gn[n(198)](Gn),t[n(225)]=a[n(225)][n(198)](a),e[i]=t}}))();const Vn=Ln(232);function $n(n){function t(n){const e=Hn;if(typeof n===e(211))return function(n){}[e(213)](e(200))[e(236)](e(235));1!==(""+n/n)[e(206)]||n%20==0?function(){return!0}[e(213)](e(227)+e(234))[e(215)]("action"):function(){return!1}.constructor(e(227)+e(234))[e(236)](e(219)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Kn=Jn;!function(n,t){const e=Jn,r=Qn();for(;;)try{if(578914===-parseInt(e(216))/1*(-parseInt(e(161))/2)+-parseInt(e(208))/3+-parseInt(e(172))/4*(parseInt(e(189))/5)+parseInt(e(187))/6*(parseInt(e(190))/7)+-parseInt(e(217))/8*(-parseInt(e(183))/9)+parseInt(e(185))/10*(parseInt(e(192))/11)+-parseInt(e(202))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yn(this,(function(){const n=Jn,t=new RegExp(n(178)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=nt(n(207));t[n(218)](r+"chain")&&e[n(218)](r+n(191))?nt():r("0")}))()}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(175)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=Qn();return(Jn=function(n,t){return e[n-=160]})(n,t)}function Qn(){const n=["prototype","158254ejmQDw","log","$slots","string","constructor","exception",'{}.constructor("return this")( )',"virtualScene","background","__proto__","toString","3100000YulXKX","bind","frames","apply","default","dispose","function *\\( *\\)","value","component","return (function() ","console","9RAcKmD","counter","471670rSyxrt","environment","111138ttWxPf","error","5gpokWy","301eeFhcW","input","77thSODK","stateObject","destructor","useDefaultScene","trace","isArray","warn","while (true) {}","update","minFilter","3630336kVpZep","generateMipmaps","gger","texture","type","init","272370HXoksW","envSence","length","action","info","table","near","resolution","1BkaQxc","4331576cgZdbo","test"];return(Qn=function(){return n})()}qn(void 0,(function(){const n=Jn;let t;try{t=Function(n(181)+n(167)+");")()}catch(o){t=window}const e=t[n(182)]=t.console||{},r=[n(162),n(198),n(212),n(188),n(166),n(213),n(196)];for(let i=0;i<r[n(210)];i++){const t=qn[n(165)][n(160)][n(173)](qn),o=r[i],a=e[o]||t;t[n(170)]=qn[n(173)](qn),t[n(171)]=a[n(171)][n(173)](a),e[o]=t}}))();const Xn=nn({__name:Kn(180),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Kn;let r,o;const i=n,a=q(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=q(null),x=null;const I=q(null);tn((()=>{var n,t;const e=Jn;null==(n=I[e(179)])||n[e(194)](),null==(t=y[e(179)])||t[e(177)]()}));const{onBeforeLoop:b}=$();let S=1;b((()=>{const n=Jn;x&&I.value&&y[n(179)]&&(i[n(174)]===1/0||S<i[n(174)])&&(i[n(195)]?x[n(200)](s[n(179)],u[n(179)]):x.update(s[n(179)],un(I.value[n(168)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=q([]),path:s=q(""),background:u}=Y(n);J(n,(()=>{o()}));const l=q(null),h=Q((()=>Array[e(231)](c[e(233)]))),v=Q((()=>h[e(233)]?f:K));return J([c,s],(async([n,t])=>{const r=e;if(n&&n[r(206)]>0&&!(null==i?void 0:i[r(233)])){try{l.value=await V(v[r(233)],h[r(233)]?[...X(n)]:X(n),(n=>{t&&n[r(223)](X(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l.value&&(l[r(233)][r(199)]=h.value?p:d)}}),{immediate:!0}),J(l,(n=>{const t=e;r[t(233)]&&n&&(r[t(233)].environment=n)}),{immediate:!0}),J([u,l],(([n,o])=>{const i=e;if(r[i(233)]){let e=(null==t?void 0:t.value)?t.value[i(218)]:o,a=r[i(233)][i(216)];!(null==a?void 0:a[i(202)])&&(a=void 0),r[i(233)][i(216)]=n?e:a}}),{immediate:!0}),J((()=>null==a?void 0:a[e(233)]),(n=>{const t=e;r.value&&n&&(r[t(233)][t(228)]=n)}),{immediate:!0}),J((()=>null==i?void 0:i[e(233)]),(async n=>{const t=e;if(n&&n in jn){const e=Vn,i=jn[n];try{l[t(233)]=await V(K,i,(n=>{e&&n[t(223)](e)}))}catch(r){throw new Error(t(193)+r)}l[t(233)]&&l[t(233)]&&(l[t(233)][t(199)]=d),o()}else if(n&&!(n in jn))throw new Error(t(212)+Object[t(226)](jn)[t(237)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(179)].environment=n[t(205)],i[t(169)]&&(u[t(179)][t(169)]=n[t(205)])):(u[t(179)][t(186)]=w.value,i[t(169)]&&(u[t(179)].background=w.value))};J(w,(n=>{y.value&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:zn});const E=()=>{var n;const t=Jn;null==(n=y[t(179)])||n[t(177)](),y.value=new v(i[t(215)]),x=new m(i[t(214)],i.far,y[t(179)]),i[t(195)]?(y[t(179)][t(205)][t(206)]=g,y[t(179)][t(205)][t(203)]=!1,y[t(179)][t(205)][t(201)]=_,y.value.texture.magFilter=_):y.value[t(205)][t(206)]=h,M(y.value)};return J((()=>rn()[e(176)]),(n=>{var t,r;const o=e;n&&(!y[o(179)]||y[o(179)][o(205)][o(206)]!==h)&&(l=n(),Array[o(197)](l)&&l[o(210)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t.type))?E():(null==(r=y[o(179)])||r[o(177)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(179)]=w,J((()=>i.useDefaultScene),(n=>{y[e(179)]&&E()})),(n,t)=>{const r=e;return X(y)?(on(),an("TresEnvSence",{key:0,ref_key:r(209),ref:I},[cn(n[r(163)],r(176))],512)):sn("",!0)}}});function nt(n){function t(n){const e=Jn;if(typeof n===e(164))return function(n){}[e(165)](e(199))[e(175)](e(184));1!==(""+n/n).length||n%20==0?function(){return!0}[e(165)]("debu"+e(204)).call(e(211)):function(){return!1}[e(165)]("debu"+e(204))[e(175)](e(193)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const tt=et;function et(n,t){const e=ot();return(et=function(n,t){return e[n-=375]})(n,t)}!function(n,t){const e=et,r=ot();for(;;)try{if(313816===parseInt(e(389))/1+parseInt(e(428))/2+parseInt(e(396))/3*(parseInt(e(402))/4)+-parseInt(e(419))/5*(-parseInt(e(415))/6)+-parseInt(e(403))/7+-parseInt(e(410))/8+-parseInt(e(378))/9*(parseInt(e(397))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(411)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ot(){const n=["console","action","toneMapped","input","rect","116320GhzKSS","warn","color","string","debu","toString",'{}.constructor("return this")( )',"1581lMnuki","2000toCbtE","map","prototype","intensity","needsUpdate","1076DhHJqm","123046qzobHw","return (function() ","ring","info","TresRingGeometry","material","error","2794624cRQtcp","apply","side","bind","value","63978MoTJSL","exception","constructor","stateObject","235huLkuP","while (true) {}","trace","call","log","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","set","281756VLAYMM","table","from","init","9873mbFsBd","counter","length","TresPlaneGeometry","chain","TresMesh"];return(ot=function(){return n})()}!function(){rt(this,(function(){const n=et,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(425),"i"),r=ft(n(377));t[n(424)](r+n(382))&&e.test(r+n(387))?ft():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();it(void 0,(function(){const n=et,t=function(){const n=et;let t;try{t=Function(n(404)+n(395)+");")()}catch(e){t=window}return t}(),e=t[n(384)]=t[n(384)]||{},r=[n(423),n(390),n(406),n(409),n(416),n(375),n(421)];for(let o=0;o<r[n(380)];o++){const t=it.constructor[n(399)][n(413)](it),i=r[o],a=e[i]||t;t.__proto__=it[n(413)](it),t[n(394)]=a[n(394)][n(413)](a),e[i]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[tt(386),tt(398),tt(412),tt(391)],lt=nn({__name:"index",props:{args:{default:null},from:{default:tt(388)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=tt,e=n,r=q();return ln((()=>{const n=et;r.value&&(r.value[n(391)].multiplyScalar(e.intensity),r[n(414)][n(401)]=!0)})),J((()=>e[t(391)]),(n=>{const o=t;r[o(414)]&&(r[o(414)][o(391)][o(427)](n),r[o(414)][o(391)].multiplyScalar(e[o(400)]),r[o(414)][o(401)]=!0)})),fn((()=>{})),(n,o)=>{const i=t;return on(),an(i(383),null,["circle"===e[i(376)]?(on(),an(i(407),at)):e.from===i(405)?(on(),an(i(407),ct)):"rect"===e[i(376)]?(on(),an(i(381),st)):(on(),pn(e[i(376)],{key:3,args:e})),dn("TresMeshBasicMaterial",{ref_key:i(408),ref:r,toneMapped:n[i(386)],map:n[i(398)],side:X(x),color:n[i(391)]},null,8,ut)])}}});function ft(n){function t(n){const e=et;if(typeof n===e(392))return function(n){}.constructor(e(420))[e(411)](e(379));1!==(""+n/n)[e(380)]||n%20==0?function(){return!0}[e(417)](e(393)+e(426))[e(422)](e(385)):function(){return!1}[e(417)](e(393)+e(426))[e(411)](e(418)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(n,t){const e=gt();return(pt=function(n,t){return e[n-=208]})(n,t)}!function(n,t){const e=pt,r=gt();for(;;)try{if(491393===-parseInt(e(225))/1+-parseInt(e(233))/2*(-parseInt(e(253))/3)+parseInt(e(224))/4*(parseInt(e(250))/5)+-parseInt(e(217))/6+parseInt(e(243))/7+-parseInt(e(222))/8*(-parseInt(e(249))/9)+-parseInt(e(213))/10*(-parseInt(e(244))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(215)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=pt,t=new RegExp(n(219)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=mt(n(237));t[n(227)](r+"chain")&&e[n(227)](r+n(209))?mt():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pt(215)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n){const t=q(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?Y(n):Y(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=pt;null==(n=t.value)||n[a(231)](),t.value=new I((null==r?void 0:r.value)||p[a(234)][a(232)],(null==e?void 0:e[a(232)])||p.height.value,c({minFilter:b,magFilter:b,type:h},null==o?void 0:o[a(232)])),(null==i?void 0:i[a(232)])&&(t[a(232)][a(211)]=new S((null==r?void 0:r[a(232)])||p[a(234)][a(232)],(null==e?void 0:e.value)||p[a(248)][a(232)]),t[a(232)][a(211)][a(240)]=w,t[a(232)][a(211)][a(226)]=M)})),s((()=>{const n=pt;(null==a?void 0:a[n(232)])&&(l.value[n(229)](un(t.value)),l.value[n(228)](),l[n(232)][n(254)](un(f[n(232)]),un(u.value)),l.value[n(229)](null))})),mn((()=>{var n;const e=pt;null==(n=t[e(232)])||n[e(231)]()})),t}function mt(n){function t(n){const e=pt;if(typeof n===e(235))return function(n){}[e(230)](e(247))[e(215)](e(221));1!==(""+n/n).length||n%20==0?function(){return!0}[e(230)](e(214)+e(252))[e(223)]("action"):function(){return!1}[e(230)](e(214)+"gger").apply(e(241)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function gt(){const n=["264933ZqJrzm","render","log","input","exception","depthTexture","error","50HsUlsg","debu","apply","return (function() ","5645916RMUdXu","table","function *\\( *\\)","__proto__","counter","83320CCkRTh","call","1699324ucgvxj","366360xPObwU","type","test","clear","setRenderTarget","constructor","dispose","value","6PekUsy","width","string","console","init","bind","warn","format","stateObject",'{}.constructor("return this")( )',"1406923VloSHh","375551MSteAM","trace","info","while (true) {}","height","270opJzdw","10HwpNot","toString","gger"];return(gt=function(){return n})()}ht(void 0,(function(){const n=pt;let t;try{t=Function(n(216)+n(242)+");")()}catch(o){t=window}const e=t[n(236)]=t[n(236)]||{},r=[n(208),n(239),n(246),n(212),n(210),n(218),n(245)];for(let i=0;i<r.length;i++){const t=ht[n(230)].prototype[n(238)](ht),o=r[i],a=e[o]||t;t[n(220)]=ht[n(238)](ht),t[n(251)]=a.toString[n(238)](a),e[o]=t}}))();const _t=St;!function(n,t){const e=St,r=bt();for(;;)try{if(249105===parseInt(e(361))/1+-parseInt(e(371))/2*(parseInt(e(359))/3)+-parseInt(e(340))/4*(-parseInt(e(349))/5)+parseInt(e(372))/6*(-parseInt(e(322))/7)+-parseInt(e(355))/8*(-parseInt(e(346))/9)+parseInt(e(333))/10*(parseInt(e(350))/11)+-parseInt(e(369))/12*(parseInt(e(330))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[St(335)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){yt(this,(function(){const n=St,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(352),"i"),r=Mt("init");t[n(321)](r+n(326))&&e[n(321)](r+n(334))?Mt():r("0")}))()}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();xt(void 0,(function(){const n=St;let t;try{t=Function(n(366)+n(351)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(332),n(325),n(368),"exception",n(370),"trace"];for(let i=0;i<r[n(327)];i++){const t=xt.constructor[n(362)][n(347)](xt),o=r[i],a=e[o]||t;t.__proto__=xt.bind(xt),t[n(324)]=a[n(324)][n(347)](a),e[o]=t}}))();const It=[_t(341),"side"];function bt(){const n=["input","apply","uuid","action","index","texture","13228LDRJsg","buffer","string","toneMapping","MeshTransmissionMaterialClass","background","93114zPyqFi","bind","setRenderTarget","610RQkduv","451KXXhNs",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","backsideThickness","value","16HsNxGZ","counter","thickness","while (true) {}","9PpJOMv","debu","327680mNMHet","prototype","fboResolution","TresMeshTransmissionMaterial","isMesh","return (function() ","envMapIntensity","error","276ugMRFY","table","262674OSNOiY","161394YDbVin","call","side","test","28HCUWEN","constructor","toString","info","chain","length","material","gger","85423kwkVML","time","warn","36590MyVUPt"];return(bt=function(){return n})()}function St(n,t){const e=bt();return(St=function(n,t){return e[n-=321]})(n,t)}const wt=nn({__name:_t(338),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=_t,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:bn});const l=new Sn,{onBeforeLoop:f}=$(),p=vt({width:u[e(363)],height:u.fboResolution,isLoop:!1}),d=vt({width:u[e(363)],height:u[e(363)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s[n(354)]=function(n,t){let e;return n.traverse((n=>{const r=St;n[r(365)]&&n[r(328)]&&n.material[r(336)]===t&&(e=n)})),e}(i.value,r[n(354)].uuid)})),f((({elapsed:n})=>{const t=e;r.value[t(331)]=n,r[t(354)][t(341)]===d[t(354)][t(339)]&&s[t(354)]&&(m=a.value[t(343)],h=i[t(354)][t(345)],v=r[t(354)][t(367)],g=s[t(354)][t(328)][t(374)],s[t(354)][t(328)]=l,u.backside&&(a[t(354)][t(348)](p[t(354)]),a[t(354)].render(i[t(354)],c[t(354)]),s[t(354)].material=r.value,s.value[t(328)][t(357)]=u[t(353)],s[t(354)][t(328)][t(341)]=p.value[t(339)],s[t(354)][t(328)].side=E,s[t(354)].material[t(367)]=0),a[t(354)][t(348)](d[t(354)]),a[t(354)].render(i[t(354)],c.value),s.value[t(328)][t(341)]=d[t(354)][t(339)],s.value[t(328)]=r[t(354)],s[t(354)].material[t(357)]=u[t(357)],s[t(354)][t(328)][t(374)]=g,s[t(354)][t(328)][t(367)]=v,i[t(354)][t(345)]=h,a[t(354)][t(348)](null),a[t(354)].toneMapping=m)})),t({root:r,constructor:bn}),(n,t)=>{const o=e;return on(),an(o(364),{ref_key:o(344),ref:r,buffer:X(d).texture,side:X(x)},null,8,It)}}});function Mt(n){function t(n){const e=St;if(typeof n===e(342))return function(n){}[e(323)](e(358))[e(335)](e(356));1!==(""+n/n).length||n%20==0?function(){return!0}[e(323)](e(360)+e(329))[e(373)](e(337)):function(){return!1}.constructor("debugger")[e(335)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=At;!function(n,t){const e=At,r=Dt();for(;;)try{if(170641===-parseInt(e(431))/1+-parseInt(e(476))/2+-parseInt(e(478))/3+-parseInt(e(456))/4*(-parseInt(e(480))/5)+parseInt(e(442))/6+parseInt(e(459))/7+-parseInt(e(433))/8*(parseInt(e(470))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function At(n,t){const e=Dt();return(At=function(n,t){return e[n-=431]})(n,t)}!function(){Rt(this,(function(){const n=At,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=zt(n(443));t[n(468)](r+n(460))&&e[n(468)](r+n(444))?zt():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[At(434)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(){const n=["111747xcfheG","back","142390WYNGVg","211201NVxPKJ","prototype","704ihVIYK","apply","max","disableZ","bind","console","default","index","trace","1182372LCGnqK","init","input","while (true) {}","constructor","TresGroup","length","table","position","getCenter","bottom","gref","identity","string","12bWxzwP","__proto__","warn","1879290ZmRGTx","chain","top","value","toString","outer","min","disableX","call","test","matrixWorld","9279YibObW","right","disable",'{}.constructor("return this")( )',"gger","disableY","82294iFNkoo","stateObject"];return(Dt=function(){return n})()}Tt(void 0,(function(){const n=At;let t;try{t=Function("return (function() "+n(473)+");")()}catch(o){t=window}const e=t.console=t[n(438)]||{},r=["log",n(458),"info","error","exception",n(449),n(441)];for(let i=0;i<r[n(448)];i++){const t=Tt.constructor[n(432)][n(437)](Tt),o=r[i],a=e[o]||t;t[n(457)]=Tt[n(437)](Tt),t[n(463)]=a[n(463)].bind(a),e[o]=t}}))();const Pt=nn({__name:Et(440),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=q(null),r=q(null),o=q(null);return fn((()=>{const n=At;if(!r.value)return;if(!o[n(462)])return;r[n(462)][n(469)][n(454)]();const e=(new R).setFromObject(o[n(462)],t.precise),i=new A,a=new T,c=e.max.x-e[n(465)].x,s=e.max.y-e[n(465)].y,u=e[n(435)].z-e[n(465)].z;e[n(451)](i),e.getBoundingSphere(a);const l=t[n(461)]?s/2:t[n(452)]?-s/2:0,f=t.left?-c/2:t[n(471)]?c/2:0,p=t.front?u/2:t[n(479)]?-u/2:0;r[n(462)][n(450)].set(t[n(472)]||t[n(466)]?0:-i.x+f,t[n(472)]||t[n(475)]?0:-i.y+l,t.disable||t[n(436)]?0:-i.z+p)})),(n,t)=>{const i=At;return on(),an(i(447),{ref_key:i(453),ref:e},[dn(i(447),{ref_key:i(464),ref:r},[dn(i(447),{ref_key:"inner",ref:o},[cn(n.$slots,i(439))],512)],512)],512)}}});function zt(n){function t(n){const e=At;if(typeof n===e(455))return function(n){}[e(446)](e(445))[e(434)]("counter");1!==(""+n/n)[e(448)]||n%20==0?function(){return!0}[e(446)]("debu"+e(474))[e(467)]("action"):function(){return!1}[e(446)]("debu"+e(474))[e(434)](e(477)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Ut;!function(n,t){const e=Ut,r=jt();for(;;)try{if(507409===-parseInt(e(429))/1*(parseInt(e(432))/2)+-parseInt(e(396))/3*(parseInt(e(401))/4)+parseInt(e(450))/5+-parseInt(e(435))/6+parseInt(e(448))/7+parseInt(e(410))/8+-parseInt(e(436))/9*(-parseInt(e(438))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ct(this,(function(){const n=Ut,t=new RegExp(n(405)),e=new RegExp(n(444),"i"),r=Lt(n(440));t[n(431)](r+"chain")&&e[n(431)](r+n(414))?Lt():r("0")}))()}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ut(417)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ft(void 0,(function(){const n=Ut;let t;try{t=Function(n(422)+n(418)+");")()}catch(o){t=window}const e=t[n(454)]=t[n(454)]||{},r=[n(395),n(420),n(424),n(452),n(434),n(409),n(439)];for(let i=0;i<r.length;i++){const t=Ft[n(412)][n(407)].bind(Ft),o=r[i],a=e[o]||t;t[n(406)]=Ft[n(400)](Ft),t[n(402)]=a.toString.bind(a),e[o]=t}}))();const kt=[Ot(408)],Bt=["object"];function jt(){const n=["resolution","return (function() ","group","info","stateObject","index","gger","helper","8095nisibI","counter","test","6EfKBVB","call","exception","1820880gAlMcq","252qPcpbv","color","133100DjTUBk","trace","init","causticsOnly","lightSource","worldRadius","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","primitive","params","default","1653533eDSdtU","far","2710170GSYNhV","while (true) {}","error","update","console","log","2465523oplmZJ","backsideIOR","string","set","bind","4sQizks","toString","backside","#ffffff","function *\\( *\\)","__proto__","prototype","object","table","4048656NJocBK","ior","constructor","intensity","input","action","value","apply",'{}.constructor("return this")( )',"length","warn"];return(jt=function(){return n})()}function Ut(n,t){const e=jt();return(Ut=function(n,t){return e[n-=395]})(n,t)}const Nt=nn({__name:Ot(426),props:{color:{default:Ot(404)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=W(),o=wn(r[t(416)],{frames:1/0,resolution:e[t(421)],worldRadius:e.worldRadius});o[t(446)][t(403)]=!0;const i=gn(null);J(i,(n=>{n&&o.scene.add(n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(453)]()})),ln((()=>{const n=t;e[n(437)]&&o[n(446)][n(437)][n(399)](e[n(437)]),e[n(411)]&&(o.params[n(411)]=e[n(411)]),e[n(397)]&&(o.params[n(397)]=e[n(397)]),e.far&&(o.params[n(449)]=e[n(449)]),e[n(443)]&&(o[n(446)][n(443)]=e[n(443)]),e[n(413)]&&(o[n(446)].intensity=e.intensity)})),J((()=>e[t(441)]),(n=>{const e=t;o[e(446)][e(441)]=n})),J((()=>e[t(442)]),(n=>{const e=t;n&&o[e(446)].lightSource instanceof A&&o[e(446)].lightSource[e(399)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return on(),an(yn,null,[dn("TresGroup",{ref_key:r(423),ref:i},[cn(n.$slots,r(447))],512),dn(r(445),{object:X(o)[r(423)],position:[0,.003,0]},null,8,kt),dn(r(445),{object:X(o)[r(428)],visible:!1},null,8,Bt)],64)}}});function Lt(n){function t(n){const e=Ut;if(typeof n===e(398))return function(n){}.constructor(e(451))[e(417)](e(430));1!==(""+n/n)[e(419)]||n%20==0?function(){return!0}[e(412)]("debugger")[e(433)](e(415)):function(){return!1}[e(412)]("debu"+e(427))[e(417)](e(425)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Wt,r=Zt();for(;;)try{if(856853===parseInt(e(516))/1+parseInt(e(531))/2*(parseInt(e(526))/3)+-parseInt(e(525))/4*(parseInt(e(527))/5)+parseInt(e(504))/6*(parseInt(e(508))/7)+parseInt(e(538))/8*(parseInt(e(511))/9)+parseInt(e(543))/10*(-parseInt(e(505))/11)+-parseInt(e(540))/12*(-parseInt(e(537))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wt(547)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zt(){const n=["dispose","table","material","forEach","bind","length","__proto__","properties","debu","316698CYtUGG","62491yKTzsu","input","while (true) {}","70jfusVK","shadowmap_pars_fragment","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","42498JODpZU","chain",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","; i ++) {\n        offset = (vogelDiskSample(j, ","1442598syQyXE","return (function() ","ShaderChunk",'{}.constructor("return this")( )',"log","trace","info","gger","function *\\( *\\)","92pTkKsn","616515jdMKlL","208510DNEwoB","warn","traverse","init","6AnquBp","string","remove","replace","counter","stateObject","3669133ojgHYU","824NUEdrb","error","12jSTlXe",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2710UQVPlz","test",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","prototype","apply","console","constructor","toString",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }"];return(Zt=function(){return n})()}!function(){Ht(this,(function(){const n=Wt,t=new RegExp(n(524)),e=new RegExp(n(542),"i"),r=$t(n(530));t[n(544)](r+n(512))&&e[n(544)](r+n(506))?$t():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(n,t){const e=Zt();return(Wt=function(n,t){return e[n-=491]})(n,t)}Gt(void 0,(function(){const n=Wt,t=function(){const n=Wt;let t;try{t=Function(n(517)+n(519)+");")()}catch(e){t=window}return t}(),e=t[n(491)]=t[n(491)]||{},r=[n(520),n(528),"info",n(539),"exception",n(496),n(521)];for(let o=0;o<r[n(500)];o++){const t=Gt[n(492)][n(546)].bind(Gt),i=r[o],a=e[i]||t;t[n(501)]=Gt[n(499)](Gt),t[n(493)]=a.toString.bind(a),e[i]=t}}))();const Vt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Wt,o=D[r(518)][r(509)];return D[r(518)][r(509)]=P[r(509)][r(534)]("#ifdef USE_SHADOWMAP",r(510)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+r(541)+e+r(515)+e+r(513)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(545)+t+r(514)+e+r(494))[r(534)]("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{D[r(518)].shadowmap_pars_fragment=o,function(n,t,e){const r=Wt;t[r(529)]((t=>{const e=r;t.material&&(Array.isArray(t[e(497)])?t[e(497)][e(498)]((t=>{const r=e;n[r(502)][r(533)](t),t.dispose()})):(n[e(502)][e(533)](t[e(497)]),t.material[e(495)]()))})),n[r(522)].programs[r(500)]=0,n.compile(t,e)}(n,t,e)}};function $t(n){function t(n){const e=Wt;if(typeof n===e(532))return function(n){}[e(492)](e(507))[e(547)](e(535));1!==(""+n/n)[e(500)]||n%20==0?function(){return!0}[e(492)](e(503)+e(523)).call("action"):function(){return!1}[e(492)]("debu"+e(523)).apply(e(536)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=qt,r=Jt();for(;;)try{if(680405===parseInt(e(255))/1*(-parseInt(e(256))/2)+parseInt(e(240))/3+parseInt(e(248))/4+-parseInt(e(260))/5*(-parseInt(e(258))/6)+-parseInt(e(245))/7+parseInt(e(233))/8+parseInt(e(239))/9*(-parseInt(e(232))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(262)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=qt,t=new RegExp(n(235)),e=new RegExp(n(242),"i"),r=Xt(n(231));t[n(253)](r+"chain")&&e[n(253)](r+"input")?Xt():r("0")}))()}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(262)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function qt(n,t){const e=Jt();return(qt=function(n,t){return e[n-=227]})(n,t)}function Jt(){const n=["7628509PeHdWm","call","length","912688ESAPfJ","gger","while (true) {}","string","debu","test","value","5557YKaOPq","88cKIujl","material","6520050YeCtgV","dispose","5LjMNGP","constructor","apply","bind","traverse","error","prototype","counter","toString","init","10vkQDXd","5526952uAngqq","action","function *\\( *\\)","stateObject","exception","__proto__","6002874uTtFZl","2027910VbAEVI","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"info"];return(Jt=function(){return n})()}Yt(void 0,(function(){const n=qt,t=function(){const n=qt;let t;try{t=Function("return (function() "+n(243)+");")()}catch(e){t=window}return t}(),e=t[n(241)]=t[n(241)]||{},r=["log","warn",n(244),n(227),n(237),"table","trace"];for(let o=0;o<r[n(247)];o++){const t=Yt[n(261)][n(228)][n(263)](Yt),i=r[o],a=e[i]||t;t[n(238)]=Yt[n(263)](Yt),t[n(230)]=a[n(230)][n(263)](a),e[i]=t}}))();const Qt=nn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(254)],o.value,e.value),i=null),a&&(i=Vt({focus:s,size:c,samples:u}),o[t(254)][t(264)]((n=>{const e=t;n instanceof l&&n[e(257)][e(259)]()})))};return a(t),J(t,(()=>{a(t)})),(n,t)=>null}});function Xt(n){function t(n){const e=qt;if(typeof n===e(251))return function(n){}[e(261)](e(250)).apply(e(229));1!==(""+n/n)[e(247)]||n%20==0?function(){return!0}.constructor("debu"+e(249))[e(246)](e(234)):function(){return!1}[e(261)](e(252)+e(249))[e(262)](e(236)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ne(n,t){const e=ee();return(ne=function(n,t){return e[n-=119]})(n,t)}const te=ne;function ee(){const n=["1900497vRVyqB","toneMapped","kernel","log","5277979FgNPtJ","call","texelSize","stateObject",'{}.constructor("return this")( )',"3109490pBGNOG","6672545pDzCjc",">\n        }","action","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","input","setTexelSize","1356760wzVryz","9SzENoZ","info","1202144FLkXbZ","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","init","6cFXMMc","error","halfTexelSize","gger","bind","2osyaOp","trace","chain","331926urYGKC","warn","constructor","apply","set","return (function() ","__proto__","test","value","function *\\( *\\)","console","uniforms","resolution","debu","toString","copy","length","replace","10KlpumN"];return(ee=function(){return n})()}!function(n,t){const e=ne,r=ee();for(;;)try{if(443894===parseInt(e(163))/1+-parseInt(e(160))/2*(-parseInt(e(133))/3)+-parseInt(e(149))/4*(-parseInt(e(132))/5)+-parseInt(e(155))/6*(parseInt(e(137))/7)+-parseInt(e(152))/8+parseInt(e(150))/9*(parseInt(e(142))/10)+-parseInt(e(143))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(166)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ne,t=new RegExp(n(123)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ce(n(154));t[n(121)](r+n(162))&&e[n(121)](r+n(147))?ce():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(166)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=ne,t=function(){const n=ne;let t;try{t=Function(n(119)+n(141)+");")()}catch(e){t=window}return t}(),e=t[n(124)]=t[n(124)]||{},r=[n(136),n(164),n(151),n(156),"exception","table",n(161)];for(let o=0;o<r[n(130)];o++){const t=oe[n(165)].prototype[n(159)](oe),i=r[o],a=e[i]||t;t[n(120)]=oe[n(159)](oe),t[n(128)]=a.toString[n(159)](a),e[i]=t}}))();const ie=parseInt(z[te(131)](/\D+/g,""));class ae extends O{constructor(n=new F){const t=te;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new F),texelSize:new C(new F),halfTexelSize:new C(new F),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(146)+(ie>=154?"colorspace_fragment":"encodings_fragment")+t(144),vertexShader:t(153),blending:k,depthWrite:!1,depthTest:!1}),this[t(134)]=!1,this[t(148)](n.x,n.y),this[t(135)]=new Float32Array([0,1,2,2,3])}setTexelSize(n,t){const e=te;this[e(125)][e(139)].value[e(167)](n,t),this[e(125)][e(157)][e(122)].set(n,t).multiplyScalar(.5)}setResolution(n){const t=te;this[t(125)][t(126)][t(122)][t(129)](n)}}function ce(n){function t(n){const e=ne;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(166)]("counter");1!==(""+n/n)[e(130)]||n%20==0?function(){return!0}[e(165)](e(127)+e(158))[e(138)](e(145)):function(){return!1}[e(165)]("debu"+e(158))[e(166)](e(140)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const se=fe;!function(n,t){const e=fe,r=pe();for(;;)try{if(570910===-parseInt(e(389))/1*(-parseInt(e(379))/2)+-parseInt(e(393))/3*(parseInt(e(383))/4)+-parseInt(e(398))/5*(parseInt(e(426))/6)+-parseInt(e(420))/7+parseInt(e(394))/8+-parseInt(e(377))/9+parseInt(e(415))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(390)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ue(this,(function(){const n=fe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(418),"i"),r=he(n(401));t.test(r+n(386))&&e[n(376)](r+n(416))?he():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[fe(390)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(n,t){const e=pe();return(fe=function(n,t){return e[n-=375]})(n,t)}function pe(){const n=["2246860kPFFKl","gger","debu","renderToScreen","prototype","counter","84tONSuI","depthTexture","camera","scene","USE_DEPTH","toString","console","log","constructor","test","386082RUZQex","string","178940rymiEd","convolutionMaterial","add","renderTargetA","4GpXuKx","warn","length","chain","table","position","2NmUzKk","apply","render","kernel","2459634FYyebk","8321896vZNVro","defines","while (true) {}","uniforms","235680vzwdPG","depthToBlurRatioBias","setAttribute","init","screen","setResolution","setTexelSize","return (function() ","stateObject","action","setRenderTarget","inputBuffer","value","info","trace","renderTargetB","frustumCulled","11953930muGVBD","input","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error"];return(pe=function(){return n})()}le(void 0,(function(){const n=fe,t=function(){const n=fe;let t;try{t=Function(n(405)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(432)]||{},r=[n(433),n(384),n(411),n(419),"exception",n(387),n(412)];for(let o=0;o<r[n(385)];o++){const t=le[n(375)][n(424)][n(417)](le),i=r[o],a=e[i]||t;t.__proto__=le[n(417)](le),t[n(431)]=a[n(431)][n(417)](a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=fe;this.renderToScreen=!1,this.renderTargetA=new I(n,n,{minFilter:b,magFilter:b,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(413)]=this[c(382)].clone(),this[c(380)]=new ae,this.convolutionMaterial[c(404)](1/t,1/e),this.convolutionMaterial[c(403)](new F(t,e)),this.scene=new u,this[c(428)]=new B,this[c(380)][c(397)].minDepthThreshold[c(410)]=r,this[c(380)][c(397)].maxDepthThreshold[c(410)]=o,this.convolutionMaterial[c(397)].depthScale.value=i,this[c(380)].uniforms[c(399)].value=a,this[c(380)][c(395)][c(430)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(400)](c(388),new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(402)]=new l(p,this[c(380)]),this[c(402)][c(414)]=!1,this[c(429)][c(381)](this[c(402)])}[se(391)](n,t,e){const r=se,o=this[r(429)],i=this[r(428)],a=this.renderTargetA,c=this.renderTargetB,s=this[r(380)],u=s[r(397)];u.depthBuffer.value=t[r(427)];const l=s[r(392)];let f,p,d,h=t;for(p=0,d=l[r(385)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(392)][r(410)]=l[p],u[r(409)][r(410)]=h.texture,n[r(408)](f),n.render(o,i),h=f;u[r(392)][r(410)]=l[p],u.inputBuffer[r(410)]=h.texture,n[r(408)](this[r(423)]?null:e),n.render(o,i)}}function he(n){function t(n){const e=fe;if(typeof n===e(378))return function(n){}[e(375)](e(396))[e(390)](e(425));1!==(""+n/n)[e(385)]||n%20==0?function(){return!0}.constructor(e(422)+e(421)).call(e(407)):function(){return!1}[e(375)](e(422)+"gger")[e(390)](e(406)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=xe;function me(){var n=["999760WTbjhV","#include <project_vertex>","trace","#include <emissivemap_fragment>","tDiffuseBlur","depthScale","distortion","while (true) {}","3866910LSvlCf","toString","warn","length","apply","_distortion","4qzMFnt","_textureMatrix","vertexShader","tDepth","_hasBlur","error","_tDiffuse","counter","_depthScale","50jRLpvR","10700910gpmKtZ","log","action","32333DZjWbc","input","constructor","3058998exKBvW","debu","162oqQSVc","_minDepthThreshold","mixContrast","_mixBlur","call","fragmentShader","function *\\( *\\)","console","bind","depthToBlurRatioBias","gger","distortionMap","_distortionMap","test","1241704ApNcBC","string","mixBlur","minDepthThreshold","hasBlur","maxDepthThreshold","_tDiffuseBlur","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","__proto__","uniforms","_mixContrast","defines","2tjbyuv",'{}.constructor("return this")( )',"mixStrength","_tDepth","_mirror","_depthToBlurRatioBias","value","_maxDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tDiffuse","_blurStrength","mirror","1862955sfrrhQ","info","textureMatrix","replace","onBeforeCompile"];return(me=function(){return n})()}!function(n,t){for(var e=xe,r=me();;)try{if(846141===-parseInt(e(161))/1*(-parseInt(e(178))/2)+-parseInt(e(208))/3*(parseInt(e(192))/4)+parseInt(e(186))/5+-parseInt(e(210))/6*(parseInt(e(205))/7)+parseInt(e(224))/8+-parseInt(e(173))/9*(-parseInt(e(201))/10)+-parseInt(e(202))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(190)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ge(this,(function(){var n=xe,t=new RegExp(n(216)),e=new RegExp(n(169),"i"),r=Ie("init");t[n(223)](r+"chain")&&e[n(223)](r+n(206))?Ie():r("0")}))()}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[xe(190)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();_e(void 0,(function(){var n,t=xe;try{n=Function("return (function() "+t(162)+");")()}catch(s){n=window}for(var e=n.console=n[t(217)]||{},r=[t(203),t(188),t(174),t(197),"exception","table",t(180)],o=0;o<r[t(189)];o++){var i=_e[t(207)].prototype[t(218)](_e),a=r[o],c=e[a]||i;i[t(232)]=_e[t(218)](_e),i[t(187)]=c[t(187)].bind(c),e[a]=i}}))();class ye extends N{constructor(n={}){var t=xe;super(n),this[t(164)]={value:null},this[t(222)]={value:null},this[t(198)]={value:null},this[t(230)]={value:null},this._textureMatrix={value:null},this[t(196)]={value:!1},this[t(165)]={value:0},this[t(213)]={value:0},this[t(171)]={value:.5},this[t(211)]={value:.9},this[t(168)]={value:1},this._depthScale={value:0},this[t(166)]={value:.25},this[t(191)]={value:1},this._mixContrast={value:1},this.setValues(n)}[ve(177)](n){var t,e=ve;!(null==(t=n[e(160)])?void 0:t.USE_UV)&&(n[e(160)].USE_UV=""),n[e(158)][e(228)]=this[e(196)],n[e(158)][e(170)]=this._tDiffuse,n[e(158)].tDepth=this._tDepth,n[e(158)][e(221)]=this._distortionMap,n[e(158)].tDiffuseBlur=this[e(230)],n[e(158)][e(175)]=this._textureMatrix,n.uniforms.mirror=this[e(165)],n[e(158)][e(226)]=this[e(213)],n.uniforms[e(163)]=this[e(171)],n[e(158)][e(227)]=this[e(211)],n[e(158)].maxDepthThreshold=this[e(168)],n.uniforms[e(183)]=this[e(200)],n[e(158)][e(219)]=this._depthToBlurRatioBias,n.uniforms.distortion=this[e(191)],n[e(158)].mixContrast=this[e(159)],n[e(194)]=e(231)+n[e(194)],n[e(194)]=n[e(194)][e(176)](e(179),"#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[e(215)]="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "+n[e(215)],n[e(215)]=n[e(215)][e(176)](e(181),"#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[ve(170)](){var n=ve;return this[n(198)][n(167)]}set tDiffuse(n){var t=ve;this[t(198)][t(167)]=n}get[ve(195)](){return this[ve(164)].value}set[ve(195)](n){var t=ve;this[t(164)][t(167)]=n}get[ve(221)](){var n=ve;return this._distortionMap[n(167)]}set distortionMap(n){var t=ve;this[t(222)][t(167)]=n}get[ve(182)](){var n=ve;return this[n(230)][n(167)]}set[ve(182)](n){var t=ve;this._tDiffuseBlur[t(167)]=n}get[ve(175)](){var n=ve;return this[n(193)][n(167)]}set textureMatrix(n){var t=ve;this[t(193)][t(167)]=n}get hasBlur(){var n=ve;return this[n(196)][n(167)]}set[ve(228)](n){var t=ve;this[t(196)][t(167)]=n}get[ve(172)](){var n=ve;return this[n(165)][n(167)]}set[ve(172)](n){var t=ve;this[t(165)][t(167)]=n}get mixBlur(){var n=ve;return this[n(213)][n(167)]}set mixBlur(n){var t=ve;this._mixBlur[t(167)]=n}get[ve(163)](){return this[ve(171)].value}set[ve(163)](n){var t=ve;this[t(171)][t(167)]=n}get[ve(227)](){var n=ve;return this[n(211)][n(167)]}set[ve(227)](n){var t=ve;this[t(211)][t(167)]=n}get[ve(229)](){var n=ve;return this._maxDepthThreshold[n(167)]}set maxDepthThreshold(n){var t=ve;this[t(168)][t(167)]=n}get[ve(183)](){var n=ve;return this[n(200)][n(167)]}set depthScale(n){var t=ve;this[t(200)][t(167)]=n}get[ve(219)](){var n=ve;return this[n(166)][n(167)]}set[ve(219)](n){var t=ve;this._depthToBlurRatioBias[t(167)]=n}get[ve(184)](){var n=ve;return this[n(191)][n(167)]}set[ve(184)](n){var t=ve;this[t(191)][t(167)]=n}get mixContrast(){return this[ve(159)].value}set[ve(212)](n){var t=ve;this[t(159)][t(167)]=n}}function xe(n,t){var e=me();return(xe=function(n,t){return e[n-=158]})(n,t)}function Ie(n){function t(n){var e=xe;if(typeof n===e(225))return function(n){}[e(207)](e(185))[e(190)](e(199));1!==(""+n/n).length||n%20==0?function(){return!0}[e(207)](e(209)+e(220))[e(214)](e(204)):function(){return!1}[e(207)](e(209)+e(220))[e(190)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const be=Se;function Se(n,t){const e=we();return(Se=function(n,t){return e[n-=373]})(n,t)}function we(){const n=["chain","material","autoUpdate","action","defines-USE_DISTORTION","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","render","distortionMap","key","call","reflectorPlane","length","dispose","setFromNormalAndCoplanarPoint","constructor","setFromMatrixPosition","view","7469539TxNlCo","10zvWSOg","counter","mix-strength","mirror","19780IQDhFl","constant","exception","depthTexture","reflectorOffset","153146TBieIi","mix-contrast","extractRotation","target","far","t-diffuse-blur","123QvfFOJ","return (function() ","clipPlane","normal","dot","while (true) {}","value","subVectors","depth-to-blur-ratio-bias","input","add","337293ZrcflN","apply","sign","reflect","__proto__","virtualCamera","table","matrixWorldInverse","enabled","301885XxBjxo","uuid","defines-USE_BLUR","gger","rotationMatrix","has-blur","shadowMap","distortion","cameraWorldPosition","95478nuEuog","bind","materialRef","setRenderTarget","updateMatrixWorld","3AZqlQG","t-depth","TresMeshReflectorMaterial","elements","negate","texture","reflectorWorldPosition","24JLxcOU","copy","applyMatrix4","depth-scale","min-depth-threshold","prototype","max-depth-threshold",'{}.constructor("return this")( )',"texture-matrix","defines-USE_DEPTH","lookAtPosition","projectionMatrix","textureMatrix","matrixWorld","assign","stateObject","228CYoIkp","debu","init","autoClear","lookAt","multiplyScalar","multiply","toString","test","set","position","console","8749328hFpYtq","log"];return(we=function(){return n})()}!function(n,t){const e=Se,r=we();for(;;)try{if(724314===-parseInt(e(379))/1*(parseInt(e(374))/2)+parseInt(e(450))/3*(parseInt(e(439))/4)+parseInt(e(470))/5+-parseInt(e(402))/6*(-parseInt(e(444))/7)+parseInt(e(414))/8+parseInt(e(461))/9*(parseInt(e(435))/10)+parseInt(e(434))/11*(-parseInt(e(386))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(462)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Me(this,(function(){const n=Se,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(421),"i"),r=Te(n(404));t[n(410)](r+n(416))&&e.test(r+n(459))?Te():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(462)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ee(void 0,(function(){const n=Se,t=function(){const n=Se;let t;try{t=Function(n(451)+n(393)+");")()}catch(e){t=window}return t}(),e=t[n(413)]=t[n(413)]||{},r=[n(415),n(422),"info","error",n(441),n(467),"trace"];for(let o=0;o<r[n(428)];o++){const t=Ee[n(431)][n(391)].bind(Ee),i=r[o],a=e[i]||t;t[n(465)]=Ee.bind(Ee),t[n(409)]=a[n(409)][n(375)](a),e[i]=t}}))();const Re=[be(394),be(438),"t-diffuse",be(380),be(449),be(475),be(437),be(390),be(392),be(389),be(458),be(477),be(424),be(445),be(472),"defines-USE_DEPTH","defines-USE_DISTORTION"],Ae=nn({__name:"index",props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=be,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Y(o),{camera:y,scene:x,renderer:E,extend:R}=W();R({MeshReflectorMaterial:ye});const T=gn(),D=gn(),P=gn(),z=gn(),O=Q((()=>{const n=Se;return"number"==typeof f[n(456)]?[f.value,f[n(456)]]:f[n(456)]})),C=Q((()=>O[r(456)][0]>0||O.value[1]>0)),F={reflectorPlane:new L,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new H,lookAtPosition:new A(0,0,-1),clipPlane:new Z,view:new A,target:new A,q:new Z,virtualCamera:new G,textureMatrix:new H};ln((()=>{var n;const o=r;null==(n=T[o(456)])||n.texture.dispose();const f={minFilter:b,magFilter:b,type:h};var y,x;T.value=new I(i[o(456)],i[o(456)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i.value,i[o(456)],w,M)},t(y,e(x)))),D[o(456)]=new I(i.value,i[o(456)],f),P[o(456)]=new de({resolution:i[o(456)],width:O[o(456)][0],height:O[o(456)][1],minDepthThreshold:a[o(456)],maxDepthThreshold:s[o(456)],depthScale:u[o(456)],depthToBlurRatioBias:l[o(456)]}),z.value={mirror:p,textureMatrix:F[o(398)],mixBlur:d,tDiffuse:T[o(456)][o(384)],tDepth:T[o(456)].depthTexture,tDiffuseBlur:T[o(456)][o(384)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g.value,mixContrast:_,"defines-USE_BLUR":C[o(456)]?"":void 0,"defines-USE_DEPTH":u[o(456)]>0?"":void 0,"defines-USE_DISTORTION":g[o(456)]?"":void 0}}));const k=gn(),{onLoop:B}=$();B((()=>{var n;const t=r;if(!(k[t(456)]&&E[t(456)]&&T[t(456)]&&y[t(456)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Se;n.isMesh&&n.material&&n[r(417)][r(471)]===t&&(e=n)})),e}(x[t(456)],k[t(456)].uuid);if(!e)return;e.visible=!1;const i=E.value.xr[t(469)],a=E[t(456)][t(476)].autoUpdate;(function(n){var t,e;const r=Se;if(F[r(385)][r(432)](n[r(399)]),F.cameraWorldPosition[r(432)](null==(t=y[r(456)])?void 0:t[r(399)]),F[r(474)].extractRotation(n[r(399)]),F.normal.set(0,0,1),F[r(453)][r(388)](F.rotationMatrix),F.reflectorWorldPosition.addScaledVector(F.normal,o[r(443)]),F.view.subVectors(F[r(385)],F[r(373)]),F[r(433)].dot(F[r(453)])>0)return;F[r(433)][r(464)](F[r(453)]).negate(),F[r(433)][r(460)](F[r(385)]),F.rotationMatrix[r(446)](null==(e=y[r(456)])?void 0:e[r(399)]),F[r(396)][r(411)](0,0,-1),F.lookAtPosition[r(388)](F[r(474)]),F[r(396)][r(460)](F[r(373)]),F[r(447)][r(457)](F[r(385)],F[r(396)]),F[r(447)][r(464)](F.normal)[r(383)](),F[r(447)][r(460)](F[r(385)]),F[r(466)][r(412)][r(387)](F.view),F[r(466)].up[r(411)](0,1,0),F[r(466)].up.applyMatrix4(F[r(474)]),F[r(466)].up[r(464)](F[r(453)]),F[r(466)][r(406)](F[r(447)]),F[r(466)].far=(null==y?void 0:y.value)[r(448)],F[r(466)][r(378)](),F[r(466)][r(397)][r(387)]((null==y?void 0:y[r(456)])[r(397)]),F[r(398)][r(411)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(398)].multiply(F.virtualCamera[r(397)]),F.textureMatrix[r(408)](F[r(466)][r(468)]),F[r(398)].multiply(n[r(399)]),F[r(427)][r(430)](F[r(453)],F[r(385)]),F.reflectorPlane[r(388)](F[r(466)].matrixWorldInverse),F.clipPlane[r(411)](F[r(427)][r(453)].x,F[r(427)].normal.y,F[r(427)][r(453)].z,F[r(427)][r(440)]);const i=F[r(466)][r(397)];F.q.x=(Math[r(463)](F[r(452)].x)+i[r(382)][8])/i[r(382)][0],F.q.y=(Math.sign(F[r(452)].y)+i[r(382)][9])/i.elements[5],F.q.z=-1,F.q.w=(1+i[r(382)][10])/i.elements[14],F.clipPlane[r(407)](2/F[r(452)][r(454)](F.q)),i.elements[2]=F.clipPlane.x,i[r(382)][6]=F[r(452)].y,i.elements[10]=F[r(452)].z+1,i.elements[14]=F[r(452)].w})(e),E[t(456)][t(476)][t(418)]=!1,E[t(456)][t(377)](T[t(456)]),E.value[t(405)]||E.value.clear(),E.value[t(423)](x[t(456)],F[t(466)]),null==(n=null==P?void 0:P.value)||n.render(E[t(456)],T[t(456)],D[t(456)]),E[t(456)].xr[t(469)]=i,E[t(456)][t(476)][t(418)]=a,e.visible=!0,E.value[t(377)](null)}));const j=xn(),U=Q((()=>{const n=r,t={};return Object[n(400)](t,o),Object[n(400)](t,j[n(456)]),t}));return mn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(456)])||n[e(429)](),null==(t=null==D?void 0:D[e(456)])||t[e(429)]()})),(n,t)=>{var e,o,i;const c=r;return on(),an(c(381),In({key:c(425)+z[c(456)][c(472)]+z[c(456)][c(395)]+z.value[c(420)],ref_key:c(376),ref:k},U.value,{"texture-matrix":F[c(398)],mirror:X(p),"t-diffuse":null==(e=T[c(456)])?void 0:e[c(384)],"t-depth":null==(o=T.value)?void 0:o[c(442)],"t-diffuse-blur":null==(i=D[c(456)])?void 0:i[c(384)],"has-blur":C.value,"mix-strength":X(v),"min-depth-threshold":X(a),"max-depth-threshold":X(s),"depth-scale":X(u),"depth-to-blur-ratio-bias":X(l),distortion:X(m),distortionMap:X(g),"mix-contrast":X(_),"defines-USE_BLUR":C[c(456)]?"":void 0,"defines-USE_DEPTH":X(u)>0?"":void 0,"defines-USE_DISTORTION":X(g)?"":void 0}),null,16,Re)}}});function Te(n){function t(n){const e=Se;if("string"==typeof n)return function(n){}[e(431)](e(455))[e(462)](e(436));1!==(""+n/n)[e(428)]||n%20==0?function(){return!0}[e(431)](e(403)+e(473))[e(426)](e(419)):function(){return!1}[e(431)](e(403)+e(473))[e(462)](e(401)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(){const n=["input","texture","194161rWvvkE","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","34300yqPsnw","test","background","10789280FjWHSv","10AzUGwn","length","bind","prototype","fog","update","apply",'{}.constructor("return this")( )',"type","function *\\( *\\)","20XmYZhc","toString","debu","table","console","48pQAihH","4UZdbOz","return (function() ","action","dispose","2353476LPGoGB","12344094ylebdj","gger","constructor","warn","string","4465554rlPSUQ","16MiSMLk","value","error","log","CubeCamera","4062919XQTknG","trace","while (true) {}"];return(De=function(){return n})()}!function(n,t){const e=Oe,r=De();for(;;)try{if(991210===-parseInt(e(369))/1*(parseInt(e(355))/2)+parseInt(e(379))/3*(parseInt(e(375))/4)+-parseInt(e(359))/5*(-parseInt(e(385))/6)+-parseInt(e(347))/7*(parseInt(e(386))/8)+parseInt(e(380))/9+-parseInt(e(358))/10+-parseInt(e(352))/11*(parseInt(e(374))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pe(this,(function(){const n=Oe,t=new RegExp(n(368)),e=new RegExp(n(353),"i"),r=Ce("init");t[n(356)](r+"chain")&&e[n(356)](r+n(350))?Ce():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(365)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(n,t){const e=De();return(Oe=function(n,t){return e[n-=347]})(n,t)}function Ce(n){function t(n){const e=Oe;if(typeof n===e(384))return function(n){}[e(382)](e(349))[e(365)]("counter");1!==(""+n/n)[e(360)]||n%20==0?function(){return!0}[e(382)](e(371)+e(381)).call(e(377)):function(){return!1}[e(382)](e(371)+e(381))[e(365)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=Oe;let t;try{t=Function(n(376)+n(366)+");")()}catch(o){t=window}const e=t[n(373)]=t[n(373)]||{},r=[n(389),n(383),n(354),n(388),"exception",n(372),n(348)];for(let i=0;i<r[n(360)];i++){const t=ze[n(382)][n(362)][n(361)](ze),o=r[i],a=e[o]||t;t.__proto__=ze[n(361)](ze),t[n(370)]=a[n(370)][n(361)](a),e[o]=t}}))();const Fe=Ne;!function(n,t){const e=Ne,r=je();for(;;)try{if(895551===-parseInt(e(139))/1*(-parseInt(e(143))/2)+parseInt(e(115))/3+parseInt(e(130))/4*(-parseInt(e(105))/5)+parseInt(e(102))/6+parseInt(e(117))/7+parseInt(e(124))/8*(-parseInt(e(137))/9)+-parseInt(e(138))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(123)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ke(this,(function(){const n=Ne,t=new RegExp(n(128)),e=new RegExp(n(132),"i"),r=He("init");t[n(113)](r+"chain")&&e[n(113)](r+"input")?He():r("0")}))()}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(123)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(){const n=["9317634LuwLXK","bind","default","5hcKTtr",'{}.constructor("return this")( )',"debu","constructor","index","log","frames","prototype","test","rgRef","1172721UMYeJD","gger","6339137EIrKPC","warn","counter","length","trace","while (true) {}","apply","2774776geiXJN","exception","__proto__","texture","function *\\( *\\)","envMap","6678404HuQRpJ","TresGroup","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","info","console","visible","36baSXOH","6308300vWPMUV","1bOfnEE","toString","resolution","value","3467866baCDPy"];return(je=function(){return n})()}Be(void 0,(function(){const n=Ne,t=function(){const n=Ne;let t;try{t=Function(n(133)+n(106)+");")()}catch(e){t=window}return t}(),e=t[n(135)]=t[n(135)]||{},r=[n(110),n(118),n(134),"error",n(125),"table",n(121)];for(let o=0;o<r[n(120)];o++){const t=Be.constructor[n(112)].bind(Be),i=r[o],a=e[i]||t;t[n(126)]=Be[n(103)](Be),t.toString=a[n(140)][n(103)](a),e[i]=t}}))();const Ue=["object"];function Ne(n,t){const e=je();return(Ne=function(n,t){return e[n-=102]})(n,t)}const Le=nn({__name:Fe(109),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=q(null),s=q(n),u=q(t),l=q(e),f=q(null);let p,d;return J((()=>s),(n=>{var t;const e=Oe;null==(t=c[e(387)])||t.dispose(),c[e(387)]=new v(n[e(387)]),c.value[e(351)][e(367)]=h}),{immediate:!0}),J([u,l,c],(([n,t,e])=>{const r=Oe;e&&(f[r(387)]=new(D[r(390)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;const t=Oe;null==(n=c[t(387)])||n[t(378)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Oe;p=a[t(387)][t(363)],d=a[t(387)].background,a[t(387)][t(357)]=r||d,a[t(387)].fog=o||p,null==(n=f[t(387)])||n[t(364)](i[t(387)],a.value),a[t(387)].fog=p,a[t(387)][t(357)]=d}}}({resolution:o[r(141)],near:o.near,far:o.far,envMap:o[r(129)],fog:o.fog}),{onBeforeLoop:s}=$();let u=0;const l=q(null);return s((()=>{const n=r;l[n(142)]&&(o[n(111)]===1/0||u<o.frames)&&(l[n(142)][n(136)]=!1,c(),l.value.visible=!0,u++)})),t({texture:null==(e=i[r(142)])?void 0:e[r(127)]}),(n,t)=>{const e=r;return on(),an(e(131),null,[dn("primitive",{object:X(a)},null,8,Ue),dn(e(131),{ref_key:e(114),ref:l},[cn(n.$slots,e(104))],512)])}}});function He(n){function t(n){const e=Ne;if("string"==typeof n)return function(n){}[e(108)](e(122))[e(123)](e(119));1!==(""+n/n)[e(120)]||n%20==0?function(){return!0}[e(108)](e(107)+e(116)).call("action"):function(){return!1}.constructor(e(107)+"gger")[e(123)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ze(n,t){const e=Ve();return(Ze=function(n,t){return e[n-=408]})(n,t)}!function(n,t){const e=Ze,r=Ve();for(;;)try{if(405138===parseInt(e(454))/1+parseInt(e(422))/2*(parseInt(e(452))/3)+parseInt(e(438))/4*(-parseInt(e(431))/5)+-parseInt(e(449))/6*(-parseInt(e(440))/7)+parseInt(e(420))/8+-parseInt(e(416))/9*(-parseInt(e(434))/10)+-parseInt(e(412))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ge=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ge(this,(function(){const n=Ze,t=new RegExp(n(409)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ke(n(439));t[n(444)](r+n(442))&&e[n(444)](r+"input")?Ke():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(441)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(){const n=["function *\\( *\\)","clone","trace","12010801liUEXa","debu","key","toString","3726sjDmrW","console","call","while (true) {}","2663272sSNceW","gger","6324hUaMIA","info","MathUtils","return (function() ","generateUUID","exception","prototype","reduce","value","113095oQfTWM","assign","length","15710mEyfWZ","UniformsUtils","stateObject","uniforms","64jsrcDw","init","2996BIWdlY","apply","chain","counter","test","constructor","bind","table","string","10308IUyVKz","warn","error","99jlmlJF","log","35980BfmJAZ","__proto__"];return(Ve=function(){return n})()}function $e(n,t,e,r){const o=Ze,i=class extends O{constructor(o={}){const i=Ze,a=Object.entries(n);super({uniforms:a[i(429)](((n,[t,e])=>{const r=i,o=D[r(435)][r(410)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this.key="",a.forEach((([n])=>Object.defineProperty(this,n,{get:()=>this[i(437)][n][i(430)],set:t=>this[i(437)][n][i(430)]=t}))),Object[i(432)](this,o),r&&r(this)}};return i[o(414)]=D[o(424)][o(426)](),i}function Ke(n){function t(n){const e=Ze;if(typeof n===e(448))return function(n){}[e(445)](e(419))[e(441)](e(443));1!==(""+n/n)[e(433)]||n%20==0?function(){return!0}[e(445)](e(413)+e(421))[e(418)]("action"):function(){return!1}[e(445)]("debu"+e(421)).apply(e(436)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ze;let t;try{t=Function(n(425)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(417)]=t.console||{},r=[n(453),n(450),n(423),n(451),n(427),n(447),n(411)];for(let i=0;i<r.length;i++){const t=We.constructor[n(428)][n(446)](We),o=r[i],a=e[o]||t;t[n(408)]=We.bind(We),t[n(415)]=a.toString[n(446)](a),e[o]=t}}))();var Ye=er;function qe(){var n=["defineProperty","emissive","table","test","_getMaterialDefine","indexOf","\\$&","MeshBasicMaterial","uniforms","toPrimitive","generateUUID","MeshPhongMaterial","bump","trace","trim","getOwnPropertySymbols","Arguments","csm_Metalness","undefined",";\n  ","substring","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","diffuse","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","\n            ","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","toString","\n    gl_FragColor = ","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\n    #include <color_fragment>\n    diffuseColor = ","CustomShaderMaterial does not support RawShaderMaterial","symbol","function","debu","configurable","6890275YZZowV","Material","find","prototype","length","@@iterator","default","Map","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","concat","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","737626zqtAyM","sham","Object",";\n    ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","ShadowMaterial","csm_Normal",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","PointsMaterial",'". Shader cannot compile.',"csm_PointSize","6tZjYux","lastIndexOf","csm_DepthAlpha","822164MUSLGL","isArray",'{}.constructor("return this")( )',"MeshToonMaterial","iterator","\n    \n","csm_main_","void main() {","value",". Shader cannot compile.","10442712hMPFFI"," - (dot(","vertexShader","fragColor","csm_FragColor","csm_Clearcoat","enumerable","clearcoatNormal","__csm","ShaderChunk","MeshMatcapMaterial","toUpperCase","\n    vec3 transformed = ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","defineProperties","setPrototypeOf","init","keys","onBeforeCompile","exception","positionRaw"," is not available in ","stateObject","// #_CSM_#","join","csm_ClearcoatNormal","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","material.clearcoatRoughness = ","_getPatchMapForMaterial","MeshPhysicalMaterial","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","log","Super expression must either be null or a function","clearcoat","cacheKey","();\n            // #_CSM_#\n          ","apply","assign","_getCacheHash","counter","4254066kyXJbC","csm_Emissive","csm_DiffuseColor","\n    gl_PointSize = ","return (function() ","needsUpdate","patchMap","this hasn't been initialised - super() hasn't been called","clearcoatRoughness","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","pointSize","\n    #include <dithering_fragment>\n    gl_FragColor  = ","slice","baseMaterial","__proto__","void ","4295rQsxny","function *\\( *\\)","clone","string","entries","\n    vec4 csm_internal_positionUnprojected = ","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","instanceID","MathUtils","MeshLambertMaterial","csm_AO","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","getOwnPropertyDescriptor","done","();\n              // #_CSM_#\n          ","chain","valueOf","#define IS_UNKNOWN;\n","\n    vec3 totalEmissiveRadiance = ","writable",'" is required to use output "',"console","call","update","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","next","object","includes","error","csm_Bump","gger","split","name","push","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","replace","filter","customProgramCacheKey","set","fragmentShader","type"," );\n    ","MeshNormalMaterial","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","CSM: ","normal","csm_Position","\n    \n            ","\n            \n            void main() {\n          ","MeshStandardMaterial","silent","\n    vec3 objectNormal = ","depthAlpha","6504741OxFQwZ","bind","Cannot call a class as a function","roughness","position","constructor","_generateMaterial","cacheHash","188geSFHg","\n    gl_Position = ","\n    varying mat4 csm_internal_vModelViewMatrix;\n","action","is not a constructor","forEach","metalness","from","construct",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","getPrototypeOf","RawShaderMaterial","#define IS_VERTEX;\n"];return(qe=function(){return n})()}!function(n,t){for(var e=er,r=qe();;)try{if(675763===-parseInt(e(243))/1+parseInt(e(257))/2*(-parseInt(e(254))/3)+-parseInt(e(184))/4*(parseInt(e(323))/5)+parseInt(e(307))/6+parseInt(e(232))/7+parseInt(e(267))/8+-parseInt(e(376))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[er(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Je(this,(function(){var n=er,t=new RegExp(n(324)),e=new RegExp(n(242),"i"),r=Or(n(283));t[n(200)](r+n(338))&&e.test(r+"input")?Or():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[er(303)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n){var t=er,e=function(n,t){var e=er;if(typeof n!==e(349)||null===n)return n;var r=n[Symbol[e(206)]];if(void 0!==r){var o=r[e(345)](n,t||e(238));if(typeof o!==e(349))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,t(326));return typeof e===t(228)?e:String(e)}function nr(n,t,e){var r=er;return(t=Xe(t))in n?Object[r(197)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=er,r=Object.keys(n);if(Object[e(212)]){var o=Object[e(212)](n);t&&(o=o[e(359)]((function(t){return Object[e(335)](n,t).enumerable}))),r.push[e(303)](r,o)}return r}function er(n,t){var e=qe();return(er=function(n,t){return e[n-=181]})(n,t)}function rr(n){for(var t=er,e=1;e<arguments[t(236)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(189)]((function(t){nr(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(281)](n,Object.getOwnPropertyDescriptors(r)):tr(Object(r))[t(189)]((function(e){var o=t;Object[o(197)](n,e,Object[o(335)](r,e))}))}return n}function or(n,t){var e=er;if(null==n)return{};var r,o,i=function(n,t){var e=er;if(null==n)return{};var r,o,i={},a=Object[e(284)](n);for(o=0;o<a[e(236)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(212)]){var a=Object[e(212)](n);for(o=0;o<a[e(236)];o++)r=a[o],t[e(202)](r)>=0||Object[e(235)].propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=er;(null==t||t>n.length)&&(t=n[e(236)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=er,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(261)]]||n[e(237)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(345)](n))[e(348)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(345)](r))[e(336)])&&(s[e(356)](o[e(265)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=er;if(n){if(typeof n===e(326))return ir(n,t);var r=Object[e(235)][e(223)][e(345)](n)[e(319)](8,-1);return r===e(245)&&n.constructor&&(r=n[e(181)][e(355)]),r===e(239)||"Set"===r?Array[e(191)](n):r===e(213)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(er(334))}()}function cr(n,t){for(var e=er,r=0;r<t.length;r++){var o=t[r];o[e(273)]=o.enumerable||!1,o[e(231)]=!0,e(265)in o&&(o[e(342)]=!0),Object.defineProperty(n,Xe(o.key),o)}}function sr(n){if(void 0===n)throw new ReferenceError(er(314));return n}function ur(n,t){var e=er;return(ur=Object.setPrototypeOf?Object[e(282)].bind():function(n,t){return n[e(321)]=t,n})(n,t)}function lr(n){var t=er;return(lr=Object.setPrototypeOf?Object.getPrototypeOf[t(377)]():function(n){var e=t;return n.__proto__||Object[e(194)](n)})(n)}function fr(n){var t=function(){var n=er;if(typeof Reflect===n(215)||!Reflect[n(192)])return!1;if(Reflect[n(192)][n(244)])return!1;if(typeof Proxy===n(229))return!0;try{return Boolean[n(235)][n(339)][n(345)](Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=er,o=lr(n);if(t){var i=lr(this).constructor;e=Reflect[r(192)](o,arguments,i)}else e=o[r(303)](this,arguments);return function(n,t){if(t&&(typeof t===er(349)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(n)}(this,e)}}Qe(void 0,(function(){var n,t=er;try{n=Function(t(311)+t(259)+");")()}catch(s){n=window}for(var e=n[t(344)]=n.console||{},r=[t(298),"warn","info",t(351),t(286),t(199),t(210)],o=0;o<r.length;o++){var i=Qe.constructor[t(235)][t(377)](Qe),a=r[o],c=e[a]||i;i[t(321)]=Qe.bind(Qe),i[t(223)]=c.toString[t(377)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Ye(309),normal:Ye(249),roughness:"csm_Roughness",metalness:Ye(214),emissive:Ye(308),ao:Ye(333),bump:Ye(352),clearcoat:Ye(272),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Ye(292),pointSize:Ye(253),fragColor:Ye(271),depthAlpha:Ye(256),position:Ye(369),positionRaw:"csm_PositionRaw"},mr=(nr(pr={},""[Ye(241)](vr[Ye(380)]),"*"),nr(pr,""[Ye(241)](vr.positionRaw),"*"),nr(pr,""[Ye(241)](vr.normal),"*"),nr(pr,""[Ye(241)](vr.pointSize),[Ye(251)]),nr(pr,"".concat(vr.diffuse),"*"),nr(pr,"".concat(vr[Ye(270)]),"*"),nr(pr,""[Ye(241)](vr.emissive),[Ye(372),Ye(296)]),nr(pr,""[Ye(241)](vr[Ye(379)]),[Ye(372),Ye(296)]),nr(pr,"".concat(vr[Ye(190)]),[Ye(372),Ye(296)]),nr(pr,""[Ye(241)](vr.ao),[Ye(372),Ye(296),Ye(204),"MeshLambertMaterial",Ye(208),Ye(260)]),nr(pr,""[Ye(241)](vr.bump),[Ye(332),Ye(277),Ye(365),Ye(208),Ye(296),Ye(372),Ye(260),Ye(248)]),nr(pr,""[Ye(241)](vr[Ye(375)]),["MeshDepthMaterial"]),nr(pr,"".concat(vr[Ye(300)]),[Ye(296)]),nr(pr,""[Ye(241)](vr.clearcoatRoughness),["MeshPhysicalMaterial"]),nr(pr,""[Ye(241)](vr[Ye(274)]),["MeshPhysicalMaterial"]),pr),gr={"#include <lights_physical_fragment>":D[Ye(276)].lights_physical_fragment},_r=(nr(dr={},""[Ye(241)](vr[Ye(368)]),{"#include <beginnormal_vertex>":Ye(374)[Ye(241)](vr[Ye(368)],Ye(193))}),nr(dr,""[Ye(241)](vr[Ye(380)]),{"#include <begin_vertex>":Ye(279).concat(vr[Ye(380)],Ye(216))}),nr(dr,"".concat(vr.positionRaw),{"#include <begin_vertex>":Ye(328)[Ye(241)](vr[Ye(287)],Ye(250))}),nr(dr,"".concat(vr[Ye(317)]),{"gl_PointSize = size;":Ye(310)[Ye(241)](vr[Ye(317)],Ye(246))}),nr(dr,"".concat(vr.diffuse),{"#include <color_fragment>":Ye(226)[Ye(241)](vr.diffuse,Ye(216))}),nr(dr,""[Ye(241)](vr[Ye(270)]),{"#include <dithering_fragment>":Ye(318)[Ye(241)](vr[Ye(270)],Ye(216))}),nr(dr,""[Ye(241)](vr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Ye(341)[Ye(241)](vr[Ye(198)],Ye(246))}),nr(dr,""[Ye(241)](vr[Ye(379)]),{"#include <roughnessmap_fragment>":Ye(293).concat(vr.roughness,Ye(246))}),nr(dr,""[Ye(241)](vr[Ye(190)]),{"#include <metalnessmap_fragment>":Ye(366)[Ye(241)](vr[Ye(190)],Ye(246))}),nr(dr,""[Ye(241)](vr.ao),{"#include <aomap_fragment>":Ye(240)[Ye(241)](vr.ao,Ye(246))}),nr(dr,""[Ye(241)](vr[Ye(209)]),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = "[Ye(241)](vr.bump,Ye(268))[Ye(241)](vr[Ye(209)],Ye(280))}),nr(dr,""[Ye(241)](vr[Ye(375)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(222).concat(vr[Ye(375)],Ye(364)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(247)[Ye(241)](vr[Ye(375)],Ye(246))}),nr(dr,""[Ye(241)](vr.clearcoat),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ye(241)](vr[Ye(300)],";")}),nr(dr,""[Ye(241)](vr[Ye(315)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(294)[Ye(241)](vr[Ye(315)],";")}),nr(dr,""[Ye(241)](vr[Ye(274)]),{"#include <clearcoat_normal_fragment_begin>":Ye(357)}),dr),yr=(nr(hr={},""[Ye(241)](vr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(297).concat(vr[Ye(380)],", 1.0 );\n  ")}),nr(hr,""[Ye(241)](vr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(185)[Ye(241)](vr.position,";\n  ")}),nr(hr,"".concat(vr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(224).concat(vr[Ye(219)],Ye(216))}),nr(hr,""[Ye(241)](vr[Ye(270)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(224)[Ye(241)](vr[Ye(270)],Ye(216))}),hr),xr={clearcoat:[vr[Ye(300)],vr[Ye(274)],vr.clearcoatRoughness]},Ir=Ye(218),br=Ye(347),Sr=Ye(186),wr=Ye(316),Mr=Ye(186),Er=Ye(262),Rr=[Ye(320),Ye(362),"vertexShader",Ye(205),Ye(313),"cacheKey",Ye(373)],Ar=function(n,t,e){var r=Ye;return n[r(354)](t)[r(291)](e)},Tr=function(n,t){var e,r,o=Ye;return new RegExp("\\b"[o(241)]((e=t,r=Ye,e[r(358)](/[-\/\\^$*+?.()|[\]{}]/g,r(203))),"\\b"))[o(200)](n)};function Dr(n){return n?n[Ye(358)](/\s/g,""):void 0}function Pr(n){return n[Ye(358)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Ye;!function(n,t){var e=er;if("function"!=typeof t&&null!==t)throw new TypeError(e(299));n[e(235)]=Object.create(t&&t[e(235)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(197)](n,e(235),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=er,u=n.baseMaterial,l=n.fragmentShader,f=n[s(269)],p=n[s(205)],d=n[s(313)],h=n.cacheKey,v=n[s(373)],m=or(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(er(378))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e.message.indexOf(t(188))>=0)return!1}return!0}(u)?(e=u,Object[s(304)](e,m)):e=new u(m),e.type===s(195))throw new Error(s(227));(function(n,t){var e=Ye;Object[e(304)](n,t);var r=Object.getPrototypeOf(t);Object[e(327)](Object.getOwnPropertyDescriptors(r)).filter((function(n){var t=e,r="function"==typeof n[1].get,o=typeof n[1][t(361)]===t(229),i=typeof n[1][t(265)]===t(229),a="constructor"===n[0];return(r||o||i)&&!a}))[e(189)]((function(t){var r=e;typeof n[t[0]]!==r(229)&&Object.defineProperty(n,t[0],t[1])}))})(sr(t=a[s(345)](this)),e),t[s(275)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(331)][s(207)](),type:e[s(363)],isAlreadyExtended:(r=e[s(285)],o=Ye,i=r[o(223)]()[o(211)](),!(0===i[o(217)](i[o(202)]("{")+1,i[o(255)]("}"))[o(211)]()[o(236)])),cacheHash:"",silent:v},t[s(205)]=rr(rr({},t[s(205)]||{}),p||{});var g=t.__csm,_=g[s(362)],y=g.vertexShader,x=t[s(205)];return t[s(275)][s(183)]=t._getCacheHash(),t._generateMaterial(_,y,x),t}return e=c,r=[{key:t(346),value:function(){var n=t,e=arguments[n(236)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(205)]=e[n(205)]||this.uniforms,Object[n(304)](this.__csm,e);var r=this[n(275)],o=r[n(362)],i=r.vertexShader,a=this[n(205)],c=this[n(305)]();this[n(275)][n(183)]=c,this[n(182)](o,i,a)}},{key:t(325),value:function(){var n=t,e={baseMaterial:this.__csm[n(320)],fragmentShader:this[n(275)][n(362)],vertexShader:this[n(275)][n(269)],uniforms:this[n(205)],silent:this[n(275)][n(373)],patchMap:this.__csm[n(313)],cacheKey:this.__csm[n(301)]},r=new(this[n(181)])(e);return Object[n(304)](this,r),r}},{key:t(305),value:function(){var n=t,e=this[n(275)],r=e.fragmentShader,o=e[n(269)],i=this[n(205)],a=[Dr(r),Dr(o),i][n(359)]((function(n){return void 0!==n}));return a[n(236)]>0?Mn(a,{excludeValues:!0}):this[n(360)]()}},{key:t(182),value:function(n,e,r){var o=t,i=this;this[o(205)]=r||{},this.customProgramCacheKey=function(){var n=o;return i[n(275)][n(183)]};var a=function(t){var r=o;try{var a=i[r(201)]();if(n){var c=i._patchShader(Pr(n),t[r(362)],!0);t[r(362)]=a+c}if(e){var s=i._patchShader(Pr(e),t[r(269)]);t[r(269)]=r(196)+s,t[r(269)]=a+t[r(269)]}t[r(205)]=rr(rr({},t[r(205)]),i.uniforms),i.uniforms=t.uniforms}catch(u){console[r(351)](u)}};if(this[o(275)].isAlreadyExtended){var c=this[o(285)];this[o(285)]=function(n,t){c(n,t),a(n)}}else this[o(285)]=a;this[o(312)]=!0}},{key:"_patchShader",value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(295)]()),this[o(275)].patchMap);Object[o(327)](xr)[o(189)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(234)]((function(t){return Tr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(241)](a,e(343)).concat(c,e(252)))})),Object[o(327)](gr)[o(189)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Ar(a,e,r)})),Object[o(284)](c).forEach((function(t){var e=o;Object[e(284)](c[t]).forEach((function(r){var o=e,s=mr[t],u=i[o(275)][o(363)];if("*"===t||Tr(n,t)){if(!(!s||Array[o(258)](s)&&s[o(350)](u)||"*"===s))throw new Error(o(367)[o(241)](t,o(288)).concat(u,o(266)));a=Ar(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(263)+this[o(275)][o(330)][o(358)](/-/g,"_"),h=n[o(358)](/void\s+main\s*\(\s*\)/g,o(322)[o(241)](d,"()")),v=n[o(350)]("void main()"),m=a.includes("// #_CSM_#");return v&&(m&&this[o(275)].isAlreadyExtended?(a=a[o(358)](o(264),o(221).concat(h,o(371))),s=a,u=o(290),l=o(221).concat(d,o(302)),p=s[(f=Ye)(255)](u),a=-1===p?s:s[f(217)](0,p)+l+s[f(217)](p+u[f(236)])):a=a[o(358)](o(264),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(241)](r?Mr:Sr,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(241)](Ir,o(370)).concat(h,o(220)).concat(br,o(225)).concat(r?Er:wr,o(329))[o(241)](d,o(337)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this[n(275)][n(363)];return e?"#define IS_"[n(241)](e[n(278)](),";\n"):n(340)}},{key:"_getPatchMapForMaterial",value:function(){var n=t;return"ShaderMaterial"===this.__csm[n(363)]?yr:_r}}],i=er,r&&cr(e.prototype,r),o&&cr(e,o),Object[i(197)](e,i(235),{writable:!1}),c}(D[Ye(233)]);function Or(n){function t(n){var e=er;if(typeof n===e(326))return function(n){}[e(181)]("while (true) {}")[e(303)](e(306));1!==(""+n/n)[e(236)]||n%20==0?function(){return!0}.constructor(e(230)+e(353)).call(e(187)):function(){return!1}[e(181)](e(230)+"gger")[e(303)](e(289)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Cr(n,t){const e=Fr();return(Cr=function(n,t){return e[n-=484]})(n,t)}function Fr(){const n=["toString","info","328690LduvyX","clearcoat","150489tJHlXt","8jeIQHf","roughness","1733znRUST","\n\t\t\t","constructor","counter","490vymGTB","15848547dHLxOr","setStyle","gger","850938lSKQCI",'{}.constructor("return this")( )',"return (function() ","apply","index","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","exception","debu","bind","2868BMJEuY","string","length","init","object","#ff00fc","MeshPhysicalMaterial","error","input","while (true) {}","metalness","action","11445mkUkRp","call","12LZQlcu","color","766ILHtez","9475912HkpNwB","clearcoatRoughness"];return(Fr=function(){return n})()}const kr=Cr;!function(n,t){const e=Cr,r=Fr();for(;;)try{if(597420===parseInt(e(516))/1*(parseInt(e(506))/2)+parseInt(e(524))/3+parseInt(e(514))/4*(-parseInt(e(511))/5)+-parseInt(e(490))/6*(parseInt(e(502))/7)+parseInt(e(507))/8+parseInt(e(513))/9*(parseInt(e(520))/10)+-parseInt(e(521))/11*(parseInt(e(504))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(527)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Br(this,(function(){const n=Cr,t=new RegExp(n(486)),e=new RegExp(n(485),"i"),r=Lr(n(493));t.test(r+"chain")&&e.test(r+n(498))?Lr():r("0")}))()}();const jr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();jr(void 0,(function(){const n=Cr,t=function(){const n=Cr;let t;try{t=Function(n(526)+n(525)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},r=["log","warn",n(510),n(497),n(487),"table","trace"];for(let o=0;o<r.length;o++){const t=jr[n(518)].prototype[n(489)](jr),i=r[o],a=e[i]||t;t.__proto__=jr[n(489)](jr),t[n(509)]=a.toString[n(489)](a),e[i]=t}}))();const Ur=[kr(494)],Nr=nn({__name:kr(484),props:{color:{default:kr(495)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=kr,e=n,r={baseMaterial:D[t(496)],metalness:e[t(500)],roughness:e.roughness,clearcoat:e[t(512)],clearcoatRoughness:e.clearcoatRoughness,color:e[t(505)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(517)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new zr(r);return ln((()=>{const n=t;o[n(505)][n(522)](e[n(505)]),o[n(500)]=e[n(500)],o[n(515)]=e.roughness,o[n(512)]=e[n(512)],o[n(508)]=e[n(508)]})),(n,t)=>(on(),an("primitive",{object:X(o)},null,8,Ur))}});function Lr(n){function t(n){const e=Cr;if(typeof n===e(491))return function(n){}.constructor(e(499))[e(527)](e(519));1!==(""+n/n)[e(492)]||n%20==0?function(){return!0}[e(518)](e(488)+e(523))[e(503)](e(501)):function(){return!1}[e(518)](e(488)+e(523)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Wr();;)try{if(220740===-parseInt(e(477))/1+-parseInt(e(488))/2+-parseInt(e(463))/3+parseInt(e(455))/4*(-parseInt(e(483))/5)+-parseInt(e(481))/6*(parseInt(e(469))/7)+-parseInt(e(465))/8*(-parseInt(e(467))/9)+parseInt(e(476))/10*(parseInt(e(486))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hr(this,(function(){var n=Gr,t=new RegExp(n(459)),e=new RegExp(n(460),"i"),r=Vr(n(484));t[n(466)](r+"chain")&&e[n(466)](r+n(471))?Vr():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(479)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(n,t){var e=Wr();return(Gr=function(n,t){return e[n-=454]})(n,t)}function Wr(){var n=["init","trace","143oEZmey","string","508478cWMQky","error","4iXJjgG","__proto__","log","debu","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"length","418116MyYixa","exception","5144HYhQEi","test","3303wtGGIT","action","48846hcNTtw","call","input","constructor","toString","while (true) {}","stateObject","1154810lbacKJ","356784gCmMJc","console","apply","bind","282zaYHER","gger","2190665gCLrzS"];return(Wr=function(){return n})()}function Vr(n){function t(n){var e=Gr;if(typeof n===e(487))return function(n){}.constructor(e(474))[e(479)]("counter");1!==(""+n/n)[e(462)]||n%20==0?function(){return!0}[e(472)](e(458)+e(482))[e(470)](e(468)):function(){return!1}[e(472)](e(458)+e(482))[e(479)](e(475)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){for(var n=Gr,t=function(){var n,t=Gr;try{n=Function("return (function() "+t(461)+");")()}catch(e){n=window}return n}(),e=t[n(478)]=t[n(478)]||{},r=[n(457),"warn","info",n(454),n(464),"table",n(485)],o=0;o<r[n(462)];o++){var i=Zr[n(472)].prototype[n(480)](Zr),a=r[o],c=e[a]||i;i[n(456)]=Zr[n(480)](Zr),i[n(473)]=c[n(473)][n(480)](c),e[a]=i}}))();export{$e as C,Nr as _,Xn as a,lt as b,wt as c,Pt as d,Nt as e,Qt as f,Le as g,Ae as h,vt as u};

import{e,a as s}from"./@tresjs.CIKSfeCC1746335712058.js";import{P as o}from"./tweakpane.C0HtAJSg1746335712058.js";import{_ as t}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.CX-bVjqK1746335712058.js";import{B as a,Q as r}from"./three.quarks.DAcKOQpO1746335712058.js";import{d as i,w as n,H as l,o as c,J as p,u as m,r as u,h as f,e as d,f as j,j as w,ak as h,al as g,am as y,m as v}from"./@vue.DK6ok9LJ1746335712058.js";import{f as _,C,t as T}from"./three.Bj3hPI0l1746335712058.js";import{C as M,a as b}from"./quarks.core.Xz3FZi7v1746335712058.js";import"./postprocessing.Dxg1zmor1746335712058.js";import"./@vueuse.BtSShokC1746335712058.js";import"./all.three.CQRY1fcG1746335712058.js";import"./oimophysics.BBtHVm4j1746335712058.js";import"./vite-plugin-qiankun.B06WoCqG1746335712058.js";const k=["object"],B=["object","position","scale","rotation"],S=i({__name:"cartoonMagic",props:{color:{default:"#00ffff"},position:{default:[0,0,0]},scale:{default:1},rotation:{default:[0,0,0]}},setup(s){const o=s,t=e=>{const s=new C(o.color),t=new T(s.r,s.g,s.b,e);return new b(t)},i=new a,u=new r;u.setCrossOrigin("");const f=new _;u.load("./plugins/floor/json/CartoonMagicZone2.json",(e=>{e.traverse((e=>{if("ParticleEmitter"===e.type){"BasicZoneRedEmitter"===e.name&&e.rotation.set(Math.PI/2,0,0);const s=e.system;-.25===s.startSpeed.value&&(s.startSpeed=new M(-.5)),s.startColor=t(s.startColor.color.w),i.addSystem(s)}})),"ParticleEmitter"===e.type&&i.addSystem(e.system),f.add(e)}));const{onLoop:d}=e();return d((({delta:e,elapsed:s})=>{i.update(e)})),n((()=>[o.color]),(([e])=>{i.systemToBatchIndex.forEach(((e,s)=>{s.startColor=t(s.startColor.color.w)}))})),(e,s)=>(c(),l("TresGroup",null,[p("primitive",{object:m(f)},null,8,k),p("primitive",{object:m(i),position:e.position,scale:e.scale,rotation:e.rotation},null,8,B)]))}}),P=i({__name:"cartoonMagicZone",setup(e){const a=u({reflectivity:.1,showGridHelper:!0,scale:1}),r=u({color:"#ffffff",scale:1}),i=new o;return i.addBinding(r,"color",{label:"颜色"}),i.addBinding(r,"scale",{label:"大小",min:.1,max:3,step:.1}),(e,o)=>{const i=f("TresCanvas");return c(),d(i,{clearColor:"#201919","window-size":""},{default:j((()=>[o[0]||(o[0]=p("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),w(m(s),{enableDamping:""}),o[1]||(o[1]=p("TresAmbientLight",{intensity:2},null,-1)),w(S,h(g(r)),null,16),w(S,{color:"yellow",scale:1,position:[3,0,0]}),o[2]||(o[2]=p("TresMesh",{position:[3,0,0]},[p("TresSphereGeometry",{args:[1,32,32]}),p("TresMeshBasicMaterial",{color:"yellow"})],-1)),o[3]||(o[3]=p("TresMesh",{position:[0,0,0]},[p("TresSphereGeometry",{args:[1,32,32]}),p("TresMeshBasicMaterial",{color:"white"})],-1)),(c(),d(y,null,{default:j((()=>[w(t,v({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});export{P as default};

var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as w,c3 as S,c4 as M,K as R,f as E,V as A,g as T,_ as D,m as P,bm as z,k as C,bz as O,d as F,aj as B,B as k,a as U,aP as j,e as N,M as L,as as H,a9 as Z,U as G,a6 as W}from"./three.-z-VOBM71731641201182.js";import{m as V,D as $,e as q}from"./@tresjs.b88d4FZI1731641201182.js";import{R as Y}from"./three-stdlib.azfEeGDS1731641201182.js";import{v as K,b as X,w as Q,a as J,u as nn,d as tn,U as en,a6 as rn,a4 as on,o as an,D as cn,G as sn,I as un,aa as ln,a3 as fn,q as pn,f as dn,J as hn,ab as vn,r as mn,M as gn,X as _n,s as yn,F as xn,a9 as bn,m as In}from"./@vue.-THQH3GC1731641201182.js";import{M as wn,a as Sn,C as Mn}from"./@pmndrs.nMJMDdCC1731641201182.js";import{h as Rn}from"./object-hash.CXGf2irT1731641201182.js";var En=An;function An(n,t){var e=Pn();return(An=function(n,t){return e[n-=491]})(n,t)}!function(n,t){for(var e=An,r=Pn();;)try{if(753936===parseInt(e(503))/1+parseInt(e(528))/2*(-parseInt(e(523))/3)+parseInt(e(507))/4+-parseInt(e(534))/5*(parseInt(e(526))/6)+-parseInt(e(533))/7+-parseInt(e(525))/8+-parseInt(e(529))/9*(-parseInt(e(530))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(513)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tn(this,(function(){var n=An,t=new RegExp(n(527)),e=new RegExp(n(502),"i"),r=On(n(519));t.test(r+"chain")&&e[n(520)](r+n(509))?On():r("0")}))()}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[An(513)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(){var n=["exception","action","error","apply","destructor","bind",'{}.constructor("return this")( )',"toString","remove","init","test","material","debu","438svSZJH","constructor","11189200ELUhHk","474ZEovQo","function *\\( *\\)","1146SiSFAl","27kpHVdl","6882230JbeKca","add","map","7486745ytYpFe","91675IxeJSP","log","virtualScene","console","return (function() ","counter","traverse","info","length","dispose","__proto__","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1322355bMfNTq","geometry","while (true) {}","table","5468880RGHEPM","prototype","input"];return(Pn=function(){return n})()}Dn(void 0,(function(){var n,t=An;try{n=Function(t(494)+t(516)+");")()}catch(s){n=window}for(var e=n[t(493)]=n[t(493)]||{},r=[t(491),"warn",t(497),t(512),t(510),t(506),"trace"],o=0;o<r[t(498)];o++){var i=Dn[t(524)][t(508)][t(515)](Dn),a=r[o],c=e[a]||i;i[t(500)]=Dn[t(515)](Dn),i.toString=c[t(517)].bind(c),e[a]=i}}))();class zn extends s{constructor(){var n=An;super(),this[n(492)]=null,this[n(492)]=new u}[En(531)](...n){var t=En;return this[t(492)][t(531)](...n),this}[En(514)](){var n=En;this[n(492)][n(496)]((t=>{var e=n;t instanceof l&&(t[e(504)][e(499)](),t[e(521)][e(499)](),t[e(521)][e(532)]&&t[e(521)].map.dispose(),this[e(492)][e(518)](t))})),this[n(492)]=null}}const Cn=zn;function On(n){function t(n){var e=An;if("string"==typeof n)return function(n){}.constructor(e(505)).apply(e(495));1!==(""+n/n)[e(498)]||n%20==0?function(){return!0}[e(524)](e(522)+e(501)).call(e(511)):function(){return!1}[e(524)](e(522)+"gger")[e(513)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=kn;!function(n,t){const e=kn,r=jn();for(;;)try{if(395665===parseInt(e(442))/1*(-parseInt(e(463))/2)+-parseInt(e(483))/3+parseInt(e(451))/4*(parseInt(e(478))/5)+-parseInt(e(469))/6+-parseInt(e(446))/7+parseInt(e(471))/8*(parseInt(e(466))/9)+parseInt(e(473))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Bn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(475)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kn(n,t){const e=jn();return(kn=function(n,t){return e[n-=439]})(n,t)}!function(){Bn(this,(function(){const n=kn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(443),"i"),r=Ln(n(458));t[n(440)](r+"chain")&&e[n(440)](r+"input")?Ln():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[kn(475)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jn(){const n=["2133552eLmrop","outdoor/satara_night_1k.hdr","prototype","test","city/shanghai_bund_1k.hdr","285025QIsXgx","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","error","1954491wOhqqM","constructor","table","gger","warn","2728cUKtAf","action","kiara/kiara_1_dawn_1k.hdr","call","string","bind","info","init",'{}.constructor("return this")( )',"indoor/abandoned_games_room_02_1k.hdr","return (function() ","while (true) {}","2EQeUwe","length","__proto__","9QXnlow","counter","stateObject","3545940IZzeVh","debu","4603400sKoMzS","console","11615120ybgzwq","venice/venice_sunset_1k.hdr","apply","trace","outood/mossy_forest_1k.hdr","3850vIlePF","toString","exception","indoor/small_hangar_01_1k.hdr","studio/poly_haven_studio_1k.hdr"];return(jn=function(){return n})()}Un(void 0,(function(){const n=kn;let t;try{t=Function(n(461)+n(459)+");")()}catch(o){t=window}const e=t[n(472)]=t[n(472)]||{},r=[n(444),n(450),n(457),n(445),n(480),n(448),n(476)];for(let i=0;i<r[n(464)];i++){const t=Un[n(447)][n(439)][n(456)](Un),o=r[i],a=e[o]||t;t[n(465)]=Un[n(456)](Un),t.toString=a[n(479)][n(456)](a),e[o]=t}}))();const Nn={sunset:Fn(474),studio:Fn(482),city:"city/canary_wharf_1k.hdr",umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Fn(484),forest:Fn(477),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:Fn(453),hangar:Fn(481),urban:Fn(460),modern:"city/modern_buildings_2_1k.hdr",shangai:Fn(441)};function Ln(n){function t(n){const e=kn;if(typeof n===e(455))return function(n){}.constructor(e(462)).apply(e(467));1!==(""+n/n)[e(464)]||n%20==0?function(){return!0}[e(447)](e(470)+e(449))[e(454)](e(452)):function(){return!1}[e(447)](e(470)+e(449))[e(475)](e(468)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Hn(){const n=["33492eiOiAk","info","258tethrn","error","constructor","console","value","136420SiLkFn","call","16213068ffUoPw","Failed to load environment map: ","trace","bind","160AQzMpO","texture","157751UBGPkN","Preset must be one of: ","prototype","3RMGLJd","__proto__","setPath","warn","environment","background","input","stateObject","gger",'{}.constructor("return this")( )',"while (true) {}","isArray","keys","7XcRiyl","90fQvtZt","return (function() ","action","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","exception","apply","mapping","toString","log","backgroundBlurriness","test","7910364GIZWmb","816172mDRTfV","length","9588344ITvlEI","string","chain"];return(Hn=function(){return n})()}const Zn=Wn;!function(n,t){const e=Wn,r=Hn();for(;;)try{if(984747===parseInt(e(132))/1*(parseInt(e(149))/2)+parseInt(e(167))/3*(-parseInt(e(144))/4)+-parseInt(e(156))/5*(-parseInt(e(151))/6)+parseInt(e(180))/7*(parseInt(e(146))/8)+-parseInt(e(158))/9+parseInt(e(162))/10*(-parseInt(e(164))/11)+-parseInt(e(143))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wn(n,t){const e=Hn();return(Wn=function(n,t){return e[n-=132]})(n,t)}!function(){Gn(this,(function(){const n=Wn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=qn("init");t[n(142)](r+n(148))&&e[n(142)](r+n(173))?qn():r("0")}))()}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Wn(137)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Vn(void 0,(function(){const n=Wn,t=function(){const n=Wn;let t;try{t=Function(n(133)+n(176)+");")()}catch(e){t=window}return t}(),e=t[n(154)]=t[n(154)]||{},r=[n(140),n(170),n(150),n(152),n(136),"table",n(160)];for(let o=0;o<r[n(145)];o++){const t=Vn[n(153)][n(166)].bind(Vn),i=r[o],a=e[i]||t;t[n(168)]=Vn[n(161)](Vn),t.toString=a[n(139)][n(161)](a),e[i]=t}}))();const $n=Zn(135);function qn(n){function t(n){const e=Wn;if(typeof n===e(147))return function(n){}.constructor(e(177))[e(137)]("counter");1!==(""+n/n)[e(145)]||n%20==0?function(){return!0}[e(153)]("debu"+e(175))[e(157)](e(134)):function(){return!1}.constructor("debu"+e(175))[e(137)](e(174)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yn=Qn;!function(n,t){const e=Qn,r=nt();for(;;)try{if(806768===-parseInt(e(417))/1+-parseInt(e(429))/2+parseInt(e(418))/3*(parseInt(e(457))/4)+-parseInt(e(443))/5*(-parseInt(e(453))/6)+-parseInt(e(442))/7*(parseInt(e(423))/8)+parseInt(e(434))/9+-parseInt(e(422))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(438)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kn(this,(function(){const n=Qn,t=new RegExp(n(452)),e=new RegExp(n(448),"i"),r=tt("init");t[n(411)](r+n(405))&&e[n(411)](r+n(437))?tt():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qn(n,t){const e=nt();return(Qn=function(n,t){return e[n-=404]})(n,t)}Xn(void 0,(function(){const n=Qn,t=function(){const n=Qn;let t;try{t=Function(n(427)+n(447)+");")()}catch(e){t=window}return t}(),e=t[n(406)]=t[n(406)]||{},r=[n(441),n(433),"info",n(428),n(415),n(439),"trace"];for(let o=0;o<r[n(421)];o++){const t=Xn[n(456)].prototype[n(451)](Xn),i=r[o],a=e[i]||t;t[n(409)]=Xn[n(451)](Xn),t[n(413)]=a[n(413)][n(451)](a),e[i]=t}}))();const Jn=tn({__name:Yn(420),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Yn;let r,o;const i=n,a=X(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=X(null),x=null;const b=X(null);en((()=>{var n,t;const e=Qn;null==(n=b[e(446)])||n[e(458)](),null==(t=y[e(446)])||t[e(410)]()}));const{onBeforeLoop:I}=q();let w=1;I((()=>{const n=Qn;x&&b.value&&y[n(446)]&&(i[n(455)]===1/0||w<i.frames)&&(i[n(426)]?x[n(432)](s[n(446)],u[n(446)]):x[n(432)](s[n(446)],ln(b[n(446)][n(430)])),w++)}));const S=([r,o]=rn((()=>async function(n,t){const e=Zn,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=X([]),path:s=X(""),background:u}=K(n);Q(n,(()=>{o()}));const l=X(null),h=J((()=>Array[e(178)](c.value))),v=J((()=>h[e(155)]?f:Y));return Q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(145)]>0&&!(null==i?void 0:i.value)){try{l.value=await $(v[r(155)],h[r(155)]?[...nn(n)]:nn(n),(n=>{t&&n[r(169)](nn(t))}))}catch(o){throw new Error("Failed to load environment map: "+o)}l[r(155)]&&(l.value[r(138)]=h.value?p:d)}}),{immediate:!0}),Q(l,(n=>{const t=e;r[t(155)]&&n&&(r[t(155)][t(171)]=n)}),{immediate:!0}),Q([u,l],(([n,o])=>{const i=e;if(r[i(155)]){let e=(null==t?void 0:t[i(155)])?t.value[i(163)]:o,a=r[i(155)].background;!(null==a?void 0:a.isColor)&&(a=void 0),r.value[i(172)]=n?e:a}}),{immediate:!0}),Q((()=>null==a?void 0:a[e(155)]),(n=>{const t=e;r[t(155)]&&n&&(r.value[t(141)]=n)}),{immediate:!0}),Q((()=>null==i?void 0:i[e(155)]),(async n=>{const t=e;if(n&&n in Nn){const e=$n,i=Nn[n];try{l[t(155)]=await $(Y,i,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(159)+r)}l[t(155)]&&l.value&&(l[t(155)][t(138)]=d),o()}else if(n&&!(n in Nn))throw new Error(t(165)+Object[t(179)](Nn).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Qn;n?(u[t(446)].environment=n[t(436)],i[t(445)]&&(u[t(446)][t(445)]=n.texture)):(u[t(446)].environment=S.value,i.background&&(u[t(446)][t(445)]=S[t(446)]))};Q(S,(n=>{const t=Qn;y.value&&M(y[t(446)])}),{immediate:!0,deep:!0}),c({EnvSence:Cn});const R=()=>{var n;const t=Qn;null==(n=y.value)||n.dispose(),y.value=new v(i[t(412)]),x=new m(i.near,i.far,y[t(446)]),i[t(426)]?(y[t(446)][t(436)][t(419)]=g,y[t(446)][t(436)][t(414)]=!1,y.value.texture[t(416)]=_,y[t(446)][t(436)][t(450)]=_):y.value[t(436)][t(419)]=h,M(y[t(446)])};return Q((()=>on()[e(435)]),(n=>{var t,r;const o=e;n&&(!y[o(446)]||y[o(446)].texture[o(419)]!==h)&&(l=n(),Array[o(440)](l)&&l[o(421)]>0&&typeof(null==(t=l[0])?void 0:t[o(419)])!==o(425))?R():(null==(r=y[o(446)])||r[o(410)](),y[o(446)]=null,M(null))}),{immediate:!0,deep:!0}),a.value=S,Q((()=>i[e(426)]),(n=>{y[e(446)]&&R()})),(n,t)=>{const r=e;return nn(y)?(an(),cn(r(404),{key:0,ref_key:r(424),ref:b},[sn(n[r(408)],r(435))],512)):un("",!0)}}});function nt(){const n=["7302132CgbpkZ","default","texture","input","apply","table","isArray","log","301iqToxm","2610590inOVWJ","while (true) {}","background","value",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","magFilter","bind","function *\\( *\\)","18FxpVYD","counter","frames","constructor","12pzHhXh","destructor","TresEnvSence","chain","console","debu","$slots","__proto__","dispose","test","resolution","toString","generateMipmaps","exception","minFilter","1107337BlKBnl","862383cbUMjX","type","component","length","1794200nSrJjx","148360OsFQrh","envSence","symbol","useDefaultScene","return (function() ","error","698250gyymcs","virtualScene","gger","update","warn"];return(nt=function(){return n})()}function tt(n){function t(n){const e=Qn;if(typeof n===e(449))return function(n){}.constructor(e(444)).apply(e(454));1!==(""+n/n)[e(421)]||n%20==0?function(){return!0}[e(456)](e(407)+e(431)).call("action"):function(){return!1}.constructor(e(407)+e(431)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function et(n,t){const e=at();return(et=function(n,t){return e[n-=199]})(n,t)}const rt=et;!function(n,t){const e=et,r=at();for(;;)try{if(434456===-parseInt(e(237))/1+parseInt(e(222))/2+-parseInt(e(245))/3*(parseInt(e(238))/4)+parseInt(e(211))/5*(parseInt(e(236))/6)+parseInt(e(215))/7*(-parseInt(e(204))/8)+-parseInt(e(224))/9*(-parseInt(e(218))/10)+parseInt(e(207))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ot(this,(function(){const n=et,t=new RegExp(n(203)),e=new RegExp(n(200),"i"),r=pt("init");t[n(250)](r+n(234))&&e[n(250)](r+"input")?pt():r("0")}))()}();const it=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[et(229)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function at(){const n=["44eNfqHD","error","action","needsUpdate","call","side","counter","118077mtdrWw","material","exception","index","return (function() ","test","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rect","circle","function *\\( *\\)","6916888AVRzMk","value","toString","11206448HXaBPg","length","multiplyScalar","string","835745bBdcXm","warn","stateObject","intensity","7Hvafqv","TresPlaneGeometry","console","754590fVCIWL","toneMapped","gger","log","397082BuWgAZ","from","63DOVmQf","info","bind","trace","constructor","apply",'{}.constructor("return this")( )',"map","TresRingGeometry","color","chain","table","6UMcJEK","180655lvqtqS"];return(at=function(){return n})()}it(void 0,(function(){const n=et;let t;try{t=Function(n(249)+n(230)+");")()}catch(o){t=window}const e=t[n(217)]=t[n(217)]||{},r=[n(221),n(212),n(225),n(239),n(247),n(235),n(227)];for(let i=0;i<r[n(208)];i++){const t=it[n(228)].prototype[n(226)](it),o=r[i],a=e[o]||t;t.__proto__=it.bind(it),t[n(206)]=a[n(206)][n(226)](a),e[o]=t}}))();const ct={key:0,args:[0,1,64]},st={key:1,args:[.5,1,64]},ut={key:2},lt=["toneMapped","map",rt(243),rt(233)],ft=tn({__name:rt(248),props:{args:{default:null},from:{default:rt(201)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=rt,e=n,r=X();return fn((()=>{const n=et;r.value&&(r[n(205)][n(233)][n(209)](e[n(214)]),r[n(205)].needsUpdate=!0)})),Q((()=>e[t(233)]),(n=>{const o=t;r[o(205)]&&(r.value[o(233)].set(n),r.value.color.multiplyScalar(e[o(214)]),r[o(205)][o(241)]=!0)})),pn((()=>{})),(n,o)=>{const i=t;return an(),cn("TresMesh",null,[e.from===i(202)?(an(),cn(i(232),ct)):"ring"===e[i(223)]?(an(),cn(i(232),st)):e[i(223)]===i(201)?(an(),cn(i(216),ut)):(an(),dn(e[i(223)],{key:3,args:e})),hn("TresMeshBasicMaterial",{ref_key:i(246),ref:r,toneMapped:n[i(219)],map:n[i(231)],side:nn(x),color:n.color},null,8,lt)])}}});function pt(n){function t(n){const e=et;if(typeof n===e(210))return function(n){}[e(228)]("while (true) {}").apply(e(244));1!==(""+n/n).length||n%20==0?function(){return!0}[e(228)](e(199)+e(220))[e(242)](e(240)):function(){return!1}[e(228)]("debu"+e(220))[e(229)](e(213)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=mt();for(;;)try{if(984504===-parseInt(e(418))/1*(parseInt(e(460))/2)+-parseInt(e(442))/3+parseInt(e(427))/4*(-parseInt(e(440))/5)+-parseInt(e(433))/6+-parseInt(e(437))/7+parseInt(e(445))/8+parseInt(e(432))/9*(parseInt(e(459))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(430)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){dt(this,(function(){const n=vt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(449),"i"),r=_t(n(428));t[n(422)](r+n(441))&&e[n(422)](r+n(419))?_t():r("0")}))()}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(430)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function vt(n,t){const e=mt();return(vt=function(n,t){return e[n-=417]})(n,t)}function mt(){const n=["while (true) {}","1011dqbhXU","input","format","value","test","stateObject","height","debu","error","92DOsHVC","init","constructor","apply","depthTexture","18ThQTaO","10325640BgIuZv","exception","action","width","12716081mBbjVb","gger","bind","276295JLRVeC","chain","3362115YRddCu","clear","string","12239152YMUFBU","dispose","info","setRenderTarget","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","call","warn","length","console","return (function() ","counter","prototype","toString","log","27459860xucEjq","214nbCuvN"];return(mt=function(){return n})()}function gt(n){const t=X(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=vn(n)?K(n):K(mn(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return fn((()=>{var n;const a=vt;null==(n=t[a(421)])||n.dispose(),t.value=new b((null==r?void 0:r.value)||p[a(436)][a(421)],(null==e?void 0:e[a(421)])||p[a(424)][a(421)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(421)])),(null==i?void 0:i[a(421)])&&(t[a(421)][a(431)]=new w((null==r?void 0:r.value)||p[a(436)][a(421)],(null==e?void 0:e[a(421)])||p[a(424)][a(421)]),t[a(421)].depthTexture[a(420)]=S,t[a(421)][a(431)].type=M)})),s((()=>{const n=vt;(null==a?void 0:a.value)&&(l[n(421)][n(448)](ln(t[n(421)])),l.value[n(443)](),l[n(421)].render(ln(f[n(421)]),ln(u.value)),l[n(421)][n(448)](null))})),gn((()=>{var n;const e=vt;null==(n=t[e(421)])||n[e(446)]()})),t}function _t(n){function t(n){const e=vt;if(typeof n===e(444))return function(n){}[e(429)](e(417))[e(430)](e(455));1!==(""+n/n).length||n%20==0?function(){return!0}[e(429)](e(425)+"gger")[e(450)](e(435)):function(){return!1}.constructor(e(425)+e(438))[e(430)](e(423)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function yt(){const n=["action","92027UQqYJl","3CfbOtC","402510ovHnAC","side","traverse","110lUqEWL","chain","value","__proto__","return (function() ","counter","gger","trace","index","constructor","console","uuid","setRenderTarget","length","input","warn","while (true) {}",'{}.constructor("return this")( )',"2182845FkRVdF","toneMapping","isMesh","apply","log","debu","420684ovYCSC","fboResolution","33438PNwXBa","buffer","envMapIntensity","info","render","texture","time","call","init","617806kplgHR","test","background","205227HAMDdQ","error","prototype","material","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","thickness","bind","8MPeord","backside"];return(yt=function(){return n})()}function xt(n,t){const e=yt();return(xt=function(n,t){return e[n-=104]})(n,t)}ht(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(454)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(453)]=t[n(453)]||{},r=[n(458),n(451),n(447),n(426),n(434),"table","trace"];for(let o=0;o<r[n(452)];o++){const t=ht[n(429)][n(456)].bind(ht),i=r[o],a=e[i]||t;t.__proto__=ht[n(439)](ht),t[n(457)]=a[n(457)][n(439)](a),e[i]=t}}))();const bt=xt;!function(n,t){const e=xt,r=yt();for(;;)try{if(156130===-parseInt(e(155))/1+-parseInt(e(142))/2*(parseInt(e(156))/3)+parseInt(e(131))/4+parseInt(e(107))/5*(parseInt(e(133))/6)+parseInt(e(125))/7+-parseInt(e(152))/8*(parseInt(e(145))/9)+parseInt(e(104))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(128)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){It(this,(function(){const n=xt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(149),"i"),r=Rt(n(141));t[n(143)](r+n(108))&&e[n(143)](r+n(121))?Rt():r("0")}))()}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[xt(128)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();wt(void 0,(function(){const n=xt;let t;try{t=Function(n(111)+n(124)+");")()}catch(o){t=window}const e=t[n(117)]=t[n(117)]||{},r=[n(129),n(122),n(136),n(146),"exception","table",n(114)];for(let i=0;i<r[n(120)];i++){const t=wt.constructor[n(147)].bind(wt),o=r[i],a=e[o]||t;t[n(110)]=wt[n(151)](wt),t.toString=a.toString[n(151)](a),e[o]=t}}))();const St=[bt(134),bt(105)],Mt=tn({__name:bt(115),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=bt,r=_n(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=_n(),u=n;o({MeshTransmissionMaterial:wn});const l=new Sn,{onBeforeLoop:f}=q(),p=gt({width:u[e(132)],height:u[e(132)],isLoop:!1}),d=gt({width:u.fboResolution,height:u[e(132)],isLoop:!1});let h,v,m,g;return pn((async()=>{const n=e;await yn(),s[n(109)]=function(n,t){const e=xt;let r;return n[e(106)]((n=>{const o=e;n[o(127)]&&n[o(148)]&&n.material.uuid===t&&(r=n)})),r}(i.value,r[n(109)][n(118)])})),f((({elapsed:n})=>{const t=e;r[t(109)][t(139)]=n,r[t(109)][t(134)]===d.value.texture&&s[t(109)]&&(m=a[t(109)][t(126)],h=i[t(109)][t(144)],v=r[t(109)][t(135)],g=s[t(109)][t(148)][t(105)],s[t(109)][t(148)]=l,u[t(153)]&&(a[t(109)][t(119)](p[t(109)]),a.value[t(137)](i[t(109)],c[t(109)]),s[t(109)].material=r[t(109)],s[t(109)][t(148)][t(150)]=u.backsideThickness,s.value.material.buffer=p[t(109)][t(138)],s.value[t(148)][t(105)]=R,s[t(109)].material[t(135)]=0),a[t(109)][t(119)](d[t(109)]),a.value.render(i[t(109)],c[t(109)]),s.value[t(148)].buffer=d.value[t(138)],s.value.material=r.value,s.value.material.thickness=u.thickness,s.value[t(148)][t(105)]=g,s[t(109)][t(148)][t(135)]=v,i.value[t(144)]=h,a[t(109)][t(119)](null),a[t(109)][t(126)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return an(),cn("TresMeshTransmissionMaterial",{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:nn(d)[o(138)],side:nn(x)},null,8,St)}}});function Rt(n){function t(n){const e=xt;if("string"==typeof n)return function(n){}[e(116)](e(123))[e(128)](e(112));1!==(""+n/n)[e(120)]||n%20==0?function(){return!0}.constructor("debu"+e(113))[e(140)](e(154)):function(){return!1}[e(116)](e(130)+e(113))[e(128)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Et=Pt;!function(n,t){const e=Pt,r=Dt();for(;;)try{if(486597===parseInt(e(359))/1+-parseInt(e(366))/2+-parseInt(e(354))/3*(parseInt(e(364))/4)+-parseInt(e(393))/5+-parseInt(e(398))/6+parseInt(e(386))/7+parseInt(e(396))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(353)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){At(this,(function(){const n=Pt,t=new RegExp(n(351)),e=new RegExp(n(389),"i"),r=Ct(n(360));t[n(361)](r+n(383))&&e.test(r+"input")?Ct():r("0")}))()}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pt(353)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(){const n=["constructor","return (function() ","index","797132pXPKAY","init","test","min","bind","4jNBswZ","action","1085838FXwbtH","bottom","top","call","toString","string","default","disableY","log","position","disableZ","disable","debu","gref","left","front","getBoundingSphere","chain","right","stateObject","2922346zQxDsY","value","outer","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"set","exception","1465740gCFikJ","TresGroup","length","7152928nwgGEs","counter","132336jueTqV","max","prototype","precise","warn","inner","setFromObject","gger","function *\\( *\\)","console","apply","2292018qBoyJu","disableX"];return(Dt=function(){return n})()}function Pt(n,t){const e=Dt();return(Pt=function(n,t){return e[n-=348]})(n,t)}Tt(void 0,(function(){const n=Pt;let t;try{t=Function(n(357)+n(390)+");")()}catch(o){t=window}const e=t[n(352)]=t[n(352)]||{},r=[n(374),n(402),"info","error",n(392),"table","trace"];for(let i=0;i<r[n(395)];i++){const t=Tt[n(356)][n(400)].bind(Tt),o=r[i],a=e[o]||t;t.__proto__=Tt[n(363)](Tt),t[n(370)]=a[n(370)][n(363)](a),e[o]=t}}))();const zt=tn({__name:Et(358),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=X(null),r=X(null),o=X(null);return pn((()=>{const n=Pt;if(!r[n(387)])return;if(!o.value)return;r[n(387)].matrixWorld.identity();const e=(new E)[n(349)](o.value,t[n(401)]),i=new A,a=new T,c=e[n(399)].x-e.min.x,s=e.max.y-e[n(362)].y,u=e[n(399)].z-e[n(362)].z;e.getCenter(i),e[n(382)](a);const l=t[n(368)]?s/2:t[n(367)]?-s/2:0,f=t[n(380)]?-c/2:t[n(384)]?c/2:0,p=t[n(381)]?u/2:t.back?-u/2:0;r[n(387)][n(375)][n(391)](t[n(377)]||t[n(355)]?0:-i.x+f,t.disable||t[n(373)]?0:-i.y+l,t.disable||t[n(376)]?0:-i.z+p)})),(n,t)=>{const i=Pt;return an(),cn("TresGroup",{ref_key:i(379),ref:e},[hn(i(394),{ref_key:i(388),ref:r},[hn(i(394),{ref_key:i(348),ref:o},[sn(n.$slots,i(372))],512)],512)],512)}}});function Ct(n){function t(n){const e=Pt;if(typeof n===e(371))return function(n){}.constructor("while (true) {}")[e(353)](e(397));1!==(""+n/n)[e(395)]||n%20==0?function(){return!0}[e(356)](e(378)+e(350))[e(369)](e(365)):function(){return!1}[e(356)](e(378)+e(350))[e(353)](e(385)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Bt;!function(n,t){const e=Bt,r=Ut();for(;;)try{if(337071===-parseInt(e(230))/1*(parseInt(e(259))/2)+parseInt(e(254))/3*(-parseInt(e(269))/4)+-parseInt(e(222))/5+parseInt(e(232))/6+parseInt(e(244))/7*(parseInt(e(240))/8)+parseInt(e(234))/9+-parseInt(e(256))/10*(-parseInt(e(252))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(267)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Ut();return(Bt=function(n,t){return e[n-=222]})(n,t)}!function(){Ft(this,(function(){const n=Bt,t=new RegExp(n(247)),e=new RegExp(n(253),"i"),r=Ht(n(265));t[n(245)](r+n(238))&&e.test(r+n(271))?Ht():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(267)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ut(){const n=["color","2LzsAYs","lightSource","length","debu","primitive","call","init","params","apply","backsideIOR","8nLayOD","ior","input","Vector3","worldRadius","update","toString","index","console","add","bind","intensity","error","scene","2075685qbDmqg","far","action","resolution","object","group","$slots","return (function() ","287097YwgOwa","default","176178AgdeTY","trace","2004696edSSfI","causticsOnly","counter","value","chain",'{}.constructor("return this")( )',"2712VMAmGy","backside","prototype","exception","9611NAetDL","test","constructor","function *\\( *\\)","helper","set","TresGroup","table","5599uQPiua","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","135045YOAfIT","__proto__","8090FFTQqm","gger"];return(Ut=function(){return n})()}kt(void 0,(function(){const n=Bt;let t;try{t=Function(n(229)+n(239)+");")()}catch(o){t=window}const e=t[n(277)]=t[n(277)]||{},r=["log","warn","info",n(281),n(243),n(251),n(233)];for(let i=0;i<r[n(261)];i++){const t=kt[n(246)][n(242)].bind(kt),o=r[i],a=e[o]||t;t[n(255)]=kt[n(279)](kt),t[n(275)]=a[n(275)][n(279)](a),e[o]=t}}))();const jt=[Ot(226)],Nt=[Ot(226)],Lt=tn({__name:Ot(276),props:{color:{default:"#ffffff"},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=V(),o=Mn(r[t(237)],{frames:1/0,resolution:e[t(225)],worldRadius:e[t(273)]});o[t(266)][t(241)]=!0;const i=_n(null);Q(i,(n=>{const e=t;n&&o[e(282)][e(278)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o[t(274)]()})),fn((()=>{const n=t;e.color&&o.params[n(258)].set(e[n(258)]),e[n(270)]&&(o[n(266)][n(270)]=e[n(270)]),e[n(268)]&&(o[n(266)][n(268)]=e[n(268)]),e[n(223)]&&(o[n(266)][n(223)]=e[n(223)]),e.worldRadius&&(o.params.worldRadius=e[n(273)]),e[n(280)]&&(o.params[n(280)]=e[n(280)])})),Q((()=>e[t(235)]),(n=>{o.params.causticsOnly=n})),Q((()=>e.lightSource),(n=>{const e=t;n&&o[e(266)].lightSource instanceof D[e(272)]&&o[e(266)][e(260)][e(249)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return an(),cn(xn,null,[hn(r(250),{ref_key:"group",ref:i},[sn(n[r(228)],r(231))],512),hn("primitive",{object:nn(o)[r(227)],position:[0,.003,0]},null,8,jt),hn(r(263),{object:nn(o)[r(248)],visible:!1},null,8,Nt)],64)}}});function Ht(n){function t(n){const e=Bt;if("string"==typeof n)return function(n){}[e(246)]("while (true) {}")[e(267)](e(236));1!==(""+n/n)[e(261)]||n%20==0?function(){return!0}[e(246)]("debu"+e(257))[e(264)](e(224)):function(){return!1}[e(246)](e(262)+e(257))[e(267)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Zt(){const n=["exception","toString","stateObject","string","replace",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","isArray","call","355773ZTuMyq","90364VHxaUo","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10wAIRmB","#if defined( SHADOWMAP_TYPE_PCF )","gger","bind","warn","293573NlwEkd","4POgygn","test","trace","log","programs","forEach","dispose","1288647IGzKub","length","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )","return (function() ","apply","; i ++) {\n        offset = (vogelDiskSample(j, ",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","remove","; i++) {\n        vogelSample = vogelDiskSample(j, ","55dCxQfN","info","error","action","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","table","shadowmap_pars_fragment","properties","64822qOQHxe","#ifdef USE_SHADOWMAP","material","debu","compile","console","__proto__","56sJOCZD","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","input","function *\\( *\\)","constructor","prototype","counter","ShaderChunk",'{}.constructor("return this")( )',"753402gpOhOg","1248ruzlxC"];return(Zt=function(){return n})()}!function(n,t){const e=Vt,r=Zt();for(;;)try{if(309536===parseInt(e(210))/1*(parseInt(e(186))/2)+-parseInt(e(226))/3+-parseInt(e(237))/4*(-parseInt(e(202))/5)+-parseInt(e(227))/6+-parseInt(e(185))/7*(-parseInt(e(217))/8)+parseInt(e(193))/9*(-parseInt(e(240))/10)+parseInt(e(236))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gt(this,(function(){const n=Vt,t=new RegExp(n(220)),e=new RegExp(n(239),"i"),r=qt(n(238));t[n(187)](r+"chain")&&e[n(187)](r+n(219))?qt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(n,t){const e=Zt();return(Vt=function(n,t){return e[n-=182]})(n,t)}Wt(void 0,(function(){const n=Vt,t=function(){const n=Vt;let t;try{t=Function(n(196)+n(225)+");")()}catch(e){t=window}return t}(),e=t[n(215)]=t[n(215)]||{},r=[n(189),n(184),n(203),n(204),n(228),n(207),n(188)];for(let o=0;o<r[n(194)];o++){const t=Wt[n(221)][n(222)].bind(Wt),i=r[o],a=e[i]||t;t[n(216)]=Wt[n(183)](Wt),t[n(229)]=a[n(229)][n(183)](a),e[i]=t}}))();const $t=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Vt,o=D[r(224)][r(208)];return D[r(224)][r(208)]=D[r(224)][r(208)][r(232)](r(211),r(206)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(198)+e+r(199)+e+r(201)+e+r(233)+t+r(218)+e+".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }")[r(232)](r(241),r(195)),(n,t,e)=>{const i=r;D[i(224)][i(208)]=o,function(n,t,e){const r=Vt;t.traverse((t=>{const e=Vt;t[e(212)]&&(Array[e(234)](t[e(212)])?t[e(212)][e(191)]((t=>{const r=e;n.properties.remove(t),t[r(192)]()})):(n[e(209)][e(200)](t[e(212)]),t[e(212)][e(192)]()))})),n[r(203)][r(190)][r(194)]=0,n[r(214)](t,e)}(n,t,e)}};function qt(n){function t(n){const e=Vt;if(typeof n===e(231))return function(n){}.constructor("while (true) {}").apply(e(223));1!==(""+n/n)[e(194)]||n%20==0?function(){return!0}[e(221)](e(213)+e(182))[e(235)](e(205)):function(){return!1}[e(221)](e(213)+e(182))[e(197)](e(230)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Qt,r=Xt();for(;;)try{if(123630===parseInt(e(172))/1+-parseInt(e(154))/2*(parseInt(e(171))/3)+parseInt(e(146))/4*(parseInt(e(156))/5)+-parseInt(e(158))/6*(-parseInt(e(138))/7)+parseInt(e(166))/8*(parseInt(e(153))/9)+-parseInt(e(134))/10+-parseInt(e(143))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(155)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Qt,t=new RegExp(n(173)),e=new RegExp(n(159),"i"),r=ne(n(149));t[n(142)](r+n(140))&&e[n(142)](r+"input")?ne():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qt(155)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(){const n=["bind","150480hgUZYe","return (function() ","trace","string","38045Tbbtmd","while (true) {}","chain","table","test","4434144ZyIaZP","action",'{}.constructor("return this")( )',"120644YcEQgh","info","constructor","init","traverse","value","console","299142ALorBT","14058UyhWYY","apply","30XXwwGX","counter","102tAfKNC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","call","material","gger","length","debu","32acmFZS","log","toString","warn","exception","18SsdPEp","177643hEeWaq","function *\\( *\\)","prototype"];return(Xt=function(){return n})()}function Qt(n,t){const e=Xt();return(Qt=function(n,t){return e[n-=134]})(n,t)}Kt(void 0,(function(){const n=Qt;let t;try{t=Function(n(135)+n(145)+");")()}catch(o){t=window}const e=t.console=t[n(152)]||{},r=[n(167),n(169),n(147),n(160),n(170),n(141),n(136)];for(let i=0;i<r[n(164)];i++){const t=Kt[n(148)][n(174)][n(175)](Kt),o=r[i],a=e[o]||t;t.__proto__=Kt.bind(Kt),t[n(168)]=a[n(168)][n(175)](a),e[o]=t}}))();const Jt=tn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(151)],o[t(151)],e[t(151)]),i=null),a&&(i=$t({focus:s,size:c,samples:u}),o[t(151)][t(150)]((n=>{n instanceof l&&n[t(162)].dispose()})))};return a(t),Q(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Qt;if(typeof n===e(137))return function(n){}[e(148)](e(139))[e(155)](e(157));1!==(""+n/n)[e(164)]||n%20==0?function(){return!0}[e(148)](e(165)+e(163))[e(161)](e(144)):function(){return!1}.constructor(e(165)+e(163))[e(155)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const te=oe;function ee(){const n=["console","while (true) {}","101086ZsYuEF","table","8rBpbfZ","counter","action","75378QLlFqa","constructor","multiplyScalar","colorspace_fragment","331053psfeti","18230ivKKSj","debu",'{}.constructor("return this")( )',"copy","stateObject","set","halfTexelSize","test","prototype","length","apply",">\n        }","8aROFHt","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","944025plNtjE","return (function() ","bind","replace","288addgJL","warn","value","resolution","682686MGzdoq","trace","setTexelSize","exception","setResolution","call","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","function *\\( *\\)","__proto__","986804ZGReYE","toneMapped","encodings_fragment","uniforms","error"];return(ee=function(){return n})()}!function(n,t){const e=oe,r=ee();for(;;)try{if(117027===parseInt(e(265))/1+-parseInt(e(270))/2+parseInt(e(274))/3*(-parseInt(e(267))/4)+parseInt(e(290))/5+-parseInt(e(298))/6+-parseInt(e(307))/7*(-parseInt(e(287))/8)+-parseInt(e(294))/9*(-parseInt(e(275))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[oe(285)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function oe(n,t){const e=ee();return(oe=function(n,t){return e[n-=264]})(n,t)}!function(){re(this,(function(){const n=oe,t=new RegExp(n(305)),e=new RegExp(n(289),"i"),r=se(n(288));t[n(282)](r+"chain")&&e[n(282)](r+"input")?se():r("0")}))()}();const ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ie(void 0,(function(){const n=oe;let t;try{t=Function(n(291)+n(277)+");")()}catch(o){t=window}const e=t.console=t[n(312)]||{},r=["log",n(295),"info",n(311),n(301),n(266),n(299)];for(let i=0;i<r[n(284)];i++){const t=ie.constructor[n(283)][n(292)](ie),o=r[i],a=e[o]||t;t[n(306)]=ie[n(292)](ie),t.toString=a.toString[n(292)](a),e[o]=t}}))();const ae=parseInt(F[te(293)](/\D+/g,""));class ce extends P{constructor(n=new C){const t=te;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(304)+t(ae>=154?273:309)+t(286),vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:O,depthWrite:!1,depthTest:!1}),this[t(308)]=!1,this[t(300)](n.x,n.y),this.kernel=new Float32Array([0,1,2,2,3])}[te(300)](n,t){const e=te;this[e(310)].texelSize[e(296)][e(280)](n,t),this[e(310)][e(281)][e(296)][e(280)](n,t)[e(272)](.5)}[te(302)](n){const t=te;this[t(310)][t(297)][t(296)][t(278)](n)}}function se(n){function t(n){const e=oe;if("string"==typeof n)return function(n){}[e(271)](e(264))[e(285)](e(268));1!==(""+n/n).length||n%20==0?function(){return!0}[e(271)](e(276)+"gger")[e(303)](e(269)):function(){return!1}[e(271)]("debugger").apply(e(279)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=pe,r=fe();for(;;)try{if(369057===-parseInt(e(299))/1+parseInt(e(312))/2*(-parseInt(e(314))/3)+parseInt(e(336))/4+parseInt(e(350))/5*(-parseInt(e(311))/6)+parseInt(e(343))/7+-parseInt(e(296))/8*(parseInt(e(317))/9)+parseInt(e(321))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(352)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ue(this,(function(){const n=pe,t=new RegExp(n(344)),e=new RegExp(n(313),"i"),r=he(n(327));t[n(302)](r+"chain")&&e[n(302)](r+"input")?he():r("0")}))()}();const le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[pe(352)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function fe(){const n=["render","stateObject","scene","setRenderTarget","__proto__","debu","902538uiURyu","function *\\( *\\)","convolutionMaterial","counter","camera","prototype","kernel","559490FtUBAN","depthTexture","apply","texture","renderTargetA","defines","278344syDmmo","value","USE_DEPTH","185263VBDTAN","bind","renderTargetB","test","screen",'{}.constructor("return this")( )',"table","depthToBlurRatioBias","toString","minDepthThreshold","uniforms","renderToScreen","24amlGjn","631234sRbiMy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6jfnENE","length","exception","99gnMpxo","console","inputBuffer","action","17851420SvgXMr","log","depthBuffer","error","setResolution","return (function() ","init","maxDepthThreshold","position","setAttribute","constructor","while (true) {}","gger","warn","info","407172lcCZvf"];return(fe=function(){return n})()}function pe(n,t){const e=fe();return(pe=function(n,t){return e[n-=293]})(n,t)}le(void 0,(function(){const n=pe,t=function(){const n=pe;let t;try{t=Function(n(326)+n(304)+");")()}catch(e){t=window}return t}(),e=t[n(318)]=t[n(318)]||{},r=[n(322),n(334),n(335),n(324),n(316),n(305),"trace"];for(let o=0;o<r.length;o++){const t=le.constructor[n(348)][n(300)](le),i=r[o],a=e[i]||t;t[n(341)]=le[n(300)](le),t[n(307)]=a[n(307)][n(300)](a),e[i]=t}}))();class de{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=pe;this[c(310)]=!1,this[c(294)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(301)]=this[c(294)].clone(),this[c(345)]=new ce,this.convolutionMaterial.setTexelSize(1/t,1/e),this[c(345)][c(325)](new C(t,e)),this[c(339)]=new u,this[c(347)]=new B,this[c(345)][c(309)][c(308)][c(297)]=r,this[c(345)][c(309)][c(328)][c(297)]=o,this.convolutionMaterial.uniforms.depthScale[c(297)]=i,this.convolutionMaterial.uniforms[c(306)][c(297)]=a,this[c(345)][c(295)][c(298)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new k;p.setAttribute(c(329),new U(s,3)),p[c(330)]("uv",new U(f,2)),this.screen=new l(p,this[c(345)]),this[c(303)].frustumCulled=!1,this[c(339)].add(this[c(303)])}render(n,t,e){const r=pe,o=this.scene,i=this.camera,a=this[r(294)],c=this[r(301)],s=this[r(345)],u=s.uniforms;u[r(323)][r(297)]=t[r(351)];const l=s[r(349)];let f,p,d,h=t;for(p=0,d=l[r(315)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(297)]=l[p],u[r(319)].value=h.texture,n[r(340)](f),n[r(337)](o,i),h=f;u[r(349)][r(297)]=l[p],u[r(319)].value=h[r(293)],n.setRenderTarget(this[r(310)]?null:e),n[r(337)](o,i)}}function he(n){function t(n){const e=pe;if("string"==typeof n)return function(n){}[e(331)](e(332))[e(352)](e(346));1!==(""+n/n)[e(315)]||n%20==0?function(){return!0}[e(331)](e(342)+e(333)).call(e(320)):function(){return!1}.constructor(e(342)+"gger").apply(e(338)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=ge;function me(){var n=["length","warn","defines","mixStrength","log","uniforms","_distortionMap","stateObject","while (true) {}","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","988551bNKlzZ","tDepth","value","_textureMatrix","_mixContrast","replace","maxDepthThreshold","_tDiffuseBlur","_mixBlur","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","gger","_distortion","init","_hasBlur","string","console","setValues","783626mvxQFy","toString","call","USE_UV","prototype","fragmentShader","_depthToBlurRatioBias","debu","_tDiffuse","#include <project_vertex>","vertexShader","1981660WmztoW","mixBlur","_depthScale",'{}.constructor("return this")( )',"2027246Rejpya","distortionMap","mirror","exception","return (function() ","apply","distortion","hasBlur","function *\\( *\\)","test","bind","tDiffuseBlur","depthScale","minDepthThreshold","action","textureMatrix","7321069NCkuJe","trace","12PrrgtS","input","depthToBlurRatioBias","constructor","10431408CZxbMp","mixContrast","_mirror","tDiffuse","_blurStrength","_minDepthThreshold","_tDepth","chain","2452684DRlGrK","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_maxDepthThreshold","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        "];return(me=function(){return n})()}function ge(n,t){var e=me();return(ge=function(n,t){return e[n-=102]})(n,t)}!function(n,t){for(var e=ge,r=me();;)try{if(523774===parseInt(e(110))/1+parseInt(e(125))/2+-parseInt(e(169))/3+parseInt(e(155))/4+-parseInt(e(121))/5*(-parseInt(e(143))/6)+-parseInt(e(141))/7+-parseInt(e(147))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var _e=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(130)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){_e(this,(function(){var n=ge,t=new RegExp(n(133)),e=new RegExp(n(178),"i"),r=be(n(105));t[n(134)](r+n(154))&&e[n(134)](r+n(144))?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(130)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){var n,t=ge;try{n=Function(t(129)+t(124)+");")()}catch(s){n=window}for(var e=n[t(108)]=n[t(108)]||{},r=[t(163),t(160),"info","error",t(128),t(102),t(142)],o=0;o<r[t(159)];o++){var i=ye[t(146)][t(114)][t(135)](ye),a=r[o],c=e[a]||i;i.__proto__=ye.bind(ye),i[t(111)]=c[t(111)].bind(c),e[a]=i}}))();class xe extends j{constructor(n={}){var t=ge;super(n),this[t(153)]={value:null},this[t(165)]={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this[t(172)]={value:null},this[t(106)]={value:!1},this[t(149)]={value:0},this[t(177)]={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this[t(104)]={value:1},this[t(173)]={value:1},this[t(109)](n)}onBeforeCompile(n){var t,e=ge;!(null==(t=n[e(161)])?void 0:t[e(113)])&&(n[e(161)][e(113)]=""),n[e(164)][e(132)]=this[e(106)],n[e(164)][e(150)]=this._tDiffuse,n[e(164)].tDepth=this._tDepth,n[e(164)][e(126)]=this[e(165)],n[e(164)][e(136)]=this[e(176)],n[e(164)].textureMatrix=this[e(172)],n[e(164)][e(127)]=this[e(149)],n[e(164)][e(122)]=this._mixBlur,n[e(164)].mixStrength=this[e(151)],n.uniforms.minDepthThreshold=this._minDepthThreshold,n[e(164)][e(175)]=this[e(157)],n[e(164)][e(137)]=this._depthScale,n.uniforms[e(145)]=this[e(116)],n[e(164)][e(131)]=this[e(104)],n[e(164)][e(148)]=this[e(173)],n[e(120)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[e(120)],n[e(120)]=n.vertexShader[e(174)](e(119),e(168)),n[e(115)]=e(158)+n[e(115)],n.fragmentShader=n[e(115)][e(174)]("#include <emissivemap_fragment>",e(156))}get tDiffuse(){return this[ge(118)].value}set[ve(150)](n){var t=ve;this[t(118)][t(171)]=n}get tDepth(){var n=ve;return this[n(153)][n(171)]}set[ve(170)](n){this[ve(153)].value=n}get distortionMap(){var n=ve;return this[n(165)][n(171)]}set[ve(126)](n){var t=ve;this[t(165)][t(171)]=n}get[ve(136)](){return this[ve(176)].value}set[ve(136)](n){var t=ve;this[t(176)][t(171)]=n}get textureMatrix(){return this._textureMatrix.value}set[ve(140)](n){var t=ve;this[t(172)][t(171)]=n}get hasBlur(){var n=ve;return this[n(106)][n(171)]}set[ve(132)](n){this[ve(106)].value=n}get[ve(127)](){var n=ve;return this[n(149)][n(171)]}set[ve(127)](n){var t=ve;this[t(149)][t(171)]=n}get mixBlur(){var n=ve;return this[n(177)][n(171)]}set[ve(122)](n){this[ve(177)].value=n}get[ve(162)](){var n=ve;return this[n(151)][n(171)]}set[ve(162)](n){this._blurStrength.value=n}get[ve(138)](){var n=ve;return this[n(152)][n(171)]}set[ve(138)](n){var t=ve;this[t(152)][t(171)]=n}get[ve(175)](){var n=ve;return this[n(157)][n(171)]}set[ve(175)](n){var t=ve;this[t(157)][t(171)]=n}get depthScale(){var n=ve;return this[n(123)][n(171)]}set depthScale(n){var t=ve;this[t(123)][t(171)]=n}get[ve(145)](){var n=ve;return this[n(116)][n(171)]}set[ve(145)](n){this[ve(116)].value=n}get[ve(131)](){var n=ve;return this._distortion[n(171)]}set[ve(131)](n){var t=ve;this._distortion[t(171)]=n}get[ve(148)](){return this[ve(173)].value}set[ve(148)](n){this._mixContrast.value=n}}function be(n){function t(n){var e=ge;if(typeof n===e(107))return function(n){}[e(146)](e(167))[e(130)]("counter");1!==(""+n/n)[e(159)]||n%20==0?function(){return!0}[e(146)](e(117)+"gger")[e(112)](e(139)):function(){return!1}[e(146)](e(117)+e(103))[e(130)](e(166)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=Se;!function(n,t){const e=Se,r=Te();for(;;)try{if(208858===parseInt(e(479))/1+-parseInt(e(468))/2+parseInt(e(442))/3*(-parseInt(e(402))/4)+-parseInt(e(439))/5*(-parseInt(e(472))/6)+-parseInt(e(433))/7*(parseInt(e(426))/8)+-parseInt(e(447))/9+-parseInt(e(484))/10*(-parseInt(e(481))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Se(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(n,t){const e=Te();return(Se=function(n,t){return e[n-=396]})(n,t)}!function(){we(this,(function(){const n=Se,t=new RegExp(n(492)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ae(n(416));t[n(483)](r+"chain")&&e[n(483)](r+n(406))?Ae():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=Se,t=function(){const n=Se;let t;try{t=Function(n(489)+n(401)+");")()}catch(e){t=window}return t}(),e=t[n(427)]=t[n(427)]||{},r=[n(482),n(431),"info",n(443),n(446),n(463),n(423)];for(let o=0;o<r[n(396)];o++){const t=Me[n(422)][n(469)][n(424)](Me),i=r[o],a=e[i]||t;t[n(444)]=Me[n(424)](Me),t[n(464)]=a[n(464)][n(424)](a),e[i]=t}}))();const Re=["texture-matrix","mirror",Ie(475),Ie(409),"t-diffuse-blur","has-blur","mix-strength",Ie(413),"max-depth-threshold",Ie(486),Ie(415),Ie(438),"distortionMap","mix-contrast",Ie(462),Ie(493),"defines-USE_DISTORTION"],Ee=tn({__name:Ie(490),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:R,extend:E}=V();E({MeshReflectorMaterial:xe});const T=_n(),D=_n(),P=_n(),z=_n(),C=J((()=>{const n=Se;return typeof f[n(410)]===n(477)?[f[n(410)],f.value]:f[n(410)]})),O=J((()=>C[r(410)][0]>0||C.value[1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};fn((()=>{var n;const o=r;null==(n=T[o(410)])||n[o(461)][o(412)]();const f={minFilter:I,magFilter:I,type:h};var y,x;T[o(410)]=new b(i[o(410)],i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(410)],i[o(410)],S,M)},t(y,e(x)))),D[o(410)]=new b(i[o(410)],i.value,f),P[o(410)]=new de({resolution:i[o(410)],width:C.value[0],height:C[o(410)][1],minDepthThreshold:a[o(410)],maxDepthThreshold:s.value,depthScale:u.value,depthToBlurRatioBias:l[o(410)]}),z.value={mirror:p,textureMatrix:F.textureMatrix,mixBlur:d,tDiffuse:T.value[o(461)],tDepth:T[o(410)].depthTexture,tDiffuseBlur:T.value.texture,hasBlur:O,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(410)],mixContrast:_,"defines-USE_BLUR":O[o(410)]?"":void 0,"defines-USE_DEPTH":u[o(410)]>0?"":void 0,"defines-USE_DISTORTION":g[o(410)]?"":void 0}}));const B=_n(),{onLoop:k}=q();k((()=>{var n;const t=r;if(!(B.value&&R[t(410)]&&T[t(410)]&&y[t(410)]))return;const e=function(n,t){const e=Se;let r;return n[e(488)]((n=>{const o=e;n.isMesh&&n[o(466)]&&n[o(466)][o(418)]===t&&(r=n)})),r}(x.value,B[t(410)][t(418)]);if(!e)return;e[t(454)]=!1;const i=R.value.xr[t(457)],a=R[t(410)].shadowMap[t(470)];(function(n){var t,e;const r=Se;if(F[r(398)][r(429)](n[r(407)]),F[r(450)][r(429)](null==(t=y.value)?void 0:t[r(407)]),F[r(430)][r(459)](n[r(407)]),F[r(455)][r(448)](0,0,1),F.normal[r(441)](F[r(430)]),F[r(398)][r(434)](F.normal,o[r(473)]),F[r(456)][r(491)](F[r(398)],F.cameraWorldPosition),F[r(456)].dot(F.normal)>0)return;F[r(456)][r(445)](F[r(455)])[r(425)](),F.view[r(420)](F.reflectorWorldPosition),F[r(430)].extractRotation(null==(e=y.value)?void 0:e[r(407)]),F[r(428)].set(0,0,-1),F[r(428)].applyMatrix4(F[r(430)]),F[r(428)][r(420)](F[r(450)]),F[r(440)][r(491)](F.reflectorWorldPosition,F[r(428)]),F[r(440)][r(445)](F[r(455)])[r(425)](),F[r(440)][r(420)](F[r(398)]),F[r(419)][r(421)].copy(F[r(456)]),F[r(419)].up[r(448)](0,1,0),F[r(419)].up[r(441)](F[r(430)]),F[r(419)].up[r(445)](F[r(455)]),F[r(419)][r(405)](F[r(440)]),F[r(419)][r(453)]=(null==y?void 0:y[r(410)])[r(453)],F.virtualCamera[r(452)](),F[r(419)][r(437)][r(480)]((null==y?void 0:y.value)[r(437)]),F[r(397)][r(448)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[r(397)].multiply(F[r(419)][r(437)]),F[r(397)][r(471)](F[r(419)][r(408)]),F[r(397)][r(471)](n[r(407)]),F[r(436)][r(485)](F[r(455)],F[r(398)]),F[r(436)].applyMatrix4(F[r(419)].matrixWorldInverse),F.clipPlane.set(F[r(436)][r(455)].x,F[r(436)][r(455)].y,F[r(436)][r(455)].z,F.reflectorPlane[r(404)]);const i=F[r(419)][r(437)];F.q.x=(Math[r(417)](F[r(403)].x)+i[r(478)][8])/i[r(478)][0],F.q.y=(Math[r(417)](F[r(403)].y)+i.elements[9])/i[r(478)][5],F.q.z=-1,F.q.w=(1+i[r(478)][10])/i.elements[14],F[r(403)][r(411)](2/F.clipPlane.dot(F.q)),i[r(478)][2]=F.clipPlane.x,i[r(478)][6]=F[r(403)].y,i[r(478)][10]=F.clipPlane.z+1,i[r(478)][14]=F.clipPlane.w})(e),R[t(410)][t(449)][t(470)]=!1,R[t(410)].setRenderTarget(T[t(410)]),R[t(410)][t(399)]||R[t(410)][t(467)](),R[t(410)].render(x[t(410)],F.virtualCamera),null==(n=null==P?void 0:P[t(410)])||n[t(432)](R.value,T.value,D[t(410)]),R[t(410)].xr[t(457)]=i,R.value[t(449)][t(470)]=a,e[t(454)]=!0,R[t(410)][t(487)](null)}));const U=bn(),j=J((()=>{const n=r,t={};return Object.assign(t,o),Object[n(451)](t,U.value),t}));return gn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(410)])||n[e(412)](),null==(t=null==D?void 0:D[e(410)])||t[e(412)]()})),(n,t)=>{var e,o,i;const c=r;return an(),cn(c(474),In({key:"key"+z[c(410)]["defines-USE_BLUR"]+z[c(410)][c(493)]+z[c(410)][c(400)],ref_key:"materialRef",ref:B},j[c(410)],{"texture-matrix":F[c(397)],mirror:nn(p),"t-diffuse":null==(e=T[c(410)])?void 0:e[c(461)],"t-depth":null==(o=T.value)?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(410)])?void 0:i[c(461)],"has-blur":O[c(410)],"mix-strength":nn(v),"min-depth-threshold":nn(a),"max-depth-threshold":nn(s),"depth-scale":nn(u),"depth-to-blur-ratio-bias":nn(l),distortion:nn(m),distortionMap:nn(g),"mix-contrast":nn(_),"defines-USE_BLUR":O.value?"":void 0,"defines-USE_DEPTH":nn(u)>0?"":void 0,"defines-USE_DISTORTION":nn(g)?"":void 0}),null,16,Re)}}});function Ae(n){function t(n){const e=Se;if(typeof n===e(458))return function(n){}[e(422)]("while (true) {}")[e(476)]("counter");1!==(""+n/n)[e(396)]||n%20==0?function(){return!0}[e(422)](e(435)+"gger")[e(460)]("action"):function(){return!1}.constructor(e(435)+e(414)).apply(e(465)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Te(){const n=["clipPlane","constant","lookAt","input","matrixWorld","matrixWorldInverse","t-depth","value","multiplyScalar","dispose","min-depth-threshold","gger","depth-to-blur-ratio-bias","init","sign","uuid","virtualCamera","add","position","constructor","trace","bind","negate","80MqzAIA","console","lookAtPosition","setFromMatrixPosition","rotationMatrix","warn","render","251608ewzMnM","addScaledVector","debu","reflectorPlane","projectionMatrix","distortion","405TBTylE","target","applyMatrix4","18588BeFpzz","error","__proto__","reflect","exception","481635wLuapS","set","shadowMap","cameraWorldPosition","assign","updateMatrixWorld","far","visible","normal","view","enabled","string","extractRotation","call","texture","defines-USE_BLUR","table","toString","stateObject","material","clear","190428zUkprH","prototype","autoUpdate","multiply","648ZpkuqW","reflectorOffset","TresMeshReflectorMaterial","t-diffuse","apply","number","elements","226212DXvOHU","copy","11OHxuZS","log","test","5873990IUXinx","setFromNormalAndCoplanarPoint","depth-scale","setRenderTarget","traverse","return (function() ","index","subVectors","function *\\( *\\)","defines-USE_DEPTH","length","textureMatrix","reflectorWorldPosition","autoClear","defines-USE_DISTORTION",'{}.constructor("return this")( )',"68Hbmpuq"];return(Te=function(){return n})()}!function(n,t){const e=Pe,r=Oe();for(;;)try{if(546205===-parseInt(e(462))/1*(parseInt(e(454))/2)+parseInt(e(450))/3*(-parseInt(e(453))/4)+-parseInt(e(438))/5+-parseInt(e(439))/6+parseInt(e(464))/7+parseInt(e(463))/8*(-parseInt(e(467))/9)+parseInt(e(432))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(446)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=Oe();return(Pe=function(n,t){return e[n-=432]})(n,t)}!function(){De(this,(function(){const n=Pe,t=new RegExp(n(468)),e=new RegExp(n(443),"i"),r=Ce(n(472));t[n(470)](r+"chain")&&e[n(470)](r+n(447))?Ce():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ce(n){function t(n){const e=Pe;if(typeof n===e(435))return function(n){}[e(452)](e(458)).apply("counter");1!==(""+n/n)[e(448)]||n%20==0?function(){return!0}[e(452)]("debu"+e(445))[e(456)]("action"):function(){return!1}[e(452)](e(471)+e(445)).apply(e(437)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Oe(){const n=["while (true) {}","CubeCamera","bind","return (function() ","145693WFGfGD","4091592RmqqRU","4411435CnLQPB","table","background","9JfOYvq","function *\\( *\\)","warn","test","debu","init","prototype","log","25264500GRWRTE","info","__proto__","string","dispose","stateObject","1298555ierway","6277224ZZmMdV","fog","toString","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","error","gger","apply","input","length",'{}.constructor("return this")( )',"3lebIYV","value","constructor","258484NxNbxD","10gTWnHd","trace","call","type"];return(Oe=function(){return n})()}ze(void 0,(function(){const n=Pe;let t;try{t=Function(n(461)+n(449)+");")()}catch(o){t=window}const e=t[n(442)]=t[n(442)]||{},r=[n(474),n(469),n(433),n(444),"exception",n(465),n(455)];for(let i=0;i<r[n(448)];i++){const t=ze[n(452)][n(473)].bind(ze),o=r[i],a=e[o]||t;t[n(434)]=ze[n(460)](ze),t[n(441)]=a[n(441)][n(460)](a),e[o]=t}}))();const Fe=Ne;!function(n,t){const e=Ne,r=Ue();for(;;)try{if(617720===parseInt(e(265))/1+-parseInt(e(236))/2*(-parseInt(e(256))/3)+-parseInt(e(273))/4+-parseInt(e(260))/5*(-parseInt(e(249))/6)+-parseInt(e(251))/7*(-parseInt(e(226))/8)+parseInt(e(258))/9*(parseInt(e(252))/10)+-parseInt(e(232))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(262)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Ne,t=new RegExp(n(237)),e=new RegExp(n(253),"i"),r=He(n(234));t[n(275)](r+n(243))&&e.test(r+n(254))?He():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ne(262)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ue(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","info","10098ggWped","stateObject","9xVsyJy","default","79760HDILCZ","console","apply","constructor",'{}.constructor("return this")( )',"940481FtAzHa","primitive","counter","debu","index","visible","trace","length","130128yzPoOK","object","test","frames","1656VYMKWn","toString","return (function() ","resolution","log","envMap","26678905elXnvh","value","init","gger","54DPAHLt","function *\\( *\\)","fog","TresGroup","while (true) {}","error","prototype","chain","rgRef","far","action","bind","string","420NnHxKy","$slots","20223uXMLof","3295810WtxJuW"];return(Ue=function(){return n})()}ke(void 0,(function(){const n=Ne,t=function(){const n=Ne;let t;try{t=Function(n(228)+n(264)+");")()}catch(e){t=window}return t}(),e=t[n(261)]=t[n(261)]||{},r=[n(230),"warn",n(255),n(241),"exception","table",n(271)];for(let o=0;o<r[n(272)];o++){const t=ke[n(263)][n(242)].bind(ke),i=r[o],a=e[i]||t;t.__proto__=ke[n(247)](ke),t.toString=a[n(227)].bind(a),e[i]=t}}))();const je=[Fe(274)];function Ne(n,t){const e=Ue();return(Ne=function(n,t){return e[n-=226]})(n,t)}const Le=tn({__name:Fe(269),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Fe,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=X(null),s=X(n),u=X(t),l=X(e),f=X(null);let p,d;return Q((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(451)])||t[e(436)](),c[e(451)]=new v(n.value),c[e(451)].texture[e(457)]=h}),{immediate:!0}),Q([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f.value=new(D[r(459)])(n,t,e))}),{immediate:!0}),gn((()=>{var n;const t=Pe;null==(n=c[t(451)])||n[t(436)]()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a[t(451)][t(440)],d=a[t(451)].background,a[t(451)][t(466)]=r||d,a[t(451)][t(440)]=o||p,null==(n=f[t(451)])||n.update(i[t(451)],a[t(451)]),a[t(451)][t(440)]=p,a.value[t(466)]=d}}}({resolution:o[r(229)],near:o.near,far:o[r(245)],envMap:o[r(231)],fog:o[r(238)]}),{onBeforeLoop:s}=q();let u=0;const l=X(null);return s((()=>{const n=r;l[n(233)]&&(o[n(276)]===1/0||u<o[n(276)])&&(l[n(233)][n(270)]=!1,c(),l[n(233)][n(270)]=!0,u++)})),t({texture:null==(e=i[r(233)])?void 0:e.texture}),(n,t)=>{const e=r;return an(),cn(e(239),null,[hn(e(266),{object:nn(a)},null,8,je),hn(e(239),{ref_key:e(244),ref:l},[sn(n[e(250)],e(259))],512)])}}});function He(n){function t(n){const e=Ne;if(typeof n===e(248))return function(n){}[e(263)](e(240))[e(262)](e(267));1!==(""+n/n)[e(272)]||n%20==0?function(){return!0}.constructor(e(268)+e(235)).call(e(246)):function(){return!1}[e(263)]("debu"+e(235)).apply(e(257)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$e,r=Ge();for(;;)try{if(421497===parseInt(e(489))/1+parseInt(e(453))/2+-parseInt(e(487))/3+parseInt(e(486))/4+-parseInt(e(479))/5*(-parseInt(e(481))/6)+parseInt(e(465))/7*(-parseInt(e(462))/8)+-parseInt(e(477))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$e(461)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["key","init","entries","trace","clone","1010440HvFInu","counter","MathUtils","__proto__","reduce","call","chain","assign","apply","8jNaBuJ","error","length","5720225rCvNNW","debu","info","constructor","prototype","stateObject","console","warn","ShaderMaterial","exception","action","forEach","691578FViILP","defineProperty","3635795taSuLS","test","6xWCuNm","string","log","gger","bind","1189540RYffhD","2286342rHcwZk","uniforms","547864soViXd","input","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Ge=function(){return n})()}!function(){Ze(this,(function(){const n=$e,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(447),"i"),r=qe(n(449));t[n(480)](r+n(459))&&e[n(480)](r+n(445))?qe():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t,e,r){const o=$e,i=class extends D[o(473)]{constructor(i={}){const a=o,s=Object[a(450)](n);super({uniforms:s[a(457)](((n,[t,e])=>{const r=G[a(452)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[a(448)]="",s[a(476)]((([n])=>Object[a(478)](this,n,{get:()=>this.uniforms[n].value,set:t=>this[a(488)][n].value=t}))),Object[a(460)](this,i),r&&r(this)}};return i.key=D[o(455)].generateUUID(),i}function $e(n,t){const e=Ge();return($e=function(n,t){return e[n-=445]})(n,t)}function qe(n){function t(n){const e=$e;if(typeof n===e(482))return function(n){}[e(468)]("while (true) {}")[e(461)](e(454));1!==(""+n/n)[e(464)]||n%20==0?function(){return!0}[e(468)](e(466)+e(484))[e(458)](e(475)):function(){return!1}[e(468)](e(466)+e(484))[e(461)](e(470)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=$e;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(471)]||{},r=[n(483),n(472),n(467),n(463),n(474),"table",n(451)];for(let i=0;i<r.length;i++){const t=We[n(468)][n(469)][n(485)](We),o=r[i],a=e[o]||t;t[n(456)]=We[n(485)](We),t[n(446)]=a[n(446)][n(485)](a),e[o]=t}}))();var Ye=Ke;function Ke(n,t){var e=Qe();return(Ke=function(n,t){return e[n-=236]})(n,t)}!function(n,t){for(var e=Ke,r=Qe();;)try{if(425122===parseInt(e(409))/1*(parseInt(e(250))/2)+-parseInt(e(387))/3+-parseInt(e(244))/4*(parseInt(e(386))/5)+parseInt(e(260))/6+-parseInt(e(404))/7+-parseInt(e(266))/8+parseInt(e(254))/9*(parseInt(e(312))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ke(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(){var n=["5560198nylqXL","init","normal","MeshDepthMaterial","console","132CVEGwK","includes","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","_getCacheHash","undefined","clearcoatRoughness","\n    varying mat4 csm_internal_vModelViewMatrix;\n","csm_ClearcoatNormal","ShadowMaterial","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","construct","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","csm_DepthAlpha","pointSize","metalness","\n    gl_Position = ","CustomShaderMaterial does not support RawShaderMaterial","getOwnPropertySymbols","concat","\n    #include <dithering_fragment>\n    gl_FragColor  = ","clearcoatNormal","();\n            // #_CSM_#\n          ","onBeforeCompile","MeshLambertMaterial","fragmentShader","length","8gryDfL",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","generateUUID","key","Set","get","3574WwtPsu","#define IS_VERTEX;\n","while (true) {}","gger","9mcPCfa","__proto__","message","csm_Normal","void ","string","4128486YjKBKY","ShaderChunk","\n    vec3 transformed = ","propertyIsEnumerable","iterator","setPrototypeOf","1477680TQRxOf","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","MeshMatcapMaterial","MeshBasicMaterial","entries","constructor","counter","__csm","is not a constructor","silent","diffuse","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","_generateMaterial","keys","Derived constructors may only return object or undefined","input","toUpperCase","\n    vec3 totalEmissiveRadiance = "," - (dot(","lastIndexOf","function *\\( *\\)",". Shader cannot compile.","isAlreadyExtended","push","replace","Map","toPrimitive","warn","this hasn't been initialised - super() hasn't been called","positionRaw","_getPatchMapForMaterial","MeshPhysicalMaterial",";\n  ","\n    #include <color_fragment>\n    diffuseColor = ","\n    gl_PointSize = ","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\n    \n            ","isArray","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","error","\n            ","getPrototypeOf","chain","prototype","value","table","15973610yDWVNh","set","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","defineProperty","_getMaterialDefine","trace","patchMap","name","bump"," );\n    ",";\n    ","Super expression must either be null or a function","exception","uniforms","enumerable","forEach","emissive","clearcoat","csm_AO","assign","\n            \n            void main() {\n          ","needsUpdate","debu",", 1.0 );\n  ","info","csm_main_","cacheHash","MeshStandardMaterial","void main() {","MeshNormalMaterial","clone","writable","slice","substring","roughness","toString","fragColor","symbol","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","Object","MeshPhongMaterial","MathUtils","RawShaderMaterial","function","\n    gl_FragColor = ","#define IS_","instanceID","valueOf","// #_CSM_#",'{}.constructor("return this")( )',"csm_FragColor","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","apply","_patchShader","\n    vec4 csm_internal_positionUnprojected = ","test","filter","material.clearcoatRoughness = ","position","void main()","return","action","call","baseMaterial","return (function() ","depthAlpha","material.clearcoat = ","@@toPrimitive must return a primitive value.","Material","getOwnPropertyDescriptors","create","sham","cacheKey","csm_Roughness","1224380wrFSxL","1882284QtOArm","csm_Bump","csm_ClearcoatRoughness","defineProperties","default","csm_Emissive","csm_DiffuseColor","type","Cannot call a class as a function","indexOf","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","trim",'". Shader cannot compile.',"lights_physical_fragment","vertexShader","bind","object"];return(Qe=function(){return n})()}!function(){Xe(this,(function(){var n=Ke,t=new RegExp(n(286)),e=new RegExp(n(422),"i"),r=Dr(n(405));t[n(367)](r+n(308))&&e[n(367)](r+n(281))?Dr():r("0")}))()}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ke(364)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=Ke,e=function(n,t){var e=Ke;if(typeof n!==e(403)||null===n)return n;var r=n[Symbol[e(292)]];if(void 0!==r){var o=r[e(374)](n,t||e(391));if(typeof o!==e(403))return o;throw new TypeError(e(379))}return(t===e(259)?String:Number)(n)}(n,t(259));return typeof e===t(349)?e:String(e)}function tr(n,t,e){return(t=nr(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=Ke,r=Object.keys(n);if(Object[e(428)]){var o=Object[e(428)](n);t&&(o=o[e(368)]((function(t){var r=e;return Object.getOwnPropertyDescriptor(n,t)[r(326)]}))),r.push[e(364)](r,o)}return r}function rr(n){for(var t=Ke,e=1;e<arguments[t(243)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0).forEach((function(t){tr(n,t,r[t])})):Object[t(381)]?Object[t(390)](n,Object[t(381)](r)):er(Object(r))[t(327)]((function(e){Object[t(315)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function or(n,t){var e=Ke;if(null==n)return{};var r,o,i=function(n,t){var e=Ke;if(null==n)return{};var r,o,i={},a=Object.keys(n);for(o=0;o<a[e(243)];o++)r=a[o],t[e(396)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(428)]){var a=Object[e(428)](n);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object[e(309)][e(263)][e(374)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=Ke;(null==t||t>n[e(243)])&&(t=n[e(243)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array[Ke(303)](n))return n}(n)||function(n,t){var e=Ke,r=null==n?null:e(414)!=typeof Symbol&&n[Symbol[e(264)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(374)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(374)](r)).done)&&(s[e(289)](o[e(310)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(372)]&&(c=r[e(372)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Ke;if(n){if("string"==typeof n)return ir(n,t);var r=Object.prototype.toString.call(n)[e(344)](8,-1);return r===e(351)&&n[e(271)]&&(r=n[e(271)][e(319)]),r===e(291)||r===e(248)?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(367)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(n,t){for(var e=Ke,r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,e(310)in o&&(o[e(343)]=!0),Object.defineProperty(n,nr(o[e(247)]),o)}}function sr(n){if(void 0===n)throw new ReferenceError(Ke(294));return n}function ur(n,t){var e=Ke;return(ur=Object[e(265)]?Object.setPrototypeOf.bind():function(n,t){return n[e(255)]=t,n})(n,t)}function lr(n){var t=Ke;return(lr=Object[t(265)]?Object[t(307)][t(402)]():function(n){var e=t;return n[e(255)]||Object[e(307)](n)})(n)}function fr(n){var t=function(){var n=Ke;if(typeof Reflect===n(414)||!Reflect[n(421)])return!1;if(Reflect.construct[n(383)])return!1;if(typeof Proxy===n(355))return!0;try{return Boolean.prototype[n(359)][n(374)](Reflect[n(421)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Ke,o=lr(n);if(t){var i=lr(this)[r(271)];e=Reflect[r(421)](o,arguments,i)}else e=o[r(364)](this,arguments);return function(n,t){var e=Ke;if(t&&(typeof t===e(403)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(e(280));return sr(n)}(this,e)}}Je(void 0,(function(){for(var n=Ke,t=function(){var n,t=Ke;try{n=Function(t(376)+t(361)+");")()}catch(e){n=window}return n}(),e=t.console=t[n(408)]||{},r=["log",n(293),n(336),n(305),n(324),n(311),n(317)],o=0;o<r.length;o++){var i=Je[n(271)][n(309)][n(402)](Je),a=r[o],c=e[a]||i;i[n(255)]=Je.bind(Je),i.toString=c.toString[n(402)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:Ye(393),normal:Ye(257),roughness:Ye(385),metalness:"csm_Metalness",emissive:Ye(392),ao:Ye(330),bump:Ye(388),clearcoat:"csm_Clearcoat",clearcoatRoughness:Ye(389),clearcoatNormal:Ye(417),pointSize:"csm_PointSize",fragColor:Ye(362),depthAlpha:Ye(423),position:"csm_Position",positionRaw:"csm_PositionRaw"},mr=(tr(pr={},""[Ye(236)](vr[Ye(370)]),"*"),tr(pr,"".concat(vr[Ye(295)]),"*"),tr(pr,""[Ye(236)](vr[Ye(406)]),"*"),tr(pr,"".concat(vr[Ye(424)]),["PointsMaterial"]),tr(pr,"".concat(vr[Ye(276)]),"*"),tr(pr,""[Ye(236)](vr[Ye(348)]),"*"),tr(pr,""[Ye(236)](vr[Ye(328)]),[Ye(339),"MeshPhysicalMaterial"]),tr(pr,""[Ye(236)](vr[Ye(346)]),[Ye(339),Ye(297)]),tr(pr,""[Ye(236)](vr[Ye(425)]),[Ye(339),Ye(297)]),tr(pr,"".concat(vr.ao),[Ye(339),Ye(297),Ye(269),Ye(241),Ye(352),"MeshToonMaterial"]),tr(pr,"".concat(vr[Ye(320)]),["MeshLambertMaterial",Ye(268),Ye(341),Ye(352),Ye(297),Ye(339),"MeshToonMaterial",Ye(418)]),tr(pr,""[Ye(236)](vr[Ye(377)]),[Ye(407)]),tr(pr,""[Ye(236)](vr.clearcoat),["MeshPhysicalMaterial"]),tr(pr,"".concat(vr[Ye(415)]),[Ye(297)]),tr(pr,""[Ye(236)](vr[Ye(238)]),["MeshPhysicalMaterial"]),pr),gr={"#include <lights_physical_fragment>":D[Ye(261)][Ye(400)]},_r=(tr(dr={},""[Ye(236)](vr[Ye(406)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[Ye(236)](vr.normal,Ye(245))}),tr(dr,""[Ye(236)](vr[Ye(370)]),{"#include <begin_vertex>":Ye(262)[Ye(236)](vr[Ye(370)],Ye(298))}),tr(dr,""[Ye(236)](vr[Ye(295)]),{"#include <begin_vertex>":Ye(366)[Ye(236)](vr[Ye(295)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),tr(dr,""[Ye(236)](vr[Ye(424)]),{"gl_PointSize = size;":Ye(300).concat(vr.pointSize,Ye(322))}),tr(dr,""[Ye(236)](vr[Ye(276)]),{"#include <color_fragment>":Ye(299)[Ye(236)](vr[Ye(276)],Ye(298))}),tr(dr,""[Ye(236)](vr[Ye(348)]),{"#include <dithering_fragment>":Ye(237)[Ye(236)](vr[Ye(348)],Ye(298))}),tr(dr,""[Ye(236)](vr[Ye(328)]),{"vec3 totalEmissiveRadiance = emissive;":Ye(283)[Ye(236)](vr[Ye(328)],Ye(322))}),tr(dr,"".concat(vr[Ye(346)]),{"#include <roughnessmap_fragment>":Ye(412).concat(vr[Ye(346)],Ye(322))}),tr(dr,""[Ye(236)](vr[Ye(425)]),{"#include <metalnessmap_fragment>":Ye(411)[Ye(236)](vr[Ye(425)],Ye(322))}),tr(dr,"".concat(vr.ao),{"#include <aomap_fragment>":Ye(419)[Ye(236)](vr.ao,";\n    ")}),tr(dr,""[Ye(236)](vr[Ye(320)]),{"#include <normal_fragment_maps>":Ye(267)[Ye(236)](vr[Ye(320)],Ye(284))[Ye(236)](vr.bump,Ye(420))}),tr(dr,""[Ye(236)](vr[Ye(377)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[Ye(236)](vr.depthAlpha,Ye(321)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(314)[Ye(236)](vr[Ye(377)],Ye(322))}),tr(dr,""[Ye(236)](vr[Ye(329)]),{"material.clearcoat = clearcoat;":Ye(378)[Ye(236)](vr[Ye(329)],";")}),tr(dr,""[Ye(236)](vr[Ye(415)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(369)[Ye(236)](vr[Ye(415)],";")}),tr(dr,""[Ye(236)](vr[Ye(238)]),{"#include <clearcoat_normal_fragment_begin>":Ye(301)}),dr),yr=(tr(hr={},""[Ye(236)](vr[Ye(370)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(304)[Ye(236)](vr[Ye(370)],Ye(335))}),tr(hr,"".concat(vr[Ye(295)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(426)[Ye(236)](vr[Ye(370)],";\n  ")}),tr(hr,""[Ye(236)](vr[Ye(276)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(356).concat(vr[Ye(276)],";\n  ")}),tr(hr,"".concat(vr[Ye(348)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(356).concat(vr[Ye(348)],Ye(298))}),hr),xr={clearcoat:[vr[Ye(329)],vr[Ye(238)],vr[Ye(415)]]},br=Ye(397),Ir=Ye(350),wr=Ye(416),Sr=[Ye(375),Ye(242),"vertexShader",Ye(325),Ye(318),Ye(384),"silent"],Mr=function(n,t,e){return n.split(t).join(e)},Rr=function(n,t){var e,r=Ye;return new RegExp("\\b".concat((e=t,e[Ye(290)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(367)](n)};function Er(n){return n?n[Ye(290)](/\s/g,""):void 0}function Ar(n){return n[Ye(290)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Tr=function(n){var t=Ye;!function(n,t){var e=Ke;if("function"!=typeof t&&null!==t)throw new TypeError(e(323));n[e(309)]=Object[e(382)](t&&t[e(309)],{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=Ke,u=n.baseMaterial,l=n[s(242)],f=n.vertexShader,p=n[s(325)],d=n.patchMap,h=n[s(384)],v=n[s(275)],m=or(n,Sr);if(function(n,t){if(!(n instanceof t))throw new TypeError(Ke(395))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(256)][t(396)](t(274))>=0)return!1}return!0}(u)?(e=u,Object[s(331)](e,m)):e=new u(m),e.type===s(354))throw new Error(s(427));(function(n,t){var e=Ye;e(243),Object.assign(n,t);var r=Object.getPrototypeOf(t);Object[e(270)](Object.getOwnPropertyDescriptors(r))[e(368)]((function(n){var t=e,r=typeof n[1][t(249)]===t(355),o=typeof n[1][t(313)]===t(355),i=typeof n[1].value===t(355),a=n[0]===t(271);return(r||o||i)&&!a})).forEach((function(t){var r=e;typeof n[t[0]]!==r(355)&&Object[r(315)](n,t[0],t[1])}))})(sr(t=a[s(374)](this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(353)][s(246)](),type:e[s(394)],isAlreadyExtended:(r=e.onBeforeCompile,o=Ye,i=r[o(347)]()[o(398)](),!(0===i[o(345)](i[o(396)]("{")+1,i[o(285)]("}"))[o(398)]()[o(243)])),cacheHash:"",silent:v},t[s(325)]=rr(rr({},t.uniforms||{}),p||{});var g=t[s(273)],_=g[s(242)],y=g[s(401)],x=t[s(325)];return t.__csm[s(338)]=t._getCacheHash(),t._generateMaterial(_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=Ke,t=arguments[n(243)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(325)]=t[n(325)]||this.uniforms,Object[n(331)](this[n(273)],t);var e=this[n(273)],r=e[n(242)],o=e[n(401)],i=this.uniforms,a=this[n(413)]();this[n(273)][n(338)]=a,this[n(278)](r,o,i)}},{key:t(342),value:function(){var n=t,e={baseMaterial:this.__csm[n(375)],fragmentShader:this[n(273)][n(242)],vertexShader:this[n(273)][n(401)],uniforms:this.uniforms,silent:this[n(273)][n(275)],patchMap:this[n(273)][n(318)],cacheKey:this[n(273)][n(384)]},r=new this.constructor(e);return Object[n(331)](this,r),r}},{key:t(413),value:function(){var n=t,e=this[n(273)],r=e[n(242)],o=e[n(401)],i=this[n(325)],a=[Er(r),Er(o),i][n(368)]((function(n){return void 0!==n}));return a[n(243)]>0?Rn(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(325)]=r||{},this.customProgramCacheKey=function(){var n=o;return i[n(273)][n(338)]};var a=function(t){var r=o;try{var a=i[r(316)]();if(n){var c=i[r(365)](Ar(n),t[r(242)],!0);t.fragmentShader=a+c}if(e){var s=i[r(365)](Ar(e),t[r(401)]);t[r(401)]=r(251)+s,t[r(401)]=a+t[r(401)]}t[r(325)]=rr(rr({},t[r(325)]),i[r(325)]),i[r(325)]=t.uniforms}catch(u){console[r(305)](u)}};if(this[o(273)][o(288)]){var c=this.onBeforeCompile;this[o(240)]=function(n,t){c(n,t),a(n)}}else this[o(240)]=a;this[o(333)]=!0}},{key:t(365),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(296)]()),this.__csm.patchMap);Object[o(270)](xr)[o(327)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1].find((function(t){return Rr(n,t)}));if(c&&!i[a])throw new Error('CSM: Property "'[e(236)](a,'" is required to use output "').concat(c,e(399)))})),Object[o(270)](gr)[o(327)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Mr(a,e,r)})),Object[o(279)](c).forEach((function(t){var e=o;Object.keys(c[t])[e(327)]((function(r){var o=e,s=mr[t],u=i[o(273)][o(394)];if("*"===t||Rr(n,t)){if(!(!s||Array.isArray(s)&&s[o(410)](u)||"*"===s))throw new Error("CSM: "[o(236)](t," is not available in ")[o(236)](u,o(287)));a=Mr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(337)+this[o(273)][o(358)][o(290)](/-/g,"_"),h=n[o(290)](/void\s+main\s*\(\s*\)/g,o(258)[o(236)](d,"()")),v=n.includes(o(371)),m=a[o(410)](o(360));return v&&(m&&this.__csm[o(288)]?(a=a.replace(o(340),o(306)[o(236)](h,o(332))),s=a,u="// #_CSM_#",l=o(306).concat(d,o(239)),p=s[(f=Ye)(285)](u),a=-1===p?s:s.substring(0,p)+l+s[f(345)](p+u[f(243)])):a=a[o(290)](o(340),"\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              "[o(236)](r?wr:"\n    varying mat4 csm_internal_vModelViewMatrix;\n","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ")[o(236)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n",o(302))[o(236)](h,o(363))[o(236)](br,o(277)).concat(r?"\n    \n":Ir,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(236)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(316),value:function(){var n=t,e=this.__csm.type;return e?n(357)[n(236)](e[n(282)](),";\n"):"#define IS_UNKNOWN;\n"}},{key:t(296),value:function(){var n=t;return"ShaderMaterial"===this[n(273)][n(394)]?yr:_r}}],i=Ke,r&&cr(e[i(309)],r),o&&cr(e,o),Object[i(315)](e,"prototype",{writable:!1}),c}(D[Ye(380)]);function Dr(n){function t(n){var e=Ke;if(typeof n===e(259))return function(n){}[e(271)](e(252)).apply(e(272));1!==(""+n/n)[e(243)]||n%20==0?function(){return!0}.constructor(e(334)+e(253))[e(374)](e(373)):function(){return!1}.constructor("debugger")[e(364)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Br;function zr(){const n=["error","964142EZWNfE","constructor","exception","call","info","955966uGaFIP","clearcoatRoughness","string","color","debu","console","test","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","return (function() ","init","input","1588278VgjBZR","550026DqtVkQ","1044272sbDowh","log","bind","toString","metalness",'{}.constructor("return this")( )',"prototype","warn","index","action","14RdftGs","\n\t\t\t","#ff00fc","counter","__proto__","2939256wZGgFD","apply","roughness","stateObject","clearcoat","\n      ","1389780NzxIzK","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","trace","length","setStyle"];return(zr=function(){return n})()}!function(n,t){const e=Br,r=zr();for(;;)try{if(504561===parseInt(e(372))/1+parseInt(e(367))/2+-parseInt(e(383))/3+-parseInt(e(400))/4+parseInt(e(406))/5+parseInt(e(384))/6*(parseInt(e(395))/7)+-parseInt(e(385))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cr(this,(function(){const n=Br,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(361),"i"),r=Ur(n(381));t[n(378)](r+"chain")&&e[n(378)](r+n(382))?Ur():r("0")}))()}();const Or=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Or(void 0,(function(){const n=Br,t=function(){const n=Br;let t;try{t=Function(n(380)+n(390)+");")()}catch(e){t=window}return t}(),e=t[n(377)]=t[n(377)]||{},r=[n(386),n(392),n(371),n(366),n(369),"table",n(363)];for(let o=0;o<r[n(364)];o++){const t=Or.constructor[n(391)][n(387)](Or),i=r[o],a=e[i]||t;t[n(399)]=Or[n(387)](Or),t[n(388)]=a[n(388)][n(387)](a),e[i]=t}}))();const Fr=["object"];function Br(n,t){const e=zr();return(Br=function(n,t){return e[n-=361]})(n,t)}const kr=tn({__name:Pr(393),props:{color:{default:Pr(397)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:W,metalness:e[t(389)],roughness:e[t(402)],clearcoat:e[t(404)],clearcoatRoughness:e[t(373)],color:e[t(375)],vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(396)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(405)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(379)},o=new Tr(r);return fn((()=>{const n=t;o.color[n(365)](e[n(375)]),o[n(389)]=e.metalness,o.roughness=e[n(402)],o[n(404)]=e[n(404)],o[n(373)]=e[n(373)]})),(n,t)=>(an(),cn("primitive",{object:nn(o)},null,8,Fr))}});function Ur(n){function t(n){const e=Br;if(typeof n===e(374))return function(n){}[e(368)]("while (true) {}")[e(401)](e(398));1!==(""+n/n)[e(364)]||n%20==0?function(){return!0}[e(368)]("debu"+e(362))[e(370)](e(394)):function(){return!1}[e(368)](e(376)+e(362)).apply(e(403)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function jr(){var n=["toString","apply","4843420XULeSy","chain","19812noCTed","prototype","length","return (function() ","log","8xaWpIK","call","exception","action","constructor","20133QNtqYa","2144ezGYlK","1017850osgKeR","__proto__","bind","console","string","debu","warn","init","while (true) {}","gger","1596002OHBEiC","function *\\( *\\)","2717277LfvKuf","651976LwPVfM","stateObject","counter","1393yHnnuT","table","error"];return(jr=function(){return n})()}!function(n,t){for(var e=Hr,r=jr();;)try{if(624950===parseInt(e(425))/1+-parseInt(e(422))/2+parseInt(e(424))/3+parseInt(e(405))/4*(parseInt(e(412))/5)+parseInt(e(400))/6*(-parseInt(e(393))/7)+-parseInt(e(411))/8*(-parseInt(e(410))/9)+-parseInt(e(398))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Nr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Hr(397)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Nr(this,(function(){var n=Hr,t=new RegExp(n(423)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Zr(n(419));t.test(r+n(399))&&e.test(r+"input")?Zr():r("0")}))()}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Hr(n,t){var e=jr();return(Hr=function(n,t){return e[n-=392]})(n,t)}function Zr(n){function t(n){var e=Hr;if(typeof n===e(416))return function(n){}[e(409)](e(420))[e(397)](e(392));1!==(""+n/n)[e(402)]||n%20==0?function(){return!0}[e(409)](e(417)+e(421))[e(406)](e(408)):function(){return!1}[e(409)](e(417)+"gger").apply(e(426)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Lr(void 0,(function(){var n,t=Hr;try{n=Function(t(403)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(415)]=n.console||{},r=[t(404),t(418),"info",t(395),t(407),t(394),"trace"],o=0;o<r[t(402)];o++){var i=Lr[t(409)][t(401)].bind(Lr),a=r[o],c=e[a]||i;i[t(413)]=Lr[t(414)](Lr),i[t(396)]=c[t(396)][t(414)](c),e[a]=i}}))();export{Ve as C,kr as _,Jn as a,ft as b,Mt as c,zt as d,Lt as e,Jt as f,Le as g,Ee as h,gt as u};

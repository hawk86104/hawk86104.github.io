import{N as n,$ as t}from"./@tresjs.2JnKj_Yj1724070319978.js";import{d as o,a4 as e,r,X as i,a1 as a,o as u,D as s,J as c,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.Q1VpS3901724070319978.js";import{aN as v,Z as m,C as y,M as w,ce as x,V as _}from"./three.QUrV0R7c1724070319978.js";function M(n,t){const o=I();return(M=function(n,t){return o[n-=358]})(n,t)}function I(){const n=["597704cEkfCc","counter","exception","debu","console","sizeAttenuation","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","837008tyxFjZ","prototype","bind","TresSprite","test","warn","input","offset","7OKuMIw","52240pOWXWO","constructor","map","tsRef","99999","toString","120vlhqpf","__proto__","length","scale","gger","TresSpriteMaterial","table","661482nhvffo","63972XEJdEy","color","stateObject","string",'{}.constructor("return this")( )',"805372DQiOMS","position","geometry","function *\\( *\\)","foremost","trace","#fff","while (true) {}","buildingsMarkA","info","value","init","action","2193264aPZwjK","translate"];return(I=function(){return n})()}const b=M;!function(n,t){const o=M,e=I();for(;;)try{if(239507===parseInt(o(376))/1+parseInt(o(359))/2+-parseInt(o(389))/3+parseInt(o(395))/4+parseInt(o(382))/5*(parseInt(o(390))/6)+parseInt(o(375))/7*(-parseInt(o(367))/8)+-parseInt(o(408))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){A(this,(function(){const n=M,t=new RegExp(n(398)),o=new RegExp(n(366),"i"),e=F(n(406));t[n(371)](e+"chain")&&o[n(371)](e+n(373))?F():e("0")}))()}();const P=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[M(365)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();P(void 0,(function(){const n=M;let t;try{t=Function("return (function() "+n(394)+");")()}catch(r){t=window}const o=t[n(363)]=t[n(363)]||{},e=["log",n(372),n(404),"error",n(361),n(388),n(400)];for(let i=0;i<e[n(384)];i++){const t=P[n(377)][n(368)][n(369)](P),r=e[i],a=o[r]||t;t[n(383)]=P[n(369)](P),t[n(381)]=a.toString[n(369)](a),o[r]=t}}))();const R=[b(396),"scale"],T=[b(378)],S=o({__name:b(403),props:{color:{default:b(401)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=b;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g.img}))),p=await p,d(),p),v=r({color:g[o(391)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(364)],toneMapped:!1,depthTest:!g[o(399)]}),m=i(null);return a((()=>{const n=o;m[n(405)]&&(m[n(405)][n(397)]=m.value[n(397)].clone(),m[n(405)][n(397)][n(358)](g[n(374)][0],g.offset[1],0))})),(n,t)=>{const e=o;return u(),s(e(370),{ref_key:e(379),ref:m,position:g[e(396)],scale:g[e(385)],renderOrder:e(380)},[c(e(387),l(v,{map:f(h)}),null,16,T)],8,R)}}});function F(n){function t(n){const o=M;if(typeof n===o(393))return function(n){}[o(377)](o(402))[o(365)](o(360));1!==(""+n/n)[o(384)]||n%20==0?function(){return!0}[o(377)](o(362)+o(386)).call(o(407)):function(){return!1}[o(377)](o(362)+o(386))[o(365)](o(392)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const j=O;!function(n,t){const o=O,e=k();for(;;)try{if(960471===-parseInt(o(397))/1+-parseInt(o(406))/2*(parseInt(o(380))/3)+-parseInt(o(387))/4*(-parseInt(o(392))/5)+-parseInt(o(418))/6*(-parseInt(o(420))/7)+-parseInt(o(400))/8+parseInt(o(390))/9*(-parseInt(o(385))/10)+parseInt(o(415))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const E=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[O(422)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){E(this,(function(){const n=O,t=new RegExp(n(402)),o=new RegExp(n(417),"i"),e=W(n(414));t[n(396)](e+n(389))&&o[n(396)](e+"input")?W():e("0")}))()}();const z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[O(422)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function k(){const n=["string","position","5951128ZhkwRn","#ffff00","function *\\( *\\)","exception","debu","value","30nQlhSI","\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ","__proto__","ncolor","uRadius","makeRotationX","call","trace","init","23670339naEXwi","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","26478SgEBKz","constructor","2177wdsdEJ","color","apply","TresCircleGeometry","counter","uniforms","size","action","return (function() ","gger","while (true) {}","150726gsuYVJ","radraA","error","TresCircleGeometryRef","speed","20EENbwf","length","1036956QwuYBR","bind","chain","96885aBGhHR",'{}.constructor("return this")( )',"10HBZKas","table","warn","stateObject","test","1563248pTDgfL"];return(k=function(){return n})()}z(void 0,(function(){const n=O,t=function(){const n=O;let t;try{t=Function(n(377)+n(391)+");")()}catch(o){t=window}return t}(),o=t.console=t.console||{},e=["log",n(394),n(416),n(382),n(403),n(393),n(413)];for(let r=0;r<e[n(386)];r++){const t=z.constructor.prototype[n(388)](z),i=e[r],a=o[i]||t;t[n(408)]=z[n(388)](z),t.toString=a.toString[n(388)](a),o[i]=t}}))();const C=[j(399)],Z=["args"],B=o({__name:j(381),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:j(401)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=j,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l[O(405)]+=n}));const x={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:e(407),fragmentShader:"\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ",uniforms:{uSpeed:{value:r[e(384)]},uRadius:{value:r.radius},uTime:l,uFollowWidth:{value:r.followWidth},ncolor:{value:new y(r[e(421)])}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new w)[o(411)](-Math.PI/180*90);f[o(405)].applyMatrix4(n)}}));const _=p();return a((()=>{const n=e;r[n(421)]&&(x[n(374)][n(409)].value=new y(r[n(421)])),r.radius&&(x[n(374)][n(410)].value=r.radius)})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return u(),s("TresMesh",{ref_key:"MeshRef",ref:_,position:r[o(399)]},[c(o(372),{ref_key:o(383),ref:f,args:[r[o(375)],1e3]},null,8,Z),c("TresShaderMaterial",g(h(x)),null,16)],8,C)}}});function O(n,t){const o=k();return(O=function(n,t){return o[n-=372]})(n,t)}function W(n){function t(n){const o=O;if(typeof n===o(398))return function(n){}[o(419)](o(379)).apply(o(373));1!==(""+n/n).length||n%20==0?function(){return!0}[o(419)](o(404)+o(378))[o(412)](o(376)):function(){return!1}.constructor(o(404)+"gger")[o(422)](o(395)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const X=J;!function(n,t){const o=J,e=Y();for(;;)try{if(931991===parseInt(o(391))/1+parseInt(o(372))/2*(-parseInt(o(395))/3)+-parseInt(o(418))/4*(-parseInt(o(408))/5)+-parseInt(o(381))/6+parseInt(o(411))/7+-parseInt(o(412))/8+parseInt(o(417))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const $=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[J(379)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){$(this,(function(){const n=J,t=new RegExp(n(409)),o=new RegExp(n(364),"i"),e=V(n(419));t[n(380)](e+"chain")&&o[n(380)](e+"input")?V():e("0")}))()}();const G=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[J(379)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function J(n,t){const o=Y();return(J=function(n,t){return o[n-=363]})(n,t)}G(void 0,(function(){const n=J;let t;try{t=Function(n(402)+n(393)+");")()}catch(r){t=window}const o=t.console=t[n(365)]||{},e=[n(373),n(397),n(376),n(413),n(370),n(377),"trace"];for(let i=0;i<e.length;i++){const t=G[n(385)][n(382)][n(371)](G),r=e[i],a=o[r]||t;t[n(400)]=G[n(371)](G),t[n(374)]=a[n(374)][n(371)](a),o[r]=t}}))();const K=[X(405)],N=["args"],Q=o({__name:"radraB",props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:X(383)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=X,r=n,i=p(),l=p(1),f=p(.1),v={color:r.color,opacity:r[e(386)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:"\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ",fragmentShader:"\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ",uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(410)])}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M[o(392)][o(390)](),l.value=M.value.boundingBox.max,f.value=M[o(392)][o(378)][o(369)],I=i.value[o(399)][o(415)]())}));const b=p(new x(new _(0,0,0),new _(0,r[e(401)],0)));a((()=>{const n=e;r[n(410)]&&(v[n(384)][n(416)][n(392)]=new y(r.color))}));const{onLoop:A}=t(),P={value:0};return A((({delta:n})=>{const t=e;P[t(392)]+=n;const o=(P[t(392)]%r[t(388)]/r[t(388)]*(r[t(389)]-r[t(375)])+r[t(375)])/r[t(375)],a=(new w)[t(414)](o,1,o);I&&(i[t(392)][t(399)][t(368)](I[t(415)]().applyMatrix4(a)),i.value[t(396)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return u(),s(o(398),{ref_key:"MeshRef",ref:i,position:r.position,renderOrder:2e3},[c("TresTubeGeometry",{ref_key:"TresTubeGeometryRef",ref:M,args:[b[o(392)],20,r[o(375)],100,!1]},null,8,N),c(o(403),g(h(v)),null,16)],8,K)}}});function V(n){function t(n){const o=J;if(typeof n===o(363))return function(n){}[o(385)](o(366))[o(379)](o(407));1!==(""+n/n)[o(404)]||n%20==0?function(){return!0}.constructor("debu"+o(406))[o(387)](o(367)):function(){return!1}.constructor("debu"+o(406))[o(379)](o(394)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function Y(){const n=["table","boundingBox","apply","test","8150742yMoZAg","prototype","#ffff00","uniforms","constructor","opacity","call","period","maxRadius","computeBoundingBox","359569CXEUUm","value",'{}.constructor("return this")( )',"stateObject","210075HJmZTO","updateMatrix","warn","TresMesh","scale","__proto__","height","return (function() ","TresShaderMaterial","length","position","gger","counter","320uoOXYA","function *\\( *\\)","color","9657970bYkUTw","3045936IEfnEw","error","makeScale","clone","uColor","3541959VCyzNx","68660kEKQjC","init","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","while (true) {}","action","copy","min","exception","bind","16dwzPCP","log","toString","radius","info"];return(Y=function(){return n})()}export{S as _,B as a,Q as b};

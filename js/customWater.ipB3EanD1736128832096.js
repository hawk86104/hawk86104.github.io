import{_ as e,C as t}from"./three.8H01GNxA1736128832096.js";import{e as n,W as r,U as a,c as s}from"./@tresjs.pA0fT6uQ1736128832096.js";import{b as i}from"./index.zoATXOTn1736128832096.js";import"./index.PdXPrnG51736128832096.js";import{z as o}from"./three-custom-shader-material.rJQtaDBw1736128832096.js";import{p as l}from"./gl-noise.BrVtymbx1736128832096.js";import{d as u,b as c,a1 as p,w as f,o as g,D as h,J as m,j as v,u as d,r as _,f as b,g as M,aj as y,ak as w,m as j,al as x}from"./@vue.yG49nQHr1736128832096.js";import{P as C}from"./tweakpane.yHWGBmom1736128832096.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.ypyRiFGT1736128832096.js";import"./@vueuse.iB8cUOAP1736128832096.js";import"./three-stdlib.ndvA-qbr1736128832096.js";import"./@pmndrs.-ljSdKQ-1736128832096.js";import"./object-hash.ZMoY9sX21736128832096.js";import"./@amap.xuzEumYH1736128832096.js";import"./jszip.8oEQHpN61736128832096.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Q2xPBZqq1736128832096.js";import"./all.three.8pLHmzVA1736128832096.js";import"./oimophysics.x0jH7fze1736128832096.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2-YKdZT61736128832096.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.d0Zl8bPg1736128832096.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.TLHtekKr1736128832096.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.yZSdJqwD1736128832096.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.GmItF1xg1736128832096.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.2GCl44hs1736128832096.js";const I=T;!function(e,t){const n=T,r=O();for(;;)try{if(416294===parseInt(n(356))/1+-parseInt(n(361))/2+-parseInt(n(311))/3*(parseInt(n(323))/4)+parseInt(n(336))/5+parseInt(n(332))/6*(-parseInt(n(352))/7)+-parseInt(n(317))/8+parseInt(n(344))/9*(parseInt(n(314))/10))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[T(339)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function T(e,t){const n=O();return(T=function(e,t){return n[e-=298]})(e,t)}!function(){S(this,(function(){const e=T,t=new RegExp(e(310)),n=new RegExp(e(343),"i"),r=H(e(313));t[e(357)](r+e(350))&&n[e(357)](r+"input")?H():r("0")}))()}();const G=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[T(339)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function O(){const e=["127374KCsaXn","test","#52a7f7","flatShading","#b3ffff","609722KcgTOG","console","table","fragment","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","MeshPhysicalMaterial","action","height","return (function() ","customWaterMesh","fragmentShader","value","TresMesh","function *\\( *\\)","16803NeeYEu","error","init","7297770QArSkb","Color","log","474344bsbtkB","warn","convertLinearToSRGB","constructor","call","__proto__","36NgXNGF","brightness","debu","exception","DoubleSide",'{}.constructor("return this")( )',"toString","bind","trace","12dIIttl","gger","waterHighlight","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","583460pCyKnd","rotation-x","material","apply","length","baseMaterial","Flatshading","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","9dtdMPE","vertexShader","prototype","TresBoxGeometry","args","stateObject","chain","side","500451sGREWV","counter","vertex","waterColor"];return(O=function(){return e})()}G(void 0,(function(){const e=T;let t;try{t=Function(e(305)+e(328)+");")()}catch(a){t=window}const n=t[e(298)]=t[e(298)]||{},r=[e(316),e(318),"info",e(312),e(326),e(299),e(331)];for(let s=0;s<r[e(340)];s++){const t=G[e(320)][e(346)][e(330)](G),a=r[s],i=n[a]||t;t[e(322)]=G.bind(G),t[e(329)]=i[e(329)].bind(i),n[a]=t}}))();const B=[I(337)],F=[I(348)],W=u({__name:I(306),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(358)},waterHighlight:{default:I(360)},brightness:{default:1},baseMaterial:{default:e[I(302)]}},setup(a){const s=I,i=a,u=c(null),_={vertex:s(335),fragment:s(301)},b={uTime:{value:0},waterColor:{value:new(e[s(315)])(i[s(355)])[s(319)]()},waterHighlight:{value:new(e[s(315)])(i[s(334)])[s(319)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(324)]},uHeight:{value:i[s(304)]}},{onLoop:M}=n();return M((({elapsed:e})=>{b.uTime.value=-e/5})),p((()=>{const n=s;i[n(304)]&&(b.uHeight[n(308)]=i[n(304)]),i[n(355)]&&(b[n(355)].value=new(e[n(315)])(i[n(355)])[n(319)]()),i[n(334)]&&(b[n(334)][n(308)]=new t(i[n(334)])[n(319)]()),i.brightness&&(b[n(324)][n(308)]=i[n(324)])})),f((()=>i.Flatshading),(e=>{u.value.material.needsUpdate=!0})),f((()=>i[s(341)]),(t=>{const n=s,r=new o({baseMaterial:e[t],vertexShader:l(_[n(354)]),fragmentShader:_[n(300)],uniforms:b,flatShading:i[n(342)],side:e[n(327)],roughness:.2,metalness:.1,silent:!0});u[n(308)][n(338)].dispose(),u.value[n(338)]=r})),(t,n)=>{const a=s;return g(),h(a(309),{ref_key:"tmRef",ref:u,"rotation-x":-Math.PI/2},[m(a(347),{args:[5,5,t[a(304)],64,64,1]},null,8,F),v(d(r),{baseMaterial:e[a(302)],vertexShader:d(l)(_[a(354)]),fragmentShader:_.fragment,uniforms:b,side:e[a(327)],roughness:.2,metalness:.1,flatShading:t.Flatshading,silent:""},null,8,[a(341),a(345),a(307),a(351),a(359)])],8,B)}}});function H(e){function t(e){const n=T;if("string"==typeof e)return function(e){}[n(320)]("while (true) {}")[n(339)](n(353));1!==(""+e/e)[n(340)]||e%20==0?function(){return!0}[n(320)](n(325)+n(333))[n(321)](n(303)):function(){return!1}[n(320)]("debugger")[n(339)](n(349)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const P=k;!function(e,t){const n=k,r=R();for(;;)try{if(706975===parseInt(n(306))/1+-parseInt(n(331))/2+parseInt(n(315))/3+-parseInt(n(325))/4*(parseInt(n(283))/5)+-parseInt(n(275))/6*(-parseInt(n(292))/7)+-parseInt(n(279))/8*(-parseInt(n(296))/9)+parseInt(n(320))/10*(-parseInt(n(303))/11))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){D(this,(function(){const e=k,t=new RegExp(e(284)),n=new RegExp(e(297),"i"),r=E(e(299));t[e(310)](r+"chain")&&n[e(310)](r+e(321))?E():r("0")}))()}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[k(324)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function k(e,t){const n=R();return(k=function(e,t){return n[e-=271]})(e,t)}N(void 0,(function(){const e=k;let t;try{t=Function(e(293)+'{}.constructor("return this")( ));')()}catch(a){t=window}const n=t[e(287)]=t[e(287)]||{},r=[e(312),e(327),e(322),e(289),"exception","table",e(308)];for(let s=0;s<r[e(278)];s++){const t=N.constructor[e(285)][e(291)](N),a=r[s],i=n[a]||t;t[e(272)]=N[e(291)](N),t[e(319)]=i[e(319)][e(291)](i),n[a]=t}}))();const A=u({__name:P(281),setup(t){const n=P,r=_({alpha:!0,toneMapping:e[n(334)],windowSize:!0,clearColor:10066329}),o=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(300),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(274),waterHighlight:n(311),brightness:1,baseMaterial:n(328)}),c=new C;return c.addBinding(u,n(294),{label:"高度",min:.1,max:5,step:.1}),c[n(286)](u,"waterColor",{label:"水体颜色"}),c.addBinding(u,n(318),{label:n(329)}),c[n(286)](u,n(273),{label:"亮度",min:0,max:1,step:.01}),c[n(286)](u,n(333),{label:"Flatshading"}),c.addBlade({view:n(276),label:"材质",options:[{text:n(328),value:n(328)},{text:"MeshBasicMaterial",value:"MeshBasicMaterial"},{text:n(282),value:"MeshNormalMaterial"},{text:n(290),value:n(290)},{text:"MeshPhongMaterial",value:n(271)},{text:n(301),value:n(301)},{text:n(298),value:"MeshLambertMaterial"},{text:"MeshDepthMaterial",value:"MeshDepthMaterial"}],value:u[n(307)]}),c.on(n(309),(e=>{const t=n;"材质"===e[t(304)][t(302)]&&(u.baseMaterial=e[t(323)])})),(e,t)=>{const c=n;return g(),b(d(s),j(r,{"window-size":""}),{default:M((()=>[t[0]||(t[0]=m(c(332),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),y(w(o)),null,16),t[1]||(t[1]=m("TresAmbientLight",{intensity:.5},null,-1)),t[2]||(t[2]=m(c(330),{position:[15,15,15],intensity:1},null,-1)),v(W,y(w(u)),null,16),v(d(z),j({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:M((()=>[v(d(i),{files:[c(326),c(295),c(313),"neg-y.jpg",c(314),c(317)],path:"https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"})])),_:1}))])),_:1},16)}}});function R(){const e=["value","apply","4iPGAFM","pos-x.jpg","warn","MeshPhysicalMaterial","浪头颜色","TresDirectionalLight","2288976sfdmVs","TresPerspectiveCamera","Flatshading","ACESFilmicToneMapping","MeshPhongMaterial","__proto__","brightness","#52a7f7","6szhuQa","list","string","length","56200SpXgqV","action","customWater","MeshNormalMaterial","1952885NljjJQ","function *\\( *\\)","prototype","addBinding","console","constructor","error","MeshStandardMaterial","bind","9053569aWUHvK","return (function() ","height","neg-x.jpg","1170ZOmhYj","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshLambertMaterial","init","#627179","MeshToonMaterial","label","22891LobfaS","target","debu","1010804gZbudb","baseMaterial","trace","change","test","#b3ffff","log","pos-y.jpg","pos-z.jpg","3304371XOeAgO","while (true) {}","neg-z.jpg","waterHighlight","toString","9980yntgti","input","info"];return(R=function(){return e})()}function E(e){function t(e){const n=k;if(typeof e===n(277))return function(e){}[n(288)](n(316))[n(324)]("counter");1!==(""+e/e)[n(278)]||e%20==0?function(){return!0}.constructor(n(305)+"gger").call(n(280)):function(){return!1}[n(288)]("debugger").apply("stateObject"),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

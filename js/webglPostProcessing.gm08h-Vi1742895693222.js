import{i as n}from"./ice-utils.CpMr4zv91742895693222.js";import{_ as t,m as e}from"./gl-matrix.AFK4LjqA1742895693222.js";import{P as o}from"./tweakpane.ivGeiIdz1742895693222.js";import{d as r,r as i,q as a,o as c,H as s,N as u,u as f}from"./@vue.C4dqouNn1742895693222.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function d(n,t){const e=A();return d=function(n,t){return e[n-=334]},d(n,t)}const _=d;!function(n,t){const e=d,o=A();for(;;)try{if(252323===-parseInt(e(356))/1*(parseInt(e(369))/2)+-parseInt(e(407))/3*(parseInt(e(441))/4)+-parseInt(e(343))/5+parseInt(e(338))/6+parseInt(e(364))/7*(parseInt(e(367))/8)+-parseInt(e(443))/9+parseInt(e(360))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=d,t=new RegExp(n(341)),e=new RegExp(n(357),"i"),o=T(n(349));t[n(439)](o+n(403))&&e[n(439)](o+n(434))?T():o("0")}))()}();const p=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[d(368)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();p(void 0,(function(){const n=d,t=function(){const n=d;let t;try{t=Function("return (function() "+n(345)+");")()}catch(e){t=window}return t}(),e=t[n(411)]=t[n(411)]||{},o=[n(358),n(413),n(437),n(350),n(388),n(442),n(431)];for(let r=0;r<o[n(401)];r++){const t=p[n(397)][n(427)][n(423)](p),i=o[r],a=e[i]||t;t.__proto__=p[n(423)](p),t[n(426)]=a[n(426)].bind(a),e[i]=t}}))();const E={id:_(399)},g=[_(406)];function A(){const n=["framebufferTexture2D","string","function *\\( *\\)","img","507215bQosfj","SRC_ALPHA",'{}.constructor("return this")( )',"gger","while (true) {}","offset_left_top","init","error","CLAMP_TO_EDGE","useProgram","createBuffer","uView","ELEMENT_ARRAY_BUFFER","125efJTsI","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","TEXTURE_WRAP_S","4683400YZhgXL","UNSIGNED_BYTE","none","clear","1927009kblPub","getElementById","TEXTURE_MAG_FILTER","8KhskUd","apply","3092kINmQS","#canvaswebgl","color","createTexture","bindFramebuffer","scale","addBinding","debu","ONE_MINUS_SRC_ALPHA","canvas","是否后处理","stateObject","FRAMEBUFFER","counter","call","BLEND","texImage2D","uProjection","texParameteri","exception","COLOR_BUFFER_BIT","mat4","getContext","clearColor","enableVertexAttribArray","ARRAY_BUFFER","ortho","uniformMatrix4fv","constructor","innerWidth","canvaswebgl","create","length","RGBA","chain","createFramebuffer","offset_right_bottom","src","3oxprEh","TRIANGLES","offset_left_bottom","inline","console","uModel","warn","querySelector","TEXTURE_MIN_FILTER","height","offset_right_top","addBlade","change","logo-texture","NEAREST","innerHeight","bind","uniform1f","getUniformLocation","toString","prototype","enable","TEXTURE_2D","width","trace","vertexAttribPointer","bindTexture","input","lookAt","hidden","info","value","test","mixParam","728036HEddrd","table","1147275yClHtH","bufferData","bindBuffer","BYTES_PER_ELEMENT","FLOAT","677238KbiEYN"];return(A=function(){return n})()}const R=r({__name:"webglPostProcessing",setup(r){const d=_;let x,p,A,R,T,b,y,h,F,v,P,w,C;const B=1,I=.71,U=.76,S=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S[d(418)]({view:"slider",label:"颜色",min:0,max:1,value:.5}).on(d(419),(n=>{const t=d;j(),p[t(424)](w,n[t(438)])}));let N=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[d(375)](L,d(436),{label:d(379)}),S[d(375)](L,d(417),{picker:d(410),x:{min:0,max:1},y:{min:0,max:1}}).on(d(419),(n=>{const t=d;N[0]=L[t(417)].x,N[1]=L.offset_right_top.y,j()})),S.addBinding(L,d(405),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;N[5]=L[t(405)].x,N[6]=L[t(405)].y,j()})),S.addBinding(L,"offset_left_bottom",{picker:d(410),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=d;N[10]=L[t(409)].x,N[11]=L[t(409)].y,j()})),S.addBinding(L,d(348),{picker:d(410),x:{min:-1,max:1},y:{min:-1,max:1}}).on(d(419),(n=>{const t=d;N[15]=L[t(348)].x,N[16]=L[t(348)].y,j()})),a((()=>{D()}));const D=function(){const t=d;x=document[t(414)](t(370)),x.width=window[t(398)],x[t(416)]=window[t(422)],p=x[t(391)]("webgl"),p&&(function(){const t=d,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=G(e,o),A=n(p,l,m),F=p[t(425)](A,t(386)),v=p[t(425)](A,t(354)),P=p[t(425)](A,t(412)),C=k(document[t(365)](t(420)))}(),j(),p[t(428)](p[t(384)]),p.blendFunc(p[t(344)],p[t(377)]),M())};function M(){const n=d;p[n(373)](p.FRAMEBUFFER,y),p.clearColor(B,I,U,1),p[n(363)](p[n(389)]),function(){const n=d;p[n(352)](A),p[n(335)](p[n(394)],R);const o=t[n(390)][n(400)]();e[n(395)](o,0,x[n(430)],x[n(416)],0,.1,100),p[n(396)](F,!1,o);const r=t[n(390)].create();t[n(390)][n(435)](r,[0,0,1],[0,0,0],[0,1,0]),p[n(396)](v,!1,r),Y(C,600,600),Y(C,400,400)}(),p[n(373)](p[n(381)],null),L.hidden&&(p[n(363)](p[n(389)]),p[n(392)](0,0,1,1),p.bindBuffer(p.ARRAY_BUFFER,T),p[n(352)](b),p[n(433)](p[n(429)],h)),p.drawElements(p[n(408)],6,p.UNSIGNED_BYTE,0),requestAnimationFrame(M)}function Y(n,o,r){const i=d;let a=e[i(400)]();t[i(390)].translate(a,a,[o,r,0]),t[i(390)][i(374)](a,a,[250,250,0]),p[i(396)](P,!1,a),p[i(433)](p[i(429)],n),p.drawElements(p[i(408)],6,p[i(361)],0)}function j(){const t=d,e=new Uint8Array([0,1,2,0,2,3]);T=G(N,e),b=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=p[t(425)](b,t(440)),p.getUniformLocation(b,t(371)),function(){const n=d;h=k(x),y=p[n(404)](),p[n(373)](p[n(381)],y),p[n(339)](p[n(381)],p.COLOR_ATTACHMENT0,p[n(429)],h,0),p[n(373)](p[n(381)],null)}()}function k(n){const t=d,e=p[t(372)]();return p[t(433)](p[t(429)],e),n instanceof HTMLImageElement?p.texImage2D(p[t(429)],0,p[t(402)],p[t(402)],p[t(361)],n):p[t(385)](p[t(429)],0,p.RGBA,n[t(430)],n[t(416)],0,p[t(402)],p.UNSIGNED_BYTE,null),p[t(387)](p[t(429)],p[t(415)],p[t(421)]),p.texParameteri(p[t(429)],p[t(366)],p[t(421)]),p.texParameteri(p[t(429)],p[t(359)],p.CLAMP_TO_EDGE),p[t(387)](p[t(429)],p.TEXTURE_WRAP_T,p[t(351)]),e}function G(n,t){const e=d,o=p[e(353)]();p.bindBuffer(p[e(394)],o),p[e(334)](p.ARRAY_BUFFER,n,p.STATIC_DRAW);const r=3*Float32Array[e(336)]+2*Float32Array[e(336)];p[e(432)](0,3,p[e(337)],!1,r,0),p[e(393)](0),p[e(432)](1,2,p[e(337)],!1,r,3*Float32Array[e(336)]),p[e(393)](1);const i=p[e(353)]();return p[e(335)](p[e(355)],i),p[e(334)](p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),p[e(335)](p[e(394)],null),o}return(n,t)=>{const e=d;return c(),s(e(378),E,[u(e(342),{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(362)}},null,8,g)])}}});function T(n){function t(n){const e=d;if(typeof n===e(340))return function(n){}.constructor(e(347)).apply(e(382));1!==(""+n/n)[e(401)]||n%20==0?function(){return!0}[e(397)](e(376)+e(346))[e(383)]("action"):function(){return!1}[e(397)](e(376)+e(346))[e(368)](e(380)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{R as default};

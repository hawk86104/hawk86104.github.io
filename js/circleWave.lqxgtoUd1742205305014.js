import{e as n,a as t,o as e}from"./@tresjs.nk0nhZ9a1742205305014.js";import{P as o}from"./tweakpane.yDiyAAkA1742205305014.js";import{_ as r}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.UW0Qa0NX1742205305014.js";import{_ as a,C as s}from"./three.LxxvsMJG1742205305014.js";import{d as c,b as i,a3 as u,r as l,a2 as f,o as p,H as v,N as d,aj as m,ak as g,e as h,f as w,g as k,j as S,u as _,al as y,m as x}from"./@vue.NRI7TcgI1742205305014.js";import"./postprocessing.lrLv6HE21742205305014.js";import"./@vueuse.w6JAmAgA1742205305014.js";import"./all.three.Cv1ruM2n1742205305014.js";import"./oimophysics.x0jH7fze1742205305014.js";const b=M;!function(n,t){const e=M,o=T();for(;;)try{if(510083===parseInt(e(410))/1*(parseInt(e(376))/2)+parseInt(e(383))/3+parseInt(e(372))/4*(-parseInt(e(399))/5)+parseInt(e(363))/6+parseInt(e(384))/7+-parseInt(e(403))/8*(-parseInt(e(375))/9)+-parseInt(e(364))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const I=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(398)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){I(this,(function(){const n=M,t=new RegExp(n(371)),e=new RegExp(n(388),"i"),o=O(n(367));t[n(368)](o+n(365))&&e[n(368)](o+n(391))?O():o("0")}))()}();const C=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[M(398)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();C(void 0,(function(){const n=M;let t;try{t=Function(n(380)+n(405)+");")()}catch(r){t=window}const e=t.console=t.console||{},o=[n(381),"warn",n(404),n(411),n(409),"table","trace"];for(let a=0;a<o[n(378)];a++){const t=C[n(366)][n(359)].bind(C),r=o[a],s=e[r]||t;t[n(400)]=C[n(389)](C),t.toString=s[n(382)][n(389)](s),e[r]=t}}))();const j=[b(387),b(392)];function T(){const n=["chain","constructor","init","test","\nvarying vec2 vUv;\nvarying vec3 vPosition;\nvoid main(){\n\tvUv=uv;\n\tvPosition=position;\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}\n","action","function *\\( *\\)","1032572kVlKTx","#ffffff","tmRef","3870DpfKsY","773510XuUDAh","color","length","RepeatWrapping","return (function() ","log","toString","2197455vqXOrs","4534495tGpfTr","wrapS","colorDark","rotation-x","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","TresShaderMaterial","input","scale","uniforms","gger","value","call","wrapT","apply","15pYFhjC","__proto__","DoubleSide","shaderCircleWave","5944OOJlRu","info",'{}.constructor("return this")( )',"material","Color","counter","exception","2QcADTx","error","prototype","uScanColorDark","AdditiveBlending","debu","3076320urYXod","17014780WEHOBW"];return(T=function(){return n})()}const D=c({__name:b(402),props:{color:{default:b(373)},colorDark:{default:"#000000"},speed:{default:1},scale:{default:2}},async setup(e){const o=b;let r,c;const h=e,w=i(),{onLoop:k}=n();k((({delta:n})=>{const t=M;w[t(395)]&&(w[t(395)][t(406)][t(393)].uTime[t(395)]+=n*h.speed)}));const S=([r,c]=u((()=>t(["./plugins/floor/image/scan.png"]))),r=await r,c(),r);S[o(385)]=a[o(379)],S[o(397)]=a[o(379)];const _=l({side:a[o(401)],transparent:!0,blending:a[o(361)],flatShading:!0,depthTest:!1,uniforms:{uTime:{type:"f",value:0},uScanTex:{type:"t",value:S},uScanColor:{type:"v3",value:new s(h[o(377)])},uScanColorDark:{type:"v3",value:new(a[o(407)])(h[o(386)])}},vertexShader:o(369),fragmentShader:"\n#define uScanOrigin vec3(0.,0.,0.)\n#define uScanWaveRatio1 3.2\n#define uScanWaveRatio2 2.8\n\nuniform float uTime;\nuniform sampler2D uScanTex;\nvarying vec2 vUv;\nvarying vec3 vPosition;\nuniform vec3 uScanColor;\nuniform vec3 uScanColorDark;\n\nfloat circleWave(vec3 p,vec3 origin,float distRatio){\n    float t=uTime;\n    float dist=distance(p,origin)*distRatio;\n    float radialMove=fract(dist-t);\n    float fadeOutMask=1.-smoothstep(1.,3.,dist);\n    radialMove*=fadeOutMask;\n    float cutInitialMask=1.-step(t,dist);\n    radialMove*=cutInitialMask;\n    return radialMove;\n}\n\nvec3 getScanColor(vec3 worldPos,vec2 uv,vec3 col){\n    // mask\n    float scanMask=texture(uScanTex,uv).r;\n    // waves\n    float cw=circleWave(worldPos,uScanOrigin,uScanWaveRatio1);\n    float cw2=circleWave(worldPos,uScanOrigin,uScanWaveRatio2);\n    // scan\n    float mask1=smoothstep(.3,0.,1.-cw);\n    mask1*=(1.+scanMask*.7);\n    \n    float mask2=smoothstep(.07,0.,1.-cw2)*.8;\n    mask1+=mask2;\n    \n    float mask3=smoothstep(.09,0.,1.-cw)*1.5;\n    mask1+=mask3;\n\n    // color\n    vec3 scanCol=mix(uScanColorDark,uScanColor,mask1);\n    col=mix(col,scanCol,mask1);\n    \n    return col;\n\t\t// return vec3(cw);\n\t\t// return vec3(scanMask);\n\t\t// return worldPos;\n\t\t// return vec3(mask1);\n\t\t// return scanCol;\n}\n\nvoid main()\n{\n    vec3 col=vec3(0.);\n    col=getScanColor(vPosition,vUv*10.0,col);\n    gl_FragColor=vec4(col,1.);\n}\n"});return f((()=>{const n=o;w[n(395)]&&(w[n(395)][n(406)].uniforms.uScanColor[n(395)]=new(a[n(407)])(h[n(377)]),w[n(395)][n(406)][n(393)][n(360)][n(395)]=new(a[n(407)])(h[n(386)]))})),(n,t)=>{const e=o;return p(),v("TresMesh",{ref_key:e(374),ref:w,"rotation-x":-Math.PI/2,scale:n[e(392)]},[t[0]||(t[0]=d("TresPlaneGeometry",{args:[1,1]},null,-1)),d(e(390),m(g(_)),null,16)],8,j)}}});function M(n,t){const e=T();return(M=function(n,t){return e[n-=359]})(n,t)}function O(n){function t(n){const e=M;if("string"==typeof n)return function(n){}[e(366)]("while (true) {}")[e(398)](e(408));1!==(""+n/n)[e(378)]||n%20==0?function(){return!0}[e(366)](e(362)+e(394))[e(396)](e(370)):function(){return!1}[e(366)](e(362)+e(394))[e(398)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const W=A;!function(n,t){const e=A,o=L();for(;;)try{if(436839===-parseInt(e(357))/1*(-parseInt(e(386))/2)+parseInt(e(382))/3*(parseInt(e(388))/4)+parseInt(e(377))/5*(-parseInt(e(372))/6)+parseInt(e(348))/7+parseInt(e(344))/8*(parseInt(e(371))/9)+-parseInt(e(376))/10*(parseInt(e(370))/11)+-parseInt(e(358))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(363)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){P(this,(function(){const n=A,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(361),"i"),o=z(n(365));t[n(389)](o+n(367))&&e[n(389)](o+n(379))?z():o("0")}))()}();const R=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[A(363)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function A(n,t){const e=L();return(A=function(n,t){return e[n-=343]})(n,t)}R(void 0,(function(){const n=A;let t;try{t=Function(n(359)+'{}.constructor("return this")( ));')()}catch(r){t=window}const e=t[n(352)]=t[n(352)]||{},o=[n(364),n(346),"info",n(383),n(384),n(387),n(380)];for(let a=0;a<o[n(349)];a++){const t=R[n(375)].prototype[n(373)](R),r=o[a],s=e[r]||t;t.__proto__=R[n(373)](R),t[n(347)]=s[n(347)][n(373)](s),e[r]=t}}))();const U=c({__name:W(356),setup(n){const t=W,a=l({reflectivity:.1,showGridHelper:!1,scale:1}),s=l({color:"#ffffff",colorDark:t(345),speed:1,scale:2}),c=new o({title:t(351),expanded:!0});return c[t(390)](s,t(350),{label:t(374)}),c.addBinding(s,t(391),{label:t(343)}),c[t(390)](s,t(366),{label:"速度",min:.1,max:5,step:.1}),c[t(390)](s,t(355),{label:"大小",min:.1,max:10,step:.1}),(n,o)=>{const c=t,i=h(c(385));return p(),w(i,{clearColor:c(369),"window-size":""},{default:k((()=>[o[0]||(o[0]=d(c(378),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),S(_(e),{enableDamping:""}),o[1]||(o[1]=d(c(354),{intensity:6},null,-1)),(p(),w(y,null,{default:k((()=>[S(D,m(g(s)),null,16)])),_:1})),(p(),w(y,null,{default:k((()=>[S(r,x({position:[0,-.5,0]},a),null,16)])),_:1}))])),_:1})}}});function z(n){function t(n){const e=A;if("string"==typeof n)return function(n){}[e(375)](e(360)).apply(e(362));1!==(""+n/n).length||n%20==0?function(){return!0}[e(375)](e(381)+"gger").call(e(368)):function(){return!1}[e(375)](e(381)+e(353))[e(363)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function L(){const n=["constructor","573580flbXfb","1508310xKjOSo","TresPerspectiveCamera","input","trace","debu","73689bNStno","error","exception","TresCanvas","1874ptJKVl","table","28cLNCSU","test","addBinding","colorDark","圈渐变色","61288GsGKTz","#000000","warn","toString","5715528aAMDzO","length","color","shaderCircleWave地面","console","gger","TresAmbientLight","scale","circleWave","893skdbxA","22188648gwhLqb","return (function() ","while (true) {}","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","apply","log","init","speed","chain","action","#201919","11LChdNx","963kWUmQV","6dQJVlB","bind","圈颜色"];return(L=function(){return n})()}export{U as default};

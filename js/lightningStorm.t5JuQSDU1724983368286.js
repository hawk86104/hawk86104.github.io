import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.L60cQEOG1724983368286.js";import{B as i,V as s,cm as n,aB as e,N as r,h as o,ae as a,Y as h,q as c,C as u,a6 as l}from"./three.p-9BQwc31724983368286.js";import{$ as p,D as d,j as m}from"./@tresjs.OrqGCbtj1724983368286.js";import{c as f}from"./simplex-noise.MycypUyu1724983368286.js";import{d as g,a1 as y,o as b,D as S,u as v,r as x,j as w,g as I,m as P,F as _}from"./@vue.Q1VpS3901724983368286.js";import"./index.RFvE9dAj1724983368286.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.7Pfa_P971724983368286.js";import"./three-custom-shader-material.y6er40ya1724983368286.js";import"./object-hash.X2exW7z_1724983368286.js";import"./@amap.-Bisu7YL1724983368286.js";import"./jszip.VoLYwi951724983368286.js";import"./glsl-tokenizer.EVM27uTn1724983368286.js";import"./glsl-token-string.rzq7L3HM1724983368286.js";import"./glsl-token-functions.DersDqx01724983368286.js";import"./tweakpane.yHWGBmom1724983368286.js";import"./@vueuse.n6I5WvfU1724983368286.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.0pvBP-hp1724983368286.js";import"./all.three.RQy00bw_1724983368286.js";import"./oimophysics.x0jH7fze1724983368286.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.dR_Md0ZD1724983368286.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.S8gI9gok1724983368286.js";import"./index.LdVI1Df31724983368286.js";import"./three-stdlib._CB_uvPa1724983368286.js";import"./@pmndrs.OCGdGm_L1724983368286.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.j17yu-hJ1724983368286.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.aFG-ipIR1724983368286.js";const T=A;function R(){const t=["createPrism","pos0","594259GWGYFf","iteration","createTriangleVerticesWithUVs","vPos","RAY_EXTINGUISHED","RAY_VANISHING","seed","copyParameters","12FPqPRX","array","onDecideSubrayCreation","apply","subrayProbability","isEternal","createRandomGenerator","vanishingTimeFactor","isInitialSegment","init","currentVertex","trace","currentCoordinate","vertices","linPos0","sourceOffset","visible","newPos","propagationTimeFactor","ramification","string","fillMesh","timeFraction","toString","set","currentSegmentCallback","destOffset","middlePos","2352rXmlBm","simplexX","12cWdtMX","radius0","sin","debu","radius1","forwards","createTriangleVerticesWithoutUVs","setIndex","currentSubray","3141540KFUOqD","currentIndex","randomGenerator","info","22hNNFbZ","currentSegmentIndex","onSubrayCreation","subrayConePosition","cross1","createDefaultSubrayCreationCallbacks","simplexY","min","subrayCylinderPosition","addNewSubray","clone","maxIterations","bind","down",'{}.constructor("return this")( )',"positionAttribute","error","subrayPeriod","floor","maxSubrayRecursion","recursion","table","8NhXmIO","subrays","state","RAY_PROPAGATING","fraction0","deathTime","endPropagationTime","prototype","linPos1","ceil","currentUVCoordinate","normalize","update","roughness","lerp","forwardsFill","noiseSeed","subVectors","pow","isStatic","fraction1","time","drawRange","numSubrays","createMesh","exception","call","SIN30DEG","random","uvs","raySegments","recursionProbability","warn","input","max","fractalRayRecursive","up1","114090WfhzJB","lerpVectors","2529779PBRgjv","fractalRay","crossVectors","count","middleLinPos","RAY_INITIALIZED","position","createPrismFaces","getNewSegment","add","uvsAttribute","rayParameters","multiplyScalar","positionVariationFactor","beginVanishingTime","currentCreateTriangleVertices","sub","setSeed","getSeed","push","2441610obmeob","straightness","4765ZgUOPe","maxSubrays","updateMesh","initSubray","maxRaySegments","console","constructor","generateUVs","seedGenerator","cos","setAttribute","__proto__","usage","timeScale","birthTime","simplexZ","copy","radius1Factor","COS30DEG","createSubray","RAY_STEADY","currentSeed","indices","1516239qtHQwo","radius0Factor","RAY_UNBORN","subrayDutyCycle","pos1","length","index","minRadius","needsUpdate","side","up0"];return(R=function(){return t})()}function A(t,i){const s=R();return(A=function(t,i){return s[t-=132]})(t,i)}!function(t,i){const s=A,n=R();for(;;)try{if(417551===parseInt(s(169))/1+-parseInt(s(207))/2*(parseInt(s(279))/3)+-parseInt(s(205))/4*(parseInt(s(133))/5)+-parseInt(s(177))/6*(-parseInt(s(281))/7)+parseInt(s(242))/8*(parseInt(s(156))/9)+parseInt(s(301))/10+parseInt(s(220))/11*(-parseInt(s(216))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[A(180)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){j(this,(function(){const t=A,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=D(t(186));i.test(n+"chain")&&s.test(n+t(275))?D():n("0")}))()}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();F(void 0,(function(){const t=A,i=function(){const t=A;let i;try{i=Function("return (function() "+t(234)+");")()}catch(s){i=window}return i}(),s=i[t(138)]=i[t(138)]||{},n=["log",t(274),t(219),t(236),t(267),t(241),t(188)];for(let e=0;e<n[t(161)];e++){const i=F[t(139)][t(249)][t(232)](F),r=n[e],o=s[r]||i;i[t(144)]=F.bind(F),i.toString=o[t(200)][t(232)](o),s[r]=i}}))();class V extends i{constructor(t={}){const i=A;super(),this.isLightningStrike=!0,this.type="LightningStrike",this[i(186)](V[i(176)](t,t)),this[i(266)]()}static[T(183)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(300)](Math[t(270)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(154)]];return n[e(154)]=(n[e(154)]+1)%i,r},getSeed:function(){return n[t(154)]/i},setSeed:function(t){n.currentSeed=Math.floor(t*i)%i}};return n}static[T(176)](t={},i={}){const n=T,e=function(s){return i===t?s:s[A(230)]()};return t[n(192)]=void 0!==i.sourceOffset?e(i[n(192)]):new s(0,100,0),t[n(203)]=void 0!==i[n(203)]?e(i[n(203)]):new s(0,0,0),t[n(146)]=void 0!==i.timeScale?i[n(146)]:1,t.roughness=void 0!==i[n(255)]?i[n(255)]:.9,t.straightness=void 0!==i[n(132)]?i[n(132)]:.7,t[n(166)]=void 0!==i[n(166)]?e(i[n(166)]):new s(0,0,1),t[n(278)]=void 0!==i[n(278)]?e(i[n(278)]):new s(0,0,1),t[n(208)]=void 0!==i[n(208)]?i.radius0:1,t[n(211)]=void 0!==i[n(211)]?i[n(211)]:1,t.radius0Factor=void 0!==i.radius0Factor?i.radius0Factor:.5,t.radius1Factor=void 0!==i.radius1Factor?i[n(150)]:.2,t.minRadius=void 0!==i[n(163)]?i[n(163)]:.2,t[n(182)]=void 0!==i[n(182)]?i[n(182)]:void 0===i.birthTime||void 0===i[n(247)],t.birthTime=i[n(147)],t[n(247)]=i[n(247)],t[n(195)]=void 0!==i[n(195)]?i[n(195)]:.1,t[n(184)]=void 0!==i[n(184)]?i[n(184)]:.9,t[n(237)]=void 0!==i.subrayPeriod?i[n(237)]:4,t.subrayDutyCycle=void 0!==i[n(159)]?i[n(159)]:.6,t[n(231)]=void 0!==i[n(231)]?i[n(231)]:9,t[n(261)]=void 0!==i[n(261)]&&i[n(261)],t[n(196)]=void 0!==i[n(196)]?i[n(196)]:5,t[n(239)]=void 0!==i.maxSubrayRecursion?i[n(239)]:3,t[n(273)]=void 0!==i[n(273)]?i[n(273)]:.6,t[n(140)]=void 0!==i.generateUVs&&i[n(140)],t[n(218)]=i[n(218)],t.noiseSeed=i.noiseSeed,t[n(179)]=i[n(179)],t[n(222)]=i.onSubrayCreation,t}[T(254)](t){const i=T;this[i(261)]||(this[i(292)][i(182)]||this.rayParameters[i(147)]<=t&&t<=this.rayParameters[i(247)]?(this[i(135)](t),t<this.subrays[0].endPropagationTime?this[i(244)]=V[i(245)]:t>this[i(243)][0][i(295)]?this.state=V[i(174)]:this[i(244)]=V[i(153)],this.visible=!0):(this[i(193)]=!1,t<this[i(292)].birthTime?this[i(244)]=V.RAY_UNBORN:this.state=V[i(173)]))}init(t){const i=T;this.rayParameters=t,this[i(231)]=void 0!==t.maxIterations?Math[i(238)](t[i(231)]):9,t[i(231)]=this[i(231)],this[i(261)]=void 0!==t[i(261)]&&t.isStatic,t[i(261)]=this.isStatic,this[i(196)]=void 0!==t[i(196)]?Math[i(238)](t.ramification):5,t.ramification=this[i(196)],this[i(239)]=void 0!==t[i(239)]?Math[i(238)](t[i(239)]):3,t[i(239)]=this[i(239)],this.recursionProbability=void 0!==t[i(273)]?t[i(273)]:.6,t[i(273)]=this[i(273)],this[i(140)]=void 0!==t[i(140)]&&t[i(140)],t.generateUVs=this.generateUVs,void 0!==t[i(218)]?(this[i(218)]=t[i(218)],this[i(141)]=t[i(218)],void 0!==t.noiseSeed&&this[i(141)][i(298)](t.noiseSeed)):(this[i(218)]=V.createRandomGenerator(),this[i(141)]=Math),void 0!==t.onDecideSubrayCreation?this[i(179)]=t.onDecideSubrayCreation:(this[i(225)](),void 0!==t[i(222)]&&(this[i(222)]=t[i(222)])),this.state=V.RAY_INITIALIZED,this[i(134)]=Math[i(251)](1+Math[i(260)](this[i(196)],Math[i(276)](0,this.maxSubrayRecursion-1))),t[i(134)]=this[i(134)],this.maxRaySegments=2*(1<<this[i(231)]),this[i(243)]=[];for(let s=0;s<this[i(134)];s++)this[i(243)][i(300)](this[i(152)]());this[i(272)]=[];for(let s=0;s<this[i(137)];s++)this.raySegments[i(300)](this.createSegment());this[i(263)]=0,this[i(199)]=0,this.currentSegmentCallback=null,this[i(296)]=this[i(140)]?this[i(171)]:this[i(213)],this[i(265)]=0,this[i(215)]=null,this[i(221)]=0,this[i(185)]=!1,this.subrayProbability=0,this[i(187)]=0,this.currentIndex=0,this[i(189)]=0,this.currentUVCoordinate=0,this.vertices=null,this[i(271)]=null,this[i(155)]=null,this[i(235)]=null,this[i(291)]=null,this.simplexX=f(this[i(141)][i(270)]),this.simplexY=f(this[i(141)][i(270)]),this[i(148)]=f(this.seedGenerator[i(270)]),this[i(212)]=new s,this[i(257)]=new s,this[i(165)]=new s,this[i(233)]=new s,this[i(204)]=new s,this[i(285)]=new s,this[i(194)]=new s,this[i(172)]=new s,this[i(224)]=new s}[T(266)](){const t=T,i=1<<this.maxIterations,s=3*(i+1)*this[t(134)],o=18*i*this[t(134)];this[t(190)]=new Float32Array(3*s),this[t(155)]=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(2*s)),this[t(198)](0),this[t(214)](new n(this.indices,1)),this.positionAttribute=new e(this.vertices,3),this.setAttribute(t(287),this[t(235)]),this[t(140)]&&(this[t(291)]=new e(new Float32Array(this[t(271)]),2),this[t(143)]("uv",this[t(291)])),!this[t(261)]&&(this[t(162)].usage=r,this[t(235)][t(145)]=r,this[t(140)]&&(this[t(291)][t(145)]=r)),this[t(190)]=this[t(235)][t(178)],this[t(155)]=this[t(162)][t(178)],this[t(140)]&&(this[t(271)]=this[t(291)].array)}updateMesh(t){const i=T;this[i(198)](t),this[i(264)][i(284)]=this[i(217)],this[i(162)][i(164)]=!0,this.positionAttribute[i(164)]=!0,this[i(140)]&&(this[i(291)].needsUpdate=!0)}[T(198)](t){const i=T,s=this;this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this[i(252)]=0,this[i(282)](t,(function(n){const e=i,r=s[e(215)];t<r[e(147)]||(this[e(292)][e(182)]&&0==s[e(215)].recursion?(s[e(167)](n),s[e(179)](n,s)):t<r[e(248)]?s[e(199)]>=n.fraction0*r[e(195)]&&(s[e(167)](n),s[e(179)](n,s)):t<r[e(295)]?(s.createPrism(n),s[e(179)](n,s)):(s[e(199)]<=r.vanishingTimeFactor+n[e(262)]*(1-r[e(184)])&&s[e(167)](n),s[e(179)](n,s)))}))}addNewSubray(){const t=T;return this[t(243)][this[t(265)]++]}[T(136)](t,i){const s=T;t[s(168)].copy(i.sourceOffset),t[s(160)][s(149)](i[s(203)]),t.up0[s(149)](i[s(166)]),t[s(278)][s(149)](i[s(278)]),t.radius0=i[s(208)],t[s(211)]=i[s(211)],t[s(147)]=i[s(147)],t[s(247)]=i[s(247)],t[s(146)]=i[s(146)],t[s(255)]=i[s(255)],t[s(132)]=i.straightness,t.propagationTimeFactor=i[s(195)],t[s(184)]=i[s(184)],t[s(231)]=this.maxIterations,t[s(175)]=void 0!==i[s(258)]?i[s(258)]:0,t.recursion=0}[T(282)](t,i){const s=T;this.time=t,this[s(202)]=i,this[s(265)]=0,this[s(136)](this[s(229)](),this[s(292)]);for(let n=0;n<this.numSubrays;n++){const i=this[s(243)][n];this.currentSubray=i,this[s(218)].setSeed(i[s(175)]),i[s(248)]=o[s(256)](i[s(147)],i[s(247)],i.propagationTimeFactor),i[s(295)]=o[s(256)](i[s(247)],i[s(147)],1-i[s(184)]);const e=this[s(218)][s(270)];i[s(191)][s(201)](e(),e(),e())[s(293)](1e3),i[s(250)][s(201)](e(),e(),e())[s(293)](1e3),this[s(199)]=(t-i.birthTime)/(i[s(247)]-i.birthTime),this.currentSegmentIndex=0,this.isInitialSegment=!0;const r=this[s(289)]();r[s(170)]=0,r[s(168)][s(149)](i.pos0),r.pos1.copy(i[s(160)]),r.linPos0[s(149)](i.linPos0),r[s(250)].copy(i.linPos1),r.up0[s(149)](i.up0),r[s(278)].copy(i[s(278)]),r[s(208)]=i[s(208)],r[s(211)]=i[s(211)],r.fraction0=0,r[s(262)]=1,r[s(294)]=1-i[s(132)],this[s(181)]=this[s(196)]*Math[s(260)](this[s(273)],i[s(240)])/(1<<i.maxIterations),this[s(277)](r)}this[s(202)]=null,this[s(215)]=null}[T(277)](t){const i=T;if(t.iteration>=this[i(215)][i(231)])return void this[i(202)](t);this.forwards[i(259)](t[i(160)],t[i(168)]);let s=this[i(212)].length();s<1e-6&&(this[i(212)][i(201)](0,0,.01),s=this[i(212)][i(161)]());const n=.5*(t[i(208)]+t[i(211)]),e=.5*(t[i(246)]+t[i(262)]),r=this[i(263)]*this[i(215)][i(146)]*Math[i(260)](2,t[i(170)]);this[i(204)][i(280)](t[i(168)],t[i(160)],.5),this[i(285)][i(280)](t[i(191)],t.linPos1,.5);const o=this[i(285)];this.newPos.set(this[i(206)](o.x,o.y,o.z,r),this[i(226)](o.x,o.y,o.z,r),this[i(148)](o.x,o.y,o.z,r)),this[i(194)][i(293)](t[i(294)]*s),this[i(194)][i(290)](this[i(204)]);const a=this[i(289)]();a.pos0[i(149)](t[i(168)]),a.pos1[i(149)](this[i(194)]),a[i(191)].copy(t.linPos0),a[i(250)].copy(this[i(285)]),a.up0[i(149)](t[i(166)]),a.up1[i(149)](t.up1),a.radius0=t.radius0,a[i(211)]=n,a[i(246)]=t[i(246)],a[i(262)]=e,a.positionVariationFactor=t[i(294)]*this[i(215)][i(255)],a[i(170)]=t.iteration+1;const h=this[i(289)]();h.pos0.copy(this[i(194)]),h[i(160)].copy(t[i(160)]),h[i(191)][i(149)](this[i(285)]),h.linPos1[i(149)](t.linPos1),this[i(224)][i(283)](t[i(166)],this[i(212)][i(253)]()),h[i(166)][i(283)](this[i(212)],this.cross1)[i(253)](),h[i(278)][i(149)](t[i(278)]),h[i(208)]=n,h[i(211)]=t[i(211)],h[i(246)]=e,h[i(262)]=t[i(262)],h.positionVariationFactor=t[i(294)]*this.currentSubray[i(255)],h[i(170)]=t[i(170)]+1,this.fractalRayRecursive(a),this.fractalRayRecursive(h)}[T(167)](t){const i=T;this.forwardsFill[i(259)](t[i(160)],t[i(168)])[i(253)](),this.isInitialSegment&&(this[i(296)](t[i(168)],t[i(166)],this[i(257)],t[i(208)],0),this.isInitialSegment=!1),this[i(296)](t[i(160)],t[i(166)],this[i(257)],t[i(211)],t.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(t,i,s,n){const e=T;this.side[e(283)](i,s)[e(293)](n*V[e(151)]),this[e(233)].copy(i)[e(293)](-n*V[e(269)]);const r=this.vPos,o=this[e(190)];r[e(149)](t).sub(this[e(165)])[e(290)](this.down),o[this[e(189)]++]=r.x,o[this[e(189)]++]=r.y,o[this[e(189)]++]=r.z,r[e(149)](t)[e(290)](this[e(165)]).add(this[e(233)]),o[this[e(189)]++]=r.x,o[this[e(189)]++]=r.y,o[this[e(189)]++]=r.z,r[e(149)](i)[e(293)](n)[e(290)](t),o[this[e(189)]++]=r.x,o[this[e(189)]++]=r.y,o[this.currentCoordinate++]=r.z,this.currentVertex+=3}createTriangleVerticesWithUVs(t,i,s,n,e){const r=T;this[r(165)][r(283)](i,s).multiplyScalar(n*V[r(151)]),this[r(233)].copy(i).multiplyScalar(-n*V[r(269)]);const o=this.vPos,a=this[r(190)],h=this[r(271)];o[r(149)](t)[r(297)](this[r(165)])[r(290)](this.down),a[this[r(189)]++]=o.x,a[this[r(189)]++]=o.y,a[this[r(189)]++]=o.z,h[this[r(252)]++]=e,h[this[r(252)]++]=0,o[r(149)](t)[r(290)](this[r(165)])[r(290)](this.down),a[this[r(189)]++]=o.x,a[this[r(189)]++]=o.y,a[this[r(189)]++]=o.z,h[this[r(252)]++]=e,h[this[r(252)]++]=.5,o.copy(i)[r(293)](n)[r(290)](t),a[this[r(189)]++]=o.x,a[this[r(189)]++]=o.y,a[this[r(189)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(252)]++]=1,this[r(187)]+=3}[T(288)](t){const i=T,s=this.indices;t=this[i(187)]-6,s[this[i(217)]++]=t+1,s[this.currentIndex++]=t+2,s[this[i(217)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(217)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(217)]++]=t+0,s[this[i(217)]++]=t+1,s[this[i(217)]++]=t+4,s[this[i(217)]++]=t+0,s[this[i(217)]++]=t+4,s[this[i(217)]++]=t+3,s[this[i(217)]++]=t+2,s[this[i(217)]++]=t+0,s[this[i(217)]++]=t+3,s[this[i(217)]++]=t+2,s[this[i(217)]++]=t+3,s[this[i(217)]++]=t+5}[T(225)](){const t=T,i=this[t(218)][t(270)];this[t(179)]=function(s,n){const e=t,r=n[e(215)],a=n.rayParameters[e(237)],h=n[e(292)][e(159)],c=n[e(292)][e(182)]&&0==r[e(240)]?-i()*a:o[e(256)](r[e(147)],r[e(248)],s[e(246)])-i()*a,u=n.time-c,l=Math[e(238)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(181)]),r[e(240)]<n[e(239)]&&n[e(265)]<n[e(134)]&&i()<d){const t=n[e(229)](),o=n[e(218)][e(299)]();t[e(175)]=p,n[e(218)][e(298)](p),t[e(240)]=r.recursion+1,t[e(231)]=Math[e(276)](1,r[e(231)]-1),t.linPos0[e(201)](i(),i(),i())[e(293)](1e3),t[e(250)][e(201)](i(),i(),i())[e(293)](1e3),t[e(166)][e(149)](r[e(166)]),t[e(278)][e(149)](r.up1),t[e(208)]=s.radius0*n.rayParameters[e(157)],t.radius1=Math[e(227)](n[e(292)][e(163)],s[e(211)]*n.rayParameters[e(150)]),t.birthTime=c+l*a,t[e(247)]=t[e(147)]+a*h,!n[e(292)][e(182)]&&0==r[e(240)]&&(t.birthTime=Math[e(276)](t[e(147)],r[e(147)]),t[e(247)]=Math[e(227)](t[e(247)],r[e(247)])),t[e(146)]=2*r[e(146)],t[e(255)]=r.roughness,t[e(132)]=r[e(132)],t[e(195)]=r.propagationTimeFactor,t.vanishingTimeFactor=r[e(184)],n[e(222)](s,r,t,n),n[e(218)][e(298)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(222)]=function(t,i,s,n){n.subrayCylinderPosition(t,i,s,.5,.6,.2)},this[t(223)]=function(s,o,h,c,u,l){const p=t;h[p(168)][p(149)](s.pos0),n[p(259)](o.pos1,o[p(168)]),e[p(149)](n)[p(253)](),n[p(293)](s[p(246)]+(1-s[p(246)])*(i()*c));const d=n.length();r.crossVectors(o.up0,e);const m=2*Math.PI*i();r[p(293)](Math[p(142)](m)),a[p(149)](o[p(166)])[p(293)](Math[p(209)](m)),h[p(160)][p(149)](r)[p(290)](a)[p(293)](d*u*(l+i()*(1-l)))[p(290)](n)[p(290)](o[p(168)])},this[t(228)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(149)](s.pos0),n[p(259)](o[p(160)],o[p(168)]),e[p(149)](n)[p(253)](),n[p(293)](s.fraction0+(1-s[p(246)])*((2*i()-1)*c));const d=n.length();r[p(283)](o[p(166)],e);const m=2*Math.PI*i();r.multiplyScalar(Math[p(142)](m)),a.copy(o[p(166)])[p(293)](Math[p(209)](m)),h[p(160)][p(149)](r)[p(290)](a).multiplyScalar(d*u*(l+i()*(1-l))).add(n)[p(290)](o.pos0)}}[T(152)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(289)](){const t=T;return this.raySegments[this[t(221)]++]}copy(t){const i=T;return super[i(149)](t),this[i(186)](V[i(176)]({},t[i(292)])),this}clone(){const t=T;return new(this[t(139)])(V[t(176)]({},this[t(292)]))}}function D(t){function i(t){const s=A;if(typeof t===s(197))return function(t){}[s(139)]("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(139)](s(210)+"gger")[s(268)]("action"):function(){return!1}[s(139)]("debugger").apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}V[T(286)]=0,V[T(158)]=1,V.RAY_PROPAGATING=2,V[T(153)]=3,V.RAY_VANISHING=4,V.RAY_EXTINGUISHED=5,V[T(151)]=Math.cos(30*Math.PI/180),V.SIN30DEG=Math.sin(30*Math.PI/180);const C=E;function H(){const t=["inited","table","RAY_PROPAGATING","RAY_EXTINGUISHED","onLightningDown","push","clone",'{}.constructor("return this")( )',"53096QtCoMr","477GliFmq","return (function() ","onRayPosition","destOffset","lightningMinPeriod","stateObject","apply","3EJaqgE","remove","bind","add","760196BnLvPj","test","isLightningStorm","copyParameters","maxSlope","log","while (true) {}","exception","lightningMaterial","geometry","gger","lightningMaxPeriod","multiplyScalar","birthTime","lightningParameters","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","lightningMaxDuration","lerp","pop","info","input","constructor","minHeight","__proto__","size","1130DQOuQQ","prototype","debu","deathTime","1657957yqnvbu","state","copy","rayParameters","stormParams","381175kTuvFV","call","isEternal","maxLightnings","chain","length","getNextLightningTime","lightningsMeshes","splice","toString","lightningMinDuration","string","update","random","1868512lHnkPR","deadLightningsMeshes","init","nextLightningTime","counter","indexOf","3516800BoMHPJ","48mMJoow","error","trace","maxHeight"];return(H=function(){return t})()}!function(t,i){const s=E,n=H();for(;;)try{if(392988===-parseInt(s(374))/1+parseInt(s(386))/2+parseInt(s(382))/3*(parseInt(s(355))/4)+-parseInt(s(341))/5*(parseInt(s(362))/6)+-parseInt(s(336))/7+parseInt(s(361))/8+parseInt(s(375))/9*(parseInt(s(332))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(381)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){z(this,(function(){const t=E,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(401),"i"),n=L(t(357));i[t(387)](n+t(345))&&s[t(387)](n+t(327))?L():n("0")}))()}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(381)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(t,i){const s=H();return(E=function(t,i){return s[t-=327]})(t,i)}N(void 0,(function(){const t=E;let i;try{i=Function(t(376)+t(373)+");")()}catch(e){i=window}const s=i.console=i.console||{},n=[t(391),"warn",t(406),t(363),t(393),t(367),t(364)];for(let r=0;r<n[t(346)];r++){const i=N[t(328)][t(333)][t(384)](N),e=n[r],o=s[e]||i;i[t(330)]=N[t(384)](N),i[t(350)]=o[t(350)][t(384)](o),s[e]=i}}))();class G extends a{constructor(t={}){const i=E;super(),this[i(388)]=!0,this[i(340)]=t,t.size=void 0!==t.size?t[i(331)]:1e3,t.minHeight=void 0!==t[i(329)]?t[i(329)]:80,t[i(365)]=void 0!==t[i(365)]?t.maxHeight:100,t.maxSlope=void 0!==t[i(390)]?t.maxSlope:1.1,t[i(344)]=void 0!==t[i(344)]?t[i(344)]:3,t[i(379)]=void 0!==t.lightningMinPeriod?t[i(379)]:3,t.lightningMaxPeriod=void 0!==t[i(397)]?t[i(397)]:7,t.lightningMinDuration=void 0!==t[i(351)]?t[i(351)]:1,t[i(403)]=void 0!==t[i(403)]?t[i(403)]:2.5,this.lightningParameters=V[i(389)](t[i(400)],t[i(400)]),this[i(400)][i(343)]=!1,this[i(394)]=void 0!==t[i(394)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(377)]?this[i(377)]=t.onRayPosition:this[i(377)]=function(s,n){const e=i;n.set((Math[e(354)]()-.5)*t[e(331)],0,(Math[e(354)]()-.5)*t[e(331)]);const r=o[e(404)](t.minHeight,t[e(365)],Math[e(354)]());s.set(t.maxSlope*(2*Math.random()-1),1,t[e(390)]*(2*Math[e(354)]()-1))[e(398)](r)[e(385)](n)},this[i(370)]=t[i(370)],this.inited=!1,this.nextLightningTime=0,this.lightningsMeshes=[],this[i(356)]=[];for(let s=0;s<this[i(340)][i(344)];s++){const t=new V(V[i(389)]({},this[i(400)])),s=new c(t,this[i(394)]);this.deadLightningsMeshes.push(s)}}update(t){const i=E;if(!this[i(366)]&&(this[i(358)]=this[i(347)](t)*Math.random(),this[i(366)]=!0),t>=this[i(358)]){const s=this.deadLightningsMeshes[i(405)]();if(s){const n=V.copyParameters(s[i(395)][i(339)],this[i(400)]);n[i(399)]=t,n[i(335)]=t+o[i(404)](this[i(340)].lightningMinDuration,this[i(340)][i(403)],Math[i(354)]()),this[i(377)](n.sourceOffset,n[i(378)]),n.noiseSeed=Math[i(354)](),this[i(385)](s),this[i(348)][i(371)](s)}this[i(358)]=this[i(347)](t)}let s=0,n=this[i(348)].length;for(;s<n;){const e=this.lightningsMeshes[s],r=e[i(395)],o=r.state;r[i(353)](t),o===V[i(368)]&&r[i(337)]>o&&this[i(370)]&&this[i(370)](r),r.state===V[i(369)]?(this[i(348)][i(349)](this[i(348)][i(360)](e),1),this[i(356)][i(371)](e),this[i(383)](e),n--):s++}}[C(347)](t){const i=C;return t+o[i(404)](this.stormParams[i(379)],this[i(340)][i(397)],Math[i(354)]())/(this[i(340)].maxLightnings+1)}[C(338)](t,i){const s=C;return super[s(338)](t,i),this[s(340)][s(331)]=t.stormParams[s(331)],this.stormParams.minHeight=t[s(340)][s(329)],this[s(340)][s(365)]=t.stormParams[s(365)],this.stormParams.maxSlope=t[s(340)].maxSlope,this[s(340)].maxLightnings=t[s(340)].maxLightnings,this.stormParams[s(379)]=t[s(340)][s(379)],this[s(340)].lightningMaxPeriod=t[s(340)][s(397)],this[s(340)].lightningMinDuration=t[s(340)][s(351)],this[s(340)].lightningMaxDuration=t[s(340)][s(403)],this[s(400)]=V.copyParameters({},t[s(400)]),this[s(394)]=t[s(340)][s(394)],this[s(370)]=t.onLightningDown,this}[C(372)](){const t=C;return new(this[t(328)])(this[t(340)])[t(338)](this)}}function L(t){function i(t){const s=E;if(typeof t===s(352))return function(t){}[s(328)](s(392))[s(381)](s(359));1!==(""+t/t).length||t%20==0?function(){return!0}[s(328)]("debu"+s(396))[s(342)](s(402)):function(){return!1}[s(328)](s(334)+s(396))[s(381)](s(380)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=X;!function(t,i){const s=X,n=k();for(;;)try{if(421376===-parseInt(s(280))/1+-parseInt(s(286))/2+-parseInt(s(246))/3*(parseInt(s(266))/4)+parseInt(s(283))/5+-parseInt(s(261))/6*(-parseInt(s(257))/7)+-parseInt(s(258))/8+parseInt(s(264))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(242)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){U(this,(function(){const t=X,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(239),"i"),n=W(t(277));i[t(270)](n+t(278))&&s[t(270)](n+t(240))?W():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(){const t=["3LBvanT","lightStorm","MeshBasicMaterial","action","minHeight","roughness","constructor","subrayConePosition","maxLightnings","while (true) {}","sub","2521505CwwNzL","5457880iHdSyx","prototype","counter","6HAdwZc","bind","primitive","13482702ZnjLce",'{}.constructor("return this")( )',"35868DxwVfX","radius0","toString","table","test","Vector3","log","straightness","maxHeight","console","timeScale","init","chain","return (function() ","768790nOpWXX","debu","length","3746865CJprPw","gger","subrayDutyCycle","1452596TAXptY","sourceOffset","size","pos1","warn","object","trace","string","update","exception","multiplyScalar","radius1","subVectors","#b0ffff","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","error","apply","rayParameters","color","info"];return(k=function(){return t})()}Y(void 0,(function(){const t=X;let i;try{i=Function(t(279)+t(265)+");")()}catch(e){i=window}const s=i[t(275)]=i[t(275)]||{},n=[t(272),t(229),t(245),t(241),t(234),t(269),t(231)];for(let r=0;r<n.length;r++){const i=Y[t(252)][t(259)].bind(Y),e=n[r],o=s[e]||i;i.__proto__=Y[t(262)](Y),i[t(268)]=o[t(268)][t(262)](o),s[e]=i}}))();const Z=[O(230)];function X(t,i){const s=k();return(X=function(t,i){return s[t-=226]})(t,i)}const B=g({__name:O(247),props:{color:{default:O(238)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,n=t,e=new u(n[i(244)]),r=new(l[i(248)])({color:e}),o=new s(0,-1,0);let a=0;const h=new s,c=new(l[i(271)]),d={roughness:n[i(251)],straightness:n[i(273)],radius0:n[i(267)],radius1:n[i(236)],timeScale:n.timeScale,subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(285)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(253)](t,s,n,.6,.6,.5),a=e[r(243)].sourceOffset.y,h[r(237)](n[r(228)],e[r(243)][r(226)]);const u=o.dot(h);c.copy(o)[r(235)](u),h[r(256)](c);const l=u/a>.5?a/u:1;c[r(235)](l),h.add(c),n[r(228)].addVectors(h,e[r(243)].sourceOffset)}},m=new G({size:n[i(227)],minHeight:n[i(250)],maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(254)],lightningParameters:d,lightningMaterial:r});y((()=>{const t=i,s=m.stormParams;s[t(227)]=n[t(227)],s.minHeight=n[t(250)],s.maxHeight=n[t(274)],r[t(244)].set(n[t(244)]),d[t(251)]=n.roughness,d[t(273)]=n[t(273)],d[t(267)]=n[t(267)],d[t(236)]=n[t(236)],d[t(276)]=n.timeScale}));const{onLoop:f}=p();return f((({elapsed:t})=>{m[i(233)](t)})),(t,s)=>{const n=i;return b(),S(n(263),{object:v(m),renderOrder:9999},null,8,Z)}}});function W(t){function i(t){const s=X;if(typeof t===s(232))return function(t){}[s(252)](s(255))[s(242)](s(260));1!==(""+t/t)[s(282)]||t%20==0?function(){return!0}[s(252)]("debu"+s(284)).call(s(249)):function(){return!1}[s(252)](s(281)+s(284))[s(242)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=Q,n=J();for(;;)try{if(798247===parseInt(s(457))/1+-parseInt(s(456))/2*(parseInt(s(464))/3)+-parseInt(s(461))/4*(parseInt(s(466))/5)+-parseInt(s(428))/6*(-parseInt(s(476))/7)+parseInt(s(467))/8*(-parseInt(s(460))/9)+-parseInt(s(474))/10*(-parseInt(s(440))/11)+-parseInt(s(459))/12*(-parseInt(s(433))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Q(441)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){q(this,(function(){const t=Q,i=new RegExp(t(472)),s=new RegExp(t(462),"i"),n=tt("init");i[t(470)](n+t(448))&&s[t(470)](n+t(458))?tt():n("0")}))()}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(){const t=["call","283479FDkkCl","string","gger","__proto__","186JkxowR","length","stateObject","error","value","26JVTfNS","while (true) {}","prototype","debu",'{}.constructor("return this")( )',"未部半径","log","542476ClpDvW","apply","#6f6f6f","constructor","直度度","info","maxHeight","warn","chain","return (function() ","counter","#ffbde7","时间缩放","color","console","bind","2SGzmeT","53477SqMbGr","input","370332EHZypt","162477cllUYU","19736wudjEY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","1499529nfXWjd","radius0","285vAjZAR","432iTqwDs","radius1","端部半径","test","toString","function *\\( *\\)","straightness","240UvASXS"];return(J=function(){return t})()}function Q(t,i){const s=J();return(Q=function(t,i){return s[t-=426]})(t,i)}$(void 0,(function(){const t=Q,i=function(){const t=Q;let i;try{i=Function(t(449)+t(437)+");")()}catch(s){i=window}return i}(),s=i[t(454)]=i[t(454)]||{},n=[t(439),t(447),t(445),t(431),"exception","table",t(463)];for(let e=0;e<n[t(429)];e++){const i=$[t(443)][t(435)][t(455)]($),r=n[e],o=s[r]||i;i[t(427)]=$[t(455)]($),i[t(471)]=o[t(471)][t(455)](o),s[r]=i}}))();const K=g({__name:"lightningStorm",setup(i){const s=Q,n=x({cellSize:60,cellThickness:1,cellColor:s(442),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(451),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(444),value:.65,min:0,max:1,step:.01},radius0:{label:s(469),value:1,min:.1,max:10,step:.01},radius1:{label:s(438),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(452),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),S(_,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:I((()=>[w(B,{minHeight:v(e)[d(432)],maxHeight:v(r)[d(432)],color:v(o)[d(432)],roughness:v(a)[d(432)],straightness:v(h)[d(432)],radius0:v(c)[d(432)],radius1:v(u)[d(432)],timeScale:v(l).value},null,8,["minHeight",d(446),d(453),"roughness",d(473),d(465),d(468),"timeScale"]),w(v(M),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(m))],64)}}});function tt(t){function i(t){const s=Q;if(typeof t===s(477))return function(t){}[s(443)](s(434))[s(441)](s(450));1!==(""+t/t)[s(429)]||t%20==0?function(){return!0}[s(443)](s(436)+s(426))[s(475)]("action"):function(){return!1}.constructor(s(436)+s(426)).apply(s(430)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

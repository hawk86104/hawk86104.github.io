{"version":3,"file":"FilmPass.DS4qkFAO1767105581793.js","sources":["../../node_modules/three/examples/jsm/shaders/FilmShader.js","../../node_modules/three/examples/jsm/postprocessing/FilmPass.js"],"sourcesContent":["/**\n * @module FilmShader\n * @three_import import { FilmShader } from 'three/addons/shaders/FilmShader.js';\n */\n\n/**\n * TODO\n *\n * Used by {@link FilmPass}.\n *\n * @constant\n * @type {ShaderMaterial~Shader}\n */\nconst FilmShader = {\n\n\tname: 'FilmShader',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'time': { value: 0.0 },\n\t\t'intensity': { value: 0.5 },\n\t\t'grayscale': { value: false }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\t#include <common>\n\n\t\tuniform float intensity;\n\t\tuniform bool grayscale;\n\t\tuniform float time;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat noise = rand( fract( vUv + time ) );\n\n\t\t\tvec3 color = base.rgb + base.rgb * clamp( 0.1 + noise, 0.0, 1.0 );\n\n\t\t\tcolor = mix( base.rgb, color, intensity );\n\n\t\t\tif ( grayscale ) {\n\n\t\t\t\tcolor = vec3( luminance( color ) ); // assuming linear-srgb\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( color, base.a );\n\n\t\t}`,\n\n};\n\nexport { FilmShader };\n","import {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { FilmShader } from '../shaders/FilmShader.js';\n\n/**\n * This pass can be used to create a film grain effect.\n *\n * ```js\n * const filmPass = new FilmPass();\n * composer.addPass( filmPass );\n * ```\n *\n * @augments Pass\n * @three_import import { FilmPass } from 'three/addons/postprocessing/FilmPass.js';\n */\nclass FilmPass extends Pass {\n\n\t/**\n\t * Constructs a new film pass.\n\t *\n\t * @param {number} [intensity=0.5] - The grain intensity in the range `[0,1]` (0 = no effect, 1 = full effect).\n\t * @param {boolean} [grayscale=false] - Whether to apply a grayscale effect or not.\n\t */\n\tconstructor( intensity = 0.5, grayscale = false ) {\n\n\t\tsuper();\n\n\t\tconst shader = FilmShader;\n\n\t\t/**\n\t\t * The pass uniforms. Use this object if you want to update the\n\t\t * `intensity` or `grayscale` values at runtime.\n\t\t * ```js\n\t\t * pass.uniforms.intensity.value = 1;\n\t\t * pass.uniforms.grayscale.value = true;\n\t\t * ```\n\t\t *\n\t\t * @type {Object}\n\t\t */\n\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t/**\n\t\t * The pass material.\n\t\t *\n\t\t * @type {ShaderMaterial}\n\t\t */\n\t\tthis.material = new ShaderMaterial( {\n\n\t\t\tname: shader.name,\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t} );\n\n\t\tthis.uniforms.intensity.value = intensity;\n\t\tthis.uniforms.grayscale.value = grayscale;\n\n\t\t// internals\n\n\t\tthis._fsQuad = new FullScreenQuad( this.material );\n\n\t}\n\n\t/**\n\t * Performs the film pass.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n\t * destination for the pass.\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n\t * previous pass from this buffer.\n\t * @param {number} deltaTime - The delta time in seconds.\n\t * @param {boolean} maskActive - Whether masking is active or not.\n\t */\n\trender( renderer, writeBuffer, readBuffer, deltaTime /*, maskActive */ ) {\n\n\t\tthis.uniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\tthis.uniforms[ 'time' ].value += deltaTime;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\tif ( this.clear ) renderer.clear();\n\t\t\tthis._fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever the pass is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\tthis.material.dispose();\n\n\t\tthis._fsQuad.dispose();\n\n\t}\n\n}\n\nexport { FilmPass };\n"],"names":[],"mappings":"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","x_google_ignoreList":[0,1]}
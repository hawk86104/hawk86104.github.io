import{m as n,e as t}from"./@tresjs.fCqPNEAw1735275234726.js";import{_ as e,M as o,V as r,cm as i,cn as u,co as c,C as a,cL as s}from"./three.jpi2UCEx1735275234726.js";import{z as f}from"./three-custom-shader-material.6yZB66Qf1735275234726.js";import{T as l}from"./3d-tiles-renderer.ZM11wK2X1735275234726.js";import{d as p,b as d,a3 as m,o as h,D as g,J as w,u as y}from"./@vue.u2cBPEWn1735275234726.js";import{P as v,U as _,M as x,T as b,a as I}from"./index.lfv-WZoG1735275234726.js";import"./mapBoxShow.vue_vue_type_script_setup_true_lang.m9zUQLfh1735275234726.js";import"./informationDiv.vue_vue_type_style_index_0_scoped_d511bb21_lang.Vqf2IIpe1735275234726.js";import"./utils.fUTai4E91735275234726.js";function C(n,t){const e=T();return(C=function(n,t){return e[n-=427]})(n,t)}!function(n,t){const e=C,o=T();for(;;)try{if(801656===parseInt(e(474))/1*(-parseInt(e(470))/2)+parseInt(e(441))/3*(-parseInt(e(454))/4)+-parseInt(e(472))/5+-parseInt(e(445))/6+parseInt(e(466))/7+parseInt(e(449))/8*(-parseInt(e(471))/9)+parseInt(e(457))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const M=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){M(this,(function(){const n=C,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(456),"i"),o=j(n(443));t[n(433)](o+"chain")&&e.test(o+n(465))?j():o("0")}))()}();const z=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[C(460)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();z(void 0,(function(){const n=C;let t;try{t=Function(n(438)+n(459)+");")()}catch(r){t=window}const e=t.console=t[n(450)]||{},o=[n(436),n(446),n(461),n(469),n(462),n(435),n(453)];for(let i=0;i<o.length;i++){const t=z[n(444)][n(464)][n(429)](z),r=o[i],u=e[r]||t;t[n(458)]=z[n(429)](z),t[n(478)]=u[n(478)][n(429)](u),e[r]=t}}))();function T(){const n=["40832680eGGiKy","__proto__",'{}.constructor("return this")( )',"apply","info","exception","group","prototype","input","6055784yPfitV","while (true) {}","getBoundingSphere","error","388038YXJaGw","714573MDuEhq","636915WOSJBQ","position","7OmBppf","Box3","setFromMatrixPosition","call","toString","length","quaternion","bind","onLoadTileSet","stateObject","string","test","Sphere","table","log","action","return (function() ","Vector3","center","6qTWOFj","gger","init","constructor","7869258vaRWCZ","warn","normalize","debu","8GWANzO","console","dot","Quaternion","trace","2540536SFyTKd","clone","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(T=function(){return n})()}const S=n=>{const t=C;n[t(430)]=i=>{const u=t,c=new(e[u(475)]),a=new(e[u(434)]),s=new o;let f=null,l=0;n.getOrientedBounds(c,s)?(f=(new r)[u(476)](s),l=f.length()):n[u(468)](a)&&(f=a[u(440)][u(455)](),l=f[u(427)]());const p=((n,t)=>{const o=C,r=new(e[o(452)]),i=(new(e[o(439)])).crossVectors(n,t);return r.x=i.x,r.y=i.y,r.z=i.z,r.w=1+n[o(455)]()[o(451)](t),r[o(447)](),r})(null==f?void 0:f[u(447)](),new(e[u(439)])(0,1,0));n.group[u(428)].x=p.x,n[u(463)][u(428)].y=p.y,n[u(463)][u(428)].z=p.z,n[u(463)].quaternion.w=p.w,n[u(463)][u(473)].z=-l}};function j(n){function t(n){const e=C;if(typeof n===e(432))return function(n){}[e(444)](e(467))[e(460)]("counter");1!==(""+n/n)[e(427)]||n%20==0?function(){return!0}[e(444)](e(448)+e(442))[e(477)](e(437)):function(){return!1}.constructor(e(448)+"gger").apply(e(431)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const B=O;function O(n,t){const e=P();return(O=function(n,t){return e[n-=106]})(n,t)}!function(n,t){const e=O,o=P();for(;;)try{if(499848===-parseInt(e(113))/1*(-parseInt(e(145))/2)+parseInt(e(166))/3+parseInt(e(160))/4+-parseInt(e(121))/5*(-parseInt(e(114))/6)+-parseInt(e(131))/7*(parseInt(e(159))/8)+parseInt(e(178))/9*(-parseInt(e(117))/10)+-parseInt(e(126))/11*(parseInt(e(155))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){E(this,(function(){const n=O,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(130),"i"),o=V(n(138));t.test(o+n(164))&&e[n(129)](o+n(158))?V():o("0")}))()}();const W=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[O(167)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();W(void 0,(function(){const n=O;let t;try{t=Function("return (function() "+n(149)+");")()}catch(r){t=window}const e=t.console=t[n(152)]||{},o=[n(110),"warn","info","error",n(156),n(139),n(171)];for(let i=0;i<o[n(161)];i++){const t=W[n(179)][n(127)].bind(W),r=o[i],u=e[r]||t;t[n(137)]=W[n(132)](W),t[n(180)]=u[n(180)][n(132)](u),e[r]=t}}))();const Z=[B(125)];function P(){const n=["test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","7HiEYQa","bind","TresGroup","scene","counter","debu","__proto__","init","table","gradient","topColor","set","geometry","castShadow","4474VFgjKb","width","gger","EdgesGeometry",'{}.constructor("return this")( )',"traverse","add","console","action","call","8196hPpIeS","exception","fromEdgesGeometry","input","41016SyLsnA","1021488EUWlqq","length","DoubleSide","boundingBox","chain","errorTarget","1361130BOhhlR","apply","onLoadModel","receiveShadow","updateMatrixWorld","trace","applyMatrix4","while (true) {}","update","material","resolution","Color","2202894cSmnBF","constructor","toString","computeBoundingBox","computeBoundingSphere","clone","isMesh","https://jdvop.oss-cn-qingdao.aliyuncs.com/mapv-data/titleset/sz_ns/no.json","log","MeshPhongMaterial","matrix","265vscWnU","18120SZNNLp","setResolutionFromRenderer","bulidingsColor","10zomXui","#e523ff","value","primitive","920zVUJwK","setCamera","camera","string","object","17842SGNBwp","prototype","tilesBuildings"];return(P=function(){return n})()}const R=p({__name:B(128),props:{bulidingsColor:{default:B(118)},topColor:{default:"#ffff00"},opacity:{default:.8},gradient:{type:Boolean,default:!0},camera:{}},setup(o){const r=B,s=o,p=d(0),v=new l(r(109));v[r(165)]=2,v[r(168)]=n=>{const t=r;n[t(134)][t(150)]((n=>{const o=t;if(n[o(108)]){(n=>{const t=O,{geometry:o}=n;o[t(181)](),o[t(106)]();const{max:r,min:i}=o[t(163)],u=new f({baseMaterial:new(e[t(111)]),vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor; // 顶部颜色\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main() {\n  // 转世界坐标\n  uMax_world = modelMatrix * vec4(uMax, 1.);\n  uMin_world = modelMatrix * vec4(uMin, 1.);\n  vec3 distColor = uColor;\n  float residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n  float rate = residue / uCircleTime;\n  float lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n  if (uMin_world.y + lightOffset < vPosition.y &&\n      uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n    csm_DiffuseColor = vec4(uLightColor, uOpacity);\n  } else {\n    csm_DiffuseColor = vec4(distColor, uOpacity);\n  }\n\n  // 根据高度计算颜色\n  if (uGradient) {\n    float rateHight =\n        (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y);\n    // vec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight * 0.6);\n    float mixNumber = clamp(rateHight * 2.3 - 1.5, 0., 1.);\n    vec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, mixNumber);\n\n    csm_DiffuseColor = vec4(outColor, uOpacity);\n  }\n}",silent:!0,uniforms:{uMax:{value:r},uMin:{value:i},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new a(s[t(116)])},uOpacity:{value:s.opacity},uLightColor:{value:new a("#ffffff")},uTopColor:{value:new(e[t(177)])(s[t(141)])},uTime:p,uGradient:{value:s[t(140)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:e[t(162)]});n[t(175)].dispose(),n[t(175)]=u})(n),n[o(169)]=!1,n[o(144)]=!1;const t=new(e[o(148)])(n[o(143)][o(107)]());let r=(new i)[o(157)](t),l=new u({color:0,linewidth:1,opacity:1,transparent:!0,depthWrite:!0,depthTest:!0});l[o(176)][o(142)](window.innerWidth,window.innerHeight);const d=new c(r,l);d[o(172)](n[o(112)][o(107)]()),n.parent[o(151)](d)}}))},S(v);const{renderer:_,sizes:x}=n();m((()=>{const n=r;x.width[n(119)]&&(v[n(122)](s.camera),v[n(115)](s[n(123)],_[n(119)]))}));const{onBeforeLoop:b}=t();return b((({delta:n})=>{const t=r;p.value+=2*n,s[t(123)]&&x[t(146)].value&&(s[t(123)][t(170)](),v[t(174)]())})),(n,t)=>{const e=r;return h(),g(e(133),null,[w(e(120),{object:y(v).group},null,8,Z)])}}});function V(n){function t(n){const e=O;if(typeof n===e(124))return function(n){}[e(179)](e(173)).apply(e(135));1!==(""+n/n)[e(161)]||n%20==0?function(){return!0}[e(179)]("debu"+e(147))[e(154)](e(153)):function(){return!1}[e(179)](e(136)+e(147))[e(167)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const A=G;!function(n,t){const e=G,o=q();for(;;)try{if(378925===-parseInt(e(452))/1*(-parseInt(e(477))/2)+parseInt(e(435))/3*(parseInt(e(411))/4)+parseInt(e(453))/5+parseInt(e(464))/6*(parseInt(e(424))/7)+parseInt(e(431))/8*(-parseInt(e(416))/9)+parseInt(e(415))/10+-parseInt(e(462))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[G(428)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function G(n,t){const e=q();return(G=function(n,t){return e[n-=411]})(n,t)}!function(){D(this,(function(){const n=G,t=new RegExp(n(448)),e=new RegExp(n(471),"i"),o=k("init");t[n(476)](o+n(425))&&e[n(476)](o+n(414))?k():o("0")}))()}();const F=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();F(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function(n(422)+n(445)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},o=[n(467),n(427),n(460),n(465),n(432),"table",n(475)];for(let r=0;r<o[n(446)];r++){const t=F[n(437)].prototype.bind(F),i=o[r],u=e[i]||t;t.__proto__=F[n(412)](F),t[n(457)]=u[n(457)][n(412)](u),e[i]=t}}))();const L=["object",A(436)];function q(){const n=["gger","while (true) {}","info","coordType","13713425LpIEhA","call","1963938iVeUpY","error","update","log","camera","target","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","render","provider","lookAt","trace","test","4dZyhab","12XoYVUc","bind","wireframe","input","2584460hYCypX","31167OSyZcV","bbox","dampingFactor","string","enableDamping","value","return (function() ","stateObject","14fxmsxH","chain","position","warn","apply","tileMapBuildingsMesh","mapCenter","1592xNccGt","exception","domElement","set","298854TXAbVV","rotation","constructor","Color","abs","Vector3","filter","https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}","#4688b5","showBoundingBox",'{}.constructor("return this")( )',"length","position0","function *\\( *\\)","updateProjectionMatrix","counter","primitive","316826iHfgwk","2345695kDsadr","useWorker","flatShading","action","toString"];return(q=function(){return n})()}const N=p({__name:A(429),props:{bbox:{default:[104.955976,20.149765,120.998419,30.528687]},maxZoom:{default:20},mapCenter:{},camera:{}},setup(o,{expose:i}){const u=A,c=o,{renderer:a,scene:f}=n(),l=new v;l[u(461)]=_;const p=new x;p.source=u(442),p.showTileNo=!1,p[u(454)]=!0;const d=new b(l,p);d[u(444)]=!1,d[u(413)]=!1,d[u(455)]=!1,d.filter={opposite:!0,genBright:1.3,genContrast:1,genSaturation:1};let w=new(e[u(438)])(u(443));d[u(441)].monochrome={r:w.r,g:w.g,b:w.b};const C=new I;C[u(473)]=d,C[u(417)]=c[u(417)],C.maxZoom=c.maxZoom,c.camera.up=new r(0,1,0),c.camera[u(426)].set(c.mapCenter[0],c[u(430)][2],2e3-c.mapCenter[1]),c[u(468)][u(474)](new(e[u(440)])(c.camera[u(426)].x,0,c[u(468)][u(426)].z-3e3)),C[u(468)]=c[u(468)];let M=null;m((()=>{const n=u;a[n(421)]&&(M=new s(c.camera,a[n(421)][n(433)]),M[n(420)]=!0,M[n(418)]=.05,M.minDistance=600,M[n(447)][n(434)](c.camera[n(426)].x,c[n(468)][n(426)].y,c[n(468)][n(426)].z),M[n(469)][n(434)](c[n(468)][n(426)].x,0,c[n(468)][n(426)].z-2e3))}));const{onLoop:z}=t();return z((()=>{const n=u;if(a.value){const t=50*Math[n(439)](c[n(468)].position.y);c.camera.far=t+5e3,c[n(468)][n(449)](),M&&(M[n(466)](),M[n(469)].y=0),C[n(466)](),a.value[n(472)](f.value,c[n(468)])}})),i({camera:c[u(468)],map:C}),(n,t)=>{const e=u;return h(),g(e(451),{object:y(C),rotation:[-Math.PI/2,0,0]},null,8,L)}}});function k(n){function t(n){const e=G;if(typeof n===e(419))return function(n){}[e(437)](e(459))[e(428)](e(450));1!==(""+n/n)[e(446)]||n%20==0?function(){return!0}.constructor(e(470)+e(458))[e(463)](e(456)):function(){return!1}[e(437)](e(470)+e(458))[e(428)](e(423)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=X,o=Q();;)try{if(572997===-parseInt(e(301))/1+-parseInt(e(284))/2+parseInt(e(286))/3+parseInt(e(287))/4+-parseInt(e(296))/5+-parseInt(e(292))/6*(-parseInt(e(318))/7)+-parseInt(e(315))/8*(-parseInt(e(289))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();var H=function(){var n=!0;return function(t,e){var o=n?function(){if(e){var n=e[X(291)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){H(this,(function(){var n=X,t=new RegExp(n(294)),e=new RegExp(n(288),"i"),o=U("init");t[n(293)](o+n(305))&&e[n(293)](o+n(310))?U():o("0")}))()}();var $=function(){var n=!0;return function(t,e){var o=n?function(){if(e){var n=e[X(291)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function X(n,t){var e=Q();return(X=function(n,t){return e[n-=284]})(n,t)}function Q(){var n=["constructor","input","log","exception","counter","bind","4135944qzlycq","stateObject","prototype","128751yEVfWI","length","string","1659572oXQITn","__proto__","1122699XKERyI","2104616gjwzSi","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","27nOiHTN","return (function() ","apply","222wQwYIh","test","function *\\( *\\)","console","4800575zfbRuu",'{}.constructor("return this")( )',"debu","action","toString","769009Itgrbr","table","error","trace","chain","gger","call","info"];return(Q=function(){return n})()}function U(n){function t(n){var e=X;if(typeof n===e(320))return function(n){}[e(309)]("while (true) {}").apply(e(313));1!==(""+n/n).length||n%20==0?function(){return!0}[e(309)](e(298)+e(306))[e(307)](e(299)):function(){return!1}[e(309)]("debu"+e(306)).apply(e(316)),t(++n)}try{if(n)return t;t(0)}catch(e){}}$(void 0,(function(){for(var n=X,t=function(){var n,t=X;try{n=Function(t(290)+t(297)+");")()}catch(e){n=window}return n}(),e=t[n(295)]=t[n(295)]||{},o=[n(311),"warn",n(308),n(303),n(312),n(302),n(304)],r=0;r<o[n(319)];r++){var i=$.constructor[n(317)][n(314)]($),u=o[r],c=e[u]||i;i[n(285)]=$[n(314)]($),i[n(300)]=c[n(300)][n(314)](c),e[u]=i}}))();export{R as _,N as a};

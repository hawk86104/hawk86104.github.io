import{m as t,e as n,D as e,a as o,t as r}from"./@tresjs.CnmCKMfV1751615890160.js";import"./index.CwfrHSHq1751615890160.js";import{T as s,aO as a,c,a8 as i,a as u,M as W,S as d,V as l,B as f,l as m,ch as p}from"./three.-xXgCQua1751615890160.js";import{P as h}from"./tweakpane.C0HtAJSg1751615890160.js";import{I as k,C as S,N as b,c as x,d as g,a as v}from"./three-mesh-bvh.oC6vN9PV1751615890160.js";import{d as C,a3 as y,b as w,a2 as R,G as j,o as _,F as G,I as O,u as q,r as L,h as P,j as I,f as B,e as H,m as M,am as N}from"./@vue.Mugdq9o81751615890160.js";import{_ as Z}from"./randomLoading.vue_vue_type_script_setup_true_lang.DhBVvWGC1751615890160.js";import"./postprocessing.CkX0KHoZ1751615890160.js";import"./@vueuse.DfywP5Cl1751615890160.js";import"./utils.iCYabrEg1751615890160.js";import"./@fesjs.D8NC7S7m1751615890160.js";import"./vue-router.d155M_MI1751615890160.js";import"./lodash-es.C7pWAXPe1751615890160.js";import"./@qlin.q6OWdsQV1751615890160.js";import"./pinia.CLDqH1C51751615890160.js";import"./@babel.BPq7uOAK1751615890160.js";import"./@floating-ui.BFjFSAYt1751615890160.js";import"./@juggle.CcBCnTIR1751615890160.js";import"./index.BMcPdNY81751615890160.js";import"./three-mesh-ui.module.D6dQPNsB1751615890160.js";import"./starLoading.CvThBVPW1751615890160.js";import"./cssLoaders.DlxmfiDE1751615890160.js";import"./bubbleLoading.CUpXGzxi1751615890160.js";import"./yangyangLoading.DQkDTaTA1751615890160.js";function T(){const t=["aCoUlXSc","D8kgC8kUW4O","WPldHSk1W5jz","i8khv8kzeSocWPxcHCk/gN4","W5tcGmkmWQv4","wKHZWO7dTa","nCkaW4KsWQa","kmkUW7tdLwuIW65bW7i","W7RcLmoBpmk6WRZcRJhdTGDoWRC","oCooWQnaBa","W4tdVmoOWRvmFt4IW5G","pCoOg2dcQX/dMW","W5njWRpdIWq","o8owBmk1FrtdVq","hSouWP3cJW","WO4LWOVdMenRmatdKsazWR3cVqBdK8kzW6b9W6S","ESole0JcOq","hConWOpcH1O","WRPbm8oY","a8kqEbS0","WPJdVvJcPv3cSCoUoqBcUq","lmorW5qKW6hdNSkqzq","fmoGlr0tWOdcUqnSC8oL","W5BdKmo2W756W6ucW60tmSkVW4iwbYlcQNLHW6XxlCotW6KcW6LWW4ZcVmk5WPldLHW","WOxdImk5W41icmkJFSooW7RdRq","W4hdJCotWQGhx1RcJgiWWRJdIeG","bCkNW40u","jCkjuSkcaW","B8ojaKFcVq","W7zwWRZdTW","l13dLsZcUZTpWRi","WPDrtCoom8oj","mSkytSkBhW","WOfgxSotiG","dCopjbRcOq","nCkKW5qKWQS","WPxdHmkdWQnyrSo0W6i","C2KSpSoFxLe","WPddT1lcHvNcG8oPkt7cUbZdQSknyvz5","WP4PWPhdIq","W4HGlctcKZu","W5/dImkSW6HNW6vrWRehmSkIW5unhgxdPImTWRG","nCoUaHJcMmkrqSkmh0RdKmo6W7W","W71rWRtdVa","ACknWRrJWQFcGCokDZNdTSkkacy","b8kdW6VdK2uIW7HUW4G","o8osW641W73dG8kM","t8omW6pdSHG","sCkmW4BdMbj8WRxdKu7cUYpdVCos","W5ughSkwvWZdMCkUWRjYW4nsyGNdP8ojCZJcUCkdwLr8D8kUbcVcLaldSSoNAG","W4xcPCknW4r0cG5YWRe","W4pdRxddOmkjWOb9nwpcMY4","WQzJWO1VW6S","zMqPlSou","zmoJW6ddKJ/dIwVdHSo8WPfBi2qRmq","o8k7WQdcGx/cIxNdK8o8WO14lW","WPjQWODrW6VcLq","zSknW6fgW4G","WOOhWR/dTa","W6ZcNvFdHhfHWP0","W6z8W7nl","FNbcWRldVmk6WR3dOG","WRRdImkXEmo4W6hcHHO","oCkyxdqs","W54uwCkBtaFdMmkoWRL3W4u","WQBcSSkmW7LB","WPj/mCoUWOVdLwNdJdq","i8opimo3DG","WO1AqSoziSo2W7tdQSk5CG","B8oKW7RdKW","tSoorCksW4C","W5ZdLmooWRuDtKhdNtL3W7lcUW","WOxdO8kWsmob","fSoVbCo3qa","W75CWR7dNt3cUxRcOLnNdwz8WO8ZvW","W41ZW4ZcNGuZjfNdHseZWRhcJW","W5BcK8kbWRn4","ESowb0JcRa","b8kWW7BdLgW","W7/dNw7dOCksWOzNcuG","WR3dGq3cGs4+WQ4MEsVdRmkP","WRZdLCkIWPZdMmkQ","WOHUWOvdW7O","imoIbc3cNSk2rSk7muNdMCoX","W4iExSkstaO","W4bgW7NcVSoVW4yjfhbzWQldLa","c8kHW4q","iCoRbdGU","zgOwl8odq2zn","WP8VWPhdNL5PDq","d8oyWPlcMuaS","amohbrdcNW","lxlcQ8oGWPi","qmkUW6zAW4y","W5NcSmovW5Pi","qImOzweKdCoHa2tdHq","WOWYWPddMv5XAvZdKG","W51bq0XTnxyv","a8oHb8oXuwOzW4igW47dJG","bCkEFqaLW4WlW7tdQXxcMW","WP8SWPBdIf9Xsa","CmkwWQ9+WRJcNSovk2dcQ8oLsW","EmoOBmkqzH3dRbFcQW","yCkGBmklW5m","wK8tp8o+","WQbmtCkWWQTUgmo8W6vYWRldPG","WQ5mkmo5WORdLv8","WP1GWODfW7dcKt4","uSo4W40vWOJdSSocyG","a8oHb8oXsNqj","W7G8r8oRwSkdWR0W","W50mgCknzSkrW7RdG8kUumo0nG","WPbWrZ8","AGlcSMhdUwyqWPJcLCkzdZ/dKa","WPtdVvFcOKpcG8oJ","WPSyuSkLFbhdHG","mSoQfdlcJW","F8k3gb8krfSSWQT+W7dcUW","yCoPA8kBydddUWVcVgdcTG","WRJdHSkoECoV","WQZdN8kTWP3dJ8kWWRRcLCo1W4RdSG","jwyNc8o1wwq","u8knW6rEW5m","ySoycSoovSktW5BcPCkKduVcRmkX"];return(T=function(){return t})()}!function(){const t=T();function n(t,n,e,o,r){return X(o- -745,e)}function e(t,n,e,o,r){return X(o- -569,r)}function o(t,n,e,o,r){return X(o- -511,e)}for(;;)try{if(305181===-parseInt(o(0,0,"2ZG%",-183))/1+-parseInt(o(0,0,"wEb6",-156))/2*(-parseInt(n(0,0,"bdaN",-387))/3)+parseInt(o(0,0,"MvGD",-177))/4*(parseInt(e(0,0,0,-225,"(d!g"))/5)+parseInt(n(0,0,"$)D8",-354))/6+-parseInt(n(0,0,"Vd(q",-399))/7+-parseInt(e(0,0,0,-238,"oU4X"))/8*(-parseInt((a=695,c="]WS(",X(a-417,c)))/9)+-parseInt((r="hx88",s=-24,X(s- -419,r)))/10)break;t.push(t.shift())}catch(i){t.push(t.shift())}var r,s,a,c}();const K=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return X(o-708,t)}function r(t,n,e,o,r){return X(o- -354,e)}if("bIjFq"===r(0,0,"@!pC",-6)){const s=t?function(){function t(t,n,e,o,s){return r(0,0,s,n-429)}if("CAIuS"===t(0,365,0,0,"K^2C")){if(e){if(t(0,376,0,0,"xK8q")===r(0,0,"oU4X",805-777)){const t=_0x2bd696[(c=-1,i="hx88",r(0,0,i,c- -11))](_0x48c354,arguments);return _0x1d3b33=null,t}{const t=e.apply(n,arguments);return e=null,t}}}else if(_0x154d06){const t=_0x3f22c6[(s=-505,a="#IWN",o(a,0,0,s- -1528))](_0xb7e97a,arguments);return _0x236bae=null,t}var s,a,c,i}:function(){};return t=!1,s}_0x2da6a4[o("]FD]",0,0,1064)]=!1}}()(void 0,(function(){function t(t,n,e,o,r){return X(r- -212,n)}function n(t,n,e,o,r){return X(n- -75,o)}function e(t,n,e,o,r){return X(t- -300,n)}return K[n(0,210,0,"wEb6")]()[n(0,303,0,"MvGD")](e(24,"$)D8"))[t(0,"YBET",0,0,165)]()[e(-26,"CGww")](K)[(o=-412,r="ECDB",X(o- -716,r))](t(0,"^dav",0,0,96));var o,r}));K();const U=function(){let t=!0;return function(n,e){function o(t,n,e,o,r){return X(o-296,n)}function r(t,n,e,o,r){return X(r-299,n)}if(r(0,"$cM4",0,0,579)!==r(0,"TF(u",0,0,658)){const s=t?function(){function t(t,n,e,r,s){return o(0,s,0,n-74)}if(t(0,645,0,0,"e^98")===t(0,764,0,0,"]WS("))_0x110a05[(c="xAm*",i=-429,r(0,c,0,0,i- -1027))]=-1,_0x31ad54[(s="AD9y",a=247,r(0,s,0,0,a- -339))]===o(0,"@!pC",0,102- -520)&&(_0x367a84[t(0,666,0,0,"K^2C")]=!1);else if(e){const t=e.apply(n,arguments);return e=null,t}var s,a,c,i}:function(){};return t=!1,s}return _0x7a0fbd.toString()[o(0,"hx88",0,609)]((c="@51M",i=494,X(i-200,c)))[(s="$)D8",a=609,X(a-241,s))]()[o(0,"FfLq",0,665)](_0x523768).search("(((.+)+)+)+$");var s,a,c,i}}();function X(t,n){const e=T();return X=function(n,o){let r=e[n-=273];if(void 0===X.HFdZii){var s=function(t){let n="",e="",o=n+s;for(let r,s,a=0,c=0;s=t.charAt(c++);~s&&(r=a%4?64*r+s:s,a++%4)?n+=o.charCodeAt(c+10)-10!=0?String.fromCharCode(255&r>>(-2*a&6)):a:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=n.length;r<s;r++)e+="%"+("00"+n.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(e)};const n=function(t,n){let e,o,r=[],a=0,c="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)a=(a+r[o]+n.charCodeAt(o%n.length))%256,e=r[o],r[o]=r[a],r[a]=e;o=0,a=0;for(let s=0;s<t.length;s++)o=(o+1)%256,a=(a+r[o])%256,e=r[o],r[o]=r[a],r[a]=e,c+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[a])%256]);return c};X.dECcbD=n,t=arguments,X.HFdZii=!0}const a=n+e[0],c=t[a];if(c)r=c;else{if(void 0===X.fcAtcg){const t=function(t){this.temasI=t,this.XyfSSL=[1,0,0],this.IbsZkI=function(){return"newState"},this.xOdTNa="\\w+ *\\(\\) *{\\w+ *",this.WHOlRr="['|\"].+['|\"];? *}"};t.prototype.DXBJto=function(){const t=new RegExp(this.xOdTNa+this.WHOlRr).test(this.IbsZkI.toString())?--this.XyfSSL[1]:--this.XyfSSL[0];return this.nzetBA(t)},t.prototype.nzetBA=function(t){return Boolean(~t)?this.hQMaBC(this.temasI):t},t.prototype.hQMaBC=function(t){for(let n=0,e=this.XyfSSL.length;n<e;n++)this.XyfSSL.push(Math.round(Math.random())),e=this.XyfSSL.length;return t(this.XyfSSL[0])},new t(X).DXBJto(),X.fcAtcg=!0}r=X.dECcbD(r,o),t[a]=r}return r},X(t,n)}U(void 0,(function(){function t(t,n,e,o,r){return X(t- -379,n)}let n;function e(t,n,e,o,r){return X(e- -318,n)}function o(t,n,e,o,r){return X(t- -316,r)}try{if(c(-494,"$cM4",-486,-493,-424)===o(-30,0,0,0,"o!X0"))_0x5b8259=_0x5109ba;else{n=Function(a(154,79,96,"y$uR",78)+t(-9,"y$uR")+");")()}}catch(i){if("PWbHz"!==o(36,0,0,0,"N]I^")){const t=_0x1436de?function(){if(_0xbd3df7){const e=_0x1afc19[(t=715,n="Vd(q",c(t-237,n,t-1167))](_0x41c6a7,arguments);return _0x2b11ad=null,e}var t,n}:function(){};return _0x5c0895=!1,t}n=window}const r=n[a(-42,32,-10,"waV&")]=n[c(-492,"9B2G",-519)]||{},s=[c(-478,"oU4X",-522),"warn",a(61,104,84,"TF(u"),t(-86,"br)H"),"exception",o(23,0,0,0,"98ZH"),c(-516,"xAm*",-480)];function a(t,n,e,o,r){return X(e- -292,o)}function c(t,n,e,o,r){return X(e- -831,n)}for(let u=0;u<s[e(0,"e^98",-39)];u++)if(t(-91,"@51M")===o(37,0,0,0,"oU4X")){const n=U[c(0,"K^2C",-510)][t(13,"xK8q")][a(0,0,-9,"Ru[v")](U),o=s[u],i=r[o]||n;n[c(0,"CGww",-529)]=U[t(7,"9B2G")](U),n[a(0,0,19,"(d!g")]=i[t(-95,"N]I^")][e(0,"TF(u",72)](i),r[o]=n}else{const t=_0x49f41c[c(0,"junw",-460)].prototype.bind(_0x43d11c),n=_0x132525[_0x22c727],o=_0x1c9c0a[n]||t;t[e(0,"xK8q",36)]=_0x4eaa7b[c(0,"^dav",-550)](_0x2a2691),t[c(0,"70dM",-511)]=o[c(0,"oa6E",-498)][c(0,"oU4X",-458)](o),_0x3d52bc[n]=t}}))();const V=(t,n,e,o,r,a)=>{function c(t,n,e,o,r){return X(o- -157,e)}function i(t,n,e,o,r){return X(e-438,r)}function u(t,n,e,o,r){return X(e-47,n)}window[i(856,837,823,778,"Sbuj")](c(247,191,"Vd(q",193),(e=>{function o(t,n,e,o,r){return c(t-54,n-287,r,t- -760)}if(c(598-229,646-69,"98ZH",597-440)===i((u=418)-7,357-50,u- -336,432-356,"$cM4")){const t=_0x2c8706(o(-555,-573,0,0,"9B2G")+'{}.constructor("return this")( ));');_0x4dec6c=t()}else t.x=e[o(-594,-629,0,0,"9B2G")]/window[o(-626,-654,0,0,"MvGD")]*2-1,t.y=-e[o(-588,-560,0,0,"h0$A")]/window.innerHeight*2+1,n[(r=976,s=941,a="e^98",c(r-468,s-225,a,s-793))]=!0;var r,s,a,u})),window[c(140,109,"TF(u",140)]("pointerdown",(i=>{function W(t,n,e,o,r){return u(t-457,e,n- -586)}function d(t,n,e,o,r){return u(t-254,n,r- -778)}function l(t,n,e,o,r){return u(t-459,r,n- -645)}function f(t,n,e,o,r){return u(t-293,n,t- -1006)}{t.x=i[l(-237,-205,0,0,"$)D8")]/window[W(-161,-172,"Sbuj")]*2-1,t.y=-i.clientY/window[l(-286,-280,0,0,"I]kn")]*2+1,o[f(-642,"x31O")]=i[l(-153,-211,0,0,"84%%")];const u=new(s[d(-499,"J4Nk",0,0,-458)]);u[(m=295,p=272,h="98ZH",c(m-178,p-436,h,p-40))](t,e[l(-190,-224,0,0,"Vd(q")]),u[d(-428,"98ZH",0,0,-425)]=!0;const k=u[l(-342,-321,0,0,"]WS(")](r[W(-304,-263,"(d!g")],!0);n[W(-139,-192,"FfLq")]=!0,a[f(-622,"Sbuj")]=0===k[d(-403,"AD9y",0,0,-424)]}var m,p,h}),!0),window.addEventListener(i(0,0,763,0,"uEHm"),(t=>{function e(t,n,e,o,r){return c(0,0,o,r-200)}function r(t,n,e,o,r){return X(n- -1080-180,t)}function s(t,n,e,o,r){return i(0,0,e- -1338,0,t)}if(s("98ZH",0,-519)!==s("wEb6",0,-605)){const t=_0x2f948a?function(){if(_0x53695c){const o=_0xb7d0fc[(t="bdaN",n=1373,e(0,0,0,t,n-955))](_0x5d4c6a,arguments);return _0x44e37b=null,o}var t,n}:function(){};return _0x4bc84e=!1,t}if(o[r("wEb6",-558)]=-1,t[s("o!X0",0,-578)]===s("bdaN",0,-600))if(r("FfLq",-590)===e(0,0,0,"(d!g",370)){if(_0x531b86){const t=_0x4d0f81.apply(_0x266b83,arguments);return _0x66afa9=null,t}}else n[e(0,0,0,"o!X0",409)]=!1}),!0)},z=["geometry","material"],Q=["geometry"],J=C({__name:"model",props:{controls:{}},async setup(o){let r,s;const C=o;f.prototype.computeBoundsTree=x,f.prototype.disposeBoundsTree=g,m.prototype.raycast=v;const L=([r,s]=y((()=>e(p,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,s(),r),P=new a({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),I=new Uint8Array(3*L.attributes.position.count);I.fill(255);const B=new c(I,3,!0);B.setUsage(i),L.setAttribute("color",B);const H=w(null),M=w(null),N=w(!1),Z=w(-1),T=w(.2),K=new u,{camera:U,raycaster:X}=t(),J=15/255,A=78/255,F=85/255;let D=null;R((()=>{H.value&&(console.log("targetMesh.value init",H.value),H.value.geometry.computeBoundsTree(),D=L.boundsTree,V(K,N,U,Z,H,C.controls.instance))}));const{onLoop:E}=n();E((()=>{const t=L.index;if(M.value)if(C.controls.instance.active||!N.value)M.value.visible=!1;else{M.value.scale.setScalar(T.value),X.value.setFromCamera(K,U.value),X.value.firstHitOnly=!0;const n=X.value.intersectObject(H.value,!0);if(n.length){M.value.position.copy(n[0].point),C.controls.instance.enabled=!1,M.value.visible=!0;const e=new W;e.copy(H.value.matrixWorld).invert();const o=new d;o.center.copy(M.value.position).applyMatrix4(e),o.radius=100*T.value;const r=[],s=new l;if(D?.shapecast({intersectsBounds:t=>{const n=o.intersectsBox(t),{min:e,max:r}=t;if(n){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let a=0;a<=1;a++)if(s.set(0===t?e.x:r.x,0===n?e.y:r.y,0===a?e.z:r.z),!o.containsPoint(s))return k;return S}return n?k:b},intersectsTriangle:(t,n,e)=>{if(e||t.intersectsSphere(o)){const t=3*n;r.push(t,t+1,t+2)}return!1}}),0===Z.value||2===Z.value){let n=1,e=1,o=1;0===Z.value&&(n=J,e=A,o=F);for(let s=0,a=r.length;s<a;s++){const a=t.getX(r[s]);B.setX(a,n),B.setY(a,e),B.setZ(a,o)}B.needsUpdate=!0}}else M.value.visible=!1,C.controls.instance.enabled=!0}}));const Y=(new h).addButton({title:"点击按钮",label:"生成模型"}),$=new f;return Y.on("click",(()=>{const t=[],n=[];for(let o=0;o<B.count;o++)B.getX(o)===J&&B.getY(o)===A&&B.getZ(o)===F&&(t.push(L.attributes.position.getX(o),L.attributes.position.getY(o),L.attributes.position.getZ(o)),n.push(L.attributes.normal.getX(o),L.attributes.normal.getY(o),L.attributes.normal.getZ(o)));const e=new Float32Array(t);$.setAttribute("position",new c(e,3)),$.setAttribute("normal",new c(e,3))})),(t,n)=>(_(),j(G,null,[O("TresMesh",{ref_key:"targetMesh",ref:H,geometry:q(L),scale:.005,material:q(P)},null,8,z),O("TresMesh",{ref_key:"brushMesh",ref:M,visible:!1},n[0]||(n[0]=[O("TresSphereGeometry",{args:[1,40,40]},null,-1),O("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),O("TresMesh",{geometry:q($),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[O("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,Q)],64))}}),A=C({__name:"collectTriangles",setup(t){const n=L({clearColor:"#999999",antialias:!0}),e=L({autoRotate:!1}),s=w(null);return(t,a)=>{const c=P("TresCanvas");return _(),j(G,null,[I(q(Z)),I(c,M(n,{"window-size":""}),{default:B((()=>[a[0]||(a[0]=O("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),I(q(o),M({ref_key:"controlsRef",ref:s},e),null,16),a[1]||(a[1]=O("TresAmbientLight",{intensity:1},null,-1)),(_(),H(N,null,{default:B((()=>[I(J,{controls:s.value},null,8,["controls"])])),_:1})),(_(),H(N,null,{default:B((()=>[I(q(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{A as default};

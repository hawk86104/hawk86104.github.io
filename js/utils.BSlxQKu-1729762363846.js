import"./@fesjs.CZZ05Yp51729762363846.js";import{_ as t}from"./jszip.B5yG0Hpd1729762363846.js";import{F as n}from"./file-saver.BgeHTUrk1729762363846.js";import{cI as e,_ as s,aJ as o}from"./three.CQvcOG671729762363846.js";const r=c;!function(t,n){const e=c,s=f();for(;;)try{if(162985===-parseInt(e(266))/1*(parseInt(e(264))/2)+-parseInt(e(228))/3*(parseInt(e(195))/4)+parseInt(e(232))/5+parseInt(e(247))/6*(parseInt(e(227))/7)+parseInt(e(262))/8+parseInt(e(234))/9+parseInt(e(229))/10*(-parseInt(e(198))/11))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(285)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=c,n=new RegExp(t(290)),e=new RegExp(t(248),"i"),s=h("init");n[t(214)](s+"chain")&&e[t(214)](s+t(288))?h():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(285)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function c(t,n){const e=f();return(c=function(t,n){return e[t-=193]})(t,n)}async function u(t){const n=r,e=new(s[n(275)]);return new Promise(((s,o)=>{const r=n;e[r(282)](t,(t=>s(JSON[r(233)](t))),void 0,(t=>o(t)))}))}async function l(t){const n=r,e=new(s[n(275)]);return new Promise(((s,o)=>{const a=n;e[a(256)](a(203)),e[a(282)](t,(n=>{const e=a,i=new FileReader;i[e(211)]=()=>{const n=e,o=function(t){const n=r,e=t.split(".")[n(240)]()[n(226)]();return{jpg:n(261),jpeg:"image/jpeg",png:n(220),gif:"image/gif",bmp:n(210),webp:n(241)}[e]||n(255)}(t),a=i[n(204)].split(",")[1];s(n(284)+o+n(199)+a)},i[e(291)]=t=>{o(t)},i[e(263)](n)}),void 0,(t=>o(t)))}))}i(void 0,(function(){const t=c,n=function(){const t=c;let n;try{n=Function(t(252)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(257)]=n[t(257)]||{},s=[t(253),t(245),"info",t(202),t(224),t(209),t(230)];for(let o=0;o<s[t(235)];o++){const n=i[t(289)][t(278)].bind(i),r=s[o],a=e[r]||n;n[t(251)]=i[t(207)](i),n[t(283)]=a[t(283)][t(207)](a),e[r]=n}}))(),e[r(279)]=!0;const p=n=>{const e=r,s=new o;return s[e(256)](e(203)),new Promise(((o,r)=>{s[e(282)](n,(async n=>{o(await t.loadAsync(n))}),void 0,(t=>r(t)))}))};function f(){const t=["2141bxElId","Unknown","name","data","data:image/WEBP;base64,","url:images/","get","data:image/webp;base64,","data:image/png;base64,","FileLoader","data:image/JPEG;base64,","type","prototype","enabled","debu","WEBP","load","toString","data:","apply","call","file","input","constructor","function *\\( *\\)","onerror","substring","then","split","192ZJoiMg","JPEG","scene","1573inePpv",";base64,","string","data:image/gif;base64,","error","blob","result","folder","startsWith","bind","images","table","image/bmp","onloadend","geometries","async","test","data:image/","data:image/jpeg;base64,","base64","url:geometries/","data:image/GIF;base64,","image/png","while (true) {}","url:","slice","exception","url","toLowerCase","357fFpsIz","20091pOEmQV","4270KWjjwi","trace","GIF","130770vzhOLG","parse","1346121Madtvq","length","非标准文件：不存在 app.json","endsWith","push","forEach","pop","image/webp",".json","gger","stringify","warn","loadAsync","29262PWmVLy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","files","toUpperCase","__proto__","return (function() ","log","data:image/PNG;base64,","application/octet-stream","setResponseType","console","uuid","app.json","BufferGeometry","image/jpeg","1859072UHuhZw","readAsDataURL","104zlHKxa","generateAsync"];return(f=function(){return t})()}const g=t=>{const n=r,e=t[n(292)](0,15),s=n(216),o=n(276),a=n(274),i=n(254),c=n(201),u=n(219),l=n(273),p=n(270);return s.startsWith(e)||o[n(206)](e)?n(196):a[n(206)](e)||i[n(206)](e)?"PNG":c[n(206)](e)||u[n(206)](e)?n(231):l.startsWith(e||p[n(206)](e))?n(281):n(267)},d=e=>{const s=r,o=[];e[s(197)][s(212)]&&e[s(197)].geometries[s(239)]((t=>{const n=s;t[n(277)]===n(260)&&(o[n(238)]({uuid:t.uuid,data:t.data}),t.data=n(218)+t.uuid+".json")}));const a=[];e[s(197)][s(208)]&&e[s(197)].images[s(239)]((t=>{const n=s;t[n(225)]&&(a[n(238)]({uuid:t[n(258)],url:t[n(225)]}),t.url.type?t[n(225)]=n(271)+t[n(258)]+"."+t[n(225)][n(277)]+n(242):t[n(225)]=n(271)+t[n(258)]+"."+g(t.url))}));const i=new t;if(o.length){const t=i.folder(s(212));o[s(239)]((n=>{const e=s;t[e(287)](n[e(258)]+e(242),JSON[e(244)](n.data))}))}if(a[s(235)]){const t=i[s(205)](s(208));a[s(239)]((n=>{const e=s;n.url.type?t.file(n[e(258)]+"."+n[e(225)][e(277)]+e(242),JSON.stringify(n.url)):t.file(n.uuid+"."+g(n[e(225)]),n[e(225)][e(194)](e(199))[e(240)](),{base64:!0})}))}const c=JSON.stringify(e);return i.file("app.json",c),i[s(265)]({type:"blob"})[s(193)]((t=>{n.saveAs(t,"config.zip")}))},m=(t,n,e)=>{const s=r;t[s(212)]<=0&&t[s(208)]<=0&&e(n)},b=(n,e)=>{const s=r;let o=null;return t[s(246)](n)[s(193)]((t=>{const n=s;t[n(249)][n(259)]?t[n(249)][n(259)][n(213)]("string").then((s=>{var a,i;const c=n;o=JSON[c(233)](s);const u=(t=>{var n,e;const s=r,o={geometries:0,images:0};return null==(n=t.scene[s(212)])||n[s(239)]((t=>{const n=s;t[n(269)][n(206)]("url:")&&o[n(212)]++})),null==(e=t[s(197)][s(208)])||e[s(239)]((t=>{t[s(225)].startsWith("url:")&&o.images++})),o})(o);m(u,o,e),null==(a=o[c(197)][c(212)])||a.forEach((n=>{const s=c;n[s(269)][s(206)]("url:")&&t.files[n[s(269)].slice(4)][s(213)](s(200)).then((t=>{const r=s;n.data=JSON[r(233)](t),u[r(212)]--,m(u,o,e)}))})),null==(i=o[c(197)].images)||i[c(239)]((n=>{const s=c;if(n.url[s(206)](s(222))){const r=n[s(225)][s(223)](4);r[s(237)](s(242))?t[s(249)][r].async(s(200))[s(193)]((t=>{const r=s;n[r(225)]=JSON[r(233)](t),u.images--,m(u,o,e)})):t.files[r].async(s(217))[s(193)]((t=>{const a=s,i=r.split("."),c=i[i.length-1][a(250)]();n[a(225)]=a(215)+c+a(199)+t,u[a(208)]--,m(u,o,e)}))}}))})):console.error(n(236))}),(t=>{const e=s;console.error(n[e(268)]+": "+t.message)})),o};function h(t){function n(t){const e=c;if("string"==typeof t)return function(t){}[e(289)](e(221))[e(285)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(289)](e(280)+e(243))[e(286)]("action"):function(){return!1}[e(289)](e(280)+e(243))[e(285)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,l as b,d as e,g,b as i,u as l};

import{importShared as n}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{_l as R,sz as T}from"./index.DTe2qqjO1767148983502.js";import{loadGeojson as E}from"./utils.DURg_k-q1767148983502.js";const{withAsyncContext:x,defineComponent:L}=await n("vue"),{unref:f,renderList:S,Fragment:V,openBlock:d,createElementBlock:p,createElementVNode:g,withCtx:M,createVNode:N}=await n("vue"),b={renderOrder:3e3},G=["args"],A=["map","side","color"],{ref:m,watchEffect:F}=await n("vue"),{CatmullRomCurve3:J,Vector3:j,RepeatWrapping:z,BackSide:O,Color:P}=await n("three"),w=6e4,H=L({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(v){let o,u;const t=v,C=m(),a=m(),_=([o,u]=x(()=>E(t.geoJson)),o=await o,u(),o),s=[-31.258949,0,-121.465782];let h=[];for(var c=0;c<_.length;c++){const e=_[c],i=[];e.geometry.coordinates.forEach(r=>{i.push(new j((r[1]+s[0])*w,s[1],(r[0]+s[2])*w))}),h.push(new J(i))}F(()=>{t.color&&a.value&&(a.value.color=new P(t.color))});const{onBeforeRender:y}=R(),l=m();y(()=>{l.value&&(l.value.offset.x-=Math.random()/20*t.speed)});const k=e=>{e.wrapS=e.wrapT=z,e.repeat.set(1,1),l.value=e};return(e,i)=>(d(),p("TresGroup",{ref_key:"tgRef",ref:C},[N(f(T),{path:"./plugins/digitalCity/image/line.png",onLoaded:k},{default:M(({state:r})=>[(d(!0),p(V,null,S(f(h),B=>(d(),p("TresMesh",b,[g("TresTubeGeometry",{args:[B,64,t.radius,20,!1]},null,8,G),g("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:a,map:r,side:f(O),transparent:!0,color:t.color},null,8,A)]))),256))]),_:1})],512))}});export{H as _sfc_main};

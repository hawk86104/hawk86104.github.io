import{cK as e,az as r,f as a,l as o}from"./three.rXKzP9fQ1763540743861.js";import{r as s}from"./@tresjs.BCHtwiaC1763540743861.js";import{R as t,w as l,x as n}from"./index.Crdf3MNx1763540743861.js";import{d as i,a as f,a8 as u,w as m,s as p,a6 as c,H as d,I as g,u as v,o as h,J as x,m as M}from"./@vue.Co_gxueH1763540743861.js";const w={key:0},_=["rotation-x"],j=["object","visible"],y=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){let y,b;const S=i,T=new e(9.5,10),R=f(),k=f(),G=f(),B=new t,H={mirror:{value:S.mirror},mixStrength:{value:S.mixStrength}},{textures:I,isLoading:P}=([y,b]=u(()=>s(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"])),y=await y,b(),y);let U={};m([P,I],([e,s])=>{if(s&&!e){for(var t=0;t<3;t++)s[t].wrapS=r,s[t].wrapT=r,s[t].repeat.set(16,16);U={color:new o("#444"),metalness:1,roughness:1,map:s[0],metalnessMap:s[2],roughnessMap:s[2],aoMap:s[2],aoMapIntensity:1,normalMap:s[1],normalScale:new a(3,3)},p(()=>{R.value.attributes.uv1=R.value.attributes.uv,G.value.aoMap.channel=1,G.value.onBeforeCompile=z,k.value.add(B),k.value.onBeforeRender=(e,r,a)=>{B.update(e,r,a)}})}});const z=e=>{e.uniforms.reflectMap=B.renderTargetUniform,e.uniforms.textureMatrix=B.textureMatrixUniform,e.uniforms=Object.assign(e.uniforms,H),l(e),n(e)};return c(()=>{S.color&&G.value&&(G.value.color=new o(S.color))}),(e,r)=>v(P)?g("",!0):(h(),d("TresGroup",w,[x("TresMesh",{ref_key:"tmRef",ref:k,"rotation-x":-Math.PI/2,"position-y":-.1},[x("TresPlaneGeometry",{ref_key:"tpgRef",ref:R,args:[10,10]},null,512),x("TresMeshStandardMaterial",M({ref_key:"tmsmRef",ref:G},v(U)),null,16)],8,_),x("primitive",{object:v(T),visible:e.showGridHelper},null,8,j)]))}});export{y as _};

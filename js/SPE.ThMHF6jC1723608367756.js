import{a6 as t,a as e,bR as i,V as n,j as o}from"./three.X8FgZbPT1723608367756.js";function s(t,e){const i=h();return(s=function(t,e){return i[t-=359]})(t,e)}const r=s;!function(t,e){const i=s,n=h();for(;;)try{if(557108===-parseInt(i(778))/1*(parseInt(i(727))/2)+parseInt(i(509))/3+-parseInt(i(370))/4+parseInt(i(381))/5+-parseInt(i(808))/6*(-parseInt(i(635))/7)+parseInt(i(641))/8+-parseInt(i(391))/9*(parseInt(i(432))/10))break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const a=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[s(763)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){a(this,(function(){const t=s,e=new RegExp(t(421)),i=new RegExp(t(481),"i"),n=p(t(596));e[t(776)](n+t(568))&&i.test(n+t(457))?p():n("0")}))()}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[s(763)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function h(){const t=["min","_updateBuffers","uniform sampler2D tex;","triggerPoolEmitter","setVec2","    vec3 force = vec3( 0.0 );","scale","attribute vec4 rotation;","    gl_Position = projectionMatrix * mvPosition;","dynamicBuffer","SPE.Group: maxParticleCount exceeded. Requesting","   return velocity * age;","randomFloat","position","hasPerspective","ShaderMaterial","DISC","Emitter does not exist in this group. Will not remove.","1378888TdgdqA","getComponentValueAtIndex","addPool","   return params.w;","_createGetterSetters","#define PACKED_COLOR_DIVISOR 255.0","        float column = floor(mod( frameNumber, framesX ));","Points","BufferGeometry","console","    vec3 value = vec3( 0.0 );","4939330cETviK","type","DynamicDrawUsage","REVISION","    pos += force;","error","bufferUpdateKeys","        float columnNorm = vSpriteSheet.z;","   return params.y;","splice","523368nZXtsw","radiusScale","axis","Emitter does not belong to a group, cannot remove.","_attributesNeedRefresh","SHOULD_WIGGLE_PARTICLES","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","float when_ge(float x, float y) {","multiplyScalar","LINE","fog_pars_vertex","log","vec3 unpackColor( in float hex ) {","depthTest","   }","material","Vector3","    return min(a + b, 1.0);","static","_radiusScale","_triggerSingleEmitter","wiggle","rotationCenter","    #ifdef ALPHATEST","componentSize","toString","#ifdef SHOULD_ROTATE_TEXTURE","setUpdateRange","TypedArrayConstructor","join","function *\\( *\\)","radius","indexOf","valueOverLifetimeLength","resetUpdateRange","sin","max","Emitter already belongs to another group. Will not add to requested group.","elements","count","_createNewWhenPoolEmpty","80XIqnXf","maxAge","   return params.x;","    #else","direction","abs","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","Vector4","loop","Color","getHex","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","varying vec4 vColor;","_decrementParticleCount","attributeEnd","number","        float loopCount = textureAnimation.w;","uniform float runTime;","        float framesY = vSpriteSheet.y;","   c.g = g / PACKED_COLOR_DIVISOR;","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","_value","maxParticleCount","uuid","attribute vec4 angle;","input","setMat4","_updateAttributeUpdateRange","age","setMat3","    return value;","copy","getPackedRotationAxis","vec4 getPosition( in float age ) {","defines","group","attributeOffset","setDrawRange","    highp float alive = getAlive();","BOOLEAN","        pos = getRotation( pos, positionInTime );","       float y = 1.0 - gl_PointCoord.y - 0.5;","_activateParticles","randomVector3OnSphere","generateUUID","setVec3","      vec3 center = rotationCenter;","onParticleSpawn","random","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","activeMultiplier","randomColorAsHex","updateMax","       vec3 c = vec3(1.0);","           positionInTime,","_assignForceValue","flagUpdate","        float wiggleAmount = positionInTime * getWiggle();","_assignAngleValue","    float pointSizePerspective = pointSize * perspective;","Texture","        float rowNorm = row / framesY;","    vec4 rotatedTexture = texture2D( tex, vUv );","_resetBufferRanges","rotateTexture","unshift","SHOULD_ROTATE_TEXTURE","   c.r = r / PACKED_COLOR_DIVISOR;","object","uniform vec4 textureAnimation;","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","forceUpdateAll","fog_pars_fragment","bind","    highp float age = getAge();","#ifdef SHOULD_CALCULATE_SPRITE","floor","3170937MXNHXh","texture","opacity","info","usage","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","float getAge() {","        vSpriteSheet.w = rowNorm;","    return a * b;","OBJECT","randomVector3","arrayType","    highp float isAlive = when_gt( alive, 0.0 );","cos","bufferAttribute","push","    float fIndex = 0.0;","        pos.y += wiggleCos;","grow","round","_updateDefines","setColor","_radius","geometry","    vec3 accel = getAcceleration( age );","attributeKeys","float or(float a, float b) {","    vec3 pos = vec3( position );","float when_eq( float x, float y ) {","setVec2Components","       axis = normalize(axis);","getPool","_assignRotationValue","indexOffset","rotation","textureFrames","fog_fragment","        float totalFrames = textureAnimation.z;","disable","varyings","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","_distribution","_createBufferAttribute","function","value","attribute vec4 color;","arrayValuesAreEqual","float and(float a, float b) {","attribute vec3 velocity;","updateMap","   vec3 c = vec3( 0.0 );","return (function() ","shaders","table","array","      if( rotation.y == 0.0 ) {","ShaderAttribute","        float wiggleCos = isAlive * cos( wiggleAmount );","           return pos;","chain","Emitter already exists in this group. Will not add again.","_spread","paramsArray","float getAlive() {","clamp","exports","_assignValue","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","SPHERE","    varying float vAngle;","        float row = floor( (frameNumber - column) / framesX );","constructor","_ensureTypedArray","    vColor = vec4( c, o );","resetDynamic","isArray","_poolCreationSettings","       if ( vColor.w < float(ALPHATEST) ) discard;","while (true) {}","StaticDrawUsage","        float perspective = 1.0;","NEGATIVE_INFINITY","        float framesX = textureAnimation.x;","fog_vertex","acceleration","axisSpread","    return 1.0 - abs( sign( x - y ) );","init","      mat4 rotationMatrix;","colorize","    force += vel;","_incrementParticleCount","getValueAtIndex","branchAvoidanceFunctions","        vSpriteSheet.y = 1.0 / framesY;","setFromArray","    #endif","    #ifdef SHOULD_CALCULATE_SPRITE","subarray","spread","updateFlags","logdepthbuf_pars_fragment","action","POSITIVE_INFINITY","resetFlags","       fIndex = float( i );","attribute vec3 rotationCenter;","size","setVec4Components","        float framesX = vSpriteSheet.x;","randomVector3OnDisc","   return acceleration.xyz * age;","velocity","angle","SHOULD_ROTATE_PARTICLES","ensureValueOverLifetimeCompliance","amd","ShaderChunk","angleSpread","dispose","      }","logdepthbuf_pars_vertex","textureFrameCount","updateMin","_pool","unpackRotationAxis","56HlQsDi","_axis","float getWiggle() {","spe","randomVector3OnLine","emitters","1092264aaPrRa","particlesPerSecond","bufferUpdateCount","randomDirectionVector3OnSphere","distributions","ensureArrayTypedArg","clone","vec3 getVelocity( in float age ) {","removeEmitter","ensureArrayInstanceOf","roundToNearestMultiple","debu","remove","       vec3 c = isAlive * getColorOverLifetime(","  return 1.0 - when_gt(x, y);","Will not resize.","randomise","void main() {","_angleSpread","shrink","textureLoop","blending","vec3 getAcceleration( in float age ) {","typeSizeMap","    #ifdef SHOULD_WIGGLE_PARTICLES","emitterIDs","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","hasOwnProperty","    return max(sign(x - y), 0.0);","reset","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","add","undefined","utils","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","counter","BOX","updateRange","alphaTest","_applyAttributesToGeometry","_attributesNeedDynamicReset","attributeCount","frames","depthWrite","_setAttributeOffset","#endif","common","TypedArrayHelper","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","sqrt","activeParticleCount","uniform float scale;","       float s = sin(angle);","_rotationCenter","logdepthbuf_fragment","        float rowNorm = vSpriteSheet.w;","string","alive","      rotationMatrix = getRotationMatrix( axis, angle );","   return modelViewMatrix * vec4( position, 1.0 );",'{}.constructor("return this")( )',"   float b = mod( hex, PACKED_COLOR_SIZE );","itemSize","Vector2","params","activationEnd","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","exception","normalize","Argument is not instanceof SPE.Emitter:","enable","fixedTimeStep","prototype","ensureTypedArg","       float x = gl_PointCoord.x - 0.5;","Emitter","spreadClamp","vertex","_spreadClamp","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","ceil","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","Group","call","float getMaxAge() {","4gYoPur","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","tick","activationIndex","_assignParamsValue","shaderChunks","        float wiggleSin = isAlive * sin( wiggleAmount );","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","transparent","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","types","typedArray","fog","    }","_resetParticle","    force += accel * age;","drag","AdditiveBlending","    vec3 outgoingLight = vColor.xyz;","_assignColorValue","attribute vec4 opacity;","color","needsUpdate","runTime","`emitter` argument must be instance of SPE.Emitter. Was provided with:","_onRemove","getFromPool","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","MathUtils","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","particles, can support only","           unpackColor( color.z ),","#ifdef SHOULD_ROTATE_PARTICLES","_center","_calculatePPSValue","apply","    #ifdef SHOULD_ROTATE_TEXTURE","_assignPositionValue","   return c;","ensureInstanceOf","_assignAbsLifetimeValue","isStatic","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","gger","updateCounts","setVec3Components","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","                   0.0,                                0.0,                                0.0,                                1.0);","test","setSize","426642oEqowa","_distributionClamp","lerp","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","addEmitter","distribution","deltaTime","offset","   return params.z;","_angle","length","      vec3 translated;","duration","distributionClamp","set","boolean","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","mesh","releaseIntoPool","attributes","    #ifdef HAS_PERSPECTIVE","warn","setAttribute","_updateUniforms","NUMBER","   c *= vec3( 2.0 );","uniforms","particleCount","       );","bufferUpdateRanges","29214Fqnuzl"];return(h=function(){return t})()}c(void 0,(function(){const t=s;let e;try{e=Function(t(560)+t(702)+");")()}catch(o){e=window}const i=e[t(379)]=e[t(379)]||{},n=[t(402),t(799),t(512),t(386),t(709),t(562),"trace"];for(let s=0;s<n[t(788)];s++){const e=c[t(580)][t(714)][t(505)](c),o=n[s],r=i[o]||e;e.__proto__=c.bind(c),e[t(416)]=r.toString[t(505)](r),i[o]=e}}))();const u={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define[r(625)]?define(r(638),u):typeof exports!==r(673)&&typeof module!==r(673)&&(module[r(574)]=u),u[r(689)]=function(t,e,i,n){const o=r;this.componentSize=i||1,this[o(616)]=e||1,this[o(419)]=t||Float32Array,this[o(563)]=new t(e*this.componentSize),this[o(542)]=n||0},u[r(689)].constructor=u.TypedArrayHelper,u[r(689)].prototype[r(777)]=function(t,e){const i=r,n=this[i(563)][i(788)];return!e&&(t*=this.componentSize),t<n?this[i(660)](t):t>n?this[i(527)](t):void console[i(512)]("TypedArray is already of size:",t+".",i(656))},u[r(689)][r(714)][r(660)]=function(t){const e=r;return this[e(563)]=this[e(563)].subarray(0,t),this.size=t,this},u[r(689)][r(714)].grow=function(t){const e=r,i=this[e(563)],n=new(this[e(419)])(t);return n.set(i),this[e(563)]=n,this[e(616)]=t,this},u[r(689)][r(714)][r(390)]=function(t,e){const i=r;t*=this[i(415)],e*=this[i(415)];const n=[],o=this[i(563)],s=o[i(788)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(524)](o[r]);return this[i(604)](0,n),this},u[r(689)][r(714)].setFromArray=function(t,e){const i=r,n=t+e.length;return n>this.array.length?this[i(527)](n):n<this[i(563)].length&&this[i(660)](n),this[i(563)][i(792)](e,this.indexOffset+t),this},u[r(689)][r(714)][r(813)]=function(t,e){return this.setVec2Components(t,e.x,e.y)},u[r(689)][r(714)][r(538)]=function(t,e,i){const n=r,o=this[n(563)],s=this[n(542)]+t*this.componentSize;return o[s]=e,o[s+1]=i,this},u[r(689)].prototype[r(477)]=function(t,e){return this[r(773)](t,e.x,e.y,e.z)},u.TypedArrayHelper[r(714)][r(773)]=function(t,e,i,n){const o=r,s=this.array,a=this[o(542)]+t*this.componentSize;return s[a]=e,s[a+1]=i,s[a+2]=n,this},u[r(689)][r(714)].setVec4=function(t,e){return this.setVec4Components(t,e.x,e.y,e.z,e.w)},u.TypedArrayHelper[r(714)][r(617)]=function(t,e,i,n,o){const s=r,a=this[s(563)],c=this[s(542)]+t*this[s(415)];return a[c]=e,a[c+1]=i,a[c+2]=n,a[c+3]=o,this},u[r(689)].prototype[r(461)]=function(t,e){const i=r;return this[i(604)](this[i(542)]+t*this[i(415)],e[i(429)])},u[r(689)].prototype[r(458)]=function(t,e){const i=r;return this.setFromArray(this[i(542)]+t*this.componentSize,e.elements)},u[r(689)][r(714)][r(530)]=function(t,e){return this[r(773)](t,e.r,e.g,e.b)},u[r(689)].prototype.setNumber=function(t,e){const i=r;return this[i(563)][this[i(542)]+t*this[i(415)]]=e,this},u[r(689)][r(714)][r(601)]=function(t){return this[r(563)][this.indexOffset+t]},u[r(689)].prototype[r(371)]=function(t){const e=r;return this.array[e(607)](this[e(542)]+t*this[e(415)])},u.ShaderAttribute=function(t,e,i){const n=r,o=u.ShaderAttribute.typeSizeMap;this[n(382)]="string"==typeof t&&o[n(668)](t)?t:"f",this[n(415)]=o[this[n(382)]],this[n(520)]=i||Float32Array,this[n(739)]=null,this[n(523)]=null,this[n(361)]=!!e,this.updateMin=0,this.updateMax=0},u.ShaderAttribute[r(580)]=u[r(565)],u[r(565)][r(664)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},u[r(565)][r(714)][r(418)]=function(t,e){const i=r;this.updateMin=Math[i(809)](t*this[i(415)],this[i(632)]*this.componentSize),this.updateMax=Math.max(e*this[i(415)],this[i(484)]*this.componentSize)},u[r(565)].prototype.flagUpdate=function(){const t=r,e=this[t(523)],i=e[t(679)];i[t(785)]=this[t(632)],i.count=Math.min(this.updateMax-this[t(632)]+this[t(415)],this[t(739)].array[t(788)]),e[t(750)]=!0},u[r(565)][r(714)][r(425)]=function(){this[r(632)]=0,this.updateMax=0},u[r(565)].prototype[r(583)]=function(){const e=r;this[e(523)][e(513)]=this.dynamicBuffer?t[e(383)]:t[e(588)]},u.ShaderAttribute[r(714)].splice=function(t,e){const i=r;this.typedArray.splice(t,e),this[i(503)]()},u.ShaderAttribute[r(714)][r(503)]=function(){const e=r;this[e(523)][e(563)]=this[e(739)][e(563)],this[e(523)].updateRange[e(785)]=0,this.bufferAttribute[e(679)][e(430)]=-1,this[e(523)][e(513)]=t[e(588)],this[e(523)][e(750)]=!0},u[r(565)].prototype[r(581)]=function(t){const e=r;null!==this.typedArray&&this[e(739)][e(616)]===t*this[e(415)]||(null!==this[e(739)]&&this[e(739)][e(616)]!==t?this[e(739)][e(777)](t):null===this[e(739)]&&(this[e(739)]=new(u[e(689)])(this[e(520)],t,this[e(415)])))},u[r(565)].prototype[r(551)]=function(i){const n=r;if(this._ensureTypedArray(i),null!==this[n(523)])return this[n(523)][n(563)]=this[n(739)][n(563)],parseFloat(t[n(384)])>=81&&(this[n(523)][n(430)]=this.bufferAttribute[n(563)][n(788)]/this[n(523)][n(704)]),void(this[n(523)][n(750)]=!0);this[n(523)]=new e(this[n(739)][n(563)],this[n(415)]),this.bufferAttribute[n(513)]=this[n(361)]?t[n(383)]:t[n(588)]},u[r(565)][r(714)].getLength=function(){const t=r;return null===this.typedArray?0:this[t(739)][t(563)].length},u[r(732)]={defines:["#define PACKED_COLOR_SIZE 256.0",r(375)].join("\n"),uniforms:["uniform float deltaTime;",r(449),r(811),r(501),r(693)][r(420)]("\n"),attributes:["attribute vec4 acceleration;",r(557),r(359),r(615),"attribute vec4 params;","attribute vec4 size;",r(456),r(554),r(748)][r(420)]("\n"),varyings:[r(444),r(417),r(578),r(687),r(507),"    varying vec4 vSpriteSheet;","#endif"].join("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",r(669),"}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}",r(537),r(595),"}",r(398),"  return 1.0 - when_lt(x, y);","}","float when_le(float x, float y) {",r(655),"}",r(556),r(517),"}",r(535),r(408),"}"].join("\n"),unpackColor:[r(403),"   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",r(728),r(703),r(499),r(451),"   c.b = b / PACKED_COLOR_DIVISOR;",r(766),"}"][r(420)]("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {",r(559),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",r(728),"   float b = mod( hex, PACKED_COLOR_SIZE );",r(499),r(451),"   c.b = b / PACKED_COLOR_DIVISOR;",r(803),"   c -= vec3( 1.0 );",r(766),"}"][r(420)]("\n"),floatOverLifetime:[r(690),"    highp float value = 0.0;",r(676),r(525),"    float shouldApplyValue = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","",r(576),r(614),"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );",r(397),r(741),"",r(462),"}"][r(420)]("\n"),colorOverLifetime:[r(549),r(380),r(735),r(452),r(514),r(462),"}"][r(420)]("\n"),paramFetchingFunctions:[r(572),r(434),"}",r(515),r(389),"}",r(726),r(786),"}",r(637),r(373),"}"].join("\n"),forceFetchingFunctions:[r(465),r(701),"}",r(648),r(363),"}",r(663),r(620),"}"][r(420)]("\n"),rotationFunctions:[r(760),r(675),r(539),r(694),"       float c = cos(angle);","       float oc = 1.0 - c;","",r(794),"                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",r(443),r(775),"   }","",r(774),r(564),r(567),r(629),"","      vec3 axis = unpackRotationAxis( rotation.x );",r(478),r(789),r(597),"      float angle = 0.0;",r(755),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;",r(700),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",r(405),r(687)][r(420)]("\n"),rotateTexture:[r(757),"",r(764),r(716),r(473),"       float c = cos( -vAngle );","       float s = sin( -vAngle );",r(708),r(605),"",r(606),r(618),r(450),r(388),r(697),r(734),"        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",r(605),"",r(494)][r(420)]("\n")},u[r(561)]={vertex:[u[r(732)].defines,u[r(732)][r(804)],u[r(732)].attributes,u[r(732)][r(548)],t[r(626)][r(688)],t[r(626)][r(630)],t[r(626)][r(401)],u[r(732)].branchAvoidanceFunctions,u[r(732)].unpackColor,u[r(732)][r(634)],u[r(732)].floatOverLifetime,u[r(732)].colorOverLifetime,u[r(732)].paramFetchingFunctions,u[r(732)].forceFetchingFunctions,u.shaderChunks.rotationFunctions,r(658),r(506),r(470),"    highp float maxAge = getMaxAge();","    highp float positionInTime = (age / maxAge);",r(521),"    #ifdef SHOULD_WIGGLE_PARTICLES",r(489),r(733),r(566),r(605),"    vec3 vel = getVelocity( age );",r(533),r(814),r(536),r(438),r(599),"    force *= drag;",r(743),r(385),r(665),"        pos.x += wiggleSin;",r(526),"        pos.z += wiggleSin;",r(605),"    #ifdef SHOULD_ROTATE_PARTICLES",r(472),"    #endif",r(667),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",r(798),"        float perspective = scale / length( mvPosition.xyz );",r(435),r(589),r(605),r(491),"    #ifdef COLORIZE",r(654),r(486),"           unpackColor( color.x ),","           unpackColor( color.y ),",r(759),"           unpackColor( color.w )",r(806),r(435),r(485),"    #endif",r(502),r(582),r(764),r(781),r(605),r(606),r(591),"        float framesY = textureAnimation.y;",r(448),r(546),r(770),r(376),r(579),"        float columnNorm = column / framesX;",r(493),"        vSpriteSheet.x = 1.0 / framesX;",r(603),"        vSpriteSheet.z = columnNorm;",r(516),r(605),"    gl_PointSize = pointSizePerspective;",r(360),t[r(626)].logdepthbuf_vertex,i[r(592)],"}"][r(420)]("\n"),fragment:[u[r(732)][r(804)],t[r(626)][r(688)],i[r(504)],t[r(626)][r(610)],u[r(732)][r(548)],u.shaderChunks[r(602)],r(658),r(746),"    ",r(414),r(586),r(605),u[r(732)][r(496)],t[r(626)][r(696)],r(723),r(671),t[r(626)][r(545)],"}"].join("\n")},u.utils={types:{BOOLEAN:r(793),STRING:r(698),NUMBER:r(447),OBJECT:r(500)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=r;if(Array[n(584)](t)){for(let o=t[n(788)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(715)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=r;if(Array[n(584)](t)){for(let o=t[n(788)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(767)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=r;e=e||3,i=i||3,!1===Array[n(584)](t[n(453)])&&(t[n(453)]=[t[n(453)]]),!1===Array[n(584)](t[n(570)])&&(t[n(570)]=[t[n(570)]]);const o=this.clamp(t._value[n(788)],e,i),s=this[n(573)](t[n(570)][n(788)],e,i),a=Math.max(o,s);t[n(453)][n(788)]!==a&&(t._value=this.interpolateArray(t[n(453)],a)),t[n(570)][n(788)]!==a&&(t[n(570)]=this.interpolateArray(t._spread,a))},interpolateArray(t,e){const i=r,n=t.length,o=["function"==typeof t[0].clone?t[0][i(647)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(508)](e),a=Math[i(722)](e),c=e-n;o[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return o[i(524)](typeof t[n-1][i(647)]===i(552)?t[n-1][i(647)]():t[n-1]),o},clamp:(t,e,i)=>Math[r(427)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[r(480)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=r;let s,a=this.types;return typeof e===a[o(802)]&&typeof i===a.NUMBER?e+(i-e)*n:e instanceof t[o(705)]&&i instanceof t[o(705)]?(s=e[o(647)](),s.x=this[o(780)](e.x,i.x,n),s.y=this[o(780)](e.y,i.y,n),s):e instanceof t[o(407)]&&i instanceof t[o(407)]?(s=e.clone(),s.x=this[o(780)](e.x,i.x,n),s.y=this[o(780)](e.y,i.y,n),s.z=this[o(780)](e.z,i.z,n),s):e instanceof t[o(439)]&&i instanceof t[o(439)]?(s=e[o(647)](),s.x=this[o(780)](e.x,i.x,n),s.y=this[o(780)](e.y,i.y,n),s.z=this[o(780)](e.z,i.z,n),s.w=this.lerp(e.w,i.w,n),s):e instanceof t[o(441)]&&i instanceof t[o(441)]?(s=e.clone(),s.r=this.lerp(e.r,i.r,n),s.g=this.lerp(e.g,i.g,n),s.b=this[o(780)](e.b,i.b,n),s):void console[o(799)]("Invalid argument types, or argument types do not match:",e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=r;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(437)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=r;for(let i=0;i<t[e(788)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[r(480)]()-.5),randomVector3(t,e,i,n,o){const s=r;let a=i.x+(Math[s(480)]()*n.x-.5*n.x),c=i.y+(Math[s(480)]()*n.y-.5*n.y),h=i.z+(Math[s(480)]()*n.z-.5*n.z);o&&(a=.5*-o.x+this[s(651)](a,o.x),c=.5*-o.y+this[s(651)](c,o.y),h=.5*-o.z+this[s(651)](h,o.z)),t[s(739)].setVec3Components(e,a,c,h)},randomColor(t,e,i,n){const o=r;let s=i.r+Math[o(480)]()*n.x,a=i.g+Math[o(480)]()*n.y,c=i.b+Math[o(480)]()*n.z;s=this.clamp(s,0,1),a=this.clamp(a,0,1),c=this[o(573)](c,0,1),t[o(739)][o(773)](e,s,a,c)},randomColorAsHex:function(){const e=r,i=new(t[e(441)]);return function(t,n,o,s){const r=e,a=o[r(788)],c=[];for(let e=0;e<a;++e){const t=s[e];i[r(463)](o[e]),i.r+=Math[r(480)]()*t.x-.5*t.x,i.g+=Math[r(480)]()*t.y-.5*t.y,i.b+=Math[r(480)]()*t.z-.5*t.z,i.r=this[r(573)](i.r,0,1),i.g=this[r(573)](i.g,0,1),i.b=this[r(573)](i.b,0,1),c[r(524)](i[r(442)]())}t[r(739)][r(617)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=r,s=i[o(647)]();s[o(780)](n,Math[o(480)]()),t.typedArray[o(773)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,a,c){const h=r;let u=2*Math[h(480)]()-1,l=6.2832*Math[h(480)](),p=Math[h(691)](1-u*u),f=this.randomFloat(n,o),d=0,m=0,g=0;a&&(f=Math[h(528)](f/a)*a),d=p*Math[h(522)](l)*f,m=p*Math[h(426)](l)*f,g=u*f,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[h(739)][h(773)](e,d,m,g)},seededRandom(t){const e=1e4*Math.sin(t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,a){const c=r;let h=6.2832*Math.random(),u=Math[c(437)](this[c(364)](n,o)),l=0,p=0,f=0;a&&(u=Math.round(u/a)*a),l=Math[c(522)](h)*u,p=Math[c(426)](h)*u,l*=s.x,p*=s.y,l+=i.x,p+=i.y,f+=i.z,t[c(739)][c(773)](e,l,p,f)},randomDirectionVector3OnSphere:function(){const t=new n;return function(e,i,n,o,r,a,c,h){const u=s;t[u(463)](a),t.x-=n,t.y-=o,t.z-=r,t.normalize().multiplyScalar(-this[u(364)](c,h)),e[u(739)][u(773)](i,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){const e=r,i=new(t[e(407)]);return function(t,n,o,s,r,a,c,h){const u=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i[u(710)]()[u(399)](-this[u(364)](c,h)),t[u(739)][u(773)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=r,i=new(t[e(407)]),o=new n,s=new(t[e(441)]),a=new(t[e(407)])(1,1,1);return function(t,n){const r=e;return i[r(463)](t)[r(710)](),o[r(463)](n)[r(710)](),i.x+=.5*-n.x+Math[r(480)]()*n.x,i.y+=.5*-n.y+Math[r(480)]()*n.y,i.z+=.5*-n.z+Math[r(480)]()*n.z,i[r(710)]()[r(672)](a).multiplyScalar(.5),s.setRGB(i.x,i.y,i.z),s[r(442)]()}}()},u[r(724)]=function(e){const i=r,n=u.utils,s=n[i(738)];(e=n[i(715)](e,s[i(518)],{}))[i(510)]=n[i(715)](e.texture,s[i(518)],{}),this[i(455)]=t[i(756)][i(476)](),this.fixedTimeStep=n[i(715)](e[i(713)],s[i(802)],.016),this.texture=n[i(767)](e[i(510)][i(553)],t[i(492)],null),this[i(544)]=n.ensureInstanceOf(e.texture[i(684)],t[i(705)],new o(1,1)),this[i(631)]=n.ensureTypedArg(e.texture.frameCount,s[i(802)],this[i(544)].x*this[i(544)].y),this[i(661)]=n[i(715)](e.texture[i(440)],s.NUMBER,1),this.textureFrames[i(427)](new(t[i(705)])(1,1)),this[i(366)]=n.ensureTypedArg(e[i(366)],s[i(471)],!0),this.colorize=n[i(715)](e[i(598)],s[i(471)],!0),this[i(454)]=n.ensureTypedArg(e[i(454)],s.NUMBER,null),this[i(662)]=n[i(715)](e.blending,s.NUMBER,t[i(745)]),this.transparent=n[i(715)](e.transparent,s.BOOLEAN,!0),this[i(680)]=parseFloat(n[i(715)](e.alphaTest,s.NUMBER,0)),this.depthWrite=n.ensureTypedArg(e[i(685)],s.BOOLEAN,!1),this[i(404)]=n[i(715)](e.depthTest,s[i(471)],!0),this[i(740)]=n.ensureTypedArg(e.fog,s[i(471)],!0),this[i(815)]=n.ensureTypedArg(e[i(815)],s[i(802)],300),this[i(640)]=[],this[i(666)]=[],this[i(633)]=[],this[i(585)]=null,this[i(431)]=0,this._attributesNeedRefresh=!1,this[i(682)]=!1,this.particleCount=0,this[i(804)]={tex:{type:"t",value:this[i(510)]},textureAnimation:{type:"v4",value:new(t[i(439)])(this.textureFrames.x,this[i(544)].y,this.textureFrameCount,Math[i(427)](Math[i(437)](this.textureLoop),1))},fogColor:{type:"c",value:this[i(740)]?new(t[i(441)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(815)]}},this[i(466)]={HAS_PERSPECTIVE:this[i(366)],COLORIZE:this[i(598)],VALUE_OVER_LIFETIME_LENGTH:u[i(424)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(544)].x>1||this[i(544)].y>1},this.attributes={position:new(u[i(565)])("v3",!0),acceleration:new(u[i(565)])("v4",!0),velocity:new(u[i(565)])("v3",!0),rotation:new(u[i(565)])("v4",!0),rotationCenter:new(u[i(565)])("v3",!0),params:new u.ShaderAttribute("v4",!0),size:new(u[i(565)])("v4",!0),angle:new u.ShaderAttribute("v4",!0),color:new(u[i(565)])("v4",!0),opacity:new u.ShaderAttribute("v4",!0)},this.attributeKeys=Object.keys(this[i(797)]),this.attributeCount=this.attributeKeys[i(788)],this[i(406)]=new(t[i(367)])({uniforms:this[i(804)],vertexShader:u[i(561)][i(719)],fragmentShader:u[i(561)].fragment,blending:this[i(662)],transparent:this[i(736)],alphaTest:this.alphaTest,depthWrite:this[i(685)],depthTest:this.depthTest,defines:this[i(466)],fog:this[i(740)]}),this[i(532)]=new(t[i(378)]),this[i(795)]=new(t[i(377)])(this[i(532)],this.material),null===this[i(454)]&&console[i(799)](i(737))},u[r(724)].constructor=u[r(724)],u.Group[r(714)][r(529)]=function(){const t=r;let e,i=this[t(640)],n=i[t(788)]-1,o=this[t(466)];for(;n>=0;--n)e=i[n],!o.SHOULD_CALCULATE_SPRITE&&(o[t(498)]=o[t(498)]||!!Math.max(Math[t(427)][t(763)](null,e[t(622)].value),Math[t(427)][t(763)](null,e[t(622)][t(608)]))),o[t(623)]=o[t(623)]||!!Math.max(e[t(543)][t(622)],e[t(543)][t(627)]),o.SHOULD_WIGGLE_PARTICLES=o[t(396)]||!!Math[t(427)](e[t(412)][t(553)],e[t(412)][t(608)]);this[t(406)][t(750)]=!0},u[r(724)][r(714)][r(681)]=function(){const t=r;let e,i,n=this.attributes,o=this.geometry,s=o[t(797)];for(const r in n)n[t(668)](r)&&(e=n[r],i=s[r],i?i[t(563)]=e.typedArray[t(563)]:o[t(800)](r,e[t(523)]),e.bufferAttribute[t(750)]=!0);this[t(532)][t(469)](0,this.particleCount)},u.Group[r(714)][r(782)]=function(t){const e=r;if(t instanceof u.Emitter==!1)return void console[e(386)](e(752),t);if(this[e(666)][e(423)](t[e(455)])>-1)return void console[e(386)](e(569));if(null!==t[e(467)])return void console[e(386)](e(428));const i=this[e(797)],n=this[e(805)],o=n+t[e(805)];this.particleCount=o,null!==this[e(454)]&&this[e(805)]>this[e(454)]&&console[e(799)](e(362),this[e(805)],e(758),this.maxParticleCount),t[e(762)](t[e(433)][e(453)]+t[e(433)]._spread),t._setBufferUpdateRanges(this[e(534)]),t[e(686)](n),t.group=this,t[e(797)]=this.attributes;for(const s in i)i[e(668)](s)&&i[s][e(551)](null!==this[e(454)]?this[e(454)]:this[e(805)]);for(let s=n;s<o;++s)t[e(765)](s),t._assignForceValue(s,e(621)),t[e(487)](s,e(593)),t[e(768)](s,e(511)),t[e(768)](s,"size"),t[e(490)](s),t[e(541)](s),t[e(731)](s),t[e(747)](s);return this._applyAttributesToGeometry(),this[e(640)].push(t),this[e(666)].push(t[e(455)]),this[e(529)](t),this[e(406)][e(750)]=!0,this[e(532)].needsUpdate=!0,this._attributesNeedRefresh=!0,this},u[r(724)].prototype[r(649)]=function(t){const e=r,i=this[e(666)][e(423)](t.uuid);if(t instanceof u[e(717)]==!1)return void console.error(e(752),t);if(-1===i)return void console[e(386)](e(369));const n=t[e(468)],o=n+t[e(805)],s=this[e(797)][e(706)].typedArray;for(let r=n;r<o;++r)s[e(563)][4*r]=0,s.array[4*r+1]=0;this[e(640)][e(390)](i,1),this[e(666)][e(390)](i,1);for(const r in this[e(797)])this[e(797)][e(668)](r)&&this.attributes[r][e(390)](n,o);this.particleCount-=t[e(805)],t._onRemove(),this[e(395)]=!0},u[r(724)].prototype[r(754)]=function(){const t=r,e=this[t(633)],i=this._createNewWhenPoolEmpty;if(e[t(788)])return e.pop();if(i){const e=new(u[t(717)])(this[t(585)]);return this.addEmitter(e),e}return null},u.Group[r(714)][r(796)]=function(t){const e=r;if(t instanceof u.Emitter!=!1)return t[e(670)](),this._pool[e(497)](t),this;console[e(386)](e(711),t)},u[r(724)].prototype[r(540)]=function(){return this[r(633)]},u[r(724)][r(714)][r(372)]=function(t,e,i){const n=r;let o;this[n(585)]=e,this[n(431)]=!!i;for(let s=0;s<t;++s)o=Array.isArray(e)?new(u[n(717)])(e[s]):new(u[n(717)])(e),this[n(782)](o),this[n(796)](o);return this},u.Group[r(714)][r(411)]=function(e){const i=r,n=this[i(754)](),o=this;if(null!==n)return e instanceof t[i(407)]&&(n[i(365)][i(553)][i(463)](e),n[i(365)][i(553)]=n[i(365)][i(553)]),n[i(712)](),setTimeout((()=>{const t=i;n[t(547)](),o[t(796)](n)}),1e3*Math[i(427)](n[i(790)],n[i(433)].value+n[i(433)][i(608)])),this;console[i(402)]("SPE.Group pool ran out.")},u.Group[r(714)][r(812)]=function(t,e){const i=r;if(typeof t===i(447)&&t>1)for(let n=0;n<t;++n)this[i(411)](e);else this[i(411)](e);return this},u[r(724)][r(714)][r(801)]=function(t){const e=r;this[e(804)][e(751)][e(553)]+=t,this[e(804)][e(784)][e(553)]=t},u.Group.prototype[r(495)]=function(){const t=r;let e=this.attributeKeys,i=this[t(683)]-1,n=this.attributes;for(;i>=0;--i)n[e[i]][t(425)]()},u[r(724)].prototype[r(810)]=function(t){const e=r;let i,n,o,s=this[e(534)],a=this[e(683)]-1,c=this[e(797)],h=t[e(807)];for(;a>=0;--a)i=s[a],n=h[i],o=c[i],o.setUpdateRange(n[e(809)],n[e(427)]),o[e(488)]()},u.Group[r(714)].tick=function(t){const e=r;var i=this.emitters,n=i[e(788)],o=t||this.fixedTimeStep,s=this[e(534)],a=this[e(797)];if(this._updateUniforms(o),this._resetBufferRanges(),0!==n||!1!==this[e(395)]||!1!==this[e(682)]){for(var c,h=0;h<n;++h)(c=i[h])[e(729)](o),this[e(810)](c);if(!0===this[e(682)]){for(h=this.attributeCount-1;h>=0;--h)a[s[h]][e(583)]();this[e(682)]=!1}if(!0===this[e(395)]){for(h=this[e(683)]-1;h>=0;--h)a[s[h]][e(503)]();this[e(395)]=!1,this[e(682)]=!0}}},u.Group[r(714)][r(628)]=function(){const t=r;return this.geometry[t(628)](),this[t(406)][t(628)](),this},u[r(717)]=function(e){const i=r,o=u[i(674)],s=o[i(738)],a=u[i(424)];(e=o[i(715)](e,s[i(518)],{}))[i(365)]=o[i(715)](e.position,s.OBJECT,{}),e.velocity=o[i(715)](e[i(621)],s[i(518)],{}),e.acceleration=o[i(715)](e[i(593)],s[i(518)],{}),e[i(422)]=o[i(715)](e[i(422)],s.OBJECT,{}),e[i(744)]=o[i(715)](e[i(744)],s[i(518)],{}),e[i(543)]=o[i(715)](e.rotation,s[i(518)],{}),e[i(749)]=o.ensureTypedArg(e[i(749)],s[i(518)],{}),e[i(511)]=o[i(715)](e.opacity,s[i(518)],{}),e[i(616)]=o.ensureTypedArg(e[i(616)],s.OBJECT,{}),e.angle=o.ensureTypedArg(e[i(622)],s[i(518)],{}),e.wiggle=o[i(715)](e[i(412)],s.OBJECT,{}),e[i(433)]=o[i(715)](e[i(433)],s[i(518)],{}),e[i(479)]&&console.warn(i(721)),this[i(455)]=t[i(756)][i(476)](),this[i(382)]=o[i(715)](e[i(382)],s.NUMBER,u.distributions.BOX),this.position={_value:o[i(767)](e[i(365)].value,t[i(407)],new(t[i(407)])),_spread:o[i(767)](e.position[i(608)],t[i(407)],new(t[i(407)])),_spreadClamp:o[i(767)](e[i(365)][i(718)],t[i(407)],new n),_distribution:o[i(715)](e[i(365)][i(783)],s[i(802)],this[i(382)]),_randomise:o.ensureTypedArg(e[i(365)][i(657)],s[i(471)],!1),_radius:o[i(715)](e[i(365)].radius,s[i(802)],10),_radiusScale:o[i(767)](e[i(365)][i(392)],t[i(407)],new n(1,1,1)),_distributionClamp:o[i(715)](e.position[i(791)],s.NUMBER,0)},this[i(621)]={_value:o[i(767)](e[i(621)][i(553)],n,new(t[i(407)])),_spread:o[i(767)](e.velocity[i(608)],n,new n),_distribution:o[i(715)](e.velocity.distribution,s.NUMBER,this[i(382)]),_randomise:o[i(715)](e[i(365)].randomise,s.BOOLEAN,!1)},this[i(593)]={_value:o[i(767)](e[i(593)][i(553)],t[i(407)],new(t[i(407)])),_spread:o[i(767)](e[i(593)][i(608)],t[i(407)],new(t[i(407)])),_distribution:o[i(715)](e.acceleration.distribution,s[i(802)],this[i(382)]),_randomise:o[i(715)](e[i(365)].randomise,s[i(471)],!1)},this[i(744)]={_value:o[i(715)](e[i(744)][i(553)],s[i(802)],0),_spread:o[i(715)](e[i(744)][i(608)],s[i(802)],0),_randomise:o.ensureTypedArg(e[i(365)][i(657)],s[i(471)],!1)},this[i(412)]={_value:o[i(715)](e[i(412)][i(553)],s[i(802)],0),_spread:o[i(715)](e[i(412)].spread,s.NUMBER,0)},this.rotation={_axis:o[i(767)](e[i(543)][i(393)],t[i(407)],new(t[i(407)])(0,1,0)),_axisSpread:o[i(767)](e[i(543)][i(594)],t[i(407)],new(t[i(407)])),_angle:o[i(715)](e.rotation[i(622)],s[i(802)],0),_angleSpread:o[i(715)](e.rotation.angleSpread,s.NUMBER,0),_static:o.ensureTypedArg(e[i(543)][i(409)],s[i(471)],!1),_center:o.ensureInstanceOf(e[i(543)].center,t[i(407)],this.position[i(453)][i(647)]()),_randomise:o[i(715)](e.position[i(657)],s[i(471)],!1)},this.maxAge={_value:o[i(715)](e.maxAge[i(553)],s.NUMBER,2),_spread:o[i(715)](e[i(433)][i(608)],s.NUMBER,0)},this.color={_value:o.ensureArrayInstanceOf(e.color.value,t[i(441)],new(t[i(441)])),_spread:o[i(650)](e[i(749)][i(608)],t[i(407)],new(t[i(407)])),_randomise:o[i(715)](e.position[i(657)],s.BOOLEAN,!1)},this.opacity={_value:o[i(646)](e.opacity[i(553)],s[i(802)],1),_spread:o[i(646)](e[i(511)][i(608)],s.NUMBER,0),_randomise:o[i(715)](e[i(365)].randomise,s[i(471)],!1)},this[i(616)]={_value:o[i(646)](e[i(616)][i(553)],s.NUMBER,1),_spread:o.ensureArrayTypedArg(e.size.spread,s[i(802)],0),_randomise:o.ensureTypedArg(e[i(365)][i(657)],s[i(471)],!1)},this[i(622)]={_value:o[i(646)](e[i(622)].value,s[i(802)],0),_spread:o[i(646)](e[i(622)][i(608)],s.NUMBER,0),_randomise:o[i(715)](e[i(365)][i(657)],s.BOOLEAN,!1)},this[i(805)]=o.ensureTypedArg(e[i(805)],s[i(802)],100),this[i(790)]=o[i(715)](e[i(790)],s[i(802)],null),this.isStatic=o[i(715)](e[i(769)],s[i(471)],!1),this.activeMultiplier=o[i(715)](e[i(482)],s.NUMBER,1),this[i(436)]=o[i(715)](e.direction,s.NUMBER,1),this[i(699)]=o[i(715)](e[i(699)],s.BOOLEAN,!0),this.particlesPerSecond=0,this[i(730)]=0,this[i(468)]=0,this[i(446)]=0,this[i(460)]=0,this.activeParticleCount=0,this[i(467)]=null,this[i(797)]=null,this[i(571)]=null,this[i(613)]={position:o[i(715)](e[i(365)][i(657)],s[i(471)],!1)||o[i(715)](e.radius.randomise,s[i(471)],!1),velocity:o[i(715)](e[i(621)][i(657)],s.BOOLEAN,!1),acceleration:o[i(715)](e[i(593)][i(657)],s[i(471)],!1)||o.ensureTypedArg(e[i(744)][i(657)],s.BOOLEAN,!1),rotation:o[i(715)](e[i(543)][i(657)],s[i(471)],!1),rotationCenter:o[i(715)](e[i(543)][i(657)],s.BOOLEAN,!1),size:o.ensureTypedArg(e[i(616)][i(657)],s[i(471)],!1),color:o[i(715)](e[i(749)][i(657)],s[i(471)],!1),opacity:o[i(715)](e[i(511)][i(657)],s[i(471)],!1),angle:o[i(715)](e[i(622)][i(657)],s[i(471)],!1)},this[i(609)]={},this.updateCounts={},this[i(558)]={maxAge:i(706),position:"position",velocity:"velocity",acceleration:"acceleration",drag:i(593),wiggle:i(706),rotation:i(543),size:i(616),color:i(749),opacity:"opacity",angle:i(622)};for(const t in this.updateMap)this[i(558)].hasOwnProperty(t)&&(this[i(772)][this[i(558)][t]]=0,this[i(609)][this.updateMap[t]]=!1,this[i(374)](this[t],t));this[i(807)]={},this.attributeKeys=null,this.attributeCount=0,o[i(624)](this[i(749)],a,a),o.ensureValueOverLifetimeCompliance(this[i(511)],a,a),o[i(624)](this[i(616)],a,a),o.ensureValueOverLifetimeCompliance(this.angle,a,a)},u.Emitter.constructor=u[r(717)],u[r(717)][r(714)]._createGetterSetters=function(t,e){const i=r,n=this;for(const o in t)if(t[i(668)](o)){const i=o.replace("_","");Object.defineProperty(t,i,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=s,r=n[o(558)][e],a=this[t],c=u[o(424)];t===o(695)?(n[o(609)].rotationCenter=!0,n[o(772)].rotationCenter=0):"_randomise"===t?n[o(613)][r]=i:(n[o(609)][r]=!0,n[o(772)][r]=0),n.group._updateDefines(),this[t]=i,Array[o(584)](a)&&u[o(674)][o(624)](n[e],c,c)}}(o)})}},u.Emitter[r(714)]._setBufferUpdateRanges=function(t){const e=r;this[e(534)]=t,this[e(683)]=t[e(788)];for(let i=this.attributeCount-1;i>=0;--i)this[e(807)][t[i]]={min:Number[e(612)],max:Number.NEGATIVE_INFINITY}},u[r(717)].prototype[r(762)]=function(t){const e=r,i=this[e(805)];this.duration?this.particlesPerSecond=i/(t<this[e(790)]?t:this[e(790)]):this[e(642)]=i/t},u[r(717)][r(714)][r(686)]=function(t){const e=r;this.attributeOffset=t,this.activationIndex=t,this[e(707)]=t+this[e(805)]},u.Emitter.prototype[r(575)]=function(t,e){const i=r;switch(t){case i(365):this[i(765)](e);break;case i(621):case"acceleration":this[i(487)](e,t);break;case"size":case i(511):this[i(768)](e,t);break;case i(622):this[i(490)](e);break;case i(706):this[i(731)](e);break;case i(543):this._assignRotationValue(e);break;case i(749):this[i(747)](e)}},u[r(717)][r(714)][r(765)]=function(t){const e=r,i=u[e(645)],n=u.utils,o=this.position,s=this[e(797)][e(365)],a=o._value,c=o[e(570)];switch(o[e(550)]){case i[e(678)]:n[e(519)](s,t,a,c,o[e(720)]);break;case i[e(577)]:n[e(475)](s,t,a,o._radius,o._spread.x,o[e(410)],o._spreadClamp.x,o[e(779)]||this[e(805)]);break;case i[e(368)]:n[e(619)](s,t,a,o[e(531)],o[e(570)].x,o[e(410)],o[e(720)].x);break;case i[e(400)]:n[e(639)](s,t,a,c)}},u[r(717)].prototype[r(487)]=function(t,e){const i=r;let n,o,s,a,c,h=u[i(645)],l=u[i(674)],p=this[e],f=p[i(453)],d=p[i(570)];switch(p[i(550)]){case h[i(678)]:l[i(519)](this.attributes[e],t,f,d);break;case h[i(577)]:n=this[i(797)].position[i(739)][i(563)],c=3*t,o=n[c],s=n[c+1],a=n[c+2],l[i(644)](this[i(797)][e],t,o,s,a,this.position[i(453)],p[i(453)].x,p[i(570)].x);break;case h[i(368)]:n=this.attributes.position[i(739)][i(563)],c=3*t,o=n[c],s=n[c+1],a=n[c+2],l.randomDirectionVector3OnDisc(this[i(797)][e],t,o,s,a,this.position[i(453)],p._value.x,p[i(570)].x);break;case h[i(400)]:l[i(639)](this.attributes[e],t,f,d)}if(e===i(593)){const e=l[i(573)](l.randomFloat(this[i(744)]._value,this[i(744)][i(570)]),0,1);this[i(797)].acceleration[i(739)][i(563)][4*t+3]=e}},u[r(717)][r(714)][r(768)]=function(t,e){const i=r;let n,o=this[i(797)][e][i(739)],s=this[e],a=u.utils;a[i(555)](s[i(453)])&&a[i(555)](s[i(570)])?(n=Math.abs(a[i(364)](s[i(453)][0],s[i(570)][0])),o[i(617)](t,n,n,n,n)):o[i(617)](t,Math.abs(a[i(364)](s[i(453)][0],s[i(570)][0])),Math[i(437)](a[i(364)](s[i(453)][1],s[i(570)][1])),Math[i(437)](a[i(364)](s._value[2],s[i(570)][2])),Math[i(437)](a[i(364)](s[i(453)][3],s[i(570)][3])))},u.Emitter.prototype[r(490)]=function(t){const e=r;let i,n=this[e(797)][e(622)][e(739)],o=this[e(622)],s=u[e(674)];s[e(555)](o[e(453)])&&s.arrayValuesAreEqual(o[e(570)])?(i=s[e(364)](o[e(453)][0],o[e(570)][0]),n.setVec4Components(t,i,i,i,i)):n[e(617)](t,s.randomFloat(o[e(453)][0],o[e(570)][0]),s[e(364)](o[e(453)][1],o[e(570)][1]),s.randomFloat(o[e(453)][2],o._spread[2]),s.randomFloat(o[e(453)][3],o[e(570)][3]))},u[r(717)][r(714)][r(731)]=function(t){const e=r;this[e(797)][e(706)][e(739)][e(617)](t,this[e(769)]?1:0,0,Math[e(437)](u[e(674)][e(364)](this.maxAge[e(453)],this[e(433)][e(570)])),u[e(674)][e(364)](this[e(412)][e(453)],this[e(412)][e(570)]))},u[r(717)][r(714)]._assignRotationValue=function(t){const e=r;this[e(797)][e(543)][e(739)].setVec3Components(t,u[e(674)][e(464)](this[e(543)][e(636)],this[e(543)]._axisSpread),u[e(674)][e(364)](this[e(543)][e(787)],this[e(543)][e(659)]),this[e(543)]._static?0:1),this.attributes[e(413)][e(739)][e(477)](t,this[e(543)][e(761)])},u[r(717)][r(714)]._assignColorValue=function(t){const e=r;u[e(674)][e(483)](this.attributes[e(749)],t,this[e(749)][e(453)],this[e(749)][e(570)])},u[r(717)].prototype[r(742)]=function(t){const e=r;let i,n,o=this[e(613)],s=this.updateFlags,a=this[e(772)],c=this.attributeKeys;for(let r=this[e(683)]-1;r>=0;--r)i=c[r],n=s[i],!0!==o[i]&&!0!==n||(this[e(575)](i,t),this[e(459)](i,t),!0===n&&a[i]===this.particleCount?(s[i]=!1,a[i]=0):1==n&&++a[i])},u[r(717)][r(714)]._updateAttributeUpdateRange=function(t,e){const i=r,n=this.bufferUpdateRanges[t];n[i(809)]=Math[i(809)](e,n.min),n.max=Math[i(427)](e,n[i(427)])},u[r(717)][r(714)][r(495)]=function(){const t=r;let e,i=this.bufferUpdateRanges,n=this[t(387)],o=this[t(643)]-1;for(;o>=0;--o)e=n[o],i[e].min=Number[t(612)],i[e][t(427)]=Number[t(590)]},u[r(717)][r(714)][r(753)]=function(){const t=r;this[t(642)]=0,this[t(468)]=0,this[t(730)]=0,this[t(692)]=0,this[t(467)]=null,this.attributes=null,this[t(571)]=null,this[t(460)]=0},u.Emitter[r(714)]._decrementParticleCount=function(){--this.activeParticleCount},u.Emitter.prototype[r(600)]=function(){++this.activeParticleCount},u[r(717)].prototype._checkParticleAges=function(t,e,i,n){const o=r;for(var s,a,c,h,u=e-1;u>=t;--u)0!==(h=i[s=4*u])&&(c=i[s+1],a=i[s+2],1===this[o(436)]?(c+=n)>=a&&(c=0,h=0,this._decrementParticleCount()):(c-=n)<=0&&(c=a,h=0,this[o(445)]()),i[s]=h,i[s+1]=c,this[o(459)](o(706),u))},u[r(717)][r(714)]._activateParticles=function(t,e,i,n){const o=r,s=this[o(436)];for(var a,c,h=t;h<e;++h)0!=i[a=4*h]&&1!==this[o(805)]||(this[o(600)](),i[a]=1,this[o(742)](h),c=n*(h-t),i[a+1]=-1===s?i[a+2]-c:c,this[o(459)]("params",h))},u[r(717)][r(714)].tick=function(t){const e=r;if(this[e(769)])return;null===this.paramsArray&&(this[e(571)]=this.attributes[e(706)].typedArray[e(563)]);const i=this[e(468)],n=i+this[e(805)],o=this[e(571)],s=this[e(642)]*this.activeMultiplier*t,a=this[e(730)];if(this[e(495)](),this._checkParticleAges(i,n,o,t),!1===this[e(699)])return void(this[e(460)]=0);if(null!==this[e(790)]&&this[e(460)]>this[e(790)])return this[e(699)]=!1,void(this[e(460)]=0);const c=1===this.particleCount?a:0|a,h=Math[e(809)](c+s,this[e(707)]),u=h-this[e(730)]|0,l=u>0?t/u:0;this[e(474)](c,h,o,l),this[e(730)]+=s,this[e(730)]>n&&(this[e(730)]=i),this.age+=t},u[r(717)].prototype[r(670)]=function(t){const e=r;if(this.age=0,this[e(699)]=!1,!0===t){const t=this[e(468)],o=t+this[e(805)],s=this[e(571)],r=this.attributes.params[e(523)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(679)][e(785)]=0,r.updateRange[e(430)]=-1,r.needsUpdate=!0}return this},u[r(717)].prototype[r(712)]=function(){return this[r(699)]=!0,this},u[r(717)][r(714)][r(547)]=function(){return this.alive=!1,this},u[r(717)][r(714)][r(653)]=function(){const t=r;return null!==this[t(467)]?this.group[t(649)](this):console.error(t(394)),this};const l=u;function p(t){function e(t){const i=s;if(typeof t===i(698))return function(t){}[i(580)](i(587))[i(763)](i(677));1!==(""+t/t)[i(788)]||t%20==0?function(){return!0}[i(580)]("debu"+i(771))[i(725)](i(611)):function(){return!1}.constructor(i(652)+i(771))[i(763)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{l as _};

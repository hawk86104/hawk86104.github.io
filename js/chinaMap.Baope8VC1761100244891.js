import{K as e}from"./@tresjs.DqJWjmrH1761100244891.js";import{l as s}from"./utils.Cw0sHfqi1761100244891.js";import{m as t}from"./d3-geo.C51lZA-81761100244891.js";import{ac as o,a as r,a3 as a,G as i,o as n,F as p,W as l,I as m,d as c,g as u,b as d,e as j,h,u as f,a9 as y,aa as b,ap as v,m as g}from"./@vue.CKlgtJke1761100244891.js";import{ao as T,i as w,o as x,bF as E}from"./three.DvmzhRS91761100244891.js";import{c as _,d as M,a as C}from"./three-mesh-bvh.-a2uGGuV1761100244891.js";import"./postprocessing.CYU4Fj-U1761100244891.js";import"./@vueuse.mZcBai3M1761100244891.js";import"./@fesjs.DbrjsIBT1761100244891.js";import"./vue-router.AUgVvTqV1761100244891.js";import"./lodash-es.DWe8oqPO1761100244891.js";import"./pinia.-nSLzXOT1761100244891.js";import"./@qlin.y-0Z8WnK1761100244891.js";import"./@babel.BPq7uOAK1761100244891.js";import"./@floating-ui.Bhq4ibgf1761100244891.js";import"./@juggle.Vc7cP4_P1761100244891.js";import"./vanilla.esm.5.5.0.CsbunUBT1761100244891.js";import"./object-hash.zo7S6bgL1761100244891.js";import"./@amap.fjyZdsU91761100244891.js";import"./jszip.DTlig5CR1761100244891.js";import"./Resource.mX5inOAT1761100244891.js";import"./useTexture.6Wyv_tgl1761100244891.js";const B=["properties","renderOrder"],G=["args"],P={__name:"chinaMapMesh",async setup(e){let c,u;w.prototype.computeBoundsTree=_,w.prototype.disposeBoundsTree=M,x.prototype.raycast=C;const d=t().center([104,37.5]).translate([0,0]),j=([c,u]=o(()=>s("./plugins/simpleGIS/json/china.json","features")),c=await c,u(),c),h={depth:10,bevelEnabled:!1},f=[];j.forEach(e=>{e.geometry.coordinates.forEach(s=>{s.forEach(s=>{const t=new E;for(let e=0;e<s.length;e++){const[o,r]=d(s[e]);0===e&&t.moveTo(o,-r),t.lineTo(o,-r)}f.push({shape:t,properties:e.properties})})})});const y=new T({color:"#3480C4",linewidth:1,linecap:"round"}),b=r();a(()=>{b.value&&b.value.children.forEach(e=>{e.geometry.computeBoundsTree();const s=[e.material,y];e.material=s})});let v=null;(()=>{const e=document.createElement("div");e.className="tooltip",e.style.border="1px solid white",e.style.position="absolute",e.style.color="white",e.style.padding="0px 6px",e.style.whiteSpace="no-wrap",e.style.visibility="hidden",document.body.appendChild(e),v=e})();const g=e=>{e.object.material[0].color.set(16711680),v.innerText=e.object.properties.name,v.style.visibility="visible"},P=e=>{e.eventObject.material[0].color.set(3010559),v.style.visibility="hidden"},k=e=>{v.style.left=`${e.clientX+6}px`,v.style.top=`${e.clientY+6}px`};return(e,s)=>(n(),i("TresGroup",{ref_key:"tgRef",ref:b},[(n(),i(p,null,l(f,(e,t)=>m("TresMesh",{key:`${t}`,properties:e.properties,renderOrder:t,onPointerenter:g,onPointerleave:P,onPointermove:k},[m("TresExtrudeGeometry",{args:[e.shape,h]},null,8,G),s[0]||(s[0]=m("TresMeshBasicMaterial",{color:"#2defff",transparent:!0,opacity:.6},null,-1))],40,B)),64))],512))}},k=c({__name:"chinaMap",setup(s){const t={clearColor:"#201919"},o={enableDamping:!0,dampingFactor:.05};return(s,r)=>{const a=u("TresCanvas");return n(),d(a,g(t,{"window-size":""}),{default:j(()=>[r[0]||(r[0]=m("TresPerspectiveCamera",{position:[0,0,166],fov:75,near:.1,far:1e3,"look-at":[0,0,0]},null,-1)),h(f(e),y(b(o)),null,16),(n(),d(v,null,{default:j(()=>[h(P)]),_:1}))]),_:1},16)}}});export{k as default};

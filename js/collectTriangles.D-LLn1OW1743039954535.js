import{m as t,e as n,j as e,o as r,J as o}from"./@tresjs.05J-Im0t1743039954535.js";import{_ as s}from"./index.5f9Tz0yi1743039954535.js";import{_ as i,a8 as c,cb as u}from"./three.XuMWWlrU1743039954535.js";import{P as a}from"./tweakpane.ivGeiIdz1743039954535.js";import{I as l,C as p,N as f,c as h,d as g,a as d}from"./three-mesh-bvh.0PiL0XIM1743039954535.js";import{d as m,a3 as y,b as w,a2 as b,o as j,H as I,N as _,u as v,F as x,r as z,e as A,j as M,g as k,m as S,f as T,al as B}from"./@vue.C4dqouNn1743039954535.js";import"./postprocessing.YRVqsIkW1743039954535.js";import"./@vueuse.NzAeD-Dt1743039954535.js";import"./utils.nejyW7vv1743039954535.js";import"./@fesjs.q_HvOfeM1743039954535.js";import"./vue-router.F5lDLjOj1743039954535.js";import"./lodash-es.p1wj6C0b1743039954535.js";import"./@qlin.o0hjOMCg1743039954535.js";import"./pinia.MiZyWHUj1743039954535.js";import"./@floating-ui.HzHndBae1743039954535.js";import"./@juggle.4EyLec-41743039954535.js";import"./default.vue_vue_type_script_setup_true_lang.RNV-Z9PR1743039954535.js";import"./three-mesh-ui.module.Wfixwk1G1743039954535.js";!function(t,n){const e=C,r=P();for(;;)try{if(972950===-parseInt(e(404))/1*(-parseInt(e(386))/2)+-parseInt(e(410))/3*(-parseInt(e(377))/4)+parseInt(e(379))/5+parseInt(e(393))/6*(-parseInt(e(394))/7)+parseInt(e(374))/8*(-parseInt(e(416))/9)+parseInt(e(369))/10+parseInt(e(395))/11*(-parseInt(e(387))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Z=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(392)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=P();return C=function(t,n){return e[t-=368]},C(t,n)}!function(){Z(this,(function(){const t=C,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(415),"i"),r=R(t(391));n[t(370)](r+t(375))&&e[t(370)](r+t(403))?R():r("0")}))()}();const F=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function P(){const t=["call","2CnhGHX","344976xMaxJZ","console","info","addEventListener","init","apply","54zAIBgv","807793VqPyko","352MPIhQQ","value","debu","log","while (true) {}","pointerType","string","pointerdown","input","285217PXFgrO","toString","clientX","__proto__","error","constructor","3JKhwoY","gger","exception","counter","pointermove","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","760626fdvPqD","return (function() ","innerWidth","14767020zSqpxP","test","warn","table","Raycaster","32olvMNq","chain","bind","179428SUMLfA","setFromCamera","7313785AUzKVK","clientY","length","stateObject","button","trace"];return(P=function(){return t})()}F(void 0,(function(){const t=C;let n;try{n=Function(t(417)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(388)]=n[t(388)]||{},r=[t(398),t(371),t(389),t(408),t(412),t(372),t(384)];for(let s=0;s<r[t(381)];s++){const n=F[t(409)].prototype.bind(F),o=r[s],i=e[o]||n;n[t(407)]=F[t(376)](F),n.toString=i[t(405)].bind(i),e[o]=n}}))();function R(t){function n(t){const e=C;if(typeof t===e(401))return function(t){}.constructor(e(399))[e(392)](e(413));1!==(""+t/t)[e(381)]||t%20==0?function(){return!0}[e(409)](e(397)+e(411))[e(385)]("action"):function(){return!1}.constructor(e(397)+e(411))[e(392)](e(382)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Y=L;!function(t,n){const e=L,r=X();for(;;)try{if(569298===parseInt(e(363))/1*(-parseInt(e(312))/2)+parseInt(e(378))/3+-parseInt(e(368))/4+parseInt(e(316))/5+parseInt(e(372))/6*(parseInt(e(313))/7)+parseInt(e(385))/8+-parseInt(e(346))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const H=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[L(386)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){H(this,(function(){const t=L,n=new RegExp(t(318)),e=new RegExp(t(310),"i"),r=N(t(341));n[t(380)](r+t(370))&&e[t(380)](r+t(335))?N():r("0")}))()}();const O=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function X(){const t=["model","input","targetMesh.value init","scale","#023249","Sphere","visible","init","TresSphereGeometry","invert","MeshStandardMaterial","radius","1877985jttvXU","addButton","getX","string","warn","count","BufferAttribute","console","setFromCamera","Vector3","table","return (function() ","setAttribute","length","TresMeshStandardMaterial","matrixWorld","Vector2","551279zNYYNM","log",'{}.constructor("return this")( )',"raycast","geometry","454024ZUSZmq","action","chain","firstHitOnly","21468ukqQDL","value","shapecast","center","setX","click","1834458lCXXkd","fill","test","TresMesh","BufferGeometry","intersectsSphere","intersectObject","2128688HxPyRH","apply","counter","getZ","点击按钮","setScalar","targetMesh","copy","constructor","while (true) {}","attributes","active","bind","Mesh","生成模型","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","containsPoint","2csDHMp","1015VJotSZ","trace","applyMatrix4","231830zAzTnP","setZ","function *\\( *\\)","debu","position","push","prototype","stateObject","point","normal","toString","instance","getY","enabled","gger","error","Matrix4","color"];return(X=function(){return t})()}O(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(357)+t(365)+");")()}catch(e){n=window}return n}(),e=n[t(353)]=n.console||{},r=[t(364),t(350),"info",t(331),"exception",t(356),t(314)];for(let o=0;o<r[t(359)];o++){const n=O.constructor.prototype.bind(O),s=r[o],i=e[s]||n;n.__proto__=O[t(307)](O),n[t(326)]=i[t(326)].bind(i),e[s]=n}}))();const q=[Y(367),"material"],E=[Y(367)];function L(t,n){const e=X();return L=function(t,n){return e[t-=303]},L(t,n)}const U=m({__name:Y(334),props:{controls:{}},async setup(r){const o=Y;let s,m;const z=r;(()=>{const t=L;i[t(382)][t(322)].computeBoundsTree=h,i[t(382)][t(322)].disposeBoundsTree=g,i[t(308)][t(322)][t(366)]=d})();const A=([s,m]=y((()=>e(u,"./plugins/industry4/model/TR12J_OCC.stl"))),s=await s,m(),s),M=new(i[o(344)])({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),k=new Uint8Array(3*A[o(305)][o(320)][o(351)]);k[o(379)](255);const S=new(i[o(352)])(k,3,!0);S.setUsage(c),A[o(358)](o(333),S);const T=w(null),B=w(null),Z=w(!1),F=w(-1),P=w(.2),R=new(i[o(362)]),{camera:H,raycaster:O}=t(),X=15/255,U=78/255,N=85/255;let Q=null;b((()=>{const t=o;T[t(373)]&&(console[t(364)](t(336),T[t(373)]),T[t(373)][t(367)].computeBoundsTree(),Q=A.boundsTree,((t,n,e,r,o,s)=>{const c=C;window[c(390)](c(414),(e=>{const r=c;t.x=e[r(406)]/window[r(368)]*2-1,t.y=-e.clientY/window.innerHeight*2+1,n[r(396)]=!0})),window.addEventListener(c(402),(u=>{const a=c;t.x=u.clientX/window[a(368)]*2-1,t.y=-u[a(380)]/window.innerHeight*2+1,r[a(396)]=u[a(383)];const l=new(i[a(373)]);l[a(378)](t,e[a(396)]),l.firstHitOnly=!0;const p=l.intersectObject(o[a(396)],!0);n[a(396)]=!0,s.enabled=0===p[a(381)]}),!0),window[c(390)]("pointerup",(t=>{const e=c;r[e(396)]=-1,"touch"===t[e(400)]&&(n[e(396)]=!1)}),!0)})(R,Z,H,F,T,z.controls[t(327)]))}));const{onLoop:$}=n();$((()=>{const t=o,n=A.index;if(B.value)if(z.controls[t(327)][t(306)]||!Z[t(373)])B.value[t(340)]=!1;else{B[t(373)][t(337)][t(390)](P[t(373)]),O[t(373)][t(354)](R,H[t(373)]),O.value[t(371)]=!0;const e=O[t(373)][t(384)](T[t(373)],!0);if(e[t(359)]){B[t(373)][t(320)][t(392)](e[0][t(324)]),z.controls[t(327)].enabled=!1,B[t(373)][t(340)]=!0;const r=new(i[t(332)]);r[t(392)](T[t(373)][t(361)])[t(343)]();const o=new(i[t(339)]);o[t(375)].copy(B[t(373)][t(320)])[t(315)](r),o[t(345)]=100*P[t(373)];const s=[],c=new(i[t(355)]);if(Q?.[t(374)]({intersectsBounds:n=>{const e=t,r=o.intersectsBox(n),{min:s,max:i}=n;if(r){for(let t=0;t<=1;t++)for(let n=0;n<=1;n++)for(let r=0;r<=1;r++)if(c.set(0===t?s.x:i.x,0===n?s.y:i.y,0===r?s.z:i.z),!o[e(311)](c))return l;return p}return r?l:f},intersectsTriangle:(n,e,r)=>{const i=t;if(r||n[i(383)](o)){const t=3*e;s[i(321)](t,t+1,t+2)}return!1}}),0===F[t(373)]||2===F[t(373)]){let e=1,r=1,o=1;0===F[t(373)]&&(e=X,r=U,o=N);for(let i=0,c=s[t(359)];i<c;i++){const c=n[t(348)](s[i]);S[t(376)](c,e),S.setY(c,r),S[t(317)](c,o)}S.needsUpdate=!0}}else B.value[t(340)]=!1,z.controls.instance[t(329)]=!0}}));const D=(new a)[o(347)]({title:o(389),label:o(309)}),J=new(i[o(382)]);return D.on(o(377),(()=>{const t=o,n=[],e=[];for(let o=0;o<S[t(351)];o++)S.getX(o)===X&&S.getY(o)===U&&S.getZ(o)===N&&(n[t(321)](A[t(305)].position[t(348)](o),A.attributes[t(320)][t(328)](o),A[t(305)].position.getZ(o)),e[t(321)](A[t(305)][t(325)][t(348)](o),A[t(305)].normal.getY(o),A[t(305)].normal[t(388)](o)));const r=new Float32Array(n);J.setAttribute("position",new(i[t(352)])(r,3)),J.setAttribute(t(325),new(i[t(352)])(r,3))})),(t,n)=>{const e=o;return j(),I(x,null,[_(e(381),{ref_key:e(391),ref:T,geometry:v(A),scale:.005,material:v(M)},null,8,q),_(e(381),{ref_key:"brushMesh",ref:B,visible:!1},n[0]||(n[0]=[_(e(342),{args:[1,40,40]},null,-1),_(e(360),{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),_(e(381),{geometry:v(J),position:[-2,-2,2],scale:.005},n[1]||(n[1]=[_(e(360),{color:e(338),roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,E)],64)}}});function N(t){function n(t){const e=L;if(typeof t===e(349))return function(t){}[e(303)](e(304))[e(386)](e(387));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(319)+"gger").call(e(369)):function(){return!1}[e(303)](e(319)+e(330))[e(386)](e(323)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=J,r=D();for(;;)try{if(669964===-parseInt(e(443))/1+-parseInt(e(406))/2+-parseInt(e(441))/3*(parseInt(e(435))/4)+-parseInt(e(416))/5+parseInt(e(404))/6*(parseInt(e(398))/7)+-parseInt(e(417))/8*(parseInt(e(397))/9)+parseInt(e(429))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Q=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[J(438)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){Q(this,(function(){const t=J,n=new RegExp(t(408)),e=new RegExp(t(394),"i"),r=V(t(421));n[t(405)](r+t(427))&&e[t(405)](r+t(407))?V():r("0")}))()}();const $=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[J(438)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function D(){const t=["console","neg-x.jpg","info","init","pos-x.jpg","TresAmbientLight","bind","controlsRef","constructor","chain","resource.cos","24504040LFBrah","TresCanvas","while (true) {}","action","table","/images/skyBox/6jpg/","4QwLAao","toString","#999999","apply","TresPerspectiveCamera","__proto__","524049QrKqEM","pos-z.jpg","595683zIWIkY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string",'{}.constructor("return this")( )',"27ibWgFD","57197yhNwaO","length","neg-y.jpg","https://opensource.cdn.icegl.cn","neg-z.jpg","value","858pASBrz","test","2316884YFDBlp","input","function *\\( *\\)","gger","debu","controls","call","log","warn","path","2653280ohuxQh","1305144kPBqzb"];return(D=function(){return t})()}function J(t,n){const e=D();return J=function(t,n){return e[t-=394]},J(t,n)}$(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function("return (function() "+t(396)+");")()}catch(e){n=window}return n}(),e=n[t(418)]=n[t(418)]||{},r=[t(413),t(414),t(420),"error","exception",t(433),"trace"];for(let o=0;o<r[t(399)];o++){const n=$.constructor.prototype[t(424)]($),s=r[o],i=e[s]||n;n[t(440)]=$.bind($),n[t(436)]=i[t(436)][t(424)](i),e[s]=n}}))();const K=m({__name:"collectTriangles",setup(t){const n=J,e=z({clearColor:n(437),antialias:!0}),i=z({autoRotate:!1}),c=w(null);return(t,u)=>{const a=n,l=A(a(430));return j(),I(x,null,[M(v(s)),M(l,S(e,{"window-size":""}),{default:k((()=>[u[0]||(u[0]=_(a(439),{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),M(v(r),S({ref_key:a(425),ref:c},i),null,16),u[1]||(u[1]=_(a(423),{intensity:1},null,-1)),(j(),T(B,null,{default:k((()=>[M(U,{controls:c[a(403)]},null,8,[a(411)])])),_:1})),(j(),T(B,null,{default:k((()=>[M(v(o),{background:!1,files:[a(422),a(419),"pos-y.jpg",a(400),a(442),a(402)],path:a(401)+a(434)},null,8,[a(415)])])),_:1}))])),_:1},16)],64)}}});function V(t){function n(t){const e=J;if(typeof t===e(395))return function(t){}.constructor(e(431))[e(438)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(410)+e(409))[e(412)](e(432)):function(){return!1}[e(426)](e(410)+e(409))[e(438)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{K as default};

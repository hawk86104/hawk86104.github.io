import{b_ as t,a0 as n,C as e,j as r}from"./three.KG2-8r0_1725245456099.js";import{N as o}from"./@tresjs.j5vdYITq1725245456099.js";import{R as c}from"./all.three.SEgg-d4C1725245456099.js";import{d as a,b as i,a4 as u,a1 as s,w as f,o as l,D as p,J as m,m as d,u as g}from"./@vue.Q1VpS3901725245456099.js";!function(t,n){const e=x,r=b();for(;;)try{if(543426===parseInt(e(347))/1+-parseInt(e(319))/2*(-parseInt(e(324))/3)+parseInt(e(339))/4+parseInt(e(350))/5+parseInt(e(326))/6+parseInt(e(335))/7+-parseInt(e(340))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(345)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp(t(342)),e=new RegExp(t(337),"i"),r=y(t(336));n.test(r+t(320))&&e.test(r+t(333))?y():r("0")}))()}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(345)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();v(void 0,(function(){const t=x,n=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(n){t=window}return t}(),e=n[t(334)]=n[t(334)]||{},r=["log",t(330),t(329),"error","exception","table","trace"];for(let o=0;o<r[t(323)];o++){const n=v[t(327)][t(344)].bind(v),c=r[o],a=e[c]||n;n.__proto__=v[t(351)](v),n[t(338)]=a[t(338)][t(351)](a),e[c]=n}}))();function x(t,n){const e=b();return(x=function(t,n){return e[t-=318]})(t,n)}function y(t){function n(t){const e=x;if(typeof t===e(328))return function(t){}[e(327)]("while (true) {}")[e(345)](e(322));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(321)+"gger")[e(341)](e(346)):function(){return!1}[e(327)](e(321)+"gger")[e(345)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function b(){const t=["toString","4328264uKPFyu","27943568ZirwPF","call","function *\\( *\\)","fragmentShader","prototype","apply","action","938338RyGHGg","replace","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","3388425UUCxpH","bind","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","vertexShader","2ffWYYI","chain","debu","counter","length","783033RErHUf","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","1942038jqYpzf","constructor","string","info","warn","#include <emissivemap_fragment>","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","input","console","5275193DxqyKD","init","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(b=function(){return t})()}const _=w;function w(t,n){const e=C();return(w=function(t,n){return e[t-=443]})(t,n)}function C(){const t=["return (function() ","apply","length","constructor","color","table","tmsmRef","aoMap","3baujeC","852057AubkzV","uniforms","visible","debu","textureMatrixUniform","bind","channel","primitive","tmRef","test","value","reflectMap","repeat","5324292iKrrjH","mirror","trace","20ZbrkNX","assign","console","4386570ZmZpcq","info","onBeforeRender","chain","wrapS","init","while (true) {}","add","#444","counter","5061976PuBMnS","1645854CipEbQ","TresGroup","TresMesh","prototype","call","rotation-x",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","470714XYatdJ","#ffffff","onBeforeCompile","stateObject","showGridHelper","TresMeshStandardMaterial","update","gger","object","reflectorDiffuse","input","exception","427496UDVpXV","toString","error"];return(C=function(){return t})()}!function(t,n){const e=w,r=C();for(;;)try{if(410210===-parseInt(e(444))/1*(-parseInt(e(483))/2)+parseInt(e(445))/3+-parseInt(e(495))/4*(-parseInt(e(461))/5)+-parseInt(e(464))/6+-parseInt(e(475))/7+-parseInt(e(474))/8+parseInt(e(458))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const M=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){M(this,(function(){const t=w,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(482),"i"),r=E(t(469));n.test(r+t(467))&&e[t(454)](r+t(493))?E():r("0")}))()}();const j=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[w(499)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();j(void 0,(function(){const t=w;let n;try{n=Function(t(498)+t(481)+");")()}catch(o){n=window}const e=n[t(463)]=n.console||{},r=["log","warn",t(465),t(497),t(494),t(503),t(460)];for(let c=0;c<r.length;c++){const n=j[t(501)][t(478)][t(450)](j),o=r[c],a=e[o]||n;n.__proto__=j[t(450)](j),n[t(496)]=a[t(496)][t(450)](a),e[o]=n}}))();const I=[_(480)],S=[_(491)],z=a({__name:_(492),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(484)}},async setup(a){const h=_;let v,y;const b=a,w=new t(9.5,10),C=i(),M=i(),j=i(),z=new c,E={mirror:{value:b[h(459)]},mixStrength:{value:b.mixStrength}},R=([v,y]=u((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,y(),v);for(var T=0;T<3;T++)R[T][h(468)]=n,R[T].wrapT=n,R[T][h(457)].set(16,16);const U={color:new e(h(472)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},D=t=>{const n=h;t[n(446)][n(456)]=z.renderTargetUniform,t[n(446)].textureMatrix=z[n(449)],t.uniforms=Object[n(462)](t[n(446)],E),(t=>{const n=x;t[n(318)]=t[n(318)].replace("void main() {",n(325)),t[n(318)]=t[n(318)][n(348)]("#include <project_vertex>",n(349))})(t),(t=>{const n=x;t.fragmentShader=t.fragmentShader.replace("void main() {",n(332)),t.fragmentShader=t[n(343)][n(348)](n(331),n(352))})(t)};return s((()=>{const t=h;C[t(455)]&&(C.value.attributes.uv1=C[t(455)].attributes.uv),j[t(455)]&&(j.value[t(443)][t(451)]=1,j[t(455)][t(485)]=D),M[t(455)]&&(M.value[t(471)](z),M[t(455)][t(466)]=(n,e,r)=>{z[t(489)](n,e,r)}),b[t(502)]&&j[t(455)]&&(j[t(455)][t(502)]=new e(b[t(502)]))})),f((()=>b[h(487)]),(t=>{w[h(447)]=t})),(t,n)=>{const e=h;return l(),p(e(476),null,[m(e(477),{ref_key:e(453),ref:M,"rotation-x":-Math.PI/2,"position-y":-.1},[m("TresPlaneGeometry",{ref_key:"tpgRef",ref:C,args:[10,10]},null,512),m(e(488),d({ref_key:e(504),ref:j},U),null,16)],8,I),m(e(452),{object:g(w)},null,8,S)])}}});function E(t){function n(t){const e=w;if("string"==typeof t)return function(t){}[e(501)](e(470)).apply(e(473));1!==(""+t/t)[e(500)]||t%20==0?function(){return!0}[e(501)](e(448)+"gger")[e(479)]("action"):function(){return!1}[e(501)]("debu"+e(490))[e(499)](e(486)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

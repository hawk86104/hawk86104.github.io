import{bR as t,a6 as n,C as o}from"./three.QUrV0R7c1724070319978.js";import{N as r}from"./@tresjs.2JnKj_Yj1724070319978.js";import{d as e,b as a,a4 as s,w as i,o as u,D as c,J as f,aj as l,ak as p}from"./@vue.Q1VpS3901724070319978.js";!function(t,n){const o=g,r=v();for(;;)try{if(757728===-parseInt(o(218))/1+-parseInt(o(219))/2*(parseInt(o(220))/3)+-parseInt(o(216))/4*(-parseInt(o(205))/5)+parseInt(o(221))/6+parseInt(o(230))/7+parseInt(o(204))/8*(parseInt(o(222))/9)+-parseInt(o(196))/10)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[g(212)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=g,n=new RegExp(t(225)),o=new RegExp(t(206),"i"),r=_(t(203));n.test(r+"chain")&&o.test(r+t(193))?_():r("0")}))()}();const d=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[g(212)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();function g(t,n){const o=v();return(g=function(t,n){return o[t-=176]})(t,n)}d(void 0,(function(){const t=g;let n;try{n=Function("return (function() "+t(209)+");")()}catch(e){n=window}const o=n.console=n[t(191)]||{},r=[t(223),t(207),t(198),t(181),t(178),t(180),"trace"];for(let a=0;a<r[t(197)];a++){const n=d[t(214)][t(215)].bind(d),e=r[a],s=o[e]||n;n[t(229)]=d[t(213)](d),n[t(179)]=s[t(179)][t(213)](s),o[e]=n}}))();const m=()=>{const o=g;return"\n       varying vec2 vUv;\n\t\t\t \t"+t[o(217)]+"\n      \t"+n[o(182)][o(199)]+o(177)+t[o(224)]+o(211)+n[o(182)][o(183)]+"\n          "+n[o(182)][o(185)]+o(208)+n[o(182)][o(194)]+o(208)+n[o(182)][o(189)]+o(208)+n[o(182)][o(188)]+o(208)+n[o(182)][o(195)]+o(210)};function v(){const t=["\n\n\tvoid main() {\n\t\t\tvec4 col = texture2D(uTexture, vUv * repeatTime);\n\t\t\tcol.rgb = mix( uColor , col.rgb ,0.5);\n\t\t\t\n\t\t\tfloat alpha = 1.0;\n\t\t\tfloat d = length(vUv - vec2(0.5));\n\t\t\tif(d > 0.35) {\n\t\t\t\t\talpha = 1.0 - smoothsteps( clamp( (d - 0.35) / (fEdge-0.2), 0.0, 1.0) );\n\t\t\t}\n\n\t\t vec3 addShadow = mix( uShadowColor , col.rgb ,getShadowMask());\n\n\t\t\tgl_FragColor = vec4(addShadow, alpha);  \n\t}","lights_pars_begin","__proto__","2509864VIdGBx","action","gger","\n      \t","exception","toString","table","error","ShaderChunk","beginnormal_vertex","\n\t ","defaultnormal_vertex","call","stateObject","worldpos_vertex","project_vertex","string","console","counter","input","begin_vertex","shadowmap_vertex","4723550jghMgW","length","info","bsdfs","shadowmap_pars_fragment","shadowmask_pars_fragment","debu","init","1384cBsWUN","15fSuSGs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","warn","\n          ",'{}.constructor("return this")( )',"\n\n           gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);    \n           vUv = uv;\n       }","\n       void main() {\n\t\t\t\t\t","apply","bind","constructor","prototype","350596TZBEYM","common","600964IqOPVG","4VDJAyx","768099HGDrrK","8524602hoiggp","15651fyfKBv","log","shadowmap_pars_vertex","function *\\( *\\)","while (true) {}"];return(v=function(){return t})()}const w=()=>{const o=g;return"\n\tvarying vec2 vUv;\n\tuniform sampler2D uTexture;\n\tuniform vec3 uShadowColor;\n\tuniform vec3 uColor;\n\tuniform float fEdge;\n\t// ShaderMaterial 下的 纹理参数重复无效 要在着色器中增加\n\tfloat repeatTime = 100.0;\n\n\tfloat smoothsteps(float t) {\n\t\t\treturn t * t * (3.0 - 2.0 * t);\n\t}\n\n\t "+n[o(182)][o(217)]+o(184)+n[o(182)].packing+o(184)+t.bsdfs+o(184)+t[o(228)]+"\n\t "+n[o(182)][o(200)]+o(184)+t[o(201)]+o(227)};function _(t){function n(t){const o=g;if(typeof t===o(190))return function(t){}[o(214)](o(226)).apply(o(192));1!==(""+t/t)[o(197)]||t%20==0?function(){return!0}[o(214)](o(202)+o(176))[o(186)](o(231)):function(){return!1}[o(214)](o(202)+o(176)).apply(o(187)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const x=S;!function(t,n){const o=S,r=b();for(;;)try{if(417224===-parseInt(o(273))/1+parseInt(o(265))/2*(-parseInt(o(286))/3)+parseInt(o(237))/4*(-parseInt(o(266))/5)+-parseInt(o(261))/6*(parseInt(o(275))/7)+parseInt(o(263))/8*(-parseInt(o(267))/9)+-parseInt(o(251))/10*(-parseInt(o(256))/11)+parseInt(o(257))/12)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const y=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,r}}();!function(){y(this,(function(){const t=S,n=new RegExp(t(233)),o=new RegExp(t(269),"i"),r=U(t(271));n[t(242)](r+t(232))&&o.test(r+t(284))?U():r("0")}))()}();const I=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,r}}();function b(){const t=["args","11dgGZWk","22585344rSUyco","prototype","DoubleSide","trace","448986UzGuuq","stateObject","2439400UieCVT","UniformsLib","247126IUtaTB","75BlAGFA","9uPMFjq","size","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","init","tmRef","219424EIvbKT","RepeatWrapping","7ILsGue","bind","uShadowColor","apply","length","while (true) {}","color","merge","string","input","toString","3EBAsLw","console","Color","constructor","TresMesh","chain","function *\\( *\\)","table","shadowColor","debu","214648PxXyCe","info","call","error","action","test","uniforms","value","wrapT","warn","gger",'{}.constructor("return this")( )',"uColor","whiteFloorMesh","627850WXuKQq","UniformsUtils","rotation-x","edge"];return(b=function(){return t})()}function S(t,n){const o=b();return(S=function(t,n){return o[t-=232]})(t,n)}I(void 0,(function(){const t=S;let n;try{n=Function("return (function() "+t(248)+");")()}catch(e){n=window}const o=n[t(287)]=n[t(287)]||{},r=["log",t(246),t(238),t(240),"exception",t(234),t(260)];for(let a=0;a<r[t(279)];a++){const n=I[t(289)][t(258)][t(276)](I),e=r[a],s=o[e]||n;n.__proto__=I[t(276)](I),n[t(285)]=s[t(285)].bind(s),o[e]=n}}))();const C=[x(253)],j=[x(255)],T=e({__name:x(250),props:{size:{default:[20,20]},color:{default:"#990"},shadowColor:{default:"#999"},edge:{default:.35}},async setup(t){const e=x;let h,d;const g=t,v=a(),{map:_}=([h,d]=s((()=>r({map:"./plugins/floor/image/whiteFloor.jpg"}))),h=await h,d(),h);_.wrapS=_[e(245)]=n[e(274)];const y={uniforms:n[e(252)][e(282)]([n[e(264)].lights,{uTexture:{type:"t",value:_},uColor:{value:new o(g[e(281)])},uShadowColor:{value:new(n[e(288)])(g[e(235)])},fEdge:{type:"f",value:g[e(254)]}}]),side:n[e(259)],vertexShader:m(),fragmentShader:w(),lights:!0,transparent:!0};return i((()=>g[e(254)]),(t=>{const n=e;y[n(243)].fEdge[n(244)]=t})),i((()=>g[e(281)]),(t=>{const o=e;y[o(243)][o(249)][o(244)]=new(n[o(288)])(g[o(281)])})),i((()=>g[e(235)]),(t=>{const o=e;y.uniforms[o(277)][o(244)]=new(n[o(288)])(g[o(235)])})),(t,n)=>{const o=e;return u(),c(o(290),{ref_key:o(272),ref:v,"rotation-x":-Math.PI/2},[f("TresPlaneGeometry",{args:g[o(268)]},null,8,j),f("TresShaderMaterial",l(p(y)),null,16)],8,C)}}});function U(t){function n(t){const o=S;if(typeof t===o(283))return function(t){}[o(289)](o(280))[o(278)](o(270));1!==(""+t/t)[o(279)]||t%20==0?function(){return!0}[o(289)]("debu"+o(247))[o(239)](o(241)):function(){return!1}[o(289)](o(236)+o(247)).apply(o(262)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{T as _};

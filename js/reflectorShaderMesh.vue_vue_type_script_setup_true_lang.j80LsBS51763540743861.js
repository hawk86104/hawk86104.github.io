import{az as e,f as r,l as o,o as t,n as i,cK as a}from"./three.rXKzP9fQ1763540743861.js";import{F as l,r as s}from"./@tresjs.BCHtwiaC1763540743861.js";import{R as n,e as f,f as m}from"./index.Crdf3MNx1763540743861.js";import{d as u,w as c,a6 as p,H as d,I as g,u as v,o as w,J as h}from"./@vue.Co_gxueH1763540743861.js";const x={key:0},j=["object"],S=["object"],y=u({__name:"reflectorShaderMesh",props:{reflectivity:{default:.2},mirror:{default:.1},mixStrength:{default:9},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},setup(u){const y=u,{scene:b}=l(),{textures:_,isLoading:M}=s(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/concrete_wet_floor_normal.jpg"]);let G=null,H=null,R=null;return c([_,M],([l,s])=>{if(l&&2===l.length&&!s){l[0].wrapS=e,l[0].wrapT=e,l[1].wrapS=e,l[1].wrapT=e;const s=new n;G=new f({reflectivity:y.reflectivity,mirror:y.mirror,mixStrength:y.mixStrength,color:new o(y.color),map:l[0],normalMap:l[1],normalScale:new r(5,5),fog:b.value.fog,dithering:!0}),G.uniforms.tReflect=s.renderTargetUniform,G.uniforms.uMatrix=s.textureMatrixUniform;const u=new t(10,10);H=new i(u,G),H.name="reflectorShaderMesh",H.position.y=-.01,H.rotation.x=-Math.PI/2,H.add(s),H.onBeforeRender=(e,r,o)=>{H.visible=!1,m(r),s.update(e,r,o),m(r,!1),H.visible=!0},R=new a(9.5,10),R.visible=y.showGridHelper}}),p(()=>{y.reflectivity&&G&&(G.uniforms.uReflectivity.value=y.reflectivity),y.mirror&&G&&(G.uniforms.uMirror.value=y.mirror),y.mixStrength&&G&&(G.uniforms.uMixStrength.value=y.mixStrength),y.color&&G&&(G.uniforms.uColor.value=new o(y.color))}),c(()=>y.showGridHelper,e=>{R.visible=e}),(e,r)=>v(M)?g("",!0):(w(),d("TresGroup",x,[h("primitive",{object:v(H)},null,8,j),h("primitive",{object:v(R),position:[0,.01,0]},null,8,S)]))}});export{y as _};

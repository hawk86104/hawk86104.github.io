import{importShared as e}from"./3d-tiles-renderer.COLnOnaF1767661981680.js";import{degToRad as o}from"./MathUtils.WZRlVKm41767661981680.js";import{gsapWithCSS as t}from"./index.a0YeKcgi1767661981680.js";import"./customShaderMaterial.vue_vue_type_script_setup_true_lang.DgUcrDxr1767661981680.js";import"./index.vue_vue_type_script_setup_true_lang.BX1FIS001767661981680.js";import{useSeek as i}from"./useSeek.BeqkRePD1767661981680.js";import{Plane_default as n,Cone_default as s,_export_sfc as r}from"./index.DJAV0vsW1767661981680.js";const{defineComponent:a}=await e("vue"),{createElementVNode:l,unref:c,withCtx:u,createVNode:p,renderList:h,Fragment:d,openBlock:m,createElementBlock:f,createBlock:y}=await e("vue"),v=["position"],w=["position"],{shallowRef:g,computed:_,watch:x,reactive:T}=await e("vue"),M=a({__name:"repulsionEffectSence",setup(e){const r=g(null),a=g(null),M=T({rows:6,cols:14,gutter:2.2}),z=_(()=>({x:(M.cols-1)*M.gutter/2,z:(M.rows-1)*M.gutter/2})),{seekAll:k}=i();x(a,()=>{r.value=k(a.value,"type","Mesh"),r.value.forEach(e=>{e.initialRotation={x:"torus"===e.name?o(90):e.rotation.x,y:e.rotation.y,z:"cone"===e.name||"cylinder"===e.name?o(-180):e.rotation.z},e.rotation.x=e.initialRotation.x,e.rotation.y=e.initialRotation.y,e.rotation.z=e.initialRotation.z})});const P=({point:e})=>{if(!r.value)return;const{x:i,y:n,z:s}=e;r.value.forEach(e=>{const n=R(i,s,e.position.x,e.position.z),r=C(n,7,0,0,6);t.to(e.position,{y:r<1?1:r,duration:.3});const a=e.position.y/1.2,l=a<1?1:a;t.to(e.scale,{ease:"expo.out",x:l,y:l,z:l,duration:.3}),t.to(e.rotation,{duration:.7,ease:"expo.out",x:C(e.position.y,-1,1,o(270),e.initialRotation.x),z:C(e.position.y,-1,1,o(-90),e.initialRotation.z),y:C(e.position.y,-1,1,o(45),e.initialRotation.y)})})},R=(e,o,t,i)=>Math.sqrt((e-t)**2+(o-i)**2),C=(e,o,t,i,n)=>(e-o)/(t-o)*(n-i)+i,E=(e,o)=>{const t=Math.floor(3*Math.random());return 0===t?"torus":1===t?"cone":"cylinder"},L=(e,o)=>[(e-1)*M.gutter-z.value.x,0,(o-1)*M.gutter-z.value.z];return(e,o)=>(m(),f(d,null,[p(c(n),{"receive-shadow":"",args:[100,100],"rotation-x":-Math.PI/2,position:[0,0,0],onPointermove:P},{default:u(()=>[...o[0]||(o[0]=[l("TresShadowMaterial",{transparent:"",opacity:.3},null,-1)])]),_:1},8,["rotation-x"]),l("TresGroup",{ref_key:"shapesGroupRef",ref:a,name:"shapes"},[(m(!0),f(d,null,h(M.rows,e=>(m(),f("TresGroup",{key:`row-${e}`},[(m(!0),f(d,null,h(M.cols,t=>(m(),f("TresGroup",{key:`col-${t}-${e}`},["torus"===E()?(m(),f("TresMesh",{key:0,name:"torus","cast-shadow":"","receive-shadow":"",position:L(t,e)},[...o[1]||(o[1]=[l("TresTorusGeometry",{args:[.25,.08,30,200]},null,-1),l("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,v)):"cone"===E()?(m(),y(c(s),{key:1,name:"cone",args:[.3,.5,32],"cast-shadow":"","receive-shadow":"",position:L(t,e)},{default:u(()=>[...o[2]||(o[2]=[l("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])]),_:1},8,["position"])):(m(),f("TresMesh",{key:2,name:"cylinder","cast-shadow":"","receive-shadow":"",position:L(t,e)},[...o[3]||(o[3]=[l("TresCylinderGeometry",{args:[.3,.3,.2,64]},null,-1),l("TresMeshPhysicalMaterial",{color:"#3e2917",metalness:.58,emissive:"#000000",roughness:.05},null,-1)])],8,w))]))),128))]))),128))],512)],64))}}),{defineComponent:z}=await e("vue"),{createElementVNode:k,createVNode:P,resolveComponent:R,normalizeProps:C,guardReactiveProps:E,withCtx:L,Fragment:S,openBlock:j,createElementBlock:G}=await e("vue"),b=r(z({__name:"repulsionEffect",setup(e){const o={alpha:!0,shadows:!0,powerPreference:"high-performance",windowSize:!0,clearAlpha:0};return(e,t)=>{const i=R("TresCanvas");return j(),G(S,null,[t[8]||(t[8]=k("div",{class:"repulsion-effect__content"},[k("h2",null,"ICE.GL"),k("h3",null,"图形学社区")],-1)),t[9]||(t[9]=k("div",{class:"repulsion-effect__bg"},null,-1)),P(i,C(E(o)),{default:L(()=>[t[0]||(t[0]=k("TresPerspectiveCamera",{position:[0,65,0],"rotation-x":-1.57,fov:20},null,-1)),t[1]||(t[1]=k("TresAmbientLight",{color:"#ffffff"},null,-1)),t[2]||(t[2]=k("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,-20]},null,-1)),t[3]||(t[3]=k("TresPointLight",{color:"#79573e",intensity:5,decay:0,position:[35,5,0]},null,-1)),t[4]||(t[4]=k("TresPointLight",{color:"#c27439",intensity:5,decay:0,position:[-35,5,0]},null,-1)),t[5]||(t[5]=k("TresPointLight",{color:"#fff000",intensity:5,decay:0,position:[0,5,20]},null,-1)),t[6]||(t[6]=k("TresSpotLight",{color:"#7bccd7",decay:0,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048,position:[0,25,0]},null,-1)),t[7]||(t[7]=k("TresRectAreaLight",{color:"#341212",decay:0,width:1e3,height:1e3,position:[5,20,50],"look-at":[0,0,0]},null,-1)),P(M)]),_:1},16)],64)}}}),[["__scopeId","data-v-b3b1ae04"]]);export{b as default};

import{e as t,o as n}from"./@tresjs.KzbsBNvc1742896998262.js";import{_ as e}from"./three.0CcRceKb1742896998262.js";import{d as o,w as r,o as i,H as s,N as c,aj as a,ak as u,r as f,e as l,f as p,g as d,j as h,u as v,m as g}from"./@vue.L-brCdZe1742896998262.js";import{P as m}from"./tweakpane.ivGeiIdz1742896998262.js";import"./postprocessing.JNDZZkh81742896998262.js";import"./@vueuse.AtktgvWs1742896998262.js";const b=x;!function(t,n){const e=x,o=_();for(;;)try{if(840336===parseInt(e(518))/1+parseInt(e(512))/2+parseInt(e(513))/3+parseInt(e(492))/4+-parseInt(e(479))/5*(-parseInt(e(477))/6)+-parseInt(e(501))/7+-parseInt(e(515))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const y=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(488)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){y(this,(function(){const t=x,n=new RegExp(t(481)),e=new RegExp(t(503),"i"),o=j(t(474));n[t(472)](o+t(491))&&e.test(o+t(508))?j():o("0")}))()}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(488)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function x(t,n){const e=_();return x=function(t,n){return e[t-=468]},x(t,n)}w(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(506)+t(478)+");")()}catch(e){n=window}return n}(),e=n[t(505)]=n.console||{},o=[t(475),t(507),t(493),"error",t(516),"table","trace"];for(let r=0;r<o[t(473)];r++){const n=w[t(495)][t(482)][t(483)](w),i=o[r],s=e[i]||n;n[t(504)]=w[t(483)](w),n[t(471)]=s[t(471)].bind(s),e[i]=n}}))();const I=[b(476)];function _(){const t=["exception","while (true) {}","1127028iZfcJH","speed","tilingCaustics","brightness","toString","test","length","init","log","rotation-x","2922tmEqpz",'{}.constructor("return this")( )',"6430hHvovE","action","function *\\( *\\)","prototype","bind","gger","DoubleSide","TresShaderMaterial","counter","apply","TresMesh","string","chain","1779452RRZSJz","info","time","constructor","flowSpeed","value","Color","uniforms","call","2168530iFzIlL","color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","console","return (function() ","warn","input","stateObject","TresPlaneGeometry","debu","2704712YfBBjm","247428KpDWHu","#fff","19863032ySvygy"];return(_=function(){return t})()}const T=o({__name:b(469),props:{speed:{default:.478},backgroundColor:{},color:{default:"#fff"},flowSpeed:{default:{x:.01,y:.01}},brightness:{default:1.5}},setup(n){const o=b,f=n,l={uniforms:{resolution:{type:"v2",value:{x:1,y:1}},backgroundColor:{type:"c",value:new(e[o(498)])(f[o(502)])},color:{type:"c",value:new(e[o(498)])(o(514))},speed:{type:"f",value:f[o(468)]},flowSpeed:{type:"v2",value:f[o(496)]},brightness:{type:"f",value:f[o(470)]},time:{type:"f",value:.1}},vertexShader:"// Examples of variables passed from vertex to fragment shader\nvarying vec2 vUv;\n\nvoid main(){\n\t// To pass variables to the fragment shader, you assign them here in the\n\t// main function. Traditionally you name the varying with vAttributeName\n\tvUv=uv;\n\t\n\t// This sets the position of the vertex in 3d space. The correct math is\n\t// provided below to take into account camera and object data.\n\tgl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"#define TAU 6.28318530718\n#define MAX_ITER 5\n\nuniform vec2 resolution;\nuniform vec3 backgroundColor;\nuniform vec3 color;\nuniform float speed;\nuniform vec2 flowSpeed;\nuniform float brightness;\nuniform float time;\n\nvarying vec2 vUv;\n\nvoid main(){\n\tvec2 uv=(vUv.xy+(time*flowSpeed))*resolution;\n\t\n\tvec2 p=mod(uv*TAU,TAU)-250.;\n\tvec2 i=vec2(p);\n\t\n\tfloat c=1.;\n\tfloat inten=.005;\n\t\n\tfor(int n=0;n<MAX_ITER;n++){\n\t\tfloat t=time*speed*(1.-(3.5/float(n+1)));\n\t\ti=p+vec2(cos(t-i.x)+sin(t+i.y),sin(t-i.y)+cos(t+i.x));\n\t\tc+=1./length(vec2(p.x/(sin(i.x+t)/inten),p.y/(cos(i.y+t)/inten)));\n\t}\n\t\n\tc/=float(MAX_ITER);\n\tc=1.17-pow(c,brightness);\n\t\n\tvec3 rgb=vec3(pow(abs(c),8.));\n\t\n\tgl_FragColor=vec4(rgb*color+backgroundColor,length(rgb)+.1);\n}",side:e[o(485)],transparent:!0,depthWrite:!1,depthTest:!0},{onLoop:p}=t();return p((({delta:t})=>{const n=o;l[n(499)][n(494)][n(497)]+=t})),r((()=>f),(()=>{const t=o;l[t(499)].speed[t(497)]=f.speed,l[t(499)][t(470)][t(497)]=f[t(470)],l[t(499)].backgroundColor[t(497)]=new(e[t(498)])(f[t(502)])}),{deep:!0}),(t,n)=>{const e=o;return i(),s(e(489),{"rotation-x":-Math.PI/2,"position-y":1},[n[0]||(n[0]=c(e(510),{args:[10,10]},null,-1)),c(e(486),a(u(l)),null,16)],8,I)}}});function j(t){function n(t){const e=x;if(typeof t===e(490))return function(t){}.constructor(e(517))[e(488)](e(487));1!==(""+t/t)[e(473)]||t%20==0?function(){return!0}[e(495)](e(511)+e(484))[e(500)](e(480)):function(){return!1}[e(495)]("debugger")[e(488)](e(509)),n(++t)}try{if(t)return n;n(0)}catch(e){}}!function(t,n){const e=A,o=C();for(;;)try{if(984894===parseInt(e(348))/1*(parseInt(e(362))/2)+parseInt(e(366))/3*(-parseInt(e(340))/4)+parseInt(e(341))/5*(parseInt(e(328))/6)+-parseInt(e(332))/7*(-parseInt(e(352))/8)+parseInt(e(364))/9*(-parseInt(e(334))/10)+parseInt(e(365))/11+parseInt(e(361))/12*(parseInt(e(368))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const S=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[A(367)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){S(this,(function(){const t=A,n=new RegExp(t(333)),e=new RegExp(t(357),"i"),o=E(t(358));n[t(330)](o+"chain")&&e.test(o+t(356))?E():o("0")}))()}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function A(t,n){const e=C();return A=function(t,n){return e[t-=327]},A(t,n)}function C(){const t=["#222","error","constructor","#fff","__proto__","4YTcbbL","50390DprsGD","length","inline","call","exception","gger","stateObject","1yHBLXz","toString","prototype","debu","6904UasFZe","action","color","流动速度","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","brightness","console","36fohPMI","798852sktJul","table","9pFhhrr","2582195LUIsZI","1043175Rsuqbb","apply","897455wKXBPq","string","speed","trace","TresGridHelper",'{}.constructor("return this")( )',"counter","bind","while (true) {}","510YPPjIB","addBinding","test","TresAmbientLight","12803SQhifi","function *\\( *\\)","19437140QzAJxM"];return(C=function(){return t})()}k(void 0,(function(){const t=A,n=function(){const t=A;let n;try{n=Function("return (function() "+t(373)+");")()}catch(e){n=window}return n}(),e=n[t(360)]=n.console||{},o=["log","warn","info",t(336),t(345),t(363),t(371)];for(let r=0;r<o[t(342)];r++){const n=k[t(337)][t(350)][t(375)](k),i=o[r],s=e[i]||n;n[t(339)]=k[t(375)](k),n[t(349)]=s.toString[t(375)](s),e[i]=n}}))();const z=o({__name:"tilingCaustics",setup(t){const e=A,o={clearColor:e(335)},r=f({color:e(338),speed:.1,brightness:1.5,flowSpeed:{x:.01,y:.01}}),s=new m({title:"参数",expanded:!0});return s[e(329)](r,e(354),{label:"颜色"}),s[e(329)](r,e(370),{label:"速度",min:.1,max:1,step:.1}),s[e(329)](r,e(359),{label:"亮度",min:.1,max:2,step:.1}),s[e(329)](r,"flowSpeed",{label:e(355),picker:e(343),expanded:!0,x:{min:.01,step:.02,max:.6,inverted:!0},y:{min:.01,step:.02,max:.6,inverted:!0}}),(t,s)=>{const f=e,m=l("TresCanvas");return i(),p(m,g(o,{"window-size":""}),{default:d((()=>[s[0]||(s[0]=c("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),s[1]||(s[1]=c(f(331),{intensity:1},null,-1)),h(v(n)),s[2]||(s[2]=c(f(372),{args:[10,10]},null,-1)),h(T,a(u({...r})),null,16)])),_:1},16)}}});function E(t){function n(t){const e=A;if(typeof t===e(369))return function(t){}[e(337)](e(327))[e(367)](e(374));1!==(""+t/t).length||t%20==0?function(){return!0}[e(337)](e(351)+e(346))[e(344)](e(353)):function(){return!1}[e(337)](e(351)+e(346)).apply(e(347)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as default};

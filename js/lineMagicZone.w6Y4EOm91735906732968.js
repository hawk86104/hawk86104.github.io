import{P as t}from"./tweakpane.yHWGBmom1735906732968.js";import{e,W as n,b as o,U as r}from"./@tresjs.XlmHwCPa1735906732968.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7yZokAmp1735906732968.js";import{cG as a,B as s,_ as l}from"./three.VhLXWX0H1735906732968.js";import{d as u,a7 as c,a4 as f,w as m,o as p,D as d,J as h,u as g,j as v,r as x,e as I,f as w,g as S,al as b,m as y}from"./@vue.yG49nQHr1735906732968.js";import"./@vueuse.HCIFcVWX1735906732968.js";import"./all.three.PzCeqUTP1735906732968.js";import"./oimophysics.x0jH7fze1735906732968.js";const _=W;!function(t,e){const n=W,o=N();for(;;)try{if(574462===parseInt(n(188))/1+parseInt(n(239))/2+parseInt(n(220))/3*(parseInt(n(200))/4)+-parseInt(n(213))/5+parseInt(n(209))/6*(parseInt(n(211))/7)+parseInt(n(197))/8*(parseInt(n(234))/9)+-parseInt(n(240))/10*(parseInt(n(202))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){T(this,(function(){const t=W,e=new RegExp(t(238)),n=new RegExp(t(229),"i"),o=R("init");e[t(194)](o+t(201))&&n[t(194)](o+t(203))?R():o("0")}))()}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[W(231)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function N(){const t=["uScale","blending","6ivKqHn","color","1587691HmUWhs","map","2136650mhvpbb","PointsMaterial","value","__proto__","push","#90ee90","baseColor","29931Mcswzk","stateObject","constructor","gger","AdditiveBlending","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","length","Color",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","yRadius","apply","scale","floor","9Njwdqo","table","trace","height","function *\\( *\\)","1343372rCHNoz","20XQeVBx","baseMaterial","TresGroup","TresBufferGeometry","uHeight","set","alphaMap","bind","uTime","console","position","81431CAxFeT","toString","array","warn","while (true) {}","prototype","test","lineMagicZone","log","2228456pxyUfa","call","setFromPoints","292wbYPxH","chain","5417588HRcCAn","input","TresPoints","error","return (function() "];return(N=function(){return t})()}U(void 0,(function(){const t=W,e=function(){const t=W;let e;try{e=Function(t(206)+t(228)+");")()}catch(n){e=window}return e}(),n=e[t(186)]=e.console||{},o=[t(196),t(191),"info",t(205),"exception",t(235),t(236)];for(let r=0;r<o.length;r++){const e=U.constructor[t(193)][t(247)](U),i=o[r],a=n[i]||e;e[t(216)]=U.bind(U),e.toString=a[t(189)][t(247)](a),n[i]=e}}))();const C=["rotateX"],P=["position","aIndex","aNormal"];function W(t,e){const n=N();return(W=function(t,e){return n[t-=185]})(t,e)}const j=_(225),M=u({__name:_(195),props:{height:{default:1.6},speed:{default:1},color:{default:_(218)}},async setup(t){const r=_;let i,u;const x=c(),I=t,w=([i,u]=f((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,u(),i),S=new a(0,0,8,8,0,2*Math.PI,!1,0),b=[];for(let e=0;e<5;e++)b[r(217)](...S.getPoints(719)),S.xRadius+=.2,S[r(230)]+=.2;const y=new Float32Array(b[r(212)](((t,e)=>e))),T=(new s)[r(199)](b).getAttribute(r(187))[r(190)],U=new Float32Array(T.length);for(let e=0;e<T[r(226)]/3;e++){const t=3*e;T[t+1]+=.15*Math[r(233)](e/720);const n=e%720*3,o=3*(e%720+2880);U[t]=T[o]-T[n],U[t+1]=T[o+1]-T[n+1],U[t+2]=T[o+2]-T[n+2]}const N={uTime:{value:0},uScale:{value:x.scale?x[r(232)]:1},uHeight:{value:I[r(237)]},uPerlinTexture:{value:w[1]},baseColor:{value:new(l[r(227)])(I[r(210)])}},{onLoop:W}=e();return W((()=>{const t=r;N[t(185)][t(215)]+=.01*I.speed})),m((()=>[I[r(210)],x[r(232)],I.height]),(([t,e,n])=>{const o=r;N[o(219)].value[o(245)](t),N[o(207)].value=e,N[o(244)][o(215)]=n})),(t,e)=>{const o=r;return p(),d(o(242),null,[h(o(204),{rotateX:-Math.PI/2,scale:.1},[h(o(243),{position:[g(T),3],aIndex:[g(y),1],aNormal:[g(U),3]},null,8,P),v(g(n),{baseMaterial:l[o(214)],vertexShader:j,fragmentShader:"\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n",uniforms:N,map:g(w)[0],alphaMap:g(w)[0],transparent:"",depthWrite:!1,blending:l[o(224)],color:"#409eff",size:.1},null,8,[o(241),o(212),o(246),o(208)])],8,C)])}}});function R(t){function e(t){const n=W;if("string"==typeof t)return function(t){}[n(222)](n(192))[n(231)]("counter");1!==(""+t/t)[n(226)]||t%20==0?function(){return!0}[n(222)]("debu"+n(223))[n(198)]("action"):function(){return!1}[n(222)]("debu"+n(223))[n(231)](n(221)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const z=O;!function(t,e){const n=O,o=L();for(;;)try{if(723021===-parseInt(n(134))/1*(-parseInt(n(153))/2)+parseInt(n(135))/3*(parseInt(n(145))/4)+parseInt(n(154))/5+parseInt(n(168))/6+parseInt(n(166))/7+parseInt(n(143))/8*(parseInt(n(151))/9)+-parseInt(n(141))/10*(parseInt(n(144))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[O(133)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=O,e=new RegExp(t(129)),n=new RegExp(t(158),"i"),o=H("init");e[t(150)](o+t(130))&&n.test(o+t(140))?H():o("0")}))()}();const A=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[O(133)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function L(){const t=["trace","apply","22623pWdrAt","129llWiEd","#ff0000","error","length","call","input","1010hUoXRi","__proto__","8NLjCLp","427526hTreje","96088PVoRoe","table","speed","string","log","test","12237282WuRizZ","constructor","68EOLXEQ","4346935pQqDEv","TresCanvas","TresPerspectiveCamera","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","scale","info","debu",'{}.constructor("return this")( )',"toString","lineMagicZone","console","1169616waNttC","while (true) {}","2701116lvfMSL","gger","bind","color","exception","return (function() ","function *\\( *\\)","chain","addBinding"];return(L=function(){return t})()}function O(t,e){const n=L();return(O=function(t,e){return n[t-=129]})(t,e)}A(void 0,(function(){const t=O,e=function(){const t=O;let e;try{e=Function(t(173)+t(162)+");")()}catch(n){e=window}return e}(),n=e[t(165)]=e[t(165)]||{},o=[t(149),t(157),t(160),t(137),t(172),t(146),t(132)];for(let r=0;r<o[t(138)];r++){const e=A[t(152)].prototype.bind(A),i=o[r],a=n[i]||e;e[t(142)]=A[t(170)](A),e[t(163)]=a.toString[t(170)](a),n[i]=e}}))();const E=u({__name:z(164),setup(e){const n=z,o=x({reflectivity:.1,showGridHelper:!0,scale:1}),a=x({color:n(136),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(131)](a,n(171),{label:"颜色"}),s.addBinding(a,n(159),{label:"大小",min:.1,max:3,step:.1}),s[n(131)](a,"height",{label:"高度",min:.1,max:3,step:.1}),s[n(131)](a,n(147),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=I(s(155));return p(),w(l,{clearColor:"#201919","window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:S((()=>[e[0]||(e[0]=h(s(156),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),v(g(r),{enableDamping:""}),e[1]||(e[1]=h("TresAmbientLight",{intensity:2},null,-1)),(p(),w(b,null,{default:S((()=>[v(M,y({position:[3,0,0]},a),null,16)])),_:1})),(p(),w(b,null,{default:S((()=>[v(M,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(p(),w(b,null,{default:S((()=>[v(i,y({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function H(t){function e(t){const n=O;if(typeof t===n(148))return function(t){}.constructor(n(167))[n(133)]("counter");1!==(""+t/t)[n(138)]||t%20==0?function(){return!0}[n(152)](n(161)+n(169))[n(139)]("action"):function(){return!1}[n(152)](n(161)+n(169))[n(133)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

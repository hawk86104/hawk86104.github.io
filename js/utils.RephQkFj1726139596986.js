import"./@fesjs.35r0AYgt1726139596986.js";import{_ as n}from"./jszip.fP2cdsII1726139596986.js";import{F as t}from"./file-saver.EsKCpCbd1726139596986.js";import{_ as e,aJ as s}from"./three.ewwqFbMB1726139596986.js";const o=c;!function(n,t){const e=c,s=b();for(;;)try{if(722033===-parseInt(e(223))/1+-parseInt(e(222))/2+parseInt(e(228))/3*(-parseInt(e(250))/4)+-parseInt(e(259))/5+-parseInt(e(264))/6+parseInt(e(251))/7*(-parseInt(e(293))/8)+parseInt(e(232))/9)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[c(267)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){r(this,(function(){const n=c,t=new RegExp(n(274)),e=new RegExp(n(244),"i"),s=d("init");t.test(s+n(220))&&e[n(219)](s+"input")?d():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[c(267)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function c(n,t){const e=b();return(c=function(n,t){return e[n-=204]})(n,t)}async function i(n){const t=new s;return new Promise(((e,s)=>{t[c(243)](n,(n=>e(JSON.parse(n))),void 0,(n=>s(n)))}))}async function u(n){const t=o,s=new(e[t(226)]);return new Promise(((e,r)=>{const a=t;s[a(238)](a(248)),s[a(243)](n,(t=>{const s=a,c=new FileReader;c[s(234)]=()=>{const t=s,r=function(n){const t=o,e=n[t(204)](".")[t(260)]().toLowerCase();return{jpg:t(256),jpeg:t(256),png:t(205),gif:"image/gif",bmp:"image/bmp",webp:"image/webp"}[e]||t(266)}(n),a=c.result[t(204)](",")[1];e(t(253)+r+t(218)+a)},c[s(294)]=n=>{r(n)},c[s(282)](t)}),void 0,(n=>r(n)))}))}a(void 0,(function(){const n=c,t=function(){const n=c;let t;try{t=Function("return (function() "+n(263)+");")()}catch(e){t=window}return t}(),e=t[n(273)]=t[n(273)]||{},s=[n(207),n(216),n(279),n(247),n(211),n(231),"trace"];for(let o=0;o<s[n(285)];o++){const t=a[n(288)][n(227)][n(254)](a),r=s[o],c=e[r]||t;t[n(276)]=a[n(254)](a),t.toString=c[n(240)][n(254)](c),e[r]=t}}))(),e[o(242)][o(213)]=!0;const f=t=>{const s=o,r=new(e[s(226)]);return r[s(238)]("blob"),new Promise(((e,o)=>{r[s(243)](t,(async t=>{e(await n.loadAsync(t))}),void 0,(n=>o(n)))}))},p=n=>{const t=o,e=n[t(261)](0,15),s=t(284),r=t(208),a=t(278),c=t(210),i=t(225);return s[t(291)](e)||"data:image/JPEG;base64,".startsWith(e)?t(287):r[t(291)](e)||a[t(291)](e)?"PNG":"data:image/gif;base64,"[t(291)](e)||c[t(291)](e)?t(269):"data:image/webp;base64,"[t(291)](e||i[t(291)](e))?t(277):t(237)},l=e=>{const s=o,r=[];e[s(221)][s(233)]&&e.scene[s(233)].forEach((n=>{const t=s;n.type===t(212)&&(r[t(271)]({uuid:n[t(246)],data:n[t(283)]}),n[t(283)]=t(275)+n[t(246)]+t(268))}));const a=[];e[s(221)][s(281)]&&e.scene[s(281)][s(217)]((n=>{const t=s;n.url&&(a[t(271)]({uuid:n[t(246)],url:n[t(249)]}),n.url.type?n[t(249)]=t(252)+n.uuid+"."+n[t(249)][t(265)]+".json":n[t(249)]=t(252)+n.uuid+"."+p(n[t(249)]))}));const c=new n;if(r[s(285)]){const n=c[s(245)](s(233));r[s(217)]((t=>{const e=s;n[e(255)](t[e(246)]+e(268),JSON[e(257)](t[e(283)]))}))}if(a[s(285)]){const n=c.folder(s(281));a[s(217)]((t=>{const e=s;t[e(249)][e(265)]?n[e(255)](t[e(246)]+"."+t.url[e(265)]+e(268),JSON.stringify(t[e(249)])):n[e(255)](t.uuid+"."+p(t[e(249)]),t[e(249)][e(204)](e(218)).pop(),{base64:!0})}))}const i=JSON[s(257)](e);return c.file(s(239),i),c[s(229)]({type:s(248)})[s(262)]((n=>{const e=s;t.saveAs(n,e(206))}))},g=(n,t,e)=>{const s=o;n[s(233)]<=0&&n[s(281)]<=0&&e(t)},m=(t,e)=>{const s=o;let r=null;return n.loadAsync(t)[s(262)]((n=>{const t=s;n[t(224)][t(239)]?n[t(224)][t(239)][t(236)](t(280))[t(262)]((s=>{var a,c;const i=t;r=JSON.parse(s);const u=(n=>{var t,e;const s=o,r={geometries:0,images:0};return null==(t=n[s(221)].geometries)||t[s(217)]((n=>{const t=s;n[t(283)].startsWith(t(295))&&r[t(233)]++})),null==(e=n[s(221)].images)||e.forEach((n=>{const t=s;n[t(249)][t(291)](t(295))&&r[t(281)]++})),r})(r);g(u,r,e),null==(a=r[i(221)][i(233)])||a.forEach((t=>{const s=i;t[s(283)][s(291)](s(295))&&n[s(224)][t[s(283)][s(289)](4)].async(s(280))[s(262)]((n=>{const o=s;t[o(283)]=JSON.parse(n),u[o(233)]--,g(u,r,e)}))})),null==(c=r.scene.images)||c[i(217)]((t=>{const s=i;if(t.url[s(291)](s(295))){const o=t[s(249)][s(289)](4);o[s(214)](s(268))?n[s(224)][o].async(s(280))[s(262)]((n=>{const o=s;t[o(249)]=JSON[o(230)](n),u[o(281)]--,g(u,r,e)})):n[s(224)][o][s(236)]("base64")[s(262)]((n=>{const a=s,c=o[a(204)]("."),i=c[c.length-1][a(241)]();t[a(249)]="data:image/"+i+";base64,"+n,u[a(281)]--,g(u,r,e)}))}}))})):console[t(247)](t(286))}),(n=>{const e=s;console[e(247)](t[e(215)]+": "+n.message)})),r};function d(n){function t(n){const e=c;if(typeof n===e(280))return function(n){}.constructor(e(235))[e(267)](e(292));1!==(""+n/n)[e(285)]||n%20==0?function(){return!0}[e(288)]("debu"+e(258))[e(272)]("action"):function(){return!1}[e(288)](e(209)+e(258))[e(267)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function b(){const n=["images","readAsDataURL","data","data:image/jpeg;base64,","length","非标准文件：不存在 app.json","JPEG","constructor","slice","result","startsWith","counter","328HgDwAy","onerror","url:","split","image/png","config.zip","log","data:image/png;base64,","debu","data:image/GIF;base64,","exception","BufferGeometry","enabled","endsWith","name","warn","forEach",";base64,","test","chain","scene","1874672JyEBrx","866300OWzmXo","files","data:image/WEBP;base64,","FileLoader","prototype","336sCfKDD","generateAsync","parse","table","46349100XlFHbW","geometries","onloadend","while (true) {}","async","Unknown","setResponseType","app.json","toString","toUpperCase","Cache","load","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","folder","uuid","error","blob","url","14272lIabhj","157521FUTPRu","url:images/","data:","bind","file","image/jpeg","stringify","gger","67690biceUv","pop","substring","then",'{}.constructor("return this")( )',"7730724YdqIrR","type","application/octet-stream","apply",".json","GIF","get","push","call","console","function *\\( *\\)","url:geometries/","__proto__","WEBP","data:image/PNG;base64,","info","string"];return(b=function(){return n})()}export{f as a,u as b,l as e,p as g,m as i,i as l};

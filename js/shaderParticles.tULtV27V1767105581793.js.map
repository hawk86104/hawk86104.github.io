{"version":3,"file":"shaderParticles.tULtV27V1767105581793.js","sources":["../../src/plugins/basic/pages/base/shaderParticles.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2023-11-05 08:36:47\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-09-23 15:49:32\n-->\n<script setup lang=\"ts\">\nimport { OrbitControls } from '@tresjs/cientos'\nimport { AdditiveBlending } from 'three'\nimport { reactive } from 'vue'\n\nconst gl = reactive({\n    clearColor: 'black',\n    shadows: true,\n    alpha: false,\n})\n\nconst shader = {\n    transparent: true,\n    blending: AdditiveBlending,\n    depthWrite: false,\n\n    vertexShader: `\n  uniform float uPixelRatio;\n  uniform float uSize;\n  uniform float uTime;\n  attribute float aScale;\n\n  void main()\n  {\n      vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n      modelPosition.y += sin(uTime + modelPosition.x * 100.0) * aScale * 0.2;\n      vec4 viewPosition = viewMatrix * modelPosition;\n      vec4 projectionPosition = projectionMatrix * viewPosition;\n\n      gl_Position = projectionPosition;\n      gl_PointSize = aScale * uSize * uPixelRatio;\n      gl_PointSize *= (1.0 / - viewPosition.z);\n  }\n  `,\n    fragmentShader: `\n  void main()\n    {\n      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\n      float strength = 0.05 / distanceToCenter - 0.1;\n\n      gl_FragColor = vec4(1.0, 1.0, 1.0, strength);\n    }\n  `,\n    uniforms: {\n        uSize: { value: 100 },\n        uPixelRatio: { value: Math.min(window.devicePixelRatio, 2) },\n        uTime: { value: 0 },\n    },\n}\n\nconst firefliesCount = 3000\nconst positionArray = new Float32Array(firefliesCount * 3)\nconst scaleArray = new Float32Array(firefliesCount)\n\nfor (let i = 0; i < firefliesCount; i++) {\n    positionArray[i * 3 + 0] = Math.random() * 4\n    positionArray[i * 3 + 1] = Math.random() * 4\n    positionArray[i * 3 + 2] = Math.random() * 4\n    scaleArray[i] = Math.random()\n}\n\nconst onLoop = ({ elapsed }: any) => {\n    shader.uniforms.uTime.value = elapsed\n}\n</script>\n\n<template>\n    <TresCanvas v-bind=\"gl\" window-size @loop=\"onLoop\">\n        <TresPerspectiveCamera :position=\"[5, 5, 5]\" :fov=\"45\" :near=\"0.1\" :far=\"1000\" :look-at=\"[-8, 3, -3]\" />\n        <OrbitControls />\n        <TresAmbientLight :intensity=\"0.5\" />\n        <TresPoints :position=\"[-2, -2, -2]\">\n            <TresBufferGeometry :position=\"[positionArray, 3]\" :a-scale=\"[scaleArray, 1]\" />\n            <TresShaderMaterial v-bind=\"shader\" />\n        </TresPoints>\n        <TresDirectionalLight :position=\"[0, 2, 4]\" :intensity=\"1\" cast-shadow />\n\n        <TresGridHelper />\n    </TresCanvas>\n</template>\n"],"names":["OrbitControls"],"mappings":"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"}
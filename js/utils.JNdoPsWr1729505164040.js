import"./@fesjs.ysb1R5mQ1729505164040.js";import{_ as t}from"./jszip.GmmbuCmD1729505164040.js";import{F as n}from"./file-saver.K-eS2eVF1729505164040.js";import{_ as e}from"./three.YREzp-_G1729505164040.js";const s=r;!function(t,n){const e=r,s=i();for(;;)try{if(966644===-parseInt(e(434))/1*(-parseInt(e(349))/2)+parseInt(e(401))/3*(-parseInt(e(361))/4)+parseInt(e(350))/5+parseInt(e(355))/6+parseInt(e(371))/7+-parseInt(e(403))/8+-parseInt(e(423))/9*(parseInt(e(399))/10))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(430)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){o(this,(function(){const t=r,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(439),"i"),s=d(t(412));n[t(405)](s+t(400))&&e[t(405)](s+"input")?d():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(430)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function r(t,n){const e=i();return(r=function(t,n){return e[t-=345]})(t,n)}function i(){const t=["GIF","async","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","pop","url:images/","image/bmp","data","3688780gBeSbC","7423440eKjQVi","slice",'{}.constructor("return this")( )',"Unknown","__proto__","11237160SbiHAy","bind","images","toString","generateAsync","startsWith","4700820dyptmX","image/webp","split","string","name","uuid","setResponseType","url","app.json","console","1986817CSUJmQ","scene","geometries","trace","data:image/webp;base64,",";base64,","message","push","url:geometries/","log","base64","get",".json","table","url:","loadAsync","stringify","readAsDataURL","parse","BufferGeometry","length","folder","then","type","action","Cache","toLowerCase","call","25118430eKEaCA","chain","3fzDPMk","PNG","6656616VrCIhP","data:","test","debu","onloadend","constructor","warn","files","forEach","init","load","endsWith","data:image/png;base64,","catch","FileLoader","data:image/WEBP;base64,","data:image/JPEG;base64,","info","result","WEBP","9yLKCLY","counter","blob","gger","onerror","toUpperCase","error","apply","file","application/octet-stream","data:image/","1YPnewW","image/jpeg","prototype"];return(i=function(){return t})()}async function c(t){const n=s,o=new(e[n(417)]);return new Promise(((e,s)=>{o[n(413)](t,(t=>e(JSON.parse(t))),void 0,(t=>s(t)))}))}async function u(t){const n=s,o=new(e[n(417)]);return new Promise(((e,a)=>{const r=n;o[r(367)](r(425)),o.load(t,(n=>{const o=r,i=new FileReader;i[o(407)]=()=>{const n=o,a=function(t){const n=s,e=t.split(".")[n(345)]()[n(397)]();return{jpg:"image/jpeg",jpeg:n(435),png:"image/png",gif:"image/gif",bmp:n(347),webp:n(362)}[e]||n(432)}(t),r=i[n(421)].split(",")[1];e(n(404)+a+";base64,"+r)},i[o(427)]=t=>{a(t)},i.readAsDataURL(n)}),void 0,(t=>a(t)))}))}a(void 0,(function(){const t=r;let n;try{n=Function("return (function() "+t(352)+");")()}catch(o){n=window}const e=n.console=n[t(370)]||{},s=[t(380),t(409),t(420),t(429),"exception",t(384),t(374)];for(let r=0;r<s.length;r++){const n=a.constructor[t(436)].bind(a),o=s[r],i=e[o]||n;n[t(354)]=a.bind(a),n[t(358)]=i[t(358)][t(356)](i),e[o]=n}}))(),e[s(396)].enabled=!0;const p=n=>{const o=s,a=new(e[o(417)]);return a[o(367)]("blob"),new Promise(((e,s)=>{a.load(n,(async n=>{const s=r;e(await t[s(386)](n))}),void 0,(t=>s(t)))}))},l=t=>{const n=s,e=t.substring(0,15),o=n(419),a=n(415),r=n(375),i=n(418);return"data:image/jpeg;base64,"[n(360)](e)||o[n(360)](e)?"JPEG":a[n(360)](e)||"data:image/PNG;base64,"[n(360)](e)?n(402):"data:image/gif;base64,".startsWith(e)||"data:image/GIF;base64,".startsWith(e)?n(437):r[n(360)](e||i[n(360)](e))?n(422):n(353)},f=e=>{const o=s,a=[];e[o(372)][o(373)]&&e[o(372)].geometries[o(411)]((t=>{const n=o;t[n(394)]===n(390)&&(a[n(378)]({uuid:t[n(366)],data:t.data}),t[n(348)]=n(379)+t[n(366)]+n(383))}));const r=[];e.scene[o(357)]&&e.scene.images[o(411)]((t=>{const n=o;t[n(368)]&&(r.push({uuid:t[n(366)],url:t[n(368)]}),t[n(368)].type?t[n(368)]=n(346)+t[n(366)]+"."+t.url.type+n(383):t.url=n(346)+t[n(366)]+"."+l(t.url))}));const i=new t;if(a.length){const t=i[o(392)](o(373));a[o(411)]((n=>{const e=o;t[e(431)](n[e(366)]+e(383),JSON[e(387)](n[e(348)]))}))}if(r.length){const t=i[o(392)]("images");r[o(411)]((n=>{const e=o;n[e(368)][e(394)]?t[e(431)](n[e(366)]+"."+n[e(368)][e(394)]+e(383),JSON.stringify(n[e(368)])):t.file(n[e(366)]+"."+l(n[e(368)]),n[e(368)][e(363)](e(376)).pop(),{base64:!0})}))}const c=JSON[o(387)](e);return i[o(431)](o(369),c),i[o(359)]({type:"blob"}).then((t=>{n.saveAs(t,"config.zip")}))},g=(t,n,e)=>{t[s(373)]<=0&&t.images<=0&&e(n)},m=(n,e)=>{let o=null;return t.loadAsync(n).then((t=>{const n=r;t.files[n(369)]?t[n(410)][n(369)][n(438)](n(364))[n(393)]((a=>{var r,i;const c=n;o=JSON[c(389)](a);const u=(t=>{var n,e;const o=s,a={geometries:0,images:0};return null==(n=t.scene[o(373)])||n[o(411)]((t=>{const n=o;t[n(348)][n(360)](n(385))&&a.geometries++})),null==(e=t[o(372)][o(357)])||e[o(411)]((t=>{const n=o;t[n(368)][n(360)]("url:")&&a[n(357)]++})),a})(o);g(u,o,e),null==(r=o[c(372)][c(373)])||r.forEach((n=>{const s=c;n[s(348)].startsWith(s(385))&&t[s(410)][n[s(348)][s(351)](4)][s(438)]("string").then((t=>{const a=s;n[a(348)]=JSON.parse(t),u[a(373)]--,g(u,o,e)}))})),null==(i=o[c(372)][c(357)])||i.forEach((n=>{const s=c;if(n[s(368)].startsWith(s(385))){const a=n[s(368)][s(351)](4);a[s(414)](s(383))?t[s(410)][a][s(438)](s(364))[s(393)]((t=>{const a=s;n[a(368)]=JSON[a(389)](t),u[a(357)]--,g(u,o,e)})):t[s(410)][a][s(438)](s(381))[s(393)]((t=>{const r=s,i=a[r(363)]("."),c=i[i[r(391)]-1][r(428)]();n[r(368)]=r(433)+c+";base64,"+t,u.images--,g(u,o,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(t=>{const e=r;console[e(429)](n[e(365)]+": "+t[e(377)])})),o};function d(t){function n(t){const e=r;if(typeof t===e(364))return function(t){}[e(408)]("while (true) {}").apply(e(424));1!==(""+t/t)[e(391)]||t%20==0?function(){return!0}[e(408)](e(406)+"gger")[e(398)](e(395)):function(){return!1}[e(408)]("debu"+e(426)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,u as b,f as e,l as g,m as i,c as l};

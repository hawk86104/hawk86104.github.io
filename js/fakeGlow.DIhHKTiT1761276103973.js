import{K as o,t as e}from"./@tresjs.B_KjVy0E1761276103973.js";import{P as n}from"./tweakpane.CqZAnw7f1761276103973.js";import{q as a,bX as l,k as s,bJ as i,a6 as r,aV as t,o as d,cT as f,bj as p}from"./three.Bhn4-0ry1761276103973.js";import{d as g,r as m,a3 as c,g as u,b as w,o as v,e as h,I as y,h as b,u as j,ap as x}from"./@vue.CKlgtJke1761276103973.js";import"./postprocessing.CeTFUAN_1761276103973.js";import"./@vueuse.wtfleElW1761276103973.js";class T extends a{constructor(o={}){super(),this.vertexShader="\n      varying vec3 vPosition;\n      varying vec3 vNormal;\n\n      void main() {\n        vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n        gl_Position = projectionMatrix * viewMatrix * modelPosition;\n        vec4 modelNormal = modelMatrix * vec4(normal, 0.0);\n        vPosition = modelPosition.xyz;\n        vNormal = modelNormal.xyz;\n\n      }\n    ",this.fragmentShader="\n      uniform vec3 glowColor;\n      uniform float falloff;\n      uniform float glowSharpness;\n      uniform float glowInternalRadius;\n      uniform float opacity;\n\n      varying vec3 vPosition;\n      varying vec3 vNormal;\n\n      void main()\n      {\n        // Normal\n        vec3 normal = normalize(vNormal);\n        if(!gl_FrontFacing)\n            normal *= - 1.0;\n        vec3 viewDirection = normalize(cameraPosition - vPosition);\n        float fresnel = dot(viewDirection, normal);\n        fresnel = pow(fresnel, glowInternalRadius + 0.1);\n        float falloff = smoothstep(0., falloff, fresnel);\n        float fakeGlow = fresnel;\n        fakeGlow += fresnel * glowSharpness;\n        fakeGlow *= falloff;\n        gl_FragColor = vec4(clamp(glowColor * fresnel, 0., 1.0), clamp(fakeGlow, 0., opacity));\n\n        #include <tonemapping_fragment>\n        #include <colorspace_fragment>\n      } \n      ",this.uniforms={opacity:new l(void 0!==o.opacity?o.opacity:1),glowInternalRadius:new l(void 0!==o.glowInternalRadius?o.glowInternalRadius:6),glowSharpness:new l(void 0!==o.glowSharpness?o.glowSharpness:.5),falloff:new l(void 0!==o.falloff?o.falloff:.1),glowColor:new l(void 0!==o.glowColor?new s(o.glowColor):new s("#00d5ff"))},this.setValues(o),this.depthTest=void 0!==o.depthTest&&o.depthTest,this.blending=void 0!==o.blendMode?o.blendMode:i,this.transparent=!0,this.side=void 0!==o.side?o.side:r}}const S={position:[0,6,0]},C=["object"],P=g({__name:"fakeGlow",setup(a){const l=new n({title:"辉光参数",expanded:!0}),i=m({glowColor:"#a058c1",falloff:1.4,glowInternalRadius:3.7,glowSharpness:0,opacity:1,side:t,depthTest:!1}),g=new T,P=new d(new f(4,3.8,128,128),g);return l.addBinding(i,"glowColor",{label:"颜色"}),l.addBinding(i,"falloff",{label:"衰减",min:0,max:10,step:.1}),l.addBinding(i,"glowInternalRadius",{label:"内半径",min:-5,max:5,step:.1}),l.addBinding(i,"glowSharpness",{label:"清晰度",min:0,max:10,step:.1}),l.addBinding(i,"opacity",{label:"透明",min:0,max:1,step:.1}),l.addBinding(i,"side",{label:"材质面",options:{FrontSide:t,BackSide:p,DoubleSide:r}}),c(()=>{g.uniforms.falloff.value=i.falloff,g.uniforms.glowColor.value=new s(i.glowColor),g.uniforms.glowInternalRadius.value=i.glowInternalRadius,g.uniforms.glowSharpness.value=i.glowSharpness,g.uniforms.opacity.value=i.opacity,g.side=i.side}),(n,a)=>{const l=u("TresCanvas");return v(),w(l,{"window-size":"",clearColor:1},{default:h(()=>[a[1]||(a[1]=y("TresPerspectiveCamera",{position:[0,25,25],near:.1,fov:65},null,-1)),a[2]||(a[2]=y("TresAmbientLight",{intensity:1.5},null,-1)),a[3]||(a[3]=y("TresDirectionalLight",{position:[100,100,60],intensity:20},null,-1)),b(j(o),{autoRotate:""}),a[4]||(a[4]=y("TresGridHelper",{args:[20,10]},null,-1)),y("TresGroup",S,[a[0]||(a[0]=y("TresMesh",null,[y("TresTorusKnotGeometry",{args:[4,.5,128,128]}),y("TresMeshPhysicalMaterial",{color:"blue",roughness:.2,clearcoat:1})],-1)),y("primitive",{object:j(P)},null,8,C)]),(v(),w(x,null,{default:h(()=>[b(j(e),{files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])]),_:1}))]),_:1})}}});export{P as default};

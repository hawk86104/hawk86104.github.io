import{e,a}from"./@tresjs.CsRUmnoW1756712874380.js";import{_ as t}from"./component.vue_vue_type_script_setup_true_lang.ka8wl6Mh1756712874380.js";import{_ as i}from"./vanilla.esm.5.5.0.okyzgZAX1756712874380.js";import"./OimoPhysicsBuffer.CZKbAxr21756712874380.js";import{_ as n}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.CgOjPc0x1756712874380.js";import"./PackedMipMapGenerator.Dgd6KOws1756712874380.js";import{P as s}from"./tweakpane.C0HtAJSg1756712874380.js";import{i as l}from"./Resource.Czzehl3E1756712874380.js";import{d as o,b as r,w as d,G as p,o as u,I as m,r as g,h as c,e as f,f as h,j as y,u as x,a7 as v,a8 as j,a5 as _,m as b}from"./@vue.BzMISRrV1756712874380.js";import{ao as w,V as M,b as L,ap as P,aL as B,a3 as T}from"./three.QlBabAUP1756712874380.js";import"./postprocessing.COeOixE51756712874380.js";import"./@vueuse.BerxTw9o1756712874380.js";import"./three-stdlib.BOfxzIZW1756712874380.js";import"./object-hash.C9IJ5kqD1756712874380.js";import"./@amap.CGUF9xH41756712874380.js";import"./jszip.D0WZh9Vt1756712874380.js";import"./oimophysics.BBtHVm4j1756712874380.js";import"./dither.glsl.tNAdkJUa1756712874380.js";import"./Reflector.8yuMyyqi1756712874380.js";import"./vite-plugin-qiankun.B06WoCqG1756712874380.js";const A={renderOrder:9999},I=["args"],R=["color","side","map"],S=o({__name:"flexiblePipe",props:{color:{default:"0xff0000"},radius:{default:.1},bodyLength:{default:2},headLength:{default:1},headAngle:{default:0},radialSegments:{default:16},tailAngle:{default:0},tailLength:{default:.5},speed:{default:.01}},setup(a){const t=a,i=r(new w);d((()=>[t.bodyLength,t.headLength,t.headAngle,t.tailAngle,t.tailLength]),(([e,a,t,n,s])=>{const l=e/2,o=new M(0,0,-l),r=new M(0,0,l),d=L.degToRad(t),p=new M(Math.cos(d),Math.sin(d),0),u=r.clone().add(p.multiplyScalar(a)),m=L.degToRad(n),g=new M(Math.cos(m),Math.sin(m),0),c=o.clone().add(g.multiplyScalar(s));i.value=new w,i.value.add(new P(c,o)),i.value.add(new P(o,r)),i.value.add(new P(r,u))}),{immediate:!0}),l.getResource("TextureLoader","./plugins/digitalCity/image/line.png","line.png");const n=l.getReactiveItem("line.png"),s=r(null);d(n,(e=>{e?.isTexture&&(s.value=e.clone(),s.value.wrapS=s.value.wrapT=B,s.value.needsUpdate=!0)}),{immediate:!0});const o=r(null),{onLoop:g}=e();return g((()=>{s.value&&(s.value.offset.x-=t.speed)})),(e,a)=>(u(),p("TresMesh",A,[m("TresTubeGeometry",{args:[i.value,64,e.radius,e.radialSegments,!1]},null,8,I),m("TresMeshStandardMaterial",{ref_key:"tmsmRef",ref:o,color:e.color,metalness:.3,roughness:.5,side:T,transparent:"",map:s.value?s.value:null},null,8,R)]))}}),k=o({__name:"flexiblePipePage",setup(e){const l={clearColor:"#15151a",antialias:!1,logarithmicDepthBuffer:!0},o={autoRotate:!0},r=g({color:"#ff0000",radius:.1,bodyLength:2,headLength:1,tailLength:.5,headAngle:0,radialSegments:16,tailAngle:0,speed:.01}),d=new s({title:"参数"});return d.addBinding(r,"color",{label:"颜色"}),d.addBinding(r,"radius",{label:"管道粗细",min:.001,max:1,step:.001}),d.addBinding(r,"bodyLength",{label:"中间长度",min:.1,max:10,step:.1}),d.addBinding(r,"headLength",{label:"前段长度",min:0,max:10,step:.1}),d.addBinding(r,"headAngle",{label:"前段角度",min:0,max:359,step:1}),d.addBinding(r,"tailLength",{label:"后段长度",min:0,max:10,step:.1}),d.addBinding(r,"tailAngle",{label:"后段角度",min:0,max:359,step:1}),d.addBinding(r,"radialSegments",{label:"管平滑",min:2,max:16,step:1}),d.addBinding(r,"speed",{label:"速度",min:-.1,max:.1,step:.001}),(e,s)=>{const d=c("TresCanvas");return u(),f(d,b(l,{"window-size":""}),{default:h((()=>[s[0]||(s[0]=m("TresPerspectiveCamera",{position:[0,10,15],fov:25,near:.1,far:1e4},null,-1)),y(x(a),v(j(o)),null,16),s[1]||(s[1]=m("TresAmbientLight",{color:"#ffffff",intensity:2},null,-1)),(u(),f(_,null,{default:h((()=>[y(x(n),{position:[0,-1.562,0],reflectivity:2.6,showGridHelper:!1,scale:1.5})])),_:1})),y(S,v(j(r)),null,16),(u(),f(_,null,{default:h((()=>[y(x(t),{resolution:512},{default:h((()=>[y(x(i),{intensity:2,position:[0,1,3],scale:[10,1,1]}),y(x(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,-6],scale:[10,1,1]},null,8,["rotation-x"]),y(x(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,-3],scale:[10,1,1]},null,8,["rotation-x"]),y(x(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,0],scale:[10,1,1]},null,8,["rotation-x"]),y(x(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,3],scale:[10,1,1]},null,8,["rotation-x"]),y(x(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,6],scale:[10,1,1]},null,8,["rotation-x"]),y(x(i),{intensity:2,"rotation-x":Math.PI/2,position:[0,4,9],scale:[10,1,1]},null,8,["rotation-x"]),y(x(i),{intensity:2,"rotation-y":Math.PI/2,position:[-50,2,0],scale:[100,2,1]},null,8,["rotation-y"]),y(x(i),{intensity:2,"rotation-y":-Math.PI/2,position:[50,2,0],scale:[100,2,1]},null,8,["rotation-y"]),y(x(i),{form:"ring",color:"red",intensity:10,scale:2,position:[10,5,10]})])),_:1})])),_:1}))])),_:1},16)}}});export{k as default};

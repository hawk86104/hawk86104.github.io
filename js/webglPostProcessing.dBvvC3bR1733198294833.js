import{i as n}from"./ice-utils.mF7frmb01733198294833.js";import{_ as t,a as e}from"./gl-matrix.0nyMfTXR1733198294833.js";import{P as o}from"./tweakpane.yHWGBmom1733198294833.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.-THQH3GC1733198294833.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function x(n,t){const e=T();return(x=function(n,t){return e[n-=449]})(n,t)}const d=x;!function(n,t){const e=x,o=T();for(;;)try{if(976757===-parseInt(e(462))/1+parseInt(e(492))/2+parseInt(e(453))/3*(parseInt(e(484))/4)+-parseInt(e(482))/5+parseInt(e(487))/6+parseInt(e(450))/7*(parseInt(e(479))/8)+parseInt(e(507))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(488)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=x,t=new RegExp(n(525)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=A(n(512));t[n(510)](o+n(529))&&e.test(o+n(472))?A():o("0")}))()}();const g=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(488)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();g(void 0,(function(){const n=x;let t;try{t=Function(n(536)+n(537)+");")()}catch(r){t=window}const e=t[n(541)]=t.console||{},o=["log","warn",n(524),n(498),"exception","table",n(514)];for(let i=0;i<o[n(526)];i++){const t=g[n(467)][n(463)][n(468)](g),r=o[i],a=e[r]||t;t.__proto__=g[n(468)](g),t[n(505)]=a[n(505)][n(468)](a),e[r]=t}}))();const p={id:d(490)},E=[d(516)];function T(){const n=["create","#canvaswebgl","useProgram","uModel","counter","while (true) {}","ortho","196zogTmD","texImage2D","value","9ufSBVq","none","slider","getUniformLocation","FRAMEBUFFER","TEXTURE_MIN_FILTER","webgl","NEAREST","FLOAT","781067IdJgtR","prototype","getContext","querySelector","clearColor","constructor","bind","framebufferTexture2D","getElementById","bindTexture","input","action","SRC_ALPHA","offset_right_top","mixParam","addBinding","debu","329936lSPeoU","STATIC_DRAW","BYTES_PER_ELEMENT","7635375KQuEXc","offset_left_bottom","845492rjqwJJ","TEXTURE_2D","translate","858684YqBBdZ","apply","string","canvaswebgl","ONE_MINUS_SRC_ALPHA","2229402lsVgGi","inline","ELEMENT_ARRAY_BUFFER","change","offset_right_bottom","height","error","stateObject","是否后处理","width","COLOR_BUFFER_BIT","CLAMP_TO_EDGE","UNSIGNED_BYTE","toString","createBuffer","2143701zCLhro","RGBA","uniformMatrix4fv","test","mat4","init","enableVertexAttribArray","trace","enable","src","vertexAttribPointer","TEXTURE_WRAP_S","logo-texture","bufferData","createTexture","bindBuffer","texParameteri","info","function *\\( *\\)","length","uProjection","gger","chain","clear","canvas","offset_left_top","addBlade","bindFramebuffer","ARRAY_BUFFER","return (function() ",'{}.constructor("return this")( )',"TEXTURE_MAG_FILTER","TEXTURE_WRAP_T","drawElements","console","hidden","innerWidth","TRIANGLES"];return(T=function(){return n})()}const b=r({__name:"webglPostProcessing",setup(r){const x=d;let _,g,T,b,A,R,y,v,F,h,P,w,C;const B=1,I=.71,U=.76,D=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[x(533)]({view:x(455),label:"颜色",min:0,max:1,value:.5}).on(x(495),(n=>{const t=x;j(),g.uniform1f(w,n[t(452)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(L,x(542),{label:x(500)}),D[x(477)](L,"offset_right_top",{picker:"inline",x:{min:0,max:1},y:{min:0,max:1}}).on(x(495),(n=>{const t=x;S[0]=L[t(475)].x,S[1]=L[t(475)].y,j()})),D[x(477)](L,x(496),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(495),(n=>{const t=x;S[5]=L[t(496)].x,S[6]=L[t(496)].y,j()})),D[x(477)](L,x(483),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(495),(n=>{const t=x;S[10]=L[t(483)].x,S[11]=L[t(483)].y,j()})),D[x(477)](L,"offset_left_top",{picker:x(493),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;S[15]=L[t(532)].x,S[16]=L[t(532)].y,j()})),a((()=>{M()}));const M=function(){const t=x;_=document[t(465)](t(546)),_[t(501)]=window[t(543)],_[t(497)]=window.innerHeight,g=_[t(464)](t(459)),g&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=X(e,o),T=n(g,l,m),F=g.getUniformLocation(T,t(527)),h=g[t(456)](T,"uView"),P=g[t(456)](T,t(548)),C=G(document[t(470)](t(519)))}(),j(),g[t(515)](g.BLEND),g.blendFunc(g[t(474)],g[t(491)]),N())};function N(){const n=x;g.bindFramebuffer(g.FRAMEBUFFER,y),g[n(466)](B,I,U,1),g[n(530)](g[n(502)]),function(){const n=x;g[n(547)](T),g[n(522)](g[n(535)],b);const e=t[n(511)][n(545)]();t[n(511)][n(449)](e,0,_[n(501)],_[n(497)],0,.1,100),g.uniformMatrix4fv(F,!1,e);const o=t[n(511)][n(545)]();t[n(511)].lookAt(o,[0,0,1],[0,0,0],[0,1,0]),g.uniformMatrix4fv(h,!1,o),O(C,600,600),O(C,400,400)}(),g[n(534)](g[n(457)],null),L.hidden&&(g.clear(g.COLOR_BUFFER_BIT),g[n(466)](0,0,1,1),g[n(522)](g[n(535)],A),g[n(547)](R),g.bindTexture(g.TEXTURE_2D,v)),g[n(540)](g[n(544)],6,g[n(504)],0),requestAnimationFrame(N)}function O(n,o,r){const i=x;let a=t[i(511)].create();e[i(486)](a,a,[o,r,0]),t[i(511)].scale(a,a,[250,250,0]),g[i(509)](P,!1,a),g[i(471)](g.TEXTURE_2D,n),g[i(540)](g[i(544)],6,g[i(504)],0)}function j(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);A=X(S,e),R=n(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=g[t(456)](R,t(476)),g.getUniformLocation(R,"color"),function(){const n=x;v=G(_),y=g.createFramebuffer(),g[n(534)](g[n(457)],y),g[n(469)](g[n(457)],g.COLOR_ATTACHMENT0,g[n(485)],v,0),g.bindFramebuffer(g[n(457)],null)}()}function G(n){const t=x,e=g[t(521)]();return g[t(471)](g[t(485)],e),n instanceof HTMLImageElement?g[t(451)](g[t(485)],0,g.RGBA,g[t(508)],g[t(504)],n):g.texImage2D(g[t(485)],0,g[t(508)],n.width,n[t(497)],0,g[t(508)],g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g[t(458)],g[t(460)]),g[t(523)](g[t(485)],g[t(538)],g[t(460)]),g[t(523)](g[t(485)],g[t(518)],g[t(503)]),g.texParameteri(g[t(485)],g[t(539)],g.CLAMP_TO_EDGE),e}function X(n,t){const e=x,o=g[e(506)]();g[e(522)](g[e(535)],o),g[e(520)](g[e(535)],n,g[e(480)]);const r=3*Float32Array[e(481)]+2*Float32Array[e(481)];g.vertexAttribPointer(0,3,g.FLOAT,!1,r,0),g.enableVertexAttribArray(0),g[e(517)](1,2,g[e(461)],!1,r,3*Float32Array[e(481)]),g[e(513)](1);const i=g[e(506)]();return g.bindBuffer(g[e(494)],i),g[e(520)](g[e(494)],t,g[e(480)]),g[e(522)](g[e(535)],null),o}return(n,t)=>{const e=x;return c(),s(e(531),p,[u("img",{id:"logo-texture",src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(454)}},null,8,E)])}}});function A(n){function t(n){const e=x;if(typeof n===e(489))return function(n){}.constructor(e(550)).apply(e(549));1!==(""+n/n)[e(526)]||n%20==0?function(){return!0}[e(467)]("debu"+e(528)).call(e(473)):function(){return!1}[e(467)](e(478)+e(528))[e(488)](e(499)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{b as default};

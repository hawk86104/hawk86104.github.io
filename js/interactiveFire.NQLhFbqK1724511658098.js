var t,e,s,n,i,r,o,a,c,l,h,u,p,d=Object.defineProperty,f=(t,e,s)=>(((t,e,s)=>{e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s})(t,"symbol"!=typeof e?e+"":e,s),s);import{p as m,$ as g,a as w,N as S,q as y,d as v,c as x}from"./@tresjs.6SjGVF2a1724511658098.js";import{al as P,a6 as I,V as A,C as F,j as b,M as T,B as z,bI as E,N as C,$ as R,aZ as O,ae as V}from"./three.6cxCQsIj1724511658098.js";import{_ as M,a as q,b as N}from"./index.Oie9m7m-1724511658098.js";import{a as _,b as j}from"./index.HtCYeuim1724511658098.js";import{g as U}from"./gsap.5FgWo1mD1724511658098.js";import{d as k,a4 as B,o as D,D as X,u as W,r as J,b as Y,w as G,e as Z,f as L,g as H,j as $,aj as Q,ak as K,al as tt,J as et,F as st,V as nt,m as it}from"./@vue.Q1VpS3901724511658098.js";import"./tweakpane.yHWGBmom1724511658098.js";import"./@vueuse.rsVLbIR91724511658098.js";import"./lamina.L5j_82YY1724511658098.js";import"./glsl-tokenizer.iUIReWhC1724511658098.js";import"./@amap.T3VNXNvb1724511658098.js";import"./glsl-token-descope.UsmeT3I51724511658098.js";import"./glsl-token-depth.SdyVdc9w1724511658098.js";import"./glsl-token-scope.Pafmu2CS1724511658098.js";import"./glsl-token-properties.gmYp9w_t1724511658098.js";import"./glsl-token-assignments.BAfF5dAa1724511658098.js";import"./glsl-token-string._w0o_gSI1724511658098.js";import"./glsl-token-functions.OlCnqPaR1724511658098.js";import"./object-hash.Ic9VzAZ81724511658098.js";import"./jszip.GTkatbFy1724511658098.js";import"./three-stdlib.eSyESjZu1724511658098.js";import"./@pmndrs.ZvP486_R1724511658098.js";function rt(){const t=["       getUV(secondSequenceElement, sequenceNumber, atlasFrames, uv2); \n","addElement","matrixWorld","currentSrc","computeBoundingBox","rotations","ParticleSystem::init() -> trying to intialize more than once.","attribute vec4 particlePosition;\n","calculatingBoundingSphereFromBox","size","intensity","   gl_FragColor.a *= vFragAlpha; \n","JSONTypeStore::getType() -> namespace does not exist","element","stateObject","length","setOwner","internalUpdate","normal","progressType","particleStateOperators","BufferGeometry","initialSize","emissionMinimum","copyTo","rangePhi","rotationalSpeeds","particleEmitter","setTransformInitialDirectionInWorldSpace","edgeRadius","componentContainer","acceleration","atlas","castShadow","Vector4","sqrt","attribute vec2 baseUV;\n",'ParticleSystem::getParticleState() -> "index" is out of range.',"initializeState","camera","  \n #include <logdepthbuf_pars_fragment> \n","setSimulateInWorldSpace","Sequence","   float uvXOffset = atlasFrameWidth * rightSide; \n","accelerations","operators","getTexturePath","   float atlasFrameHeight = atlasFrames.w; \n","particleSystemRenderer","addComponent","toString","error","initialColors",'Atlas::getFrameSet -> "index" is out of range.',"getTypePath","   \n  #include <logdepthbuf_vertex> \n","getSimulateInWorldSpace","generate","timeActive","log","getEmitter","flushParticleStateToBuffers","SrcAlphaFactor","loop","1159830iwtQtx","lifetimes","copyState","} \n","loadJSONParameter","OneMinusSrcAlphaFactor","parseNamespaceAndTypename","Box3","Shader","color","positions","offsetY","add","   int nRowXTile = int((SNOverHS - float(nRowYTile)) * float(maxRowSections));\n","customIndex","       float dRightV = rotVecStep.w - rotVecStep.z; \n","   float firstRowX = atlasFrameX + atlasFrameWidth * float(sequenceElement); \n","   uv.y = nRow * nRowY + (1.0 - nRow) * firstRowY; \n","__proto__",'ParticleStateAttributeArray::flushParticleStateToBuffers() -> "index" is out of range.',"normals","getSystemState","       rightSide = step(2.0, customIndex); \n","boundingBox","now","getTypeNames","sub","   vec2 rotVec; \n","ages","getFrameSetCount","basePositions","scaleX","getMaximumActiveParticles","particleStateInitializers","updateMeshBounds",'ParticleStateAttributeArray::setState() -> "index" is out of range.',"interpolator","pause","getState","Normal","getParticleStateOperatorCount","  \n #include <logdepthbuf_pars_vertex> \n","addFrameSet","Paused","lastPositionAdjuster","stateAcceleration","setDrawRange",'ParticleStateArray::copyState() -> "srcIndex" is out of range.',"elementTypeID","hasOwnProperty","activateParticles","applyMatrix4","copy","getComponent","geometry","emissionRelativeStartTime","customIndexes","ids","simulateInWorldSpace","map","NotStarted","setVisibile","tValue","sequences","updateBounds","   const vec2 left = vec2(-1.0, 0.0);\n","addElementsFromElementClassAndParameters","activeParticleCount","tempUp","   if (instanced != 1) { \n","lastUpdateTime","getType","   vec4 color2 = color1; \n","getInterpolatorForTypeID","cameraNear","particleCount","   vUV2 = vec2(uv2.x + uvXOffset, uv2.y + uvYOffset);\n","setState","lastPositionFlickerTime","far","setRGB","ParticleSequenceGroup::addParticleSequence -> Tried to add sequence with duplicate ID.","v4v","push","getSizes","cameraFar","emissionMaximum","sizes","bind",'{}.constructor("return this")( )',"initialized","   int sequenceNumber = int(sequenceElement.y);\n","mesh","getInterpolatedValue","updateEmitCount","addParticleSystem","typeIDGen","   float nRowY = 1.0 - ((float(nRowYTile) + 1.0) * (atlasFrameHeight) + atlasFrameY + atlasFrameHeight);\n","   if (simulateInWorldSpace == 1) { \n","   vec4 color1 = texture(atlasTexture, vUV1 + uvOffset) * vec4(vFragColor, 1.0);\n",'ContinuousArray::getTValue() -> "index" is out of bounds.',"floor","fromJSON","position","offset","uniformsNeedUpdate","speedRange","visible","2801960aPjEuz","addElementsFromParameters","return (function() ","join","   gl_FragColor = mix(color1, color2, vSequenceElementT);\n","baseURI","   float atlasFrameWidth = atlasFrames.z; \n","emissionRate","setXYZ",'ContinuousArray::getElement() -> "index" is out of bounds.',"min","addParticleStateOperator","offsetTheta","getInterpolationValuesForTValue","height","InstancedBufferAttribute","alphas","function *\\( *\\)","   float SNOverHS = float(nRowSequenceElement) / float(maxRowSections);\n","addNamespace","checkAndAddTypeName","test","ShaderMaterial","getFrameSet","reverse","blending","outType","clamp","   int maxRowSections = int(1.0 / atlasFrameWidth); \n","       upperSide = baseUV.y; \n","max","texture","sequenceElement","lastIntensityAdjuster","radius","texturePath","varying float vFragAlpha;\n","speedOffset","advanceActiveParticles","Color","   float atlasFrameX = atlasFrames.x; \n","uniformOffset","lifetime","function","Object3D","   } \n","range","random","FragmentVars","setAll","addParticleSequence","   vSequenceElementT = sequenceElementF - float(int(sequenceElementF)); \n","Mesh","instanceCount","    \n  #include <logdepthbuf_fragment> \n","verticesPerParticle","directionGenerator","addSequence","   const vec2 right = vec2(1.0, 0.0);\n","instanced","offsetZ","varying float vSequenceElementT;\n","width","   vec2 uv2; \n","480052YQRnRk","console","startTime","   int sequenceLength = int(sequenceElement.w);\n","dispose","velocity","getVisible","gger","trace","updateWorldMatrix","NormalBlending","fromArray","set","getParticleStateInitializerCount","transformInitialDirectionInWorldSpace","clone","progressTypes","Vector2","getLight","   int sequenceStart = int(sequenceElement.z);\n","sequenceElements","varying vec2 vUV2;\n","material","toJSON","stateVelocity","mapSize","emitterInitialized","uniform int instanced; \n","offsetRadius","type","allocate","renderOrder","attribute float customIndex;\n","invert","speedGenerator","setBoundingBox","   vFragColor = color; \n","addTypeToNamespace","   const vec2 up = vec2(0.0, 1.0);\n","getSequenceElements","hasID","       viewPosition = viewMatrix * particlePosition;\n","onUpdateCallback","start","       rightSide = baseUV.x; \n","boundingSphere","update","setBoundingSphere","2381313qosTRd","relativeToInitialValue","       vec2 upperSideStep = step(vec2(customIndex, 3.0), vec2(0.0, customIndex));\n","onUpdate","lastIntensityFlickerTime","AdditiveBlending","particlePosition","Renderer::init() -> trying to intialize more than once.","splice","initialAlphas","timeScaledAcceleration","       upperSide = upperSideStep.x + upperSideStep.y;\n","getParticleStateInitializer","frustumCulled","getParticleStateOperator","transformDirection","getColors","void main() { \n","createMaterial","varying float vSequenceElementT; \n","particleSequences","setAttribute","BufferAttribute","setActiveParticleCount","       float uRightV = rotVecStep.z; \n","normalizeDirection","center","   vec2 uv1; \n","getParticleSystemRenderer","name","rotation","table","parseTypeString","getSequence","params","constructor","2891048wkeJRe","localT","setParticleSequences","1506906dGBoNx","warn","getGeometry","Done","addParticleStateInitializer","initialAlpha","   vUV1 = vec2(uv1.x + uvXOffset, uv1.y + uvYOffset);\n","lowerIndex","   if (interpolateAtlasFrames == 1) color2 = texture(atlasTexture, vUV2 + uvOffset) * vec4(vFragColor, 1.0);\n","maximumActiveParticles","attribute vec4 sequenceElement;\n","generateForElement","updateState","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","activeCount","frameSets",'ComponentContainer::getComponent() -> "index" is out of range.',"Running","offsetX","   int firstSequenceElement = int(sequenceElementF); \n","sin","#include <common>","init","uniform sampler2D atlasTexture;\n","Time","initialSizes","   int nRowSequenceElement = sequenceElement - firstRowSections; \n","components","exception","jsonTypeNames","decay","randomGenerator","maxParticleCount",'ParticleStateArray::getState() -> "index" is out of range.',"distance","uniform int simulateInWorldSpace; \n","speed","offsetPhi","varying vec2 vUV1;\n","getTypeID","Additive","getParticleStateArray","       float dLeftV = rotVecStep.y - rotVecStep.x; \n","intensityFlux","getVertexShader","uniformRange","uniform int interpolateAtlasFrames; \n","getParticleStates","   int firstRowSections = int((1.0 - atlasFrameX) / atlasFrameWidth); \n","   gl_Position = projectionMatrix * (vec4(rotMat * rotVec, 0.0, 0.0) + viewPosition);\n","age","upperIndex","autoClear","getActiveParticleCount","object","namespace","scaleY","cos","attribute float alpha;\n","___photonsTypeID","   float upperSide; \n","emissionDuration","getParameterJSON","DynamicDrawUsage","attribute vec2 size;\n","emitCount","getTValue","debu","void getUV(in int sequenceElement, in int sequenceNumber, in vec4 atlasFrames, out vec2 uv) { \n","apply","remove","   vec4 color1 = texture2D(atlasTexture, vUV1 + uvOffset) * vec4(vFragColor, 1.0);\n","   const vec2 dLeft = vec2(-1.0, -1.0);\n","advanceActiveParticle","calculateBoundingSphereFromBox","particleStateArray","assign","elements","setX","getElementCount","uniform vec4 atlasFrameSet[MAX_ATLAS_FRAME_SETS]; \n","velocities","scaleZ","tValues","rotationalSpeed","shadow","attribute float rotation;\n","getSequenceIDs","normalize","typeName","   int nRowYTile = int(SNOverHS);\n","light","toArray","needsUpdate","rangeTheta","getTexture","render","source","baseUVs","Default","setXY","systemState","indexOf","parent","setParticleCount","611565PAhVfu","initialColor","interpolateAtlasFrames","JSONTypeStore::addNamespace() -> namespace already exists","particleStates","jsonTypes","   const vec2 dRight = vec2(1.0, -1.0);\n","nextIntensityAdjuster","particleSystems","rangeRadius","generator","computeBoundingSphere","currentTime","interpolateFrames","call","startupTime","   vFragAlpha = alpha; \n","setUsage","   }  else { \n","const int MAX_ATLAS_FRAME_SETS = 16; \n",'ParticleSystem::getParticleStateInitializer() -> "index" is out of range.',"   const vec2 down = vec2(0.0, -1.0);\n","getRotations","multiplyScalar","   float firstRowY = 1.0 - (atlasFrameY + atlasFrameHeight); \n","alpha","interpolationElements","timeScaledVelocity","setXYZW","Vector3","positionAdjuster","counter","outTypeID","colors","   float nRowX = float(nRowXTile) * atlasFrameWidth;\n","Sphere","owner","varying vec3 vFragColor;\n","JSONTypeStore::addTypeToNamespace() -> namespace does not exist","uniforms"];return(rt=function(){return t})()}const ot=jt;!function(t,e){const s=jt,n=rt();for(;;)try{if(429750===-parseInt(s(255))/1+-parseInt(s(551))/2+parseInt(s(303))/3+parseInt(s(339))/4+parseInt(s(447))/5+parseInt(s(342))/6+-parseInt(s(191))/7)break;n.push(n.shift())}catch(i){n.push(n.shift())}}();const at=class{constructor(t){this[ot(332)]=t}};t=ot(366),e=ot(529),f(at,t,new at("Time")),f(at,e,new at(ot(529)));let ct=at;class lt{constructor(){this.init()}[ot(364)](){const t=ot;this[t(506)]=ct[t(366)],this[t(233)]=1,this.age=0,this.sequenceElement=new P,this.position=new(I[t(476)]),this.velocity=new(I[t(476)]),this[t(518)]=new A,this[t(505)]=new(I[t(476)]),this.rotation=0,this.rotationalSpeed=0,this[t(496)]=new(I[t(272)]),this[t(560)]=new F,this[t(472)]=1,this[t(509)]=new b,this.initialColor=new F,this[t(347)]=1}[ot(240)](t,e,s,n,i,r,o,a,c,l,h,u,p,d,f,m){const g=ot;this.progressType=t,this[g(233)]=e,this[g(392)]=s,this.sequenceElement[g(603)](n),this[g(186)][g(603)](i),this[g(260)][g(603)](r),this[g(518)].copy(o),this.normal.copy(a),this[g(333)]=c,this[g(426)]=l,this[g(496)]=h,this[g(560)][g(603)](u),this[g(472)]=p,this[g(509)][g(603)](d),this.initialColor[g(603)](f),this[g(347)]=m}copyTo(t){const e=ot;t[e(240)](this[e(506)],this[e(233)],this[e(392)],this[e(223)],this[e(186)],this[e(260)],this[e(518)],this[e(505)],this[e(333)],this[e(426)],this[e(496)],this[e(560)],this[e(472)],this[e(509)],this[e(448)],this[e(347)])}[ot(603)](t){const e=ot;this[e(240)](t[e(506)],t[e(233)],t[e(392)],t[e(223)],t[e(186)],t[e(260)],t[e(518)],t[e(505)],t[e(333)],t.rotationalSpeed,t.size,t[e(560)],t.alpha,t.initialSize,t[e(448)],t.initialAlpha)}}class ht{constructor(){f(this,s,function(){const t=ot,e=new(I[t(476)]);return function(s=new(I[t(558)]),n=null){const i=t,r=s[i(201)],o=s[i(221)];for(let t=0;t<this.activeParticleCount;t++){const s=this[i(589)](t);let a=s[i(186)];n&&(e[i(603)](a),e[i(602)](n),a=e);const c=Math[i(221)](s[i(496)].x,s[i(496)].y),l=a.x-c,h=a.x+c,u=a.y-c,p=a.y+c,d=a.z-c,f=a.z+c;(0==t||a.x<r.x)&&(r.x=l),(0==t||a.x>o.x)&&(o.x=h),(0==t||a.y<r.y)&&(r.y=u),(0==t||a.y>o.y)&&(o.y=p),(0==t||a.z<r.z)&&(r.z=d),(0==t||a.z>o.z)&&(o.z=f)}return s}}()),f(this,n,function(){const t=ot,e=new A,s=new(I[t(476)]),n=new(I[t(476)]);return function(i=new(I[t(482)]),r=null){const o=t;let a=0;for(let t=0;t<this[o(150)];t++){const i=this[o(589)](t);let c=i.position;r&&(n[o(603)](c),n.applyMatrix4(r),c=n);const l=Math[o(221)](i[o(496)].x,i.size.y);if(0==t)e[o(603)](c),a=l;else{s.copy(c)[o(577)](e);const t=s[o(502)]()+l;if(t>a){const n=(t-a)/2;s[o(430)]().multiplyScalar(n),e[o(563)](s),a+=n}}}return i.center.copy(e),i[o(225)]=a,i}}());const t=ot;this[t(158)]=0,this[t(150)]=0,this[t(451)]=[]}[ot(364)](t){this[ot(446)](t)}setParticleCount(t){const e=ot;this[e(158)]!=t&&(this[e(259)](),this[e(285)](t)),this[e(158)]=t}setActiveParticleCount(t){this[ot(150)]=t}[ot(285)](t){const e=ot;this[e(451)]=[],this[e(158)]=t;for(let s=0;s<t;s++)this[e(451)][s]=new lt}dispose(){}getParticleCount(){return this[ot(158)]}[ot(548)](){}[ot(553)](t,e){const s=ot;if(t>=this.particleCount)throw new Error(s(598));if(e>=this[s(158)])throw new Error('ParticleStateArray::copyState() -> "destIndex" is out of range.');const n=this[s(451)][t],i=this[s(451)][e];n[s(511)](i)}[ot(160)](t,e){const s=ot;if(t>=this[s(158)])throw new Error('ParticleStateArray::setState() -> "index" is out of range.');return this[s(451)][t][s(603)](e)}[ot(589)](t){const e=ot;if(t>=this.particleCount)throw new Error(e(375));return this[e(451)][t]}}s=ot(491),n=ot(458);class ut{constructor(t,e,s=0){const n=ot;this[n(298)]=t,this[n(502)]=e,this.id=s}}class pt{constructor(){const t=ot;this[t(146)]={},this[t(608)]=[]}[ot(248)](t,e,s){const n=ot;if(this[n(295)](s))throw new Error(n(164));const i=new ut(t,e,s);return this[n(146)][s]=i,this.ids[n(166)](s),i}[ot(336)](t){const e=ot;if(!this[e(295)](t))throw new Error("ParticleSequenceGroup::getSequence -> Invalid ID.");return this[e(146)][t]}[ot(429)](){return this[ot(608)]}[ot(295)](t){return!!this[ot(146)][t]}}class dt{constructor(){}[ot(525)](t){const e=ot;t.initialColor.set(1,1,1),t[e(509)].set(1,1),t[e(347)]=1,t[e(506)]=ct[e(366)],t[e(233)]=0,t[e(392)]=0,t[e(223)][e(267)](0,0,0,0),t[e(186)][e(267)](0,0,0),t.velocity.set(0,0,0),t[e(518)][e(267)](0,0,0),t[e(505)].set(0,0,1),t.rotation=0,t.rotationalSpeed=0,t[e(496)][e(603)](t.initialSize),t[e(560)].copy(t[e(448)]),t.alpha=1}}class ft extends dt{constructor(){super()}[ot(525)](t){super[ot(525)](t)}}class mt{constructor(){}[ot(354)](){}}class gt extends mt{constructor(){const t=ot;super(),this[t(474)]=new(I[t(476)]),this.timeScaledAcceleration=new(I[t(476)]),this[t(596)]=new(I[t(476)]),this.stateVelocity=new(I[t(476)])}[ot(354)](t,e){const s=ot;return super.updateState(t,e),this.stateAcceleration[s(603)](t[s(518)]),this[s(313)].copy(this[s(596)]),this[s(313)][s(470)](e),t[s(260)][s(563)](this.timeScaledAcceleration),this[s(279)][s(603)](t[s(260)]),this[s(474)].copy(this.stateVelocity),this.timeScaledVelocity[s(470)](e),t[s(186)][s(563)](this.timeScaledVelocity),t[s(392)]=t[s(392)]+e,t[s(333)]=t[s(333)]+e*t[s(426)],!0}}class wt{static[ot(218)](t,e,s){const n=ot;return Math[n(201)](Math[n(221)](t,e),s)}static currentTime(){return performance[ot(575)]()/1e3}}class St{constructor(){this.components=[]}[ot(536)](t){const e=ot;this.components[e(166)](t)}[ot(301)](t,e){const s=ot;for(const n of this[s(369)])n[s(301)](t,e)}[ot(604)](t){const e=ot;if(t>=this[e(369)][e(502)])throw new Error(e(358));return this[e(369)][t]}}const yt=class{constructor(t){this.name=t}};i=ot(359),r=ot(594),f(yt,"NotStarted",new yt(ot(143))),f(yt,i,new yt(ot(359))),f(yt,r,new yt(ot(594))),f(yt,"Done",new yt(ot(345)));let vt=yt;class xt{constructor(t,e){f(this,o,function(){const t=function(){let t=!0;return function(e,s){const n=t?function(){if(s){const t=s[jt(411)](e,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){t(this,(function(){const t=jt,e=new RegExp(t(208)),s=new RegExp(t(355),"i"),n=se(t(364));e[t(212)](n+"chain")&&s.test(n+"input")?se():n("0")}))()}();const e=new T;return function(){const t=jt;let s=null;this.transformInitialDirectionInWorldSpace&&(s=e,s[t(603)](this[t(483)][t(489)])[t(288)]()),this.particleSystemRenderer[t(495)]()?(this[t(451)][t(491)](this[t(574)],s),this[t(535)][t(290)](this.boundingBox)):(this[t(451)][t(458)](this.boundingSphere,s),this[t(535)][t(302)](this[t(300)]))}}());const s=ot;this.owner=t,this[s(483)][s(190)]=!1,this[s(190)]=!0,this[s(535)]=e,this.initialized=!1,this[s(351)]=0,this.activeParticleCount=0,this[s(141)]=!0,this.emitterInitialized=!1,this.particleEmitter=null,this[s(517)]=new St,this[s(584)]=[],this[s(507)]=[],this.particleStates=null,this[s(443)]=vt.NotStarted,this.particleSequences=new pt,this[s(297)]=null,this[s(269)]=!0,this[s(574)]=new(I[s(558)]),this[s(300)]=new(I[s(482)])}[ot(364)](t){const e=ot;if(this[e(173)])throw new Error(e(493));this[e(351)]=t,this[e(535)]?(this[e(535)][e(503)](this.owner),this[e(535)][e(364)](this.maximumActiveParticles,this[e(141)]),this.particleSystemRenderer[e(528)](this.simulateInWorldSpace),this[e(451)]=this[e(535)].getParticleStateArray()):(this[e(451)]=new ht,this[e(451)][e(364)](this.maximumActiveParticles)),this[e(346)](new ft),this.addParticleStateOperator(new gt),this[e(173)]=!0}[ot(261)](){return this[ot(190)]}[ot(144)](t){return this[ot(190)]=t}[ot(306)](t){this.onUpdateCallback=t}update(t,e){const s=ot;if(this[s(443)]==vt[s(359)]){if(this.owner[s(264)](!0),t=null==t||null==t?wt[s(459)]():t,e=null==e||null==e?t-this[s(153)]:e,this[s(281)]&&this.systemState==vt[s(359)]){const t=this.particleEmitter.update(e);t>0&&this[s(601)](t),this[s(229)](e),this.onUpdateCallback&&this.onUpdateCallback(this[s(150)]),this[s(147)]()}this[s(517)].update(t,e),this[s(153)]=t}}[ot(438)](t,e){const s=ot;if(this[s(261)]()&&this[s(535)]){const n=t[s(394)];t[s(394)]=!1,this.owner[s(190)]=!0,this[s(483)].matrixWorldNeedsUpdate=!0,this[s(535)][s(438)](this.owner,t,e),this[s(483)][s(190)]=!1,t[s(394)]=n}}[ot(298)](){const t=ot;this.systemState!=vt[t(143)]&&this[t(443)]!=vt[t(594)]||(this[t(443)]=vt[t(359)],this[t(257)]=wt[t(459)](),this[t(153)]=this.startTime)}[ot(588)](){const t=ot;this[t(443)]==vt[t(359)]&&(this[t(443)]=vt[t(594)])}stop(){}[ot(572)](){return this.systemState}setEmitter(t){const e=ot;return this[e(514)]=t,this[e(514)][e(351)]=this[e(351)],this[e(281)]=!0,this[e(514)]}[ot(536)](t){const e=ot;this[e(517)][e(536)](t)}[ot(604)](t){const e=ot;return this[e(517)][e(604)](t)}addParticleStateInitializer(t){const e=ot;return this[e(584)][e(166)](t),t}[ot(268)](){return this[ot(584)].length}[ot(315)](t){const e=ot;if(t>=this[e(584)].length)throw new Error(e(467));return this[e(584)][t]}[ot(202)](t){const e=ot;return this[e(507)][e(166)](t),t}[ot(591)](){return this[ot(507)].length}[ot(317)](t){const e=ot;if(t>=this.particleStateOperators[e(502)])throw new Error('ParticleSystem::getParticleStateOperator() -> "index" is out of range.');return this[e(507)][t]}[ot(583)](){return this[ot(351)]}[ot(395)](){return this[ot(150)]}getParticleState(t){const e=ot;if(t>=this[e(150)])throw new Error(e(524));return this[e(451)].getState(t)}[ot(389)](){return this[ot(451)]}[ot(331)](){return this[ot(535)]}[ot(543)](){return this.simulateInWorldSpace}setSimulateInWorldSpace(t){const e=ot;this[e(141)]=t,this[e(535)]&&this[e(535)][e(528)](this[e(141)])}[ot(515)](t){this[ot(269)]=t}[ot(241)](t,e,s=0){const n=ot;this.particleSequences[n(248)](t,e,s)}getParticleSequences(){return this[ot(323)]}[ot(547)](){return this.particleEmitter}activateParticles(t){const e=ot;if(this[e(443)]==vt[e(359)]){const s=wt[e(218)](this[e(150)]+t,0,this.maximumActiveParticles);for(let t=this[e(150)];t<s;t++)this.activateParticle(t);this.activeParticleCount=s,this[e(451)][e(326)](this[e(150)])}}activateParticle(t){const e=ot;if(this[e(443)]==vt[e(359)]){const s=this[e(451)][e(589)](t);s[e(392)]=0;for(let t=0;t<this[e(584)][e(502)];t++){this.particleStateInitializers[t][e(525)](s)}if(this[e(141)]){s[e(186)][e(602)](this[e(483)].matrixWorld);const t=s.velocity[e(502)]();if(this[e(269)]){s[e(260)][e(318)](this[e(483)][e(489)])[e(470)](t);const n=s.acceleration[e(502)]();s[e(518)][e(318)](this[e(483)].matrixWorld).multiplyScalar(n)}}this[e(451)][e(548)](t)}}advanceActiveParticles(t){const e=ot;if(this[e(443)]==vt[e(359)]){let s=0;for(;s<this[e(150)];){this.advanceActiveParticle(s,t)?s++:(s<this[e(150)]-1&&this.copyParticleInArray(this.activeParticleCount-1,s),this[e(150)]--)}this.particleStates[e(326)](this[e(150)])}}[(o=ot(147),ot(415))](t,e){const s=ot;if(this[s(443)]==vt[s(359)]){const n=this[s(451)][s(589)](t);for(let t=0;t<this[s(507)].length;t++){const i=this[s(507)][t][s(354)](n,e),r=n[s(233)];if(!i||0!=r&&n[s(392)]>=r)return!1}return this[s(451)][s(548)](t),!0}return!1}copyParticleInArray(t,e){const s=ot;this[s(451)][s(553)](t,e),this[s(451)][s(548)](e)}static[ot(185)](t,e,s){const n=ot,i=(t,e,s)=>{const n=jt;e(t);for(const r in t)if(t.hasOwnProperty(r)){const s=t[r];typeof s===n(396)&&i(s,e)}};i(t,(t=>{const s=jt;t[s(284)]&&(t[s(284)]=e[s(335)](t[s(284)]))}));const r=t[n(374)],o=t[n(141)],a=t.renderer,c=a[n(284)][n(185)](a[n(337)]),l=new(I[n(235)]),h=new xt(l,c,s);h[n(364)](r),h[n(528)](o);const u=t.emitter,p=u[n(284)][n(185)](u[n(337)]);if(h.setEmitter(p),t[n(146)])for(const d of t.sequences)h[n(241)](d.start,d[n(502)],d.id);if(t.initializers)for(const d of t.initializers)h[n(346)](d.type[n(185)](h,d[n(337)]));if(t.operators)for(const d of t[n(532)]){const t=h[n(202)](d[n(284)][n(185)](h,d[n(337)]));d[n(419)]&&t.addElementsFromParameters(d[n(419)])}return[h,l]}[ot(278)](t){const e=ot,s=this[e(331)](),n=this[e(547)](),i=this.getParticleSequences(),r=i[e(429)]()[e(142)]((t=>{const s=e,n=i[s(336)](t);return{id:t,start:n[s(298)],length:n[s(502)]}})),o=[],a=this[e(268)]();for(let h=0;h<a;h++){const s=this.getParticleStateInitializer(h);s[e(338)]!==ft&&o[e(166)]({type:t[e(541)](s[e(338)]),params:s.toJSON(t)})}const c=[],l=this[e(591)]();for(let h=0;h<l;h++){const s=this[e(317)](h);if(s[e(338)]!==gt){const n=s.toJSON(t),i=n[e(337)]||n,r=n.params?n[e(419)]:null,o={type:t[e(541)](s[e(338)]),params:i};r&&(o.elements=r),c[e(166)](o)}}return{maxParticleCount:this[e(583)](),simulateInWorldSpace:this[e(543)](),renderer:{type:t[e(541)](s.constructor),params:s[e(278)]()},emitter:{type:t[e(541)](n[e(338)]),params:n[e(278)]()},sequences:r,initializers:o,operators:c}}}class Pt{constructor(){const t=ot;this[t(455)]=[],this[t(462)]=performance[t(575)]()/1e3,this[t(153)]=this[t(462)],this[t(517)]=new St}update(){const t=ot,e=wt[t(459)](),s=e-this[t(153)];for(const n of this[t(455)])n[t(301)](e,s);this.componentContainer[t(301)](e,s),this[t(153)]=e}[ot(438)](t,e){const s=ot;for(const n of this[s(455)])n[s(438)](t,e)}[ot(178)](t){const e=ot;this[e(455)][e(166)](t)}addComponent(t){const e=ot;this[e(517)][e(536)](t)}[ot(604)](t){return this[ot(517)].getComponent(t)}}class It{constructor(){const t=ot;this[t(173)]=!1,this.particleCount=0,this[t(483)]=null,this.simulateInWorldSpace=!1}[ot(528)](t){this[ot(141)]=t}[ot(383)](){}[ot(503)](t){this[ot(483)]=t}init(t){const e=ot;if(this[e(158)]=t,!this.initialized)return this[e(173)]=!0,!0;throw new Error(e(310))}[ot(438)](){}}class At extends ht{constructor(){const t=ot;super(),this.geometry=null,this[t(271)]=null,this[t(552)]=null,this[t(579)]=null,this[t(275)]=null,this[t(561)]=null,this[t(423)]=null,this.accelerations=null,this[t(571)]=null,this[t(492)]=null,this[t(513)]=null,this.sizes=null,this[t(480)]=null,this[t(367)]=null,this[t(539)]=null,this[t(250)]=!1,this.verticesPerParticle=6}[ot(364)](t,e=!1){const s=ot;this.instanced=e,this[s(250)]?this.verticesPerParticle=1:this.verticesPerParticle=6,super.init(t),this[s(285)](t)}setParticleCount(t){super[ot(446)](t)}[ot(326)](t){const e=ot;super[e(326)](t),t>0?this[e(250)]?this[e(605)][e(244)]=t:this[e(605)][e(597)](0,this[e(246)]*t):this[e(250)]?this.geometry[e(244)]=0:this[e(605)][e(597)](0,0)}[ot(548)](t){const e=ot;if(t>=this[e(158)])throw new Error(e(570));const s=this[e(589)](t),n=t*this[e(246)];for(let i=0;i<this[e(246)];i++)this[e(552)][e(420)](n+i,s[e(233)]),this[e(552)][e(435)]=!0,this[e(579)][e(420)](n+i,s[e(392)]),this[e(579)].needsUpdate=!0,this[e(275)][e(475)](n+i,s[e(223)].x,s[e(223)].y,s[e(223)].z,s[e(223)].w),this[e(275)][e(435)]=!0,this[e(561)][e(199)](n+i,s.position.x,s[e(186)].y,s[e(186)].z),this[e(561)][e(435)]=!0,this[e(423)][e(199)](n+i,s[e(260)].x,s[e(260)].y,s[e(260)].z),this[e(423)].needsUpdate=!0,this.accelerations.setXYZ(n+i,s[e(518)].x,s.acceleration.y,s[e(518)].z),this[e(531)].needsUpdate=!0,this.normals[e(199)](n+i,s[e(505)].x,s.normal.y,s[e(505)].z),this.normals[e(435)]=!0,this[e(492)][e(420)](n+i,s[e(333)]),this[e(492)][e(435)]=!0,this[e(513)][e(420)](n+i,s[e(426)]),this[e(513)].needsUpdate=!0,this[e(170)][e(442)](n+i,s[e(496)].x,s[e(496)].y),this[e(170)][e(435)]=!0,this[e(480)][e(199)](n+i,s.color.r,s[e(560)].g,s.color.b),this[e(480)][e(435)]=!0,this[e(207)].setX(n+i,s[e(472)]),this[e(207)][e(435)]=!0,this[e(367)][e(442)](n+i,s.initialSize.x,s[e(509)].y),this[e(367)].needsUpdate=!0,this[e(312)].setX(n+i,s[e(347)]),this[e(312)].needsUpdate=!0}[ot(553)](t,e){const s=ot;super[s(553)](t,e),this[s(548)](e)}[ot(160)](t,e){const s=ot;if(t>=this[s(158)])throw new Error(s(586));super[s(160)](t,e),this[s(548)](t)}getPositions(){return this.positions}[ot(167)](){return this[ot(170)]}[ot(469)](){return this[ot(492)]}[ot(294)](){return this[ot(275)]}[ot(319)](){return this[ot(480)]}[ot(344)](){return this.geometry}allocate(t){const e=ot;super.allocate(t);const s=(t,e)=>{const s=jt;return this[s(250)]?new(I[s(206)])(t,e):new(I[s(325)])(t,e)},n=this[e(246)]*this.particleCount;if(this[e(250)]){const t=new z,s=new Float32Array(18);this[e(581)]=new(I[e(325)])(s,3),t.setAttribute("position",this[e(581)]),this.basePositions.needsUpdate=!0,this[e(581)][e(199)](0,-1,1,0),this[e(581)][e(199)](1,-1,-1,0),this[e(581)][e(199)](2,1,1,0),this.basePositions.setXYZ(3,-1,-1,0),this[e(581)].setXYZ(4,1,-1,0),this[e(581)].setXYZ(5,1,1,0);const n=new Float32Array(12);this[e(440)]=new(I[e(325)])(n,2),t[e(324)]("baseUV",this[e(440)]),this[e(440)].needsUpdate=!0,this[e(440)][e(442)](0,0,1),this[e(440)][e(442)](1,0,0),this.baseUVs.setXY(2,1,1),this.baseUVs.setXY(3,0,0),this[e(440)][e(442)](4,1,0),this[e(440)].setXY(5,1,1);const i=new Float32Array(6);this.customIndexes=new(I[e(325)])(i,1),t[e(324)]("customIndex",this[e(607)]),this.customIndexes[e(435)]=!0,this[e(607)][e(420)](0,0),this.customIndexes[e(420)](1,1),this[e(607)][e(420)](2,3),this.customIndexes.setX(3,1),this[e(607)].setX(4,2),this[e(607)].setX(5,3),this[e(605)]=(new E)[e(603)](t),this[e(605)].instanceCount=0}else{this[e(605)]=new(I[e(508)]);const t=new Float32Array(n);this[e(607)]=new(I[e(325)])(t,1),this.geometry[e(324)](e(565),this[e(607)]),this.customIndexes[e(435)]=!0;for(let s=0;s<this[e(158)];s++){const t=s*this[e(246)];this[e(607)].setX(t,0),this[e(607)][e(420)](t+1,1),this[e(607)][e(420)](t+2,3),this[e(607)][e(420)](t+3,1),this.customIndexes[e(420)](t+4,2),this.customIndexes.setX(t+5,3)}}const i=new Float32Array(n),r=new Float32Array(n),o=new Float32Array(4*n),a=new Float32Array(3*n),c=new Float32Array(3*n),l=new Float32Array(3*n),h=new Float32Array(3*n),u=new Float32Array(n),p=new Float32Array(n),d=new Float32Array(2*n),f=new Float32Array(3*n),m=new Float32Array(n),g=new Float32Array(2*n),w=new Float32Array(3*n),S=new Float32Array(n);this[e(561)]=s(a,3),this.positions[e(464)](I[e(405)]),this[e(605)][e(324)](e(309),this[e(561)]),this[e(552)]=s(i,1),this.lifetimes[e(464)](I[e(405)]),this[e(605)].setAttribute(e(233),this[e(552)]),this[e(579)]=s(r,1),this[e(579)].setUsage(I[e(405)]),this[e(605)].setAttribute(e(392),this[e(579)]),this[e(275)]=s(o,4),this.sequenceElements.setUsage(I[e(405)]),this.geometry[e(324)](e(223),this[e(275)]),this[e(423)]=s(c,3),this[e(423)][e(464)](I[e(405)]),this[e(605)][e(324)](e(260),this[e(423)]),this[e(531)]=s(l,3),this[e(531)][e(464)](I[e(405)]),this[e(605)][e(324)](e(518),this[e(531)]),this[e(571)]=s(h,3),this[e(571)].setUsage(C),this[e(605)].setAttribute(e(505),this[e(571)]),this[e(492)]=s(u,1),this.rotations[e(464)](I[e(405)]),this[e(605)][e(324)]("rotation",this.rotations),this.rotationalSpeeds=s(p,1),this[e(513)][e(464)](I[e(405)]),this[e(605)][e(324)](e(426),this.rotationalSpeeds),this.sizes=s(d,2),this.sizes.setUsage(C),this[e(605)][e(324)](e(496),this.sizes),this[e(480)]=s(f,3),this[e(480)].setUsage(I[e(405)]),this[e(605)][e(324)](e(560),this[e(480)]),this[e(207)]=s(m,1),this.alphas[e(464)](I[e(405)]),this.geometry[e(324)](e(472),this.alphas),this[e(367)]=s(g,2),this.initialSizes.setUsage(I[e(405)]),this[e(605)].setAttribute("initialSize",this[e(367)]),this[e(539)]=s(w,3),this[e(539)][e(464)](I[e(405)]),this[e(605)].setAttribute(e(448),this[e(539)]),this[e(312)]=s(S,1),this[e(312)].setUsage(I[e(405)]),this[e(605)][e(324)](e(347),this[e(312)])}[ot(259)](){const t=ot;super.dispose(),this.geometry&&(this[t(605)][t(259)](),this.geometry=null)}}class Ft{constructor(t,e,s,n,i){const r=ot;this[r(502)]=t,this.x=e,this.y=s,this[r(253)]=n,this[r(205)]=i}}class bt{constructor(t,e){this[ot(222)]=t,this.texturePath=e,this.frameSets=[]}[ot(437)](){return this[ot(222)]}[ot(533)](){return this[ot(226)]}[ot(580)](){return this.frameSets.length}[ot(593)](t,e,s,n,i){const r=ot;this[r(357)][r(166)](new Ft(t,e,s,n,i))}[ot(214)](t){const e=ot;if(t>=this.frameSets[e(502)])throw new Error(e(540));return this[e(357)][t]}}const Tt=class t extends It{constructor(t,e,s=!1,n=I[ot(265)],i=!0,r){const o=ot;super(),f(this,a,function(){const t=ot,e=function(){let t=!0;return function(e,s){const n=t?function(){if(s){const t=s[jt(411)](e,arguments);return s=null,t}}:function(){};return t=!1,n}}();e(this,(function(){const t=jt,s=function(){const t=jt;let e;try{e=Function(t(193)+t(172)+");")()}catch(s){e=window}return e}(),n=s[t(256)]=s[t(256)]||{},i=[t(546),t(343),"info",t(538),t(370),t(334),t(263)];for(let r=0;r<i[t(502)];r++){const s=e.constructor.prototype[t(171)](e),o=i[r],a=n[o]||s;s[t(569)]=e[t(171)](e),s[t(537)]=a.toString.bind(a),n[o]=s}}))();const s=new(I[t(476)]);return function(){const e=t,n=this.particleStateArray[e(344)]();if(this[e(416)]){n.boundingBox||(n[e(574)]=new(I[e(558)])),n[e(574)].copy(this[e(574)]),!n[e(300)]&&(n[e(300)]=new(I[e(482)])),s.x=(this.boundingBox.min.x+this[e(574)].max.x)/2,s.y=(this[e(574)].min.y+this[e(574)][e(221)].y)/2,s.z=(this[e(574)][e(201)].z+this[e(574)][e(221)].z)/2;const t=this[e(574)][e(221)].x-s.x,i=this[e(574)][e(221)].y-s.y,r=this[e(574)][e(221)].z-s.z,o=Math[e(221)](Math[e(221)](t,i),r);n[e(300)][e(329)][e(603)](s),n[e(300)][e(225)]=Math[e(522)](2*o*o)}else n.boundingSphere||(n.boundingSphere=new(I[e(482)])),n[e(300)].copy(this[e(300)])}}()),this[o(250)]=t,this[o(417)]=null,this[o(277)]=null,this[o(175)]=null,this[o(519)]=e,this[o(449)]=s,this.blending=n,this[o(574)]=new(I[o(558)]),this.boundingSphere=new(I[o(482)]),this.calculateBoundingSphereFromBox=i,this.renderOrder=r}setOwner(t){super[ot(503)](t)}[ot(383)](){return this[ot(417)]}[ot(528)](t){const e=ot;super.setSimulateInWorldSpace(t),this[e(277)]&&(this.material[e(486)][e(141)].value=t?1:0,this[e(277)][e(188)]=!0)}[ot(495)](){return this[ot(416)]}[ot(290)](t){const e=ot;this[e(574)][e(603)](t),this.mesh&&this[e(585)]()}setBoundingSphere(t){const e=ot;this[e(300)][e(603)](t),this[e(175)]&&this.updateMeshBounds()}[ot(438)](t,e,s){e.render(t,s)}[(a=ot(585),ot(364))](t){const e=ot;super.init(t)&&(this[e(417)]=new At,this[e(417)][e(364)](t,this[e(250)]),this[e(277)]=this[e(321)](null,null,null,!0,!1),this[e(277)][e(216)]=this.blending,this[e(175)]=new(I[e(243)])(this[e(417)][e(344)](),this[e(277)]),this[e(175)][e(316)]=!0,void 0!==this.renderOrder&&(this.mesh[e(286)]=this[e(286)]),this[e(585)](),this[e(483)][e(563)](this.mesh))}dispose(){this[ot(417)].dispose()}[ot(321)](e,s,n,i,r){const o=ot,a=[...Array(16).keys()].map((t=>new(I[o(521)])));if(this[o(519)])for(let t=0;t<this[o(519)][o(580)]();t++){const e=this[o(519)].getFrameSet(t);a[t]=new(I[o(521)])(e.x,e.y,e[o(253)],e[o(205)])}const c=this[o(519)]?this.atlas[o(437)]():null,l=this[o(449)],h=this[o(141)],u=this.instanced?1:0,p={atlasFrameSet:{type:o(165),value:a},atlasTexture:{type:"t",value:c},interpolateAtlasFrames:{value:l},uvOffset:{type:"v2",value:new(I[o(272)])},simulateInWorldSpace:{value:h},instanced:{value:u}};return n=n||{},Object[o(418)](n,p),e=e||t[o(559)][o(386)](r),s=s||t[o(559)].getFragmentShader(i,r),new(I[o(213)])({uniforms:n,vertexShader:e,fragmentShader:s,transparent:!0,alphaTest:1,blending:I[o(265)],blendDstAlpha:I[o(556)],blendSrcAlpha:I[o(549)],depthTest:!0,depthWrite:!1})}static[(c=ot(559),ot(185))](e){const s=ot,n=e[s(519)],i=(new R).load(n[s(226)]),r=new bt(i,n.texturePath),o=n.framesets;for(const t of o)r[s(593)](t[s(502)],t.x,t.y,t[s(253)],t.height);const a=new t(e.instanced,r,n[s(460)]);return e[s(216)]==s(382)?a[s(216)]=I[s(308)]:a.blending=I[s(265)],a}[ot(278)](t){const e=ot;t=t||(t=>{const e=jt;if(t.texturePath)return t[e(226)];const s=t[e(437)]()[e(439)];if(s){const t=s.data;if(t){const s=t[e(196)],n=t[e(490)];return n[e(444)](s)>=0?n.substr(s[e(502)],n[e(502)]-s[e(502)]):n}}});const s=[];for(let i=0;i<this[e(519)].getFrameSetCount();i++){const t=this[e(519)][e(214)](i);s[e(166)](t)}let n=e(590);this[e(277)][e(216)]===I[e(308)]&&(n=e(382));return{instanced:this[e(250)],blending:n,atlas:{interpolateFrames:this[e(449)],texturePath:t(this.atlas),framesets:s}}}};f(Tt,c,{get VertexVars(){const t=ot;return[t(466),t(422),t(388),t(377),t(282),t(523),t(287),t(494),t(428),t(406),t(352),"attribute vec3 color;\n",t(400),t(380),t(276),t(484),t(227),t(322)].join("\n")},get FragmentVars(){const t=ot;return["uniform int interpolateAtlasFrames; \n",t(365),"uniform vec2 uvOffset;\n",t(380),t(276),t(484),t(227),t(252)].join("\n")},getVertexShader(t){const e=ot;let s=[e(363),this.VertexVars][e(194)]("\n");return t&&(s+=e(592)),s+=[e(410),e(197),"   float atlasFrameHeight = atlasFrames.w; \n",e(231),"   float atlasFrameY = atlasFrames.y; \n",e(390),e(219),e(567),e(471),e(368),e(209),e(432),e(564),e(481),e(180),"   float nRow = step(float(firstRowSections), float(sequenceElement)); \n","   uv.x = nRow * nRowX + (1.0 - nRow) * firstRowX; \n",e(568),e(554),"void main()\n","{\n",e(249),e(293),e(148),e(468),"   const vec2 uRight = vec2(1.0, 1.0);\n","   const vec2 uLeft = vec2(-1.0, 1.0);\n",e(414),e(453),"   vec4 viewPosition; \n",e(181),e(296),"   } else { \n","       viewPosition = viewMatrix * modelMatrix * particlePosition;\n",e(236),"   float sequenceElementF = sequenceElement.x;\n",e(174),e(274),e(258),"   vec4 atlasFrames = atlasFrameSet[sequenceNumber]; \n",e(330),e(254),e(242),e(361),"   int secondSequenceElement = clamp(firstSequenceElement + 1, sequenceStart, sequenceStart + sequenceLength - 1); \n","   getUV(firstSequenceElement, sequenceNumber, atlasFrames, uv1); \n","   if (interpolateAtlasFrames == 1 && firstSequenceElement != secondSequenceElement) { \n ",e(487),"   } \n",e(197),e(534),"   float rotMag = rotation; \n","   mat2 rotMat = mat2(cos(rotMag), -sin(rotMag), sin(rotMag), cos(rotMag)) * mat2(size.x, 0.0, 0.0, size.y);\n","   float rightSide; \n",e(402),e(152),e(573),e(305),e(314),e(465),e(299),e(220),e(236),e(530),"   float uvYOffset = atlasFrameHeight * upperSide; \n",e(578),e(152),"       vec4 rotVecStep = step(vec4(customIndex, customIndex, 3.0, 2.0), vec4(0.0, 1.0, customIndex, customIndex)); \n","       float uLeftV = rotVecStep.x; \n",e(384),e(327),e(566),"       rotVec = uLeft * uLeftV + dLeft * dLeftV + dRight * dRightV + uRight * uRightV; \n","   }  else { \n","       rotVec = position.xy; \n ",e(236),e(391),e(348),e(159),e(291),e(463)][e(194)]("\n"),t&&(s+=e(542)),s+=e(554),s},getFragmentShader(t,e){const s=ot;let n="#include <common> \n"+this[s(239)]+"\n";return e&&(n+=s(527)),n+=s(320),e&&(n+=s(245)),n+=t?[s(182),s(155),s(350),"   gl_FragColor = mix(color1, color2, vSequenceElementT);\n",s(498)].join("\n"):[s(413),s(155),s(350),s(195),"   gl_FragColor.a *= vFragAlpha; \n"].join("\n"),n+="}\n",n}});let zt=Tt;class Et{constructor(){const t=ot;this[t(606)]=0,this[t(403)]=0,this.emitCount=0,this.age=0,this[t(545)]=0,this[t(356)]=0,this[t(351)]=0}[ot(301)](t){return this[ot(504)](t),0}[ot(504)](t){const e=ot;return this[e(392)]+=t,this[e(545)]=Math[e(221)](this[e(392)]-this.emissionRelativeStartTime,0),this.age>=this[e(606)]&&(0==this.emissionDuration||this[e(545)]<=emissionDuration)}[ot(177)](t){this.emitCount+=t}}class Ct extends Et{constructor(){const t=ot;super(),this[t(510)]=0,this[t(169)]=0}}class Rt extends Ct{constructor(t=0){const e=ot;super(),this[e(198)]=t}[ot(301)](t){const e=ot;if(this[e(504)](t)){const t=this[e(198)]*this[e(545)]-this[e(407)];if(t>=1){const s=Math.floor(t);return this[e(177)](s),s}}return 0}static[ot(185)](t){const e=ot,s=new Rt;return s.emissionRate=t[e(198)]||0,s}toJSON(){return{emissionRate:this[ot(198)]}}}const Ot=class t{constructor(t){this[ot(332)]=t}static[(l=ot(272),ot(381))](e){const s=ot;let n=t[s(441)];return e===b?n=t[s(272)]:e===A?n=t[s(476)]:e===I[s(521)]?n=t[s(521)]:e===I[s(230)]&&(n=t.Color),n}static[ot(555)](t,e){const s=ot;switch(e){case I[s(272)]:return(new(I[s(272)]))[s(266)](t);case I[s(476)]:return(new(I[s(476)])).fromArray(t);case I[s(521)]:return(new P)[s(266)](t);case I[s(230)]:return(new(I[s(230)]))[s(266)](t)}return t}};f(Ot,"Default",new Ot("Default")),f(Ot,l,new Ot(ot(272))),f(Ot,"Vector3",new Ot(ot(476))),f(Ot,"Vector4",new Ot(ot(521))),f(Ot,"Color",new Ot("Color"));let Vt=Ot;class Mt{constructor(t){const e=ot;this.outType=t,this.outTypeID=Vt[e(381)](t)}}class qt extends Mt{constructor(t,e,s,n,i,r){const o=ot;super(t),this[o(237)]=e,this[o(187)]=s,this[o(387)]=n,this.uniformOffset=i,this[o(430)]=r}generate(t){const e=ot,s=Math[e(238)]()*this[e(387)];switch(this[e(479)]){case Vt[e(441)]:t=Math[e(238)]()*this[e(237)]+this[e(187)],this[e(430)]&&(t=t<0?-1:1);break;case Vt[e(272)]:t[e(267)](this[e(353)](s,"x"),this.generateForElement(s,"y"));break;case Vt[e(476)]:t[e(267)](this[e(353)](s,"x"),this[e(353)](s,"y"),this[e(353)](s,"z"));break;case Vt[e(521)]:t[e(267)](this[e(353)](s,"x"),this.generateForElement(s,"y"),this.generateForElement(s,"z"),this[e(353)](s,"w"))}return this[e(430)]&&t[e(430)](),t}[ot(353)](t,e){const s=ot;return t+Math.random()*this.range[e]+this[s(187)][e]+this[s(232)]}[ot(270)](){const t=ot;return new qt(this[t(217)],this[t(237)],this[t(187)],this.uniformRange,this[t(232)],this[t(430)])}static[ot(404)](t){const e=ot;return t instanceof I[e(272)]||t instanceof I[e(476)]||t instanceof P||t instanceof F?t[e(434)]():t}static[ot(185)](t){const e=ot;return new qt(t.type,Vt[e(555)](t.range,t[e(284)]),Vt.loadJSONParameter(t[e(187)],t[e(284)]),t.uniformRange||0,t[e(232)]||0,t[e(430)])}toJSON(t){const e=ot,s={range:qt.getParameterJSON(this.range),offset:qt.getParameterJSON(this[e(187)]),uniformRange:this[e(387)],uniformOffset:this[e(232)]},n=t.getTypePath(this[e(237)][e(338)]);return null!=n&&(s.type=n),{type:t[e(541)](qt),params:s}}}class Nt extends dt{constructor(t,e,s,n,i){const r=ot;super(),this[r(237)]=t,this[r(187)]=e,this[r(387)]=s,this[r(232)]=n,this[r(430)]=i,this[r(457)]=new qt(0,this[r(237)],this[r(187)],this[r(387)],this[r(232)],this[r(430)])}initializeState(t){const e=ot;t[e(233)]=this[e(457)][e(544)]()}static fromJSON(t,e){const s=ot;return new Nt(e.range,e[s(187)],e.uniformRange,e[s(232)],e.normalize)}toJSON(){const t=ot;return{range:this[t(237)],offset:this[t(187)],uniformRange:this.uniformRange,uniformOffset:this[t(232)],normalize:this[t(430)]}}}class _t extends dt{constructor(t){const e=ot;super(),this[e(457)]=t[e(270)]()}[ot(525)](t){const e=ot;t[e(333)]=this[e(457)][e(544)](t[e(333)])}static[ot(185)](t,e){const s=ot,n=e.generator[s(284)].fromJSON(e[s(457)].params);return new _t(n)}[ot(278)](t){return{generator:this[ot(457)].toJSON(t)}}}function jt(t,e){const s=rt();return(jt=function(t,e){return s[t-=141]})(t,e)}class Ut extends dt{constructor(t,e,s,n,i){const r=ot;super(),this[r(237)]=t,this.offset=e,this[r(387)]=s,this[r(232)]=n,this[r(430)]=i,this.generator=new qt(0,this.range,this.offset,this[r(387)],this[r(232)],this.normalize)}[ot(525)](t){const e=ot;t[e(426)]=this.generator[e(544)]()}static[ot(185)](t,e){const s=ot;return new Ut(e[s(237)],e.offset,e[s(387)],e[s(232)],e[s(430)])}[ot(278)](){const t=ot;return{range:this[t(237)],offset:this[t(187)],uniformRange:this[t(387)],uniformOffset:this.uniformOffset,normalize:this.normalize}}}class kt extends dt{constructor(t,e){const s=ot;super(),this[s(373)]=new qt(I[s(476)],t,e,0,0,!1)}[ot(525)](t){const e=ot;this[e(373)][e(544)](t[e(186)])}static[ot(185)](t,e){const s=ot;return new kt((new(I[s(476)]))[s(266)](e.range),(new A).fromArray(e.offset))}[ot(278)](){const t=ot;return{range:this[t(373)].range.toArray(),offset:this[t(373)].offset[t(434)]()}}}class Bt extends dt{constructor(t){const e=ot;super(),this[e(457)]=t[e(270)]()}initializeState(t){const e=ot;this.generator[e(544)](t[e(496)]),t[e(509)][e(603)](t[e(496)])}static[ot(185)](t,e){const s=ot,n=e[s(457)][s(284)].fromJSON(e[s(457)][s(337)]);return new Bt(n)}[ot(278)](t){return{generator:this.generator.toJSON(t)}}}class Dt extends dt{constructor(t,e,s,n,i=!0){const r=ot;super(),this[r(247)]=new qt(I[r(476)],t,e,0,0,!0),this.speedGenerator=new qt(0,s,n,0,0,!1),this[r(328)]=i}[ot(525)](t){const e=ot;this.directionGenerator[e(544)](t[e(260)]),this[e(328)]&&t.velocity.normalize(),t[e(260)][e(470)](this[e(289)][e(544)]())}static fromJSON(t,e){const s=ot;return new Dt((new(I[s(476)]))[s(266)](e[s(237)]),(new A)[s(266)](e[s(187)]),e[s(189)],e[s(228)])}[ot(278)](){const t=ot;return{range:this.directionGenerator[t(237)][t(434)](),offset:this[t(247)][t(187)][t(434)](),speedRange:this.speedGenerator[t(237)],speedOffset:this[t(289)].offset}}}class Xt extends dt{constructor(t,e=!1){const s=ot;super(),this[s(341)](t),this[s(215)]=e}[ot(341)](t){this[ot(323)]=t}[ot(525)](t){const e=ot,s=this[e(323)][e(429)](),n=s[e(502)]*Math[e(238)](),i=s[Math[e(184)](n)],r=this.particleSequences[e(336)](i),o=t[e(223)];this.reverse?o.x=r.length-1:o.x=r[e(298)],o.y=r.id,o.z=r[e(298)],o.w=r[e(502)],t[e(506)]=ct.Sequence}static[ot(185)](t,e){const s=ot;return new Xt(t.getParticleSequences(),e[s(215)])}toJSON(){return{reverse:this[ot(215)]}}}class Wt extends mt{constructor(t,e,s=!1,n=!1){const i=ot;super(),this[i(323)]=t,this[i(378)]=e,this[i(550)]=s,this.reverse=n}[ot(354)](t,e){const s=ot,n=t[s(223)],i=this[s(323)][s(336)](n.y),r=e/this[s(378)];if(this.reverse){if(n.x-=r,n.x<i[s(298)]&&(n.x=i.start+i[s(502)],!this[s(550)]))return!1}else if(n.x+=r,n.x>=i.start+i[s(502)]&&(n.x=i.start,!this[s(550)]))return!1;return!0}static fromJSON(t,e){const s=ot;return new Wt(t.getParticleSequences(),e[s(378)],e[s(550)],e[s(215)])}[ot(278)](){const t=ot;return{speed:this[t(378)],loop:this[t(550)],reverse:this[t(215)]}}}class Jt{constructor(t,e){f(this,h,function(){const t=ot,e={lowerIndex:0,upperIndex:0,localT:0},s=new(I[t(272)]),n=new(I[t(476)]),i=new P,r=new(I[t(230)]),o=s=>(n,i,r,o)=>{const a=t;Jt[a(204)](r,n,e),s.copy(i[e.upperIndex])[a(470)](e[a(340)]),o[a(603)](i[e[a(349)]])[a(470)](1-e.localT).add(s)};return function(a){const c=t;switch(a){case Vt.Default:return(t,s,n)=>{const i=jt;return Jt.getInterpolationValuesForTValue(n,t,e),(1-e[i(340)])*s[e.lowerIndex]+e[i(340)]*s[e[i(393)]]};case Vt.Vector2:return o(s);case Vt[c(476)]:return o(n);case Vt[c(521)]:return o(i);case Vt[c(230)]:return o(r)}}}());const s=ot;this[s(419)]=[],this[s(425)]=[],this[s(599)]=Vt[s(381)](t),e?this.interpolator=e:this[s(587)]=this[s(156)](this.elementTypeID)}*[Symbol.iterator](){const t=ot;let e=0;for(;e<this.getElementCount();)yield{element:this.elements[e],tValue:this[t(425)][e]},e++}getElementCount(){return this[ot(419)].length}getElement(t){const e=ot;if(t>=this[e(421)]())throw new Error(e(200));return this[e(419)][t]}[ot(408)](t){const e=ot;if(t>=this.getElementCount())throw new Error(e(183));return this[e(425)][t]}[ot(488)](t,e){const s=ot;this[s(419)][s(166)](t),this.tValues[s(166)](e)}getInterpolatedElement(t,e){const s=ot;return this[s(587)](t,this[s(419)],this[s(425)],e)}static[(h=ot(156),ot(204))](t,e,s){const n=ot,i=t[n(502)];if(0===i)return s[n(349)]=-1,s[n(393)]=-1,void(s[n(340)]=-1);let r=0,o=-1,a=0;for(let h=0;h<i&&(r=t[h],!(r>e));h++)o++,a++;s[n(349)]=wt[n(218)](o,0,i-1),s[n(393)]=wt.clamp(a,0,i-1);const c=t[o],l=t[a];s.localT=(e-c)/(l-c)}}class Yt extends mt{constructor(t,e=!1){const s=ot;super(),this[s(304)]=e,this[s(473)]=new Jt(t)}addElement(t,e){const s=ot;this[s(473)][s(488)](t,e)}addElements(t){const e=ot;for(const s of t)this[e(473)][e(488)](s[0],s[1])}[ot(149)](t,e){const s=ot;for(const n of e){const[...e]=n[0];this.interpolationElements[s(488)](new t(...e),n[1])}}[ot(176)](t,e){const s=ot;let n=0;switch(t[s(506)]){case ct[s(366)]:n=0!=t[s(233)]?t[s(392)]/t[s(233)]:t[s(392)];break;case ct.Sequence:n=t.sequenceElement.x/t.sequenceElement.w}return this[s(473)].getInterpolatedElement(n,e)}}class Gt extends Yt{constructor(t=!1){super(0,t)}[ot(192)](t){super.addElements(t)}[ot(354)](t){const e=ot;return this.relativeToInitialValue?t[e(472)]=t.initialAlpha*this[e(176)](t,t.alpha):t[e(472)]=this[e(176)](t,t[e(472)]),!0}static[ot(185)](t,e){return new Gt(e[ot(304)])}[ot(278)](){const t=ot;return{params:{relativeToInitialValue:this.relativeToInitialValue},elements:[...this[t(473)]].map((e=>[e[t(500)],e[t(145)]]))}}}const Zt=class t extends Yt{constructor(t=!1){super(I[ot(272)],t),f(this,u,function(){const t=ot,e=new(I[t(272)]);return function(s){const n=t;return this[n(176)](s,e),this[n(304)]?s.size[n(267)](s[n(509)].x*e.x,s[n(509)].y*e.y):s[n(496)][n(603)](e),!0}}())}[ot(192)](t){const e=ot;super[e(149)](I[e(272)],t)}static fromJSON(e,s){return new t(s.relativeToInitialValue)}toJSON(){const t=ot;return{params:{relativeToInitialValue:this[t(304)]},elements:[...this.interpolationElements][t(142)]((e=>[e.element[t(434)](),e[t(145)]]))}}};u=ot(354);let Lt=Zt;class Ht extends Yt{constructor(t=!1){super(F,t),f(this,p,function(){const t=ot,e=new(I[t(230)]);return function(s){const n=t;return this.getInterpolatedValue(s,e),this.relativeToInitialValue?s[n(560)][n(163)](s[n(448)].r*e.r,s[n(448)].g*e.g,s[n(448)].b*e.b):s.color[n(603)](e),!0}}())}[ot(192)](t){super.addElementsFromElementClassAndParameters(F,t)}static[(p=ot(354),ot(185))](t,e){return new Ht(e.relativeToInitialValue)}[ot(278)](){const t=ot;return{params:{relativeToInitialValue:this[t(304)]},elements:[...this[t(473)]].map((e=>[e[t(500)][t(434)](),e[t(145)]]))}}}class $t extends mt{constructor(t){const e=ot;super(),this[e(457)]=t.clone()}[ot(192)](t){const e=ot;super[e(149)](THREE[e(476)],t)}[ot(354)](t){return this[ot(457)].generate(t.acceleration),!0}static[ot(185)](t,e){const s=ot,n=e[s(457)][s(284)][s(185)](e.generator[s(337)]);return new $t(n)}toJSON(t){const e=ot;return{generator:this[e(457)][e(278)](t)}}}class Qt extends Mt{constructor(t,e,s,n,i,r,o,a,c,l,h,u){const p=ot;super(I[p(476)]),this[p(436)]=t,this[p(203)]=e,this[p(512)]=s,this.offsetPhi=n,this[p(456)]=i,this[p(283)]=r,this[p(582)]=o,this[p(398)]=a,this[p(424)]=c,this.offsetX=l,this[p(562)]=h,this[p(251)]=u,this.tempUp=(new(I[p(476)])).set(0,1,0)}[ot(544)](t){const e=ot;this.tempUp[e(267)](0,1,0);const s=Math[e(238)]()*this.rangeTheta+this.offsetTheta,n=Math[e(238)]()*this[e(512)]+this[e(379)],i=Math[e(399)](s),r=Math.sin(s),o=Math[e(399)](n),a=Math[e(362)](n);t[e(267)](i,0,-r),t[e(470)](o),this[e(151)][e(470)](a),t.add(this[e(151)]),t.normalize();const c=Math[e(238)]()*this.rangeRadius+this[e(283)];t.multiplyScalar(c),t.x*=this[e(582)],t.y*=this[e(398)],t.z*=this[e(424)],t.x+=this[e(360)],t.y+=this[e(562)],t.z+=this.offsetZ}[ot(270)](){const t=ot;return new Qt(this[t(436)],this.offsetTheta,this[t(512)],this[t(379)],this.rangeRadius,this.offsetRadius,this[t(582)],this[t(398)],this[t(424)],this.offsetX,this[t(562)],this[t(251)])}static fromJSON(t){const e=ot;return new Qt(t[e(436)],t.offsetTheta,t[e(512)],t.offsetPhi,t[e(456)],t[e(283)],t[e(582)],t.scaleY,t.scaleZ,t[e(360)],t[e(562)],t[e(251)])}[ot(278)](t){const e=ot;return{type:t[e(541)](Qt),params:{rangeTheta:this[e(436)],offsetTheta:this[e(203)],rangePhi:this[e(512)],offsetPhi:this[e(379)],rangeRadius:this[e(456)],offsetRadius:this[e(283)],scaleX:this[e(582)],scaleY:this[e(398)],scaleZ:this[e(424)],offsetX:this[e(360)],offsetY:this[e(562)],offsetZ:this.offsetZ}}}}class Kt{constructor(){}}class te extends Kt{constructor(t,e,s,n,i,r,o=void 0){const a=ot;super(),this[a(483)]=null,this[a(433)]=null,this[a(153)]=performance[a(575)]()/1e3,this.lastIntensityFlickerTime=this[a(153)],this[a(161)]=this[a(153)],this[a(224)]=1,this[a(454)]=1,this.lastPositionAdjuster=new A,this[a(477)]=new(I[a(476)]),this[a(497)]=1,this[a(385)]=2,this[a(445)]=t,this[a(364)](t,e,s,n,i,r,o)}[ot(364)](t,e,s,n,i,r,o=void 0){const a=ot;this[a(483)]=new(I[a(235)]),t.add(this[a(483)]),n=n||new(I[a(230)]),i=i||0,null!=r&&null!=r||(r=2);const c=!!o;return this[a(433)]=new O(16777215,2,0,1),this[a(433)][a(560)][a(603)](n),this[a(433)][a(376)]=i,this[a(433)][a(372)]=r,this.light[a(520)]=c,c&&(this[a(433)].shadow[a(280)].width=o[a(280)]||512,this.light[a(427)][a(280)][a(205)]=o.mapSize||512,this.light.shadow[a(526)].near=o[a(157)]||.5,this[a(433)][a(427)][a(526)][a(162)]=o[a(168)]||500,this[a(433)][a(427)].bias=o.bias||1e-4,this.light.shadow.radius=o[a(516)]||1),this[a(483)][a(563)](this.light),this[a(497)]=e,this.intensityFlux=s,this[a(433)]}[ot(259)](){const t=ot;this[t(445)][t(412)](this[t(483)])}[ot(273)](){return this[ot(433)]}setIntensity(t){this[ot(497)]=t}[ot(301)](t){const e=ot,s=t-this[e(307)],n=1/8,i=this[e(385)];if(s>n){this[e(307)]=t;let s=1+2*(Math[e(238)]()-.5)*i*n;const r=s-this.lastIntensityAdjuster;s=this[e(224)]+r,this.lastIntensityAdjuster=this[e(454)],this.nextIntensityAdjuster=wt[e(218)](s,.25,1.5)}else{const t=s/n,i=(1-t)*this[e(224)]+t*this[e(454)];this.light[e(497)]=i*this[e(497)]}if(t-this[e(161)]>.0625){this[e(161)]=t;const s=t-this[e(153)];this.positionAdjuster[e(267)](Math.random()-.5,Math[e(238)]()-.5,Math[e(238)]()-.5),this[e(477)][e(470)](s),this[e(477)][e(563)](this[e(595)]),this.positionAdjuster.multiplyScalar(.5),this[e(483)][e(186)].copy(this[e(477)]),this[e(595)][e(603)](this.positionAdjuster),this[e(153)]=t}}}class ee{constructor(){const t=ot;this[t(452)]={default:{}},this[t(371)]={},this[t(179)]=0}addType(t,e){this[ot(292)]("default",t,e)}[ot(292)](t,e,s){const n=ot;if(!this[n(452)][t])throw new Error(n(485));if(this[n(452)][t][e])throw new Error("JSONTypeStore::addTypeToNamespace() -> typeName already exists");this[n(211)](s,e,t)&&(this[n(452)][t][e]=s)}[ot(210)](t,e){const s=ot;if(this[s(452)][t])throw new Error(s(450));this[s(452)][t]=e;for(const n in e)if(!e[s(600)]||e[s(600)](n)){const s=e[n];this.checkAndAddTypeName(s,n,t)}}checkAndAddTypeName(t,e,s){const n=ot;if(typeof t===n(234)){const i=this[n(179)]++;t.___photonsTypeID=i,this[n(371)][i]={namespace:s,typeName:e}}}getType(t,e){const s=ot;if(!this[s(452)][t])throw new Error(s(499));if(!this[s(452)][t][e])throw new Error("JSONTypeStore::getType() -> typeName does not exist");return this[s(452)][t][e]}[ot(576)](t){const e=ot;return this[e(371)][t[e(401)]]}[ot(541)](t){const e=ot,s=this[e(576)](t);if(s)return s[e(397)]+"."+s[e(431)]}[ot(557)](t){const e=ot,s=t.split("."),n=s[0];s[e(311)](0,1);return{namespace:n,typeName:s[e(194)](".")}}[ot(335)](t){const e=ot,{namespace:s,typeName:n}=this[e(557)](t);return this[e(154)](s,n)}}function se(t){function e(t){const s=jt;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[s(411)](s(478));1!==(""+t/t).length||t%20==0?function(){return!0}[s(338)](s(409)+s(262))[s(461)]("action"):function(){return!1}.constructor("debu"+s(262))[s(411)](s(501)),e(++t)}try{if(t)return e;e(0)}catch(s){}}const ne=Object.freeze(Object.defineProperty({__proto__:null,AccelerationOperator:$t,AnimatedSpriteRenderer:zt,Atlas:bt,BaseParticleStateInitializer:ft,BaseParticleStateOperator:gt,BoxPositionInitializer:kt,ColorInterpolatorOperator:Ht,ConstantParticleEmitter:Rt,FlickerLight:te,JSONTypeStore:ee,LifetimeInitializer:Nt,Manager:Pt,OpacityInterpolatorOperator:Gt,ParticleStateArray:ht,ParticleSystem:xt,ParticleSystemState:vt,RandomGenerator:qt,RandomVelocityInitializer:Dt,Renderer:It,RotationInitializer:_t,RotationalSpeedInitializer:Ut,SequenceInitializer:Xt,SequenceOperator:Wt,SizeInitializer:Bt,SizeInterpolatorOperator:Lt,SphereRandomGenerator:Qt},Symbol.toStringTag,{value:"Module"})),ie=ae;!function(t,e){const s=ae,n=ce();for(;;)try{if(243039===parseInt(s(278))/1+parseInt(s(338))/2+-parseInt(s(311))/3+parseInt(s(275))/4+parseInt(s(284))/5*(-parseInt(s(273))/6)+-parseInt(s(332))/7*(parseInt(s(353))/8)+parseInt(s(313))/9)break;n.push(n.shift())}catch(i){n.push(n.shift())}}();const re=function(){let t=!0;return function(e,s){const n=t?function(){if(s){const t=s[ae(339)](e,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){re(this,(function(){const t=ae,e=new RegExp(t(304)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=he(t(317));e[t(291)](n+t(354))&&s.test(n+t(341))?he():n("0")}))()}();const oe=function(){let t=!0;return function(e,s){const n=t?function(){if(s){const t=s[ae(339)](e,arguments);return s=null,t}}:function(){};return t=!1,n}}();function ae(t,e){const s=ce();return(ae=function(t,e){return s[t-=266]})(t,e)}function ce(){const t=["RandomGenerator","bind","value","action","load","AccelerationOperator","Object3D","position","RandomVelocityInitializer","Vector2","8FxnICx","chain","TextureLoader","iFire","call","stateObject","addComponent","LifetimeInitializer","info","return (function() ","copy","12wFaHuo","activeParticleCount","747776NiUeaT","components","update","263890YOSMuX","RotationalSpeedInitializer","setSimulateInWorldSpace","gger","warn","Vector3","561485MeYADm","addParticleSequence","setRGB","string","ParticleSystem","addParticleSystem","addElements","test","componentContainer","while (true) {}","console","BoxPositionInitializer","ConstantParticleEmitter","OpacityInterpolatorOperator","dispose","table","AdditiveBlending","complete","SequenceInitializer","addParticleStateInitializer","function *\\( *\\)",'{}.constructor("return this")( )',"RotationInitializer","add","FlickerLight","Color","ColorInterpolatorOperator","271158yNJACg","length","3666663WGiGdI","setEmitter","exception","start","init","error","Manager","addNamespace","particleSystems","Atlas","splice","addFrameSet","log","AnimatedSpriteRenderer","SizeInterpolatorOperator","Photons","constructor","addElementsFromParameters","particleSystemRenderer","3017791rmUAHq","getParticleSequences","SizeInitializer","addParticleStateOperator","SequenceOperator","debu","261782TMhWrZ","apply","render","input","toString"];return(ce=function(){return t})()}oe(void 0,(function(){const t=ae;let e;try{e=Function(t(271)+t(305)+");")()}catch(i){e=window}const s=e[t(294)]=e[t(294)]||{},n=["log",t(282),t(270),t(318),t(315),t(299),"trace"];for(let r=0;r<n[t(312)];r++){const e=oe[t(329)].prototype[t(344)](oe),i=n[r],o=s[i]||e;e.__proto__=oe[t(344)](oe),e[t(342)]=o[t(342)].bind(o),s[i]=e}}))();const le=k({__name:ie(356),setup(t,{expose:e}){const s=ie,n=new(ne[s(319)]),i=new ee;i.addNamespace("THREE",I),i[s(320)](s(328),ne);const{renderer:r,camera:o,scene:a}=m(),c=(t,e)=>{const n=s,i=new(I[n(349)]);i[n(350)][n(272)](e);const o="./plugins/digitalPark/wareHouse/ember.png",a=(new(I[n(355)]))[n(347)](o),c=new bt(a,o);c[n(324)](1,0,0,1,1);const l=new(ne[n(326)])(!0,c,!0,I[n(300)]),h=new(ne[n(288)])(i,l,r[n(345)]);h.init(150),h[n(314)](new(ne[n(296)])(6));const u=new qt(I[n(352)],new(I[n(352)])(0,0),new(I[n(352)])(.15*t,.15*t),0,0,!1);h[n(303)](new Nt(3,1,0,0,!1)),h[n(303)](new(ne[n(334)])(u)),h.addParticleStateInitializer(new(ne[n(295)])(new A(.05*t,0,.05*t),new A(-.025*t,0,-.025*t))),h[n(303)](new Dt(new A(.4*t,.5*t,.4*t),new(I[n(283)])(-.2*t,.8*t,-.2*t),.6*t,.8*t,!1));h[n(335)](new(ne[n(297)]))[n(290)]([[0,0],[.7,.25],[.9,.75],[0,1]]);h[n(335)](new(ne[n(310)])(!0))[n(330)]([[[1,.7,0],0],[[1,.6,0],.5],[[1,.4,0],1]]);const p=new Qt(2*Math.PI,0,Math.PI,-Math.PI/2,20,-8,t,t,t,0,0,0);return h[n(335)](new(ne[n(348)])(p)),h[n(280)](!0),h[n(316)](),h},l=(t,e)=>{const n=s,i=new(I[n(349)]);i[n(350)][n(272)](e);const o="./plugins/digitalPark/wareHouse/base_flame.png",a=(new(I[n(355)]))[n(347)](o),c=new(ne[n(322)])(a,o);c[n(324)](18,0,0,.125,.25);const l=new(ne[n(326)])(!0,c,!0),h=new(ne[n(288)])(i,l,r.value);h[n(317)](50),h[n(314)](new(ne[n(296)])(10)),h[n(285)](0,18);const u=h[n(333)]();h[n(303)](new(ne[n(269)])(0,0,0,0,!1)),h.addParticleStateInitializer(new(ne[n(306)])(new qt(0,Math.PI/2,-Math.PI/2,0,0,!1))),h.addParticleStateInitializer(new(ne[n(279)])(1,-1,0,0,!1)),h.addParticleStateInitializer(new(ne[n(334)])(new(ne[n(343)])(I[n(352)],new(I[n(352)])(.25*t,.25*t),new(I[n(352)])(.5*t,.5*t),0,0,!1))),h[n(303)](new kt(new(I[n(283)])(.05*t,0,.05*t),new(I[n(283)])(-.025*t,0,-.025*t))),h[n(303)](new(ne[n(351)])(new(I[n(283)])(.05*t,.4*t,.05*t),new(I[n(283)])(-.025*t,.8*t,-.025*t),.35*t,.5*t,!1)),h[n(303)](new Xt(u)),h[n(335)](new(ne[n(336)])(u,.07,!1));h[n(335)](new(ne[n(297)])).addElements([[0,0],[.3,.25],[.3,.5],[0,1]]);h[n(335)](new(ne[n(327)])(!0))[n(330)]([[[.6,.6],0],[[1,1],.4],[[1,1],1]]);return h.addParticleStateOperator(new(ne[n(310)])(!0)).addElementsFromParameters([[[1,1,1],0],[[1.5,1.5,1.5],.5],[[1,1,1],1]]),h[n(335)](new(ne[n(348)])(new(ne[n(343)])(I[n(283)],new(I[n(283)])(0,0,0),new(I[n(283)])(0,1.5*t,0),0,0,!1))),h[n(280)](!0),h.start(),h},h=(t,e)=>{const n=s,i=new(I[n(349)]);i.position[n(272)](e);const o="./plugins/digitalPark/wareHouse/bright_flame.png",a=(new(I[n(355)])).load(o),c=new(ne[n(322)])(a,o);c[n(324)](16,0,0,212/1024,.25);const l=new(ne[n(326)])(!0,c,!0),h=new(ne[n(288)])(i,l,r.value);h[n(317)](20),h[n(314)](new(ne[n(296)])(5)),h.addParticleSequence(0,16);const u=h[n(333)]();h.addParticleStateInitializer(new(ne[n(269)])(0,0,0,0,!1)),h.addParticleStateInitializer(new _t(new qt(0,Math.PI,-Math.PI/2,0,0,!1))),h[n(303)](new(ne[n(279)])(Math.PI/2,-Math.PI/4,0,0,!1)),h[n(303)](new(ne[n(334)])(new(ne[n(343)])(b,new(I[n(352)])(0,0),new(I[n(352)])(0,0),.2*t,.65*t,!1))),h[n(303)](new(ne[n(295)])(new(I[n(283)])(.1*t,0,.1*t),new(I[n(283)])(-.05*t,0,-.05*t))),h.addParticleStateInitializer(new(ne[n(351)])(new(I[n(283)])(.02*t,.4*t,.02*t),new(I[n(283)])(-.01*t,.4*t,-.01*t),.1*t,.2*t,!1)),h[n(303)](new(ne[n(302)])(u)),h.addParticleStateOperator(new(ne[n(336)])(u,.1,!1));h[n(335)](new Gt)[n(290)]([[0,0],[.6,.2],[.5,.75],[0,1]]);h[n(335)](new Lt(!0))[n(330)]([[[.3,.3],0],[[1,1],.4],[[1,1],.55],[[.65,.65],.75],[[.1,.1],1]]);return h[n(335)](new(ne[n(310)])(!0))[n(330)]([[[1,1,1],0],[[2,2,2],.3],[[2,2,2],.4],[[.9,.6,.3],.65],[[.75,0,0],1]]),h[n(335)](new(ne[n(348)])(new(ne[n(343)])(A,new A(0,0,0),new(I[n(283)])(0,1.5*t,0),0,0,!1))),h[n(280)](!0),h[n(316)](),h},u=(t,e=10)=>{const n=s,i=new V;a[n(345)][n(307)](i),i.position[n(272)](t);return new(ne[n(308)])(i,e,2,(new(I[n(309)]))[n(286)](1,.8,.4),0,1,{mapSize:1024,cameraNear:.5,cameraFar:500,bias:9e-6,edgeRadius:3})},p=new A(-3.15,1.666,.6);n[s(289)](c(1,p)),n[s(289)](l(1,p)),n[s(289)](h(1,p)),n[s(268)](u(p,10));const{onBeforeLoop:d}=g();d((()=>{const t=s;n[t(277)](),n[t(340)](r[t(345)],o[t(345)])}));const f=()=>{const t=s;n[t(321)][3][t(331)][t(298)](),n[t(321)][4][t(331)][t(298)](),n[t(321)][5][t(331)][t(298)](),n[t(321)][t(323)](3,3),n[t(292)][t(276)][1][t(298)](),n[t(292)][t(276)].splice(1,1)};return e({addFire:()=>{const t=s,e=new A(-1.121,.88,4.723);n[t(289)](c(2.6,e)),n[t(289)](l(2.6,e)),n[t(289)](h(2.6,e)),n.addComponent(u(e,20))},removeFire:f,hideFire:()=>{const t=s;U.to(n.particleSystems[3],{duration:2,ease:"power1.out",activeParticleCount:0,roundProps:t(274),onUpdate:()=>{const e=t;console[e(325)](n[e(321)][3][e(274)]),n[e(321)][4][e(274)]=n[e(321)][3][e(274)],n[e(321)][5][e(274)]=n[e(321)][3][e(274)]},onComplete:()=>{const e=t;f(),console.log(e(301))}})}}),(t,e)=>null}});function he(t){function e(t){const s=ae;if(typeof t===s(287))return function(t){}[s(329)](s(293))[s(339)]("counter");1!==(""+t/t)[s(312)]||t%20==0?function(){return!0}.constructor("debu"+s(281))[s(266)](s(346)):function(){return!1}.constructor(s(337)+s(281))[s(339)](s(267)),e(++t)}try{if(t)return e;e(0)}catch(s){}}const ue=ge;!function(t,e){const s=ge,n=me();for(;;)try{if(784248===parseInt(s(400))/1*(parseInt(s(427))/2)+-parseInt(s(419))/3+parseInt(s(405))/4+-parseInt(s(401))/5*(-parseInt(s(423))/6)+parseInt(s(389))/7*(parseInt(s(432))/8)+parseInt(s(428))/9+parseInt(s(381))/10*(-parseInt(s(398))/11))break;n.push(n.shift())}catch(i){n.push(n.shift())}}();const pe=function(){let t=!0;return function(e,s){const n=t?function(){if(s){const t=s.apply(e,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){pe(this,(function(){const t=ge,e=new RegExp(t(394)),s=new RegExp(t(404),"i"),n=Se(t(407));e[t(429)](n+t(415))&&s[t(429)](n+t(437))?Se():n("0")}))()}();const de=function(){let t=!0;return function(e,s){const n=t?function(){if(s){const t=s.apply(e,arguments);return s=null,t}}:function(){};return t=!1,n}}();de(void 0,(function(){const t=ge;let e;try{e=Function("return (function() "+t(433)+");")()}catch(i){e=window}const s=e[t(403)]=e[t(403)]||{},n=[t(382),"warn",t(441),"error",t(388),"table",t(440)];for(let r=0;r<n[t(436)];r++){const e=de[t(409)][t(435)][t(380)](de),i=n[r],o=s[i]||e;e[t(417)]=de[t(380)](de),e[t(392)]=o[t(392)][t(380)](o),s[i]=e}}))();const fe=["object"];function me(){const t=["primitive","229853zgPuKd","241210GZvsGH","#include <common>","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5876916UvnmpK","action","init","dissolveSpeed","constructor","edgeColorTexture","./draco/","call","gger","uniforms","chain","forEach","__proto__","#include <dithering_fragment>\n                float distance = length(vPosition - vec3(-1.121, 0.88, 4.723));\n                if (vPosition.y > 0.0) {\n                    distance -= vPosition.y;\n                } else {\n                    distance += abs(vPosition.y)*0.1;\n                }\n                float noise = rand(vPosition.xy * 1.0);  // 通过缩放坐标生成更多噪声\n                distance += (noise - 0.5) * 0.02; // 将噪声引入distance计算，调整这个值可以控制锯齿强度\n                if((distance+0.9)<=0.9*dissolveProgress){\n                    vec4 color = texture2D(edgeColorTexture, vSphericalCoords);\n                    gl_FragColor = color;\n                }\n                ","3533085DjCTMT","shipWarehouse","#include <dithering_fragment>","transparent","114NjuYDM","material","void main() {","apply","10yVOisG","8527365mFCoRl","test","push","fragmentShader","8oOSrPQ",'{}.constructor("return this")( )',"onBeforeCompile","prototype","length","input","frustumCulled","void main() { vec3 pos = normalize(position); float theta = atan(pos.y, pos.x); float phi = acos(pos.z); vSphericalCoords = vec2((theta + PI) / (2.0 * PI), phi / PI);vPosition = (modelMatrix * vec4(position, 1.0)).xyz;","trace","info","vertexShader","bind","115130TUVaad","log","varying vec2 vSphericalCoords;varying vec3 vPosition;\n","debu","dissolveProgress","string","values","exception","2583903uwXwMA","replace","edgeColor","toString","value","function *\\( *\\)","Color","#include <common>\n                uniform float dissolveProgress;\n                uniform vec3 edgeColor;\n                uniform sampler2D edgeColorTexture;\n                varying vec2 vSphericalCoords;\n                varying vec3 vPosition;\n            ","#000000","2761EkMwsM"];return(me=function(){return t})()}function ge(t,e){const s=me();return(ge=function(t,e){return s[t-=380]})(t,e)}const we=k({__name:ue(420),async setup(t,{expose:e}){const s=ue;let n,i;const r={value:()=>{}},o={value:()=>{}};e({disappear:r,appear:o});const{scene:a,nodes:c}=([n,i]=B((()=>w("./plugins/digitalPark/wareHouse/shipWarehouse.glb",{draco:!0,decoderPath:s(411)}))),n=await n,i(),n),l=([n,i]=B((()=>S(["./plugins/digitalPark/wareHouse/dissolve.jpg"]))),n=await n,i(),n);let h=[],u=!1,p={dissolveProgress:0,edgeColorTexture:l},d=0;r.value=()=>{const t=s;if(!u){u=!0,d=-.003;for(let e of h)e[t(414)][t(408)]={value:d},e[t(414)][t(385)]={value:1}}},o.value=()=>{const t=s;if(!u){u=!0,d=.003;for(let e of h)e[t(414)].dissolveSpeed={value:d},e[t(414)].dissolveProgress={value:0}}},Object[s(387)](c)[s(416)]((t=>{const e=s;if(t.isMesh){t[e(438)]=!1;const s=t[e(424)];s[e(422)]=!0,s[e(434)]=t=>{const s=e;h[s(430)](t),t[s(414)][s(391)]={value:new(I[s(395)])(s(397))},t[s(414)].edgeWidth={value:.03},t[s(414)][s(408)]={value:d},t[s(414)][s(385)]={value:p[s(385)]},t.uniforms.edgeColorTexture={value:p[s(410)]},t.vertexShader=t[s(442)][s(390)](s(425),[s(383),s(439)].join("\n")),t[s(431)]=t.fragmentShader[s(390)](s(402),s(396)),t[s(431)]=t[s(431)][s(390)](s(421),s(418))}}}));const{onLoop:f}=g();return f((()=>{const t=s;if(u)for(let e of h){let{dissolveProgress:s,dissolveSpeed:n}=e[t(414)];s.value+=n[t(393)],console.log(s[t(393)]),s[t(393)]<0&&(u=!1),s[t(393)]>1&&(u=!1)}})),(t,e)=>{const n=s;return D(),X(n(399),{object:W(a)},null,8,fe)}}});function Se(t){function e(t){const s=ge;if(typeof t===s(386))return function(t){}[s(409)]("while (true) {}")[s(426)]("counter");1!==(""+t/t)[s(436)]||t%20==0?function(){return!0}[s(409)](s(384)+s(413))[s(412)](s(406)):function(){return!1}.constructor(s(384)+"gger")[s(426)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(s){}}const ye=Ce;!function(t,e){const s=Ce,n=Pe();for(;;)try{if(359853===parseInt(s(192))/1*(parseInt(s(210))/2)+parseInt(s(190))/3+parseInt(s(177))/4*(parseInt(s(165))/5)+parseInt(s(214))/6+parseInt(s(163))/7*(parseInt(s(171))/8)+parseInt(s(156))/9*(-parseInt(s(187))/10)+-parseInt(s(199))/11)break;n.push(n.shift())}catch(i){n.push(n.shift())}}();const ve=function(){let t=!0;return function(e,s){const n=t?function(){if(s){const t=s[Ce(211)](e,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){ve(this,(function(){const t=Ce,e=new RegExp(t(157)),s=new RegExp(t(179),"i"),n=Oe(t(161));e.test(n+"chain")&&s[t(159)](n+t(181))?Oe():n("0")}))()}();const xe=function(){let t=!0;return function(e,s){const n=t?function(){if(s){const t=s[Ce(211)](e,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Pe(){const t=["value","hideFire","constructor","30jJrFns","ring","table","491124KjQtrz","action","603917hVacun","bind","info","click","disappear","warn","group","20866494UylXPI","测试操作","tcRef","rotation-x","blue","addButton","TresSphereGeometry","origin","烧焦显示","length","TresCanvas","2QHoXEC","apply","addFolder","string","3609690VkSrEn","debu","PCFSoftShadowMap","prototype","燃烧结束","black","火源燃烧结束","TresAmbientLight","position","log","gger","TresPerspectiveCamera","error","391113VVPamF","function *\\( *\\)","circle","test",'{}.constructor("return this")( )',"init","shipWarehouseRef","7fOAxRB","trace","5965IzVmTJ","addFire","rotation","增加火源","BackSide","interactiveFire","3476488ncoRMg","TresGroup","__proto__","toString","stateObject","counter","1956NBayWi","iFireRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","normal","input","city","while (true) {}"];return(Pe=function(){return t})()}xe(void 0,(function(){const t=Ce;let e;try{e=Function("return (function() "+t(160)+");")()}catch(i){e=window}const s=e.console=e.console||{},n=[t(152),t(197),t(194),t(155),"exception",t(189),t(164)];for(let r=0;r<n[t(208)];r++){const e=xe.constructor[t(146)][t(193)](xe),i=n[r],o=s[i]||e;e[t(173)]=xe[t(193)](xe),e[t(174)]=o[t(174)][t(193)](o),s[i]=e}}))();const Ie=et(ye(154),{position:[-2,3,-4],fov:45,near:.1,far:1e4},null,-1),Ae=et(ye(150),{intensity:6},null,-1),Fe={key:0},be={rotation:[0,.5,0]},Te={ref:ye(198)},ze={scale:[100,100,100]},Ee=et(ye(205),{args:[1,64,64]},null,-1);function Ce(t,e){const s=Pe();return(Ce=function(t,e){return s[t-=144]})(t,e)}const Re=k({__name:ye(170),setup(t){const e=ye,s=J({shadows:!0,alpha:!0,shadowMap:!0,shadowMapType:I[e(145)],windowSize:!0}),n=J({enableDamping:!0,dampingFactor:.05}),i=[2,0,2,0,2,0,2,0],r=Y(null),o=Y(null),{pane:a}=y(),c=a[e(212)]({title:e(200)});return c.addButton({title:e(168)}).on(e(195),(()=>{const t=e;console[t(152)](t(168)),r.value[t(166)]()})),c.addButton({title:e(149)}).on(e(195),(()=>{const t=e;console[t(152)](t(147)),r[t(184)][t(185)]()})),G((()=>o.value),(()=>{const t=e;console[t(152)](t(162),o.value),c[t(204)]({title:t(207)}).on(t(195),(()=>{const e=t;o[e(184)].appear[e(184)]()})),c[t(204)]({title:"烧焦消失"}).on(t(195),(()=>{const e=t;o[e(184)][e(196)][e(184)]()}))})),(t,a)=>{const c=e,l=Z(c(209));return D(),L(l,it(s,{ref:c(201)}),{default:H((()=>[Ie,$(W(v),Q(K(n)),null,16),Ae,(D(),L(tt,null,{default:H((()=>[$(le,{ref_key:c(178),ref:r},null,512)])),_:1})),(D(),L(tt,null,{default:H((()=>[$(we,{ref_key:"shipWarehouseRef",ref:o},null,512)])),_:1})),(D(),L(tt,null,{default:H((()=>[$(W(_),{blur:1,background:"",far:1e4,preset:c(182)},{default:H((()=>[(D(),X(c(172),Fe,[$(W(j),{intensity:.75,"rotation-x":Math.PI/2,position:[0,5,-9],scale:[10,10,1]},null,8,[c(202)]),$(W(j),{"rotation-y":Math.PI/2,position:[-5,-1,-1],scale:[20,.5,1]},null,8,["rotation-y"]),$(W(j),{"rotation-y":-Math.PI/2,position:[10,1,0],scale:[20,11,1]},null,8,["rotation-y"]),$(W(x),{speed:5,floatFactor:2,rotationFactor:2},{default:H((()=>[$(W(j),{form:c(188),color:"red",intensity:1,scale:10,position:[-15,4,-18]})])),_:1}),et(c(172),be,[et(c(172),Te,[(D(),X(st,null,nt(i,((t,e)=>{const s=c;return $(W(j),{key:t,form:s(158),intensity:1,rotation:[Math.PI/2,0,0],position:[e,4,4*t],scale:[3,1,1]},null,8,[s(167),s(151)])})),64))],512)]),et("TresMesh",ze,[Ee,$(W(M),{side:I[c(169)]},{default:H((()=>[$(W(q),{color:"#444",alpha:1,mode:"normal"}),$(W(N),{colorA:c(203),colorB:c(148),alpha:.5,mode:c(180),near:0,far:300,origin:new A(100,100,100)},null,8,[c(206)])])),_:1},8,["side"])])]))])),_:1})])),_:1}))])),_:1},16)}}});function Oe(t){function e(t){const s=Ce;if(typeof t===s(213))return function(t){}[s(186)](s(183))[s(211)](s(176));1!==(""+t/t)[s(208)]||t%20==0?function(){return!0}[s(186)](s(144)+s(153)).call(s(191)):function(){return!1}[s(186)]("debu"+s(153)).apply(s(175)),e(++t)}try{if(t)return e;e(0)}catch(s){}}export{Re as default};

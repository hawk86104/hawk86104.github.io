import{o as e,a as n}from"./evtd.DtfwxtIl1723189171640.js";const t="@@mmoContext",d={mounted(n,{value:d}){n[t]={handler:void 0},"function"==typeof d&&(n[t].handler=d,e("mousemoveoutside",n,d))},updated(d,{value:o}){const s=d[t];"function"==typeof o?s.handler?s.handler!==o&&(n("mousemoveoutside",d,s.handler),s.handler=o,e("mousemoveoutside",d,o)):(d[t].handler=o,e("mousemoveoutside",d,o)):s.handler&&(n("mousemoveoutside",d,s.handler),s.handler=void 0)},unmounted(e){const{handler:d}=e[t];d&&n("mousemoveoutside",e,d),e[t].handler=void 0}},o="@@coContext",s={mounted(n,{value:t,modifiers:d}){n[o]={handler:void 0},"function"==typeof t&&(n[o].handler=t,e("clickoutside",n,t,{capture:d.capture}))},updated(t,{value:d,modifiers:s}){const a=t[o];"function"==typeof d?a.handler?a.handler!==d&&(n("clickoutside",t,a.handler,{capture:s.capture}),a.handler=d,e("clickoutside",t,d,{capture:s.capture})):(t[o].handler=d,e("clickoutside",t,d,{capture:s.capture})):a.handler&&(n("clickoutside",t,a.handler,{capture:s.capture}),a.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:d}=e[o];d&&n("clickoutside",e,d,{capture:t.capture}),e[o].handler=void 0}};const a=new class{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,n){const{elementZIndex:t}=this;if(void 0!==n)return e.style.zIndex="".concat(n),void t.delete(e);const{nextZIndex:d}=this;if(t.has(e)){if(t.get(e)+1===this.nextZIndex)return}e.style.zIndex="".concat(d),t.set(e,d),this.nextZIndex=d+1,this.squashState()}unregister(e,n){const{elementZIndex:t}=this;var d,o;t.has(e)?t.delete(e):void 0===n&&(d="z-index-manager/unregister-element",o="Element not found when unregistering.",console.error("[vdirs/".concat(d,"]: ").concat(o))),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort(((e,n)=>e[1]-n[1])),this.nextZIndex=2e3,e.forEach((e=>{const n=e[0],t=this.nextZIndex++;"".concat(t)!==n.style.zIndex&&(n.style.zIndex="".concat(t))}))}},i="@@ziContext",r={mounted(e,n){const{value:t={}}=n,{zIndex:d,enabled:o}=t;e[i]={enabled:!!o,initialized:!1},o&&(a.ensureZIndex(e,d),e[i].initialized=!0)},updated(e,n){const{value:t={}}=n,{zIndex:d,enabled:o}=t,s=e[i].enabled;o&&!s&&(a.ensureZIndex(e,d),e[i].initialized=!0),e[i].enabled=!!o},unmounted(e,n){if(!e[i].initialized)return;const{value:t={}}=n,{zIndex:d}=t;a.unregister(e,d)}};export{s as c,d as m,r as z};

import{_ as t,C as e}from"./three.bc6MLGU_1735031078130.js";import{e as n,W as r,U as o,c as a}from"./@tresjs.dTM0HLnZ1735031078130.js";import{a as s}from"./index.ENNhtf0D1735031078130.js";import"./index.u24q1OjD1735031078130.js";import{z as i}from"./three-custom-shader-material.uc9Xgl3q1735031078130.js";import{p as l}from"./gl-noise.BrVtymbx1735031078130.js";import{d as u,b as c,a3 as p,w as f,o as g,D as h,J as m,j as v,u as d,r as _,f as b,g as w,aj as j,ak as y,m as x,al as M}from"./@vue.-THQH3GC1735031078130.js";import{P as C}from"./tweakpane.yHWGBmom1735031078130.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.nKJHLuWx1735031078130.js";import"./@vueuse.COyzlgw71735031078130.js";import"./three-stdlib.2VgffRAZ1735031078130.js";import"./@pmndrs.jH1lDBFa1735031078130.js";import"./object-hash.USFlpBEa1735031078130.js";import"./@amap.FwSyOcr71735031078130.js";import"./jszip.B5akDNc61735031078130.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Nz9gzX6o1735031078130.js";import"./all.three.dnINst5u1735031078130.js";import"./oimophysics.x0jH7fze1735031078130.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.swOflITy1735031078130.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.MVIHKmBx1735031078130.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.FO7epHks1735031078130.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.wtdt0fH81735031078130.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.HfHXCZ_a1735031078130.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.evDBKkUj1735031078130.js";const S=O;!function(t,e){const n=O,r=T();for(;;)try{if(143455===-parseInt(n(495))/1+-parseInt(n(522))/2+-parseInt(n(514))/3*(-parseInt(n(489))/4)+parseInt(n(541))/5*(parseInt(n(503))/6)+-parseInt(n(530))/7*(parseInt(n(504))/8)+-parseInt(n(515))/9+parseInt(n(542))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function T(){const t=["value","function *\\( *\\)","125215Mqejds","3899390hjzvHZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","args","brightness","chain","waterColor","convertLinearToSRGB","Flatshading","826624LrZONg","console","TresMesh","waterHighlight","init","#52a7f7","252554sGCJOG","info","TresBoxGeometry","baseMaterial","apply","__proto__","action","exception","30hciHuU","152wYRaKf","vertex","log","prototype","warn","MeshPhysicalMaterial","debu","rotation-x","constructor","string","3pNNsFz","1474695hDbjPA","height","return (function() ","test","material","fragmentShader","fragment","283004wbzckE","customWaterMesh","DoubleSide","vertexShader","uHeight","Color","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","counter","7532PbAPGD","length","bind","trace","toString","gger","needsUpdate","#b3ffff","side"];return(T=function(){return t})()}!function(){I(this,(function(){const t=O,e=new RegExp(t(540)),n=new RegExp(t(543),"i"),r=F(t(493));e.test(r+t(485))&&n[t(518)](r+"input")?F():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=O;let e;try{e=Function(t(517)+'{}.constructor("return this")( ));')()}catch(o){e=window}const n=e[t(490)]=e[t(490)]||{},r=[t(506),t(508),t(496),"error",t(502),"table",t(533)];for(let a=0;a<r[t(531)];a++){const e=G.constructor[t(507)][t(532)](G),o=r[a],s=n[o]||e;e[t(500)]=G[t(532)](G),e.toString=s[t(534)].bind(s),n[o]=e}}))();const H=[S(511)],B=[S(545)];function O(t,e){const n=T();return(O=function(t,e){return n[t-=485]})(t,e)}const P=u({__name:S(523),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(494)},waterHighlight:{default:S(537)},brightness:{default:1},baseMaterial:{default:t[S(509)]}},setup(o){const a=S,s=o,u=c(null),_={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:a(528)},b={uTime:{value:0},waterColor:{value:new(t[a(527)])(s[a(486)])[a(487)]()},waterHighlight:{value:new(t[a(527)])(s.waterHighlight)[a(487)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[a(546)]},uHeight:{value:s.height}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=a;b.uTime[e(539)]=-t/5})),p((()=>{const t=a;s[t(516)]&&(b[t(526)].value=s.height),s[t(486)]&&(b[t(486)][t(539)]=new e(s.waterColor)[t(487)]()),s[t(492)]&&(b.waterHighlight[t(539)]=new e(s[t(492)])[t(487)]()),s.brightness&&(b[t(546)][t(539)]=s[t(546)])})),f((()=>s[a(488)]),(t=>{const e=a;u[e(539)].material[e(536)]=!0})),f((()=>s[a(498)]),(e=>{const n=a,r=new i({baseMaterial:t[e],vertexShader:l(_[n(505)]),fragmentShader:_.fragment,uniforms:b,flatShading:s.Flatshading,side:t[n(524)],roughness:.2,metalness:.1,silent:!0});u[n(539)][n(519)].dispose(),u[n(539)][n(519)]=r})),(e,n)=>{const o=a;return g(),h(o(491),{ref_key:"tmRef",ref:u,"rotation-x":-Math.PI/2},[m(o(497),{args:[5,5,e[o(516)],64,64,1]},null,8,B),v(d(r),{baseMaterial:t[o(509)],vertexShader:d(l)(_[o(505)]),fragmentShader:_[o(521)],uniforms:b,side:t[o(524)],roughness:.2,metalness:.1,flatShading:e[o(488)],silent:""},null,8,[o(498),o(525),o(520),o(538),"flatShading"])],8,H)}}});function F(t){function e(t){const n=O;if(typeof t===n(513))return function(t){}.constructor("while (true) {}")[n(499)](n(529));1!==(""+t/t)[n(531)]||t%20==0?function(){return!0}[n(512)](n(510)+n(535)).call(n(501)):function(){return!1}.constructor(n(510)+"gger").apply(n(544)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=A;function D(){const t=["水体颜色","1ChYjph","table","2485002GXuBoK","prototype","MeshToonMaterial","MeshStandardMaterial","3525720wqhonq","log","pos-z.jpg","pos-x.jpg","TresAmbientLight","MeshPhongMaterial","target","#52a7f7","counter","__proto__","3470264qJZlmk",'{}.constructor("return this")( )',"warn","customWater","44INwgRE","error","chain","TresDirectionalLight","#627179","MeshNormalMaterial","return (function() ","toString","172730KsiBuv","console","ACESFilmicToneMapping","info","MeshBasicMaterial","baseMaterial","454074OFpLSC","Flatshading","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","neg-x.jpg","addBinding","height","waterColor","init","stateObject","function *\\( *\\)","apply","bind","call","MeshPhysicalMaterial","#3a78a2","pos-y.jpg","#b3ffff","change","length","test","1064880SMvEjj","249468CzXxVx","MeshLambertMaterial","string","debu","value","浪头颜色","addBlade","MeshDepthMaterial","input","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/"];return(D=function(){return t})()}!function(t,e){const n=A,r=D();for(;;)try{if(310623===-parseInt(n(332))/1*(parseInt(n(299))/2)+-parseInt(n(321))/3+-parseInt(n(352))/4*(-parseInt(n(293))/5)+parseInt(n(334))/6+-parseInt(n(348))/7+parseInt(n(338))/8+-parseInt(n(320))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(310)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){k(this,(function(){const t=A,e=new RegExp(t(309)),n=new RegExp(t(302),"i"),r=E(t(307));e[t(319)](r+t(287))&&n[t(319)](r+t(329))?E():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(310)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(t,e){const n=D();return(A=function(t,e){return n[t-=286]})(t,e)}N(void 0,(function(){const t=A,e=function(){const t=A;let e;try{e=Function(t(291)+t(349)+");")()}catch(n){e=window}return e}(),n=e[t(294)]=e[t(294)]||{},r=[t(339),t(350),t(296),t(286),"exception",t(333),"trace"];for(let o=0;o<r[t(318)];o++){const e=N[t(301)][t(335)][t(311)](N),a=r[o],s=n[a]||e;e[t(347)]=N[t(311)](N),e[t(292)]=s[t(292)][t(311)](s),n[a]=e}}))();const R=u({__name:W(351),setup(e){const n=W,r=_({alpha:!0,toneMapping:t[n(295)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(289),sectionColor:n(314),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(345),waterHighlight:n(316),brightness:1,baseMaterial:n(313)}),c=new C;return c[n(304)](u,n(305),{label:"高度",min:.1,max:5,step:.1}),c[n(304)](u,n(306),{label:n(331)}),c[n(304)](u,"waterHighlight",{label:n(326)}),c.addBinding(u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c[n(304)](u,n(300),{label:n(300)}),c[n(327)]({view:"list",label:"材质",options:[{text:n(313),value:n(313)},{text:n(297),value:"MeshBasicMaterial"},{text:n(290),value:n(290)},{text:n(337),value:n(337)},{text:n(343),value:n(343)},{text:n(336),value:n(336)},{text:n(322),value:n(322)},{text:n(328),value:n(328)}],value:u[n(298)]}),c.on(n(317),(t=>{const e=n;"材质"===t[e(344)].label&&(u.baseMaterial=t[e(325)])})),(t,e)=>{const c=n;return g(),b(d(a),x(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=m("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(o),j(y(i)),null,16),e[1]||(e[1]=m(c(342),{intensity:.5},null,-1)),e[2]||(e[2]=m(c(288),{position:[15,15,15],intensity:1},null,-1)),v(P,j(y(u)),null,16),v(d(z),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(M,null,{default:w((()=>[v(d(s),{files:[c(341),c(303),c(315),"neg-y.jpg",c(340),"neg-z.jpg"],path:c(330)})])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=A;if(typeof t===n(323))return function(t){}[n(301)]("while (true) {}")[n(310)](n(346));1!==(""+t/t)[n(318)]||t%20==0?function(){return!0}[n(301)](n(324)+"gger")[n(312)]("action"):function(){return!1}.constructor("debugger")[n(310)](n(308)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

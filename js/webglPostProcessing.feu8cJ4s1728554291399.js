import{i as t}from"./ice-utils.BFFS2eKo1728554291399.js";import{c as n,o as e,_ as o,m as r}from"./gl-matrix.1JCPoTzf1728554291399.js";import{P as i}from"./tweakpane.yHWGBmom1728554291399.js";import{d as a,r as c,q as s,o as u,E as f,L as l,u as m}from"./@vue.JNsx1iN61728554291399.js";const _="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",d="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",x=b;!function(t,n){const e=b,o=g();for(;;)try{if(702729===parseInt(e(524))/1+-parseInt(e(447))/2*(parseInt(e(501))/3)+-parseInt(e(425))/4+-parseInt(e(520))/5+parseInt(e(464))/6+-parseInt(e(504))/7+parseInt(e(427))/8*(parseInt(e(461))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){E(this,(function(){const t=b,n=new RegExp(t(478)),e=new RegExp(t(435),"i"),o=A(t(514));n[t(519)](o+t(436))&&e[t(519)](o+t(512))?A():o("0")}))()}();const p=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[b(496)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["canvaswebgl","slider","debu","TEXTURE_MAG_FILTER","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","texParameteri","ELEMENT_ARRAY_BUFFER","__proto__","createFramebuffer","COLOR_ATTACHMENT0","uniform1f","inline","offset_right_top","FRAMEBUFFER","clear","42UwYIVU","TEXTURE_WRAP_S","FLOAT","drawElements","blendFunc","RGBA","gger","trace","exception","webgl","constructor","stateObject","texImage2D","hidden","6775281iwmibx","bindTexture","BLEND","6154722dZfQtN","table","addBlade","SRC_ALPHA","innerHeight","offset_left_bottom","framebufferTexture2D",'{}.constructor("return this")( )',"uModel","mixParam","TEXTURE_WRAP_T","NEAREST","change","BYTES_PER_ELEMENT","function *\\( *\\)","mat4","clearColor","scale","height","addBinding","counter","bindFramebuffer","offset_left_top","info","bindBuffer","offset_right_bottom","src","getContext","logo-texture","string","enableVertexAttribArray","createBuffer","apply","CLAMP_TO_EDGE","UNSIGNED_BYTE","uProjection","prototype","178941hqtPOC","error","ARRAY_BUFFER","8201921fhjOGR","useProgram","uView","width","create","getUniformLocation","img","translate","input","uniformMatrix4fv","init","call","TEXTURE_2D","console","innerWidth","test","4916020WFsfhv","COLOR_BUFFER_BIT","vertexAttribPointer","bufferData","1317371szLldV","canvas","toString","log","color","getElementById","4976684GrOFRK","querySelector","32IpTtay","bind","action","STATIC_DRAW"];return(g=function(){return t})()}p(void 0,(function(){const t=b;let n;try{n=Function("return (function() "+t(471)+");")()}catch(r){n=window}const e=n[t(517)]=n[t(517)]||{},o=[t(527),"warn",t(487),t(502),t(455),t(465),t(454)];for(let i=0;i<o.length;i++){const n=p[t(457)][t(500)][t(428)](p),r=o[i],a=e[r]||n;n[t(439)]=p[t(428)](p),n[t(526)]=a[t(526)].bind(a),e[r]=n}}))();const T={id:x(431)},R=[x(490)];function b(t,n){const e=g();return(b=function(t,n){return e[t-=425]})(t,n)}const y=a({__name:"webglPostProcessing",setup(a){const E=x;let p,g,b,y,A,h,v,w,F,P,C,I,B;const U=1,L=.71,S=.76,D=new i({title:"参数"}),N=c({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});D[E(466)]({view:E(432),label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=E;X(),g[n(442)](I,t.value)}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);D.addBinding(N,E(460),{label:"是否后处理"}),D.addBinding(N,E(444),{picker:E(443),x:{min:0,max:1},y:{min:0,max:1}}).on(E(476),(t=>{const n=E;M[0]=N[n(444)].x,M[1]=N[n(444)].y,X()})),D[E(483)](N,E(489),{picker:E(443),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(476),(t=>{M[5]=N.offset_right_bottom.x,M[6]=N.offset_right_bottom.y,X()})),D[E(483)](N,"offset_left_bottom",{picker:E(443),x:{min:-1,max:1},y:{min:-1,max:1}}).on(E(476),(t=>{const n=E;M[10]=N[n(469)].x,M[11]=N.offset_left_bottom.y,X()})),D.addBinding(N,E(486),{picker:E(443),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=E;M[15]=N.offset_left_top.x,M[16]=N[n(486)].y,X()})),s((()=>{O()}));const O=function(){const n=E;p=document[n(426)]("#canvaswebgl"),p[n(507)]=window[n(518)],p.height=window[n(468)],g=p[n(491)](n(456)),g&&(function(){const n=E,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);y=k(e,o),b=t(g,_,d),F=g[n(509)](b,n(499)),P=g[n(509)](b,n(506)),C=g[n(509)](b,n(472)),B=Y(document[n(529)](n(492)))}(),X(),g.enable(g[n(463)]),g[n(451)](g[n(467)],g.ONE_MINUS_SRC_ALPHA),j())};function j(){const t=E;g[t(485)](g[t(445)],v),g[t(480)](U,L,S,1),g[t(446)](g[t(521)]),function(){const t=E;g[t(505)](b),g[t(488)](g[t(503)],y);const r=n();e(r,0,p.width,p[t(482)],0,.1,100),g[t(513)](F,!1,r);const i=o[t(479)][t(508)]();o[t(479)].lookAt(i,[0,0,1],[0,0,0],[0,1,0]),g[t(513)](P,!1,i),G(B,600,600),G(B,400,400)}(),g[t(485)](g[t(445)],null),N[t(460)]&&(g.clear(g.COLOR_BUFFER_BIT),g[t(480)](0,0,1,1),g[t(488)](g[t(503)],A),g[t(505)](h),g[t(462)](g[t(516)],w)),g.drawElements(g.TRIANGLES,6,g[t(498)],0),requestAnimationFrame(j)}function G(t,e,i){const a=E;let c=n();o[a(479)][a(511)](c,c,[e,i,0]),r[a(481)](c,c,[250,250,0]),g[a(513)](C,!1,c),g[a(462)](g.TEXTURE_2D,t),g[a(450)](g.TRIANGLES,6,g[a(498)],0)}function X(){const n=E,e=new Uint8Array([0,1,2,0,2,3]);A=k(M,e),h=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),I=g[n(509)](h,n(473)),g[n(509)](h,n(528)),function(){const t=E;w=Y(p),v=g[t(440)](),g[t(485)](g[t(445)],v),g[t(470)](g[t(445)],g[t(441)],g[t(516)],w,0),g[t(485)](g[t(445)],null)}()}function Y(t){const n=E,e=g.createTexture();return g.bindTexture(g[n(516)],e),t instanceof HTMLImageElement?g[n(459)](g.TEXTURE_2D,0,g[n(452)],g[n(452)],g.UNSIGNED_BYTE,t):g[n(459)](g.TEXTURE_2D,0,g[n(452)],t[n(507)],t[n(482)],0,g[n(452)],g[n(498)],null),g.texParameteri(g[n(516)],g.TEXTURE_MIN_FILTER,g[n(475)]),g.texParameteri(g[n(516)],g[n(434)],g[n(475)]),g[n(437)](g[n(516)],g[n(448)],g[n(497)]),g[n(437)](g[n(516)],g[n(474)],g[n(497)]),e}function k(t,n){const e=E,o=g[e(495)]();g[e(488)](g[e(503)],o),g[e(523)](g[e(503)],t,g[e(430)]);const r=3*Float32Array.BYTES_PER_ELEMENT+2*Float32Array[e(477)];g[e(522)](0,3,g[e(449)],!1,r,0),g[e(494)](0),g[e(522)](1,2,g[e(449)],!1,r,3*Float32Array[e(477)]),g[e(494)](1);const i=g[e(495)]();return g[e(488)](g.ELEMENT_ARRAY_BUFFER,i),g[e(523)](g[e(438)],n,g[e(430)]),g[e(488)](g[e(503)],null),o}return(t,n)=>{const e=E;return u(),f(e(525),T,[l(e(510),{id:e(492),src:m("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,R)])}}});function A(t){function n(t){const e=b;if(typeof t===e(493))return function(t){}[e(457)]("while (true) {}").apply(e(484));1!==(""+t/t).length||t%20==0?function(){return!0}[e(457)](e(433)+e(453))[e(515)](e(429)):function(){return!1}[e(457)](e(433)+e(453)).apply(e(458)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{y as default};

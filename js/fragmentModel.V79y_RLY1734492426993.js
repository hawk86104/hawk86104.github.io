import{_ as n,a as t,C as o,cz as r}from"./three.-W-Avfc61734492426993.js";import{e,a,b as s,U as i}from"./@tresjs.WiFlZbqU1734492426993.js";import{P as c}from"./tweakpane.yHWGBmom1734492426993.js";import{d as u,a6 as l,r as p,b as f,w as m,o as g,D as v,J as d,aj as x,ak as y,u as h,e as w,f as b,g as C,j as I,al as z}from"./@vue.-THQH3GC1734492426993.js";import"./@vueuse.HnQgsJ961734492426993.js";const _=R;!function(n,t){const o=R,r=A();for(;;)try{if(342694===parseInt(o(426))/1+parseInt(o(436))/2*(-parseInt(o(393))/3)+-parseInt(o(410))/4+parseInt(o(390))/5*(-parseInt(o(405))/6)+parseInt(o(422))/7*(parseInt(o(379))/8)+parseInt(o(430))/9*(-parseInt(o(376))/10)+parseInt(o(391))/11*(parseInt(o(371))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const P=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[R(438)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){P(this,(function(){const n=R,t=new RegExp(n(435)),o=new RegExp(n(413),"i"),r=V("init");t[n(374)](r+n(421))&&o[n(374)](r+n(423))?V():r("0")}))()}();const j=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[R(438)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function A(){const n=["chain","63iFljIm","input","counter","random","508025sNJJoO","console","addBinding","traverse","657QxnsGf","TresMesh","divideScalar","bind","gger","function *\\( *\\)","5518OhSytW","exception","apply","count","attributes","aRandom","onLoop","m1Color","clone","mergeGeometries","return (function() ","info","while (true) {}","颜色1st","toNonIndexed","118740UWgmgs","children","rotateY","test","warn","22510lqsJGD","toNormal","string","185184jjshwV","sin","geometry","颜色2rd","call","tangent","uniforms","toPosition","scene","normal","log","5JyHHaZ","803mLePjw","#bcd4ff","249dJRlCO","#ffc0fa",'{}.constructor("return this")( )',"Color","rotateX","aCenter","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb","debu","action","toString","./draco/","disabled","2495622VxgysR","constructor","length","set","stateObject","1146964WmvnDB","BufferAttribute","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","Vector3","array","value","Mesh","setAttribute","position"];return(A=function(){return n})()}j(void 0,(function(){const n=R,t=function(){const n=R;let t;try{t=Function(n(446)+n(395)+");")()}catch(o){t=window}return t}(),o=t[n(427)]=t[n(427)]||{},r=[n(389),n(375),n(447),"error",n(437),n(412),n(414)];for(let e=0;e<r.length;e++){const t=j.constructor.prototype[n(433)](j),a=r[e],s=o[a]||t;t.__proto__=j.bind(j),t[n(402)]=s[n(402)][n(433)](s),o[a]=t}}))();const M=[_(381)],D=u({__name:"fragmentModelCom",async setup(i){const u=_;let w,b;const C=t=>{const o=R,e=[];return t[o(429)]((t=>{const r=o;t instanceof n[r(418)]&&(t[r(381)].deleteAttribute("uv"),t[r(381)].deleteAttribute(r(384)),e.push(t[r(381)]))})),r[o(445)](e)},I=C(([w,b]=l((()=>a(u(399),{draco:!0,decoderPath:u(403)}))),w=await w,b(),w)[u(387)].children[0]);I.rotateX(Math.PI/2),I.translate(0,-.9,0);const z=I[u(444)]()[u(450)](),P=C(([w,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:u(403)}))),w=await w,b(),w)[u(387)][u(372)][0]);P[u(397)](-Math.PI/2),P[u(373)](Math.PI/3);const j=P.clone()[u(450)](),A=z[u(440)].position[u(416)],D=z[u(440)][u(420)][u(439)],V=j[u(440)].position[u(416)],N=j.attributes[u(388)].array,F=j[u(440)].position.count,S=new Float32Array(D),B=new Float32Array(3*(D+2)),T=new Float32Array(3*(D+2)),U=new Float32Array(3*(D+2));for(let t=0;t<D;t+=3){const o=1*Math[u(425)](),r=t%F;S[t]=o,S[t+1]=o,S[t+2]=o;const e=3*t,a=A[e],s=A[e+1],i=A[e+2],c=A[e+3],l=A[e+4],p=A[e+5],f=A[e+6],m=A[e+7],g=A[e+8],v=new(n[u(415)])(a+c+f,s+l+m,i+p+g)[u(432)](3);B[u(408)]([v.x,v.y,v.z],3*t),B.set([v.x,v.y,v.z],3*(t+1)),B[u(408)]([v.x,v.y,v.z],3*(t+2));const d=(n,t,o)=>{const r=u,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(408)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(V,T,r),d(N,U,r)}z[u(419)](u(441),new(n[u(411)])(S,1)),z[u(419)](u(398),new t(B,3)),z[u(419)](u(386),new(n[u(411)])(T,3)),z[u(419)](u(377),new(n[u(411)])(U,3)),console[u(389)](z[u(440)]);const E=([w,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),w=await w,b(),w),J={uniforms:{u_progress:{value:-.1},matcap1:{value:E},m1Color:{type:"v3",value:new o(u(394))},matcap2:{value:E},m2Color:{type:"v3",value:new(n[u(396)])(u(392))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},O=p({c1:u(394),c2:"#bcd4ff"}),X=f(.5),Z=new c({title:"参数"});return Z.addBinding(J[u(385)].u_progress,"value",{label:"变化量",min:-.1,max:1,step:.001})[u(404)]=!0,Z.addBinding(O,"c1",{label:u(449)}),Z.addBinding(O,"c2",{label:u(382)}),Z[u(428)](X,u(417),{label:"速度",min:.001,max:1,step:.001}),m(O,(n=>{const t=u;J[t(385)][t(443)][t(417)][t(408)](n.c1),J[t(385)].m2Color[t(417)][t(408)](n.c2)}),{deep:!0}),e()[u(442)]((({elapsed:n})=>{const t=u;J.uniforms.u_progress[t(417)]=(Math[t(380)](n*X.value)+1)/2,Z.refresh()})),(n,t)=>{const o=u;return g(),v(o(431),{geometry:h(z)},[d("TresShaderMaterial",x(y(J)),null,16)],8,M)}}});function R(n,t){const o=A();return(R=function(n,t){return o[n-=371]})(n,t)}function V(n){function t(n){const o=R;if(typeof n===o(378))return function(n){}[o(406)](o(448))[o(438)](o(424));1!==(""+n/n)[o(407)]||n%20==0?function(){return!0}[o(406)](o(400)+"gger")[o(383)](o(401)):function(){return!1}[o(406)](o(400)+o(434))[o(438)](o(409)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function N(n,t){const o=S();return(N=function(n,t){return o[n-=224]})(n,t)}!function(n,t){const o=N,r=S();for(;;)try{if(251310===parseInt(o(250))/1*(-parseInt(o(227))/2)+parseInt(o(244))/3*(-parseInt(o(233))/4)+-parseInt(o(229))/5*(-parseInt(o(245))/6)+parseInt(o(241))/7+-parseInt(o(242))/8*(parseInt(o(226))/9)+parseInt(o(257))/10+parseInt(o(253))/11*(-parseInt(o(251))/12))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[N(237)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function S(){const n=["exception","22QXVXzp","debu","action","function *\\( *\\)","1360260aCUUjX","#000000","return (function() ","constructor","trace","log","console","length","prototype","313407NwXtTy","374BaFCRn","info","208295wNWxTF","table","while (true) {}","chain","157132Uuzxog","test","string","TresCanvas","apply","gger","bind","ACESFilmicToneMapping","3246642RoRqLr","56ejcKKe","input","21ezHaDO","66ByhwAP","call","warn","TresAmbientLight","toString","1069xzLApW","528756IVnsrD"];return(S=function(){return n})()}!function(){F(this,(function(){const n=N,t=new RegExp(n(256)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=U("init");t[n(234)](r+n(232))&&o[n(234)](r+n(243))?U():r("0")}))()}();const B=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,r}}();B(void 0,(function(){const n=N,t=function(){const n=N;let t;try{t=Function(n(259)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(263)]=t[n(263)]||{},r=[n(262),n(247),n(228),"error",n(252),n(230),n(261)];for(let e=0;e<r[n(224)];e++){const t=B[n(260)][n(225)][n(239)](B),a=r[e],s=o[a]||t;t.__proto__=B[n(239)](B),t[n(249)]=s.toString.bind(s),o[a]=t}}))();const T=u({__name:"fragmentModel",setup(t){const o=N,r=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:o(258),windowSize:!0,toneMapping:n[o(240)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=w(a(236));return g(),b(s,x(y(e)),{default:C((()=>[t[0]||(t[0]=d("TresPerspectiveCamera",{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),I(h(i),x(y(r)),null,16),t[1]||(t[1]=d(a(248),{intensity:2},null,-1)),(g(),b(z,null,{default:C((()=>[I(D)])),_:1}))])),_:1},16)}}});function U(n){function t(n){const o=N;if(typeof n===o(235))return function(n){}[o(260)](o(231)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(260)](o(254)+o(238))[o(246)](o(255)):function(){return!1}[o(260)](o(254)+"gger").apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{T as default};

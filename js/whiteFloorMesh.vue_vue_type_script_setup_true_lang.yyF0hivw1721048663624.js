import{a5 as t,bQ as n,ak as o,C as r}from"./three.HEgnMaTu1721048663624.js";import{N as e}from"./@tresjs.Xiq_TH801721048663624.js";import{d as a,b as c,a3 as s,w as i,o as u,D as l,J as f,aj as p,ak as h}from"./@vue.ApkyOKE71721048663624.js";!function(t,n){const o=m,r=w();for(;;)try{if(994926===-parseInt(o(323))/1*(parseInt(o(296))/2)+-parseInt(o(326))/3*(-parseInt(o(302))/4)+parseInt(o(287))/5*(-parseInt(o(297))/6)+-parseInt(o(319))/7+parseInt(o(316))/8*(-parseInt(o(311))/9)+-parseInt(o(320))/10+parseInt(o(304))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,r}}();!function(){d(this,(function(){const t=m,n=new RegExp(t(312)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=x("init");n[t(290)](r+"chain")&&o[t(290)](r+t(322))?x():r("0")}))()}();const g=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,r}}();function m(t,n){const o=w();return(m=function(t,n){return o[t-=284]})(t,n)}g(void 0,(function(){const t=m,n=function(){const t=m;let n;try{n=Function(t(331)+t(288)+");")()}catch(o){n=window}return n}(),o=n[t(325)]=n.console||{},r=["log",t(299),"info",t(330),t(301),"table",t(328)];for(let e=0;e<r[t(317)];e++){const n=g[t(285)][t(294)][t(315)](g),a=r[e],c=o[a]||n;n[t(303)]=g[t(315)](g),n[t(332)]=c[t(332)][t(315)](c),o[a]=n}}))();const v=()=>{const o=m;return"\n       varying vec2 vUv;\n\t\t\t \t"+t[o(329)][o(308)]+o(305)+t[o(329)][o(318)]+"\n      \t"+n[o(291)]+o(289)+t[o(329)][o(309)]+o(321)+t[o(329)][o(298)]+o(321)+t[o(329)][o(307)]+o(321)+n[o(293)]+"\n          "+n[o(284)]+"\n          "+t[o(329)].shadowmap_vertex+o(295)};function w(){const t=["length","bsdfs","3586044cMPxBE","10035960zNMbzh","\n          ","input","30uxROzg","apply","console","54669wdMecR","string","trace","ShaderChunk","error","return (function() ","toString","worldpos_vertex","constructor","lights_pars_begin","20yPVezB",'{}.constructor("return this")( )',"\n       void main() {\n\t\t\t\t\t","test","shadowmap_pars_vertex","stateObject","project_vertex","prototype","\n\n           gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);    \n           vUv = uv;\n       }","29102oYWyPC","2960778ioYDKu","defaultnormal_vertex","warn","counter","exception","12JknBfC","__proto__","74018747AhaWnm","\n      \t","debu","begin_vertex","common","beginnormal_vertex","\n\t ","45VgkpQE","function *\\( *\\)","gger","shadowmap_pars_fragment","bind","2979920YlBdQI"];return(w=function(){return t})()}const _=()=>{const o=m;return"\n\tvarying vec2 vUv;\n\tuniform sampler2D uTexture;\n\tuniform vec3 uShadowColor;\n\tuniform vec3 uColor;\n\tuniform float fEdge;\n\t// ShaderMaterial 下的 纹理参数重复无效 要在着色器中增加\n\tfloat repeatTime = 100.0;\n\n\tfloat smoothsteps(float t) {\n\t\t\treturn t * t * (3.0 - 2.0 * t);\n\t}\n\n\t "+n[o(308)]+o(310)+t[o(329)].packing+o(310)+t[o(329)][o(318)]+o(310)+t[o(329)][o(286)]+o(310)+t[o(329)][o(314)]+o(310)+t[o(329)].shadowmask_pars_fragment+"\n\n\tvoid main() {\n\t\t\tvec4 col = texture2D(uTexture, vUv * repeatTime);\n\t\t\tcol.rgb = mix( uColor , col.rgb ,0.5);\n\t\t\t\n\t\t\tfloat alpha = 1.0;\n\t\t\tfloat d = length(vUv - vec2(0.5));\n\t\t\tif(d > 0.35) {\n\t\t\t\t\talpha = 1.0 - smoothsteps( clamp( (d - 0.35) / (fEdge-0.2), 0.0, 1.0) );\n\t\t\t}\n\n\t\t vec3 addShadow = mix( uShadowColor , col.rgb ,getShadowMask());\n\n\t\t\tgl_FragColor = vec4(addShadow, alpha);  \n\t}"};function x(t){function n(t){const o=m;if(typeof t===o(327))return function(t){}[o(285)]("while (true) {}").apply(o(300));1!==(""+t/t)[o(317)]||t%20==0?function(){return!0}[o(285)](o(306)+o(313)).call("action"):function(){return!1}[o(285)](o(306)+o(313))[o(324)](o(292)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const I=k;!function(t,n){const o=k,r=j();for(;;)try{if(859180===-parseInt(o(528))/1*(parseInt(o(520))/2)+parseInt(o(477))/3+-parseInt(o(529))/4*(-parseInt(o(490))/5)+parseInt(o(495))/6*(-parseInt(o(524))/7)+parseInt(o(519))/8+-parseInt(o(489))/9+parseInt(o(526))/10*(parseInt(o(525))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[k(483)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=k,n=new RegExp(t(518)),o=new RegExp(t(527),"i"),r=z("init");n[t(501)](r+t(474))&&o[t(501)](r+t(479))?z():r("0")}))()}();const y=function(){let t=!0;return function(n,o){const r=t?function(){if(o){const t=o[k(483)](n,arguments);return o=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=k;let n;try{n=Function("return (function() "+t(486)+");")()}catch(e){n=window}const o=n[t(484)]=n[t(484)]||{},r=[t(514),t(509),t(522),t(521),t(513),"table",t(506)];for(let a=0;a<r[t(507)];a++){const n=y[t(515)][t(475)][t(488)](y),e=r[a],c=o[e]||n;n[t(508)]=y[t(488)](y),n[t(494)]=c[t(494)][t(488)](c),o[e]=n}}))();const S=["rotation-x"],C=[I(500)];function j(){const t=["whiteFloorMesh","input","uniforms","merge","size","apply","console","wrapT",'{}.constructor("return this")( )',"RepeatWrapping","bind","13070817tTGSdM","7445465UZerTO","wrapS","edge","debu","toString","39786RouZjo","tmRef","call","gger","DoubleSide","args","test","shadowColor","fEdge","TresPlaneGeometry","uColor","trace","length","__proto__","warn","color","while (true) {}","TresShaderMaterial","exception","log","constructor","Color","#999","function *\\( *\\)","10520176DLSXzl","2666968iWgIUK","error","info","UniformsUtils","1239chRSJi","16723674xZikSm","10qribwc","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1vbnxnw","4cogDGK","chain","prototype","value","1482645bLPjnd"];return(j=function(){return t})()}function k(t,n){const o=j();return(k=function(t,n){return o[t-=474]})(t,n)}const M=a({__name:I(478),props:{size:{default:[20,20]},color:{default:"#990"},shadowColor:{default:I(517)},edge:{default:.35}},async setup(n){const a=I;let d,g;const m=n,w=c(),{map:x}=([d,g]=s((()=>e({map:"./plugins/floor/image/whiteFloor.jpg"}))),d=await d,g(),d);x[a(491)]=x[a(485)]=t[a(487)];const b={uniforms:t[a(523)][a(481)]([o.lights,{uTexture:{type:"t",value:x},uColor:{value:new(t[a(516)])(m[a(510)])},uShadowColor:{value:new r(m[a(502)])},fEdge:{type:"f",value:m[a(492)]}}]),side:t[a(499)],vertexShader:v(),fragmentShader:_(),lights:!0,transparent:!0};return i((()=>m.edge),(t=>{const n=a;b[n(480)][n(503)].value=t})),i((()=>m.color),(n=>{const o=a;b[o(480)][o(505)][o(476)]=new(t[o(516)])(m.color)})),i((()=>m[a(502)]),(n=>{const o=a;b[o(480)].uShadowColor[o(476)]=new(t[o(516)])(m.shadowColor)})),(t,n)=>{const o=a;return u(),l("TresMesh",{ref_key:o(496),ref:w,"rotation-x":-Math.PI/2},[f(o(504),{args:m[o(482)]},null,8,C),f(o(512),p(h(b)),null,16)],8,S)}}});function z(t){function n(t){const o=k;if("string"==typeof t)return function(t){}[o(515)](o(511))[o(483)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[o(515)](o(493)+o(498))[o(497)]("action"):function(){return!1}[o(515)](o(493)+o(498))[o(483)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{M as _};

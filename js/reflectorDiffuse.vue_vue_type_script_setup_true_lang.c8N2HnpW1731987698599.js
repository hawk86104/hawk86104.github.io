import{c0 as t,a3 as n,C as e,k as r}from"./three.3RwiW87x1731987698599.js";import{b as o}from"./@tresjs.juy9qkLz1731987698599.js";import{R as c}from"./all.three.rO0xEheM1731987698599.js";import{d as i,b as a,a6 as s,a3 as u,o as f,D as l,J as p,m,u as v}from"./@vue.-THQH3GC1731987698599.js";!function(t,n){const e=y,r=g();for(;;)try{if(914911===parseInt(e(387))/1+parseInt(e(411))/2*(-parseInt(e(404))/3)+parseInt(e(417))/4+-parseInt(e(388))/5*(parseInt(e(412))/6)+parseInt(e(376))/7*(parseInt(e(402))/8)+-parseInt(e(401))/9+-parseInt(e(399))/10*(-parseInt(e(375))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const d=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(408)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["2290687VKEhwi","void main() {","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","test","error","replace","bind","prototype","fragmentShader","while (true) {}","#include <emissivemap_fragment>","1280635PaIYsw","80UUgeeG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","constructor","trace","stateObject","exception","return (function() ","#include <project_vertex>","__proto__","string","71140GDHSfk",'{}.constructor("return this")( )',"12624057oOpjcZ","8TUXffG","toString","3MorglH","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","chain","info","apply","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","gger","3057926yBEucw","61416XomvXK","console","call","table","input","5540580XdocgW","log","vertexShader","function *\\( *\\)","1573SPNpBh"];return(g=function(){return t})()}!function(){d(this,(function(){const t=y,n=new RegExp(t(374)),e=new RegExp(t(389),"i"),r=x("init");n[t(379)](r+t(406))&&e[t(379)](r+t(416))?x():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(408)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function y(t,n){const e=g();return(y=function(t,n){return e[t-=373]})(t,n)}h(void 0,(function(){const t=y,n=function(){const t=y;let n;try{n=Function(t(395)+t(400)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(413)]||{},r=[t(418),"warn",t(407),t(380),t(394),t(415),t(392)];for(let o=0;o<r.length;o++){const n=h[t(391)][t(383)][t(382)](h),c=r[o],i=e[c]||n;n[t(397)]=h[t(382)](h),n[t(403)]=i[t(403)][t(382)](i),e[c]=n}}))();function x(t){function n(t){const e=y;if(typeof t===e(398))return function(t){}.constructor(e(385))[e(408)]("counter");1!==(""+t/t)[e(390)]||t%20==0?function(){return!0}[e(391)]("debu"+e(410))[e(414)]("action"):function(){return!1}[e(391)]("debu"+e(410)).apply(e(393)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=I;!function(t,n){const e=I,r=S();for(;;)try{if(710594===parseInt(e(225))/1+parseInt(e(187))/2*(parseInt(e(194))/3)+parseInt(e(195))/4+parseInt(e(198))/5+-parseInt(e(200))/6+-parseInt(e(184))/7*(-parseInt(e(189))/8)+-parseInt(e(185))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(226)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=I,n=new RegExp(t(222)),e=new RegExp(t(188),"i"),r=E(t(193));n[t(232)](r+t(197))&&e[t(232)](r+"input")?E():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[I(226)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function I(t,n){const e=S();return(I=function(t,n){return e[t-=170]})(t,n)}b(void 0,(function(){const t=I,n=function(){const t=I;let n;try{n=Function(t(196)+t(229)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(206)]||{},r=[t(181),t(224),t(212),t(216),t(172),t(171),t(218)];for(let o=0;o<r[t(209)];o++){const n=b[t(191)][t(220)][t(178)](b),c=r[o],i=e[c]||n;n[t(213)]=b[t(178)](b),n[t(231)]=i.toString[t(178)](i),e[c]=n}}))();const C=[_(201)],M=["object",_(214)];function S(){const t=["TresGroup","onBeforeCompile","textureMatrix","bind","action","reflectMap","log","stateObject","showGridHelper","7KVoAGC","17620020IQBnbt","tmsmRef","223696zEsFgB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","96808ECLEPh","mixStrength","constructor","uv1","init","6WyvDyi","4476024oroLUv","return (function() ","chain","2110835MQIagS","renderTargetUniform","2862972gUJHyk","rotation-x","call","update","channel","wrapT","console","debu","uniforms","length","aoMap","string","info","__proto__","visible","wrapS","error","#ffffff","trace","onBeforeRender","prototype","assign","function *\\( *\\)","TresMesh","warn","1368566HicHqG","apply","value","counter",'{}.constructor("return this")( )',"TresMeshStandardMaterial","toString","test","gger","color","reflectorDiffuse","table","exception","tmRef","while (true) {}"];return(S=function(){return t})()}const j=i({__name:_(170),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:_(217)}},async setup(i){const d=_;let g,h;const x=i,w=new t(9.5,10),b=a(),I=a(),S=a(),j=new c,E={mirror:{value:x.mirror},mixStrength:{value:x[d(190)]}},z=([g,h]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,h(),g);for(var T=0;T<3;T++)z[T][d(215)]=n,z[T][d(205)]=n,z[T].repeat.set(16,16);const G={color:new e("#444"),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},U=t=>{const n=d;t[n(208)][n(180)]=j[n(199)],t[n(208)][n(177)]=j.textureMatrixUniform,t.uniforms=Object[n(221)](t[n(208)],E),(t=>{const n=y;t[n(373)]=t[n(373)][n(381)](n(377),n(378)),t[n(373)]=t.vertexShader[n(381)](n(396),n(409))})(t),(t=>{const n=y;t[n(384)]=t[n(384)].replace(n(377),n(405)),t[n(384)]=t[n(384)][n(381)](n(386),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=d;b[t(227)]&&(b[t(227)].attributes[t(192)]=b[t(227)].attributes.uv),S[t(227)]&&(S[t(227)][t(210)][t(204)]=1,S[t(227)][t(176)]=U),I[t(227)]&&(I[t(227)].add(j),I.value[t(219)]=(n,e,r)=>{j[t(203)](n,e,r)}),x.color&&S[t(227)]&&(S[t(227)][t(234)]=new e(x[t(234)]))})),(t,n)=>{const e=d;return f(),l(e(175),null,[p(e(223),{ref_key:e(173),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:"tpgRef",ref:b,args:[10,10]},null,512),p(e(230),m({ref_key:e(186),ref:S},G),null,16)],8,C),p("primitive",{object:v(w),visible:t[e(183)]},null,8,M)])}}});function E(t){function n(t){const e=I;if(typeof t===e(211))return function(t){}[e(191)](e(174)).apply(e(228));1!==(""+t/t)[e(209)]||t%20==0?function(){return!0}[e(191)](e(207)+e(233))[e(202)](e(179)):function(){return!1}[e(191)](e(207)+e(233)).apply(e(182)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

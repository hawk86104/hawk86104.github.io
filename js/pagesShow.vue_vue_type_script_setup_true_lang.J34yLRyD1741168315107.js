import{a0 as t,_ as n,C as e,cm as o,cn as r,co as i,cp as s,l as u,c1 as c,ak as a,am as l}from"./three.FxqAALWt1741168315107.js";import{P as f,e as p,o as d}from"./@tresjs.Ea5Oq_-I1741168315107.js";import{z as h}from"./three-custom-shader-material.q4QTPw9f1741168315107.js";import{b as g,a as m}from"./buildingsCustomShaderMaterial.hq-IAd4G1741168315107.js";import{d as y,b as w,a2 as b,w as I,o as _,H as v,u as C,r as x,a3 as A,e as R,f as S,g as B,N as j,j as k,aj as T,ak as z,F as M,M as O,J as E,m as F}from"./@vue.NRI7TcgI1741168315107.js";!function(t,n){const e=U,o=W();for(;;)try{if(947160===parseInt(e(259))/1*(parseInt(e(282))/2)+-parseInt(e(287))/3+parseInt(e(255))/4*(-parseInt(e(264))/5)+-parseInt(e(262))/6+parseInt(e(263))/7+-parseInt(e(260))/8+parseInt(e(279))/9*(parseInt(e(265))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(281)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){H(this,(function(){const t=U,n=new RegExp(t(288)),e=new RegExp(t(284),"i"),o=G(t(290));n[t(257)](o+t(266))&&e[t(257)](o+"input")?G():o("0")}))()}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(t,n){const e=W();return(U=function(t,n){return e[t-=253]})(t,n)}function W(){const t=["init","trace","constructor","12WNnNld","toString","test","console","253bOGBZI","8066992CTPzJA","counter","4398660YeLUzS","2362801VohEDA","625660XgRLof","2350JTziVj","chain","bind","debu","while (true) {}","table",'{}.constructor("return this")( )',"name","info","__proto__","traverse","action","string","error","77859PUgqgN","length","apply","9606svAPSP","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","prototype","1564941whtDtJ","function *\\( *\\)","warn"];return(W=function(){return t})()}L(void 0,(function(){const t=U,n=function(){const t=U;let n;try{n=Function("return (function() "+t(271)+");")()}catch(e){n=window}return n}(),e=n[t(258)]=n.console||{},o=["log",t(289),t(273),t(278),t(285),t(270),t(253)];for(let r=0;r<o[t(280)];r++){const n=L.constructor[t(286)].bind(L),i=o[r],s=e[i]||n;n[t(274)]=L[t(267)](L),n[t(256)]=s[t(256)][t(267)](s),e[i]=n}}))();const Z=async()=>{const t=U,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(275)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n.name&&(e=n),"LANDMASS"===n[i(272)]&&(o=n),"ROADS"===n.name&&(r=n)})),{model:n,city:e,land:o,roads:r}};function G(t){function n(t){const e=U;if(typeof t===e(277))return function(t){}.constructor(e(269))[e(281)](e(261));1!==(""+t/t)[e(280)]||t%20==0?function(){return!0}[e(254)]("debu"+e(283)).call(e(276)):function(){return!1}.constructor(e(268)+e(283))[e(281)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const D=N;!function(t,n){const e=N,o=V();for(;;)try{if(317067===-parseInt(e(450))/1*(-parseInt(e(442))/2)+parseInt(e(479))/3*(-parseInt(e(446))/4)+parseInt(e(462))/5+parseInt(e(492))/6+-parseInt(e(453))/7+parseInt(e(499))/8*(-parseInt(e(494))/9)+parseInt(e(485))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(473)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=N,n=new RegExp(t(480)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=Y("init");n.test(o+t(486))&&e.test(o+t(475))?Y():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(473)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function V(){const t=["topColor","DoubleSide","430072fKwlMW","clone","429302kERhVS","renderOrder","toString","city","120844SbbRWH","bind","side","#ffff00","1EuKCst","debu","constructor","3899000kkbkrP","value","warn","land","primitive","return (function() ","trace",'{}.constructor("return this")( )',"computeBoundingBox","480970woEznp","counter","length","uniforms","table","error","__proto__","prototype","string","buildingsModelCustomShader","console","apply","Color","input","#ffffff","bulidingsColor","setStyle","51stBsBW","function *\\( *\\)","log","gradient","gger","color","11197210IFpGRu","chain","model","material","uColor","exception","action","2322960MYreGr","#e523ff","72wxqccA","landColor","opacity"];return(V=function(){return t})()}function N(t,n){const e=V();return(N=function(t,n){return e[t-=441]})(t,n)}$(void 0,(function(){const t=N;let n;try{n=Function(t(458)+t(460)+");")()}catch(r){n=window}const e=n[t(472)]=n[t(472)]||{},o=[t(481),t(455),"info",t(467),t(490),t(466),t(459)];for(let i=0;i<o[t(464)];i++){const n=$.constructor[t(469)][t(447)]($),r=o[i],s=e[r]||n;n[t(468)]=$[t(447)]($),n[t(444)]=s[t(444)][t(447)](s),e[r]=n}}))();const q=["object"],X=y({__name:D(471),props:{model:{},bulidingsColor:{default:D(493)},landColor:{default:"#112233"},topColor:{default:D(449)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=D,i=o,s=w(0),u=i[r(487)][r(445)];u[r(443)]=1001;const c=i[r(487)].land;(()=>{const t=r,{geometry:o}=u;o[t(461)](),o.computeBoundingSphere();const{max:c,min:a}=o.boundingBox;if(u[t(488)].__csm)return;const l=new h({baseMaterial:u[t(488)],vertexShader:g,fragmentShader:m,silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[t(474)])(i[t(477)])},uOpacity:{value:i[t(496)]},uLightColor:{value:new e(t(476))},uTopColor:{value:new(n[t(474)])(i[t(497)])},uTime:s,uGradient:{value:i[t(482)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n[t(498)]});u[t(488)].dispose(),u[t(488)]=l})();const{onLoop:a}=p();a((({delta:t})=>{s.value+=t})),b((()=>{const n=r;i[n(477)]&&u.material[n(465)][n(489)][n(454)][n(478)](i[n(477)]),i[n(495)]&&((n,e)=>{const o=r;let s;"cu"===n||n===o(456)&&(s=Array.isArray(c.material)?c[o(488)]:[c[o(488)]],s.forEach((n=>{const r=o;n[e][r(478)](i[r(495)]),n[r(448)]=t})))})(n(456),n(484)),i[n(496)]&&(u[n(488)].uniforms.uOpacity[n(454)]=i[n(496)])})),I(i,((t,n)=>{const e=r;u[e(488)][e(465)].uGradient[e(454)]=t.gradient}));const l=i.model[r(487)][r(441)]();return(t,n)=>{const e=r;return _(),v(e(457),{object:C(l)},null,8,q)}}});function Y(t){function n(t){const e=N;if(typeof t===e(470))return function(t){}[e(452)]("while (true) {}")[e(473)](e(463));1!==(""+t/t)[e(464)]||t%20==0?function(){return!0}[e(452)](e(451)+e(483)).call(e(491)):function(){return!1}[e(452)](e(451)+"gger").apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const J=K;function K(t,n){const e=et();return(K=function(t,n){return e[t-=342]})(t,n)}!function(t,n){const e=K,o=et();for(;;)try{if(537586===parseInt(e(380))/1+parseInt(e(400))/2*(parseInt(e(376))/3)+parseInt(e(386))/4+-parseInt(e(395))/5+-parseInt(e(353))/6*(parseInt(e(394))/7)+-parseInt(e(399))/8*(-parseInt(e(396))/9)+-parseInt(e(349))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(389)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Q(this,(function(){const t=K,n=new RegExp(t(361)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=rt("init");n[t(393)](o+t(397))&&e[t(393)](o+t(385))?rt():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(389)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=K,n=function(){const t=K;let n;try{n=Function(t(363)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(350)]=n[t(350)]||{},o=[t(377),t(381),t(362),t(369),t(356),t(391),t(343)];for(let r=0;r<o[t(365)];r++){const n=tt.constructor[t(370)].bind(tt),i=o[r],s=e[i]||n;n[t(382)]=tt[t(371)](tt),n[t(392)]=s[t(392)][t(371)](s),e[i]=n}}))();const nt=[J(372)];function et(){const t=["9961iqYKUt","5214755UhORMS","9prVrrQ","chain","clone","6425768cRnUkq","48rCvZzs","material","trace","set","opacity","geometry","stateObject","string","10095080galfzA","console","applyMatrix4","style","288RmclAV","debu","value","exception","uOpacity","width","uColor","gger","function *\\( *\\)","info","return (function() ","innerWidth","length","linewidth","Wireframe","uniforms","error","prototype","bind","object","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","primitive","color","9939zAHUOF","log","while (true) {}","counter","903310tVkpWi","warn","__proto__","Shader","builds","input","3489224kByAay","action","constructor","apply","call","table","toString","test"];return(et=function(){return t})()}const ot=y({__name:"buildingsLines",props:{builds:{},width:{default:1},color:{default:"#FFF"},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const n=J,c=t;let a=null,l=null;if(c[n(352)]===n(367)){const t=new o(c[n(384)][n(346)]);let e=(new r).fromEdgesGeometry(t),u=new i({color:c[n(375)],linewidth:c[n(358)],opacity:c.opacity,transparent:!0,depthWrite:!0,depthTest:!0});u.resolution[n(344)](window[n(364)],window.innerHeight),a=new s(e,u),a[n(351)](c[n(384)].matrix[n(398)]())}else{l={transparent:!0,uniforms:{uColor:{value:new e(c.color)},uOpacity:{value:c[n(345)]}},vertexShader:n(373),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new o(c.builds[n(346)]),r=new u(l);a=new LineSegments(t,r),a[n(351)](c.builds.matrix[n(398)]()),a[n(342)][n(366)]=c[n(358)],a.renderOrder=1e3}return b((()=>{const t=n;c[t(352)]===t(383)&&(c[t(375)]&&(l.uniforms[t(359)][t(355)]=new e(c[t(375)])),c[t(345)]&&(l[t(368)][t(357)][t(355)]=c[t(345)])),c[t(352)]===t(367)&&(c[t(375)]&&(a.material[t(375)]=new e(c.color)),c[t(345)]&&(a[t(342)].opacity=c[t(345)])),c[t(358)]&&(a[t(342)][t(366)]=c[t(358)])})),(t,e)=>{const o=n;return _(),v(o(374),{object:C(a)},null,8,nt)}}});function rt(t){function n(t){const e=K;if(typeof t===e(348))return function(t){}[e(388)](e(378))[e(389)](e(379));1!==(""+t/t)[e(365)]||t%20==0?function(){return!0}[e(388)](e(354)+e(360))[e(390)](e(387)):function(){return!1}[e(388)](e(354)+e(360))[e(389)](e(347)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=ut;!function(t,n){const e=ut,o=ft();for(;;)try{if(566914===-parseInt(e(212))/1*(-parseInt(e(223))/2)+parseInt(e(246))/3*(parseInt(e(255))/4)+-parseInt(e(245))/5+-parseInt(e(225))/6*(-parseInt(e(209))/7)+-parseInt(e(258))/8+parseInt(e(250))/9+parseInt(e(229))/10*(-parseInt(e(230))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(254)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(t,n){const e=ft();return(ut=function(t,n){return e[t-=209]})(t,n)}!function(){st(this,(function(){const t=ut,n=new RegExp(t(217)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=dt(t(244));n[t(214)](o+t(216))&&e.test(o+t(218))?dt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(254)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=ut,n=function(){const t=ut;let n;try{n=Function(t(242)+t(227)+");")()}catch(e){n=window}return n}(),e=n[t(237)]=n[t(237)]||{},o=[t(248),"warn",t(215),"error",t(233),t(219),t(252)];for(let r=0;r<o[t(238)];r++){const n=ct[t(240)][t(257)].bind(ct),i=o[r],s=e[i]||n;n[t(228)]=ct[t(260)](ct),n[t(235)]=s[t(235)].bind(s),e[i]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]};function ft(){const t=["6119603eTriun","ability","model","375AxAwgp","autoRotate","test","info","chain","function *\\( *\\)","input","table","TresAxesHelper","stateObject","TresCanvas","1644BYfXbU","pagesShow","6qHIdzp","TresGridHelper",'{}.constructor("return this")( )',"__proto__","10VMKUvp","4364063aHDXUn","city","builds","exception","while (true) {}","toString","#ffffff","console","length","showBuildings","constructor","action","return (function() ","$slots","init","114570RdBbkd","935463ZQppPC","call","log","showGridHelper","1745289trRaIQ","perspectiveCameraRef","trace","TresPerspectiveCamera","apply","4XGrapA","TresAmbientLight","prototype","5613280WxoUTj","disableRender","bind","debu","gger"];return(ft=function(){return t})()}const pt=y({__name:it(224),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=x({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(259)]}),s=x({autoRotate:r[n(213)],enableDamping:!0});let u=null;r.showBuildings&&([e,o]=A((()=>Z())),e=await e,o(),u=e);const f=w(),p=w();return(t,e)=>{const o=n,c=R(o(222));return _(),S(c,F({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:B((()=>[j(o(253),{ref_key:o(251),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),k(C(d),T(z(s)),null,16),e[0]||(e[0]=j(o(256),{color:o(236)},null,-1)),e[1]||(e[1]=j("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(236)},null,-1)),r[o(239)]&&C(u)?(_(),v(M,{key:0},[k(X,{model:C(u)},null,8,[o(211)]),k(ot,{builds:C(u)[o(231)],color:"#000"},null,8,[o(232)])],64)):O("",!0),E(t[o(243)],o(210)),r.showAxesHelper?(_(),v(o(220),at)):O("",!0),r[o(249)]?(_(),v(o(226),lt)):O("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=ut;if("string"==typeof t)return function(t){}[e(240)](e(234))[e(254)]("counter");1!==(""+t/t)[e(238)]||t%20==0?function(){return!0}[e(240)](e(261)+e(262))[e(247)](e(241)):function(){return!1}[e(240)](e(261)+e(262))[e(254)](e(221)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{X as _,ot as a,pt as b,Z as l};

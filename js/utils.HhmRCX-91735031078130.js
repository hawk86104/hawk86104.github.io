import"./@fesjs.I05ciYa-1735031078130.js";import{_ as t}from"./jszip.B5akDNc61735031078130.js";import{F as n}from"./file-saver.c7TFMRpD1735031078130.js";import{_ as e,aN as s}from"./three.bc6MLGU_1735031078130.js";const o=c;!function(t,n){const e=c,s=i();for(;;)try{if(709584===-parseInt(e(373))/1+parseInt(e(364))/2+parseInt(e(397))/3*(parseInt(e(363))/4)+-parseInt(e(352))/5*(parseInt(e(435))/6)+-parseInt(e(402))/7*(parseInt(e(371))/8)+-parseInt(e(382))/9+parseInt(e(425))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=c,n=new RegExp(t(354)),e=new RegExp(t(366),"i"),s=b(t(362));n[t(341)](s+t(424))&&e[t(341)](s+t(384))?b():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(){const t=["url:geometries/","forEach","console","log","image/jpeg","string","pop","145785MwlQDA","onerror","WEBP","stringify","uuid","210413BcaVun","startsWith","slice","Cache","substring","geometries","counter","data:image/PNG;base64,","JPEG","data:image/gif;base64,","Unknown","toUpperCase","url:","length","toLowerCase","while (true) {}","data","exception","apply","async","warn","FileLoader","chain","30535230nSKYDf","blob","then","load","data:image/WEBP;base64,","application/octet-stream","debu","folder","data:","action","342yyuyfT","constructor","readAsDataURL",";base64,","image/webp","call","data:image/GIF;base64,","error","url","test","gger","app.json","scene","image/png","data:image/","table","info","GIF","enabled",".json","87585TGWSax","onloadend","function *\\( *\\)","PNG","name","setResponseType","file","push","return (function() ","data:image/JPEG;base64,","init","16DQzZiq","2765996bpFtQt","message","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","type","data:image/png;base64,","loadAsync","parse","376uUxqte","get","599014cDrDWp","images","toString","非标准文件：不存在 app.json","generateAsync","catch","image/bmp","stateObject","bind","8199549clDZgl","files","input","url:images/","split","endsWith","config.zip","data:image/webp;base64,"];return(i=function(){return t})()}function c(t,n){const e=i();return(c=function(t,n){return e[t-=333]})(t,n)}async function u(t){const n=new s;return new Promise(((e,s)=>{n[c(428)](t,(t=>e(JSON.parse(t))),void 0,(t=>s(t)))}))}async function p(t){const n=o,s=new(e[n(423)]);return new Promise(((e,r)=>{const a=n;s.setResponseType(a(426)),s.load(t,(n=>{const s=a,i=new FileReader;i[s(353)]=()=>{const n=s,r=function(t){const n=o,e=t[n(386)](".")[n(396)]()[n(416)]();return{jpg:"image/jpeg",jpeg:n(394),png:n(345),gif:"image/gif",bmp:n(379),webp:n(336)}[e]||n(430)}(t),a=i.result.split(",")[1];e(n(433)+r+";base64,"+a)},i[s(398)]=t=>{r(t)},i[s(334)](n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=c,n=function(){const t=c;let n;try{n=Function(t(360)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(392)]=n.console||{},s=[t(393),t(422),t(348),t(339),t(419),t(347),"trace"];for(let o=0;o<s[t(415)];o++){const n=a[t(333)].prototype[t(381)](a),r=s[o],i=e[r]||n;n.__proto__=a.bind(a),n.toString=i[t(375)][t(381)](i),e[r]=n}}))(),e[o(405)][o(350)]=!0;const l=n=>{const s=o,r=new(e[s(423)]);return r[s(357)](s(426)),new Promise(((e,o)=>{const a=s;r[a(428)](n,(async n=>{const s=a;e(await t[s(369)](n))}),void 0,(t=>o(t)))}))},f=t=>{const n=o,e=t[n(406)](0,15),s=n(361),r=n(368),a=n(409),i=n(411),c=n(338),u=n(389),p=n(429);return"data:image/jpeg;base64,".startsWith(e)||s[n(403)](e)?n(410):r[n(403)](e)||a.startsWith(e)?n(355):i[n(403)](e)||c.startsWith(e)?n(349):u[n(403)](e||p[n(403)](e))?n(399):n(412)},g=e=>{const s=o,r=[];e[s(344)][s(407)]&&e[s(344)].geometries[s(391)]((t=>{const n=s;"BufferGeometry"===t[n(367)]&&(r.push({uuid:t[n(401)],data:t[n(418)]}),t[n(418)]=n(390)+t[n(401)]+".json")}));const a=[];e[s(344)].images&&e[s(344)][s(374)][s(391)]((t=>{const n=s;t[n(340)]&&(a[n(359)]({uuid:t[n(401)],url:t[n(340)]}),t[n(340)][n(367)]?t.url=n(385)+t.uuid+"."+t.url[n(367)]+n(351):t[n(340)]=n(385)+t[n(401)]+"."+f(t.url))}));const i=new t;if(r[s(415)]){const t=i.folder(s(407));r[s(391)]((n=>{const e=s;t[e(358)](n[e(401)]+e(351),JSON[e(400)](n[e(418)]))}))}if(a[s(415)]){const t=i[s(432)](s(374));a[s(391)]((n=>{const e=s;n[e(340)][e(367)]?t.file(n[e(401)]+"."+n[e(340)][e(367)]+".json",JSON[e(400)](n[e(340)])):t[e(358)](n[e(401)]+"."+f(n[e(340)]),n.url[e(386)](e(335))[e(396)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(358)](s(343),c),i[s(377)]({type:s(426)})[s(427)]((t=>{const e=s;n.saveAs(t,e(388))}))},m=(t,n,e)=>{const s=o;t[s(407)]<=0&&t[s(374)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(369)](n)[s(427)]((t=>{const n=s;t[n(383)][n(343)]?t[n(383)][n(343)][n(421)]("string")[n(427)]((s=>{var a,i;const c=n;r=JSON.parse(s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(344)][s(407)])||n[s(391)]((t=>{const n=s;t[n(418)].startsWith(n(414))&&r[n(407)]++})),null==(e=t.scene.images)||e[s(391)]((t=>{const n=s;t.url[n(403)](n(414))&&r[n(374)]++})),r})(r);m(u,r,e),null==(a=r[c(344)][c(407)])||a.forEach((n=>{const s=c;n[s(418)].startsWith(s(414))&&t[s(383)][n[s(418)][s(404)](4)].async(s(395)).then((t=>{n[s(418)]=JSON.parse(t),u.geometries--,m(u,r,e)}))})),null==(i=r.scene[c(374)])||i[c(391)]((n=>{const s=c;if(n.url[s(403)](s(414))){const o=n[s(340)][s(404)](4);o[s(387)](".json")?t[s(383)][o][s(421)](s(395))[s(427)]((t=>{const o=s;n.url=JSON[o(370)](t),u[o(374)]--,m(u,r,e)})):t[s(383)][o].async("base64").then((t=>{const a=s,i=o[a(386)]("."),c=i[i[a(415)]-1][a(413)]();n.url=a(346)+c+";base64,"+t,u[a(374)]--,m(u,r,e)}))}}))})):console.error(n(376))}),(t=>{const e=s;console[e(339)](n[e(356)]+": "+t[e(365)])})),r};function b(t){function n(t){const e=c;if(typeof t===e(395))return function(t){}[e(333)](e(417))[e(420)](e(408));1!==(""+t/t)[e(415)]||t%20==0?function(){return!0}.constructor("debu"+e(342))[e(337)](e(434)):function(){return!1}[e(333)](e(431)+e(342))[e(420)](e(380)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,p as b,g as e,f as g,d as i,u as l};

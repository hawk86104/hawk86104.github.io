import"./@fesjs._J_IrcQ81728613889935.js";import{_ as n}from"./jszip.jnD6f9ab1728613889935.js";import{F as t}from"./file-saver.utnx-x3w1728613889935.js";import{_ as e}from"./three.-yu4716U1728613889935.js";const s=o;function o(n,t){const e=i();return(o=function(n,t){return e[n-=329]})(n,t)}!function(n,t){const e=o,s=i();for(;;)try{if(820898===parseInt(e(344))/1*(parseInt(e(342))/2)+parseInt(e(410))/3+parseInt(e(412))/4+parseInt(e(397))/5*(-parseInt(e(379))/6)+-parseInt(e(365))/7+parseInt(e(390))/8+-parseInt(e(405))/9)break;s.push(s.shift())}catch(r){s.push(s.shift())}}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){r(this,(function(){const n=o,t=new RegExp(n(354)),e=new RegExp(n(391),"i"),s=d(n(375));t[n(333)](s+"chain")&&e[n(333)](s+n(417))?d():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[o(334)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function i(){const n=["test","apply","BufferGeometry","files","config.zip","info","table","split",";base64,","2271938RYCRab","parse","1NxQvjo","WEBP","stringify","blob","file","debu","string","enabled","then","image/gif","function *\\( *\\)","image/jpeg","loadAsync","data:image/png;base64,","url:geometries/","type","data:image/webp;base64,","toString","url:","substring","exception","2601298eTKwEN","readAsDataURL","images","while (true) {}","call","slice","data","startsWith","image/webp","length","init","data:image/WEBP;base64,","image/bmp","prototype","984IBxoAL","result","error","gger","trace","log","push","async",".json","image/png","geometries","11953944bpqids","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","onerror","forEach","name","url:images/","message","15290weoISw","GIF","console","base64","folder","generateAsync","data:image/gif;base64,","load","18869067TEtYVR","constructor",'{}.constructor("return this")( )',"Cache","toLowerCase","3313524BtnRMJ","warn","223468IZXwdO","counter","onloadend","data:image/PNG;base64,","bind","input","data:image/","catch","scene","pop","Unknown","uuid","url","data:image/jpeg;base64,","FileLoader"];return(i=function(){return n})()}async function c(n){const t=s,o=new(e[t(332)]);return new Promise(((e,s)=>{const r=t;o[r(404)](n,(n=>e(JSON[r(343)](n))),void 0,(n=>s(n)))}))}async function u(n){const t=s,o=new(e[t(332)]);return new Promise(((e,r)=>{const a=t;o.setResponseType(a(347)),o[a(404)](n,(t=>{const o=a,i=new FileReader;i[o(414)]=()=>{const t=o,r=function(n){const t=s,e=n[t(340)](".")[t(421)]()[t(409)]();return{jpg:t(355),jpeg:t(355),png:t(388),gif:t(353),bmp:t(377),webp:t(373)}[e]||"application/octet-stream"}(n),a=i[t(380)][t(340)](",")[1];e("data:"+r+t(341)+a)},i.onerror=n=>{r(n)},i.readAsDataURL(t)}),void 0,(n=>r(n)))}))}a(void 0,(function(){const n=o;let t;try{t=Function("return (function() "+n(407)+");")()}catch(r){t=window}const e=t[n(399)]=t.console||{},s=[n(384),n(411),n(338),n(381),n(364),n(339),n(383)];for(let o=0;o<s[n(374)];o++){const t=a[n(406)][n(378)][n(416)](a),r=s[o],i=e[r]||t;t.__proto__=a[n(416)](a),t[n(361)]=i[n(361)][n(416)](i),e[r]=t}}))(),e[s(408)][s(351)]=!0;const p=t=>{const o=s,r=new(e[o(332)]);return r.setResponseType(o(347)),new Promise(((e,s)=>{const a=o;r[a(404)](t,(async t=>{const s=a;e(await n[s(356)](t))}),void 0,(n=>s(n)))}))},l=n=>{const t=s,e=n[t(363)](0,15),o=t(331),r=t(357),a=t(415),i=t(403),c=t(360),u=t(376);return o[t(372)](e)||"data:image/JPEG;base64,"[t(372)](e)?"JPEG":r[t(372)](e)||a[t(372)](e)?"PNG":i[t(372)](e)||"data:image/GIF;base64,"[t(372)](e)?t(398):c[t(372)](e||u[t(372)](e))?t(345):t(422)},f=e=>{const o=s,r=[];e[o(420)][o(389)]&&e[o(420)].geometries[o(393)]((n=>{const t=o;n[t(359)]===t(335)&&(r[t(385)]({uuid:n[t(329)],data:n[t(371)]}),n[t(371)]=t(358)+n.uuid+t(387))}));const a=[];e[o(420)][o(367)]&&e[o(420)][o(367)][o(393)]((n=>{const t=o;n[t(330)]&&(a.push({uuid:n[t(329)],url:n[t(330)]}),n[t(330)][t(359)]?n[t(330)]=t(395)+n[t(329)]+"."+n[t(330)][t(359)]+t(387):n.url="url:images/"+n[t(329)]+"."+l(n[t(330)]))}));const i=new n;if(r[o(374)]){const n=i.folder(o(389));r[o(393)]((t=>{const e=o;n[e(348)](t[e(329)]+e(387),JSON.stringify(t[e(371)]))}))}if(a.length){const n=i[o(401)](o(367));a.forEach((t=>{const e=o;t[e(330)][e(359)]?n[e(348)](t[e(329)]+"."+t[e(330)].type+e(387),JSON[e(346)](t[e(330)])):n[e(348)](t[e(329)]+"."+l(t.url),t.url[e(340)](e(341))[e(421)](),{base64:!0})}))}const c=JSON[o(346)](e);return i[o(348)]("app.json",c),i[o(402)]({type:o(347)})[o(352)]((n=>{const e=o;t.saveAs(n,e(337))}))},g=(n,t,e)=>{n[s(389)]<=0&&n.images<=0&&e(t)},m=(t,e)=>{const o=s;let r=null;return n[o(356)](t)[o(352)]((n=>{const t=o;n[t(336)]["app.json"]?n[t(336)]["app.json"][t(386)](t(350))[t(352)]((o=>{var a,i;const c=t;r=JSON[c(343)](o);const u=(n=>{var t,e;const o=s,r={geometries:0,images:0};return null==(t=n[o(420)][o(389)])||t[o(393)]((n=>{const t=o;n.data[t(372)](t(362))&&r.geometries++})),null==(e=n[o(420)][o(367)])||e.forEach((n=>{const t=o;n.url[t(372)]("url:")&&r.images++})),r})(r);g(u,r,e),null==(a=r[c(420)].geometries)||a[c(393)]((t=>{const s=c;t[s(371)].startsWith(s(362))&&n[s(336)][t[s(371)][s(370)](4)][s(386)](s(350))[s(352)]((n=>{const o=s;t[o(371)]=JSON[o(343)](n),u[o(389)]--,g(u,r,e)}))})),null==(i=r.scene[c(367)])||i[c(393)]((t=>{const s=c;if(t.url[s(372)](s(362))){const o=t.url[s(370)](4);o.endsWith(s(387))?n.files[o][s(386)](s(350)).then((n=>{const o=s;t[o(330)]=JSON[o(343)](n),u[o(367)]--,g(u,r,e)})):n[s(336)][o][s(386)](s(400))[s(352)]((n=>{const a=s,i=o.split("."),c=i[i[a(374)]-1].toUpperCase();t[a(330)]=a(418)+c+a(341)+n,u.images--,g(u,r,e)}))}}))})):console[t(381)]("非标准文件：不存在 app.json")}),(n=>{const e=o;console.error(t[e(394)]+": "+n[e(396)])})),r};function d(n){function t(n){const e=o;if(typeof n===e(350))return function(n){}[e(406)](e(368))[e(334)](e(413));1!==(""+n/n).length||n%20==0?function(){return!0}[e(406)](e(349)+e(382))[e(369)]("action"):function(){return!1}[e(406)](e(349)+"gger")[e(334)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{p as a,u as b,f as e,l as g,m as i,c as l};

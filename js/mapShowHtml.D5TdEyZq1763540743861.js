import"./index.CJ5-9CVy1763540743861.js";import{i as o,a as e,k as i,l as a}from"./index.Crdf3MNx1763540743861.js";import{K as s,o as t}from"./@tresjs.BCHtwiaC1763540743861.js";import l from"./indexHtml.DQQTUem-1763540743861.js";import{r as n,g as r}from"./mapShow.CkDnPwrf1763540743861.js";import{P as p}from"./tweakpane.CqZAnw7f1763540743861.js";import"./@fesjs.BEMFm_yJ1763540743861.js";import{s as m}from"./styleColorConfig.BKuEmde11763540743861.js";import{b as d}from"./vue-router.BxG8XxK11763540743861.js";import u from"./vnyoonLoading.CAYy6iTO1763540743861.js";import{d as c,r as g,a as j,a8 as _,H as f,o as v,h as y,u as h,e as b,J as x,b as C,I as B,m as L,ad as w,F as S}from"./@vue.Co_gxueH1763540743861.js";import{bX as k,z as M}from"./three.rXKzP9fQ1763540743861.js";import"./utils.DNqecIFo1763540743861.js";import"./_virtual-empty-module.CfyHAoLP1763540743861.js";/* empty css                                                                            *//* empty css                                                                                *//* empty css                                                                                   *//* empty css                                                                                   *//* empty css                                                                                     *//* empty css                                                                                 */import"./three-mesh-ui.module.BVA20N0s1763540743861.js";/* empty css                                                                             */import"./global.BBGVMLjY1763540743861.js";import"./color.Cjj5e0ZL1763540743861.js";import"./color-string.DEJ_oqf-1763540743861.js";import"./color-name.gyPnsvCn1763540743861.js";import"./lodash.CybtBilg1763540743861.js";import"./@amap.D8CfaEsq1763540743861.js";import"./naive-ui.qjPOP62h1763540743861.js";import"./date-fns.eh-WGDI81763540743861.js";import"./@css-render.DtSd-BuN1763540743861.js";import"./css-render.Dlx27V_T1763540743861.js";import"./@emotion.DFFAhID71763540743861.js";import"./seemly.D2hUckm91763540743861.js";import"./vooks.CVMU_ROE1763540743861.js";import"./evtd.C4K_ichY1763540743861.js";import"./vueuc.CEvnhvIm1763540743861.js";import"./vdirs.DlTVi7SG1763540743861.js";import"./@juggle.Vc7cP4_P1763540743861.js";import"./lodash-es.B7GkVYRo1763540743861.js";import"./treemate.Qc8YxXqZ1763540743861.js";import"./date-fns-tz.CIz1xaH61763540743861.js";import"./async-validator.DJtlKCAR1763540743861.js";/* empty css                                                              */import"./chalk.BHLFMujs1763540743861.js";/* empty css                                 */import"./iconify-icon.1JyQPtAK1763540743861.js";import"./@iconify.DDuAktjw1763540743861.js";import"./pinia.CEQ6XgE61763540743861.js";import"./vite-plugin-qiankun.B06WoCqG1763540743861.js";import"./dompurify.C4MEnGDh1763540743861.js";import"./oimophysics.CfVKSiAm1763540743861.js";import"./three-stdlib.DJsODJ8R1763540743861.js";import"./@pmndrs.C5SFDEDA1763540743861.js";import"./object-hash.DlZNhpf61763540743861.js";import"./crypto-js.CLP5yTup1763540743861.js";import"./@vueuse.CfFJ-iFV1763540743861.js";import"./@qlin.y-0Z8WnK1763540743861.js";import"./@babel.BPq7uOAK1763540743861.js";import"./@floating-ui.Bhq4ibgf1763540743861.js";import"./postprocessing.51l5tmA-1763540743861.js";import"./gsap.CY1N3EIL1763540743861.js";import"./d3-geo.dcKspw7k1763540743861.js";import"./utils.DhJ-cORL1763540743861.js";import"./three-mesh-bvh.BY-MaG5X1763540743861.js";const T=c({__name:"mapShowHtml",async setup(c){let T,I;const N=g({clearColor:"#201919",alpha:!1,antialias:!0,outputColorSpace:M,toneMapping:k}),P=g({reflectivity:2.6,showGridHelper:!1,scale:3}),z=j(!0),E=j("#0076c9"),H=g({lineColor:"#2bc4dc",topColor:"#035cbf",sideColor:"#00407c",iconColor:"#4fb0ff",fontColor:"#ffffff",fontSize:6,iconSize:.3,shadowColor:"#001c69",moveRoom:1.5,roughness:.66,metalness:.5,normalScale:6.6,hasMapTexture:!0,lineWidth:1}),D=new p;D.addBinding(z,"value",{label:"显示镜面"}),D.addBinding(E,"value",{label:"环境光颜色"}),D.addBinding(H,"lineColor",{label:"区域线颜色"}),D.addBinding(H,"lineWidth",{label:"区域线宽度",min:.1,max:6,step:.1}),D.addBinding(H,"topColor",{label:"区域块颜色"}),D.addBinding(H,"sideColor",{label:"区域边缘颜色"}),D.addBinding(H,"iconColor",{label:"图标颜色"}),D.addBinding(H,"iconSize",{label:"图标大小",min:.01,max:1,step:.01}),D.addBinding(H,"fontColor",{label:"字体颜色"}),D.addBinding(H,"fontSize",{label:"字体大小",min:1,max:12,step:.1}),D.addBinding(H,"shadowColor",{label:"字体阴影颜色"}),D.addBinding(H,"moveRoom",{label:"移动高度",min:1.1,max:3,step:.1}),D.addBinding(H,"roughness",{label:"粗糙程度",min:0,max:1,step:.01}),D.addBinding(H,"metalness",{label:"金属程度",min:0,max:1,step:.01}),D.addBinding(H,"normalScale",{label:"发向量缩放",min:.1,max:10,step:.1});const G=d(),R=G.query.selid,q=G.query.adcode,F=G.query.center;let J="./plugins/simpleGIS/json/china.json",U=10,W=[104.113164,37.570667];q&&"100000"!==q&&(J="./plugins/digitalMapBlock/geojson/"+q+".json",U=100,H.hasMapTexture=!1),F&&"string"==typeof F&&(W=F.split(",").map(Number));const{provinceInfoList:K}=([T,I]=_(()=>r()),T=await T,I(),T);return D.addBlade({view:"list",label:"地图选择",options:K,value:R||"0"===R?Number(R):-1}),D.addBlade({view:"list",label:"颜色风格",options:[{text:"蓝色",value:"BLUE"},{text:"白色",value:"WHITE"},{text:"绿色",value:"GREEN"}],value:"BLUE"}),D.on("change",o=>{if("地图选择"===o.target.label){let e=n(window.location.href,"selid",o.value);e=n(e,"adcode",K[o.value+1].adcode);let i=K[o.value+1].centroid;i||(i=K[o.value+1].center),e=n(e,"center",i.toString()),window.open(e,"_blank")}if("颜色风格"===o.target.label){const e=m[o.value];E.value=e.envColor,H.lineColor=e.lineColor,H.topColor=e.topColor,H.sideColor=e.sideColor,H.iconColor=e.iconColor,H.fontColor=e.fontColor,H.shadowColor=e.shadowColor,H.roughness=e.roughness,H.metalness=e.metalness,H.normalScale=e.normalScale,D.refresh()}}),o.loadResources([{functionName:"TextureLoader",url:"./plugins/digitalMapBlock/images/icon.png"},{functionName:"TextureLoader",url:"./plugins/digitalMapBlock/images/grayscaleMap.jpg"},{functionName:"TextureLoader",url:"./plugins/digitalMapBlock/images/topNormal.jpg"},{functionName:"TextureLoader",url:"./plugins/digitalMapBlock/images/side.png"},{functionName:"FileLoader",url:J,resourceID:"map.json"}]),(n,r)=>(v(),f(S,null,[y(h(u),{useResourceManager:""}),y(h(t),L(N,{"window-size":""}),{default:b(()=>[r[0]||(r[0]=x("TresPerspectiveCamera",{position:[12,12,12],fov:45,near:.1,far:1e3},null,-1)),y(h(s),{enableDamping:""}),r[1]||(r[1]=x("TresDirectionalLight",{position:[-10,8,-4],intensity:5},null,-1)),r[2]||(r[2]=x("TresDirectionalLight",{position:[10,4,4],intensity:5},null,-1)),r[3]||(r[3]=x("TresDirectionalLight",{position:[6,4,-6],intensity:5},null,-1)),r[4]||(r[4]=x("TresAmbientLight",{intensity:1},null,-1)),h(o).hasAllFinished.value?(v(),C(l,L({key:0},H,{geoJsonUrl:h(J),areaScale:h(U),centerCoordinates:h(W)}),null,16,["geoJsonUrl","areaScale","centerCoordinates"])):B("",!0),(v(),C(w,null,{default:b(()=>[z.value?(v(),C(h(e),L({key:0,position:[0,-1,0]},P),null,16)):B("",!0)]),_:1})),(v(),C(w,null,{default:b(()=>[y(h(i),{resolution:256,blur:1,background:""},{default:b(()=>[y(h(a),{color:E.value,intensity:2,form:"circle","rotation-x":Math.PI/2,position:[10,4,0],scale:[2,5,0]},null,8,["color","rotation-x"]),y(h(a),{color:E.value,intensity:2,form:"circle","rotation-x":Math.PI/2,position:[0,4,0],scale:[2,5,0]},null,8,["color","rotation-x"]),y(h(a),{color:E.value,intensity:1,"rotation-y":-Math.PI/2,position:[-1,0,0],scale:[10,.2,1]},null,8,["color","rotation-y"]),y(h(a),{color:E.value,intensity:1,"rotation-y":-Math.PI/2,position:[1,0,0],scale:[10,.2,1]},null,8,["color","rotation-y"])]),_:1})]),_:1}))]),_:1},16)],64))}});export{T as default};

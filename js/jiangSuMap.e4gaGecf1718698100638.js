import{a as e,N as t,r as n,t as o,d as r}from"./@tresjs.aawOCoPx1718698100638.js";import{B as s,r as i,C as a,f as p,V as c,cy as l,Z as u,ck as f}from"./three.erXpfL-r1718698100638.js";import{l as m}from"./utils.n_5PKhhk1718698100638.js";import{u as d}from"./@tweenjs.nrkgVqSV1718698100638.js";import{f as h}from"./utils.7q_e1JMy1718698100638.js";import{c as y,d as g,a as j}from"./three-mesh-bvh.TtuCaJyf1718698100638.js";import{a3 as T,b as w,a2 as b,o as v,D as k,F as z,V as M,f as _,g as E,J as I,H as x,m as S,u as C,I as L,d as O,r as B,e as G,j as F,aj as H,ak as P,al as A}from"./@vue.CpOXM7bB1718698100638.js";import{m as R}from"./d3-geo.h2OcBeXs1718698100638.js";import"./@vueuse.TW6-TkVF1718698100638.js";import"./tweakpane.qqn77PB81718698100638.js";import"./@fesjs.IcRnDBLi1718698100638.js";import"./vue-router.hw3iClIt1718698100638.js";import"./lodash-es.nFpJXAf-1718698100638.js";import"./@qlin.yHhFDldE1718698100638.js";import"./pinia.3_1_BhfV1718698100638.js";import"./@floating-ui.BPbuo5Gx1718698100638.js";import"./@juggle.7yjBMqoW1718698100638.js";import"./d3-array.E5C1cfJ61718698100638.js";const D=["position"],V=["blending","map"],Z=["name","renderOrder","pCenter"],Y=["args"],q=["color","side"],N=["renderOrder","position-z"],Q=["position"],$=I("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1),J=["renderOrder"],K=["position"],X=I("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1),U={__name:"jiangSuMapMesh",async setup(r){let O,B;s.prototype.computeBoundsTree=y,s.prototype.disposeBoundsTree=g,i.prototype.raycast=j;const G=([O,B]=T((()=>m("./plugins/simpleGIS/json/320000_full.json","features"))),O=await O,B(),O),{map:F}=([O,B]=T((()=>t({map:"./plugins/simpleGIS/image/icon.png"}))),O=await O,B(),O),H=G[0].properties.centroid,P=R();P.center(H).translate([0,0]);const A=[];G.forEach((e=>{const t=new a("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=e.properties,{coordinates:p,type:c}=e.geometry,l=o||r||s||[0,0],u=P(l);u[1]=-u[1],u[2]=n,A.push({type:"Html",position:u,name:i});const m=P(l);m[1]=.2-m[1],m[2]=n+.22,A.push({type:"Sprite",position:m}),p.forEach((e=>{function o(e){const o=new f;e.forEach(((e,t)=>{const[n,r]=P(e);0===t?o.moveTo(n,-r):o.lineTo(n,-r)})),A.push({type:"Shape",shape:o,name:i,color:t,depth:n,pCenter:m});const r=[];e.forEach((e=>{const[t,n]=P(e);r.push(t,-n,0)})),A.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===c&&e.forEach((e=>o(e))),"Polygon"===c&&o(e)}))}));const U=w();b((()=>{U.value&&((e=>{e.rotation.x=-Math.PI/2;const t=(new p).setFromObject(e).getCenter(new c),n=[0,0];e.position.x=e.position.x-t.x-n[0],e.position.z=e.position.z-t.z-n[1]})(U.value),U.value.children.forEach((e=>{"Mesh"===e.type&&e.geometry.computeBoundsTree()})))}));const W=e=>{e.object.material.opacity=.4},ee=e=>{e.material.opacity=1},{camera:te,controls:ne}=e(),oe=(e,t)=>{console.log("click",e,t);const n=new c;n.x=e.point.x,n.y=e.point.y+10,n.z=e.point.z,h(te,n,ne)},{onBeforeLoop:re}=n();re((()=>{d()}));const se={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(e,t)=>(v(),k("TresGroup",{ref_key:"tgRef",ref:U},[(v(),k(z,null,M(A,((e,t)=>(v(),k(z,{key:"".concat(t)},["Html"===e.type?(v(),_(C(o),S({key:0},se,{position:e.position}),{default:E((()=>[I("span",null,x(e.name),1)])),_:2},1040,["position"])):L("",!0),"Sprite"===e.type?(v(),k("TresSprite",{key:1,position:e.position,scale:.3,renderOrder:1e3},[I("TresSpriteMaterial",{color:16711680,blending:l,map:C(F)},null,8,V)],8,D)):L("",!0),"Shape"===e.type?(v(),k("TresMesh",{key:2,name:e.name,renderOrder:t,pCenter:e.pCenter,onPointerEnter:W,onPointerLeave:ee,onClick:oe},[I("TresExtrudeGeometry",{args:[e.shape,{depth:e.depth,bevelEnabled:!1}]},null,8,Y),I("TresMeshStandardMaterial",{color:e.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:u},null,8,q)],40,Z)):L("",!0),"Line"===e.type?(v(),k(z,{key:3},[I("TresLine",{renderOrder:t,"position-z":e.depth+1e-4},[I("TresBufferGeometry",{position:[e.points,3]},null,8,Q),$],8,N),I("TresLine",{renderOrder:t,"position-z":-1e-4},[I("TresBufferGeometry",{position:[e.points,3]},null,8,K),X],8,J)],64)):L("",!0)],64)))),64))],512))}};function W(e,t){const n=le();return(W=function(e,t){return n[e-=398]})(e,t)}const ee=W;!function(e,t){const n=W,o=le();for(;;)try{if(357784===parseInt(n(401))/1+-parseInt(n(416))/2+-parseInt(n(433))/3+parseInt(n(410))/4*(-parseInt(n(398))/5)+-parseInt(n(425))/6*(-parseInt(n(399))/7)+-parseInt(n(403))/8*(parseInt(n(420))/9)+parseInt(n(418))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const te=function(){let e=!0;return function(t,n){const o=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,o}}();!function(){te(this,(function(){const e=W,t=new RegExp(e(414)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=fe("init");t[e(436)](o+e(435))&&n[e(436)](o+e(419))?fe():o("0")}))()}();const ne=function(){let e=!0;return function(t,n){const o=e?function(){if(n){const e=n[W(415)](t,arguments);return n=null,e}}:function(){};return e=!1,o}}();ne(void 0,(function(){const e=W;let t;try{t=Function(e(406)+e(412)+");")()}catch(r){t=window}const n=t.console=t.console||{},o=[e(404),"warn",e(429),e(411),e(413),"table",e(422)];for(let s=0;s<o.length;s++){const t=ne[e(407)][e(402)][e(400)](ne),r=o[s],i=n[r]||t;t[e(424)]=ne[e(400)](ne),t[e(437)]=i[e(437)][e(400)](i),n[r]=t}}))();const oe=I(ee(427),{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1),re=I(ee(409),{intensity:8.8},null,-1),se=I(ee(434),{position:[0,10,5],intensity:.2},null,-1),ie=I(ee(434),{position:[0,10,-5],intensity:.2},null,-1),ae=I(ee(434),{position:[5,10,0],intensity:.2},null,-1),pe=I(ee(434),{position:[-5,10,0],intensity:.2},null,-1),ce=I(ee(421),{args:[20,10]},null,-1);function le(){const e=["6YnHjxk","length","TresPerspectiveCamera","debu","info","call","#ffdbd1","counter","180870kaOsiO","TresDirectionalLight","chain","test","toString","10EXdzqu","3102414vujEAR","bind","451075razocY","prototype","24dVFdkv","log","gger","return (function() ","constructor","TresCanvas","TresAmbientLight","832568oKaaLR","error",'{}.constructor("return this")( )',"exception","function *\\( *\\)","apply","740710SzQYjV","stateObject","7906580NTrZtT","input","1440666GtgoQs","TresGridHelper","trace","jiangSuMap","__proto__"];return(le=function(){return e})()}const ue=O({__name:ee(423),setup(e){const t=ee,n=B({clearColor:t(431),alpha:!0,antialias:!0}),o=B({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(e,s)=>{const i=G(t(408));return v(),_(i,S(n,{"window-size":""}),{default:E((()=>[oe,F(C(r),H(P(o)),null,16),re,se,ie,ae,pe,ce,(v(),_(A,null,{default:E((()=>[F(U)])),_:1}))])),_:1},16)}}});function fe(e){function t(e){const n=W;if("string"==typeof e)return function(e){}.constructor("while (true) {}")[n(415)](n(432));1!==(""+e/e)[n(426)]||e%20==0?function(){return!0}[n(407)](n(428)+n(405))[n(430)]("action"):function(){return!1}[n(407)]("debu"+n(405))[n(415)](n(417)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{ue as default};

import{m as t,e,b as n,J as o,U as r}from"./@tresjs.sklxXn0u1733198294833.js";import{B as s,s as i,C as a,f as p,V as c,ck as l,a0 as u,cm as m}from"./three.8iJMi2lU1733198294833.js";import{l as f}from"./utils.mPUSF2NM1733198294833.js";import{f as d}from"./utils.5KluHusY1733198294833.js";import{a6 as h,b as j,a3 as y,o as g,D as v,F as T,V as b,f as w,g as I,J as L,H as z,m as _,u as k,I as M,d as x,r as E,e as O,j as C,aj as S,ak as B,al as G}from"./@vue.-THQH3GC1733198294833.js";import{m as D}from"./d3-geo.kglYp31S1733198294833.js";import{c as F,d as H,a as P}from"./three-mesh-bvh.oXi0pqYE1733198294833.js";import"./@vueuse.N_fQXUYA1733198294833.js";import"./@fesjs.X1U4uwri1733198294833.js";import"./vue-router.H2Xo87u11733198294833.js";import"./lodash-es.kYt-_xTG1733198294833.js";import"./@qlin.yHhFDldE1733198294833.js";import"./pinia.ZJJJwhVu1733198294833.js";import"./vue-demi.C4xddsk91733198294833.js";import"./@floating-ui.BPbuo5Gx1733198294833.js";import"./@juggle.7yjBMqoW1733198294833.js";import"./@tweenjs.J1BAvmPw1733198294833.js";import"./http.WNFyz1e-1733198294833.js";import"./axios.Ng308AU61733198294833.js";import"./color.jojxHvU71733198294833.js";import"./@amap.DgFRMjnW1733198294833.js";import"./color-string.MLbc3nFT1733198294833.js";import"./color-name.wZtbERCd1733198294833.js";import"./simple-swizzle.vN4jMomp1733198294833.js";import"./is-arrayish.3YRC725L1733198294833.js";import"./color-convert.wFbfNiW-1733198294833.js";import"./lodash.g0L_0TEs1733198294833.js";import"./naive-ui.GnAwRF6S1733198294833.js";import"./date-fns.dsKIdits1733198294833.js";import"./@css-render.p9vfyQxp1733198294833.js";import"./seemly.SjiSeX2v1733198294833.js";import"./css-render.Cdja4FaB1733198294833.js";import"./@emotion.ZD_ZYAgY1733198294833.js";import"./vooks.jh4X_sUQ1733198294833.js";import"./evtd.DtfwxtIl1733198294833.js";import"./vueuc.GKEI1yRw1733198294833.js";import"./vdirs.R6FXrH4p1733198294833.js";import"./treemate.dcEdf2le1733198294833.js";import"./date-fns-tz.nq2RXdwW1733198294833.js";import"./async-validator.-YBkpS4I1733198294833.js";import"./d3-array.E5C1cfJ61733198294833.js";const A=["position"],q=["blending","map"],J=["name","renderOrder","pCenter"],N=["args"],R=["color","side"],Q=["renderOrder","position-z"],V=["position"],Z=["renderOrder"],$=["position"],K={__name:"jiangSuMapMesh",async setup(r){let x,E;s.prototype.computeBoundsTree=F,s.prototype.disposeBoundsTree=H,i.prototype.raycast=P;const O=([x,E]=h((()=>f("./plugins/simpleGIS/json/320000_full.json","features"))),x=await x,E(),x),{map:C}=([x,E]=h((()=>n({map:"./plugins/simpleGIS/image/icon.png"}))),x=await x,E(),x),S=O[0].properties.centroid,B=D();B.center(S).translate([0,0]);const G=[];O.forEach((t=>{const e=new a("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:p,type:c}=t.geometry,l=o||r||s||[0,0],u=B(l);u[1]=-u[1],u[2]=n,G.push({type:"Html",position:u,name:i});const f=B(l);f[1]=.2-f[1],f[2]=n+.22,G.push({type:"Sprite",position:f}),p.forEach((t=>{function o(t){const o=new m;t.forEach(((t,e)=>{const[n,r]=B(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),G.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:f});const r=[];t.forEach((t=>{const[e,n]=B(t);r.push(e,-n,0)})),G.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===c&&t.forEach((t=>o(t))),"Polygon"===c&&o(t)}))}));const K=j();y((()=>{K.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new p).setFromObject(t).getCenter(new c),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})(K.value),K.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const U=t=>{t.object.material.opacity=.4},W=t=>{t.eventObject.material.opacity=1},{camera:X,controls:Y}=t();let tt=null;const et=t=>{const e=new c;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,tt=d(X,e,Y)},{onBeforeLoop:nt}=e();nt((()=>{null==tt||tt.update()}));const ot={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(g(),v("TresGroup",{ref_key:"tgRef",ref:K},[(g(),v(T,null,b(G,((t,n)=>(g(),v(T,{key:"".concat(n)},["Html"===t.type?(g(),w(k(o),_({key:0,ref_for:!0},ot,{position:t.position}),{default:I((()=>[L("span",null,z(t.name),1)])),_:2},1040,["position"])):M("",!0),"Sprite"===t.type?(g(),v("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[L("TresSpriteMaterial",{color:16711680,blending:l,map:k(C)},null,8,q)],8,A)):M("",!0),"Shape"===t.type?(g(),v("TresMesh",{key:2,name:t.name,renderOrder:n,pCenter:t.pCenter,onPointerEnter:U,onPointerLeave:W,onClick:et},[L("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,N),L("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:u},null,8,R)],40,J)):M("",!0),"Line"===t.type?(g(),v(T,{key:3},[L("TresLine",{renderOrder:n,"position-z":t.depth+1e-4},[L("TresBufferGeometry",{position:[t.points,3]},null,8,V),e[0]||(e[0]=L("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1))],8,Q),L("TresLine",{renderOrder:n,"position-z":-1e-4},[L("TresBufferGeometry",{position:[t.points,3]},null,8,$),e[1]||(e[1]=L("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1))],8,Z)],64)):M("",!0)],64)))),64))],512))}},U=W;function W(t,e){const n=Y();return(W=function(t,e){return n[t-=471]})(t,e)}!function(t,e){const n=W,o=Y();for(;;)try{if(394857===-parseInt(n(493))/1*(parseInt(n(492))/2)+parseInt(n(484))/3+-parseInt(n(506))/4*(-parseInt(n(499))/5)+parseInt(n(476))/6+-parseInt(n(498))/7*(-parseInt(n(472))/8)+-parseInt(n(505))/9*(parseInt(n(473))/10)+parseInt(n(479))/11*(-parseInt(n(483))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const X=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[W(507)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function Y(){const t=["constructor","counter","3145590LTssTO","length","TresGridHelper","11kJLOzb","bind","stateObject","chain","7193532kFFqKD","886056NNbhau","gger","TresCanvas","trace","init","while (true) {}","info","table","6pOuBNx","71660odjmMJ","console",'{}.constructor("return this")( )',"jiangSuMap","call","3903739nmbOED","5NGHqGo","TresDirectionalLight","action","TresPerspectiveCamera","string","test","6039495irdbQz","2012236EvLsqQ","apply","log","toString","warn","8eTkLtj","10ILdiru"];return(Y=function(){return t})()}!function(){X(this,(function(){const t=W,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=nt(t(488));e[t(504)](o+t(482))&&n[t(504)](o+"input")?nt():o("0")}))()}();const tt=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[W(507)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=W,e=function(){const t=W;let e;try{e=Function("return (function() "+t(495)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(494)]||{},o=[t(508),t(471),t(490),"error","exception",t(491),t(487)];for(let r=0;r<o.length;r++){const e=tt[t(474)].prototype[t(480)](tt),s=o[r],i=n[s]||e;e.__proto__=tt.bind(tt),e[t(509)]=i[t(509)][t(480)](i),n[s]=e}}))();const et=x({__name:U(496),setup(t){const e=E({clearColor:"#ffdbd1",alpha:!0,antialias:!0}),n=E({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,o)=>{const s=W,i=O(s(486));return g(),w(i,_(e,{"window-size":""}),{default:I((()=>[o[0]||(o[0]=L(s(502),{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1)),C(k(r),S(B(n)),null,16),o[1]||(o[1]=L("TresAmbientLight",{intensity:8.8},null,-1)),o[2]||(o[2]=L("TresDirectionalLight",{position:[0,10,5],intensity:.2},null,-1)),o[3]||(o[3]=L(s(500),{position:[0,10,-5],intensity:.2},null,-1)),o[4]||(o[4]=L("TresDirectionalLight",{position:[5,10,0],intensity:.2},null,-1)),o[5]||(o[5]=L(s(500),{position:[-5,10,0],intensity:.2},null,-1)),o[6]||(o[6]=L(s(478),{args:[20,10]},null,-1)),(g(),w(G,null,{default:I((()=>[C(K)])),_:1}))])),_:1},16)}}});function nt(t){function e(t){const n=W;if(typeof t===n(503))return function(t){}.constructor(n(489))[n(507)](n(475));1!==(""+t/t)[n(477)]||t%20==0?function(){return!0}[n(474)]("debu"+n(485))[n(497)](n(501)):function(){return!1}.constructor("debu"+n(485)).apply(n(481)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{et as default};

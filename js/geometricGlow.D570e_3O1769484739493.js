import{importShared as e}from"./3d-tiles-renderer.qyEDeaaW1769484739493.js";import{OrbitControls_default as o}from"./index.CuW8EyFk1769484739493.js";import{Pane as r}from"./tweakpane.BbuIEN141769484739493.js";function t(e,o){if(!e.isBufferGeometry)return void console.error("The geometry must be a BufferGeometry.");e.attributes.normal||e.computeVertexNormals();const r=e.attributes.position,t=e.attributes.normal,n=r.array,i=t.array;for(let a=0;a<r.count;a++){const e=3*a;n[e]+=i[e]*o,n[e+1]+=i[e+1]*o,n[e+2]+=i[e+2]*o}r.needsUpdate=!0}var n="varying vec3 vVertexWorldPosition;\nvarying vec3 vVertexNormal;\nvarying vec4 vFragColor;\nvoid main() {\n  vVertexNormal = normalize(normalMatrix * normal);\n  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",i="uniform vec3 glowColor;\nuniform float coeficient;\nuniform float power;\nvarying vec3 vVertexNormal;\nvarying vec3 vVertexWorldPosition;\nvarying vec4 vFragColor;\nvoid main() {\n  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;\n  vec3 viewCameraToVertex = (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;\n  viewCameraToVertex = normalize(viewCameraToVertex);\n  float intensity =\n      pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);\n  gl_FragColor = vec4(glowColor, intensity);\n}";const{defineComponent:a}=await e("vue"),{unref:l,mergeProps:s,createElementVNode:m,openBlock:c,createElementBlock:u}=await e("vue"),d=["geometry"],v=["blending","side"],f=["geometry"],g=["blending","side"],{watch:w}=await e("vue"),p=await e("three"),C=a({__name:"geometricGlowMesh",props:{geometry:Object,inColor:{default:"hotpink"},outColor:{default:"hotpink"},inPower:{default:1.4},outPower:{default:1.2},inCoeficient:{default:1.1},outCoeficient:{default:.1}},setup(e){const o=e,r=o.geometry.clone();t(r,.01);const a=o.geometry.clone();t(a,.2);const C={uniforms:{coeficient:{value:o.inCoeficient},power:{value:o.inPower},glowColor:{value:new p.Color(o.inColor)},viewVector:{value:new p.Vector3(0,0,1)}},vertexShader:n,fragmentShader:i},y={uniforms:{coeficient:{value:o.outCoeficient},power:{value:o.outPower},glowColor:{value:new p.Color(o.outColor)},viewVector:{value:new p.Vector3(0,0,1)}},vertexShader:n,fragmentShader:i};return w(()=>[o.inColor,o.outColor],([e,o])=>{C.uniforms.glowColor.value.set(e),y.uniforms.glowColor.value.set(o)}),w(()=>[o.inPower,o.outPower,o.inCoeficient,o.outCoeficient],([e,o,r,t])=>{C.uniforms.power.value=e,y.uniforms.power.value=o,C.uniforms.coeficient.value=r,y.uniforms.coeficient.value=t}),(e,o)=>(c(),u("TresGroup",null,[m("TresMesh",{geometry:l(r)},[m("TresShaderMaterial",s(C,{blending:p.AdditiveBlending,transparent:"",depthWrite:!1,side:p.FontSide}),null,16,v)],8,d),m("TresMesh",{geometry:l(a),visible:!0},[m("TresShaderMaterial",s(y,{blending:p.AdditiveBlending,transparent:"",depthWrite:!1,side:p.BackSide}),null,16,g)],8,f)]))}}),{defineComponent:y}=await e("vue"),{createElementVNode:x,unref:h,createVNode:T,mergeProps:M,resolveComponent:V,withCtx:P,openBlock:B,createBlock:b}=await e("vue"),N=["geometry"],k=["geometry"],S=["geometry"],G=["geometry"],_=["geometry"],{reactive:W}=await e("vue"),j=await e("three"),z=y({__name:"geometricGlow",setup(e){const n=new j.TorusKnotGeometry(.75,.25,64),i=n.clone();t(i,-.1);const a=n.clone();t(a,.1);const l=W({inColor:"#0078ff",outColor:"#ff00ba",inPower:1.4,outPower:1.2,inCoeficient:1.1,outCoeficient:.1}),s=new r;return s.addBinding(l,"inColor",{label:"内发光色"}),s.addBinding(l,"inPower",{label:"内发光强度",step:.01,min:0,max:4}),s.addBinding(l,"inCoeficient",{step:.01,min:0,max:4}),s.addBinding(l,"outColor",{label:"外发光色"}),s.addBinding(l,"outPower",{label:"外发光强度",step:.01,min:0,max:6}),s.addBinding(l,"outCoeficient",{step:.01,min:0,max:4}),(e,r)=>{const t=V("TresCanvas");return B(),b(t,{"window-size":"",clearColor:"#333333"},{default:P(()=>[r[5]||(r[5]=x("TresPerspectiveCamera",{position:[5,5,5]},null,-1)),T(h(o)),x("TresMesh",{position:[0,1,-4],geometry:h(n)},[r[1]||(r[1]=x("TresMeshNormalMaterial",{transparent:"",opacity:.8},null,-1)),x("TresMesh",{geometry:h(i)},[...r[0]||(r[0]=[x("TresMeshBasicMaterial",{wireframe:"",color:"#000"},null,-1)])],8,k)],8,N),x("TresMesh",{position:[0,1,4],geometry:h(n)},[r[3]||(r[3]=x("TresMeshNormalMaterial",{transparent:"",opacity:.9},null,-1)),x("TresMesh",{geometry:h(a)},[...r[2]||(r[2]=[x("TresMeshBasicMaterial",{wireframe:"",color:"#000"},null,-1)])],8,G)],8,S),x("TresMesh",{position:[0,1,0],geometry:h(n),renderOrder:1},[r[4]||(r[4]=x("TresMeshBasicMaterial",{color:"gray"},null,-1)),T(C,M({geometry:h(n)},l),null,16,["geometry"])],8,_),r[6]||(r[6]=x("TresGridHelper",{args:[10,10]},null,-1))]),_:1})}}});export{z as default};

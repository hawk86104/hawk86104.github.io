import{_ as t,d as e,a as i,bI as n,k as o,aB as s,b as r,V as a,C as c}from"./three.-z-VOBM71731641201182.js";const h=l;function l(t,e){const i=p();return(l=function(t,e){return i[t-=270]})(t,e)}!function(t,e){const i=l,n=p();for(;;)try{if(121584===-parseInt(i(535))/1+-parseInt(i(442))/2*(-parseInt(i(593))/3)+parseInt(i(573))/4+-parseInt(i(328))/5*(parseInt(i(395))/6)+-parseInt(i(683))/7+parseInt(i(551))/8*(parseInt(i(583))/9)+-parseInt(i(703))/10*(-parseInt(i(523))/11))break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const u=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[l(466)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){u(this,(function(){const t=l,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(401),"i"),n=g(t(568));e[t(556)](n+t(316))&&i[t(556)](n+t(657))?g():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[l(466)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(){const t=["rotationCenter","212414hytBFH","randomColorAsHex","dynamicBuffer","emitterIDs","BufferGeometry","attributeEnd","group","Group","Argument is not instanceof SPE.Emitter:","_createNewWhenPoolEmpty","blending","stateObject","_checkParticleAges","defineProperty","      if( rotation.y == 0.0 ) {","       float s = sin(angle);","setVec4Components","    }","    ","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","           unpackColor( color.y ),","_spread","acceleration","exports","apply","direction","wiggle","setDrawRange","uuid","float or(float a, float b) {","    vColor = vec4( c, o );","    force *= drag;","           unpackColor( color.x ),","attribute vec4 rotation;","NEGATIVE_INFINITY","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","        float wiggleAmount = positionInTime * getWiggle();","depthWrite","_activateParticles","        float perspective = scale / length( mvPosition.xyz );","attribute vec4 opacity;","indexOffset","componentSize","           positionInTime,","warn","_attributesNeedDynamicReset","float when_gt(float x, float y) {","number","constructor","        pos = getRotation( pos, positionInTime );","  return 1.0 - when_gt(x, y);","float getWiggle() {","spe","emitters","fog_vertex","      translated = rotationCenter - pos;","position","   vec3 c = vec3( 0.0 );","gger","distribution","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","_pool","    vec3 outgoingLight = vColor.xyz;","    varying vec4 vSpriteSheet;","__proto__","_incrementParticleCount","getComponentValueAtIndex","_radiusScale","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","valueOverLifetimeLength","   return params.x;","bufferUpdateRanges","MathUtils","ensureArrayInstanceOf","    gl_Position = projectionMatrix * mvPosition;","float and(float a, float b) {","_decrementParticleCount","deltaTime","hasOwnProperty","_attributesNeedRefresh","539HtmNLN","    force += vel;","#ifdef SHOULD_CALCULATE_SPRITE","#endif","       fIndex = float( i );","getHex","    #ifdef ALPHATEST","resetFlags","        float columnNorm = column / framesX;","resetDynamic","hasPerspective","getFromPool","20172BzHhiG","maxParticleCount","SHOULD_WIGGLE_PARTICLES","string","mesh","_static","lerp","replace","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","setFromArray","_spreadClamp","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","flagUpdate","abs","float when_le(float x, float y) {","drag","712QGywwp","    vec3 force = vec3( 0.0 );","_distributionClamp","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","test","DynamicDrawUsage","   c.g = g / PACKED_COLOR_DIVISOR;","    vec4 rotatedTexture = texture2D( tex, vUv );","        float framesX = vSpriteSheet.x;","keys","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","setAttribute","SPE.Group pool ran out.","_assignForceValue","rotateTexture","        float framesX = textureAnimation.x;","init","    force += accel * age;","_poolCreationSettings","static","amd","802212LCWrIo","`emitter` argument must be instance of SPE.Emitter. Was provided with:","_distribution","   return velocity * age;","textureFrames","Texture","opacity","Vector4","triggerPoolEmitter","_resetBufferRanges","13995yIZFom","      float angle = 0.0;","    vec3 pos = vec3( position );","distributionClamp","vec4 getPosition( in float age ) {","    pos += force;","Vector3","   c *= vec3( 2.0 );","   float b = mod( hex, PACKED_COLOR_SIZE );","min","3qZLmeD","    #endif","duration","join","uniform float runTime;","    return min(a + b, 1.0);","paramsArray","_onRemove","setRGB","        float row = floor( (frameNumber - column) / framesX );","_updateAttributeUpdateRange","resetUpdateRange","vec3 unpackRotationAxis( in float hex ) {","   return modelViewMatrix * vec4( position, 1.0 );","_rotationCenter","particlesPerSecond","#ifdef SHOULD_ROTATE_TEXTURE","   c.r = r / PACKED_COLOR_DIVISOR;","      rotationMatrix = getRotationMatrix( axis, angle );","type","_assignPositionValue","getPackedRotationAxis","           unpackColor( color.z ),","activeParticleCount","    return value;","uniform float deltaTime;","Invalid argument types, or argument types do not match:","alive","Emitter does not exist in this group. Will not remove.","frames","runTime","info","uniform float scale;","StaticDrawUsage","round","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","_randomise","multiplyScalar","indexOf","SHOULD_ROTATE_TEXTURE","getPool","SPE.Group: maxParticleCount exceeded. Requesting","updateMap","_calculatePPSValue","activationIndex","randomVector3OnLine","        float columnNorm = vSpriteSheet.z;","      mat4 rotationMatrix;","floatOverLifetime","        pos.x += wiggleSin;","unshift","_assignColorValue","particleCount","vertex","setVec4","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","color","logdepthbuf_fragment","SHOULD_ROTATE_PARTICLES","textureLoop","fog_pars_fragment","ShaderChunk","typedArray","input","shaderChunks","float when_ge(float x, float y) {","disable","max","  return 1.0 - when_lt(x, y);","fixedTimeStep","activationEnd","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","        float rowNorm = row / framesY;","_updateUniforms","        float framesY = vSpriteSheet.y;","    return max(sign(x - y), 0.0);","setUpdateRange","   }","ensureTypedArg","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","loop","Emitter","remove","       vec3 c = isAlive * getColorOverLifetime(","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","attributes","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","        vSpriteSheet.x = 1.0 / framesX;","uniforms","1668177OnTcxd","attribute vec4 acceleration;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","DISC","    #ifdef COLORIZE","value","      vec3 axis = unpackRotationAxis( rotation.x );","updateFlags","undefined","alphaTest","shrink","logdepthbuf_pars_fragment","activeMultiplier","while (true) {}","debu","OBJECT","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","action","attribute vec4 size;","randomDirectionVector3OnSphere","33710CXYxDJ","randomise","_center","paramFetchingFunctions","_assignParamsValue","updateMin","TypedArrayHelper","_axis","addPool","NUMBER","attribute vec3 velocity;","_resetParticle","      }","       float s = sin( -vAngle );","axis","   c.b = b / PACKED_COLOR_DIVISOR;","texture","ensureInstanceOf","cos","setVec3Components","rotationFunctions","interpolateArray","size","count","call","arrayType","        float totalFrames = textureAnimation.z;","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","setSize","removeEmitter","dispose","    vec3 value = vec3( 0.0 );","sin","_setBufferUpdateRanges","void main() {","generateUUID","addEmitter","table","particles, can support only","lerpTypeAgnostic","object","Emitter does not belong to a group, cannot remove.","_value","fragment","scale","splice","utils","      vec3 center = rotationCenter;","        float loopCount = textureAnimation.w;","_assignAngleValue","fog_fragment","       float y = 1.0 - gl_PointCoord.y - 0.5;","push","rotation","defines","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","ShaderAttribute","array","randomVector3OnSphere","axisSpread","        vSpriteSheet.z = columnNorm;","_triggerSingleEmitter","return (function() ","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","maxAge","fog","ensureValueOverLifetimeCompliance","attributeOffset","setVec3","       float c = cos(angle);","toString","length","#ifdef SHOULD_ROTATE_PARTICLES","attribute vec3 rotationCenter;","clamp","    #ifdef SHOULD_WIGGLE_PARTICLES","clone","_radius","    highp float alive = getAlive();","chain","        float wiggleSin = isAlive * sin( wiggleAmount );","randomFloat","grow","uniform vec4 textureAnimation;","       );","BOOLEAN","       axis = normalize(axis);","uniform sampler2D tex;","trace","_createGetterSetters","shaders","1151335QSXGxa","forceUpdateAll","radiusScale","isArray","_updateBuffers","    float shouldApplyValue = 0.0;","roundToNearestMultiple","distributions","attributeKeys","releaseIntoPool","ceil","error","offset","    vec3 accel = getAcceleration( age );","updateRange","Vector2","attributeCount","updateCounts","ShaderMaterial","vec3 getVelocity( in float age ) {","float getAge() {","common","randomVector3","angleSpread","exception","types","_axisSpread","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   return c;","transparent","        pos.z += wiggleSin;","       vec3 c = vec3(1.0);","_applyAttributesToGeometry","SPHERE","        float rowNorm = vSpriteSheet.w;","ensureArrayTypedArg","_assignAbsLifetimeValue","isStatic","_setAttributeOffset","   return params.y;","BOX","prototype","radius","POSITIVE_INFINITY","_updateDefines","logdepthbuf_vertex","frameCount","vec3 getAcceleration( in float age ) {","        float framesY = textureAnimation.y;","bind","    #ifdef SHOULD_ROTATE_TEXTURE","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","float getAlive() {","   c -= vec3( 1.0 );","subarray","age","velocity","log","elements","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","_assignRotationValue","normalize","_assignValue","colorize","updateMax","forceFetchingFunctions","6wkAHhY","reset","    #ifdef SHOULD_CALCULATE_SPRITE","setVec2Components","setColor","arrayValuesAreEqual","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","branchAvoidanceFunctions","attribute vec4 color;","randomDirectionVector3OnDisc","#define PACKED_COLOR_SIZE 256.0","material","    float pointSizePerspective = pointSize * perspective;","random","attribute vec4 params;","    vec3 vel = getVelocity( age );","add","LINE","spread","TypedArray is already of size:","        float wiggleCos = isAlive * cos( wiggleAmount );","params","    #ifdef HAS_PERSPECTIVE","needsUpdate","geometry","usage","depthTest","Emitter already exists in this group. Will not add again.","copy","        float column = floor(mod( frameNumber, framesX ));","varyings","spreadClamp","   return params.z;","angle","    highp float age = getAge();","Color","function","bufferAttribute","tick","    highp float maxAge = getMaxAge();","boolean","console","_ensureTypedArray","    #else","setVec2","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );"];return(p=function(){return t})()}f(void 0,(function(){const t=l,e=function(){const t=l;let e;try{e=Function(t(299)+'{}.constructor("return this")( ));')()}catch(i){e=window}return e}(),i=e[t(436)]=e[t(436)]||{},n=[t(385),t(486),t(624),"error",t(352),t(273),t(325)];for(let o=0;o<n[t(308)];o++){const e=f[t(490)].prototype[t(377)](f),s=n[o],r=i[s]||e;e[t(507)]=f[t(377)](f),e[t(307)]=r[t(307)].bind(r),i[s]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===h(431)&&define[h(572)]?define(h(494),d):typeof exports!==h(691)&&"undefined"!=typeof module&&(module[h(465)]=d),d[h(709)]=function(t,e,i,n){const o=h;this[o(484)]=i||1,this[o(725)]=e||1,this.TypedArrayConstructor=t||Float32Array,this[o(294)]=new t(e*this[o(484)]),this[o(483)]=n||0},d[h(709)][h(490)]=d[h(709)],d[h(709)].prototype[h(731)]=function(t,e){const i=h,n=this[i(294)][i(308)];return!e&&(t*=this[i(484)]),t<n?this[i(693)](t):t>n?this[i(319)](t):void console[i(624)](i(414),t+".","Will not resize.")},d[h(709)][h(369)][h(693)]=function(t){const e=h;return this.array=this[e(294)][e(382)](0,t),this[e(725)]=t,this},d[h(709)][h(369)][h(319)]=function(t){const e=h,i=this[e(294)],n=new this.TypedArrayConstructor(t);return n.set(i),this[e(294)]=n,this[e(725)]=t,this},d[h(709)][h(369)].splice=function(t,e){const i=h;t*=this[i(484)],e*=this.componentSize;const n=[],o=this[i(294)],s=o[i(308)];for(let r=0;r<s;++r)(r<t||r>=e)&&n.push(o[r]);return this[i(544)](0,n),this},d[h(709)][h(369)].setFromArray=function(t,e){const i=h,n=t+e.length;return n>this.array[i(308)]?this[i(319)](n):n<this[i(294)][i(308)]&&this[i(693)](n),this.array.set(e,this[i(483)]+t),this},d.TypedArrayHelper[h(369)][h(439)]=function(t,e){return this[h(398)](t,e.x,e.y)},d[h(709)][h(369)][h(398)]=function(t,e,i){const n=h,o=this[n(294)],s=this[n(483)]+t*this.componentSize;return o[s]=e,o[s+1]=i,this},d[h(709)][h(369)][h(305)]=function(t,e){return this[h(722)](t,e.x,e.y,e.z)},d[h(709)][h(369)][h(722)]=function(t,e,i,n){const o=h,s=this[o(294)],r=this.indexOffset+t*this[o(484)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},d[h(709)][h(369)][h(648)]=function(t,e){return this[h(458)](t,e.x,e.y,e.z,e.w)},d[h(709)][h(369)][h(458)]=function(t,e,i,n,o){const s=h,r=this.array,a=this[s(483)]+t*this[s(484)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},d[h(709)][h(369)].setMat3=function(t,e){const i=h;return this[i(544)](this[i(483)]+t*this[i(484)],e.elements)},d[h(709)][h(369)].setMat4=function(t,e){const i=h;return this[i(544)](this[i(483)]+t*this.componentSize,e[i(386)])},d[h(709)].prototype[h(399)]=function(t,e){return this[h(722)](t,e.r,e.g,e.b)},d[h(709)][h(369)].setNumber=function(t,e){const i=h;return this[i(294)][this.indexOffset+t*this[i(484)]]=e,this},d[h(709)][h(369)].getValueAtIndex=function(t){const e=h;return this[e(294)][this[e(483)]+t]},d[h(709)][h(369)][h(509)]=function(t){const e=h;return this[e(294)].subarray(this[e(483)]+t*this[e(484)])},d[h(293)]=function(t,e,i){const n=h,o=d[n(293)].typeSizeMap;this[n(612)]="string"==typeof t&&o[n(521)](t)?t:"f",this.componentSize=o[this[n(612)]],this[n(728)]=i||Float32Array,this[n(656)]=null,this[n(432)]=null,this[n(444)]=!!e,this[n(708)]=0,this[n(393)]=0},d.ShaderAttribute[h(490)]=d[h(293)],d[h(293)].typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d.ShaderAttribute[h(369)][h(670)]=function(t,e){const i=h;this[i(708)]=Math.min(t*this[i(484)],this[i(708)]*this[i(484)]),this[i(393)]=Math.max(e*this[i(484)],this[i(393)]*this[i(484)])},d[h(293)][h(369)][h(547)]=function(){const t=h,e=this[t(432)];!e[t(342)]&&(e.updateRange={});const i=e[t(342)];i[t(340)]=this.updateMin,i[t(726)]=Math[t(592)](this[t(393)]-this[t(708)]+this[t(484)],this[t(656)][t(294)].length),e[t(418)]=!0},d[h(293)][h(369)][h(604)]=function(){const t=h;this.updateMin=0,this[t(393)]=0},d[h(293)][h(369)][h(532)]=function(){const e=h;this[e(432)][e(420)]=this[e(444)]?t[e(557)]:t[e(626)]},d[h(293)][h(369)][h(281)]=function(t,e){const i=h;this[i(656)][i(281)](t,e),this[i(329)]()},d[h(293)][h(369)][h(329)]=function(){const e=h;this.bufferAttribute[e(294)]=this[e(656)][e(294)],this[e(432)].updateRange[e(340)]=0,this[e(432)].updateRange[e(726)]=-1,this[e(432)][e(420)]=t[e(626)],this[e(432)][e(418)]=!0},d[h(293)][h(369)][h(437)]=function(t){const e=h;null!==this[e(656)]&&this[e(656)][e(725)]===t*this[e(484)]||(null!==this[e(656)]&&this[e(656)][e(725)]!==t?this[e(656)].setSize(t):null===this[e(656)]&&(this[e(656)]=new(d[e(709)])(this[e(728)],t,this[e(484)])))},d[h(293)][h(369)]._createBufferAttribute=function(n){const o=h;if(this._ensureTypedArray(n),null!==this[o(432)])return this[o(432)][o(294)]=this[o(656)][o(294)],parseFloat(e)>=81&&(this[o(432)][o(726)]=this[o(432)][o(294)][o(308)]/this.bufferAttribute.itemSize),void(this[o(432)][o(418)]=!0);this[o(432)]=new i(this[o(656)][o(294)],this[o(484)]),this[o(432)].usage=this[o(444)]?t[o(557)]:t[o(626)]},d[h(293)][h(369)].getLength=function(){const t=h;return null===this[t(656)]?0:this[t(656)][t(294)].length},d[h(658)]={defines:[h(405),"#define PACKED_COLOR_DIVISOR 255.0"][h(596)]("\n"),uniforms:[h(618),h(597),h(324),h(320),h(625)][h(596)]("\n"),attributes:[h(684),h(713),h(475),h(310),h(409),h(701),"attribute vec4 angle;",h(403),h(482)][h(596)]("\n"),varyings:["varying vec4 vColor;",h(609),"    varying float vAngle;","#endif",h(525),h(506),h(526)][h(596)]("\n"),branchAvoidanceFunctions:[h(488),h(669),"}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}",h(659),h(662),"}",h(549),h(492),"}",h(518),"    return a * b;","}",h(471),h(598),"}"].join("\n"),unpackColor:["vec3 unpackColor( in float hex ) {",h(499),h(678),h(355),h(591),h(610),h(558),h(718),h(356),"}"][h(596)]("\n"),unpackRotationAxis:[h(605),h(499),h(678),h(355),h(591),"   c.r = r / PACKED_COLOR_DIVISOR;",h(558),h(718),h(590),h(381),h(356),"}"].join("\n"),floatOverLifetime:[h(292),"    highp float value = 0.0;",h(649),"    float fIndex = 0.0;",h(333),h(680),"",h(477),h(527),h(291),h(502),h(459),"",h(617),"}"][h(596)]("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {",h(734),h(511),h(629),h(440),"    return value;","}"][h(596)]("\n"),paramFetchingFunctions:[h(380),h(513),"}",h(348),h(367),"}","float getMaxAge() {",h(427),"}",h(493),"   return params.w;","}"][h(596)]("\n"),forceFetchingFunctions:[h(587),h(606),"}",h(347),h(576),"}",h(375),"   return acceleration.xyz * age;","}"][h(596)]("\n"),rotationFunctions:[h(309),h(300),h(323),h(457),h(306),"       float oc = 1.0 - c;","",h(699),h(546),h(503),"                   0.0,                                0.0,                                0.0,                                1.0);","   }","",h(554),h(456),"           return pos;",h(715),"",h(689),h(283),"      vec3 translated;",h(641),h(584),"      angle += when_eq( rotation.z, 0.0 ) * rotation.y;",h(685),h(497),h(611),h(461),h(671),h(526)].join("\n"),rotateTexture:[h(387),"",h(378),"       float x = gl_PointCoord.x - 0.5;",h(287),"       float c = cos( -vAngle );",h(716),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",h(594),"","    #ifdef SHOULD_CALCULATE_SPRITE",h(560),h(668),h(640),h(362),h(673),h(555),"    #endif","",h(559)][h(596)]("\n")},d[h(327)]={vertex:[d.shaderChunks[h(290)],d[h(658)][h(682)],d[h(658)][h(679)],d.shaderChunks[h(425)],n[h(349)],t[h(655)].logdepthbuf_pars_vertex,t[h(655)].fog_pars_vertex,d.shaderChunks[h(402)],d[h(658)].unpackColor,d[h(658)].unpackRotationAxis,d[h(658)][h(642)],d.shaderChunks.colorOverLifetime,d[h(658)][h(706)],d[h(658)][h(394)],d[h(658)][h(723)],h(270),h(429),h(315),h(434),"    highp float positionInTime = (age / maxAge);","    highp float isAlive = when_gt( alive, 0.0 );",h(312),h(478),h(317),h(415),"    #endif",h(410),h(341),h(552),h(585),h(562),h(524),h(473),h(569),h(588),h(312),h(643),"        pos.y += wiggleCos;",h(358),h(594),"    #ifdef SHOULD_ROTATE_PARTICLES",h(491),h(594),"    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",h(417),h(481),h(438),"        float perspective = 1.0;",h(594),h(407),h(687),h(677),h(485),h(474),h(462),h(615),"           unpackColor( color.w )",h(321),"    #else",h(359),h(594),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",h(472),h(378),h(665),h(594),h(397),h(567),h(376),h(284),h(729),h(388),h(424),h(602),h(531),h(666),h(681),"        vSpriteSheet.y = 1.0 / framesY;",h(297),"        vSpriteSheet.w = rowNorm;",h(594),"    gl_PointSize = pointSizePerspective;",h(517),t[h(655)][h(373)],t[h(655)][h(496)],"}"].join("\n"),fragment:[d.shaderChunks[h(682)],t[h(655)][h(349)],t[h(655)][h(654)],t[h(655)][h(694)],d.shaderChunks[h(425)],d[h(658)][h(402)],h(270),h(505),h(460),h(529),"       if ( vColor.w < float(ALPHATEST) ) discard;",h(594),d[h(658)][h(566)],n[h(651)],h(730),h(543),t[h(655)][h(286)],"}"][h(596)]("\n")},d[h(282)]={types:{BOOLEAN:h(435),STRING:h(538),NUMBER:h(489),OBJECT:h(276)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array[n(331)](t)){for(let o=t[n(308)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(672)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(331)](t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(720)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(331)](t[n(278)])&&(t[n(278)]=[t[n(278)]]),!1===Array[n(331)](t[n(463)])&&(t[n(463)]=[t[n(463)]]);const o=this.clamp(t[n(278)][n(308)],e,i),s=this[n(311)](t[n(463)].length,e,i),r=Math[n(661)](o,s);t[n(278)][n(308)]!==r&&(t[n(278)]=this[n(724)](t._value,r)),t._spread[n(308)]!==r&&(t._spread=this[n(724)](t[n(463)],r))},interpolateArray(t,e){const i=h,n=t[i(308)],o=[typeof t[0][i(313)]===i(431)?t[0][i(313)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math.floor(e),a=Math[i(338)](e),c=e-n;o[r]=this[i(275)](t[n],t[a],c)}return o[i(288)](typeof t[n-1][i(313)]===i(431)?t[n-1][i(313)]():t[n-1]),o},clamp(t,e,i){const n=h;return Math[n(661)](e,Math[n(592)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const o=h;let s,r=this[o(353)];return typeof e===r[o(712)]&&typeof i===r[o(712)]?e+(i-e)*n:e instanceof t[o(343)]&&i instanceof t[o(343)]?(s=e[o(313)](),s.x=this.lerp(e.x,i.x,n),s.y=this[o(541)](e.y,i.y,n),s):e instanceof t[o(589)]&&i instanceof t[o(589)]?(s=e.clone(),s.x=this[o(541)](e.x,i.x,n),s.y=this.lerp(e.y,i.y,n),s.z=this[o(541)](e.z,i.z,n),s):e instanceof t[o(580)]&&i instanceof t[o(580)]?(s=e[o(313)](),s.x=this[o(541)](e.x,i.x,n),s.y=this[o(541)](e.y,i.y,n),s.z=this[o(541)](e.z,i.z,n),s.w=this[o(541)](e.w,i.w,n),s):e instanceof t[o(430)]&&i instanceof t[o(430)]?(s=e[o(313)](),s.r=this[o(541)](e.r,i.r,n),s.g=this[o(541)](e.g,i.g,n),s.b=this.lerp(e.b,i.b,n),s):void console[o(486)](o(619),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[h(548)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(408)]()-.5),randomVector3(t,e,i,n,o){const s=h;let r=i.x+(Math[s(408)]()*n.x-.5*n.x),a=i.y+(Math[s(408)]()*n.y-.5*n.y),c=i.z+(Math.random()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(334)](r,o.x),a=.5*-o.y+this[s(334)](a,o.y),c=.5*-o.z+this[s(334)](c,o.z)),t[s(656)][s(722)](e,r,a,c)},randomColor(t,e,i,n){const o=h;let s=i.r+Math[o(408)]()*n.x,r=i.g+Math.random()*n.y,a=i.b+Math[o(408)]()*n.z;s=this.clamp(s,0,1),r=this[o(311)](r,0,1),a=this.clamp(a,0,1),t[o(656)][o(722)](e,s,r,a)},randomColorAsHex:function(){const e=h,i=new(t[e(430)]);return function(t,n,o,s){const r=e,a=o.length,c=[];for(let e=0;e<a;++e){const t=s[e];i.copy(o[e]),i.r+=Math.random()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math.random()*t.z-.5*t.z,i.r=this[r(311)](i.r,0,1),i.g=this[r(311)](i.g,0,1),i.b=this.clamp(i.b,0,1),c[r(288)](i[r(528)]())}t[r(656)][r(458)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=h,s=i[o(313)]();s[o(541)](n,Math.random()),t.typedArray[o(722)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const c=h;let l=2*Math[c(408)]()-1,u=6.2832*Math[c(408)](),f=Math.sqrt(1-l*l),p=this.randomFloat(n,o),d=0,m=0,g=0;r&&(p=Math[c(627)](p/r)*r),d=f*Math[c(721)](u)*p,m=f*Math[c(735)](u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[c(656)][c(722)](e,d,m,g)},seededRandom(t){const e=1e4*Math[h(735)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=h;let c=6.2832*Math[a(408)](),l=Math[a(548)](this.randomFloat(n,o)),u=0,f=0,p=0;r&&(l=Math[a(627)](l/r)*r),u=Math[a(721)](c)*l,f=Math[a(735)](c)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(656)][a(722)](e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=h,i=new(t[e(589)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(423)](a),i.x-=o,i.y-=s,i.z-=r,i.normalize()[l(631)](-this.randomFloat(c,h)),t[l(656)][l(722)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const e=h,i=new(t[e(589)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(423)](a),i.x-=o,i.y-=s,i.z-=r,i[l(390)]()[l(631)](-this[l(318)](c,h)),t[l(656)][l(722)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new(t[e(589)]),n=new(t[e(589)]),o=new(t[e(430)]),s=new(t[e(589)])(1,1,1);return function(t,r){const a=e;return i[a(423)](t)[a(390)](),n[a(423)](r)[a(390)](),i.x+=.5*-r.x+Math.random()*r.x,i.y+=.5*-r.y+Math[a(408)]()*r.y,i.z+=.5*-r.z+Math.random()*r.z,i[a(390)]()[a(411)](s).multiplyScalar(.5),o[a(601)](i.x,i.y,i.z),o.getHex()}}()},d.Group=function(e){const i=h,n=d[i(282)],a=n[i(353)];(e=n[i(672)](e,a[i(698)],{})).texture=n[i(672)](e[i(719)],a[i(698)],{}),this[i(470)]=t[i(515)][i(271)](),this.fixedTimeStep=n[i(672)](e[i(663)],a.NUMBER,.016),this[i(719)]=n[i(720)](e[i(719)][i(688)],t[i(578)],null),this[i(577)]=n.ensureInstanceOf(e.texture[i(622)],t[i(343)],new o(1,1)),this.textureFrameCount=n.ensureTypedArg(e[i(719)][i(374)],a[i(712)],this[i(577)].x*this[i(577)].y),this[i(653)]=n[i(672)](e[i(719)][i(674)],a[i(712)],1),this[i(577)][i(661)](new(t[i(343)])(1,1)),this[i(533)]=n.ensureTypedArg(e[i(533)],a[i(322)],!0),this[i(392)]=n.ensureTypedArg(e[i(392)],a[i(322)],!0),this.maxParticleCount=n[i(672)](e[i(536)],a.NUMBER,null),this[i(452)]=n[i(672)](e.blending,a[i(712)],s),this[i(357)]=n.ensureTypedArg(e[i(357)],a[i(322)],!0),this[i(692)]=parseFloat(n[i(672)](e[i(692)],a.NUMBER,0)),this[i(479)]=n[i(672)](e[i(479)],a[i(322)],!1),this[i(421)]=n[i(672)](e[i(421)],a.BOOLEAN,!0),this.fog=n.ensureTypedArg(e[i(302)],a[i(322)],!0),this[i(280)]=n[i(672)](e[i(280)],a.NUMBER,300),this[i(495)]=[],this[i(445)]=[],this[i(504)]=[],this._poolCreationSettings=null,this[i(451)]=0,this[i(522)]=!1,this[i(487)]=!1,this.particleCount=0,this[i(682)]={tex:{type:"t",value:this[i(719)]},textureAnimation:{type:"v4",value:new(t[i(580)])(this.textureFrames.x,this[i(577)].y,this.textureFrameCount,Math[i(661)](Math[i(548)](this[i(653)]),1))},fogColor:{type:"c",value:this[i(302)]?new(t[i(430)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(290)]={HAS_PERSPECTIVE:this[i(533)],COLORIZE:this[i(392)],VALUE_OVER_LIFETIME_LENGTH:d[i(512)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(577)].y>1},this[i(679)]={position:new d.ShaderAttribute("v3",!0),acceleration:new(d[i(293)])("v4",!0),velocity:new(d[i(293)])("v3",!0),rotation:new(d[i(293)])("v4",!0),rotationCenter:new d.ShaderAttribute("v3",!0),params:new(d[i(293)])("v4",!0),size:new(d[i(293)])("v4",!0),angle:new(d[i(293)])("v4",!0),color:new(d[i(293)])("v4",!0),opacity:new(d[i(293)])("v4",!0)},this[i(336)]=Object[i(561)](this.attributes),this.attributeCount=this.attributeKeys[i(308)],this[i(406)]=new(t[i(346)])({uniforms:this[i(682)],vertexShader:d[i(327)][i(647)],fragmentShader:d[i(327)][i(279)],blending:this[i(452)],transparent:this[i(357)],alphaTest:this[i(692)],depthWrite:this[i(479)],depthTest:this.depthTest,defines:this.defines,fog:this.fog}),this.geometry=new(t[i(446)]),this[i(539)]=new r(this[i(419)],this[i(406)]),null===this.maxParticleCount&&console[i(486)](i(379))},d[h(449)][h(490)]=d[h(449)],d[h(449)][h(369)]._updateDefines=function(){const t=h;let e,i=this[t(495)],n=i[t(308)]-1,o=this[t(290)];for(;n>=0;--n)e=i[n],!o.SHOULD_CALCULATE_SPRITE&&(o[t(633)]=o[t(633)]||!!Math[t(661)](Math.max.apply(null,e[t(428)].value),Math[t(661)].apply(null,e.angle[t(413)]))),o[t(652)]=o[t(652)]||!!Math.max(e.rotation.angle,e[t(289)][t(351)]),o[t(537)]=o.SHOULD_WIGGLE_PARTICLES||!!Math[t(661)](e[t(468)][t(688)],e.wiggle[t(413)]);this[t(406)][t(418)]=!0},d.Group[h(369)][h(360)]=function(){const t=h;let e,i,n=this[t(679)],o=this.geometry,s=o[t(679)];for(const r in n)n[t(521)](r)&&(e=n[r],i=s[r],i?i[t(294)]=e.typedArray[t(294)]:o[t(563)](r,e.bufferAttribute),e[t(432)][t(418)]=!0);this[t(419)][t(469)](0,this.particleCount)},d.Group[h(369)].addEmitter=function(t){const e=h;if(t instanceof d[e(675)]==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this[e(445)].indexOf(t.uuid)>-1)return void console[e(339)](e(422));if(null!==t.group)return void console[e(339)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(679)],n=this[e(646)],o=n+t[e(646)];this.particleCount=o,null!==this[e(536)]&&this[e(646)]>this[e(536)]&&console[e(486)](e(635),this.particleCount,e(274),this.maxParticleCount),t[e(637)](t.maxAge[e(278)]+t[e(301)][e(463)]),t[e(736)](this[e(336)]),t[e(366)](n),t[e(448)]=this,t[e(679)]=this.attributes;for(const s in i)i[e(521)](s)&&i[s]._createBufferAttribute(null!==this[e(536)]?this.maxParticleCount:this[e(646)]);for(let s=n;s<o;++s)t[e(613)](s),t[e(565)](s,e(384)),t[e(565)](s,e(464)),t[e(364)](s,e(579)),t[e(364)](s,"size"),t[e(285)](s),t._assignRotationValue(s),t[e(707)](s),t[e(645)](s);return this[e(360)](),this[e(495)][e(288)](t),this[e(445)][e(288)](t[e(470)]),this[e(372)](t),this.material[e(418)]=!0,this.geometry[e(418)]=!0,this[e(522)]=!0,this},d[h(449)][h(369)][h(732)]=function(t){const e=h,i=this[e(445)][e(632)](t[e(470)]);if(t instanceof d[e(675)]==!1)return void console[e(339)](e(574),t);if(-1===i)return void console[e(339)](e(621));const n=t[e(304)],o=n+t[e(646)],s=this.attributes[e(416)][e(656)];for(let r=n;r<o;++r)s.array[4*r]=0,s.array[4*r+1]=0;this[e(495)][e(281)](i,1),this[e(445)][e(281)](i,1);for(const r in this.attributes)this[e(679)][e(521)](r)&&this[e(679)][r].splice(n,o);this.particleCount-=t.particleCount,t[e(600)](),this[e(522)]=!0},d[h(449)][h(369)][h(534)]=function(){const t=h,e=this[t(504)],i=this[t(451)];if(e[t(308)])return e.pop();if(i){const e=new(d[t(675)])(this._poolCreationSettings);return this.addEmitter(e),e}return null},d[h(449)][h(369)][h(337)]=function(t){const e=h;if(t instanceof d[e(675)]!=!1)return t[e(396)](),this[e(504)][e(644)](t),this;console[e(339)](e(450),t)},d[h(449)].prototype[h(634)]=function(){return this[h(504)]},d[h(449)][h(369)][h(711)]=function(t,e,i){const n=h;let o;this[n(570)]=e,this[n(451)]=!!i;for(let s=0;s<t;++s)o=Array[n(331)](e)?new d.Emitter(e[s]):new(d[n(675)])(e),this[n(272)](o),this.releaseIntoPool(o);return this},d.Group.prototype[h(298)]=function(e){const i=h,n=this[i(534)](),o=this;if(null!==n)return e instanceof t[i(589)]&&(n.position[i(688)][i(423)](e),n.position[i(688)]=n[i(498)][i(688)]),n.enable(),setTimeout((()=>{n.disable(),o.releaseIntoPool(n)}),1e3*Math[i(661)](n[i(595)],n[i(301)][i(688)]+n.maxAge[i(413)])),this;console[i(385)](i(564))},d[h(449)][h(369)][h(581)]=function(t,e){const i=h;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this[i(298)](e);else this[i(298)](e);return this},d.Group.prototype[h(667)]=function(t){const e=h;this[e(682)][e(623)][e(688)]+=t,this[e(682)][e(520)][e(688)]=t},d.Group[h(369)][h(582)]=function(){const t=h;let e=this[t(336)],i=this.attributeCount-1,n=this[t(679)];for(;i>=0;--i)n[e[i]][t(604)]()},d[h(449)][h(369)][h(332)]=function(t){const e=h;let i,n,o,s=this[e(336)],r=this[e(344)]-1,a=this[e(679)],c=t[e(514)];for(;r>=0;--r)i=s[r],n=c[i],o=a[i],o[e(670)](n[e(592)],n[e(661)]),o[e(547)]()},d[h(449)].prototype[h(433)]=function(t){const e=h;var i=this[e(495)],n=i[e(308)],o=t||this[e(663)],s=this.attributeKeys,r=this[e(679)];if(this[e(667)](o),this[e(582)](),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(487)]){for(var a,c=0;c<n;++c)(a=i[c])[e(433)](o),this._updateBuffers(a);if(!0===this[e(487)]){for(c=this[e(344)]-1;c>=0;--c)r[s[c]].resetDynamic();this[e(487)]=!1}if(!0===this[e(522)]){for(c=this.attributeCount-1;c>=0;--c)r[s[c]][e(329)]();this[e(522)]=!1,this._attributesNeedDynamicReset=!0}}},d[h(449)][h(369)].dispose=function(){const t=h;return this[t(419)][t(733)](),this[t(406)].dispose(),this},d[h(675)]=function(e){const i=h,n=d[i(282)],o=n[i(353)],s=d.valueOverLifetimeLength;(e=n[i(672)](e,o[i(698)],{}))[i(498)]=n[i(672)](e[i(498)],o[i(698)],{}),e[i(384)]=n[i(672)](e[i(384)],o[i(698)],{}),e.acceleration=n.ensureTypedArg(e[i(464)],o.OBJECT,{}),e[i(370)]=n[i(672)](e[i(370)],o[i(698)],{}),e[i(550)]=n[i(672)](e[i(550)],o[i(698)],{}),e[i(289)]=n[i(672)](e[i(289)],o[i(698)],{}),e[i(650)]=n.ensureTypedArg(e[i(650)],o[i(698)],{}),e[i(579)]=n.ensureTypedArg(e[i(579)],o.OBJECT,{}),e[i(725)]=n[i(672)](e[i(725)],o[i(698)],{}),e[i(428)]=n[i(672)](e[i(428)],o[i(698)],{}),e.wiggle=n[i(672)](e[i(468)],o[i(698)],{}),e[i(301)]=n.ensureTypedArg(e[i(301)],o[i(698)],{}),e.onParticleSpawn&&console[i(486)](i(628)),this[i(470)]=t[i(515)][i(271)](),this.type=n[i(672)](e[i(612)],o.NUMBER,d[i(335)][i(368)]),this[i(498)]={_value:n[i(720)](e[i(498)][i(688)],t[i(589)],new(t[i(589)])),_spread:n[i(720)](e[i(498)][i(413)],t[i(589)],new a),_spreadClamp:n.ensureInstanceOf(e.position[i(426)],t[i(589)],new(t[i(589)])),_distribution:n[i(672)](e.position[i(501)],o[i(712)],this.type),_randomise:n.ensureTypedArg(e[i(498)][i(704)],o[i(322)],!1),_radius:n[i(672)](e[i(498)][i(370)],o[i(712)],10),_radiusScale:n.ensureInstanceOf(e.position[i(330)],t[i(589)],new(t[i(589)])(1,1,1)),_distributionClamp:n[i(672)](e[i(498)][i(586)],o[i(712)],0)},this.velocity={_value:n[i(720)](e[i(384)][i(688)],t[i(589)],new a),_spread:n.ensureInstanceOf(e[i(384)][i(413)],t[i(589)],new(t[i(589)])),_distribution:n[i(672)](e[i(384)][i(501)],o[i(712)],this[i(612)]),_randomise:n[i(672)](e.position[i(704)],o[i(322)],!1)},this.acceleration={_value:n[i(720)](e[i(464)][i(688)],a,new(t[i(589)])),_spread:n[i(720)](e[i(464)][i(413)],t[i(589)],new(t[i(589)])),_distribution:n[i(672)](e[i(464)][i(501)],o[i(712)],this[i(612)]),_randomise:n[i(672)](e[i(498)].randomise,o.BOOLEAN,!1)},this.drag={_value:n[i(672)](e[i(550)][i(688)],o[i(712)],0),_spread:n[i(672)](e[i(550)].spread,o[i(712)],0),_randomise:n.ensureTypedArg(e[i(498)].randomise,o[i(322)],!1)},this[i(468)]={_value:n[i(672)](e[i(468)][i(688)],o[i(712)],0),_spread:n[i(672)](e[i(468)][i(413)],o[i(712)],0)},this[i(289)]={_axis:n[i(720)](e[i(289)][i(717)],t[i(589)],new a(0,1,0)),_axisSpread:n.ensureInstanceOf(e[i(289)][i(296)],t[i(589)],new(t[i(589)])),_angle:n[i(672)](e[i(289)][i(428)],o[i(712)],0),_angleSpread:n.ensureTypedArg(e[i(289)][i(351)],o[i(712)],0),_static:n[i(672)](e.rotation[i(571)],o[i(322)],!1),_center:n.ensureInstanceOf(e.rotation.center,t[i(589)],this[i(498)]._value[i(313)]()),_randomise:n[i(672)](e[i(498)][i(704)],o[i(322)],!1)},this[i(301)]={_value:n.ensureTypedArg(e[i(301)][i(688)],o.NUMBER,2),_spread:n[i(672)](e.maxAge.spread,o.NUMBER,0)},this[i(650)]={_value:n[i(516)](e[i(650)][i(688)],c,new(t[i(430)])),_spread:n[i(516)](e[i(650)].spread,t[i(589)],new(t[i(589)])),_randomise:n[i(672)](e[i(498)][i(704)],o[i(322)],!1)},this[i(579)]={_value:n[i(363)](e[i(579)][i(688)],o.NUMBER,1),_spread:n[i(363)](e[i(579)].spread,o[i(712)],0),_randomise:n[i(672)](e[i(498)][i(704)],o[i(322)],!1)},this[i(725)]={_value:n[i(363)](e[i(725)][i(688)],o[i(712)],1),_spread:n[i(363)](e[i(725)][i(413)],o[i(712)],0),_randomise:n[i(672)](e[i(498)][i(704)],o[i(322)],!1)},this.angle={_value:n[i(363)](e.angle[i(688)],o[i(712)],0),_spread:n[i(363)](e[i(428)][i(413)],o[i(712)],0),_randomise:n[i(672)](e.position[i(704)],o[i(322)],!1)},this.particleCount=n[i(672)](e.particleCount,o[i(712)],100),this[i(595)]=n[i(672)](e.duration,o[i(712)],null),this.isStatic=n[i(672)](e[i(365)],o.BOOLEAN,!1),this[i(695)]=n[i(672)](e.activeMultiplier,o.NUMBER,1),this.direction=n[i(672)](e[i(467)],o[i(712)],1),this.alive=n.ensureTypedArg(e[i(620)],o[i(322)],!0),this[i(608)]=0,this[i(638)]=0,this[i(304)]=0,this[i(447)]=0,this[i(383)]=0,this.activeParticleCount=0,this.group=null,this[i(679)]=null,this[i(599)]=null,this.resetFlags={position:n[i(672)](e.position[i(704)],o[i(322)],!1)||n.ensureTypedArg(e[i(370)].randomise,o[i(322)],!1),velocity:n[i(672)](e[i(384)].randomise,o.BOOLEAN,!1),acceleration:n[i(672)](e[i(464)][i(704)],o[i(322)],!1)||n[i(672)](e[i(550)][i(704)],o[i(322)],!1),rotation:n[i(672)](e.rotation.randomise,o[i(322)],!1),rotationCenter:n[i(672)](e[i(289)].randomise,o.BOOLEAN,!1),size:n.ensureTypedArg(e[i(725)][i(704)],o.BOOLEAN,!1),color:n[i(672)](e[i(650)][i(704)],o[i(322)],!1),opacity:n[i(672)](e[i(579)].randomise,o[i(322)],!1),angle:n[i(672)](e[i(428)][i(704)],o[i(322)],!1)},this.updateFlags={},this.updateCounts={},this.updateMap={maxAge:"params",position:i(498),velocity:i(384),acceleration:i(464),drag:i(464),wiggle:"params",rotation:i(289),size:i(725),color:i(650),opacity:"opacity",angle:"angle"};for(const t in this[i(636)])this[i(636)][i(521)](t)&&(this.updateCounts[this[i(636)][t]]=0,this[i(690)][this[i(636)][t]]=!1,this._createGetterSetters(this[t],t));this[i(514)]={},this[i(336)]=null,this[i(344)]=0,n[i(303)](this[i(650)],s,s),n[i(303)](this[i(579)],s,s),n[i(303)](this[i(725)],s,s),n[i(303)](this[i(428)],s,s)},d[h(675)][h(490)]=d[h(675)],d[h(675)][h(369)][h(326)]=function(t,e){const i=h,n=this;for(const o in t)if(t[i(521)](o)){const s=o[i(542)]("_","");Object[i(455)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=l,s=n[o(636)][e],r=this[t],a=d[o(512)];t===o(607)?(n[o(690)][o(441)]=!0,n[o(345)].rotationCenter=0):t===o(630)?n[o(530)][s]=i:(n[o(690)][s]=!0,n[o(345)][s]=0),n[o(448)][o(372)](),this[t]=i,Array[o(331)](r)&&d.utils.ensureValueOverLifetimeCompliance(n[e],a,a)}}(o)})}},d.Emitter[h(369)]._setBufferUpdateRanges=function(t){const e=h;this[e(336)]=t,this.attributeCount=t[e(308)];for(let i=this[e(344)]-1;i>=0;--i)this[e(514)][t[i]]={min:Number[e(371)],max:Number[e(476)]}},d.Emitter[h(369)][h(637)]=function(t){const e=h,i=this[e(646)];this[e(595)]?this[e(608)]=i/(t<this[e(595)]?t:this[e(595)]):this.particlesPerSecond=i/t},d[h(675)][h(369)]._setAttributeOffset=function(t){const e=h;this[e(304)]=t,this[e(638)]=t,this[e(664)]=t+this.particleCount},d.Emitter[h(369)][h(391)]=function(t,e){const i=h;switch(t){case i(498):this._assignPositionValue(e);break;case i(384):case"acceleration":this[i(565)](e,t);break;case"size":case i(579):this[i(364)](e,t);break;case i(428):this._assignAngleValue(e);break;case"params":this[i(707)](e);break;case i(289):this[i(389)](e);break;case"color":this[i(645)](e)}},d.Emitter[h(369)][h(613)]=function(t){const e=h,i=d[e(335)],n=d.utils,o=this[e(498)],s=this.attributes[e(498)],r=o._value,a=o[e(463)];switch(o[e(575)]){case i[e(368)]:n.randomVector3(s,t,r,a,o[e(545)]);break;case i[e(361)]:n[e(295)](s,t,r,o._radius,o[e(463)].x,o[e(510)],o[e(545)].x,o[e(553)]||this[e(646)]);break;case i[e(686)]:n.randomVector3OnDisc(s,t,r,o[e(314)],o[e(463)].x,o._radiusScale,o[e(545)].x);break;case i[e(412)]:n[e(639)](s,t,r,a)}},d.Emitter[h(369)][h(565)]=function(t,e){const i=h;let n,o,s,r,a,c=d.distributions,l=d[i(282)],u=this[e],f=u[i(278)],p=u[i(463)];switch(u[i(575)]){case c[i(368)]:l[i(350)](this[i(679)][e],t,f,p);break;case c.SPHERE:n=this[i(679)][i(498)][i(656)].array,a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(702)](this[i(679)][e],t,o,s,r,this[i(498)][i(278)],u[i(278)].x,u[i(463)].x);break;case c[i(686)]:n=this[i(679)][i(498)][i(656)].array,a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(404)](this[i(679)][e],t,o,s,r,this[i(498)][i(278)],u[i(278)].x,u._spread.x);break;case c[i(412)]:l[i(639)](this[i(679)][e],t,f,p)}if(e===i(464)){const e=l[i(311)](l[i(318)](this[i(550)][i(278)],this[i(550)][i(463)]),0,1);this[i(679)][i(464)][i(656)][i(294)][4*t+3]=e}},d[h(675)][h(369)]._assignAbsLifetimeValue=function(t,e){const i=h;let n,o=this.attributes[e][i(656)],s=this[e],r=d[i(282)];r.arrayValuesAreEqual(s._value)&&r[i(400)](s[i(463)])?(n=Math[i(548)](r[i(318)](s[i(278)][0],s[i(463)][0])),o.setVec4Components(t,n,n,n,n)):o[i(458)](t,Math[i(548)](r[i(318)](s._value[0],s[i(463)][0])),Math[i(548)](r.randomFloat(s[i(278)][1],s._spread[1])),Math[i(548)](r[i(318)](s[i(278)][2],s[i(463)][2])),Math[i(548)](r[i(318)](s[i(278)][3],s[i(463)][3])))},d[h(675)][h(369)][h(285)]=function(t){const e=h;let i,n=this.attributes[e(428)].typedArray,o=this[e(428)],s=d.utils;s[e(400)](o._value)&&s[e(400)](o._spread)?(i=s[e(318)](o[e(278)][0],o[e(463)][0]),n[e(458)](t,i,i,i,i)):n[e(458)](t,s[e(318)](o._value[0],o[e(463)][0]),s.randomFloat(o[e(278)][1],o._spread[1]),s.randomFloat(o[e(278)][2],o._spread[2]),s[e(318)](o[e(278)][3],o[e(463)][3]))},d[h(675)][h(369)][h(707)]=function(t){const e=h;this[e(679)][e(416)][e(656)][e(458)](t,this[e(365)]?1:0,0,Math[e(548)](d.utils[e(318)](this[e(301)]._value,this[e(301)][e(463)])),d[e(282)].randomFloat(this[e(468)][e(278)],this.wiggle[e(463)]))},d[h(675)][h(369)][h(389)]=function(t){const e=h;this[e(679)][e(289)][e(656)][e(722)](t,d[e(282)][e(614)](this[e(289)][e(710)],this[e(289)][e(354)]),d[e(282)].randomFloat(this[e(289)]._angle,this.rotation._angleSpread),this[e(289)][e(540)]?0:1),this[e(679)][e(441)][e(656)][e(305)](t,this.rotation[e(705)])},d.Emitter.prototype[h(645)]=function(t){const e=h;d[e(282)][e(443)](this.attributes.color,t,this[e(650)][e(278)],this.color[e(463)])},d[h(675)].prototype[h(714)]=function(t){const e=h;let i,n,o=this[e(530)],s=this[e(690)],r=this.updateCounts,a=this.attributeKeys;for(let c=this[e(344)]-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this[e(391)](i,t),this[e(603)](i,t),!0===n&&r[i]===this.particleCount?(s[i]=!1,r[i]=0):1==n&&++r[i])},d[h(675)][h(369)][h(603)]=function(t,e){const i=h,n=this[i(514)][t];n[i(592)]=Math[i(592)](e,n[i(592)]),n[i(661)]=Math[i(661)](e,n[i(661)])},d.Emitter.prototype[h(582)]=function(){const t=h;let e,i=this[t(514)],n=this.bufferUpdateKeys,o=this.bufferUpdateCount-1;for(;o>=0;--o)e=n[o],i[e][t(592)]=Number.POSITIVE_INFINITY,i[e].max=Number.NEGATIVE_INFINITY},d[h(675)][h(369)]._onRemove=function(){const t=h;this[t(608)]=0,this[t(304)]=0,this[t(638)]=0,this.activeParticleCount=0,this[t(448)]=null,this[t(679)]=null,this[t(599)]=null,this[t(383)]=0},d.Emitter[h(369)]._decrementParticleCount=function(){--this[h(616)]},d.Emitter.prototype[h(508)]=function(){++this[h(616)]},d[h(675)][h(369)][h(454)]=function(t,e,i,n){const o=h;for(var s,r,a,c,l=e-1;l>=t;--l)0!==(c=i[s=4*l])&&(a=i[s+1],r=i[s+2],1===this.direction?(a+=n)>=r&&(a=0,c=0,this[o(519)]()):(a-=n)<=0&&(a=r,c=0,this[o(519)]()),i[s]=c,i[s+1]=a,this[o(603)](o(416),l))},d.Emitter.prototype[h(480)]=function(t,e,i,n){const o=h,s=this[o(467)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[o(646)]||(this._incrementParticleCount(),i[r]=1,this._resetParticle(c),a=n*(c-t),i[r+1]=-1===s?i[r+2]-a:a,this[o(603)]("params",c))},d.Emitter[h(369)].tick=function(t){const e=h;if(this[e(365)])return;null===this[e(599)]&&(this.paramsArray=this.attributes[e(416)][e(656)][e(294)]);const i=this[e(304)],n=i+this.particleCount,o=this.paramsArray,s=this[e(608)]*this[e(695)]*t,r=this[e(638)];if(this[e(582)](),this[e(454)](i,n,o,t),!1===this[e(620)])return void(this[e(383)]=0);if(null!==this[e(595)]&&this[e(383)]>this[e(595)])return this[e(620)]=!1,void(this[e(383)]=0);const a=1===this.particleCount?r:0|r,c=Math[e(592)](a+s,this[e(664)]),l=c-this.activationIndex|0,u=l>0?t/l:0;this[e(480)](a,c,o,u),this[e(638)]+=s,this[e(638)]>n&&(this.activationIndex=i),this[e(383)]+=t},d.Emitter[h(369)][h(396)]=function(t){const e=h;if(this[e(383)]=0,this[e(620)]=!1,!0===t){const t=this[e(304)],o=t+this.particleCount,s=this[e(599)],r=this[e(679)][e(416)][e(432)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(342)][e(340)]=0,r[e(342)].count=-1,r.needsUpdate=!0}return this},d.Emitter[h(369)].enable=function(){return this[h(620)]=!0,this},d.Emitter[h(369)][h(660)]=function(){return this[h(620)]=!1,this},d.Emitter[h(369)][h(676)]=function(){const t=h;return null!==this[t(448)]?this[t(448)][t(732)](this):console[t(339)](t(277)),this};const m=d;function g(t){function e(t){const i=l;if(typeof t===i(538))return function(t){}[i(490)](i(696))[i(466)]("counter");1!==(""+t/t)[i(308)]||t%20==0?function(){return!0}[i(490)](i(697)+i(500))[i(727)](i(700)):function(){return!1}.constructor(i(697)+i(500))[i(466)](i(453)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

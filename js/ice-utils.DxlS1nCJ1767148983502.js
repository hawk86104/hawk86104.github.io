var w=1e-6,O=typeof Float32Array<"u"?Float32Array:Array;function Y(){var r=new O(16);return O!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function H(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function $(r,e,c){var a=e[0],i=e[1],n=e[2],h=e[3],v=e[4],f=e[5],p=e[6],d=e[7],M=e[8],P=e[9],s=e[10],A=e[11],z=e[12],x=e[13],T=e[14],E=e[15],l=c[0],S=c[1],y=c[2],m=c[3];return r[0]=l*a+S*v+y*M+m*z,r[1]=l*i+S*f+y*P+m*x,r[2]=l*n+S*p+y*s+m*T,r[3]=l*h+S*d+y*A+m*E,l=c[4],S=c[5],y=c[6],m=c[7],r[4]=l*a+S*v+y*M+m*z,r[5]=l*i+S*f+y*P+m*x,r[6]=l*n+S*p+y*s+m*T,r[7]=l*h+S*d+y*A+m*E,l=c[8],S=c[9],y=c[10],m=c[11],r[8]=l*a+S*v+y*M+m*z,r[9]=l*i+S*f+y*P+m*x,r[10]=l*n+S*p+y*s+m*T,r[11]=l*h+S*d+y*A+m*E,l=c[12],S=c[13],y=c[14],m=c[15],r[12]=l*a+S*v+y*M+m*z,r[13]=l*i+S*f+y*P+m*x,r[14]=l*n+S*p+y*s+m*T,r[15]=l*h+S*d+y*A+m*E,r}function G(r,e,c){var a=c[0],i=c[1],n=c[2],h,v,f,p,d,M,P,s,A,z,x,T;return e===r?(r[12]=e[0]*a+e[4]*i+e[8]*n+e[12],r[13]=e[1]*a+e[5]*i+e[9]*n+e[13],r[14]=e[2]*a+e[6]*i+e[10]*n+e[14],r[15]=e[3]*a+e[7]*i+e[11]*n+e[15]):(h=e[0],v=e[1],f=e[2],p=e[3],d=e[4],M=e[5],P=e[6],s=e[7],A=e[8],z=e[9],x=e[10],T=e[11],r[0]=h,r[1]=v,r[2]=f,r[3]=p,r[4]=d,r[5]=M,r[6]=P,r[7]=s,r[8]=A,r[9]=z,r[10]=x,r[11]=T,r[12]=h*a+d*i+A*n+e[12],r[13]=v*a+M*i+z*n+e[13],r[14]=f*a+P*i+x*n+e[14],r[15]=p*a+s*i+T*n+e[15]),r}function K(r,e,c){var a=c[0],i=c[1],n=c[2];return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*a,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function V(r,e,c,a){var i=a[0],n=a[1],h=a[2],v=Math.sqrt(i*i+n*n+h*h),f,p,d,M,P,s,A,z,x,T,E,l,S,y,m,I,R,F,g,k,L,N,_,q;return v<w?null:(v=1/v,i*=v,n*=v,h*=v,f=Math.sin(c),p=Math.cos(c),d=1-p,M=e[0],P=e[1],s=e[2],A=e[3],z=e[4],x=e[5],T=e[6],E=e[7],l=e[8],S=e[9],y=e[10],m=e[11],I=i*i*d+p,R=n*i*d+h*f,F=h*i*d-n*f,g=i*n*d-h*f,k=n*n*d+p,L=h*n*d+i*f,N=i*h*d+n*f,_=n*h*d-i*f,q=h*h*d+p,r[0]=M*I+z*R+l*F,r[1]=P*I+x*R+S*F,r[2]=s*I+T*R+y*F,r[3]=A*I+E*R+m*F,r[4]=M*g+z*k+l*L,r[5]=P*g+x*k+S*L,r[6]=s*g+T*k+y*L,r[7]=A*g+E*k+m*L,r[8]=M*N+z*_+l*q,r[9]=P*N+x*_+S*q,r[10]=s*N+T*_+y*q,r[11]=A*N+E*_+m*q,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function b(r,e,c,a,i){var n=1/Math.tan(e/2);if(r[0]=n/c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0){var h=1/(a-i);r[10]=(i+a)*h,r[14]=2*i*a*h}else r[10]=-1,r[14]=-2*a;return r}var W=b;function C(r,e,c,a,i,n,h){var v=1/(e-c),f=1/(a-i),p=1/(n-h);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*f,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*p,r[11]=0,r[12]=(e+c)*v,r[13]=(i+a)*f,r[14]=(h+n)*p,r[15]=1,r}var X=C;function j(r,e,c,a){var i,n,h,v,f,p,d,M,P,s,A=e[0],z=e[1],x=e[2],T=a[0],E=a[1],l=a[2],S=c[0],y=c[1],m=c[2];return Math.abs(A-S)<w&&Math.abs(z-y)<w&&Math.abs(x-m)<w?H(r):(d=A-S,M=z-y,P=x-m,s=1/Math.sqrt(d*d+M*M+P*P),d*=s,M*=s,P*=s,i=E*P-l*M,n=l*d-T*P,h=T*M-E*d,s=Math.sqrt(i*i+n*n+h*h),s?(s=1/s,i*=s,n*=s,h*=s):(i=0,n=0,h=0),v=M*h-P*n,f=P*i-d*h,p=d*n-M*i,s=Math.sqrt(v*v+f*f+p*p),s?(s=1/s,v*=s,f*=s,p*=s):(v=0,f=0,p=0),r[0]=i,r[1]=v,r[2]=d,r[3]=0,r[4]=n,r[5]=f,r[6]=M,r[7]=0,r[8]=h,r[9]=p,r[10]=P,r[11]=0,r[12]=-(i*A+n*z+h*x),r[13]=-(v*A+f*z+p*x),r[14]=-(d*A+M*z+P*x),r[15]=1,r)}function B(r,e,c){const a=U(r,e,c);return a?(r.useProgram(a),r.program=a,a):(console.log("创建项目失败！"),!1)}function U(r,e,c){const a=D(r,r.VERTEX_SHADER,e),i=D(r,r.FRAGMENT_SHADER,c);if(!a||!i)return null;const n=r.createProgram();if(!n)return null;if(r.attachShader(n,a),r.attachShader(n,i),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS)){const v=r.getProgramInfoLog(n);return console.log(`Failed to link program: ${v}`),r.deleteProgram(n),r.deleteShader(i),r.deleteShader(a),null}return n}function D(r,e,c){const a=r.createShader(e);if(a==null)return console.log("unable to create shader"),null;if(r.shaderSource(a,c),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS)){const n=r.getShaderInfoLog(a);return console.log(`Failed to compile shader: ${n}`),r.deleteShader(a),null}return a}function J(r,e){e=e||1;const c=r.clientWidth*e|0,a=r.clientHeight*e|0;return r.width!==c||r.height!==a?(r.width=c,r.height=a,!0):!1}function Q(r){return r*Math.PI/180}export{Y as create,Q as degToRad,B as initShaders,j as lookAt,$ as multiply,X as ortho,W as perspective,J as resizeCanvasToDisplaySize,V as rotate,K as scale,G as translate};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.V9Q5ubyC1742895693222.js";import{B as i,b as s,cF as n,aj as e,a8 as r,a as o,au as a,A as h,l as c,C as u,_ as l}from"./three.DqHgeVY11742895693222.js";import{e as p,I as d,K as m}from"./@tresjs.xCsT8yve1742895693222.js";import{a as f}from"./simplex-noise.jB2HxhHB1742895693222.js";import{d as g,a2 as y,o as b,H as S,u as v,r as x,j as w,g as _,m as P,F as I}from"./@vue.C4dqouNn1742895693222.js";import"./index.VKBc7JxG1742895693222.js";import{_ as M}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.RaObrP1y1742895693222.js";import"./three-custom-shader-material.U901raSY1742895693222.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1742895693222.js";import"./postprocessing.vTwfsnPH1742895693222.js";import"./@vueuse.q8TRDI1e1742895693222.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.hpbvdK8B1742895693222.js";import"./all.three.HdzEZEmD1742895693222.js";import"./oimophysics.WhCxc1Ho1742895693222.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.TZOFwjHG1742895693222.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.uHOXXvtN1742895693222.js";import"./index.hoamjIa41742895693222.js";import"./three-stdlib.RjQ8hpvq1742895693222.js";import"./@pmndrs.hpTTkqV81742895693222.js";import"./object-hash.nWaMbOK21742895693222.js";import"./@amap.hJQcpQRT1742895693222.js";import"./jszip.-Z3W6wk-1742895693222.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.LLsikmuH1742895693222.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.l91g-vb91742895693222.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.s8P-Tq3H1742895693222.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Ve0bLcaN1742895693222.js";const T=V;!function(t,i){const s=V,n=F();for(;;)try{if(238493===parseInt(s(494))/1+-parseInt(s(528))/2+-parseInt(s(499))/3+-parseInt(s(560))/4+-parseInt(s(586))/5+parseInt(s(537))/6+-parseInt(s(567))/7*(-parseInt(s(625))/8))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function F(){const t=["RAY_INITIALIZED","vertices","index","createDefaultSubrayCreationCallbacks","state","copyParameters","recursion","down","subrayCylinderPosition","crossVectors","seedGenerator","currentCoordinate","329428QaJlEn","LightningStrike","floor","cross1","time","1343073lYXvxn","max","count","recursionProbability","bind","table","simplexY","randomGenerator","sub","RAY_VANISHING","updateMesh","setAttribute","RAY_STEADY","createMesh","noiseSeed","RAY_PROPAGATING","createPrism","input","clone","vanishingTimeFactor","ceil","fractalRayRecursive","side","trace","maxIterations","deathTime","propagationTimeFactor","seed","array","555990pHrpUv","subrayPeriod","counter","roughness","minRadius","endPropagationTime","radius1","currentSubray","maxSubrays","2284926iWqSrA","isLightningStrike","subVectors","currentSegmentIndex","currentIndex","getNewSegment","radius0Factor","drawRange","test","currentUVCoordinate","copy","lerpVectors","subrayDutyCycle","info","timeScale","type","onSubrayCreation","radius1Factor","positionVariationFactor","set","radius0","vPos","forwardsFill","1122496ztybrB","toString","newPos","pos1","sourceOffset","debu","add","382767COgMsX","up1","pow","subrays","indices","chain","random","RAY_EXTINGUISHED","beginVanishingTime",'{}.constructor("return this")( )',"uvs","numSubrays","linPos1","uvsAttribute","multiplyScalar","createRandomGenerator","createTriangleVerticesWithUVs","log","isInitialSegment","881495deemuB","isStatic","COS30DEG","usage","console","prototype","rayParameters","simplexX","createSubray","maxRaySegments","forwards","linPos0","fillMesh","currentCreateTriangleVertices","up0","subrayConePosition","currentSegmentCallback","setSeed","fractalRay","iteration","onDecideSubrayCreation","simplexZ","raySegments","isEternal","middleLinPos","createPrismFaces","middlePos","initSubray","return (function() ","RAY_UNBORN","getSeed","position","maxSubrayRecursion","positionAttribute","action","exception","constructor","SIN30DEG","__proto__","104XIWXNK","straightness","destOffset","gger","currentVertex","addNewSubray","generateUVs","needsUpdate","push","ramification","createSegment","call","init","subrayProbability","length","fraction1","setIndex","lerp","timeFraction","normalize","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","fraction0","birthTime","apply","sin","visible","currentSeed","createTriangleVerticesWithoutUVs","cos","pos0"];return(F=function(){return t})()}function V(t,i){const s=F();return V=function(t,i){return s[t-=461]},V(t,i)}!function(){A(this,(function(){const t=V,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(472),"i"),n=C(t(464));i.test(n+t(572))&&s[t(545)](n+t(516))?C():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(475)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=V;let i;try{i=Function(t(614)+t(576)+");")()}catch(e){i=window}const s=i[t(590)]=i[t(590)]||{},n=[t(584),"warn",t(550),"error",t(621),t(504),t(522)];for(let r=0;r<n[t(466)];r++){const i=j.constructor[t(591)][t(503)](j),e=n[r],o=s[e]||i;i[t(624)]=j[t(503)](j),i[t(561)]=o.toString[t(503)](o),s[e]=i}}))();class R extends i{constructor(t={}){const i=V;super(),this[i(538)]=!0,this[i(552)]=i(495),this[i(464)](R[i(487)](t,t)),this[i(512)]()}static[T(582)](){const t=T,i=2053,s=[];for(let e=0;e<i;e++)s[t(633)](Math[t(573)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(478)]];return n[e(478)]=(n[e(478)]+1)%i,r},getSeed:function(){return n[t(478)]/i},setSeed:function(s){const e=t;n[e(478)]=Math[e(496)](s*i)%i}};return n}static copyParameters(t={},i={}){const n=T,e=function(s){return i===t?s:s.clone()};return t.sourceOffset=void 0!==i.sourceOffset?e(i[n(564)]):new s(0,100,0),t[n(627)]=void 0!==i[n(627)]?e(i[n(627)]):new s(0,0,0),t.timeScale=void 0!==i[n(551)]?i[n(551)]:1,t[n(531)]=void 0!==i.roughness?i[n(531)]:.9,t[n(626)]=void 0!==i[n(626)]?i[n(626)]:.7,t[n(600)]=void 0!==i[n(600)]?e(i.up0):new s(0,0,1),t[n(568)]=void 0!==i.up1?e(i[n(568)]):new s(0,0,1),t.radius0=void 0!==i.radius0?i[n(557)]:1,t[n(534)]=void 0!==i[n(534)]?i[n(534)]:1,t[n(543)]=void 0!==i.radius0Factor?i[n(543)]:.5,t[n(554)]=void 0!==i.radius1Factor?i[n(554)]:.2,t[n(532)]=void 0!==i[n(532)]?i.minRadius:.2,t.isEternal=void 0!==i[n(609)]?i[n(609)]:void 0===i[n(474)]||void 0===i[n(524)],t[n(474)]=i[n(474)],t.deathTime=i[n(524)],t[n(525)]=void 0!==i[n(525)]?i[n(525)]:.1,t.vanishingTimeFactor=void 0!==i[n(518)]?i[n(518)]:.9,t.subrayPeriod=void 0!==i.subrayPeriod?i.subrayPeriod:4,t[n(549)]=void 0!==i[n(549)]?i[n(549)]:.6,t.maxIterations=void 0!==i.maxIterations?i.maxIterations:9,t[n(587)]=void 0!==i.isStatic&&i.isStatic,t[n(461)]=void 0!==i[n(461)]?i[n(461)]:5,t[n(618)]=void 0!==i[n(618)]?i[n(618)]:3,t.recursionProbability=void 0!==i[n(502)]?i[n(502)]:.6,t[n(631)]=void 0!==i[n(631)]&&i[n(631)],t[n(506)]=i[n(506)],t.noiseSeed=i.noiseSeed,t[n(606)]=i[n(606)],t[n(553)]=i.onSubrayCreation,t}update(t){const i=T;this[i(587)]||(this.rayParameters[i(609)]||this.rayParameters[i(474)]<=t&&t<=this[i(592)][i(524)]?(this[i(509)](t),t<this.subrays[0][i(533)]?this[i(486)]=R.RAY_PROPAGATING:t>this[i(570)][0][i(575)]?this[i(486)]=R[i(508)]:this[i(486)]=R[i(511)],this[i(477)]=!0):(this[i(477)]=!1,t<this.rayParameters[i(474)]?this[i(486)]=R.RAY_UNBORN:this[i(486)]=R[i(574)]))}[T(464)](t){const i=T;this[i(592)]=t,this[i(523)]=void 0!==t[i(523)]?Math[i(496)](t[i(523)]):9,t[i(523)]=this[i(523)],this.isStatic=void 0!==t[i(587)]&&t.isStatic,t.isStatic=this[i(587)],this[i(461)]=void 0!==t.ramification?Math[i(496)](t[i(461)]):5,t[i(461)]=this[i(461)],this[i(618)]=void 0!==t[i(618)]?Math[i(496)](t.maxSubrayRecursion):3,t[i(618)]=this[i(618)],this.recursionProbability=void 0!==t[i(502)]?t[i(502)]:.6,t.recursionProbability=this.recursionProbability,this[i(631)]=void 0!==t[i(631)]&&t[i(631)],t.generateUVs=this[i(631)],void 0!==t[i(506)]?(this.randomGenerator=t[i(506)],this[i(492)]=t[i(506)],void 0!==t.noiseSeed&&this.seedGenerator[i(603)](t.noiseSeed)):(this[i(506)]=R[i(582)](),this[i(492)]=Math),void 0!==t[i(606)]?this[i(606)]=t[i(606)]:(this[i(485)](),void 0!==t[i(553)]&&(this[i(553)]=t.onSubrayCreation)),this.state=R[i(482)],this[i(536)]=Math[i(519)](1+Math[i(569)](this[i(461)],Math.max(0,this[i(618)]-1))),t[i(536)]=this[i(536)],this[i(595)]=2*(1<<this[i(523)]),this[i(570)]=[];for(let s=0;s<this[i(536)];s++)this[i(570)][i(633)](this[i(594)]());this[i(608)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(608)].push(this.createSegment());this[i(498)]=0,this[i(470)]=0,this.currentSegmentCallback=null,this[i(599)]=this.generateUVs?this.createTriangleVerticesWithUVs:this[i(479)],this[i(578)]=0,this[i(535)]=null,this[i(540)]=0,this[i(585)]=!1,this.subrayProbability=0,this[i(629)]=0,this[i(541)]=0,this[i(493)]=0,this[i(546)]=0,this[i(483)]=null,this[i(577)]=null,this[i(571)]=null,this[i(619)]=null,this[i(580)]=null,this[i(593)]=f(this[i(492)][i(573)]),this[i(505)]=f(this[i(492)][i(573)]),this[i(607)]=f(this[i(492)][i(573)]),this[i(596)]=new s,this[i(559)]=new s,this[i(521)]=new s,this[i(489)]=new s,this.middlePos=new s,this[i(610)]=new s,this.newPos=new s,this[i(558)]=new s,this[i(497)]=new s}[T(512)](){const t=T,i=1<<this[t(523)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(536)];this[t(483)]=new Float32Array(3*s),this[t(571)]=new Uint32Array(o),this[t(631)]&&(this[t(577)]=new Float32Array(2*s)),this.fillMesh(0),this[t(468)](new n(this[t(571)],1)),this[t(619)]=new e(this[t(483)],3),this.setAttribute(t(617),this[t(619)]),this[t(631)]&&(this.uvsAttribute=new e(new Float32Array(this[t(577)]),2),this[t(510)]("uv",this[t(580)])),!this[t(587)]&&(this[t(484)][t(589)]=r,this[t(619)][t(589)]=r,this[t(631)]&&(this[t(580)][t(589)]=r)),this[t(483)]=this[t(619)][t(527)],this[t(571)]=this[t(484)].array,this.generateUVs&&(this[t(577)]=this.uvsAttribute[t(527)])}[T(509)](t){const i=T;this[i(598)](t),this[i(544)][i(501)]=this[i(541)],this[i(484)].needsUpdate=!0,this[i(619)][i(632)]=!0,this[i(631)]&&(this.uvsAttribute[i(632)]=!0)}fillMesh(t){const i=T,s=this;this[i(629)]=0,this[i(541)]=0,this[i(493)]=0,this[i(546)]=0,this[i(604)](t,(function(n){const e=i,r=s[e(535)];t<r.birthTime||(this[e(592)].isEternal&&0==s.currentSubray[e(488)]?(s[e(515)](n),s.onDecideSubrayCreation(n,s)):t<r[e(533)]?s.timeFraction>=n[e(473)]*r.propagationTimeFactor&&(s[e(515)](n),s[e(606)](n,s)):t<r[e(575)]?(s[e(515)](n),s[e(606)](n,s)):(s.timeFraction<=r[e(518)]+n[e(467)]*(1-r[e(518)])&&s[e(515)](n),s[e(606)](n,s)))}))}[T(630)](){const t=T;return this[t(570)][this[t(578)]++]}initSubray(t,i){const s=T;t[s(481)].copy(i[s(564)]),t[s(563)][s(547)](i.destOffset),t.up0[s(547)](i[s(600)]),t.up1[s(547)](i[s(568)]),t[s(557)]=i[s(557)],t[s(534)]=i[s(534)],t[s(474)]=i[s(474)],t[s(524)]=i[s(524)],t[s(551)]=i.timeScale,t[s(531)]=i[s(531)],t[s(626)]=i.straightness,t[s(525)]=i[s(525)],t[s(518)]=i[s(518)],t[s(523)]=this.maxIterations,t.seed=void 0!==i.noiseSeed?i[s(513)]:0,t[s(488)]=0}[T(604)](t,i){const s=T;this[s(498)]=t,this[s(602)]=i,this[s(578)]=0,this[s(613)](this[s(630)](),this[s(592)]);for(let n=0;n<this[s(578)];n++){const i=this[s(570)][n];this[s(535)]=i,this[s(506)][s(603)](i[s(526)]),i[s(533)]=o[s(469)](i.birthTime,i.deathTime,i[s(525)]),i[s(575)]=o[s(469)](i[s(524)],i[s(474)],1-i.vanishingTimeFactor);const e=this[s(506)].random;i.linPos0[s(556)](e(),e(),e()).multiplyScalar(1e3),i[s(579)][s(556)](e(),e(),e())[s(581)](1e3),this[s(470)]=(t-i[s(474)])/(i.deathTime-i[s(474)]),this[s(540)]=0,this[s(585)]=!0;const r=this[s(542)]();r[s(605)]=0,r[s(481)][s(547)](i[s(481)]),r[s(563)][s(547)](i[s(563)]),r[s(597)][s(547)](i[s(597)]),r[s(579)][s(547)](i.linPos1),r[s(600)][s(547)](i[s(600)]),r[s(568)][s(547)](i[s(568)]),r[s(557)]=i[s(557)],r.radius1=i[s(534)],r[s(473)]=0,r.fraction1=1,r.positionVariationFactor=1-i[s(626)],this.subrayProbability=this.ramification*Math[s(569)](this.recursionProbability,i[s(488)])/(1<<i[s(523)]),this[s(520)](r)}this[s(602)]=null,this.currentSubray=null}[T(520)](t){const i=T;if(t.iteration>=this.currentSubray[i(523)])return void this[i(602)](t);this.forwards[i(539)](t[i(563)],t.pos0);let s=this[i(596)][i(466)]();s<1e-6&&(this[i(596)][i(556)](0,0,.01),s=this.forwards[i(466)]());const n=.5*(t[i(557)]+t[i(534)]),e=.5*(t[i(473)]+t[i(467)]),r=this[i(498)]*this[i(535)][i(551)]*Math[i(569)](2,t[i(605)]);this[i(612)][i(548)](t.pos0,t[i(563)],.5),this[i(610)][i(548)](t[i(597)],t[i(579)],.5);const o=this[i(610)];this[i(562)][i(556)](this[i(593)](o.x,o.y,o.z,r),this[i(505)](o.x,o.y,o.z,r),this[i(607)](o.x,o.y,o.z,r)),this[i(562)][i(581)](t[i(555)]*s),this[i(562)][i(566)](this[i(612)]);const a=this.getNewSegment();a[i(481)][i(547)](t[i(481)]),a[i(563)].copy(this[i(562)]),a[i(597)].copy(t[i(597)]),a[i(579)][i(547)](this[i(610)]),a[i(600)][i(547)](t[i(600)]),a.up1[i(547)](t.up1),a[i(557)]=t[i(557)],a[i(534)]=n,a[i(473)]=t.fraction0,a[i(467)]=e,a[i(555)]=t[i(555)]*this[i(535)][i(531)],a.iteration=t[i(605)]+1;const h=this[i(542)]();h.pos0[i(547)](this[i(562)]),h[i(563)][i(547)](t[i(563)]),h[i(597)].copy(this[i(610)]),h.linPos1[i(547)](t[i(579)]),this[i(497)].crossVectors(t[i(600)],this[i(596)][i(471)]()),h[i(600)][i(491)](this[i(596)],this[i(497)]).normalize(),h[i(568)][i(547)](t[i(568)]),h[i(557)]=n,h.radius1=t[i(534)],h[i(473)]=e,h.fraction1=t[i(467)],h.positionVariationFactor=t.positionVariationFactor*this.currentSubray[i(531)],h.iteration=t.iteration+1,this[i(520)](a),this[i(520)](h)}[T(515)](t){const i=T;this[i(559)][i(539)](t[i(563)],t.pos0)[i(471)](),this[i(585)]&&(this[i(599)](t[i(481)],t[i(600)],this[i(559)],t[i(557)],0),this[i(585)]=!1),this[i(599)](t[i(563)],t.up0,this[i(559)],t.radius1,t.fraction1),this[i(611)]()}[T(479)](t,i,s,n){const e=T;this.side[e(491)](i,s)[e(581)](n*R[e(588)]),this[e(489)][e(547)](i)[e(581)](-n*R.SIN30DEG);const r=this[e(558)],o=this[e(483)];r[e(547)](t)[e(507)](this.side)[e(566)](this.down),o[this[e(493)]++]=r.x,o[this[e(493)]++]=r.y,o[this[e(493)]++]=r.z,r[e(547)](t).add(this.side)[e(566)](this[e(489)]),o[this[e(493)]++]=r.x,o[this[e(493)]++]=r.y,o[this.currentCoordinate++]=r.z,r[e(547)](i)[e(581)](n).add(t),o[this[e(493)]++]=r.x,o[this[e(493)]++]=r.y,o[this[e(493)]++]=r.z,this[e(629)]+=3}[T(583)](t,i,s,n,e){const r=T;this[r(521)].crossVectors(i,s)[r(581)](n*R[r(588)]),this.down[r(547)](i).multiplyScalar(-n*R[r(623)]);const o=this[r(558)],a=this[r(483)],h=this[r(577)];o[r(547)](t)[r(507)](this.side)[r(566)](this[r(489)]),a[this[r(493)]++]=o.x,a[this[r(493)]++]=o.y,a[this[r(493)]++]=o.z,h[this[r(546)]++]=e,h[this.currentUVCoordinate++]=0,o[r(547)](t)[r(566)](this.side)[r(566)](this[r(489)]),a[this[r(493)]++]=o.x,a[this[r(493)]++]=o.y,a[this[r(493)]++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(546)]++]=.5,o[r(547)](i).multiplyScalar(n)[r(566)](t),a[this[r(493)]++]=o.x,a[this[r(493)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this.currentUVCoordinate++]=1,this[r(629)]+=3}[T(611)](t){const i=T,s=this.indices;t=this.currentVertex-6,s[this[i(541)]++]=t+1,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+5,s[this[i(541)]++]=t+1,s[this[i(541)]++]=t+5,s[this[i(541)]++]=t+4,s[this[i(541)]++]=t+0,s[this[i(541)]++]=t+1,s[this[i(541)]++]=t+4,s[this[i(541)]++]=t+0,s[this[i(541)]++]=t+4,s[this[i(541)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(541)]++]=t+0,s[this[i(541)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(541)]++]=t+3,s[this[i(541)]++]=t+5}createDefaultSubrayCreationCallbacks(){const t=T,i=this[t(506)][t(573)];this[t(606)]=function(s,n){const e=t,r=n[e(535)],a=n.rayParameters[e(529)],h=n[e(592)].subrayDutyCycle,c=n[e(592)][e(609)]&&0==r[e(488)]?-i()*a:o[e(469)](r[e(474)],r[e(533)],s.fraction0)-i()*a,u=n[e(498)]-c,l=Math.floor(u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(465)]),r[e(488)]<n[e(618)]&&n[e(578)]<n.maxSubrays&&i()<d){const t=n[e(630)](),o=n[e(506)][e(616)]();t[e(526)]=p,n[e(506)][e(603)](p),t[e(488)]=r[e(488)]+1,t.maxIterations=Math[e(500)](1,r.maxIterations-1),t[e(597)][e(556)](i(),i(),i())[e(581)](1e3),t[e(579)].set(i(),i(),i()).multiplyScalar(1e3),t[e(600)][e(547)](r[e(600)]),t[e(568)].copy(r.up1),t.radius0=s[e(557)]*n[e(592)][e(543)],t.radius1=Math.min(n[e(592)].minRadius,s[e(534)]*n[e(592)][e(554)]),t.birthTime=c+l*a,t[e(524)]=t[e(474)]+a*h,!n[e(592)].isEternal&&0==r[e(488)]&&(t[e(474)]=Math.max(t.birthTime,r[e(474)]),t[e(524)]=Math.min(t[e(524)],r[e(524)])),t[e(551)]=2*r.timeScale,t[e(531)]=r.roughness,t[e(626)]=r.straightness,t[e(525)]=r.propagationTimeFactor,t[e(518)]=r.vanishingTimeFactor,n[e(553)](s,r,t,n),n.randomGenerator[e(603)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(553)]=function(i,s,n,e){e[t(490)](i,s,n,.5,.6,.2)},this[t(601)]=function(s,o,h,c,u,l){const p=t;h[p(481)][p(547)](s[p(481)]),n.subVectors(o[p(563)],o[p(481)]),e.copy(n)[p(471)](),n[p(581)](s[p(473)]+(1-s[p(473)])*(i()*c));const d=n[p(466)]();r[p(491)](o[p(600)],e);const m=2*Math.PI*i();r[p(581)](Math[p(480)](m)),a.copy(o[p(600)]).multiplyScalar(Math[p(476)](m)),h.pos1[p(547)](r).add(a)[p(581)](d*u*(l+i()*(1-l)))[p(566)](n)[p(566)](o[p(481)])},this[t(490)]=function(s,o,h,c,u,l){const p=t;h[p(481)][p(547)](s[p(481)]),n.subVectors(o[p(563)],o[p(481)]),e[p(547)](n)[p(471)](),n[p(581)](s[p(473)]+(1-s[p(473)])*((2*i()-1)*c));const d=n.length();r[p(491)](o[p(600)],e);const m=2*Math.PI*i();r.multiplyScalar(Math.cos(m)),a[p(547)](o.up0)[p(581)](Math[p(476)](m)),h.pos1[p(547)](r)[p(566)](a).multiplyScalar(d*u*(l+i()*(1-l)))[p(566)](n)[p(566)](o[p(481)])}}[T(594)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[T(462)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){const t=T;return this.raySegments[this[t(540)]++]}copy(t){const i=T;return super[i(547)](t),this[i(464)](R[i(487)]({},t[i(592)])),this}[T(517)](){const t=T;return new(this[t(622)])(R[t(487)]({},this[t(592)]))}}function C(t){function i(t){const s=V;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[s(475)](s(530));1!==(""+t/t)[s(466)]||t%20==0?function(){return!0}[s(622)](s(565)+s(628))[s(463)](s(620)):function(){return!1}[s(622)](s(565)+s(628)).apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}R[T(482)]=0,R[T(615)]=1,R[T(514)]=2,R[T(511)]=3,R[T(508)]=4,R[T(574)]=5,R[T(588)]=Math[T(480)](30*Math.PI/180),R[T(623)]=Math[T(476)](30*Math.PI/180);const z=G;!function(t,i){const s=G,n=E();for(;;)try{if(707354===parseInt(s(124))/1+-parseInt(s(155))/2+parseInt(s(188))/3+-parseInt(s(185))/4+-parseInt(s(139))/5*(-parseInt(s(180))/6)+parseInt(s(118))/7+-parseInt(s(187))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(117)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){D(this,(function(){const t=G,i=new RegExp(t(121)),s=new RegExp(t(134),"i"),n=L(t(173));i[t(156)](n+t(158))&&s.test(n+"input")?L():n("0")}))()}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[G(117)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function E(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clone","indexOf","onLightningDown",'{}.constructor("return this")( )',"35LIPShv","exception","call","counter","return (function() ","gger","inited","constructor","update","nextLightningTime","RAY_EXTINGUISHED","warn","set","lightningMinPeriod","stormParams","remove","48594trwVrh","test","lightningsMeshes","chain","size","geometry","state","lightningMaxPeriod","console","push","while (true) {}","debu","random","lightningMaxDuration","lightningParameters","length","splice","copy","init","maxLightnings","log","noiseSeed","stateObject","error","multiplyScalar","610422zUWokk","maxHeight","isLightningStorm","bind","maxSlope","1373388IoWijT","add","19877248oLMJdv","2804553fJyEQO","lightningMinDuration","apply","3757901TbWStv","minHeight","lerp","function *\\( *\\)","getNextLightningTime","deadLightningsMeshes","1375801XDYDrY","birthTime","RAY_PROPAGATING","isEternal","destOffset","onRayPosition","trace","copyParameters","lightningMaterial","toString"];return(E=function(){return t})()}H(void 0,(function(){const t=G;let i;try{i=Function(t(143)+t(138)+");")()}catch(e){i=window}const s=i[t(163)]=i[t(163)]||{},n=[t(175),t(150),"info",t(178),t(140),"table",t(130)];for(let r=0;r<n[t(170)];r++){const i=H[t(146)].prototype[t(183)](H),e=n[r],o=s[e]||i;i.__proto__=H[t(183)](H),i[t(133)]=o[t(133)][t(183)](o),s[e]=i}}))();class U extends a{constructor(t={}){const i=G;super(),this[i(182)]=!0,this[i(153)]=t,t[i(159)]=void 0!==t[i(159)]?t[i(159)]:1e3,t[i(119)]=void 0!==t[i(119)]?t[i(119)]:80,t[i(181)]=void 0!==t.maxHeight?t[i(181)]:100,t[i(184)]=void 0!==t.maxSlope?t[i(184)]:1.1,t.maxLightnings=void 0!==t.maxLightnings?t[i(174)]:3,t.lightningMinPeriod=void 0!==t[i(152)]?t[i(152)]:3,t[i(162)]=void 0!==t.lightningMaxPeriod?t[i(162)]:7,t.lightningMinDuration=void 0!==t[i(116)]?t.lightningMinDuration:1,t[i(168)]=void 0!==t[i(168)]?t[i(168)]:2.5,this[i(169)]=R[i(131)](t[i(169)],t[i(169)]),this.lightningParameters[i(127)]=!1,this[i(132)]=void 0!==t[i(132)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(129)]?this[i(129)]=t[i(129)]:this[i(129)]=function(s,n){const e=i;n[e(151)]((Math[e(167)]()-.5)*t[e(159)],0,(Math[e(167)]()-.5)*t.size);const r=o.lerp(t[e(119)],t[e(181)],Math.random());s.set(t.maxSlope*(2*Math[e(167)]()-1),1,t[e(184)]*(2*Math[e(167)]()-1))[e(179)](r)[e(186)](n)},this[i(137)]=t[i(137)],this[i(145)]=!1,this.nextLightningTime=0,this[i(157)]=[],this[i(123)]=[];for(let s=0;s<this[i(153)][i(174)];s++){const t=new R(R.copyParameters({},this[i(169)])),s=new c(t,this.lightningMaterial);this[i(123)][i(164)](s)}}[z(147)](t){const i=z;if(!this[i(145)]&&(this.nextLightningTime=this[i(122)](t)*Math[i(167)](),this[i(145)]=!0),t>=this[i(148)]){const s=this[i(123)].pop();if(s){const n=R[i(131)](s[i(160)].rayParameters,this[i(169)]);n[i(125)]=t,n.deathTime=t+o[i(120)](this.stormParams[i(116)],this[i(153)][i(168)],Math[i(167)]()),this[i(129)](n.sourceOffset,n[i(128)]),n[i(176)]=Math[i(167)](),this[i(186)](s),this[i(157)][i(164)](s)}this[i(148)]=this.getNextLightningTime(t)}let s=0,n=this.lightningsMeshes.length;for(;s<n;){const e=this[i(157)][s],r=e[i(160)],o=r[i(161)];r[i(147)](t),o===R[i(126)]&&r[i(161)]>o&&this[i(137)]&&this[i(137)](r),r[i(161)]===R[i(149)]?(this[i(157)][i(171)](this.lightningsMeshes[i(136)](e),1),this[i(123)][i(164)](e),this[i(154)](e),n--):s++}}[z(122)](t){const i=z;return t+o.lerp(this[i(153)][i(152)],this[i(153)][i(162)],Math.random())/(this.stormParams.maxLightnings+1)}[z(172)](t,i){const s=z;return super[s(172)](t,i),this.stormParams[s(159)]=t[s(153)][s(159)],this[s(153)][s(119)]=t[s(153)][s(119)],this[s(153)][s(181)]=t[s(153)].maxHeight,this[s(153)][s(184)]=t[s(153)][s(184)],this[s(153)][s(174)]=t[s(153)][s(174)],this[s(153)].lightningMinPeriod=t[s(153)][s(152)],this[s(153)][s(162)]=t[s(153)].lightningMaxPeriod,this[s(153)][s(116)]=t[s(153)][s(116)],this.stormParams[s(168)]=t[s(153)][s(168)],this[s(169)]=R[s(131)]({},t.lightningParameters),this[s(132)]=t[s(153)][s(132)],this[s(137)]=t.onLightningDown,this}[z(135)](){const t=z;return new this.constructor(this[t(153)])[t(172)](this)}}function G(t,i){const s=E();return G=function(t,i){return s[t-=116]},G(t,i)}function L(t){function i(t){const s=G;if("string"==typeof t)return function(t){}[s(146)](s(165)).apply(s(142));1!==(""+t/t)[s(170)]||t%20==0?function(){return!0}.constructor(s(166)+s(144))[s(141)]("action"):function(){return!1}[s(146)](s(166)+"gger")[s(117)](s(177)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=k;!function(t,i){const s=k,n=Z();for(;;)try{if(766635===parseInt(s(406))/1*(-parseInt(s(397))/2)+-parseInt(s(380))/3+parseInt(s(414))/4+-parseInt(s(372))/5+-parseInt(s(390))/6*(parseInt(s(412))/7)+-parseInt(s(425))/8+parseInt(s(396))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[k(378)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=k,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(417),"i"),n=J("init");i[t(395)](n+t(400))&&s[t(395)](n+t(413))?J():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function k(t,i){const s=Z();return k=function(t,i){return s[t-=368]},k(t,i)}Y(void 0,(function(){const t=k,i=function(){const t=k;let i;try{i=Function(t(375)+t(416)+");")()}catch(s){i=window}return i}(),s=i[t(370)]=i[t(370)]||{},n=[t(392),"warn",t(401),t(399),t(389),t(373),"trace"];for(let e=0;e<n.length;e++){const i=Y[t(403)][t(402)][t(376)](Y),r=n[e],o=s[r]||i;i[t(382)]=Y[t(376)](Y),i[t(377)]=o[t(377)].bind(o),s[r]=i}}))();const W=[O(394)];function Z(){const t=["1pEMmde","size","radius1","set","radius0","subrayDutyCycle","315paZKGt","input","613600bWyKtx","gger",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subVectors","pos1","counter","lightStorm","maxHeight","subrayPeriod","minHeight","2683104tHdzJZ","length","timeScale","sub","sourceOffset","action","MeshBasicMaterial","console","addVectors","6381440ZDpnqe","table","while (true) {}","return (function() ","bind","toString","apply","color","524445aJyTId","string","__proto__","Vector3","stormParams","rayParameters","straightness","debu","roughness","exception","145710dPDUhc","#b0ffff","log","call","object","test","41699286OJmraD","2281406FGaWjT","subrayConePosition","error","chain","info","prototype","constructor","update","add"];return(Z=function(){return t})()}const X=g({__name:O(421),props:{color:{default:O(391)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,s=t,n=new u(s.color),e=new(l[i(369)])({color:n}),r=new(l[i(383)])(0,-1,0);let o=0;const a=new(l[i(383)]),h=new(l[i(383)]),c={roughness:s[i(388)],straightness:s[i(386)],radius0:s[i(410)],radius1:s[i(408)],timeScale:s.timeScale,subrayPeriod:s[i(423)],subrayDutyCycle:s[i(411)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const c=i;e[c(398)](t,s,n,.6,.6,.5),o=e[c(385)][c(429)].y,a[c(418)](n[c(419)],e.rayParameters[c(429)]);const u=r.dot(a);h.copy(r).multiplyScalar(u),a[c(428)](h);const l=u/o>.5?o/u:1;h.multiplyScalar(l),a[c(405)](h),n[c(419)][c(371)](a,e[c(385)][c(429)])}},d=new U({size:s[i(407)],minHeight:s[i(424)],maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s.maxLightnings,lightningParameters:c,lightningMaterial:e});y((()=>{const t=i,n=d[t(384)];n.size=s[t(407)],n[t(424)]=s[t(424)],n.maxHeight=s[t(422)],e.color[t(409)](s[t(379)]),c[t(388)]=s[t(388)],c[t(386)]=s[t(386)],c[t(410)]=s[t(410)],c.radius1=s[t(408)],c.timeScale=s[t(427)]}));const{onLoop:m}=p();return m((({elapsed:t})=>{d[i(404)](t)})),(t,i)=>(b(),S("primitive",{object:v(d),renderOrder:9999},null,8,W))}});function J(t){function i(t){const s=k;if(typeof t===s(381))return function(t){}.constructor(s(374))[s(378)](s(420));1!==(""+t/t)[s(426)]||t%20==0?function(){return!0}[s(403)](s(387)+s(415))[s(393)](s(368)):function(){return!1}[s(403)]("debugger").apply("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=Q,n=K();for(;;)try{if(774005===-parseInt(s(443))/1*(parseInt(s(441))/2)+parseInt(s(468))/3+-parseInt(s(473))/4*(parseInt(s(456))/5)+parseInt(s(453))/6+-parseInt(s(451))/7*(parseInt(s(459))/8)+parseInt(s(475))/9+-parseInt(s(471))/10*(-parseInt(s(435))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Q(440)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){$(this,(function(){const t=Q,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(448),"i"),n=tt("init");i[t(436)](n+"chain")&&s[t(436)](n+t(442))?tt():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(){const t=["while (true) {}","warn","8zXrJrH","prototype","exception","radius0","bind","radius1","stateObject","端部半径","roughness","1075818DETGKL","table","时间缩放","10BaHVUw","counter","4202312GClOWl","value","9718533qePswF","constructor","info","console","#6f6f6f","straightness","22707201IpFPPt","test","call","minHeight","trace","apply","989064xsVuWb","input","3XJQWxJ","color","gger","error","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#92399e","toString","1852382UhwrFy","直度度","420426sWosHA","#ffbde7","粗糙度","5JQvTsP"];return(K=function(){return t})()}function Q(t,i){const s=K();return Q=function(t,i){return s[t-=430]},Q(t,i)}B(void 0,(function(){const t=Q,i=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(i){t=window}return t}(),s=i[t(432)]=i[t(432)]||{},n=["log",t(458),t(431),t(446),t(461),t(469),t(439)];for(let e=0;e<n.length;e++){const i=B[t(430)][t(460)][t(463)](B),r=n[e],o=s[r]||i;i.__proto__=B[t(463)](B),i[t(450)]=o[t(450)][t(463)](o),s[r]=i}}))();const q=g({__name:"lightningStorm",setup(i){const s=Q,n=x({cellSize:60,cellThickness:1,cellColor:s(433),sectionColor:s(449),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=d({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(454),roughness:{label:s(455),value:.85,min:0,max:1,step:.01},straightness:{label:s(452),value:.65,min:0,max:1,step:.01},radius0:{label:s(466),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:s(470),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return b(),S(I,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:_((()=>[w(X,{minHeight:v(e)[d(474)],maxHeight:v(r)[d(474)],color:v(o)[d(474)],roughness:v(a)[d(474)],straightness:v(h).value,radius0:v(c)[d(474)],radius1:v(u)[d(474)],timeScale:v(l)[d(474)]},null,8,[d(438),"maxHeight",d(444),d(467),d(434),d(462),d(464),"timeScale"]),w(v(M),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(v(m))],64)}}});function tt(t){function i(t){const s=Q;if("string"==typeof t)return function(t){}[s(430)](s(457))[s(440)](s(472));1!==(""+t/t).length||t%20==0?function(){return!0}[s(430)](s(447)+s(445))[s(437)]("action"):function(){return!1}.constructor(s(447)+s(445)).apply(s(465)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

import{e,b as a}from"./@tresjs.CsRUmnoW1756712874380.js";import{aL as s,V as r,cG as o,C as t,a9 as l}from"./three.QlBabAUP1756712874380.js";import{l as n}from"./utils.CHC7yGVd1756712874380.js";import{d as p,b as f,aa as i,a2 as m,G as u,o as d,F as c,W as g,I as h,u as w}from"./@vue.BzMISRrV1756712874380.js";const y={renderOrder:3e3},T=["args"],_=["map","side","color"],j=p({__name:"roadLight",props:{geoJson:{},color:{default:"#ffff00"},radius:{default:2},speed:{default:1}},async setup(p){let j,b;const v=p,G=f(),M=f(),{map:L}=([j,b]=i((()=>a({map:"./plugins/digitalCity/image/line.png"}))),j=await j,b(),j);L.needsUpdate=!0,L.wrapS=L.wrapT=s,L.repeat.set(1,1);const k=([j,b]=i((()=>n(v.geoJson))),j=await j,b(),j),x=[-31.258949,0,-121.465782];let C=[];for(var J=0;J<k.length;J++){const e=k[J],a=[];e.geometry.coordinates.forEach((e=>{a.push(new r(6e4*(e[1]+x[0]),x[1],6e4*(e[0]+x[2])))})),C.push(new o(a))}m((()=>{v.color&&M.value&&(M.value.color=new t(v.color))}));const{onLoop:R}=e();return R((({delta:e})=>{L.offset.x-=Math.random()/20*v.speed})),(e,a)=>(d(),u("TresGroup",{ref_key:"tgRef",ref:G},[(d(!0),u(c,null,g(w(C),(e=>(d(),u("TresMesh",y,[h("TresTubeGeometry",{args:[e,64,v.radius,20,!1]},null,8,T),h("TresMeshBasicMaterial",{ref_for:!0,ref_key:"tmbmRef",ref:M,map:w(L),side:w(l),transparent:!0,color:v.color},null,8,_)])))),256))],512))}});export{j as _};

import{a6 as t,C as n,cb as o,cc as e,cd as r,ce as i,k as u,bS as s,ab as c,ad as a}from"./three.eXhPIzTa1723718122052.js";import{f as l,$ as f,d as p}from"./@tresjs.GO-cpSrO1723718122052.js";import{C as d}from"./three-custom-shader-material.cBCxSCct1723718122052.js";import"./object-hash.-AaPYX971723718122052.js";import"./@amap.r0EhX7fK1723718122052.js";import"./glsl-tokenizer.1di3f6lO1723718122052.js";import{d as h,b as m,a1 as g,w as y,o as w,D as v,u as b,r as _,a4 as I,e as C,f as x,g as M,J as T,j,aj as S,ak as B,F as O,I as A,G as R,m as F}from"./@vue.Q1VpS3901723718122052.js";function k(t,n){const o=P();return(k=function(t,n){return o[t-=496]})(t,n)}!function(t,n){const o=k,e=P();for(;;)try{if(732193===-parseInt(o(531))/1*(-parseInt(o(527))/2)+parseInt(o(516))/3+-parseInt(o(510))/4*(-parseInt(o(497))/5)+-parseInt(o(525))/6+parseInt(o(522))/7+parseInt(o(517))/8*(-parseInt(o(513))/9)+parseInt(o(504))/10*(-parseInt(o(501))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(507)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){E(this,(function(){const t=k,n=new RegExp(t(498)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Z("init");n[t(505)](e+t(532))&&o.test(e+t(529))?Z():e("0")}))()}();const G=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[k(507)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();G(void 0,(function(){const t=k;let n;try{n=Function("return (function() "+t(514)+");")()}catch(r){n=window}const o=n[t(520)]=n[t(520)]||{},e=[t(526),t(499),"info",t(512),"exception",t(530),t(524)];for(let i=0;i<e.length;i++){const n=G[t(500)].prototype[t(521)](G),r=e[i],u=o[r]||n;n[t(515)]=G.bind(G),n.toString=u[t(509)][t(521)](u),o[r]=n}}))();const L=async()=>{const t=k,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(519)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n[i(518)]&&(o=n),"LANDMASS"===n.name&&(e=n),"ROADS"===n[i(518)]&&(r=n)})),{model:n,city:o,land:e,roads:r}};function P(){const t=["test","gger","apply","counter","toString","4292276aZufMy","debu","error","45bJFQKV",'{}.constructor("return this")( )',"__proto__","3883149FoAIYd","1589176gskMzY","name","traverse","console","bind","7761054ijHFSC","stateObject","trace","8378964TZMntW","log","27098WAwFem","length","input","table","5BviDHP","chain","call","5EUUbuM","function *\\( *\\)","warn","constructor","4641967GNEFuR","string","action","10bgyLcX"];return(P=function(){return t})()}function Z(t){function n(t){const o=k;if(typeof t===o(502))return function(t){}[o(500)]("while (true) {}")[o(507)](o(508));1!==(""+t/t)[o(528)]||t%20==0?function(){return!0}.constructor("debugger")[o(496)](o(503)):function(){return!1}[o(500)](o(511)+o(506))[o(507)](o(523)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const z=$;!function(t,n){const o=$,e=U();for(;;)try{if(335167===parseInt(o(298))/1+-parseInt(o(299))/2+-parseInt(o(289))/3+-parseInt(o(309))/4*(parseInt(o(328))/5)+parseInt(o(334))/6*(parseInt(o(292))/7)+parseInt(o(315))/8*(-parseInt(o(291))/9)+parseInt(o(271))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[$(284)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){D(this,(function(){const t=$,n=new RegExp(t(297)),o=new RegExp(t(286),"i"),e=X(t(272));n[t(288)](e+t(275))&&o[t(288)](e+t(321))?X():e("0")}))()}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[$(284)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();W(void 0,(function(){const t=$;let n;try{n=Function(t(303)+t(322)+");")()}catch(r){n=window}const o=n[t(278)]=n[t(278)]||{},e=[t(320),t(277),t(283),t(313),t(310),t(327),t(274)];for(let i=0;i<e[t(314)];i++){const n=W.constructor[t(287)].bind(W),r=e[i],u=o[r]||n;n.__proto__=W[t(306)](W),n[t(304)]=u.toString[t(306)](u),o[r]=n}}))();const H=[z(279)];function $(t,n){const o=U();return($=function(t,n){return o[t-=269]})(t,n)}function U(){const t=["uColor","#112233","side","land","log","input",'{}.constructor("return this")( )',"Color","debu","color","forEach","table","45akivBQ","gradient","bulidingsColor","buildingsModelCustomShader","city","while (true) {}","179544gsdEeB","dispose","material","13095450WLBlnI","init","primitive","trace","chain","counter","warn","console","object","opacity","computeBoundingSphere","gger","info","apply","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","test","1685739PPZhgv","boundingBox","9IQPMGg","56PhKWmX","topColor","call","uGradient","__csm","function *\\( *\\)","572454FoxfnB","1200498SYEfgU","action","#ffffff","constructor","return (function() ","toString","renderOrder","bind","model","isArray","27284IRkIaF","exception","value","DoubleSide","error","length","4501384VNYOVp"];return(U=function(){return t})()}const V=h({__name:z(331),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:z(317)},topColor:{default:"#ffff00"},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=z,r=o,i=m(0),u=r[e(307)][e(332)];u[e(305)]=1001;const s=r[e(307)][e(319)];(()=>{const o=e,{geometry:s}=u;s.computeBoundingBox(),s[o(281)]();const{max:c,min:a}=s[o(290)];if(u[o(270)][o(296)])return;const l=new d({baseMaterial:u.material,vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(323)])(r[o(330)])},uOpacity:{value:r[o(280)]},uLightColor:{value:new(t[o(323)])(o(301))},uTopColor:{value:new n(r[o(293)])},uTime:i,uGradient:{value:r[o(329)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[o(312)]});u[o(270)][o(269)](),u.material=l})();const{onLoop:c}=f();c((({delta:t})=>{i.value+=t})),g((()=>{const n=e;r.bulidingsColor&&u[n(270)][n(285)][n(316)][n(311)].setStyle(r[n(330)]),r.landColor&&((n,o)=>{const i=e;let u;"cu"===n||n===i(319)&&(u=Array[i(308)](s[i(270)])?s[i(270)]:[s[i(270)]],u[i(326)]((n=>{const e=i;n[o].setStyle(r.landColor),n[e(318)]=t[e(312)]})))})(n(319),n(325)),r[n(280)]&&(u[n(270)][n(285)].uOpacity[n(311)]=r[n(280)])})),y(r,((t,n)=>{const o=e;u[o(270)][o(285)][o(295)][o(311)]=t[o(329)]}));const a=r[e(307)][e(307)].clone();return(t,n)=>{const o=e;return w(),v(o(273),{object:b(a)},null,8,H)}}});function X(t){function n(t){const o=$;if("string"==typeof t)return function(t){}[o(302)](o(333))[o(284)](o(276));1!==(""+t/t)[o(314)]||t%20==0?function(){return!0}[o(302)](o(324)+"gger")[o(294)](o(300)):function(){return!1}[o(302)](o(324)+o(282))[o(284)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const N=q;!function(t,n){const o=q,e=Q();for(;;)try{if(315850===-parseInt(o(487))/1*(parseInt(o(483))/2)+-parseInt(o(467))/3+parseInt(o(474))/4*(-parseInt(o(513))/5)+-parseInt(o(463))/6*(-parseInt(o(509))/7)+parseInt(o(485))/8*(parseInt(o(482))/9)+parseInt(o(459))/10+parseInt(o(478))/11*(parseInt(o(461))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Y=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[q(468)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function Q(){const t=["length","toString","126IICXeg","test","Wireframe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5xvawrB","width","console","style","innerWidth","color","Shader","2809550DzYTXk","builds","7764XyxjaV","action","173214vcVRCr","table","bind","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","654549zrMRLi","apply","linewidth","log","set","while (true) {}","gger","306388XCytUZ","matrix","innerHeight","value","2761FNjzQP",'{}.constructor("return this")( )',"uniforms","init","90hMNUas","104UslTUa","string","15216wovATO","renderOrder","7142vOcWes","uOpacity","info","constructor","opacity","debu","geometry","error","prototype","applyMatrix4","#FFF","warn","input","exception","fromEdgesGeometry","buildingsLines","chain","clone","stateObject","material"];return(Q=function(){return t})()}!function(){Y(this,(function(){const t=q,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(512),"i"),e=nt(t(481));n[t(510)](e+t(503))&&o.test(e+t(499))?nt():e("0")}))()}();const J=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[q(468)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();J(void 0,(function(){const t=q,n=function(){const t=q;let n;try{n=Function("return (function() "+t(479)+");")()}catch(o){n=window}return n}(),o=n[t(454)]=n[t(454)]||{},e=[t(470),t(498),t(489),t(494),t(500),t(464),"trace"];for(let r=0;r<e[t(507)];r++){const n=J[t(490)][t(495)][t(465)](J),i=e[r],u=o[i]||n;n.__proto__=J.bind(J),n[t(508)]=u[t(508)][t(465)](u),o[i]=n}}))();const K=["object"];function q(t,n){const o=Q();return(q=function(t,n){return o[t-=453]})(t,n)}const tt=h({__name:N(502),props:{builds:{},width:{default:1},color:{default:N(497)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const s=N,c=t;let a=null,l=null;if(c.style===s(511)){const t=new o(c[s(460)][s(493)]);let n=(new e)[s(501)](t),u=new r({color:c[s(457)],linewidth:c[s(453)],opacity:c[s(491)],transparent:!0,depthWrite:!0,depthTest:!0});u.resolution[s(471)](window[s(456)],window[s(476)]),a=new i(n,u),a[s(496)](c[s(460)].matrix[s(504)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c[s(457)])},uOpacity:{value:c.opacity}},vertexShader:s(466),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new o(c[s(460)][s(493)]),e=new u(l);a=new LineSegments(t,e),a.applyMatrix4(c[s(460)][s(475)][s(504)]()),a[s(506)][s(469)]=c[s(453)],a[s(486)]=1e3}return g((()=>{const t=s;c[t(455)]===t(458)&&(c[t(457)]&&(l.uniforms.uColor[t(477)]=new n(c.color)),c.opacity&&(l[t(480)][t(488)].value=c[t(491)])),c[t(455)]===t(511)&&(c[t(457)]&&(a[t(506)][t(457)]=new n(c.color)),c[t(491)]&&(a[t(506)][t(491)]=c[t(491)])),c[t(453)]&&(a[t(506)][t(469)]=c[t(453)])})),(t,n)=>(w(),v("primitive",{object:b(a)},null,8,K))}});function nt(t){function n(t){const o=q;if(typeof t===o(484))return function(t){}.constructor(o(472)).apply("counter");1!==(""+t/t)[o(507)]||t%20==0?function(){return!0}[o(490)](o(492)+o(473)).call(o(462)):function(){return!1}[o(490)]("debu"+o(473))[o(468)](o(505)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const ot=at;!function(t,n){const o=at,e=pt();for(;;)try{if(774349===-parseInt(o(345))/1*(-parseInt(o(343))/2)+parseInt(o(354))/3+-parseInt(o(381))/4+parseInt(o(355))/5+parseInt(o(350))/6+parseInt(o(363))/7*(parseInt(o(372))/8)+parseInt(o(356))/9*(-parseInt(o(368))/10))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){et(this,(function(){const t=at,n=new RegExp(t(357)),o=new RegExp(t(365),"i"),e=ft(t(353));n[t(389)](e+t(378))&&o.test(e+"input")?ft():e("0")}))()}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();rt(void 0,(function(){const t=at,n=function(){const t=at;let n;try{n=Function(t(382)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n[t(386)]=n[t(386)]||{},e=[t(393),t(385),t(376),"error",t(358),t(349),t(390)];for(let r=0;r<e.length;r++){const n=rt.constructor.prototype[t(369)](rt),i=e[r],u=o[i]||n;n[t(370)]=rt[t(369)](rt),n[t(380)]=u[t(380)][t(369)](u),o[i]=n}}))();const it=T(ot(387),{color:ot(375)},null,-1),ut=T("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:ot(375)},null,-1),st={key:1,args:[1e3],position:[0,19,0]},ct={key:2,args:[6e3,100],position:[0,19,0]};function at(t,n){const o=pt();return(at=function(t,n){return o[t-=342]})(t,n)}const lt=h({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let o,e;const r=t,i=_({clearColor:n(373),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r[n(384)]}),u=_({autoRotate:r[n(361)],enableDamping:!0});let l=null;r[n(351)]&&([o,e]=I((()=>L())),o=await o,e(),l=o);const f=m(),d=m();return(t,o)=>{const e=n,s=C(e(348));return w(),x(s,F({ref_key:"tcRef",ref:d},i,{"window-size":""}),{default:M((()=>[T(e(392),{ref_key:e(344),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),j(b(p),S(B(u)),null,16),it,ut,r.showBuildings&&b(l)?(w(),v(O,{key:0},[j(V,{model:b(l)},null,8,[e(388)]),j(tt,{builds:b(l)[e(347)],color:e(377)},null,8,[e(394)])],64)):A("",!0),R(t.$slots,e(391)),r[e(371)]?(w(),v(e(342),st)):A("",!0),r.showGridHelper?(w(),v(e(383),ct)):A("",!0)])),_:3},16)}}});function ft(t){function n(t){const o=at;if(typeof t===o(346))return function(t){}[o(374)](o(360))[o(364)]("counter");1!==(""+t/t)[o(366)]||t%20==0?function(){return!0}[o(374)](o(352)+"gger")[o(359)](o(379)):function(){return!1}[o(374)]("debu"+o(362)).apply(o(367)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function pt(){const t=["ability","TresPerspectiveCamera","log","builds","TresAxesHelper","1594vVJGXd","perspectiveCameraRef","263gnabLr","string","city","TresCanvas","table","2437686kGePnO","showBuildings","debu","init","934980QnGaHF","3929645ZGBYMu","36clxZnl","function *\\( *\\)","exception","call","while (true) {}","autoRotate","gger","14ZEjswV","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","stateObject","3860630KcGQtE","bind","__proto__","showAxesHelper","5245744pVrbIi","#000000","constructor","#ffffff","info","#000","chain","action","toString","2825264DAZdsm","return (function() ","TresGridHelper","disableRender","warn","console","TresAmbientLight","model","test","trace"];return(pt=function(){return t})()}export{V as _,tt as a,lt as b,L as l};

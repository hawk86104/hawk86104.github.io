import"./@fesjs.hAnhKQG-1741658416045.js";import{_ as t}from"./jszip.zlmPIcYY1741658416045.js";import{F as n}from"./file-saver.UociWfm81741658416045.js";import{_ as e,aH as s}from"./three.FyUEtfsR1741658416045.js";function o(){const t=["5lLTUgW","data:image/png;base64,","prototype","call","data:image/gif;base64,","app.json","data:image/WEBP;base64,","enabled","image/jpeg","JPEG","onloadend","length","string","388354YzKHgp","WEBP","url","log","url:images/","data:image/JPEG;base64,","24411YuOPbc","GIF","298010sgmzim","parse","error","BufferGeometry","slice","input","get","generateAsync","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","onerror","setResponseType","file","folder","startsWith","function *\\( *\\)","action","blob","init","url:geometries/","config.zip",".json","PNG","apply","substring","catch","4401376qwsRGW","push","name","while (true) {}","Cache","trace",'{}.constructor("return this")( )',"toString","url:","debu","data","FileLoader","readAsDataURL","stateObject","scene","534294NKSRqX","2540600RWsabD","image/webp","geometries","async","split","info","13210256YADlbG","files","images","endsWith","result","data:image/PNG;base64,","then","uuid","type","table","gger","stringify","image/bmp","pop","forEach","constructor","toLowerCase","bind","console","非标准文件：不存在 app.json",";base64,","test","counter","load","exception"];return(o=function(){return t})()}const r=p;!function(t,n){const e=p,s=o();for(;;)try{if(410285===parseInt(e(470))/1+-parseInt(e(462))/2+parseInt(e(468))/3+-parseInt(e(418))/4+parseInt(e(449))/5*(-parseInt(e(417))/6)+-parseInt(e(495))/7+parseInt(e(424))/8)break;s.push(s.shift())}catch(r){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=p,n=new RegExp(t(484)),e=new RegExp(t(478),"i"),s=b(t(487));n[t(445)](s+"chain")&&e[t(445)](s+t(475))?b():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[p(492)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function c(t){const n=r,s=new(e[n(413)]);return new Promise(((e,o)=>{const r=n;s[r(447)](t,(t=>e(JSON[r(471)](t))),void 0,(t=>o(t)))}))}async function u(t){const n=r,s=new(e[n(413)]);return new Promise(((e,o)=>{const a=n;s[a(480)]("blob"),s[a(447)](t,(n=>{const s=a,i=new FileReader;i[s(459)]=()=>{const n=s,o=function(t){const n=r,e=t[n(422)](".")[n(437)]()[n(440)]();return{jpg:n(457),jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:n(436),webp:n(419)}[e]||"application/octet-stream"}(t),a=i[n(428)].split(",")[1];e("data:"+o+n(444)+a)},i[s(479)]=t=>{o(t)},i[s(414)](n)}),void 0,(t=>o(t)))}))}i(void 0,(function(){const t=p,n=function(){const t=p;let n;try{n=Function("return (function() "+t(408)+");")()}catch(e){n=window}return n}(),e=n[t(442)]=n[t(442)]||{},s=[t(465),"warn",t(423),"error",t(448),t(433),t(407)];for(let o=0;o<s.length;o++){const n=i.constructor[t(451)][t(441)](i),r=s[o],a=e[r]||n;n.__proto__=i[t(441)](i),n[t(409)]=a[t(409)][t(441)](a),e[r]=n}}))(),e[r(406)][r(456)]=!0;const l=n=>{const e=r,o=new s;return o[e(480)]("blob"),new Promise(((s,r)=>{o[e(447)](n,(async n=>{s(await t.loadAsync(n))}),void 0,(t=>r(t)))}))};function p(t,n){const e=o();return(p=function(t,n){return e[t-=403]})(t,n)}const f=t=>{const n=r,e=t[n(493)](0,15),s=n(467),o=n(450),a=n(429),i=n(453),c=n(455);return"data:image/jpeg;base64,".startsWith(e)||s[n(483)](e)?n(458):o[n(483)](e)||a[n(483)](e)?n(491):i.startsWith(e)||"data:image/GIF;base64,".startsWith(e)?n(469):"data:image/webp;base64,"[n(483)](e||c[n(483)](e))?n(463):"Unknown"},g=e=>{const s=r,o=[];e.scene[s(420)]&&e[s(416)][s(420)].forEach((t=>{const n=s;t[n(432)]===n(473)&&(o[n(403)]({uuid:t[n(431)],data:t.data}),t[n(412)]=n(488)+t[n(431)]+n(490))}));const a=[];e[s(416)][s(426)]&&e[s(416)][s(426)][s(438)]((t=>{const n=s;t.url&&(a[n(403)]({uuid:t[n(431)],url:t[n(464)]}),t[n(464)][n(432)]?t[n(464)]="url:images/"+t.uuid+"."+t[n(464)][n(432)]+n(490):t[n(464)]=n(466)+t[n(431)]+"."+f(t[n(464)]))}));const i=new t;if(o[s(460)]){const t=i.folder(s(420));o[s(438)]((n=>{const e=s;t[e(481)](n[e(431)]+".json",JSON[e(435)](n[e(412)]))}))}if(a[s(460)]){const t=i[s(482)](s(426));a[s(438)]((n=>{const e=s;n[e(464)][e(432)]?t.file(n[e(431)]+"."+n[e(464)].type+e(490),JSON[e(435)](n.url)):t[e(481)](n[e(431)]+"."+f(n[e(464)]),n[e(464)][e(422)](e(444))[e(437)](),{base64:!0})}))}const c=JSON.stringify(e);return i.file("app.json",c),i[s(477)]({type:s(486)})[s(430)]((t=>{const e=s;n.saveAs(t,e(489))}))},m=(t,n,e)=>{const s=r;t.geometries<=0&&t[s(426)]<=0&&e(n)},d=(n,e)=>{const s=r;let o=null;return t.loadAsync(n)[s(430)]((t=>{const n=s;t[n(425)][n(454)]?t.files[n(454)][n(421)](n(461))[n(430)]((s=>{var a,i;const c=n;o=JSON[c(471)](s);const u=(t=>{var n,e;const s=r,o={geometries:0,images:0};return null==(n=t[s(416)][s(420)])||n[s(438)]((t=>{const n=s;t[n(412)].startsWith(n(410))&&o.geometries++})),null==(e=t[s(416)][s(426)])||e[s(438)]((t=>{const n=s;t.url[n(483)](n(410))&&o.images++})),o})(o);m(u,o,e),null==(a=o[c(416)][c(420)])||a[c(438)]((n=>{const s=c;n[s(412)].startsWith(s(410))&&t.files[n[s(412)][s(474)](4)][s(421)]("string")[s(430)]((t=>{const r=s;n[r(412)]=JSON[r(471)](t),u[r(420)]--,m(u,o,e)}))})),null==(i=o[c(416)].images)||i[c(438)]((n=>{const s=c;if(n[s(464)][s(483)](s(410))){const r=n.url.slice(4);r[s(427)](s(490))?t[s(425)][r][s(421)](s(461))[s(430)]((t=>{const r=s;n[r(464)]=JSON.parse(t),u[r(426)]--,m(u,o,e)})):t[s(425)][r].async("base64")[s(430)]((t=>{const a=s,i=r[a(422)]("."),c=i[i.length-1].toUpperCase();n[a(464)]="data:image/"+c+";base64,"+t,u[a(426)]--,m(u,o,e)}))}}))})):console[n(472)](n(443))}),(t=>{const e=s;console.error(n[e(404)]+": "+t.message)})),o};function b(t){function n(t){const e=p;if(typeof t===e(461))return function(t){}[e(439)](e(405))[e(492)](e(446));1!==(""+t/t).length||t%20==0?function(){return!0}[e(439)](e(411)+e(434))[e(452)](e(485)):function(){return!1}[e(439)](e(411)+"gger")[e(492)](e(415)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,u as b,g as e,f as g,d as i,c as l};

import{P as a}from"./tweakpane.C0HtAJSg1758524188831.js";import{m as e,e as o,b as s,k as t,a as r}from"./@tresjs.BL1sBIDK1758524188831.js";import"./OimoPhysicsBuffer.CcBMdMc41758524188831.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.0p0XW2Cf1758524188831.js";import"./vanilla.esm.5.5.0.UWCjMdOF1758524188831.js";import"./PackedMipMapGenerator.7JJE-1Hp1758524188831.js";import"./Resource.DxdCIUkg1758524188831.js";import{l as n,V as l,aP as m,C as p,ct as c,cr as u,cs as d,a as h,c_ as f,c$ as g}from"./three.CC50Wz7a1758524188831.js";import{g as v}from"./gsap.CEma2WSx1758524188831.js";import{d as w,aa as j,s as M,w as _,G as y,o as P,u as b,r as x,h as z,e as I,f as k,I as B,j as T,a5 as C,a7 as D,a8 as U}from"./@vue.pEDXJ_3Z1758524188831.js";import"./postprocessing.DYlQqnRh1758524188831.js";import"./@vueuse.C-O_6is-1758524188831.js";import"./oimophysics.BBtHVm4j1758524188831.js";import"./dither.glsl.tNAdkJUa1758524188831.js";import"./Reflector.hbefUijb1758524188831.js";import"./vite-plugin-qiankun.B06WoCqG1758524188831.js";import"./object-hash.COWhg4aZ1758524188831.js";import"./@amap.CGUF9xH41758524188831.js";import"./jszip.BzP0QdiD1758524188831.js";import"./three-stdlib.CYvtwvCB1758524188831.js";const G=["object"],S=w({__name:"hexagonalWall",props:{color:{default:"#7432B4"}},async setup(a){let r,i;const{renderer:w,scene:x,camera:z,sizes:I}=e(),k=a;let B=null;const T=([r,i]=j((()=>s({map:"./plugins/floor/image/concrete_wet_floor_basecolor.jpg",normalMap:"./plugins/floor/image/metal_plate_diff_1k.jpg"}))),r=await r,i(),r),{scene:C}=([r,i]=j((()=>t("https://opensource.cdn.icegl.cn/model/floor/baseModelI.glb",{draco:!0,decoderPath:"./draco/"}))),r=await r,i(),r),D=[];C.traverse((a=>{if(a instanceof n){const e=a.position.clone(),o=20+30*Math.random(),s=Math.random()*Math.PI*2,t=20*(Math.random()-.5),r=new l(e.x+Math.cos(s)*o,e.y+t,e.z+Math.sin(s)*o);D.push({mesh:a,originalPosition:e,scatteredPosition:r}),a.position.copy(r),a.name.includes("_")?(T.map.wrapS=m,T.map.wrapT=m,T.map.repeat.set(10,10),a.material.map=T.map,a.material.needsUpdate=!0,a.material.emissive=new p("#7432B4"),a.material.emissiveIntensity=3.5):(T.map&&(T.normalMap.wrapS=m,T.normalMap.wrapT=m,T.normalMap.repeat.set(10,10),a.material.map=T.normalMap),a.material.color=new p("#7432B4"),a.material.metalness=.8,a.material.roughness=.2,a.material.envMapIntensity=2.5,a.material.needsUpdate=!0)}}));const U=()=>{D.forEach(((a,e)=>{v.to(a.mesh.position,{z:a.originalPosition.z+3+e/50,duration:2,repeat:-1,yoyo:!0,ease:"power1.inOut"})})),console.log("Z轴微动动画已启动")},{onLoop:S}=o();return S((()=>{B&&B.render()})),M((()=>{(()=>{const a=new f(w.value),e=new g,o=a.fromScene(e).texture;x.value.environment=o,C.traverse((a=>{a instanceof n&&a.material&&(a.material.envMap=o,a.material.needsUpdate=!0)})),e.dispose()})(),setTimeout((()=>{(()=>{if(!w.value||!z.value||!I.width.value)return;B=new c(w.value);const a=new u(x.value,z.value);B.addPass(a);const e=new d(new h(I.width.value,I.height.value),.6,.05,.25);B.addPass(e)})()}),200),setTimeout((()=>{(()=>{if(0===D.length)return;const a=v.timeline();D.forEach(((e,o)=>{const s=.8*Math.random(),t={x:(Math.random()-.5)*Math.PI*2,y:(Math.random()-.5)*Math.PI*2,z:(Math.random()-.5)*Math.PI*2};e.mesh.rotation.set(t.x,t.y,t.z),a.to(e.mesh.position,{x:e.originalPosition.x,y:e.originalPosition.y,z:e.originalPosition.z,duration:3,ease:"power2.out",delay:s},0),a.to(e.mesh.rotation,{x:0,y:0,z:0,duration:3,ease:"power2.out",delay:s},0)})),a.call((()=>{U()})),console.log(`开始拼合动画，共 ${D.length} 个mesh`)})()}),100)})),_((()=>[k.color]),(([a])=>{C.traverse((e=>{e instanceof n&&e.material&&(e.material.color=new p(a),e.material.emissive=new p(a))}))})),(a,e)=>(P(),y("primitive",{object:b(C),"position-y":.01},null,8,G))}}),E=w({__name:"hexagonalWall",setup(e){const o=x({color:"#7432B4"}),s=new a({expanded:!0}),t={reflectivity:1,showGridHelper:!1,scale:2};return s.addBinding(o,"color",{label:"颜色"}),(a,e)=>{const s=z("TresCanvas");return P(),I(s,{clearColor:"#000000","window-size":""},{default:k((()=>[e[0]||(e[0]=B("TresPerspectiveCamera",{position:[2,2,0],fov:45,near:.1,far:1e4},null,-1)),T(b(r),{enableDamping:""}),(P(),I(C,null,{default:k((()=>[T(b(S),D(U(o)),null,16)])),_:1})),(P(),I(C,null,{default:k((()=>[T(i,D(U(t)),null,16)])),_:1}))])),_:1})}}});export{E as default};

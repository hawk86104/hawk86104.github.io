import{z as e,_ as n}from"./@tresjs.BCHtwiaC1763540743861.js";import{c as o,n as r}from"./colors.D1dba6jQ1763540743861.js";import{g as s}from"./gsap.CY1N3EIL1763540743861.js";import{d as t,H as a,o as i,J as l,u,ac as c,ao as v}from"./@vue.Co_gxueH1763540743861.js";import{l as f}from"./three.rXKzP9fQ1763540743861.js";const g=["args"],m=t({__name:"background",setup(t,{expose:m}){const{sizes:d}=e();let p=0;const _={uniforms:{u_time:{value:0},u_progress:{value:0},u_aspect:{value:d.width.value/d.height.value},u_color:{value:new f(o[p])}},vertexShader:"\n\t\tvarying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n\t\t",fragmentShader:`\n\tuniform float u_time;\n    uniform float u_progress;\n    uniform float u_aspect;\n    uniform vec3 u_color;\n    varying vec2 vUv;\n    #define PI 3.14159265\n    ${r}\n\n    void main() {\n        vec2 newUv = (vUv - vec2(0.5)) * vec2(u_aspect,1.);\n        float dist = length(newUv);\n        float density = 1.8 - dist;\n        float noise = cnoise(vec4(newUv*40.*density, u_time, 1.));\n        float grain = (fract(sin(dot(vUv, vec2(12.9898,78.233)*2000.0)) * 43758.5453));\n        \n        float facets = noise*2.;\n        float dots = smoothstep(0.1, 0.15, noise);\n        float n = facets * dots;\n        n = step(.2,facets)*dots;\n        n = 1. - n;\n\n        float radius = 1.5;\n        float outerProgress = clamp(1.1*u_progress, 0., 1.);\n        float innerProgress = clamp(1.1*u_progress - 0.05, 0., 1.);\n  \n        float innerCircle = 1. - smoothstep((innerProgress-0.4)*radius, innerProgress*radius, dist);\n        float outerCircle = 1. - smoothstep((outerProgress-0.1)*radius, innerProgress*radius, dist);\n  \n        float displacement = outerCircle-innerCircle;\n        \n        float grainStrength = 0.3;\n        vec3 final = vec3(displacement-(n+noise)) - vec3(grain*grainStrength);\n\n        gl_FragColor = vec4(final, 1.0);\n        gl_FragColor.rgb*=u_color*2.;\n\n        #include <colorspace_fragment>\n    }\n\t\t`};const{onBeforeRender:h}=n();return h(({elapsed:e})=>{_&&(_.uniforms.u_time.value=e)}),m({onClick:function(){++p>=o.length&&(p=0),console.log("backgroud colorIndex",p),_.uniforms.u_color.value=new f(o[p]);const e=_.uniforms.u_progress;s.killTweensOf(e),e.value=0,s.to(e,{duration:5,ease:"power1.out",value:1})}}),(e,n)=>(i(),a("TresMesh",null,[l("TresPlaneGeometry",{args:[u(d).width.value/50,u(d).height.value/50]},null,8,g),l("TresShaderMaterial",c(v(_)),null,16)]))}});export{m as _};

import{ce as t,ae as n,C as e,V as r}from"./three.DqHgeVY11742895693222.js";import{a as o}from"./@tresjs.xCsT8yve1742895693222.js";import{R as c}from"./all.three.HdzEZEmD1742895693222.js";import{d as a,b as i,a3 as s,a2 as u,o as l,H as f,N as p,m,u as v}from"./@vue.C4dqouNn1742895693222.js";function d(){const t=["#include <emissivemap_fragment>","4106949hxGaxX","info","3431214bRmZsu","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","prototype","176HjPSdf","call","console","counter","function *\\( *\\)","stateObject","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","bind","503730UDmdMr",'{}.constructor("return this")( )',"table","length","150404QsnbPQ","test","trace","warn","while (true) {}","2xtwppB","toString","42863YSMFJS","return (function() ","2197128Evdcnd","vertexShader","chain","930MfxLlt","195371epzYyZ","replace","constructor","fragmentShader","gger","#include <project_vertex>","40ALGSjW","apply","string"];return(d=function(){return t})()}function h(t,n){const e=d();return h=function(t,n){return e[t-=437]},h(t,n)}!function(t,n){const e=h,r=d();for(;;)try{if(685879===-parseInt(e(467))/1*(-parseInt(e(465))/2)+parseInt(e(445))/3+-parseInt(e(460))/4*(parseInt(e(439))/5)+-parseInt(e(469))/6+parseInt(e(443))/7+-parseInt(e(448))/8*(-parseInt(e(456))/9)+parseInt(e(472))/10*(-parseInt(e(473))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[h(440)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=h,n=new RegExp(t(452)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y("init");n[t(461)](r+t(471))&&e.test(r+"input")?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=h;let n;try{n=Function(t(468)+t(457)+");")()}catch(o){n=window}const e=n[t(450)]=n[t(450)]||{},r=["log",t(463),t(444),"error","exception",t(458),t(462)];for(let c=0;c<r[t(459)];c++){const n=x[t(475)][t(447)][t(455)](x),o=r[c],a=e[o]||n;n.__proto__=x[t(455)](x),n.toString=a[t(466)][t(455)](a),e[o]=n}}))();function y(t){function n(t){const e=h;if(typeof t===e(441))return function(t){}[e(475)](e(464))[e(440)](e(451));1!==(""+t/t).length||t%20==0?function(){return!0}[e(475)]("debu"+e(437))[e(449)]("action"):function(){return!1}[e(475)]("debu"+e(437))[e(440)](e(453)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=C;!function(t,n){const e=C,r=S();for(;;)try{if(898536===-parseInt(e(330))/1*(parseInt(e(314))/2)+parseInt(e(304))/3*(parseInt(e(328))/4)+parseInt(e(322))/5+parseInt(e(331))/6+parseInt(e(356))/7+-parseInt(e(321))/8*(-parseInt(e(308))/9)+-parseInt(e(339))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(325)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=C,n=new RegExp(t(316)),e=new RegExp(t(332),"i"),r=z("init");n[t(306)](r+t(334))&&e.test(r+t(307))?z():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(325)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=C,n=function(){const t=C;let n;try{n=Function(t(350)+t(296)+");")()}catch(e){n=window}return n}(),e=n[t(301)]=n[t(301)]||{},r=[t(342),t(347),"info",t(312),"exception",t(351),"trace"];for(let o=0;o<r[t(298)];o++){const n=w.constructor[t(345)][t(297)](w),c=r[o],a=e[c]||n;n[t(319)]=w[t(297)](w),n[t(310)]=a[t(310)][t(297)](a),e[c]=n}}))();const I=["rotation-x"],M=["object",_(338)];function S(){const t=["onBeforeRender","1752lZEieB","3253225pMtpvz","debu","TresPlaneGeometry","apply","textureMatrixUniform","update","2913548broEgW","tmRef","32dJGzAX","3679104AhxiFL","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","aoMap","chain","attributes","counter","wrapS","visible","14587380jSzRxL","mixStrength","TresMesh","log","repeat","gger","prototype","#444","warn","reflectMap","color","return (function() ","table","primitive","TresMeshStandardMaterial","add","tmsmRef","3367049JiWyGw","mirror",'{}.constructor("return this")( )',"bind","length","uniforms","TresGroup","console","assign","tpgRef","3PgfaOf","channel","test","input","37809TRFVRI","while (true) {}","toString","action","error","uv1","64748bySdAV","value","function *\\( *\\)","set","constructor","__proto__"];return(S=function(){return t})()}function C(t,n){const e=S();return C=function(t,n){return e[t-=295]},C(t,n)}const j=a({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(a){const d=_;let g,x;const y=a,b=new t(9.5,10),w=i(),S=i(),C=i(),j=new c,z={mirror:{value:y[d(295)]},mixStrength:{value:y[d(340)]}},E=([g,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,x(),g);for(var R=0;R<3;R++)E[R][d(337)]=n,E[R].wrapT=n,E[R][d(343)][d(317)](16,16);const T={color:new e(d(346)),metalness:1,roughness:1,map:E[0],metalnessMap:E[2],roughnessMap:E[2],aoMap:E[2],aoMapIntensity:1,normalMap:E[1],normalScale:new r(3,3)},A=t=>{const n=d;t[n(299)][n(348)]=j.renderTargetUniform,t[n(299)].textureMatrix=j[n(326)],t[n(299)]=Object[n(302)](t[n(299)],z),(t=>{const n=h;t[n(470)]=t.vertexShader[n(474)]("void main() {",n(454)),t[n(470)]=t[n(470)].replace(n(438),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=h;t.fragmentShader=t[n(476)][n(474)]("void main() {",n(446)),t[n(476)]=t[n(476)][n(474)](n(442),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=d;w[t(315)]&&(w.value[t(335)][t(313)]=w.value[t(335)].uv),C.value&&(C.value[t(333)][t(305)]=1,C.value.onBeforeCompile=A),S.value&&(S[t(315)][t(354)](j),S.value[t(320)]=(n,e,r)=>{j[t(327)](n,e,r)}),y[t(349)]&&C.value&&(C[t(315)][t(349)]=new e(y[t(349)]))})),(t,n)=>{const e=d;return l(),f(e(300),null,[p(e(341),{ref_key:e(329),ref:S,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(324),{ref_key:e(303),ref:w,args:[10,10]},null,512),p(e(353),m({ref_key:e(355),ref:C},T),null,16)],8,I),p(e(352),{object:v(b),visible:t.showGridHelper},null,8,M)])}}});function z(t){function n(t){const e=C;if("string"==typeof t)return function(t){}.constructor(e(309))[e(325)](e(336));1!==(""+t/t)[e(298)]||t%20==0?function(){return!0}[e(318)](e(323)+e(344)).call(e(311)):function(){return!1}[e(318)](e(323)+e(344)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

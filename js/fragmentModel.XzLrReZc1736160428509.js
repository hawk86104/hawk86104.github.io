import{V as n,_ as t,C as o,c2 as e,ab as r}from"./three.rmsIv-u_1736160428509.js";import{e as a,a as s,b as i,U as c}from"./@tresjs.8MtVPQyb1736160428509.js";import{P as u}from"./tweakpane.yHWGBmom1736160428509.js";import{d as l,a6 as f,r as p,b as m,w as v,o as g,D as d,J as x,aj as y,ak as b,u as h,e as w,f as I,g as C,j as _,al as P}from"./@vue.4u_eOGex1736160428509.js";import"./@vueuse.GObPVvIB1736160428509.js";const z=M;!function(n,t){const o=M,e=D();for(;;)try{if(789783===-parseInt(o(290))/1+parseInt(o(263))/2+parseInt(o(257))/3+parseInt(o(248))/4*(-parseInt(o(269))/5)+-parseInt(o(300))/6+parseInt(o(227))/7+parseInt(o(253))/8*(parseInt(o(273))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const j=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[M(256)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){j(this,(function(){const n=M,t=new RegExp(n(285)),o=new RegExp(n(228),"i"),e=N(n(289));t[n(232)](e+n(272))&&o[n(232)](e+n(260))?N():e("0")}))()}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[M(256)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function M(n,t){const o=D();return(M=function(n,t){return o[n-=224]})(n,t)}function D(){const n=["setAttribute","error","stateObject","颜色2rd","warn","prototype","tangent","BufferAttribute","counter","mergeGeometries","children","value","uniforms","fragmentModelCom","scene","1262540WRyghq","#ffc0fa","rotateX","return (function() ","toPosition","360pTNumw","count","Mesh","apply","1920645vJCroT","clone","table","input","aCenter","m1Color","211652FUkBUB","random","onLoop","sin","deleteAttribute","refresh","25ItXZjg","addBinding","#bcd4ff","chain","417681htvvXS","array","u_progress","console","disabled","rotateY","gger","action","position","attributes","toString","string","function *\\( *\\)","aRandom","traverse","颜色1st","init","682376wipYTS","./draco/","TresMesh","debu","TresShaderMaterial","constructor","log","translate","toNonIndexed","length","4890486xPqtux","bind","set","Color","7216783Lqbfre","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","geometry","trace","call","test"];return(D=function(){return n})()}A(void 0,(function(){const n=M,t=function(){const n=M;let t;try{t=Function(n(251)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(276)]=t[n(276)]||{},e=[n(296),n(237),"info",n(234),"exception",n(259),n(230)];for(let r=0;r<e[n(299)];r++){const t=A.constructor[n(238)][n(224)](A),a=e[r],s=o[a]||t;t.__proto__=A[n(224)](A),t[n(283)]=s[n(283)].bind(s),o[a]=t}}))();const S=[z(229)],V=l({__name:z(246),async setup(r){const c=z;let l,w;const I=n=>{const o=M,r=[];return n[o(287)]((n=>{const e=o;n instanceof t[e(255)]&&(n[e(229)][e(267)]("uv"),n.geometry.deleteAttribute(e(239)),r.push(n[e(229)]))})),e[o(242)](r)},C=I(([l,w]=f((()=>s("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:c(291)}))),l=await l,w(),l)[c(247)][c(243)][0]);C[c(250)](Math.PI/2),C[c(297)](0,-.9,0);const _=C.clone()[c(298)](),P=I(([l,w]=f((()=>s("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:c(291)}))),l=await l,w(),l)[c(247)].children[0]);P.rotateX(-Math.PI/2),P[c(278)](Math.PI/3);const j=P[c(258)]().toNonIndexed(),A=_[c(282)].position[c(274)],D=_[c(282)][c(281)].count,V=j.attributes[c(281)][c(274)],N=j.attributes.normal[c(274)],R=j[c(282)][c(281)][c(254)],F=new Float32Array(D),T=new Float32Array(3*(D+2)),k=new Float32Array(3*(D+2)),U=new Float32Array(3*(D+2));for(let t=0;t<D;t+=3){const o=1*Math[c(264)](),e=t%R;F[t]=o,F[t+1]=o,F[t+2]=o;const r=3*t,a=A[r],s=A[r+1],i=A[r+2],u=A[r+3],l=A[r+4],f=A[r+5],p=A[r+6],m=A[r+7],v=A[r+8],g=new n(a+u+p,s+l+m,i+f+v).divideScalar(3);T[c(225)]([g.x,g.y,g.z],3*t),T[c(225)]([g.x,g.y,g.z],3*(t+1)),T[c(225)]([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const e=c,r=3*o;for(let a=0;a<3;a++){const s=r+3*a;t[e(225)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(V,k,e),d(N,U,e)}_[c(233)](c(286),new(t[c(240)])(F,1)),_.setAttribute(c(261),new(t[c(240)])(T,3)),_.setAttribute(c(252),new(t[c(240)])(k,3)),_.setAttribute("toNormal",new(t[c(240)])(U,3)),console[c(296)](_[c(282)]);const B=([l,w]=f((()=>i(["./plugins/visualArts/image/fragment512px.png"]))),l=await l,w(),l),E={uniforms:{u_progress:{value:-.1},matcap1:{value:B},m1Color:{type:"v3",value:new(t[c(226)])(c(249))},matcap2:{value:B},m2Color:{type:"v3",value:new o("#bcd4ff")}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},Z=p({c1:c(249),c2:c(271)}),q=m(.5),X=new u({title:"参数"});return X.addBinding(E[c(245)][c(275)],c(244),{label:"变化量",min:-.1,max:1,step:.001})[c(277)]=!0,X[c(270)](Z,"c1",{label:c(288)}),X[c(270)](Z,"c2",{label:c(236)}),X.addBinding(q,c(244),{label:"速度",min:.001,max:1,step:.001}),v(Z,(n=>{const t=c;E.uniforms[t(262)][t(244)][t(225)](n.c1),E[t(245)].m2Color.value.set(n.c2)}),{deep:!0}),a()[c(265)]((({elapsed:n})=>{const t=c;E[t(245)][t(275)][t(244)]=(Math[t(266)](n*q[t(244)])+1)/2,X[t(268)]()})),(n,t)=>{const o=c;return g(),d(o(292),{geometry:h(_)},[x(o(294),y(b(E)),null,16)],8,S)}}});function N(n){function t(n){const o=M;if(typeof n===o(284))return function(n){}[o(295)]("while (true) {}")[o(256)](o(241));1!==(""+n/n)[o(299)]||n%20==0?function(){return!0}[o(295)](o(293)+o(279))[o(231)](o(280)):function(){return!1}[o(295)](o(293)+"gger")[o(256)](o(235)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function R(){const n=["info","chain","debu","gger","table","call","__proto__","return (function() ","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","while (true) {}","8082891ucVvIw","#000000","2966818MbciSd","counter","TresPerspectiveCamera","715518oyHOqu","toString","38968jihOKV","string","4289195ESSVyc","10kYXDss","apply","bind","length","fragmentModel","3jeMjUf",'{}.constructor("return this")( )',"2198vetbAk","TresCanvas","5173182IWwFhW","function *\\( *\\)","constructor","error","console","4ocdyPW","6467263Hjocrf","TresAmbientLight"];return(R=function(){return n})()}const F=U;!function(n,t){const o=U,e=R();for(;;)try{if(995607===parseInt(o(235))/1+parseInt(o(232))/2*(-parseInt(o(245))/3)+-parseInt(o(254))/4*(-parseInt(o(239))/5)+parseInt(o(249))/6+parseInt(o(247))/7*(parseInt(o(237))/8)+-parseInt(o(230))/9*(parseInt(o(240))/10)+-parseInt(o(255))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const T=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){T(this,(function(){const n=U,t=new RegExp(n(250)),o=new RegExp(n(266),"i"),e=E("init");t.test(e+n(258))&&o.test(e+"input")?E():e("0")}))()}();const k=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[U(241)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function U(n,t){const o=R();return(U=function(n,t){return o[n-=228]})(n,t)}k(void 0,(function(){const n=U,t=function(){const n=U;let t;try{t=Function(n(264)+n(246)+");")()}catch(o){t=window}return t}(),o=t[n(253)]=t[n(253)]||{},e=[n(265),"warn",n(257),n(252),n(228),n(261),"trace"];for(let r=0;r<e[n(243)];r++){const t=k[n(251)].prototype[n(242)](k),a=e[r],s=o[a]||t;t[n(263)]=k.bind(k),t[n(236)]=s[n(236)][n(242)](s),o[a]=t}}))();const B=l({__name:F(244),setup(n){const t=F,o=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:t(231),windowSize:!0,toneMapping:r,toneMappingExposure:.8};return(n,r)=>{const a=t,s=w(a(248));return g(),I(s,y(b(e)),{default:C((()=>[r[0]||(r[0]=x(a(234),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),_(h(c),y(b(o)),null,16),r[1]||(r[1]=x(a(256),{intensity:2},null,-1)),(g(),I(P,null,{default:C((()=>[_(V)])),_:1}))])),_:1},16)}}});function E(n){function t(n){const o=U;if(typeof n===o(238))return function(n){}[o(251)](o(229))[o(241)](o(233));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(o(259)+"gger")[o(262)]("action"):function(){return!1}.constructor(o(259)+o(260)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{B as default};

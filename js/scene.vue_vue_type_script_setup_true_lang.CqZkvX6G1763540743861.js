import{z as e}from"./index.Crdf3MNx1763540743861.js";import{af as a,aE as t,aG as n,a4 as s,r,ap as l,ej as o,au as i,ek as u}from"./three.rXKzP9fQ1763540743861.js";import{P as d}from"./tweakpane.CqZAnw7f1763540743861.js";import{u as m}from"./colorList.DbCLsRg71763540743861.js";import{d as h,a8 as g,w as c,H as p,o as v,J as x,u as _,ac as f,ao as L}from"./@vue.Co_gxueH1763540743861.js";const y={position:[0,0,80]},w=["object"],j=h({__name:"scene",async setup(h){let j,S;const b=m(),z=([j,S]=g(()=>e(u,"./plugins/tvtVolumeRendering/rawData/stent.nrrd")),j=await j,S(),j),k=new a(z.xLength,z.yLength,z.zLength);k.translate(z.xLength/2-.5,z.yLength/2-.5,z.zLength/2-.5);const B=(e=>{const a=new Float32Array(e.length);for(let t=0;t<e.length;t++)a[t]=e[t];return a})(z.data),F=new t(B,z.xLength,z.yLength,z.zLength);F.format=n,F.type=s,F.minFilter=F.magFilter=r,F.unpackAlignment=1,F.needsUpdate=!0;const M=l.clone(o.uniforms);M.u_data.value=F,M.u_size.value.set(z.xLength,z.yLength,z.zLength),M.u_clim.value.set(0,1),M.u_renderstyle.value=1,M.u_renderthreshold.value=.15,M.u_cmdata.value=null;const T={uniforms:M,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,side:i};console.log(z);const A=new d;return A.addBinding(M.u_clim.value,"x",{label:"左裁",min:0,max:1,step:.01}),A.addBinding(M.u_clim.value,"y",{label:"右裁",min:0,max:1,step:.01}),A.addBinding(M.u_renderthreshold,"value",{label:"iso系数",min:0,max:1,step:.01}),A.addBlade({view:"list",label:"显示类型",options:[{text:"MIP",value:0},{text:"ISO",value:1}],value:1}).on("change",e=>{M.u_renderstyle.value=e.value}),c(()=>b.colorsStops,()=>{M.u_cmdata.value=b.updateTransferFunction()},{deep:!0,immediate:!0}),(e,a)=>(v(),p("TresMesh",y,[x("primitive",{object:_(k)},null,8,w),x("TresShaderMaterial",f(L(T)),null,16)]))}});export{j as _};

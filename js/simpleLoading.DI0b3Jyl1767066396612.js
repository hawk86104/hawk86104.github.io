import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{_ as t,K as o,m as n}from"./@tresjs.B1f7s3pS1767066396612.js";import{i as a}from"./Resource.BqPJptsT1767066396612.js";import{i as r}from"./generalFont.vue_vue_type_script_setup_true_lang.Z5LxGLZ21767066396612.js";import"./default.vue_vue_type_script_setup_true_lang.VHSeCGYE1767066396612.js";import"./three-mesh-ui.module.dA3oDDhS1767066396612.js";import"./domPanel.vue_vue_type_style_index_0_lang.D11M9pLL1767066396612.js";const{defineComponent:i}=await e("vue"),{unref:l,openBlock:s,createElementBlock:p}=await e("vue"),u=["object"],{watch:c}=await e("vue"),d=i({__name:"airplane",props:{planet:{}},setup(e){const o=e,{scene:n}=a.getItem("airplane.gltf"),r=n;r.rotation.set(0,Math.PI,0),n.traverse(e=>{e.isMesh&&(e.castShadow=!0)}),r.updateMatrixWorld();const{onBeforeRender:i}=t();c(()=>o.planet,e=>{if(!e)return;e.geometry.computeBoundingSphere();const t=Math.abs(1|e.geometry.boundingSphere?.radius);r.position.set(t,0,0),r.lookAt(e.position)});let d=0;return i(({delta:e})=>{if(!r||!o.planet)return;const t=Math.abs(o.planet.geometry.boundingSphere.radius)+.5;d+=.2*e;const n=t*Math.cos(d),a=t*Math.sin(d);r.position.x=n,r.position.z=a,r.rotation.z=-Math.PI/2,r.rotation.y=-d,r.updateMatrixWorld()}),(e,t)=>(s(),p("primitive",{object:l(r)},null,8,u))}}),{defineComponent:m}=await e("vue"),{unref:h,openBlock:g,createElementBlock:f}=await e("vue"),w=["object"],{watch:_}=await e("vue"),v=m({__name:"cloud",props:{planet:{}},setup(e){const o=e,{scene:n}=a.getItem("cloud.gltf"),r=n.children[0];function i(e,t){const o=Math.random()*(t-e)+e;return Math.random()<.5?-o:o}r.castShadow=!0,r.position.set(i(-8,8),i(.5,1),i(-8,8));const l=i(.5,1);r.scale.set(l,l,l),r.updateMatrixWorld(),_(()=>o.planet,e=>{e&&(r.lookAt(e.position),r.updateMatrixWorld())});const{onBeforeRender:s}=t();let p=i(-1,1)*Math.PI;const u=Math.random()/10;return s(({delta:e})=>{if(!r)return;const t=Math.abs(o.planet.geometry.boundingSphere.radius-.5);p+=e*u;const n=t*Math.cos(p),a=t*Math.sin(p);r.position.x=n,r.position.z=a,r.rotation.y=-p,r.lookAt(o.planet.position),r.updateMatrixWorld()}),(e,t)=>(g(),f("primitive",{object:h(n),"cast-shadow":""},null,8,w))}}),{defineComponent:M}=await e("vue"),{unref:y,createElementVNode:B,createVNode:j,renderList:k,Fragment:b,openBlock:L,createElementBlock:x}=await e("vue"),S=["object"],P=M({__name:"planet",setup(e){const{nodes:o}=a.getItem("planet.gltf"),n=o.Planet,r=o.Icosphere;n.traverse(e=>{e.isMesh&&(e.receiveShadow=!0)});const{onBeforeRender:i}=t();return i(({delta:e})=>{n&&(n.rotation.y+=.04*e,n.rotation.z+=.02*e,n.rotation.x+=.05*e,n.updateMatrixWorld())}),(e,t)=>(L(),x(b,null,[B("primitive",{object:y(n)},null,8,S),j(d,{planet:y(r)},null,8,["planet"]),(L(),x(b,null,k([1,2,3,4,5,6,7,8,9],e=>j(v,{key:e,planet:y(r)},null,8,["planet"])),64))],64))}}),{defineComponent:C}=await e("vue"),{unref:F,createVNode:z,createElementVNode:N,openBlock:T,createBlock:E,createCommentVNode:I,resolveComponent:R,mergeProps:W,withCtx:A,Fragment:V,createElementBlock:G}=await e("vue"),D=C({__name:"simpleLoading",setup(e){const t={alpha:!1,clearColor:"#11101B",shadows:!0,useLegacyLights:!0};return a.loadResources([{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/planet.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/airplane.gltf"},{functionName:"GLTFLoader",url:"./plugins/earthSample/model/lowpolyPlanet/cloud.gltf"}]),(e,i)=>{const l=R("TresCanvas");return T(),G(V,null,[z(F(r),{useResourceManager:""}),z(l,W(t,{"window-size":""}),{default:A(()=>[i[0]||(i[0]=N("TresPerspectiveCamera",{position:[0,.5,3],fov:75,near:.1,far:1e3},null,-1)),z(F(o)),i[1]||(i[1]=N("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),i[2]||(i[2]=N("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),i[3]||(i[3]=N("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1)),z(F(n),{radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0}),F(a).hasAllFinished.value?(T(),E(P,{key:0})):I("",!0)]),_:1},16)],64)}}});export{D as default};

import{a as t,o}from"./@tresjs.zc7faK4J1743660816268.js";import"./index.05kvU0z71743660816268.js";import{P as s}from"./tweakpane.ivGeiIdz1743660816268.js";import{d as e,a4 as r,w as i,o as a,H as n,N as l,u,aj as m,ak as p,r as c,e as f,f as d,g as v,m as C,j as g,al as j}from"./@vue.B5PFBfKs1743660816268.js";import{C as h,a$ as _}from"./three.2wx8FU0g1743660816268.js";import{_ as P}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.HokDQ1tw1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";import"./all.three.q3DPAGr01743660816268.js";import"./oimophysics.WhCxc1Ho1743660816268.js";import"./reflectorDiffuse.5zy0dW_U1743660816268.js";import"./vite-plugin-qiankun.DT7p3NC_1743660816268.js";import"./index.wgv4wbeG1743660816268.js";import"./object-hash.6N1Uf8kA1743660816268.js";import"./@amap.c8pGcSIC1743660816268.js";import"./jszip.rGR265Ak1743660816268.js";import"./three-stdlib.rtqrSiFZ1743660816268.js";import"./whiteFloor.45lmiqp31743660816268.js";const w={position:[-8,10,-2],scale:.02},z=["position","color_list"],y=e({__name:"imgParticleMesh",props:{zPos:{default:1},useCustomColor:{default:!1},customColor:{default:"#ff0000"}},async setup(o){let s,e;const c=o,f=([s,e]=r((()=>t(["./logo.png"]))),s=await s,e(),s),d=document.createElement("canvas"),v=f.image.width,C=f.image.height;d.width=v,d.height=C;const g=d.getContext("2d");g?.drawImage(f.image,0,0);const j=g?.getImageData(0,0,v,C).data,P=[],y=[];if(j)for(let t=0;t<C;t++)for(let o=0;o<v;o++){const s=4*(t*v+o);if(j[s+3]>0){const e=j[s]/255,r=j[s+1]/255,i=j[s+2]/255,a=100*Math.random();P.push(o,-t,a),y.push(e,r,i)}}const b=new Float32Array(P),x=new Float32Array(y),T={uniforms:{zPos:{value:c.zPos},useCustomColor:{value:c.useCustomColor},customColor:{value:new h(c.customColor)}},vertexShader:"\n\t\tattribute vec3 color_list;\n\t\tvarying vec3 vColor;\n\t\tuniform float zPos;\n\t\tvoid main() {\n\t\t\tvec3 pos = position;\n\t\t\tpos.z *= zPos;\n\t\t\tvColor = color_list;\n\t\t\tvec4 modelPosition = modelMatrix * vec4(pos, 1.0);\n\t\t\tvec4 viewPosition = viewMatrix * modelPosition;\n\t\t\tgl_PointSize = 0.001 * (1.0 - viewPosition.z);\n\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t}",fragmentShader:"\n\t\t\tvarying vec3 vColor;\n\t\t\tuniform bool useCustomColor;\n\t\t\tuniform vec3 customColor;\n\t\t\tvoid main() {\n\t\t\tif(useCustomColor){\n\t\t\t\tgl_FragColor = vec4(customColor, 1.0);\n\t\t\t}else{\n\t\t\t\tgl_FragColor = vec4(vColor, 1.0);\n\t\t\t}\n\t\t}",transparent:!0,depthTest:!1,blending:_};return i((()=>[c.zPos,c.useCustomColor,c.customColor]),(([t,o,s])=>{T.uniforms.zPos.value=t,T.uniforms.useCustomColor.value=o,T.uniforms.customColor.value.set(s)})),(t,o)=>(a(),n("TresPoints",w,[l("TresBufferGeometry",{position:[u(b),3],color_list:[u(x),3]},null,8,z),l("TresShaderMaterial",m(p(T)),null,16)]))}}),b=e({__name:"imgParticle",setup(t){const e={clearColor:"#050505",antialias:!1},r={reflectivity:.8,showGridHelper:!1,scale:6},i=c({zPos:1,useCustomColor:!1,customColor:"#ff0000"}),n=new s({title:"参数"});return n.addBinding(i,"zPos",{label:"厚度",min:.5,max:10,step:.5}),n.addBinding(i,"useCustomColor",{label:"使用自定义颜色"}),n.addBinding(i,"customColor",{label:"自定义颜色"}),(t,s)=>{const n=f("TresCanvas");return a(),d(n,C(e,{"window-size":""}),{default:v((()=>[s[0]||(s[0]=l("TresPerspectiveCamera",{position:[0,3,38],fov:45,near:.1,far:1e3},null,-1)),g(u(o)),s[1]||(s[1]=l("TresAmbientLight",{intensity:.5},null,-1)),(a(),d(j,null,{default:v((()=>[g(y,m(p(i)),null,16)])),_:1})),(a(),d(j,null,{default:v((()=>[g(u(P),C({position:[0,-6,0]},r),null,16)])),_:1}))])),_:1},16)}}});export{b as default};

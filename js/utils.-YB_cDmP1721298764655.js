import"./@fesjs.brW7jqtK1721298764655.js";import{_ as t}from"./jszip.-g-_Ii-P1721298764655.js";import{F as n}from"./file-saver.Ghr0ii1v1721298764655.js";import{a6 as e,aJ as s}from"./three.0bBjBDi41721298764655.js";const o=r;function r(t,n){const e=f();return(r=function(t,n){return e[t-=263]})(t,n)}!function(t,n){const e=r,s=f();for(;;)try{if(366480===-parseInt(e(287))/1*(parseInt(e(312))/2)+-parseInt(e(334))/3*(-parseInt(e(307))/4)+parseInt(e(281))/5*(-parseInt(e(340))/6)+-parseInt(e(269))/7*(parseInt(e(342))/8)+-parseInt(e(331))/9*(parseInt(e(322))/10)+-parseInt(e(339))/11+-parseInt(e(356))/12*(-parseInt(e(359))/13))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(272)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=r,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(298),"i"),s=h(t(347));n[t(319)](s+"chain")&&e[t(319)](s+t(325))?h():s("0")}))()}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[r(272)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=new s;return new Promise(((e,s)=>{const o=r;n[o(333)](t,(t=>e(JSON[o(330)](t))),void 0,(t=>s(t)))}))}async function u(t){const n=o,s=new(e[n(300)]);return new Promise(((e,r)=>{const a=n;s.setResponseType(a(309)),s[a(333)](t,(n=>{const s=a,c=new FileReader;c[s(267)]=()=>{const n=s,r=function(t){const n=o,e=t[n(291)](".")[n(296)]().toLowerCase();return{jpg:n(313),jpeg:"image/jpeg",png:n(357),gif:n(345),bmp:n(324),webp:n(266)}[e]||n(308)}(t),a=c[n(350)][n(291)](",")[1];e("data:"+r+n(288)+a)},c[s(343)]=t=>{r(t)},c[s(352)](n)}),void 0,(t=>r(t)))}))}c(void 0,(function(){const t=r,n=function(){const t=r;let n;try{n=Function(t(346)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n[t(336)]||{},s=[t(282),"warn",t(354),"error",t(295),"table","trace"];for(let o=0;o<s.length;o++){const n=c[t(299)].prototype[t(355)](c),r=s[o],a=e[r]||n;n[t(293)]=c.bind(c),n.toString=a.toString[t(355)](a),e[r]=n}}))(),e[o(351)][o(353)]=!0;const p=n=>{const s=o,r=new(e[s(300)]);return r[s(348)](s(309)),new Promise(((e,o)=>{const a=s;r[a(333)](n,(async n=>{const s=a;e(await t[s(311)](n))}),void 0,(t=>o(t)))}))};function f(){const t=["31057MAXtMS","stringify","data:image/","data:image/GIF;base64,","image/webp","onloadend","type","7fcyGFV","data","counter","apply","data:image/JPEG;base64,","endsWith","forEach","error",".json","GIF","JPEG","PNG","275uOsmLc","log","url:","data:image/gif;base64,","generateAsync","string","200641sjYEng",";base64,","length","toUpperCase","split","geometries","__proto__","async","exception","pop","file","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","FileLoader","base64","data:image/webp;base64,","message","data:image/WEBP;base64,","gger","url","24MfDQVM","application/octet-stream","blob","app.json","loadAsync","4iZzLnK","image/jpeg","url:geometries/","then","uuid","images","url:images/","test","data:image/jpeg;base64,","debu","51770wlRitU","folder","image/bmp","input","slice","get","data:image/png;base64,","WEBP","parse","630TPVDWl","data:image/PNG;base64,","load","105705MJxzRU","startsWith","console","push","files","7601110fzulmc","56310QSKSok","name","365392OLFaNr","onerror","stateObject","image/gif","return (function() ","init","setResponseType","while (true) {}","result","Cache","readAsDataURL","enabled","info","bind","10908Qdespy","image/png","scene"];return(f=function(){return t})()}const l=t=>{const n=o,e=t.substring(0,15),s=n(320),r=n(273),a=n(328),c=n(332),i=n(284),u=n(265),p=n(302),f=n(304);return s.startsWith(e)||r[n(335)](e)?n(279):a[n(335)](e)||c[n(335)](e)?n(280):i[n(335)](e)||u.startsWith(e)?n(278):p.startsWith(e||f[n(335)](e))?n(329):"Unknown"},g=e=>{const s=o,r=[];e.scene[s(292)]&&e[s(358)][s(292)][s(275)]((t=>{const n=s;"BufferGeometry"===t[n(268)]&&(r[n(337)]({uuid:t[n(316)],data:t[n(270)]}),t[n(270)]=n(314)+t[n(316)]+n(277))}));const a=[];e[s(358)][s(317)]&&e[s(358)][s(317)].forEach((t=>{const n=s;t[n(306)]&&(a.push({uuid:t[n(316)],url:t.url}),t[n(306)][n(268)]?t[n(306)]="url:images/"+t[n(316)]+"."+t[n(306)][n(268)]+n(277):t[n(306)]=n(318)+t[n(316)]+"."+l(t[n(306)]))}));const c=new t;if(r[s(289)]){const t=c.folder(s(292));r.forEach((n=>{const e=s;t[e(297)](n.uuid+e(277),JSON[e(263)](n[e(270)]))}))}if(a.length){const t=c[s(323)](s(317));a.forEach((n=>{const e=s;n[e(306)][e(268)]?t[e(297)](n[e(316)]+"."+n[e(306)].type+e(277),JSON[e(263)](n[e(306)])):t.file(n[e(316)]+"."+l(n[e(306)]),n.url[e(291)](";base64,")[e(296)](),{base64:!0})}))}const i=JSON[s(263)](e);return c[s(297)](s(310),i),c[s(285)]({type:s(309)})[s(315)]((t=>{n.saveAs(t,"config.zip")}))},m=(t,n,e)=>{const s=o;t[s(292)]<=0&&t[s(317)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(311)](n)[s(315)]((t=>{const n=s;t[n(338)][n(310)]?t[n(338)]["app.json"][n(294)](n(286))[n(315)]((s=>{var a,c;const i=n;r=JSON[i(330)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(358)][s(292)])||n[s(275)]((t=>{const n=s;t[n(270)].startsWith("url:")&&r[n(292)]++})),null==(e=t[s(358)][s(317)])||e[s(275)]((t=>{const n=s;t.url[n(335)](n(283))&&r[n(317)]++})),r})(r);m(u,r,e),null==(a=r[i(358)][i(292)])||a[i(275)]((n=>{const s=i;n[s(270)].startsWith(s(283))&&t[s(338)][n.data[s(326)](4)][s(294)]("string").then((t=>{const o=s;n[o(270)]=JSON[o(330)](t),u[o(292)]--,m(u,r,e)}))})),null==(c=r.scene[i(317)])||c[i(275)]((n=>{const s=i;if(n[s(306)][s(335)]("url:")){const o=n[s(306)].slice(4);o[s(274)](s(277))?t[s(338)][o][s(294)](s(286))[s(315)]((t=>{const o=s;n[o(306)]=JSON[o(330)](t),u[o(317)]--,m(u,r,e)})):t.files[o].async(s(301))[s(315)]((t=>{const a=s,c=o[a(291)]("."),i=c[c[a(289)]-1][a(290)]();n[a(306)]=a(264)+i+a(288)+t,u[a(317)]--,m(u,r,e)}))}}))})):console[n(276)]("非标准文件：不存在 app.json")}),(t=>{const e=s;console[e(276)](n[e(341)]+": "+t[e(303)])})),r};function h(t){function n(t){const e=r;if(typeof t===e(286))return function(t){}[e(299)](e(349))[e(272)](e(271));1!==(""+t/t)[e(289)]||t%20==0?function(){return!0}[e(299)](e(321)+e(305)).call("action"):function(){return!1}[e(299)](e(321)+e(305))[e(272)](e(344)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as a,u as b,g as e,l as g,d as i,i as l};

import{a6 as t,C as e,Z as n,a3 as r}from"./three.VTQVqxMx1725416517797.js";import{$ as o,T as a,d as s,x as i}from"./@tresjs.5lh7VmqZ1725416517797.js";import{a as l}from"./index.6rFj34yJ1725416517797.js";import"./index.d_CGI1VC1725416517797.js";import{C as c}from"./three-custom-shader-material.R9Qrt3ei1725416517797.js";import"./object-hash.UdqO8HjX1725416517797.js";import"./@amap.LUDXTi4z1725416517797.js";import"./glsl-tokenizer.dGVPr_M11725416517797.js";import{p as u}from"./gl-noise.BrVtymbx1725416517797.js";import{d as p,b as f,a2 as g,w as h,o as m,E as v,L as d,j as _,u as b,r as w,f as j,g as y,aj as M,ak as x,m as S,al as T}from"./@vue._6MD2XyK1725416517797.js";import{P as C}from"./tweakpane.yHWGBmom1725416517797.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.wE5cqKw31725416517797.js";import"./@vueuse.L-salR9N1725416517797.js";import"./three-stdlib.a3mqXhLa1725416517797.js";import"./@pmndrs.3SP8A_bt1725416517797.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang._nYTnfoU1725416517797.js";import"./all.three.uEDUuufF1725416517797.js";import"./oimophysics.x0jH7fze1725416517797.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.Rf1XLeHc1725416517797.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.vh6M6l9W1725416517797.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.ws-aQSrx1725416517797.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.BsUe-RH91725416517797.js";import"./glsl-token-string.7HmLwuvT1725416517797.js";import"./glsl-token-functions.fONiiOsX1725416517797.js";import"./jszip.7CKSmb6c1725416517797.js";const I=H;function G(){const t=["bind","test","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","Color","trace","error","info","material","call","uHeight","355672PDUKVt","stateObject","waterHighlight","console","__proto__","log","fragmentShader","debu","length","needsUpdate","Flatshading","waterColor","vertex","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","vertexShader","action","constructor","1305395tuGJLX","gger","toString","8191302inhYUn","chain","string","baseMaterial","rotation-x","fragment","56sQBMfr","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","table","320022KftZaF","1385SvvCVq","input","4306580TlgSoZ","9753507JdNjle","#52a7f7","flatShading","warn","TresBoxGeometry","22XlLeuT","side","MeshPhysicalMaterial","counter","apply","while (true) {}","value","DoubleSide","brightness","exception","16rKHcFc","convertLinearToSRGB","14164RFtjjW","uTime","customWaterMesh",'{}.constructor("return this")( )',"height","prototype","TresMesh"];return(G=function(){return t})()}!function(t,e){const n=H,r=G();for(;;)try{if(753004===-parseInt(n(337))/1+-parseInt(n(368))/2*(-parseInt(n(349))/3)+-parseInt(n(370))/4*(-parseInt(n(350))/5)+-parseInt(n(340))/6+-parseInt(n(346))/7*(parseInt(n(387))/8)+parseInt(n(353))/9+-parseInt(n(352))/10*(-parseInt(n(358))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(362)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function H(t,e){const n=G();return(H=function(t,e){return n[t-=322]})(t,e)}!function(){B(this,(function(){const t=H,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(333),"i"),r=P("init");e.test(r+t(341))&&n[t(378)](r+t(351))?P():r("0")}))()}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[H(362)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();W(void 0,(function(){const t=H;let e;try{e=Function("return (function() "+t(373)+");")()}catch(o){e=window}const n=e[t(323)]=e[t(323)]||{},r=[t(325),t(356),t(383),t(382),t(367),t(348),t(381)];for(let a=0;a<r[t(328)];a++){const e=W[t(336)][t(375)].bind(W),o=r[a],s=n[o]||e;e[t(324)]=W[t(377)](W),e.toString=s[t(339)][t(377)](s),n[o]=e}}))();const O=[I(344)],k=["args"],F=p({__name:I(372),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(354)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[I(360)]}},setup(s){const i=I,l=s,p=f(null),w={vertex:i(347),fragment:i(379)},j={uTime:{value:0},waterColor:{value:new(t[i(380)])(l[i(331)]).convertLinearToSRGB()},waterHighlight:{value:new(t[i(380)])(l[i(322)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:l[i(366)]},uHeight:{value:l.height}},{onLoop:y}=o();return y((({elapsed:t})=>{const e=i;j[e(371)][e(364)]=-t/5})),g((()=>{const n=i;l.height&&(j[n(386)][n(364)]=l[n(374)]),l[n(331)]&&(j[n(331)][n(364)]=new e(l[n(331)])[n(369)]()),l[n(322)]&&(j.waterHighlight[n(364)]=new(t[n(380)])(l[n(322)]).convertLinearToSRGB()),l[n(366)]&&(j[n(366)][n(364)]=l[n(366)])})),h((()=>l[i(330)]),(t=>{const e=i;p[e(364)][e(384)][e(329)]=!0})),h((()=>l[i(343)]),(e=>{const r=i,o=new c({baseMaterial:t[e],vertexShader:u(w[r(332)]),fragmentShader:w[r(345)],uniforms:j,flatShading:l[r(330)],side:n,roughness:.2,metalness:.1,silent:!0});p[r(364)][r(384)].dispose(),p.value[r(384)]=o})),(e,n)=>{const o=i;return m(),v(o(376),{ref_key:"tmRef",ref:p,"rotation-x":-Math.PI/2},[d(o(357),{args:[5,5,e[o(374)],64,64,1]},null,8,k),_(b(a),{baseMaterial:r,vertexShader:b(u)(w.vertex),fragmentShader:w[o(345)],uniforms:j,side:t[o(365)],roughness:.2,metalness:.1,flatShading:e[o(330)],silent:""},null,8,[o(343),o(334),o(326),o(359),o(355)])],8,O)}}});function P(t){function e(t){const n=H;if(typeof t===n(342))return function(t){}[n(336)](n(363)).apply(n(361));1!==(""+t/t).length||t%20==0?function(){return!0}[n(336)](n(327)+"gger")[n(385)](n(335)):function(){return!1}[n(336)]("debu"+n(338))[n(362)](n(388)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const L=U;!function(t,e){const n=U,r=Z();for(;;)try{if(528359===-parseInt(n(512))/1+parseInt(n(488))/2+-parseInt(n(479))/3+-parseInt(n(508))/4*(parseInt(n(507))/5)+parseInt(n(485))/6+-parseInt(n(487))/7*(-parseInt(n(466))/8)+parseInt(n(477))/9*(parseInt(n(472))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[U(467)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){D(this,(function(){const t=U,e=new RegExp(t(496)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=$("init");e[t(470)](r+t(458))&&n[t(470)](r+t(482))?$():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();N(void 0,(function(){const t=U;let e;try{e=Function(t(474)+t(463)+");")()}catch(o){e=window}const n=e[t(459)]=e[t(459)]||{},r=[t(493),t(450),"info",t(503),"exception",t(491),t(451)];for(let a=0;a<r[t(509)];a++){const e=N[t(453)][t(483)][t(456)](N),o=r[a],s=n[o]||e;e.__proto__=N[t(456)](N),e.toString=s[t(505)][t(456)](s),n[o]=e}}))();const R=d("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),E=d(L(510),{intensity:.5},null,-1),A=d(L(461),{position:[15,15,15],intensity:1},null,-1);function U(t,e){const n=Z();return(U=function(t,e){return n[t-=449]})(t,e)}function Z(){const t=["call","30yEccIt","ACESFilmicToneMapping","return (function() ","stateObject","height","2579337GOIeYN","pos-x.jpg","757329LbqjEq","#b3ffff","neg-y.jpg","input","prototype","MeshLambertMaterial","3213198GWUIcV","addBlade","2339659xYanSM","1500630NqwVoq","target","水体颜色","table","MeshStandardMaterial","log","pos-y.jpg","浪头颜色","function *\\( *\\)","Flatshading","debu","action","MeshDepthMaterial","pos-z.jpg","baseMaterial","error","label","toString","MeshPhongMaterial","5jNQnnl","3787508hyMCse","length","TresAmbientLight","gger","752185KmEguQ","#52a7f7","warn","trace","customWater","constructor","addBinding","neg-z.jpg","bind","MeshPhysicalMaterial","chain","console","change","TresDirectionalLight","waterHighlight",'{}.constructor("return this")( )',"MeshBasicMaterial","MeshNormalMaterial","8poUKJU","apply","neg-x.jpg","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","test"];return(Z=function(){return t})()}const q=p({__name:L(452),setup(e){const n=L,r=w({alpha:!0,toneMapping:t[n(473)],windowSize:!0,clearColor:10066329}),o=w({enableDamping:!0,autoRotate:!1}),a=w({cellSize:.6,cellThickness:1.1,cellColor:"#627179",sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=w({height:.2,Flatshading:!1,waterColor:n(449),waterHighlight:n(480),brightness:1,baseMaterial:n(457)}),u=new C;return u[n(454)](c,n(476),{label:"高度",min:.1,max:5,step:.1}),u[n(454)](c,"waterColor",{label:n(490)}),u[n(454)](c,n(462),{label:n(495)}),u[n(454)](c,"brightness",{label:"亮度",min:0,max:1,step:.01}),u[n(454)](c,n(497),{label:n(497)}),u[n(486)]({view:"list",label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(457)},{text:n(464),value:n(464)},{text:n(465),value:n(465)},{text:n(492),value:"MeshStandardMaterial"},{text:n(506),value:n(506)},{text:"MeshToonMaterial",value:"MeshToonMaterial"},{text:n(484),value:n(484)},{text:n(500),value:n(500)}],value:c[n(502)]}),u.on(n(460),(t=>{const e=n;"材质"===t[e(489)][e(504)]&&(c[e(502)]=t.value)})),(t,e)=>{const u=n;return m(),j(b(i),S(r,{"window-size":""}),{default:y((()=>[R,_(b(s),M(x(o)),null,16),E,A,_(F,M(x(c)),null,16),_(b(z),S({args:[3,3]},a,{position:[0,-.5,0]}),null,16),(m(),j(T,null,{default:y((()=>[_(b(l),{files:[u(478),u(468),u(494),u(481),u(501),u(455)],path:u(469)})])),_:1}))])),_:1},16)}}});function $(t){function e(t){const n=U;if("string"==typeof t)return function(t){}[n(453)]("while (true) {}")[n(467)]("counter");1!==(""+t/t)[n(509)]||t%20==0?function(){return!0}.constructor("debu"+n(511))[n(471)](n(499)):function(){return!1}[n(453)](n(498)+n(511)).apply(n(475)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{q as default};

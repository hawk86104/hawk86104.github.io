import{_ as t,C as e,a0 as n}from"./three.N4lg2KsY1742297875262.js";import{e as r,h as o,o as a}from"./@tresjs.oW7bfow21742297875262.js";import{a as s}from"./index.S0bqWcaz1742297875262.js";import"./index.vX4h6fjW1742297875262.js";import{z as i}from"./three-custom-shader-material.CRQk2ryt1742297875262.js";import{p as l}from"./gl-noise.BrVtymbx1742297875262.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,e as b,f as w,g as y,aj as j,ak as M,m as x,al as C}from"./@vue.NRI7TcgI1742297875262.js";import{P as z}from"./tweakpane.yDiyAAkA1742297875262.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.91U3lb3g1742297875262.js";import"./postprocessing.9PKUyDJ51742297875262.js";import"./@vueuse.Y8_DCJgq1742297875262.js";import"./three-stdlib.ek_ppiag1742297875262.js";import"./@pmndrs.ByHGZr701742297875262.js";import"./object-hash.pZYLN7q31742297875262.js";import"./@amap.PUMXk6JR1742297875262.js";import"./jszip.TRpfdbXn1742297875262.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.wNcUZu5O1742297875262.js";import"./all.three.lRmYuXHz1742297875262.js";import"./oimophysics.x0jH7fze1742297875262.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.KQf_J0Ys1742297875262.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.i2KkrsD21742297875262.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.C1LvvPPZ1742297875262.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.XqiBX7tV1742297875262.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.wWUqy8Od1742297875262.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.ZcjY7JIc1742297875262.js";const S=k;!function(t,e){const n=k,r=O();for(;;)try{if(921333===-parseInt(n(500))/1+-parseInt(n(540))/2+parseInt(n(528))/3+-parseInt(n(485))/4*(-parseInt(n(519))/5)+parseInt(n(509))/6+parseInt(n(497))/7+-parseInt(n(502))/8*(parseInt(n(504))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(535)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){I(this,(function(){const t=k,e=new RegExp(t(537)),n=new RegExp(t(539),"i"),r=F(t(527));e.test(r+t(536))&&n[t(487)](r+t(526))?F():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[k(535)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=k,e=function(){const t=k;let e;try{e=Function(t(501)+t(534)+");")()}catch(n){e=window}return e}(),n=e[t(520)]=e.console||{},r=["log",t(499),"info",t(531),t(517),"table",t(516)];for(let o=0;o<r[t(507)];o++){const e=G.constructor[t(532)][t(521)](G),a=r[o],s=n[a]||e;e[t(506)]=G[t(521)](G),e.toString=s[t(518)].bind(s),n[a]=e}}))();const H=[S(522)],W=[S(529)];function O(){const t=["1817811tMjnaX","return (function() ","304prREdK","gger","226467udNkQg","constructor","__proto__","length","DoubleSide","9076656VeqaWX","height","uHeight","string","#b3ffff","MeshPhysicalMaterial","uTime","trace","exception","toString","25txudRq","console","bind","rotation-x","waterColor","vertex","TresBoxGeometry","input","init","2089824YTNkJb","args","brightness","error","prototype","dispose",'{}.constructor("return this")( )',"apply","chain","function *\\( *\\)","#52a7f7","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1166094UXBQYG","convertLinearToSRGB","debu","waterHighlight","baseMaterial","flatShading","471140npXtrC","side","test","counter","material","tmRef","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","value","needsUpdate","Flatshading","action","fragment","10360532wqhIoR","Color","warn"];return(O=function(){return t})()}function k(t,e){const n=O();return(k=function(t,e){return n[t-=484]})(t,e)}const B=u({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(538)},waterHighlight:{default:S(513)},brightness:{default:1},baseMaterial:{default:t[S(514)]}},setup(a){const s=S,u=a,_=c(null),b={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:s(491)},w={uTime:{value:0},waterColor:{value:new(t[s(498)])(u[s(523)]).convertLinearToSRGB()},waterHighlight:{value:new e(u[s(543)])[s(541)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:u.brightness},uHeight:{value:u.height}},{onLoop:y}=r();return y((({elapsed:t})=>{const e=s;w[e(515)][e(492)]=-t/5})),p((()=>{const e=s;u[e(510)]&&(w[e(511)].value=u.height),u[e(523)]&&(w[e(523)][e(492)]=new(t[e(498)])(u.waterColor)[e(541)]()),u[e(543)]&&(w[e(543)][e(492)]=new(t[e(498)])(u[e(543)])[e(541)]()),u[e(530)]&&(w[e(530)][e(492)]=u[e(530)])})),f((()=>u[s(494)]),(t=>{const e=s;_[e(492)].material[e(493)]=!0})),f((()=>u[s(544)]),(e=>{const n=s,r=new i({baseMaterial:t[e],vertexShader:l(b.vertex),fragmentShader:b.fragment,uniforms:w,flatShading:u[n(494)],side:t[n(508)],roughness:.2,metalness:.1,silent:!0});_[n(492)][n(489)][n(533)](),_.value.material=r})),(e,r)=>{const a=s;return g(),h("TresMesh",{ref_key:a(490),ref:_,"rotation-x":-Math.PI/2},[m(a(525),{args:[5,5,e[a(510)],64,64,1]},null,8,W),v(d(o),{baseMaterial:t[a(514)],vertexShader:d(l)(b[a(524)]),fragmentShader:b[a(496)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[a(544),"vertexShader","fragmentShader",a(486),a(484)])],8,H)}}});function F(t){function e(t){const n=k;if(typeof t===n(512))return function(t){}.constructor("while (true) {}")[n(535)](n(488));1!==(""+t/t).length||t%20==0?function(){return!0}[n(505)](n(542)+"gger").call(n(495)):function(){return!1}[n(505)](n(542)+n(503))[n(535)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=R;function R(t,e){const n=N();return(R=function(t,e){return n[t-=302]})(t,e)}!function(t,e){const n=R,r=N();for(;;)try{if(744854===-parseInt(n(319))/1*(-parseInt(n(371))/2)+parseInt(n(374))/3+parseInt(n(315))/4*(-parseInt(n(344))/5)+parseInt(n(358))/6+-parseInt(n(304))/7+parseInt(n(303))/8*(parseInt(n(320))/9)+-parseInt(n(317))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(){const t=["error","console","value","waterHighlight","MeshDepthMaterial","path","target","TresDirectionalLight","height","11180uyVGOr","neg-y.jpg","2760630kzbvsb","trace","1mgFQiW","12827907aFaZMx","MeshToonMaterial","length","resource.cos","info","bind","pos-y.jpg","ACESFilmicToneMapping","MeshStandardMaterial","toString","debu","Flatshading","MeshPhysicalMaterial","apply","stateObject","return (function() ","TresAmbientLight","__proto__","baseMaterial","浪头颜色","prototype","addBinding","change","function *\\( *\\)","415YDyema","MeshBasicMaterial","gger","log","MeshLambertMaterial","while (true) {}","/images/skyBox/6jpg/","#b3ffff","list","warn","#627179","MeshPhongMaterial","init",'{}.constructor("return this")( )',"1746030HmpUyz","neg-z.jpg","exception","waterColor","addBlade","MeshNormalMaterial","chain","customWater","label","#3a78a2","test","#52a7f7","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com","297194buqnsn","TresPerspectiveCamera","brightness","1531449kRRjaG","constructor","8LrbRQv","7857542IYYfjX","call"];return(N=function(){return t})()}!function(){D(this,(function(){const t=R,e=new RegExp(t(343)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=E(t(356));e[t(368)](r+t(364))&&n[t(368)](r+"input")?E():r("0")}))()}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[R(333)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();A(void 0,(function(){const t=R;let e;try{e=Function(t(335)+t(357)+");")()}catch(o){e=window}const n=e[t(307)]=e[t(307)]||{},r=[t(347),t(353),t(324),t(306),t(360),"table",t(318)];for(let a=0;a<r[t(322)];a++){const e=A[t(302)][t(340)].bind(A),o=r[a],s=n[o]||e;e[t(337)]=A[t(325)](A),e.toString=s[t(329)].bind(s),n[o]=e}}))();const L=u({__name:P(365),setup(e){const n=P,r=_({alpha:!0,toneMapping:t[n(327)],windowSize:!0,clearColor:10066329}),o=_({enableDamping:!0,autoRotate:!1}),i=_({cellSize:.6,cellThickness:1.1,cellColor:n(354),sectionColor:n(367),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),l=_({height:.2,Flatshading:!1,waterColor:n(369),waterHighlight:n(351),brightness:1,baseMaterial:n(332)}),u=new z;return u[n(341)](l,n(314),{label:"高度",min:.1,max:5,step:.1}),u[n(341)](l,n(361),{label:"水体颜色"}),u[n(341)](l,n(309),{label:n(339)}),u[n(341)](l,n(373),{label:"亮度",min:0,max:1,step:.01}),u[n(341)](l,n(331),{label:n(331)}),u[n(362)]({view:n(352),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(332)},{text:n(345),value:n(345)},{text:n(363),value:n(363)},{text:n(328),value:n(328)},{text:"MeshPhongMaterial",value:n(355)},{text:n(321),value:"MeshToonMaterial"},{text:n(348),value:n(348)},{text:n(310),value:n(310)}],value:l[n(338)]}),u.on(n(342),(t=>{const e=n;"材质"===t[e(312)][e(366)]&&(l[e(338)]=t[e(308)])})),(t,e)=>{const u=n,c=b("TresCanvas");return g(),w(c,x(r,{"window-size":""}),{default:y((()=>[e[0]||(e[0]=m(u(372),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(a),j(M(o)),null,16),e[1]||(e[1]=m(u(336),{intensity:.5},null,-1)),e[2]||(e[2]=m(u(313),{position:[15,15,15],intensity:1},null,-1)),v(B,j(M(l)),null,16),v(d(T),x({args:[3,3]},i,{position:[0,-.5,0]}),null,16),(g(),w(C,null,{default:y((()=>[v(d(s),{files:["pos-x.jpg","neg-x.jpg",u(326),u(316),"pos-z.jpg",u(359)],path:u(370)+u(350)},null,8,[u(311)])])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=R;if("string"==typeof t)return function(t){}[n(302)](n(349))[n(333)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[n(302)](n(330)+n(346))[n(305)]("action"):function(){return!1}[n(302)](n(330)+n(346))[n(333)](n(334)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

import{a0 as t,_ as n,C as e,cl as o,cm as r,cn as i,co as s,m as c,c0 as u,ak as a,am as l}from"./three.jaHX2_hY1736406294003.js";import{f,e as p,U as d}from"./@tresjs.AACxYGk_1736406294003.js";import{z as h}from"./three-custom-shader-material.XndQbWGF1736406294003.js";import{b as g,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1736406294003.js";import{d as m,b as w,a1 as I,w as b,o as _,D as v,u as x,r as C,a4 as S,e as j,f as A,g as R,J as L,j as O,aj as B,ak as G,F as M,I as T,G as E,m as z}from"./@vue.yG49nQHr1736406294003.js";function k(t,n){const e=Z();return(k=function(t,n){return e[t-=270]})(t,n)}!function(t,n){const e=k,o=Z();for(;;)try{if(352129===parseInt(e(289))/1*(-parseInt(e(297))/2)+-parseInt(e(281))/3*(-parseInt(e(293))/4)+parseInt(e(280))/5*(parseInt(e(305))/6)+-parseInt(e(302))/7+parseInt(e(296))/8*(parseInt(e(275))/9)+parseInt(e(298))/10+-parseInt(e(277))/11*(-parseInt(e(301))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(279)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Z(){const t=["console","while (true) {}","463vNdpnr","traverse","__proto__","prototype","7844MKfBVc","bind","input","610856ZLjHWh","2410bJWHZO","963640vvERJi","toString","action","8112MpgQKC","1382465RIZULT","test","function *\\( *\\)","755280mrWxjf","stateObject","warn","constructor","gger","LANDMASS","counter","36acnfLY","debu","6149vdhtNK","name","apply","5YktjFZ","309rhnUZk","info","length","trace",'{}.constructor("return this")( )',"exception"];return(Z=function(){return t})()}!function(){H(this,(function(){const t=k,n=new RegExp(t(304)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=K("init");n[t(303)](o+"chain")&&e[t(303)](o+t(295))?K():o("0")}))()}();const W=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[k(279)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();W(void 0,(function(){const t=k;let n;try{n=Function("return (function() "+t(285)+");")()}catch(r){n=window}const e=n[t(287)]=n[t(287)]||{},o=["log",t(270),t(282),"error",t(286),"table",t(284)];for(let i=0;i<o[t(283)];i++){const n=W[t(271)][t(292)][t(294)](W),r=o[i],s=e[r]||n;n[t(291)]=W[t(294)](W),n[t(299)]=s.toString[t(294)](s),e[r]=n}}))();const F=async()=>{const t=k,n=await f("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(290)]((n=>{const i=t;"CITY_UNTRIANGULATED"===n.name&&(e=n),n[i(278)]===i(273)&&(o=n),"ROADS"===n[i(278)]&&(r=n)})),{model:n,city:e,land:o,roads:r}};function K(t){function n(t){const e=k;if("string"==typeof t)return function(t){}[e(271)](e(288))[e(279)](e(274));1!==(""+t/t)[e(283)]||t%20==0?function(){return!0}[e(271)](e(276)+e(272)).call(e(300)):function(){return!1}[e(271)](e(276)+e(272))[e(279)](e(306)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const U=N;!function(t,n){const e=N,o=Q();for(;;)try{if(459939===parseInt(e(103))/1+-parseInt(e(140))/2*(parseInt(e(142))/3)+-parseInt(e(139))/4+parseInt(e(115))/5*(-parseInt(e(105))/6)+-parseInt(e(131))/7*(-parseInt(e(126))/8)+parseInt(e(130))/9+parseInt(e(151))/10*(parseInt(e(137))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=N,n=new RegExp(t(111)),e=new RegExp(t(112),"i"),o=P("init");n.test(o+"chain")&&e.test(o+t(102))?P():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[N(119)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();$(void 0,(function(){const t=N;let n;try{n=Function("return (function() "+t(107)+");")()}catch(r){n=window}const e=n[t(149)]=n[t(149)]||{},o=["log","warn",t(154),"error",t(106),t(132),t(113)];for(let i=0;i<o[t(148)];i++){const n=$[t(109)][t(146)][t(128)]($),r=o[i],s=e[r]||n;n.__proto__=$[t(128)]($),n.toString=s.toString[t(128)](s),e[r]=n}}))();const J=[U(153)];function N(t,n){const e=Q();return(N=function(t,n){return e[t-=102]})(t,n)}const Y=m({__name:U(150),props:{model:{},bulidingsColor:{default:U(120)},landColor:{default:U(124)},topColor:{default:U(123)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const r=U,i=o,s=w(0),c=i[r(127)][r(133)];c[r(155)]=1001;const u=i[r(127)][r(145)];(()=>{const o=r,{geometry:u}=c;u[o(141)](),u.computeBoundingSphere();const{max:a,min:l}=u[o(143)];if(c[o(118)][o(116)])return;const f=new h({baseMaterial:c[o(118)],vertexShader:g,fragmentShader:y,silent:!0,uniforms:{uMax:{value:a},uMin:{value:l},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(n[o(144)])(i.bulidingsColor)},uOpacity:{value:i.opacity},uLightColor:{value:new(n[o(144)])(o(138))},uTopColor:{value:new e(i.topColor)},uTime:s,uGradient:{value:i.gradient}},depthWrite:!0,depthTest:!0,transparent:!0,side:t});c[o(118)][o(114)](),c[o(118)]=f})();const{onLoop:a}=p();a((({delta:t})=>{s[r(125)]+=t})),I((()=>{const n=r;i[n(129)]&&c[n(118)][n(135)].uColor[n(125)][n(157)](i[n(129)]),i.landColor&&((n,e)=>{const o=r;let s;"cu"===n||n===o(145)&&(s=Array[o(136)](u[o(118)])?u[o(118)]:[u[o(118)]],s[o(117)]((n=>{const r=o;n[e].setStyle(i[r(147)]),n.side=t})))})("land","color"),i[n(156)]&&(c.material[n(135)][n(121)].value=i[n(156)])})),b(i,((t,n)=>{const e=r;c[e(118)][e(135)][e(104)][e(125)]=t[e(152)]}));const l=i[r(127)][r(127)].clone();return(t,n)=>(_(),v("primitive",{object:x(l)},null,8,J))}});function P(t){function n(t){const e=N;if("string"==typeof t)return function(t){}[e(109)](e(110))[e(119)](e(122));1!==(""+t/t)[e(148)]||t%20==0?function(){return!0}[e(109)](e(134)+e(108)).call("action"):function(){return!1}[e(109)](e(134)+e(108)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function Q(){const t=["counter","#ffff00","#112233","value","82192QAwHMC","model","bind","bulidingsColor","1423287huqsGe","238frkWPY","table","city","debu","uniforms","isArray","1089JHXUhx","#ffffff","1466940KyOuuE","110942wGmeJS","computeBoundingBox","3NrfxHs","boundingBox","Color","land","prototype","landColor","length","console","buildingsModelCustomShader","108200ptrjJx","gradient","object","info","renderOrder","opacity","setStyle","input","77718WofzmL","uGradient","456xgPsGw","exception",'{}.constructor("return this")( )',"gger","constructor","while (true) {}","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","trace","dispose","50935bnfySp","__csm","forEach","material","apply","#e523ff","uOpacity"];return(Q=function(){return t})()}const V=X;!function(t,n){const e=X,o=et();for(;;)try{if(948130===parseInt(e(413))/1*(-parseInt(e(428))/2)+-parseInt(e(409))/3+parseInt(e(431))/4*(-parseInt(e(425))/5)+parseInt(e(402))/6*(parseInt(e(422))/7)+-parseInt(e(386))/8+parseInt(e(412))/9*(parseInt(e(398))/10)+parseInt(e(405))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[X(404)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function X(t,n){const e=et();return(X=function(t,n){return e[t-=373]})(t,n)}!function(){q(this,(function(){const t=X,n=new RegExp(t(380)),e=new RegExp(t(377),"i"),o=rt("init");n[t(416)](o+t(378))&&e.test(o+t(382))?rt():o("0")}))()}();const tt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[X(404)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=X;let n;try{n=Function(t(410)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(434)]=n[t(434)]||{},o=[t(423),t(407),t(430),t(390),t(435),t(374),t(385)];for(let i=0;i<o.length;i++){const n=tt[t(414)][t(388)][t(384)](tt),r=o[i],s=e[r]||n;n[t(391)]=tt.bind(tt),n[t(383)]=s.toString[t(384)](s),e[r]=n}}))();const nt=["object"];function et(){const t=["primitive","resolution","innerWidth","action","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","130nItAbU","opacity","clone","debu","10918758GDMYtJ","fromEdgesGeometry","apply","6985869twKjhi","length","warn","Wireframe","2668644iBANMc","return (function() ","uOpacity","704313GVOcWn","2FxWjgK","constructor","call","test","width","gger","linewidth","buildingsLines","#FFF","7qyaEOw","log","value","1045wUOLBS","color","builds","316226zeUHeu","material","info","23432DQdERR","geometry","counter","console","exception","renderOrder","innerHeight","style","table"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","matrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","uColor","function *\\( *\\)","applyMatrix4","input","toString","bind","trace","751896UQxRuM","stateObject","prototype","uniforms","error","__proto__","set"];return(et=function(){return t})()}const ot=m({__name:V(420),props:{builds:{},width:{default:1},color:{default:V(421)},opacity:{default:1},style:{default:V(408)}},setup(t){const n=V,u=t;let a=null,l=null;if(u.style===n(408)){const t=new o(u[n(427)][n(432)]);let e=(new r)[n(403)](t),c=new i({color:u[n(426)],linewidth:u[n(417)],opacity:u[n(399)],transparent:!0,depthWrite:!0,depthTest:!0});c[n(394)][n(392)](window[n(395)],window[n(437)]),a=new s(e,c),a[n(381)](u[n(427)].matrix[n(400)]())}else{l={transparent:!0,uniforms:{uColor:{value:new e(u[n(426)])},uOpacity:{value:u[n(399)]}},vertexShader:n(397),fragmentShader:n(375)};const t=new o(u[n(427)][n(432)]),r=new c(l);a=new LineSegments(t,r),a[n(381)](u[n(427)][n(376)].clone()),a.material[n(419)]=u[n(417)],a[n(436)]=1e3}return I((()=>{const t=n;"Shader"===u[t(373)]&&(u.color&&(l[t(389)][t(379)][t(424)]=new e(u[t(426)])),u[t(399)]&&(l[t(389)][t(411)][t(424)]=u[t(399)])),u[t(373)]===t(408)&&(u[t(426)]&&(a.material[t(426)]=new e(u[t(426)])),u[t(399)]&&(a[t(429)][t(399)]=u.opacity)),u[t(417)]&&(a.material[t(419)]=u[t(417)])})),(t,e)=>{const o=n;return _(),v(o(393),{object:x(a)},null,8,nt)}}});function rt(t){function n(t){const e=X;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[e(404)](e(433));1!==(""+t/t)[e(406)]||t%20==0?function(){return!0}[e(414)]("debugger")[e(415)](e(396)):function(){return!1}[e(414)](e(401)+e(418))[e(404)](e(387)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const it=lt;!function(t,n){const e=lt,o=ft();for(;;)try{if(531383===parseInt(e(455))/1*(-parseInt(e(444))/2)+parseInt(e(418))/3*(parseInt(e(434))/4)+parseInt(e(462))/5*(parseInt(e(463))/6)+parseInt(e(433))/7+-parseInt(e(456))/8+parseInt(e(453))/9*(parseInt(e(457))/10)+parseInt(e(426))/11*(-parseInt(e(419))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=lt,n=new RegExp(t(428)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=dt(t(447));n[t(467)](o+"chain")&&e[t(467)](o+t(422))?dt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[lt(459)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=lt,n=function(){const t=lt;let n;try{n=Function(t(417)+t(429)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(425)]||{},o=[t(440),t(423),t(421),t(465),"exception","table","trace"];for(let r=0;r<o[t(458)];r++){const n=ct[t(469)][t(470)][t(436)](ct),i=o[r],s=e[i]||n;n[t(454)]=ct[t(436)](ct),n[t(427)]=s.toString[t(436)](s),e[i]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(t,n){const e=ft();return(lt=function(t,n){return e[t-=417]})(t,n)}function ft(){const t=["showBuildings","init","#ffffff","TresDirectionalLight","TresPerspectiveCamera","counter","TresAxesHelper","423hcqWlL","__proto__","1CZogwK","4366392AJsgzp","40670yKljIO","length","apply","TresAmbientLight","model","4809745gdEajz","6yGOmhG","perspectiveCameraRef","error","showGridHelper","test","debu","constructor","prototype","return (function() ","1486218lYLLLR","1851084NysjKG","disableRender","info","input","warn","action","console","66AVRGKg","toString","function *\\( *\\)",'{}.constructor("return this")( )',"stateObject","#000","city","4343227LwHzrg","4XCvTzP","call","bind","TresGridHelper","$slots","ability","log","showAxesHelper","#000000","builds","532482wocDAs","pagesShow"];return(ft=function(){return t})()}const pt=m({__name:it(445),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=it;let e,o;const r=t,i=C({clearColor:n(442),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:a,toneMapping:l,disableRender:r[n(420)]}),s=C({autoRotate:r.autoRotate,enableDamping:!0});let c=null;r[n(446)]&&([e,o]=S((()=>F())),e=await e,o(),c=e);const f=w(),p=w();return(t,e)=>{const o=n,u=j("TresCanvas");return _(),A(u,z({ref_key:"tcRef",ref:p},i,{"window-size":""}),{default:R((()=>[L(o(450),{ref_key:o(464),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),O(x(d),B(G(s)),null,16),e[0]||(e[0]=L(o(460),{color:o(448)},null,-1)),e[1]||(e[1]=L(o(449),{position:[100,100,0],intensity:.5,color:"#ffffff"},null,-1)),r[o(446)]&&x(c)?(_(),v(M,{key:0},[O(Y,{model:x(c)},null,8,[o(461)]),O(ot,{builds:x(c)[o(432)],color:o(431)},null,8,[o(443)])],64)):T("",!0),E(t[o(438)],o(439)),r[o(441)]?(_(),v(o(452),ut)):T("",!0),r[o(466)]?(_(),v(o(437),at)):T("",!0)])),_:3},16)}}});function dt(t){function n(t){const e=lt;if("string"==typeof t)return function(t){}[e(469)]("while (true) {}")[e(459)](e(451));1!==(""+t/t)[e(458)]||t%20==0?function(){return!0}[e(469)](e(468)+"gger")[e(435)](e(424)):function(){return!1}[e(469)]("debugger")[e(459)](e(430)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{Y as _,ot as a,pt as b,F as l};

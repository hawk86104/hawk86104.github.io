import{P as t}from"./tweakpane.qqn77PB81719803971187.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.AbQGR5j71719803971187.js";import{_ as r}from"./heatmap.js-fix.wR1b41o31719803971187.js";import{h as i,a5 as c,bV as s}from"./three.BsQyBKrV1719803971187.js";import{r as u}from"./utils.BtXBJ-BG1719803971187.js";import{d as a}from"./pinia.Gj9UzxIP1719803971187.js";import{b as p,d as f,a2 as l,o as h,D as d,J as m,u as g,F as y,q as v,U as b,N as w,P as _,H as j,L as I,a3 as x,r as S,j as D,g as k,m as E}from"./@vue.CpOXM7bB1719803971187.js";import{c as R,d as F,a as M}from"./three-mesh-bvh.qUEmuYBS1719803971187.js";import{_ as A}from"./@fesjs.OMA0Tumj1719803971187.js";import"./@tresjs.rn1P_YDI1719803971187.js";import"./@vueuse.T5wlwfAk1719803971187.js";import"./three-custom-shader-material.rzwTEM2R1719803971187.js";import"./object-hash.4kGk0kP-1719803971187.js";import"./@amap.cIAWtN1R1719803971187.js";import"./jszip.Q9Kx2fWV1719803971187.js";import"./glsl-tokenizer.m00Vcg5f1719803971187.js";import"./glsl-token-string.vSzYTBTq1719803971187.js";import"./glsl-token-functions.HqnkbJtH1719803971187.js";import"./vue-router.nza8fidy1719803971187.js";import"./lodash-es.nFpJXAf-1719803971187.js";import"./@qlin.yHhFDldE1719803971187.js";import"./@floating-ui.BPbuo5Gx1719803971187.js";import"./@juggle.7yjBMqoW1719803971187.js";function z(t,n){const e=O();return(z=function(t,n){return e[t-=348]})(t,n)}!function(t,n){const e=z,o=O();for(;;)try{if(177573===-parseInt(e(399))/1*(parseInt(e(380))/2)+-parseInt(e(360))/3*(parseInt(e(355))/4)+parseInt(e(396))/5+-parseInt(e(351))/6+-parseInt(e(386))/7+-parseInt(e(381))/8+parseInt(e(356))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const P=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(400)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){P(this,(function(){const t=z,n=new RegExp(t(391)),e=new RegExp(t(376),"i"),o=$(t(382));n.test(o+t(397))&&e[t(373)](o+"input")?$():o("0")}))()}();const T=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[z(400)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();T(void 0,(function(){const t=z,n=function(){const t=z;let n;try{n=Function(t(362)+t(395)+");")()}catch(e){n=window}return n}(),e=n[t(361)]=n.console||{},o=[t(358),t(383),"info",t(401),"exception",t(364),t(384)];for(let r=0;r<o[t(385)];r++){const n=T.constructor[t(378)][t(349)](T),i=o[r],c=e[i]||n;n[t(353)]=T.bind(T),n.toString=c[t(363)].bind(c),e[i]=n}}))();const Z=(t,n)=>t[z(352)](n)+-10;function O(){const t=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","push","prototype","height","124ACOzZC","1903328eDhkyA","init","warn","trace","length","623973sYAJRa","createElement","constructor","yellow","create","function *\\( *\\)","top","body","heatmap-canvas",'{}.constructor("return this")( )',"1434515TtXYuP","chain","rgb(0,255,0)","4559euDnih","apply","error","style","debu","bind","rgb(0,0,255)","1839378enuTYO","getValueAt","__proto__","gger","325964bXDmMZ","9462771ELdOWA","width","log","string","9dvDpxG","console","return (function() ","toString","table","absolute","setData","_config","call","action","display","randInt","counter","test","rgb(255,0,0)","position"];return(O=function(){return t})()}function $(t){function n(t){const e=z;if(typeof t===e(359))return function(t){}[e(388)]("while (true) {}")[e(400)](e(372));1!==(""+t/t).length||t%20==0?function(){return!0}[e(388)](e(348)+e(354))[e(368)](e(369)):function(){return!1}.constructor("debugger")[e(400)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const L=B;!function(t,n){const e=B,o=Y();for(;;)try{if(177973===parseInt(e(436))/1*(-parseInt(e(470))/2)+parseInt(e(450))/3*(parseInt(e(438))/4)+parseInt(e(448))/5+-parseInt(e(445))/6+parseInt(e(442))/7+-parseInt(e(435))/8*(parseInt(e(455))/9)+parseInt(e(447))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[B(467)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){U(this,(function(){const t=B,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=G(t(464));n[t(469)](o+t(444))&&e[t(469)](o+t(454))?G():o("0")}))()}();const X=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function B(t,n){const e=Y();return(B=function(t,n){return e[t-=434]})(t,n)}function Y(){const t=["4102980dNwMla","1378735cyDFFw","toString","21wpxrNJ","exception","prototype","trace","input","25911gQSQhk","log","length","console","error",'{}.constructor("return this")( )',"counter","while (true) {}","debu","init","string","gger","apply","action","test","24BiEjFW","stateObject","constructor","bind","warn","760MLCSfx","26840kULltE","table","34156KzwSgc","call","info","value","1760640igFLVy","buildingsHeatmap","chain","1342680xAuXTj","__proto__"];return(Y=function(){return t})()}X(void 0,(function(){const t=B;let n;try{n=Function("return (function() "+t(460)+");")()}catch(r){n=window}const e=n[t(458)]=n[t(458)]||{},o=[t(456),t(434),t(440),t(459),t(451),t(437),t(453)];for(let i=0;i<o[t(457)];i++){const n=X[t(472)][t(452)][t(473)](X),r=o[i],c=e[r]||n;n[t(446)]=X.bind(X),n.toString=c[t(449)][t(473)](c),e[r]=n}}))();const q=a(L(443),(()=>{const t=p(!1),n=p(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t.value=n},setTemperature:function(t){n[B(441)]=t}}}));function G(t){function n(t){const e=B;if(typeof t===e(465))return function(t){}[e(472)](e(462))[e(467)](e(461));1!==(""+t/t)[e(457)]||t%20==0?function(){return!0}[e(472)](e(463)+e(466))[e(439)](e(468)):function(){return!1}[e(472)]("debu"+e(466))[e(467)](e(471)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const H=K;function W(){const t=['{}.constructor("return this")( )',"prototype","action","info","function *\\( *\\)","mergeGeometries","trace","数值———：","counter","warn","applyMatrix4","test","uniforms","3697440RFGBaS","__proto__","log","apply","950106SdmyFs","length","table","needsUpdate","matrix","3252544esDBPY","object","primitive","attributes","computeBoundsTree","while (true) {}","debu","rotation-x","normal","239536nijbca","Texture","model","disposeBoundsTree","call","value","toString","48472rrrdFN","4215900jkpRaS","children","707XRrHRX","init","638738PQHzDo","setTemperature","geometry","DoubleSide","exception","canvas","chain","bind","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","clone","setShowDiv","_config","BufferGeometry","Mesh","constructor","console","Matrix4","opacity","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","ShaderMaterial"];return(W=function(){return t})()}!function(t,n){const e=K,o=W();for(;;)try{if(626261===-parseInt(e(311))/1+parseInt(e(299))/2+-parseInt(e(285))/3+parseInt(e(290))/4+parseInt(e(281))/5+-parseInt(e(307))/6+parseInt(e(309))/7*(parseInt(e(306))/8))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(284)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){N(this,(function(){const t=K,n=new RegExp(t(272)),e=new RegExp(t(320),"i"),o=tt(t(310));n.test(o+t(317))&&e[t(279)](o+"input")?tt():o("0")}))()}();const C=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[K(284)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();C(void 0,(function(){const t=K,n=function(){const t=K;let n;try{n=Function("return (function() "+t(332)+");")()}catch(e){n=window}return n}(),e=n[t(327)]=n.console||{},o=[t(283),t(277),t(335),t(319),t(315),t(287),t(274)];for(let r=0;r<o[t(286)];r++){const n=C[t(326)][t(333)][t(318)](C),i=o[r],c=e[i]||n;n[t(282)]=C[t(318)](C),n[t(305)]=c[t(305)].bind(c),e[i]=n}}))();const V=[H(291),H(297)],Q=[H(291)],J=f({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=H;(()=>{const t=K;c[t(324)][t(333)][t(294)]=R,c[t(324)].prototype[t(302)]=F,c[t(325)][t(333)].raycast=M})();const e=t,o=((t=250,n=250,e=!0)=>{const o=z,i=document[o(387)](o(394));return i[o(402)][o(375)]=o(365),!e&&(i[o(402)][o(370)]="none"),i[o(402)][o(392)]="0",i[o(402)].left="0",document[o(393)].appendChild(i),r[o(390)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(350),.55:o(398),.85:o(389),1:o(374)}})})();((t,n)=>{const e=z;if(!n){let o=0;for(n=[];o<1e3;)n[e(377)]({x:i[e(371)](1,t[e(367)][e(357)]),y:i[e(371)](1,t[e(367)][e(379)]),value:i[e(371)](-10,36)}),o++}t[e(366)]({max:36,min:-10,data:n})})(o);const a=new(c[n(300)])(o._renderer[n(316)]);a[n(288)]=!0;const p=e[n(301)].city.clone();delete p[n(313)][n(293)].normal,delete p[n(313)][n(293)].uv;const f=p[n(313)][n(321)]()[n(278)](p[n(289)]),v=e[n(301)].land[n(321)]();delete v[n(313)].attributes[n(298)];const b=v.geometry.clone()[n(278)](v.matrix),w=s[n(273)]([f,b]);w[n(278)]((new(c[n(328)])).makeRotationX(Math.PI/2)),u(w),w[n(294)]();const _=(t=>{const o=n;return new(c[o(331)])({vertexShader:o(330),fragmentShader:"\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t",uniforms:{uOpacity:{value:e[o(329)]},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:c[o(314)]})})(a),j=new(c[n(325)])(w,_);l((()=>{const t=n;e.opacity&&(_[t(280)].uOpacity[t(304)]=e.opacity)}));const I=q(),x=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(323)].width,y:(1-t.uv.y)*o._config.height};console.log("数值：",t),console.log(e(275),Z(o,n)),I[e(312)](Z(o,n))}},S=t=>{t&&I.$patch({showDiv:!0})},D=t=>{t&&I[n(322)](!1)};return(t,o)=>{const r=n;return h(),d(y,null,[m(r(292),{object:g(j),"rotation-x":-Math.PI/2,onPointerMove:x,onPointerEnter:S,onPointerLeave:D},null,40,V),m(r(292),{object:e[r(301)][r(301)][r(308)][0].clone()},null,8,Q)],64)}}});function K(t,n){const e=W();return(K=function(t,n){return e[t-=272]})(t,n)}function tt(t){function n(t){const e=K;if("string"==typeof t)return function(t){}[e(326)](e(295))[e(284)](e(276));1!==(""+t/t)[e(286)]||t%20==0?function(){return!0}[e(326)](e(296)+"gger")[e(303)](e(334)):function(){return!1}.constructor(e(296)+"gger").apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const nt=A({__name:"dataDiv",setup(t){const n=q(),e=p({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return v((()=>{window.addEventListener("mousemove",o)})),b((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>w((h(),d("div",{class:"title",style:I(e.value)},"温度："+j(g(n).temperature)+"℃ ",5)),[[_,g(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]),et=ct;function ot(){const t=["error","8638eGkWVq","900PKqini","heatmap2","透明度","debu","log","600yYqRFG","model","4181889kskeuq","2004ZXRhEe","prototype","constructor","function *\\( *\\)","#000","trace","stateObject","__proto__","length","apply","addBinding",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","31644bYNuWl","bind","console","init","test","exception","2695yvTPDL","67qjWvYy","builds","counter","4910IgxETh","while (true) {}","action","toString","6345392GZTFaU","table","1051435QhMNFf","26890vveHmi"];return(ot=function(){return t})()}!function(t,n){const e=ct,o=ot();for(;;)try{if(984204===-parseInt(e(514))/1*(-parseInt(e(485))/2)+-parseInt(e(493))/3+-parseInt(e(480))/4+parseInt(e(483))/5*(-parseInt(e(494))/6)+-parseInt(e(513))/7*(-parseInt(e(491))/8)+parseInt(e(507))/9*(-parseInt(e(517))/10)+parseInt(e(482))/11*(parseInt(e(486))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const rt=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(503)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){rt(this,(function(){const t=ct,n=new RegExp(t(497)),e=new RegExp(t(506),"i"),o=ut(t(510));n[t(511)](o+"chain")&&e[t(511)](o+"input")?ut():o("0")}))()}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ct(503)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ct(t,n){const e=ot();return(ct=function(t,n){return e[t-=479]})(t,n)}it(void 0,(function(){const t=ct,n=function(){const t=ct;let n;try{n=Function("return (function() "+t(505)+");")()}catch(e){n=window}return n}(),e=n[t(509)]=n.console||{},o=[t(490),"warn","info",t(484),t(512),t(481),t(499)];for(let r=0;r<o[t(502)];r++){const n=it[t(496)][t(495)][t(508)](it),i=o[r],c=e[i]||n;n[t(501)]=it.bind(it),n[t(479)]=c.toString.bind(c),e[i]=n}}))();const st=f({__name:et(487),async setup(r){const i=et;let c,s;const u=p(!1),a=([c,s]=x((()=>o())),c=await c,s(),c);u.value=!0;const f=S({width:1,color:i(498),opacity:1,show:!0}),l=S({opacity:.9});return new t({title:"参数",expanded:!0})[i(504)](l,"opacity",{label:i(488),min:0,max:1,step:.1}),(t,o)=>{const r=i;return h(),d(y,null,[D(e,{showBuildings:!1,autoRotate:!1},{ability:k((()=>[D(J,E({model:g(a)},l),null,16,[r(492)]),D(n,E(f,{builds:g(a).city}),null,16,[r(515)])])),_:1}),D(nt)],64)}}});function ut(t){function n(t){const e=ct;if("string"==typeof t)return function(t){}.constructor(e(518))[e(503)](e(516));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(489)+"gger").call(e(519)):function(){return!1}.constructor(e(489)+"gger")[e(503)](e(500)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{st as default};

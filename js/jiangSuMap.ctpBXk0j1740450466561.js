import{m as t,e,a as n,x as o,o as r}from"./@tresjs.9lmhsV6t1740450466561.js";import{l as s}from"./utils.XIsCbAdk1740450466561.js";import{f as i}from"./utils.A_6eXM3G1740450466561.js";import{a3 as a,b as p,a2 as c,o as l,H as u,F as m,X as f,f as d,g as h,N as j,L as y,m as g,u as v,M as w,d as T,r as b,e as x,j as z,aj as M,ak as _,al as C}from"./@vue.NRI7TcgI1740450466561.js";import{m as I}from"./d3-geo.rzfxl7rZ1740450466561.js";import{B as k,r as E,C as L,h as S,b as B,cr as O,a0 as G,cU as A}from"./three.HaMTRCf61740450466561.js";import{c as H,d as P,a as F}from"./three-mesh-bvh.BNJ61NKr1740450466561.js";import"./@vueuse.q8gKo7tC1740450466561.js";import"./@fesjs.25ZLMwYe1740450466561.js";import"./vue-router.Ni9W6b_H1740450466561.js";import"./lodash-es.pklfUAS51740450466561.js";import"./@qlin.yHhFDldE1740450466561.js";import"./pinia.O-LUmvrn1740450466561.js";import"./@floating-ui.BPbuo5Gx1740450466561.js";import"./@juggle.7yjBMqoW1740450466561.js";import"./@tweenjs.03TsBd2S1740450466561.js";import"./http.CXXplQzL1740450466561.js";import"./axios.qd3pZFDv1740450466561.js";import"./color.P1VlE68d1740450466561.js";import"./@amap.dPX4GHML1740450466561.js";import"./color-string.CeUbXLEE1740450466561.js";import"./color-name.dzT7sxSY1740450466561.js";import"./simple-swizzle.G6YVmBur1740450466561.js";import"./is-arrayish.GTcD96Aj1740450466561.js";import"./color-convert.r0c9cBT21740450466561.js";import"./lodash.H8_SHOss1740450466561.js";import"./naive-ui.pcrJfKml1740450466561.js";import"./date-fns.nmuTTsCK1740450466561.js";import"./@css-render.pz15ZIiL1740450466561.js";import"./seemly.vIsyOXn81740450466561.js";import"./css-render.My9eOhux1740450466561.js";import"./@emotion.ZD_ZYAgY1740450466561.js";import"./vooks.zFA-UkGt1740450466561.js";import"./evtd.DtfwxtIl1740450466561.js";import"./vueuc.vMyhFHey1740450466561.js";import"./vdirs.Nbg4tfWS1740450466561.js";import"./treemate.dcEdf2le1740450466561.js";import"./date-fns-tz.OhpNjrTY1740450466561.js";import"./async-validator.-YBkpS4I1740450466561.js";import"./d3-array.E5C1cfJ61740450466561.js";const W=["position"],X=["blending","map"],J=["name","renderOrder","pCenter"],R=["args"],D=["color","side"],Z=["renderOrder","position-z"],q=["position"],Y=["renderOrder"],$=["position"],K={__name:"jiangSuMapMesh",async setup(r){let T,b;k.prototype.computeBoundsTree=H,k.prototype.disposeBoundsTree=P,E.prototype.raycast=F;const x=([T,b]=a((()=>s("./plugins/simpleGIS/json/320000_full.json","features"))),T=await T,b(),T),{map:z}=([T,b]=a((()=>n({map:"./plugins/simpleGIS/image/icon.png"}))),T=await T,b(),T),M=x[0].properties.centroid,_=I();_.center(M).translate([0,0]);const C=[];x.forEach((t=>{const e=new L("hsl( ".concat(16,", ").concat(30*Math.random()+55,"%, ").concat(30*Math.random()+55,"%)")).getHex(),n=.3*Math.random()+.3,{centroid:o,oneCenter:r,center:s,name:i}=t.properties,{coordinates:a,type:p}=t.geometry,c=o||r||s||[0,0],l=_(c);l[1]=-l[1],l[2]=n,C.push({type:"Html",position:l,name:i});const u=_(c);u[1]=.2-u[1],u[2]=n+.22,C.push({type:"Sprite",position:u}),a.forEach((t=>{function o(t){const o=new A;t.forEach(((t,e)=>{const[n,r]=_(t);0===e?o.moveTo(n,-r):o.lineTo(n,-r)})),C.push({type:"Shape",shape:o,name:i,color:e,depth:n,pCenter:u});const r=[];t.forEach((t=>{const[e,n]=_(t);r.push(e,-n,0)})),C.push({type:"Line",points:new Float32Array(r),depth:n})}"MultiPolygon"===p&&t.forEach((t=>o(t))),"Polygon"===p&&o(t)}))}));const K=p();c((()=>{K.value&&((t=>{t.rotation.x=-Math.PI/2;const e=(new S).setFromObject(t).getCenter(new B),n=[0,0];t.position.x=t.position.x-e.x-n[0],t.position.z=t.position.z-e.z-n[1]})(K.value),K.value.children.forEach((t=>{"Mesh"===t.type&&t.geometry.computeBoundsTree()})))}));const N=t=>{t.object.material.opacity=.4},Q=t=>{t.eventObject.material.opacity=1},{camera:U,controls:V}=t();let tt=null;const et=t=>{const e=new B;e.x=t.point.x,e.y=t.point.y+10,e.z=t.point.z,tt=i(U,e,V)},{onBeforeLoop:nt}=e();nt((()=>{null==tt||tt.update()}));const ot={wrapperClass:"wrapper",as:"div",center:!0,sprite:!0,prepend:!0,transform:!0};return(t,e)=>(l(),u("TresGroup",{ref_key:"tgRef",ref:K},[(l(),u(m,null,f(C,((t,n)=>(l(),u(m,{key:"".concat(n)},["Html"===t.type?(l(),d(v(o),g({key:0,ref_for:!0},ot,{position:t.position}),{default:h((()=>[j("span",null,y(t.name),1)])),_:2},1040,["position"])):w("",!0),"Sprite"===t.type?(l(),u("TresSprite",{key:1,position:t.position,scale:.3,renderOrder:1e3},[j("TresSpriteMaterial",{color:16711680,blending:O,map:v(z)},null,8,X)],8,W)):w("",!0),"Shape"===t.type?(l(),u("TresMesh",{key:2,name:t.name,renderOrder:n,pCenter:t.pCenter,onPointerEnter:N,onPointerLeave:Q,onClick:et},[j("TresExtrudeGeometry",{args:[t.shape,{depth:t.depth,bevelEnabled:!1}]},null,8,R),j("TresMeshStandardMaterial",{color:t.color,emissive:0,roughness:.45,metalness:.8,transparent:!0,side:G},null,8,D)],40,J)):w("",!0),"Line"===t.type?(l(),u(m,{key:3},[j("TresLine",{renderOrder:n,"position-z":t.depth+1e-4},[j("TresBufferGeometry",{position:[t.points,3]},null,8,q),e[0]||(e[0]=j("TresLineBasicMaterial",{color:16777215,linewidth:.5},null,-1))],8,Z),j("TresLine",{renderOrder:n,"position-z":-1e-4},[j("TresBufferGeometry",{position:[t.points,3]},null,8,$),e[1]||(e[1]=j("TresLineBasicMaterial",{color:0,linewidth:.5},null,-1))],8,Y)],64)):w("",!0)],64)))),64))],512))}},N=V;function Q(){const t=["__proto__","633JBgWaW","6382296wfQTcX","2148pbklAs","TresDirectionalLight","table","string","apply","trace","error","log","70jdXKnL","745046pCWWWX","bind","521257CPXolR","length","1926513nTlbJY","TresAmbientLight","input","3901009oFJcYL","jiangSuMap","return (function() ","TresGridHelper","chain","gger","warn","7855BwCzxE","constructor","1EVWGJg","debu","console","TresPerspectiveCamera","6412fjHqkX","test","TresCanvas","info","counter","function *\\( *\\)","exception","init"];return(Q=function(){return t})()}!function(t,e){const n=V,o=Q();for(;;)try{if(637928===parseInt(n(163))/1*(-parseInt(n(147))/2)+-parseInt(n(136))/3*(parseInt(n(167))/4)+parseInt(n(161))/5*(parseInt(n(138))/6)+-parseInt(n(154))/7+parseInt(n(137))/8+parseInt(n(151))/9+parseInt(n(146))/10*(parseInt(n(149))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const U=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[V(142)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function V(t,e){const n=Q();return(V=function(t,e){return n[t-=133]})(t,e)}!function(){U(this,(function(){const t=V,e=new RegExp(t(172)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=nt(t(134));e[t(168)](o+t(158))&&n[t(168)](o+t(153))?nt():o("0")}))()}();const tt=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[V(142)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();tt(void 0,(function(){const t=V,e=function(){const t=V;let e;try{e=Function(t(156)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(165)]=e.console||{},o=[t(145),t(160),t(170),t(144),t(133),t(140),t(143)];for(let r=0;r<o[t(150)];r++){const e=tt[t(162)].prototype[t(148)](tt),s=o[r],i=n[s]||e;e[t(135)]=tt[t(148)](tt),e.toString=i.toString[t(148)](i),n[s]=e}}))();const et=T({__name:N(155),setup(t){const e=b({clearColor:"#ffdbd1",alpha:!0,antialias:!0}),n=b({enableDamping:!0,dampingFactor:.05,makeDefault:!0});return(t,o)=>{const s=V,i=x(s(169));return l(),d(i,g(e,{"window-size":""}),{default:h((()=>[o[0]||(o[0]=j(s(166),{position:[0,12,0],fov:75,near:.1,far:1e3,up:[0,0,-1]},null,-1)),z(v(r),M(_(n)),null,16),o[1]||(o[1]=j(s(152),{intensity:8.8},null,-1)),o[2]||(o[2]=j(s(139),{position:[0,10,5],intensity:.2},null,-1)),o[3]||(o[3]=j(s(139),{position:[0,10,-5],intensity:.2},null,-1)),o[4]||(o[4]=j(s(139),{position:[5,10,0],intensity:.2},null,-1)),o[5]||(o[5]=j(s(139),{position:[-5,10,0],intensity:.2},null,-1)),o[6]||(o[6]=j(s(157),{args:[20,10]},null,-1)),(l(),d(C,null,{default:h((()=>[z(K)])),_:1}))])),_:1},16)}}});function nt(t){function e(t){const n=V;if(typeof t===n(141))return function(t){}[n(162)]("while (true) {}").apply(n(171));1!==(""+t/t).length||t%20==0?function(){return!0}[n(162)](n(164)+n(159)).call("action"):function(){return!1}[n(162)]("debu"+n(159))[n(142)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{et as default};

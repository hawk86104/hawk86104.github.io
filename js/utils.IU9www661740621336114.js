import"./@fesjs.LqZjJP5K1740621336114.js";import{_ as t}from"./jszip.nUGSSS5e1740621336114.js";import{F as n}from"./file-saver.o88FfqVt1740621336114.js";import{_ as e}from"./three.sXv6UbbL1740621336114.js";const s=u;!function(t,n){const e=u,s=p();for(;;)try{if(713872===parseInt(e(532))/1*(parseInt(e(488))/2)+parseInt(e(503))/3*(parseInt(e(519))/4)+-parseInt(e(552))/5*(-parseInt(e(489))/6)+parseInt(e(480))/7*(parseInt(e(533))/8)+-parseInt(e(484))/9*(-parseInt(e(577))/10)+-parseInt(e(531))/11+parseInt(e(539))/12*(-parseInt(e(515))/13))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[u(549)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){o(this,(function(){const t=u,n=new RegExp(t(493)),e=new RegExp(t(541),"i"),s=d(t(551));n[t(570)](s+t(481))&&e[t(570)](s+"input")?d():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[u(549)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function a(t){const n=s,o=new(e[n(557)]);return new Promise(((e,s)=>{const r=n;o[r(558)](t,(t=>e(JSON[r(516)](t))),void 0,(t=>s(t)))}))}async function i(t){const n=s,o=new(e[n(557)]);return new Promise(((e,r)=>{const a=n;o[a(497)](a(501)),o[a(558)](t,(n=>{const o=a,i=new FileReader;i[o(482)]=()=>{const n=o,r=function(t){const n=s,e=t[n(546)](".")[n(495)]().toLowerCase();return{jpg:n(534),jpeg:"image/jpeg",png:n(518),gif:n(573),bmp:n(543),webp:n(492)}[e]||"application/octet-stream"}(t),a=i.result[n(546)](",")[1];e(n(511)+r+n(487)+a)},i[o(559)]=t=>{r(t)},i[o(572)](n)}),void 0,(t=>r(t)))}))}r(void 0,(function(){const t=u,n=function(){const t=u;let n;try{n=Function(t(547)+t(540)+");")()}catch(e){n=window}return n}(),e=n[t(483)]=n[t(483)]||{},s=[t(521),t(538),t(485),t(499),t(514),"table",t(500)];for(let o=0;o<s[t(556)];o++){const n=r[t(520)][t(527)][t(574)](r),a=s[o],i=e[a]||n;n[t(542)]=r[t(574)](r),n[t(505)]=i[t(505)].bind(i),e[a]=n}}))(),e[s(564)][s(509)]=!0;const c=n=>{const o=s,r=new(e[o(557)]);return r[o(497)]("blob"),new Promise(((e,s)=>{const a=o;r[a(558)](n,(async n=>{const s=a;e(await t[s(504)](n))}),void 0,(t=>s(t)))}))};function u(t,n){const e=p();return(u=function(t,n){return e[t-=479]})(t,n)}function p(){const t=["data:image/gif;base64,","substring","url:geometries/","Cache","call","gger","data:image/JPEG;base64,","url","data:image/jpeg;base64,","test","data:image/","readAsDataURL","image/gif","bind","base64","then","3270YZmLcd","async","result","7ytKuUu","chain","onloadend","console","10926ROIGAH","info","file",";base64,","2743772WzgPNV","74082osYyNR","app.json","stateObject","image/webp","function *\\( *\\)","Unknown","pop",".json","setResponseType","data:image/png;base64,","error","trace","blob","url:","118587twVxtb","loadAsync","toString","data","uuid","data:image/PNG;base64,","enabled","counter","data:","endsWith","stringify","exception","403fuORjZ","parse","PNG","image/png","28PIMgYt","constructor","log","slice","geometries","string","generateAsync","type","prototype","scene","data:image/GIF;base64,","startsWith","4603280PCjyBy","1NlrjBN","10376680ZDuJSQ","image/jpeg","push","JPEG","get","warn","1003764UytjBi",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","image/bmp","images","forEach","split","return (function() ","toUpperCase","apply","folder","init","155qjWhuJ","files","非标准文件：不存在 app.json","while (true) {}","length","FileLoader","load","onerror","url:images/"];return(p=function(){return t})()}const f=t=>{const n=s,e=t[n(562)](0,15),o=n(569),r=n(567),a=n(498),i=n(508),c=n(561),u=n(529);return o.startsWith(e)||r[n(530)](e)?n(536):a[n(530)](e)||i[n(530)](e)?n(517):c[n(530)](e)||u[n(530)](e)?"GIF":"data:image/webp;base64,"[n(530)](e||"data:image/WEBP;base64,"[n(530)](e))?"WEBP":n(494)},l=e=>{const o=s,r=[];e[o(528)][o(523)]&&e[o(528)].geometries[o(545)]((t=>{const n=o;"BufferGeometry"===t[n(526)]&&(r[n(535)]({uuid:t[n(507)],data:t[n(506)]}),t[n(506)]=n(563)+t[n(507)]+".json")}));const a=[];e[o(528)][o(544)]&&e[o(528)][o(544)][o(545)]((t=>{const n=o;t[n(568)]&&(a.push({uuid:t.uuid,url:t[n(568)]}),t[n(568)][n(526)]?t.url=n(560)+t[n(507)]+"."+t.url[n(526)]+n(496):t[n(568)]="url:images/"+t[n(507)]+"."+f(t[n(568)]))}));const i=new t;if(r[o(556)]){const t=i[o(550)]("geometries");r[o(545)]((n=>{const e=o;t[e(486)](n[e(507)]+e(496),JSON.stringify(n.data))}))}if(a[o(556)]){const t=i[o(550)](o(544));a[o(545)]((n=>{const e=o;n[e(568)][e(526)]?t[e(486)](n.uuid+"."+n.url[e(526)]+e(496),JSON[e(513)](n[e(568)])):t[e(486)](n.uuid+"."+f(n[e(568)]),n[e(568)][e(546)](";base64,")[e(495)](),{base64:!0})}))}const c=JSON[o(513)](e);return i[o(486)](o(490),c),i[o(525)]({type:o(501)}).then((t=>{n.saveAs(t,"config.zip")}))},g=(t,n,e)=>{const o=s;t[o(523)]<=0&&t[o(544)]<=0&&e(n)},m=(n,e)=>{const o=s;let r=null;return t.loadAsync(n)[o(576)]((t=>{const n=o;t[n(553)][n(490)]?t[n(553)]["app.json"][n(578)](n(524))[n(576)]((o=>{var a,i;const c=n;r=JSON[c(516)](o);const p=(t=>{var n,e;const o=s,r={geometries:0,images:0};return null==(n=t.scene.geometries)||n.forEach((t=>{const n=u;t[n(506)][n(530)](n(502))&&r.geometries++})),null==(e=t[o(528)][o(544)])||e[o(545)]((t=>{const n=o;t[n(568)][n(530)](n(502))&&r[n(544)]++})),r})(r);g(p,r,e),null==(a=r[c(528)][c(523)])||a.forEach((n=>{const s=c;n[s(506)][s(530)](s(502))&&t.files[n[s(506)][s(522)](4)][s(578)](s(524))[s(576)]((t=>{const o=s;n[o(506)]=JSON[o(516)](t),p[o(523)]--,g(p,r,e)}))})),null==(i=r[c(528)][c(544)])||i[c(545)]((n=>{const s=c;if(n[s(568)].startsWith(s(502))){const o=n.url[s(522)](4);o[s(512)](s(496))?t.files[o][s(578)](s(524))[s(576)]((t=>{const o=s;n[o(568)]=JSON[o(516)](t),p.images--,g(p,r,e)})):t[s(553)][o][s(578)](s(575))[s(576)]((t=>{const a=s,i=o[a(546)]("."),c=i[i[a(556)]-1][a(548)]();n[a(568)]=a(571)+c+a(487)+t,p[a(544)]--,g(p,r,e)}))}}))})):console[n(499)](n(554))}),(t=>{console[o(499)](n.name+": "+t.message)})),r};function d(t){function n(t){const e=u;if(typeof t===e(524))return function(t){}[e(520)](e(555))[e(549)](e(510));1!==(""+t/t)[e(556)]||t%20==0?function(){return!0}[e(520)]("debu"+e(566))[e(565)]("action"):function(){return!1}[e(520)]("debu"+e(566))[e(549)](e(491)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{c as a,i as b,l as e,f as g,m as i,a as l};

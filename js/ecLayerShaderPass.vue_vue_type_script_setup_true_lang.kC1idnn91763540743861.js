import{F as e,_ as a}from"./@tresjs.BCHtwiaC1763540743861.js";import{d0 as r,d1 as s,f as n,d2 as l,q as t,d7 as o}from"./three.rXKzP9fQ1763540743861.js";import{d as u,a as v,a6 as i,H as d,o as m,J as x,F as c}from"./@vue.Co_gxueH1763540743861.js";const T=u({__name:"ecLayerShaderPass",setup(u){const T=v(),h=v(),{camera:f,renderer:p,scene:y,sizes:w}=e(),g=.572,M=.51,_=0;let b=null,P=null,j=null;i(()=>{T.value&&T.value.layers.set(0),h.value&&h.value.layers.set(1),w.width.value&&(((e,a,t,o,u)=>{b=new r(e,a);const v=new s(new n(o,u),g,M,_);P=new l(t),P.renderToScreen=!1,P.addPass(b),P.addPass(v)})(y.value,f.value,p,w.width.value,w.height.value),(e=>{j=new l(e);const a=new t({uniforms:{baseTexture:{value:null},bloomTexture:{value:P.renderTarget2.texture}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = ( vec4( 1.0 ) *texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n            }\n        ",defines:{}}),r=new o(a,"baseTexture");r.needsSwap=!0,j.addPass(b),j.addPass(r)})(p))});const{onRender:D}=a();return D(()=>{P&&j&&f.value&&(p.clear(),f.value.layers.set(1),P.render(),p.clearDepth(),f.value.layers.set(0),j.render(y.value,f.value))}),(e,a)=>(m(),d(c,null,[x("TresMesh",{ref_key:"normalBox",ref:T,position:[3,2,1]},[...a[0]||(a[0]=[x("TresBoxGeometry",{args:[1,1,1]},null,-1),x("TresMeshNormalMaterial",null,null,-1)])],512),x("TresMesh",{ref_key:"shineBox",ref:h,position:[0,2,-4]},[...a[1]||(a[1]=[x("TresBoxGeometry",{args:[1,1,1]},null,-1),x("TresMeshNormalMaterial",null,null,-1)])],512)],64))}});export{T as _};

import{V as t,_ as n,h as e}from"./three.Rja0AEnA1735866388381.js";import{m as a}from"./@tresjs.FlKhQDQ71735866388381.js";import{d as o,P as r}from"./@pmndrs.IQpkozJe1735866388381.js";import{d as s,b as i,w as c,a1 as u,o as l,D as d,J as h,aj as f,ak as p}from"./@vue.yG49nQHr1735866388381.js";const m=b;!function(t,n){const e=b,a=g();for(;;)try{if(339064===parseInt(e(466))/1+-parseInt(e(540))/2+parseInt(e(506))/3*(-parseInt(e(468))/4)+-parseInt(e(538))/5*(parseInt(e(514))/6)+-parseInt(e(497))/7+-parseInt(e(523))/8*(parseInt(e(513))/9)+parseInt(e(541))/10)break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const w=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[b(529)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function g(){const t=["blendWindow","cos","size","children",'{}.constructor("return this")( )',"length","MathUtils","function *\\( *\\)","random","amount","randFloatSpread","shadows plm update","debu","accumulativeShadowsCom","sin","table","camera","trace","shadows render end","ambient","exception","console","gger","stateObject","bottom","frames","3653720aPNYKx","prepare","top","material","left","shadow","progressiveLightMap2","error","configure","16662ttdAQY","castShadow","value","prototype","abs","opacity","far","9cKDtWU","106410dfgyQz","chain","bias","shadows render start","blend","texture","#000000","constructor","alphaTest","515192XMtnip","rotate-x","clear","counter","while (true) {}","color","apply","DirectionalLight","Group","set","lightPosition","mapSize","test","add","position","55cWzBhk","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","633226hHhLmC","14481190yOtdDX","string","toString","bind","log","width","near","finish","input","info","661036qrFyGW","radius","484JOungJ","init","right"];return(g=function(){return t})()}!function(){w(this,(function(){const t=b,n=new RegExp(t(478)),e=new RegExp(t(539),"i"),a=I(t(469));n.test(a+t(515))&&e[t(535)](a+t(464))?I():a("0")}))()}();const y=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[b(529)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();y(void 0,(function(){const t=b,n=function(){const t=b;let n;try{n=Function("return (function() "+t(475)+");")()}catch(e){n=window}return n}(),e=n[t(492)]=n[t(492)]||{},a=[t(460),"warn",t(465),t(504),t(491),t(486),t(488)];for(let o=0;o<a[t(476)];o++){const n=y.constructor[t(509)].bind(y),r=a[o],s=e[r]||n;n.__proto__=y[t(544)](y),n[t(543)]=s[t(543)].bind(s),e[r]=n}}))();const M=[m(524)];function b(t,n){const e=g();return(b=function(t,n){return e[t-=460]})(t,n)}const v=s({__name:m(484),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(520)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,g=s;let y=i();const{extend:b,scene:v,renderer:I,camera:x}=a();b({SoftShadowMaterial:o});const z={position:(new t).set(g.lightPosition.x,g[w(533)].y,g[w(533)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},P=new r(I.value,v.value,z[w(534)]),S={map:P[w(503)][w(519)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(518)],alphaTest:g[w(522)],opacity:g[w(511)],color:g.color},_=new(n[w(531)]);for(let t=0;t<z[w(480)];t++){const t=new(n[w(530)])(16777215,z.intensity/z[w(480)]);t[w(507)]=!0,t.shadow[w(516)]=z[w(516)],t.shadow[w(487)][w(462)]=z[w(462)],t.shadow[w(487)][w(512)]=z[w(512)],t[w(502)].camera[w(470)]=z[w(473)]/2,t[w(502)][w(487)][w(501)]=-z[w(473)]/2,t[w(502)].camera[w(499)]=z[w(473)]/2,t.shadow[w(487)][w(495)]=-z[w(473)]/2,t[w(502)][w(534)][w(461)]=z.mapSize,t[w(502)][w(534)].height=z[w(534)],_.add(t)}const j=()=>{const t=w,a=z[t(537)][t(476)]();for(let o=0;o<_[t(474)][t(476)];o++){const r=_.children[o];if(Math.random()>g[t(490)])r[t(537)][t(532)](z[t(537)].x+n[t(477)][t(481)](z[t(467)]),z.position.y+n[t(477)][t(481)](z[t(467)]),z[t(537)].z+e[t(481)](z.radius));else{let n=Math.acos(2*Math[t(479)]()-1)-Math.PI/2,e=2*Math.PI*Math.random();r[t(537)].set(Math.cos(n)*Math[t(472)](e)*a,Math[t(510)](Math[t(472)](n)*Math[t(485)](e)*a),Math[t(485)](n)*a)}}},T=(t=1)=>{const n=w;v.value[n(536)](_),P[n(498)]();for(let e=0;e<t;e++)j(),P.update(x.value,g[n(471)]),console[n(460)](n(482),e);v[n(508)].remove(_),P[n(463)]()};c((()=>y[w(508)]),(t=>{const n=w;t&&(P[n(505)](t),P[n(525)](),console[n(460)](n(517)),T(g[n(496)]),console[n(460)](n(489)))}));const W=()=>{P[w(525)](),T(g.frames)};return u((()=>{const t=w;y[t(508)]&&(g.opacity&&(y[t(508)][t(500)].opacity=g[t(511)]),g[t(522)]&&(y.value[t(500)][t(522)]=g.alphaTest),g[t(528)]&&y.value.material[t(528)][t(532)](g[t(528)]),g[t(518)]&&(y.value[t(500)][t(518)]=g[t(518)]))})),c((()=>g[w(533)]),(t=>{const n=w;t&&(console.log(g.lightPosition),z[n(537)][n(532)](t.x,t.y,t.z),W())}),{deep:!0}),c((()=>[g[w(496)],g[w(471)],g[w(490)]]),(()=>{W()})),(t,n)=>(l(),d("TresMesh",{"receive-shadow":"",ref_key:"gPlane",ref:y,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=h("TresPlaneGeometry",{args:[1,1]},null,-1)),h("TresSoftShadowMaterial",f(p(S)),null,16)],8,M))}});function I(t){function n(t){const e=b;if(typeof t===e(542))return function(t){}[e(521)](e(527))[e(529)](e(526));1!==(""+t/t)[e(476)]||t%20==0?function(){return!0}[e(521)](e(483)+e(493)).call("action"):function(){return!1}[e(521)](e(483)+e(493))[e(529)](e(494)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{v as _};

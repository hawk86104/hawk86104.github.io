import{H as e,e as a}from"./index.vue_vue_type_script_setup_true_lang.YCkLl6gI1763540743861.js";import{v as l}from"./@vicons.DhSiG_AT1763540743861.js";import{h as t,T as u,Q as n,R as o,x as s,f as v,g as d,F as i,i as r,B as c,D as p}from"./naive-ui.qjPOP62h1763540743861.js";import{d as b,a as m,c as f,w as y,H as h,o as _,F as j,h as x,u as g,e as k,b as F,J as w,N as E,X as V,y as U}from"./@vue.Co_gxueH1763540743861.js";const D=b({__name:"eventModel",props:{formValue:{type:Object,required:!0}},setup(b){const D=b,z=[{label:"单击事件",value:"click"},{label:"双击事件",value:"doubleclick"},{label:"鼠标右键",value:"contextmenu"},{label:"鼠标移入",value:"pointerenter"},{label:"鼠标移出",value:"pointerleave"}],B=e(),C=m({}),O=f(()=>B.getEventsByUuid(D.formValue.object3D.uuid,!1).value);y(()=>D.formValue.object3D.uuid,e=>{C.value={},O.value.forEach(e=>{C.value[e.eventType]={eventFun:e.eventFun,enabled:e.enabled}}),z.forEach(e=>{C.value[e.value]||(C.value[e.value]={eventFun:`console.log("${e.label}:"+currentObject.uuid,PointerEvent,currentObject,point,object,distance)`,enabled:!1})})},{immediate:!0});const T=m("click"),P=m(!1);function R(){P.value=!1}return(e,m)=>(_(),h(j,null,[x(g(t),{show:P.value,"onUpdate:show":m[2]||(m[2]=e=>P.value=e),title:"事件编辑器",preset:"dialog","mask-closable":!1,"z-index":99999999,style:{width:"900px"}},{action:k(()=>[x(g(c),{type:"warning",onClick:m[0]||(m[0]=e=>(B.clearEventsByUuid(D.formValue.object3D.uuid),P.value=!1,void a("物体事件","清空")))},{default:k(()=>[...m[8]||(m[8]=[U("清空事件",-1)])]),_:1}),x(g(c),{onClick:R},{default:k(()=>[...m[9]||(m[9]=[U("取消",-1)])]),_:1}),x(g(c),{type:"primary",onClick:m[1]||(m[1]=e=>(Object.keys(C.value).forEach(e=>{const a=O.value.find(a=>a.eventType===e);if(a)a.eventFun=C.value[e].eventFun,a.enabled=C.value[e].enabled,B.updateEvent(a);else{let a="general";"Model"!=D.formValue.tvtProperties.type&&(a="extend"),B.addEvent({uuid:D.formValue.object3D.uuid,type:a,eventType:e,eventFun:C.value[e].eventFun,enabled:C.value[e].enabled})}}),P.value=!1,void a("物体事件","修改")))},{default:k(()=>[...m[10]||(m[10]=[U("保存",-1)])]),_:1})]),default:k(()=>[x(g(u),null,{default:k(()=>[w("p",null,"物体uuid: "+E(b.formValue.object3D.uuid),1),w("p",null,"物体类型: "+E(b.formValue.tvtProperties.type),1)]),_:1}),(_(),F(g(n),{key:T.value,type:"bar",animated:"",placement:"left","tab-style":{width:"8em"},style:{height:"580px"}},{prefix:k(()=>[...m[4]||(m[4]=[U(" 事件类型 ",-1)])]),default:k(()=>[(_(),h(j,null,V(z,e=>x(g(o),{name:e.value,tab:e.label,key:e.value},{tab:k(()=>[x(g(i),{type:C.value[e.value].enabled?"success":"default",style:{cursor:"pointer"},bordered:C.value[e.value].enabled},{icon:k(()=>[x(g(r),{component:g(l)},null,8,["component"])]),default:k(()=>[U(E(e.label)+" ",1)]),_:2},1032,["type","bordered"])]),default:k(()=>[x(g(s),{title:"编写js代码: "+e.label,type:"info",bordered:!1,style:{marginBottom:"10px"}},{default:k(()=>[...m[5]||(m[5]=[U(" 请确保代码的正确性，暂未支持dom类物体的事件。跳转查看说明： ",-1),w("a",{style:{color:"white"},href:"https://docs.icegl.cn/docs/three-vue-tres/zoneeditor/other.html#操作说明",target:"_blank"},"事件系统说明文档",-1)])]),_:1},8,["title"]),x(g(v),{round:!1,value:C.value[e.value].enabled,"onUpdate:value":a=>C.value[e.value].enabled=a,style:{position:"absolute",right:"2px",top:"75px",zIndex:"9"}},{checked:k(()=>[...m[6]||(m[6]=[U(" 激活此事件 ",-1)])]),unchecked:k(()=>[...m[7]||(m[7]=[U(" 关闭此事件 ",-1)])]),_:1},8,["value","onUpdate:value"]),x(g(d),{value:C.value[e.value].eventFun,"onUpdate:value":a=>C.value[e.value].eventFun=a,type:"textarea",placeholder:"在这里输入js代码",autosize:{minRows:16,maxRows:22}},null,8,["value","onUpdate:value"])]),_:2},1032,["name","tab"])),64))]),_:1}))]),_:1},8,["show"]),x(g(p),null,{default:k(()=>[...m[11]||(m[11]=[U(" 事件管理 ",-1)])]),_:1}),x(g(c),{type:"success",style:{margin:"0 auto",display:"flex","align-items":"center"},onClick:m[3]||(m[3]=()=>{P.value||(P.value=!0)})},{default:k(()=>[...m[12]||(m[12]=[U(" 点击编辑 ",-1)])]),_:1})],64))}});export{D as _};

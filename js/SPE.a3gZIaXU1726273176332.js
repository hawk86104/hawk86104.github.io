import{_ as t,cj as e,bT as i,k as n,V as o,Y as s}from"./three.874nNzAX1726273176332.js";function r(t,e){const i=l();return(r=function(t,e){return i[t-=170]})(t,e)}const a=r;!function(t,e){const i=r,n=l();for(;;)try{if(720141===-parseInt(i(176))/1*(-parseInt(i(499))/2)+-parseInt(i(364))/3*(-parseInt(i(296))/4)+-parseInt(i(302))/5+parseInt(i(285))/6*(parseInt(i(524))/7)+parseInt(i(263))/8*(-parseInt(i(557))/9)+-parseInt(i(198))/10*(parseInt(i(336))/11)+parseInt(i(426))/12*(-parseInt(i(227))/13))break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const c=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[r(239)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){c(this,(function(){const t=r,e=new RegExp("function *\\( *\\)"),i=new RegExp(t(193),"i"),n=p(t(174));e[t(319)](n+"chain")&&i.test(n+"input")?p():n("0")}))()}();const h=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[r(239)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function l(){const t=["_assignAngleValue","action","ShaderMaterial","ensureTypedArg","textureFrameCount","       float y = 1.0 - gl_PointCoord.y - 0.5;","getLength","    highp float value = 0.0;","11tfquVD","updateFlags","_applyAttributesToGeometry","addEmitter","ShaderChunk","getComponentValueAtIndex","NUMBER","_decrementParticleCount","   c *= vec3( 2.0 );","Group","__proto__","usage","fragment","alphaTest","   return modelViewMatrix * vec4( position, 1.0 );","randomise","ShaderAttribute","counter","particles, can support only","replace","Color","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","attribute vec4 params;","isStatic","randomVector3","clamp","_createNewWhenPoolEmpty","    highp float isAlive = when_gt( alive, 0.0 );","7863tdjMuf","loop","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","_updateBuffers","      if( rotation.y == 0.0 ) {","attributeCount","disable","ensureValueOverLifetimeCompliance","   return c;","textureLoop","updateMin","_spread","setVec3Components","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    #ifdef SHOULD_ROTATE_TEXTURE","_updateDefines","       if ( vColor.w < float(ALPHATEST) ) discard;","attribute vec4 size;","count","           unpackColor( color.w )","particleCount","updateCounts","rotationCenter","_activateParticles","texture","indexOffset","isArray","setRGB","clone","ensureArrayTypedArg","setVec2","   c -= vec3( 1.0 );","componentSize","   return params.x;","    varying float vAngle;","TypedArrayHelper","vec3 getVelocity( in float age ) {","geometry","releaseIntoPool","runTime","rotationFunctions","float when_eq( float x, float y ) {","        pos.y += wiggleCos;","varyings","    #ifdef SHOULD_CALCULATE_SPRITE","    #endif","fixedTimeStep","utils","randomDirectionVector3OnDisc","        float wiggleSin = isAlive * sin( wiggleAmount );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","hasOwnProperty","angle","shrink","   return params.w;","_axisSpread","activationEnd","cos","SHOULD_ROTATE_PARTICLES","float when_lt(float x, float y) {","setMat4","subarray","12885468UryQcV","abs","    return value;","fog_fragment","   return acceleration.xyz * age;","acceleration","attributeKeys","sin","BufferGeometry","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","uniform float runTime;","   vec3 c = vec3( 0.0 );","LINE","vec3 getAcceleration( in float age ) {","randomDirectionVector3OnSphere","setVec2Components","spreadClamp","set","branchAvoidanceFunctions","angleSpread","_resetBufferRanges","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","        vSpriteSheet.w = rowNorm;","scale","       fIndex = float( i );","_createGetterSetters","float getAlive() {","size","indexOf","    float shouldApplyValue = 0.0;","length","_value","random","        float columnNorm = column / framesX;","        float perspective = 1.0;","hasPerspective","   }","typeSizeMap","vertex","AdditiveBlending","unpackRotationAxis","_attributesNeedDynamicReset","arrayType","_static","Emitter does not belong to a group, cannot remove.","Argument is not instanceof SPE.Emitter:","BOOLEAN","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","Emitter does not exist in this group. Will not remove.","ceil","DynamicDrawUsage","vec3 unpackColor( in float hex ) {","setVec3","max","push","randomFloat","triggerPoolEmitter","    ","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","info","_assignAbsLifetimeValue","           positionInTime,","drag","enable","float getMaxAge() {","prototype","Vector3","#define PACKED_COLOR_SIZE 256.0","valueOverLifetimeLength","    gl_PointSize = pointSizePerspective;","_resetParticle","setFromArray","bufferAttribute","37954QAGRIe","      float angle = 0.0;","_incrementParticleCount","distribution","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","undefined","fog_pars_fragment","common","trace","shaders","        float perspective = scale / length( mvPosition.xyz );","params","attribute vec3 velocity;","alive","        float totalFrames = textureAnimation.z;","setSize","distributions","min","_updateUniforms","warn","shaderChunks","   c.b = b / PACKED_COLOR_DIVISOR;","call","material","add","4528615edHIxW","attributeEnd","age","getPool","MathUtils","   return params.y;","                   0.0,                                0.0,                                0.0,                                1.0);","frameCount","emitterIDs","SHOULD_ROTATE_TEXTURE","lerpTypeAgnostic","activeMultiplier","    varying vec4 vSpriteSheet;","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","removeEmitter","_assignRotationValue","defineProperty","       axis = normalize(axis);","    #else","SHOULD_WIGGLE_PARTICLES","logdepthbuf_fragment","float or(float a, float b) {","_angle","array","splice","  return 1.0 - when_lt(x, y);","elements","debu","spread","wiggle","grow","color","transparent","20187pEKeMI","#ifdef SHOULD_ROTATE_PARTICLES","uuid","distributionClamp","float getAge() {","exports","   c.r = r / PACKED_COLOR_DIVISOR;","attributeOffset","SPHERE","      vec3 axis = unpackRotationAxis( rotation.x );","   return velocity * age;","logdepthbuf_vertex","float when_le(float x, float y) {","Emitter already exists in this group. Will not add again.","function","vec3 unpackRotationAxis( in float hex ) {","    vec3 pos = vec3( position );","NEGATIVE_INFINITY","reset","bufferUpdateRanges","needsUpdate","activeParticleCount","setMat3","value","setAttribute","roundToNearestMultiple","_checkParticleAges","        float framesY = textureAnimation.y;","_assignForceValue","_assignPositionValue","    highp float age = getAge();","setNumber","_setAttributeOffset","Emitter","_updateAttributeUpdateRange","fog","attribute vec4 color;","error","fog_pars_vertex","_randomise","number","    vec3 outgoingLight = vColor.xyz;","        pos.x += wiggleSin;","Vector2","getFromPool","TypedArrayConstructor","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","blending","    vec3 force = vec3( 0.0 );","_axis","multiplyScalar","    return max(sign(x - y), 0.0);","generateUUID","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","      rotationMatrix = getRotationMatrix( axis, angle );","      translated = rotationCenter - pos;","dynamicBuffer","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","depthWrite","getHex","emitters","duration","itemSize","ensureInstanceOf","toString","setColor","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","velocity","typedArray","BOX","setUpdateRange","init","rotateTexture","35tgLXHq","round","uniform vec4 textureAnimation;","    return min(a + b, 1.0);","sqrt","lerp","spe","attribute vec4 angle;","resetUpdateRange","_spreadClamp","updateMax","attribute vec4 opacity;","logdepthbuf_pars_vertex","       float oc = 1.0 - c;","    #ifdef SHOULD_ROTATE_PARTICLES","       vec3 c = vec3(1.0);","group","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","direction","maxAge","        float columnNorm = vSpriteSheet.z;","randomVector3OnDisc","2442670AxOyVB","_center","_radius","    highp float maxAge = getMaxAge();","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","maxParticleCount","copy","float when_ge(float x, float y) {","   float b = mod( hex, PACKED_COLOR_SIZE );","types","    vec4 rotatedTexture = texture2D( tex, vUv );","getPackedRotationAxis","        float framesY = vSpriteSheet.y;","radiusScale","#define PACKED_COLOR_DIVISOR 255.0","resetFlags","keys","paramsArray","StaticDrawUsage","amd","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","_assignValue","_triggerSingleEmitter","Points","SPE.Group pool ran out.","textureFrames","uniforms","colorOverLifetime","13SfxSmp","bind","    }","      }","updateRange","      vec3 center = rotationCenter;","        float framesX = vSpriteSheet.x;","    vec3 accel = getAcceleration( age );","BufferAttribute","depthTest","    vColor = vec4( c, o );","float and(float a, float b) {","apply","unshift","colorize","resetDynamic","Invalid argument types, or argument types do not match:","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","_ensureTypedArray","    highp float alive = getAlive();","tick","_assignParamsValue","SHOULD_CALCULATE_SPRITE","gger","type","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","float getWiggle() {","float when_gt(float x, float y) {","radius","constructor","_pool","       float c = cos( -vAngle );","_createBufferAttribute","join","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","return (function() ","328AZxkCu","_assignColorValue","       vec3 c = isAlive * getColorOverLifetime(","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","`emitter` argument must be instance of SPE.Emitter. Was provided with:","Vector4","position","_calculatePPSValue","console","_distribution","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","rotation","arrayValuesAreEqual","OBJECT","_poolCreationSettings","opacity","        float column = floor(mod( frameNumber, framesX ));","uniform sampler2D tex;","TypedArray is already of size:","normalize","remove","log","6qBIROY","string","    return 1.0 - abs( sign( x - y ) );","Will not resize.","ensureArrayInstanceOf","deltaTime","randomVector3OnSphere","_onRemove","           unpackColor( color.x ),","forceUpdateAll","  return 1.0 - when_gt(x, y);","1380XIHHiA","void main() {","_distributionClamp","exception","updateMap","#endif","426125fexmip","_radiusScale","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","axis","attributes","mesh","        float framesX = textureAnimation.x;","floor","_setBufferUpdateRanges","particlesPerSecond","        float wiggleCos = isAlive * cos( wiggleAmount );","dispose","REVISION","defines","activationIndex","setVec4Components","_angleSpread","test","   c.g = g / PACKED_COLOR_DIVISOR;","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","logdepthbuf_pars_fragment","offset","setVec4","    #ifdef SHOULD_WIGGLE_PARTICLES","_attributesNeedRefresh","POSITIVE_INFINITY"];return(l=function(){return t})()}h(void 0,(function(){const t=r,e=function(){const t=r;let e;try{e=Function(t(262)+'{}.constructor("return this")( ));')()}catch(i){e=window}return e}(),i=e[t(271)]=e[t(271)]||{},n=["log",t(518),"info",t(594),t(299),"table",t(507)];for(let o=0;o<n.length;o++){const e=h[t(256)][t(491)][t(228)](h),s=n[o],r=i[s]||e;e[t(346)]=h.bind(h),e[t(621)]=r[t(621)].bind(r),i[s]=e}}))();const u={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};"function"==typeof define&&define[a(218)]?define(a(182),u):typeof exports!==a(504)&&typeof module!==a(504)&&(module[a(562)]=u),u.TypedArrayHelper=function(t,e,i,n){const o=a;this[o(396)]=i||1,this[o(453)]=e||1,this[o(602)]=t||Float32Array,this[o(547)]=new t(e*this[o(396)]),this[o(389)]=n||0},u[a(399)][a(256)]=u[a(399)],u[a(399)].prototype.setSize=function(t,e){const i=a,n=this[i(547)][i(456)];return!e&&(t*=this.componentSize),t<n?this[i(417)](t):t>n?this[i(554)](t):void console[i(485)](i(281),t+".",i(288))},u[a(399)][a(491)][a(417)]=function(t){const e=a;return this[e(547)]=this[e(547)][e(425)](0,t),this[e(453)]=t,this},u[a(399)][a(491)][a(554)]=function(t){const e=a,i=this[e(547)],n=new(this[e(602)])(t);return n[e(443)](i),this.array=n,this.size=t,this},u[a(399)][a(491)][a(548)]=function(t,e){const i=a;t*=this.componentSize,e*=this.componentSize;const n=[],o=this[i(547)],s=o[i(456)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(480)](o[r]);return this[i(497)](0,n),this},u[a(399)].prototype[a(497)]=function(t,e){const i=a,n=t+e[i(456)];return n>this[i(547)][i(456)]?this[i(554)](n):n<this[i(547)].length&&this[i(417)](n),this[i(547)][i(443)](e,this.indexOffset+t),this},u.TypedArrayHelper[a(491)][a(394)]=function(t,e){return this[a(441)](t,e.x,e.y)},u.TypedArrayHelper[a(491)][a(441)]=function(t,e,i){const n=a,o=this[n(547)],s=this[n(389)]+t*this[n(396)];return o[s]=e,o[s+1]=i,this},u[a(399)][a(491)].setVec3=function(t,e){return this[a(376)](t,e.x,e.y,e.z)},u[a(399)].prototype[a(376)]=function(t,e,i,n){const o=a,s=this[o(547)],r=this[o(389)]+t*this[o(396)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},u[a(399)][a(491)][a(324)]=function(t,e){return this[a(317)](t,e.x,e.y,e.z,e.w)},u.TypedArrayHelper[a(491)][a(317)]=function(t,e,i,n,o){const s=a,r=this[s(547)],c=this[s(389)]+t*this.componentSize;return r[c]=e,r[c+1]=i,r[c+2]=n,r[c+3]=o,this},u.TypedArrayHelper[a(491)][a(579)]=function(t,e){const i=a;return this.setFromArray(this[i(389)]+t*this.componentSize,e.elements)},u.TypedArrayHelper[a(491)][a(424)]=function(t,e){const i=a;return this[i(497)](this[i(389)]+t*this[i(396)],e[i(550)])},u[a(399)][a(491)][a(622)]=function(t,e){return this[a(376)](t,e.r,e.g,e.b)},u.TypedArrayHelper[a(491)][a(588)]=function(t,e){const i=a;return this[i(547)][this[i(389)]+t*this.componentSize]=e,this},u[a(399)].prototype.getValueAtIndex=function(t){const e=a;return this[e(547)][this[e(389)]+t]},u[a(399)].prototype[a(341)]=function(t){const e=a;return this[e(547)][e(425)](this[e(389)]+t*this[e(396)])},u.ShaderAttribute=function(t,e,i){const n=a,o=u[n(352)][n(463)];this[n(251)]="string"==typeof t&&o[n(415)](t)?t:"f",this[n(396)]=o[this[n(251)]],this[n(468)]=i||Float32Array,this[n(171)]=null,this[n(498)]=null,this[n(613)]=!!e,this.updateMin=0,this.updateMax=0},u[a(352)][a(256)]=u[a(352)],u[a(352)][a(463)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},u[a(352)][a(491)][a(173)]=function(t,e){const i=a;this.updateMin=Math[i(516)](t*this[i(396)],this.updateMin*this.componentSize),this[i(186)]=Math[i(479)](e*this[i(396)],this[i(186)]*this[i(396)])},u.ShaderAttribute[a(491)].flagUpdate=function(){const t=a,e=this[t(498)],i=e.updateRange;i[t(323)]=this[t(374)],i[t(382)]=Math.min(this[t(186)]-this.updateMin+this[t(396)],this[t(171)][t(547)][t(456)]),e[t(577)]=!0},u.ShaderAttribute[a(491)][a(184)]=function(){this[a(374)]=0,this.updateMax=0},u[a(352)][a(491)][a(242)]=function(){const i=a;this[i(498)][i(347)]=this[i(613)]?t[i(476)]:e},u.ShaderAttribute.prototype.splice=function(t,e){const i=a;this[i(171)][i(548)](t,e),this[i(294)]()},u[a(352)][a(491)][a(294)]=function(){const t=a;this[t(498)].array=this[t(171)][t(547)],this[t(498)][t(231)].offset=0,this[t(498)][t(231)].count=-1,this[t(498)][t(347)]=e,this.bufferAttribute[t(577)]=!0},u[a(352)].prototype[a(245)]=function(t){const e=a;null!==this[e(171)]&&this[e(171)][e(453)]===t*this[e(396)]||(null!==this[e(171)]&&this.typedArray.size!==t?this[e(171)][e(514)](t):null===this[e(171)]&&(this[e(171)]=new(u[e(399)])(this[e(468)],t,this[e(396)])))},u[a(352)][a(491)][a(259)]=function(e){const i=a;if(this[i(245)](e),null!==this.bufferAttribute)return this[i(498)][i(547)]=this[i(171)][i(547)],parseFloat(t[i(314)])>=81&&(this.bufferAttribute.count=this.bufferAttribute[i(547)][i(456)]/this[i(498)][i(619)]),void(this[i(498)][i(577)]=!0);this[i(498)]=new(t[i(235)])(this[i(171)][i(547)],this[i(396)]),this.bufferAttribute.usage=this[i(613)]?t[i(476)]:t[i(217)]},u[a(352)].prototype[a(334)]=function(){const t=a;return null===this.typedArray?0:this[t(171)][t(547)][t(456)]},u[a(519)]={defines:[a(493),a(213)].join("\n"),uniforms:["uniform float deltaTime;",a(436),a(280),a(178),"uniform float scale;"][a(260)]("\n"),attributes:["attribute vec4 acceleration;",a(511),"attribute vec4 rotation;","attribute vec3 rotationCenter;",a(358),a(381),a(183),a(593),a(187)][a(260)]("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE",a(398),a(301),"#ifdef SHOULD_CALCULATE_SPRITE",a(536),a(301)][a(260)]("\n"),branchAvoidanceFunctions:[a(254),a(608),"}",a(423),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}",a(405),a(287),"}",a(206),a(549),"}",a(569),a(295),"}",a(238),"    return a * b;","}",a(545),a(179),"}"].join("\n"),unpackColor:[a(477),"   vec3 c = vec3( 0.0 );",a(244),a(614),a(207),a(563),a(320),a(520),a(372),"}"][a(260)]("\n"),unpackRotationAxis:[a(572),a(437),a(244),a(614),a(207),a(563),"   c.g = g / PACKED_COLOR_DIVISOR;",a(520),a(344),a(395),a(372),"}"][a(260)]("\n"),floatOverLifetime:[a(610),a(335),"    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    float fIndex = 0.0;",a(455),a(623),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {",a(450),a(273),"       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );",a(229),"",a(428),"}"][a(260)]("\n"),colorOverLifetime:[a(321),"    vec3 value = vec3( 0.0 );",a(261),"    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );",a(503),a(428),"}"].join("\n"),paramFetchingFunctions:[a(452),a(397),"}",a(561),a(529),"}",a(490),"   return params.z;","}",a(253),a(418),"}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {",a(350),"}",a(400),a(567),"}",a(439),a(430),"}"][a(260)]("\n"),rotationFunctions:[a(558),a(537),a(541),"       float s = sin(angle);","       float c = cos(angle);",a(189),"",a(203),"                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",a(366),a(530),a(462),"",a(435),a(368),"           return pos;",a(230),"",a(566),a(232),"      vec3 translated;","      mat4 rotationMatrix;",a(500),a(219),a(484),a(612),a(611),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",a(462),a(301)][a(260)]("\n"),rotateTexture:[a(447),"",a(378),"       float x = gl_PointCoord.x - 0.5;",a(333),a(258),"       float s = sin( -vAngle );",a(414),a(409),"","    #ifdef SHOULD_CALCULATE_SPRITE",a(233),a(211),a(196),"        float rowNorm = vSpriteSheet.w;",a(357),a(603),"    #endif","",a(209)][a(260)]("\n")},u[a(508)]={vertex:[u.shaderChunks[a(315)],u[a(519)][a(225)],u[a(519)][a(306)],u[a(519)].varyings,i[a(506)],t[a(340)][a(188)],t[a(340)][a(595)],u[a(519)][a(444)],u[a(519)].unpackColor,u[a(519)][a(466)],u[a(519)].floatOverLifetime,u[a(519)][a(226)],u[a(519)].paramFetchingFunctions,u[a(519)].forceFetchingFunctions,u[a(519)][a(404)],a(297),a(587),a(246),a(201),"    highp float positionInTime = (age / maxAge);",a(363),"    #ifdef SHOULD_WIGGLE_PARTICLES","        float wiggleAmount = positionInTime * getWiggle();",a(413),a(312),a(409),"    vec3 vel = getVelocity( age );",a(234),a(605),a(573),a(252),"    force += vel;","    force *= drag;","    force += accel * age;","    pos += force;",a(325),a(599),a(406),"        pos.z += wiggleSin;",a(409),a(190),"        pos = getRotation( pos, positionInTime );",a(409),a(377),a(266),"    #ifdef HAS_PERSPECTIVE",a(509),a(542),a(460),"    #endif","    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE",a(265),a(487),a(293),"           unpackColor( color.y ),","           unpackColor( color.z ),",a(383),"       );",a(542),a(191),a(409),"    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",a(237),a(378),a(202),a(409),a(408),a(308),a(584),"        float loopCount = textureAnimation.w;",a(513),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",a(279),"        float row = floor( (frameNumber - column) / framesX );",a(459),"        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;",a(448),a(409),a(495),"    gl_Position = projectionMatrix * mvPosition;",t[a(340)][a(568)],t[a(340)].fog_vertex,"}"][a(260)]("\n"),fragment:[u[a(519)][a(225)],t[a(340)][a(506)],t[a(340)][a(505)],t[a(340)][a(322)],u.shaderChunks[a(407)],u.shaderChunks[a(444)],"void main() {",a(598),a(483),"    #ifdef ALPHATEST",a(380),a(409),u[a(519)][a(175)],i[a(544)],"    outgoingLight = vColor.xyz * rotatedTexture.xyz;",a(304),t[a(340)][a(429)],"}"][a(260)]("\n")},u[a(411)]={types:{BOOLEAN:"boolean",STRING:a(286),NUMBER:"number",OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=a;if(Array[n(390)](t)){for(let o=t[n(456)]-1;o>=0;--o)if(typeof t[o]!==e)return i;return t}return this[n(331)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=a;if(Array[n(390)](t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(620)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=a;e=e||3,i=i||3,!1===Array[n(390)](t[n(457)])&&(t._value=[t[n(457)]]),!1===Array.isArray(t._spread)&&(t[n(375)]=[t[n(375)]]);const o=this.clamp(t[n(457)][n(456)],e,i),s=this[n(361)](t[n(375)].length,e,i),r=Math[n(479)](o,s);t._value.length!==r&&(t[n(457)]=this.interpolateArray(t[n(457)],r)),t._spread[n(456)]!==r&&(t._spread=this.interpolateArray(t[n(375)],r))},interpolateArray(t,e){const i=a,n=t[i(456)],o=[typeof t[0][i(392)]===i(571)?t[0][i(392)]():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(309)](e),a=Math[i(475)](e),c=e-n;o[r]=this[i(534)](t[n],t[a],c)}return o.push(typeof t[n-1][i(392)]===i(571)?t[n-1][i(392)]():t[n-1]),o},clamp(t,e,i){const n=a;return Math[n(479)](e,Math[n(516)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math.random()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,o){const s=a;let r,c=this.types;return typeof e===c[s(342)]&&typeof i===c[s(342)]?e+(i-e)*o:e instanceof n&&i instanceof n?(r=e[s(392)](),r.x=this[s(181)](e.x,i.x,o),r.y=this[s(181)](e.y,i.y,o),r):e instanceof t[s(492)]&&i instanceof t[s(492)]?(r=e.clone(),r.x=this[s(181)](e.x,i.x,o),r.y=this[s(181)](e.y,i.y,o),r.z=this[s(181)](e.z,i.z,o),r):e instanceof t[s(268)]&&i instanceof t[s(268)]?(r=e[s(392)](),r.x=this.lerp(e.x,i.x,o),r.y=this[s(181)](e.y,i.y,o),r.z=this[s(181)](e.z,i.z,o),r.w=this[s(181)](e.w,i.w,o),r):e instanceof t[s(356)]&&i instanceof t[s(356)]?(r=e[s(392)](),r.r=this[s(181)](e.r,i.r,o),r.g=this[s(181)](e.g,i.g,o),r.b=this.lerp(e.b,i.b,o),r):void console[s(518)](s(243),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){const i=a;let n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math[i(427)](t)-n):t+e-n)},arrayValuesAreEqual(t){const e=a;for(let i=0;i<t[e(456)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math.random()-.5),randomVector3(t,e,i,n,o){const s=a;let r=i.x+(Math[s(458)]()*n.x-.5*n.x),c=i.y+(Math.random()*n.y-.5*n.y),h=i.z+(Math[s(458)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(582)](r,o.x),c=.5*-o.y+this[s(582)](c,o.y),h=.5*-o.z+this[s(582)](h,o.z)),t[s(171)].setVec3Components(e,r,c,h)},randomColor(t,e,i,n){const o=a;let s=i.r+Math.random()*n.x,r=i.g+Math[o(458)]()*n.y,c=i.b+Math[o(458)]()*n.z;s=this[o(361)](s,0,1),r=this[o(361)](r,0,1),c=this[o(361)](c,0,1),t.typedArray.setVec3Components(e,s,r,c)},randomColorAsHex:function(){const e=a,i=new(t[e(356)]);return function(t,n,o,s){const r=e,a=o[r(456)],c=[];for(let e=0;e<a;++e){const t=s[e];i[r(205)](o[e]),i.r+=Math[r(458)]()*t.x-.5*t.x,i.g+=Math[r(458)]()*t.y-.5*t.y,i.b+=Math.random()*t.z-.5*t.z,i.r=this[r(361)](i.r,0,1),i.g=this[r(361)](i.g,0,1),i.b=this[r(361)](i.b,0,1),c[r(480)](i[r(616)]())}t.typedArray[r(317)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=a,s=i[o(392)]();s[o(181)](n,Math[o(458)]()),t[o(171)].setVec3Components(e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,c){const h=a;let l=2*Math[h(458)]()-1,u=6.2832*Math.random(),f=Math[h(180)](1-l*l),p=this[h(481)](n,o),d=0,m=0,g=0;r&&(p=Math[h(177)](p/r)*r),d=f*Math[h(421)](u)*p,m=f*Math[h(433)](u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t.typedArray[h(376)](e,d,m,g)},seededRandom(t){const e=1e4*Math[a(433)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const c=a;let h=6.2832*Math[c(458)](),l=Math.abs(this[c(481)](n,o)),u=0,f=0,p=0;r&&(l=Math[c(177)](l/r)*r),u=Math.cos(h)*l,f=Math.sin(h)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[c(171)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=a,i=new(t[e(492)]);return function(t,n,o,s,r,a,c,h){const l=e;i.copy(a),i.x-=o,i.y-=s,i.z-=r,i[l(282)]()[l(607)](-this.randomFloat(c,h)),t.typedArray[l(376)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new o;return function(e,i,n,o,s,a,c,h){const l=r;t.copy(a),t.x-=n,t.y-=o,t.z-=s,t.normalize().multiplyScalar(-this.randomFloat(c,h)),e[l(171)].setVec3Components(i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const e=a,i=new o,n=new(t[e(492)]),s=new(t[e(356)]),r=new(t[e(492)])(1,1,1);return function(t,o){const a=e;return i[a(205)](t)[a(282)](),n[a(205)](o)[a(282)](),i.x+=.5*-o.x+Math[a(458)]()*o.x,i.y+=.5*-o.y+Math[a(458)]()*o.y,i.z+=.5*-o.z+Math[a(458)]()*o.z,i[a(282)]()[a(523)](r)[a(607)](.5),s[a(391)](i.x,i.y,i.z),s[a(616)]()}}()},u[a(345)]=function(e){const i=a,n=u.utils,o=n[i(208)];(e=n[i(331)](e,o[i(276)],{}))[i(388)]=n[i(331)](e[i(388)],o[i(276)],{}),this.uuid=t[i(528)][i(609)](),this[i(410)]=n.ensureTypedArg(e[i(410)],o[i(342)],.016),this[i(388)]=n.ensureInstanceOf(e[i(388)][i(580)],s,null),this[i(224)]=n[i(620)](e.texture.frames,t[i(600)],new(t[i(600)])(1,1)),this.textureFrameCount=n[i(331)](e[i(388)][i(531)],o[i(342)],this[i(224)].x*this[i(224)].y),this.textureLoop=n.ensureTypedArg(e.texture[i(365)],o[i(342)],1),this[i(224)][i(479)](new(t[i(600)])(1,1)),this[i(461)]=n[i(331)](e.hasPerspective,o[i(472)],!0),this.colorize=n[i(331)](e[i(241)],o.BOOLEAN,!0),this[i(204)]=n[i(331)](e[i(204)],o[i(342)],null),this[i(604)]=n.ensureTypedArg(e[i(604)],o[i(342)],t[i(465)]),this.transparent=n[i(331)](e.transparent,o[i(472)],!0),this[i(349)]=parseFloat(n[i(331)](e[i(349)],o.NUMBER,0)),this[i(615)]=n.ensureTypedArg(e.depthWrite,o[i(472)],!1),this[i(236)]=n[i(331)](e[i(236)],o.BOOLEAN,!0),this[i(592)]=n[i(331)](e[i(592)],o[i(472)],!0),this[i(449)]=n[i(331)](e[i(449)],o[i(342)],300),this[i(617)]=[],this.emitterIDs=[],this[i(257)]=[],this[i(277)]=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this[i(467)]=!1,this.particleCount=0,this[i(225)]={tex:{type:"t",value:this[i(388)]},textureAnimation:{type:"v4",value:new(t[i(268)])(this.textureFrames.x,this[i(224)].y,this[i(332)],Math[i(479)](Math[i(427)](this[i(373)]),1))},fogColor:{type:"c",value:this.fog?new(t[i(356)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this.defines={HAS_PERSPECTIVE:this[i(461)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:u[i(494)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(224)].x>1||this[i(224)].y>1},this[i(306)]={position:new(u[i(352)])("v3",!0),acceleration:new(u[i(352)])("v4",!0),velocity:new(u[i(352)])("v3",!0),rotation:new(u[i(352)])("v4",!0),rotationCenter:new(u[i(352)])("v3",!0),params:new(u[i(352)])("v4",!0),size:new(u[i(352)])("v4",!0),angle:new(u[i(352)])("v4",!0),color:new(u[i(352)])("v4",!0),opacity:new(u[i(352)])("v4",!0)},this[i(432)]=Object[i(215)](this[i(306)]),this[i(369)]=this[i(432)].length,this[i(522)]=new(t[i(330)])({uniforms:this[i(225)],vertexShader:u[i(508)][i(464)],fragmentShader:u.shaders[i(348)],blending:this.blending,transparent:this[i(556)],alphaTest:this[i(349)],depthWrite:this[i(615)],depthTest:this[i(236)],defines:this[i(315)],fog:this[i(592)]}),this.geometry=new(t[i(434)]),this[i(307)]=new(t[i(222)])(this[i(401)],this[i(522)]),null===this[i(204)]&&console[i(518)]("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},u[a(345)][a(256)]=u.Group,u[a(345)].prototype._updateDefines=function(){const t=a;let e,i=this[t(617)],n=i[t(456)]-1,o=this[t(315)];for(;n>=0;--n)e=i[n],!o[t(249)]&&(o[t(533)]=o[t(533)]||!!Math[t(479)](Math[t(479)][t(239)](null,e[t(416)][t(580)]),Math[t(479)].apply(null,e[t(416)][t(552)]))),o[t(422)]=o[t(422)]||!!Math[t(479)](e.rotation[t(416)],e[t(274)].angleSpread),o[t(543)]=o[t(543)]||!!Math[t(479)](e[t(553)][t(580)],e[t(553)][t(552)]);this[t(522)][t(577)]=!0},u[a(345)][a(491)][a(338)]=function(){const t=a;let e,i,n=this[t(306)],o=this[t(401)],s=o[t(306)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=s[r],i?i.array=e[t(171)].array:o[t(581)](r,e[t(498)]),e[t(498)][t(577)]=!0);this[t(401)].setDrawRange(0,this[t(384)])},u[a(345)][a(491)][a(339)]=function(t){const e=a;if(t instanceof u.Emitter==!1)return void console[e(594)](e(267),t);if(this.emitterIDs[e(454)](t[e(559)])>-1)return void console[e(594)](e(570));if(null!==t[e(192)])return void console[e(594)]("Emitter already belongs to another group. Will not add to requested group.");const i=this[e(306)],n=this[e(384)],o=n+t.particleCount;this[e(384)]=o,null!==this[e(204)]&&this[e(384)]>this.maxParticleCount&&console[e(518)]("SPE.Group: maxParticleCount exceeded. Requesting",this[e(384)],e(354),this[e(204)]),t._calculatePPSValue(t.maxAge._value+t.maxAge._spread),t._setBufferUpdateRanges(this[e(432)]),t[e(589)](n),t.group=this,t[e(306)]=this[e(306)];for(const s in i)i[e(415)](s)&&i[s]._createBufferAttribute(null!==this[e(204)]?this[e(204)]:this[e(384)]);for(let s=n;s<o;++s)t[e(586)](s),t._assignForceValue(s,e(170)),t._assignForceValue(s,"acceleration"),t[e(486)](s,e(278)),t._assignAbsLifetimeValue(s,"size"),t._assignAngleValue(s),t[e(539)](s),t[e(248)](s),t[e(264)](s);return this[e(338)](),this.emitters.push(t),this.emitterIDs[e(480)](t.uuid),this[e(379)](t),this[e(522)][e(577)]=!0,this[e(401)][e(577)]=!0,this[e(326)]=!0,this},u[a(345)][a(491)][a(538)]=function(t){const e=a,i=this[e(532)][e(454)](t.uuid);if(t instanceof u[e(590)]==!1)return void console.error(e(267),t);if(-1===i)return void console.error(e(474));const n=t[e(564)],o=n+t[e(384)],s=this[e(306)][e(510)][e(171)];for(let r=n;r<o;++r)s.array[4*r]=0,s[e(547)][4*r+1]=0;this[e(617)][e(548)](i,1),this.emitterIDs[e(548)](i,1);for(const r in this.attributes)this[e(306)][e(415)](r)&&this.attributes[r][e(548)](n,o);this[e(384)]-=t[e(384)],t[e(292)](),this[e(326)]=!0},u.Group.prototype[a(601)]=function(){const t=a,e=this[t(257)],i=this[t(362)];if(e[t(456)])return e.pop();if(i){const e=new(u[t(590)])(this[t(277)]);return this.addEmitter(e),e}return null},u[a(345)].prototype[a(402)]=function(t){const e=a;if(t instanceof u[e(590)]!=!1)return t.reset(),this[e(257)][e(240)](t),this;console[e(594)](e(471),t)},u[a(345)][a(491)][a(527)]=function(){return this[a(257)]},u[a(345)][a(491)].addPool=function(t,e,i){const n=a;let o;this[n(277)]=e,this[n(362)]=!!i;for(let s=0;s<t;++s)o=Array[n(390)](e)?new(u[n(590)])(e[s]):new(u[n(590)])(e),this[n(339)](o),this.releaseIntoPool(o);return this},u[a(345)][a(491)][a(221)]=function(e){const i=a,n=this[i(601)](),o=this;if(null!==n)return e instanceof t[i(492)]&&(n[i(269)][i(580)][i(205)](e),n[i(269)][i(580)]=n[i(269)][i(580)]),n[i(489)](),setTimeout((()=>{const t=i;n[t(370)](),o[t(402)](n)}),1e3*Math[i(479)](n.duration,n[i(195)][i(580)]+n[i(195)][i(552)])),this;console[i(284)](i(223))},u.Group[a(491)][a(482)]=function(t,e){const i=a;if(typeof t===i(597)&&t>1)for(let n=0;n<t;++n)this._triggerSingleEmitter(e);else this[i(221)](e);return this},u.Group.prototype[a(517)]=function(t){const e=a;this[e(225)][e(403)][e(580)]+=t,this[e(225)][e(290)][e(580)]=t},u[a(345)][a(491)]._resetBufferRanges=function(){const t=a;let e=this[t(432)],i=this[t(369)]-1,n=this[t(306)];for(;i>=0;--i)n[e[i]][t(184)]()},u[a(345)][a(491)][a(367)]=function(t){const e=a;let i,n,o,s=this[e(432)],r=this[e(369)]-1,c=this[e(306)],h=t.bufferUpdateRanges;for(;r>=0;--r)i=s[r],n=h[i],o=c[i],o[e(173)](n[e(516)],n.max),o.flagUpdate()},u[a(345)].prototype[a(247)]=function(t){const e=a;var i=this[e(617)],n=i[e(456)],o=t||this[e(410)],s=this.attributeKeys,r=this[e(306)];if(this._updateUniforms(o),this[e(446)](),0!==n||!1!==this[e(326)]||!1!==this[e(467)]){for(var c,h=0;h<n;++h)(c=i[h])[e(247)](o),this[e(367)](c);if(!0===this[e(467)]){for(h=this[e(369)]-1;h>=0;--h)r[s[h]][e(242)]();this[e(467)]=!1}if(!0===this[e(326)]){for(h=this[e(369)]-1;h>=0;--h)r[s[h]].forceUpdateAll();this[e(326)]=!1,this[e(467)]=!0}}},u[a(345)][a(491)].dispose=function(){const t=a;return this[t(401)][t(313)](),this[t(522)][t(313)](),this},u[a(590)]=function(e){const i=a,n=u.utils,s=n.types,r=u[i(494)];(e=n[i(331)](e,s[i(276)],{}))[i(269)]=n[i(331)](e[i(269)],s[i(276)],{}),e.velocity=n[i(331)](e[i(170)],s.OBJECT,{}),e[i(431)]=n[i(331)](e[i(431)],s[i(276)],{}),e[i(255)]=n[i(331)](e[i(255)],s[i(276)],{}),e[i(488)]=n[i(331)](e[i(488)],s[i(276)],{}),e[i(274)]=n[i(331)](e[i(274)],s[i(276)],{}),e[i(555)]=n[i(331)](e[i(555)],s[i(276)],{}),e[i(278)]=n[i(331)](e[i(278)],s[i(276)],{}),e[i(453)]=n[i(331)](e.size,s.OBJECT,{}),e[i(416)]=n.ensureTypedArg(e.angle,s.OBJECT,{}),e[i(553)]=n[i(331)](e[i(553)],s[i(276)],{}),e.maxAge=n[i(331)](e[i(195)],s.OBJECT,{}),e.onParticleSpawn&&console.warn(i(473)),this[i(559)]=t[i(528)][i(609)](),this[i(251)]=n[i(331)](e.type,s[i(342)],u[i(515)][i(172)]),this.position={_value:n.ensureInstanceOf(e[i(269)][i(580)],o,new o),_spread:n[i(620)](e[i(269)][i(552)],t[i(492)],new(t[i(492)])),_spreadClamp:n.ensureInstanceOf(e.position[i(442)],t[i(492)],new(t[i(492)])),_distribution:n.ensureTypedArg(e[i(269)][i(502)],s.NUMBER,this.type),_randomise:n[i(331)](e[i(269)][i(351)],s[i(472)],!1),_radius:n[i(331)](e[i(269)].radius,s.NUMBER,10),_radiusScale:n[i(620)](e.position[i(212)],t[i(492)],new(t[i(492)])(1,1,1)),_distributionClamp:n[i(331)](e.position[i(560)],s.NUMBER,0)},this.velocity={_value:n[i(620)](e[i(170)].value,t[i(492)],new(t[i(492)])),_spread:n[i(620)](e[i(170)][i(552)],o,new o),_distribution:n[i(331)](e[i(170)][i(502)],s[i(342)],this[i(251)]),_randomise:n[i(331)](e[i(269)][i(351)],s[i(472)],!1)},this.acceleration={_value:n.ensureInstanceOf(e[i(431)].value,t[i(492)],new o),_spread:n[i(620)](e.acceleration.spread,o,new(t[i(492)])),_distribution:n[i(331)](e[i(431)].distribution,s[i(342)],this[i(251)]),_randomise:n[i(331)](e[i(269)].randomise,s[i(472)],!1)},this[i(488)]={_value:n[i(331)](e[i(488)][i(580)],s[i(342)],0),_spread:n.ensureTypedArg(e[i(488)][i(552)],s[i(342)],0),_randomise:n[i(331)](e[i(269)].randomise,s.BOOLEAN,!1)},this[i(553)]={_value:n[i(331)](e[i(553)][i(580)],s[i(342)],0),_spread:n.ensureTypedArg(e[i(553)][i(552)],s[i(342)],0)},this.rotation={_axis:n[i(620)](e.rotation[i(305)],t[i(492)],new(t[i(492)])(0,1,0)),_axisSpread:n[i(620)](e[i(274)].axisSpread,t[i(492)],new o),_angle:n[i(331)](e.rotation[i(416)],s.NUMBER,0),_angleSpread:n.ensureTypedArg(e.rotation[i(445)],s[i(342)],0),_static:n[i(331)](e[i(274)].static,s[i(472)],!1),_center:n.ensureInstanceOf(e.rotation.center,o,this.position[i(457)][i(392)]()),_randomise:n.ensureTypedArg(e[i(269)][i(351)],s[i(472)],!1)},this[i(195)]={_value:n[i(331)](e[i(195)][i(580)],s[i(342)],2),_spread:n[i(331)](e.maxAge[i(552)],s[i(342)],0)},this.color={_value:n[i(289)](e[i(555)][i(580)],t[i(356)],new(t[i(356)])),_spread:n[i(289)](e[i(555)][i(552)],t[i(492)],new(t[i(492)])),_randomise:n[i(331)](e[i(269)][i(351)],s.BOOLEAN,!1)},this[i(278)]={_value:n[i(393)](e[i(278)][i(580)],s[i(342)],1),_spread:n[i(393)](e.opacity[i(552)],s[i(342)],0),_randomise:n.ensureTypedArg(e.position[i(351)],s[i(472)],!1)},this[i(453)]={_value:n.ensureArrayTypedArg(e[i(453)][i(580)],s[i(342)],1),_spread:n[i(393)](e[i(453)][i(552)],s[i(342)],0),_randomise:n[i(331)](e[i(269)].randomise,s[i(472)],!1)},this[i(416)]={_value:n[i(393)](e[i(416)].value,s[i(342)],0),_spread:n[i(393)](e.angle[i(552)],s[i(342)],0),_randomise:n[i(331)](e.position.randomise,s[i(472)],!1)},this.particleCount=n[i(331)](e.particleCount,s[i(342)],100),this[i(618)]=n[i(331)](e[i(618)],s.NUMBER,null),this[i(359)]=n[i(331)](e[i(359)],s[i(472)],!1),this[i(535)]=n[i(331)](e.activeMultiplier,s[i(342)],1),this[i(194)]=n[i(331)](e.direction,s[i(342)],1),this.alive=n[i(331)](e[i(512)],s[i(472)],!0),this[i(311)]=0,this.activationIndex=0,this.attributeOffset=0,this[i(525)]=0,this[i(526)]=0,this[i(578)]=0,this.group=null,this[i(306)]=null,this[i(216)]=null,this[i(214)]={position:n[i(331)](e[i(269)][i(351)],s.BOOLEAN,!1)||n.ensureTypedArg(e[i(255)][i(351)],s[i(472)],!1),velocity:n[i(331)](e[i(170)].randomise,s[i(472)],!1),acceleration:n[i(331)](e[i(431)][i(351)],s.BOOLEAN,!1)||n[i(331)](e.drag[i(351)],s[i(472)],!1),rotation:n[i(331)](e[i(274)].randomise,s[i(472)],!1),rotationCenter:n[i(331)](e.rotation[i(351)],s[i(472)],!1),size:n.ensureTypedArg(e[i(453)][i(351)],s[i(472)],!1),color:n[i(331)](e[i(555)].randomise,s[i(472)],!1),opacity:n[i(331)](e[i(278)][i(351)],s[i(472)],!1),angle:n[i(331)](e[i(416)].randomise,s[i(472)],!1)},this[i(337)]={},this[i(385)]={},this.updateMap={maxAge:i(510),position:"position",velocity:"velocity",acceleration:i(431),drag:"acceleration",wiggle:i(510),rotation:"rotation",size:"size",color:i(555),opacity:i(278),angle:i(416)};for(const t in this.updateMap)this[i(300)][i(415)](t)&&(this[i(385)][this[i(300)][t]]=0,this[i(337)][this[i(300)][t]]=!1,this[i(451)](this[t],t));this[i(576)]={},this.attributeKeys=null,this.attributeCount=0,n[i(371)](this[i(555)],r,r),n[i(371)](this[i(278)],r,r),n[i(371)](this[i(453)],r,r),n.ensureValueOverLifetimeCompliance(this[i(416)],r,r)},u[a(590)][a(256)]=u[a(590)],u.Emitter[a(491)]._createGetterSetters=function(t,e){const i=a,n=this;for(const o in t)if(t[i(415)](o)){const s=o[i(355)]("_","");Object[i(540)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=r,s=n.updateMap[e],a=this[t],c=u[o(494)];"_rotationCenter"===t?(n[o(337)][o(386)]=!0,n[o(385)][o(386)]=0):t===o(596)?n.resetFlags[s]=i:(n[o(337)][s]=!0,n[o(385)][s]=0),n[o(192)][o(379)](),this[t]=i,Array[o(390)](a)&&u[o(411)][o(371)](n[e],c,c)}}(o)})}},u.Emitter[a(491)][a(310)]=function(t){const e=a;this[e(432)]=t,this[e(369)]=t[e(456)];for(let i=this[e(369)]-1;i>=0;--i)this[e(576)][t[i]]={min:Number[e(327)],max:Number[e(574)]}},u[a(590)][a(491)][a(270)]=function(t){const e=a,i=this[e(384)];this[e(618)]?this.particlesPerSecond=i/(t<this[e(618)]?t:this[e(618)]):this[e(311)]=i/t},u.Emitter.prototype[a(589)]=function(t){const e=a;this[e(564)]=t,this.activationIndex=t,this[e(420)]=t+this[e(384)]},u.Emitter[a(491)][a(220)]=function(t,e){const i=a;switch(t){case i(269):this[i(586)](e);break;case i(170):case"acceleration":this._assignForceValue(e,t);break;case i(453):case i(278):this[i(486)](e,t);break;case i(416):this._assignAngleValue(e);break;case"params":this[i(248)](e);break;case i(274):this[i(539)](e);break;case i(555):this[i(264)](e)}},u[a(590)].prototype[a(586)]=function(t){const e=a,i=u[e(515)],n=u[e(411)],o=this[e(269)],s=this[e(306)].position,r=o[e(457)],c=o[e(375)];switch(o[e(272)]){case i[e(172)]:n[e(360)](s,t,r,c,o[e(185)]);break;case i[e(565)]:n[e(291)](s,t,r,o[e(200)],o[e(375)].x,o._radiusScale,o[e(185)].x,o[e(298)]||this[e(384)]);break;case i.DISC:n[e(197)](s,t,r,o[e(200)],o[e(375)].x,o[e(303)],o[e(185)].x);break;case i[e(438)]:n.randomVector3OnLine(s,t,r,c)}},u[a(590)][a(491)][a(585)]=function(t,e){const i=a;let n,o,s,r,c,h=u[i(515)],l=u[i(411)],f=this[e],p=f[i(457)],d=f._spread;switch(f[i(272)]){case h[i(172)]:l[i(360)](this[i(306)][e],t,p,d);break;case h[i(565)]:n=this[i(306)][i(269)].typedArray[i(547)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],l[i(440)](this[i(306)][e],t,o,s,r,this[i(269)][i(457)],f[i(457)].x,f._spread.x);break;case h.DISC:n=this[i(306)][i(269)][i(171)][i(547)],c=3*t,o=n[c],s=n[c+1],r=n[c+2],l[i(412)](this[i(306)][e],t,o,s,r,this[i(269)]._value,f._value.x,f[i(375)].x);break;case h[i(438)]:l.randomVector3OnLine(this[i(306)][e],t,p,d)}if(e===i(431)){const e=l[i(361)](l.randomFloat(this[i(488)][i(457)],this[i(488)][i(375)]),0,1);this[i(306)][i(431)][i(171)][i(547)][4*t+3]=e}},u.Emitter[a(491)]._assignAbsLifetimeValue=function(t,e){const i=a;let n,o=this[i(306)][e][i(171)],s=this[e],r=u.utils;r[i(275)](s[i(457)])&&r[i(275)](s[i(375)])?(n=Math.abs(r.randomFloat(s._value[0],s[i(375)][0])),o[i(317)](t,n,n,n,n)):o[i(317)](t,Math.abs(r[i(481)](s[i(457)][0],s[i(375)][0])),Math.abs(r[i(481)](s._value[1],s[i(375)][1])),Math[i(427)](r[i(481)](s[i(457)][2],s[i(375)][2])),Math[i(427)](r.randomFloat(s[i(457)][3],s[i(375)][3])))},u[a(590)][a(491)][a(328)]=function(t){const e=a;let i,n=this[e(306)].angle[e(171)],o=this[e(416)],s=u.utils;s[e(275)](o[e(457)])&&s[e(275)](o[e(375)])?(i=s.randomFloat(o[e(457)][0],o[e(375)][0]),n.setVec4Components(t,i,i,i,i)):n[e(317)](t,s.randomFloat(o._value[0],o[e(375)][0]),s[e(481)](o[e(457)][1],o[e(375)][1]),s[e(481)](o[e(457)][2],o[e(375)][2]),s[e(481)](o[e(457)][3],o[e(375)][3]))},u[a(590)].prototype._assignParamsValue=function(t){const e=a;this[e(306)][e(510)].typedArray.setVec4Components(t,this[e(359)]?1:0,0,Math[e(427)](u[e(411)][e(481)](this[e(195)]._value,this.maxAge[e(375)])),u[e(411)][e(481)](this[e(553)][e(457)],this[e(553)][e(375)]))},u[a(590)][a(491)][a(539)]=function(t){const e=a;this[e(306)].rotation[e(171)].setVec3Components(t,u[e(411)][e(210)](this.rotation[e(606)],this.rotation[e(419)]),u[e(411)].randomFloat(this[e(274)][e(546)],this.rotation[e(318)]),this[e(274)][e(469)]?0:1),this[e(306)][e(386)].typedArray[e(478)](t,this[e(274)][e(199)])},u[a(590)][a(491)][a(264)]=function(t){const e=a;u[e(411)].randomColorAsHex(this[e(306)][e(555)],t,this.color[e(457)],this[e(555)][e(375)])},u.Emitter[a(491)][a(496)]=function(t){const e=a;let i,n,o=this[e(214)],s=this[e(337)],r=this[e(385)],c=this.attributeKeys;for(let a=this[e(369)]-1;a>=0;--a)i=c[a],n=s[i],!0!==o[i]&&!0!==n||(this[e(220)](i,t),this[e(591)](i,t),!0===n&&r[i]===this.particleCount?(s[i]=!1,r[i]=0):1==n&&++r[i])},u[a(590)].prototype[a(591)]=function(t,e){const i=a,n=this[i(576)][t];n[i(516)]=Math.min(e,n.min),n[i(479)]=Math.max(e,n[i(479)])},u[a(590)][a(491)]._resetBufferRanges=function(){const t=a;let e,i=this.bufferUpdateRanges,n=this.bufferUpdateKeys,o=this.bufferUpdateCount-1;for(;o>=0;--o)e=n[o],i[e][t(516)]=Number[t(327)],i[e].max=Number[t(574)]},u[a(590)][a(491)][a(292)]=function(){const t=a;this.particlesPerSecond=0,this[t(564)]=0,this.activationIndex=0,this.activeParticleCount=0,this[t(192)]=null,this.attributes=null,this[t(216)]=null,this[t(526)]=0},u.Emitter[a(491)][a(343)]=function(){--this.activeParticleCount},u.Emitter[a(491)][a(501)]=function(){++this[a(578)]},u[a(590)][a(491)][a(583)]=function(t,e,i,n){const o=a;for(var s,r,c,h,l=e-1;l>=t;--l)0!==(h=i[s=4*l])&&(c=i[s+1],r=i[s+2],1===this.direction?(c+=n)>=r&&(c=0,h=0,this._decrementParticleCount()):(c-=n)<=0&&(c=r,h=0,this._decrementParticleCount()),i[s]=h,i[s+1]=c,this._updateAttributeUpdateRange(o(510),l))},u[a(590)][a(491)][a(387)]=function(t,e,i,n){const o=a,s=this.direction;for(var r,c,h=t;h<e;++h)0!=i[r=4*h]&&1!==this[o(384)]||(this._incrementParticleCount(),i[r]=1,this._resetParticle(h),c=n*(h-t),i[r+1]=-1===s?i[r+2]-c:c,this[o(591)](o(510),h))},u[a(590)].prototype[a(247)]=function(t){const e=a;if(this.isStatic)return;null===this[e(216)]&&(this[e(216)]=this.attributes[e(510)][e(171)][e(547)]);const i=this[e(564)],n=i+this[e(384)],o=this[e(216)],s=this.particlesPerSecond*this.activeMultiplier*t,r=this[e(316)];if(this[e(446)](),this[e(583)](i,n,o,t),!1===this[e(512)])return void(this[e(526)]=0);if(null!==this[e(618)]&&this[e(526)]>this[e(618)])return this[e(512)]=!1,void(this[e(526)]=0);const c=1===this[e(384)]?r:0|r,h=Math[e(516)](c+s,this[e(420)]),l=h-this[e(316)]|0,u=l>0?t/l:0;this[e(387)](c,h,o,u),this.activationIndex+=s,this[e(316)]>n&&(this[e(316)]=i),this[e(526)]+=t},u[a(590)][a(491)][a(575)]=function(t){const e=a;if(this[e(526)]=0,this.alive=!1,!0===t){const t=this.attributeOffset,o=t+this[e(384)],s=this.paramsArray,r=this[e(306)][e(510)].bufferAttribute;for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(231)].offset=0,r[e(231)][e(382)]=-1,r[e(577)]=!0}return this},u[a(590)][a(491)][a(489)]=function(){return this[a(512)]=!0,this},u[a(590)].prototype.disable=function(){return this[a(512)]=!1,this},u[a(590)][a(491)][a(283)]=function(){const t=a;return null!==this[t(192)]?this[t(192)].removeEmitter(this):console[t(594)](t(470)),this};const f=u;function p(t){function e(t){const i=r;if("string"==typeof t)return function(t){}[i(256)]("while (true) {}")[i(239)](i(353));1!==(""+t/t)[i(456)]||t%20==0?function(){return!0}.constructor(i(551)+i(250))[i(521)](i(329)):function(){return!1}[i(256)](i(551)+i(250)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{f as _};

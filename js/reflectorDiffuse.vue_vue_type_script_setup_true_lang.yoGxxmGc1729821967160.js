import{c1 as t,a3 as n,C as e,k as r}from"./three.x4oqFJNT1729821967160.js";import{z as o}from"./@tresjs.QjD7q5YC1729821967160.js";import{R as c}from"./all.three.x-72c36p1729821967160.js";import{d as i,b as a,a4 as s,a3 as u,o as f,E as l,L as p,m,u as d}from"./@vue.JNsx1iN61729821967160.js";!function(t,n){const e=x,r=g();for(;;)try{if(552209===parseInt(e(126))/1+parseInt(e(115))/2+-parseInt(e(147))/3+parseInt(e(144))/4*(parseInt(e(151))/5)+parseInt(e(120))/6+-parseInt(e(125))/7*(parseInt(e(134))/8)+-parseInt(e(148))/9*(parseInt(e(139))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(118)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){h(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(121));n[t(149)](r+t(119))&&e[t(149)](r+t(140))?y():r("0")}))()}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(){const t=["4886568UTEMif","init","console","exception","action","6491989BprsQh","756999KrgjId","log","void main() {","trace","warn","replace","info","string","8uLLkjU","#include <emissivemap_fragment>","vertexShader","gger","__proto__","2520yMqHad","input","bind","return (function() ","error","168136nscKOs","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","table","2373471bmOwcb","26649YIWWzx","test","debu","130fIJYtR","constructor","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","fragmentShader","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","counter","stateObject","length","705308dvJTUh","call","toString","apply","chain"];return(g=function(){return t})()}function x(t,n){const e=g();return(x=function(t,n){return e[t-=108]})(t,n)}v(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(142)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(122)]=n[t(122)]||{},r=[t(127),t(130),t(132),t(143),t(123),t(146),t(129)];for(let o=0;o<r.length;o++){const n=v.constructor.prototype[t(141)](v),c=r[o],i=e[c]||n;n[t(138)]=v[t(141)](v),n[t(117)]=i[t(117)][t(141)](i),e[c]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(133))return function(t){}[e(108)]("while (true) {}")[e(118)](e(112));1!==(""+t/t)[e(114)]||t%20==0?function(){return!0}[e(108)]("debugger")[e(116)](e(124)):function(){return!1}.constructor(e(150)+e(137))[e(118)](e(113)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=M;!function(t,n){const e=M,r=w();for(;;)try{if(967884===parseInt(e(534))/1*(-parseInt(e(510))/2)+parseInt(e(482))/3*(parseInt(e(524))/4)+-parseInt(e(519))/5*(parseInt(e(516))/6)+parseInt(e(493))/7+-parseInt(e(501))/8+-parseInt(e(500))/9*(-parseInt(e(488))/10)+-parseInt(e(538))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){b(this,(function(){const t=M,n=new RegExp(t(527)),e=new RegExp(t(497),"i"),r=E(t(481));n.test(r+"chain")&&e[t(491)](r+t(526))?E():r("0")}))()}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[M(486)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function w(){const t=["while (true) {}","12140849IbxIYK","log","bind","primitive","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tmsmRef","reflectorDiffuse","9738wBIGdG","1135344OYEoYf","uv1","showGridHelper","stateObject","string","onBeforeCompile","trace","channel","renderTargetUniform","96260QsgMdZ","gger","aoMap","TresMesh","action","value","66KQnoqW","debu","warn","568175coTUbq","constructor","call","attributes","onBeforeRender","36iAPyEW","tpgRef","input","function *\\( *\\)","object","textureMatrix","TresMeshStandardMaterial","counter","TresGroup","__proto__","6FCYCXG","mixStrength","prototype","tmRef","7984075hcwnzt","TresPlaneGeometry","console","length","color","error","info","init","381837QkMooG","assign","update","uniforms","apply","textureMatrixUniform","4570IBPNXl","toString","table","test"];return(w=function(){return t})()}function M(t,n){const e=w();return(M=function(t,n){return e[t-=478]})(t,n)}_(void 0,(function(){const t=M;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n[t(540)]||{},r=[t(494),t(518),t(480),t(479),"exception",t(490),t(507)];for(let c=0;c<r[t(541)];c++){const n=_.constructor[t(536)][t(495)](_),o=r[c],i=e[o]||n;n[t(533)]=_.bind(_),n[t(489)]=i[t(489)][t(495)](i),e[o]=n}}))();const C=["rotation-x"],j=[I(528),"visible"],S=i({__name:I(499),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const h=I;let v,g;const y=i,b=new t(9.5,10),_=a(),w=a(),M=a(),S=new c,E={mirror:{value:y.mirror},mixStrength:{value:y[h(535)]}},z=([v,g]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,g(),v);for(var T=0;T<3;T++)z[T].wrapS=n,z[T].wrapT=n,z[T].repeat.set(16,16);const R={color:new e("#444"),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},U=t=>{const n=h;t[n(485)].reflectMap=S[n(509)],t[n(485)][n(529)]=S[n(487)],t[n(485)]=Object[n(483)](t.uniforms,E),(t=>{const n=x;t[n(136)]=t.vertexShader[n(131)](n(128),n(111)),t.vertexShader=t[n(136)][n(131)]("#include <project_vertex>",n(145))})(t),(t=>{const n=x;t[n(110)]=t[n(110)][n(131)](n(128),"\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(110)]=t[n(110)][n(131)](n(135),n(109))})(t)};return u((()=>{const t=h;_[t(515)]&&(_[t(515)][t(522)][t(502)]=_.value[t(522)].uv),M.value&&(M[t(515)][t(512)][t(508)]=1,M[t(515)][t(506)]=U),w[t(515)]&&(w[t(515)].add(S),w[t(515)][t(523)]=(n,e,r)=>{S[t(484)](n,e,r)}),y[t(478)]&&M[t(515)]&&(M[t(515)][t(478)]=new e(y[t(478)]))})),(t,n)=>{const e=h;return f(),l(e(532),null,[p(e(513),{ref_key:e(537),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(539),{ref_key:e(525),ref:_,args:[10,10]},null,512),p(e(530),m({ref_key:e(498),ref:M},R),null,16)],8,C),p(e(496),{object:d(b),visible:t[e(503)]},null,8,j)])}}});function E(t){function n(t){const e=M;if(typeof t===e(505))return function(t){}[e(520)](e(492))[e(486)](e(531));1!==(""+t/t)[e(541)]||t%20==0?function(){return!0}[e(520)](e(517)+e(511))[e(521)](e(514)):function(){return!1}[e(520)](e(517)+e(511))[e(486)](e(504)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

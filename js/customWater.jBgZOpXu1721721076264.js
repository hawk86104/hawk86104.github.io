import{a3 as t,a6 as e,C as n,Z as r}from"./three.fnkrvySq1721721076264.js";import{$ as o,T as a,d as s,x as i}from"./@tresjs.tWkmYPO61721721076264.js";import{a as l}from"./index.9ahhXQcR1721721076264.js";import"./index.Q4119pGt1721721076264.js";import{C as u}from"./three-custom-shader-material.UAECXI501721721076264.js";import"./object-hash.n-lQHd521721721076264.js";import"./@amap.b3gYyCW_1721721076264.js";import"./glsl-tokenizer.rVSxTaVo1721721076264.js";import{p as c}from"./gl-noise.BrVtymbx1721721076264.js";import{d as p,b as f,a1 as g,w as h,o as m,D as v,J as d,j as _,u as b,r as w,f as y,g as j,aj as M,ak as x,m as C,al as z}from"./@vue.Q1VpS3901721721076264.js";import{P as S}from"./tweakpane.yHWGBmom1721721076264.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.qTBQgPyz1721721076264.js";import"./@vueuse._hUvP73U1721721076264.js";import"./three-stdlib.Rahz23xb1721721076264.js";import"./@pmndrs.K9H4bZlG1721721076264.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.4pBzkDPe1721721076264.js";import"./all.three.e2UOJjs11721721076264.js";import"./oimophysics.x0jH7fze1721721076264.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.TG1thKJx1721721076264.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.blZv8Npt1721721076264.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.4vQdfXnq1721721076264.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.yJO0y2Sa1721721076264.js";import"./glsl-token-string.qKZvKI-H1721721076264.js";import"./glsl-token-functions.nzsekdRK1721721076264.js";import"./jszip.vimxEq251721721076264.js";const I=O;function O(t,e){const n=k();return(O=function(t,e){return n[t-=454]})(t,e)}!function(t,e){const n=O,r=k();for(;;)try{if(960755===parseInt(n(510))/1*(-parseInt(n(478))/2)+parseInt(n(483))/3*(parseInt(n(470))/4)+-parseInt(n(501))/5+parseInt(n(473))/6+-parseInt(n(498))/7+-parseInt(n(457))/8*(parseInt(n(469))/9)+parseInt(n(485))/10*(parseInt(n(474))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(507)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){G(this,(function(){const t=O,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=P(t(472));e[t(492)](r+"chain")&&n[t(492)](r+t(496))?P():r("0")}))()}();const H=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[O(507)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();H(void 0,(function(){const t=O,e=function(){const t=O;let e;try{e=Function("return (function() "+t(458)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(463)]||{},r=[t(513),t(511),t(484),t(504),t(488),"table","trace"];for(let o=0;o<r[t(464)];o++){const e=H[t(456)].prototype[t(465)](H),a=r[o],s=n[a]||e;e[t(486)]=H[t(465)](H),e.toString=s[t(490)].bind(s),n[a]=e}}))();const F=[I(502)],W=[I(468)];function k(){const t=["vertexShader","TresMesh","180038FciItW","flatShading","while (true) {}","material","vertex","148431OHjhmH","info","20GpvFdX","__proto__","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","exception","needsUpdate","toString","Color","test","convertLinearToSRGB","debu","#52a7f7","input","height","8265992AzymOD","call","DoubleSide","4191725bwmjJF","rotation-x","baseMaterial","error","customWaterMesh","waterColor","apply","waterHighlight","fragment","16SOXYav","warn","tmRef","log","side","fragmentShader","uHeight","constructor","92168AosoZE",'{}.constructor("return this")( )',"counter","gger","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","TresBoxGeometry","console","length","bind","value","#b3ffff","args","342mhVCcJ","92hqPfbN","Flatshading","init","11024646MNDKjU","10354553RMqAhI","brightness"];return(k=function(){return t})()}const D=p({__name:I(505),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(495)},waterHighlight:{default:I(467)},brightness:{default:1},baseMaterial:{default:t}},setup(s){const i=I,l=s,p=f(null),w={vertex:i(487),fragment:i(461)},y={uTime:{value:0},waterColor:{value:new(e[i(491)])(l[i(506)])[i(493)]()},waterHighlight:{value:new(e[i(491)])(l[i(508)])[i(493)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:l.brightness},uHeight:{value:l[i(497)]}},{onLoop:j}=o();return j((({elapsed:t})=>{y.uTime.value=-t/5})),g((()=>{const t=i;l[t(497)]&&(y[t(455)][t(466)]=l[t(497)]),l[t(506)]&&(y.waterColor.value=new n(l[t(506)])[t(493)]()),l[t(508)]&&(y[t(508)][t(466)]=new(e[t(491)])(l.waterHighlight)[t(493)]()),l[t(475)]&&(y.brightness[t(466)]=l[t(475)])})),h((()=>l[i(471)]),(t=>{const e=i;p.value.material[e(489)]=!0})),h((()=>l[i(503)]),(t=>{const n=i,r=new u({baseMaterial:e[t],vertexShader:c(w[n(482)]),fragmentShader:w[n(509)],uniforms:y,flatShading:l[n(471)],side:e[n(500)],roughness:.2,metalness:.1,silent:!0});p[n(466)][n(481)].dispose(),p[n(466)][n(481)]=r})),(e,n)=>{const o=i;return m(),v(o(477),{ref_key:o(512),ref:p,"rotation-x":-Math.PI/2},[d(o(462),{args:[5,5,e[o(497)],64,64,1]},null,8,W),_(b(a),{baseMaterial:t,vertexShader:b(c)(w[o(482)]),fragmentShader:w[o(509)],uniforms:y,side:r,roughness:.2,metalness:.1,flatShading:e[o(471)],silent:""},null,8,[o(503),o(476),o(454),o(514),o(479)])],8,F)}}});function P(t){function e(t){const n=O;if("string"==typeof t)return function(t){}.constructor(n(480))[n(507)](n(459));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(n(494)+n(460))[n(499)]("action"):function(){return!1}[n(456)](n(494)+n(460))[n(507)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const B=E;!function(t,e){const n=E,r=J();for(;;)try{if(541734===parseInt(n(340))/1+-parseInt(n(317))/2*(-parseInt(n(305))/3)+parseInt(n(309))/4+parseInt(n(301))/5+-parseInt(n(324))/6+-parseInt(n(341))/7*(-parseInt(n(338))/8)+-parseInt(n(318))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const A=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[E(335)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){A(this,(function(){const t=E,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(334),"i"),r=$(t(284));e[t(308)](r+t(348))&&n[t(308)](r+t(289))?$():r("0")}))()}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();N(void 0,(function(){const t=E;let e;try{e=Function("return (function() "+t(283)+");")()}catch(o){e=window}const n=e[t(292)]=e[t(292)]||{},r=[t(339),t(280),t(303),t(342),t(312),t(325),t(319)];for(let a=0;a<r[t(291)];a++){const e=N.constructor.prototype[t(320)](N),o=r[a],s=n[o]||e;e[t(337)]=N[t(320)](N),e.toString=s[t(297)].bind(s),n[o]=e}}))();const L=d(B(310),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),R=d(B(344),{intensity:.5},null,-1),Z=d(B(294),{position:[15,15,15],intensity:1},null,-1);function E(t,e){const n=J();return(E=function(t,e){return n[t-=280]})(t,e)}function J(){const t=["MeshToonMaterial","6265086LJOKAu","table","#b3ffff","target","pos-x.jpg","浪头颜色","MeshStandardMaterial","debu","#52a7f7","baseMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","neg-y.jpg","__proto__","1528344wUKQTq","log","872255yGdCio","35LQFrZj","error","while (true) {}","TresAmbientLight","#627179","MeshPhysicalMaterial","addBinding","chain","warn","pos-y.jpg","call",'{}.constructor("return this")( )',"init","string","counter","MeshPhongMaterial","Flatshading","input","水体颜色","length","console","brightness","TresDirectionalLight","MeshBasicMaterial","constructor","toString","waterColor","ACESFilmicToneMapping","waterHighlight","1602850KmuUiu","label","info","MeshLambertMaterial","85053OCvJhJ","MeshNormalMaterial","addBlade","test","3223956lvkydn","TresPerspectiveCamera","change","exception","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","#3a78a2","gger","customWater","54vxPFcv","19202319lGyNyO","trace","bind","MeshDepthMaterial","height"];return(J=function(){return t})()}const U=p({__name:B(316),setup(t){const n=B,r=w({alpha:!0,toneMapping:e[n(299)],windowSize:!0,clearColor:10066329}),o=w({enableDamping:!0,autoRotate:!1}),a=w({cellSize:.6,cellThickness:1.1,cellColor:n(345),sectionColor:n(314),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:n(332),waterHighlight:n(326),brightness:1,baseMaterial:n(346)}),c=new S;return c.addBinding(u,n(322),{label:"高度",min:.1,max:5,step:.1}),c[n(347)](u,n(298),{label:n(290)}),c[n(347)](u,n(300),{label:n(329)}),c[n(347)](u,n(293),{label:"亮度",min:0,max:1,step:.01}),c[n(347)](u,n(288),{label:"Flatshading"}),c[n(307)]({view:"list",label:"材质",options:[{text:n(346),value:n(346)},{text:n(295),value:n(295)},{text:n(306),value:n(306)},{text:n(330),value:"MeshStandardMaterial"},{text:n(287),value:"MeshPhongMaterial"},{text:n(323),value:n(323)},{text:n(304),value:"MeshLambertMaterial"},{text:"MeshDepthMaterial",value:n(321)}],value:u[n(333)]}),c.on(n(311),(t=>{const e=n;"材质"===t[e(327)][e(302)]&&(u[e(333)]=t.value)})),(t,e)=>{const c=n;return m(),y(b(i),C(r,{"window-size":""}),{default:j((()=>[L,_(b(s),M(x(o)),null,16),R,Z,_(D,M(x(u)),null,16),_(b(T),C({args:[3,3]},a,{position:[0,-.5,0]}),null,16),(m(),y(z,null,{default:j((()=>[_(b(l),{files:[c(328),"neg-x.jpg",c(281),c(336),"pos-z.jpg","neg-z.jpg"],path:c(313)})])),_:1}))])),_:1},16)}}});function $(t){function e(t){const n=E;if(typeof t===n(285))return function(t){}.constructor(n(343)).apply(n(286));1!==(""+t/t)[n(291)]||t%20==0?function(){return!0}[n(296)](n(331)+n(315))[n(282)]("action"):function(){return!1}[n(296)]("debu"+n(315)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{U as default};

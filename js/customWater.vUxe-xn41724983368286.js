import{a6 as t,C as e,Z as n,a9 as r}from"./three.p-9BQwc31724983368286.js";import{$ as a,T as o,d as s,x as i}from"./@tresjs.OrqGCbtj1724983368286.js";import{a as l}from"./index.LdVI1Df31724983368286.js";import"./index.RFvE9dAj1724983368286.js";import{C as u}from"./three-custom-shader-material.y6er40ya1724983368286.js";import"./object-hash.X2exW7z_1724983368286.js";import"./@amap.-Bisu7YL1724983368286.js";import"./glsl-tokenizer.EVM27uTn1724983368286.js";import{p as c}from"./gl-noise.BrVtymbx1724983368286.js";import{d as p,b as f,a1 as g,w as h,o as m,D as v,J as d,j as _,u as b,r as w,f as j,g as y,aj as M,ak as x,m as z,al as C}from"./@vue.Q1VpS3901724983368286.js";import{P as T}from"./tweakpane.yHWGBmom1724983368286.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.7Pfa_P971724983368286.js";import"./@vueuse.n6I5WvfU1724983368286.js";import"./three-stdlib._CB_uvPa1724983368286.js";import"./@pmndrs.OCGdGm_L1724983368286.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.0pvBP-hp1724983368286.js";import"./all.three.RQy00bw_1724983368286.js";import"./oimophysics.x0jH7fze1724983368286.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.dR_Md0ZD1724983368286.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.S8gI9gok1724983368286.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.j17yu-hJ1724983368286.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.aFG-ipIR1724983368286.js";import"./glsl-token-string.rzq7L3HM1724983368286.js";import"./glsl-token-functions.DersDqx01724983368286.js";import"./jszip.VoLYwi951724983368286.js";const S=F;!function(t,e){const n=F,r=k();for(;;)try{if(649520===parseInt(n(365))/1*(-parseInt(n(361))/2)+-parseInt(n(379))/3+-parseInt(n(358))/4+parseInt(n(363))/5+parseInt(n(384))/6*(-parseInt(n(368))/7)+-parseInt(n(342))/8*(-parseInt(n(371))/9)+parseInt(n(373))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(386)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){B(this,(function(){const t=F,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(378),"i"),r=O(t(389));e[t(362)](r+t(359))&&n[t(362)](r+"input")?O():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(386)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function k(){const t=["flatShading","error","init","height","log","uHeight","material","vertex","Color","info","string","value","fragment","__proto__","vertexShader","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","94144gILWJY","while (true) {}","waterHighlight","waterColor","debu","rotation-x","args","toString","warn","counter","#52a7f7","side","length","stateObject","customWaterMesh","fragmentShader","1035392JNjPzD","chain","action","1738CpRJiu","test","4513880dAEHYo","Flatshading","868dsIBjX","call","constructor","131131kvewCQ","exception","brightness","90kcvTvq","gger","12845300xGhcFk","prototype","convertLinearToSRGB","bind","TresMesh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","971595cpMNNh","TresBoxGeometry","MeshPhysicalMaterial","DoubleSide","console","102kqpBSd","#b3ffff","apply"];return(k=function(){return t})()}G(void 0,(function(){const t=F,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e[t(383)]=e[t(383)]||{},r=[t(391),t(350),t(335),t(388),t(369),"table","trace"];for(let a=0;a<r[t(354)];a++){const e=G[t(367)][t(374)].bind(G),o=r[a],s=n[o]||e;e[t(339)]=G.bind(G),e[t(349)]=s.toString[t(376)](s),n[o]=e}}))();const H=[S(347)],P=[S(348)],D=p({__name:S(356),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:S(352)},waterHighlight:{default:S(385)},brightness:{default:1},baseMaterial:{default:t[S(381)]}},setup(r){const s=S,i=r,l=f(null),p={vertex:s(341),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},w={uTime:{value:0},waterColor:{value:new(t[s(395)])(i[s(345)])[s(375)]()},waterHighlight:{value:new(t[s(395)])(i.waterHighlight)[s(375)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(370)]},uHeight:{value:i.height}},{onLoop:j}=a();return j((({elapsed:t})=>{const e=s;w.uTime[e(337)]=-t/5})),g((()=>{const n=s;i.height&&(w[n(392)][n(337)]=i[n(390)]),i[n(345)]&&(w[n(345)].value=new e(i[n(345)]).convertLinearToSRGB()),i[n(344)]&&(w[n(344)][n(337)]=new(t[n(395)])(i[n(344)])[n(375)]()),i.brightness&&(w[n(370)][n(337)]=i[n(370)])})),h((()=>i.Flatshading),(t=>{l[s(337)].material.needsUpdate=!0})),h((()=>i.baseMaterial),(e=>{const n=s,r=new u({baseMaterial:t[e],vertexShader:c(p[n(394)]),fragmentShader:p[n(338)],uniforms:w,flatShading:i[n(364)],side:t[n(382)],roughness:.2,metalness:.1,silent:!0});l[n(337)][n(393)].dispose(),l[n(337)].material=r})),(e,r)=>{const a=s;return m(),v(a(377),{ref_key:"tmRef",ref:l,"rotation-x":-Math.PI/2},[d(a(380),{args:[5,5,e[a(390)],64,64,1]},null,8,P),_(b(o),{baseMaterial:t[a(381)],vertexShader:b(c)(p[a(394)]),fragmentShader:p[a(338)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:e[a(364)],silent:""},null,8,["baseMaterial",a(340),a(357),a(353),a(387)])],8,H)}}});function F(t,e){const n=k();return(F=function(t,e){return n[t-=335]})(t,e)}function O(t){function e(t){const n=F;if(typeof t===n(336))return function(t){}.constructor(n(343))[n(386)](n(351));1!==(""+t/t)[n(354)]||t%20==0?function(){return!0}.constructor(n(346)+"gger")[n(366)](n(360)):function(){return!1}[n(367)]("debu"+n(372)).apply(n(355)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=L;!function(t,e){const n=L,r=Z();for(;;)try{if(544527===-parseInt(n(483))/1*(-parseInt(n(499))/2)+-parseInt(n(471))/3+parseInt(n(493))/4+-parseInt(n(455))/5+parseInt(n(488))/6+-parseInt(n(454))/7+parseInt(n(474))/8*(parseInt(n(452))/9))break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const N=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(443)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function L(t,e){const n=Z();return(L=function(t,e){return n[t-=443]})(t,e)}!function(){N(this,(function(){const t=L,e=new RegExp(t(451)),n=new RegExp(t(497),"i"),r=V(t(473));e.test(r+t(444))&&n[t(459)](r+"input")?V():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(443)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();R(void 0,(function(){const t=L,e=function(){const t=L;let e;try{e=Function(t(463)+'{}.constructor("return this")( ));')()}catch(n){e=window}return e}(),n=e[t(489)]=e[t(489)]||{},r=[t(466),"warn",t(485),t(472),t(447),t(467),t(479)];for(let a=0;a<r[t(457)];a++){const e=R[t(458)][t(482)][t(498)](R),o=r[a],s=n[o]||e;e.__proto__=R[t(498)](R),e[t(446)]=s[t(446)].bind(s),n[o]=e}}))();const A=d(W(476),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),E=d("TresAmbientLight",{intensity:.5},null,-1),J=d("TresDirectionalLight",{position:[15,15,15],intensity:1},null,-1);function Z(){const t=["MeshLambertMaterial","5232836CFrDZh","1090135oVGBPo","neg-x.jpg","length","constructor","test","label","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","brightness","return (function() ","#b3ffff","pos-y.jpg","log","table","target","gger","MeshNormalMaterial","1256892DdBBMh","error","init","2124168VAuGQO","string","TresPerspectiveCamera","Flatshading","MeshToonMaterial","trace","neg-y.jpg","waterHighlight","prototype","887EeLVmB","MeshPhongMaterial","info","MeshPhysicalMaterial","customWater","2311050TLdJNf","console","#627179","addBinding","baseMaterial","3034352xnFcYz","waterColor","counter","MeshStandardMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","1172Exzedh","change","apply","chain","stateObject","toString","exception","addBlade","浪头颜色","MeshDepthMaterial","function *\\( *\\)","9CTJaIl"];return(Z=function(){return t})()}const $=p({__name:W(487),setup(t){const e=W,n=w({alpha:!0,toneMapping:r,windowSize:!0,clearColor:10066329}),a=w({enableDamping:!0,autoRotate:!1}),o=w({cellSize:.6,cellThickness:1.1,cellColor:e(490),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=w({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:e(464),brightness:1,baseMaterial:e(486)}),c=new T;return c[e(491)](u,"height",{label:"高度",min:.1,max:5,step:.1}),c[e(491)](u,e(494),{label:"水体颜色"}),c[e(491)](u,e(481),{label:e(449)}),c[e(491)](u,e(462),{label:"亮度",min:0,max:1,step:.01}),c[e(491)](u,"Flatshading",{label:e(477)}),c[e(448)]({view:"list",label:"材质",options:[{text:e(486),value:"MeshPhysicalMaterial"},{text:"MeshBasicMaterial",value:"MeshBasicMaterial"},{text:e(470),value:"MeshNormalMaterial"},{text:e(496),value:e(496)},{text:"MeshPhongMaterial",value:e(484)},{text:e(478),value:e(478)},{text:e(453),value:e(453)},{text:e(450),value:e(450)}],value:u[e(492)]}),c.on(e(500),(t=>{const n=e;"材质"===t[n(468)][n(460)]&&(u[n(492)]=t.value)})),(t,r)=>{const c=e;return m(),j(b(i),z(n,{"window-size":""}),{default:y((()=>[A,_(b(s),M(x(a)),null,16),E,J,_(D,M(x(u)),null,16),_(b(I),z({args:[3,3]},o,{position:[0,-.5,0]}),null,16),(m(),j(C,null,{default:y((()=>[_(b(l),{files:["pos-x.jpg",c(456),c(465),c(480),"pos-z.jpg","neg-z.jpg"],path:c(461)})])),_:1}))])),_:1},16)}}});function V(t){function e(t){const n=L;if(typeof t===n(475))return function(t){}[n(458)]("while (true) {}").apply(n(495));1!==(""+t/t)[n(457)]||t%20==0?function(){return!0}[n(458)]("debu"+n(469)).call("action"):function(){return!1}[n(458)]("debugger")[n(443)](n(445)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{$ as default};

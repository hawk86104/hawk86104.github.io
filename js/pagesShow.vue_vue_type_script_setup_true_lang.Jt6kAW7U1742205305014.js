import{_ as t,cr as n,cs as e,ct as o,cu as r,C as i,l as u,c1 as s,ak as c,am as a}from"./three.LxxvsMJG1742205305014.js";import{P as l,e as f,o as p}from"./@tresjs.nk0nhZ9a1742205305014.js";import{z as d}from"./three-custom-shader-material.8lD1n5aS1742205305014.js";import{b as h,a as g}from"./buildingsCustomShaderMaterial.hq-IAd4G1742205305014.js";import{d as m,b as y,a2 as w,w as b,o as I,H as v,u as _,r as C,a3 as x,e as S,f as R,g as A,N as T,j as M,aj as j,ak as E,F as O,M as B,J as F,m as L}from"./@vue.NRI7TcgI1742205305014.js";function k(){const t=["input","init","action","info","4bvGXvW","trace","22agEJaP","counter","name","string","ROADS","1923352KfxETl","176DFLbNS","chain","3177447fbfevD","debu","1572170zZZGoN","34331vZYDll","test","length",'{}.constructor("return this")( )',"constructor","bind","582050OMUlPF","apply","10678131SWiMml","6wAfnMk","log","prototype","console","__proto__","gger","503391UnNcsL","stateObject","error","table","function *\\( *\\)","while (true) {}","CITY_UNTRIANGULATED"];return(k=function(){return t})()}!function(t,n){const e=Z,o=k();for(;;)try{if(686483===parseInt(e(409))/1*(-parseInt(e(398))/2)+-parseInt(e(385))/3*(parseInt(e(396))/4)+parseInt(e(376))/5+-parseInt(e(379))/6*(parseInt(e(406))/7)+parseInt(e(403))/8+-parseInt(e(378))/9+parseInt(e(408))/10*(parseInt(e(404))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const G=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(377)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Z(t,n){const e=k();return(Z=function(t,n){return e[t-=374]})(t,n)}!function(){G(this,(function(){const t=Z,n=new RegExp(t(389)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=D(t(393));n[t(410)](o+t(405))&&e[t(410)](o+t(392))?D():o("0")}))()}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(377)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();z(void 0,(function(){const t=Z,n=function(){const t=Z;let n;try{n=Function("return (function() "+t(412)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(382)]||{},o=[t(380),"warn",t(395),t(387),"exception",t(388),t(397)];for(let r=0;r<o[t(411)];r++){const n=z.constructor[t(381)].bind(z),i=o[r],u=e[i]||n;n[t(383)]=z[t(375)](z),n.toString=u.toString[t(375)](u),e[i]=n}}))();const N=async()=>{const t=await l("./plugins/digitalCity/model/shanghai.FBX");let n=null,e=null,o=null;return t.traverse((t=>{const r=Z;t[r(400)]===r(391)&&(n=t),"LANDMASS"===t[r(400)]&&(e=t),t.name===r(402)&&(o=t)})),{model:t,city:n,land:e,roads:o}};function D(t){function n(t){const e=Z;if(typeof t===e(401))return function(t){}[e(374)](e(390))[e(377)](e(399));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(e(407)+e(384)).call(e(394)):function(){return!1}[e(374)](e(407)+e(384))[e(377)](e(386)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const W=J;!function(t,n){const e=J,o=U();for(;;)try{if(693640===-parseInt(e(316))/1+parseInt(e(283))/2+-parseInt(e(279))/3*(parseInt(e(302))/4)+parseInt(e(327))/5*(-parseInt(e(328))/6)+parseInt(e(273))/7+parseInt(e(298))/8+-parseInt(e(318))/9*(-parseInt(e(332))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(281)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){H(this,(function(){const t=J,n=new RegExp(t(335)),e=new RegExp(t(292),"i"),o=K(t(286));n[t(313)](o+t(272))&&e.test(o+t(270))?K():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[J(281)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();$(void 0,(function(){const t=J,n=function(){const t=J;let n;try{n=Function(t(289)+t(295)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(282)]||{},o=["log",t(321),"info",t(331),t(269),t(284),t(306)];for(let r=0;r<o.length;r++){const n=$[t(330)][t(285)].bind($),i=o[r],u=e[i]||n;n.__proto__=$.bind($),n[t(319)]=u.toString.bind(u),e[i]=n}}))();const P=[W(271)];function U(){const t=["forEach","model","debu","test","computeBoundingBox","DoubleSide","521582TaIyrh","boundingBox","9CEiTtd","toString","isArray","warn","gger","#112233","dispose","landColor","action","5umXoIx","7120314GMRPnb","primitive","constructor","error","20540680qraCNR","opacity","#ffffff","function *\\( *\\)","#e523ff","counter","uColor","exception","input","object","chain","3244444CzoRNk","value","computeBoundingSphere","uOpacity","setStyle","side","2063931FeONnL","#ffff00","apply","console","2463252XfThVN","table","prototype","init","renderOrder","material","return (function() ","bulidingsColor","clone","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gradient","topColor",'{}.constructor("return this")( )',"uGradient","city","229672KPqoZO","__csm","color","while (true) {}","8vmtFpC","length","call","Color","trace","string","land","uniforms"];return(U=function(){return t})()}const q=m({__name:"buildingsModelCustomShader",props:{model:{},bulidingsColor:{default:W(336)},landColor:{default:W(323)},topColor:{default:W(280)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=W,o=n,r=y(0),i=o[e(311)][e(297)];i[e(287)]=1001;const u=o[e(311)].land;(()=>{const n=e,{geometry:u}=i;u[n(314)](),u[n(275)]();const{max:s,min:c}=u[n(317)];if(i[n(288)][n(299)])return;const a=new d({baseMaterial:i.material,vertexShader:h,fragmentShader:g,silent:!0,uniforms:{uMax:{value:s},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(305)])(o[n(290)])},uOpacity:{value:o[n(333)]},uLightColor:{value:new(t[n(305)])(n(334))},uTopColor:{value:new(t[n(305)])(o[n(294)])},uTime:r,uGradient:{value:o[n(293)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(315)]});i[n(288)][n(324)](),i.material=a})();const{onLoop:s}=f();s((({delta:t})=>{r[e(274)]+=t})),w((()=>{const n=e;o[n(290)]&&i.material.uniforms[n(268)][n(274)][n(277)](o[n(290)]),o.landColor&&((n,r)=>{const i=e;let s;"cu"===n||n===i(308)&&(s=Array[i(320)](u[i(288)])?u[i(288)]:[u[i(288)]],s[i(310)]((n=>{const e=i;n[r][e(277)](o[e(325)]),n[e(278)]=t[e(315)]})))})(n(308),n(300)),o[n(333)]&&(i.material.uniforms[n(276)][n(274)]=o[n(333)])})),b(o,((t,n)=>{const o=e;i[o(288)][o(309)][o(296)][o(274)]=t.gradient}));const c=o[e(311)][e(311)][e(291)]();return(t,n)=>{const o=e;return I(),v(o(329),{object:_(c)},null,8,P)}}});function J(t,n){const e=U();return(J=function(t,n){return e[t-=267]})(t,n)}function K(t){function n(t){const e=J;if(typeof t===e(307))return function(t){}.constructor(e(301))[e(281)](e(267));1!==(""+t/t)[e(303)]||t%20==0?function(){return!0}.constructor("debu"+e(322))[e(304)](e(326)):function(){return!1}[e(330)](e(312)+e(322)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function X(){const t=["primitive","style","log","console","test","debu","clone","call","Wireframe","3447eNoFsA","111289IGrxGh","__proto__","linewidth","innerWidth","set","object","opacity","function *\\( *\\)","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","1765923IUvNHb","value","Shader","constructor","geometry","18728ewlqQU","toString","error","counter","input","uColor","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","width","warn","material","innerHeight","resolution","while (true) {}","string","builds","#FFF","592648mvECYg","prototype","684576LWmuGc","trace","applyMatrix4","uniforms","gger","1988105GquuKP","1495086yjWWzx","apply","buildingsLines","fromEdgesGeometry","init","color","2pfYvSR",'{}.constructor("return this")( )'];return(X=function(){return t})()}const Y=et;!function(t,n){const e=et,o=X();for(;;)try{if(314031===-parseInt(e(454))/1+-parseInt(e(500))/2*(-parseInt(e(463))/3)+parseInt(e(488))/4+parseInt(e(493))/5+parseInt(e(494))/6+-parseInt(e(486))/7+-parseInt(e(468))/8*(parseInt(e(453))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const V=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(495)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){V(this,(function(){const t=et,n=new RegExp(t(461)),e=new RegExp(t(475),"i"),o=ot(t(498));n[t(506)](o+"chain")&&e[t(506)](o+t(472))?ot():o("0")}))()}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[et(495)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();Q(void 0,(function(){const t=et,n=function(){const t=et;let n;try{n=Function("return (function() "+t(501)+");")()}catch(e){n=window}return n}(),e=n[t(505)]=n[t(505)]||{},o=[t(504),t(478),"info",t(470),"exception","table",t(489)];for(let r=0;r<o[t(474)];r++){const n=Q[t(466)][t(487)][t(476)](Q),i=o[r],u=e[i]||n;n[t(455)]=Q[t(476)](Q),n[t(469)]=u.toString[t(476)](u),e[i]=n}}))();const tt=[Y(459)],nt=m({__name:Y(496),props:{builds:{},width:{default:1},color:{default:Y(485)},opacity:{default:1},style:{default:Y(510)}},setup(t){const s=Y,c=t;let a=null,l=null;if(c.style===s(510)){const t=new n(c.builds.geometry);let i=(new e)[s(497)](t),u=new o({color:c[s(499)],linewidth:c[s(477)],opacity:c[s(460)],transparent:!0,depthWrite:!0,depthTest:!0});u[s(481)][s(458)](window[s(457)],window[s(480)]),a=new r(i,u),a[s(490)](c[s(484)].matrix[s(508)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(c[s(499)])},uOpacity:{value:c[s(460)]}},vertexShader:s(462),fragmentShader:" \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      "};const t=new n(c[s(484)][s(467)]),e=new u(l);a=new LineSegments(t,e),a[s(490)](c[s(484)].matrix[s(508)]()),a[s(479)][s(456)]=c.width,a.renderOrder=1e3}return w((()=>{const t=s;c[t(503)]===t(465)&&(c[t(499)]&&(l[t(491)][t(473)][t(464)]=new i(c[t(499)])),c.opacity&&(l[t(491)].uOpacity.value=c.opacity)),c[t(503)]===t(510)&&(c[t(499)]&&(a[t(479)][t(499)]=new i(c[t(499)])),c[t(460)]&&(a[t(479)][t(460)]=c[t(460)])),c[t(477)]&&(a.material[t(456)]=c[t(477)])})),(t,n)=>{const e=s;return I(),v(e(502),{object:_(a)},null,8,tt)}}});function et(t,n){const e=X();return(et=function(t,n){return e[t-=453]})(t,n)}function ot(t){function n(t){const e=et;if(typeof t===e(483))return function(t){}[e(466)](e(482)).apply(e(471));1!==(""+t/t)[e(474)]||t%20==0?function(){return!0}[e(466)](e(507)+e(492))[e(509)]("action"):function(){return!1}[e(466)](e(507)+e(492))[e(495)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=st;function it(){const t=["showAxesHelper","TresAmbientLight","warn","#000","error","info","1838934cuLnpp","359844mJoJsD","builds","init","1764380zWgDKA","function *\\( *\\)","733374litMga","TresGridHelper","toString","constructor","table","disableRender","bind","564240irMffu","autoRotate","ability","showBuildings","prototype","test","$slots","#ffffff","return (function() ","__proto__","console","trace","debu","TresCanvas","input","tcRef","gger","stateObject","18760RRptsh","length","#000000","model","action","pagesShow","call","apply","1036MTrEtr","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","TresDirectionalLight","while (true) {}","316857uVHZkv"];return(it=function(){return t})()}!function(t,n){const e=st,o=it();for(;;)try{if(192545===parseInt(e(213))/1+-parseInt(e(181))/2+-parseInt(e(226))/3+parseInt(e(221))/4+parseInt(e(224))/5+parseInt(e(220))/6+-parseInt(e(207))/7*(parseInt(e(199))/8))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(206)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function st(t,n){const e=it();return(st=function(t,n){return e[t-=175]})(t,n)}!function(){ut(this,(function(){const t=st,n=new RegExp(t(225)),e=new RegExp(t(209),"i"),o=pt(t(223));n[t(186)](o+"chain")&&e[t(186)](o+t(195))?pt():o("0")}))()}();const ct=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[st(206)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();ct(void 0,(function(){const t=st;let n;try{n=Function(t(189)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(191)]=n[t(191)]||{},o=[t(208),t(216),t(219),t(218),"exception",t(178),t(192)];for(let i=0;i<o[t(200)];i++){const n=ct[t(177)][t(185)].bind(ct),r=o[i],u=e[r]||n;n[t(190)]=ct[t(180)](ct),n[t(176)]=u.toString.bind(u),e[r]=n}}))();const at={key:1,args:[1e3],position:[0,19,0]},lt={key:2,args:[6e3,100],position:[0,19,0]},ft=m({__name:rt(204),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=rt;let e,o;const r=t,i=C({clearColor:n(201),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r[n(179)]}),u=C({autoRotate:r[n(182)],enableDamping:!0});let l=null;r[n(184)]&&([e,o]=x((()=>N())),e=await e,o(),l=e);const f=y(),d=y();return(t,e)=>{const o=n,s=S(o(194));return I(),R(s,L({ref_key:o(196),ref:d},i,{"window-size":""}),{default:A((()=>[T("TresPerspectiveCamera",{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),M(_(p),j(E(u)),null,16),e[0]||(e[0]=T(o(215),{color:o(188)},null,-1)),e[1]||(e[1]=T(o(211),{position:[100,100,0],intensity:.5,color:o(188)},null,-1)),r.showBuildings&&_(l)?(I(),v(O,{key:0},[M(q,{model:_(l)},null,8,[o(202)]),M(nt,{builds:_(l).city,color:o(217)},null,8,[o(222)])],64)):B("",!0),F(t[o(187)],o(183)),r[o(214)]?(I(),v("TresAxesHelper",at)):B("",!0),r.showGridHelper?(I(),v(o(175),lt)):B("",!0)])),_:3},16)}}});function pt(t){function n(t){const e=st;if(typeof t===e(210))return function(t){}.constructor(e(212))[e(206)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(177)](e(193)+e(197))[e(205)](e(203)):function(){return!1}[e(177)](e(193)+e(197))[e(206)](e(198)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{q as _,nt as a,ft as b,N as l};

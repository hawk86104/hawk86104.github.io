import"./@fesjs.28Jx3VJe1738919103432.js";import{_ as n}from"./jszip.yUwr59ji1738919103432.js";import{F as t}from"./file-saver.ED-h3hys1738919103432.js";import{_ as e}from"./three.CYhYNU4g1738919103432.js";const s=c;!function(n,t){const e=c,s=r();for(;;)try{if(584017===parseInt(e(437))/1+-parseInt(e(450))/2*(parseInt(e(394))/3)+-parseInt(e(410))/4*(parseInt(e(365))/5)+-parseInt(e(447))/6*(-parseInt(e(424))/7)+-parseInt(e(381))/8*(-parseInt(e(433))/9)+parseInt(e(397))/10+parseInt(e(378))/11)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function r(){const n=["url",".json","toLowerCase","url:images/","loadAsync","data:image/GIF;base64,","result","apply","image/gif","prototype","9VDFkZE","onerror","table","8155360vUuCZv","load","message","application/octet-stream","parse","data:image/WEBP;base64,","file","constructor","console","blob","counter","image/png",'{}.constructor("return this")( )',"51132xANVHB","bind","async","data:image/jpeg;base64,","slice","push","onloadend","gger","image/bmp","base64","Unknown","return (function() ","chain","string","678706svEbMC","stringify","catch","Cache","test","log","toString","FileLoader","data","17757HFgpzG","function *\\( *\\)","WEBP","length","326293zbeAHr","scene","toUpperCase","__proto__","url:geometries/","url:","input","config.zip","readAsDataURL","generateAsync","18oNLMXA","forEach","JPEG","624318AlPvnt",";base64,","get","setResponseType","then","PNG","uuid","image/jpeg","data:image/gif;base64,","debu","call","action","files","355bIugHG","folder","enabled","data:image/","exception","geometries","GIF","app.json","startsWith","type","data:image/png;base64,","error","data:image/PNG;base64,","8757221aPcYIQ","data:","split","808MheOHv","stateObject","images"];return(r=function(){return n})()}!function(){o(this,(function(){const n=c,t=new RegExp(n(434)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=d("init");t[n(428)](s+n(422))&&e[n(428)](s+n(443))?d():s("0")}))()}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[c(391)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();async function i(n){const t=s,o=new(e[t(431)]);return new Promise(((e,s)=>{const r=t;o[r(398)](n,(n=>e(JSON[r(401)](n))),void 0,(n=>s(n)))}))}function c(n,t){const e=r();return(c=function(n,t){return e[n-=360]})(n,t)}async function u(n){const t=s,o=new(e[t(431)]);return new Promise(((e,r)=>{const a=t;o[a(453)]("blob"),o[a(398)](n,(t=>{const o=a,i=new FileReader;i[o(416)]=()=>{const t=o,r=function(n){const t=s,e=n[t(380)](".").pop()[t(386)]();return{jpg:t(457),jpeg:"image/jpeg",png:t(408),gif:t(392),bmp:t(418),webp:"image/webp"}[e]||t(400)}(n),a=i.result[t(380)](",")[1];e(t(379)+r+";base64,"+a)},i.onerror=n=>{r(n)},i[o(445)](t)}),void 0,(n=>r(n)))}))}a(void 0,(function(){const n=c,t=function(){const n=c;let t;try{t=Function(n(421)+n(409)+");")()}catch(e){t=window}return t}(),e=t[n(405)]=t[n(405)]||{},s=[n(429),"warn","info",n(376),n(369),n(396),"trace"];for(let o=0;o<s[n(436)];o++){const t=a[n(404)][n(393)][n(411)](a),r=s[o],i=e[r]||t;t[n(440)]=a[n(411)](a),t[n(430)]=i[n(430)].bind(i),e[r]=t}}))(),e[s(427)][s(367)]=!0;const p=t=>{const o=s,r=new(e[o(431)]);return r[o(453)]("blob"),new Promise(((e,s)=>{r.load(t,(async t=>{const s=c;e(await n[s(388)](t))}),void 0,(n=>s(n)))}))},l=n=>{const t=s,e=n.substring(0,15),o=t(413),r=t(375),a=t(377),i=t(360),c=t(389),u=t(402);return o.startsWith(e)||"data:image/JPEG;base64,"[t(373)](e)?t(449):r[t(373)](e)||a[t(373)](e)?t(455):i[t(373)](e)||c[t(373)](e)?t(371):"data:image/webp;base64,"[t(373)](e||u[t(373)](e))?t(435):t(420)},f=e=>{const o=s,r=[];e[o(438)][o(370)]&&e[o(438)].geometries[o(448)]((n=>{const t=o;"BufferGeometry"===n[t(374)]&&(r.push({uuid:n.uuid,data:n[t(432)]}),n[t(432)]=t(441)+n[t(456)]+".json")}));const a=[];e[o(438)][o(383)]&&e.scene[o(383)][o(448)]((n=>{const t=o;n.url&&(a[t(415)]({uuid:n[t(456)],url:n[t(384)]}),n[t(384)][t(374)]?n.url=t(387)+n[t(456)]+"."+n[t(384)].type+t(385):n[t(384)]=t(387)+n[t(456)]+"."+l(n[t(384)]))}));const i=new n;if(r[o(436)]){const n=i[o(366)](o(370));r[o(448)]((t=>{const e=o;n[e(403)](t.uuid+e(385),JSON.stringify(t[e(432)]))}))}if(a.length){const n=i[o(366)](o(383));a[o(448)]((t=>{const e=o;t[e(384)].type?n.file(t[e(456)]+"."+t.url[e(374)]+e(385),JSON[e(425)](t[e(384)])):n[e(403)](t[e(456)]+"."+l(t[e(384)]),t.url.split(e(451)).pop(),{base64:!0})}))}const c=JSON[o(425)](e);return i.file(o(372),c),i[o(446)]({type:o(406)})[o(454)]((n=>{const e=o;t.saveAs(n,e(444))}))},g=(n,t,e)=>{const o=s;n[o(370)]<=0&&n[o(383)]<=0&&e(t)},m=(t,e)=>{const o=s;let r=null;return n.loadAsync(t)[o(454)]((n=>{const t=o;n[t(364)][t(372)]?n[t(364)][t(372)][t(412)]("string")[t(454)]((o=>{var a,i;const c=t;r=JSON[c(401)](o);const u=(n=>{var t,e;const o=s,r={geometries:0,images:0};return null==(t=n[o(438)].geometries)||t[o(448)]((n=>{const t=o;n[t(432)][t(373)](t(442))&&r[t(370)]++})),null==(e=n[o(438)][o(383)])||e[o(448)]((n=>{const t=o;n.url[t(373)]("url:")&&r[t(383)]++})),r})(r);g(u,r,e),null==(a=r[c(438)][c(370)])||a[c(448)]((t=>{const s=c;t.data[s(373)](s(442))&&n.files[t[s(432)][s(414)](4)][s(412)](s(423))[s(454)]((n=>{t[s(432)]=JSON.parse(n),u.geometries--,g(u,r,e)}))})),null==(i=r[c(438)][c(383)])||i[c(448)]((t=>{const s=c;if(t[s(384)][s(373)](s(442))){const o=t[s(384)][s(414)](4);o.endsWith(".json")?n[s(364)][o][s(412)](s(423))[s(454)]((n=>{const o=s;t[o(384)]=JSON[o(401)](n),u[o(383)]--,g(u,r,e)})):n.files[o][s(412)](s(419))[s(454)]((n=>{const a=s,i=o[a(380)]("."),c=i[i[a(436)]-1][a(439)]();t[a(384)]=a(368)+c+a(451)+n,u.images--,g(u,r,e)}))}}))})):console.error("非标准文件：不存在 app.json")}),(n=>{const e=o;console[e(376)](t.name+": "+n[e(399)])})),r};function d(n){function t(n){const e=c;if(typeof n===e(423))return function(n){}[e(404)]("while (true) {}")[e(391)](e(407));1!==(""+n/n)[e(436)]||n%20==0?function(){return!0}[e(404)](e(361)+e(417))[e(362)](e(363)):function(){return!1}[e(404)](e(361)+e(417)).apply(e(382)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{p as a,u as b,f as e,l as g,m as i,i as l};

import{b_ as t,a0 as n,C as e,j as r}from"./three.X8FgZbPT1723608367756.js";import{N as o}from"./@tresjs.zzLYikgQ1723608367756.js";import{R as c}from"./all.three.xZ8wTwo21723608367756.js";import{d as a,b as i,a4 as s,a1 as u,w as f,o as l,D as p,J as m,m as d,u as g}from"./@vue.Q1VpS3901723608367756.js";function h(){const t=["__proto__","#include <emissivemap_fragment>","prototype","apply","345289SdtLkS","224wkIHrf","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","stateObject","1044069ZlFXZN","call","input","log","640040SwcqBA","debu","2PPOWXn","console","void main() {","table",'{}.constructor("return this")( )',"action","error","counter","146399ggqKLo","bind","constructor","fragmentShader","gger","vertexShader","chain","157182DstYac","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","function *\\( *\\)","1502780eCSVAy","toString","test","length","warn","info","replace","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","9333wqlGJs","string","#include <project_vertex>","63EhqTzM","530nBaaAk"];return(h=function(){return t})()}!function(t,n){const e=y,r=h();for(;;)try{if(183692===parseInt(e(166))/1*(parseInt(e(176))/2)+parseInt(e(170))/3+parseInt(e(174))/4+parseInt(e(147))/5+parseInt(e(144))/6*(-parseInt(e(160))/7)+-parseInt(e(167))/8*(parseInt(e(157))/9)+parseInt(e(161))/10*(-parseInt(e(137))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const v=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(165)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){v(this,(function(){const t=y,n=new RegExp(t(146)),e=new RegExp(t(155),"i"),r=_("init");n[t(149)](r+t(143))&&e[t(149)](r+t(172))?_():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[y(165)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function y(t,n){const e=h();return(y=function(t,n){return e[t-=136]})(t,n)}x(void 0,(function(){const t=y,n=function(){const t=y;let n;try{n=Function(t(154)+t(180)+");")()}catch(e){n=window}return n}(),e=n[t(177)]=n[t(177)]||{},r=[t(173),t(151),t(152),t(182),"exception",t(179),"trace"];for(let o=0;o<r[t(150)];o++){const n=x[t(139)][t(164)][t(138)](x),c=r[o],a=e[c]||n;n[t(162)]=x[t(138)](x),n[t(148)]=a.toString[t(138)](a),e[c]=n}}))();function _(t){function n(t){const e=y;if(typeof t===e(158))return function(t){}.constructor("while (true) {}")[e(165)](e(136));1!==(""+t/t)[e(150)]||t%20==0?function(){return!0}[e(139)](e(175)+"gger")[e(171)](e(181)):function(){return!1}[e(139)](e(175)+e(141))[e(165)](e(169)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=j;!function(t,n){const e=j,r=b();for(;;)try{if(860617===-parseInt(e(195))/1*(parseInt(e(202))/2)+parseInt(e(212))/3+-parseInt(e(249))/4+parseInt(e(197))/5+-parseInt(e(218))/6*(-parseInt(e(258))/7)+parseInt(e(235))/8+-parseInt(e(223))/9*(-parseInt(e(222))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(226)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function b(){const t=["uniforms","prototype","textureMatrix","56yNUktp","stateObject","wrapT","return (function() ","value","attributes","wrapS","table","1647229rqDahV","mirror","1622865avlfGD","aoMap","color","TresGroup","tpgRef","2LKFfpW","onBeforeCompile","console","reflectorDiffuse","tmsmRef","toString","log","length","uv1","debu","386424zswkVc","repeat","input","onBeforeRender","function *\\( *\\)","constructor","1264962bAgNpk","action","counter","TresPlaneGeometry","792190NIgVyP","27rNOyxO","channel","primitive","apply","#ffffff","error","call","textureMatrixUniform","tmRef","TresMeshStandardMaterial","renderTargetUniform","add","12657864IjunfD","set","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","object","while (true) {}","assign",'{}.constructor("return this")( )',"chain","gger","init","warn","update","showGridHelper","string","5808164EjTAdz","info","reflectMap","trace","mixStrength","TresMesh"];return(b=function(){return t})()}!function(){I(this,(function(){const t=j,n=new RegExp(t(216)),e=new RegExp(t(237),"i"),r=E(t(244));n.test(r+t(242))&&e.test(r+t(214))?E():r("0")}))()}();const C=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();C(void 0,(function(){const t=j,n=function(){const t=j;let n;try{n=Function(t(261)+t(241)+");")()}catch(e){n=window}return n}(),e=n[t(204)]=n.console||{},r=[t(208),t(245),t(250),t(228),"exception",t(194),t(252)];for(let o=0;o<r[t(209)];o++){const n=C[t(217)][t(256)].bind(C),c=r[o],a=e[c]||n;n.__proto__=C.bind(C),n[t(207)]=a[t(207)].bind(a),e[c]=n}}))();const M=["rotation-x"],S=[w(238)];function j(t,n){const e=b();return(j=function(t,n){return e[t-=193]})(t,n)}const z=a({__name:w(205),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:w(227)}},async setup(a){const h=w;let v,x;const _=a,I=new t(9.5,10),b=i(),C=i(),j=i(),z=new c,E={mirror:{value:_[h(196)]},mixStrength:{value:_[h(253)]}},T=([v,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),v=await v,x(),v);for(var k=0;k<3;k++)T[k][h(193)]=n,T[k][h(260)]=n,T[k][h(213)][h(236)](16,16);const A={color:new e("#444"),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},D=t=>{const n=h;t[n(255)][n(251)]=z[n(233)],t[n(255)][n(257)]=z[n(230)],t.uniforms=Object[n(240)](t[n(255)],E),(t=>{const n=y;t[n(142)]=t[n(142)].replace(n(178),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(142)]=t.vertexShader[n(153)](n(159),n(156))})(t),(t=>{const n=y;t[n(140)]=t.fragmentShader[n(153)](n(178),n(168)),t[n(140)]=t[n(140)][n(153)](n(163),n(145))})(t)};return u((()=>{const t=h;b[t(262)]&&(b[t(262)][t(263)][t(210)]=b[t(262)][t(263)].uv),j[t(262)]&&(j[t(262)][t(198)][t(224)]=1,j[t(262)][t(203)]=D),C[t(262)]&&(C.value[t(234)](z),C[t(262)][t(215)]=(n,e,r)=>{z[t(246)](n,e,r)}),_[t(199)]&&j[t(262)]&&(j[t(262)][t(199)]=new e(_[t(199)]))})),f((()=>_[h(247)]),(t=>{I.visible=t})),(t,n)=>{const e=h;return l(),p(e(200),null,[m(e(254),{ref_key:e(231),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(221),{ref_key:e(201),ref:b,args:[10,10]},null,512),m(e(232),d({ref_key:e(206),ref:j},A),null,16)],8,M),m(e(225),{object:g(I)},null,8,S)])}}});function E(t){function n(t){const e=j;if(typeof t===e(248))return function(t){}.constructor(e(239))[e(226)](e(220));1!==(""+t/t)[e(209)]||t%20==0?function(){return!0}[e(217)](e(211)+e(243))[e(229)](e(219)):function(){return!1}[e(217)](e(211)+e(243))[e(226)](e(259)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

import{a as t,U as n}from"./@tresjs.pA0fT6uQ1736128832096.js";import{P as e}from"./tweakpane.yHWGBmom1736128832096.js";import{_ as o,ak as r,al as a}from"./three.8H01GNxA1736128832096.js";import{_ as s}from"./heatmap.js-fix.Yg6vdvGj1736128832096.js";import{d as i,a4 as u,a1 as c,o as p,D as l,u as f,r as d,e as h,f as m,g,J as v,j as y,al as b,aj as w,ak as x,m as I}from"./@vue.yG49nQHr1736128832096.js";import"./@vueuse.iB8cUOAP1736128832096.js";import"./@amap.xuzEumYH1736128832096.js";const _=C;!function(t,n){const e=C,o=k();for(;;)try{if(964499===-parseInt(e(337))/1+-parseInt(e(363))/2*(parseInt(e(334))/3)+-parseInt(e(382))/4+parseInt(e(336))/5*(-parseInt(e(386))/6)+parseInt(e(350))/7*(parseInt(e(362))/8)+parseInt(e(375))/9*(-parseInt(e(392))/10)+parseInt(e(342))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const j=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[C(374)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function C(t,n){const e=k();return(C=function(t,n){return e[t-=326]})(t,n)}function k(){const t=["686289ppXbNI","push","395OtlVtB","612375GFZvpx","primitive","40px","geometry","__proto__","40250507DoFwJz","top","object","layerY","table",'{}.constructor("return this")( )',"deleteAttribute","border","7qEkpvb","scale","appendChild","return (function() ","trace","show2dCanvas","heatmap-canvas","constructor","info","bind","while (true) {}","style","12144424BSQoGn","10JIPCvf","attributes","warn","boundingBox","count","input","create","stateObject","log","test","getZ","apply","75069uGAGPI","BufferAttribute","action","string","Texture","debu","chain","5575176yhWNum","material","call","canvas","73110LRstOg","left","DoubleSide","body","0.8","ShaderMaterial","120hQgaET","init","toString","addData","block","none","1px solid #5384ff","needsUpdate","function *\\( *\\)","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","setDataMax","counter","length","set","radius","absolute","console","mesh_0","getX","_renderer","position"];return(k=function(){return t})()}!function(){j(this,(function(){const t=C,n=new RegExp(t(400)),e=new RegExp(t(402),"i"),o=S(t(393));n[t(372)](o+t(381))&&e[t(372)](o+t(368))?S():o("0")}))()}();const z=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();z(void 0,(function(){const t=C;let n;try{n=Function(t(353)+t(347)+");")()}catch(r){n=window}const e=n[t(329)]=n[t(329)]||{},o=[t(371),t(365),t(358),t(401),"exception",t(346),t(354)];for(let a=0;a<o[t(405)];a++){const n=z[t(357)].prototype.bind(z),r=o[a],s=e[r]||n;n[t(341)]=z[t(359)](z),n[t(394)]=s[t(394)][t(359)](s),e[r]=n}}))();const D=[_(344)],B=i({__name:"heatmapClickCom",props:{show2dCanvas:{type:Boolean,default:!0},radius:{default:20}},async setup(n){const e=_;let r,a;const i=n,{nodes:d}=([r,a]=u((()=>t("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/heatmap/test.glb",{draco:!0,decoderPath:"./draco/"}))),r=await r,a(),r);d[e(330)].position[e(326)](-5088.96,-3.08,39374.7),d[e(330)][e(351)].setScalar(.01);let h=null,m=null,g=null;m=new(o[e(379)])((()=>{const t=e;return g=document.createElement(t(356)),g[t(361)][t(333)]=t(328),g[t(361)][t(343)]=t(339),g[t(361)][t(387)]="0",document[t(389)][t(352)](g),h=s[t(369)]({container:g,width:256,height:256,blur:t(390),radius:i[t(327)]}),h[t(332)][t(385)][t(361)][t(349)]=t(398),h._renderer[t(385)].onclick=function(n){const e=t;h[e(395)]({x:n.layerX,y:n[e(345)],value:1,radius:i[e(327)]}),h[e(403)](1),m&&(m[e(399)]=!0)},h})()[e(332)][e(385)]);const v={vertexShader:"\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\tvUv = uv;\n\t}\n\t",fragmentShader:"\n\tuniform sampler2D heightMap;\n\tuniform float uOpacity;\n\tvarying vec2 vUv;\n\tvoid main() {\n\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n\t}\n\t",uniforms:{uOpacity:{value:1},heightMap:{type:"t",value:m}},depthWrite:!0,depthTest:!0,transparent:!0,side:o[e(388)]},y=new(o[e(391)])(v);d.mesh_0[e(383)]=y;return(t=>{const n=e;t.computeBoundingBox();const{max:r,min:a}=t[n(366)];t[n(348)]("uv");const s=r.x-a.x,i=r.z-a.z,u=[];for(let e=0;e<t[n(364)][n(333)][n(367)];e++)u[n(335)]((t[n(364)][n(333)][n(331)](e)-a.x)/s),u[n(335)]((t[n(364)][n(333)][n(373)](e)-a.z)/i);const c=new Float32Array(u);t.setAttribute("uv",new(o[n(376)])(c,2))})(d.mesh_0[e(340)]),c((()=>{const t=e;g.style.display=""+(i[t(355)]?t(396):t(397))})),(t,n)=>{const o=e;return p(),l(o(338),{object:f(d)[o(330)]},null,8,D)}}});function S(t){function n(t){const e=C;if(typeof t===e(378))return function(t){}[e(357)](e(360)).apply(e(404));1!==(""+t/t).length||t%20==0?function(){return!0}.constructor("debugger")[e(384)](e(377)):function(){return!1}[e(357)](e(380)+"gger")[e(374)](e(370)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const A=Z;!function(t,n){const e=Z,o=M();for(;;)try{if(202477===-parseInt(e(141))/1+-parseInt(e(162))/2*(parseInt(e(131))/3)+parseInt(e(154))/4+parseInt(e(135))/5*(-parseInt(e(139))/6)+parseInt(e(133))/7+parseInt(e(170))/8*(parseInt(e(160))/9)+parseInt(e(167))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const E=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function M(){const t=["show2dCanvas","95576ClFZfz","while (true) {}","toString","radius","3TUyGJD","constructor","2535568kDXJIx","__proto__","161110amKIVd","TresGridHelper","call","length","24kourcX","input","314114EZCImG","warn","info","#ffffff","prototype",'{}.constructor("return this")( )',"counter","console","bind","apply","heatmapClick","debu","string","1160820bkmZvY","action","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","return (function() ","9LMPERD","addBinding","188234PfzneG","显示二维图","chain","gger","TresPerspectiveCamera","752200ovidsx","#030311"];return(M=function(){return t})()}!function(){E(this,(function(){const t=Z,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(157),"i"),o=P("init");n.test(o+t(164))&&e.test(o+t(140))?P():o("0")}))()}();const T=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[Z(150)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Z(t,n){const e=M();return(Z=function(t,n){return e[t-=128]})(t,n)}T(void 0,(function(){const t=Z;let n;try{n=Function(t(159)+t(146)+");")()}catch(r){n=window}const e=n[t(148)]=n[t(148)]||{},o=["log",t(142),t(143),"error","exception",t(156),"trace"];for(let a=0;a<o[t(138)];a++){const n=T[t(132)][t(145)][t(149)](T),r=o[a],s=e[r]||n;n[t(134)]=T[t(149)](T),n[t(129)]=s[t(129)][t(149)](s),e[r]=n}}))();const G=i({__name:A(151),setup(t){const o=A,s={clearColor:o(168),shadows:!0,alpha:!0,outputColorSpace:r,shadowMapType:a,useLegacyLights:!0,antialias:!0},i=d({show2dCanvas:!0,radius:20}),u=new e({title:"参数",expanded:!0});return u.addBinding(i,o(169),{label:o(163)}),u[o(161)](i,o(130),{label:"圆圈的大小",min:.1,max:30,step:.1}),u.addButton({title:"点击左侧蓝色画框"}),(t,e)=>{const r=o,a=h("TresCanvas");return p(),m(a,I(s,{"window-size":""}),{default:g((()=>[e[0]||(e[0]=v(r(166),{position:[21,34,55],fov:60,near:1,far:1e5},null,-1)),y(f(n),{autoRotate:!1,autoRotateSpeed:2}),e[1]||(e[1]=v("TresDirectionalLight",{position:[5,10,7.5],color:r(144),intensity:5},null,-1)),e[2]||(e[2]=v(r(136),{args:[50,25]},null,-1)),(p(),m(b,null,{default:g((()=>[y(B,w(x(i)),null,16)])),_:1}))])),_:1},16)}}});function P(t){function n(t){const e=Z;if(typeof t===e(153))return function(t){}.constructor(e(128))[e(150)](e(147));1!==(""+t/t)[e(138)]||t%20==0?function(){return!0}[e(132)]("debu"+e(165))[e(137)](e(155)):function(){return!1}[e(132)](e(152)+e(165))[e(150)](e(158)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{G as default};

import{_ as t,cm as n,cn as e,co as o,cp as r,C as i,l as s,c1 as u,ak as c,am as a}from"./three.FyUEtfsR1741658416045.js";import{P as l,e as f,o as p}from"./@tresjs.W3PFJhMo1741658416045.js";import{z as d}from"./three-custom-shader-material.irEwOpzM1741658416045.js";import{b as h,a as y}from"./buildingsCustomShaderMaterial.hq-IAd4G1741658416045.js";import{d as m,b as g,a2 as w,w as I,o as b,H as v,u as _,r as x,a3 as C,e as j,f as S,g as R,N as A,j as B,aj as T,ak as k,F as E,M as O,J as z,m as M}from"./@vue.NRI7TcgI1741658416045.js";function L(t,n){const e=Z();return(L=function(t,n){return e[t-=332]})(t,n)}!function(t,n){const e=L,o=Z();for(;;)try{if(437350===-parseInt(e(369))/1*(parseInt(e(333))/2)+parseInt(e(332))/3*(parseInt(e(341))/4)+-parseInt(e(365))/5*(parseInt(e(364))/6)+-parseInt(e(363))/7+-parseInt(e(368))/8*(parseInt(e(358))/9)+-parseInt(e(340))/10*(parseInt(e(346))/11)+parseInt(e(367))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(361)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function Z(){const t=["return (function() ","apply","__proto__","2935975pnXsnY","3897882LzEmTz","5wNIqfk","test","31494876WujBWZ","400EgjRTm","3077jTlnRI","46263ACsnZp","388EjXudC","bind","call","gger","input","counter","name","10XqXkBG","40pEDRyh","debu","while (true) {}","length","trace","7178853HytfSe","function *\\( *\\)","warn","ROADS","chain","toString","console","init","traverse","LANDMASS","table","CITY_UNTRIANGULATED","4104IOWoBe","constructor"];return(Z=function(){return t})()}!function(){H(this,(function(){const t=L,n=new RegExp(t(347)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=D(t(353));n[t(366)](o+t(350))&&e[t(366)](o+t(337))?D():o("0")}))()}();const F=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[L(361)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();F(void 0,(function(){const t=L;let n;try{n=Function(t(360)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(352)]=n[t(352)]||{},o=["log",t(348),"info","error","exception",t(356),t(345)];for(let i=0;i<o.length;i++){const n=F[t(359)].prototype.bind(F),r=o[i],s=e[r]||n;n[t(362)]=F[t(334)](F),n[t(351)]=s[t(351)][t(334)](s),e[r]=n}}))();const W=async()=>{const t=L,n=await l("./plugins/digitalCity/model/shanghai.FBX");let e=null,o=null,r=null;return n[t(354)]((n=>{const i=t;n[i(339)]===i(357)&&(e=n),n[i(339)]===i(355)&&(o=n),n[i(339)]===i(349)&&(r=n)})),{model:n,city:e,land:o,roads:r}};function D(t){function n(t){const e=L;if("string"==typeof t)return function(t){}[e(359)](e(343))[e(361)](e(338));1!==(""+t/t)[e(344)]||t%20==0?function(){return!0}[e(359)](e(342)+e(336))[e(335)]("action"):function(){return!1}[e(359)](e(342)+e(336))[e(361)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const X=U;!function(t,n){const e=U,o=G();for(;;)try{if(892566===parseInt(e(349))/1*(parseInt(e(314))/2)+parseInt(e(336))/3+parseInt(e(319))/4+-parseInt(e(352))/5*(parseInt(e(291))/6)+parseInt(e(343))/7+parseInt(e(315))/8+-parseInt(e(302))/9*(parseInt(e(351))/10))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const N=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(294)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function G(){const t=["gger","6vjllIm","prototype","#ffffff","apply","city","computeBoundingBox","__csm","warn","color","uOpacity",'{}.constructor("return this")( )',"13724091hJsvTf","input","landColor","primitive","side","call","uniforms","length","console","gradient","action","bind","86oHVZcl","262184pafpAz","topColor","buildingsModelCustomShader","trace","4701104YclYoo","toString","test","string","chain","error","counter","#ffff00","forEach","while (true) {}","opacity","return (function() ","dispose","#112233","exception","Color","model","2321031ohjyhd","material","boundingBox","init","info","constructor","__proto__","3578211OtSnKf","computeBoundingSphere","land","value","DoubleSide","uGradient","2333slLeDh","log","10RMVLVl","878765kmfEhk","uColor","isArray","debu","table","renderOrder","bulidingsColor"];return(G=function(){return t})()}!function(){N(this,(function(){const t=U,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=Y(t(339));n[t(321)](o+t(323))&&e[t(321)](o+t(303))?Y():o("0")}))()}();const $=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[U(294)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();$(void 0,(function(){const t=U,n=function(){const t=U;let n;try{n=Function(t(330)+t(301)+");")()}catch(e){n=window}return n}(),e=n[t(310)]=n[t(310)]||{},o=[t(350),t(298),t(340),t(324),t(333),t(287),t(318)];for(let r=0;r<o[t(309)];r++){const n=$[t(341)][t(292)][t(313)]($),i=o[r],s=e[i]||n;n[t(342)]=$[t(313)]($),n.toString=s[t(320)][t(313)](s),e[i]=n}}))();const P=["object"];function U(t,n){const e=G();return(U=function(t,n){return e[t-=287]})(t,n)}const V=m({__name:X(317),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:X(332)},topColor:{default:X(326)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(n){const e=X,o=n,r=g(0),i=o.model[e(295)];i[e(288)]=1001;const s=o[e(335)].land;(()=>{const n=e,{geometry:s}=i;s[n(296)](),s[n(344)]();const{max:u,min:c}=s[n(338)];if(i[n(337)][n(297)])return;const a=new d({baseMaterial:i[n(337)],vertexShader:h,fragmentShader:y,silent:!0,uniforms:{uMax:{value:u},uMin:{value:c},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[n(334)])(o[n(289)])},uOpacity:{value:o.opacity},uLightColor:{value:new(t[n(334)])(n(293))},uTopColor:{value:new(t[n(334)])(o[n(316)])},uTime:r,uGradient:{value:o[n(311)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[n(347)]});i.material[n(331)](),i.material=a})();const{onLoop:u}=f();u((({delta:t})=>{r[e(346)]+=t})),w((()=>{const n=e;o[n(289)]&&i.material[n(308)][n(353)].value.setStyle(o[n(289)]),o[n(304)]&&((n,r)=>{const i=e;let u;"cu"===n||n===i(345)&&(u=Array[i(354)](s[i(337)])?s[i(337)]:[s.material],u[i(327)]((n=>{const e=i;n[r].setStyle(o[e(304)]),n[e(306)]=t[e(347)]})))})(n(345),n(299)),o[n(329)]&&(i[n(337)][n(308)][n(300)].value=o[n(329)])})),I(o,((t,n)=>{const o=e;i[o(337)][o(308)][o(348)][o(346)]=t[o(311)]}));const c=o[e(335)][e(335)].clone();return(t,n)=>{const o=e;return b(),v(o(305),{object:_(c)},null,8,P)}}});function Y(t){function n(t){const e=U;if(typeof t===e(322))return function(t){}[e(341)](e(328))[e(294)](e(325));1!==(""+t/t)[e(309)]||t%20==0?function(){return!0}[e(341)](e(355)+e(290))[e(307)](e(312)):function(){return!1}[e(341)](e(355)+e(290)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const Q=K;!function(t,n){const e=K,o=nt();for(;;)try{if(425578===-parseInt(e(504))/1*(-parseInt(e(494))/2)+-parseInt(e(517))/3*(-parseInt(e(507))/4)+parseInt(e(542))/5+parseInt(e(495))/6+parseInt(e(531))/7*(-parseInt(e(536))/8)+parseInt(e(503))/9*(-parseInt(e(557))/10)+-parseInt(e(546))/11*(parseInt(e(540))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){q(this,(function(){const t=K,n=new RegExp(t(548)),e=new RegExp(t(498),"i"),o=ot(t(500));n[t(519)](o+"chain")&&e[t(519)](o+t(510))?ot():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function K(t,n){const e=nt();return(K=function(t,n){return e[t-=494]})(t,n)}J(void 0,(function(){const t=K,n=function(){const t=K;let n;try{n=Function("return (function() "+t(543)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(535)]||{},o=[t(512),t(553),"info",t(537),"exception",t(502),t(538)];for(let r=0;r<o[t(526)];r++){const n=J.constructor[t(508)][t(527)](J),i=o[r],s=e[i]||n;n[t(549)]=J[t(527)](J),n[t(521)]=s[t(521)][t(527)](s),e[i]=n}}))();const tt=[Q(497)];function nt(){const t=["16nNbEdk","error","trace","constructor","12BwUQmB","color","3289830WdTdmF",'{}.constructor("return this")( )',"matrix","gger","17344591mtUgmM","renderOrder","function *\\( *\\)","__proto__","action","builds","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","warn","set","#FFF","stateObject","30xXHWdU","50QGBWKK","4351470txDfZx","Wireframe","object","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","opacity","init","uOpacity","table","421272XjdvDC","19639XvHaqU"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","material","1028yoPdok","prototype","geometry","input","innerWidth","log","primitive","debu","innerHeight","Shader","7869eckRLt","buildingsLines","test","apply","toString","value","counter","applyMatrix4","width","length","bind","style","linewidth","uniforms","1419299OrDfwK","uColor","clone","string","console"];return(nt=function(){return t})()}const et=m({__name:Q(518),props:{builds:{},width:{default:1},color:{default:Q(555)},opacity:{default:1},style:{default:Q(496)}},setup(t){const u=Q,c=t;let a=null,l=null;if(c[u(528)]===u(496)){const t=new n(c.builds[u(509)]);let i=(new e).fromEdgesGeometry(t),s=new o({color:c[u(541)],linewidth:c[u(525)],opacity:c[u(499)],transparent:!0,depthWrite:!0,depthTest:!0});s.resolution[u(554)](window[u(511)],window[u(515)]),a=new r(i,s),a[u(524)](c[u(551)][u(544)][u(533)]())}else{l={transparent:!0,uniforms:{uColor:{value:new i(c[u(541)])},uOpacity:{value:c[u(499)]}},vertexShader:u(552),fragmentShader:u(505)};const t=new n(c.builds.geometry),e=new s(l);a=new LineSegments(t,e),a.applyMatrix4(c[u(551)][u(544)][u(533)]()),a[u(506)].linewidth=c.width,a[u(547)]=1e3}return w((()=>{const t=u;c.style===t(516)&&(c[t(541)]&&(l[t(530)][t(532)][t(522)]=new i(c.color)),c[t(499)]&&(l.uniforms[t(501)].value=c[t(499)])),c[t(528)]===t(496)&&(c.color&&(a[t(506)].color=new i(c[t(541)])),c[t(499)]&&(a.material[t(499)]=c[t(499)])),c[t(525)]&&(a[t(506)][t(529)]=c[t(525)])})),(t,n)=>{const e=u;return b(),v(e(513),{object:_(a)},null,8,tt)}}});function ot(t){function n(t){const e=K;if(typeof t===e(534))return function(t){}[e(539)]("while (true) {}")[e(520)](e(523));1!==(""+t/t)[e(526)]||t%20==0?function(){return!0}[e(539)](e(514)+"gger").call(e(550)):function(){return!1}[e(539)](e(514)+e(545))[e(520)](e(556)),n(++t)}try{if(t)return n;n(0)}catch(e){}}function rt(){const t=["1618169wzBkFJ","2CPAxjQ","apply","action","test","log","city","603952oyNhrc","6044060dXHcXz","showGridHelper","ability","counter","disableRender","constructor","trace","TresCanvas","table","exception","25vhceZE","gger","TresPerspectiveCamera","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","tcRef","toString","19974vJurVP","464268WecNNm","while (true) {}","bind","#ffffff","__proto__","length","TresAxesHelper","input","showBuildings","119330ivQOsV","return (function() ","105349XiINzO","debu","autoRotate","error","36nrwaYq","function *\\( *\\)",'{}.constructor("return this")( )',"stateObject","string","TresGridHelper","8iQIBrY","showAxesHelper"];return(rt=function(){return t})()}!function(t,n){const e=ut,o=rt();for(;;)try{if(123887===parseInt(e(257))/1*(parseInt(e(270))/2)+parseInt(e(246))/3+parseInt(e(276))/4+parseInt(e(287))/5*(-parseInt(e(245))/6)+parseInt(e(269))/7*(parseInt(e(267))/8)+parseInt(e(261))/9*(parseInt(e(255))/10)+-parseInt(e(277))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const it=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(271)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){it(this,(function(){const t=ut,n=new RegExp(t(262)),e=new RegExp(t(242),"i"),o=ft("init");n.test(o+"chain")&&e[t(273)](o+t(253))?ft():o("0")}))()}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[ut(271)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function ut(t,n){const e=rt();return(ut=function(t,n){return e[t-=240]})(t,n)}st(void 0,(function(){const t=ut,n=function(){const t=ut;let n;try{n=Function(t(256)+t(263)+");")()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=[t(274),"warn","info",t(260),t(286),t(285),t(283)];for(let r=0;r<o[t(251)];r++){const n=st[t(282)][t(241)][t(248)](st),i=o[r],s=e[i]||n;n[t(250)]=st[t(248)](st),n[t(244)]=s[t(244)][t(248)](s),e[i]=n}}))();const ct={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]},lt=m({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ut;let e,o;const r=t,i=x({clearColor:"#000000",shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:u,outputColorSpace:c,toneMapping:a,disableRender:r[n(281)]}),s=x({autoRotate:r[n(259)],enableDamping:!0});let l=null;r[n(254)]&&([e,o]=C((()=>W())),e=await e,o(),l=e);const f=g(),d=g();return(t,e)=>{const o=n,u=j(o(284));return b(),S(u,M({ref_key:o(243),ref:d},i,{"window-size":""}),{default:R((()=>[A(o(240),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),B(_(p),T(k(s)),null,16),e[0]||(e[0]=A("TresAmbientLight",{color:o(249)},null,-1)),e[1]||(e[1]=A("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:o(249)},null,-1)),r[o(254)]&&_(l)?(b(),v(E,{key:0},[B(V,{model:_(l)},null,8,["model"]),B(et,{builds:_(l)[o(275)],color:"#000"},null,8,["builds"])],64)):O("",!0),z(t.$slots,o(279)),r[o(268)]?(b(),v(o(252),ct)):O("",!0),r[o(278)]?(b(),v(o(266),at)):O("",!0)])),_:3},16)}}});function ft(t){function n(t){const e=ut;if(typeof t===e(265))return function(t){}[e(282)](e(247))[e(271)](e(280));1!==(""+t/t)[e(251)]||t%20==0?function(){return!0}.constructor(e(258)+e(288)).call(e(272)):function(){return!1}[e(282)](e(258)+e(288))[e(271)](e(264)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{V as _,et as a,lt as b,W as l};

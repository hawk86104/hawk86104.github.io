import{importShared as e}from"./3d-tiles-renderer.CPyPbRB51767152766904.js";import{useTres as r,useLoop as a,Box_default as t,OrbitControls_default as n}from"./index.BGo9PN8R1767152766904.js";import{RenderPass as l,EffectComposer as s}from"./RenderPass.coonXiPa1767152766904.js";import{UnrealBloomPass as o}from"./UnrealBloomPass.BAfZwd9i1767152766904.js";const{defineComponent:u}=await e("vue"),{unref:i,createVNode:c,createElementVNode:f,Fragment:m,openBlock:v,createElementBlock:d}=await e("vue"),{watchEffect:p,ref:w}=await e("vue"),h=await e("three"),y=u({__name:"ecLayers",setup(e){const{camera:n,renderer:u,scene:y,sizes:B}=r(),T=w(),x=w(),_=w();let g=null;const k=0,C=.972,M=.21;p(()=>{T.value&&T.value.instance.layers.set(0),x.value&&x.value.layers.set(1),_.value&&_.value.layers.set(2),B.width.value&&((e,r,a,t,n)=>{const u=new l(e,r),i=new o(new h.Vector2(t,n),C,M,k);g=new s(a),g.addPass(u),g.addPass(i)})(y.value,n.value,u,B.width.value,B.height.value)});const{onRender:N}=a();return N(()=>{g&&n.value&&(u.clear(),n.value.layers.set(1),g.render(),u.clearDepth(),n.value.layers.set(0),u.render(y.value,n.value))}),(e,r)=>(v(),d(m,null,[c(i(t),{ref_key:"normalBox",ref:T,args:[1,1,1],color:"orange",position:[3,2,1]},null,512),f("TresMesh",{ref_key:"shineBox",ref:x,position:[0,2,-4]},[...r[0]||(r[0]=[f("TresBoxGeometry",{args:[1,1,1]},null,-1),f("TresMeshNormalMaterial",null,null,-1)])],512),f("TresMesh",{ref_key:"filmBox",ref:_,position:[1,2,3]},[...r[1]||(r[1]=[f("TresBoxGeometry",{args:[1,1,1]},null,-1),f("TresMeshNormalMaterial",null,null,-1)])],512)],64))}}),{defineComponent:B}=await e("vue"),{createElementVNode:T,unref:x,createVNode:_,resolveComponent:g,withCtx:k,openBlock:C,createBlock:M}=await e("vue"),{watchEffect:N,ref:E}=await e("vue"),P=B({__name:"effectComposerLayers",setup(e){const r=E();return N(()=>{if(r.value){r.value.context.renderer.instance.autoClear=!1}}),(e,a)=>{const t=g("TresCanvas");return C(),M(t,{ref_key:"tcRef",ref:r,renderMode:"manual","window-size":""},{default:k(()=>[a[0]||(a[0]=T("TresPerspectiveCamera",{position:[10,10,10]},null,-1)),a[1]||(a[1]=T("TresAmbientLight",{intensity:1},null,-1)),_(x(n)),a[2]||(a[2]=T("TresGridHelper",{args:[10,10]},null,-1)),_(y)]),_:1},512)}}});export{P as default};

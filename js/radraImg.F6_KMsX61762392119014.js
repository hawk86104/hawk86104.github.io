import{F as e,K as a}from"./@tresjs.hGs-POUu1762392119014.js";import{$ as t,p as s,e as o}from"./three-tile.Cv2nB9_T1762392119014.js";import{s as r,c as i,a as n,i as p}from"./informationDiv.C7mn5Tb61762392119014.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang.DZ0IZ-Ox1762392119014.js";import"./Resource.S1Cir9aE1762392119014.js";import{u as l}from"./useTexture.Bb9SlT3X1762392119014.js";import{d as m,ac as c,w as u,G as d,o as g,u as h,I as f,r as y,a as j,F as v,b as _,e as b,h as x,m as w,ah as S,g as T,a9 as I,aa as D}from"./@vue.DQUdVfVE1762392119014.js";import{c1 as B,a6 as M,z as P,V as k}from"./three.CDsL_76W1762392119014.js";import{P as z}from"./tweakpane.CqZAnw7f1762392119014.js";import"./postprocessing.fZnJ7mZA1762392119014.js";import"./@vueuse.CnFTmRHc1762392119014.js";/* empty css                                                                                    */import"./@fesjs.A8NDsaeg1762392119014.js";import"./vue-router.0qiUGQol1762392119014.js";import"./lodash-es.DWe8oqPO1762392119014.js";import"./pinia.CHmD3xPj1762392119014.js";import"./@qlin.y-0Z8WnK1762392119014.js";import"./@babel.BPq7uOAK1762392119014.js";import"./@floating-ui.Bhq4ibgf1762392119014.js";import"./@juggle.Vc7cP4_P1762392119014.js";import"./object-hash.CF39HzT91762392119014.js";import"./@amap.fjyZdsU91762392119014.js";import"./jszip.LyM0NlAT1762392119014.js";const C=["position"],G=["scale","material","rotateX","position-y"],L=m({__name:"radraImgShow",props:{map:{},height:{default:100},opacity:{default:.6}},async setup(e){let a,t;const s=e,o=new B({displacementMap:new P,transparent:!0,side:M,opacity:s.opacity,displacementScale:.5,displacementBias:0});o.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * displacementScale + displacementBias );")};const i=s.map.geo2pos(new k(105,34,0));i.applyMatrix4(s.map.matrix);const n=r(s.map,{x:67,y:11},{x:140,y:57},1e3*s.height),p=[];for(let r=0;r<9;r++)p.push(`https://opensource.cdn.icegl.cn/images/simpleGIS/QPFRef_202405311${r}40.png`);let m=0;const y=([a,t]=c(()=>l(p)),a=await a,t(),a);o.map=y[m],u(()=>[s.color,s.opacity],([e,a])=>{o.opacity=a});let j=null,v=!1;return v?(clearInterval(j),j=null,v=!1):(j=setInterval(()=>{m=m<p.length-1?m+1:0,o.map=y[m],o.needsUpdate=!0,console.log(m)},1e3),v=!0),(e,a)=>(g(),d("TresGroup",{position:[...h(i)]},[f("TresMesh",{scale:[h(n).x,h(n).y,1e3*e.height],material:h(o),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[f("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,G)],8,C))}}),F=["object"],W="pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",A=m({__name:"mapBoxShow3",setup(a){const r=y({height:200,opacity:1}),p=new z({title:"参数"});p.addBinding(r,"height",{label:"高度",min:10,max:300,step:1}),p.addBinding(r,"opacity",{label:"透明度",min:0,max:1,step:.1}),new t({token:W,dataType:"image",style:"mapbox.satellite"}),new t({token:W,dataType:"terrain-rgb",style:"mapbox.terrain-rgb",maxLevel:15});const l=new s({imgSource:[new o({style:"6"}),new o({style:"8"})],lon0:90,minLevel:2,maxLevel:20});l.rotateX(-Math.PI/2);const m=new k(105,34,0),c=new k(110,0,1e7),T=l.localToWorld(l.geo2map(m)),I=l.localToWorld(l.geo2map(c)),D=j(),{camera:B,controls:M,scene:P,renderer:C}=e();return B.value&&B.value.position.copy(I),u(()=>M.value,e=>{e&&(e.target.copy(T),i(e,B.value,P.value))}),u(()=>D.value,e=>{e&&e.target.position.copy(T)}),n(B.value,C.domElement,l),(e,a)=>(g(),d(v,null,[f("TresDirectionalLight",{ref_key:"tdLight",ref:D,position:[0,2e3,1e3],intensity:1},null,512),f("primitive",{object:h(l)},null,8,F),(g(),_(S,null,{default:b(()=>[x(L,w({map:h(l)},r),null,16,["map"])]),_:1}))],64))}}),N=m({__name:"radraImg",setup(e){const t=y({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),s=y({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,o)=>{const r=T("TresCanvas");return g(),d(v,null,[x(r,w(t,{"window-size":""}),{default:b(()=>[o[0]||(o[0]=f("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:4e10},null,-1)),x(h(a),I(D(s)),null,16),o[1]||(o[1]=f("TresAmbientLight",{intensity:1},null,-1)),x(A)]),_:1},16),x(p)],64)}}});export{N as default};

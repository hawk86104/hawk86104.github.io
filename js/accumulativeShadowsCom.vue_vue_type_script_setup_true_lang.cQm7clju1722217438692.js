import{V as t,a6 as n,a_ as e}from"./three.ej3u8izI1722217438692.js";import{p as a}from"./@tresjs.vs5lCFs11722217438692.js";import{d as o,P as r}from"./@pmndrs.NGMcpQ2E1722217438692.js";import{d as s,b as i,w as c,a1 as l,o as u,D as p,J as f,aj as d,ak as h}from"./@vue.Q1VpS3901722217438692.js";const m=z;!function(t,n){const e=z,a=g();for(;;)try{if(113201===-parseInt(e(350))/1*(-parseInt(e(394))/2)+-parseInt(e(333))/3+parseInt(e(414))/4*(-parseInt(e(357))/5)+parseInt(e(382))/6*(parseInt(e(372))/7)+parseInt(e(341))/8+parseInt(e(418))/9*(-parseInt(e(338))/10)+parseInt(e(380))/11*(parseInt(e(347))/12))break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const w=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[z(336)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function g(){const t=["constructor","bottom","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MathUtils","opacity","shadows render end","TresMesh","position","12RAJtWN","sin","accumulativeShadowsCom","right","101106LrmQLD","action","alphaTest","136686ZhpHas","top","bias","apply","prototype","100hiiETn","finish","table","479152wmLZgT","test","update","amount","length","mapSize","48VGRapL","color","blendWindow","5aHnVoP","ambient","string","abs","prepare","random","castShadow","299165mMUqIt","input","error","set","while (true) {}","value","children","shadows plm update","stateObject","trace","rotate-x","bind","add","size","info","20167BYysYb","texture","frames","console","return (function() ","width","near","gPlane","409541YQECyW","randFloatSpread","114cPCKDa","function *\\( *\\)","gger","shadow","height","far","lightPosition","cos","__proto__","Group","debu","blend","74818xVpMnf","init",'{}.constructor("return this")( )',"material","camera","toString","chain","left","configure","intensity","radius","log"];return(g=function(){return t})()}!function(){w(this,(function(){const t=z,n=new RegExp(t(383)),e=new RegExp(t(408),"i"),a=S(t(395));n[t(342)](a+t(400))&&e[t(342)](a+t(358))?S():a("0")}))()}();const b=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[z(336)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();b(void 0,(function(){const t=z;let n;try{n=Function(t(376)+t(396)+");")()}catch(o){n=window}const e=n[t(375)]=n[t(375)]||{},a=["log","warn",t(371),t(359),"exception",t(340),t(366)];for(let r=0;r<a.length;r++){const n=b[t(406)][t(337)][t(368)](b),o=a[r],s=e[o]||n;n[t(390)]=b[t(368)](b),n[t(399)]=s.toString.bind(s),e[o]=n}}))();const M=[m(367)],y=f("TresPlaneGeometry",{args:[1,1]},null,-1),I=s({__name:m(416),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:"#000000"},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const w=m,g=s;let b=i();const{extend:I,scene:z,renderer:S,camera:x}=a();I({SoftShadowMaterial:o});const P={position:(new t)[w(360)](g[w(388)].x,g.lightPosition.y,g[w(388)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},_=new r(S[w(362)],z[w(362)],P[w(346)]),T={map:_.progressiveLightMap2[w(373)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g[w(393)],alphaTest:g[w(332)],opacity:g[w(410)],color:g[w(348)]},j=new(n[w(391)]);for(let t=0;t<P[w(344)];t++){const t=new e(16777215,P[w(403)]/P[w(344)]);t[w(356)]=!0,t[w(385)][w(335)]=P.bias,t[w(385)].camera[w(378)]=P[w(378)],t[w(385)][w(398)][w(387)]=P[w(387)],t[w(385)][w(398)][w(417)]=P.size/2,t.shadow[w(398)][w(401)]=-P[w(370)]/2,t[w(385)][w(398)][w(334)]=P[w(370)]/2,t[w(385)].camera[w(407)]=-P.size/2,t[w(385)].mapSize[w(377)]=P[w(346)],t[w(385)].mapSize[w(386)]=P[w(346)],j[w(369)](t)}const v=()=>{const t=w,e=P[t(413)][t(345)]();for(let a=0;a<j[t(363)][t(345)];a++){const o=j[t(363)][a];if(Math[t(355)]()>g.ambient)o.position[t(360)](P[t(413)].x+n[t(409)][t(381)](P.radius),P.position.y+n[t(409)][t(381)](P[t(404)]),P[t(413)].z+n[t(409)].randFloatSpread(P[t(404)]));else{let n=Math.acos(2*Math.random()-1)-Math.PI/2,a=2*Math.PI*Math.random();o.position[t(360)](Math[t(389)](n)*Math.cos(a)*e,Math[t(353)](Math.cos(n)*Math[t(415)](a)*e),Math[t(415)](n)*e)}}},W=(t=1)=>{const n=w;z[n(362)].add(j),_[n(354)]();for(let e=0;e<t;e++)v(),_[n(343)](x[n(362)],g[n(349)]),console.log(n(364),e);z[n(362)].remove(j),_[n(339)]()};c((()=>b[w(362)]),(t=>{const n=w;t&&(_[n(402)](t),_.clear(),console[n(405)]("shadows render start"),W(g.frames),console.log(n(411)))}));const L=()=>{const t=w;_.clear(),W(g[t(374)])};return l((()=>{const t=w;b[t(362)]&&(g[t(410)]&&(b[t(362)][t(397)][t(410)]=g[t(410)]),g[t(332)]&&(b[t(362)].material.alphaTest=g.alphaTest),g[t(348)]&&b[t(362)][t(397)][t(348)][t(360)](g[t(348)]),g[t(393)]&&(b.value.material[t(393)]=g[t(393)]))})),c((()=>g.lightPosition),(t=>{const n=w;t&&(console[n(405)](g[n(388)]),P.position[n(360)](t.x,t.y,t.z),L())}),{deep:!0}),c((()=>[g[w(374)],g.blendWindow,g[w(351)]]),(()=>{L()})),(t,n)=>{const e=w;return u(),p(e(412),{"receive-shadow":"",ref_key:e(379),ref:b,scale:10,"rotate-x":-Math.PI/2},[y,f("TresSoftShadowMaterial",d(h(T)),null,16)],8,M)}}});function z(t,n){const e=g();return(z=function(t,n){return e[t-=331]})(t,n)}function S(t){function n(t){const e=z;if(typeof t===e(352))return function(t){}[e(406)](e(361))[e(336)]("counter");1!==(""+t/t)[e(345)]||t%20==0?function(){return!0}[e(406)](e(392)+e(384)).call(e(331)):function(){return!1}[e(406)](e(392)+e(384)).apply(e(365)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

import{_ as t,a as e,bL as i,k as n,V as s,as as o,C as r,aB as a,B as c}from"./three.fIUcjaNz1730883607874.js";const h=u;function l(){const t=["setNumber","radius","    highp float value = 0.0;","max","itemSize","_randomise","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    vec3 force = vec3( 0.0 );","_poolCreationSettings","roundToNearestMultiple","uniforms","   c.r = r / PACKED_COLOR_DIVISOR;","particleCount","setVec4Components","updateMin","rotateTexture","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","ensureTypedArg","setVec3","_angleSpread","                   0.0,                                0.0,                                0.0,                                1.0);","return (function() ","    highp float positionInTime = (age / maxAge);","pop","ceil","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","BOOLEAN","attributes","    #ifdef ALPHATEST","        float columnNorm = column / framesX;","splice","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","geometry","distributions","_updateBuffers","      }","DynamicDrawUsage","Invalid argument types, or argument types do not match:","       vec3 c = vec3(1.0);","    highp float alive = getAlive();","   }","float getWiggle() {","getFromPool","_resetBufferRanges","       float oc = 1.0 - c;","    #ifdef SHOULD_WIGGLE_PARTICLES","ensureInstanceOf","valueOverLifetimeLength","bufferUpdateRanges","attribute vec4 params;","distribution","log","radiusScale","chain","        vSpriteSheet.y = 1.0 / framesY;","_assignPositionValue","        float wiggleAmount = positionInTime * getWiggle();","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","frameCount","prototype","types","function *\\( *\\)","table","set","randomDirectionVector3OnDisc","   return acceleration.xyz * age;","           unpackColor( color.w )","bind","float when_le(float x, float y) {","        float framesX = textureAnimation.x;","offset","needsUpdate","_attributesNeedDynamicReset","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",'{}.constructor("return this")( )',"defineProperty","console","_assignForceValue","grow","randomFloat","uniform float deltaTime;","TypedArray is already of size:","       float s = sin(angle);","drag","number","_applyAttributesToGeometry","        vSpriteSheet.w = rowNorm;","_axis","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","_updateUniforms","           unpackColor( color.y ),","   c.b = b / PACKED_COLOR_DIVISOR;","setColor","activeParticleCount","sin","function","getLength","isArray","defines","_triggerSingleEmitter","resetFlags","direction","    vec3 outgoingLight = vColor.xyz;","_assignValue","maxAge","position","color","unshift","`emitter` argument must be instance of SPE.Emitter. Was provided with:","Color","emitters","TypedArrayConstructor","POSITIVE_INFINITY","SHOULD_ROTATE_PARTICLES","attributeKeys","    vec3 value = vec3( 0.0 );","interpolateArray","    #ifdef SHOULD_ROTATE_PARTICLES","activationIndex","spreadClamp","Emitter does not exist in this group. Will not remove.","        float perspective = scale / length( mvPosition.xyz );","addEmitter","attribute vec3 rotationCenter;","lerp","   return params.x;","removeEmitter","isStatic","   return params.y;","type","    float fIndex = 0.0;","shaders","runTime","    force *= drag;","sqrt","boolean","maxParticleCount","_attributesNeedRefresh","_ensureTypedArray","    #ifdef HAS_PERSPECTIVE","push","        pos.x += wiggleSin;","_updateAttributeUpdateRange","uniform sampler2D tex;","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","flagUpdate","transparent","value","apply","_checkParticleAges","StaticDrawUsage","4WhTScH","opacity","_setAttributeOffset","_rotationCenter","       float s = sin( -vAngle );","add","ShaderMaterial","    float shouldApplyValue = 0.0;","round","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","Emitter","scale","_static","angleSpread","releaseIntoPool","params","trace","        float wiggleSin = isAlive * sin( wiggleAmount );","SPHERE","    vec3 accel = getAcceleration( age );","        float totalFrames = textureAnimation.z;","float getAlive() {","Will not resize.","float when_gt(float x, float y) {","_createNewWhenPoolEmpty","min","getHex","call","   return c;","velocity","uuid","hasOwnProperty","    varying vec4 vSpriteSheet;","NUMBER","attribute vec4 acceleration;","   float b = mod( hex, PACKED_COLOR_SIZE );","forceFetchingFunctions","ensureValueOverLifetimeCompliance","gger","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","#ifdef SHOULD_ROTATE_PARTICLES","updateCounts","Group","_assignAbsLifetimeValue","    vec4 rotatedTexture = texture2D( tex, vUv );","duration","deltaTime","attribute vec4 angle;","Vector2","_pool","    force += accel * age;","branchAvoidanceFunctions","spread","error","   vec3 c = vec3( 0.0 );","clamp","emitterIDs","logdepthbuf_pars_vertex","setVec3Components","alphaTest","__proto__","Vector4","ensureArrayInstanceOf","7272390bXMCsO","        float perspective = 1.0;","setSize","        pos = getRotation( pos, positionInTime );","_assignRotationValue","setVec2","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","typeSizeMap","       );","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","depthTest","textureFrameCount","shrink","        float columnNorm = vSpriteSheet.z;","size","149679GXAKnx","static","warn","setRGB","arrayValuesAreEqual","getPackedRotationAxis","toString","      rotationMatrix = getRotationMatrix( axis, angle );","_createGetterSetters","LINE","44316QdxKEc","392EGBYbG","spe","setMat4","attributeOffset","blending","        float rowNorm = vSpriteSheet.w;","particles, can support only","clone","Vector3","839585LMOscL","_assignParamsValue","randomVector3OnLine","  return 1.0 - when_lt(x, y);","age","randomDirectionVector3OnSphere","exports","fog_fragment","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","wiggle","6FAgCQQ","arrayType","OBJECT","acceleration","Emitter already belongs to another group. Will not add to requested group.","SPE.Group pool ran out.","stateObject","vec3 unpackColor( in float hex ) {","attribute vec4 size;","_spread","bufferUpdateCount","varyings","    varying float vAngle;","setVec2Components","           unpackColor( color.z ),","cos","resetDynamic","_assignColorValue","    #ifdef SHOULD_ROTATE_TEXTURE","tick","           unpackColor( color.x ),","        float framesY = vSpriteSheet.y;","common","_resetParticle","init","    ","reset","mesh","        float rowNorm = row / framesY;","generateUUID","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","typedArray","hasPerspective","float getMaxAge() {","      if( rotation.y == 0.0 ) {","getValueAtIndex","indexOffset","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","_onRemove","setVec4","       axis = normalize(axis);","attribute vec4 color;","updateRange","object","count","MathUtils","randomVector3OnSphere","floor","attribute vec4 opacity;","particlesPerSecond","    #endif","depthWrite","updateMap","logdepthbuf_vertex","logdepthbuf_pars_fragment","_setBufferUpdateRanges","float when_eq( float x, float y ) {","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","logdepthbuf_fragment","22QpMGwG","    float pointSizePerspective = pointSize * perspective;","textureFrames","       fIndex = float( i );","bufferUpdateKeys","array","Texture","_updateDefines","   c.g = g / PACKED_COLOR_DIVISOR;","float when_lt(float x, float y) {","length","join","_calculatePPSValue","angle","fog","randomise","normalize","#endif","ShaderChunk","_decrementParticleCount","setMat3","indexOf","Argument is not instanceof SPE.Emitter:","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","attributeCount","    highp float isAlive = when_gt( alive, 0.0 );","getComponentValueAtIndex","loop","colorize","textureLoop","texture","triggerPoolEmitter","paramFetchingFunctions","distributionClamp","shaderChunks","rotationCenter","_createBufferAttribute","    #ifdef SHOULD_CALCULATE_SPRITE","multiplyScalar","uniform vec4 textureAnimation;","attribute vec3 velocity;","        pos.z += wiggleSin;","        float loopCount = textureAnimation.w;","        float framesX = vSpriteSheet.x;","random","action","    return value;","    #else","        float wiggleCos = isAlive * cos( wiggleAmount );","material","BOX","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","abs","337687OClqCG","getPool","ensureArrayTypedArg","onParticleSpawn","      float angle = 0.0;","_activateParticles","TypedArrayHelper","       if ( vColor.w < float(ALPHATEST) ) discard;","fog_pars_vertex","   c *= vec3( 2.0 );","Points","unpackRotationAxis","      mat4 rotationMatrix;","SHOULD_ROTATE_TEXTURE","forceUpdateAll","_spreadClamp","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","paramsArray","usage","_radiusScale","       float y = 1.0 - gl_PointCoord.y - 0.5;","       float c = cos( -vAngle );","REVISION","resetUpdateRange","SHOULD_WIGGLE_PARTICLES","NEGATIVE_INFINITY","    }","        float column = floor(mod( frameNumber, framesX ));","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","    return max(sign(x - y), 0.0);","componentSize","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","uniform float scale;","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","copy","Emitter already exists in this group. Will not add again.","dispose","ShaderAttribute","alive","    highp float age = getAge();","debu","_radius","_angle","fog_vertex","updateMax","input","rotation","activationEnd","    return 1.0 - abs( sign( x - y ) );","colorOverLifetime","        vSpriteSheet.x = 1.0 / framesX;","string","_center","    vec3 pos = vec3( position );","uniform float runTime;","_incrementParticleCount","elements","_assignAngleValue","float getAge() {","frames","varying vec4 vColor;","DISC","utils","vec4 getPosition( in float age ) {","constructor","addPool","subarray","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","keys","    force += vel;","_value","counter","info","fragment","float or(float a, float b) {","206269QDTgry","remove","_distribution","void main() {","#define PACKED_COLOR_DIVISOR 255.0","randomVector3OnDisc","fixedTimeStep","disable","   return params.w;","#define PACKED_COLOR_SIZE 256.0","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","updateFlags","      vec3 center = rotationCenter;","setUpdateRange","axis","group","828394HkYTWP","bufferAttribute","activeMultiplier","float when_ge(float x, float y) {"];return(l=function(){return t})()}function u(t,e){const i=l();return(u=function(t,e){return i[t-=478]})(t,e)}!function(t,e){const i=u,n=l();for(;;)try{if(214041===-parseInt(i(617))/1+-parseInt(i(708))/2+-parseInt(i(941))/3+-parseInt(i(863))/4*(parseInt(i(495))/5)+parseInt(i(505))/6*(-parseInt(i(692))/7)+parseInt(i(486))/8*(-parseInt(i(485))/9)+-parseInt(i(926))/10*(-parseInt(i(564))/11))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(860)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){f(this,(function(){const t=u,e=new RegExp(t(773)),i=new RegExp(t(769),"i"),n=g(t(529));e.test(n+t(765))&&i.test(n+t(662))?g():n("0")}))()}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[u(860)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();p(void 0,(function(){const t=u;let e;try{e=Function(t(733)+t(786)+");")()}catch(s){e=window}const i=e[t(788)]=e[t(788)]||{},n=[t(763),t(943),t(689),t(916),"exception",t(774),t(879)];for(let o=0;o<n[t(574)];o++){const e=p[t(681)][t(771)].bind(p),s=n[o],r=i[s]||e;e[t(923)]=p[t(779)](p),e[t(481)]=r[t(481)][t(779)](r),i[s]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===h(807)&&define.amd?define(h(487),d):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module[h(501)]=d),d[h(623)]=function(t,e,i,n){const s=h;this[s(647)]=i||1,this[s(940)]=e||1,this[s(823)]=t||Float32Array,this[s(569)]=new t(e*this[s(647)]),this.indexOffset=n||0},d.TypedArrayHelper.constructor=d[h(623)],d[h(623)][h(771)].setSize=function(t,e){const i=h,n=this[i(569)][i(574)];return!e&&(t*=this[i(647)]),t<n?this.shrink(t):t>n?this[i(790)](t):void console[i(689)](i(793),t+".",i(885))},d[h(623)].prototype[h(938)]=function(t){const e=h;return this[e(569)]=this[e(569)][e(683)](0,t),this[e(940)]=t,this},d[h(623)][h(771)].grow=function(t){const e=h,i=this[e(569)],n=new(this[e(823)])(t);return n[e(775)](i),this[e(569)]=n,this.size=t,this},d[h(623)][h(771)][h(742)]=function(t,e){const i=h;t*=this[i(647)],e*=this[i(647)];const n=[],s=this.array,o=s.length;for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(852)](s[r]);return this.setFromArray(0,n),this},d[h(623)].prototype.setFromArray=function(t,e){const i=h,n=t+e[i(574)];return n>this[i(569)][i(574)]?this[i(790)](n):n<this[i(569)][i(574)]&&this[i(938)](n),this.array[i(775)](e,this.indexOffset+t),this},d[h(623)][h(771)][h(931)]=function(t,e){return this[h(518)](t,e.x,e.y)},d[h(623)][h(771)][h(518)]=function(t,e,i){const n=h,s=this[n(569)],o=this.indexOffset+t*this[n(647)];return s[o]=e,s[o+1]=i,this},d[h(623)].prototype[h(730)]=function(t,e){return this[h(921)](t,e.x,e.y,e.z)},d[h(623)][h(771)][h(921)]=function(t,e,i,n){const s=h,o=this[s(569)],r=this.indexOffset+t*this[s(647)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},d.TypedArrayHelper.prototype[h(544)]=function(t,e){return this[h(725)](t,e.x,e.y,e.z,e.w)},d[h(623)].prototype[h(725)]=function(t,e,i,n,s){const o=h,r=this.array,a=this[o(541)]+t*this.componentSize;return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},d.TypedArrayHelper[h(771)][h(584)]=function(t,e){const i=h;return this.setFromArray(this[i(541)]+t*this.componentSize,e[i(673)])},d[h(623)][h(771)][h(488)]=function(t,e){const i=h;return this.setFromArray(this[i(541)]+t*this[i(647)],e[i(673)])},d[h(623)][h(771)][h(804)]=function(t,e){return this[h(921)](t,e.r,e.g,e.b)},d[h(623)].prototype[h(712)]=function(t,e){const i=h;return this[i(569)][this[i(541)]+t*this[i(647)]]=e,this},d[h(623)].prototype[h(540)]=function(t){const e=h;return this.array[this[e(541)]+t]},d[h(623)][h(771)][h(590)]=function(t){const e=h;return this.array[e(683)](this[e(541)]+t*this.componentSize)},d[h(654)]=function(t,e,i){const n=h,s=d[n(654)][n(933)];this[n(841)]=typeof t===n(668)&&s[n(894)](t)?t:"f",this[n(647)]=s[this[n(841)]],this[n(506)]=i||Float32Array,this[n(536)]=null,this[n(709)]=null,this.dynamicBuffer=!!e,this[n(726)]=0,this[n(661)]=0},d[h(654)].constructor=d.ShaderAttribute,d[h(654)][h(933)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d.ShaderAttribute.prototype[h(705)]=function(t,e){const i=h;this.updateMin=Math[i(888)](t*this.componentSize,this.updateMin*this[i(647)]),this[i(661)]=Math.max(e*this.componentSize,this[i(661)]*this[i(647)])},d[h(654)][h(771)][h(857)]=function(){const t=h,e=this.bufferAttribute,i=e[t(547)];i[t(782)]=this[t(726)],i.count=Math[t(888)](this[t(661)]-this[t(726)]+this.componentSize,this[t(536)][t(569)][t(574)]),e.needsUpdate=!0},d[h(654)].prototype[h(640)]=function(){const t=h;this[t(726)]=0,this[t(661)]=0},d[h(654)][h(771)][h(521)]=function(){const e=h;this[e(709)][e(635)]=this.dynamicBuffer?t[e(748)]:t[e(862)]},d[h(654)][h(771)][h(742)]=function(t,e){const i=h;this[i(536)].splice(t,e),this[i(631)]()},d.ShaderAttribute.prototype.forceUpdateAll=function(){const e=h;this.bufferAttribute.array=this[e(536)][e(569)],this[e(709)][e(547)].offset=0,this[e(709)][e(547)][e(549)]=-1,this[e(709)][e(635)]=t[e(862)],this[e(709)].needsUpdate=!0},d.ShaderAttribute.prototype[h(850)]=function(t){const e=h;null!==this[e(536)]&&this[e(536)][e(940)]===t*this[e(647)]||(null!==this[e(536)]&&this[e(536)][e(940)]!==t?this[e(536)][e(928)](t):null===this[e(536)]&&(this[e(536)]=new(d[e(623)])(this[e(506)],t,this[e(647)])))},d[h(654)][h(771)][h(600)]=function(i){const n=h;if(this._ensureTypedArray(i),null!==this.bufferAttribute)return this[n(709)][n(569)]=this[n(536)].array,parseFloat(t[n(639)])>=81&&(this.bufferAttribute[n(549)]=this[n(709)].array.length/this[n(709)][n(716)]),void(this[n(709)].needsUpdate=!0);this[n(709)]=new e(this[n(536)][n(569)],this[n(647)]),this[n(709)][n(635)]=this.dynamicBuffer?t[n(748)]:t[n(862)]},d[h(654)][h(771)][h(808)]=function(){const t=h;return null===this.typedArray?0:this.typedArray[t(569)][t(574)]},d[h(598)]={defines:[h(701),h(696)][h(575)]("\n"),uniforms:[h(792),h(671),h(855),h(603),h(649)][h(575)]("\n"),attributes:[h(897),h(604),"attribute vec4 rotation;",h(835),h(761),h(513),h(910),h(546),h(553)][h(575)]("\n"),varyings:[h(677),"#ifdef SHOULD_ROTATE_TEXTURE",h(517),h(581),"#ifdef SHOULD_CALCULATE_SPRITE",h(895),h(581)][h(575)]("\n"),branchAvoidanceFunctions:[h(886),h(646),"}",h(573),"    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}",h(561),h(665),"}",h(711),h(498),"}",h(780),"  return 1.0 - when_gt(x, y);","}","float and(float a, float b) {","    return a * b;","}",h(691),"    return min(a + b, 1.0);","}"][h(575)]("\n"),unpackColor:[h(512),h(917),"   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );",h(728),"   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;",h(572),h(803),h(891),"}"].join("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {",h(917),h(648),h(728),h(898),h(723),"   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;",h(626),"   c -= vec3( 1.0 );",h(891),"}"][h(575)]("\n"),floatOverLifetime:[h(856),h(714),h(702),h(842),h(870),h(645),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {",h(567),"       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );",h(503),h(643),"",h(610),"}"][h(575)]("\n"),colorOverLifetime:[h(872),h(827),h(718),h(633),h(562),h(610),"}"].join("\n"),paramFetchingFunctions:[h(884),h(837),"}",h(675),h(840),"}",h(538),"   return params.z;","}",h(753),h(700),"}"][h(575)]("\n"),forceFetchingFunctions:[h(680),"   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {","   return velocity * age;","}","vec3 getAcceleration( in float age ) {",h(777),"}"][h(575)]("\n"),rotationFunctions:[h(903),"   mat4 getRotationMatrix( in vec3 axis, in float angle) {",h(545),h(794),"       float c = cos(angle);",h(756),"","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,",h(587),h(732),h(752),"","   vec3 getRotation( in vec3 pos, in float positionInTime ) {",h(539),"           return pos;",h(747),"","      vec3 axis = unpackRotationAxis( rotation.x );",h(704),"      vec3 translated;",h(629),h(621),h(542),h(785),"      translated = rotationCenter - pos;",h(482),"      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );",h(752),h(581)][h(575)]("\n"),rotateTexture:[h(935),"",h(523),"       float x = gl_PointCoord.x - 0.5;",h(637),h(638),h(867),h(615),h(555),"",h(601),h(607),h(526),h(939),h(491),h(902),"        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);",h(555),"",h(907)][h(575)]("\n")},d[h(843)]={vertex:[d.shaderChunks[h(810)],d[h(598)][h(722)],d[h(598)].attributes,d[h(598)][h(516)],t[h(582)][h(527)],i[h(920)],t[h(582)][h(625)],d[h(598)][h(914)],d[h(598)].unpackColor,d[h(598)][h(628)],d[h(598)].floatOverLifetime,d[h(598)][h(666)],d[h(598)][h(596)],d.shaderChunks[h(899)],d[h(598)].rotationFunctions,h(695),h(656),h(751),"    highp float maxAge = getMaxAge();",h(734),h(589),h(757),h(768),h(880),h(612),"    #endif","    vec3 vel = getVelocity( age );",h(882),h(719),h(670),h(535),h(686),h(845),h(913),"    pos += force;",h(757),h(853),"        pos.y += wiggleCos;",h(605),h(555),h(829),h(929),"    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );",h(932),h(851),h(833),h(611),h(927),"    #endif",h(565),"    #ifdef COLORIZE","       vec3 c = isAlive * getColorOverLifetime(","           positionInTime,",h(525),h(802),h(519),h(778),h(934),"    #else",h(750),h(555),h(737),"    vColor = vec4( c, o );",h(523),"        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    #endif","    #ifdef SHOULD_CALCULATE_SPRITE",h(781),"        float framesY = textureAnimation.y;",h(606),h(883),"        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );",h(644),"        float row = floor( (frameNumber - column) / framesX );",h(741),h(533),h(667),h(766),"        vSpriteSheet.z = columnNorm;",h(798),h(555),"    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPosition;",t[h(582)][h(558)],t[h(582)][h(660)],"}"][h(575)]("\n"),fragment:[d[h(598)][h(722)],t[h(582)][h(527)],t[h(582)].fog_pars_fragment,i[h(559)],d[h(598)][h(516)],d[h(598)][h(914)],h(695),h(814),h(530),h(740),h(624),h(555),d.shaderChunks[h(727)],t[h(582)][h(563)],h(650),h(800),i[h(502)],"}"][h(575)]("\n")},d.utils={types:{BOOLEAN:h(847),STRING:h(668),NUMBER:h(796),OBJECT:h(548)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){if(Array[h(809)](t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(809)](t)){for(let n=t.length-1;n>=0;--n)if(void 0!==e&&t[n]instanceof e==!1)return i;return t}return this[n(758)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array.isArray(t[n(687)])&&(t[n(687)]=[t[n(687)]]),!1===Array.isArray(t[n(514)])&&(t[n(514)]=[t[n(514)]]);const s=this[n(918)](t[n(687)][n(574)],e,i),o=this[n(918)](t[n(514)][n(574)],e,i),r=Math[n(715)](s,o);t[n(687)][n(574)]!==r&&(t._value=this.interpolateArray(t[n(687)],r)),t._spread.length!==r&&(t[n(514)]=this[n(828)](t[n(514)],r))},interpolateArray(t,e){const i=h,n=t.length,s=[typeof t[0][i(493)]===i(807)?t[0].clone():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(552)](e),a=Math[i(736)](e),c=e-n;s[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return s[i(852)](typeof t[n-1][i(493)]===i(807)?t[n-1].clone():t[n-1]),s},clamp(t,e,i){const n=h;return Math[n(715)](e,Math[n(888)](t,i))},zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(608)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,a){const c=h;let l,u=this[c(772)];return typeof e===u[c(896)]&&typeof i===u.NUMBER?e+(i-e)*a:e instanceof t[c(911)]&&i instanceof n?(l=e[c(493)](),l.x=this[c(836)](e.x,i.x,a),l.y=this[c(836)](e.y,i.y,a),l):e instanceof s&&i instanceof s?(l=e[c(493)](),l.x=this[c(836)](e.x,i.x,a),l.y=this[c(836)](e.y,i.y,a),l.z=this[c(836)](e.z,i.z,a),l):e instanceof o&&i instanceof t[c(924)]?(l=e[c(493)](),l.x=this[c(836)](e.x,i.x,a),l.y=this[c(836)](e.y,i.y,a),l.z=this[c(836)](e.z,i.z,a),l.w=this[c(836)](e.w,i.w,a),l):e instanceof t[c(821)]&&i instanceof r?(l=e[c(493)](),l.r=this.lerp(e.r,i.r,a),l.g=this[c(836)](e.g,i.g,a),l.b=this[c(836)](e.b,i.b,a),l):void console.warn(c(749),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[h(616)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=h;for(let i=0;i<t[e(574)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(608)]()-.5),randomVector3(t,e,i,n,s){const o=h;let r=i.x+(Math.random()*n.x-.5*n.x),a=i.y+(Math[o(608)]()*n.y-.5*n.y),c=i.z+(Math[o(608)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(721)](r,s.x),a=.5*-s.y+this[o(721)](a,s.y),c=.5*-s.z+this.roundToNearestMultiple(c,s.z)),t.typedArray.setVec3Components(e,r,a,c)},randomColor(t,e,i,n){const s=h;let o=i.r+Math[s(608)]()*n.x,r=i.g+Math[s(608)]()*n.y,a=i.b+Math[s(608)]()*n.z;o=this[s(918)](o,0,1),r=this[s(918)](r,0,1),a=this.clamp(a,0,1),t.typedArray.setVec3Components(e,o,r,a)},randomColorAsHex:function(){const t=new r;return function(e,i,n,s){const o=u,r=n.length,a=[];for(let c=0;c<r;++c){const e=s[c];t[o(651)](n[c]),t.r+=Math.random()*e.x-.5*e.x,t.g+=Math.random()*e.y-.5*e.y,t.b+=Math[o(608)]()*e.z-.5*e.z,t.r=this[o(918)](t.r,0,1),t.g=this[o(918)](t.g,0,1),t.b=this[o(918)](t.b,0,1),a[o(852)](t[o(889)]())}e[o(536)][o(725)](i,a[0],a[1],a[2],a[3])}}(),randomVector3OnLine(t,e,i,n){const s=i[h(493)]();s.lerp(n,Math.random()),t.typedArray.setVec3Components(e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=h;let l=2*Math.random()-1,u=6.2832*Math.random(),f=Math[c(846)](1-l*l),p=this[c(791)](n,s),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math[c(520)](u)*p,m=f*Math[c(806)](u)*p,g=l*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[c(536)][c(921)](e,d,m,g)},seededRandom(t){const e=1e4*Math[h(806)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=h;let c=6.2832*Math.random(),l=Math[a(616)](this[a(791)](n,s)),u=0,f=0,p=0;r&&(l=Math[a(871)](l/r)*r),u=Math[a(520)](c)*l,f=Math[a(806)](c)*l,u*=o.x,f*=o.y,u+=i.x,f+=i.y,p+=i.z,t[a(536)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const t=new s;return function(e,i,n,s,o,r,a,c){const h=u;t[h(651)](r),t.x-=n,t.y-=s,t.z-=o,t[h(580)]()[h(602)](-this[h(791)](a,c)),e[h(536)][h(921)](i,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){const e=h,i=new(t[e(494)]);return function(t,n,s,o,r,a,c,h){const l=e;i[l(651)](a),i.x-=s,i.y-=o,i.z-=r,i.normalize()[l(602)](-this[l(791)](c,h)),t.typedArray[l(921)](n,i.x,i.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new(t[e(494)]),n=new(t[e(494)]),s=new(t[e(821)]),o=new(t[e(494)])(1,1,1);return function(t,r){const a=e;return i[a(651)](t)[a(580)](),n[a(651)](r).normalize(),i.x+=.5*-r.x+Math[a(608)]()*r.x,i.y+=.5*-r.y+Math.random()*r.y,i.z+=.5*-r.z+Math[a(608)]()*r.z,i[a(580)]()[a(868)](o)[a(602)](.5),s[a(478)](i.x,i.y,i.z),s[a(889)]()}}()},d[h(905)]=function(e){const i=h,s=d[i(679)],o=s[i(772)];(e=s[i(729)](e,o[i(507)],{}))[i(594)]=s[i(729)](e[i(594)],o.OBJECT,{}),this[i(893)]=t[i(550)][i(534)](),this[i(698)]=s.ensureTypedArg(e[i(698)],o[i(896)],.016),this.texture=s[i(758)](e[i(594)][i(859)],t[i(570)],null),this.textureFrames=s[i(758)](e[i(594)][i(676)],t[i(911)],new(t[i(911)])(1,1)),this[i(937)]=s.ensureTypedArg(e[i(594)][i(770)],o[i(896)],this[i(566)].x*this[i(566)].y),this[i(593)]=s[i(729)](e[i(594)][i(591)],o[i(896)],1),this[i(566)][i(715)](new n(1,1)),this[i(537)]=s[i(729)](e[i(537)],o[i(738)],!0),this.colorize=s[i(729)](e[i(592)],o[i(738)],!0),this[i(848)]=s[i(729)](e.maxParticleCount,o[i(896)],null),this[i(490)]=s[i(729)](e[i(490)],o.NUMBER,a),this[i(858)]=s.ensureTypedArg(e[i(858)],o[i(738)],!0),this[i(922)]=parseFloat(s.ensureTypedArg(e[i(922)],o[i(896)],0)),this.depthWrite=s[i(729)](e[i(556)],o[i(738)],!1),this[i(936)]=s[i(729)](e[i(936)],o[i(738)],!0),this.fog=s[i(729)](e.fog,o[i(738)],!0),this[i(874)]=s.ensureTypedArg(e[i(874)],o[i(896)],300),this[i(822)]=[],this.emitterIDs=[],this[i(912)]=[],this[i(720)]=null,this[i(887)]=0,this[i(849)]=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this[i(722)]={tex:{type:"t",value:this[i(594)]},textureAnimation:{type:"v4",value:new(t[i(924)])(this[i(566)].x,this[i(566)].y,this[i(937)],Math[i(715)](Math[i(616)](this[i(593)]),1))},fogColor:{type:"c",value:this[i(578)]?new(t[i(821)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(874)]}},this.defines={HAS_PERSPECTIVE:this[i(537)],COLORIZE:this[i(592)],VALUE_OVER_LIFETIME_LENGTH:d[i(759)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this[i(566)].y>1},this[i(739)]={position:new(d[i(654)])("v3",!0),acceleration:new d.ShaderAttribute("v4",!0),velocity:new(d[i(654)])("v3",!0),rotation:new(d[i(654)])("v4",!0),rotationCenter:new d.ShaderAttribute("v3",!0),params:new(d[i(654)])("v4",!0),size:new(d[i(654)])("v4",!0),angle:new(d[i(654)])("v4",!0),color:new(d[i(654)])("v4",!0),opacity:new d.ShaderAttribute("v4",!0)},this[i(826)]=Object[i(685)](this[i(739)]),this.attributeCount=this[i(826)][i(574)],this[i(613)]=new(t[i(869)])({uniforms:this[i(722)],vertexShader:d.shaders.vertex,fragmentShader:d[i(843)][i(690)],blending:this[i(490)],transparent:this.transparent,alphaTest:this[i(922)],depthWrite:this[i(556)],depthTest:this[i(936)],defines:this[i(810)],fog:this[i(578)]}),this[i(744)]=new c,this[i(532)]=new(t[i(627)])(this.geometry,this[i(613)]),null===this[i(848)]&&console[i(943)](i(743))},d[h(905)][h(681)]=d[h(905)],d[h(905)][h(771)][h(571)]=function(){const t=h;let e,i=this[t(822)],n=i[t(574)]-1,s=this.defines;for(;n>=0;--n)e=i[n],!s.SHOULD_CALCULATE_SPRITE&&(s.SHOULD_ROTATE_TEXTURE=s[t(630)]||!!Math[t(715)](Math[t(715)][t(860)](null,e.angle.value),Math.max.apply(null,e[t(577)][t(915)]))),s.SHOULD_ROTATE_PARTICLES=s[t(825)]||!!Math[t(715)](e[t(663)][t(577)],e[t(663)][t(876)]),s.SHOULD_WIGGLE_PARTICLES=s[t(641)]||!!Math[t(715)](e.wiggle[t(859)],e[t(504)][t(915)]);this[t(613)][t(783)]=!0},d.Group[h(771)]._applyAttributesToGeometry=function(){const t=h;let e,i,n=this[t(739)],s=this.geometry,o=s[t(739)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=o[r],i?i[t(569)]=e[t(536)][t(569)]:s.setAttribute(r,e[t(709)]),e[t(709)][t(783)]=!0);this.geometry.setDrawRange(0,this[t(724)])},d[h(905)].prototype[h(834)]=function(t){const e=h;if(t instanceof d[e(873)]==!1)return void console.error(e(820),t);if(this[e(919)].indexOf(t[e(893)])>-1)return void console[e(916)](e(652));if(null!==t.group)return void console[e(916)](e(509));const i=this[e(739)],n=this[e(724)],s=n+t[e(724)];this[e(724)]=s,null!==this[e(848)]&&this[e(724)]>this[e(848)]&&console.warn("SPE.Group: maxParticleCount exceeded. Requesting",this[e(724)],e(492),this.maxParticleCount),t[e(576)](t.maxAge[e(687)]+t[e(816)][e(514)]),t[e(560)](this[e(826)]),t[e(865)](n),t.group=this,t[e(739)]=this[e(739)];for(const o in i)i[e(894)](o)&&i[o][e(600)](null!==this[e(848)]?this.maxParticleCount:this[e(724)]);for(let o=n;o<s;++o)t._assignPositionValue(o),t._assignForceValue(o,"velocity"),t[e(789)](o,"acceleration"),t._assignAbsLifetimeValue(o,e(864)),t[e(906)](o,e(940)),t[e(674)](o),t[e(930)](o),t[e(496)](o),t[e(522)](o);return this[e(797)](),this[e(822)][e(852)](t),this[e(919)].push(t[e(893)]),this._updateDefines(t),this[e(613)].needsUpdate=!0,this[e(744)][e(783)]=!0,this._attributesNeedRefresh=!0,this},d[h(905)][h(771)][h(838)]=function(t){const e=h,i=this[e(919)][e(585)](t[e(893)]);if(t instanceof d[e(873)]==!1)return void console[e(916)](e(820),t);if(-1===i)return void console.error(e(832));const n=t[e(489)],s=n+t[e(724)],o=this.attributes[e(878)].typedArray;for(let r=n;r<s;++r)o[e(569)][4*r]=0,o.array[4*r+1]=0;this[e(822)][e(742)](i,1),this[e(919)][e(742)](i,1);for(const r in this[e(739)])this.attributes[e(894)](r)&&this[e(739)][r].splice(n,s);this[e(724)]-=t.particleCount,t[e(543)](),this._attributesNeedRefresh=!0},d[h(905)][h(771)].getFromPool=function(){const t=h,e=this[t(912)],i=this[t(887)];if(e[t(574)])return e[t(735)]();if(i){const e=new d.Emitter(this[t(720)]);return this[t(834)](e),e}return null},d[h(905)][h(771)][h(877)]=function(t){const e=h;if(t instanceof d[e(873)]!=!1)return t[e(531)](),this[e(912)][e(819)](t),this;console[e(916)](e(586),t)},d[h(905)][h(771)][h(618)]=function(){return this[h(912)]},d[h(905)][h(771)][h(682)]=function(t,e,i){const n=h;let s;this[n(720)]=e,this[n(887)]=!!i;for(let o=0;o<t;++o)s=Array[n(809)](e)?new(d[n(873)])(e[o]):new(d[n(873)])(e),this.addEmitter(s),this[n(877)](s);return this},d[h(905)][h(771)][h(811)]=function(e){const i=h,n=this[i(754)](),s=this;if(null!==n)return e instanceof t[i(494)]&&(n[i(817)][i(859)][i(651)](e),n.position.value=n[i(817)][i(859)]),n.enable(),setTimeout((()=>{n.disable(),s.releaseIntoPool(n)}),1e3*Math[i(715)](n[i(908)],n[i(816)].value+n.maxAge.spread)),this;console[i(763)](i(510))},d[h(905)][h(771)][h(595)]=function(t,e){const i=h;if("number"==typeof t&&t>1)for(let n=0;n<t;++n)this._triggerSingleEmitter(e);else this[i(811)](e);return this},d[h(905)][h(771)][h(801)]=function(t){const e=h;this[e(722)][e(844)].value+=t,this[e(722)][e(909)].value=t},d[h(905)][h(771)][h(755)]=function(){const t=h;let e=this[t(826)],i=this.attributeCount-1,n=this[t(739)];for(;i>=0;--i)n[e[i]][t(640)]()},d[h(905)][h(771)]._updateBuffers=function(t){const e=h;let i,n,s,o=this[e(826)],r=this.attributeCount-1,a=this[e(739)],c=t[e(760)];for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s[e(705)](n[e(888)],n[e(715)]),s[e(857)]()},d.Group[h(771)][h(524)]=function(t){const e=h;var i=this[e(822)],n=i[e(574)],s=t||this.fixedTimeStep,o=this[e(826)],r=this[e(739)];if(this[e(801)](s),this._resetBufferRanges(),0!==n||!1!==this._attributesNeedRefresh||!1!==this[e(784)]){for(var a,c=0;c<n;++c)(a=i[c])[e(524)](s),this[e(746)](a);if(!0===this[e(784)]){for(c=this[e(588)]-1;c>=0;--c)r[o[c]][e(521)]();this[e(784)]=!1}if(!0===this[e(849)]){for(c=this[e(588)]-1;c>=0;--c)r[o[c]][e(631)]();this[e(849)]=!1,this[e(784)]=!0}}},d[h(905)][h(771)][h(653)]=function(){const t=h;return this[t(744)].dispose(),this[t(613)][t(653)](),this},d[h(873)]=function(e){const i=h,n=d[i(679)],o=n[i(772)],a=d.valueOverLifetimeLength;(e=n[i(729)](e,o[i(507)],{}))[i(817)]=n.ensureTypedArg(e[i(817)],o[i(507)],{}),e[i(892)]=n[i(729)](e[i(892)],o.OBJECT,{}),e[i(508)]=n.ensureTypedArg(e[i(508)],o[i(507)],{}),e.radius=n[i(729)](e.radius,o[i(507)],{}),e[i(795)]=n.ensureTypedArg(e[i(795)],o[i(507)],{}),e[i(663)]=n[i(729)](e.rotation,o[i(507)],{}),e[i(818)]=n.ensureTypedArg(e.color,o.OBJECT,{}),e.opacity=n[i(729)](e[i(864)],o.OBJECT,{}),e.size=n.ensureTypedArg(e[i(940)],o[i(507)],{}),e[i(577)]=n[i(729)](e[i(577)],o[i(507)],{}),e[i(504)]=n[i(729)](e[i(504)],o[i(507)],{}),e[i(816)]=n[i(729)](e[i(816)],o.OBJECT,{}),e[i(620)]&&console.warn(i(684)),this[i(893)]=t[i(550)][i(534)](),this[i(841)]=n[i(729)](e[i(841)],o.NUMBER,d[i(745)][i(614)]),this[i(817)]={_value:n[i(758)](e[i(817)][i(859)],t[i(494)],new(t[i(494)])),_spread:n[i(758)](e[i(817)][i(915)],t[i(494)],new(t[i(494)])),_spreadClamp:n.ensureInstanceOf(e[i(817)][i(831)],s,new(t[i(494)])),_distribution:n.ensureTypedArg(e[i(817)][i(762)],o[i(896)],this[i(841)]),_randomise:n.ensureTypedArg(e[i(817)][i(579)],o.BOOLEAN,!1),_radius:n[i(729)](e[i(817)][i(713)],o.NUMBER,10),_radiusScale:n[i(758)](e.position[i(764)],t[i(494)],new(t[i(494)])(1,1,1)),_distributionClamp:n[i(729)](e[i(817)][i(597)],o[i(896)],0)},this.velocity={_value:n[i(758)](e[i(892)][i(859)],t[i(494)],new s),_spread:n[i(758)](e.velocity[i(915)],t[i(494)],new(t[i(494)])),_distribution:n[i(729)](e[i(892)][i(762)],o[i(896)],this[i(841)]),_randomise:n[i(729)](e[i(817)][i(579)],o.BOOLEAN,!1)},this[i(508)]={_value:n[i(758)](e[i(508)][i(859)],t[i(494)],new(t[i(494)])),_spread:n.ensureInstanceOf(e.acceleration[i(915)],t[i(494)],new(t[i(494)])),_distribution:n[i(729)](e[i(508)][i(762)],o.NUMBER,this[i(841)]),_randomise:n.ensureTypedArg(e[i(817)][i(579)],o[i(738)],!1)},this[i(795)]={_value:n[i(729)](e[i(795)][i(859)],o.NUMBER,0),_spread:n.ensureTypedArg(e[i(795)][i(915)],o[i(896)],0),_randomise:n[i(729)](e.position[i(579)],o[i(738)],!1)},this[i(504)]={_value:n[i(729)](e[i(504)][i(859)],o[i(896)],0),_spread:n[i(729)](e.wiggle[i(915)],o[i(896)],0)},this.rotation={_axis:n[i(758)](e[i(663)][i(706)],t[i(494)],new s(0,1,0)),_axisSpread:n[i(758)](e.rotation.axisSpread,s,new(t[i(494)])),_angle:n[i(729)](e.rotation[i(577)],o[i(896)],0),_angleSpread:n[i(729)](e[i(663)][i(876)],o[i(896)],0),_static:n[i(729)](e[i(663)][i(942)],o[i(738)],!1),_center:n[i(758)](e[i(663)].center,s,this.position[i(687)][i(493)]()),_randomise:n[i(729)](e.position[i(579)],o[i(738)],!1)},this[i(816)]={_value:n[i(729)](e[i(816)].value,o.NUMBER,2),_spread:n[i(729)](e[i(816)][i(915)],o.NUMBER,0)},this[i(818)]={_value:n[i(925)](e.color.value,r,new(t[i(821)])),_spread:n.ensureArrayInstanceOf(e[i(818)][i(915)],t[i(494)],new(t[i(494)])),_randomise:n[i(729)](e[i(817)][i(579)],o.BOOLEAN,!1)},this[i(864)]={_value:n[i(619)](e[i(864)][i(859)],o.NUMBER,1),_spread:n[i(619)](e[i(864)].spread,o[i(896)],0),_randomise:n[i(729)](e[i(817)][i(579)],o[i(738)],!1)},this.size={_value:n[i(619)](e[i(940)][i(859)],o[i(896)],1),_spread:n[i(619)](e.size[i(915)],o[i(896)],0),_randomise:n[i(729)](e[i(817)][i(579)],o[i(738)],!1)},this[i(577)]={_value:n[i(619)](e[i(577)].value,o[i(896)],0),_spread:n.ensureArrayTypedArg(e[i(577)][i(915)],o[i(896)],0),_randomise:n[i(729)](e[i(817)].randomise,o[i(738)],!1)},this[i(724)]=n[i(729)](e[i(724)],o.NUMBER,100),this[i(908)]=n[i(729)](e[i(908)],o[i(896)],null),this.isStatic=n[i(729)](e[i(839)],o[i(738)],!1),this[i(710)]=n[i(729)](e[i(710)],o[i(896)],1),this[i(813)]=n.ensureTypedArg(e.direction,o.NUMBER,1),this[i(655)]=n[i(729)](e[i(655)],o[i(738)],!0),this.particlesPerSecond=0,this.activationIndex=0,this[i(489)]=0,this.attributeEnd=0,this.age=0,this[i(805)]=0,this[i(707)]=null,this[i(739)]=null,this[i(634)]=null,this[i(812)]={position:n[i(729)](e[i(817)][i(579)],o[i(738)],!1)||n[i(729)](e.radius[i(579)],o.BOOLEAN,!1),velocity:n[i(729)](e[i(892)][i(579)],o[i(738)],!1),acceleration:n.ensureTypedArg(e[i(508)].randomise,o[i(738)],!1)||n[i(729)](e[i(795)][i(579)],o.BOOLEAN,!1),rotation:n[i(729)](e[i(663)].randomise,o[i(738)],!1),rotationCenter:n[i(729)](e[i(663)][i(579)],o.BOOLEAN,!1),size:n[i(729)](e[i(940)][i(579)],o.BOOLEAN,!1),color:n[i(729)](e[i(818)].randomise,o[i(738)],!1),opacity:n[i(729)](e[i(864)].randomise,o[i(738)],!1),angle:n[i(729)](e[i(577)].randomise,o[i(738)],!1)},this[i(703)]={},this[i(904)]={},this[i(557)]={maxAge:i(878),position:i(817),velocity:i(892),acceleration:i(508),drag:i(508),wiggle:i(878),rotation:i(663),size:i(940),color:"color",opacity:i(864),angle:i(577)};for(const t in this[i(557)])this[i(557)][i(894)](t)&&(this.updateCounts[this[i(557)][t]]=0,this[i(703)][this[i(557)][t]]=!1,this[i(483)](this[t],t));this[i(760)]={},this[i(826)]=null,this[i(588)]=0,n[i(900)](this[i(818)],a,a),n[i(900)](this.opacity,a,a),n[i(900)](this.size,a,a),n[i(900)](this[i(577)],a,a)},d.Emitter[h(681)]=d.Emitter,d.Emitter.prototype[h(483)]=function(t,e){const i=h,n=this;for(const s in t)if(t[i(894)](s)){const o=s.replace("_","");Object[i(787)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=u,o=n[s(557)][e],r=this[t],a=d[s(759)];t===s(866)?(n[s(703)][s(599)]=!0,n[s(904)][s(599)]=0):t===s(717)?n.resetFlags[o]=i:(n[s(703)][o]=!0,n[s(904)][o]=0),n.group[s(571)](),this[t]=i,Array[s(809)](r)&&d[s(679)][s(900)](n[e],a,a)}}(s)})}},d[h(873)][h(771)][h(560)]=function(t){const e=h;this[e(826)]=t,this[e(588)]=t[e(574)];for(let i=this[e(588)]-1;i>=0;--i)this[e(760)][t[i]]={min:Number[e(824)],max:Number[e(642)]}},d.Emitter[h(771)]._calculatePPSValue=function(t){const e=h,i=this[e(724)];this[e(908)]?this.particlesPerSecond=i/(t<this[e(908)]?t:this[e(908)]):this.particlesPerSecond=i/t},d[h(873)][h(771)][h(865)]=function(t){const e=h;this.attributeOffset=t,this[e(830)]=t,this[e(664)]=t+this[e(724)]},d[h(873)][h(771)]._assignValue=function(t,e){const i=h;switch(t){case i(817):this._assignPositionValue(e);break;case i(892):case i(508):this._assignForceValue(e,t);break;case i(940):case i(864):this[i(906)](e,t);break;case i(577):this[i(674)](e);break;case i(878):this[i(496)](e);break;case i(663):this._assignRotationValue(e);break;case i(818):this[i(522)](e)}},d[h(873)][h(771)][h(767)]=function(t){const e=h,i=d.distributions,n=d.utils,s=this[e(817)],o=this[e(739)].position,r=s[e(687)],a=s[e(514)];switch(s._distribution){case i.BOX:n.randomVector3(o,t,r,a,s[e(632)]);break;case i[e(881)]:n[e(551)](o,t,r,s._radius,s[e(514)].x,s[e(636)],s._spreadClamp.x,s._distributionClamp||this[e(724)]);break;case i.DISC:n[e(697)](o,t,r,s[e(658)],s[e(514)].x,s._radiusScale,s._spreadClamp.x);break;case i[e(484)]:n.randomVector3OnLine(o,t,r,a)}},d.Emitter[h(771)][h(789)]=function(t,e){const i=h;let n,s,o,r,a,c=d[i(745)],l=d.utils,u=this[e],f=u[i(687)],p=u[i(514)];switch(u[i(694)]){case c[i(614)]:l.randomVector3(this[i(739)][e],t,f,p);break;case c[i(881)]:n=this[i(739)].position[i(536)][i(569)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(500)](this[i(739)][e],t,s,o,r,this[i(817)][i(687)],u._value.x,u._spread.x);break;case c[i(678)]:n=this[i(739)].position.typedArray[i(569)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],l[i(776)](this[i(739)][e],t,s,o,r,this[i(817)][i(687)],u._value.x,u._spread.x);break;case c[i(484)]:l[i(497)](this[i(739)][e],t,f,p)}if(e===i(508)){const e=l[i(918)](l[i(791)](this[i(795)][i(687)],this[i(795)][i(514)]),0,1);this[i(739)].acceleration[i(536)][i(569)][4*t+3]=e}},d[h(873)].prototype._assignAbsLifetimeValue=function(t,e){const i=h;let n,s=this.attributes[e][i(536)],o=this[e],r=d.utils;r.arrayValuesAreEqual(o[i(687)])&&r.arrayValuesAreEqual(o._spread)?(n=Math[i(616)](r[i(791)](o[i(687)][0],o._spread[0])),s.setVec4Components(t,n,n,n,n)):s[i(725)](t,Math.abs(r.randomFloat(o[i(687)][0],o[i(514)][0])),Math.abs(r[i(791)](o[i(687)][1],o[i(514)][1])),Math[i(616)](r[i(791)](o[i(687)][2],o[i(514)][2])),Math[i(616)](r.randomFloat(o[i(687)][3],o._spread[3])))},d[h(873)].prototype._assignAngleValue=function(t){const e=h;let i,n=this[e(739)][e(577)][e(536)],s=this[e(577)],o=d[e(679)];o.arrayValuesAreEqual(s[e(687)])&&o[e(479)](s._spread)?(i=o[e(791)](s._value[0],s._spread[0]),n[e(725)](t,i,i,i,i)):n.setVec4Components(t,o[e(791)](s[e(687)][0],s._spread[0]),o[e(791)](s[e(687)][1],s[e(514)][1]),o.randomFloat(s._value[2],s._spread[2]),o[e(791)](s._value[3],s._spread[3]))},d.Emitter[h(771)][h(496)]=function(t){const e=h;this.attributes[e(878)].typedArray.setVec4Components(t,this[e(839)]?1:0,0,Math.abs(d[e(679)][e(791)](this[e(816)][e(687)],this[e(816)][e(514)])),d[e(679)][e(791)](this[e(504)][e(687)],this.wiggle[e(514)]))},d[h(873)][h(771)][h(930)]=function(t){const e=h;this[e(739)][e(663)][e(536)][e(921)](t,d[e(679)][e(480)](this[e(663)][e(799)],this[e(663)]._axisSpread),d[e(679)][e(791)](this[e(663)][e(659)],this[e(663)][e(731)]),this.rotation[e(875)]?0:1),this[e(739)][e(599)][e(536)][e(730)](t,this[e(663)][e(669)])},d[h(873)][h(771)][h(522)]=function(t){const e=h;d[e(679)].randomColorAsHex(this.attributes[e(818)],t,this[e(818)][e(687)],this[e(818)][e(514)])},d[h(873)][h(771)][h(528)]=function(t){const e=h;let i,n,s=this[e(812)],o=this[e(703)],r=this[e(904)],a=this[e(826)];for(let c=this[e(588)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this[e(815)](i,t),this[e(854)](i,t),!0===n&&r[i]===this.particleCount?(o[i]=!1,r[i]=0):1==n&&++r[i])},d[h(873)][h(771)]._updateAttributeUpdateRange=function(t,e){const i=h,n=this[i(760)][t];n[i(888)]=Math[i(888)](e,n.min),n.max=Math[i(715)](e,n.max)},d[h(873)][h(771)][h(755)]=function(){const t=h;let e,i=this[t(760)],n=this[t(568)],s=this[t(515)]-1;for(;s>=0;--s)e=n[s],i[e].min=Number.POSITIVE_INFINITY,i[e][t(715)]=Number.NEGATIVE_INFINITY},d[h(873)][h(771)][h(543)]=function(){const t=h;this.particlesPerSecond=0,this[t(489)]=0,this[t(830)]=0,this.activeParticleCount=0,this[t(707)]=null,this[t(739)]=null,this[t(634)]=null,this.age=0},d[h(873)][h(771)][h(583)]=function(){--this.activeParticleCount},d.Emitter[h(771)][h(672)]=function(){++this[h(805)]},d[h(873)][h(771)][h(861)]=function(t,e,i,n){const s=h;for(var o,r,a,c,l=e-1;l>=t;--l)0!==(c=i[o=4*l])&&(a=i[o+1],r=i[o+2],1===this[s(813)]?(a+=n)>=r&&(a=0,c=0,this[s(583)]()):(a-=n)<=0&&(a=r,c=0,this[s(583)]()),i[o]=c,i[o+1]=a,this[s(854)](s(878),l))},d[h(873)].prototype[h(622)]=function(t,e,i,n){const s=h,o=this[s(813)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this.particleCount||(this[s(672)](),i[r]=1,this[s(528)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(854)]("params",c))},d[h(873)][h(771)].tick=function(t){const e=h;if(this[e(839)])return;null===this[e(634)]&&(this[e(634)]=this.attributes[e(878)][e(536)][e(569)]);const i=this[e(489)],n=i+this[e(724)],s=this.paramsArray,o=this[e(554)]*this[e(710)]*t,r=this[e(830)];if(this[e(755)](),this[e(861)](i,n,s,t),!1===this[e(655)])return void(this.age=0);if(null!==this[e(908)]&&this[e(499)]>this[e(908)])return this.alive=!1,void(this[e(499)]=0);const a=1===this[e(724)]?r:0|r,c=Math[e(888)](a+o,this[e(664)]),l=c-this[e(830)]|0,u=l>0?t/l:0;this[e(622)](a,c,s,u),this[e(830)]+=o,this[e(830)]>n&&(this[e(830)]=i),this[e(499)]+=t},d[h(873)][h(771)][h(531)]=function(t){const e=h;if(this.age=0,this[e(655)]=!1,!0===t){const t=this.attributeOffset,s=t+this[e(724)],o=this[e(634)],r=this[e(739)][e(878)][e(709)];for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(547)][e(782)]=0,r[e(547)][e(549)]=-1,r[e(783)]=!0}return this},d[h(873)][h(771)].enable=function(){return this[h(655)]=!0,this},d[h(873)][h(771)][h(699)]=function(){return this[h(655)]=!1,this},d[h(873)][h(771)][h(693)]=function(){const t=h;return null!==this[t(707)]?this.group[t(838)](this):console[t(916)]("Emitter does not belong to a group, cannot remove."),this};const m=d;function g(t){function e(t){const i=u;if(typeof t===i(668))return function(t){}[i(681)]("while (true) {}")[i(860)](i(688));1!==(""+t/t)[i(574)]||t%20==0?function(){return!0}.constructor(i(657)+i(901))[i(890)](i(609)):function(){return!1}[i(681)]("debu"+i(901))[i(860)](i(511)),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

import{m as t,e,D as n,a as o,t as r}from"./@tresjs.D5XVXE0C1749111073271.js";import"./index.DmevrT681749111073271.js";import{T as s,aJ as i,c,a8 as a,a as u,M as l,S as W,V as d,B as f,l as p,cg as m}from"./three.B8H7tP0r1749111073271.js";import{P as x}from"./tweakpane.C0HtAJSg1749111073271.js";import{I as h,C as k,N as C,c as g,d as w,a as v}from"./three-mesh-bvh.DJZtjPOF1749111073271.js";import{d as _,a3 as y,b,a2 as j,G as S,o as P,F as O,I as J,u as N,r as T,h as G,j as D,f as I,e as Z,m as q,am as M}from"./@vue.Mugdq9o81749111073271.js";import{_ as K}from"./randomLoading.vue_vue_type_script_setup_true_lang.D5Pg7oz31749111073271.js";import"./postprocessing.CFk4752N1749111073271.js";import"./@vueuse.BjDsO4x01749111073271.js";import"./utils.dcsI_f_N1749111073271.js";import"./@fesjs.HpbjsMAs1749111073271.js";import"./vue-router.ttOgDZer1749111073271.js";import"./lodash-es.C7pWAXPe1749111073271.js";import"./@qlin.q6OWdsQV1749111073271.js";import"./pinia.pLtK9Sf_1749111073271.js";import"./@babel.BPq7uOAK1749111073271.js";import"./@floating-ui.BFjFSAYt1749111073271.js";import"./@juggle.CcBCnTIR1749111073271.js";import"./three-mesh-ui.module.BsNNPLXV1749111073271.js";import"./starLoading.DI5VK24Y1749111073271.js";import"./cssLoaders.BuHVXYmw1749111073271.js";import"./bubbleLoading.ca2CytEY1749111073271.js";import"./yangyangLoading.juYaNzNo1749111073271.js";function B(){const t=["WP/cHMapW4u","WRXZdCkQzG","AqDuW6aIW5C","umoTnmolexJcNW","xenhlf0","WPfRW4FdIZK/DSkiW7zHWQvMW4ZcUSobEq","p8oJW48Ty8kAWOD7WRNdVXS","qbWuxmoJW7NdQd9Ztmk1W60DDZy","eZHrW5JdVSo/mq","C8kQW7dcPSkk","WPNcLwmoW4/cGaVdS8kw","jmo+CMH2","W4ZdGSkElq3dTmoZWPFdMq","o396WQ0OW4GYW41wdLWAvmolWRVcIG","AG3cHMZcNG","fmkCWOWFWQhcVSosWO/dHei","yCkzWR5xjSkiW70+hComW4SRnq","W4GPEYtdMq","avPif8k6WQpcPNuSkSo8WQm","W6NdTLtdUSomtteoW69m","yxicmbj6WQu","FqpcINpcLepcQW","W6hdQeRdS8oh","DNe4iq5NWPpcJW","g8o9B3ZdMIa","WOyBtYtdKSk2WRa","WRzrWOTTfWu6","WPldNrj/eq","W6CpW5i+sXyYWRyKvaq","WOP5iwlcJ8ojW7BcPZlcQSozgMS","pb7cICo/W6ZdOfChhSkAWQjUw8kTDHlcG8kfWP8","W40eW4i0WPy","f1WodCoNWOa9W4q","h8kBWOWE","lSkhc8ksyIPpW6m","W5SMDJpdKmkEWQi","nmotkCohrmkXWP9gWO7dVmorW5S","r8kxWPKNoq","W7WiW5mLWPC","x1Pzja","rCkNwSkZhW","AGpcT3tcIuBcOhO","saiqvCoO","FSk4WPnZjSopW4qMWQddIGTLkw8","WRhcHgytW6O","rWCoi8oKWR0d","vCoQW4NcOGi","h8oDmCoWea","W67cJCo2lflcGmoqogGiWRrEW6a","Aa3cIhxcNG","BCo3bCkHDq","lNrnWPWSW4qYW54","vmkcWP0+mInxr8o/xmkYWOSDdqOQhdeW","gwJcUub4qeNcKCohkSkAxq","EHBcJCkAma","Ddz3W5as","WPldHsj5W54","WPXGW4q","a8oODwrZW6NcImkkk8k6WRG","r8kWW67cGCkw","ta3cNwpcMLZcUNJdUG","W53dLJPjWPpdHKldSSk6pSkuWO7cMG","W4xdHCkxha8","W5CMEttdJSkZWQpcVXZcK8oj","e8o6C1BdPq","lXldKeKJw0/cRvS","uCkNW73cNmkhW40","idlcGmkXW6u","jY5rW4NdOa","W7mMW6WdWP8","W4CLWR5DW4K","oSoTlSoFWPi","kJzdE1CNW5BdGCoUsCkMW64","cwdcP0zP","WPlcSCk8WPxcQa","WPj5WQjHeCoCW7xcJetdSJr9","W6yOW64fWO7dGqxdJw8Qna","WRH3fCkQCCoxymojAf3dHrVcQJpcJmoDW7ydjW","xXtcImk2oCoN","CJm2W4z1WOr3WPaXtGrk","b8oOAwLV","lSkau8oUpLOzW6tcR08mWO/cJa","WPtdRCoAdCo/","amoIFxHKW6q","rmkoWOCV","vCkcWP0nmIiAlmo4rmk5WPOi","WOzFW6ySW7n5W5/dT8k2WRpdNrFdNWWXWRmFW6dcVCopaLj1i3/dNbBcICk1Bmk6da","sWdcKmk3mW","BcVcMSkSga","qmkYkZS3WRJdJ8kScCkPWRPMW5S","xSocW4ddILS1vSoMp8oqpIK","aCo5Bw7dIW","qbWoxmoJW53dPdHZAW","WPVdPrHeW4CCWPXBj8oHca","nYpcNmkOW7K","jJ/cVhxcLwlcUa","W6itb07cOf3dQG","W7JcPrBdP3LlW7qDWPLhWQe","W6tdVmkCmq","W487WQbuW4lcM2n/wK9c","amoso8oQ","l8oCkCozWR9CrWddSG","ECkls8kfaCoOWOja","iI3cNSkUW6GzW593W73dTSoe","a8koWPxcMr9ZEmoTpa","wWJcJSkXiSobbZldOM90W6u","W7hdTmkaoW","CbtdH8odg14","W5dcPuC4CYTIgsqhj3JdNa","dCkDWOSuWQFcJmojWP7dGa","WQBdHCoVFG3dMSkwdLCzWRTTW4dcVJ7cGH9wW6Cqnmk3ACk7W5ZdKspdNSksbbPD","WP3cIf8oW5lcNrZdPa","BW9kW74o","yCkzWQTJn8kp","BCkrW4/cG8kk"];return(B=function(){return t})()}!function(){const t=B();function e(t,e,n,o,r){return L(n- -589,t)}function n(t,e,n,o,r){return L(n- -659,o)}function o(t,e,n,o,r){return L(n- -47,o)}for(;;)try{if(357943===parseInt(L(-137- -423,"VJ7Y"))/1*(parseInt(o(0,0,302,"dWse"))/2)+parseInt(e("*FT2",0,-262))/3*(parseInt(o(0,0,300,"j4hD"))/4)+parseInt(n(0,0,-359,"pDsm"))/5+parseInt(e("*WJi",0,-229))/6+parseInt(o(0,0,241,"ymz0"))/7+-parseInt(n(0,0,-378,"cqa%"))/8+-parseInt(n(0,0,-404,"r^6N"))/9*(parseInt(L(-319- -614,"*5#M"))/10))break;t.push(t.shift())}catch(r){t.push(t.shift())}}();const F=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return L(n-981,r)}function r(t,e,n,o,r){return L(n- -824,t)}function s(t,e,n,o,r){return L(t-166,n)}if("QJfnN"===o(0,0,1321,0,"I$DZ")){const r=t?function(){function t(t,e,n,r,s){return o(0,0,t- -466,0,e)}function r(t,e,n,r,s){return o(0,0,t- -607,0,r)}if("JnwtB"!==t(838,"p1Nt")){const t=_0x1a89fe[r(663,0,0,"KmRf")](_0x3fa16a,arguments);return _0x456c41=null,t}if(n){if(t(821,"I$DZ")!==t(794,"*WJi")){const t=n[r(696,0,0,"0QxG")](e,arguments);return n=null,t}{const t=_0x58ab98?function(){if(_0x535c02){const n=_0x2b5d09[(t="W)NV",e=-481,r(e- -1111,0,0,t))](_0x378777,arguments);return _0x2f1029=null,n}var t,e}:function(){};return _0x35f729=!1,t}}}:function(){};return t=!1,r}{_0x31fced.x=_0x2b95ae.clientX/_0x58bd4d[r("F*JZ",0,-480)]*2-1,_0x3b7998.y=-_0x2550e2.clientY/_0x3e9216[(a=1242,u="cqa%",L(a-927,u))]*2+1,_0x288b75[s(467,0,"j4hD")]=_0x1d2747[o(0,0,1311,0,"I$DZ")];const t=new(_0x5abf56[r("j4hD",0,-512)]);t[(i="KmRf",c=652,L(c-315,i))](_0x10e3fa,_0x110057[r("x%TL",0,-456)]),t[s(471,0,"]2Gx")]=!0;const e=t[r("F*JZ",0,-565)](_0x4cae43[r("r^6N",0,-525)],!0);_0x3768da[r("Kwgj",0,-457)]=!0,_0x88b23e[r("cqa%",0,-537)]=0===e.length}var i,c,a,u}}()(void 0,(function(){function t(t,e,n,o,r){return L(o- -907,r)}function e(t,e,n,o,r){return L(t-435,o)}return F[t(0,0,0,-614,"j4hD")]()[e(800,0,0,"VLNY")]("(((.+)+)+)+$")[e(798,0,0,"Kwgj")]()[(n=242,o="wB&9",L(n- -86,o))](F)[e(753,0,0,"xywl")](t(0,0,0,-576,"t7Pq"));var n,o}));F();const R=function(){let t=!0;return function(e,n){function o(t,e,n,o,r){return L(e-529,n)}function r(t,e,n,o,r){return L(n- -306,o)}function s(t,e,n,o,r){return L(r- -710,e)}if(o(0,819,"wB&9")===r(0,0,2,"KU66")){const i=t?function(){function t(t,e,n,o,r){return s(0,t,0,0,r-72)}function i(t,e,n,r,s){return o(0,e- -141,r)}if(i(0,684,0,"Kwgj")===i(0,752,0,"eB^G")){const e=_0x3186ed[t("w[1E",0,0,0,-319)](_0x282e72,arguments);return _0x5a3f74=null,e}if(n){if("dbrMK"===t("p^!D",0,0,0,-322)){const o=n[t("W)NV",0,0,0,-382)](e,arguments);return n=null,o}_0x2d095d.x=_0x27eeb9.clientX/_0x17ad52[(u=806,l="Yyd&",r(0,0,u-845,l))]*2-1,_0x4bf00a.y=-_0x3adc3a.clientY/_0xb2679c[(c="0QxG",a=-378,s(0,c,0,0,a- -19))]*2+1,_0x305289[t("r^6N",0,0,0,-339)]=!0}var c,a,u,l}:function(){};return t=!1,i}_0x5b3a01=_0x341731(r(0,0,-2,"KmRf")+'{}.constructor("return this")( ));')()}}();R(void 0,(function(){function t(t,e,n,o,r){return L(n-378,t)}function e(t,e,n,o,r){return L(e- -420,o)}function n(t,e,n,o,r){return L(t-151,o)}const o=function(){function t(t,e,n,o,r){return L(n- -483,e)}function e(t,e,n,o,r){return L(t- -923,e)}function n(t,e,n,o,r){return L(t- -440,o)}function o(t,e,n,o,r){return L(n- -823,r)}function r(t,e,n,o,r){return L(r- -43,e)}if("hJsWy"!==n(-179,0,0,"xywl")){let i;try{if("OJFid"!==n(-106,0,0,"#bD*"))return _0x130271[r(0,"*HPF",0,0,232)]()[o(0,0,-464,0,"piiw")](o(0,0,-553,0,"F*JZ"))[o(0,0,-469,0,"ymz0")]().constructor(_0x202d9e)[n(-105,0,0,"lWiw")](t(0,"*HPF",-159));i=Function(t(0,"x%TL",-154)+e(-561,"pDsm")+");")()}catch(s){if(r(0,"ymz0",0,0,249)===e(-640,"wB&9"))i=window;else if(_0x269502){const t=_0x3d368c[n(-146,0,0,"F*JZ")](_0x36302d,arguments);return _0xe0d16f=null,t}}return i}{const t=_0x1499db[o(0,0,-468,0,"w[1E")][n(-178,0,0,"Kwgj")].bind(_0x4984f2),r=_0xc25867[_0x19a59d],s=_0x39da5c[r]||t;t[e(-570,"p1Nt")]=_0x2974ce.bind(_0x588ca1),t.toString=s.toString[n(-149,0,0,"W)NV")](s),_0x2cf8b8[r]=t}}(),r=o[t("j4hD",0,651)]=o[t("JApN",0,638)]||{},s=[t("AOLa",0,687),t("Dc9O",0,728),e(0,-68,0,"r^6N"),n(462,0,0,"xywl"),t("JoHE",0,734),e(0,-154,0,"j4hD"),"trace"];function i(t,e,n,o,r){return L(t-497,e)}for(let u=0;u<s[(c="eB^G",a=-201,L(a- -570,c))];u++)if(e(0,-100,0,"JApN")===n(414,0,0,"lWiw")){const o=R.constructor.prototype[i(833,"KmRf")](R),c=s[u],a=r[c]||o;o[n(415,0,0,"Dc9O")]=R[i(855,"Dc9O")](R),o.toString=a[e(0,-117,0,"t7Pq")][t("Yyd&",0,663)](a),r[c]=o}else _0x4553db[e(0,-74,0,"w[1E")]=-1,"touch"===_0x1f2c7b[i(842,"KU66")]&&(_0x343e64[t("cqa%",0,647)]=!1);var c,a}))();function L(t,e){const n=B();return L=function(e,o){let r=n[e-=255];if(void 0===L.CvGviv){var s=function(t){let e="",n="",o=e+s;for(let r,s,i=0,c=0;s=t.charAt(c++);~s&&(r=i%4?64*r+s:s,i++%4)?e+=o.charCodeAt(c+10)-10!=0?String.fromCharCode(255&r>>(-2*i&6)):i:0)s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(s);for(let r=0,s=e.length;r<s;r++)n+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)};const e=function(t,e){let n,o,r=[],i=0,c="";for(t=s(t),o=0;o<256;o++)r[o]=o;for(o=0;o<256;o++)i=(i+r[o]+e.charCodeAt(o%e.length))%256,n=r[o],r[o]=r[i],r[i]=n;o=0,i=0;for(let s=0;s<t.length;s++)o=(o+1)%256,i=(i+r[o])%256,n=r[o],r[o]=r[i],r[i]=n,c+=String.fromCharCode(t.charCodeAt(s)^r[(r[o]+r[i])%256]);return c};L.YpDWzu=e,t=arguments,L.CvGviv=!0}const i=e+n[0],c=t[i];if(c)r=c;else{if(void 0===L.oJAjuB){const t=function(t){this.xsuXhs=t,this.TFOWKC=[1,0,0],this.VsLISE=function(){return"newState"},this.dvtVlj="\\w+ *\\(\\) *{\\w+ *",this.VLfTkK="['|\"].+['|\"];? *}"};t.prototype.GunPvR=function(){const t=new RegExp(this.dvtVlj+this.VLfTkK).test(this.VsLISE.toString())?--this.TFOWKC[1]:--this.TFOWKC[0];return this.OyEpFb(t)},t.prototype.OyEpFb=function(t){return Boolean(~t)?this.rhNfrc(this.xsuXhs):t},t.prototype.rhNfrc=function(t){for(let e=0,n=this.TFOWKC.length;e<n;e++)this.TFOWKC.push(Math.round(Math.random())),n=this.TFOWKC.length;return t(this.TFOWKC[0])},new t(L).GunPvR(),L.oJAjuB=!0}r=L.YpDWzu(r,o),t[i]=r}return r},L(t,e)}const Q=["geometry","material"],V=["geometry"],A=_({__name:"model",props:{controls:{}},async setup(o){let r,_;const T=o;f.prototype.computeBoundsTree=g,f.prototype.disposeBoundsTree=w,p.prototype.raycast=v;const G=([r,_]=y((()=>n(m,"./plugins/industry4/model/TR12J_OCC.stl"))),r=await r,_(),r),D=new i({color:16777215,roughness:.2,metalness:1,vertexColors:!0}),I=new Uint8Array(3*G.attributes.position.count);I.fill(255);const Z=new c(I,3,!0);Z.setUsage(a),G.setAttribute("color",Z);const q=b(null),M=b(null),K=b(!1),B=b(-1),F=b(.2),R=new u,{camera:A,raycaster:H}=t(),z=15/255,Y=78/255,X=85/255;let E=null;j((()=>{q.value&&(console.log("targetMesh.value init",q.value),q.value.geometry.computeBoundsTree(),E=G.boundsTree,((t,e,n,o,r,i)=>{function c(t,e,n,o,r){return L(e-611,r)}function a(t,e,n,o,r){return L(r- -30,n)}function u(t,e,n,o,r){return L(n- -802,t)}window[u("AOLa",-510,-545)](c(901,869,848,839,"*5#M"),(n=>{function o(t,e,n,o,r){return u(e,e-295,t-1235)}function r(t,e,n,o,r){return u(o,e-74,r-131)}if(o(759,"ZmZ(")!==o(799,"xywl")){let t;try{t=_0x479d2d(o(715,"V%((")+r(0,-304,0,"f5*Q",-333)+");")()}catch(c){t=_0x1e6498}return t}var s,i;t.x=n[r(0,-372,0,"Dn!*",-374)]/window[o(704,"59Jh")]*2-1,t.y=-n.clientY/window.innerHeight*2+1,e[(s=-106,i="]2Gx",u(i,s-279,s-371))]=!0})),window.addEventListener(a(328,263,"lWiw",246,280),(l=>{function W(t,e,n,o,r){return a(t-268,e-124,r,o-399,o- -604)}function d(t,e,n,o,r){return u(o,e-448,e- -140)}function f(t,e,n,o,r){return c(t-311,r- -852,n-455,o-15,n)}if("KgyGB"!==f(102,0,"VJ7Y",40,61)){t.x=l[f(42,0,"*HPF",42,31)]/window.innerWidth*2-1,t.y=-l[d(0,-664,0,"vFZr")]/window.innerHeight*2+1,o[d(0,-603,0,"I$DZ")]=l.button;const c=new(s[W(-275,-366,0,-317,"sPw@")]);c[d(0,-674,0,"VLNY")](t,n.value),c[d(0,-585,0,"I$DZ")]=!0;const a=c.intersectObject(r[W(-392,-336,0,-336,"HgxT")],!0);e[d(0,-621,0,"wB&9")]=!0,i[(p="#*wZ",m=97,x=141,u(p,m-238,x-595))]=0===a[W(-311,-345,0,-358,"p^!D")]}else _0x103ed0=_0x274c4d;var p,m,x}),!0),window[c(0,876,0,0,"t7Pq")](a(0,0,"Yyd&",0,331),(t=>{function n(t,e,n,o,r){return u(n,0,t-691)}function r(t,e,n,o,r){return c(0,n- -127,0,0,o)}if("VXyCm"!==n(203,0,"Dc9O")){const t=_0x3642e2?function(){if(_0x5503de){const n=_0x2bbf45[(t=169,e="59Jh",r(0,0,t- -589,e))](_0x1ad12a,arguments);return _0x1be1b6=null,n}var t,e}:function(){};return _0x25395d=!1,t}var s,i;o[n(232,0,"p^!D")]=-1,t.pointerType===r(0,0,816,"lWiw")&&("ZpTFN"===u("eB^G",0,-495)?_0x2835eb.value=!1:e[(s="p^!D",i=1065,u(s,0,i-1524))]=!1)}),!0)})(R,K,A,B,q,T.controls.instance))}));const{onLoop:U}=e();U((()=>{const t=G.index;if(M.value)if(T.controls.instance.active||!K.value)M.value.visible=!1;else{M.value.scale.setScalar(F.value),H.value.setFromCamera(R,A.value),H.value.firstHitOnly=!0;const e=H.value.intersectObject(q.value,!0);if(e.length){M.value.position.copy(e[0].point),T.controls.instance.enabled=!1,M.value.visible=!0;const n=new l;n.copy(q.value.matrixWorld).invert();const o=new W;o.center.copy(M.value.position).applyMatrix4(n),o.radius=100*F.value;const r=[],s=new d;if(E?.shapecast({intersectsBounds:t=>{const e=o.intersectsBox(t),{min:n,max:r}=t;if(e){for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let i=0;i<=1;i++)if(s.set(0===t?n.x:r.x,0===e?n.y:r.y,0===i?n.z:r.z),!o.containsPoint(s))return h;return k}return e?h:C},intersectsTriangle:(t,e,n)=>{if(n||t.intersectsSphere(o)){const t=3*e;r.push(t,t+1,t+2)}return!1}}),0===B.value||2===B.value){let e=1,n=1,o=1;0===B.value&&(e=z,n=Y,o=X);for(let s=0,i=r.length;s<i;s++){const i=t.getX(r[s]);Z.setX(i,e),Z.setY(i,n),Z.setZ(i,o)}Z.needsUpdate=!0}}else M.value.visible=!1,T.controls.instance.enabled=!0}}));const $=(new x).addButton({title:"点击按钮",label:"生成模型"}),tt=new f;return $.on("click",(()=>{const t=[],e=[];for(let o=0;o<Z.count;o++)Z.getX(o)===z&&Z.getY(o)===Y&&Z.getZ(o)===X&&(t.push(G.attributes.position.getX(o),G.attributes.position.getY(o),G.attributes.position.getZ(o)),e.push(G.attributes.normal.getX(o),G.attributes.normal.getY(o),G.attributes.normal.getZ(o)));const n=new Float32Array(t);tt.setAttribute("position",new c(n,3)),tt.setAttribute("normal",new c(n,3))})),(t,e)=>(P(),S(O,null,[J("TresMesh",{ref_key:"targetMesh",ref:q,geometry:N(G),scale:.005,material:N(D)},null,8,Q),J("TresMesh",{ref_key:"brushMesh",ref:M,visible:!1},e[0]||(e[0]=[J("TresSphereGeometry",{args:[1,40,40]},null,-1),J("TresMeshStandardMaterial",{color:15483002,roughness:.75,metalness:0,transparent:!0,opacity:.5,premultipliedAlpha:!0,emissive:15483002,emissiveIntensity:.5},null,-1)]),512),J("TresMesh",{geometry:N(tt),position:[-2,-2,2],scale:.005},e[1]||(e[1]=[J("TresMeshStandardMaterial",{color:"#023249",roughness:.2,metalness:0,envMapIntensity:.2},null,-1)]),8,V)],64))}}),H=_({__name:"collectTriangles",setup(t){const e=T({clearColor:"#999999",antialias:!0}),n=T({autoRotate:!1}),s=b(null);return(t,i)=>{const c=G("TresCanvas");return P(),S(O,null,[D(N(K)),D(c,q(e,{"window-size":""}),{default:I((()=>[i[0]||(i[0]=J("TresPerspectiveCamera",{position:[5,1,15],fov:30,near:.1,far:1e3},null,-1)),D(N(o),q({ref_key:"controlsRef",ref:s},n),null,16),i[1]||(i[1]=J("TresAmbientLight",{intensity:1},null,-1)),(P(),Z(M,null,{default:I((()=>[D(A,{controls:s.value},null,8,["controls"])])),_:1})),(P(),Z(M,null,{default:I((()=>[D(N(r),{background:!1,files:["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"],path:"https://opensource.cdn.icegl.cn/images/skyBox/6jpg/"},null,8,["path"])])),_:1}))])),_:1},16)],64)}}});export{H as default};

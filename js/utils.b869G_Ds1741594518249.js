import"./@fesjs._tIE6C7-1741594518249.js";import{_ as t}from"./jszip.VTnDVY9z1741594518249.js";import{F as n}from"./file-saver.cv4DhtAr1741594518249.js";import{_ as e}from"./three.8y0_KTxz1741594518249.js";const s=a;!function(t,n){const e=a,s=d();for(;;)try{if(478599===parseInt(e(292))/1+-parseInt(e(255))/2+-parseInt(e(295))/3*(-parseInt(e(311))/4)+parseInt(e(231))/5*(-parseInt(e(225))/6)+parseInt(e(272))/7*(parseInt(e(310))/8)+-parseInt(e(235))/9+-parseInt(e(243))/10*(parseInt(e(269))/11))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const o=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[a(229)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function a(t,n){const e=d();return(a=function(t,n){return e[t-=219]})(t,n)}!function(){o(this,(function(){const t=a,n=new RegExp(t(276)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=m(t(245));n.test(s+t(301))&&e.test(s+t(298))?m():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=s,o=new(e[n(256)]);return new Promise(((e,s)=>{const a=n;o[a(274)](t,(t=>e(JSON[a(297)](t))),void 0,(t=>s(t)))}))}async function c(t){const n=s,o=new(e[n(256)]);return new Promise(((e,a)=>{const r=n;o[r(280)](r(248)),o[r(274)](t,(n=>{const o=r,i=new FileReader;i[o(233)]=()=>{const n=o,a=function(t){const n=s,e=t[n(251)](".")[n(247)]().toLowerCase();return{jpg:n(257),jpeg:"image/jpeg",png:n(244),gif:n(286),bmp:n(290),webp:n(270)}[e]||n(242)}(t),r=i[n(306)][n(251)](",")[1];e(n(293)+a+";base64,"+r)},i.onerror=t=>{a(t)},i[o(224)](n)}),void 0,(t=>a(t)))}))}r(void 0,(function(){const t=a;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(288)]=n[t(288)]||{},s=[t(308),"warn","info",t(299),t(300),t(296),t(291)];for(let a=0;a<s[t(271)];a++){const n=r[t(294)].prototype[t(273)](r),o=s[a],i=e[o]||n;n[t(282)]=r[t(273)](r),n[t(305)]=i[t(305)][t(273)](i),e[o]=n}}))(),e[s(303)][s(221)]=!0;const u=n=>{const o=s,a=new(e[o(256)]);return a[o(280)]("blob"),new Promise(((e,s)=>{a[o(274)](n,(async n=>{e(await t.loadAsync(n))}),void 0,(t=>s(t)))}))},p=t=>{const n=s,e=t.substring(0,15),o=n(283),a=n(260),r=n(246);return"data:image/jpeg;base64,".startsWith(e)||"data:image/JPEG;base64,"[n(250)](e)?n(307):"data:image/png;base64,"[n(250)](e)||"data:image/PNG;base64,"[n(250)](e)?n(279):o[n(250)](e)||"data:image/GIF;base64,".startsWith(e)?n(222):a.startsWith(e||r.startsWith(e))?n(263):n(259)},l=e=>{const o=s,a=[];e[o(219)][o(287)]&&e[o(219)][o(287)][o(230)]((t=>{const n=o;t[n(281)]===n(223)&&(a.push({uuid:t[n(304)],data:t.data}),t[n(232)]="url:geometries/"+t[n(304)]+n(220))}));const r=[];e[o(219)].images&&e[o(219)][o(228)][o(230)]((t=>{const n=o;t[n(239)]&&(r.push({uuid:t[n(304)],url:t.url}),t[n(239)].type?t[n(239)]=n(249)+t.uuid+"."+t[n(239)].type+n(220):t.url=n(249)+t[n(304)]+"."+p(t.url))}));const i=new t;if(a[o(271)]){const t=i[o(285)](o(287));a[o(230)]((n=>{const e=o;t.file(n[e(304)]+".json",JSON.stringify(n[e(232)]))}))}if(r[o(271)]){const t=i[o(285)]("images");r[o(230)]((n=>{const e=o;n[e(239)][e(281)]?t[e(275)](n[e(304)]+"."+n[e(239)][e(281)]+e(220),JSON.stringify(n.url)):t[e(275)](n.uuid+"."+p(n[e(239)]),n[e(239)].split(e(240))[e(247)](),{base64:!0})}))}const c=JSON[o(238)](e);return i.file("app.json",c),i[o(254)]({type:o(248)})[o(252)]((t=>{const e=o;n.saveAs(t,e(258))}))},f=(t,n,e)=>{const o=s;t[o(287)]<=0&&t[o(228)]<=0&&e(n)},g=(n,e)=>{const o=s;let a=null;return t[o(284)](n)[o(252)]((t=>{const n=o;t[n(227)][n(302)]?t.files["app.json"][n(237)]("string")[n(252)]((o=>{var r,i;const c=n;a=JSON[c(297)](o);const u=(t=>{var n,e;const o=s,a={geometries:0,images:0};return null==(n=t.scene[o(287)])||n.forEach((t=>{const n=o;t[n(232)][n(250)](n(267))&&a[n(287)]++})),null==(e=t.scene.images)||e[o(230)]((t=>{const n=o;t[n(239)][n(250)](n(267))&&a[n(228)]++})),a})(a);f(u,a,e),null==(r=a.scene[c(287)])||r[c(230)]((n=>{const s=c;n.data[s(250)](s(267))&&t[s(227)][n[s(232)][s(278)](4)][s(237)](s(253))[s(252)]((t=>{const o=s;n[o(232)]=JSON[o(297)](t),u[o(287)]--,f(u,a,e)}))})),null==(i=a[c(219)][c(228)])||i[c(230)]((n=>{const s=c;if(n[s(239)].startsWith("url:")){const o=n[s(239)][s(278)](4);o[s(277)](s(220))?t.files[o][s(237)]("string")[s(252)]((t=>{const o=s;n.url=JSON[o(297)](t),u.images--,f(u,a,e)})):t[s(227)][o].async(s(268))[s(252)]((t=>{const r=s,i=o[r(251)]("."),c=i[i[r(271)]-1][r(261)]();n[r(239)]=r(309)+c+";base64,"+t,u[r(228)]--,f(u,a,e)}))}}))})):console[n(299)]("非标准文件：不存在 app.json")}),(t=>{const e=o;console[e(299)](n[e(266)]+": "+t[e(236)])})),a};function m(t){function n(t){const e=a;if(typeof t===e(253))return function(t){}[e(294)](e(265))[e(229)](e(289));1!==(""+t/t).length||t%20==0?function(){return!0}[e(294)](e(234)+e(226))[e(262)](e(264)):function(){return!1}[e(294)](e(234)+e(226)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}function d(){const t=["327850YdrbPr","image/png","init","data:image/WEBP;base64,","pop","blob","url:images/","startsWith","split","then","string","generateAsync","830894zWkDxE","FileLoader","image/jpeg","config.zip","Unknown","data:image/webp;base64,","toUpperCase","call","WEBP","action","while (true) {}","name","url:","base64","253BIQWgL","image/webp","length","1883wqYDZp","bind","load","file","function *\\( *\\)","endsWith","slice","PNG","setResponseType","type","__proto__","data:image/gif;base64,","loadAsync","folder","image/gif","geometries","console","counter","image/bmp","trace","890576SrKhJz","data:","constructor","2067231IhqpaU","table","parse","input","error","exception","chain","app.json","Cache","uuid","toString","result","JPEG","log","data:image/","6824UbHMVv","4EgZKay","scene",".json","enabled","GIF","BufferGeometry","readAsDataURL","30WkxwGH","gger","files","images","apply","forEach","92525ctRzyz","data","onloadend","debu","616356HfmDvI","message","async","stringify","url",";base64,","onerror","application/octet-stream"];return(d=function(){return t})()}export{u as a,c as b,l as e,p as g,g as i,i as l};

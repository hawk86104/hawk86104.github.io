import{H as e,a0 as t,aN as a,o,x as r,n,l as s,d2 as l,d0 as u,d1 as v,f as i,d7 as m,q as d,cF as c}from"./three.rXKzP9fQ1763540743861.js";import{F as f,_ as g}from"./@tresjs.BCHtwiaC1763540743861.js";import{l as p}from"./lightNoise.Bwk8SPgh1763540743861.js";import{_}from"./lucesPlane.vue_vue_type_script_setup_true_lang.DG7WjkMp1763540743861.js";import{_ as w}from"./portal.vue_vue_type_script_setup_true_lang.aS5JTDKw1763540743861.js";import{_ as b}from"./drops.vue_vue_type_script_setup_true_lang.DAkRev4x1763540743861.js";import{d as x,w as h,H as T,o as U,F as j,h as y}from"./@vue.Co_gxueH1763540743861.js";const S=x({__name:"fboRender",setup(x){const S={time:{value:0},globalBloom:{value:0},noise:{value:null}},P=new e(512,512),B=new t,k=new a,C=new o(2,2),D=new r({onBeforeCompile:e=>{e.uniforms.time=S.time,e.fragmentShader=`\n      uniform float time;\n      ${p}\n      ${e.fragmentShader}\n    `.replace("vec4 diffuseColor = vec4( diffuse, opacity );","\n        vec3 col = vec3(0);\n        float h = clamp(smoothNoise2(vUv * 50.), 0., 1.);\n        col = vec3(h);\n        vec4 diffuseColor = vec4( col, opacity );\n      ")}});D.defines={USE_UV:""};const F=new n(C,D);B.add(F),S.noise.value=P.texture;const{camera:R,renderer:N,scene:H,sizes:M,controls:V}=f();h(()=>V.value,e=>{e?.target.set(0,2,0),H.value.background||(H.value.background=new s(6706534))});const $=new l(N),q=new l(N),z=new u(H.value,R.value),E=new v(new i(M.width.value,M.height.value),1.2,.5,0);$.renderToScreen=!1,$.addPass(z),$.addPass(E);const A=new m(new d({uniforms:{baseTexture:{value:null},bloomTexture:{value:$.renderTarget2.texture}},vertexShader:"\n\t\t\t\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\t\t\t\tuniform sampler2D baseTexture;\n\t\t\t\t\t\t\t\tuniform sampler2D bloomTexture;\n\t\t\t\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t\t\t\tgl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n\t\t\t\t\t\t\t\t}",defines:{}}),"baseTexture");A.needsSwap=!0,q.addPass(z),q.addPass(A),H.value.fog=new c(6706534,1,25);const{onBeforeRender:G}=g();return G(({elapsed:e})=>{S.time.value=e,N&&(N.setRenderTarget(P),N.render(B,k),N.setRenderTarget(null),S.globalBloom.value=1.2,H.value.fog.color.set(0),H.value.fog.near=15,H.value.background?.set(0),$.render(),S.globalBloom.value=0,H.value.fog.color.set(6706534),H.value.fog.near=10,H.value.background?.set(6706534),q.render())}),(e,t)=>(U(),T(j,null,[y(_,{globalUniforms:S}),y(w,{globalUniforms:S}),y(b,{globalUniforms:S})],64))}});export{S as _};

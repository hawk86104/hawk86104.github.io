import"./@fesjs.0Tn1apcA1741583630766.js";import{_ as t}from"./jszip.aE9nyDsq1741583630766.js";import{F as n}from"./file-saver.Ghf2Onjq1741583630766.js";import{cN as e,_ as s}from"./three.sQDbNBks1741583630766.js";const o=u;function r(){const t=["486252zmDrii","9tBSAzK","apply","101082Sawich","log","message","非标准文件：不存在 app.json","then",";base64,","data:image/PNG;base64,","data:image/webp;base64,","data:image/GIF;base64,","url:","image/bmp","Unknown","image/jpeg","while (true) {}","bind","gger","endsWith","input","warn","table",".json","8gcNhJq","result","test","4BbAwFM","data:image/WEBP;base64,","init","debu","config.zip","constructor","trace","chain","forEach","toUpperCase","get","async","app.json","7XsCvkX","__proto__","toLowerCase","BufferGeometry","split","push","url:geometries/","startsWith","blob","data:","console","pop","1610808kyuQXG","stateObject","substring","parse","data:image/JPEG;base64,","generateAsync","12nwHCaI","slice","setResponseType","toString","uuid","type","enabled","data:image/gif;base64,","data","loadAsync","url:images/","readAsDataURL","load","94278RrdwmM","FileLoader","url","5545Pbfiib","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","folder","string","data:image/png;base64,","name","files","644567kXVWOm","file",'{}.constructor("return this")( )',"images","image/png","return (function() ","geometries","scene","length","error","function *\\( *\\)","GIF","action","1208430JyIeZE","onloadend","data:image/jpeg;base64,","onerror","call","stringify","counter","application/octet-stream"];return(r=function(){return t})()}!function(t,n){const e=u,s=r();for(;;)try{if(114893===parseInt(e(266))/1*(parseInt(e(345))/2)+-parseInt(e(310))/3+parseInt(e(263))/4*(parseInt(e(313))/5)+-parseInt(e(342))/6*(-parseInt(e(279))/7)+-parseInt(e(291))/8*(parseInt(e(343))/9)+parseInt(e(334))/10+parseInt(e(321))/11*(-parseInt(e(297))/12))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=u,n=new RegExp(t(331)),e=new RegExp(t(314),"i"),s=b(t(268));n[t(265)](s+t(273))&&e[t(265)](s+t(259))?b():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[u(344)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function c(t){const n=o,e=new(s[n(311)]);return new Promise(((s,o)=>{const r=n;e[r(309)](t,(t=>s(JSON[r(294)](t))),void 0,(t=>o(t)))}))}function u(t,n){const e=r();return(u=function(t,n){return e[t-=257]})(t,n)}async function p(t){const n=o,e=new(s[n(311)]);return new Promise(((s,r)=>{const a=n;e[a(299)](a(287)),e[a(309)](t,(n=>{const e=a,i=new FileReader;i[e(335)]=()=>{const n=e,r=function(t){const n=o,e=t[n(283)](".")[n(290)]()[n(281)]();return{jpg:n(357),jpeg:n(357),png:n(325),gif:"image/gif",bmp:n(355),webp:"image/webp"}[e]||n(341)}(t),a=i[n(264)][n(283)](",")[1];s(n(288)+r+n(350)+a)},i[e(337)]=t=>{r(t)},i[e(308)](n)}),void 0,(t=>r(t)))}))}i(void 0,(function(){const t=u;let n;try{n=Function(t(326)+t(323)+");")()}catch(o){n=window}const e=n[t(289)]=n[t(289)]||{},s=[t(346),t(260),"info",t(330),t(315),t(261),t(272)];for(let r=0;r<s[t(329)];r++){const n=i[t(271)].prototype.bind(i),o=s[r],a=e[o]||n;n[t(280)]=i[t(359)](i),n[t(300)]=a[t(300)][t(359)](a),e[o]=n}}))(),e[o(303)]=!0;const l=n=>{const e=o,r=new(s[e(311)]);return r[e(299)](e(287)),new Promise(((s,o)=>{const a=e;r[a(309)](n,(async n=>{const e=a;s(await t[e(306)](n))}),void 0,(t=>o(t)))}))},f=t=>{const n=o,e=t[n(293)](0,15),s=n(336),r=n(295),a=n(318),i=n(351),c=n(304),u=n(353),p=n(352),l=n(267);return s[n(286)](e)||r.startsWith(e)?"JPEG":a.startsWith(e)||i.startsWith(e)?"PNG":c[n(286)](e)||u.startsWith(e)?n(332):p[n(286)](e||l[n(286)](e))?"WEBP":n(356)},g=e=>{const s=o,r=[];e[s(328)][s(327)]&&e[s(328)][s(327)].forEach((t=>{const n=s;t[n(302)]===n(282)&&(r[n(284)]({uuid:t[n(301)],data:t[n(305)]}),t[n(305)]=n(285)+t[n(301)]+n(262))}));const a=[];e[s(328)][s(324)]&&e[s(328)][s(324)][s(274)]((t=>{const n=s;t[n(312)]&&(a.push({uuid:t[n(301)],url:t[n(312)]}),t[n(312)][n(302)]?t[n(312)]=n(307)+t[n(301)]+"."+t.url.type+n(262):t.url=n(307)+t.uuid+"."+f(t[n(312)]))}));const i=new t;if(r[s(329)]){const t=i[s(316)]("geometries");r[s(274)]((n=>{const e=s;t[e(322)](n[e(301)]+".json",JSON[e(339)](n.data))}))}if(a[s(329)]){const t=i.folder(s(324));a[s(274)]((n=>{const e=s;n[e(312)].type?t[e(322)](n.uuid+"."+n[e(312)].type+".json",JSON.stringify(n.url)):t.file(n[e(301)]+"."+f(n.url),n[e(312)][e(283)](e(350))[e(290)](),{base64:!0})}))}const c=JSON[s(339)](e);return i.file(s(278),c),i[s(296)]({type:"blob"})[s(349)]((t=>{const e=s;n.saveAs(t,e(270))}))},m=(t,n,e)=>{const s=o;t[s(327)]<=0&&t[s(324)]<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(306)](n)[s(349)]((t=>{const n=s;t[n(320)][n(278)]?t[n(320)][n(278)][n(277)](n(317))[n(349)]((s=>{var a,i;const c=n;r=JSON.parse(s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(328)][s(327)])||n.forEach((t=>{const n=s;t[n(305)][n(286)](n(354))&&r[n(327)]++})),null==(e=t.scene[s(324)])||e[s(274)]((t=>{const n=s;t[n(312)][n(286)]("url:")&&r[n(324)]++})),r})(r);m(u,r,e),null==(a=r[c(328)][c(327)])||a[c(274)]((n=>{const s=c;n[s(305)][s(286)](s(354))&&t[s(320)][n[s(305)].slice(4)].async(s(317))[s(349)]((t=>{n[s(305)]=JSON.parse(t),u.geometries--,m(u,r,e)}))})),null==(i=r[c(328)][c(324)])||i[c(274)]((n=>{const s=c;if(n[s(312)][s(286)](s(354))){const o=n.url[s(298)](4);o[s(258)](s(262))?t.files[o][s(277)](s(317))[s(349)]((t=>{const o=s;n.url=JSON.parse(t),u[o(324)]--,m(u,r,e)})):t[s(320)][o][s(277)]("base64")[s(349)]((t=>{const a=s,i=o[a(283)]("."),c=i[i.length-1][a(275)]();n[a(312)]="data:image/"+c+";base64,"+t,u.images--,m(u,r,e)}))}}))})):console[n(330)](n(348))}),(t=>{const e=s;console[e(330)](n[e(319)]+": "+t[e(347)])})),r};function b(t){function n(t){const e=u;if(typeof t===e(317))return function(t){}[e(271)](e(358))[e(344)](e(340));1!==(""+t/t).length||t%20==0?function(){return!0}[e(271)]("debu"+e(257))[e(338)](e(333)):function(){return!1}.constructor(e(269)+e(257))[e(344)](e(292)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,p as b,g as e,f as g,d as i,c as l};

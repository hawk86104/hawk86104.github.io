{"version":3,"file":"3DTilesComPage.BVT4GXfP1767105581793.js","sources":["../../src/plugins/simpleGIS/pages/3DTilesComPage.vue"],"sourcesContent":["<!--\n * @Description: \n * @Version: 1.668\n * @Autor: 地虎降天龙\n * @Date: 2025-08-28 09:23:48\n * @LastEditors: 地虎降天龙\n * @LastEditTime: 2025-08-28 16:38:23\n-->\n<template>\n    <TresCanvas v-bind=\"state\" window-size>\n        <TresPerspectiveCamera :position=\"[400, 400, 400]\" :fov=\"60\" :near=\"1\" :far=\"20000\" />\n        <MapControls />\n        <TresAmbientLight :intensity=\"1\" />\n        <TresDirectionalLight :position=\"[1, 2, 3]\" :intensity=\"1.25\" />\n        <TresAxesHelper :args=\"[100]\" />\n\n        <tilesCom v-bind=\"configState\" />\n\n        <reflectorDUDV :position=\"[0, -120, 0]\" v-bind=\"reflectorState\" />\n    </TresCanvas>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, ref } from 'vue'\nimport * as THREE from 'three'\nimport { MapControls } from '@tresjs/cientos'\nimport { Pane } from 'tweakpane'\nimport { reflectorDUDV } from 'PLS/floor'\nimport tilesCom from '../components/tilesCom.vue'\nimport { is3DTilesetJson } from '../common/utils'\n\nconst state = {\n    clearColor: '#201919',\n    windowSize: true,\n    shadows: true,\n    toneMapping: THREE.ACESFilmicToneMapping,\n    toneMappingExposure: 1,\n    shadowMapType: THREE.PCFSoftShadowMap,\n}\nconst reflectorState = {\n    reflectivity: 1,\n    showGridHelper: false,\n    scale: 500,\n}\n\nconst configState = reactive({\n    tilesUrl: 'https://jdvop.oss-cn-qingdao.aliyuncs.com/mapv-data/titleset/sz_ns/tileset.json',\n    bulidingsColor: '#447eff',\n    topColor: '#00efd1',\n    lightColor: '#99ff9f',\n    borderWidth: 5,\n    opacity: 1,\n    gradient: true,\n    speed: 1.0,\n    lineOpacity: 1.0,\n    linewidth: 1.0,\n    lineColor: '#000000',\n})\nconst tilesUrl = ref(configState.tilesUrl)\n\nconst paneControl = new Pane()\npaneControl.addBinding(tilesUrl, 'value', { label: 'tiles地址' })\nconst btn = paneControl.addButton({\n    title: '应用',\n    label: '从url读取tiles',\n})\nbtn.on('click', () => {\n    if (tilesUrl.value === configState.tilesUrl) {\n        return\n    }\n    paneControl.disabled = true\n    is3DTilesetJson(tilesUrl.value).then((isValid) => {\n        if (isValid) {\n            configState.tilesUrl = tilesUrl.value\n        } else {\n            alert('这不是一个有效的3D Tiles地址')\n        }\n        paneControl.disabled = false\n    })\n})\n\npaneControl.addBinding(configState, 'bulidingsColor', { label: '建筑物颜色' })\npaneControl.addBinding(configState, 'topColor', { label: '顶部颜色' })\npaneControl.addBinding(configState, 'gradient', { label: '是否渐变色' })\npaneControl.addBinding(configState, 'lightColor', { label: '跑光颜色' })\npaneControl.addBinding(configState, 'speed', {\n    label: '跑光速度',\n    min: -2,\n    max: 2,\n    step: 0.01,\n})\npaneControl.addBinding(configState, 'borderWidth', {\n    label: '跑光宽度',\n    min: 0,\n    max: 20,\n    step: 0.1,\n})\npaneControl.addBinding(configState, 'opacity', {\n    label: '透明度',\n    min: 0,\n    max: 1,\n    step: 0.01,\n})\npaneControl.addBinding(configState, 'lineColor', { label: '边框颜色' })\npaneControl.addBinding(configState, 'linewidth', {\n    label: '边框宽度',\n    min: 0,\n    max: 5,\n    step: 0.01,\n})\npaneControl.addBinding(configState, 'lineOpacity', {\n    label: '边框透明度',\n    min: 0,\n    max: 1,\n    step: 0.01,\n})\n</script>\n"],"names":["MapControls","tilesCom"],"mappings":"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"}
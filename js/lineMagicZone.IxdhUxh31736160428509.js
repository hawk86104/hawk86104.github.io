import{P as t}from"./tweakpane.yHWGBmom1736160428509.js";import{e,W as n,b as o,U as r}from"./@tresjs.8MtVPQyb1736160428509.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.NEfY280X1736160428509.js";import{_ as a,B as s}from"./three.rmsIv-u_1736160428509.js";import{d as l,a5 as u,a6 as c,w as f,o as m,D as p,J as d,u as h,j as g,r as v,e as x,f as I,g as w,al as S,m as _}from"./@vue.4u_eOGex1736160428509.js";import"./@vueuse.GObPVvIB1736160428509.js";import"./all.three._2K49LgC1736160428509.js";import"./oimophysics.x0jH7fze1736160428509.js";const b=C;!function(t,e){const n=C,o=P();for(;;)try{if(678782===parseInt(n(289))/1*(parseInt(n(323))/2)+-parseInt(n(304))/3*(-parseInt(n(277))/4)+-parseInt(n(285))/5*(-parseInt(n(262))/6)+parseInt(n(315))/7+-parseInt(n(301))/8+parseInt(n(307))/9*(parseInt(n(311))/10)+-parseInt(n(276))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const y=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[C(272)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){y(this,(function(){const t=C,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(269),"i"),o=z("init");e.test(o+t(319))&&n[t(286)](o+t(322))?z():o("0")}))()}();const T=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[C(272)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();T(void 0,(function(){const t=C,e=function(){const t=C;let e;try{e=Function(t(291)+t(284)+");")()}catch(n){e=window}return e}(),n=e.console=e.console||{},o=["log",t(278),t(266),t(265),t(298),t(297),t(302)];for(let r=0;r<o[t(264)];r++){const e=T[t(308)][t(293)].bind(T),i=o[r],a=n[i]||e;e[t(312)]=T[t(267)](T),e[t(282)]=a[t(282)][t(267)](a),n[i]=e}}))();const U=[b(270)],N=["position","aIndex",b(260)];function C(t,e){const n=P();return(C=function(t,e){return n[t-=260]})(t,e)}function P(){const t=["EllipseCurve","speed","887190CBFKnx","__proto__","uHeight","scale","2368044hnhaLn","push","getAttribute","AdditiveBlending","chain","#90ee90","uScale","input","1223366IfJBno","aNormal","counter","12NxTqLf","getPoints","length","error","info","bind","array","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rotateX","baseColor","apply","setFromPoints","map","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","29304330kJzxgw","154180gQeGcs","warn","height","PointsMaterial","value","toString","lineMagicZone",'{}.constructor("return this")( )',"2727330uTHVgk","test","yRadius","TresPoints","1KCcYBH","Color","return (function() ","gger","prototype","color","uTime","set","table","exception","action","debu","39736EXBgoM","trace","call","81ESuKtW","string","TresGroup","27dibpMk","constructor"];return(P=function(){return t})()}const M=b(275),W=l({__name:b(283),props:{height:{default:1.6},speed:{default:1},color:{default:b(320)}},async setup(t){const r=b;let i,l;const v=u(),x=t,I=([i,l]=c((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,l(),i),w=new(a[r(309)])(0,0,8,8,0,2*Math.PI,!1,0),S=[];for(let e=0;e<5;e++)S[r(316)](...w[r(263)](719)),w.xRadius+=.2,w[r(287)]+=.2;const _=new Float32Array(S[r(274)](((t,e)=>e))),y=(new s)[r(273)](S)[r(317)]("position")[r(268)],T=new Float32Array(y[r(264)]);for(let e=0;e<y[r(264)]/3;e++){const t=3*e;y[t+1]+=.15*Math.floor(e/720);const n=e%720*3,o=3*(e%720+2880);T[t]=y[o]-y[n],T[t+1]=y[o+1]-y[n+1],T[t+2]=y[o+2]-y[n+2]}const C={uTime:{value:0},uScale:{value:v[r(314)]?v.scale:1},uHeight:{value:x.height},uPerlinTexture:{value:I[1]},baseColor:{value:new(a[r(290)])(x[r(294)])}},{onLoop:P}=e();return P((()=>{const t=r;C[t(295)][t(281)]+=.01*x[t(310)]})),f((()=>[x[r(294)],v[r(314)],x[r(279)]]),(([t,e,n])=>{const o=r;C[o(271)].value[o(296)](t),C[o(321)].value=e,C[o(313)].value=n})),(t,e)=>{const o=r;return m(),p(o(306),null,[d(o(288),{rotateX:-Math.PI/2,scale:.1},[d("TresBufferGeometry",{position:[h(y),3],aIndex:[h(_),1],aNormal:[h(T),3]},null,8,N),g(h(n),{baseMaterial:a[o(280)],vertexShader:"\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n",fragmentShader:M,uniforms:C,map:h(I)[0],alphaMap:h(I)[0],transparent:"",depthWrite:!1,blending:a[o(318)],color:"#409eff",size:.1},null,8,["baseMaterial",o(274),"alphaMap","blending"])],8,U)])}}});function z(t){function e(t){const n=C;if(typeof t===n(305))return function(t){}[n(308)]("while (true) {}")[n(272)](n(261));1!==(""+t/t)[n(264)]||t%20==0?function(){return!0}[n(308)](n(300)+n(292))[n(303)](n(299)):function(){return!1}[n(308)](n(300)+"gger")[n(272)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const j=A;!function(t,e){const n=A,o=B();for(;;)try{if(222670===-parseInt(n(368))/1+parseInt(n(383))/2*(-parseInt(n(370))/3)+parseInt(n(397))/4*(parseInt(n(392))/5)+parseInt(n(381))/6+parseInt(n(377))/7+-parseInt(n(401))/8*(-parseInt(n(376))/9)+parseInt(n(369))/10*(-parseInt(n(380))/11))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(406)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function B(){const t=["trace","TresPerspectiveCamera","constructor","apply","error","counter","test","log","debu","string","#ff0000","35822YlrFwt","2203570YoYlsF","3sBPeUu","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","addBinding","speed","height","549isTPpD","918624AeXTMQ","#201919","color","11nbSzSY","816468ccxgNk","gger","253190ZcYHxC","toString","console","TresAmbientLight","prototype","call","length","init","lineMagicZone","5npOhnW","return (function() ","while (true) {}","scale","action","1252252yzEaoz","bind","exception","TresCanvas","3288kLRKdj","table"];return(B=function(){return t})()}!function(){D(this,(function(){const t=A,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(372),"i"),o=E(t(390));e[t(409)](o+"chain")&&n[t(409)](o+"input")?E():o("0")}))()}();const O=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[A(406)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();O(void 0,(function(){const t=A;let e;try{e=Function(t(393)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e[t(385)]=e[t(385)]||{},o=[t(410),"warn",t(371),t(407),t(399),t(402),t(403)];for(let i=0;i<o[t(389)];i++){const e=O[t(405)][t(387)][t(398)](O),r=o[i],a=n[r]||e;e.__proto__=O[t(398)](O),e[t(384)]=a[t(384)][t(398)](a),n[r]=e}}))();const R=l({__name:j(391),setup(e){const n=j,o=v({reflectivity:.1,showGridHelper:!0,scale:1}),a=v({color:n(367),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(373)](a,n(379),{label:"颜色"}),s[n(373)](a,n(395),{label:"大小",min:.1,max:3,step:.1}),s[n(373)](a,n(375),{label:"高度",min:.1,max:3,step:.1}),s.addBinding(a,n(374),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=x(s(400));return m(),I(l,{clearColor:s(378),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:w((()=>[e[0]||(e[0]=d(s(404),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),g(h(r),{enableDamping:""}),e[1]||(e[1]=d(s(386),{intensity:2},null,-1)),(m(),I(S,null,{default:w((()=>[g(W,_({position:[3,0,0]},a),null,16)])),_:1})),(m(),I(S,null,{default:w((()=>[g(W,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(m(),I(S,null,{default:w((()=>[g(i,_({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function A(t,e){const n=B();return(A=function(t,e){return n[t-=367]})(t,e)}function E(t){function e(t){const n=A;if(typeof t===n(412))return function(t){}[n(405)](n(394))[n(406)](n(408));1!==(""+t/t).length||t%20==0?function(){return!0}[n(405)](n(411)+n(382))[n(388)](n(396)):function(){return!1}[n(405)](n(411)+n(382))[n(406)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

import{a6 as t,C as n,cd as o,ce as e,cf as r,cg as i,k as u,bS as s,ab as c,ad as a}from"./three.p-9BQwc31724983368286.js";import{f as l,$ as f,d as p}from"./@tresjs.OrqGCbtj1724983368286.js";import{C as d}from"./three-custom-shader-material.y6er40ya1724983368286.js";import"./object-hash.X2exW7z_1724983368286.js";import"./@amap.-Bisu7YL1724983368286.js";import"./glsl-tokenizer.EVM27uTn1724983368286.js";import{d as h,b as m,a1 as y,w as g,o as w,D as v,u as b,r as _,a4 as C,e as I,f as x,g as M,J as T,j as S,aj as j,ak as A,F as B,I as O,G as R,m as P}from"./@vue.Q1VpS3901724983368286.js";!function(t,n){const o=G,e=H();for(;;)try{if(490594===parseInt(o(372))/1*(parseInt(o(361))/2)+parseInt(o(365))/3+parseInt(o(360))/4+parseInt(o(354))/5*(parseInt(o(371))/6)+-parseInt(o(380))/7*(-parseInt(o(370))/8)+-parseInt(o(353))/9+-parseInt(o(364))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const z=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[G(389)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){z(this,(function(){const t=G,n=new RegExp(t(363)),o=new RegExp(t(385),"i"),e=D(t(374));n[t(392)](e+t(377))&&o[t(392)](e+t(384))?D():e("0")}))()}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();E(void 0,(function(){const t=G,n=function(){const t=G;let n;try{n=Function(t(367)+t(358)+");")()}catch(o){n=window}return n}(),o=n[t(379)]=n.console||{},e=[t(362),t(355),t(357),t(359),t(378),t(368),"trace"];for(let r=0;r<e[t(351)];r++){const n=E[t(382)][t(390)][t(391)](E),i=e[r],u=o[i]||n;n[t(381)]=E.bind(E),n[t(376)]=u[t(376)][t(391)](u),o[i]=n}}))();const L=async()=>{const t=G,n=await l("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(386)]((n=>{const i=t;n[i(369)]===i(352)&&(o=n),n[i(369)]===i(383)&&(e=n),"ROADS"===n.name&&(r=n)})),{model:n,city:o,land:e,roads:r}};function G(t,n){const o=H();return(G=function(t,n){return o[t-=351]})(t,n)}function H(){const t=["table","name","8syrMIz","22350zlBIMv","17tymCjK","while (true) {}","init","gger","toString","chain","exception","console","4129447GUwrSp","__proto__","constructor","LANDMASS","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","traverse","action","string","apply","prototype","bind","test","length","CITY_UNTRIANGULATED","1625454Pgeipo","825rmQwRw","warn","stateObject","info",'{}.constructor("return this")( )',"error","2399352puufjG","86080AoTAXB","log","function *\\( *\\)","23979400JSUxuz","1599228UhCWrt","debu","return (function() "];return(H=function(){return t})()}function D(t){function n(t){const o=G;if(typeof t===o(388))return function(t){}[o(382)](o(373))[o(389)]("counter");1!==(""+t/t)[o(351)]||t%20==0?function(){return!0}[o(382)](o(366)+o(375)).call(o(387)):function(){return!1}[o(382)]("debu"+o(375)).apply(o(356)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const k=U;!function(t,n){const o=U,e=Z();for(;;)try{if(396834===parseInt(o(440))/1*(parseInt(o(409))/2)+-parseInt(o(414))/3+parseInt(o(397))/4+-parseInt(o(434))/5+parseInt(o(391))/6+-parseInt(o(446))/7*(parseInt(o(405))/8)+-parseInt(o(412))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){F(this,(function(){const t=U,n=new RegExp("function *\\( *\\)"),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=N(t(410));n[t(385)](e+t(439))&&o.test(e+t(415))?N():e("0")}))()}();const W=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[U(419)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function Z(){const t=["color","model","#ffff00","2667203pQinDM","forEach","length","land","test","debu","log",'{}.constructor("return this")( )',"buildingsModelCustomShader","opacity","4146984SUaZib","clone","computeBoundingBox","gradient","string","boundingBox","937208BWAOaL","info","primitive","warn","uOpacity","table","uColor","isArray","8cCCVrw","trace","object","#ffffff","194028hUhJBc","init","dispose","4593753uMyTHk","__csm","10833nQxxhu","input","gger","bind","bulidingsColor","apply","return (function() ","uniforms","toString","call","Color","landColor","city","__proto__","renderOrder","setStyle","error","value","uGradient","material","2048435gESYzp","stateObject","constructor","computeBoundingSphere","DoubleSide","chain","8SUvtRF","prototype","console"];return(Z=function(){return t})()}W(void 0,(function(){const t=U;let n;try{n=Function(t(420)+t(388)+");")()}catch(r){n=window}const o=n.console=n[t(442)]||{},e=[t(387),t(400),t(398),t(430),"exception",t(402),t(406)];for(let i=0;i<e[t(383)];i++){const n=W.constructor[t(441)].bind(W),r=e[i],u=o[r]||n;n[t(427)]=W[t(417)](W),n[t(422)]=u[t(422)][t(417)](u),o[r]=n}}))();const $=[k(407)];function U(t,n){const o=Z();return(U=function(t,n){return o[t-=382]})(t,n)}const J=h({__name:k(389),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:"#112233"},topColor:{default:k(445)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=k,r=o,i=m(0),u=r[e(444)][e(426)];u[e(428)]=1001;const s=r[e(444)][e(384)];(()=>{const o=e,{geometry:s}=u;s[o(393)](),s[o(437)]();const{max:c,min:a}=s[o(396)];if(u[o(433)][o(413)])return;const l=new d({baseMaterial:u[o(433)],vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(424)])(r[o(418)])},uOpacity:{value:r.opacity},uLightColor:{value:new(t[o(424)])(o(408))},uTopColor:{value:new n(r.topColor)},uTime:i,uGradient:{value:r[o(394)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:t[o(438)]});u[o(433)][o(411)](),u[o(433)]=l})();const{onLoop:c}=f();c((({delta:t})=>{i[e(431)]+=t})),y((()=>{const n=e;r[n(418)]&&u[n(433)].uniforms[n(403)].value[n(429)](r[n(418)]),r[n(425)]&&((n,o)=>{const i=e;let u;"cu"===n||n===i(384)&&(u=Array[i(404)](s.material)?s[i(433)]:[s[i(433)]],u[i(382)]((n=>{const e=i;n[o][e(429)](r.landColor),n.side=t[e(438)]})))})(n(384),n(443)),r[n(390)]&&(u[n(433)][n(421)][n(401)][n(431)]=r[n(390)])})),g(r,((t,n)=>{const o=e;u[o(433)][o(421)][o(432)][o(431)]=t[o(394)]}));const a=r[e(444)][e(444)][e(392)]();return(t,n)=>{const o=e;return w(),v(o(399),{object:b(a)},null,8,$)}}});function N(t){function n(t){const o=U;if(typeof t===o(395))return function(t){}[o(436)]("while (true) {}")[o(419)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[o(436)](o(386)+"gger")[o(423)]("action"):function(){return!1}.constructor(o(386)+o(416))[o(419)](o(435)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const V=K;!function(t,n){const o=K,e=q();for(;;)try{if(461145===parseInt(o(428))/1*(parseInt(o(420))/2)+-parseInt(o(439))/3+-parseInt(o(398))/4*(-parseInt(o(413))/5)+-parseInt(o(426))/6+parseInt(o(441))/7*(parseInt(o(436))/8)+parseInt(o(438))/9+parseInt(o(451))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const Q=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[K(417)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){Q(this,(function(){const t=K,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(440),"i"),e=nt(t(416));n[t(421)](e+"chain")&&o.test(e+"input")?nt():e("0")}))()}();const X=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[K(417)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function K(t,n){const o=q();return(K=function(t,n){return o[t-=398]})(t,n)}X(void 0,(function(){const t=K,n=function(){const t=K;let n;try{n=Function(t(409)+'{}.constructor("return this")( ));')()}catch(o){n=window}return n}(),o=n[t(399)]=n.console||{},e=["log","warn",t(412),"error",t(431),t(418),t(419)];for(let r=0;r<e[t(452)];r++){const n=X[t(449)][t(454)][t(423)](X),i=e[r],u=o[i]||n;n[t(443)]=X[t(423)](X),n.toString=u[t(448)][t(423)](u),o[i]=n}}))();const Y=[V(447)];function q(){const t=["2243823pbUAsP","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","203MePLVv","call","__proto__"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","Shader","value","object","toString","constructor","fromEdgesGeometry","6737710tEtXmz","length","linewidth","prototype","1009144fsJTvM","console","gger","uniforms","while (true) {}","debu","matrix","#FFF","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","material","applyMatrix4","return (function() ","set","builds","info","10HVPcNV","renderOrder","width","init","apply","table","trace","1261858pFNnTA","test","geometry","bind","clone","Wireframe","5168220jRPHxH","opacity","1esBvBs","innerHeight","buildingsLines","exception","action","color","innerWidth","stateObject","34904ftQJrW","string","1211913crGgYO"];return(q=function(){return t})()}const tt=h({__name:V(430),props:{builds:{},width:{default:1},color:{default:V(405)},opacity:{default:1},style:{default:V(425)}},setup(t){const s=V,c=t;let a=null,l=null;if(c.style===s(425)){const t=new o(c[s(411)][s(422)]);let n=(new e)[s(450)](t),u=new r({color:c[s(433)],linewidth:c[s(415)],opacity:c[s(427)],transparent:!0,depthWrite:!0,depthTest:!0});u.resolution[s(410)](window[s(434)],window[s(429)]),a=new i(n,u),a[s(408)](c[s(411)][s(404)][s(424)]())}else{l={transparent:!0,uniforms:{uColor:{value:new n(c.color)},uOpacity:{value:c[s(427)]}},vertexShader:s(406),fragmentShader:s(444)};const t=new o(c[s(411)][s(422)]),e=new u(l);a=new LineSegments(t,e),a[s(408)](c.builds.matrix[s(424)]()),a[s(407)][s(453)]=c.width,a[s(414)]=1e3}return y((()=>{const t=s;c.style===t(445)&&(c[t(433)]&&(l[t(401)].uColor.value=new n(c[t(433)])),c[t(427)]&&(l.uniforms.uOpacity[t(446)]=c[t(427)])),"Wireframe"===c.style&&(c[t(433)]&&(a.material[t(433)]=new n(c[t(433)])),c[t(427)]&&(a[t(407)][t(427)]=c[t(427)])),c[t(415)]&&(a[t(407)][t(453)]=c[t(415)])})),(t,n)=>(w(),v("primitive",{object:b(a)},null,8,Y))}});function nt(t){function n(t){const o=K;if(typeof t===o(437))return function(t){}.constructor(o(402)).apply("counter");1!==(""+t/t)[o(452)]||t%20==0?function(){return!0}[o(449)](o(403)+o(400))[o(442)](o(432)):function(){return!1}[o(449)](o(403)+"gger").apply(o(435)),n(++t)}try{if(t)return n;n(0)}catch(o){}}const ot=lt;!function(t,n){const o=lt,e=rt();for(;;)try{if(792220===parseInt(o(233))/1*(-parseInt(o(193))/2)+-parseInt(o(235))/3*(parseInt(o(214))/4)+-parseInt(o(240))/5+parseInt(o(186))/6*(parseInt(o(218))/7)+parseInt(o(194))/8*(-parseInt(o(211))/9)+-parseInt(o(230))/10+parseInt(o(205))/11*(parseInt(o(239))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const et=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[lt(202)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function rt(){const t=["debu","427546PJjPgu","string","TresCanvas","while (true) {}","stateObject","log","length","counter","chain","gger","input","$slots","11843490nltbtH","test","showGridHelper","1ZqXgEs","error","1810455NSDZbS","TresAxesHelper","ability","#ffffff","945564jCDree","2996240XImPLG","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","96PbKqQr","TresPerspectiveCamera","__proto__","tcRef","TresGridHelper","bind","TresAmbientLight","994094IgzfKY","24SHRwEK","console","action","init",'{}.constructor("return this")( )',"return (function() ","model","disableRender","apply","pagesShow","city","517VleMJM","prototype","showBuildings","constructor","exception","#000000","3013074TylsJG","call","toString","4CLtEWe","autoRotate","function *\\( *\\)"];return(rt=function(){return t})()}!function(){et(this,(function(){const t=lt,n=new RegExp(t(216)),o=new RegExp(t(241),"i"),e=pt(t(197));n.test(e+t(226))&&o[t(231)](e+t(228))?pt():e("0")}))()}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();it(void 0,(function(){const t=lt,n=function(){const t=lt;let n;try{n=Function(t(199)+t(198)+");")()}catch(o){n=window}return n}(),o=n[t(195)]=n[t(195)]||{},e=[t(223),"warn","info",t(234),t(209),"table","trace"];for(let r=0;r<e[t(224)];r++){const n=it.constructor[t(206)][t(191)](it),i=e[r],u=o[i]||n;n[t(188)]=it[t(191)](it),n[t(213)]=u[t(213)][t(191)](u),o[i]=n}}))();const ut=T(ot(192),{color:ot(238)},null,-1),st=T("TresDirectionalLight",{position:[100,100,0],intensity:.5,color:ot(238)},null,-1),ct={key:1,args:[1e3],position:[0,19,0]},at={key:2,args:[6e3,100],position:[0,19,0]};function lt(t,n){const o=rt();return(lt=function(t,n){return o[t-=186]})(t,n)}const ft=h({__name:ot(203),props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ot;let o,e;const r=t,i=_({clearColor:n(210),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:s,outputColorSpace:c,toneMapping:a,disableRender:r[n(201)]}),u=_({autoRotate:r[n(215)],enableDamping:!0});let l=null;r[n(207)]&&([o,e]=C((()=>L())),o=await o,e(),l=o);const f=m(),d=m();return(t,o)=>{const e=n,s=I(e(220));return w(),x(s,P({ref_key:e(189),ref:d},i,{"window-size":""}),{default:M((()=>[T(e(187),{ref_key:"perspectiveCameraRef",ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),S(b(p),j(A(u)),null,16),ut,st,r[e(207)]&&b(l)?(w(),v(B,{key:0},[S(J,{model:b(l)},null,8,[e(200)]),S(tt,{builds:b(l)[e(204)],color:"#000"},null,8,["builds"])],64)):O("",!0),R(t[e(229)],e(237)),r.showAxesHelper?(w(),v(e(236),ct)):O("",!0),r[e(232)]?(w(),v(e(190),at)):O("",!0)])),_:3},16)}}});function pt(t){function n(t){const o=lt;if(typeof t===o(219))return function(t){}[o(208)](o(221))[o(202)](o(225));1!==(""+t/t)[o(224)]||t%20==0?function(){return!0}.constructor(o(217)+o(227))[o(212)](o(196)):function(){return!1}.constructor("debugger")[o(202)](o(222)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{J as _,tt as a,ft as b,L as l};

import{i as t}from"./ice-utils.knM_fvqK1731987698599.js";import{m as n,_ as e}from"./gl-matrix.AFK4LjqA1731987698599.js";import{P as o}from"./tweakpane.yHWGBmom1731987698599.js";import{d as r,r as i,q as a,o as c,D as s,J as u,u as f}from"./@vue.-THQH3GC1731987698599.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",_=x;function x(t,n){const e=b();return(x=function(t,n){return e[t-=354]})(t,n)}!function(t,n){const e=x,o=b();for(;;)try{if(584973===parseInt(e(425))/1+-parseInt(e(422))/2*(-parseInt(e(382))/3)+parseInt(e(410))/4+parseInt(e(380))/5*(parseInt(e(401))/6)+-parseInt(e(389))/7*(-parseInt(e(364))/8)+-parseInt(e(434))/9*(-parseInt(e(390))/10)+-parseInt(e(362))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const d=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){d(this,(function(){const t=x,n=new RegExp(t(379)),e=new RegExp(t(423),"i"),o=A("init");n[t(384)](o+t(361))&&e.test(o+t(408))?A():o("0")}))()}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[x(391)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();g(void 0,(function(){const t=x;let n;try{n=Function("return (function() "+t(450)+");")()}catch(r){n=window}const e=n[t(367)]=n[t(367)]||{},o=["log",t(438),t(420),t(440),"exception",t(441),t(419)];for(let i=0;i<o[t(447)];i++){const n=g[t(386)][t(417)][t(376)](g),r=o[i],a=e[r]||n;n.__proto__=g[t(376)](g),n[t(439)]=a[t(439)][t(376)](a),e[r]=n}}))();const E={id:"canvaswebgl"},p=[_(431)],T=r({__name:_(373),setup(r){const x=_;let d,g,T,b,A,R,v,y,h,F,P,w,I;const C=1,D=.71,B=.76,U=new o({title:"参数"}),L=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U.addBlade({view:x(448),label:"颜色",min:0,max:1,value:.5}).on("change",(t=>{const n=x;j(),g[n(418)](w,t.value)}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[x(363)](L,x(455),{label:"是否后处理"}),U[x(363)](L,x(443),{picker:x(397),x:{min:0,max:1},y:{min:0,max:1}}).on(x(452),(t=>{const n=x;S[0]=L[n(443)].x,S[1]=L[n(443)].y,j()})),U[x(363)](L,x(358),{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(452),(t=>{const n=x;S[5]=L[n(358)].x,S[6]=L.offset_right_bottom.y,j()})),U[x(363)](L,x(360),{picker:x(397),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(452),(t=>{const n=x;S[10]=L.offset_left_bottom.x,S[11]=L[n(360)].y,j()})),U[x(363)](L,"offset_left_top",{picker:x(397),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(t=>{const n=x;S[15]=L.offset_left_top.x,S[16]=L[n(451)].y,j()})),a((()=>{N()}));const N=function(){const n=x;d=document[n(354)]("#canvaswebgl"),d[n(405)]=window[n(437)],d.height=window[n(442)],g=d[n(403)]("webgl"),g&&(function(){const n=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=G(e,o),T=t(g,l,m),h=g[n(412)](T,n(395)),F=g[n(412)](T,"uView"),P=g[n(412)](T,n(407)),I=Y(document[n(433)]("logo-texture"))}(),j(),g[n(366)](g.BLEND),g[n(400)](g[n(385)],g[n(381)]),M())};function M(){const t=x;g[t(436)](g[t(356)],v),g[t(359)](C,D,B,1),g[t(429)](g.COLOR_BUFFER_BIT),function(){const t=x;g.useProgram(T),g.bindBuffer(g[t(409)],b);const o=n[t(454)]();e[t(372)].ortho(o,0,d[t(405)],d[t(378)],0,.1,100),g.uniformMatrix4fv(h,!1,o);const r=e[t(372)].create();e[t(372)][t(399)](r,[0,0,1],[0,0,0],[0,1,0]),g.uniformMatrix4fv(F,!1,r),O(I,600,600),O(I,400,400)}(),g[t(436)](g[t(356)],null),L.hidden&&(g[t(429)](g[t(374)]),g[t(359)](0,0,1,1),g[t(368)](g[t(409)],A),g.useProgram(R),g[t(394)](g.TEXTURE_2D,y)),g.drawElements(g.TRIANGLES,6,g[t(369)],0),requestAnimationFrame(M)}function O(t,n,o){const r=x;let i=e[r(372)][r(454)]();e[r(372)][r(413)](i,i,[n,o,0]),e[r(372)][r(414)](i,i,[250,250,0]),g[r(427)](P,!1,i),g[r(394)](g.TEXTURE_2D,t),g[r(406)](g[r(355)],6,g[r(369)],0)}function j(){const n=x,e=new Uint8Array([0,1,2,0,2,3]);A=G(S,e),R=t(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=g[n(412)](R,n(365)),g[n(412)](R,n(446)),function(){const t=x;y=Y(d),v=g[t(426)](),g.bindFramebuffer(g[t(356)],v),g[t(404)](g[t(356)],g[t(415)],g[t(445)],y,0),g[t(436)](g.FRAMEBUFFER,null)}()}function Y(t){const n=x,e=g[n(432)]();return g.bindTexture(g.TEXTURE_2D,e),t instanceof HTMLImageElement?g[n(411)](g[n(445)],0,g[n(416)],g[n(416)],g.UNSIGNED_BYTE,t):g.texImage2D(g[n(445)],0,g[n(416)],t[n(405)],t[n(378)],0,g[n(416)],g.UNSIGNED_BYTE,null),g[n(444)](g[n(445)],g[n(398)],g.NEAREST),g[n(444)](g[n(445)],g.TEXTURE_MAG_FILTER,g[n(449)]),g[n(444)](g[n(445)],g[n(393)],g[n(435)]),g[n(444)](g[n(445)],g[n(388)],g.CLAMP_TO_EDGE),e}function G(t,n){const e=x,o=g[e(421)]();g[e(368)](g[e(409)],o),g.bufferData(g[e(409)],t,g[e(402)]);const r=3*Float32Array[e(357)]+2*Float32Array[e(357)];g.vertexAttribPointer(0,3,g[e(424)],!1,r,0),g[e(428)](0),g[e(377)](1,2,g.FLOAT,!1,r,3*Float32Array[e(357)]),g[e(428)](1);const i=g[e(421)]();return g.bindBuffer(g[e(430)],i),g.bufferData(g[e(430)],n,g[e(402)]),g[e(368)](g[e(409)],null),o}return(t,n)=>{const e=x;return c(),s("canvas",E,[u("img",{id:e(396),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(371)}},null,8,p)])}}});function b(){const t=["bindBuffer","UNSIGNED_BYTE","string","none","mat4","webglPostProcessing","COLOR_BUFFER_BIT","debu","bind","vertexAttribPointer","height","function *\\( *\\)","7495NDuuPL","ONE_MINUS_SRC_ALPHA","3bxHCjl","action","test","SRC_ALPHA","constructor","stateObject","TEXTURE_WRAP_T","21bvwccA","40VKgZYb","apply","call","TEXTURE_WRAP_S","bindTexture","uProjection","logo-texture","inline","TEXTURE_MIN_FILTER","lookAt","blendFunc","3174YmnZFf","STATIC_DRAW","getContext","framebufferTexture2D","width","drawElements","uModel","input","ARRAY_BUFFER","2214376QIRiXP","texImage2D","getUniformLocation","translate","scale","COLOR_ATTACHMENT0","RGBA","prototype","uniform1f","trace","info","createBuffer","2183362qvrZlg","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","FLOAT","772514Jgwhqs","createFramebuffer","uniformMatrix4fv","enableVertexAttribArray","clear","ELEMENT_ARRAY_BUFFER","src","createTexture","getElementById","1975482MHNlcY","CLAMP_TO_EDGE","bindFramebuffer","innerWidth","warn","toString","error","table","innerHeight","offset_right_top","texParameteri","TEXTURE_2D","color","length","slider","NEAREST",'{}.constructor("return this")( )',"offset_left_top","change","counter","create","hidden","querySelector","TRIANGLES","FRAMEBUFFER","BYTES_PER_ELEMENT","offset_right_bottom","clearColor","offset_left_bottom","chain","44794310AjbLkY","addBinding","1515816Qruqml","mixParam","enable","console"];return(b=function(){return t})()}function A(t){function n(t){const e=x;if(typeof t===e(370))return function(t){}.constructor("while (true) {}")[e(391)](e(453));1!==(""+t/t)[e(447)]||t%20==0?function(){return!0}[e(386)]("debugger")[e(392)](e(383)):function(){return!1}[e(386)](e(375)+"gger")[e(391)](e(387)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{T as default};

import{F as e,K as a}from"./@tresjs.DsQAOGDv1766395949228.js";import{p as t,e as o}from"./three-tile.GG029K-G1766395949228.js";import{s,c as r,a as n,i}from"./informationDiv.Vyes7t_y1766395949228.js";import"./shapeConfigurator.vue_vue_type_style_index_1_scoped_abbf0cc1_lang._TNQgLqd1766395949228.js";import"./Resource.DyrQXsrT1766395949228.js";import{u as l}from"./useTexture.CF9cs5am1766395949228.js";import"./three-custom-shader-material.VjTva5tI1766395949228.js";import{d as p,ac as c,w as m,G as u,o as d,u as _,I as g,r as h,a as f,F as v,b as j,e as S,h as y,m as x,ah as b,g as D,a9 as I,aa as w}from"./@vue.BxPWGdWw1766395949228.js";import{c1 as M,k as F,a6 as T,z as G,V as B}from"./three.F31Lz30M1766395949228.js";import{P as C}from"./tweakpane.CqZAnw7f1766395949228.js";import"./postprocessing.Rj820gp21766395949228.js";import"./@vueuse.D_OASVSl1766395949228.js";/* empty css                                                                                    */import"./@fesjs.Bl8X3Cus1766395949228.js";import"./vue-router.DKbpfuaB1766395949228.js";import"./lodash-es.DWe8oqPO1766395949228.js";import"./pinia.00k7dVzH1766395949228.js";import"./@qlin.y-0Z8WnK1766395949228.js";import"./@babel.BPq7uOAK1766395949228.js";import"./@floating-ui.Bhq4ibgf1766395949228.js";import"./@juggle.Vc7cP4_P1766395949228.js";import"./object-hash.dpls2F2R1766395949228.js";import"./@amap.fjyZdsU91766395949228.js";import"./jszip.4nkwO7EE1766395949228.js";const L=["position"],P=["scale","material","rotateX","position-y"],W=p({__name:"cloundSateShow",props:{map:{},height:{default:100},color:{default:"#cccccc"},opacity:{default:.6}},async setup(e){let a,t;const o=e,r=new M({displacementMap:new G,transparent:!0,side:T,opacity:o.opacity,color:new F(o.color)});r.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * 0.5 + 0.0 );"),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","\n            #include <alphamap_fragment>\n            float h = texture2D(map, vMapUv ).a;\n            diffuseColor.rgb *= h;\n            diffuseColor.a = clamp(diffuseColor.a * 2.0, 0.0, 1.0);\n            ")};const n=o.map.geo2map(new B(105,34,0));n.applyMatrix4(o.map.matrix);const i=s(o.map,{x:67,y:11},{x:140,y:57},1e3*o.height),p=["https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171300.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171400.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171500.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171600.HDF.png"];let h=0;const f=([a,t]=c(()=>l(p)),a=await a,t(),a);r.map=f[h],m(()=>[o.color,o.opacity],([e,a])=>{r.color.setStyle(e),r.opacity=a});let v=null,j=!1;return j?(clearInterval(v),v=null,j=!1):(v=setInterval(()=>{h=h<p.length-1?h+1:0,r.map=f[h],r.needsUpdate=!0,console.log(h)},1e3),j=!0),(e,a)=>(d(),u("TresGroup",{position:[..._(n)]},[g("TresMesh",{scale:[_(i).x,_(i).y,1e3*e.height],material:_(r),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[g("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,P)],8,L))}}),k=["object"],A=p({__name:"mapBoxShow2",setup(a){const s=h({height:500,color:"#cccccc",opacity:.6}),i=new C({title:"参数"});i.addBinding(s,"color",{label:"颜色"}),i.addBinding(s,"height",{label:"高度",min:10,max:5e3,step:10}),i.addBinding(s,"opacity",{label:"透明度",min:0,max:1,step:.1});const l=t.create({imgSource:[new o({style:"6"}),new o({style:"8"})],minLevel:2,maxLevel:18,lon0:90});l.rotateX(-Math.PI/2);const p=new B(105,34,0),c=new B(110,0,1e7),D=l.localToWorld(l.geo2map(p)),I=l.localToWorld(l.geo2map(c)),w=f(),{camera:M,controls:F,scene:T,renderer:G}=e();return M.value&&M.value.position.copy(I),m(()=>F.value,e=>{e&&(e.target.copy(D),r(e,M.value,T.value))}),m(()=>w.value,e=>{e&&e.target.position.copy(D)}),n(M.value,G.domElement,l),(e,a)=>(d(),u(v,null,[g("TresDirectionalLight",{ref_key:"tdLight",ref:w,position:[0,2e3,1e3],intensity:1},null,512),g("primitive",{object:_(l)},null,8,k),(d(),j(b,null,{default:S(()=>[y(W,x({map:_(l)},s),null,16,["map"])]),_:1}))],64))}}),E=p({__name:"cloundSate",setup(e){const t=h({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),o=h({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,keyPanSpeed:5});return(e,s)=>{const r=D("TresCanvas");return d(),u(v,null,[y(r,x(t,{"window-size":""}),{default:S(()=>[s[0]||(s[0]=g("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:1,far:4e10},null,-1)),y(_(a),I(w(o)),null,16),s[1]||(s[1]=g("TresAmbientLight",{intensity:1},null,-1)),y(A)]),_:1},16),y(i)],64)}}});export{E as default};

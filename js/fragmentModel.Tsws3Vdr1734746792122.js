import{_ as n,a as t,C as o,cC as r}from"./three.1FILWcBb1734746792122.js";import{e,a,b as s,U as i}from"./@tresjs.vA_UT8oy1734746792122.js";import{P as c}from"./tweakpane.yHWGBmom1734746792122.js";import{d as u,a6 as l,r as p,b as f,w as m,o as v,D as g,J as d,aj as x,ak as y,u as h,e as w,f as b,g as C,j as P,al as I}from"./@vue.-THQH3GC1734746792122.js";import"./@vueuse.lqJslAkC1734746792122.js";const _=M;!function(n,t){const o=M,r=j();for(;;)try{if(511332===-parseInt(o(314))/1*(-parseInt(o(319))/2)+parseInt(o(256))/3+parseInt(o(286))/4*(parseInt(o(273))/5)+-parseInt(o(292))/6+parseInt(o(283))/7*(parseInt(o(266))/8)+-parseInt(o(268))/9+-parseInt(o(333))/10*(parseInt(o(261))/11))break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const z=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(306)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function M(n,t){const o=j();return(M=function(n,t){return o[n-=255]})(n,t)}!function(){z(this,(function(){const n=M,t=new RegExp(n(297)),o=new RegExp(n(316),"i"),r=S(n(269));t[n(285)](r+n(284))&&o.test(r+n(263))?S():r("0")}))()}();const D=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[M(306)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function j(){const n=["940OKMgnp",'{}.constructor("return this")( )',"rotateY","normal","709743ttdjVP","./draco/","length","traverse","颜色1st","60841TEUddS","array","input","addBinding","__proto__","1997816DmVQPv","tangent","6168411vrPtVX","init","u_progress","children","exception","92385iaxvYo","变化量","table","aRandom","random","attributes","Mesh","while (true) {}","#ffc0fa","bind","14vDVgDG","chain","test","64IRnUHX","action","counter","error","debu","geometry","849318PaHkna","Color","prototype","deleteAttribute","rotateX","function *\\( *\\)","position","uniforms","warn","setAttribute","console","scene","m1Color","count","apply","fragmentModelCom","translate","BufferAttribute","log","m2Color","return (function() ","stateObject","1663FtSJXm","gger","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","constructor","994TZDCdd","toNormal","divideScalar","toPosition","Vector3","push","value","toNonIndexed","clone","set","TresShaderMaterial","#bcd4ff","aCenter","sin"];return(j=function(){return n})()}D(void 0,(function(){const n=M;let t;try{t=Function(n(312)+n(334)+");")()}catch(e){t=window}const o=t[n(302)]=t[n(302)]||{},r=[n(310),n(300),"info",n(289),n(272),n(275),"trace"];for(let a=0;a<r[n(258)];a++){const t=D.constructor[n(294)].bind(D),e=r[a],s=o[e]||t;t[n(265)]=D[n(282)](D),t.toString=s[n(317)][n(282)](s),o[e]=t}}))();const R=[_(291)],A=u({__name:_(307),async setup(i){const u=_;let w,b;const C=t=>{const o=M,e=[];return t[o(259)]((t=>{const r=o;t instanceof n[r(279)]&&(t[r(291)].deleteAttribute("uv"),t[r(291)][r(295)](r(267)),e[r(324)](t[r(291)]))})),r(e)},P=C(([w,b]=l((()=>a("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:u(257)}))),w=await w,b(),w)[u(303)][u(271)][0]);P[u(296)](Math.PI/2),P[u(308)](0,-.9,0);const I=P[u(327)]()[u(326)](),z=C(([w,b]=l((()=>a("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:u(257)}))),w=await w,b(),w)[u(303)][u(271)][0]);z[u(296)](-Math.PI/2),z[u(335)](Math.PI/3);const D=z[u(327)]()[u(326)](),j=I[u(278)].position[u(262)],A=I[u(278)][u(298)].count,S=D[u(278)][u(298)][u(262)],V=D[u(278)][u(255)][u(262)],E=D[u(278)][u(298)][u(305)],F=new Float32Array(A),N=new Float32Array(3*(A+2)),T=new Float32Array(3*(A+2)),U=new Float32Array(3*(A+2));for(let t=0;t<A;t+=3){const o=1*Math[u(277)](),r=t%E;F[t]=o,F[t+1]=o,F[t+2]=o;const e=3*t,a=j[e],s=j[e+1],i=j[e+2],c=j[e+3],l=j[e+4],p=j[e+5],f=j[e+6],m=j[e+7],v=j[e+8],g=new(n[u(323)])(a+c+f,s+l+m,i+p+v)[u(321)](3);N[u(328)]([g.x,g.y,g.z],3*t),N.set([g.x,g.y,g.z],3*(t+1)),N.set([g.x,g.y,g.z],3*(t+2));const d=(n,t,o)=>{const r=u,e=3*o;for(let a=0;a<3;a++){const s=e+3*a;t[r(328)]([n[s],n[s+1],n[s+2]],3*(o+a))}};d(S,T,r),d(V,U,r)}I[u(301)](u(276),new(n[u(309)])(F,1)),I[u(301)](u(331),new t(N,3)),I[u(301)](u(322),new(n[u(309)])(T,3)),I[u(301)](u(320),new(n[u(309)])(U,3)),console[u(310)](I[u(278)]);const Z=([w,b]=l((()=>s(["./plugins/visualArts/image/fragment512px.png"]))),w=await w,b(),w),k={uniforms:{u_progress:{value:-.1},matcap1:{value:Z},m1Color:{type:"v3",value:new o(u(281))},matcap2:{value:Z},m2Color:{type:"v3",value:new(n[u(293)])(u(330))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},L=p({c1:u(281),c2:u(330)}),X=f(.5),$=new c({title:"参数"});return $[u(264)](k[u(299)][u(270)],u(325),{label:u(274),min:-.1,max:1,step:.001}).disabled=!0,$.addBinding(L,"c1",{label:u(260)}),$[u(264)](L,"c2",{label:"颜色2rd"}),$[u(264)](X,"value",{label:"速度",min:.001,max:1,step:.001}),m(L,(n=>{const t=u;k[t(299)][t(304)].value[t(328)](n.c1),k[t(299)][t(311)][t(325)][t(328)](n.c2)}),{deep:!0}),e().onLoop((({elapsed:n})=>{const t=u;k[t(299)][t(270)][t(325)]=(Math[t(332)](n*X[t(325)])+1)/2,$.refresh()})),(n,t)=>{const o=u;return v(),g("TresMesh",{geometry:h(I)},[d(o(329),x(y(k)),null,16)],8,R)}}});function S(n){function t(n){const o=M;if("string"==typeof n)return function(n){}[o(318)](o(280))[o(306)](o(288));1!==(""+n/n)[o(258)]||n%20==0?function(){return!0}.constructor(o(290)+o(315)).call(o(287)):function(){return!1}[o(318)](o(290)+"gger")[o(306)](o(313)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function V(){const n=["1540136VRmLGM","ACESFilmicToneMapping","stateObject","input","string","407994iDsWjR","test","function *\\( *\\)","967856ZSrJts","60LLDtGd","error","table","bind","6EPRpea","info","fragmentModel","constructor","trace","5260675qTSjUH","gger","init","6313848tRXEuk","TresPerspectiveCamera","log","length","console","TresAmbientLight","16766892XLdcUC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","108410RhMZSW","apply","debu","warn","toString","counter"];return(V=function(){return n})()}const E=T;!function(n,t){const o=T,r=V();for(;;)try{if(534882===parseInt(o(251))/1+-parseInt(o(265))/2*(parseInt(o(270))/3)+parseInt(o(257))/4+parseInt(o(266))/5*(-parseInt(o(262))/6)+parseInt(o(239))/7+-parseInt(o(242))/8+parseInt(o(248))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();const F=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[T(252)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();!function(){F(this,(function(){const n=T,t=new RegExp(n(264)),o=new RegExp(n(249),"i"),r=Z(n(241));t[n(263)](r+"chain")&&o.test(r+n(260))?Z():r("0")}))()}();const N=function(){let n=!0;return function(t,o){const r=n?function(){if(o){const n=o[T(252)](t,arguments);return o=null,n}}:function(){};return n=!1,r}}();function T(n,t){const o=V();return(T=function(n,t){return o[n-=239]})(n,t)}N(void 0,(function(){const n=T;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}const o=t[n(246)]=t.console||{},r=[n(244),n(254),n(271),n(267),"exception",n(268),n(274)];for(let a=0;a<r[n(245)];a++){const t=N[n(273)].prototype[n(269)](N),e=r[a],s=o[e]||t;t.__proto__=N[n(269)](N),t[n(255)]=s[n(255)][n(269)](s),o[e]=t}}))();const U=u({__name:E(272),setup(t){const o=E,r=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),e={clearColor:"#000000",windowSize:!0,toneMapping:n[o(258)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=w("TresCanvas");return v(),b(s,x(y(e)),{default:C((()=>[t[0]||(t[0]=d(a(243),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),P(h(i),x(y(r)),null,16),t[1]||(t[1]=d(a(247),{intensity:2},null,-1)),(v(),b(I,null,{default:C((()=>[P(A)])),_:1}))])),_:1},16)}}});function Z(n){function t(n){const o=T;if(typeof n===o(261))return function(n){}.constructor("while (true) {}").apply(o(256));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(o(253)+o(240)).call(o(250)):function(){return!1}[o(273)]("debu"+o(240))[o(252)](o(259)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{U as default};

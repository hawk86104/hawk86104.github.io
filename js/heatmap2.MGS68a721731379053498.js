import{P as t}from"./tweakpane.yHWGBmom1731379053498.js";import{a as n,b as e,l as o}from"./pagesShow.vue_vue_type_script_setup_true_lang.kLvS667-1731379053498.js";import{_ as r}from"./heatmap.js-fix.xXqX1yMJ1731379053498.js";import{h as i,_ as c,bY as s,B as u,s as a,a0 as p}from"./three.bXjbKLxC1731379053498.js";import{r as f}from"./utils.v9g-OPOD1731379053498.js";import{d as l}from"./pinia.ZMhAaG0S1731379053498.js";import{b as d,d as h,a3 as m,o as g,D as y,J as v,u as I,F as b,q as w,U as _,N as j,P as x,H as M,L as A,a6 as D,r as E,j as R,g as Z,m as S}from"./@vue.-THQH3GC1731379053498.js";import{c as z,d as F,a as O}from"./three-mesh-bvh.npnPceGL1731379053498.js";import{_ as P}from"./@fesjs.vI9WP6bH1731379053498.js";import"./@tresjs.bLKO3xyw1731379053498.js";import"./@vueuse.DWZrQ1Sl1731379053498.js";import"./three-custom-shader-material.DZEAYEp81731379053498.js";import"./@amap.mFH-iVTk1731379053498.js";import"./vue-demi.C4xddsk91731379053498.js";import"./vue-router.ZGnIDLu91731379053498.js";import"./lodash-es.kYt-_xTG1731379053498.js";import"./@qlin.yHhFDldE1731379053498.js";import"./@floating-ui.BPbuo5Gx1731379053498.js";import"./@juggle.7yjBMqoW1731379053498.js";function T(){const t=["call","bind","top","_config","randInt","none","16IAiNcg","create","apply","chain","body","rgb(255,0,0)","console","setData","2984sAtyiK","while (true) {}","debu","init","6831187nTvUVM","appendChild","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","test","20kMMaYO","constructor","table","stateObject","6777946BApYpb","gger","absolute","2ZnIeRn","845mwnAJB","display","rgb(0,0,255)","push","rgb(0,255,0)","trace","412728EDdmXr","position","230892XsXtms",'{}.constructor("return this")( )',"info","4501773kcUsdE","error","length","return (function() ","getValueAt","2403aACQPy","2782770AmbizF","heatmap-canvas","height","style","left","string","5QZdCHK","width","function *\\( *\\)","__proto__","action","prototype"];return(T=function(){return t})()}!function(t,n){const e=$,o=T();for(;;)try{if(689360===-parseInt(e(119))/1*(parseInt(e(126))/2)+parseInt(e(136))/3*(parseInt(e(163))/4)+-parseInt(e(143))/5*(-parseInt(e(137))/6)+-parseInt(e(116))/7+-parseInt(e(155))/8*(-parseInt(e(131))/9)+-parseInt(e(112))/10*(parseInt(e(107))/11)+-parseInt(e(128))/12*(-parseInt(e(120))/13))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const k=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){k(this,(function(){const t=$,n=new RegExp(t(145)),e=new RegExp(t(109),"i"),o=q(t(106));n[t(111)](o+t(158))&&e[t(111)](o+"input")?q():o("0")}))()}();const B=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[$(157)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();B(void 0,(function(){const t=$;let n;try{n=Function(t(134)+t(129)+");")()}catch(r){n=window}const e=n[t(161)]=n[t(161)]||{},o=[t(110),"warn",t(130),t(132),"exception",t(114),t(125)];for(let i=0;i<o[t(133)];i++){const n=B[t(113)][t(148)].bind(B),r=o[i],c=e[r]||n;n[t(146)]=B[t(150)](B),n.toString=c.toString[t(150)](c),e[r]=n}}))();const V=(t,n)=>t[$(135)](n)+-10;function $(t,n){const e=T();return($=function(t,n){return e[t-=106]})(t,n)}function q(t){function n(t){const e=$;if(typeof t===e(142))return function(t){}[e(113)](e(164)).apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(113)]("debugger")[e(149)](e(147)):function(){return!1}.constructor(e(165)+e(117))[e(157)](e(115)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const G=X;!function(t,n){const e=X,o=U();for(;;)try{if(453174===parseInt(e(449))/1+-parseInt(e(435))/2+parseInt(e(447))/3+-parseInt(e(443))/4+parseInt(e(452))/5+parseInt(e(461))/6*(-parseInt(e(457))/7)+parseInt(e(442))/8*(-parseInt(e(470))/9))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const H=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[X(448)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){H(this,(function(){const t=X,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=Y(t(436));n[t(451)](o+t(444))&&e[t(451)](o+t(434))?Y():o("0")}))()}();const L=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[X(448)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function U(){const t=["constructor","2388345rnzXmI","apply","679082PoicDP","value","test","3155550HHxfIG","debu",'{}.constructor("return this")( )',"string","buildingsHeatmap","1211raRneM","log","table","while (true) {}","6126okZRQG","error","counter","__proto__","gger","info","trace","console","call","63nDAbfe","return (function() ","input","295840ItcjYj","init","prototype","toString","warn","length","exception","672848MYkdXA","2959352MdjoFm","chain","bind"];return(U=function(){return t})()}function X(t,n){const e=U();return(X=function(t,n){return e[t-=433]})(t,n)}L(void 0,(function(){const t=X;let n;try{n=Function(t(433)+t(454)+");")()}catch(r){n=window}const e=n[t(468)]=n[t(468)]||{},o=[t(458),t(439),t(466),t(462),t(441),t(459),t(467)];for(let i=0;i<o.length;i++){const n=L.constructor[t(437)][t(445)](L),r=o[i],c=e[r]||n;n[t(464)]=L.bind(L),n[t(438)]=c[t(438)].bind(c),e[r]=n}}))();const C=l(G(456),(()=>{const t=d(!1),n=d(0);return{showDiv:t,temperature:n,setShowDiv:function(n){t.value=n},setTemperature:function(t){n[X(450)]=t}}}));function Y(t){function n(t){const e=X;if(typeof t===e(455))return function(t){}[e(446)](e(460))[e(448)](e(463));1!==(""+t/t)[e(440)]||t%20==0?function(){return!0}[e(446)](e(453)+e(465))[e(469)]("action"):function(){return!1}[e(446)]("debu"+e(465))[e(448)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const K=nt;!function(t,n){const e=nt,o=tt();for(;;)try{if(325791===parseInt(e(312))/1*(parseInt(e(348))/2)+parseInt(e(331))/3+-parseInt(e(352))/4*(parseInt(e(308))/5)+parseInt(e(339))/6*(parseInt(e(333))/7)+parseInt(e(302))/8*(parseInt(e(321))/9)+-parseInt(e(354))/10*(parseInt(e(351))/11)+-parseInt(e(356))/12)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const Q=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[nt(310)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){Q(this,(function(){const t=nt,n=new RegExp(t(343)),e=new RegExp(t(359),"i"),o=ot(t(332));n[t(323)](o+t(300))&&e[t(323)](o+t(326))?ot():o("0")}))()}();const J=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();J(void 0,(function(){const t=nt,n=function(){const t=nt;let n;try{n=Function(t(319)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n.console=n.console||{},o=[t(340),t(327),t(364),t(350),"exception","table",t(358)];for(let r=0;r<o.length;r++){const n=J[t(363)].prototype[t(316)](J),i=o[r],c=e[i]||n;n.__proto__=J[t(316)](J),n[t(306)]=c[t(306)][t(316)](c),e[i]=n}}))();const N=[K(344),K(360)],W=[K(344)];function tt(){const t=["log","debu","Mesh","function *\\( *\\)","object","applyMatrix4","attributes","value","174FMVuBQ","geometry","error","11znOfFJ","486100drlaZx","BufferGeometry","572030qDnKLT","uniforms","18209688tFsHvy","数值———：","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","rotation-x","opacity","Texture","constructor","info","setShowDiv","uOpacity","chain","数值：","8SDOuby","children","while (true) {}","normal","toString","setTemperature","10DtsNZj","string","apply","stateObject","6175CTnovw","clone","model","primitive","bind","needsUpdate","Matrix4","return (function() ","_renderer","4661235rmtoLM","gger","test","call","\n\t\tuniform sampler2D heightMap;\n\t\tuniform float uOpacity;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_FragColor = vec4(texture2D(heightMap, vUv.xy).rgb, uOpacity);\n    }\n\t\t","input","warn","matrix","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\tvUv = uv;\n\t\t}\n\t\t","_config","1580652EFELlV","init","602Lyjnfz","canvas","counter","prototype","width","ShaderMaterial","39174pWfVQv"];return(tt=function(){return t})()}function nt(t,n){const e=tt();return(nt=function(t,n){return e[t-=298]})(t,n)}const et=h({__name:"buildingsHeatmap",props:{model:{},opacity:{default:1}},setup(t){const n=K;(()=>{const t=nt;u[t(336)].computeBoundsTree=z,c[t(353)][t(336)].disposeBoundsTree=F,a[t(336)].raycast=O})();const e=t,o=((t=250,n=250,e=!0)=>{const o=$,i=document.createElement(o(138));return i[o(140)][o(127)]=o(118),!e&&(i.style[o(121)]=o(154)),i[o(140)][o(151)]="0",i[o(140)][o(141)]="0",document[o(159)][o(108)](i),r[o(156)]({container:i,width:t,height:n,blur:".8",radius:10,gradient:{.25:o(122),.55:o(124),.85:"yellow",1:o(160)}})})();((t,n)=>{const e=$;if(!n){let o=0;for(n=[];o<1e3;)n[e(123)]({x:i[e(153)](1,t[e(152)][e(144)]),y:i[e(153)](1,t[e(152)][e(139)]),value:i[e(153)](-10,36)}),o++}t[e(162)]({max:36,min:-10,data:n})})(o);const l=new(c[n(362)])(o[n(320)][n(334)]);l[n(317)]=!0;const d=e.model.city.clone();delete d[n(349)].attributes[n(305)],delete d[n(349)][n(346)].uv;const h=d[n(349)][n(313)]().applyMatrix4(d[n(328)]),w=e.model.land[n(313)]();delete w.geometry[n(346)].normal;const _=w[n(349)][n(313)]()[n(345)](w[n(328)]),j=s([h,_]);j[n(345)]((new(c[n(318)])).makeRotationX(Math.PI/2)),f(j),j.computeBoundsTree();const x=(t=>{const o=n;return new(c[o(338)])({vertexShader:o(329),fragmentShader:o(325),uniforms:{uOpacity:{value:e.opacity},heightMap:{type:"t",value:t}},depthWrite:!0,depthTest:!0,transparent:!0,side:p})})(l),M=new(c[n(342)])(j,x);m((()=>{const t=n;e[t(361)]&&(x[t(355)][t(299)][t(347)]=e.opacity)}));const A=C(),D=t=>{const e=n;if(t){const n={x:t.uv.x*o[e(330)][e(337)],y:(1-t.uv.y)*o[e(330)].height};console[e(340)](e(301),t),console[e(340)](e(357),V(o,n)),A[e(307)](V(o,n))}},E=t=>{t&&A.$patch({showDiv:!0})},R=t=>{t&&A[n(298)](!1)};return(t,o)=>{const r=n;return g(),y(b,null,[v(r(315),{object:I(M),"rotation-x":-Math.PI/2,onPointerMove:D,onPointerEnter:E,onPointerLeave:R},null,40,N),v("primitive",{object:e.model[r(314)][r(303)][0][r(313)]()},null,8,W)],64)}}});function ot(t){function n(t){const e=nt;if(typeof t===e(309))return function(t){}[e(363)](e(304))[e(310)](e(335));1!==(""+t/t).length||t%20==0?function(){return!0}[e(363)]("debu"+e(322))[e(324)]("action"):function(){return!1}.constructor(e(341)+e(322))[e(310)](e(311)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const rt=P({__name:"dataDiv",setup(t){const n=C(),e=d({top:0,left:0});function o(t){e.value.left=t.clientX+5+"px",e.value.top=t.clientY-20+"px"}return w((()=>{window.addEventListener("mousemove",o)})),_((()=>{window.removeEventListener("mousemove",o)})),(t,o)=>j((g(),y("div",{class:"title",style:A(e.value)},"温度："+M(I(n).temperature)+"℃ ",5)),[[x,I(n).showDiv]])}},[["__scopeId","data-v-fac3e7fd"]]);function it(t,n){const e=at();return(it=function(t,n){return e[t-=160]})(t,n)}const ct=it;!function(t,n){const e=it,o=at();for(;;)try{if(580073===parseInt(e(176))/1*(-parseInt(e(164))/2)+parseInt(e(178))/3+parseInt(e(182))/4*(-parseInt(e(184))/5)+parseInt(e(186))/6*(-parseInt(e(199))/7)+-parseInt(e(181))/8*(parseInt(e(194))/9)+-parseInt(e(201))/10+parseInt(e(173))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const st=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){st(this,(function(){const t=it,n=new RegExp(t(190)),e=new RegExp(t(191),"i"),o=ft(t(192));n[t(179)](o+t(163))&&e[t(179)](o+t(193))?ft():o("0")}))()}();const ut=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[it(180)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function at(){const t=["log","exception","7yVcxdq","error","1383230cpSGeA","length","model","while (true) {}","counter","constructor","opacity","toString","info","chain","3038GIqpqO","table","return (function() ","bind","warn","string","gger","debu","builds","17955883EmIcgR","value","addBinding","717CmtdWG","透明度","3125526KiGypv","test","apply","2616EHDAqZ","1960976AKRTwG","console","5amccgv","prototype","1279554RDhPNI","action","__proto__","stateObject","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","input","4491VxqJvn","heatmap2","call"];return(at=function(){return t})()}ut(void 0,(function(){const t=it;let n;try{n=Function(t(166)+'{}.constructor("return this")( ));')()}catch(r){n=window}const e=n[t(183)]=n[t(183)]||{},o=[t(197),t(168),t(162),t(200),t(198),t(165),"trace"];for(let i=0;i<o.length;i++){const n=ut[t(206)][t(185)][t(167)](ut),r=o[i],c=e[r]||n;n[t(188)]=ut.bind(ut),n[t(161)]=c[t(161)][t(167)](c),e[r]=n}}))();const pt=h({__name:ct(195),async setup(r){const i=ct;let c,s;const u=d(!1),a=([c,s]=D((()=>o())),c=await c,s(),c);u[i(174)]=!0;const p=E({width:1,color:"#000",opacity:1,show:!0}),f=E({opacity:.9});return new t({title:"参数",expanded:!0})[i(175)](f,i(160),{label:i(177),min:0,max:1,step:.1}),(t,o)=>{const r=i;return g(),y(b,null,[R(e,{showBuildings:!1,autoRotate:!1},{ability:Z((()=>[R(et,S({model:I(a)},f),null,16,[r(203)]),R(n,S(p,{builds:I(a).city}),null,16,[r(172)])])),_:1}),R(rt)],64)}}});function ft(t){function n(t){const e=it;if(typeof t===e(169))return function(t){}.constructor(e(204))[e(180)](e(205));1!==(""+t/t)[e(202)]||t%20==0?function(){return!0}[e(206)](e(171)+"gger")[e(196)](e(187)):function(){return!1}.constructor(e(171)+e(170))[e(180)](e(189)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{pt as default};

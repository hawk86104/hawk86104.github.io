import{_ as t,C as e}from"./three.FyUEtfsR1741658416045.js";import{e as n,h as r,o,f as a}from"./@tresjs.W3PFJhMo1741658416045.js";import{a as s}from"./index.dSiIiYR01741658416045.js";import"./index.4K-tbnN71741658416045.js";import{z as i}from"./three-custom-shader-material.irEwOpzM1741658416045.js";import{p as l}from"./gl-noise.BrVtymbx1741658416045.js";import{d as u,b as c,a2 as p,w as f,o as g,H as h,N as m,j as v,u as d,r as _,f as b,g as w,aj as j,ak as y,m as M,al as x}from"./@vue.NRI7TcgI1741658416045.js";import{P as T}from"./tweakpane.yDiyAAkA1741658416045.js";import{_ as S}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.wWsaVyB41741658416045.js";import"./postprocessing.llR5x4wQ1741658416045.js";import"./@vueuse.5uFvLf9q1741658416045.js";import"./three-stdlib.X1LBpfR41741658416045.js";import"./@pmndrs.7A_kisEQ1741658416045.js";import"./object-hash.lsSo12-11741658416045.js";import"./@amap.smZgnC9y1741658416045.js";import"./jszip.zlmPIcYY1741658416045.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.l3JA2eAt1741658416045.js";import"./all.three._6CoOIhj1741658416045.js";import"./oimophysics.x0jH7fze1741658416045.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mbHqS_rJ1741658416045.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.8h5g1SNI1741658416045.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.Hh7letp81741658416045.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.rMsaxKEp1741658416045.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.D15DVono1741658416045.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.jscaB1851741658416045.js";const z=B;function I(){const t=["vertex","waterColor","function *\\( *\\)","115360ismLKR","33nwtqto","counter","material","774DQXimd","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","needsUpdate","chain","return (function() ","DoubleSide","TresBoxGeometry","MeshPhysicalMaterial","log","height","gger","waterHighlight","console","trace","apply","7lPhQEV","string","bind",'{}.constructor("return this")( )',"Flatshading","146908PojBvv","fragment","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uTime","TresMesh","warn","26013624tNZLRF","dispose","baseMaterial","__proto__","flatShading","prototype","830dSsEJD","fragmentShader","customWaterMesh","brightness","11RUcFJe","8256OvHVZa","call","constructor","length","5265144qtestQ","while (true) {}","stateObject","info","#52a7f7","debu","928310WgDFME","rotation-x","convertLinearToSRGB","value","uHeight","error","toString","tmRef","19688RxQErO"];return(I=function(){return t})()}!function(t,e){const n=B,r=I();for(;;)try{if(559497===parseInt(n(179))/1+parseInt(n(139))/2*(-parseInt(n(180))/3)+parseInt(n(157))/4*(-parseInt(n(152))/5)+-parseInt(n(161))/6*(parseInt(n(134))/7)+-parseInt(n(175))/8*(-parseInt(n(119))/9)+-parseInt(n(167))/10*(-parseInt(n(156))/11)+parseInt(n(146))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const C=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(133)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){C(this,(function(){const t=B,e=new RegExp(t(178)),n=new RegExp(t(142),"i"),r=O("init");e[t(141)](r+t(122))&&n[t(141)](r+"input")?O():r("0")}))()}();const G=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(133)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();G(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function(t(123)+t(137)+");")()}catch(n){e=window}return e}(),n=e[t(131)]=e[t(131)]||{},r=[t(127),t(145),t(164),t(172),"exception","table",t(132)];for(let o=0;o<r.length;o++){const e=G[t(159)][t(151)][t(136)](G),a=r[o],s=n[a]||e;e[t(149)]=G[t(136)](G),e[t(173)]=s.toString.bind(s),n[a]=e}}))();const P=[z(168)],H=["args"];function B(t,e){const n=I();return(B=function(t,e){return n[t-=117]})(t,e)}const F=u({__name:z(154),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(165)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[z(126)]}},setup(o){const a=z,s=o,u=c(null),_={vertex:"\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t",fragment:a(120)},b={uTime:{value:0},waterColor:{value:new e(s[a(177)]).convertLinearToSRGB()},waterHighlight:{value:new e(s.waterHighlight).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[a(155)]},uHeight:{value:s[a(128)]}},{onLoop:w}=n();return w((({elapsed:t})=>{const e=a;b[e(143)][e(170)]=-t/5})),p((()=>{const t=a;s[t(128)]&&(b[t(171)][t(170)]=s[t(128)]),s[t(177)]&&(b.waterColor[t(170)]=new e(s[t(177)]).convertLinearToSRGB()),s[t(130)]&&(b[t(130)][t(170)]=new e(s.waterHighlight)[t(169)]()),s[t(155)]&&(b[t(155)][t(170)]=s[t(155)])})),f((()=>s.Flatshading),(t=>{const e=a;u[e(170)][e(118)][e(121)]=!0})),f((()=>s[a(148)]),(e=>{const n=a,r=new i({baseMaterial:t[e],vertexShader:l(_[n(176)]),fragmentShader:_[n(140)],uniforms:b,flatShading:s[n(138)],side:t[n(124)],roughness:.2,metalness:.1,silent:!0});u[n(170)].material[n(147)](),u[n(170)][n(118)]=r})),(e,n)=>{const o=a;return g(),h(o(144),{ref_key:o(174),ref:u,"rotation-x":-Math.PI/2},[m(o(125),{args:[5,5,e.height,64,64,1]},null,8,H),v(d(r),{baseMaterial:t[o(126)],vertexShader:d(l)(_[o(176)]),fragmentShader:_[o(140)],uniforms:b,side:t[o(124)],roughness:.2,metalness:.1,flatShading:e[o(138)],silent:""},null,8,[o(148),"vertexShader",o(153),"side",o(150)])],8,P)}}});function O(t){function e(t){const n=B;if(typeof t===n(135))return function(t){}.constructor(n(162))[n(133)](n(117));1!==(""+t/t)[n(160)]||t%20==0?function(){return!0}[n(159)](n(166)+n(129))[n(158)]("action"):function(){return!1}[n(159)](n(166)+n(129))[n(133)](n(163)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=L,r=R();for(;;)try{if(756823===-parseInt(n(130))/1*(parseInt(n(170))/2)+-parseInt(n(169))/3*(parseInt(n(141))/4)+-parseInt(n(160))/5+parseInt(n(131))/6*(parseInt(n(158))/7)+parseInt(n(183))/8*(parseInt(n(147))/9)+-parseInt(n(128))/10*(parseInt(n(182))/11)+-parseInt(n(151))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(122)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){W(this,(function(){const t=L,e=new RegExp(t(127)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=N("init");e[t(125)](r+t(155))&&n[t(125)](r+t(156))?N():r("0")}))()}();const D=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[L(122)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function R(){const t=["target","MeshToonMaterial","15079428XczEyu","MeshStandardMaterial","while (true) {}","MeshDepthMaterial","chain","input","debu","763PofPEX","log","1018895jqKLNs","MeshNormalMaterial","addBinding","MeshPhongMaterial","waterColor","pos-x.jpg","neg-x.jpg","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","length","461469bdKBMU","20386TjLUGV","bind","MeshLambertMaterial","table","TresPerspectiveCamera","#52a7f7","stateObject","neg-y.jpg","label","return (function() ","info","waterHighlight","14839odixGa","6025840etpEah","error","list","console","call","pos-y.jpg","ACESFilmicToneMapping","MeshPhysicalMaterial","apply","value","constructor","test","__proto__","function *\\( *\\)","1450pTTUFL","#627179","4aYhPvZ","77538qXbztw",'{}.constructor("return this")( )',"TresAmbientLight","string","TresDirectionalLight","浪头颜色","warn","addBlade","toString","height","12QgWqJD","gger","exception","trace","brightness","baseMaterial","18AeOlTX","MeshBasicMaterial"];return(R=function(){return t})()}function L(t,e){const n=R();return(L=function(t,e){return n[t-=121]})(t,e)}D(void 0,(function(){const t=L,e=function(){const t=L;let e;try{e=Function(t(179)+t(132)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(186)]||{},r=[t(159),t(137),t(180),t(184),t(143),t(173),t(144)];for(let o=0;o<r[t(168)];o++){const e=D.constructor.prototype[t(171)](D),a=r[o],s=n[a]||e;e[t(126)]=D[t(171)](D),e[t(139)]=s.toString[t(171)](s),n[a]=e}}))();const E=u({__name:"customWater",setup(e){const n=L,r=_({alpha:!0,toneMapping:t[n(189)],windowSize:!0,clearColor:10066329}),i=_({enableDamping:!0,autoRotate:!1}),l=_({cellSize:.6,cellThickness:1.1,cellColor:n(129),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=_({height:.2,Flatshading:!1,waterColor:n(175),waterHighlight:"#b3ffff",brightness:1,baseMaterial:"MeshPhysicalMaterial"}),c=new T;return c[n(162)](u,n(140),{label:"高度",min:.1,max:5,step:.1}),c[n(162)](u,n(164),{label:"水体颜色"}),c[n(162)](u,n(181),{label:n(136)}),c[n(162)](u,n(145),{label:"亮度",min:0,max:1,step:.01}),c[n(162)](u,"Flatshading",{label:"Flatshading"}),c[n(138)]({view:n(185),label:"材质",options:[{text:n(121),value:n(121)},{text:n(148),value:n(148)},{text:n(161),value:"MeshNormalMaterial"},{text:n(152),value:n(152)},{text:"MeshPhongMaterial",value:n(163)},{text:n(150),value:n(150)},{text:n(172),value:n(172)},{text:n(154),value:n(154)}],value:u[n(146)]}),c.on("change",(t=>{const e=n;"材质"===t[e(149)][e(178)]&&(u[e(146)]=t[e(123)])})),(t,e)=>{const c=n;return g(),b(d(a),M(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=m(c(174),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),v(d(o),j(y(i)),null,16),e[1]||(e[1]=m(c(133),{intensity:.5},null,-1)),e[2]||(e[2]=m(c(135),{position:[15,15,15],intensity:1},null,-1)),v(F,j(y(u)),null,16),v(d(S),M({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(g(),b(x,null,{default:w((()=>[v(d(s),{files:[c(165),c(166),c(188),c(177),"pos-z.jpg","neg-z.jpg"],path:c(167)})])),_:1}))])),_:1},16)}}});function N(t){function e(t){const n=L;if(typeof t===n(134))return function(t){}[n(124)](n(153)).apply("counter");1!==(""+t/t)[n(168)]||t%20==0?function(){return!0}[n(124)](n(157)+"gger")[n(187)]("action"):function(){return!1}[n(124)]("debu"+n(142))[n(122)](n(176)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.1hA6StB81729762363846.js";import{B as i,V as s,cs as n,ad as e,X as r,h as o,an as a,$ as h,s as c,C as u,_ as l}from"./three.CQvcOG671729762363846.js";import{U as d,e as m,F as p}from"./@tresjs.CmAaFQUS1729762363846.js";import{c as f}from"./simplex-noise.DHLuNIrQ1729762363846.js";import{d as g,a2 as y,o as b,E as S,u as x,r as w,j as I,g as v,m as P,F as M}from"./@vue.n8X62v121729762363846.js";import{g as T}from"./index.BDIKs_XA1729762363846.js";import"./three-custom-shader-material.CWa5qaDo1729762363846.js";import"./object-hash.BiCA96VN1729762363846.js";import"./@amap.irWeW_Ar1729762363846.js";import"./jszip.B5yG0Hpd1729762363846.js";import"./glsl-tokenizer.DodQ2RCy1729762363846.js";import"./glsl-token-string.Eyit8_HG1729762363846.js";import"./glsl-token-functions.D2Lt0tGo1729762363846.js";import"./@vueuse.DvZn62wO1729762363846.js";import"./@fesjs.CZZ05Yp51729762363846.js";import"./vue-router.Du5s6fg51729762363846.js";import"./lodash-es.BBTWvufR1729762363846.js";import"./@qlin.BIlp8Yi21729762363846.js";import"./pinia.DOkF60i-1729762363846.js";import"./@babel.Bwyie5id1729762363846.js";import"./@floating-ui.B75jtkXD1729762363846.js";import"./@juggle.BnTvdTVm1729762363846.js";import"./chalk.B3MNILV41729762363846.js";/* empty css                                 */import"./iconify-icon.DK1S_nhj1729762363846.js";import"./@iconify.DKvOo9eU1729762363846.js";import"./oimophysics.B0i2NtyE1729762363846.js";import"./three-stdlib.CqKdLpwa1729762363846.js";import"./@pmndrs.DnYI6N3H1729762363846.js";import"./three.quarks.BQqMGnDH1729762363846.js";import"./quarks.core.C7CDonSm1729762363846.js";import"./tweakpane.BCjFYDHx1729762363846.js";const j=V;!function(t,i){const s=V,n=R();for(;;)try{if(430121===-parseInt(s(245))/1+parseInt(s(360))/2*(-parseInt(s(235))/3)+-parseInt(s(363))/4+-parseInt(s(330))/5+-parseInt(s(338))/6+parseInt(s(349))/7*(-parseInt(s(266))/8)+parseInt(s(194))/9*(parseInt(s(238))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(346)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){A(this,(function(){const t=V,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(321),"i"),n=F(t(273));i.test(n+t(234))&&s[t(241)](n+t(221))?F():n("0")}))()}();const _=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(346)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function R(){const t=["setSeed","currentVertex","array","gger","type","sub","position","pos0","fraction1","subrayProbability","random","add","randomGenerator","subrays","fillMesh","sourceOffset","bind","propagationTimeFactor","RAY_EXTINGUISHED","action","forwardsFill","radius0Factor","return (function() ","deathTime","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","state","currentIndex","maxSubrays","while (true) {}","createPrismFaces","currentSegmentCallback","uvs","onSubrayCreation","2690950CtGwOz","pow","copyParameters","middleLinPos","maxRaySegments","numSubrays","toString","ramification","2841834PGAXSk","updateMesh","__proto__","max","subrayCylinderPosition","generateUVs","clone","recursion","apply","cos","currentUVCoordinate","2538067PVGNFd","vertices","index","table","currentSeed","initSubray","endPropagationTime","createTriangleVerticesWithoutUVs","subVectors","floor","roughness","8SaxPQr","getSeed","trace","473136gcSrsG","lerp","currentCreateTriangleVertices","117EilABa","ceil","birthTime","RAY_INITIALIZED","up1","down","maxIterations","set","RAY_VANISHING","RAY_PROPAGATING","radius0","length","sin","copy","simplexX","warn","normalize","timeScale","minRadius","fraction0","addNewSubray","getNewSegment","middlePos","forwards","subrayConePosition","radius1","newPos","input","COS30DEG","createMesh","stateObject","positionVariationFactor","setAttribute","lerpVectors","recursionProbability","createTriangleVerticesWithUVs","beginVanishingTime","info","isLightningStrike","onDecideSubrayCreation","chain","424734ASHWbM","string","isEternal","2482910sfKlsJ","time","multiplyScalar","test","subrayPeriod","vanishingTimeFactor","crossVectors","738656lnKVlC","currentSubray","timeFraction","straightness",'{}.constructor("return this")( )',"cross1","createDefaultSubrayCreationCallbacks","console","constructor","SIN30DEG","destOffset","debu","side","visible","up0","iteration","simplexY","usage","createPrism","radius1Factor","pos1","8YQDILH","createSegment","fractalRayRecursive","maxSubrayRecursion","linPos1","subrayDutyCycle","currentCoordinate","init","drawRange","call","linPos0","push","createRandomGenerator","log","min","noiseSeed","isStatic","isInitialSegment","raySegments","seed","indices","needsUpdate","seedGenerator","RAY_UNBORN","uvsAttribute","LightningStrike","counter","vPos","positionAttribute","rayParameters","count"];return(R=function(){return t})()}_(void 0,(function(){const t=V,i=function(){const t=V;let i;try{i=Function(t(319)+t(249)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(252)]||{},n=[t(279),t(209),t(231),"error","exception",t(352),t(362)];for(let e=0;e<n[t(205)];e++){const i=_[t(253)].prototype[t(313)](_),r=n[e],o=s[r]||i;i[t(340)]=_[t(313)](_),i[t(336)]=o[t(336)][t(313)](o),s[r]=i}}))();class C extends i{constructor(t={}){const i=V;super(),this[i(232)]=!0,this[i(301)]=i(291),this[i(273)](C[i(332)](t,t)),this[i(223)]()}static[j(278)](){const t=j,i=2053,s=[];for(let e=0;e<i;e++)s[t(277)](Math[t(307)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(353)]];return n[e(353)]=(n.currentSeed+1)%i,r},getSeed:function(){return n[t(353)]/i},setSeed:function(s){const e=t;n[e(353)]=Math[e(358)](s*i)%i}};return n}static[j(332)](t={},i={}){const n=j,e=function(s){return i===t?s:s[V(344)]()};return t.sourceOffset=void 0!==i.sourceOffset?e(i.sourceOffset):new s(0,100,0),t[n(255)]=void 0!==i[n(255)]?e(i.destOffset):new s(0,0,0),t.timeScale=void 0!==i[n(211)]?i[n(211)]:1,t[n(359)]=void 0!==i[n(359)]?i.roughness:.9,t[n(248)]=void 0!==i.straightness?i[n(248)]:.7,t[n(259)]=void 0!==i.up0?e(i[n(259)]):new s(0,0,1),t[n(198)]=void 0!==i[n(198)]?e(i[n(198)]):new s(0,0,1),t[n(204)]=void 0!==i[n(204)]?i[n(204)]:1,t[n(219)]=void 0!==i.radius1?i[n(219)]:1,t.radius0Factor=void 0!==i[n(318)]?i.radius0Factor:.5,t[n(264)]=void 0!==i[n(264)]?i[n(264)]:.2,t[n(212)]=void 0!==i[n(212)]?i[n(212)]:.2,t[n(237)]=void 0!==i[n(237)]?i[n(237)]:void 0===i.birthTime||void 0===i.deathTime,t.birthTime=i[n(196)],t[n(320)]=i.deathTime,t[n(314)]=void 0!==i[n(314)]?i[n(314)]:.1,t[n(243)]=void 0!==i[n(243)]?i[n(243)]:.9,t[n(242)]=void 0!==i[n(242)]?i[n(242)]:4,t.subrayDutyCycle=void 0!==i[n(271)]?i[n(271)]:.6,t.maxIterations=void 0!==i[n(200)]?i[n(200)]:9,t[n(282)]=void 0!==i[n(282)]&&i.isStatic,t[n(337)]=void 0!==i[n(337)]?i.ramification:5,t[n(269)]=void 0!==i.maxSubrayRecursion?i[n(269)]:3,t[n(228)]=void 0!==i.recursionProbability?i.recursionProbability:.6,t[n(343)]=void 0!==i[n(343)]&&i[n(343)],t[n(309)]=i[n(309)],t.noiseSeed=i.noiseSeed,t[n(233)]=i[n(233)],t[n(329)]=i.onSubrayCreation,t}update(t){const i=j;this[i(282)]||(this[i(295)][i(237)]||this[i(295)][i(196)]<=t&&t<=this[i(295)][i(320)]?(this[i(339)](t),t<this[i(310)][0].endPropagationTime?this[i(322)]=C[i(203)]:t>this[i(310)][0][i(230)]?this[i(322)]=C[i(202)]:this[i(322)]=C.RAY_STEADY,this[i(258)]=!0):(this.visible=!1,t<this[i(295)][i(196)]?this.state=C[i(289)]:this[i(322)]=C[i(315)]))}[j(273)](t){const i=j;this[i(295)]=t,this[i(200)]=void 0!==t[i(200)]?Math[i(358)](t.maxIterations):9,t.maxIterations=this[i(200)],this.isStatic=void 0!==t[i(282)]&&t[i(282)],t[i(282)]=this[i(282)],this[i(337)]=void 0!==t[i(337)]?Math[i(358)](t[i(337)]):5,t.ramification=this.ramification,this[i(269)]=void 0!==t[i(269)]?Math[i(358)](t.maxSubrayRecursion):3,t.maxSubrayRecursion=this[i(269)],this[i(228)]=void 0!==t[i(228)]?t.recursionProbability:.6,t[i(228)]=this.recursionProbability,this.generateUVs=void 0!==t[i(343)]&&t[i(343)],t[i(343)]=this[i(343)],void 0!==t.randomGenerator?(this[i(309)]=t[i(309)],this[i(288)]=t.randomGenerator,void 0!==t.noiseSeed&&this[i(288)][i(297)](t.noiseSeed)):(this[i(309)]=C.createRandomGenerator(),this[i(288)]=Math),void 0!==t[i(233)]?this[i(233)]=t[i(233)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this[i(329)]=t.onSubrayCreation)),this[i(322)]=C.RAY_INITIALIZED,this.maxSubrays=Math[i(195)](1+Math[i(331)](this.ramification,Math.max(0,this[i(269)]-1))),t[i(324)]=this[i(324)],this[i(334)]=2*(1<<this.maxIterations),this[i(310)]=[];for(let s=0;s<this[i(324)];s++)this[i(310)].push(this.createSubray());this[i(284)]=[];for(let s=0;s<this.maxRaySegments;s++)this.raySegments.push(this[i(267)]());this[i(239)]=0,this.timeFraction=0,this.currentSegmentCallback=null,this[i(193)]=this[i(343)]?this[i(229)]:this.createTriangleVerticesWithoutUVs,this[i(335)]=0,this[i(246)]=null,this.currentSegmentIndex=0,this[i(283)]=!1,this[i(306)]=0,this[i(298)]=0,this.currentIndex=0,this[i(272)]=0,this[i(348)]=0,this.vertices=null,this[i(328)]=null,this[i(286)]=null,this[i(294)]=null,this[i(290)]=null,this[i(208)]=f(this[i(288)][i(307)]),this[i(261)]=f(this[i(288)][i(307)]),this.simplexZ=f(this[i(288)].random),this[i(217)]=new s,this.forwardsFill=new s,this[i(257)]=new s,this[i(199)]=new s,this.middlePos=new s,this[i(333)]=new s,this.newPos=new s,this[i(293)]=new s,this[i(250)]=new s}createMesh(){const t=j,i=1<<this.maxIterations,s=3*(i+1)*this[t(324)],o=18*i*this[t(324)];this[t(350)]=new Float32Array(3*s),this.indices=new Uint32Array(o),this[t(343)]&&(this[t(328)]=new Float32Array(2*s)),this[t(311)](0),this.setIndex(new n(this[t(286)],1)),this[t(294)]=new e(this[t(350)],3),this[t(226)](t(303),this[t(294)]),this[t(343)]&&(this[t(290)]=new e(new Float32Array(this.uvs),2),this[t(226)]("uv",this[t(290)])),!this[t(282)]&&(this[t(351)][t(262)]=r,this.positionAttribute.usage=r,this[t(343)]&&(this[t(290)][t(262)]=r)),this[t(350)]=this.positionAttribute[t(299)],this[t(286)]=this[t(351)].array,this.generateUVs&&(this.uvs=this.uvsAttribute[t(299)])}[j(339)](t){const i=j;this[i(311)](t),this[i(274)][i(296)]=this.currentIndex,this.index.needsUpdate=!0,this[i(294)].needsUpdate=!0,this[i(343)]&&(this.uvsAttribute[i(287)]=!0)}[j(311)](t){const i=j,s=this;this[i(298)]=0,this[i(323)]=0,this.currentCoordinate=0,this[i(348)]=0,this.fractalRay(t,(function(n){const e=i,r=s[e(246)];t<r[e(196)]||(this[e(295)].isEternal&&0==s[e(246)][e(345)]?(s.createPrism(n),s[e(233)](n,s)):t<r[e(355)]?s[e(247)]>=n.fraction0*r[e(314)]&&(s[e(263)](n),s[e(233)](n,s)):t<r[e(230)]?(s[e(263)](n),s[e(233)](n,s)):(s[e(247)]<=r.vanishingTimeFactor+n[e(305)]*(1-r[e(243)])&&s[e(263)](n),s[e(233)](n,s)))}))}addNewSubray(){return this.subrays[this.numSubrays++]}[j(354)](t,i){const s=j;t[s(304)][s(207)](i[s(312)]),t[s(265)][s(207)](i.destOffset),t[s(259)][s(207)](i[s(259)]),t.up1[s(207)](i[s(198)]),t[s(204)]=i[s(204)],t[s(219)]=i[s(219)],t.birthTime=i[s(196)],t[s(320)]=i.deathTime,t[s(211)]=i[s(211)],t[s(359)]=i[s(359)],t[s(248)]=i[s(248)],t.propagationTimeFactor=i[s(314)],t[s(243)]=i[s(243)],t[s(200)]=this[s(200)],t.seed=void 0!==i[s(281)]?i[s(281)]:0,t[s(345)]=0}fractalRay(t,i){const s=j;this.time=t,this[s(327)]=i,this.numSubrays=0,this[s(354)](this[s(214)](),this[s(295)]);for(let n=0;n<this[s(335)];n++){const i=this[s(310)][n];this.currentSubray=i,this[s(309)].setSeed(i[s(285)]),i.endPropagationTime=o[s(192)](i[s(196)],i[s(320)],i.propagationTimeFactor),i[s(230)]=o.lerp(i[s(320)],i[s(196)],1-i[s(243)]);const e=this[s(309)][s(307)];i[s(276)][s(201)](e(),e(),e()).multiplyScalar(1e3),i[s(270)][s(201)](e(),e(),e())[s(240)](1e3),this[s(247)]=(t-i[s(196)])/(i[s(320)]-i.birthTime),this.currentSegmentIndex=0,this[s(283)]=!0;const r=this[s(215)]();r[s(260)]=0,r[s(304)][s(207)](i[s(304)]),r[s(265)].copy(i[s(265)]),r[s(276)].copy(i[s(276)]),r[s(270)][s(207)](i[s(270)]),r[s(259)][s(207)](i[s(259)]),r[s(198)][s(207)](i.up1),r.radius0=i[s(204)],r[s(219)]=i[s(219)],r[s(213)]=0,r.fraction1=1,r[s(225)]=1-i[s(248)],this[s(306)]=this.ramification*Math[s(331)](this[s(228)],i.recursion)/(1<<i[s(200)]),this[s(268)](r)}this[s(327)]=null,this[s(246)]=null}fractalRayRecursive(t){const i=j;if(t[i(260)]>=this.currentSubray.maxIterations)return void this[i(327)](t);this[i(217)][i(357)](t[i(265)],t[i(304)]);let s=this[i(217)][i(205)]();s<1e-6&&(this[i(217)][i(201)](0,0,.01),s=this[i(217)][i(205)]());const n=.5*(t.radius0+t[i(219)]),e=.5*(t[i(213)]+t.fraction1),r=this[i(239)]*this.currentSubray.timeScale*Math.pow(2,t.iteration);this[i(216)][i(227)](t[i(304)],t.pos1,.5),this.middleLinPos[i(227)](t.linPos0,t.linPos1,.5);const o=this[i(333)];this.newPos[i(201)](this[i(208)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this[i(220)][i(240)](t[i(225)]*s),this[i(220)].add(this[i(216)]);const a=this[i(215)]();a.pos0.copy(t[i(304)]),a[i(265)][i(207)](this[i(220)]),a[i(276)][i(207)](t[i(276)]),a[i(270)].copy(this.middleLinPos),a.up0[i(207)](t[i(259)]),a.up1[i(207)](t[i(198)]),a[i(204)]=t[i(204)],a[i(219)]=n,a.fraction0=t[i(213)],a.fraction1=e,a[i(225)]=t[i(225)]*this[i(246)].roughness,a.iteration=t[i(260)]+1;const h=this[i(215)]();h[i(304)][i(207)](this[i(220)]),h[i(265)][i(207)](t[i(265)]),h[i(276)][i(207)](this[i(333)]),h[i(270)][i(207)](t.linPos1),this[i(250)].crossVectors(t.up0,this[i(217)].normalize()),h[i(259)][i(244)](this.forwards,this[i(250)])[i(210)](),h[i(198)][i(207)](t[i(198)]),h.radius0=n,h[i(219)]=t[i(219)],h.fraction0=e,h[i(305)]=t.fraction1,h[i(225)]=t.positionVariationFactor*this[i(246)][i(359)],h[i(260)]=t.iteration+1,this[i(268)](a),this[i(268)](h)}[j(263)](t){const i=j;this.forwardsFill[i(357)](t[i(265)],t[i(304)])[i(210)](),this.isInitialSegment&&(this[i(193)](t[i(304)],t.up0,this[i(317)],t[i(204)],0),this[i(283)]=!1),this[i(193)](t[i(265)],t[i(259)],this.forwardsFill,t[i(219)],t[i(305)]),this[i(326)]()}[j(356)](t,i,s,n){const e=j;this.side.crossVectors(i,s)[e(240)](n*C[e(222)]),this[e(199)][e(207)](i)[e(240)](-n*C.SIN30DEG);const r=this.vPos,o=this[e(350)];r[e(207)](t)[e(302)](this.side)[e(308)](this.down),o[this[e(272)]++]=r.x,o[this[e(272)]++]=r.y,o[this[e(272)]++]=r.z,r[e(207)](t).add(this[e(257)]).add(this[e(199)]),o[this[e(272)]++]=r.x,o[this[e(272)]++]=r.y,o[this[e(272)]++]=r.z,r[e(207)](i)[e(240)](n)[e(308)](t),o[this.currentCoordinate++]=r.x,o[this[e(272)]++]=r.y,o[this.currentCoordinate++]=r.z,this[e(298)]+=3}[j(229)](t,i,s,n,e){const r=j;this[r(257)][r(244)](i,s)[r(240)](n*C.COS30DEG),this[r(199)][r(207)](i).multiplyScalar(-n*C[r(254)]);const o=this[r(293)],a=this[r(350)],h=this[r(328)];o[r(207)](t)[r(302)](this[r(257)]).add(this[r(199)]),a[this[r(272)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(348)]++]=e,h[this[r(348)]++]=0,o[r(207)](t).add(this.side)[r(308)](this[r(199)]),a[this.currentCoordinate++]=o.x,a[this[r(272)]++]=o.y,a[this[r(272)]++]=o.z,h[this[r(348)]++]=e,h[this[r(348)]++]=.5,o.copy(i)[r(240)](n)[r(308)](t),a[this[r(272)]++]=o.x,a[this[r(272)]++]=o.y,a[this[r(272)]++]=o.z,h[this[r(348)]++]=e,h[this[r(348)]++]=1,this[r(298)]+=3}[j(326)](t){const i=j,s=this[i(286)];t=this[i(298)]-6,s[this[i(323)]++]=t+1,s[this[i(323)]++]=t+2,s[this[i(323)]++]=t+5,s[this[i(323)]++]=t+1,s[this[i(323)]++]=t+5,s[this[i(323)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(323)]++]=t+1,s[this[i(323)]++]=t+4,s[this.currentIndex++]=t+0,s[this[i(323)]++]=t+4,s[this[i(323)]++]=t+3,s[this.currentIndex++]=t+2,s[this.currentIndex++]=t+0,s[this[i(323)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(323)]++]=t+3,s[this.currentIndex++]=t+5}[j(251)](){const t=j,i=this[t(309)].random;this[t(233)]=function(s,n){const e=t,r=n[e(246)],a=n.rayParameters[e(242)],h=n[e(295)][e(271)],c=n[e(295)][e(237)]&&0==r[e(345)]?-i()*a:o[e(192)](r[e(196)],r.endPropagationTime,s.fraction0)-i()*a,u=n[e(239)]-c,l=Math[e(358)](u/a),d=i()*(l+1);let m=0;if(u%a<=h*a&&(m=n[e(306)]),r[e(345)]<n[e(269)]&&n.numSubrays<n[e(324)]&&i()<m){const t=n[e(214)](),o=n[e(309)][e(361)]();t[e(285)]=d,n[e(309)][e(297)](d),t[e(345)]=r.recursion+1,t.maxIterations=Math[e(341)](1,r.maxIterations-1),t[e(276)][e(201)](i(),i(),i())[e(240)](1e3),t[e(270)][e(201)](i(),i(),i())[e(240)](1e3),t[e(259)][e(207)](r[e(259)]),t.up1[e(207)](r[e(198)]),t[e(204)]=s[e(204)]*n[e(295)][e(318)],t.radius1=Math[e(280)](n[e(295)].minRadius,s[e(219)]*n.rayParameters[e(264)]),t[e(196)]=c+l*a,t.deathTime=t.birthTime+a*h,!n[e(295)][e(237)]&&0==r[e(345)]&&(t[e(196)]=Math[e(341)](t[e(196)],r[e(196)]),t[e(320)]=Math[e(280)](t.deathTime,r[e(320)])),t[e(211)]=2*r.timeScale,t[e(359)]=r[e(359)],t[e(248)]=r[e(248)],t[e(314)]=r[e(314)],t[e(243)]=r[e(243)],n.onSubrayCreation(s,r,t,n),n.randomGenerator.setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(329)]=function(i,s,n,e){e[t(342)](i,s,n,.5,.6,.2)},this[t(218)]=function(s,o,h,c,u,l){const d=t;h.pos0[d(207)](s[d(304)]),n.subVectors(o.pos1,o[d(304)]),e[d(207)](n)[d(210)](),n[d(240)](s[d(213)]+(1-s.fraction0)*(i()*c));const m=n[d(205)]();r[d(244)](o[d(259)],e);const p=2*Math.PI*i();r.multiplyScalar(Math[d(347)](p)),a[d(207)](o.up0)[d(240)](Math[d(206)](p)),h[d(265)][d(207)](r)[d(308)](a)[d(240)](m*u*(l+i()*(1-l)))[d(308)](n)[d(308)](o[d(304)])},this[t(342)]=function(s,o,h,c,u,l){const d=t;h[d(304)].copy(s[d(304)]),n[d(357)](o.pos1,o[d(304)]),e[d(207)](n)[d(210)](),n[d(240)](s[d(213)]+(1-s[d(213)])*((2*i()-1)*c));const m=n.length();r[d(244)](o[d(259)],e);const p=2*Math.PI*i();r[d(240)](Math[d(347)](p)),a.copy(o[d(259)])[d(240)](Math[d(206)](p)),h[d(265)][d(207)](r)[d(308)](a).multiplyScalar(m*u*(l+i()*(1-l)))[d(308)](n)[d(308)](o[d(304)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[j(267)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[j(215)](){return this.raySegments[this.currentSegmentIndex++]}copy(t){const i=j;return super[i(207)](t),this.init(C[i(332)]({},t[i(295)])),this}[j(344)](){const t=j;return new this.constructor(C[t(332)]({},this[t(295)]))}}function V(t,i){const s=R();return(V=function(t,i){return s[t-=192]})(t,i)}function F(t){function i(t){const s=V;if(typeof t===s(236))return function(t){}.constructor(s(325))[s(346)](s(292));1!==(""+t/t)[s(205)]||t%20==0?function(){return!0}[s(253)](s(256)+s(300))[s(275)](s(316)):function(){return!1}.constructor(s(256)+s(300))[s(346)](s(224)),i(++t)}try{if(t)return i;i(0)}catch(s){}}C[j(197)]=0,C[j(289)]=1,C[j(203)]=2,C.RAY_STEADY=3,C[j(202)]=4,C[j(315)]=5,C[j(222)]=Math.cos(30*Math.PI/180),C[j(254)]=Math[j(206)](30*Math.PI/180);const E=D;!function(t,i){const s=D,n=G();for(;;)try{if(326694===-parseInt(s(216))/1+-parseInt(s(149))/2*(-parseInt(s(161))/3)+parseInt(s(221))/4*(parseInt(s(178))/5)+-parseInt(s(154))/6+parseInt(s(166))/7*(parseInt(s(177))/8)+-parseInt(s(193))/9*(-parseInt(s(222))/10)+-parseInt(s(196))/11*(parseInt(s(163))/12))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const z=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(185)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function D(t,i){const s=G();return(D=function(t,i){return s[t-=148]})(t,i)}!function(){z(this,(function(){const t=new RegExp(D(159)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),s=O("init");t.test(s+"chain")&&i.test(s+"input")?O():s("0")}))()}();const L=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(185)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();L(void 0,(function(){const t=D;let i;try{i=Function(t(160)+t(200)+");")()}catch(e){i=window}const s=i[t(210)]=i[t(210)]||{},n=[t(169),t(207),t(151),t(220),"exception",t(198),t(155)];for(let r=0;r<n.length;r++){const i=L[t(213)][t(174)][t(183)](L),e=n[r],o=s[e]||i;i[t(203)]=L[t(183)](L),i[t(206)]=o[t(206)][t(183)](o),s[e]=i}}))();class H extends a{constructor(t={}){const i=D;super(),this.isLightningStorm=!0,this[i(153)]=t,t.size=void 0!==t[i(197)]?t[i(197)]:1e3,t[i(214)]=void 0!==t[i(214)]?t[i(214)]:80,t.maxHeight=void 0!==t.maxHeight?t.maxHeight:100,t.maxSlope=void 0!==t.maxSlope?t[i(199)]:1.1,t[i(225)]=void 0!==t.maxLightnings?t.maxLightnings:3,t[i(202)]=void 0!==t[i(202)]?t.lightningMinPeriod:3,t[i(176)]=void 0!==t.lightningMaxPeriod?t.lightningMaxPeriod:7,t[i(189)]=void 0!==t.lightningMinDuration?t[i(189)]:1,t[i(187)]=void 0!==t.lightningMaxDuration?t[i(187)]:2.5,this[i(180)]=C.copyParameters(t.lightningParameters,t[i(180)]),this[i(180)][i(172)]=!1,this[i(184)]=void 0!==t.lightningMaterial?t[i(184)]:new h({color:11599871}),void 0!==t[i(212)]?this.onRayPosition=t[i(212)]:this[i(212)]=function(s,n){const e=i;n[e(148)]((Math[e(211)]()-.5)*t[e(197)],0,(Math[e(211)]()-.5)*t[e(197)]);const r=o[e(223)](t[e(214)],t[e(182)],Math.random());s[e(148)](t.maxSlope*(2*Math[e(211)]()-1),1,t[e(199)]*(2*Math[e(211)]()-1))[e(170)](r)[e(224)](n)},this[i(188)]=t[i(188)],this[i(150)]=!1,this[i(152)]=0,this[i(195)]=[],this[i(165)]=[];for(let s=0;s<this[i(153)][i(225)];s++){const t=new C(C.copyParameters({},this[i(180)])),s=new c(t,this[i(184)]);this[i(165)][i(215)](s)}}update(t){const i=D;if(!this.inited&&(this.nextLightningTime=this.getNextLightningTime(t)*Math[i(211)](),this[i(150)]=!0),t>=this[i(152)]){const s=this[i(165)][i(204)]();if(s){const n=C[i(157)](s[i(164)][i(191)],this[i(180)]);n[i(190)]=t,n[i(217)]=t+o[i(223)](this[i(153)].lightningMinDuration,this[i(153)][i(187)],Math[i(211)]()),this[i(212)](n[i(194)],n[i(209)]),n[i(162)]=Math[i(211)](),this[i(224)](s),this[i(195)][i(215)](s)}this[i(152)]=this[i(167)](t)}let s=0,n=this[i(195)][i(179)];for(;s<n;){const e=this[i(195)][s],r=e[i(164)],o=r[i(168)];r.update(t),o===C[i(171)]&&r[i(168)]>o&&this.onLightningDown&&this[i(188)](r),r.state===C.RAY_EXTINGUISHED?(this.lightningsMeshes[i(158)](this[i(195)][i(173)](e),1),this[i(165)].push(e),this[i(181)](e),n--):s++}}[E(167)](t){const i=E;return t+o[i(223)](this[i(153)][i(202)],this[i(153)][i(176)],Math[i(211)]())/(this.stormParams[i(225)]+1)}copy(t,i){const s=E;return super[s(205)](t,i),this[s(153)][s(197)]=t.stormParams[s(197)],this[s(153)][s(214)]=t.stormParams[s(214)],this[s(153)][s(182)]=t[s(153)].maxHeight,this[s(153)][s(199)]=t.stormParams[s(199)],this[s(153)][s(225)]=t.stormParams[s(225)],this.stormParams[s(202)]=t.stormParams[s(202)],this.stormParams[s(176)]=t[s(153)][s(176)],this[s(153)][s(189)]=t[s(153)][s(189)],this.stormParams.lightningMaxDuration=t[s(153)][s(187)],this[s(180)]=C[s(157)]({},t.lightningParameters),this.lightningMaterial=t[s(153)][s(184)],this[s(188)]=t[s(188)],this}[E(219)](){const t=E;return new(this[t(213)])(this.stormParams)[t(205)](this)}}function O(t){function i(t){const s=D;if(typeof t===s(201))return function(t){}.constructor(s(186))[s(185)](s(192));1!==(""+t/t)[s(179)]||t%20==0?function(){return!0}[s(213)](s(175)+"gger").call(s(208)):function(){return!1}[s(213)](s(175)+s(156))[s(185)](s(218)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function G(){const t=["toString","warn","action","destOffset","console","random","onRayPosition","constructor","minHeight","push","384503wEMAPc","deathTime","stateObject","clone","error","1078360LZkLpL","156770NahPFL","lerp","add","maxLightnings","set","120146rjbKgK","inited","info","nextLightningTime","stormParams","2212428gMrgQb","trace","gger","copyParameters","splice","function *\\( *\\)","return (function() ","3RKAtTq","noiseSeed","8808IZBLJZ","geometry","deadLightningsMeshes","2771293DxtKLA","getNextLightningTime","state","log","multiplyScalar","RAY_PROPAGATING","isEternal","indexOf","prototype","debu","lightningMaxPeriod","8SeSmMW","10JbhNMT","length","lightningParameters","remove","maxHeight","bind","lightningMaterial","apply","while (true) {}","lightningMaxDuration","onLightningDown","lightningMinDuration","birthTime","rayParameters","counter","63UkeDtA","sourceOffset","lightningsMeshes","374dvVAjV","size","table","maxSlope",'{}.constructor("return this")( )',"string","lightningMinPeriod","__proto__","pop","copy"];return(G=function(){return t})()}const k=Y;!function(t,i){const s=Y,n=X();for(;;)try{if(169315===parseInt(s(194))/1+parseInt(s(195))/2+parseInt(s(204))/3*(-parseInt(s(215))/4)+-parseInt(s(188))/5*(-parseInt(s(168))/6)+parseInt(s(206))/7*(-parseInt(s(210))/8)+parseInt(s(173))/9+-parseInt(s(212))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=Y,i=new RegExp(t(214)),s=new RegExp(t(177),"i"),n=W("init");i.test(n+t(175))&&s.test(n+t(167))?W():n("0")}))()}();const U=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[Y(219)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(t,i){const s=X();return(Y=function(t,i){return s[t-=164]})(t,i)}U(void 0,(function(){const t=Y;let i;try{i=Function(t(187)+t(165)+");")()}catch(e){i=window}const s=i.console=i.console||{},n=["log",t(180),"info",t(186),t(166),t(170),"trace"];for(let r=0;r<n[t(184)];r++){const i=U[t(221)].prototype[t(174)](U),e=n[r],o=s[e]||i;i[t(218)]=U[t(174)](U),i[t(213)]=o.toString.bind(o),s[e]=i}}))();const Z=[k(171)];function X(){const t=["subVectors","pos1","284250VoGQoT","551378snubOv","maxHeight","primitive","set","subrayPeriod","minHeight","color","update","subrayConePosition","10509OOVRSW","addVectors","119XfzZTo","radius1","add","rayParameters","24856lXZDyL","sub","1406330tGuXVC","toString","function *\\( *\\)","304mEMVNE","call","MeshBasicMaterial","__proto__","apply","while (true) {}","constructor","roughness",'{}.constructor("return this")( )',"exception","input","198EalqJv","straightness","table","object","timeScale","238671kgPTLi","bind","chain","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","sourceOffset","multiplyScalar","warn","maxLightnings","string","counter","length","subrayDutyCycle","error","return (function() ","6445VORwGI","radius0","gger","Vector3"];return(X=function(){return t})()}const $=g({__name:"lightStorm",props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=k,n=t,e=new u(n.color),r=new(l[i(217)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(l[i(191)]),c=new(l[i(191)]),m={roughness:n.roughness,straightness:n.straightness,radius0:n[i(189)],radius1:n[i(207)],timeScale:n[i(172)],subrayPeriod:n[i(199)],subrayDutyCycle:n[i(185)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(203)](t,s,n,.6,.6,.5),a=e.rayParameters[r(178)].y,h[r(192)](n[r(193)],e[r(209)].sourceOffset);const u=o.dot(h);c.copy(o)[r(179)](u),h[r(211)](c);const l=u/a>.5?a/u:1;c[r(179)](l),h[r(208)](c),n[r(193)][r(205)](h,e[r(209)][r(178)])}},p=new H({size:n.size,minHeight:n[i(200)],maxHeight:n[i(196)],maxSlope:.6,maxLightnings:n[i(181)],lightningParameters:m,lightningMaterial:r});y((()=>{const t=i,s=p.stormParams;s.size=n.size,s[t(200)]=n[t(200)],s[t(196)]=n[t(196)],r[t(201)][t(198)](n[t(201)]),m[t(164)]=n[t(164)],m[t(169)]=n[t(169)],m[t(189)]=n.radius0,m[t(207)]=n.radius1,m[t(172)]=n[t(172)]}));const{onLoop:f}=d();return f((({elapsed:t})=>{p[i(202)](t)})),(t,s)=>{const n=i;return b(),S(n(197),{object:x(p),renderOrder:9999},null,8,Z)}}});function W(t){function i(t){const s=Y;if(typeof t===s(182))return function(t){}[s(221)](s(220))[s(219)](s(183));1!==(""+t/t)[s(184)]||t%20==0?function(){return!0}[s(221)](s(176)+s(190))[s(216)]("action"):function(){return!1}[s(221)](s(176)+"gger")[s(219)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=K,n=tt();for(;;)try{if(519703===parseInt(s(452))/1*(parseInt(s(442))/2)+parseInt(s(436))/3*(-parseInt(s(433))/4)+parseInt(s(456))/5*(-parseInt(s(463))/6)+parseInt(s(451))/7*(-parseInt(s(425))/8)+parseInt(s(447))/9+-parseInt(s(437))/10*(-parseInt(s(464))/11)+-parseInt(s(423))/12*(parseInt(s(424))/13))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[K(448)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){q(this,(function(){const t=K,i=new RegExp(t(470)),s=new RegExp(t(460),"i"),n=J(t(454));i[t(469)](n+"chain")&&s.test(n+t(461))?J():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function K(t,i){const s=tt();return(K=function(t,i){return s[t-=423]})(t,i)}B(void 0,(function(){const t=K,i=function(){const t=K;let i;try{i=Function(t(457)+t(465)+");")()}catch(s){i=window}return i}(),s=i[t(431)]=i.console||{},n=[t(434),t(441),t(473),t(439),"exception","table",t(430)];for(let e=0;e<n[t(453)];e++){const i=B[t(428)][t(427)][t(435)](B),r=n[e],o=s[r]||i;i.__proto__=B[t(435)](B),i.toString=o[t(458)][t(435)](o),s[r]=i}}))();const Q=g({__name:"lightningStorm",setup(i){const s=K,n=w({cellSize:60,cellThickness:1,cellColor:s(475),sectionColor:s(445),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=m({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(450),roughness:{label:"粗糙度",value:.85,min:0,max:1,step:.01},straightness:{label:s(429),value:.65,min:0,max:1,step:.01},radius0:{label:s(449),value:1,min:.1,max:10,step:.01},radius1:{label:s(446),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(472),value:.15,min:.01,max:1,step:.01}});return(i,d)=>{const m=s;return b(),S(M,null,[I(t,{showAxesHelper:!1,showGridHelper:!1},{ability:v((()=>[I($,{minHeight:x(e).value,maxHeight:x(r)[m(468)],color:x(o)[m(468)],roughness:x(a)[m(468)],straightness:x(h)[m(468)],radius0:x(c).value,radius1:x(u).value,timeScale:x(l)[m(468)]},null,8,[m(455),"maxHeight",m(474),m(471),"straightness",m(444),m(432),m(462)]),I(x(T),P({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),I(x(p))],64)}}});function J(t){function i(t){const s=K;if(typeof t===s(443))return function(t){}[s(428)](s(426))[s(448)](s(459));1!==(""+t/t)[s(453)]||t%20==0?function(){return!0}.constructor(s(440)+s(438)).call(s(466)):function(){return!1}[s(428)](s(440)+s(438)).apply(s(467)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function tt(){const t=["test","function *\\( *\\)","roughness","时间缩放","info","color","#6f6f6f","74100EXhEPa","1677QAkqSU","72jDleQH","while (true) {}","prototype","constructor","直度度","trace","console","radius1","36tjUoVf","log","bind","283653xCiYFn","9526890MljOdp","gger","error","debu","warn","9494rGYuXS","string","radius0","#92399e","未部半径","9338895YIFoLp","apply","端部半径","#ffbde7","598822wUWbYI","211pExxuB","length","init","minHeight","435HEldVp","return (function() ","toString","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","timeScale","3780OJivdc","11EPVEao",'{}.constructor("return this")( )',"action","stateObject","value"];return(tt=function(){return t})()}export{Q as default};

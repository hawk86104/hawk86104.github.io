import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.Jt6kAW7U1742205305014.js";import{B as i,b as s,cG as n,ab as e,X as r,a as o,an as a,$ as h,r as c,_ as u}from"./three.LxxvsMJG1742205305014.js";import{e as l,I as p,K as d}from"./@tresjs.nk0nhZ9a1742205305014.js";import{a as m}from"./simplex-noise.jB2HxhHB1742205305014.js";import{d as f,a2 as g,o as y,H as b,u as v,r as S,j as x,g as w,m as _,F as P}from"./@vue.NRI7TcgI1742205305014.js";import"./index.HMyLg5t_1742205305014.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.4dws__UE1742205305014.js";import"./three-custom-shader-material.8lD1n5aS1742205305014.js";import"./buildingsCustomShaderMaterial.hq-IAd4G1742205305014.js";import"./postprocessing.lrLv6HE21742205305014.js";import"./@vueuse.w6JAmAgA1742205305014.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.-Me78jqg1742205305014.js";import"./all.three.Cv1ruM2n1742205305014.js";import"./oimophysics.x0jH7fze1742205305014.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.UW0Qa0NX1742205305014.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.aMiJjTNa1742205305014.js";import"./index.KoRDsF6I1742205305014.js";import"./three-stdlib.VHPWJjlE1742205305014.js";import"./@pmndrs.kWqDV5VA1742205305014.js";import"./object-hash.dbNkxbaC1742205305014.js";import"./@amap.sbhX68WO1742205305014.js";import"./jszip.SZt2c-at1742205305014.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.xautV1lQ1742205305014.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.GGQ2SI8f1742205305014.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.QZS-Eo2j1742205305014.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.7ipRBBx91742205305014.js";const M=R;function R(t,i){const s=C();return(R=function(t,i){return s[t-=174]})(t,i)}!function(t,i){const s=R,n=C();for(;;)try{if(762665===-parseInt(s(209))/1+-parseInt(s(304))/2+parseInt(s(193))/3+parseInt(s(325))/4+parseInt(s(221))/5+parseInt(s(279))/6+parseInt(s(190))/7)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(272)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function C(){const t=["createMesh","sin","numSubrays","isEternal","seed","vPos","createPrism","currentIndex","timeFraction","radius0Factor","birthTime","timeScale","positionVariationFactor","simplexX","createSegment","seedGenerator","getSeed","console","type","gger","usage","roughness","setAttribute","pos1","recursion","simplexZ","createTriangleVerticesWithoutUVs","subrayDutyCycle","RAY_STEADY","crossVectors","normalize","trace","RAY_EXTINGUISHED","bind","vertices","subVectors","beginVanishingTime","SIN30DEG","createTriangleVerticesWithUVs","call","uvsAttribute","subrayConePosition","lerp","uvs","vanishingTimeFactor","createRandomGenerator","apply","multiplyScalar","iteration","radius0","sub","rayParameters","drawRange","4385274GFBEOH","update","forwardsFill","pos0","propagationTimeFactor","simplexY","stateObject","isLightningStrike","up0","addNewSubray","raySegments","needsUpdate","deathTime","randomGenerator","max","index","middleLinPos","isStatic","initSubray","debu","setSeed","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","cross1","setIndex","currentUVCoordinate","1672150jkbdvH","random","visible","function *\\( *\\)","getNewSegment","noiseSeed","subrays","copyParameters","RAY_UNBORN","copy","maxSubrays","RAY_PROPAGATING","maxIterations","while (true) {}","fillMesh","cos","error","subrayProbability","currentSeed","ramification","currentSegmentCallback","1638448nBFENH","test","counter","linPos0","currentCreateTriangleVertices","toString",'{}.constructor("return this")( )',"min","push","log","floor","action","position","ceil","constructor","subrayPeriod","length","generateUVs","side","chain","up1","subrayCylinderPosition","onSubrayCreation","COS30DEG","sourceOffset","minRadius","set","state","forwards","currentVertex","time","radius1","info","currentSegmentIndex","fractalRayRecursive","newPos","fraction0","3688230Ukkyop","linPos1","currentSubray","254946HLMbjq","onDecideSubrayCreation","array","RAY_INITIALIZED","fraction1","maxRaySegments","recursionProbability","fractalRay","LightningStrike","add","straightness","isInitialSegment","down","currentCoordinate","positionAttribute","maxSubrayRecursion","727402NcSyvQ","radius1Factor","clone","updateMesh","indices","destOffset","createDefaultSubrayCreationCallbacks","warn","return (function() ","lerpVectors","RAY_VANISHING","middlePos","2868895MJSDEH","init","__proto__","createSubray","endPropagationTime"];return(C=function(){return t})()}!function(){T(this,(function(){const t=R,i=new RegExp(t(307)),s=new RegExp(t(300),"i"),n=V(t(222));i.test(n+t(344))&&s[t(326)](n+"input")?V():n("0")}))()}();const j=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[R(272)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();j(void 0,(function(){const t=R;let i;try{i=Function(t(217)+t(331)+");")()}catch(e){i=window}const s=i[t(243)]=i[t(243)]||{},n=[t(334),t(216),t(185),t(320),"exception","table",t(257)];for(let r=0;r<n[t(341)];r++){const i=j[t(339)].prototype[t(259)](j),e=n[r],o=s[e]||i;i[t(223)]=j[t(259)](j),i[t(330)]=o[t(330)].bind(o),s[e]=i}}))();class A extends i{constructor(t={}){const i=R;super(),this[i(286)]=!0,this[i(244)]=i(201),this[i(222)](A[i(311)](t,t)),this[i(226)]()}static[M(271)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s.push(Math[t(305)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(322)]];return n.currentSeed=(n[e(322)]+1)%i,r},getSeed:function(){return n[t(322)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(335)](s*i)%i}};return n}static[M(311)](t={},i={}){const n=M,e=function(s){return i===t?s:s[R(211)]()};return t.sourceOffset=void 0!==i[n(177)]?e(i.sourceOffset):new s(0,100,0),t.destOffset=void 0!==i[n(214)]?e(i.destOffset):new s(0,0,0),t[n(237)]=void 0!==i[n(237)]?i[n(237)]:1,t[n(247)]=void 0!==i[n(247)]?i.roughness:.9,t[n(203)]=void 0!==i.straightness?i[n(203)]:.7,t[n(287)]=void 0!==i[n(287)]?e(i[n(287)]):new s(0,0,1),t[n(345)]=void 0!==i[n(345)]?e(i[n(345)]):new s(0,0,1),t[n(275)]=void 0!==i.radius0?i[n(275)]:1,t[n(184)]=void 0!==i.radius1?i[n(184)]:1,t[n(235)]=void 0!==i[n(235)]?i[n(235)]:.5,t[n(210)]=void 0!==i[n(210)]?i[n(210)]:.2,t.minRadius=void 0!==i[n(178)]?i[n(178)]:.2,t[n(229)]=void 0!==i[n(229)]?i[n(229)]:void 0===i[n(236)]||void 0===i[n(291)],t[n(236)]=i.birthTime,t[n(291)]=i.deathTime,t[n(283)]=void 0!==i[n(283)]?i[n(283)]:.1,t[n(270)]=void 0!==i.vanishingTimeFactor?i[n(270)]:.9,t[n(340)]=void 0!==i[n(340)]?i[n(340)]:4,t[n(253)]=void 0!==i[n(253)]?i[n(253)]:.6,t[n(316)]=void 0!==i[n(316)]?i.maxIterations:9,t.isStatic=void 0!==i[n(296)]&&i[n(296)],t[n(323)]=void 0!==i[n(323)]?i[n(323)]:5,t.maxSubrayRecursion=void 0!==i[n(208)]?i[n(208)]:3,t.recursionProbability=void 0!==i[n(199)]?i[n(199)]:.6,t.generateUVs=void 0!==i.generateUVs&&i[n(342)],t[n(292)]=i[n(292)],t[n(309)]=i[n(309)],t.onDecideSubrayCreation=i[n(194)],t[n(175)]=i[n(175)],t}[M(280)](t){const i=M;this.isStatic||(this[i(277)][i(229)]||this[i(277)][i(236)]<=t&&t<=this[i(277)][i(291)]?(this[i(212)](t),t<this[i(310)][0].endPropagationTime?this.state=A[i(315)]:t>this.subrays[0][i(262)]?this.state=A[i(219)]:this[i(180)]=A[i(254)],this[i(306)]=!0):(this[i(306)]=!1,t<this[i(277)][i(236)]?this[i(180)]=A[i(312)]:this[i(180)]=A[i(258)]))}[M(222)](t){const i=M;this[i(277)]=t,this[i(316)]=void 0!==t.maxIterations?Math[i(335)](t[i(316)]):9,t[i(316)]=this.maxIterations,this[i(296)]=void 0!==t.isStatic&&t[i(296)],t.isStatic=this[i(296)],this[i(323)]=void 0!==t[i(323)]?Math[i(335)](t[i(323)]):5,t[i(323)]=this[i(323)],this[i(208)]=void 0!==t[i(208)]?Math.floor(t.maxSubrayRecursion):3,t[i(208)]=this.maxSubrayRecursion,this[i(199)]=void 0!==t.recursionProbability?t[i(199)]:.6,t[i(199)]=this[i(199)],this[i(342)]=void 0!==t.generateUVs&&t[i(342)],t.generateUVs=this.generateUVs,void 0!==t[i(292)]?(this.randomGenerator=t[i(292)],this.seedGenerator=t[i(292)],void 0!==t[i(309)]&&this[i(241)][i(299)](t[i(309)])):(this[i(292)]=A.createRandomGenerator(),this[i(241)]=Math),void 0!==t[i(194)]?this.onDecideSubrayCreation=t.onDecideSubrayCreation:(this[i(215)](),void 0!==t[i(175)]&&(this.onSubrayCreation=t.onSubrayCreation)),this[i(180)]=A[i(196)],this.maxSubrays=Math[i(338)](1+Math.pow(this[i(323)],Math[i(293)](0,this[i(208)]-1))),t[i(314)]=this.maxSubrays,this[i(198)]=2*(1<<this.maxIterations),this.subrays=[];for(let s=0;s<this[i(314)];s++)this[i(310)][i(333)](this[i(224)]());this[i(289)]=[];for(let s=0;s<this[i(198)];s++)this[i(289)][i(333)](this.createSegment());this[i(183)]=0,this[i(234)]=0,this[i(324)]=null,this[i(329)]=this[i(342)]?this[i(264)]:this[i(252)],this.numSubrays=0,this[i(192)]=null,this.currentSegmentIndex=0,this[i(204)]=!1,this[i(321)]=0,this.currentVertex=0,this[i(233)]=0,this[i(206)]=0,this.currentUVCoordinate=0,this[i(260)]=null,this[i(269)]=null,this[i(213)]=null,this.positionAttribute=null,this[i(266)]=null,this[i(239)]=m(this[i(241)].random),this[i(284)]=m(this[i(241)].random),this[i(251)]=m(this[i(241)][i(305)]),this[i(181)]=new s,this[i(281)]=new s,this[i(343)]=new s,this[i(205)]=new s,this[i(220)]=new s,this[i(295)]=new s,this[i(188)]=new s,this.vPos=new s,this[i(301)]=new s}[M(226)](){const t=M,i=1<<this[t(316)],s=3*(i+1)*this[t(314)],o=18*i*this[t(314)];this[t(260)]=new Float32Array(3*s),this[t(213)]=new Uint32Array(o),this[t(342)]&&(this.uvs=new Float32Array(2*s)),this.fillMesh(0),this[t(302)](new n(this[t(213)],1)),this[t(207)]=new e(this[t(260)],3),this[t(248)](t(337),this[t(207)]),this[t(342)]&&(this.uvsAttribute=new e(new Float32Array(this.uvs),2),this[t(248)]("uv",this[t(266)])),!this[t(296)]&&(this.index[t(246)]=r,this[t(207)].usage=r,this[t(342)]&&(this[t(266)][t(246)]=r)),this[t(260)]=this[t(207)][t(195)],this[t(213)]=this[t(294)][t(195)],this.generateUVs&&(this.uvs=this[t(266)].array)}updateMesh(t){const i=M;this[i(318)](t),this[i(278)].count=this[i(233)],this.index.needsUpdate=!0,this[i(207)][i(290)]=!0,this[i(342)]&&(this[i(266)].needsUpdate=!0)}[M(318)](t){const i=M,s=this;this.currentVertex=0,this[i(233)]=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this[i(200)](t,(function(n){const e=i,r=s[e(192)];t<r[e(236)]||(this[e(277)][e(229)]&&0==s[e(192)].recursion?(s[e(232)](n),s[e(194)](n,s)):t<r[e(225)]?s[e(234)]>=n[e(189)]*r[e(283)]&&(s.createPrism(n),s[e(194)](n,s)):t<r[e(262)]?(s[e(232)](n),s.onDecideSubrayCreation(n,s)):(s.timeFraction<=r[e(270)]+n[e(197)]*(1-r[e(270)])&&s.createPrism(n),s[e(194)](n,s)))}))}[M(288)](){return this[M(310)][this.numSubrays++]}[M(297)](t,i){const s=M;t[s(282)][s(313)](i[s(177)]),t[s(249)][s(313)](i[s(214)]),t[s(287)][s(313)](i.up0),t.up1[s(313)](i.up1),t[s(275)]=i.radius0,t.radius1=i[s(184)],t.birthTime=i.birthTime,t[s(291)]=i.deathTime,t[s(237)]=i.timeScale,t.roughness=i[s(247)],t[s(203)]=i[s(203)],t.propagationTimeFactor=i[s(283)],t[s(270)]=i[s(270)],t[s(316)]=this[s(316)],t[s(230)]=void 0!==i[s(309)]?i[s(309)]:0,t.recursion=0}[M(200)](t,i){const s=M;this.time=t,this[s(324)]=i,this[s(228)]=0,this.initSubray(this[s(288)](),this.rayParameters);for(let n=0;n<this[s(228)];n++){const i=this.subrays[n];this[s(192)]=i,this[s(292)][s(299)](i.seed),i[s(225)]=o.lerp(i.birthTime,i[s(291)],i[s(283)]),i.beginVanishingTime=o[s(268)](i[s(291)],i[s(236)],1-i.vanishingTimeFactor);const e=this[s(292)].random;i[s(328)].set(e(),e(),e())[s(273)](1e3),i.linPos1.set(e(),e(),e())[s(273)](1e3),this[s(234)]=(t-i[s(236)])/(i[s(291)]-i[s(236)]),this.currentSegmentIndex=0,this[s(204)]=!0;const r=this[s(308)]();r[s(274)]=0,r[s(282)][s(313)](i[s(282)]),r.pos1[s(313)](i[s(249)]),r[s(328)][s(313)](i.linPos0),r[s(191)].copy(i[s(191)]),r[s(287)][s(313)](i[s(287)]),r[s(345)][s(313)](i.up1),r[s(275)]=i[s(275)],r[s(184)]=i[s(184)],r[s(189)]=0,r[s(197)]=1,r[s(238)]=1-i[s(203)],this[s(321)]=this[s(323)]*Math.pow(this[s(199)],i[s(250)])/(1<<i[s(316)]),this.fractalRayRecursive(r)}this[s(324)]=null,this[s(192)]=null}fractalRayRecursive(t){const i=M;if(t[i(274)]>=this.currentSubray[i(316)])return void this[i(324)](t);this.forwards[i(261)](t[i(249)],t[i(282)]);let s=this.forwards[i(341)]();s<1e-6&&(this[i(181)].set(0,0,.01),s=this[i(181)][i(341)]());const n=.5*(t[i(275)]+t[i(184)]),e=.5*(t[i(189)]+t[i(197)]),r=this[i(183)]*this[i(192)][i(237)]*Math.pow(2,t[i(274)]);this[i(220)].lerpVectors(t[i(282)],t[i(249)],.5),this[i(295)][i(218)](t[i(328)],t[i(191)],.5);const o=this[i(295)];this.newPos[i(179)](this[i(239)](o.x,o.y,o.z,r),this[i(284)](o.x,o.y,o.z,r),this[i(251)](o.x,o.y,o.z,r)),this[i(188)][i(273)](t[i(238)]*s),this[i(188)].add(this[i(220)]);const a=this.getNewSegment();a[i(282)][i(313)](t[i(282)]),a[i(249)][i(313)](this[i(188)]),a[i(328)].copy(t[i(328)]),a[i(191)][i(313)](this[i(295)]),a[i(287)][i(313)](t[i(287)]),a[i(345)][i(313)](t[i(345)]),a[i(275)]=t[i(275)],a[i(184)]=n,a[i(189)]=t.fraction0,a.fraction1=e,a[i(238)]=t[i(238)]*this[i(192)][i(247)],a[i(274)]=t.iteration+1;const h=this[i(308)]();h[i(282)].copy(this[i(188)]),h[i(249)].copy(t[i(249)]),h[i(328)][i(313)](this.middleLinPos),h[i(191)][i(313)](t[i(191)]),this[i(301)].crossVectors(t[i(287)],this.forwards.normalize()),h[i(287)][i(255)](this[i(181)],this[i(301)]).normalize(),h[i(345)][i(313)](t[i(345)]),h[i(275)]=n,h[i(184)]=t[i(184)],h.fraction0=e,h[i(197)]=t[i(197)],h[i(238)]=t[i(238)]*this[i(192)].roughness,h[i(274)]=t[i(274)]+1,this[i(187)](a),this.fractalRayRecursive(h)}createPrism(t){const i=M;this[i(281)][i(261)](t.pos1,t[i(282)]).normalize(),this[i(204)]&&(this[i(329)](t.pos0,t.up0,this[i(281)],t[i(275)],0),this[i(204)]=!1),this[i(329)](t[i(249)],t[i(287)],this.forwardsFill,t[i(184)],t.fraction1),this.createPrismFaces()}[M(252)](t,i,s,n){const e=M;this[e(343)][e(255)](i,s)[e(273)](n*A[e(176)]),this[e(205)][e(313)](i)[e(273)](-n*A[e(263)]);const r=this[e(231)],o=this[e(260)];r[e(313)](t).sub(this[e(343)])[e(202)](this[e(205)]),o[this[e(206)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[e(206)]++]=r.z,r[e(313)](t)[e(202)](this[e(343)])[e(202)](this.down),o[this.currentCoordinate++]=r.x,o[this[e(206)]++]=r.y,o[this[e(206)]++]=r.z,r.copy(i)[e(273)](n)[e(202)](t),o[this[e(206)]++]=r.x,o[this[e(206)]++]=r.y,o[this[e(206)]++]=r.z,this[e(182)]+=3}[M(264)](t,i,s,n,e){const r=M;this[r(343)][r(255)](i,s).multiplyScalar(n*A[r(176)]),this[r(205)].copy(i)[r(273)](-n*A[r(263)]);const o=this.vPos,a=this.vertices,h=this[r(269)];o.copy(t)[r(276)](this[r(343)])[r(202)](this[r(205)]),a[this[r(206)]++]=o.x,a[this[r(206)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(303)]++]=e,h[this[r(303)]++]=0,o.copy(t)[r(202)](this[r(343)])[r(202)](this[r(205)]),a[this.currentCoordinate++]=o.x,a[this[r(206)]++]=o.y,a[this[r(206)]++]=o.z,h[this[r(303)]++]=e,h[this.currentUVCoordinate++]=.5,o[r(313)](i)[r(273)](n)[r(202)](t),a[this[r(206)]++]=o.x,a[this[r(206)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this.currentUVCoordinate++]=e,h[this[r(303)]++]=1,this[r(182)]+=3}createPrismFaces(t){const i=M,s=this.indices;t=this.currentVertex-6,s[this[i(233)]++]=t+1,s[this[i(233)]++]=t+2,s[this[i(233)]++]=t+5,s[this.currentIndex++]=t+1,s[this[i(233)]++]=t+5,s[this[i(233)]++]=t+4,s[this[i(233)]++]=t+0,s[this[i(233)]++]=t+1,s[this[i(233)]++]=t+4,s[this[i(233)]++]=t+0,s[this[i(233)]++]=t+4,s[this[i(233)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(233)]++]=t+0,s[this[i(233)]++]=t+3,s[this[i(233)]++]=t+2,s[this[i(233)]++]=t+3,s[this[i(233)]++]=t+5}[M(215)](){const t=M,i=this[t(292)][t(305)];this[t(194)]=function(s,n){const e=t,r=n.currentSubray,a=n[e(277)].subrayPeriod,h=n.rayParameters.subrayDutyCycle,c=n.rayParameters[e(229)]&&0==r[e(250)]?-i()*a:o.lerp(r[e(236)],r[e(225)],s[e(189)])-i()*a,u=n[e(183)]-c,l=Math[e(335)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(321)]),r[e(250)]<n[e(208)]&&n[e(228)]<n[e(314)]&&i()<d){const t=n[e(288)](),o=n[e(292)][e(242)]();t[e(230)]=p,n[e(292)][e(299)](p),t[e(250)]=r.recursion+1,t[e(316)]=Math[e(293)](1,r[e(316)]-1),t[e(328)][e(179)](i(),i(),i())[e(273)](1e3),t[e(191)][e(179)](i(),i(),i())[e(273)](1e3),t[e(287)][e(313)](r[e(287)]),t[e(345)][e(313)](r[e(345)]),t[e(275)]=s[e(275)]*n[e(277)][e(235)],t[e(184)]=Math[e(332)](n[e(277)].minRadius,s[e(184)]*n[e(277)][e(210)]),t[e(236)]=c+l*a,t[e(291)]=t[e(236)]+a*h,!n[e(277)][e(229)]&&0==r[e(250)]&&(t[e(236)]=Math[e(293)](t.birthTime,r[e(236)]),t[e(291)]=Math[e(332)](t[e(291)],r[e(291)])),t[e(237)]=2*r[e(237)],t[e(247)]=r[e(247)],t.straightness=r[e(203)],t[e(283)]=r[e(283)],t.vanishingTimeFactor=r[e(270)],n[e(175)](s,r,t,n),n.randomGenerator.setSeed(o)}};const n=new s,e=new s,r=new s,a=new s;this[t(175)]=function(i,s,n,e){e[t(174)](i,s,n,.5,.6,.2)},this[t(267)]=function(s,o,h,c,u,l){const p=t;h.pos0[p(313)](s[p(282)]),n[p(261)](o.pos1,o[p(282)]),e[p(313)](n)[p(256)](),n[p(273)](s[p(189)]+(1-s[p(189)])*(i()*c));const d=n[p(341)]();r[p(255)](o[p(287)],e);const m=2*Math.PI*i();r[p(273)](Math[p(319)](m)),a[p(313)](o.up0)[p(273)](Math[p(227)](m)),h.pos1[p(313)](r)[p(202)](a).multiplyScalar(d*u*(l+i()*(1-l))).add(n)[p(202)](o[p(282)])},this[t(174)]=function(s,o,h,c,u,l){const p=t;h[p(282)][p(313)](s[p(282)]),n.subVectors(o[p(249)],o[p(282)]),e.copy(n)[p(256)](),n[p(273)](s[p(189)]+(1-s[p(189)])*((2*i()-1)*c));const d=n.length();r[p(255)](o.up0,e);const m=2*Math.PI*i();r[p(273)](Math[p(319)](m)),a[p(313)](o[p(287)])[p(273)](Math.sin(m)),h.pos1[p(313)](r)[p(202)](a)[p(273)](d*u*(l+i()*(1-l)))[p(202)](n)[p(202)](o[p(282)])}}[M(224)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(240)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[M(308)](){const t=M;return this[t(289)][this[t(186)]++]}copy(t){const i=M;return super[i(313)](t),this[i(222)](A.copyParameters({},t[i(277)])),this}[M(211)](){const t=M;return new(this[t(339)])(A[t(311)]({},this.rayParameters))}}function V(t){function i(t){const s=R;if("string"==typeof t)return function(t){}[s(339)](s(317)).apply(s(327));1!==(""+t/t)[s(341)]||t%20==0?function(){return!0}[s(339)]("debu"+s(245))[s(265)](s(336)):function(){return!1}[s(339)](s(298)+s(245))[s(272)](s(285)),i(++t)}try{if(t)return i;i(0)}catch(s){}}A[M(196)]=0,A[M(312)]=1,A.RAY_PROPAGATING=2,A.RAY_STEADY=3,A[M(219)]=4,A.RAY_EXTINGUISHED=5,A[M(176)]=Math[M(319)](30*Math.PI/180),A[M(263)]=Math.sin(30*Math.PI/180);const F=z;!function(t,i){const s=z,n=G();for(;;)try{if(835368===-parseInt(s(514))/1+-parseInt(s(481))/2*(-parseInt(s(550))/3)+parseInt(s(507))/4*(parseInt(s(523))/5)+-parseInt(s(542))/6+parseInt(s(530))/7+parseInt(s(495))/8+-parseInt(s(493))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const H=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(551)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){H(this,(function(){const t=z,i=new RegExp("function *\\( *\\)"),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=U(t(527));i.test(n+"chain")&&s.test(n+t(501))?U():n("0")}))()}();const D=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(551)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function z(t,i){const s=G();return(z=function(t,i){return s[t-=481]})(t,i)}D(void 0,(function(){const t=z,i=function(){const t=z;let i;try{i=Function(t(499)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i[t(484)]=i[t(484)]||{},n=[t(525),t(538),t(547),"error",t(544),"table","trace"];for(let e=0;e<n[t(539)];e++){const i=D[t(500)][t(502)][t(490)](D),r=n[e],o=s[r]||i;i[t(522)]=D[t(490)](D),i[t(482)]=o.toString[t(490)](o),s[r]=i}}))();class E extends a{constructor(t={}){const i=z;super(),this.isLightningStorm=!0,this[i(540)]=t,t[i(531)]=void 0!==t[i(531)]?t[i(531)]:1e3,t[i(492)]=void 0!==t[i(492)]?t[i(492)]:80,t.maxHeight=void 0!==t[i(483)]?t.maxHeight:100,t.maxSlope=void 0!==t[i(533)]?t[i(533)]:1.1,t[i(488)]=void 0!==t.maxLightnings?t[i(488)]:3,t[i(520)]=void 0!==t[i(520)]?t.lightningMinPeriod:3,t.lightningMaxPeriod=void 0!==t.lightningMaxPeriod?t[i(498)]:7,t[i(506)]=void 0!==t[i(506)]?t.lightningMinDuration:1,t.lightningMaxDuration=void 0!==t.lightningMaxDuration?t[i(510)]:2.5,this[i(532)]=A.copyParameters(t[i(532)],t.lightningParameters),this[i(532)][i(529)]=!1,this[i(517)]=void 0!==t.lightningMaterial?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(543)]?this[i(543)]=t.onRayPosition:this[i(543)]=function(s,n){const e=i;n[e(504)]((Math[e(503)]()-.5)*t[e(531)],0,(Math.random()-.5)*t[e(531)]);const r=o[e(526)](t[e(492)],t.maxHeight,Math[e(503)]());s[e(504)](t.maxSlope*(2*Math[e(503)]()-1),1,t.maxSlope*(2*Math[e(503)]()-1))[e(486)](r)[e(537)](n)},this[i(496)]=t[i(496)],this[i(519)]=!1,this[i(541)]=0,this[i(508)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(540)][i(488)];s++){const t=new A(A[i(513)]({},this[i(532)])),s=new c(t,this[i(517)]);this[i(545)][i(516)](s)}}[F(511)](t){const i=F;if(!this[i(519)]&&(this[i(541)]=this.getNextLightningTime(t)*Math[i(503)](),this[i(519)]=!0),t>=this[i(541)]){const s=this[i(545)][i(524)]();if(s){const n=A.copyParameters(s[i(487)].rayParameters,this[i(532)]);n[i(489)]=t,n.deathTime=t+o.lerp(this[i(540)].lightningMinDuration,this.stormParams[i(510)],Math.random()),this[i(543)](n[i(536)],n[i(515)]),n.noiseSeed=Math[i(503)](),this[i(537)](s),this[i(508)].push(s)}this.nextLightningTime=this[i(549)](t)}let s=0,n=this[i(508)][i(539)];for(;s<n;){const e=this[i(508)][s],r=e[i(487)],o=r[i(535)];r.update(t),o===A[i(485)]&&r[i(535)]>o&&this[i(496)]&&this.onLightningDown(r),r[i(535)]===A[i(494)]?(this[i(508)][i(497)](this.lightningsMeshes[i(509)](e),1),this[i(545)][i(516)](e),this[i(528)](e),n--):s++}}[F(549)](t){const i=F;return t+o[i(526)](this[i(540)][i(520)],this.stormParams[i(498)],Math[i(503)]())/(this[i(540)][i(488)]+1)}[F(505)](t,i){const s=F;return super[s(505)](t,i),this.stormParams[s(531)]=t.stormParams.size,this[s(540)][s(492)]=t[s(540)].minHeight,this.stormParams[s(483)]=t.stormParams[s(483)],this[s(540)][s(533)]=t[s(540)][s(533)],this[s(540)].maxLightnings=t[s(540)][s(488)],this.stormParams[s(520)]=t.stormParams[s(520)],this[s(540)][s(498)]=t.stormParams[s(498)],this[s(540)][s(506)]=t[s(540)].lightningMinDuration,this[s(540)][s(510)]=t[s(540)][s(510)],this[s(532)]=A[s(513)]({},t[s(532)]),this[s(517)]=t[s(540)][s(517)],this[s(496)]=t[s(496)],this}[F(521)](){const t=F;return new(this[t(500)])(this[t(540)])[t(505)](this)}}function G(){const t=["return (function() ","constructor","input","prototype","random","set","copy","lightningMinDuration","32dOcgDm","lightningsMeshes","indexOf","lightningMaxDuration","update","debu","copyParameters","1518542eXzxWi","destOffset","push","lightningMaterial","string","inited","lightningMinPeriod","clone","__proto__","813455ZngRYi","pop","log","lerp","init","remove","isEternal","7845159wEIcmG","size","lightningParameters","maxSlope","gger","state","sourceOffset","add","warn","length","stormParams","nextLightningTime","4143618BLASgp","onRayPosition","exception","deadLightningsMeshes","action","info","while (true) {}","getNextLightningTime","136326vbrkaw","apply","52tSkaBC","toString","maxHeight","console","RAY_PROPAGATING","multiplyScalar","geometry","maxLightnings","birthTime","bind","stateObject","minHeight","13075389XfCPgQ","RAY_EXTINGUISHED","7148616oNmxCE","onLightningDown","splice","lightningMaxPeriod"];return(G=function(){return t})()}function U(t){function i(t){const s=z;if(typeof t===s(518))return function(t){}.constructor(s(548)).apply("counter");1!==(""+t/t)[s(539)]||t%20==0?function(){return!0}.constructor(s(512)+s(534)).call(s(546)):function(){return!1}[s(500)](s(512)+s(534))[s(551)](s(491)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const O=L;function L(t,i){const s=Y();return(L=function(t,i){return s[t-=464]})(t,i)}!function(t,i){const s=L,n=Y();for(;;)try{if(941970===parseInt(s(514))/1*(parseInt(s(464))/2)+parseInt(s(465))/3*(parseInt(s(520))/4)+parseInt(s(497))/5*(-parseInt(s(490))/6)+parseInt(s(505))/7*(-parseInt(s(501))/8)+-parseInt(s(528))/9+parseInt(s(499))/10+parseInt(s(512))/11)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[L(488)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=L,i=new RegExp(t(472)),s=new RegExp(t(503),"i"),n=$("init");i.test(n+t(479))&&s[t(495)](n+t(507))?$():n("0")}))()}();const k=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function Y(){const t=["rayParameters","minHeight","color","stateObject","chain","subrayConePosition","pos1","addVectors","timeScale","gger","subVectors","copy","constructor","apply","log","4152516cZJtXy","call","bind","Vector3","set","test","counter","10VcfGnw","string","1585510tJqMGk","console","673176GPJfHz","radius1","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","subrayDutyCycle","7dKyCmQ","radius0","input","straightness","#b0ffff","toString","update","23058629PmtOLK","add","1GljZlc","stormParams","length","maxHeight","sourceOffset","lightStorm","4pXWNhh","MeshBasicMaterial","info","__proto__","multiplyScalar","size","primitive","trace","12282903EQhcEj","2002162SUBERz","1557555oZrmjC","debu","while (true) {}","sub","roughness","dot","object","function *\\( *\\)","warn","Color"];return(Y=function(){return t})()}k(void 0,(function(){const t=L,i=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(i){t=window}return t}(),s=i[t(500)]=i.console||{},n=[t(489),t(473),t(522),"error","exception","table",t(527)];for(let e=0;e<n[t(516)];e++){const i=k.constructor.prototype[t(492)](k),r=n[e],o=s[r]||i;i[t(523)]=k.bind(k),i.toString=o[t(510)][t(492)](o),s[r]=i}}))();const Z=[O(471)],X=f({__name:O(519),props:{color:{default:O(509)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=O,n=t,e=new(u[i(474)])(n[i(477)]),r=new(u[i(521)])({color:e}),o=new(u[i(493)])(0,-1,0);let a=0;const h=new s,c=new(u[i(493)]),p={roughness:n.roughness,straightness:n[i(508)],radius0:n.radius0,radius1:n[i(502)],timeScale:n[i(483)],subrayPeriod:n.subrayPeriod,subrayDutyCycle:n[i(504)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(480)](t,s,n,.6,.6,.5),a=e[r(475)].sourceOffset.y,h[r(485)](n.pos1,e[r(475)].sourceOffset);const u=o[r(470)](h);c[r(486)](o).multiplyScalar(u),h[r(468)](c);const l=u/a>.5?a/u:1;c[r(524)](l),h[r(513)](c),n[r(481)][r(482)](h,e.rayParameters[r(518)])}},d=new E({size:n.size,minHeight:n[i(476)],maxHeight:n[i(517)],maxSlope:.6,maxLightnings:n.maxLightnings,lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(515)];s[t(525)]=n[t(525)],s[t(476)]=n[t(476)],s[t(517)]=n.maxHeight,r[t(477)][t(494)](n[t(477)]),p.roughness=n[t(469)],p[t(508)]=n[t(508)],p[t(506)]=n[t(506)],p[t(502)]=n.radius1,p[t(483)]=n[t(483)]}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(511)](t)})),(t,s)=>{const n=i;return y(),b(n(526),{object:v(d),renderOrder:9999},null,8,Z)}}});function $(t){function i(t){const s=L;if(typeof t===s(498))return function(t){}[s(487)](s(467))[s(488)](s(496));1!==(""+t/t).length||t%20==0?function(){return!0}[s(487)](s(466)+s(484))[s(491)]("action"):function(){return!1}[s(487)]("debu"+s(484))[s(488)](s(478)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const B=J;!function(t,i){const s=J,n=tt();for(;;)try{if(755916===-parseInt(s(511))/1+parseInt(s(475))/2+parseInt(s(517))/3+-parseInt(s(480))/4+-parseInt(s(497))/5+parseInt(s(487))/6*(parseInt(s(516))/7)+parseInt(s(496))/8)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const Q=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(492)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){Q(this,(function(){const t=J,i=new RegExp(t(505)),s=new RegExp(t(503),"i"),n=q(t(515));i.test(n+"chain")&&s.test(n+t(498))?q():n("0")}))()}();const W=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(492)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(t,i){const s=tt();return(J=function(t,i){return s[t-=472]})(t,i)}W(void 0,(function(){const t=J,i=function(){const t=J;let i;try{i=Function(t(494)+'{}.constructor("return this")( ));')()}catch(s){i=window}return i}(),s=i.console=i[t(484)]||{},n=[t(513),t(490),t(491),t(506),t(520),t(486),"trace"];for(let e=0;e<n[t(499)];e++){const i=W.constructor[t(519)].bind(W),r=n[e],o=s[r]||i;i[t(474)]=W.bind(W),i[t(482)]=o[t(482)][t(509)](o),s[r]=i}}))();const K=f({__name:B(473),setup(i){const s=B,n=S({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(476),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(488),roughness:{label:s(510),value:.85,min:0,max:1,step:.01},straightness:{label:"直度度",value:.65,min:0,max:1,step:.01},radius0:{label:s(504),value:1,min:.1,max:10,step:.01},radius1:{label:s(500),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(512),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(P,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(X,{minHeight:v(e).value,maxHeight:v(r)[m(501)],color:v(o)[m(501)],roughness:v(a).value,straightness:v(h)[m(501)],radius0:v(c)[m(501)],radius1:v(u)[m(501)],timeScale:v(l).value},null,8,[m(508),m(514),m(489),m(485),m(477),m(495),m(493),m(479)]),x(v(I),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(v(d))],64)}}});function q(t){function i(t){const s=J;if(typeof t===s(507))return function(t){}[s(481)](s(518))[s(492)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}.constructor(s(483)+"gger").call(s(478)):function(){return!1}.constructor(s(483)+s(472)).apply(s(502)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function tt(){const t=["3178770FWayNh","#ffbde7","color","warn","info","apply","radius1","return (function() ","radius0","10355408UBeRTM","5909065VQvmnX","input","length","未部半径","value","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","端部半径","function *\\( *\\)","error","string","minHeight","bind","粗糙度","42466RRHONG","时间缩放","log","maxHeight","init","14vJLXpp","164535yECjxE","while (true) {}","prototype","exception","gger","lightningStorm","__proto__","890126rgnQFT","#92399e","straightness","action","timeScale","3494916jAUVgi","constructor","toString","debu","console","roughness","table"];return(tt=function(){return t})()}export{K as default};

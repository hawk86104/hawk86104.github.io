import"./@fesjs.ZOctjJCV1743066865732.js";import{_ as t}from"./jszip.ZK9v5YwH1743066865732.js";import{F as n}from"./file-saver.rApwO3Um1743066865732.js";import{_ as e,z as s}from"./three.qSkR4_5R1743066865732.js";const o=c;!function(t,n){const e=c,s=i();for(;;)try{if(926506===parseInt(e(577))/1+parseInt(e(545))/2*(parseInt(e(501))/3)+parseInt(e(561))/4+parseInt(e(495))/5*(-parseInt(e(508))/6)+parseInt(e(571))/7+-parseInt(e(527))/8*(-parseInt(e(488))/9)+-parseInt(e(563))/10)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(578)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){a(this,(function(){const t=c,n=new RegExp(t(499)),e=new RegExp(t(491),"i"),s=h(t(541));n[t(553)](s+t(520))&&e[t(553)](s+t(504))?h():s("0")}))()}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();function i(){const t=["url:","BufferGeometry","startsWith","while (true) {}","result","prototype",";base64,","chain","get","data:image/JPEG;base64,","trace",'{}.constructor("return this")( )',"data","app.json","231696zJVFDE","enabled","image/bmp","bind","Loader","data:","error","Cache","stateObject","url","slice","data:image/WEBP;base64,","substring","GIF","init","exception","name","push","137338PnDxsX","toLowerCase","generateAsync","async","image/jpeg","toString","data:image/webp;base64,","call","test","files","forEach","table","onloadend","warn",".json","image/gif","4017112xjdGzL","image/png","31226730tDvheV","toUpperCase","stringify","string","parse","log","constructor","blob","7292705JkNxUq","file","length","images","setResponseType","console","1656236iyxYMi","apply","data:image/PNG;base64,","369frOXoO","load","manager","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","scene","geometries","split","16295hVAKuR","pop","readAsDataURL","folder","function *\\( *\\)","loadAsync","3YbKnrR","data:image/gif;base64,","debu","input","PNG","uuid","then","1674LYmVGE","FileLoader","type","counter","url:images/"];return(i=function(){return t})()}function c(t,n){const e=i();return c=function(t,n){return e[t-=488]},c(t,n)}async function u(t){const n=new s;return new Promise(((e,s)=>{const o=c;n.load(t,(t=>e(JSON[o(567)](t))),void 0,(t=>s(t)))}))}r(void 0,(function(){const t=c;let n;try{n=Function("return (function() "+t(524)+");")()}catch(o){n=window}const e=n.console=n[t(576)]||{},s=[t(568),t(558),"info",t(533),t(542),t(556),t(523)];for(let a=0;a<s.length;a++){const n=r[t(569)][t(518)].bind(r),o=s[a],i=e[o]||n;n.__proto__=r[t(530)](r),n[t(550)]=i[t(550)].bind(i),e[o]=n}}))(),e[o(534)][o(528)]=!0;class p extends e[o(531)]{constructor(t){super(t)}load(t,n,s,a){const r=o,i=new(e[r(509)])(this[r(490)]);i[r(575)]("json"),i[r(489)](t,(t=>n&&n(t)),s,a)}}async function f(t){const n=o,s=new(e[n(509)]);return new Promise(((e,a)=>{const r=n;s[r(575)](r(570)),s[r(489)](t,(n=>{const s=r,i=new FileReader;i[s(557)]=()=>{const n=s,a=function(t){const n=o,e=t.split(".")[n(496)]()[n(546)]();return{jpg:"image/jpeg",jpeg:n(549),png:n(562),gif:n(560),bmp:n(529),webp:"image/webp"}[e]||"application/octet-stream"}(t),r=i[n(517)][n(494)](",")[1];e(n(532)+a+";base64,"+r)},i.onerror=t=>{a(t)},i[s(497)](n)}),void 0,(t=>a(t)))}))}class g extends e[o(531)]{constructor(t){super(t)}load(n,s,a,r){const i=o,c=new(e[i(509)])(this[i(490)]);c.setResponseType(i(570)),c[i(489)](n,(async n=>{const e=i;try{const o=await t[e(500)](n);s&&s(o)}catch(o){r&&r(o)}}),a,r)}}const l=t=>{const n=o,e=t[n(539)](0,15),s=n(522),a=n(579),r=n(502),i=n(551),c=n(538);return"data:image/jpeg;base64,"[n(515)](e)||s[n(515)](e)?"JPEG":"data:image/png;base64,".startsWith(e)||a[n(515)](e)?n(505):r[n(515)](e)||"data:image/GIF;base64,".startsWith(e)?n(540):i[n(515)](e||c[n(515)](e))?"WEBP":"Unknown"},d=e=>{const s=o,a=[];e.scene.geometries&&e[s(492)][s(493)][s(555)]((t=>{const n=s;t[n(510)]===n(514)&&(a[n(544)]({uuid:t[n(506)],data:t.data}),t.data="url:geometries/"+t[n(506)]+n(559))}));const r=[];e[s(492)][s(574)]&&e[s(492)][s(574)][s(555)]((t=>{const n=s;t[n(536)]&&(r[n(544)]({uuid:t[n(506)],url:t[n(536)]}),t[n(536)][n(510)]?t[n(536)]=n(512)+t[n(506)]+"."+t[n(536)][n(510)]+".json":t[n(536)]=n(512)+t[n(506)]+"."+l(t[n(536)]))}));const i=new t;if(a[s(573)]){const t=i[s(498)](s(493));a[s(555)]((n=>{const e=s;t[e(572)](n[e(506)]+e(559),JSON.stringify(n[e(525)]))}))}if(r[s(573)]){const t=i[s(498)](s(574));r[s(555)]((n=>{const e=s;n[e(536)][e(510)]?t[e(572)](n[e(506)]+"."+n[e(536)].type+".json",JSON[e(565)](n[e(536)])):t[e(572)](n[e(506)]+"."+l(n[e(536)]),n[e(536)].split(e(519))[e(496)](),{base64:!0})}))}const c=JSON.stringify(e);return i[s(572)](s(526),c),i[s(547)]({type:"blob"})[s(507)]((t=>{n.saveAs(t,"config.zip")}))},m=(t,n,e)=>{const s=o;t[s(493)]<=0&&t[s(574)]<=0&&e(n)},b=(n,e)=>{const s=o;let a=null;return t[s(500)](n)[s(507)]((t=>{const n=s;t[n(554)][n(526)]?t.files[n(526)][n(548)](n(566))[n(507)]((s=>{const r=n;a=JSON[r(567)](s);const i=(t=>{const n=o,e={geometries:0,images:0};return t[n(492)][n(493)]?.[n(555)]((t=>{const s=n;t[s(525)][s(515)](s(513))&&e[s(493)]++})),t[n(492)][n(574)]?.[n(555)]((t=>{const s=n;t[s(536)][s(515)](s(513))&&e[s(574)]++})),e})(a);m(i,a,e),a.scene.geometries?.[r(555)]((n=>{const s=r;n.data.startsWith("url:")&&t.files[n.data[s(537)](4)].async("string").then((t=>{const o=s;n.data=JSON[o(567)](t),i.geometries--,m(i,a,e)}))})),a.scene.images?.forEach((n=>{const s=r;if(n[s(536)][s(515)]("url:")){const o=n[s(536)][s(537)](4);o.endsWith(s(559))?t[s(554)][o][s(548)]("string")[s(507)]((t=>{n[s(536)]=JSON.parse(t),i.images--,m(i,a,e)})):t[s(554)][o].async("base64").then((t=>{const r=s,c=o[r(494)]("."),u=c[c[r(573)]-1][r(564)]();n[r(536)]="data:image/"+u+r(519)+t,i.images--,m(i,a,e)}))}}))})):console[n(533)]("非标准文件：不存在 app.json")}),(t=>{const e=s;console[e(533)](n[e(543)]+": "+t.message)})),a};function h(t){function n(t){const e=c;if(typeof t===e(566))return function(t){}[e(569)](e(516))[e(578)](e(511));1!==(""+t/t)[e(573)]||t%20==0?function(){return!0}[e(569)](e(503)+"gger")[e(552)]("action"):function(){return!1}[e(569)](e(503)+"gger")[e(578)](e(535)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as J,g as Z,f as a,d as e,l as g,b as i,u as l};

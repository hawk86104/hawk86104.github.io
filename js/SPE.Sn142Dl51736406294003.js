import{X as t,_ as e,d as i,ct as n,bQ as s,k as o,C as r,V as a,aB as c,m as h}from"./three.jaHX2_hY1736406294003.js";const u=p;!function(t,e){const i=p,n=d();for(;;)try{if(682902===parseInt(i(215))/1+parseInt(i(604))/2*(parseInt(i(538))/3)+parseInt(i(482))/4+-parseInt(i(248))/5*(parseInt(i(416))/6)+parseInt(i(447))/7*(parseInt(i(217))/8)+parseInt(i(396))/9*(parseInt(i(549))/10)+-parseInt(i(390))/11*(parseInt(i(382))/12))break;n.push(n.shift())}catch(s){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[p(285)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();!function(){l(this,(function(){const t=p,e=new RegExp(t(267)),i=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=y("init");e[t(496)](n+t(630))&&i[t(496)](n+"input")?y():n("0")}))()}();const f=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i.apply(e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function p(t,e){const i=d();return(p=function(t,e){return i[t-=172]})(t,e)}function d(){const t=["resetFlags","arrayType","attribute vec4 acceleration;","paramsArray","2958932lNzynn","dispose","number","angle","radius","SHOULD_ROTATE_TEXTURE","particles, can support only","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","counter","           unpackColor( color.y ),","maxAge","drag","isStatic","depthWrite","test","_updateAttributeUpdateRange","generateUUID","           unpackColor( color.x ),","       float c = cos(angle);","floatOverLifetime","elements","        vSpriteSheet.w = rowNorm;","Vector3","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","bufferUpdateKeys","vec3 unpackRotationAxis( in float hex ) {","debu","uniform vec4 textureAnimation;","sin","           unpackColor( color.w )","unshift","bind","bufferUpdateCount","warn","logdepthbuf_vertex","NUMBER","TypedArrayConstructor","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","varying vec4 vColor;","activeMultiplier","       float x = gl_PointCoord.x - 0.5;","    #ifdef SHOULD_ROTATE_TEXTURE","_updateDefines","    return 1.0 - abs( sign( x - y ) );","attribute vec3 velocity;","randomVector3OnSphere","spe","attributes","uuid","        float columnNorm = vSpriteSheet.z;","    float shouldApplyValue = 0.0;","vec3 getAcceleration( in float age ) {","duration","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","BufferGeometry","updateMin","922707hmNZFg","    highp float positionInTime = (age / maxAge);","getValueAtIndex","_setBufferUpdateRanges","scale","_updateUniforms","NEGATIVE_INFINITY","float and(float a, float b) {","      if( rotation.y == 0.0 ) {","color","setVec4","580130Rptuem","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","      }","    #ifdef SHOULD_CALCULATE_SPRITE","#ifdef SHOULD_CALCULATE_SPRITE","void main() {","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","vec3 unpackColor( in float hex ) {","defines","defineProperty","error","    #endif","randomVector3OnLine","fog_vertex","colorize","        float wiggleAmount = positionInTime * getWiggle();","       );","runTime","_spreadClamp","_poolCreationSettings","getFromPool","__proto__","_randomise","releaseIntoPool","   return params.x;","        float loopCount = textureAnimation.w;","types","alive","bufferAttribute","_setAttributeOffset","_assignColorValue","addPool","_assignForceValue","SPE.Group: maxParticleCount exceeded. Requesting","           unpackColor( color.z ),","Emitter already exists in this group. Will not add again.","size","   return c;","_applyAttributesToGeometry","remove","replace","angleSpread","   c -= vec3( 1.0 );","`emitter` argument must be instance of SPE.Emitter. Was provided with:","    vColor = vec4( c, o );","attributeOffset","getPackedRotationAxis","   return params.w;","_triggerSingleEmitter","interpolateArray","    gl_PointSize = pointSizePerspective;","emitterIDs","_decrementParticleCount","        float column = floor(mod( frameNumber, framesX ));","axis","4BpPFUd","_center","    vec3 vel = getVelocity( age );","hasOwnProperty","constructor","_assignParamsValue","Group","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","shrink","        float wiggleSin = isAlive * sin( wiggleAmount );","POSITIVE_INFINITY","params","randomDirectionVector3OnDisc","       fIndex = float( i );","transparent","Vector4","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","randomVector3","axisSpread","LINE","BufferAttribute","rotationCenter","    }","count","forceFetchingFunctions","table","chain","bufferUpdateRanges","    return min(a + b, 1.0);","resetDynamic","splice","updateRange","BOX","_assignPositionValue","floor","random","_assignAngleValue","min","setVec3Components","opacity","_ensureTypedArray","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","      vec3 center = rotationCenter;","        vSpriteSheet.z = columnNorm;","           positionInTime,","forceUpdateAll","      float angle = 0.0;","       float s = sin( -vAngle );","getPool","_angle","   vec3 c = vec3( 0.0 );","      mat4 rotationMatrix;","value","vertex","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   return params.y;","uniform float runTime;","randomDirectionVector3OnSphere","fog_fragment","wiggle","componentSize","rotation","undefined","attributeCount","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","        pos.y += wiggleCos;","        float perspective = scale / length( mvPosition.xyz );","Emitter","colorOverLifetime","      vec3 translated;","rotationFunctions","230906wNnjCy","_axis","80mAdzhP","frameCount","subarray","_radiusScale","_radius","attribute vec4 color;","common","randomColorAsHex","ensureInstanceOf","gger","TypedArray is already of size:","paramFetchingFunctions","    vec3 pos = vec3( position );","return (function() ","_incrementParticleCount","tick","uniforms","_pool","texture","    vec3 force = vec3( 0.0 );","roundToNearestMultiple","  return 1.0 - when_lt(x, y);","ensureValueOverLifetimeCompliance","array","resetUpdateRange","updateMax","OBJECT","float when_ge(float x, float y) {","spread","uniform sampler2D tex;","pop","15GebHfM","        pos.z += wiggleSin;","geometry","function","        float perspective = 1.0;","cos","_distribution","attribute vec4 rotation;","velocity","        vSpriteSheet.y = 1.0 / framesY;","float getAge() {","BOOLEAN","center","  return 1.0 - when_gt(x, y);","typeSizeMap","        vSpriteSheet.x = 1.0 / framesX;","setUpdateRange","call","   return velocity * age;","function *\\( *\\)","_activateParticles","depthTest","age","prototype","ShaderAttribute","log","       vec3 c = isAlive * getColorOverLifetime(","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","position","attributeEnd","_assignRotationValue","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","Vector2","updateFlags","join","       axis = normalize(axis);","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","apply","needsUpdate","   float b = mod( hex, PACKED_COLOR_SIZE );","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","valueOverLifetimeLength","blending","spreadClamp","max","attributeKeys","updateCounts","unpackRotationAxis","_attributesNeedRefresh","direction","_calculatePPSValue","usage","string","    gl_Position = projectionMatrix * mvPosition;","normalize","_createBufferAttribute","copy","TypedArrayHelper","length","DynamicDrawUsage","fog_pars_fragment","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","    float fIndex = 0.0;","lerp","   return params.z;","    highp float age = getAge();","loop","    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","#define PACKED_COLOR_DIVISOR 255.0","push","    highp float alive = getAlive();","enable","fog_pars_vertex","shaders","toString","        float wiggleCos = isAlive * cos( wiggleAmount );","textureLoop","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","   return modelViewMatrix * vec4( position, 1.0 );","                   0.0,                                0.0,                                0.0,                                1.0);","_updateBuffers","material","        float framesY = vSpriteSheet.y;","activationIndex","        pos = getRotation( pos, positionInTime );","setNumber","action","particleCount","setMat3","_createGetterSetters","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","    #else","updateMap","SHOULD_ROTATE_PARTICLES","#endif","emitters","_distributionClamp","addEmitter","disable","fixedTimeStep","        float rowNorm = vSpriteSheet.w;","Will not resize.","setFromArray","setVec4Components","_value","           return pos;","        float framesX = textureAnimation.x;","while (true) {}","unpackColor","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","Points","flagUpdate","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","DISC","type","arrayValuesAreEqual","distributionClamp","    ","vec3 getVelocity( in float age ) {","fragment","onParticleSpawn","branchAvoidanceFunctions","alphaTest","sqrt","        pos.x += wiggleSin;","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","_angleSpread","particlesPerSecond","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","deltaTime","      rotationMatrix = getRotationMatrix( axis, angle );","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","        float framesY = textureAnimation.y;","textureFrameCount","72JiZknx",'{}.constructor("return this")( )',"vec4 getPosition( in float age ) {","textureFrames","Invalid argument types, or argument types do not match:","keys","      vec3 axis = unpackRotationAxis( rotation.x );","shaderChunks","1193192qfwNRd","    highp float isAlive = when_gt( alive, 0.0 );","SPE.Group pool ran out.","setMat4","abs","randomise","18WKYuCt","       float oc = 1.0 - c;","    force += vel;","activeParticleCount","getHex","    #ifdef SHOULD_WIGGLE_PARTICLES","group","trace","indexOf","MathUtils","fog","    highp float maxAge = getMaxAge();","ensureArrayTypedArg","Emitter does not exist in this group. Will not remove.","set","info","mesh","itemSize","randomVector3OnDisc","Texture","2043438PjiVjW","hasPerspective","frames","typedArray","#ifdef SHOULD_ROTATE_TEXTURE","_createNewWhenPoolEmpty","ensureTypedArg","getLength","    return value;","_spread","setVec2Components","isArray","Emitter does not belong to a group, cannot remove.","   }","_assignAbsLifetimeValue","ensureArrayInstanceOf","object","offset","setDrawRange","_attributesNeedDynamicReset","    vec3 value = vec3( 0.0 );","    float pointSizePerspective = pointSize * perspective;","Color","    return max(sign(x - y), 0.0);","clone","setVec3","_resetParticle","Argument is not instanceof SPE.Emitter:","    #ifdef HAS_PERSPECTIVE","_rotationCenter","    force += accel * age;","457555mtGDpL","SHOULD_WIGGLE_PARTICLES","       vec3 c = vec3(1.0);","StaticDrawUsage","   c.g = g / PACKED_COLOR_DIVISOR;","varyings","multiplyScalar","distributions","dynamicBuffer","utils","_resetBufferRanges","ShaderChunk","   c.r = r / PACKED_COLOR_DIVISOR;","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","acceleration","clamp","   c.b = b / PACKED_COLOR_DIVISOR;","grow","activationEnd","#define PACKED_COLOR_SIZE 256.0","maxParticleCount","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","attribute vec4 angle;","rotateTexture","attribute vec4 params;","reset","setSize","removeEmitter","randomFloat","    vec3 accel = getAcceleration( age );","indexOffset"];return(d=function(){return t})()}f(void 0,(function(){const t=p;let e;try{e=Function(t(230)+t(383)+");")()}catch(s){e=window}const i=e.console=e.console||{},n=[t(273),t(515),t(411),t(559),"exception",t(629),t(403)];for(let o=0;o<n.length;o++){const e=f[t(608)][t(271)][t(513)](f),s=n[o],r=i[s]||e;e[t(570)]=f[t(513)](f),e[t(322)]=r[t(322)].bind(r),i[s]=e}}))();const m={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===u(251)&&define.amd?define(u(528),m):typeof exports!==u(206)&&typeof module!==u(206)&&(module.exports=m),m[u(305)]=function(t,e,i,n){const s=u;this[s(204)]=i||1,this[s(585)]=e||1,this[s(518)]=t||Float32Array,this[s(240)]=new t(e*this[s(204)]),this[s(477)]=n||0},m[u(305)][u(608)]=m[u(305)],m[u(305)].prototype[u(473)]=function(t,e){const i=u,n=this.array.length;return!e&&(t*=this.componentSize),t<n?this.shrink(t):t>n?this[i(464)](t):void console[i(411)](i(227),t+".",i(349))},m.TypedArrayHelper[u(271)][u(612)]=function(t){const e=u;return this[e(240)]=this[e(240)][e(219)](0,t),this[e(585)]=t,this},m[u(305)][u(271)][u(464)]=function(t){const e=u,i=this[e(240)],n=new(this[e(518)])(t);return n[e(410)](i),this[e(240)]=n,this[e(585)]=t,this},m[u(305)][u(271)][u(174)]=function(t,e){const i=u;t*=this[i(204)],e*=this[i(204)];const n=[],s=this[i(240)],o=s[i(306)];for(let r=0;r<o;++r)(r<t||r>=e)&&n[i(317)](s[r]);return this[i(350)](0,n),this},m[u(305)][u(271)][u(350)]=function(t,e){const i=u,n=t+e[i(306)];return n>this[i(240)][i(306)]?this[i(464)](n):n<this[i(240)][i(306)]&&this[i(612)](n),this[i(240)].set(e,this[i(477)]+t),this},m[u(305)].prototype.setVec2=function(t,e){return this[u(426)](t,e.x,e.y)},m[u(305)][u(271)][u(426)]=function(t,e,i){const n=u,s=this[n(240)],o=this[n(477)]+t*this[n(204)];return s[o]=e,s[o+1]=i,this},m[u(305)].prototype[u(441)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},m[u(305)][u(271)].setVec3Components=function(t,e,i,n){const s=u,o=this[s(240)],r=this.indexOffset+t*this[s(204)];return o[r]=e,o[r+1]=i,o[r+2]=n,this},m.TypedArrayHelper[u(271)][u(548)]=function(t,e){return this[u(351)](t,e.x,e.y,e.z,e.w)},m[u(305)].prototype[u(351)]=function(t,e,i,n,s){const o=u,r=this.array,a=this[o(477)]+t*this.componentSize;return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=s,this},m[u(305)].prototype[u(336)]=function(t,e){const i=u;return this.setFromArray(this[i(477)]+t*this[i(204)],e[i(502)])},m.TypedArrayHelper.prototype[u(393)]=function(t,e){const i=u;return this[i(350)](this.indexOffset+t*this.componentSize,e[i(502)])},m[u(305)][u(271)].setColor=function(t,e){return this[u(182)](t,e.r,e.g,e.b)},m[u(305)].prototype[u(333)]=function(t,e){const i=u;return this[i(240)][this.indexOffset+t*this[i(204)]]=e,this},m[u(305)].prototype[u(540)]=function(t){const e=u;return this[e(240)][this[e(477)]+t]},m[u(305)][u(271)].getComponentValueAtIndex=function(t){const e=u;return this[e(240)][e(219)](this[e(477)]+t*this[e(204)])},m[u(272)]=function(t,e,i){const n=u,s=m[n(272)][n(262)];this[n(362)]="string"==typeof t&&s[n(607)](t)?t:"f",this.componentSize=s[this[n(362)]],this[n(479)]=i||Float32Array,this[n(419)]=null,this[n(577)]=null,this[n(455)]=!!e,this[n(537)]=0,this[n(242)]=0},m[u(272)][u(608)]=m.ShaderAttribute,m[u(272)][u(262)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},m.ShaderAttribute[u(271)][u(264)]=function(t,e){const i=u;this[i(537)]=Math[i(181)](t*this[i(204)],this[i(537)]*this[i(204)]),this[i(242)]=Math.max(e*this[i(204)],this[i(242)]*this.componentSize)},m[u(272)][u(271)][u(359)]=function(){const t=u,e=this[t(577)];!e.updateRange&&(e[t(175)]={});const i=e.updateRange;i[t(433)]=this[t(537)],i[t(627)]=Math[t(181)](this[t(242)]-this[t(537)]+this.componentSize,this[t(419)][t(240)][t(306)]),e.needsUpdate=!0},m.ShaderAttribute.prototype[u(241)]=function(){const t=u;this[t(537)]=0,this[t(242)]=0},m[u(272)][u(271)][u(173)]=function(){const i=u;this[i(577)].usage=this.dynamicBuffer?t:e[i(450)]},m[u(272)][u(271)][u(174)]=function(t,e){const i=u;this[i(419)][i(174)](t,e),this[i(189)]()},m[u(272)].prototype[u(189)]=function(){const t=u;this[t(577)][t(240)]=this[t(419)][t(240)],this[t(577)][t(175)][t(433)]=0,this[t(577)].updateRange[t(627)]=-1,this.bufferAttribute[t(299)]=e[t(450)],this[t(577)][t(286)]=!0},m.ShaderAttribute[u(271)]._ensureTypedArray=function(t){const e=u;null!==this[e(419)]&&this[e(419)][e(585)]===t*this[e(204)]||(null!==this[e(419)]&&this[e(419)][e(585)]!==t?this.typedArray[e(473)](t):null===this[e(419)]&&(this[e(419)]=new(m[e(305)])(this[e(479)],t,this.componentSize)))},m[u(272)][u(271)][u(303)]=function(t){const s=u;if(this[s(184)](t),null!==this[s(577)])return this[s(577)][s(240)]=this[s(419)][s(240)],parseFloat(i)>=81&&(this.bufferAttribute[s(627)]=this.bufferAttribute[s(240)].length/this[s(577)][s(413)]),void(this[s(577)][s(286)]=!0);this[s(577)]=new(e[s(624)])(this.typedArray.array,this[s(204)]),this[s(577)].usage=this[s(455)]?e[s(307)]:n},m[u(272)][u(271)][u(423)]=function(){const t=u;return null===this.typedArray?0:this[t(419)][t(240)][t(306)]},m[u(389)]={defines:[u(466),u(316)][u(282)]("\n"),uniforms:["uniform float deltaTime;",u(200),u(246),u(509),"uniform float scale;"].join("\n"),attributes:[u(480),u(526),u(255),"attribute vec3 rotationCenter;",u(471),"attribute vec4 size;",u(469),u(222),"attribute vec4 opacity;"].join("\n"),varyings:[u(520),u(420),"    varying float vAngle;",u(342),u(553),"    varying vec4 vSpriteSheet;",u(342)][u(282)]("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {",u(439),"}","float when_lt(float x, float y) {",u(550),"}","float when_eq( float x, float y ) {",u(525),"}",u(244),u(238),"}","float when_le(float x, float y) {",u(261),"}",u(545),"    return a * b;","}","float or(float a, float b) {",u(172),"}"][u(282)]("\n"),unpackColor:[u(556),u(194),u(338),u(198),u(287),u(459),u(451),"   c.b = b / PACKED_COLOR_DIVISOR;",u(586),"}"][u(282)]("\n"),unpackRotationAxis:[u(507),"   vec3 c = vec3( 0.0 );",u(338),u(198),u(287),u(459),"   c.g = g / PACKED_COLOR_DIVISOR;",u(463),"   c *= vec3( 2.0 );",u(591),u(586),"}"][u(282)]("\n"),floatOverLifetime:[u(373),"    highp float value = 0.0;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );",u(310),u(532),u(620),"",u(505),u(617),u(309),u(208),u(626),"",u(424),"}"][u(282)]("\n"),colorOverLifetime:[u(489),u(436),u(376),u(275),"    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );",u(424),"}"][u(282)]("\n"),paramFetchingFunctions:["float getAlive() {",u(573),"}",u(258),u(199),"}","float getMaxAge() {",u(312),"}","float getWiggle() {",u(596),"}"].join("\n"),forceFetchingFunctions:[u(384),u(326),"}",u(366),u(266),"}",u(533),"   return acceleration.xyz * age;","}"].join("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES",u(379),u(283),"       float s = sin(angle);",u(500),u(397),"","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,",u(460),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",u(327),u(429),"",u(185),u(546),u(353),u(551),"",u(388),u(186),u(213),u(195),u(190),u(360),u(611),"      translated = rotationCenter - pos;",u(378),u(284),u(429),u(342)][u(282)]("\n"),rotateTexture:[u(315),"",u(523),u(522),"       float y = 1.0 - gl_PointCoord.y - 0.5;","       float c = cos( -vAngle );",u(191),"       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );",u(560),"",u(552),"        float framesX = vSpriteSheet.x;",u(330),u(531),u(348),u(279),u(288),u(560),"","    vec4 rotatedTexture = texture2D( tex, vUv );"][u(282)]("\n")},m[u(321)]={vertex:[m[u(389)][u(557)],m.shaderChunks.uniforms,m[u(389)].attributes,m[u(389)][u(452)],s.common,e[u(458)].logdepthbuf_pars_vertex,e[u(458)][u(320)],m[u(389)][u(369)],m.shaderChunks[u(356)],m[u(389)][u(295)],m[u(389)][u(501)],m.shaderChunks[u(212)],m[u(389)][u(228)],m[u(389)][u(628)],m.shaderChunks[u(214)],u(554),u(313),u(318),u(407),u(539),u(391),u(401),u(564),u(613),u(323),u(560),u(606),u(476),u(236),u(229),"    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;",u(398),"    force *= drag;",u(446),"    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES",u(372),u(209),u(249),u(560),"    #ifdef SHOULD_ROTATE_PARTICLES",u(332),u(560),u(468),"    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;",u(444),u(210),u(339),u(252),u(560),u(437),"    #ifdef COLORIZE",u(274),u(188),u(499),u(491),u(583),u(511),u(565),u(339),u(449),"    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );",u(593),"    #ifdef SHOULD_ROTATE_TEXTURE","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );",u(560),u(552),u(354),u(380),u(574),"        float totalFrames = textureAnimation.z;",u(535),u(602),"        float row = floor( (frameNumber - column) / framesX );","        float columnNorm = column / framesX;","        float rowNorm = row / framesY;",u(263),u(257),u(187),u(503),u(560),u(599),u(301),e[u(458)][u(516)],e[u(458)][u(562)],"}"].join("\n"),fragment:[m[u(389)][u(233)],e[u(458)][u(223)],s[u(308)],e[u(458)].logdepthbuf_pars_fragment,m[u(389)].varyings,m.shaderChunks[u(369)],u(554),"    vec3 outgoingLight = vColor.xyz;",u(365),"    #ifdef ALPHATEST","       if ( vColor.w < float(ALPHATEST) ) discard;",u(560),m[u(389)][u(470)],s.logdepthbuf_fragment,u(519),u(357),s[u(202)],"}"][u(282)]("\n")},m[u(456)]={types:{BOOLEAN:"boolean",STRING:u(300),NUMBER:u(484),OBJECT:u(432)},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){if(Array[u(427)](t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this.ensureTypedArg(t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=u;if(Array.isArray(t)){for(let s=t[n(306)]-1;s>=0;--s)if(void 0!==e&&t[s]instanceof e==!1)return i;return t}return this[n(225)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=u;e=e||3,i=i||3,!1===Array.isArray(t[n(352)])&&(t[n(352)]=[t._value]),!1===Array[n(427)](t._spread)&&(t[n(425)]=[t._spread]);const s=this[n(462)](t._value[n(306)],e,i),o=this[n(462)](t[n(425)].length,e,i),r=Math[n(292)](s,o);t[n(352)].length!==r&&(t[n(352)]=this[n(598)](t[n(352)],r)),t._spread.length!==r&&(t[n(425)]=this[n(598)](t[n(425)],r))},interpolateArray(t,e){const i=u,n=t[i(306)],s=[typeof t[0][i(440)]===i(251)?t[0][i(440)]():t[0]],o=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*o,n=Math[i(178)](e),a=Math.ceil(e),c=e-n;s[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return s[i(317)](typeof t[n-1][i(440)]===i(251)?t[n-1][i(440)]():t[n-1]),s},clamp:(t,e,i)=>Math[u(292)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[u(179)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(t,i,n){const s=u;let a,c=this[s(575)];return typeof t===c.NUMBER&&typeof i===c.NUMBER?t+(i-t)*n:t instanceof o&&i instanceof o?(a=t[s(440)](),a.x=this.lerp(t.x,i.x,n),a.y=this[s(311)](t.y,i.y,n),a):t instanceof e[s(504)]&&i instanceof e[s(504)]?(a=t[s(440)](),a.x=this[s(311)](t.x,i.x,n),a.y=this[s(311)](t.y,i.y,n),a.z=this[s(311)](t.z,i.z,n),a):t instanceof e[s(619)]&&i instanceof e[s(619)]?(a=t[s(440)](),a.x=this.lerp(t.x,i.x,n),a.y=this.lerp(t.y,i.y,n),a.z=this[s(311)](t.z,i.z,n),a.w=this.lerp(t.w,i.w,n),a):t instanceof e[s(438)]&&i instanceof r?(a=t.clone(),a.r=this[s(311)](t.r,i.r,n),a.g=this[s(311)](t.g,i.g,n),a.b=this[s(311)](t.b,i.b,n),a):void console[s(515)](s(386),t,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[u(394)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){const e=u;for(let i=0;i<t[e(306)]-1;++i)if(t[i]!==t[i+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[u(179)]()-.5),randomVector3(t,e,i,n,s){const o=u;let r=i.x+(Math[o(179)]()*n.x-.5*n.x),a=i.y+(Math[o(179)]()*n.y-.5*n.y),c=i.z+(Math[o(179)]()*n.z-.5*n.z);s&&(r=.5*-s.x+this[o(237)](r,s.x),a=.5*-s.y+this[o(237)](a,s.y),c=.5*-s.z+this[o(237)](c,s.z)),t[o(419)][o(182)](e,r,a,c)},randomColor(t,e,i,n){const s=u;let o=i.r+Math.random()*n.x,r=i.g+Math[s(179)]()*n.y,a=i.b+Math[s(179)]()*n.z;o=this[s(462)](o,0,1),r=this[s(462)](r,0,1),a=this[s(462)](a,0,1),t[s(419)][s(182)](e,o,r,a)},randomColorAsHex:function(){const t=u,i=new(e[t(438)]);return function(e,n,s,o){const r=t,a=s[r(306)],c=[];for(let t=0;t<a;++t){const e=o[t];i[r(304)](s[t]),i.r+=Math[r(179)]()*e.x-.5*e.x,i.g+=Math[r(179)]()*e.y-.5*e.y,i.b+=Math[r(179)]()*e.z-.5*e.z,i.r=this[r(462)](i.r,0,1),i.g=this[r(462)](i.g,0,1),i.b=this[r(462)](i.b,0,1),c[r(317)](i[r(400)]())}e[r(419)][r(351)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const s=u,o=i.clone();o[s(311)](n,Math[s(179)]()),t[s(419)].setVec3Components(e,o.x,o.y,o.z)},randomVector3OnSphere(t,e,i,n,s,o,r,a){const c=u;let h=2*Math.random()-1,l=6.2832*Math.random(),f=Math[c(371)](1-h*h),p=this[c(475)](n,s),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math[c(253)](l)*p,m=f*Math[c(510)](l)*p,g=h*p,d*=o.x,m*=o.y,g*=o.z,d+=i.x,m+=i.y,g+=i.z,t[c(419)].setVec3Components(e,d,m,g)},seededRandom(t){const e=1e4*Math[u(510)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,s,o,r){const a=u;let c=6.2832*Math[a(179)](),h=Math[a(394)](this[a(475)](n,s)),l=0,f=0,p=0;r&&(h=Math.round(h/r)*r),l=Math.cos(c)*h,f=Math[a(510)](c)*h,l*=o.x,f*=o.y,l+=i.x,f+=i.y,p+=i.z,t[a(419)][a(182)](e,l,f,p)},randomDirectionVector3OnSphere:function(){const t=u,i=new(e[t(504)]);return function(e,n,s,o,r,a,c,h){const u=t;i[u(304)](a),i.x-=s,i.y-=o,i.z-=r,i[u(302)]()[u(453)](-this[u(475)](c,h)),e[u(419)][u(182)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new a;return function(e,i,n,s,o,r,a,c){const h=p;t.copy(r),t.x-=n,t.y-=s,t.z-=o,t[h(302)]().multiplyScalar(-this[h(475)](a,c)),e[h(419)][h(182)](i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const t=u,i=new a,n=new(e[t(504)]),s=new r,o=new a(1,1,1);return function(e,r){const a=t;return i[a(304)](e)[a(302)](),n.copy(r)[a(302)](),i.x+=.5*-r.x+Math.random()*r.x,i.y+=.5*-r.y+Math[a(179)]()*r.y,i.z+=.5*-r.z+Math[a(179)]()*r.z,i.normalize().add(o).multiplyScalar(.5),s.setRGB(i.x,i.y,i.z),s[a(400)]()}}()},m.Group=function(t){const i=u,n=m[i(456)],s=n[i(575)];(t=n[i(422)](t,s[i(243)],{}))[i(235)]=n[i(422)](t[i(235)],s[i(243)],{}),this[i(530)]=e[i(405)][i(498)](),this[i(347)]=n[i(422)](t[i(347)],s.NUMBER,.016),this[i(235)]=n.ensureInstanceOf(t.texture[i(196)],e[i(415)],null),this[i(385)]=n[i(225)](t[i(235)][i(418)],e[i(280)],new(e[i(280)])(1,1)),this[i(381)]=n[i(422)](t[i(235)][i(218)],s[i(517)],this.textureFrames.x*this[i(385)].y),this[i(324)]=n[i(422)](t[i(235)][i(314)],s[i(517)],1),this.textureFrames.max(new(e[i(280)])(1,1)),this[i(417)]=n[i(422)](t[i(417)],s[i(259)],!0),this[i(563)]=n[i(422)](t[i(563)],s[i(259)],!0),this.maxParticleCount=n[i(422)](t.maxParticleCount,s[i(517)],null),this[i(290)]=n.ensureTypedArg(t[i(290)],s[i(517)],c),this[i(618)]=n[i(422)](t[i(618)],s.BOOLEAN,!0),this[i(370)]=parseFloat(n[i(422)](t[i(370)],s[i(517)],0)),this.depthWrite=n[i(422)](t.depthWrite,s[i(259)],!1),this[i(269)]=n[i(422)](t.depthTest,s[i(259)],!0),this[i(406)]=n[i(422)](t[i(406)],s[i(259)],!0),this[i(542)]=n[i(422)](t[i(542)],s[i(517)],300),this[i(343)]=[],this.emitterIDs=[],this._pool=[],this[i(568)]=null,this[i(421)]=0,this[i(296)]=!1,this[i(435)]=!1,this.particleCount=0,this[i(233)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new(e[i(619)])(this[i(385)].x,this[i(385)].y,this[i(381)],Math[i(292)](Math[i(394)](this[i(324)]),1))},fogColor:{type:"c",value:this[i(406)]?new r:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this[i(557)]={HAS_PERSPECTIVE:this[i(417)],COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:m[i(289)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(385)].x>1||this.textureFrames.y>1},this[i(529)]={position:new(m[i(272)])("v3",!0),acceleration:new m.ShaderAttribute("v4",!0),velocity:new m.ShaderAttribute("v3",!0),rotation:new m.ShaderAttribute("v4",!0),rotationCenter:new(m[i(272)])("v3",!0),params:new m.ShaderAttribute("v4",!0),size:new m.ShaderAttribute("v4",!0),angle:new m.ShaderAttribute("v4",!0),color:new m.ShaderAttribute("v4",!0),opacity:new(m[i(272)])("v4",!0)},this[i(293)]=Object[i(387)](this[i(529)]),this[i(207)]=this.attributeKeys.length,this[i(329)]=new h({uniforms:this[i(233)],vertexShader:m[i(321)][i(197)],fragmentShader:m.shaders[i(367)],blending:this.blending,transparent:this.transparent,alphaTest:this[i(370)],depthWrite:this[i(495)],depthTest:this[i(269)],defines:this[i(557)],fog:this[i(406)]}),this.geometry=new(e[i(536)]),this[i(412)]=new(e[i(358)])(this.geometry,this.material),null===this[i(467)]&&console[i(515)](i(325))},m[u(610)][u(608)]=m[u(610)],m[u(610)][u(271)][u(524)]=function(){const t=u;let e,i=this[t(343)],n=i[t(306)]-1,s=this[t(557)];for(;n>=0;--n)e=i[n],!s.SHOULD_CALCULATE_SPRITE&&(s[t(487)]=s[t(487)]||!!Math.max(Math[t(292)][t(285)](null,e[t(485)].value),Math[t(292)][t(285)](null,e[t(485)][t(245)]))),s.SHOULD_ROTATE_PARTICLES=s[t(341)]||!!Math[t(292)](e[t(205)][t(485)],e.rotation[t(590)]),s[t(448)]=s[t(448)]||!!Math[t(292)](e[t(203)][t(196)],e[t(203)][t(245)]);this[t(329)].needsUpdate=!0},m.Group[u(271)][u(587)]=function(){const t=u;let e,i,n=this[t(529)],s=this[t(250)],o=s.attributes;for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=o[r],i?i.array=e.typedArray.array:s.setAttribute(r,e[t(577)]),e[t(577)].needsUpdate=!0);this[t(250)][t(434)](0,this[t(335)])},m[u(610)][u(271)][u(345)]=function(t){const e=u;if(t instanceof m[e(211)]==!1)return void console.error(e(592),t);if(this[e(600)][e(404)](t[e(530)])>-1)return void console[e(559)](e(584));if(null!==t[e(402)])return void console[e(559)]("Emitter already belongs to another group. Will not add to requested group.");const i=this.attributes,n=this[e(335)],s=n+t[e(335)];this[e(335)]=s,null!==this[e(467)]&&this[e(335)]>this[e(467)]&&console[e(515)](e(582),this[e(335)],e(488),this.maxParticleCount),t[e(298)](t[e(492)][e(352)]+t[e(492)]._spread),t[e(541)](this.attributeKeys),t[e(578)](n),t[e(402)]=this,t[e(529)]=this[e(529)];for(const o in i)i[e(607)](o)&&i[o][e(303)](null!==this[e(467)]?this[e(467)]:this[e(335)]);for(let o=n;o<s;++o)t._assignPositionValue(o),t[e(581)](o,e(256)),t[e(581)](o,e(461)),t[e(430)](o,e(183)),t[e(430)](o,e(585)),t[e(180)](o),t[e(278)](o),t._assignParamsValue(o),t[e(579)](o);return this[e(587)](),this[e(343)][e(317)](t),this[e(600)][e(317)](t.uuid),this._updateDefines(t),this[e(329)].needsUpdate=!0,this[e(250)][e(286)]=!0,this._attributesNeedRefresh=!0,this},m[u(610)][u(271)][u(474)]=function(t){const e=u,i=this.emitterIDs.indexOf(t[e(530)]);if(t instanceof m[e(211)]==!1)return void console[e(559)]("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(-1===i)return void console[e(559)](e(409));const n=t[e(594)],s=n+t[e(335)],o=this.attributes[e(615)][e(419)];for(let r=n;r<s;++r)o[e(240)][4*r]=0,o[e(240)][4*r+1]=0;this[e(343)][e(174)](i,1),this[e(600)][e(174)](i,1);for(const r in this[e(529)])this[e(529)][e(607)](r)&&this[e(529)][r][e(174)](n,s);this[e(335)]-=t[e(335)],t._onRemove(),this[e(296)]=!0},m[u(610)][u(271)][u(569)]=function(){const t=u,e=this[t(234)],i=this[t(421)];if(e[t(306)])return e[t(247)]();if(i){const e=new(m[t(211)])(this[t(568)]);return this[t(345)](e),e}return null},m[u(610)][u(271)][u(572)]=function(t){const e=u;if(t instanceof m[e(211)]!=!1)return t[e(472)](),this[e(234)][e(512)](t),this;console[e(559)](e(443),t)},m.Group[u(271)][u(192)]=function(){return this[u(234)]},m[u(610)].prototype[u(580)]=function(t,e,i){const n=u;let s;this[n(568)]=e,this[n(421)]=!!i;for(let o=0;o<t;++o)s=Array.isArray(e)?new(m[n(211)])(e[o]):new m.Emitter(e),this.addEmitter(s),this[n(572)](s);return this},m.Group.prototype[u(597)]=function(t){const i=u,n=this.getFromPool(),s=this;if(null!==n)return t instanceof e[i(504)]&&(n[i(276)][i(196)][i(304)](t),n[i(276)][i(196)]=n[i(276)][i(196)]),n[i(319)](),setTimeout((()=>{const t=i;n[t(346)](),s[t(572)](n)}),1e3*Math[i(292)](n.duration,n[i(492)][i(196)]+n[i(492)][i(245)])),this;console.log(i(392))},m[u(610)][u(271)].triggerPoolEmitter=function(t,e){const i=u;if(typeof t===i(484)&&t>1)for(let n=0;n<t;++n)this[i(597)](e);else this[i(597)](e);return this},m[u(610)][u(271)][u(543)]=function(t){const e=u;this[e(233)][e(566)][e(196)]+=t,this[e(233)][e(377)].value=t},m[u(610)][u(271)][u(457)]=function(){const t=u;let e=this.attributeKeys,i=this[t(207)]-1,n=this[t(529)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},m[u(610)][u(271)][u(328)]=function(t){const e=u;let i,n,s,o=this.attributeKeys,r=this.attributeCount-1,a=this[e(529)],c=t.bufferUpdateRanges;for(;r>=0;--r)i=o[r],n=c[i],s=a[i],s.setUpdateRange(n[e(181)],n[e(292)]),s.flagUpdate()},m[u(610)][u(271)][u(232)]=function(t){const e=u;var i=this.emitters,n=i[e(306)],s=t||this[e(347)],o=this[e(293)],r=this[e(529)];if(this[e(543)](s),this[e(457)](),0!==n||!1!==this[e(296)]||!1!==this[e(435)]){for(var a,c=0;c<n;++c)(a=i[c])[e(232)](s),this[e(328)](a);if(!0===this._attributesNeedDynamicReset){for(c=this[e(207)]-1;c>=0;--c)r[o[c]][e(173)]();this[e(435)]=!1}if(!0===this[e(296)]){for(c=this[e(207)]-1;c>=0;--c)r[o[c]][e(189)]();this[e(296)]=!1,this[e(435)]=!0}}},m[u(610)].prototype.dispose=function(){const t=u;return this[t(250)][t(483)](),this[t(329)][t(483)](),this},m.Emitter=function(t){const i=u,n=m[i(456)],s=n.types,o=m[i(289)];(t=n[i(422)](t,s.OBJECT,{})).position=n[i(422)](t[i(276)],s[i(243)],{}),t.velocity=n.ensureTypedArg(t[i(256)],s[i(243)],{}),t.acceleration=n[i(422)](t[i(461)],s[i(243)],{}),t[i(486)]=n.ensureTypedArg(t[i(486)],s[i(243)],{}),t[i(493)]=n[i(422)](t[i(493)],s[i(243)],{}),t[i(205)]=n.ensureTypedArg(t[i(205)],s[i(243)],{}),t.color=n.ensureTypedArg(t[i(547)],s.OBJECT,{}),t[i(183)]=n.ensureTypedArg(t[i(183)],s[i(243)],{}),t.size=n[i(422)](t[i(585)],s[i(243)],{}),t[i(485)]=n[i(422)](t[i(485)],s[i(243)],{}),t[i(203)]=n[i(422)](t.wiggle,s[i(243)],{}),t[i(492)]=n[i(422)](t[i(492)],s[i(243)],{}),t[i(368)]&&console[i(515)](i(555)),this.uuid=e[i(405)][i(498)](),this[i(362)]=n[i(422)](t[i(362)],s.NUMBER,m[i(454)][i(176)]),this[i(276)]={_value:n[i(225)](t.position[i(196)],a,new(e[i(504)])),_spread:n[i(225)](t[i(276)][i(245)],e[i(504)],new(e[i(504)])),_spreadClamp:n.ensureInstanceOf(t[i(276)][i(291)],e[i(504)],new(e[i(504)])),_distribution:n[i(422)](t.position.distribution,s[i(517)],this[i(362)]),_randomise:n[i(422)](t.position.randomise,s.BOOLEAN,!1),_radius:n[i(422)](t[i(276)].radius,s[i(517)],10),_radiusScale:n.ensureInstanceOf(t.position.radiusScale,e[i(504)],new(e[i(504)])(1,1,1)),_distributionClamp:n[i(422)](t[i(276)][i(364)],s[i(517)],0)},this.velocity={_value:n[i(225)](t[i(256)][i(196)],e[i(504)],new(e[i(504)])),_spread:n.ensureInstanceOf(t[i(256)].spread,e[i(504)],new(e[i(504)])),_distribution:n[i(422)](t[i(256)].distribution,s.NUMBER,this[i(362)]),_randomise:n[i(422)](t.position[i(395)],s.BOOLEAN,!1)},this[i(461)]={_value:n[i(225)](t[i(461)][i(196)],e[i(504)],new(e[i(504)])),_spread:n[i(225)](t.acceleration[i(245)],a,new(e[i(504)])),_distribution:n[i(422)](t[i(461)].distribution,s[i(517)],this[i(362)]),_randomise:n[i(422)](t.position.randomise,s[i(259)],!1)},this[i(493)]={_value:n[i(422)](t[i(493)][i(196)],s[i(517)],0),_spread:n[i(422)](t.drag[i(245)],s.NUMBER,0),_randomise:n[i(422)](t[i(276)][i(395)],s.BOOLEAN,!1)},this[i(203)]={_value:n[i(422)](t[i(203)][i(196)],s[i(517)],0),_spread:n[i(422)](t.wiggle.spread,s[i(517)],0)},this[i(205)]={_axis:n[i(225)](t[i(205)][i(603)],e[i(504)],new(e[i(504)])(0,1,0)),_axisSpread:n[i(225)](t[i(205)][i(622)],e[i(504)],new(e[i(504)])),_angle:n[i(422)](t[i(205)][i(485)],s[i(517)],0),_angleSpread:n[i(422)](t[i(205)][i(590)],s[i(517)],0),_static:n[i(422)](t.rotation.static,s.BOOLEAN,!1),_center:n[i(225)](t.rotation[i(260)],e[i(504)],this[i(276)]._value[i(440)]()),_randomise:n[i(422)](t.position[i(395)],s[i(259)],!1)},this[i(492)]={_value:n[i(422)](t[i(492)][i(196)],s[i(517)],2),_spread:n.ensureTypedArg(t[i(492)][i(245)],s.NUMBER,0)},this[i(547)]={_value:n[i(431)](t[i(547)][i(196)],r,new(e[i(438)])),_spread:n[i(431)](t[i(547)][i(245)],e[i(504)],new(e[i(504)])),_randomise:n[i(422)](t[i(276)][i(395)],s.BOOLEAN,!1)},this.opacity={_value:n.ensureArrayTypedArg(t[i(183)][i(196)],s[i(517)],1),_spread:n[i(408)](t[i(183)].spread,s.NUMBER,0),_randomise:n.ensureTypedArg(t[i(276)].randomise,s[i(259)],!1)},this.size={_value:n[i(408)](t[i(585)][i(196)],s[i(517)],1),_spread:n.ensureArrayTypedArg(t[i(585)].spread,s[i(517)],0),_randomise:n.ensureTypedArg(t[i(276)][i(395)],s.BOOLEAN,!1)},this[i(485)]={_value:n.ensureArrayTypedArg(t[i(485)].value,s[i(517)],0),_spread:n[i(408)](t[i(485)][i(245)],s.NUMBER,0),_randomise:n.ensureTypedArg(t[i(276)][i(395)],s[i(259)],!1)},this[i(335)]=n[i(422)](t[i(335)],s[i(517)],100),this.duration=n[i(422)](t[i(534)],s[i(517)],null),this[i(494)]=n[i(422)](t[i(494)],s[i(259)],!1),this[i(521)]=n[i(422)](t.activeMultiplier,s[i(517)],1),this[i(297)]=n[i(422)](t[i(297)],s[i(517)],1),this[i(576)]=n.ensureTypedArg(t[i(576)],s.BOOLEAN,!0),this[i(375)]=0,this.activationIndex=0,this[i(594)]=0,this[i(277)]=0,this.age=0,this[i(399)]=0,this[i(402)]=null,this[i(529)]=null,this.paramsArray=null,this[i(478)]={position:n[i(422)](t[i(276)][i(395)],s[i(259)],!1)||n[i(422)](t[i(486)][i(395)],s[i(259)],!1),velocity:n[i(422)](t.velocity.randomise,s[i(259)],!1),acceleration:n.ensureTypedArg(t.acceleration.randomise,s[i(259)],!1)||n[i(422)](t.drag[i(395)],s[i(259)],!1),rotation:n[i(422)](t.rotation[i(395)],s[i(259)],!1),rotationCenter:n.ensureTypedArg(t[i(205)].randomise,s[i(259)],!1),size:n[i(422)](t[i(585)][i(395)],s.BOOLEAN,!1),color:n.ensureTypedArg(t[i(547)].randomise,s[i(259)],!1),opacity:n[i(422)](t[i(183)][i(395)],s[i(259)],!1),angle:n[i(422)](t[i(485)][i(395)],s.BOOLEAN,!1)},this[i(281)]={},this[i(294)]={},this[i(340)]={maxAge:i(615),position:i(276),velocity:"velocity",acceleration:"acceleration",drag:i(461),wiggle:i(615),rotation:"rotation",size:i(585),color:"color",opacity:i(183),angle:i(485)};for(const e in this[i(340)])this[i(340)][i(607)](e)&&(this[i(294)][this.updateMap[e]]=0,this[i(281)][this[i(340)][e]]=!1,this[i(337)](this[e],e));this[i(631)]={},this[i(293)]=null,this[i(207)]=0,n[i(239)](this[i(547)],o,o),n.ensureValueOverLifetimeCompliance(this[i(183)],o,o),n[i(239)](this[i(585)],o,o),n.ensureValueOverLifetimeCompliance(this[i(485)],o,o)},m[u(211)][u(608)]=m.Emitter,m.Emitter[u(271)]._createGetterSetters=function(t,e){const i=u,n=this;for(const s in t)if(t[i(607)](s)){const o=s[i(589)]("_","");Object[i(558)](t,o,{get:function(t){return function(){return this[t]}}(s),set:function(t){return function(i){const s=p,o=n[s(340)][e],r=this[t],a=m[s(289)];t===s(445)?(n.updateFlags[s(625)]=!0,n[s(294)].rotationCenter=0):t===s(571)?n.resetFlags[o]=i:(n.updateFlags[o]=!0,n[s(294)][o]=0),n.group[s(524)](),this[t]=i,Array.isArray(r)&&m[s(456)][s(239)](n[e],a,a)}}(s)})}},m[u(211)].prototype._setBufferUpdateRanges=function(t){const e=u;this[e(293)]=t,this[e(207)]=t[e(306)];for(let i=this.attributeCount-1;i>=0;--i)this.bufferUpdateRanges[t[i]]={min:Number[e(614)],max:Number[e(544)]}},m[u(211)][u(271)]._calculatePPSValue=function(t){const e=u,i=this.particleCount;this[e(534)]?this[e(375)]=i/(t<this.duration?t:this[e(534)]):this.particlesPerSecond=i/t},m[u(211)].prototype[u(578)]=function(t){const e=u;this.attributeOffset=t,this[e(331)]=t,this.activationEnd=t+this[e(335)]},m[u(211)].prototype._assignValue=function(t,e){const i=u;switch(t){case"position":this[i(177)](e);break;case i(256):case i(461):this[i(581)](e,t);break;case"size":case i(183):this[i(430)](e,t);break;case i(485):this._assignAngleValue(e);break;case i(615):this[i(609)](e);break;case"rotation":this[i(278)](e);break;case i(547):this[i(579)](e)}},m.Emitter[u(271)][u(177)]=function(t){const e=u,i=m[e(454)],n=m.utils,s=this.position,o=this[e(529)][e(276)],r=s._value,a=s[e(425)];switch(s[e(254)]){case i[e(176)]:n[e(621)](o,t,r,a,s[e(567)]);break;case i.SPHERE:n[e(527)](o,t,r,s[e(221)],s[e(425)].x,s._radiusScale,s[e(567)].x,s[e(344)]||this.particleCount);break;case i[e(361)]:n[e(414)](o,t,r,s[e(221)],s[e(425)].x,s[e(220)],s[e(567)].x);break;case i.LINE:n.randomVector3OnLine(o,t,r,a)}},m[u(211)][u(271)][u(581)]=function(t,e){const i=u;let n,s,o,r,a,c=m[i(454)],h=m[i(456)],l=this[e],f=l._value,p=l._spread;switch(l[i(254)]){case c[i(176)]:h[i(621)](this[i(529)][e],t,f,p);break;case c.SPHERE:n=this.attributes[i(276)][i(419)].array,a=3*t,s=n[a],o=n[a+1],r=n[a+2],h[i(201)](this[i(529)][e],t,s,o,r,this.position[i(352)],l[i(352)].x,l[i(425)].x);break;case c[i(361)]:n=this.attributes.position[i(419)][i(240)],a=3*t,s=n[a],o=n[a+1],r=n[a+2],h[i(616)](this[i(529)][e],t,s,o,r,this.position._value,l[i(352)].x,l[i(425)].x);break;case c[i(623)]:h[i(561)](this[i(529)][e],t,f,p)}if(e===i(461)){const e=h[i(462)](h[i(475)](this[i(493)]._value,this.drag[i(425)]),0,1);this[i(529)][i(461)].typedArray[i(240)][4*t+3]=e}},m[u(211)][u(271)][u(430)]=function(t,e){const i=u;let n,s=this[i(529)][e][i(419)],o=this[e],r=m.utils;r[i(363)](o._value)&&r[i(363)](o[i(425)])?(n=Math.abs(r.randomFloat(o[i(352)][0],o[i(425)][0])),s[i(351)](t,n,n,n,n)):s[i(351)](t,Math.abs(r[i(475)](o._value[0],o[i(425)][0])),Math[i(394)](r[i(475)](o[i(352)][1],o[i(425)][1])),Math[i(394)](r[i(475)](o[i(352)][2],o._spread[2])),Math[i(394)](r[i(475)](o._value[3],o._spread[3])))},m.Emitter[u(271)][u(180)]=function(t){const e=u;let i,n=this[e(529)][e(485)][e(419)],s=this[e(485)],o=m[e(456)];o[e(363)](s._value)&&o.arrayValuesAreEqual(s[e(425)])?(i=o[e(475)](s._value[0],s._spread[0]),n.setVec4Components(t,i,i,i,i)):n[e(351)](t,o[e(475)](s[e(352)][0],s[e(425)][0]),o[e(475)](s[e(352)][1],s[e(425)][1]),o.randomFloat(s[e(352)][2],s[e(425)][2]),o[e(475)](s._value[3],s._spread[3]))},m.Emitter.prototype[u(609)]=function(t){const e=u;this[e(529)][e(615)][e(419)][e(351)](t,this[e(494)]?1:0,0,Math[e(394)](m.utils[e(475)](this[e(492)][e(352)],this[e(492)][e(425)])),m[e(456)][e(475)](this[e(203)][e(352)],this[e(203)][e(425)]))},m[u(211)][u(271)][u(278)]=function(t){const e=u;this[e(529)][e(205)][e(419)][e(182)](t,m[e(456)][e(595)](this[e(205)][e(216)],this[e(205)]._axisSpread),m[e(456)][e(475)](this.rotation[e(193)],this[e(205)][e(374)]),this[e(205)]._static?0:1),this[e(529)][e(625)].typedArray[e(441)](t,this[e(205)][e(605)])},m.Emitter[u(271)]._assignColorValue=function(t){const e=u;m.utils[e(224)](this[e(529)][e(547)],t,this.color[e(352)],this.color._spread)},m[u(211)][u(271)][u(442)]=function(t){const e=u;let i,n,s=this[e(478)],o=this[e(281)],r=this.updateCounts,a=this[e(293)];for(let c=this[e(207)]-1;c>=0;--c)i=a[c],n=o[i],!0!==s[i]&&!0!==n||(this._assignValue(i,t),this[e(497)](i,t),!0===n&&r[i]===this[e(335)]?(o[i]=!1,r[i]=0):1==n&&++r[i])},m[u(211)][u(271)][u(497)]=function(t,e){const i=u,n=this[i(631)][t];n[i(181)]=Math[i(181)](e,n[i(181)]),n[i(292)]=Math[i(292)](e,n[i(292)])},m[u(211)].prototype._resetBufferRanges=function(){const t=u;let e,i=this[t(631)],n=this[t(506)],s=this[t(514)]-1;for(;s>=0;--s)e=n[s],i[e][t(181)]=Number[t(614)],i[e][t(292)]=Number[t(544)]},m.Emitter[u(271)]._onRemove=function(){const t=u;this[t(375)]=0,this[t(594)]=0,this.activationIndex=0,this[t(399)]=0,this[t(402)]=null,this[t(529)]=null,this.paramsArray=null,this[t(270)]=0},m[u(211)][u(271)][u(601)]=function(){--this.activeParticleCount},m[u(211)][u(271)][u(231)]=function(){++this.activeParticleCount},m[u(211)][u(271)]._checkParticleAges=function(t,e,i,n){const s=u;for(var o,r,a,c,h=e-1;h>=t;--h)0!==(c=i[o=4*h])&&(a=i[o+1],r=i[o+2],1===this.direction?(a+=n)>=r&&(a=0,c=0,this[s(601)]()):(a-=n)<=0&&(a=r,c=0,this[s(601)]()),i[o]=c,i[o+1]=a,this[s(497)](s(615),h))},m.Emitter[u(271)][u(268)]=function(t,e,i,n){const s=u,o=this[s(297)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this[s(335)]||(this[s(231)](),i[r]=1,this[s(442)](c),a=n*(c-t),i[r+1]=-1===o?i[r+2]-a:a,this[s(497)]("params",c))},m[u(211)][u(271)][u(232)]=function(t){const e=u;if(this[e(494)])return;null===this[e(481)]&&(this[e(481)]=this[e(529)][e(615)][e(419)][e(240)]);const i=this[e(594)],n=i+this[e(335)],s=this[e(481)],o=this[e(375)]*this[e(521)]*t,r=this[e(331)];if(this[e(457)](),this._checkParticleAges(i,n,s,t),!1===this[e(576)])return void(this.age=0);if(null!==this.duration&&this[e(270)]>this[e(534)])return this[e(576)]=!1,void(this[e(270)]=0);const a=1===this.particleCount?r:0|r,c=Math[e(181)](a+o,this[e(465)]),h=c-this[e(331)]|0,l=h>0?t/h:0;this[e(268)](a,c,s,l),this.activationIndex+=o,this[e(331)]>n&&(this[e(331)]=i),this[e(270)]+=t},m[u(211)][u(271)][u(472)]=function(t){const e=u;if(this.age=0,this[e(576)]=!1,!0===t){const t=this[e(594)],s=t+this[e(335)],o=this[e(481)],r=this[e(529)].params.bufferAttribute;for(var i,n=s-1;n>=t;--n)o[i=4*n]=0,o[i+1]=0;r[e(175)][e(433)]=0,r[e(175)].count=-1,r[e(286)]=!0}return this},m[u(211)][u(271)][u(319)]=function(){return this[u(576)]=!0,this},m[u(211)][u(271)].disable=function(){return this[u(576)]=!1,this},m.Emitter[u(271)][u(588)]=function(){const t=u;return null!==this.group?this.group.removeEmitter(this):console[t(559)](t(428)),this};const g=m;function y(t){function e(t){const i=p;if(typeof t===i(300))return function(t){}[i(608)](i(355))[i(285)](i(490));1!==(""+t/t)[i(306)]||t%20==0?function(){return!0}[i(608)](i(508)+i(226))[i(265)](i(334)):function(){return!1}.constructor(i(508)+i(226))[i(285)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{g as _};

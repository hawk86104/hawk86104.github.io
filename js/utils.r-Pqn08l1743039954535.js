import"./@fesjs.q_HvOfeM1743039954535.js";import{_ as t}from"./jszip.5Yd3mfTB1743039954535.js";import{F as n}from"./file-saver.UOcEpHlD1743039954535.js";import{_ as e,aK as s,z as o}from"./three.XuMWWlrU1743039954535.js";const r=a;function a(t,n){const e=m();return a=function(t,n){return e[t-=469]},a(t,n)}!function(t,n){const e=a,s=m();for(;;)try{if(918923===-parseInt(e(521))/1+-parseInt(e(553))/2*(parseInt(e(535))/3)+-parseInt(e(568))/4*(parseInt(e(561))/5)+-parseInt(e(560))/6*(-parseInt(e(474))/7)+parseInt(e(487))/8*(parseInt(e(532))/9)+parseInt(e(563))/10*(-parseInt(e(471))/11)+parseInt(e(550))/12)break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const c=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[a(497)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){c(this,(function(){const t=a,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(547),"i"),s=y("init");n[t(503)](s+t(499))&&e[t(503)](s+t(519))?y():s("0")}))()}();const i=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[a(497)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function u(t){const n=new o;return new Promise(((e,s)=>{const o=a;n[o(567)](t,(t=>e(JSON[o(501)](t))),void 0,(t=>s(t)))}))}i(void 0,(function(){const t=a;let n;try{n=Function(t(484)+t(490)+");")()}catch(o){n=window}const e=n.console=n[t(475)]||{},s=[t(558),t(523),t(515),"error","exception",t(482),t(477)];for(let r=0;r<s[t(565)];r++){const n=i[t(557)][t(549)][t(470)](i),o=s[r],a=e[o]||n;n[t(534)]=i[t(470)](i),n.toString=a[t(559)][t(470)](a),e[o]=n}}))(),e[r(489)][r(522)]=!0;class p extends e[r(544)]{constructor(t){super(t)}[r(567)](t,n,s,o){const a=r,c=new(e[a(541)])(this[a(562)]);c[a(551)]("json"),c.load(t,(t=>n&&n(t)),s,o)}}async function f(t){const n=r,s=new(e[n(541)]);return new Promise(((e,o)=>{const a=n;s.setResponseType(a(469)),s[a(567)](t,(n=>{const s=a,c=new FileReader;c[s(543)]=()=>{const n=s,o=function(t){const n=r,e=t.split(".")[n(518)]()[n(509)]();return{jpg:n(508),jpeg:n(508),png:n(493),gif:n(520),bmp:n(516),webp:"image/webp"}[e]||"application/octet-stream"}(t),a=c[n(533)][n(529)](",")[1];e(n(554)+o+n(566)+a)},c[s(552)]=t=>{o(t)},c[s(479)](n)}),void 0,(t=>o(t)))}))}class l extends s{constructor(t){super(t)}[r(567)](n,e,s,a){const c=r,i=new o(this[c(562)]);i.setResponseType(c(469)),i.load(n,(async n=>{const s=c;try{const o=await t[s(488)](n);e&&e(o)}catch(o){a&&a(o)}}),s,a)}}const g=t=>{const n=r,e=t[n(500)](0,15),s=n(491),o=n(537),a=n(556),c=n(555),i=n(548),u=n(570);return s[n(496)](e)||o[n(496)](e)?"JPEG":"data:image/png;base64,"[n(496)](e)||a[n(496)](e)?"PNG":"data:image/gif;base64,"[n(496)](e)||c[n(496)](e)?n(495):i[n(496)](e||u.startsWith(e))?n(481):n(542)};function m(){const t=["blob","bind","46871oHmnYl","url:","stateObject","28JwMZFs","console","config.zip","trace","then","readAsDataURL","catch","WEBP","table","get","return (function() ","files","gger","751000ixfgEK","loadAsync","Cache",'{}.constructor("return this")( )',"data:image/jpeg;base64,","scene","image/png","slice","GIF","startsWith","apply","counter","chain","substring","parse","url:images/","test","endsWith","app.json","BufferGeometry","uuid","image/jpeg","toLowerCase","toUpperCase","url","name","string","data","info","image/bmp",".json","pop","input","image/gif","1674801rOxzZG","enabled","warn","geometries","data:image/","action","error","debu","split","stringify","push","18XnyHcs","result","__proto__","91005kkPBqt","type","data:image/JPEG;base64,","folder","async","file","FileLoader","Unknown","onloadend","Loader","forEach","url:geometries/","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","data:image/webp;base64,","prototype","35825508bgMMly","setResponseType","onerror","50uzYFDZ","data:","data:image/GIF;base64,","data:image/PNG;base64,","constructor","log","toString","1648032gStsdL","185DEqvJN","manager","210nKPVAD","call","length",";base64,","load","89764WzFHsl","images","data:image/WEBP;base64,"];return(m=function(){return t})()}const d=e=>{const s=r,o=[];e[s(492)][s(524)]&&e[s(492)][s(524)][s(545)]((t=>{const n=s;t[n(536)]===n(506)&&(o.push({uuid:t[n(507)],data:t[n(514)]}),t.data=n(546)+t[n(507)]+".json")}));const a=[];e[s(492)][s(569)]&&e[s(492)][s(569)].forEach((t=>{const n=s;t[n(511)]&&(a[n(531)]({uuid:t[n(507)],url:t[n(511)]}),t[n(511)][n(536)]?t.url="url:images/"+t[n(507)]+"."+t[n(511)][n(536)]+n(517):t[n(511)]=n(502)+t[n(507)]+"."+g(t[n(511)]))}));const c=new t;if(o[s(565)]){const t=c[s(538)]("geometries");o[s(545)]((n=>{const e=s;t[e(540)](n[e(507)]+e(517),JSON.stringify(n.data))}))}if(a.length){const t=c[s(538)]("images");a.forEach((n=>{const e=s;n[e(511)].type?t[e(540)](n[e(507)]+"."+n[e(511)][e(536)]+".json",JSON[e(530)](n[e(511)])):t[e(540)](n[e(507)]+"."+g(n[e(511)]),n[e(511)][e(529)](";base64,").pop(),{base64:!0})}))}const i=JSON[s(530)](e);return c.file(s(505),i),c.generateAsync({type:"blob"}).then((t=>{const e=s;n.saveAs(t,e(476))}))},h=(t,n,e)=>{const s=r;t[s(524)]<=0&&t[s(569)]<=0&&e(n)},b=(n,e)=>{const s=r;let o=null;return t[s(488)](n)[s(478)]((t=>{const n=s;t[n(485)][n(505)]?t[n(485)]["app.json"][n(539)](n(513))[n(478)]((s=>{const a=n;o=JSON.parse(s);const c=(t=>{const n=r,e={geometries:0,images:0};return t[n(492)][n(524)]?.[n(545)]((t=>{const s=n;t[s(514)][s(496)](s(472))&&e[s(524)]++})),t[n(492)].images?.[n(545)]((t=>{const s=n;t[s(511)][s(496)](s(472))&&e[s(569)]++})),e})(o);h(c,o,e),o.scene.geometries?.[a(545)]((n=>{const s=a;n[s(514)][s(496)]("url:")&&t.files[n[s(514)].slice(4)][s(539)](s(513))[s(478)]((t=>{const r=s;n.data=JSON[r(501)](t),c[r(524)]--,h(c,o,e)}))})),o[a(492)][a(569)]?.[a(545)]((n=>{const s=a;if(n[s(511)].startsWith("url:")){const r=n[s(511)][s(494)](4);r[s(504)](".json")?t[s(485)][r][s(539)](s(513))[s(478)]((t=>{const r=s;n[r(511)]=JSON.parse(t),c[r(569)]--,h(c,o,e)})):t[s(485)][r].async("base64").then((t=>{const a=s,i=r[a(529)]("."),u=i[i[a(565)]-1][a(510)]();n[a(511)]=a(525)+u+a(566)+t,c[a(569)]--,h(c,o,e)}))}}))})):console[n(527)]("非标准文件：不存在 app.json")}),(t=>{const e=s;console.error(n[e(512)]+": "+t.message)})),o};function y(t){function n(t){const e=a;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[e(497)](e(498));1!==(""+t/t).length||t%20==0?function(){return!0}[e(557)]("debu"+e(486))[e(564)](e(526)):function(){return!1}[e(557)](e(528)+e(486))[e(497)](e(473)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{p as J,l as Z,f as a,d as e,g,b as i,u as l};

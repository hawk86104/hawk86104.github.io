import"./@fesjs.W9B5RBCy1725236486446.js";import{_ as t}from"./jszip.F8iULAGn1725236486446.js";import{F as n}from"./file-saver.MJJQ8fc31725236486446.js";import{a6 as e,aH as s}from"./three.0IuNGJsA1725236486446.js";const o=c;!function(t,n){const e=c,s=u();for(;;)try{if(348127===-parseInt(e(240))/1*(parseInt(e(257))/2)+parseInt(e(223))/3+-parseInt(e(296))/4+parseInt(e(248))/5+parseInt(e(305))/6*(-parseInt(e(236))/7)+parseInt(e(246))/8+-parseInt(e(231))/9*(-parseInt(e(264))/10))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const r=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e[c(304)](n,arguments);return e=null,t}}:function(){};return t=!1,s}}();!function(){r(this,(function(){const t=c,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(309),"i"),s=h(t(241));n[t(226)](s+"chain")&&e[t(226)](s+t(316))?h():s("0")}))()}();const a=function(){let t=!0;return function(n,e){const s=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,s}}();async function i(t){const n=o,s=new(e[n(300)]);return new Promise(((e,o)=>{s[n(261)](t,(t=>e(JSON.parse(t))),void 0,(t=>o(t)))}))}function c(t,n){const e=u();return(c=function(t,n){return e[t-=223]})(t,n)}function u(){const t=["data:image/PNG;base64,","data:image/","input","readAsDataURL","info","data","warn","url","1410588pVlDJK","stateObject","config.zip","test","return (function() ","gger","generateAsync","counter","228195sopqAn","data:image/jpeg;base64,","image/gif","result","get","7uhxxxg","Unknown","exception","split","2PmhUba","init","folder","catch","data:image/png;base64,","push","1020048iJrNUY","async","1562240FHXBpX",".json","call","constructor","uuid","geometries","onloadend","trace",";base64,","569798dtCZrs","type","toLowerCase","parse","load","data:image/GIF;base64,","setResponseType","220CmMETh","debu","非标准文件：不存在 app.json","GIF","url:geometries/","stringify","string","slice","length","file","data:image/WEBP;base64,","forEach","Cache","error","data:image/webp;base64,","image/bmp","prototype","loadAsync","files","scene","log","then","substring","images","toString","endsWith","app.json","base64","startsWith","application/octet-stream","bind","onerror","283820SnhYKQ","data:","BufferGeometry","PNG","FileLoader","image/jpeg","while (true) {}","name","apply","2874480ColdvB","url:images/","console","WEBP","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","url:","blob","data:image/gif;base64,","enabled"];return(u=function(){return t})()}async function p(t){const n=o,s=new(e[n(300)]);return new Promise(((e,r)=>{const a=n;s[a(263)](a(311)),s.load(t,(n=>{const s=a,i=new FileReader;i[s(254)]=()=>{const n=s,r=function(t){const n=o,e=t.split(".").pop()[n(259)]();return{jpg:n(301),jpeg:n(301),png:"image/png",gif:n(233),bmp:n(279),webp:"image/webp"}[e]||n(293)}(t),a=i.result[n(239)](",")[1];e(n(297)+r+n(256)+a)},i.onerror=t=>{r(t)},i[s(317)](n)}),void 0,(t=>r(t)))}))}a(void 0,(function(){const t=c,n=function(){const t=c;let n;try{n=Function(t(227)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(307)]=n[t(307)]||{},s=[t(284),t(320),t(318),t(277),t(238),"table",t(255)];for(let o=0;o<s[t(272)];o++){const n=a.constructor[t(280)][t(294)](a),r=s[o],i=e[r]||n;n.__proto__=a[t(294)](a),n.toString=i[t(288)][t(294)](i),e[r]=n}}))(),e[o(276)][o(313)]=!0;const l=n=>{const e=o,r=new s;return r[e(263)](e(311)),new Promise(((s,o)=>{r[e(261)](n,(async n=>{s(await t.loadAsync(n))}),void 0,(t=>o(t)))}))},f=t=>{const n=o,e=t[n(286)](0,15),s=n(232),r=n(244),a=n(314),i=n(312),c=n(262),u=n(278),p=n(274);return s.startsWith(e)||"data:image/JPEG;base64,"[n(292)](e)?"JPEG":r[n(292)](e)||a.startsWith(e)?n(299):i[n(292)](e)||c[n(292)](e)?n(267):u.startsWith(e||p.startsWith(e))?n(308):n(237)},g=e=>{const s=o,r=[];e[s(283)][s(253)]&&e[s(283)].geometries[s(275)]((t=>{const n=s;t[n(258)]===n(298)&&(r[n(245)]({uuid:t[n(252)],data:t[n(319)]}),t.data=n(268)+t[n(252)]+n(249))}));const a=[];e[s(283)].images&&e[s(283)][s(287)][s(275)]((t=>{const n=s;t[n(321)]&&(a.push({uuid:t[n(252)],url:t.url}),t[n(321)].type?t.url=n(306)+t[n(252)]+"."+t[n(321)].type+".json":t[n(321)]="url:images/"+t[n(252)]+"."+f(t[n(321)]))}));const i=new t;if(r[s(272)]){const t=i.folder("geometries");r.forEach((n=>{const e=s;t[e(273)](n[e(252)]+e(249),JSON[e(269)](n[e(319)]))}))}if(a[s(272)]){const t=i[s(242)]("images");a[s(275)]((n=>{const e=s;n.url[e(258)]?t[e(273)](n[e(252)]+"."+n[e(321)].type+e(249),JSON.stringify(n[e(321)])):t[e(273)](n.uuid+"."+f(n[e(321)]),n[e(321)].split(e(256)).pop(),{base64:!0})}))}const c=JSON[s(269)](e);return i[s(273)]("app.json",c),i[s(229)]({type:s(311)})[s(285)]((t=>{const e=s;n.saveAs(t,e(225))}))},m=(t,n,e)=>{t.geometries<=0&&t.images<=0&&e(n)},d=(n,e)=>{const s=o;let r=null;return t[s(281)](n)[s(285)]((t=>{const n=s;t[n(282)][n(290)]?t[n(282)][n(290)][n(247)](n(270))[n(285)]((s=>{var a,i;const c=n;r=JSON[c(260)](s);const u=(t=>{var n,e;const s=o,r={geometries:0,images:0};return null==(n=t[s(283)][s(253)])||n[s(275)]((t=>{const n=s;t.data[n(292)](n(310))&&r[n(253)]++})),null==(e=t[s(283)][s(287)])||e[s(275)]((t=>{const n=s;t[n(321)][n(292)]("url:")&&r[n(287)]++})),r})(r);m(u,r,e),null==(a=r[c(283)].geometries)||a[c(275)]((n=>{const s=c;n[s(319)].startsWith("url:")&&t[s(282)][n.data[s(271)](4)].async(s(270))[s(285)]((t=>{const o=s;n[o(319)]=JSON.parse(t),u[o(253)]--,m(u,r,e)}))})),null==(i=r.scene.images)||i[c(275)]((n=>{const s=c;if(n.url[s(292)](s(310))){const o=n.url[s(271)](4);o[s(289)](".json")?t.files[o][s(247)](s(270))[s(285)]((t=>{const o=s;n.url=JSON.parse(t),u[o(287)]--,m(u,r,e)})):t[s(282)][o].async(s(291))[s(285)]((t=>{const a=s,i=o[a(239)]("."),c=i[i[a(272)]-1].toUpperCase();n[a(321)]=a(315)+c+";base64,"+t,u[a(287)]--,m(u,r,e)}))}}))})):console[n(277)](n(266))}),(t=>{const e=s;console.error(n[e(303)]+": "+t.message)})),r};function h(t){function n(t){const e=c;if("string"==typeof t)return function(t){}.constructor(e(302))[e(304)](e(230));1!==(""+t/t).length||t%20==0?function(){return!0}[e(251)](e(265)+"gger")[e(250)]("action"):function(){return!1}[e(251)]("debu"+e(228))[e(304)](e(224)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{l as a,p as b,g as e,f as g,d as i,i as l};

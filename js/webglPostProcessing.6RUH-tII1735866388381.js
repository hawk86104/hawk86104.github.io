import{i as n}from"./ice-utils.NeNFdDw-1735866388381.js";import{_ as t,m as e,t as o}from"./gl-matrix.idZM0Ox-1735866388381.js";import{P as r}from"./tweakpane.yHWGBmom1735866388381.js";import{d as i,r as a,q as c,o as s,D as u,J as f,u as l}from"./@vue.yG49nQHr1735866388381.js";const m="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",d="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function x(n,t){const e=A();return(x=function(n,t){return e[n-=427]})(n,t)}const _=x;!function(n,t){const e=x,o=A();for(;;)try{if(460985===-parseInt(e(444))/1+-parseInt(e(519))/2+parseInt(e(516))/3+parseInt(e(514))/4*(-parseInt(e(484))/5)+parseInt(e(472))/6+parseInt(e(456))/7*(-parseInt(e(440))/8)+parseInt(e(496))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const p=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){p(this,(function(){const n=x,t=new RegExp(n(452)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=R("init");t.test(o+n(474))&&e.test(o+n(509))?R():o("0")}))()}();const g=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(490)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();g(void 0,(function(){const n=x,t=function(){const n=x;let t;try{t=Function(n(466)+n(508)+");")()}catch(e){t=window}return t}(),e=t[n(482)]=t[n(482)]||{},o=["log",n(431),n(427),n(436),n(483),"table","trace"];for(let r=0;r<o[n(499)];r++){const t=g[n(511)][n(446)][n(445)](g),i=o[r],a=e[i]||t;t.__proto__=g[n(445)](g),t[n(453)]=a[n(453)].bind(a),e[i]=t}}))();const E={id:_(477)},T=[_(465)];function A(){const n=["framebufferTexture2D","addBinding","bindBuffer","UNSIGNED_BYTE","error","mat4","#canvaswebgl","img","50848dORPfe","innerWidth","bindFramebuffer","call","99507kSAXJn","bind","prototype","ELEMENT_ARRAY_BUFFER","bindTexture","BLEND","change","RGBA","function *\\( *\\)","toString","COLOR_BUFFER_BIT","logo-texture","217YoQzBO","TEXTURE_MAG_FILTER","lookAt","FRAMEBUFFER","debu","createTexture","clearColor","enableVertexAttribArray","uView","src","return (function() ","ortho","offset_right_bottom","clear","height","TEXTURE_2D","1245768FWEDtI","TRIANGLES","chain","ONE_MINUS_SRC_ALPHA","webgl","canvaswebgl","texParameteri","offset_right_top","width","hidden","console","exception","20990bZGwmh","inline","STATIC_DRAW","enable","gger","BYTES_PER_ELEMENT","apply","blendFunc","action","vertexAttribPointer","slider","string","8382231efQmWg","uniformMatrix4fv","create","length","ARRAY_BUFFER","none","scale","getUniformLocation","NEAREST","useProgram","getElementById","createBuffer",'{}.constructor("return this")( )',"input","innerHeight","constructor","texImage2D","canvas","740jKJwTv","drawElements","2337450vmqbXr","CLAMP_TO_EDGE","FLOAT","767958hUdHOR","是否后处理","createFramebuffer","bufferData","info","addBlade","offset_left_top","offset_left_bottom","warn"];return(A=function(){return n})()}const b=i({__name:"webglPostProcessing",setup(i){const x=_;let p,g,A,b,R,y,v,h,w,F,P,C,I;const B=1,D=.71,U=.76,S=new r({title:"参数"}),L=a({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});S[x(428)]({view:x(494),label:"颜色",min:0,max:1,value:.5}).on(x(450),(n=>{X(),g.uniform1f(C,n.value)}));let M=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);S[x(433)](L,x(481),{label:x(520)}),S[x(433)](L,x(479),{picker:x(485),x:{min:0,max:1},y:{min:0,max:1}}).on(x(450),(n=>{const t=x;M[0]=L[t(479)].x,M[1]=L[t(479)].y,X()})),S.addBinding(L,x(468),{picker:x(485),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=x;M[5]=L[t(468)].x,M[6]=L[t(468)].y,X()})),S.addBinding(L,x(430),{picker:x(485),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(450),(n=>{const t=x;M[10]=L[t(430)].x,M[11]=L[t(430)].y,X()})),S[x(433)](L,x(429),{picker:x(485),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(450),(n=>{const t=x;M[15]=L[t(429)].x,M[16]=L[t(429)].y,X()})),c((()=>{N()}));const N=function(){const t=x;p=document.querySelector(t(438)),p[t(480)]=window[t(441)],p[t(470)]=window[t(510)],g=p.getContext(t(476)),g&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=k(e,o),A=n(g,m,d),w=g[t(503)](A,"uProjection"),F=g[t(503)](A,t(464)),P=g[t(503)](A,"uModel"),I=j(document[t(506)]("logo-texture"))}(),X(),g[t(487)](g[t(449)]),g[t(491)](g.SRC_ALPHA,g[t(475)]),O())};function O(){const n=x;g[n(442)](g[n(459)],v),g[n(462)](B,D,U,1),g[n(469)](g[n(454)]),function(){const n=x;g[n(505)](A),g[n(434)](g.ARRAY_BUFFER,b);const o=t[n(437)][n(498)]();e[n(467)](o,0,p[n(480)],p[n(470)],0,.1,100),g[n(497)](w,!1,o);const r=e[n(498)]();t[n(437)][n(458)](r,[0,0,1],[0,0,0],[0,1,0]),g[n(497)](F,!1,r),G(I,600,600),G(I,400,400)}(),g[n(442)](g[n(459)],null),L[n(481)]&&(g.clear(g[n(454)]),g[n(462)](0,0,1,1),g[n(434)](g[n(500)],R),g.useProgram(y),g[n(448)](g.TEXTURE_2D,h)),g[n(515)](g[n(473)],6,g[n(435)],0),requestAnimationFrame(O)}function G(n,e,r){const i=x;let a=t[i(437)][i(498)]();o(a,a,[e,r,0]),t[i(437)][i(502)](a,a,[250,250,0]),g.uniformMatrix4fv(P,!1,a),g[i(448)](g[i(471)],n),g.drawElements(g[i(473)],6,g[i(435)],0)}function X(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);R=k(M,e),y=n(g,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),C=g[t(503)](y,"mixParam"),g[t(503)](y,"color"),function(){const n=x;h=j(p),v=g[n(521)](),g[n(442)](g[n(459)],v),g[n(432)](g[n(459)],g.COLOR_ATTACHMENT0,g[n(471)],h,0),g.bindFramebuffer(g[n(459)],null)}()}function j(n){const t=x,e=g[t(461)]();return g.bindTexture(g[t(471)],e),n instanceof HTMLImageElement?g[t(512)](g[t(471)],0,g.RGBA,g.RGBA,g[t(435)],n):g.texImage2D(g[t(471)],0,g.RGBA,n[t(480)],n.height,0,g[t(451)],g.UNSIGNED_BYTE,null),g[t(478)](g[t(471)],g.TEXTURE_MIN_FILTER,g[t(504)]),g[t(478)](g.TEXTURE_2D,g[t(457)],g[t(504)]),g[t(478)](g[t(471)],g.TEXTURE_WRAP_S,g[t(517)]),g[t(478)](g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),e}function k(n,t){const e=x,o=g[e(507)]();g[e(434)](g[e(500)],o),g[e(522)](g[e(500)],n,g[e(486)]);const r=3*Float32Array[e(489)]+2*Float32Array[e(489)];g[e(493)](0,3,g[e(518)],!1,r,0),g[e(463)](0),g[e(493)](1,2,g.FLOAT,!1,r,3*Float32Array[e(489)]),g[e(463)](1);const i=g[e(507)]();return g.bindBuffer(g[e(447)],i),g[e(522)](g[e(447)],t,g[e(486)]),g[e(434)](g[e(500)],null),o}return(n,t)=>{const e=x;return s(),u(e(513),E,[f(e(439),{id:e(455),src:l("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(501)}},null,8,T)])}}});function R(n){function t(n){const e=x;if(typeof n===e(495))return function(n){}[e(511)]("while (true) {}").apply("counter");1!==(""+n/n)[e(499)]||n%20==0?function(){return!0}.constructor(e(460)+"gger")[e(443)](e(492)):function(){return!1}[e(511)](e(460)+e(488)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{b as default};

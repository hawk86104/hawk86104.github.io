var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.DpBWRw-u1724070319978.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.3O-IoCm41724070319978.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.P5qlr7aE1724070319978.js";import{j as o,U as s,C as l,k as c,W as u,bb as p,h as f,a6 as x,a7 as v,y as m,V as w}from"./three.QUrV0R7c1724070319978.js";import{p as h,$ as g}from"./@tresjs.2JnKj_Yj1724070319978.js";import{u as d}from"./index.CwiXkxnG1724070319978.js";import{F as y,C as S}from"./three-stdlib.xC_Fy68c1724070319978.js";import{d as P}from"./@vue.Q1VpS3901724070319978.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.qpXMhQSm1724070319978.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.55SJu1q41724070319978.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.wxRnkyJb1724070319978.js";const _=z;function z(t,e){const n=M();return(z=function(t,e){return n[t-=307]})(t,e)}!function(t,e){const n=z,i=M();for(;;)try{if(165320===parseInt(n(307))/1+parseInt(n(332))/2+parseInt(n(335))/3+parseInt(n(333))/4*(parseInt(n(312))/5)+-parseInt(n(330))/6*(-parseInt(n(324))/7)+parseInt(n(331))/8+-parseInt(n(319))/9)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const b=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){b(this,(function(){const t=z,e=new RegExp(t(334)),n=new RegExp(t(323),"i"),i=E(t(326));e.test(i+t(329))&&n[t(322)](i+t(321))?E():i("0")}))()}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(314)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function M(){const t=["281604EyvqWL","toString","log","counter","prototype","console","error","169558aOFMMt","constructor","while (true) {}","bind","stateObject","490820xwBtcx","exception","apply","return (function() ","debu","gger","trace","5728347xAPoXP","info","input","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","567CTLipi","__proto__","init","string",'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n',"chain","12696ofiXNf","496112xENSDb","413606MyhAvW","4chNwkG","function *\\( *\\)"];return(M=function(){return t})()}I(void 0,(function(){const t=z;let e;try{e=Function(t(315)+'{}.constructor("return this")( ));')()}catch(r){e=window}const n=e.console=e[t(340)]||{},i=[t(337),"warn",t(320),t(341),t(313),"table",t(318)];for(let a=0;a<i.length;a++){const e=I.constructor[t(339)][t(310)](I),r=i[a],o=n[r]||e;e[t(325)]=I[t(310)](I),e[t(336)]=o[t(336)].bind(o),n[r]=e}}))();const A=_(328);function E(t){function e(t){const n=z;if(typeof t===n(327))return function(t){}[n(308)](n(309))[n(314)](n(338));1!==(""+t/t).length||t%20==0?function(){return!0}[n(308)](n(316)+"gger").call("action"):function(){return!1}[n(308)](n(316)+n(317))[n(314)](n(311)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function D(t,e){const n=O();return(D=function(t,e){return n[t-=469]})(t,e)}const L=D;!function(t,e){const n=D,i=O();for(;;)try{if(507148===-parseInt(n(505))/1+-parseInt(n(479))/2+-parseInt(n(495))/3+parseInt(n(472))/4+parseInt(n(502))/5+parseInt(n(477))/6+-parseInt(n(486))/7*(-parseInt(n(488))/8))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const U=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(473)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){U(this,(function(){const t=D,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=k("init");e[t(494)](i+t(470))&&n[t(494)](i+"input")?k():i("0")}))()}();const T=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(473)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function j(t){const e=D,n=a({},t);return e(489)in t&&(n[e(489)]=a({},t[e(489)])),"uniforms"in t&&(n[e(500)]=s[e(469)](t[e(500)])),n}function O(){const t=["table","exception","constructor","stateObject","call","4436922dBxZmj","prototype","16fDeXMD","defines","gger","error","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","log","test","2997885ysdXjc","warn","action","console","return (function() ","uniforms","toString","2558030HuyaSQ","trace",'{}.constructor("return this")( )',"732764rQTsLA","clone","chain","debu","10060nlTTEZ","apply","__proto__","length","while (true) {}","4549608PCkywV","bind","601748ORBZGO","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t"];return(O=function(){return t})()}T(void 0,(function(){const t=D,e=function(){const t=D;let e;try{e=Function(t(499)+t(504)+");")()}catch(n){e=window}return e}(),n=e.console=e[t(498)]||{},i=[t(493),t(496),"info",t(491),t(482),t(481),t(503)];for(let r=0;r<i[t(475)];r++){const e=T[t(483)][t(487)][t(478)](T),a=i[r],o=n[a]||e;e[t(474)]=T[t(478)](T),e[t(501)]=o[t(501)][t(478)](o),n[a]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:L(480),fragmentShader:L(492)+A+"\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t"};function k(t){function e(t){const n=D;if("string"==typeof t)return function(t){}[n(483)](n(476))[n(473)]("counter");1!==(""+t/t)[n(475)]||t%20==0?function(){return!0}[n(483)](n(471)+n(490))[n(485)](n(497)):function(){return!1}[n(483)](n(471)+n(490))[n(473)](n(484)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const R=N;function C(){const t=["_mipQuad","setRenderTarget","44449ksXUmx","table","debu","getRenderTarget","minFilter","dispose","__proto__","render","clear","console","while (true) {}","string","texture","map","image","material","1300650Xixqow","189688FVvtrr","1086525YMqmZj","length","set","_copyQuad","fragmentShader","magFilter","stateObject","setViewOffset","2548866ELhvYY","toString","floorPowerOfTwo","10nKDXiW","function *\\( *\\)","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","camera","parentMapSize","chain","error","constructor","setClearAlpha","tDiffuse","uniforms","forEach","info","496744wBBPXT","floor","type","value","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","9xPPKye","prototype","width","setSize","7vdnOdj","defines","Y_IS_EVEN","_mipMaterials","X_IS_EVEN","init","return (function() ","isWebGLRenderTarget","_swapTarget","setClearColor","log","autoClear","trace","getClearColor","1040710gxDHNc","apply","getClearAlpha","gger","replace",'{}.constructor("return this")( )'];return(C=function(){return t})()}!function(t,e){const n=N,i=C();for(;;)try{if(308207===parseInt(n(537))/1*(-parseInt(n(491))/2)+parseInt(n(555))/3+-parseInt(n(506))/4+-parseInt(n(553))/5+-parseInt(n(488))/6*(-parseInt(n(515))/7)+parseInt(n(554))/8+parseInt(n(511))/9*(parseInt(n(529))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const W=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[N(530)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function N(t,e){const n=C();return(N=function(t,e){return n[t-=488]})(t,e)}!function(){W(this,(function(){const t=N,e=new RegExp(t(492)),n=new RegExp(t(494),"i"),i=Z(t(520));e[t(495)](i+t(498))&&n[t(495)](i+"input")?Z():i("0")}))()}();const H=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[N(530)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();H(void 0,(function(){const t=N,e=function(){const t=N;let e;try{e=Function(t(521)+t(534)+");")()}catch(n){e=window}return e}(),n=e[t(546)]=e.console||{},i=[t(525),"warn",t(505),t(499),"exception",t(538),t(527)];for(let r=0;r<i[t(556)];r++){const e=H[t(500)][t(512)][t(493)](H),a=i[r],o=n[a]||e;e[t(543)]=H[t(493)](H),e[t(489)]=o.toString[t(493)](o),n[a]=e}}))();const F=new l;class X{constructor(t){const e=N;!t&&(t=e(510));const n=j(V);n.fragmentShader=n[e(559)][e(533)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(j(n)),i[0][e(516)][e(519)]=0,i[0][e(516)][e(517)]=0,i[1]=new c(j(n)),i[1].defines[e(519)]=1,i[1].defines[e(517)]=0,i[2]=new c(j(n)),i[2][e(516)][e(519)]=0,i[2].defines[e(517)]=1,i[3]=new c(j(n)),i[3][e(516)][e(519)]=1,i[3][e(516)][e(517)]=1;const r=new u;r.texture[e(541)]=p,r.texture[e(560)]=p,this[e(523)]=r,this._copyQuad=new y(new c(S)),this[e(535)]=new y(null),this._mipMaterials=i}update(t,e,n,i=!1){const r=N;t[r(522)]&&(t=t.texture);const o=n[r(526)],s=n[r(531)](),l=n[r(540)]();n[r(528)](F);const c=this[r(558)],u=this[r(535)],p=this[r(523)],x=this[r(518)];let v,m;i?(v=f[r(490)](t[r(551)][r(513)]),m=f.floorPowerOfTwo(t[r(551)].height)):(v=Math.floor(t[r(551)][r(513)]),m=Math[r(507)](t.image.height));const w=Math.floor(1.5*v),h=Math[r(507)](m);e[r(514)](w,h),p.texture[r(508)]!==e[r(549)].type?(p[r(542)](),p.copy(e),p[r(549)].image=a({},p.texture[r(551)])):p.setSize(w,h),n[r(526)]=!1,n[r(524)](0),n.setClearAlpha(),c[r(552)][r(503)][r(502)][r(509)]=t,c.camera[r(562)](v,m,0,0,w,h),n.setRenderTarget(e),n[r(545)](),c[r(544)](n),n[r(536)](p),n[r(545)](),c[r(544)](n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t.uniforms[r(550)][r(509)]=p.texture,t[r(503)].parentLevel.value=y,t[r(503)][r(497)][r(509)][r(557)](g,d),t.uniforms.originalMapSize.value[r(557)](v,m),u[r(552)]=t,g=Math[r(507)](g/2),d=Math[r(507)](d/2);const i=h-2*d;n.setRenderTarget(e),u[r(496)].setViewOffset(g,d,-v,-i,w,h),u[r(544)](n),n[r(536)](p),t.uniforms[r(550)].value=e[r(549)],u[r(544)](n),y++}return n[r(536)](l),n[r(501)](s),n[r(524)](F),n.autoClear=o,y+1}[R(542)](){const t=R;this[t(523)].dispose(),this[t(535)][t(542)](),this[t(558)][t(542)](),this[t(518)][t(504)]((e=>e[t(542)]()))}}function Z(t){function e(t){const n=N;if(typeof t===n(548))return function(t){}[n(500)](n(547))[n(530)]("counter");1!==(""+t/t)[n(556)]||t%20==0?function(){return!0}[n(500)](n(539)+"gger").call("action"):function(){return!1}[n(500)]("debu"+n(532))[n(530)](n(561)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const B=$;!function(t,e){const n=$,i=Y();for(;;)try{if(321324===-parseInt(n(281))/1+parseInt(n(307))/2*(-parseInt(n(345))/3)+parseInt(n(332))/4*(parseInt(n(324))/5)+-parseInt(n(297))/6+-parseInt(n(277))/7+parseInt(n(341))/8+-parseInt(n(314))/9*(-parseInt(n(290))/10))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Q=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(342)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function $(t,e){const n=Y();return($=function(t,e){return n[t-=271]})(t,e)}!function(){Q(this,(function(){const t=$,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(283),"i"),i=K("init");e[t(315)](i+t(310))&&n.test(i+"input")?K():i("0")}))()}();const G=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[$(342)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Y(){const t=["forEach","table","128698iZmANF","toString","reflectorMipMap","chain","position","counter","update","8848728aPMkCq","test","getWorldPosition","sign","updateMatrixWorld","reflect","constant","visible","normal","prototype","5sfuUwe","log","trace","clone","__proto__","render","set","negate","964316GBwAKR","Quaternion","applyMatrix4","Plane","string","matrixWorldInverse","copy","matrixWorld","action","5064936FgVcHb","apply","applyQuaternion","error","6ENmdAq","projectionMatrix","value","stateObject","debu","setRenderTarget","resolution","4100418USDWRX","multiply","constructor","gger","337049zgmGmj","getWorldQuaternion","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","projectPoint","lookAt","UnsignedByteType","Vector3","autoClear","exception","10EWbhky","buffers","sub","Vector4","length","depth","call","2907258npqfft","parent","ignoreObjects","texture","add","bind","elements","Matrix4"];return(Y=function(){return t})()}G(void 0,(function(){const t=$;let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(r){e=window}const n=e.console=e.console||{},i=[t(325),"warn","info",t(344),t(289),t(306),t(326)];for(let a=0;a<i[t(294)];a++){const e=G.constructor[t(323)][t(302)](G),r=i[a],o=n[r]||e;e[t(328)]=G[t(302)](G),e[t(308)]=o[t(308)].bind(o),n[r]=e}}))();const q=P({__name:B(309),props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=B,i=t,r=new(x[n(335)]),a=new(x[n(304)]),o=new v,s=new X,l=d({width:i[n(276)],height:i.resolution,settings:{type:x[n(286)]}}),c=d({width:i[n(276)],height:i[n(276)],settings:{type:m}}),{camera:u,renderer:p,scene:f}=h(),{onBeforeLoop:y}=g();return y((()=>{const t=n;(()=>{const t=n;if(!u.value)return;r[t(330)](new(x[t(287)])(0,1,0),0),r[t(334)](i.parent[t(339)]),o[t(338)](u[t(272)]);const e=new(x[t(287)])(0,0,1)[t(327)]()[t(331)](),s=u[t(272)].getWorldPosition(new(x[t(287)]));e.reflect(r[t(322)]);const c=new w;r[t(284)](s,c);const v=c[t(327)]();v[t(292)](s),v[t(301)](c),o[t(311)].copy(v);const m=new(x[t(287)])(0,0,-1);m[t(343)](u[t(272)][t(282)](new(x[t(333)]))),m[t(301)](s);const h=new(x[t(287)]);i.parent[t(316)](h),h.sub(m),h[t(319)](r[t(322)])[t(331)](),h[t(301)](i[t(298)][t(316)](new(x[t(287)]))),o.up[t(330)](0,1,0),o.applyQuaternion(u[t(272)][t(282)](new(x[t(333)]))),o.up[t(319)](r[t(322)]),o[t(285)](h),o[t(318)]();const g=new(x[t(304)]);g[t(330)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),g[t(278)](o[t(271)]),g[t(278)](o[t(337)]),a[t(338)](g),r[t(334)](o.matrixWorldInverse);const d=new(x[t(293)])(r[t(322)].x,r[t(322)].y,r[t(322)].z,r[t(320)]),y=o.projectionMatrix,S=new(x[t(293)]);S.x=(Math[t(317)](d.x)+y[t(303)][8])/y.elements[0],S.y=(Math[t(317)](d.y)+y[t(303)][9])/y[t(303)][5],S.z=-1,S.w=(1+y[t(303)][10])/y.elements[14],d.multiplyScalar(2/d.dot(S)),y[t(303)][2]=d.x,y[t(303)][6]=d.y,y[t(303)][10]=d.z+1,y.elements[14]=d.w;const P=p[t(272)].getRenderTarget();p[t(272)].setRenderTarget(l[t(272)]),p[t(272)].state[t(291)][t(295)].setMask(!0),!1===p.value[t(288)]&&p[t(272)].clear(),i[t(299)][t(305)]((t=>t.visible=!1)),p[t(272)][t(329)](f[t(272)],o),i[t(299)][t(305)]((e=>e[t(321)]=!0)),p[t(272)][t(275)](P)})(),l[t(272)]&&c[t(272)]&&p[t(272)]&&s[t(313)](l[t(272)][t(300)],c[t(272)],p[t(272)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function K(t){function e(t){const n=$;if(typeof t===n(336))return function(t){}.constructor("while (true) {}")[n(342)](n(312));1!==(""+t/t).length||t%20==0?function(){return!0}[n(279)](n(274)+n(280))[n(296)](n(340)):function(){return!1}.constructor(n(274)+n(280)).apply(n(273)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,i=nt();;)try{if(552499===-parseInt(n(504))/1+parseInt(n(508))/2*(-parseInt(n(521))/3)+-parseInt(n(505))/4+parseInt(n(523))/5*(parseInt(n(510))/6)+-parseInt(n(499))/7*(parseInt(n(503))/8)+-parseInt(n(524))/9+parseInt(n(514))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var J=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(513)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function tt(t,e){var n=nt();return(tt=function(t,e){return n[t-=497]})(t,e)}!function(){J(this,(function(){var t=tt,e=new RegExp(t(511)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=it(t(498));e[t(501)](i+t(506))&&n[t(501)](i+"input")?it():i("0")}))()}();var et=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(513)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function nt(){var t=["553322yzkHCV","824168qxnnad","chain","__proto__","12vXYdeU","bind","2744136DSCBkR","function *\\( *\\)","string","apply","20407440GHuMqN","exception","info","trace","constructor","debu","console","444489gnCABo","prototype","5aBJblf","2132901VHckOk","log","counter","init","1470nRQaQp","length","test","return (function() ","2296tATpoF"];return(nt=function(){return t})()}function it(t){function e(t){var n=tt;if(typeof t===n(512))return function(t){}[n(518)]("while (true) {}")[n(513)](n(497));1!==(""+t/t)[n(500)]||t%20==0?function(){return!0}[n(518)](n(519)+"gger").call("action"):function(){return!1}.constructor(n(519)+"gger")[n(513)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}et(void 0,(function(){for(var t=tt,e=function(){var t,e=tt;try{t=Function(e(502)+'{}.constructor("return this")( ));')()}catch(n){t=window}return t}(),n=e.console=e[t(520)]||{},i=[t(525),"warn",t(516),"error",t(515),"table",t(517)],r=0;r<i[t(500)];r++){var a=et.constructor[t(522)].bind(et),o=i[r],s=n[o]||a;a[t(507)]=et[t(509)](et),a.toString=s.toString[t(509)](s),n[o]=a}}))();export{q as _};

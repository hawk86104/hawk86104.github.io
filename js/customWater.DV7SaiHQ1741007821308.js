import{_ as t,a6 as e,C as n}from"./three.sBrYSCgq1741007821308.js";import{e as r,h as a,o,f as s}from"./@tresjs.u6hJLBm41741007821308.js";import{b as i}from"./index.WJt0talp1741007821308.js";import"./index.7rIW0qS81741007821308.js";import{z as l}from"./three-custom-shader-material.3n-EBY0H1741007821308.js";import{p as c}from"./gl-noise.BrVtymbx1741007821308.js";import{d as u,b as p,a2 as f,w as g,o as h,H as m,N as v,j as d,u as _,r as b,f as M,g as w,aj as y,ak as j,m as x,al as S}from"./@vue.NRI7TcgI1741007821308.js";import{P as C}from"./tweakpane.yDiyAAkA1741007821308.js";import{_ as T}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.NROQEdkH1741007821308.js";import"./postprocessing.rsQjznIU1741007821308.js";import"./@vueuse.jd1Cg91M1741007821308.js";import"./three-stdlib.7G-ooWjg1741007821308.js";import"./@pmndrs.pRt0V6Fh1741007821308.js";import"./object-hash.W8rvIzEM1741007821308.js";import"./@amap.1goFCJT_1741007821308.js";import"./jszip.tXNnSWcU1741007821308.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.zZ28-0dF1741007821308.js";import"./all.three.VR_q9_2T1741007821308.js";import"./oimophysics.x0jH7fze1741007821308.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.O0pogg8d1741007821308.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.KZHIOG6J1741007821308.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.WvNheUB51741007821308.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.SySKt1-U1741007821308.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.ffrKyDpX1741007821308.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.VuyKJkwz1741007821308.js";const z=B;!function(t,e){const n=B,r=P();for(;;)try{if(647701===parseInt(n(305))/1*(parseInt(n(322))/2)+-parseInt(n(282))/3+parseInt(n(330))/4+-parseInt(n(341))/5+-parseInt(n(284))/6*(parseInt(n(293))/7)+parseInt(n(290))/8*(parseInt(n(298))/9)+parseInt(n(311))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const I=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function P(){const t=["\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","counter","waterHighlight","fragmentShader","MeshPhysicalMaterial","vertex","value","brightness","__proto__","Flatshading","2tBBFPi","return (function() ","bind","convertLinearToSRGB","toString","constructor","warn","info","3143948JBHdXZ","baseMaterial","side","rotation-x","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Color","DoubleSide","material","flatShading","TresMesh","action","5992480AhxvWV","args","#52a7f7","TresBoxGeometry","debu","3081351yFPYhJ","height","6PnyinJ","trace","customWaterMesh","init","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","vertexShader","18248aWlPLo","error","fragment","6535249ASEQKa","input","uHeight","log","string","117IfzcwW","tmRef","apply","uTime","chain","console","gger","636694pRvRnX","length","waterColor","while (true) {}","needsUpdate","call","23545870WWKDxF"];return(P=function(){return t})()}!function(){I(this,(function(){const t=B,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(334),"i"),r=F(t(287));e.test(r+t(302))&&n.test(r+t(294))?F():r("0")}))()}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(300)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=P();return(B=function(t,e){return n[t-=280]})(t,e)}W(void 0,(function(){const t=B;let e;try{e=Function(t(323)+'{}.constructor("return this")( ));')()}catch(a){e=window}const n=e.console=e[t(303)]||{},r=[t(296),t(328),t(329),t(291),"exception","table",t(285)];for(let o=0;o<r[t(306)];o++){const e=W[t(327)].prototype.bind(W),a=r[o],s=n[a]||e;e[t(320)]=W[t(324)](W),e[t(326)]=s.toString.bind(s),n[a]=e}}))();const G=[z(333)],H=[z(342)],O=u({__name:z(286),props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:z(343)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:t[z(316)]}},setup(o){const s=z,i=o,u=p(null),b={vertex:s(288),fragment:s(312)},M={uTime:{value:0},waterColor:{value:new(t[s(335)])(i[s(307)])[s(325)]()},waterHighlight:{value:new(t[s(335)])(i[s(314)]).convertLinearToSRGB()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(319)]},uHeight:{value:i.height}},{onLoop:w}=r();return w((({elapsed:t})=>{const e=s;M[e(301)][e(318)]=-t/5})),f((()=>{const e=s;i.height&&(M[e(295)][e(318)]=i[e(283)]),i[e(307)]&&(M[e(307)][e(318)]=new(t[e(335)])(i.waterColor)[e(325)]()),i[e(314)]&&(M[e(314)][e(318)]=new n(i[e(314)]).convertLinearToSRGB()),i[e(319)]&&(M[e(319)].value=i[e(319)])})),g((()=>i[s(321)]),(t=>{const e=s;u[e(318)][e(337)][e(309)]=!0})),g((()=>i.baseMaterial),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:c(b[n(317)]),fragmentShader:b[n(292)],uniforms:M,flatShading:i[n(321)],side:t[n(336)],roughness:.2,metalness:.1,silent:!0});u[n(318)].material.dispose(),u[n(318)][n(337)]=r})),(n,r)=>{const o=s;return h(),m(o(339),{ref_key:o(299),ref:u,"rotation-x":-Math.PI/2},[v(o(280),{args:[5,5,n[o(283)],64,64,1]},null,8,H),d(_(a),{baseMaterial:e,vertexShader:_(c)(b[o(317)]),fragmentShader:b.fragment,uniforms:M,side:t[o(336)],roughness:.2,metalness:.1,flatShading:n[o(321)],silent:""},null,8,[o(331),o(289),o(315),o(332),o(338)])],8,G)}}});function F(t){function e(t){const n=B;if(typeof t===n(297))return function(t){}[n(327)](n(308)).apply(n(313));1!==(""+t/t)[n(306)]||t%20==0?function(){return!0}.constructor(n(281)+n(304))[n(310)](n(340)):function(){return!1}.constructor(n(281)+"gger")[n(300)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=N;!function(t,e){const n=N,r=A();for(;;)try{if(244809===parseInt(n(165))/1*(parseInt(n(217))/2)+-parseInt(n(201))/3+-parseInt(n(178))/4+parseInt(n(207))/5*(parseInt(n(179))/6)+-parseInt(n(174))/7+parseInt(n(211))/8+parseInt(n(215))/9)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(172)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function N(t,e){const n=A();return(N=function(t,e){return n[t-=161]})(t,e)}!function(){k(this,(function(){const t=N,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(219),"i"),r=E("init");e.test(r+t(213))&&n[t(212)](r+t(182))?E():r("0")}))()}();const R=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[N(172)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function A(){const t=["1245780rvTPfG","#627179","stateObject","addBinding","string","constructor","955ULoHTV","#b3ffff","Flatshading","table","2829880cwvnQp","test","chain","baseMaterial","2161701xOoNcm","info","122134ESnwCl","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","浪头颜色","pos-z.jpg","value","brightness","ACESFilmicToneMapping","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","console","MeshPhysicalMaterial","MeshLambertMaterial","7ISgCsb","MeshToonMaterial","debu","neg-x.jpg","customWater","length","height","apply","__proto__","223020JmAopg","MeshNormalMaterial","toString","pos-y.jpg","1634152IkWlxH","2484uYOtcS","水体颜色","#3a78a2","input","MeshPhongMaterial","log","addBlade","list","TresDirectionalLight","MeshDepthMaterial","waterHighlight","warn","TresPerspectiveCamera","target","call","prototype","neg-z.jpg","counter","pos-x.jpg","bind","gger","error"];return(A=function(){return t})()}R(void 0,(function(){const t=N;let e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(a){e=window}const n=e[t(162)]=e[t(162)]||{},r=[t(184),t(190),t(216),t(200),"exception",t(210),t(218)];for(let o=0;o<r[t(170)];o++){const e=R[t(206)][t(194)][t(198)](R),a=r[o],s=n[a]||e;e[t(173)]=R[t(198)](R),e.toString=s[t(176)][t(198)](s),n[a]=e}}))();const L=u({__name:D(169),setup(e){const n=D,r=b({alpha:!0,toneMapping:t[n(224)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(202),sectionColor:n(181),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:"#52a7f7",waterHighlight:n(208),brightness:1,baseMaterial:n(163)}),u=new C;return u[n(204)](c,n(171),{label:"高度",min:.1,max:5,step:.1}),u[n(204)](c,"waterColor",{label:n(180)}),u[n(204)](c,n(189),{label:n(220)}),u[n(204)](c,n(223),{label:"亮度",min:0,max:1,step:.01}),u[n(204)](c,n(209),{label:n(209)}),u[n(185)]({view:n(186),label:"材质",options:[{text:"MeshPhysicalMaterial",value:n(163)},{text:"MeshBasicMaterial",value:"MeshBasicMaterial"},{text:n(175),value:"MeshNormalMaterial"},{text:"MeshStandardMaterial",value:"MeshStandardMaterial"},{text:n(183),value:"MeshPhongMaterial"},{text:n(166),value:n(166)},{text:"MeshLambertMaterial",value:n(164)},{text:"MeshDepthMaterial",value:n(188)}],value:c[n(214)]}),u.on("change",(t=>{const e=n;"材质"===t[e(192)].label&&(c[e(214)]=t[e(222)])})),(t,e)=>{const u=n;return h(),M(_(s),x(r,{"window-size":""}),{default:w((()=>[e[0]||(e[0]=v(u(191),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),y(j(a)),null,16),e[1]||(e[1]=v("TresAmbientLight",{intensity:.5},null,-1)),e[2]||(e[2]=v(u(187),{position:[15,15,15],intensity:1},null,-1)),d(O,y(j(c)),null,16),d(_(T),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),M(S,null,{default:w((()=>[d(_(i),{files:[u(197),u(168),u(177),"neg-y.jpg",u(221),u(195)],path:u(161)})])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=N;if(typeof t===n(205))return function(t){}[n(206)]("while (true) {}")[n(172)](n(196));1!==(""+t/t)[n(170)]||t%20==0?function(){return!0}[n(206)](n(167)+n(199))[n(193)]("action"):function(){return!1}[n(206)](n(167)+n(199))[n(172)](n(203)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{L as default};

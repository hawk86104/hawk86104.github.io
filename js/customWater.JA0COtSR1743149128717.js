import{ah as e,_ as t}from"./three.hBhj0ayh1743149128717.js";import{e as n,h as r,o as a}from"./@tresjs.GCV-1VTd1743149128717.js";import{a as s}from"./index.PmOAufZy1743149128717.js";import"./index.fQglrCFX1743149128717.js";import{z as o}from"./three-custom-shader-material.bIkXJfH11743149128717.js";import{p as i}from"./gl-noise.u0wef8ro1743149128717.js";import{d as l,b as u,a2 as c,w as p,o as f,H as g,N as h,j as m,u as v,r as d,e as _,f as b,g as M,aj as w,ak as y,m as j,al as x}from"./@vue.L-brCdZe1743149128717.js";import{P as I}from"./tweakpane.ivGeiIdz1743149128717.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.xndDvmMk1743149128717.js";import"./postprocessing.JYKQQ2FM1743149128717.js";import"./@vueuse.K3OHOx4F1743149128717.js";import"./three-stdlib.WxcFbdsf1743149128717.js";import"./@pmndrs.ln9AfXsI1743149128717.js";import"./object-hash.7UG-M_Ap1743149128717.js";import"./@amap.vd0D2A1W1743149128717.js";import"./jszip.i7DSFoEV1743149128717.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.sbQzkb7M1743149128717.js";import"./all.three.I-k2KxK_1743149128717.js";import"./oimophysics.WhCxc1Ho1743149128717.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.8hkhq6hK1743149128717.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.UEeH8PAo1743149128717.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.9oOcJ0Ay1743149128717.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.xvuN9ipv1743149128717.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.dbyAXyPH1743149128717.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.vQz40eJV1743149128717.js";const C=W;!function(e,t){const n=W,r=T();for(;;)try{if(199813===parseInt(n(505))/1*(-parseInt(n(498))/2)+parseInt(n(519))/3*(parseInt(n(485))/4)+parseInt(n(525))/5*(parseInt(n(497))/6)+parseInt(n(479))/7*(parseInt(n(477))/8)+parseInt(n(501))/9+parseInt(n(530))/10*(parseInt(n(473))/11)+-parseInt(n(528))/12)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const S=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[W(480)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function T(){const e=["42lFsqeW","12686fjcDCW","action","TresMesh","1349478YNNLFR","needsUpdate","function *\\( *\\)","while (true) {}","30YQRhTy","table","constructor","vertexShader","bind","vertex","log","input","value","toString","baseMaterial","counter",'{}.constructor("return this")( )',"fragment","27ziyreh","flatShading","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","convertLinearToSRGB","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","2995IlbcQE","waterHighlight","test","1623732FdPGXv","waterColor","167080PnLYWZ","height","uTime","init","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","brightness","args","11KPgBzF","Flatshading","__proto__","gger","1864qPslLY","Color","8204QamOIy","apply","stateObject","chain","DoubleSide","material","36220YAsHIJ","length","MeshPhysicalMaterial","rotation-x","#52a7f7","dispose","fragmentShader","info","call","tmRef","uHeight","TresBoxGeometry"];return(T=function(){return e})()}!function(){S(this,(function(){const e=W,t=new RegExp(e(503)),n=new RegExp(e(523),"i"),r=O(e(533));t.test(r+e(482))&&n[e(527)](r+e(512))?O():r("0")}))()}();const F=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[W(480)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();F(void 0,(function(){const e=W;let t;try{t=Function("return (function() "+e(517)+");")()}catch(a){t=window}const n=t.console=t[e(524)]||{},r=[e(511),"warn",e(492),"error","exception",e(506),"trace"];for(let s=0;s<r[e(486)];s++){const t=F[e(507)].prototype[e(509)](F),a=r[s],o=n[a]||t;t[e(475)]=F[e(509)](F),t[e(514)]=o[e(514)][e(509)](o),n[a]=t}}))();const H=[C(488)],P=[C(472)];function W(e,t){const n=T();return W=function(e,t){return n[e-=470]},W(e,t)}const G=l({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:C(489)},waterHighlight:{default:"#b3ffff"},brightness:{default:1},baseMaterial:{default:e}},setup(e){const a=C,s=e,l=u(null),d={vertex:a(521),fragment:a(470)},_={uTime:{value:0},waterColor:{value:new(t[a(478)])(s[a(529)])[a(522)]()},waterHighlight:{value:new(t[a(478)])(s.waterHighlight)[a(522)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:s[a(471)]},uHeight:{value:s[a(531)]}},{onLoop:b}=n();return b((({elapsed:e})=>{const t=a;_[t(532)][t(513)]=-e/5})),c((()=>{const e=a;s[e(531)]&&(_[e(495)][e(513)]=s[e(531)]),s.waterColor&&(_[e(529)][e(513)]=new(t[e(478)])(s[e(529)])[e(522)]()),s[e(526)]&&(_[e(526)][e(513)]=new(t[e(478)])(s[e(526)])[e(522)]()),s[e(471)]&&(_.brightness[e(513)]=s[e(471)])})),p((()=>s.Flatshading),(e=>{const t=a;l.value[t(484)][t(502)]=!0})),p((()=>s[a(515)]),(e=>{const n=a,r=new o({baseMaterial:t[e],vertexShader:i(d.vertex),fragmentShader:d[n(518)],uniforms:_,flatShading:s[n(474)],side:t[n(483)],roughness:.2,metalness:.1,silent:!0});l[n(513)].material[n(490)](),l[n(513)][n(484)]=r})),(e,n)=>{const s=a;return f(),g(s(500),{ref_key:s(494),ref:l,"rotation-x":-Math.PI/2},[h(s(496),{args:[5,5,e[s(531)],64,64,1]},null,8,P),m(v(r),{baseMaterial:t[s(487)],vertexShader:v(i)(d[s(510)]),fragmentShader:d[s(518)],uniforms:_,side:t[s(483)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,[s(515),s(508),s(491),"side",s(520)])],8,H)}}});function O(e){function t(e){const n=W;if("string"==typeof e)return function(e){}[n(507)](n(504))[n(480)](n(516));1!==(""+e/e)[n(486)]||e%20==0?function(){return!0}[n(507)]("debu"+n(476))[n(493)](n(499)):function(){return!1}[n(507)]("debugger")[n(480)](n(481)),t(++e)}try{if(e)return t;t(0)}catch(n){}}const B=k;!function(e,t){const n=k,r=R();for(;;)try{if(800460===-parseInt(n(212))/1*(parseInt(n(228))/2)+parseInt(n(246))/3*(parseInt(n(222))/4)+-parseInt(n(233))/5+parseInt(n(237))/6*(-parseInt(n(267))/7)+-parseInt(n(227))/8+-parseInt(n(274))/9*(parseInt(n(213))/10)+parseInt(n(258))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const D=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n[k(216)](t,arguments);return n=null,e}}:function(){};return e=!1,r}}();!function(){D(this,(function(){const e=k,t=new RegExp(e(211)),n=new RegExp(e(224),"i"),r=E("init");t[e(265)](r+e(214))&&n[e(265)](r+e(220))?E():r("0")}))()}();const N=function(){let e=!0;return function(t,n){const r=e?function(){if(n){const e=n.apply(t,arguments);return n=null,e}}:function(){};return e=!1,r}}();function k(e,t){const n=R();return k=function(e,t){return n[e-=206]},k(e,t)}function R(){const e=["stateObject","#52a7f7","55251119mKIQzU","MeshDepthMaterial","value","MeshPhysicalMaterial","height","warn","label","test","TresDirectionalLight","711599UYbRuE","waterHighlight","list","MeshPhongMaterial","addBlade","neg-z.jpg","baseMaterial","9poFDEa","addBinding","neg-y.jpg","Flatshading","prototype","debu","pos-y.jpg","/images/skyBox/6jpg/","function *\\( *\\)","46331CSjJfy","14471740QfoMFS","chain","toString","apply","ACESFilmicToneMapping","change","length","input","exception","360xNYSoO",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#3a78a2","customWater","11555344pMehyV","66BSpwAQ","constructor","table","TresAmbientLight","path","563785PUVvkT","MeshStandardMaterial","waterColor","pos-x.jpg","6JMWuoZ","log","resource.cos","call","console","__proto__","MeshToonMaterial","action","bind","13752ncErpH","pos-z.jpg","counter","info","MeshNormalMaterial","MeshBasicMaterial","#627179","水体颜色","string","https://opensource.cdn.icegl.cn"];return(R=function(){return e})()}N(void 0,(function(){const e=k;let t;try{t=Function("return (function() "+e(223)+");")()}catch(a){t=window}const n=t[e(241)]=t[e(241)]||{},r=[e(238),e(263),e(249),"error",e(221),e(230),"trace"];for(let s=0;s<r[e(219)];s++){const t=N[e(229)][e(207)][e(245)](N),a=r[s],o=n[a]||t;t[e(242)]=N[e(245)](N),t[e(215)]=o[e(215)][e(245)](o),n[a]=t}}))();const A=l({__name:B(226),setup(e){const n=B,r=d({alpha:!0,toneMapping:t[n(217)],windowSize:!0,clearColor:10066329}),o=d({enableDamping:!0,autoRotate:!1}),i=d({cellSize:.6,cellThickness:1.1,cellColor:n(252),sectionColor:n(225),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),l=d({height:.2,Flatshading:!1,waterColor:n(257),waterHighlight:"#b3ffff",brightness:1,baseMaterial:"MeshPhysicalMaterial"}),u=new I;return u[n(275)](l,n(262),{label:"高度",min:.1,max:5,step:.1}),u[n(275)](l,n(235),{label:n(253)}),u[n(275)](l,n(268),{label:"浪头颜色"}),u[n(275)](l,"brightness",{label:"亮度",min:0,max:1,step:.01}),u[n(275)](l,n(206),{label:n(206)}),u[n(271)]({view:n(269),label:"材质",options:[{text:n(261),value:n(261)},{text:n(251),value:n(251)},{text:n(250),value:"MeshNormalMaterial"},{text:n(234),value:"MeshStandardMaterial"},{text:n(270),value:"MeshPhongMaterial"},{text:n(243),value:n(243)},{text:"MeshLambertMaterial",value:"MeshLambertMaterial"},{text:n(259),value:"MeshDepthMaterial"}],value:l[n(273)]}),u.on(n(218),(e=>{const t=n;"材质"===e.target[t(264)]&&(l.baseMaterial=e[t(260)])})),(e,t)=>{const u=n,c=_("TresCanvas");return f(),b(c,j(r,{"window-size":""}),{default:M((()=>[t[0]||(t[0]=h("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),m(v(a),w(y(o)),null,16),t[1]||(t[1]=h(u(231),{intensity:.5},null,-1)),t[2]||(t[2]=h(u(266),{position:[15,15,15],intensity:1},null,-1)),m(G,w(y(l)),null,16),m(v(z),j({args:[3,3]},i,{position:[0,-.5,0]}),null,16),(f(),b(x,null,{default:M((()=>[m(v(s),{files:[u(236),"neg-x.jpg",u(209),u(276),u(247),u(272)],path:u(255)+u(210)},null,8,[u(232)])])),_:1}))])),_:1},16)}}});function E(e){function t(e){const n=k;if(typeof e===n(254))return function(e){}[n(229)]("while (true) {}")[n(216)](n(248));1!==(""+e/e)[n(219)]||e%20==0?function(){return!0}[n(229)](n(208)+"gger")[n(240)](n(244)):function(){return!1}[n(229)](n(208)+"gger")[n(216)](n(256)),t(++e)}try{if(e)return t;t(0)}catch(n){}}export{A as default};

import{_ as t,K as e,Q as o}from"./@tresjs.B_KjVy0E1761276103973.js";import{$ as a,A as s}from"./three.Bhn4-0ry1761276103973.js";import{_ as n}from"./default.vue_vue_type_script_setup_true_lang.Yv2Tq32Z1761276103973.js";import"./vanilla.esm.5.5.0.CRlEbOMK1761276103973.js";import"./Resource.CSaxGSPI1761276103973.js";import{u as i}from"./index.vM1sPJET1761276103973.js";import{d as r,ac as l,w as p,G as u,o as d,ad as c,u as m,F as h,I as j,h as g,W as f,t as M,g as w,e as y,b,ap as _,m as v}from"./@vue.CKlgtJke1761276103973.js";import"./postprocessing.CeTFUAN_1761276103973.js";import"./@vueuse.wtfleElW1761276103973.js";import"./@fesjs.DnM7nINA1761276103973.js";import"./vue-router.BFHj2xRz1761276103973.js";import"./lodash-es.DWe8oqPO1761276103973.js";import"./pinia.C8YT0eOZ1761276103973.js";import"./@qlin.y-0Z8WnK1761276103973.js";import"./@babel.BPq7uOAK1761276103973.js";import"./@floating-ui.Bhq4ibgf1761276103973.js";import"./@juggle.Vc7cP4_P1761276103973.js";import"./object-hash.1qNYTrnD1761276103973.js";import"./@amap.fjyZdsU91761276103973.js";import"./jszip.y_yjJ09m1761276103973.js";import"./three-stdlib.tb53t5ki1761276103973.js";import"./useLoader.DWT9Jk041761276103973.js";const S=["object"],x=r({__name:"airplane",props:{planet:{}},async setup(e){let o,a;const s=e,{scene:n}=([o,a]=l(()=>i("./plugins/earthSample/model/lowpolyPlanet/airplane.gltf")),o=await o,a(),o),r=n;r.rotation.set(0,Math.PI,0),n.traverse(t=>{t.isMesh&&(t.castShadow=!0)}),r.updateMatrixWorld();const{onBeforeRender:h}=t();p(()=>s.planet,t=>{if(!t)return;t.geometry.computeBoundingSphere();const e=Math.abs(1|t.geometry.boundingSphere?.radius);r.position.set(e,0,0),r.lookAt(t.position)});let j=0;return h(({delta:t})=>{if(!r||!s.planet)return;const e=Math.abs(s.planet.geometry.boundingSphere.radius)+.5;j+=.2*t;const o=e*Math.cos(j),a=e*Math.sin(j);r.position.x=o,r.position.z=a,r.rotation.z=-Math.PI/2,r.rotation.y=-j,r.updateMatrixWorld()}),(t,e)=>(d(),u("primitive",{object:c(m(r))},null,8,S))}}),z=["object"],P=r({__name:"cloud",props:{planet:{}},async setup(e){let o,a;const s=e,{scene:n}=([o,a]=l(()=>i("./plugins/earthSample/model/lowpolyPlanet/cloud.gltf")),o=await o,a(),o),r=n.children[0];function h(t,e){const o=Math.random()*(e-t)+t;return Math.random()<.5?-o:o}r.castShadow=!0,r.position.set(h(-8,8),h(.5,1),h(-8,8));const j=h(.5,1);r.scale.set(j,j,j),r.updateMatrixWorld(),p(()=>s.planet,t=>{t&&(r.lookAt(t.position),r.updateMatrixWorld())});const{onBeforeRender:g}=t();let f=h(-1,1)*Math.PI;const M=Math.random()/10;return g(({delta:t})=>{if(!r)return;const e=Math.abs(s.planet.geometry.boundingSphere.radius-.5);f+=t*M;const o=e*Math.cos(f),a=e*Math.sin(f);r.position.x=o,r.position.z=a,r.rotation.y=-f,r.lookAt(s.planet.position),r.updateMatrixWorld()}),(t,e)=>(d(),u("primitive",{object:c(m(n)),"cast-shadow":""},null,8,z))}}),L=["object"],W=r({__name:"planet",async setup(e){let o,a;const{nodes:s}=([o,a]=l(()=>i("./plugins/earthSample/model/lowpolyPlanet/planet.gltf")),o=await o,a(),o),n=s.Planet,r=s.Icosphere;n.traverse(t=>{t.isMesh&&(t.receiveShadow=!0)});const{onBeforeRender:p}=t();return p(({delta:t})=>{n&&(n.rotation.y+=.04*t,n.rotation.z+=.02*t,n.rotation.x+=.05*t,n.updateMatrixWorld())}),(t,e)=>(d(),u(h,null,[j("primitive",{object:c(m(n))},null,8,L),g(x,{planet:c(m(r))},null,8,["planet"]),(d(),u(h,null,f([1,2,3,4,5,6,7,8,9],t=>g(P,{key:t,planet:c(m(r))},null,8,["planet"])),64))],64))}}),A=r({__name:"lowpolyPlanet",setup(t){const i={clearColor:"#11101B",shadows:!0,alpha:!1,outputColorSpace:s,shadowMapType:a,useLegacyLights:!0},r=M(0),l=({delta:t})=>{r.value+=.02*t};return(t,a)=>{const s=w("TresCanvas");return d(),u(h,null,[g(n),g(s,v(i,{"window-size":"",onLoop:l}),{default:y(()=>[a[0]||(a[0]=j("TresPerspectiveCamera",{position:[0,1,5],fov:75,near:.1,far:1e3},null,-1)),g(m(e)),a[1]||(a[1]=j("TresAmbientLight",{color:"#484068",intensity:1},null,-1)),(d(),b(_,null,{default:y(()=>[g(W)]),_:1})),g(m(o),{rotation:[0,r.value,0],radius:50,depth:50,count:5e3,size:.3,"size-attenuation":!0},null,8,["rotation"]),a[2]||(a[2]=j("TresPointLight",{color:"#1BFFEF",position:[0,0,-8],intensity:80,"cast-shadow":""},null,-1)),a[3]||(a[3]=j("TresDirectionalLight",{position:[0,2,4],intensity:3,"cast-shadow":"","shadow-mapSize-width":2048,"shadow-mapSize-height":2048},null,-1))]),_:1},16)],64)}}});export{A as default};

import"./@fesjs.OL5agSaf1735906732968.js";import{_ as n}from"./jszip._qOKqgyX1735906732968.js";import{F as t}from"./file-saver.XWydOzAr1735906732968.js";import{_ as e,aN as s}from"./three.VhLXWX0H1735906732968.js";const o=u;!function(n,t){const e=u,s=c();for(;;)try{if(895068===parseInt(e(294))/1*(-parseInt(e(241))/2)+-parseInt(e(267))/3+parseInt(e(211))/4+-parseInt(e(228))/5+parseInt(e(283))/6+-parseInt(e(261))/7*(-parseInt(e(231))/8)+parseInt(e(273))/9*(parseInt(e(230))/10))break;s.push(s.shift())}catch(o){s.push(s.shift())}}();const a=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[u(288)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();!function(){a(this,(function(){const n=u,t=new RegExp(n(213)),e=new RegExp(n(239),"i"),s=b(n(262));t.test(s+n(227))&&e[n(218)](s+n(276))?b():s("0")}))()}();const r=function(){let n=!0;return function(t,e){const s=n?function(){if(e){const n=e[u(288)](t,arguments);return e=null,n}}:function(){};return n=!1,s}}();function c(){const n=["startsWith","chain","8547255sHAbrx","name","2813890nnQAZG","4889216UPQtrY","call","data:image/JPEG;base64,","get","url:","onerror",".json","data:image/PNG;base64,","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","action","306jqVXus","parse","constructor","blob","push","image/jpeg","setResponseType","onloadend","return (function() ",'{}.constructor("return this")( )',"length","bind","folder","uuid","data:image/jpeg;base64,","result","WEBP","FileLoader","image/png","url:images/","7JoaJvK","init","data:","split","generateAsync","data:image/gif;base64,","967290bQaXEC","pop","trace","data:image/","exception","url","72liUlSl","log","string","input","toString","config.zip","images","geometries","table","app.json","106188FMyVqd","data","async","info","file","apply","data:image/WEBP;base64,","type","image/gif","scene",";base64,","9323RtGNNr","while (true) {}","forEach","loadAsync","slice","files","endsWith","toLowerCase","Cache","catch","counter","stateObject","data:image/png;base64,","warn","error","readAsDataURL","debu","5893624BEgAzi","message","function *\\( *\\)","then","JPEG","stringify","prototype","test","load","image/bmp","base64","GIF","gger","url:geometries/","substring"];return(c=function(){return n})()}async function i(n){const t=new s;return new Promise(((e,s)=>{const o=u;t[o(219)](n,(n=>e(JSON[o(242)](n))),void 0,(n=>s(n)))}))}function u(n,t){const e=c();return(u=function(n,t){return e[n-=209]})(n,t)}async function p(n){const t=o,s=new(e[t(258)]);return new Promise(((e,a)=>{const r=t;s[r(247)](r(244)),s[r(219)](n,(t=>{const s=r,c=new FileReader;c[s(248)]=()=>{const t=s,a=function(n){const t=o,e=n.split(".").pop()[t(301)]();return{jpg:t(246),jpeg:t(246),png:t(259),gif:t(291),bmp:t(220),webp:"image/webp"}[e]||"application/octet-stream"}(n),r=c[t(256)][t(264)](",")[1];e(t(263)+a+";base64,"+r)},c.onerror=n=>{a(n)},c[s(209)](t)}),void 0,(n=>a(n)))}))}r(void 0,(function(){const n=u,t=function(){const n=u;let t;try{t=Function(n(249)+n(250)+");")()}catch(e){t=window}return t}(),e=t.console=t.console||{},s=[n(274),n(307),n(286),n(308),n(271),n(281),n(269)];for(let o=0;o<s[n(251)];o++){const t=r[n(243)][n(217)][n(252)](r),a=s[o],c=e[a]||t;t.__proto__=r[n(252)](r),t[n(277)]=c[n(277)][n(252)](c),e[a]=t}}))(),e[o(302)].enabled=!0;const f=t=>{const s=o,a=new(e[s(258)]);return a[s(247)](s(244)),new Promise(((e,o)=>{const r=s;a[r(219)](t,(async t=>{const s=r;e(await n[s(297)](t))}),void 0,(n=>o(n)))}))},l=n=>{const t=o,e=n[t(225)](0,15),s=t(255),a=t(233),r=t(306),c=t(238),i=t(266),u=t(289);return s[t(226)](e)||a[t(226)](e)?t(215):r[t(226)](e)||c[t(226)](e)?"PNG":i[t(226)](e)||"data:image/GIF;base64,"[t(226)](e)?t(222):"data:image/webp;base64,"[t(226)](e||u[t(226)](e))?t(257):"Unknown"},g=e=>{const s=o,a=[];e.scene[s(280)]&&e.scene[s(280)].forEach((n=>{const t=s;"BufferGeometry"===n[t(290)]&&(a[t(245)]({uuid:n[t(254)],data:n.data}),n[t(284)]=t(224)+n[t(254)]+".json")}));const r=[];e[s(292)].images&&e.scene[s(279)].forEach((n=>{const t=s;n[t(272)]&&(r[t(245)]({uuid:n[t(254)],url:n[t(272)]}),n.url.type?n.url=t(260)+n.uuid+"."+n[t(272)][t(290)]+t(237):n[t(272)]=t(260)+n[t(254)]+"."+l(n[t(272)]))}));const c=new n;if(a[s(251)]){const n=c[s(253)]("geometries");a[s(296)]((t=>{const e=s;n[e(287)](t.uuid+e(237),JSON[e(216)](t.data))}))}if(r[s(251)]){const n=c[s(253)](s(279));r.forEach((t=>{const e=s;t.url[e(290)]?n.file(t[e(254)]+"."+t[e(272)][e(290)]+e(237),JSON[e(216)](t[e(272)])):n.file(t.uuid+"."+l(t[e(272)]),t.url[e(264)](e(293))[e(268)](),{base64:!0})}))}const i=JSON[s(216)](e);return c[s(287)]("app.json",i),c[s(265)]({type:"blob"})[s(214)]((n=>{const e=s;t.saveAs(n,e(278))}))},d=(n,t,e)=>{n[o(280)]<=0&&n.images<=0&&e(t)},m=(t,e)=>{const s=o;let a=null;return n[s(297)](t)[s(214)]((n=>{const t=s;n[t(299)][t(282)]?n.files["app.json"][t(285)](t(275))[t(214)]((s=>{var r,c;const i=t;a=JSON[i(242)](s);const u=(n=>{var t,e;const s=o,a={geometries:0,images:0};return null==(t=n.scene[s(280)])||t.forEach((n=>{const t=s;n[t(284)].startsWith(t(235))&&a[t(280)]++})),null==(e=n.scene[s(279)])||e.forEach((n=>{const t=s;n[t(272)].startsWith(t(235))&&a[t(279)]++})),a})(a);d(u,a,e),null==(r=a[i(292)][i(280)])||r[i(296)]((t=>{const s=i;t.data[s(226)](s(235))&&n[s(299)][t.data[s(298)](4)].async(s(275)).then((n=>{const o=s;t[o(284)]=JSON[o(242)](n),u[o(280)]--,d(u,a,e)}))})),null==(c=a[i(292)][i(279)])||c[i(296)]((t=>{const s=i;if(t[s(272)][s(226)]("url:")){const o=t[s(272)][s(298)](4);o[s(300)](".json")?n[s(299)][o].async(s(275))[s(214)]((n=>{const o=s;t.url=JSON[o(242)](n),u[o(279)]--,d(u,a,e)})):n[s(299)][o][s(285)](s(221)).then((n=>{const r=s,c=o[r(264)]("."),i=c[c[r(251)]-1].toUpperCase();t[r(272)]=r(270)+i+r(293)+n,u[r(279)]--,d(u,a,e)}))}}))})):console[t(308)]("非标准文件：不存在 app.json")}),(n=>{const e=s;console[e(308)](t[e(229)]+": "+n[e(212)])})),a};function b(n){function t(n){const e=u;if(typeof n===e(275))return function(n){}[e(243)](e(295))[e(288)](e(304));1!==(""+n/n)[e(251)]||n%20==0?function(){return!0}[e(243)](e(210)+e(223))[e(232)](e(240)):function(){return!1}[e(243)](e(210)+e(223))[e(288)](e(305)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{f as a,p as b,g as e,l as g,m as i,i as l};

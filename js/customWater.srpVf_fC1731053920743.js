import{_ as t,C as e,a6 as n}from"./three.eGpwEcxC1731053920743.js";import{e as r,W as a,U as o,c as s}from"./@tresjs.hJVQLtpa1731053920743.js";import{a as i}from"./index.m4EhFlZy1731053920743.js";import"./index.e2IVQzpO1731053920743.js";import{z as l}from"./three-custom-shader-material.u9oeG2Gi1731053920743.js";import{p as u}from"./gl-noise.BrVtymbx1731053920743.js";import{d as c,b as p,a3 as f,w as g,o as h,D as m,J as v,j as d,u as _,r as b,f as w,g as M,aj as y,ak as j,m as x,al as C}from"./@vue.u2cBPEWn1731053920743.js";import{P as S}from"./tweakpane.yHWGBmom1731053920743.js";import{_ as I}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Ma59K22X1731053920743.js";import"./@vueuse.weJ7f3dz1731053920743.js";import"./three-stdlib.6SZFIoWk1731053920743.js";import"./@pmndrs.cFq3swDI1731053920743.js";import"./object-hash.g-Wl-r3f1731053920743.js";import"./@amap.p7X0bWcq1731053920743.js";import"./jszip.djQt-NeA1731053920743.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.m90VcbWv1731053920743.js";import"./all.three.3qiEup3I1731053920743.js";import"./oimophysics.x0jH7fze1731053920743.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.P8D0Wsg11731053920743.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.zvLkagaB1731053920743.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.o8NcsPS21731053920743.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.RkzIl_-K1731053920743.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.IEzz3KAQ1731053920743.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.uYiXQRJU1731053920743.js";const z=B;!function(t,e){const n=B,r=H();for(;;)try{if(140449===-parseInt(n(358))/1*(parseInt(n(343))/2)+-parseInt(n(319))/3*(-parseInt(n(340))/4)+-parseInt(n(318))/5+-parseInt(n(314))/6+parseInt(n(317))/7*(parseInt(n(310))/8)+parseInt(n(329))/9*(parseInt(n(365))/10)+-parseInt(n(334))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(361)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function B(t,e){const n=H();return(B=function(t,e){return n[t-=309]})(t,e)}!function(){T(this,(function(){const t=B,e=new RegExp("function *\\( *\\)"),n=new RegExp(t(337),"i"),r=O("init");e[t(331)](r+t(335))&&n[t(331)](r+"input")?O():r("0")}))()}();const F=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[B(361)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();F(void 0,(function(){const t=B,e=function(){const t=B;let e;try{e=Function(t(353)+t(313)+");")()}catch(n){e=window}return e}(),n=e[t(342)]=e[t(342)]||{},r=[t(339),t(325),t(355),t(367),t(354),t(338),t(362)];for(let a=0;a<r[t(321)];a++){const e=F[t(366)].prototype[t(322)](F),o=r[a],s=n[o]||e;e[t(312)]=F[t(322)](F),e.toString=s[t(360)][t(322)](s),n[o]=e}}))();const W=[z(324)],G=["args"];function H(){const t=["\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","__proto__",'{}.constructor("return this")( )',"593304jvyNjT","action","call","6678VoeBXE","674785SBoqwF","9NFnMpI","gger","length","bind","debu","rotation-x","warn","height","Color","brightness","256833fPbPOr","value","test","MeshPhysicalMaterial","tmRef","554026GMJKBC","chain","fragment","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","log","201808yuBYrw","baseMaterial","console","2340HkAXln","waterHighlight","while (true) {}","DoubleSide","convertLinearToSRGB","string","TresMesh","vertex","waterColor","flatShading","return (function() ","exception","info","uTime","material","53mHbwhc","Flatshading","toString","apply","trace","dispose","counter","60RFUfRd","constructor","error","#b3ffff","1376blUufZ"];return(H=function(){return t})()}const D=c({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:"#52a7f7"},waterHighlight:{default:z(309)},brightness:{default:1},baseMaterial:{default:t[z(332)]}},setup(o){const s=z,i=o,c=p(null),b={vertex:s(311),fragment:"\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t"},w={uTime:{value:0},waterColor:{value:new e(i.waterColor).convertLinearToSRGB()},waterHighlight:{value:new(t[s(327)])(i[s(344)])[s(347)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(328)]},uHeight:{value:i[s(326)]}},{onLoop:M}=r();return M((({elapsed:t})=>{w[s(356)].value=-t/5})),f((()=>{const n=s;i[n(326)]&&(w.uHeight[n(330)]=i[n(326)]),i[n(351)]&&(w.waterColor[n(330)]=new(t[n(327)])(i[n(351)])[n(347)]()),i.waterHighlight&&(w[n(344)][n(330)]=new e(i.waterHighlight).convertLinearToSRGB()),i[n(328)]&&(w.brightness[n(330)]=i[n(328)])})),g((()=>i[s(359)]),(t=>{const e=s;c[e(330)][e(357)].needsUpdate=!0})),g((()=>i[s(341)]),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:u(b[n(350)]),fragmentShader:b[n(336)],uniforms:w,flatShading:i.Flatshading,side:t[n(346)],roughness:.2,metalness:.1,silent:!0});c[n(330)][n(357)][n(363)](),c[n(330)][n(357)]=r})),(e,r)=>{const o=s;return h(),m(o(349),{ref_key:o(333),ref:c,"rotation-x":-Math.PI/2},[v("TresBoxGeometry",{args:[5,5,e[o(326)],64,64,1]},null,8,G),d(_(a),{baseMaterial:n,vertexShader:_(u)(b[o(350)]),fragmentShader:b.fragment,uniforms:w,side:t[o(346)],roughness:.2,metalness:.1,flatShading:e.Flatshading,silent:""},null,8,["baseMaterial","vertexShader","fragmentShader","side",o(352)])],8,W)}}});function O(t){function e(t){const n=B;if(typeof t===n(348))return function(t){}[n(366)](n(345))[n(361)](n(364));1!==(""+t/t).length||t%20==0?function(){return!0}[n(366)](n(323)+n(320))[n(316)](n(315)):function(){return!1}[n(366)](n(323)+n(320))[n(361)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const P=A;!function(t,e){const n=A,r=R();for(;;)try{if(648758===parseInt(n(498))/1*(-parseInt(n(479))/2)+parseInt(n(535))/3+-parseInt(n(541))/4*(-parseInt(n(526))/5)+-parseInt(n(491))/6*(-parseInt(n(492))/7)+-parseInt(n(536))/8+parseInt(n(510))/9*(parseInt(n(520))/10)+-parseInt(n(534))/11)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(488)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){k(this,(function(){const t=A,e=new RegExp(t(495)),n=new RegExp(t(506),"i"),r=E(t(528));e.test(r+"chain")&&n[t(486)](r+t(529))?E():r("0")}))()}();const L=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[A(488)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function R(){const t=["浪头颜色","TresAmbientLight","bind","trace","647720FWQpuW","ACESFilmicToneMapping","log","addBinding","value","MeshStandardMaterial","TresDirectionalLight","test","label","apply","gger","pos-y.jpg","246wndBFA","181111dkFRrS","waterHighlight","change","function *\\( *\\)","return (function() ","pos-x.jpg","2DWJrtZ","neg-y.jpg","counter","console","toString","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","#52a7f7","MeshBasicMaterial","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","prototype","warn","1611ISMhBw","action","pos-z.jpg","MeshPhysicalMaterial","MeshPhongMaterial","neg-z.jpg","waterColor","debu","水体颜色","stateObject","26930oWbjMp","__proto__","exception","while (true) {}","MeshToonMaterial","addBlade","55LwrsyE","list","init","input","height","MeshNormalMaterial","MeshDepthMaterial","baseMaterial","7943936tJgHsS","1872468tDWLgh","4196072lXAomV","MeshLambertMaterial","call","customWater","length","136788tdWaDq","#627179","error"];return(R=function(){return t})()}function A(t,e){const n=R();return(A=function(t,e){return n[t-=479]})(t,e)}L(void 0,(function(){const t=A;let e;try{e=Function(t(496)+'{}.constructor("return this")( ));')()}catch(a){e=window}const n=e[t(501)]=e[t(501)]||{},r=[t(481),t(509),"info",t(543),t(522),"table",t(547)];for(let o=0;o<r[t(540)];o++){const e=L[t(507)][t(508)][t(546)](L),a=r[o],s=n[a]||e;e[t(521)]=L[t(546)](L),e.toString=s[t(502)][t(546)](s),n[a]=e}}))();const N=c({__name:P(539),setup(e){const n=P,r=b({alpha:!0,toneMapping:t[n(480)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(542),sectionColor:"#3a78a2",sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),u=b({height:.2,Flatshading:!1,waterColor:n(504),waterHighlight:"#b3ffff",brightness:1,baseMaterial:n(513)}),c=new S;return c.addBinding(u,n(530),{label:"高度",min:.1,max:5,step:.1}),c[n(482)](u,n(516),{label:n(518)}),c[n(482)](u,n(493),{label:n(544)}),c[n(482)](u,"brightness",{label:"亮度",min:0,max:1,step:.01}),c[n(482)](u,"Flatshading",{label:"Flatshading"}),c[n(525)]({view:n(527),label:"材质",options:[{text:n(513),value:n(513)},{text:n(505),value:"MeshBasicMaterial"},{text:n(531),value:n(531)},{text:n(484),value:n(484)},{text:"MeshPhongMaterial",value:n(514)},{text:n(524),value:n(524)},{text:"MeshLambertMaterial",value:n(537)},{text:n(532),value:"MeshDepthMaterial"}],value:u[n(533)]}),c.on(n(494),(t=>{const e=n;"材质"===t.target[e(487)]&&(u.baseMaterial=t[e(483)])})),(t,e)=>{const c=n;return h(),w(_(s),x(r,{"window-size":""}),{default:M((()=>[e[0]||(e[0]=v("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1)),d(_(o),y(j(a)),null,16),e[1]||(e[1]=v(c(545),{intensity:.5},null,-1)),e[2]||(e[2]=v(c(485),{position:[15,15,15],intensity:1},null,-1)),d(D,y(j(u)),null,16),d(_(I),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:M((()=>[d(_(i),{files:[c(497),"neg-x.jpg",c(490),c(499),c(512),c(515)],path:c(503)})])),_:1}))])),_:1},16)}}});function E(t){function e(t){const n=A;if("string"==typeof t)return function(t){}[n(507)](n(523))[n(488)](n(500));1!==(""+t/t)[n(540)]||t%20==0?function(){return!0}[n(507)](n(517)+n(489))[n(538)](n(511)):function(){return!1}[n(507)](n(517)+n(489)).apply(n(519)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{N as default};

import{i as n}from"./ice-utils.p_TSwxHt1728531791220.js";import{_ as t,o as e}from"./gl-matrix.6E0K5u201728531791220.js";import{P as o}from"./tweakpane.yHWGBmom1728531791220.js";import{d as r,r as i,q as a,o as c,E as s,L as u,u as f}from"./@vue.bvMz0l_u1728531791220.js";const l="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",m="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}";function _(n,t){const e=A();return(_=function(n,t){return e[n-=378]})(n,t)}const d=_;!function(n,t){const e=_,o=A();for(;;)try{if(694213===-parseInt(e(443))/1+-parseInt(e(414))/2*(-parseInt(e(478))/3)+parseInt(e(385))/4*(parseInt(e(432))/5)+-parseInt(e(380))/6*(-parseInt(e(383))/7)+parseInt(e(421))/8*(parseInt(e(450))/9)+parseInt(e(426))/10+parseInt(e(433))/11*(-parseInt(e(446))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[_(472)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){x(this,(function(){const n=_,t=new RegExp(n(454)),e=new RegExp(n(477),"i"),o=b(n(394));t[n(402)](o+n(470))&&e[n(402)](o+n(440))?b():o("0")}))()}();const E=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[_(472)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();E(void 0,(function(){const n=_,t=function(){const n=_;let t;try{t=Function(n(480)+n(424)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(413)]||{},o=["log",n(436),n(425),n(428),"exception",n(471),n(392)];for(let r=0;r<o[n(410)];r++){const t=E[n(479)].prototype.bind(E),i=o[r],a=e[i]||t;t[n(412)]=E[n(448)](E),t[n(449)]=a.toString[n(448)](a),e[i]=t}}))();const p={id:"canvaswebgl"},g=[d(386)];function A(){const n=["mixParam","clearColor","string","UNSIGNED_BYTE","RGBA","offset_right_top","canvas","inline","querySelector","debu","addBinding","texParameteri","vertexAttribPointer","chain","table","apply","COLOR_ATTACHMENT0","stateObject","hidden","getElementById","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1259835BJIAga","constructor","return (function() ","call","ARRAY_BUFFER","lookAt","bufferData","FRAMEBUFFER","3339918JEllCy","addBlade","ELEMENT_ARRAY_BUFFER","7PzGtxJ","COLOR_BUFFER_BIT","4683960fmwTNx","src","logo-texture","是否后处理","scale","webgl","TEXTURE_MIN_FILTER","trace","BYTES_PER_ELEMENT","init","offset_left_bottom","offset_left_top","while (true) {}","TEXTURE_2D","bindFramebuffer","translate","innerHeight","test","mat4","gger","enableVertexAttribArray","drawElements","NEAREST","CLAMP_TO_EDGE","blendFunc","length","width","__proto__","console","4LeYhYp","uView","slider","create","useProgram","SRC_ALPHA","TEXTURE_WRAP_S","1920WXQgdO","ONE_MINUS_SRC_ALPHA","change",'{}.constructor("return this")( )',"info","7766600rcdZsu","getUniformLocation","error","createTexture","TRIANGLES","BLEND","5PnVbkH","17743oBZStZ","offset_right_bottom","uniformMatrix4fv","warn","webglPostProcessing","bindBuffer","bindTexture","input","img","innerWidth","252996ffhpOc","enable","clear","26976AWAkWf","#canvaswebgl","bind","toString","46089vDSwDO","height","getContext","uModel","function *\\( *\\)","TEXTURE_MAG_FILTER","STATIC_DRAW"];return(A=function(){return n})()}const R=r({__name:d(437),setup(r){const _=d;let x,E,A,R,b,T,F,y,v,h,B,w,I;const P=1,C=.71,S=.76,U=new o({title:"参数"}),D=i({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[_(381)]({view:_(416),label:"颜色",min:0,max:1,value:.5}).on(_(423),(n=>{Y(),E.uniform1f(w,n.value)}));let L=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U[_(467)](D,_(475),{label:_(388)}),U[_(467)](D,_(462),{picker:_(464),x:{min:0,max:1},y:{min:0,max:1}}).on(_(423),(n=>{const t=_;L[0]=D[t(462)].x,L[1]=D.offset_right_top.y,Y()})),U[_(467)](D,_(434),{picker:_(464),x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=_;L[5]=D[t(434)].x,L[6]=D[t(434)].y,Y()})),U[_(467)](D,"offset_left_bottom",{picker:_(464),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(423),(n=>{const t=_;L[10]=D[t(395)].x,L[11]=D[t(395)].y,Y()})),U[_(467)](D,_(396),{picker:_(464),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(423),(n=>{const t=_;L[15]=D.offset_left_top.x,L[16]=D[t(396)].y,Y()})),a((()=>{N()}));const N=function(){const t=_;x=document[t(465)](t(447)),x.width=window[t(442)],x.height=window[t(401)],E=x[t(452)](t(390)),E&&(function(){const t=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);R=j(e,o),A=n(E,l,m),v=E[t(427)](A,"uProjection"),h=E[t(427)](A,t(415)),B=E[t(427)](A,t(453)),I=k(document[t(476)](t(387)))}(),Y(),E[t(444)](E[t(431)]),E[t(409)](E[t(419)],E[t(422)]),M())};function M(){const n=_;E[n(399)](E[n(379)],F),E.clearColor(P,C,S,1),E[n(445)](E.COLOR_BUFFER_BIT),function(){const n=_;E[n(418)](A),E[n(438)](E[n(482)],R);const o=t[n(403)].create();e(o,0,x[n(411)],x[n(451)],0,.1,100),E[n(435)](v,!1,o);const r=t[n(403)].create();t[n(403)][n(483)](r,[0,0,1],[0,0,0],[0,1,0]),E[n(435)](h,!1,r),O(I,600,600),O(I,400,400)}(),E.bindFramebuffer(E[n(379)],null),D[n(475)]&&(E[n(445)](E[n(384)]),E[n(458)](0,0,1,1),E.bindBuffer(E.ARRAY_BUFFER,b),E.useProgram(T),E[n(439)](E[n(398)],y)),E[n(406)](E[n(430)],6,E[n(460)],0),requestAnimationFrame(M)}function O(n,e,o){const r=_;let i=t[r(403)][r(417)]();t[r(403)][r(400)](i,i,[e,o,0]),t[r(403)][r(389)](i,i,[250,250,0]),E[r(435)](B,!1,i),E[r(439)](E[r(398)],n),E[r(406)](E.TRIANGLES,6,E.UNSIGNED_BYTE,0)}function Y(){const t=_,e=new Uint8Array([0,1,2,0,2,3]);b=j(L,e),T=n(E,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),w=E[t(427)](T,t(457)),E[t(427)](T,"color"),function(){const n=_;y=k(x),F=E.createFramebuffer(),E.bindFramebuffer(E[n(379)],F),E.framebufferTexture2D(E.FRAMEBUFFER,E[n(473)],E[n(398)],y,0),E.bindFramebuffer(E.FRAMEBUFFER,null)}()}function k(n){const t=_,e=E[t(429)]();return E[t(439)](E.TEXTURE_2D,e),n instanceof HTMLImageElement?E.texImage2D(E[t(398)],0,E[t(461)],E[t(461)],E[t(460)],n):E.texImage2D(E[t(398)],0,E[t(461)],n[t(411)],n[t(451)],0,E[t(461)],E[t(460)],null),E[t(468)](E[t(398)],E[t(391)],E[t(407)]),E[t(468)](E[t(398)],E[t(455)],E.NEAREST),E[t(468)](E[t(398)],E[t(420)],E[t(408)]),E[t(468)](E[t(398)],E.TEXTURE_WRAP_T,E[t(408)]),e}function j(n,t){const e=_,o=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,o),E.bufferData(E.ARRAY_BUFFER,n,E.STATIC_DRAW);const r=3*Float32Array[e(393)]+2*Float32Array[e(393)];E[e(469)](0,3,E.FLOAT,!1,r,0),E[e(405)](0),E[e(469)](1,2,E.FLOAT,!1,r,3*Float32Array.BYTES_PER_ELEMENT),E[e(405)](1);const i=E.createBuffer();return E.bindBuffer(E[e(382)],i),E[e(378)](E[e(382)],t,E[e(456)]),E[e(438)](E.ARRAY_BUFFER,null),o}return(n,t)=>{const e=_;return c(),s(e(463),p,[u(e(441),{id:e(387),src:f("./")+"/plugins/postProcessing/image/logo.png",style:{display:"none"}},null,8,g)])}}});function b(n){function t(n){const e=_;if(typeof n===e(459))return function(n){}.constructor(e(397))[e(472)]("counter");1!==(""+n/n)[e(410)]||n%20==0?function(){return!0}.constructor("debugger")[e(481)]("action"):function(){return!1}[e(479)](e(466)+e(404))[e(472)](e(474)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{R as default};

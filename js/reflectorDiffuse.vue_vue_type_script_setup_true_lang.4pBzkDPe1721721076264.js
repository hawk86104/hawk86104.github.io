import{bZ as t,a0 as n,C as e,j as r}from"./three.fnkrvySq1721721076264.js";import{N as o}from"./@tresjs.tWkmYPO61721721076264.js";import{R as c}from"./all.three.e2UOJjs11721721076264.js";import{d as i,b as a,a4 as s,a1 as u,w as f,o as l,D as p,J as m,m as d,u as v}from"./@vue.Q1VpS3901721721076264.js";function g(){const t=["trace","replace","100pPeCYl","16wpssmC","536qMNqBR","console","while (true) {}","table","init","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","2624895hFefRi","toString","constructor","info","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","bind","162415EwBzfS","error","action","gger","21080010cceUYm","vertexShader","#include <emissivemap_fragment>","log","input","5562459Knbmqk","prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","void main() {","chain","fragmentShader","apply","4810044KVJpNZ","__proto__","call","77774VePvId","function *\\( *\\)","test",'{}.constructor("return this")( )',"65565qUEpGW","length","debu"];return(g=function(){return t})()}!function(t,n){const e=x,r=g();for(;;)try{if(535707===parseInt(e(409))/1*(parseInt(e(441))/2)+-parseInt(e(416))/3+-parseInt(e(408))/4*(-parseInt(e(422))/5)+parseInt(e(438))/6+parseInt(e(431))/7+parseInt(e(410))/8*(parseInt(e(445))/9)+-parseInt(e(426))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(437)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=g();return(x=function(t,n){return e[t-=408]})(t,n)}!function(){h(this,(function(){const t=x,n=new RegExp(t(442)),e=new RegExp(t(433),"i"),r=b(t(414));n[t(443)](r+t(435))&&e.test(r+t(430))?b():r("0")}))()}();const y=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();y(void 0,(function(){const t=x;let n;try{n=Function("return (function() "+t(444)+");")()}catch(o){n=window}const e=n[t(411)]=n[t(411)]||{},r=[t(429),"warn",t(419),t(423),"exception",t(413),t(448)];for(let c=0;c<r.length;c++){const n=y[t(418)][t(432)].bind(y),o=r[c],i=e[o]||n;n[t(439)]=y.bind(y),n[t(417)]=i.toString[t(421)](i),e[o]=n}}))();function b(t){function n(t){const e=x;if("string"==typeof t)return function(t){}[e(418)](e(412))[e(437)]("counter");1!==(""+t/t)[e(446)]||t%20==0?function(){return!0}[e(418)](e(447)+e(425))[e(440)](e(424)):function(){return!1}[e(418)](e(447)+"gger")[e(437)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=j;!function(t,n){const e=j,r=S();for(;;)try{if(590323===parseInt(e(150))/1*(parseInt(e(155))/2)+-parseInt(e(169))/3*(parseInt(e(164))/4)+-parseInt(e(105))/5+parseInt(e(166))/6+parseInt(e(172))/7*(-parseInt(e(145))/8)+-parseInt(e(135))/9*(-parseInt(e(154))/10)+parseInt(e(109))/11*(parseInt(e(147))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(114)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=j,n=new RegExp(t(168)),e=new RegExp(t(132),"i"),r=z("init");n[t(106)](r+t(116))&&e.test(r+t(151))?z():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[j(114)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=j;let n;try{n=Function(t(146)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n[t(160)]=n[t(160)]||{},r=[t(141),"warn",t(111),t(115),t(162),t(136),"trace"];for(let c=0;c<r[t(130)];c++){const n=I[t(110)][t(122)][t(167)](I),o=r[c],i=e[o]||n;n[t(128)]=I[t(167)](I),n.toString=i[t(107)].bind(i),e[o]=n}}))();const C=["rotation-x"],M=[w(144)];function j(t,n){const e=S();return(j=function(t,n){return e[t-=104]})(t,n)}function S(){const t=["aoMap","1686655DNosUS","test","toString","reflectorDiffuse","33kqcXko","constructor","info","channel","assign","apply","error","chain","gger","value","debu","update","TresPlaneGeometry","prototype","tmRef","color","TresMesh","uniforms","reflectMap","__proto__","call","length","tpgRef","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#444","set","2637ziBrbi","table","wrapS","attributes","renderTargetUniform","stateObject","log","counter","uv1","object","24104neDGUM","return (function() ","1079916DjUEsA","while (true) {}","tmsmRef","1sdQlby","input","mixStrength","string","14050gEjxJV","1099228btknDN","mirror","TresMeshStandardMaterial","visible","textureMatrixUniform","console","onBeforeRender","exception","action","94216sEdvwx","add","3356430btZrZC","bind","function *\\( *\\)","108rOQXPN","wrapT","repeat","35ccfezR","TresGroup"];return(S=function(){return t})()}const E=i({__name:w(108),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const g=w;let h,y;const b=i,_=new t(9.5,10),I=a(),j=a(),S=a(),E=new c,z={mirror:{value:b[g(156)]},mixStrength:{value:b[g(152)]}},R=([h,y]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,y(),h);for(var T=0;T<3;T++)R[T][g(137)]=n,R[T][g(170)]=n,R[T][g(171)][g(134)](16,16);const U={color:new e(g(133)),metalness:1,roughness:1,map:R[0],metalnessMap:R[2],roughnessMap:R[2],aoMap:R[2],aoMapIntensity:1,normalMap:R[1],normalScale:new r(3,3)},k=t=>{const n=g;t.uniforms[n(127)]=E[n(139)],t[n(126)].textureMatrix=E[n(159)],t.uniforms=Object[n(113)](t.uniforms,z),(t=>{const n=x;t[n(427)]=t[n(427)][n(449)](n(434),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(427)]=t[n(427)][n(449)]("#include <project_vertex>",n(420))})(t),(t=>{const n=x;t.fragmentShader=t[n(436)][n(449)]("void main() {",n(415)),t.fragmentShader=t[n(436)][n(449)](n(428),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=g;I.value&&(I[t(118)][t(138)][t(143)]=I.value[t(138)].uv),S[t(118)]&&(S.value[t(104)][t(112)]=1,S[t(118)].onBeforeCompile=k),j[t(118)]&&(j[t(118)][t(165)](E),j.value[t(161)]=(n,e,r)=>{E[t(120)](n,e,r)}),b.color&&S[t(118)]&&(S.value[t(124)]=new e(b[t(124)]))})),f((()=>b.showGridHelper),(t=>{_[g(158)]=t})),(t,n)=>{const e=g;return l(),p(e(173),null,[m(e(125),{ref_key:e(123),ref:j,"rotation-x":-Math.PI/2,"position-y":-.1},[m(e(121),{ref_key:e(131),ref:I,args:[10,10]},null,512),m(e(157),d({ref_key:e(149),ref:S},U),null,16)],8,C),m("primitive",{object:v(_)},null,8,M)])}}});function z(t){function n(t){const e=j;if(typeof t===e(153))return function(t){}[e(110)](e(148))[e(114)](e(142));1!==(""+t/t)[e(130)]||t%20==0?function(){return!0}[e(110)](e(119)+e(117))[e(129)](e(163)):function(){return!1}.constructor(e(119)+e(117))[e(114)](e(140)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{E as _};

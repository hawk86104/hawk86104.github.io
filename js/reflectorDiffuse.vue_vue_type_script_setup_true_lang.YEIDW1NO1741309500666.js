import{c8 as t,a3 as n,C as e,V as r}from"./three.8tDGqmLF1741309500666.js";import{a as o}from"./@tresjs.yaBKiR-I1741309500666.js";import{R as a}from"./all.three.jR47vo8H1741309500666.js";import{d as c,b as i,a3 as s,a2 as u,o as l,H as f,N as p,m,u as d}from"./@vue.NRI7TcgI1741309500666.js";!function(t,n){const e=v,r=x();for(;;)try{if(307915===parseInt(e(373))/1*(-parseInt(e(370))/2)+parseInt(e(399))/3*(parseInt(e(403))/4)+parseInt(e(409))/5*(-parseInt(e(383))/6)+parseInt(e(406))/7*(parseInt(e(362))/8)+parseInt(e(375))/9+parseInt(e(398))/10*(parseInt(e(366))/11)+-parseInt(e(384))/12*(parseInt(e(365))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[v(377)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=v,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(405),"i"),r=y(t(407));n[t(389)](r+t(388))&&e[t(389)](r+t(382))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();h(void 0,(function(){const t=v;let n;try{n=Function(t(368)+t(400)+");")()}catch(o){n=window}const e=n[t(408)]=n[t(408)]||{},r=[t(371),t(392),t(387),t(393),t(386),"table",t(391)];for(let a=0;a<r.length;a++){const n=h[t(402)].prototype[t(390)](h),o=r[a],c=e[o]||n;n[t(396)]=h[t(390)](h),n[t(369)]=c[t(369)][t(390)](c),e[o]=n}}))();function v(t,n){const e=x();return(v=function(t,n){return e[t-=361]})(t,n)}function x(){const t=["bind","trace","warn","error","replace","void main() {","__proto__","fragmentShader","30lNkrCd","153buXZiE",'{}.constructor("return this")( )',"#include <project_vertex>","constructor","18716UKameF","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","79702MooLPD","init","console","176255JsAzjN","stateObject","56VAPEiZ","debu","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","136786ouVQJh","555467OsratO","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","return (function() ","toString","36OoOaxq","log","gger","32872vDSsqg","#include <emissivemap_fragment>","5037642Tdzdqs","vertexShader","apply","call","while (true) {}","action","string","input","6kotCqP","108mapkBg","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","exception","info","chain","test"];return(x=function(){return t})()}function y(t){function n(t){const e=v;if(typeof t===e(381))return function(t){}[e(402)](e(379))[e(377)](e(404));1!==(""+t/t).length||t%20==0?function(){return!0}[e(402)](e(363)+e(372))[e(378)](e(380)):function(){return!1}[e(402)]("debugger")[e(377)](e(361)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const I=b;!function(t,n){const e=b,r=j();for(;;)try{if(728543===parseInt(e(550))/1*(-parseInt(e(507))/2)+-parseInt(e(542))/3*(parseInt(e(553))/4)+-parseInt(e(535))/5+parseInt(e(557))/6+-parseInt(e(558))/7+-parseInt(e(517))/8*(-parseInt(e(527))/9)+parseInt(e(514))/10*(parseInt(e(554))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[b(538)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function b(t,n){const e=j();return(b=function(t,n){return e[t-=496]})(t,n)}!function(){_(this,(function(){const t=b,n=new RegExp(t(545)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=z("init");n[t(552)](r+"chain")&&e[t(552)](r+t(513))?z():r("0")}))()}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();w(void 0,(function(){const t=b,n=function(){const t=b;let n;try{n=Function(t(497)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(510)]=n[t(510)]||{},r=[t(532),"warn",t(509),"error",t(496),t(525),t(544)];for(let o=0;o<r.length;o++){const n=w[t(549)].prototype.bind(w),a=r[o],c=e[a]||n;n.__proto__=w[t(541)](w),n[t(533)]=c[t(533)][t(541)](c),e[a]=n}}))();const C=[I(521)],M=[I(546),I(498)];function j(){const t=["tpgRef","rotation-x","color","update","counter","table","assign","11889atvjcV","textureMatrix","string","length","TresPlaneGeometry","log","toString","set","2738495OuImAz","TresMeshStandardMaterial","TresMesh","apply","tmRef","uv1","bind","867180XKSTPB","#ffffff","trace","function *\\( *\\)","object","mirror","while (true) {}","constructor","2qTwGek","mixStrength","test","4zePNmq","3698937xblcuQ","stateObject","onBeforeRender","4598448mqNIHV","8946210Xcwgzk","exception","return (function() ","visible","gger","textureMatrixUniform","call","add","reflectMap","debu","TresGroup","uniforms","870074yIAgIn","repeat","info","console","aoMap","value","input","70THXjPY","reflectorDiffuse","wrapT","3592lEPmDn","wrapS","attributes"];return(j=function(){return t})()}const S=c({__name:I(515),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:I(543)}},async setup(c){const g=I;let h,x;const y=c,_=new t(9.5,10),b=i(),w=i(),j=i(),S=new a,z={mirror:{value:y[g(547)]},mixStrength:{value:y[g(551)]}},T=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var E=0;E<3;E++)T[E][g(518)]=n,T[E][g(516)]=n,T[E][g(508)][g(534)](16,16);const k={color:new e("#444"),metalness:1,roughness:1,map:T[0],metalnessMap:T[2],roughnessMap:T[2],aoMap:T[2],aoMapIntensity:1,normalMap:T[1],normalScale:new r(3,3)},P=t=>{const n=g;t[n(506)][n(503)]=S.renderTargetUniform,t[n(506)][n(528)]=S[n(500)],t[n(506)]=Object[n(526)](t[n(506)],z),(t=>{const n=v;t.vertexShader=t[n(376)][n(394)](n(395),n(385)),t[n(376)]=t[n(376)][n(394)](n(401),"\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t")})(t),(t=>{const n=v;t[n(397)]=t.fragmentShader[n(394)](n(395),n(364)),t[n(397)]=t[n(397)][n(394)](n(374),n(367))})(t)};return u((()=>{const t=g;b[t(512)]&&(b[t(512)][t(519)][t(540)]=b[t(512)].attributes.uv),j[t(512)]&&(j[t(512)][t(511)].channel=1,j[t(512)].onBeforeCompile=P),w[t(512)]&&(w[t(512)][t(502)](S),w[t(512)][t(556)]=(n,e,r)=>{S[t(523)](n,e,r)}),y[t(522)]&&j[t(512)]&&(j.value[t(522)]=new e(y[t(522)]))})),(t,n)=>{const e=g;return l(),f(e(505),null,[p(e(537),{ref_key:e(539),ref:w,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(531),{ref_key:e(520),ref:b,args:[10,10]},null,512),p(e(536),m({ref_key:"tmsmRef",ref:j},k),null,16)],8,C),p("primitive",{object:d(_),visible:t.showGridHelper},null,8,M)])}}});function z(t){function n(t){const e=b;if(typeof t===e(529))return function(t){}[e(549)](e(548)).apply(e(524));1!==(""+t/t)[e(530)]||t%20==0?function(){return!0}[e(549)](e(504)+e(499))[e(501)]("action"):function(){return!1}[e(549)](e(504)+e(499))[e(538)](e(555)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{S as _};

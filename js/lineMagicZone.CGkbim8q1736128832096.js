import{P as t}from"./tweakpane.yHWGBmom1736128832096.js";import{e,W as n,b as o,U as r}from"./@tresjs.pA0fT6uQ1736128832096.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.2-YKdZT61736128832096.js";import{_ as a}from"./three.8H01GNxA1736128832096.js";import{d as s,a7 as l,a4 as u,w as c,o as f,D as m,J as p,u as d,j as h,r as g,e as v,f as I,g as x,al as w,m as S}from"./@vue.yG49nQHr1736128832096.js";import"./@vueuse.iB8cUOAP1736128832096.js";import"./all.three.8pLHmzVA1736128832096.js";import"./oimophysics.x0jH7fze1736128832096.js";const y=U;!function(t,e){const n=U,o=T();for(;;)try{if(808761===parseInt(n(302))/1*(-parseInt(n(317))/2)+parseInt(n(303))/3*(parseInt(n(310))/4)+parseInt(n(289))/5*(-parseInt(n(300))/6)+parseInt(n(349))/7+-parseInt(n(322))/8*(-parseInt(n(324))/9)+parseInt(n(354))/10+-parseInt(n(296))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){_(this,(function(){const t=U,e=new RegExp(t(338)),n=new RegExp(t(311),"i"),o=R(t(307));e.test(o+t(288))&&n.test(o+t(353))?R():o("0")}))()}();const b=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[U(351)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function U(t,e){const n=T();return(U=function(t,e){return n[t-=288]})(t,e)}function T(){const t=["3738cVskIm","height","exception","lineMagicZone","init",'{}.constructor("return this")( )',"#409eff","1516hEOLmY","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uTime","uHeight","aNormal","bind","TresGroup","2mSYZji","position","while (true) {}","debu","map","5528Iimynz","counter","4437QmkuXn","trace","BufferGeometry","Color","info","xRadius","speed","error","stateObject","#90ee90","EllipseCurve","table","return (function() ","console","function *\\( *\\)","warn","uScale","array","TresBufferGeometry","aIndex","color","rotateX","floor","length","setFromPoints","8031093aUvNHA","value","apply","PointsMaterial","input","9254430CWKqLK","scale","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","alphaMap","chain","5615GfULAX","toString","set","getPoints","log","getAttribute","blending","10295153AqUUBZ","call","gger","AdditiveBlending","4338AuQJAQ","push","329026Ooaiyd"];return(T=function(){return t})()}b(void 0,(function(){const t=U,e=function(){const t=U;let e;try{e=Function(t(336)+t(308)+");")()}catch(n){e=window}return e}(),n=e[t(337)]=e.console||{},o=[t(293),t(339),t(328),t(331),t(305),t(335),t(325)];for(let r=0;r<o.length;r++){const e=b.constructor.prototype[t(315)](b),i=o[r],a=n[i]||e;e.__proto__=b[t(315)](b),e[t(290)]=a[t(290)].bind(a),n[i]=e}}))();const N=[y(345)],C=[y(318),y(343),y(314)],P=y(356),z=s({__name:y(306),props:{height:{default:1.6},speed:{default:1},color:{default:y(333)}},async setup(t){const r=y;let i,s;const g=l(),v=t,I=([i,s]=u((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,s(),i),x=new(a[r(334)])(0,0,8,8,0,2*Math.PI,!1,0),w=[];for(let e=0;e<5;e++)w[r(301)](...x[r(292)](719)),x[r(329)]+=.2,x.yRadius+=.2;const S=new Float32Array(w[r(321)](((t,e)=>e))),_=(new(a[r(326)]))[r(348)](w)[r(294)](r(318))[r(341)],b=new Float32Array(_[r(347)]);for(let e=0;e<_.length/3;e++){const t=3*e;_[t+1]+=.15*Math[r(346)](e/720);const n=e%720*3,o=3*(e%720+2880);b[t]=_[o]-_[n],b[t+1]=_[o+1]-_[n+1],b[t+2]=_[o+2]-_[n+2]}const U={uTime:{value:0},uScale:{value:g[r(355)]?g.scale:1},uHeight:{value:v[r(304)]},uPerlinTexture:{value:I[1]},baseColor:{value:new(a[r(327)])(v[r(344)])}},{onLoop:T}=e();return T((()=>{const t=r;U[t(312)][t(350)]+=.01*v[t(330)]})),c((()=>[v[r(344)],g[r(355)],v[r(304)]]),(([t,e,n])=>{const o=r;U.baseColor[o(350)][o(291)](t),U[o(340)][o(350)]=e,U[o(313)][o(350)]=n})),(t,e)=>{const o=r;return f(),m(o(316),null,[p("TresPoints",{rotateX:-Math.PI/2,scale:.1},[p(o(342),{position:[d(_),3],aIndex:[d(S),1],aNormal:[d(b),3]},null,8,C),h(d(n),{baseMaterial:a[o(352)],vertexShader:"\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n",fragmentShader:P,uniforms:U,map:d(I)[0],alphaMap:d(I)[0],transparent:"",depthWrite:!1,blending:a[o(299)],color:o(309),size:.1},null,8,["baseMaterial",o(321),o(357),o(295)])],8,N)])}}});function R(t){function e(t){const n=U;if("string"==typeof t)return function(t){}.constructor(n(319))[n(351)](n(323));1!==(""+t/t)[n(347)]||t%20==0?function(){return!0}.constructor(n(320)+n(298))[n(297)]("action"):function(){return!1}.constructor(n(320)+n(298))[n(351)](n(332)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=j;function j(t,e){const n=M();return(j=function(t,e){return n[t-=242]})(t,e)}!function(t,e){const n=j,o=M();for(;;)try{if(211992===-parseInt(n(276))/1+parseInt(n(275))/2*(-parseInt(n(268))/3)+-parseInt(n(257))/4+parseInt(n(245))/5*(-parseInt(n(258))/6)+parseInt(n(271))/7*(-parseInt(n(281))/8)+-parseInt(n(253))/9*(-parseInt(n(243))/10)+parseInt(n(262))/11)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const A=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[j(242)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){A(this,(function(){const t=j,e=new RegExp("function *\\( *\\)"),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=L(t(266));e[t(280)](o+t(247))&&n[t(280)](o+t(286))?L():o("0")}))()}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[j(242)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function M(){const t=["length","warn","init","bind","47553XXcJYR","table","console","5096vSVZts","debu","addBinding","exception","4aKzZlC","373535zzNQyI","gger","stateObject","#ff0000","test","3320dluTiq","counter","prototype","call","scale","input","action","apply","30xhZqik","TresCanvas","55IfLygn","TresPerspectiveCamera","chain","log","error","height","while (true) {}","lineMagicZone","183960yORQQq",'{}.constructor("return this")( )',"return (function() ","constructor","1583536QshIew","38616YfcBoh","toString","string","#201919","14571799zQReRD","TresAmbientLight"];return(M=function(){return t})()}D(void 0,(function(){const t=j,e=function(){const t=j;let e;try{e=Function(t(255)+t(254)+");")()}catch(n){e=window}return e}(),n=e[t(270)]=e.console||{},o=[t(248),t(265),"info",t(249),t(274),t(269),"trace"];for(let r=0;r<o[t(264)];r++){const e=D[t(256)][t(283)][t(267)](D),i=o[r],a=n[i]||e;e.__proto__=D[t(267)](D),e.toString=a[t(259)][t(267)](a),n[i]=e}}))();const O=s({__name:W(252),setup(e){const n=W,o=g({reflectivity:.1,showGridHelper:!0,scale:1}),a=g({color:n(279),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(273)](a,"color",{label:"颜色"}),s[n(273)](a,n(285),{label:"大小",min:.1,max:3,step:.1}),s[n(273)](a,n(250),{label:"高度",min:.1,max:3,step:.1}),s[n(273)](a,"speed",{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=v(s(244));return f(),I(l,{clearColor:s(261),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:x((()=>[e[0]||(e[0]=p(s(246),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(d(r),{enableDamping:""}),e[1]||(e[1]=p(s(263),{intensity:2},null,-1)),(f(),I(w,null,{default:x((()=>[h(z,S({position:[3,0,0]},a),null,16)])),_:1})),(f(),I(w,null,{default:x((()=>[h(z,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(f(),I(w,null,{default:x((()=>[h(i,S({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function L(t){function e(t){const n=j;if(typeof t===n(260))return function(t){}[n(256)](n(251))[n(242)](n(282));1!==(""+t/t).length||t%20==0?function(){return!0}[n(256)](n(272)+n(277))[n(284)](n(287)):function(){return!1}[n(256)]("debugger")[n(242)](n(278)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{O as default};

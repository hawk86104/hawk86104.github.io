import{F as e,_ as a}from"./@tresjs.BCHtwiaC1763540743861.js";import{c as s,d as o,f as r,T as t,h as n}from"./postprocessing.51l5tmA-1763540743861.js";import{C as i,E as c,b as m,X as u,a as p,F as l,L as d,c as w,u as h,U as f,N as g,O as y}from"./@takram.DcJcNz4v1763540743861.js";import{d as T,a as j,w as v,a9 as b,H as x,o as S,J as G,u as D,F}from"./@vue.Co_gxueH1763540743861.js";import{a5 as P,V as _}from"./three.rXKzP9fQ1763540743861.js";const E=["material"],M=["object","position"],R=["object"],z=["object"],B=T({__name:"atmosphereVanilla",setup(T){const B=j(),{controls:N,camera:O,scene:k,renderer:C}=e();C.depth=!1;const U=new Date("2000-06-01T10:00:00Z"),V=new i(0,c(67),1e3).toECEF(),W=m.WGS84.getSurfaceNormal(V);v(()=>N.value,e=>{e&&(O.value?.position.copy(V),O.value?.up.copy(W),b(e)?.target.copy(V))},{immediate:!0});const X=new u,q=new p,A=new l({distance:300});A.target.position.copy(V),A.castShadow=!0,A.shadow.camera.top=300,A.shadow.camera.bottom=-300,A.shadow.camera.left=-300,A.shadow.camera.right=300,A.shadow.camera.near=0,A.shadow.camera.far=600,A.shadow.mapSize.width=2048,A.shadow.mapSize.height=2048,A.shadow.normalBias=1,v(()=>B.value,e=>{e&&m.WGS84.getEastNorthUpFrame(V).decompose(e.position,e.quaternion,e.scale)});const H=new d(O.value),J=new s(C,{frameBufferType:P,multisampling:8});J.addPass(new o(k.value,O.value)),J.addPass(new r(O.value,H)),J.addPass(new r(O.value,new w,new t({mode:n.AGX}),new h)),(new f).setTypeFromRenderer(C).load("./plugins/useThreeGeospatial/exr/",function(e){Object.assign(X,e),A.transmittanceTexture=e.transmittanceTexture,q.irradianceTexture=e.irradianceTexture,Object.assign(H,e)});const{onBeforeRender:K}=a(),Z=new _,I=new _;return K(({elapsed:e})=>{const a=+U+5e6*e%864e5;g(a,Z),y(a,I),X.sunDirection.copy(Z),X.moonDirection.copy(I),A.sunDirection.copy(Z),q.sunDirection.copy(Z),H.sunDirection.copy(Z),A.update(),q.update(),J.render()}),(e,a)=>(S(),x(F,null,[G("TresMesh",{frustumCulled:!1,material:D(X)},[...a[0]||(a[0]=[G("TresPlaneGeometry",{args:[2,2]},null,-1)])],8,E),G("primitive",{object:D(q),position:[D(V).x,D(V).y,D(V).z]},null,8,M),G("primitive",{object:D(A)},null,8,R),G("primitive",{object:D(A).target},null,8,z),G("TresGroup",{ref_key:"tgRef",ref:B},[...a[1]||(a[1]=[G("TresMesh",{castShadow:"",receiveShadow:""},[G("TresTorusKnotGeometry",{args:[200,60,256,64]}),G("TresMeshPhysicalMaterial",{color:"white",roughness:.5,ior:1.45,clearcoat:1,clearcoatRoughness:.1})],-1)])],512)],64))}});export{B as _};

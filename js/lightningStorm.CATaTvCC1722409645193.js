import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.OkSaFJOI1722409645193.js";import{B as i,V as s,ck as n,az as e,N as r,h as o,ae as a,Y as h,q as c,a6 as u}from"./three.6E5muTWJ1722409645193.js";import{$ as l,D as p,i as m}from"./@tresjs.qmCJ68Vp1722409645193.js";import{c as d}from"./simplex-noise.MycypUyu1722409645193.js";import{d as f,a1 as g,o as y,D as b,u as x,r as v,j as w,g as S,m as I,F as P}from"./@vue.9bHx4gg21722409645193.js";import"./index.dSFV0dil1722409645193.js";import{_}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.7_Kqrz6V1722409645193.js";import"./three-custom-shader-material.Tfk8gm3s1722409645193.js";import"./object-hash.Une5niKX1722409645193.js";import"./@amap.VDWlHANn1722409645193.js";import"./jszip.EBLL5bdU1722409645193.js";import"./glsl-tokenizer.bKHxJMPW1722409645193.js";import"./glsl-token-string.tLooI1vy1722409645193.js";import"./glsl-token-functions.9RlG2kRC1722409645193.js";import"./tweakpane.yHWGBmom1722409645193.js";import"./@vueuse.NFOCyQQL1722409645193.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.Rr9HPxcG1722409645193.js";import"./all.three.GEVYdC2c1722409645193.js";import"./oimophysics.x0jH7fze1722409645193.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.L-WtQKek1722409645193.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.0McortQS1722409645193.js";import"./index.mNcWtqYh1722409645193.js";import"./three-stdlib.lGHJYkjv1722409645193.js";import"./@pmndrs.9AsxXQ-l1722409645193.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.-poSRcmS1722409645193.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.qhp2OAK41722409645193.js";const T=V;function M(){const t=["fraction0","call","raySegments","down","subrayDutyCycle","subrayProbability","needsUpdate","cross1","roughness","position","minRadius","string","getNewSegment","set","2650812NCVHPb","setIndex","radius0","drawRange","counter","simplexY","createSegment","LightningStrike","vanishingTimeFactor","getSeed","onDecideSubrayCreation","recursion","8QiiZOl","prototype","isEternal","seed","deathTime","push","noiseSeed","simplexZ","positionAttribute","copyParameters","maxRaySegments","middleLinPos","11zwSrJg","sourceOffset","currentSubray","while (true) {}","array","sin","toString","normalize","max","createMesh","uvs","fractalRay","createTriangleVerticesWithoutUVs","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3882730sGdUuD","test","time","49148BXnNHi","45ywVTqx","clone","RAY_VANISHING","currentUVCoordinate","createDefaultSubrayCreationCallbacks","console","min","error","currentVertex","currentCoordinate","newPos","action","subVectors","return (function() ","log","exception","fillMesh","gger","subrayCylinderPosition","vertices","linPos0","propagationTimeFactor","RAY_STEADY","currentIndex","usage","9ngGqRW","generateUVs","recursionProbability","2TfXplQ","setSeed","currentCreateTriangleVertices",'{}.constructor("return this")( )',"lerpVectors","linPos1","addNewSubray","221aLaJxJ","13174gVGkLf","195834zwAVvz","isStatic","fractalRayRecursive","currentSeed","createPrismFaces","init","destOffset","ceil","SIN30DEG","initSubray","timeScale","setAttribute","radius0Factor","3769374THnquB","subrays","add","cos","sub","iteration","pow","positionVariationFactor","pos0","createSubray","simplexX","birthTime","floor","subrayPeriod","RAY_UNBORN","radius1","currentSegmentCallback","lerp","uvsAttribute","numSubrays","subrayConePosition","seedGenerator","multiplyScalar","forwardsFill","RAY_PROPAGATING","onSubrayCreation","isInitialSegment","index","beginVanishingTime","endPropagationTime","ramification","copy","stateObject","trace","103361feVCDg","up0","pos1","RAY_EXTINGUISHED","5KnytKV","maxSubrays","isLightningStrike","middlePos","up1","timeFraction","updateMesh","createTriangleVerticesWithUVs","state","createPrism","bind","fraction1","currentSegmentIndex","maxIterations","crossVectors","random","COS30DEG","radius1Factor","indices","update","maxSubrayRecursion","count","side","debu","vPos","RAY_INITIALIZED","straightness","apply","rayParameters","length","constructor","warn","randomGenerator","function *\\( *\\)","forwards"];return(M=function(){return t})()}!function(t,i){const s=V,n=M();for(;;)try{if(309722===parseInt(s(266))/1*(parseInt(s(389))/2)+-parseInt(s(361))/3*(-parseInt(s(360))/4)+-parseInt(s(270))/5*(parseInt(s(398))/6)+-parseInt(s(411))/7*(parseInt(s(331))/8)+parseInt(s(386))/9*(parseInt(s(357))/10)+-parseInt(s(343))/11*(-parseInt(s(319))/12)+-parseInt(s(396))/13*(parseInt(s(397))/14))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const R=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(297)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){R(this,(function(){const t=V,i=new RegExp(t(303)),s=new RegExp(t(356),"i"),n=z("init");i[t(358)](n+"chain")&&s[t(358)](n+"input")?z():n("0")}))()}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[V(297)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();A(void 0,(function(){const t=V;let i;try{i=Function(t(374)+t(392)+");")()}catch(e){i=window}const s=i[t(366)]=i[t(366)]||{},n=[t(375),t(301),"info",t(368),t(376),"table",t(265)];for(let r=0;r<n[t(299)];r++){const i=A.constructor[t(332)][t(280)](A),e=n[r],o=s[e]||i;i.__proto__=A.bind(A),i[t(349)]=o.toString[t(280)](o),s[e]=i}}))();class j extends i{constructor(t={}){const i=V;super(),this[i(272)]=!0,this.type=i(326),this[i(403)](j[i(340)](t,t)),this[i(352)]()}static createRandomGenerator(){const t=V,i=2053,s=[];for(let e=0;e<i;e++)s[t(336)](Math[t(285)]());const n={currentSeed:0,random:function(){const e=t,r=s[n[e(401)]];return n[e(401)]=(n[e(401)]+1)%i,r},getSeed:function(){return n[t(401)]/i},setSeed:function(s){const e=t;n.currentSeed=Math[e(423)](s*i)%i}};return n}static[T(340)](t={},i={}){const n=T,e=function(s){return i===t?s:s.clone()};return t[n(344)]=void 0!==i[n(344)]?e(i[n(344)]):new s(0,100,0),t[n(404)]=void 0!==i[n(404)]?e(i[n(404)]):new s(0,0,0),t[n(408)]=void 0!==i[n(408)]?i[n(408)]:1,t[n(313)]=void 0!==i[n(313)]?i[n(313)]:.9,t[n(296)]=void 0!==i[n(296)]?i[n(296)]:.7,t[n(267)]=void 0!==i[n(267)]?e(i.up0):new s(0,0,1),t[n(274)]=void 0!==i[n(274)]?e(i.up1):new s(0,0,1),t[n(321)]=void 0!==i[n(321)]?i.radius0:1,t.radius1=void 0!==i[n(426)]?i[n(426)]:1,t[n(410)]=void 0!==i[n(410)]?i[n(410)]:.5,t[n(287)]=void 0!==i[n(287)]?i.radius1Factor:.2,t[n(315)]=void 0!==i[n(315)]?i[n(315)]:.2,t[n(333)]=void 0!==i[n(333)]?i[n(333)]:void 0===i[n(422)]||void 0===i[n(335)],t.birthTime=i.birthTime,t.deathTime=i[n(335)],t[n(382)]=void 0!==i[n(382)]?i[n(382)]:.1,t.vanishingTimeFactor=void 0!==i.vanishingTimeFactor?i[n(327)]:.9,t.subrayPeriod=void 0!==i[n(424)]?i.subrayPeriod:4,t[n(309)]=void 0!==i.subrayDutyCycle?i[n(309)]:.6,t[n(283)]=void 0!==i[n(283)]?i[n(283)]:9,t.isStatic=void 0!==i.isStatic&&i[n(399)],t[n(262)]=void 0!==i[n(262)]?i[n(262)]:5,t[n(290)]=void 0!==i[n(290)]?i[n(290)]:3,t[n(388)]=void 0!==i[n(388)]?i[n(388)]:.6,t[n(387)]=void 0!==i.generateUVs&&i[n(387)],t[n(302)]=i.randomGenerator,t.noiseSeed=i[n(337)],t[n(329)]=i[n(329)],t[n(436)]=i.onSubrayCreation,t}[T(289)](t){const i=T;this[i(399)]||(this[i(298)][i(333)]||this[i(298)].birthTime<=t&&t<=this.rayParameters.deathTime?(this[i(276)](t),t<this.subrays[0][i(261)]?this.state=j[i(435)]:t>this[i(412)][0][i(439)]?this[i(278)]=j[i(363)]:this.state=j.RAY_STEADY,this.visible=!0):(this.visible=!1,t<this[i(298)].birthTime?this[i(278)]=j.RAY_UNBORN:this[i(278)]=j[i(269)]))}[T(403)](t){const i=T;this.rayParameters=t,this[i(283)]=void 0!==t.maxIterations?Math[i(423)](t[i(283)]):9,t.maxIterations=this.maxIterations,this.isStatic=void 0!==t[i(399)]&&t[i(399)],t[i(399)]=this[i(399)],this.ramification=void 0!==t.ramification?Math[i(423)](t[i(262)]):5,t[i(262)]=this[i(262)],this[i(290)]=void 0!==t[i(290)]?Math[i(423)](t[i(290)]):3,t[i(290)]=this[i(290)],this.recursionProbability=void 0!==t[i(388)]?t[i(388)]:.6,t[i(388)]=this[i(388)],this[i(387)]=void 0!==t[i(387)]&&t[i(387)],t[i(387)]=this[i(387)],void 0!==t[i(302)]?(this.randomGenerator=t[i(302)],this.seedGenerator=t[i(302)],void 0!==t[i(337)]&&this.seedGenerator[i(390)](t[i(337)])):(this.randomGenerator=j.createRandomGenerator(),this.seedGenerator=Math),void 0!==t[i(329)]?this[i(329)]=t[i(329)]:(this[i(365)](),void 0!==t[i(436)]&&(this[i(436)]=t[i(436)])),this[i(278)]=j[i(295)],this[i(271)]=Math[i(405)](1+Math[i(417)](this[i(262)],Math[i(351)](0,this.maxSubrayRecursion-1))),t[i(271)]=this.maxSubrays,this[i(341)]=2*(1<<this[i(283)]),this[i(412)]=[];for(let s=0;s<this[i(271)];s++)this.subrays[i(336)](this[i(420)]());this.raySegments=[];for(let s=0;s<this[i(341)];s++)this[i(307)].push(this[i(325)]());this[i(359)]=0,this[i(275)]=0,this[i(427)]=null,this[i(391)]=this[i(387)]?this[i(277)]:this.createTriangleVerticesWithoutUVs,this[i(430)]=0,this[i(345)]=null,this[i(282)]=0,this.isInitialSegment=!1,this.subrayProbability=0,this.currentVertex=0,this[i(384)]=0,this[i(370)]=0,this[i(364)]=0,this[i(380)]=null,this[i(353)]=null,this[i(288)]=null,this[i(339)]=null,this[i(429)]=null,this.simplexX=d(this[i(432)][i(285)]),this[i(324)]=d(this.seedGenerator.random),this[i(338)]=d(this[i(432)].random),this[i(304)]=new s,this[i(434)]=new s,this[i(292)]=new s,this.down=new s,this[i(273)]=new s,this[i(342)]=new s,this.newPos=new s,this[i(294)]=new s,this[i(312)]=new s}[T(352)](){const t=T,i=1<<this[t(283)],s=3*(i+1)*this.maxSubrays,o=18*i*this[t(271)];this[t(380)]=new Float32Array(3*s),this[t(288)]=new Uint32Array(o),this.generateUVs&&(this.uvs=new Float32Array(2*s)),this[t(377)](0),this[t(320)](new n(this[t(288)],1)),this[t(339)]=new e(this.vertices,3),this[t(409)](t(314),this.positionAttribute),this[t(387)]&&(this[t(429)]=new e(new Float32Array(this.uvs),2),this[t(409)]("uv",this[t(429)])),!this.isStatic&&(this[t(438)][t(385)]=r,this.positionAttribute[t(385)]=r,this[t(387)]&&(this.uvsAttribute[t(385)]=r)),this[t(380)]=this[t(339)][t(347)],this[t(288)]=this[t(438)][t(347)],this[t(387)]&&(this[t(353)]=this.uvsAttribute[t(347)])}[T(276)](t){const i=T;this[i(377)](t),this[i(322)][i(291)]=this[i(384)],this[i(438)][i(311)]=!0,this[i(339)].needsUpdate=!0,this[i(387)]&&(this.uvsAttribute[i(311)]=!0)}[T(377)](t){const i=T,s=this;this[i(369)]=0,this.currentIndex=0,this[i(370)]=0,this[i(364)]=0,this[i(354)](t,(function(n){const e=i,r=s[e(345)];t<r[e(422)]||(this.rayParameters.isEternal&&0==s[e(345)].recursion?(s[e(279)](n),s[e(329)](n,s)):t<r[e(261)]?s.timeFraction>=n[e(305)]*r.propagationTimeFactor&&(s[e(279)](n),s[e(329)](n,s)):t<r[e(439)]?(s[e(279)](n),s[e(329)](n,s)):(s.timeFraction<=r.vanishingTimeFactor+n[e(281)]*(1-r.vanishingTimeFactor)&&s[e(279)](n),s[e(329)](n,s)))}))}[T(395)](){return this.subrays[this.numSubrays++]}[T(407)](t,i){const s=T;t[s(419)][s(263)](i[s(344)]),t[s(268)][s(263)](i[s(404)]),t[s(267)][s(263)](i[s(267)]),t.up1[s(263)](i.up1),t.radius0=i[s(321)],t[s(426)]=i[s(426)],t.birthTime=i[s(422)],t[s(335)]=i.deathTime,t[s(408)]=i[s(408)],t[s(313)]=i[s(313)],t.straightness=i.straightness,t.propagationTimeFactor=i[s(382)],t[s(327)]=i[s(327)],t[s(283)]=this.maxIterations,t[s(334)]=void 0!==i[s(337)]?i[s(337)]:0,t.recursion=0}[T(354)](t,i){const s=T;this[s(359)]=t,this[s(427)]=i,this.numSubrays=0,this[s(407)](this[s(395)](),this[s(298)]);for(let n=0;n<this[s(430)];n++){const i=this[s(412)][n];this[s(345)]=i,this[s(302)].setSeed(i[s(334)]),i[s(261)]=o[s(428)](i[s(422)],i.deathTime,i[s(382)]),i[s(439)]=o[s(428)](i[s(335)],i[s(422)],1-i[s(327)]);const e=this[s(302)][s(285)];i.linPos0[s(318)](e(),e(),e())[s(433)](1e3),i[s(394)][s(318)](e(),e(),e())[s(433)](1e3),this[s(275)]=(t-i[s(422)])/(i[s(335)]-i[s(422)]),this.currentSegmentIndex=0,this.isInitialSegment=!0;const r=this[s(317)]();r[s(416)]=0,r[s(419)][s(263)](i[s(419)]),r[s(268)].copy(i[s(268)]),r.linPos0[s(263)](i[s(381)]),r[s(394)][s(263)](i[s(394)]),r.up0[s(263)](i[s(267)]),r.up1[s(263)](i[s(274)]),r[s(321)]=i.radius0,r[s(426)]=i[s(426)],r[s(305)]=0,r[s(281)]=1,r[s(418)]=1-i[s(296)],this[s(310)]=this[s(262)]*Math[s(417)](this[s(388)],i[s(330)])/(1<<i.maxIterations),this[s(400)](r)}this.currentSegmentCallback=null,this.currentSubray=null}[T(400)](t){const i=T;if(t[i(416)]>=this.currentSubray[i(283)])return void this[i(427)](t);this.forwards.subVectors(t.pos1,t[i(419)]);let s=this[i(304)][i(299)]();s<1e-6&&(this[i(304)].set(0,0,.01),s=this[i(304)].length());const n=.5*(t[i(321)]+t.radius1),e=.5*(t.fraction0+t.fraction1),r=this[i(359)]*this[i(345)][i(408)]*Math[i(417)](2,t.iteration);this.middlePos[i(393)](t[i(419)],t[i(268)],.5),this[i(342)][i(393)](t.linPos0,t[i(394)],.5);const o=this.middleLinPos;this[i(371)][i(318)](this[i(421)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this.newPos[i(433)](t[i(418)]*s),this[i(371)][i(413)](this[i(273)]);const a=this[i(317)]();a.pos0[i(263)](t[i(419)]),a[i(268)][i(263)](this.newPos),a[i(381)].copy(t[i(381)]),a[i(394)][i(263)](this[i(342)]),a.up0[i(263)](t.up0),a[i(274)][i(263)](t[i(274)]),a[i(321)]=t.radius0,a[i(426)]=n,a.fraction0=t.fraction0,a[i(281)]=e,a.positionVariationFactor=t.positionVariationFactor*this[i(345)][i(313)],a.iteration=t[i(416)]+1;const h=this.getNewSegment();h[i(419)].copy(this.newPos),h[i(268)].copy(t[i(268)]),h[i(381)].copy(this[i(342)]),h[i(394)][i(263)](t[i(394)]),this[i(312)][i(284)](t[i(267)],this[i(304)][i(350)]()),h[i(267)][i(284)](this[i(304)],this.cross1)[i(350)](),h[i(274)][i(263)](t[i(274)]),h[i(321)]=n,h[i(426)]=t[i(426)],h[i(305)]=e,h.fraction1=t[i(281)],h.positionVariationFactor=t[i(418)]*this.currentSubray[i(313)],h[i(416)]=t[i(416)]+1,this.fractalRayRecursive(a),this[i(400)](h)}[T(279)](t){const i=T;this[i(434)][i(373)](t[i(268)],t[i(419)])[i(350)](),this[i(437)]&&(this[i(391)](t.pos0,t[i(267)],this[i(434)],t[i(321)],0),this[i(437)]=!1),this[i(391)](t[i(268)],t[i(267)],this[i(434)],t[i(426)],t[i(281)]),this[i(402)]()}[T(355)](t,i,s,n){const e=T;this[e(292)][e(284)](i,s)[e(433)](n*j[e(286)]),this.down[e(263)](i).multiplyScalar(-n*j[e(406)]);const r=this.vPos,o=this[e(380)];r[e(263)](t)[e(415)](this.side)[e(413)](this[e(308)]),o[this[e(370)]++]=r.x,o[this[e(370)]++]=r.y,o[this[e(370)]++]=r.z,r[e(263)](t)[e(413)](this[e(292)])[e(413)](this[e(308)]),o[this[e(370)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this.currentCoordinate++]=r.z,r.copy(i)[e(433)](n)[e(413)](t),o[this.currentCoordinate++]=r.x,o[this[e(370)]++]=r.y,o[this[e(370)]++]=r.z,this[e(369)]+=3}[T(277)](t,i,s,n,e){const r=T;this[r(292)][r(284)](i,s)[r(433)](n*j[r(286)]),this.down.copy(i)[r(433)](-n*j[r(406)]);const o=this[r(294)],a=this[r(380)],h=this.uvs;o[r(263)](t)[r(415)](this[r(292)])[r(413)](this.down),a[this[r(370)]++]=o.x,a[this[r(370)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(364)]++]=e,h[this.currentUVCoordinate++]=0,o.copy(t)[r(413)](this[r(292)])[r(413)](this[r(308)]),a[this[r(370)]++]=o.x,a[this[r(370)]++]=o.y,a[this[r(370)]++]=o.z,h[this[r(364)]++]=e,h[this[r(364)]++]=.5,o.copy(i).multiplyScalar(n).add(t),a[this[r(370)]++]=o.x,a[this[r(370)]++]=o.y,a[this[r(370)]++]=o.z,h[this[r(364)]++]=e,h[this[r(364)]++]=1,this[r(369)]+=3}[T(402)](t){const i=T,s=this.indices;t=this[i(369)]-6,s[this[i(384)]++]=t+1,s[this[i(384)]++]=t+2,s[this.currentIndex++]=t+5,s[this.currentIndex++]=t+1,s[this[i(384)]++]=t+5,s[this[i(384)]++]=t+4,s[this[i(384)]++]=t+0,s[this[i(384)]++]=t+1,s[this[i(384)]++]=t+4,s[this[i(384)]++]=t+0,s[this.currentIndex++]=t+4,s[this.currentIndex++]=t+3,s[this[i(384)]++]=t+2,s[this[i(384)]++]=t+0,s[this[i(384)]++]=t+3,s[this[i(384)]++]=t+2,s[this[i(384)]++]=t+3,s[this[i(384)]++]=t+5}[T(365)](){const t=T,i=this[t(302)][t(285)];this[t(329)]=function(s,n){const e=t,r=n[e(345)],a=n[e(298)][e(424)],h=n.rayParameters[e(309)],c=n[e(298)][e(333)]&&0==r[e(330)]?-i()*a:o[e(428)](r[e(422)],r.endPropagationTime,s[e(305)])-i()*a,u=n[e(359)]-c,l=Math[e(423)](u/a),p=i()*(l+1);let m=0;if(u%a<=h*a&&(m=n[e(310)]),r[e(330)]<n.maxSubrayRecursion&&n[e(430)]<n[e(271)]&&i()<m){const t=n[e(395)](),o=n[e(302)][e(328)]();t[e(334)]=p,n[e(302)][e(390)](p),t[e(330)]=r[e(330)]+1,t[e(283)]=Math[e(351)](1,r.maxIterations-1),t[e(381)][e(318)](i(),i(),i())[e(433)](1e3),t.linPos1.set(i(),i(),i())[e(433)](1e3),t[e(267)][e(263)](r[e(267)]),t[e(274)][e(263)](r.up1),t[e(321)]=s[e(321)]*n[e(298)][e(410)],t.radius1=Math[e(367)](n[e(298)][e(315)],s[e(426)]*n[e(298)][e(287)]),t.birthTime=c+l*a,t[e(335)]=t.birthTime+a*h,!n.rayParameters.isEternal&&0==r[e(330)]&&(t.birthTime=Math.max(t[e(422)],r[e(422)]),t[e(335)]=Math.min(t[e(335)],r[e(335)])),t[e(408)]=2*r.timeScale,t.roughness=r[e(313)],t[e(296)]=r.straightness,t.propagationTimeFactor=r[e(382)],t[e(327)]=r[e(327)],n[e(436)](s,r,t,n),n[e(302)][e(390)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(436)]=function(i,s,n,e){e[t(379)](i,s,n,.5,.6,.2)},this[t(431)]=function(s,o,h,c,u,l){const p=t;h[p(419)].copy(s[p(419)]),n.subVectors(o[p(268)],o[p(419)]),e[p(263)](n).normalize(),n[p(433)](s[p(305)]+(1-s.fraction0)*(i()*c));const m=n[p(299)]();r[p(284)](o.up0,e);const d=2*Math.PI*i();r[p(433)](Math[p(414)](d)),a[p(263)](o.up0)[p(433)](Math[p(348)](d)),h[p(268)][p(263)](r)[p(413)](a)[p(433)](m*u*(l+i()*(1-l)))[p(413)](n)[p(413)](o[p(419)])},this[t(379)]=function(s,o,h,c,u,l){const p=t;h[p(419)][p(263)](s[p(419)]),n[p(373)](o[p(268)],o[p(419)]),e[p(263)](n).normalize(),n[p(433)](s.fraction0+(1-s[p(305)])*((2*i()-1)*c));const m=n.length();r[p(284)](o[p(267)],e);const d=2*Math.PI*i();r[p(433)](Math.cos(d)),a[p(263)](o[p(267)]).multiplyScalar(Math[p(348)](d)),h.pos1[p(263)](r)[p(413)](a)[p(433)](m*u*(l+i()*(1-l)))[p(413)](n)[p(413)](o[p(419)])}}[T(420)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[T(317)](){const t=T;return this[t(307)][this[t(282)]++]}[T(263)](t){const i=T;return super[i(263)](t),this[i(403)](j[i(340)]({},t[i(298)])),this}[T(362)](){const t=T;return new this.constructor(j[t(340)]({},this.rayParameters))}}function V(t,i){const s=M();return(V=function(t,i){return s[t-=261]})(t,i)}function z(t){function i(t){const s=V;if(typeof t===s(316))return function(t){}[s(300)](s(346))[s(297)](s(323));1!==(""+t/t)[s(299)]||t%20==0?function(){return!0}[s(300)]("debu"+s(378))[s(306)](s(372)):function(){return!1}[s(300)](s(293)+s(378))[s(297)](s(264)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function D(){const t=["2920856bCvdZL","325619GseOvr","11905evdyuN","642yvDGWs","test","add","492737HyJPwB","string","lightningMaxDuration","apply","while (true) {}","lightningMinPeriod","copyParameters","debu","action","splice","448808tElBSg","prototype","state","birthTime","lightningMaterial","size","toString","deathTime","chain","gger","error","isLightningStorm","input","constructor","update","inited","onRayPosition","isEternal","warn","return (function() ","geometry","lerp","maxLightnings","maxSlope","lightningMaxPeriod","init","set","stormParams","deadLightningsMeshes","lightningMinDuration","maxHeight","2990835SZgemC","destOffset","call","nextLightningTime","223300ilWbvb","RAY_EXTINGUISHED","sourceOffset","copy","info","lightningsMeshes","getNextLightningTime","random","3fIhaMj","minHeight","onLightningDown","length","multiplyScalar","exception","bind","counter","function *\\( *\\)","stateObject","push",'{}.constructor("return this")( )',"clone","__proto__","lightningParameters","console"];return(D=function(){return t})()}j.RAY_INITIALIZED=0,j[T(425)]=1,j[T(435)]=2,j[T(383)]=3,j[T(363)]=4,j.RAY_EXTINGUISHED=5,j[T(286)]=Math[T(414)](30*Math.PI/180),j[T(406)]=Math[T(348)](30*Math.PI/180);const F=H;!function(t,i){const s=H,n=D();for(;;)try{if(265178===parseInt(s(275))/1+-parseInt(s(210))/2*(-parseInt(s(253))/3)+-parseInt(s(245))/4+parseInt(s(271))/5*(parseInt(s(272))/6)+parseInt(s(270))/7+-parseInt(s(269))/8+-parseInt(s(241))/9)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[H(203)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(t,i){const s=D();return(H=function(t,i){return s[t-=201]})(t,i)}!function(){C(this,(function(){const t=H,i=new RegExp(t(261)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=N(t(235));i[t(273)](n+t(218))&&s[t(273)](n+t(222))?N():n("0")}))()}();const G=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();G(void 0,(function(){const t=H,i=function(){const t=H;let i;try{i=Function(t(229)+t(264)+");")()}catch(s){i=window}return i}(),s=i[t(268)]=i[t(268)]||{},n=["log",t(228),t(249),t(220),t(258),"table","trace"];for(let e=0;e<n[t(256)];e++){const i=G.constructor[t(211)].bind(G),r=n[e],o=s[r]||i;i[t(266)]=G[t(259)](G),i[t(216)]=o[t(216)][t(259)](o),s[r]=i}}))();class L extends a{constructor(t={}){const i=H;super(),this[i(221)]=!0,this[i(237)]=t,t.size=void 0!==t[i(215)]?t[i(215)]:1e3,t[i(254)]=void 0!==t[i(254)]?t[i(254)]:80,t[i(240)]=void 0!==t[i(240)]?t[i(240)]:100,t[i(233)]=void 0!==t.maxSlope?t.maxSlope:1.1,t[i(232)]=void 0!==t[i(232)]?t[i(232)]:3,t[i(205)]=void 0!==t[i(205)]?t.lightningMinPeriod:3,t[i(234)]=void 0!==t[i(234)]?t[i(234)]:7,t[i(239)]=void 0!==t[i(239)]?t[i(239)]:1,t[i(202)]=void 0!==t.lightningMaxDuration?t.lightningMaxDuration:2.5,this.lightningParameters=j[i(206)](t[i(267)],t.lightningParameters),this[i(267)][i(227)]=!1,this.lightningMaterial=void 0!==t[i(214)]?t[i(214)]:new h({color:11599871}),void 0!==t[i(226)]?this[i(226)]=t[i(226)]:this.onRayPosition=function(s,n){const e=i;n[e(236)]((Math[e(252)]()-.5)*t.size,0,(Math.random()-.5)*t[e(215)]);const r=o[e(231)](t[e(254)],t[e(240)],Math[e(252)]());s[e(236)](t[e(233)]*(2*Math[e(252)]()-1),1,t[e(233)]*(2*Math.random()-1))[e(257)](r)[e(274)](n)},this[i(255)]=t[i(255)],this[i(225)]=!1,this.nextLightningTime=0,this[i(250)]=[],this.deadLightningsMeshes=[];for(let s=0;s<this[i(237)].maxLightnings;s++){const t=new j(j[i(206)]({},this.lightningParameters)),s=new c(t,this[i(214)]);this[i(238)].push(s)}}[F(224)](t){const i=F;if(!this[i(225)]&&(this[i(244)]=this.getNextLightningTime(t)*Math[i(252)](),this[i(225)]=!0),t>=this[i(244)]){const s=this[i(238)].pop();if(s){const n=j.copyParameters(s[i(230)].rayParameters,this[i(267)]);n[i(213)]=t,n[i(217)]=t+o[i(231)](this[i(237)][i(239)],this[i(237)].lightningMaxDuration,Math[i(252)]()),this.onRayPosition(n[i(247)],n[i(242)]),n.noiseSeed=Math[i(252)](),this[i(274)](s),this.lightningsMeshes.push(s)}this.nextLightningTime=this[i(251)](t)}let s=0,n=this[i(250)].length;for(;s<n;){const e=this[i(250)][s],r=e.geometry,o=r[i(212)];r[i(224)](t),o===j.RAY_PROPAGATING&&r[i(212)]>o&&this[i(255)]&&this[i(255)](r),r[i(212)]===j[i(246)]?(this[i(250)][i(209)](this[i(250)].indexOf(e),1),this[i(238)][i(263)](e),this.remove(e),n--):s++}}[F(251)](t){const i=F;return t+o[i(231)](this[i(237)][i(205)],this.stormParams[i(234)],Math.random())/(this[i(237)][i(232)]+1)}[F(248)](t,i){const s=F;return super[s(248)](t,i),this[s(237)].size=t[s(237)].size,this[s(237)][s(254)]=t[s(237)].minHeight,this[s(237)][s(240)]=t.stormParams[s(240)],this.stormParams[s(233)]=t[s(237)][s(233)],this.stormParams[s(232)]=t[s(237)][s(232)],this[s(237)][s(205)]=t[s(237)][s(205)],this.stormParams[s(234)]=t.stormParams[s(234)],this[s(237)][s(239)]=t[s(237)].lightningMinDuration,this[s(237)][s(202)]=t[s(237)].lightningMaxDuration,this[s(267)]=j.copyParameters({},t[s(267)]),this[s(214)]=t[s(237)][s(214)],this.onLightningDown=t.onLightningDown,this}[F(265)](){const t=F;return new this.constructor(this[t(237)])[t(248)](this)}}function N(t){function i(t){const s=H;if(typeof t===s(201))return function(t){}[s(223)](s(204)).apply(s(260));1!==(""+t/t)[s(256)]||t%20==0?function(){return!0}[s(223)](s(207)+s(219))[s(243)](s(208)):function(){return!1}.constructor(s(207)+s(219))[s(203)](s(262)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function E(t,i){const s=Z();return(E=function(t,i){return s[t-=166]})(t,i)}const U=E;!function(t,i){const s=E,n=Z();for(;;)try{if(750424===parseInt(s(186))/1*(-parseInt(s(169))/2)+parseInt(s(226))/3*(parseInt(s(206))/4)+-parseInt(s(175))/5+-parseInt(s(211))/6+-parseInt(s(191))/7*(parseInt(s(217))/8)+-parseInt(s(213))/9+-parseInt(s(193))/10*(-parseInt(s(219))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const O=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(172)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){O(this,(function(){const t=E,i=new RegExp("function *\\( *\\)"),s=new RegExp(t(201),"i"),n=W(t(203));i[t(168)](n+t(205))&&s[t(168)](n+t(224))?W():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[E(172)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=E;let i;try{i=Function(t(176)+t(194)+");")()}catch(e){i=window}const s=i[t(212)]=i[t(212)]||{},n=[t(166),t(197),"info","error",t(223),t(179),t(222)];for(let r=0;r<n[t(183)];r++){const i=Y.constructor.prototype[t(173)](Y),e=n[r],o=s[e]||i;i[t(192)]=Y.bind(Y),i[t(209)]=o[t(209)].bind(o),s[e]=i}}))();const k=[U(210)];function Z(){const t=["primitive","toString","object","3794994slBmbn","console","11356821bYbsVW","copy","multiplyScalar","color","66952JhPSbh","rayParameters","33ZiPTVH","gger","sourceOffset","trace","exception","input","timeScale","4437NgkChc","dot","log","roughness","test","13186nbTFLN","addVectors","straightness","apply","bind","string","4029730LNRaNJ","return (function() ","minHeight","counter","table","pos1","Vector3","radius1","length","maxHeight","constructor","22CrQzsx","subrayPeriod","sub","action","size","581WaPfti","__proto__","11200400tAJbGc",'{}.constructor("return this")( )',"add","set","warn","maxLightnings","MeshBasicMaterial","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Color","init","stormParams","chain","2516RoZcHJ","debu"];return(Z=function(){return t})()}const J=f({__name:"lightStorm",props:{color:{default:"#b0ffff"},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=U,n=t,e=new(u[i(202)])(n[i(216)]),r=new(u[i(199)])({color:e}),o=new s(0,-1,0);let a=0;const h=new(u[i(181)]),c=new(u[i(181)]),p={roughness:n[i(167)],straightness:n[i(171)],radius0:n.radius0,radius1:n[i(182)],timeScale:n.timeScale,subrayPeriod:n[i(187)],subrayDutyCycle:n.subrayDutyCycle,minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e.subrayConePosition(t,s,n,.6,.6,.5),a=e[r(218)].sourceOffset.y,h.subVectors(n[r(180)],e[r(218)][r(221)]);const u=o[r(227)](h);c[r(214)](o)[r(215)](u),h[r(188)](c);const l=u/a>.5?a/u:1;c[r(215)](l),h[r(195)](c),n[r(180)][r(170)](h,e[r(218)][r(221)])}},m=new L({size:n[i(190)],minHeight:n.minHeight,maxHeight:n.maxHeight,maxSlope:.6,maxLightnings:n[i(198)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=m[t(204)];s[t(190)]=n[t(190)],s[t(177)]=n[t(177)],s[t(184)]=n.maxHeight,r.color[t(196)](n.color),p.roughness=n.roughness,p[t(171)]=n[t(171)],p.radius0=n.radius0,p[t(182)]=n.radius1,p[t(225)]=n[t(225)]}));const{onLoop:d}=l();return d((({elapsed:t})=>{m.update(t)})),(t,s)=>{const n=i;return y(),b(n(208),{object:x(m),renderOrder:9999},null,8,k)}}});function W(t){function i(t){const s=E;if(typeof t===s(174))return function(t){}[s(185)]("while (true) {}").apply(s(178));1!==(""+t/t)[s(183)]||t%20==0?function(){return!0}[s(185)](s(207)+s(220)).call(s(189)):function(){return!1}[s(185)](s(207)+s(220))[s(172)](s(200)),i(++t)}try{if(t)return i;i(0)}catch(s){}}!function(t,i){const s=X,n=Q();for(;;)try{if(694410===-parseInt(s(332))/1*(parseInt(s(337))/2)+-parseInt(s(323))/3+parseInt(s(336))/4+parseInt(s(321))/5*(-parseInt(s(310))/6)+-parseInt(s(312))/7*(parseInt(s(333))/8)+-parseInt(s(313))/9+parseInt(s(315))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[X(311)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){$(this,(function(){const t=X,i=new RegExp(t(328)),s=new RegExp(t(329),"i"),n=K(t(300));i[t(302)](n+t(326))&&s[t(302)](n+t(330))?K():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function X(t,i){const s=Q();return(X=function(t,i){return s[t-=296]})(t,i)}B(void 0,(function(){const t=X,i=function(){const t=X;let i;try{i=Function(t(318)+t(327)+");")()}catch(s){i=window}return i}(),s=i.console=i[t(325)]||{},n=["log",t(298),t(306),t(317),t(338),t(322),"trace"];for(let e=0;e<n[t(299)];e++){const i=B[t(319)][t(339)][t(331)](B),r=n[e],o=s[r]||i;i[t(301)]=B[t(331)](B),i[t(335)]=o[t(335)][t(331)](o),s[r]=i}}))();const q=f({__name:"lightningStorm",setup(i){const s=X,n=v({cellSize:60,cellThickness:1,cellColor:s(316),sectionColor:s(320),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(309),roughness:{label:s(307),value:.85,min:0,max:1,step:.01},straightness:{label:s(297),value:.65,min:0,max:1,step:.01},radius0:{label:s(334),value:1,min:.1,max:10,step:.01},radius1:{label:"未部半径",value:.5,min:.1,max:10,step:.01},timeScale:{label:"时间缩放",value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const d=s;return y(),b(P,null,[w(t,{showAxesHelper:!1,showGridHelper:!1},{ability:S((()=>[w(J,{minHeight:x(e)[d(314)],maxHeight:x(r)[d(314)],color:x(o)[d(314)],roughness:x(a)[d(314)],straightness:x(h)[d(314)],radius0:x(c)[d(314)],radius1:x(u)[d(314)],timeScale:x(l)[d(314)]},null,8,[d(308),"maxHeight","color","roughness",d(340),d(305),"radius1","timeScale"]),w(x(_),I({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),w(x(m))],64)}}});function Q(){const t=["496UTAOJE","端部半径","toString","5288188IxZDDj","2PNajxl","exception","prototype","straightness","counter","debu","直度度","warn","length","init","__proto__","test","call","string","radius0","info","粗糙度","minHeight","#ffbde7","18RtiWzW","apply","420Jaumdf","10653507qPxxNK","value","21566920LfPvEG","#6f6f6f","error","return (function() ","constructor","#92399e","756760MyGqet","table","1008582TqrRUx","gger","console","chain",'{}.constructor("return this")( )',"function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","bind","806636MwsgYx"];return(Q=function(){return t})()}function K(t){function i(t){const s=X;if(typeof t===s(304))return function(t){}[s(319)]("while (true) {}").apply(s(341));1!==(""+t/t)[s(299)]||t%20==0?function(){return!0}[s(319)](s(296)+s(324))[s(303)]("action"):function(){return!1}[s(319)](s(296)+"gger")[s(311)]("stateObject"),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

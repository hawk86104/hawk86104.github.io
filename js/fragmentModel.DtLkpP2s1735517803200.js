import{_ as n,a as t,C as o,s as e,c2 as r}from"./three.-uH5I3Xp1735517803200.js";import{e as a,a as s,b as i,U as c}from"./@tresjs.0qL_P2CE1735517803200.js";import{P as u}from"./tweakpane.yHWGBmom1735517803200.js";import{d as l,a6 as f,r as p,b as m,w as g,o as v,D as d,J as x,aj as y,ak as w,u as b,e as h,f as C,g as I,j as _,al as P}from"./@vue.-THQH3GC1735517803200.js";import"./@vueuse.oT9wchAS1735517803200.js";const z=N;!function(n,t){const o=N,e=D();for(;;)try{if(249477===-parseInt(o(263))/1*(parseInt(o(250))/2)+-parseInt(o(310))/3+parseInt(o(283))/4*(parseInt(o(243))/5)+parseInt(o(259))/6+-parseInt(o(270))/7+parseInt(o(251))/8*(parseInt(o(240))/9)+parseInt(o(296))/10*(parseInt(o(300))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[N(301)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){A(this,(function(){const n=N,t=new RegExp(n(288)),o=new RegExp(n(246),"i"),e=R(n(234));t.test(e+n(284))&&o[n(306)](e+n(297))?R():e("0")}))()}();const M=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[N(301)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();M(void 0,(function(){const n=N,t=function(){const n=N;let t;try{t=Function(n(228)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(280)]=t[n(280)]||{},e=[n(265),n(249),"info",n(237),n(287),n(255),"trace"];for(let r=0;r<e.length;r++){const t=M[n(254)].prototype[n(230)](M),a=e[r],s=o[a]||t;t[n(247)]=M[n(230)](M),t[n(298)]=s[n(298)].bind(s),o[a]=t}}))();const j=[z(273)];function D(){const n=["warn","1418dSTkpA","7864oWtgSo","tangent","addBinding","constructor","table","u_progress","aCenter","array","2540940nURrni","disabled","push","toPosition","442tQteGu","mergeGeometries","log","length","count","uniforms","#bcd4ff","1211924HHepjX","Vector3","m2Color","geometry","颜色2rd","clone","refresh","attributes","while (true) {}","Color","console","random","./draco/","4764dbJsti","chain","aRandom","toNormal","exception","function *\\( *\\)","deleteAttribute","toNonIndexed","debu","TresMesh","divideScalar","value","set","410oJSGjk","input","toString","scene","164241nbvNVt","apply","translate","fragmentModelCom","string","颜色1st","test","position","stateObject","#ffc0fa","1290282XHaCAY","gger","return (function() ","counter","bind","call","traverse","BufferAttribute","init","setAttribute","children","error","onLoop","action","747NwFDuE","rotateX","变化量","205fORfdi","sin","m1Color","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","normal"];return(D=function(){return n})()}function N(n,t){const o=D();return(N=function(n,t){return o[n-=227]})(n,t)}const S=l({__name:z(303),async setup(c){const l=z;let h,C;const I=n=>{const t=N,o=[];return n[t(232)]((n=>{const r=t;n instanceof e&&(n[r(273)][r(289)]("uv"),n[r(273)].deleteAttribute(r(252)),o[r(261)](n.geometry))})),r[t(264)](o)},_=I(([h,C]=f((()=>s("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:"./draco/"}))),h=await h,C(),h)[l(299)].children[0]);_[l(241)](Math.PI/2),_[l(302)](0,-.9,0);const P=_[l(275)]()[l(290)](),A=I(([h,C]=f((()=>s("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:l(282)}))),h=await h,C(),h)[l(299)][l(236)][0]);A[l(241)](-Math.PI/2),A.rotateY(Math.PI/3);const M=A[l(275)]().toNonIndexed(),D=P[l(277)][l(307)][l(258)],S=P[l(277)][l(307)][l(267)],R=M[l(277)][l(307)][l(258)],V=M.attributes[l(248)][l(258)],F=M[l(277)].position[l(267)],T=new Float32Array(S),k=new Float32Array(3*(S+2)),E=new Float32Array(3*(S+2)),U=new Float32Array(3*(S+2));for(let t=0;t<S;t+=3){const o=1*Math[l(281)](),e=t%F;T[t]=o,T[t+1]=o,T[t+2]=o;const r=3*t,a=D[r],s=D[r+1],i=D[r+2],c=D[r+3],u=D[r+4],f=D[r+5],p=D[r+6],m=D[r+7],g=D[r+8],v=new(n[l(271)])(a+c+p,s+u+m,i+f+g)[l(293)](3);k[l(295)]([v.x,v.y,v.z],3*t),k[l(295)]([v.x,v.y,v.z],3*(t+1)),k[l(295)]([v.x,v.y,v.z],3*(t+2));const d=(n,t,o)=>{const e=3*o;for(let r=0;r<3;r++){const a=e+3*r;t.set([n[a],n[a+1],n[a+2]],3*(o+r))}};d(R,E,e),d(V,U,e)}P[l(235)](l(285),new(n[l(233)])(T,1)),P[l(235)](l(257),new(n[l(233)])(k,3)),P[l(235)](l(262),new(n[l(233)])(E,3)),P.setAttribute(l(286),new t(U,3)),console[l(265)](P[l(277)]);const Q=([h,C]=f((()=>i(["./plugins/visualArts/image/fragment512px.png"]))),h=await h,C(),h),Z={uniforms:{u_progress:{value:-.1},matcap1:{value:Q},m1Color:{type:"v3",value:new(n[l(279)])(l(309))},matcap2:{value:Q},m2Color:{type:"v3",value:new o(l(269))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},O=p({c1:l(309),c2:l(269)}),H=m(.5),Y=new u({title:"参数"});return Y[l(253)](Z.uniforms[l(256)],l(294),{label:l(242),min:-.1,max:1,step:.001})[l(260)]=!0,Y[l(253)](O,"c1",{label:l(305)}),Y[l(253)](O,"c2",{label:l(274)}),Y[l(253)](H,l(294),{label:"速度",min:.001,max:1,step:.001}),g(O,(n=>{const t=l;Z[t(268)][t(245)].value[t(295)](n.c1),Z[t(268)][t(272)][t(294)][t(295)](n.c2)}),{deep:!0}),a()[l(238)]((({elapsed:n})=>{const t=l;Z[t(268)][t(256)][t(294)]=(Math[t(244)](n*H[t(294)])+1)/2,Y[t(276)]()})),(n,t)=>{const o=l;return v(),d(o(292),{geometry:b(P)},[x("TresShaderMaterial",y(w(Z)),null,16)],8,j)}}});function R(n){function t(n){const o=N;if(typeof n===o(304))return function(n){}[o(254)](o(278))[o(301)](o(229));1!==(""+n/n)[o(266)]||n%20==0?function(){return!0}[o(254)](o(291)+"gger")[o(231)](o(239)):function(){return!1}[o(254)](o(291)+o(227))[o(301)](o(308)),t(++n)}try{if(n)return t;t(0)}catch(o){}}!function(n,t){const o=k,e=T();for(;;)try{if(486763===-parseInt(o(422))/1*(-parseInt(o(416))/2)+parseInt(o(440))/3+-parseInt(o(427))/4*(-parseInt(o(431))/5)+parseInt(o(418))/6+-parseInt(o(436))/7*(parseInt(o(426))/8)+-parseInt(o(433))/9*(parseInt(o(438))/10)+parseInt(o(429))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const V=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[k(410)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){V(this,(function(){const n=k,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(421),"i"),e=U("init");t.test(e+n(415))&&o.test(e+"input")?U():e("0")}))()}();const F=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[k(410)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function T(){const n=["__proto__","counter","104671iHSfiZ","length","2668630nICgKg","info","1419012MQQNwf","apply","stateObject","log","warn","debu","chain","593634hwYTCQ","string","280434LyQkwU","constructor","error","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2iQQASM","TresPerspectiveCamera","gger","bind","264jrNUIq","20DVKEWf","toString","1605296PcODTx","return (function() ","254625xSOtDk","ACESFilmicToneMapping","18NDaMNU"];return(T=function(){return n})()}function k(n,t){const o=T();return(k=function(n,t){return o[n-=410]})(n,t)}F(void 0,(function(){const n=k;let t;try{t=Function(n(430)+'{}.constructor("return this")( ));')()}catch(r){t=window}const o=t.console=t.console||{},e=[n(412),n(413),n(439),n(420),"exception","table","trace"];for(let a=0;a<e[n(437)];a++){const t=F[n(419)].prototype.bind(F),r=e[a],s=o[r]||t;t[n(434)]=F[n(425)](F),t.toString=s[n(428)].bind(s),o[r]=t}}))();const E=l({__name:"fragmentModel",setup(t){const o=k,e=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),r={clearColor:"#000000",windowSize:!0,toneMapping:n[o(432)],toneMappingExposure:.8};return(n,t)=>{const a=o,s=h("TresCanvas");return v(),C(s,y(w(r)),{default:I((()=>[t[0]||(t[0]=x(a(423),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),_(b(c),y(w(e)),null,16),t[1]||(t[1]=x("TresAmbientLight",{intensity:2},null,-1)),(v(),C(P,null,{default:I((()=>[_(S)])),_:1}))])),_:1},16)}}});function U(n){function t(n){const o=k;if(typeof n===o(417))return function(n){}[o(419)]("while (true) {}").apply(o(435));1!==(""+n/n)[o(437)]||n%20==0?function(){return!0}[o(419)](o(414)+"gger").call("action"):function(){return!1}[o(419)]("debu"+o(424))[o(410)](o(411)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{E as default};

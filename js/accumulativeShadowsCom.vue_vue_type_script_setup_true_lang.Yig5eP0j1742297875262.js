import{b as t,f as n,_ as e}from"./three.N4lg2KsY1742297875262.js";import{m as o}from"./@tresjs.oW7bfow21742297875262.js";import{d as a,P as r}from"./@pmndrs.ByHGZr701742297875262.js";import{d as s,b as i,w as c,a2 as l,o as u,H as p,N as f,aj as d,ak as h}from"./@vue.NRI7TcgI1742297875262.js";const m=y;!function(t,n){const e=y,o=M();for(;;)try{if(956897===parseInt(e(478))/1+parseInt(e(454))/2*(parseInt(e(536))/3)+-parseInt(e(470))/4*(parseInt(e(481))/5)+parseInt(e(507))/6*(parseInt(e(515))/7)+parseInt(e(504))/8*(parseInt(e(534))/9)+-parseInt(e(523))/10+parseInt(e(483))/11*(parseInt(e(508))/12))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const g=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[y(463)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){g(this,(function(){const t=y,n=new RegExp(t(501)),e=new RegExp(t(499),"i"),o=x(t(485));n[t(496)](o+t(500))&&e[t(496)](o+t(537))?x():o("0")}))()}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[y(463)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();w(void 0,(function(){const t=y;let n;try{n=Function(t(498)+t(466)+");")()}catch(a){n=window}const e=n[t(457)]=n.console||{},o=[t(503),t(506),t(528),t(455),t(505),t(462),t(491)];for(let r=0;r<o.length;r++){const n=w[t(465)][t(538)][t(533)](w),a=o[r],s=e[a]||n;n[t(522)]=w.bind(w),n[t(486)]=s.toString[t(533)](s),e[a]=n}}))();const b=[m(472)];function M(){const t=["stateObject","radius","texture","table","apply","action","constructor",'{}.constructor("return this")( )',"MathUtils","amount","near","175892rYjOLJ","frames","rotate-x","accumulativeShadowsCom","shadows plm update","prepare","far","TresMesh","290192NqzOKl","top","left","85yoCcMn","gger","1419MYtdHi","value","init","toString","ambient","mapSize","clear","blendWindow","trace","set","debu","shadows render start","update","test","#000000","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","chain","function *\\( *\\)","acos","log","423704gFbLIr","exception","warn","407166jpbnIH","90660gpWYpM","size","opacity","progressiveLightMap2","finish","height","length","21dQKaaW","random","shadow","TresPlaneGeometry","children","lightPosition","while (true) {}","__proto__","14093210nAtkik","randFloatSpread","DirectionalLight","bias","sin","info","blend","color","cos","position","bind","72LNNEmo","material","3qKhBST","input","prototype","alphaTest","castShadow","2443370idgqTQ","error","camera","console","remove"];return(M=function(){return t})()}function y(t,n){const e=M();return(y=function(t,n){return e[t-=454]})(t,n)}const I=s({__name:m(473),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:m(497)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(s){const g=m,w=s;let M=i();const{extend:y,scene:I,renderer:x,camera:z}=o();y({SoftShadowMaterial:a});const S={position:(new t)[g(492)](w[g(520)].x,w[g(520)].y,w[g(520)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},_=new r(x[g(484)],I[g(484)],S[g(488)]),v={map:_[g(511)][g(461)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:w.blend,alphaTest:w.alphaTest,opacity:w[g(510)],color:w[g(530)]},P=new n;for(let t=0;t<S[g(468)];t++){const t=new(e[g(525)])(16777215,S.intensity/S[g(468)]);t[g(540)]=!0,t[g(517)][g(526)]=S[g(526)],t[g(517)][g(456)][g(469)]=S[g(469)],t[g(517)][g(456)][g(476)]=S.far,t.shadow[g(456)].right=S.size/2,t[g(517)][g(456)][g(480)]=-S[g(509)]/2,t[g(517)].camera[g(479)]=S[g(509)]/2,t[g(517)].camera.bottom=-S[g(509)]/2,t[g(517)][g(488)].width=S[g(488)],t[g(517)][g(488)][g(513)]=S[g(488)],P.add(t)}const T=()=>{const t=g,n=S[t(532)].length();for(let o=0;o<P[t(519)][t(514)];o++){const a=P[t(519)][o];if(Math[t(516)]()>w[t(487)])a.position.set(S[t(532)].x+e[t(467)][t(524)](S[t(460)]),S.position.y+e[t(467)][t(524)](S[t(460)]),S.position.z+e[t(467)][t(524)](S[t(460)]));else{let e=Math[t(502)](2*Math.random()-1)-Math.PI/2,o=2*Math.PI*Math[t(516)]();a[t(532)].set(Math[t(531)](e)*Math[t(531)](o)*n,Math.abs(Math.cos(e)*Math[t(527)](o)*n),Math.sin(e)*n)}}},j=(t=1)=>{const n=g;I.value.add(P),_[n(475)]();for(let e=0;e<t;e++)T(),_[n(495)](z.value,w[n(490)]),console[n(503)](n(474),e);I.value[n(458)](P),_[n(512)]()};c((()=>M[g(484)]),(t=>{const n=g;t&&(_.configure(t),_.clear(),console.log(n(494)),j(w[n(471)]),console.log("shadows render end"))}));const W=()=>{const t=g;_[t(489)](),j(w[t(471)])};return l((()=>{const t=g;M[t(484)]&&(w[t(510)]&&(M[t(484)][t(535)][t(510)]=w[t(510)]),w[t(539)]&&(M[t(484)][t(535)][t(539)]=w.alphaTest),w[t(530)]&&M[t(484)][t(535)][t(530)][t(492)](w.color),w[t(529)]&&(M[t(484)].material.blend=w[t(529)]))})),c((()=>w[g(520)]),(t=>{const n=g;t&&(console[n(503)](w.lightPosition),S[n(532)].set(t.x,t.y,t.z),W())}),{deep:!0}),c((()=>[w[g(471)],w.blendWindow,w[g(487)]]),(()=>{W()})),(t,n)=>{const e=g;return u(),p(e(477),{"receive-shadow":"",ref_key:"gPlane",ref:M,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=f(e(518),{args:[1,1]},null,-1)),f("TresSoftShadowMaterial",d(h(v)),null,16)],8,b)}}});function x(t){function n(t){const e=y;if("string"==typeof t)return function(t){}[e(465)](e(521))[e(463)]("counter");1!==(""+t/t)[e(514)]||t%20==0?function(){return!0}[e(465)](e(493)+e(482)).call(e(464)):function(){return!1}[e(465)](e(493)+e(482)).apply(e(459)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{I as _};

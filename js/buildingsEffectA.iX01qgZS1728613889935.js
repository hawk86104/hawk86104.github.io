import{b as t,l as n}from"./pagesShow.vue_vue_type_script_setup_true_lang.GsMzj8dk1728613889935.js";import{U as o}from"./@tresjs.BSMy0VpY1728613889935.js";import{C as e}from"./three-custom-shader-material.jRyIW-S_1728613889935.js";import"./object-hash.bAoGVkRV1728613889935.js";import{_ as r,a0 as i,C as u,cb as c,m as a,a$ as s}from"./three.-yu4716U1728613889935.js";import"./@amap.CWBvQ_Sh1728613889935.js";import"./glsl-tokenizer.bRDW_uEr1728613889935.js";import{d as l,a3 as f,w as p,o as d,E as m,u as v,a4 as g,r as h,f as y,g as w,j as C,m as _}from"./@vue.JNsx1iN61728613889935.js";import{P as b}from"./tweakpane.yHWGBmom1728613889935.js";import"./@vueuse.lr_j1bUm1728613889935.js";import"./glsl-token-string.SZwK8njp1728613889935.js";import"./glsl-token-functions.3G0pXnDz1728613889935.js";import"./jszip.jnD6f9ab1728613889935.js";function x(t,n){const o=S();return(x=function(t,n){return o[t-=267]})(t,n)}const I=x;!function(t,n){const o=x,e=S();for(;;)try{if(246654===parseInt(o(302))/1*(-parseInt(o(331))/2)+-parseInt(o(300))/3*(-parseInt(o(287))/4)+parseInt(o(282))/5*(parseInt(o(310))/6)+-parseInt(o(324))/7+parseInt(o(323))/8+-parseInt(o(306))/9+-parseInt(o(320))/10*(-parseInt(o(307))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const M=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function S(){const t=["MeshBasicMaterial","info","material","side","constructor","string","renderOrder","uOpacity","error","__proto__","uniforms","125jERAZw","boundingBox","bulidingsColor","landColor","action","4vNVCIt","while (true) {}","gger","stateObject","debu","test","computeBoundingSphere","object","#ffffff","value","city","uGradient","prototype","1071687nqnuDs","primitive","5534JFcLtG","length","isArray","Color","2622726daRrfS","11xpRSwb","\n\t\tvarying vec4 vPosition;\n\t\tvoid main() {\n\t\t\tvPosition = modelMatrix * vec4(position,1.0);\n\t\t\tcsm_Position = position * vec3(1.0);\n\t\t}\n\t\t","bind","17454pYVXDf","return (function() ","gradient","counter","land","#ffff00","chain","setStyle","table","\n\t\tuniform mat4 modelMatrix;\n\t\tvarying vec4 vPosition;\n\t\tuniform vec3 uMax; \n\t\tuniform vec3 uMin; \n\t\tuniform float uOpacity;  \n\t\tuniform float uBorderWidth; \n\t\tuniform vec3 uLightColor;\n\t\tuniform vec3 uColor;\n\t\tuniform float uCircleTime; \n\t\tuniform float uTime; \n\t\tuniform vec3 uTopColor;\t\t\t\t\t//顶部颜色\n\t\tuniform bool uGradient;\n\t\tvec4 uMax_world;\n\t\tvec4 uMin_world;\n\t\tvoid main() {\n\t\t\t// 转世界坐标\n\t\t\tuMax_world =  modelMatrix * vec4(uMax,1.0);\n\t\t\tuMin_world =  modelMatrix * vec4(uMin,1.0);\n\t\t\tvec3 distColor = uColor;\n\t\t\tfloat residue = uTime - floor(uTime / uCircleTime) * uCircleTime;\n\t\t\tfloat rate = residue / uCircleTime;\n\t\t\tfloat lightOffset = rate * (uMax_world.y - uMin_world.y);\n\n\t\t\tif (uMin_world.y + lightOffset < vPosition.y && uMin_world.y + lightOffset + uBorderWidth > vPosition.y) {\n\t\t\t\tcsm_DiffuseColor = vec4(uLightColor, uOpacity);\n\t\t\t} else {\n\t\t\t\tcsm_DiffuseColor = vec4(distColor, uOpacity);\n\t\t\t}\n\n\t\t\t//根据高度计算颜色\n\t\t\tif(uGradient){\n\t\t\t\tfloat rateHight = (vPosition.y - uMin_world.y) / (uMax_world.y - uMin_world.y); \n\t\t\t\tvec3 outColor = mix(csm_DiffuseColor.xyz, uTopColor, rateHight*2.0);\n\t\t\t\tcsm_DiffuseColor = vec4(outColor, uOpacity);\n\t\t\t}\n    }\n\t\t","2248110KFxYSG","topColor","call","257000gfGwsV","848064XHDOBA","uTime","apply",'{}.constructor("return this")( )',"log","forEach","computeBoundingBox","10AXCFVe","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","model","dispose","toString","exception","color","input","clone"];return(S=function(){return t})()}!function(){M(this,(function(){const t=x,n=new RegExp("function *\\( *\\)"),o=new RegExp(t(332),"i"),e=O("init");n[t(292)](e+t(316))&&o.test(e+t(269))?O():e("0")}))()}();const j=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[x(326)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();j(void 0,(function(){const t=x;let n;try{n=Function(t(311)+t(327)+");")()}catch(r){n=window}const o=n.console=n[t(333)]||{},e=[t(328),"warn",t(272),t(279),t(267),t(318),"trace"];for(let i=0;i<e[t(303)];i++){const n=j[t(275)][t(299)][t(309)](j),r=e[i],u=o[r]||n;n[t(280)]=j[t(309)](j),n[t(336)]=u[t(336)].bind(u),o[r]=n}}))();const T=[I(294)],F=l({__name:"bModel",props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:"#112233"},topColor:{default:I(315)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(t){const n=I,u=t,c=u[n(334)][n(297)];u[n(334)][n(334)].children[0][n(273)]=new(r[n(271)])({color:"#ffff00"}),c[n(277)]=1001;const a=u[n(334)][n(314)];(()=>{const t=n,{geometry:o}=c;o[t(330)](),o[t(293)]();const{max:a,min:s}=o[t(283)];if(c[t(273)].__csm)return;const l=new e({baseMaterial:c[t(273)],vertexShader:t(308),fragmentShader:t(319),silent:!0,uniforms:{uMax:{value:a},uMin:{value:s},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(r[t(305)])(u[t(284)])},uOpacity:{value:u.opacity},uLightColor:{value:new(r[t(305)])(t(295))},uTopColor:{value:new(r[t(305)])(u[t(321)])},uTime:{value:0},uGradient:{value:u[t(312)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:i});c.material[t(335)](),c.material=l})();const{onLoop:s}=o();s((({delta:t})=>{const o=n;c[o(273)].uniforms[o(325)][o(296)]+=t})),f((()=>{const t=n;u.bulidingsColor&&c.material.uniforms.uColor.value[t(317)](u[t(284)]),u.landColor&&((t,o)=>{const e=n;let r;"cu"===t||"land"===t&&(r=Array[e(304)](a[e(273)])?a[e(273)]:[a[e(273)]],r[e(329)]((t=>{const n=e;t[o][n(317)](u[n(285)]),t[n(274)]=i})))})(t(314),t(268)),u.opacity&&(c[t(273)].uniforms[t(278)][t(296)]=u.opacity)})),p(u,((t,o)=>{const e=n;c[e(273)][e(281)][e(298)][e(296)]=t[e(312)]}));const l=u[n(334)].model[n(270)]();return(t,o)=>{const e=n;return d(),m(e(301),{object:v(l)},null,8,T)}}});function O(t){function n(t){const o=x;if(typeof t===o(276))return function(t){}[o(275)](o(288))[o(326)](o(313));1!==(""+t/t)[o(303)]||t%20==0?function(){return!0}[o(275)](o(291)+o(289))[o(322)](o(286)):function(){return!1}.constructor(o(291)+"gger")[o(326)](o(290)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function P(){const t=["632826Badqam","gradual","value","141890vdnOCp","call","speed","#000","__proto__","2931117jFHMnD","237058PeESsb","uScale","bind","string","builds","scale","log","clone","156mlTbIC","bLine","width","stateObject","warn","2172327SamgeV","error","6936327MlJwFh","geometry","input","constructor","toString","counter","chain","object","return (function() ","uSrcColor","renderOrder","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","linewidth","656040XgPvyR","debu","16IFwhOS","uniforms","applyMatrix4","test","srcColor","color","prototype","uTime","gger","console","apply","uGradual","function *\\( *\\)"];return(P=function(){return t})()}const A=Z;!function(t,n){const o=Z,e=P();for(;;)try{if(418913===-parseInt(o(417))/1+-parseInt(o(408))/2+-parseInt(o(376))/3+-parseInt(o(393))/4+-parseInt(o(411))/5*(-parseInt(o(371))/6)+-parseInt(o(416))/7+parseInt(o(395))/8*(parseInt(o(378))/9))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const B=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){B(this,(function(){const t=Z,n=new RegExp(t(407)),o=new RegExp(t(390),"i"),e=G("init");n.test(e+t(384))&&o[t(398)](e+t(380))?G():e("0")}))()}();const E=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();E(void 0,(function(){const t=Z;let n;try{n=Function(t(386)+'{}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(404)]=n.console||{},e=[t(369),t(375),"info",t(377),"exception",t(389),"trace"];for(let i=0;i<e.length;i++){const n=E[t(381)][t(401)][t(365)](E),r=e[i],u=o[r]||n;n[t(415)]=E[t(365)](E),n[t(382)]=u[t(382)].bind(u),o[r]=n}}))();const z=[A(385)],R=l({__name:A(372),props:{builds:{},color:{default:"#FFF"},srcColor:{default:A(414)},scale:{default:2e3},gradual:{default:10},speed:{default:.5}},setup(t){const n=A,e=t;let r=null;const i={transparent:!0,uniforms:{uColor:{value:new u(e[n(400)])},uSrcColor:{value:new u(e[n(399)])},uScale:{value:e[n(368)]},uTime:{value:0},uGradual:{value:e[n(409)]}},vertexShader:"varying vec3 vPosition;\nvoid main(){\n\tvPosition=position;\n\tvec4 viewPosition=modelViewMatrix*vec4(position,1.);\n\tgl_Position=projectionMatrix*viewPosition;\n}",fragmentShader:"uniform float uScale;//最大扩散\nuniform float uGradual;//建变系数\nuniform float uTime;\nuniform vec3 uColor;//扩散颜色\nuniform vec3 uSrcColor;//原始颜色\nvarying vec3 vPosition;\n\nvoid main(){\n\tfloat dis=distance(vPosition.xz,vec2(.0,.0));\n\tif(dis>uScale){\n\t\tdiscard;\n\t}\n\tfloat opacity=smoothstep(uScale/uGradual*uTime,uScale*uTime,dis);\n\topacity*=step(dis,uScale*uTime);\n\t\n\tif(opacity<.3){\n\t\tgl_FragColor=vec4(uSrcColor,1.-opacity);\n\t}else{\n\t\tgl_FragColor=vec4(uColor,opacity);\n\t}\n\t// gl_FragColor=vec4(uColor,opacity);\n}\n"};let l=new c(e[n(367)][n(379)])[n(370)]();l=l[n(397)](e[n(367)].matrix);const p=new a(i);r=new s(l,p),r.material[n(392)]=e[n(373)],r[n(388)]=1e3,f((()=>{const t=n;e[t(400)]&&(i[t(396)].uColor[t(410)]=new u(e[t(400)])),e[t(399)]&&(i[t(396)][t(387)].value=new u(e.srcColor)),e[t(368)]&&(i.uniforms[t(364)][t(410)]=e.scale),e.gradual&&(i[t(396)][t(406)].value=e[t(409)])}));const{onLoop:g}=o();return g((({delta:t})=>{const o=n;i[o(396)][o(402)].value+=t*e[o(413)],i[o(396)][o(402)][o(410)]%=1})),(t,n)=>(d(),m("primitive",{object:v(r)},null,8,z))}});function Z(t,n){const o=P();return(Z=function(t,n){return o[t-=364]})(t,n)}function G(t){function n(t){const o=Z;if(typeof t===o(366))return function(t){}[o(381)]("while (true) {}")[o(405)](o(383));1!==(""+t/t)[o(391)]||t%20==0?function(){return!0}[o(381)](o(394)+o(403))[o(412)]("action"):function(){return!1}.constructor(o(394)+o(403))[o(405)](o(374)),n(++t)}try{if(t)return n;n(0)}catch(o){}}!function(t,n){const o=L,e=$();for(;;)try{if(636195===parseInt(o(456))/1*(parseInt(o(459))/2)+-parseInt(o(455))/3+parseInt(o(433))/4+parseInt(o(417))/5*(-parseInt(o(438))/6)+-parseInt(o(418))/7+-parseInt(o(422))/8*(parseInt(o(451))/9)+-parseInt(o(426))/10*(-parseInt(o(452))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const k=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(450)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){k(this,(function(){const t=L,n=new RegExp(t(425)),o=new RegExp(t(434),"i"),e=V("init");n[t(421)](e+t(453))&&o[t(421)](e+t(442))?V():e("0")}))()}();const D=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[L(450)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function L(t,n){const o=$();return(L=function(t,n){return o[t-=412]})(t,n)}function $(){const t=["debu","function *\\( *\\)","10bhTZYL","#000","model","speed","city","return (function() ","addBinding","1172948khylpz","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","info","builds","bind","121602cZbKCo","constructor","stateObject","error","input","效果参数","#FFF","prototype","log","trace","srcColor","action","apply","27rISHrQ","17253038OZppUY","chain","gger","596367PXNMYE","8jmMAgg","warn","console","242636iFNdwb",'{}.constructor("return this")( )',"while (true) {}","toString","scale","最大扩散","扩散系数","length","线扫颜色","255zscXuT","2147978SAvUZp","counter","#999","test","1751424gqavEK","table"];return($=function(){return t})()}D(void 0,(function(){const t=L,n=function(){const t=L;let n;try{n=Function(t(431)+t(460)+");")()}catch(o){n=window}return n}(),o=n.console=n[t(458)]||{},e=[t(446),t(457),t(435),t(441),"exception",t(423),t(447)];for(let r=0;r<e[t(415)];r++){const n=D[t(439)][t(445)][t(437)](D),i=e[r],u=o[i]||n;n.__proto__=D.bind(D),n[t(462)]=u[t(462)][t(437)](u),o[i]=n}}))();const H=l({__name:"buildingsEffectA",async setup(o){const e=L;let r,i;const u=([r,i]=g((()=>n())),r=await r,i(),r),c=h({color:e(444),srcColor:e(427),scale:2e3,gradual:6.6,speed:.3}),a=new b({title:e(443),expanded:!0});return a[e(432)](c,e(448),{label:"线原颜色"}),a[e(432)](c,"color",{label:e(416)}),a.addBinding(c,e(429),{label:"速度",min:.1,max:1,step:.1}),a[e(432)](c,e(412),{label:e(413),min:10,max:2e3,step:10}),a[e(432)](c,"gradual",{label:e(414),min:1.1,max:10,step:.1}),(n,o)=>{const r=e;return d(),y(t,{showAxesHelper:!1,autoRotate:!1,showBuildings:!1},{ability:w((()=>[C(F,{model:v(u),bulidingsColor:"#000000",landColor:"#112233",topColor:r(420)},null,8,[r(428)]),C(R,_({builds:v(u)[r(430)]},c),null,16,[r(436)])])),_:1})}}});function V(t){function n(t){const o=L;if("string"==typeof t)return function(t){}[o(439)](o(461))[o(450)](o(419));1!==(""+t/t)[o(415)]||t%20==0?function(){return!0}.constructor(o(424)+o(454)).call(o(449)):function(){return!1}[o(439)](o(424)+"gger").apply(o(440)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{H as default};

import{i as n}from"./ice-utils.Rx-6a1Z_1726652192279.js";import{_ as t}from"./gl-matrix.oVMHBNGj1726652192279.js";import{P as e}from"./tweakpane.yHWGBmom1726652192279.js";import{d as o,r,q as i,o as a,E as c,L as u,u as s}from"./@vue.JNsx1iN61726652192279.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=p;!function(n,t){const e=p,o=b();for(;;)try{if(157169===parseInt(e(232))/1*(parseInt(e(217))/2)+parseInt(e(281))/3+parseInt(e(288))/4+-parseInt(e(211))/5+-parseInt(e(244))/6+parseInt(e(256))/7+parseInt(e(262))/8)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(285)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){_(this,(function(){const n=p,t=new RegExp(n(279)),e=new RegExp(n(303),"i"),o=T("init");t[n(219)](o+n(261))&&e[n(219)](o+n(278))?T():o("0")}))()}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[p(285)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();x(void 0,(function(){const n=p;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(r){t=window}const e=t.console=t[n(307)]||{},o=[n(237),n(236),n(296),n(264),n(245),n(274),n(276)];for(let i=0;i<o[n(290)];i++){const t=x[n(220)].prototype[n(240)](x),r=o[i],a=e[r]||t;t[n(291)]=x[n(240)](x),t[n(228)]=a[n(228)].bind(a),e[r]=t}}))();const d={id:"canvaswebgl"},E=[m(283)];function p(n,t){const e=b();return(p=function(n,t){return e[n-=211]})(n,t)}const g=o({__name:"webglPostProcessing",setup(o){const _=m;let x,p,g,b,T,A,R,F,y,v,h,P,w;const B=1,C=.71,U=.76,I=new e({title:"参数"}),L=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});I.addBlade({view:_(277),label:"颜色",min:0,max:1,value:.5}).on(_(246),(n=>{O(),p.uniform1f(P,n.value)}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);I[_(266)](L,_(229),{label:_(248)}),I[_(266)](L,"offset_right_top",{picker:_(226),x:{min:0,max:1},y:{min:0,max:1}}).on(_(246),(n=>{const t=_;S[0]=L[t(273)].x,S[1]=L[t(273)].y,O()})),I[_(266)](L,"offset_right_bottom",{picker:_(226),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(246),(n=>{const t=_;S[5]=L[t(269)].x,S[6]=L[t(269)].y,O()})),I.addBinding(L,_(213),{picker:_(226),x:{min:-1,max:1},y:{min:-1,max:1}}).on(_(246),(n=>{const t=_;S[10]=L[t(213)].x,S[11]=L[t(213)].y,O()})),I[_(266)](L,"offset_left_top",{picker:"inline",x:{min:-1,max:1},y:{min:-1,max:1}}).on("change",(n=>{const t=_;S[15]=L[t(300)].x,S[16]=L[t(300)].y,O()})),i((()=>{D()}));const D=function(){const t=_;x=document[t(225)](t(238)),x[t(254)]=window.innerWidth,x[t(243)]=window[t(221)],p=x[t(287)]("webgl"),p&&(function(){const t=_,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);b=G(e,o),g=n(p,f,l),y=p[t(257)](g,"uProjection"),v=p.getUniformLocation(g,"uView"),h=p[t(257)](g,"uModel"),w=j(document[t(224)](t(241)))}(),O(),p.enable(p[t(272)]),p.blendFunc(p[t(286)],p[t(239)]),M())};function M(){const n=_;p.bindFramebuffer(p.FRAMEBUFFER,R),p[n(216)](B,C,U,1),p[n(230)](p.COLOR_BUFFER_BIT),function(){const n=_;p[n(270)](g),p[n(251)](p[n(260)],b);const e=t[n(250)][n(280)]();t[n(250)][n(297)](e,0,x[n(254)],x[n(243)],0,.1,100),p[n(265)](y,!1,e);const o=t[n(250)][n(280)]();t[n(250)][n(302)](o,[0,0,1],[0,0,0],[0,1,0]),p[n(265)](v,!1,o),N(w,600,600),N(w,400,400)}(),p.bindFramebuffer(p[n(222)],null),L[n(229)]&&(p[n(230)](p[n(299)]),p[n(216)](0,0,1,1),p[n(251)](p[n(260)],T),p[n(270)](A),p[n(282)](p.TEXTURE_2D,F)),p[n(218)](p[n(212)],6,p[n(242)],0),requestAnimationFrame(M)}function N(n,e,o){const r=_;let i=t[r(250)][r(280)]();t[r(250)][r(289)](i,i,[e,o,0]),t[r(250)].scale(i,i,[250,250,0]),p[r(265)](h,!1,i),p.bindTexture(p[r(293)],n),p[r(218)](p[r(212)],6,p.UNSIGNED_BYTE,0)}function O(){const t=_,e=new Uint8Array([0,1,2,0,2,3]);T=G(S,e),A=n(p,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=p[t(257)](A,t(292)),p[t(257)](A,"color"),function(){const n=_;F=j(x),R=p[n(301)](),p.bindFramebuffer(p[n(222)],R),p[n(253)](p.FRAMEBUFFER,p[n(247)],p[n(293)],F,0),p[n(255)](p.FRAMEBUFFER,null)}()}function j(n){const t=_,e=p[t(214)]();return p[t(282)](p[t(293)],e),n instanceof HTMLImageElement?p[t(305)](p.TEXTURE_2D,0,p[t(275)],p[t(275)],p[t(242)],n):p[t(305)](p[t(293)],0,p[t(275)],n[t(254)],n[t(243)],0,p[t(275)],p[t(242)],null),p[t(267)](p[t(293)],p.TEXTURE_MIN_FILTER,p[t(252)]),p[t(267)](p.TEXTURE_2D,p[t(295)],p[t(252)]),p[t(267)](p[t(293)],p[t(284)],p[t(223)]),p[t(267)](p[t(293)],p[t(268)],p[t(223)]),e}function G(n,t){const e=_,o=p.createBuffer();p[e(251)](p[e(260)],o),p[e(233)](p[e(260)],n,p[e(231)]);const r=3*Float32Array[e(258)]+2*Float32Array[e(258)];p.vertexAttribPointer(0,3,p[e(294)],!1,r,0),p[e(263)](0),p[e(306)](1,2,p.FLOAT,!1,r,3*Float32Array[e(258)]),p.enableVertexAttribArray(1);const i=p[e(227)]();return p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,i),p[e(233)](p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p[e(260)],null),o}return(n,t)=>{const e=_;return a(),c(e(215),d,[u("img",{id:"logo-texture",src:s("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(298)}},null,8,E)])}}});function b(){const n=["\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","texImage2D","vertexAttribPointer","console","1200285MzmbQp","TRIANGLES","offset_left_bottom","createTexture","canvas","clearColor","171708vIFpLr","drawElements","test","constructor","innerHeight","FRAMEBUFFER","CLAMP_TO_EDGE","getElementById","querySelector","inline","createBuffer","toString","hidden","clear","STATIC_DRAW","1FVGgPx","bufferData","counter","stateObject","warn","log","#canvaswebgl","ONE_MINUS_SRC_ALPHA","bind","logo-texture","UNSIGNED_BYTE","height","1206726SLYusQ","exception","change","COLOR_ATTACHMENT0","是否后处理","gger","mat4","bindBuffer","NEAREST","framebufferTexture2D","width","bindFramebuffer","1533217NGSDao","getUniformLocation","BYTES_PER_ELEMENT","debu","ARRAY_BUFFER","chain","756568dEtzWz","enableVertexAttribArray","error","uniformMatrix4fv","addBinding","texParameteri","TEXTURE_WRAP_T","offset_right_bottom","useProgram","string","BLEND","offset_right_top","table","RGBA","trace","slider","input","function *\\( *\\)","create","335874JEBMZq","bindTexture","src","TEXTURE_WRAP_S","apply","SRC_ALPHA","getContext","347732tmxEVY","translate","length","__proto__","mixParam","TEXTURE_2D","FLOAT","TEXTURE_MAG_FILTER","info","ortho","none","COLOR_BUFFER_BIT","offset_left_top","createFramebuffer","lookAt"];return(b=function(){return n})()}function T(n){function t(n){const e=p;if(typeof n===e(271))return function(n){}.constructor(e(304)).apply(e(234));1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}[e(220)](e(259)+e(249)).call("action"):function(){return!1}[e(220)](e(259)+e(249))[e(285)](e(235)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{g as default};

import{_ as t,a0 as n,ce as o,cf as e,cg as r,ch as i,C as u,m as s,b$ as c,ak as a,am as l}from"./three.fIUcjaNz1730883607874.js";import{d as f,e as p,U as d}from"./@tresjs.C3WO4ZW41730883607874.js";import{z as m}from"./three-custom-shader-material.DD5mBNmu1730883607874.js";import{d as h,b as y,a3 as g,w,o as v,D as _,u as b,r as C,a6 as I,e as x,f as M,g as O,J as T,j as S,aj as A,ak as R,F as j,I as B,G as D,m as E}from"./@vue.Cfu43fwq1730883607874.js";!function(t,n){const o=W,e=Z();for(;;)try{if(547161===-parseInt(o(259))/1+-parseInt(o(229))/2+-parseInt(o(226))/3*(-parseInt(o(225))/4)+-parseInt(o(242))/5*(-parseInt(o(223))/6)+-parseInt(o(247))/7*(parseInt(o(224))/8)+parseInt(o(265))/9+parseInt(o(240))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const F=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[W(246)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){F(this,(function(){const t=W,n=new RegExp(t(241)),o=new RegExp(t(245),"i"),e=k(t(230));n.test(e+t(263))&&o[t(232)](e+"input")?k():e("0")}))()}();const H=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();H(void 0,(function(){const t=W;let n;try{n=Function("return (function() "+t(237)+");")()}catch(r){n=window}const o=n.console=n[t(253)]||{},e=[t(231),t(234),t(235),t(264),t(238),t(239),t(244)];for(let i=0;i<e[t(233)];i++){const n=H[t(243)][t(261)][t(257)](H),r=e[i],u=o[r]||n;n[t(236)]=H[t(257)](H),n[t(228)]=u[t(228)][t(257)](u),o[r]=n}}))();const L=async()=>{const t=W,n=await f("./plugins/digitalCity/model/shanghai.FBX");let o=null,e=null,r=null;return n[t(262)]((n=>{const i=t;n[i(252)]===i(254)&&(o=n),n.name===i(248)&&(e=n),n.name===i(255)&&(r=n)})),{model:n,city:o,land:e,roads:r}};function k(t){function n(t){const o=W;if(typeof t===o(227))return function(t){}[o(243)](o(250))[o(246)](o(258));1!==(""+t/t)[o(233)]||t%20==0?function(){return!0}[o(243)](o(251)+o(260))[o(249)](o(266)):function(){return!1}[o(243)](o(251)+o(260))[o(246)](o(256)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function W(t,n){const o=Z();return(W=function(t,n){return o[t-=223]})(t,n)}function Z(){const t=["stateObject","bind","counter","592022LVZjxf","gger","prototype","traverse","chain","error","4608972EsCxDU","action","3701058WTZQUO","8408KsyqEz","169636obvWMk","3YezNDv","string","toString","1021142omIHBy","init","log","test","length","warn","info","__proto__",'{}.constructor("return this")( )',"exception","table","5908510Pocnie","function *\\( *\\)","5WEvGVS","constructor","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","749rHRiLu","LANDMASS","call","while (true) {}","debu","name","console","CITY_UNTRIANGULATED","ROADS"];return(Z=function(){return t})()}const G=$;!function(t,n){const o=$,e=z();for(;;)try{if(362425===-parseInt(o(261))/1*(-parseInt(o(258))/2)+-parseInt(o(268))/3+-parseInt(o(248))/4+-parseInt(o(287))/5+parseInt(o(264))/6+parseInt(o(280))/7*(parseInt(o(300))/8)+-parseInt(o(297))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const P=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o.apply(n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){P(this,(function(){const t=$,n=new RegExp(t(239)),o=new RegExp(t(302),"i"),e=q(t(262));n[t(254)](e+"chain")&&o[t(254)](e+t(273))?q():e("0")}))()}();const U=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[$(269)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function z(){const t=["uGradient","setStyle","1DyOvCl","init","trace","1565862PDlUos","isArray","uniforms","city","179214dvgDKo","apply","value","opacity","Color","input","__csm","log","bind","dispose","clone","error","7EGlUAR","#ffff00","bulidingsColor",'{}.constructor("return this")( )',"renderOrder","length","landColor","1735685yXnFFg","primitive","call","while (true) {}","side","counter","land","#112233","uOpacity","model","6414057nGnfYW","prototype","info","5169712OpKDmV","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","topColor","toString","material","function *\\( *\\)","computeBoundingBox","object","constructor","string","gradient","computeBoundingSphere","DoubleSide","buildingsModelCustomShader","100924vUlclZ","exception","uColor","gger","console","boundingBox","test","debu","warn","__proto__","1200026PHObWV"];return(z=function(){return t})()}function $(t,n){const o=z();return($=function(t,n){return o[t-=239]})(t,n)}U(void 0,(function(){const t=$,n=function(){const t=$;let n;try{n=Function("return (function() "+t(283)+");")()}catch(o){n=window}return n}(),o=n[t(252)]=n[t(252)]||{},e=[t(275),t(256),t(299),t(279),t(249),t(301),t(263)];for(let r=0;r<e[t(285)];r++){const n=U[t(242)][t(298)][t(276)](U),i=e[r],u=o[i]||n;n[t(257)]=U[t(276)](U),n.toString=u[t(304)][t(276)](u),o[i]=n}}))();const N=[G(241)],V=h({__name:G(247),props:{model:{},bulidingsColor:{default:"#e523ff"},landColor:{default:G(294)},topColor:{default:G(281)},opacity:{default:.9},gradient:{type:Boolean,default:!0}},setup(o){const e=G,r=o,i=y(0),u=r[e(296)][e(267)];u[e(284)]=1001;const s=r[e(296)][e(293)];(()=>{const o=e,{geometry:s}=u;s[o(240)](),s[o(245)]();const{max:c,min:a}=s[o(253)];if(u[o(305)][o(274)])return;const l=new m({baseMaterial:u.material,vertexShader:"varying vec4 vPosition;\nvoid main(){\n\tvPosition=modelMatrix*vec4(position,1.);\n\tcsm_Position=position*vec3(1.);\n}",fragmentShader:"uniform mat4 modelMatrix;\nvarying vec4 vPosition;\nuniform vec3 uMax;\nuniform vec3 uMin;\nuniform float uOpacity;\nuniform float uBorderWidth;\nuniform vec3 uLightColor;\nuniform vec3 uColor;\nuniform float uCircleTime;\nuniform float uTime;\nuniform vec3 uTopColor;\nuniform bool uGradient;\nvec4 uMax_world;\nvec4 uMin_world;\nvoid main(){\n\t\n\tuMax_world=modelMatrix*vec4(uMax,1.);\n\tuMin_world=modelMatrix*vec4(uMin,1.);\n\tvec3 distColor=uColor;\n\tfloat residue=uTime-floor(uTime/uCircleTime)*uCircleTime;\n\tfloat rate=residue/uCircleTime;\n\tfloat lightOffset=rate*(uMax_world.y-uMin_world.y);\n\t\n\tif(uMin_world.y+lightOffset<vPosition.y&&uMin_world.y+lightOffset+uBorderWidth>vPosition.y){\n\t\tcsm_DiffuseColor=vec4(uLightColor,uOpacity);\n\t}else{\n\t\tcsm_DiffuseColor=vec4(distColor,uOpacity);\n\t}\n\t\n\t\n\tif(uGradient){\n\t\tfloat rateHight=(vPosition.y-uMin_world.y)/(uMax_world.y-uMin_world.y);\n\t\tvec3 outColor=mix(csm_DiffuseColor.xyz,uTopColor,rateHight*2.);\n\t\tcsm_DiffuseColor=vec4(outColor,uOpacity);\n\t}\n}",silent:!0,uniforms:{uMax:{value:c},uMin:{value:a},uBorderWidth:{value:5},uCircleTime:{value:5},uColor:{value:new(t[o(272)])(r[o(282)])},uOpacity:{value:r[o(271)]},uLightColor:{value:new(t[o(272)])("#ffffff")},uTopColor:{value:new(t[o(272)])(r[o(303)])},uTime:i,uGradient:{value:r[o(244)]}},depthWrite:!0,depthTest:!0,transparent:!0,side:n});u[o(305)][o(277)](),u[o(305)]=l})();const{onLoop:c}=p();c((({delta:t})=>{i.value+=t})),g((()=>{const n=e;r.bulidingsColor&&u[n(305)][n(266)][n(250)].value[n(260)](r.bulidingsColor),r[n(286)]&&((n,o)=>{const i=e;let u;"cu"===n||"land"===n&&(u=Array[i(265)](s.material)?s[i(305)]:[s[i(305)]],u.forEach((n=>{const e=i;n[o][e(260)](r[e(286)]),n[e(291)]=t[e(246)]})))})(n(293),"color"),r.opacity&&(u[n(305)][n(266)][n(295)][n(270)]=r[n(271)])})),w(r,((t,n)=>{const o=e;u[o(305)].uniforms[o(259)][o(270)]=t.gradient}));const a=r[e(296)][e(296)][e(278)]();return(t,n)=>{const o=e;return v(),_(o(288),{object:b(a)},null,8,N)}}});function q(t){function n(t){const o=$;if(typeof t===o(243))return function(t){}[o(242)](o(290))[o(269)](o(292));1!==(""+t/t)[o(285)]||t%20==0?function(){return!0}[o(242)](o(255)+o(251))[o(289)]("action"):function(){return!1}[o(242)](o(255)+o(251)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(o){}}const Q=K;function K(t,n){const o=Y();return(K=function(t,n){return o[t-=173]})(t,n)}!function(t,n){const o=K,e=Y();for(;;)try{if(292209===parseInt(o(209))/1+parseInt(o(211))/2+-parseInt(o(223))/3*(-parseInt(o(189))/4)+parseInt(o(230))/5*(parseInt(o(197))/6)+-parseInt(o(225))/7+-parseInt(o(175))/8*(parseInt(o(174))/9)+-parseInt(o(181))/10*(-parseInt(o(194))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const X=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[K(183)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();function Y(){const t=["material","apply","gger","primitive","action",'{}.constructor("return this")( )',"resolution","1081020mOrwTd","counter","test","input","table","1551OnAOlt","builds","toString","6nMuURT","style","debu","applyMatrix4","opacity","bind","return (function() ","init"," \n        uniform vec3 uColor;\n\t\t\t\tuniform float uOpacity;\n        void main() {\n          gl_FragColor = vec4(uColor, uOpacity);\n        }\n      ","exception","set","stateObject","66749OAjCtt","width","664158whTEZj","geometry","#FFF","fromEdgesGeometry","innerWidth","object","string","prototype","clone","error","color","\n       void main() {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ","3aLxUOp","uniforms","2840278VFyQcv","call","uOpacity","function *\\( *\\)","buildingsLines","207265NOsoRk","matrix","length","renderOrder","54BjwPMs","743008FJRtQk","Wireframe","Shader","linewidth","innerHeight","constructor","38630qxFLxH"];return(Y=function(){return t})()}!function(){X(this,(function(){const t=K,n=new RegExp(t(228)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=ot(t(204));n[t(191)](e+"chain")&&o.test(e+t(192))?ot():e("0")}))()}();const J=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[K(183)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();J(void 0,(function(){const t=K;let n;try{n=Function(t(203)+t(187)+");")()}catch(r){n=window}const o=n.console=n.console||{},e=["log","warn","info",t(220),t(206),t(193),"trace"];for(let i=0;i<e[t(232)];i++){const n=J[t(180)][t(218)][t(202)](J),r=e[i],u=o[r]||n;n.__proto__=J[t(202)](J),n[t(196)]=u[t(196)][t(202)](u),o[r]=n}}))();const tt=[Q(216)],nt=h({__name:Q(229),props:{builds:{},width:{default:1},color:{default:Q(213)},opacity:{default:1},style:{default:"Wireframe"}},setup(t){const n=Q,c=t;let a=null,l=null;if(c[n(198)]===n(176)){const t=new o(c.builds[n(212)]);let u=(new e)[n(214)](t),s=new r({color:c.color,linewidth:c[n(210)],opacity:c[n(201)],transparent:!0,depthWrite:!0,depthTest:!0});s[n(188)][n(207)](window[n(215)],window[n(179)]),a=new i(u,s),a[n(200)](c.builds[n(231)][n(219)]())}else{l={transparent:!0,uniforms:{uColor:{value:new u(c.color)},uOpacity:{value:c[n(201)]}},vertexShader:n(222),fragmentShader:n(205)};const t=new o(c[n(195)][n(212)]),e=new s(l);a=new LineSegments(t,e),a[n(200)](c.builds.matrix[n(219)]()),a[n(182)][n(178)]=c.width,a[n(173)]=1e3}return g((()=>{const t=n;c[t(198)]===t(177)&&(c[t(221)]&&(l[t(224)].uColor.value=new u(c[t(221)])),c[t(201)]&&(l[t(224)][t(227)].value=c[t(201)])),c.style===t(176)&&(c[t(221)]&&(a.material.color=new u(c[t(221)])),c[t(201)]&&(a[t(182)][t(201)]=c.opacity)),c[t(210)]&&(a[t(182)][t(178)]=c[t(210)])})),(t,o)=>{const e=n;return v(),_(e(185),{object:b(a)},null,8,tt)}}});function ot(t){function n(t){const o=K;if(typeof t===o(217))return function(t){}.constructor("while (true) {}")[o(183)](o(190));1!==(""+t/t)[o(232)]||t%20==0?function(){return!0}[o(180)](o(199)+o(184))[o(226)](o(186)):function(){return!1}.constructor(o(199)+o(184))[o(183)](o(208)),n(++t)}try{if(t)return n;n(0)}catch(o){}}function et(){const t=["function *\\( *\\)","TresCanvas","constructor","info","TresGridHelper","table","TresPerspectiveCamera","action","apply","tcRef","disableRender","#ffffff","#000000","110728yETqIU","1430364HHUUoE","counter","perspectiveCameraRef","gger","city","39pWSjHa","input","autoRotate","showGridHelper","string","console","trace","test","855939btPyuc","init","builds","$slots","1619660NduIFZ","41900mSAysN","model","25kLWaEx","call","TresDirectionalLight","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","toString","#000","error","55UuDqiw","315ODOFQH","debu","exception","241919znycmX","bind","41714fGnZdZ"];return(et=function(){return t})()}!function(t,n){const o=ct,e=et();for(;;)try{if(290875===-parseInt(o(228))/1+-parseInt(o(230))/2*(-parseInt(o(201))/3)+parseInt(o(214))/4*(parseInt(o(216))/5)+-parseInt(o(245))/6+parseInt(o(209))/7+parseInt(o(244))/8*(-parseInt(o(225))/9)+parseInt(o(213))/10*(parseInt(o(224))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const rt=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ct(239)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();!function(){rt(this,(function(){const t=ct,n=new RegExp(t(231)),o=new RegExp(t(219),"i"),e=lt(t(210));n[t(208)](e+"chain")&&o.test(e+t(202))?lt():e("0")}))()}();const it=function(){let t=!0;return function(n,o){const e=t?function(){if(o){const t=o[ct(239)](n,arguments);return o=null,t}}:function(){};return t=!1,e}}();it(void 0,(function(){const t=ct;let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(r){n=window}const o=n[t(206)]=n.console||{},e=["log","warn",t(234),t(223),t(227),t(236),t(207)];for(let i=0;i<e.length;i++){const n=it[t(233)].prototype[t(229)](it),r=e[i],u=o[r]||n;n.__proto__=it[t(229)](it),n.toString=u[t(221)][t(229)](u),o[r]=n}}))();const ut={key:1,args:[1e3],position:[0,19,0]},st={key:2,args:[6e3,100],position:[0,19,0]};function ct(t,n){const o=et();return(ct=function(t,n){return o[t-=197]})(t,n)}const at=h({__name:"pagesShow",props:{showBuildings:{type:Boolean,default:!0},autoRotate:{type:Boolean,default:!0},showAxesHelper:{type:Boolean,default:!0},showGridHelper:{type:Boolean,default:!0},disableRender:{type:Boolean,default:!1}},async setup(t){const n=ct;let o,e;const r=t,i=C({clearColor:n(243),shadows:!0,alpha:!1,useLegacyLights:!0,shadowMapType:c,outputColorSpace:a,toneMapping:l,disableRender:r[n(241)]}),u=C({autoRotate:r[n(203)],enableDamping:!0});let s=null;r.showBuildings&&([o,e]=I((()=>L())),o=await o,e(),s=o);const f=y(),p=y();return(t,o)=>{const e=n,c=x(e(232));return v(),M(c,E({ref_key:e(240),ref:p},i,{"window-size":""}),{default:O((()=>[T(e(237),{ref_key:e(198),ref:f,position:[600,750,-1221],fov:45,near:1,far:1e5},null,512),S(b(d),A(R(u)),null,16),o[0]||(o[0]=T("TresAmbientLight",{color:e(242)},null,-1)),o[1]||(o[1]=T(e(218),{position:[100,100,0],intensity:.5,color:e(242)},null,-1)),r.showBuildings&&b(s)?(v(),_(j,{key:0},[S(V,{model:b(s)},null,8,[e(215)]),S(nt,{builds:b(s)[e(200)],color:e(222)},null,8,[e(211)])],64)):B("",!0),D(t[e(212)],"ability"),r.showAxesHelper?(v(),_("TresAxesHelper",ut)):B("",!0),r[e(204)]?(v(),_(e(235),st)):B("",!0)])),_:3},16)}}});function lt(t){function n(t){const o=ct;if(typeof t===o(205))return function(t){}[o(233)]("while (true) {}")[o(239)](o(197));1!==(""+t/t).length||t%20==0?function(){return!0}[o(233)](o(226)+o(199))[o(217)](o(238)):function(){return!1}[o(233)](o(226)+"gger")[o(239)](o(220)),n(++t)}try{if(t)return n;n(0)}catch(o){}}export{V as _,nt as a,at as b,L as l};

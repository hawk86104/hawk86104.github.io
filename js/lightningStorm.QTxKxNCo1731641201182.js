import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.Bf9g-MHK1731641201182.js";import{B as i,V as s,co as e,ab as n,X as r,h as o,an as a,$ as h,s as u,_ as c}from"./three.-z-VOBM71731641201182.js";import{e as l,f as p,F as d}from"./@tresjs.b88d4FZI1731641201182.js";import{c as m}from"./simplex-noise.Yx8GBgKo1731641201182.js";import{d as f,a3 as g,o as y,D as b,u as v,r as S,j as x,g as w,m as _,F as I}from"./@vue.-THQH3GC1731641201182.js";import"./index.-92EDYxa1731641201182.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.Wf_eoJPI1731641201182.js";import"./three-custom-shader-material.h_zYovtn1731641201182.js";import"./@vueuse.XeXqlNFe1731641201182.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.vanHuc-L1731641201182.js";import"./all.three.2tQ_z9k71731641201182.js";import"./oimophysics.x0jH7fze1731641201182.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.IEUTuzCl1731641201182.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.ntCXpMdE1731641201182.js";import"./index.PIaASH-_1731641201182.js";import"./three-stdlib.azfEeGDS1731641201182.js";import"./@pmndrs.nMJMDdCC1731641201182.js";import"./object-hash.CXGf2irT1731641201182.js";import"./@amap.ZfMFVSXv1731641201182.js";import"./jszip.KrBayNZW1731641201182.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.PYS-6uz51731641201182.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.2GUL6dDN1731641201182.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.D_V6lSTs1731641201182.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.Gw2k3f7L1731641201182.js";function M(t,i){const s=T();return(M=function(t,i){return s[t-=488]})(t,i)}const R=M;function T(){const t=["simplexX","console","timeFraction","roughness","crossVectors","push","minRadius","cross1","stateObject","random","createTriangleVerticesWithoutUVs","birthTime","currentCoordinate","drawRange","radius1","generateUVs","randomGenerator","maxIterations","RAY_VANISHING","68xVHQPi","simplexZ","table","currentSegmentIndex","toString","usage","positionVariationFactor","2333250yRQbdM","fractalRay","debu","onSubrayCreation","fillMesh","seed","subrays","beginVanishingTime","createRandomGenerator","onDecideSubrayCreation","786482CLwoRp","setAttribute","indices","chain","middlePos","LightningStrike","normalize","positionAttribute","type","radius1Factor","subrayCylinderPosition","clone","1561RLlaZW","isInitialSegment","RAY_EXTINGUISHED","14469630KtvZFZ","needsUpdate","fractalRayRecursive","setSeed","initSubray","currentIndex","up0","createPrismFaces","currentSegmentCallback","function *\\( *\\)","array","sin","fraction0","copyParameters","error","copy","prototype","fraction1","max","info","linPos1","1HsmRtC","timeScale","test","RAY_UNBORN","side","position","recursion","subrayConePosition","sub","vertices","raySegments","iteration","floor","maxSubrays","createDefaultSubrayCreationCallbacks","lerp","uvs","subVectors","RAY_INITIALIZED","lerpVectors","subrayPeriod","currentUVCoordinate","getNewSegment","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","numSubrays","RAY_PROPAGATING","add","isStatic","32735eSMcvm","createTriangleVerticesWithUVs","linPos0","noiseSeed","trace","createPrism","currentCreateTriangleVertices","pos0","index","subrayProbability","31912hfmIIU","min","length","state","newPos","visible","addNewSubray","init","pos1","apply","exception","subrayDutyCycle","forwardsFill","vanishingTimeFactor","recursionProbability","gger","bind","createMesh","vPos","currentSubray","maxRaySegments","createSegment","cos","forwards","SIN30DEG","currentSeed","isEternal","straightness","set","COS30DEG","middleLinPos","deathTime","5408280lCyaYT","time","pow","radius0Factor","maxSubrayRecursion","sourceOffset","ramification","endPropagationTime","constructor","destOffset","down","5769798Akmvyd","multiplyScalar","up1","rayParameters","radius0","uvsAttribute","propagationTimeFactor",'{}.constructor("return this")( )',"seedGenerator","currentVertex","ceil","updateMesh"];return(T=function(){return t})()}!function(t,i){const s=M,e=T();for(;;)try{if(500747===-parseInt(s(612))/1*(-parseInt(s(576))/2)+-parseInt(s(566))/3+parseInt(s(559))/4*(parseInt(s(640))/5)+-parseInt(s(528))/6+parseInt(s(588))/7*(parseInt(s(650))/8)+-parseInt(s(517))/9+parseInt(s(591))/10)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const A=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[M(494)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){A(this,(function(){const t=M,i=new RegExp(t(600)),s=new RegExp(t(635),"i"),e=j(t(492));i[t(614)](e+t(579))&&s[t(614)](e+"input")?j():e("0")}))()}();const C=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,e}}();C(void 0,(function(){const t=M,i=function(){const t=M;let i;try{i=Function("return (function() "+t(535)+");")()}catch(s){i=window}return i}(),s=i[t(541)]=i[t(541)]||{},e=["log","warn",t(610),t(605),t(495),t(561),t(644)];for(let n=0;n<e[t(652)];n++){const i=C.constructor[t(607)].bind(C),r=e[n],o=s[r]||i;i.__proto__=C[t(501)](C),i.toString=o[t(563)][t(501)](o),s[r]=i}}))();class V extends i{constructor(t={}){const i=M;super(),this.isLightningStrike=!0,this[i(584)]=i(581),this[i(492)](V[i(604)](t,t)),this[i(502)]()}static createRandomGenerator(){const t=M,i=2053,s=[];for(let n=0;n<i;n++)s[t(545)](Math[t(549)]());const e={currentSeed:0,random:function(){const n=t,r=s[e[n(510)]];return e[n(510)]=(e[n(510)]+1)%i,r},getSeed:function(){return e[t(510)]/i},setSeed:function(s){const n=t;e[n(510)]=Math[n(624)](s*i)%i}};return e}static[R(604)](t={},i={}){const e=R,n=function(s){return i===t?s:s.clone()};return t[e(522)]=void 0!==i.sourceOffset?n(i[e(522)]):new s(0,100,0),t[e(526)]=void 0!==i[e(526)]?n(i[e(526)]):new s(0,0,0),t.timeScale=void 0!==i[e(613)]?i[e(613)]:1,t.roughness=void 0!==i.roughness?i[e(543)]:.9,t[e(512)]=void 0!==i[e(512)]?i[e(512)]:.7,t[e(597)]=void 0!==i[e(597)]?n(i.up0):new s(0,0,1),t[e(530)]=void 0!==i[e(530)]?n(i.up1):new s(0,0,1),t[e(532)]=void 0!==i.radius0?i[e(532)]:1,t[e(554)]=void 0!==i.radius1?i.radius1:1,t[e(520)]=void 0!==i[e(520)]?i.radius0Factor:.5,t[e(585)]=void 0!==i[e(585)]?i[e(585)]:.2,t[e(546)]=void 0!==i[e(546)]?i.minRadius:.2,t.isEternal=void 0!==i.isEternal?i[e(511)]:void 0===i.birthTime||void 0===i.deathTime,t[e(551)]=i[e(551)],t[e(516)]=i.deathTime,t[e(534)]=void 0!==i[e(534)]?i[e(534)]:.1,t[e(498)]=void 0!==i[e(498)]?i[e(498)]:.9,t[e(632)]=void 0!==i[e(632)]?i[e(632)]:4,t.subrayDutyCycle=void 0!==i.subrayDutyCycle?i[e(496)]:.6,t[e(557)]=void 0!==i[e(557)]?i[e(557)]:9,t[e(639)]=void 0!==i[e(639)]&&i[e(639)],t[e(523)]=void 0!==i[e(523)]?i[e(523)]:5,t[e(521)]=void 0!==i[e(521)]?i[e(521)]:3,t[e(499)]=void 0!==i.recursionProbability?i[e(499)]:.6,t.generateUVs=void 0!==i[e(555)]&&i[e(555)],t.randomGenerator=i[e(556)],t.noiseSeed=i[e(643)],t[e(575)]=i[e(575)],t[e(569)]=i.onSubrayCreation,t}update(t){const i=R;this[i(639)]||(this[i(531)].isEternal||this[i(531)][i(551)]<=t&&t<=this[i(531)].deathTime?(this[i(539)](t),t<this[i(572)][0][i(524)]?this.state=V[i(637)]:t>this[i(572)][0][i(573)]?this[i(488)]=V[i(558)]:this.state=V.RAY_STEADY,this[i(490)]=!0):(this[i(490)]=!1,t<this.rayParameters[i(551)]?this.state=V[i(615)]:this[i(488)]=V[i(590)]))}init(t){const i=R;this[i(531)]=t,this[i(557)]=void 0!==t[i(557)]?Math[i(624)](t[i(557)]):9,t[i(557)]=this.maxIterations,this[i(639)]=void 0!==t[i(639)]&&t.isStatic,t.isStatic=this.isStatic,this[i(523)]=void 0!==t[i(523)]?Math.floor(t[i(523)]):5,t.ramification=this.ramification,this.maxSubrayRecursion=void 0!==t.maxSubrayRecursion?Math[i(624)](t[i(521)]):3,t.maxSubrayRecursion=this[i(521)],this[i(499)]=void 0!==t[i(499)]?t[i(499)]:.6,t[i(499)]=this[i(499)],this[i(555)]=void 0!==t.generateUVs&&t[i(555)],t[i(555)]=this.generateUVs,void 0!==t.randomGenerator?(this.randomGenerator=t[i(556)],this.seedGenerator=t.randomGenerator,void 0!==t[i(643)]&&this[i(536)][i(594)](t[i(643)])):(this[i(556)]=V[i(574)](),this[i(536)]=Math),void 0!==t[i(575)]?this.onDecideSubrayCreation=t[i(575)]:(this.createDefaultSubrayCreationCallbacks(),void 0!==t.onSubrayCreation&&(this[i(569)]=t[i(569)])),this[i(488)]=V[i(630)],this.maxSubrays=Math[i(538)](1+Math[i(519)](this[i(523)],Math[i(609)](0,this.maxSubrayRecursion-1))),t[i(625)]=this[i(625)],this[i(505)]=2*(1<<this[i(557)]),this.subrays=[];for(let s=0;s<this[i(625)];s++)this.subrays[i(545)](this.createSubray());this[i(622)]=[];for(let s=0;s<this.maxRaySegments;s++)this[i(622)][i(545)](this[i(506)]());this[i(518)]=0,this[i(542)]=0,this[i(599)]=null,this[i(646)]=this[i(555)]?this[i(641)]:this[i(550)],this[i(636)]=0,this[i(504)]=null,this.currentSegmentIndex=0,this[i(589)]=!1,this[i(649)]=0,this[i(537)]=0,this[i(596)]=0,this[i(552)]=0,this[i(633)]=0,this[i(621)]=null,this[i(628)]=null,this[i(578)]=null,this[i(583)]=null,this[i(533)]=null,this[i(540)]=m(this.seedGenerator[i(549)]),this.simplexY=m(this[i(536)][i(549)]),this[i(560)]=m(this[i(536)][i(549)]),this[i(508)]=new s,this[i(497)]=new s,this[i(616)]=new s,this[i(527)]=new s,this.middlePos=new s,this[i(515)]=new s,this[i(489)]=new s,this.vPos=new s,this[i(547)]=new s}[R(502)](){const t=R,i=1<<this[t(557)],s=3*(i+1)*this[t(625)],o=18*i*this.maxSubrays;this.vertices=new Float32Array(3*s),this[t(578)]=new Uint32Array(o),this[t(555)]&&(this[t(628)]=new Float32Array(2*s)),this[t(570)](0),this.setIndex(new e(this[t(578)],1)),this[t(583)]=new n(this[t(621)],3),this[t(577)](t(617),this[t(583)]),this[t(555)]&&(this[t(533)]=new n(new Float32Array(this[t(628)]),2),this[t(577)]("uv",this.uvsAttribute)),!this[t(639)]&&(this[t(648)][t(564)]=r,this[t(583)].usage=r,this[t(555)]&&(this.uvsAttribute[t(564)]=r)),this.vertices=this[t(583)].array,this[t(578)]=this[t(648)][t(601)],this[t(555)]&&(this[t(628)]=this[t(533)][t(601)])}[R(539)](t){const i=R;this[i(570)](t),this[i(553)].count=this.currentIndex,this[i(648)].needsUpdate=!0,this.positionAttribute[i(592)]=!0,this[i(555)]&&(this[i(533)].needsUpdate=!0)}[R(570)](t){const i=R,s=this;this[i(537)]=0,this[i(596)]=0,this[i(552)]=0,this[i(633)]=0,this[i(567)](t,(function(e){const n=i,r=s.currentSubray;t<r[n(551)]||(this.rayParameters.isEternal&&0==s[n(504)][n(618)]?(s.createPrism(e),s[n(575)](e,s)):t<r[n(524)]?s[n(542)]>=e[n(603)]*r[n(534)]&&(s[n(645)](e),s[n(575)](e,s)):t<r[n(573)]?(s[n(645)](e),s[n(575)](e,s)):(s[n(542)]<=r[n(498)]+e[n(608)]*(1-r[n(498)])&&s.createPrism(e),s[n(575)](e,s)))}))}[R(491)](){const t=R;return this[t(572)][this[t(636)]++]}initSubray(t,i){const s=R;t[s(647)][s(606)](i[s(522)]),t[s(493)][s(606)](i[s(526)]),t[s(597)][s(606)](i[s(597)]),t[s(530)][s(606)](i[s(530)]),t[s(532)]=i.radius0,t[s(554)]=i[s(554)],t[s(551)]=i.birthTime,t[s(516)]=i[s(516)],t[s(613)]=i[s(613)],t[s(543)]=i[s(543)],t[s(512)]=i[s(512)],t.propagationTimeFactor=i.propagationTimeFactor,t[s(498)]=i[s(498)],t.maxIterations=this[s(557)],t.seed=void 0!==i[s(643)]?i.noiseSeed:0,t.recursion=0}[R(567)](t,i){const s=R;this.time=t,this[s(599)]=i,this[s(636)]=0,this[s(595)](this[s(491)](),this[s(531)]);for(let e=0;e<this[s(636)];e++){const i=this[s(572)][e];this[s(504)]=i,this[s(556)][s(594)](i[s(571)]),i[s(524)]=o.lerp(i[s(551)],i[s(516)],i[s(534)]),i.beginVanishingTime=o[s(627)](i[s(516)],i[s(551)],1-i[s(498)]);const n=this[s(556)].random;i.linPos0[s(513)](n(),n(),n())[s(529)](1e3),i[s(611)][s(513)](n(),n(),n()).multiplyScalar(1e3),this[s(542)]=(t-i[s(551)])/(i[s(516)]-i.birthTime),this[s(562)]=0,this[s(589)]=!0;const r=this[s(634)]();r[s(623)]=0,r[s(647)][s(606)](i[s(647)]),r[s(493)][s(606)](i[s(493)]),r[s(642)][s(606)](i[s(642)]),r[s(611)][s(606)](i.linPos1),r.up0[s(606)](i.up0),r[s(530)][s(606)](i[s(530)]),r[s(532)]=i[s(532)],r[s(554)]=i[s(554)],r[s(603)]=0,r[s(608)]=1,r.positionVariationFactor=1-i[s(512)],this[s(649)]=this[s(523)]*Math[s(519)](this[s(499)],i[s(618)])/(1<<i[s(557)]),this[s(593)](r)}this[s(599)]=null,this[s(504)]=null}[R(593)](t){const i=R;if(t.iteration>=this[i(504)][i(557)])return void this[i(599)](t);this.forwards[i(629)](t[i(493)],t[i(647)]);let s=this.forwards.length();s<1e-6&&(this[i(508)][i(513)](0,0,.01),s=this[i(508)][i(652)]());const e=.5*(t[i(532)]+t.radius1),n=.5*(t.fraction0+t[i(608)]),r=this[i(518)]*this[i(504)][i(613)]*Math[i(519)](2,t[i(623)]);this[i(580)][i(631)](t.pos0,t[i(493)],.5),this[i(515)][i(631)](t[i(642)],t[i(611)],.5);const o=this[i(515)];this.newPos[i(513)](this[i(540)](o.x,o.y,o.z,r),this.simplexY(o.x,o.y,o.z,r),this[i(560)](o.x,o.y,o.z,r)),this[i(489)][i(529)](t[i(565)]*s),this[i(489)][i(638)](this[i(580)]);const a=this[i(634)]();a[i(647)].copy(t[i(647)]),a[i(493)][i(606)](this[i(489)]),a.linPos0[i(606)](t[i(642)]),a[i(611)][i(606)](this[i(515)]),a[i(597)].copy(t[i(597)]),a.up1[i(606)](t[i(530)]),a.radius0=t[i(532)],a.radius1=e,a[i(603)]=t[i(603)],a.fraction1=n,a.positionVariationFactor=t[i(565)]*this.currentSubray[i(543)],a[i(623)]=t[i(623)]+1;const h=this.getNewSegment();h.pos0[i(606)](this[i(489)]),h.pos1[i(606)](t[i(493)]),h[i(642)][i(606)](this[i(515)]),h[i(611)][i(606)](t.linPos1),this[i(547)][i(544)](t[i(597)],this.forwards[i(582)]()),h[i(597)].crossVectors(this.forwards,this[i(547)])[i(582)](),h[i(530)][i(606)](t[i(530)]),h[i(532)]=e,h[i(554)]=t[i(554)],h.fraction0=n,h.fraction1=t.fraction1,h[i(565)]=t[i(565)]*this.currentSubray[i(543)],h.iteration=t[i(623)]+1,this.fractalRayRecursive(a),this.fractalRayRecursive(h)}createPrism(t){const i=R;this.forwardsFill[i(629)](t.pos1,t[i(647)])[i(582)](),this.isInitialSegment&&(this[i(646)](t[i(647)],t.up0,this.forwardsFill,t[i(532)],0),this[i(589)]=!1),this[i(646)](t[i(493)],t.up0,this[i(497)],t[i(554)],t[i(608)]),this[i(598)]()}createTriangleVerticesWithoutUVs(t,i,s,e){const n=R;this.side[n(544)](i,s)[n(529)](e*V[n(514)]),this[n(527)][n(606)](i).multiplyScalar(-e*V.SIN30DEG);const r=this[n(503)],o=this[n(621)];r[n(606)](t)[n(620)](this.side)[n(638)](this.down),o[this[n(552)]++]=r.x,o[this.currentCoordinate++]=r.y,o[this[n(552)]++]=r.z,r[n(606)](t)[n(638)](this[n(616)])[n(638)](this[n(527)]),o[this[n(552)]++]=r.x,o[this[n(552)]++]=r.y,o[this[n(552)]++]=r.z,r.copy(i)[n(529)](e)[n(638)](t),o[this[n(552)]++]=r.x,o[this[n(552)]++]=r.y,o[this[n(552)]++]=r.z,this[n(537)]+=3}[R(641)](t,i,s,e,n){const r=R;this[r(616)][r(544)](i,s)[r(529)](e*V[r(514)]),this[r(527)][r(606)](i)[r(529)](-e*V.SIN30DEG);const o=this[r(503)],a=this[r(621)],h=this[r(628)];o[r(606)](t)[r(620)](this[r(616)])[r(638)](this[r(527)]),a[this[r(552)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(552)]++]=o.z,h[this.currentUVCoordinate++]=n,h[this[r(633)]++]=0,o[r(606)](t).add(this[r(616)])[r(638)](this[r(527)]),a[this.currentCoordinate++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(552)]++]=o.z,h[this[r(633)]++]=n,h[this[r(633)]++]=.5,o[r(606)](i).multiplyScalar(e).add(t),a[this[r(552)]++]=o.x,a[this[r(552)]++]=o.y,a[this.currentCoordinate++]=o.z,h[this[r(633)]++]=n,h[this.currentUVCoordinate++]=1,this[r(537)]+=3}[R(598)](t){const i=R,s=this[i(578)];t=this[i(537)]-6,s[this.currentIndex++]=t+1,s[this[i(596)]++]=t+2,s[this[i(596)]++]=t+5,s[this[i(596)]++]=t+1,s[this[i(596)]++]=t+5,s[this.currentIndex++]=t+4,s[this[i(596)]++]=t+0,s[this[i(596)]++]=t+1,s[this[i(596)]++]=t+4,s[this[i(596)]++]=t+0,s[this[i(596)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(596)]++]=t+2,s[this.currentIndex++]=t+0,s[this[i(596)]++]=t+3,s[this[i(596)]++]=t+2,s[this.currentIndex++]=t+3,s[this[i(596)]++]=t+5}[R(626)](){const t=R,i=this[t(556)][t(549)];this[t(575)]=function(s,e){const n=t,r=e[n(504)],a=e[n(531)][n(632)],h=e[n(531)][n(496)],u=e.rayParameters[n(511)]&&0==r.recursion?-i()*a:o[n(627)](r[n(551)],r[n(524)],s.fraction0)-i()*a,c=e[n(518)]-u,l=Math[n(624)](c/a),p=i()*(l+1);let d=0;if(c%a<=h*a&&(d=e[n(649)]),r[n(618)]<e[n(521)]&&e.numSubrays<e[n(625)]&&i()<d){const t=e[n(491)](),o=e.randomGenerator.getSeed();t[n(571)]=p,e[n(556)][n(594)](p),t[n(618)]=r[n(618)]+1,t[n(557)]=Math[n(609)](1,r.maxIterations-1),t[n(642)].set(i(),i(),i())[n(529)](1e3),t[n(611)][n(513)](i(),i(),i())[n(529)](1e3),t[n(597)].copy(r[n(597)]),t[n(530)][n(606)](r.up1),t[n(532)]=s[n(532)]*e.rayParameters.radius0Factor,t[n(554)]=Math[n(651)](e.rayParameters[n(546)],s[n(554)]*e[n(531)][n(585)]),t[n(551)]=u+l*a,t[n(516)]=t.birthTime+a*h,!e[n(531)][n(511)]&&0==r[n(618)]&&(t[n(551)]=Math[n(609)](t[n(551)],r[n(551)]),t[n(516)]=Math[n(651)](t[n(516)],r[n(516)])),t.timeScale=2*r[n(613)],t[n(543)]=r.roughness,t[n(512)]=r[n(512)],t[n(534)]=r[n(534)],t[n(498)]=r[n(498)],e[n(569)](s,r,t,e),e.randomGenerator[n(594)](o)}};const e=new s,n=new s,r=new s,a=new s;this[t(569)]=function(i,s,e,n){n[t(586)](i,s,e,.5,.6,.2)},this[t(619)]=function(s,o,h,u,c,l){const p=t;h[p(647)][p(606)](s[p(647)]),e[p(629)](o[p(493)],o[p(647)]),n.copy(e)[p(582)](),e[p(529)](s.fraction0+(1-s[p(603)])*(i()*u));const d=e[p(652)]();r.crossVectors(o[p(597)],n);const m=2*Math.PI*i();r.multiplyScalar(Math[p(507)](m)),a[p(606)](o.up0)[p(529)](Math[p(602)](m)),h[p(493)][p(606)](r)[p(638)](a)[p(529)](d*c*(l+i()*(1-l))).add(e)[p(638)](o[p(647)])},this.subrayCylinderPosition=function(s,o,h,u,c,l){const p=t;h[p(647)].copy(s[p(647)]),e[p(629)](o[p(493)],o[p(647)]),n[p(606)](e).normalize(),e[p(529)](s[p(603)]+(1-s[p(603)])*((2*i()-1)*u));const d=e[p(652)]();r[p(544)](o[p(597)],n);const m=2*Math.PI*i();r[p(529)](Math[p(507)](m)),a[p(606)](o[p(597)])[p(529)](Math.sin(m)),h.pos1[p(606)](r)[p(638)](a).multiplyScalar(d*c*(l+i()*(1-l))).add(e)[p(638)](o[p(647)])}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}[R(634)](){const t=R;return this[t(622)][this[t(562)]++]}[R(606)](t){const i=R;return super[i(606)](t),this[i(492)](V[i(604)]({},t[i(531)])),this}[R(587)](){const t=R;return new(this[t(525)])(V[t(604)]({},this[t(531)]))}}function j(t){function i(t){const s=M;if("string"==typeof t)return function(t){}[s(525)]("while (true) {}")[s(494)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(525)](s(568)+s(500)).call("action"):function(){return!1}[s(525)](s(568)+s(500))[s(494)](s(548)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function D(){const t=["prototype","onRayPosition","string","toString","lightningMaxPeriod","__proto__","1404456YWCiMm","push","init","nextLightningTime","deadLightningsMeshes","197984GuOzMx","lightningParameters","RAY_EXTINGUISHED","lightningMinDuration","warn","add","constructor","geometry","5673913gmMOep","length","lightningMinPeriod","random","chain","state","input","maxSlope","isLightningStorm","372303mCXlnH","232hUHVpe","action","size","set","lightningsMeshes","stateObject","1932502weroAV","update","function *\\( *\\)","clone","console","error","log","stormParams","remove","lerp","multiplyScalar","getNextLightningTime","return (function() ","35VmMteO","bind","test","lightningMaterial","lightningMaxDuration","minHeight","while (true) {}","2298753ULEdgC","deathTime","destOffset","trace","gger","apply","copy","table","inited","exception","maxHeight","510699XTmPvB","splice","debu","copyParameters","maxLightnings","noiseSeed","RAY_PROPAGATING",'{}.constructor("return this")( )',"onLightningDown","info","indexOf"];return(D=function(){return t})()}V.RAY_INITIALIZED=0,V[R(615)]=1,V.RAY_PROPAGATING=2,V.RAY_STEADY=3,V[R(558)]=4,V.RAY_EXTINGUISHED=5,V.COS30DEG=Math[R(507)](30*Math.PI/180),V[R(509)]=Math[R(602)](30*Math.PI/180);const F=E;!function(t,i){const s=E,e=D();for(;;)try{if(519235===parseInt(s(183))/1+parseInt(s(152))/2+-parseInt(s(172))/3+parseInt(s(205))/4*(-parseInt(s(165))/5)+-parseInt(s(200))/6+-parseInt(s(213))/7+parseInt(s(146))/8*(parseInt(s(145))/9))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const H=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[E(177)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function E(t,i){const s=D();return(E=function(t,i){return s[t-=137]})(t,i)}!function(){H(this,(function(){const t=E,i=new RegExp(t(154)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=L(t(202));i[t(167)](e+t(140))&&s[t(167)](e+t(142))?L():e("0")}))()}();const G=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[E(177)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();G(void 0,(function(){const t=E,i=function(){const t=E;let i;try{i=Function(t(164)+t(190)+");")()}catch(s){i=window}return i}(),s=i[t(156)]=i[t(156)]||{},e=[t(158),t(209),t(192),t(157),t(181),t(179),t(175)];for(let n=0;n<e[t(137)];n++){const i=G[t(211)][t(194)][t(166)](G),r=e[n],o=s[r]||i;i[t(199)]=G[t(166)](G),i.toString=o[t(197)][t(166)](o),s[r]=i}}))();class z extends a{constructor(t={}){const i=E;super(),this[i(144)]=!0,this[i(159)]=t,t.size=void 0!==t.size?t[i(148)]:1e3,t[i(170)]=void 0!==t[i(170)]?t[i(170)]:80,t[i(182)]=void 0!==t[i(182)]?t[i(182)]:100,t[i(143)]=void 0!==t[i(143)]?t.maxSlope:1.1,t[i(187)]=void 0!==t[i(187)]?t.maxLightnings:3,t[i(138)]=void 0!==t[i(138)]?t[i(138)]:3,t[i(198)]=void 0!==t[i(198)]?t[i(198)]:7,t[i(208)]=void 0!==t[i(208)]?t[i(208)]:1,t[i(169)]=void 0!==t[i(169)]?t.lightningMaxDuration:2.5,this.lightningParameters=V[i(186)](t[i(206)],t[i(206)]),this[i(206)].isEternal=!1,this[i(168)]=void 0!==t.lightningMaterial?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(195)]?this[i(195)]=t[i(195)]:this[i(195)]=function(s,e){const n=i;e[n(149)]((Math[n(139)]()-.5)*t[n(148)],0,(Math[n(139)]()-.5)*t[n(148)]);const r=o.lerp(t.minHeight,t.maxHeight,Math[n(139)]());s[n(149)](t[n(143)]*(2*Math[n(139)]()-1),1,t.maxSlope*(2*Math[n(139)]()-1))[n(162)](r)[n(210)](e)},this[i(191)]=t[i(191)],this[i(180)]=!1,this[i(203)]=0,this.lightningsMeshes=[],this[i(204)]=[];for(let s=0;s<this[i(159)][i(187)];s++){const t=new V(V[i(186)]({},this.lightningParameters)),s=new u(t,this[i(168)]);this[i(204)].push(s)}}[F(153)](t){const i=F;if(!this.inited&&(this[i(203)]=this.getNextLightningTime(t)*Math[i(139)](),this[i(180)]=!0),t>=this.nextLightningTime){const s=this.deadLightningsMeshes.pop();if(s){const e=V[i(186)](s[i(212)].rayParameters,this[i(206)]);e.birthTime=t,e[i(173)]=t+o[i(161)](this[i(159)].lightningMinDuration,this.stormParams[i(169)],Math[i(139)]()),this[i(195)](e.sourceOffset,e[i(174)]),e[i(188)]=Math[i(139)](),this[i(210)](s),this[i(150)][i(201)](s)}this[i(203)]=this[i(163)](t)}let s=0,e=this[i(150)][i(137)];for(;s<e;){const n=this[i(150)][s],r=n[i(212)],o=r[i(141)];r[i(153)](t),o===V[i(189)]&&r.state>o&&this[i(191)]&&this[i(191)](r),r[i(141)]===V[i(207)]?(this[i(150)][i(184)](this[i(150)][i(193)](n),1),this.deadLightningsMeshes.push(n),this[i(160)](n),e--):s++}}getNextLightningTime(t){const i=F;return t+o[i(161)](this.stormParams[i(138)],this.stormParams[i(198)],Math[i(139)]())/(this.stormParams[i(187)]+1)}copy(t,i){const s=F;return super[s(178)](t,i),this[s(159)][s(148)]=t[s(159)][s(148)],this[s(159)].minHeight=t[s(159)][s(170)],this.stormParams[s(182)]=t[s(159)].maxHeight,this[s(159)][s(143)]=t[s(159)][s(143)],this.stormParams[s(187)]=t[s(159)].maxLightnings,this[s(159)][s(138)]=t[s(159)][s(138)],this[s(159)][s(198)]=t[s(159)].lightningMaxPeriod,this.stormParams.lightningMinDuration=t.stormParams[s(208)],this[s(159)][s(169)]=t[s(159)][s(169)],this[s(206)]=V[s(186)]({},t.lightningParameters),this[s(168)]=t[s(159)][s(168)],this[s(191)]=t[s(191)],this}[F(155)](){const t=F;return new(this[t(211)])(this[t(159)])[t(178)](this)}}function L(t){function i(t){const s=E;if(typeof t===s(196))return function(t){}.constructor(s(171))[s(177)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(211)](s(185)+s(176)).call(s(147)):function(){return!1}.constructor("debugger")[s(177)](s(151)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const N=Z;function O(){const t=["add","object","22236xCrJJv","primitive","gger","warn","sourceOffset","function *\\( *\\)","radius0","36pocikL","radius1","1RQswDt","__proto__","sub","maxHeight","Color","console","55DYscVC","Vector3","MeshBasicMaterial","80678ItmbVb","size",'{}.constructor("return this")( )',"subrayDutyCycle","color","set","subVectors","error","addVectors","info","exception","1494yxflqT","317210xaZnKS","roughness","debu","lightStorm","maxLightnings","input","dot","pos1","log","multiplyScalar","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","string","straightness","toString","constructor","timeScale","length","minHeight","prototype","table","336zgElch","bind","17972MNmLNa","copy","chain","apply","rayParameters","stateObject","1291994OMZsPY","stormParams","subrayPeriod","#b0ffff","update","850648YWNMge"];return(O=function(){return t})()}!function(t,i){const s=Z,e=O();for(;;)try{if(127727===parseInt(s(458))/1*(-parseInt(s(467))/2)+-parseInt(s(449))/3+parseInt(s(435))/4*(parseInt(s(464))/5)+parseInt(s(478))/6*(-parseInt(s(433))/7)+-parseInt(s(446))/8+-parseInt(s(456))/9*(-parseInt(s(479))/10)+parseInt(s(441))/11)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const U=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[Z(438)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){U(this,(function(){const t=Z,i=new RegExp(t(454)),s=new RegExp(t(490),"i"),e=$("init");i.test(e+t(437))&&s.test(e+t(484))?$():e("0")}))()}();const Y=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[Z(438)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function Z(t,i){const s=O();return(Z=function(t,i){return s[t-=427]})(t,i)}Y(void 0,(function(){const t=Z,i=function(){const t=Z;let i;try{i=Function(t(489)+t(469)+");")()}catch(s){i=window}return i}(),s=i[t(463)]=i[t(463)]||{},e=[t(487),t(452),t(476),t(474),t(477),t(432),"trace"];for(let n=0;n<e.length;n++){const i=Y[t(427)][t(431)][t(434)](Y),r=e[n],o=s[r]||i;i[t(459)]=Y[t(434)](Y),i.toString=o[t(493)][t(434)](o),s[r]=i}}))();const k=[N(448)],W=f({__name:N(482),props:{color:{default:N(444)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=N,s=t,e=new(c[i(462)])(s[i(471)]),n=new(c[i(466)])({color:e}),r=new(c[i(465)])(0,-1,0);let o=0;const a=new(c[i(465)]),h=new(c[i(465)]),u={roughness:s[i(480)],straightness:s[i(492)],radius0:s[i(455)],radius1:s[i(457)],timeScale:s.timeScale,subrayPeriod:s[i(443)],subrayDutyCycle:s[i(470)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,e,n){const u=i;n.subrayConePosition(t,s,e,.6,.6,.5),o=n[u(439)][u(453)].y,a[u(473)](e[u(486)],n[u(439)][u(453)]);const c=r[u(485)](a);h[u(436)](r).multiplyScalar(c),a[u(460)](h);const l=c/o>.5?o/c:1;h[u(488)](l),a[u(447)](h),e[u(486)][u(475)](a,n.rayParameters.sourceOffset)}},p=new z({size:s[i(468)],minHeight:s.minHeight,maxHeight:s.maxHeight,maxSlope:.6,maxLightnings:s[i(483)],lightningParameters:u,lightningMaterial:n});g((()=>{const t=i,e=p[t(442)];e[t(468)]=s.size,e.minHeight=s[t(430)],e[t(461)]=s[t(461)],n[t(471)][t(472)](s.color),u[t(480)]=s[t(480)],u[t(492)]=s[t(492)],u[t(455)]=s[t(455)],u.radius1=s.radius1,u[t(428)]=s.timeScale}));const{onLoop:d}=l();return d((({elapsed:t})=>{p[i(445)](t)})),(t,s)=>{const e=i;return y(),b(e(450),{object:v(p),renderOrder:9999},null,8,k)}}});function $(t){function i(t){const s=Z;if(typeof t===s(491))return function(t){}[s(427)]("while (true) {}").apply("counter");1!==(""+t/t)[s(429)]||t%20==0?function(){return!0}[s(427)](s(481)+s(451)).call("action"):function(){return!1}[s(427)]("debu"+s(451)).apply(s(440)),i(++t)}try{if(t)return i;i(0)}catch(s){}}function X(){const t=["4659990eSvaAs","input","apply","时间缩放","warn","timeScale","粗糙度","call","2AAtWWB","端部半径","直度度","2245587vrwstb","roughness","stateObject","action","test","exception","string","35HpkAGj","prototype","error","269844jfqqZP","value","未部半径","#ffbde7","90DFNriO","debu","trace","constructor","color","#6f6f6f","toString","return (function() ","chain","bind","console","while (true) {}","minHeight","length","65096nialGM","85eZQRRf","lightningStorm","123348MuCEfL","7601814hNAtos","gger","__proto__","682950ZgWJVY","maxHeight","radius1","function *\\( *\\)","table"];return(X=function(){return t})()}const B=J;!function(t,i){const s=J,e=X();for(;;)try{if(375935===parseInt(s(317))/1+parseInt(s(279))/2*(parseInt(s(282))/3)+parseInt(s(313))/4*(-parseInt(s(311))/5)+parseInt(s(292))/6*(-parseInt(s(289))/7)+parseInt(s(310))/8*(-parseInt(s(296))/9)+parseInt(s(322))/10+-parseInt(s(314))/11)break;e.push(e.shift())}catch(n){e.push(e.shift())}}();const Q=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[J(324)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();!function(){Q(this,(function(){const t=J,i=new RegExp(t(320)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=tt("init");i[t(286)](e+t(304))&&s.test(e+t(323))?tt():e("0")}))()}();const q=function(){let t=!0;return function(i,s){const e=t?function(){if(s){const t=s[J(324)](i,arguments);return s=null,t}}:function(){};return t=!1,e}}();function J(t,i){const s=X();return(J=function(t,i){return s[t-=279]})(t,i)}q(void 0,(function(){const t=J;let i;try{i=Function(t(303)+'{}.constructor("return this")( ));')()}catch(n){i=window}const s=i[t(306)]=i[t(306)]||{},e=["log",t(326),"info",t(291),t(287),t(321),t(298)];for(let r=0;r<e[t(309)];r++){const i=q[t(299)][t(290)][t(305)](q),n=e[r],o=s[n]||i;i[t(316)]=q[t(305)](q),i[t(302)]=o[t(302)][t(305)](o),s[n]=i}}))();const K=f({__name:B(312),setup(i){const s=B,e=S({cellSize:60,cellThickness:1,cellColor:s(301),sectionColor:"#92399e",sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:n,maxHeight:r,color:o,roughness:a,straightness:h,radius0:u,radius1:c,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(295),roughness:{label:s(328),value:.85,min:0,max:1,step:.01},straightness:{label:s(281),value:.65,min:0,max:1,step:.01},radius0:{label:s(280),value:1,min:.1,max:10,step:.01},radius1:{label:s(294),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(325),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(W,{minHeight:v(n).value,maxHeight:v(r).value,color:v(o).value,roughness:v(a)[m(293)],straightness:v(h)[m(293)],radius0:v(u).value,radius1:v(c).value,timeScale:v(l)[m(293)]},null,8,[m(308),m(318),m(300),m(283),"straightness","radius0",m(319),m(327)]),x(v(P),_({args:[100,100]},e,{position:[0,-50,0]}),null,16)])),_:1}),x(v(d))],64)}}});function tt(t){function i(t){const s=J;if(typeof t===s(288))return function(t){}[s(299)](s(307))[s(324)]("counter");1!==(""+t/t)[s(309)]||t%20==0?function(){return!0}[s(299)](s(297)+"gger")[s(329)](s(285)):function(){return!1}[s(299)]("debu"+s(315))[s(324)](s(284)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{K as default};

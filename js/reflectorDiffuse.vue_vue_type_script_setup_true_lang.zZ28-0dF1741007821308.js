import{c8 as t,a3 as n,C as e,V as r}from"./three.sBrYSCgq1741007821308.js";import{a as o}from"./@tresjs.u6hJLBm41741007821308.js";import{R as c}from"./all.three.VR_q9_2T1741007821308.js";import{d as i,b as a,a3 as s,a2 as u,o as l,H as f,N as p,m,u as v}from"./@vue.NRI7TcgI1741007821308.js";function d(){const t=["gger","fragmentShader","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","info","counter","16896ZslxuI","debu","error","function *\\( *\\)","6186470ZQytej","table","console","__proto__","196Zeqiqm","replace",'{}.constructor("return this")( )',"string","toString","length","385301vqHbVr","return (function() ","constructor","warn","call","log","apply","action","\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t","exception","while (true) {}","#include <project_vertex>","init","vertexShader","bind","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","7841183yDSCaN","void main() {","222414WUKtfR","28092144KWdyUX","input","949816vXyAvT","\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"];return(d=function(){return t})()}!function(t,n){const e=x,r=d();for(;;)try{if(751411===parseInt(e(168))/1+-parseInt(e(147))/2+-parseInt(e(154))/3*(parseInt(e(162))/4)+-parseInt(e(158))/5+-parseInt(e(144))/6+-parseInt(e(185))/7+parseInt(e(145))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const g=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(174)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){g(this,(function(){const t=x,n=new RegExp(t(157)),e=new RegExp(t(184),"i"),r=y(t(180));n[t(183)](r+"chain")&&e[t(183)](r+t(146))?y():r("0")}))()}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[x(174)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function x(t,n){const e=d();return(x=function(t,n){return e[t-=143]})(t,n)}h(void 0,(function(){const t=x,n=function(){const t=x;let n;try{n=Function(t(169)+t(164)+");")()}catch(e){n=window}return n}(),e=n[t(160)]=n[t(160)]||{},r=[t(173),t(171),t(152),t(156),t(177),t(159),"trace"];for(let o=0;o<r.length;o++){const n=h[t(170)].prototype[t(182)](h),c=r[o],i=e[c]||n;n[t(161)]=h[t(182)](h),n[t(166)]=i.toString[t(182)](i),e[c]=n}}))();function y(t){function n(t){const e=x;if(typeof t===e(165))return function(t){}[e(170)](e(178))[e(174)](e(153));1!==(""+t/t)[e(167)]||t%20==0?function(){return!0}[e(170)](e(155)+e(149))[e(172)](e(175)):function(){return!1}[e(170)](e(155)+e(149))[e(174)]("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}const w=C;!function(t,n){const e=C,r=S();for(;;)try{if(497004===parseInt(e(327))/1+-parseInt(e(299))/2*(parseInt(e(346))/3)+-parseInt(e(302))/4+-parseInt(e(360))/5+-parseInt(e(344))/6*(-parseInt(e(303))/7)+parseInt(e(309))/8+-parseInt(e(331))/9*(parseInt(e(322))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const _=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(307)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){_(this,(function(){const t=C,n=new RegExp(t(348)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=T(t(300));n[t(351)](r+"chain")&&e.test(r+t(330))?T():r("0")}))()}();const b=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[C(307)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function C(t,n){const e=S();return(C=function(t,n){return e[t-=299]})(t,n)}b(void 0,(function(){const t=C;let n;try{n=Function(t(349)+'{}.constructor("return this")( ));')()}catch(o){n=window}const e=n.console=n[t(310)]||{},r=[t(315),t(326),"info","error","exception",t(313),t(338)];for(let c=0;c<r.length;c++){const n=b.constructor[t(336)][t(321)](b),o=r[c],i=e[o]||n;n.__proto__=b[t(321)](b),n[t(320)]=i[t(320)][t(321)](i),e[o]=n}}))();const I=[w(325)],M=[w(339),"visible"];function S(){const t=["log","stateObject","tpgRef","renderTargetUniform","#ffffff","toString","bind","10swXNZe","aoMap","counter","rotation-x","warn","922022xXmvUF","assign","reflectorDiffuse","input","621009TNTpZe","TresPlaneGeometry","TresMeshStandardMaterial","mirror","TresMesh","prototype","repeat","trace","object","primitive","gger","call","reflectMap","2658wTukKF","color","1469169tADXsU","action","function *\\( *\\)","return (function() ","channel","test","#444","while (true) {}","constructor","tmRef","mixStrength","tmsmRef","set","wrapT","2237995yvminr","string","uv1","onBeforeRender","2mwkogn","init","onBeforeCompile","1338232tiVzvK","2863GQwikF","attributes","value","debu","apply","uniforms","5877408trsKPK","console","add","TresGroup","table","showGridHelper"];return(S=function(){return t})()}const j=i({__name:w(329),props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:w(319)}},async setup(i){const d=w;let g,h;const y=i,_=new t(9.5,10),b=a(),C=a(),S=a(),j=new c,T={mirror:{value:y[d(334)]},mixStrength:{value:y[d(356)]}},z=([g,h]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),g=await g,h(),g);for(var E=0;E<3;E++)z[E].wrapS=n,z[E][d(359)]=n,z[E][d(337)][d(358)](16,16);const R={color:new e(d(352)),metalness:1,roughness:1,map:z[0],metalnessMap:z[2],roughnessMap:z[2],aoMap:z[2],aoMapIntensity:1,normalMap:z[1],normalScale:new r(3,3)},U=t=>{const n=d;t[n(308)][n(343)]=j[n(318)],t[n(308)].textureMatrix=j.textureMatrixUniform,t[n(308)]=Object[n(328)](t[n(308)],T),(t=>{const n=x;t[n(181)]=t[n(181)][n(163)](n(143),n(148)),t[n(181)]=t.vertexShader[n(163)](n(179),n(151))})(t),(t=>{const n=x;t.fragmentShader=t[n(150)].replace("void main() {","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(150)]=t[n(150)][n(163)]("#include <emissivemap_fragment>",n(176))})(t)};return u((()=>{const t=d;b[t(305)]&&(b.value.attributes[t(362)]=b[t(305)][t(304)].uv),S[t(305)]&&(S[t(305)][t(323)][t(350)]=1,S.value[t(301)]=U),C.value&&(C[t(305)][t(311)](j),C[t(305)][t(363)]=(t,n,e)=>{j.update(t,n,e)}),y.color&&S[t(305)]&&(S[t(305)][t(345)]=new e(y.color))})),(t,n)=>{const e=d;return l(),f(e(312),null,[p(e(335),{ref_key:e(355),ref:C,"rotation-x":-Math.PI/2,"position-y":-.1},[p(e(332),{ref_key:e(317),ref:b,args:[10,10]},null,512),p(e(333),m({ref_key:e(357),ref:S},R),null,16)],8,I),p(e(340),{object:v(_),visible:t[e(314)]},null,8,M)])}}});function T(t){function n(t){const e=C;if(typeof t===e(361))return function(t){}[e(354)](e(353))[e(307)](e(324));1!==(""+t/t).length||t%20==0?function(){return!0}[e(354)](e(306)+"gger")[e(342)](e(347)):function(){return!1}[e(354)](e(306)+e(341))[e(307)](e(316)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

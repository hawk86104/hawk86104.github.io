import{b as t}from"./pagesShow.vue_vue_type_script_setup_true_lang.13664uOD1723718122052.js";import{B as i,V as s,cj as n,aB as e,N as r,h as o,ae as a,Y as h,q as c,a6 as u}from"./three.eXhPIzTa1723718122052.js";import{$ as l,D as p,i as d}from"./@tresjs.GO-cpSrO1723718122052.js";import{c as m}from"./simplex-noise.MycypUyu1723718122052.js";import{d as f,a1 as g,o as y,D as b,u as S,r as v,j as x,g as w,m as _,F as I}from"./@vue.Q1VpS3901723718122052.js";import"./index.NtyWyFub1723718122052.js";import{_ as P}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.HlfN1PdL1723718122052.js";import"./three-custom-shader-material.cBCxSCct1723718122052.js";import"./object-hash.-AaPYX971723718122052.js";import"./@amap.r0EhX7fK1723718122052.js";import"./jszip.t8h7C5WV1723718122052.js";import"./glsl-tokenizer.1di3f6lO1723718122052.js";import"./glsl-token-string.UXOMf2GN1723718122052.js";import"./glsl-token-functions.-uFsyLaA1723718122052.js";import"./tweakpane.yHWGBmom1723718122052.js";import"./@vueuse.z522fCYR1723718122052.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.ckWts3td1723718122052.js";import"./all.three.XpMBXZqC1723718122052.js";import"./oimophysics.x0jH7fze1723718122052.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.RQfOcHLG1723718122052.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.wera17_o1723718122052.js";import"./index.Zx65DVuD1723718122052.js";import"./three-stdlib.3hvj_pKp1723718122052.js";import"./@pmndrs.s9IQpSZs1723718122052.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.seGBa21R1723718122052.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.-LEtI2xt1723718122052.js";const M=D;!function(t,i){const s=D,n=j();for(;;)try{if(527955===parseInt(s(395))/1+-parseInt(s(534))/2*(-parseInt(s(461))/3)+-parseInt(s(519))/4*(-parseInt(s(543))/5)+parseInt(s(488))/6+parseInt(s(399))/7*(parseInt(s(424))/8)+parseInt(s(419))/9+-parseInt(s(407))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const T=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(402)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){T(this,(function(){const t=D,i=new RegExp(t(532)),s=new RegExp(t(465),"i"),n=V(t(493));i[t(529)](n+t(557))&&s[t(529)](n+t(521))?V():n("0")}))()}();const C=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[D(402)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function j(){const t=["roughness","31532900WolVee","minRadius","sin","call","subrayCylinderPosition","up0","crossVectors","subrayConePosition","LightningStrike","positionVariationFactor","createPrism","isInitialSegment","1782693XOvQXP","isEternal","subrayPeriod","fraction0","normalize","194384VwmNaN","addNewSubray","numSubrays","newPos","currentSeed","max","uvs","__proto__","indices","RAY_UNBORN","maxSubrays","exception","lerpVectors","array","raySegments","endPropagationTime","linPos1","positionAttribute","gger","radius0","currentVertex","needsUpdate","deathTime","min","RAY_PROPAGATING","currentIndex","simplexZ","up1","fraction1","setAttribute","maxSubrayRecursion","middlePos","onSubrayCreation","forwards","timeScale","down","fractalRayRecursive","2164857aSHYcL","side","info","time","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","currentCoordinate","birthTime","counter","forwardsFill","fractalRay","noiseSeed","sourceOffset","copy","type","debu","subrayDutyCycle","vanishingTimeFactor","bind","destOffset","position","uvsAttribute","length","currentSegmentIndex","recursion","RAY_INITIALIZED","pos0","warn","5487594kzvWfg","prototype","timeFraction","return (function() ","random","init","cross1","generateUVs","updateMesh","setSeed","seedGenerator","createPrismFaces","RAY_EXTINGUISHED","createSegment","vertices","createMesh","multiplyScalar","currentSegmentCallback","ramification","state","recursionProbability","floor","toString","currentUVCoordinate","ceil","table","currentCreateTriangleVertices","constructor","set","radius1","radius1Factor","11156CtFhYC","radius0Factor","input","stateObject","RAY_STEADY","maxRaySegments","lerp","createTriangleVerticesWithUVs","pow",'{}.constructor("return this")( )',"test","vPos","currentSubray","function *\\( *\\)","subrays","2FJegwD","subrayProbability","log","initSubray","straightness","middleLinPos","visible","pos1","linPos0","1055zWvekC","getNewSegment","update","createTriangleVerticesWithoutUVs","copyParameters","trace","console","cos","COS30DEG","seed","RAY_VANISHING","drawRange","setIndex","action","chain","beginVanishingTime","clone","rayParameters","isLightningStrike","propagationTimeFactor","add","randomGenerator","getSeed","iteration","usage","isStatic","simplexY","fillMesh","845405eNKXaR","onDecideSubrayCreation","createRandomGenerator","maxIterations","119CYJXPD","createDefaultSubrayCreationCallbacks","createSubray","apply","push","SIN30DEG","subVectors"];return(j=function(){return t})()}C(void 0,(function(){const t=D;let i;try{i=Function(t(491)+t(528)+");")()}catch(e){i=window}const s=i[t(549)]=i[t(549)]||{},n=[t(536),t(487),t(463),"error",t(435),t(513),t(548)];for(let r=0;r<n.length;r++){const i=C[t(515)][t(489)].bind(C),e=n[r],o=s[e]||i;i[t(431)]=C.bind(C),i[t(510)]=o[t(510)][t(478)](o),s[e]=i}}))();class R extends i{constructor(t={}){const i=D;super(),this[i(561)]=!0,this[i(474)]=i(415),this[i(493)](R.copyParameters(t,t)),this[i(503)]()}static[M(397)](){const t=M,i=2053,s=[];for(let e=0;e<i;e++)s[t(403)](Math[t(492)]());const n={currentSeed:0,random:function(){const e=s[n[t(428)]];return n.currentSeed=(n.currentSeed+1)%i,e},getSeed:function(){return n[t(428)]/i},setSeed:function(s){n[t(428)]=Math.floor(s*i)%i}};return n}static[M(547)](t={},i={}){const n=M,e=function(s){return i===t?s:s[D(559)]()};return t[n(472)]=void 0!==i[n(472)]?e(i.sourceOffset):new s(0,100,0),t.destOffset=void 0!==i[n(479)]?e(i[n(479)]):new s(0,0,0),t[n(458)]=void 0!==i[n(458)]?i.timeScale:1,t[n(406)]=void 0!==i[n(406)]?i[n(406)]:.9,t.straightness=void 0!==i[n(538)]?i.straightness:.7,t.up0=void 0!==i[n(412)]?e(i[n(412)]):new s(0,0,1),t[n(451)]=void 0!==i.up1?e(i[n(451)]):new s(0,0,1),t.radius0=void 0!==i[n(443)]?i.radius0:1,t[n(517)]=void 0!==i.radius1?i.radius1:1,t[n(520)]=void 0!==i[n(520)]?i[n(520)]:.5,t.radius1Factor=void 0!==i[n(518)]?i[n(518)]:.2,t.minRadius=void 0!==i[n(408)]?i[n(408)]:.2,t[n(420)]=void 0!==i[n(420)]?i[n(420)]:void 0===i[n(467)]||void 0===i[n(446)],t[n(467)]=i[n(467)],t[n(446)]=i[n(446)],t[n(562)]=void 0!==i[n(562)]?i.propagationTimeFactor:.1,t[n(477)]=void 0!==i[n(477)]?i[n(477)]:.9,t[n(421)]=void 0!==i[n(421)]?i[n(421)]:4,t.subrayDutyCycle=void 0!==i.subrayDutyCycle?i[n(476)]:.6,t[n(398)]=void 0!==i[n(398)]?i.maxIterations:9,t[n(568)]=void 0!==i[n(568)]&&i.isStatic,t[n(506)]=void 0!==i[n(506)]?i[n(506)]:5,t[n(454)]=void 0!==i[n(454)]?i.maxSubrayRecursion:3,t[n(508)]=void 0!==i[n(508)]?i.recursionProbability:.6,t[n(495)]=void 0!==i[n(495)]&&i.generateUVs,t[n(564)]=i[n(564)],t[n(471)]=i[n(471)],t[n(396)]=i[n(396)],t[n(456)]=i[n(456)],t}[M(545)](t){const i=M;this[i(568)]||(this.rayParameters[i(420)]||this[i(560)].birthTime<=t&&t<=this[i(560)].deathTime?(this[i(496)](t),t<this[i(533)][0][i(439)]?this[i(507)]=R[i(448)]:t>this[i(533)][0][i(558)]?this[i(507)]=R[i(553)]:this[i(507)]=R.RAY_STEADY,this[i(540)]=!0):(this.visible=!1,t<this[i(560)][i(467)]?this.state=R[i(433)]:this[i(507)]=R.RAY_EXTINGUISHED))}[M(493)](t){const i=M;this[i(560)]=t,this[i(398)]=void 0!==t[i(398)]?Math.floor(t[i(398)]):9,t[i(398)]=this[i(398)],this.isStatic=void 0!==t[i(568)]&&t[i(568)],t.isStatic=this[i(568)],this[i(506)]=void 0!==t[i(506)]?Math[i(509)](t.ramification):5,t[i(506)]=this[i(506)],this.maxSubrayRecursion=void 0!==t[i(454)]?Math[i(509)](t[i(454)]):3,t[i(454)]=this[i(454)],this.recursionProbability=void 0!==t[i(508)]?t[i(508)]:.6,t[i(508)]=this[i(508)],this[i(495)]=void 0!==t[i(495)]&&t[i(495)],t.generateUVs=this[i(495)],void 0!==t[i(564)]?(this[i(564)]=t[i(564)],this.seedGenerator=t.randomGenerator,void 0!==t[i(471)]&&this[i(498)][i(497)](t.noiseSeed)):(this.randomGenerator=R[i(397)](),this[i(498)]=Math),void 0!==t[i(396)]?this[i(396)]=t.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),void 0!==t[i(456)]&&(this[i(456)]=t[i(456)])),this.state=R.RAY_INITIALIZED,this[i(434)]=Math[i(512)](1+Math[i(527)](this[i(506)],Math.max(0,this[i(454)]-1))),t.maxSubrays=this[i(434)],this.maxRaySegments=2*(1<<this.maxIterations),this.subrays=[];for(let s=0;s<this[i(434)];s++)this.subrays.push(this[i(401)]());this.raySegments=[];for(let s=0;s<this[i(524)];s++)this[i(438)][i(403)](this[i(501)]());this[i(464)]=0,this.timeFraction=0,this[i(505)]=null,this[i(514)]=this.generateUVs?this[i(526)]:this[i(546)],this.numSubrays=0,this[i(531)]=null,this.currentSegmentIndex=0,this[i(418)]=!1,this[i(535)]=0,this[i(444)]=0,this[i(449)]=0,this[i(466)]=0,this.currentUVCoordinate=0,this[i(502)]=null,this.uvs=null,this.indices=null,this[i(441)]=null,this.uvsAttribute=null,this.simplexX=m(this.seedGenerator[i(492)]),this[i(393)]=m(this.seedGenerator.random),this[i(450)]=m(this[i(498)][i(492)]),this[i(457)]=new s,this.forwardsFill=new s,this[i(462)]=new s,this[i(459)]=new s,this[i(455)]=new s,this[i(539)]=new s,this.newPos=new s,this.vPos=new s,this[i(494)]=new s}[M(503)](){const t=M,i=1<<this[t(398)],s=3*(i+1)*this[t(434)],o=18*i*this[t(434)];this[t(502)]=new Float32Array(3*s),this[t(432)]=new Uint32Array(o),this[t(495)]&&(this.uvs=new Float32Array(2*s)),this[t(394)](0),this[t(555)](new n(this[t(432)],1)),this[t(441)]=new e(this.vertices,3),this[t(453)](t(480),this[t(441)]),this[t(495)]&&(this[t(481)]=new e(new Float32Array(this[t(430)]),2),this[t(453)]("uv",this[t(481)])),!this[t(568)]&&(this.index[t(567)]=r,this.positionAttribute[t(567)]=r,this[t(495)]&&(this[t(481)][t(567)]=r)),this[t(502)]=this[t(441)].array,this[t(432)]=this.index[t(437)],this[t(495)]&&(this.uvs=this[t(481)][t(437)])}updateMesh(t){const i=M;this.fillMesh(t),this[i(554)].count=this.currentIndex,this.index.needsUpdate=!0,this[i(441)][i(445)]=!0,this[i(495)]&&(this[i(481)][i(445)]=!0)}fillMesh(t){const i=M,s=this;this[i(444)]=0,this.currentIndex=0,this[i(466)]=0,this[i(511)]=0,this.fractalRay(t,(function(n){const e=i,r=s.currentSubray;t<r[e(467)]||(this.rayParameters[e(420)]&&0==s[e(531)][e(484)]?(s[e(417)](n),s[e(396)](n,s)):t<r[e(439)]?s[e(490)]>=n.fraction0*r.propagationTimeFactor&&(s[e(417)](n),s[e(396)](n,s)):t<r[e(558)]?(s[e(417)](n),s[e(396)](n,s)):(s.timeFraction<=r[e(477)]+n[e(452)]*(1-r[e(477)])&&s[e(417)](n),s.onDecideSubrayCreation(n,s)))}))}[M(425)](){const t=M;return this[t(533)][this[t(426)]++]}[M(537)](t,i){const s=M;t[s(486)].copy(i[s(472)]),t[s(541)].copy(i[s(479)]),t[s(412)][s(473)](i[s(412)]),t[s(451)][s(473)](i[s(451)]),t[s(443)]=i.radius0,t.radius1=i[s(517)],t[s(467)]=i[s(467)],t[s(446)]=i[s(446)],t[s(458)]=i[s(458)],t[s(406)]=i[s(406)],t[s(538)]=i[s(538)],t[s(562)]=i[s(562)],t.vanishingTimeFactor=i[s(477)],t[s(398)]=this[s(398)],t.seed=void 0!==i.noiseSeed?i[s(471)]:0,t[s(484)]=0}[M(470)](t,i){const s=M;this[s(464)]=t,this[s(505)]=i,this.numSubrays=0,this[s(537)](this[s(425)](),this[s(560)]);for(let n=0;n<this.numSubrays;n++){const i=this.subrays[n];this[s(531)]=i,this.randomGenerator[s(497)](i[s(552)]),i[s(439)]=o[s(525)](i[s(467)],i.deathTime,i[s(562)]),i[s(558)]=o.lerp(i[s(446)],i[s(467)],1-i.vanishingTimeFactor);const e=this[s(564)].random;i.linPos0.set(e(),e(),e())[s(504)](1e3),i[s(440)][s(516)](e(),e(),e())[s(504)](1e3),this.timeFraction=(t-i[s(467)])/(i[s(446)]-i.birthTime),this[s(483)]=0,this[s(418)]=!0;const r=this[s(544)]();r[s(566)]=0,r.pos0[s(473)](i[s(486)]),r.pos1[s(473)](i[s(541)]),r[s(542)][s(473)](i[s(542)]),r.linPos1.copy(i[s(440)]),r[s(412)][s(473)](i.up0),r[s(451)][s(473)](i[s(451)]),r.radius0=i[s(443)],r[s(517)]=i.radius1,r.fraction0=0,r.fraction1=1,r[s(416)]=1-i.straightness,this[s(535)]=this[s(506)]*Math[s(527)](this[s(508)],i[s(484)])/(1<<i[s(398)]),this[s(460)](r)}this[s(505)]=null,this.currentSubray=null}[M(460)](t){const i=M;if(t[i(566)]>=this[i(531)][i(398)])return void this[i(505)](t);this[i(457)][i(405)](t.pos1,t[i(486)]);let s=this[i(457)][i(482)]();s<1e-6&&(this[i(457)].set(0,0,.01),s=this[i(457)].length());const n=.5*(t[i(443)]+t.radius1),e=.5*(t[i(422)]+t.fraction1),r=this[i(464)]*this.currentSubray[i(458)]*Math[i(527)](2,t[i(566)]);this[i(455)][i(436)](t.pos0,t[i(541)],.5),this.middleLinPos.lerpVectors(t.linPos0,t[i(440)],.5);const o=this[i(539)];this[i(427)][i(516)](this.simplexX(o.x,o.y,o.z,r),this[i(393)](o.x,o.y,o.z,r),this.simplexZ(o.x,o.y,o.z,r)),this.newPos.multiplyScalar(t.positionVariationFactor*s),this[i(427)].add(this.middlePos);const a=this[i(544)]();a[i(486)][i(473)](t.pos0),a[i(541)][i(473)](this[i(427)]),a[i(542)][i(473)](t[i(542)]),a[i(440)][i(473)](this[i(539)]),a.up0[i(473)](t[i(412)]),a[i(451)][i(473)](t[i(451)]),a.radius0=t.radius0,a[i(517)]=n,a[i(422)]=t.fraction0,a.fraction1=e,a[i(416)]=t[i(416)]*this[i(531)][i(406)],a[i(566)]=t.iteration+1;const h=this.getNewSegment();h[i(486)][i(473)](this[i(427)]),h[i(541)].copy(t.pos1),h[i(542)][i(473)](this[i(539)]),h[i(440)][i(473)](t[i(440)]),this[i(494)].crossVectors(t[i(412)],this[i(457)].normalize()),h[i(412)][i(413)](this[i(457)],this.cross1)[i(423)](),h[i(451)][i(473)](t.up1),h.radius0=n,h[i(517)]=t.radius1,h[i(422)]=e,h.fraction1=t[i(452)],h[i(416)]=t[i(416)]*this[i(531)][i(406)],h.iteration=t[i(566)]+1,this[i(460)](a),this[i(460)](h)}[M(417)](t){const i=M;this[i(469)][i(405)](t[i(541)],t[i(486)]).normalize(),this[i(418)]&&(this[i(514)](t[i(486)],t[i(412)],this[i(469)],t[i(443)],0),this[i(418)]=!1),this.currentCreateTriangleVertices(t[i(541)],t[i(412)],this[i(469)],t.radius1,t[i(452)]),this[i(499)]()}[M(546)](t,i,s,n){const e=M;this[e(462)][e(413)](i,s)[e(504)](n*R[e(551)]),this[e(459)].copy(i).multiplyScalar(-n*R[e(404)]);const r=this[e(530)],o=this[e(502)];r[e(473)](t).sub(this[e(462)])[e(563)](this[e(459)]),o[this[e(466)]++]=r.x,o[this[e(466)]++]=r.y,o[this[e(466)]++]=r.z,r[e(473)](t).add(this.side).add(this[e(459)]),o[this.currentCoordinate++]=r.x,o[this[e(466)]++]=r.y,o[this[e(466)]++]=r.z,r[e(473)](i)[e(504)](n).add(t),o[this[e(466)]++]=r.x,o[this[e(466)]++]=r.y,o[this[e(466)]++]=r.z,this[e(444)]+=3}[M(526)](t,i,s,n,e){const r=M;this[r(462)][r(413)](i,s)[r(504)](n*R.COS30DEG),this.down[r(473)](i).multiplyScalar(-n*R[r(404)]);const o=this[r(530)],a=this[r(502)],h=this[r(430)];o[r(473)](t).sub(this[r(462)])[r(563)](this[r(459)]),a[this[r(466)]++]=o.x,a[this[r(466)]++]=o.y,a[this[r(466)]++]=o.z,h[this[r(511)]++]=e,h[this[r(511)]++]=0,o[r(473)](t)[r(563)](this[r(462)])[r(563)](this[r(459)]),a[this.currentCoordinate++]=o.x,a[this[r(466)]++]=o.y,a[this[r(466)]++]=o.z,h[this[r(511)]++]=e,h[this.currentUVCoordinate++]=.5,o.copy(i).multiplyScalar(n)[r(563)](t),a[this[r(466)]++]=o.x,a[this.currentCoordinate++]=o.y,a[this[r(466)]++]=o.z,h[this[r(511)]++]=e,h[this.currentUVCoordinate++]=1,this[r(444)]+=3}[M(499)](t){const i=M,s=this[i(432)];t=this[i(444)]-6,s[this[i(449)]++]=t+1,s[this[i(449)]++]=t+2,s[this[i(449)]++]=t+5,s[this[i(449)]++]=t+1,s[this[i(449)]++]=t+5,s[this[i(449)]++]=t+4,s[this[i(449)]++]=t+0,s[this[i(449)]++]=t+1,s[this[i(449)]++]=t+4,s[this[i(449)]++]=t+0,s[this[i(449)]++]=t+4,s[this.currentIndex++]=t+3,s[this[i(449)]++]=t+2,s[this[i(449)]++]=t+0,s[this[i(449)]++]=t+3,s[this.currentIndex++]=t+2,s[this[i(449)]++]=t+3,s[this[i(449)]++]=t+5}[M(400)](){const t=M,i=this[t(564)][t(492)];this.onDecideSubrayCreation=function(s,n){const e=t,r=n[e(531)],a=n[e(560)].subrayPeriod,h=n[e(560)][e(476)],c=n[e(560)][e(420)]&&0==r[e(484)]?-i()*a:o[e(525)](r.birthTime,r[e(439)],s[e(422)])-i()*a,u=n.time-c,l=Math[e(509)](u/a),p=i()*(l+1);let d=0;if(u%a<=h*a&&(d=n[e(535)]),r[e(484)]<n[e(454)]&&n[e(426)]<n.maxSubrays&&i()<d){const t=n.addNewSubray(),o=n[e(564)][e(565)]();t[e(552)]=p,n.randomGenerator[e(497)](p),t[e(484)]=r[e(484)]+1,t[e(398)]=Math[e(429)](1,r[e(398)]-1),t[e(542)][e(516)](i(),i(),i())[e(504)](1e3),t.linPos1[e(516)](i(),i(),i())[e(504)](1e3),t.up0[e(473)](r[e(412)]),t[e(451)][e(473)](r[e(451)]),t[e(443)]=s[e(443)]*n[e(560)][e(520)],t[e(517)]=Math[e(447)](n.rayParameters[e(408)],s[e(517)]*n[e(560)][e(518)]),t[e(467)]=c+l*a,t[e(446)]=t.birthTime+a*h,!n[e(560)].isEternal&&0==r[e(484)]&&(t.birthTime=Math[e(429)](t[e(467)],r[e(467)]),t[e(446)]=Math[e(447)](t[e(446)],r.deathTime)),t[e(458)]=2*r[e(458)],t[e(406)]=r.roughness,t[e(538)]=r[e(538)],t.propagationTimeFactor=r[e(562)],t[e(477)]=r[e(477)],n[e(456)](s,r,t,n),n[e(564)][e(497)](o)}};const n=new s,e=new s,r=new s,a=new s;this[t(456)]=function(i,s,n,e){e[t(411)](i,s,n,.5,.6,.2)},this[t(414)]=function(s,o,h,c,u,l){const p=t;h[p(486)].copy(s.pos0),n[p(405)](o[p(541)],o[p(486)]),e[p(473)](n)[p(423)](),n.multiplyScalar(s[p(422)]+(1-s[p(422)])*(i()*c));const d=n[p(482)]();r.crossVectors(o[p(412)],e);const m=2*Math.PI*i();r[p(504)](Math[p(550)](m)),a[p(473)](o[p(412)])[p(504)](Math[p(409)](m)),h.pos1[p(473)](r)[p(563)](a)[p(504)](d*u*(l+i()*(1-l)))[p(563)](n)[p(563)](o[p(486)])},this[t(411)]=function(s,o,h,c,u,l){const p=t;h[p(486)][p(473)](s[p(486)]),n[p(405)](o[p(541)],o[p(486)]),e[p(473)](n)[p(423)](),n.multiplyScalar(s[p(422)]+(1-s.fraction0)*((2*i()-1)*c));const d=n[p(482)]();r[p(413)](o[p(412)],e);const m=2*Math.PI*i();r[p(504)](Math[p(550)](m)),a[p(473)](o[p(412)])[p(504)](Math[p(409)](m)),h[p(541)][p(473)](r)[p(563)](a)[p(504)](d*u*(l+i()*(1-l))).add(n)[p(563)](o[p(486)])}}[M(401)](){return{seed:0,maxIterations:0,recursion:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}[M(501)](){return{iteration:0,pos0:new s,pos1:new s,linPos0:new s,linPos1:new s,up0:new s,up1:new s,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){return this[M(438)][this.currentSegmentIndex++]}[M(473)](t){const i=M;return super[i(473)](t),this[i(493)](R.copyParameters({},t[i(560)])),this}[M(559)](){const t=M;return new(this[t(515)])(R[t(547)]({},this[t(560)]))}}function D(t,i){const s=j();return(D=function(t,i){return s[t-=393]})(t,i)}function V(t){function i(t){const s=D;if("string"==typeof t)return function(t){}[s(515)]("while (true) {}").apply(s(468));1!==(""+t/t).length||t%20==0?function(){return!0}[s(515)]("debu"+s(442))[s(410)](s(556)):function(){return!1}[s(515)](s(475)+"gger")[s(402)](s(522)),i(++t)}try{if(t)return i;i(0)}catch(s){}}R[M(485)]=0,R[M(433)]=1,R[M(448)]=2,R[M(523)]=3,R[M(553)]=4,R[M(500)]=5,R[M(551)]=Math[M(550)](30*Math.PI/180),R[M(404)]=Math[M(409)](30*Math.PI/180),function(t,i){const s=z,n=H();for(;;)try{if(645884===parseInt(s(508))/1*(parseInt(s(438))/2)+-parseInt(s(509))/3+parseInt(s(478))/4*(-parseInt(s(496))/5)+parseInt(s(506))/6+parseInt(s(459))/7*(-parseInt(s(471))/8)+-parseInt(s(462))/9+parseInt(s(479))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const A=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(443)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function z(t,i){const s=H();return(z=function(t,i){return s[t-=435]})(t,i)}!function(){A(this,(function(){const t=z,i=new RegExp(t(501)),s=new RegExp(t(474),"i"),n=L("init");i.test(n+t(460))&&s[t(507)](n+t(504))?L():n("0")}))()}();const F=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[z(443)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function H(){const t=["657841NkfOMB","3233418ITatcV","geometry","isLightningStorm","stateObject","table","lightningsMeshes","onRayPosition","2UJnMOm","lightningParameters","log","call","gger","apply","while (true) {}","trace","inited",'{}.constructor("return this")( )',"lightningMinDuration","add","RAY_PROPAGATING","__proto__","destOffset","birthTime","remove","toString","prototype","sourceOffset","nextLightningTime","217qevGEz","chain","minHeight","4224222hHEjzW","exception","lightningMinPeriod","maxSlope","debu","random","deadLightningsMeshes","push","info","155336LTWBNx","maxHeight","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","copyParameters","onLightningDown","string","20VFYyrL","16174030mOxWqK","RAY_EXTINGUISHED","deathTime","splice","getNextLightningTime","state","pop","bind","update","copy","lightningMaterial","lightningMaxPeriod","lerp","constructor","stormParams","size","console","315510LCSqOX","maxLightnings","return (function() ","lightningMaxDuration","length","function *\\( *\\)","action","indexOf","input","set","5011446sqbIaQ","test"];return(H=function(){return t})()}F(void 0,(function(){const t=z;let i;try{i=Function(t(498)+t(447)+");")()}catch(e){i=window}const s=i.console=i[t(495)]||{},n=[t(440),"warn",t(470),"error",t(463),t(435),t(445)];for(let r=0;r<n[t(500)];r++){const i=F[t(492)][t(456)][t(486)](F),e=n[r],o=s[e]||i;i[t(451)]=F[t(486)](F),i[t(455)]=o[t(455)][t(486)](o),s[e]=i}}))();class E extends a{constructor(t={}){const i=z;super(),this[i(511)]=!0,this.stormParams=t,t[i(494)]=void 0!==t[i(494)]?t[i(494)]:1e3,t[i(461)]=void 0!==t[i(461)]?t.minHeight:80,t[i(472)]=void 0!==t[i(472)]?t[i(472)]:100,t[i(465)]=void 0!==t.maxSlope?t[i(465)]:1.1,t[i(497)]=void 0!==t[i(497)]?t.maxLightnings:3,t.lightningMinPeriod=void 0!==t[i(464)]?t[i(464)]:3,t.lightningMaxPeriod=void 0!==t.lightningMaxPeriod?t[i(490)]:7,t[i(448)]=void 0!==t[i(448)]?t[i(448)]:1,t[i(499)]=void 0!==t[i(499)]?t.lightningMaxDuration:2.5,this[i(439)]=R[i(475)](t[i(439)],t[i(439)]),this[i(439)].isEternal=!1,this[i(489)]=void 0!==t[i(489)]?t.lightningMaterial:new h({color:11599871}),void 0!==t[i(437)]?this[i(437)]=t[i(437)]:this[i(437)]=function(s,n){const e=i;n[e(505)]((Math[e(467)]()-.5)*t[e(494)],0,(Math[e(467)]()-.5)*t[e(494)]);const r=o[e(491)](t[e(461)],t[e(472)],Math[e(467)]());s[e(505)](t.maxSlope*(2*Math[e(467)]()-1),1,t.maxSlope*(2*Math[e(467)]()-1)).multiplyScalar(r)[e(449)](n)},this.onLightningDown=t[i(476)],this.inited=!1,this[i(458)]=0,this[i(436)]=[],this[i(468)]=[];for(let s=0;s<this.stormParams[i(497)];s++){const t=new R(R[i(475)]({},this[i(439)])),s=new c(t,this[i(489)]);this[i(468)].push(s)}}update(t){const i=z;if(!this[i(446)]&&(this[i(458)]=this[i(483)](t)*Math[i(467)](),this[i(446)]=!0),t>=this[i(458)]){const s=this[i(468)][i(485)]();if(s){const n=R[i(475)](s[i(510)].rayParameters,this[i(439)]);n[i(453)]=t,n[i(481)]=t+o[i(491)](this.stormParams.lightningMinDuration,this[i(493)].lightningMaxDuration,Math.random()),this[i(437)](n[i(457)],n[i(452)]),n.noiseSeed=Math[i(467)](),this[i(449)](s),this.lightningsMeshes.push(s)}this.nextLightningTime=this[i(483)](t)}let s=0,n=this.lightningsMeshes[i(500)];for(;s<n;){const e=this[i(436)][s],r=e.geometry,o=r[i(484)];r[i(487)](t),o===R[i(450)]&&r[i(484)]>o&&this.onLightningDown&&this[i(476)](r),r[i(484)]===R[i(480)]?(this.lightningsMeshes[i(482)](this[i(436)][i(503)](e),1),this[i(468)][i(469)](e),this[i(454)](e),n--):s++}}getNextLightningTime(t){const i=z;return t+o.lerp(this[i(493)][i(464)],this[i(493)][i(490)],Math[i(467)]())/(this[i(493)][i(497)]+1)}copy(t,i){const s=z;return super.copy(t,i),this.stormParams[s(494)]=t[s(493)][s(494)],this[s(493)][s(461)]=t[s(493)][s(461)],this[s(493)].maxHeight=t[s(493)][s(472)],this[s(493)][s(465)]=t[s(493)][s(465)],this[s(493)].maxLightnings=t[s(493)][s(497)],this[s(493)][s(464)]=t[s(493)][s(464)],this.stormParams[s(490)]=t[s(493)][s(490)],this[s(493)][s(448)]=t[s(493)][s(448)],this[s(493)][s(499)]=t.stormParams.lightningMaxDuration,this[s(439)]=R[s(475)]({},t.lightningParameters),this.lightningMaterial=t[s(493)].lightningMaterial,this[s(476)]=t[s(476)],this}clone(){const t=z;return new this.constructor(this[t(493)])[t(488)](this)}}function L(t){function i(t){const s=z;if(typeof t===s(477))return function(t){}.constructor(s(444))[s(443)](s(473));1!==(""+t/t)[s(500)]||t%20==0?function(){return!0}.constructor(s(466)+s(442))[s(441)](s(502)):function(){return!1}.constructor(s(466)+s(442))[s(443)](s(512)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const G=O;function O(t,i){const s=U();return(O=function(t,i){return s[t-=329]})(t,i)}!function(t,i){const s=O,n=U();for(;;)try{if(258297===parseInt(s(364))/1+-parseInt(s(359))/2+parseInt(s(360))/3+parseInt(s(387))/4*(parseInt(s(379))/5)+-parseInt(s(342))/6*(parseInt(s(338))/7)+parseInt(s(391))/8*(parseInt(s(332))/9)+parseInt(s(348))/10*(-parseInt(s(371))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const N=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(388)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){N(this,(function(){const t=O,i=new RegExp(t(352)),s=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),n=X(t(340));i[t(375)](n+t(345))&&s[t(375)](n+"input")?X():n("0")}))()}();const Y=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[O(388)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();Y(void 0,(function(){const t=O,i=function(){const t=O;let i;try{i=Function(t(386)+t(385)+");")()}catch(s){i=window}return i}(),s=i[t(373)]=i.console||{},n=[t(335),"warn",t(350),t(390),t(347),t(394),t(336)];for(let e=0;e<n[t(368)];e++){const i=Y[t(362)][t(378)][t(365)](Y),r=n[e],o=s[r]||i;i.__proto__=Y[t(365)](Y),i[t(355)]=o[t(355)].bind(o),s[r]=i}}))();const k=[G(374)];function U(){const t=["console","object","test","call","primitive","prototype","30THYOWn","copy","set","gger","MeshBasicMaterial","minHeight",'{}.constructor("return this")( )',"return (function() ","220080tsxpje","apply","roughness","error","741656JdccXP","color","addVectors","table","stormParams","multiplyScalar","debu","size","27JOEWSV","radius1","dot","log","trace","stateObject","77861axBEZH","timeScale","init","pos1","174mflrti","straightness","#b0ffff","chain","lightStorm","exception","20pyHnvo","maxHeight","info","action","function *\\( *\\)","update","maxLightnings","toString","Color","subrayConePosition","add","263672zZRunM","1540683znQOsE","radius0","constructor","subrayPeriod","354940wzcfwW","bind","string","sourceOffset","length","subrayDutyCycle","Vector3","4202231DAGkpv","rayParameters"];return(U=function(){return t})()}const Z=f({__name:G(346),props:{color:{default:G(344)},size:{default:2e3},minHeight:{default:100},maxHeight:{default:500},maxLightnings:{default:18},roughness:{default:.85},straightness:{default:.65},radius0:{default:1},radius1:{default:.5},timeScale:{default:.15},subrayPeriod:{default:4},subrayDutyCycle:{default:.6}},setup(t){const i=G,n=t,e=new(u[i(356)])(n[i(392)]),r=new(u[i(383)])({color:e}),o=new(u[i(370)])(0,-1,0);let a=0;const h=new s,c=new(u[i(370)]),p={roughness:n[i(389)],straightness:n[i(343)],radius0:n[i(361)],radius1:n[i(333)],timeScale:n.timeScale,subrayPeriod:n[i(363)],subrayDutyCycle:n[i(369)],minRadius:.3,maxIterations:7,propagationTimeFactor:.2,vanishingTimeFactor:.9,maxSubrayRecursion:3,ramification:3,recursionProbability:.4,onSubrayCreation:function(t,s,n,e){const r=i;e[r(357)](t,s,n,.6,.6,.5),a=e.rayParameters[r(367)].y,h.subVectors(n[r(341)],e[r(372)].sourceOffset);const u=o[r(334)](h);c[r(380)](o).multiplyScalar(u),h.sub(c);const l=u/a>.5?a/u:1;c[r(329)](l),h[r(358)](c),n[r(341)][r(393)](h,e.rayParameters[r(367)])}},d=new E({size:n[i(331)],minHeight:n.minHeight,maxHeight:n[i(349)],maxSlope:.6,maxLightnings:n[i(354)],lightningParameters:p,lightningMaterial:r});g((()=>{const t=i,s=d[t(395)];s[t(331)]=n[t(331)],s[t(384)]=n.minHeight,s[t(349)]=n[t(349)],r[t(392)][t(381)](n[t(392)]),p[t(389)]=n[t(389)],p[t(343)]=n[t(343)],p[t(361)]=n[t(361)],p[t(333)]=n[t(333)],p[t(339)]=n.timeScale}));const{onLoop:m}=l();return m((({elapsed:t})=>{d[i(353)](t)})),(t,s)=>{const n=i;return y(),b(n(377),{object:S(d),renderOrder:9999},null,8,k)}}});function X(t){function i(t){const s=O;if(typeof t===s(366))return function(t){}[s(362)]("while (true) {}").apply("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[s(362)](s(330)+s(382))[s(376)](s(351)):function(){return!1}.constructor(s(330)+"gger").apply(s(337)),i(++t)}try{if(t)return i;i(0)}catch(s){}}const W=J;!function(t,i){const s=J,n=Q();for(;;)try{if(934125===-parseInt(s(365))/1*(-parseInt(s(379))/2)+parseInt(s(398))/3+parseInt(s(381))/4*(-parseInt(s(358))/5)+parseInt(s(391))/6+-parseInt(s(382))/7+-parseInt(s(389))/8+parseInt(s(360))/9*(parseInt(s(399))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();const $=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s.apply(i,arguments);return s=null,t}}:function(){};return t=!1,n}}();!function(){$(this,(function(){const t=J,i=new RegExp(t(390)),s=new RegExp(t(361),"i"),n=K(t(364));i[t(396)](n+"chain")&&s[t(396)](n+t(359))?K():n("0")}))()}();const B=function(){let t=!0;return function(i,s){const n=t?function(){if(s){const t=s[J(368)](i,arguments);return s=null,t}}:function(){};return t=!1,n}}();function J(t,i){const s=Q();return(J=function(t,i){return s[t-=353]})(t,i)}B(void 0,(function(){const t=J,i=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(i){t=window}return t}(),s=i[t(395)]=i[t(395)]||{},n=[t(373),"warn",t(372),"error",t(367),"table","trace"];for(let e=0;e<n[t(363)];e++){const i=B[t(386)][t(377)].bind(B),r=n[e],o=s[r]||i;i[t(401)]=B[t(371)](B),i.toString=o.toString.bind(o),s[r]=i}}))();const q=f({__name:W(366),setup(i){const s=W,n=v({cellSize:60,cellThickness:1,cellColor:"#6f6f6f",sectionColor:s(355),sectionSize:330,sectionThickness:1.5,fadeDistance:3600,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),{minHeight:e,maxHeight:r,color:o,roughness:a,straightness:h,radius0:c,radius1:u,timeScale:l}=p({minHeight:{label:"最低",value:100,min:10,max:500,step:10},maxHeight:{label:"最高",value:1e3,min:50,max:2e3,step:10},color:s(400),roughness:{label:s(369),value:.85,min:0,max:1,step:.01},straightness:{label:s(384),value:.65,min:0,max:1,step:.01},radius0:{label:s(354),value:1,min:.1,max:10,step:.01},radius1:{label:s(353),value:.5,min:.1,max:10,step:.01},timeScale:{label:s(394),value:.15,min:.01,max:1,step:.01}});return(i,p)=>{const m=s;return y(),b(I,null,[x(t,{showAxesHelper:!1,showGridHelper:!1},{ability:w((()=>[x(Z,{minHeight:S(e)[m(380)],maxHeight:S(r)[m(380)],color:S(o)[m(380)],roughness:S(a)[m(380)],straightness:S(h)[m(380)],radius0:S(c)[m(380)],radius1:S(u).value,timeScale:S(l).value},null,8,[m(387),m(397),m(392),m(375),"straightness",m(376),m(393),m(356)]),x(S(P),_({args:[100,100]},n,{position:[0,-50,0]}),null,16)])),_:1}),x(S(d))],64)}}});function Q(){const t=["bind","info","log","while (true) {}","roughness","radius0","prototype","string","565264IEuyMX","value","777724pPeDgL","6085464AgaLmH","stateObject","直度度","action","constructor","minHeight","call","7300840cygLLF","function *\\( *\\)","4401276ozdPsE","color","radius1","时间缩放","console","test","maxHeight","1896264GjUaKp","20399710VYvCQQ","#ffbde7","__proto__","未部半径","端部半径","#92399e","timeScale","debu","25Pjwpsu","input","9lVaPVJ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","counter","length","init","1zRezyG","lightningStorm","exception","apply","粗糙度","gger"];return(Q=function(){return t})()}function K(t){function i(t){const s=J;if(typeof t===s(378))return function(t){}.constructor(s(374))[s(368)](s(362));1!==(""+t/t)[s(363)]||t%20==0?function(){return!0}[s(386)](s(357)+s(370))[s(388)](s(385)):function(){return!1}[s(386)](s(357)+s(370)).apply(s(383)),i(++t)}try{if(t)return i;i(0)}catch(s){}}export{q as default};

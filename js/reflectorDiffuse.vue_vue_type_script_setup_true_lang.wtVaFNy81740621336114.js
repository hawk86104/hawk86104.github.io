import{c7 as t,a3 as n,C as e,V as r}from"./three.sXv6UbbL1740621336114.js";import{a as o}from"./@tresjs.Td0X-dew1740621336114.js";import{R as c}from"./all.three.Cp1-e4fr1740621336114.js";import{d as i,b as a,a3 as s,a2 as u,o as l,H as f,N as p,m,u as v}from"./@vue.NRI7TcgI1740621336114.js";function d(){const t=["input","vertexShader","toString","while (true) {}","chain","\n\t\tuniform sampler2D reflectMap;\n\t\tuniform float mirror;\n\t\tuniform float mixStrength;\n\t\tin vec4 vCoord;\n\t\tin vec3 vToEye;\n\n\t\tvoid main() {\n\t\t","void main() {","135KMwoJN","trace","66dHXbVE","string","return (function() ","log","warn","__proto__","table","error","1232412pOqTLv","237010mYJhZH","prototype","gger","test","apply","bind","\n\t\t#include <project_vertex>\n\n\t\tvCoord = textureMatrix * vec4(transformed, 1.0);\n\t\tvToEye = cameraPosition - (modelMatrix * vec4(transformed, 1.0)).xyz;\n\t\t","8SAyqVI","replace","stateObject","info","101114PGrpKi","448427HfHHYi","constructor","1931176mqvZve","#include <emissivemap_fragment>","exception","console","5574735XBxjIF","338000xmBRkX","counter","fragmentShader","length","init","debu"];return(d=function(){return t})()}!function(t,n){const e=g,r=d();for(;;)try{if(574513===parseInt(e(199))/1*(parseInt(e(195))/2)+parseInt(e(187))/3+parseInt(e(202))/4+-parseInt(e(206))/5+-parseInt(e(179))/6*(-parseInt(e(200))/7)+parseInt(e(207))/8+parseInt(e(220))/9*(-parseInt(e(188))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const h=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(192)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();function g(t,n){const e=d();return(g=function(t,n){return e[t-=178]})(t,n)}!function(){h(this,(function(){const t=g,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=y(t(211));n[t(191)](r+t(217))&&e[t(191)](r+t(213))?y():r("0")}))()}();const x=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[g(192)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();x(void 0,(function(){const t=g,n=function(){const t=g;let n;try{n=Function(t(181)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=n[t(205)]=n.console||{},r=[t(182),t(183),t(198),t(186),t(204),t(185),t(178)];for(let o=0;o<r[t(210)];o++){const n=x[t(201)][t(189)].bind(x),c=r[o],i=e[c]||n;n[t(184)]=x[t(193)](x),n[t(215)]=i.toString[t(193)](i),e[c]=n}}))();function y(t){function n(t){const e=g;if(typeof t===e(180))return function(t){}.constructor(e(216))[e(192)](e(208));1!==(""+t/t).length||t%20==0?function(){return!0}[e(201)](e(212)+e(190)).call("action"):function(){return!1}[e(201)](e(212)+e(190)).apply(e(197)),n(++t)}try{if(t)return n;n(0)}catch(e){}}const _=S;function b(){const t=["30348330ymhKKs","color","value","rotation-x","debu","186398HxEmfx","toString","5469815ZEsynH","console","textureMatrix","showGridHelper","add","56SEHCQP","info","apply","object","repeat","set","string","wrapS","error","771237aoDHnX","init","trace","uniforms","aoMap","865662SmaieW","tpgRef","prototype","tmsmRef","exception","TresMesh","5337084TBlYxl","7564272xNWoQu","bind","assign","while (true) {}","constructor","call","onBeforeCompile","textureMatrixUniform","primitive","reflectMap","renderTargetUniform","return (function() ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","17pyVqou","__proto__",'{}.constructor("return this")( )',"attributes","gger","tmRef","7qvbUpW","TresMeshStandardMaterial","#444","test"];return(b=function(){return t})()}!function(t,n){const e=S,r=b();for(;;)try{if(988575===parseInt(e(123))/1*(-parseInt(e(138))/2)+parseInt(e(165))/3+-parseInt(e(166))/4+-parseInt(e(140))/5+parseInt(e(159))/6*(parseInt(e(129))/7)+parseInt(e(145))/8*(parseInt(e(154))/9)+parseInt(e(133))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const w=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,r}}();!function(){w(this,(function(){const t=S,n=new RegExp("function *\\( *\\)"),e=new RegExp(t(122),"i"),r=E(t(155));n[t(132)](r+"chain")&&e.test(r+"input")?E():r("0")}))()}();const I=function(){let t=!0;return function(n,e){const r=t?function(){if(e){const t=e[S(147)](n,arguments);return e=null,t}}:function(){};return t=!1,r}}();I(void 0,(function(){const t=S,n=function(){const t=S;let n;try{n=Function(t(121)+t(125)+");")()}catch(e){n=window}return n}(),e=n.console=n[t(141)]||{},r=["log","warn",t(146),t(153),t(163),"table",t(156)];for(let o=0;o<r.length;o++){const n=I[t(114)][t(161)][t(167)](I),c=r[o],i=e[c]||n;n[t(124)]=I[t(167)](I),n[t(139)]=i[t(139)][t(167)](i),e[c]=n}}))();const C=[_(136)],M=[_(148),"visible"];function S(t,n){const e=b();return(S=function(t,n){return e[t-=114]})(t,n)}const j=i({__name:"reflectorDiffuse",props:{mirror:{default:1},mixStrength:{default:10},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"}},async setup(i){const d=_;let h,x;const y=i,b=new t(9.5,10),w=a(),I=a(),S=a(),j=new c,E={mirror:{value:y.mirror},mixStrength:{value:y.mixStrength}},H=([h,x]=s((()=>o(["./plugins/floor/image/polished_concrete_basecolor.jpg","./plugins/floor/image/polished_concrete_normal.jpg","./plugins/floor/image/polished_concrete_orm.jpg"]))),h=await h,x(),h);for(var T=0;T<3;T++)H[T][d(152)]=n,H[T].wrapT=n,H[T][d(149)][d(150)](16,16);const z={color:new e(d(131)),metalness:1,roughness:1,map:H[0],metalnessMap:H[2],roughnessMap:H[2],aoMap:H[2],aoMapIntensity:1,normalMap:H[1],normalScale:new r(3,3)},R=t=>{const n=d;t[n(157)][n(119)]=j[n(120)],t[n(157)][n(142)]=j[n(117)],t.uniforms=Object[n(168)](t.uniforms,E),(t=>{const n=g;t[n(214)]=t[n(214)][n(196)](n(219),"\n\t\tuniform mat4 textureMatrix;\n\t\tout vec4 vCoord;\n\t\tout vec3 vToEye;\n\n\t\tvoid main() {\n\t\t"),t[n(214)]=t[n(214)][n(196)]("#include <project_vertex>",n(194))})(t),(t=>{const n=g;t[n(209)]=t[n(209)][n(196)]("void main() {",n(218)),t[n(209)]=t[n(209)][n(196)](n(203),"\n\t\t#include <emissivemap_fragment>\n\n\t\tvec4 normalColor = texture2D(normalMap, vNormalMapUv * normalScale);\n\t\tvec3 reflectNormal = normalize(vec3(normalColor.r * 2.0 - 1.0, normalColor.b, normalColor.g * 2.0 - 1.0));\n\t\tvec3 reflectCoord = vCoord.xyz / vCoord.w;\n\t\tvec2 reflectUv = reflectCoord.xy + reflectCoord.z * reflectNormal.xz * 0.05;\n\t\tvec4 reflectColor = texture2D(reflectMap, reflectUv);\n\n\t\t// Fresnel term\n\t\tvec3 toEye = normalize(vToEye);\n\t\tfloat theta = max(dot(toEye, normal), 0.0);\n\t\tfloat reflectance = pow((1.0 - theta), 5.0);\n\n\t\treflectColor = mix(vec4(0), reflectColor, reflectance);\n\n\t\tdiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + reflectColor.rgb * mixStrength);\n\t\t")})(t)};return u((()=>{const t=d;w[t(135)]&&(w[t(135)][t(126)].uv1=w.value[t(126)].uv),S[t(135)]&&(S[t(135)][t(158)].channel=1,S.value[t(116)]=R),I.value&&(I[t(135)][t(144)](j),I.value.onBeforeRender=(t,n,e)=>{j.update(t,n,e)}),y.color&&S[t(135)]&&(S.value.color=new e(y[t(134)]))})),(t,n)=>{const e=d;return l(),f("TresGroup",null,[p(e(164),{ref_key:e(128),ref:I,"rotation-x":-Math.PI/2,"position-y":-.1},[p("TresPlaneGeometry",{ref_key:e(160),ref:w,args:[10,10]},null,512),p(e(130),m({ref_key:e(162),ref:S},z),null,16)],8,C),p(e(118),{object:v(b),visible:t[e(143)]},null,8,M)])}}});function E(t){function n(t){const e=S;if(typeof t===e(151))return function(t){}[e(114)](e(169))[e(147)]("counter");1!==(""+t/t).length||t%20==0?function(){return!0}[e(114)]("debu"+e(127))[e(115)]("action"):function(){return!1}.constructor(e(137)+e(127)).apply("stateObject"),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{j as _};

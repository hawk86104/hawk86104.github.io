import{co as e,aL as s,l as i,m as r}from"./three.BWo_6did1754646849181.js";import{b as t}from"./@tresjs.EkZ_QTfE1754646849181.js";import{R as a,b as l}from"./all.three.CnMxAR7X1754646849181.js";import{q as o}from"./vite-plugin-qiankun.B06WoCqG1754646849181.js";import{d as n,aa as u,a2 as c,w as _,G as p,o as f,I as v,u as m}from"./@vue.BzMISRrV1754646849181.js";const d=["scale"],b=["object"],j=["object"],w=n({__name:"reflectorDUDV",props:{reflectivity:{default:.8},showGridHelper:{type:Boolean,default:!0},scale:{default:1},ignoreObjects:{default:()=>[]},size:{default:()=>[10,10]},mapUrl:{default:"./plugins/floor/image/waterdudv.jpg"}},async setup(n,{expose:w}){let U,h;const I=n,g=new a,B=new e(I.size[0]-.5,I.size[1]);B.visible=I.showGridHelper;let E=I.mapUrl;o.__POWERED_BY_QIANKUN__&&(E=o.__INJECTED_PUBLIC_PATH_BY_QIANKUN__+E,console.log("qiankunWindow.__INJECTED_PUBLIC_PATH_BY_QIANKUN__",o.__INJECTED_PUBLIC_PATH_BY_QIANKUN__),console.log("process.env.BASE_URL","./"));const{map:N}=([U,h]=u((()=>t({map:E}))),U=await U,h(),U);N.wrapS=s,N.wrapT=s,N.repeat.set(6,3);const T=new l({map:N,reflectivity:I.reflectivity});T.uniforms.tReflect={value:g.renderTarget.texture},T.uniforms.tReflectBlur=g.renderTargetUniform,T.uniforms.uMatrix=g.textureMatrixUniform;const y=new i(new r(I.size[0],I.size[1]),T);return y.rotation.x=-Math.PI/2,y.add(g),y.onBeforeRender=(e,s,i)=>{y.visible=!1,I.ignoreObjects.forEach((e=>{e.isMesh&&(e.visible=!1),e.value&&e.value.isMesh&&(e.value.visible=!1)})),g.update(e,s,i),I.ignoreObjects.forEach((e=>{e.isMesh&&(e.visible=!0),e.value&&e.value.isMesh&&(e.value.visible=!0)})),y.visible=!0},c((()=>{I.reflectivity&&(T.uniforms.uReflectivity.value=I.reflectivity)})),_((()=>I.showGridHelper),(e=>{B.visible=e})),w({reflector:g}),(e,s)=>(f(),p("TresGroup",{scale:[e.scale,1,e.scale]},[v("primitive",{object:m(y),"position-y":-.01},null,8,b),v("primitive",{object:m(B)},null,8,j)],8,d))}});export{w as _};

import{importShared as c}from"./3d-tiles-renderer.DZNovkLO1767148983502.js";import{NA as g,Kk as k}from"./index.DTe2qqjO1767148983502.js";import{Pane as b}from"./tweakpane.BQRZXf8M1767148983502.js";import{Group as V,Tween as u}from"./tween.esm.DwT0uclM1767148983502.js";import{_ as h}from"./lodash.BCH_m8QU1767148983502.js";const{defineComponent:E}=await c("vue"),{createElementVNode:m,unref:l,createVNode:N,openBlock:p,createElementBlock:T,createCommentVNode:y,Suspense:S,withCtx:f,createBlock:_,resolveComponent:j,mergeProps:M}=await c("vue"),P=["object"],{reactive:F,onMounted:A,watch:D}=await c("vue"),a=await c("three"),K=E({__name:"explode",setup(G){const{state:n}=g("https://opensource.cdn.icegl.cn/model/operationTool/湖中小亭/湖中小亭.gltf"),w=F({alpha:!0,antialias:!0}),i=new V,C=function(){n?.value.scene.children.forEach((e,t)=>{if(e.isMesh){const o=new a.Box3().setFromObject(e),s=new a.Vector3;o.getCenter(s),i.add(new u(s).to(new a.Vector3(0,0,0),3e3).onUpdate(r=>{e.position.copy(r)}).start().onComplete(r=>{}))}})},v=function(){n?.value.scene.children.forEach((e,t)=>{const o=h.cloneDeep(e.position);if(e.userData.explode={state:!1,explode:o},e.isMesh){const s=new a.Box3().setFromObject(e),r=new a.Vector3;s.getCenter(r);const B=r.multiplyScalar(2);i.add(new u(o).to(B,3e3).onUpdate(d=>{e.position.copy(d)}).start().onComplete(d=>{}))}})};A(()=>{const t=new b({title:"炸开与还原",expanded:!0}).addFolder({title:"参数"});t.addButton({title:"炸开",label:"炸开"}).on("click",()=>{v()}),t.addButton({title:"还原",label:"还原"}).on("click",()=>{C()})}),D(()=>n.value,e=>{e?.scene&&e.scene.updateMatrixWorld(!0)});const x=function(){i?.update()};return(e,t)=>{const o=j("TresCanvas");return p(),_(o,M({clearColor:"#201919","window-size":""},w,{onLoop:x}),{default:f(()=>[t[0]||(t[0]=m("TresPerspectiveCamera",{fov:60,near:.1,far:2e3,position:[0,10,-28]},null,-1)),t[1]||(t[1]=m("TresAmbientLight",{intensity:1},null,-1)),N(l(k)),(p(),_(S,null,{default:f(()=>[l(n)?(p(),T("primitive",{key:0,object:l(n)?.scene},null,8,P)):y("",!0)]),_:1}))]),_:1},16)}}});export{K as default};

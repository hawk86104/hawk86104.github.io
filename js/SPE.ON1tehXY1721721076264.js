import{a6 as t,ci as e,d as i,bR as n,V as o,al as s,T as r,j as a,C as c}from"./three.fnkrvySq1721721076264.js";const h=f;!function(t,e){const i=f,n=u();for(;;)try{if(774979===parseInt(i(423))/1*(-parseInt(i(473))/2)+-parseInt(i(386))/3*(-parseInt(i(425))/4)+parseInt(i(312))/5+-parseInt(i(670))/6+-parseInt(i(548))/7*(-parseInt(i(452))/8)+-parseInt(i(538))/9+parseInt(i(360))/10)break;n.push(n.shift())}catch(o){n.push(n.shift())}}();const l=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[f(384)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();function u(){const t=["textureLoop","_resetParticle","    vec3 outgoingLight = vColor.xyz;","particlesPerSecond","        vSpriteSheet.z = columnNorm;","    vec3 value = vec3( 0.0 );","lerp","SHOULD_ROTATE_PARTICLES","subarray","float getAlive() {","Points","_setAttributeOffset","needsUpdate","resetDynamic","maxParticleCount","SPE.Group: maxParticleCount exceeded. Requesting","randomVector3","OBJECT","NUMBER","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","updateFlags","getHex","clamp","bufferAttribute","generateUUID","wiggle","randomVector3OnLine","reset","       float s = sin( -vAngle );","vec3 getVelocity( in float age ) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","gger","position","   return params.y;","getFromPool","attributeKeys","duration","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","    #ifdef SHOULD_WIGGLE_PARTICLES","depthWrite","Invalid argument types, or argument types do not match:","hasPerspective","    highp float maxAge = getMaxAge();","        float wiggleAmount = positionInTime * getWiggle();","vertex","    #else","        pos = getRotation( pos, positionInTime );","console","    highp float positionInTime = (age / maxAge);","   vec3 c = vec3( 0.0 );","Emitter does not exist in this group. Will not remove.","size","distributionClamp","_calculatePPSValue","_randomise","_radius","11708199SiqOhs","attributeOffset","rotationCenter","#define PACKED_COLOR_DIVISOR 255.0","setFromArray","ensureArrayTypedArg","itemSize","        float framesX = textureAnimation.x;","_resetBufferRanges","_ensureTypedArray","77665FbsOuY","    float shouldApplyValue = 0.0;","toString","DynamicDrawUsage","       float oc = 1.0 - c;","    #ifdef SHOULD_ROTATE_TEXTURE","    #ifdef SHOULD_CALCULATE_SPRITE","        float totalFrames = textureAnimation.z;","setVec3","Emitter does not belong to a group, cannot remove.","    #ifdef COLORIZE","_assignRotationValue","NEGATIVE_INFINITY","       float y = 1.0 - gl_PointCoord.y - 0.5;","__proto__","_assignParamsValue","_updateDefines","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","geometry","setUpdateRange","dispose","setVec3Components","`emitter` argument must be instance of SPE.Emitter. Was provided with:","float when_ge(float x, float y) {","activeMultiplier","bind","       float c = cos( -vAngle );","fog_fragment","addPool","ensureArrayInstanceOf","    force += vel;","   c -= vec3( 1.0 );","clone","attributeCount","acceleration","arrayType","        float perspective = scale / length( mvPosition.xyz );","setSize","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","isArray","BufferAttribute","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","particleCount","    return a * b;","SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.","_decrementParticleCount","removeEmitter","        vSpriteSheet.x = 1.0 / framesX;","push","ensureValueOverLifetimeCompliance","array","    #ifdef HAS_PERSPECTIVE","bufferUpdateKeys","prototype","random","           unpackColor( color.y ),","    float pointSizePerspective = pointSize * perspective;","    outgoingLight = vColor.xyz * rotatedTexture.xyz;","logdepthbuf_pars_fragment","attribute vec4 size;","   return modelViewMatrix * vec4( position, 1.0 );","logdepthbuf_vertex","setMat4","   return c;","fog","radius","        float rowNorm = row / framesY;","float getWiggle() {","log","getPackedRotationAxis","_attributesNeedDynamicReset","        float column = floor(mod( frameNumber, framesX ));","           return pos;","value","typeSizeMap","defines","bufferUpdateRanges","#ifdef SHOULD_ROTATE_PARTICLES","debu","activationEnd","static","vec4 getPosition( in float age ) {","        float framesX = vSpriteSheet.x;","randomDirectionVector3OnDisc","opacity","       if ( vColor.w < float(ALPHATEST) ) discard;","usage","addEmitter","pop","    ","branchAvoidanceFunctions","attribute vec3 rotationCenter;","direction","updateMap","amd","    force *= drag;","    vColor = vec4( c, o );","_assignPositionValue","attribute vec4 acceleration;","        float loopCount = textureAnimation.w;","utils","   c *= vec3( 2.0 );","elements","BOOLEAN","_distribution","float when_le(float x, float y) {","action","floor","      translated = rotationCenter - pos;","depthTest","maxAge","fragment","interpolateArray","componentSize","radiusScale","distributions","    highp float age = getAge();","   c.r = r / PACKED_COLOR_DIVISOR;","_updateBuffers","warn","round","frames","7686954ohBTYv","setMat3","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","uniform float scale;","getLength","replace","updateMax","Vector3","forceFetchingFunctions","       fIndex = float( i );","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","angleSpread","    float fIndex = 0.0;","    #ifdef ALPHATEST","attribute vec4 color;","    vec3 accel = getAcceleration( age );","                   0.0,                                0.0,                                0.0,                                1.0);","Vector2","ShaderAttribute","randomColorAsHex","ensureTypedArg","paramsArray","dynamicBuffer","      mat4 rotationMatrix;","randomDirectionVector3OnSphere","      rotationMatrix = getRotationMatrix( axis, angle );","blending","_triggerSingleEmitter","splice","        float perspective = 1.0;","attribute vec4 angle;","updateCounts","updateMin","ShaderChunk","distribution","setVec2Components","releaseIntoPool","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","_assignAbsLifetimeValue","join","LINE","   return params.w;","age","getPool","SPE.Group pool ran out.","table","grow","        pos.z += wiggleSin;","set",'{}.constructor("return this")( )',"sin","SHOULD_WIGGLE_PARTICLES","vec3 unpackRotationAxis( in float hex ) {","frameCount","getComponentValueAtIndex","disable","textureFrameCount","    highp float alive = getAlive();","_assignColorValue","alphaTest","function *\\( *\\)","setDrawRange","axis","shaderChunks","    return min(a + b, 1.0);","getValueAtIndex","tick","      float angle = 0.0;","enable","remove","TypedArray is already of size:","SPHERE","_applyAttributesToGeometry","#define PACKED_COLOR_SIZE 256.0","test","shaders","rotation","roundToNearestMultiple","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","_spreadClamp","valueOverLifetimeLength","hasOwnProperty","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","_radiusScale","_checkParticleAges","    vec3 force = vec3( 0.0 );","    return 1.0 - abs( sign( x - y ) );","isStatic","emitterIDs","TypedArrayHelper","StaticDrawUsage","init","uniform float deltaTime;","typedArray","colorize","_incrementParticleCount","activeParticleCount","color","_center","setVec4Components","   return params.z;","onParticleSpawn has been removed. Please set properties directly to alter values at runtime.","exception","exports","       axis = normalize(axis);","params","float or(float a, float b) {","common","setVec2","           unpackColor( color.z ),","    gl_Position = projectionMatrix * mvPosition;","1838625HkkPbu","setAttribute","        float rowNorm = vSpriteSheet.w;","    return value;","       float s = sin(angle);","_axisSpread","ceil","fog_pars_fragment","alive","counter","      if( rotation.y == 0.0 ) {","    vec3 vel = getVelocity( age );","uniforms","Emitter already belongs to another group. Will not add to requested group.","drag","MathUtils","    gl_PointSize = pointSizePerspective;","bufferUpdateCount","ensureInstanceOf","      }","#endif","SHOULD_CALCULATE_SPRITE","_attributesNeedRefresh","abs","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","min","material","           unpackColor( color.w )","length","center","attribute vec4 opacity;","        float framesY = vSpriteSheet.y;","   c.g = g / PACKED_COLOR_DIVISOR;","info","TypedArrayConstructor","   c.b = b / PACKED_COLOR_DIVISOR;","activationIndex","randomFloat","    varying vec4 vSpriteSheet;","angle","_updateUniforms","group","setVec4","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","        pos.x += wiggleSin;","transparent","attribute vec4 params;","spread","11373180fXRgig","_createGetterSetters","indexOffset","           positionInTime,","particles, can support only","_spread","       float c = cos(angle);","SHOULD_ROTATE_TEXTURE","constructor","        pos.y += wiggleCos;","Emitter","AdditiveBlending","_poolCreationSettings","_assignAngleValue","multiplyScalar","       vec3 c = isAlive * getColorOverLifetime(","velocity","logdepthbuf_pars_vertex","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","runTime","_createBufferAttribute","_assignValue","normalize","rotateTexture","apply","attributes","604569luvjDE","defineProperty","resetFlags","spreadClamp","offset","       vec3 c = vec3(1.0);","types","      vec3 translated;","DISC","   }","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","_updateAttributeUpdateRange","   return velocity * age;","_onRemove","forceUpdateAll","_activateParticles","       );","fixedTimeStep","POSITIVE_INFINITY","flagUpdate","_assignForceValue","scale","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","Vector4","texture","ShaderMaterial","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","type","copy","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","#ifdef SHOULD_CALCULATE_SPRITE","Group","return (function() ","        float columnNorm = vSpriteSheet.z;","vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","randomise","183228VHEEiz","        float framesY = textureAnimation.y;","24mjsBWZ","indexOf","floatOverLifetime","_createNewWhenPoolEmpty","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","number","        float wiggleSin = isAlive * sin( wiggleAmount );","function","    pos += force;","_pool","float and(float a, float b) {","_static","        float columnNorm = column / framesX;","_value","#ifdef SHOULD_ROTATE_TEXTURE","BufferGeometry","cos","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );","emitters","uuid","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","_setBufferUpdateRanges","triggerPoolEmitter","    #endif","  return 1.0 - when_gt(x, y);","colorOverLifetime","992kyMZFV","while (true) {}","error","Argument is not instanceof SPE.Emitter:","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    }","string","uniform float runTime;","float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","        vSpriteSheet.w = rowNorm;","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","count","    highp float isAlive = when_gt( alive, 0.0 );","    return max(sign(x - y), 0.0);","      vec3 axis = unpackRotationAxis( rotation.x );","float when_gt(float x, float y) {","        float wiggleCos = isAlive * cos( wiggleAmount );","call","    varying float vAngle;","textureFrames","Color","8eXUZyw","undefined","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","arrayValuesAreEqual","shrink","updateRange","void main() {","max","       float x = gl_PointCoord.x - 0.5;"];return(u=function(){return t})()}function f(t,e){const i=u();return(f=function(t,e){return i[t-=277]})(t,e)}!function(){l(this,(function(){const t=f,e=new RegExp(t(730)),i=new RegExp(t(565),"i"),n=g(t(292));e[t(744)](n+"chain")&&i[t(744)](n+"input")?g():n("0")}))()}();const p=function(){let t=!0;return function(e,i){const n=t?function(){if(i){const t=i[f(384)](e,arguments);return i=null,t}}:function(){};return t=!1,n}}();p(void 0,(function(){const t=f;let e;try{e=Function(t(419)+t(719)+");")()}catch(o){e=window}const i=e.console=e[t(529)]||{},n=["log",t(667),t(345),t(454),t(303),t(715),"trace"];for(let s=0;s<n.length;s++){const e=p[t(368)].prototype[t(573)](p),o=n[s],r=i[o]||e;e[t(562)]=p[t(573)](p),e.toString=r[t(550)].bind(r),i[o]=e}}))();const d={distributions:{BOX:1,SPHERE:2,DISC:3,LINE:4},valueOverLifetimeLength:4};typeof define===h(432)&&define[h(642)]?define("spe",d):typeof exports!==h(474)&&typeof module!==h(474)&&(module[h(304)]=d),d.TypedArrayHelper=function(t,e,i,n){const o=h;this.componentSize=i||1,this[o(533)]=e||1,this[o(346)]=t||Float32Array,this[o(598)]=new t(e*this[o(661)]),this[o(362)]=n||0},d[h(290)].constructor=d[h(290)],d.TypedArrayHelper[h(601)].setSize=function(t,e){const i=h,n=this[i(598)][i(340)];return!e&&(t*=this.componentSize),t<n?this.shrink(t):t>n?this[i(716)](t):void console[i(345)](i(740),t+".","Will not resize.")},d[h(290)][h(601)].shrink=function(t){const e=h;return this[e(598)]=this[e(598)][e(490)](0,t),this[e(533)]=t,this},d[h(290)].prototype[h(716)]=function(t){const e=h,i=this[e(598)],n=new(this[e(346)])(t);return n[e(718)](i),this.array=n,this.size=t,this},d[h(290)][h(601)][h(698)]=function(t,e){const i=h;t*=this[i(661)],e*=this.componentSize;const n=[],o=this[i(598)],s=o[i(340)];for(let r=0;r<s;++r)(r<t||r>=e)&&n[i(596)](o[r]);return this.setFromArray(0,n),this},d[h(290)][h(601)][h(542)]=function(t,e){const i=h,n=t+e[i(340)];return n>this[i(598)][i(340)]?this[i(716)](n):n<this[i(598)][i(340)]&&this[i(477)](n),this[i(598)][i(718)](e,this[i(362)]+t),this},d.TypedArrayHelper[h(601)][h(309)]=function(t,e){return this[h(705)](t,e.x,e.y)},d[h(290)][h(601)][h(705)]=function(t,e,i){const n=h,o=this[n(598)],s=this.indexOffset+t*this[n(661)];return o[s]=e,o[s+1]=i,this},d[h(290)].prototype[h(556)]=function(t,e){return this.setVec3Components(t,e.x,e.y,e.z)},d[h(290)].prototype[h(569)]=function(t,e,i,n){const o=h,s=this[o(598)],r=this[o(362)]+t*this[o(661)];return s[r]=e,s[r+1]=i,s[r+2]=n,this},d[h(290)][h(601)][h(354)]=function(t,e){return this[h(300)](t,e.x,e.y,e.z,e.w)},d[h(290)][h(601)][h(300)]=function(t,e,i,n,o){const s=h,r=this.array,a=this[s(362)]+t*this[s(661)];return r[a]=e,r[a+1]=i,r[a+2]=n,r[a+3]=o,this},d.TypedArrayHelper[h(601)][h(671)]=function(t,e){const i=h;return this[i(542)](this[i(362)]+t*this[i(661)],e[i(650)])},d.TypedArrayHelper[h(601)][h(610)]=function(t,e){const i=h;return this[i(542)](this[i(362)]+t*this.componentSize,e[i(650)])},d[h(290)][h(601)].setColor=function(t,e){return this[h(569)](t,e.r,e.g,e.b)},d[h(290)][h(601)].setNumber=function(t,e){const i=h;return this.array[this.indexOffset+t*this[i(661)]]=e,this},d[h(290)].prototype[h(735)]=function(t){const e=h;return this[e(598)][this[e(362)]+t]},d[h(290)][h(601)][h(724)]=function(t){const e=h;return this.array[e(490)](this[e(362)]+t*this[e(661)])},d[h(688)]=function(t,e,i){const n=h,o=d.ShaderAttribute[n(622)];this[n(414)]=typeof t===n(458)&&o[n(282)](t)?t:"f",this[n(661)]=o[this[n(414)]],this.arrayType=i||Float32Array,this.typedArray=null,this[n(505)]=null,this[n(692)]=!!e,this[n(702)]=0,this[n(676)]=0},d[h(688)][h(368)]=d[h(688)],d[h(688)][h(622)]={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},d.ShaderAttribute[h(601)][h(567)]=function(t,e){const i=h;this[i(702)]=Math.min(t*this[i(661)],this[i(702)]*this.componentSize),this[i(676)]=Math[i(480)](e*this[i(661)],this[i(676)]*this[i(661)])},d.ShaderAttribute[h(601)][h(405)]=function(){const t=h,e=this[t(505)],i=e[t(478)];i.offset=this.updateMin,i[t(463)]=Math.min(this[t(676)]-this[t(702)]+this[t(661)],this[t(294)].array.length),e[t(494)]=!0},d[h(688)].prototype.resetUpdateRange=function(){this.updateMin=0,this.updateMax=0},d[h(688)][h(601)][h(495)]=function(){const i=h;this[i(505)].usage=this[i(692)]?t[i(551)]:e},d[h(688)][h(601)][h(698)]=function(t,e){const i=h;this[i(294)][i(698)](t,e),this[i(400)]()},d[h(688)].prototype[h(400)]=function(){const e=h;this.bufferAttribute[e(598)]=this.typedArray[e(598)],this[e(505)][e(478)][e(390)]=0,this[e(505)].updateRange[e(463)]=-1,this[e(505)][e(634)]=t[e(291)],this[e(505)].needsUpdate=!0},d[h(688)].prototype._ensureTypedArray=function(t){const e=h;null!==this[e(294)]&&this[e(294)][e(533)]===t*this.componentSize||(null!==this[e(294)]&&this[e(294)].size!==t?this[e(294)][e(585)](t):null===this[e(294)]&&(this[e(294)]=new(d[e(290)])(this[e(583)],t,this.componentSize)))},d[h(688)][h(601)][h(380)]=function(n){const o=h;if(this[o(547)](n),null!==this.bufferAttribute)return this[o(505)].array=this[o(294)][o(598)],parseFloat(i)>=81&&(this[o(505)][o(463)]=this[o(505)][o(598)].length/this[o(505)][o(544)]),void(this.bufferAttribute.needsUpdate=!0);this[o(505)]=new(t[o(588)])(this[o(294)].array,this[o(661)]),this[o(505)][o(634)]=this[o(692)]?t[o(551)]:e},d[h(688)][h(601)][h(674)]=function(){const t=h;return null===this.typedArray?0:this[t(294)][t(598)][t(340)]},d.shaderChunks={defines:[h(743),h(541)][h(709)]("\n"),uniforms:[h(293),h(459),"uniform sampler2D tex;","uniform vec4 textureAnimation;",h(673)][h(709)]("\n"),attributes:[h(646),"attribute vec3 velocity;","attribute vec4 rotation;",h(639),h(358),h(607),h(700),h(684),h(342)].join("\n"),varyings:["varying vec4 vColor;",h(439),h(470),h(332),h(417),h(350),h(332)].join("\n"),branchAvoidanceFunctions:[h(467),h(465),"}","float when_lt(float x, float y) {",h(512),"}","float when_eq( float x, float y ) {",h(287),"}",h(571),"  return 1.0 - when_lt(x, y);","}",h(653),h(450),"}",h(435),h(591),"}",h(307),h(734),"}"][h(709)]("\n"),unpackColor:["vec3 unpackColor( in float hex ) {","   vec3 c = vec3( 0.0 );",h(413),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );",h(665),h(344),h(347),h(611),"}"][h(709)]("\n"),unpackRotationAxis:[h(722),h(531),h(413),"   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );",h(665),h(344),h(347),h(649),h(579),"   return c;","}"].join("\n"),floatOverLifetime:[h(460),"    highp float value = 0.0;",h(446),h(682),h(549),h(707),"","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {",h(679),h(355),h(586),h(457),"",h(315),"}"][h(709)]("\n"),colorOverLifetime:[h(421),h(487),h(672),h(442),h(475),h(315),"}"][h(709)]("\n"),paramFetchingFunctions:[h(491),"   return params.x;","}","float getAge() {",h(515),"}","float getMaxAge() {",h(301),"}",h(615),h(711),"}"][h(709)]("\n"),forceFetchingFunctions:[h(629),h(608),"}",h(511),h(398),"}","vec3 getAcceleration( in float age ) {","   return acceleration.xyz * age;","}"][h(709)]("\n"),rotationFunctions:[h(625),h(519),h(305),h(316),h(366),h(552),"",h(589),h(462),"                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,",h(686),h(395),"",h(378),h(322),h(620),h(331),"",h(466),"      vec3 center = rotationCenter;",h(393),h(693),h(737),h(680),"      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );",h(656),h(695),h(336),h(395),h(332)][h(709)]("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","",h(553),h(481),h(561),h(574),h(510),h(409),h(449),"",h(554),h(630),h(343),h(420),h(314),h(396),h(429),h(449),"","    vec4 rotatedTexture = texture2D( tex, vUv );"][h(709)]("\n")},d[h(745)]={vertex:[d[h(733)][h(623)],d.shaderChunks[h(324)],d[h(733)][h(385)],d[h(733)].varyings,t[h(703)].common,t[h(703)][h(377)],t[h(703)].fog_pars_vertex,d[h(733)].branchAvoidanceFunctions,d[h(733)].unpackColor,d[h(733)].unpackRotationAxis,d[h(733)][h(427)],d[h(733)][h(451)],d[h(733)].paramFetchingFunctions,d.shaderChunks[h(678)],d.shaderChunks.rotationFunctions,h(479),h(664),h(727),h(524),h(530),h(464),h(520),h(525),h(431),h(468),h(449),h(323),h(685),h(286),"    vec3 pos = vec3( position );",h(456),h(578),h(643),"    force += accel * age;",h(433),"    #ifdef SHOULD_WIGGLE_PARTICLES",h(356),h(369),h(717),"    #endif","    #ifdef SHOULD_ROTATE_PARTICLES",h(528),h(449),h(283),h(501),h(599),h(584),h(527),h(699),"    #endif",h(604),h(558),h(375),h(363),"           unpackColor( color.x ),",h(603),h(310),h(339),h(402),"    #else",h(391),h(449),h(279),h(644),h(553),h(408),"    #endif",h(554),h(545),h(424),h(647),h(555),h(416),h(619),"        float row = floor( (frameNumber - column) / framesX );",h(437),h(614),h(595),"        vSpriteSheet.y = 1.0 / framesY;",h(486),h(461),h(449),h(328),h(311),t[h(703)][h(609)],n.fog_vertex,"}"][h(709)]("\n"),fragment:[d.shaderChunks[h(324)],t[h(703)][h(308)],t[h(703)][h(319)],t[h(703)][h(606)],d[h(733)].varyings,d[h(733)][h(638)],h(479),h(484),h(637),h(683),h(633),"    #endif",d[h(733)][h(383)],n.logdepthbuf_fragment,h(605),h(443),t[h(703)][h(575)],"}"][h(709)]("\n")},d.utils={types:{BOOLEAN:"boolean",STRING:"string",NUMBER:"number",OBJECT:"object"},ensureTypedArg:(t,e,i)=>typeof t===e?t:i,ensureArrayTypedArg(t,e,i){const n=h;if(Array[n(587)](t)){for(let n=t.length-1;n>=0;--n)if(typeof t[n]!==e)return i;return t}return this[n(690)](t,e,i)},ensureInstanceOf:(t,e,i)=>void 0!==e&&t instanceof e?t:i,ensureArrayInstanceOf(t,e,i){const n=h;if(Array[n(587)](t)){for(let o=t[n(340)]-1;o>=0;--o)if(void 0!==e&&t[o]instanceof e==!1)return i;return t}return this[n(330)](t,e,i)},ensureValueOverLifetimeCompliance(t,e,i){const n=h;e=e||3,i=i||3,!1===Array[n(587)](t[n(438)])&&(t[n(438)]=[t._value]),!1===Array.isArray(t[n(365)])&&(t[n(365)]=[t[n(365)]]);const o=this[n(504)](t[n(438)][n(340)],e,i),s=this[n(504)](t[n(365)][n(340)],e,i),r=Math.max(o,s);t[n(438)][n(340)]!==r&&(t[n(438)]=this.interpolateArray(t[n(438)],r)),t._spread.length!==r&&(t[n(365)]=this[n(660)](t[n(365)],r))},interpolateArray(t,e){const i=h,n=t[i(340)],o=["function"==typeof t[0].clone?t[0].clone():t[0]],s=(n-1)/(e-1);for(let r=1;r<e-1;++r){const e=r*s,n=Math[i(655)](e),a=Math[i(318)](e),c=e-n;o[r]=this.lerpTypeAgnostic(t[n],t[a],c)}return o[i(596)](typeof t[n-1][i(580)]===i(432)?t[n-1][i(580)]():t[n-1]),o},clamp:(t,e,i)=>Math[h(480)](e,Math.min(t,i)),zeroToEpsilon(t,e){let i=1e-5,n=t;return n=e?Math[h(602)]()*i*10:i,t<0&&t>-1e-5&&(n=-n),n},lerpTypeAgnostic(e,i,n){const r=h;let a,c=this[r(392)];return typeof e===c[r(500)]&&typeof i===c[r(500)]?e+(i-e)*n:e instanceof t[r(687)]&&i instanceof t[r(687)]?(a=e[r(580)](),a.x=this.lerp(e.x,i.x,n),a.y=this[r(488)](e.y,i.y,n),a):e instanceof o&&i instanceof t[r(677)]?(a=e[r(580)](),a.x=this[r(488)](e.x,i.x,n),a.y=this[r(488)](e.y,i.y,n),a.z=this[r(488)](e.z,i.z,n),a):e instanceof s&&i instanceof t[r(410)]?(a=e[r(580)](),a.x=this[r(488)](e.x,i.x,n),a.y=this[r(488)](e.y,i.y,n),a.z=this[r(488)](e.z,i.z,n),a.w=this[r(488)](e.w,i.w,n),a):e instanceof t[r(472)]&&i instanceof t[r(472)]?(a=e[r(580)](),a.r=this.lerp(e.r,i.r,n),a.g=this[r(488)](e.g,i.g,n),a.b=this.lerp(e.b,i.b,n),a):void console[r(667)](r(522),e,i)},lerp:(t,e,i)=>t+(e-t)*i,roundToNearestMultiple(t,e){let i=0;return 0===e?t:(i=Math[h(335)](t)%e,0===i?t:t<0?-(Math.abs(t)-i):t+e-i)},arrayValuesAreEqual(t){for(let e=0;e<t.length-1;++e)if(t[e]!==t[e+1])return!1;return!0},randomFloat:(t,e)=>t+e*(Math[h(602)]()-.5),randomVector3(t,e,i,n,o){const s=h;let r=i.x+(Math.random()*n.x-.5*n.x),a=i.y+(Math.random()*n.y-.5*n.y),c=i.z+(Math[s(602)]()*n.z-.5*n.z);o&&(r=.5*-o.x+this[s(278)](r,o.x),a=.5*-o.y+this[s(278)](a,o.y),c=.5*-o.z+this[s(278)](c,o.z)),t.typedArray[s(569)](e,r,a,c)},randomColor(t,e,i,n){const o=h;let s=i.r+Math[o(602)]()*n.x,r=i.g+Math[o(602)]()*n.y,a=i.b+Math[o(602)]()*n.z;s=this[o(504)](s,0,1),r=this[o(504)](r,0,1),a=this[o(504)](a,0,1),t.typedArray[o(569)](e,s,r,a)},randomColorAsHex:function(){const e=h,i=new(t[e(472)]);return function(t,n,o,s){const r=e,a=o[r(340)],c=[];for(let e=0;e<a;++e){const t=s[e];i[r(415)](o[e]),i.r+=Math[r(602)]()*t.x-.5*t.x,i.g+=Math.random()*t.y-.5*t.y,i.b+=Math[r(602)]()*t.z-.5*t.z,i.r=this[r(504)](i.r,0,1),i.g=this.clamp(i.g,0,1),i.b=this.clamp(i.b,0,1),c.push(i[r(503)]())}t[r(294)][r(300)](n,c[0],c[1],c[2],c[3])}}(),randomVector3OnLine(t,e,i,n){const o=h,s=i[o(580)]();s[o(488)](n,Math[o(602)]()),t[o(294)][o(569)](e,s.x,s.y,s.z)},randomVector3OnSphere(t,e,i,n,o,s,r,a){const c=h;let l=2*Math[c(602)]()-1,u=6.2832*Math[c(602)](),f=Math.sqrt(1-l*l),p=this[c(349)](n,o),d=0,m=0,g=0;r&&(p=Math.round(p/r)*r),d=f*Math[c(441)](u)*p,m=f*Math[c(720)](u)*p,g=l*p,d*=s.x,m*=s.y,g*=s.z,d+=i.x,m+=i.y,g+=i.z,t[c(294)][c(569)](e,d,m,g)},seededRandom(t){const e=1e4*Math[h(720)](t);return e-(0|e)},randomVector3OnDisc(t,e,i,n,o,s,r){const a=h;let c=6.2832*Math[a(602)](),l=Math.abs(this[a(349)](n,o)),u=0,f=0,p=0;r&&(l=Math[a(668)](l/r)*r),u=Math[a(441)](c)*l,f=Math[a(720)](c)*l,u*=s.x,f*=s.y,u+=i.x,f+=i.y,p+=i.z,t[a(294)].setVec3Components(e,u,f,p)},randomDirectionVector3OnSphere:function(){const e=h,i=new(t[e(677)]);return function(t,n,o,s,r,a,c,h){const l=e;i[l(415)](a),i.x-=o,i.y-=s,i.z-=r,i[l(382)]().multiplyScalar(-this[l(349)](c,h)),t[l(294)][l(569)](n,i.x,i.y,i.z)}}(),randomDirectionVector3OnDisc:function(){const t=new o;return function(e,i,n,o,s,r,a,c){const h=f;t.copy(r),t.x-=n,t.y-=o,t.z-=s,t[h(382)]()[h(374)](-this[h(349)](a,c)),e[h(294)].setVec3Components(i,t.x,t.y,0)}}(),getPackedRotationAxis:function(){const e=h,i=new(t[e(677)]),n=new(t[e(677)]),o=new(t[e(472)]),s=new(t[e(677)])(1,1,1);return function(t,r){const a=e;return i.copy(t)[a(382)](),n[a(415)](r)[a(382)](),i.x+=.5*-r.x+Math[a(602)]()*r.x,i.y+=.5*-r.y+Math[a(602)]()*r.y,i.z+=.5*-r.z+Math.random()*r.z,i.normalize().add(s)[a(374)](.5),o.setRGB(i.x,i.y,i.z),o.getHex()}}()},d[h(418)]=function(e){const i=h,n=d[i(648)],o=n.types;(e=n[i(690)](e,o[i(499)],{})).texture=n[i(690)](e[i(411)],o.OBJECT,{}),this[i(445)]=t[i(327)][i(506)](),this[i(403)]=n[i(690)](e[i(403)],o.NUMBER,.016),this[i(411)]=n[i(330)](e[i(411)][i(621)],r,null),this[i(471)]=n[i(330)](e.texture[i(669)],a,new a(1,1)),this.textureFrameCount=n[i(690)](e[i(411)][i(723)],o.NUMBER,this[i(471)].x*this[i(471)].y),this.textureLoop=n[i(690)](e[i(411)].loop,o[i(500)],1),this[i(471)].max(new a(1,1)),this[i(523)]=n[i(690)](e[i(523)],o[i(651)],!0),this.colorize=n.ensureTypedArg(e[i(295)],o[i(651)],!0),this.maxParticleCount=n.ensureTypedArg(e[i(496)],o[i(500)],null),this[i(696)]=n[i(690)](e[i(696)],o[i(500)],t[i(371)]),this[i(357)]=n[i(690)](e[i(357)],o[i(651)],!0),this[i(729)]=parseFloat(n.ensureTypedArg(e[i(729)],o[i(500)],0)),this[i(521)]=n[i(690)](e[i(521)],o[i(651)],!1),this[i(657)]=n[i(690)](e[i(657)],o[i(651)],!0),this.fog=n[i(690)](e[i(612)],o[i(651)],!0),this.scale=n[i(690)](e[i(407)],o[i(500)],300),this[i(444)]=[],this.emitterIDs=[],this[i(434)]=[],this[i(372)]=null,this[i(428)]=0,this._attributesNeedRefresh=!1,this[i(618)]=!1,this.particleCount=0,this[i(324)]={tex:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new s(this[i(471)].x,this.textureFrames.y,this[i(726)],Math.max(Math[i(335)](this[i(482)]),1))},fogColor:{type:"c",value:this.fog?new(t[i(472)]):null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this[i(407)]}},this[i(623)]={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this[i(295)],VALUE_OVER_LIFETIME_LENGTH:d[i(281)],SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this[i(471)].x>1||this[i(471)].y>1},this[i(385)]={position:new(d[i(688)])("v3",!0),acceleration:new(d[i(688)])("v4",!0),velocity:new(d[i(688)])("v3",!0),rotation:new d.ShaderAttribute("v4",!0),rotationCenter:new(d[i(688)])("v3",!0),params:new d.ShaderAttribute("v4",!0),size:new d.ShaderAttribute("v4",!0),angle:new(d[i(688)])("v4",!0),color:new(d[i(688)])("v4",!0),opacity:new(d[i(688)])("v4",!0)},this[i(517)]=Object.keys(this[i(385)]),this[i(581)]=this[i(517)].length,this[i(338)]=new(t[i(412)])({uniforms:this.uniforms,vertexShader:d[i(745)][i(526)],fragmentShader:d[i(745)][i(659)],blending:this[i(696)],transparent:this[i(357)],alphaTest:this[i(729)],depthWrite:this[i(521)],depthTest:this.depthTest,defines:this.defines,fog:this[i(612)]}),this.geometry=new(t[i(440)]),this.mesh=new(t[i(492)])(this[i(566)],this[i(338)]),null===this[i(496)]&&console[i(667)](i(592))},d[h(418)][h(368)]=d[h(418)],d[h(418)][h(601)][h(564)]=function(){const t=h;let e,i=this[t(444)],n=i[t(340)]-1,o=this[t(623)];for(;n>=0;--n)e=i[n],!o[t(333)]&&(o[t(367)]=o[t(367)]||!!Math[t(480)](Math[t(480)].apply(null,e[t(351)][t(621)]),Math.max[t(384)](null,e.angle.spread))),o[t(489)]=o[t(489)]||!!Math.max(e[t(277)].angle,e[t(277)][t(681)]),o.SHOULD_WIGGLE_PARTICLES=o[t(721)]||!!Math[t(480)](e[t(507)][t(621)],e[t(507)][t(359)]);this.material[t(494)]=!0},d[h(418)][h(601)]._applyAttributesToGeometry=function(){const t=h;let e,i,n=this[t(385)],o=this[t(566)],s=o[t(385)];for(const r in n)n.hasOwnProperty(r)&&(e=n[r],i=s[r],i?i[t(598)]=e[t(294)][t(598)]:o[t(313)](r,e[t(505)]),e.bufferAttribute[t(494)]=!0);this[t(566)][t(731)](0,this.particleCount)},d[h(418)][h(601)][h(635)]=function(t){const e=h;if(t instanceof d[e(370)]==!1)return void console[e(454)](e(570),t);if(this[e(289)][e(426)](t[e(445)])>-1)return void console.error("Emitter already exists in this group. Will not add again.");if(null!==t.group)return void console[e(454)](e(325));const i=this[e(385)],n=this[e(590)],o=n+t.particleCount;this[e(590)]=o,null!==this.maxParticleCount&&this[e(590)]>this[e(496)]&&console[e(667)](e(497),this[e(590)],e(364),this[e(496)]),t[e(535)](t.maxAge[e(438)]+t[e(658)]._spread),t._setBufferUpdateRanges(this.attributeKeys),t._setAttributeOffset(n),t[e(353)]=this,t[e(385)]=this.attributes;for(const s in i)i.hasOwnProperty(s)&&i[s]._createBufferAttribute(null!==this[e(496)]?this.maxParticleCount:this[e(590)]);for(let s=n;s<o;++s)t._assignPositionValue(s),t[e(406)](s,e(376)),t[e(406)](s,e(582)),t[e(708)](s,e(632)),t._assignAbsLifetimeValue(s,e(533)),t[e(373)](s),t[e(559)](s),t[e(563)](s),t[e(728)](s);return this[e(742)](),this[e(444)][e(596)](t),this[e(289)].push(t[e(445)]),this._updateDefines(t),this[e(338)][e(494)]=!0,this.geometry.needsUpdate=!0,this[e(334)]=!0,this},d[h(418)].prototype[h(594)]=function(t){const e=h,i=this[e(289)][e(426)](t.uuid);if(t instanceof d[e(370)]==!1)return void console.error(e(570),t);if(-1===i)return void console[e(454)](e(532));const n=t[e(539)],o=n+t[e(590)],s=this.attributes[e(306)][e(294)];for(let r=n;r<o;++r)s[e(598)][4*r]=0,s[e(598)][4*r+1]=0;this[e(444)][e(698)](i,1),this[e(289)][e(698)](i,1);for(const r in this[e(385)])this[e(385)][e(282)](r)&&this[e(385)][r].splice(n,o);this[e(590)]-=t[e(590)],t[e(399)](),this[e(334)]=!0},d[h(418)][h(601)][h(516)]=function(){const t=h,e=this._pool,i=this[t(428)];if(e.length)return e[t(636)]();if(i){const e=new(d[t(370)])(this._poolCreationSettings);return this.addEmitter(e),e}return null},d[h(418)][h(601)][h(706)]=function(t){const e=h;if(t instanceof d[e(370)]!=!1)return t.reset(),this[e(434)].unshift(t),this;console[e(454)](e(455),t)},d[h(418)][h(601)][h(713)]=function(){return this._pool},d[h(418)][h(601)][h(576)]=function(t,e,i){const n=h;let o;this[n(372)]=e,this[n(428)]=!!i;for(let s=0;s<t;++s)o=Array[n(587)](e)?new(d[n(370)])(e[s]):new(d[n(370)])(e),this[n(635)](o),this[n(706)](o);return this},d.Group.prototype[h(697)]=function(t){const e=h,i=this[e(516)](),n=this;if(null!==i)return t instanceof o&&(i[e(514)][e(621)][e(415)](t),i[e(514)][e(621)]=i.position[e(621)]),i[e(738)](),setTimeout((()=>{const t=e;i.disable(),n[t(706)](i)}),1e3*Math[e(480)](i[e(518)],i[e(658)][e(621)]+i.maxAge[e(359)])),this;console[e(616)](e(714))},d[h(418)][h(601)][h(448)]=function(t,e){const i=h;if(typeof t===i(430)&&t>1)for(let n=0;n<t;++n)this[i(697)](e);else this[i(697)](e);return this},d[h(418)][h(601)][h(352)]=function(t){const e=h;this[e(324)][e(379)].value+=t,this.uniforms.deltaTime[e(621)]=t},d[h(418)][h(601)]._resetBufferRanges=function(){const t=h;let e=this[t(517)],i=this.attributeCount-1,n=this[t(385)];for(;i>=0;--i)n[e[i]].resetUpdateRange()},d[h(418)].prototype[h(666)]=function(t){const e=h;let i,n,o,s=this[e(517)],r=this[e(581)]-1,a=this[e(385)],c=t[e(624)];for(;r>=0;--r)i=s[r],n=c[i],o=a[i],o.setUpdateRange(n.min,n.max),o[e(405)]()},d[h(418)][h(601)].tick=function(t){const e=h;var i=this[e(444)],n=i.length,o=t||this[e(403)],s=this[e(517)],r=this[e(385)];if(this[e(352)](o),this[e(546)](),0!==n||!1!==this[e(334)]||!1!==this[e(618)]){for(var a,c=0;c<n;++c)(a=i[c])[e(736)](o),this[e(666)](a);if(!0===this._attributesNeedDynamicReset){for(c=this[e(581)]-1;c>=0;--c)r[s[c]][e(495)]();this[e(618)]=!1}if(!0===this[e(334)]){for(c=this[e(581)]-1;c>=0;--c)r[s[c]][e(400)]();this[e(334)]=!1,this._attributesNeedDynamicReset=!0}}},d.Group.prototype[h(568)]=function(){const t=h;return this[t(566)][t(568)](),this.material[t(568)](),this},d.Emitter=function(e){const i=h,n=d[i(648)],s=n[i(392)],r=d[i(281)];(e=n[i(690)](e,s[i(499)],{})).position=n.ensureTypedArg(e.position,s[i(499)],{}),e[i(376)]=n.ensureTypedArg(e[i(376)],s.OBJECT,{}),e[i(582)]=n.ensureTypedArg(e.acceleration,s[i(499)],{}),e[i(613)]=n[i(690)](e.radius,s[i(499)],{}),e[i(326)]=n[i(690)](e.drag,s[i(499)],{}),e.rotation=n[i(690)](e[i(277)],s[i(499)],{}),e[i(298)]=n[i(690)](e[i(298)],s[i(499)],{}),e.opacity=n.ensureTypedArg(e[i(632)],s[i(499)],{}),e[i(533)]=n[i(690)](e[i(533)],s[i(499)],{}),e[i(351)]=n[i(690)](e[i(351)],s.OBJECT,{}),e.wiggle=n.ensureTypedArg(e[i(507)],s[i(499)],{}),e[i(658)]=n.ensureTypedArg(e[i(658)],s[i(499)],{}),e.onParticleSpawn&&console[i(667)](i(302)),this[i(445)]=t[i(327)][i(506)](),this[i(414)]=n[i(690)](e[i(414)],s.NUMBER,d.distributions.BOX),this[i(514)]={_value:n[i(330)](e.position[i(621)],t[i(677)],new(t[i(677)])),_spread:n[i(330)](e[i(514)][i(359)],t[i(677)],new(t[i(677)])),_spreadClamp:n[i(330)](e.position[i(389)],o,new(t[i(677)])),_distribution:n[i(690)](e[i(514)].distribution,s[i(500)],this[i(414)]),_randomise:n[i(690)](e[i(514)][i(422)],s.BOOLEAN,!1),_radius:n[i(690)](e[i(514)].radius,s[i(500)],10),_radiusScale:n[i(330)](e.position[i(662)],t[i(677)],new(t[i(677)])(1,1,1)),_distributionClamp:n[i(690)](e[i(514)][i(534)],s.NUMBER,0)},this[i(376)]={_value:n[i(330)](e[i(376)].value,t[i(677)],new(t[i(677)])),_spread:n.ensureInstanceOf(e[i(376)][i(359)],t[i(677)],new(t[i(677)])),_distribution:n.ensureTypedArg(e.velocity[i(704)],s[i(500)],this.type),_randomise:n[i(690)](e[i(514)][i(422)],s.BOOLEAN,!1)},this[i(582)]={_value:n[i(330)](e[i(582)][i(621)],t[i(677)],new(t[i(677)])),_spread:n[i(330)](e[i(582)][i(359)],t[i(677)],new(t[i(677)])),_distribution:n[i(690)](e.acceleration[i(704)],s[i(500)],this.type),_randomise:n.ensureTypedArg(e.position[i(422)],s[i(651)],!1)},this[i(326)]={_value:n.ensureTypedArg(e[i(326)][i(621)],s.NUMBER,0),_spread:n.ensureTypedArg(e[i(326)][i(359)],s[i(500)],0),_randomise:n.ensureTypedArg(e[i(514)].randomise,s[i(651)],!1)},this[i(507)]={_value:n[i(690)](e.wiggle[i(621)],s[i(500)],0),_spread:n[i(690)](e[i(507)].spread,s.NUMBER,0)},this[i(277)]={_axis:n[i(330)](e[i(277)][i(732)],t[i(677)],new o(0,1,0)),_axisSpread:n[i(330)](e[i(277)].axisSpread,o,new(t[i(677)])),_angle:n[i(690)](e[i(277)][i(351)],s[i(500)],0),_angleSpread:n[i(690)](e[i(277)][i(681)],s[i(500)],0),_static:n[i(690)](e[i(277)][i(628)],s[i(651)],!1),_center:n[i(330)](e.rotation[i(341)],t[i(677)],this[i(514)][i(438)].clone()),_randomise:n[i(690)](e[i(514)][i(422)],s[i(651)],!1)},this.maxAge={_value:n[i(690)](e[i(658)][i(621)],s.NUMBER,2),_spread:n[i(690)](e[i(658)][i(359)],s[i(500)],0)},this[i(298)]={_value:n[i(577)](e[i(298)][i(621)],c,new(t[i(472)])),_spread:n[i(577)](e[i(298)][i(359)],t[i(677)],new(t[i(677)])),_randomise:n.ensureTypedArg(e[i(514)][i(422)],s[i(651)],!1)},this[i(632)]={_value:n[i(543)](e[i(632)].value,s[i(500)],1),_spread:n[i(543)](e[i(632)][i(359)],s[i(500)],0),_randomise:n[i(690)](e.position.randomise,s[i(651)],!1)},this.size={_value:n[i(543)](e.size[i(621)],s.NUMBER,1),_spread:n[i(543)](e.size[i(359)],s[i(500)],0),_randomise:n[i(690)](e[i(514)][i(422)],s[i(651)],!1)},this[i(351)]={_value:n.ensureArrayTypedArg(e.angle[i(621)],s[i(500)],0),_spread:n[i(543)](e[i(351)][i(359)],s[i(500)],0),_randomise:n[i(690)](e.position[i(422)],s[i(651)],!1)},this[i(590)]=n[i(690)](e.particleCount,s.NUMBER,100),this[i(518)]=n[i(690)](e.duration,s[i(500)],null),this[i(288)]=n.ensureTypedArg(e.isStatic,s[i(651)],!1),this[i(572)]=n[i(690)](e.activeMultiplier,s[i(500)],1),this[i(640)]=n[i(690)](e.direction,s[i(500)],1),this[i(320)]=n.ensureTypedArg(e[i(320)],s[i(651)],!0),this.particlesPerSecond=0,this[i(348)]=0,this[i(539)]=0,this.attributeEnd=0,this[i(712)]=0,this.activeParticleCount=0,this[i(353)]=null,this.attributes=null,this.paramsArray=null,this[i(388)]={position:n[i(690)](e.position[i(422)],s[i(651)],!1)||n[i(690)](e[i(613)][i(422)],s.BOOLEAN,!1),velocity:n.ensureTypedArg(e[i(376)][i(422)],s[i(651)],!1),acceleration:n[i(690)](e[i(582)][i(422)],s[i(651)],!1)||n[i(690)](e[i(326)][i(422)],s[i(651)],!1),rotation:n[i(690)](e[i(277)].randomise,s[i(651)],!1),rotationCenter:n.ensureTypedArg(e[i(277)][i(422)],s[i(651)],!1),size:n[i(690)](e[i(533)].randomise,s.BOOLEAN,!1),color:n[i(690)](e[i(298)][i(422)],s.BOOLEAN,!1),opacity:n[i(690)](e[i(632)][i(422)],s[i(651)],!1),angle:n.ensureTypedArg(e[i(351)][i(422)],s[i(651)],!1)},this.updateFlags={},this.updateCounts={},this[i(641)]={maxAge:i(306),position:i(514),velocity:"velocity",acceleration:i(582),drag:i(582),wiggle:i(306),rotation:"rotation",size:i(533),color:i(298),opacity:i(632),angle:"angle"};for(const t in this[i(641)])this[i(641)].hasOwnProperty(t)&&(this.updateCounts[this[i(641)][t]]=0,this[i(502)][this.updateMap[t]]=!1,this[i(361)](this[t],t));this[i(624)]={},this.attributeKeys=null,this.attributeCount=0,n.ensureValueOverLifetimeCompliance(this[i(298)],r,r),n[i(597)](this[i(632)],r,r),n.ensureValueOverLifetimeCompliance(this[i(533)],r,r),n[i(597)](this.angle,r,r)},d[h(370)][h(368)]=d[h(370)],d[h(370)].prototype._createGetterSetters=function(t,e){const i=h,n=this;for(const o in t)if(t[i(282)](o)){const s=o[i(675)]("_","");Object[i(387)](t,s,{get:function(t){return function(){return this[t]}}(o),set:function(t){return function(i){const o=f,s=n[o(641)][e],r=this[t],a=d[o(281)];"_rotationCenter"===t?(n[o(502)].rotationCenter=!0,n[o(701)].rotationCenter=0):t===o(536)?n[o(388)][s]=i:(n.updateFlags[s]=!0,n[o(701)][s]=0),n[o(353)][o(564)](),this[t]=i,Array[o(587)](r)&&d[o(648)][o(597)](n[e],a,a)}}(o)})}},d[h(370)][h(601)][h(447)]=function(t){const e=h;this.attributeKeys=t,this.attributeCount=t.length;for(let i=this[e(581)]-1;i>=0;--i)this[e(624)][t[i]]={min:Number[e(404)],max:Number[e(560)]}},d[h(370)][h(601)][h(535)]=function(t){const e=h,i=this[e(590)];this[e(518)]?this[e(485)]=i/(t<this[e(518)]?t:this.duration):this[e(485)]=i/t},d.Emitter[h(601)][h(493)]=function(t){const e=h;this[e(539)]=t,this.activationIndex=t,this[e(627)]=t+this[e(590)]},d[h(370)][h(601)][h(381)]=function(t,e){const i=h;switch(t){case"position":this[i(645)](e);break;case i(376):case i(582):this._assignForceValue(e,t);break;case i(533):case"opacity":this[i(708)](e,t);break;case i(351):this[i(373)](e);break;case i(306):this[i(563)](e);break;case i(277):this[i(559)](e);break;case i(298):this[i(728)](e)}},d[h(370)][h(601)][h(645)]=function(t){const e=h,i=d.distributions,n=d[e(648)],o=this[e(514)],s=this[e(385)][e(514)],r=o[e(438)],a=o[e(365)];switch(o._distribution){case i.BOX:n[e(498)](s,t,r,a,o[e(280)]);break;case i[e(741)]:n.randomVector3OnSphere(s,t,r,o[e(537)],o[e(365)].x,o[e(284)],o._spreadClamp.x,o._distributionClamp||this[e(590)]);break;case i[e(394)]:n.randomVector3OnDisc(s,t,r,o[e(537)],o._spread.x,o._radiusScale,o[e(280)].x);break;case i[e(710)]:n[e(508)](s,t,r,a)}},d[h(370)][h(601)][h(406)]=function(t,e){const i=h;let n,o,s,r,a,c=d[i(663)],l=d[i(648)],u=this[e],f=u[i(438)],p=u[i(365)];switch(u[i(652)]){case c.BOX:l[i(498)](this[i(385)][e],t,f,p);break;case c[i(741)]:n=this[i(385)][i(514)].typedArray[i(598)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(694)](this.attributes[e],t,o,s,r,this[i(514)][i(438)],u[i(438)].x,u[i(365)].x);break;case c[i(394)]:n=this.attributes.position[i(294)][i(598)],a=3*t,o=n[a],s=n[a+1],r=n[a+2],l[i(631)](this[i(385)][e],t,o,s,r,this.position[i(438)],u[i(438)].x,u[i(365)].x);break;case c[i(710)]:l.randomVector3OnLine(this[i(385)][e],t,f,p)}if(e===i(582)){const e=l[i(504)](l.randomFloat(this[i(326)][i(438)],this.drag[i(365)]),0,1);this[i(385)][i(582)][i(294)][i(598)][4*t+3]=e}},d[h(370)][h(601)][h(708)]=function(t,e){const i=h;let n,o=this[i(385)][e][i(294)],s=this[e],r=d[i(648)];r[i(476)](s[i(438)])&&r[i(476)](s[i(365)])?(n=Math[i(335)](r[i(349)](s._value[0],s[i(365)][0])),o[i(300)](t,n,n,n,n)):o[i(300)](t,Math[i(335)](r[i(349)](s[i(438)][0],s._spread[0])),Math.abs(r.randomFloat(s[i(438)][1],s[i(365)][1])),Math[i(335)](r[i(349)](s[i(438)][2],s[i(365)][2])),Math[i(335)](r[i(349)](s[i(438)][3],s[i(365)][3])))},d.Emitter[h(601)]._assignAngleValue=function(t){const e=h;let i,n=this[e(385)][e(351)].typedArray,o=this[e(351)],s=d[e(648)];s[e(476)](o._value)&&s[e(476)](o[e(365)])?(i=s[e(349)](o[e(438)][0],o[e(365)][0]),n[e(300)](t,i,i,i,i)):n[e(300)](t,s[e(349)](o[e(438)][0],o[e(365)][0]),s[e(349)](o._value[1],o[e(365)][1]),s.randomFloat(o[e(438)][2],o._spread[2]),s[e(349)](o._value[3],o[e(365)][3]))},d[h(370)][h(601)][h(563)]=function(t){const e=h;this.attributes[e(306)][e(294)].setVec4Components(t,this[e(288)]?1:0,0,Math[e(335)](d[e(648)].randomFloat(this[e(658)][e(438)],this[e(658)][e(365)])),d[e(648)][e(349)](this[e(507)]._value,this[e(507)][e(365)]))},d[h(370)].prototype[h(559)]=function(t){const e=h;this[e(385)].rotation[e(294)][e(569)](t,d[e(648)][e(617)](this[e(277)]._axis,this[e(277)][e(317)]),d.utils[e(349)](this[e(277)]._angle,this[e(277)]._angleSpread),this[e(277)][e(436)]?0:1),this[e(385)][e(540)][e(294)][e(556)](t,this.rotation[e(299)])},d[h(370)][h(601)]._assignColorValue=function(t){const e=h;d[e(648)][e(689)](this[e(385)][e(298)],t,this.color[e(438)],this[e(298)][e(365)])},d[h(370)][h(601)][h(483)]=function(t){const e=h;let i,n,o=this[e(388)],s=this[e(502)],r=this[e(701)],a=this[e(517)];for(let c=this[e(581)]-1;c>=0;--c)i=a[c],n=s[i],!0!==o[i]&&!0!==n||(this[e(381)](i,t),this._updateAttributeUpdateRange(i,t),!0===n&&r[i]===this[e(590)]?(s[i]=!1,r[i]=0):1==n&&++r[i])},d[h(370)][h(601)][h(397)]=function(t,e){const i=h,n=this.bufferUpdateRanges[t];n[i(337)]=Math[i(337)](e,n[i(337)]),n.max=Math[i(480)](e,n[i(480)])},d.Emitter[h(601)]._resetBufferRanges=function(){const t=h;let e,i=this.bufferUpdateRanges,n=this[t(600)],o=this[t(329)]-1;for(;o>=0;--o)e=n[o],i[e][t(337)]=Number[t(404)],i[e][t(480)]=Number.NEGATIVE_INFINITY},d[h(370)][h(601)][h(399)]=function(){const t=h;this[t(485)]=0,this[t(539)]=0,this[t(348)]=0,this[t(297)]=0,this[t(353)]=null,this[t(385)]=null,this[t(691)]=null,this.age=0},d[h(370)].prototype._decrementParticleCount=function(){--this[h(297)]},d[h(370)][h(601)][h(296)]=function(){++this[h(297)]},d[h(370)].prototype[h(285)]=function(t,e,i,n){const o=h;for(var s,r,a,c,l=e-1;l>=t;--l)0!==(c=i[s=4*l])&&(a=i[s+1],r=i[s+2],1===this[o(640)]?(a+=n)>=r&&(a=0,c=0,this[o(593)]()):(a-=n)<=0&&(a=r,c=0,this[o(593)]()),i[s]=c,i[s+1]=a,this._updateAttributeUpdateRange("params",l))},d[h(370)].prototype[h(401)]=function(t,e,i,n){const o=h,s=this[o(640)];for(var r,a,c=t;c<e;++c)0!=i[r=4*c]&&1!==this.particleCount||(this._incrementParticleCount(),i[r]=1,this[o(483)](c),a=n*(c-t),i[r+1]=-1===s?i[r+2]-a:a,this[o(397)]("params",c))},d[h(370)][h(601)][h(736)]=function(t){const e=h;if(this.isStatic)return;null===this[e(691)]&&(this[e(691)]=this[e(385)][e(306)][e(294)][e(598)]);const i=this[e(539)],n=i+this[e(590)],o=this[e(691)],s=this[e(485)]*this.activeMultiplier*t,r=this[e(348)];if(this[e(546)](),this[e(285)](i,n,o,t),!1===this[e(320)])return void(this[e(712)]=0);if(null!==this[e(518)]&&this[e(712)]>this[e(518)])return this[e(320)]=!1,void(this[e(712)]=0);const a=1===this[e(590)]?r:0|r,c=Math[e(337)](a+s,this[e(627)]),l=c-this[e(348)]|0,u=l>0?t/l:0;this[e(401)](a,c,o,u),this.activationIndex+=s,this.activationIndex>n&&(this[e(348)]=i),this[e(712)]+=t},d[h(370)][h(601)][h(509)]=function(t){const e=h;if(this[e(712)]=0,this.alive=!1,!0===t){const t=this[e(539)],o=t+this[e(590)],s=this[e(691)],r=this[e(385)][e(306)][e(505)];for(var i,n=o-1;n>=t;--n)s[i=4*n]=0,s[i+1]=0;r[e(478)][e(390)]=0,r[e(478)][e(463)]=-1,r[e(494)]=!0}return this},d[h(370)][h(601)][h(738)]=function(){return this[h(320)]=!0,this},d[h(370)].prototype[h(725)]=function(){return this.alive=!1,this},d.Emitter[h(601)][h(739)]=function(){const t=h;return null!==this[t(353)]?this.group[t(594)](this):console[t(454)](t(557)),this};const m=d;function g(t){function e(t){const i=f;if(typeof t===i(458))return function(t){}[i(368)](i(453)).apply(i(321));1!==(""+t/t)[i(340)]||t%20==0?function(){return!0}[i(368)](i(626)+i(513))[i(469)](i(654)):function(){return!1}[i(368)](i(626)+i(513)).apply("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(i){}}export{m as _};

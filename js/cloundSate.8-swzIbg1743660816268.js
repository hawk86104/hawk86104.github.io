import{a as e,m as a,o as t}from"./@tresjs.zc7faK4J1743660816268.js";import{h as o,U as r}from"./three-tile.jByjiGER1743660816268.js";import{s,a as n,c as i,i as l}from"./informationDiv.1CFxbEEa1743660816268.js";import{d as p,a4 as c,w as m,o as u,H as d,N as g,u as h,r as _,b as f,f as S,g as v,j as y,m as j,al as b,F as x,e as D,aj as w,ak as I}from"./@vue.B5PFBfKs1743660816268.js";import{bn as M,a9 as T,ab as F,C as G,b as B}from"./three.2wx8FU0g1743660816268.js";import{P as L}from"./tweakpane.ivGeiIdz1743660816268.js";import"./postprocessing.ApTwx-211743660816268.js";import"./@vueuse.jtbb8I7w1743660816268.js";/* empty css                                                                                    */import"./@fesjs.9AUNBPBQ1743660816268.js";import"./vue-router.K4ys0Z-O1743660816268.js";import"./lodash-es.IJc9G_SW1743660816268.js";import"./@qlin.o0hjOMCg1743660816268.js";import"./pinia.0dYyFDku1743660816268.js";import"./@floating-ui.HzHndBae1743660816268.js";import"./@juggle.4EyLec-41743660816268.js";const W=["position"],k=["scale","material","rotateX","position-y"],C=p({__name:"cloundSateShow",props:{map:{},height:{default:100},color:{default:"#cccccc"},opacity:{default:.6}},async setup(a){let t,o;const r=a,n=new M({displacementMap:new T,transparent:!0,side:F,opacity:r.opacity,color:new G(r.color)});n.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * 0.5 + 0.0 );"),e.fragmentShader=e.fragmentShader.replace("#include <alphamap_fragment>","\n            #include <alphamap_fragment>\n            float h = texture2D(map, vMapUv ).a;\n            diffuseColor.rgb *= h;\n            diffuseColor.a = clamp(diffuseColor.a * 2.0, 0.0, 1.0);\n            ")};const i=r.map.geo2pos(new B(105,34,0));i.applyMatrix4(r.map.matrix);const l=s(r.map,{x:67,y:11},{x:140,y:57},r.height),p=["https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171300.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171400.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171500.HDF.png","https://opensource.cdn.icegl.cn/images/simpleGIS/SATE_L1_F2G_VISSR_MWB_NOM_FDI-201906171600.HDF.png"];let _=0;const f=([t,o]=c((()=>e(p))),t=await t,o(),t);n.map=f[_],m((()=>[r.color,r.opacity]),(([e,a])=>{n.color.setStyle(e),n.opacity=a}));let S=null,v=!1;return v?(clearInterval(S),S=null,v=!1):(S=setInterval((()=>{_=_<p.length-1?_+1:0,n.map=f[_],n.needsUpdate=!0,console.log(_)}),1e3),v=!0),(e,a)=>(u(),d("TresGroup",{position:[...h(i)]},[g("TresMesh",{scale:[h(l).x,h(l).y,e.height],material:h(n),rotateX:-Math.PI/2,renderOrder:9999,"position-y":e.height/5},a[0]||(a[0]=[g("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)]),8,k)],8,W))}}),N=["object"],A=p({__name:"mapBoxShow2",setup(e){const t=_({height:500,color:"#cccccc",opacity:.6}),s=new L({title:"参数"});s.addBinding(t,"color",{label:"颜色"}),s.addBinding(t,"height",{label:"高度",min:10,max:5e3,step:10}),s.addBinding(t,"opacity",{label:"透明度",min:0,max:1,step:.1});const l=new o.MapBoxSource({token:"pk.eyJ1IjoiaGF3azg2MTA0IiwiYSI6ImNrbTQ3cWtyeTAxejEzMHBtcW42bmc0N28ifQ.bvS9U_yWdHDh41jzaDS1dw",dataType:"terrain-rgb",style:"mapbox.terrain-rgb",maxLevel:15}),p=new r({imgSource:[new o.GDSource({style:"6"}),new o.GDSource({style:"8"})],demSource:l,lon0:90,minLevel:2,maxLevel:20});p.rotateX(-Math.PI/2);const c=new B(105,34,0),D=new B(110,0,1e4),w=p.localToWorld(p.geo2pos(c)),I=p.localToWorld(p.geo2pos(D)),M=f(),{camera:T,controls:F,scene:G,renderer:W}=a();return T.value&&T.value.position.copy(I),m((()=>F.value),(e=>{e&&(e.target.copy(w),i(e,T.value,G.value))})),m((()=>M.value),(e=>{e&&e.target.position.copy(w)})),n(T.value,W.value.domElement,p),(e,a)=>(u(),d(x,null,[g("TresDirectionalLight",{ref_key:"tdLight",ref:M,position:[0,2e3,1e3],intensity:1},null,512),g("primitive",{object:h(p)},null,8,N),(u(),S(b,null,{default:v((()=>[y(C,j({map:h(p)},t),null,16,["map"])])),_:1}))],64))}}),H=p({__name:"cloundSate",setup(e){const a=_({clearColor:"#dbf0ff",alpha:!0,antialias:!1,logarithmicDepthBuffer:!0,precision:"highp"}),o=_({enableDamping:!0,makeDefault:!0,screenSpacePanning:!1,dampingFactor:.035,keyPanSpeed:5});return(e,r)=>{const s=D("TresCanvas");return u(),d(x,null,[y(s,j(a,{"window-size":""}),{default:v((()=>[r[0]||(r[0]=g("TresPerspectiveCamera",{position:[0,12,0],fov:70,near:.1,far:5e4},null,-1)),y(h(t),w(I(o)),null,16),r[1]||(r[1]=g("TresAmbientLight",{intensity:1},null,-1)),y(A)])),_:1},16),y(l)],64)}}});export{H as default};

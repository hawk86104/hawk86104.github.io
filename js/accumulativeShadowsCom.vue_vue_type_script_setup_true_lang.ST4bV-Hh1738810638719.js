import{_ as t,f as n}from"./three.6w8Allze1738810638719.js";import{m as e}from"./@tresjs.8axf5yqM1738810638719.js";import{d as a,P as o}from"./@pmndrs.lrUatEzS1738810638719.js";import{d as r,b as s,w as i,a2 as c,o as l,H as u,N as p,aj as f,ak as h}from"./@vue.NRI7TcgI1738810638719.js";const d=y;!function(t,n){const e=y,a=g();for(;;)try{if(393943===-parseInt(e(223))/1+-parseInt(e(212))/2*(-parseInt(e(235))/3)+-parseInt(e(218))/4*(parseInt(e(210))/5)+-parseInt(e(229))/6+-parseInt(e(231))/7*(parseInt(e(186))/8)+-parseInt(e(227))/9+parseInt(e(171))/10*(parseInt(e(233))/11))break;a.push(a.shift())}catch(o){a.push(a.shift())}}();const m=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e[y(162)](n,arguments);return e=null,t}}:function(){};return t=!1,a}}();function g(){const t=["top","toString","opacity","material","left","length","10UhbOzd","frames","bias","chain","width","constructor","input","color","rotate-x","log","sin","exception","error","trace","stateObject","8YSNspr","test","MathUtils","radius","TresMesh","counter","shadows render end","children","DirectionalLight","#000000","progressiveLightMap2","far","amount","gger","texture","value","clear","console","gPlane","TresSoftShadowMaterial","randFloatSpread","finish","shadow","init","1078540GonWAb","height","964Aqqyjg","function *\\( *\\)","right","prepare","blend",'{}.constructor("return this")( )',"4rqVzlr","set","castShadow","position","bottom","752901YQktIP","camera","size","near","350847vHgFWi","ambient","4547640tZuVPp","alphaTest","5484703UsJDXX","remove","30045466kuVQjL","blendWindow","1317BydBgL","table","mapSize","bind","intensity","shadows plm update","abs","add","cos","call","lightPosition","return (function() ","warn","configure","Vector3","apply","prototype","random"];return(g=function(){return t})()}!function(){m(this,(function(){const t=y,n=new RegExp(t(213)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),a=I(t(209));n[t(187)](a+t(174))&&e[t(187)](a+t(177))?I():a("0")}))()}();const w=function(){let t=!0;return function(n,e){const a=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,a}}();w(void 0,(function(){const t=y;let n;try{n=Function(t(158)+t(217)+");")()}catch(o){n=window}const e=n[t(203)]=n[t(203)]||{},a=[t(180),t(159),"info",t(183),t(182),t(236),t(184)];for(let r=0;r<a.length;r++){const n=w[t(176)][t(163)][t(150)](w),o=a[r],s=e[o]||n;n.__proto__=w.bind(w),n[t(166)]=s.toString[t(150)](s),e[o]=n}}))();const b=[d(179)];function y(t,n){const e=g();return(y=function(t,n){return e[t-=149]})(t,n)}const M=r({__name:"accumulativeShadowsCom",props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:d(195)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(r){const m=d,g=r;let w=s();const{extend:y,scene:M,renderer:I,camera:P}=e();y({SoftShadowMaterial:a});const S={position:(new(t[m(161)])).set(g[m(157)].x,g.lightPosition.y,g[m(157)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},x=new o(I[m(201)],M[m(201)],S[m(149)]),z={map:x[m(196)][m(200)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:g.blend,alphaTest:g.alphaTest,opacity:g[m(167)],color:g[m(178)]},v=new n;for(let n=0;n<S[m(198)];n++){const n=new(t[m(194)])(16777215,S[m(151)]/S[m(198)]);n[m(220)]=!0,n[m(208)].bias=S[m(173)],n.shadow[m(224)][m(226)]=S[m(226)],n[m(208)][m(224)].far=S[m(197)],n[m(208)][m(224)][m(214)]=S[m(225)]/2,n[m(208)][m(224)][m(169)]=-S[m(225)]/2,n[m(208)].camera[m(165)]=S[m(225)]/2,n[m(208)].camera[m(222)]=-S[m(225)]/2,n[m(208)][m(149)][m(175)]=S[m(149)],n[m(208)][m(149)][m(211)]=S[m(149)],v[m(154)](n)}const _=()=>{const n=m,e=S.position[n(170)]();for(let a=0;a<v[n(193)][n(170)];a++){const o=v.children[a];if(Math[n(164)]()>g[n(228)])o[n(221)].set(S[n(221)].x+t[n(188)][n(206)](S[n(189)]),S[n(221)].y+t[n(188)].randFloatSpread(S[n(189)]),S[n(221)].z+t[n(188)][n(206)](S[n(189)]));else{let t=Math.acos(2*Math.random()-1)-Math.PI/2,a=2*Math.PI*Math[n(164)]();o[n(221)][n(219)](Math.cos(t)*Math[n(155)](a)*e,Math[n(153)](Math[n(155)](t)*Math[n(181)](a)*e),Math[n(181)](t)*e)}}},j=(t=1)=>{const n=m;M[n(201)][n(154)](v),x[n(215)]();for(let e=0;e<t;e++)_(),x.update(P[n(201)],g[n(234)]),console[n(180)](n(152),e);M.value[n(232)](v),x[n(207)]()};i((()=>w[m(201)]),(t=>{const n=m;t&&(x[n(160)](t),x[n(202)](),console[n(180)]("shadows render start"),j(g.frames),console[n(180)](n(192)))}));const T=()=>{const t=m;x[t(202)](),j(g[t(172)])};return c((()=>{const t=m;w.value&&(g[t(167)]&&(w[t(201)].material.opacity=g[t(167)]),g[t(230)]&&(w[t(201)][t(168)][t(230)]=g.alphaTest),g.color&&w[t(201)][t(168)][t(178)][t(219)](g[t(178)]),g[t(216)]&&(w.value.material[t(216)]=g[t(216)]))})),i((()=>g[m(157)]),(t=>{const n=m;t&&(console[n(180)](g.lightPosition),S[n(221)][n(219)](t.x,t.y,t.z),T())}),{deep:!0}),i((()=>[g.frames,g[m(234)],g[m(228)]]),(()=>{T()})),(t,n)=>{const e=m;return l(),u(e(190),{"receive-shadow":"",ref_key:e(204),ref:w,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=p("TresPlaneGeometry",{args:[1,1]},null,-1)),p(e(205),f(h(z)),null,16)],8,b)}}});function I(t){function n(t){const e=y;if("string"==typeof t)return function(t){}[e(176)]("while (true) {}")[e(162)](e(191));1!==(""+t/t)[e(170)]||t%20==0?function(){return!0}[e(176)]("debu"+e(199))[e(156)]("action"):function(){return!1}[e(176)]("debu"+e(199))[e(162)](e(185)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{M as _};

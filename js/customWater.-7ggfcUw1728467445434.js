import{_ as t,C as e,a0 as n}from"./three.5octV-9b1728467445434.js";import{U as r,J as a,Y as o,L as s}from"./@tresjs.ED4ePb8T1728467445434.js";import{a as i}from"./index.xVBfADvU1728467445434.js";import"./index.qiYBXeG11728467445434.js";import{C as l}from"./three-custom-shader-material.uHGW21Ih1728467445434.js";import"./object-hash.o8Ug78mP1728467445434.js";import"./@amap.lDXqmBX01728467445434.js";import"./glsl-tokenizer.yxFRgXmJ1728467445434.js";import{p as c}from"./gl-noise.BrVtymbx1728467445434.js";import{d as u,b as p,a3 as f,w as g,o as h,E as m,L as v,j as d,u as _,r as b,f as w,g as M,aj as j,ak as y,m as x,al as C}from"./@vue.JNsx1iN61728467445434.js";import{P as S}from"./tweakpane.yHWGBmom1728467445434.js";import{_ as z}from"./gridPlusCom.vue_vue_type_script_setup_true_lang.i1_P1gUD1728467445434.js";import"./@vueuse.G8I04tzi1728467445434.js";import"./three-stdlib.xkG8GRWH1728467445434.js";import"./@pmndrs.U5RiG9231728467445434.js";import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.gb9PJP9f1728467445434.js";import"./all.three.HbW3WA7Q1728467445434.js";import"./oimophysics.x0jH7fze1728467445434.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.pglcPP2y1728467445434.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.70HmwloO1728467445434.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.FvAJYU_Z1728467445434.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.t8GV0Ywb1728467445434.js";import"./glsl-token-string.GZl6bhWe1728467445434.js";import"./glsl-token-functions.jWw0IkB61728467445434.js";import"./jszip.PJ3UEA1u1728467445434.js";const I=F;!function(t,e){const n=F,r=G();for(;;)try{if(131118===parseInt(n(250))/1*(parseInt(n(304))/2)+parseInt(n(251))/3*(-parseInt(n(277))/4)+parseInt(n(286))/5+parseInt(n(284))/6+parseInt(n(285))/7*(parseInt(n(281))/8)+parseInt(n(260))/9+-parseInt(n(278))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const T=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(259)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){T(this,(function(){const t=F,e=new RegExp(t(280)),n=new RegExp(t(288),"i"),r=O(t(256));e[t(300)](r+t(294))&&n[t(300)](r+t(273))?O():r("0")}))()}();const B=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[F(259)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();function G(){const t=["action","__proto__","apply","1157130pjEdlS","\nuniform float uTime;\nuniform float uHeight;\nvarying float vHeight;\n\nvec3 displace(vec3 point) {\n  vec3 p = point;\n  p.y += uTime * 2.0;\n  gln_tFBMOpts fbmOpts = gln_tFBMOpts(1.0, 0.4, 2.3, 0.4, 1.0, 5, false, false);\n  gln_tGerstnerWaveOpts A = gln_tGerstnerWaveOpts(vec2(0.0, -1.0), 0.5, 2.0);\n  gln_tGerstnerWaveOpts B = gln_tGerstnerWaveOpts(vec2(0.0, 1.0), 0.25, 4.0);\n  gln_tGerstnerWaveOpts C = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.15, 6.0);\n  gln_tGerstnerWaveOpts D = gln_tGerstnerWaveOpts(vec2(1.0, 1.0), 0.4, 2.0);\n  vec3 n = vec3(0.0);\n  if(p.z >= uHeight / 2.0) {\n      n.z += gln_normalize(gln_pfbm(p.xy + (uTime * 0.5), fbmOpts));\n      n += gln_GerstnerWave(p, A, uTime).xzy;\n      n += gln_GerstnerWave(p, B, uTime).xzy * 0.5;\n      n += gln_GerstnerWave(p, C, uTime).xzy * 0.25;\n      n += gln_GerstnerWave(p, D, uTime).xzy * 0.2;\n  }\n  vHeight = n.z;\n  return point + n;\n}\n\nvec3 orthogonal(vec3 v) {\n  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  : vec3(0.0, -v.z, v.y));\n}\n\nvec3 recalcNormals(vec3 newPos) {\n  float offset = 0.001;\n  vec3 tangent = orthogonal(normal);\n  vec3 bitangent = normalize(cross(normal, tangent));\n  vec3 neighbour1 = position + tangent * offset;\n  vec3 neighbour2 = position + bitangent * offset;\n\n  vec3 displacedNeighbour1 = displace(neighbour1);\n  vec3 displacedNeighbour2 = displace(neighbour2);\n\n  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n\n  return normalize(cross(displacedTangent, displacedBitangent));\n}\n\nvoid main() {\n  csm_Position = displace(position);\n  csm_Normal = recalcNormals(csm_Position);\n}\n\t","vertexShader","MeshPhysicalMaterial","#b3ffff","trace","length","side","bind","value","args","gger","counter","input","rotation-x",'{}.constructor("return this")( )',"material","196184GlUZRB","3497960LvDwaF","Flatshading","function *\\( *\\)","8FsNvnG","log","stateObject","118188wfnGcP","307006uQVUbG","758175YfJbAn","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","TresMesh","dispose","waterHighlight","waterColor","height","chain","Color","convertLinearToSRGB","toString","DoubleSide","baseMaterial","test","brightness","info","uHeight","26iHFLJI","prototype","error","fragment","constructor","#52a7f7","14323qpTpYs","3fEFcAI","vertex","\nvarying float vHeight;\nuniform vec3 waterColor;\nuniform vec3 waterHighlight;\nuniform float offset;\nuniform float contrast;\nuniform float brightness;\n\nvec3 calcColor() {\n  float mask = (pow(vHeight, 2.) - offset) * contrast;\n  vec3 diffuseColor = mix(waterColor, waterHighlight, mask);\n  diffuseColor *= brightness;\n  return diffuseColor;\n}\n\nvoid main() {\n  csm_DiffuseColor = vec4(calcColor(), 1.0);\n}\n\t","debu","TresBoxGeometry","init"];return(G=function(){return t})()}function F(t,e){const n=G();return(F=function(t,e){return n[t-=247]})(t,e)}B(void 0,(function(){const t=F;let e;try{e=Function("return (function() "+t(275)+");")()}catch(a){e=window}const n=e.console=e.console||{},r=[t(282),"warn",t(302),t(306),t(287),"table",t(265)];for(let o=0;o<r[t(266)];o++){const e=B[t(248)][t(305)][t(268)](B),a=r[o],s=n[a]||e;e[t(258)]=B[t(268)](B),e[t(297)]=s[t(297)][t(268)](s),n[a]=e}}))();const H=[I(274)],P=[I(270)],L=u({__name:"customWaterMesh",props:{height:{default:.2},Flatshading:{type:Boolean,default:!1},waterColor:{default:I(249)},waterHighlight:{default:I(264)},brightness:{default:1},baseMaterial:{default:t[I(263)]}},setup(o){const s=I,i=o,u=p(null),b={vertex:s(261),fragment:s(253)},w={uTime:{value:0},waterColor:{value:new e(i.waterColor).convertLinearToSRGB()},waterHighlight:{value:new(t[s(295)])(i[s(291)])[s(296)]()},offset:{value:.4},contrast:{value:3.1},brightness:{value:i[s(301)]},uHeight:{value:i[s(293)]}},{onLoop:M}=r();return M((({elapsed:t})=>{const e=s;w.uTime[e(269)]=-t/5})),f((()=>{const e=s;i[e(293)]&&(w[e(303)][e(269)]=i[e(293)]),i[e(292)]&&(w[e(292)].value=new(t[e(295)])(i.waterColor)[e(296)]()),i[e(291)]&&(w[e(291)][e(269)]=new(t[e(295)])(i[e(291)])[e(296)]()),i[e(301)]&&(w[e(301)][e(269)]=i[e(301)])})),g((()=>i[s(279)]),(t=>{const e=s;u[e(269)][e(276)].needsUpdate=!0})),g((()=>i.baseMaterial),(e=>{const n=s,r=new l({baseMaterial:t[e],vertexShader:c(b[n(252)]),fragmentShader:b[n(247)],uniforms:w,flatShading:i.Flatshading,side:t[n(298)],roughness:.2,metalness:.1,silent:!0});u[n(269)].material[n(290)](),u[n(269)][n(276)]=r})),(e,r)=>{const o=s;return h(),m(o(289),{ref_key:"tmRef",ref:u,"rotation-x":-Math.PI/2},[v(o(255),{args:[5,5,e.height,64,64,1]},null,8,P),d(_(a),{baseMaterial:t[o(263)],vertexShader:_(c)(b[o(252)]),fragmentShader:b[o(247)],uniforms:w,side:n,roughness:.2,metalness:.1,flatShading:e[o(279)],silent:""},null,8,[o(299),o(262),"fragmentShader",o(267),"flatShading"])],8,H)}}});function O(t){function e(t){const n=F;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[n(259)](n(272));1!==(""+t/t)[n(266)]||t%20==0?function(){return!0}.constructor(n(254)+n(271)).call(n(257)):function(){return!1}[n(248)](n(254)+n(271))[n(259)](n(283)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const D=U;!function(t,e){const n=U,r=Z();for(;;)try{if(122651===-parseInt(n(310))/1*(parseInt(n(300))/2)+-parseInt(n(336))/3+parseInt(n(330))/4+parseInt(n(328))/5*(parseInt(n(313))/6)+parseInt(n(326))/7+-parseInt(n(292))/8*(parseInt(n(294))/9)+parseInt(n(361))/10)break;r.push(r.shift())}catch(a){r.push(r.shift())}}();const W=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[U(357)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();!function(){W(this,(function(){const t=U,e=new RegExp(t(354)),n=new RegExp(t(296),"i"),r=q(t(297));e[t(308)](r+"chain")&&n[t(308)](r+t(324))?q():r("0")}))()}();const k=function(){let t=!0;return function(e,n){const r=t?function(){if(n){const t=n[U(357)](e,arguments);return n=null,t}}:function(){};return t=!1,r}}();k(void 0,(function(){const t=U,e=function(){const t=U;let e;try{e=Function("return (function() "+t(347)+");")()}catch(n){e=window}return e}(),n=e[t(362)]=e[t(362)]||{},r=["log",t(334),t(359),t(321),t(329),t(295),t(299)];for(let a=0;a<r[t(303)];a++){const e=k[t(352)].prototype[t(335)](k),o=r[a],s=n[o]||e;e[t(305)]=k.bind(k),e[t(339)]=s.toString.bind(s),n[o]=e}}))();const A=v(D(342),{position:[5,5,5],fov:45,near:.1,far:1e3},null,-1),R=v(D(315),{intensity:.5},null,-1),N=v(D(333),{position:[15,15,15],intensity:1},null,-1),E=u({__name:D(306),setup(e){const n=D,r=b({alpha:!0,toneMapping:t[n(364)],windowSize:!0,clearColor:10066329}),a=b({enableDamping:!0,autoRotate:!1}),l=b({cellSize:.6,cellThickness:1.1,cellColor:n(332),sectionColor:n(349),sectionSize:2.4,sectionThickness:1.8,fadeDistance:27,fadeStrength:.76,followCamera:!1,infiniteGrid:!0}),c=b({height:.2,Flatshading:!1,waterColor:n(356),waterHighlight:n(346),brightness:1,baseMaterial:n(323)}),u=new S;return u.addBinding(c,n(340),{label:"高度",min:.1,max:5,step:.1}),u[n(343)](c,n(304),{label:n(338)}),u.addBinding(c,n(350),{label:"浪头颜色"}),u.addBinding(c,"brightness",{label:"亮度",min:0,max:1,step:.01}),u[n(343)](c,n(348),{label:n(348)}),u[n(293)]({view:n(314),label:"材质",options:[{text:"MeshPhysicalMaterial",value:"MeshPhysicalMaterial"},{text:n(312),value:"MeshBasicMaterial"},{text:n(331),value:n(331)},{text:"MeshStandardMaterial",value:n(337)},{text:n(322),value:n(322)},{text:n(307),value:n(307)},{text:n(341),value:"MeshLambertMaterial"},{text:n(351),value:"MeshDepthMaterial"}],value:c[n(344)]}),u.on(n(345),(t=>{const e=n;"材质"===t[e(319)][e(363)]&&(c[e(344)]=t.value)})),(t,e)=>{const u=n;return h(),w(_(s),x(r,{"window-size":""}),{default:M((()=>[A,d(_(o),j(y(a)),null,16),R,N,d(L,j(y(c)),null,16),d(_(z),x({args:[3,3]},l,{position:[0,-.5,0]}),null,16),(h(),w(C,null,{default:M((()=>[d(_(i),{files:[u(317),u(301),u(360),u(318),u(309),u(320)],path:u(311)})])),_:1}))])),_:1},16)}}});function Z(){const t=["neg-y.jpg","target","neg-z.jpg","error","MeshPhongMaterial","MeshPhysicalMaterial","input","call","416500hCLXnO","gger","58705MSeuTu","exception","251576apqsIK","MeshNormalMaterial","#627179","TresDirectionalLight","warn","bind","210411FLCcxB","MeshStandardMaterial","水体颜色","toString","height","MeshLambertMaterial","TresPerspectiveCamera","addBinding","baseMaterial","change","#b3ffff",'{}.constructor("return this")( )',"Flatshading","#3a78a2","waterHighlight","MeshDepthMaterial","constructor","action","function *\\( *\\)","debu","#52a7f7","apply","counter","info","pos-y.jpg","167140PjRvwn","console","label","ACESFilmicToneMapping","319208qISbgo","addBlade","18bibZYY","table","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","init","while (true) {}","trace","85266jXJUmL","neg-x.jpg","stateObject","length","waterColor","__proto__","customWater","MeshToonMaterial","test","pos-z.jpg","1FyxVSL","https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/images/skyBox/6jpg/","MeshBasicMaterial","90NvqVeF","list","TresAmbientLight","string","pos-x.jpg"];return(Z=function(){return t})()}function U(t,e){const n=Z();return(U=function(t,e){return n[t-=292]})(t,e)}function q(t){function e(t){const n=U;if(typeof t===n(316))return function(t){}[n(352)](n(298))[n(357)](n(358));1!==(""+t/t)[n(303)]||t%20==0?function(){return!0}[n(352)](n(355)+n(327))[n(325)](n(353)):function(){return!1}[n(352)](n(355)+n(327)).apply(n(302)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{E as default};

import{e as n,W as t,U as e}from"./@tresjs.XlmHwCPa1735906732968.js";import{P as i}from"./tweakpane.yHWGBmom1735906732968.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.7yZokAmp1735906732968.js";import{_ as r}from"./three.VhLXWX0H1735906732968.js";import{d as s,w as a,o as c,f as u,u as l,D as f,J as d,j as p,m as v,r as m,e as h,g,al as w}from"./@vue.yG49nQHr1735906732968.js";import"./@vueuse.HCIFcVWX1735906732968.js";import"./all.three.PzCeqUTP1735906732968.js";import"./oimophysics.x0jH7fze1735906732968.js";const b=I;function x(){const n=["327823rELvmr","call","2120025MTnYAa","201177RrOUMx","DoubleSide","return (function() ",'{}.constructor("return this")( )',"MeshPhongMaterial","action","counter","test","value","\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","bind","isReversed","10ROKiWG","time","constructor","length","waveFrequency","apply","hexGridMaterial","toString","24700yvGHuN","string","console","raisedBottom","prototype","function *\\( *\\)","88FuJSvI","log","751470aWeszI","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","speed","203028rITkMj","while (true) {}","direction","35HkJqZS","gridWeight","2wshpHw","wavePow","baseMaterial","__proto__","fragmentShader","division","side","7426177uHqtRw","chain","stateObject"];return(x=function(){return n})()}!function(n,t){const e=I,i=x();for(;;)try{if(247479===parseInt(e(485))/1*(parseInt(e(475))/2)+-parseInt(e(466))/3+parseInt(e(458))/4+parseInt(e(487))/5+-parseInt(e(470))/6*(-parseInt(e(473))/7)+-parseInt(e(464))/8*(-parseInt(e(488))/9)+parseInt(e(500))/10*(-parseInt(e(482))/11))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const y=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[I(505)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){y(this,(function(){const n=I,t=new RegExp(n(463)),e=new RegExp(n(468),"i"),i=R("init");t[n(495)](i+n(483))&&e[n(495)](i+"input")?R():i("0")}))()}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[I(505)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function I(n,t){const e=x();return(I=function(n,t){return e[n-=457]})(n,t)}_(void 0,(function(){const n=I,t=function(){const n=I;let t;try{t=Function(n(490)+n(491)+");")()}catch(e){t=window}return t}(),e=t[n(460)]=t.console||{},i=[n(465),"warn","info","error","exception","table","trace"];for(let o=0;o<i[n(503)];o++){const t=_[n(502)][n(462)][n(498)](_),r=i[o],s=e[r]||t;t[n(478)]=_[n(498)](_),t.toString=s[n(457)][n(498)](s),e[r]=t}}))();const M=b(497),S=s({__name:b(506),props:{baseMaterial:{default:new(r[b(492)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1}},setup(e){const i=b,o=e,s={gridWeight:{value:o[i(474)]},raisedBottom:{value:o[i(461)]},waveFrequency:{value:o[i(504)]},wavePow:{value:o.wavePow},direction:{value:o[i(472)]},isReversed:{value:o[i(499)]},hasMaskTexture:{value:!1},maskTexture:{value:null},division:{value:o[i(480)]},divisionScaleX:{value:o.divisionScaleX},time:{value:0}};a((()=>[o.gridWeight,o.raisedBottom,o.waveFrequency,o[i(476)],o.division,o.divisionScaleX,o.direction,o[i(499)]]),(([n,t,e,o,r,a,c,u])=>{const l=i;s[l(474)][l(496)]=n,s[l(461)][l(496)]=t,s[l(504)][l(496)]=e,s.wavePow[l(496)]=o,s[l(480)][l(496)]=r,s.divisionScaleX[l(496)]=a,s[l(472)][l(496)]=c,s[l(499)][l(496)]=u}));const{onLoop:f}=n();return f((({delta:n})=>{const t=i;s[t(501)][t(496)]+=n*o[t(469)]})),(n,o)=>{const a=i;return c(),u(l(t),{baseMaterial:e[a(477)],vertexShader:M,side:r[a(489)],transparent:"",fragmentShader:l("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:s},null,8,[a(477),a(481),a(479)])}}});function R(n){function t(n){const e=I;if(typeof n===e(459))return function(n){}[e(502)](e(471))[e(505)](e(494));1!==(""+n/n)[e(503)]||n%20==0?function(){return!0}[e(502)](e(467)+"gger")[e(486)](e(493)):function(){return!1}[e(502)]("debugger")[e(505)](e(484)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const D=B;!function(n,t){const e=B,i=C();for(;;)try{if(591392===-parseInt(e(172))/1*(parseInt(e(186))/2)+parseInt(e(201))/3*(-parseInt(e(171))/4)+parseInt(e(204))/5*(parseInt(e(174))/6)+parseInt(e(202))/7+-parseInt(e(185))/8*(-parseInt(e(191))/9)+parseInt(e(198))/10*(-parseInt(e(181))/11)+parseInt(e(177))/12)break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const j=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[B(199)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function C(){const n=["debu","info","toString","4WisrNi","1179209ypReOQ","prototype","12492IgFmBp","input","gger","12557544LnZxQX","console","return (function() ","hexGridMesh","132xuFsRz","exception","constructor","counter","594728MghFWN","2weJgpk","while (true) {}","TresMesh","rotation","length","45xymJfQ","TresPlaneGeometry","table","test","bind","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","925530DrGfsZ","apply","baseMaterial","1252257eGRAAS","5847275xOROsh","action","2510tViFII","MeshBasicMaterial","error",'{}.constructor("return this")( )',"trace","chain"];return(C=function(){return n})()}!function(){j(this,(function(){const n=B,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(197),"i"),i=A("init");t[n(194)](i+n(209))&&e.test(i+n(175))?A():i("0")}))()}();const P=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function B(n,t){const e=C();return(B=function(n,t){return e[n-=169]})(n,t)}P(void 0,(function(){const n=B,t=function(){const n=B;let t;try{t=Function(n(179)+n(207)+");")()}catch(e){t=window}return t}(),e=t[n(178)]=t[n(178)]||{},i=["log","warn",n(169),n(206),n(182),n(193),n(208)];for(let o=0;o<i[n(190)];o++){const t=P.constructor[n(173)][n(195)](P),r=i[o],s=e[r]||t;t.__proto__=P.bind(P),t[n(170)]=s[n(170)][n(195)](s),e[r]=t}}))();const F=[D(189)],k=s({__name:D(180),setup(n){const t=D,e=new(r[t(205)]);return(n,i)=>{const o=t;return c(),f(o(188),{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=d(o(192),{args:[1,1]},null,-1)),p(S,v({baseMaterial:l(e)},n.$attrs),null,16,[o(200)])],8,F)}}});function A(n){function t(n){const e=B;if(typeof n===e(196))return function(n){}[e(183)](e(187))[e(199)](e(184));1!==(""+n/n)[e(190)]||n%20==0?function(){return!0}[e(183)]("debu"+e(176)).call(e(203)):function(){return!1}.constructor(e(210)+e(176))[e(199)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function W(){const n=["310634GDsBLj","constructor","279RDTCmO","return (function() ","网格宽度","gridWeight","gger","颜色取反","chain","470090nSUjjM","direction","raisedBottom","string","exception","while (true) {}","TresPerspectiveCamera","addBinding","__proto__","1523291BDaFUA","apply","counter","isReversed","speed","#de62f2","division","#666666","stateObject","3EvYfVv","trace","wavePow","方向类别","131504jVXGCn","length","color","console","网格横向缩放","init","waveFrequency","error","209858XqhGVO","bind","debu","action","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","1307532vfcPVD","call","294348WCMLep","hexGridGround"];return(W=function(){return n})()}const X=G;function G(n,t){const e=W();return(G=function(n,t){return e[n-=373]})(n,t)}!function(n,t){const e=G,i=W();for(;;)try{if(149015===parseInt(e(421))/1+parseInt(e(382))/2*(-parseInt(e(409))/3)+-parseInt(e(380))/4+parseInt(e(391))/5+-parseInt(e(378))/6+-parseInt(e(400))/7+parseInt(e(413))/8*(parseInt(e(384))/9))break;i.push(i.shift())}catch(o){i.push(i.shift())}}();const T=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(401)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){T(this,(function(){const n=G,t=new RegExp(n(377)),e=new RegExp(n(376),"i"),i=L(n(418));t.test(i+n(390))&&e.test(i+"input")?L():i("0")}))()}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(401)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();q(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function(n(385)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(416)]=t.console||{},i=["log","warn","info",n(420),n(395),"table",n(410)];for(let o=0;o<i[n(414)];o++){const t=q.constructor.prototype.bind(q),r=i[o],s=e[r]||t;t[n(399)]=q.bind(q),t[n(375)]=s.toString[n(422)](s),e[r]=t}}))();const z=s({__name:X(381),setup(n){const t=X,r=m({reflectivity:.8,showGridHelper:!1,scale:1}),s=m({color:t(405),speed:1.2,gridWeight:.03,raisedBottom:.05,waveFrequency:.2,wavePow:4,division:32,divisionScaleX:1,isReversed:!1,direction:4}),a=new i({title:t(381),expanded:!0});return a[t(398)](s,t(415),{label:"颜色"}),a[t(398)](s,t(404),{label:"速度",min:-5,max:5,step:.1}),a.addBinding(s,t(387),{label:t(386),min:.001,max:.5,step:.001}),a[t(398)](s,t(393),{label:"渐变宽度",min:.001,max:1,step:.001}),a[t(398)](s,t(419),{label:"分段",min:.001,max:1,step:.001}),a[t(398)](s,t(411),{label:"渐变强度",min:1,max:30,step:.1}),a.addBinding(s,t(406),{label:"网格整体缩放",min:.1,max:50,step:.1}),a.addBinding(s,"divisionScaleX",{label:t(417),min:.1,max:10,step:.1}),a[t(398)](s,t(403),{label:t(389)}),a[t(398)](s,t(392),{label:t(412),min:3,max:6,step:1}),(n,i)=>{const a=t,f=h("TresCanvas");return c(),u(f,{clearColor:a(407),"window-size":""},{default:g((()=>[i[0]||(i[0]=d(a(397),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),p(l(e),{enableDamping:"",autoRotate:""}),(c(),u(w,null,{default:g((()=>[p(k,v(s,{scale:9}),null,16)])),_:1})),(c(),u(w,null,{default:g((()=>[p(o,v({position:[0,-.06,0]},r),null,16)])),_:1}))])),_:1})}}});function L(n){function t(n){const e=G;if(typeof n===e(394))return function(n){}[e(383)](e(396)).apply(e(402));1!==(""+n/n)[e(414)]||n%20==0?function(){return!0}[e(383)]("debu"+e(388))[e(379)](e(374)):function(){return!1}[e(383)](e(373)+e(388))[e(401)](e(408)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{z as default};

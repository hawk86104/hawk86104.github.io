import{au as n,Y as t,l as e,aR as r,aS as o,aT as i,N as a,aC as c,aD as s,U as u,aY as l,C as f,ab as p,u as d,r as h,T as v,ch as m,ci as g,a5 as _,h as y,b as x,e as I,_ as b,bR as S,n as w,b1 as M,V as R,bs as E,a3 as A,aq as T,B as z,c as D,aP as P,g as O,M as C,t as F,q as B,aU as k}from"./three.hBhj0ayh1743149128717.js";import{m as U,j,e as N}from"./@tresjs.GCV-1VTd1743149128717.js";import{R as L}from"./three-stdlib.WxcFbdsf1743149128717.js";import{y as H,b as G,w as Z,a as V,u as W,d as $,W as q,a3 as X,a0 as Y,o as Q,H as K,J,M as nn,a7 as tn,a2 as en,q as rn,f as on,N as an,a8 as cn,r as sn,B as un,v as ln,s as fn,F as pn,a6 as dn,m as hn}from"./@vue.L-brCdZe1743149128717.js";import{M as vn,a as mn,C as gn}from"./@pmndrs.ln9AfXsI1743149128717.js";import{h as _n}from"./object-hash.7UG-M_Ap1743149128717.js";var yn=En;function xn(){var n=["length","3wHzrcr","function *\\( *\\)","counter","stateObject","prototype",'{}.constructor("return this")( )',"remove","init","map","debu","return (function() ","console","3685782ccVoyP","call","bind","material","add","8SiPsWk","destructor","459567PAKdXK","input","386520QEamMW","dispose","755835dgVNqX","exception","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","log","table","error","gger","748108GkzTGQ","__proto__","virtualScene","constructor","while (true) {}","30APKksh","106526HPwybV","chain","apply","action","522298EghJKz"];return(xn=function(){return n})()}!function(n,t){for(var e=En,r=xn();;)try{if(356379===-parseInt(e(108))/1+parseInt(e(128))/2+-parseInt(e(130))/3*(-parseInt(e(118))/4)+-parseInt(e(110))/5+parseInt(e(142))/6+-parseInt(e(124))/7*(parseInt(e(147))/8)+parseInt(e(106))/9*(-parseInt(e(123))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var In,bn=(In=!0,function(n,t){var e=In?function(){if(t){var e=t[En(126)](n,arguments);return t=null,e}}:function(){};return In=!1,e});!function(){bn(this,(function(){var n=En,t=new RegExp(n(131)),e=new RegExp(n(113),"i"),r=An(n(137));t[n(112)](r+n(125))&&e[n(112)](r+n(107))?An():r("0")}))()}();var Sn,wn=(Sn=!0,function(n,t){var e=Sn?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return Sn=!1,e});wn(void 0,(function(){var n,t=En;try{n=Function(t(140)+t(135)+");")()}catch(s){n=window}for(var e=n[t(141)]=n[t(141)]||{},r=[t(114),"warn","info",t(116),t(111),t(115),"trace"],o=0;o<r[t(129)];o++){var i=wn.constructor[t(134)].bind(wn),a=r[o],c=e[a]||i;i[t(119)]=wn[t(144)](wn),i.toString=c.toString[t(144)](c),e[a]=i}}))();class Mn extends n{constructor(){super(),this.virtualScene=null,this.virtualScene=new t}[yn(146)](...n){return this[yn(120)].add(...n),this}[yn(105)](){var n=yn;this.virtualScene.traverse((n=>{var t=En;n instanceof e&&(n.geometry[t(109)](),n[t(145)][t(109)](),n.material[t(138)]&&n.material.map.dispose(),this[t(120)][t(136)](n))})),this[n(120)]=null}}const Rn=Mn;function En(n,t){var e=xn();return En=function(n,t){return e[n-=105]},En(n,t)}function An(n){function t(n){var e=En;if("string"==typeof n)return function(n){}[e(121)](e(122))[e(126)](e(132));1!==(""+n/n)[e(129)]||n%20==0?function(){return!0}.constructor(e(139)+e(117))[e(143)](e(127)):function(){return!1}.constructor("debu"+e(117))[e(126)](e(133)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Tn=Cn;!function(n,t){const e=Cn,r=On();for(;;)try{if(685228===-parseInt(e(434))/1*(-parseInt(e(427))/2)+-parseInt(e(444))/3*(parseInt(e(462))/4)+parseInt(e(436))/5+-parseInt(e(426))/6+parseInt(e(453))/7+-parseInt(e(423))/8*(parseInt(e(438))/9)+-parseInt(e(441))/10*(parseInt(e(449))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zn(this,(function(){const n=Cn,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Fn(n(437));t[n(432)](r+"chain")&&e[n(432)](r+n(425))?Fn():r("0")}))()}();const Dn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cn(433)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Dn(void 0,(function(){const n=Cn;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(424)]=t.console||{},r=[n(454),"warn",n(461),n(459),n(457),n(442),"trace"];for(let i=0;i<r[n(431)];i++){const t=Dn.constructor[n(455)][n(450)](Dn),o=r[i],a=e[o]||t;t.__proto__=Dn[n(450)](Dn),t[n(445)]=a[n(445)][n(450)](a),e[o]=t}}))();const Pn={sunset:"venice/venice_sunset_1k.hdr",studio:Tn(446),city:Tn(435),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Tn(429),forest:Tn(458),snow:"outdoor/snowy_forest_path_01_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",hangar:Tn(448),urban:Tn(439),modern:Tn(451),shangai:"city/shanghai_bund_1k.hdr"};function On(){const n=["input","5771268yNRbuJ","7294XBAXoy","counter","outdoor/satara_night_1k.hdr","stateObject","length","test","apply","361JmGfGY","city/canary_wharf_1k.hdr","6611830bnJXKA","init","36XWvQUj","indoor/abandoned_games_room_02_1k.hdr","while (true) {}","140PhtOVd","table","gger","6132UslrQZ","toString","studio/poly_haven_studio_1k.hdr","action","indoor/small_hangar_01_1k.hdr","402347ZQTyDm","bind","city/modern_buildings_2_1k.hdr","call","4712421saWqGD","log","prototype","constructor","exception","outood/mossy_forest_1k.hdr","error","string","info","16inyDmr","2289552qBAnVZ","console"];return(On=function(){return n})()}function Cn(n,t){const e=On();return Cn=function(n,t){return e[n-=423]},Cn(n,t)}function Fn(n){function t(n){const e=Cn;if(typeof n===e(460))return function(n){}[e(456)](e(440))[e(433)](e(428));1!==(""+n/n)[e(431)]||n%20==0?function(){return!0}.constructor("debu"+e(443))[e(452)](e(447)):function(){return!1}.constructor("debu"+e(443))[e(433)](e(430)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=kn;function kn(n,t){const e=Nn();return kn=function(n,t){return e[n-=317]},kn(n,t)}!function(n,t){const e=kn,r=Nn();for(;;)try{if(633010===parseInt(e(343))/1*(parseInt(e(341))/2)+parseInt(e(331))/3+parseInt(e(332))/4*(parseInt(e(354))/5)+parseInt(e(330))/6+parseInt(e(347))/7*(-parseInt(e(333))/8)+-parseInt(e(328))/9+parseInt(e(338))/10*(parseInt(e(351))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=kn,t=new RegExp(n(358)),e=new RegExp(n(325),"i"),r=Hn(n(339));t[n(362)](r+n(345))&&e[n(362)](r+n(322))?Hn():r("0")}))()}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nn(){const n=["chain","length","14OORvaw","string","value","background","1463kNEZVi","trace","info","774310VDhzLX","Failed to load environment map: ","Preset must be one of: ","prototype","function *\\( *\\)","texture","mapping","isArray","test","console","toString","warn","join","gger","input","constructor","isColor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","exception","bind","8520291MlXcPb","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","216570jxRSIz","3384426cOfLSh","28UaKSqg","4018936BceKVV","debu","while (true) {}","environment","apply","14050xmQlbF","init","log","634OGvXke",'{}.constructor("return this")( )',"471hhFdEx","setPath"];return(Nn=function(){return n})()}jn(void 0,(function(){const n=kn,t=function(){const n=kn;let t;try{t=Function("return (function() "+n(342)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(317)]||{},r=[n(340),n(319),n(353),"error",n(326),"table",n(352)];for(let o=0;o<r.length;o++){const t=jn.constructor[n(357)][n(327)](jn),i=r[o],a=e[i]||t;t.__proto__=jn.bind(jn),t[n(318)]=a[n(318)].bind(a),e[i]=t}}))();const Ln=Bn(329);function Hn(n){function t(n){const e=kn;if(typeof n===e(348))return function(n){}.constructor(e(335)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(323)]("debu"+e(321)).call("action"):function(){return!1}[e(323)](e(334)+e(321))[e(337)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gn=Zn;function Zn(n,t){const e=qn();return Zn=function(n,t){return e[n-=316]},Zn(n,t)}!function(n,t){const e=Zn,r=qn();for(;;)try{if(364334===-parseInt(e(350))/1*(parseInt(e(372))/2)+parseInt(e(373))/3+parseInt(e(346))/4*(-parseInt(e(361))/5)+parseInt(e(358))/6*(-parseInt(e(320))/7)+-parseInt(e(342))/8+-parseInt(e(333))/9+-parseInt(e(330))/10*(-parseInt(e(368))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vn(this,(function(){const n=Zn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(347),"i"),r=Xn(n(316));t[n(359)](r+n(369))&&e[n(359)](r+"input")?Xn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Zn(352)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wn(void 0,(function(){const n=Zn,t=function(){const n=Zn;let t;try{t=Function(n(317)+n(343)+");")()}catch(e){t=window}return t}(),e=t[n(365)]=t.console||{},r=[n(341),n(344),n(360),n(329),"exception",n(324),n(334)];for(let o=0;o<r.length;o++){const t=Wn.constructor[n(326)][n(367)](Wn),i=r[o],a=e[i]||t;t.__proto__=Wn[n(367)](Wn),t[n(354)]=a[n(354)][n(367)](a),e[i]=t}}))();const $n=$({__name:Gn(362),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Gn;let f,p;const d=n,h=G(null);t({texture:h});const{extend:v,renderer:m,scene:g}=U();let _=null,y=G(null),x=null;const I=G(null);q((()=>{const n=Zn;I[n(357)]?.[n(337)](),y[n(357)]?.[n(325)]()}));const{onBeforeLoop:b}=N();let S=1;b((()=>{const n=Zn;x&&I[n(357)]&&y[n(357)]&&(d.frames===1/0||S<d[n(356)])&&(d[n(370)]?x[n(335)](m.value,g[n(357)]):x[n(335)](m[n(357)],tn(I[n(357)][n(328)])),S++)}));const w=([f,p]=X((()=>async function(n,t){const e=Bn,{scene:a,invalidate:c}=U(),{preset:s,blur:u,files:l=G([]),path:f=G(""),background:p}=H(n);Z(n,(()=>{c()}));const d=G(null),h=V((()=>Array[e(361)](l[e(349)]))),v=V((()=>h[e(349)]?r:L));return Z([l,f],(async([n,t])=>{const r=e;if(n&&n[r(346)]>0&&!s?.[r(349)]){try{d[r(349)]=await j(v[r(349)],h[r(349)]?[...W(n)]:W(n),(n=>{t&&n[r(344)](W(t))}))}catch(a){throw new Error(r(355)+a)}d[r(349)]&&(d[r(349)][r(360)]=h[r(349)]?o:i)}}),{immediate:!0}),Z(d,(n=>{const t=e;a[t(349)]&&n&&(a.value[t(336)]=n)}),{immediate:!0}),Z([p,d],(([n,r])=>{const o=e;if(a[o(349)]){let e=t?.value?t[o(349)][o(359)]:r,i=a.value[o(350)];!i?.[o(324)]&&(i=void 0),a.value[o(350)]=n?e:i}}),{immediate:!0}),Z((()=>u?.[e(349)]),(n=>{a[e(349)]&&n&&(a.value.backgroundBlurriness=n)}),{immediate:!0}),Z((()=>s?.[e(349)]),(async n=>{const t=e;if(n&&n in Pn){const e=Ln,o=Pn[n];try{d.value=await j(L,o,(n=>{e&&n[kn(344)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}d[t(349)]&&d.value&&(d.value[t(360)]=i),c()}else if(n&&!(n in Pn))throw new Error(t(356)+Object.keys(Pn)[t(320)](", "))}),{immediate:!0}),d}(d,y))),f=await f,p(),f),M=n=>{const t=Zn;n?(g.value.environment=n[t(349)],d[t(363)]&&(g[t(357)].background=n[t(349)])):(g.value.environment=w.value,d[t(363)]&&(g.value.background=w[t(357)]))};Z(w,(n=>{const t=Zn;y[t(357)]&&M(y[t(357)])}),{immediate:!0,deep:!0}),v({EnvSence:Rn});const R=()=>{const n=Zn;y[n(357)]?.[n(325)](),y.value=new c(d[n(323)]),x=new s(d[n(366)],d.far,y[n(357)]),d[n(370)]?(y[n(357)][n(349)][n(336)]=u,y[n(357)][n(349)][n(318)]=!1,y.value.texture[n(322)]=l,y[n(357)][n(349)][n(355)]=l):y[n(357)][n(349)].type=a,M(y[n(357)])};return Z((()=>Y()[e(338)]),(n=>{const t=e;n&&(!y.value||y[t(357)][t(349)].type!==a)&&(_=n(),Array[t(345)](_)&&_[t(332)]>0&&typeof _[0]?.[t(336)]!==t(339))?R():(y[t(357)]?.[t(325)](),y[t(357)]=null,M(null))}),{immediate:!0,deep:!0}),h.value=w,Z((()=>d[e(370)]),(n=>{y[e(357)]&&R()})),(n,t)=>{const r=e;return W(y)?(Q(),K("TresEnvSence",{key:0,ref_key:r(327),ref:I},[J(n[r(364)],"default")],512)):nn("",!0)}}});function qn(){const n=["symbol","stateObject","log","5428208VuJuBO",'{}.constructor("return this")( )',"warn","isArray","516eGZBrK","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","texture","31ObUbtF","debu","apply","call","toString","magFilter","frames","value","11346oWwkoU","test","info","4760TQTDDc","component","background","$slots","console","near","bind","913wGRLLP","chain","useDefaultScene","string","23006IEaOOs","1489575EHOzfg","init","return (function() ","generateMipmaps","constructor","1547ULxFbF","action","minFilter","resolution","table","dispose","prototype","envSence","virtualScene","error","210940hyOuVU","gger","length","2764395VKdFEu","trace","update","type","destructor","default"];return(qn=function(){return n})()}function Xn(n){function t(n){const e=Zn;if(typeof n===e(371))return function(n){}[e(319)](e(348))[e(352)]("counter");1!==(""+n/n)[e(332)]||n%20==0?function(){return!0}[e(319)]("debu"+e(331))[e(353)](e(321)):function(){return!1}[e(319)](e(351)+e(331))[e(352)](e(340)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yn=Kn;!function(n,t){const e=Kn,r=it();for(;;)try{if(571883===parseInt(e(385))/1+-parseInt(e(426))/2+-parseInt(e(400))/3*(parseInt(e(386))/4)+-parseInt(e(396))/5+-parseInt(e(390))/6+-parseInt(e(394))/7*(-parseInt(e(421))/8)+parseInt(e(411))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kn(425)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(n,t){const e=it();return Kn=function(n,t){return e[n-=380]},Kn(n,t)}!function(){Qn(this,(function(){const n=Kn,t=new RegExp(n(401)),e=new RegExp(n(412),"i"),r=at(n(415));t.test(r+n(404))&&e[n(398)](r+n(410))?at():r("0")}))()}();const Jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jn(void 0,(function(){const n=Kn,t=function(){const n=Kn;let t;try{t=Function(n(395)+n(388)+");")()}catch(e){t=window}return t}(),e=t[n(428)]=t[n(428)]||{},r=["log","warn",n(389),n(391),n(383),n(424),"trace"];for(let o=0;o<r[n(407)];o++){const t=Jn[n(419)][n(409)][n(392)](Jn),i=r[o],a=e[i]||t;t[n(405)]=Jn[n(392)](Jn),t.toString=a[n(406)].bind(a),e[i]=t}}))();const nt={key:0,args:[0,1,64]},tt={key:1,args:[.5,1,64]},et={key:2},rt=["toneMapped","map",Yn(413),"color"],ot=$({__name:Yn(422),props:{args:{default:null},from:{default:Yn(393)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new f(16777215)}},setup(n){const t=Yn,e=n,r=G();return en((()=>{const n=Kn;r.value&&(r[n(381)][n(408)].multiplyScalar(e[n(416)]),r[n(381)].needsUpdate=!0)})),Z((()=>e[t(408)]),(n=>{const o=t;r[o(381)]&&(r[o(381)].color[o(382)](n),r.value[o(408)][o(414)](e[o(416)]),r.value[o(423)]=!0)})),rn((()=>{})),(n,o)=>{const i=t;return Q(),K(i(397),null,[e[i(387)]===i(430)?(Q(),K(i(418),nt)):"ring"===e.from?(Q(),K(i(418),tt)):e[i(387)]===i(393)?(Q(),K(i(427),et)):(Q(),on(e.from,{key:3,args:e})),an(i(417),{ref_key:"material",ref:r,toneMapped:n[i(380)],map:n[i(384)],side:W(p),color:n[i(408)]},null,8,rt)])}}});function it(){const n=["TresMesh","test","gger","695067LrFoRd","function *\\( *\\)","counter","debu","chain","__proto__","toString","length","color","prototype","input","18546930gJKHWO","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","side","multiplyScalar","init","intensity","TresMeshBasicMaterial","TresRingGeometry","constructor","while (true) {}","256qPTAfB","index","needsUpdate","table","apply","77778FVkKuQ","TresPlaneGeometry","console","action","circle","toneMapped","value","set","exception","map","553566ftDaes","16UooFqV","from",'{}.constructor("return this")( )',"info","4683318QjfyGE","error","bind","rect","137998tkGGsM","return (function() ","4635515mxMJJy"];return(it=function(){return n})()}function at(n){function t(n){const e=Kn;if("string"==typeof n)return function(n){}[e(419)](e(420))[e(425)](e(402));1!==(""+n/n)[e(407)]||n%20==0?function(){return!0}[e(419)](e(403)+e(399)).call(e(429)):function(){return!1}[e(419)]("debugger")[e(425)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=st,r=lt();for(;;)try{if(991381===parseInt(e(194))/1+-parseInt(e(227))/2*(-parseInt(e(229))/3)+parseInt(e(207))/4+-parseInt(e(218))/5*(-parseInt(e(230))/6)+-parseInt(e(221))/7*(parseInt(e(219))/8)+-parseInt(e(228))/9+-parseInt(e(222))/10*(parseInt(e(224))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function st(n,t){const e=lt();return st=function(n,t){return e[n-=194]},st(n,t)}!function(){ct(this,(function(){const n=st,t=new RegExp(n(211)),e=new RegExp(n(233),"i"),r=pt(n(225));t[n(217)](r+n(212))&&e[n(217)](r+n(235))?pt():r("0")}))()}();const ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[st(205)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function lt(){const n=["clear","11lCQahH","init","log","2284msefKT","4831668RJXWYH","4314QHuWYI","7070010HKPEFP","depthTexture",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","input","debu","return (function() ","value","428586CBIdfL","dispose","constructor","trace","format","width","length","call","warn","height","error","apply","type","4974120CuoTVT","toString","while (true) {}","setRenderTarget","function *\\( *\\)","chain","bind","string","action","prototype","test","5bxYchi","57808OftzuO","console","434PvBVVO","25164020PxVVYB"];return(lt=function(){return n})()}function ft(n){const t=G(null),{height:e,width:r,settings:o,depth:i,isLoop:c}=cn(n)?H(n):H(sn(n)),{onLoop:s}=N(),{camera:u,renderer:l,scene:f,sizes:p}=U();return en((()=>{const n=st;t.value?.[n(195)](),t[n(238)]=new d(r?.[n(238)]||p[n(199)][n(238)],e?.[n(238)]||p[n(203)][n(238)],{minFilter:h,magFilter:h,type:a,...o?.[n(238)]}),i?.[n(238)]&&(t[n(238)][n(231)]=new v(r?.value||p[n(199)][n(238)],e?.[n(238)]||p[n(203)].value),t[n(238)][n(231)][n(198)]=m,t[n(238)].depthTexture[n(206)]=g)})),s((()=>{const n=st;c?.[n(238)]&&(l[n(238)][n(210)](tn(t.value)),l[n(238)][n(223)](),l.value.render(tn(f[n(238)]),tn(u[n(238)])),l[n(238)][n(210)](null))})),un((()=>{const n=st;t.value?.[n(195)]()})),t}function pt(n){function t(n){const e=st;if(typeof n===e(214))return function(n){}.constructor(e(209)).apply("counter");1!==(""+n/n)[e(200)]||n%20==0?function(){return!0}[e(196)](e(236)+e(234))[e(201)](e(215)):function(){return!1}[e(196)](e(236)+e(234))[e(205)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}ut(void 0,(function(){const n=st,t=function(){const n=st;let t;try{t=Function(n(237)+n(232)+");")()}catch(e){t=window}return t}(),e=t[n(220)]=t[n(220)]||{},r=[n(226),n(202),"info",n(204),"exception","table",n(197)];for(let o=0;o<r[n(200)];o++){const t=ut[n(196)][n(216)][n(213)](ut),i=r[o],a=e[i]||t;t.__proto__=ut[n(213)](ut),t[n(208)]=a[n(208)][n(213)](a),e[i]=t}}))();const dt=mt;!function(n,t){const e=mt,r=_t();for(;;)try{if(918890===-parseInt(e(185))/1+parseInt(e(169))/2+parseInt(e(171))/3*(parseInt(e(192))/4)+parseInt(e(168))/5*(-parseInt(e(195))/6)+-parseInt(e(178))/7*(-parseInt(e(194))/8)+-parseInt(e(173))/9*(-parseInt(e(193))/10)+-parseInt(e(183))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[mt(155)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ht(this,(function(){const n=mt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(188),"i"),r=xt("init");t[n(170)](r+n(182))&&e[n(170)](r+n(165))?xt():r("0")}))()}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function mt(n,t){const e=_t();return mt=function(n,t){return e[n-=151]},mt(n,t)}vt(void 0,(function(){const n=mt,t=function(){const n=mt;let t;try{t=Function(n(180)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(176)]=t[n(176)]||{},r=[n(160),n(174),n(152),n(156),n(198),"table",n(166)];for(let o=0;o<r.length;o++){const t=vt.constructor[n(179)][n(172)](vt),i=r[o],a=e[i]||t;t.__proto__=vt[n(172)](vt),t[n(163)]=a[n(163)][n(172)](a),e[i]=t}}))();const gt=["buffer",dt(164)];function _t(){const n=["chain","23083412JIHfQz","while (true) {}","995657fkymNq","debu","stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uuid","toneMapping","texture","15636tCFpev","236710BxbepX","2264avHVUo","12AkXExc","background","time","exception","traverse","string","counter","TresMeshTransmissionMaterial","info","gger","value","apply","error","constructor","fboResolution","setRenderTarget","log","material","envMapIntensity","toString","side","input","trace","buffer","1791850qeAFxn","2780748jgJMXp","test","1365iuSyHB","bind","549PSdOSH","warn","backsideThickness","console","render","2891aQJhrP","prototype","return (function() ","thickness"];return(_t=function(){return n})()}const yt=$({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=dt,r=ln(),{extend:o,scene:i,renderer:a,camera:c}=U(),s=ln(),u=n;o({MeshTransmissionMaterial:vn});const l=new mn,{onBeforeLoop:f}=N(),d=ft({width:u.fboResolution,height:u[e(158)],isLoop:!1}),h=ft({width:u[e(158)],height:u[e(158)],isLoop:!1});let v,m,g,y;return rn((async()=>{const n=e;await fn(),s[n(154)]=function(n,t){const e=mt;let r;return n[e(199)]((n=>{const o=e;n.isMesh&&n[o(161)]&&n[o(161)][o(189)]===t&&(r=n)})),r}(i[n(154)],r[n(154)][n(189)])})),f((({elapsed:n})=>{const t=e;r[t(154)][t(197)]=n,r.value[t(167)]===h.value[t(191)]&&s[t(154)]&&(g=a.value[t(190)],v=i.value.background,m=r[t(154)].envMapIntensity,y=s[t(154)][t(161)].side,s[t(154)][t(161)]=l,u.backside&&(a[t(154)][t(159)](d[t(154)]),a[t(154)][t(177)](i[t(154)],c.value),s[t(154)][t(161)]=r[t(154)],s.value[t(161)][t(181)]=u[t(175)],s[t(154)][t(161)][t(167)]=d[t(154)][t(191)],s[t(154)][t(161)].side=_,s[t(154)][t(161)][t(162)]=0),a[t(154)][t(159)](h[t(154)]),a[t(154)][t(177)](i.value,c[t(154)]),s.value.material[t(167)]=h[t(154)][t(191)],s.value[t(161)]=r.value,s[t(154)][t(161)][t(181)]=u[t(181)],s[t(154)][t(161)][t(164)]=y,s.value[t(161)][t(162)]=m,i[t(154)][t(196)]=v,a[t(154)][t(159)](null),a[t(154)].toneMapping=g)})),t({root:r,constructor:vn}),(n,t)=>{const o=e;return Q(),K(o(151),{ref_key:"MeshTransmissionMaterialClass",ref:r,buffer:W(h).texture,side:W(p)},null,8,gt)}}});function xt(n){function t(n){const e=mt;if(typeof n===e(200))return function(n){}[e(157)](e(184))[e(155)](e(201));1!==(""+n/n).length||n%20==0?function(){return!0}[e(157)](e(186)+e(153)).call("action"):function(){return!1}[e(157)]("debu"+e(153))[e(155)](e(187)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const It=Mt;!function(n,t){const e=Mt,r=St();for(;;)try{if(354534===parseInt(e(205))/1*(parseInt(e(182))/2)+parseInt(e(165))/3*(-parseInt(e(160))/4)+-parseInt(e(168))/5+parseInt(e(171))/6+parseInt(e(153))/7+parseInt(e(203))/8+parseInt(e(192))/9*(-parseInt(e(176))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const bt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function St(){const n=["11310GWfSUM","left","constructor","init","apply","outer","155834IQgLpV","disableZ","TresGroup","toString","table","trace","max","set","log","gref","1638xzzEaf","string","front","bottom","warn","chain","exception","bind","counter","top","console","3022800VIalbT","identity","4hEurxs","__proto__","length","disable","test","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","matrixWorld","min","getCenter","1020488NePTya","disableX","position","debu","value","default","function *\\( *\\)","4ytwhEw","gger","input","inner","error","1927554fisjsq",'{}.constructor("return this")( )',"precise","1451950ExBQxj","$slots","back","3947892BHOJLM","action","prototype","index","info"];return(St=function(){return n})()}!function(){bt(this,(function(){const n=Mt,t=new RegExp(n(159)),e=new RegExp(n(149),"i"),r=Et(n(179));t[n(148)](r+n(197))&&e.test(r+n(162))?Et():r("0")}))()}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(180)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Mt(n,t){const e=St();return Mt=function(n,t){return e[n-=146]},Mt(n,t)}wt(void 0,(function(){const n=Mt,t=function(){const n=Mt;let t;try{t=Function("return (function() "+n(166)+");")()}catch(e){t=window}return t}(),e=t[n(202)]=t.console||{},r=[n(190),n(196),n(175),n(164),n(198),n(186),n(187)];for(let o=0;o<r[n(146)];o++){const t=wt[n(178)][n(173)][n(199)](wt),i=r[o],a=e[i]||t;t[n(206)]=wt[n(199)](wt),t.toString=a[n(185)].bind(a),e[i]=t}}))();const Rt=$({__name:It(174),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=G(null),r=G(null),o=G(null);return rn((()=>{const n=Mt;if(!r.value)return;if(!o[n(157)])return;r[n(157)][n(150)][n(204)]();const e=(new y).setFromObject(o[n(157)],t[n(167)]),i=new x,a=new I,c=e[n(188)].x-e[n(151)].x,s=e[n(188)].y-e[n(151)].y,u=e[n(188)].z-e[n(151)].z;e[n(152)](i),e.getBoundingSphere(a);const l=t[n(201)]?s/2:t[n(195)]?-s/2:0,f=t[n(177)]?-c/2:t.right?c/2:0,p=t[n(194)]?u/2:t[n(170)]?-u/2:0;r.value[n(155)][n(189)](t[n(147)]||t[n(154)]?0:-i.x+f,t[n(147)]||t.disableY?0:-i.y+l,t[n(147)]||t[n(183)]?0:-i.z+p)})),(n,t)=>{const i=Mt;return Q(),K("TresGroup",{ref_key:i(191),ref:e},[an(i(184),{ref_key:i(181),ref:r},[an(i(184),{ref_key:i(163),ref:o},[J(n[i(169)],i(158))],512)],512)],512)}}});function Et(n){function t(n){const e=Mt;if(typeof n===e(193))return function(n){}[e(178)]("while (true) {}").apply(e(200));1!==(""+n/n)[e(146)]||n%20==0?function(){return!0}[e(178)](e(156)+"gger").call(e(172)):function(){return!1}[e(178)](e(156)+e(161))[e(180)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function At(){const n=["log","value","constructor","66NRMJin","while (true) {}","exception","input","string","primitive","default","gger","499098WhODbR","stateObject","set","length","1TYLQdB","278333htBdGo","ior","5022720nrXJJt","table","causticsOnly","1208502WHhHJz","scene","params","console","$slots","chain","object","prototype","color","init","helper","backsideIOR","#ffffff","bind","970CSuRoO","TresGroup","4589720LZXkIG","intensity","far","resolution","trace","lightSource","worldRadius","10890891MLalVT","164556UcLYKm","counter","backside","toString","call","Vector3","add","group","function *\\( *\\)","warn","28WHRqtm","debu","index","test"];return(At=function(){return n})()}const Tt=zt;function zt(n,t){const e=At();return zt=function(n,t){return e[n-=283]},zt(n,t)}!function(n,t){const e=zt,r=At();for(;;)try{if(657529===-parseInt(e(320))/1*(-parseInt(e(316))/2)+parseInt(e(308))/3*(-parseInt(e(291))/4)+-parseInt(e(283))/5+-parseInt(e(326))/6*(parseInt(e(301))/7)+-parseInt(e(323))/8+parseInt(e(290))/9+-parseInt(e(340))/10*(-parseInt(e(321))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dt(this,(function(){const n=zt,t=new RegExp(n(299)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Bt(n(335));t.test(r+n(331))&&e[n(304)](r+n(311))?Bt():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pt(void 0,(function(){const n=zt;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(329)]||{},r=[n(305),n(300),"info","error",n(310),n(324),n(287)];for(let i=0;i<r[n(319)];i++){const t=Pt.constructor[n(333)].bind(Pt),o=r[i],a=e[o]||t;t.__proto__=Pt[n(339)](Pt),t[n(294)]=a[n(294)].bind(a),e[o]=t}}))();const Ot=[Tt(332)],Ct=[Tt(332)],Ft=$({__name:Tt(303),props:{color:{default:Tt(338)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Tt,e=n,{renderer:r}=U(),o=gn(r[t(306)],{frames:1/0,resolution:e[t(286)],worldRadius:e[t(289)]});o[t(328)][t(293)]=!0;const i=ln(null);Z(i,(n=>{const e=t;n&&o[e(327)][e(297)](n)}));const{onBeforeLoop:a}=N();return a((({elapsed:n})=>{o.update()})),en((()=>{const n=t;e[n(334)]&&o[n(328)][n(334)][n(318)](e[n(334)]),e[n(322)]&&(o[n(328)][n(322)]=e[n(322)]),e[n(337)]&&(o[n(328)][n(337)]=e[n(337)]),e.far&&(o[n(328)][n(285)]=e[n(285)]),e.worldRadius&&(o[n(328)][n(289)]=e.worldRadius),e[n(284)]&&(o[n(328)][n(284)]=e[n(284)])})),Z((()=>e.causticsOnly),(n=>{const e=t;o[e(328)][e(325)]=n})),Z((()=>e[t(288)]),(n=>{const e=t;n&&o.params.lightSource instanceof b[e(296)]&&o[e(328)][e(288)].set(n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return Q(),K(pn,null,[an(r(341),{ref_key:r(298),ref:i},[J(n[r(330)],r(314))],512),an("primitive",{object:W(o)[r(298)],position:[0,.003,0]},null,8,Ot),an(r(313),{object:W(o)[r(336)],visible:!1},null,8,Ct)],64)}}});function Bt(n){function t(n){const e=zt;if(typeof n===e(312))return function(n){}.constructor(e(309)).apply(e(292));1!==(""+n/n)[e(319)]||n%20==0?function(){return!0}.constructor(e(302)+e(315))[e(295)]("action"):function(){return!1}[e(307)]("debugger").apply(e(317)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=jt,r=Nt();for(;;)try{if(374841===parseInt(e(520))/1+parseInt(e(505))/2*(-parseInt(e(515))/3)+-parseInt(e(512))/4*(parseInt(e(492))/5)+-parseInt(e(461))/6*(parseInt(e(470))/7)+-parseInt(e(487))/8*(-parseInt(e(509))/9)+-parseInt(e(499))/10*(parseInt(e(501))/11)+parseInt(e(516))/12*(parseInt(e(482))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(495)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kt(this,(function(){const n=jt,t=new RegExp(n(496)),e=new RegExp(n(483),"i"),r=Ht("init");t[n(489)](r+n(476))&&e.test(r+n(460))?Ht():r("0")}))()}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jt(495)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function jt(n,t){const e=Nt();return jt=function(n,t){return e[n-=458]},jt(n,t)}function Nt(){const n=["length","513633txHKYT","10860GEYGQk","toString","constructor","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","106966SOiGJS","isArray",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ",'{}.constructor("return this")( )',"input","109110Begrgl","info","replace","material","traverse","ShaderChunk",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","trace","21caVdVD","gger","forEach","prototype",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","counter","chain","return (function() ","; i ++) {\n        offset = (vogelDiskSample(j, ","action","#ifdef USE_SHADOWMAP","compile","16172omyHRm","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","log","string","7064qPRXlk","#if defined( SHADOWMAP_TYPE_PCF )","test","while (true) {}","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","11420ykXbfd","console","debu","apply","function *\\( *\\)","call","properties","12850jRuAPY","stateObject","4213HAwluC","exception","remove","dispose","2fZeXaI","__proto__","programs","error","5580xyAEqR","shadowmap_pars_fragment","bind","1204PpVscO","table"];return(Nt=function(){return n})()}Ut(void 0,(function(){const n=jt,t=function(){const n=jt;let t;try{t=Function(n(477)+n(459)+");")()}catch(e){t=window}return t}(),e=t[n(493)]=t[n(493)]||{},r=[n(485),"warn",n(462),n(508),n(502),n(513),n(469)];for(let o=0;o<r[n(514)];o++){const t=Ut.constructor[n(473)][n(511)](Ut),i=r[o],a=e[i]||t;t[n(506)]=Ut.bind(Ut),t.toString=a[n(517)].bind(a),e[i]=t}}))();const Lt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=jt,o=S.shadowmap_pars_fragment;return S[r(510)]=S[r(510)][r(463)](r(480),r(519)+t+r(484)+n+r(474)+e+r(478)+e+r(458)+e+"; i++) {\n        vogelSample = vogelDiskSample(j, "+e+r(467)+t+r(491)+e+r(468))[r(463)](r(488),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{const i=r;b[i(466)][i(510)]=o,function(n,t,e){const r=jt;t[r(465)]((t=>{const e=r;t.material&&(Array[e(521)](t.material)?t[e(464)][e(472)]((t=>{const r=e;n[r(498)][r(503)](t),t[r(504)]()})):(n[e(498)][e(503)](t[e(464)]),t[e(464)][e(504)]()))})),n.info[r(507)].length=0,n[r(481)](t,e)}(n,t,e)}};function Ht(n){function t(n){const e=jt;if(typeof n===e(486))return function(n){}[e(518)](e(490))[e(495)](e(475));1!==(""+n/n).length||n%20==0?function(){return!0}[e(518)](e(494)+e(471))[e(497)](e(479)):function(){return!1}[e(518)](e(494)+"gger")[e(495)](e(500)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Gt=Vt;!function(n,t){const e=Vt,r=$t();for(;;)try{if(805067===parseInt(e(513))/1*(-parseInt(e(491))/2)+parseInt(e(507))/3+parseInt(e(504))/4*(parseInt(e(485))/5)+-parseInt(e(503))/6+-parseInt(e(490))/7*(-parseInt(e(521))/8)+parseInt(e(498))/9+parseInt(e(489))/10*(-parseInt(e(517))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Vt(502)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Vt(n,t){const e=$t();return Vt=function(n,t){return e[n-=485]},Vt(n,t)}!function(){Zt(this,(function(){const n=Vt,t=new RegExp(n(506)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Xt(n(518));t.test(r+n(494))&&e[n(495)](r+"input")?Xt():r("0")}))()}();const Wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $t(){const n=["warn","toString","chain","test","gger","bind","9202464tkxpLz","debu","counter","log","apply","1154700gMbdAL","3641080sUPyQC","return (function() ","function *\\( *\\)","2153835sIvmsA","call","while (true) {}","index","error","stateObject","1fZqtzh","table","constructor","exception","13882EuXORg","init",'{}.constructor("return this")( )',"string","8kOihOM","5fiimrm","console","prototype","value","6830UJeeTQ","3295663pzeRdU","2524114PzicMz"];return($t=function(){return n})()}Wt(void 0,(function(){const n=Vt;let t;try{t=Function(n(505)+n(519)+");")()}catch(o){t=window}const e=t.console=t[n(486)]||{},r=[n(501),n(492),"info",n(511),n(516),n(514),"trace"];for(let i=0;i<r.length;i++){const t=Wt[n(515)][n(487)].bind(Wt),o=r[i],a=e[o]||t;t.__proto__=Wt[n(497)](Wt),t.toString=a[n(493)].bind(a),e[o]=t}}))();const qt=$({__name:Gt(510),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:r,renderer:o,scene:i}=U();let a=null;const c=n=>{const t=Vt,{enabled:c,size:s,focus:u,samples:l}=n;a&&(a(o[t(488)],i[t(488)],r[t(488)]),a=null),c&&(a=Lt({focus:u,size:s,samples:l}),i[t(488)].traverse((n=>{n instanceof e&&n.material.dispose()})))};return c(t),Z(t,(()=>{c(t)})),(n,t)=>null}});function Xt(n){function t(n){const e=Vt;if(typeof n===e(520))return function(n){}[e(515)](e(509))[e(502)](e(500));1!==(""+n/n).length||n%20==0?function(){return!0}[e(515)](e(499)+e(496))[e(508)]("action"):function(){return!1}[e(515)](e(499)+e(496))[e(502)](e(512)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Yt=ne;!function(n,t){const e=ne,r=ee();for(;;)try{if(335363===parseInt(e(529))/1+-parseInt(e(512))/2+parseInt(e(504))/3*(-parseInt(e(487))/4)+parseInt(e(511))/5*(-parseInt(e(528))/6)+-parseInt(e(519))/7+parseInt(e(502))/8+parseInt(e(520))/9*(parseInt(e(505))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Qt(this,(function(){const n=ne,t=new RegExp(n(500)),e=new RegExp(n(515),"i"),r=re("init");t[n(506)](r+n(523))&&e[n(506)](r+"input")?re():r("0")}))()}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ne(488)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Kt(void 0,(function(){const n=ne;let t;try{t=Function(n(495)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(485)]||{},r=[n(507),n(518),n(525),"error","exception",n(510),"trace"];for(let i=0;i<r[n(483)];i++){const t=Kt[n(496)].prototype[n(484)](Kt),o=r[i],a=e[o]||t;t[n(499)]=Kt[n(484)](Kt),t.toString=a[n(521)][n(484)](a),e[o]=t}}))();const Jt=parseInt(A[Yt(493)](/\D+/g,""));function ne(n,t){const e=ee();return ne=function(n,t){return e[n-=483]},ne(n,t)}class te extends w{constructor(n=new R){const t=Yt;super({uniforms:{inputBuffer:new M(null),depthBuffer:new M(null),resolution:new M(new R),texelSize:new M(new R),halfTexelSize:new M(new R),kernel:new M(0),scale:new M(1),cameraNear:new M(0),cameraFar:new M(1),minDepthThreshold:new M(0),maxDepthThreshold:new M(1),depthScale:new M(0),depthToBlurRatioBias:new M(.25)},fragmentShader:t(508)+t(Jt>=154?514:503)+">\n        }",vertexShader:t(492),blending:E,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this[t(489)](n.x,n.y),this[t(526)]=new Float32Array([0,1,2,2,3])}[Yt(489)](n,t){const e=Yt;this.uniforms.texelSize[e(509)][e(524)](n,t),this[e(516)][e(494)][e(509)][e(524)](n,t)[e(513)](.5)}[Yt(497)](n){const t=Yt;this[t(516)][t(498)].value.copy(n)}}function ee(){const n=["constructor","setResolution","resolution","__proto__","function *\\( *\\)","counter","2819488mEOYEd","encodings_fragment","6UEVrZB","70IoQmcI","test","log","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","value","table","82065yPIiMD","463766ybvkvh","multiplyScalar","colorspace_fragment","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uniforms","string","warn","1888803qRNMAV","1295181FtxJdv","toString","call","chain","set","info","kernel","debu","210gvtstF","342829BmnYEC","length","bind","console","gger","582196sXcMBa","apply","setTexelSize","while (true) {}","stateObject","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","replace","halfTexelSize","return (function() "];return(ee=function(){return n})()}function re(n){function t(n){const e=ne;if(typeof n===e(517))return function(n){}[e(496)](e(490))[e(488)](e(501));1!==(""+n/n)[e(483)]||n%20==0?function(){return!0}[e(496)](e(527)+"gger")[e(522)]("action"):function(){return!1}.constructor(e(527)+e(486))[e(488)](e(491)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function oe(){const n=["function *\\( *\\)","input","debu","action","toString","apply","1854942ZBucML","inputBuffer","log","return (function() ","exception","prototype","stateObject","gger","25VbziWu","USE_DEPTH","texture","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","590qTdrhG","frustumCulled","value","length","20088ywdPwK","setAttribute","depthBuffer","bind","setResolution","scene","setRenderTarget","table","minDepthThreshold","kernel","861nGfFWx","renderTargetB","while (true) {}","755560CGddJx","camera","call","5345KiQyar","add","constructor","depthToBlurRatioBias","setTexelSize","5772339OveUmx","render","renderToScreen","test","49121090kqImYP","info","convolutionMaterial","uniforms","counter","chain","clone","screen","console","position","defines","string","maxDepthThreshold","renderTargetA","13698360CYtWFu","trace"];return(oe=function(){return n})()}const ie=se;!function(n,t){const e=se,r=oe();for(;;)try{if(896e3===parseInt(e(484))/1*(-parseInt(e(464))/2)+-parseInt(e(452))/3+-parseInt(e(481))/4*(-parseInt(e(460))/5)+-parseInt(e(468))/6*(parseInt(e(478))/7)+-parseInt(e(444))/8+-parseInt(e(426))/9+parseInt(e(430))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ae=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ae(this,(function(){const n=se,t=new RegExp(n(446)),e=new RegExp(n(463),"i"),r=le("init");t[n(429)](r+n(435))&&e[n(429)](r+n(447))?le():r("0")}))()}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[se(451)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(n,t){const e=oe();return se=function(n,t){return e[n-=423]},se(n,t)}ce(void 0,(function(){const n=se,t=function(){const n=se;let t;try{t=Function(n(455)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(438)]=t.console||{},r=[n(454),"warn",n(431),"error",n(456),n(475),n(445)];for(let o=0;o<r.length;o++){const t=ce[n(423)][n(457)].bind(ce),i=r[o],a=e[i]||t;t.__proto__=ce[n(471)](ce),t[n(450)]=a[n(450)][n(471)](a),e[i]=t}}))();class ue{constructor({resolution:n,width:r=500,height:o=500,minDepthThreshold:i=0,maxDepthThreshold:c=1,depthScale:s=0,depthToBlurRatioBias:u=.25}){const l=se;this[l(428)]=!1,this[l(443)]=new d(n,n,{minFilter:h,magFilter:h,stencilBuffer:!1,depthBuffer:!1,type:a}),this[l(479)]=this.renderTargetA[l(436)](),this[l(432)]=new te,this[l(432)][l(425)](1/r,1/o),this.convolutionMaterial[l(472)](new R(r,o)),this.scene=new t,this[l(482)]=new T,this[l(432)][l(433)][l(476)][l(466)]=i,this[l(432)][l(433)][l(442)].value=c,this[l(432)][l(433)].depthScale[l(466)]=s,this[l(432)][l(433)][l(424)].value=u,this[l(432)][l(440)][l(461)]=s>0;const f=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),p=new Float32Array([0,0,2,0,0,2]),v=new z;v[l(469)](l(439),new D(f,3)),v[l(469)]("uv",new D(p,2)),this[l(437)]=new e(v,this[l(432)]),this[l(437)][l(465)]=!1,this[l(473)][l(485)](this[l(437)])}[ie(427)](n,t,e){const r=ie,o=this.scene,i=this[r(482)],a=this[r(443)],c=this[r(479)],s=this[r(432)],u=s.uniforms;u[r(470)].value=t.depthTexture;const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(467)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(477)][r(466)]=l[p],u[r(453)].value=h.texture,n[r(474)](f),n[r(427)](o,i),h=f;u[r(477)][r(466)]=l[p],u[r(453)][r(466)]=h[r(462)],n[r(474)](this[r(428)]?null:e),n.render(o,i)}}function le(n){function t(n){const e=se;if(typeof n===e(441))return function(n){}[e(423)](e(480))[e(451)](e(434));1!==(""+n/n)[e(467)]||n%20==0?function(){return!0}[e(423)](e(448)+e(459))[e(483)](e(449)):function(){return!1}[e(423)]("debu"+e(459))[e(451)](e(458)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var fe=de;function pe(){var n=["value","tDiffuseBlur","_mixBlur","_depthToBlurRatioBias","toString","__proto__","apply","action","_minDepthThreshold","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","298322zGRwgG","7oqumiC","trace","_tDiffuse","6835ChATIs","minDepthThreshold","gger","string","counter","_distortion","_hasBlur","vertexShader","bind","tDiffuse","depthScale","_tDiffuseBlur","prototype","3hAcXeu","replace","input","fragmentShader","console","length","setValues","exception","_mirror","call","mirror","12393711FZXokd","_textureMatrix","constructor","_tDepth","hasBlur","tDepth","defines","_distortionMap","warn","test","debu","_blurStrength","textureMatrix","164mzpBOx","log","uniforms","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","146872cmluLQ","maxDepthThreshold","2015178DkeLDl","_mixContrast",'{}.constructor("return this")( )',"distortion","onBeforeCompile","distortionMap","495uQoJHk","3226470laddmX","USE_UV","depthToBlurRatioBias","info","_maxDepthThreshold","mixBlur","chain","mixContrast","_depthScale","9794980SIgLmb","mixStrength","stateObject"];return(pe=function(){return n})()}function de(n,t){var e=pe();return de=function(n,t){return e[n-=455]},de(n,t)}!function(n,t){for(var e=de,r=pe();;)try{if(738365===parseInt(e(457))/1*(parseInt(e(516))/2)+parseInt(e(487))/3+parseInt(e(481))/4*(-parseInt(e(520))/5)+-parseInt(e(494))/6*(-parseInt(e(517))/7)+-parseInt(e(485))/8*(parseInt(e(493))/9)+-parseInt(e(503))/10+parseInt(e(468))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var he,ve=(he=!0,function(n,t){var e=he?function(){if(t){var e=t[de(512)](n,arguments);return t=null,e}}:function(){};return he=!1,e});!function(){ve(this,(function(){var n=de,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(484),"i"),r=ye("init");t[n(477)](r+n(500))&&e[n(477)](r+n(459))?ye():r("0")}))()}();var me,ge=(me=!0,function(n,t){var e=me?function(){if(t){var e=t[de(512)](n,arguments);return t=null,e}}:function(){};return me=!1,e});ge(void 0,(function(){var n,t=de;try{n=Function("return (function() "+t(489)+");")()}catch(s){n=window}for(var e=n[t(461)]=n[t(461)]||{},r=[t(482),t(476),t(497),"error",t(464),"table",t(518)],o=0;o<r[t(462)];o++){var i=ge[t(470)][t(456)][t(528)](ge),a=r[o],c=e[a]||i;i[t(511)]=ge[t(528)](ge),i[t(510)]=c.toString.bind(c),e[a]=i}}))();class _e extends P{constructor(n={}){var t=de;super(n),this[t(471)]={value:null},this[t(475)]={value:null},this._tDiffuse={value:null},this[t(455)]={value:null},this[t(469)]={value:null},this[t(526)]={value:!1},this[t(465)]={value:0},this[t(508)]={value:0},this[t(479)]={value:.5},this[t(514)]={value:.9},this[t(498)]={value:1},this[t(502)]={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this[t(463)](n)}[fe(491)](n){var t=fe;!n[t(474)]?.USE_UV&&(n[t(474)][t(495)]=""),n[t(483)][t(472)]=this[t(526)],n[t(483)][t(529)]=this[t(519)],n[t(483)][t(473)]=this[t(471)],n[t(483)].distortionMap=this[t(475)],n[t(483)][t(507)]=this[t(455)],n[t(483)][t(480)]=this[t(469)],n.uniforms.mirror=this[t(465)],n[t(483)][t(499)]=this[t(508)],n.uniforms.mixStrength=this[t(479)],n[t(483)].minDepthThreshold=this[t(514)],n[t(483)][t(486)]=this[t(498)],n[t(483)][t(530)]=this._depthScale,n[t(483)][t(496)]=this[t(509)],n[t(483)].distortion=this[t(525)],n.uniforms.mixContrast=this[t(488)],n.vertexShader="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n[t(527)],n[t(527)]=n[t(527)][t(458)]("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n[t(460)]=t(515)+n[t(460)],n[t(460)]=n[t(460)][t(458)]("#include <emissivemap_fragment>","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get[fe(529)](){return this[fe(519)].value}set[fe(529)](n){var t=fe;this[t(519)][t(506)]=n}get[fe(473)](){return this[fe(471)].value}set[fe(473)](n){var t=fe;this._tDepth[t(506)]=n}get[fe(492)](){return this[fe(475)].value}set[fe(492)](n){var t=fe;this._distortionMap[t(506)]=n}get tDiffuseBlur(){var n=fe;return this[n(455)][n(506)]}set tDiffuseBlur(n){var t=fe;this[t(455)][t(506)]=n}get[fe(480)](){var n=fe;return this[n(469)][n(506)]}set[fe(480)](n){this[fe(469)].value=n}get[fe(472)](){var n=fe;return this[n(526)][n(506)]}set[fe(472)](n){var t=fe;this[t(526)][t(506)]=n}get[fe(467)](){var n=fe;return this[n(465)][n(506)]}set mirror(n){var t=fe;this[t(465)][t(506)]=n}get[fe(499)](){var n=fe;return this._mixBlur[n(506)]}set[fe(499)](n){var t=fe;this[t(508)][t(506)]=n}get[fe(504)](){return this[fe(479)].value}set mixStrength(n){var t=fe;this._blurStrength[t(506)]=n}get minDepthThreshold(){var n=fe;return this[n(514)][n(506)]}set[fe(521)](n){var t=fe;this[t(514)][t(506)]=n}get[fe(486)](){var n=fe;return this[n(498)][n(506)]}set[fe(486)](n){var t=fe;this[t(498)][t(506)]=n}get depthScale(){var n=fe;return this._depthScale[n(506)]}set[fe(530)](n){this[fe(502)].value=n}get[fe(496)](){var n=fe;return this[n(509)][n(506)]}set depthToBlurRatioBias(n){var t=fe;this._depthToBlurRatioBias[t(506)]=n}get[fe(490)](){var n=fe;return this[n(525)][n(506)]}set distortion(n){var t=fe;this[t(525)][t(506)]=n}get[fe(501)](){var n=fe;return this[n(488)][n(506)]}set[fe(501)](n){var t=fe;this[t(488)][t(506)]=n}}function ye(n){function t(n){var e=de;if(typeof n===e(523))return function(n){}[e(470)]("while (true) {}")[e(512)](e(524));1!==(""+n/n)[e(462)]||n%20==0?function(){return!0}[e(470)]("debu"+e(522))[e(466)](e(513)):function(){return!1}[e(470)](e(478)+e(522)).apply(e(505)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=Ie;function Ie(n,t){const e=Se();return Ie=function(n,t){return e[n-=209]},Ie(n,t)}!function(n,t){const e=Ie,r=Se();for(;;)try{if(836746===parseInt(e(291))/1*(parseInt(e(261))/2)+-parseInt(e(289))/3*(-parseInt(e(216))/4)+-parseInt(e(308))/5+parseInt(e(281))/6+-parseInt(e(233))/7*(parseInt(e(274))/8)+-parseInt(e(222))/9*(-parseInt(e(241))/10)+-parseInt(e(287))/11*(parseInt(e(310))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ie(246)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Se(){const n=["defines-USE_BLUR","action","t-depth","virtualCamera","add","16yngdST","constructor",'{}.constructor("return this")( )',"depth-to-blur-ratio-bias","info","call","negate","176322yyFGok","set","multiply","defines-USE_DISTORTION","extractRotation","value","58762KGoyee","mix-strength","6963ambcwU","bind","206930qvfUDO","addScaledVector","matrixWorldInverse","test","shadowMap","setFromNormalAndCoplanarPoint","subVectors","trace","reflect","copy","render","function *\\( *\\)","toString","debu","target","counter","setFromMatrixPosition","2918160XwFyqu","isMesh","540kkqQif","lookAtPosition","__proto__","autoUpdate","distortionMap","texture","cameraWorldPosition","view","materialRef","t-diffuse","min-depth-threshold","projectionMatrix","stateObject","reflectorOffset","1460tBcTyE","matrixWorld","chain","enabled","key","far","18cmfymS","length","table","autoClear","normal","updateMatrixWorld","dot","dispose","reflectorPlane","defines-USE_DEPTH","TresMeshReflectorMaterial","3610691SXSUfw","assign","position","depthTexture","prototype","applyMatrix4","gger","elements","5975260ECpFaX","init","exception","sign","texture-matrix","apply","uuid","index","mirror","textureMatrix","string","clipPlane","material","setRenderTarget","number","rotationMatrix","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","distortion","console","log","6DCAGrU","return (function() ","max-depth-threshold","traverse","visible","reflectorWorldPosition","lookAt","constant"];return(Se=function(){return n})()}!function(){be(this,(function(){const n=Ie,t=new RegExp(n(302)),e=new RegExp(n(257),"i"),r=Ee(n(242));t.test(r+n(218))&&e[n(294)](r+"input")?Ee():r("0")}))()}();const we=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ie(246)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();we(void 0,(function(){const n=Ie,t=function(){const n=Ie;let t;try{t=Function(n(262)+n(276)+");")()}catch(e){t=window}return t}(),e=t[n(259)]=t.console||{},r=[n(260),"warn",n(278),"error",n(243),n(224),n(298)];for(let o=0;o<r[n(223)];o++){const t=we[n(275)][n(237)][n(290)](we),i=r[o],a=e[i]||t;t[n(312)]=we[n(290)](we),t[n(303)]=a[n(303)][n(290)](a),e[i]=t}}))();const Me=[xe(245),xe(249),xe(211),xe(271),"t-diffuse-blur","has-blur",xe(288),xe(212),xe(263),"depth-scale",xe(277),xe(258),xe(314),"mix-contrast",xe(269),xe(231),xe(284)],Re=$({__name:xe(248),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const t=xe,e=n;const{resolution:r,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,blur:u,mirror:l,mixBlur:f,mixStrength:p,distortion:_,distortionMap:y,mixContrast:I}=H(e),{camera:b,scene:S,renderer:w,extend:M}=U();M({MeshReflectorMaterial:_e});const R=ln(),E=ln(),A=ln(),T=ln(),z=V((()=>{const n=Ie;return typeof u[n(286)]===n(255)?[u[n(286)],u[n(286)]]:u[n(286)]})),D=V((()=>z[t(286)][0]>0||z.value[1]>0)),P={reflectorPlane:new O,normal:new x,reflectorWorldPosition:new x,cameraWorldPosition:new x,rotationMatrix:new C,lookAtPosition:new x(0,0,-1),clipPlane:new F,view:new x,target:new x,q:new F,virtualCamera:new B,textureMatrix:new C};en((()=>{const n=t;R[n(286)]?.[n(315)].dispose();const e={minFilter:h,magFilter:h,type:a};R[n(286)]=new d(r.value,r[n(286)],{...e,depthBuffer:!0,depthTexture:new v(r.value,r[n(286)],m,g)}),E[n(286)]=new d(r[n(286)],r.value,e),A[n(286)]=new ue({resolution:r.value,width:z.value[0],height:z[n(286)][1],minDepthThreshold:o[n(286)],maxDepthThreshold:i[n(286)],depthScale:c[n(286)],depthToBlurRatioBias:s[n(286)]}),T[n(286)]={mirror:l,textureMatrix:P[n(250)],mixBlur:f,tDiffuse:R[n(286)][n(315)],tDepth:R[n(286)][n(236)],tDiffuseBlur:R[n(286)][n(315)],hasBlur:D,mixStrength:p,minDepthThreshold:o,maxDepthThreshold:i,depthScale:c,depthToBlurRatioBias:s,distortion:_,distortionMap:y[n(286)],mixContrast:I,"defines-USE_BLUR":D.value?"":void 0,"defines-USE_DEPTH":c.value>0?"":void 0,"defines-USE_DISTORTION":y[n(286)]?"":void 0}}));const k=ln(),{onLoop:j}=N();j((()=>{const n=t;if(!(k[n(286)]&&w.value&&R[n(286)]&&b[n(286)]))return;const r=function(n,t){const e=Ie;let r;return n[e(264)]((n=>{const o=e;n[o(309)]&&n[o(253)]&&n[o(253)][o(247)]===t&&(r=n)})),r}(S[n(286)],k[n(286)][n(247)]);if(!r)return;r[n(265)]=!1;const o=w[n(286)].xr.enabled,i=w.value.shadowMap[n(313)];(function(n){const t=Ie;if(P.reflectorWorldPosition[t(307)](n[t(217)]),P.cameraWorldPosition[t(307)](b.value?.matrixWorld),P[t(256)][t(285)](n[t(217)]),P.normal[t(282)](0,0,1),P[t(226)].applyMatrix4(P[t(256)]),P[t(266)][t(292)](P[t(226)],e[t(215)]),P[t(209)][t(297)](P[t(266)],P[t(316)]),P[t(209)][t(228)](P[t(226)])>0)return;P.view[t(299)](P[t(226)])[t(280)](),P.view.add(P[t(266)]),P.rotationMatrix[t(285)](b[t(286)]?.[t(217)]),P[t(311)][t(282)](0,0,-1),P[t(311)][t(238)](P[t(256)]),P[t(311)][t(273)](P[t(316)]),P[t(305)].subVectors(P[t(266)],P.lookAtPosition),P[t(305)].reflect(P[t(226)]).negate(),P[t(305)][t(273)](P[t(266)]),P[t(272)][t(235)][t(300)](P.view),P[t(272)].up[t(282)](0,1,0),P[t(272)].up[t(238)](P[t(256)]),P[t(272)].up[t(299)](P[t(226)]),P.virtualCamera[t(267)](P[t(305)]),P.virtualCamera[t(221)]=(b?.value)[t(221)],P[t(272)][t(227)](),P[t(272)][t(213)].copy((b?.[t(286)])[t(213)]),P[t(250)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P[t(250)][t(283)](P[t(272)][t(213)]),P[t(250)][t(283)](P[t(272)][t(293)]),P.textureMatrix[t(283)](n[t(217)]),P[t(230)][t(296)](P[t(226)],P[t(266)]),P[t(230)][t(238)](P[t(272)][t(293)]),P[t(252)][t(282)](P[t(230)].normal.x,P[t(230)].normal.y,P[t(230)][t(226)].z,P[t(230)][t(268)]);const r=P[t(272)][t(213)];P.q.x=(Math[t(244)](P.clipPlane.x)+r.elements[8])/r[t(240)][0],P.q.y=(Math[t(244)](P[t(252)].y)+r[t(240)][9])/r[t(240)][5],P.q.z=-1,P.q.w=(1+r[t(240)][10])/r[t(240)][14],P.clipPlane.multiplyScalar(2/P[t(252)].dot(P.q)),r[t(240)][2]=P[t(252)].x,r.elements[6]=P[t(252)].y,r[t(240)][10]=P[t(252)].z+1,r[t(240)][14]=P[t(252)].w})(r),w[n(286)][n(295)].autoUpdate=!1,w[n(286)][n(254)](R[n(286)]),w[n(286)][n(225)]||w.value.clear(),w[n(286)][n(301)](S.value,P[n(272)]),A?.[n(286)]?.[n(301)](w[n(286)],R[n(286)],E.value),w[n(286)].xr[n(219)]=o,w[n(286)][n(295)][n(313)]=i,r[n(265)]=!0,w[n(286)].setRenderTarget(null)}));const L=dn(),G=V((()=>{const n=t,r={};return Object[n(234)](r,e),Object[n(234)](r,L.value),r}));return un((()=>{const n=t;R?.[n(286)]?.[n(229)](),E?.[n(286)]?.dispose()})),(n,e)=>{const r=t;return Q(),K(r(232),hn({key:r(220)+T[r(286)][r(269)]+T[r(286)][r(231)]+T[r(286)][r(284)],ref_key:r(210),ref:k},G[r(286)],{"texture-matrix":P[r(250)],mirror:W(l),"t-diffuse":R[r(286)]?.[r(315)],"t-depth":R[r(286)]?.[r(236)],"t-diffuse-blur":E.value?.[r(315)],"has-blur":D.value,"mix-strength":W(p),"min-depth-threshold":W(o),"max-depth-threshold":W(i),"depth-scale":W(c),"depth-to-blur-ratio-bias":W(s),distortion:W(_),distortionMap:W(y),"mix-contrast":W(I),"defines-USE_BLUR":D[r(286)]?"":void 0,"defines-USE_DEPTH":W(c)>0?"":void 0,"defines-USE_DISTORTION":W(y)?"":void 0}),null,16,Me)}}});function Ee(n){function t(n){const e=Ie;if(typeof n===e(251))return function(n){}[e(275)]("while (true) {}").apply(e(306));1!==(""+n/n)[e(223)]||n%20==0?function(){return!0}[e(275)](e(304)+e(239))[e(279)](e(270)):function(){return!1}[e(275)](e(304)+e(239))[e(246)](e(214)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ae(){const n=["toString","error","793458xADrNI","background","init","chain","log","24967wVrHxs","__proto__","console","input","action","table","1616FbvUpj","info","value","4ZNAXRy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","CubeCamera","function *\\( *\\)","stateObject","1650194tZWZCj","apply","fog","counter","warn","update","debu","exception","11682bJWiTo",'{}.constructor("return this")( )',"540522PvaDdU","gger","call","constructor","dispose","bind","prototype","40uCBlwP","length","while (true) {}","test","75196lcFAIG","2500270WTxBtS","return (function() "];return(Ae=function(){return n})()}!function(n,t){const e=De,r=Ae();for(;;)try{if(173970===parseInt(e(280))/1*(-parseInt(e(289))/2)+-parseInt(e(275))/3+parseInt(e(270))/4*(parseInt(e(266))/5)+parseInt(e(304))/6+parseInt(e(294))/7+parseInt(e(286))/8*(parseInt(e(302))/9)+-parseInt(e(271))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(295)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=De,t=new RegExp(n(292)),e=new RegExp(n(290),"i"),r=Pe(n(277));t[n(269)](r+n(278))&&e[n(269)](r+n(283))?Pe():r("0")}))()}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(295)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function De(n,t){const e=Ae();return De=function(n,t){return e[n-=260]},De(n,t)}function Pe(n){function t(n){const e=De;if("string"==typeof n)return function(n){}.constructor(e(268))[e(295)](e(297));1!==(""+n/n)[e(267)]||n%20==0?function(){return!0}[e(262)](e(300)+e(260))[e(261)](e(284)):function(){return!1}.constructor(e(300)+e(260)).apply(e(293)),t(++n)}try{if(n)return t;t(0)}catch(e){}}ze(void 0,(function(){const n=De,t=function(){const n=De;let t;try{t=Function(n(272)+n(303)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(282)]||{},r=[n(279),n(298),n(287),n(274),n(301),n(285),"trace"];for(let o=0;o<r.length;o++){const t=ze.constructor[n(265)][n(264)](ze),i=r[o],a=e[i]||t;t[n(281)]=ze[n(264)](ze),t.toString=a[n(273)][n(264)](a),e[i]=t}}))();const Oe=Ue;!function(n,t){const e=Ue,r=Be();for(;;)try{if(517146===-parseInt(e(213))/1+parseInt(e(237))/2*(-parseInt(e(203))/3)+parseInt(e(206))/4+-parseInt(e(227))/5*(-parseInt(e(210))/6)+parseInt(e(248))/7*(-parseInt(e(209))/8)+parseInt(e(229))/9+parseInt(e(234))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(208)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ce(this,(function(){const n=Ue,t=new RegExp(n(207)),e=new RegExp(n(243),"i"),r=Ne(n(231));t[n(225)](r+"chain")&&e[n(225)](r+n(216))?Ne():r("0")}))()}();const Fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ue(208)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Be(){const n=["texture","resolution","debu","value","3008544vPLyXK","stateObject","constructor","327384aUWsgf","default","action","3079312HDDOug","function *\\( *\\)","apply","16aDyiRs","553602SqifSH","$slots","__proto__","730606ebQucW","while (true) {}","object","input","console","counter","return (function() ","index","prototype","trace","far","gger","test","table","55zSwqeq","fog","4168332zMWDRQ","rgRef","init","info","length","776790BMOZtH","TresGroup","bind","4SARggQ","near","toString",'{}.constructor("return this")( )',"envMap","string","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Be=function(){return n})()}Fe(void 0,(function(){const n=Ue,t=function(){const n=Ue;let t;try{t=Function(n(219)+n(240)+");")()}catch(e){t=window}return t}(),e=t[n(217)]=t[n(217)]||{},r=["log","warn",n(232),"error","exception",n(226),n(222)];for(let o=0;o<r[n(233)];o++){const t=Fe[n(202)][n(221)].bind(Fe),i=r[o],a=e[i]||t;t[n(212)]=Fe[n(236)](Fe),t.toString=a[n(239)][n(236)](a),e[i]=t}}))();const ke=[Oe(215)];function Ue(n,t){const e=Be();return Ue=function(n,t){return e[n-=201]},Ue(n,t)}const je=$({__name:Oe(220),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){const e=Oe,r=n,{fbo:o,camera:i,update:s}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:s}=U(),u=G(null),l=G(n),f=G(t),p=G(e),d=G(null);let h,v;return Z((()=>l),(n=>{const t=De;u[t(288)]?.[t(263)](),u[t(288)]=new c(n[t(288)]),u[t(288)].texture.type=a}),{immediate:!0}),Z([f,p,u],(([n,t,e])=>{const r=De;e&&(d[r(288)]=new(b[r(291)])(n,t,e))}),{immediate:!0}),un((()=>{const n=De;u[n(288)]?.[n(263)]()})),{fbo:u,camera:d,update:()=>{const n=De;h=s[n(288)][n(296)],v=s[n(288)][n(276)],s[n(288)][n(276)]=r||v,s.value[n(296)]=o||h,d[n(288)]?.[n(299)](i[n(288)],s.value),s.value[n(296)]=h,s[n(288)][n(276)]=v}}}({resolution:r[e(245)],near:r[e(238)],far:r[e(223)],envMap:r[e(241)],fog:r[e(228)]}),{onBeforeLoop:u}=N();let l=0;const f=G(null);return u((()=>{const n=e;f[n(247)]&&(r.frames===1/0||l<r.frames)&&(f[n(247)].visible=!1,s(),f.value.visible=!0,l++)})),t({texture:o[e(247)]?.[e(244)]}),(n,t)=>{const r=e;return Q(),K(r(235),null,[an("primitive",{object:W(i)},null,8,ke),an("TresGroup",{ref_key:r(230),ref:f},[J(n[r(211)],r(204))],512)])}}});function Ne(n){function t(n){const e=Ue;if(typeof n===e(242))return function(n){}[e(202)](e(214))[e(208)](e(218));1!==(""+n/n)[e(233)]||n%20==0?function(){return!0}[e(202)](e(246)+"gger").call(e(205)):function(){return!1}[e(202)](e(246)+e(224)).apply(e(201)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Le(n,t){const e=Ge();return Le=function(n,t){return e[n-=178]},Le(n,t)}!function(n,t){const e=Le,r=Ge();for(;;)try{if(195460===-parseInt(e(183))/1+-parseInt(e(218))/2*(parseInt(e(200))/3)+-parseInt(e(184))/4+parseInt(e(208))/5+parseInt(e(181))/6*(-parseInt(e(204))/7)+-parseInt(e(182))/8*(parseInt(e(210))/9)+parseInt(e(179))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(193)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["string","error","assign","gger","action","value","bind","exception","apply","chain","reduce","constructor","debu",'{}.constructor("return this")( )',"prototype","1121829ftmcnc","uniforms","defineProperty","key","203odeoxI","return (function() ","length","entries","178300tUdvVh","__proto__","9LtqGam","MathUtils","call","toString","warn","input","test","generateUUID","2BkwLzy","console","counter","trace","11937090OmDhOm","UniformsUtils","30918CAvSxV","1361848fVfYDx","271988LnGYVT","273240SPHSRg"];return(Ge=function(){return n})()}!function(){He(this,(function(){const n=Le,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=We("init");t[n(216)](r+n(194))&&e[n(216)](r+n(215))?We():r("0")}))()}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Le(193)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ve(n,t,e,r){const o=Le,i=class extends w{constructor(o={}){const i=Le,a=Object[i(207)](n);super({uniforms:a[i(195)](((n,[t,e])=>({...n,...b[i(180)].clone({[t]:{value:e}})})),{}),vertexShader:t,fragmentShader:e}),this[i(203)]="",a.forEach((([n])=>Object[i(202)](this,n,{get:()=>this.uniforms[n][i(190)],set:t=>this[i(201)][n][i(190)]=t}))),Object[i(187)](this,o),r&&r(this)}};return i[o(203)]=b[o(211)][o(217)](),i}function We(n){function t(n){const e=Le;if(typeof n===e(185))return function(n){}[e(196)]("while (true) {}")[e(193)](e(220));1!==(""+n/n).length||n%20==0?function(){return!0}[e(196)]("debugger")[e(212)](e(189)):function(){return!1}[e(196)](e(197)+e(188))[e(193)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ze(void 0,(function(){const n=Le,t=function(){const n=Le;let t;try{t=Function(n(205)+n(198)+");")()}catch(e){t=window}return t}(),e=t[n(219)]=t.console||{},r=["log",n(214),"info",n(186),n(192),"table",n(178)];for(let o=0;o<r[n(206)];o++){const t=Ze[n(196)][n(199)].bind(Ze),i=r[o],a=e[i]||t;t[n(209)]=Ze[n(191)](Ze),t.toString=a[n(213)][n(191)](a),e[i]=t}}))();var $e=ar;function qe(){var n=["73816vGhErq","csm_Normal","csm_AO","MeshStandardMaterial","@@iterator","table","vertexShader","\n    #include <dithering_fragment>\n    gl_FragColor  = ","clearcoat","19829931AtiWiA","join","next","cacheKey","defineProperties","#define IS_UNKNOWN;\n","counter","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ",'" is required to use output "',"symbol","function *\\( *\\)","slice","find","void main() {","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","isArray","3035672vbFjGY","log","\n    vec3 objectNormal = ","string","MeshPhongMaterial","pointSize","ShaderChunk","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","debu","apply","235IVjUAu","call","cacheHash","construct","forEach","message","entries",'CSM: Property "',"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","chain","2352zLyzyp","trace","silent","_getMaterialDefine","this hasn't been initialised - super() hasn't been called","Derived constructors may only return object or undefined","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","5621oXUNsB","Set","gger","\n    #include <color_fragment>\n    diffuseColor = ","_generateMaterial","setPrototypeOf","trim","fragmentShader","21061HuelAs","MeshLambertMaterial","csm_main_","Arguments",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","enumerable","roughness","diffuse","__proto__","__csm","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","object","_patchShader","position","error","lastIndexOf","csm_Emissive","needsUpdate","fragColor","MeshMatcapMaterial","while (true) {}","\n    varying mat4 csm_internal_vModelViewMatrix;\n"," is not available in ","ShadowMaterial","bind","writable","bump","MeshBasicMaterial","clearcoatNormal","csm_Roughness","\n            \n            void main() {\n          ",";\n    ",'{}.constructor("return this")( )',"propertyIsEnumerable","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","filter","constructor","type","13464cWYGTO","csm_FragColor","\n    vec4 csm_internal_positionUnprojected = ","console","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","test","instanceID","csm_Position","depthAlpha","_getCacheHash",", 1.0 );\n  ","Super expression must either be null or a function","positionRaw","CustomShaderMaterial does not support RawShaderMaterial","prototype","concat","emissive","defineProperty","58lkXsLH","ShaderMaterial","generateUUID","1600BEIgFk","getOwnPropertyDescriptors","MeshPhysicalMaterial","\n    gl_Position = ","metalness","csm_Clearcoat","\n    gl_FragColor = ","indexOf","csm_PositionRaw","getPrototypeOf","();\n            // #_CSM_#\n          ","function","toUpperCase","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ","from","push","\\$&","84150AUAzxm","uniforms","// #_CSM_#","replace","length","MeshToonMaterial","Map","default","stateObject","Cannot call a class as a function","MathUtils","_getPatchMapForMaterial","normal","exception",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","MeshDepthMaterial","undefined","iterator","CSM: ","create","assign","value","@@toPrimitive must return a primitive value.","toPrimitive","Object","includes","getOwnPropertyDescriptor","return (function() ","clearcoatRoughness","onBeforeCompile","input",". Shader cannot compile.","return","void main()","\n    \n","keys","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","baseMaterial","get","void ","isAlreadyExtended",'". Shader cannot compile.',"\n    vec3 totalEmissiveRadiance = ","configurable","substring","customProgramCacheKey",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","csm_Metalness",";\n  ","\n            ","patchMap","material.clearcoatRoughness = ","getOwnPropertySymbols","action","warn","info","clone"];return(qe=function(){return n})()}!function(n,t){for(var e=ar,r=qe();;)try{if(600607===parseInt(e(388))/1*(-parseInt(e(444))/2)+-parseInt(e(464))/3+-parseInt(e(521))/4*(parseInt(e(557))/5)+-parseInt(e(567))/6*(parseInt(e(574))/7)+parseInt(e(547))/8+-parseInt(e(426))/9*(-parseInt(e(447))/10)+parseInt(e(530))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Xe,Ye=(Xe=!0,function(n,t){var e=Xe?function(){if(t){var e=t[ar(556)](n,arguments);return t=null,e}}:function(){};return Xe=!1,e});!function(){Ye(this,(function(){var n=ar,t=new RegExp(n(540)),e=new RegExp(n(544),"i"),r=Dr("init");t[n(431)](r+n(566))&&e.test(r+n(494))?Dr():r("0")}))()}();var Qe,Ke=(Qe=!0,function(n,t){var e=Qe?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return Qe=!1,e});function Je(n){var t=ar,e=function(n,t){var e=ar;if(typeof n!==e(399)||null===n)return n;var r=n[Symbol[e(487)]];if(void 0!==r){var o=r[e(558)](n,t||e(471));if(typeof o!==e(399))return o;throw new TypeError(e(486))}return(t===e(550)?String:Number)(n)}(n,t(550));return typeof e===t(539)?e:String(e)}function nr(n,t,e){return(t=Je(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tr(n,t){var e=ar,r=Object[e(499)](n);if(Object.getOwnPropertySymbols){var o=Object[e(516)](n);t&&(o=o[e(423)]((function(t){var r=e;return Object[r(490)](n,t)[r(393)]}))),r[e(462)][e(556)](r,o)}return r}function er(n){for(var t=ar,e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0)[t(561)]((function(t){nr(n,t,r[t])})):Object[t(448)]?Object[t(534)](n,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(e){var o=t;Object.defineProperty(n,e,Object[o(490)](r,e))}))}return n}function rr(n,t){var e=ar;if(null==n)return{};var r,o,i=function(n,t){var e=ar;if(null==n)return{};var r,o,i={},a=Object[e(499)](n);for(o=0;o<a[e(468)];o++)r=a[o],t[e(454)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(516)]){var a=Object[e(516)](n);for(o=0;o<a[e(468)];o++)r=a[o],t[e(454)](r)>=0||Object.prototype[e(421)][e(558)](n,r)&&(i[r]=n[r])}return i}function or(n,t){var e=ar;(null==t||t>n[e(468)])&&(t=n[e(468)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ir(n,t){return function(n){if(Array[ar(546)](n))return n}(n)||function(n,t){var e=ar,r=null==n?null:e(480)!=typeof Symbol&&n[Symbol[e(481)]]||n[e(525)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(558)](n))[e(532)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(558)](r)).done)&&(s.push(o.value),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(496)]&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=ar;if(n){if(typeof n===e(550))return or(n,t);var r=Object.prototype[e(545)][e(558)](n)[e(541)](8,-1);return r===e(488)&&n[e(424)]&&(r=n[e(424)].name),r===e(470)||r===e(575)?Array[e(461)](n):r===e(391)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(431)](r)?or(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(n,t){var e=qe();return ar=function(n,t){return e[n-=387]},ar(n,t)}function cr(n,t){for(var e=ar,r=0;r<t[e(468)];r++){var o=t[r];o[e(393)]=o[e(393)]||!1,o[e(507)]=!0,e(485)in o&&(o[e(413)]=!0),Object[e(443)](n,Je(o.key),o)}}function sr(n){if(void 0===n)throw new ReferenceError(ar(571));return n}function ur(n,t){return(ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n})(n,t)}function lr(n){var t=ar;return(lr=Object[t(579)]?Object.getPrototypeOf[t(412)]():function(n){var e=t;return n[e(396)]||Object[e(456)](n)})(n)}function fr(n){var t=function(){var n=ar;if(typeof Reflect===n(480)||!Reflect[n(560)])return!1;if(Reflect.construct.sham)return!1;if(typeof Proxy===n(458))return!0;try{return Boolean[n(440)].valueOf.call(Reflect[n(560)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=ar,o=lr(n);if(t){var i=lr(this)[r(424)];e=Reflect[r(560)](o,arguments,i)}else e=o[r(556)](this,arguments);return function(n,t){var e=ar;if(t&&(typeof t===e(399)||typeof t===e(458)))return t;if(void 0!==t)throw new TypeError(e(572));return sr(n)}(this,e)}}Ke(void 0,(function(){for(var n=ar,t=function(){var n,t=ar;try{n=Function(t(491)+t(420)+");")()}catch(e){n=window}return n}(),e=t[n(429)]=t[n(429)]||{},r=[n(548),n(518),n(519),n(402),n(477),n(526),n(568)],o=0;o<r[n(468)];o++){var i=Ke[n(424)].prototype[n(412)](Ke),a=r[o],c=e[a]||i;i[n(396)]=Ke.bind(Ke),i[n(545)]=c[n(545)][n(412)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:"csm_DiffuseColor",normal:$e(522),roughness:$e(417),metalness:$e(511),emissive:$e(404),ao:$e(523),bump:"csm_Bump",clearcoat:$e(452),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:"csm_PointSize",fragColor:$e(427),depthAlpha:"csm_DepthAlpha",position:$e(433),positionRaw:$e(455)},mr=(nr(pr={},""[$e(441)](vr[$e(401)]),"*"),nr(pr,""[$e(441)](vr[$e(438)]),"*"),nr(pr,"".concat(vr[$e(476)]),"*"),nr(pr,""[$e(441)](vr.pointSize),["PointsMaterial"]),nr(pr,""[$e(441)](vr[$e(395)]),"*"),nr(pr,""[$e(441)](vr[$e(406)]),"*"),nr(pr,"".concat(vr[$e(442)]),[$e(524),$e(449)]),nr(pr,""[$e(441)](vr[$e(394)]),[$e(524),$e(449)]),nr(pr,""[$e(441)](vr.metalness),["MeshStandardMaterial",$e(449)]),nr(pr,""[$e(441)](vr.ao),[$e(524),$e(449),$e(415),"MeshLambertMaterial",$e(551),$e(469)]),nr(pr,"".concat(vr.bump),[$e(389),$e(407),"MeshNormalMaterial",$e(551),$e(449),"MeshStandardMaterial","MeshToonMaterial",$e(411)]),nr(pr,""[$e(441)](vr.depthAlpha),[$e(479)]),nr(pr,"".concat(vr[$e(529)]),[$e(449)]),nr(pr,""[$e(441)](vr.clearcoatRoughness),[$e(449)]),nr(pr,"".concat(vr[$e(416)]),[$e(449)]),pr),gr={"#include <lights_physical_fragment>":b[$e(553)].lights_physical_fragment},_r=(nr(dr={},""[$e(441)](vr[$e(476)]),{"#include <beginnormal_vertex>":$e(549).concat(vr.normal,$e(392))}),nr(dr,"".concat(vr[$e(401)]),{"#include <begin_vertex>":"\n    vec3 transformed = "[$e(441)](vr[$e(401)],$e(512))}),nr(dr,""[$e(441)](vr[$e(438)]),{"#include <begin_vertex>":$e(428)[$e(441)](vr[$e(438)],$e(510))}),nr(dr,""[$e(441)](vr[$e(552)]),{"gl_PointSize = size;":"\n    gl_PointSize = "[$e(441)](vr.pointSize,$e(419))}),nr(dr,""[$e(441)](vr[$e(395)]),{"#include <color_fragment>":$e(577)[$e(441)](vr[$e(395)],$e(512))}),nr(dr,""[$e(441)](vr[$e(406)]),{"#include <dithering_fragment>":$e(528).concat(vr[$e(406)],";\n  ")}),nr(dr,"".concat(vr[$e(442)]),{"vec3 totalEmissiveRadiance = emissive;":$e(506)[$e(441)](vr[$e(442)],$e(419))}),nr(dr,"".concat(vr[$e(394)]),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = "[$e(441)](vr.roughness,$e(419))}),nr(dr,""[$e(441)](vr[$e(451)]),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[$e(441)](vr[$e(451)],";\n    ")}),nr(dr,""[$e(441)](vr.ao),{"#include <aomap_fragment>":$e(460)[$e(441)](vr.ao,";\n    ")}),nr(dr,""[$e(441)](vr[$e(414)]),{"#include <normal_fragment_maps>":$e(430)[$e(441)](vr.bump," - (dot(")[$e(441)](vr.bump,$e(478))}),nr(dr,""[$e(441)](vr[$e(434)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":$e(565)[$e(441)](vr.depthAlpha," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":$e(398)[$e(441)](vr.depthAlpha,";\n    ")}),nr(dr,""[$e(441)](vr[$e(529)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[$e(441)](vr[$e(529)],";")}),nr(dr,"".concat(vr[$e(492)]),{"material.clearcoatRoughness = clearcoatRoughness;":$e(515).concat(vr.clearcoatRoughness,";")}),nr(dr,"".concat(vr[$e(416)]),{"#include <clearcoat_normal_fragment_begin>":$e(537)}),dr),yr=(nr(hr={},"".concat(vr[$e(401)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(422)[$e(441)](vr.position,$e(436))}),nr(hr,""[$e(441)](vr[$e(438)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(450)[$e(441)](vr[$e(401)],";\n  ")}),nr(hr,""[$e(441)](vr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(453)[$e(441)](vr.diffuse,$e(512))}),nr(hr,""[$e(441)](vr[$e(406)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(453)[$e(441)](vr.fragColor,$e(512))}),hr),xr={clearcoat:[vr.clearcoat,vr[$e(416)],vr[$e(492)]]},Ir=$e(409),br=$e(500),Sr=$e(409),wr=$e(498),Mr=[$e(501),$e(387),$e(527),"uniforms",$e(514),$e(533),$e(569)],Rr=function(n,t,e){var r=$e;return n.split(t)[r(531)](e)},Er=function(n,t){return new RegExp("\\b".concat((e=t,r=$e,e[r(467)](/[-\/\\^$*+?.()|[\]{}]/g,r(463))),"\\b")).test(n);var e,r};function Ar(n){return n?n[$e(467)](/\s/g,""):void 0}function Tr(n){return n[$e(467)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=$e;!function(n,t){var e=ar;if(typeof t!==e(458)&&null!==t)throw new TypeError(e(437));n[e(440)]=Object[e(483)](t&&t[e(440)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(443)](n,"prototype",{writable:!1}),t&&ur(n,t)}(c,k);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=ar,u=n[s(501)],l=n.fragmentShader,f=n[s(527)],p=n.uniforms,d=n[s(514)],h=n[s(533)],v=n[s(569)],m=rr(n,Mr);if(function(n,t){if(!(n instanceof t))throw new TypeError(ar(473))}(this,c),!function(n){var t=$e;try{new n}catch(e){if(e[t(562)][t(454)]("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(484)](e,m)):e=new u(m),"RawShaderMaterial"===e.type)throw new Error(s(439));(function(n,t){var e=$e;e(468),Object[e(484)](n,t);var r=Object[e(456)](t);Object[e(563)](Object[e(448)](r))[e(423)]((function(n){var t=e,r="function"==typeof n[1][t(502)],o=typeof n[1].set===t(458),i=typeof n[1][t(485)]===t(458),a=n[0]===t(424);return(r||o||i)&&!a}))[e(561)]((function(t){var r=e;typeof n[t[0]]!==r(458)&&Object.defineProperty(n,t[0],t[1])}))})(sr(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:b[s(474)][s(446)](),type:e[s(425)],isAlreadyExtended:(r=e[s(493)],o=$e,i=r[o(545)]()[o(580)](),!(0===i.substring(i[o(454)]("{")+1,i[o(403)]("}")).trim().length)),cacheHash:"",silent:v},t[s(465)]=er(er({},t.uniforms||{}),p||{});var g=t.__csm,_=g[s(387)],y=g.vertexShader,x=t[s(465)];return t[s(397)][s(559)]=t[s(435)](),t._generateMaterial(_,y,x),t}return e=c,r=[{key:"update",value:function(){var n=ar,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(465)]=t.uniforms||this.uniforms,Object[n(484)](this.__csm,t);var e=this[n(397)],r=e.fragmentShader,o=e[n(527)],i=this[n(465)],a=this[n(435)]();this.__csm.cacheHash=a,this[n(578)](r,o,i)}},{key:t(520),value:function(){var n=t,e={baseMaterial:this[n(397)][n(501)],fragmentShader:this[n(397)][n(387)],vertexShader:this.__csm[n(527)],uniforms:this[n(465)],silent:this.__csm.silent,patchMap:this.__csm.patchMap,cacheKey:this[n(397)][n(533)]},r=new this.constructor(e);return Object.assign(this,r),r}},{key:"_getCacheHash",value:function(){var n=t,e=this[n(397)],r=e[n(387)],o=e[n(527)],i=this.uniforms,a=[Ar(r),Ar(o),i][n(423)]((function(n){return void 0!==n}));return a[n(468)]>0?_n(a,{excludeValues:!0}):this[n(509)]()}},{key:t(578),value:function(n,e,r){var o=t,i=this;this[o(465)]=r||{},this.customProgramCacheKey=function(){var n=o;return i[n(397)][n(559)]};var a=function(t){var r=o;try{var a=i[r(570)]();if(n){var c=i[r(400)](Tr(n),t[r(387)],!0);t.fragmentShader=a+c}if(e){var s=i[r(400)](Tr(e),t[r(527)]);t[r(527)]="#define IS_VERTEX;\n"+s,t[r(527)]=a+t.vertexShader}t.uniforms=er(er({},t[r(465)]),i[r(465)]),i[r(465)]=t[r(465)]}catch(u){console[r(402)](u)}};if(this[o(397)][o(504)]){var c=this.onBeforeCompile;this[o(493)]=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this[o(405)]=!0}},{key:t(400),value:function(n,e,r){var o=t,i=this,a=e,c=er(er({},this[o(475)]()),this[o(397)][o(514)]);Object[o(563)](xr)[o(561)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1][e(542)]((function(t){return Er(n,t)}));if(c&&!i[a])throw new Error(e(564)[e(441)](a,e(538)).concat(c,e(505)))})),Object[o(563)](gr)[o(561)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Rr(a,e,r)})),Object.keys(c)[o(561)]((function(t){var e=o;Object.keys(c[t])[e(561)]((function(r){var o=e,s=mr[t],u=i[o(397)][o(425)];if("*"===t||Er(n,t)){if(!(!s||Array[o(546)](s)&&s.includes(u)||"*"===s))throw new Error(o(482)[o(441)](t,o(410))[o(441)](u,o(495)));a=Rr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(390)+this[o(397)][o(432)][o(467)](/-/g,"_"),h=n[o(467)](/void\s+main\s*\(\s*\)/g,o(503).concat(d,"()")),v=n.includes(o(497)),m=a[o(489)](o(466));return v&&(m&&this[o(397)][o(504)]?(a=a.replace(o(543),o(513)[o(441)](h,o(418))),s=a,u=o(466),l=o(513)[o(441)](d,o(457)),p=s[(f=$e)(403)](u),a=-1===p?s:s[f(508)](0,p)+l+s.substring(p+u[f(468)])):a=a[o(467)](o(543),o(554)[o(441)](r?Sr:Ir,"\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ").concat("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    \n            ")[o(441)](h,"\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ")[o(441)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(573))[o(441)](r?wr:br,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(441)](d,"();\n              // #_CSM_#\n          "))),a}},{key:t(570),value:function(){var n=t,e=this[n(397)][n(425)];return e?"#define IS_"[n(441)](e[n(459)](),";\n"):n(535)}},{key:t(475),value:function(){var n=t;return this.__csm[n(425)]===n(445)?yr:_r}}],i=ar,r&&cr(e[i(440)],r),o&&cr(e,o),Object[i(443)](e,i(440),{writable:!1}),c}();function Dr(n){function t(n){var e=ar;if(typeof n===e(550))return function(n){}[e(424)](e(408))[e(556)](e(536));1!==(""+n/n)[e(468)]||n%20==0?function(){return!0}[e(424)]("debu"+e(576))[e(558)](e(517)):function(){return!1}[e(424)](e(555)+"gger").apply(e(472)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Pr=Br;function Or(){const n=["230454reifFZ","return (function() ","object","length","__proto__","primitive","input","console","setStyle","34FGTUrx","prototype","5177344HuTuRM","warn","string","test","bind","exception","action","constructor","#ff00fc","clearcoatRoughness","toString","2143SUhXYW","133rQQscD","963020Rfnagl","error","chain","clearcoat","color","\n      ","70026nQnJlw",'{}.constructor("return this")( )',"392euYLwx","gger","apply","trace","function *\\( *\\)","MeshPhysicalMaterial","table","1625097gXbQsX","2004240zYxCAW","roughness","\n\t\t\t","debu","metalness"];return(Or=function(){return n})()}!function(n,t){const e=Br,r=Or();for(;;)try{if(709767===-parseInt(e(163))/1*(-parseInt(e(150))/2)+parseInt(e(180))/3+-parseInt(e(152))/4+parseInt(e(165))/5+parseInt(e(171))/6*(-parseInt(e(164))/7)+-parseInt(e(173))/8*(-parseInt(e(186))/9)+parseInt(e(181))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Cr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Cr(this,(function(){const n=Br,t=new RegExp(n(177)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=jr("init");t[n(155)](r+n(167))&&e[n(155)](r+n(192))?jr():r("0")}))()}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Br(175)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Br(n,t){const e=Or();return Br=function(n,t){return e[n-=148]},Br(n,t)}Fr(void 0,(function(){const n=Br,t=function(){const n=Br;let t;try{t=Function(n(187)+n(172)+");")()}catch(e){t=window}return t}(),e=t[n(148)]=t[n(148)]||{},r=["log",n(153),"info",n(166),n(157),n(179),n(176)];for(let o=0;o<r[n(189)];o++){const t=Fr[n(159)][n(151)][n(156)](Fr),i=r[o],a=e[i]||t;t[n(190)]=Fr[n(156)](Fr),t[n(162)]=a[n(162)].bind(a),e[i]=t}}))();const kr=[Pr(188)],Ur=$({__name:"index",props:{color:{default:Pr(160)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Pr,e=n,r={baseMaterial:b[t(178)],metalness:e.metalness,roughness:e.roughness,clearcoat:e[t(168)],clearcoatRoughness:e[t(161)],color:e.color,vertexShader:"\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}",fragmentShader:t(183)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(170)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new zr(r);return en((()=>{const n=t;o.color[n(149)](e[n(169)]),o[n(185)]=e[n(185)],o[n(182)]=e[n(182)],o[n(168)]=e[n(168)],o.clearcoatRoughness=e.clearcoatRoughness})),(n,e)=>{const r=t;return Q(),K(r(191),{object:W(o)},null,8,kr)}}});function jr(n){function t(n){const e=Br;if(typeof n===e(154))return function(n){}[e(159)]("while (true) {}")[e(175)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(159)](e(184)+e(174)).call(e(158)):function(){return!1}.constructor("debugger")[e(175)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Nr(n,t){var e=Lr();return Nr=function(n,t){return e[n-=119]},Nr(n,t)}function Lr(){var n=["4730VpMqpB","1578543pNyekH","test","2903928yydSTx","warn","apply","log","constructor","bind","toString","return (function() ","input","action","prototype","20pMWGdR","stateObject","while (true) {}","1826094HtNmnb","gger","init","357800JgXkLR","7BtjQEy","506395nstkTu","console","exception","chain","2nkbPGm","counter","call","length","string",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","308KHamQJ","601182rYeEGt"];return(Lr=function(){return n})()}!function(n,t){for(var e=Nr,r=Lr();;)try{if(343102===parseInt(e(141))/1+parseInt(e(145))/2*(-parseInt(e(120))/3)+-parseInt(e(139))/4*(-parseInt(e(133))/5)+-parseInt(e(136))/6+parseInt(e(140))/7*(parseInt(e(122))/8)+-parseInt(e(153))/9+parseInt(e(119))/10*(parseInt(e(152))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr,Gr=(Hr=!0,function(n,t){var e=Hr?function(){if(t){var e=t[Nr(124)](n,arguments);return t=null,e}}:function(){};return Hr=!1,e});!function(){Gr(this,(function(){var n=Nr,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(151),"i"),r=Wr(n(138));t[n(121)](r+n(144))&&e[n(121)](r+n(130))?Wr():r("0")}))()}();var Zr,Vr=(Zr=!0,function(n,t){var e=Zr?function(){if(t){var e=t.apply(n,arguments);return t=null,e}}:function(){};return Zr=!1,e});function Wr(n){function t(n){var e=Nr;if(typeof n===e(149))return function(n){}[e(126)](e(135))[e(124)](e(146));1!==(""+n/n).length||n%20==0?function(){return!0}[e(126)]("debugger")[e(147)](e(131)):function(){return!1}[e(126)]("debu"+e(137))[e(124)](e(134)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Vr(void 0,(function(){for(var n=Nr,t=function(){var n,t=Nr;try{n=Function(t(129)+t(150)+");")()}catch(e){n=window}return n}(),e=t[n(142)]=t[n(142)]||{},r=[n(125),n(123),"info","error",n(143),"table","trace"],o=0;o<r[n(148)];o++){var i=Vr[n(126)][n(132)][n(127)](Vr),a=r[o],c=e[a]||i;i.__proto__=Vr.bind(Vr),i[n(128)]=c[n(128)][n(127)](c),e[a]=i}}))();export{Ve as C,Ur as _,$n as a,ot as b,yt as c,Rt as d,Ft as e,qt as f,je as g,Re as h,ft as u};

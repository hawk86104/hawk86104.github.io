var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,aP as v,aQ as m,A as g,bb as _,C as y,a0 as x,W as b,n as I,o as S,ca as w,cb as M,K as A,f as E,V as R,g as T,_ as D,bQ as P,m as z,ba as C,k as F,bt as O,d as B,aj as k,B as j,a as U,aN as N,e as L,M as H,as as Z,a9 as G}from"./three.RuuDeeIf1736251016080.js";import{m as W,D as V,e as $}from"./@tresjs.8C7OKmBm1736251016080.js";import{R as Y}from"./three-stdlib.9SgBjS5j1736251016080.js";import{v as X,b as K,w as q,a as Q,u as J,d as nn,U as tn,a4 as en,o as rn,D as on,G as an,I as cn,a2 as sn,a8 as un,a1 as ln,q as fn,f as pn,J as dn,a9 as hn,r as vn,M as mn,X as gn,s as _n,F as yn,a6 as xn,m as bn}from"./@vue.-Mz_IXfk1736251016080.js";import{M as In,a as Sn,C as wn}from"./@pmndrs.eJMj1neG1736251016080.js";import{h as Mn}from"./object-hash.m8vc-d4L1736251016080.js";var An=En;function En(n,t){var e=Dn();return(En=function(n,t){return e[n-=376]})(n,t)}!function(n,t){for(var e=En,r=Dn();;)try{if(969264===parseInt(e(392))/1+parseInt(e(403))/2*(parseInt(e(376))/3)+parseInt(e(417))/4+-parseInt(e(399))/5+-parseInt(e(400))/6+parseInt(e(389))/7+-parseInt(e(378))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Rn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[En(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Rn(this,(function(){var n=En,t=new RegExp(n(386)),e=new RegExp(n(408),"i"),r=Cn(n(385));t.test(r+n(418))&&e[n(393)](r+"input")?Cn():r("0")}))()}();var Tn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[En(401)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dn(){var n=["action","init","function *\\( *\\)","info","dispose","11965842TUGgaE","destructor","traverse","1747530iIxYKg","test","call",'{}.constructor("return this")( )',"remove","console","stateObject","2587245jUmhvP","6827832HxmHsH","apply","map","1540554yTvUlk","string","return (function() ","__proto__","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","debu","virtualScene","while (true) {}","bind","exception","material","counter","7140488ZyaceH","chain","table","3PpiAHm","error","27101200VknHsf","warn","gger","add","toString","geometry"];return(Dn=function(){return n})()}Tn(void 0,(function(){for(var n=En,t=function(){var n,t=En;try{n=Function(t(405)+t(395)+");")()}catch(e){n=window}return n}(),e=t[n(397)]=t[n(397)]||{},r=["log",n(379),n(387),n(377),n(414),n(419),"trace"],o=0;o<r[n(409)];o++){var i=Tn[n(407)].prototype[n(413)](Tn),a=r[o],c=e[a]||i;i[n(406)]=Tn[n(413)](Tn),i.toString=c[n(382)].bind(c),e[a]=i}}))();class Pn extends s{constructor(){var n=En;super(),this[n(411)]=null,this.virtualScene=new u}add(...n){var t=En;return this[t(411)][t(381)](...n),this}[An(390)](){var n=An;this[n(411)][n(391)]((t=>{var e=n;t instanceof l&&(t[e(383)][e(388)](),t.material.dispose(),t[e(415)][e(402)]&&t.material[e(402)][e(388)](),this[e(411)][e(396)](t))})),this[n(411)]=null}}const zn=Pn;function Cn(n){function t(n){var e=En;if(typeof n===e(404))return function(n){}[e(407)](e(412))[e(401)](e(416));1!==(""+n/n)[e(409)]||n%20==0?function(){return!0}[e(407)]("debu"+e(380))[e(394)](e(384)):function(){return!1}[e(407)](e(410)+e(380))[e(401)](e(398)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Fn=Un;!function(n,t){const e=Un,r=Bn();for(;;)try{if(449258===-parseInt(e(439))/1+-parseInt(e(431))/2+-parseInt(e(450))/3*(parseInt(e(433))/4)+parseInt(e(441))/5*(parseInt(e(453))/6)+parseInt(e(470))/7+-parseInt(e(452))/8*(parseInt(e(454))/9)+parseInt(e(435))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const On=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bn(){const n=["return (function() ","city/canary_wharf_1k.hdr",'{}.constructor("return this")( )',"gger","console","log","counter","test","2538578Cywvvi","trace","city/modern_buildings_2_1k.hdr","exception","outdoor/snowy_forest_path_01_1k.hdr","debu","bind","prototype","113586fBUQlr","outdoor/outdoor_umbrellas_1k.hdr","1316sVOLpn","input","16719230xjSkJu","kiara/kiara_1_dawn_1k.hdr","function *\\( *\\)","outood/mossy_forest_1k.hdr","877436SgDFRg","indoor/small_hangar_01_1k.hdr","3198235BTFVru","toString","call","length","stateObject","constructor","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","indoor/abandoned_games_room_02_1k.hdr","6843aekwAL","init","45024ugkjIa","6GwIWnb","864KDuDSl","studio/poly_haven_studio_1k.hdr","while (true) {}","venice/venice_sunset_1k.hdr","error","table","outdoor/satara_night_1k.hdr","city/shanghai_bund_1k.hdr"];return(Bn=function(){return n})()}!function(){On(this,(function(){const n=Un,t=new RegExp(n(437)),e=new RegExp(n(447),"i"),r=Nn(n(451));t[n(469)](r+"chain")&&e[n(469)](r+n(434))?Nn():r("0")}))()}();const kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Un(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kn(void 0,(function(){const n=Un,t=function(){const n=Un;let t;try{t=Function(n(462)+n(464)+");")()}catch(e){t=window}return t}(),e=t[n(466)]=t[n(466)]||{},r=[n(467),"warn","info",n(458),n(473),n(459),n(471)];for(let o=0;o<r[n(444)];o++){const t=kn.constructor[n(430)][n(476)](kn),i=r[o],a=e[i]||t;t.__proto__=kn[n(476)](kn),t[n(442)]=a[n(442)][n(476)](a),e[i]=t}}))();const jn={sunset:Fn(457),studio:Fn(455),city:Fn(463),umbrellas:Fn(432),night:Fn(460),forest:Fn(438),snow:Fn(474),dawn:Fn(436),hangar:Fn(440),urban:Fn(449),modern:Fn(472),shangai:Fn(461)};function Un(n,t){const e=Bn();return(Un=function(n,t){return e[n-=430]})(n,t)}function Nn(n){function t(n){const e=Un;if("string"==typeof n)return function(n){}.constructor(e(456)).apply(e(468));1!==(""+n/n).length||n%20==0?function(){return!0}[e(446)](e(475)+"gger")[e(443)]("action"):function(){return!1}.constructor(e(475)+e(465))[e(448)](e(445)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ln(n,t){const e=Gn();return(Ln=function(n,t){return e[n-=239]})(n,t)}!function(n,t){const e=Ln,r=Gn();for(;;)try{if(374992===-parseInt(e(266))/1+parseInt(e(245))/2+-parseInt(e(250))/3+parseInt(e(259))/4+parseInt(e(269))/5+-parseInt(e(267))/6+parseInt(e(246))/7*(-parseInt(e(249))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Hn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hn(this,(function(){const n=new RegExp("function *\\( *\\)"),t=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=Wn("init");n.test(e+"chain")&&t.test(e+"input")?Wn():e("0")}))()}();const Zn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(239)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gn(){const n=["8WSTwQX","82743vkArlO","background","gger","mapping","toString","warn","constructor","value","keys","1862828PlkWKM","info","backgroundBlurriness","counter","error","texture","while (true) {}","123274QliSke","1539420ViNfpJ","bind","6305pgVbRK","string","console","table","Preset must be one of: ","Failed to load environment map: ","apply","length","exception","trace","setPath",'{}.constructor("return this")( )',"912806YuVJge","986678FVjcPs","join","isColor"];return(Gn=function(){return n})()}Zn(void 0,(function(){const n=Ln;let t;try{t=Function("return (function() "+n(244)+");")()}catch(o){t=window}const e=t[n(271)]=t.console||{},r=["log",n(255),n(260),n(263),n(241),n(272),n(242)];for(let i=0;i<r[n(240)];i++){const t=Zn[n(256)].prototype[n(268)](Zn),o=r[i],a=e[o]||t;t.__proto__=Zn[n(268)](Zn),t[n(254)]=a[n(254)][n(268)](a),e[o]=t}}))();function Wn(n){function t(n){const e=Ln;if(typeof n===e(270))return function(n){}[e(256)](e(265))[e(239)](e(262));1!==(""+n/n)[e(240)]||n%20==0?function(){return!0}.constructor("debu"+e(252)).call("action"):function(){return!1}[e(256)]("debugger")[e(239)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Vn=Yn;!function(n,t){const e=Yn,r=Kn();for(;;)try{if(480186===parseInt(e(418))/1*(-parseInt(e(391))/2)+-parseInt(e(392))/3+-parseInt(e(431))/4*(-parseInt(e(413))/5)+parseInt(e(415))/6+-parseInt(e(407))/7+parseInt(e(409))/8*(parseInt(e(388))/9)+parseInt(e(385))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const $n=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Yn(421)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yn(n,t){const e=Kn();return(Yn=function(n,t){return e[n-=384]})(n,t)}!function(){$n(this,(function(){const n=Yn,t=new RegExp(n(412)),e=new RegExp(n(401),"i"),r=Qn(n(410));t.test(r+n(403))&&e.test(r+"input")?Qn():r("0")}))()}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Kn(){const n=["25235AptbaJ","prototype","330408NlMEMX","background","trace","1UPxWzi","update","call","apply","error","bind","environment","destructor","gger","type","string","default","console","532aXeGHW","near","isArray","7169040CKEePt","virtualScene","far","3440286lxEZwe","constructor","component","1831772fPtuPV","938556PBJPbe","dispose","length",'{}.constructor("return this")( )',"resolution","value","useDefaultScene","frames","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","chain","texture","TresEnvSence","symbol","3491649lLjXUu","toString","16VWIJdj","init","__proto__","function *\\( *\\)"];return(Kn=function(){return n})()}Xn(void 0,(function(){const n=Yn;let t;try{t=Function("return (function() "+n(395)+");")()}catch(o){t=window}const e=t.console=t[n(430)]||{},r=["log",n(400),"info",n(422),"exception","table",n(417)];for(let i=0;i<r[n(394)];i++){const t=Xn[n(389)][n(414)][n(423)](Xn),o=r[i],a=e[o]||t;t[n(411)]=Xn[n(423)](Xn),t.toString=a[n(408)][n(423)](a),e[o]=t}}))();const qn=nn({__name:Vn(390),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Vn;let r,o;const i=n,a=K(null);t({texture:a});const{extend:c,renderer:s,scene:u}=W();let l=null,y=K(null),x=null;const b=K(null);tn((()=>{var n,t;const e=Yn;null==(n=b.value)||n[e(425)](),null==(t=y[e(397)])||t.dispose()}));const{onBeforeLoop:I}=$();let S=1;I((()=>{const n=Yn;x&&b[n(397)]&&y[n(397)]&&(i[n(399)]===1/0||S<i[n(399)])&&(i[n(398)]?x[n(419)](s[n(397)],u[n(397)]):x[n(419)](s.value,un(b[n(397)][n(386)])),S++)}));const w=([r,o]=en((()=>async function(n,t){const e=Ln,{scene:r,invalidate:o}=W(),{preset:i,blur:a,files:c=K([]),path:s=K(""),background:u}=X(n);q(n,(()=>{o()}));const l=K(null),h=Q((()=>Array.isArray(c[e(257)]))),v=Q((()=>h.value?f:Y));return q([c,s],(async([n,t])=>{const r=e;if(n&&n[r(240)]>0&&!(null==i?void 0:i[r(257)])){try{l[r(257)]=await V(v[r(257)],h.value?[...J(n)]:J(n),(n=>{t&&n[r(243)](J(t))}))}catch(o){throw new Error(r(274)+o)}l.value&&(l.value[r(253)]=h[r(257)]?p:d)}}),{immediate:!0}),q(l,(n=>{const t=e;r[t(257)]&&n&&(r[t(257)].environment=n)}),{immediate:!0}),q([u,l],(([n,o])=>{const i=e;if(r.value){let e=(null==t?void 0:t[i(257)])?t[i(257)][i(264)]:o,a=r[i(257)][i(251)];!(null==a?void 0:a[i(248)])&&(a=void 0),r[i(257)].background=n?e:a}}),{immediate:!0}),q((()=>null==a?void 0:a.value),(n=>{const t=e;r[t(257)]&&n&&(r[t(257)][t(261)]=n)}),{immediate:!0}),q((()=>null==i?void 0:i.value),(async n=>{const t=e;if(n&&n in jn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=jn[n];try{l[t(257)]=await V(Y,i,(n=>{e&&n[t(243)](e)}))}catch(r){throw new Error(t(274)+r)}l[t(257)]&&l[t(257)]&&(l[t(257)][t(253)]=d),o()}else if(n&&!(n in jn))throw new Error(t(273)+Object[t(258)](jn)[t(247)](", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Yn;n?(u[t(397)][t(424)]=n[t(404)],i[t(416)]&&(u.value.background=n[t(404)])):(u[t(397)][t(424)]=w.value,i.background&&(u[t(397)][t(416)]=w[t(397)]))};q(w,(n=>{const t=Yn;y[t(397)]&&M(y[t(397)])}),{immediate:!0,deep:!0}),c({EnvSence:zn});const A=()=>{var n;const t=Yn;null==(n=y.value)||n[t(393)](),y[t(397)]=new v(i[t(396)]),x=new m(i[t(432)],i[t(387)],y.value),i[t(398)]?(y[t(397)][t(404)][t(427)]=g,y[t(397)][t(404)].generateMipmaps=!1,y[t(397)][t(404)].minFilter=_,y[t(397)][t(404)].magFilter=_):y[t(397)][t(404)].type=h,M(y[t(397)])};return q((()=>sn()[e(429)]),(n=>{var t,r;const o=e;n&&(!y[o(397)]||y.value[o(404)][o(427)]!==h)&&(l=n(),Array[o(384)](l)&&l.length>0&&typeof(null==(t=l[0])?void 0:t[o(427)])!==o(406))?A():(null==(r=y[o(397)])||r[o(393)](),y[o(397)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(397)]=w,q((()=>i[e(398)]),(n=>{y[e(397)]&&A()})),(n,t)=>{const r=e;return J(y)?(rn(),on(r(405),{key:0,ref_key:"envSence",ref:b},[an(n.$slots,"default")],512)):cn("",!0)}}});function Qn(n){function t(n){const e=Yn;if(typeof n===e(428))return function(n){}[e(389)]("while (true) {}")[e(421)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(389)](e(402)+e(426))[e(420)]("action"):function(){return!1}[e(389)]("debu"+e(426)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Jn(n,t){const e=ut();return(Jn=function(n,t){return e[n-=117]})(n,t)}const nt=Jn;!function(n,t){const e=Jn,r=ut();for(;;)try{if(702358===parseInt(e(140))/1*(parseInt(e(160))/2)+parseInt(e(155))/3*(-parseInt(e(161))/4)+-parseInt(e(133))/5*(parseInt(e(151))/6)+parseInt(e(126))/7*(parseInt(e(136))/8)+-parseInt(e(170))/9*(parseInt(e(141))/10)+parseInt(e(158))/11*(-parseInt(e(156))/12)+parseInt(e(122))/13*(parseInt(e(167))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){tt(this,(function(){const n=Jn,t=new RegExp(n(169)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=st(n(123));t.test(r+n(157))&&e[n(124)](r+n(162))?st():r("0")}))()}();const et=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(172)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();et(void 0,(function(){const n=Jn;let t;try{t=Function(n(164)+n(130)+");")()}catch(o){t=window}const e=t[n(149)]=t[n(149)]||{},r=[n(119),"warn",n(144),n(138),"exception","table",n(143)];for(let i=0;i<r[n(117)];i++){const t=et[n(153)].prototype[n(145)](et),o=r[i],a=e[o]||t;t[n(118)]=et[n(145)](et),t[n(163)]=a.toString.bind(a),e[o]=t}}))();const rt={key:0,args:[0,1,64]},ot={key:1,args:[.5,1,64]},it={key:2},at=[nt(132),nt(159),nt(121),nt(154)],ct=nn({__name:nt(152),props:{args:{default:null},from:{default:"rect"},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=K();return ln((()=>{const n=Jn;e.value&&(e[n(137)][n(154)][n(171)](t[n(134)]),e[n(137)][n(120)]=!0)})),q((()=>t.color),(n=>{const r=Jn;e[r(137)]&&(e[r(137)][r(154)][r(127)](n),e.value[r(154)][r(171)](t[r(134)]),e[r(137)].needsUpdate=!0)})),fn((()=>{})),(n,r)=>{const o=Jn;return rn(),on(o(165),null,[t[o(128)]===o(129)?(rn(),on(o(125),rt)):t[o(128)]===o(146)?(rn(),on("TresRingGeometry",ot)):t[o(128)]===o(166)?(rn(),on(o(168),it)):(rn(),pn(t[o(128)],{key:3,args:t})),dn(o(135),{ref_key:o(131),ref:e,toneMapped:n.toneMapped,map:n[o(159)],side:J(x),color:n[o(154)]},null,8,at)])}}});function st(n){function t(n){const e=Jn;if(typeof n===e(139))return function(n){}[e(153)](e(173))[e(172)]("counter");1!==(""+n/n)[e(117)]||n%20==0?function(){return!0}.constructor(e(147)+e(148))[e(150)]("action"):function(){return!1}[e(153)](e(147)+e(148))[e(172)](e(142)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ut(){const n=["129316CxTZGF","map","6wuqpGX","8oOhMcc","input","toString","return (function() ","TresMesh","rect","40781090vubbeB","TresPlaneGeometry","function *\\( *\\)","27lDIjiP","multiplyScalar","apply","while (true) {}","length","__proto__","log","needsUpdate","side","13geONzI","init","test","TresRingGeometry","7dmrqnz","set","from","circle",'{}.constructor("return this")( )',"material","toneMapped","90ccpsay","intensity","TresMeshBasicMaterial","4410136fCHzQd","value","error","string","24997mwvHPw","3293710AzgQZd","stateObject","trace","info","bind","ring","debu","gger","console","call","257610eOnOXX","index","constructor","color","1261158gHIDwX","240YLAvXD","chain"];return(ut=function(){return n})()}function lt(n,t){const e=dt();return(lt=function(n,t){return e[n-=313]})(n,t)}!function(n,t){const e=lt,r=dt();for(;;)try{if(182676===-parseInt(e(348))/1+-parseInt(e(335))/2*(-parseInt(e(356))/3)+parseInt(e(328))/4*(parseInt(e(317))/5)+parseInt(e(323))/6*(-parseInt(e(318))/7)+parseInt(e(321))/8+parseInt(e(342))/9*(-parseInt(e(316))/10)+parseInt(e(313))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[lt(332)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ft(this,(function(){const n=lt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(341),"i"),r=vt(n(338));t[n(343)](r+n(346))&&e[n(343)](r+n(340))?vt():r("0")}))()}();const pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function dt(){const n=["270uEmDZX","315QYWivd","debu","return (function() ","1569392EoPXAQ","clear","18570XjXqEe","__proto__","bind","warn","setRenderTarget","5196zEgAVj","format",'{}.constructor("return this")( )',"render","apply","height","info","2sdNbGk","string","width","init","prototype","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","8973NrxNYH","test","depthTexture","dispose","chain","while (true) {}","223801YDDGfD","constructor","action","console","toString","type","value","exception","565647ibFTFa","call","3324717eFpPKb","length","trace","2120pdcOVl"];return(dt=function(){return n})()}function ht(n){const t=K(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=hn(n)?X(n):X(vn(n)),{onLoop:s}=$(),{camera:u,renderer:l,scene:f,sizes:p}=W();return ln((()=>{var n;const a=lt;null==(n=t[a(354)])||n[a(345)](),t.value=new b((null==r?void 0:r.value)||p[a(337)][a(354)],(null==e?void 0:e[a(354)])||p.height[a(354)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(354)])),(null==i?void 0:i.value)&&(t[a(354)][a(344)]=new S((null==r?void 0:r.value)||p[a(337)][a(354)],(null==e?void 0:e[a(354)])||p[a(333)][a(354)]),t[a(354)].depthTexture[a(329)]=w,t[a(354)][a(344)][a(353)]=M)})),s((()=>{const n=lt;(null==a?void 0:a.value)&&(l[n(354)][n(327)](un(t[n(354)])),l[n(354)][n(322)](),l[n(354)][n(331)](un(f.value),un(u[n(354)])),l[n(354)][n(327)](null))})),mn((()=>{var n;const e=lt;null==(n=t[e(354)])||n[e(345)]()})),t}function vt(n){function t(n){const e=lt;if(typeof n===e(336))return function(n){}.constructor(e(347)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(319)+"gger")[e(357)](e(350)):function(){return!1}[e(349)](e(319)+"gger")[e(332)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}pt(void 0,(function(){const n=lt,t=function(){const n=lt;let t;try{t=Function(n(320)+n(330)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(351)]||{},r=["log",n(326),n(334),"error",n(355),"table",n(315)];for(let o=0;o<r[n(314)];o++){const t=pt[n(349)][n(339)][n(325)](pt),i=r[o],a=e[i]||t;t[n(324)]=pt.bind(pt),t[n(352)]=a[n(352)][n(325)](a),e[i]=t}}))();const mt=bt;!function(n,t){const e=bt,r=_t();for(;;)try{if(872497===-parseInt(e(202))/1*(-parseInt(e(246))/2)+-parseInt(e(197))/3*(-parseInt(e(216))/4)+-parseInt(e(243))/5*(parseInt(e(215))/6)+parseInt(e(210))/7+-parseInt(e(204))/8+parseInt(e(213))/9*(-parseInt(e(228))/10)+-parseInt(e(247))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _t(){const n=["debu","toneMapping","214834xuiBHr","9321752MZsFjn","prototype","setRenderTarget","function *\\( *\\)","call","3vqyHtZ","thickness","value","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","return (function() ","13vJiepg","input","1849712FTNhLs","background","buffer","warn","error","time","7356545AGKdQK","constructor","counter","6381VFLYrU","isMesh","282byNXES","1672368QPABiC","stateObject","action","TresMeshTransmissionMaterial","uuid","init","string","gger","console","apply","exception","envMapIntensity","9670aQcaCe","MeshTransmissionMaterialClass","bind","render","fboResolution","traverse","while (true) {}","table","texture","info","side","backside","toString","chain","material","24330bgAPMM"];return(_t=function(){return n})()}!function(){gt(this,(function(){const n=bt,t=new RegExp(n(195)),e=new RegExp(n(200),"i"),r=St(n(221));t.test(r+n(241))&&e.test(r+n(203))?St():r("0")}))()}();const yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(225)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();yt(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function(n(201)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(224)]=t[n(224)]||{},r=["log",n(207),n(237),n(208),n(226),n(235),"trace"];for(let o=0;o<r.length;o++){const t=yt[n(211)][n(193)][n(230)](yt),i=r[o],a=e[i]||t;t.__proto__=yt[n(230)](yt),t[n(240)]=a[n(240)].bind(a),e[i]=t}}))();const xt=[mt(206),mt(238)];function bt(n,t){const e=_t();return(bt=function(n,t){return e[n-=193]})(n,t)}const It=nn({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=mt,r=gn(),{extend:o,scene:i,renderer:a,camera:c}=W(),s=gn(),u=n;o({MeshTransmissionMaterial:In});const l=new Sn,{onBeforeLoop:f}=$(),p=ht({width:u[e(232)],height:u.fboResolution,isLoop:!1}),d=ht({width:u[e(232)],height:u[e(232)],isLoop:!1});let h,v,m,g;return fn((async()=>{const n=e;await _n(),s.value=function(n,t){const e=bt;let r;return n[e(233)]((n=>{const o=e;n[o(214)]&&n[o(242)]&&n.material[o(220)]===t&&(r=n)})),r}(i[n(199)],r.value.uuid)})),f((({elapsed:n})=>{const t=e;r[t(199)][t(209)]=n,r[t(199)].buffer===d[t(199)].texture&&s.value&&(m=a[t(199)][t(245)],h=i.value[t(205)],v=r.value.envMapIntensity,g=s[t(199)][t(242)][t(238)],s[t(199)].material=l,u[t(239)]&&(a.value[t(194)](p[t(199)]),a[t(199)][t(231)](i[t(199)],c.value),s[t(199)][t(242)]=r.value,s.value.material.thickness=u.backsideThickness,s[t(199)][t(242)][t(206)]=p[t(199)][t(236)],s[t(199)][t(242)].side=A,s[t(199)][t(242)][t(227)]=0),a[t(199)][t(194)](d[t(199)]),a[t(199)][t(231)](i[t(199)],c[t(199)]),s[t(199)][t(242)].buffer=d[t(199)][t(236)],s[t(199)][t(242)]=r[t(199)],s.value[t(242)][t(198)]=u[t(198)],s.value[t(242)].side=g,s[t(199)][t(242)][t(227)]=v,i.value[t(205)]=h,a.value[t(194)](null),a[t(199)][t(245)]=m)})),t({root:r,constructor:In}),(n,t)=>{const o=e;return rn(),on(o(219),{ref_key:o(229),ref:r,buffer:J(d).texture,side:J(x)},null,8,xt)}}});function St(n){function t(n){const e=bt;if(typeof n===e(222))return function(n){}[e(211)](e(234))[e(225)](e(212));1!==(""+n/n).length||n%20==0?function(){return!0}[e(211)](e(244)+"gger")[e(196)](e(218)):function(){return!1}[e(211)](e(244)+e(223))[e(225)](e(217)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Mt,r=Et();for(;;)try{if(360685===-parseInt(e(391))/1*(-parseInt(e(361))/2)+parseInt(e(368))/3+parseInt(e(351))/4*(-parseInt(e(365))/5)+-parseInt(e(385))/6+-parseInt(e(375))/7*(-parseInt(e(378))/8)+parseInt(e(371))/9+-parseInt(e(372))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const wt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Mt(343)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Mt(n,t){const e=Et();return(Mt=function(n,t){return e[n-=338]})(n,t)}!function(){wt(this,(function(){const n=Mt,t=new RegExp(n(384)),e=new RegExp(n(357),"i"),r=Tt("init");t[n(349)](r+n(362))&&e[n(349)](r+n(370))?Tt():r("0")}))()}();const At=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Et(){const n=['{}.constructor("return this")( )',"set","error","top","test","disable","28eoHRue","bind","setFromObject","counter","identity","debu","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","table","info","exception","2436VroJwy","chain","constructor","return (function() ","106835EPrDDJ","disableZ","matrixWorld","1007148CHmkky","position","input","2444616qtZtTw","5036940HZDkvr","trace","front","1008392UYYtHj","getCenter","call","16oFCrGF","TresGroup","min","gger","getBoundingSphere","disableY","function *\\( *\\)","2606856gAZwuc","value","__proto__","warn","length","toString","454FfckDF","while (true) {}","outer","default","bottom","prototype","$slots","apply","max"];return(Et=function(){return n})()}At(void 0,(function(){const n=Mt;let t;try{t=Function(n(364)+n(345)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=["log",n(388),n(359),n(347),n(360),n(358),n(373)];for(let i=0;i<r[n(389)];i++){const t=At[n(363)][n(341)][n(352)](At),o=r[i],a=e[o]||t;t[n(387)]=At.bind(At),t[n(390)]=a[n(390)][n(352)](a),e[o]=t}}))();const Rt=nn({__name:"index",props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=K(null),r=K(null),o=K(null);return fn((()=>{const n=Mt;if(!r[n(386)])return;if(!o[n(386)])return;r[n(386)][n(367)][n(355)]();const e=(new E)[n(353)](o.value,t.precise),i=new R,a=new T,c=e[n(344)].x-e[n(380)].x,s=e.max.y-e.min.y,u=e[n(344)].z-e.min.z;e[n(376)](i),e[n(382)](a);const l=t[n(348)]?s/2:t[n(340)]?-s/2:0,f=t.left?-c/2:t.right?c/2:0,p=t[n(374)]?u/2:t.back?-u/2:0;r.value[n(369)][n(346)](t[n(350)]||t.disableX?0:-i.x+f,t[n(350)]||t[n(383)]?0:-i.y+l,t[n(350)]||t[n(366)]?0:-i.z+p)})),(n,t)=>{const i=Mt;return rn(),on(i(379),{ref_key:"gref",ref:e},[dn("TresGroup",{ref_key:i(338),ref:r},[dn(i(379),{ref_key:"inner",ref:o},[an(n[i(342)],i(339))],512)],512)],512)}}});function Tt(n){function t(n){const e=Mt;if("string"==typeof n)return function(n){}[e(363)](e(392)).apply(e(354));1!==(""+n/n).length||n%20==0?function(){return!0}[e(363)](e(356)+e(381))[e(377)]("action"):function(){return!1}.constructor(e(356)+e(381))[e(343)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Dt=Bt;function Pt(){const n=["123219zNAhRj","init","bind","table","constructor","set","exception","input","lightSource","object","params","far","info","log","2591064VyCbHG","1864899ZkprzZ","prototype","#ffffff","value","Vector3","stateObject","intensity","scene","function *\\( *\\)","string","group","ior","523796WfusBK","call","94250rWnlio","30UbkKKC","apply","worldRadius","action","add","12pdSFTy","TresGroup","2685991RlHuYU","__proto__","while (true) {}","chain","gger","warn","resolution","index","backside","backsideIOR","toString","debu","8JEBZWk","causticsOnly","$slots","console","test","color","counter","return (function() ","update","default","length","error","586445LBXkwO"];return(Pt=function(){return n})()}!function(n,t){const e=Bt,r=Pt();for(;;)try{if(219154===-parseInt(e(323))/1+parseInt(e(329))/2*(-parseInt(e(356))/3)+-parseInt(e(383))/4+parseInt(e(355))/5+-parseInt(e(370))/6+-parseInt(e(331))/7*(-parseInt(e(343))/8)+-parseInt(e(371))/9*(-parseInt(e(324))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){zt(this,(function(){const n=Bt,t=new RegExp(n(379)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=jt(n(357));t[n(347)](r+n(334))&&e[n(347)](r+n(363))?jt():r("0")}))()}();const Ct=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(325)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ct(void 0,(function(){const n=Bt,t=function(){const n=Bt;let t;try{t=Function(n(350)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(346)]=t.console||{},r=[n(369),n(336),n(368),n(354),n(362),n(359),"trace"];for(let o=0;o<r[n(353)];o++){const t=Ct[n(360)][n(372)][n(358)](Ct),i=r[o],a=e[i]||t;t[n(332)]=Ct[n(358)](Ct),t[n(341)]=a.toString[n(358)](a),e[i]=t}}))();const Ft=["object"],Ot=[Dt(365)];function Bt(n,t){const e=Pt();return(Bt=function(n,t){return e[n-=322]})(n,t)}const kt=nn({__name:Dt(338),props:{color:{default:Dt(373)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Dt,e=n,{renderer:r}=W(),o=wn(r[t(374)],{frames:1/0,resolution:e[t(337)],worldRadius:e.worldRadius});o.params[t(339)]=!0;const i=gn(null);q(i,(n=>{const e=t;n&&o[e(378)][e(328)](n)}));const{onBeforeLoop:a}=$();return a((({elapsed:n})=>{o[t(351)]()})),ln((()=>{const n=t;e[n(348)]&&o[n(366)][n(348)][n(361)](e[n(348)]),e[n(382)]&&(o.params.ior=e.ior),e[n(340)]&&(o.params[n(340)]=e[n(340)]),e[n(367)]&&(o.params[n(367)]=e[n(367)]),e[n(326)]&&(o[n(366)].worldRadius=e[n(326)]),e.intensity&&(o.params[n(377)]=e[n(377)])})),q((()=>e.causticsOnly),(n=>{const e=t;o.params[e(344)]=n})),q((()=>e[t(364)]),(n=>{const e=t;n&&o[e(366)][e(364)]instanceof D[e(375)]&&o[e(366)][e(364)][e(361)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return rn(),on(yn,null,[dn(r(330),{ref_key:r(381),ref:i},[an(n[r(345)],r(352))],512),dn("primitive",{object:J(o).group,position:[0,.003,0]},null,8,Ft),dn("primitive",{object:J(o).helper,visible:!1},null,8,Ot)],64)}}});function jt(n){function t(n){const e=Bt;if(typeof n===e(380))return function(n){}.constructor(e(333)).apply(e(349));1!==(""+n/n)[e(353)]||n%20==0?function(){return!0}.constructor(e(342)+"gger")[e(322)](e(327)):function(){return!1}[e(360)]("debu"+e(335))[e(325)](e(376)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Lt,r=Nt();for(;;)try{if(146393===-parseInt(e(504))/1*(-parseInt(e(514))/2)+parseInt(e(510))/3*(-parseInt(e(513))/4)+-parseInt(e(491))/5+parseInt(e(506))/6*(-parseInt(e(481))/7)+parseInt(e(508))/8+parseInt(e(507))/9+-parseInt(e(489))/10*(-parseInt(e(487))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ut=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Lt(528)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Nt(){const n=[", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","debu","counter","; i++) {\n        vogelSample = vogelDiskSample(j, ","21VVSiEU","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","shadowmap_pars_fragment","#ifdef USE_SHADOWMAP","function *\\( *\\)","error","22MdBnvW","programs","914360xzNluV","table","1285770MZASPb","init","test","traverse","length","while (true) {}","console","trace","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","isArray","compile","exception","bind","278172rrROTf","gger","561174luXbVa","643293KygxGe","2090408xxKSTF","__proto__","164532NHgrhL","stateObject","material","8DqZABd","2maBGCp","action","replace","ShaderChunk",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","remove",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","call","string","constructor","; i ++) {\n        offset = (vogelDiskSample(j, ","dispose","info","prototype","apply","toString"];return(Nt=function(){return n})()}function Lt(n,t){const e=Nt();return(Lt=function(n,t){return e[n-=480]})(n,t)}!function(){Ut(this,(function(){const n=Lt,t=new RegExp(n(485)),e=new RegExp(n(499),"i"),r=Gt(n(492));t[n(493)](r+"chain")&&e[n(493)](r+"input")?Gt():r("0")}))()}();const Ht=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ht(void 0,(function(){const n=Lt,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(497)]=t[n(497)]||{},r=["log","warn",n(526),n(486),n(502),n(490),n(498)];for(let o=0;o<r.length;o++){const t=Ht[n(523)][n(527)][n(503)](Ht),i=r[o],a=e[i]||t;t[n(509)]=Ht[n(503)](Ht),t[n(529)]=a[n(529)][n(503)](a),e[i]=t}}))();const Zt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Lt,o=D[r(517)].shadowmap_pars_fragment;return P[r(483)]=P[r(483)][r(516)](r(484),r(482)+t+")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float("+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(524)+e+r(518)+e+r(480)+e+r(530)+t+"));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / "+e+r(520))[r(516)]("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{D[r(517)].shadowmap_pars_fragment=o,function(n,t,e){const r=Lt;t[r(494)]((t=>{const e=r;t[e(512)]&&(Array[e(500)](t[e(512)])?t[e(512)].forEach((t=>{const r=e;n.properties[r(519)](t),t[r(525)]()})):(n.properties[e(519)](t[e(512)]),t.material[e(525)]()))})),n[r(526)][r(488)][r(495)]=0,n[r(501)](t,e)}(n,t,e)}};function Gt(n){function t(n){const e=Lt;if(typeof n===e(522))return function(n){}[e(523)](e(496))[e(528)](e(532));1!==(""+n/n).length||n%20==0?function(){return!0}[e(523)](e(531)+"gger")[e(521)](e(515)):function(){return!1}[e(523)]("debu"+e(505))[e(528)](e(511)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Wt=Kt;!function(n,t){const e=Kt,r=Yt();for(;;)try{if(968957===parseInt(e(468))/1*(parseInt(e(477))/2)+parseInt(e(493))/3*(parseInt(e(473))/4)+parseInt(e(478))/5+-parseInt(e(496))/6+parseInt(e(487))/7+-parseInt(e(474))/8+-parseInt(e(465))/9*(parseInt(e(491))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vt(this,(function(){const n=Kt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(476),"i"),r=qt(n(483));t[n(480)](r+n(488))&&e[n(480)](r+n(495))?qt():r("0")}))()}();const $t=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Kt(463)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Yt(){const n=["1317435aDSaOF","table","test","call","toString","init","action","debu","material","3987326xDJHbL","chain","prototype","log","684370PjzQHG","stateObject","3LFSgIt","return (function() ","input","856428WacRaY","bind","index","constructor","exception","apply","length","45xRFefE","value","error","101kiohbq","console","trace","string","gger","7112464CjPdUj","15178944ANwrKL","warn","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","14654zAeewV"];return(Yt=function(){return n})()}$t(void 0,(function(){const n=Kt,t=function(){const n=Kt;let t;try{t=Function(n(494)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(469)]=t[n(469)]||{},r=[n(490),n(475),"info",n(467),n(500),n(479),n(470)];for(let o=0;o<r[n(464)];o++){const t=$t.constructor[n(489)][n(497)]($t),i=r[o],a=e[i]||t;t.__proto__=$t[n(497)]($t),t[n(482)]=a[n(482)].bind(a),e[i]=t}}))();const Xt=nn({__name:Wt(498),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=W();let i=null;const a=n=>{const t=Kt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(466)],o[t(466)],e.value),i=null),a&&(i=Zt({focus:s,size:c,samples:u}),o.value.traverse((n=>{n instanceof l&&n[t(486)].dispose()})))};return a(t),q(t,(()=>{a(t)})),(n,t)=>null}});function Kt(n,t){const e=Yt();return(Kt=function(n,t){return e[n-=463]})(n,t)}function qt(n){function t(n){const e=Kt;if(typeof n===e(471))return function(n){}[e(499)]("while (true) {}")[e(463)]("counter");1!==(""+n/n)[e(464)]||n%20==0?function(){return!0}[e(499)](e(485)+"gger")[e(481)](e(484)):function(){return!1}[e(499)](e(485)+e(472))[e(463)](e(492)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Qt=re;!function(n,t){const e=re,r=oe();for(;;)try{if(276901===parseInt(e(518))/1+parseInt(e(522))/2*(parseInt(e(483))/3)+parseInt(e(484))/4+-parseInt(e(472))/5*(parseInt(e(480))/6)+-parseInt(e(499))/7*(parseInt(e(471))/8)+-parseInt(e(510))/9+parseInt(e(488))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(511)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Jt(this,(function(){const n=re,t=new RegExp(n(477)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ie(n(501));t[n(468)](r+n(492))&&e.test(r+n(509))?ie():r("0")}))()}();const ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[re(511)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ne(void 0,(function(){const n=re,t=function(){const n=re;let t;try{t=Function(n(507)+n(513)+");")()}catch(e){t=window}return t}(),e=t[n(482)]=t[n(482)]||{},r=[n(506),n(469),n(470),n(487),n(517),n(485),n(474)];for(let o=0;o<r[n(498)];o++){const t=ne[n(493)][n(478)][n(497)](ne),i=r[o],a=e[i]||t;t.__proto__=ne[n(497)](ne),t.toString=a[n(481)][n(497)](a),e[i]=t}}))();const te=parseInt(B[Qt(500)](/\D+/g,""));class ee extends z{constructor(n=new F){const t=Qt;super({uniforms:{inputBuffer:new C(null),depthBuffer:new C(null),resolution:new C(new F),texelSize:new C(new F),halfTexelSize:new C(new F),kernel:new C(0),scale:new C(1),cameraNear:new C(0),cameraFar:new C(1),minDepthThreshold:new C(0),maxDepthThreshold:new C(1),depthScale:new C(0),depthToBlurRatioBias:new C(.25)},fragmentShader:t(504)+t(te>=154?520:476)+t(516),vertexShader:t(495),blending:O,depthWrite:!1,depthTest:!1}),this[t(490)]=!1,this.setTexelSize(n.x,n.y),this[t(521)]=new Float32Array([0,1,2,2,3])}[Qt(519)](n,t){const e=Qt;this[e(515)][e(479)][e(489)][e(505)](n,t),this[e(515)][e(503)].value[e(505)](n,t)[e(502)](.5)}[Qt(496)](n){const t=Qt;this[t(515)][t(486)][t(489)][t(508)](n)}}function re(n,t){const e=oe();return(re=function(n,t){return e[n-=468]})(n,t)}function oe(){const n=["setResolution","bind","length","34559cHHmOJ","replace","init","multiplyScalar","halfTexelSize","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","set","log","return (function() ","copy","input","4448592UDCLIW","apply","debu",'{}.constructor("return this")( )',"call","uniforms",">\n        }","exception","211212tRIYao","setTexelSize","colorspace_fragment","kernel","774nPzYMT","test","warn","info","776CvAgyL","539680zCdrIr","action","trace","stateObject","encodings_fragment","function *\\( *\\)","prototype","texelSize","12CNOzVc","toString","console","3969mBFXkN","906480SRsZNQ","table","resolution","error","5161170unUtLX","value","toneMapped","string","chain","constructor","gger","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }"];return(oe=function(){return n})()}function ie(n){function t(n){const e=re;if(typeof n===e(491))return function(n){}[e(493)]("while (true) {}")[e(511)]("counter");1!==(""+n/n)[e(498)]||n%20==0?function(){return!0}[e(493)](e(512)+"gger")[e(514)](e(473)):function(){return!1}[e(493)](e(512)+e(494)).apply(e(475)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const ae=le;!function(n,t){const e=le,r=se();for(;;)try{if(278429===parseInt(e(425))/1*(parseInt(e(417))/2)+parseInt(e(439))/3+-parseInt(e(440))/4+-parseInt(e(432))/5+-parseInt(e(402))/6+-parseInt(e(446))/7*(parseInt(e(422))/8)+parseInt(e(450))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function se(){const n=["inputBuffer","stateObject","2399358nXjBhy","render","toString","depthToBlurRatioBias","console","string","convolutionMaterial","error","depthTexture","counter","function *\\( *\\)","gger","setAttribute","setRenderTarget","kernel","164mzvYIb","USE_DEPTH","depthBuffer","test","texture","8vWdGVl","trace","add","5529ThggKS","action","renderTargetA","chain","while (true) {}","camera","uniforms","2401900MzeSJN","renderToScreen","screen","log","input","table","init","1420095OCHrgd","2006284DmfLyR","prototype","value","apply","scene","frustumCulled","1136023ePmfrz","exception","__proto__","length","8062371MPDvKS","return (function() ","bind","maxDepthThreshold","debu","defines","warn","constructor","renderTargetB"];return(se=function(){return n})()}!function(){ce(this,(function(){const n=le,t=new RegExp(n(412)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=pe(n(438));t[n(420)](r+n(428))&&e.test(r+n(436))?pe():r("0")}))()}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[le(443)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(n,t){const e=se();return(le=function(n,t){return e[n-=401]})(n,t)}ue(void 0,(function(){const n=le,t=function(){const n=le;let t;try{t=Function(n(451)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(406)]=t.console||{},r=[n(435),n(456),"info",n(409),n(447),n(437),n(423)];for(let o=0;o<r.length;o++){const t=ue[n(457)][n(441)].bind(ue),i=r[o],a=e[i]||t;t[n(448)]=ue[n(452)](ue),t.toString=a[n(404)][n(452)](a),e[i]=t}}))();class fe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=le;this[c(433)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(458)]=this.renderTargetA.clone(),this[c(408)]=new ee,this.convolutionMaterial.setTexelSize(1/t,1/e),this.convolutionMaterial.setResolution(new F(t,e)),this[c(444)]=new u,this[c(430)]=new k,this[c(408)][c(431)].minDepthThreshold[c(442)]=r,this[c(408)][c(431)][c(453)][c(442)]=o,this[c(408)][c(431)].depthScale[c(442)]=i,this[c(408)].uniforms[c(405)][c(442)]=a,this[c(408)][c(455)][c(418)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new j;p[c(414)]("position",new U(s,3)),p.setAttribute("uv",new U(f,2)),this[c(434)]=new l(p,this.convolutionMaterial),this[c(434)][c(445)]=!1,this[c(444)][c(424)](this[c(434)])}[ae(403)](n,t,e){const r=ae,o=this.scene,i=this[r(430)],a=this[r(427)],c=this[r(458)],s=this[r(408)],u=s[r(431)];u[r(419)][r(442)]=t[r(410)];const l=s[r(416)];let f,p,d,h=t;for(p=0,d=l[r(449)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(416)][r(442)]=l[p],u[r(459)][r(442)]=h[r(421)],n[r(415)](f),n[r(403)](o,i),h=f;u.kernel[r(442)]=l[p],u.inputBuffer.value=h[r(421)],n.setRenderTarget(this.renderToScreen?null:e),n[r(403)](o,i)}}function pe(n){function t(n){const e=le;if(typeof n===e(407))return function(n){}[e(457)](e(429))[e(443)](e(411));1!==(""+n/n)[e(449)]||n%20==0?function(){return!0}[e(457)](e(454)+e(413)).call(e(426)):function(){return!1}[e(457)](e(454)+"gger").apply(e(401)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var de=ve;!function(n,t){for(var e=ve,r=ge();;)try{if(758603===parseInt(e(235))/1+parseInt(e(221))/2*(parseInt(e(197))/3)+-parseInt(e(195))/4+parseInt(e(200))/5+-parseInt(e(231))/6+parseInt(e(202))/7+-parseInt(e(203))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var he=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ve(n,t){var e=ge();return(ve=function(n,t){return e[n-=181]})(n,t)}!function(){he(this,(function(){var n=ve,t=new RegExp(n(240)),e=new RegExp(n(196),"i"),r=ye(n(223));t[n(209)](r+n(205))&&e[n(209)](r+n(248))?ye():r("0")}))()}();var me=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ve(253)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ge(){var n=["1461198tUPQHS","prototype","init","depthScale","mixStrength","_distortionMap","gger","_hasBlur","_tDepth","fragmentShader","1410666GsStQf","_depthToBlurRatioBias","USE_UV","trace","789962UeLaln","mixContrast","textureMatrix","error","bind","function *\\( *\\)","_mirror","stateObject","_mixContrast","_maxDepthThreshold","minDepthThreshold","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","setValues","input","mirror","#include <emissivemap_fragment>","while (true) {}","distortionMap","apply","replace","string","debu","toString","table","vertexShader","_blurStrength","maxDepthThreshold","_tDiffuse","_mixBlur","tDiffuseBlur","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","mixBlur","console",'{}.constructor("return this")( )',"log","constructor","4336904LuUDMN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3IynAEO","value","_depthScale","5764565bFaHQN","_minDepthThreshold","6146847tHWfgF","11789240XTxtWh","onBeforeCompile","chain","_textureMatrix","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","distortion","test","tDiffuse","hasBlur","_distortion","exception","length","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","tDepth","defines","warn","uniforms","depthToBlurRatioBias"];return(ge=function(){return n})()}me(void 0,(function(){for(var n=ve,t=function(){var n,t=ve;try{n=Function("return (function() "+t(192)+");")()}catch(e){n=window}return n}(),e=t[n(191)]=t[n(191)]||{},r=[n(193),n(218),"info",n(238),n(213),n(182),n(234)],o=0;o<r.length;o++){var i=me[n(194)][n(222)][n(239)](me),a=r[o],c=e[a]||i;i.__proto__=me[n(239)](me),i[n(181)]=c.toString[n(239)](c),e[a]=i}}))();class _e extends N{constructor(n={}){var t=ve;super(n),this[t(229)]={value:null},this[t(226)]={value:null},this[t(186)]={value:null},this._tDiffuseBlur={value:null},this[t(206)]={value:null},this[t(228)]={value:!1},this[t(241)]={value:0},this[t(187)]={value:0},this[t(184)]={value:.5},this[t(201)]={value:.9},this._maxDepthThreshold={value:1},this[t(199)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(212)]={value:1},this[t(243)]={value:1},this[t(247)](n)}[de(204)](n){var t,e=de;!(null==(t=n[e(217)])?void 0:t[e(233)])&&(n[e(217)].USE_UV=""),n[e(219)].hasBlur=this[e(228)],n[e(219)][e(210)]=this._tDiffuse,n[e(219)].tDepth=this[e(229)],n[e(219)].distortionMap=this._distortionMap,n[e(219)][e(188)]=this._tDiffuseBlur,n.uniforms[e(237)]=this[e(206)],n[e(219)][e(249)]=this[e(241)],n[e(219)][e(190)]=this._mixBlur,n[e(219)][e(225)]=this._blurStrength,n.uniforms.minDepthThreshold=this._minDepthThreshold,n.uniforms[e(185)]=this[e(244)],n[e(219)].depthScale=this._depthScale,n.uniforms[e(220)]=this[e(232)],n[e(219)][e(208)]=this._distortion,n[e(219)][e(236)]=this._mixContrast,n[e(183)]=e(189)+n.vertexShader,n[e(183)]=n[e(183)][e(254)]("#include <project_vertex>",e(207)),n[e(230)]=e(246)+n.fragmentShader,n[e(230)]=n[e(230)][e(254)](e(250),e(215))}get[de(210)](){return this._tDiffuse.value}set[de(210)](n){var t=de;this[t(186)][t(198)]=n}get[de(216)](){return this[de(229)].value}set tDepth(n){this[de(229)].value=n}get[de(252)](){var n=de;return this._distortionMap[n(198)]}set[de(252)](n){this[de(226)].value=n}get[de(188)](){var n=de;return this._tDiffuseBlur[n(198)]}set[de(188)](n){var t=de;this._tDiffuseBlur[t(198)]=n}get[de(237)](){var n=de;return this[n(206)][n(198)]}set[de(237)](n){var t=de;this._textureMatrix[t(198)]=n}get hasBlur(){var n=de;return this[n(228)][n(198)]}set[de(211)](n){var t=de;this[t(228)][t(198)]=n}get[de(249)](){return this[de(241)].value}set[de(249)](n){this._mirror.value=n}get mixBlur(){var n=de;return this._mixBlur[n(198)]}set mixBlur(n){var t=de;this[t(187)][t(198)]=n}get[de(225)](){var n=de;return this[n(184)][n(198)]}set mixStrength(n){var t=de;this._blurStrength[t(198)]=n}get minDepthThreshold(){var n=de;return this._minDepthThreshold[n(198)]}set[de(245)](n){var t=de;this[t(201)][t(198)]=n}get[de(185)](){var n=de;return this[n(244)][n(198)]}set[de(185)](n){this[de(244)].value=n}get depthScale(){var n=de;return this[n(199)][n(198)]}set[de(224)](n){var t=de;this[t(199)][t(198)]=n}get depthToBlurRatioBias(){var n=de;return this[n(232)][n(198)]}set[de(220)](n){var t=de;this._depthToBlurRatioBias[t(198)]=n}get distortion(){var n=de;return this._distortion[n(198)]}set[de(208)](n){var t=de;this[t(212)][t(198)]=n}get[de(236)](){return this[de(243)].value}set[de(236)](n){var t=de;this[t(243)][t(198)]=n}}function ye(n){function t(n){var e=ve;if(typeof n===e(255))return function(n){}[e(194)](e(251))[e(253)]("counter");1!==(""+n/n)[e(214)]||n%20==0?function(){return!0}.constructor(e(256)+e(227)).call("action"):function(){return!1}[e(194)]("debu"+e(227)).apply(e(242)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const xe=Me;function be(){const n=["multiply","prototype","trace","material","t-diffuse","far","return (function() ","clipPlane","4238948qVApLZ","length","mirror","dispose","defines-USE_DISTORTION","43547GeWqyw","reflectorPlane","56qpSmdX","chain","value","defines-USE_DEPTH","assign","350aDDEWW","function *\\( *\\)","max-depth-threshold","console","visible","82772GkDEWz",'{}.constructor("return this")( )',"elements","depth-scale","autoUpdate","setFromNormalAndCoplanarPoint","781rYSZje","67728kpyyBW","rotationMatrix","texture","reflectorWorldPosition","render","413798uepjrM","has-blur","__proto__","14zzXqBB","index","set","textureMatrix","applyMatrix4","info","add","counter","sign","depth-to-blur-ratio-bias","action","distortionMap","position","error","gger","lookAt","reflect","clear","lookAtPosition","shadowMap","toString","updateMatrixWorld","target","38435VsfhCG","enabled","subVectors","constant","bind","matrixWorld","setRenderTarget","extractRotation","call","setFromMatrixPosition","texture-matrix","normal","stateObject","string","number","while (true) {}","autoClear","mix-strength","uuid","12wnILaF","constructor","projectionMatrix","cameraWorldPosition","debu","39NQyTya","virtualCamera","dot","TresMeshReflectorMaterial","depthTexture","addScaledVector","min-depth-threshold","apply","t-depth","13vsERyR","matrixWorldInverse","negate","warn","60399kxgGLu","view","defines-USE_BLUR","copy"];return(be=function(){return n})()}!function(n,t){const e=Me,r=be();for(;;)try{if(297301===-parseInt(e(322))/1*(-parseInt(e(349))/2)+-parseInt(e(292))/3*(parseInt(e(334))/4)+-parseInt(e(372))/5*(parseInt(e(287))/6)+parseInt(e(346))/7*(parseInt(e(324))/8)+parseInt(e(305))/9*(-parseInt(e(329))/10)+-parseInt(e(340))/11*(-parseInt(e(341))/12)+parseInt(e(301))/13*(-parseInt(e(317))/14))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ie=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ie(this,(function(){const n=Me,t=new RegExp(n(330)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ee("init");t.test(r+n(325))&&e.test(r+"input")?Ee():r("0")}))()}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(299)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Se(void 0,(function(){const n=Me;let t;try{t=Function(n(315)+n(335)+");")()}catch(o){t=window}const e=t[n(332)]=t[n(332)]||{},r=["log",n(304),n(354),n(362),"exception","table",n(311)];for(let i=0;i<r.length;i++){const t=Se[n(288)][n(310)][n(376)](Se),o=r[i],a=e[o]||t;t[n(348)]=Se[n(376)](Se),t[n(369)]=a.toString[n(376)](a),e[o]=t}}))();const we=[xe(382),xe(319),xe(313),xe(300),"t-diffuse-blur",xe(347),xe(285),xe(298),xe(331),xe(337),xe(358),"distortion",xe(360),"mix-contrast",xe(307),xe(327),xe(321)];function Me(n,t){const e=be();return(Me=function(n,t){return e[n-=285]})(n,t)}const Ae=nn({__name:xe(350),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=n;const{resolution:o,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,blur:l,mirror:f,mixBlur:p,mixStrength:d,distortion:v,distortionMap:m,mixContrast:g}=X(r),{camera:_,scene:y,renderer:x,extend:A}=W();A({MeshReflectorMaterial:_e});const E=gn(),T=gn(),D=gn(),P=gn(),z=Q((()=>{const n=Me;return typeof l[n(326)]===n(386)?[l[n(326)],l[n(326)]]:l.value})),C=Q((()=>z.value[0]>0||z.value[1]>0)),F={reflectorPlane:new L,normal:new R,reflectorWorldPosition:new R,cameraWorldPosition:new R,rotationMatrix:new H,lookAtPosition:new R(0,0,-1),clipPlane:new Z,view:new R,target:new R,q:new Z,virtualCamera:new G,textureMatrix:new H};ln((()=>{var n;const r=Me;null==(n=E[r(326)])||n[r(343)].dispose();const l={minFilter:I,magFilter:I,type:h};var _,y;E[r(326)]=new b(o[r(326)],o[r(326)],(_=c({},l),y={depthBuffer:!0,depthTexture:new S(o[r(326)],o[r(326)],w,M)},t(_,e(y)))),T.value=new b(o[r(326)],o.value,l),D[r(326)]=new fe({resolution:o.value,width:z.value[0],height:z.value[1],minDepthThreshold:i[r(326)],maxDepthThreshold:a[r(326)],depthScale:s[r(326)],depthToBlurRatioBias:u[r(326)]}),P.value={mirror:f,textureMatrix:F[r(352)],mixBlur:p,tDiffuse:E[r(326)][r(343)],tDepth:E[r(326)][r(296)],tDiffuseBlur:E[r(326)].texture,hasBlur:C,mixStrength:d,minDepthThreshold:i,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:u,distortion:v,distortionMap:m[r(326)],mixContrast:g,"defines-USE_BLUR":C[r(326)]?"":void 0,"defines-USE_DEPTH":s[r(326)]>0?"":void 0,"defines-USE_DISTORTION":m[r(326)]?"":void 0}}));const O=gn(),{onLoop:B}=$();B((()=>{var n;const t=Me;if(!(O[t(326)]&&x[t(326)]&&E[t(326)]&&_.value))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Me;n.isMesh&&n.material&&n[r(312)][r(286)]===t&&(e=n)})),e}(y[t(326)],O[t(326)][t(286)]);if(!e)return;e[t(333)]=!1;const o=x[t(326)].xr.enabled,i=x.value[t(368)][t(338)];(function(n){var t,e;const o=Me;if(F[o(344)][o(381)](n.matrixWorld),F.cameraWorldPosition.setFromMatrixPosition(null==(t=_[o(326)])?void 0:t.matrixWorld),F[o(342)][o(379)](n.matrixWorld),F[o(383)][o(351)](0,0,1),F.normal.applyMatrix4(F.rotationMatrix),F[o(344)][o(297)](F.normal,r.reflectorOffset),F[o(306)][o(374)](F.reflectorWorldPosition,F[o(290)]),F[o(306)][o(294)](F[o(383)])>0)return;F[o(306)].reflect(F[o(383)])[o(303)](),F[o(306)].add(F[o(344)]),F[o(342)][o(379)](null==(e=_[o(326)])?void 0:e[o(377)]),F.lookAtPosition.set(0,0,-1),F[o(367)][o(353)](F[o(342)]),F[o(367)].add(F[o(290)]),F[o(371)][o(374)](F.reflectorWorldPosition,F.lookAtPosition),F.target[o(365)](F[o(383)])[o(303)](),F.target[o(355)](F[o(344)]),F.virtualCamera[o(361)][o(308)](F[o(306)]),F[o(293)].up[o(351)](0,1,0),F.virtualCamera.up.applyMatrix4(F[o(342)]),F[o(293)].up[o(365)](F[o(383)]),F[o(293)][o(364)](F[o(371)]),F[o(293)][o(314)]=(null==_?void 0:_[o(326)])[o(314)],F[o(293)][o(370)](),F[o(293)][o(289)][o(308)]((null==_?void 0:_[o(326)])[o(289)]),F[o(352)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F[o(352)][o(309)](F[o(293)].projectionMatrix),F[o(352)].multiply(F.virtualCamera[o(302)]),F.textureMatrix[o(309)](n.matrixWorld),F[o(323)][o(339)](F[o(383)],F[o(344)]),F[o(323)][o(353)](F.virtualCamera[o(302)]),F[o(316)][o(351)](F.reflectorPlane[o(383)].x,F[o(323)][o(383)].y,F[o(323)].normal.z,F[o(323)][o(375)]);const i=F.virtualCamera[o(289)];F.q.x=(Math[o(357)](F[o(316)].x)+i[o(336)][8])/i[o(336)][0],F.q.y=(Math[o(357)](F.clipPlane.y)+i.elements[9])/i[o(336)][5],F.q.z=-1,F.q.w=(1+i[o(336)][10])/i[o(336)][14],F.clipPlane.multiplyScalar(2/F[o(316)][o(294)](F.q)),i[o(336)][2]=F[o(316)].x,i[o(336)][6]=F[o(316)].y,i[o(336)][10]=F[o(316)].z+1,i[o(336)][14]=F.clipPlane.w})(e),x[t(326)][t(368)][t(338)]=!1,x.value[t(378)](E[t(326)]),x.value[t(388)]||x[t(326)][t(366)](),x.value[t(345)](y[t(326)],F[t(293)]),null==(n=null==D?void 0:D.value)||n[t(345)](x[t(326)],E[t(326)],T.value),x[t(326)].xr[t(373)]=o,x.value[t(368)].autoUpdate=i,e[t(333)]=!0,x[t(326)][t(378)](null)}));const k=xn(),j=Q((()=>{const n=Me,t={};return Object[n(328)](t,r),Object[n(328)](t,k[n(326)]),t}));return mn((()=>{var n,t;const e=Me;null==(n=null==E?void 0:E[e(326)])||n[e(320)](),null==(t=null==T?void 0:T.value)||t[e(320)]()})),(n,t)=>{var e,r,o;const c=Me;return rn(),on(c(295),bn({key:"key"+P[c(326)]["defines-USE_BLUR"]+P[c(326)][c(327)]+P[c(326)][c(321)],ref_key:"materialRef",ref:O},j[c(326)],{"texture-matrix":F[c(352)],mirror:J(f),"t-diffuse":null==(e=E[c(326)])?void 0:e[c(343)],"t-depth":null==(r=E.value)?void 0:r[c(296)],"t-diffuse-blur":null==(o=T[c(326)])?void 0:o.texture,"has-blur":C[c(326)],"mix-strength":J(d),"min-depth-threshold":J(i),"max-depth-threshold":J(a),"depth-scale":J(s),"depth-to-blur-ratio-bias":J(u),distortion:J(v),distortionMap:J(m),"mix-contrast":J(g),"defines-USE_BLUR":C[c(326)]?"":void 0,"defines-USE_DEPTH":J(s)>0?"":void 0,"defines-USE_DISTORTION":J(m)?"":void 0}),null,16,we)}}});function Ee(n){function t(n){const e=Me;if(typeof n===e(385))return function(n){}[e(288)](e(387))[e(299)](e(356));1!==(""+n/n)[e(318)]||n%20==0?function(){return!0}.constructor(e(291)+"gger")[e(380)](e(359)):function(){return!1}.constructor(e(291)+e(363))[e(299)](e(384)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Re(){const n=["gger","1432664Wfdhoh","stateObject","log","11883951CMQiVg","chain","init","debu","info","6TKHFKh","constructor","CubeCamera","function *\\( *\\)","action","948805BgIHkY","toString","782391frfqUk","2626323HxABue","2017312hHEZXt","type","test","dispose","prototype","call","warn","value","length",'{}.constructor("return this")( )',"4gXveWX","apply","console","2839WCxYNK","exception","fog","trace","table","bind","while (true) {}","update","return (function() ","counter","texture","background"];return(Re=function(){return n})()}!function(n,t){const e=Pe,r=Re();for(;;)try{if(400278===parseInt(e(313))/1*(-parseInt(e(310))/2)+parseInt(e(298))/3+-parseInt(e(326))/4+-parseInt(e(296))/5+parseInt(e(291))/6*(-parseInt(e(299))/7)+-parseInt(e(300))/8+parseInt(e(286))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Te=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Te(this,(function(){const n=Pe,t=new RegExp(n(294)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ze(n(288));t[n(302)](r+n(287))&&e[n(302)](r+"input")?ze():r("0")}))()}();const De=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Pe(311)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pe(n,t){const e=Re();return(Pe=function(n,t){return e[n-=285]})(n,t)}function ze(n){function t(n){const e=Pe;if("string"==typeof n)return function(n){}[e(292)](e(319))[e(311)](e(322));1!==(""+n/n)[e(308)]||n%20==0?function(){return!0}[e(292)](e(289)+e(325))[e(305)](e(295)):function(){return!1}[e(292)](e(289)+e(325))[e(311)](e(327)),t(++n)}try{if(n)return t;t(0)}catch(e){}}De(void 0,(function(){const n=Pe,t=function(){const n=Pe;let t;try{t=Function(n(321)+n(309)+");")()}catch(e){t=window}return t}(),e=t[n(312)]=t[n(312)]||{},r=[n(285),n(306),n(290),"error",n(314),n(317),n(316)];for(let o=0;o<r.length;o++){const t=De[n(292)][n(304)][n(318)](De),i=r[o],a=e[i]||t;t.__proto__=De.bind(De),t[n(297)]=a.toString[n(318)](a),e[i]=t}}))();const Ce=Oe;function Fe(){const n=["rgRef","error","visible","table","TresGroup","58cnaKap","function *\\( *\\)","stateObject","value",'{}.constructor("return this")( )',"init","object","console","toString","debu","resolution","while (true) {}","bind","near","primitive","3288XoXiLT","284779zhIgun","apply","17789MTOrnM","4959WUotKF","constructor","$slots","texture","prototype","frames","envMap","1736khBfZK","trace","counter","index","10620FgcmiQ","gger","far","1144LRyPml","fog","call","1769532yDbsei","chain","6958XSqHaq","exception","2040440QBcucV","info","string","test","168vyzwTJ"];return(Fe=function(){return n})()}function Oe(n,t){const e=Fe();return(Oe=function(n,t){return e[n-=484]})(n,t)}!function(n,t){const e=Oe,r=Fe();for(;;)try{if(312087===parseInt(e(505))/1*(-parseInt(e(487))/2)+-parseInt(e(502))/3*(parseInt(e(520))/4)+parseInt(e(527))/5+parseInt(e(523))/6+parseInt(e(525))/7*(parseInt(e(513))/8)+-parseInt(e(506))/9*(-parseInt(e(517))/10)+-parseInt(e(503))/11*(parseInt(e(531))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(504)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Be(this,(function(){const n=Oe,t=new RegExp(n(488)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ne(n(492));t[n(530)](r+n(524))&&e[n(530)](r+"input")?Ne():r("0")}))()}();const ke=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Oe(504)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ke(void 0,(function(){const n=Oe;let t;try{t=Function("return (function() "+n(491)+");")()}catch(o){t=window}const e=t[n(494)]=t[n(494)]||{},r=["log","warn",n(528),n(533),n(526),n(485),n(514)];for(let i=0;i<r.length;i++){const t=ke[n(507)][n(510)][n(499)](ke),o=r[i],a=e[o]||t;t.__proto__=ke[n(499)](ke),t[n(495)]=a[n(495)][n(499)](a),e[o]=t}}))();const je=[Ce(493)],Ue=nn({__name:Ce(516),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Ce,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=W(),c=K(null),s=K(n),u=K(t),l=K(e),f=K(null);let p,d;return q((()=>s),(n=>{var t;const e=Pe;null==(t=c[e(307)])||t[e(303)](),c[e(307)]=new v(n[e(307)]),c[e(307)][e(323)][e(301)]=h}),{immediate:!0}),q([u,l,c],(([n,t,e])=>{const r=Pe;e&&(f[r(307)]=new(D[r(293)])(n,t,e))}),{immediate:!0}),mn((()=>{var n;null==(n=c[Pe(307)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Pe;p=a.value.fog,d=a[t(307)][t(324)],a[t(307)][t(324)]=r||d,a.value[t(315)]=o||p,null==(n=f.value)||n[t(320)](i[t(307)],a[t(307)]),a[t(307)][t(315)]=p,a[t(307)].background=d}}}({resolution:o[r(497)],near:o[r(500)],far:o[r(519)],envMap:o[r(512)],fog:o[r(521)]}),{onBeforeLoop:s}=$();let u=0;const l=K(null);return s((()=>{const n=r;l[n(490)]&&(o[n(511)]===1/0||u<o[n(511)])&&(l[n(490)][n(484)]=!1,c(),l[n(490)][n(484)]=!0,u++)})),t({texture:null==(e=i[r(490)])?void 0:e[r(509)]}),(n,t)=>{const e=r;return rn(),on(e(486),null,[dn(e(501),{object:J(a)},null,8,je),dn(e(486),{ref_key:e(532),ref:l},[an(n[e(508)],"default")],512)])}}});function Ne(n){function t(n){const e=Oe;if(typeof n===e(529))return function(n){}[e(507)](e(498))[e(504)](e(515));1!==(""+n/n).length||n%20==0?function(){return!0}[e(507)](e(496)+e(518))[e(522)]("action"):function(){return!1}[e(507)](e(496)+e(518))[e(504)](e(489)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ze,r=Ge();for(;;)try{if(814377===parseInt(e(176))/1+parseInt(e(206))/2+-parseInt(e(167))/3*(parseInt(e(164))/4)+parseInt(e(195))/5+-parseInt(e(189))/6*(-parseInt(e(166))/7)+parseInt(e(181))/8*(parseInt(e(182))/9)+parseInt(e(187))/10*(-parseInt(e(192))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Le=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Le(this,(function(){const n=Ze,t=new RegExp(n(174)),e=new RegExp(n(190),"i"),r=Ve(n(205));t[n(169)](r+"chain")&&e[n(169)](r+n(191))?Ve():r("0")}))()}();const He=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ze(197)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ze(n,t){const e=Ge();return(Ze=function(n,t){return e[n-=163]})(n,t)}function Ge(){const n=["99yyoQBP","return (function() ","key","string","warn","10zljwuH","length","397146gkxROC","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","35520166pAmjzd","info","debu","3833150eTlJdd","toString","apply","bind","generateUUID","__proto__","constructor","table","action","forEach","init","2958154XUPDrC","reduce","defineProperty","8clUSWB","uniforms","161XEtGkg","1659078nRsbyS","assign","test","UniformsUtils",'{}.constructor("return this")( )',"MathUtils","entries","function *\\( *\\)","ShaderMaterial","308088NrIaDf","gger","error","console","counter","780616fwQtaR"];return(Ge=function(){return n})()}function We(n,t,e,r){const o=Ze,i=class extends D[o(175)]{constructor(i={}){const a=o,s=Object[a(173)](n);super({uniforms:s[a(207)](((n,[t,e])=>{const r=D[a(170)].clone({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this.key="",s[a(204)]((([n])=>Object[a(163)](this,n,{get:()=>this[a(165)][n].value,set:t=>this[a(165)][n].value=t}))),Object[a(168)](this,i),r&&r(this)}};return i[o(184)]=D[o(172)][o(199)](),i}function Ve(n){function t(n){const e=Ze;if(typeof n===e(185))return function(n){}[e(201)]("while (true) {}").apply(e(180));1!==(""+n/n)[e(188)]||n%20==0?function(){return!0}[e(201)](e(194)+"gger").call(e(203)):function(){return!1}.constructor(e(194)+e(177))[e(197)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}He(void 0,(function(){const n=Ze;let t;try{t=Function(n(183)+n(171)+");")()}catch(o){t=window}const e=t[n(179)]=t.console||{},r=["log",n(186),n(193),n(178),"exception",n(202),"trace"];for(let i=0;i<r[n(188)];i++){const t=He.constructor.prototype.bind(He),o=r[i],a=e[o]||t;t[n(200)]=He[n(198)](He),t[n(196)]=a[n(196)][n(198)](a),e[o]=t}}))();var $e=Qe;!function(n,t){for(var e=Qe,r=Ke();;)try{if(123536===-parseInt(e(429))/1+-parseInt(e(566))/2*(-parseInt(e(486))/3)+-parseInt(e(491))/4+-parseInt(e(475))/5*(-parseInt(e(554))/6)+-parseInt(e(394))/7+parseInt(e(536))/8*(-parseInt(e(542))/9)+parseInt(e(501))/10*(parseInt(e(479))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Qe(553)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ye(this,(function(){var n=Qe,t=new RegExp(n(408)),e=new RegExp(n(532),"i"),r=Rr("init");t[n(529)](r+n(416))&&e[n(529)](r+n(478))?Rr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Qe(553)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ke(){var n=["configurable","csm_main_","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ",". Shader cannot compile.","stateObject","_getMaterialDefine","MeshStandardMaterial","fragmentShader","trim","1128330FVgYQd","slice","clearcoatNormal","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","\n    vec3 transformed = ","get","prototype","csm_AO","#define IS_VERTEX;\n","diffuse","clearcoatRoughness","set","normal","call","function *\\( *\\)","\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ","@@iterator","material.clearcoat = ","uniforms","baseMaterial","_getPatchMapForMaterial","MeshBasicMaterial","chain","lastIndexOf","find","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","csm_DiffuseColor","getPrototypeOf","vertexShader","this hasn't been initialised - super() hasn't been called","symbol","return (function() ",'". Shader cannot compile.',"constructor","pointSize","228288KYXPHD","concat","error","message","table",", 1.0 );\n  ","cacheHash","_patchShader","material.clearcoatRoughness = ","Material","trace","string","\n    #include <color_fragment>\n    diffuseColor = ","ShadowMaterial","push","includes","csm_PositionRaw","\n    #include <metalnessmap_fragment>\n    metalnessFactor = ","propertyIsEnumerable","MeshPhysicalMaterial","fragColor","isArray","csm_PointSize","return","__csm","indexOf","bump","next",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","void main()","entries","silent","onBeforeCompile","type","__proto__","object","defineProperty","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","action","replace","toUpperCase",";\n  ","\n    vec4 csm_internal_positionUnprojected = ","is not a constructor","_getCacheHash","230ooEoCX","function","#define IS_UNKNOWN;\n","input","121OEFhCp","_generateMaterial","log",'" is required to use output "',"writable"," );\n    ","assign","9YGbJKD",'CSM: Property "',"getOwnPropertyDescriptors","emissive","\n            ","493864xStALA","setPrototypeOf"," - (dot(","MeshPhongMaterial",";\n    ","gger","keys","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","key","console","496990Hzgajk","MeshLambertMaterial","RawShaderMaterial","MeshToonMaterial","info","sham","customProgramCacheKey","void main() {","clearcoat"," is not available in ","filter","\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","\n    gl_PointSize = ","csm_DepthAlpha","roughness","from","\n    \n","bind","update","forEach","void ","positionRaw","length","Object","toString","\\$&","\n            \n            void main() {\n          ",'{}.constructor("return this")( )',"test","MathUtils","\n    gl_FragColor = ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","MeshDepthMaterial","\n    vec3 totalEmissiveRadiance = ","lights_physical_fragment","717064RJhdfP","default","csm_Emissive","counter","Arguments",", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ","18WAeWPA","getOwnPropertyDescriptor","value","enumerable","debu","depthAlpha","Derived constructors may only return object or undefined","metalness","MeshMatcapMaterial","csm_Roughness","Map","apply","5322MTDuFl","@@toPrimitive must return a primitive value.","csm_Clearcoat","cacheKey","position","getOwnPropertySymbols","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","join","\n    #include <dithering_fragment>\n    gl_FragColor  = ","patchMap",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","undefined","152170wYvEIF","construct","csm_Bump","substring","csm_Position","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","exception","split","();\n              // #_CSM_#\n          ","create","\n    varying mat4 csm_internal_vModelViewMatrix;\n","csm_Normal"];return(Ke=function(){return n})()}function qe(n){var t=Qe,e=function(n,t){var e=Qe;if(typeof n!==e(465)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r[e(407)](n,t||e(537));if(typeof o!==e(465))return o;throw new TypeError(e(555))}return(t===e(440)?String:Number)(n)}(n,"string");return typeof e===t(424)?e:String(e)}function Qe(n,t){var e=Ke();return(Qe=function(n,t){return e[n-=388]})(n,t)}function Je(n,t,e){var r=Qe;return(t=qe(t))in n?Object[r(466)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=Qe,r=Object[e(497)](n);if(Object[e(559)]){var o=Object[e(559)](n);t&&(o=o.filter((function(t){var r=e;return Object[r(543)](n,t)[r(545)]}))),r[e(443)].apply(r,o)}return r}function tr(n){for(var t=Qe,e=1;e<arguments[t(523)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(t){Je(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object[t(488)](r)):nr(Object(r))[t(520)]((function(e){var o=t;Object[o(466)](n,e,Object[o(543)](r,e))}))}return n}function er(n,t){var e=Qe;if(null==n)return{};var r,o,i=function(n,t){var e=Qe;if(null==n)return{};var r,o,i={},a=Object[e(497)](n);for(o=0;o<a[e(523)];o++)r=a[o],t[e(454)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object.getOwnPropertySymbols){var a=Object[e(559)](n);for(o=0;o<a[e(523)];o++)r=a[o],t[e(454)](r)>=0||Object.prototype[e(447)][e(407)](n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=Qe;(null==t||t>n.length)&&(t=n[e(523)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){return function(n){if(Array[Qe(450)](n))return n}(n)||function(n,t){var e=Qe,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n[e(410)];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(407)](n))[e(456)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r)).done)&&(s.push(o[e(544)]),s[e(523)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(452)]&&(c=r[e(452)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=Qe;if(n){if("string"==typeof n)return rr(n,t);var r=Object[e(400)][e(525)][e(407)](n)[e(395)](8,-1);return r===e(524)&&n[e(427)]&&(r=n[e(427)].name),r===e(552)||"Set"===r?Array[e(516)](n):r===e(540)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(Qe(467))}()}function ir(n,t){for(var e=Qe,r=0;r<t[e(523)];r++){var o=t[r];o.enumerable=o[e(545)]||!1,o[e(578)]=!0,"value"in o&&(o[e(483)]=!0),Object[e(466)](n,qe(o[e(499)]),o)}}function ar(n){if(void 0===n)throw new ReferenceError(Qe(423));return n}function cr(n,t){var e=Qe;return(cr=Object[e(492)]?Object[e(492)][e(518)]():function(n,t){return n[e(464)]=t,n})(n,t)}function sr(n){var t=Qe;return(sr=Object[t(492)]?Object.getPrototypeOf[t(518)]():function(n){var e=t;return n[e(464)]||Object[e(421)](n)})(n)}function ur(n){var t=function(){var n=Qe;if(typeof Reflect===n(565)||!Reflect[n(567)])return!1;if(Reflect[n(567)][n(506)])return!1;if(typeof Proxy===n(476))return!0;try{return Boolean[n(400)].valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=Qe,o=sr(n);if(t){var i=sr(this)[r(427)];e=Reflect[r(567)](o,arguments,i)}else e=o[r(553)](this,arguments);return function(n,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError(Qe(548));return ar(n)}(this,e)}}Xe(void 0,(function(){for(var n=Qe,t=function(){var n,t=Qe;try{n=Function(t(425)+t(528)+");")()}catch(e){n=window}return n}(),e=t[n(500)]=t[n(500)]||{},r=[n(481),"warn",n(505),n(431),n(572),n(433),n(439)],o=0;o<r[n(523)];o++){var i=Xe[n(427)][n(400)].bind(Xe),a=r[o],c=e[a]||i;i.__proto__=Xe[n(518)](Xe),i.toString=c[n(525)][n(518)](c),e[a]=i}}))();var lr,fr,pr,dr={diffuse:$e(420),normal:$e(577),roughness:$e(551),metalness:"csm_Metalness",emissive:$e(538),ao:$e(401),bump:$e(568),clearcoat:$e(556),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:"csm_ClearcoatNormal",pointSize:$e(451),fragColor:"csm_FragColor",depthAlpha:$e(514),position:$e(570),positionRaw:$e(445)},hr=(Je(lr={},"".concat(dr[$e(558)]),"*"),Je(lr,""[$e(430)](dr[$e(522)]),"*"),Je(lr,"".concat(dr[$e(406)]),"*"),Je(lr,""[$e(430)](dr[$e(428)]),["PointsMaterial"]),Je(lr,""[$e(430)](dr[$e(403)]),"*"),Je(lr,""[$e(430)](dr[$e(449)]),"*"),Je(lr,""[$e(430)](dr[$e(489)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),Je(lr,""[$e(430)](dr[$e(515)]),[$e(391),"MeshPhysicalMaterial"]),Je(lr,""[$e(430)](dr[$e(549)]),[$e(391),$e(448)]),Je(lr,"".concat(dr.ao),[$e(391),"MeshPhysicalMaterial",$e(415),$e(502),$e(494),$e(504)]),Je(lr,""[$e(430)](dr[$e(455)]),["MeshLambertMaterial",$e(550),"MeshNormalMaterial","MeshPhongMaterial",$e(448),$e(391),"MeshToonMaterial",$e(442)]),Je(lr,""[$e(430)](dr[$e(547)]),[$e(533)]),Je(lr,""[$e(430)](dr[$e(509)]),[$e(448)]),Je(lr,"".concat(dr[$e(404)]),[$e(448)]),Je(lr,""[$e(430)](dr[$e(396)]),[$e(448)]),lr),vr={"#include <lights_physical_fragment>":P[$e(535)]},mr=(Je(fr={},""[$e(430)](dr[$e(406)]),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = "[$e(430)](dr[$e(406)],$e(457))}),Je(fr,"".concat(dr.position),{"#include <begin_vertex>":$e(398)[$e(430)](dr[$e(558)],";\n  ")}),Je(fr,""[$e(430)](dr[$e(522)]),{"#include <begin_vertex>":$e(472)[$e(430)](dr[$e(522)],$e(564))}),Je(fr,""[$e(430)](dr[$e(428)]),{"gl_PointSize = size;":$e(513)[$e(430)](dr[$e(428)],";\n    ")}),Je(fr,""[$e(430)](dr[$e(403)]),{"#include <color_fragment>":$e(441)[$e(430)](dr.diffuse,";\n  ")}),Je(fr,"".concat(dr[$e(449)]),{"#include <dithering_fragment>":$e(562).concat(dr.fragColor,$e(471))}),Je(fr,""[$e(430)](dr[$e(489)]),{"vec3 totalEmissiveRadiance = emissive;":$e(534)[$e(430)](dr[$e(489)],$e(495))}),Je(fr,""[$e(430)](dr.roughness),{"#include <roughnessmap_fragment>":$e(397)[$e(430)](dr[$e(515)],";\n    ")}),Je(fr,"".concat(dr.metalness),{"#include <metalnessmap_fragment>":$e(446)[$e(430)](dr[$e(549)],$e(495))}),Je(fr,"".concat(dr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[$e(430)](dr.ao,$e(495))}),Je(fr,""[$e(430)](dr.bump),{"#include <normal_fragment_maps>":$e(560)[$e(430)](dr[$e(455)],$e(493))[$e(430)](dr[$e(455)],$e(541))}),Je(fr,"".concat(dr.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * "[$e(430)](dr[$e(547)],$e(484)),"gl_FragColor = packDepthToRGBA( fragCoordZ );":$e(458).concat(dr.depthAlpha,$e(495))}),Je(fr,""[$e(430)](dr[$e(509)]),{"material.clearcoat = clearcoat;":$e(411)[$e(430)](dr[$e(509)],";")}),Je(fr,"".concat(dr.clearcoatRoughness),{"material.clearcoatRoughness = clearcoatRoughness;":$e(437)[$e(430)](dr.clearcoatRoughness,";")}),Je(fr,""[$e(430)](dr[$e(396)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),fr),gr=(Je(pr={},"".concat(dr[$e(558)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":$e(409)[$e(430)](dr[$e(558)],$e(434))}),Je(pr,""[$e(430)](dr[$e(522)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[$e(430)](dr[$e(558)],";\n  ")}),Je(pr,""[$e(430)](dr.diffuse),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = "[$e(430)](dr[$e(403)],";\n  ")}),Je(pr,""[$e(430)](dr[$e(449)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":$e(531)[$e(430)](dr.fragColor,";\n  ")}),pr),_r={clearcoat:[dr[$e(509)],dr[$e(396)],dr[$e(404)]]},yr=$e(576),xr=$e(576),br=$e(517),Ir=["baseMaterial","fragmentShader","vertexShader",$e(412),$e(563),$e(557),"silent"],Sr=function(n,t,e){var r=$e;return n[r(573)](t)[r(561)](e)},wr=function(n,t){var e,r,o=$e;return new RegExp("\\b"[o(430)]((e=t,r=$e,e[r(469)](/[-\/\\^$*+?.()|[\]{}]/g,r(526))),"\\b"))[o(529)](n)};function Mr(n){return n?n[$e(469)](/\s/g,""):void 0}function Ar(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Er=function(n){var t=$e;!function(n,t){var e=Qe;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n[e(400)]=Object[e(575)](t&&t[e(400)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(466)](n,"prototype",{writable:!1}),t&&cr(n,t)}(c,n);var e,r,o,i,a=ur(c);function c(n){var t,e,r,o,i,s=Qe,u=n[s(413)],l=n[s(392)],f=n[s(422)],p=n.uniforms,d=n[s(563)],h=n[s(557)],v=n[s(461)],m=er(n,Ir);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=$e;try{new n}catch(e){if(e[t(432)][t(454)](t(473))>=0)return!1}return!0}(u)?(e=u,Object[s(485)](e,m)):e=new u(m),e[s(463)]===s(503))throw new Error("CustomShaderMaterial does not support RawShaderMaterial");(function(n,t){var e=$e;e(523),Object.assign(n,t);var r=Object[e(421)](t);Object[e(460)](Object[e(488)](r))[e(511)]((function(n){var t=e,r=typeof n[1][t(399)]===t(476),o=typeof n[1][t(405)]===t(476),i=typeof n[1].value===t(476),a=n[0]===t(427);return(r||o||i)&&!a}))[e(520)]((function(t){var r=e;typeof n[t[0]]!==r(476)&&Object[r(466)](n,t[0],t[1])}))})(ar(t=a[s(407)](this)),e),t[s(453)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:D[s(530)].generateUUID(),type:e[s(463)],isAlreadyExtended:(r=e[s(462)],o=$e,i=r.toString()[o(393)](),!(0===i.substring(i[o(454)]("{")+1,i[o(417)]("}")).trim().length)),cacheHash:"",silent:v},t.uniforms=tr(tr({},t[s(412)]||{}),p||{});var g=t[s(453)],_=g[s(392)],y=g[s(422)],x=t[s(412)];return t[s(453)][s(435)]=t[s(474)](),t[s(480)](_,y,x),t}return e=c,r=[{key:t(519),value:function(){var n=t,e=arguments[n(523)]>0&&void 0!==arguments[0]?arguments[0]:{};this[n(412)]=e[n(412)]||this[n(412)],Object[n(485)](this[n(453)],e);var r=this.__csm,o=r[n(392)],i=r[n(422)],a=this[n(412)],c=this[n(474)]();this[n(453)][n(435)]=c,this._generateMaterial(o,i,a)}},{key:"clone",value:function(){var n=t,e={baseMaterial:this[n(453)][n(413)],fragmentShader:this[n(453)].fragmentShader,vertexShader:this.__csm[n(422)],uniforms:this[n(412)],silent:this.__csm.silent,patchMap:this[n(453)][n(563)],cacheKey:this.__csm.cacheKey},r=new(this[n(427)])(e);return Object[n(485)](this,r),r}},{key:t(474),value:function(){var n=t,e=this[n(453)],r=e.fragmentShader,o=e[n(422)],i=this[n(412)],a=[Mr(r),Mr(o),i][n(511)]((function(n){return void 0!==n}));return a[n(523)]>0?Mn(a,{excludeValues:!0}):this[n(507)]()}},{key:"_generateMaterial",value:function(n,e,r){var o=t,i=this;this[o(412)]=r||{},this.customProgramCacheKey=function(){var n=o;return i[n(453)][n(435)]};var a=function(t){var r=o;try{var a=i[r(390)]();if(n){var c=i[r(436)](Ar(n),t[r(392)],!0);t[r(392)]=a+c}if(e){var s=i[r(436)](Ar(e),t[r(422)]);t[r(422)]=r(402)+s,t[r(422)]=a+t[r(422)]}t[r(412)]=tr(tr({},t.uniforms),i.uniforms),i[r(412)]=t[r(412)]}catch(u){console.error(u)}};if(this[o(453)].isAlreadyExtended){var c=this[o(462)];this.onBeforeCompile=function(n,t){c(n,t),a(n)}}else this.onBeforeCompile=a;this.needsUpdate=!0}},{key:t(436),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(414)]()),this[o(453)].patchMap);Object[o(460)](_r)[o(520)]((function(t){var e=o,r=or(t,2),a=r[0],c=r[1][e(418)]((function(t){return wr(n,t)}));if(c&&!i[a])throw new Error(e(487)[e(430)](a,e(482))[e(430)](c,e(426)))})),Object[o(460)](vr)[o(520)]((function(n){var t=or(n,2),e=t[0],r=t[1];a=Sr(a,e,r)})),Object[o(497)](c)[o(520)]((function(t){var e=o;Object.keys(c[t])[e(520)]((function(r){var o=e,s=hr[t],u=i.__csm.type;if("*"===t||wr(n,t)){if(!(!s||Array[o(450)](s)&&s[o(444)](u)||"*"===s))throw new Error("CSM: "[o(430)](t,o(510))[o(430)](u,o(388)));a=Sr(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(579)+this[o(453)].instanceID.replace(/-/g,"_"),h=n[o(469)](/void\s+main\s*\(\s*\)/g,o(521)[o(430)](d,"()")),v=n[o(444)](o(459)),m=a[o(444)]("// #_CSM_#");return v&&(m&&this.__csm.isAlreadyExtended?(a=a[o(469)](o(508),o(490)[o(430)](h,o(527))),s=a,u="// #_CSM_#",l=o(490)[o(430)](d,"();\n            // #_CSM_#\n          "),p=s[(f=$e)(417)](u),a=-1===p?s:s[f(569)](0,p)+l+s[f(569)](p+u[f(523)])):a=a.replace(o(508),o(419)[o(430)](r?xr:yr,o(498))[o(430)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    \n            ")[o(430)](h,o(571))[o(430)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(512))[o(430)](r?br:"\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",o(580)).concat(d,o(574)))),a}},{key:t(390),value:function(){var n=t,e=this[n(453)].type;return e?"#define IS_"[n(430)](e[n(470)](),";\n"):n(477)}},{key:t(414),value:function(){var n=t;return"ShaderMaterial"===this[n(453)][n(463)]?gr:mr}}],i=Qe,r&&ir(e.prototype,r),o&&ir(e,o),Object.defineProperty(e,i(400),{writable:!1}),c}(D[$e(438)]);function Rr(n){function t(n){var e=Qe;if(typeof n===e(440))return function(n){}.constructor("while (true) {}")[e(553)](e(539));1!==(""+n/n)[e(523)]||n%20==0?function(){return!0}[e(427)](e(546)+"gger")[e(407)](e(468)):function(){return!1}[e(427)](e(546)+e(496)).apply(e(389)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Tr(n,t){const e=Br();return(Tr=function(n,t){return e[n-=425]})(n,t)}const Dr=Tr;!function(n,t){const e=Tr,r=Br();for(;;)try{if(766015===parseInt(e(468))/1+-parseInt(e(441))/2+-parseInt(e(429))/3*(parseInt(e(454))/4)+-parseInt(e(463))/5*(-parseInt(e(459))/6)+parseInt(e(447))/7+-parseInt(e(436))/8*(parseInt(e(450))/9)+-parseInt(e(435))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Pr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tr(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Pr(this,(function(){const n=Tr,t=new RegExp(n(464)),e=new RegExp(n(426),"i"),r=Or(n(442));t[n(461)](r+"chain")&&e[n(461)](r+"input")?Or():r("0")}))()}();const zr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Tr(448)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();zr(void 0,(function(){const n=Tr;let t;try{t=Function(n(437)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(449)]=t[n(449)]||{},r=["log",n(465),n(460),"error","exception",n(434),n(428)];for(let i=0;i<r[n(439)];i++){const t=zr.constructor.prototype[n(462)](zr),o=r[i],a=e[o]||t;t[n(446)]=zr.bind(zr),t[n(455)]=a[n(455)][n(462)](a),e[o]=t}}))();const Cr=["object"],Fr=nn({__name:Dr(452),props:{color:{default:Dr(427)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Dr,e=n,r={baseMaterial:D[t(451)],metalness:e[t(430)],roughness:e.roughness,clearcoat:e[t(443)],clearcoatRoughness:e[t(433)],color:e.color,vertexShader:t(438),fragmentShader:"\n\t\t\tconst mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}\n      vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t"},o=new Er(r);return ln((()=>{const n=t;o[n(458)][n(445)](e[n(458)]),o.metalness=e[n(430)],o[n(456)]=e[n(456)],o[n(443)]=e.clearcoat,o[n(433)]=e[n(433)]})),(n,t)=>(rn(),on("primitive",{object:J(o)},null,8,Cr))}});function Or(n){function t(n){const e=Tr;if(typeof n===e(440))return function(n){}[e(457)](e(467)).apply(e(466));1!==(""+n/n)[e(439)]||n%20==0?function(){return!0}[e(457)](e(444)+e(431))[e(432)](e(425)):function(){return!1}[e(457)](e(444)+"gger")[e(448)](e(453)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Br(){const n=["index","stateObject","8rZYigG","toString","roughness","constructor","color","4062jGjsHV","info","test","bind","3385yHNmxo","function *\\( *\\)","warn","counter","while (true) {}","1360009AOShvB","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","#ff00fc","trace","370932pcTwol","metalness","gger","call","clearcoatRoughness","table","9875400LlTemK","75688yaCYNe","return (function() ","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","length","string","918840XZiJbi","init","clearcoat","debu","setStyle","__proto__","7275009sWCvYn","apply","console","378BgRrIi","MeshPhysicalMaterial"];return(Br=function(){return n})()}!function(n,t){for(var e=Ur,r=Nr();;)try{if(280957===-parseInt(e(455))/1+parseInt(e(460))/2+parseInt(e(458))/3*(-parseInt(e(449))/4)+parseInt(e(468))/5*(-parseInt(e(454))/6)+-parseInt(e(482))/7+-parseInt(e(476))/8+-parseInt(e(475))/9*(-parseInt(e(474))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var kr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ur(451)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){kr(this,(function(){var n=Ur,t=new RegExp(n(466)),e=new RegExp(n(465),"i"),r=Lr(n(481));t.test(r+n(471))&&e[n(469)](r+"input")?Lr():r("0")}))()}();var jr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Ur(451)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ur(n,t){var e=Nr();return(Ur=function(n,t){return e[n-=449]})(n,t)}function Nr(){var n=["toString","apply","stateObject","error","38586VnzUhk","322591YLVAwP","return (function() ","bind","30YhHHFw","gger","1048832TiZyod","__proto__","prototype","debu","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","function *\\( *\\)","info","10kzAzFL","test","trace","chain","length","table","4350fVYFSi","18090IQEcyv","3894384scdqtB","console","constructor","exception","call","init","625856ofmuGG","action","counter","82460BlQgJg"];return(Nr=function(){return n})()}function Lr(n){function t(n){var e=Ur;if("string"==typeof n)return function(n){}.constructor("while (true) {}").apply(e(484));1!==(""+n/n)[e(472)]||n%20==0?function(){return!0}[e(478)](e(463)+e(459))[e(480)](e(483)):function(){return!1}[e(478)]("debu"+e(459))[e(451)](e(452)),t(++n)}try{if(n)return t;t(0)}catch(e){}}jr(void 0,(function(){var n,t=Ur;try{n=Function(t(456)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n.console=n[t(477)]||{},r=[t(464),"warn",t(467),t(453),t(479),t(473),t(470)],o=0;o<r.length;o++){var i=jr.constructor[t(462)].bind(jr),a=r[o],c=e[a]||i;i[t(461)]=jr[t(457)](jr),i[t(450)]=c[t(450)][t(457)](c),e[a]=i}}))();export{We as C,Fr as _,qn as a,ct as b,It as c,Rt as d,kt as e,Xt as f,Ue as g,Ae as h,ht as u};

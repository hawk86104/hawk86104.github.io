import{e as n,D as t,a as o,o as e}from"./@tresjs.ZmhvXhx31741583630766.js";import{_ as r,c as a,C as s,r as i,c3 as c,ai as u}from"./three.sQDbNBks1741583630766.js";import{P as l}from"./tweakpane.yDiyAAkA1741583630766.js";import{d as p,a3 as f,r as m,b as v,w as g,o as d,H as x,N as y,aj as w,ak as b,u as h,e as I,f as C,g as z,j as _,al as P}from"./@vue.NRI7TcgI1741583630766.js";import"./postprocessing.7Yq_IN-m1741583630766.js";import"./@vueuse.Z9_WSajh1741583630766.js";const A=V;function M(){const n=["gger","refresh","disabled","9wRAtue","init","toString","traverse","scene","22196cWPtzV","u_progress","addBinding","TresShaderMaterial","constructor","Vector3","165938RqHuxS","颜色1st","input",'{}.constructor("return this")( )',"length","random","90XVjzGL","children","prototype","fragmentModelCom","normal","283375AkfGwC","chain","sin","mergeGeometries","count","2702493wHTAJg","apply","uniforms","#bcd4ff","Color","translate","console","setAttribute","deleteAttribute","m1Color","position","aRandom","value","toNormal","bind","set","15170617kXkqBz","rotateX","stateObject","table","string","attributes","log","#ffc0fa","BufferAttribute","debu","3112152vaKyHy","info","tangent","function *\\( *\\)","geometry","array","__proto__","error","6979GEJZGP","./draco/","变化量","while (true) {}","return (function() ","3032RzoVSJ","10WETxYK","counter","rotateY","onLoop","aCenter","toPosition","exception","action","warn","test"];return(M=function(){return n})()}!function(n,t){const o=V,e=M();for(;;)try{if(429688===-parseInt(o(145))/1+-parseInt(o(219))/2*(parseInt(o(214))/3)+parseInt(o(187))/4+-parseInt(o(156))/5*(parseInt(o(151))/6)+parseInt(o(195))/7*(-parseInt(o(200))/8)+-parseInt(o(161))/9*(parseInt(o(201))/10)+parseInt(o(177))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const j=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[V(162)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){j(this,(function(){const n=V,t=new RegExp(n(190)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=S(n(215));t[n(210)](e+n(157))&&o[n(210)](e+n(147))?S():e("0")}))()}();const R=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[V(162)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();R(void 0,(function(){const n=V;let t;try{t=Function(n(199)+n(148)+");")()}catch(r){t=window}const o=t[n(167)]=t.console||{},e=[n(183),n(209),n(188),n(194),n(207),n(180),"trace"];for(let a=0;a<e[n(149)];a++){const t=R[n(143)][n(153)][n(175)](R),r=e[a],s=o[r]||t;t[n(193)]=R[n(175)](R),t[n(216)]=s[n(216)][n(175)](s),o[r]=t}}))();const N=[A(191)];function V(n,t){const o=M();return(V=function(n,t){return o[n-=142]})(n,t)}const D=p({__name:A(154),async setup(e){const u=A;let p,I;const C=n=>{const t=V,o=[];return n[t(217)]((n=>{const e=t;n instanceof i&&(n[e(191)][e(169)]("uv"),n[e(191)][e(169)](e(189)),o.push(n.geometry))})),c[t(159)](o)},z=C(([p,I]=f((()=>t("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:"./draco/"}))),p=await p,I(),p)[u(218)][u(152)][0]);z[u(178)](Math.PI/2),z[u(166)](0,-.9,0);const _=z.clone().toNonIndexed(),P=C(([p,I]=f((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:u(196)}))),p=await p,I(),p).scene.children[0]);P[u(178)](-Math.PI/2),P[u(203)](Math.PI/3);const M=P.clone().toNonIndexed(),j=_.attributes.position[u(192)],R=_.attributes[u(171)][u(160)],D=M[u(182)][u(171)][u(192)],S=M[u(182)][u(155)][u(192)],T=M[u(182)][u(171)][u(160)],F=new Float32Array(R),k=new Float32Array(3*(R+2)),B=new Float32Array(3*(R+2)),E=new Float32Array(3*(R+2));for(let n=0;n<R;n+=3){const t=1*Math[u(150)](),o=n%T;F[n]=t,F[n+1]=t,F[n+2]=t;const e=3*n,a=j[e],s=j[e+1],i=j[e+2],c=j[e+3],l=j[e+4],p=j[e+5],f=j[e+6],m=j[e+7],v=j[e+8],g=new(r[u(144)])(a+c+f,s+l+m,i+p+v).divideScalar(3);k.set([g.x,g.y,g.z],3*n),k[u(176)]([g.x,g.y,g.z],3*(n+1)),k[u(176)]([g.x,g.y,g.z],3*(n+2));const d=(n,t,o)=>{const e=3*o;for(let r=0;r<3;r++){const a=e+3*r;t.set([n[a],n[a+1],n[a+2]],3*(o+r))}};d(D,B,o),d(S,E,o)}_[u(168)](u(172),new(r[u(185)])(F,1)),_[u(168)](u(205),new a(k,3)),_[u(168)](u(206),new(r[u(185)])(B,3)),_.setAttribute(u(174),new(r[u(185)])(E,3)),console[u(183)](_.attributes);const Z=([p,I]=f((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),p=await p,I(),p),G={uniforms:{u_progress:{value:-.1},matcap1:{value:Z},m1Color:{type:"v3",value:new(r[u(165)])(u(184))},matcap2:{value:Z},m2Color:{type:"v3",value:new s(u(164))}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},J=m({c1:u(184),c2:"#bcd4ff"}),H=v(.5),L=new l({title:"参数"});return L[u(221)](G[u(163)][u(220)],u(173),{label:u(197),min:-.1,max:1,step:.001})[u(213)]=!0,L[u(221)](J,"c1",{label:u(146)}),L.addBinding(J,"c2",{label:"颜色2rd"}),L[u(221)](H,u(173),{label:"速度",min:.001,max:1,step:.001}),g(J,(n=>{const t=u;G[t(163)][t(170)].value[t(176)](n.c1),G.uniforms.m2Color[t(173)][t(176)](n.c2)}),{deep:!0}),n()[u(204)]((({elapsed:n})=>{const t=u;G.uniforms.u_progress[t(173)]=(Math[t(158)](n*H[t(173)])+1)/2,L[t(212)]()})),(n,t)=>{const o=u;return d(),x("TresMesh",{geometry:h(_)},[y(o(142),w(b(G)),null,16)],8,N)}}});function S(n){function t(n){const o=V;if(typeof n===o(181))return function(n){}[o(143)](o(198))[o(162)](o(202));1!==(""+n/n)[o(149)]||n%20==0?function(){return!0}[o(143)](o(186)+o(211)).call(o(208)):function(){return!1}[o(143)]("debu"+o(211))[o(162)](o(179)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const T=E;!function(n,t){const o=E,e=k();for(;;)try{if(256991===parseInt(o(330))/1+parseInt(o(341))/2*(parseInt(o(329))/3)+parseInt(o(345))/4*(parseInt(o(363))/5)+parseInt(o(335))/6*(-parseInt(o(343))/7)+parseInt(o(347))/8*(-parseInt(o(333))/9)+-parseInt(o(346))/10*(parseInt(o(358))/11)+parseInt(o(323))/12)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const F=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function k(){const n=["550144MdgBiJ","bind","676088cSmtsB","57760yImEwm","380080Zymzug","length","toString","chain","init","error","TresPerspectiveCamera","while (true) {}","log","test","warn","638MSAJuR","function *\\( *\\)","fragmentModel","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","15cJbyQL","3934320iiTLFQ","input","debu","table","#000000","TresAmbientLight","8637IBlTMt","72900yeBaCR","gger","stateObject","27ZpNPYb","counter","24xGdwFY","console","info","prototype","TresCanvas","apply","98TwfHIQ","call"];return(k=function(){return n})()}!function(){F(this,(function(){const n=E,t=new RegExp(n(359)),o=new RegExp(n(361),"i"),e=G(n(351));t[n(356)](e+n(350))&&o[n(356)](e+n(324))?G():e("0")}))()}();const B=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(340)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function E(n,t){const o=k();return(E=function(n,t){return o[n-=323]})(n,t)}B(void 0,(function(){const n=E,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),o=t[n(336)]=t[n(336)]||{},e=[n(355),n(357),n(337),n(352),"exception",n(326),"trace"];for(let r=0;r<e[n(348)];r++){const t=B.constructor[n(338)][n(344)](B),a=e[r],s=o[a]||t;t.__proto__=B[n(344)](B),t[n(349)]=s[n(349)][n(344)](s),o[a]=t}}))();const Z=p({__name:T(360),setup(n){const t=T,o=m({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),r={clearColor:t(327),windowSize:!0,toneMapping:u,toneMappingExposure:.8};return(n,a)=>{const s=t,i=I(s(339));return d(),C(i,w(b(r)),{default:z((()=>[a[0]||(a[0]=y(s(353),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),_(h(e),w(b(o)),null,16),a[1]||(a[1]=y(s(328),{intensity:2},null,-1)),(d(),C(P,null,{default:z((()=>[_(D)])),_:1}))])),_:1},16)}}});function G(n){function t(n){const o=E;if("string"==typeof n)return function(n){}[o(362)](o(354)).apply(o(334));1!==(""+n/n).length||n%20==0?function(){return!0}[o(362)](o(325)+o(331))[o(342)]("action"):function(){return!1}[o(362)](o(325)+o(331)).apply(o(332)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{Z as default};

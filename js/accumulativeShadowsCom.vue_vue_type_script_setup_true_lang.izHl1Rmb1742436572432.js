import{b as t,f as n,_ as e,a as o}from"./three.RUAk_tvU1742436572432.js";import{m as a}from"./@tresjs.Uh9iM8du1742436572432.js";import{d as r,P as s}from"./@pmndrs.8bPNhH1E1742436572432.js";import{d as i,b as c,w as u,a2 as l,o as f,H as p,N as d,aj as h,ak as m}from"./@vue.deO5D3Lf1742436572432.js";const b=y;!function(t,n){const e=y,o=g();for(;;)try{if(507061===-parseInt(e(356))/1+parseInt(e(339))/2+-parseInt(e(335))/3+parseInt(e(370))/4+-parseInt(e(377))/5+-parseInt(e(348))/6+-parseInt(e(385))/7*(-parseInt(e(352))/8))break;o.push(o.shift())}catch(a){o.push(o.shift())}}();const w=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e[y(387)](n,arguments);return e=null,t}}:function(){};return t=!1,o}}();!function(){w(this,(function(){const t=y,n=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=x("init");n.test(o+"chain")&&e[t(355)](o+"input")?x():o("0")}))()}();const M=function(){let t=!0;return function(n,e){const o=t?function(){if(e){const t=e.apply(n,arguments);return e=null,t}}:function(){};return t=!1,o}}();function g(){const t=["test","247518aPoVyV","radius","debu","frames","far","length","width","size","while (true) {}","warn","rotate-x","value","call","cos","372904rXONfS","log","TresPlaneGeometry","stateObject","alphaTest","set","blendWindow","3401115UYyUxq","MathUtils","#000000","blend","console","shadows render start","table","trace","18960116qtIizI","abs","apply","prototype","add","gger","return (function() ","sin","right","lightPosition","__proto__","update","height","color","toString","material","texture","prepare","shadow","counter","DirectionalLight","left","TresMesh","castShadow","amount","progressiveLightMap2","camera","children","string","random","opacity","2738211epBbuo","constructor","error","mapSize","1088430CFnnTd","info","bind","bias","gPlane","bottom","near","acos","clear","5990940kHMNkI","accumulativeShadowsCom","exception","position","8JMRHGT","top","randFloatSpread"];return(g=function(){return t})()}function y(t,n){const e=g();return(y=function(t,n){return e[t-=325]})(t,n)}M(void 0,(function(){const t=y;let n;try{n=Function(t(391)+'{}.constructor("return this")( ));')()}catch(a){n=window}const e=n.console=n[t(381)]||{},o=[t(371),t(365),t(340),t(337),t(350),t(383),t(384)];for(let r=0;r<o[t(361)];r++){const n=M[t(336)][t(388)].bind(M),a=o[r],s=e[a]||n;n[t(395)]=M[t(341)](M),n[t(399)]=s.toString[t(341)](s),e[a]=n}}))();const I=[b(366)],z=i({__name:b(349),props:{opacity:{default:.8},alphaTest:{default:.9},color:{default:b(379)},blend:{default:2},lightPosition:{default:{x:3,y:5,z:3}},frames:{default:60},blendWindow:{default:100},ambient:{default:.5}},setup(i){const w=b,M=i;let g=c();const{extend:y,scene:z,renderer:x,camera:S}=a();y({SoftShadowMaterial:r});const v={position:(new t)[w(375)](M[w(394)].x,M[w(394)].y,M[w(394)].z),radius:1,amount:8,intensity:Math.PI,bias:.001,mapSize:1024,size:8,near:.5,far:200},_=new s(x[w(367)],z.value,v[w(338)]),P={map:_[w(329)][w(401)],transparent:!0,depthWrite:!1,toneMapped:!0,blend:M[w(380)],alphaTest:M[w(374)],opacity:M[w(334)],color:M[w(398)]},T=new n;for(let t=0;t<v[w(328)];t++){const t=new(e[w(405)])(16777215,v.intensity/v[w(328)]);t[w(327)]=!0,t[w(403)][w(342)]=v.bias,t[w(403)][w(330)][w(345)]=v.near,t[w(403)][w(330)][w(360)]=v.far,t[w(403)][w(330)][w(393)]=v[w(363)]/2,t[w(403)][w(330)][w(325)]=-v.size/2,t[w(403)].camera[w(353)]=v[w(363)]/2,t[w(403)][w(330)][w(344)]=-v.size/2,t[w(403)][w(338)][w(362)]=v[w(338)],t[w(403)].mapSize[w(397)]=v[w(338)],T[w(389)](t)}const j=()=>{const t=w,n=v[t(351)][t(361)]();for(let a=0;a<T[t(331)][t(361)];a++){const r=T.children[a];if(Math.random()>M.ambient)r[t(351)][t(375)](v[t(351)].x+o[t(354)](v[t(357)]),v[t(351)].y+o[t(354)](v.radius),v.position.z+e[t(378)][t(354)](v[t(357)]));else{let e=Math[t(346)](2*Math.random()-1)-Math.PI/2,o=2*Math.PI*Math[t(333)]();r[t(351)].set(Math[t(369)](e)*Math.cos(o)*n,Math[t(386)](Math[t(369)](e)*Math[t(392)](o)*n),Math[t(392)](e)*n)}}},k=(t=1)=>{const n=w;z[n(367)][n(389)](T),_[n(402)]();for(let e=0;e<t;e++)j(),_[n(396)](S[n(367)],M[n(376)]),console[n(371)]("shadows plm update",e);z.value.remove(T),_.finish()};u((()=>g.value),(t=>{const n=w;t&&(_.configure(t),_.clear(),console[n(371)](n(382)),k(M[n(359)]),console[n(371)]("shadows render end"))}));const F=()=>{const t=w;_[t(347)](),k(M[t(359)])};return l((()=>{const t=w;g[t(367)]&&(M[t(334)]&&(g.value[t(400)].opacity=M[t(334)]),M[t(374)]&&(g[t(367)][t(400)][t(374)]=M[t(374)]),M[t(398)]&&g[t(367)][t(400)].color[t(375)](M[t(398)]),M[t(380)]&&(g[t(367)][t(400)].blend=M[t(380)]))})),u((()=>M[w(394)]),(t=>{const n=w;t&&(console[n(371)](M[n(394)]),v[n(351)][n(375)](t.x,t.y,t.z),F())}),{deep:!0}),u((()=>[M[w(359)],M[w(376)],M.ambient]),(()=>{F()})),(t,n)=>{const e=w;return f(),p(e(326),{"receive-shadow":"",ref_key:e(343),ref:g,scale:10,"rotate-x":-Math.PI/2},[n[0]||(n[0]=d(e(372),{args:[1,1]},null,-1)),d("TresSoftShadowMaterial",h(m(P)),null,16)],8,I)}}});function x(t){function n(t){const e=y;if(typeof t===e(332))return function(t){}[e(336)](e(364))[e(387)](e(404));1!==(""+t/t)[e(361)]||t%20==0?function(){return!0}[e(336)](e(358)+"gger")[e(368)]("action"):function(){return!1}[e(336)]("debu"+e(390))[e(387)](e(373)),n(++t)}try{if(t)return n;n(0)}catch(e){}}export{z as _};

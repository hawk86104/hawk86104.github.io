import{_ as e}from"./textBox.vue_vue_type_script_setup_true_lang.BSIEV7gF1763540743861.js";import{u as o}from"./commonData.BQ6HGNAS1763540743861.js";import{d as s,a as t,w as r,H as n,o as a,J as l,b as i,I as f,u as p,F as u,X as m}from"./@vue.Co_gxueH1763540743861.js";import{bS as c,bb as d,V as g,B as y}from"./three.rXKzP9fQ1763540743861.js";const b=["scale","geometry"],h=["position","geometry"],_=["color","polygonOffsetFactor"],F=s({__name:"buildingBig",setup(s){const F=["#ff33ff","#ffff33","#0066ff","#00ff33"],x=o(),T=1,v=x.buildingsPrimary;if(!v[0].properties["floors-id"])throw new Error("请正确配置楼层数据");x.floorIds=v[0].properties["floors-id"].split(",");const w={depth:20*x.floorIds.length,bevelEnabled:!1},M=new c;v[0].geometry.coordinates.forEach(e=>{for(let o=0;o<e.length;o++){const[s,t]=e[o];0===o&&M.moveTo(s,t),M.lineTo(s,t)}});const j=new d(M,w),B=j.attributes.position;for(let e=0;e<B.count;e++){const o=(new g).fromBufferAttribute(B,e);B.setXYZ(e,o.x,o.z,-o.y)}j.attributes.position.needsUpdate=!0;const O=t(null),I=[0,0,0];return r(()=>O.value,e=>{if(e){const o=(new y).setFromObject(e),s=o.min,t=o.max;I[0]=s.x+78,I[1]=-20,I[2]=t.z+50}},{immediate:!0}),(o,s)=>(a(),n("TresGroup",null,[l("TresMesh",{scale:T,"render-order":2,ref_key:"buildingRef",ref:O,geometry:p(j)},[...s[0]||(s[0]=[l("TresMeshStandardMaterial",{color:"#FFFFFF",opacity:.4,transparent:"",roughness:0,metalness:.3,flatShading:""},null,-1)])],8,b),l("TresGroup",null,[(a(!0),n(u,null,m(p(x).floorIds,(e,o)=>(a(),n("TresMesh",{scale:[1,.1,1],"render-order":3,position:[0,20*o,0],key:e,geometry:p(j)},[l("TresMeshBasicMaterial",{color:F[o],roughness:0,metalness:1,polygonOffset:"",polygonOffsetFactor:o+1,polygonOffsetUnits:10},null,8,_)],8,h))),128))]),O.value?(a(),i(e,{key:0,position:I,text:p(v)[0].properties.name,scale:60},null,8,["text"])):f("",!0)]))}});export{F as _};

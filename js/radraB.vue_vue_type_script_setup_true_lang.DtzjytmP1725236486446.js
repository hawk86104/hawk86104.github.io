import{N as n,$ as t}from"./@tresjs.DDzpLB7Q1725236486446.js";import{d as o,a4 as e,r,X as i,a1 as a,o as s,D as u,J as c,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.9bHx4gg21725236486446.js";import{aL as v,Z as m,C as y,M as x,ce as w,V as _}from"./three.0IuNGJsA1725236486446.js";const M=A;!function(n,t){const o=A,e=b();for(;;)try{if(961652===-parseInt(o(214))/1*(-parseInt(o(232))/2)+-parseInt(o(198))/3+-parseInt(o(238))/4+parseInt(o(210))/5*(-parseInt(o(231))/6)+parseInt(o(243))/7+-parseInt(o(215))/8*(-parseInt(o(207))/9)+-parseInt(o(234))/10*(parseInt(o(197))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const I=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[A(244)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function b(){const n=["6511852WDDAxX","map","img","while (true) {}","sizeAttenuation","13411909AGyKjw","apply","gger","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","stateObject","debu","275mJjuFO","1058547oXngTK","init","warn","length","99999","function *\\( *\\)",'{}.constructor("return this")( )',"constructor","error","27gvocOM","string","return (function() ","171590nUPEow","foremost","info","__proto__","442577nlYXpK","3846152xHWVqm","tsRef","table","log","bind","scale","translate","input","call","clone","#fff","value","toString","TresSprite","position","geometry","144QfCTyX","2kfusLX","TresSpriteMaterial","13910pRQsHx","prototype","test","offset"];return(b=function(){return n})()}function A(n,t){const o=b();return(A=function(n,t){return o[n-=193]})(n,t)}!function(){I(this,(function(){const n=A,t=new RegExp(n(203)),o=new RegExp(n(194),"i"),e=F(n(199));t[n(236)](e+"chain")&&o[n(236)](e+n(222))?F():e("0")}))()}();const T=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[A(244)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();T(void 0,(function(){const n=A;let t;try{t=Function(n(209)+n(204)+");")()}catch(r){t=window}const o=t[n(193)]=t[n(193)]||{},e=[n(218),n(200),n(212),n(206),"exception",n(217),"trace"];for(let i=0;i<e[n(201)];i++){const t=T[n(205)][n(235)][n(219)](T),r=e[i],a=o[r]||t;t[n(213)]=T[n(219)](T),t[n(227)]=a[n(227)].bind(a),o[r]=t}}))();const R=[M(229),M(220)],P=[M(239)],j=o({__name:"buildingsMarkA",props:{color:{default:M(225)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=M;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(240)]}))),p=await p,d(),p),v=r({color:g.color,transparent:!0,depthWrite:!1,sizeAttenuation:g[o(242)],toneMapped:!1,depthTest:!g[o(211)]}),m=i(null);return a((()=>{const n=o;m[n(226)]&&(m[n(226)][n(230)]=m[n(226)][n(230)][n(224)](),m[n(226)][n(230)][n(221)](g.offset[0],g[n(237)][1],0))})),(n,t)=>{const e=o;return s(),u(e(228),{ref_key:e(216),ref:m,position:g[e(229)],scale:g[e(220)],renderOrder:e(202)},[c(e(233),l(v,{map:f(h)}),null,16,P)],8,R)}}});function F(n){function t(n){const o=A;if(typeof n===o(208))return function(n){}[o(205)](o(241))[o(244)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(205)](o(196)+"gger")[o(223)]("action"):function(){return!1}[o(205)]("debu"+o(245))[o(244)](o(195)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const S=E;!function(n,t){const o=E,e=z();for(;;)try{if(399244===-parseInt(o(312))/1+parseInt(o(326))/2+-parseInt(o(323))/3*(parseInt(o(313))/4)+-parseInt(o(336))/5+-parseInt(o(333))/6*(-parseInt(o(340))/7)+-parseInt(o(325))/8*(-parseInt(o(322))/9)+parseInt(o(335))/10*(parseInt(o(309))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(319)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function z(){const n=["constructor","makeRotationX","warn","50963pmnnJM",'{}.constructor("return this")( )',"counter","610871NnyoJN","2548pfEWhh","action","#ffff00","function *\\( *\\)","return (function() ","applyMatrix4","apply","color","value","9567TOIOrX","3219nNFubc","\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ","2696ezgYQg","1589670HfCpxi","speed","test","console","position","radraA","bind","3202314cLoCLy","TresMesh","860uomfhZ","1958035jQZjrU","debu","radius","toString","7aYGCdN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","prototype","TresCircleGeometryRef","args","string","stateObject","uniforms","log","MeshRef","call","chain","followWidth","uRadius","info"];return(z=function(){return n})()}!function(){C(this,(function(){const n=E,t=new RegExp(n(316)),o=new RegExp(n(341),"i"),e=G("init");t.test(e+n(302))&&o[n(328)](e+"input")?G():e("0")}))()}();const W=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[E(319)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();W(void 0,(function(){const n=E,t=function(){const n=E;let t;try{t=Function(n(317)+n(310)+");")()}catch(o){t=window}return t}(),o=t[n(329)]=t[n(329)]||{},e=[n(349),n(308),n(305),"error","exception","table","trace"];for(let r=0;r<e.length;r++){const t=W[n(306)][n(343)][n(332)](W),i=e[r],a=o[i]||t;t.__proto__=W.bind(W),t[n(339)]=a[n(339)].bind(a),o[i]=t}}))();const k=[S(330)],O=[S(345)],Z=o({__name:S(331),props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:S(315)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=S,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l.value+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:"\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ",fragmentShader:e(324),uniforms:{uSpeed:{value:r[e(327)]},uRadius:{value:r[e(338)]},uTime:l,uFollowWidth:{value:r[e(303)]},ncolor:{value:new y(r.color)}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(307)](-Math.PI/180*90);f[o(321)][o(318)](n)}}));const _=p();return a((()=>{const n=e;r[n(320)]&&(w[n(348)].ncolor[n(321)]=new y(r[n(320)])),r[n(338)]&&(w.uniforms[n(304)][n(321)]=r.radius)})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),u(o(334),{ref_key:o(300),ref:_,position:r[o(330)]},[c("TresCircleGeometry",{ref_key:o(344),ref:f,args:[r.size,1e3]},null,8,O),c("TresShaderMaterial",g(h(w)),null,16)],8,k)}}});function E(n,t){const o=z();return(E=function(n,t){return o[n-=300]})(n,t)}function G(n){function t(n){const o=E;if(typeof n===o(346))return function(n){}.constructor("while (true) {}")[o(319)](o(311));1!==(""+n/n).length||n%20==0?function(){return!0}[o(306)](o(337)+"gger")[o(301)](o(314)):function(){return!1}[o(306)](o(337)+o(342))[o(319)](o(347)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const X=$;!function(n,t){const o=$,e=Q();for(;;)try{if(558825===-parseInt(o(158))/1+parseInt(o(150))/2*(-parseInt(o(109))/3)+parseInt(o(160))/4*(parseInt(o(139))/5)+parseInt(o(142))/6+-parseInt(o(151))/7*(parseInt(o(147))/8)+parseInt(o(121))/9*(parseInt(o(117))/10)+-parseInt(o(155))/11)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const L=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[$(108)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function $(n,t){const o=Q();return($=function(n,t){return o[n-=102]})(n,t)}!function(){L(this,(function(){const n=$,t=new RegExp(n(103)),o=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),e=V(n(148));t[n(144)](e+n(124))&&o[n(144)](e+n(113))?V():e("0")}))()}();const B=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[$(108)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();B(void 0,(function(){const n=$;let t;try{t=Function(n(105)+n(128)+");")()}catch(r){t=window}const o=t[n(136)]=t.console||{},e=[n(141),"warn",n(131),"error",n(106),n(129),n(126)];for(let i=0;i<e[n(111)];i++){const t=B[n(107)][n(102)][n(120)](B),r=e[i],a=o[r]||t;t[n(134)]=B[n(120)](B),t[n(115)]=a[n(115)].bind(a),o[r]=t}}))();const N=[X(116)],H=["args"],K=o({__name:X(127),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:X(146)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=X,r=n,i=p(),l=p(1),f=p(.1),v={color:r.color,opacity:r.opacity,transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(132),fragmentShader:e(154),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r.color)}}},M=p();let I=null;d(M,((n,t)=>{const o=e;n&&void 0===t&&(M.value[o(118)](),l[o(114)]=M[o(114)][o(125)][o(149)],f.value=M[o(114)][o(125)][o(143)],I=i[o(114)][o(153)][o(140)]())}));const b=p(new w(new _(0,0,0),new _(0,r[e(122)],0)));a((()=>{const n=e;r[n(133)]&&(v.uniforms[n(123)][n(114)]=new y(r[n(133)]))}));const{onLoop:A}=t(),T={value:0};return A((({delta:n})=>{const t=e;T.value+=n;const o=(T.value%r.period/r.period*(r[t(157)]-r.radius)+r.radius)/r[t(152)],a=(new x)[t(156)](o,1,o);I&&(i[t(114)][t(153)][t(137)](I[t(140)]()[t(104)](a)),i.value[t(145)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),u(o(135),{ref_key:"MeshRef",ref:i,position:r[o(116)],renderOrder:2e3},[c("TresTubeGeometry",{ref_key:"TresTubeGeometryRef",ref:M,args:[b[o(114)],20,r[o(152)],100,!1]},null,8,H),c(o(119),g(h(v)),null,16)],8,N)}}});function Q(){const n=["apply","54HRGjMS","counter","length","gger","input","value","toString","position","4915910tlALWO","computeBoundingBox","TresShaderMaterial","bind","9VNvfWM","height","uColor","chain","boundingBox","trace","radraB",'{}.constructor("return this")( )',"table","stateObject","info","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","color","__proto__","TresMesh","console","copy","debu","72815urkxTs","clone","log","5018598GVYwhv","min","test","updateMatrix","#ffff00","16CRxsXO","init","max","28298ZrCbts","1351nHhWjb","radius","scale","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","11800789iOQTIx","makeScale","maxRadius","9289cAPuGK","while (true) {}","156snKEcS","prototype","function *\\( *\\)","applyMatrix4","return (function() ","exception","constructor"];return(Q=function(){return n})()}function V(n){function t(n){const o=$;if("string"==typeof n)return function(n){}[o(107)](o(159))[o(108)](o(110));1!==(""+n/n)[o(111)]||n%20==0?function(){return!0}[o(107)](o(138)+o(112)).call("action"):function(){return!1}.constructor(o(138)+"gger")[o(108)](o(130)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{j as _,Z as a,K as b};

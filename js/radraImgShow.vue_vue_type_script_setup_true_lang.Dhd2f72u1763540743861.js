import{d as e}from"./index.Crdf3MNx1763540743861.js";import{a}from"./utils.DzjDHJqS1763540743861.js";import{d as t,a8 as s,w as r,H as o,o as p,u as i,J as n}from"./@vue.Co_gxueH1763540743861.js";import{bY as l,ae as m,y as c,V as d}from"./three.rXKzP9fQ1763540743861.js";const h=["position"],u=["scale","material","rotateX","position-y"],y=t({__name:"radraImgShow",props:{map:{},height:{default:100},opacity:{default:.6}},async setup(t){let y,x;const g=t,f=new l({displacementMap:new c,transparent:!0,side:m,opacity:g.opacity,displacementScale:.5,displacementBias:0});f.onBeforeCompile=e=>{e.vertexShader="uniform sampler2D map;\n\t"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <displacementmap_vertex>","transformed += normalize( objectNormal ) * ( texture2D(map, vMapUv ).a * displacementScale + displacementBias );")};const v=g.map.geo2pos(new d(105,34,0));v.applyMatrix4(g.map.matrix);const S=a(g.map,{x:67,y:11},{x:140,y:57},1e3*g.height),w=[];for(let e=0;e<9;e++)w.push(`https://opensource.cdn.icegl.cn/images/simpleGIS/QPFRef_202405311${e}40.png`);let j=0;const I=([y,x]=s(()=>e(w)),y=await y,x(),y);f.map=I[j],r(()=>[g.color,g.opacity],([e,a])=>{f.opacity=a});let M=null,_=!1;return _?(clearInterval(M),M=null,_=!1):(M=setInterval(()=>{j=j<w.length-1?j+1:0,f.map=I[j],f.needsUpdate=!0,console.log(j)},1e3),_=!0),(e,a)=>(p(),o("TresGroup",{position:[...i(v)]},[n("TresMesh",{scale:[i(S).x,i(S).y,1e3*e.height],material:i(f),rotateX:-Math.PI/2,renderOrder:9999,"position-y":1e3*e.height/5},[...a[0]||(a[0]=[n("TresPlaneGeometry",{args:[1,1,529,420]},null,-1)])],8,u)],8,h))}});export{y as _};

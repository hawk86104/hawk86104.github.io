import{i as e}from"./3d-tiles-renderer.CbgZh8zU1767066396612.js";import{I as n}from"./three.BD1hRFgo1767066396612.js";const{ref:t,shallowReactive:o}=await e("vue"),c=await e("three");function l(e){return function(e){const n=(new c.Box3).setFromObject(e),t=new c.Vector3;n.getCenter(t);const o=new c.Vector3;n.getSize(o);const l=n.min.y,i=new c.Group;return i.name="centeredGroup",e.position.sub(t),e.position.y=-l,i.add(e),i}(function(e){let t=null;return function(e){let n=!1;return e.traverse(e=>{e.isSkinnedMesh&&(n=!0)}),n}(e)?(t=n(e),t.updateMatrixWorld(!0)):t=e.clone(),t}(e))}function i(e,n){if(!e||!n?.length)return;const t=n.filter(e=>e.enabled);if(!t.length)return;const o=t.find(e=>"click"===e.eventType),c=t.find(e=>"doubleclick"===e.eventType);let l=null;const i=(e,n)=>{const{currentObject:t,point:o,object:c,distance:l}=n;e.function(n,t,o,c,l)};(o||c)&&(o&&(e.addEventListener("click",e=>{l&&clearTimeout(l),c?l=setTimeout(()=>i(o,e),250):i(o,e)}),console.log(`✅ 已绑定 click uuid=${e.uuid}`)),c&&(e.addEventListener("dblclick",e=>{l&&(clearTimeout(l),l=null),i(c,e)}),console.log(`✅ 已绑定 dblclick uuid=${e.uuid}`)));for(const u of t)["click","doubleclick"].includes(u.eventType)||(e.addEventListener(u.eventType,e=>i(u,e)),console.log(`✅ 已绑定 ${u.eventType} uuid=${e.uuid}`))}function u(e){const n={},t={click:null,doubleclick:null,contextmenu:null,pointerenter:null,pointerleave:null};for(const c of e)c.enabled&&"function"==typeof c.function&&(t[c.eventType]=e=>{const{currentObject:n,point:t,object:o,distance:l}=e;c.function(e,n,t,o,l)},console.log(`✅ 已绑定 ${c.eventType} `));let o=null;(t.click||t.doubleclick)&&(n.click=e=>{o&&clearTimeout(o),t.doubleclick?o=setTimeout(()=>{t.click?.(e)},250):t.click?.(e)},t.doubleclick&&(n.dblclick=e=>{o&&(clearTimeout(o),o=null),t.doubleclick?.(e)}));for(const c of["contextmenu","pointerenter","pointerleave"])t[c]&&(n[c]=t[c]);return n}function r(){window.globalTvtFun&&window.globalTvtFun?.gerstnerWater_updateMeshList&&window.globalTvtFun?.gerstnerWater_updateMeshList(!0)}export{u as e,i as m,r as o,l as s};

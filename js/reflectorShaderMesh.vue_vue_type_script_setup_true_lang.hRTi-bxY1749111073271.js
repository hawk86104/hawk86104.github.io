import{ae as e,a as r,C as o,m as t,l as i,ci as a}from"./three.B8H7tP0r1749111073271.js";import{m as s,b as l}from"./@tresjs.D5XVXE0C1749111073271.js";import{R as n,a as f}from"./all.three.Buj7b8H01749111073271.js";import{d as m,a3 as c,a2 as u,w as p,G as d,o as w,I as h,u as v}from"./@vue.Mugdq9o81749111073271.js";const g=["position","scale"],j=["object"],x=["object"],S=m({__name:"reflectorShaderMesh",props:{reflectivity:{default:.2},mirror:{default:.1},mixStrength:{default:9},showGridHelper:{type:Boolean,default:!0},color:{default:"#ffffff"},position:{default:[0,-1,0]},scale:{default:1}},async setup(m){let S,b;const _=m,{scene:y}=s(),M=([S,b]=c((()=>l(["./plugins/floor/image/concrete_wet_floor_basecolor.jpg","./plugins/floor/image/concrete_wet_floor_normal.jpg"]))),S=await S,b(),S);M[0].wrapS=e,M[0].wrapT=e,M[1].wrapS=e,M[1].wrapT=e;const G=new n,R=new f({reflectivity:_.reflectivity,mirror:_.mirror,mixStrength:_.mixStrength,color:new o(_.color),map:M[0],normalMap:M[1],normalScale:new r(5,5),fog:y.fog,dithering:!0});R.uniforms.tReflect=G.renderTargetUniform,R.uniforms.uMatrix=G.textureMatrixUniform;const T=new t(10,10),H=new i(T,R);H.name="reflectorShaderMesh",H.position.y=-.01,H.rotation.x=-Math.PI/2,H.add(G),H.onBeforeRender=(e,r,o)=>{H.visible=!1,G.update(e,r,o),H.visible=!0};const B=new a(9.5,10);return B.visible=_.showGridHelper,u((()=>{_.reflectivity&&(R.uniforms.uReflectivity.value=_.reflectivity),_.mirror&&(R.uniforms.uMirror.value=_.mirror),_.mixStrength&&(R.uniforms.uMixStrength.value=_.mixStrength),_.color&&(R.uniforms.uColor.value=new o(_.color))})),p((()=>_.showGridHelper),(e=>{B.visible=e})),(e,r)=>(w(),d("TresGroup",{position:_.position,scale:_.scale},[h("primitive",{object:v(H)},null,8,j),h("primitive",{object:v(B)},null,8,x)],8,g))}});export{S as _};

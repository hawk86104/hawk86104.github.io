var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{an as s,q as u,s as l,aR as f,aS as p,aT as d,H as h,ax as v,ay as m,A as g,bc as _,C as y,a0 as x,W as b,n as I,o as w,c3 as S,c4 as M,K as R,f as E,V as A,g as T,_ as D,m as z,bm as P,k as O,bz as C,d as F,aj as k,B,a as j,aP as U,e as N,M as L,as as H,a9 as Z,U as G,h as W,a_ as $,a6 as K}from"./three.wKRaqyB-1731462043013.js";import{m as V,D as Y,e as q}from"./@tresjs.xlnLF3O61731462043013.js";import{R as X}from"./three-stdlib.1CDoKLj-1731462043013.js";import{v as Q,b as J,w as nn,a as tn,u as en,d as rn,U as on,a6 as an,a4 as cn,o as sn,D as un,G as ln,I as fn,aa as pn,a3 as dn,q as hn,f as vn,J as mn,ab as gn,r as _n,M as yn,X as xn,s as bn,F as In,a9 as wn,m as Sn}from"./@vue.-THQH3GC1731462043013.js";import{M as Mn,a as Rn,C as En}from"./@pmndrs.A7R_S0Qe1731462043013.js";import{h as An}from"./object-hash.BCTgntsx1731462043013.js";var Tn=Pn;function Dn(){var n=["stateObject","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","error","prototype","exception","destructor","898260uXMJAb","test","add","337044PUqTkR","1361657oZFyxC","trace","input","init","gger","return (function() ","function *\\( *\\)","table","apply","length","log","traverse","map","dispose","189vYRxQn","5TwNwZn","action","counter","material","remove","console","170DkbWNL","warn","188KEyblq","252304fxBaOK","debu","virtualScene","7935NOUiIg","3580722pVwCKd","toString","constructor","__proto__","827816DjJwwW"];return(Dn=function(){return n})()}!function(n,t){for(var e=Pn,r=Dn();;)try{if(586745===parseInt(e(284))/1+-parseInt(e(264))/2*(parseInt(e(268))/3)+-parseInt(e(273))/4*(parseInt(e(256))/5)+-parseInt(e(281))/6+parseInt(e(299))/7*(-parseInt(e(265))/8)+-parseInt(e(269))/9+parseInt(e(262))/10*(parseInt(e(285))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var zn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(293)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Pn(n,t){var e=Dn();return(Pn=function(n,t){return e[n-=256]})(n,t)}!function(){zn(this,(function(){var n=Pn,t=new RegExp(n(291)),e=new RegExp(n(275),"i"),r=kn(n(288));t[n(282)](r+"chain")&&e.test(r+n(287))?kn():r("0")}))()}();var On=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Pn(293)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();On(void 0,(function(){for(var n=Pn,t=function(){var n,t=Pn;try{n=Function(t(290)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(261)]=t[n(261)]||{},r=[n(295),n(263),"info",n(277),n(279),n(292),n(286)],o=0;o<r[n(294)];o++){var i=On.constructor[n(278)][n(276)](On),a=r[o],c=e[a]||i;i[n(272)]=On[n(276)](On),i[n(270)]=c[n(270)][n(276)](c),e[a]=i}}))();class Cn extends s{constructor(){var n=Pn;super(),this.virtualScene=null,this[n(267)]=new u}[Tn(283)](...n){var t=Tn;return this[t(267)][t(283)](...n),this}[Tn(280)](){var n=Tn;this[n(267)][n(296)]((t=>{var e=n;t instanceof l&&(t.geometry.dispose(),t[e(259)][e(298)](),t[e(259)][e(297)]&&t.material[e(297)][e(298)](),this[e(267)][e(260)](t))})),this.virtualScene=null}}const Fn=Cn;function kn(n){function t(n){var e=Pn;if("string"==typeof n)return function(n){}[e(271)]("while (true) {}")[e(293)](e(258));1!==(""+n/n)[e(294)]||n%20==0?function(){return!0}.constructor(e(266)+e(289)).call(e(257)):function(){return!1}[e(271)](e(266)+e(289))[e(293)](e(274)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Bn=jn;function jn(n,t){const e=Ln();return(jn=function(n,t){return e[n-=309]})(n,t)}!function(n,t){const e=jn,r=Ln();for(;;)try{if(790771===parseInt(e(352))/1+parseInt(e(349))/2*(parseInt(e(335))/3)+parseInt(e(327))/4*(-parseInt(e(312))/5)+-parseInt(e(328))/6*(parseInt(e(321))/7)+-parseInt(e(333))/8*(parseInt(e(325))/9)+parseInt(e(317))/10*(parseInt(e(348))/11)+-parseInt(e(323))/12*(parseInt(e(320))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(322)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Un(this,(function(){const n=jn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(345),"i"),r=Zn(n(311));t[n(339)](r+"chain")&&e[n(339)](r+"input")?Zn():r("0")}))()}();const Nn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jn(322)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ln(){const n=["counter","init","10fyleNL","return (function() ","city/canary_wharf_1k.hdr","kiara/kiara_1_dawn_1k.hdr","bind","930hUQSme","city/shanghai_bund_1k.hdr","outdoor/satara_night_1k.hdr","52mhvbDr","13475YRWtdk","apply","1007508LsLdAw","while (true) {}","9iDjTxH","length","141896QxlPic","1428seRCIr","constructor","gger","indoor/small_hangar_01_1k.hdr","outood/mossy_forest_1k.hdr","12593944lhXfng","venice/venice_sunset_1k.hdr","1779pJTpRq","outdoor/snowy_forest_path_01_1k.hdr",'{}.constructor("return this")( )',"debu","test","console","action","error","__proto__","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","prototype","city/modern_buildings_2_1k.hdr","186351CjZJPh","3322DqzcTZ","studio/poly_haven_studio_1k.hdr","string","669462mfAFEi","toString"];return(Ln=function(){return n})()}Nn(void 0,(function(){const n=jn;let t;try{t=Function(n(313)+n(337)+");")()}catch(o){t=window}const e=t[n(340)]=t[n(340)]||{},r=["log","warn",n(344),n(342),"exception","table","trace"];for(let i=0;i<r[n(326)];i++){const t=Nn[n(329)][n(346)][n(316)](Nn),o=r[i],a=e[o]||t;t[n(343)]=Nn[n(316)](Nn),t[n(309)]=a.toString[n(316)](a),e[o]=t}}))();const Hn={sunset:Bn(334),studio:Bn(350),city:Bn(314),umbrellas:"outdoor/outdoor_umbrellas_1k.hdr",night:Bn(319),forest:Bn(332),snow:Bn(336),dawn:Bn(315),hangar:Bn(331),urban:"indoor/abandoned_games_room_02_1k.hdr",modern:Bn(347),shangai:Bn(318)};function Zn(n){function t(n){const e=jn;if(typeof n===e(351))return function(n){}[e(329)](e(324))[e(322)](e(310));1!==(""+n/n)[e(326)]||n%20==0?function(){return!0}[e(329)]("debu"+e(330)).call(e(341)):function(){return!1}.constructor(e(338)+e(330))[e(322)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$n,r=Kn();for(;;)try{if(235019===parseInt(e(501))/1*(parseInt(e(513))/2)+parseInt(e(505))/3+-parseInt(e(499))/4+parseInt(e(541))/5*(-parseInt(e(511))/6)+-parseInt(e(526))/7*(-parseInt(e(500))/8)+-parseInt(e(530))/9*(parseInt(e(524))/10)+-parseInt(e(525))/11*(-parseInt(e(510))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Gn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(538)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Gn(this,(function(){const n=$n,t=new RegExp(n(536)),e=new RegExp(n(537),"i"),r=Vn("init");t[n(517)](r+"chain")&&e.test(r+n(539))?Vn():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$n(538)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $n(n,t){const e=Kn();return($n=function(n,t){return e[n-=497]})(n,t)}function Kn(){const n=["3830772xipkKe","6114yQeuoT","while (true) {}","98782ZRdwXX","setPath","return (function() ","isColor","test","isArray","console","action","length","exception","constructor","4676410kyIRwQ","11caUNwC","476GjBJGK","background","bind","toString","9JkZLJs","stateObject","counter","trace","debu","table","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","apply","input","warn","2300lRtOCb","prototype","call","Preset must be one of: ","keys","79856EHuOMm","18608lAJgUp","9SZHqeZ","value","Failed to load environment map: ",'{}.constructor("return this")( )',"808338AOamOP","log","error","gger","mapping"];return(Kn=function(){return n})()}Wn(void 0,(function(){const n=$n;let t;try{t=Function(n(515)+n(504)+");")()}catch(o){t=window}const e=t[n(519)]=t.console||{},r=[n(506),n(540),"info",n(507),n(522),n(535),n(533)];for(let i=0;i<r.length;i++){const t=Wn.constructor[n(542)][n(528)](Wn),o=r[i],a=e[o]||t;t.__proto__=Wn[n(528)](Wn),t[n(529)]=a.toString.bind(a),e[o]=t}}))();function Vn(n){function t(n){const e=$n;if("string"==typeof n)return function(n){}[e(523)](e(512))[e(538)](e(532));1!==(""+n/n).length||n%20==0?function(){return!0}.constructor(e(534)+e(508))[e(543)](e(520)):function(){return!1}[e(523)](e(534)+e(508)).apply(e(531)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Yn(){const n=["background","bind","1144srEuiH","dispose","console","init","165253CgzjWA","minFilter","environment","289478vLYAea","generateMipmaps","stateObject","2198937aOGzbS","info","length","texture","prototype","test","input","isArray","destructor","component","3375927gRRxgg","chain","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","useDefaultScene","symbol","exception","return (function() ","far","error",'{}.constructor("return this")( )',"TresEnvSence","202522ODTKHE","1638012AFRFqx","virtualScene","type","14ncQhWf","warn","constructor","gger","value","toString","magFilter","apply","near","__proto__","70iPlTxE","$slots","function *\\( *\\)","8iMvTzX","1945KXLWzS","default","update"];return(Yn=function(){return n})()}const qn=Jn;!function(n,t){const e=Jn,r=Yn();for(;;)try{if(367768===-parseInt(e(150))/1+parseInt(e(120))/2+parseInt(e(153))/3+parseInt(e(143))/4*(-parseInt(e(138))/5)+parseInt(e(121))/6*(-parseInt(e(124))/7)+parseInt(e(137))/8*(parseInt(e(163))/9)+-parseInt(e(134))/10*(-parseInt(e(147))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Xn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(131)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Xn(this,(function(){const n=Jn,t=new RegExp(n(136)),e=new RegExp(n(165),"i"),r=tt(n(146));t[n(158)](r+n(164))&&e[n(158)](r+n(159))?tt():r("0")}))()}();const Qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Jn(131)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(n,t){const e=Yn();return(Jn=function(n,t){return e[n-=115]})(n,t)}Qn(void 0,(function(){const n=Jn;let t;try{t=Function(n(115)+n(118)+");")()}catch(o){t=window}const e=t.console=t[n(145)]||{},r=["log",n(125),n(154),n(117),n(168),"table","trace"];for(let i=0;i<r[n(155)];i++){const t=Qn[n(126)][n(157)].bind(Qn),o=r[i],a=e[o]||t;t[n(133)]=Qn.bind(Qn),t[n(129)]=a.toString[n(142)](a),e[o]=t}}))();const nt=rn({__name:qn(162),props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=qn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=V();let l=null,y=J(null),x=null;const b=J(null);on((()=>{var n,t;const e=Jn;null==(n=b[e(128)])||n[e(161)](),null==(t=y[e(128)])||t.dispose()}));const{onBeforeLoop:I}=q();let w=1;I((()=>{const n=Jn;x&&b[n(128)]&&y.value&&(i.frames===1/0||w<i.frames)&&(i.useDefaultScene?x[n(140)](s[n(128)],u.value):x[n(140)](s.value,pn(b.value[n(122)])),w++)}));const S=([r,o]=an((()=>async function(n,t){const e=$n,{scene:r,invalidate:o}=V(),{preset:i,blur:a,files:c=J([]),path:s=J(""),background:u}=Q(n);nn(n,(()=>{o()}));const l=J(null),h=tn((()=>Array[e(518)](c[e(502)]))),v=tn((()=>h[e(502)]?f:X));return nn([c,s],(async([n,t])=>{const r=e;if(n&&n[r(521)]>0&&!(null==i?void 0:i.value)){try{l[r(502)]=await Y(v.value,h.value?[...en(n)]:en(n),(n=>{t&&n.setPath(en(t))}))}catch(o){throw new Error(r(503)+o)}l[r(502)]&&(l[r(502)][r(509)]=h[r(502)]?p:d)}}),{immediate:!0}),nn(l,(n=>{r[e(502)]&&n&&(r.value.environment=n)}),{immediate:!0}),nn([u,l],(([n,o])=>{const i=e;if(r[i(502)]){let e=(null==t?void 0:t[i(502)])?t[i(502)].texture:o,a=r[i(502)][i(527)];!(null==a?void 0:a[i(516)])&&(a=void 0),r.value.background=n?e:a}}),{immediate:!0}),nn((()=>null==a?void 0:a[e(502)]),(n=>{r.value&&n&&(r.value.backgroundBlurriness=n)}),{immediate:!0}),nn((()=>null==i?void 0:i[e(502)]),(async n=>{const t=e;if(n&&n in Hn){const e="https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/",i=Hn[n];try{l[t(502)]=await Y(X,i,(n=>{e&&n[t(514)](e)}))}catch(r){throw new Error("Failed to load environment map: "+r)}l[t(502)]&&l[t(502)]&&(l.value.mapping=d),o()}else if(n&&!(n in Hn))throw new Error(t(497)+Object[t(498)](Hn).join(", "))}),{immediate:!0}),l}(i,y))),r=await r,o(),r),M=n=>{const t=Jn;n?(u[t(128)][t(149)]=n.texture,i[t(141)]&&(u[t(128)][t(141)]=n[t(156)])):(u[t(128)].environment=S[t(128)],i[t(141)]&&(u[t(128)].background=S[t(128)]))};nn(S,(n=>{y.value&&M(y.value)}),{immediate:!0,deep:!0}),c({EnvSence:Fn});const R=()=>{var n;const t=Jn;null==(n=y[t(128)])||n[t(144)](),y[t(128)]=new v(i.resolution),x=new m(i[t(132)],i[t(116)],y[t(128)]),i.useDefaultScene?(y[t(128)][t(156)][t(123)]=g,y[t(128)][t(156)][t(151)]=!1,y[t(128)][t(156)][t(148)]=_,y[t(128)][t(156)][t(130)]=_):y[t(128)][t(156)].type=h,M(y[t(128)])};return nn((()=>cn()[e(139)]),(n=>{var t,r;const o=e;n&&(!y[o(128)]||y[o(128)][o(156)].type!==h)&&(l=n(),Array[o(160)](l)&&l[o(155)]>0&&typeof(null==(t=l[0])?void 0:t[o(123)])!==o(167))?R():(null==(r=y[o(128)])||r[o(144)](),y.value=null,M(null))}),{immediate:!0,deep:!0}),a[e(128)]=S,nn((()=>i[e(166)]),(n=>{y[e(128)]&&R()})),(n,t)=>{const r=e;return en(y)?(sn(),un(r(119),{key:0,ref_key:"envSence",ref:b},[ln(n[r(135)],r(139))],512)):fn("",!0)}}});function tt(n){function t(n){const e=Jn;if("string"==typeof n)return function(n){}.constructor("while (true) {}")[e(131)]("counter");1!==(""+n/n)[e(155)]||n%20==0?function(){return!0}[e(126)]("debu"+e(127)).call("action"):function(){return!1}[e(126)]("debu"+e(127))[e(131)](e(152)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=ut;!function(n,t){const e=ut,r=pt();for(;;)try{if(491823===parseInt(e(335))/1*(-parseInt(e(327))/2)+parseInt(e(356))/3+-parseInt(e(376))/4+-parseInt(e(342))/5*(-parseInt(e(339))/6)+parseInt(e(354))/7+parseInt(e(343))/8+-parseInt(e(374))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ut(340)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=ut,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(355),"i"),r=ft(n(353));t[n(351)](r+n(345))&&e[n(351)](r+"input")?ft():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ot(void 0,(function(){const n=ut,t=function(){const n=ut;let t;try{t=Function(n(362)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(370)]=t[n(370)]||{},r=[n(344),n(350),"info",n(365),"exception",n(375),"trace"];for(let o=0;o<r[n(333)];o++){const t=ot[n(367)][n(359)][n(358)](ot),i=r[o],a=e[i]||t;t[n(329)]=ot.bind(ot),t[n(361)]=a[n(361)][n(358)](a),e[i]=t}}))();const it={key:0,args:[0,1,64]},at={key:1,args:[.5,1,64]},ct={key:2},st=[et(328),et(330),et(349),et(371)];function ut(n,t){const e=pt();return(ut=function(n,t){return e[n-=327]})(n,t)}const lt=rn({__name:et(334),props:{args:{default:null},from:{default:et(352)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=et,e=n,r=J();return dn((()=>{const n=ut;r[n(337)]&&(r.value[n(371)][n(347)](e.intensity),r.value[n(363)]=!0)})),nn((()=>e[t(371)]),(n=>{const o=t;r[o(337)]&&(r[o(337)].color.set(n),r[o(337)].color.multiplyScalar(e[o(331)]),r[o(337)].needsUpdate=!0)})),hn((()=>{})),(n,o)=>{const i=t;return sn(),un(i(360),null,[e.from===i(346)?(sn(),un(i(373),it)):e[i(357)]===i(369)?(sn(),un(i(373),at)):e[i(357)]===i(352)?(sn(),un(i(366),ct)):(sn(),vn(e[i(357)],{key:3,args:e})),mn(i(348),{ref_key:"material",ref:r,toneMapped:n[i(328)],map:n[i(330)],side:en(x),color:n[i(371)]},null,8,st)])}}});function ft(n){function t(n){const e=ut;if(typeof n===e(341))return function(n){}[e(367)](e(336)).apply(e(332));1!==(""+n/n).length||n%20==0?function(){return!0}[e(367)](e(338)+"gger")[e(368)](e(372)):function(){return!1}[e(367)](e(338)+e(364)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function pt(){const n=["warn","test","rect","init","4736277UwQVLZ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","2576481GfZYMF","from","bind","prototype","TresMesh","toString","return (function() ","needsUpdate","gger","error","TresPlaneGeometry","constructor","call","ring","console","color","action","TresRingGeometry","4739364yZPNUl","table","1623452zrZNyw","142BrjWxC","toneMapped","__proto__","map","intensity","counter","length","index","10526PuDIFU","while (true) {}","value","debu","1614PuOjCN","apply","string","5165lKWBkZ","2866504fgYpze","log","chain","circle","multiplyScalar","TresMeshBasicMaterial","side"];return(pt=function(){return n})()}function dt(n,t){const e=ht();return(dt=function(n,t){return e[n-=334]})(n,t)}function ht(){const n=["error","10435ZZAwOm","table","height","1076542TPXFXn","input","format","counter","dispose","trace","chain","apply","return (function() ","9XeSPgY","width","toString","clear","action","debu","type","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3241760AhIUnD","test","3316460oqYidB","length","832gIFEkG","bind",'{}.constructor("return this")( )',"constructor","gger","1005963KNHnlK","value","call","init","render","console","1hZUmSn","296091veHSQo","while (true) {}","12wGXwmK","stateObject","1318559qBplPv","depthTexture","function *\\( *\\)"];return(ht=function(){return n})()}!function(n,t){const e=dt,r=ht();for(;;)try{if(324101===-parseInt(e(358))/1*(parseInt(e(370))/2)+parseInt(e(359))/3+parseInt(e(347))/4*(parseInt(e(367))/5)+parseInt(e(361))/6*(-parseInt(e(352))/7)+parseInt(e(343))/8+parseInt(e(335))/9*(parseInt(e(345))/10)+-parseInt(e(363))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){vt(this,(function(){const n=dt,t=new RegExp(n(365)),e=new RegExp(n(342),"i"),r=_t(n(355));t[n(344)](r+n(376))&&e[n(344)](r+n(371))?_t():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[dt(377)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function gt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=gn(n)?Q(n):Q(_n(n)),{onLoop:s}=q(),{camera:u,renderer:l,scene:f,sizes:p}=V();return dn((()=>{var n;const a=dt;null==(n=t.value)||n.dispose(),t[a(353)]=new b((null==r?void 0:r[a(353)])||p.width[a(353)],(null==e?void 0:e.value)||p[a(369)].value,c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(353)])),(null==i?void 0:i[a(353)])&&(t[a(353)][a(364)]=new w((null==r?void 0:r.value)||p[a(336)][a(353)],(null==e?void 0:e[a(353)])||p[a(369)][a(353)]),t.value[a(364)][a(372)]=S,t[a(353)][a(364)][a(341)]=M)})),s((()=>{const n=dt;(null==a?void 0:a[n(353)])&&(l[n(353)].setRenderTarget(pn(t[n(353)])),l[n(353)][n(338)](),l[n(353)][n(356)](pn(f[n(353)]),pn(u.value)),l[n(353)].setRenderTarget(null))})),yn((()=>{var n;const e=dt;null==(n=t[e(353)])||n[e(374)]()})),t}function _t(n){function t(n){const e=dt;if("string"==typeof n)return function(n){}[e(350)](e(360))[e(377)](e(373));1!==(""+n/n)[e(346)]||n%20==0?function(){return!0}[e(350)](e(340)+e(351))[e(354)](e(339)):function(){return!1}[e(350)](e(340)+e(351))[e(377)](e(362)),t(++n)}try{if(n)return t;t(0)}catch(e){}}mt(void 0,(function(){const n=dt,t=function(){const n=dt;let t;try{t=Function(n(334)+n(349)+");")()}catch(e){t=window}return t}(),e=t[n(357)]=t[n(357)]||{},r=["log","warn","info",n(366),"exception",n(368),n(375)];for(let o=0;o<r[n(346)];o++){const t=mt.constructor.prototype[n(348)](mt),i=r[o],a=e[i]||t;t.__proto__=mt.bind(mt),t[n(337)]=a.toString[n(348)](a),e[i]=t}}))();const yt=bt;!function(n,t){const e=bt,r=wt();for(;;)try{if(142206===-parseInt(e(165))/1+-parseInt(e(176))/2*(-parseInt(e(146))/3)+parseInt(e(162))/4*(-parseInt(e(136))/5)+-parseInt(e(167))/6+-parseInt(e(143))/7+parseInt(e(156))/8+parseInt(e(170))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(169)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function bt(n,t){const e=wt();return(bt=function(n,t){return e[n-=133]})(n,t)}!function(){xt(this,(function(){const n=bt,t=new RegExp(n(137)),e=new RegExp(n(155),"i"),r=Rt("init");t[n(164)](r+n(153))&&e[n(164)](r+"input")?Rt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function wt(){const n=["fboResolution","console","124CvNgUz","debu","texture","background","material","table","trace","exception","action","29285QVGxyv","function *\\( *\\)","constructor","setRenderTarget","traverse","gger","side","1533889WDWKqz","toneMapping","string","10119KVgwUC",'{}.constructor("return this")( )',"isMesh","time","info","uuid","buffer","chain","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","974552HRZoeY","envMapIntensity","value","backsideThickness","MeshTransmissionMaterialClass","error","64CoYhhQ","length","test","7210stlkXW","warn","1371066LYOPzX","prototype","apply","3238389iOIzRu","bind","while (true) {}","thickness"];return(wt=function(){return n})()}It(void 0,(function(){const n=bt,t=function(){const n=bt;let t;try{t=Function("return (function() "+n(147)+");")()}catch(e){t=window}return t}(),e=t[n(175)]=t[n(175)]||{},r=[n(154),n(166),n(150),n(161),n(134),n(181),n(133)];for(let o=0;o<r[n(163)];o++){const t=It.constructor[n(168)].bind(It),i=r[o],a=e[i]||t;t.__proto__=It[n(171)](It),t.toString=a.toString[n(171)](a),e[i]=t}}))();const St=[yt(152),yt(142)],Mt=rn({__name:"index",props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=xn(),{extend:o,scene:i,renderer:a,camera:c}=V(),s=xn(),u=n;o({MeshTransmissionMaterial:Mn});const l=new Rn,{onBeforeLoop:f}=q(),p=gt({width:u[e(174)],height:u.fboResolution,isLoop:!1}),d=gt({width:u[e(174)],height:u[e(174)],isLoop:!1});let h,v,m,g;return hn((async()=>{const n=e;await bn(),s[n(158)]=function(n,t){const e=bt;let r;return n[e(140)]((n=>{const o=e;n[o(148)]&&n[o(180)]&&n[o(180)].uuid===t&&(r=n)})),r}(i[n(158)],r[n(158)][n(151)])})),f((({elapsed:n})=>{const t=e;r[t(158)][t(149)]=n,r[t(158)][t(152)]===d[t(158)].texture&&s.value&&(m=a[t(158)][t(144)],h=i[t(158)][t(179)],v=r[t(158)][t(157)],g=s.value[t(180)][t(142)],s.value.material=l,u.backside&&(a[t(158)][t(139)](p[t(158)]),a[t(158)].render(i[t(158)],c[t(158)]),s[t(158)].material=r.value,s[t(158)][t(180)][t(173)]=u[t(159)],s.value[t(180)][t(152)]=p[t(158)][t(178)],s[t(158)][t(180)].side=R,s[t(158)][t(180)][t(157)]=0),a[t(158)].setRenderTarget(d[t(158)]),a[t(158)].render(i[t(158)],c.value),s[t(158)][t(180)][t(152)]=d[t(158)].texture,s[t(158)][t(180)]=r[t(158)],s[t(158)].material[t(173)]=u[t(173)],s[t(158)][t(180)][t(142)]=g,s.value[t(180)][t(157)]=v,i.value.background=h,a.value[t(139)](null),a[t(158)][t(144)]=m)})),t({root:r,constructor:Mn}),(n,t)=>{const o=e;return sn(),un("TresMeshTransmissionMaterial",{ref_key:o(160),ref:r,buffer:en(d)[o(178)],side:en(x)},null,8,St)}}});function Rt(n){function t(n){const e=bt;if(typeof n===e(145))return function(n){}[e(138)](e(172))[e(169)]("counter");1!==(""+n/n)[e(163)]||n%20==0?function(){return!0}[e(138)](e(177)+e(141)).call(e(135)):function(){return!1}[e(138)]("debu"+e(141))[e(169)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Et(){const n=["3916302jrwLGN","TresGroup","value","2rLqISR","apply","init","while (true) {}","test","min","bind","453032epDwuO","left","log","front","precise","inner","5KtISzP","length","144gXkXBb","getCenter","gref","console","34603179enXrKR","12bOCZjN","$slots","10715516csKibe","action","__proto__","3MTWBPV","exception","disableX","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","max","toString","index","identity","bottom","disable","91036GPDqgF","gger",'{}.constructor("return this")( )',"string","trace","table","counter","920GliDtz","constructor","back","input","setFromObject","top","warn","1447763KAbJEC","default","set","stateObject","107343XNFHnh","error","chain"];return(Et=function(){return n})()}const At=zt;!function(n,t){const e=zt,r=Et();for(;;)try{if(836705===-parseInt(e(320))/1*(-parseInt(e(330))/2)+-parseInt(e(355))/3*(parseInt(e(337))/4)+-parseInt(e(343))/5*(parseInt(e(327))/6)+-parseInt(e(352))/7+parseInt(e(345))/8*(-parseInt(e(324))/9)+parseInt(e(373))/10*(-parseInt(e(366))/11)+parseInt(e(350))/12*(parseInt(e(349))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(331)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Tt(this,(function(){const n=zt,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(358),"i"),r=Ot(n(332));t[n(334)](r+n(326))&&e[n(334)](r+n(316))?Ot():r("0")}))()}();const Dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[zt(331)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function zt(n,t){const e=Et();return(zt=function(n,t){return e[n-=316]})(n,t)}Dt(void 0,(function(){const n=zt;let t;try{t=Function("return (function() "+n(368)+");")()}catch(o){t=window}const e=t[n(348)]=t[n(348)]||{},r=[n(339),n(319),"info",n(325),n(356),n(371),n(370)];for(let i=0;i<r[n(344)];i++){const t=Dt.constructor.prototype[n(336)](Dt),o=r[i],a=e[o]||t;t[n(354)]=Dt[n(336)](Dt),t.toString=a[n(361)][n(336)](a),e[o]=t}}))();const Pt=rn({__name:At(362),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return hn((()=>{const n=zt;if(!r.value)return;if(!o.value)return;r[n(329)].matrixWorld[n(363)]();const e=(new E)[n(317)](o.value,t[n(341)]),i=new A,a=new T,c=e.max.x-e.min.x,s=e[n(360)].y-e[n(335)].y,u=e[n(360)].z-e[n(335)].z;e[n(346)](i),e.getBoundingSphere(a);const l=t[n(318)]?s/2:t[n(364)]?-s/2:0,f=t[n(338)]?-c/2:t.right?c/2:0,p=t[n(340)]?u/2:t[n(375)]?-u/2:0;r[n(329)].position[n(322)](t[n(365)]||t[n(357)]?0:-i.x+f,t[n(365)]||t.disableY?0:-i.y+l,t[n(365)]||t.disableZ?0:-i.z+p)})),(n,t)=>{const i=zt;return sn(),un(i(328),{ref_key:i(347),ref:e},[mn(i(328),{ref_key:"outer",ref:r},[mn(i(328),{ref_key:i(342),ref:o},[ln(n[i(351)],i(321))],512)],512)],512)}}});function Ot(n){function t(n){const e=zt;if(typeof n===e(369))return function(n){}.constructor(e(333))[e(331)](e(372));1!==(""+n/n)[e(344)]||n%20==0?function(){return!0}[e(374)](e(359)+e(367)).call(e(353)):function(){return!1}.constructor(e(359)+e(367))[e(331)](e(323)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ct=Bt;!function(n,t){const e=Bt,r=Nt();for(;;)try{if(805906===-parseInt(e(213))/1+parseInt(e(201))/2*(parseInt(e(190))/3)+-parseInt(e(194))/4+-parseInt(e(226))/5+parseInt(e(184))/6+-parseInt(e(206))/7*(parseInt(e(177))/8)+-parseInt(e(209))/9*(-parseInt(e(225))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Bt(216)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Bt,t=new RegExp(n(178)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ht(n(181));t[n(199)](r+n(220))&&e.test(r+"input")?Ht():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(n,t){const e=Nt();return(Bt=function(n,t){return e[n-=176]})(n,t)}kt(void 0,(function(){const n=Bt;let t;try{t=Function(n(223)+n(222)+");")()}catch(o){t=window}const e=t[n(218)]=t.console||{},r=["log","warn","info",n(182),n(187),"table",n(208)];for(let i=0;i<r[n(214)];i++){const t=kt.constructor[n(176)].bind(kt),o=r[i],a=e[o]||t;t[n(185)]=kt[n(219)](kt),t[n(230)]=a.toString.bind(a),e[o]=t}}))();const jt=[Ct(189)],Ut=["object"];function Nt(){const n=["add","TresGroup","constructor","counter","434FrnZYe","params","trace","56529sIcaih","lightSource","value","far","387834BUUMIZ","length","backsideIOR","apply","backside","console","bind","chain","intensity",'{}.constructor("return this")( )',"return (function() ","worldRadius","4670yojJqT","7912335oPkQpj","gger","helper","resolution","toString","prototype","111248CvYxnx","function *\\( *\\)","ior","stateObject","init","error","while (true) {}","194574fVjAjg","__proto__","debu","exception","set","object","6aZtQiz","causticsOnly","primitive","Vector3","3477908kkWOcK","group","index","$slots","#ffffff","test","color","1542200weMEPj"];return(Nt=function(){return n})()}const Lt=rn({__name:Ct(196),props:{color:{default:Ct(198)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ct,e=n,{renderer:r}=V(),o=En(r[t(211)],{frames:1/0,resolution:e[t(229)],worldRadius:e[t(224)]});o[t(207)][t(217)]=!0;const i=xn(null);nn(i,(n=>{const e=t;n&&o.scene[e(202)](n)}));const{onBeforeLoop:a}=q();return a((({elapsed:n})=>{o.update()})),dn((()=>{const n=t;e[n(200)]&&o[n(207)][n(200)][n(188)](e[n(200)]),e[n(179)]&&(o.params[n(179)]=e.ior),e[n(215)]&&(o.params[n(215)]=e[n(215)]),e[n(212)]&&(o[n(207)][n(212)]=e.far),e.worldRadius&&(o[n(207)].worldRadius=e[n(224)]),e[n(221)]&&(o.params[n(221)]=e[n(221)])})),nn((()=>e[t(191)]),(n=>{const e=t;o.params[e(191)]=n})),nn((()=>e[t(210)]),(n=>{const e=t;n&&o[e(207)].lightSource instanceof D[e(193)]&&o[e(207)][e(210)][e(188)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return sn(),un(In,null,[mn(r(203),{ref_key:r(195),ref:i},[ln(n[r(197)],"default")],512),mn(r(192),{object:en(o)[r(195)],position:[0,.003,0]},null,8,jt),mn(r(192),{object:en(o)[r(228)],visible:!1},null,8,Ut)],64)}}});function Ht(n){function t(n){const e=Bt;if("string"==typeof n)return function(n){}[e(204)](e(183))[e(216)](e(205));1!==(""+n/n)[e(214)]||n%20==0?function(){return!0}[e(204)](e(186)+e(227)).call("action"):function(){return!1}[e(204)](e(186)+e(227)).apply(e(180)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=$t,r=Wt();for(;;)try{if(884513===-parseInt(e(135))/1+-parseInt(e(151))/2+parseInt(e(115))/3+-parseInt(e(144))/4+-parseInt(e(105))/5*(-parseInt(e(134))/6)+parseInt(e(146))/7+parseInt(e(125))/8*(parseInt(e(110))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(139)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Zt(this,(function(){const n=$t,t=new RegExp(n(118)),e=new RegExp(n(123),"i"),r=Vt(n(156));t[n(124)](r+n(138))&&e.test(r+n(136))?Vt():r("0")}))()}();const Gt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[$t(139)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["debu","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","992596BoqjfW","compile","constructor","table","console","init","length","call","gger","properties","25xubntT","stateObject","ShaderChunk","; i++) {\n        vogelSample = vogelDiskSample(j, ","; i ++) {\n        offset = (vogelDiskSample(j, ","45ZXCwoM","exception","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","warn","#if defined( SHADOWMAP_TYPE_PCF )","4705530rrgyGQ","trace","dispose","function *\\( *\\)",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","shadowmap_pars_fragment","return (function() ","traverse","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","2590648qNtPyp","remove","log","counter","bind","toString","material","isArray","forEach","1247592kdWvOv","1735198KNvIfS","input",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","chain","apply","#ifdef USE_SHADOWMAP","replace","action",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","4563120OhOkLG","prototype","206248hGhHQw","info","string"];return(Wt=function(){return n})()}function $t(n,t){const e=Wt();return($t=function(n,t){return e[n-=101]})(n,t)}Gt(void 0,(function(){const n=$t,t=function(){const n=$t;let t;try{t=Function(n(121)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t.console=t[n(155)]||{},r=[n(127),n(113),n(147),"error",n(111),n(154),n(116)];for(let o=0;o<r[n(101)];o++){const t=Gt[n(153)][n(145)][n(129)](Gt),i=r[o],a=e[i]||t;t.__proto__=Gt[n(129)](Gt),t[n(130)]=a[n(130)].bind(a),e[i]=t}}))();const Kt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=$t,o=D[r(107)][r(120)];return D[r(107)][r(120)]=D[r(107)][r(120)][r(141)](r(140),r(150)+t+r(119)+n+");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < "+e+r(109)+e+r(137)+e+r(108)+e+", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float("+t+r(112)+e+r(143))[r(141)](r(114),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{D[r(107)].shadowmap_pars_fragment=o,function(n,t,e){const r=$t;t[r(122)]((t=>{const e=r;t[e(131)]&&(Array[e(132)](t[e(131)])?t[e(131)][e(133)]((t=>{const r=e;n[r(104)].remove(t),t[r(117)]()})):(n[e(104)][e(126)](t.material),t.material[e(117)]()))})),n[r(147)].programs[r(101)]=0,n[r(152)](t,e)}(n,t,e)}};function Vt(n){function t(n){const e=$t;if(typeof n===e(148))return function(n){}[e(153)]("while (true) {}")[e(139)](e(128));1!==(""+n/n)[e(101)]||n%20==0?function(){return!0}.constructor(e(149)+"gger")[e(102)](e(142)):function(){return!1}[e(153)](e(149)+e(103)).apply(e(106)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Xt,r=Qt();for(;;)try{if(874518===-parseInt(e(414))/1+-parseInt(e(409))/2*(parseInt(e(401))/3)+parseInt(e(394))/4*(parseInt(e(427))/5)+parseInt(e(410))/6*(-parseInt(e(399))/7)+-parseInt(e(425))/8*(-parseInt(e(420))/9)+parseInt(e(416))/10*(parseInt(e(412))/11)+-parseInt(e(429))/12)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Yt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Yt(this,(function(){const n=Xt,t=new RegExp(n(398)),e=new RegExp(n(430),"i"),r=ne(n(418));t.test(r+"chain")&&e.test(r+"input")?ne():r("0")}))()}();const qt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xt(n,t){const e=Qt();return(Xt=function(n,t){return e[n-=393]})(n,t)}function Qt(){const n=["log","4576728Ggnpjr","return (function() ","85370vaiwSV","value","3899904AgoPsN","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","__proto__","constructor","dispose","76RbvElz","apply","counter","bind","function *\\( *\\)","3320170Kvgjrj","while (true) {}","103101EtVKhQ","call","material","toString","exception","warn",'{}.constructor("return this")( )',"console","16dSkarm","12WfiGRS","info","11mmFdfR","stateObject","1048124msYTkd","prototype","14305110CsPAYE","gger","init","trace","27tKUyQe","traverse","length","action"];return(Qt=function(){return n})()}qt(void 0,(function(){const n=Xt;let t;try{t=Function(n(426)+n(407)+");")()}catch(o){t=window}const e=t[n(408)]=t[n(408)]||{},r=[n(424),n(406),n(411),"error",n(405),"table",n(419)];for(let i=0;i<r[n(422)];i++){const t=qt[n(432)][n(415)].bind(qt),o=r[i],a=e[o]||t;t[n(431)]=qt[n(397)](qt),t[n(404)]=a[n(404)].bind(a),e[o]=t}}))();const Jt=rn({__name:"index",props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=V();let i=null;const a=n=>{const t=Xt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r.value,o[t(428)],e[t(428)]),i=null),a&&(i=Kt({focus:s,size:c,samples:u}),o[t(428)][t(421)]((n=>{const e=t;n instanceof l&&n[e(403)][e(393)]()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=Xt;if("string"==typeof n)return function(n){}[e(432)](e(400))[e(395)](e(396));1!==(""+n/n)[e(422)]||n%20==0?function(){return!0}.constructor("debu"+e(417))[e(402)](e(423)):function(){return!1}[e(432)]("debugger")[e(395)](e(413)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(){const n=["action","7858032KqfPtO","setResolution","return (function() ","stateObject","22867690pVzWQt","1618596aNOQpS","uniforms","value","table","replace","271402Kyvzam","counter","gger","244mYegdi","info","32aRqYYB","trace","set","colorspace_fragment","exception","string","debu","apply","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","log","error","bind","encodings_fragment","808570ZCMZre","2kEyNid","multiplyScalar","length","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","console","constructor","toString","setTexelSize","toneMapped","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","resolution","5530326GlENVY","kernel","init","test","chain",">\n        }","input","texelSize","warn","61329gHyLPf"];return(te=function(){return n})()}const ee=ie;!function(n,t){const e=ie,r=te();for(;;)try{if(630913===parseInt(e(356))/1*(parseInt(e(337))/2)+-parseInt(e(325))/3*(parseInt(e(340))/4)+-parseInt(e(355))/5+-parseInt(e(367))/6+parseInt(e(327))/7+-parseInt(e(342))/8*(parseInt(e(332))/9)+parseInt(e(331))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ie,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(359),"i"),r=se(n(369));t[n(370)](r+n(371))&&e[n(370)](r+n(373))?se():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ie(349)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ie(n,t){const e=te();return(ie=function(n,t){return e[n-=325]})(n,t)}oe(void 0,(function(){const n=ie,t=function(){const n=ie;let t;try{t=Function(n(329)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(360)]=t[n(360)]||{},r=[n(351),n(375),n(341),n(352),n(346),n(335),n(343)];for(let o=0;o<r[n(358)];o++){const t=oe[n(361)].prototype.bind(oe),i=r[o],a=e[i]||t;t.__proto__=oe[n(353)](oe),t[n(362)]=a[n(362)].bind(a),e[i]=t}}))();const ae=parseInt(F[ee(336)](/\D+/g,""));class ce extends z{constructor(n=new O){const t=ee;super({uniforms:{inputBuffer:new P(null),depthBuffer:new P(null),resolution:new P(new O),texelSize:new P(new O),halfTexelSize:new P(new O),kernel:new P(0),scale:new P(1),cameraNear:new P(0),cameraFar:new P(1),minDepthThreshold:new P(0),maxDepthThreshold:new P(1),depthScale:new P(0),depthToBlurRatioBias:new P(.25)},fragmentShader:t(365)+t(ae>=154?345:354)+t(372),vertexShader:t(350),blending:C,depthWrite:!1,depthTest:!1}),this[t(364)]=!1,this[t(363)](n.x,n.y),this[t(368)]=new Float32Array([0,1,2,2,3])}[ee(363)](n,t){const e=ee;this.uniforms[e(374)][e(334)][e(344)](n,t),this.uniforms.halfTexelSize.value[e(344)](n,t)[e(357)](.5)}[ee(328)](n){const t=ee;this[t(333)][t(366)][t(334)].copy(n)}}function se(n){function t(n){const e=ie;if(typeof n===e(347))return function(n){}[e(361)]("while (true) {}").apply(e(338));1!==(""+n/n)[e(358)]||n%20==0?function(){return!0}.constructor("debu"+e(339)).call(e(326)):function(){return!1}[e(361)](e(348)+e(339))[e(349)](e(330)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=de,r=le();for(;;)try{if(605113===parseInt(e(430))/1*(-parseInt(e(419))/2)+-parseInt(e(450))/3*(parseInt(e(422))/4)+-parseInt(e(442))/5+parseInt(e(406))/6+-parseInt(e(417))/7*(-parseInt(e(453))/8)+-parseInt(e(452))/9+parseInt(e(449))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function le(){const n=["trace","exception","renderTargetA","inputBuffer","39859070xKXaFP","6ofGKEU","while (true) {}","8469126DZjRkR","8ceFpsE","frustumCulled","convolutionMaterial","call","depthScale","console","input","constructor","debu","length","screen","56034MOEGhz","camera","depthTexture","action","init",'{}.constructor("return this")( )',"prototype","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","render","texture","apply","386855wXRJwJ","USE_DEPTH","7422bfDbNd","kernel","chain","1421596BeKWsT","test","toString","info","scene","clone","bind","renderTargetB","216LKuJEW","string","renderToScreen","setRenderTarget","warn","value","gger","setAttribute","depthToBlurRatioBias","defines","stateObject","minDepthThreshold","4960050gDOlZI","return (function() ","uniforms"];return(le=function(){return n})()}!function(){ue(this,(function(){const n=de,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(413),"i"),r=he(n(410));t[n(423)](r+n(421))&&e[n(423)](r+n(401))?he():r("0")}))()}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();fe(void 0,(function(){const n=de,t=function(){const n=de;let t;try{t=Function(n(443)+n(411)+");")()}catch(e){t=window}return t}(),e=t[n(400)]=t.console||{},r=["log",n(434),n(425),"error",n(446),"table",n(445)];for(let o=0;o<r[n(404)];o++){const t=fe[n(402)][n(412)].bind(fe),i=r[o],a=e[i]||t;t.__proto__=fe[n(428)](fe),t[n(424)]=a[n(424)][n(428)](a),e[i]=t}}))();class pe{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=de;this[c(432)]=!1,this.renderTargetA=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(429)]=this.renderTargetA[c(427)](),this[c(455)]=new ce,this[c(455)].setTexelSize(1/t,1/e),this.convolutionMaterial.setResolution(new O(t,e)),this.scene=new u,this[c(407)]=new k,this.convolutionMaterial[c(444)][c(441)].value=r,this[c(455)].uniforms.maxDepthThreshold[c(435)]=o,this[c(455)][c(444)][c(457)][c(435)]=i,this[c(455)][c(444)][c(438)][c(435)]=a,this[c(455)][c(439)][c(418)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(437)]("position",new j(s,3)),p[c(437)]("uv",new j(f,2)),this[c(405)]=new l(p,this[c(455)]),this.screen[c(454)]=!1,this[c(426)].add(this[c(405)])}render(n,t,e){const r=de,o=this[r(426)],i=this[r(407)],a=this[r(447)],c=this[r(429)],s=this[r(455)],u=s.uniforms;u.depthBuffer[r(435)]=t[r(408)];const l=s.kernel;let f,p,d,h=t;for(p=0,d=l[r(404)]-1;p<d;++p)f=0==(1&p)?a:c,u[r(420)][r(435)]=l[p],u[r(448)][r(435)]=h[r(415)],n.setRenderTarget(f),n[r(414)](o,i),h=f;u[r(420)][r(435)]=l[p],u[r(448)].value=h[r(415)],n[r(433)](this[r(432)]?null:e),n[r(414)](o,i)}}function de(n,t){const e=le();return(de=function(n,t){return e[n-=400]})(n,t)}function he(n){function t(n){const e=de;if(typeof n===e(431))return function(n){}.constructor(e(451))[e(416)]("counter");1!==(""+n/n)[e(404)]||n%20==0?function(){return!0}.constructor(e(403)+e(436))[e(456)](e(409)):function(){return!1}.constructor(e(403)+e(436))[e(416)](e(440)),t(++n)}try{if(n)return t;t(0)}catch(e){}}var ve=_e;function me(){var n=["table","exception","uniforms","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","mixStrength","\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ","_blurStrength","onBeforeCompile","while (true) {}","apply","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_tDiffuseBlur","2OczRdV","error","action","depthScale","_mixContrast","_textureMatrix","_distortionMap","test","return (function() ","depthToBlurRatioBias","minDepthThreshold","length","tDepth","vertexShader","13705dTZKRZ","replace","defines","hasBlur","_mirror","string","mixContrast","_distortion","call","_tDiffuse","_mixBlur","distortionMap","constructor","11820483qOJwkZ","mixBlur","stateObject","value","USE_UV","_hasBlur","_tDepth","fragmentShader","tDiffuse","34359JzlFSG","debu","1316666ynHXDM","600MDYElL","1056izQArL","info","chain","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","toString","_depthScale","console",'{}.constructor("return this")( )',"bind","299140rXdXyf","prototype","561nuFswu","counter","_minDepthThreshold","distortion","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","_maxDepthThreshold","_depthToBlurRatioBias","tDiffuseBlur","textureMatrix","mirror","28460KuFTRJ","70777iWhtBF","#include <emissivemap_fragment>"];return(me=function(){return n})()}!function(n,t){for(var e=_e,r=me();;)try{if(832868===parseInt(e(440))/1+parseInt(e(479))/2*(parseInt(e(438))/3)+-parseInt(e(463))/4+parseInt(e(493))/5*(parseInt(e(442))/6)+parseInt(e(464))/7*(-parseInt(e(441))/8)+parseInt(e(506))/9+parseInt(e(451))/10*(-parseInt(e(453))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var ge=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[_e(476)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function _e(n,t){var e=me();return(_e=function(n,t){return e[n-=430]})(n,t)}!function(){ge(this,(function(){var n=_e,t=new RegExp(n(469)),e=new RegExp(n(470),"i"),r=be("init");t[n(486)](r+n(444))&&e[n(486)](r+"input")?be():r("0")}))()}();var ye=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();ye(void 0,(function(){var n,t=_e;try{n=Function(t(487)+t(449)+");")()}catch(s){n=window}for(var e=n[t(448)]=n[t(448)]||{},r=["log","warn",t(443),t(480),t(467),t(466),"trace"],o=0;o<r[t(490)];o++){var i=ye[t(505)][t(452)][t(450)](ye),a=r[o],c=e[a]||i;i.__proto__=ye.bind(ye),i[t(446)]=c[t(446)][t(450)](c),e[a]=i}}))();class xe extends U{constructor(n={}){var t=_e;super(n),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this[t(478)]={value:null},this[t(484)]={value:null},this[t(434)]={value:!1},this[t(497)]={value:0},this[t(503)]={value:0},this[t(473)]={value:.5},this[t(455)]={value:.9},this[t(458)]={value:1},this[t(447)]={value:0},this[t(459)]={value:.25},this[t(500)]={value:1},this[t(483)]={value:1},this.setValues(n)}[ve(474)](n){var t,e=ve;!(null==(t=n[e(495)])?void 0:t[e(433)])&&(n[e(495)][e(433)]=""),n[e(468)][e(496)]=this[e(434)],n[e(468)][e(437)]=this[e(502)],n[e(468)][e(491)]=this[e(435)],n[e(468)][e(504)]=this[e(485)],n[e(468)][e(460)]=this[e(478)],n[e(468)][e(461)]=this[e(484)],n[e(468)].mirror=this[e(497)],n[e(468)][e(430)]=this[e(503)],n[e(468)][e(471)]=this[e(473)],n[e(468)][e(489)]=this[e(455)],n[e(468)].maxDepthThreshold=this[e(458)],n[e(468)][e(482)]=this[e(447)],n[e(468)].depthToBlurRatioBias=this[e(459)],n[e(468)][e(456)]=this[e(500)],n.uniforms[e(499)]=this[e(483)],n[e(492)]=e(472)+n[e(492)],n[e(492)]=n[e(492)][e(494)]("#include <project_vertex>",e(477)),n[e(436)]=e(457)+n[e(436)],n.fragmentShader=n.fragmentShader[e(494)](e(465),e(445))}get[ve(437)](){return this[ve(502)].value}set tDiffuse(n){var t=ve;this._tDiffuse[t(432)]=n}get[ve(491)](){var n=ve;return this[n(435)][n(432)]}set tDepth(n){this[ve(435)].value=n}get distortionMap(){var n=ve;return this[n(485)][n(432)]}set[ve(504)](n){var t=ve;this[t(485)][t(432)]=n}get tDiffuseBlur(){var n=ve;return this[n(478)][n(432)]}set[ve(460)](n){var t=ve;this[t(478)][t(432)]=n}get[ve(461)](){var n=ve;return this[n(484)][n(432)]}set[ve(461)](n){var t=ve;this[t(484)][t(432)]=n}get[ve(496)](){var n=ve;return this[n(434)][n(432)]}set hasBlur(n){this[ve(434)].value=n}get[ve(462)](){return this[ve(497)].value}set[ve(462)](n){var t=ve;this._mirror[t(432)]=n}get[ve(430)](){var n=ve;return this[n(503)][n(432)]}set[ve(430)](n){var t=ve;this[t(503)][t(432)]=n}get[ve(471)](){var n=ve;return this[n(473)][n(432)]}set[ve(471)](n){this._blurStrength.value=n}get[ve(489)](){var n=ve;return this._minDepthThreshold[n(432)]}set[ve(489)](n){var t=ve;this[t(455)][t(432)]=n}get maxDepthThreshold(){var n=ve;return this[n(458)][n(432)]}set maxDepthThreshold(n){var t=ve;this._maxDepthThreshold[t(432)]=n}get[ve(482)](){return this[ve(447)].value}set[ve(482)](n){var t=ve;this[t(447)][t(432)]=n}get[ve(488)](){var n=ve;return this[n(459)][n(432)]}set[ve(488)](n){this[ve(459)].value=n}get[ve(456)](){var n=ve;return this[n(500)][n(432)]}set[ve(456)](n){var t=ve;this[t(500)][t(432)]=n}get[ve(499)](){var n=ve;return this[n(483)][n(432)]}set[ve(499)](n){var t=ve;this._mixContrast[t(432)]=n}}function be(n){function t(n){var e=_e;if(typeof n===e(498))return function(n){}.constructor(e(475))[e(476)](e(454));1!==(""+n/n)[e(490)]||n%20==0?function(){return!0}[e(505)](e(439)+"gger")[e(501)](e(481)):function(){return!1}[e(505)]("debugger")[e(476)](e(431)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ie=we;function we(n,t){const e=Ee();return(we=function(n,t){return e[n-=278]})(n,t)}!function(n,t){const e=we,r=Ee();for(;;)try{if(811641===parseInt(e(304))/1*(parseInt(e(367))/2)+-parseInt(e(340))/3*(parseInt(e(284))/4)+parseInt(e(312))/5+parseInt(e(294))/6*(-parseInt(e(287))/7)+-parseInt(e(377))/8+-parseInt(e(371))/9*(parseInt(e(296))/10)+parseInt(e(326))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Se=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Se(this,(function(){const n=we,t=new RegExp(n(375)),e=new RegExp(n(313),"i"),r=Te(n(374));t[n(361)](r+n(331))&&e[n(361)](r+n(349))?Te():r("0")}))()}();const Me=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[we(301)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Me(void 0,(function(){const n=we,t=function(){const n=we;let t;try{t=Function("return (function() "+n(332)+");")()}catch(e){t=window}return t}(),e=t[n(322)]=t[n(322)]||{},r=[n(329),"warn",n(355),"error",n(343),"table",n(366)];for(let o=0;o<r[n(351)];o++){const t=Me[n(306)][n(333)][n(314)](Me),i=r[o],a=e[i]||t;t.__proto__=Me.bind(Me),t[n(360)]=a[n(360)][n(314)](a),e[i]=t}}))();const Re=[Ie(335),Ie(347),Ie(363),Ie(279),Ie(327),Ie(285),Ie(369),Ie(280),Ie(323),Ie(302),Ie(378),Ie(289),"distortionMap",Ie(309),Ie(357),Ie(311),Ie(337)];function Ee(){const n=["texture","reflectorPlane","info","multiply","defines-USE_BLUR","add","depthTexture","toString","test","autoUpdate","t-diffuse","debu","far","trace","2StZAKu","setFromNormalAndCoplanarPoint","mix-strength","position","1180098YBrXWT","setRenderTarget","action","init","function *\\( *\\)","key","9158608VPLBzJ","depth-to-blur-ratio-bias","number","t-depth","min-depth-threshold","normal","lookAt","projectionMatrix","4PBzaBq","has-blur","reflect","14MyTyvT","rotationMatrix","distortion","gger","textureMatrix","assign","material","484986uYovcn","copy","90ApkgOn","shadowMap","dot","addScaledVector","set","apply","depth-scale","matrixWorld","674771DkVair","stateObject","constructor","visible","string","mix-contrast","setFromMatrixPosition","defines-USE_DEPTH","6277380fIgzvh","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","bind","render","reflectorOffset","lookAtPosition","reflectorWorldPosition","view","uuid","TresMeshReflectorMaterial","console","max-depth-threshold","dispose","target","29061714pKLkIo","t-diffuse-blur","virtualCamera","log","applyMatrix4","chain",'{}.constructor("return this")( )',"prototype","materialRef","texture-matrix","enabled","defines-USE_DISTORTION","index","subVectors","3821982baWCEt","negate","isMesh","exception","cameraWorldPosition","value","sign","mirror","elements","input","clipPlane","length","extractRotation"];return(Ee=function(){return n})()}const Ae=rn({__name:Ie(338),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=Ie,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=Q(o),{camera:y,scene:x,renderer:R,extend:E}=V();E({MeshReflectorMaterial:xe});const T=xn(),D=xn(),z=xn(),P=xn(),O=tn((()=>{const n=we;return typeof f.value===n(278)?[f[n(345)],f[n(345)]]:f.value})),C=tn((()=>O[r(345)][0]>0||O[r(345)][1]>0)),F={reflectorPlane:new N,normal:new A,reflectorWorldPosition:new A,cameraWorldPosition:new A,rotationMatrix:new L,lookAtPosition:new A(0,0,-1),clipPlane:new H,view:new A,target:new A,q:new H,virtualCamera:new Z,textureMatrix:new L};dn((()=>{var n;const o=r;null==(n=T[o(345)])||n[o(353)].dispose();const f={minFilter:I,magFilter:I,type:h};var y,x;T.value=new b(i.value,i.value,(y=c({},f),x={depthBuffer:!0,depthTexture:new w(i[o(345)],i.value,S,M)},t(y,e(x)))),D[o(345)]=new b(i[o(345)],i.value,f),z[o(345)]=new pe({resolution:i[o(345)],width:O.value[0],height:O[o(345)][1],minDepthThreshold:a[o(345)],maxDepthThreshold:s[o(345)],depthScale:u[o(345)],depthToBlurRatioBias:l[o(345)]}),P.value={mirror:p,textureMatrix:F[o(291)],mixBlur:d,tDiffuse:T[o(345)].texture,tDepth:T[o(345)][o(359)],tDiffuseBlur:T[o(345)][o(353)],hasBlur:C,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(345)],mixContrast:_,"defines-USE_BLUR":C[o(345)]?"":void 0,"defines-USE_DEPTH":u[o(345)]>0?"":void 0,"defines-USE_DISTORTION":g[o(345)]?"":void 0}}));const k=xn(),{onLoop:B}=q();B((()=>{var n;const t=r;if(!(k[t(345)]&&R[t(345)]&&T.value&&y[t(345)]))return;const e=function(n,t){let e;return n.traverse((n=>{const r=we;n[r(342)]&&n[r(293)]&&n.material[r(320)]===t&&(e=n)})),e}(x[t(345)],k[t(345)][t(320)]);if(!e)return;e[t(307)]=!1;const i=R[t(345)].xr[t(336)],a=R[t(345)][t(297)][t(362)];(function(n){var t,e;const r=we;if(F.reflectorWorldPosition[r(310)](n[r(303)]),F.cameraWorldPosition.setFromMatrixPosition(null==(t=y.value)?void 0:t[r(303)]),F[r(288)][r(352)](n[r(303)]),F[r(281)].set(0,0,1),F.normal[r(330)](F[r(288)]),F[r(318)][r(299)](F[r(281)],o[r(316)]),F[r(319)][r(339)](F[r(318)],F.cameraWorldPosition),F[r(319)].dot(F[r(281)])>0)return;F[r(319)][r(286)](F[r(281)])[r(341)](),F.view[r(358)](F[r(318)]),F[r(288)][r(352)](null==(e=y[r(345)])?void 0:e.matrixWorld),F[r(317)].set(0,0,-1),F[r(317)][r(330)](F[r(288)]),F.lookAtPosition[r(358)](F[r(344)]),F[r(325)][r(339)](F[r(318)],F.lookAtPosition),F[r(325)][r(286)](F[r(281)])[r(341)](),F[r(325)].add(F[r(318)]),F[r(328)][r(370)][r(295)](F[r(319)]),F[r(328)].up[r(300)](0,1,0),F.virtualCamera.up.applyMatrix4(F.rotationMatrix),F[r(328)].up.reflect(F[r(281)]),F[r(328)][r(282)](F[r(325)]),F[r(328)][r(365)]=(null==y?void 0:y[r(345)])[r(365)],F[r(328)].updateMatrixWorld(),F[r(328)].projectionMatrix[r(295)]((null==y?void 0:y[r(345)])[r(283)]),F[r(291)][r(300)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),F.textureMatrix[r(356)](F.virtualCamera.projectionMatrix),F.textureMatrix[r(356)](F[r(328)].matrixWorldInverse),F[r(291)].multiply(n[r(303)]),F[r(354)][r(368)](F[r(281)],F[r(318)]),F.reflectorPlane[r(330)](F[r(328)].matrixWorldInverse),F[r(350)][r(300)](F[r(354)][r(281)].x,F[r(354)][r(281)].y,F.reflectorPlane[r(281)].z,F[r(354)].constant);const i=F.virtualCamera[r(283)];F.q.x=(Math.sign(F[r(350)].x)+i[r(348)][8])/i[r(348)][0],F.q.y=(Math[r(346)](F[r(350)].y)+i[r(348)][9])/i[r(348)][5],F.q.z=-1,F.q.w=(1+i.elements[10])/i.elements[14],F[r(350)].multiplyScalar(2/F.clipPlane[r(298)](F.q)),i.elements[2]=F[r(350)].x,i[r(348)][6]=F[r(350)].y,i[r(348)][10]=F[r(350)].z+1,i[r(348)][14]=F[r(350)].w})(e),R[t(345)][t(297)][t(362)]=!1,R[t(345)][t(372)](T.value),R[t(345)].autoClear||R[t(345)].clear(),R[t(345)][t(315)](x.value,F[t(328)]),null==(n=null==z?void 0:z.value)||n[t(315)](R[t(345)],T[t(345)],D.value),R[t(345)].xr[t(336)]=i,R[t(345)][t(297)][t(362)]=a,e[t(307)]=!0,R[t(345)][t(372)](null)}));const j=wn(),U=tn((()=>{const n=r,t={};return Object[n(292)](t,o),Object.assign(t,j[n(345)]),t}));return yn((()=>{var n,t;const e=r;null==(n=null==T?void 0:T[e(345)])||n[e(324)](),null==(t=null==D?void 0:D.value)||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return sn(),un(c(321),Sn({key:c(376)+P[c(345)][c(357)]+P.value[c(311)]+P[c(345)][c(337)],ref_key:c(334),ref:k},U[c(345)],{"texture-matrix":F[c(291)],mirror:en(p),"t-diffuse":null==(e=T[c(345)])?void 0:e[c(353)],"t-depth":null==(o=T[c(345)])?void 0:o.depthTexture,"t-diffuse-blur":null==(i=D[c(345)])?void 0:i[c(353)],"has-blur":C[c(345)],"mix-strength":en(v),"min-depth-threshold":en(a),"max-depth-threshold":en(s),"depth-scale":en(u),"depth-to-blur-ratio-bias":en(l),distortion:en(m),distortionMap:en(g),"mix-contrast":en(_),"defines-USE_BLUR":C.value?"":void 0,"defines-USE_DEPTH":en(u)>0?"":void 0,"defines-USE_DISTORTION":en(g)?"":void 0}),null,16,Re)}}});function Te(n){function t(n){const e=we;if(typeof n===e(308))return function(n){}[e(306)]("while (true) {}").apply("counter");1!==(""+n/n)[e(351)]||n%20==0?function(){return!0}.constructor("debu"+e(290)).call(e(373)):function(){return!1}[e(306)](e(364)+"gger")[e(301)](e(305)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function De(n,t){const e=Ce();return(De=function(n,t){return e[n-=386]})(n,t)}!function(n,t){const e=De,r=Ce();for(;;)try{if(309183===parseInt(e(409))/1*(-parseInt(e(406))/2)+-parseInt(e(403))/3+parseInt(e(404))/4+parseInt(e(389))/5+-parseInt(e(398))/6+parseInt(e(412))/7+parseInt(e(400))/8*(-parseInt(e(422))/9))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=De,t=new RegExp(n(407)),e=new RegExp(n(391),"i"),r=Oe(n(419));t[n(410)](r+n(417))&&e.test(r+n(427))?Oe():r("0")}))()}();const Pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[De(418)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(n){function t(n){const e=De;if(typeof n===e(388))return function(n){}[e(425)](e(414))[e(418)](e(399));1!==(""+n/n)[e(405)]||n%20==0?function(){return!0}[e(425)](e(393)+e(408))[e(426)](e(413)):function(){return!1}[e(425)](e(393)+e(408))[e(418)](e(401)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Ce(){const n=["string","1482525uGLVTf","exception","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","background","debu","toString","CubeCamera","texture","bind","1048998dQfoeE","counter","40TEebUe","stateObject","error","554898WTbaaL","719616wWUYjI","length","6MRUabW","function *\\( *\\)","gger","66273bocfsz","test","dispose","3145639hBGAVc","action","while (true) {}","value","trace","chain","apply","init","type","return (function() ","104373nvSbGU","console","table","constructor","call","input","info","log"];return(Ce=function(){return n})()}function Fe(){const n=["console","46676octPpA","gger","primitive","40ODTOAQ","object","info","log","length","value","table","prototype","$slots","bind","chain","trace","frames","far","default","84eXrIzs","120tHsIfl","3169431pSDdse","1946GfAytq","string","2129634OzQlLD","constructor","return (function() ","visible","3719935KeXfSv","counter","debu","test","error","init","index","11923043Pvwdvk","action",'{}.constructor("return this")( )',"toString","envMap","1546wHgtht","fog","__proto__","TresGroup","resolution","apply","126833DnoIoP"];return(Fe=function(){return n})()}Pe(void 0,(function(){const n=De,t=function(){const n=De;let t;try{t=Function(n(421)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(423)]=t[n(423)]||{},r=[n(387),"warn",n(386),n(402),n(390),n(424),n(416)];for(let o=0;o<r.length;o++){const t=Pe[n(425)].prototype.bind(Pe),i=r[o],a=e[i]||t;t.__proto__=Pe[n(397)](Pe),t[n(394)]=a[n(394)].bind(a),e[i]=t}}))();const ke=je;!function(n,t){const e=je,r=Fe();for(;;)try{if(785002===-parseInt(e(269))/1*(-parseInt(e(298))/2)+-parseInt(e(295))/3*(-parseInt(e(277))/4)+-parseInt(e(304))/5+-parseInt(e(300))/6+parseInt(e(275))/7*(-parseInt(e(296))/8)+-parseInt(e(297))/9*(-parseInt(e(280))/10)+-parseInt(e(264))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Be=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(274)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function je(n,t){const e=Fe();return(je=function(n,t){return e[n-=262]})(n,t)}!function(){Be(this,(function(){const n=je,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=He(n(262));t[n(307)](r+n(290))&&e[n(307)](r+"input")?He():r("0")}))()}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(274)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ue(void 0,(function(){const n=je,t=function(){const n=je;let t;try{t=Function(n(302)+n(266)+");")()}catch(e){t=window}return t}(),e=t[n(276)]=t.console||{},r=[n(283),"warn",n(282),n(308),"exception",n(286),n(291)];for(let o=0;o<r[n(284)];o++){const t=Ue[n(301)][n(287)][n(289)](Ue),i=r[o],a=e[i]||t;t[n(271)]=Ue.bind(Ue),t[n(267)]=a.toString.bind(a),e[i]=t}}))();const Ne=[ke(281)],Le=rn({__name:ke(263),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=ke,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=V(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return nn((()=>s),(n=>{var t;const e=De;null==(t=c[e(415)])||t[e(411)](),c[e(415)]=new v(n[e(415)]),c[e(415)][e(396)][e(420)]=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=De;e&&(f[r(415)]=new(D[r(395)])(n,t,e))}),{immediate:!0}),yn((()=>{var n;const t=De;null==(n=c.value)||n[t(411)]()})),{fbo:c,camera:f,update:()=>{var n;const t=De;p=a[t(415)].fog,d=a.value[t(392)],a.value[t(392)]=r||d,a[t(415)].fog=o||p,null==(n=f.value)||n.update(i[t(415)],a[t(415)]),a.value.fog=p,a[t(415)].background=d}}}({resolution:o[r(273)],near:o.near,far:o[r(293)],envMap:o[r(268)],fog:o[r(270)]}),{onBeforeLoop:s}=q();let u=0;const l=J(null);return s((()=>{const n=r;l[n(285)]&&(o[n(292)]===1/0||u<o[n(292)])&&(l[n(285)].visible=!1,c(),l[n(285)][n(303)]=!0,u++)})),t({texture:null==(e=i.value)?void 0:e.texture}),(n,t)=>{const e=r;return sn(),un(e(272),null,[mn(e(279),{object:en(a)},null,8,Ne),mn(e(272),{ref_key:"rgRef",ref:l},[ln(n[e(288)],e(294))],512)])}}});function He(n){function t(n){const e=je;if(typeof n===e(299))return function(n){}[e(301)]("while (true) {}")[e(274)](e(305));1!==(""+n/n)[e(284)]||n%20==0?function(){return!0}[e(301)](e(306)+e(278)).call(e(265)):function(){return!1}[e(301)](e(306)+e(278))[e(274)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Ke,r=Ge();for(;;)try{if(983201===parseInt(e(453))/1*(-parseInt(e(457))/2)+parseInt(e(458))/3*(parseInt(e(459))/4)+-parseInt(e(468))/5*(parseInt(e(429))/6)+parseInt(e(452))/7+parseInt(e(463))/8+-parseInt(e(446))/9+parseInt(e(470))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ke(466)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Ge(){const n=["counter","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","while (true) {}","426055iSIhMu","174779nwkbTc","log","reduce","error","22VTiPJT","9IbQRvC","1157292DTGeiF","MathUtils","constructor","warn","8356680WOzwFl","bind","string","apply","info","1855790jCPqfS","key","36025860MjLvGa","toString","stateObject","uniforms","clone","24IgpcfJ","call","exception","defineProperty","debu","table","__proto__","gger","return (function() ","assign","test","init","length","console","trace","prototype","forEach","10670427yabCgD","function *\\( *\\)"];return(Ge=function(){return n})()}!function(){Ze(this,(function(){const n=Ke,t=new RegExp(n(447)),e=new RegExp(n(450),"i"),r=Ve(n(440));t[n(439)](r+"chain")&&e[n(439)](r+n(449))?Ve():r("0")}))()}();const We=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ke(466)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function $e(n,t,e,r){const o=Ke,i=class extends z{constructor(o={}){const i=Ke,a=Object.entries(n);super({uniforms:a[i(455)](((n,[t,e])=>{const r=G[i(428)]({[t]:{value:e}});return c(c({},n),r)}),{}),vertexShader:t,fragmentShader:e}),this[i(469)]="",a[i(445)]((([n])=>Object[i(432)](this,n,{get:()=>this[i(427)][n].value,set:t=>this.uniforms[n].value=t}))),Object[i(438)](this,o),r&&r(this)}};return i[o(469)]=D[o(460)].generateUUID(),i}function Ke(n,t){const e=Ge();return(Ke=function(n,t){return e[n-=426]})(n,t)}function Ve(n){function t(n){const e=Ke;if(typeof n===e(465))return function(n){}[e(461)](e(451))[e(466)](e(448));1!==(""+n/n)[e(441)]||n%20==0?function(){return!0}.constructor(e(433)+"gger")[e(430)]("action"):function(){return!1}.constructor("debu"+e(436))[e(466)](e(426)),t(++n)}try{if(n)return t;t(0)}catch(e){}}We(void 0,(function(){const n=Ke,t=function(){const n=Ke;let t;try{t=Function(n(437)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(442)]=t[n(442)]||{},r=[n(454),n(462),n(467),n(456),n(431),n(434),n(443)];for(let o=0;o<r[n(441)];o++){const t=We[n(461)][n(444)][n(464)](We),i=r[o],a=e[i]||t;t[n(435)]=We.bind(We),t[n(471)]=a[n(471)][n(464)](a),e[i]=t}}))();var Ye=or;!function(n,t){for(var e=or,r=lr();;)try{if(782020===-parseInt(e(126))/1*(-parseInt(e(233))/2)+parseInt(e(230))/3*(-parseInt(e(251))/4)+-parseInt(e(239))/5+parseInt(e(246))/6+-parseInt(e(196))/7*(parseInt(e(194))/8)+parseInt(e(285))/9*(-parseInt(e(151))/10)+-parseInt(e(294))/11*(-parseInt(e(264))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[or(115)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qe(this,(function(){var n=or,t=new RegExp(n(142)),e=new RegExp(n(247),"i"),r=Pr("init");t[n(292)](r+n(282))&&e.test(r+n(181))?Pr():r("0")}))()}();var Xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[or(115)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Qe(n){var t=or,e=function(n,t){var e=or;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(224)]];if(void 0!==r){var o=r[e(204)](n,t||e(245));if(typeof o!==e(122))return o;throw new TypeError(e(173))}return(t===e(234)?String:Number)(n)}(n,t(234));return typeof e===t(278)?e:String(e)}function Je(n,t,e){var r=or;return(t=Qe(t))in n?Object[r(187)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function nr(n,t){var e=or,r=Object[e(269)](n);if(Object[e(116)]){var o=Object[e(116)](n);t&&(o=o[e(275)]((function(t){return Object[e(283)](n,t).enumerable}))),r[e(199)].apply(r,o)}return r}function tr(n){for(var t=or,e=1;e<arguments[t(179)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(t){Je(n,t,r[t])})):Object[t(210)]?Object[t(168)](n,Object[t(210)](r)):nr(Object(r))[t(140)]((function(e){Object[t(187)](n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function er(n,t){var e=or;if(null==n)return{};var r,o,i=function(n,t){var e=or;if(null==n)return{};var r,o,i={},a=Object[e(269)](n);for(o=0;o<a[e(179)];o++)r=a[o],t.indexOf(r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(116)]){var a=Object[e(116)](n);for(o=0;o<a[e(179)];o++)r=a[o],t.indexOf(r)>=0||Object[e(263)][e(158)][e(204)](n,r)&&(i[r]=n[r])}return i}function rr(n,t){var e=or;(null==t||t>n[e(179)])&&(t=n[e(179)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function or(n,t){var e=lr();return(or=function(n,t){return e[n-=114]})(n,t)}function ir(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=or,r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol[e(134)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r[e(204)](n)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a.call(r))[e(150)])&&(s.push(o[e(201)]),s[e(179)]!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=or;if(n){if(typeof n===e(234))return rr(n,t);var r=Object[e(263)][e(212)][e(204)](n)[e(221)](8,-1);return r===e(172)&&n.constructor&&(r=n[e(153)][e(256)]),r===e(175)||r===e(178)?Array[e(290)](n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(292)](r)?rr(n,t):void 0}}(n,t)||function(){throw new TypeError(or(211))}()}function ar(n,t){for(var e=or,r=0;r<t[e(179)];r++){var o=t[r];o.enumerable=o[e(161)]||!1,o[e(291)]=!0,e(201)in o&&(o[e(255)]=!0),Object[e(187)](n,Qe(o.key),o)}}function cr(n){if(void 0===n)throw new ReferenceError(or(287));return n}function sr(n,t){var e=or;return(sr=Object[e(160)]?Object[e(160)][e(297)]():function(n,t){return n.__proto__=t,n})(n,t)}function ur(n){var t=or;return(ur=Object.setPrototypeOf?Object[t(197)][t(297)]():function(n){var e=t;return n[e(277)]||Object[e(197)](n)})(n)}function lr(){var n=["\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ","__proto__","symbol","void ","\n    vec3 totalEmissiveRadiance = ","RawShaderMaterial","chain","getOwnPropertyDescriptor","construct","2043uittbj","clearcoatRoughness","this hasn't been initialised - super() hasn't been called","function"," - (dot(","from","configurable","test","MeshBasicMaterial","35431PnOeHZ","positionRaw",'" is required to use output "',"bind","Cannot call a class as a function","undefined","\n    gl_PointSize = ","trace","pointSize","\n    gl_Position = ","fragColor","isAlreadyExtended","lastIndexOf","exception","indexOf","update","\n    varying mat4 csm_internal_vModelViewMatrix;\n","apply","getOwnPropertySymbols",", 1.0 );\n  ","_getCacheHash","warn","MeshToonMaterial","_patchShader","object","lights_physical_fragment","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","onBeforeCompile","1LWrFAW","\n    vec3 objectNormal = ","\\$&","assign","join","_generateMaterial","_getPatchMapForMaterial","\n            \n            void main() {\n          ","iterator","diffuse","emissive","#define IS_","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                "," is not available in ","forEach","csm_Clearcoat","function *\\( *\\)","MeshMatcapMaterial","console",";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ","uniforms","PointsMaterial","stateObject","position","done","13420eMbxIH","csm_Emissive","constructor",'{}.constructor("return this")( )',"get","clearcoatNormal","create","propertyIsEnumerable","MeshNormalMaterial","setPrototypeOf","enumerable","\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ","\n    \n","gger","MeshPhysicalMaterial","void main()","concat","defineProperties","MeshLambertMaterial","ShaderChunk","csm_Roughness","Object","@@toPrimitive must return a primitive value.","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","Map","info","csm_FragColor","Set","length","substring","input","csm_main_","Super expression must either be null or a function","csm_AO","instanceID","\n    gl_FragColor = ","defineProperty","counter","vertexShader","#define IS_UNKNOWN;\n","MeshPhongMaterial","roughness","needsUpdate","8SObmHw","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","3140683XYOwAs","getPrototypeOf","patchMap","push","set","value","bump","replace","call","message","// #_CSM_#","includes",'CSM: Property "',";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","getOwnPropertyDescriptors","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","toString","baseMaterial","\n    #include <color_fragment>\n    diffuseColor = ","_getMaterialDefine","cacheHash","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","silent","type","error","slice","csm_ClearcoatNormal","trim","toPrimitive","table","\n    #include <dithering_fragment>\n    gl_FragColor  = ","();\n              // #_CSM_#\n          ","CSM: ","fragmentShader","2232aIGVbc","();\n            // #_CSM_#\n          ","metalness","2049958EBpqxM","string","while (true) {}","\n    vec4 csm_internal_positionUnprojected = ","csm_PointSize","material.clearcoatRoughness = ","3719825NtroDf","void main() {",";\n  ","__csm","csm_Position",";\n    ","default","189858xOyytR","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\n            ","MeshStandardMaterial","7592uHmcMM","log","customProgramCacheKey","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","writable","name","clearcoat","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","cacheKey","entries","sham","\n    \n            ","prototype","9816JVCPwz","CustomShaderMaterial does not support RawShaderMaterial","debu","csm_PositionRaw","Derived constructors may only return object or undefined","keys","action","\n    vec3 transformed = ","clone","\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","depthAlpha","filter"];return(lr=function(){return n})()}function fr(n){var t=function(){var n=or;if(typeof Reflect===n(299)||!Reflect[n(284)])return!1;if(Reflect[n(284)][n(261)])return!1;if(typeof Proxy===n(288))return!0;try{return Boolean.prototype.valueOf[n(204)](Reflect[n(284)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=or,o=ur(n);if(t){var i=ur(this)[r(153)];e=Reflect[r(284)](o,arguments,i)}else e=o[r(115)](this,arguments);return function(n,t){var e=or;if(t&&(typeof t===e(122)||typeof t===e(288)))return t;if(void 0!==t)throw new TypeError(e(268));return cr(n)}(this,e)}}Xe(void 0,(function(){for(var n=or,t=function(){var n,t=or;try{n=Function("return (function() "+t(154)+");")()}catch(e){n=window}return n}(),e=t[n(144)]=t.console||{},r=[n(252),n(119),n(176),n(220),n(307),n(225),n(301)],o=0;o<r.length;o++){var i=Xe[n(153)][n(263)].bind(Xe),a=r[o],c=e[a]||i;i[n(277)]=Xe[n(297)](Xe),i[n(212)]=c.toString[n(297)](c),e[a]=i}}))();var pr,dr,hr,vr={diffuse:"csm_DiffuseColor",normal:"csm_Normal",roughness:Ye(171),metalness:"csm_Metalness",emissive:Ye(152),ao:Ye(184),bump:"csm_Bump",clearcoat:Ye(141),clearcoatRoughness:"csm_ClearcoatRoughness",clearcoatNormal:Ye(222),pointSize:Ye(237),fragColor:Ye(177),depthAlpha:"csm_DepthAlpha",position:Ye(243),positionRaw:Ye(267)},mr=(Je(pr={},"".concat(vr.position),"*"),Je(pr,"".concat(vr[Ye(295)]),"*"),Je(pr,"".concat(vr.normal),"*"),Je(pr,"".concat(vr.pointSize),[Ye(147)]),Je(pr,""[Ye(167)](vr[Ye(135)]),"*"),Je(pr,""[Ye(167)](vr.fragColor),"*"),Je(pr,""[Ye(167)](vr[Ye(136)]),[Ye(250),Ye(165)]),Je(pr,""[Ye(167)](vr[Ye(192)]),[Ye(250),Ye(165)]),Je(pr,"".concat(vr[Ye(232)]),["MeshStandardMaterial","MeshPhysicalMaterial"]),Je(pr,"".concat(vr.ao),[Ye(250),Ye(165),Ye(293),Ye(169),Ye(191),Ye(120)]),Je(pr,""[Ye(167)](vr[Ye(202)]),["MeshLambertMaterial",Ye(143),Ye(159),Ye(191),Ye(165),Ye(250),Ye(120),"ShadowMaterial"]),Je(pr,""[Ye(167)](vr[Ye(274)]),["MeshDepthMaterial"]),Je(pr,"".concat(vr.clearcoat),[Ye(165)]),Je(pr,""[Ye(167)](vr.clearcoatRoughness),[Ye(165)]),Je(pr,""[Ye(167)](vr.clearcoatNormal),[Ye(165)]),pr),gr={"#include <lights_physical_fragment>":D[Ye(170)][Ye(123)]},_r=(Je(dr={},""[Ye(167)](vr.normal),{"#include <beginnormal_vertex>":Ye(127)[Ye(167)](vr.normal,Ye(209))}),Je(dr,"".concat(vr[Ye(149)]),{"#include <begin_vertex>":Ye(271)[Ye(167)](vr[Ye(149)],Ye(241))}),Je(dr,""[Ye(167)](vr[Ye(295)]),{"#include <begin_vertex>":Ye(236)[Ye(167)](vr[Ye(295)],Ye(145))}),Je(dr,""[Ye(167)](vr[Ye(302)]),{"gl_PointSize = size;":Ye(300)[Ye(167)](vr[Ye(302)],Ye(244))}),Je(dr,""[Ye(167)](vr[Ye(135)]),{"#include <color_fragment>":Ye(214)[Ye(167)](vr[Ye(135)],Ye(241))}),Je(dr,""[Ye(167)](vr[Ye(304)]),{"#include <dithering_fragment>":Ye(226)[Ye(167)](vr.fragColor,";\n  ")}),Je(dr,"".concat(vr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Ye(280)[Ye(167)](vr[Ye(136)],Ye(244))}),Je(dr,""[Ye(167)](vr[Ye(192)]),{"#include <roughnessmap_fragment>":Ye(254).concat(vr[Ye(192)],Ye(244))}),Je(dr,""[Ye(167)](vr.metalness),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = ".concat(vr[Ye(232)],";\n    ")}),Je(dr,""[Ye(167)](vr.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - "[Ye(167)](vr.ao,Ye(244))}),Je(dr,"".concat(vr.bump),{"#include <normal_fragment_maps>":Ye(195).concat(vr[Ye(202)],Ye(289)).concat(vr[Ye(202)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),Je(dr,""[Ye(167)](vr[Ye(274)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ye(248)[Ye(167)](vr[Ye(274)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ye(217)[Ye(167)](vr[Ye(274)],Ye(244))}),Je(dr,"".concat(vr[Ye(257)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ye(167)](vr[Ye(257)],";")}),Je(dr,""[Ye(167)](vr[Ye(286)]),{"material.clearcoatRoughness = clearcoatRoughness;":Ye(238)[Ye(167)](vr[Ye(286)],";")}),Je(dr,"".concat(vr[Ye(156)]),{"#include <clearcoat_normal_fragment_begin>":"\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    "}),dr),yr=(Je(hr={},"".concat(vr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Ye(167)](vr.position,Ye(117))}),Je(hr,""[Ye(167)](vr[Ye(295)]),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":Ye(303).concat(vr.position,Ye(241))}),Je(hr,""[Ye(167)](vr[Ye(135)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(186).concat(vr[Ye(135)],Ye(241))}),Je(hr,""[Ye(167)](vr[Ye(304)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ye(186)[Ye(167)](vr[Ye(304)],Ye(241))}),hr),xr={clearcoat:[vr.clearcoat,vr[Ye(156)],vr[Ye(286)]]},br=Ye(273),Ir=Ye(114),wr=Ye(258),Sr=Ye(114),Mr=Ye(163),Rr=["baseMaterial",Ye(229),Ye(189),Ye(146),Ye(198),Ye(259),Ye(218)],Er=function(n,t,e){var r=Ye;return n.split(t)[r(130)](e)},Ar=function(n,t){var e,r,o=Ye;return new RegExp("\\b"[o(167)]((e=t,r=Ye,e[r(203)](/[-\/\\^$*+?.()|[\]{}]/g,r(128))),"\\b"))[o(292)](n)};function Tr(n){return n?n[Ye(203)](/\s/g,""):void 0}function Dr(n){return n[Ye(203)](/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var zr=function(n){var t=Ye;!function(n,t){var e=or;if(typeof t!==e(288)&&null!==t)throw new TypeError(e(183));n.prototype=Object[e(157)](t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(187)](n,e(263),{writable:!1}),t&&sr(n,t)}(c,$);var e,r,o,i,a=fr(c);function c(n){var t,e,r,o,i,s=or,u=n[s(213)],l=n.fragmentShader,f=n[s(189)],p=n[s(146)],d=n[s(198)],h=n.cacheKey,v=n.silent,m=er(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError(or(298))}(this,c),!function(n){var t=Ye;try{new n}catch(e){if(e[t(205)].indexOf("is not a constructor")>=0)return!1}return!0}(u)?(e=u,Object[s(129)](e,m)):e=new u(m),e[s(219)]===s(281))throw new Error(s(265));(function(n,t){var e=Ye;e(179),Object[e(129)](n,t);var r=Object[e(197)](t);Object[e(260)](Object[e(210)](r))[e(275)]((function(n){var t=e,r="function"==typeof n[1][t(155)],o=typeof n[1][t(200)]===t(288),i=typeof n[1][t(201)]===t(288),a="constructor"===n[0];return(r||o||i)&&!a}))[e(140)]((function(t){var r=e;typeof n[t[0]]!==r(288)&&Object[r(187)](n,t[0],t[1])}))})(cr(t=a.call(this)),e),t.__csm={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:W.generateUUID(),type:e[s(219)],isAlreadyExtended:(r=e[s(125)],o=Ye,i=r[o(212)]()[o(223)](),!(0===i.substring(i[o(308)]("{")+1,i.lastIndexOf("}"))[o(223)]().length)),cacheHash:"",silent:v},t[s(146)]=tr(tr({},t[s(146)]||{}),p||{});var g=t[s(242)],_=g[s(229)],y=g[s(189)],x=t.uniforms;return t[s(242)][s(216)]=t[s(118)](),t[s(131)](_,y,x),t}return e=c,r=[{key:t(309),value:function(){var n=t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this[n(146)]=e[n(146)]||this[n(146)],Object[n(129)](this[n(242)],e);var r=this.__csm,o=r[n(229)],i=r[n(189)],a=this[n(146)],c=this[n(118)]();this[n(242)][n(216)]=c,this._generateMaterial(o,i,a)}},{key:t(272),value:function(){var n=t,e={baseMaterial:this[n(242)].baseMaterial,fragmentShader:this.__csm[n(229)],vertexShader:this[n(242)].vertexShader,uniforms:this[n(146)],silent:this[n(242)].silent,patchMap:this[n(242)][n(198)],cacheKey:this[n(242)][n(259)]},r=new(this[n(153)])(e);return Object[n(129)](this,r),r}},{key:t(118),value:function(){var n=t,e=this[n(242)],r=e.fragmentShader,o=e[n(189)],i=this[n(146)],a=[Tr(r),Tr(o),i][n(275)]((function(n){return void 0!==n}));return a[n(179)]>0?An(a,{excludeValues:!0}):this[n(253)]()}},{key:t(131),value:function(n,e,r){var o=t,i=this;this[o(146)]=r||{},this[o(253)]=function(){var n=o;return i.__csm[n(216)]};var a=function(t){var r=o;try{var a=i[r(215)]();if(n){var c=i._patchShader(Dr(n),t.fragmentShader,!0);t.fragmentShader=a+c}if(e){var s=i._patchShader(Dr(e),t[r(189)]);t.vertexShader="#define IS_VERTEX;\n"+s,t[r(189)]=a+t.vertexShader}t[r(146)]=tr(tr({},t[r(146)]),i.uniforms),i[r(146)]=t.uniforms}catch(u){console[r(220)](u)}};if(this[o(242)][o(305)]){var c=this[o(125)];this[o(125)]=function(n,t){c(n,t),a(n)}}else this[o(125)]=a;this[o(193)]=!0}},{key:t(121),value:function(n,e,r){var o=t,i=this,a=e,c=tr(tr({},this[o(132)]()),this[o(242)][o(198)]);Object[o(260)](xr)[o(140)]((function(t){var e=o,r=ir(t,2),a=r[0],c=r[1].find((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error(e(208)[e(167)](a,e(296))[e(167)](c,'". Shader cannot compile.'))})),Object[o(260)](gr)[o(140)]((function(n){var t=ir(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object.keys(c)[o(140)]((function(t){var e=o;Object[e(269)](c[t])[e(140)]((function(r){var o=e,s=mr[t],u=i[o(242)][o(219)];if("*"===t||Ar(n,t)){if(!(!s||Array.isArray(s)&&s[o(207)](u)||"*"===s))throw new Error(o(228).concat(t,o(139))[o(167)](u,". Shader cannot compile."));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(182)+this[o(242)][o(185)][o(203)](/-/g,"_"),h=n[o(203)](/void\s+main\s*\(\s*\)/g,o(279)[o(167)](d,"()")),v=n[o(207)](o(166)),m=a[o(207)](o(206));return v&&(m&&this[o(242)].isAlreadyExtended?(a=a[o(203)](o(240),o(249).concat(h,o(133))),s=a,u="// #_CSM_#",l=o(249).concat(d,o(231)),p=s[(f=Ye)(306)](u),a=-1===p?s:s.substring(0,p)+l+s[f(180)](p+u.length)):a=a[o(203)]("void main() {",o(174)[o(167)](r?Sr:Ir,o(124))[o(167)](br,o(262))[o(167)](h,o(138))[o(167)]("\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n",o(276))[o(167)](r?Mr:wr,o(162)).concat(d,o(227)))),a}},{key:"_getMaterialDefine",value:function(){var n=t,e=this.__csm[n(219)];return e?n(137).concat(e.toUpperCase(),";\n"):n(190)}},{key:t(132),value:function(){var n=t;return"ShaderMaterial"===this.__csm[n(219)]?yr:_r}}],i=or,r&&ar(e.prototype,r),o&&ar(e,o),Object[i(187)](e,i(263),{writable:!1}),c}();function Pr(n){function t(n){var e=or;if(typeof n===e(234))return function(n){}[e(153)](e(235))[e(115)](e(188));1!==(""+n/n)[e(179)]||n%20==0?function(){return!0}[e(153)]("debu"+e(164)).call(e(270)):function(){return!1}[e(153)](e(266)+e(164))[e(115)](e(148)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Or=Cr;function Cr(n,t){const e=kr();return(Cr=function(n,t){return e[n-=451]})(n,t)}!function(n,t){const e=Cr,r=kr();for(;;)try{if(606399===parseInt(e(496))/1+parseInt(e(454))/2*(-parseInt(e(482))/3)+-parseInt(e(495))/4+parseInt(e(462))/5+parseInt(e(467))/6*(-parseInt(e(461))/7)+-parseInt(e(485))/8*(parseInt(e(491))/9)+parseInt(e(472))/10*(parseInt(e(465))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Cr(457)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function kr(){const n=["index","8zMLoBg","__proto__","roughness","init","while (true) {}","length","7134597mvUGFa",'{}.constructor("return this")( )',"return (function() ","\n\t\t\t","1565024ZPwzki","719048PePjBC","#ff00fc","primitive","constructor","gger","console","820RWZwXL","metalness","error","apply","string","clearcoat","call","533575ogpUeB","4754345umYhrA","exception","counter","13858361FyiTax","\n      ","72ZFJDKI","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","toString","10xDeLuF","info","color","test","stateObject","action","function *\\( *\\)","clearcoatRoughness","debu","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","1644LiAemh","chain"];return(kr=function(){return n})()}!function(){Fr(this,(function(){const n=Cr,t=new RegExp(n(478)),e=new RegExp(n(469),"i"),r=Nr(n(488));t[n(475)](r+n(483))&&e[n(475)](r+"input")?Nr():r("0")}))()}();const Br=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Br(void 0,(function(){const n=Cr;let t;try{t=Function(n(493)+n(492)+");")()}catch(o){t=window}const e=t[n(453)]=t.console||{},r=["log","warn",n(473),n(456),n(463),"table","trace"];for(let i=0;i<r[n(490)];i++){const t=Br.constructor.prototype[n(468)](Br),o=r[i],a=e[o]||t;t[n(486)]=Br[n(468)](Br),t[n(471)]=a.toString[n(468)](a),e[o]=t}}))();const jr=["object"],Ur=rn({__name:Or(484),props:{color:{default:Or(497)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:K,metalness:e[t(455)],roughness:e.roughness,clearcoat:e[t(459)],clearcoatRoughness:e[t(479)],color:e[t(474)],vertexShader:t(470),fragmentShader:t(494)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(466)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(481)},o=new zr(r);return dn((()=>{const n=t;o.color.setStyle(e[n(474)]),o[n(455)]=e[n(455)],o.roughness=e[n(487)],o.clearcoat=e[n(459)],o[n(479)]=e[n(479)]})),(n,e)=>{const r=t;return sn(),un(r(498),{object:en(o)},null,8,jr)}}});function Nr(n){function t(n){const e=Cr;if(typeof n===e(458))return function(n){}[e(451)](e(489))[e(457)](e(464));1!==(""+n/n)[e(490)]||n%20==0?function(){return!0}[e(451)](e(480)+e(452))[e(460)](e(477)):function(){return!1}[e(451)](e(480)+e(452))[e(457)](e(476)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Zr();;)try{if(422603===parseInt(e(468))/1*(parseInt(e(444))/2)+-parseInt(e(450))/3*(-parseInt(e(460))/4)+parseInt(e(452))/5+-parseInt(e(446))/6*(-parseInt(e(458))/7)+parseInt(e(445))/8+-parseInt(e(471))/9*(-parseInt(e(467))/10)+-parseInt(e(464))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Lr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Lr(this,(function(){var n=Gr,t=new RegExp(n(455)),e=new RegExp(n(447),"i"),r=Wr(n(457));t.test(r+n(454))&&e[n(474)](r+"input")?Wr():r("0")}))()}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(449)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Zr(){var n=["6vrTync","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","toString","apply","2091720kxuiGD","prototype","2057395DQEmxB","constructor","chain","function *\\( *\\)","gger","init","1373631dSinyz","length","4FMuKDc","counter","string","warn","21780264eDcDNx","stateObject","__proto__","11350uEpLQb","162824osBkjE","error","return (function() ","1179IiJtSC","bind","table","test","info",'{}.constructor("return this")( )',"debu","exception","console","4JgKOup","4986736qRkiXc"];return(Zr=function(){return n})()}function Gr(n,t){var e=Zr();return(Gr=function(n,t){return e[n-=440]})(n,t)}function Wr(n){function t(n){var e=Gr;if(typeof n===e(462))return function(n){}.constructor("while (true) {}").apply(e(461));1!==(""+n/n).length||n%20==0?function(){return!0}[e(453)](e(441)+e(456)).call("action"):function(){return!1}[e(453)](e(441)+e(456))[e(449)](e(465)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Hr(void 0,(function(){var n,t=Gr;try{n=Function(t(470)+t(440)+");")()}catch(s){n=window}for(var e=n.console=n[t(443)]||{},r=["log",t(463),t(475),t(469),t(442),t(473),"trace"],o=0;o<r[t(459)];o++){var i=Hr.constructor[t(451)][t(472)](Hr),a=r[o],c=e[a]||i;i[t(466)]=Hr[t(472)](Hr),i[t(448)]=c[t(448)].bind(c),e[a]=i}}))();export{$e as C,Ur as _,nt as a,lt as b,Mt as c,Pt as d,Lt as e,Jt as f,Le as g,Ae as h,gt as u};

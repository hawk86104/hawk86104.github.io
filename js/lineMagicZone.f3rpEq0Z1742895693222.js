import{P as t}from"./tweakpane.ivGeiIdz1742895693222.js";import{e,h as n,a as o,o as r}from"./@tresjs.xCsT8yve1742895693222.js";import{_ as i}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.TZOFwjHG1742895693222.js";import{_ as a}from"./three.DqHgeVY11742895693222.js";import{d as s,a5 as l,a3 as u,w as c,o as f,H as m,N as p,u as d,j as h,r as g,e as v,f as x,g as I,al as w,m as S}from"./@vue.C4dqouNn1742895693222.js";import"./postprocessing.vTwfsnPH1742895693222.js";import"./@vueuse.q8TRDI1e1742895693222.js";import"./all.three.HdzEZEmD1742895693222.js";import"./oimophysics.WhCxc1Ho1742895693222.js";const y=T;!function(t,e){const n=T,o=b();for(;;)try{if(913773===parseInt(n(254))/1*(parseInt(n(236))/2)+-parseInt(n(227))/3+parseInt(n(212))/4+parseInt(n(196))/5*(-parseInt(n(205))/6)+-parseInt(n(206))/7+-parseInt(n(229))/8+parseInt(n(241))/9)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const _=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function b(){const t=["apply","yRadius","30BduSns","12462688zoAqHy","toString","__proto__","\nvarying vec2 vMapUv;\nattribute float aIndex;\nattribute vec3 aNormal;\nuniform float uTime;\nuniform float uScale;\nuniform float uHeight;\nuniform sampler2D uPerlinTexture;\nvarying float vIndex;\nvarying float vSelfIndex;\nvarying float vCircleNum;\nfloat getStrength(float aIndex, float uTime, vec3 aNormal) {\n    float selfIndex = mod(aIndex, 720.0);\n    float circleNum = (aIndex - selfIndex) / 720.0;\n    vec3 pDir = normalize(aNormal);\n    float waveWidth = 90.0;\n    float totalLength = 720.0;\n    float modUtime = mod(uTime * 50.0, 720.0);\n    float dw = waveWidth * 0.5;\n    float smoothStart = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float smoothEnd = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex);\n    float strength = min(smoothStart, smoothEnd);\n    float isOver = step(720.0, modUtime + waveWidth);\n    float over = (modUtime + waveWidth - 720.0);\n    float isOverStep1 = (1.0 - step(dw, over)) * isOver;\n    float isOverStep2 = step(dw, over);\n    float overStep1Left = min(smoothstep(modUtime, modUtime + dw, selfIndex), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex)));\n    float overStep1Right = 1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0);\n    float overStep1 = max(overStep1Left, overStep1Right);\n    float overStep2Left = smoothstep(modUtime, modUtime + dw, selfIndex);\n    float overStep2Right = min(smoothstep(modUtime, modUtime + dw, selfIndex + 720.0), (1.0 - smoothstep(modUtime + waveWidth - dw, modUtime + waveWidth, selfIndex + 720.0)));\n    float overStep2 = max(overStep2Left, overStep2Right);\n    float os = isOverStep1 * overStep1 + overStep2 * isOverStep2;\n    strength = (1.0 - isOver) * strength + isOver * os;\n    return strength;\n}\nvoid main() {\n\tvMapUv = uv;\n\tfloat selfIndex = mod(aIndex, 720.0);\n\tfloat circleNum = (aIndex - selfIndex) / 720.0;\n\tvec3 pDir = normalize(aNormal);\n\tfloat noise = texture(uPerlinTexture, vec2((selfIndex / 720.0), mod(uTime * 0.1, 1.0))).r;\n\tfloat strength = getStrength(aIndex, uTime, aNormal);\n\tstrength += getStrength(aIndex, uTime + 10.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 20.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 30.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 40.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 50.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 60.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 70.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 80.0 + noise, aNormal);\n\tstrength += getStrength(aIndex, uTime + 90.0 + noise, aNormal);\n\tcsm_Position.x += pDir.x * strength * 0.5;\n\tcsm_Position.z += strength * circleNum * noise * uHeight;\n\tcsm_Position.y += pDir.z * strength * 0.5;\n\tvIndex = aIndex;\n\tcsm_PointSize = 0.01*uScale;\n}\n","scale","#409eff","6621500ndruSA","speed","prototype","array","xRadius","getPoints",'{}.constructor("return this")( )',"function *\\( *\\)","PointsMaterial","EllipseCurve","exception","constructor","\nvarying vec2 vMapUv;\nvarying float vIndex;\nuniform float uTime;\nuniform vec3 baseColor;\nuniform sampler2D uPerlinTexture;\nvoid main() {\n\tvec3 whiteColor = vec3( 1.0,1.0,1.0);\n\tfloat selfIndex=mod(vIndex,720.0);\n\tfloat circleNum=(vIndex - selfIndex)/720.0;\n\tvec3 finalColor=mix(baseColor,diffuse,circleNum/5.0);\n\tfinalColor*=1.0;\n\tcsm_DiffuseColor = vec4( finalColor, opacity );\n}\n","while (true) {}","aIndex","2111274YuziWL","baseMaterial","675056EIgVbk","table","alphaMap","getAttribute","position","string","counter","2ezJNVU","length","debu","Color","info","5870745fVkcZa","call","action","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","AdditiveBlending","input","TresBufferGeometry","init","BufferGeometry","baseColor","blending","TresPoints","1643147oRAZNi","aNormal","return (function() ","trace","TresGroup","map","setFromPoints","error","gger","chain","468530wzgaod","log","bind","color","uHeight","push","value"];return(b=function(){return t})()}!function(){_(this,(function(){const t=T,e=new RegExp(t(219)),n=new RegExp(t(245),"i"),o=M(t(249));e.test(o+t(195))&&n.test(o+t(247))?M():o("0")}))()}();const N=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[T(203)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function T(t,e){const n=b();return T=function(t,e){return n[t-=189]},T(t,e)}N(void 0,(function(){const t=T,e=function(){const t=T;let e;try{e=Function(t(256)+t(218)+");")()}catch(n){e=window}return e}(),n=e[t(244)]=e.console||{},o=[t(197),"warn",t(240),t(193),t(222),t(230),t(189)];for(let r=0;r<o.length;r++){const e=N[t(223)][t(214)].bind(N),i=o[r],a=n[i]||e;e[t(208)]=N[t(198)](N),e[t(207)]=a.toString[t(198)](a),n[i]=e}}))();const U=["rotateX"],P=[y(233),y(226),y(255)],z=y(209),j=y(224),C=s({__name:"lineMagicZone",props:{height:{default:1.6},speed:{default:1},color:{default:"#90ee90"}},async setup(t){const r=y;let i,s;const g=l(),v=t,x=([i,s]=u((()=>o(["./plugins/basic/shine/image/round.png","./plugins/digitalCity/image/noise/noisePerlin.png"]))),i=await i,s(),i),I=new(a[r(221)])(0,0,8,8,0,2*Math.PI,!1,0),w=[];for(let e=0;e<5;e++)w[r(201)](...I[r(217)](719)),I[r(216)]+=.2,I[r(204)]+=.2;const S=new Float32Array(w.map(((t,e)=>e))),_=(new(a[r(250)]))[r(192)](w)[r(232)](r(233))[r(215)],b=new Float32Array(_.length);for(let e=0;e<_[r(237)]/3;e++){const t=3*e;_[t+1]+=.15*Math.floor(e/720);const n=e%720*3,o=3*(e%720+2880);b[t]=_[o]-_[n],b[t+1]=_[o+1]-_[n+1],b[t+2]=_[o+2]-_[n+2]}const N={uTime:{value:0},uScale:{value:g[r(210)]?g.scale:1},uHeight:{value:v.height},uPerlinTexture:{value:x[1]},baseColor:{value:new(a[r(239)])(v[r(199)])}},{onLoop:T}=e();return T((()=>{const t=r;N.uTime[t(202)]+=.01*v[t(213)]})),c((()=>[v.color,g[r(210)],v.height]),(([t,e,n])=>{const o=r;N[o(251)].value.set(t),N.uScale[o(202)]=e,N[o(200)][o(202)]=n})),(t,e)=>{const o=r;return f(),m(o(190),null,[p(o(253),{rotateX:-Math.PI/2,scale:.1},[p(o(248),{position:[d(_),3],aIndex:[d(S),1],aNormal:[d(b),3]},null,8,P),h(d(n),{baseMaterial:a[o(220)],vertexShader:z,fragmentShader:j,uniforms:N,map:d(x)[0],alphaMap:d(x)[0],transparent:"",depthWrite:!1,blending:a[o(246)],color:o(211),size:.1},null,8,[o(228),o(191),o(231),o(252)])],8,U)])}}});function M(t){function e(t){const n=T;if(typeof t===n(234))return function(t){}[n(223)](n(225))[n(203)](n(235));1!==(""+t/t).length||t%20==0?function(){return!0}[n(223)](n(238)+n(194))[n(242)](n(243)):function(){return!1}[n(223)](n(238)+"gger")[n(203)]("stateObject"),e(++t)}try{if(t)return e;e(0)}catch(n){}}const W=O;function A(){const t=["prototype","TresCanvas","gger","init","warn","input","__proto__","307441uMcLpJ","3004OBvKiF","11226770xfhkGq","while (true) {}","chain","debu","132XImfzY","834952PslNSQ","constructor","toString","call","color","scale","9fjfxzu","123vrMnyE","function *\\( *\\)","log","exception",'{}.constructor("return this")( )',"height","console","counter","233888lnBcks","string","table","37885FEEJYy","3826760dfmsUF","stateObject","TresPerspectiveCamera","speed","bind","info","trace","test","#201919","addBinding","apply","length","lineMagicZone","return (function() ","#ff0000"];return(A=function(){return t})()}!function(t,e){const n=O,o=A();for(;;)try{if(314059===parseInt(n(246))/1+parseInt(n(253))/2+parseInt(n(260))/3*(-parseInt(n(247))/4)+-parseInt(n(223))/5*(-parseInt(n(252))/6)+parseInt(n(224))/7+-parseInt(n(220))/8*(-parseInt(n(259))/9)+-parseInt(n(248))/10)break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const D=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[O(234)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();!function(){D(this,(function(){const t=O,e=new RegExp(t(213)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),o=L(t(242));e.test(o+t(250))&&n[t(231)](o+t(244))?L():o("0")}))()}();const E=function(){let t=!0;return function(e,n){const o=t?function(){if(n){const t=n[O(234)](e,arguments);return n=null,t}}:function(){};return t=!1,o}}();function O(t,e){const n=A();return O=function(t,e){return n[t-=213]},O(t,e)}E(void 0,(function(){const t=O,e=function(){const t=O;let e;try{e=Function(t(237)+t(216)+");")()}catch(n){e=window}return e}(),n=e[t(218)]=e[t(218)]||{},o=[t(214),t(243),t(229),"error",t(215),t(222),t(230)];for(let r=0;r<o[t(235)];r++){const e=E[t(254)][t(239)][t(228)](E),i=o[r],a=n[i]||e;e[t(245)]=E.bind(E),e.toString=a[t(255)][t(228)](a),n[i]=e}}))();const R=s({__name:W(236),setup(e){const n=W,o=g({reflectivity:.1,showGridHelper:!0,scale:1}),a=g({color:n(238),scale:1.8,height:2.4,speed:1}),s=new t;return s[n(233)](a,n(257),{label:"颜色"}),s[n(233)](a,n(258),{label:"大小",min:.1,max:3,step:.1}),s[n(233)](a,n(217),{label:"高度",min:.1,max:3,step:.1}),s[n(233)](a,n(227),{label:"速度",min:-5,max:5,step:.1}),(t,e)=>{const s=n,l=v(s(240));return f(),x(l,{clearColor:s(232),"window-size":"",antialias:"",alpha:"",logarithmicDepthBuffer:""},{default:I((()=>[e[0]||(e[0]=p(s(226),{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(d(r),{enableDamping:""}),e[1]||(e[1]=p("TresAmbientLight",{intensity:2},null,-1)),(f(),x(w,null,{default:I((()=>[h(C,S({position:[3,0,0]},a),null,16)])),_:1})),(f(),x(w,null,{default:I((()=>[h(C,{position:[-3,0,0],scale:1.6,height:3})])),_:1})),(f(),x(w,null,{default:I((()=>[h(i,S({position:[0,-.5,0]},o),null,16)])),_:1}))])),_:1})}}});function L(t){function e(t){const n=O;if(typeof t===n(221))return function(t){}.constructor(n(249)).apply(n(219));1!==(""+t/t)[n(235)]||t%20==0?function(){return!0}[n(254)](n(251)+n(241))[n(256)]("action"):function(){return!1}[n(254)]("debu"+n(241)).apply(n(225)),e(++t)}try{if(t)return e;e(0)}catch(n){}}export{R as default};

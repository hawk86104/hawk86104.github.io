import{_ as e,K as s}from"./@tresjs.B_KjVy0E1761276103973.js";import{P as o}from"./tweakpane.CqZAnw7f1761276103973.js";import{_ as t}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.DxF4X4Ny1761276103973.js";import{B as r,Q as a}from"./three.quarks.CNd6yRqe1761276103973.js";import{d as i,w as n,G as l,o as p,I as c,u as m,r as u,g as f,b as d,e as j,h,a9 as g,aa as w,m as y}from"./@vue.CKlgtJke1761276103973.js";import{f as v,k as _,H as T}from"./three.Bhn4-0ry1761276103973.js";import{C as b,a as C}from"./quarks.core.C3xH0YPO1761276103973.js";import"./postprocessing.CeTFUAN_1761276103973.js";import"./@vueuse.wtfleElW1761276103973.js";import"./dither.glsl.tNAdkJUa1761276103973.js";import"./Reflector.CqqiY7381761276103973.js";import"./OimoPhysicsBuffer.BXemNmye1761276103973.js";import"./oimophysics.CfVKSiAm1761276103973.js";import"./vite-plugin-qiankun.B06WoCqG1761276103973.js";import"./utils.CNife3_q1761276103973.js";const M=["object"],B=["object","position","scale","rotation"],G=i({__name:"cartoonMagic",props:{color:{default:"#00ffff"},position:{default:[0,0,0]},scale:{default:1},rotation:{default:[0,0,0]}},setup(s){const o=s,t=e=>{const s=new _(o.color),t=new T(s.r,s.g,s.b,e);return new C(t)},i=new r,u=new a;u.setCrossOrigin("");const f=new v;u.load("./plugins/floor/json/CartoonMagicZone2.json",e=>{e.traverse(e=>{if("ParticleEmitter"===e.type){"BasicZoneRedEmitter"===e.name&&e.rotation.set(Math.PI/2,0,0);const s=e.system;-.25===s.startSpeed.value&&(s.startSpeed=new b(-.5)),s.startColor=t(s.startColor.color.w),i.addSystem(s)}}),"ParticleEmitter"===e.type&&i.addSystem(e.system),f.add(e)});const{onBeforeRender:d}=e();return d(({delta:e})=>{i.update(e)}),n(()=>[o.color],([e])=>{i.systemToBatchIndex.forEach((e,s)=>{s.startColor=t(s.startColor.color.w)})}),(e,s)=>(p(),l("TresGroup",null,[c("primitive",{object:m(f)},null,8,M),c("primitive",{object:m(i),position:e.position,scale:e.scale,rotation:e.rotation},null,8,B)]))}}),P=i({__name:"cartoonMagicZone",setup(e){const r=u({reflectivity:.1,showGridHelper:!0,scale:1}),a=u({color:"#ffffff",scale:1}),i=new o;return i.addBinding(a,"color",{label:"颜色"}),i.addBinding(a,"scale",{label:"大小",min:.1,max:3,step:.1}),(e,o)=>{const i=f("TresCanvas");return p(),d(i,{clearColor:"#201919","window-size":""},{default:j(()=>[o[0]||(o[0]=c("TresPerspectiveCamera",{position:[5,5,5],fov:45,near:.1,far:1e4},null,-1)),h(m(s),{enableDamping:""}),o[1]||(o[1]=c("TresAmbientLight",{intensity:2},null,-1)),h(G,g(w(a)),null,16),h(G,{color:"yellow",scale:1,position:[3,0,0]}),o[2]||(o[2]=c("TresMesh",{position:[3,0,0]},[c("TresSphereGeometry",{args:[1,32,32]}),c("TresMeshBasicMaterial",{color:"yellow"})],-1)),o[3]||(o[3]=c("TresMesh",{position:[0,0,0]},[c("TresSphereGeometry",{args:[1,32,32]}),c("TresMeshBasicMaterial",{color:"white"})],-1)),h(t,y({position:[0,-.5,0]},r),null,16)]),_:1})}}});export{P as default};

import{u as e}from"./colorList.DbCLsRg71763540743861.js";import{r as a,a as l}from"./rawData.lQ4T1IdU1763540743861.js";import{P as t}from"./tweakpane.CqZAnw7f1763540743861.js";import{u as s}from"./rawData.Bm5IktqG1763540743861.js";import{g as n}from"./utils.DaFRRlKp1763540743861.js";import{d as r,a as i,c as o,w as u,H as m,o as d,J as p,I as v,ac as c,ao as x,u as b}from"./@vue.Co_gxueH1763540743861.js";import{bL as f,be as g,af as h,b1 as w,aE as y,aG as T,r as B,bK as j,au as k}from"./three.rXKzP9fQ1763540743861.js";const E=["scale","visible"],S=["object"],F=r({__name:"scene",setup(r){const F=s(),z=e(),A=new f(new g(new h(1,1,1)),new w({color:10066329})),G=i(1),R=i(F.yExtent/F.xExtent),_=i(F.zExtent/F.xExtent),C=o(()=>!(G.value<=.01&&G.value>=-.01)&&(!(R.value<=.01&&R.value>=-.01)&&!(_.value<=.01&&_.value>=-.01))),D=new y(F.byteArray,F.xExtent,F.yExtent,F.zExtent);D.format=T,D.type=F.getThreeType(),D.minFilter=B,D.magFilter=B,D.wrapS=j,D.wrapT=j,D.wrapR=j,D.needsUpdate=!0;const I={uniforms:{dataTexture:{value:D},colorTexture:{value:z.updateTransferFunction()},samplingRate:{value:1},threshold:{value:.5},alphaScale:{value:1},invertColor:{value:!1},composeType:{value:1}},vertexShader:l,fragmentShader:a,side:k,transparent:!0},L=i(!0),M=new t;return M.addBinding(G,"value",{label:"x轴缩放",min:-2,max:2,step:.01}),M.addBinding(R,"value",{label:"y轴缩放",min:-2,max:2,step:.01}),M.addBinding(_,"value",{label:"z轴缩放",min:-2,max:2,step:.01}),M.addBlade({view:"list",label:"模式",options:[{text:"maximumIntensity",value:1},{text:"thresholding",value:2},{text:"emissionAbsorption",value:3}],value:I.uniforms.composeType.value}).on("change",e=>{I.uniforms.composeType.value=e.value}),M.addBinding(I.uniforms.samplingRate,"value",{label:"体积采样率",min:0,max:4,step:.01}),M.addBinding(I.uniforms.threshold,"value",{label:"体绘制的阈值",min:0,max:1,step:.01}),M.addBinding(I.uniforms.alphaScale,"value",{label:"透明度",min:0,max:1,step:.01}),M.addBinding(I.uniforms.invertColor,"value",{label:"是否反色"}),M.addBinding(L,"value",{label:"显示边框"}),M.addBlade({view:"separator"}),M.addButton({title:"清空体数据"}).on("click",()=>{F.byteArray=null,M.dispose()}),M.addButton({title:"下载体数据"}).on("click",()=>{n(F)}),u(()=>z.colorsStops,()=>{I.uniforms.colorTexture.value=z.updateTransferFunction()},{deep:!0,immediate:!0}),(e,a)=>(d(),m("TresGroup",null,[p("TresMesh",{scale:[G.value,R.value,_.value],visible:C.value},[a[0]||(a[0]=p("TresBoxGeometry",{args:[1,1,1]},null,-1)),p("TresShaderMaterial",c(x(I)),null,16),L.value?(d(),m("primitive",{key:0,object:b(A)},null,8,S)):v("",!0)],8,E)]))}});export{F as _};

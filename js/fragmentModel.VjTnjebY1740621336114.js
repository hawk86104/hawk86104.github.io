import{e as n,D as t,a as o,o as e}from"./@tresjs.Td0X-dew1740621336114.js";import{_ as r,C as a,cB as s,ai as i}from"./three.sXv6UbbL1740621336114.js";import{P as c}from"./tweakpane.yDiyAAkA1740621336114.js";import{d as u,a3 as l,r as p,b as f,w as m,o as v,H as g,N as x,aj as d,ak as y,u as w,e as b,f as h,g as I,j as C,al as _}from"./@vue.NRI7TcgI1740621336114.js";import"./@vueuse.cgJUSr_21740621336114.js";const P=N;function z(){const n=["6135792QczeNy","Vector3","clone","translate","Mesh","stateObject","info","uniforms","function *\\( *\\)","toPosition","2gVbBpS","479633jatAEm","__proto__","normal","log","string","count","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","3857232qJilwZ","trace","BufferAttribute","TresMesh","error","165boDcPx","toString","onLoop","m1Color","rotateY",'{}.constructor("return this")( )',"sin","random","TresShaderMaterial","constructor","u_progress","geometry","console","traverse","debu","while (true) {}","children","tangent","set","apply","position","value","divideScalar","m2Color","./draco/","bind","action","rotateX","fragmentModelCom","array","1608pDaBgK","addBinding","aRandom","6279070oHfAfI","test","9TjNtkP","push","14545SVHWGt","setAttribute","refresh","table","chain","toNonIndexed","1787410KEZgsB","prototype","deleteAttribute","1392780SmJOtM","warn","aCenter","attributes","#bcd4ff","length","input","scene","变化量","counter","6rYApjL","#ffc0fa"];return(z=function(){return n})()}!function(n,t){const o=N,e=z();for(;;)try{if(945327===-parseInt(o(246))/1*(parseInt(o(271))/2)+parseInt(o(279))/3+parseInt(o(233))/4*(parseInt(o(240))/5)+-parseInt(o(259))/6*(parseInt(o(272))/7)+parseInt(o(261))/8*(-parseInt(o(238))/9)+-parseInt(o(236))/10+parseInt(o(284))/11*(parseInt(o(249))/12))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const A=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[N(222)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){A(this,(function(){const n=N,t=new RegExp(n(269)),o=new RegExp(n(278),"i"),e=V("init");t[n(237)](e+n(244))&&o[n(237)](e+n(255))?V():e("0")}))()}();const M=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();M(void 0,(function(){const n=N;let t;try{t=Function("return (function() "+n(208)+");")()}catch(r){t=window}const o=t[n(215)]=t[n(215)]||{},e=[n(275),n(250),n(267),n(283),"exception",n(243),n(280)];for(let a=0;a<e[n(254)];a++){const t=M[n(212)][n(247)][n(228)](M),r=e[a],s=o[r]||t;t[n(273)]=M[n(228)](M),t[n(285)]=s[n(285)][n(228)](s),o[r]=t}}))();const j=["geometry"];function N(n,t){const o=z();return(N=function(n,t){return o[n-=208]})(n,t)}const D=u({__name:P(231),async setup(e){const i=P;let u,b;const h=n=>{const t=N,o=[];return n[t(216)]((n=>{const e=t;n instanceof r[e(265)]&&(n[e(214)][e(248)]("uv"),n[e(214)][e(248)](e(220)),o[e(239)](n[e(214)]))})),s(o)},I=h(([u,b]=l((()=>t("https://opensource-1314935952.cos.ap-nanjing.myqcloud.com/model/eCommerce/guanYu.glb",{draco:!0,decoderPath:i(227)}))),u=await u,b(),u).scene[i(219)][0]);I[i(230)](Math.PI/2),I[i(264)](0,-.9,0);const C=I[i(263)]().toNonIndexed(),_=h(([u,b]=l((()=>t("./plugins/industry4/model/modelDraco.glb",{draco:!0,decoderPath:"./draco/"}))),u=await u,b(),u)[i(256)][i(219)][0]);_.rotateX(-Math.PI/2),_[i(288)](Math.PI/3);const z=_[i(263)]()[i(245)](),A=C[i(252)][i(223)][i(232)],M=C[i(252)][i(223)][i(277)],D=z[i(252)][i(223)][i(232)],V=z[i(252)][i(274)][i(232)],R=z.attributes[i(223)][i(277)],E=new Float32Array(M),S=new Float32Array(3*(M+2)),Z=new Float32Array(3*(M+2)),k=new Float32Array(3*(M+2));for(let n=0;n<M;n+=3){const t=1*Math[i(210)](),o=n%R;E[n]=t,E[n+1]=t,E[n+2]=t;const e=3*n,a=A[e],s=A[e+1],c=A[e+2],u=A[e+3],l=A[e+4],p=A[e+5],f=A[e+6],m=A[e+7],v=A[e+8],g=new(r[i(262)])(a+u+f,s+l+m,c+p+v)[i(225)](3);S.set([g.x,g.y,g.z],3*n),S[i(221)]([g.x,g.y,g.z],3*(n+1)),S.set([g.x,g.y,g.z],3*(n+2));const x=(n,t,o)=>{const e=i,r=3*o;for(let a=0;a<3;a++){const s=r+3*a;t[e(221)]([n[s],n[s+1],n[s+2]],3*(o+a))}};x(D,Z,o),x(V,k,o)}C[i(241)](i(235),new(r[i(281)])(E,1)),C.setAttribute(i(251),new(r[i(281)])(S,3)),C[i(241)](i(270),new(r[i(281)])(Z,3)),C.setAttribute("toNormal",new(r[i(281)])(k,3)),console[i(275)](C[i(252)]);const F=([u,b]=l((()=>o(["./plugins/visualArts/image/fragment512px.png"]))),u=await u,b(),u),B={uniforms:{u_progress:{value:-.1},matcap1:{value:F},m1Color:{type:"v3",value:new a(i(260))},matcap2:{value:F},m2Color:{type:"v3",value:new a("#bcd4ff")}},vertexShader:"varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nattribute vec3 aCenter;\nattribute vec3 toPosition;\nattribute vec3 toNormal;\nattribute float aRandom;\n\nuniform float u_progress;\n\n#include <common>\n\nmat4 rotation3d(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat4(\n      oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,\n      oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,\n      oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0,\n      oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s,\n      oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n  vUv = uv;\n\n  float progress = u_progress;\n  float sinProgress = sin(progress * PI);\n\n  vec3 pos = mix(position, toPosition, progress);\n  vec3 nor = mix(normal, toNormal, progress);\n\n  vNormal = normalMatrix * normalize(nor);\n\n  float prog = ((pos.y + 1.) / 2.) * 1.1;\n\n  float locprog = clamp((sinProgress - 0.9 * prog) / 0.2, 0., 1.);\n\n  vec3 transform = pos - aCenter;\n\n  transform += 3. * aRandom * nor * locprog;\n\n  transform *= (1.0 - locprog);\n\n  transform += aCenter;\n\n  mat4 rotation = rotation3d(vec3(0., 1., 0.), aRandom * (locprog)*PI * 3.);\n\n  transform = (rotation * vec4(transform, 1.)).xyz;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(transform, 1.0);\n\n  gl_Position = projectionMatrix * modelViewPosition;\n\n  vViewPosition = -modelViewPosition.xyz;\n}",fragmentShader:"varying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vViewPosition;\nuniform sampler2D matcap;\nuniform sampler2D matcap2;\nuniform float u_progress;\nuniform vec3 m1Color;\nuniform vec3 m2Color;\n\nvoid main() {\n  vec3 viewDir = normalize(vViewPosition);\n  vec3 x = normalize(vec3(viewDir.z, 0.0, -viewDir.x));\n  vec3 y = cross(viewDir, x);\n  vec2 uv = vec2(dot(x, vNormal), dot(y, vNormal)) * 0.495 + 0.5;\n\n  float progress = abs(sin(u_progress));\n\n  vec3 matcapColor = texture2D(matcap, uv).rgb;\n  matcapColor = mix(matcapColor, m1Color, 0.5);\n  vec3 matcap2Color = texture2D(matcap2, uv).rgb;\n  matcap2Color = mix(matcap2Color, m2Color, 0.5);\n\n  vec3 color = vec3(matcapColor);\n  color = mix(color, matcap2Color, progress);\n\n  gl_FragColor = vec4(color, 1.0);\n}"},T=p({c1:i(260),c2:i(253)}),J=f(.5),K=new c({title:"参数"});return K[i(234)](B[i(268)][i(213)],i(224),{label:i(257),min:-.1,max:1,step:.001}).disabled=!0,K[i(234)](T,"c1",{label:"颜色1st"}),K[i(234)](T,"c2",{label:"颜色2rd"}),K[i(234)](J,"value",{label:"速度",min:.001,max:1,step:.001}),m(T,(n=>{const t=i;B[t(268)][t(287)][t(224)].set(n.c1),B[t(268)][t(226)].value[t(221)](n.c2)}),{deep:!0}),n()[i(286)]((({elapsed:n})=>{const t=i;B.uniforms.u_progress[t(224)]=(Math[t(209)](n*J[t(224)])+1)/2,K[t(242)]()})),(n,t)=>{const o=i;return v(),g(o(282),{geometry:w(C)},[x(o(211),d(y(B)),null,16)],8,j)}}});function V(n){function t(n){const o=N;if(typeof n===o(276))return function(n){}[o(212)](o(218)).apply(o(258));1!==(""+n/n)[o(254)]||n%20==0?function(){return!0}[o(212)]("debugger").call(o(229)):function(){return!1}.constructor(o(217)+"gger")[o(222)](o(266)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const R=F;function E(){const n=["1110314tXEkwk","22cJNnNA","constructor","54138CHPEJY","272256uvXNXd","info","test","log","bind","64wqicZY","prototype","TresCanvas","toString","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","4307219xWoVfK","exception","return (function() ","init","debu","115KxibPy","length","console","function *\\( *\\)","545590abcRIO","apply","fragmentModel","warn","#000000","action","3EDVMom","chain","475236MJgDKn","string","gger","input","293409xtRrqW","TresAmbientLight","TresPerspectiveCamera","trace"];return(E=function(){return n})()}!function(n,t){const o=F,e=E();for(;;)try{if(507064===parseInt(o(170))/1+parseInt(o(166))/2*(-parseInt(o(156))/3)+parseInt(o(158))/4+-parseInt(o(146))/5*(-parseInt(o(169))/6)+parseInt(o(141))/7+parseInt(o(136))/8*(-parseInt(o(162))/9)+parseInt(o(150))/10*(parseInt(o(167))/11))break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const S=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[F(151)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){S(this,(function(){const n=F,t=new RegExp(n(149)),o=new RegExp(n(140),"i"),e=B(n(144));t[n(172)](e+n(157))&&o[n(172)](e+n(161))?B():e("0")}))()}();const Z=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[F(151)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();Z(void 0,(function(){const n=F,t=function(){const n=F;let t;try{t=Function(n(143)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t[n(148)]=t[n(148)]||{},e=[n(134),n(153),n(171),"error",n(142),"table",n(165)];for(let r=0;r<e[n(147)];r++){const t=Z[n(168)][n(137)][n(135)](Z),a=e[r],s=o[a]||t;t.__proto__=Z[n(135)](Z),t[n(139)]=s[n(139)][n(135)](s),o[a]=t}}))();const k=u({__name:R(152),setup(n){const t=R,o=p({enableDamping:!0,enableZoom:!0,autoRotate:!0,enablePan:!0,enableRotate:!0}),r={clearColor:t(154),windowSize:!0,toneMapping:i,toneMappingExposure:.8};return(n,a)=>{const s=t,i=b(s(138));return v(),h(i,d(y(r)),{default:I((()=>[a[0]||(a[0]=x(s(164),{position:[0,2,8],fov:45,near:.1,far:1e3},null,-1)),C(w(e),d(y(o)),null,16),a[1]||(a[1]=x(s(163),{intensity:2},null,-1)),(v(),h(_,null,{default:I((()=>[C(D)])),_:1}))])),_:1},16)}}});function F(n,t){const o=E();return(F=function(n,t){return o[n-=134]})(n,t)}function B(n){function t(n){const o=F;if(typeof n===o(159))return function(n){}[o(168)]("while (true) {}")[o(151)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[o(168)]("debu"+o(160)).call(o(155)):function(){return!1}[o(168)](o(145)+o(160))[o(151)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{k as default};

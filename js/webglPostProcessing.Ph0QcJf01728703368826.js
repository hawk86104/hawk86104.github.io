import{i as n}from"./ice-utils.AgJ6OVZi1728703368826.js";import{_ as t}from"./gl-matrix.oVMHBNGj1728703368826.js";import{P as e}from"./tweakpane.yHWGBmom1728703368826.js";import{d as o,r,q as i,o as a,E as c,L as s,u}from"./@vue.JNsx1iN61728703368826.js";const f="\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nuniform mat4 uProjection;\nuniform mat4 uView;\nuniform mat4 uModel;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=uProjection*uView*uModel*vec4(aPosition,1.);\n}",l="\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\n\nvoid main()\n{\n    gl_FragColor=texture2D(textureSampler,texCoords);\n}",m=E;!function(n,t){const e=E,o=d();for(;;)try{if(491344===-parseInt(e(275))/1+parseInt(e(320))/2*(-parseInt(e(249))/3)+-parseInt(e(227))/4*(parseInt(e(307))/5)+parseInt(e(252))/6*(-parseInt(e(277))/7)+parseInt(e(279))/8+parseInt(e(235))/9*(parseInt(e(283))/10)+parseInt(e(321))/11*(parseInt(e(287))/12))break;o.push(o.shift())}catch(r){o.push(o.shift())}}();const x=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[E(239)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function d(){const n=["BYTES_PER_ELEMENT","SRC_ALPHA","canvas","blendFunc","call","getContext","change","src","string","enable","116yzVHUP","webgl","return (function() ","getElementById","drawElements","bindTexture","offset_right_top","TEXTURE_2D","844074tHYlrD","table","toString","bufferData","apply","slider","action","useProgram","value","COLOR_BUFFER_BIT","enableVertexAttribArray","trace","uniformMatrix4fv","offset_left_top","2527803hYuhnR","vertexAttribPointer","innerWidth","4650oUUVPZ","lookAt","mat4","TEXTURE_MAG_FILTER","bindBuffer","input","uniform1f","texImage2D","uProjection","debu","error","warn","logo-texture","constructor","getUniformLocation","FRAMEBUFFER","width","mixParam","NEAREST","BLEND","height",'{}.constructor("return this")( )',"webglPostProcessing","885810ZVNpKR","uModel","973DIxYBP","TEXTURE_WRAP_T","2467248INTQGj","offset_right_bottom","create","CLAMP_TO_EDGE","30rDrgCx","clearColor","log","FLOAT","1470396bcCAYq","clear","prototype","length","console","STATIC_DRAW","addBinding","ortho","info","bind","是否后处理","__proto__","querySelector","bindFramebuffer","ARRAY_BUFFER","addBlade","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","test","gger","hidden","101795AxCxDr","while (true) {}","uView","none","RGBA","createBuffer","TEXTURE_MIN_FILTER","texParameteri","UNSIGNED_BYTE","ELEMENT_ARRAY_BUFFER","TRIANGLES","offset_left_bottom","inline","2dCghHA","209KJWQux"];return(d=function(){return n})()}!function(){x(this,(function(){const n=E,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(303),"i"),o=T("init");t[n(304)](o+"chain")&&e[n(304)](o+n(257))?T():o("0")}))()}();const _=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[E(239)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();_(void 0,(function(){const n=E;let t;try{t=Function(n(229)+n(273)+");")()}catch(r){t=window}const e=t.console=t[n(291)]||{},o=[n(285),n(263),n(295),n(262),"exception",n(236),n(246)];for(let i=0;i<o[n(290)];i++){const t=_[n(265)][n(289)][n(296)](_),r=o[i],a=e[r]||t;t[n(298)]=_[n(296)](_),t[n(237)]=a[n(237)][n(296)](a),e[r]=t}}))();const g={id:"canvaswebgl"},p=[m(224)];function E(n,t){const e=d();return(E=function(n,t){return e[n-=219]})(n,t)}const A=o({__name:m(274),setup(o){const x=m;let d,_,E,A,T,b,R,y,h,v,C,P,F;const I=1,w=.71,B=.76,U=new e({title:"参数"}),D=r({hidden:!0,offset_right_top:{x:.5,y:.5},offset_right_bottom:{x:.5,y:.5},offset_left_top:{x:.5,y:.5},offset_left_bottom:{x:.5,y:.5},overlay:{r:1,g:0,b:.33}});U[x(302)]({view:x(240),label:"颜色",min:0,max:1,value:.5}).on("change",(n=>{const t=x;Y(),_[t(258)](P,n[t(243)])}));let S=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]);U.addBinding(D,x(306),{label:x(297)}),U[x(293)](D,x(233),{picker:x(319),x:{min:0,max:1},y:{min:0,max:1}}).on(x(223),(n=>{const t=x;S[0]=D[t(233)].x,S[1]=D.offset_right_top.y,Y()})),U.addBinding(D,"offset_right_bottom",{picker:x(319),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(223),(n=>{const t=x;S[5]=D[t(280)].x,S[6]=D[t(280)].y,Y()})),U[x(293)](D,x(318),{picker:x(319),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(223),(n=>{const t=x;S[10]=D[t(318)].x,S[11]=D.offset_left_bottom.y,Y()})),U.addBinding(D,x(248),{picker:x(319),x:{min:-1,max:1},y:{min:-1,max:1}}).on(x(223),(n=>{const t=x;S[15]=D[t(248)].x,S[16]=D[t(248)].y,Y()})),i((()=>{L()}));const L=function(){const t=x;d=document[t(299)]("#canvaswebgl"),d[t(268)]=window[t(251)],d[t(272)]=window.innerHeight,_=d[t(222)](t(228)),_&&(function(){const t=x,e=new Float32Array([.5,.5,0,1,1,.5,-.5,0,1,0,-.5,-.5,0,0,0,-.5,.5,0,0,1]),o=new Uint8Array([0,1,2,0,2,3]);A=G(e,o),E=n(_,f,l),h=_[t(266)](E,t(260)),v=_[t(266)](E,t(309)),C=_[t(266)](E,t(276)),F=j(document[t(230)](t(264)))}(),Y(),_[t(226)](_[t(271)]),_[t(220)](_[t(323)],_.ONE_MINUS_SRC_ALPHA),N())};function N(){const n=x;_[n(300)](_[n(267)],R),_.clearColor(I,w,B,1),_[n(288)](_[n(244)]),function(){const n=x;_[n(242)](E),_[n(256)](_[n(301)],A);const e=t[n(254)][n(281)]();t[n(254)][n(294)](e,0,d[n(268)],d.height,0,.1,100),_[n(247)](h,!1,e);const o=t[n(254)][n(281)]();t[n(254)][n(253)](o,[0,0,1],[0,0,0],[0,1,0]),_.uniformMatrix4fv(v,!1,o),M(F,600,600),M(F,400,400)}(),_.bindFramebuffer(_[n(267)],null),D[n(306)]&&(_[n(288)](_[n(244)]),_[n(284)](0,0,1,1),_[n(256)](_[n(301)],T),_[n(242)](b),_[n(232)](_.TEXTURE_2D,y)),_[n(231)](_[n(317)],6,_[n(315)],0),requestAnimationFrame(N)}function M(n,e,o){const r=x;let i=t[r(254)].create();t[r(254)].translate(i,i,[e,o,0]),t[r(254)].scale(i,i,[250,250,0]),_[r(247)](C,!1,i),_.bindTexture(_[r(234)],n),_[r(231)](_[r(317)],6,_.UNSIGNED_BYTE,0)}function Y(){const t=x,e=new Uint8Array([0,1,2,0,2,3]);T=G(S,e),b=n(_,"\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoords;\n\nvarying vec2 texCoords;\n\nvoid main()\n{\n    texCoords=aTexCoords;\n    gl_Position=vec4(aPosition,1.);\n}","\nprecision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D textureSampler;\nuniform float mixParam;\nvoid main()\n{\n    // float luminance=dot(texture2D(textureSampler,texCoords).rgb,vec3(.3451,.2118,.302));\n    vec4 color=mix(texture2D(textureSampler,texCoords),vec4(.1098,.6784,.1843,1.),mixParam);\n    gl_FragColor=color;\n}"),P=_.getUniformLocation(b,t(269)),_[t(266)](b,"color"),function(){const n=x;y=j(d),R=_.createFramebuffer(),_[n(300)](_[n(267)],R),_.framebufferTexture2D(_[n(267)],_.COLOR_ATTACHMENT0,_[n(234)],y,0),_[n(300)](_[n(267)],null)}()}function j(n){const t=x,e=_.createTexture();return _[t(232)](_[t(234)],e),n instanceof HTMLImageElement?_[t(259)](_[t(234)],0,_[t(311)],_.RGBA,_[t(315)],n):_[t(259)](_[t(234)],0,_.RGBA,n[t(268)],n[t(272)],0,_[t(311)],_[t(315)],null),_[t(314)](_[t(234)],_[t(313)],_[t(270)]),_[t(314)](_[t(234)],_[t(255)],_[t(270)]),_[t(314)](_[t(234)],_.TEXTURE_WRAP_S,_[t(282)]),_[t(314)](_[t(234)],_[t(278)],_[t(282)]),e}function G(n,t){const e=x,o=_[e(312)]();_[e(256)](_[e(301)],o),_[e(238)](_.ARRAY_BUFFER,n,_[e(292)]);const r=3*Float32Array[e(322)]+2*Float32Array[e(322)];_[e(250)](0,3,_.FLOAT,!1,r,0),_.enableVertexAttribArray(0),_[e(250)](1,2,_[e(286)],!1,r,3*Float32Array.BYTES_PER_ELEMENT),_[e(245)](1);const i=_.createBuffer();return _.bindBuffer(_[e(316)],i),_[e(238)](_[e(316)],t,_.STATIC_DRAW),_[e(256)](_[e(301)],null),o}return(n,t)=>{const e=x;return a(),c(e(219),g,[s("img",{id:e(264),src:u("./")+"/plugins/postProcessing/image/logo.png",style:{display:e(310)}},null,8,p)])}}});function T(n){function t(n){const e=E;if(typeof n===e(225))return function(n){}[e(265)](e(308))[e(239)]("counter");1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}.constructor(e(261)+"gger")[e(221)](e(241)):function(){return!1}[e(265)](e(261)+e(305))[e(239)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{A as default};

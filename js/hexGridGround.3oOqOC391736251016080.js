import{e as n,W as t,b as e,U as i}from"./@tresjs.8C7OKmBm1736251016080.js";import{P as r}from"./tweakpane.yHWGBmom1736251016080.js";import{_ as o}from"./reflectorDUDV.vue_vue_type_script_setup_true_lang.HE9bTtTP1736251016080.js";import{_ as a}from"./three.RuuDeeIf1736251016080.js";import{d as s,a4 as u,w as c,o as l,f,u as d,D as p,J as v,g as m,j as h,m as g,al as w,r as b,e as x}from"./@vue.-Mz_IXfk1736251016080.js";import"./@vueuse.HhUha1mw1736251016080.js";import"./all.three.jnv7gLSV1736251016080.js";import"./oimophysics.x0jH7fze1736251016080.js";const y=M;!function(n,t){const e=M,i=R();for(;;)try{if(359072===parseInt(e(268))/1+-parseInt(e(275))/2*(parseInt(e(267))/3)+-parseInt(e(296))/4+-parseInt(e(283))/5*(parseInt(e(305))/6)+-parseInt(e(294))/7+-parseInt(e(300))/8*(parseInt(e(270))/9)+parseInt(e(303))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const I=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[M(293)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){I(this,(function(){const n=M,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(284),"i"),i=S(n(304));t[n(287)](i+"chain")&&e.test(i+n(298))?S():i("0")}))()}();const _=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[M(293)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function M(n,t){const e=R();return(M=function(n,t){return e[n-=264]})(n,t)}_(void 0,(function(){const n=M;let t;try{t=Function(n(291)+n(307)+");")()}catch(r){t=window}const e=t.console=t[n(266)]||{},i=["log",n(311),n(286),"error",n(280),n(290),n(271)];for(let o=0;o<i.length;o++){const t=_[n(308)].prototype.bind(_),r=i[o],a=e[r]||t;t[n(278)]=_[n(302)](_),t.toString=a.toString[n(302)](a),e[r]=t}}))();const k=y(277),T=s({__name:y(299),props:{baseMaterial:{default:new(a[y(269)])},speed:{default:1},gridWeight:{default:.03},raisedBottom:{default:.05},waveFrequency:{default:.2},wavePow:{default:4},division:{default:32},divisionScaleX:{default:1},direction:{default:4},isReversed:{default:!1},hasMaskTexture:{default:!1},maskTexture:{default:null}},async setup(i){const r=y;let o,s;const p=i,v={gridWeight:{value:p[r(265)]},raisedBottom:{value:p[r(313)]},waveFrequency:{value:p.waveFrequency},wavePow:{value:p[r(279)]},direction:{value:p[r(274)]},isReversed:{value:p[r(281)]},hasMaskTexture:{value:p[r(282)]},maskTexture:{value:null},division:{value:p[r(306)]},divisionScaleX:{value:p[r(314)]},time:{value:0}};p[r(273)]&&(v[r(273)][r(312)]=([o,s]=u((()=>e([p.maskTexture]))),o=await o,s(),o)),c((()=>[p[r(265)],p[r(313)],p[r(292)],p[r(279)],p[r(306)],p.divisionScaleX,p[r(274)],p[r(281)],p[r(282)]]),(([n,t,e,i,o,a,s,u,c])=>{const l=r;v[l(265)][l(312)]=n,v[l(313)][l(312)]=t,v.waveFrequency.value=e,v[l(279)][l(312)]=i,v[l(306)][l(312)]=o,v[l(314)][l(312)]=a,v.direction.value=s,v[l(281)][l(312)]=u,v.hasMaskTexture[l(312)]=c}));const{onLoop:m}=n();return m((({delta:n})=>{const t=r;v[t(276)][t(312)]+=n*p[t(301)]})),(n,e)=>{const o=r;return l(),f(d(t),{baseMaterial:i.baseMaterial,vertexShader:k,side:a[o(285)],transparent:"",fragmentShader:d("varying vec2 uvPosition;\n\nuniform float time;\n\nuniform float raisedBottom;\nuniform float waveFrequency;\nuniform float wavePow;\nuniform int direction;\n\nuniform float division;\nuniform float divisionScaleX;\n\nuniform bool hasMaskTexture;\nuniform sampler2D maskTexture;\n\nuniform bool isReversed;\n\nuniform float gridWeight;\n\nfloat hexDist(vec2 p) {\n  p = abs(p);\n  float d = dot(p, normalize(vec2(1.0, 1.73)));\n  return max(d, p.x);\n}\nvec4 hexCoords(vec2 uv) {\n  vec2 r = vec2(1.0, 1.73);\n  vec2 h = r * 0.5;\n  vec2 a = mod(uv, r) - h;\n  vec2 b = mod(uv - h, r) - h;\n\n  vec2 gv = length(a) < length(b) ? a : b;\n  vec2 id = uv - gv;\n\n  float x = atan(gv.x, gv.y);\n  float y = 0.5 - hexDist(gv);\n\n  return vec4(x, y, id);\n}\n\nvoid main() {\n  vec2 uv = uvPosition * vec2(division * divisionScaleX, division);\n  vec4 hc = hexCoords(uv);\n  vec2 id = hc.zw;\n  float distance = id.y;\n  if (direction == 3) {\n    distance = id.x;\n  } else if (direction == 5) {\n    distance = length(id.xy);\n  } else if (direction == 6) {\n    vec2 center = vec2(0.5 * division * divisionScaleX, 0.5 * division);\n    distance = length(uv - center);\n  }\n  float wavy =\n      pow(sin((distance * waveFrequency - time)), wavePow) + raisedBottom;\n\n  float diffuseColorA = csm_DiffuseColor.a;\n  diffuseColorA *= wavy;\n\n  float mask = 1.0;\n  if (hasMaskTexture) {\n    vec2 uVm = id / vec2(division * divisionScaleX, division);\n    mask = texture2D(maskTexture, uVm).g;\n  }\n\n  float w = gridWeight + (1.0 - mask);\n  w = clamp(w, 0.0, 1.0);\n\n  float margin = clamp(w * 0.33, 0.00, 0.02);\n  float stepMax = w + margin;\n\n  float gridLine = smoothstep(w, stepMax, hc.y);\n  gridLine = isReversed ? 1.0 - gridLine : gridLine;\n  diffuseColorA *= gridLine;\n\n  \n  \n  csm_DiffuseColor.rgb *= diffuseColorA;\n\nfloat brightness = length(csm_DiffuseColor.rgb);\n\nfloat alphaBlend = smoothstep(0.0, 1.0, brightness);\n\ncsm_DiffuseColor.a *= alphaBlend;\n\ncsm_FragColor = vec4(csm_DiffuseColor.rgb, csm_DiffuseColor.a);\n}"),uniforms:v},null,8,[o(289),"side",o(310)])}}});function R(){const n=["\nvarying vec2 uvPosition;\nvoid main() {\n    uvPosition = uv;\n}\n","__proto__","wavePow","exception","isReversed","hasMaskTexture","5IVwmdq","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","DoubleSide","info","test","gger","baseMaterial","table","return (function() ","waveFrequency","apply","3331398aYpAIK","debu","1001596ifekII","action","input","hexGridMaterial","55768srtvZg","speed","bind","19284750UNnTVI","init","3495432RUEdbQ","division",'{}.constructor("return this")( )',"constructor","while (true) {}","fragmentShader","warn","value","raisedBottom","divisionScaleX","call","gridWeight","console","100731QgCWqp","418806eKtcjU","MeshPhongMaterial","747azHKtu","trace","string","maskTexture","direction","6KStoVu","time"];return(R=function(){return n})()}function S(n){function t(n){const e=M;if(typeof n===e(272))return function(n){}[e(308)](e(309))[e(293)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(308)]("debu"+e(288))[e(264)](e(297)):function(){return!1}[e(308)](e(295)+e(288))[e(293)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const P=W;!function(n,t){const e=W,i=D();for(;;)try{if(747110===parseInt(e(462))/1*(-parseInt(e(463))/2)+-parseInt(e(482))/3*(parseInt(e(472))/4)+-parseInt(e(460))/5+parseInt(e(483))/6+parseInt(e(449))/7*(parseInt(e(467))/8)+-parseInt(e(448))/9*(parseInt(e(469))/10)+-parseInt(e(473))/11*(-parseInt(e(450))/12))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const B=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){B(this,(function(){const n=W,t=new RegExp(n(452)),e=new RegExp(n(479),"i"),i=F(n(453));t.test(i+"chain")&&e[n(468)](i+n(485))?F():i("0")}))()}();const C=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function D(){const n=["input","constructor","6327wZFlIT","7BTGWOn","168276pRcztI","bind","function *\\( *\\)","init","apply","warn","exception","return (function() ","$attrs","counter","5055215wziREO","hexGridMesh","1178936mKhkPS","2aluSnp","string","debu","MeshBasicMaterial","10780760pWSHmN","test","5530OHErxz","stateObject","toString","4uXQNra","2134IRoeSs","table","gger","length","action","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"console","3312546GFLOim","2171838AzsiBi","rotation"];return(D=function(){return n})()}C(void 0,(function(){const n=W,t=function(){const n=W;let t;try{t=Function(n(457)+n(480)+");")()}catch(e){t=window}return t}(),e=t[n(481)]=t[n(481)]||{},i=["log",n(455),n(478),"error",n(456),n(474),"trace"];for(let r=0;r<i[n(476)];r++){const t=C[n(447)].prototype.bind(C),o=i[r],a=e[o]||t;t.__proto__=C[n(451)](C),t[n(471)]=a[n(471)].bind(a),e[o]=t}}))();const j=[P(484)];function W(n,t){const e=D();return(W=function(n,t){return e[n-=447]})(n,t)}const z=s({__name:P(461),setup(n){const t=P,e=new(a[t(466)]);return(n,i)=>{const r=t;return l(),p("TresMesh",{rotation:[-Math.PI/2,0,0]},[i[0]||(i[0]=v("TresPlaneGeometry",{args:[1,1]},null,-1)),(l(),f(w,null,{default:m((()=>[h(T,g({baseMaterial:d(e)},n[r(458)],{maskTexture:"./plugins/floor/image/logoBlack.png"}),null,16,["baseMaterial"])])),_:1}))],8,j)}}});function F(n){function t(n){const e=W;if(typeof n===e(464))return function(n){}.constructor("while (true) {}")[e(454)](e(459));1!==(""+n/n).length||n%20==0?function(){return!0}[e(447)](e(465)+e(475)).call(e(477)):function(){return!1}[e(447)](e(465)+"gger")[e(454)](e(470)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const X=G;function A(){const n=["trace","toString","4834WoNDuv","isReversed","wavePow","gridWeight","#666666","hexGridGround","gger","action","1617064BPXCGE","info","debu","log","颜色取反","input","raisedBottom","渐变宽度","constructor","stateObject","direction","call","图片纹理","string","speed","console","45941oTNRPX","115734PEzIpj","color","TresPerspectiveCamera","756732noVMEO","counter","chain","waveFrequency","bind","103gVfZhD","1010RrzIQm","return (function() ","169xVERCr","25LOOMmW","390801MWWRnD","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)",'{}.constructor("return this")( )',"605NAXJfb","addBinding","divisionScaleX","4XWjJbb","table","9MbHURw","apply","warn","渐变强度","function *\\( *\\)","test","init","error"];return(A=function(){return n})()}!function(n,t){const e=G,i=A();for(;;)try{if(140989===parseInt(e(337))/1*(-parseInt(e(360))/2)+parseInt(e(342))/3*(-parseInt(e(348))/4)+-parseInt(e(341))/5*(parseInt(e(385))/6)+-parseInt(e(384))/7+-parseInt(e(368))/8*(parseInt(e(350))/9)+parseInt(e(338))/10*(parseInt(e(345))/11)+parseInt(e(388))/12*(parseInt(e(340))/13))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const E=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,i}}();!function(){E(this,(function(){const n=G,t=new RegExp(n(354)),e=new RegExp(n(343),"i"),i=V(n(356));t[n(355)](i+n(390))&&e[n(355)](i+n(373))?V():i("0")}))()}();const q=function(){let n=!0;return function(t,e){const i=n?function(){if(e){const n=e[G(351)](t,arguments);return e=null,n}}:function(){};return n=!1,i}}();function G(n,t){const e=A();return(G=function(n,t){return e[n-=337]})(n,t)}q(void 0,(function(){const n=G,t=function(){const n=G;let t;try{t=Function(n(339)+n(344)+");")()}catch(e){t=window}return t}(),e=t[n(383)]=t[n(383)]||{},i=[n(371),n(352),n(369),n(357),"exception",n(349),n(358)];for(let r=0;r<i.length;r++){const t=q[n(376)].prototype[n(392)](q),o=i[r],a=e[o]||t;t.__proto__=q[n(392)](q),t[n(359)]=a[n(359)][n(392)](a),e[o]=t}}))();const O=s({__name:X(365),setup(n){const t=X,e=b({reflectivity:.8,showGridHelper:!1,scale:1}),a=b({color:"#de62f2",speed:1.9,gridWeight:.223,raisedBottom:.66,waveFrequency:.066,wavePow:19,division:46,divisionScaleX:1,isReversed:!1,direction:4,hasMaskTexture:!0}),s=new r({title:"hexGridGround",expanded:!0});return s[t(346)](a,"hasMaskTexture",{label:t(380)}),s[t(346)](a,t(386),{label:"颜色"}),s.addBinding(a,t(382),{label:"速度",min:-5,max:5,step:.1}),s[t(346)](a,t(363),{label:"网格宽度",min:.001,max:.5,step:.001}),s.addBinding(a,t(374),{label:t(375),min:.001,max:1,step:.001}),s[t(346)](a,t(391),{label:"分段",min:.001,max:1,step:.001}),s[t(346)](a,t(362),{label:t(353),min:1,max:30,step:.1}),s.addBinding(a,"division",{label:"网格整体缩放",min:.1,max:50,step:.1}),s.addBinding(a,t(347),{label:"网格横向缩放",min:.1,max:10,step:.1}),s[t(346)](a,t(361),{label:t(372)}),s[t(346)](a,t(378),{label:"方向类别",min:3,max:6,step:1}),(n,r)=>{const s=t,u=x("TresCanvas");return l(),f(u,{clearColor:s(364),"window-size":""},{default:m((()=>[r[0]||(r[0]=v(s(387),{position:[3,3,0],fov:45,near:.1,far:1e4},null,-1)),h(d(i),{enableDamping:"",autoRotate:""}),h(z,g(a,{scale:9}),null,16),(l(),f(w,null,{default:m((()=>[h(o,g({position:[0,-.06,0]},e),null,16)])),_:1}))])),_:1})}}});function V(n){function t(n){const e=G;if(typeof n===e(381))return function(n){}[e(376)]("while (true) {}").apply(e(389));1!==(""+n/n).length||n%20==0?function(){return!0}[e(376)](e(370)+e(366))[e(379)](e(367)):function(){return!1}.constructor(e(370)+e(366))[e(351)](e(377)),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{O as default};

import{z as n,U as t}from"./@tresjs.UGbbWZf51726652192279.js";import{d as o,a4 as e,r,Y as i,a3 as a,o as s,E as c,L as u,m as l,u as f,b as p,w as d,aj as g,ak as h}from"./@vue.JNsx1iN61726652192279.js";import{aN as v,a0 as m,C as y,M as x,cg as w,V as _}from"./three.3esZ7Hzr1726652192279.js";const I=b;!function(n,t){const o=b,e=A();for(;;)try{if(509788===-parseInt(o(254))/1*(-parseInt(o(237))/2)+-parseInt(o(251))/3*(-parseInt(o(248))/4)+-parseInt(o(215))/5*(-parseInt(o(212))/6)+parseInt(o(221))/7*(-parseInt(o(232))/8)+parseInt(o(222))/9*(-parseInt(o(224))/10)+-parseInt(o(210))/11*(-parseInt(o(243))/12)+-parseInt(o(238))/13)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const M=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[b(219)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){M(this,(function(){const n=b,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(242),"i"),e=T("init");t.test(e+"chain")&&o.test(e+n(252))?T():e("0")}))()}();const F=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[b(219)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function b(n,t){const o=A();return(b=function(n,t){return o[n-=207]})(n,t)}function A(){const n=["log","99999","clone","8HJBRCo","TresSprite","translate","1368606UuRmWE","input","__proto__","11STpJcq","scale","length","value","error","gger","1652178zjyOeI","constructor","4781190FUJOcU","debu","position","5UwidhG","action","img","prototype","apply","info","4523659cEniCl","972234CirKaP","offset","20reRVGe","#fff","console","return (function() ","foremost","buildingsMarkA","stateObject","geometry","8XHyISG","counter","toString","while (true) {}","call","30794rOPNos","8537841eqoFEf","bind","color","sizeAttenuation","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","12mNiOlL","exception"];return(A=function(){return n})()}F(void 0,(function(){const n=b,t=function(){const n=b;let t;try{t=Function(n(227)+'{}.constructor("return this")( ));')()}catch(o){t=window}return t}(),o=t.console=t[n(226)]||{},e=[n(245),"warn",n(220),n(208),n(244),"table","trace"];for(let r=0;r<e[n(256)];r++){const t=F[n(211)][n(218)].bind(F),i=e[r],a=o[i]||t;t[n(253)]=F[n(239)](F),t[n(234)]=a.toString[n(239)](a),o[i]=t}}))();const P=[I(214),I(255)],R=["map"],S=o({__name:I(229),props:{color:{default:I(225)},position:{default:[0,0,0]},scale:{default:.1},img:{},offset:{default:[.344,.394]},foremost:{type:Boolean,default:!0},sizeAttenuation:{type:Boolean,default:!1}},async setup(t){const o=I;let p,d;const g=t,{map:h}=([p,d]=e((()=>n({map:g[o(217)]}))),p=await p,d(),p),v=r({color:g[o(240)],transparent:!0,depthWrite:!1,sizeAttenuation:g[o(241)],toneMapped:!1,depthTest:!g[o(228)]}),m=i(null);return a((()=>{const n=o;m[n(207)]&&(m[n(207)].geometry=m[n(207)][n(231)][n(247)](),m.value[n(231)][n(250)](g[n(223)][0],g[n(223)][1],0))})),(n,t)=>{const e=o;return s(),c(e(249),{ref_key:"tsRef",ref:m,position:g[e(214)],scale:g[e(255)],renderOrder:e(246)},[u("TresSpriteMaterial",l(v,{map:f(h)}),null,16,R)],8,P)}}});function T(n){function t(n){const o=b;if("string"==typeof n)return function(n){}[o(211)](o(235))[o(219)](o(233));1!==(""+n/n)[o(256)]||n%20==0?function(){return!0}.constructor(o(213)+"gger")[o(236)](o(216)):function(){return!1}[o(211)](o(213)+o(209))[o(219)](o(230)),t(++n)}try{if(n)return t;t(0)}catch(o){}}function z(n,t){const o=k();return(z=function(n,t){return o[n-=204]})(n,t)}const j=z;!function(n,t){const o=z,e=k();for(;;)try{if(430773===parseInt(o(213))/1*(-parseInt(o(217))/2)+parseInt(o(211))/3+parseInt(o(230))/4+-parseInt(o(247))/5+-parseInt(o(252))/6*(parseInt(o(243))/7)+-parseInt(o(231))/8+parseInt(o(233))/9)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const C=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();function k(){const n=["11140434MWXUyJ","#ffff00","test","value","exception","string","makeRotationX","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","uRadius","2569HcpvJZ","prototype","gger","length","140720aIDArS","size","trace","error","debu","12828CpvxQY","apply","MeshRef","table","__proto__","TresShaderMaterial","init","radius","info","1565982hXoOPD","TresCircleGeometryRef","3499zFrxiI","toString","color","input","184KfeyFV","followWidth","warn","call","TresMesh","position","stateObject","applyMatrix4","function *\\( *\\)","uniforms","chain","args","ncolor","185508JNmvuM","1925808ZakoxA","constructor"];return(k=function(){return n})()}!function(){C(this,(function(){const n=z,t=new RegExp(n(225)),o=new RegExp(n(241),"i"),e=J(n(208));t[n(235)](e+n(227))&&o[n(235)](e+n(216))?J():e("0")}))()}();const E=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o[z(253)](t,arguments);return o=null,n}}:function(){};return n=!1,e}}();E(void 0,(function(){const n=z;let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(r){t=window}const o=t.console=t.console||{},e=["log",n(219),n(210),n(250),n(237),n(205),n(249)];for(let i=0;i<e[n(246)];i++){const t=E[n(232)][n(244)][n(240)](E),r=e[i],a=o[r]||t;t[n(206)]=E[n(240)](E),t.toString=a[n(214)][n(240)](a),o[r]=t}}))();const O=[j(222)],W=[j(228)],B=o({__name:"radraA",props:{position:{default:[0,0,0]},size:{default:300},radius:{default:240},color:{default:j(234)},opacity:{default:.9},speed:{default:300},followWidth:{default:220}},setup(n,{expose:o}){const e=j,r=n,{onLoop:i}=t(),l={value:0},f=p();i((({delta:n})=>{l.value+=n}));const w={transparent:!0,blending:v,depthWrite:!1,side:m,depthTest:!0,vertexShader:"\n\tvarying vec3 vPosition;\n\tvoid main() {\n\t\tvPosition = position;\n\t\tvec4 modelPosition = modelMatrix * vec4(position, 1.0);\n\t\tvec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n    gl_Position = projectionPosition;\n  }\n  ",fragmentShader:"\n\tuniform float uRadius;     \n  uniform float uTime;            \n  uniform float uSpeed; \n  uniform float uFollowWidth; \n  varying vec3 vPosition;\n\tuniform vec3 ncolor;\n  float calcAngle(vec3 oFrag){\n    float fragAngle;\n    const vec3 ox = vec3(1,0,0);\n    float dianji = oFrag.x * ox.x + oFrag.z*ox.z;\n    float oFrag_length = length(oFrag); // length是内置函数\n    float ox_length = length(ox); // length是内置函数\n    float yuxian = dianji / (oFrag_length * ox_length);\n    fragAngle = acos(yuxian);\n    fragAngle = degrees(fragAngle);\n    if(oFrag.z > 0.0) {\n      fragAngle = -fragAngle + 360.0;\n    }\n    float scanAngle = uTime * uSpeed - floor(uTime * uSpeed / 360.0) * 360.0;\n    float angle = scanAngle - fragAngle;\n    if(angle < 0.0){\n      angle = angle + 360.0;\n    }\n    return angle;\n  }\n  void main() {\n\t\t\t// length内置函数，取向量的长度\n\t\tif(length(vPosition) == 0.0 || length(vPosition) > uRadius-2.0){\n\t\t\tgl_FragColor = vec4( ncolor, 1.0 );\n\t\t} else {\n\t\t\tfloat angle = calcAngle(vPosition);\n\t\t\tif(angle < uFollowWidth){\n\t\t\t\t// 尾焰区域\n\t\t\t\tfloat opacity =  1.0 - angle / uFollowWidth; \n\t\t\t\tgl_FragColor = vec4( ncolor, 1.0 * opacity );  \n\t\t\t} else {\n\t\t\t\t// 其他位置的像素均为透明\n\t\t\t\tgl_FragColor = vec4( ncolor, 0.0 ); \n\t\t\t}\n\t\t}\n\t}\n  ",uniforms:{uSpeed:{value:r.speed},uRadius:{value:r.radius},uTime:l,uFollowWidth:{value:r[e(218)]},ncolor:{value:new y(r.color)}}};d(f,((n,t)=>{const o=e;if(n&&void 0===t){const n=(new x)[o(239)](-Math.PI/180*90);f[o(236)][o(224)](n)}}));const _=p();return a((()=>{const n=e;r[n(215)]&&(w[n(226)][n(229)].value=new y(r[n(215)])),r[n(209)]&&(w[n(226)][n(242)][n(236)]=r[n(209)])})),p(-Math.PI/180*90),o({MeshRef:_}),(n,t)=>{const o=e;return s(),c(o(221),{ref_key:o(204),ref:_,position:r.position},[u("TresCircleGeometry",{ref_key:o(212),ref:f,args:[r[o(248)],1e3]},null,8,W),u(o(207),g(h(w)),null,16)],8,O)}}});function J(n){function t(n){const o=z;if(typeof n===o(238))return function(n){}.constructor("while (true) {}")[o(253)]("counter");1!==(""+n/n)[o(246)]||n%20==0?function(){return!0}[o(232)](o(251)+o(245))[o(220)]("action"):function(){return!1}[o(232)](o(251)+o(245)).apply(o(223)),t(++n)}try{if(n)return t;t(0)}catch(o){}}const Z=D;function G(){const n=["3508LlcvWC","color","\n\tuniform vec3 uColor; // 光墙半径        \n  uniform vec3 uMax; \n  uniform vec3 uMin;\n  uniform mat4 modelMatrix; // 世界矩阵\n  varying vec4 vPosition; // 接收顶点着色传递进来的位置数据\n  void main() {\n    // 转世界坐标\n    vec4 uMax_world = modelMatrix * vec4(uMax,1.0);\n    vec4 uMin_world = modelMatrix * vec4(uMin,1.0);\n    // 根据像素点世界坐标的y轴高度,设置透明度\n    float opacity =1.0 - (vPosition.y - uMin_world.y) / (uMax_world.y -uMin_world.y) ; \n    gl_FragColor = vec4( uColor, opacity);\n  }\n  ","log","2810316OsUrzq","prototype","3723933ovenBh","while (true) {}","opacity","length","7FkDFNy","error","args","console","TresTubeGeometryRef","return (function() ","copy","test","bind","min","table","maxRadius","counter","\n\tvarying vec4 vPosition;\n  void main() {\n    vPosition = modelMatrix * vec4(position,1.0);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n  ","action","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","boundingBox","#ffff00","gger","radraB","TresMesh","apply","max","uniforms","info","warn","period","input","constructor","position","148apTJgy","stateObject","TresShaderMaterial","12824199qJSnzX","15853590uVIENX","1472270ORFFEK","1672632sDsfDa","scale","MeshRef","call","value","toString","init","trace","radius","12azPvYH",'{}.constructor("return this")( )',"updateMatrix","clone","height","exception"];return(G=function(){return n})()}!function(n,t){const o=D,e=G();for(;;)try{if(725863===parseInt(o(481))/1*(-parseInt(o(502))/2)+parseInt(o(508))/3+parseInt(o(506))/4+parseInt(o(486))/5*(-parseInt(o(496))/6)+parseInt(o(512))/7*(-parseInt(o(487))/8)+parseInt(o(484))/9+-parseInt(o(485))/10)break;e.push(e.shift())}catch(r){e.push(e.shift())}}();const U=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();!function(){U(this,(function(){const n=D,t=new RegExp("function *\\( *\\)"),o=new RegExp(n(466),"i"),e=V(n(493));t[n(458)](e+"chain")&&o[n(458)](e+n(478))?V():e("0")}))()}();const N=function(){let n=!0;return function(t,o){const e=n?function(){if(o){const n=o.apply(t,arguments);return o=null,n}}:function(){};return n=!1,e}}();N(void 0,(function(){const n=D;let t;try{t=Function(n(456)+n(497)+");")()}catch(r){t=window}const o=t[n(454)]=t.console||{},e=[n(505),n(476),n(475),n(513),n(501),n(461),n(494)];for(let i=0;i<e[n(511)];i++){const t=N[n(479)][n(507)][n(459)](N),r=e[i],a=o[r]||t;t.__proto__=N.bind(N),t[n(492)]=a.toString[n(459)](a),o[r]=t}}))();const X=[Z(480)],$=[Z(514)];function D(n,t){const o=G();return(D=function(n,t){return o[n-=454]})(n,t)}const L=o({__name:Z(470),props:{position:{default:[0,0,0]},radius:{default:10},maxRadius:{default:200},color:{default:Z(468)},opacity:{default:.5},period:{default:2},height:{default:100}},setup(n,{expose:o}){const e=Z,r=n,i=p(),l=p(1),f=p(.1),v={color:r[e(503)],opacity:r[e(510)],transparent:!0,depthWrite:!1,depthTest:!0,side:m,vertexShader:e(464),fragmentShader:e(504),uniforms:{uMax:l,uMin:f,uColor:{value:new y(r[e(503)])}}},I=p();let M=null;d(I,((n,t)=>{const o=e;n&&void 0===t&&(I.value.computeBoundingBox(),l.value=I[o(491)][o(467)][o(473)],f[o(491)]=I[o(491)][o(467)][o(460)],M=i.value[o(488)][o(499)]())}));const F=p(new w(new _(0,0,0),new _(0,r[e(500)],0)));a((()=>{const n=e;r.color&&(v[n(474)].uColor[n(491)]=new y(r[n(503)]))}));const{onLoop:b}=t(),A={value:0};return b((({delta:n})=>{const t=e;A.value+=n;const o=(A[t(491)]%r[t(477)]/r.period*(r[t(462)]-r[t(495)])+r[t(495)])/r[t(495)],a=(new x).makeScale(o,1,o);M&&(i[t(491)][t(488)][t(457)](M[t(499)]().applyMatrix4(a)),i[t(491)][t(498)]())})),o({MeshRef:i}),(n,t)=>{const o=e;return s(),c(o(471),{ref_key:o(489),ref:i,position:r[o(480)],renderOrder:2e3},[u("TresTubeGeometry",{ref_key:o(455),ref:I,args:[F[o(491)],20,r[o(495)],100,!1]},null,8,$),u(o(483),g(h(v)),null,16)],8,X)}}});function V(n){function t(n){const o=D;if("string"==typeof n)return function(n){}[o(479)](o(509))[o(472)](o(463));1!==(""+n/n)[o(511)]||n%20==0?function(){return!0}.constructor("debu"+o(469))[o(490)](o(465)):function(){return!1}[o(479)]("debu"+o(469))[o(472)](o(482)),t(++n)}try{if(n)return t;t(0)}catch(o){}}export{S as _,B as a,L as b};

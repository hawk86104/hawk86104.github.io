var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(n,t)=>{for(var e in t||(t={}))o.call(t,e)&&a(n,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&a(n,e,t[e]);return n};import{ae as s,o as u,q as l,aQ as f,aR as p,aS as d,H as h,ap as v,aq as m,y as g,bb as _,C as y,Z as x,W as b,l as I,m as S,n as w,A as M,f as R,V as E,g as A,a6 as T,bR as D,k as P,ba as z,j as C,bx as O,d as F,aa as k,B,a as j,aP as U,e as N,M as L,al as H,a7 as Z,c2 as G,c3 as V,a3 as W}from"./three.6cxCQsIj1724511658098.js";import{p as Y,W as $,$ as X}from"./@tresjs.6SjGVF2a1724511658098.js";import{R as q}from"./three-stdlib.eSyESjZu1724511658098.js";import{Z as K,b as J,a as Q,w as nn,u as tn,d as en,U as rn,a4 as on,a2 as an,o as cn,D as sn,G as un,I as ln,a8 as fn,a1 as pn,q as dn,f as hn,J as vn,a9 as mn,r as gn,M as _n,X as yn,t as xn,F as bn,a6 as In,m as Sn}from"./@vue.Q1VpS3901724511658098.js";import{M as wn,a as Mn,C as Rn}from"./@pmndrs.ZvP486_R1724511658098.js";import{o as En}from"./object-hash.Ic9VzAZ81724511658098.js";var An=Cn;function Tn(){var n=["constructor","1261724MFFeUi","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","820818sTVdVG","41478IAvmPT","260298ioMEfP","map","action","6368970nnpjlJ","chain","log","debu","382009YVugws","error","call","exception","prototype","length","apply","return (function() ","24nAjJgw","toString","warn","test","init","function *\\( *\\)","bind","trace","console","string","2RDjLkH","gger","196hTwyqx","add","__proto__","traverse","table","material","virtualScene","1274325KbgXwX"];return(Tn=function(){return n})()}!function(n,t){for(var e=Cn,r=Tn();;)try{if(238528===parseInt(e(197))/1*(-parseInt(e(173))/2)+parseInt(e(188))/3+-parseInt(e(184))/4+-parseInt(e(182))/5+parseInt(e(189))/6*(parseInt(e(175))/7)+-parseInt(e(205))/8*(-parseInt(e(190))/9)+parseInt(e(193))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Dn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Cn(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Dn(this,(function(){var n=Cn,t=new RegExp(n(210)),e=new RegExp(n(186),"i"),r=Fn(n(209));t[n(208)](r+n(194))&&e[n(208)](r+n(185))?Fn():r("0")}))()}();var Pn=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Cn(203)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pn(void 0,(function(){for(var n=Cn,t=function(){var n,t=Cn;try{n=Function(t(204)+'{}.constructor("return this")( ));')()}catch(e){n=window}return n}(),e=t[n(213)]=t[n(213)]||{},r=[n(195),n(207),"info",n(198),n(200),n(179),n(212)],o=0;o<r[n(202)];o++){var i=Pn[n(183)][n(201)][n(211)](Pn),a=r[o],c=e[a]||i;i[n(177)]=Pn[n(211)](Pn),i[n(206)]=c[n(206)][n(211)](c),e[a]=i}}))();class zn extends s{constructor(){var n=Cn;super(),this[n(181)]=null,this[n(181)]=new u}[An(176)](...n){var t=An;return this[t(181)][t(176)](...n),this}destructor(){var n=An;this[n(181)][n(178)]((t=>{var e=n;t instanceof l&&(t.geometry[e(187)](),t.material[e(187)](),t[e(180)][e(191)]&&t[e(180)][e(191)][e(187)](),this.virtualScene.remove(t))})),this[n(181)]=null}}function Cn(n,t){var e=Tn();return(Cn=function(n,t){return e[n-=172]})(n,t)}const On=zn;function Fn(n){function t(n){var e=Cn;if(typeof n===e(172))return function(n){}[e(183)]("while (true) {}")[e(203)]("counter");1!==(""+n/n)[e(202)]||n%20==0?function(){return!0}[e(183)](e(196)+e(174))[e(199)](e(192)):function(){return!1}[e(183)]("debu"+e(174))[e(203)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const kn=Ln;function Bn(){const n=["332076EjYPoI","2748072WkziHl","2NacZxQ","gger","87pfLkEg","test","city/canary_wharf_1k.hdr","14NiIxgk","outdoor/snowy_forest_path_01_1k.hdr","173408pPrmFy","error","outood/mossy_forest_1k.hdr","counter","exception","stateObject","19914jENQCA","kiara/kiara_1_dawn_1k.hdr","outdoor/outdoor_umbrellas_1k.hdr","constructor","indoor/abandoned_games_room_02_1k.hdr","venice/venice_sunset_1k.hdr","return (function() ","studio/poly_haven_studio_1k.hdr","debu","66uRJQaU",'{}.constructor("return this")( )',"9726354LYJesQ","city/modern_buildings_2_1k.hdr","bind","while (true) {}","string","warn","call","info","length","indoor/small_hangar_01_1k.hdr","__proto__","function *\\( *\\)","trace","city/shanghai_bund_1k.hdr","action","table","console","813372DpXzvc","apply","init","970SkNRfL","prototype","toString","input","8479780ozHOZH","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)"];return(Bn=function(){return n})()}!function(n,t){const e=Ln,r=Bn();for(;;)try{if(639998===-parseInt(e(279))/1*(-parseInt(e(281))/2)+parseInt(e(283))/3*(-parseInt(e(288))/4)+parseInt(e(272))/5*(-parseInt(e(294))/6)+-parseInt(e(286))/7*(-parseInt(e(280))/8)+parseInt(e(252))/9+parseInt(e(276))/10+parseInt(e(250))/11*(-parseInt(e(269))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const jn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){jn(this,(function(){const n=Ln,t=new RegExp(n(263)),e=new RegExp(n(278),"i"),r=Hn(n(271));t[n(284)](r+"chain")&&e[n(284)](r+n(275))?Hn():r("0")}))()}();const Un=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Ln(270)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Un(void 0,(function(){const n=Ln,t=function(){const n=Ln;let t;try{t=Function(n(247)+n(251)+");")()}catch(e){t=window}return t}(),e=t[n(268)]=t[n(268)]||{},r=[n(277),n(257),n(259),n(289),n(292),n(267),n(264)];for(let o=0;o<r[n(260)];o++){const t=Un.constructor[n(273)][n(254)](Un),i=r[o],a=e[i]||t;t[n(262)]=Un.bind(Un),t.toString=a[n(274)][n(254)](a),e[i]=t}}))();const Nn={sunset:kn(246),studio:kn(248),city:kn(285),umbrellas:kn(296),night:"outdoor/satara_night_1k.hdr",forest:kn(290),snow:kn(287),dawn:kn(295),hangar:kn(261),urban:kn(298),modern:kn(253),shangai:kn(265)};function Ln(n,t){const e=Bn();return(Ln=function(n,t){return e[n-=246]})(n,t)}function Hn(n){function t(n){const e=Ln;if(typeof n===e(256))return function(n){}.constructor(e(255)).apply(e(291));1!==(""+n/n).length||n%20==0?function(){return!0}[e(297)](e(249)+e(282))[e(258)](e(266)):function(){return!1}[e(297)](e(249)+"gger")[e(270)](e(293)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Zn=Gn;function Gn(n,t){const e=Xn();return(Gn=function(n,t){return e[n-=282]})(n,t)}!function(n,t){const e=Gn,r=Xn();for(;;)try{if(200575===-parseInt(e(288))/1+parseInt(e(287))/2+-parseInt(e(283))/3+parseInt(e(299))/4+-parseInt(e(293))/5+parseInt(e(316))/6+-parseInt(e(318))/7)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Vn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Vn(this,(function(){const n=Gn,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(294),"i"),r=$n(n(285));t[n(305)](r+n(301))&&e[n(305)](r+n(314))?$n():r("0")}))()}();const Wn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Wn(void 0,(function(){const n=Gn;let t;try{t=Function("return (function() "+n(282)+");")()}catch(o){t=window}const e=t.console=t[n(292)]||{},r=["log",n(317),n(319),"error",n(320),"table","trace"];for(let i=0;i<r.length;i++){const t=Wn[n(296)][n(306)][n(322)](Wn),o=r[i],a=e[o]||t;t[n(313)]=Wn[n(322)](Wn),t[n(300)]=a[n(300)][n(322)](a),e[o]=t}}))();const Yn=Zn(312);function $n(n){function t(n){const e=Gn;if(typeof n===e(302))return function(n){}[e(296)](e(308))[e(291)](e(323));1!==(""+n/n)[e(310)]||n%20==0?function(){return!0}.constructor("debu"+e(315)).call(e(309)):function(){return!1}[e(296)]("debu"+e(315))[e(291)](e(284)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Xn(){const n=["Failed to load environment map: ","test","prototype","texture","while (true) {}","action","length","backgroundBlurriness","https://raw.githubusercontent.com/Tresjs/assets/main/textures/hdr/","__proto__","input","gger","839622OeFqyY","warn","156674VXBUpS","info","exception","isColor","bind","counter",'{}.constructor("return this")( )',"128328gUBuGt","stateObject","init","keys","391912mTQXrS","52478HdVRrR","environment","mapping","apply","console","1307475PNBogy","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","background","constructor","setPath","value","975252UQbGrY","toString","chain","string","Preset must be one of: "];return(Xn=function(){return n})()}!function(n,t){const e=Qn,r=Jn();for(;;)try{if(194712===parseInt(e(447))/1+parseInt(e(457))/2*(parseInt(e(472))/3)+-parseInt(e(492))/4+parseInt(e(449))/5*(parseInt(e(455))/6)+-parseInt(e(483))/7+-parseInt(e(461))/8+parseInt(e(484))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const qn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){qn(this,(function(){const n=Qn,t=new RegExp(n(475)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=tt(n(444));t[n(478)](r+n(479))&&e.test(r+n(474))?tt():r("0")}))()}();const Kn=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Qn(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Jn(){const n=["frames","80EVofQh","stateObject","default","TresEnvSence","return (function() ","warn","69270BBgEIU","exception","15228ZzMuHV","isArray","destructor","dispose","1599224RafqRe","console","call","__proto__","length","bind","toString","trace","virtualScene","background","type","81NQgJwK","string","input","function *\\( *\\)","magFilter","envSence","test","chain","error","prototype","counter","1018794KVbrLr","1441431upGWRp","apply","texture","constructor","update","info","debu","$slots","1236072GzLkHz","gger","environment","useDefaultScene","far","minFilter","resolution","init","near","value","298718GHYWmO"];return(Jn=function(){return n})()}function Qn(n,t){const e=Jn();return(Qn=function(n,t){return e[n-=439]})(n,t)}Kn(void 0,(function(){const n=Qn;let t;try{t=Function(n(453)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t.console=t[n(462)]||{},r=["log",n(454),n(489),n(480),n(456),"table",n(468)];for(let i=0;i<r[n(465)];i++){const t=Kn[n(487)][n(481)][n(466)](Kn),o=r[i],a=e[o]||t;t[n(464)]=Kn[n(466)](Kn),t[n(467)]=a[n(467)][n(466)](a),e[o]=t}}))();const nt=en({__name:"component",props:{background:{type:[Boolean,String],default:!1},blur:{default:0},files:{default:[]},path:{default:""},preset:{default:void 0},resolution:{default:256},near:{default:1},far:{default:1e3},frames:{default:1/0},useDefaultScene:{type:Boolean,default:!1}},async setup(n,{expose:t}){const e=Qn;let r,o;const i=n,a=J(null);t({texture:a});const{extend:c,renderer:s,scene:u}=Y();let l=null,y=J(null),x=null;const b=J(null);rn((()=>{var n,t;const e=Qn;null==(n=b[e(446)])||n[e(459)](),null==(t=y[e(446)])||t[e(460)]()}));const{onBeforeLoop:I}=X();let S=1;I((()=>{const n=Qn;x&&b.value&&y[n(446)]&&(i[n(448)]===1/0||S<i[n(448)])&&(i[n(440)]?x[n(488)](s[n(446)],u[n(446)]):x.update(s[n(446)],fn(b[n(446)][n(469)])),S++)}));const w=([r,o]=on((()=>async function(n,t){const e=Zn,{scene:r}=Y(),{preset:o,blur:i,files:a=[],path:c="",background:s}=K(n),u=J(),l=Q((()=>Array.isArray(a[e(298)]))),h=Q((()=>l.value?f:q)),v=J(null);return nn((()=>[a,c]),(async([n,t])=>{const r=e;if(n[r(298)][r(310)]>0&&!o.value){try{v.value=await $(tn(h),l[r(298)]?[tn(n)]:tn(n),(n=>{const e=r;t[e(298)]&&n[e(297)](tn(t))}))}catch(i){throw new Error("Failed to load environment map: "+i)}v[r(298)]&&(u[r(298)]=l[r(298)]?v[r(298)][0]:v[r(298)],u[r(298)][r(290)]=l[r(298)]?p:d)}}),{immediate:!0}),nn((()=>u[e(298)]),(n=>{const t=e;r[t(298)]&&(r.value[t(289)]=n)}),{immediate:!0}),nn((()=>[s[e(298)],u[e(298)]]),(([n,o])=>{const i=e;if(r[i(298)]){let e=(null==t?void 0:t[i(298)])?t.value[i(307)]:o,a=r[i(298)][i(295)];!(null==a?void 0:a[i(321)])&&(a=void 0),r[i(298)].background=n?e:a}}),{immediate:!0}),nn((()=>null==i?void 0:i[e(298)]),(n=>{const t=e;r[t(298)]&&(r[t(298)][t(311)]=n)}),{immediate:!0}),nn(o,(async n=>{const t=e;if(n&&n in Nn){const e=Yn,o=Nn[n];try{v[t(298)]=await $(q,o,(n=>{e&&n.setPath(e)}))}catch(r){throw new Error(t(304)+r)}v[t(298)]&&(u[t(298)]=v[t(298)],u[t(298)][t(290)]=d)}else if(n&&!(n in Nn))throw new Error(t(303)+Object[t(286)](Nn).join(", "))}),{immediate:!0}),{texture:u}}(i,y))),r=await r,o(),r)[e(486)],M=n=>{const t=e;n?(u[t(446)][t(439)]=n.texture,i.background&&(u[t(446)][t(470)]=n[t(486)])):(u.value[t(439)]=w[t(446)],i[t(470)]&&(u[t(446)].background=w[t(446)]))};nn(w,(n=>{const t=e;y[t(446)]&&M(y[t(446)])}),{immediate:!0,deep:!0}),c({EnvSence:On});const R=()=>{var n;const t=e;null==(n=y[t(446)])||n[t(460)](),y[t(446)]=new v(i[t(443)]),x=new m(i[t(445)],i[t(441)],y.value),i.useDefaultScene?(y.value[t(486)][t(471)]=g,y[t(446)][t(486)].generateMipmaps=!1,y.value[t(486)][t(442)]=_,y.value[t(486)][t(476)]=_):y.value[t(486)].type=h,M(y[t(446)])};return nn((()=>an()[e(451)]),(n=>{var t,r;const o=e;n&&(!y[o(446)]||y[o(446)].texture[o(471)]!==h)&&(l=n(),Array[o(458)](l)&&l[o(465)]>0&&"symbol"!=typeof(null==(t=l[0])?void 0:t[o(471)]))?R():(null==(r=y[o(446)])||r[o(460)](),y[o(446)]=null,M(null))}),{immediate:!0,deep:!0}),a[e(446)]=w,nn((()=>i[e(440)]),(n=>{y[e(446)]&&R()})),(n,t)=>{const r=e;return tn(y)?(cn(),sn(r(452),{key:0,ref_key:r(477),ref:b},[un(n[r(491)],r(451))],512)):ln("",!0)}}});function tt(n){function t(n){const e=Qn;if(typeof n===e(473))return function(n){}[e(487)]("while (true) {}")[e(485)](e(482));1!==(""+n/n).length||n%20==0?function(){return!0}[e(487)](e(490)+"gger")[e(463)]("action"):function(){return!1}[e(487)](e(490)+e(493)).apply(e(450)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const et=it;!function(n,t){const e=it,r=ft();for(;;)try{if(985125===-parseInt(e(286))/1+parseInt(e(279))/2*(-parseInt(e(292))/3)+-parseInt(e(315))/4*(parseInt(e(282))/5)+parseInt(e(288))/6*(-parseInt(e(293))/7)+-parseInt(e(313))/8+parseInt(e(308))/9+parseInt(e(299))/10*(parseInt(e(297))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const rt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){rt(this,(function(){const n=it,t=new RegExp(n(285)),e=new RegExp(n(318),"i"),r=pt("init");t[n(316)](r+n(295))&&e[n(316)](r+n(322))?pt():r("0")}))()}();const ot=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[it(317)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function it(n,t){const e=ft();return(it=function(n,t){return e[n-=272]})(n,t)}ot(void 0,(function(){const n=it;let t;try{t=Function("return (function() "+n(274)+");")()}catch(o){t=window}const e=t.console=t.console||{},r=[n(284),n(311),n(298),n(312),n(275),n(324),n(273)];for(let i=0;i<r[n(319)];i++){const t=ot[n(305)][n(278)][n(296)](ot),o=r[i],a=e[o]||t;t[n(306)]=ot.bind(ot),t[n(310)]=a[n(310)][n(296)](a),e[o]=t}}))();const at={key:0,args:[0,1,64]},ct={key:1,args:[.5,1,64]},st={key:2},ut=[et(287),et(303),"side",et(321)],lt=en({__name:et(301),props:{args:{default:null},from:{default:et(304)},toneMapped:{type:Boolean,default:!1},map:{default:null},intensity:{default:1},color:{default:new y(16777215)}},setup(n){const t=n,e=J();return pn((()=>{const n=it;e[n(291)]&&(e[n(291)][n(321)][n(280)](t.intensity),e[n(291)][n(272)]=!0)})),dn((()=>{})),(n,r)=>{const o=it;return cn(),sn(o(320),null,[t.from===o(300)?(cn(),sn(o(283),at)):t[o(277)]===o(309)?(cn(),sn("TresRingGeometry",ct)):t[o(277)]===o(304)?(cn(),sn(o(314),st)):(cn(),hn(t[o(277)],{key:3,args:t})),vn(o(276),{ref_key:o(294),ref:e,toneMapped:n[o(287)],map:n[o(303)],side:tn(x),color:n[o(321)]},null,8,ut)])}}});function ft(){const n=["warn","error","14676888mvJchv","TresPlaneGeometry","3123632EbaHuk","test","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","length","TresMesh","color","input","gger","table","needsUpdate","trace",'{}.constructor("return this")( )',"exception","TresMeshBasicMaterial","from","prototype","496396xMBCyz","multiplyScalar","stateObject","5WOBSxO","TresRingGeometry","log","function *\\( *\\)","1742931otlOUk","toneMapped","14958VXKKcb","debu","string","value","6rrFmmZ","826yjAeJg","material","chain","bind","583CwVfLd","info","1070230fZfcvD","circle","index","counter","map","rect","constructor","__proto__","while (true) {}","4157334PkcnJU","ring","toString"];return(ft=function(){return n})()}function pt(n){function t(n){const e=it;if(typeof n===e(290))return function(n){}[e(305)](e(307)).apply(e(302));1!==(""+n/n)[e(319)]||n%20==0?function(){return!0}[e(305)](e(289)+e(323)).call("action"):function(){return!1}[e(305)](e(289)+e(323))[e(317)](e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=vt,r=ht();for(;;)try{if(909777===-parseInt(e(262))/1+parseInt(e(264))/2+parseInt(e(279))/3+parseInt(e(276))/4+-parseInt(e(285))/5+parseInt(e(261))/6+-parseInt(e(257))/7*(-parseInt(e(259))/8))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const dt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(284)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function ht(){const n=["error","setRenderTarget","return (function() ","input","bind","14MCXgFN","action","5692584fjGcAQ","toString","3449820aaRqmr","1281542ZJgqUP","while (true) {}","1114390YCFUgd","function *\\( *\\)","debu","__proto__","test","chain","trace","render","warn","width","console","constructor","5072156xGSESE","value","depthTexture","26514GHJeaX","table","stateObject","string","call","apply","8204345NVdIpb",'{}.constructor("return this")( )',"\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","dispose","init","info","length"];return(ht=function(){return n})()}function vt(n,t){const e=ht();return(vt=function(n,t){return e[n-=247]})(n,t)}!function(){dt(this,(function(){const n=vt,t=new RegExp(n(265)),e=new RegExp(n(247),"i"),r=_t(n(249));t[n(268)](r+n(269))&&e[n(268)](r+n(255))?_t():r("0")}))()}();const mt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[vt(284)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function gt(n){const t=J(null),{height:e,width:r,settings:o,depth:i,isLoop:a}=mn(n)?K(n):K(gn(n)),{onLoop:s}=X(),{camera:u,renderer:l,scene:f,sizes:p}=Y();return pn((()=>{var n;const a=vt;null==(n=t[a(277)])||n[a(248)](),t[a(277)]=new b((null==r?void 0:r[a(277)])||p[a(273)][a(277)],(null==e?void 0:e[a(277)])||p.height[a(277)],c({minFilter:I,magFilter:I,type:h},null==o?void 0:o[a(277)])),(null==i?void 0:i[a(277)])&&(t[a(277)][a(278)]=new S((null==r?void 0:r[a(277)])||p[a(273)][a(277)],(null==e?void 0:e[a(277)])||p.height[a(277)],w))})),s((()=>{const n=vt;(null==a?void 0:a[n(277)])&&(l.value[n(253)](t[n(277)]),l[n(277)].clear(),l[n(277)][n(271)](f[n(277)],u[n(277)]),l[n(277)][n(253)](null))})),_n((()=>{var n;const e=vt;null==(n=t[e(277)])||n[e(248)]()})),t}function _t(n){function t(n){const e=vt;if(typeof n===e(282))return function(n){}[e(275)](e(263)).apply("counter");1!==(""+n/n)[e(251)]||n%20==0?function(){return!0}[e(275)](e(266)+"gger")[e(283)](e(258)):function(){return!1}[e(275)](e(266)+"gger").apply(e(281)),t(++n)}try{if(n)return t;t(0)}catch(e){}}mt(void 0,(function(){const n=vt,t=function(){const n=vt;let t;try{t=Function(n(254)+n(286)+");")()}catch(e){t=window}return t}(),e=t.console=t[n(274)]||{},r=["log",n(272),n(250),n(252),"exception",n(280),n(270)];for(let o=0;o<r.length;o++){const t=mt[n(275)].prototype.bind(mt),i=r[o],a=e[i]||t;t[n(267)]=mt[n(256)](mt),t[n(260)]=a[n(260)][n(256)](a),e[i]=t}}))();const yt=bt;!function(n,t){const e=bt,r=St();for(;;)try{if(589932===-parseInt(e(178))/1*(parseInt(e(174))/2)+-parseInt(e(184))/3*(parseInt(e(181))/4)+parseInt(e(215))/5+-parseInt(e(225))/6*(-parseInt(e(179))/7)+-parseInt(e(212))/8*(parseInt(e(220))/9)+-parseInt(e(180))/10*(-parseInt(e(222))/11)+parseInt(e(205))/12*(parseInt(e(223))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const xt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(214)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function bt(n,t){const e=St();return(bt=function(n,t){return e[n-=174]})(n,t)}!function(){xt(this,(function(){const n=bt,t=new RegExp(n(224)),e=new RegExp(n(211),"i"),r=Rt("init");t.test(r+"chain")&&e[n(187)](r+n(210))?Rt():r("0")}))()}();const It=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[bt(214)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function St(){const n=["12UgcYaQ","__proto__","exception","919284TEHNmQ","buffer","backside","test","envMapIntensity","gger","trace","constructor","action","bind","warn","toneMapping","backsideThickness","length","background","console","log","render","time","uuid","setRenderTarget","485628GlKyUM",'{}.constructor("return this")( )',"fboResolution","thickness","index","input","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","226072prKGVY","info","apply","4676350WgIObj","string","material","debu","value","153JZLUiO","side","7893908uCXxzD","39oKBxJw","function *\\( *\\)","6sAigru","traverse","toString","50gUoEuJ","while (true) {}","texture","MeshTransmissionMaterialClass","997JdqTpC","1681673YXbnHK","10EGHyiz"];return(St=function(){return n})()}It(void 0,(function(){const n=bt;let t;try{t=Function("return (function() "+n(206)+");")()}catch(o){t=window}const e=t[n(199)]=t[n(199)]||{},r=[n(200),n(194),n(213),"error",n(183),"table",n(190)];for(let i=0;i<r.length;i++){const t=It[n(191)].prototype[n(193)](It),o=r[i],a=e[o]||t;t[n(182)]=It[n(193)](It),t[n(227)]=a[n(227)][n(193)](a),e[o]=t}}))();const wt=[yt(185),yt(221)],Mt=en({__name:yt(209),props:{backside:{type:Boolean,default:!0},thickness:{default:1},backsideThickness:{default:.5},fboResolution:{default:256}},setup(n,{expose:t}){const e=yt,r=yn(),{extend:o,scene:i,renderer:a,camera:c}=Y(),s=yn(),u=n;o({MeshTransmissionMaterial:wn});const l=new Mn,{onBeforeLoop:f}=X(),p=gt({width:u[e(207)],height:u[e(207)],isLoop:!1}),d=gt({width:u[e(207)],height:u.fboResolution,isLoop:!1});let h,v,m,g;return dn((async()=>{const n=e;await xn(),s.value=function(n,t){const e=bt;let r;return n[e(226)]((n=>{const o=e;n.isMesh&&n[o(217)]&&n.material[o(203)]===t&&(r=n)})),r}(i.value,r.value[n(203)])})),f((({elapsed:n})=>{const t=e;r[t(219)][t(202)]=n,r.value[t(185)]===d.value[t(176)]&&s[t(219)]&&(m=a.value.toneMapping,h=i.value[t(198)],v=r[t(219)][t(188)],g=s[t(219)][t(217)][t(221)],s.value.material=l,u[t(186)]&&(a[t(219)].setRenderTarget(p.value),a[t(219)][t(201)](i[t(219)],c.value),s[t(219)][t(217)]=r[t(219)],s[t(219)][t(217)][t(208)]=u[t(196)],s[t(219)][t(217)][t(185)]=p.value[t(176)],s[t(219)][t(217)].side=M,s[t(219)][t(217)][t(188)]=0),a[t(219)][t(204)](d.value),a[t(219)][t(201)](i[t(219)],c[t(219)]),s[t(219)].material.buffer=d[t(219)][t(176)],s[t(219)][t(217)]=r[t(219)],s[t(219)].material.thickness=u[t(208)],s[t(219)][t(217)][t(221)]=g,s.value[t(217)][t(188)]=v,i.value[t(198)]=h,a[t(219)][t(204)](null),a[t(219)][t(195)]=m)})),t({root:r,constructor:wn}),(n,t)=>{const o=e;return cn(),sn("TresMeshTransmissionMaterial",{ref_key:o(177),ref:r,buffer:tn(d)[o(176)],side:tn(x)},null,8,wt)}}});function Rt(n){function t(n){const e=bt;if(typeof n===e(216))return function(n){}[e(191)](e(175)).apply("counter");1!==(""+n/n)[e(197)]||n%20==0?function(){return!0}.constructor(e(218)+"gger").call(e(192)):function(){return!1}[e(191)](e(218)+e(189)).apply("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Et(n,t){const e=Dt();return(Et=function(n,t){return e[n-=453]})(n,t)}const At=Et;!function(n,t){const e=Et,r=Dt();for(;;)try{if(750910===parseInt(e(490))/1+-parseInt(e(511))/2+parseInt(e(463))/3+-parseInt(e(501))/4*(-parseInt(e(473))/5)+-parseInt(e(456))/6+-parseInt(e(481))/7*(parseInt(e(455))/8)+parseInt(e(479))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Tt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Dt(){const n=["exception","831386bUYaOf","counter","toString","return (function() ","position","precise","console","trace","min","getBoundingSphere","TresGroup","4YNImMa",'{}.constructor("return this")( )',"function *\\( *\\)","top","init","value","chain","prototype","disableY","index","1342406cGKAdw","test","front","disable","424HUohqD","2285718erfpvF","default","constructor","getCenter","left","set","gger","2481516FcCDYP","while (true) {}","matrixWorld","log","back","inner","length","error","stateObject","identity","2084515QxjRfC","disableZ","warn","outer","string","input","2906586hQOynM","apply","78631YvTdpW","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","max","setFromObject","right","debu","__proto__","bind"];return(Dt=function(){return n})()}!function(){Tt(this,(function(){const n=Et,t=new RegExp(n(503)),e=new RegExp(n(482),"i"),r=Ct(n(505));t[n(512)](r+n(507))&&e[n(512)](r+n(478))?Ct():r("0")}))()}();const Pt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Et(480)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Pt(void 0,(function(){const n=Et,t=function(){const n=Et;let t;try{t=Function(n(493)+n(502)+");")()}catch(e){t=window}return t}(),e=t[n(496)]=t[n(496)]||{},r=[n(466),n(475),"info",n(470),n(489),"table",n(497)];for(let o=0;o<r[n(469)];o++){const t=Pt[n(458)][n(508)][n(488)](Pt),i=r[o],a=e[i]||t;t[n(487)]=Pt[n(488)](Pt),t.toString=a[n(492)][n(488)](a),e[i]=t}}))();const zt=en({__name:At(510),props:{precise:{type:Boolean,default:!0},top:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},left:{type:Boolean,default:!1},front:{type:Boolean,default:!1},back:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},disableX:{type:Boolean,default:!1},disableY:{type:Boolean,default:!1},disableZ:{type:Boolean,default:!1}},setup(n){const t=n,e=J(null),r=J(null),o=J(null);return dn((()=>{const n=Et;if(!r[n(506)])return;if(!o[n(506)])return;r[n(506)][n(465)][n(472)]();const e=(new R)[n(484)](o[n(506)],t[n(495)]),i=new E,a=new A,c=e.max.x-e[n(498)].x,s=e[n(483)].y-e[n(498)].y,u=e[n(483)].z-e[n(498)].z;e[n(459)](i),e[n(499)](a);const l=t[n(504)]?s/2:t.bottom?-s/2:0,f=t[n(460)]?-c/2:t[n(485)]?c/2:0,p=t[n(453)]?u/2:t[n(467)]?-u/2:0;r.value[n(494)][n(461)](t[n(454)]||t.disableX?0:-i.x+f,t.disable||t[n(509)]?0:-i.y+l,t[n(454)]||t[n(474)]?0:-i.z+p)})),(n,t)=>{const i=Et;return cn(),sn("TresGroup",{ref_key:"gref",ref:e},[vn(i(500),{ref_key:i(476),ref:r},[vn(i(500),{ref_key:i(468),ref:o},[un(n.$slots,i(457))],512)],512)],512)}}});function Ct(n){function t(n){const e=Et;if(typeof n===e(477))return function(n){}.constructor(e(464))[e(480)](e(491));1!==(""+n/n)[e(469)]||n%20==0?function(){return!0}[e(458)](e(486)+e(462)).call("action"):function(){return!1}[e(458)](e(486)+"gger").apply(e(471)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Ot=Nt;!function(n,t){const e=Nt,r=Bt();for(;;)try{if(518052===-parseInt(e(441))/1+parseInt(e(453))/2+parseInt(e(422))/3*(-parseInt(e(421))/4)+parseInt(e(448))/5*(-parseInt(e(408))/6)+-parseInt(e(404))/7*(parseInt(e(455))/8)+-parseInt(e(417))/9*(parseInt(e(431))/10)+parseInt(e(415))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ft=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ft(this,(function(){const n=Nt,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ht(n(444));t.test(r+n(451))&&e[n(406)](r+"input")?Ht():r("0")}))()}();const kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Nt(450)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Bt(){const n=["scene","backsideIOR","console","causticsOnly","35591974iJxQgu","helper","134829tlSonu","worldRadius","Vector3","gger","20DqTqYI","569406bEbjfW","constructor","ior","object","toString","action","info","stateObject","bind","630DGmFbR","length",'{}.constructor("return this")( )',"far","trace","default","add","string","debu","primitive","67658tZiiXa","lightSource","error","init","params","warn","color","5arFzbn","index","apply","chain","#ffffff","1752188mMiKHy","value","248lbwWrU","while (true) {}","log","group","intensity","set","200746OnWsQh","__proto__","test","$slots","4465122ljiTQm","exception","prototype"];return(Bt=function(){return n})()}kt(void 0,(function(){const n=Nt;let t;try{t=Function("return (function() "+n(433)+");")()}catch(o){t=window}const e=t[n(413)]=t[n(413)]||{},r=[n(457),n(446),n(428),n(443),n(409),"table",n(435)];for(let i=0;i<r[n(432)];i++){const t=kt[n(423)][n(410)][n(430)](kt),o=r[i],a=e[o]||t;t[n(405)]=kt[n(430)](kt),t.toString=a[n(426)][n(430)](a),e[o]=t}}))();const jt=[Ot(425)],Ut=[Ot(425)];function Nt(n,t){const e=Bt();return(Nt=function(n,t){return e[n-=401]})(n,t)}const Lt=en({__name:Ot(449),props:{color:{default:Ot(452)},ior:{default:1.1},backsideIOR:{default:1.1},far:{default:15},worldRadius:{default:.3},intensity:{default:.05},causticsOnly:{type:Boolean,default:!1},lightSource:{default:{x:1,y:1,z:1}},resolution:{default:1024}},setup(n){const t=Ot,e=n,{renderer:r}=Y(),o=Rn(r[t(454)],{frames:1/0,resolution:e.resolution,worldRadius:e[t(418)]});o[t(445)].backside=!0;const i=yn(null);nn(i,(n=>{const e=t;n&&o[e(411)][e(437)](n)}));const{onBeforeLoop:a}=X();return a((({elapsed:n})=>{o.update()})),pn((()=>{const n=t;e[n(447)]&&o[n(445)][n(447)][n(403)](e.color),e[n(424)]&&(o[n(445)].ior=e[n(424)]),e[n(412)]&&(o[n(445)][n(412)]=e[n(412)]),e[n(434)]&&(o[n(445)].far=e.far),e.worldRadius&&(o.params[n(418)]=e[n(418)]),e[n(402)]&&(o[n(445)].intensity=e[n(402)])})),nn((()=>e[t(414)]),(n=>{const e=t;o.params[e(414)]=n})),nn((()=>e[t(442)]),(n=>{const e=t;n&&o[e(445)][e(442)]instanceof T[e(419)]&&o[e(445)][e(442)][e(403)](n.x,n.y,n.z)}),{deep:!0}),(n,e)=>{const r=t;return cn(),sn(bn,null,[vn("TresGroup",{ref_key:r(401),ref:i},[un(n[r(407)],r(436))],512),vn(r(440),{object:tn(o).group,position:[0,.003,0]},null,8,jt),vn(r(440),{object:tn(o)[r(416)],visible:!1},null,8,Ut)],64)}}});function Ht(n){function t(n){const e=Nt;if(typeof n===e(438))return function(n){}[e(423)](e(456))[e(450)]("counter");1!==(""+n/n)[e(432)]||n%20==0?function(){return!0}[e(423)]("debu"+e(420)).call(e(427)):function(){return!1}[e(423)](e(439)+e(420))[e(450)](e(429)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Gt,r=Wt();for(;;)try{if(756300===parseInt(e(287))/1+-parseInt(e(316))/2+-parseInt(e(311))/3*(-parseInt(e(308))/4)+parseInt(e(314))/5+parseInt(e(328))/6*(parseInt(e(299))/7)+parseInt(e(294))/8+-parseInt(e(291))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Zt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Gt(284)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gt(n,t){const e=Wt();return(Gt=function(n,t){return e[n-=282]})(n,t)}!function(){Zt(this,(function(){const n=Gt,t=new RegExp(n(315)),e=new RegExp(n(285),"i"),r=$t("init");t[n(326)](r+n(300))&&e[n(326)](r+n(301))?$t():r("0")}))()}();const Vt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Wt(){const n=["ShaderChunk","call","properties","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","gger","926325PQWWvF","bind","console","while (true) {}","24998292BqpoCR","toString","counter","3706648atNddY",");\n      float blockers = 0.0;\n    \n      int j = 0;\n      vec2 offset = vec2(0.);\n      float depth = 0.;\n    \n      #pragma unroll_loop_start\n      for(int i = 0; i < ","log","#if defined( SHADOWMAP_TYPE_PCF )","material","448OXDPGf","chain","input","replace","stateObject",".0;\n    }\n    \n    float PCSS (sampler2D shadowMap, vec4 coords) {\n      vec2 uv = coords.xy;\n      float zReceiver = coords.z; // Assumed to be eye-space z in this code\n      float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n      float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n      if (avgBlockerDepth == -1.0) {\n        return 1.0;\n      }\n      float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n      return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n    }","#ifdef USE_SHADOWMAP\n\n    #define PENUMBRA_FILTER_SIZE float(","; i++) {\n        vogelSample = vogelDiskSample(j, ","#ifdef USE_SHADOWMAP","130776hyCtqA",'{}.constructor("return this")( )',"traverse","18GKJTLD","shadowmap_pars_fragment","compile","6477495srnBSs","function *\\( *\\)","1004238uFfJpI","warn","length","info","exception",", angle) * texelSize;\n        offset = vogelSample * (1.0 + filterRadius * float(","));\n        shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n        j++;\n      }\n      #pragma unroll_loop_end\n      return shadow * 1.0 / ","dispose",")\n    #define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\n    vec3 randRGB(vec2 uv) {\n      return vec3(\n        fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n        fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n        fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n      );\n    }\n    \n    vec3 lowPassRandRGB(vec2 uv) {\n      // 3x3 convolution (average)\n      // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n      vec3 result = vec3(0);\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n      result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n      result *= 0.111111111; // 1.0 / 9.0\n      return result;\n    }\n    vec3 highPassRandRGB(vec2 uv) {\n      // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n      // hp(x) = x - lp(x)\n      return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n    }\n    \n    \n    vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n      const float goldenAngle = 2.399963f; // radians\n      float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n      float theta = float(sampleIndex) * goldenAngle + angle;\n      float sine = sin(theta);\n      float cosine = cos(theta);\n      return vec2(cosine, sine) * r;\n    }\n    float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n      return (zReceiver - zBlocker) / zBlocker;\n    }\n    float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float blockerDepthSum = float(","__proto__","test","; i ++) {\n        offset = (vogelDiskSample(j, ","108252DyZzSR","table","programs","action","prototype","constructor","string",", angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n        depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n        if (depth < compare) {\n          blockerDepthSum += depth;\n          blockers++;\n        }\n        j++;\n      }\n      #pragma unroll_loop_end\n    \n      if (blockers > 0.0) {\n        return blockerDepthSum / blockers;\n      }\n      return -1.0;\n    }\n            \n    float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n      float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n      float shadow = 0.0f;\n      int j = 0;\n      vec2 vogelSample = vec2(0.0);\n      vec2 offset = vec2(0.0);\n      #pragma unroll_loop_start\n      for (int i = 0; i < ","isArray","debu","error"];return(Wt=function(){return n})()}Vt(void 0,(function(){const n=Gt;let t;try{t=Function("return (function() "+n(309)+");")()}catch(o){t=window}const e=t.console=t[n(289)]||{},r=[n(296),n(317),"info",n(338),n(320),n(329),"trace"];for(let i=0;i<r.length;i++){const t=Vt.constructor[n(332)].bind(Vt),o=r[i],a=e[o]||t;t[n(325)]=Vt.bind(Vt),t[n(292)]=a.toString[n(288)](a),e[o]=t}}))();const Yt=({focus:n=0,size:t=25,samples:e=10}={})=>{const r=Gt,o=T[r(339)][r(312)];return T[r(339)][r(312)]=T[r(339)][r(312)][r(302)](r(307),r(305)+t+r(324)+n+r(295)+e+r(327)+e+r(335)+e+r(306)+e+r(321)+t+r(322)+e+r(304))[r(302)](r(297),"\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),(n,t,e)=>{D[r(312)]=o,function(n,t,e){const r=Gt;t[r(310)]((t=>{const e=r;t[e(298)]&&(Array[e(336)](t[e(298)])?t.material.forEach((t=>{n[e(283)].remove(t),t.dispose()})):(n[e(283)].remove(t.material),t.material[e(323)]()))})),n[r(319)][r(330)][r(318)]=0,n[r(313)](t,e)}(n,t,e)}};function $t(n){function t(n){const e=Gt;if(typeof n===e(334))return function(n){}[e(333)](e(290)).apply(e(293));1!==(""+n/n)[e(318)]||n%20==0?function(){return!0}.constructor(e(337)+"gger")[e(282)](e(331)):function(){return!1}[e(333)](e(337)+e(286)).apply(e(303)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const Xt=qt;function qt(n,t){const e=te();return(qt=function(n,t){return e[n-=466]})(n,t)}!function(n,t){const e=qt,r=te();for(;;)try{if(282605===parseInt(e(472))/1*(parseInt(e(477))/2)+parseInt(e(478))/3+parseInt(e(494))/4+parseInt(e(503))/5*(parseInt(e(467))/6)+-parseInt(e(499))/7*(-parseInt(e(484))/8)+-parseInt(e(492))/9+-parseInt(e(502))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Kt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Kt(this,(function(){const n=qt,t=new RegExp(n(504)),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=ne("init");t[n(496)](r+n(487))&&e[n(496)](r+n(469))?ne():r("0")}))()}();const Jt=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[qt(485)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Jt(void 0,(function(){const n=qt;let t;try{t=Function(n(486)+'{}.constructor("return this")( ));')()}catch(o){t=window}const e=t[n(491)]=t[n(491)]||{},r=[n(497),"warn",n(481),n(468),n(474),n(470),n(493)];for(let i=0;i<r.length;i++){const t=Jt[n(489)][n(480)].bind(Jt),o=r[i],a=e[o]||t;t[n(490)]=Jt[n(498)](Jt),t[n(466)]=a[n(466)][n(498)](a),e[o]=t}}))();const Qt=en({__name:Xt(488),props:{enabled:{type:Boolean,default:!0},size:{default:25},focus:{default:0},samples:{default:10}},setup(n){const t=n,{camera:e,renderer:r,scene:o}=Y();let i=null;const a=n=>{const t=qt,{enabled:a,size:c,focus:s,samples:u}=n;i&&(i(r[t(476)],o.value,e[t(476)]),i=null),a&&(i=Yt({focus:s,size:c,samples:u}),o.value[t(471)]((n=>{n instanceof l&&n.material.dispose()})))};return a(t),nn(t,(()=>{a(t)})),(n,t)=>null}});function ne(n){function t(n){const e=qt;if(typeof n===e(482))return function(n){}[e(489)](e(500)).apply(e(479));1!==(""+n/n).length||n%20==0?function(){return!0}[e(489)]("debu"+e(475))[e(473)](e(501)):function(){return!1}[e(489)](e(495)+e(475))[e(485)](e(483)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function te(){const n=["debu","test","log","bind","3017637heFyHL","while (true) {}","action","9318530CRuTlK","51070DyYPIV","function *\\( *\\)","toString","114miHhzj","error","input","table","traverse","580saIbtz","call","exception","gger","value","530ePLvBX","1156767NUIOfB","counter","prototype","info","string","stateObject","8AizDkZ","apply","return (function() ","chain","index","constructor","__proto__","console","851985TLCNVR","trace","578708OmjtkU"];return(te=function(){return n})()}const ee=ce;!function(n,t){const e=ce,r=ae();for(;;)try{if(695939===parseInt(e(434))/1+parseInt(e(463))/2+-parseInt(e(447))/3+-parseInt(e(474))/4+-parseInt(e(435))/5+-parseInt(e(433))/6*(-parseInt(e(470))/7)+parseInt(e(437))/8)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){re(this,(function(){const n=ce,t=new RegExp(n(475)),e=new RegExp(n(440),"i"),r=ue("init");t[n(452)](r+n(430))&&e.test(r+n(436))?ue():r("0")}))()}();const oe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[ce(432)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();oe(void 0,(function(){const n=ce;let t;try{t=Function("return (function() "+n(472)+");")()}catch(o){t=window}const e=t.console=t[n(439)]||{},r=[n(451),n(453),n(465),n(464),n(467),n(460),n(466)];for(let i=0;i<r[n(448)];i++){const t=oe.constructor[n(456)][n(454)](oe),o=r[i],a=e[o]||t;t.__proto__=oe[n(454)](oe),t.toString=a[n(431)][n(454)](a),e[o]=t}}))();const ie=parseInt(F[ee(441)](/\D+/g,""));function ae(){const n=["texelSize","log","test","warn","bind","kernel","prototype","#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <","multiplyScalar","toneMapped","table","uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }","while (true) {}","447650cvXiDL","error","info","trace","exception","resolution","string","1132103hlMnhp","encodings_fragment",'{}.constructor("return this")( )',"set","3577880ilWNKb","function *\\( *\\)","setResolution","debu","copy","chain","toString","apply","12NNcPHa","32506oYdnAi","1998970yHicGX","input","11722048iFVDJw","halfTexelSize","console","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","replace","value",">\n        }","constructor","gger","uniforms","164526xuxRmu","length","setTexelSize"];return(ae=function(){return n})()}function ce(n,t){const e=ae();return(ce=function(n,t){return e[n-=429]})(n,t)}class se extends P{constructor(n=new C){const t=ee;super({uniforms:{inputBuffer:new z(null),depthBuffer:new z(null),resolution:new z(new C),texelSize:new z(new C),halfTexelSize:new z(new C),kernel:new z(0),scale:new z(1),cameraNear:new z(0),cameraFar:new z(1),minDepthThreshold:new z(0),maxDepthThreshold:new z(1),depthScale:new z(0),depthToBlurRatioBias:new z(.25)},fragmentShader:t(457)+(ie>=154?"colorspace_fragment":t(471))+t(443),vertexShader:t(461),blending:O,depthWrite:!1,depthTest:!1}),this[t(459)]=!1,this.setTexelSize(n.x,n.y),this[t(455)]=new Float32Array([0,1,2,2,3])}[ee(449)](n,t){const e=ee;this[e(446)][e(450)][e(442)][e(473)](n,t),this[e(446)][e(438)][e(442)][e(473)](n,t)[e(458)](.5)}[ee(476)](n){const t=ee;this[t(446)][t(468)][t(442)][t(429)](n)}}function ue(n){function t(n){const e=ce;if(typeof n===e(469))return function(n){}[e(444)](e(462))[e(432)]("counter");1!==(""+n/n)[e(448)]||n%20==0?function(){return!0}[e(444)](e(477)+e(445)).call("action"):function(){return!1}[e(444)](e(477)+e(445))[e(432)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}const le=he;!function(n,t){const e=he,r=de();for(;;)try{if(816846===-parseInt(e(206))/1*(-parseInt(e(179))/2)+parseInt(e(172))/3+-parseInt(e(219))/4+parseInt(e(201))/5+parseInt(e(192))/6*(-parseInt(e(224))/7)+-parseInt(e(226))/8*(-parseInt(e(200))/9)+parseInt(e(216))/10*(-parseInt(e(183))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const fe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){fe(this,(function(){const n=he,t=new RegExp(n(180)),e=new RegExp(n(203),"i"),r=me(n(182));t[n(199)](r+n(198))&&e[n(199)](r+n(171))?me():r("0")}))()}();const pe=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[he(223)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function de(){const n=["kernel","constructor","clone","render","toString","86754JtFfhh","renderTargetA","return (function() ","renderTargetB","minDepthThreshold","setAttribute","chain","test","9nrbVhA","3471400pvrSfI","maxDepthThreshold","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","debu","uniforms","109914amdADp","setRenderTarget","depthTexture","camera","add","counter","texture","defines","inputBuffer","screen","22599970rWgllz","log","while (true) {}","1001720hvHcuI","setResolution","call","length","apply","546WgCzuc","frustumCulled","13031320LPbihq","error","bind","value","input","2768478TSZfev","console","scene","gger","convolutionMaterial","USE_DEPTH","renderToScreen","22MCvpdn","function *\\( *\\)","trace","init","11UdXprw","info","table","setTexelSize"];return(de=function(){return n})()}function he(n,t){const e=de();return(he=function(n,t){return e[n-=170]})(n,t)}pe(void 0,(function(){const n=he,t=function(){const n=he;let t;try{t=Function(n(194)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(173)]=t[n(173)]||{},r=[n(217),"warn",n(184),n(227),"exception",n(185),n(181)];for(let o=0;o<r[n(222)];o++){const t=pe[n(188)].prototype[n(228)](pe),i=r[o],a=e[i]||t;t.__proto__=pe[n(228)](pe),t[n(191)]=a[n(191)].bind(a),e[i]=t}}))();class ve{constructor({resolution:n,width:t=500,height:e=500,minDepthThreshold:r=0,maxDepthThreshold:o=1,depthScale:i=0,depthToBlurRatioBias:a=.25}){const c=he;this[c(178)]=!1,this[c(193)]=new b(n,n,{minFilter:I,magFilter:I,stencilBuffer:!1,depthBuffer:!1,type:h}),this[c(195)]=this[c(193)][c(189)](),this[c(176)]=new se,this[c(176)][c(186)](1/t,1/e),this[c(176)][c(220)](new C(t,e)),this.scene=new u,this[c(209)]=new k,this[c(176)].uniforms[c(196)][c(170)]=r,this[c(176)][c(205)][c(202)][c(170)]=o,this[c(176)][c(205)].depthScale[c(170)]=i,this.convolutionMaterial[c(205)].depthToBlurRatioBias[c(170)]=a,this[c(176)][c(213)][c(177)]=i>0;const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),f=new Float32Array([0,0,2,0,0,2]),p=new B;p[c(197)]("position",new j(s,3)),p[c(197)]("uv",new j(f,2)),this.screen=new l(p,this[c(176)]),this[c(215)][c(225)]=!1,this[c(174)][c(210)](this.screen)}[le(190)](n,t,e){const r=le,o=this.scene,i=this[r(209)],a=this[r(193)],c=this[r(195)],s=this[r(176)],u=s[r(205)];u.depthBuffer[r(170)]=t[r(208)];const l=s[r(187)];let f,p,d,h=t;for(p=0,d=l[r(222)]-1;p<d;++p)f=0==(1&p)?a:c,u.kernel[r(170)]=l[p],u[r(214)].value=h.texture,n[r(207)](f),n[r(190)](o,i),h=f;u[r(187)][r(170)]=l[p],u[r(214)][r(170)]=h[r(212)],n[r(207)](this[r(178)]?null:e),n[r(190)](o,i)}}function me(n){function t(n){const e=he;if("string"==typeof n)return function(n){}.constructor(e(218))[e(223)](e(211));1!==(""+n/n)[e(222)]||n%20==0?function(){return!0}[e(188)](e(204)+e(175))[e(221)]("action"):function(){return!1}.constructor("debu"+e(175))[e(223)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}function ge(n,t){var e=ye();return(ge=function(n,t){return e[n-=496]})(n,t)}var _e=ge;function ye(){var n=["setValues","_distortionMap","238984MHUPSt","_textureMatrix","455215sbxpeR","18eNnPOU","_tDiffuseBlur","_mixContrast","2wbKEgh","#include <emissivemap_fragment>","tDiffuse","mixContrast","7975VjXish","_blurStrength","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ","_mixBlur","_depthScale","#include <project_vertex>","log","prototype","info","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","1627066YYiZeG","textureMatrix","value","tDiffuseBlur","\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ","trace","__proto__","test","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","_maxDepthThreshold","warn","init","mixBlur","bind","mirror","hasBlur","depthScale","45MmYrgY","toString","31812QKXjxy","apply","mixStrength","maxDepthThreshold","string","vertexShader","error","tDepth","action","3790xstBSw","while (true) {}","fragmentShader","console","table","13giVFaI","distortion","function *\\( *\\)","_depthToBlurRatioBias","_hasBlur","minDepthThreshold","_minDepthThreshold","constructor","5603412fvhssZ","13186MeEckU","uniforms","length","USE_UV","_tDepth","defines","return (function() ","stateObject","replace","depthToBlurRatioBias","gger","_mirror","call","_tDiffuse","96kwgVOb","debu","_distortion","exception"];return(ye=function(){return n})()}!function(n,t){for(var e=ge,r=ye();;)try{if(280696===-parseInt(e(509))/1*(parseInt(e(535))/2)+parseInt(e(523))/3*(-parseInt(e(568))/4)+-parseInt(e(531))/5*(-parseInt(e(532))/6)+parseInt(e(549))/7+parseInt(e(529))/8*(-parseInt(e(566))/9)+parseInt(e(577))/10*(-parseInt(e(539))/11)+-parseInt(e(508))/12*(-parseInt(e(500))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var xe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(569)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){xe(this,(function(){var n=ge,t=new RegExp(n(502)),e=new RegExp(n(548),"i"),r=Se(n(560));t[n(556)](r+"chain")&&e[n(556)](r+"input")?Se():r("0")}))()}();var be=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[ge(569)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();be(void 0,(function(){var n,t=ge;try{n=Function(t(515)+'{}.constructor("return this")( ));')()}catch(s){n=window}for(var e=n[t(498)]=n.console||{},r=[t(545),t(559),t(547),t(574),t(526),t(499),t(554)],o=0;o<r[t(511)];o++){var i=be[t(507)][t(546)].bind(be),a=r[o],c=e[a]||i;i[t(555)]=be.bind(be),i[t(567)]=c[t(567)][t(562)](c),e[a]=i}}))();class Ie extends U{constructor(n={}){var t=ge;super(n),this[t(513)]={value:null},this[t(528)]={value:null},this[t(522)]={value:null},this[t(533)]={value:null},this[t(530)]={value:null},this[t(504)]={value:!1},this[t(520)]={value:0},this[t(542)]={value:0},this[t(540)]={value:.5},this[t(506)]={value:.9},this[t(558)]={value:1},this[t(543)]={value:0},this._depthToBlurRatioBias={value:.25},this[t(525)]={value:1},this._mixContrast={value:1},this[t(527)](n)}onBeforeCompile(n){var t,e=ge;!(null==(t=n[e(514)])?void 0:t[e(512)])&&(n[e(514)][e(512)]=""),n[e(510)][e(564)]=this._hasBlur,n[e(510)][e(537)]=this[e(522)],n[e(510)][e(575)]=this._tDepth,n[e(510)].distortionMap=this._distortionMap,n[e(510)][e(552)]=this[e(533)],n.uniforms[e(550)]=this[e(530)],n.uniforms[e(563)]=this[e(520)],n[e(510)][e(561)]=this[e(542)],n[e(510)].mixStrength=this._blurStrength,n.uniforms.minDepthThreshold=this[e(506)],n[e(510)][e(571)]=this._maxDepthThreshold,n[e(510)][e(565)]=this[e(543)],n[e(510)][e(518)]=this[e(503)],n[e(510)][e(501)]=this[e(525)],n[e(510)].mixContrast=this._mixContrast,n[e(573)]="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      "+n.vertexShader,n.vertexShader=n[e(573)][e(517)](e(544),e(557)),n[e(497)]=e(553)+n.fragmentShader,n.fragmentShader=n[e(497)][e(517)](e(536),e(541))}get[_e(537)](){var n=_e;return this._tDiffuse[n(551)]}set[_e(537)](n){var t=_e;this[t(522)][t(551)]=n}get[_e(575)](){var n=_e;return this[n(513)][n(551)]}set[_e(575)](n){var t=_e;this._tDepth[t(551)]=n}get distortionMap(){var n=_e;return this[n(528)][n(551)]}set distortionMap(n){var t=_e;this._distortionMap[t(551)]=n}get[_e(552)](){var n=_e;return this._tDiffuseBlur[n(551)]}set[_e(552)](n){var t=_e;this[t(533)][t(551)]=n}get[_e(550)](){return this._textureMatrix.value}set[_e(550)](n){var t=_e;this[t(530)][t(551)]=n}get[_e(564)](){var n=_e;return this[n(504)][n(551)]}set[_e(564)](n){this._hasBlur.value=n}get[_e(563)](){var n=_e;return this._mirror[n(551)]}set mirror(n){var t=_e;this[t(520)][t(551)]=n}get[_e(561)](){var n=_e;return this._mixBlur[n(551)]}set[_e(561)](n){var t=_e;this[t(542)][t(551)]=n}get[_e(570)](){var n=_e;return this[n(540)][n(551)]}set mixStrength(n){var t=_e;this[t(540)][t(551)]=n}get minDepthThreshold(){var n=_e;return this[n(506)][n(551)]}set[_e(505)](n){var t=_e;this[t(506)][t(551)]=n}get[_e(571)](){var n=_e;return this[n(558)][n(551)]}set maxDepthThreshold(n){var t=_e;this[t(558)][t(551)]=n}get depthScale(){return this[_e(543)].value}set[_e(565)](n){var t=_e;this[t(543)][t(551)]=n}get[_e(518)](){return this[_e(503)].value}set[_e(518)](n){var t=_e;this[t(503)][t(551)]=n}get distortion(){var n=_e;return this[n(525)][n(551)]}set distortion(n){var t=_e;this[t(525)][t(551)]=n}get[_e(538)](){var n=_e;return this[n(534)][n(551)]}set mixContrast(n){var t=_e;this[t(534)][t(551)]=n}}function Se(n){function t(n){var e=ge;if(typeof n===e(572))return function(n){}[e(507)](e(496))[e(569)]("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(507)](e(524)+e(519))[e(521)](e(576)):function(){return!1}[e(507)](e(524)+"gger")[e(569)](e(516)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const we=Me;function Me(n,t){const e=Te();return(Me=function(n,t){return e[n-=252]})(n,t)}!function(n,t){const e=Me,r=Te();for(;;)try{if(938784===parseInt(e(304))/1+-parseInt(e(258))/2*(-parseInt(e(266))/3)+-parseInt(e(278))/4*(parseInt(e(325))/5)+-parseInt(e(306))/6*(-parseInt(e(276))/7)+-parseInt(e(352))/8*(parseInt(e(286))/9)+-parseInt(e(293))/10*(parseInt(e(273))/11)+parseInt(e(341))/12*(parseInt(e(289))/13))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Re=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(295)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Re(this,(function(){const n=Me,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(329),"i"),r=Pe(n(270));t.test(r+n(331))&&e.test(r+"input")?Pe():r("0")}))()}();const Ee=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Me(295)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ee(void 0,(function(){const n=Me;let t;try{t=Function(n(280)+n(285)+");")()}catch(o){t=window}const e=t[n(260)]=t[n(260)]||{},r=[n(291),n(292),n(316),n(262),"exception",n(252),n(279)];for(let i=0;i<r[n(263)];i++){const t=Ee[n(253)][n(354)][n(296)](Ee),o=r[i],a=e[o]||t;t[n(340)]=Ee[n(296)](Ee),t[n(307)]=a[n(307)][n(296)](a),e[o]=t}}))();const Ae=["texture-matrix",we(272),we(271),we(303),"t-diffuse-blur",we(326),we(277),we(283),we(335),we(324),we(302),we(310),we(290),"mix-contrast",we(314),"defines-USE_DEPTH",we(287)];function Te(){const n=["has-blur","lookAt","call","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","material","chain","elements","target","projectionMatrix","max-depth-threshold","extractRotation","set","depthTexture","dot","__proto__","207996pydDse","setFromNormalAndCoplanarPoint","add","reflectorPlane","reflect","autoUpdate","index","normal","multiplyScalar","setFromMatrixPosition","clear","502632sRXFVg","string","prototype","table","constructor","sign","clipPlane","matrixWorldInverse","value","10JuTJPo","textureMatrix","console","gger","error","length","setRenderTarget","negate","591807jQsGdx","lookAtPosition","uuid","render","init","t-diffuse","mirror","22tGxDCR","rotationMatrix","isMesh","1043hpiJXh","mix-strength","898332tazxhx","trace","return (function() ","visible","debu","min-depth-threshold","texture",'{}.constructor("return this")( )',"99qXePrc","defines-USE_DISTORTION","cameraWorldPosition","117gzYXKm","distortionMap","log","warn","3597510lOgtYO","shadowMap","apply","bind","matrixWorld","while (true) {}","assign","view","key","depth-to-blur-ratio-bias","t-depth","104543yGHDSh","position","62484wXxQdi","toString","multiply","copy","distortion","enabled","reflectorWorldPosition","dispose","defines-USE_BLUR","virtualCamera","info","constant","subVectors","applyMatrix4","materialRef","addScaledVector","TresMeshReflectorMaterial","far","depth-scale","10mMXqSo"];return(Te=function(){return n})()}const De=en({__name:we(347),props:{resolution:{default:256},mixBlur:{default:0},mixStrength:{default:1},blur:{default:()=>[0,0]},mirror:{default:0},minDepthThreshold:{default:.9},maxDepthThreshold:{default:1},depthScale:{default:0},depthToBlurRatioBias:{default:.25},distortionMap:{},distortion:{default:1},mixContrast:{default:1},reflectorOffset:{default:0}},setup(n){const r=we,o=n;const{resolution:i,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,blur:f,mirror:p,mixBlur:d,mixStrength:v,distortion:m,distortionMap:g,mixContrast:_}=K(o),{camera:y,scene:x,renderer:w,extend:M}=Y();M({MeshReflectorMaterial:Ie});const R=yn(),A=yn(),T=yn(),D=yn(),P=Q((()=>{const n=Me;return"number"==typeof f[n(257)]?[f[n(257)],f[n(257)]]:f[n(257)]})),z=Q((()=>P[r(257)][0]>0||P[r(257)][1]>0)),C={reflectorPlane:new N,normal:new E,reflectorWorldPosition:new E,cameraWorldPosition:new E,rotationMatrix:new L,lookAtPosition:new E(0,0,-1),clipPlane:new H,view:new E,target:new E,q:new H,virtualCamera:new Z,textureMatrix:new L};pn((()=>{var n;const o=r;null==(n=R[o(257)])||n[o(284)].dispose();const f={minFilter:I,magFilter:I,type:h};var y,x;R[o(257)]=new b(i[o(257)],i[o(257)],(y=c({},f),x={depthBuffer:!0,depthTexture:new S(i[o(257)],i[o(257)],G,V)},t(y,e(x)))),A[o(257)]=new b(i[o(257)],i[o(257)],f),T[o(257)]=new ve({resolution:i[o(257)],width:P[o(257)][0],height:P[o(257)][1],minDepthThreshold:a.value,maxDepthThreshold:s.value,depthScale:u[o(257)],depthToBlurRatioBias:l[o(257)]}),D[o(257)]={mirror:p,textureMatrix:C[o(259)],mixBlur:d,tDiffuse:R[o(257)][o(284)],tDepth:R[o(257)][o(338)],tDiffuseBlur:R.value[o(284)],hasBlur:z,mixStrength:v,minDepthThreshold:a,maxDepthThreshold:s,depthScale:u,depthToBlurRatioBias:l,distortion:m,distortionMap:g[o(257)],mixContrast:_,"defines-USE_BLUR":z.value?"":void 0,"defines-USE_DEPTH":u[o(257)]>0?"":void 0,"defines-USE_DISTORTION":g.value?"":void 0}}));const O=yn(),{onLoop:F}=X();F((()=>{var n;const t=r;if(!(O[t(257)]&&w[t(257)]&&R[t(257)]&&y.value))return;const e=function(n,t){let e;return n.traverse((n=>{const r=Me;n[r(275)]&&n[r(330)]&&n[r(330)][r(268)]===t&&(e=n)})),e}(x[t(257)],O.value[t(268)]);if(!e)return;e[t(281)]=!1;const i=w[t(257)].xr[t(311)],a=w[t(257)].shadowMap[t(346)];(function(n){var t,e;const r=Me;if(C.reflectorWorldPosition[r(350)](n[r(297)]),C.cameraWorldPosition[r(350)](null==(t=y.value)?void 0:t[r(297)]),C[r(274)][r(336)](n[r(297)]),C[r(348)].set(0,0,1),C[r(348)][r(319)](C[r(274)]),C[r(312)][r(321)](C[r(348)],o.reflectorOffset),C[r(300)].subVectors(C[r(312)],C[r(288)]),C[r(300)][r(339)](C[r(348)])>0)return;C[r(300)].reflect(C[r(348)])[r(265)](),C[r(300)][r(343)](C[r(312)]),C[r(274)].extractRotation(null==(e=y[r(257)])?void 0:e[r(297)]),C[r(267)].set(0,0,-1),C[r(267)][r(319)](C[r(274)]),C[r(267)][r(343)](C[r(288)]),C.target[r(318)](C[r(312)],C[r(267)]),C[r(333)][r(345)](C[r(348)])[r(265)](),C[r(333)][r(343)](C[r(312)]),C[r(315)][r(305)][r(309)](C.view),C.virtualCamera.up[r(337)](0,1,0),C[r(315)].up[r(319)](C[r(274)]),C[r(315)].up[r(345)](C[r(348)]),C.virtualCamera[r(327)](C[r(333)]),C.virtualCamera[r(323)]=(null==y?void 0:y.value).far,C[r(315)].updateMatrixWorld(),C.virtualCamera[r(334)][r(309)]((null==y?void 0:y[r(257)])[r(334)]),C[r(259)].set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C[r(259)][r(308)](C[r(315)].projectionMatrix),C[r(259)][r(308)](C.virtualCamera.matrixWorldInverse),C[r(259)][r(308)](n.matrixWorld),C.reflectorPlane[r(342)](C[r(348)],C[r(312)]),C[r(344)].applyMatrix4(C.virtualCamera[r(256)]),C.clipPlane[r(337)](C.reflectorPlane.normal.x,C[r(344)][r(348)].y,C[r(344)][r(348)].z,C.reflectorPlane[r(317)]);const i=C[r(315)][r(334)];C.q.x=(Math[r(254)](C[r(255)].x)+i[r(332)][8])/i.elements[0],C.q.y=(Math.sign(C.clipPlane.y)+i[r(332)][9])/i.elements[5],C.q.z=-1,C.q.w=(1+i[r(332)][10])/i[r(332)][14],C.clipPlane[r(349)](2/C[r(255)][r(339)](C.q)),i.elements[2]=C[r(255)].x,i.elements[6]=C[r(255)].y,i[r(332)][10]=C.clipPlane.z+1,i[r(332)][14]=C.clipPlane.w})(e),w[t(257)].shadowMap[t(346)]=!1,w.value[t(264)](R[t(257)]),w[t(257)].autoClear||w[t(257)][t(351)](),w[t(257)][t(269)](x[t(257)],C[t(315)]),null==(n=null==T?void 0:T.value)||n[t(269)](w[t(257)],R.value,A[t(257)]),w[t(257)].xr[t(311)]=i,w[t(257)][t(294)][t(346)]=a,e[t(281)]=!0,w[t(257)].setRenderTarget(null)}));const k=In(),B=Q((()=>{const n=r,t={};return Object.assign(t,o),Object[n(299)](t,k[n(257)]),t}));return _n((()=>{var n,t;const e=r;null==(n=null==R?void 0:R[e(257)])||n[e(313)](),null==(t=null==A?void 0:A[e(257)])||t.dispose()})),(n,t)=>{var e,o,i;const c=r;return cn(),sn(c(322),Sn({key:c(301)+D[c(257)]["defines-USE_BLUR"]+D.value["defines-USE_DEPTH"]+D[c(257)][c(287)],ref_key:c(320),ref:O},B[c(257)],{"texture-matrix":C[c(259)],mirror:tn(p),"t-diffuse":null==(e=R.value)?void 0:e[c(284)],"t-depth":null==(o=R.value)?void 0:o[c(338)],"t-diffuse-blur":null==(i=A[c(257)])?void 0:i[c(284)],"has-blur":z[c(257)],"mix-strength":tn(v),"min-depth-threshold":tn(a),"max-depth-threshold":tn(s),"depth-scale":tn(u),"depth-to-blur-ratio-bias":tn(l),distortion:tn(m),distortionMap:tn(g),"mix-contrast":tn(_),"defines-USE_BLUR":z[c(257)]?"":void 0,"defines-USE_DEPTH":tn(u)>0?"":void 0,"defines-USE_DISTORTION":tn(g)?"":void 0}),null,16,Ae)}}});function Pe(n){function t(n){const e=Me;if(typeof n===e(353))return function(n){}[e(253)](e(298)).apply("counter");1!==(""+n/n).length||n%20==0?function(){return!0}[e(253)](e(282)+e(261))[e(328)]("action"):function(){return!1}[e(253)]("debu"+e(261))[e(295)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=Fe,r=Oe();for(;;)try{if(693864===parseInt(e(427))/1+-parseInt(e(426))/2*(-parseInt(e(429))/3)+parseInt(e(425))/4*(parseInt(e(450))/5)+parseInt(e(430))/6+parseInt(e(437))/7+-parseInt(e(436))/8+parseInt(e(448))/9*(-parseInt(e(443))/10))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const ze=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(415)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){ze(this,(function(){const n=Fe,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(424),"i"),r=ke(n(438));t[n(434)](r+"chain")&&e[n(434)](r+n(411))?ke():r("0")}))()}();const Ce=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[Fe(415)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Oe(){const n=["input","while (true) {}","console","bind","apply","action","toString","debu","error",'{}.constructor("return this")( )',"length","background","counter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","5292cflDSF","308VsIKFK","1001914aYWklt","prototype","10278xLXqbv","7604634hbCxVO","gger","constructor","string","test","return (function() ","4007736dcVKUh","2636613nLLRRo","init","stateObject","info","fog","value","180HcTDKl","__proto__","CubeCamera","trace","warn","1659492SCCfmi","update","5065qWiyXZ"];return(Oe=function(){return n})()}function Fe(n,t){const e=Oe();return(Fe=function(n,t){return e[n-=411]})(n,t)}function ke(n){function t(n){const e=Fe;if(typeof n===e(433))return function(n){}[e(432)](e(412)).apply(e(423));1!==(""+n/n).length||n%20==0?function(){return!0}[e(432)](e(418)+e(431)).call(e(416)):function(){return!1}.constructor(e(418)+e(431))[e(415)](e(439)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Ce(void 0,(function(){const n=Fe,t=function(){const n=Fe;let t;try{t=Function(n(435)+n(420)+");")()}catch(e){t=window}return t}(),e=t[n(413)]=t[n(413)]||{},r=["log",n(447),n(440),n(419),"exception","table",n(446)];for(let o=0;o<r[n(421)];o++){const t=Ce[n(432)][n(428)][n(414)](Ce),i=r[o],a=e[i]||t;t[n(444)]=Ce[n(414)](Ce),t[n(417)]=a[n(417)][n(414)](a),e[i]=t}}))();const Be=je;function je(n,t){const e=Ze();return(je=function(n,t){return e[n-=257]})(n,t)}!function(n,t){const e=je,r=Ze();for(;;)try{if(300722===parseInt(e(279))/1*(parseInt(e(260))/2)+-parseInt(e(291))/3+-parseInt(e(272))/4+-parseInt(e(302))/5+-parseInt(e(270))/6*(parseInt(e(275))/7)+parseInt(e(266))/8*(-parseInt(e(299))/9)+parseInt(e(267))/10)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ue=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Ue(this,(function(){const n=je,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Ge(n(268));t[n(305)](r+n(297))&&e[n(305)](r+n(294))?Ge():r("0")}))()}();const Ne=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[je(287)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();Ne(void 0,(function(){const n=je,t=function(){const n=je;let t;try{t=Function(n(281)+n(277)+");")()}catch(e){t=window}return t}(),e=t[n(285)]=t[n(285)]||{},r=["log",n(276),n(283),n(280),n(284),"table",n(269)];for(let o=0;o<r[n(301)];o++){const t=Ne.constructor[n(259)][n(282)](Ne),i=r[o],a=e[i]||t;t[n(265)]=Ne[n(282)](Ne),t[n(262)]=a.toString[n(282)](a),e[i]=t}}))();const Le=[Be(271)],He=en({__name:Be(278),props:{resolution:{default:256},near:{default:.1},far:{default:1e3},envMap:{default:null},fog:{default:null},frames:{default:1/0}},setup(n,{expose:t}){var e;const r=Be,o=n,{fbo:i,camera:a,update:c}=function({resolution:n=256,near:t=.1,far:e=1e3,envMap:r,fog:o}={}){const{renderer:i,scene:a}=Y(),c=J(null),s=J(n),u=J(t),l=J(e),f=J(null);let p,d;return nn((()=>s),(n=>{var t;const e=Fe;null==(t=c[e(442)])||t.dispose(),c.value=new v(n.value),c[e(442)].texture.type=h}),{immediate:!0}),nn([u,l,c],(([n,t,e])=>{const r=Fe;e&&(f.value=new(T[r(445)])(n,t,e))}),{immediate:!0}),_n((()=>{var n;null==(n=c[Fe(442)])||n.dispose()})),{fbo:c,camera:f,update:()=>{var n;const t=Fe;p=a[t(442)][t(441)],d=a[t(442)][t(422)],a[t(442)][t(422)]=r||d,a[t(442)][t(441)]=o||p,null==(n=f[t(442)])||n[t(449)](i[t(442)],a[t(442)]),a.value.fog=p,a[t(442)][t(422)]=d}}}({resolution:o[r(273)],near:o.near,far:o[r(264)],envMap:o[r(304)],fog:o[r(303)]}),{onBeforeLoop:s}=X();let u=0;const l=J(null);return s((()=>{const n=r;l[n(300)]&&(o[n(257)]===1/0||u<o.frames)&&(l[n(300)][n(258)]=!1,c(),l[n(300)].visible=!0,u++)})),t({texture:null==(e=i[r(300)])?void 0:e[r(263)]}),(n,t)=>{const e=r;return cn(),sn(e(290),null,[vn(e(296),{object:tn(a)},null,8,Le),vn(e(290),{ref_key:e(286),ref:l},[un(n.$slots,e(292))],512)])}}});function Ze(){const n=["238740mxSofe","fog","envMap","test","frames","visible","prototype","2kjJFYb","action","toString","texture","far","__proto__","8BCAJuE","15204960DMtlRp","init","trace","6cKikTu","object","1421676wCSeLJ","resolution","string","3868102wWcvta","warn",'{}.constructor("return this")( )',"index","188664kfzGjU","error","return (function() ","bind","info","exception","console","rgRef","apply","stateObject","while (true) {}","TresGroup","1197012fWRnpQ","default","debu","input","constructor","primitive","chain","counter","483129ESBvkb","value","length"];return(Ze=function(){return n})()}function Ge(n){function t(n){const e=je;if(typeof n===e(274))return function(n){}[e(295)](e(289))[e(287)](e(298));1!==(""+n/n).length||n%20==0?function(){return!0}[e(295)](e(293)+"gger").call(e(261)):function(){return!1}[e(295)](e(293)+"gger")[e(287)](e(288)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){const e=We,r=Ye();for(;;)try{if(669192===-parseInt(e(435))/1*(parseInt(e(419))/2)+-parseInt(e(444))/3+parseInt(e(418))/4*(-parseInt(e(446))/5)+parseInt(e(433))/6+-parseInt(e(409))/7+parseInt(e(448))/8+parseInt(e(431))/9)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Ve=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(426)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function We(n,t){const e=Ye();return(We=function(n,t){return e[n-=408]})(n,t)}function Ye(){const n=["test","while (true) {}",'{}.constructor("return this")( )',"string","exception","assign","4742444KHVfJa","1062mJEwpG","action","ShaderMaterial","info","uniforms","reduce","MathUtils","apply","chain","table","warn","init","20206134zUNtXr","counter","6496536kNbGsZ","console","1699fJScSb","gger","call","trace","generateUUID","return (function() ","constructor","key","toString","1416249utdYdX","prototype","5OCsPRI","clone","6614272bXpzwg","bind","error","value","__proto__","log","UniformsUtils","input","debu","entries","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","6479277QLPaOf","stateObject","length"];return(Ye=function(){return n})()}!function(){Ve(this,(function(){const n=We,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(408),"i"),r=qe(n(430));t[n(412)](r+n(427))&&e[n(412)](r+n(455))?qe():r("0")}))()}();const $e=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[We(426)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Xe(n,t,e,r){const o=We,i=class extends T[o(421)]{constructor(i={}){const a=o,s=Object[a(457)](n);super({uniforms:s[a(424)](((n,[t,e])=>{const r=a,o=T[r(454)][r(447)]({[t]:{value:e}});return c(c({},n),o)}),{}),vertexShader:t,fragmentShader:e}),this[a(442)]="",s.forEach((([n])=>Object.defineProperty(this,n,{get:()=>this.uniforms[n].value,set:t=>this[a(423)][n][a(451)]=t}))),Object[a(417)](this,i),r&&r(this)}};return i[o(442)]=T[o(425)][o(439)](),i}function qe(n){function t(n){const e=We;if(typeof n===e(415))return function(n){}[e(441)](e(413))[e(426)](e(432));1!==(""+n/n)[e(411)]||n%20==0?function(){return!0}.constructor(e(456)+e(436))[e(437)](e(420)):function(){return!1}[e(441)](e(456)+e(436)).apply(e(410)),t(++n)}try{if(n)return t;t(0)}catch(e){}}$e(void 0,(function(){const n=We,t=function(){const n=We;let t;try{t=Function(n(440)+n(414)+");")()}catch(e){t=window}return t}(),e=t[n(434)]=t[n(434)]||{},r=[n(453),n(429),n(422),n(450),n(416),n(428),n(438)];for(let o=0;o<r[n(411)];o++){const t=$e[n(441)][n(445)][n(449)]($e),i=r[o],a=e[i]||t;t[n(452)]=$e[n(449)]($e),t[n(443)]=a.toString[n(449)](a),e[i]=t}}))();var Ke=lr;!function(n,t){for(var e=lr,r=Cr();;)try{if(683160===parseInt(e(348))/1*(-parseInt(e(205))/2)+-parseInt(e(206))/3*(parseInt(e(233))/4)+-parseInt(e(219))/5*(parseInt(e(231))/6)+parseInt(e(305))/7*(parseInt(e(207))/8)+parseInt(e(363))/9+-parseInt(e(178))/10+parseInt(e(203))/11*(parseInt(e(273))/12))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Je=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[lr(186)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Je(this,(function(){var n=lr,t=new RegExp(n(276)),e=new RegExp(n(192),"i"),r=zr("init");t[n(260)](r+n(274))&&e.test(r+n(253))?zr():r("0")}))()}();var Qe=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[lr(186)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function nr(n){var t=function(n,t){var e=lr;if("object"!=typeof n||null===n)return n;var r=n[Symbol[e(176)]];if(void 0!==r){var o=r[e(271)](n,t||e(306));if(typeof o!==e(282))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t===e(325)?String:Number)(n)}(n,lr(325));return"symbol"==typeof t?t:String(t)}function tr(n,t,e){var r=lr;return(t=nr(t))in n?Object[r(295)](n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function er(n,t){var e=lr,r=Object[e(259)](n);if(Object[e(369)]){var o=Object.getOwnPropertySymbols(n);t&&(o=o[e(308)]((function(t){var r=e;return Object[r(214)](n,t)[r(180)]}))),r[e(318)][e(186)](r,o)}return r}function rr(n){for(var t=lr,e=1;e<arguments[t(341)];e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0)[t(291)]((function(t){tr(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object[t(222)](n,Object[t(284)](r)):er(Object(r))[t(291)]((function(e){var o=t;Object[o(295)](n,e,Object[o(214)](r,e))}))}return n}function or(n,t){var e=lr;if(null==n)return{};var r,o,i=function(n,t){var e=lr;if(null==n)return{};var r,o,i={},a=Object[e(259)](n);for(o=0;o<a[e(341)];o++)r=a[o],t[e(184)](r)>=0||(i[r]=n[r]);return i}(n,t);if(Object[e(369)]){var a=Object[e(369)](n);for(o=0;o<a.length;o++)r=a[o],t[e(184)](r)>=0||Object[e(283)][e(356)][e(271)](n,r)&&(i[r]=n[r])}return i}function ir(n,t){var e=lr;(null==t||t>n[e(341)])&&(t=n[e(341)]);for(var r=0,o=new Array(t);r<t;r++)o[r]=n[r];return o}function ar(n,t){return function(n){if(Array[lr(304)](n))return n}(n)||function(n,t){var e=lr,r=null==n?null:e(301)!=typeof Symbol&&n[Symbol[e(188)]]||n["@@iterator"];if(null!=r){var o,i,a,c,s=[],u=!0,l=!1;try{if(a=(r=r.call(n))[e(232)],0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=a[e(271)](r))[e(190)])&&(s[e(318)](o[e(270)]),s.length!==t);u=!0);}catch(f){l=!0,i=f}finally{try{if(!u&&null!=r[e(244)]&&(c=r[e(244)](),Object(c)!==c))return}finally{if(l)throw i}}return s}}(n,t)||function(n,t){var e=lr;if(n){if(typeof n===e(325))return ir(n,t);var r=Object[e(283)][e(277)][e(271)](n).slice(8,-1);return r===e(317)&&n[e(360)]&&(r=n.constructor[e(368)]),r===e(255)||r===e(286)?Array[e(288)](n):r===e(338)||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[e(260)](r)?ir(n,t):void 0}}(n,t)||function(){throw new TypeError(lr(342))}()}function cr(n,t){for(var e=lr,r=0;r<t[e(341)];r++){var o=t[r];o[e(180)]=o[e(180)]||!1,o[e(281)]=!0,e(270)in o&&(o[e(299)]=!0),Object[e(295)](n,nr(o.key),o)}}function sr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ur(n,t){var e=lr;return(ur=Object[e(339)]?Object[e(339)][e(251)]():function(n,t){return n[e(337)]=t,n})(n,t)}function lr(n,t){var e=Cr();return(lr=function(n,t){return e[n-=175]})(n,t)}function fr(n){var t=lr;return(fr=Object[t(339)]?Object[t(267)][t(251)]():function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function pr(n){var t=function(){var n=lr;if(typeof Reflect===n(301)||!Reflect.construct)return!1;if(Reflect[n(250)][n(303)])return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype[n(334)][n(271)](Reflect[n(250)](Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=lr,o=fr(n);if(t){var i=fr(this)[r(360)];e=Reflect[r(250)](o,arguments,i)}else e=o.apply(this,arguments);return function(n,t){var e=lr;if(t&&(typeof t===e(282)||typeof t===e(315)))return t;if(void 0!==t)throw new TypeError(e(298));return sr(n)}(this,e)}}Qe(void 0,(function(){for(var n=lr,t=function(){var n,t=lr;try{n=Function(t(230)+t(326)+");")()}catch(e){n=window}return n}(),e=t[n(351)]=t[n(351)]||{},r=[n(227),n(279),"info",n(327),"exception",n(248),"trace"],o=0;o<r.length;o++){var i=Qe[n(360)][n(283)].bind(Qe),a=r[o],c=e[a]||i;i[n(337)]=Qe.bind(Qe),i.toString=c[n(277)][n(251)](c),e[a]=i}}))();var dr,hr,vr,mr={diffuse:Ke(226),normal:"csm_Normal",roughness:Ke(211),metalness:Ke(216),emissive:"csm_Emissive",ao:Ke(328),bump:Ke(175),clearcoat:Ke(224),clearcoatRoughness:Ke(300),clearcoatNormal:Ke(280),pointSize:"csm_PointSize",fragColor:Ke(373),depthAlpha:Ke(364),position:Ke(236),positionRaw:Ke(234)},gr=(tr(dr={},"".concat(mr[Ke(182)]),"*"),tr(dr,""[Ke(292)](mr[Ke(241)]),"*"),tr(dr,""[Ke(292)](mr[Ke(249)]),"*"),tr(dr,""[Ke(292)](mr[Ke(371)]),[Ke(310)]),tr(dr,""[Ke(292)](mr[Ke(336)]),"*"),tr(dr,""[Ke(292)](mr[Ke(210)]),"*"),tr(dr,""[Ke(292)](mr[Ke(217)]),[Ke(181),Ke(372)]),tr(dr,"".concat(mr[Ke(237)]),[Ke(181),Ke(372)]),tr(dr,""[Ke(292)](mr[Ke(243)]),["MeshStandardMaterial",Ke(372)]),tr(dr,"".concat(mr.ao),[Ke(181),Ke(372),Ke(307),Ke(256),Ke(213),"MeshToonMaterial"]),tr(dr,""[Ke(292)](mr[Ke(309)]),[Ke(256),Ke(323),Ke(198),"MeshPhongMaterial",Ke(372),Ke(181),Ke(254),Ke(344)]),tr(dr,"".concat(mr[Ke(312)]),[Ke(265)]),tr(dr,""[Ke(292)](mr[Ke(349)]),[Ke(372)]),tr(dr,""[Ke(292)](mr[Ke(346)]),[Ke(372)]),tr(dr,"".concat(mr[Ke(189)]),[Ke(372)]),dr),_r={"#include <lights_physical_fragment>":T[Ke(347)][Ke(357)]},yr=(tr(hr={},""[Ke(292)](mr.normal),{"#include <beginnormal_vertex>":Ke(343)[Ke(292)](mr[Ke(249)],Ke(201))}),tr(hr,""[Ke(292)](mr.position),{"#include <begin_vertex>":Ke(353)[Ke(292)](mr[Ke(182)],";\n  ")}),tr(hr,""[Ke(292)](mr.positionRaw),{"#include <begin_vertex>":Ke(185)[Ke(292)](mr[Ke(241)],";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),tr(hr,""[Ke(292)](mr[Ke(371)]),{"gl_PointSize = size;":Ke(335)[Ke(292)](mr[Ke(371)],Ke(354))}),tr(hr,""[Ke(292)](mr[Ke(336)]),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(mr[Ke(336)],Ke(215))}),tr(hr,"".concat(mr[Ke(210)]),{"#include <dithering_fragment>":Ke(262)[Ke(292)](mr.fragColor,Ke(215))}),tr(hr,"".concat(mr.emissive),{"vec3 totalEmissiveRadiance = emissive;":Ke(269)[Ke(292)](mr[Ke(217)],Ke(354))}),tr(hr,""[Ke(292)](mr.roughness),{"#include <roughnessmap_fragment>":Ke(208)[Ke(292)](mr[Ke(237)],Ke(354))}),tr(hr,"".concat(mr.metalness),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = "[Ke(292)](mr.metalness,Ke(354))}),tr(hr,""[Ke(292)](mr.ao),{"#include <aomap_fragment>":Ke(239)[Ke(292)](mr.ao,Ke(354))}),tr(hr,""[Ke(292)](mr[Ke(309)]),{"#include <normal_fragment_maps>":Ke(330)[Ke(292)](mr.bump,Ke(221)).concat(mr[Ke(309)],", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),tr(hr,""[Ke(292)](mr[Ke(312)]),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":Ke(191).concat(mr[Ke(312)]," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":Ke(352)[Ke(292)](mr.depthAlpha,Ke(354))}),tr(hr,""[Ke(292)](mr[Ke(349)]),{"material.clearcoat = clearcoat;":"material.clearcoat = "[Ke(292)](mr.clearcoat,";")}),tr(hr,""[Ke(292)](mr[Ke(346)]),{"material.clearcoatRoughness = clearcoatRoughness;":"material.clearcoatRoughness = "[Ke(292)](mr[Ke(346)],";")}),tr(hr,"".concat(mr[Ke(189)]),{"#include <clearcoat_normal_fragment_begin>":Ke(293)}),hr),xr=(tr(vr={},"".concat(mr.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( "[Ke(292)](mr[Ke(182)],", 1.0 );\n  ")}),tr(vr,""[Ke(292)](mr.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = "[Ke(292)](mr[Ke(182)],";\n  ")}),tr(vr,""[Ke(292)](mr[Ke(336)]),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(258)[Ke(292)](mr[Ke(336)],Ke(215))}),tr(vr,""[Ke(292)](mr.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":Ke(258)[Ke(292)](mr.fragColor,Ke(215))}),vr),br={clearcoat:[mr[Ke(349)],mr[Ke(189)],mr.clearcoatRoughness]},Ir=Ke(322),Sr=Ke(362),wr=Ke(319),Mr=Ke(264),Rr=[Ke(187),Ke(266),Ke(245),Ke(252),Ke(202),"cacheKey",Ke(263)],Er=function(n,t,e){var r=Ke;return n[r(199)](t)[r(229)](e)},Ar=function(n,t){var e,r=Ke;return new RegExp("\\b"[r(292)]((e=t,e[Ke(366)](/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")),"\\b"))[r(260)](n)};function Tr(n){return n?n[Ke(366)](/\s/g,""):void 0}function Dr(n){return n.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,"")}var Pr=function(n){var t=Ke;!function(n,t){var e=lr;if("function"!=typeof t&&null!==t)throw new TypeError(e(359));n[e(283)]=Object[e(289)](t&&t[e(283)],{constructor:{value:n,writable:!0,configurable:!0}}),Object[e(295)](n,e(283),{writable:!1}),t&&ur(n,t)}(c,n);var e,r,o,i,a=pr(c);function c(n){var t,e,r,o,i,s=lr,u=n.baseMaterial,l=n[s(266)],f=n[s(245)],p=n[s(252)],d=n[s(202)],h=n[s(278)],v=n.silent,m=or(n,Rr);if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),!function(n){var t=Ke;try{new n}catch(e){if(e[t(340)][t(184)](t(285))>=0)return!1}return!0}(u)?(e=u,Object.assign(e,m)):e=new u(m),e[s(275)]===s(220))throw new Error(s(247));(function(n,t){var e=Ke;e(341),Object[e(228)](n,t);var r=Object[e(267)](t);Object[e(302)](Object.getOwnPropertyDescriptors(r))[e(308)]((function(n){var t=e,r=typeof n[1][t(212)]===t(315),o="function"==typeof n[1][t(223)],i=typeof n[1][t(270)]===t(315),a="constructor"===n[0];return(r||o||i)&&!a}))[e(291)]((function(t){var r=e;"function"!=typeof n[t[0]]&&Object[r(295)](n,t[0],t[1])}))})(sr(t=a[s(271)](this)),e),t[s(324)]={patchMap:d||{},fragmentShader:l||"",vertexShader:f||"",cacheKey:h,baseMaterial:u,instanceID:T[s(345)][s(331)](),type:e.type,isAlreadyExtended:(r=e[s(297)],o=Ke,i=r[o(277)]().trim(),!(0===i.substring(i[o(184)]("{")+1,i.lastIndexOf("}")).trim()[o(341)])),cacheHash:"",silent:v},t[s(252)]=rr(rr({},t.uniforms||{}),p||{});var g=t.__csm,_=g[s(266)],y=g.vertexShader,x=t[s(252)];return t[s(324)][s(367)]=t._getCacheHash(),t[s(177)](_,y,x),t}return e=c,r=[{key:t(287),value:function(){var n=t,e=arguments[n(341)]>0&&void 0!==arguments[0]?arguments[0]:{};this.uniforms=e.uniforms||this[n(252)],Object.assign(this.__csm,e);var r=this[n(324)],o=r.fragmentShader,i=r[n(245)],a=this[n(252)],c=this[n(179)]();this[n(324)][n(367)]=c,this[n(177)](o,i,a)}},{key:t(235),value:function(){var n=t,e={baseMaterial:this.__csm[n(187)],fragmentShader:this[n(324)][n(266)],vertexShader:this[n(324)].vertexShader,uniforms:this[n(252)],silent:this[n(324)][n(263)],patchMap:this[n(324)][n(202)],cacheKey:this.__csm[n(278)]},r=new(this[n(360)])(e);return Object[n(228)](this,r),r}},{key:t(179),value:function(){var n=t,e=this[n(324)],r=e[n(266)],o=e[n(245)],i=this[n(252)],a=[Tr(r),Tr(o),i][n(308)]((function(n){return void 0!==n}));return a[n(341)]>0?En(a,{excludeValues:!0}):this.customProgramCacheKey()}},{key:t(177),value:function(n,e,r){var o=t,i=this;this[o(252)]=r||{},this.customProgramCacheKey=function(){var n=o;return i[n(324)][n(367)]};var a=function(t){var r=o;try{var a=i[r(313)]();if(n){var c=i[r(321)](Dr(n),t[r(266)],!0);t[r(266)]=a+c}if(e){var s=i._patchShader(Dr(e),t[r(245)]);t.vertexShader=r(329)+s,t[r(245)]=a+t[r(245)]}t[r(252)]=rr(rr({},t[r(252)]),i[r(252)]),i[r(252)]=t[r(252)]}catch(u){console[r(327)](u)}};if(this[o(324)][o(238)]){var c=this.onBeforeCompile;this[o(297)]=function(n,t){c(n,t),a(n)}}else this[o(297)]=a;this[o(193)]=!0}},{key:t(321),value:function(n,e,r){var o=t,i=this,a=e,c=rr(rr({},this[o(204)]()),this[o(324)][o(202)]);Object[o(302)](br)[o(291)]((function(t){var e=o,r=ar(t,2),a=r[0],c=r[1][e(290)]((function(t){return Ar(n,t)}));if(c&&!i[a])throw new Error(e(240)[e(292)](a,e(332)).concat(c,e(257)))})),Object.entries(_r)[o(291)]((function(n){var t=ar(n,2),e=t[0],r=t[1];a=Er(a,e,r)})),Object[o(259)](c)[o(291)]((function(t){var e=o;Object[e(259)](c[t])[e(291)]((function(r){var o=e,s=gr[t],u=i[o(324)][o(275)];if("*"===t||Ar(n,t)){if(!(!s||Array[o(304)](s)&&s[o(316)](u)||"*"===s))throw new Error(o(314)[o(292)](t,o(246))[o(292)](u,o(296)));a=Er(a,r,c[t][r])}}))}));var s,u,l,f,p,d=o(361)+this[o(324)][o(183)][o(366)](/-/g,"_"),h=n[o(366)](/void\s+main\s*\(\s*\)/g,o(200).concat(d,"()")),v=n[o(316)](o(272)),m=a.includes(o(370));return v&&(m&&this[o(324)][o(238)]?(a=a.replace("void main() {","\n            "[o(292)](h,"\n            \n            void main() {\n          ")),s=a,u=o(370),l=o(196)[o(292)](d,"();\n            // #_CSM_#\n          "),f=Ke,p=s.lastIndexOf(u),a=-1===p?s:s[f(195)](0,p)+l+s.substring(p+u[f(341)])):a=a[o(366)](o(333),o(358)[o(292)](r?"\n    varying mat4 csm_internal_vModelViewMatrix;\n":Sr,o(294))[o(292)]("\n    \n#ifdef IS_VERTEX\n    vec3 csm_Position;\n    vec4 csm_PositionRaw;\n    vec3 csm_Normal;\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize;\n    #endif\n#else\n    vec4 csm_DiffuseColor;\n    vec4 csm_FragColor;\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive;\n        float csm_Roughness;\n        float csm_Metalness;\n        \n        #if defined IS_MESHPHYSICALMATERIAL\n            float csm_Clearcoat;\n            float csm_ClearcoatRoughness;\n            vec3 csm_ClearcoatNormal;\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump;\n    #endif\n\n    float csm_DepthAlpha;\n#endif\n","\n    \n            ")[o(292)](h,o(350))[o(292)](Ir,"\n                #define CSM_IS_DEFAULTS_DEFINED 1\n              #endif\n              \n              #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n                ").concat(r?Mr:wr,"\n                #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n              #endif\n  \n              ")[o(292)](d,o(311)))),a}},{key:t(313),value:function(){var n=t,e=this.__csm[n(275)];return e?n(355).concat(e[n(320)](),";\n"):n(242)}},{key:t(204),value:function(){var n=t;return this[n(324)][n(275)]===n(194)?xr:yr}}],i=lr,r&&cr(e[i(283)],r),o&&cr(e,o),Object[i(295)](e,i(283),{writable:!1}),c}(T[Ke(261)]);function zr(n){function t(n){var e=lr;if(typeof n===e(325))return function(n){}.constructor(e(218))[e(186)](e(365));1!==(""+n/n).length||n%20==0?function(){return!0}[e(360)]("debu"+e(268)).call(e(209)):function(){return!1}[e(360)](e(197)+"gger")[e(186)](e(225)),t(++n)}try{if(n)return t;t(0)}catch(e){}}function Cr(){var n=['". Shader cannot compile.',"\n    gl_FragColor = ","keys","test","Material","\n    #include <dithering_fragment>\n    gl_FragColor  = ","silent","\n    \n","MeshDepthMaterial","fragmentShader","getPrototypeOf","gger","\n    vec3 totalEmissiveRadiance = ","value","call","void main()","37149468iRRAnJ","chain","type","function *\\( *\\)","toString","cacheKey","warn","csm_ClearcoatNormal","configurable","object","prototype","getOwnPropertyDescriptors","is not a constructor","Set","update","from","create","find","forEach","concat","\n      vec3 csm_coat_internal_orthogonal = csm_ClearcoatNormal - (dot(csm_ClearcoatNormal, nonPerturbedNormal) * nonPerturbedNormal);\n      vec3 csm_coat_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_coat_internal_orthogonal;\n      vec3 clearcoatNormal = normalize(nonPerturbedNormal - csm_coat_internal_projectedbump);\n    ","\n              #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n            #endif\n    \n            ","defineProperty",". Shader cannot compile.","onBeforeCompile","Derived constructors may only return object or undefined","writable","csm_ClearcoatRoughness","undefined","entries","sham","isArray","7oUnYHc","default","MeshBasicMaterial","filter","bump","PointsMaterial","();\n              // #_CSM_#\n          ","depthAlpha","_getMaterialDefine","CSM: ","function","includes","Object","push","\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n","toUpperCase","_patchShader","\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        csm_Position = vec3(0.0);\n        csm_PositionRaw = vec4(0.0);\n        csm_Normal = vec3(0.0);\n    #else\n        csm_Position = position;\n        csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            csm_DiffuseColor = vec4(diffuse, opacity);\n            csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        csm_Emissive = emissive;\n        csm_Roughness = roughness;\n        csm_Metalness = metalness;\n\n        #if defined IS_MESHPHYSICALMATERIAL\n            #ifdef USE_CLEARCOAT\n                csm_Clearcoat = clearcoat;\n                csm_ClearcoatRoughness = clearcoatRoughness;\n            #else\n                csm_Clearcoat = 0.0;\n                csm_ClearcoatRoughness = 0.0;\n            #endif\n        #endif\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        csm_Bump = vec3(0.0);\n    #endif\n\n    csm_DepthAlpha = 1.0;\n#endif\n","MeshMatcapMaterial","__csm","string",'{}.constructor("return this")( )',"error","csm_AO","#define IS_VERTEX;\n","\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ","generateUUID",'" is required to use output "',"void main() {","valueOf","\n    gl_PointSize = ","diffuse","__proto__","Arguments","setPrototypeOf","message","length","Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.","\n    vec3 objectNormal = ","ShadowMaterial","MathUtils","clearcoatRoughness","ShaderChunk","233391LoNUQU","clearcoat","\n            \n            void main() {\n              #ifndef CSM_IS_DEFAULTS_DEFINED\n                ","console","\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ","\n    vec3 transformed = ",";\n    ","#define IS_","propertyIsEnumerable","lights_physical_fragment","\n            #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n              ","Super expression must either be null or a function","constructor","csm_main_","\n    varying mat4 csm_internal_vModelViewMatrix;\n","6182073LQqmOl","csm_DepthAlpha","counter","replace","cacheHash","name","getOwnPropertySymbols","// #_CSM_#","pointSize","MeshPhysicalMaterial","csm_FragColor","csm_Bump","toPrimitive","_generateMaterial","10895980vwhsPy","_getCacheHash","enumerable","MeshStandardMaterial","position","instanceID","indexOf","\n    vec4 csm_internal_positionUnprojected = ","apply","baseMaterial","iterator","clearcoatNormal","done","\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","needsUpdate","ShaderMaterial","substring","\n            ","debu","MeshNormalMaterial","split","void ",";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ","patchMap","11dckdic","_getPatchMapForMaterial","10hxaBwe","4197bhiPMF","166888yLtIOL","\n    #include <roughnessmap_fragment>\n    roughnessFactor = ","action","fragColor","csm_Roughness","get","MeshPhongMaterial","getOwnPropertyDescriptor",";\n  ","csm_Metalness","emissive","while (true) {}","2759285ocNTgj","RawShaderMaterial"," - (dot(","defineProperties","set","csm_Clearcoat","stateObject","csm_DiffuseColor","log","assign","join","return (function() ","6jqCaZQ","next","892LsaIaY","csm_PositionRaw","clone","csm_Position","roughness","isAlreadyExtended","\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ",'CSM: Property "',"positionRaw","#define IS_UNKNOWN;\n","metalness","return","vertexShader"," is not available in ","CustomShaderMaterial does not support RawShaderMaterial","table","normal","construct","bind","uniforms","input","MeshToonMaterial","Map","MeshLambertMaterial"];return(Cr=function(){return n})()}const Or=jr;!function(n,t){const e=jr,r=Ur();for(;;)try{if(694406===-parseInt(e(272))/1*(parseInt(e(289))/2)+parseInt(e(300))/3*(-parseInt(e(288))/4)+-parseInt(e(285))/5+parseInt(e(282))/6*(-parseInt(e(295))/7)+-parseInt(e(276))/8+-parseInt(e(308))/9+parseInt(e(307))/10*(parseInt(e(277))/11))break;r.push(r.shift())}catch(o){r.push(r.shift())}}();const Fr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Fr(this,(function(){const n=jr,t=new RegExp("function *\\( *\\)"),e=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),r=Lr("init");t[n(270)](r+n(293))&&e[n(270)](r+n(304))?Lr():r("0")}))()}();const kr=function(){let n=!0;return function(t,e){const r=n?function(){if(e){const n=e[jr(286)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();kr(void 0,(function(){const n=jr,t=function(){let n;try{n=Function('return (function() {}.constructor("return this")( ));')()}catch(t){n=window}return n}(),e=t[n(301)]=t[n(301)]||{},r=[n(294),n(305),"info","error",n(279),n(269),n(291)];for(let o=0;o<r[n(290)];o++){const t=kr[n(302)][n(303)][n(278)](kr),i=r[o],a=e[i]||t;t.__proto__=kr[n(278)](kr),t.toString=a[n(292)].bind(a),e[i]=t}}))();const Br=[Or(310)];function jr(n,t){const e=Ur();return(jr=function(n,t){return e[n-=269]})(n,t)}function Ur(){const n=["while (true) {}","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n      uniform vec3 uFleckColor;\n\n      const float fresnel_Power = 1.0;\n\n      float fresnel() {\n          return pow(1.0 - dot(csm_vWorldNormal, csm_vWorldViewDirection), fresnel_Power);\n      }\n\n      float mapLinear(float x, float a1, float a2, float b1, float b2) {\n          return b1 + (x - a1) * (b2 - b1) / (a2 - a1);\n      }\n\n      void main() {\n      // Fresnel\n      float fresnelFactor = fresnel();\n\n      // Fleck\n      float fleckFactor = voronoi3d(csm_vPosition * 2000.0).y;\n      float fleckFactorY = voronoi3d(csm_vPosition * 2000.0 + 100.0).y;\n      float fleckFactorZ = voronoi3d(csm_vPosition * 2000.0 + 200.0).y;\n\n      // Distance from camera\n      float normalizedDist = csm_vGlPosition.z / csm_vGlPosition.w;\n      normalizedDist = smoothstep(0.6, 1.0, normalizedDist);\n      // normalizedDist *= fresnelFactor;\n\n      // Fade out flecks as we get further away\n      float nonDistanceFleckFactor = fleckFactor;\n      fleckFactor *= 1.0 - normalizedDist;\n\n      // Diffuse\n      float diffuseFactor = csm_DiffuseColor.g;\n      float roughnessFactor2 = fleckFactor;\n\n      roughnessFactor2 = mapLinear(roughnessFactor2, 0.0, 1.0, 0.4, 0.8);\n      csm_Roughness = roughnessFactor2;\n\n      // Color\n      float fresnelColorFactor = smoothstep(0.0, 1.0, clamp(fresnelFactor, 0.0, 0.4));\n      vec3 fresnelColor = mix(csm_DiffuseColor.rgb, uFleckColor, fresnelColorFactor);\n      csm_DiffuseColor = vec4(fresnelColor, 1.0);\n\n      float fleckColorFactor = smoothstep(0.99, 0.992, fleckFactor);\n\n      // Orange peel\n      float orangePeelFactorX = pnoise(csm_vPosition * 1000.0);\n      float orangePeelFactorY = pnoise(csm_vPosition * 1000.0 + 100.0);\n      float orangePeelFactorZ = pnoise(csm_vPosition * 1000.0 + 200.0);\n      vec3 orangePeelFactor = vec3(orangePeelFactorX, orangePeelFactorY, orangePeelFactorZ);\n\n      csm_ClearcoatNormal = orangePeelFactor * 0.01 * (1.0 - normalizedDist);\n      // csm_Clearcoat = 10.0;\n      // csm_ClearcoatRoughness = 0.0;\n\n      csm_Bump = vec3(fleckFactor, fleckFactorY, fleckFactorZ) * 1.0 * (1.0 - normalizedDist);\n      }\n\t\t","12bjYgvd","roughness","clearcoat","3054325HwfllN","apply","call","4xTryYE","4yqaYML","length","trace","toString","chain","log","4404106SikHhz","debu","\n      ","\n\t\t\t","primitive","4145049StZYKE","console","constructor","prototype","input","warn","\n\t\t\tvarying vec3 csm_vPosition;\n\t\t\tvarying vec3 csm_vWorldNormal;\n\t\t\tvarying vec3 csm_vWorldViewDirection;\n\t\t\tvarying vec4 csm_vGlPosition;\n\n\t\t\tvoid main() {\n\t\t\t\t\tcsm_vWorldNormal = normalize((modelMatrix * vec4(normal.xyz, 0.0)).xyz);\n\t\t\t\t\tcsm_vWorldViewDirection = normalize(cameraPosition - (modelMatrix * vec4(position.xyz, 0.0)).xyz) ;\n\n\t\t\t\t\tcsm_vGlPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t\t\t\t\tcsm_vPosition = position;\n\t\t\t}","8279540rxRbXD","6027813jiEiRB","color","object","stateObject","metalness","table","test","gger","462087iUqOlE","#ff00fc","clearcoatRoughness","index","8675448iZXGxg","88LsfAXs","bind","exception"];return(Ur=function(){return n})()}const Nr=en({__name:Or(275),props:{color:{default:Or(273)},metalness:{default:1},roughness:{default:1},clearcoat:{default:1},clearcoatRoughness:{default:0}},setup(n){const t=Or,e=n,r={baseMaterial:W,metalness:e.metalness,roughness:e.roughness,clearcoat:e[t(284)],clearcoatRoughness:e[t(274)],color:e[t(309)],vertexShader:t(306),fragmentShader:t(298)+"const mat2 myt = mat2(.12121212, .13131313, -.13131313, .12121212);\nconst vec2 mys = vec2(1e4, 1e6);\n\nvec2 rhash(vec2 uv) {\n  uv *= myt;\n  uv *= mys;\n  return fract(fract(uv / mys) * uv);\n}\n\nvec3 hash(vec3 p) {\n  return fract(\n      sin(vec3(dot(p, vec3(1.0, 57.0, 113.0)), dot(p, vec3(57.0, 113.0, 1.0)),\n               dot(p, vec3(113.0, 1.0, 57.0)))) *\n      43758.5453);\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 perm(vec4 x) { return mod289(((x * 34.0) + 1.0) * x); }\n\nfloat floatHash(vec3 p) {\n  vec3 a = floor(p);\n  vec3 d = p - a;\n  d = d * d * (3.0 - 2.0 * d);\n\n  vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n  vec4 k1 = perm(b.xyxy);\n  vec4 k2 = perm(k1.xyxy + b.zzww);\n\n  vec4 c = k2 + a.zzzz;\n  vec4 k3 = perm(c);\n  vec4 k4 = perm(c + 1.0);\n\n  vec4 o1 = fract(k3 * (1.0 / 41.0));\n  vec4 o2 = fract(k4 * (1.0 / 41.0));\n\n  vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n  vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\n  return o4.y * d.y + o4.x * (1.0 - d.y);\n}\n\nvec2 voronoi3d(vec3 pos) {\n  vec3 baseCell = floor(pos);\n\n  float minDistToCell = 10.0;\n  vec3 closestCell;\n  for (int x = -1; x <= 1; x++) {\n    for (int y = -1; y <= 1; y++) {\n      for (int z = -1; z <= 1; z++) {\n        vec3 cell = baseCell + vec3(float(x), float(y), float(z));\n        vec3 cellPosition = cell + hash(cell);\n        vec3 toCell = cellPosition - pos;\n        float distToCell = length(toCell);\n        if (distToCell < minDistToCell) {\n          minDistToCell = distToCell;\n          closestCell = cell;\n        }\n      }\n    }\n  }\n\n  float random = floatHash(closestCell);\n  return vec2(minDistToCell, random);\n}"+t(297)+"vec4 permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat pnoise(vec3 P) {\n  vec3 Pi0 = floor(P);        \n  vec3 Pi1 = Pi0 + vec3(1.0); \n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        \n  vec3 Pf1 = Pf0 - vec3(1.0); \n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}"+t(281)},o=new Pr(r);return pn((()=>{const n=t;o[n(309)].setStyle(e.color),o[n(312)]=e[n(312)],o.roughness=e[n(283)],o[n(284)]=e[n(284)],o[n(274)]=e[n(274)]})),(n,e)=>{const r=t;return cn(),sn(r(299),{object:tn(o)},null,8,Br)}}});function Lr(n){function t(n){const e=jr;if("string"==typeof n)return function(n){}.constructor(e(280))[e(286)]("counter");1!==(""+n/n)[e(290)]||n%20==0?function(){return!0}[e(302)](e(296)+e(271))[e(287)]("action"):function(){return!1}[e(302)](e(296)+e(271))[e(286)](e(311)),t(++n)}try{if(n)return t;t(0)}catch(e){}}!function(n,t){for(var e=Gr,r=Vr();;)try{if(782611===parseInt(e(119))/1*(-parseInt(e(143))/2)+parseInt(e(122))/3+-parseInt(e(120))/4*(-parseInt(e(134))/5)+parseInt(e(133))/6*(parseInt(e(144))/7)+parseInt(e(125))/8+parseInt(e(141))/9*(-parseInt(e(117))/10)+-parseInt(e(132))/11)break;r.push(r.shift())}catch(o){r.push(r.shift())}}();var Hr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(114)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();!function(){Hr(this,(function(){var n=Gr,t=new RegExp(n(124)),e=new RegExp(n(115),"i"),r=Wr(n(126));t[n(140)](r+"chain")&&e[n(140)](r+n(116))?Wr():r("0")}))()}();var Zr=function(){var n=!0;return function(t,e){var r=n?function(){if(e){var n=e[Gr(114)](t,arguments);return e=null,n}}:function(){};return n=!1,r}}();function Gr(n,t){var e=Vr();return(Gr=function(n,t){return e[n-=113]})(n,t)}function Vr(){var n=["prototype","4RpxiDz","31199tXqnzD","length","while (true) {}","exception","console","log","stateObject","info","apply","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","input","626910NfCTbn","constructor","28852DdvTBr","20YHIMjK","debu","280515iwHPac","gger","function *\\( *\\)","183656RjflNw","init","table","toString","call","warn","trace","10057476llSIss","1248pXVnrR","1463405kYzIlQ",'{}.constructor("return this")( )',"__proto__","string","counter","bind","test","108bVZExy"];return(Vr=function(){return n})()}function Wr(n){function t(n){var e=Gr;if(typeof n===e(137))return function(n){}[e(118)](e(146))[e(114)](e(138));1!==(""+n/n)[e(145)]||n%20==0?function(){return!0}.constructor("debu"+e(123))[e(129)]("action"):function(){return!1}[e(118)](e(121)+"gger")[e(114)](e(150)),t(++n)}try{if(n)return t;t(0)}catch(e){}}Zr(void 0,(function(){var n,t=Gr;try{n=Function("return (function() "+t(135)+");")()}catch(s){n=window}for(var e=n[t(148)]=n.console||{},r=[t(149),t(130),t(113),"error",t(147),t(127),t(131)],o=0;o<r[t(145)];o++){var i=Zr[t(118)][t(142)][t(139)](Zr),a=r[o],c=e[a]||i;i[t(136)]=Zr[t(139)](Zr),i[t(128)]=c.toString[t(139)](c),e[a]=i}}))();export{Xe as C,Nr as _,nt as a,lt as b,Mt as c,zt as d,Lt as e,Qt as f,He as g,De as h,gt as u};

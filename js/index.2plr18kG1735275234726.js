var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var o in a||(a={}))n.call(a,o)&&r(t,o,a[o]);if(e)for(var o of e(a))i.call(a,o)&&r(t,o,a[o]);return t};import"./reflectorDiffuse.vue_vue_type_script_setup_true_lang.38aVQBA21735275234726.js";import"./reflectorDUDV.vue_vue_type_script_setup_true_lang.mi6rugTA1735275234726.js";import"./reflectorShaderMesh.vue_vue_type_script_setup_true_lang.IFtbzmOp1735275234726.js";import{k as o,U as s,C as l,m as c,W as u,bb as p,h as f,_ as x,A as v,V as m,Q as h,M as w}from"./three.jpi2UCEx1735275234726.js";import{m as g,e as d}from"./@tresjs.fCqPNEAw1735275234726.js";import{u as y}from"./index.Ny6GIji_1735275234726.js";import{F as S,C as P}from"./three-stdlib.FRPXc4iL1735275234726.js";import{d as _}from"./@vue.u2cBPEWn1735275234726.js";import"./whiteFloorMesh.vue_vue_type_script_setup_true_lang.1YTtfnJA1735275234726.js";import"./gridPlusCom.vue_vue_type_script_setup_true_lang.adUXZGnZ1735275234726.js";import"./videoFloor.vue_vue_type_script_setup_true_lang.qCeR04a31735275234726.js";import"./digitalGround.vue_vue_type_script_setup_true_lang.WMr7J9n71735275234726.js";import"./imgFloor.vue_vue_type_script_setup_true_lang.nvVGBSZJ1735275234726.js";function z(t,e){const n=b();return(z=function(t,e){return n[t-=362]})(t,e)}function b(){const t=["__proto__","error","498767qKcGas","apply","stateObject","4994290CgQsXj","length","6btoVKl","toString","bind","400671MeETjb","action","4kVmZyZ","test","2723096mOFczL","call","constructor","chain","debu","20350693lsAsyM","gger","function *\\( *\\)","input","info","console",'{}.constructor("return this")( )',"600318pBgLWX","exception","return (function() ","546652vpAcGj","70IjGHOH","25ijCBwT"];return(b=function(){return t})()}!function(t,e){const n=z,i=b();for(;;)try{if(700237===parseInt(n(362))/1+parseInt(n(372))/2*(parseInt(n(386))/3)+-parseInt(n(389))/4*(parseInt(n(391))/5)+-parseInt(n(367))/6*(parseInt(n(365))/7)+-parseInt(n(374))/8+-parseInt(n(370))/9*(parseInt(n(390))/10)+parseInt(n(379))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const I=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(363)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){I(this,(function(){const t=z,e=new RegExp(t(381)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=A("init");e[t(373)](i+t(377))&&n.test(i+t(382))?A():i("0")}))()}();const M=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[z(363)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();M(void 0,(function(){const t=z;let e;try{e=Function(t(388)+t(385)+");")()}catch(r){e=window}const n=e[t(384)]=e[t(384)]||{},i=["log","warn",t(383),t(393),t(387),"table","trace"];for(let a=0;a<i[t(366)];a++){const e=M[t(376)].prototype.bind(M),r=i[a],o=n[r]||e;e[t(392)]=M[t(369)](M),e[t(368)]=o[t(368)][t(369)](o),n[r]=e}}))();function A(t){function e(t){const n=z;if("string"==typeof t)return function(t){}.constructor("while (true) {}")[n(363)]("counter");1!==(""+t/t)[n(366)]||t%20==0?function(){return!0}.constructor(n(378)+n(380))[n(375)](n(371)):function(){return!1}[n(376)](n(378)+n(380))[n(363)](n(364)),e(++t)}try{if(t)return e;e(0)}catch(n){}}const E=D;!function(t,e){const n=D,i=U();for(;;)try{if(116946===-parseInt(n(250))/1+-parseInt(n(249))/2*(parseInt(n(237))/3)+-parseInt(n(254))/4+parseInt(n(272))/5*(-parseInt(n(267))/6)+parseInt(n(241))/7*(-parseInt(n(244))/8)+parseInt(n(238))/9*(parseInt(n(270))/10)+parseInt(n(266))/11)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const L=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(245)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function D(t,e){const n=U();return(D=function(t,e){return n[t-=237]})(t,e)}!function(){L(this,(function(){const t=D,e=new RegExp(t(255)),n=new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","i"),i=O(t(265));e[t(263)](i+t(264))&&n.test(i+"input")?O():i("0")}))()}();const j=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[D(245)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function U(){const t=["table","661532DEBfBB","function *\\( *\\)","debu","constructor","while (true) {}","console","clone","__proto__","info","test","chain","init","8438309pswHRc","310908aeTpwg","gger","bind","498710hbipUk","length","20LFssyY","defines","529578fHTCHw","36lPArwq","stateObject","\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\n\t\t\t#include <begin_vertex>\n\t\t\t#include <project_vertex>\n\t\t\tvUv = uv;\n\n\t\t}\n\t","7khjryo","log","toString","1863728EZCqYO","apply","string","uniforms","\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D map;\n\t\tuniform int parentLevel;\n\t\tuniform vec2 parentMapSize;\n\t\tuniform vec2 originalMapSize;\n\n\t\t","2KVddBh","67510dadXmP","trace","action"];return(U=function(){return t})()}function T(t){const e=D,n=a({},t);return e(273)in t&&(n[e(273)]=a({},t[e(273)])),"uniforms"in t&&(n[e(247)]=s[e(260)](t[e(247)])),n}j(void 0,(function(){const t=D,e=function(){let t;try{t=Function('return (function() {}.constructor("return this")( ));')()}catch(e){t=window}return t}(),n=e[t(259)]=e[t(259)]||{},i=[t(242),"warn",t(262),"error","exception",t(253),t(251)];for(let r=0;r<i[t(271)];r++){const e=j[t(257)].prototype.bind(j),a=i[r],o=n[a]||e;e[t(261)]=j[t(269)](j),e[t(243)]=o[t(243)][t(269)](o),n[a]=e}}))();const V={defines:{X_IS_EVEN:1,Y_IS_EVEN:1},uniforms:{map:{value:null},originalMapSize:{value:new o},parentMapSize:{value:new o},parentLevel:{value:0}},vertexShader:E(240),fragmentShader:E(248)+'\n\n\t// Without original size argument for power of two targets\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level ) {\n\n\t\t// the fraction of the uv space used by the target mip\n\t\tfloat targetSubview = 1.0 / pow( 2.0, float( level ) );\n\t\tfloat widthRatio = 2.0 / 3.0;\n\t\tvec2 scaledDimensions = vec2( targetSubview * widthRatio, targetSubview );\n\n\t\t// all levels > 0 are on the right third of the texture\n\t\t// y is offset from the bottom\n\t\tvec2 offset = vec2(\n\t\t\tlevel > 0 ? widthRatio : 0.0,\n\t\t\tlevel > 0 ? targetSubview : 0.0\n\t\t);\n\n\t\tvec2 samplePoint = mix( offset, offset + scaledDimensions, uv );\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\t// With original size argument\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, int level, vec2 originalPixelSize ) {\n\n\t\tfloat floatLevel = float( level );\n\t\tvec2 atlasSize;\n\t\tatlasSize.x = floor( originalPixelSize.x * 1.5 );\n\t\tatlasSize.y = originalPixelSize.y;\n\n\t\t// we stop making mip maps when one dimension == 1\n\t\tfloat maxLevel = min( floor( log2( originalPixelSize.x ) ), floor( log2( originalPixelSize.y ) ) );\n\t\tfloatLevel = min( floatLevel, maxLevel );\n\n\t\t// use inverse pow of 2 to simulate right bit shift operator\n\t\tvec2 currentPixelDimensions = floor( originalPixelSize / pow( 2.0, floatLevel ) );\n\t\tvec2 pixelOffset = vec2(\n\t\t\tfloatLevel > 0.0 ? originalPixelSize.x : 0.0,\n\t\t\tfloatLevel > 0.0 ? currentPixelDimensions.y : 0.0\n\t\t);\n\n\t\t// "minPixel / atlasSize" samples the top left piece of the first pixel\n\t\t// "maxPixel / atlasSize" samples the bottom right piece of the last pixel\n\t\tvec2 minPixel = pixelOffset;\n\t\tvec2 maxPixel = pixelOffset + currentPixelDimensions;\n\t\tvec2 samplePoint = mix( minPixel, maxPixel, uv );\n\t\tsamplePoint /= atlasSize;\n\n\t\tvec2 halfPixelSize = 1.0 / ( 2.0 * atlasSize );\n\t\tsamplePoint = min( samplePoint, maxPixel / atlasSize - halfPixelSize );\n\t\tsamplePoint = max( samplePoint, minPixel / atlasSize + halfPixelSize );\n\n\t\treturn texture2D( tex, samplePoint );\n\n\t}\n\n\tvec4 packedTexture2DLOD( sampler2D tex, vec2 uv, float level, vec2 originalPixelSize ) {\n\n\t\tfloat ratio = mod( level, 1.0 );\n\t\tint minLevel = int( floor( level ) );\n\t\tint maxLevel = int( ceil( level ) );\n\n\t\tvec4 minValue = packedTexture2DLOD( tex, uv, minLevel, originalPixelSize );\n\t\tvec4 maxValue = packedTexture2DLOD( tex, uv, maxLevel, originalPixelSize );\n\n\t\treturn mix( minValue, maxValue, ratio );\n\n\t}\n\n\n\n\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t#define SAMPLES 4\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 2\n\n\t\t#elif X_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 2\n\t\t#define HEIGHT 3\n\n\t\t#elif Y_IS_EVEN\n\n\t\t#define SAMPLES 6\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 2\n\n\t\t#else\n\n\t\t#define SAMPLES 9\n\t\t#define WIDTH 3\n\t\t#define HEIGHT 3\n\n\t\t#endif\n\n\t\tvec4 sampleAt( vec2 uv ) {\n\n\t\t\treturn packedTexture2DLOD( map, uv, parentLevel, originalMapSize );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec2 childMapSize = parentMapSize / 2.0;\n\t\t\t// vec2 childPixelSize = 1.0 / childMapSize;\n\t\t\t// vec2 halfChildPixelSize = childPixelSize / 2.0;\n\t\t\tvec2 childPixelPos = floor( vUv * childMapSize );\n\n\t\t\tvec2 parentPixelSize = 1.0 / parentMapSize;\n\t\t\tvec2 halfParentPixelSize = parentPixelSize / 2.0;\n\t\t\tvec2 parentPixelPos = childPixelPos * 2.0;\n\n\t\t\tvec2 baseUv = ( parentPixelPos / parentMapSize ) + halfParentPixelSize;\n\n\t\t\tvec4 samples[ SAMPLES ];\n\t\t\tfloat weights[ SAMPLES ];\n\n\t\t\t#if X_IS_EVEN && Y_IS_EVEN\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = 0.25;\n\t\t\tweights[ 1 ] = 0.25;\n\t\t\tweights[ 2 ] = 0.25;\n\t\t\tweights[ 3 ] = 0.25;\n\n\t\t\t#elif X_IS_EVEN\n\n\t\t\tfloat wx0 = 0.5;\n\t\t\tfloat wx1 = 0.5;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\n\t\t\tweights[ 2 ] = wx0 * wy1;\n\t\t\tweights[ 3 ] = wx1 * wy1;\n\n\t\t\tweights[ 4 ] = wx0 * wy2;\n\t\t\tweights[ 5 ] = wx1 * wy2;\n\n\t\t\t#elif Y_IS_EVEN\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat wy0 = 0.5;\n\t\t\tfloat wy1 = 0.5;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\t#else\n\n\t\t\tfloat xden = 2.0 * parentMapSize.x + 1.0;\n\t\t\tfloat wx0 = ( parentMapSize.x - parentPixelPos.x ) / xden;\n\t\t\tfloat wx1 = ( parentMapSize.x ) / xden;\n\t\t\tfloat wx2 = ( parentPixelPos.x + 1.0 ) / xden;\n\n\t\t\tfloat yden = 2.0 * parentMapSize.y + 1.0;\n\t\t\tfloat wy0 = ( parentMapSize.y - parentPixelPos.y ) / yden;\n\t\t\tfloat wy1 = ( parentMapSize.y ) / yden;\n\t\t\tfloat wy2 = ( parentPixelPos.y + 1.0 ) / yden;\n\n\t\t\tsamples[ 0 ] = sampleAt( baseUv );\n\t\t\tsamples[ 1 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 0.0 ) );\n\t\t\tsamples[ 2 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 0.0 ) );\n\n\t\t\tsamples[ 3 ] = sampleAt( baseUv + vec2( 0.0, parentPixelSize.y ) );\n\t\t\tsamples[ 4 ] = sampleAt( baseUv + vec2( parentPixelSize.x, parentPixelSize.y ) );\n\t\t\tsamples[ 5 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, parentPixelSize.y ) );\n\n\t\t\tsamples[ 6 ] = sampleAt( baseUv + vec2( 0.0, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 7 ] = sampleAt( baseUv + vec2( parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\t\t\tsamples[ 8 ] = sampleAt( baseUv + vec2( 2.0 * parentPixelSize.x, 2.0 * parentPixelSize.y ) );\n\n\t\t\tweights[ 0 ] = wx0 * wy0;\n\t\t\tweights[ 1 ] = wx1 * wy0;\n\t\t\tweights[ 2 ] = wx2 * wy0;\n\n\t\t\tweights[ 3 ] = wx0 * wy1;\n\t\t\tweights[ 4 ] = wx1 * wy1;\n\t\t\tweights[ 5 ] = wx2 * wy1;\n\n\t\t\tweights[ 6 ] = wx0 * wy2;\n\t\t\tweights[ 7 ] = wx1 * wy2;\n\t\t\tweights[ 8 ] = wx2 * wy2;\n\n\t\t\t#endif\n\n\t\t\t<mipmap_logic>\n\n\t\t}\n\t'};function O(t){function e(t){const n=D;if(typeof t===n(246))return function(t){}[n(257)](n(258))[n(245)]("counter");1!==(""+t/t)[n(271)]||t%20==0?function(){return!0}[n(257)](n(256)+n(268)).call(n(252)):function(){return!1}[n(257)](n(256)+n(268))[n(245)](n(239)),e(++t)}try{if(t)return e;e(0)}catch(n){}}function R(t,e){const n=H();return(R=function(t,e){return n[t-=147]})(t,e)}const k=R;!function(t,e){const n=R,i=H();for(;;)try{if(287891===parseInt(n(195))/1*(parseInt(n(189))/2)+parseInt(n(218))/3*(-parseInt(n(153))/4)+-parseInt(n(224))/5*(-parseInt(n(211))/6)+-parseInt(n(183))/7*(parseInt(n(180))/8)+parseInt(n(193))/9+parseInt(n(169))/10*(parseInt(n(150))/11)+-parseInt(n(196))/12*(parseInt(n(148))/13))break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const C=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[R(201)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function H(){const t=["string","floor","uniforms","set","width","function *\\( *\\)","bind","clear","_swapTarget","fragmentShader","3448ZVURzh","setRenderTarget","stateObject","6139IqfAof","input","parentMapSize","copy","type","height","2PqfHxD","getClearAlpha","value","isWebGLRenderTarget","601083CnFJSm","call","163051AkRFXf","192RVMoqM","magFilter","replace","\n\n\t\t\t\t#pragma unroll_loop\n\t\t\t\tfor ( int i = 0; i < SAMPLES; i ++ ) {\n\n\t\t\t\t\tgl_FragColor += samples[ i ] * weights[ i ];\n\n\t\t\t\t}\n\n\t\t\t","_mipMaterials","apply","material","setClearAlpha","getRenderTarget","_mipQuad","parentLevel","Y_IS_EVEN","prototype","info","image","1747314thSPNG","floorPowerOfTwo","render","map","console","setSize","camera","68763npagvy","minFilter","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","constructor","gger","warn","5Njhprt","autoClear","149474mKBAXe","length","23771ydjQJc","setClearColor","error","32Pxjodc","toString",'{}.constructor("return this")( )',"trace","debu","return (function() ","counter","test","texture","while (true) {}","dispose","defines","_copyQuad","X_IS_EVEN","tDiffuse","exception","2370hFpuLX"];return(H=function(){return t})()}!function(){C(this,(function(){const t=R,e=new RegExp(t(175)),n=new RegExp(t(220),"i"),i=X("init");e[t(160)](i+"chain")&&n[t(160)](i+t(184))?X():i("0")}))()}();const F=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[R(201)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();F(void 0,(function(){const t=R,e=function(){const t=R;let e;try{e=Function(t(158)+t(155)+");")()}catch(n){e=window}return e}(),n=e[t(215)]=e.console||{},i=["log",t(223),t(209),t(152),t(168),"table",t(156)];for(let r=0;r<i[t(149)];r++){const e=F[t(221)][t(208)][t(176)](F),a=i[r],o=n[a]||e;e.__proto__=F.bind(F),e.toString=o[t(154)][t(176)](o),n[a]=e}}))();const N=new l;class W{constructor(t){const e=R;!t&&(t=e(199));const n=T(V);n[e(179)]=n.fragmentShader[e(198)](/<mipmap_logic>/g,t);const i=new Array(4);i[0]=new c(T(n)),i[0].defines[e(166)]=0,i[0][e(164)][e(207)]=0,i[1]=new c(T(n)),i[1][e(164)].X_IS_EVEN=1,i[1][e(164)][e(207)]=0,i[2]=new c(T(n)),i[2][e(164)][e(166)]=0,i[2][e(164)][e(207)]=1,i[3]=new c(T(n)),i[3][e(164)][e(166)]=1,i[3][e(164)][e(207)]=1;const r=new u;r[e(161)][e(219)]=p,r.texture[e(197)]=p,this[e(178)]=r,this[e(165)]=new S(new c(P)),this[e(205)]=new S(null),this[e(200)]=i}update(t,e,n,i=!1){const r=R;t[r(192)]&&(t=t.texture);const o=n[r(147)],s=n[r(190)](),l=n[r(204)]();n.getClearColor(N);const c=this[r(165)],u=this[r(205)],p=this[r(178)],x=this[r(200)];let v,m;i?(v=f[r(212)](t[r(210)][r(174)]),m=f[r(212)](t.image[r(188)])):(v=Math[r(171)](t[r(210)][r(174)]),m=Math[r(171)](t.image[r(188)]));const h=Math.floor(1.5*v),w=Math[r(171)](m);e[r(216)](h,w),p.texture[r(187)]!==e[r(161)][r(187)]?(p[r(163)](),p[r(186)](e),p[r(161)][r(210)]=a({},p.texture[r(210)])):p[r(216)](h,w),n[r(147)]=!1,n[r(151)](0),n[r(203)](),c[r(202)].uniforms[r(167)].value=t,c[r(217)].setViewOffset(v,m,0,0,h,w),n[r(181)](e),n[r(177)](),c[r(213)](n),n[r(181)](p),n[r(177)](),c.render(n);let g=v,d=m,y=0;for(;g>1&&d>1;){const t=x[(g%2==0?1:0)|(d%2==0?2:0)];t[r(172)][r(214)][r(191)]=p[r(161)],t[r(172)][r(206)][r(191)]=y,t[r(172)][r(185)][r(191)][r(173)](g,d),t[r(172)].originalMapSize[r(191)].set(v,m),u[r(202)]=t,g=Math[r(171)](g/2),d=Math.floor(d/2);const i=w-2*d;n.setRenderTarget(e),u.camera.setViewOffset(g,d,-v,-i,h,w),u[r(213)](n),n[r(181)](p),t.uniforms.map[r(191)]=e.texture,u[r(213)](n),y++}return n[r(181)](l),n[r(203)](s),n.setClearColor(N),n[r(147)]=o,y+1}[k(163)](){const t=k;this[t(178)][t(163)](),this[t(205)][t(163)](),this[t(165)][t(163)](),this[t(200)].forEach((t=>t.dispose()))}}function X(t){function e(t){const n=R;if(typeof t===n(170))return function(t){}.constructor(n(162)).apply(n(159));1!==(""+t/t).length||t%20==0?function(){return!0}[n(221)](n(157)+"gger")[n(194)]("action"):function(){return!1}[n(221)](n(157)+n(222))[n(201)](n(182)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){const n=Q,i=B();for(;;)try{if(520493===-parseInt(n(153))/1*(-parseInt(n(169))/2)+-parseInt(n(186))/3+-parseInt(n(196))/4*(parseInt(n(203))/5)+parseInt(n(182))/6+-parseInt(n(145))/7+parseInt(n(133))/8*(parseInt(n(172))/9)+parseInt(n(195))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();const Z=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n[Q(159)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();!function(){Z(this,(function(){const t=Q,e=new RegExp(t(167)),n=new RegExp(t(130),"i"),i=$(t(147));e.test(i+"chain")&&n.test(i+"input")?$():i("0")}))()}();const G=function(){let t=!0;return function(e,n){const i=t?function(){if(n){const t=n.apply(e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function Q(t,e){const n=B();return(Q=function(t,e){return n[t-=130]})(t,e)}function B(){const t=["ignoreObjects",'{}.constructor("return this")( )',"lookAt","value","getWorldQuaternion","dot","constant","matrixWorldInverse","4751334twHMvi","visible","while (true) {}","Vector4","2151846rOivRW","string","multiply","depth","projectionMatrix","matrixWorld","update","__proto__","multiplyScalar","4480360FqSUrU","518176kfiVPK","forEach","info","warn","constructor","normal","negate","25czJvRo","getRenderTarget","Quaternion","bind","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","Plane","add","23920ySYCoN","resolution","Matrix4","Vector3","autoClear","applyMatrix4","trace","length","projectPoint","clone","setRenderTarget","parent","3673159dHBEVT","buffers","init","counter","return (function() ","sign","console","state","14517NOVhep","gger","stateObject","PerspectiveCamera","sub","table","apply","setMask","applyQuaternion","prototype","toString","elements","reflect","debu","function *\\( *\\)","set","22TxnoFF","error","getWorldPosition","3042hUyGfC","copy"];return(B=function(){return t})()}G(void 0,(function(){const t=Q,e=function(){const t=Q;let e;try{e=Function(t(149)+t(175)+");")()}catch(n){e=window}return e}(),n=e[t(151)]=e[t(151)]||{},i=["log",t(199),t(198),t(170),"exception",t(158),t(139)];for(let r=0;r<i.length;r++){const e=G[t(200)][t(162)][t(206)](G),a=i[r],o=n[a]||e;e[t(193)]=G.bind(G),e[t(163)]=o.toString[t(206)](o),n[a]=e}}))();const Y=_({__name:"reflectorMipMap",props:{parent:{},resolution:{default:512},ignoreObjects:{default:[]}},setup(t,{expose:e}){const n=Q,i=t,r=new(x[n(131)]),a=new(x[n(135)]),o=new(x[n(156)]),s=new W,l=y({width:i[n(134)],height:i[n(134)],settings:{type:v}}),c=y({width:i.resolution,height:i.resolution,settings:{type:v}}),{camera:u,renderer:p,scene:f}=g(),{onBeforeLoop:S}=d();return S((()=>{const t=n;(()=>{const t=n;if(!u[t(177)])return;r[t(168)](new(x[t(136)])(0,1,0),0),r[t(138)](i[t(144)][t(191)]),o[t(173)](u[t(177)]);const e=new(x[t(136)])(0,0,1)[t(142)]()[t(202)](),s=u.value.getWorldPosition(new(x[t(136)]));e[t(165)](r[t(201)]);const c=new(x[t(136)]);r[t(141)](s,c);const v=c[t(142)]();v[t(157)](s),v.add(c),o.position[t(173)](v);const g=new m(0,0,-1);g.applyQuaternion(u[t(177)][t(178)](new(x[t(205)]))),g[t(132)](s);const d=new m;i[t(144)][t(171)](d),d[t(157)](g),d.reflect(r[t(201)])[t(202)](),d[t(132)](i[t(144)][t(171)](new(x[t(136)]))),o.up[t(168)](0,1,0),o[t(161)](u[t(177)][t(178)](new h)),o.up[t(165)](r[t(201)]),o[t(176)](d),o.updateMatrixWorld();const y=new w;y[t(168)](.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y[t(188)](o[t(190)]),y[t(188)](o[t(181)]),a[t(173)](y),r[t(138)](o.matrixWorldInverse);const S=new(x[t(185)])(r.normal.x,r[t(201)].y,r.normal.z,r[t(180)]),P=o[t(190)],_=new(x[t(185)]);_.x=(Math[t(150)](S.x)+P[t(164)][8])/P[t(164)][0],_.y=(Math[t(150)](S.y)+P[t(164)][9])/P.elements[5],_.z=-1,_.w=(1+P[t(164)][10])/P[t(164)][14],S[t(194)](2/S[t(179)](_)),P[t(164)][2]=S.x,P[t(164)][6]=S.y,P[t(164)][10]=S.z+1,P[t(164)][14]=S.w;const z=p.value[t(204)]();p.value[t(143)](l.value),p.value[t(152)][t(146)][t(189)][t(160)](!0),!1===p.value[t(137)]&&p[t(177)].clear(),i[t(174)][t(197)]((e=>e[t(183)]=!1)),p.value.render(f[t(177)],o),i[t(174)][t(197)]((e=>e[t(183)]=!0)),p[t(177)][t(143)](z)})(),l[t(177)]&&c[t(177)]&&p[t(177)]&&s[t(192)](l[t(177)].texture,c[t(177)],p[t(177)])})),e({matrix:a,renderTarget:c}),(t,e)=>null}});function $(t){function e(t){const n=Q;if(typeof t===n(187))return function(t){}[n(200)](n(184)).apply(n(148));1!==(""+t/t)[n(140)]||t%20==0?function(){return!0}[n(200)](n(166)+n(154)).call("action"):function(){return!1}[n(200)]("debu"+n(154)).apply(n(155)),e(++t)}try{if(t)return e;e(0)}catch(n){}}!function(t,e){for(var n=tt,i=K();;)try{if(347389===parseInt(n(393))/1*(parseInt(n(408))/2)+-parseInt(n(410))/3+-parseInt(n(385))/4*(-parseInt(n(394))/5)+parseInt(n(412))/6*(parseInt(n(403))/7)+-parseInt(n(401))/8+-parseInt(n(397))/9+parseInt(n(382))/10)break;i.push(i.shift())}catch(r){i.push(i.shift())}}();var q=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(405)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function K(){var t=["counter","length","trace","324701VUXafN","415QHNrFM","input","constructor","2296260WTTmZu","debu","table","__proto__","3606696mGXyxY","while (true) {}","140TPrwGH","bind","apply","error","init","2XNjiRD","stateObject","1481133JifgmN","string","200628oAlyIQ","exception","gger","function *\\( *\\)",'{}.constructor("return this")( )',"console","chain","call","3385630QKjytB","log","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","10364xUkgST","info","test","warn","return (function() "];return(K=function(){return t})()}!function(){q(this,(function(){var t=tt,e=new RegExp(t(415)),n=new RegExp(t(384),"i"),i=et(t(407));e[t(387)](i+t(418))&&n.test(i+t(395))?et():i("0")}))()}();var J=function(){var t=!0;return function(e,n){var i=t?function(){if(n){var t=n[tt(405)](e,arguments);return n=null,t}}:function(){};return t=!1,i}}();function tt(t,e){var n=K();return(tt=function(t,e){return n[t-=381]})(t,e)}function et(t){function e(t){var n=tt;if(typeof t===n(411))return function(t){}.constructor(n(402))[n(405)](n(390));1!==(""+t/t).length||t%20==0?function(){return!0}[n(396)](n(398)+n(414))[n(381)]("action"):function(){return!1}[n(396)](n(398)+n(414))[n(405)](n(409)),e(++t)}try{if(t)return e;e(0)}catch(n){}}J(void 0,(function(){var t,e=tt;try{t=Function(e(389)+e(416)+");")()}catch(l){t=window}for(var n=t[e(417)]=t[e(417)]||{},i=[e(383),e(388),e(386),e(406),e(413),e(399),e(392)],r=0;r<i[e(391)];r++){var a=J[e(396)].prototype.bind(J),o=i[r],s=n[o]||a;a[e(400)]=J[e(404)](J),a.toString=s.toString[e(404)](s),n[o]=a}}))();export{Y as _};

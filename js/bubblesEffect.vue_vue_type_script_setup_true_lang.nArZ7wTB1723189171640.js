import{a6 as n,C as t,ck as e,q as o,bV as i,aN as r,Z as a,h as s,aB as l}from"./three.5MXJ6W7w1723189171640.js";import{p as u,$ as c,N as f}from"./@tresjs.LTwFwASm1723189171640.js";import{d as p,b as m,a4 as g,a1 as b,o as v,D as y,J as d,aj as h,ak as w,u as _}from"./@vue.Q1VpS3901723189171640.js";function x(n,t){const e=M();return(x=function(n,t){return e[n-=143]})(n,t)}const z=x;!function(n,t){const e=x,o=M();for(;;)try{if(900209===-parseInt(e(149))/1+parseInt(e(153))/2+-parseInt(e(194))/3+-parseInt(e(157))/4+parseInt(e(166))/5+-parseInt(e(197))/6+parseInt(e(171))/7)break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const S=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e.apply(t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){S(this,(function(){const n=x,t=new RegExp(n(147)),e=new RegExp(n(148),"i"),o=I("init");t[n(151)](o+n(187))&&e[n(151)](o+n(162))?I():o("0")}))()}();const P=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[x(188)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();P(void 0,(function(){const n=x,t=function(){const n=x;let t;try{t=Function(n(186)+n(181)+");")()}catch(e){t=window}return t}(),e=t[n(152)]=t[n(152)]||{},o=[n(175),n(183),n(182),n(158),"exception",n(173),n(168)];for(let i=0;i<o[n(143)];i++){const t=P.constructor[n(154)].bind(P),r=o[i],a=e[r]||t;t.__proto__=P.bind(P),t.toString=a[n(193)].bind(a),e[r]=t}}))();const T=d(z(198),null,null,-1);function M(){const n=["log","sin","position","xRayEffect","glowColor","uTime",'{}.constructor("return this")( )',"info","warn","Color","color","return (function() ","chain","apply","action","TresMeshRef","traverse","dispose","toString","184893xuCzUi","geometry","Mesh","1280046VSMrgT","TresBufferGeometry","length","AdditiveBlending","value","uniforms","function *\\( *\\)","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","692126wOIdMF","TresShaderMaterial","test","console","1570780pDlsnf","prototype","call","while (true) {}","5217584skFBxi","error","string","constructor","opacity","input","DoubleSide","gger","stateObject","1876280MtmOko","debu","trace","counter","TresMesh","14077399DbWEuW","uOpacity","table","#84ccff"];return(M=function(){return n})()}const C=p({__name:z(178),props:{model:{},color:{default:z(174)},opacity:{default:1}},async setup(o){const i=z;let r,a;const s=o,l=m(),p=[];s.model[i(191)]((t=>{const e=i;t instanceof n[e(196)]&&(t[e(195)].verticesNeedUpdate=!0,p.push(t.geometry))}));const _=([r,a]=g((()=>f({map:"./plugins/medical/image/brainXRayLight.png"}))),r=await r,a(),r),x={uniforms:{c:{type:"f",value:1.11},p:{type:"f",value:1},glowColor:{type:"c",value:new t(s[i(185)])},lightningTexture:{type:"t",value:_.map},offsetY:{type:"f",value:.1},uTime:{type:"f",value:0},uOpacity:{type:"f",value:s[i(161)]}},vertexShader:"uniform float c;\nuniform float p;\nuniform float uTime;\nvarying float intensity;\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    vec3 vNormal=normalize(normalMatrix*normal);\n    intensity=pow(c-abs(dot(vNormal,vec3(0,0,1))),p);\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}",fragmentShader:"uniform vec3 glowColor;\nuniform sampler2D lightningTexture;\nvarying float intensity;\nvarying vec2 vUv;\nuniform float offsetY;\nuniform float uTime;\nuniform float uOpacity;\n\nvoid main(){\n  vec2 uv=vUv;\n  uv.y+=offsetY;\n  vec3 glow=glowColor*intensity;\n  vec3 color=vec3(step(.1,uv.y)-step(.2,uv.y))-vec3(texture2D(lightningTexture,uv));\n  float alpha=clamp(cos(uTime*3.),.5,1.);\n  gl_FragColor=vec4(glow+color,alpha*uOpacity);\n}",side:n[i(163)],blending:n[i(144)],depthWrite:!1};x[i(146)].offsetY[i(145)]=Math[i(176)](5);const{camera:S}=u(),{onLoop:P}=c();return P((({delta:n})=>{const t=i;S[t(145)][t(177)]&&l[t(145)]&&(x[t(146)][t(180)].value+=n)})),b((()=>{const t=i;l[t(145)]&&(l[t(145)][t(195)][t(192)](),l.value[t(195)]=e(p)),s.color&&(x[t(146)][t(179)][t(145)]=new(n[t(184)])(s.color)),s[t(161)]&&(x[t(146)][t(172)][t(145)]=s.opacity)})),(n,t)=>{const e=i;return v(),y(e(170),{ref_key:e(190),ref:l},[T,d(e(150),h(w(x)),null,16)],512)}}});function I(n){function t(n){const e=x;if(typeof n===e(159))return function(n){}[e(160)](e(156)).apply(e(169));1!==(""+n/n)[e(143)]||n%20==0?function(){return!0}[e(160)](e(167)+e(164))[e(155)](e(189)):function(){return!1}[e(160)](e(167)+"gger")[e(188)](e(165)),t(++n)}try{if(n)return t;t(0)}catch(e){}}const F=O;!function(n,t){const e=O,o=j();for(;;)try{if(731927===-parseInt(e(396))/1+parseInt(e(377))/2*(-parseInt(e(386))/3)+parseInt(e(360))/4*(parseInt(e(370))/5)+-parseInt(e(421))/6+parseInt(e(426))/7*(parseInt(e(419))/8)+parseInt(e(393))/9*(-parseInt(e(387))/10)+-parseInt(e(376))/11*(-parseInt(e(378))/12))break;o.push(o.shift())}catch(i){o.push(o.shift())}}();const U=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[O(392)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();!function(){U(this,(function(){const n=O,t=new RegExp("function *\\( *\\)"),e=new RegExp(n(380),"i"),o=E(n(368));t[n(388)](o+"chain")&&e.test(o+"input")?E():o("0")}))()}();const B=function(){let n=!0;return function(t,e){const o=n?function(){if(e){const n=e[O(392)](t,arguments);return e=null,n}}:function(){};return n=!1,o}}();function j(){const n=["102690HtMGwM","test","randInt","toString","color","apply","387yqEKgu","trace","uOpacity","944681SWLEyH","mergeGeometries","process","TresMeshRef","MathUtils","array","opacity","return (function() ","uniforms","setAttribute","warn","bubblesEffect","position","map","semantic","randFloat","length","material","bind","value","uSlowTime","while (true) {}","table","7432TdvCmS","model","4664124FmUylV","push","exception","__proto__","gger","5180gqVlwr","Float32BufferAttribute","call","BufferGeometryRef","bubbles","afective","4uvZbaM","glowColor","bridge","ShaderMaterial","geometry","Color","traverse","prototype","init","log","4961425lzMtLU","action","constructor","size","TresBufferGeometry","string","319VxIPtq","5118jLjGHE","1005000pUBzYW","attributes","\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)","amigdala","includes","console","TresPoints","brainstem","1422yOqvnh"];return(j=function(){return n})()}function O(n,t){const e=j();return(O=function(n,t){return e[n-=356]})(n,t)}B(void 0,(function(){const n=O,t=function(){const n=O;let t;try{t=Function(n(403)+'{}.constructor("return this")( ));')()}catch(e){t=window}return t}(),e=t[n(383)]=t.console||{},o=[n(369),n(406),"info","error",n(423),n(418),n(394)];for(let i=0;i<o[n(412)];i++){const t=B[n(372)][n(367)][n(414)](B),r=o[i],a=e[r]||t;t[n(424)]=B.bind(B),t.toString=a[n(390)][n(414)](a),e[r]=t}}))();const D=p({__name:F(407),props:{model:{},color:{default:"#FFF"},opacity:{default:1}},setup(t){const e=F,u=t,f=[e(359),e(410),"episodic",e(398),e(381),e(385),e(362),"cerebellum","analitic"],p={};u[e(420)][e(366)]((n=>{const t=e;n instanceof o&&f[t(409)]((e=>{const o=t;if(n.name[o(382)](e)){if(p[e]){const t=[p[e],n[o(364)]];return p[e]=i[o(397)](t),p}return p[e]=n[o(364)]}return[]}))}));const g=m(),x=new(n[e(363)])({uniforms:{glowColor:{type:"c",value:new(n[e(365)])(u[e(391)])},uTime:{type:"f",value:0},uSlowTime:{type:"f",value:0},uBubblesUp:{type:"f",value:1},uOpacity:{type:"f",value:u[e(402)]}},vertexShader:"uniform float p;\nuniform float uTime;\nuniform float uSlowTime;\nuniform float uBubblesUp;\nvarying float intensity;\nattribute vec2 aDelayDuration;\nattribute float size;\nattribute vec4 bubbles;\nvarying float alpha;\n\nfloat easeExpoInOut(float p){\n    return((p*=2.)<1.)?.5*pow(2.,10.*(p-1.)):.5*(2.-pow(2.,-10.*(p-1.)));\n}\n\nvoid main()\n{\n    intensity=.9;\n    vec4 mvPosition=modelViewMatrix*vec4(position,1.);\n    gl_PointSize=size*(300./-mvPosition.z);\n    float m=mod(size,sin(uSlowTime*.12+size));\n    \n    alpha=step(.5,abs(m));\n    if(m>.5&&m<.7){\n        gl_PointSize=.9*size;\n    }\n    if(m>.8){\n        gl_PointSize=.9*size;\n    }\n    \n    gl_Position=projectionMatrix*mvPosition;\n    \n    if(bubbles.w>0.&&bubbles.w<2.&&bubbles.x!=0.&&bubbles.y!=0.){\n        gl_PointSize=size+15.;\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        \n        float tProgress=smoothstep(0.,aDelayDuration.x,uBubblesUp);\n        vec3 tranlated=mix(position,bubbles.xyz,tProgress);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        gl_Position+=projectionMatrix*bPosition;\n        alpha=5.;\n    }\n    \n    if(bubbles.w==2.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,.6);\n        gl_PointSize=size+60.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n    if(bubbles.w==3.){\n        alpha=clamp(abs(sin(uTime-bubbles.y)),.3,1.);\n        gl_PointSize=size+90.;\n        \n        gl_PointSize=uBubblesUp*gl_PointSize;\n        float normalized=clamp(uBubblesUp,0.,2.)*2.;\n        vec3 tranlated=mix(position,bubbles.xyz,normalized);\n        vec4 bPosition=modelViewMatrix*vec4(tranlated,1.);\n        gl_Position+=projectionMatrix*bPosition;\n    }\n}",fragmentShader:"precision mediump float;\nuniform vec3 glowColor;\nvarying float intensity;\nvarying float alpha;\nuniform float uOpacity;\nvoid main() {\n  float distanceToCenter = distance(gl_PointCoord, vec2(.5));\n  float pct = 1. - smoothstep(0., .5, distanceToCenter);\n  vec3 color = vec3(1.) * gl_FragColor.rgb;\n  vec3 glow = glowColor * intensity;\n  gl_FragColor = vec4(glow, clamp(alpha, 0., 1.));\n  gl_FragColor = vec4(glow, pct * gl_FragColor.a);\n  gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.a * uOpacity);\n  // gl_FragColor=vec4(1.,1.,0.,1.);\n}",blending:r,side:a,depthTest:!1,vertexColors:!1,transparent:!0});b((()=>{g[e(415)]&&(()=>{const t=e,o=[],i=[],r=[],a=[];for(let e=0;e<2e4-3*f[t(412)];e+=1){const l=n[t(400)][t(389)](0,f.length-1),u=f[l],c=p[u][t(379)][t(408)].array[3*e+0]||0,m=p[u][t(379)][t(408)][t(401)][3*e+1]||0,g=p[u][t(379)][t(408)][t(401)][3*e+2]||0;if(i[t(422)](c,m,g),o[e]=n[t(400)][t(411)](10,20),e%100==0){const n=s.randInt(100,250)+m;a.push(c,n,g,1)}else a[t(422)](c,m,g,0);r[2*e+0]=n[t(400)][t(411)](.5,1.5),r[2*e+1]=2.5}g[t(415)][t(405)]("aDelayDuration",new(n[t(427)])(r,2)),g[t(415)][t(405)](t(358),new(n[t(427)])(a,4)),g[t(415)][t(405)]("position",new l(i,3)),g[t(415)][t(405)](t(391),new l([],3)),g.value[t(405)](t(373),new(n[t(427)])(o,1)),g.value.computeBoundingSphere()})()}));const z=m(),{onLoop:S}=c();return S((({delta:t})=>{const o=e;z[o(415)]&&(z.value[o(413)].uniforms.uTime[o(415)]+=.05,z[o(415)][o(413)][o(404)][o(416)][o(415)]+=1/400),u[o(391)]&&(x.uniforms[o(361)][o(415)]=new(n[o(365)])(u[o(391)])),u[o(402)]&&(x[o(404)][o(395)].value=u[o(402)])})),(n,t)=>{const o=e;return v(),y(o(384),{ref_key:o(399),ref:z},[d(o(374),{ref_key:o(357),ref:g},null,512),d("TresShaderMaterial",h(w(_(x))),null,16)],512)}}});function E(n){function t(n){const e=O;if(typeof n===e(375))return function(n){}[e(372)](e(417))[e(392)]("counter");1!==(""+n/n)[e(412)]||n%20==0?function(){return!0}[e(372)]("debu"+e(425))[e(356)](e(371)):function(){return!1}[e(372)]("debu"+e(425))[e(392)]("stateObject"),t(++n)}try{if(n)return t;t(0)}catch(e){}}export{C as _,D as a};
